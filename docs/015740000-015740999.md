# StackOverflow 问答 15740000-15740999

# javascript - 为每个 TD 提供自定义类以进行样式设置 - 数据表和 jQuery

> ID：15740005
> 
> 赞同：53
> 
> 时间：2013-04-01T08:18:50.373
> 
> 标签：javascript, jquery, datatables, html-table

我正在使用数据表在[表](http://www.datatables.net)中显示服务器端数据。

不过，我无法定位和设置单个单元格 ( `<TD>`) 的样式。我搜索了一下，发现可能有：

```
"fnRowCallback": function( nRow, aData, iDisplayIndex ) {
    ....
} 
```

...但我不太确定怎么做，因为我有几张桌子，而且并非所有桌子都有相同数量的列和行。我想为所有`TDs`“列”提供通用类。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-03T07:47:54.340

您可以`sClass`在列定义中使用参数。例如，如果您有 3 列并且想要为第二列和第三列传递自定义类，您可以：

```
"aoColumns": [
    null,
    { "sWidth": "95px", "sClass": "datatables_action" },
    { "sWidth": "45px", "sClass": "datatables_action" }
] 
```

您可以查看数据[表文档](http://www.datatables.net/usage/columns)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-04-25T10:41:11.950

您可以使用`columnDefs`为每列定义类。

**咖啡脚本**中的示例：

```
$('table').dataTable(
  columnDefs: [
    {
      targets: -1 # targets last column, use 0 for first column
      className: 'last-column'
    }
  ]
); 
```

这是使用新的 API 1.10+。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-01-08T10:08:10.247

对于那些在搜索`fnRowCallback`并希望根据单元格内容而不是使用静态 css 类添加样式时发现此问题的人，使用以下方法`fnRowCallback`可以解决问题：

```
oTable = $('#matrix').dataTable({
  ...
  "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
    for (var i in aData)  {

      // Check if a cell contains data in the following format:
      // '[state] content'
      if (aData[i].substring(0,1)=='[') {

        // remove the state part from the content and use the given state as CSS class
        var stateName= aData[i].substring(1,aData[i].indexOf(']'));
        var content= aData[i].substring(aData[i].indexOf(']')+1);
        $('td:eq('+i+')', nRow).html(content).addClass(stateName);
      }
    }
  }
}); 
```

希望这可能对未来的访客有用:-)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-03-07T17:39:23.447

以下是`createdCell`使用[DataTables 1.10+ 语法](https://datatables.net/reference/option/columns.createdCell)的方法。这种方法的好处是您可以有条件地设置单元格的样式。

```
"columnDefs": [
{
        "targets": [16],
        "createdCell": function(td, cellData, rowData, row, col) {
            switch(cellData) {
            case "Pending":
                $(td).addClass('pending');
                break;
            case "Rejected":
                $(td).addClass('rejected');
                break;
            case "Approved":
                $(td).addClass('approved');
                break;
            case "SAP":
                $(td).addClass('sap');
                break;
            case "Reconciled":
                $(td).addClass('reconciled');
                break;
            }
        }
    }
], 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-09-23T16:45:10.417

如果要在回调中定位行或单个单元格：

```
var table = $('#order-history-table').DataTable(
    {
        "ajax": url,
        "pageLength": 20,
        "createdRow": function( row, data, dataIndex ) {

            // Add a class to the cell in the second column
            $(row).children(':nth-child(2)').addClass('text-justify');

            // Add a class to the row
            $(row).addClass('important');
        }
    }
); 
```

我无法让“createdCells”参数工作，所以必须通过行来完成。

# php - 我可以通过电子邮件中的链接以编程方式创建优惠券代码吗？

> ID：15740018
> 
> 赞同：0
> 
> 时间：2013-04-01T08:20:06.203
> 
> 标签：php, wordpress, email, coupon

邮件中有 10 张优惠券。当有人想要打印一个时，他们将单击邮件中的链接，该链接将为该人生成一个唯一的、可打印的 (PDF) 优惠券代码。

如何生成该优惠券代码 - 脚本将驻留在哪里？会有服务器监听点击吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:26:50.760

电子邮件中的链接应转到您的网站。

类似于以下内容：电子邮件 -> yoursite.com/coupon.php?generate=1

coupon.php 将是您服务器上生成优惠券的 php 脚本。优惠券既可以预先生成并展示，也可以现场生成。

# actionscript-3 - AS3 - 无法访问空对象引用的属性或方法

> ID：15740019
> 
> 赞同：0
> 
> 时间：2013-04-01T08:20:14.140
> 
> 标签：actionscript-3

Flash 会向我抛出错误的这段代码有什么问题？

`var list:List = List(DisplayObjectContainer(stage.getChildByName(target1)).getChildByName(target2));`

不用担心`target1`and `target2`，它们是字符串。如果我的信息很短，请告诉我。

我第一次使用`MovieClip`而不是`DisplayObjectContainer`，然后是 Google on net........

这里的重点是我动态创建了 a`MovieClip` `target1`并静态创建了 a`listbox` `target2`并且我想访问`listbox`from 阶段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:26:47.877

可能的原因：

1.  `stage`在您的代码上下文中无法访问。
2.  您存储的字符串`target1`与舞台上可用的孩子的实例名称不匹配（假设第 1 点不是这种情况，您确实可以访问舞台）。
3.  与第 2 点相同，但带有`target2`。

您应该`trace()`查看这三个属性中的每一个并查看哪个返回`null`。

# php - MAX(user_id) 不工作

> ID：15740020
> 
> 赞同：2
> 
> 时间：2013-04-01T08:20:14.333
> 
> 标签：php, mysql

我想从表中获取最后一个插入 ID，我正在使用`MAX(user_id)`，但它不起作用（列`user_id`是 auto_increment 字段）这是我的代码

`class.php`

```
<?php

class Chat extends Core 
{
   public function addUser($email) {
        $this->query("INSERT INTO `users`(`username`) VALUES ('" . $this->db->real_escape_string($email) . "') ");
        $q = "select MAX(user_id) from `users`";
        $result = mysql_query($q);
        $data = mysql_fetch_array($result);
    }
}

}

?> 
```

当我运行此查询时，我收到这样的警告消息

> 警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果资源

这是我的 core.php

```
<?php
class Core {
   protected $db,$result;
   private $rows;
   public function __construct() {
    $this->db=new mysqli('localhost','root','','site');
   }
   public function query($sql)
   {
    $this->result=  $this->db->query($sql);
}
public function rows(){
    for($x=1;$x<=$this->db->affected_rows;$x++)
    {
        $this->rows[]=  $this->result->fetch_assoc();
    }
    return $this->rows;
   }
}

?> 
```

有谁能够帮助我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:24:05.480

您是否试图获取最后插入的 id

然后使用

```
$last_user_id = $this->db->insert_id(); 
```

**建议**

更好地使用 ci db 功能

```
 public function addUser($email) {
    $userData = NULL;
    $result = $this->db->insert('users', array('users' => $email));
    if ($result == TRUE) {
      $user_id = $this->db->insert_id();
      $query = $this->db->get_where('users', array('user_id' => $user_id));
      $userData = $query->row_array();
    }
    return $userData;
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:29:45.843

看起来你在`mysqli`下面使用，所以这会做你想要的：

```
public function addUser($email) 
{
    $this->query("INSERT INTO `users`(`username`) ...");
    $userid = $this->db->insert_id;
    // ... etc ...
} 
```

因为`mysqli::$insert_id`是基于会话的，所以您可以避免导致错误标识符被传递的竞争条件。

也可以看看：[`mysqli::$insert_id`](http://www.php.net/manual/en/mysqli.insert-id.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:23:13.077

请使用以下功能，它将满足您的要求。

```
 mysql_insert_id() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:24:18.637

使用下面的一个来获取最后一个 id：

```
mysql_insert_id(); 
```

AS Mysql 函数已弃用，您可以使用

```
mysqli_insert_id()
PDO::lastInsertId() 
```

# spring - 使用 用于瓷砖

> ID：15740021
> 
> 赞同：0
> 
> 时间：2013-04-01T08:20:18.143
> 
> 标签：spring, model-view-controller, tiles

我们可以使用`mvc:view-controller`标签来显示瓷砖视图吗？

**例如：**如果我们有表单定义的tiles定义，

```
name="userLogon.page" 
template="webapp/app/layout/baseLayoutExterior.jsp" 
extends="basePageDefinition" 
```

`mvc:view-controller path="/logon" view-name="userLogon.page"`我们可以在我们的`servlet.xml`文件中写入。

我收到一个**HTTP 404 RESOURCE NOT FOUND ERROR**，而正常`hello.jsp`页面显示没有问题。

请帮助我卡住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:10:39.270

是的

您需要添加一个`TilesConfigurer`和一个`TilesView`

```
<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver"
    id="tilesViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean>
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer"
    id="tilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/layouts/layouts.xml</value>
            <!-- Scan views directory for Tiles configurations -->
            <value>/WEB-INF/views/**/views.xml</value>
        </list>
    </property>
</bean> 
```

示例 Layout.xml 位于`webapp/WEB-INF/layouts`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">

<tiles-definitions>

  <definition name="default" template="/WEB-INF/layouts/default.jspx">
    <put-attribute name="header" value="/WEB-INF/views/header.jspx" />
    <put-attribute name="menu" value="/WEB-INF/views/menu.jspx" />
    <put-attribute name="footer" value="/WEB-INF/views/footer.jspx" />
  </definition>

</tiles-definitions> 
```

view.xml 之一位于`webapp/WEB-INF/views/bookmarks`

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE tiles-definitions PUBLIC "-//Apache Software Foundation//DTD Tiles Configuration 2.1//EN" "http://tiles.apache.org/dtds/tiles-config_2_1.dtd">
<tiles-definitions>
    <definition extends="default" name="bookmarks/show">
        <put-attribute name="body" value="/WEB-INF/views/bookmarks/show.jspx" />
    </definition>       
    <definition extends="default" name="bookmarks/list">...</definition>
    <definition extends="default" name="bookmarks/create">...</definition>      
    <definition extends="default" name="bookmarks/update">...</definition>
</tiles-definitions> 
```

一种控制器方法：

```
@RequestMapping("/bookmarks")
@Controller
public class BookmarkController {
    ...
    /** Return the show page. */
    @RequestMapping(method = RequestMethod.GET, value = "/{id}")
    public ModelAndView show(@PathVariable("id") long bookmarkId) {
        return new ModelAndView("bookmarks/show", "bookmark", bookmarkDao.getBzId(bookmarkId));
    }
} 
```

# c - 当格式字符串末尾有换行符时，为什么 scanf 会要求输入两次？

> ID：15740024
> 
> 赞同：22
> 
> 时间：2013-04-01T08:21:06.513
> 
> 标签：c, scanf

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char *method1(void)
{
    static char a[4];
    scanf("%s\n", a);
    return a;
}

int main(void)
{
    char *h = method1();
    printf("%s\n", h);
    return 0;
} 
```

当我运行上面的代码时，提示要求我输入*两次*（我`scanf`在代码中只使用一次）。这是为什么？

（我输入了“jo”；它要求更多输入，所以我再次输入“jo”。然后它只打印了一次“jo”。）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-01T08:30:37.697

从我的 scanf 手册页

> 格式字符串中的空白（例如空格、制表符或换行符）与输入中的任意数量的空白匹配，包括无空白。其他一切都只匹配自己。

因此，`scanf ("%s\n", a)`它将扫描一个字符串，后跟可选的空格。由于在第一个换行符之后可能会出现更多空格，因此 scanf 不会在第一个换行符之后完成，而是查看接下来的内容。您会注意到您可以输入任意数量的换行符（或制表符或空格），而 scanf 仍将等待更多。

但是，当您输入第二个字符串时，空格序列被定界并且扫描停止。

用于`scanf ("%s", a)`不扫描尾随空格。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-01T08:24:49.903

您必须`\n`从`scanf`. 它应该是

```
scanf("%s",a); 
```

**编辑：解释**

这`%s`意味着 scanf 读取输入字符，直到它得到一个分隔符，该分隔符应该是一个空格，如空格或制表符或换行符（`\n`），所以第一个输入是作为分隔符获取的，`"%s"`并且添加`"\n"`到字符串格式`"%s\n"`意味着scanf 将等待 2 个换行符，第一个换行符与 the 的分隔符有关，`"%s"`第二个换行符与`\n`字符串格式的 the 有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:25:09.477

使用 gets() 或 fgets() 代替...或者使用 scanf("%[^\n]s",a);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-30T14:42:34.327

从 scanf 格式中删除`\n`并给出一个输入，它会根据给定的输出显示一次输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-11T12:30:33.893

您可以使用其中任何一个来避免上述问题： `scanf("%s",a);` 或 `scanf("\n%s",a);`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-20T14:48:25.227

试试这个：不要在 scanf 上使用 \n，它不会问你两次，有时它可能会显示错误

**你的代码**：`scanf("%s\n", a);`

**在 scanf 上试试这个**：`scanf("%s", a);`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-10-06T04:17:30.243

不要在 scanf stdio 函数中使用转义序列

```
 scanf ("%s", a); 
```

# c# - CA2104 警告：有没有办法将一个类标记为“不可变”来抑制它？

> ID：15740025
> 
> 赞同：12
> 
> 时间：2013-04-01T08:21:10.220
> 
> 标签：c#, immutability, code-analysis

考虑下面的代码，它引发[`CA2104: Do not declare read only mutable reference types.`](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CA2104%29;k%28TargetFrameworkMoniker-.NETFramework)

```
public class Test
{
    // This provokes CA2104: "Do not declare read only mutable reference types".
    protected readonly ImmutableClass ImmutableMember;
}

public class ImmutableClass
{
} 
```

有谁知道以抑制警告 CA2104 的方式将类标记为不可变的方法？

`MutableClass`我尝试了装饰[`[ImmutableObject(true)]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.immutableobjectattribute.aspx)但没有成功的希望（因为该属性非常清楚地供表单编辑器使用），果然它不起作用。

我假设代码分析在确定是否发出 CA2104 时使用已知不可变类型的列表，因此我们不能使用相同的方法。

我想即使你*可以*将一个类标记为不可变，编译器也无法真正检查它是否为真，但至少它可能是一个有用的指标。

无论如何，有什么我忽略的属性吗？如果没有，压制将不得不做。

目前似乎没有其他方法可以做到这*一点*。

我确实[从 Joe Duffy（“Windows 上的并发编程”的作者）那里找到了一篇关于这种事情的有趣博客](http://joeduffyblog.com/2007/11/11/immutable-types-for-c/)。

他从*“想象我们有一个 ImmutableAttribute”开始。*... :)

这很有趣——他不厌其烦地编写了一些新的 FxCop 规则来对归因于不可变的类型进行一些分析。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T15:02:47.937

一个`protected readonly`领域并不是那么清楚。如`protected`，您可能期望派生类可以初始化该字段：

```
public class Test
{
    protected readonly ImmutableClass ImmutableMember;
}

public class SpecialTest : Test
{
    public SpecialTest() { ImmutableMember = new ImmutableClass; }
} 
```

但是，情况并非如此——你会得到一个编译错误（CS0191）。

我不知道 CA2104 背后的确切推动力，但您可以通过以下方式获得相同的结果而无需只读：

```
public class Test
{
    protected ImmutableClass ImmutableMember {get; private set;}

    public Test()
        :this(new ImmutableClasse())
    {
    }

    public Test(ImmutableClass immutableClass)
    {
        ImmutableMember = new ImmutableClasse();
    }
} 
```

并避免使用 CA2104。

# 更新：

对于评论（以及未来的读者），正如您所说，您可以使用支持字段来获取只读并提供受保护的 getter 以在派生类中获取它：

```
public class Test
{
    private readonly ImmutableClass immutableMember;

    protected ImmutableClass ImmutableMember { get { return immutableMember; } }

    public Test(ImmutableClass immutableMember)
    {
        this.immutableMember = immutableMember;
    }
} 
```

# mysql - 用户行为监控数据库

> ID：15740030
> 
> 赞同：0
> 
> 时间：2013-04-01T08:21:28.200
> 
> 标签：mysql, database-design

我开发了一个 iPhone 应用程序，允许用户向/从服务器发送/接收文件。

此时我希望将数据库添加到我的服务器端应用程序（c# 中的套接字）以跟踪以下内容：

1.  个人卡（姓名、年龄、电子邮件等） - 用户可以（但没有义务）填写一张
2.  到目前为止用户发送和接收的文件数
3.  每隔一段时间发送一次的应用程序统计信息，其中包含应用程序中的错误数量、他的操作系统版本等信息...
4.  过去一小时内发送/接收的文件总数（针对所有用户）

每个用户都有一个唯一的 36 位十六进制数字“AF41-FB11-.....-FFFF”

数据库应提供以下答案：哪些用户是“重度用户”，过去一天/小时/月交换了多少文件，操作系统与错误数量之间是否存在相关性。

不幸的是我对数据库设计不是很熟悉，所以我想到了以下几点：

1.  一个**用户**表，其中将包含：

    唯一用户 ID | 牧师卡 | 文件发送 | 收到的文件

2.  一个**App stats**表（每个用户可以有很多条记录）

    唯一用户 ID | number_of 错误 | 操作系统版本 | .... | sumbission_date_time

3.  **一般统计表**（每小时添加新记录）

    | total_files_received_in_the_last_hour | total_files_sent_in_the_last_hour | 提交日期时间

我的问题是：

1.  在性能方面，在服务器端应用程序中收集和存储每个用户的数据是否有意义，并每小时一次将其全部放入数据库（例如打开连接、更新字段/插入字段、关闭连接）？或者我应该简单地更新用户每次执行时所做的每笔交易（发送/接收文件）？
2.  我应该创建一个不同的主键，而不是 36 位 id 吗？
3.  这个设计有意义吗？？

我正在使用 mySQL 5.1，innoDB，DBMS 与服务器端应用程序在同一台机器上

任何见解都会有所帮助！

# java - 在 Java Card 2.2.1 平台中存储日期和时间

> ID：15740034
> 
> 赞同：2
> 
> 时间：2013-04-01T08:22:07.963
> 
> 标签：java, byte, smartcard, javacard, apdu

我正在开发一个智能卡应用程序，我必须存储`Date`信息。简而言之，我想存储最后 (10) 个应该包含`Date`和`Time`在智能卡中的交易。

平台用于：

*   Java 卡 2.2.1
*   全球平台 2.1.1

我找到了[Class Date](http://javacard.kenai.com/javadocs/connected/java/util/Date.html)，但它需要 Java Card 3.0。

`Date/Time`是否可以使用 Java Card 2.2.1将交易信息存储在智能卡中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T17:51:43.373

您可以在 JavaCard 中存储您想要的任何内容（例如重新创建 Date 类的 UNIX 时间戳），但请记住，javacard 没有带击球手的内部时钟。因此，您依赖外部时间源，而时间可能只是提供信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-24T06:54:34.043

是的，您可以存储此类数据，但数据被包装到字节数组或自定义类中，其中包含日、月、年、小时、分钟、秒的字节。

1.  日期/信息应由终端发送（以 APDU 字节为单位）
2.  您的小程序应根据格式解析日期/时间信息
3.  将解析后的数据存储在字节数组或自定义类对象中

如果需要计算时间跨度，则需要创建方法来对字节数组进行加法/减法。

# angularjs - AngularJS - 非 http 服务不更新范围变量

> ID：15740036
> 
> 赞同：1
> 
> 时间：2013-04-01T08:22:17.913
> 
> 标签：angularjs

我刚刚开始使用 AngularJS，但我仍在尝试了解创建服务。从[this](https://stackoverflow.com/questions/15350085/why-does-an-update-to-a-variable-in-a-service-http-not-show-up-in-my-view?lq=1)和[this](https://stackoverflow.com/a/12578750/1212998)来看，我的理解是只要变量的变化在 Angular 内部，就不需要 $watch 了。[我从这里](https://stackoverflow.com/a/11120766/1212998)复制了代码，并对其进行了修改以查看是否可以使我的第一个服务正常工作：

```
myApp.factory('ListService', function() {
    var ListService = {};
    var list = ['a', 'b', 'c'];
    ListService.addItem = function(item) { list.push(item); }
    ListService.size = function() { return list.length; }
    ListService.size1 = list.length;
    return ListService;
});

function Ctrl1($scope, ListService) {
    $scope.message = ListService.size();
    $scope.addItem = function(){
        ListService.addItem('d');
        console.log("size() is " + ListService.size());
        console.log("size1 is " + ListService.size1);
    }
}

function Ctrl2($scope, ListService) {
    $scope.message = ListService.size1;
} 
```

html很简单：

```
<div ng-controller="Ctrl1"> Count is: {{ message }} 
    <input type="button" ng-click="addItem">
</div>

<div ng-controller="Ctrl2"> Count is: {{ message }} 
</div> 
```

单击按钮时，控制台日志显示正确的计数，但“消息”保持不变。原始代码应该是人为设计的，旨在表明服务可用于跨控制器共享代码。

所以我的问题是，为什么这不起作用？如果我错过了一些非常简单的事情，我深表歉意。我是一个初学者，我仍在努力掌握一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:07:46.787

反而

```
$scope.message = ListService.size(); 
```

尝试

```
$scope.getCount = function () {
    return ListService.size();
}; 
```

然后在视图中：

```
Count is: {{getCount()}} 
```

这是因为您的 $scope.message 是原始值，其中包含控制器初始化时 ListService 的大小。

（我的英语真的很糟糕，很抱歉简短的回答）。

# animation - 饼图动画

> ID：15740045
> 
> 赞同：0
> 
> 时间：2013-04-01T08:23:15.467
> 
> 标签：animation, core-plot, pie-chart, fill

我已经用 CorePlot 绘制了一个饼图，我想用动画填充饼图的每一块。关键是 Core-Plot 在 CPTPieChart 上没有动画。那么我应该如何向饼图添加填充动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T23:02:49.223

Core Plot 图的所有可见部分都在 Core Animation 层中绘制。您可以使用所有标准动画。许多特定于 Core Plot 的属性也是可动画的。[Core Plot docs](http://core-plot.googlecode.com/hg/documentation/html/iOS/group__animation.html)中有一个动画属性列表。您还可以使用`CPTAnimation`该类对几乎任何属性进行动画处理，包括 Core Animation 不支持的属性。

# mysql - 键'user_id'的Django重复条目'2'

> ID：15740047
> 
> 赞同：2
> 
> 时间：2013-04-01T08:23:30.903
> 
> 标签：mysql, django, registration

我试图在 Django 1.4 中做一个注册页面。

这些是我的文件：

视图.py

```
 mensaje = ""
        if request.method == 'POST':
                form = RegistrationForm(request.POST)
                if form.is_valid():
                        usr = User.objects.create_user(username = form.cleaned_data['username'], email = form.cleaned_data['mail'], password = form.cleaned_data['pa$

                        cli = cliente(user=usr, nombre=form.cleaned_data['nombre'], apellidos = form.cleaned_data['apellidos'], empresa = form.cleaned_data['empresa$
                        mensaje = "Cliente %s guardado exitosamente con el username %s" % (cli.nombre,cli.user)
                        cli.save()
                        ctx = {'mensaje':mensaje}
                        return HttpResponseRedirect('/')
                else:
                        mensaje = "el formulario no es valido"
                        ctx = {'form': form, 'mensaje': mensaje}
                        return render_to_response('pymes/register.html', ctx, context_instance=RequestContext(request))

        else:
                form = RegistrationForm()
                context = {'form':form}
                return render_to_response('pymes/register.html', context, context_instance=RequestContext(request)) 
```

模型.py

```
class perfilCliente(models.base.ModelBase):
        def _prepare(self):
                super(perfilCliente, self)._prepare()
                def create_cliente_user_callback(sender, instance, created, **kwargs):
                        if created:
                                self.objects.create(user=instance)
                post_save.connect(create_cliente_user_callback, sender=User, weak=False)

class cliente(models.Model):
        __metaclass__   = perfilCliente
        user            = models.OneToOneField(User)
        nombre          = models.CharField(max_length=200)
        apellidos       = models.CharField(max_length=200)
        mail            = models.CharField(max_length=200)
        empresa         = models.CharField(max_length=200)
        status          = models.BooleanField(default=True)
        plan            = models.ForeignKey('pymes.plan',null=True,blank=True)
        def __unicode__(self):
                nombreCompleto = "%s %s"%(self.nombre,self.apellidos)
                return nombreCompleto 
```

注册.html

```
{% extends "base.html" %}
{% block title %} Login {% endblock %}
{% block content %}
{{ mensaje }}
<form action="" method="post">
{% csrf_token %}
{% if form.errors %}<p> Corregir los campos: </p> {% endif %}
<div class="register_div">
        {% if form.nombre.errors %}<p class="error">{{ form.nombre.errors }}</p>{% endif %}
        <p><label for="nombre"{% if form.nombre.errors %} class="error"{% endif %}>Nombre:</label>{{ form.nombre }}</p>
</div>
<div class="register_div">
        {% if form.apellido.errors %}<p class="error">{{ form.apellido.errors }}</p>{% endif %}
        <p><label for="apellido"{% if form.apellido.errors %} class="error"{% endif %}>Apellido:</label>{{ form.apellidos }}</p>
</div>
<div class="register_div">
        {% if form.empresa.errors %}<p class="error">{{ form.empresa.errors }}</p>{% endif %}
        <p><label for="empresa"{% if form.empresa.errors %} class="error"{% endif %}>Empresa:</label> {{ form.empresa }}</p>
</div>
<div class="register_div">
        {% if form.mail.errors %}<p class="error">{{ form.mail.errors }}</p>{% endif %}
        <p><label for="mail"{% if form.mail.errors %} class="error"{% endif %}>Email:</label> {{ form.mail }}</p>
</div>
<div class="register_div">
        {% if form.username.errors %} <p class="error">{{ form.username.errors }}</p>{% endif %}
        <p><label for="username"{% if form.username.errors %} class="error"{% endif %}>Username:</label> {{ form.username }}</p>
</div>
<div class="register_div">
        {% if form.password.errors %}<p class="error">{{ form.password.errors }}</p>{% endif %}
        <p><label for="password"{% if form.password.errors %} class="error"{% endif %}>Password:</label> {{ form.password }}</p>
</div>
<div class="register_div">
        {% if form.passworduno.errors %}<p class="error">{{ form.passworduno.errors }}</p>{% endif %}
        <p><label for="password1"{% if form.passworduno.errors %} class="error"{% endif %}>Verify Password:</label>{{ form.passworduno }}</p>
</div>
<p><input type="submit" alt="register" /></p>
</form> 
```

页面工作正常，但发送表单时显示此错误：

```
Request Method: POST
Request URL: http://192.168.2.106:8000/register/

Django Version: 1.4.5
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'saas.apps.pymes',
 'django.contrib.admindocs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/root/project/saas/saas/apps/pymes/views.py" in register_view
  52\.           cli.save()
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "/usr/local/lib/python2.7/dist-packages/django/db/models/sql/compiler.py" in execute_sql
  912\.             cursor.execute(sql, params)
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File "/usr/local/lib/python2.7/dist-packages/django/db/backends/mysql/base.py" in execute
  114\.             return self.cursor.execute(query, args)
File "/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py" in execute
  174\.             self.errorhandler(self, exc, value)
File "/usr/lib/python2.7/dist-packages/MySQLdb/connections.py" in defaulterrorhandler
  36\.     raise errorclass, errorvalue

Exception Type: IntegrityError at /register/
Exception Value: (1062, "Duplicate entry '3' for key 'user_id'" 
```

这会在 id=3 的数据库中正确创建一个新用户

```
mysql> select * from auth_user;
+----+-----------+------------+-----------+--------------------+----------+----------+-----------+--------------+---------------------+---------------------+
| id | username  | first_name | last_name | email              | password                                                                      | is_staff | is_active | is_superuser | last_login          | date_joined         |
+----+-----------+------------+-----------+--------------------+-------------------------------------------------------------------------------+----------+-----------+--------------+---------------------+---------------------+
|  1 | root      |            |           | sdfds@sdfa.com     | pass1 |        1 |         1 |            1 | 2013-04-01 07:49:58 | 2013-04-01 07:49:58 |
|  2 | oespinoza |            |           | zdssd@yahoo.es | pass2 |        0 |         1 |            0 | 2013-04-01 07:50:46 | 2013-04-01 07:50:46 |
|  3 | loco      |            |           | sdfsd              | pass3 |        0 |         1 |            0 | 2013-04-01 08:03:37 | 2013-04-01 08:03:37 |
+----+-----------+------------+-----------+--------------------+---------+----------+-----------+--------------+---------------------+---------------------+ 
```

房地产交易也很好。但是，在表“cliente”中只显示这个：

```
mysql> select * from pymes_cliente;
+----+---------+--------+-----------+------+---------+--------+---------+
| id | user_id | nombre | apellidos | mail | empresa | status | plan_id |
+----+---------+--------+-----------+------+---------+--------+---------+
|  1 |       1 |        |           |      |         |      1 |    NULL |
|  2 |       2 |        |           |      |         |      1 |    NULL |
|  4 |       3 |        |           |      |         |      1 |    NULL |
+----+---------+--------+-----------+------+---------+--------+---------+ 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:57:20.450

看起来您正在`Profile`为每个注册创建 2 个对象实例：第一个在您的视图中，第二个通过您的信号。

```
# Create & save User object
usr = User.objects.create_user(...)
...
# Create profile
cli = cliente(user=usr, ...)
# Save profile & fire your signal
cli.save() 
```

在你的信号

```
# Creates second profile with same user object, causing error
self.objects.create(user=instance) 
```

删除信号（和`_prepare`），问题就会消失。

旁注：我不确定你为什么在`_prepare`方法中注册你的信号。通常最好在模型文件的底部注册任何信号：

```
class Client(models.Model):
    ...

def create_cliente_user_callback(sender, instance, created, **kwargs):
    ...
post_save.connect(create_cliente_user_callback, sender=User, weak=False) 
```

# android - 滚动、虚拟键盘和主题的问题：java.lang.IllegalArgumentException：参数必须是此视图的后代

> ID：15740048
> 
> 赞同：0
> 
> 时间：2013-04-01T08:23:41.903
> 
> 标签：android, keyboard, scroll, themes

我有一个带有 EditTexts 的 ExpandableListView。如果用户在虚拟键盘启动时尝试滚动，我会收到错误消息：

```
java.lang.IllegalArgumentException: parameter must be a descendant of this view 
```

我试图找到解决此问题的方法，有人建议删除主题。好吧，它解决了崩溃的问题，但是这次我无法编辑 EditText。出现虚拟键盘（即使我有 小写字母`android:capitalize="characters"`）但按下按钮时没有任何反应。

如果我将任何主题**与 .Fullscreen 一起**使用：
虚拟键盘按预期工作，但如果在键盘打开的情况下滚动应用程序会崩溃

如果我使用**没有 .Fullscreen 的**任何主题：
虚拟键盘不起作用，不再崩溃。

键盘启动时有什么方法可以防止垂直滚动？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:03:52.870

[Navneeth Gopalakrishnan](https://stackoverflow.com/users/1135909/navneeth-gopalakrishnan)的[回答](https://stackoverflow.com/a/11656129/1969333)加：

```
 expandList.setOnScrollListener(new OnScrollListener() {
            public void onScrollStateChanged(AbsListView view, int scrollState) {
                InputMethodManager inputManager = (InputMethodManager) MyApplication.getAppContext().getSystemService(Context.INPUT_METHOD_SERVICE);
                if (getWindow().getCurrentFocus() != null) {
                    inputManager.hideSoftInputFromWindow(getWindow().getCurrentFocus().getWindowToken(), 0);
                }
            }

            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
            }
       }); 
```

解决了这个问题。

# c# - 从控制器传递到视图时值发生变化

> ID：15740051
> 
> 赞同：0
> 
> 时间：2013-04-01T08:23:46.897
> 
> 标签：c#, asp.net-mvc-4

我有一点问题。我在 ViewBag 中放了一些 bool 值，但是当它们到达 View 时，它们会改变它们的值。我的控制器动作中有这个

```
 var buckets = db.Buckets.ToList();
        int i=0;
        ViewBag.CV = new bool[buckets.Count];

        foreach (Bucket b in buckets)
        {
            var payByInvoice = db.PaymentOptions.Where(p => p.BucketId == b.Id).Select(p => p.CanPayByInvoice).SingleOrDefault();
            if (payByInvoice != (int)PayByInvoiceState.Accepted)
            {
                ViewBag.CV[i] = false;
            }
            if (payByInvoice == (int)PayByInvoiceState.Accepted)
            { 
                ViewBag.CV[i] = true;
            }
                i++;
        } 
```

当`foreach`完成他的工作时，保留的值`ViewBag.CV`如下：

`ViewBag.CV[0] = true;` `ViewBag.CV[1] = false;` `ViewBag.CV[2] = false;`

当值到达视图时，它们都变为`false`. 我不知道为什么，但是它通过对 first 的评估来设置所有值`if`。如果我`true`在第一次`if`和`false`第二次更改，我只会`true`在值到达视图时得到。

任何想法都会受到欢迎。

# javascript - getJSON 不满意

> ID：15740067
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:25:16.033
> 
> 标签：javascript, jquery, html, ajax, json

我有3个选择：国家，地区，城市，选择一个要更新的国家 /地区选择该国的地区。这是代码。就像逻辑上写的一样。但该地区未更新

```
$(document).ready(function() {

        $('select[name=ad_country]').change(function() {
            current_country = $(this).val();

            $.getJSON('./core/AJAX/advertisement_changecountry.php', {country: current_country}, 
                function(data) {
                    $('select[name=ad_region]').empty();

                    $.each(data.region, function(key, val) {
                        $('select[name=ad_region]').append('<option value="'+val.id_parent+'">'+val.name+'</option>');
                    });

                    $('select[name=ad_city]').empty();

                    $.each(data.city, function(key, val) {
                        $('select[name=ad_city]').append('<option value="'+val.id_parent+'">'+val.name+'</option>');
                    });
                });
            }
        );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:09:04.677

你最后错过了'}'。现在试试这个代码：

```
$(document).ready(function () {

        $('select[name=ad_country]').change(function () {
            current_country = $(this).val();

            $.getJSON('./core/AJAX/advertisement_changecountry.php', { country: current_country },
            function (data) {
                $('select[name=ad_region]').empty();

                $.each(data.region, function (key, val) {
                    $('select[name=ad_region]').append('<option value="' + val.id_parent + '">' + val.name + '</option>');
                });

                $('select[name=ad_city]').empty();

                $.each(data.city, function (key, val) {
                    $('select[name=ad_city]').append('<option value="' + val.id_parent + '">' + val.name + '</option>');
                });
            });
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:29:27.153

你的结束标签有错误

# c++ - 来自一组源节点的 BGL dfs

> ID：15740070
> 
> 赞同：5
> 
> 时间：2013-04-01T08:25:36.040
> 
> 标签：c++, boost, graph, colors, depth-first-search

# **问题**

有一个邻接列表图，我想用 DFS 算法从一组特定的源节点遍历它。主要问题是颜色图是按值传递的。

# **我试过**

通过引用将颜色图封装到结构中：

```
class ref_color_map_wrapper
{
public:
  typedef boost::default_color_type color_type;
  typedef std::vector<color_type> color_map_type;
private:
  color_map_type &color_map;
public:
  ref_color_map_wrapper(color_map_type& color_map)
  : color_map(color_map)
  {}

  color_type& operator[](size_t i)
  {
    return color_map[i];
  }
  const color_type& operator[](size_t i) const
  {
    return color_map[i];
  }
};

namespace boost
{
  template <>
  struct property_traits<ref_color_map_wrapper>
  {
    typedef boost::read_write_property_map_tag category;
    typedef boost::default_color_type value_type;
    typedef boost::default_color_type& reference;
    typedef size_t key_type;
  };

  void put(ref_color_map_wrapper& color_map, vertex_descriptor& v, boost::default_color_type color)
  {
    color_map[v] = color;
  }

  boost::default_color_type get(ref_color_map_wrapper& color_map, vertex_descriptor& v)
  {
    return color_map[v];
  }

  void put(ref_color_map_wrapper& color_map, const vertex_descriptor& v, boost::default_color_type color)
  {
    color_map[v] = color;
  }

  boost::default_color_type get(const ref_color_map_wrapper& color_map, const vertex_descriptor& v)
  {
    return color_map[v];
  }
} 
```

最后是 DFS 的代码：

```
 typedef std::vector<boost::default_color_type> color_map_type;
  color_map_type color_map(boost::num_vertices(graph), boost::white_color);

  ref_color_map_wrapper ref_color_map(color_map);
  for(auto it = root_set.begin(); it != root_set.end(); ++it)
  {
    size_t i = boost::get(boost::vertex_index_t(), graph, *it);
    if(color_map[i] == boost::white_color)
    {
      boost::depth_first_visit(graph, *it, boost::default_dfs_visitor(), ref_color_map);
    }
  } 
```

# **编译错误**

```
/usr/local/include/boost/property_map/property_map.hpp: In instantiation of ‘void boost::ReadablePropertyMapConcept<PMap, Key>::constraints() [with PMap = gc::ref_color_map_wrapper; Key = long unsigned int]’:
/usr/local/include/boost/concept/detail/has_constraints.hpp:32:14:   required by substitution of ‘template<class Model> boost::concepts::detail::yes boost::concepts::detail::has_constraints_(Model*, boost::concepts::detail::wrap_constraints<Model, (& Model:: constraints)>*) [with Model = boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int>]’
/usr/local/include/boost/concept/detail/has_constraints.hpp:42:5:   required from ‘const bool boost::concepts::not_satisfied<boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >::value’
/usr/local/include/boost/concept/detail/has_constraints.hpp:45:31:   required from ‘struct boost::concepts::not_satisfied<boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >’
/usr/local/include/boost/mpl/if.hpp:67:11:   required from ‘struct boost::mpl::if_<boost::concepts::not_satisfied<boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >, boost::concepts::constraint<boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >, boost::concepts::requirement<boost::concepts::failed************ boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int>::************> >’
/usr/local/include/boost/concept/detail/general.hpp:50:8:   required from ‘struct boost::concepts::requirement_<void (*)(boost::ReadablePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int>)>’
/usr/local/include/boost/concept_check.hpp:45:1:   [ skipping 4 instantiation contexts ]
/usr/local/include/boost/concept/detail/has_constraints.hpp:45:31:   required from ‘struct boost::concepts::not_satisfied<boost::ReadWritePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >’
/usr/local/include/boost/mpl/if.hpp:67:11:   required from ‘struct boost::mpl::if_<boost::concepts::not_satisfied<boost::ReadWritePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >, boost::concepts::constraint<boost::ReadWritePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int> >, boost::concepts::requirement<boost::concepts::failed************ boost::ReadWritePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int>::************> >’
/usr/local/include/boost/concept/detail/general.hpp:50:8:   required from ‘struct boost::concepts::requirement_<void (*)(boost::ReadWritePropertyMapConcept<gc::ref_color_map_wrapper, long unsigned int>)>’
/usr/local/include/boost/graph/depth_first_search.hpp:88:1:   required from ‘void boost::detail::depth_first_visit_impl(const IncidenceGraph&, typename boost::graph_traits<Graph>::vertex_descriptor, DFSVisitor&, ColorMap, TerminatorFunc) [with IncidenceGraph = boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS, boost::variant<const void*, std::pair<void*, void*> > >; DFSVisitor = boost::dfs_visitor<>; ColorMap = gc::ref_color_map_wrapper; TerminatorFunc = boost::detail::nontruth2; typename boost::graph_traits<Graph>::vertex_descriptor = long unsigned int]’
/usr/local/include/boost/graph/depth_first_search.hpp:314:5:   required from ‘void boost::depth_first_visit(const IncidenceGraph&, typename boost::graph_traits<Graph>::vertex_descriptor, DFSVisitor, ColorMap) [with IncidenceGraph = boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS, boost::variant<const void*, std::pair<void*, void*> > >; DFSVisitor = boost::dfs_visitor<>; ColorMap = gc::ref_color_map_wrapper; typename boost::graph_traits<Graph>::vertex_descriptor = long unsigned int]’
../include/garbage_collector.hpp:169:87:   required from here
/usr/local/include/boost/property_map/property_map.hpp:200:7: error: no matching function for call to ‘get(gc::ref_color_map_wrapper&, long unsigned int&)’
/usr/local/include/boost/property_map/property_map.hpp:200:7: note: candidates are:
In file included from /usr/local/include/boost/tuple/tuple.hpp:33:0,
                 from /usr/local/include/boost/unordered/detail/allocate.hpp:27,
                 from /usr/local/include/boost/unordered/detail/buckets.hpp:15,
                 from /usr/local/include/boost/unordered/detail/table.hpp:10,
                 from /usr/local/include/boost/unordered/detail/equivalent.hpp:14,
                 from /usr/local/include/boost/unordered/unordered_set.hpp:17,
                 from /usr/local/include/boost/unordered_set.hpp:16,
                 from /usr/local/include/boost/graph/adjacency_list.hpp:21,
                 from ../include/garbage_collector.hpp:6,
                 from main.cpp:3:
/usr/local/include/boost/tuple/detail/tuple_basic.hpp:225:1: note: template<int N, class HT, class TT> typename boost::tuples::access_traits<typename boost::tuples::element<N, boost::tuples::cons<HT, TT> >::type>::const_type boost::tuples::get(const boost::tuples::cons<HT, TT>&)
/usr/local/include/boost/tuple/detail/tuple_basic.hpp:225:1: note:   template argument deduction/substitution failed:
In file included from /usr/local/include/boost/graph/adjacency_list.hpp:36:0,
                 from ../include/garbage_collector.hpp:6,
                 from main.cpp:3:
/usr/local/include/boost/property_map/property_map.hpp:200:7: note:   ‘gc::ref_color_map_wrapper’ is not derived from ‘const boost::tuples::cons<HT, TT>’
In file included from /usr/local/include/boost/tuple/tuple.hpp:33:0,
                 from /usr/local/include/boost/unordered/detail/allocate.hpp:27,
                 from /usr/local/include/boost/unordered/detail/buckets.hpp:15,
                 from /usr/local/include/boost/unordered/detail/table.hpp:10,
                 from /usr/local/include/boost/unordered/detail/equivalent.hpp:14,
                 from /usr/local/include/boost/unordered/unordered_set.hpp:17,
                 from /usr/local/include/boost/unordered_set.hpp:16,
                 from /usr/local/include/boost/graph/adjacency_list.hpp:21,
                 from ../include/garbage_collector.hpp:6,
                 from main.cpp:3:
/usr/local/include/boost/tuple/detail/tuple_basic.hpp:211:1: note: template<int N, class HT, class TT> typename boost::tuples::access_traits<typename boost::tuples::element<N, boost::tuples::cons<HT, TT> >::type>::non_const_type boost::tuples::get(boost::tuples::cons<HT, TT>&)
/usr/local/include/boost/tuple/detail/tuple_basic.hpp:211:1: note:   template argument deduction/substitution failed:
In file included from /usr/local/include/boost/graph/adjacency_list.hpp:36:0,
                 from ../include/garbage_collector.hpp:6,
                 from main.cpp:3:
/usr/local/include/boost/property_map/property_map.hpp:200:7: note:   ‘gc::ref_color_map_wrapper’ is not derived from ‘boost::tuples::cons<HT, TT>’
/usr/local/include/boost/property_map/property_map.hpp:179:19: note: template<class T> const T& get(const T*, std::ptrdiff_t)
/usr/local/include/boost/property_map/property_map.hpp:179:19: note:   template argument deduction/substitution failed:
/usr/local/include/boost/property_map/property_map.hpp:200:7: note:   mismatched types ‘const T*’ and ‘gc::ref_color_map_wrapper’ 
```

# **图定义**

```
typedef boost::adjacency_list<boost::vecS, boost::vecS, boost::bidirectionalS, vertex_info_type> graph_type; 
```

# **什么工作**

```
boost::get(ref_color_map, *it);
boost::put(ref_color_map, *it, boost::white_color); 
```

工作没有任何编译错误...</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:34:30.967

您需要将您的`get()`和`put()`函数放在`ref_color_map`所在的命名空间中，因为它们是通过[ADL](https://en.wikipedia.org/wiki/Argument-dependent_name_lookup)找到的。见[这里](http://liveworkspace.org/code/3Ken4E%241)。

# google-app-engine - Jsp serverlet 映射 url-pattern /* 覆盖欢迎文件

> ID：15740072
> 
> 赞同：1
> 
> 时间：2013-04-01T08:25:41.170
> 
> 标签：google-app-engine, jsp, servlets

我正在使用 Java 在 Google 应用引擎上构建一个站点。在那里，我正在尝试使用 servlet 映射来映射 jsp 页面，如下所示：

`http://localhost:8080/<any text>`应该映射到`r.jsp`

`http://localhost:8080`应该映射到`home.jsp`

*但是这两个 url 总是被映射到`r.jsp`.*

而我的 web.xml 如下：

```
<servlet>
    <servlet-name>r</servlet-name>
    <jsp-file>/r.jsp</jsp-file>
    <load-on-startup>0</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>r</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
<servlet>
    <servlet-name>home</servlet-name>
    <jsp-file>/home.jsp</jsp-file>
    <load-on-startup>0</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>home</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<welcome-file-list>
    <welcome-file>home.jsp</welcome-file>
</welcome-file-list> 
```

我也尝试过，`<url-pattern>""</url-pattern>`但`<url-pattern>/</url-pattern>`它也没有用

对此有任何**servlet 映射解决方案**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:40:16.290

将您的 web.xml 更改为这样的内容

```
<servlet>
<servlet-name>r</servlet-name>
<jsp-file>/r.jsp</jsp-file>
<load-on-startup>0</load-on-startup>
</servlet>

<servlet-mapping>
<servlet-name>r</servlet-name>
<url-pattern>/ewerw</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>r</servlet-name>
<url-pattern>/rrrxdsfwef</url-pattern>
</servlet-mapping>
<servlet-mapping>
<servlet-name>r</servlet-name>
<url-pattern>/xy1</url-pattern>
</servlet-mapping>

<servlet>
<servlet-name>home</servlet-name>
<jsp-file>/home.jsp</jsp-file>
<load-on-startup>0</load-on-startup>
</servlet>

<welcome-file-list>
<welcome-file>home.jsp</welcome-file>
</welcome-file-list> 
```

# objective-c - 项目具有 C 结构时如何将非 ARC 转换为 ARC 项目？

> ID：15740076
> 
> 赞同：4
> 
> 时间：2013-04-01T08:26:17.920
> 
> 标签：objective-c, ios6, automatic-ref-counting

我有一个 Xcode 4.5.1 。我想将此项目转换为 ARC 以提高性能。我正在按照这些步骤操作。

编辑->重构->转换为 Objective C ARC 但出现错误：

**ARC 禁止在 structs 或 unions 中使用 Objective-C 对象**。

1.  我知道，我可以通过将 -fno-objc-arc 添加到编译器选项来阻止这些类转换为 ARC。但我也想将这些类转换为 ARC。是否可以？
2.  如何允许 xcode 只检查某些类进行 ARC 转换？例如，当我转换为 arc 时，它会检查类代码，但我有一些类不能转换为 arc。所以希望 Xcode 不应该在转换过程中为它们生成错误。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T00:56:09.760

您在这里有两个选择：

1.  将`-fno-objc-arc`标志添加到您不想转换为 ARC 的文件中，但当然您不能转换它们，否则在最好的情况下它将无法编译，并且在最坏的情况下会大量泄漏。

2.  转换所有类并使用 C 结构中的 Objective-C 对象解决问题。

关于第二种解决方案，您还有几个选择：

1.  用成熟的对象替换 C 结构，让 ARC 为您处理内存

2.  继续使用 C 结构并标记其中的对象部分，`__unsafe_unretained`这基本上会告诉 ARC 忽略这些对象进行内存管理。因此，您将拥有类似的东西：

    ```
    typedef struct {
        NSInteger anInteger;
        __unsafe_unretained NSString * aString;
    } AStruct; 
    ```

    这将在 ARC 下编译，这是您将 Objective-C 对象保存在 C 结构中的唯一选择。请记住，ARC 不会管理这些对象的内存，因此**您必须手动处理它**。

最重要的是，我的建议是将您的 C 结构转换为类。例如，您可以轻松地将上述结构转换为：

```
@interface AStructReplacement : NSObject
@property (nonatomic, assign) NSInteger anInteger;
@property (nonatomic, strong) NSString * aString;
@end 
```

这比 C 结构更安全、更连贯且更易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-06T09:50:16.370

目标项目=>构建阶段=>编译源=>非弧文件=>-fno-objc-arc（命令）

# symfony - Symfony2 形式和模式属性

> ID：15740078
> 
> 赞同：2
> 
> 时间：2013-04-01T08:26:34.877
> 
> 标签：symfony, symfony-forms

我正在尝试在 Symfony2 中创建一个带有文本输入字段的表单，该字段接受由 6 位数字后跟短划线后跟 4 位数字组成的字符串（例如 123456-7890）。它确实有效，但我得到不一致的 HTML 标记，具体取决于我将字段添加到表单的确切方式。

这是来自实体：

```
class Kursist
{
...
/**
 * @ORM\Column(type="string", length=11)
 */
protected $cpr;
....
public static function loadValidatorMetadata(ClassMetadata $metadata)
{
    $metadata->addPropertyConstraint('cpr', new NotBlank());
    $metadata->addPropertyConstraint('cpr', new Regex(array(
        'pattern' => '/^\d{6}-\d{4}$/',
    )));
} 
```

从表单定义：

```
class KursistType extends AbstractType
{
  public function buildForm(FormBuilderInterface $builder, array $options)
  {
    $builder->add('cpr');
    ...
  }
} 
```

从树枝模板：

```
<form action= ... >;
  {{ form_row(form.cpr) }}
    ...
</form> 
```

这就是浏览器源代码的样子——注意*pattern*和*maxlength*属性：

```
<label for="KursistType_cpr" class="required">Cpr</label><input type="text" id="KursistType_cpr" name="KursistType[cpr]" required="required" maxlength="11" pattern= "\d{6}-\d{4}" value="123456-7890" />
```

我想使用自己的标签而不是默认标签，所以我更改了表单字段定义：

```
    KursistType 类扩展 AbstractType
    {
      公共函数 buildForm(FormBuilderInterface $builder, array $options)
      {
        $builder->add('cpr','text', array('label' => 'CPR'));
        ...
```

但是现在当我查看浏览器源代码时，*pattern*和*maxlength*属性已经消失了：

```
    <label for="KursistType_cpr" class="required">CPR</label><input type="text" id="KursistType_cpr" name="KursistType[cpr]" required="required" value="123456-7890" />
```

有没有办法在不删除这些属性的情况下使用 FormBuilderInterface 修改标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:40:53.277

这种不一致是由于[类型选项猜测](http://symfony.com/doc/current/book/forms.html#field-type-options-guessing)，当您没有向表单构建器提供有关字段的任何其他信息时，第一种情况会发生这种情况。

禁用选项猜测时，您可以显式提供字段属性。

```
$builder->add('cpr','text', array('label' => 'CPR', 'pattern' => '\d{6}-\d{4}')); 
```

甚至您可以保持启用选项猜测，但仅覆盖标签属性

```
$builder->add('cpr',null, array('label' => 'CPR')); 
```

# javascript - 这个javascript中保存的选项在哪里？

> ID：15740085
> 
> 赞同：0
> 
> 时间：2013-04-01T08:26:53.497
> 
> 标签：javascript, jquery

我即将学习 javascript 并遇到了[http://themematcher.com/](http://themematcher.com/)我对他们的 javascript 有疑问。如果您在首页输入地址，您可以在第二步中选择不同的地址，这由[http://themematcher.com/script.js?v=1.7](http://themematcher.com/script.js?v=1.7)管理，但他们如何保存我们选择的内容？在脚本中找不到他们使用隐藏字段或 cookie 来存储您选择的值（在步骤 2 中）。是否也尝试使用 firebug 运行调试，但 JavaScript 变量不包含 div id 或类似的？

谁能帮我确定他们如何/在哪里保存我们在第 2 步到第 3 步（转换后）选择的内容？换句话说，如果我通过单击它进行选择，那么保存到第 3 步（转换）的值在哪里？

# javascript - innerHTML 在 IE9 中可以工作吗？

> ID：15740089
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:27:11.217
> 
> 标签：javascript, html

我有一个html声明：

```
 <b>Node:</b>&nbsp;&nbsp;<h16 id= "test_text" >""</h16> 
```

还有一个按钮控制器。单击按钮，我正在调用一个 javascript 函数，该函数将设置上述控制器（“test_text”）的值。为此我使用innerHTML。

```
document.getElementById('test_text').innerHTML="Hello"; 
```

这在 Mozilla firefox 和 Chrome 中运行良好，但在 IE9 中不起作用。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:45:03.933

嗨，它适用于所有浏览器

你可以检查

```
LIVE DEMO 
```

[http://www.jsfiddle.net/xCaNA/4/](http://www.jsfiddle.net/xCaNA/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:32:12.693

您可以使用 jquery 并使用`$('#test_text').html("Hello");`

# c++ - 反转字符串：垃圾值

> ID：15740092
> 
> 赞同：1
> 
> 时间：2013-04-01T08:27:28.880
> 
> 标签：c++

我写了一个代码来反转一个字符串

```
#include < iostream >
#include < cstring >

using namespace std;

string Reversal(char * s);

int main()
{
    char str[25];

    cout << "Enter a Name :";

    cin.get(str, 25);
    cout << "You have entered: " << str;

    cout << "\nReversed : " << Reversal(str);
    return 0;
}

string Reversal(char * s)
{
    int count = strlen(s);
    char temp[count];
    for (int i = 0; i < count; i++)
    {
        temp[i] = * (s + (count - 1) - i);
    }
    return temp;
} 
```

已参考以下链接以使 cin 将空格作为输入：

[如何在 C++ 中输入空间？](https://stackoverflow.com/questions/2765462/how-to-cin-space-in-c)

但是输出显示了一些垃圾字符？有什么建议吗？ ![在此处输入图像描述](https://i.stack.imgur.com/nTQmX.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:29:55.483

当您隐式构造 a `std::string`from`temp`时，后者应为 NUL 终止，但事实并非如此。

改变

```
return temp; 
```

到

```
return std::string(temp, count); 
```

这使用了不同的构造函数，它采用显式字符计数并且不期望`temp`以 NUL 结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:31:56.747

临时数组中的最后一个字符应该以空字符结尾。使其比输入字符串的大小长 1。将最后一个字符设为空字符 ( `'\0'`)。

```
string Reversal(char *s)
{
 int count=strlen(s);
 char temp[count+1]; //make your array 1 more than the length of the input string
 for (int i=0;i<count;i++)
 {
   temp[i]= *(s+(count-1)-i);
 }

 temp[count] = '\0'; //null-terminate your array so that the program knows when your string ends
 return temp;
} 
```

空字符指定字符串的结尾。通常它是一个全为 0 位的字节。如果您没有将其指定为临时数组的最后一个字符，程序将不知道您的字符数组何时结束。它将继续包含每个字符，直到找到一个`'\0'`.

# php - tinyMCE + Codeigniter

> ID：15740093
> 
> 赞同：1
> 
> 时间：2013-04-01T08:27:29.013
> 
> 标签：php, html, codeigniter, tinymce

我现在的问题是，当我安排 CodeIgniter 时：

```
$config['global_xss_filtering'] = TRUE; 
```

此设置删除我在 TinyMCE 编辑器中制作的标签

```
<img style="...."> 
```

截至目前我只能做设置

```
$config['global_xss_filtering'] = FALSE; 
```

然后我使用 xss_filter 到我想要的字段。如果有许多表单需要对此进行验证，那肯定会让我感到困难。有没有其他方法可以识别 TinyMCE 中的 CodeIgniter 样式标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:39:51.153

你有其他选择

设置 xss 过滤为 false

```
$config['global_xss_filtering'] = FALSE; 
```

然后使用第二个参数作为输入，如果你需要对特定字段进行 xss 过滤

```
$name = $this->input->post('name', TRUE); // xss filtering on 
```

如果你不想要 xss 过滤

```
$tiny_mce = $this->input->post('tiny_mce'); // xss filtering off 
```

~~**或者我认为你可以反过来做**~~

 ~~```
$config['global_xss_filtering'] = TRUE; 
```~~ 

和

```
$tiny_mce = $this->input->post('tiny_mce', FALSE); // xss filtering off 
```

# c# - html表格格式的电子邮件数据库报告

> ID：15740097
> 
> 赞同：0
> 
> 时间：2013-04-01T08:28:10.847
> 
> 标签：c#, html, sql-server

我需要从我们的生产 sql server 数据库生成报告，并每天将报告作为 html 表通过电子邮件发送给一些用户。我已经制作了该程序，但不知道如何将数据提供给 html 表并通过电子邮件发送。

我以前做过同样的事情，但是使用了一种非常繁琐的方法。我创建了一个 Html 模板文件，其中有一个 html 表。假设用户想要年龄信息，我在模板中将其保留为 [Age]。然后提取年龄数据库中的数据，并在我的 C# 代码中将其替换为 [Age]。我还必须替换所有内联 CSS。很乏味。

但是现在我有很多数据要发送，按照上面的方法会更加乏味。有人可以建议任何方法来完成这个吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:41:45.227

而不是使用模板创建电子邮件。我建议，您可以为此使用 Html Agility Pack。请参阅此[链接](https://stackoverflow.com/questions/2490765/which-is-the-best-html-tidy-pack-is-there-any-option-in-html-agility-pack-to-ma)以供参考。

您还可以查看其[文档](http://htmlagilitypack.codeplex.com/)以了解如何使用它。

祝你好运！

# java - Apache POI autoSizeColumn() 无法正常工作

> ID：15740100
> 
> 赞同：9
> 
> 时间：2013-04-01T08:28:30.857
> 
> 标签：java, apache, excel, apache-poi

我正在创建一个使用 apache poi 将信息写入 excel 文件的程序。将所有数据输入文件后，我在文件的每一列上调用 autoSizeColumn 方法。但是它将列的大小调整为最后输入的单元格的宽度，有时没有列中的其他单元格那么大。我知道我使用它是正确的，不幸的是我现在没有互联网来发布任何代码，但我会尽可能更新。

好的，我希望我正确使用代码标签，但这里是：

```
public void writeFile() {
    Workbook wb = new HSSFWorkbook();
    Sheet s = wb.createSheet();
    try {

        FileOutputStream out = new FileOutputStream(
                this.getSelectedFile());
        // create a new workbook

        // create a new sheet

        // declare a row object reference
        Row r = null;
        // declare a cell object reference
        Cell c = null;
        // in case of plain ascii
        wb.setSheetName(0, "Street Light Report");
        // create a sheet with 30 rows (0-29)
        // int rownum;
        // short rownum;
        // PrintWriter printOut = new PrintWriter(
        // this.getSelectedFile());
        String[] colName = { "Light Id", "Flagged",
                "Malfunction", "Comments", "Location", "Date" };
        // printOut.println("Light Id,Flagged,Malfunction,Comments,Location,Date");
        Connections.connect();
        String[][] data = Connections.searchForFlagged();
        for (int i = 0; i < data.length; i++) {
            r = s.createRow(i);
        }
        r.setRowNum(0);
        for (int j = 0; j < 6; j++) {
            c = r.createCell(j);
            switch (j) {
            case 0:
                c.setCellValue(colName[j]);
                break;
            case 1:
                c.setCellValue(colName[j]);
                break;
            case 2:
                c.setCellValue(colName[j]);
                break;
            case 3:
                c.setCellValue(colName[j]);
                break;
            case 4:
                c.setCellValue(colName[j]);
                break;
            case 5:
                c.setCellValue(colName[j]);
                break;

            }
        }

        for (int i = 0; i < data.length; i++) {

            r.setRowNum(i + 1);
            for (int j = 0; j < data[i].length; j++) {

                c = r.createCell(j);

                // System.out.println(data[i][j]);

                switch (j) {
                case 0:
                    c.setCellType(Cell.CELL_TYPE_NUMERIC);
                    c.setCellValue(Integer.parseInt(data[i][j]));
                    break;
                case 1:
                    if (data[i][j].equals("true"))
                        c.setCellValue("Yes");
                    else
                        c.setCellValue("No");
                    break;
                case 2:
                    if (data[i][j].equals("I"))
                        c.setCellValue("Intermittent");
                    else
                        c.setCellValue("Not Functional");
                    break;
                case 3:
                    c.setCellValue(data[i][j]);
                    break;
                case 4:
                    c.setCellValue(data[i][j]);
                    break;
                case 5:
                    c.setCellValue(data[i][j]);
                    break;
                }

            }
        }
                                wb.getSheetAt(0).setPrintGridlines(true);
        for (int j = 0; j < 6; j++) {
            s.autoSizeColumn(j);
        }
        wb.write(out);
        out.close();
    } catch (Exception ex) {

    }
}; 
```

我会在这里张贴一张图片，但我需要代表。点，我刚从这里开始。

** 请注意，Connections 类是 JDBC 类，因此 java 可以从 mySQL 数据库中提取信息，它返回一个二维字符串数组 **

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T08:40:40.007

您只需要将呼叫移至

```
sheet.autoSizeColumn(columnNumber); 
```

添加数据后到代码中的某个点。

这是[API的链接](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#autoSizeColumn%28int%29)

这是唯一的方法。`autoSizeColumn()`我有同样的问题，我在输入数据之前调用了该方法。跳它有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T20:51:00.457

移动 for 循环：

```
for (int j = 0; j < 6; j++) {
                    s.autoSizeColumn(j);
                } 
```

就在您在工作簿中写入并关闭您的对象之前。

```
wb.write(out); 
```

# android - Android - 列表导航样式

> ID：15740103
> 
> 赞同：1
> 
> 时间：2013-04-01T08:29:00.973
> 
> 标签：android, android-spinner

我在操作栏中放置了一个微调器（sherlock），它显示 5 个选项供用户选择，如下所示。到目前为止一切都很好。但我希望微调器在操作栏上正确对齐。微调器的项目也应该居中对齐。知道如何做到这一点吗？

![在此处输入图像描述](https://i.stack.imgur.com/sPtoA.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:37:27.120

您需要创建自己的微调器适配器。

你可以得到任何你想要的东西，这里有一个例子：

![在此处输入图像描述](https://i.stack.imgur.com/p9mj9.png)

这是使用自定义微调器的代码：

```
 Context context = getSupportActionBar().getThemedContext();

    ArrayList<AbMenu> data = new ArrayList<AbMenu>();
    data.add(new AbMenu(isDark ? R.drawable.ic_action_spinner_partiemultidark : R.drawable.ic_action_spinner_partiemulti, getString(R.string.m1), 1));
    data.add(new AbMenu(isDark ? R.drawable.ic_action_spinner_partiemultidark : R.drawable.ic_action_spinner_partiemulti, getString(R.string.m8), 2));
    data.add(new AbMenu(isDark ? R.drawable.ic_action_spinner_partiedark : R.drawable.ic_action_spinner_partie, getString(R.string.s31), 5));
    data.add(new AbMenu(isDark ? R.drawable.ic_action_spinner_savedark : R.drawable.ic_action_spinner_save, getString(R.string.m2), 3));
    data.add(new AbMenu(isDark ? R.drawable.ic_action_spinner_partiehelpdark : R.drawable.ic_action_spinner_partiehelp, getString(R.string.m3), 4));

    AbMenuAdapter adapter = new AbMenuAdapter(context, R.layout.ab_spinner_item, data);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_LIST);
    getSupportActionBar().setListNavigationCallbacks(adapter, this); 
```

我用来填充适配器的类。

```
public class AbMenu {
    public int icon;
    public String title;
    public int id;

    public AbMenu() {
        super();
    }

    public AbMenu(int icon, String title, int id) {
        super();
        this.icon = icon;
        this.title = title;
        this.id = id;
    }
} 
```

使用自定义布局的适配器（它是文本视图旁边的图像）：

```
public class AbMenuAdapter extends BaseAdapter implements SpinnerAdapter {

    Context context;
    int layoutResourceId;
    ArrayList<AbMenu> data;
    LayoutInflater inflater;

    public AbMenuAdapter(Context a, int textViewResourceId, ArrayList<AbMenu> data) {
        // super(a, textViewResourceId, data);
        this.data = data;
        inflater = (LayoutInflater) a.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.context = a;
        this.layoutResourceId = textViewResourceId;

    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            v = inflater.inflate(layoutResourceId, null);
        }
        final AbMenu item = data.get(position);
        if (item != null) {
            ((android.widget.TextView) v.findViewById(R.id.textViewSpinner)).setText(item.title);
            ((ImageView) v.findViewById(R.id.imageViewSpinner)).setImageResource(item.icon);
        }
        return v;
    }

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            v = inflater.inflate(layoutResourceId, null);
        }
        final AbMenu item = data.get(position);
        if (item != null) {
            ((android.widget.TextView) v.findViewById(R.id.textViewSpinner)).setText(item.title);
            ((android.widget.TextView) v.findViewById(R.id.textViewSpinner)).setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);
            ((ImageView) v.findViewById(R.id.imageViewSpinner)).setImageResource(item.icon);
        }
        return v;
    }

    @Override
    public int getCount() {
        return data.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {

        return 0;
    }
} 
```

和 xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:layout_marginBottom="8dp"
android:layout_marginLeft="4dp"
android:layout_marginRight="4dp"
android:layout_marginTop="8dp"
android:gravity="fill_horizontal" >

<ImageView
    android:id="@+id/imageViewSpinner"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical"
    android:contentDescription="@string/empty"
    android:padding="4dp"
    android:src="@drawable/ic_launcher" />

<TextView
    android:id="@+id/textViewSpinner"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_gravity="center_vertical"
    android:layout_marginLeft="8dp"
    android:layout_marginRight="16dp"
    android:layout_toRightOf="@+id/imageViewSpinner"
    android:text="@string/empty"
    android:ellipsize="end"
    android:singleLine="true" />

</RelativeLayout> 
```

# java-me - 在 J2ME 中调整 StringItem 按钮的大小

> ID：15740116
> 
> 赞同：0
> 
> 时间：2013-04-01T08:29:51.183
> 
> 标签：java-me, midp, lcdui

请让我知道如何调整`StringItem`按钮大小。我想让它变大。

```
btnExit= new StringItem("", "Exit", StringItem.BUTTON); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:43:18.313

AFAIK，通过纯 J2ME 调整大小、设置填充和边距非常困难。即使您设法以某种方式做到了，它也不适合所有设备屏幕。所以，我建议你使用[LWUIT](http://lwuit.java.net/)（轻量级用户界面工具包）。自定义 LWUIT 中的所有组件非常容易，您可以使用它获得非常好的 UI，而且内存占用非常少。

# wso2 - WSO2 soap12 端点到soap11 外部服务

> ID：15740118
> 
> 赞同：0
> 
> 时间：2013-04-01T08:30:00.640
> 
> 标签：wso2

我在 WSO2 中创建了一个简单的 WSDL 代理，以允许启用了 Soap 1.2 的应用程序仅使用 Soap 1.1 的外部 Web 服务。一切都很好，除了当我通过 Soap12 WSO 端点发送请求时，WSO2 不会将soap11 回复转换回soap12。

```
 <proxy xmlns="http://ws.apache.org/ns/synapse" name="MySOAP" transports="http" 
        statistics="disable" trace="disable" startOnLoad="true">
        <target>
           <endpoint>
           <wsdl service="ExtService" port="ExtPort" uri="https://my.local/wsdl/current
             /ExtService.wsdl"/>
           <property name="DISABLE_CHUNKING" value="true" scope="axis2"/>
           </endpoint>
        </target>
        <publishWSDL uri="file:///home/sysadmin/MySOAP.wsdl"/>
     <description></description>
      </proxy> 
```

有没有人遇到过类似的事情？WSO2 ESB 版本 4.6.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T14:35:28.130

You need to add the format as following.

```
 <endpoint>
       <address uri="http://localhost:9000/services/SimpleStockQuoteService" format="soap11" />
   </endpoint> 
```

Format - The message format for the endpoint. The available values are:

```
[format="soap11|soap12|pox|get"] 
```

*   Leave As-Is - No transformation is done to the outgoing message.
*   SOAP 1.1 - Transforming message to SOAP 1.1.
*   SOAP 1.2 - Transforming message to SOAP 1.2.
*   Plain Old XML (POX) - Transforming to plain old XML format
*   Representational State Transfer (REST) - Transforming to HTTP Get Request
*   GET

[http://docs.wso2.org/wiki/display/ESB460/Default+Endpoint](http://docs.wso2.org/wiki/display/ESB460/Default+Endpoint)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-11T20:06:56.783

这个问题已经有一段时间了。请参阅 jira [https://wso2.org/jira/browse/ESBJAVA-1994](https://wso2.org/jira/browse/ESBJAVA-1994)。

如果您不想手动转换来自后端的响应，请取消注释axis2.xml 中相关的NHTTP 传输条目并注释掉HTTP PassThrough 传输条目。

# c# - 如何更改 Windows Phone 8 HubTile 控件的翻转率？

> ID：15740120
> 
> 赞同：1
> 
> 时间：2013-04-01T08:30:08.777
> 
> 标签：c#, windows-phone-7, xaml, windows-phone-8

我需要更改在*Windows Phone 8*应用程序中使用的*HubTitle*控件的翻转率。请提供任何指导如何修改 HubTitle 控件的源代码以更改翻转率。

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T20:05:53.443

您不能使用已发布的控件来做到这一点。由于是开源代码，可以在 HubTile 控件代码（类名：Microsoft.Phone.Controls.HubTileService.cs）中更改翻转率。

您必须分叉代码才能进行这些更改，另一方面是您无法获得新的定期更新。*

# java - Eclipse 在导入 ant 构建文件时不将测试文件夹识别为源文件夹

> ID：15740123
> 
> 赞同：0
> 
> 时间：2013-04-01T08:30:37.047
> 
> 标签：java, eclipse, ant

我有一个 java 项目的 ant 构建文件，项目树如下所示：
DataBaseFidling。
|-->src（包含生产代码源）
|-->tests（包含测试代码源）
|-->bin（包含.class）
|-->reports（包含junit xml报告）
|-->build.xml

每当我使用“来自现有 Ant 构建文件的 Java 项目”使用 eclipse 导入这个项目时，eclipse 不会将测试文件夹重新转换为源文件夹。
该怎么做才能解决这个问题？
这是 ant 构建文件：
DatabaseFidling 项目。

```
 <property name="src.dir" location="./src/" />     
     <property name="tests.dir" location="./tests/" />     
     <property name="bin.dir" location="./bin/" />     
     <property name="lib.dir" location="/home/chedy/workspace/lib"/>

     <target name="clean">
         <delete verbose="true">
             <fileset dir="${bin.dir}"/>
         </delete>
     </target>

     <target name="compile">
        <javac srcdir="${src.dir}" destdir="${bin.dir}">
        </javac>
        <javac srcdir="${tests.dir}" destdir="${bin.dir}">
             <classpath>
                <pathelement location="${lib.dir}/junit4.jar"/>
                <pathelement location="${lib.dir}/mockito-all-1.9.5.jar"/> 
                <pathelement location="${lib.dir}/SQLScriptRunner.jar"/> 
            </classpath>
        </javac>
     </target>

     <target name="test" depends="compile">
        <junit printsummary="yes" fork="true" >
            <formatter type="xml"/> 
            <classpath>
                <pathelement path="${bin.dir}"/> 
                <pathelement location="${lib.dir}/junit4.jar"/>
                <pathelement location="${lib.dir}/mockito-all-1.9.5.jar"/> 
                <pathelement location="${lib.dir}/SQLScriptRunner.jar"/>
                <pathelement location="${lib.dir}/mysql-connector-java-5.1.23-bin.jar" />
            </classpath>
            <batchtest todir="./report">
                 <fileset dir="${bin.dir}">
                         <include name="**/**Test*.*"/> 
                 </fileset>  
            </batchtest>
        </junit>
     </target>

     <target name="run" depends="compile">
        <java classname="com.esprit.is.Main" fork="true">
            <classpath>
                 <pathelement path="${bin.dir}"/>
                 <pathelement location="${lib.dir}/mysql-connector-java-5.1.23-bin.jar" />
            </classpath>
        </java>
     </target>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T15:26:32.000

编译目标必须包含一个编译 src 和 test 文件夹的 javac 任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T19:28:56.637

您可以手动将测试文件夹添加为源文件夹。右键单击项目，构建路径 -> 配置构建路径 -> Java 构建路径。在源选项卡中，单击链接源，然后浏览到您的文件夹。

# r - R ggplot - 带箱线图的坐标变换（平方根）

> ID：15740126
> 
> 赞同：1
> 
> 时间：2013-04-01T08:30:56.773
> 
> 标签：r, ggplot2, boxplot

我在 R 中有几个箱须图。在两者中，x 轴对应于一个分类变量，而分组颜色对应于另一个。

如果我用未转换的 y 轴绘制两个图，它们都很好。但是，如果我尝试对 y 轴进行平方根变换（使用：coord_trans(y = "sqrt")），其中一个图形仍然可以，而另一个则丢弃与大多数框中的中位数相对应的线（除了那些其中只有两组，因此方框略宽，请参见第一个图上的“数字”1 和 2）。此外，对于未正确绘制的图表，如果我减少 x 轴上的类别数量（因此再次使框变宽），中线会再次出现。

这是 coord_trans 的错误（如果是，我该如何解决）还是我的代码有问题？

非常感谢您的任何建议。

```
library(car)
library(gplots)
library(plyr)
library(ggplot2)
library(gridExtra)
library(gdata)

Category=factor(c(rep(1, times =3240), rep(2, times =2160)), 
                labels=c("A","B"), levels=c(1,2))
ID=factor(rep(seq(from = 1, to = 45),each = 120))
Months=factor(rep(seq(from = 1, to = 3), each = 40, times = 45),
              labels=c("Jan","Feb","Mar"),levels=c(1:3))
Obs=rnorm(5400, mean=25, sd=15)
Data=data.frame(Category,ID,Months,Obs)

Data=subset(Data, (Data$Category=="B") | !(Data$ID%in%c(1,2)) | 
              (Data$Months%in%c("Jan","Feb")))

for (j in 1:2)
{
  sel=which(Data$Category==unique(levels(Data$Category))[j])
  Observ=Data$Obs[sel]
  Month=Data$Months[sel]
  Number=droplevels(Data$ID[sel])
  Number=droplevels(Number)
  Data_used=data.frame(Number,Month,Observ)
  plot1 = ggplot(Data_used, aes(Number, Observ)) +
    geom_boxplot(aes(fill=Month, drop=FALSE), na.rm=TRUE) +  
    scale_y_continuous(breaks = c(0,20,40,60,80,100), limits=c(0,115)) + 
    coord_trans(y = "sqrt")
  plot(plot1)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:37:01.573

@Dennis 在他的评论中是正确的， scale_y_sqrt() 将纠正这一点。因为中位数和四分位数是顺序统计数据，所以在计算它们之前还是之后转换数据并不重要。

# php - 视图和控制器 1:1 的关系。在控制器中实例化视图？更好的方法？

> ID：15740130
> 
> 赞同：0
> 
> 时间：2013-04-01T08:31:16.990
> 
> 标签：php, model-view-controller

我目前创建`View`并将其注入到请求中`Controller`，然后我做

```
$this->view->load('sometemplate'); 
```

然后在我的 startup.php 文件的末尾我做

```
$view->render(); 
```

我现在正在将我的应用程序更改为有一个`View`per`Controller`但我能想到的唯一方法是实例化`View`in ，`Controller`因为每个`Controller`都会有一个唯一的`View`实例。

**编辑**

如果我有一个，`Controllers\Products`我希望它有一个`Views\Products`。最简单的方法是实例化`Views\Products`内部`Controllers\Products`，因为当我在里面时，`Controller`我会确切地知道`View`我需要什么，但我不喜欢在 a 中实例化 a 的`View`想法`Controller`。

我更愿意在`Views\Products`外部创建`Controllers\Products`并将其注入。

我用这些属性`Router::route($uri)`返回 a`Route`

```
private $directory;
private $controller; // Just controller name, not an instance
private $method;
private $params = array(); 
```

我在想，如果 my`Views`和`Controllers`具有相同的名称，我可以使用 中的`$controller`属性`Route`来实例化正确的`View`，然后将其注入到正确的`Controller`. 这会是一个好方法吗？

解决此问题的最佳方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T12:06:16.830

如果您在谈论 MVC，那么我会说您必须在控制器类中包含操作。根据约定，您的视图类应该与您的操作具有相同的名称。

# python - Python中的WebSocket帧解码

> ID：15740134
> 
> 赞同：4
> 
> 时间：2013-04-01T08:31:36.747
> 
> 标签：python, websocket, decode, mask

我尝试在服务器端实现 WebSocket 帧取消屏蔽算法（基于此：[如何在服务器端发送和接收 WebSocket 消息？](https://stackoverflow.com/questions/8125507/how-can-i-send-and-receive-websocket-messages-on-the-server-side)）。这是我所拥有的：

```
def decode(data):
    frame = bytearray(data)

    length = frame[1] & 127

    indexFirstMask = 2
    if length == 126:
        indexFirstMask = 4
    elif length == 127:
        indexFirstMask = 10

    indexFirstDataByte = indexFirstMask + 4
    mask = frame[indexFirstMask:indexFirstDataByte]

    i = indexFirstDataByte
    j = 0
    decoded = []
    while i < len(frame):
        decoded.append(frame[i] ^ mask[j%4])
        i += 1
        j += 1

    print decoded

    return "".join(chr(byte) for byte in decoded) 
```

但是我得到了非常奇怪的结果。在 JavaScript 方面：

```
w = new WebSocket("ws://localhost:2000");
w.send("test");
w.send("test");
w.send("test");
w.send("test"); 
```

在服务器端产生：

```
[42, 73, 45, 46, 1, 0]
[42, 1, 98, 0, 0]
[2, 97, 0, 0]
[2, 97, 0, 0] 
```

`w.send("test");`对生产的更多调用`[2, 97, 0, 0]`。前两个数组的长度也> 4（ word 中的字符数`test`）。这些都没有转换为 word `test`。看来我的解码代码一定做错了什么。是什么原因造成的？有什么帮助吗？

**编辑**看看原始帧：

```
[193, 134, 48, 166, 232, 11, 26, 239, 197, 37, 49, 166]
[193, 133, 57, 161, 169, 218, 19, 160, 203, 218, 57]
[193, 132, 150, 97, 124, 54, 148, 0, 124, 54]
[193, 132, 163, 26, 102, 249, 161, 123, 102, 249]
[193, 132, 238, 212, 210, 156, 236, 181, 210, 156] 
```

当然，这些数字有点随机（由于屏蔽），但请注意第二个字节（应该表示有效负载的长度）是`134`，然后是 ，然后`133`是`132`。前两帧也比其他帧长。这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:32:35.260

我又看了一遍这个帧，我意识到第一个字节：

```
193[DEC] == 11000001[BIN] 
```

根据规范，这意味着`RSV1`使用（第二位是`1`）。这似乎意味着使用了扩展名，实际上在我的握手代码中我发现了以下行：

```
ext = req.headers.get("Sec-WebSocket-Extensions", "").strip()
if ext:
    res += "Sec-WebSocket-Extensions: %s\r\n" % ext 
```

在 Chrome 中我可以看到：

```
Sec-WebSocket-Extensions:x-webkit-deflate-frame 
```

当我握手时。

我还不确定这些扩展是如何工作的，但是从握手代码中删除这 3 行可以解决问题。

# ios - ios 5 屏幕自动定位

> ID：15740136
> 
> 赞同：1
> 
> 时间：2013-04-01T08:31:39.700
> 
> 标签：ios, xcode, screen-orientation

Xcode 4.6 并且有一个应用程序支持 IOS 5.0 在 IOS 模拟器 6 上运行应用程序时 - IOS 5 时自动旋转工作 - 不。在设备上也是如此。

使用故事板。

注入能力自动旋转期间的布尔值 - 真。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:23:27.160

iOS6 引入了决定视图是否应该旋转的新方法，但对于 iOS5，您仍然需要使用旧方法 - 可能您只使用 iOS6 方法。这是我使用的：

```
// New iOS6 autorotate interface.
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        return UIInterfaceOrientationMaskAllButUpsideDown;
    else
        return UIInterfaceOrientationMaskAll;
}

// Older autorotate interface (for compatibility).
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    else
        return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:25:30.920

ios5 使用

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
// Return YES for supported orientations
     return (interfaceOrientation == UIInterfaceOrientationLandscapeRight);
} 
```

但上述方法已被 ios6 弃用，以覆盖使用 this

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

# python - 将整数附加到 Python 中的空 NumPy 数组

> ID：15740137
> 
> 赞同：1
> 
> 时间：2013-04-01T08:31:45.363
> 
> 标签：python, arrays, numpy, append

我有一个存储信号信息的 NumPy 数组。在下面的代码中，为了方便起见，我刚刚从随机数中创建了它。现在我需要根据标准从信号数组中选择位置。再次，为简洁起见，我简化了以下标准。我试图通过将它们附加到一个名为位置的空 NumPy 数组来存储这些位置。我知道我对 NumPy.append() 函数的使用一定是错误的。我试图调试它，但我找不到错误。我究竟做错了什么？

```
import numpy as np
import numpy.random as random

signal = random.randint(1,10000,1000)

positions = np.array([],dtype = int)
for i in range(0,len(signal)):
    if((signal[i] % 3 == 0) or (signal[i] % 5 == 0)):
        print(i)
        np.append(positions,i)

print(positions) 
```

**编辑：**

我实际上需要它**在 for 循环**中运行，因为我在 if() 中的**条件**是一个数学表达式，如果满足条件，它将根据某些规则**进行更改（在此处发布会很复杂）。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:35:47.667

为此，您不需要显式循环：

```
positions = np.where((signal % 3 == 0) | (signal % 5 == 0))[0] 
```

在这里，`(signal % 3 == 0) | (signal % 5 == 0)`评估 的每个元素的标准`signal`，并`np.where()`返回标准为真的索引。

如果您*必须*在循环中追加`positions`，这是一种方法：

```
positions = np.hstack((positions, [i])) 
```

# map - 测试人员有什么问题？

> ID：15740143
> 
> 赞同：0
> 
> 时间：2013-04-01T08:32:20.550
> 
> 标签：map, triggers, boolean, feed

代码应该返回触发器对象 - 触发器映射的长度应该显示实际存在的触发器的实际数量......如果至少有一个或多个触发器，它应该返回 True 但它们都返回 FALSE 和零触发器...有人可以帮忙吗？代码在下面，测试人员的错误消息将打印在下面。

```
def makeTrigger(triggerMap, triggerType, params, name):

    def readTriggerConfig(filename):
        triggerfile = open(filename, "r")
        all = [ line.rstrip() for line in triggerfile.readlines() ]
        lines = []
        for line in all:
            if len(line) == 0 or line[0] == '#':
                continue
            lines.append(line)
            if len(line) >= 1:
                return True
        triggers = []
        triggerMap = {}

    # Be sure you understand this code - we've written it for you,
    # but it's code you should be able to write yourself
        for line in lines:

            linesplit = line.split(" ")

        # Making a new trigger
            if linesplit[0] != "ADD":
                trigger = makeTrigger(triggerMap, linesplit[1],
                                      linesplit[2:], linesplit[0])

        # Add the triggers to the list
            else:
                for name in linesplit[1:]:
                    triggers.append(triggerMap[name])

        return triggers

import thread

SLEEPTIME = 60 #seconds -- how often we poll

def main_thread(master):

    try:
        # These will probably generate a few hits...
        t1 = TitleTrigger("Obama")
        t2 = SubjectTrigger("Romney")
        t3 = PhraseTrigger("Election")
        t4 = OrTrigger(t2, t3)
        triggerlist = [t1, t4]

        # TODO: Problem 11
        # After implementing makeTrigger, uncomment the line below:
        triggerlist = readTriggerConfig("triggers.txt")

        # from here is about drawing

        frame = Frame(master)
        frame.pack(side=BOTTOM)
        scrollbar = Scrollbar(master)
        scrollbar.pack(side=RIGHT,fill=Y)

        t = "Google & Yahoo Top News"
        title = StringVar()
        title.set(t)
        ttl = Label(master, textvariable=title, font=("Helvetica", 18))
        ttl.pack(side=TOP)
        cont = Text(master, font=("Helvetica",14), yscrollcommand=scrollbar.set)
        cont.pack(side=BOTTOM)
        cont.tag_config("title", justify='center')
        button = Button(frame, text="Exit", command=root.destroy)
        button.pack(side=BOTTOM)
        guidShown = []
        def get_cont(newstory):
            if newstory.getGuid() not in guidShown:
                cont.insert(END, newstory.getTitle()+"\n", "title")
                cont.insert(END, (80 * '-').join("\n\n"), "title")
                cont.insert(END, newstory.getSummary())
                cont.insert(END, (120 * '*').join("\n\n"), "title")
                guidShown.append(newstory.getGuid())

        while True:

            print "Polling . . .",
            Get stories from Google's Top Stories RSS news feed
            stories = process("http://news.google.com/?output=rss")

            Get stories from Yahoo's Top Stories RSS news feed
            stories.extend(process("http://rss.news.yahoo.com/rss/topstories"))

            stories = filterStories(stories, triggerlist)

            map(get_cont, stories)
            scrollbar.config(command=cont.yview)

            print "Sleeping..."
            time.sleep(SLEEPTIME)

    except Exception as e:
        print e

if __name__ == '__main__':

    root = Tk()
    root.title("Some RSS parser")
    thread.start_new_thread(main_thread, (root,))
    root.mainloop() 
```

现在这里是来自测试人员的错误信息——如果可能的话请帮忙……我的脑子都糊涂了！！！总共有七个测试给出了这些错误消息，我仍然不知道如何修复它们！如果可以的话，请帮忙... ciao！

```
Test: 1 make TitleTrigger
Your output:
Trigger file:
t1 TITLE NASA

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
**** ERROR: It looks like your makeTrigger function is not properly returning the     trigger; the trigger, rather than 'None', should not have printed on the previous line.
 --> Is trigger t1 in triggerMap?  False
**** ERROR: Length of triggerMap should be 1; it is:  0
Correct output:
Trigger file:
t1 TITLE NASA

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
TitleTrigger made with word: NASA
 --> Is trigger t1 in triggerMap?  True

Test: 2 make basic triggers
Your output:
Trigger file:
t1 TITLE NASA
t2 SUBJECT Mars
t3 SUMMARY rocket

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
 --> Is trigger t1 in triggerMap?  False
None
 --> Is trigger t2 in triggerMap?  False
None
 --> Is trigger t3 in triggerMap?  False
**** ERROR: Length of triggerMap should be 3; it is:  0
Correct output:
Trigger file:
t1 TITLE NASA
t2 SUBJECT Mars
t3 SUMMARY rocket

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
TitleTrigger made with word: NASA
 --> Is trigger t1 in triggerMap?  True
SubjectTrigger made with word: Mars
 --> Is trigger t2 in triggerMap?  True
SummaryTrigger made with word: rocket
 --> Is trigger t3 in triggerMap?  True
Test: 3 make PhraseTriggers
Your output:
Trigger file:
t1 PHRASE NASA
t2 PHRASE Curiosity Mars rover
t3 PHRASE Neil deGrasse Tyson

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
 --> Is trigger t1 in triggerMap?  False
None
 --> Is trigger t2 in triggerMap?  False
None
 --> Is trigger t3 in triggerMap?  False
**** ERROR: Length of triggerMap should be 3; it is:  0
Correct output:
Trigger file:
t1 PHRASE NASA
t2 PHRASE Curiosity Mars rover
t3 PHRASE Neil deGrasse Tyson

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
PhraseTrigger made with phrase: NASA
 --> Is trigger t1 in triggerMap?  True
PhraseTrigger made with phrase: Curiosity Mars rover
 --> Is trigger t2 in triggerMap?  True
PhraseTrigger made with phrase: Neil deGrasse Tyson
 --> Is trigger t3 in triggerMap?  True
Test: 4 make NotTriggers
Your output:
Trigger file:
t1 TITLE Manitoba
t2 NOT t1
t3 PHRASE British Colombia
t4 NOT t3

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
 --> Is trigger t1 in triggerMap?  False
None
 --> Is trigger t2 in triggerMap?  False
None
 --> Is trigger t3 in triggerMap?  False
None
 --> Is trigger t4 in triggerMap?  False
**** ERROR: Length of triggerMap should be 4; it is:  0
Correct output:
Trigger file:
t1 TITLE Manitoba
t2 NOT t1
t3 PHRASE British Colombia
t4 NOT t3

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
TitleTrigger made with word: Manitoba
 --> Is trigger t1 in triggerMap?  True
NotTrigger made with trigger: TitleTrigger("Manitoba")
 --> Is trigger t2 in triggerMap?  True
PhraseTrigger made with phrase: British Colombia
 --> Is trigger t3 in triggerMap?  True
NotTrigger made with trigger: PhraseTrigger("British Colombia")
 --> Is trigger t4 in triggerMap?  True
Test: 5 make AndTriggers
Your output:
Trigger file:
t1 TITLE Manitoba
t2 PHRASE British Colombia
t3 AND t1 t2

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
 --> Is trigger t1 in triggerMap?  False
None
 --> Is trigger t2 in triggerMap?  False
None
 --> Is trigger t3 in triggerMap?  False
**** ERROR: Length of triggerMap should be 3; it is:  0
Correct output:
Trigger file:
t1 TITLE Manitoba
t2 PHRASE British Colombia
t3 AND t1 t2

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
TitleTrigger made with word: Manitoba
 --> Is trigger t1 in triggerMap?  True
PhraseTrigger made with phrase: British Colombia
 --> Is trigger t2 in triggerMap?  True
AndTrigger made with triggers: TitleTrigger("Manitoba") and PhraseTrigger("British Colombia")
 --> Is trigger t3 in triggerMap?  True
Test: 6 make OrTriggers
Your output:
Trigger file:
t1 SUBJECT Harper
t2 PHRASE Prime Minister
t3 OR t1 t2

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
 --> Is trigger t1 in triggerMap?  False
None
 --> Is trigger t2 in triggerMap?  False
None
 --> Is trigger t3 in triggerMap?  False
**** ERROR: Length of triggerMap should be 3; it is:  0
Correct output:
Trigger file:
t1 SUBJECT Harper
t2 PHRASE Prime Minister
t3 OR t1 t2

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
SubjectTrigger made with word: Harper
 --> Is trigger t1 in triggerMap?  True
PhraseTrigger made with phrase: Prime Minister
 --> Is trigger t2 in triggerMap?  True
OrTrigger made with triggers: SubjectTrigger("Harper") and PhraseTrigger("Prime Minister")
 --> Is trigger t3 in triggerMap?  True
Test: 7 make composite triggers
Your output:
Trigger file:
t1 SUBJECT Cameron
t2 SUBJECT Gillard
t3 SUBJECT Harper
t4 PHRASE Prime Minister
t5 AND t1 t4
t6 AND t2 t4
t7 OR t3 t4

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
None
 --> Is trigger t1 in triggerMap?  False
None
 --> Is trigger t2 in triggerMap?  False
None
 --> Is trigger t3 in triggerMap?  False
None
 --> Is trigger t4 in triggerMap?  False
None
 --> Is trigger t5 in triggerMap?  False
None
 --> Is trigger t6 in triggerMap?  False
None
 --> Is trigger t7 in triggerMap?  False
**** ERROR: Length of triggerMap should be 7; it is:  0
Correct output:
Trigger file:
t1 SUBJECT Cameron
t2 SUBJECT Gillard
t3 SUBJECT Harper
t4 PHRASE Prime Minister
t5 AND t1 t4
t6 AND t2 t4
t7 OR t3 t4

**** RUNNING MAKETRIGGER ON TRIGGER FILE ****
SubjectTrigger made with word: Cameron
 --> Is trigger t1 in triggerMap?  True
SubjectTrigger made with word: Gillard
 --> Is trigger t2 in triggerMap?  True
SubjectTrigger made with word: Harper
 --> Is trigger t3 in triggerMap?  True
PhraseTrigger made with phrase: Prime Minister
 --> Is trigger t4 in triggerMap?  True
AndTrigger made with triggers: SubjectTrigger("Cameron") and PhraseTrigger("Prime Minister")
 --> Is trigger t5 in triggerMap?  True
AndTrigger made with triggers: SubjectTrigger("Gillard") and PhraseTrigger("Prime Minister")
 --> Is trigger t6 in triggerMap?  True
OrTrigger made with triggers: SubjectTrigger("Harper") and PhraseTrigger("Prime Minister")
 --> Is trigger t7 in triggerMap?  True 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:57:34.427

看起来您从未在 makeTrigger 函数中执行任何代码；您只是在定义另一个函数 readTriggerConfig。

您是否尝试过将 makeTrigger 函数与其余代码隔离开来，并使用一小组已知输入来运行它以更好地了解其行为？使用调试器逐步执行它可能会帮助您了解正在发生的事情。

# oracle - joomla 2.5 - oracle 数据库在不同服务器的连接

> ID：15740144
> 
> 赞同：3
> 
> 时间：2013-04-01T08:32:21.837
> 
> 标签：oracle, joomla, database-connection, joomla2.5

是否可以在 joomla 2.5 中连接到远程服务器中的 oracle 数据库？我需要在我自己的服务器中使用 mysql（在 configuration.php 文件中配置）和远程 oracle db.. 任何人都可以帮忙吗？

连接字符串：

```
(DESCRIPTION=(ADDRESS_LIST = (ADDRESS = (PROTOCOL = TCP)(HOST = hostname)(PORT = 1521)))(CONNECT_DATA=(SID = db))) 
```

用户名：uname，密码：pwd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:32:56.577

您的问题也在这里被问到： [使用 PHP 连接到 Oracle](https://stackoverflow.com/questions/83040/connecting-to-oracle-using-php)

你看到这个了吗？

Joomla 本身与 Oracle 甚至不兼容 3.0 版。

显然，您要问的是更多的桥梁，应该很有可能。

# sql-server - Sum 函数和改变变量的类型

> ID：15740145
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:32:22.750
> 
> 标签：sql-server, vb.net, visual-studio-2010, vba

我正在为我的项目使用 SQL Server Express。我有一张像这样的桌子：

```
Number     Name     Surname     Point     Position
------     ----     -------     -----     --------
1          John     Black       10000     True
2          Jane     Lincoln     8800      True
3          Edward   Payne       17000     False
ETC... 
```

我想准备一个查询来总结`Point`位置的真实性

```
SELECT Sum(Point) AS Exp1
FROM   DataTable
WHERE  Position = True 
```

我的问题是 is 的`Position`类型`Nvarchar`。所以查询不会对`Point`s 求和。我尝试将类型更改`Nvarchar`为`int`，但我有一个大项目并且它给出了几个错误。有没有办法进行查询以求和`Point`？

（我试过用`Sum(Var(Point))`但不行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:39:28.410

采用

```
select sum(CAST(Point AS INT)) as Exp1 from DataTable where position = 'True' 
```

或者

```
 select sum(CONVERT(int, Point)) as Exp1 from DataTable where position = 'True' 
```

# java - 如何采用 MVC 到带有 GUI 的服务器？

> ID：15740146
> 
> 赞同：0
> 
> 时间：2013-04-01T08:32:24.187
> 
> 标签：java, swing, user-interface

我在 java SE 中使用 GUI 编写简单的服务器。所以我想使用MVC。但是我在处理控制器中的许多客户端连接问题时遇到了麻烦。我有这个课程：

*   主窗口 - 视图
*   ClientPanel - 视图 - MainWindow 的一部分。每个 ClientPanel 对象应代表与特定客户端的每个连接并显示该客户端的参数
*   控制器
*   服务器 - 等待客户端运行新线程以进行句柄连接的线程
*   ClientConnectionHandler - 处理与客户端连接的线程

那么如何使用 Conrtoller 将 ClientPanel 与 ClientConnectionHandler “连接”？

我认为我应该向 MainWindow（或者可能向 ClienPanel）添加一些接口，以及如何将它传递给 Controller。也许做同样的ClientConnectionHandler。但是什么接口，在哪里？

# javascript - 多个 Javascript 调用合并为一个

> ID：15740149
> 
> 赞同：1
> 
> 时间：2013-04-01T08:32:40.597
> 
> 标签：javascript

我确信这是一个非常基本的问题，但我在我的网站上使用以下内容 (hostingconnections.com.au/domains.php)

```
http://secure.hostingconnections.com.au/feeds/domainprice.php?tld=.com&type=register%20&regperiod=1&format=0
http://secure.hostingconnections.com.au/feeds/domainprice.php?tld=.mobi&type=register%20&regperiod=1&format=0 
```

ETC..

其中产生以下内容：

```
 document.write('12.37');
 document.write('19.05'); 
```

在一个页面上执行 100 次（tld 值更改）后，它会严重减慢页面加载速度。如何将这些合并到一个 .JS 文件中，我可以在每个将出现的页面上指定该文件。

我一直在为这个问题拔头发。

# c# - 使用反射查询应用程序

> ID：15740151
> 
> 赞同：0
> 
> 时间：2013-04-01T08:32:47.333
> 
> 标签：c#, reflection

我曾多次使用反射从屏幕元素、调用方法等中获取值。但现在我正在开发一个名为 Avaya 的应用程序，因为这不是一个真正有名的应用程序，我找不到任何帮助。我的目标是从这个应用程序中获取一些字段，使用自动化 UI 库是不可能的，因为这些字段对于任何 UI 检查器（如 Spy++ 等）都是不可见的。

解决我的问题的唯一方法是开发一个小代码来询问应用程序，结果将是我可用的、每种方法、每个值等。

然后我必须从接口开始，我去 regedit，我得到了 20 个接口的列表，然后我开始在这些接口上循环代码以获取所有类，然后循环到每个方法和属性，对吗？然后我开始我的代码获取类型并创建和实例..：

```
try            {
foreach (string ThisInterface in ArrayInterfaces)
{
ThisInterfacee = ThisInterface;
//Call this interface
Type AvayaWorkspaceType = Type.GetTypeFromProgID(ThisInterface, true);
//Create Instance of this
object workspace = Activator.CreateInstance(AvayaWorkspaceType); 
```

关于如何继续的任何想法？

非常感谢任何建议都欢迎:) 我使用反射和 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:25:03.450

解决方案：我无法使用的原因是因为反射仅适用于 .NET 基础应用程序，对于其他应用程序，您应该使用 IUIautomation 或 user32.dll

# iphone - 在 UIPageControl 上加载 ViewController 的替代方法

> ID：15740154
> 
> 赞同：6
> 
> 时间：2013-04-01T08:32:59.590
> 
> 标签：iphone, ios, objective-c, uipagecontrol

在我的项目中，我使用 a`UIPageControl`作为`UIViewController`滚动容器。我使用了本教程（使用`ARC`和故事板）：[http](http://www.wannabegeek.com/?p=168) ://www.wannabegeek.com/?p=168和源代码：[https](https://github.com/wannabegeek/PageViewController) ://github.com/wannabegeek/PageViewController 如您所见`ViewControllers`，项目中有 3 个，并且它们作为子元素添加到`CustomPagerViewController`. 在那个项目中，只`ViewControllers`添加了 3 个，但在我的项目中，我得到了 3 个以上`ViewControllers`，并且我还重复使用了它们，上面还有其他文本、图像、标签等。问题是，在项目中，所有这些`ViewControllers`都会在加载时`CustomPagerViewController`加载，这会消耗内存，所以我正在寻找另一种方法来处理这个问题，而不是一次加载它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T12:12:48.273

您不应该尝试以这种方式优化控制器分配。显然，在内存中保留视图控制器会占用空间，但相信我，并没有那么多。

我们必须在这里区分控制器和它的视图。为了让自己显示在屏幕上，视图可能会占用大量内存，但 iOS 已经有自己的机制在不再需要时释放这些内存（即：视图不在屏幕上/没有窗口） .

iOS 视图控制器过去常常自己释放视图内存（这种行为在 [UIViewControllers didReceiveMemoryWarning] 中），但在 iOS 6 中不再是这种情况。现在你有责任这样做，因为你觉得你的应用程序需要它。请记住，尽管在此方法（或 dealloc）中取消了这些视图，但您不会节省太多内存，因为用于在屏幕中显示视图的大部分（图形）资源可能已经被 iOS 释放，并且您最终可能释放的内存量接近 0。

总而言之，在您的情况下，我会使用[本指南](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)将 PagerViewController 转换为合适的 iOS 容器控制器。关键是调用以下方法：

```
[UIViewController addChildViewController:]
[UIViewController willMoveToParentViewController]
[UIViewController removeFromParentViewController]
[UIView addSubview:]
[UIView removeFromSuperview] 
```

根据您的需要以正确的顺序排列。在您的情况下，您可以在 scrollViewDidScroll 方法中添加/删除这些。以这种方式使用它们，让 Apple 的魔法发生。

您不妨使用[UIPageViewController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)，它为您提供了一些很好的开箱即用功能。

# android - Android缩放和旋转图像视图

> ID：15740155
> 
> 赞同：5
> 
> 时间：2013-04-01T08:33:28.210
> 
> 标签：android, rotation, imageview, zooming, scale

谁能告诉我一个图像视图的例子，它在捏合时同时适应缩放和旋转功能。

我无法找到它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:35:44.163

查看 Chris Banes 的[photoview](https://github.com/chrisbanes/PhotoView)库。

用法：

> 这是一个提供的示例，它展示了如何以更高级的方式使用该库，但为了完整起见，以下是使 PhotoView 正常工作所需的全部内容：

```
<com.github.chrisbanes.photoview.PhotoView
    android:id="@+id/photo_view"
    android:layout_width="match_parent"
    android:layout_height="match_parent"/>
PhotoView photoView = (PhotoView) findViewById(R.id.photo_view);
photoView.setImageResource(R.drawable.image); 
```

> 而已！

提供了几种方法，例如`photo.setRotationBy(10);`用于旋转和`mPhotoView.setScaleType(ImageView.ScaleType.CENTER);`用于缩放。示例中的更多示例包括：

```
 public boolean onMenuItemClick(MenuItem item) { // Line 71
            switch (item.getItemId()) {
                case R.id.menu_zoom_toggle:
                    mPhotoView.setZoomable(!mPhotoView.isZoomable());
                    item.setTitle(mPhotoView.isZoomable() ? R.string.menu_zoom_disable : R.string.menu_zoom_enable);
                    return true;

                case R.id.menu_scale_fit_center:
                    mPhotoView.setScaleType(ImageView.ScaleType.CENTER);
                    return true;

                case R.id.menu_scale_fit_start:
                    mPhotoView.setScaleType(ImageView.ScaleType.FIT_START);
                    return true;

                case R.id.menu_scale_fit_end:
                    mPhotoView.setScaleType(ImageView.ScaleType.FIT_END);
                    return true;

                case R.id.menu_scale_fit_xy:
                    mPhotoView.setScaleType(ImageView.ScaleType.FIT_XY);
                    return true;

                case R.id.menu_scale_scale_center:
                    mPhotoView.setScaleType(ImageView.ScaleType.CENTER);
                    return true;

                case R.id.menu_scale_scale_center_crop:
                    mPhotoView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                    return true;

                case R.id.menu_scale_scale_center_inside:
                    mPhotoView.setScaleType(ImageView.ScaleType.CENTER_INSIDE);
                    return true;

                case R.id.menu_scale_random_animate:
                case R.id.menu_scale_random:
                    Random r = new Random();

                    float minScale = mPhotoView.getMinimumScale();
                    float maxScale = mPhotoView.getMaximumScale();
                    float randomScale = minScale + (r.nextFloat() * (maxScale - minScale));
                    mPhotoView.setScale(randomScale, item.getItemId() == R.id.menu_scale_random_animate);

                    showToast(String.format(SCALE_TOAST_STRING, randomScale));

                    return true;
                case R.id.menu_matrix_restore:
                    if (mCurrentDisplayMatrix == null)
                        showToast("You need to capture display matrix first");
                    else
                        mPhotoView.setDisplayMatrix(mCurrentDisplayMatrix);
                    return true;
                case R.id.menu_matrix_capture:
                    mCurrentDisplayMatrix = new Matrix();
                    mPhotoView.getDisplayMatrix(mCurrentDisplayMatrix);
                    return true;
            }
            return false;
        }
    }); 
```

和

```
 public boolean onMenuItemClick(MenuItem item) {
            switch (item.getItemId()) {
                case R.id.action_rotate_10_right:
                    photo.setRotationBy(10);
                    return true;
                case R.id.action_rotate_10_left:
                    photo.setRotationBy(-10);
                    return true;
                case R.id.action_toggle_automatic_rotation:
                    toggleRotation();
                    return true;
                case R.id.action_reset_to_0:
                    photo.setRotationTo(0);
                    return true;
                case R.id.action_reset_to_90:
                    photo.setRotationTo(90);
                    return true;
                case R.id.action_reset_to_180:
                    photo.setRotationTo(180);
                    return true;
                case R.id.action_reset_to_270:
                    photo.setRotationTo(270);
                    return true;
            }
            return false;
        } 
```

[您可以在此处](https://github.com/chrisbanes/PhotoView/tree/master/sample/src/main/java/com/github/chrisbanes/photoview/sample)查看所有示例。

# iphone - 使用我的 ccspriteframes 类时出错

> ID：15740159
> 
> 赞同：0
> 
> 时间：2013-04-01T08:33:41.060
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

我想已经为我的子弹精灵加载了帧，所以我创建了一个类来保存所有精灵帧。当我使用这个类时它崩溃了。我真的可以使用帮助，非常感谢。

。H

```
@interface loadedFrames : NSObject 
{
    CCSpriteFrame *bullet0;
}
@property (nonatomic, retain) CCSpriteFrame *bullet0;
@end
@interface HelloWorldLayer : CCLayer <GKAchievementViewControllerDelegate, GKLeaderboardViewControllerDelegate>
{
    loadedFrames *frames;
}
@property (nonatomic, retain) loadedFrames *frames; 
```

.m

```
@implementation loadedFrames : NSObject
@synthesize bullet0;
@end

- (void) loadSprites
{
      [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:
      [NSString stringWithFormat:@"clonespritesheet%d.plist", loadlevel]];

      self.frames.bullet0 = [[CCSpriteFrameCache sharedSpriteFrameCache]
               spriteFrameByName:@"bullet0.png"];
}

- (void) addBullet:(int)bulletType
{
      mainbullet = [bullet spriteWithSpriteFrame:frames.bullet0];
} 
```

崩溃日志

```
2013-04-01 01:45:42.596 test[15111:907] *** Assertion failure in -[bullet initWithSpriteFrame:], /Users/Fei/Desktop/test/libs/cocos2d/CCSprite.m:212
(lldb) 
```

# php - 使用数组中列出的表运行查询

> ID：15740161
> 
> 赞同：1
> 
> 时间：2013-04-01T08:33:52.210
> 
> 标签：php

我需要运行一个从多个表中选择记录的 mysql 查询。表的名称通过邮寄接收并存储在数组中。我所做的是这不起作用：

```
//--> Check if anything is posted from the client
if(isset($_POST['code'])){

    $emps = array();

    foreach(($_POST['code']) as $c) {
        $emps[] = $c;
    }

    @$res = mysql_query("select code,fname,faname from (".implode(',',$emps).")") where emp_code='11330' ;

    while($r = mysql_fetch_array($res)){
        //do something...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:38:48.067

代替

```
mysql_query("select code,fname,faname from (".implode(',',$emps).")") where emp_code='11330' ; 
```

和

```
mysql_query("select code,fname,faname from (".implode(',',$emps).") where emp_code='11330'") ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:59:28.793

试试这个

```
 for($i=0;$i<count($emps);$i++)
  {
      $query=$query."select code,fname,faname from ".$emps[$i]." where 
         ".$emps[$i].".emp_code='11330' UNION " ;
  }

     @$res=mysql_query($query); 
```

# javascript - 如何在组合框中添加多个日期

> ID：15740166
> 
> 赞同：-2
> 
> 时间：2013-04-01T08:34:18.047
> 
> 标签：javascript, asp.net

使用 Asp.Net 和 Java 脚本

从 Datatime 控件中，我正在选择应该添加组合框的多个数据。

Java 脚本

```
function closed(cal) {
    $("#txtIndividualDays").val("");
    var noDays = 0;
    var ddlDate = document.getElementById("sIndividualDays");
    var opt;
    ddlDate.options.length = 0;

    MA.length = 0;

    var countDays = 0;
    for (var i in cal.multiple) {
        countDays++;
    }
    var arrDays = new Array(countDays);
    countDays = 0;
    if (arrDays.length == 0) {
        opt.text = "Select Date";
        opt.value = "-1";
        $("#txtIndividualDays").val($("#txtIndividualDays").val() + opt.text + ";");
    }
    for (var i in cal.multiple) {
        arrDays[countDays] = i;
        countDays++;
    }
    for (var i in arrDays.sort()) {
        var d = cal.multiple[arrDays[i]];
        var isWeekend = false;
        var isHoliday = false;
        if (d) {
            var _date;
            _date = d.print("%m/%d/%Y");
            opt.text = d.print("%m/%d/%Y");
            opt.value = d.print("%m/%d/%Y");
            MA[MA.length] = d;
            document.getElementById("txtIndividualDays").value += opt.text + ";";
        }
    }
    document.getElementById("txtWorkingDays").value = noDays;
    var control = $("#sIndividualDays");
    var itemCount = $("#sIndividualDays option").length;
    cal.hide();
    return true;
}; 
```

上面的脚本在选择单个日期时显示错误。我的脚本有什么问题。需要脚本帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:58:48.280

我不确定这些行是否正确：

```
var opt;
..............
opt.text = "Select Date";
opt.value = "-1";
........... 
```

我建议你改为：`var opt = new Object();`

# android - 获取android中Sqllite中的所有列值

> ID：15740169
> 
> 赞同：0
> 
> 时间：2013-04-01T08:34:32.097
> 
> 标签：android, android-sqlite

我已将产品名称保存在`Sqllite` 数据库的一列中。现在已经保存了很多产品名称，我需要将所有产品名称发送到 Web 服务。例如 egg、briyani、idly。我已经在其中使用了此代码，`Sqllite`但未附加字符串。我在此代码下面提到了：

```
public String fetchMyRowid(String column_name)
    {
        String query = "select  "+column_name+" From " + TABLErestaurant;

        mCursor =db.rawQuery(query, null);
        StringBuffer buf = new StringBuffer();
        if (mCursor.moveToFirst()) {

            buf.append(mCursor.getString(0)+",");

        }

       return buf.toString();
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:39:39.107

```
if (mCursor.moveToFirst()) {
 buf.append(mCursor.getString(0)+",");
} 
```

问题是你没有迭代你的结果。改为这样做：

```
while(mCursor.moveToNext()) {

 buf.append(mCursor.getString(mCursor.getColumnIndex(column_name))+",");

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:54:01.460

您的代码很好，但您伪造：`db.getWritableDatabase();`或`getreadableDatabase()`

我修改了你的代码这里`DBController`是我的课`public class DBController extends SQLiteOpenHelper`

所以你的代码将是..

```
public String fetchMyRowid(String column_name, DBController db) {
        String query = "SELECT  " + column_name + " FROM " + TABLErestaurant;
        SQLiteDatabase dd = db.getWritableDatabase();
        cursor = dd.rawQuery(query, null);
        StringBuffer buf = new StringBuffer();
        if(cursor.getCount() > 0 || cursor != null){

             do {

              Log.e("name--->", "" + cursor.getString(0));
              buf.append(cursor.getString(0) + ",");

              } while (cursor.moveToNext());

              Log.e("name---> buffeer-->", "" + buf);

          }

        return buf.toString();
    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T08:35:42.693

在这里做个小改动，

而不是这条线，

```
String query = "select  "+column_name+" From " + TABLErestaurant; 
```

试试这条线

```
String query = "select  * From " + TABLErestaurant; 
```

# c# - wp7应用平铺效果

> ID：15740170
> 
> 赞同：0
> 
> 时间：2013-04-01T08:34:33.137
> 
> 标签：c#, windows-phone-7, tile, live-tile

我正在创建一个具有平铺效果的 Windows 手机应用程序，但在某处我混淆了使用/创建平铺。我只是混淆了应用程序和辅助磁贴，有什么区别？

实际上我的要求是在我的应用程序中创建一个页面，其中包含一些图块（我说这些是图块，可能是其他东西）。为了更清楚，下面显示了图片--->![在此处输入图像描述](https://i.stack.imgur.com/XgSsr.png)

每当用户点击这些图块中的任何一个时，他都会重定向到相应的页面。（到某个页面），例如：- 如果他单击消息图块，那么他将重定向到显示消息的某个页面。

我还想问，如果这些不是瓷砖，那么这些看起来像瓷砖并包含一些定期更新的文本吗？？？& 应用程序磁贴和辅助磁贴有什么区别？

注意：- 图片是一些 wp7 应用程序，经过编辑以明确我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T15:26:23.513

对于页面之间的导航，请使用 NavigationService.Navigate 方法。

没有任何控件的行为方式与图块相同，因此您需要实现所需的功能。您可以使用矩形、透明背景图像和文本块的巧妙组合，它们一起可以响应点击事件和导航。

# paypal - 贝宝订阅下一个付款日期

> ID：15740171
> 
> 赞同：0
> 
> 时间：2013-04-01T08:34:34.613
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

如何从 Paypal 的 IPN 通知中获取下一个付款日期。那里有相关的参数吗？我找到了“next_payment_date”，但不清楚。现在，我只是在自己计算。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:08:51.603

自己计算很好，因为 PayPal 有时会跳过发送 IPN。这种情况并不经常发生，我已经完成了数万笔交易，而我只看到了不到 5 次。

当订阅停止时，PayPal 应该发送一个 subscr_eot。

如果您使用标准付款，您将永远看不到 next_payment_date [https://www.x.com/developers/paypal/forums/ipn/pdt/nextpaymentdate-will-not-show](https://www.x.com/developers/paypal/forums/ipn/pdt/nextpaymentdate-will-not-show)

此外，如果您接受 echeques（通过银行账户付款），则付款不会总是在该日期发生，一周后的某些时候或更长时间。

# asp.net - asp.net-app 和 web-service 应用程序之间的 asp.net 缓存共享/失效

> ID：15740177
> 
> 赞同：0
> 
> 时间：2013-04-01T08:34:52.433
> 
> 标签：asp.net, caching

我在同一台服务器上部署了一个 Web 服务和一个 Web 应用程序，两个应用程序都缓存了一些公共数据，并且只有 Web 应用程序更改了数据。因此，我需要一些简单的机制来使 Web 服务应用程序上的缓存数据无效，或者需要一种替代缓存机制，以便两个应用程序使用相同的缓存数据副本。现在，当缓存数据发生更改时，我无法通知 Web 服务应用程序有关更改。

Asp.Net 4.5、SQL-2008、IIS 7.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:36:25.223

您可以使用分布式缓存[`memcached`](http://memcached.org/)，[`AppFabric`](http://en.wikipedia.org/wiki/AppFabric_Caching)例如。您可能还想查看[http://sharedcache.codeplex.com/](http://sharedcache.codeplex.com/)

如果您不能使用分布式缓存，则必须在第一个应用程序（可通过 HTTP 访问）中提供一个端点，这将使内存中的缓存无效。然后第二个应用程序可以调用这个端点。当然，根据您的具体要求，您可能希望保护此端点，以避免有人只是向它发送简单的请求，并在他认为合适的时候使您的应用程序的缓存无效。

# css - 如何在 css 文件中创建别名或变量

> ID：15740178
> 
> 赞同：1
> 
> 时间：2013-04-01T08:35:08.897
> 
> 标签：css

我有 css 文件列表，每个 css 文件都有不同的图像位置代码，如 url(../_images/headerImages.jpg)，现在我将图像放置到其他域，因此我想创建一个变量，如 var domainPath = [http://sitename.com](http://sitename.com)以便在每个 url(../) 处我都可以编写类似 url(domainPath+ '/images/headerImages.jpg') 的内容。

例子

```
var DOMAIN_PATH = http://www.mysite.com;

#header {background: url(DOMAIN_PATH/_images/headerimage.jpg)no-repeat; } 
```

请帮我..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:37:30.700

您不能在纯 CSS 中使用变量。我建议使用 CSS 预处理器，它是一种编译为 CSS 的语言。[SASS](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDMQFjAA&url=http://sass-lang.com/&ei=NEdZUdmiM6iOiAed8oCoDQ&usg=AFQjCNGj26Uvw2Xaq_ZQbByTuIQsbFtzjA&bvm=bv.44442042,d.aGc)很棒，你可以按照你的要求做：

```
$domainpath: url(http://www.mysite.com/_images/bg-header-noodletools-express.jpg);

#header {background: $domainpath no-repeat; } 
```

另一种选择是[LESS](https://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDIQFjAA&url=http://lesscss.org/&ei=QEdZUaW7L6mkiAfT9YGwBA&usg=AFQjCNF-GHR66GftFm9aMGmUFpVKsYvD7A&bvm=bv.44442042,d.aGc)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-16T10:54:31.007

如[https://ishadeed.com/article/css-vars-101/](https://ishadeed.com/article/css-vars-101/)等中所述，现在可以在 CSS 中使用变量。

你可以做：

```
:root {
  --domainpath: url(http://www.yourdomain.com/_images/bg-header-noodletools-express.jpg);
}

#header {
  background: var(--domainpath) no-repeat;
} 
```

# javascript - 如何在 jquery 中删除 window.location 上的一部分

> ID：15740180
> 
> 赞同：1
> 
> 时间：2013-04-01T08:35:30.020
> 
> 标签：javascript, jquery

我想检查window.location，如果有“IsReload=True”关键字，我会删除它。例如：这是我的 window.location：

```
http://localhost/Demo/User/ManagedUsersTab?isReload=True 
```

我想删除 "?isReload=True" 并且不重新加载此页面，只需将其删除。我该怎么做。这是我的片段：

```
if (window.location.href.indexOf("?isReload=True") > -1) {
            window.location.replace('@Url.Action("ManagedUsersTab", "User")');
        } 
```

此片段重新加载页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:37:49.347

尝试

```
var regex = /(\?|&)isReload=True/;
var location = window.location.href;
if(regex.test(location)){
    window.location =location.replace(regex, '$1')
} 
```

# asp.net - 从 asp:login 控件中删除记住我复选框

> ID：15740183
> 
> 赞同：6
> 
> 时间：2013-04-01T08:35:39.357
> 
> 标签：asp.net, login, checkbox

我想用 ASP.NET 4 创建一个登录但没有`rememberMe`复选框。有什么办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T08:40:08.183

看看[这个](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.login.displayrememberme%28v=vs.100%29.aspx)

如果您正在使用该控件，则只需在您的 aspx 文件中添加如下内容：

```
<asp:Login DisplayRememberMe="False" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T08:39:46.027

按下拉菜单并按`Convert To Template`。然后删除它。此外，还有一个属性，`DisplayRememberMe`您可以将其设置为 false。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T08:45:16.357

您可以通过使用登录控件的属性来控制显示`RememberMe`

为此，您必须将该属性设置为 false

```
 <asp:Login ID="Login1" runat="server" DisplayRememberMe="false">
        </asp:Login> 
```

或者您也可以将其转换为模板并删除您不想使用的任何项目。默认情况下，模板控件看起来像这样。您可以从此 HTML 中删除记住我。

```
<asp:Login ID="Login1" runat="server" DisplayRememberMe="false">
            <LayoutTemplate>
                <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
                    <tr>
                        <td>
                            <table cellpadding="0">
                                <tr>
                                    <td align="center" colspan="2">
                                        Log In</td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">User Name:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                            ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                            ToolTip="User Name is required." ValidationGroup="Login1">*</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right">
                                        <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                                    </td>
                                    <td>
                                        <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
                                        <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" 
                                            ControlToValidate="Password" ErrorMessage="Password is required." 
                                            ToolTip="Password is required." ValidationGroup="Login1">*</asp:RequiredFieldValidator>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="center" colspan="2" style="color:Red;">
                                        <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                                    </td>
                                </tr>
                                <tr>
                                    <td align="right" colspan="2">
                                        <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" 
                                            ValidationGroup="Login1" />
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </tr>
                </table>
            </LayoutTemplate>
        </asp:Login> 
```

# google-analytics - 带有谷歌分析数据和谷歌客户端 JavaScript 库的“最受欢迎的帖子”小部件

> ID：15740189
> 
> 赞同：1
> 
> 时间：2013-04-01T08:36:05.543
> 
> 标签：google-analytics, google-client

是否可以使用**Google Analytics API**和**Google Client JavaScript library**来访问有关我网站上最受欢迎的项目（访问次数最多）的数据，并将其显示在小部件中？我需要一个“最受欢迎”页面小部件，通常需要构建服务器端代码，但我想知道我是否可以在前端完成所有操作。

我主要担心的是：

1.  Google Analytics API 是否提供此类数据？
2.  我需要访客授权吗？在文档中它说“*如果应用程序需要访问用户的个人信息，它会打开一个与谷歌身份验证服务器的会话。身份验证服务器会打开一个对话框，提示用户授权使用个人信息。* ”

有人使用这种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-22T02:04:13.133

[http://popularposts.benguild.com/](http://popularposts.benguild.com/) ...这就是我建造这个的原因。它只是从谷歌分析计划的电子邮件中接收数据，并在一年后停止工作之前提醒您延长它们。

# sql-server - 在 t-sql 中添加函数以使事情变得更简单

> ID：15740190
> 
> 赞同：0
> 
> 时间：2013-04-01T08:36:17.523
> 
> 标签：sql-server, tsql

```
insert into @res
    select * from (
        select * from myTable where my_name like '%'+@token+'%'
    union

        --replace special characters
        select * from myTable where my_name like '%'+REPLACE ( @token , 'e' , 'è' )+'%' order by name
        select * from myTable where my_name like '%'+REPLACE ( @token , 'e' , 'é' )+'%' order by name
        select * from myTable where my_name like '%'+REPLACE ( @token , 'e' , 'Ě' )+'%' order by name
        ----

) as tmp order by name 
```

注释之间的代码部分比这里长得多。

如何在不丢失其功能的情况下将其移至新功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:35:35.640

您可以使用`LIKE`这样的字符串`%ar[e,è,é,Ě]na%`，它将覆盖您的所有工会。如果规则太多，这里有一个函数可以做到这一点：

干得好

```
CREATE FUNCTION transform (@inStr varchar(300))
returns varchar(255)
AS  
BEGIN
DECLARE @registry varchar(300),
    @curChar varchar(20),
    @outStr varchar(300),
    @counter int,
    @start int,
    @end int;

SET @outStr = '%';
/* Creating a registry of replacements in format {X}[x,X,Xx];
   Where {X} contains the character to be replaced,
   [x,X,Xx]; contains the replacemet characters
*/
SET @registry = '{e}[e,è,é,Ě];
                 {s}[ ..other translations of "s" go here.. ];
                 {n}[n,N];';

set @counter = 1;

WHILE (LEN(@inStr) >= @counter)
    BEGIN
        SELECT @curChar = substring(@inStr, @counter, 1)
        IF (CHARINDEX( '{' + @curChar + '}', @registry, 1) > 0)
            BEGIN
                SELECT @start = CHARINDEX( '{' + @curChar + '}', @registry, 1) + 2;
                SELECT @end = CHARINDEX( ';', @registry, @start);
                SELECT @curChar = substring(@registry, @start + 1, @end - @start - 1);
            END

        SET @outStr = @outStr + @curChar
        SET @counter = @counter + 1;
    END 
SET @outStr = @outStr + '%'

RETURN @outStr; 
END 
```

例如这里

```
... WHERE x.str like transform('arena') 
```

该函数将返回`%ar[e,è,é,Ě][n,N]a%`。此字符串表示 - 任何包含以 开头的字符串的值`ar`，下一个字符是任何一个`e,è,é,Ě`，下一个字符是任何一个`n,N`并以 结尾`a`。

所以...

```
 select * from myTable where my_name like transform(@token) 
```

将涵盖任何变化，您将不再需要这些工会。

# java - 在Java中将xml文件转换为excel

> ID：15740195
> 
> 赞同：0
> 
> 时间：2013-04-01T08:36:51.733
> 
> 标签：java, xml, excel

我是Java初学者，我需要将`xml`文件转换为excel。

我做了很多研究，我发现我必须使用`POI`库，但我不确定使用它的方式以及它是否足够或者我需要其他东西。

我真的觉得我被困住了，我需要你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T09:20:37.190

**这应该让你开始，记得我用 apache POI 来写 XML 文件**

我将此 xml 文件作为输入供您参考

```
<book>
<person>
  <first>hussain</first>
  <last>hussain</last>
  <age>21</age>
</person>
<person>
  <first>akhtar</first>
  <last>akhtar</last>
  <age>22</age>
</person>
<person>
  <first>wahid</first>
  <last>wahid</last>
  <age>23</age>
</person>
</book>

package com.xmlParsing;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;
import org.w3c.dom.*;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.DocumentBuilder;
import org.xml.sax.SAXException;
import org.xml.sax.SAXParseException;

public class ReadAndPrintXMLFile {

    public static void main(String argv[]) {

        ArrayList<String> firstNames = new ArrayList<String>();
        ArrayList<String> lastNames = new ArrayList<String>();
        ArrayList<String> ages = new ArrayList<String>();

        try {

            DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
            DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
            Document doc = docBuilder.parse(new File("C:/Users/hussain.a/Desktop/book.xml"));

            // normalize text representation
            doc.getDocumentElement().normalize();
            System.out.println("Root element of the doc is :\" "+ doc.getDocumentElement().getNodeName() + "\"");
            NodeList listOfPersons = doc.getElementsByTagName("person");
            int totalPersons = listOfPersons.getLength();
            System.out.println("Total no of people : " + totalPersons);
            for (int s = 0; s < listOfPersons.getLength(); s++) 
            {
                Node firstPersonNode = listOfPersons.item(s);
                if (firstPersonNode.getNodeType() == Node.ELEMENT_NODE) 
                {
                    Element firstPersonElement = (Element) firstPersonNode;
                    NodeList firstNameList = firstPersonElement.getElementsByTagName("first");
                    Element firstNameElement = (Element) firstNameList.item(0);
                    NodeList textFNList = firstNameElement.getChildNodes();
                    System.out.println("First Name : "+ ((Node) textFNList.item(0)).getNodeValue().trim());
                    firstNames.add(((Node) textFNList.item(0)).getNodeValue().trim());
                    NodeList lastNameList = firstPersonElement.getElementsByTagName("last");
                    Element lastNameElement = (Element) lastNameList.item(0);
                    NodeList textLNList = lastNameElement.getChildNodes();
                    System.out.println("Last Name : "+ ((Node) textLNList.item(0)).getNodeValue().trim());
                    lastNames.add(((Node) textLNList.item(0)).getNodeValue().trim());
                    NodeList ageList = firstPersonElement.getElementsByTagName("age");
                    Element ageElement = (Element) ageList.item(0);
                    NodeList textAgeList = ageElement.getChildNodes();
                    System.out.println("Age : "+ ((Node) textAgeList.item(0)).getNodeValue().trim());
                    ages.add(((Node) textAgeList.item(0)).getNodeValue().trim());
                }// end of if clause

            }// end of for loop with s var
            for(String firstName:firstNames)
            {
                System.out.println("firstName : "+firstName);
            }
            for(String lastName:lastNames)
            {
                System.out.println("lastName : "+lastName);
            }
            for(String age:ages)
            {
                System.out.println("age : "+age);
            }

        } 
        catch (SAXParseException err) 
        {
            System.out.println("** Parsing error" + ", line "+ err.getLineNumber() + ", uri " + err.getSystemId());
            System.out.println(" " + err.getMessage());
        } 
        catch (SAXException e) 
        {
            Exception x = e.getException();
            ((x == null) ? e : x).printStackTrace();
        } 
        catch (Throwable t) 
        {
            t.printStackTrace();
        }

        XSSFWorkbook workbook = new XSSFWorkbook();
        XSSFSheet sheet = workbook.createSheet("Sample sheet");

        Map<String, Object[]> data = new HashMap<String, Object[]>();
        for(int i=0;i<firstNames.size();i++)
        {
            data.put(i+"",new Object[]{firstNames.get(i),lastNames.get(i),ages.get(i)});
        }
        Set<String> keyset = data.keySet();
        int rownum = 0;
        for (String key : keyset) {
            Row row = sheet.createRow(rownum++);
            Object[] objArr = data.get(key);
            int cellnum = 0;
            for (Object obj : objArr) {
                Cell cell = row.createCell(cellnum++);
                if (obj instanceof Date)
                    cell.setCellValue((Date) obj);
                else if (obj instanceof Boolean)
                    cell.setCellValue((Boolean) obj);
                else if (obj instanceof String)
                    cell.setCellValue((String) obj);
                else if (obj instanceof Double)
                    cell.setCellValue((Double) obj);
            }
        }

        try {
            FileOutputStream out = new FileOutputStream(new File("C:/Users/hussain.a/Desktop/book.xlsx"));
            workbook.write(out);
            out.close();
            System.out.println("Excel written successfully..");

        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }// end of main

} 
```

确保您已添加以下 jar

1.  dom4j-1.6.1.jar
2.  stax-api-1.0.1.jar
3.  xmlbeans-2.3.0.jar

# firefox - 通过在线软件在 Firefox 中打开 MIME 类型

> ID：15740196
> 
> 赞同：0
> 
> 时间：2013-04-01T08:37:22.690
> 
> 标签：firefox, mime-types

如何让 Firefox 使用在线软件打开 MIME 类型？

例如：单击 Word 文档的链接时，我希望 Firefox 获取 URL 并调用[https://docs.google.com/viewer?url=](https://docs.google.com/viewer?url=)并将 Word 文档的 URL 传递给参数“url”。我知道有像“Google Docs Viewer”这样的插件，但我正在寻找一种适用于几种不同在线应用程序的通用方式。

我没有找到处理这种一般情况的 Firefox 插件。我是否需要为此实现 Firefox 插件，或者这可以由 Firefox MIME 类型处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T01:02:45.900

使用[Open IT Online](http://www.openitonline.com/) firefox-addon，它在“*下载*”对话框中添加了一个新选项，以在 Google Docs 中打开文件。
或使用[Google Docs Viewer](https://addons.mozilla.org/en-US/firefox/addon/48971/)右键单击​​上下文菜单。

# mysql - 如果是 MYSQL，DBInputFormat 是如何工作的？

> ID：15740197
> 
> 赞同：1
> 
> 时间：2013-04-01T08:37:25.790
> 
> 标签：mysql, database, hadoop

在 MYSQL 之类的数据库上运行 map reduce 程序时，我只是想知道是否首先在数据库上触发查询，然后获取结果集，然后创建拆分以由各个映射器操作，每个映射器都进行拆分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:42:45.070

我相信它首先检索所有记录，然后创建逻辑拆分，正如您从`setInput()`的签名中看到的那样：

```
public static void setInput(JobConf job,
                            Class<? extends DBWritable> inputClass,
                            String inputQuery,
                            String inputCountQuery) 
```

它得到了`inputCountQuery`这使得 hadoop 决定映射器的数量以及每个映射器要处理的记录数。

另请阅读[此处](http://blog.cloudera.com/blog/2009/03/database-access-with-hadoop/)*的 InputFormat*部分的限制。

# php - 取消设置 salesforce 选项列表值

> ID：15740199
> 
> 赞同：1
> 
> 时间：2013-04-01T08:37:30.043
> 
> 标签：php, soap, salesforce

我正在使用 SOAP Api 与 salesforce 一起开发应用程序。我对 Picklist 值有疑问。我以以下格式更新 salesforce 中的值

```
$object->field_name="val1;val2;val3"; 
```

它的工作，但是当我通过

```
 $object->field_name=""; 
```

该值不会改变，任何人都知道如何使用 php soap 在 salesforce 中取消设置值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:14:47.593

您需要在[`fieldsToNull`](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_concepts_core_data_objects.htm#sobject_topic)对象的数组中设置字段名称。在您的示例中，您会这样做：

```
$object->fieldsToNull = array("field_name"); 
```

有关更多信息，请参阅文档中的[PHP Toolkit 20.0 FieldsToNull 示例](http://wiki.developerforce.com/page/PHP_Toolkit_20.0_FieldsToNull_Sample_%28Partner%29)。

# ruby-on-rails - Rails 查询包括不工作

> ID：15740204
> 
> 赞同：2
> 
> 时间：2013-04-01T08:37:51.347
> 
> 标签：ruby-on-rails, ruby, associations

在我的应用程序中，我有 3 个模型：Item、Category 和 Categorization 定义如下：

```
class Item < ActiveRecord::Base
  attr_accessible :name, :description

  has_many :categorizations
  has_many :categories, :through => :categorizations
end

class Category < ActiveRecord::Base
  attr_accessible :name, :description, :parent, :children, :items, :parent_id  

  has_many :children, :class_name => "Category", :foreign_key => "parent_id", :dependent => :nullify
  belongs_to :parent, :class_name => "Category"

  has_many :categorizations
  has_many :items, :through => :categorizations
end

class Categorization < ActiveRecord::Base
  attr_accessible :category, :item

  belongs_to :category
  belongs_to :item

end 
```

但是，这样做：

```
 Category.where(:parent_id => self.id).includes(:items) 
```

不会向我返回与该类别关联的项目。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:27:50.540

尝试这个：

```
Category.where(parent_id: id).joins(:items) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T12:16:32.290

尝试这个：

```
Category.where(:parent_id => id).collect(&:items) 
```

它将返回与`where`子句匹配的所有类别的项目。

# javascript - 通过单击具有更改图像不透明度的图像来选中复选框

> ID：15740206
> 
> 赞同：2
> 
> 时间：2013-04-01T08:38:08.817
> 
> 标签：javascript, jquery, html, forms, checkbox

我有一个带有复选框的图像，我使用此代码通过单击图像来检查复选框...

```
<label for="img1"><img class="img" src="myimage.jpg" /></label>
<input type="checkbox" class="chk " checked="checked" id="img1" name="img1" value="0" /> 
```

它工作正常，我的问题是，我希望在选中图像不透明度上方的复选框时将`0.5`或在此图像上显示额外的内容`div`，并且当取消选中图像上方的不透明度时，如果我们使用 div，则返回`1.0`或删除该 div，有什么想法吗？？？？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T08:46:38.707

您可以使用一些高级 CSS 选择器来完成此操作，前提`<label>`是 是复选框。选择`~`器称为通用兄弟选择器，将匹配元素之后的所有兄弟。

[jsFiddle](http://jsfiddle.net/Tyriar/5euSB/)

**CSS**

```
input:checked ~ label {
    opacity: 0.5;
} 
```

**HTML**

```
<input type="checkbox" class="chk " checked="checked" id="img1" name="img1" value="0" />
<label for="img1">
    <img class="img" src="https://www.google.com.au/images/srpr/logo4w.png" />
</label> 
```

## 支持

仅支持`:checked`IE9 及更高版本，如果您需要对 IE8 的支持，那么`.checked`除了 CSS3`:checked`选择器之外，您还可以使用一个类作为使用它。

**JS**

```
$('#img1').click(function () {
    $(this).toggleClass('checked');
}); 
```

**CSS**

```
input:checked ~ label,
input.checked ~ label {
    opacity: 0.5;
} 
```

对于 < IE8 的支持，您应该使用更通用的 JavaScript 解决方案。

```
$('#img1').click(function () {
    $('label[for=' + this.id + ']').toggleClass('checked');
});

label.checked {
    opacity: 0.5;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:46:56.520

```
$('.img').click(function() {
    if ($('#img1').is(':checked'))
        $(this).css('opacity', 0.5);
    else
        $(this).css('opacity', 1);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T20:55:20.477

```
$('.img').click(function() {
    $(this).css('opacity', $('#img1').is(':checked')?0.5:1.0);
}); 
```

# servicestack - ServiceStack auth cookie 不同的客户端

> ID：15740207
> 
> 赞同：2
> 
> 时间：2013-04-01T08:38:14.363
> 
> 标签：servicestack

我鼓励我的公司将 ServiceStack 用于其中一个软件项目。我无论如何都喜欢 servicestack 框架。我遇到了一个我自己无法解决的问题。在 Web 应用程序中，我使用登录页面中的 ServiceStack c# Jsonclient 进行身份验证。当我获得经过身份验证的 c# 客户端时，会在其中保存 ss-id cookie。因此，当我使用相同的 c# 客户端进行服务调用时，我可以访问我的服务中的会话。但是有一个自动完成功能，它通过 Jquery AJAX 调用服务来调用那里的客户端（浏览器）没有经过身份验证，并且浏览器也没有保存 ss-id cookie。我的问题是当我在代码隐藏上使用 c# 客户端进行身份验证时。我如何在浏览器上存储会话 cookie（需要吗？）所以当我从 javascript 客户端调用服务时，我也可以在我的服务中访问会话。

感谢您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T20:11:52.093

**我的问题是当我在代码隐藏上使用 c# 客户端进行身份验证时。如何在浏览器上存储会话 cookie（需要吗？）**

因此，您的浏览器需要有一个会话 cookie 来让 ServiceStack 知道它已成功通过身份验证。浏览器对 C# 客户端发生的事情一无所知。我不确定您如何发布您的身份验证数据（用户名/密码/等），但如果它是通过浏览器并且您将数据传递给 C# 客户端，您可以执行以下操作。这在 MVC 中，但重点是从客户端获取会话 cookie 并进入对浏览器的响应。

```
 public ActionResult Login()
    {
        var client = new JsonServiceClient("http://localhost");

        var response = client.Post(new Auth() {UserName = "TestUser", Password = "Password"} );

        var ssId = "";
        foreach(Cookie c in client.CookieContainer.GetCookies(new Uri("http://localhost")))
        {
            if (c.Name == "ss-id")
            {
                ssId = c.Value;
            }
        }

        var cookie = new HttpCookie("ss-id", ssId);
        this.ControllerContext.HttpContext.Response.SetCookie(cookie);
        return new EmptyResult();
    } 
```

如果您使用的是 MVC [，这](https://github.com/ServiceStack/ServiceStack.UseCases/blob/master/CustomAuthenticationMvc/Controllers/AccountController.cs#L48)将是一个更好的方法。但是，我不确定您使用 C# 客户端的原因以及您如何接收身份验证数据以及您是否能够进入对浏览器的响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T09:48:11.633

在对浏览器和 .NET 客户端进行身份验证时，设置“ss-id”和“ss-pid”cookie 对我有用。我的登录控制器的部分重写：

```
[HttpPost]
public ActionResult Logon(Auth auth)
{
    using (var client = new ServiceStack.ServiceClient.Web.JsonServiceClient("://ServicestackUrl/"))
    {
        auth.provider = "credentials";
        auth.RememberMe = true;
        client.UserName = auth.UserName;
        client.Password = auth.Password;
        var authResponse = new AuthResponse();
        try
        {
            authResponse = client.Send(auth);
        }
        catch (WebException ex)
        {
            throw ex;
        }

        foreach (Cookie c in client.CookieContainer.GetCookies(new Uri(client.BaseUri)))
        {
            if (c.Name == "ss-id" || c.Name == "ss-pid")
            {
                Response.SetCookie(new HttpCookie("ss-id", c.Value));
            }
        }

        //Log the user on with forms authentication
        string encryptedTicket = FormsAuthentication.Encrypt(
                new FormsAuthenticationTicket(
                1,
                authResponse.UserName,
                DateTime.Now,
                DateTime.Now.AddMinutes(FormsAuthentication.Timeout.Minutes),
                false,
                ""
            )
        );
        Response.Cookies.Add(
            new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket)
        );
    }

    //Do a redirect or something
    return Redirect(GetRedirectUrl);
} 
```

# security - 在不同的公司有不同的角色 symfony 2.0

> ID：15740209
> 
> 赞同：0
> 
> 时间：2013-04-01T08:38:44.433
> 
> 标签：security, symfony, roles, fosuserbundle

我正在尝试开发一个包含不同类型公司的应用程序，每个公司将扮演不同的角色。

这样，当超级管理员创建公司时，将定义哪些角色可以附加到这种公司。

例如，超级管理员可以创建一个购物中心，其中可以有一个店员和一个主管（每个人都有不同的权限）；还有另一种公司，可以是咖啡店，可以有服务员和厨师。然后，当一个用户登录到应用程序中，并且想要创建一个新用户时，只有选择他的公司角色的可能性。

但是我看不到开发方式，使用security.yml文件和FOSUserBUndle。

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-01T08:56:07.780

出于这种目的，我认为您需要在控制器中实现您的安全逻辑；使用 security.yml 您可以限制整个区域，但我认为这对您的情况没有帮助。也许您可以先定义一些只能由某些角色访问的路由（例如，“/waiter/*”代表服务员）

然后你可以像一种新的角色一样实现；每个公司都可以有一个字段“possible_roles”，它将是一个角色数组。例如，如果超级管理员创建了一家咖啡店，那么您将拥有`possible_roles = { "ROLE_WAITER", "ROLE_CHEF" }`

之后，您只需检查用户的角色是否在公司角色的数组中，以及他是否有权访问该页面。

清楚吗 ？

# testing - 测试巨大的伪随机序列

> ID：15740222
> 
> 赞同：0
> 
> 时间：2013-04-01T08:39:58.407
> 
> 标签：testing, random, prng

我需要测试两个伪随机序列：

*   在 1 个核心处理器上生成；
*   在 8 核处理器上生成。

对于测试，我将使用 Diehard 测试套件。
我遇到了以下问题。我需要测试整个序列，超过 2^32 位，在文件中超过 4Gb，我认为对于 8 核处理器来说会更多。
Diehard 文档说：
`You must provide the binary file that DIEHARD expects---a file of 10 to 11 megabytes...`
Diehard 测试套件中的随机生成器还生成具有随机序列的 ~11Mb 文件。
所以问题是我如何用序列测试我的大文件？它应该以哪种格式编写？现在我只是写数字，用空格分隔它们，如下所示：
`145 458 63 2 0 1489 ...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T13:26:06.233

我找到了解决方案。对于如此大量的数据，最好使用 Dieharder 测试套件。

# java - Java 日期格式

> ID：15740226
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:40:14.030
> 
> 标签：java, string, date, format, db4o

我在 java 中格式化日期时遇到问题。我有一个购物类，其中包含字符串中的项目名称、int 中的数量和 Date 中的日期。
在运行类中，我试图运行这个查询。

```
Date  date = new Date(202020);
SimpleDateFormat  dateformat = new SimpleDateFormat("dd-mm-yy");
String date1 = dateformat.format(date);

Shopping shoplist1 = new Shopping ( "iphone",  2, date); 
```

当我尝试使用日期不格式化的日期创建新的购物项目时。我不知道为什么，但它给了我 Thu Jan 01 01:03:22 GMT 1970。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T08:43:51.687

您使用了错误的[`Date`类构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28long%29)：

```
Date  date = new Date(202020); 
```

意味着您正在尝试分配一个 Date 对象并将其初始化以表示自称为“纪元”的标准基准时间（即 1970 年 1 月 1 日 00:00:00 GMT）以来的指定毫秒数。

你应该使用这样的东西：

```
Shopping shoplist1 = new Shopping ("iphone",  2, 
        new SimpleDateFormat("dd-MM-yy").parse("20-20-20")); 
```

[`DateFormat#parse(...)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#parse%28java.lang.String%29)阅读文档以了解和之间的更多区别[`DateFormat#format(...)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#format%28java.util.Date%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:42:38.417

更改`SimpleDateFormat dateformat = new SimpleDateFormat("dd-mm-yy");`为`SimpleDateFormat dateformat = new SimpleDateFormat("dd-MM-yyyy");`

如果我清楚地记得小`mm`平均分钟而不是一个月

[阅读有关日期格式的这篇文章](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

正如@zvzdhk 所说，您错误地使用了日期构造函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T08:51:44.113

根据您的评论：

“我试图添加日期 1，但它不允许它。它说字符串不能转换为日期”

您正在将字符串传递给构造函数，但看起来它可以采用 java.util.Date 对象

```
Shopping shoplist1 = new Shopping ( "iphone",  2, date); 
```

更改构造函数签名以获取 String 对象

或者

传递日期对象并在任何其他相关位置执行格式化

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:44:40.733

*   您从时间戳（从 1970 年开始的毫秒数）创建日期实例。我想这不是你想要做的。
*   您将日期格式化为字符串并传递日期。如果要使用格式化日期，则必须传递字符串。

# c++ - 泛型类型的 gcnew 运算符

> ID：15740228
> 
> 赞同：0
> 
> 时间：2013-04-01T08:40:29.173
> 
> 标签：c++, c++-cli

我有以下简单的课程

```
generic<typename T> where T:IDbConnection ref class CDbConnection
{
private:    
    IDbConnection^m_db;

    ConnectionState^ m_originalConnState;
public:
    CDbConnection();
    bool Connect(String ^ connStr);
    bool Exists(int id);
    auto GetAllData(String^ tableStr);
    ~CDbConnection();   
    !CDbConnection();
}; 
```

这是我的构造函数

```
generic<typename T> CDbConnection<T>::CDbConnection()
{
    m_db=gcnew T();
    m_originalConnState=m_db->State;
} 
```

但是编译器抱怨 <1> gcnew T() can't be used for generic type <2> `auto`key in use is wrong as the function`expects a trailing return type`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:55:38.800

感谢您的阅读和回复

我忘记了，这 `where T:IDbConnection, gcnew()` 与 C# 泛型完全相同

摆脱上述`gcnew`错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:03:11.583

为了实现通用性，您必须将类定义更改为

```
generic<typename T> where T:IDbConnection ref class CDbConnection
{
private:    

    T m_db;
    ConnectionState^ m_originalConnState;

public:

    CDbConnection();
    bool Connect(String ^ connStr);
    bool Exists(int id);
    auto GetAllData(String^ tableStr);
    ~CDbConnection();   
    !CDbConnection();
}; 
```

因为你已经在限制你`T`至少`IDbConnection`它不能是其他任何东西。然后你的构造函数

```
generic<typename T> CDbConnection<T>::CDbConnection()
{
    m_originalConnState=m_db.State;
} 
```

应该像您预期的那样工作。

编辑

看来您不能声明对泛型的引用。如果您将对象分配给堆栈，它将起作用。请参阅[此条](http://msdn.microsoft.com/en-us/library/yf16h0a6.aspx)目。

```
// C3229.cpp
// compile with: /clr /c
generic <class T>
ref class C {
   T^ t;   // C3229
};

// OK
generic <class T>
ref class D {
   T u;
}; 
```

# c# - 如何获取运行时控件 ID

> ID：15740230
> 
> 赞同：0
> 
> 时间：2013-04-01T08:40:51.260
> 
> 标签：c#, asp.net

使用 asp.net 和 c#

ASP.NET 代码

```
<asp:Button ID="btnAddNew" runat="server" Text="Add New" 
        onclick="btnAddNew_Click" />
    <div id="divAdd" runat="server" style="display:none" >  
    <table width="100%">
        <tr>
            <td colspan="1">First Name :</td>
            <td colspan="1" align="left"><asp:TextBox ID="txtFName" runat="server" ></asp:TextBox> </td>
        </tr>
        <tr>
            <td colspan="1">Last Name :</td>
            <td colspan="1" align="left"><asp:TextBox ID="txtLName" runat="server" ></asp:TextBox>  </td>
        </tr>
        <tr>
            <td colspan="1">Date Of Birth :</td>
            <td colspan="1" align="left"><asp:TextBox ID="txtDob" runat="server" ></asp:TextBox>  </td>
        </tr>
        <tr>
            <td colspan="1">Age :</td>
            <td colspan="1" align="left" ><asp:TextBox ID="txtAge" runat="server" ></asp:TextBox> </td>
        </tr>
        <tr>

            <td colspan="2" align="center">
                <asp:Button ID="btnSave" runat="server" Text="Save"  OnClientClick=" return validate()" type="submit"   />

                <asp:Button ID="btnClose" runat="server" Text="Close" OnClientClick ="return clear()" type="submit" />
            </td>
        </tr>
    </table>
    </div> 
```

C# 代码

```
static void Insert()
    {
        try
        {
            string connectionString =
                "server=JEBW1011ZAHID;" +        
                "initial catalog=employee;" + 
                "integrated security = true";             
            using (SqlConnection conn =
                new SqlConnection(connectionString))
            {
                conn.Open();
                using (SqlCommand cmd = new SqlCommand(
                    "INSERT INTO [NyhedTB] ([NyhedDato], [NyhedTitel], [NyhedTekst]) " +
                    "VALUES (@NyhedDato, @NyhedTitel, @NyhedTekst)", conn))
                {
                    cmd.Parameters.AddWithValue("@NyhedDato", txtfname.Text);
                    cmd.Parameters.AddWithValue("@NyhedTitel", txtlanme.Text);
                    cmd.Parameters.AddWithValue("@NyhedTekst", txtage.Text);

                    int rows = cmd.ExecuteNonQuery();  // Inserted rows number
                }
            }
        }
        catch (SqlException ex)
        {
            //Log exception
            //Display Error message
        }

    } 
```

显示错误为 txtfname 不存在。

需要代码帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T08:42:18.530

你`Insert`的方法是静态的。它无权访问任何页面元素。我建议您将这些值作为参数传递给方法，而不是将其与您的 UI 耦合：

```
static void Insert(string fName, string lName, string age)
{
    try
    {
        string connectionString =
            "server=JEBW1011ZAHID;" +        
            "initial catalog=employee;" + 
            "integrated security = true";             
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(
                "INSERT INTO [NyhedTB] ([NyhedDato], [NyhedTitel], [NyhedTekst]) " +
                "VALUES (@NyhedDato, @NyhedTitel, @NyhedTekst)", conn))
            {
                cmd.Parameters.AddWithValue("@NyhedDato", fName);
                cmd.Parameters.AddWithValue("@NyhedTitel", lName);
                cmd.Parameters.AddWithValue("@NyhedTekst", age);

                int rows = cmd.ExecuteNonQuery();  // Inserted rows number
            }
        }
    }
    catch (SqlException ex)
    {
        //Log exception
        //Display Error message
    }
} 
```

然后当从你后面的代码调用这个方法时，你可以传递你想要的任何值：

```
protected void SomeButton_Click(object sender, EventArgs e)
{
    Insert(txtfname.Text, txtlanme.Text, txtage.Text);
} 
```

现在，您的`Insert`方法更可重用，因为它不再与您的 UI 耦合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:51:08.317

`static` 在您的方法中删除

放置此代码`public void Insert()`而不是 static void Insert()

# javascript - Javascript：将变量传递给函数会导致未定义

> ID：15740232
> 
> 赞同：2
> 
> 时间：2013-04-01T08:41:00.177
> 
> 标签：javascript

这是我的第一个 javascript 项目，我无法将变量传递给函数。

这是我的“全局变量”中的相关部分

```
var timesran = [];
for (var x= 0; x<38; x++){
timesran[x] = 0;
} 
```

下面是第一个尝试将 x 传递给函数的函数，以便我可以将结果存储在不同的数组中

```
function happytimes(){
for (var x= 0; x < 38; x++){
    switch (x){
        case 0:
            if (shouldiFlip[x]){
                randomizer(x);  //input that we want to feed into the function
                x++;
            }
} 
```

（请注意：为了清楚起见，我已经从摘录中删除了 case1-38 的其余部分，所有其他情况看起来都一样，并且具有相同的输出 - 尽管随机函数在随机函数的每个不同函数中工作，但随机函数正在获得新的输出）

以下是随机函数

```
function randomizer(a){
if (startrunning){ 
    var rando = [];
    rando = Math.floor(Math.random()*4+1);
    timestorun[a] = rando[a];
    pos[a] = 0;
    console.log("hi there you are in new run now"+pos[a]+rando+timestorun[a]);
}
else{
pos[a] = pos[a] + 1;
        if (pos[a] >156){
            pos[a] = 0;
        }
    if (masterlet[pos[a]] == letter[a]){
        timesran[a] = timesran[a] +1;
            if (timesran[a] == timestorun[a]){
                console.log("ELSE THING"+pos[a]+rando+timestorun[a]);
                shouldiFlip[a] = 0;
            }
    }   
} 
```

这里第一个控制台日志的输出是

```
hi there you are in new run now03undefined jquery.solari.letters.js:386 
```

如您所见，timesran[] 未定义返回。这让我很难过。

我处理得对吗？我已经为此工作了大约 7 个小时来完善代码，这是我最后一次挂断。感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:49:39.270

这不起作用，因为您将 rando 数组设置为 Math.floor(Math.random()*4+1); 的变量 你应该更新它 rando[a] = Math.floor(Math.random()*4+1);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:47:30.727

您正在将变量*rando*创建为一个数组，然后用一个数字覆盖它 - 随机提取的结果 - 同时丢弃旧的数组值，然后像数组一样索引它。最好的方法是简单地设置：

```
timestorun[a] = rando; 
```

代替

```
timestorun[a] = rando[a]; 
```

并将变量直接分配给数字 - 而不是：

```
var rando = [];
rando = Math.floor(Math.random()*4+1); 
```

仅使用

```
var rando = Math.floor(Math.random()*4+1); 
```

# javascript - Javascript不想工作？

> ID：15740233
> 
> 赞同：0
> 
> 时间：2013-04-01T08:41:00.893
> 
> 标签：javascript, jquery, slideshow

出于某种奇怪的原因，这个图像滑块不想工作，谁能指出我有一种感觉的问题，包括 javascript 也不想工作，所以我选择了：

```
<link rel="stylesheet" type="text/css" href="includes/css/slider.css"></link>
<link rel="javascript" type="text/javascript" href="includes/js/slider.js"></link>
<link type="text/javascript" src="includes/js/jquery-1.5.2.min.js"></link> 
```

或者这是正确的方式，无论哪种方式似乎都不起作用？

```
<link rel="stylesheet" type="text/css" href="includes/css/slider.css"></link>
<script rel="javascript" type="text/javascript" href="includes/js/slider.js"></script>
<script type="text/javascript" src="includes/js/jquery-1.5.2.min.js"></script> 
```

* * *

编辑完整代码：

```
<div class="mask">
<ul class="imgHolder">
   <li>
      <img width="270" src="http://upload.wikimedia.org/wikipedia/commons/thumb/9/97/The_Earth_seen_from_Apollo_17.jpg/270px-The_Earth_seen_from_Apollo_17.jpg" />
   </li>
   <li>
      <img width="270" src="http://www.mallorcaweb.net/masm/Planetas/Jupiter.jpg" />
   </li>
    <li>
      <img width="270" src="http://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/FullMoon2010.jpg/280px-FullMoon2010.jpg" />
   </li>
   <li>
      <img width="270" src="http://static.ddmcdn.com/gif/sun-update-1.jpg" />
   </li>
   <li>
      <img width="270" src="http://upload.wikimedia.org/wikipedia/commons/thumb/0/06/Neptune.jpg/240px-Neptune.jpg" />
   </li>
</ul>
</div>
<ul class="thumbHolder">
   <li></li>
   <li></li>
   <li></li>
   <li></li>
   <li></li>
</ul>
<span class="control Bleft">Prev</span>
<span class="control Bright">Right</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:50:41.193

试试这个：

```
<link rel="stylesheet" type="text/css" href="/includes/css/slider.css"></link>
<script type="text/javascript" src="/includes/js/jquery-1.5.2.min.js"></script>
<script type="text/javascript" src="/includes/js/slider.js"></script> 
```

请注意，我已经删除了`rel`标记，并且在每个路径的开头添加了前导斜杠，以便它始终从根加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:42:10.533

确保在所有依赖脚本之前包含 jQuery 脚本，即所有使用 jQuery 的脚本。

--

此外，链接标签是自关闭的，脚本标签用于 js 文件而不是链接标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:43:26.170

`Link`标签用于在页面内指向和添加`css`文件，其中 as`script`标签用于将`client side`脚本添加到代码示例`vbscript`等中`javascript`。

**在其他`jQuery`任何`jQuery plugin`**依赖的`jQuery`.

**例子**

```
<link rel="stylesheet" type="text/css" href="includes/css/slider.css" />
<script type="text/javascript" src="includes/js/jquery-1.5.2.min.js"></script>
<script rel="javascript" type="text/javascript" href="includes/js/slider.js"></script> 
```

# python - python中的标准输出编码

> ID：15740236
> 
> 赞同：14
> 
> 时间：2013-04-01T08:41:13.370
> 
> 标签：python, unicode, character-encoding

为什么我不应该用这个来启动我的**所有**python 程序，有充分的理由吗？像这样执行 exec 时有什么特别的丢失吗？

```
#!/usr/bin/python
import os, sys
if sys.stdout.encoding == None:
    os.putenv("PYTHONIOENCODING",'UTF-8')
    os.execv(sys.executable,['python']+sys.argv)
print sys.stdout.encoding 
```

[关于 PYTHONIOENCODING](https://stackoverflow.com/search?q=PYTHONIOENCODING)有60 个问题，所以我想这是一个常见问题，但如果你不知道，这样做是因为`sys.stdout.encoding == None`那时你只能打印 ascii 字符，所以 eg`print "åäö"`会抛出异常..

**编辑**当 stdout 是管道时，这发生在我身上；`python encoding.py|cat`将编码设置为无

另一个解决方案是更改[标准输出的编解码器，](https://stackoverflow.com/questions/492483/setting-the-correct-encoding-when-piping-stdout-in-python?rq=1#1169209) `sys.stdout = codecs.getwriter('utf8')(sys.stdout)`我猜这是正确的答案，尽管对该问题的评论。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T09:15:05.737

是的，有一个很好的理由不这样启动所有的 Python 程序。

首先：

`sys.stdout.encoding`如果 Python 不知道标准输出支持什么编码，则为 None。在大多数情况下，这是因为它根本不支持任何编码。在您的情况下，这是因为标准输出是一个文件，而不是终端。但它可以设置为 None 因为 Python 也无法检测到终端的编码。

其次：您设置环境变量，然后再次使用 smae 命令启动一个新进程。那是相当丑陋的。

因此，除非您打算成为唯一使用您的程序的人，否则您不应该那样启动它们。但是，如果您*确实*打算成为唯一使用您的程序的人，那么请继续。

**更深入的解释**

Python 2 下一个更好的通用解决方案是将 stdout 视为它的本来面目：一个 8 位接口。这意味着您打印到标准输出的任何内容都应该是 8 位的。当您尝试打印 Unicode 数据时会出现错误，因为 print 会尝试将 Unicode 数据编码为 stdout 的编码，如果它是 None 它将假定 ASCII 并失败，除非您设置 PYTHONIOENCODING。

但是通过打印编码数据，你就没有这个问题了。即使输出通过管道传输，以下内容也能完美运行：

```
print u'ÅÄÖ'.encode('UTF8') 
```

（不过在 Python 3 下会失败，因为在 Python 3 下，stdout 不再是 8 位 IO，你应该给它 Unicode 数据，它会自己编码。如果你给它二进制数据，它会打印表示。因此，在 Python 3 上，你一开始就没有这个问题）。

# firebase - 有没有办法在 firebase URL 上获取数据的大小？

> ID：15740237
> 
> 赞同：1
> 
> 时间：2013-04-01T08:41:27.310
> 
> 标签：firebase

如何获取存储在 Firebase URL 中的数据大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:12:19.557

我将假设您的意思是存储在 URL 中的数据的大小。

我们目前没有 API 来仅返回存储在某个位置的数据大小。如果您查看 Forge 中的“分析”选项卡，我们会提供您在 Firebase 中数据的总大小。但是，如果您想要特定 URL 的大小，则需要下载数据并自己测量（暂时）。

# mysql - 无法远程连接mysql服务器

> ID：15740241
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:41:35.403
> 
> 标签：mysql, remote-access

我无法远程连接到 Mysql 服务器，从任何主机授予用户访问权限并且 mysql 服务器正在运行。我可以使用 127.0.0.1 进行本地访问，但是当我尝试使用机器的 IP 进行连接时，出现错误“无法连接到 '192.168.1.102 (10060)' 上的 MySQL 服务器”。我搜索了很多无法解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:49:30.920

你应该检查以下步骤

MySQL 正在侦听公共 IP（听起来像您已经完成了） MySQL 正在侦听标准端口/您正在连接它正在侦听的同一端口。远程机器上是否运行防火墙？（它们通常是发行版中的打包标准）防火墙是否配置为允许连接到该端口？如果远程机器在另一个网络中，您的连接和终端机器之间是否正在进行网络地址转换（NAT） - 如果是，它是否配置为允许 MySQL 端口通过。是否将 my.cnf 文件配置为允许来自 localhost 127.0.0.1 IP 以外的任何其他 IP 的连接 - 尽管您更有可能收到拒绝访问响应，而不是无法连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:44:28.997

请检查您的mysql配置文件，禁用

> 绑定地址 = 127.0.0.1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:49:59.600

首先ping服务器IP，如果回复你可以试试这个：重新配置mysql服务器实例，允许从远程机器连接

# r - R 2.15 中的覆盖方法

> ID：15740248
> 
> 赞同：5
> 
> 时间：2013-04-01T08:42:11.620
> 
> 标签：r, methods, s4

我想知道是否有任何方法可以覆盖 R 包中的任何运算符方法。

包中的源示例：

```
setclass("clsTest",  representation(a="numeric", b="numeric"))
setMethod("+",  signature(x1 = "numeric", x2 = "clsTest"),
      definition=function(x1, x2) {
      Test = x2
      Test@a = Test@a+x1
      Test@b = Test@b+x1
      Test

      }) 
```

我想覆盖现有包中的方法，使用

```
setMethod("+",  signature(x1 = "numeric", x2 = "clsTest"),
          definition=function(x1, x2) {
          Test = x2
          Test@a = Test@a+(2*x1)
          Test@b = Test@b+(2*x1)
          Test

          }) 
```

我正在使用 R 2.15.2，有什么方法可以覆盖它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-08T09:39:47.083

您的代码非常接近正确，但是 to 的参数`+`被称为`e1`and `e2`，而不是`x1`and `x2`。使用 S4，您无法在编写方法时重命名它们。

如果你想知道你应该如何知道它们被称为什么，你可以使用`args("+")`来检查。

正确的代码是

```
setClass("clsTest",  representation(a="numeric", b="numeric")) -> clsTest
setMethod("+",  signature(e1 = "numeric", e2 = "clsTest"),
  definition=function(e1, e2) {
    Test = e2
    Test@a = Test@a+e1
    Test@b = Test@b+e1
    Test
  }
) 
```

# jakarta-ee - 如何使用 Enterprise App 从 My Web APP 访问本地到 EJB 模块

> ID：15740250
> 
> 赞同：0
> 
> 时间：2013-04-01T08:42:12.300
> 
> 标签：jakarta-ee, ejb

我有 JSF 托管 bean（它的名称 =indexbean1），它的代码如下：

```
 package ir.ac.imamreza.Client;

 import ir.ac.imamreza.common.ProductServiceLocal;
 import javax.ejb.EJB;
 import javax.inject.Named;
 import javax.enterprise.context.RequestScoped;
 import javax.naming.InitialContext;

 /**
 *
 * @author Avarcom
 */
 @Named(value = "indexbean1")
 @RequestScoped
 public class Indexbean1 {
 private String name;
 private int price;
 private int count;
 private String desc;

    public int getCount() {
        return count;
    }

    public String getDesc() {
        return desc;
    }

    public String getName() {
        return name;
    }

    public int getPrice() {
        return price;
    }

    public void setCount(int count) {
        this.count = count;
    }

    public void setDesc(String desc) {
        this.desc = desc;
    }

    public void setName(String name) {
        this.name = name;
    }

    public void setPrice(int price) {
        this.price = price;
    }

    @EJB
    private  ProductServiceLocal ProductService1;
    public void  Add()         
    {
        ProductService1.Add(name,price, count, desc);
    }

    public Indexbean1() {
    }
 } 
```

我的商店模块中有一个类，它具有类“ProductServiceLocal”的本地接口，如下所示：

```
package ir.ac.imamreza.common;

 import java.util.List;
 import javax.ejb.Local;

 /**
 *
 * @author One God
 */
 @Local
 public interface ProductServiceLocal {

    List<Product> getallproduct();
    public int BuyProduct(long id,long number);
    public void Add(String name, int price,int count,String desc);

 }
  /////////////////////////// 
```

这就是在我的 EJB 中实现我的 Add 方法的我的 EJB 模块

```
 ////////////////////

 package ir.ac.imamreza.Shop;
 import ir.ac.imamreza.common.Product;
 import ir.ac.imamreza.common.ProductServiceRemote;
 import java.math.BigDecimal;
 import java.sql.ResultSet;
 import java.util.ArrayList;
 import java.util.Arrays;
 import java.util.List;
 import javax.ejb.Stateless;
 import java.sql.*; 

@Stateless(mappedName="ir.ac.imamreza.Shop.ProductService")
 public class ProductService implements ProductServiceLocal,ProductServiceRemote { 

    @Override
    public int BuyProduct(long id,long number)
    {
        int result;
         dataaccess da=new dataaccess();
         result=da.exec("update tbl_product set count=count-"+number+" where id='"+id+"'");
          da.Close();
         return result;
    }
     public void Add(String name, int price,int count,String desc)
      {
          dataaccess da=new dataaccess();
           da.exec("INSERT INTO tbl_product (name,count,price,Description) VALUES      
   ("+name+","+price+","+count+","+desc+")");
          da.Close();
      }

 } 
```

我添加了我的 EJB 和我的 WEB 应用程序以访问我的本地方法（添加），但是当我不想部署我的应用程序时，我遇到了以下错误：

```
SEVERE: Exception while deploying the app [WebClient] : Cannot resolve reference Local ejb-ref name=ir.ac.imamreza.Client.Indexbean1/ProductService1,Local 3.x interface =ir.ac.imamreza.common.ProductServiceLocal,ejb-link=null,lookup=,mappedName=,jndi-name=,refType=Session
.. 
```

我认为我的 Web APP 无法连接到我的 EJB，对于这个问题，我在一个企业 APP 中添加了 Web APP 和 EJAB，但我又遇到了这些错误，请帮助我，谢谢

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T00:21:04.943

错误非常明显。在您的 JSF 中，您正在尝试不存在的基于字段的 EJB 注入。

现在，这是基于字段的注入的规则：

> 对于基于字段的资源注入，JNDI 名称被解析为（包 + 类名）/（EJB 注入变量名），它会尝试在您的本地应用程序（war，ear..）中找到它。因此，在这种情况下，它被解析为 (ir.ac.imamreza.Client).(Indexbean1)/ProductService1 ，它在您的耳朵或战争中不存在。

问候拉维

# php - 在网站正文上按 CTRL+V 时如何加载 php 文件

> ID：15740251
> 
> 赞同：3
> 
> 时间：2013-04-01T08:42:14.970
> 
> 标签：php, javascript, jquery, forms

我创建了一个代码，其中 id 喜欢具有用户必须按 CTRL+V 的功能，然后当它按下时，它将加载该值。这是我的代码。请帮我。

我的代码一开始不起作用，但需要按两次 CTRL+V 才能在输入中显示输入的值。

请帮我。谢谢！

```
<?php
if($_GET["f"]==1){
echo $_GET["id_number"];
}
else{
?>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function () {
var isCtrl = false;
$(document).keyup(function (e) {
 if(e.which == 17) isCtrl=false;
}).keydown(function (e) {
if(e.which == 17) isCtrl=true;
if(e.which == 86 && isCtrl == true) {
    document.getElementById('id_number').focus();
    document.getElementById('Button').click();
 }
});
});
</script>

<script type="text/javascript">
$(document).ready(function() {
$("#Button").click(function(){   
var id_number = document.getElementById('id_number');
$("#Content").html('<img src="http://tinyurl.com/7al6hv5">').load('1.php?f=1&id_number='+id_number.value+'');
});
});
</script>

<input type="text" onkeydown="this.select();" value="" id="id_number">
<input type="submit" value="Load" id="Button">
<div id="Content"></div>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:52:39.387

可能一开始元素还没有准备好，所以你可以试试

```
$(document).live('keyup',function (e) {
 if(e.which == 17) isCtrl=false;
}).live('keydown',function (e) {
if(e.which == 17) isCtrl=true;
if(e.which == 86 && isCtrl == true) {
    document.getElementById('id_number').focus();
    document.getElementById('Button').click();
 }
});
});

//edit

$("#Button").live('click',function(){   ... 
```

# java - 将复杂组件接口转换为标准 Web 服务 [Java]

> ID：15740256
> 
> 赞同：0
> 
> 时间：2013-04-01T08:42:38.360
> 
> 标签：java, web-services, soap, wsdl, soa

我的组件具有复杂的接口与接受非原始数据或简单 POJO 的操作。

将此组件接口转换为可供 java 和非 java 客户端使用的标准 Web 服务接口的最佳实践（方式/方法）是什么，以便服务使用者可以使用 WSDL 毫无问题地生成类。

可以按原样使用吗？如果没有，有没有办法在不影响操作行为的情况下最小化改变它？

组件接口有如下操作：

```
/** This is asynchronous method that needs to callback the ResultHandler
    interface which has to be implemented by the component user to handle
    operationOne result **/
public void operationOne(int id, ResultHandler handler);

/** I think there is no problem with the following operation for Web Services,
    when using data contracts. Correct me if I’m wrong! **/
public String operationTwo(int id, MyObject obj); 
```

ResultHandler 接口：

```
/** Note that this handler interface contains InputStream
    and Exception as parameters for the handling methods **/ 
interface ResultHandler {
    void onComplete(InputStream is); 
    void onFailure(IOException ioEx); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:50:24.040

您需要创建一个可以使用提供的参数调用组件并返回完整响应的方法。为了获得最佳结果，该方法不应有副作用。

然后向其中添加@WebService 和@WebMethod 注释，并使用 Endpoint.publish(...) 创建一个小的独立应用程序来发布该 Web 服务。Java 6 中的 JAX-WS 堆栈可以由此自动生成 WSDL。

有关执行此操作的完整教程，请参阅[http://java.dzone.com/articles/jax-ws-hello-world](http://java.dzone.com/articles/jax-ws-hello-world)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T13:39:17.427

您可以在 webmethods 中使用您的对象，因为它们被转换为复杂的 WSDL 类型，但请记住，这只能在一定程度上完成。您应该使用简单的 POJO 来传输数据结构，以便您从 WSDL/代码生成中受益，而不是使用您将用于执行业务职责的复杂类型。还有一个建议，应该是 REST/JSON over SOAP Web 服务。

**更新：**

有效测试 Web 服务的唯一方法是为 Web 服务上的每个调用创建一个 moke。

[Moq - 如何模拟 Web 服务调用？](https://stackoverflow.com/questions/12204291/moq-how-to-mock-web-service-call)

# java - 耳朵启动后的调用方法

> ID：15740259
> 
> 赞同：0
> 
> 时间：2013-04-01T08:42:56.847
> 
> 标签：java, ejb, websphere, ear

我需要运行 ejb 组件并`method`尽早调用启动后应用程序。有谁知道最好的解决方案，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:46:08.987

我假设它是一个 EJB 应用程序，在这种情况下，您可以使用[单例会话 bean](http://docs.oracle.com/javaee/6/tutorial/doc/gipvi.html)，它可以用于以可移植、独立于供应商的方式进行应用程序初始化。

如果它是一个 Web 应用程序，那么你需要使用[ServletContextListener](http://docs.oracle.com/javaee/5/api/javax/servlet/ServletContextListener.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:50:32.757

如果您使用的是 EJB 3.1，则可以使用`@Singleton`和`@Startup`，如[本博客条目](https://blogs.oracle.com/kensaks/entry/application_startup_shutdown_callbacks)中所述。

如果您使用的是旧版本的规范，实现此目的的常用方法是注册 a`ServletContextListener`来执行您想要的初始化。这显然需要在你耳边制造一场战争，如果你还没有的话。

# jquery-ui - 如何管理空的 jQuery 手风琴面板？如何禁用点击 Accordion Header？

> ID：15740261
> 
> 赞同：3
> 
> 时间：2013-04-01T08:43:02.520
> 
> 标签：jquery-ui, jquery-ui-accordion

我正在使用 Accordionn jQuery Controls，您可以在下面找到 URL：

手风琴：http: [//jqueryui.com/accordion/](http://jqueryui.com/accordion/)

问题：我们如何管理不可点击的空菜单；示例 - 如果我在“第 2 节”菜单上没有任何项目，则它不应该是可点击的。当我这样做时，它要么使下一个父菜单项成为上一个父菜单项的子项并扭曲，或者如果我只留下`<div>` 一个空菜单，它会打开一个空白菜单而不是不可点击。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T08:54:37.083

您可以尝试使用[http://api.jqueryui.com/accordion/#event-beforeActivate](http://api.jqueryui.com/accordion/#event-beforeActivate)

```
$( ".selector" ).on( "accordionbeforeactivate", function( event, ui ) {} ); 
```

在功能中，您可以测试`ui.newPanel`，如果为空，则取消该面板的激活。

我创建了 jsfiddle 示例：http: [//jsfiddle.net/npthU/1/](http://jsfiddle.net/npthU/1/)

```
 $( "#accordion" ).on( "accordionbeforeactivate", function( event, ui ) {

       if($.trim($( ui.newPanel ).html()).length == 0)
          event.preventDefault();

    }); 
```

用于`event.preventDefault();`禁止打开具有空 div 的特定面板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T23:47:08.433

这是此代码的更新：

```
$('#'+_id).on( "accordionbeforeactivate", function( event, ui ) {
        if((($.trim($(ui.newPanel).html()).length == 0)&&($(ui.oldHeader).length==0))||(($.trim($(ui.newPanel).html()).length == 0)&&($(ui.newHeader).length))){event.preventDefault();}); 
```

现在它可以折叠/展开

# asp.net - 升级 Telerik Asp.net 应用程序仍然找到以前的 dll

> ID：15740276
> 
> 赞同：0
> 
> 时间：2013-04-01T08:44:18.260
> 
> 标签：asp.net, reference, telerik, iis-6

我面临一个问题。我正在使用 Telerik asp.Net Ajax 的 Rad Control，我已将我的 Web 应用程序从版本 2012.2.912.40 更新到版本 2013.1.220.40。它在本地工作正常，但是当我更新服务器时，它给了我这个错误。

“无法加载文件或程序集 'Telerik.Web.UI, Version=2012.2.912.40, Culture=neutral, PublicKeyToken=121fae78165ba3d4' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（来自 HRESULT 的异常: 0x80131040)"

我不知道为什么它仍然指向以前的版本。

这是 web.Config 处理程序

```
<httpHandlers>
      <remove path="*.asmx" verb="*" />
      <add type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" path="*.asmx" verb="*" validate="false" />
      <add type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" path="*_AppService.axd" verb="*" validate="false" />
      <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false" />
      <add type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" path="ScriptResource.axd" verb="GET,HEAD" validate="false" />
      <add path="ChartImage.axd" type="Telerik.Web.UI.ChartHttpHandler" verb="*" validate="false" />
      <add path="Telerik.Web.UI.SpellCheckHandler.axd" type="Telerik.Web.UI.SpellCheckHandler" verb="*" validate="false" />
      <add path="Telerik.Web.UI.DialogHandler.aspx" type="Telerik.Web.UI.DialogHandler" verb="*" validate="false" />
      <add path="Telerik.RadUploadProgressHandler.ashx" type="Telerik.Web.UI.RadUploadProgressHandler" verb="*" validate="false" />
    </httpHandlers> 
```

请帮帮我。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:08:43.483

你是怎么更新服务器的？您将需要部署更新的 Web 项目 DLL 文件和新 Telerik.Web.UI.dll 以及 Telerik.Web.UI.Skins.dll 的副本

# c# - 将嵌套集合的序列化限制为仅在具有实体框架 4 的 C# API MVC 4 中显示 ID

> ID：15740278
> 
> 赞同：1
> 
> 时间：2013-04-01T08:44:24.387
> 
> 标签：c#, .net, json, asp.net-mvc-4, entity-framework-4

我正在使用 C# 的 MVC 4 API 和 Entity Framework 4 以及自动生成的模型和控制器。我有一个正在序列化为 JSON 的父子关系。我的关系被序列化得很好，但我只想显示嵌套子项的 id 而不是整个对象。

这是我目前得到的 JSON 响应。

```
[{
    "ID": 1,
    "NAME": "PARENT1",
    "CHILDREN": [{
        "ID": "1",
        "NAME": "CHILD1"
    },{
        "ID": "2",
        "NAME": "CHILD2"
    }]
}] 
```

这就是我想要得到的。

```
[{
    "ID": 1,
    "NAME": "PARENT1",
    "CHILDREN": [1,2]
}] 
```

这些是我正在使用的模型。

```
public partial class PARENT
{
    public PARENT()
    {
        this.CHILDREN = new List<CHILD>();
    }

    public int ID { get; set; }
    public string NAME { get; set; }
    public virtual ICollection<CHILD> CHILDREN { get; set; }
}

public partial class CHILD
{
    public CHILD(){}

    public int ID { get; set; }
    public string NAME { get; set; }
    public int PARENT_ID { get; set; }
} 
```

我的控制器方法。

```
// GET api/Parents
public IEnumerable<PARENT> GetPARENTs()
{
    return db.PARENTS.AsEnumerable();
} 
```

任何帮助将不胜感激，因为我不确定我应该寻找什么。我对 EF 和 .NET 的 MVC 还很陌生，这似乎应该很容易做到。

提前非常感谢大家。！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:03:17.220

我认为您只需要一个简单的 LINQ：

```
IList<PARENT> parents; // I assume you have a list of PARENT fetched from DB

var results = parents.Select(
      p => new 
      { 
          ID = p.ID, NAME = p.NAME, 
          CHILDS = p.CHILDREN.Select(a=>a.ID).ToList() 
      }).ToList();

return Json(results); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:12:31.863

更复杂的方法是使用您自己的使用自定义 xml 序列化的自定义[媒体格式化程序。](http://www.asp.net/web-api/overview/formats-and-model-binding/media-formatters)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:38:50.203

作为参考，这是我想出的另一种方法。你们中的大多数人不会赞成使用动态，但因为我想在多个关系中使用它，而不是每次都指定对象的类型，它就像一个魅力。

```
public class CollectionOfIds : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return true;
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        return null;
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        IList collection = (IList)value;
        List<int> ids = new List<int>();
        foreach (var item in collection)
        {
            dynamic itemCollection = (dynamic)item;
            ids.Add(itemCollection.ID);
        }
        serializer.Serialize(writer, ids);
    }
} 
```

在我只是这样装饰模型属性之后......

```
public partial class PARENT
{
    public PARENT()
    {
        this.CHILDREN = new List<CHILD>();
    }

    public int ID { get; set; }
    public string NAME { get; set; }
    [JsonConverter(typeof(CollectionOfIds))]
    public virtual ICollection<CHILD> CHILDREN { get; set; }
} 
```

# sql - 将多个值传递给 SQL Server 2012 中的单个参数

> ID：15740281
> 
> 赞同：0
> 
> 时间：2013-04-01T08:44:34.173
> 
> 标签：sql, sql-server, sql-server-2012

再次需要你的帮助。

想知道有没有办法在 SQL Server 2012 中将多个值传递给单个参数？

例如，

```
id     item_name  item_code
    1      boots       23
    2       hat        5
    3      dress       11 
```

假设在上面的情况下，我有参数`@inp_code`

怎么办，所以当我将'23'和'11'传递给参数时，我可以获得以下输出：

```
id      item_name   item_code
   1       boots        23
   3       dress        11 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:11:19.083

这是[MSDN 文档的链接](http://msdn.microsoft.com/en-us/library/bb510489%28v=SQL.100%29.aspx)

总体概念是这样的。

1.  您将创建一个新的表类型（在/Programmability/Types/User-Defined Table Types 下的 SSMS 中列出。这看起来像一个普通的 SQL 表，除了表头不同（CREATE TYPE AS TABLE 而不是 CREATE TABLE）
2.  创建表类型后，您可以在存储的表类型的过程中定义一个参数。
3.  在 SQL 脚本中，您定义表类型的变量，将其插入，并将其传递给存储过程。
4.  在您存储的过程中，您现在可以像访问表一样访问参数（这意味着它是一个行集，而不是单个值，因此请考虑基于集合，而不是单个值）

需要注意的一项 - 这些不直接通过 ADO.NET 支持。您需要创建一个脚本，将多个值插入表变量，将其传递给存储过程，并从您的编程语言中执行整个脚本。

# matlab - Matlab 表达式

> ID：15740284
> 
> 赞同：0
> 
> 时间：2013-04-01T08:44:40.257
> 
> 标签：matlab, expression

```
P0 = 1000

r = 0.08

t = 1:30

P = P0 exp(r*t) 
```

我收到一个错误 Unexpected MATLAB expression，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:46:42.240

你应该写：

```
P = P0*exp(r*t) 
```

# android - Textview没有显示任何东西

> ID：15740290
> 
> 赞同：0
> 
> 时间：2013-04-01T08:45:05.740
> 
> 标签：android, xml, string, textview

我的文本视图显示空白！即使我放了一个字符串，它也显示为空白..请告诉我该怎么做

```
protected void OnCreate (Bundle savedInstanceState ) throws ClientProtocolException, IOException, JSONException{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    TextView result = (TextView) findViewById(R.id.text1);
    result.setText("TESTING"); 
```

这是我的xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <TextView
        android:id="@+id/text1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:55:08.670

我用你的代码创建了一个程序，它在这里工作正常......

我刚刚删除了 4 行以下：

```
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:55:58.543

您可能需要检查 RelativeLayout 的填充属性。尝试注释掉所有填充属性并检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:01:54.377

尝试向 TextView 添加位置属性，例如将其设置为**alignParentTop="true"**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:34:07.040

删除填充物，然后检查。似乎没有任何其他因素阻止文本显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T09:41:22.377

只需更换它就完成了..

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            TextView result = (TextView) findViewById(R.id.text1);
            result.setText("TESTING");

        }

       <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:tools="http://schemas.android.com/tools"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:paddingBottom="@dimen/activity_vertical_margin"
       android:paddingLeft="@dimen/activity_horizontal_margin"
       android:paddingRight="@dimen/activity_horizontal_margin"
       android:paddingTop="@dimen/activity_vertical_margin"
       tools:context=".MainActivity" >

       <TextView
          android:id="@+id/text1"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="@string/hello_world" />

</RelativeLayout> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T10:33:03.857

更改文本颜色。

在 XML 中，

```
android:textColor="#FF0000" 
```

或者在Java中

```
myTextView.setTextColor(0xAARRGGBB); 
```

# android - 重新加载选项卡上的活动已更改

> ID：15740291
> 
> 赞同：0
> 
> 时间：2013-04-01T08:45:05.983
> 
> 标签：android, android-tabhost, android-tabs, android-tabactivity

我在选项卡主机中有此活动，当我更改为另一个选项卡时需要重新加载它，然后返回此活动，因为我的列表视图可以刷新新项目。谁能告诉我我该怎么做。

这是我最喜欢的活动：

```
protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.favorites);
        initialize();

    }

    private void initialize(){
        list=(ListView) findViewById(R.id.fav_listView1);
        back=(ImageView) findViewById(R.id.favorites_back_img);
        back.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                finish();               
            }
        });
        helper=new DatabaseHelper(this);
        helper.openDB();
        adapter=new AlbumLazyAdapter(this, helper.getAllFavorites(), this);
        list.setAdapter(adapter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        adapter.notifyDataSetChanged();
    }

    @Override
    protected void onResume() {
        // TODO Auto-generated method stub
        super.onResume();
        adapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:48:07.550

中调用`initialize()`方法`onResume()`。

# backbone.js - 渲染模型数组

> ID：15740292
> 
> 赞同：0
> 
> 时间：2013-04-01T08:45:08.753
> 
> 标签：backbone.js, rendering, fetch

嗨，我正在从服务器上的特定模式中搜索，并且我正在返回一个模型列表。

```
 {"0":{"id":"20","name":"The White Tiger ","author":"Arvind Adiga","status":"Read"},
  "1":{"id":"23","name":"Tiger and the Apes","author":"Benny Rice", "status":"Read"} } 
```

我最初试图通过

```
 var books = new Books()   //Books() is a collection name. 
       books.fetch({data: {name:'tiger'}}); 
```

但得到未定义的错误。

所以我试图获得一系列模型。

```
 var books = new Book() //Book is a model name
    books.fetch({data: {name:'tiger'}}); 
```

如上所述，我得到了一系列模型。

如何在下划线模板中呈现模型数组？这真的是一个非常糟糕的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:11:47.823

您的收集响应不正确，这就是 Backbone 无法正确解析它的原因。

如果您正在`fetch`收集一个集合，则它们应该采用以下格式：

`[ { .. }, { .. }, { .. } ... ]` *对象数组*

如果您正在`fetch`学习模型，那么他们应该：

`{ .. }` *单对象哈希*

因此，如果您修复了响应，那么它将自动加载到集合中，即

```
[ 
   {"id":"20","name":"The White Tiger ","author":"Arvind Adiga","status":"Read"},
   {"id":"23","name":"Tiger and the Apes","author":"Benny Rice", "status":"Read"} 
] 
```

# asp.net - 正在呈现的 asp.net 空白页面

> ID：15740294
> 
> 赞同：0
> 
> 时间：2013-04-01T08:45:17.067
> 
> 标签：asp.net, html

我对我的 aspx 页面进行了一些更改，现在它被呈现为空白。实际上它确实显示了包含其他所有内容的 div 标签。其他一切都是看不见的。有人可以指出导致问题的原因吗？继承人的HTML：

```
 <%@ Page StylesheetTheme="" Title="" Language="C#" MasterPageFile="~/Site.Master"
AutoEventWireup="true" CodeBehind="frmMyAccountMyProfile.aspx.cs" Inherits="WebApplication1.frmMyAccountMyProfile" %>

 <%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
 <asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<script type="text/javascript">

    function CheckType(type) {
        document.getElementById("hdnfld").value = type;
        alert(document.getElementById("hdnfld").value);
        return false;
    }

    function confirmAction() {
        if (confirm('Are you sure, you want to delete?')) {
            // allow the form to post the data.  
            return true;
        }
        else {
            // disallow the form submission.  
            return false;
        }
    } 

</script>
<link href="Styles/myStyleSheet.css" rel="stylesheet" type="text/css" />
</asp:Content>

 <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
<form action="">
<div class="divwrap">
    <table style="width: 100%; margin-right: 0px;">
        <tr>
            <td>
                &nbsp;
            </td>
            <td>
                &nbsp;
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        <tr>
            <td>
                &nbsp;
            </td>
            <td>
                <asp:TabContainer ID="TabContainer1" runat="server" CssClass="ajax__tab_lightblue-theme"
                    ActiveTabIndex="1">
                    <asp:TabPanel runat="server" HeaderText="My Profile" ID="tbpnlMyProfile">
                        <HeaderTemplate>
                            My Profile
                        </HeaderTemplate>
                        <ContentTemplate>
                            <table style="width: 100%;">
                                <tr>
                                    <td class="colwid colht">
                                        <asp:LinkButton ID="lnkBtnEditMyInfo" class="small-heading" runat="server" OnClick="lnkBtnEditMyInfo_Click">Edit My Info</asp:LinkButton>
                                    </td>
                                    &nbsp;
                                    <td>
                                        &nbsp;<asp:Label ID="lblFirstNameMyProfile" runat="server" Text="First Name"></asp:Label>
                                    </td>
                                    <td rowspan="3">
                                        <asp:Panel ID="pnlDisplay" runat="server">
                                            <table style="width: 100%;">
                                                &nbsp;
                                                <tr>
                                                    <td class="colht">
                                                        <asp:Label ID="lblMPDisplayFirstName" runat="server" Text="Label"></asp:Label>
                                                        &nbsp;
                                                        <br />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    &nbsp;
                                                    <td class="colht">
                                                        <asp:Label ID="lblMPDisplayLastName" runat="server" Text="Label"></asp:Label>
                                                        &nbsp;
                                                        <br />
                                                    </td>
                                                </tr>
                                                <tr>
                                                    &nbsp;
                                                    <td class="colht">
                                                        <asp:Label ID="lblMPDisplayEmail" runat="server" Text="Label"></asp:Label>
                                                        &nbsp;
                                                        <br />
                                                    </td>
                                                </tr>
                                            </table>
                                        </asp:Panel>
                                        &nbsp;
                                        <asp:Panel ID="pnlEditInfo" runat="server" Visible="False">
                                            <table style="width: 100%;">
                                                &nbsp;
                                                <tr>
                                                    <td class="colht">
                                                        <asp:TextBox ID="txtEditFirstName" runat="server"></asp:TextBox>
                                                    </td>
                                                </tr>
                                                &nbsp;
                                                <tr>
                                                    <td class="colht">
                                                        <asp:TextBox ID="txtEditLastName" runat="server"></asp:TextBox>
                                                    </td>
                                                </tr>
                                                &nbsp;
                                                <tr>
                                                    <td class="colht">
                                                        <asp:TextBox ID="txtEditEmail" runat="server"></asp:TextBox>
                                                    </td>
                                                </tr>
                                                &nbsp;
                                                <tr>
                                                    <td class="colht">
                                                        <asp:Button ID="btnEditInfoCancel" runat="server" CssClass="btndel" OnClick="btnEditInfoCancel_Click"
                                                            Text="Cancel" />
                                                        <asp:Button ID="btnEditInfoSave" runat="server" CssClass="btn" OnClick="btnEditInfoSave_Click"
                                                            Text="Save" />
                                                    </td>
                                                </tr>
                                            </table>
                                        </asp:Panel>
                                    </td>
                                    &nbsp;
                                    <tr>
                                        <td class="colht">
                                            &nbsp;&nbsp;
                                        </td>
                                        &nbsp;
                                        <td class="">
                                            &nbsp;<asp:Label ID="lblLastNameMyProfile" runat="server" Text="Last Name"></asp:Label>
                                        </td>
                                    </tr>
                                    &nbsp;
                                    <tr>
                                        <td>
                                            &nbsp;&nbsp;
                                        </td>
                                        &nbsp;
                                        <td class="colht">
                                            &nbsp;<asp:Label ID="lblEmailMyProfile" runat="server" Text="Email"></asp:Label>
                                        </td>
                                        &nbsp;
                                        <tr>
                                            &nbsp;
                                            <td>
                                                <br />
                                            </td>
                                            &nbsp;
                                            <td>
                                                &nbsp;&nbsp;
                                            </td>
                                            <td>
                                            </td>
                                        </tr>
                                        &nbsp;
                                        <tr>
                                            <td>
                                                &nbsp;
                                                <asp:LinkButton ID="lnkbtnChangePassword" runat="server" class="small-heading">ChangePassword</asp:LinkButton>
                                                &nbsp; </strong>
                                            </td>
                                            <td>
                                                &nbsp;
                                                <asp:LinkButton ID="lnkChangePassword" runat="server" OnClick="lnkChangePassword_Click">Click here to change your password</asp:LinkButton>
                                                &nbsp;
                                                <br />
                                                <asp:Panel ID="pnlChangePassword" runat="server" CausesValidation="False" Visible="False">
                                                    &nbsp;
                                                    <table style="width: 100%;">
                                                        <tr>
                                                            &nbsp;
                                                            <td class="">
                                                            </td>
                                                            <td style="width: 150px">
                                                                <asp:Label ID="lblOldPassword" runat="server" CssClass="lbl2" Text="Old Password"></asp:Label>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                <asp:TextBox ID="txtOldPassword" runat="server" CssClass="txtbx2" TextMode="Password"></asp:TextBox>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="txtOldPassword"
                                                                    ErrorMessage="Please enter password!"></asp:RequiredFieldValidator>
                                                                &nbsp;
                                                            </td>
                                                        </tr>
                                                        &nbsp;
                                                        <tr>
                                                            <td class="">
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                <asp:Label ID="lblNewPassword" runat="server" CssClass="lbl2" Text="New Password"></asp:Label>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                <asp:TextBox ID="txtNewPassword" runat="server" CssClass="txtbx2" TextMode="Password"></asp:TextBox>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                &nbsp;<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ControlToValidate="txtNewPassword"
                                                                    ErrorMessage="Please choose new password!"></asp:RequiredFieldValidator>
                                                            </td>
                                                        </tr>
                                                        &nbsp;
                                                        <tr>
                                                            <td>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                <asp:Label ID="lblConfirmPassword" runat="server" CssClass="lbl2" Text="ConfirmPassword"></asp:Label>
                                                            </td>
                                                            &nbsp;
                                                            <td>
                                                                <asp:TextBox ID="txtConfirmPassword" runat="server" CssClass="txtbx2" TextMode="Password"></asp:TextBox>
                                                            </td>
                                                            &nbsp;
                                                            <td>
                                                                <asp:CompareValidator ID="CompareValidator1" runat="server" ControlToCompare="txtNewPassword"
                                                                    ControlToValidate="txtConfirmPassword" ErrorMessage="CompareValidator"></asp:CompareValidator>
                                                            </td>
                                                        </tr>
                                                        &nbsp;
                                                        <tr>
                                                            <td>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                                <asp:Button ID="btnCancel1" runat="server" CausesValidation="False" CssClass="btndel"
                                                                    OnClick="btnCancel1_Click1" Text="Cancel" Width="60px" />
                                                            </td>
                                                            <td>
                                                                &nbsp;
                                                                <asp:Button ID="btnSaveNewPassword" runat="server" CssClass="btn" OnClick="btnSaveNewPassword_Click"
                                                                    Text="Save" />
                                                            </td>
                                                            &nbsp;
                                                            <td>
                                                            </td>
                                                        </tr>
                                                        &nbsp;
                                                        <tr>
                                                            <td>
                                                            </td>
                                                            &nbsp;
                                                            <td class="">
                                                            </td>
                                                            &nbsp;
                                                            <td>
                                                            </td>
                                                            <td>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </asp:Panel>
                                            </td>
                                            &nbsp;
                                            <td>
                                                &nbsp;&nbsp;
                                            </td>
                                        </tr>
                                        &nbsp;
                                        <br />
                                        &nbsp;
                                        <br />
                                        <tr>
                                            <td>
                                                &nbsp;&nbsp;
                                            </td>
                                            <td colspan="2">
                                                <br />
                                            </td>
                                        </tr>
                                        &nbsp;
                                        <tr>
                                            <td>
                                                &nbsp;<asp:LinkButton ID="lnkbtnEditContactNo" runat="server" class="small-heading"
                                                    OnClick="lnkbtnEditContactNo_Click">Edit Contact No.</asp:LinkButton>
                                                &nbsp;&nbsp;
                                            </td>
                                            &nbsp;
                                            <td colspan="2">
                                                &nbsp;<asp:Label ID="lblDisplayContactNo" runat="server" Text="Label"></asp:Label>
                                                <asp:Panel ID="pnlEditContactNo" runat="server" Visible="False">
                                                    &nbsp;
                                                    <asp:DropDownList ID="ddlEditCountryNameCode" runat="server" CssClass="ddl2" OnSelectedIndexChanged="ddlEditCountryNameCode_SelectedIndexChanged">
                                                    </asp:DropDownList>
                                                    &nbsp;&nbsp;<asp:TextBox ID="txtEditMobile" runat="server" CssClass="txtbx2"></asp:TextBox>
                                                    &nbsp;
                                                    <br />
                                                    <asp:Button ID="btnCancel" runat="server" CssClass="btndel" OnClick="btnCancel_Click"
                                                        Text="Cancel" />
                                                    &nbsp;<asp:Button ID="btnSave" runat="server" CssClass="btn" OnClick="btnSave_Click"
                                                        Text="Save" />
                                                </asp:Panel>
                                            </td>
                                        </tr>
                                    </tr>
                                </tr>
                            </table>
                        </ContentTemplate>
                    </asp:TabPanel>
                    <asp:TabPanel ID="tbpnlAddressbook" runat="server" HeaderText="Addressbook">
                        <HeaderTemplate>
                            Addressbook
                        </HeaderTemplate>
                        <ContentTemplate>
                            <table style="width: 100%;">
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;<asp:LinkButton ID="lnkbtnViewChange" runat="server" class="small-heading">View / Change</asp:LinkButton>
                                    </td>
                                    <td>
                                        &nbsp;<asp:DropDownList ID="ddlName" runat="server" AutoPostBack="True" CssClass="ddl2"
                                            OnSelectedIndexChanged="ddlName_SelectedIndexChanged">
                                        </asp:DropDownList>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        <div>
                                            &nbsp;&nbsp;<asp:Label ID="lblDisplayFirstName" runat="server" Text="Label"></asp:Label>
                                            &nbsp;<asp:Label ID="lblDisplayLastName" runat="server" Text="Label"></asp:Label>
                                            &nbsp;
                                            <br />
                                            &nbsp;&nbsp;<asp:Label ID="lblDisplayAddressLine1" runat="server" Text="Label"></asp:Label>
                                            <br />
                                            &nbsp;&nbsp;<asp:Label ID="lblDisplayAddressLine2" runat="server" Text="Label"></asp:Label>
                                            <asp:Label ID="lblDisplayAddressLine3" runat="server" Text="Label"></asp:Label>

              <asp:Label ID="lblDisplayCity" runat="server" Text="Label"></asp:Label>
                                            <br />
                                            &nbsp;
                                            <asp:Label ID="lblDisplayState" runat="server" Text="Label"></asp:Label>
                                            <br />
                                            &nbsp;
                                            <asp:Label ID="lblDisplayCountry" runat="server" Text="Label"></asp:Label>
                                            <br />
                                            &nbsp;
                                            <asp:Label ID="lblDisplayPostalCode" runat="server" Text="Label"></asp:Label>
                                            <br />
                                            &nbsp;
                                            <asp:Button ID="btnEdit" runat="server" CssClass="roundcorner btn" OnClick="btnEdit_Click"
                                                OnClientClick="return CheckType('Edit');" Text="Edit" 
                                                CausesValidation="False" />

                                            <asp:ModalPopupExtender ID="btnEdit_ModalPopupExtender" runat="server" 
                                                DynamicServicePath="" Enabled="True" TargetControlID="btnDummy" PopupControlID="pnlMyAddressBook"  BackgroundCssClass="modalBackground roundcorner">
                                            </asp:ModalPopupExtender>

                                            <asp:Button ID="btnDelete" runat="server" CssClass="btndel" OnClick="btnDelete_Click1"
                                                OnClientClick="javascript: return confirmAction()" Text="Delete" />
                                            <asp:Button ID="btnDummy" runat="server" Text="Dummy" Visible="False" /></div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        &nbsp;
                                    </td>
                                    <td>
                                        &nbsp;<asp:LinkButton ID="lnkbtnAddNewAddress" runat="server" 
                                            CausesValidation="False" onclick="lnkbtnAddNewAddress_Click1">AddNewAddress</asp:LinkButton>

                                        <asp:ModalPopupExtender ID="lnkbtnAddNewAddress_ModalPopupExtender" 
                                            runat="server" DynamicServicePath="" Enabled="True" 
                                            TargetControlID="lnkbtnAddNewAddress"  PopupControlID="btnDummy" BackgroundCssClass="modalBackground roundcorner">
                                        </asp:ModalPopupExtender>

                                    </td>
                                </tr>
                            </table>
                            <div class="divwrap">
                                <asp:Panel ID="pnlMyAddressBook" runat="server" BackColor="White" 
                                    CssClass="roundcorner" Visible="False">

                                </asp:Panel>
                            </div>
                            <asp:RoundedCornersExtender ID="pnlMyAddressBook_RoundedCornersExtender" runat="server"
                                Enabled="True" TargetControlID="pnlMyAddressBook">
                            </asp:RoundedCornersExtender>

                            </table>
                        </ContentTemplate>
                    </asp:TabPanel>

                </asp:TabContainer>
               <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
                </asp:ToolkitScriptManager>
            </td>
            <td>
                &nbsp;
            </td>
        </tr>
        </table>
    <asp:HiddenField ID="hdnfld" runat="server" />
</div>
</form>
 </asp:Content>

.divwrap
{
padding: 3%;
display: inline-block;
margin: 3%;
border: 1px solid #66CCFF;
vertical-align: middle;
width: auto;
position: relative;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T16:42:36.717

我知道这是一个旧线程，但对我来说是这样工作的：

*   检查任何控制验证是否设置了正确的 ID。例如：如果您有验证器检查错误的 ID，则页面不会呈现；
*   一些服务器端控件需要用初始标记关闭。例如：......如果你关闭它会出现一些控制错误（根据我的经验）；
*   不良的头部标签；
*   如果您看到页面的来源，可能是一个糟糕的 css；
*   .divwarp 在标签内吗？
*   工具包必须位于页面顶部

# math - 当用户给出答案时如何阅读java扫描仪上的整行？

> ID：15740296
> 
> 赞同：0
> 
> 时间：2013-04-01T08:45:24.933
> 
> 标签：math, java.util.scanner

长期崇拜者，第一次海报:)

大家好，我怀疑这个问题需要进一步解释，因为这可能是我第一次尝试 Java 测验时的灾难性设计缺陷。

游戏是这样的...用户被问到一个数学问题，然后选择 3 并且必须输入 1、2 或 3 作为他们的答案...然后将其与实际答案以及用户的分数进行比较递增/递减一。

到目前为止，我已经准备好了所有可以生成随机位来构建问题以及假答案和正确总和的东西。

我已经到了用户选择 1,2 或 3 的程度......我有 if 语句和一切。

所以现在已经设定了上下文，这是根本问题......

用户在屏幕上看到...

“什么是... 32-83 (1): -51 (2): -55 (3): -48

请输入您的选择："

如果用户按说 2 是不正确的答案，我如何捕获“-55”位，如果我能做到这一点，我怀疑我可以对返回进行比较，从而为我提供正确的答案（一个简单的布尔比较也许）。

这是我第一次尝试使用 Java :)

提前致谢！

啊，可能值得一提的是，这是生成要在屏幕上显示的问题的代码...

```
public String generateQuestionOnScreen(){

    String s = "What is... "+l+""+c+""+r;
    return s;
    } 
```

..这显示了选项..

```
public void generateOptionsOnScreen(){
    int array[]=new int[3];
array[0]=result;
array[1]=fake1;
array[2]=fake2;

System.out.println("(1): "+result);
    System.out.println("(2): "+fake1);
    System.out.println("(3): "+fake2);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:51:42.423

您应该能够通过库函数捕获用户在键盘上输入的值。您将获取该结果，然后进行比较。

这个问题可能会有所帮助：[Java：如何从 System.console() 获取输入](https://stackoverflow.com/questions/4644415/how-to-get-input-from-console-class-in-java)。

注意：我认为您想要比较结果是“2”，而不是您的示例中的“-55”。

# asp.net - 为什么使用不受支持的动词时 IIS 返回 404？

> ID：15740300
> 
> 赞同：2
> 
> 时间：2013-04-01T08:45:59.860
> 
> 标签：asp.net, http, iis, http-status-code-404, http-status-code-405

IIS 传统上会返回 HTTP 404，以防某些 URI 路径被配置为接受 POST 请求，但 GET 请求被发送到该 URI 路径。看起来有专门针对这种情况的 HTTP 405 代码，所以看起来 IIS 行为错误。

IIS 返回 HTTP 404 而不是 HTTP 405 是否有任何设计原因？

# emacs - Emacs 24.3 Cedet 安装不起作用：speedbar 递归加载

> ID：15740303
> 
> 赞同：1
> 
> 时间：2013-04-01T08:46:22.377
> 
> 标签：emacs, cedet

我目前正在努力让 CEDET 在我的 emacs 中工作。按照[A Gentle Introduction to CEDET](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)中的说明进行操作。

我从 bzr repo（31March13 的 n°8250 快照）中获得了最新版本，将其放在 mydotemacs 文件夹中，使用 make 编译 cedet 目录，然后在 .emacs: 中进行必要的更改，特别是放在`(load-file "~/.emacs.d/plugins/cedet/cedet-devel-load.el")`配置的开头文件

当我启动 emacs 时，我得到：

```
error: Recursive `require' for feature `speedbar' 
```

当我尝试调试初始化时，这就是我得到的

> 正在加载 /home/adriean/.emacs.d/emacs-config.el (source)... 正在加载
> /home/adriean/.emacs.d/plugins/cedet/cedet-devel-load.el (source)...正在加载/home/adriean/.emacs.d/plugins/cedet/cedet-remove-builtin.el（源）...完成要求：自动加载未能定义函数调试

我的 emacs 版本是`GNU Emacs 24.3.50.1 (i686-pc-linux-gnu, GTK+ Version 3.4.2)`muntries 上的 2013-03-26，由 Debian 修改，我精确`org-mode babel`地用于组织我的配置。（所以 orgmode 是之前加载的）

# symfony - Symfony2：删除最后一个孩子时删除父实体

> ID：15740315
> 
> 赞同：1
> 
> 时间：2013-04-01T08:46:57.973
> 
> 标签：symfony

我有一个父（注册）和子（参与者）实体。当我删除父母的最后一个孩子时，我也想删除父母。为此使用 postRemove 生命周期事件对我来说很有意义，但我找不到从实体访问实体管理器的方法（我也不确定我应该这样做）。实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:59:06.557

不，您不应该从 Entity 访问 EntityManager，这从根本上是错误的。

~~我看到的第一个选项是在`postRemove`您的`Participant`. 然后使用一个事件订阅者，它被注入`EntityManager`并完成工作。您可以附加参与者或注册作为事件参数，只要最适合您。~~

**编辑**：实际上，我使用 Symfony 的事件调度程序/订阅者是错误的，而是使用 Doctrine 的事件侦听器/订阅者。使用 Symfony 的事件时，您仍然需要将调度程序注入实体。此外，Doctrine 已经发出了一个事件，复制它会很麻烦。

诀窍是将侦听器注册为服务，并将其标记为`doctrine.event_listener`. 这样，您可以通过事件对象访问被删除的实体，并通过注入访问实体管理器，并且一切都在实体之外完成。[Symfony 食谱的更多信息](http://symfony.com/doc/current/cookbook/doctrine/event_listeners_subscribers.html)

# asp.net - 无法清除视图状态

> ID：15740316
> 
> 赞同：0
> 
> 时间：2013-04-01T08:47:02.460
> 
> 标签：asp.net, viewstate

大家好，我正在为某些操作（例如在每个按钮上）分配视图状态的数据表，我将分配一行并将其绑定到数据表并将该数据表分配给视图状态。我有一个与我正在创建的数据表绑定的网格视图。因为我在删除行时有一个删除选项，所以我清除了 Viewstate 并为其分配了新的数据表

```
DataTable dtPayment = new DataTable();

protected void Page_Load(object sender, EventArgs e)
{
   if (!IsPostBack)
   {
   }
 }

protected void btn_Click(object sender, EventArgs e)
{
  if (ViewState["CurrentTable"] == null)
  {
    dtPayment.Columns.Add("Id", typeof(string));
    dtPayment.Columns.Add("PaymentMode", typeof(string));
    dtPayment.Columns.Add("TransactionAmount", typeof(string));
    dtPayment.Columns.Add("BankCharges", typeof(string));
    dtPayment.Columns.Add("Particulars", typeof(string));

     DataRow dr = dtPayment.NewRow();
     dr["Id"] = 1;
     dr["PaymentMode"] = "Cheque";
     dr["TransactionAmount"] = txtAmount.Text;
     dr["BankCharges"] = "";
     dr["Particulars"] = "";
     dtPayment.Rows.Add(dr);
     ViewState["CurrentTable"] = dtPayment;
     grd.DataSource = dtPayment;
     grd.DataBind();
  }
 else
 {
    AddNewRowToGrid("Cheque", txtAmount.Text);
 } 
```

}

```
protected void grd_Deleting(object sender, DeletingEventArgs e)
{
   dt = (DataTable)ViewState["CurrentTable"];
   int iIndex;
   iIndex = grd.FocusedRowIndex;
   dt.Rows[iIndex].Delete();
   dt.AcceptChanges();
   ViewState.Remove("CurrentTable");
   ViewState["CurrentTable"] = dt;
   grd.DataSource = dt;
   grd.DataBind();
}

 protected void AddNewRowToGrid(string strPaymntMode, string transAmount)
    {
        int rowIndex = 0;
        //SetPreviousData();
        if (ViewState["CurrentTable"] != null)
        {
            DataTable dtCurrentTable = (DataTable)ViewState["CurrentTable"];
            DataRow drCurrentRow = null;
            if (dtCurrentTable.Rows.Count > 0)
            {
                for (int i = 1; i <= dtCurrentTable.Rows.Count; i++)
                {
                    drCurrentRow = dtCurrentTable.NewRow();
                    drCurrentRow["Id"] = i + 1;
                    drCurrentRow["PaymentMode"] = strPaymntMode;
                    drCurrentRow["TransactionAmount"] = transAmount;
                    drCurrentRow["BankCharges"] = "";
                    drCurrentRow["Particulars"] = "";
                    rowIndex++;
                }
                dtCurrentTable.Rows.Add(drCurrentRow);
                ViewState["CurrentTable"] = dtCurrentTable;
                grd.DataSource = dtCurrentTable;
                grd.DataBind();
            }
        }

    } 
```

但是，在删除后查看它时，数据表仍然与具有先前值的数据表相同，有人可以告诉我哪里出错了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T08:48:58.143

`grid`您必须在从中删除行后再次绑定`datatable`。还要确保如果在 page_load 中绑定 gridview，那么它在 if(!Page.IsPostBack) 中。

```
protected void grd_Deleting(object sender, DeletingEventArgs e)
{
   dt = (DataTable)ViewState["CurrentTable"];
   int iIndex;
   iIndex = grd.FocusedRowIndex;
   dt.Rows[iIndex].Delete();
   dt.AcceptChanges();
   ViewState.Remove("CurrentTable");
   ViewState["CurrentTable"] = dt;
   //You have to bind the grid with new data table.
   GridView1.DataSource =  dt;
   GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:54:59.483

在页面加载事件中检查您的 !isPostBack 内的 gridview 绑定方法调用？

见下文

```
void page_load()
{
if(!IsPostBack)    
{
// call Bind grid method
}
} 
```

# jquery - Jquery清除内联css

> ID：15740321
> 
> 赞同：3
> 
> 时间：2013-04-01T08:47:15.703
> 
> 标签：jquery, css, inline

我有下面的 JQuery 代码，我需要清除这个动画完成的内联 css

```
$(document).ready(function(){

$("#panel").hide(); //updated line, removing the #panel ID.

 $('#tab2').toggle(function(){ //adding a toggle function to the #tab
    $("#panel").show();

        $('#ToolsTitleSpan').text("CLOSE TOOLS");

        $('#tab2').stop().animate({right: '225'}, 800, 'swing', function() {});

        $("#panel").stop().animate({right: '72', width: '230px', opacity:0.8}, 800, 'swing', function() {

                $('.contentSideBar').fadeIn('slow');        
  });

},

function(){ //when the #tab is next cliked
 $('#ToolsTitleSpan').text("OPEN TOOLS");

 $('#tab2').stop().animate({right: '-=225'}, 800, 'swing', function() {

            $('.contentSideBar').fadeOut(slow, function() {});
 });

 $('#panel').stop().animate({width:"0", position:'absolute', float: 'right', opacity:0.1}, 800, 'swing');

});  
}); 
```

如果需要，这里是 HTML 代码：

```
<div id="panelKS"> <!--the hidden panel -->
    <div class="contentSideBarKS">
    </div>
</div>

<div id="tab2KS">
    <span id="ToolsTitleSpanOpenKS">
        <img id="bg" src="<?php echo $OUTPUT->pix_url('/buttons/opentools', 'theme')?>"/>
    </span>
    <span id="ToolsTitleSpanCloseKS">
        <img id="bg" src="<?php echo $OUTPUT->pix_url('/buttons/closetools', 'theme')?>"/>
    </span>
</div> 
```

你能告诉我如何清除内联css吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T09:10:55.427

您可以`!important`在 CSS 中使用：

```
.test{
    right:800px !important;    
} 
```

该代码将使您的内联 css 被忽略。

或者您可以使用以下方法获取 DOM 的属性`style`：

```
$("div.test").attr("style",""); 
```

或者：

```
$("div.test").attr({style : ""}); 
```

那是您使用您更喜欢的解决方案的权利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:24:01.767

也许这可以帮助您解决问题，抱歉重复发帖（由于字符不足）

```
<!doctype html>
<html>
    <head>
        <style>
            #panelKS{
                width : 500px;
                background-color:#f0f;
                display:none;
            }
            #tab2KS{
                width : 500px;
                background-color:#fa0;
                display:inline-block;
                position:absolute;
            }
        </style>
    </head>
    <body>
    </body>
        <div id="panelKS"> <!--the hidden panel -->
            <div class="contentSideBarKS">
                Testing
            </div>
        </div>

        <!-- my assumtion is -->
        <div id="tab2KS">
            <span id="ToolsTitleSpanOpenKS" value="1">
                <img id="bg" src="#" alt="image 1" title="image 1"/>
            </span>

    <span id="ToolsTitleSpanCloseKS" value="2">
            <img id="bg" src="#" alt="image 2" title="image 2"/>
        </span>
    </div>

    <script src="scripts/jquery-1.9.0.min.js"></script>
    <script>
        $("#tab2KS").children().click(function(){
            $("#panelKS").css({display:"inline-block"});
            //after that in your css you could set transparency to 0 and do the animation
        });
    </script>
<body> 
```

# jquery - 文本区域长度计算在 html 中无法正常工作

> ID：15740322
> 
> 赞同：1
> 
> 时间：2013-04-01T08:47:18.580
> 
> 标签：jquery, html, textarea

嗨，我的 html 页面中有一个文本区域，我正在使用 span 标签来显示它的长度

**html代码：**

```
<textarea cols="50" rows="10" maxlength="160"  id="main_text"></textarea><br/>
<span class="charno">0</span>/160 
```

我正在使用一些 jquery 来显示 span 标签中的长度

**jQuery代码：**

```
$("#main_text").keyup(function(){
      $(".charno").html($("#main_text").val().length);
}); 
```

**我的问题是：**

*   当我在文本区域中输入 160 个字符而不按键盘上的 ENTER 按钮时，它显示正确的结果（160/160）。
*   但是当我在文本区域内使用 ENTER 按钮 1 次时，我只能输入 159 个字符（159/160）。
*   当我在文本区域内使用 ENTER 按钮 2 次时，我只能输入 158 个字符（158/160）。
*   当我在文本区域内使用 ENTER 按钮 3 次时，我只能输入 157 个字符（157/160）。
*   等等....

我的代码有什么问题还是我做错了什么请帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:30:03.570

这是因为一个回车键相当于在文本区域输入的两个字母数字键。如果您在 160 个字符中输入 5 次“输入键”，那么您可以再输入 150 个字符。（150（字母数字）+ 10（输入键 5*2）= 160 个字符）

但是在使用长度计算“输入键”时，它只会返回一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:12:30.127

它应该算 1 输入，如果仍然将输入作为长度 2 请使用以下技巧

```
$("#main_text").keyup(function(e){
var code = e.keyCode;

if (code == 13)
{

var code = e.keyCode;

var l = $("#main_text").val().length;

$(".charno").html(l-1)
}
$(".charno").html($("#main_text").val().length);
}); 
```

# asp.net-mvc-2 - 在 mvc 2.0 dropdownfor 视图中选择 selcteditem 的问题 - 始终选择第一个元素

> ID：15740326
> 
> 赞同：0
> 
> 时间：2013-04-01T08:47:35.353
> 
> 标签：asp.net-mvc-2, asp.net-3.5, selecteditem, selectlist

使用 MSDN 上的示例解释：

SelectList 类 ( [http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist_members(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist_members(v=vs.90).aspx) )

SelectListItem ( [http://msdn.microsoft.com/en-us/library/system.web.mvc.multiselectlist.items(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.multiselectlist.items(v=vs.90).aspx) )

和 IEnumerable ( [http://msdn.microsoft.com/en-us/library/system.collections.ienumerable(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable(v=vs.90).aspx) )

我从示例 Person/People 代码创建了以下类。

```
Public Class Choice
  '
  Private _Value As String = Nothing
  Private _Text As String = Nothing
  Private _Selected As Boolean = Nothing
  '
  Property ItemValue As String
    Get
      Return _Value
    End Get
    Set(value As String)
      _Value = value
    End Set
  End Property
  '
  Property ItemText As String
    Get
      Return _Text
    End Get
    Set(value As String)
      _Text = value
    End Set
  End Property
  '
  Property ItemSelected As Boolean
    Get
      Return _Selected
    End Get
    Set(value As Boolean)
      _Selected = value
    End Set
  End Property
  '
  Public Sub New(ByVal pValue As String, ByVal pText As String)
    Me._Value = pValue
    Me._Text = pText
    Me._Selected = False
  End Sub
  '
  Public Sub New(ByVal pValue As String, ByVal pText As String, pSelected As Boolean)
    Me._Value = pValue
    Me._Text = pText
    Me._Selected = pSelected
  End Sub
'
End Class

Public Class Choices
  Implements IEnumerable
  '
  Private _Choices() As Choice
  '
  Public ReadOnly Property SelectedValue() As Choice
    Get
      Dim i As Integer = Nothing
      Dim x As Choice = Nothing
      For i = 0 To _Choices.Length - 1
        If _Choices(i).ItemSelected Then
          x = _Choices(i)
          Exit For
        End If
      Next i
      Return x
      i = Nothing
      x = Nothing
    End Get
  End Property
  '
  Public Sub New(ByVal pArray() As Choice)
    _Choices = New Choice(pArray.Length - 1) {}
    Dim i As Integer
      For i = 0 To pArray.Length - 1
        _Choices(i) = pArray(i)
      Next i
  End Sub
  '
  Public Function GetEnumerator() As IEnumerator Implements IEnumerable.GetEnumerator
    Return New ChoicesEnum(_Choices)
  End Function
  '
End Class

Public Class ChoicesEnum
  Implements IEnumerator
  '
  Public _Choices() As Choice
  '
  Dim position As Integer = -1
  '
  Public Sub New(ByVal list() As Choice)
    _Choices = list
  End Sub
  '
  Public Function MoveNext() As Boolean Implements IEnumerator.MoveNext
    position = position + 1
    Return (position < _Choices.Length)
  End Function
  '
  Public Sub Reset() Implements IEnumerator.Reset
    position = -1
  End Sub
  '
  Public ReadOnly Property Current() As Object Implements IEnumerator.Current
    Get
      Try
        Return _Choices(position)
      Catch ex As IndexOutOfRangeException
        Throw New InvalidOperationException()
      End Try
    End Get
  End Property
  '
End Class 
```

在我的模型中，我已将其声明如下

```
Private _Gender As Integer = Nothing 
```

在我的控制器中，我实例化一个选择列表，如下所示：

```
Friend Function GetGenderList(SelId As Integer) As SelectList
  '
  Dim ChoicesArray() As Choice = { _
    New Choice("0", "Please Select Gender", IIf(SelId = 0, True, False)), _
    New Choice("1", "Male", IIf(SelId = 1, True, False)), _
    New Choice("2", "Female", IIf(SelId = 2, True, False)), _
    New Choice("3", "Unspecified", IIf(SelId = 3, True, False))}
  Dim ChoicesList As New Choices(ChoicesArray)
    GetGenderList = New SelectList(ChoicesList, ChoicesList(SelId))
    ChoicesList = Nothing
    ChoicesArray = Nothing
    '
End Function 
```

然后我将视图数据中的选择列表传递给视图

```
<ChildActionOnly()> _
Function EditPersonalUserCtrl(ByVal MyPersonal As MemberPersonalModel, FoundErrorInfo As String) As PartialViewResult
  Dim sxGenderList As SelectList = Nothing
  sxGenderList = GetGenderList(MyPersonal.Gender)
  ViewData.Add("Gender", sxGenderList)
  ViewData.Add("FoundErrorInfo", FoundErrorInfo)
  Return PartialView(MyPersonal)
  sxGenderList = Nothing
End Function 
```

在我看来，html如下

```
<tr>
  <td class="FormFieldLabel" style="width: 30%;">Gender</td>
  <td class="FormFieldLabel" style="width: 70%;">
    <%= Html.DropDownListFor(Function(Model) Model.Gender, New SelectList(ViewData("Gender").Items, "ItemValue", "ItemText", "ItemSelected"), New With {.style = "font-family: Tahoma; font-size: 14pt; color: #333333;"})%>
    <%= Html.ValidationMessageFor(Function(Model) Model.Gender)%>
  </td>
</tr> 
```

当我尝试编辑/更新中的视图时，SelectList/DropDown 始终显示列表中的第一个选项项，无论选择了什么。

它让我困惑了两天，我看不出它哪里出错了！请有人看看我的代码，看看它往西走。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T08:38:15.960

在尝试了各种方法后，我认为最好的解决方案是编写自己的 SelectListExtension。

我编写的扩展基于“Choice”、“Choices”和“ChoicesEnum”类。

```
Public Module ChoicesListExtension

  <Extension()>
  Public Function DropDownListFor(ByVal ObjSelectList As Choices, ByVal HtmlCtrlId As String) As String
    '
    Dim Buf As String = Nothing
    Dim Counter1 As Integer = Nothing
    '
    Buf = ""
    If (ObjSelectList Is Nothing) = False Then
      If Trim(HtmlCtrlId) <> "" Then
        Buf = "<select id=" & Chr(34) & Trim(HtmlCtrlId) & Chr(34) & ">" & vbCrLf
      Else
        Buf = "<select>" & vbCrLf
      End If
      If ObjSelectList.Items.Count > 0 Then
        For Counter1 = 0 To ObjSelectList.Items.Count - 1
          Buf = Buf & "  <option value=" & Chr(34) & ObjSelectList(Counter1).ItemValue Chr(34)
            If ObjSelectList(Counter1).ItemSelected Then Buf = Buf & " selected=" & Chr(34) & "selected" & Chr(34)
          Buf = Buf & ">" & Trim(ObjSelectList(Counter1).ItemText) & "</option>" & vbCrLf
        Next
      End If
      Buf = Buf & "</select>" & vbCrLf
    End If
    DropDownListFor = Buf
    Buf = Nothing
    Counter1 = Nothing
    '
  End Function

  <Extension()>
  Public Function DropDownListFor(ByVal ObjSelectList As Choices, ByVal HtmlCtrlId As String, ByVal HtmlAttribs As RouteValueDictionary) As String
  '
  Dim Buf As String = Nothing
  Dim Counter1 As Integer = Nothing
  Dim Counter2 As Integer = Nothing
    '
    Buf = ""
    If (ObjSelectList Is Nothing) = False Then
      If Trim(HtmlCtrlId) <> "" Then
        Buf = "<select id=" & Chr(34) & Trim(HtmlCtrlId) & Chr(34)
        If HtmlAttribs.Count > 0 Then
          For Counter1 = 0 To HtmlAttribs.Count - 1
            Buf = Buf & " " & HtmlAttribs.Keys(Counter1) & "=" & Chr(34) & HtmlAttribs.Values(Counter1) & Chr(34)
          Next
        End If
        Buf = Buf & ">" & vbCrLf
      Else
        Buf = "<select>" & vbCrLf
      End If
      If ObjSelectList.Items.Count > 0 Then
        For Counter2 = 0 To ObjSelectList.Items.Count - 1
          Buf = Buf & "  <option value=" & Chr(34) & ObjSelectList(Counter2).ItemValue & Chr(34)
          If ObjSelectList(Counter2).ItemSelected Then Buf = Buf & " selected=" & Chr(34) & "selected" & Chr(34)
          Buf = Buf & ">" & Trim(ObjSelectList(Counter2).ItemText) & "</option>" & vbCrLf
        Next
      End If
      Buf = Buf & "</select>" & vbCrLf
    End If
    DropDownListFor = Buf
    Buf = Nothing
    Counter1 = Nothing
    Counter2 = Nothing
    '
  End Function

End Module 
```

# regex - 正则表达式：通过换行符捕获组

> ID：15740327
> 
> 赞同：1
> 
> 时间：2013-04-01T08:47:56.727
> 
> 标签：regex

我坚持使用我想做的正则表达式搜索。假设以下列表（注意换行符）：

```
Iowa

Big Store
5 Washington Blvd W.
555-123-456

Market 42
721 23th St. S
555-789-123

New York

Cool Café
23 5th Ave. 
123-456-789

Colorado

Pet Shop
1225 Hot St. N.
654-897-215

Discount Inn
25 Lincoln Rd.
456-987-321

Location 6
Address 6
Telephone 6 
```

所以，我想我会先使用 \n （换行符）来捕获状态，然后是以下所有位置及其地址和电话号码。这是我最后一次工作迭代：

```
(\n{3}(.*)(?:\n{2}(.*)\n{1}(.*)\n{1}(.*))) 
```

那里的这个美丽只捕获所有状态和每个状态之后的第一个位置，所以我认为“`+`在非捕获组的末尾添加一个应该获取其余位置”。像这样：

```
(\n{3}(.*)(?:\n{2}(.*)\n{1}(.*)\n{1}(.*))+) 
```

谎言。它没有。它只是打破。

我做错了吗？我怎样才能让它捕获状态之间的每个位置？

我的目标是将每个组收集到一个数组中，如下所示：

```
locations[0][0][0] -> 'Big Store' 
locations[0][0][1] -> '5 Washington Blvd W.' 
locations[0][0][2] -> '555-123-456' 
...
locations[1][0][0] -> 'Cool Café' 
locations[1][0][1] -> '23 5th Ave.' 
locations[1][0][2] -> '123-456-789' 
```

或类似的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:07:08.703

我不完全确定你想做什么，但我在正则表达式中提出了这个：

```
(?:(?:^|\n{3})(.*))(?:(?!\n{3})(?:\n{2})(.*)\n(.*)\n(.*))+ 
```

这将匹配一个状态，其间有任意数量的位置块。

希望有帮助，本

**更新**

我再次更新了正则表达式，以从捕获中包含和排除某些组。将其分解，您可以看到它与行首或 3 个新行之后的状态相匹配`(?:(?:^|\n{3})(.*))`。然后是 2 个新行（但不是 3 个）中的一个或多个，然后是 3 个地址行。

但是，您应该注意，虽然此正则表达式匹配不同的位置，但它只捕获最后一个（在某些实现中）。您可能需要进行一些多级匹配来捕获所有位置，或者改用@anubhava 答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:51:22.720

这是应该为您工作的正则表达式：

```
([^\n]+)?(?:\n{2}([^\n]+)\n([^\n]+)\n([^\n]+)) 
```

### 现场演示：[http ://www.rubular.com/r/GISXu5S2vh](http://www.rubular.com/r/GISXu5S2vh)

# ios - 如何在自己的线程中使用 Core Data？

> ID：15740330
> 
> 赞同：0
> 
> 时间：2013-04-01T08:48:07.590
> 
> 标签：ios, objective-c, multithreading, core-data

我正在制作一个与 9gag 应用程序非常相似的应用程序，并且我正在努力获得平滑滚动，所以我试图让所有内容都脱离主线程。给我带来麻烦的是Core Data。

我有一个类 PhotoSource，它创建了自己的线程，如下所示：

`@property (nonatomic) dispatch_queue_t photoSourceThread;
...
dispatch_async(self.photoSourceThread, ^{ ... });`

我还有另一堂课，它只处理核心数据：

```
@property (nonatomic, strong) TLCoreDataManager *coreDataManager; 
```

PhotoSource 类中的所有内容都发生在它的线程中，包括对 TLCoreDataManager 的调用，如下所示：

```
dispatch_async(self.photoSourceThread, ^{
Photo *storedPhoto = [self.coreDataManager getPhotoWithURLString:urlString];
...
}); 
```

有时它有效，但在应用程序启动后，我从我的 NSFetchRequest[s] 中得到 0 个结果，我不知道该怎么做。有什么想法可能是错的吗？如果您需要更多代码，请告诉我！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:45:42.600

要在多线程环境中使用 CoreData 更改数据并最终更新 GUI，您需要将更改合并到基于主队列的上下文（由基于核心数据的应用程序生成的默认代码中的默认上下文）。我建议您使用获取结果控制器来监听对您的数据所做的更改。

你可以使用类似的东西：

```
/*!
 @see http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdConcurrency.html
 */
- (void) doSomethingInBackgroundWithoutBlocking:(NSPersistentStoreCoordinator*)coordinator
{
    NSManagedObjectContext* bgContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    [bgContext setPersistentStoreCoordinator:coordinator];
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(mergeChanges:) //merge to your main context
                                                 name:NSManagedObjectContextDidSaveNotification
                                               object:bgContext];
    [bgContext performBlock:^{
        //Do somethig with your persistent store data
        //Objects fetched here will only be available for this context
        //And on its own queue
        //Probably need to save & merge to main context so that the fetch results controller will be updated
        //remove the observer
    }];
} 
```

# java - Java 将 LinkedList 中的数据保存到文件中

> ID：15740332
> 
> 赞同：0
> 
> 时间：2013-04-01T08:48:07.670
> 
> 标签：java, file, object, file-io, stream

好的，我目前正在开发一个库存控制系统，并且我可以使用它，但是我想添加一个功能，以便它可以将链表保存到文件中，并有一个方法可以做到这一点，称为 saveData() 然后我有另一个方法叫做loadData() 将文件名作为参数。

将要创建的方法必须使用对象流来实现。

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:54:13.280

您可以使用`FileOutputStream`and`FileInputStream`对文件进行写入和读取。

序列化要保存在文件中的对象，使用 写入文件`writeObject()`并使用 读取`readObject()`。

# ruby - 如何从当前日期计算过去的日期

> ID：15740336
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:48:38.620
> 
> 标签：ruby

1.  将日期作为“本周”的数组返回

> ```
> def this_week   
>   if today == "wednesday"
>     return [date(sunday), ..., date(wednesday)]       
>   end 
> end 
> ```

1.  将日期作为“上周”的数组返回

> ```
>  def last_week
>     return [date(last.sunday), ..., date(last.saturday)]
>   end 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:13:36.353

给`a_date.wday`你[星期几](http://ruby-doc.org/stdlib-2.0/libdoc/date/rdoc/Date.html#method-i-wday)，你可以通过删除它找到星期天。从那里，只需在数组中添加周日和接下来的几天。上周，只是该数组的每个元素减去 7 天。

```
require 'date'
def this_week(today)
  sunday = today - today.wday
  week = [sunday]
  (1..6).each do |wday|
    week << sunday + wday
  end

  return week
end

def last_week(today)
  return this_week(today).map { |elem| elem - 7}
end 
```

# javascript - 这两个语句的含义是什么？

> ID：15740337
> 
> 赞同：2
> 
> 时间：2013-04-01T08:48:38.790
> 
> 标签：javascript, regex

我遇到了这两个放在`for`循环内的语句，我试图从它们中找出一些意义，但徒劳无功。有人可以向我解释他们是如何工作的吗？

```
 var s = (n === 7 || n === 8) && l.nodeValue;
 if (s ? !/^\??somestring\b/.test(s) : n !== 3 || /\S/.test(l.nodeValue)) break; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:56:47.360

1.  将值设置`l.nodeValue` 为`s`if`n===7`或`n===8`
2.  如果`s`不为假，则检查`!/^\??somestring\b/.test(s)`并反转逻辑值（`!`），如果不 - 检查是否`n`不等于或具有不同的类型`3`
3.  查看`/\S/.test(l.nodeValue)`
4.  如果 2\. 或 3\. 为真，那么`break`

这里有帮助的是知道它`if...else`可以写成`condition ? true : false`，这`===`意味着变量不仅在其值上相等，而且在其类型上也相等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:01:59.347

```
var s = (n === 7 || n === 8) && l.nodeValue; 
```

如果`n`等于 7 或 8 设置`s`为`l.nodeValue`.

```
if (s ? !/^\??somestring\b/.test(s) : n !== 3 || /\S/.test(l.nodeValue)) break; 
```

如果`s`不为假：

*   如果`s`匹配`/^\??somestring\b/`什么都不做。
*   否则`break`。

如果`s`为假：

*   如果`n`等于 3`l.nodeValue`且不匹配`/\S/`则什么也不做。
*   否则`break`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:04:16.180

类似下面的代码，我没有测试

```
var s;

if ( n === 7 || n === 8 ){
        s = l.nodeValue;

} else {
        s = false;
}

var isBreakLoop ;

if ( s ){
    isBreakLoop = !/^\??somestring\b/.test(s);
} else {
    if ( n !== 3 ){
        isBreakLoop = true;
    }else {
        isBreakLoop = /\S/.test(l.nodeValue)
    }
}

if( isBreakLoop ) {
    break;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:11:37.747

`(n === 7 || n === 8)`如果 n 等于 7 或 8，则等于 true

`l.nodeValue`将返回它的值，如果它不是假的（如果不是，，，，，`l.nodeValue`或）。`""``undefined``null``NaN``0``false`

将返回an 最右侧的任何值`&&`- 不仅仅是`true`or `false`。
然而，为了让它发挥作用，当然，一切都必须到位。

所以假设`l.nodeValue = "Bob";`和`n = 7;`, `s = (true) && "Bob";`, 因此`s === "Bob";`

那是第 1 行。

第 2 行有一个三元赋值，它返回语句检查的值（与第 1 行的第一次检查返回的`if`方法相同。`n === 7 || n === 8``true`

第一个正则表达式表示一个字符串，该字符串以或`/^\??somestring\b/`开头，然后具有单词边界（空格/换行符/标点符号/字符串结尾）。`"?somestring"``"somestring"`

如果`l.nodeValue`保存到`s`，则`s`针对“somestring...”或“?somestring...”测试内容。如果匹配，则返回 false。

如果`s`为假（如果第 1 行失败），则检查是否`n`等于 3。如果不匹配则返回真。
如果选择的三元测试失败，则检查`l.nodeValue`是否有任何不是空格/换行符/制表符的字符。如果有则返回真。

如果第 2 行中的任何测试分支导致`true`，则中断循环。

# asp.net - 在一个表单中添加多个嵌套项

> ID：15740339
> 
> 赞同：0
> 
> 时间：2013-04-01T08:48:57.017
> 
> 标签：asp.net, asp.net-mvc, forms, razor, asp.net-mvc-4

我有一个复杂的问题。我需要在 ASP.NET MVC4 应用程序的一个表单中添加多个项目。我有三个模型：

电影：

```
public class Movie
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }
    public string Title { get; set; }
    public string Description { get; set; }
    public int Duration { get; set; }
} 
```

电影中的所有语言：

```
public class MovieLanguages
{
    [ForeignKey("Movie")]
    public int MovieId { get; set; }

    [ForeignKey("Language")]
    public int LanguageId { get; set; }

    public virtual Movie Movie { get; set; }
    public virtual Language Language { get; set; }
} 
```

语：

```
public class Language
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

我了解如何保存用户的输入，如果它只是用于在表单中具有这样简单行的 Movie 模型：

```
@Html.EditorFor(model => model.Movie.Name) 
```

问题是用户还应该能够在表单中为电影添加多种语言（模型 MovieLanguages）。因此，当显示表单时，用户会有这样的事情：

![在此处输入图像描述](https://i.stack.imgur.com/rijsW.png)

用户将有一个语言的下拉列表，当他从列表中选择一种语言并单击添加语言按钮时，语言将显示在下方。当他单击保存电影时，所有选择的语言也应保存到表 MovieLanguages 中的数据库中。当电影 id 仅在存储在数据库中后才知道时，如何处理此问题？当存在一对多关系时，我不确定如何解决 View 和 Controller 中的多个模型的问题。有任何想法吗？:)

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:59:50.113

您所需要的只是[模型绑定到列表](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)和[模型绑定到数组、列表、集合、字典](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)。剩下的就是一点点 javascript 在`Add Language`点击时动态生成所需的 html。

# templates - 将 html 模板放在 sencha touch 视图的顶部

> ID：15740343
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:49:17.813
> 
> 标签：templates, sencha-touch, sencha-touch-2

我有一个 html 模板元素。即使我第一次配置它，它也会在视图底部加载。我想把它放在 view 的顶部。任何的想法？`tpl`是那个模板元素

我的代码

```
config: {
    title: 'Info ',
    styleHtmlContent: true,
    scrollable: true,

    tpl: ['<table><tr><td><img src="{image}" height="60" width="60" id="{id}" /></td></tr>',
        '<tr><td>{model}</td></tr>',
        '<tr><td>{price}</td></tr>',
        '<tpl for="color">',
        '<tpl for="infos">',
        '<tr><td>{name}: <tpl for="item_names"> ],
    store: 'Item',

    items:[

        {
            xtype: 'fieldset',

            items : [

                {
                    xtype : 'selectfield',
                    name : 'quantity',
                    label:'Quantity',
                    id: 'quantity'
                },{
                 other elements
                  }

                ]

            }
    ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:15:35.157

尝试为表 css 设置：

```
table { display: block; top: 0px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:18:33.227

试试这个，

```
config: {

 scrollable:true,
 styleHtmlContent:true,

 items:[
{
 xtype: 'panel',
 title: 'Info ',
 style: 'margin-top: 0%;',
 height: '20%', // whatever height you want for templete
 width: '20%',  //  whatever width you want for templete
 styleHtmlCls:'details',
tpl:['<table><tr><td><img src="{image}" height="60" width="60" id=" {id}" /></td></tr>',
    '<tr><td>{model}</td></tr>',
    '<tr><td>{price}</td></tr>',
    '<tpl for="color">',
    '<tpl for="infos">',
    '<tr><td>{name}: <tpl for="item_names">'],
store: 'Item',
},     
{
xtype: 'fieldset',                     
items : [                            
 {
    xtype : 'selectfield',
    name : 'quantity',
    label:'Quantity',
    id: 'quantity'
 },{
     other elements
    }   
 ]

 }
   ]
}, 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:00:26.113

您可以通过创建另一个组件并将您的 tpl 包装在该组件中来实现。然后，您可以将该组件包含为您的视图项目：

```
items:[
    {
        xtype: 'panel',
        tpl: [
             '<table><tr><td><img src="{image}" height="60" width="60" id="{id}" / </td></tr>',
             '<tr><td>{model}</td></tr>',
             '<tr><td>{price}</td></tr>',
             '<tpl for="color">',
             '<tpl for="infos">',
             '<tr><td>{name}: <tpl for="item_names">'
        ],

        store: 'Item'

    },

    {
        xtype: 'fieldset',

        items : [

            {
                xtype : 'selectfield',
                name : 'quantity',
                label:'Quantity',
                id: 'quantity'
            },{
                other elements                  
             }
        ]

    }
] 
```

# android - 如何执行graph-api Facebook Android SDK

> ID：15740346
> 
> 赞同：4
> 
> 时间：2013-04-01T08:49:35.360
> 
> 标签：android, facebook-graph-api

我可以在 facebook Graph API Explorer 上运行它来获取用户 ID、用户名、最近状态和个人资料图片，

```
/8794851923?fields=id,name,statuses,picture 
```

如何使用 Facebook-SDK 在 android 中执行并获得结果？

我试过[这个](https://stackoverflow.com/a/4105904/1549865)，但它已被弃用。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:45:47.830

在查看了 facebook sample SDK 之后，我得到了这个：

```
 Bundle params = new Bundle();
     params.putString("fields", "id,name,statuses");

 final String requestId = "154727011315956";

 Request request = new Request(session, requestId, params, HttpMethod.GET, new Request.Callback() {
      public void onCompleted(Response response) {
                GraphObject graphObject = response.getGraphObject();
                FacebookRequestError error = response.getError();
                if(error!=null){
                 Log.e("Error", error.getErrorMessage());
                 }

            }
        });

    Request.executeAndWait(request); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-26T13:10:57.410

> Graph API 是获取 Facebook 社交图谱数据进出的主要方式。它是一个基于 HTTP 的低级 API，可用于查询数据、发布新故事、上传照片以及应用程序可能需要执行的各种其他任务。本指南将教您如何在 Graph API 中完成所有这些事情。

```
/* make the API call */
new GraphRequest(
    AccessToken.getCurrentAccessToken(),
    "/me",
    null,
    HttpMethod.GET,
    new GraphRequest.Callback() {
        public void onCompleted(GraphResponse response) {
            /* handle the result */
                    System.out.println("Response::" + String.valueOf(response.getJSONObject()));

        }
    }
).executeAsync(); 
```

这里，

**AccessToken.getCurrentAccessToken() >>**登录用户访问令牌

**/me>>**开发者自己的个人资料信息

这里还应用了用户/页面的 ID/名称来获取该信息，例如：***/joshuatreemusicfestival/posts/***

**null>>**这里传递实际获取用户/页面信息类型的参数，例如：

```
Bundle param = new Bundle();
        param.putString("fields", "message,created_time,id,full_picture,status_type,source,comments.summary(true),likes.summary(true)"); 
```

*参数*替换*空*

**HttpMethod.GET>>**请求方法**[GET, POST, DELETE]**

最后**onCompleted()**调用并得到你想要的响应......！！！

[供参考](https://developers.facebook.com/docs/graph-api/using-graph-api/v2.5)

# java - 单击按钮时停止线程

> ID：15740350
> 
> 赞同：1
> 
> 时间：2013-04-01T08:49:48.420
> 
> 标签：java, android, multithreading, button

我的 android 应用程序中有一个新线程，它最多计数 60（以秒为单位），然后刷新视图。但是在这个视图上有一个后退按钮。因此，当我点击后退按钮时，视图会更改为应有的视图，但正在运行的额外线程依赖。我怎样才能停止这个线程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:54:55.167

为什么不使用`Handler`and `Runnable`。使用类似的东西：

```
Handler handler = new Handler();
Runnable runable = new Runnable({
   @Override
   public void run(){
        // count
        handler.postDelayed(this, 1000);
   }
}); 
```

在你的`onClick();`你可以做`handler.removeCallbacks(runable);`

# k2 - 从 API 执行 K2 智能对象时如何使用多个过滤器？

> ID：15740351
> 
> 赞同：2
> 
> 时间：2013-04-01T08:49:50.830
> 
> 标签：k2

我正在尝试执行自定义 K2 智能对象的 Get List 方法，该方法查询 SQL 数据库对象（视图）。我在现有的 C# 项目中使用 API 来执行这些智能对象。我想将多个过滤器传递给这个 GetList 方法。

我正在使用下面的代码添加单个过滤器，但无法弄清楚传递多个过滤器的方法：

```
Dictionary<string, string>[] results = null;
if (!server.Connection.IsConnected) return results;

SmartObject smartObject = server.GetSmartObject(objectName);
SmartListMethod newList = smartObject.ListMethods["GetList"];
smartObject.MethodToExecute = methodName;

Contains myFilter = new Contains();
myFilter.Left = new PropertyExpression(filterPropertyName, PropertyType.Text);
myFilter.Right = new ValueExpression(filterValue, PropertyType.Text);

newList.Filter = myFilter;

SmartObjectList list = server.ExecuteList(smartObject);

results = new Dictionary<string, string>[list.SmartObjectsList.Count];
for (int i = 0; i < list.SmartObjectsList.Count; i++)
{
    results[i] = new Dictionary<string, string>();
    SmartObject smo = list.SmartObjectsList[i];
    foreach (SmartProperty property in smo.Properties)
    {
         results[i].Add(property.Name, property.Value);
    }
}
return results; 
```

就像`myFilter`上面的代码一样，我想传递多个这样的过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T16:52:36.687

```
Dictionary<string, string>[] results = null;
if (!server.Connection.IsConnected) return results;

SmartObject smartObject = server.GetSmartObject(objectName);
SmartListMethod newList = smartObject.ListMethods["GetList"];
smartObject.MethodToExecute = methodName;

Contains myFilter = new Contains();
myFilter.Left = new PropertyExpression(filterPropertyName, PropertyType.Text);
myFilter.Right = new ValueExpression(filterValue, PropertyType.Text);

    Contains myFilter2 = new Contains();
    myFilter2.Left = new PropertyExpression(filterPropertyName2, PropertyType.Text);
    myFilter2.Right = new ValueExpression(filterValue2, PropertyType.Text);

    Not myFilter3 = new Not(myFilter2);

    // And can have the left and right filters set to pre-defined filteres to combined them!
    And myCombinedFilter = new And();
    myCombinedFilter.Left = myFilter;
    myCombinedFilter.Right = myFilter2;

    // Or also works!
    Or myCombinedFilterOr = new Or();
    myCombinedFilterOr.Left = myCombinedFilter;
    myCombinedFilterOr.Right = myFilter3;

// ((MyFilter && myFilter2) || Not MyFilter2)
newList.Filter = myCombinedFilterOr;

SmartObjectList list = server.ExecuteList(smartObject);

results = new Dictionary<string, string>[list.SmartObjectsList.Count];
for (int i = 0; i < list.SmartObjectsList.Count; i++)
{
    results[i] = new Dictionary<string, string>();
    SmartObject smo = list.SmartObjectsList[i];
    foreach (SmartProperty property in smo.Properties)
    {
         results[i].Add(property.Name, property.Value);
    }
}
return results; 
```

# database - Informix 数据库触发器

> ID：15740358
> 
> 赞同：1
> 
> 时间：2013-04-01T08:50:09.703
> 
> 标签：database, triggers, informix

我正在尝试从“systriggers/systrigbody”informix 系统表中查询触发器。当数据键列是“A”和“D”时，我需要 systrigbody 表的数据列，应该忽略其余部分。这是我的代码：

```
SELECT  tr.tabid, tr.trigid, tr.trigname, tr.owner, tb.data
FROM systriggers tr, systrigbody tb
WHERE tr.tabid = ?
AND tr.trigid = tb.trigid
AND tb.datakey != 'B' AND tb.datakey != 'H'AND tb.datakey !='S'
ORDER BY tb.datakey DESC 
```

我遇到的问题是它只为“A”数据键值或只为“D”返回数据列（取决于 ORDER BY 是 DESC 还是 ASC）。我需要他们两个。任何指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:34:36.510

我将您的查询稍微修改为（a）`tb.datakey`在选择列表中包含，并且（b）省略条件`tabid`（因此它会为任何表选择任何触发器）：

```
SELECT  tr.tabid, tr.trigid, tr.trigname, tr.owner, tb.datakey, tb.data
FROM systriggers tr, systrigbody tb
WHERE {tr.tabid = ?}
{AND} tr.trigid = tb.trigid
AND tb.datakey != 'B' AND tb.datakey != 'H'AND tb.datakey !='S'
ORDER BY tb.datakey DESC; 
```

我在一个装有触发器的数据库上运行它，部分输出是：

```
124|49|u_timerecord|wtsdba|D|create trigger "wtsdba".u_timerecord update on "wtsdba".timerecord
124|50|d_timerecord|wtsdba|D|create trigger "wtsdba".d_timerecord delete on "wtsdba".timerecord
125|51|u_wi_buglist|wtsdba|D|create trigger "wtsdba".u_wi_buglist update on "wtsdba".wi_buglist
127|52|u_wi_problem|wtsdba|D|create trigger "wtsdba".u_wi_problem update on "wtsdba".wi_problem
128|53|u_wi_task|wtsdba|D|create trigger "wtsdba".u_wi_task update on "wtsdba".wi_task
106|15|d_workstate|wtsdba|A| before\ (\ execute procedure "jleffler".wtsdba_del('WorkState' ));
106|14|u_workstate|wtsdba|A| before\ (\ execute procedure "jleffler".wtsdba_upd('WorkState' ));
114|29|u_sec_action|wtsdba|A| before\ (\ execute procedure "jleffler".wtsdba_upd('SEC_Action' ));
107|16|d_workitem|wtsdba|A| before\ (\ execute procedure "jleffler".wtsdba_del('WorkItem' ));
115|30|u_wts_menu|wtsdba|A| before\ (\ execute procedure "jleffler".wtsdba_upd('WTS_Menu' )); 
```

我修改了输出，以便将多个空白替换为单个空白。总共有110行；我只是从列表中间选择了几个，其中数据键从`'D'`变为`'A'`。

这是在类似的 DB-Access 工作中运行的；使用 DB-Access，您将获得基本相同的结果，但格式会更加冗长。

由此，我推断您的查询基本上是合理的。我并不否认你看到了奇怪的结果。因此，您需要生成一个最小的测试用例——一个简单的 Java 和 JDBC 程序，它执行显示的查询或您的原始查询，并演示问题（一个 SSCCE — <a href="http://sscce.org/ " rel="nofollow">简短的、独立的、正确的例子——换句话说），展示你如何看待问题。然后我们可以希望重现该问题。请包含一个带有触发器的简单表的架构，以便我们使用“相同”的目录数据。

它还有助于查找您正在使用的 Informix 版本。您应该能够使用：

```
SELECT DBINFO('version', 'full') FROM SysTables WHERE TabID = 1; 
```

如果它因为不受支持而失败，那么您的 Informix 早就不支持了。我得到了输出：

```
IBM Informix Dynamic Server Version 11.70.FC6 
```

我在装有 Mac OS X 10.7.5 的 Mac 上运行。

# android - 如何使用 MediaStore 获取音频文件的缩略图

> ID：15740359
> 
> 赞同：3
> 
> 时间：2013-04-01T08:50:18.797
> 
> 标签：android, media-player, mediastore

我现在正在开发一个简单的音乐播放器，我需要获取所有音频文件的缩略图。

```
String selection = MediaStore.Audio.Media.IS_MUSIC + " != 0";

    String[] projection = {
            MediaStore.Audio.Media._ID,
            MediaStore.Audio.Media.ARTIST,
            MediaStore.Audio.Media.TITLE,
            MediaStore.Audio.Media.DATA,
            MediaStore.Audio.Media.DISPLAY_NAME,
            MediaStore.Audio.Media.DURATION,
            MediaStore.Audio.Media.YEAR
    };
    cursor = getBaseContext().getContentResolver().query(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,
            projection, selection, null, null);
    while(cursor.moveToNext()) {

        name.add(cursor.getString(4));
        path.add(cursor.getString(3));
        duration.add(cursor.getString(5));
    } 
```

我怎么才能得到它 ？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-09T18:17:12.543

您可能想看看我在类似问题上给出的这个[答案。](https://stackoverflow.com/questions/15314617/get-cover-picture-by-song/16972099#16972099)您需要提供`Uri`歌曲的名称才能获得封面艺术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-20T07:22:39.797

根据[文档](https://developer.android.com/reference/android/media/ThumbnailUtils#createAudioThumbnail(java.lang.String,%20int))，它应该是：

```
Bitmap image = ThumbnailUtils.createAudioThumbnail("your file name", MediaStore.Images.Thumbnails.MICRO_KIND); 
```

这可能对你有用。（尽管它`NoSuchMethodError`在 Marshmellow 中与 a 崩溃）。

# caching - 使用 redis 进行缓存，但使用 what 进行持久性

> ID：15740362
> 
> 赞同：0
> 
> 时间：2013-04-01T08:50:25.937
> 
> 标签：caching, redis, persist

我计划使用 redis 作为缓存，每个键都有一个过期设置，我在 redis.conf 中使用了以下配置：

```
maxmemory 2gb
maxmemory-policy allkeys-lru 
```

问题是如何将过期的密钥持久化到另一个数据库，如 MongoDB（或任何数据库），该数据库可以将密钥存储在磁盘中。要求如下：

1.当我查询“热键”（最近经常使用）时，如果redis有键，我可以快速从redis获取结果，否则我可以从存储密钥的另一个数据库中获取密钥在磁盘中。2.每个键都有自己的寿命。当redis中有key过期时，其他数据库应该存储过期的key。

“这种方式使用Redis作为缓存时，如果应用也需要使用Redis作为存储，强烈建议创建两个Redis实例，一个作为缓存，这样配置，一个作为存储，根据您的持久性需求进行配置，并且只保存与缓存数据无关的密钥。” 引用[http://redis.io/topics/config](http://redis.io/topics/config)

我的问题是将过期的密钥保存到另一个数据库（存储在磁盘中的密钥）而不是redis。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:25:43.087

您需要启用 notify-keyspace-events [http://redis.io/topics/notifications](http://redis.io/topics/notifications)

并捕获过期/驱逐事件。

然后使用“psubscribe”监听“del”事件并将这些密钥发送到另一个数据库。

# java - 无法从控制器包类访问 bean 包类

> ID：15740363
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:50:29.190
> 
> 标签：java, jsp, tomcat, servlets

使用请求调度程序，我将请求从控制器包中的 Servlet 类转发到 bean 包中的类。这是我的代码..

```
private void credentialProcessing(HttpServletRequest request,
            HttpServletResponse response) {

        try{

            RequestDispatcher rd=request.getRequestDispatcher("algo");//this class is in bean package
            rd.forward(request, response);
        }
         catch (ServletException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }

    } 
```

![项目截图](https://i.stack.imgur.com/Z82jT.png)

错误：当我尝试执行此操作时，Tomcat 会给我错误，即未找到请求的资源..另一方面，如果我访问控制包类，它会被访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T08:52:51.900

`RequestDispatcher`使用路径转发请求，它不允许您指定转发请求的类。

**获取请求调度程序**

> 返回一个 RequestDispatcher 对象，该对象充当位于给定路径的资源的包装器。RequestDispatcher 对象可用于将请求转发到资源或将资源包含在响应中。资源可以是动态的或静态的。

如果`algo`要从 servlet 访问类，请在 servlet 中创建该类的实例。

```
private void credentialProcessing(HttpServletRequest request,
            HttpServletResponse response) {

        try{
           algo al = new algo();
           al.callSomeMethod();
        }
         catch (ServletException e) {

            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }
    } 
```

**附带说明**

查看 Java 类的命名约定，它要求类名大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T08:54:25.170

**Algo 是一个 bean 类我猜不是控制器**，使用 rd.forward 转发请求并不意味着请求可以从控制器转发到 bean 类。

您按照代码所做的就像将请求从一个 url 转发到另一个。

如果要转发整个请求，请简单实例化算法类，并调用一些将请求作为输入参数的方法。

*在某些控制器方法中*

```
algo algoObj = new algo();
algo.processRequest (request, response); 
```

# entity-framework - 错误：类型“TEntity”必须是引用类型

> ID：15740373
> 
> 赞同：2
> 
> 时间：2013-04-01T08:51:28.027
> 
> 标签：entity-framework, generics, reflection

```
public partial class GridMastercontrol<TEntity> : UserControl
{
private System.Data.Objects.ObjectSet<TEntity> _osMain; // error here
} 
```

我无法声明泛型类型的对象集。请帮助我如何做到这一点。

错误消息是-类型“TEntity”必须是引用类型才能将其用作泛型类型或方法“System.Data.Objects.ObjectSet”中的参数“TEntity”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T08:56:18.263

将通用约束添加到您的类声明中：

```
public partial class GridMastercontrol<TEntity> : UserControl where TEntity : class 
```

你必须这样做，因为`ObjectSet<TEntity>`已经有一个：

```
public class ObjectSet<TEntity> : ObjectQuery<TEntity>, 
        IObjectSet<TEntity>, IQueryable<TEntity>, IEnumerable<TEntity>, 
        IQueryable, IEnumerable
where TEntity : class 
```

# ios - XCode ARC 允许发布

> ID：15740374
> 
> 赞同：-1
> 
> 时间：2013-04-01T08:51:29.307
> 
> 标签：ios, xcode, memory, automatic-ref-counting, memory-leaks

很奇怪，ARC 允许释放操作但不允许保留操作。据我所知，所有这些都是被禁止的。我的应用程序由于内存泄漏而崩溃。为什么 ARC 不能正常工作？

![在此处输入图像描述](https://i.stack.imgur.com/0WUgZ.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:19:40.033

只需删除该行

```
[anaView retain]; 
```

然后`XCode`肯定会指出错误

```
[anaView release]; 
```

XCode 不会同时显示所有错误。

**边注：**

```
[anaView release];
[anaView retain]; 
```

我觉得很奇怪。我的意思是先`release`，然后`retain`；这样做的目的是什么？

# android - 如何以编程方式将样式应用于 Textview

> ID：15740375
> 
> 赞同：0
> 
> 时间：2013-04-01T08:51:32.697
> 
> 标签：android, textbox

我以编程方式创建了一个 textView。现在我需要以编程方式为这个 textview 分配一个样式。（不仅是 TextAppearance，还有左边距、填充等）。所有这些样式属性都在一个 xml 文件中定义。

```
TextView tv = new TextView(this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:02:04.570

使用 layoutParams 设置动态创建的 textView 的边距。

```
TextView view1 = new TextView(this);

view1.setGravity(Gravity.RIGHT | Gravity.CENTER);

RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(

                       RelativeLayout.LayoutParams.WRAP_CONTENT,

                       RelativeLayout.LayoutParams.WRAP_CONTENT);

rlp.setMargins(10,10, 0, 0);
view1.setLayoutParams(rlp); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:02:12.497

对于字体样式：`textview.setTypeface(Typeface.DEFAULT_BOLD);`

对于左边距和填充，您需要定义“布局参数”，例如

```
TextView tv = new TextView(this);
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(heightInPixels, widthInPixel);
tv.setLayoutParams(params);
tv.setMargins(10, 10, 10, 10);
yourLayout.addView(tv);
tv.setPadding(10, 10, 10, 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:56:28.583

设置填充非常容易。但是保证金有点棘手。看看下面。

```
TextView tv = new TextView(this);
//setting padding left top right bottom
tv.setPadding(10, 10, 10, 10);
//setting left margin
LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
llp.setMargins(50, 0, 0, 0); // llp.setMargins(left, top, right, bottom);
tv.setLayoutParams(llp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:56:58.577

```
 LinearLayout.LayoutParams llp = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT); 
   tv.setLayoutParams(params); 
   tv.setPadding(left, top, right, bottom);
   left- padding to left
   top - padding to right
   right -padding to right
   bottom -padding to bottom 
```

有关更多样式，请查看下面的链接。请参阅 setter 方法。您可以设置文本大小、背景颜色等等。

[http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T08:57:35.630

使用布局参数设置此属性。

```
TextView t = new TextView(this);
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(heightInPixels, widthInPixel);
params.setMargins(left, top, right, bot);
t.setLayoutParams(params);
mLinearLayout.addView(t); 
```

**编辑：**

如果您在 attrs.xml 文件中定义了自己的样式，那么您必须制作自己的 Textview 并在构造函数中处理您想要的属性。它用于处理来自 XML 的属性。而对于java定义，你必须制作“set method”。

```
public class MyTextView extends TextView
{
   String _stringValue;

    public MyTextView(Context c)
    {
        this(c, null);
    }

    public MyTextView(Context c, AttributeSet attrs)
    {
        this(c, attrs, 0);
    }

    public MyTextView(Context c, AttributeSet attrs, int defStyle)
    {
            super(c, attrs, defStyle);
        TypedArray a = c.obtainStyledAttributes(attrs, R.styleable.MyStyleAble);
        _stringValue = a.getString(R.styleable.MyStyleAble_stringValue);
        a.recycle(); //don't forget this line! 
    }

    public void setStringValue(String s)
    {
        _stringValue = s;
    } 
} 
```

**编辑**

在这里使用 MyTextView 在代码中。只需使用标准构造函数创建它。

```
MyTextView t = new MyTextView(context); 
```

然后设置你的风格值。在我的示例中，它是字符串值。

```
t.setStringValue("My string text"); 
```

然后使用 layoutParams。

```
t.setLayoutParams(params); 
```

并将新创建的 TextView 添加到一些布局中。例如线性布局。

```
mLinearLayout.addView(t); 
```

我忘了说，只有当您需要在 XML 文件中设置属性时，您才必须定义可样式化的 int attrs.xml。然后你像这样使用它。

```
<my.package.name.MyTextView
   xmlns:custom="http://schemas.android.com/apk/res/my.package.name"
   custom:stringValue="some string text"
   //and also you can use standart android:... attributes
/> 
```

# database - 银行数据库设计问题

> ID：15740376
> 
> 赞同：5
> 
> 时间：2013-04-01T08:51:37.147
> 
> 标签：database, database-design, banking

我正在尝试为银行业务建立一个数据库，我为每个账户贷款、存款、支票账户以及支付方式支票、借记卡和现金创建了一个表。

我的问题是，**如果知道所有表之间的事务都是可能的，我应该如何处理表之间的事务？**

例如，客户可以使用借记卡取款，从支票账户转账到贷款或使用支票存款到支票。

我的第一个解决方案是为所有交易和基数（0...1 n）创建一个交易表，以便只有一种付款类型和一个帐户，所以我应该使用它还是只为每个关系创建一个交易表两张桌子之间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:19:31.930

如果“我为每个账户、贷款、存款、支票账户创建了一个表”意味着你有四个以上的表，那么你做的事情非常非常错误。您应该有一张客户表和一张交易表。交易是资金从一个账户转移到另一个账户，因此一个简单的交易表将包含字段 id、交易日期、贷方账户、借方账户、金额。在会计中，经常有涉及多个贷方和借方账户的交易，因此无法在上述简单交易方案中维护这些交易。

如果您想表示贷款，那么您可能还需要两张表：一张表包含所有贷款的原子详细信息（给定日期、贷款人账户、总金额、名义利率等），另一张表包含每笔贷款的预计还款额。

不需要更多表示存款或支票账户的表格：这些可以表示为账户，类型字段指定它们是哪种类型。

# c# - 在 MVC 4 中通过 Ajax 更新 WebGrid 和 DropDown

> ID：15740377
> 
> 赞同：2
> 
> 时间：2013-04-01T08:51:40.370
> 
> 标签：c#, asp.net-mvc, razor, asp.net-mvc-4, webgrid

我对 MVC 很陌生，刚刚遇到一个需要帮助的场景。我正在使用 MVC 4 在 ASP.NET、C#.NET 中创建一个网站。所以根据我的要求，我有两个 DropDowns`<select>`标记在我的`cshtml`页面。

```
1) selectUniversity
2) selectCollege 
```

我有一个名为的数据库表`College_table`，其字段是：

```
1) Univ_ID
2) Univ_Name
3) College_ID
4) College_Name
5) College_Address
6) College_Contact 
```

现在，在我`selectUniversity`的列表中，我列出了所有大学名称，并且`selectCollege`所有大学名称都属于`selectUniversity`下拉列表中选择的大学。并且 WebGrid 内容将根据上述任何下拉列表的选择而改变。

我的代码更改： **查看** Javascript：

```
<script type="text/javascript">
      function ajaxCallGetColleges() {
             var e = document.getElementById("selectUniversity");
             var strUniv = e.options[e.selectedIndex].value;
             $.ajax({
                  url: '@Url.Action("GetCollegesActionResult", "CollegeController")',
                  type: 'POST',
                  data: { 'data': strUniv },
                  success: function (ResponceObject) {
                       alert(ResponceObject);//Need to update this data into WebGrid and selectCollege dropdown.
                  }
             });
      }
      function ajaxCallGetCollegeDetail() {
             var e = document.getElementById("selectCollege");
             var strCollege = e.options[e.selectedIndex].value;
             $.ajax({
                  url: '@Url.Action("GetCollegeDetailActionResult", "CollegeController")',
                  type: 'POST',
                  data: { 'data': strCollege },
                  success: function (ResponceObject) {
                       alert(ResponceObject);//Need to update this data into WebGrid.
                  }
             });
      }
</script> 
```

CSHTML 代码：

```
<table>

        <tr>
            <td>
                <select id="selectUniversity" name="selectUniversity" onchange="ajaxCallGetColleges()">
                    @{
                        //Logic for adding University names as options to the dropdown dynamically
                     }
                </select>
            </td>

            <td>
                <select id="searchBy" name="searchBy" onchange="ajaxCall()">
                   <select id="selectUniversity" name="selectUniversity" onchange="ajaxCallGetCollegeDetail()">
                    @{
                        //Logic for adding college names as options to the dropdown dynamically
                     }
                </select>
            </td>
        </tr>

        <tr>
            <td colspan="2">
                <div id="MyGrid">
                    @{
                        WebGrid grid = new WebGrid(source: Model,
                                       defaultSort: "Name",
                                       rowsPerPage: 15);
                        grid.SortDirection = SortDirection.Ascending;
                    }

                    @grid.GetHtml(
    fillEmptyRows: false,
    mode: WebGridPagerModes.All,
    firstText: "<< First",
    previousText: "< Prev",
    nextText: "Next >",
    lastText: "Last >>",
     columns: new[] {
        grid.Column("Univ_ID",header: "Univ ID", canSort: false),
        grid.Column("Univ_Name",header: "Univ Name"),
        grid.Column("College_ID",header: "College ID", canSort: true),
        grid.Column("College_Name",header: "College Name"),
        grid.Column("College_Address", header: "College Address", canSort: true),
        grid.Column("College_Contact",header: "Contact"),
        grid.Column("", header:"Edit", format: (item) => Html.ActionLink("Edit", "Edit", new { univ_ID=item.Univ_ID })),
        grid.Column("", header:"Delete", format: (item) => Html.ActionLink("Delete", "Delete", new { univ_ID=item.Univ_ID}, new { onclick="return confirm('Are you sure?');"}))
    })
                </div>
            </td>
        </tr>
    </table> 
```

**控制器** C#.NET 代码：

```
public ActionResult SearchByBranchStatus(string data)
        {

            List<CollegesDetail> colleges= _collegeService.GetCollegesDetail();

            var RespObject = colleges.Where(c => c.Name == data);
            return View(RespObject);
        }
 public ActionResult GetCollegeDetailActionResult(string data)
        {
            List<CollegeDetail> colleges= _collegeService.GetCollegeDetail();

            var RespObject = colleges.Where(c => c.Name == data);
            return View(RespObject);
        } 
```

我也浏览了许多 SO 和 MSDN 站点，但没有找到任何帮助。请为我提供任何参考或想法来解决这个问题。我知道与我的问题有关，在许多论坛上提出了很多问题，但我没有得到它们。可能是它最简单的一个，但是当我最近开始研究 MVC 4 时，我对 MVC 4 没有很好的了解。我急切地等待答案。任何帮助将不胜感激。提前致谢..

**注意：-**目前我指的是[MSDN 杂志](http://msdn.microsoft.com/en-us/magazine/hh288075.aspx)

**更新：-** 我已经部分回答了我的问题，即如何通过 MVC 4 中的 Ajax 在 DropDown 选择更改上更新 WebGrid

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:31:10.940

Finlay 我已经通过使用局部视图解决了这个问题。现在我填写它非常简单。下面提到了我如何实现的步骤：

1.  我创建了两个视图（`MainView`和 _ `MainView`）
2.  _`MainView`是一个部分视图，我把完整的`WebGrid`和`WebGrid`我绑定的`Model`.
3.  现在在`MainView`我将部分视图（_ `MainView`）放入一个 div 标签并用`Model`（`@Html.Partial("_MainView", Model)`）调用部分视图
4.  在 Ajax 调用中，我`ActionResult`按照上述问题中的描述进行了调用，在成功时，我使用返回的 Partial 视图更新了 div 标签
5.  从而`ActionResult`不是返回完整视图，我返回了部分视图以更新`WebGrid`唯一（`return PartialView("_MainView", responceObject);`）。

我有一个正在运行的示例应用程序。如果有人发现这个答案有任何困难，那么可以问我。我可以在这里分享完整的工作代码。尤其感谢 Karthik 回答我的问题和我的所有评论 :)

# c - 根据整数值对指针数组进行排序

> ID：15740379
> 
> 赞同：1
> 
> 时间：2013-04-01T08:51:53.723
> 
> 标签：c

我把这个当作家庭作业。使用合并排序，我正在尝试对整数数组进行排序，新的指针数组将以正确的顺序保存指向每个整数的指针，因此如果 arr = {7,2,5,9,4} 比指针数组将是 {ptr to 2, ptr to 4, ptr to 5, ptr to 7, ptr to 9}

所以，起初我需要编写如下函数：

```
int** pointerSort(int* arr, int size); 
```

我这样做了：

```
int** pointerSort(int* arr, int size) {
int **res1, **res2, **res;
if (size <= 1) {
    if (size == 0)
        return NULL;

    res = (int **)malloc(sizeof(int) * size);
    *res = arr;

    return res;
}

res1 = pointerSort(arr, size/2);
res2 = pointerSort(arr + size/2, size - size/2);

res = (int **)malloc(sizeof(int **) * size);
merge(res1,size/2,res2, size - size/2,res);

return res;
}

void merge (int **arr1, int size1, int **arr2, int size2, int **res) {

int i1,i2, resI;
i1 = i2 = resI = 0;

while (i1 < size1 && i2 < size2) {
    if (**(arr1 + i1) <= **(arr2 + i2)){
        *(res + resI++) = *(arr1 + i1++);
    }
    else {
        *(res + resI++) = *(arr2 + i2++);
    }
}
while (i1 < size1) {
    *(res + resI++) = *(arr1 + i1++);
}

while (i2 < size2) {
    *(res + resI++) = *(arr2 + i2++);
}
} 
```

但之后我需要将其更改为

```
void pointerSort2(int* arr, int size, int*** pointers); 
```

这就是我卡住的地方。这是我到目前为止所得到的，它似乎不起作用

```
void pointerSort2(int* arr, int size, int*** pointers) {
    if (size <= 1) {
        if (size == 0)
            return;

        pointers = (int ***)malloc(size * sizeof(int ***));
        *pointers = &arr;

        return;
    }
    pointerSort2(arr, size/2,pointers);
    pointerSort2(arr + size/2, size - size/2,pointers);

    int ***res = (int ***)malloc(sizeof(int ***) * size);
    merge2(pointers,size/2,pointers, size - size/2,res);

    pointers = res;
}

void merge2 (int ***arr1, int size1, int ***arr2, int size2, int ***res) {
    int i1,i2, resI;
    i1 = i2 = resI = 0;
    int val;
    int val2;
    int b;
    while (i1 < size1 && i2 < size2) {
            int val = ***(arr1 + i1);
    int val2 = ***(arr2 + i2);
    int b = ***(arr1 + i1) <= ***(arr2 + i2);
        if (b) {
            *(res + resI++) = *(arr1 + i1++);
        }
        else {
            *(res + resI++) = *(arr2 + i2++);
        }
    }
    while (i1 < size1) {
        *(res + resI++) = *(arr1 + i1++);
    }

    while (i2 < size2) {
        *(res + resI++) = *(arr2 + i2++);
    }
} 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:19:13.950

首先，关于第一个功能，我有 2 条评论`pointerSort()`

1）替换res的分配

```
res = (int **)malloc(sizeof(int) * size);
res = (int **)malloc(sizeof(int**) * size); 
```

只有

```
res = (int **)malloc(sizeof(int *) * size); 
```

2）在合并之后添加，`free`否则你会得到内存泄漏`res1``res2`

```
res = (int **)malloc(sizeof(int **) * size);
merge(res1,size/2,res2, size - size/2,res);
free(res1);
free(res2); 
```

关于您的功能`pointerSort2`和`merge2`：这两个功能都有很多代码错误。在新代码修复后在这里。

注意：玩多级指针有些复杂。使用时要小心

```
void pointerSort2(int* arr, int size, int*** pointers) {
    int **tmp;
    int **pointers1, **pointers2;
    if (size <= 1) {
        if (size == 0)
            return;

        tmp = (int **)malloc(size * sizeof(int **));
        *tmp = arr;
        *pointers = tmp;
        return;
    }
    pointerSort2(arr, size/2,&pointers1);
    pointerSort2(arr + size/2, size - size/2,&pointers2);

    merge2(pointers1,size/2,pointers2, size - size/2,&tmp);
    free(pointers1);
    free(pointers2);    
    *pointers = tmp;
}

void merge2 (int **arr1, int size1, int **arr2, int size2, int ***res) {
    int i1,i2, resI;
    i1 = i2 = resI = 0;
    int val;
    int val2;
    int b;
    int **tmp = (int **)malloc((size1+size2) * sizeof(int **));
    *res = tmp;
    while (i1 < size1 && i2 < size2) {
            int val = **(arr1 + i1);
    int val2 = **(arr2 + i2);
    int b = **(arr1 + i1) <= **(arr2 + i2);
        if (b) {
            *(tmp + resI++) = *(arr1 + i1++);
        }
        else {
            *(tmp + resI++) = *(arr2 + i2++);
        }
    }
    while (i1 < size1) {
        *(tmp + resI++) = *(arr1 + i1++);
    }

    while (i2 < size2) {
        *(tmp + resI++) = *(arr2 + i2++);
    }
} 
```

`pointerSort2`的调用`main`应该是

```
int arr[5] = {2, 5, 3, 7, 6}
int **res;
pointerSort2(arr, 5, &res); 
```

# iphone - 从 tableView 和 coredata 中删除一行

> ID：15740383
> 
> 赞同：1
> 
> 时间：2013-04-01T08:52:28.857
> 
> 标签：iphone, ios, objective-c, uitableview

我正在从 coredata 中检索数据并将其显示在 tableview 中。如果用户单击一行，它将导航到另一个视图（例如视图 2）。

现在，我想从 tableview 以及 coredata 中删除一行。我使用了一个代码，可以删除该行。但是，当我去查看 2 并回来时，记录又回到了那里。（它已从 coredata 中删除，但该行及其数据仍然存在，直到我重新加载视图）。

这是我使用的代码。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) 
    {
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];
        NSError *error;
        if (![context save:&error]) 
        {
            UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"App" message:@"Sorry the Item Cannot be deleted" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alertView show];
            [alertView release];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:00:49.220

你有没有试过`reloadData`一次删除，

```
if (editingStyle == UITableViewCellEditingStyleDelete) 
  {
   NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
   [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];
   NSError *error;
   if (![context save:&error]) 
     {
        UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Xpense Tracker" message:@"Sorry the Item Cannot be deleted" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alertView show];
        alertView release];
     }
   [YOURTABLEVIEW reloadData];
  } 
```

**编辑：**它现在工作正常。试试这个方法

```
Step 1:

@interface ViewController : UIViewController <UITableViewDataSource,UITableViewDelegate,NSFetchedResultsControllerDelegate>

Step 2:

update your 
-(NSFetchedResultsController *)fetchedResultsController{
self.fetchedResultsController.delegate = self; // with this
}

step 3:

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        NSManagedObjectContext * context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];
        NSError * error;
        if (![context save:&error])
        {
            NSLog(@"Deletion Error");
        }
    }

}

Step 4:

include NSFetchedResultsControllerDelegate method 
- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [YOURTABLEVIEW reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:09:01.660

`NSManagedObjectContext`删除后需要保存。

```
 - (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
    {
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        [context deleteObject:[self.fetchedResultsController objectAtIndexPath:indexPath]];
        NSError *error;
        [context save:&error] //add this line

        if (![context save:&error]) {
            UIAlertView *alertView = [[UIAlertView alloc]initWithTitle:@"Xpense Tracker" message:@"Sorry the Item Cannot be deleted" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
            [alertView show];
            [alertView release];

        }
    }

    } 
```

检查这个..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:00:29.157

根据您的要求更改您的表格和详细信息关系

```
- (void)tableView:(UITableView *)aTableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle 
forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {

        NSManagedObject *selectedOrder = [selectedOrderArray objectAtIndex:indexPath.row];
        Order *orderInstance = (Order *) selectedOrder;
        numberOfRows = [[orderInstance.detailRelation allObjects]count];

        NSString *deletedItem;

        deletedItem = (orderInstance.optionName == nil) ? [[NSString alloc]initWithFormat:@"%@ deleted successfully",orderInstance.menuName] :  [[NSString alloc]initWithFormat:@"%@ %@ deleted successfully",orderInstance.optionName , orderInstance.menuName];

        [self.managedObjectContext deleteObject:selectedOrder];        
        if([self performSaveInMemoryObjectContext:self.managedObjectContext]){

           // [self.tableview reloadData];
            [common ShowAlert:deletedItem andMessage:@""];
            [selectedOrderArray removeObjectAtIndex:indexPath.row];

        }
        [self fetchRecords];
     //   NSLog(@"count... %d",[selectedOrderArray count]);
        [tableview reloadData];

    }
} 
```

# php - 获取PHP中最后插入行的ID

> ID：15740384
> 
> 赞同：1
> 
> 时间：2013-04-01T08:52:29.577
> 
> 标签：php, mysql

我使用 PHP 编写服务器端脚本，使用 mysql 服务器编写数据库。如果我使用`mysql_insert_id()`，那么它会给出“0”并且使用`LAST_INSERT_ID()`会导致错误“对象返回空描述”。当我在 Objective-C 的客户端调试时看到这个错误。我的表的 id 列是自动生成的。我没有明确传递 id。

下面是 PHP 代码：

```
 // Connect to our database
    $db = Frapi_Database::getInstance();

    $sql = "INSERT INTO userTrip 
        (userId, fromLat, fromLon, fromLoc, fromPOI,
        toLat, toLon, toLoc, toPOI,
        tripFinished, isMatched, departureTime, createdAt)
        values 
        (".$userId.",".$fromLat.",".$fromLon.", GeomFromText('POINT($fromLat $fromLon)')".",'".$fromPOI."',".$toLat.","
            .$toLon.", GeomFromText('POINT($toLat $toLon)')".",'".$toPOI."',0,0,'".
            $departureTime."','".date('Y-m-d H:i:s')."')";

    $stmt = $db->prepare($sql);        

    if (!$stmt->execute())
        throw new Frapi_Error('ERROR_INSERTING_RECORD');

    $lastId = LAST_INSERT_ID();
    $this->data['tripId'] = $lastId;
    $db = null; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T08:57:12.250

[Frapi 数据库](https://github.com/frapi/frapi/blob/master/src/frapi/library/Frapi/Database.php)从[PDO](http://php.net/pdo)扩展，所以你会使用这个：

```
$lastId = $db->lastInsertId(); 
```

也可以看看：[`PDO::lastInsertId()`](http://www.php.net/manual/en/pdo.lastinsertid.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:57:21.470

试试这个（如果你使用`mysqli`）：

```
 $db->insert_id; 
```

或者（如果您使用`PDO`）：

```
 $db->lastInsertId(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T08:55:39.310

你在找这个吗？

获取最后插入的 id

```
mysql_insert_id(); 
```

[mysql_insert_id](http://php.net/manual/en/function.mysql-insert-id.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T08:56:20.700

尝试

```
$id = mysql_insert_id(); 
```

它会为你工作，试试这个链接[mysql_insert_id](http://dev.mysql.com/doc/apis-php/en/apis-php-function.mysql-insert-id.html) 和[这个](http://www.nusphere.com/kb/phpmanual/function.mysql-insert-id.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-28T07:02:28.053

如果您的表具有像 UserID、Emp_ID、.. 这样的 AUTO INCREMENT 列，那么您可以使用此查询来获取最后插入的记录

```
SELECT * FROM table_name where UserID=(select MAX(UserID)from table_name) 
```

在 PHP 代码中：

```
$con = mysqli_connect('localhost', 'userid', 'password', 'database_name');
if (!$con) {
     die('Could not connect: ' . mysqli_error($con));
}
$sql = "SELECT * FROM table_name where UserID=(select MAX(UserID)from table_name)";
$result = mysqli_query($con, $sql); 
```

*然后您可以使用获取的数据作为您的要求*

# git - git 子模块工作流程可以与版本化包共存吗？

> ID：15740393
> 
> 赞同：1
> 
> 时间：2013-04-01T08:53:35.440
> 
> 标签：git, package, version, git-submodules

谁能解释一下如何将以下系统引入 git 之外，即通过分支和子模块使用版本号而不是 git 的上下文：

假设我们在**项目**git repo 中有一些工具。资产位于**资产**仓库中，并且由于数据（组织、命名、数据字段数量等）随时间而变化，而且工具也必须更新以应对这些变化，我们希望**资产**仓库成为**项目**回购的子模块。这让我们可以做一些事情，比如分支**项目**、签出旧版本，并让资产及时回退以匹配，因此工具和数据随着时间的推移保持同步。例如，这让我们可以检查一周前的所有内容。

这也意味着我们可以有一个疯狂的想法来重塑数据以在特定工具中实现新功能，我们可以分支**项目**，然后分支**资产**，在**项目**中的新分支中，我们可以检查**资产**中的新分支，并且有效地分开处理所有事情。如果有真正的工作，我们可以直接跳回**项目**的主人，资产更新跟风。如果疯狂的新数据结构成功了，我们可以分支（或重用第一个分支）并使其他工具与新数据保持一致，当一切正常时，我们可以将所有内容合并回来，而不会中断任何人（提供的接口没变）。这似乎是一个不错的工作流程，它将资产与工具分开，因此各个部门可以使用它们，而无需大量甚至无法在他们的系统上运行的工具仓库，而且我可以在没有大量工具的情况下删除这些工具如果我只想处理一些与笔记本电脑上的资产分开的逻辑。

使用包和版本号是否有任何接近这种复杂性和灵活性的东西？我从未使用过它们，但我一直觉得如果我想将工具从 git 中分离出来以便在其他地方分发，同时保持相互依赖关系，我就需要这样做。人们如何解析 git 和包版本号？我已经研究了一段时间，但我仍然对这一切感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:45:53.073

包和版本号的概念与 git 完全正交：
Git 版本文本文件。*如果这些文本文件代表一个包，并且在某处有一个声明*
版本 的元素，那完全取决于 git repo 的用户。Git 不知道这些概念。

 *仅从 git 推导出的最接近的版本号是`git describe`（如“ [Deriving application build version from `git describe`- 如何获得相对简单的字符串？](https://stackoverflow.com/questions/3300746/deriving-application-build-version-from-git-describe-how-to-get-a-relatively) ”）。
但这不会做更多的事情，并且您可能需要的任何版本依赖机制都必须由您管理。[git 子模块](https://stackoverflow.com/questions/1979167/git-submodule-update)
所做的只是为每个子模块记录一个固定的 SHA1。*

# javascript - 使用 D3 创建折线图

> ID：15740399
> 
> 赞同：0
> 
> 时间：2013-04-01T08:54:01.127
> 
> 标签：javascript, ruby-on-rails-3, d3.js

我是 D3 的新手。我只是想画一个折线图。为此我只是放了静态值，它工作正常，但是当我从服务器 db 图中获取数据时没有得到正确的数据。我得到的问题是 x 和 y 轴值正在获取。但没有得到折线图。这是代码

```
// Line chart creation....................................................

  var deviceTime = 0;
  var margin = { top: 20, right: 80, bottom: 30, left: 50 };

var da = '<%=@display.to_json(:only => [:DeviceTime, :Speed])%>'

var margin = { top: 20, right: 80, bottom: 30, left: 50 };
var dataset=JSON.parse(da.replace(/&quot;/g,'"'));

//test code TODO :need to move somewhere else
var data = [];
for (var vAlue in dataset[0]) {
    var tempData = d3.values(dataset[0][vAlue]);
    data.push(tempData[1]);
}
// test end

var yExtents = d3.extent(d3.merge(dataset), function (d) { return d.Speed; });
var xExtents = d3.extent(d3.merge(dataset), function (d) { return d.DeviceTime; });

//alert("xevents[0]-------"+xExtents[0] "xevents[1]-------"+xExtents[1]);
var w = 900;
var h = 400;
var padding = 30;

deviceTime = xExtents[1];

//Create scale functions

var xScale = d3.scale.linear()
.domain([xExtents[0], xExtents[1]])
.range([padding, w - padding * 2]);

var yScale = d3.scale.linear()
.domain([0, yExtents[1]])
//.domain([0, 160])
.range([h - padding, padding]);

//Define X axis
var xAxis = d3.svg.axis()
.scale(xScale)
.orient("bottom")
.ticks(10);

//Define Y axis
var yAxis = d3.svg.axis()
.scale(yScale)
.orient("left")
.ticks(10);

///////////////// need to remove

var line = d3.svg.line()
.x(function (d, i) { return xScale(i); })
.y(function (d, i) { return yScale(d); });

//Create SVG element

var svg = d3.select("#bar-demo")
.append("svg")
.attr("width", w + margin.left + margin.right)
.attr("height", h + margin.top + margin.bottom)
.append("g")
.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

//Create X axis
var hh = svg.append("g")
.attr("class", "axis")
.attr("transform", "translate(0," + (h - padding) + ")")
.call(xAxis);

//Create Y axis
svg.append("g")
.attr("class", "axis")
.attr("transform", "translate(" + padding + ",0)")
.call(yAxis);

var path = svg.append("g")
//.attr("clip-path", "url(#clip)")
.append("path")
.data([data])
.attr("class", "line")
.attr("transform", "translate(" + 102 + ",0)")
.attr("d", line);

svg.append("text")
        .attr("transform", "rotate(-90)")
        .attr("y", 0-margin.left+10)
        .attr("x",0-h/2)
        .attr("dy", "1em")
            .style("text-anchor", "middle")
        .text("Speed km/h");

svg.append("text")
        .attr("y", h)
        .attr("x", h)
        .attr("dy", "1em")
        .style("text-anchor", "middle")
        .text("Time Stamp"); 
```

# sql-server - CFML 即时从数据库中解密字符串

> ID：15740402
> 
> 赞同：0
> 
> 时间：2013-04-01T08:54:04.183
> 
> 标签：sql-server, encryption, coldfusion, cfml

我有以下脚本试图从我的数据库中选择一些项目并解密加密的项目，问题是加密密钥是唯一的，`company_id`我在表中进行了更改：

```
<cfset request.ek = "password">
<!-- <cfset encKey = encrypt(request.ek, company_id)> -->
<!-- <cfset decrypted = decrypt(urldecode(arguments.mystring), encKey)> -->

<cfquery name="header" datasource="MyDB">
    SELECT TOP 10
        ID,
        company_id,
        encString
    FROM 
        dbo.[TableName];
</cfquery>

<cfoutput>ID|company_id|encString<br></cfoutput>

<cfloop query="header">
    <cfoutput>#ID#|#company_id#|#decrypt(urldecode(encString, encrypt(request.eq, company_id)))#<br></cfoutput>
</cfloop> 
```

我收到此错误：

```
Parameter validation error for the DECRYPT function.
The function accepts 2 to 6 parameters. 
```

编辑。感谢 Scott Stroz，我真的把括号弄乱了。我的代码应该是：

```
<cfset request.ek = "password">
<!-- <cfset encKey = encrypt(request.ek, company_id)> -->
<!-- <cfset decrypted = decrypt(urldecode(arguments.mystring), encKey)> -->

<cfquery name="header" datasource="MyDB">
    SELECT TOP 10
        ID,
        company_id,
        encString
    FROM 
        dbo.[TableName];
</cfquery>

<cfoutput>ID|company_id|encString<br></cfoutput>

<cfloop query="header">
    <cfoutput>#ID#|#company_id#|#decrypt(urldecode(encString), encrypt(request.eq, company_id))#<br></cfoutput>
</cfloop> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:25:46.567

您在代码示例末尾附近对 decrypt() 的调用只有 1 个参数。看起来你的括号可能有问题。

看起来像：

```
decrypt(urldecode(encString, encrypt(request.eq, company_id))) 
```

可能需要：

```
decrypt(urldecode(encString), encrypt(request.eq, company_id)) 
```

假设

1.  您在数据库中加密的字符串然后在插入之前进行了 url 编码。
2.  您使用密钥加密字符串（使用密钥`request.eq`加密`company_id`）。

# php - 在 PHP 中检查 Cron 服务

> ID：15740410
> 
> 赞同：2
> 
> 时间：2013-04-01T08:54:49.667
> 
> 标签：php, cron

我怎么知道 cron 服务是否正在使用 PHP 脚本运行？

我想要一个 PHP 脚本来检查 cron 服务是否正在运行，否则它将通过电子邮件通知管理员，以便他们可以立即对其进行操作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:19:06.060

根据您的操作系统，有三种方法（所有这些方法都会造成相当大的性能损失，但您的应用程序可能可以接受）

*   检查进程列表 - 您可以执行控制台命令来检查正在运行的进程列表。我认为这在 Windows 上是不可能的，但在 linux 上没有问题。额外注意过滤那里使用的任何和所有变量，因为运行控制台命令可能会带来很大的安全风险。

*   运行文件 - 在脚本开始时创建一个文件并检查它是否存在。我认为这是大多数（甚至非 PHP）进程检查它们是否正在运行的方式。性能损失和安全问题应该是最小的，你必须注意文件是否被正确删除，即使在出现错误的情况下也是如此。

*   存储中的信息 - 与文件解决方案一样，您可以将信息添加到数据库或其他存储系统中。性能损失比文件 IO 略大，但如果您的脚本已经有一个数据库连接，那么这可能是值得的。在那里为您的当前进程存储更多信息或添加日志记录也更容易。

# apache-flex - Flexmojos，包括标签和通配符

> ID：15740412
> 
> 赞同：0
> 
> 时间：2013-04-01T08:54:58.127
> 
> 标签：apache-flex, flexmojos

我知道我可以在编译时在我的 SWF 中链接一些带有 flexmojos`includes`标签的类：

```
<includes>
    <include>my.package.MyClass</include>
</includes> 
```

但是有没有办法直接用通配符链接许多类？

我试过 ：

```
<includes>
    <include>my.package.**</include>
    <include>my.package.*</include>
</includes> 
```

但我收到此错误：

> [错误] 无法解析包含的类：my.package.*。

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:52:34.257

我通过创建一个 SWC 文件`compile-swc`目标解决了我的问题，并将这个 SWC 文件作为`internal`范围的依赖项包含在内。

现在，它可以工作了，所有文件在编译时都包含在我的 SWF 中。

# validation - 如何？带有淘汰赛 js 验证

> ID：15740415
> 
> 赞同：1
> 
> 时间：2013-04-01T08:55:02.957
> 
> 标签：validation, knockout.js, required

我已经开始使用带有[http://ericmbarnard.github.com/Knockout-Validation/](http://ericmbarnard.github.com/Knockout-Validation/)验证引擎的淘汰赛 js 验证，但我不清楚如何执行以下操作：

1）假设我想根据条件设置所需的特定字段。我怎么做？例如
this.Username = ko.observable().extend({ required: true }); // 仅当 this.UserType = 2 等时才使 required = true...

2) 我在正在验证的字段旁边触发了验证消息。我只想在该字段旁边显示一个“*”，并在页面底部的验证摘要字段中显示错误消息。所有验证错误都应显示在那里。怎么做？

3) 在表单验证通过之前，要避免表单提交。现在，我收到验证错误消息，但表单仍然被提交。所以我想我做错了什么。以下是我的代码：

```
 $(document).ready(function () {
var model;

// enable validation
ko.validation.init();

$.ajax({
    type: "POST",
    url: SERVER_PATH + '/jqueryservice/DataAccessService.asmx/GetData',
    async: false,
    data: "{ }",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (result, status) {
        model = new ViewModel(result);
        ko.applyBindings(model);
    },
    error: GetDataError

});

$('#submit').click(function () {
    var data = ko.toJS(model);
    delete data.Vehicles;
    delete data.CopyWeeks;
    delete data.SetupTotal;
    delete data.CloseTotal;

    var mappedItems = ko.utils.arrayMap(data.DailyItemList, function (item) {
        delete item.Add;
        delete item.Delete;
        return item;
    });
    data.DailyItemList = mappedItems;

    $.ajax({
        type: "POST",
        url: SERVER_PATH + '/jqueryservice/DataAccessService.asmx/ProcessData',
        async: false,
        data: ko.toJSON(data),
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (result, stat) {
            alert(success);
            return false;
        },
        error: function (e) {
            alert(e);
        }
    });
}); 
```

});

在此先感谢您的帮助。

编辑：我已经看到我可以按如下方式设置验证配置：ko.validation.configure({ decorateElement : false, errorMessageClass: 'errorMsg', insertMessages : false, parseInputAttributes : true, messageTemplate: 'sErrorMsg' }); ko.validation.init();

但我不确定如何定义我的错误消息模板'sErrorMsg'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T10:25:05.730

> 1）。假设我想根据条件设置所需的特定字段....

对于这个 ko 验证包含一个[本地规则](https://github.com/ericmbarnard/Knockout-Validation/wiki/Native-Rules)。您可以执行以下操作：

```
var myObj = ko.observable().extend({ required: { 
            onlyIf: function() { 
                      //here you can place your codition and can return.. 
                      //true or false accordingly
                    } 
            }}); 
```

> 2）。我在正在验证的字段旁边触发了验证消息..

为此，您应该检查[Validation Binding](https://github.com/ericmbarnard/Knockout-Validation/wiki/Validation-Bindings)。在这个validationOptions 中可以为你完成这项工作。

**更新**：这是一个小提琴，它`messageTemplate`根据您的要求演示了绑定的使用。

[http://jsbin.com/ocizes/3/edit](http://jsbin.com/ocizes/3/edit)

> 3）。在通过表单验证之前要避免表单提交......

为此，您可以使用 use `group`，例如：

```
 yourViewModel.Errors = ko.validation.group(yourViewModel); 
```

现在*Errors*属性包含了你的 observables 的错误信息，如果有的话。因此，在提交表单之前，您可以检查以下内容：

```
 if(yourViewModel.Errors().length == 0) {
         //submit the form 
      }
      else {
         yourViewModel.Errors.showAllMessages();

         //this line shows all the errors if validation fails, 
         //but you can omit this.
      } 
```

# java - 在 XWPFDocument 中使用类路径中的文件时出错

> ID：15740417
> 
> 赞同：1
> 
> 时间：2013-04-01T08:55:23.243
> 
> 标签：java

当我尝试使用 src/Default.docx 中的 docx 文件时，它不会让我将它用于 XWPFDocument。docx 文件甚至是我构建路径的一部分。我正在使用 POI API，并且正确安装了所有外部 jar。（如果我使用桌面路径而不是类路径，则此方法有效）

```
InputStream file = getClass().getClassLoader().getResourceAsStream("Default.docx");
XWPFDocument document = new XWPFDocument(file); 
```

给我：

```
java.lang.NullPointerException: in is null
at java.util.zip.ZipInputStream.<init>(ZipInputStream.java:64)
at org.apache.poi.openxml4j.opc.ZipPackage.<init>(ZipPackage.java:83)
at org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:267)
at org.apache.poi.util.PackageHelper.open(PackageHelper.java:39)
at org.apache.poi.xwpf.usermodel.XWPFDocument.<init>(XWPFDocument.java:120)
at thompsons.printer.Format.<init>(Format.java:15)
at thompsons.printer.Printer.print(Printer.java:15)
at thompsons.ui.MainPanel$3.actionPerformed(MainPanel.java:238)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
at java.awt.Component.processMouseEvent(Component.java:6382)
at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
at java.awt.Component.processEvent(Component.java:6147)
at java.awt.Container.processEvent(Container.java:2083)
at java.awt.Component.dispatchEventImpl(Component.java:4744)
at java.awt.Container.dispatchEventImpl(Container.java:2141)
at java.awt.Component.dispatchEvent(Component.java:4572)
at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
at java.awt.Container.dispatchEventImpl(Container.java:2127)
at java.awt.Window.dispatchEventImpl(Window.java:2489)
at java.awt.Component.dispatchEvent(Component.java:4572)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:710)
at java.awt.EventQueue.access$400(EventQueue.java:82)
at java.awt.EventQueue$2.run(EventQueue.java:669)
at java.awt.EventQueue$2.run(EventQueue.java:667)
at java.security.AccessController.doPrivileged(Native Method) 
```

# php - 如何在不更改正确字符集的情况下使用 php 更改 mysql 数据库的字符集？

> ID：15740421
> 
> 赞同：0
> 
> 时间：2013-04-01T08:55:44.607
> 
> 标签：php, mysql, utf-8, iconv, iso-8859-1

我目前正在使用 MySQL 数据库，之前维护数据库的人已将字符集从 ISO-8859-1 更改为 UTF-8。现在有一个问题，每个 ä 都变成 Ã¤。现在我编写了代码来更改整个数据库中的所有记录。但显然有些词是正确写的。因此，例如，您有一个词 like`PÃ¶ytÃ¤krono`和一个词 like `Sisäänkirjautuminen`。如果我使用`iconv('UTF-8', 'ISO-8859-1', PÃ¶ytÃ¤krono)`它会给予`Pöytäkrono`，但当我使用`iconv('UTF-8', 'ISO-8859-1', Sisäänkirjautuminen)`它会给予`S`。因为数据库很大，我想自动完成，但我不希望正确拼写/书写的单词只更改错误的单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:36:24.477

您可以像这样更改数据库存储编码，它将在数据库以 UTF-8*存储*字符串时起作用。这本身不会给你带来任何东西。

但也需要改变的事情：

*   文本编辑器编码需要设置为 UTF-8。直接在源代码中的 PHP 字符串具有您的文本编辑器已设置的编码。

*   数据库<->php*传输*编码，它可能甚至不存在于您的代码中，因为它默认为 ISO-8859-1。对于 UTF-8，您需要`mysql_set_charset("utf8")`在进行查询之前显式调用。

*   网站编码声明，也默认为 ISO-8859-1。您需要显式调用`header("Content-Type: text/html; charset=UTF-8")`或配置例如 apache 以自动执行此操作。

# python - 带有 xml.etree.ElementTree 的 XML 文件的标头

> ID：15740423
> 
> 赞同：2
> 
> 时间：2013-04-01T08:56:00.967
> 
> 标签：python, xml, python-3.x, elementtree

使用该模块，`xml.etree.ElementTree`我几乎可以随心所欲地创建一个 XML 文件，除了最重要的部分（在我的例子中）：标题。

我找不到真正的解决方案，我的标题是一个常量字符串，我应该把它放在`<?xml version="1.0"?>`第一个 xml 元素之间；有什么干净的解决方案吗？

* * *

我对标题的意思是它有时称为 DTD（文档类型定义）

例子：

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN"
 "http://www.w3.org/TR/2000/CR-SVG-20001102/DTD/svg-20001102.dtd">

<svg>
  ....
</svg> 
```

我需要写

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20001102//EN"
     "http://www.w3.org/TR/2000/CR-SVG-20001102/DTD/svg-20001102.dtd"> 
```

文件中的一部分。

# java - 如果用户计算机上未安装 Java，如何在 JAR 文件中包含 JVM？

> ID：15740424
> 
> 赞同：3
> 
> 时间：2013-04-01T08:56:04.960
> 
> 标签：java, jar, include, jvm

也许这个问题听起来有点奇怪......我想分发我的 Java 应用程序。我知道如何生成 jar 文件，但它只包括我的类。如果用户没有在其计算机上安装 java 怎么办？

所以我想知道的是如何在我的 JAR 文件中包含 JVM。或者找到等效的正确方法。我对此几乎一无所获，所以我可能问错了问题...

非常感谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T08:59:10.027

您不能在 JAR 文件中包含 JVM。但是，您可以将 JRE 放在 JAR 文件旁边的发行版中 - 假设您知道发行版的目标平台（操作系统、处理器）。关于如何做到这一点，你可以[在这里](http://www.oracle.com/technetwork/java/javase/jrereadme-182762.html)阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T08:57:00.707

您对客户端计算机体系结构一无所知，您无法为所有类型的计算机提供通用 JVM（这取决于操作系统和处理器）。

这是不可能的，您可以轻松分发应用程序，但不能分发虚拟机本身。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:01:38.823

您可以使用一些应用程序打包程序，例如[Launch4j](http://launch4j.sourceforge.net/)，其中包括对主机上已安装 Java 的测试，如果需要，将用户转发到 Java 下载/安装页面。

[自述](http://www.oracle.com/technetwork/java/javase/jre-7-readme-430162.html)文件涵盖了您的用例。您可以并且被允许沿着您的应用程序 (jar) 分发 Java 运行时。如何根据操作系统启动您的应用程序是一个问题。

# string - 组合字符串

> ID：15740427
> 
> 赞同：0
> 
> 时间：2013-04-01T08:56:16.157
> 
> 标签：string, file-io

我正在尝试组合字符串来输入文本文件。我的代码如下所示：

```
`#include <iostream>
#include <sstream>
#include <fstream>
#include <string>

using namespace std;

int main(){
int year;
string line;
string fileName;

for (int i=1880; i<2012; i++){
    stringstream ss;
    ss << year;

fileName = string("yob") + string(year) + string(".txt");

ifstream ifile(fileName.c_str());
getline(ifile,line);
cout << line << endl;
ifile.close();
}

}` 
```

文本文件看起来像“yob1880.txt”<--这是第一个文本文件，它一直到“yob2011.txt”。我想一个一个地输入文本文件，但是结合这三种字符串类型不起作用它给我一个错误，说从 int 到 const char* 的转换无效。

对这个问题有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:02:34.050

您应该从字符串流中获取它。你快到了，但这是你应该做的：

```
#include <iostream>
#include <sstream>
#include <fstream>
#include <string>

using namespace std;

int main(){
int year;
string line;
string fileName;

for (int i=1880; i<2012; i++){
    year = i; //I'm assuming this is what you meant to use "year" for
    stringstream ss;
    ss << year; //add int to stringstream

string yearString = ss.str(); //get string from stringstream

fileName = string("yob") + yearString + string(".txt");

ifstream ifile(fileName.c_str());
getline(ifile,line);
cout << line << endl;
ifile.close();
}

} 
```

# c# - 获得价值并将价值赋予组合框

> ID：15740430
> 
> 赞同：0
> 
> 时间：2013-04-01T08:56:20.363
> 
> 标签：c#, winforms, combobox

我是winforms的新手，我正在使用组合框。我喜欢学习如何从数据库加载到控件（组合框）以及如何将值从控件（组合框）保存到数据库字段。

下面我需要一些有关从 Combobox 获取过程并将/选择值放入组合框的帮助...但不知道该怎么做...

下面我获取列表中的所有行并绑定到组合框。这很好用，但喜欢做一些我正在努力的动作。

有人可以建议如何执行这些操作吗？

1.  我想在组合框列表的顶部“添加”一个空值，这样他们也可以在组合框列表中选择一个空值。

2.  从 DB 到 Control 时如何在组合框中选择一个值。我正在这样做，comboboxAccount.SeletedText = _account.Number，但它没有选择。

3.  现在它在组合框中显示“数字”，但我喜欢显示数字+“-”描述。这该怎么做？现在它显示例如 4000 但我喜欢显示“4000 - Description1”

4.  我喜欢将 Account.Id 存储到数据库中而不是 Account.Number 中，但是我该怎么做，因为组合框显示的是数字……所以 SelectedText 不是我想要的。

代码：

```
public class Account
{
    public Int32 Id { get; set; }             e.g. 1
    public string Number{ get; set; }         e.g. 4000 (alpha-numeric)
    public string Description1 { get; set; }  e.g. Customer
    public string Description2 {get; set;}    e.g. VAT account
    public string Language {get; set;}        e.g. EN 
}

  //returns all rows
  IList<Account> _account = new List<Account>(Account_repository.GetAll());
  comboboxAccount.DataSource = account;
  comboboxAccount.DisplayMember = "Number";
  comboboxAccount.Add(??); (see point 1)

  //saving to database
  Client _client = new Client();
  _client.Account = comboboxAccount.??; (see point 4) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:23:16.170

首先，我认为您应该使用 Dictionary 或 List> 或 DataTable 之类的东西。

1）你应该在你的列表中插入你的空值，然后将它绑定到你的组合框

```
 _account.Insert(0, "Empty"); 
```

2）定义你的ValueMember（你应该有一个列表或数据表）：

如果你有一个数据表：

```
 comboboxAccount.ValueMember = "columnID";
    comboboxAccount.DisplayMember = "columnValue";
    comboboxAccount.DataSource = yourDataTable;
    combobox.SelectedIndex = 0; //your empty value 
```

3）您应该在您的类中创建另一个属性并将其用作 DisplayMember；

```
 string NumberDescription{ get; set; };
    comboboxAccount.DisplayMember = "NumberDescription"; 
```

4）如果要存储所选值的 ID，则应使用先前定义的 ValueMember（列 ID）：

```
 int value = Convert.ToInt32(cbomboboxAccount.SelectedValue);

    // if you want to save the text of the value selected in the combobox:
    string strValue = comboboxAccount.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:23:56.803

> 1）*我想在组合框列表的顶部“添加”一个空值，这样他们也可以在组合框列表中选择一个空值。*

如果设置了 DataSource 属性，则永远不能将项目直接添加到组合框项目中。因此，在将列表（数据源）设置为数据源之前，应使用 empyt/dummy 对象更新列表（数据源）。您可能必须找到一种方法来描述您当前的对象是一个虚拟对象。

**例如**，您可以引入 EmptyItem 属性，并在保存之前对其进行处理/过滤：

```
 public class Account
    {
        public Account(bool isEmptyItem =false)
        {
            this.EmptyItem = isEmptyItem;
        }

        public Int32 Id { get; set; }
        public string Number { get; set; }
        public string Description1 { get; set; }
        public string Description2 { get; set; }
        public string Language { get; set; }

        public bool EmptyItem { get; private set; } 
    }

   IList<Account> _account = new List<Account>();
   _account.Add(new Account(true))
   _account.AddRange(Account_repository.GetAll()); 
```

.

> 2）*如何在从 DB 到 Control 时选择组合框中的值。我正在这样做，comboboxAccount.SeletedText = _account.Number，但它没有选择。*

由于组合框绑定到一个对象，你不能设置它，`SelectedText`而是你应该使用`SelectedItem`

**示例**：//您需要编写一个逻辑来了解如何获取此项目。

```
this.comboboxAccount.SelectedItem = this.comboboxAccount.Items[1]; 
```

> 3）*现在它在组合框中显示“数字”，但我喜欢显示数字+“-”描述。这该怎么做？现在它显示例如 4000 但我喜欢显示“4000 - Description1”*

您可能必须公开另一个属性说`DisplayText`并将其绑定到`DisplayMember`组合框。

**示例**：

```
public class Account
{
    public string Number { get; set; }
    public string Description1 { get; set; }

    public bool EmptyItem { get; private set; }

    public string DisplayText
    {
        get{return this.Number + "-" + this.Description1}
    }
}

this.comboboxAccount.DisplayMember = "DisplayText"; 
```

> 4)*我喜欢将 Account.Id 存储到数据库中，而不是 Account.Number，但我该怎么做，因为组合框显示的是数字......所以 SelectedText 不是我想要的。*

你应该使用`SelectedItem`，因为你已经绑定了一个对象

```
var account = this.comboboxAccount.SelectedItem as Account;

var accountID = account.Id; 
```

# svn - libneon.lib(ne_xml.obj)：错误 LNK2001：无法解析的外部符号 __imp__XML_SetUserData

> ID：15740433
> 
> 赞同：1
> 
> 时间：2013-04-01T08:56:43.123
> 
> 标签：svn

在 vc 6.0 上构建 subversion 1.7.8 libsvn_ra-1.dll 时出现链接器错误。

我在项目设置的预处理器指令中包含 XML_STATIC 并使用了 MFC 共享 dll。

```
 libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol     
  __imp__XML_SetXmlDeclHandler
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol 
  __imp__XML_SetUserData
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol 
  __imp__XML_SetCharacterDataHandler
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol 
  __imp__XML_SetElementHandler
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol  
  __imp__XML_ParserCreate
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol 
  __imp__XML_ErrorString
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol 
  __imp__XML_GetErrorCode
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol __imp__XML_Parse
  libneon.lib(ne_xml.obj) : error LNK2001: unresolved external symbol  
  __imp__XML_ParserFree
  ..\..\..\\Release\subversion\libsvn_ra\libsvn_ra-1.dll : fatal error LNK1120: 10  
  unresolved externals
  Error executing link.exe. 
```

# java - 如何获取 NumberExpression 使用 Spring JPA 数据的结果？

> ID：15740438
> 
> 赞同：1
> 
> 时间：2013-04-01T08:57:13.430
> 
> 标签：java, spring-data-jpa, querydsl

我使用了 Spring JPA Data + queryDSL。

这是一个很好的解决方案。但我现在有一个问题。

如果我想执行这个查询。

```
select sum(point) from users where userLevel = 2;
```

我知道如何使用 queryDSL 来执行这个查询。但我不知道如何使用 queryDSL 和 QueryDslPredicateExecutor 执行此查询。

如何使用 QueryDslPredicateExecutor 执行此查询？现在是不可能了吗？或者，还有另一种使用 Spring JPA 另一个接口执行此查询的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:31:16.073

您需要在 Spring Data 中使用 Querydsl 查询。`QueryDslPredicateExecutor`如果要返回主变量类型的实例，是正确的选择。

[如果您需要 Spring Data 存储库中的完整 Querydsl 功能，可以将QueryDslRepositorySupport](http://static.springsource.org/spring-data/jpa/docs/1.3.0.RELEASE/api/org/springframework/data/jpa/repository/support/QueryDslRepositorySupport.html)用作超类。

# metadata - 生成 Shibboleth SP 元数据

> ID：15740445
> 
> 赞同：3
> 
> 时间：2013-04-01T08:57:59.770
> 
> 标签：metadata, single-sign-on, shibboleth

我正在尝试在本地（本地主机上）运行的应用程序上配置 Shibboleth SSO。我已按照所有说明操作并配置了我的 shibboleth2.xml 文件，但是当访问以下链接`http://127.0.0.1:8080/Shibboleth.sso/Metadata`或`http://127.0.0.1/Shibboleth.sso/Metadata`

我也试过`http://127.0.0.1/MyAppName/Shibboleth.sso/Metadata`了，但也没有用！

我错过了什么吗？谁能帮我解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-15T03:34:28.367

你试过下面的网址吗？

`https://localhost/Shibboleth.sso/Metadata`（记住它是区分大小写的）

如果您使用的是 IIS 7，则应在 IIS 7.x 上安装 IIS 6 Management Compatibility，因为 Shibboleth 安装程序包使用这些管理接口。可以从管理工具 > 服务器管理器 > Web 服务器 (IIS) > 角色服务安装 IIS 6 管理兼容性选项。

有关详细的设置说明，您可以查看这篇[文章](https://wiki.cac.washington.edu/display/infra/Install+Shibboleth+Service+Provider+2.5+on+Windows+and+IIS)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-08T15:49:05.360

由于请求被代理到实际服务（gitlab），这里出现了类似的症状。解决方案：

```
<Location /Shibboleth.sso>
  ProxyPass !
  SetHandler shib
</Location> 
```

有关详细信息，请参阅[Shibboleth 文档](https://wiki.shibboleth.net/confluence/display/SHIB2/NativeSPApacheConfig#NativeSPApacheConfig-MakingURLsUsedbymod_shibGetProperlyRouted)。

# jquery - 日期选择器如何工作？

> ID：15740446
> 
> 赞同：0
> 
> 时间：2013-04-01T08:58:22.833
> 
> 标签：jquery, jquery-ui-datepicker

我正在处理一个需要 jquery 中的 datepicker 的表单。我正在使用普通的 jquery-ui datepicker 库。

现在的问题是它不起作用，另一个问题是我无法向您展示脚本，因为它非常复杂，它有各种显示和隐藏。

现在任何人都可以向我解释 datepicker 是如何工作的，以便我可以解决问题。据我所知，它附加了一个 div，其中包含日历及其结构，并且 hasDatepicker 类附加到设置 datepicker 的 id 上。

还有一件事我在点击文本框时出现错误，错误是 -

> **未捕获的类型错误：无法读取未定义 jquery-ui.min.js:123 的属性“msie”**
> 
> **$.extend._generateHTML jquery-ui.min.js:123**
> 
> **$.extend._updateDatepicker jquery-ui.min.js:123**
> 
> **$.extend._showDatepicker jquery-ui.min.js:123**
> 
> **b.event.dispatch jquery-1.9.1.min.js:3**
> 
> **v.句柄**

请对 datepiceker 做一个简单的解释，因为我对这些东西很陌生。我认为在隐藏和显示 div 或初始化时出了点问题。

如果可能的话，告诉我一个正确的方法来进行初始化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:02:07.693

这是一个解决方案：

只需在jQuery的 script 标签之后立即包含**jQuery Migrate 插件：**

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:08:34.293

首先确保您有一个输入标签，如下所示

```
<p>Date: <input type="text" id="datepicker" /></p> 
```

然后初始化 UI 控件如下

```
$( "#datepicker" ).datepicker(); 
```

确保先导入 jQuery 框架，然后再导入 jquery UI 框架。

```
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script> 
```

看看这个`**[Live fiddle](http://jsfiddle.net/mayooresan/4VM2b/)**`

请务必阅读[此处的官方文档](http://jqueryui.com/datepicker/)。

# database - Mssql 2012 行锁定

> ID：15740447
> 
> 赞同：0
> 
> 时间：2013-04-01T08:58:27.180
> 
> 标签：database, entity-framework

我有很多关于数据库的数据，很多用户正在通过异步 JS 更新这些数据。我想防止多个用户修改数据库上的同一行。当用户 1 单击网页中的编辑行时，我想向服务器发送信号并锁定该行。因此其他用户将无法访问同一行的编辑模式。当用户完成编辑行时，他/她将单击确定，将提交更新并解锁行。我在谷歌上搜索了这种方法，但所有 sql 锁都是针对单个事务的。有没有办法做到这一点？我很乐意在不改变我的数据库设计的情况下解决这个问题。但是如果没有改变就没有解决方案，很多工作将等着我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:08:53.827

尝试这样做：[http ://en.wikipedia.org/wiki/Optimistic_concurrency_control](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)

每当保存该行时，就会对 lock_version 字段进行计数。每当在这一行上发生保存时，它都会查看数据库上的 lock_version 是否与内存中保存的相同。如果版本不同，则该行已被其他用户更改。在这里你可以做任何事情：

1.  从数据库重新加载行并添加更改，然后重新保存
2.  只是抛出一个异常，让用户处理它

如果您真的想要对您的建议有所帮助，您将需要在行上使用某种标志来处理这个问题，您在用户编辑行时设置该标志。

1.  用户开始编辑该行 -> 将标记锁定为真
2.  另一个用户尝试编辑该行 -> 标志将阻止这种情况
3.  用户结束编辑行 -> 将标记锁定为 false

然而，这会给你带来各种各样的问题......尽量避免这种复杂的锁处理，并使用一些简单的东西，比如乐观锁

# jpa - JPA - 连接两个表

> ID：15740448
> 
> 赞同：0
> 
> 时间：2013-04-01T08:58:35.420
> 
> 标签：jpa, jpa-2.0

我有两张桌子，即

```
USER_ROLE  {user_id, Role} PK {user_id, role}
ROLE_PERMISSION  {role, permission} PK {role, permission} 
```

1.  一个用户可以有多个角色。
2.  一个角色可以映射到多个权限。

我有一个实体 - 用户，它维护有关用户的信息。此信息在首次登录时通过 LDAP（而非 DB）获取。现在，对于我的授权方面，我还需要从上述表中获取有关用户权限的 dtls。

所以我想为我现有的 USER 实体添加属性

```
USER {
   user_id, 
   first_name, 
   last_name,
   etc

   // Authorization
   List<String> roles;
   List<String> permissions;
} 
```

有人可以帮助我如何使用 JPA 来填充角色和权限列表吗？上网查了一下，想不通。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:42:35.103

我会在您的数据库中创建一个 USER 表，并将其映射到具有角色和权限的 User 对象。然后，用户对象将包含额外的 LDAP 数据。

如果没有 USER 表，您将无法映射到任何内容。

否则，只需使用本机 SQL 查询查询数据库并自己填充您的 LDAP 用户对象。

# android - 从 asynctask、android json 解析器返回数组列表

> ID：15740452
> 
> 赞同：0
> 
> 时间：2013-04-01T08:58:48.827
> 
> 标签：android, android-asynctask, arrays

我有一个要求，我需要以 JSON 格式解析 URL 的内容。我能够成功地做到这一点。但我需要将 URL 的内容保存在数组列表中并将它们传递回调用函数。下面是我想要实现的代码片段。

```
@Override
protected ArrayList<String> onPostExecute(String result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        dialog.dismiss();
        return ar; // ar is the arraylist i have created and updated it with the content of the url.
    } 
```

但是运行它会出错。谁能建议我如何使这成为可能。但是，当我将返回类型`onPostExecute`设为 void 并敬酒时，它会正确显示。当我在执行后调用它时，`null`即使我已经更新了`doinbackground()`. 因此我无法获得 arraylist 格式的返回值。

```
// Calling function
Myadapter.execute();
ArrayList<string> str = new ArrayList<string>();
str = print();
// Here str is getting null

// Called function
    public ArrayList<String> print() {
    ArrayList<String> names = new ArrayList<String>();
    for(int i=0;i<al.size();i++)
    {           
        names.add(al.get(i).getConstituencyName());         
    }
    return names;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:09:15.540

使用处理程序

在你的活动中

```
 mHandler = new Handler() { 
   @Override public void handleMessage(Message msg) { 
      ArrayList s=(ArrayList)msg.obj;
      tv.setText("Result = "+s.get(0));

    }
  }; 
```

在你的 onPostexecute

```
 Message msg=new Message();
 msg.obj=ar;
 mHandler.sendMessage(msg); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:33:11.187

正确的方法是让您的活动实现一个接口，并在实例化时`AsyncTask`将当前活动作为参数传递给构造函数。然后`onPostExecute()`调用 Activity 中定义的回调方法，并将 json 结果作为参数传递。

像这样的东西：

```
interface OnTaskFinished {
    void onTaskFinished(String result);
}

public class MainActivity extends Activity implements OnTaskFinished {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // ....
        new MyAsyncTask(this).execute();

    }

    @Override
    public void onTaskFinished(String result) {
        // Process the json result here how you need.
    }
} 
```

这就是您的 AsyncTask 的架构应该是这样的：

```
private class MyAsyncTask extends AsyncTask<Void, Void, String> {

        private final OnTaskFinished listener;

        public MyAsyncTask(OnTaskFinished listener) {
            this.listener = listener;
        }

        // ...

        @Override
        protected void onPostExecute(String result) {
            super.onPostExecute(result);
            listener.onTaskFinished(result);
        }

    } 
```

# php - 在空 GET 变量上接收错误

> ID：15740453
> 
> 赞同：-3
> 
> 时间：2013-04-01T08:58:54.967
> 
> 标签：php

我正在构建一个应用程序，为我的整个团队展示各种类型的记录。首先是菜单（有些带有**$_GET**信息）

显示此页面的 html 菜单如下所示：

```
<li><a href="web.php">WEB department</a>
        <ul>
    <li><a href="web.php?tstname=Mike">Mike</a></li>
        <li><a href="web.php?tstname=Deidre">Deidre</a></li>
</ul>
</li> 
```

拉取网络数据的网页，重要的部分是下面这个

```
 $pullWebTeamData = "SELECT * FROM tlm_accounts WHERE type_of_account = 'WEB' ;";
    $pullWebTeamDataDoIt = mysqli_query($c2d, $pullWebTeamData) or die ("could not pull WEB team data" . mysqli_error($c2d));

then further down the page i output the data i want. For example

    while($row = mysqli_fetch_array($pullWebTeamDataDoIt)){
    //do stuff here - - - **this part never changes** 

    } 
```

然后这会拉取整个网络团队的所有记录。以这种方式，我认为“嗯，如果我可以单独显示每个团队成员的记录，那将更加有用。

显然，我不会为公司的所有成员制作单独的页面，所以我想重新利用这个页面，以便如果 GET 变量等于人名，则显示某些数据。

这是代码

```
$tstname= $_GET['tstname'];

    if($tstname == "Mike"){
        $pullWebTeamData = "SELECT * FROM tlm_accounts WHERE type_of_account = 'WEB' ;";
        $pullWebTeamDataDoIt = mysqli_query($c2d, $pullWebTeamData) or die ("could not pull WEB team data" . mysqli_error($c2d));
    } elseif ($tstname == "Deidre"){
        $pullWebTeamData = "SELECT * FROM tlm_accounts WHERE type_of_account = 'WEB' ;";
        $pullWebTeamDataDoIt = mysqli_query($c2d, $pullWebTeamData) or die ("could not pull WEB team data" . mysqli_error($c2d));
    } else {
        $pullWebTeamData = "SELECT * FROM tlm_accounts WHERE type_of_account = 'WEB' ;";
        $pullWebTeamDataDoIt = mysqli_query($c2d, $pullWebTeamData) or die ("could not pull WEB team data" . mysqli_error($c2d));

    } 
```

现在虽然它提取了我想要的数据（命名为获取链接或普通网页链接），但问题是在页面加载时，如果该人单击没有附加 $_GET 信息的常规网页链接。它会引发错误，因为此时 "$_GET" 在：

```
$tstname= $_GET['tstname']; 
```

不存在。如果“$_GET”不存在，我该如何做到这一点。忽略它？感觉我应该知道这一点....无论如何，哈哈，

我试过像

```
if(!empty($testname)){ do stuff } 
```

或者`if($testname) //since this equals to true if not empty...`

等但无济于事。希望我很清楚。任何提示/帮助等我都非常感激。

先谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:00:51.640

利用`isset`

```
if(isset($_GET['tstname'])) {
  // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:09:05.453

$tstname= isset($_GET['tstname'])?$_GET['tstname']:'';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:01:53.863

使用三元运算符设置变量。

```
$tstname= !empty($_GET['tstname'])? $_GET['tstname']: ' '; 
```

或者

```
 $tstname= isset($_GET['tstname'])? $_GET['tstname']: ' '; 
```

# asp.net - 使用会话变量 asp.net 的搜索命令

> ID：15740455
> 
> 赞同：0
> 
> 时间：2013-04-01T08:58:56.683
> 
> 标签：asp.net

我有一个名称存储在一个名为“name”的会话变量中。我已经写了声明：

```
da = new SqlDataAdapter("Select empID from emp where empFirstName=' "+
                         Session["name"].ToString() + " '", connstring);
da.Fill(ds); 
```

我已经验证会话变量不为空。但是我无法获取表中存在的记录的 empID。这个说法正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:03:30.243

SQL 语句中字符串变量的开头和结尾有空格。

试试这个，它应该工作：

```
da = new SqlDataAdapter("Select empID from emp where empFirstName='"+
                     Session["name"].ToString() + "'", connstring); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:04:48.907

问题在于这里的空格：

```
' " + Session["name"].ToString() + " '"
 ^                                  ^
 |                                  | 
```

这就是为什么值以空格为后缀和前缀的原因。

你应该试试：

```
da =  new SqlDataAdapter (
"Select empID from emp where empFirstName='" + Session["name"].ToString() + "'",
connstring);

da.Fill(ds); 
```

# c++ - makefile 变量传递

> ID：15740463
> 
> 赞同：0
> 
> 时间：2013-04-01T08:59:55.770
> 
> 标签：c++, makefile

我已经为我的源代码编写了一个 makefile，并且依赖于 makfile 输入变量，我包含了一些可靠的源文件。

```
 ifeq($(var),mod1)
 src + = mod1.cpp 
 else ifeq ($(var),mod2)
 src + = mod2.cpp 
 else ifeq ($(var),mod3)
 src + = mod3.cpp 
 endif 
```

我使用 $make var=mod1 编译它。当我想包含单个变量时，这很好用。但是我需要提供在 mod1,mod2,mod3 中包含任何变量组合的选项。

像 $make mod1 mod2 或 make mod3 mod1 等

如何在 make 文件中提供这些组合？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:16:50.363

您可以根据需要传递多个参数来制作文件。

## 制作文件（makefile）

```
all:
     echo $(NAME)
     echo $(AGE)
     echo $(TEL) 
```

## 在控制台中

```
make NAME=your_name AGE=your_AGE TEL=your_tel -f makefile 
```

# python - cx_oracle 找不到 Oracle 客户端

> ID：15740464
> 
> 赞同：0
> 
> 时间：2013-04-01T09:00:08.733
> 
> 标签：python, cx-oracle

我已经在 Linux 64 位机器上安装了 Python 2.7.3。我也安装了 Oracle 11g 客户端（64 位）。我设置了 ORACLE_HOME、PATH、LD_LIBRARY_PATH，并为 Python 2.7 和 Oracle 11g 安装了 cx_oracle 5.1.2 版本。但是 cx_oracle 上的 ldd 命令找不到 libclntsh.so.11.1。

我尝试在 /usr/lib64 下创建指向 libclntsh.so.11.1 的符号链接，更新了 /etc/ld.so.conf.d/ 下的 oracle.conf 文件。尝试了论坛上有关此问题的所有可能解决方案，但没有运气。请让我知道缺少什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T14:35:51.750

The issue with me was that I installed python, cx_oracle as root but Oracle client installation was done by "oracle" user. I got my own oracle installation and that fixed the issue.

Later I ran into PyUnicodeUCS4_DecodeUTF16 issues with Python and for that I had to install python with —enable-unicode=ucs4 option

# android - 如何缩放并将标记添加到android mapfragment

> ID：15740466
> 
> 赞同：8
> 
> 时间：2013-04-01T09:00:25.093
> 
> 标签：android, google-maps

我在我的 android 应用程序（谷歌地图 api v2）上显示地图。我想操纵地图以显示特定位置、缩放和标记。

谁能举个操纵mapfragment的例子

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-01T09:05:26.727

要在代码中获取地图实例，请执行以下操作：

```
map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

或者：

```
map = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

取决于您是使用`SupportMapFragment`还是`MapFragment`在您的 XML 文件中。

然后给它添加一个标记：

```
Marker newmarker = map.addMarker(new MarkerOptions().position(latlng).title("marker title").icon(BitmapDescriptorFactory.fromResource(R.drawable.marker_for_map_purpul))); 
```

缩放地图：

```
CameraPosition cameraPosition = new CameraPosition.Builder().target(latlng).zoom(14.0f).build();
CameraUpdate cameraUpdate = CameraUpdateFactory.newCameraPosition(cameraPosition);
map.moveCamera(cameraUpdate); 
```

# mysql - 什么时候可以在 mysql 上运行没有密码的应用程序？

> ID：15740468
> 
> 赞同：1
> 
> 时间：2013-04-01T09:00:32.397
> 
> 标签：mysql, security

这不是关键问题，但我仍然想知道，什么时候可以在`some-user@localhost`没有密码的情况下进行 mysql 连接设置。

1.  在共享网络提供商的情况下存在潜在风险：其他用户可以访问您的数据库（如果他们知道`some-user`名称）。
2.  在 VPS(VDS) 的情况下是否有风险？
3.  如果您使用特定 IP 运行自己的服务器，我会认为这种方法安全吗？我错了吗？你能从外面模仿本地主机IP吗？

# c# - 复杂的 MultiBinding 验证

> ID：15740473
> 
> 赞同：0
> 
> 时间：2013-04-01T09:00:49.927
> 
> 标签：c#, wpf, imultivalueconverter

我有一个包含多个字段的表单。我还有一个“验证”按钮，它将操作数据库输入。我希望**仅当用户定义了最小字段时才激活该按钮**。

到目前为止，这很简单，因为所有字段都是文本：

```
<Button x:Name="Manage" Content="Manage">
    <Button.IsEnabled>
        <MultiBinding Mode="OneWay" Converter="{StaticResource FieldsFilledinToVisible}">
            <Binding ElementName="name1" Path="Text"/>
            <Binding ElementName="name2" Path="Text"/>
        </MultiBinding>
    </Button.IsEnabled>
</Button> 
```

转换器是：

```
public class AllValuesDefinedConverter : IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        bool isEnabled = false;
        for (int i = 0; i < values.Length; i++)
        {
            isEnabled = isEnabled || string.IsNullOrEmpty(values[i].ToString());
        }
        return !isEnabled;
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        return null;
    }
} 
```

但现在必须考虑额外的复选框，条件应该是**[任何这些复选框已选中 + 先前定义的文本字段 --> 激活验证按钮]**：

```
<WrapPanel Style="{StaticResource WrapStyle_Inputs}">
    <CheckBox Content="Check1" IsChecked="{Binding Checked1, Mode=TwoWay}"/>
    <CheckBox Content="Check2" IsChecked="{Binding Checked2, Mode=TwoWay}"/>
    <CheckBox Content="Check3" IsChecked="{Binding Checked3, Mode=TwoWay}"/>
</WrapPanel> 
```

你知道我怎么能这样做吗？

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:04:21.527

转换器不适合这项工作。相反，您应该查看验证、命令和视图模型。您的视图模型将实现验证逻辑并公开您的按钮绑定到的命令。该命令只有在您的验证逻辑通过时才可执行。

# codeigniter - 使用 codeigniter 递归执行查询的返回结果

> ID：15740477
> 
> 赞同：0
> 
> 时间：2013-04-01T09:01:09.087
> 
> 标签：codeigniter

我是codegniter的新手。我使用以下代码递归地执行函数。

在第一次调用中，我通过 reply_id 然后在函数中我使用查询来选择那些具有
parent_id = reply_id 的 id 然后在 foreach 中我对所有选定的 id 执行相同的过程。

现在我想为所有递归返回组合数组。因为每个 id 查询都被执行并每次都得到新的结果。
我怎样才能做到这一点？？

```
$resultq3 = $this->showreply($reply_id); //first call to function

<?php
    public function showreply( $reply_id ) {
       $q1 =$this->db->select('*')
                 ->from('forum_reply AS fr')
                 ->where('fr.parent_id',$reply_id)
                 ->order_by('fr.id ')->get();;

       foreach( $q1->result_array() as $row4 ) {
          $id = $row4['id'];  
          $parent_id = $row4['parent_id'];
          if( $parent_id !=0 ) {  
              $this->showreply( $id );
          }
       }
       return  $result; //here want to return result
    }
 ?> 
```

编辑代码：

```
$resultq3 = $this->showreply($reply_id); //first call to function

    <?php
        public function showreply( $reply_id ) {
           $q1 =$this->db->select('*')
                     ->from('forum_reply AS fr')
                     ->where('fr.parent_id',$reply_id)
                     ->order_by('fr.id ')->get();;

           foreach( $q1->result_array() as $row4 ) {

              $arr1 = $q1->result_array();
              $arr = array_merge($arr, $arr1);

              $id = $row4['id'];  
              $parent_id = $row4['parent_id'];
              if(!empty($arr1)) {  
                  $this->showreply( $id );
              }
           }
           return $arr;
        }
     ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-03T13:45:09.043

```
public function showreply($parent_id = 0)
{
    $q1 = $this->db->select('*')
                    ->from('forum_reply AS fr')
                    ->where('fr.parent_id', $parent_id)
                    ->order_by('fr.id ')->get();

    $arr = array();
    foreach ($q1->result_array() as $row4)
    {
        $arr1 = $row4;

        $id = $row4['id'];
        $parent_id = $row4['parent_id'];
        $arr1['child'] = $this->showreply($id);
        $arr[]=$arr1;
    }

    return $arr; //here want to return result
} 
```

# spring - Weblogic Server 上带有 Spring 的 Camel JMS 组件

> ID：15740479
> 
> 赞同：2
> 
> 时间：2013-04-01T09:01:11.217
> 
> 标签：spring, jms, weblogic, apache-camel

我找不到任何体面、清晰的示例来学习使用 Spring 配置的 JMS 组件。所以我写了这样的东西：

```
<bean id="weblogic" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
</bean>

<bean id="jmsJndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">weblogic.jndi.WLInitialContextFactory</prop>
            <prop key="java.naming.provider.url">t3://${ip}:${port}</prop>
        </props>
    </property>
</bean>
<bean id="jmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jmsJndiTemplate"/>
    <property name="jndiName" value="jms/cdrPreMO-connfact-jndi"/>
</bean>

<camelContext id="camelContext" xmlns="http://camel.apache.org/schema/spring">

    <camel:endpoint id="jmsQueue" uri="weblogic:queue:jms/cdrPreMO-queue-jndi"/>

    <route>
        <from ref="jmsQueue"/>
        <bean ref="test" method="writeFile"/>
        <to uri="log:errors?level=ERROR"/>
    </route>
</camelContext> 
```

但它给出了例外：

```
Caused by: javax.naming.NameNotFoundException: Unable to resolve 'weblogic.jms.backend.jms'. Resolved 'weblogic.jms.backend'; remaining name 'jms'
    at weblogic.jndi.internal.BasicNamingNode.newNameNotFoundException(BasicNamingNode.java:1139)
    at weblogic.jndi.internal.BasicNamingNode.lookupHere(BasicNamingNode.java:252)
    at weblogic.jndi.internal.ServerNamingNode.lookupHere(ServerNamingNode.java:182)
    at weblogic.jndi.internal.BasicNamingNode.lookup(BasicNamingNode.java:206)
    at weblogic.jndi.internal.BasicNamingNode.lookup(BasicNamingNode.java:214)
    at weblogic.jndi.internal.BasicNamingNode.lookup(BasicNamingNode.java:214)
    at weblogic.jndi.internal.BasicNamingNode.lookup(BasicNamingNode.java:214)
    at weblogic.jndi.internal.WLEventContextImpl.lookup(WLEventContextImpl.java:254)
    at weblogic.jndi.internal.WLContextImpl.lookup(WLContextImpl.java:393)
    at weblogic.jms.frontend.FEManager.destinationCreate(FEManager.java:287)
    ... 8 more 
```

JMS Conf 为真（IP 端口和 jndi 名称）。它正在建立连接和会话，但给出了异常有人能告诉我我的错误是什么吗？

谢谢

编辑：根据克劳斯的评论应用修复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T11:35:51.967

Camel 端点应将“weblogic”称为组件名称。

```
<camel:endpoint id="jmsQueue" uri="jms:queue:jms/cdrPreMO-queue-jndi"/> 
```

应该

```
<camel:endpoint id="jmsQueue" uri="weblogic:queue:jms/cdrPreMO-queue-jndi"/> 
```

因为这是您在 < bean > 标记的 id 属性中为 JMS 组件指定的名称，例如

```
<bean id="weblogic" class="org.apache.camel.component.jms.JmsComponent">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T08:49:51.690

已解决，但有解决方法。我仍然不知道问题到底是什么，但是，我没有让 weblogic 自己创建自己的目的地，而是将责任交给了 spring，例如：

```
<bean id="weblogic" class="org.apache.camel.component.jms.JmsComponent">
    <property name="configuration" ref="jmsConfiguration" />
</bean>

<bean id="jmsJndiTemplate" class="org.springframework.jndi.JndiTemplate">
    <property name="environment">
        <props>
            <prop key="java.naming.factory.initial">weblogic.jndi.WLInitialContextFactory</prop>
            <prop key="java.naming.provider.url">${ip}:${port}</prop>
        </props>
    </property>
</bean>

<bean id="jndiDestinationResolver" class="org.springframework.jms.support.destination.JndiDestinationResolver">
        <property name="jndiTemplate" ref="jmsJndiTemplate"/>
</bean>

<bean id="jmsConfiguration" class="org.apache.camel.component.jms.JmsConfiguration">
        <property name="connectionFactory" ref="jmsConnectionFactory"/>
        <property name="destinationResolver" ref="jndiDestinationResolver"/>
    </bean>

<bean id="jmsConnectionFactory" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiTemplate" ref="jmsJndiTemplate"/>
    <property name="jndiName" value="jms/cdrPreMO-connfact-jndi"/>
</bean> 
```

它现在正在工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-07T16:01:33.757

尽管问题已经很老了，但如果其他用户收到此错误，请将此解决方案发布给他们。我在尝试在 weblogic 12c 版本中查找 weblogic 队列时在 Camel 2.19 版本上遇到了这个问题。在 Weblogic 中解析队列目标时，此处发生的查找很可能不是典型的 JNDI 查找。端点 uri 应包含队列详细信息，如下所示：

```
jms_server_name/jms_module_name!queue_name 
```

例如，如果队列名称是 TestRequestQueue，在名为 sample_jms_module 的模块下创建，而 JMS 服务器在 Weblogic 中名为 sample_jms_server，则 uri 需要如下所示：

```
<camel:endpoint id="jmsQueue" uri="weblogic:queue:sample_jms_server/sample_jms_module!TestRequestQueue"/> 
```

在 uri 的前缀部分`weblogic:queue:`，组件名称可以是任何名称，只要它引用创建的组件即可。它不一定是`weblogic`. 例如，如果 JmsComponent 被命名为`test-jms`，则需要将 uri 声明为前缀为`test-jms:queue:`。

可以通过导航到以下路径从 Weblogic 控制台获取 weblogic 中 JMS 服务器的名称：Services -> Messaging -> JMS Servers

可以通过导航到队列并单击“监控”选项卡从 Weblogic 控制台获取队列的名称，而不是 JNDI 名称。此选项卡在名称列中显示队列的目标名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-14T06:43:55.077

我刚刚在 weblogic 12c 中使用下一个配置运行了 apache camel jms 组件。键是队列的 jndi 名称。它必须是 ./module_name!queueName。'./' 表示本地 jms 服务器。

```
 <jee:jndi-lookup id="connectionFactoryBean" jndi-name="dpxcomConnectionFactory"/>

 <bean id="dpxcomJMSConnectionFactory"
        class="org.springframework.jms.connection.CachingConnectionFactory">
        <constructor-arg ref="connectionFactoryBean"/>   
        <property name="sessionCacheSize" value="50"/>

    </bean>

Route definition:
    from("jms:queue:./DPXCOM!"+config.getMainQueueName()+"?concurrentConsumers="+config.getConcurrentConsumers()
              +"&maxConcurrentConsumers="+config.getConcurrentConsumers()+"&jmsMessageType=Text&testConnectionOnStartup=true&connectionFactory=dpxcomJMSConnectionFactory&consumerType=Simple")
        .setHeader("jmsMessage").body()
        .process(new VerifyJMSMessageProcessor())
        .choice()
        ..
        ..
end(); 
```

# homebrew - 如何使用 brew 删除公式的所有版本

> ID：15740480
> 
> 赞同：11
> 
> 时间：2013-04-01T09:01:12.307
> 
> 标签：homebrew

```
$ brew remove hadoop
Error: hadoop has multiple installed versions 
```

我似乎无法找到如何删除所有版本（它们是`1.0.4`和`1.1.2`）的方法。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-01-07T21:46:56.740

这似乎也有效：

```
brew remove --force hadoop 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-01T09:45:08.280

`brew cleanup hadoop`似乎是要走的路，它会卸载所有安装的版本！希望这可以帮助某人。

# linux - 防止进程使用 pkill 杀死自己

> ID：15740481
> 
> 赞同：16
> 
> 时间：2013-04-01T09:01:24.670
> 
> 标签：linux, bash

我正在为启动服务脚本编写停止例程：

```
do_stop()
{
  rm -f $PIDFILE
  pkill -f $DAEMON || return 1
  return 0
} 
```

问题是 pkill（与 killall 相同）也匹配代表脚本本身的进程，并且它基本上会自行终止。如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-01T09:06:14.823

您可以从结果中显式过滤掉当前的 PID：

```
kill $(pgrep -f $DAEMON | grep -v ^$$\$) 
```

要正确使用该`-f`标志，请确保提供守护程序的整个路径，而不仅仅是一个子字符串。这将阻止您终止脚本（并消除对上述内容的需要`grep`），并阻止您终止所有其他碰巧共享守护进程名称的系统进程。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-01T09:07:51.260

`pkill -f`接受一个完整的正则表达式。因此，`pkill -f $DAEMON`您应该使用：

```
pkill -f "^"$DAEMON 
```

确保只有当进程名称以给定的守护进程名称开头时，才会杀死它。

**更好的解决方案**是在启动进程时将进程的 pid（进程 ID）保存在文件中。对于停止进程，只需读取文件以获取要停止/终止的进程 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-22T21:15:53.403

从你的问题来看，你并不难使用 pgrep 和 pkill，所以这里有一些常用的其他选项。

1) 使用`killproc`from `/etc/init.d/functions`or `/lib/lsb/init-functions`（适用于您的发行版和 linux 版本）。如果您正在编写服务脚本，如果您使用其他服务之一作为示例，您可能已经包含此文件。

```
Usage: killproc [-p pidfile] [ -d delay] {program} [-signal] 
```

使用它的主要优点是它发送 SIGTERM，等待查看进程是否终止并仅在必要时发送 SIGKILL。

2）您还可以使用killproc的秘诀，即找到要杀死的进程ID，使用`pidof`它可以`-o`选择排除特定进程。的参数`-o`可以是`$$`当前进程 ID，也`%PPID`可以是 pidof 解释为调用 pidof 的脚本的特殊变量。最后，如果守护进程是一个脚本，您将需要 -x 以便您尝试通过它的名称来终止脚本，而不是终止 bash 或 python。

```
for pid in $(pidof -o %PPID -x progd); do
    kill -TERM $pid
done 
```

[你可以在文章Bash: How to check if your script is already running](https://blog.jay2k1.com/2011/11/30/bash-how-to-check-if-your-script-is-already-running/)中看到一个例子

# installation - 如何在重大升级前显示弹出消息

> ID：15740487
> 
> 赞同：2
> 
> 时间：2013-04-01T09:01:54.473
> 
> 标签：installation, wix, windows-installer

如何在主要升级之前向用户显示他是否真的想升级新安装程序的弹出消息。

我尝试使用 MajorUpgrade 元素，只能降级自定义操作而不是重大升级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:22:09.223

如果您正在使用该`MajorUpgrade`元素，`WIX_UPGRADE_DETECTED`则将在执行升级时定义一个属性。然后，您可以根据该属性在 UI 中定义新的对话框或弹出窗口。您需要修改`Publish`要放置 UI 的元素，如下所示：

```
<Publish Event='ShowMajorUpgradeDialog'>WIX_UPGRADE_DETECTED</Publish> 
```

# c# - 在c#中将结构转换为char指针

> ID：15740494
> 
> 赞同：0
> 
> 时间：2013-04-01T09:02:17.030
> 
> 标签：c#, c++, c#-4.0, c#-3.0, c#-2.0

下面是用 c++ 编写的一段代码，我如何在 c# 中转换它。如果您检查 pams_get_msgw 函数，第一个参数是 (char*)，我如何在 c# 中传递相同的参数。

```
 struct 
                {
                    short m_nStatus;
                    short m_nReg_Id;
                    short m_nNumber_Reg;
                } oRegReply;

                short nBufSize = sizeof(oRegReply);
                q_address   oSenderQueue;
                nMsgType = MSG_TYPE_SBS_REG_REPLY;
                cPriority = 0;
                lTimeout = 300; // 30 seconds

                //Wait for reply telegram from SBS server
                lStatus = pams_get_msgw((char *) &oRegReply, &cPriority, &oSenderQueue,
                                        &nMsgClass, &nMsgType, &nBufSize, &nMsgLen,
                                        &lTimeout, NULL, NULL, NULL, NULL, 
                                        NULL, NULL, NULL); 
```

**我对pams_get_msgw**函数的c# 声明是这样的

```
 [DllImport("DmqCl32.dll")]
  public static extern int pams_get_msgw(StringBuilder msg_area, string priority, out q_address source,
                                               out short clas, out short type,
                                               ref short msg_area_len, out short len_data, ref int timeout,
                                               ref int sel_filter, out PSB psb, out ShowBuffer show_buffer,
                                               ref int show_buffer_len, ref int large_area_len, out int large_size,
                                               [MarshalAs(UnmanagedType.LPStr)] string nullarg_3); 
```

和实际的 c++ 声明

```
typedef long (CALLBACK* PAMSGETMSGW)(char *,char *,q_address *, short *, short *, short *,
                                     short *, long *, long *, struct PSB *,  
                                     struct show_buffer *, long *, char *, char *, char * ); 
```

我如何将结构传递给第一个参数，就像在 c++ 中所做的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:07:58.570

您应该能够在 C# 中将您的结构声明为*类*而不是结构，然后您可以通过 P/Invoke 传递它而不使用`ref`关键字。

发生的事情是 C 代码太古老了，以至于它`char*`在应该使用`byte*`.

无论如何，P/Invoke 的默认封送处理在大多数情况下处理固定和传递对象引用，因此如果您只传递一个类对象，它可能会起作用。（许多 C++ 结构可以在 C# 端声明为类，这可以使 P/Invoke 更容易。）

您没有显示 C 声明，`pams_get_msgw()`但看起来您还必须使用`Marshal.Sizeof(RegReply)`for 的值`msg_area_len`（`RegReply`C 结构的 C# 类在哪里`oRegReply`）。

顺便说一句：您在声明`oRegReply`结构的 C# 版本时需要帮助吗？

# ajax - 这个 ajax 调用下面的休息服务是否正确？

> ID：15740496
> 
> 赞同：0
> 
> 时间：2013-04-01T09:02:26.487
> 
> 标签：ajax, spring

样品休息服务如下：

```
@RequestMapping(value = "/image/upload", method = RequestMethod.POST)
public void uploadImage(@RequestParam("image") MultipartFile fileObj)
        throws Exception 
{
  System.out.print("File Name:"+fileObj.getOriginalFileName()); 

} 
```

我写了这样的ajax代码：当我调用它时，我的接受应用程序格式是Json，我得到400错误

```
 $('#user_click').click(function(){
    var data = { 
              image:$("#file_1").val
                };
    $.ajax({
        url : "http://localhost:8080/MyProject/image/upload",
        type : "POST",
        contentType : false,
        crossDomain : true,
        data : JSON.stringify(data),
        dataType : 'json',
        async : true,
        success : function(result) {
            alert('The Selected Items uploaded');
        },
        error: function(message){
          alert("Error:"+JSON.stringify(message));  
        }
       }); 
```

这个ajax代码是否正确？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:01:55.893

不，它不起作用，因为 ajax 请求不会传输文件数据。

解决方案是

1.  使用像[jquery-form这样的文件上传插件](http://www.malsup.com/jquery/form/)

前任：

```
$('#myForm').ajaxSubmit({
    url : 'http://localhost:8080/MyProject/image/upload',
    type : "POST",
    dataType : "json",
    success : function(response) {

    },
    error : function(response) {

    }
}); 
```

1.  使用 html5 [FormData](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)（遗憾的是不支持 IE）

# jquery - 这个jquery代码安全吗？

> ID：15740497
> 
> 赞同：6
> 
> 时间：2013-04-01T09:02:26.343
> 
> 标签：jquery, security

下面的代码安全吗？

```
$iframe = $('<iframe id="iframe" src="' + $(this).attr('rel') + '" name="iframe">');
$area = $("#ajax-area");
$area.empty().append($iframe); 
```

在哪里：

1.  `$(this)`是点击的链接。
2.  `attr('rel')`保存 iframe 的 src 和 rel 由 PHP 创建（此处没有用户输入）。
3.  并`$iframe`持有要上传的表格。

我担心的是，因为在这种情况下 iframe 的 src 是一个变量，我担心恶意用户会设法编辑“rel”属性并打开他或她想要的 iframe。这可能吗？

**编辑**

感谢您的宝贵回答。

php 使用以下内容来填充 rel：

```
App::basePath . '/some/path/to/my/folder'; 
```

`basePath`开发人员选择的常数在哪里。

我会按照你们的建议以更合适的方式重新设计我的 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:13:41.663

从理论上讲，如果`rel`属性基于服务器常量，那么除了您无法控制的安全问题（例如 MiTM）之外，应该没有其他安全问题。

但是，您应该始终对这些事情保持安全；并且 jQuery 通过允许将标签的属性作为第二个参数传递给构造函数来提供安全性：

```
$iframe = $('<iframe />', {
    id: "iframe",
    src=: $(this).attr('rel'),
    name: "iframe"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:09:45.970

除非攻击者可以获取链接的 rel 属性，否则它应该是安全的。

但是，如果不详细了解它运行的环境，就很难说一段代码是否安全。可以从不同的按钮访问“安全”的代码段，立即使您假设 rel 属性被控制为无效。

但是，只要您注意不要让用户代码在页面中的任何位置呈现，您就应该是安全的。这意味着您必须转义每个用户提供的输入，尤其是当该输入输出到您网站的其他位置时（例如，对新闻文章的评论）。

# android - Android布局视图ID名称问题

> ID：15740498
> 
> 赞同：1
> 
> 时间：2013-04-01T09:02:27.013
> 
> 标签：android

当我将视图命名为`android:id="@+id/TextView1"`和代码时，我最近遇到了一个问题

```
TextView tv1 = (TextView) findViewById(R.id.TextView1); 
```

即使没有给出命名约定的警告，也会返回错误的视图。当我将名称更改为 text_view_1 时，它起作用了。

我知道通常的命名约定都是小写`android:id="@+id/text_view_1"`或驼峰式`android:id="@+id/textView1"`

是否有任何文档资源可以解释该问题或任何答案？另外我想知道我在开源代码中经常看到的变量名中的 m 代表什么。例如

```
TextView mTextView; 
```

这是一个菜鸟问题，但我在任何地方都找不到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:09:04.473

尝试清理并构建您的项目。

Android[编码风格指南](http://source.android.com/source/code-style.html)指出：

*   非公共、非静态字段名称以 m 开头。
*   静态字段名称以 s 开头。
*   其他字段以小写字母开头。
*   公共静态最终字段（常量）是 ALL_CAPS_WITH_UNDERSCORES。

这将是`private ImageButton mButtonStart;`或`private static sSingletonThing;`

顺便说一句，只有在您想为 Android 源代码做出贡献时才需要使用该约定，您可以以任何风格编写自己的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:08:58.203

那是 Eclipse 中的一个已知问题。它返回了错误的视图，因为一定有一些参考问题。通常清理项目或重新启动 Eclipse 会有所帮助。

关于前缀 m，“m”是一种命名约定，用于表示私有成员变量和方法。

# c# - 如何在 Windows Phone 8 中显示联系人列表？

> ID：15740505
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:03:06.760
> 
> 标签：c#, xaml, windows-phone-8

我想创建类似于下图的联系人列表，以及滚动联系人列表时出现的字母指示。

![联系人列表](https://i.stack.imgur.com/wBMVM.png)

请帮助我如何执行此操作或任何参考链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:25:10.590

你可以这样做：

```
Contacts contacts = new Contacts();
contacts.SearchCompleted += new EventHandler<ContactsSearchEventArgs>(contacts_SearchCompleted);
contacts.SearchAsync(String.Empty, FilterKind.DisplayName,null); 
```

然后你可以访问联系人的属性来得到你想要的

# shell - 将数字转换为星号的 shell 脚本

> ID：15740506
> 
> 赞同：1
> 
> 时间：2013-04-01T09:03:07.497
> 
> 标签：shell

我有一个包含数字的变量，使用 shell 脚本如何将数字转换为星号字符，例如 5 将转换为`*****`， 2 将转换为`**`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:29:42.483

简单的解决方案是使用 perl：

```
VAR=5
perl -e "print '*' x $VAR" 
```

其他解决方案是使用`seq`：

```
VAR=5
for i in `seq $VAR` ; do echo -n '*' ; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:06:43.957

尝试这样做：

```
$ echo "azerty5qwerty5" | perl -pe 's/5/sprintf "%s", "," x $&/ge'
azerty,,,,,qwerty,,,,, 
```

# php - 在 PHP 中计算 Cookie 大小

> ID：15740507
> 
> 赞同：3
> 
> 时间：2013-04-01T09:03:10.947
> 
> 标签：php, cookies

我想读取 cookie 并使用 php 在服务器端计算其长度，但找不到任何直接的方法。那么如何完成这个任务呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:08:14.657

那这个呢 ？

```
setcookie("user", "Dino babu kannampuzha", time() + 3600);

if (isset($_COOKIE["user"])) {
  $data = $_COOKIE["user"];
  $serialized_data = serialize($data);
  $size = strlen($serialized_data);
  echo 'Length : ' . strlen($data);
  echo "<br/>";
  echo 'Size : ' . ($size * 8 / 1024) . ' Kb';
} 
```

// 输出

```
Length : 21
Size : 0.232 Kb 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:17:08.063

要获取原始 cookie 及其长度：

```
$rawCookies = isset($_SERVER['HTTP_COOKIE']) ? $_SERVER['HTTP_COOKIE'] : null;
$rawLength  = strlen($rawCookies);
echo $rawLength; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:07:37.077

`strlen($_COOKIE['cookie_name'])`?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:18:24.290

不确定这是否是你想要的，但你可以试试这个

```
$start_memory = memory_get_usage();
$cookie = $_COOKIE['YourCookie'];
echo memory_get_usage() - $start_memory-PHP_INT_SIZE * 8;

    <?php
    setcookie("TestCookie", '10');
    $start = memory_get_usage();
    $cookie = $_COOKIE['TestCookie'];
    echo memory_get_usage() - $start;  //116 bytes   
  ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-13T05:48:28.707

请参阅以下资源：
[http :](http://extraconversion.com/data-storage/characters/characters-to-bytes.html)
[//extraconversion.com/data-storage/characters/characters-to-bytes.html 在 php](https://stackoverflow.com/questions/7568949/measure-string-size-in-bytes-in-php)
[https://mothereff.in/byte-counter中以字节为单位测量字符串大小](https://mothereff.in/byte-counter)

还有我使用 Firebug 获取 cookie 大小的屏幕截图。 [![在此处输入图像描述](https://i.stack.imgur.com/pTcoC.jpg)](https://i.stack.imgur.com/pTcoC.jpg)

我使用来自@Dino 的代码，但更改了一些内容，例如`strlen`支持`mb_strlen`unicode。
它成为了：

```
$data = $_COOKIE['user'];
$name = 'user';
if (!is_scalar($data)) {
    $data = serialize($data);
}
$size = mb_strlen($data)+mb_strlen($name);
echo 'Cookie name length : ' . mb_strlen($name) . "<br>\n";
echo 'Cookie content length : ' . mb_strlen($data) . "<br>\n";
echo 'Cookie size : ~' . ($size) . ' Bytes<br>'."\n"; 
```

这几乎接近于 Firebug 中出现的大小。我真的不明白为什么`(n*8/1024)`如果我们从上面的资源中引用它的大小必须是 1 个字符 1 个字节，除了 unicode 所以我必须使用`mb_strlen`而不是`strlen`.

# .net - 用于便携式库的 Google Drive SDK

> ID：15740515
> 
> 赞同：1
> 
> 时间：2013-04-01T09:03:56.943
> 
> 标签：.net, google-drive-api, portable-class-library

我正在为 Winforms 创建应用程序。我计划稍后为 Windows Phone 发布此应用程序。所以我决定使用便携式库。我的便携式库有以下目标框架：

```
.NET Framework 4 and higher
Silverlight 4 and higher
Windows Phone 7 and higher
.NET for Windows Store apps 
```

在我的可移植库中，我从 Google drive SDK 中引用了以下库：

```
DotNetOpenAuth.dll
Google.Apis.Authentication.OAuth2.dll
Google.Apis.dll
Google.Apis.Drive.V2.dll
Google.Apis.OAuth2.V2.dll
log4net.dll
Newtonsoft.Json.Net35.dll 
```

到目前为止，当我构建我的解决方案时，它工作正常，因为我在任何地方都有这些参考。但是当我在我的代码中使用这些引用时，例如：

```
using Google.Apis.Authentication;
using File = Google.Apis.Drive.v2.Data.File;
public interface IUtilities
{
    void SampleMethod(IAuthenticator authenticator, File file);
} 
```

现在，我没有编译错误。但是，当我尝试构建解决方案时，我得到了关注

```
Error   1   The type or namespace name 'IAuthenticator' could not be found (are you missing a using directive or an assembly reference?)

Error   3   The type or namespace name 'Google' could not be found (are you missing a using directive or an assembly reference?) 
```

如果我使用这些库编写更多代码，所有这些对象都会以类似的方式出错。谁能帮我理解这一点？如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T18:05:11.630

您从可移植类库中引用的任何库也必须是可移植的（并且支持兼容平台）。Json.NET 有一个可移植版本，但您使用的其他库可能没有。您可以获取这些库的源代码并将它们移植到 PCL，或者您可以为它们提供的功能创建可移植的抽象，并使用这些抽象来允许您调用特定于平台的代码。

以下是有关使用可移植类库的更多信息的一些来源：

*   博客文章：[如何使便携式类库为您工作](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)
*   BUILD 演示：[使用可移植类库创建跨平台应用程序](http://channel9.msdn.com/Events/Build/2012/3-004)
*   社区示例和更多信息的链接：[pcl.codeplex.com](http://pcl.codeplex.com/)

# regex - 字母数字值的正则表达式，可以包含连字符

> ID：15740518
> 
> 赞同：0
> 
> 时间：2013-04-01T09:04:01.483
> 
> 标签：regex

嗨，我必须验证可以具有字母数值和连字符的输入。不能以连字符开头。

**例子 -**

> abc-456,45678999,456-788 有效

**但**

> -2333hj-jj 无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:13:31.473

这个正则表达式可以做到：

```
^(\w+[-]?)+$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:12:59.457

```
 ^[a-zA-Z0-9][\-]?[a-zA-Z0-9] 
```

`^`字符指定输入的开始，它是一个字母数字字符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:26:06.393

如果您希望至少有一个数字存在，那么像这样使用

```
(?=.*[0-9].*)([a-zA-Z0-9]+[-]?){2} 
```

除此以外

```
([a-zA-Z0-9]+[-]?){2} 
```

# ruby-on-rails - Rails + 使用backbone.js 显示动态内容

> ID：15740519
> 
> 赞同：0
> 
> 时间：2013-04-01T09:04:09.713
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone.js

我正在使用骨干模型进行 API 调用，该模型返回带有帖子列表的 JSON。

每个帖子都是动态的，因为它可以是
1.**喜欢**或不**喜欢**
2.**评论**或未**评论**
3\. 与**公共**或**私人**或**群组共享**

现在在我的主干模板中显示帖子时，我正在做一个**if else**条件来显示动态内容。

```
<% if(jsonresponse["like"] == true){ *>
  <a href="/posts/1/like">Like</a>
<%} else %>
  <a href="/posts/1/like">Unlike</a>
<% } %>

<% if(jsonresponse.target == 'public'){ *>
  <a href="#">Public</a>
<%} else if(jsonresponse.target == 'private'){%>
  <a href="#">Private</a>
<% } else if(jsonresponse.target == 'groups'){%>
  <a href="#"><%= post.target.shared[0].displayName %></a>
<% } %> 
```

这是我们应该如何显示动态内容吗？
检查模板中的条件是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:08:33.810

我知道它看起来有点难看，但它没有任何问题。也许您可以将您的视图分成两个（喜欢/不喜欢...公共/私人/组），这样当用户单击喜欢/不喜欢时，您只会呈现上面的视图。

在我使用的 Handlebars 中，我们倾向于编写辅助函数来抽象这些 if/else 并使视图变得干净。这是一种选择，但如果你只有这种情况，那就有点过分了

# java - 记录 jsf 页面请求的 IP 地址

> ID：15740528
> 
> 赞同：1
> 
> 时间：2013-04-01T09:04:53.377
> 
> 标签：java, jsf-2, primefaces

我有一个正在运行的 JSF2 应用程序，现在想添加一个请求日志记录功能。

日志将保存到 db 并由标准用户/页面/IP 三重奏和其他生成的内容组成。

现在在托管 bean 中的 @PostConstruct 注释方法中调用 dao 方法，但这似乎是代码重复。

```
@PostConstruct
public void init() {
     loggingDao.save(user,page,ip);
} 
```

如何使用托管 bean 在 jsf 端集中这个日志记录/审计过程？由于这是一个横切场景，我不想将此代码添加到每个托管 bean。

**编辑** 这个问题得到了很多评论，这意味着它没有以正确的方式提出。

最后一次机会：我需要在我的站点上记录/观看用户交互，它可能是登录操作或单击按钮以列出项目（映射到支持 bean 方法）或页面导航/重定向。

我还假设我可以使用相同的架构来决定用户是否有权在网站上执行特定操作，但这是另一个故事，因为它的结果会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:08:52.443

您可以为此使用 servlet 过滤器或 JSF 阶段侦听器。如果要记录每个请求，包括 CSS 和 JavaScript 资源，请使用过滤器。如果您只对 JSF 请求感兴趣，可以使用阶段侦听器。只需进入“恢复视图之前”阶段并记录您想要的任何内容。

# linux - 从linux中文件的第一行提取数字

> ID：15740531
> 
> 赞同：1
> 
> 时间：2013-04-01T09:05:02.630
> 
> 标签：linux, bash

我有一个文件，其内容如下

```
SPEC.2.ATTRID=REVISION&
SPEC.2.VALUE=5&
SPEC.3.ATTRID=NUM&
SPEC.3.VALUE=VS& 
```

我正在使用以下命令仅从第一行中提取数字。这种方式有效还是你们想到了另一种方式？

```
cat ticketspecdata | tr -d " " | tr -s "[:alpha:]" "~" | tr -d "[=.=]" | cut -d "~" -f2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:13:02.393

使用[grep](/questions/tagged/grep "显示标记为“grep”的问题")：

```
$ grep -om1 '[0-9]\+' file
2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:17:26.337

或者

```
head -n1 file | tr -cd '[:digit:]' 
```

您可能还想了解 UUOC：

*   [http://porkmail.org/era/unix/award.html](http://porkmail.org/era/unix/award.html)

# java - 在 Java 中查找 DOM 元素的绝对位置的代码

> ID：15740533
> 
> 赞同：1
> 
> 时间：2013-04-01T09:05:12.757
> 
> 标签：java, javascript, dom, coordinates, jsoup

我正在用**Java**开发一个项目。

在这个项目中，我必须找到 DOM 元素的绝对位置。但我不知道该怎么做。

我在网上搜索，我发现 Javascript 也一样。我从[这里](http://www.kirupa.com/html5/get_element_position_using_javascript.htm)找到了这个。

**代码是这样**的，

```
function getPosition(element) {
    var xPosition = 0;
    var yPosition = 0;

    while(element) {
        xPosition += (element.offsetLeft - element.scrollLeft + element.clientLeft);
        yPosition += (element.offsetTop - element.scrollTop + element.clientTop);
        element = element.offsetParent;
    }
    return { x: xPosition, y: yPosition };
} 
```

当我尝试用 Java 编写此代码时，找不到**offsetLeft、offsetTop变量。**你能告诉我，我怎样才能用Java编写这段代码？

**编辑 1**

是否有任何使用**Jsoup**的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:31:47.283

只有两种方法可以让您在 Jsoup 中占有一席之地：

*   [Element.elementSiblingIndex()](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#elementSiblingIndex%28%29)
*   [Node.siblingIndex()](http://jsoup.org/apidocs/org/jsoup/nodes/Node.html#siblingIndex%28%29)

（你也可以得到孩子的数量）

但是Jsoup 中没有`offsetLeft`or`offsetTop`

# c# - Windows 手机 8 XMLParseException

> ID：15740539
> 
> 赞同：0
> 
> 时间：2013-04-01T09:05:33.330
> 
> 标签：c#, map

我正在编写我的第一个 Windows phone 8.0 应用程序。现在我想在其中一个页面上有一张地图。但总是出现以下错误：

> “TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：DefaultDomain）：“C:\windows\system32\mscorlib.ni.dll”geladen。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\System.Windows.RuntimeHost.ni.dll”凝胶。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\System.Windows.ni.dll”凝胶。Das Laden von Symbolen wurde übersprungen。Das Modulist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\System.Net.ni.dll”geladen。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\System.ni.dll”geladen。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\System.Xml.ni.dll”凝胶。Das Laden von Symbolen wurde übersprungen。Das Modulist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll: Silverlight AppDomain）：“C:\Data\Programs{5C2EF028-5C31-4B76-92FF-0E4CDCCDC1C27}\Install\PhoneApp2.DLL”geladen。象征 wurden geladen。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\Microsoft.Phone.ni.dll”geladen。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\Microsoft.Phone.Interop.ni.dll”凝胶。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C：\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\Microsoft.Phone.Maps.ni.dll”geladen。Das Laden von Symbolen wurde übersprungen。Das Modul ist optimiert, und die Debugoption "Nur eigenen Code" ist aktiviert。“TaskHost.exe”（CLR C:\windows\system32\coreclr.dll：Silverlight AppDomain）：“C:\windows\system32\en-US\mscorlib.debug.resources.dll”geladen。Das Modul wurde ohne Symbole erstellt。In System.UnauthorizedAccessException ist eine Ausnahme vom Typ "System.Windows.ni.dll" aufgetreten, die nicht vor einer verwalteten/systemeigenen Grenze behandelt wurde In System.UnauthorizedAccessException ist eine Ausnahme vom Typ "Microsoft.Phone.Maps.ni.dll" aufgetreten, die nicht vor einer verwalteten/systemeigenen Grenze behandelt wurde In System。

我做了一个只有地图的新项目，看看问题出在哪里。但这无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T08:08:10.820

这是因为，您没有授予您的应用程序使用地图功能的权利。

只需打开您的**WMAppManifest.xml**：

*   打开*功能*选项卡
*   查看*`ID_CAP_MAP`*

# c# - 如何构建动作链接

> ID：15740541
> 
> 赞同：0
> 
> 时间：2013-04-01T09:05:33.843
> 
> 标签：c#, asp.net, asp.net-mvc

我在 asp.net mvc 4 中有以下页面结构。

```
 Department            Full Time Employees      Part Time Employees
-----------            ---------------------------------------------
Department 1          |1\. Employee 1                  
Department 2          |2\. Employee 2
                      | 
```

其中第 1 部门、第 2 部门、全职员工和兼职员工是链接。单击任何链接都会显示一些员工。以下是可能的选项

1.  当用户第一次浏览该页面时，会显示第一个部门（部门 1）的全职员工。
2.  当用户点击部门 2 时，会显示部门 2 的全职员工（因为已默认选择全职链接）
3.  当用户单击 Part Time 时，将显示所选部门的兼职员工。

我不知道如何为这些不同的链接构建动作链接。我瞄准的目标结果是

1.  www.example.com/Department1/fulltime
2.  www.example.com/Department1/parttime
3.  www.example.com/Department2/fulltime
4.  www.example.com/Department2/parttime

    谢谢

**更新**

这里的问题是如何构建动作链接而不是如何将它们路由到控制器。目前我确实有一个行动是我的家庭控制器，它接受部门和全职/兼职。我无法弄清楚的是如何跟踪事情。例如，如果用户在已选择部门 2 的情况下单击 Part Time 链接，Part Time 的链接如何将所选部门传递给操作方法，以便控制器知道它必须显示来自所选部门的兼职员工。与选择了 Part Time 类似，如果用户单击部门，部门链接如何将信息传达给控制器，它必须在单击的部门中显示兼职员工。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:46:19.717

据我了解，我认为您需要的是*routing*。看一下

[MVC.Net 路由](https://stackoverflow.com/questions/379558/mvc-net-routing)

和接受的答案。有一个简短的解释如何创建自定义路由来实现你上面描述的。您将需要创建一个控制器，其中包含一个带有两个参数的操作，`string department`以及另一个（字符串或枚举或任何`DefaultModelBinder`可以绑定的东西）用于全职或兼职，然后将您的路由映射到此控制器和操作。

由于路由是双向的，因此必须正确映射您的路由才能创建正确的操作链接。正如您在[msdn](http://msdn.microsoft.com/en-us/library/system.web.routing.route.aspx)中看到的，`System.Web.Routing.Route`该类还有一个虚拟方法`GetVirtualPath`。一旦您尝试使用 - 方法（或其重载之一）创建操作链接，框架将“查询”路由（遵守路由约束等）并基于路由值`Html.ActionLink`构建所谓的*虚拟路径*假如。

假设您创建了一个名为的控制器`HomeController`，它看起来类似于

```
public sealed class HomeController : Controller
{
    public ActionResult Index(string department, EmployeeType employeeType)
    {
        /* ... */
    }
}

public enum EmployeeType
{
    FullTime,
    PartTime,
} 
```

您可以创建一个操作链接（从任何视图中），如下所示：

```
Html.ActionLink(
    "Full-time employees of department 1",
    "Index", // action
    "Home", // controller
    new
    {
        department = "Department1", // first argument
        employeeType = EmployeeType.FullTime, // second argument
    },
    htmlAttributes: null); 
```

**然后，只要匹配的路由`GetVirtualPath`正确**实现（无论这意味着什么），它就会根据您的需要创建一个带有 url 的链接。默认实现*可能会*创建一个类似`/Home/Index?department=Department1&employeeType=0`. 然后你需要在or中派生`System.Web.Routing.Route`、覆盖、实现`GetVirtualPath`和注册路由。`App_Start``Global.asax`

# cassandra - Cassandra Replication With in cluster without partitioning Data

> ID：15740542
> 
> 赞同：0
> 
> 时间：2013-04-01T09:05:36.187
> 
> 标签：cassandra

我在集群中有 3 个节点

```
 Node1 = 127.0.0.1:9160
     Node2 = 127.0.0.2:9161
     Node3 = 127.0.0.3:9162 
```

        我只想使用一个节点（node1）进行插入。其他两个节点应该用于写入数百万条记录的容错。即当node1 关闭时，node2 或node3 应该注意写入。为此，我形成了一个复制因子为2 的集群，并在cassandra.yalm 文件中正确添加了种子节点。它工作正常。但是由于每当我将数据写入节点 1 时都会发生分区，因此行会分散在集群中的所有节点上。那么有什么方法可以将节点**仅用于集群中的复制**？...或者有什么方法可以**禁用分区**？...

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:46:19.817

不，Cassandra 是一个完全分布式的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T12:23:29.657

你想在这里达到什么目的？我们有一个 RF=3 的 6 节点集群，并且由于 PlayOrm 修复了他们在 astyanax 中的配置错误，即使我们开始获得一个慢速节点，它也会自动开始转到其他节点以保持系统快速。你为什么要避免这样的伟大功能？？？？如果您的主节点变慢，您将陷入困境。

如果您更好地描述您的用例，我们也许可以为您提供更好的想法。

# haskell - Haskell中的多个where语句有什么办法吗

> ID：15740543
> 
> 赞同：21
> 
> 时间：2013-04-01T09:05:37.760
> 
> 标签：haskell, syntax, where-clause, guard-clause, function-definition

我试图在一个函数中编写 3-4 where 语句，但我得到错误并且无法做到，我试图做这样的事情：

```
foo x=
| x == foo1 = 5
| x == foo2 =3
| x == foo3 =1
| otherwise =2 
where foo1= samplefunct1 x
      foo2= samplefunct2 x
      foo3= samplefunct3 x 
```

我知道代码有点没用，但我写这个只是为了举例说明我的意思。

有没有人可以帮助我？提前致谢。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-01T09:11:41.870

删除`=`之后`foo x`并缩进您的代码，例如

```
foo x
    | x == foo1 = 5
    | x == foo2 =3
    | x == foo3 =1
    | otherwise =2 
    where foo1 = samplefunct1 x
          foo2 = samplefunct2 x
          foo3 = samplefunct3 x 
```

你很好。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-01T13:12:43.100

If your indentation is a bit uneven, like this:

```
foo x
 | x == foo1 = 5
 | x == foo2 =3
 | x == foo3 =1
 | otherwise =2 
 where foo1= samplefunct1 x
        foo2= samplefunct2 x
         foo3= samplefunct3 x 
```

then indeed, the error message talks about unexpected `=` [(and in the future, please do include full error message in the question body).]

You fix this error by re-aligning, or with explicit separators `{ ; }`, making it white-space–insensitive:

```
foo x
 | x == foo1 = 5
 | x == foo2 =3
 | x == foo3 =1
 | otherwise =2 
 where { foo1= samplefunct1 x ;
        foo2= samplefunct2 x ;
          foo3= samplefunct3 x } 
```

This runs fine (not that it is a nice style to use). Sometimes it even looks even to you, but isn't, if there are some ***tab characters*** hiding in the white-space.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-01T09:11:54.517

这段代码几乎是正确的，你只需要正确的缩进：空格在 haskell 中很重要。此外，使用`=`after`foo`是守卫的错误，因此您也必须将其删除。结果是：

```
foo x
  | x == foo1 = 5
  | x == foo2 =3
  | x == foo3 =1
  | otherwise =2 
  where foo1= whatever1 x
        foo2= whatever2 x
        foo3= whatever3 x 
```

# jquery - 单击元素边缘时快速单击不起作用（iOS）

> ID：15740544
> 
> 赞同：4
> 
> 时间：2013-04-01T09:05:42.207
> 
> 标签：jquery, ios, iphone-web-app

我正在使用来自 FTLabs 的[Fastclick 0.6.2](https://github.com/ftlabs/fastclick)，我希望它能够工作，以消除 iOS 上 300 毫秒的延迟，但在我的应用程序中，当我点击 href 块的边缘时，它会检测到点击，并且什么都没发生。

这是一个简单的演示页面，它有一个带有 JS 的随机数生成器和两个页面链接： http: [//nicmar.nu/fastclick/fastclick2b.htm](http://nicmar.nu/fastclick/fastclick2b.htm)（在您的 iOS 浏览器中打开）

1.  如果我单击第一个绿色字段的上边缘或下边缘，则会显示灰色 webkit-tap-highlight-color，但它不会运行 href 上的代码 test()。

2.  第二个绿色字段也是如此，它有一个指向页面本身的链接。

3.  第三个绿色字段是指向另一个页面的链接。当我单击此处的上边缘或下边缘时，地址栏会显示，它向用户指示正在发生某些事情，但事实并非如此。

该问题发生在 iOS 6.1 中的 iPhone 4 和 iPhone 5 上，以及带有 iOS 6.0 的 iPad 上。如果没有 fastclick，它可以按预期工作，但是有 300 毫秒的延迟。

**这是一个显示正在发生的事情的视频：http:**
[//youtu.be/34kavjxc9xg](http://youtu.be/34kavjxc9xg)

PS。我会使用 jsfiddle，但由于 jsfiddle 显示带有 iframe 的“假全屏”，因此无法在我的 iOS 上正确显示元/视口比例。如果有人能告诉我如何解决这个问题，我可以在那里输入。

PS2：我将此作为问题发布在[Fastclick github 页面上](https://github.com/ftlabs/fastclick/issues/86)，但没有得到回复。

[![快速点击错误](https://i.stack.imgur.com/kLXIg.png)](https://i.stack.imgur.com/kLXIg.png)
[（来源：[nicmar.nu](http://www.nicmar.nu/fastclick/fastclick-error-2.png)）]

# stringtemplate - StringTemplate4 如果有条件的长度

> ID：15740546
> 
> 赞同：0
> 
> 时间：2013-04-01T09:05:53.580
> 
> 标签：stringtemplate, stringtemplate-4

我需要使用 StringTemplate4 生成以下类型的代码：

```
methodFoo0(Connection conn);
methodFoo1(Connection conn, int arg1);
methodFoo2(Connection conn, int arg1, int arg2); 

etc. 
```

“连接连接”部分始终存在，因此我只将方法名称和其余参数传递给我的 ST 模板。我的模板如下所示：

```
<methodName>(Connection conn, <args; separator=", ">); 
```

这可行，但当根本没有参数时会产生一个额外的逗号（conn 除外）：

```
methodFoo0(Connection conn,); 
```

为了消除额外的逗号，我尝试使用**if**条件和**长度**ST4 函数，但我无法让它工作，尽管我尝试了如下各种组合：

```
<methodName>(Connection conn <if (length(fieldsInFind) \> 0)>,<else><endif><fieldsInFind; separator=", ">) 
```

...以及其他都因一些与解析相关的错误而失败（*输入不匹配*）。

最后，我放弃了，而是根据预渲染逻辑将**逗号参数传递给模板，它要么是“，”，要么是空字符串“”。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:19:06.923

您可以使用检查第二个参数是否存在，`<if (fieldsInFind)>`并且仅在其大小大于 0 时将其传递给模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-07T14:40:33.057

额外的逗号不是由分隔符产生的，而是您已经在 之后键入的逗号`Connection conn,`。

您执行以下操作：

`<methodName>(Connection conn<if(args)>,<args; separator=", "><endif>)`

请注意 conn 后的逗号仅在实际上有更多参数时才放置。

# c++ - 用部分实例化的祖先类替换完全实例化的类

> ID：15740553
> 
> 赞同：1
> 
> 时间：2013-04-01T09:06:37.383
> 
> 标签：c++, templates, inheritance, instantiation, sfinae

当我在表单中给出模板参数时，我想`accepted_dense_vector<??>::value`返回：`'true'`

`C<T>`什么时候`C`是`uvector`，`dynamic_array`并且`T`是`std::is_arithmetic`。

`std::array<T,S>``T`什么时候`std::is_arithmetic`。

`container_reference<C>`什么时候`accepted_dense_vector<C>::value`是“真的”。

一切正常，但在派生的、完全实例化的类 A、C、D 中，我想删除解决方法`parent`定义。

我怎样才能做到这一点？

```
#include <iostream>
#include <array>
using namespace std;

// Definition of used types.
template<typename T> struct dynamic_array {};
template<typename T> struct uvector {};
struct A : public uvector<double> { typedef uvector<double> parent; };
struct C : public A { typedef A parent; };
struct D : public std::array<double,5> { typedef std::array<double,5> parent; };
template<typename T> struct B : public uvector<T> { typedef uvector<T> parent; };
template<typename T> struct container_reference {};

// Catches 'false', A, C, D  ======== HERE IT IS !!! ========
template<typename C> struct accepted_dense_vector
{
    template<typename C1 = C>
    static typename std::enable_if<accepted_dense_vector<typename C1::parent>::value, std::true_type>::type helper(const C&);
    static std::false_type helper(...);

    constexpr static bool value = decltype(helper(std::declval<C>()))::value;
};
// Catches C<T>
template<template<typename> class C, typename T>
struct accepted_dense_vector<C<T>>
{
    constexpr static bool value = std::is_arithmetic<T>::value &&
        (std::is_base_of<uvector<T>, C<T>>::value || std::is_base_of<dynamic_array<T>, C<T>>::value);
};
// Catches std::array<T,S>
template<typename T, size_t S>
struct accepted_dense_vector<std::array<T,S>>
    { constexpr static bool value = std::is_arithmetic<T>::value; };

// Catches container_reference<C>
template<typename C>
struct accepted_dense_vector<container_reference<C>>
    { constexpr static bool value = accepted_dense_vector<C>::value; };

int main()
{ // Tests!
    cout << accepted_dense_vector<std::array<double, 5>>::value << endl;
    cout << accepted_dense_vector<uvector<double>>::value << endl;
    cout << accepted_dense_vector<A>::value << endl;
    cout << accepted_dense_vector<D>::value << endl;
    cout << accepted_dense_vector<B<int>>::value << endl;
    cout << accepted_dense_vector<container_reference<uvector<double>>>::value << endl;
    cout << accepted_dense_vector<int>::value << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:13:52.853

您可以通过您的解决方案走得更远。首先，您不需要`std::enable_if`. 代码将更具可读性。然后，`std::true_type`使用将调用的自定义结构而不是 using `accepted_dense_vector`：

```
template<typename T>
struct forwarder
{
    constexpr static bool value = accepted_dense_vector<T>::value;
};

template<typename T>
static forwarder<uvector<T>> inherit_uvector(uvector<T>*);

static std::false_type inherit_uvector(...); 
```

然后，要知道类型是否`accepted...`通过继承满足`uvector<T>`，只需使用以下行：

```
constexpr static bool is_uvector = decltype(inherit_uvector(new C()))::value;
// C is the template parameter of accepted_dense_vector 
```

这是如何工作的？

*   如果`C`继承`uvector<T>`，则选择第一个静态函数，并且 decltype 将返回`forwarder<uvector<T>>`。然后，“调用”`::value`它会调用`accepted...`.
*   否则，如果`C`不继承`uvector<T>`，则选择第二个函数，并且 decltype 将返回`std::false_type`。

相同的技巧可以用于其他继承。此外，`B<T>`还被`accepted...`. 因此，`::parent`不再需要 typedef。

这是完整的代码（[住在这里](http://liveworkspace.org/code/3maWAb%240)）：

```
#include <iostream>
#include <array>
#include <string>
using namespace std;

// Definition of used types.
template<typename T> struct uvector {};
template<typename T> struct dynamic_array {};
template<typename T> struct container_reference {};

struct A : public uvector<double> {};
template<typename T> struct B : public uvector<T> {};
struct C : public A {};
struct D : public std::array<double,5> {};
struct E : public uvector<string> {};
struct F : public std::array<string,16> {};

// Catches 'false', A, C, D  ======== HERE IT IS !!! ========
template<typename C>
struct accepted_dense_vector
{
   template<typename T>
   struct forwarder
   {
      constexpr static bool value = accepted_dense_vector<T>::value;
   };

   // uvector
   template<typename T>
   static forwarder<uvector<T>> inherit_uvector(uvector<T>*);
   static std::false_type inherit_uvector(...);

   // std::array
   template<typename T, size_t S>
   static forwarder<std::array<T,S>> inherit_stdarray(std::array<T,S>*);
   static std::false_type inherit_stdarray(...);

   // same for dynamic_array<T>

    constexpr static bool is_uvector = decltype(inherit_uvector(new C()))::value;
    constexpr static bool is_stdarray = decltype(inherit_stdarray(new C()))::value;
    constexpr static bool value = is_uvector || is_stdarray;
};

// Catches C<T>
// /!\ Also catches anything which is template<typename> class (for example, B)
// => B::parent is not needed, because of the use of std::is_base_of
template<template<typename> class C, typename T>
struct accepted_dense_vector<C<T>>
{
    constexpr static bool value = std::is_arithmetic<T>::value &&
        (std::is_base_of<uvector<T>, C<T>>::value || std::is_base_of<dynamic_array<T>, C<T>>::value);
};

// Catches std::array<T,S>
template<typename T, size_t S>
struct accepted_dense_vector<std::array<T,S>>
{
   constexpr static bool value = std::is_arithmetic<T>::value;
};

// Catches container_reference<C>
template<typename C>
struct accepted_dense_vector<container_reference<C>>
{
   constexpr static bool value = accepted_dense_vector<C>::value;
};

int main()
{ // Tests!
    cout << "array = " << accepted_dense_vector<std::array<double, 5>>::value << endl;
    cout << "uvector = " << accepted_dense_vector<uvector<double>>::value << endl;
    cout << "ref = " << accepted_dense_vector<container_reference<uvector<double>>>::value << endl;
    cout << "A = " << accepted_dense_vector<A>::value << endl;
    cout << "B = " << accepted_dense_vector<B<int>>::value << endl;
    cout << "C = " << accepted_dense_vector<C>::value << endl;
    cout << "D = " << accepted_dense_vector<D>::value << endl;
    cout << "E = " << accepted_dense_vector<E>::value << endl;
    cout << "F = " << accepted_dense_vector<F>::value << endl;
    cout << "int = " << accepted_dense_vector<int>::value << endl;

    return 0;
} 
```

# command - Cygwin 命令不起作用

> ID：15740556
> 
> 赞同：1
> 
> 时间：2013-04-01T09:06:56.120
> 
> 标签：command, cygwin, rpm, ls

很抱歉，我的问题似乎相当模糊，但这是我面临的全部问题。从网站下载后，我尝试在 cygwin 上安装 rpm 包，但我总是遇到同样的错误

```
-bash: rpm: command not found 
```

而且我已经重新安装了两次，但我总是遇到同样的问题，不仅如此，我什至不能使用像 ls 这样的简单命令。即使我写 ls 我也没有输出。这就是我的屏幕的样子。

```
User@User-PC ~
$ rpm -ivh avr-binutils-2.17tinyos-3.cygwin.i386.rpm
-bash: rpm: command not found

User@User-PC ~
$ locate rpm | grep bin

User@User-PC ~
$ 

User@User-PC ~
$ ls

User@User-PC ~
$ 
```

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T19:03:17.600

首先，`locate`不会自动更新自己；您必须`updatedb`定期运行以获取当前文件列表。为获得最佳速度和可用性，请添加`--prunepaths`和`--prunefs`开关。

其次，尝试`echo $PATH`查看当前路径，并`ls`使用完全限定的路径名​​进行调用：`/bin/ls -l`

我怀疑`ls`设置为无效的别名或内部函数（错误的命令参数）。检查 ~/.bash_profile、~/.bashrc 和 ~/.profile 的内容。

# mysql - mysql这个条件更新语句的正确语法是什么

> ID：15740557
> 
> 赞同：2
> 
> 时间：2013-04-01T09:07:05.933
> 
> 标签：mysql, sql, sql-update, case

MYSQL，我想要的是像

```
update tablename 

case fieldA

when value1 then set fieldX0=xxx,fieldX1=bbb,fieldX2=ccc ...

when value2 then set fieldY0=yyy,fieldY1=eee,fieldY2=fff ...

end 
```

它的正确和简单的语法是什么？非常感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T09:09:06.473

应该这样写：

```
UPDATE tablename
SET fieldX = CASE WHEN fieldA = 'value1' THEN 'xxx' ELSE fieldX END,
    fieldY = CASE WHEN fieldA = 'value2' THEN 'yyy' ELSE fieldY END
WHERE fieldA IN ('value1', 'value2'); 
```

**注意：**我`ELSE`是这样写的，因为默认`ELSE`是`NULL`如果`CASE`表达式的条件无效，所以这会将它设置为原始值而不是`NULL`值。

# ios - 如果通过 performSelectorInBackground 控制 UI 会发生什么？

> ID：15740561
> 
> 赞同：1
> 
> 时间：2013-04-01T09:07:13.000
> 
> 标签：ios, objective-c, multithreading, user-interface, uiview

我阅读了一些 UI 界面仅在 MainThread 上更新的信息。

我需要异步更新一些`UIButton`s，所以我使用`performSelectorInBackground`它在模拟器和设备（iPad4）上工作正常。

```
[self performSelectorInBackground:@selector(toggleToUpperWhenSingleShift) withObject:nil];

- (void)toggleToUpperWhenSingleShift{
    shiftStateIndicator = 1;
    for (UIView *aPad in self.subviews) {
        if ( [aPad isKindOfClass:[UIButton class]] ) {
            UIButton *aButPad = (UIButton *)aPad;
            NSMutableString *currentTitle = [NSMutableString stringWithString:[aButPad titleForState:UIControlStateNormal]];
            NSString *firstChar = [currentTitle substringToIndex:1];
            [currentTitle replaceCharactersInRange:NSMakeRange(0, 1) withString:[firstChar uppercaseString]];
            [aButPad setTitle:currentTitle forState:UIControlStateNormal];
            [aButPad setTitle:currentTitle forState:UIControlStateHighlighted];

            currentTitle = [NSMutableString stringWithString:[aButPad titleForState:UIControlStateSelected]];
            firstChar = [currentTitle substringToIndex:1];
            [currentTitle replaceCharactersInRange:NSMakeRange(0, 1) withString:[firstChar uppercaseString]];
            [aButPad setTitle:currentTitle forState:UIControlStateSelected];
        }
    }
} 
```

我担心如果我保留我的代码会发生一些不需要的功能。谁能给我详细解释一下`performSelectorInBackground`？

为什么不使用它来更新 UI 以及为什么我的应用程序没问题？无论如何调试问题将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T01:21:01.073

`performSelectorInBackground:`几乎从来都不是你想要的，对于几乎任何事情（当然不是自 GCD 创建以来）。它会创建一个您几乎无法控制的新线程。只要您分派给它的方法，该线程就会运行。

通过“小控制”，我的意思是您不会`NSThread`返回对象，因此很容易多次意外调用此方法并派生无限数量的线程。我已经在几个程序中看到了这种情况。

在 iOS 中，您几乎不应该手动创建线程。GCD 并`NSOperation`处理几乎所有手动线程可以做的事情，但更好。您通常需要线程池，这样您就不会一直启动和停止线程。GCD 为您提供。您想限制创建的线程数，以免使处理器不堪重负。GCD 为您提供。您希望能够轻松确定后台操作的优先级。GCD 也为您提供。

说了这么多，我不明白你为什么要在后台线程上执行上述操作。几乎所有的工作都是 UI 更新。永远不要尝试在后台线程上修改 UI。这是未定义的行为，当它出错时，它会出错。它在少数情况下起作用的事实毫无意义。UIKit 不是线程安全的。你应该只调用`toggleToUpperWhenSingleShift`主线程。我看不出有什么东西会阻止你，而且上下文切换到后台线程的开销在这里真的不值得（即使它是安全的，但事实并非如此）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:34:11.037

Apple 强烈建议不要在后台线程中更改 UI。

您应该使用`performSelectorOnMainThread`或向 UI 线程的调度队列发送消息，并从那里进行 UI 修改。

```
dispatch_async(dispatch_get_main_queue(), ^{
  // your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:51:45.100

强烈建议不要从后台线程（例如计时器、通讯等）更新 UI 控件等。这可能是导致有时很难识别的崩溃的原因。而是使用这些来强制代码在 UI 线程（始终是“主”线程）上执行。

转到[http://www.ios-developer.net/iphone-ipad-programmer/development/threads/updating-ui-controls-on-background-threads](http://www.ios-developer.net/iphone-ipad-programmer/development/threads/updating-ui-controls-on-background-threads)

供进一步阅读。

# java - 如何使用 SimpleDateFormat 格式化我的日期？

> ID：15740565
> 
> 赞同：0
> 
> 时间：2013-04-01T09:07:29.817
> 
> 标签：java, date, simpledateformat

我正在尝试设置日期格式，但是当我运行此代码时

```
String oldstring = "2013-01-1";
System.out.println("oldstring = "+oldstring);
Date date = new SimpleDateFormat("yyyy-mm-dd").parse(oldstring);
System.out.println("datefield = "+date); 
```

我拿结果：

```
oldstring = 2013-01-1
datefield = Tue Jan 01 00:01:00 MSK 2013 
```

为什么日期字段不等于 2013-01-1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:09:47.173

起初`mm`是`yyyy-mm-dd`平均分钟而不是月份。设置月份使用`MM`。

它看起来像这样：

```
Date date = new SimpleDateFormat("yyyy-MM-dd").parse(oldstring); 
```

**更新** 试试这个：

```
String oldstring = "2013-01-1";
System.out.println("oldstring = "+oldstring);
Date date = new SimpleDateFormat("yyyy-mm-dd").parse(oldstring);
String sdf = new SimpleDateFormat("yyyy-mm-dd").format(date);
System.out.println("datefield = "+sdf); 
```

如果您不使用`new SimpleDateFormat("yyyy-mm-dd").format(date);` 您将获得包含所有信息的标准日期格式。如果你想要特殊格式，你需要使用
`new SimpleDateFormat("yyyy-mm-dd").format(date);`

[另请阅读有关日期格式的这篇文章](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:12:27.437

datefield 的类型是 Date，因此 toString 方法基本上总是返回相同的格式，因为您没有覆盖它。

所以你需要做的，基本上是：

```
String oldstring = "2013-01-1";
System.out.println("oldstring = "+oldstring);
SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
Date date = sdf.parse(oldstring);
System.out.println("datefield = "+date);
String outDateStr = sdf.format(date);
System.out.println("newstring = "+outDateStr); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T09:10:11.613

使用 MM 表示月份。mm 是分钟

# c++ - `ui.listView->setModel(new QStringListModel(list));` 会导致内存泄漏

> ID：15740569
> 
> 赞同：0
> 
> 时间：2013-04-01T09:07:39.637
> 
> 标签：c++, qt

您好我目前正在学习QT。我正在使用以下代码

```
QStringList list;
list << "item1" << "item2" << "item3" << "item4" << "item5";
ui.listView->setModel(new QStringListModel(list)); 
```

现在我的理解是，`ui.listView->setModel`它作为对堆上对象的引用传递。这个对象不需要删除吗？我应该在这里使用升压安全指针有什么建议吗？因为每次更新列表的内容时，我都必须调用最后一条语句来更新显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:13:47.610

是的，在这种情况下，您应该删除新的 QStringListModel(list)，但是如果您稍微更改代码，它将由您的 listView 完成：

```
ui.listView->setModel(new QStringListModel(list, ui.listView)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:16:39.870

很难从这么少的代码中分辨出来，但是是的，您正在堆上创建一个对象，您可能会丢失其地址，因此存在潜在的内存泄漏风险。您应该为自己定义一个指向对象的全局指针，并`delete`在需要新指针时定义它。
更好的是创建一个`class`包含对当前引用的小文件，`QStringListModel`并定义一些方法来创建一个新的，同时删除旧的。

```
class ListModelHolder {

 private:
    QStringListModel* model;

 public:
    ListModelHolder() { model = 0; }
    ~ListModelHolder() { if(model != 0) delete model; }

    set_model(QStringListModel* model) { this->model = model; }
    delete_model() { if(this->model) delete this->model; this->model = 0; }  
  }; 
```

举个例子。您可以将此对象保持在全局范围内或根据需要保持在全局范围内。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:16:52.843

[QListView::setModel](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setModel)不获取模型或选择模型的所有权，除非模型的父级是列表视图。这是因为一个模型可以在几个不同的视图之间共享。这意味着通常由您来照顾模型的生命并手动删除它。

我建议您自己管理它，并使用指向您班级中的模型的指针。这也将使您能够修改模型使用的字符串列表。

# php - 从数据库中选择下拉类别后，如何显示 mysql 表中的图像？

> ID：15740571
> 
> 赞同：1
> 
> 时间：2013-04-01T09:07:44.633
> 
> 标签：php, mysql, jquery

我想在网页上显示一个基于类别的购物项目，其中包含可以在大多数在线购物网站中找到的图像。我创建了**两个**mysql 表：带有 id 、 category_name 的 Ist**和带有 id**、**categoryid**、**product**、**image_path**的**第二**个**表**。我可以在页面上一次显示所有产品图片，但我不知道如何显示从下拉列表中选择的单个类别的产品图片，页面顶部带有提交按钮。我希望我的观点对所有人都很清楚，否则请随时问我。

 ******下面我附上了我的代码，它一次显示我的 php 页面上的所有产品图像，没有任何下拉列表。欢迎对此提出任何想法和建议。

```
 <head>
 <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
 <title>Untitled Document</title>
 <style type="text/css">
  ul, li {
 list-style-type:none;
 }

ul.display {
width: 500px;
}

ul.display li { 
float: left;  
width: 100px; 
height: 120px;
margin-left: 5px; 
margin-right: 5px;
margin-bottom: 5px;
position: relative;
vertical-align:middle;
text-align:center;
}
ul.display li a img {
 width: 94px; 
height: 114px;
display: inline; 

}

 </style>
 </head>

  <body>

  <div align="center">
 <?php  
  include('connect.php'); 
   $SQL = "SELECT * from becuart";
    $result = mysql_query( $SQL );
    echo "<ul class='display'>";
    while( $row = mysql_fetch_array( $result ) ) {
    $filepath = $row["path"];

    echo "<li>";
    echo "<a href=\"$filepath\"><img src=\"$filepath\" border=\"0\"></a>";
    echo "</li>";
     }
    echo "</ul>";
    ?>
   </div>

   </body>
   </html>` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:14:28.673

```
SELECT id, name, path FROM table;

...
<select name ...>
<?php
while( $row = mysql_fetch_array( $result ) ) {
?>
<option name="id" value="<?= $row['id']; ?>"><?= $row['name']; ?></option>
<?php
}
?>
</select> 
```

因此，通过 javascript/jquery 打开在 POSTed $row['id']; 上回答的 img；(SELECT path FROM table WHERE id = ?;) 或通过简单的 $_POST['id'] 字段名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:42:11.400

因为它太长了->新答案：

```
<?php
include 'dbconnect.php';
?>

<form name="product" method="post" action="">
<table align="right" width="10%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td>Category</td>
<td>
<select name="category">

<?php
$sql = "SELECT id, art_name, path FROM category;";
$result = mysql_query($sql);
while ($row = mysql_fetch_assoc($result)) {
?>

<option value="<?= $row['id']; ?>"><?= $row['art_name']; ?></option>

<?php } ?>
</select>
</td>
</tr>
<tr>
<td>&nbsp;</td>
<td><input name="go" type="submit" value="Go" /></td>
</tr>
</table>
   </form>
<div align="center">

 <ul class='display'>
 <?php
 $id = (int)$_POST['category'];
 $sql_search = "SELECT id, art_name, path FROM category WHERE id = $id";
 $search = mysql_query($sql_search);
 if (isset($_POST['go'])) {
 while ($row = mysql_fetch_assoc($search)) {
     ?>

<li><a href="<?= $row['path']; ?>"><img src="<?= $row['path']; ?>" border="0"></a></li>
<?php }

}

else {

}

?>
</div> 
```******

# mysql - MySQL 到 SQLite 转换器

> ID：15740572
> 
> 赞同：5
> 
> 时间：2013-04-01T09:07:50.220
> 
> 标签：mysql, sqlite, converter

我有两张桌子

```
regions(id, name)
countries(id, name, region_id) 
```

这是 MySQL 格式，我想将其转换为 SQLite 数据库。我已经尝试了一些软件，但我无法将其转换。

考虑到它是一个相当简单的表格，是否有任何简单的方法可以转换它们。

我查看了以下链接

[http://www.sqlite.org/cvstrac/wiki?p=ConverterTools](http://www.sqlite.org/cvstrac/wiki?p=ConverterTools)

[http://dbconvert.com/convert-sqlite-to-mysql-pro.php](http://dbconvert.com/convert-sqlite-to-mysql-pro.php)

要么软件是付费的，要么我无法让它们工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:12:47.253

[http://www.fileguru.com/DBConvert-For-SQLite---MySQL/info](http://www.fileguru.com/DBConvert-For-SQLite---MySQL/info) 我希望这是你要找的。请检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T12:58:58.713

请参阅[此要点](https://gist.github.com/esperlu/943776)。它适用于 Linux。

# c# - Java如何发现WCF服务？

> ID：15740574
> 
> 赞同：0
> 
> 时间：2013-04-01T09:07:51.900
> 
> 标签：c#, java, wcf, web-services, ws-discovery

请访问[http://www.codeproject.com/Articles/31285/WS-Discovery-for-WCF](http://www.codeproject.com/Articles/31285/WS-Discovery-for-WCF,I)，我已经下载了源代码并使用相关的 WSDiscovery 在 .NET Framework 3.5 中编写了一个 WCF 服务，并将该服务发布到源代码中具有相同配置的网页。它运行正确，WCF客户端也可以发现这个服务。现在我的问题来了，Java客户端可以通过WS-Discovery或其他人发现这个服务吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:23:00.353

谷歌返回的第一件事是[java-ws-autodiscovery](http://code.google.com/p/java-ws-discovery/)。Java 人员使用了一个“轴”框架，我认为它包含了大部分 WS* 互操作性。从我所看到的应该得到支持。从未使用过它们，只是阅读它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T02:00:07.467

最新版本的 CXF 支持 WS-Discovery。看：

[http://cxf.apache.org/docs/ws-discovery.html](http://cxf.apache.org/docs/ws-discovery.html)

和

[http://www.dankulp.com/blog/2013/05/apache-cxf-and-ws-discovery/](http://www.dankulp.com/blog/2013/05/apache-cxf-and-ws-discovery/)

# python - python - 如何删除单词之间的标点符号

> ID：15740579
> 
> 赞同：5
> 
> 时间：2013-04-01T09:08:11.747
> 
> 标签：python

我使用代码从标点符号中删除一行文本：

```
line = line.rstrip("\n")
line = line.translate(None, string.punctuation) 
```

问题是像`doesn't`turn to这样的词，`doesnt`所以现在我只想删除词之间的标点符号，但似乎无法找到这样做的方法。我该怎么办？

编辑：我考虑过使用该`strip()`功能，但这只会对整个句子的左右尾随生效。

例如：

```
Isn't ., stackoverflow the - best ? 
```

应该变成：

```
Isn't stackoverflow the best 
```

而不是当前输出：

```
Isnt stackoverflow the best 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T09:12:27.300

假设您将单词视为由空格分隔的字符组：

```
>>> from string import punctuation
>>> line = "Isn't ., stackoverflow the - best ?"
>>> ' '.join(word.strip(punctuation) for word in line.split() 
             if word.strip(punctuation))
"Isn't stackoverflow the best" 
```

或者

```
>>> line = "Isn't ., stackoverflow the - best ?"
>>> ' '.join(filter(None, (word.strip(punctuation) for word in line.split())))
"Isn't stackoverflow the best" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T09:28:17.017

```
line = line.translate(None, string.punctuation.replace('\'', '')) 
```

这是你想要的吗？

# multithreading - 将 MySQL 重新连接到工作线程时，MySQL 多线程应用程序和段错误

> ID：15740587
> 
> 赞同：0
> 
> 时间：2013-04-01T09:08:41.600
> 
> 标签：multithreading, segmentation-fault, libmysql, mysql

我有 MySQL 的多线程应用程序客户端，我使用 MySQL C 客户端 (libmysqlclient_r)。我有数据库连接池，我在创建线程工作者（pthread_create）之前打开连接。

每个工作人员在开始工作之前仅从连接池中获取单个连接，并在完成工作后将其放入池中。每个工人都使用它独特的连接。

但是，数据库服务器非常过载，并且 MySQL 客户端出现错误：MySQL“在查询期间丢失了与 MySQL 服务器的连接”或“MySQL 服务器已消失”。我的应用程序在工作线程中重新连接：

```
my_bool res = mysql_ping(c->mysql);
if (res) {
    mysql_close(c->mysql);
    mysql_thread_end();

    c->mysql = mysql_init(NULL);
    mysql_thread_init();                

    struct conn_desc *cd = &c->db->cds[c->num];
    syslog(LOG_ERR, "reconnect :[%s:%d]\t%s\tnew MySQL=%X tid=%X\n", cd->host,  cd->port, c->db->default_db_name, c->mysql, pthread_self());

    res = mysql_real_connect(c->mysql, cd->host, cd->login, cd->passwd, c->db->default_db_name, cd->port, NULL, 0);
    if (res == NULL) {
        syslog(LOG_ERR, "[restart ] reconnect Error\n");
        exit(1);
    }
} 
```

有时，我对 mysql_ping() 或 mysql_real_connect() 有分段错误。为什么？我在工作线程之间使用单独的 mysql 连接。怎么了？正义如何？

```
 0  0x0000000000000000 in ?? ()
 1  0x00007ffff7a7fc29 in my_net_local_init () from /usr/lib64/mysql/libmysqlclient_r.so.16
 2  0x00007ffff7ab0144 in my_net_init () from /usr/lib64/mysql/libmysqlclient_r.so.16
 3  0x00007ffff7aab245 in **mysql_real_connect ()** from /usr/lib64/mysql/libmysqlclient_r.so.16
 4  0x000000000040e72c in mysql_query_run (c=0xc36760,
q=0x7fffca1fb670 "SELECT     `id`, `name` FROM `msg_dir` WHERE `owncrc` = 2831014197") at mysql.c:163
 5  0x000000000040fdf2 in mysql_load_user (uid=2831014197, online=0) at mysql.c:706
 6  0x0000000000406047 in get_mess_count (uid=2831014197, mid=0, online=0) at commands.c:158
 7  0x000000000040618c in cmd_get_all_mess_count (key=0x7fffa80bb074 "gamc|2831014197|0|0 ", data=0x0, data_len=0, ret=0x7fffca1fbbc0, ret_len=0x7fffca1fbbdc) at commands.c:194
 8  0x0000000000405f52 in execute_command (key=0x7fffa80bb074 "gamc|2831014197|0|0 ", data=0x0, data_len=0,
ret=0x7fffca1fbbc0, ret_len=0x7fffca1fbbdc) at commands.c:132
 9  0x000000000040c4be in memcache_get (loop=0x7fffa40008c0, mctx=0x7fffa80bb040) at mc.c:479
 10 0x000000000040d353 in memcached_client (loop=0x7fffa40008c0, io=0x7fffa80bb040, revents=1) at mc.c:785
 11 0x00007ffff61e5071 in ev_invoke_pending () from /usr/lib64/libev.so.4
 12 0x00007ffff61ea23a in ev_run () from /usr/lib64/libev.so.4
 13 0x000000000040b5ec in ev_loop (loop=0x7fffa40008c0, flags=0) at /usr/include/libev/ev.h:810
 14 0x000000000040e24c in worker_listen (arg=0x10) at mc.c:1126
 15 0x00007ffff762c851 in start_thread () from /lib64/libpthread.so.0
 16 0x00007ffff5d2f6dd in clone () from /lib64/libc.so.6 
```

和下一个BT：

```
0  0x00000000009f3f70 in ?? ()
1  0x00007ffff7aaf32a in net_real_write () from /usr/lib64/mysql/libmysqlclient_r.so.16
2  0x00007ffff7aaf63b in net_flush () from /usr/lib64/mysql/libmysqlclient_r.so.16
3  0x00007ffff7aaf901 in net_write_command () from /usr/lib64/mysql/libmysqlclient_r.so.16
4  0x00007ffff7aac6a9 in cli_advanced_command () from /usr/lib64/mysql/libmysqlclient_r.so.16
5  0x00007ffff7a7b1fd in **mysql_ping** () from /usr/lib64/mysql/libmysqlclient_r.so.16
6  0x000000000040e8f1 in mysql_query_run (c=0x9ed930,
q=0x7fff6fffe670 "SELECT `invisible` FROM meetre.autho2 WHERE `crc` = 1032552218") at mysql.c:164
7  0x00000000004107a0 in mysql_load_user (uid=1032552218, online=1) at mysql.c:858
8  0x0000000000406278 in get_mess_count (uid=1032552218, mid=0, online=1) at commands.c:165
9  0x00000000004063bd in cmd_get_all_mess_count (key=0x7fff90383f84 "gamc|1032552218|0|1 ", data=0x0, data_len=0,
ret=0x7fff6fffebc0, ret_len=0x7fff6fffebdc) at commands.c:201
10 0x0000000000406182 in execute_command (key=0x7fff90383f84 "gamc|1032552218|0|1 ", data=0x0, data_len=0,
ret=0x7fff6fffebc0, ret_len=0x7fff6fffebdc) at commands.c:135
11 0x000000000040c718 in memcache_get (loop=0x7fff5c0008c0, mctx=0x7fff90383f50) at mc.c:459
12 0x000000000040d5cb in memcached_client (loop=0x7fff5c0008c0, io=0x7fff90383f50, revents=1) at mc.c:765
13 0x00007ffff61e5071 in ev_invoke_pending () from /usr/lib64/libev.so.4
14 0x00007ffff61ea23a in ev_run () from /usr/lib64/libev.so.4
15 0x000000000040b81c in ev_loop (loop=0x7fff5c0008c0, flags=0) at /usr/include/libev/ev.h:810
16 0x000000000040e4f4 in worker_listen (arg=0x1e) at mc.c:1106
17 0x00007ffff762c851 in start_thread () from /lib64/libpthread.so.0
18 0x00007ffff5d2f6dd in clone () from /lib64/libc.so.6 
```

代码2：

```
pthread_mutex_lock(&conn_mutex);
my_bool res = mysql_ping(c->mysql);
pthread_mutex_unlock(&conn_mutex);

if (res != OK) {
    mysql_close(c->mysql);              
    mysql_library_end();

    pthread_mutex_lock(&conn_mutex);
    mysql_library_init(0, NULL, NULL);
    pthread_mutex_unlock(&conn_mutex);

    c->mysql = mysql_init(NULL);

    struct conn_desc *cd = &c->db->cds[c->num];
    syslog(LOG_ERR, "reconnect :[%s:%d]\t%s\tnew MySQL=%X tid=%X %s\n", cd->host,  cd->port, c->db->default_db_name, c->mysql, pthread_self(), mysql_error(c->mysql));
    res = mysql_real_connect(c->mysql, cd->host, cd->login, cd->passwd, c->db->default_db_name, cd->port, NULL, 0);

    if (res == NULL) {
        syslog(LOG_ERR, "[restart ] reconnect Error\n");
        exit(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-25T18:05:09.713

（通过谷歌搜索找到这个。我知道这个问题的原始作者可能早已不复存在，但为了防止其他人在这里绊倒，请为后代做出回应。）

您的重新连接尝试非常复杂，您可能会绊倒导致这些崩溃。

在重新连接尝试期间，您：

1.  释放你的互斥锁。
2.  关闭连接。
3.  允许其他线程尝试使用现在关闭的连接，**这将 segfault**。毕竟，您解锁了互斥锁。
4.  在没有任何锁定的情况下调用 mysql_library_end()，这会在整个进程范围内拆除 libmysqlclient。任何运行 mysql_ping 或除 mysql_connect 之外的大多数 mysql_ 函数的尝试，无论在何处或使用哪些参数，**现在都会出现 segfault**，并且您仍然没有阻止其他线程执行此操作的锁。
5.  您重新获得锁并调用 mysql_library_init，然后由于某种原因再次释放它。
6.  最后调用 mysql_real_connect，告诉它对共享的 c->mysql 变量进行操作，而不需要任何锁定。这可以由多个线程同时运行，因此**也可能出现段错误。**

如您所见，您的代码有几个地方可能会崩溃。以下是解决方法：

1.  从 mysql_ping 之前到重新连接尝试完成之后，在整个操作中保留您的 conn_mutex。任何其他计划都将导致您的线程争夺谁可以尝试重新连接。
2.  根本不要调用 mysql_library_end 或 mysql_library_init ——这些调用无缘无故地影响进程范围的状态，与重新建立单个连接无关。仅在您在程序中建立第一个连接之前以及在您关闭最后一个连接之后调用它们，然后仅在一个线程上调用。
3.  确保您的代码在所有新线程上调用 mysql_thread_init，并在除主线程之外的任何线程退出之前调用 mysql_thread_end。（这些调用也独立于任何特定的连接，并且将它们排除在外可能会导致一些非常微妙的问题，因为事情通常仍然*大部分*工作。例如，如果 LOAD DATA INFILE 段错误在您身上，这可能是您的问题。）
4.  确保您将代码与线程安全的 libmysqlclient_r 而不是常规的 libmysqlclient 链接，否则以上都不会拯救您。

希望能帮助其他有类似问题的人。

# javascript - 每 n 秒自动随机播放 div

> ID：15740601
> 
> 赞同：1
> 
> 时间：2013-04-01T09:09:14.793
> 
> 标签：javascript, jquery

我在这里有具有相同类名的随机 div 的代码。现在我需要的是每 n 秒（例如 15 秒）将它们随机化，而无需刷新页面。 [http://jsfiddle.net/yxBhH/](http://jsfiddle.net/yxBhH/)

JS代码：

```
var parent = $("#shuffle");
var divs = parent.children();
while (divs.length) {
    parent.append(divs.splice(Math.floor(Math.random() * divs.length), 1)[0]);
} 
```

有谁知道怎么做？我仍然不习惯 javascript，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:17:51.260

您可以使用`setInterval`功能：

```
var $parent = $("#shuffle");
var $divs = $parent.children();

setInterval(function() {
  var $clone = $divs.slice();
  while ($clone.length) {
    $parent.append($clone.splice(Math.floor(Math.random() * $clone.length), 1));
  }
}, 2000);
```

```
.hue {
  background: #ddd;
}

.hue:nth-child(2n) {
  background: yellow;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="shuffle">
  <div class="hue">one</div>
  <div class="hue">two</div>
  <div class="hue">three</div>
  <div class="hue">four</div>
</div>
```

# jquery - jquery 不在子 div 中（我可以使用 find 吗？）

> ID：15740603
> 
> 赞同：1
> 
> 时间：2013-04-01T09:09:15.847
> 
> 标签：jquery, html, selector

我正在尝试选择整个 div，但不是主 div 内的特定 div。示例如下：

```
<div id="main_holder">
   <div id="secondHolder">
      <div id="thirdHolder">
         <div id="divIdoNotWantToUse" class="notUsed"></div>
      </div>
   </div>
</div> 
```

我正在尝试简单的单击以查看当我单击 div 时，它不应该收到警报。

```
$('#main_holder').not('#main_holder.notUsed').click( function(event) {
    alert( 'pullmenu clicked' );
}); 
```

它不起作用，那么最好的方法是什么？有没有办法在非选择器中使用 find ？

这有效的例子：

```
$('#main_holder').find('#divIdoNotWantToUse').css({ border: '5px solid red' }); 
```

Arun的解决方案：

```
$('#main_holder').click( function(event) {
    if(!$(event.target).closest('.notUsed').length)
    {
        alert( 'pullmenu clicked' );
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:10:57.273

在没有空格的选择器中添加一个空格，选择`#main_holder.notUsed`器会查找具有 id`main_holder`和类的元素，而不是类中`notUsed`的元素。`main_holder``notUsed`

```
$('#main_holder').not('#main_holder .notUsed').click( function(event) {
    alert( 'pullmenu clicked' );
}); 
```

这种方法的问题在于，即使从事件中删除了 click 事件处理程序，`.notUsed`仍然会传播到周围`div`的 s ，从而导致警报触发。最好有条件地检查目标，然后决定是停止还是允许传播。

```
$('#main_holder').click( function(event) {
    if(!$(event.target).is(".notUsed")){
        alert( 'pullmenu clicked' );
    }
}); 
```

**工作示例：http:** [//jsfiddle.net/xBctQ/](http://jsfiddle.net/xBctQ/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:25:39.757

我可以在您的标记中看到一个错误：

```
<div id="thirdHolder>
   //--------------^---------a closing " required 
```

虽然这不是一个大问题，但您需要在标记中添加文字才能看到点击的效果：

```
<div id="main_holder">Used
   <div id="secondHolder">Used
      <div id="thirdHolder">Used
         <div id=" divIdoNotWantToUse " class="notUsed">Not Used</div>
      </div>
   </div>
</div> 
```

如果这得到纠正，那么你可以试试这个脚本：

```
$('#main_holder').children().click( function(event) {
    alert( 'pullmenu clicked' );
});
$('#main_holder .notUsed').click( function(event) {
    event.stopPropagation();
}); 
```

您可以通过 停止事件冒泡`.stopPropagation()`。

### [在 FIDDLE 中查找](http://jsfiddle.net/cZDCL/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:18:07.780

你可以简单地这样做：

```
$('#main_holder').click(function (event) {
    alert('pullmenu clicked');
});

$('#divIdoNotWantToUse').click(function (event) {
    event.stopPropagation();
}); 
```

[**在这里演示**](http://jsfiddle.net/4fMRf/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T09:57:32.237

尝试

```
$('#main_holder').click( function(event) {
    if(!$(event.target).closest('.notUsed').length){
        alert( 'pullmenu clicked' );
    }
}); 
```

演示：[菲德尔](http://jsfiddle.net/arunpjohny/AzEUT/)

# c# - 如何在 C# 中使用 VID 和 PID 查找 USB 大容量存储驱动器的驱动器号？

> ID：15740613
> 
> 赞同：2
> 
> 时间：2013-04-01T09:10:01.207
> 
> 标签：c#, usb

我们设计了一个**USB** **MSD**产品，为此我们需要编写一个**C#**应用程序来对存储在内存中的文件进行一些处理。

> 谁能告诉我，如何检测具有特定**VID+PID的****USB**设备是否连接到计算机，如果是，驱动器号（或根驱动器路径）是什么？

 **我可以找到示例来检测特定（**VID+PID**）**USB**设备是否存在。并且还可以找到示例程序来检测可用的可移动驱动器以及路径是什么......等等。

**C#**中有没有将这些组合在一起的示例程序？

感谢您的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T17:04:59.573

我打算建议在 SetupApi 周围使用包装器，但看起来其他人已经组合了一个非常好的答案。[DEVCON.EXE（驱动工具）和 OpenVPN](https://stackoverflow.com/questions/1167544/devcon-exe-driver-tool-and-openvpn?answertab=votes#tab-top)**

# stored-procedures - 优化asp.net应用程序中informix存储过程的性能？

> ID：15740615
> 
> 赞同：1
> 
> 时间：2013-04-01T09:10:06.317
> 
> 标签：stored-procedures, informix

我想知道如何使用等价于：

```
SET ARITHABORT ON 
```

和

```
WITH RECOMPILE option 
```

在informix 存储过程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:23:39.347

> SET ARITHABORT ON
> **Sql Server 手册说**：在查询执行期间发生溢出或被零除错误时终止查询。

在 Informix 中，默认情况下，在执行任何 UDR/SP（过程或函数）期间发生的任何错误都将触发异常，这将在用户会话级别自动引发。这将包括任何算术错误。

您可以在 SPL 内部做的是相反的，包括不允许此异常到达用户会话范围的处理。为此，请阅读关于[ON EXCEPTION](http://pic.dhe.ibm.com/infocenter/informix/v121/topic/com.ibm.sqlt.doc/ids_sqt_514.htm)

> [WITH RECOMPILE 选项](http://msdn.microsoft.com/en-us/library/ms190439%28v=sql.90%29.aspx)
> **Sql Server 手册中说**：创建存储过程，在其定义中指定 WITH RECOMPILE 选项表明 SQL Server 不缓存该存储过程的计划；存储过程在每次执行时都会重新编译。当存储过程采用的参数值在存储过程的执行之间差异很大时，请使用 WITH RECOMPILE 选项，从而导致每次创建不同的执行计划。使用此选项并不常见，并且会导致存储过程执行得更慢，因为每次执行存储过程时都必须重新编译它。

在 Informix 运行类似的解决方案：在此处`update statistics for procedure <your_proc>;` 查看[Informix 手册中的说明](http://pic.dhe.ibm.com/infocenter/informix/v121/topic/com.ibm.sqls.doc/ids_sqs_0176.htm)

# iphone - 直接切换到 Game Center 应用

> ID：15740619
> 
> 赞同：2
> 
> 时间：2013-04-01T09:10:15.573
> 
> 标签：iphone, ios, objective-c, game-center

我有一种方法可以检查玩家是否登录到 Game Center。如果不是，我想用一个按钮显示一个警报视图，直接将他们带到 Game Center 应用程序进行登录。这有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:18:23.633

只需点击按钮即可打开游戏中心 URL。

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"gamecenter:"]]; 
```

还将句柄 url 放在应用程序委托中：

```
- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url {
    return YES;
}

- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:46:36.483

Apple 建议您在自己的应用程序中显示 Game Center UI，而不是强制用户在应用程序之间切换。这涉及设置`authenticateHandler`属性或调用`authenticateWithCompletionHandler`对象`GKLocalPlayer`，[如 Game Center Programming Guide 中所述](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html#//apple_ref/doc/uid/TP40008304-CH8-SW19)。

# ruby-on-rails - Ruby on Rails 在路由约束中排除组元素

> ID：15740620
> 
> 赞同：1
> 
> 时间：2013-04-01T09:10:23.503
> 
> 标签：ruby-on-rails, regex, ruby-on-rails-3, routes, constraints

我想知道，如何为我的路线定义约束正则表达式，只有当它排除组中的每个元素时才会匹配。

例如，我想这样做：

```
get "list/:action", :constraints => {:action => [NONE OF THE FOLLOWING: (new, edit, delete, update)} 
```

我知道如果我们希望它匹配列表中的任何元素，我们会这样定义：

`get "list/:action", :constraints => {:action => /(new|edit|delete|update)/},`但我不知道如何使它如上所述工作。

我在小组之前尝试过使用`^`和`!`符号，但到目前为止没有运气 - 我认为必须有另一种表示法。

我将如何排除这些元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:29:04.307

试试下面的。它将从路线中排除操作。

```
class ExcludeActions
  def matches?
    ["new", "edit", "delete", "update"].exclude? params[:action]
  end
end

get "list/:id", :constraints => ExcludeActions.new 
```

这将从路由中排除、`new`和`edit`动作`delete``update``list`

# c# - Azure 发布数据库第一个连接字符串不起作用

> ID：15740625
> 
> 赞同：4
> 
> 时间：2013-04-01T09:10:37.433
> 
> 标签：c#, asp.net-mvc, entity-framework, azure, publish

我已经完成了首先在 azure 门户上使用数据库发布我的 Web 应用程序的步骤。

但是，当我发布时，我收到此错误消息：

> 如果在 Code First 模式下使用，使用用于 Database First 和 Model First 开发的 T4 模板生成的代码可能无法正常工作。要继续使用 Database First 或 Model First，请确保在执行应用程序的配置文件中指定了实体框架连接字符串。要使用从 Database First 或 Model First 生成的这些类，使用 Code First 添加使用属性或 DbModelBuilder API 的任何其他配置，然后删除引发此异常的代码。

我在 web.config 中的连接字符串被发布修改后：

```
<add name="MySiteEntities" connectionString="metadata=res://*/MySite.csdl|res://*/MySite.ssdl|res://*/MySite.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=tcp:**********.database.windows.net,****;initial catalog=MySite;user id=username@**********;password=*******;MultipleActiveResultSets=True&quot;" providerName="System.Data.EntityClient" /> 
```

我的上下文（由 edmx 生成）：

```
public partial class MySiteEntities : DbContext
{
    public MySiteEntities()
        : base("name=MySiteEntities")
    {
    }
... 
```

我很困惑，因为似乎实体框架试图首先使用代码而不是数据库。

**更新：** 我刚刚尝试在本地使用相同的连接字符串，并且网络应用程序似乎运行良好。Web 应用程序确实可以很好地连接到远程数据库。只有当我发布到天蓝色时它才会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T04:16:47.140

[阅读我在Entity framework work local but not on azure 上对](https://stackoverflow.com/questions/13840326/entity-framework-work-locally-but-not-on-azure/15858768)类似问题的回答。

*如果您犯了与我相同的“错误”*，这就是正在发生的事情...... Azure 部署的应用程序在您的 web.config 中找不到您的连接字符串“MySiteEntities”。相反，在您创建 Azure 网站（或云服务或其他）时，您创建了一个关联的 Azure SQL 数据库，并为其连接字符串提供了完全相同的名称“MySiteEntities”。后一个连接字符串是没有模型/数据库优先元数据引用的“普通”连接字符串，因此被 EF 视为代码优先连接，然后抱怨冲突。有关这种区别的解释，请参见[Code First vs. Database First](https://stackoverflow.com/questions/8618342/code-first-vs-database-first)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T14:42:06.910

我在本地 web.config 上将连接字符串更改为远程 (Azure)，然后在发布和发布 web.config 期间删除所有设置的连接字符串。它重写了删除 web.config。然后将本地 web.config 上的连接字符串返回到本地连接。它现在工作正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:39:34.233

它应该是：

```
 <connectionStrings>
            <add name="MyDatabaseModelEntities" 
                       connectionString="metadata=res://*/MyDBModel.csdl|res://*/MyDBModel.ssdl|res://*/MyDBModel.msl;
                       provider=System.Data.SqlClient;
                       provider connection string=&quot;
                       Data Source=<provideServerName>.database.windows.net;
                       Initial Catalog=MyDatabase;
                       Integrated Security=False;
                       User ID=<provideUserID>;
                       Password=providePassword>;
                       MultipleActiveResultSets=True;
                       Encrypt=True;
                       TrustServerCertificate=False&quot;" 
                       providerName="System.Data.EntityClient"/>
        </connectionStrings> 
```

# android - api 级别高于 11 的日期选择器的 Android 日历视图

> ID：15740628
> 
> 赞同：0
> 
> 时间：2013-04-01T09:10:46.060
> 
> 标签：android, dialog, calendar

我想编写一个具有按钮的应用程序，当我单击按钮时，我想在对话框中显示日历，例如对话框中的 Datepicker。

我试着看构造`new DatePickerDialog.OnDateSetListener()`器喜欢日历。难道不能这样做吗？

在 api 级别 11 之后，它支持日历视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:53:53.797

您好，请尝试以下代码，希望对您有所帮助：

```
 <Button
            android:id="@+id/birthday"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"> 
```

现在将此按钮调用到您的活动中

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_register);

         editBirthday = (Button)findViewById(R.id.birthday);

         /*
         * Change Birth day on click of edit box
         */
        editBirthday.setOnTouchListener(new OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {
                // TODO Auto-generated method stub

                InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                imm.hideSoftInputFromWindow(editBirthday.getWindowToken(), 0);
                showDialog(DATE_DIALOG_ID);
                return true;
            }
        });

    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {
        case DATE_DIALOG_ID:
            return new DatePickerDialog(this, mDateSetListener, year, month,
                    day);
        }
        return null;
    }

    // updates the date we display in the TextView
    private void updateDisplay() {
        /*
         * Hide virtual keyboard
         */
        editBirthday.setText(new StringBuilder()
                // Month is 0 based so add 1
                .append(year).append("-").append(month + 1).append("-")
                .append(day).append(""));
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int myear, int monthOfYear,
                int dayOfMonth) {
            year = myear;
            month = monthOfYear;
            day = dayOfMonth;
            updateDisplay();
        }
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T14:07:58.067

//此代码在对话框中显示日历，希望对您有所帮助

```
LayoutInflater inflater =(LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    LinearLayout ll = (LinearLayout)inflater.inflate(R.layout.calendar, null,  false);
    CalendarView cv = (CalendarView) ll.findViewById(R.id.calendarView);
    cv.setBackgroundColor(Color.BLACK);

    cv.setOnDateChangeListener(new CalendarView.OnDateChangeListener() {

    @Override
    public void onSelectedDayChange(CalendarView view, int year, int month,
            int dayOfMonth) {
        // TODO Auto-generated method stub

        Log.d("date selected", "date selected " + year + " " + month + " " + dayOfMonth);
        int rows = showMapFragment(year, month, dayOfMonth);

        if (rows == 0){
            Toast.makeText(getApplicationContext(), year + "/" + (month + 1) +"/" + dayOfMonth + " No route to display", Toast.LENGTH_SHORT).show();
        }

        }
    });

    ll.findViewById(R.id.calendarView).setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Log.d("calendar view", "calendar view clicked");
        }
    });

    Dialog calendarDialog = new Dialog(Main.this);
    calendarDialog.setContentView(ll);

    calendarDialog.setTitle("Pick a date to view your performance and route");
    calendarDialog.show(); 
```

//下面是日历布局xml文件

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/myLayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<CalendarView
android:id="@+id/calendarView"
android:layout_width="match_parent"
android:layout_height= "400dp"
android:showWeekNumber="false"
android:clickable="true"
android:weekDayTextAppearance="@style/calendarStyle"
android:dateTextAppearance="@style/calendarStyle" 
/>

</LinearLayout> 
```

# php - foreach 循环中的多个数组的问题

> ID：15740629
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:10:46.703
> 
> 标签：php, arrays, foreach

这是我在这里的第一个问题，所以我不完全了解正常的风格。

我有多个数组的问题。我的数组是这样排序的：

```
Array
(
    [count] => 2
    [gebruikerData] => Array
        (
            [gebruiker1] => Array
                (
                    [merken] => Array
                        (
                            [0] => merk1
                            [1] => merk10
                            [2] => merk19
                        )

                    [loginnaam] => testfasdfasd
                    [geslacht] => Man
                    [persoonlijkheidsType] => TEST
                    [beschrijving] => fasdfasdfasd
                    [gebruikerID] => 19
                    [leeftijd] => 21
                )

            [gebruiker2] => Array
                (
                    [merken] => Array
                        (
                            [0] => merk1
                            [1] => merk9
                            [2] => merk36
                        )

                    [loginnaam] => test1233
                    [geslacht] => Man
                    [persoonlijkheidsType] => TEST
                    [beschrijving] => safasfd
                    [gebruikerID] => 20
                    [leeftijd] => 21
                )

        )

) 
```

我需要检索此数组中的所有信息。可以有与数据库输出一样多的字段 gebruiker(number)，所以我尝试在彼此中使用多个 foreach 循环。我的问题是不可能将一个 foreach 循环中的键用作另一个 foreach 循环中的索引，如下所示：

```
foreach ($gebruikerData as $key => $value)
{
    foreach ($key as $key2 => $value2)
    {
        echo $key2;
    }
} 
```

有谁知道我如何从数组中检索信息？或者是否可以使用我自己的方式稍作改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:19:13.393

像这样试试

```
foreach ($gebruikerData as $key => $value)
{
    if(is_array($key))
    {
        foreach ($key as $key2 => $value2)
        {
           if(is_array($key2))
           {
               foreach($key2 as $key3=>$value3)
                   echo $key3.'-'.$value3;
           }
           else
               echo $key2.'-'.$value2;
        }
     }
     else
         echo $key.'-'.$value;
} 
```

每次检查 $key 是否为“数组”，如果它是数组，则它将用于 for 循环，否则它将直接回显它

# facebook - Facebook 页面选项卡无法在 rails 4.0 中加载

> ID：15740630
> 
> 赞同：1
> 
> 时间：2013-04-01T09:10:47.883
> 
> 标签：facebook, ruby-on-rails-4

我正在使用 rails 4.0 开发 facebook page_tab。我在 Facebook 标签页上显示了空白内容。从我的想法来看，这个问题与turbolink有关。以下是firefox请求和响应标头

响应头

```
HTTP/1.1 200 OK
Date: Mon, 01 Apr 2013 08:54:54 GMT
Status: 200 OK
Connection: close
X-Frame-Options: SAMEORIGIN
X-XSS-Protection: 1; mode=block
X-Content-Type-Options: nosniff
X-UA-Compatible: chrome=1
X-XHR-Current-Location: /page_tab
Content-Type: text/html; charset=utf-8
Etag: "5d34060006e527f1a21db545df3d919f"
Cache-Control: max-age=0, private, must-revalidate
Set-Cookie:  _likenotlike_session=SEhKbk5oZ0FHT2o0RkRMK3k2OThidHY1Yk5HYjdIWGNkNFIrWisxbkVKRitLT2tJM2d2b1NVV0xQYW5Qc015L0ljVjdDWCtITWR4cUhLc2VjK3hGUHNCbHAzb0YxV1F4OUNaa0hudDE0MkFZRlhYUGgxK2M5eDBNMTRIZzdhZXVyRTBmZEx3Q1RKaXRrZFJwaUYyY2JMdUNpSmlZRmhNS0Z6dGFEMEE5b2RLOXJGdWF0Z1NHcDR1N0ZleVgvZDRJLS1KcjhndzRuUjJaSXZnd1lNdjUyNTJBPT0%3D--a51e845979d81ace643d14b399ffa655ece63d79; path=/; HttpOnly
X-Request-Id: aac0e275-92b7-4b4b-9be7-b811ff9dec29
X-Runtime: 0.024202 
```

请求标头

```
POST /page_tab HTTP/1.1
Host: localhost:60000
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:20.0) Gecko/20100101 Firefox/20.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
Referer: http://static.ak.facebook.com/platform/page_proxy.php?v=5
Cookie: fbm_353759128067702=base_domain=.localhost; fbm_470420673030979=base_domain=.localhost; request_method=POST;   _likenotlike_session=T2o2dVZUSkhxUDhWdDJyWGsvQmYxZHVGVGszYy9pc2VIdGs3OWJ0YkRQTSt2eTJtR2pxTDZLSFRpbWVDamx2ZFVxU2pJRENNRzl2elNqMkF4Q01hcTlWZkZNNUVnSy9ucnJrUWQ0YWFheUJqRklsaEQ1RlM5ZGN1MEhGV0NpQ0E5bjc0VXZoQThuVzJjbjFQTmpZeUVzK2M1anRBamZqU3VwZVlYUlNpQmRnYnlVNWJZTk5wc3dZTEZpR0lyWTE2LS1tSkRHb3JpNGM4U205bEdxMEpkOE5nPT0%3D--85ea3314a43d08dda9d00218a5045968ef040d0b
Connection: keep-alive 
```

在响应标头中有 X- *-*我认为与 ajax 相关的标头。所以我认为 rails 和 turbolink 认为请求是 ajax 请求，但如果您可以从上面的请求标头中看到，实际上该请求是正常的 post 请求。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-11T20:34:54.943

问题的解决方法如下链接 [http://conpanna.net/en-us/blog/5185b5ce79ec73ae54000003](http://conpanna.net/en-us/blog/5185b5ce79ec73ae54000003)

只需添加 response.headers["X-Frame-Options"] = "GOFORIT" 一切正常

# android - 为什么 getView 没有被调用？

> ID：15740635
> 
> 赞同：0
> 
> 时间：2013-04-01T09:11:00.900
> 
> 标签：android

我有一个扩展简单光标适配器的适配器。由于某种原因，我似乎看不到，我的 getView 甚至没有被调用。我在 getView 中有一个断点，它永远不会到达那里，列表只是显示为空。任何人都可以通过看看，看看我做错了什么？

```
package com.example.ok1;
import java.text.SimpleDateFormat;
import java.util.Date;

import android.app.Activity;
import android.content.ContentValues;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.util.Log;
import android.util.SparseBooleanArray;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.TextView;
import android.app.ListActivity;

public class MainActivity extends Activity {
//  Button btnCalendar;

//*******************************************8
String[] names = {"Иван", "Марья", "Петр", "Антон", "Даша", "Борис",
          "Костя", "Игорь", "Анна", "Денис", "Андрей"};
//Button buttonAddTask;
final String Tag="States";
final String Ten = "Ten";
TextView txtDataTaskToday;
String id_for_listtsk_today;
ListView lvMain_today;
String[] arr_date;
SharedPreferences sPref;
static Cursor c;
private ListView listView = null;
//public static String id_for_listtsk_today;
//  static SQLiteDatabase db;
MySqlCursorAdapter adapter = null;
//***********************************************8

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
//  btnCalendar = (Button) findViewById(R.id.btnActTwo);
//  btnCalendar.setOnClickListener(this);

    //*********************************************
    // переменные для query
    String[] columns = null;
    String selection = null;
    String[] selectionArgs = null;
    String groupBy = null;
    String having = null;
    String orderBy = null;

  //*********работа с БД****************
    // создаем объект для данных

    //  txtDataTaskToday = (TextView) findViewById(R.id.txtDataTaskToday);
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd");
        String id_for_listtsk_today = sdf.format(new Date());
        //final String b = id_for_listtsk_today;
    //  txtDataTaskToday.setText(id_for_listtsk_today.toString());
        Log.d(Tag, "id_for_listtsk_today ="+id_for_listtsk_today );
        ContentValues cv = new ContentValues();
        DBHelper dbHelper = new DBHelper(this);     
        final SQLiteDatabase db = dbHelper.getWritableDatabase();
        columns = new String[] {"name"};
        selection = "data_id = ?";
        selectionArgs = new String[] {id_for_listtsk_today};
        //c = db.query("mytable", columns, selection, selectionArgs, null, null, null);
        try {
        c=dbHelper.getCursor();
        } catch (SQLException sqle) {
            Log.d(Tag, "неудача");
            throw sqle;

        }
        String[] arr_date = logCursor(c);

    //*********работа с БД****************  

            lvMain_today = (ListView) findViewById(R.id.list);
//            lvMain_today.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        //this.listView=getl
        //listView = MainActivity.this.getlgetListView();
        lvMain_today.setItemsCanFocus(false);
        lvMain_today.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        //ArrayAdapter<String> adapter =  new ArrayAdapter<String>(this,android.R.layout.simple_list_item_multiple_choice, arr_date);// R.layout.item, my_list_item
        startManagingCursor(c);
        int[] listFields = new int[] { R.id.txtTitle };
        String[] dbColumns = new String[] { DBHelper.COLUMN_NAME };
        Log.d(Tag, "трассировка" );
        MainActivity.this.adapter = new MySqlCursorAdapter(
                this, R.layout.my_list_item,
                c, dbColumns, listFields,
                dbHelper);
 //           
        lvMain_today.setAdapter(MainActivity.this.adapter);
    //    setListAdapter(MainActivity.this.adapter);
        names = arr_date;
        c.close();
        db.close();
        dbHelper.close();

        lvMain_today.setOnItemClickListener(new OnItemClickListener() {
              public void onItemClick(AdapterView<?> parent, View view,
                  int position, long id) {
                  SparseBooleanArray chosen = ((ListView) parent).getCheckedItemPositions();
                  for (int i = 0; i < chosen.size(); i++) {
                      int key = chosen.keyAt(i);
                      if (chosen.get(key))
                        Log.d(Tag, "выделены ====="+names[key]);
                  Log.d(Tag, "itemClick: position = " + position + ", id = "
                    + id);}

                //****************nen пробная фигня**************

//                  String[] columns = null;
//                  String selection = null;
//                  String[] selectionArgs = null;
//                  String groupBy = null;
//                  String having = null;
//                  String orderBy = null;
//                  columns = new String[] {"name"};
//                  selection = "data_id = ?";
//                  selectionArgs = new String[] {id_for_listtsk_today};//id_for_listtsk_today 
//                  Cursor c = db.query("mytable", columns, selection, selectionArgs, null, null, null);
             //   String[] arr = logCursor(c);
                 //**************************************************  
                  //  String s=test();   
              }

            });

//          lvMain_today.setOnItemSelectedListener(new OnItemSelectedListener() {
//                public void onItemSelected(AdapterView<?> parent, View view,
//                    int position, long id) {
//                  Log.d(Tag, "Было выделение позиции меню!!!!position = " + position + ", id = "
//                      + id);
//                }
//
//                public void onNothingSelected(AdapterView<?> parent) {
//                  Log.d(Tag, "itemSelect: nothing");
//                }
//              }); 
}

private String[] logCursor(Cursor c) {
    // TODO Auto-generated method stub
    final String Tag="States";
    String[] arr_date = new String[c.getCount()];//String[] arr_date  = new String[] {};
    Log.d(Tag,"мы в курсоре");
    if (c!=null) {
        if (c.moveToFirst()) {
        //  Log.d(Tag,"мы в курсоре1");
            String str;
            int i=-1;
            do {
            //  Log.d(Tag,"мы в курсоре2");
                str="";
                i=i+1;
                for (String cn: c.getColumnNames()) {
                str =     str.concat(c.getString(c.getColumnIndex(cn)));
                }
                Log.d(Tag, "++++"+str);
                arr_date[i]=String.valueOf(str);
            } while (c.moveToNext());

        } 
    }

    return arr_date;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    menu.add(0, 1, 0, "календарь");
    menu.add(0, 2, 0, "Убрать выполненные");
      menu.add(0, 3, 3, "Уйти");
//        menu.add(1, 4, 1, "copy");
//        menu.add(1, 5, 2, "paste");
//        menu.add(1, 6, 4, "exit");

      return super.onCreateOptionsMenu(menu);
//  getMenuInflater().inflate(R.menu.main, menu);
    //return true;
}

public boolean onOptionsItemSelected(MenuItem item) {
      // TODO Auto-generated method stub
      StringBuilder sb = new StringBuilder();

      // Выведем в TextView информацию о нажатом пункте меню 
     // txtDataTaskToday.setText("Item Menu");
    //  txtDataTaskToday.setText(item.getGroupId());
////          txtDataTaskToday.setText("\r\n itemId: " + String.valueOf(item.getItemId()));
     // txtDataTaskToday.setText("\r\n order: " + String.valueOf(item.getOrder()));
     // txtDataTaskToday.setText("\r\n title: " + item.getTitle());
      switch (item.getItemId()) {
    case 1:
        Intent intent = new Intent(this, ToDoCalendarActivity.class);
        startActivity(intent);
        break;
    case 2:

        SparseBooleanArray sbArray = lvMain_today.getCheckedItemPositions();
        for (int i = 0; i < sbArray.size(); i++) {
          int key = sbArray.keyAt(i);
          if (sbArray.get(key))
            Log.d(Tag, "выделены "+names[key]);
          sPref = getPreferences(MODE_PRIVATE);
          Editor ed = sPref.edit();
          ed.putString(Ten, "1");
          ed.commit();
          Log.d(Tag, "ставим константу для скрытия");
        }

        break;
    case 3:
        sPref = getPreferences(MODE_PRIVATE);
        String savedText = sPref.getString(Ten, "");
        Log.d(Tag, "ten= "+ savedText);
        finish();
        break;

    }

      return super.onOptionsItemSelected(item);
    }

//  @Override
//  public void onClick(View v) {
//      // TODO Auto-generated method stub
//      switch (v.getId()) {
//      case R.id.btnActTwo:
//          
//          Intent intent = new Intent(this, ToDoCalendarActivity.class);
//          startActivity(intent);
//          break;
//      }
//  }

} 
```

MySqlCursorAdapter

```
package com.example.ok1;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.CheckBox;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class MySqlCursorAdapter extends SimpleCursorAdapter implements OnClickListener {
final String Tag="States";
private Context context;

private DBHelper dbHelper;
private Cursor currentCursor;

public MySqlCursorAdapter(Context context, int layout, Cursor c,
String[] from, int[] to, DBHelper dbHelper) {

super(context, layout, c, from, to);
Log.d(Tag, "трассировка1" );
this.currentCursor = c;
this.context = context;
this.dbHelper = dbHelper;
Log.d(Tag, "MySqlCursorAdapter()");
Integer b = c.getCount();
Log.d(Tag, "b="+b);
}

public View getView(int pos, View inView, ViewGroup parent) {
Log.d(Tag, "getView() + posss=" + pos);
View v = inView;
if (v == null) {
LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
v = inflater.inflate(R.layout.my_list_item, null);
}

this.currentCursor.moveToPosition(pos);

CheckBox cBox = (CheckBox) v.findViewById(R.id.bcheck);

cBox.setTag(Integer.parseInt(this.currentCursor
    .getString(this.currentCursor
            .getColumnIndex(DBHelper.COLUMN_ID))));
Log.d(Tag, "tag="+cBox.getTag().toString());
if (this.currentCursor.getString(this.currentCursor
    .getColumnIndex(DBHelper.COLUMN_STATUS)) != null
    && Integer.parseInt(this.currentCursor
            .getString(this.currentCursor
                    .getColumnIndex(DBHelper.COLUMN_STATUS))) != 0) {
cBox.setChecked(true);
} else {
cBox.setChecked(false);
}
cBox.setOnClickListener(this);

TextView txtTitle = (TextView) v.findViewById(R.id.txtTitle);
txtTitle.setText(this.currentCursor.getString(this.currentCursor
    .getColumnIndex(DBHelper.COLUMN_NAME)));

return (v);
}

public void ClearSelections() {
Log.d(Tag, "ClearSelections()");
//this.dbHelper.clearSelections();
//this.currentCursor.requery();

}

@Override
public void onClick(View v) {
Log.d(Tag, "onClick");
CheckBox cBox = (CheckBox) v;
Integer _id = (Integer) cBox.getTag();
Log.d(Tag, "Integer _id="+_id.toString());
ContentValues values = new ContentValues();
values.put(" selected", cBox.isChecked() ? 1 : 0);
//this.dbHelper.dbSqlite.update(SqlHelper.TABLE_NAME, values, "_id=?",
//      new String[] { Integer.toString(_id) });
}

} 
```

数据库助手

```
package com.example.ok1;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteQueryBuilder;
import android.util.Log;

public class DBHelper extends SQLiteOpenHelper {
final String Tag="States";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_DATA = "data_id";
public static final String COLUMN_NAME = "name";
public static final String COLUMN_STATUS = "status";
public static final String TABLE_NAME = "mytable";
public SQLiteDatabase dbSqlite;
public DBHelper(Context context) {
  // конструктор суперкласса
    super(context, "myDB", null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) {
  Log.d(Tag, "--- onCreate database ---");
  // создаем таблицу с полями
  db.execSQL("create table mytable ("
      + "_id integer primary key autoincrement," 
      + "data_id text,"
      + "name text,"
      + "task text,"
      + "status integer"
       + ");");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}
public Cursor getCursor() {
    Log.d(Tag, "getCursor() получили курсор с базы");
        String[] columns = null;
        String selection = null;
        String[] selectionArgs = null;
        String groupBy = null;
        String having = null;
        String orderBy = null;
//  SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

//  queryBuilder.setTables(TABLE_NAME);

//  String[] asColumnsToReturn = new String[] { COLUMN_ID, COLUMN_NAME,
//          COLUMN_DATA, COLUMN_STATUS };

//  Cursor mCursor = queryBuilder.query(dbSqlite, asColumnsToReturn, null,
//          null, null, null, "title ASC");
//  Log.d(Tag, "getCursor() получили курсор с базы конец");
            final SQLiteDatabase db = this.getWritableDatabase();
            columns = new String[] { COLUMN_ID, COLUMN_DATA, COLUMN_NAME, COLUMN_STATUS };
//              selection = "data_id = ?";
//              selectionArgs = new String[] {id_for_listtsk_today};
            Cursor c = db.query("mytable", columns, null, null, null, null,     null);
    return c;
}
  } 
```

ActivityMain.xml

```
<!--?xml version="1.0" encoding="utf-8"?-->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"     android:orientation="vertical" android:layout_width="fill_parent" android:layout_height="fill_parent" android:background="#81BEF7" android:scrollbars="vertical">

<TableLayout android:id="@+id/TableLayout01" android:layout_width="fill_parent" android:layout_height="fill_parent" >
    <TableRow>

        <ListView
            android:id="@+id/list"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
</ListView>
    </TableRow>

</TableLayout>

</LinearLayout> 
```

my_list_item.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:gravity="center_vertical"
android:orientation="horizontal" >

<CheckBox 
    android:id="@+id/bcheck" 
    android:layout_height="wrap_content" 
    android:layout_width="wrap_content" 
    android:focusable="false"> 
</CheckBox>  

<TextView
    android:id="@+id/txtTitle"
    android:layout_width="138dp"
    android:layout_height="?android:attr/listPreferredItemHeight"
    android:focusable="false"
    android:gravity="left|center_vertical"
    android:text="Test" >

</TextView>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right|center_vertical"
    android:orientation="horizontal" >

    <ImageButton
        android:id="@+id/ImageButton01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.50"
        android:clickable="true" >
    </ImageButton>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:57:20.850

我删除了

```
c.close();
db.close(); 
```

现在它工作正常。

# java - 如何从ofbiz的ftl文件中正确调用java函数？

> ID：15740641
> 
> 赞同：0
> 
> 时间：2013-04-01T09:11:32.043
> 
> 标签：java, servlets, jxl, ofbiz

我想我已经为我完成了必要的拼接以允许 gui 调用 java 方法。

这是我的 ftl 文件，该进程应该从该文件开始，这是在小部件屏幕 xml 文件上，它可以正确显示内容，但我只是不确定我在这里使用的参数来正确调用 java 类

```
<form action="<@ofbizUrl>methodToInvoke</@ofbizUrl>" method="POST">
    <input type="submit" value="id"></input>
    <input type="text" name="input"></input>
</form> 
```

这是我控制器上的代码

```
<request-map uri="methodToInvoke">
    <security https="true" auth="true"/>
    <event type="java" path="com.report.SomeClass" invoke="methodToInvoke"/>
    <response name="success" type="view" value="reports" />
    <response name="error" type="view" value="reports" />
</request-map> 
```

当我运行应用程序并点击按钮时，浏览器上的地址似乎正在尝试调用该方法，但似乎没有任何反应。它应该将文件下载给用户，并且我已经完成了 java 方法的设置，例如响应头和需要在其上写入的文件。

当我单击它时，它实际上并没有做任何事情，它只是回到同一页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T12:47:01.937

使用 ofbiz 控制器，您可以通过两种方式发回响应：

1.  首选更常见的方式：在你的java事件中你调用一些服务，或者做一些处理，然后你处理一个请求属性的结果，然后在视图中渲染这些属性。如您所见，您的控制器指向一个视图。
2.  这种情况不太常见，当您需要向用户发送一些无法在视图中呈现的数据时，您需要手动将数据写入响应对象中，然后关闭响应流。我假设你正在这样做。在这种情况下，您不应该在控制器中返回视图，因为您已经写入数据并希望关闭响应流。所以只需将您的控制器更改为：

> ```
> <response name="success" type="none" /> 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T02:50:47.600

我无法具体构建应用程序的构建文件，因为我只是将 build.xml 用于整个 ofbiz，而且似乎并没有更新我正在使用的应用程序的修改。

之后，我对 java 类所做的更改起作用了

# javascript - 无法设置 javascript cookie 到期日期

> ID：15740643
> 
> 赞同：0
> 
> 时间：2013-04-01T09:11:37.140
> 
> 标签：javascript, cookies

```
function setMoney(value) {
    var myDate = new Date(2050, 9, 12);
    myDate.toUTCString();
    alert(document.cookie); //i get the old cookie as normal
    document.cookie = "money=" + value + ";expires=" + myDate + ";";
    alert(document.cookie); //i get money=987996 and i dont get the expiration date
}
setMoney(987996); 
```

这里有什么问题？这就像代码只是停在 + 值 + 位。更改方法调用行中的数字仍然会导致警报中的数字更改，所以我知道它正在设置一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:24:38.963

警报不会给你到期日期，它只会显示价值。用 Firebug 检查你的 cookie，它应该有正确的到期日期。

# iphone - iTunes 同步应用程序无法使用 Phonegap 安装

> ID：15740647
> 
> 赞同：1
> 
> 时间：2013-04-01T09:11:47.773
> 
> 标签：iphone, ios, cordova, jquery-mobile

我使用 Phonegap 创建了一个 .ipa 文件。为了测试，我上传了开发者证书和设备 UDID。它工作正常。现在，我想使用 Application Loader 分发这个应用程序。为此，我上传了苹果经销商证书并在 phonegap 云上分发移动配置文件并生成 .ipa 文件。当我在 iPhone 6.3.1 上尝试这个应用程序时，它给了我错误：**iTunes 同步应用程序安装失败** 请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:25:35.617

您是尝试提交应用程序（您提到了用于提交应用程序的应用程序加载器）还是将其安装在设备上进行测试？我假设您正在尝试将其安装在设备上进行测试。

如果应用程序安装失败，请检查其中一项

1.  您正在使用的 mobileprovision 具有您设备的 UDID。测试应用程序只能安装在 UDID 包含在 mobileprovision 中的设备上（除非您为企业分发）

2.  mobileprovision 已安装在您的设备上（尝试使用 Testflight 之类的服务 - 您将知道您的设备是否具有必要的设置）

# spring - 春天，jsp，休眠

> ID：15740650
> 
> 赞同：0
> 
> 时间：2013-04-01T09:12:07.950
> 
> 标签：spring, hibernate, jsp

我有一个`jsp`包含近 20 个输入字段的表单。我想将输入字段值传递给 spring 控制器。我的问题是前五个输入字段是 for`Table1`和下一个`Table2`等都是连接表。我的问题是我怎么能使用类似方法`@modelattribute`或任何其他方法在单个对象中获取这些值。

注意：-我正在使用`hibernate`with`spring`进行映射。请给我一些链接。

# javascript - 打字稿如何在没有参考打字稿文件代码的情况下生成单个javascript文件

> ID：15740653
> 
> 赞同：-2
> 
> 时间：2013-04-01T09:12:14.707
> 
> 标签：javascript, typescript

typescript 可以在没有参考 typescript 文件代码的情况下生成单个 javascript 文件吗？

这是两个打字稿源文件。

```
Class source1{...};

Class source 2{...}; 
```

这是另外两个打字稿文件。

```
///reference path=’source1’

Class reference1{...};

///reference path=’source2’

Class reference2{...}; 
```

我将为单个 js 文件生成 reference1 和 reference2。但是在js文件中，有source1和source2的代码。如何在没有 souce1 和 soucre2 代码的情况下获取单个 javascript 文件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:31:00.387

在我看来，您需要将编译分为两个阶段，一个阶段生成 soruce1 和 soruce2，另一个阶段生成参考 1 和参考 2。最好的方法是从第一批文件中生成一个 .d.ts，然后在第二次编译中引用它。

生成sources.d.ts：

```
tsc --declaration --out soruces.js soruce1.ts source2.ts 
```

现在您的文件应如下所示：

```
///reference path=’sources.d.ts’

Class reference1{...};

///reference path=’source.s.ts’

Class reference2{...}; 
```

第二个编译将是：

```
tsc --out references.js reference1.ts reference2.ts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:00:56.017

您要求编译器执行冲突的事情。

如果您想要单个输出文件，请使用以下标志：

```
tsc --out single.js app.ts 
```

这告诉编译器遍历所有依赖项，以正确的顺序组合输出并将其保存在 single.js

如果您不想要单个文件，则省略该标志，每个 TypeScript 文件将与其输出的 JavaScript 文件配对。

您在询问是否可以在不包含引用文件的情况下合并文件 - 这是不可能的。

# ruby-on-rails - Rails 中的 Spreadsheet.open 给出此错误“未知编码名称 - MACINTOSH”

> ID：15740654
> 
> 赞同：3
> 
> 时间：2013-04-01T09:12:15.550
> 
> 标签：ruby-on-rails, parsing, spreadsheet, xls

我正在使用电子表格来解析 xls 文件。它工作得很好。但今天我的一个用户上传了一个文件，但出现错误“未知编码名称 - MACINTOSH”

我的代码是： book = Spreadsheet.open file_path sheet1 = book.worksheet 0

这是出现错误的 excel 文件： [https ://www.dropbox.com/s/jv37pk5rpiy9259/testlisttextnonames2.xls](https://www.dropbox.com/s/jv37pk5rpiy9259/testlisttextnonames2.xls)

你们能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T20:03:23.437

遇到同样的问题。这是我能推断出的最好的：

“Macintosh”不是 Ruby 1.9+ 中的已知编码。尝试打开控制台并运行“Encoding.find('Macintosh')”。你会得到同样的错误。

那么什么是可用的？在控制台中：“Encoding.list”。选项之一是 MacRoman。我猜这是紧随其后的。

因此，如果我们将 lib/spreadsheet/excel/internals.rb 中 10000 和 32768 的映射更改为映射到“MACROMAN”，它应该可以工作。

在本地测试，确实如此。

我打开了一个拉取请求：[https ://github.com/zdavatz/spreadsheet/pull/51](https://github.com/zdavatz/spreadsheet/pull/51)

一些参考链接：* [https://en.wikipedia.org/wiki/Mac_OS_Roman](https://en.wikipedia.org/wiki/Mac_OS_Roman) * [http://bugs.python.org/issue843590](http://bugs.python.org/issue843590)

# c++ - 使用字符串流精度来格式化浮点数但丢弃零填充

> ID：15740658
> 
> 赞同：4
> 
> 时间：2013-04-01T09:12:37.590
> 
> 标签：c++, stringstream

我正在尝试将浮点数和长双精度数的精度（即小数位数）设置为 10，但我不希望它们填充零。IE，

123456.789123456789应该给123456.7891234568，但是123456不应该给123456.0000000000，而是123456

到目前为止，我已将其范围缩小到：

```
long double myNumber;
string myString;
ostringstream myStream;
myStream.setf(ios::fixed,ios::floatfield);
myStream.precision(10);
myStream << myNumber;
myString = myStream.str(); 
```

我也试过摆弄 setfill(' ') 和 std::ws 但无法真正掌握它。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:14:29.197

不要`ios::fixed`用于`ios::floatfield`. 这就是导致填充的原因。只需使用`setprecision`.

# android - 不幸的是，您的申请已停止

> ID：15740663
> 
> 赞同：-3
> 
> 时间：2013-04-01T09:12:51.977
> 
> 标签：android, android-intent

我正在尝试使用意图从一个活动切换到另一个活动，第一个活动运行正常，但是当第二个活动启动时，应用程序停止。我已经附上了这个代码。

**显现 ：**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.sampleapp"
    android:versionCode="1"
    android:versionName="1.0" >

    ...

    <application
        ...

        <activity
            android:name="com.example.sampleapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.sampleapp.welwithname"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.WELWITHNAME" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

        ...

    </application>

  </manifest> 
```

这是默认活动。我试图获取字符串并将其发送到下一个活动。这里是 xml 和活动。 **活动代码：**

```
public class MainActivity extends Activity {
    public final static String EXTRA_MESSAGE = "com.example.sampleapp.MESSAGE";

    String tempname;
    Button submit;
    EditText name;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        submit= (Button)findViewById(R.id.button1);

         submit.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v) {

                Intent intent = new Intent(MainActivity.this,Welwithname.class);
                EditText editText = (EditText) findViewById(R.id.getname);
                String message = editText.getText().toString();
                intent.putExtra(EXTRA_MESSAGE, message);
                startActivity(intent);
             }
         });

    }

} 
```

**第二个活动：**

此活动从活动 1 获取字符串并打印值..这里是 xml 和活动 **活动代码：**

```
public class Welwithname extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.welwithname);
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);
        // Create the text view
        TextView textView = (TextView)findViewById(R.id.textView1);
        textView.setTextSize(40);
        textView.setText("Welcome" + message + "!!!" );
        Button sq = (Button)findViewById(R.id.sq);
        Button exit = (Button)findViewById(R.id.exit);

        sq.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View V)
            {
                Intent main = new Intent(Welwithname.this,MainScreen.class);
                startActivity(main);
            }

        });

        // Set the text view as the activity layout
        setContentView(textView);
    }

    ...

} 
```

我应该在此代码中进行哪些更改以使其运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:36:25.600

```
 <activity
        android:name="com.example.sampleapp.welwithname" 
```

你的课不是叫`Welwithname`吗？

将您的活动名称中的“W”大写`AndroidManifest.xml`

* * *

如果您在遇到崩溃时不阅读控制台/logcat 输出，那么您将不会成为一名开发人员。

如果您阅读 LogCat，很可能会说“找不到 Activity welwithname，您是否在清单中声明了它？” 那将是您的答案，而 StackOverflow 将是一个更快乐的地方

[http://developer.android.com/tools/help/logcat.html](http://developer.android.com/tools/help/logcat.html)

# c# - 使用 TextFieldParser 解析 Mixedt CSV 文件

> ID：15740670
> 
> 赞同：0
> 
> 时间：2013-04-01T09:13:23.087
> 
> 标签：c#, parsing, csv

您好，我在解析 CSV 文件时遇到问题。CSV 文件用 | 分隔。特点 。到目前为止，一切都很好。但只有一个字段用 " 字符括起来。例如

```
field1|field2|"field3"|field4 
```

当我设置

> HasFieldsEnclosedInQuotes

为真，我将成为一个例外，否则 CSV 文件的解析会出错。你能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:04:08.157

我还没有看到一种文化，其中“|” 是 csv 分隔符...

总而言之，

```
var line = "field1|field2|\"field3\"|field4";
var pattern = string.Format("{0}(?=([^\"]*\"[^\"]*\")*[^\"]*$)", Regex.Escape("|")); 
//{0} in pattern is CSV separator. To get current use System.Globalization.CultureInfo.CurrentCulture.TextInfo.ListSeparator
var splitted = Regex.Split(line, pattern, RegexOptions.Compiled | RegexOptions.ExplicitCapture);

foreach (var s in splitted)
    Console.WriteLine(s); 
```

输出：

```
field1
field2
"field3"
field4 
```

模式旨在使用指定的分隔符从 CSV 文件中拆分单行。包括处理报价等。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-01T12:48:00.140

又快又脏：你可以考虑事先去掉所有使用"的文件。

```
string path = "c:\\test.txt";
string s = System.IO.File.ReadAllText(path, System.Text.Encoding.Default);
s = s.Replace("\"", string.Empty);
System.IO.File.WriteAllText(path, s, System.Text.Encoding.Default); 
```

编辑 1：此方法适用于仅包含一个单词的数字列或字符串列，但在其他情况下可能会破坏您的 csv 结构（例如，字段存储 html 内容） - 请注意可能的副作用。

# php - 如何设置不同地点的时区？

> ID：15740679
> 
> 赞同：2
> 
> 时间：2013-04-01T09:14:02.860
> 
> 标签：php, timezone

我对设置时区感到非常困惑。我正在用 PHP 开发一个论坛，因为我不确定是否显示回复时间。

下面是条件，

2013 年 4 月 1 日上午 10 点（时区“亚洲/加尔各答”）发布了一个问题。有人在 2013 年 3 月 31 日晚上 11:30 快速回复，因为回复人的时区是“美国/芝加哥”，即 -10.30 小时。

我的问题是如何管理不同位置的时区？

在上面的示例中，应该向发布问题并获得回复的用户显示什么时间？

向回答问题的用户显示的时间应该是多少？

我使用 PHP 的时间函数作为字符串在数据库中插入时间记录。并显示我使用的时间

```
date("d m Y h:m a", strtotime($time)); 
```

上面的代码 $time 是来自数据库的值。

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:22:22.387

我会将日期和时间存储到数据库中`gmdate()`，以使它们基于 GMT：

```
$d = gmdate('Y-m-d H:i:s');
// store $d into database 
```

呈现页面时，您会考虑用户的时区偏好：

```
date_default_timezone_set('Asia/Singapore');
$ts = strtotime($date_from_db . ' GMT');
$date_on_page = date('Y-m-d H:i:s', $ts); 
```

或者您可以让 JavaScript 处理时间转换。

**更新**

您还可以将 UNIX 时间戳存储在数据库中；我个人喜欢有 DATETIME 列，因为当您尝试调试某些东西时，它们更容易解码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:18:32.107

```
date_default_timezone_set('America/New_York'); 
```

此函数用于在 php 中使用默认时区。

这是[教程](http://php.net/manual/en/function.date-default-timezone-set.php)的链接。

并更改时区使用：

```
$date = new DateTime('2000-01-01', new DateTimeZone('Pacific/Nauru'));
echo $date->format('Y-m-d H:i:sP') . "\n";

$date->setTimezone(new DateTimeZone('Pacific/Chatham'));
echo $date->format('Y-m-d H:i:sP') . "\n"; 
```

这是[时区](http://php.net/manual/en/timezones.asia.php)列表。

# php - JW Player 无法在 Chrome 中运行

> ID：15740680
> 
> 赞同：3
> 
> 时间：2013-04-01T09:14:04.683
> 
> 标签：php, embed, jwplayer

我在网站上使用 JW Player 播放 youtube 视频。我为此使用了嵌入代码。从我的本地目录执行文件时，它在所有浏览器中都能正常工作。但是从服务器执行文件时，它在谷歌浏览器中不起作用。下面是代码。

```
<embed id="ply" height="384" width="430" flashvars="autostart=true&repeat=always&file=http:/www.youtube.com/watch?v=cNBFihPwThM&screencolor=000000&backcolor=000000&frontcolor=ffffff&skin=http://www.creatingafamily.org/modules/mod_jwmedia/skins/snel.swf" wmode="transparent" allowscriptaccess="always" allowfullscreen="true" quality="high" bgcolor="#000000" name="ply" style="" src="http://www.creatingafamily.org/modules/mod_jwmedia/player.swf" type="application/x-shockwave-flash"/> 
```

请帮助实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:22:19.763

首先，我们应该让 jwplayer 的 javascript 来构建 html 代码。

用js初始化jwplayer，在html中使用html5视频，如下：

```
<center>            
    <video controls="controls" id="container" poster="http://www.example.com/yourvideothumbs/videothumb.jpg"  width="693" height="388">
            <source src="http://www.example.com/videos/jourvideo.mp4" type="video/mp4" />
    </video>                        
</center> 
```

Javascript：

```
if(navigator.userAgent.toLowerCase().match(/(android)/) || navigator.userAgent.toLowerCase().match(/(chrom)/) ){
    //wee must force flash video player in chrome, because mp4 video files is not supported yet in chrome's HTML5 video implementation.
    modes = [{type: 'flash', src:  '[JWPLAYERBASEDIR]/swf/player.swf'}];
}else{
    modes = [ {type: 'html5'},{type: 'flash', src:  '[JWPLAYERBASEDIR]swf/player.swf'}];
}

jwplayer("container").setup({                   
    'modes':modes,      
}); 
```

这在所有浏览器中都对我有用。jwplayer 可以符合 HTML5 是否支持。

或者下面的强制 HTML4 实现：

```
<div id="container"></div>
<script type="text/javascript">
    jwplayer("container").setup({
       modes = [{type: 'flash', src:  '[JWPLAYERBASEDIR]/swf/player.swf'}], //force flashplayer for video
       image: "yourvideothumbs/videothumb.jpg", //poster image
       file: "videos/jourvideo.mp4",  //video file 
       height: "693", //set height in px
       width: "388" //set width in px
   }); 
```

在设置中，您可以设置`skin`任何`controls`您`autostart`想要的： [http ://www.longtailvideo.com/support/jw-player/28839/embedding-the-player/](http://www.longtailvideo.com/support/jw-player/28839/embedding-the-player/)

# python - 使用 setp 在 matplotlib 紧凑布局中包装长 y 标签

> ID：15740682
> 
> 赞同：38
> 
> 时间：2013-04-01T09:14:13.700
> 
> 标签：python, matplotlib

我一直在尝试在我的代码中包装长标签的文本。[我尝试了此处](https://stackoverflow.com/questions/10351565/how-do-i-fit-long-title)之前建议的 textwrap 方法，但我的代码通过使用该`pyplot.setp()`方法从 csv 导入的数组定义了 yticklabels 。否则，我将`tight_layout()`用于格式化。

所以问题是 - 有没有办法轻松地将非常长的 y 标签包装到换行符？

这是一些我想要修复的示例代码：

```
import numpy as np
import matplotlib.pyplot as plt

labels=('Really really really really really really long label 1', 'Really really really really really really long label 2', 'Really really really really really really long label 3')
values=(30,50,40)

fig = plt.figure()
ax=fig.add_subplot(111)

plt.ylim((0,40))
for i in np.arange(3):
    plt.barh(15*i, values[i])

plt.yticks(15*np.arange(3))
plt.setp(ax.set_yticklabels(labels))

plt.tight_layout()
plt.show() 
```

这绘制了这样 ![在此处输入图像描述](https://i.stack.imgur.com/f7yGC.png) 的东西我希望标签在固定宽度后转到换行符。有任何想法吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-01T09:18:18.310

我试过`textwrap`在标签上使用它，它对我有用。

```
from textwrap import wrap
labels=['Really really really really really really long label 1',
        'Really really really really really really long label 2',
        'Really really really really really really long label 3']
labels = [ '\n'.join(wrap(l, 20)) for l in labels ] 
```

在你的代码中插入这个给我们：

![包装标签](https://i.stack.imgur.com/CwdCJ.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-22T19:06:07.120

如果您正在寻找一种快速动态包装标签的方法，您可以像这样简单地`' '`替换`'\n'`：

```
wrapped_labels = [ label.replace(' ', '\n') for label in labels ] 
```

# asp.net-mvc - DotnetHighcharts ajax 加载数据？

> ID：15740685
> 
> 赞同：0
> 
> 时间：2013-04-01T09:14:37.533
> 
> 标签：asp.net-mvc, highcharts, dotnethighcharts

custom_scripts_graph.js（ajax 帖子）

```
$.ajax({
    type: "POST",
    url: app_base_url + 'Graph/_IrregularChart',
    contentType: 'application/json; charset=utf-8',
    dataType: "json",
    data: chartParams,
    success: function (result) {
        $("#chart").html(result);
    },
    error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
    }
}); 
```

控制器

```
public ActionResult _IrregularChart(IrregularChartParams chartParams)
{
    IEnumerable<MeterReadingsChartData> irregularChartData = MeterReadingsManager.GetMeterReadingsIrregularChartData(chartParams);
    Series[] series = ChartDataManager.GetIrregularChartData(irregularChartData).ToArray();

    Highcharts chart = new Highcharts("irregularChart")
        .InitChart(new Chart { DefaultSeriesType = ChartTypes.Line, ZoomType = ZoomTypes.Xy, Height = 300 })
        .SetOptions(new GlobalOptions { Global = new Global { UseUTC = false } })
        .SetTitle(new Title { Text = "Başlık" })
        .SetSubtitle(new Subtitle { Text = "AltBaşlık" })
        .SetLegend(new Legend
        {
            Layout = Layouts.Vertical,
            VerticalAlign = VerticalAligns.Top,
            Align = HorizontalAligns.Right,
            Shadow = true,
            BackgroundColor = ColorTranslator.FromHtml("#FFFFFF"),
            Floating = true
        })
        .SetXAxis(new XAxis
        {
            Type = AxisTypes.Datetime,
            DateTimeLabelFormats = new DateTimeLabel { Month = "%e. %b", Hour = "%H:%M", Year = "%Y" }
        })
        .SetYAxis(new YAxis
        {
            Title = new YAxisTitle { Text = "yaxis title" },
            Labels = new YAxisLabels
            {
                Formatter = @"function() { return this.value; }"
            }
        })
        .SetCredits(new Credits { Enabled = false })
        .SetTooltip(new Tooltip { Formatter = "function() { return '<b>'+ this.series.name +'</b><br/>'+ Highcharts.dateFormat('%e. %b - %H:%M', this.x) +' : <b>'+ Highcharts.numberFormat(this.y, 2); +'</b>'; }" })
        .SetSeries(series);

    return PartialView(chart);
} 
```

图表.cshtml

```
<script src="@Url.Content("~/Scripts/custom_scripts_graph.js")" type="text/javascript"></script>
<div id="chart">
</div> 
```

_IrregularChart.cshtml（部分视图）

```
@model DotNet.Highcharts.Highcharts
@Model 
```

**错误 ：**

> 意外的令牌 <

所有数据都是真实的。阿贾克斯回应：

```
<div id='irregularChart_container'></div> <script type='text/javascript'> Highcharts.setOptions({ global: { useUTC: false } }); var irregularChart; $(document).ready(function() {  irregularChart = new Highcharts.Chart({         chart: { renderTo:'irregularChart_container', defaultSeriesType: 'line', height: 300, zoomType: 'xy' },         credits: { enabled: false },        legend: { align: 'right', backgroundColor: '#FFFFFF', floating: true, layout: 'vertical', shadow: true, verticalAlign: 'top' },         plotOptions: { line: { lineWidth: 3, marker: { enabled: true, states: { hover: { enabled: true, radius: 5 } } }, states: { hover: { lineWidth: 3 } } } },       subtitle: { text: 'AltBaşlık' },        title: { text: 'Başlık' },          tooltip: { formatter: function() { return '<b>'+ this.series.name +'</b><br/>'+ Highcharts.dateFormat('%e. %b - %H:%M', this.x) +' : <b>'+ Highcharts.numberFormat(this.y, 2); +'</b>'; } },        xAxis: { dateTimeLabelFormats: { hour: '%H:%M', month: '%e. %b', year: '%Y' }, type: 'datetime' },          yAxis: { labels: { formatter: function() { return this.value; } }, title: { text: 'yaxis title' } },        series: [{ data: [[Date.parse('03/26/2013 00:00:00'),
219.666666666667], [Date.parse('03/26/2013 01:00:00'), 219.333333333333], [Date.parse('03/26/2013 02:00:00'), 220], [Date.parse('03/26/2013 03:00:00'), 219.666666666667], [Date.parse('03/26/2013 04:00:00'), 220], [Date.parse('03/26/2013 05:00:00'), 219.333333333333], [Date.parse('03/26/2013 06:00:00'), 219], [Date.parse('03/26/2013 07:00:00'), 220], [Date.parse('03/26/2013 08:00:00'), 219.666666666667], [Date.parse('03/26/2013 09:00:00'), 220], [Date.parse('03/26/2013 10:00:00'), 220], [Date.parse('03/26/2013 11:00:00'), 220], [Date.parse('03/26/2013 12:00:00'), 219.666666666667], [Date.parse('03/26/2013 13:00:00'), 220], [Date.parse('03/26/2013 14:00:00'), 219.5], [Date.parse('03/26/2013 15:00:00'), 220], [Date.parse('03/26/2013 16:00:00'), 220], [Date.parse('03/26/2013 17:00:00'), 220], [Date.parse('03/26/2013 18:00:00'),
219.666666666667], [Date.parse('03/26/2013 19:00:00'), 220], [Date.parse('03/26/2013 20:00:00'), 219.666666666667], [Date.parse('03/26/2013 21:00:00'), 219], [Date.parse('03/26/2013 22:00:00'), 219.5], [Date.parse('03/26/2013 23:00:00'), 219], [Date.parse('03/27/2013 00:00:00'), 219.5], [Date.parse('03/27/2013 01:00:00'), 220], [Date.parse('03/27/2013 02:00:00'), 220], [Date.parse('03/27/2013 03:00:00'), 220], [Date.parse('03/27/2013 04:00:00'), 219.666666666667], [Date.parse('03/27/2013 05:00:00'),
219.5], [Date.parse('03/27/2013 06:00:00'), 219.5], [Date.parse('03/27/2013 07:00:00'), 220], [Date.parse('03/27/2013 08:00:00'), 219.666666666667], [Date.parse('03/27/2013 09:00:00'), 220], [Date.parse('03/27/2013 10:00:00'), 220], [Date.parse('03/27/2013 11:00:00'), 220], [Date.parse('03/27/2013 12:00:00'), 219.5], [Date.parse('03/27/2013 13:00:00'), 220], [Date.parse('03/27/2013 14:00:00'), 219.666666666667], [Date.parse('03/27/2013 15:00:00'), 220], [Date.parse('03/27/2013 16:00:00'), 219.666666666667], [Date.parse('03/27/2013 17:00:00'), 220], [Date.parse('03/27/2013 18:00:00'), 220], [Date.parse('03/27/2013 19:00:00'), 220], [Date.parse('03/27/2013 20:00:00'), 219.666666666667], [Date.parse('03/27/2013 21:00:00'),
219.666666666667], [Date.parse('03/27/2013 22:00:00'), 220], [Date.parse('03/27/2013 23:00:00'), 219.333333333333], [Date.parse('03/28/2013 00:00:00'), 219], [Date.parse('03/28/2013 01:00:00'), 219.333333333333], [Date.parse('03/28/2013 02:00:00'), 220], [Date.parse('03/28/2013 03:00:00'), 219.333333333333], [Date.parse('03/28/2013 04:00:00'), 219.666666666667], [Date.parse('03/28/2013 05:00:00'), 220], [Date.parse('03/28/2013 06:00:00'), 219], [Date.parse('03/28/2013 07:00:00'), 219.5], [Date.parse('03/28/2013 08:00:00'), 220], [Date.parse('03/28/2013 09:00:00'), 220], [Date.parse('03/28/2013 10:00:00'), 220], [Date.parse('03/28/2013 11:00:00'), 219.666666666667], [Date.parse('03/28/2013 12:00:00'), 219], [Date.parse('03/28/2013 13:00:00'), 220], [Date.parse('03/28/2013 14:00:00'), 219.5], [Date.parse('03/28/2013 17:00:00'), 219.5], [Date.parse('03/28/2013 18:00:00'), 219.666666666667], [Date.parse('03/28/2013 19:00:00'), 220], [Date.parse('03/28/2013 20:00:00'), 219], [Date.parse('03/28/2013 21:00:00'), 220], [Date.parse('03/28/2013 22:00:00'), 219], [Date.parse('03/28/2013 23:00:00'),
219.333333333333], [Date.parse('03/29/2013 00:00:00'), 219.5], [Date.parse('03/29/2013 03:00:00'), 220], [Date.parse('03/29/2013 04:00:00'), 220], [Date.parse('03/29/2013 05:00:00'), 220], [Date.parse('03/29/2013 07:00:00'), 219], [Date.parse('03/29/2013 08:00:00'), 219.5], [Date.parse('03/29/2013 09:00:00'), 220], [Date.parse('03/29/2013 10:00:00'), 220], [Date.parse('03/29/2013 11:00:00'), 219.5], [Date.parse('03/29/2013 12:00:00'), 219], [Date.parse('03/29/2013 13:00:00'), 219.5], [Date.parse('03/29/2013 14:00:00'), 220], [Date.parse('03/29/2013 15:00:00'), 219.5], [Date.parse('03/29/2013 17:00:00'), 220], [Date.parse('03/29/2013 18:00:00'), 219.666666666667], [Date.parse('03/29/2013 19:00:00'), 220], [Date.parse('03/29/2013 20:00:00'), 220], [Date.parse('03/29/2013 21:00:00'), 219.5], [Date.parse('03/29/2013 22:00:00'), 219.333333333333], [Date.parse('03/29/2013 23:00:00'),
219.666666666667], [Date.parse('03/30/2013 00:00:00'), 220], [Date.parse('03/30/2013 01:00:00'), 219.666666666667], [Date.parse('03/30/2013 02:00:00'), 219], [Date.parse('03/30/2013 03:00:00'), 219.333333333333], [Date.parse('03/30/2013 04:00:00'),
219.333333333333], [Date.parse('03/30/2013 05:00:00'), 219.5], [Date.parse('03/30/2013 06:00:00'), 219], [Date.parse('03/30/2013 07:00:00'), 220], [Date.parse('03/30/2013 08:00:00'),
219.333333333333], [Date.parse('03/30/2013 09:00:00'), 220], [Date.parse('03/30/2013 10:00:00'), 219.666666666667], [Date.parse('03/30/2013 11:00:00'), 219.5], [Date.parse('03/30/2013 12:00:00'), 220], [Date.parse('03/30/2013 13:00:00'), 219.5], [Date.parse('03/30/2013 14:00:00'), 220], [Date.parse('03/30/2013 15:00:00'), 219.5], [Date.parse('03/30/2013 16:00:00'), 219.5], [Date.parse('03/30/2013 17:00:00'), 219.333333333333], [Date.parse('03/30/2013 18:00:00'), 220], [Date.parse('03/30/2013 19:00:00'), 219.5], [Date.parse('03/30/2013 20:00:00'), 220], [Date.parse('03/30/2013 21:00:00'), 219], [Date.parse('03/30/2013 22:00:00'), 219.5], [Date.parse('03/30/2013 23:00:00'),
219.666666666667], [Date.parse('03/31/2013 00:00:00'), 219.5], [Date.parse('03/31/2013 01:00:00'), 220], [Date.parse('03/31/2013 02:00:00'), 219], [Date.parse('03/31/2013 04:00:00'),
219.666666666667], [Date.parse('03/31/2013 05:00:00'), 218.5], [Date.parse('03/31/2013 06:00:00'), 219.666666666667], [Date.parse('03/31/2013 07:00:00'), 219.666666666667], [Date.parse('03/31/2013 08:00:00'), 218], [Date.parse('03/31/2013 09:00:00'), 219.333333333333], [Date.parse('03/31/2013 10:00:00'),
219.5], [Date.parse('03/31/2013 11:00:00'), 219.666666666667], [Date.parse('03/31/2013 12:00:00'), 219.5], [Date.parse('03/31/2013 13:00:00'), 219.333333333333], [Date.parse('03/31/2013 14:00:00'), 220], [Date.parse('03/31/2013 15:00:00'), 220], [Date.parse('03/31/2013 16:00:00'), 219.333333333333], [Date.parse('03/31/2013 17:00:00'), 220], [Date.parse('03/31/2013 18:00:00'), 219.333333333333], [Date.parse('03/31/2013 19:00:00'), 219], [Date.parse('03/31/2013 20:00:00'), 219.5], [Date.parse('03/31/2013 21:00:00'), 220], [Date.parse('03/31/2013 22:00:00'), 219], [Date.parse('03/31/2013 23:00:00'),
219.666666666667], [Date.parse('04/01/2013 00:00:00'), 220], [Date.parse('04/01/2013 01:00:00'), 219.666666666667], [Date.parse('04/01/2013 02:00:00'), 220], [Date.parse('04/01/2013 04:00:00'), 220], [Date.parse('04/01/2013 05:00:00'), 220], [Date.parse('04/01/2013 06:00:00'), 219.5], [Date.parse('04/01/2013 07:00:00'), 220], [Date.parse('04/01/2013 08:00:00'), 219], [Date.parse('04/01/2013 09:00:00'), 219.666666666667], [Date.parse('04/01/2013 10:00:00'), 220]], name: 'Gerilim Faz 1 V' }]  }); }); </script> 
```

并使用上述数据进行[**演示，并且可以正常工作。**](http://jsfiddle.net/Kb3sF/2/)我只删除了脚本标签。我认为它与脚本标签有关。关于这个的任何建议。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:44:01.477

我从 ajax 中删除了以下行

```
dataType: "json", 
```

它有效，我不明白为什么？如果有人知道原因，可以解释一下吗？

# android - 在Android中动态更改MenuItem？

> ID：15740686
> 
> 赞同：1
> 
> 时间：2013-04-01T09:14:38.420
> 
> 标签：android, android-actionbar, android-webview

我在 ActionBar 中有一组 MenuItems，WebView 用于显示属于 .Net 项目的网页，现在当用户登录到 webApplication 时，是否有可能动态更改 MenuItem？我没有向服务器发送任何请求。有什么方法可以捕获已加载到 webview 中的最新 url 并将其与其他参数进行比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:31:06.793

您必须覆盖 onPrepareOptionMenu 才能更新菜单项。

请参见下面的一段代码：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
     MenuItem menuItem = (MenuItem) menu.findItem(R.id.---);

     //your code...........
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:23:27.750

只需在Activity或Fragment中重写onPrepareOptionsMenu(Menu menu)，即可在该方法中获取Menu的引用。当您想要调用 onPrepareOptionsMenu(Menu menu) 时调用 invalidateOptionsMenu()。

# amazon-web-services - AWS Auto Scaling 下降 ~/.ssh/authorized_keys

> ID：15740687
> 
> 赞同：0
> 
> 时间：2013-04-01T09:14:43.877
> 
> 标签：amazon-web-services, amazon-ec2, load-balancing, amazon-elastic-beanstalk, autoscaling

问题是我有一个 ec2 实例，在**~/.ssh/authorized_keys**里面有一些公钥，让开发人员 ssh 进入这个实例，但是有一天自动缩放机制会创建一个新实例，然后删除我的旧实例（里面有授权密钥），现在我必须再次编辑新实例中的**~/.ssh/authorized_keys**。

我怎样才能防止这种情况？我的意思是我如何确保每当自动缩放创建一个新实例或删除我的旧实例时，它会同步我所有的授权密钥，这样我就不需要手动复制。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T11:14:59.887

我猜您在 Auto Scaling 中指定的 AMI id 包含旧数据。创建最新和更新实例的 AMI，并删除您已在 as-config 中指定的旧 AMI，并添加最新的 AMI ID。事情会正常的。

# python - 组合多个参数以创建 SVM 向量

> ID：15740689
> 
> 赞同：0
> 
> 时间：2013-04-01T09:14:54.270
> 
> 标签：python, svm, scikit-learn

scikit-learn 的新手，我正在处理一些如下数据。

```
data[0] = {"string": "some arbitrary text", "label1": "orange", "value1" : False }
data[0] = {"string": "some other arbitrary text", "label1": "red", "value1" : True } 
```

对于单行文本`CountVectorizer`，`DictVectorizer`在`TfidfTransformer`. 这些的输出可以连接起来，我希望有以下警告：我不希望任意文本与特定的、有限的和明确定义的参数同等重要。

最后，还有一些其他问题，可能相关

*   这个数据结构可能表明哪个 SVM 内核是最好的？
*   或者在这种情况下，随机森林/决策树、DBN 或贝叶斯分类器可能会做得更好吗？还是[集成方法](http://scikit-learn.org/dev/modules/ensemble.html)？（输出是[多类的](http://scikit-learn.org/dev/modules/multiclass.html)）
*   [我看到feature union](http://scikit-learn.org/dev/modules/pipeline.html#feature-union)有一个即将推出的功能，但这是对相同的数据运行不同的方法并将它们组合起来。
*   我应该使用[功能选择](http://scikit-learn.org/dev/modules/feature_selection.html)吗？

也可以看看：

*   [在 NLTK 中实现词袋朴素贝叶斯分类器](https://stackoverflow.com/questions/10098533/implementing-bag-of-words-naive-bayes-classifier-in-nltk)
*   [在 scikit-learn 中组合特征提取类](https://stackoverflow.com/questions/12721486/combining-feature-extraction-classes-in-scikit-learn)
*   [http://scikit-learn.org/dev/modules/label_propagation.html](http://scikit-learn.org/dev/modules/label_propagation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:10:37.913

scikit-learn(*) 中的所有分类器都期望样本具有平面特征表示，因此您可能希望将`string`特征转换为向量。首先，让我们排除一些不正确的假设：

*   `DictVectorizer`不是用于处理“文本行”，而是用于任意符号特征。
*   `CountVectorizer`也不是用于处理行，而是用于整个文本文档。
*   特征是否“同等重要”主要取决于学习算法，尽管使用核化 SVM，您可以人为地为特征分配较小的权重，以使其点积不同。不过，我并不是说这是个好主意。

处理此类数据有两种方法：

1.  构建一个`FeatureUnion`由`CountVectorizer`（或`TfidfVectorizer`）组成的文本数据和`DictVectorizer`附加功能。
2.  手动将文本数据拆分为单词，然后将每个单词用作 a 中的一个特征`DictVectorizer`，例如

    ```
    {"string:some": True, "string:arbitrary": True, "string:text": True,
     "label1": "orange", "value1" : False } 
    ```

然后是相关问题：

*   这个数据结构可能表明哪个 SVM 内核是最好的？

由于您正在处理文本数据，`LinearSVC`如果它不起作用，请尝试第一个和 2 次多项式内核。RBF 内核与文本数据不匹配，三次或更高阶的多边形内核往往会严重过度拟合。作为内核的替代方案，您可以手动构建单个特征的产品并`LinearSVC`在此基础上进行训练；有时，它比内核效果更好。它还消除了特征重要性问题，因为它可以`LinearSVC`学习每个特征的权重。

*   或者在这种情况下，随机森林/决策树、DBN 或贝叶斯分类器可能会做得更好吗？

不尝试就无法判断。不幸的是，scikit-learn 的随机森林和 dtree 不处理稀疏矩阵，因此它们很难应用。未实施 DBN。

*   我应该使用特征选择吗？

不看数据就无法判断。

(*) 如果您实现自定义内核，则 SVM 除外，这是一个非常高级的话题，我现在不会讨论它。

# java - 使用 capistrano 部署 java 应用程序

> ID：15740696
> 
> 赞同：1
> 
> 时间：2013-04-01T09:15:08.313
> 
> 标签：java, windows, capistrano, tomcat6

我正在尝试将我的 java 应用程序部署在 tomcat 服务器（在 Windows 中）上，但出现以下错误。请帮助我就以下连接错误提供一些指导。我有管理员权限，服务器在本地运行。

```
C:\builds>cap local deploy
DL is deprecated, please use Fiddle
  * 2013-04-01 14:19:06 executing `local'
  * 2013-04-01 14:19:06 executing `deploy'
  * 2013-04-01 14:19:06 executing `deploy:update'
 ** transaction: start
  * 2013-04-01 14:19:06 executing `deploy:update_code'
  * executing "xcopy C:/_Savita/app/my-app \"C:/builds/releases/20
130401084906\" /S/I/Y/Q/E && (echo  > C:/builds/releases/20130401084906/REVISION
)"
    servers: ["localhost"]
*** [deploy:update_code] rolling back
  * executing "rm -rf C:/builds/releases/20130401084906; true"
    servers: ["localhost"]
 ** [deploy:update_code] exception while rolling back: Capistrano::ConnectionErr
or, connection failed for: localhost (Errno::ECONNREFUSED: No connection could b
e made because the target machine actively refused it. - connect(2))
connection failed for: localhost (Errno::ECONNREFUSED: No connection could be ma
de because the target machine actively refused it. - connect(2)) 
```

请在下面找到使用的部署脚本

```
set :application, "myApp"
#set :scm, "git"
set :repository, "C:/_Savita/app/my-app"
#set :branch, "master"

default_run_options[:pty] = true
ssh_options[:forward_agent] = true 

task :local do
    roles.clear
    server "localhost", :app 
    set :user, "Savita Doddamani" 
    set :java_home, "C:/Program Files (x86)/Java/jdk1.6.0_25" 
    set :tomcat_home, "C:/Program Files (x86)/Apache Software Foundation/Tomcat 6.0"
    set :tomcat_manager, "user"
    set :tomcat_manager_password, "pwd"
    set :maven_home, "C:/_Savita/softwares/apache-maven-2.2.1"
    set :deploy_to, "C:/builds/" 
    set :use_sudo, false
    namespace :tomcat do
      task :deploy do
        puts "==================Building with Maven======================" #Line 22
        run "export JAVA_HOME=#{java_home} && cd #{deploy_to}/ && #{maven_home}/bin/mvn clean install package -DskipTests"
        puts "==================Undeploy war======================"#Line 24
        run "curl --user #{tomcat_manager}:#{tomcat_manager_password} http://$CAPISTRANO:HOST$:8080/manager/text/undeploy?path=/#{application}"
        puts "==================Deploy war to Tomcat======================" #Line 26
        run "curl --upload-file #{deploy_to}/current/target/dist/local/#{application}*.war --user #{tomcat_manager}:#{tomcat_manager_password} http://$CAPISTRANO:HOST$:8080/manager/text/deploy?path=/#{application}"
      end
    end
    after "deploy", "tomcat:deploy" #Line 30
    after "tomcat:deploy", "deploy:cleanup" # keep only the last 5 releases
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:03:47.007

`ECONNREFUSED`是`connect(2)`系统调用的返回。这意味着服务器进程没有在 TCP 端口 8080 上侦听。Java 需要时间来启动，您可能试图通过`curl`太快进行连接，或者您尚未将 Tomcat 配置为侦听端口 8080，或者您根本没有启动 Tomcat。

# vb.net - VB.NET 中组合框的文件夹名称

> ID：15740697
> 
> 赞同：0
> 
> 时间：2013-04-01T09:15:11.227
> 
> 标签：vb.net, combobox, directory

我希望我的组合框通过检查目录中的所有目录名称来填写运行时。

这是我的代码：

```
 Private Sub EDITFORM_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Call CLEAR()
    End Sub

Private Sub CLEAR()
        qtytb.Enabled = False
        parttb.Clear()
        qtytb.Clear()
        DTCB.Items.Clear()
        MTHCB.SelectedIndex = ""
        YRCB.SelectedIndex = ""
        RadioButton2.Checked = True
        RadioButton1.Checked = True
        TextBox1.Clear()
        TextBox2.Clear()
   >>     Dim di As New DirectoryInfo("D:\DATABASE\" & Pick_Item.deptlbl.Text)
       If di.Exists = True Then
            For Each subDirectory As DirectoryInfo In di.GetDirectories()
                YRCB.Items.Add(CInt(subDirectory.Name.ToString))
            Next
        End If<<

    End Sub 
```

这是我对组合框和加载表单的完整代码但是当我调试时，它只是出现一个带有错误的消息框，所以我不知道代码中的错误到底在哪里

```
"Conversion from "" string to integer is not valid" 
```

![这是我的目录的图片](https://i.stack.imgur.com/zNnky.png) 像这样的东西。那么，如何将文件夹名称添加到我的组合框中？正是我的目录名称使用整数（原因是按年份命名），如果我按名称添加目录（不是整数）它可以。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:48:11.397

您的问题在 TOP 行

```
Dim folders() As String = IO.Directory.GetDirectories("D:\DATABASE\")
  For Each folder As String In folders
    Combobox1.Items.Add(folder)
  Next 
```

# 更新

是否有任何其他代码存在于子例程/事件中但未包含在上面？我试过了，即使文件夹名称是数字，它也能正常工作

![在此处输入图像描述](https://i.stack.imgur.com/VEuxu.jpg)

我认为问题出在这些方面

```
MTHCB.SelectedIndex = ""
YRCB.SelectedIndex = "" 
```

将它们更改为

```
MTHCB.SelectedIndex = -1
YRCB.SelectedIndex = -1 
```

# iphone - 如何将titleForHeaderInSection的文本设置为AlignmentCenter

> ID：15740704
> 
> 赞同：2
> 
> 时间：2013-04-01T09:16:21.763
> 
> 标签：iphone, ios

我使用以下代码在组tableview标题标题处设置标题，但默认文本是AlignmentLeft，如何对齐？

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    if(section==0){
        return NSLocalizedString(@"more_titlehead_one", nil);
    }else if (section==1){
        return NSLocalizedString(@"more_titlehead_two", nil);
    }else{
        return NSLocalizedString(@"more_titlehead_three", nil);
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T09:22:22.813

像这样试试

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
     UILabel * sectionHeader = [[[UILabel alloc] initWithFrame:CGRectZero] autorelease];
     sectionHeader.backgroundColor = [UIColor clearColor];
     sectionHeader.textAlignment = UITextAlignmentCenter;
     sectionHeader.font = [UIFont boldSystemFontOfSize:10];
     sectionHeader.textColor = [UIColor whiteColor];

     switch(section) {
        case 0:sectionHeader.text = @"TITLE ONE"; break;
        case 1:sectionHeader.text = @"TITLE TWO"; break;
        default:sectionHeader.text = @"TITLE OTHER"; break;
     }  
   return sectionHeader;
} 
```

为页眉设置一些默认高度，

```
- (CGFloat)tableView:(UITableView *)tableViewheightForHeaderInSection:(NSInteger)section {
     switch(section) {
        case 0:
        case 1:
        default:return 20;
     }  
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T09:20:32.070

使用以下方法为每个部分的标题设置 UIView 项：

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerVw = [[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 30)] autorelease];
    headerVw.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"title_bg.png"]]; // set color of header

    UILabel *itemlbl = [[UILabel alloc]initWithFrame:CGRectMake(0, 5, 320, 20)];

    if(section==0){
        itemlbl.text = NSLocalizedString(@"more_titlehead_one", nil);
    }else if (section==1){
        itemlbl.text = NSLocalizedString(@"more_titlehead_two", nil);
    }else{
        itemlbl.text = NSLocalizedString(@"more_titlehead_three", nil);
    }
    itemlbl.textAlignment = UITextAlignmentCenter;
    itemlbl.backgroundColor = [UIColor clearColor];
    itemlbl.textColor = [UIColor whiteColor];
    itemlbl.font = [UIFont boldSystemFontOfSize:14];
    [headerVw addSubview:itemlbl];
    [titlelbl release];
    return headerVw;
} 
```

祝你好运

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T09:20:53.340

`UILabel`使用它的对齐**中心**非常简单。在`viewForHeaderInSection`

```
-(UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UILabel *lbl = [[[UILabel alloc] init] autorelease];
    lbl.textAlignment = UITextAlignmentCenter;
    lbl.backgroundColor=[UIColor clearColor];
    lbl.text = @"Header Title";
    return lbl;
} 
```

# android - Android 垂直标签主机

> ID：15740711
> 
> 赞同：2
> 
> 时间：2013-04-01T09:16:58.280
> 
> 标签：android, android-tabhost, vertical-alignment

我想构建一个垂直标签主机，如下图所示

![在此处输入图像描述](https://i.stack.imgur.com/FtyMv.png)

我尝试使用以下代码，但选项卡不可见

```
getTabWidget().setOrientation(LinearLayout.VERTICAL); 
```

是否可以像下面那样实现选项卡主机。如果可能的话，告诉我如何实现下面的选项卡主机。如果有任何内置项目来实现它，如下图所示，还发布链接。（或）是否可以将活动添加到图像视图单击类似于标签栏单击如下

```
 mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1").setContent(R.id.textview1)); 
```

因为如果可能的话，我将放置图像视图并更改每个项目单击的活动

帮助我制作垂直选项卡主机。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:30:35.590

您只需将您的选项卡小部件水平放置`LinearLayout`在 XML 文件中：

```
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageView3" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="horizontal" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="0"/>

        <android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="fill_parent"
            android:layout_height="0dp"
            android:layout_weight="1" >
        </android.support.v4.view.ViewPager>

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:layout_gravity="center_vertical">
        </TabWidget>

    </LinearLayout>
</TabHost> 
```

这会将选项卡放置在内容的右侧，如果您希望将其放在左侧，则需要重新排列 XML 文件中的顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:24:25.550

更好地使用片段。使用垂直对齐的按钮进行布局，并使用片段在按钮单击时转换页面。[请参阅此](http://developer.android.com/guide/components/fragments.html)以了解有关片段的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-19T00:20:24.790

只是为了补充 Emil Adz 的答案。

当您使用图形工具将控件添加到布局时，这会添加它所需的所有代码，但它会丢失`android:orientation="vertical"`每个 LinerLyout。

例子：

```
<LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                 >
            </LinearLayout> 
```

您必须自己输入

```
<LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >
            </LinearLayout> 
```

# ffmpeg - 使用 FFMPEG 转换的视频没有视频时长信息

> ID：15740712
> 
> 赞同：2
> 
> 时间：2013-04-01T09:17:01.720
> 
> 标签：ffmpeg, video-streaming

我正在使用 FFMPEG 将上传的视频转换为 .flv，转换后的 flv 视频没有关于其持续时间的信息。所以用户不能快退/快进、重播或查看其中的特定部分。代码如下：

```
“ffmpeg -i $srcfile_path -s 320x240 -ar 44100 -b 2048k -r 12 $desfilepath”;

```

请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:45:33.600

我运行了以下命令并且它起作用了。

```
“ffmpeg -i $srcfile_path -f flv - | flvtool2 -U stdin $desfilepath”
```

这需要在您的系统上安装 flvtool。我使用的是启用了 FFMPEG 和 FLVTOOL2 的服务器，所以它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:13:09.203

这很奇怪，我一直在使用 ffmpeg 将视频从一种格式转换为另一种格式，没有任何问题。请参见下面的示例：

ffmpeg -i input.avi -b:a 192K -b:v 2400 -s hd720 -c:v mpeg2video output.mpg

我相信你知道语法。

# php - PHP PDO / 从 MySQL 存储过程中检索 OUT 参数

> ID：15740724
> 
> 赞同：2
> 
> 时间：2013-04-01T09:18:05.653
> 
> 标签：php, mysql, stored-procedures, pdo

我需要从 MySQL 存储过程中检索 OUT 参数。我找不到任何可以解释这一点的东西（对我来说很有意义）。

```
try {
$dsn = 'mysql:dbname=db_name;host=localhost';
$dbh = new PDO($dsn, 'usr_name', 'password');
} catch (PDOException $e) {
echo 'Connection failed: ' . $e->getMessage();
}

$stmt = $dbh->prepare("CALL db.stprNewUser(:usrEmail,:newUserOK,:stprComment)");

$stmt->bindParam(':usrEmail', $tmpEmail, PDO::PARAM_STR); 
$stmt->bindParam(':newUserOK', $newUserOK, PDO::PARAM_INT,1); 
$stmt->bindParam(':stprComment', $stprComment, PDO::PARAM_STR,100); 

$stmt->execute();

$outputArray = $dbh->query("select @newUserOK, @stprComment")->fetch(PDO::FETCH_ASSOC);

print "procedure returned [" . $outputArray['@newUserOK'] . $outputArray['@stprComment'] . "]\n"; 
```

我在另一个 SO 项目上找到了最后两行，但它只返回 NULL 值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-26T01:14:58.480

try this... see if works...

```
try 
{
    $dsn = 'mysql:dbname=db_name;host=localhost';
    $dbh = new PDO($dsn, 'usr_name', 'password');
} 
catch (PDOException $e) 
{
    echo 'Connection failed: ' . $e->getMessage();
}

//$stmt = $dbh->prepare("CALL db.stprNewUser(:usrEmail,:newUserOK,:stprComment)");
//changed :newUserOK to @newUserOK
//changed :stprComment to @stprComment
$stmt = $dbh->prepare("CALL db.stprNewUser(:usrEmail,@newUserOK,@stprComment);");

//declare only input parameters.
//good pratice put string length. assuming varchar(100).
$stmt->bindParam(':usrEmail', $tmpEmail, PDO::PARAM_STR,100); 

//dont need these
// $stmt->bindParam(':newUserOK', $newUserOK, PDO::PARAM_INT,1); 
// $stmt->bindParam(':stprComment', $stprComment, PDO::PARAM_STR,100); 

$stmt->execute();

$outputArray = $dbh->query("select @newUserOK, @stprComment;")->fetchAll();

foreach($outputArray as $row)
{
   "NewUserOk:" .  $row["@newUserOk"] . ", StprComment:" . $row["@stprComment"];
}

//$outputArray = $dbh->query("select @newUserOK, @stprComment")->fetch(PDO::FETCH_ASSOC);
//print "procedure returned [" . $outputArray['@newUserOK'] . $outputArray['@stprComment'] . "]\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:23:49.030

除了使用 MySQL 会话变量之外，您还可以使用[bindParam()](http://www.php.net/manual/en/pdostatement.bindparam.php)：

> `bool PDOStatement::bindParam ( mixed $parameter , mixed &$variable [, int $data_type = PDO::PARAM_STR [, int $length [, mixed $driver_options ]]] )`
> 
> 将 PHP 变量绑定到用于准备语句的 SQL 语句中的相应命名或问号占位符。与 PDOStatement::bindValue() 不同，该变量被绑定为引用，并且只会在调用 PDOStatement::execute() 时进行评估。
> 
> 大多数参数是输入参数，即以只读方式用于构建查询的参数。一些驱动程序支持调用将数据作为输出参数返回的存储过程，而一些驱动程序还支持作为输入/输出参数发送数据并更新以接收数据的存储过程。

不要忘记使用相应的占位符：

```
$stmt = $dbh->prepare("CALL superior_main_db.stprNewUser(:usrEmail, :newUserOK, :stprComment)"); 
```

执行语句后，您的变量将自动包含您需要的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:28:10.963

要检索@newUserOK 和@stprComment 变量，只需在调用存储过程后执行以下查询，如下所示

```
SELECT @newUserOK, @stprComment 
```

# c# - Autofac：网站重新启动后的 ComponentNotRegisteredException

> ID：15740726
> 
> 赞同：4
> 
> 时间：2013-04-01T09:18:11.620
> 
> 标签：c#, autofac, nopcommerce

我有一个奇怪的错误。在我将 DLL 上传到 bin 文件夹后，我的网站可以正常工作。

但是在我离开一段时间后（或从我的共享主机控制面板触发网站重新启动）

我收到以下错误

```
The requested service 'Nop.Core.Data.DataSettings' has not been registered. To avoid  this exception, either register a component to provide the service, check for service registration using IsRegistered(), or use the ResolveOptional() method to resolve an optional dependency.

[ComponentNotRegisteredException: The requested service 'Nop.Core.Data.DataSettings'  has not been registered. To avoid this exception, either register a component to provide the service, check for service registration using IsRegistered(), or use the ResolveOptional() method to resolve an optional dependency.]
   Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`1 parameters) +231
   Autofac.ResolutionExtensions.Resolve(IComponentContext context, IEnumerable`1 parameters) +118
   Autofac.ResolutionExtensions.Resolve(IComponentContext context) +75
   Nop.Core.Infrastructure.DependencyManagement.ContainerManager.Resolve(String key) +156
   Nop.Core.Infrastructure.NopEngine.Resolve() +110
   Nop.Data.EfStartUpTask.Execute() +94
   Nop.Core.Infrastructure.NopEngine.RunStartupTasks() +806
   Nop.Core.Infrastructure.NopEngine.Initialize(NopConfig config) +90
   Nop.Web.MvcApplication.Application_Start() +494[/i] 
```

任何人都知道如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T15:48:59.573

看起来应用程序重启导致某些东西想要解析未注册的类型。堆栈跟踪显示某种启动任务正在运行，并且该任务正在尝试解析 type `Nop.Core.Data.DataSettings`。

**首先，尝试查找`Nop.Core.Data.DataSettings`类型在 Autofac 中注册的位置。**你应该看到，在你的代码的某个地方，一行看起来像......

```
builder.RegisterType<DataSettings>(); 
```

也就是说，该`DataSettings`类型应该使用`Autofac.ContainerBuilder`. 如果该行在任何地方都不存在，则需要添加它以便注册类型。Autofac 不只是“自动”解析未注册的类型。（或者，您可以`AnyConcreteTypeNotAlreadyRegisteredSource`使用 Autofac 注册，但这通常是矫枉过正。）

**如果找不到该行**，则需要添加它。哪里取决于您的应用程序，但您应该看到在 Autofac 中注册的其他地方 - 这也可能是放置这个的好地方。

**如果`DataSettings`已经注册**，则意味着您的应用程序重新启动并不总是以相同的顺序执行启动操作，或者甚至可能不会一直执行相同的启动操作。`HttpModule`如果您有在应用程序启动时运行的代码（例如在 中）没有正确处理多个工作进程或没有正确处理线程，则可能会发生这种事情。

另一种潜在（但不太可能）的情况是，您的应用程序中运行了两个 Autofac 容器，虽然`DataSettings`在其中一个容器中，但不在另一个容器中。这确实是边缘情况，但这是可能的。

**接下来，查看堆栈跟踪中的所有代码。**弄清楚是什么试图解析`DataSettings`对象。它可能无法直接解决；它可能是构造函数对正在解决的其他问题的依赖。您将不得不深入研究代码才能弄清楚。

**无论如何，这看起来像是一个应用程序启动问题**，而不是 Autofac 问题。Autofac 不只是“丢失”注册 - 如果它抱怨您正在尝试解决未注册的问题......那么它没有注册。

**异常消息告诉您调试它需要知道的一切**- 解决方案发生在哪里，它正在寻找什么......您需要打开您的应用程序代码，查看堆栈跟踪中显示的实际执行路径，以及查看正在解决的问题、时间和原因，以便您找出解决方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T04:20:10.653

听起来您需要加载程序集，`BuildManager.GetReferencedAssemblies()`以确保在回收 AppDomain 后加载它们。

我在过去发布了类似问题的详细信息：

[Autofac 在 Web.Config 上丢失注册编辑](https://stackoverflow.com/questions/11043750/autofac-losing-registrations-on-web-config-edit/11115260#11115260)

我将在 Autofac wiki 上添加一些关于此的注释。

# java - 用行尾替换 txt 文件中的连词 java

> ID：15740727
> 
> 赞同：0
> 
> 时间：2013-04-01T09:18:14.723
> 
> 标签：java, nlp

嘿，我需要代码在行尾替换 txt 文件中所有出现的连词。我有一个保存在 txt 文件中的连词列表。我希望输入文件和连词文件都以数组形式存储。然后使用 for 循环我想比较两个数组。但这会产生很多错误。是否存在更好的方法来做同样的事情？这是我尝试做的，但它在 for 循环中显示错误

```
import java.util.List;
import java.util.Scanner;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.JFileChooser;
public class Toarray
    {
    private static Object arrays;
    public static void main(String args[]) throws FileNotFoundException
     {
      String filename,path;
      System.out.println("select the input file");
      JFileChooser chooser = new JFileChooser();
      chooser.showOpenDialog(null);               
      File file1 = chooser.getSelectedFile();               
                chooser.showOpenDialog(null);           

                 filename = file1.getName();
                path= file1.getPath();

                Scanner sc;
                sc = new Scanner(new File(filename));
                List<String> lines = new ArrayList<String>();
                while (sc.hasNextLine()) {
                    lines.add(sc.nextLine());
                }

               String[] inp = lines.toArray(new String[0]);

               for (int index=0;index<=20;index++ ){
System.out.println(inp[index]);}

               String remove;
                remove="/Machintosh HD/Users/vaishnavi/Desktop/temp.txt";
                Scanner sc1;
                sc1 = new Scanner(new File(remove));
                List<String> con;
                con = new ArrayList<String>();
                while (sc1.hasNextLine()) {
                     lines.add(sc1.nextLine());
                }

               String[] conj = con.toArray(new String[0]);      
             }
     StriString oldtext;
         for(int i=0;i<=55;i++)

                 {
                  for(int j=0;j<=75;j++)
                         {
                        if(  inp[i].equals(conj[j]))
                        {
                             String newtext = oldtext.replaceAll(inp[i], ".");
                                FileWriter writer = null;   
                                 try {
                                   writer = new FileWriter(path);
                                    } catch (IOException ex) {
                                        Logger.getLogger(Toarray.class.getName()).log(Level.SEVERE, null, ex);
                                        }
                                 try {
                                     writer.write(newtext);
                                 } catch (IOException ex) {
                                     Logger.getLogger(Toarray.class.getName()).log(Level.SEVERE, null, ex);
                                 }
            }
        }
    }
} 
```

请帮忙:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:25:16.980

要检查数组是否包含某些内容，请尝试以下操作：

```
if(Arrays.asList(inp).contains("something")){

    //Do something
} 
```

# opengl - OpenGL阴影贴图

> ID：15740728
> 
> 赞同：5
> 
> 时间：2013-04-01T09:18:15.637
> 
> 标签：opengl, shader, shadow-mapping

我正在尝试做一个基本的阴影贴图，但由于某种原因，它不能正确渲染。

[问题视频](http://youtu.be/O2SE7ngiX-I)

我使用平面着色器渲染房子：

```
int shadowMapWidth = WINDOW_SIZE_X * (int)SHADOW_MAP_RATIO;
int shadowMapHeight =  WINDOW_SIZE_Y * (int)SHADOW_MAP_RATIO;

// Rendering into the shadow texture.
glActiveTexture(GL_TEXTURE0);
CALL_GL(glBindTexture(GL_TEXTURE_2D, shadowTexture));
// Bind the framebuffer.
CALL_GL(glBindFramebuffer(GL_FRAMEBUFFER, shadowFBO));
//Clear it
CALL_GL(glClear(GL_DEPTH_BUFFER_BIT));
CALL_GL(glViewport(0, 0, shadowMapWidth, shadowMapHeight));
CALL_GL(glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE));
//Render stuff
flatShader.use();
flatShader["baseColor"] = glm::vec4(1.0f,1.0f,1.0f,1.0f);
flatShader["pvm"] = projectionMatrix*pointLight.viewMatrix*cursor.modelMatrix;
cursor.draw(); //binds the vao and draws

// Revert for the scene.
CALL_GL(glBindFramebuffer(GL_FRAMEBUFFER, 0));
CALL_GL(glColorMask(GL_TRUE, GL_TRUE, GL_TRUE, GL_TRUE));
CALL_GL(glViewport(0, 0, WINDOW_SIZE_X, WINDOW_SIZE_Y)); 
```

请注意，我只渲染房子。我不在深度缓冲通道中渲染地板。

在此之后，我使用以下着色器对渲染代表地板的四边形：

```
/* [VERT] */ 
#version 330

in vec3 in_Position;
in vec2 in_TexCoord;

uniform mat4 shadowMatrix;
uniform mat4 mvp;

out vec2 UV;
out vec4 shadowProj;

void main()
{
    gl_Position = mvp*vec4(in_Position,1.0);
    shadowProj = shadowMatrix*vec4(in_Position,1.0);
    UV = in_TexCoord;
} 
```

和片段着色器：

```
/* [FRAG] */ 
#version 330

in vec2 UV;
in vec4 shadowProj;

out vec4 fragColor;

uniform sampler2D texturex;
uniform sampler2DShadow shadowMap;

void main()
{
    fragColor = vec4(texture(texturex, UV).rgb,1);

    float shadow = 1.0;
    shadow = textureProj(shadowMap,shadowProj);

    fragColor *= shadow;

} 
```

然后我再次用颜色画房子和......地板：

```
textureShader.use();

glUniform1i(baseImageLoc, 0); //Texture unit 0 is for base images.
glUniform1i(shadowMapLoc, 1); //Texture unit 1 is for shadow maps.

glActiveTexture(GL_TEXTURE0);
glBindTexture(GL_TEXTURE_2D, floorTexture);

glActiveTexture(GL_TEXTURE1);
glBindTexture(GL_TEXTURE_2D, shadowTexture);
textureShader["shadowMatrix"] = projectionMatrix*pointLight.viewMatrix*floorMatrix;
textureShader["mvp"] = projectionMatrix*viewMatrix*floorMatrix;
CALL_GL(glBindVertexArray(floorVAO));
CALL_GL(glDrawArrays(GL_TRIANGLES,0,18));

glfwSwapBuffers(); 
```

有没有人见过这种行为？知道有什么问题吗？顺便说一句，灯光的坐标直接将它放在房子的顶部，因此阴影应该直接位于地板上的房子下方（但它最终会侧身）。

以下是我如何生成阴影 FBO 的参考：

```
int shadowMapWidth = WINDOW_SIZE_X * (int)SHADOW_MAP_RATIO;
int shadowMapHeight =  WINDOW_SIZE_Y * (int)SHADOW_MAP_RATIO;

glGenTextures(1, &shadowTexture);
glBindTexture(GL_TEXTURE_2D, shadowTexture);
glTexImage2D(GL_TEXTURE_2D, 0, GL_DEPTH_COMPONENT, shadowMapWidth, shadowMapHeight, 0, GL_DEPTH_COMPONENT, GL_UNSIGNED_BYTE, 0);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_MODE, GL_COMPARE_REF_TO_TEXTURE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_COMPARE_FUNC, GL_LESS);
glTexImage2D(GL_TEXTURE_2D,0,GL_DEPTH_COMPONENT,shadowMapWidth,shadowMapHeight,0,GL_DEPTH_COMPONENT,GL_FLOAT,NULL);
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_COMPARE_MODE,GL_COMPARE_R_TO_TEXTURE);
glBindTexture(GL_TEXTURE_2D, 0); //unbind the texture

glGenFramebuffers(1, &shadowFBO);
glBindFramebuffer(GL_FRAMEBUFFER, shadowFBO);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_TEXTURE_2D, shadowTexture, 0);
glDrawBuffer(GL_NONE);
glReadBuffer(GL_NONE);

if (glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE)
{ printf("GL_FRAMEBUFFER_COMPLETE error 0x%x", glCheckFramebufferStatus(GL_FRAMEBUFFER)); }

glClearDepth(1.0f); glEnable(GL_DEPTH_TEST);
// Needed when rendering the shadow map. This will avoid artifacts.
glPolygonOffset(1.0f, 0.0f); glBindFramebuffer(GL_FRAMEBUFFER, 0);
//to convert the texture coordinates to -1 ~ 1
   GLfloat biasMatrixf[] = {
    0.5f, 0.0f, 0.0f, 0.0f,
    0.0f, 0.5f, 0.0f, 0.0f,
    0.0f, 0.0f, 0.5f, 0.0f,
    0.5f, 0.5f, 0.5f, 1.0f };

biasMatrix = glm::make_mat4(biasMatrixf); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T14:04:56.813

看起来您忘记将阴影矩阵乘以偏置矩阵。

# c# - 从 arralist 中删除重复条目

> ID：15740729
> 
> 赞同：0
> 
> 时间：2013-04-01T09:18:16.127
> 
> 标签：c#, .net, visual-studio-2010

一段时间后，我有一个数组列表“Templist”，我看到很多重复值被添加到数组列表中，所以我想删除重复项。当我用谷歌搜索时，我找到了一些解决方案，但其中大多数都令人困惑。有些地方在说明对arralist 进行排序并查找并删除重复项，有些地方告诉使用不同的地方，有些地方告诉使用hashlist。无论如何，我不想用其他一些结构替换 Arraylist。任何人都可以为我提供防止arraylist重复的逻辑吗？

我现在拥有的代码是

```
 public class Templist : ArrayList
 {
   //some logic behind arraylist
 }                     Templist items = new Templist();

                       if (!(obj is Testobject) && !(obj is Leafobject))
                       {
                          items.Add(obj);
                       }

                    if (items.Count > 0)
                    {
                       SSendObjectCollection(items);
                    }

                static public void SendObjectCollection(Templist col)
                {
                  try 
                  {
                       col.Sort();
                  }
                    catch(System.Exception exception)
                    {
                    }

                } 
```

**更新**

我做了这个代码

```
public static string[] RemoveDuplicates(string[] s)
 {
     HashSet<string> set = new HashSet<string>(s);
     string[] result = new string[set.Count];
     set.CopyTo(result);
     return result;
 } 
```

然后我像调用了现有函数 SendObjectCollection() 一样`RemoveDuplicates(col);` ，但它抛出了错误，任何人都可以指导我这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:31:57.947

您必须解决两个问题。首先，您必须使用以下方法删除重复值：

```
myArray = new Arraylist(myArray.Distinct().ToArray()); 
```

并在将值添加到数组列表之前检查重复项：

```
if(myArray.indexOf("value") == -1) {myArray.Add("value");} 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:35:24.260

请包含更多信息，例如您在哪里将项目添加到 ArrayList。无论如何，你可以使用

```
ArrayList.Contain(somevalue) 
```

在添加之前检查它是否存在于ArrayList中以避免重复

# mvvm - 具有 N 层的 MVVM

> ID：15740733
> 
> 赞同：0
> 
> 时间：2013-04-01T09:18:25.730
> 
> 标签：mvvm

我不确定使用 mvvm 实现我的项目，我有这个项目结构，它是一个项目分离

*   ProjTitle.Ui.Wpf
*   ProjTitle.ViewModel
*   项目标题.Bal
*   项目标题.Dal
*   项目标题.Bo
*   ProjTitle.Common

Bo 只是数据对象，Dal 会处理 Db，Bal 会得到 Dal 处理过的数据，做一些事情比如：计算、业务规则、Simple linq 等。

我没有为 Dal 使用助手，我认为这是一种处理/从数据库获取数据的老式方式。

有时，Bal 对于简单的功能有点多余，但它确实有助于某些操作

这种实现不是一个坏习惯吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T07:29:54.680

您应该通过以下方式实现它：

WPF Prj: - 视图 - ViewModel & Commands - Helpers

DAL Prj：-EF 模型-服务类

BLL: - 处理你的 DAL 应用一些业务逻辑

Facade: - 允许你和你的 BLL->DAL 交谈

最后，您的外观将被您的 ViewModel 的命令使用

# smalltalk - Smalltalk ReferenceStream 有新实例变量的问题？

> ID：15740734
> 
> 赞同：4
> 
> 时间：2013-04-01T09:18:30.007
> 
> 标签：smalltalk, pharo

在 Pharo Smalltalk 中，我使用 ReferenceStream 来序列化对象列表——这是我正在序列化的对象的类定义：

```
Object subclass: #Task
instanceVariableNames: 'title notes list project dateNextAction dateCreated dateCompleted importance selected'
classVariableNames: 'Database'
poolDictionaries: ''
category: 'ToDo' 
```

我正在使用`SMFileDatabase`此处描述的方法：http: [//book.seaside.st/book/advanced/persistency/image-based-persistency](http://book.seaside.st/book/advanced/persistency/image-based-persistency)

这一直运行良好，并且不必为我的原型应用程序使用数据库真是太好了。

然而，这里的问题是：当我从 ReferenceStream 中断的负载添加一个新的实例变量`person`时：`Task`

```
Object subclass: #Task
instanceVariableNames: 'title notes list project person dateNextAction dateCreated dateCompleted importance selected'
classVariableNames: 'Database'
poolDictionaries: ''
category: 'ToDo' 
```

它似乎没有发现新变量，并将值加载到错误的插槽中，所以 person 取值`dateNextAction`，`dateNextAction`取值`dateCreated`等等。

我怎样才能阻止这种情况发生？

我通过将新变量放在列表末尾来使其工作，但我想按类型对变量进行分组。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T10:58:58.977

ReferenceStream 不再受支持，在 Pharo 2.0 中已被删除。您应该使用编写良好、文档完善、测试良好且速度非常快的 Fuel。[http://rmod.lille.inria.fr/web/pier/software/Fuel](http://rmod.lille.inria.fr/web/pier/software/Fuel)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-01T12:04:37.183

`SmartRefStream`应该可以帮助你。从文档中引用：

> 普通的 ReferenceStreams 假设实例变量的名称和顺序在写入和读取目标文件时完全相同。
> 即使在实例变量已更改或整个类已重命名后，SmartRefStream 也允许读取对象文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T18:49:37.213

那些想要完成书中示例的人，请按照以下步骤操作：

**1\. 回到过去**并从以下网址获取 Pharo 1.4：[https ://gforge.inria.fr/frs/?group_id=1299](https://gforge.inria.fr/frs/?group_id=1299)

向下滚动并查找 One-Click Pharo 1.4 并获取最新版本，如果有比以下版本更新的版本：[https ://gforge.inria.fr/frs/download.php/file/31359/Pharo-1.4-14457- OneClick.zip](https://gforge.inria.fr/frs/download.php/file/31359/Pharo-1.4-14457-OneClick.zip)

使用配置浏览器安装 Seaside，您就完成了。

1a。或使用在 Pharo 1.3 上运行的遗留开发预建 Seaside、Scriptaculous、Magritte、Pier 图像：[http ://www.seaside.st/distributions/Seaside-3.0.7-final.zip](http://www.seaside.st/distributions/Seaside-3.0.7-final.zip)

我很幸运从这里使用了 Pharo VM：http: [//files.pharo.org/vm/pharo/20/mac/stable.zip](http://files.pharo.org/vm/pharo/20/mac/stable.zip)

**2\. 通过 Monticello 将您的代码从**当前图像中取出，然后“返回”到旧图像中。成功！

**PS。**更多详细信息： [Pharo 中的 FileDirectory 和 ReferenceStream 类等价物？](https://stackoverflow.com/questions/28285936/filedirectory-and-referencestream-class-equivalents-in-pharo)

# ios - UIImageView 未在所有设备上加载图像

> ID：15740738
> 
> 赞同：2
> 
> 时间：2013-04-01T09:18:41.993
> 
> 标签：ios, objective-c, image, ipad

这是我第一次在这里发布问题。到目前为止，我已经能够找到解决我遇到的所有问题的方法。两周来，我一直在努力解决一个奇怪的问题。

### 问题描述：

我正在为 iOS 5+ 开发一个通用应用程序。我对一张图片有疑问，该图片并未随处显示。这是我的背景图片，它可以在所有 iPhone（3GS、4、4S、5）和 iPad 视网膜上正确显示。不幸的是，有 3 个屏幕没有显示。这只发生在没有 Retina 显示屏的 iPad 上。图像出现在其他屏幕上，我无法确定有什么不同，因此它不会显示在这 3 个屏幕上。

### 我测试了什么：

我试图删除图像并再次添加它 - 没有任何变化。我已经仔细检查了文件的命名 - 一切都很好。我试图在另一个视图控制器中加载图像并加载。我已经清理了我的应用程序并将其从所有设备中删除 - 问题仍然存在。

如果您碰巧对导致这种奇怪行为的原因有任何建议，请给我一个提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:57:52.460

好的，由于您的图像已经在项目和目标中，这里有几个其他可能导致问题的原因

1.  文件扩展名和文件类型不匹配。尝试以另一种格式保存并在应用程序中使用它。看看这是否有效

2.  你提到这是一个通用应用程序？您是否正确命名图像（image.png、image@2x.png、image~ipad.png 和 image@2x~ipad.png

# jquery-mobile - jquery mobile链接在使用knockoutjs数据绑定时无法工作

> ID：15740740
> 
> 赞同：0
> 
> 时间：2013-04-01T09:18:46.013
> 
> 标签：jquery-mobile, knockout.js

我通过 jquery mobile 写了一个链接，例如：< a href="#detail" />

它第一次工作。

然后我使用 ko bind 对其进行修改，例如：<a href="#detail" data-bind="click:newAdvice">

它不能chagePage，我不知道为什么？谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:29:21.000

尝试设置链接数据绑定点击：

```
<a data-bind="click: showHomepage" data-role="button">Homepage</a> 
```

这是javascript：

```
self.showHomepage= function () {
        $.mobile.changePage("#Homepage", {
            transition: "slide"
        });
        return false;
    }; 
```

主页的 html 是：

```
<div data-role="page" id="Dashboard">
...
</div> 
```

# java - 从类的方法代码或类的实例中调用方法有区别吗？

> ID：15740753
> 
> 赞同：1
> 
> 时间：2013-04-01T09:20:18.440
> 
> 标签：java, object, methods, call

我在这里有一段代码，我不确定几个命令的作用：

```
//this bit is the body of the main method
//lots of stuff omitted
project frame = new project();
frame.createGUI();

private void createGUI() {
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    panel = new JPanel();
} 
```

那么当`frame.createGUI();`被调用时，中的两个命令会发生什么`createGUI();`？他们是

```
setDefaultCloseOperation(EXIT_ON_CLOSE);
panel = new JPanel(); 
```

或者

```
frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
frame.panel = new JPanel(); 
```

还是完全是别的东西？我是 Java 的新手，今年开始了 12 年的计算机科学，但我有点领先于课堂。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:22:36.027

```
setDefaultCloseOperation(EXIT_ON_CLOSE); 
```

设置用户关闭窗口 (JFrame) 时发生的操作。该方法适用于 JFrame。如果该类扩展了 JFrame 那么`setDefaultCloseOperation(EXIT_ON_CLOSE);`很好，因为如果不是，它将调用 JFrame 的方法，那么它应该是`frame.setDefaultCloseOperation(EXIT_ON_CLOSE);`但是如果项目扩展了 JFrame 这将起作用

```
panel = new JPanel(); 
```

这将创建一个新面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:37:06.047

Java 中的每个非静态方法都有一个隐藏参数，称为`this`. 它的值是调用中点前面的对象。在方法体内，其他方法的调用隐含`this.`在它们前面。如果变量不能在本地解决，那么变量的使用也是如此。如果`this`引用是明确的，您的方法将如下所示：

```
private void createGUI(project this) {
    this.setDefaultCloseOperation(this, EXIT_ON_CLOSE);
    this.panel = new JPanel();
} 
```

在 main 方法的调用中`createGUI`，真正发生的事情是这样的：

```
frame.createGUI(frame); 
```

运行`createGUI`时`this`引用是对`frame`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:27:22.253

`frame.createGUI();`意味着您`frame`在上面定义了一行的对象调用了该方法`createGUI()`

`setDefaultCloseOperation(EXIT_ON_CLOSE);`这意味着当用户单击窗口左上角的 X 按钮时，将关闭该窗口。

`setDefaultCloseOperation(EXIT_ON_CLOSE);`你可以尝试一下并从方法中删除`createGUI()`，看看会发生什么

如果你想了解更多，看[这里](http://docs.oracle.com/javase/tutorial/uiswing/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:31:57.337

您的两种选择实际上是相同的。在这两种情况下，您都在调用`frame`您创建的对象的方法。在类的方法中，您不必特别说：`this.doSomethimg()`or `this.myField = 123`，您可以只写`doSomething()`or `myField = 123`。从类外部的方法中，您必须指出您希望为哪个实例调用该方法。

# mongodb - 带有 mongo DB 的 celery 工作示例

> ID：15740755
> 
> 赞同：6
> 
> 时间：2013-04-01T09:20:23.070
> 
> 标签：mongodb, celery

我是 celery 新手，正在使用 Celery 运行异步任务。

1.  我想将我的任务结果保存到 MongoDB。
2.  我想使用 AMQP 代理。

芹菜项目示例对我没有多大帮助。谁能指出一些工作示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-15T19:23:53.340

要使用 MongoDB 作为后端存储，您必须显式配置 Celery 以使用 MongoDB 作为后端。

[http://docs.celeryproject.org/en/latest/getting-started/brokers/mongodb.html#broker-mongodb](http://docs.celeryproject.org/en/latest/getting-started/brokers/mongodb.html#broker-mongodb)

正如您所说，文档没有显示完整的工作示例。我刚开始玩 Celery，但一直在使用 MongoDB。我使用 MongoDB 和 Celery 创建了一个简短的工作教程 [http://skillachie.com/?p=953](http://skillachie.com/?p=953)

然而，这些片段应该包含所有你需要让 Celery 和 MongoDB 打个招呼的世界

芹菜配置文件

```
 from celery.schedules import crontab

CELERY_RESULT_BACKEND = "mongodb"
CELERY_MONGODB_BACKEND_SETTINGS = {
    "host": "127.0.0.1",
    "port": 27017,
    "database": "jobs", 
    "taskmeta_collection": "stock_taskmeta_collection",
}

#used to schedule tasks periodically and passing optional arguments 
#Can be very useful. Celery does not seem to support scheduled task but only periodic
CELERYBEAT_SCHEDULE = {
    'every-minute': {
        'task': 'tasks.add',
        'schedule': crontab(minute='*/1'),
        'args': (1,2),
    },
} 
```

任务.py

```
from celery import Celery
import time 

#Specify mongodb host and datababse to connect to
BROKER_URL = 'mongodb://localhost:27017/jobs'

celery = Celery('EOD_TASKS',broker=BROKER_URL)

#Loads settings for Backend to store results of jobs 
celery.config_from_object('celeryconfig')

@celery.task
def add(x, y):
    time.sleep(30)
    return x + y 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-17T06:50:44.037

我一直在测试 RabbitMQ 作为代理，MongoDB 作为后端，MongoDB 作为代理和后端。这些是我的发现。我希望他们能帮助那里的人。

假设：您在默认设置下运行 MongoDB（本地主机：21017）使用 conda 设置环境（您可以使用任何包管理器）

```
conda update -n base conda -c anaconda
conda create -n apps python=3.6 pymongo
conda install -n apps -c conda-forge celery
conda activate apps 
```

更新我的 conda，创建一个名为 apps 的环境并安装 pymongo 和 celery。

**RabbitMQ 作为代理，MongoDB 作为后端**

```
sudo apt install rabbitmq-server
sudo service rabbitmq-server restart 
sudo rabbitmqctl status 
```

如果没有错误，则 rabbitmq 正在运行。让我们在 executor.py 中创建任务并在 runner.py 中调用它们

```
# executor.py
import time
from celery import Celery

BROKER_URL = 'amqp://localhost//'
BACKEND_URL = 'mongodb://localhost:27017/from_celery'
app = Celery('executor', broker=BROKER_URL, backend=BACKEND_URL)

@app.task
def pizza_bot(string:str, snooze=10):
    '''return a dictionary with bot and
    lower case string input
    '''
    print(f'Pretending to be working {snooze} seconds')
    time.sleep(snooze)
    return {'bot':string.lower()} 
```

我们在 runner.py 中调用它们

```
# runner.py
import time
from datetime import datetime

from executor import pizza_bot

def run_pizza(msg:str, use_celery:bool=True):

      start_time = datetime.now()
      if use_celery: # Using celery
            response = pizza_bot.delay(msg)
      else: # Not using celery
            response = pizza_bot(msg)

      print(f'It took {datetime.now()-start_time}!'
            ' to run')
      print(f'response: {response}')

      return response

if __name__ == '__main__':

      # Call using celery
      response = run_pizza('This finishes extra fast')
      while not response.ready():
            print(f'[Waiting] It is {response.ready()} that we have results')
            time.sleep(2) # sleep to second
      print('\n We got results:')
      print(response.result) 
```

在终端 A 上运行 celery：

```
cd path_to_our_python_files
celery -A executor.app worker --loglevel=info 
```

这仅在开发中完成。我想看看在后台发生了什么。在生产中，在 daemonize 中运行它。

在终端 B 上运行 runner.py：

```
cd path_to_our_python_files
conda activate apps
python runner.py 
```

在终端 A 中，您将看到任务已收到，并在贪睡的几秒钟内完成。在您的 MongoDB 上，您将看到一个名为 from_celery 的新集合，其中包含消息和结果。

**MongoDB 作为代理和后端**

需要一个简单的修改来设置它。如前所述，我必须创建一个配置文件来设置 MongoDB 后端设置。

```
#mongo_config.py
#Backend Settings
CELERY_RESULT_BACKEND = "mongodb"
CELERY_MONGODB_BACKEND_SETTINGS = {
    "host": "localhost",
    "port": 27017,
    "database": "celery", 
    "taskmeta_collection": "pizza_collection",
} 
```

让我们创建 executor_updated.py，它与 executor.py 几乎相同，但代理现在是 MongoDB，后端是通过*config_from_object添加的*

```
# executor_updated.py
import time
from celery import Celery

BROKER_URL = 'mongodb://localhost:27017/celery'
app = Celery('executor_updated',broker=BROKER_URL)

#Load Backend Settings
app.config_from_object('mongo_config')

@app.task
def pizza_bot(string:str, snooze=10):
    '''return a dictionary with bot and
    lower case string input
    '''
    print(f'Pretending to be working {snooze} seconds')
    time.sleep(snooze)
    return {'bot':string.lower()} 
```

在终端 C 上运行 celery：

```
cd path_to_our_python_files
celery -A executor_updated.app worker --loglevel=info 
```

在终端 D 上运行 runner.py：

```
cd path_to_our_python_files
conda activate apps
python runner.py 
```

现在我们将 MongoDB 作为代理和后端。在 MongoDB 中，您将看到一个名为*celery*的集合和一个表*Pizza_collection*

希望这有助于您开始使用这些很棒的工具。

# firebase - 在 Firebase 中强制执行用户配额

> ID：15740759
> 
> 赞同：4
> 
> 时间：2013-04-01T09:20:42.900
> 
> 标签：firebase, firebase-security

对存储在 Firebase 中的数据强制执行每用户配额的最佳方法是什么？

我的用户将能够在以下路径上创建具有唯一 ID 的文档：

/documents/id/内容

id 将使用事务唯一生成。id 将通过使用验证规则 ( `contents.id == auth.id`)保留

但是，如何防止用户向数据库发送垃圾邮件（通过随机分配 id 给自己）？我可以制定一个规则来计算分配给用户的 id 数量并在计数过高时拒绝它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:45:20.233

目前没有很好的方法来做到这一点。

在某些情况下，您可以完全枚举允许存在的孩子（child1、child2 等），并为每个孩子授予读/写权限。这不适用于大量数字或您事先不知道的 id。

我们确实有计划构建功能来限制允许的孩子的数量，并提供其他功能来强制用户配额。

# php - 使用不同字符集引发的 PHP 异常消息

> ID：15740760
> 
> 赞同：0
> 
> 时间：2013-04-01T09:20:46.267
> 
> 标签：php, exception, character-encoding, redis

我使用 utf-8 作为默认字符集。它在 PHP.ini 和 header 中都设置了。我需要[Redisent](https://github.com/jdp/redisent)库并捕获它抛出的异常。当我显示错误消息时，它总是在 Windows-1251 中（它是 Windows 默认的俄罗斯西里尔字符集）。我试图将 Redisent 的源文件 Redis.php 保存为 UTF-8，但它没有帮助。

# c++ - 创建和使用 AABB 进行碰撞检测 3d (OpenGL)

> ID：15740761
> 
> 赞同：0
> 
> 时间：2013-04-01T09:20:49.567
> 
> 标签：c++, opengl, collision-detection, aabb

假设我有一个按以下方式创建的正方形：

```
glBegin(GL_QUADS);
glColor3f(0.0f,1.0f,0.0f);  
glVertex3f( 1.0f, 1.0f,-1.0f);  
glVertex3f(-1.0f, 1.0f,-1.0f);  
glVertex3f(-1.0f, 1.0f, 1.0f);  
glVertex3f( 1.0f, 1.0f, 1.0f);  

glColor3f(1.0f,0.5f,0.0f);  
glVertex3f( 1.0f,-1.0f, 1.0f);  
glVertex3f(-1.0f,-1.0f, 1.0f);  
glVertex3f(-1.0f,-1.0f,-1.0f);  
glVertex3f( 1.0f,-1.0f,-1.0f);  

glColor3f(1.0f,1.0f,0.0f);  
glVertex3f( 1.0f,-1.0f,-1.0f);  
glVertex3f(-1.0f,-1.0f,-1.0f);  
glVertex3f(-1.0f, 1.0f,-1.0f);  
glVertex3f( 1.0f, 1.0f,-1.0f);  

glColor3f(0.0f,0.0f,1.0f);  
glVertex3f(-1.0f, 1.0f, 1.0f);  
glVertex3f(-1.0f, 1.0f,-1.0f);  
glVertex3f(-1.0f,-1.0f,-1.0f);  
glVertex3f(-1.0f,-1.0f, 1.0f);  

glColor3f(1.0f,0.0f,1.0f);  
glVertex3f( 1.0f, 1.0f,-1.0f);  
glVertex3f( 1.0f, 1.0f, 1.0f);  
glVertex3f( 1.0f,-1.0f, 1.0f);  
glVertex3f( 1.0f,-1.0f,-1.0f);  
glEnd(); 
```

现在假设我想使用 AABB 结构来检测球体何时与该立方体的侧面（不是立方体的顶部或底部）碰撞，从而防止它穿过立方体？关于如何去做这件事的任何想法？

如果我使用 glutSolidCube 实现了多维数据集，我还能使用 AABB 结构吗？

还有没有更容易检测碰撞而不必使用AABB？也许像测试交叉路口或类似的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:39:17.703

OpenGL是一个渲染系统。它没有碰撞检测的概念，甚至没有基本渲染图元（点/线/三角形）之外的*对象。*OpenGL 不会帮助您进行碰撞检测。您需要为此使用物理或碰撞库。

# list - Haskell列表中的模式匹配失败

> ID：15740762
> 
> 赞同：0
> 
> 时间：2013-04-01T09:20:50.423
> 
> 标签：list, haskell, pattern-matching

我有一个模式匹配问题。当我向**(x:y:ys)** 输入包含 3 个元素的列表时，拥抱抱怨说有：**模式匹配失败**。我想问题就在这里

```
takeNearestOnes agent (y:ys) (x:nearestOnes) 
```

因为它无法将三个元素与包含两个元素的列表匹配

这是完整的代码：

```
takeNearestOnes agent (x:y:ys) nearestOnes
            | first == second =  takeNearestOnes agent (y:ys) (x:nearestOnes)
            | otherwise = (x:nearestOnes)
        where first=(manhattanDistance x (agentCoord agent))
              second=(manhattanDistance y (agentCoord agent) 
```

我该如何克服呢？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:26:25.857

结果应该是什么`takeNearestOnes agent [x] nearestOnes`？结果应该是什么`takeNearestOnes agent [] nearestOnes`？

为这些情况写额外的方程式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:27:11.390

由于您的函数是递归的并且会减少列表，因此您最终可能会一直工作到包含 1 个元素的列表，在这种情况下，您的匹配将失败。您可以通过添加另一个处理它的函数案例来解决这个问题，但是您认为它是合适的

就像是

```
takeNearestOnes agent [x] nearestOnes = doSomething
takeNearestOnes agent []  nearestOnes = doSomethingElse 
```

# ruby - ActiveRecord 布尔值返回“f”、“t”

> ID：15740765
> 
> 赞同：2
> 
> 时间：2013-04-01T09:21:06.013
> 
> 标签：ruby, activerecord, ruby-on-rails-3.2

我在活动记录迁移中添加了一个布尔列

```
class AddIncludeInConsolidationToCompanies < ActiveRecord::Migration
  def change
    add_column :companies, :include_in_consolidation, :bool, :default => true
  end
end 
```

每当我从数据库中获取记录时，我都会得到“f”或“t”，而不是 true 或 false。

activerecord 不应该自动处理与数据库之间的类型转换。

这就像`ActiveRecord::Base.connection.quoted_true/false`默认为true。

解决这个问题的最佳方法是什么？理想情况下，它应该可以正常工作，默认情况下，布尔列应该返回布尔值而不是字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T17:52:07.800

't' 和 'f' 是 PostgreSQL 用于布尔值的。

'bool' 不是 Rails 迁移的有效数据类型。您需要使用“布尔值”。我的猜测是'bool' 正在获取在数据库中创建的列，但是当将数据加载到模型中时，Rails 会感到困惑。更改并重新运行迁移，我敢打赌一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:32:39.377

可能是我错了，但布尔值在 PostgreSQL 中保存为“f”或“t”。

但是您可以在 RoR 逻辑中使用传统的真/假。给定一个具有名为“活动”的布尔属性的用户模型，您可以这样做

```
 if !user.active?
   # do something
 else
   # do something else
 end 
```

如您所见，真/假测试工作正常......

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T01:30:31.590

> 虽然在 postgresql 中使用 t 和 f 输出布尔值，但“关键字 TRUE 和 FALSE 是首选（符合 SQL 的）用法：”

[http://www.postgresql.org/docs/9.4/static/datatype-boolean.html](http://www.postgresql.org/docs/9.4/static/datatype-boolean.html)

不知道为什么会做出这个选择。

# nginx - 使用 lua 远程请求 nginx

> ID：15740766
> 
> 赞同：2
> 
> 时间：2013-04-01T09:21:12.707
> 
> 标签：nginx, lua

我试图让它在我的 nginx.conf 文件中运行一个 lua 代码，我试图通过 proxy_pass 连接到另一个 Web 应用程序，并根据 HTTP 结果呈现一些资源。这是我的代码

```
location /_auth {
    proxy_set_header  Accept-Encoding  "";
    proxy_pass http://127.0.0.1:8080/Welvi-rest;
}
location /server/ {
    content_by_lua "
        local res = ngx.location.capture('/_auth');
        ngx.print(res.status);
        if res.status ~= ngx.HTTP_OK then
            ngx.exit(ngx.HTTP_FORBIDDEN)
        end
    ";
} 
```

但是我不知道为什么8080中的web应用服务器从来没有被调用过。

我阅读了一些与问题相关的内容，因为我们需要在 lua 中添加标头，但我找不到解决此问题的方法

# c - 使用 ShellExecuteEx 永久设置路径变量

> ID：15740767
> 
> 赞同：3
> 
> 时间：2013-04-01T09:21:12.873
> 
> 标签：c, windows, path, shellexecuteex

我想出了这个代码。它将正确执行并返回 true。但它不会改变 Path 变量的值。当我在 cmd 中这样输入 --> setx Path "C:\Program Files\Java\jdk1.7.0_02\bin\" 时，它可以工作并更改路径值

这是代码

```
// Prepare shellExecutInfo
SHELLEXECUTEINFO ShRun = {0};
ShRun.cbSize = sizeof(SHELLEXECUTEINFO);
ShRun.fMask = SEE_MASK_NOCLOSEPROCESS;
ShRun.hwnd = NULL;
ShRun.lpVerb =NULL;
ShRun.lpFile = "C:\\Windows\\System32\\setx.exe";
ShRun.lpParameters = "Path \"\"\"C:\\Program Files\\Java\\jdk1.7.0_02\\bin\\\"\"\"";
ShRun.lpDirectory =NULL;
ShRun.nShow = SW_SHOWNORMAL;
ShRun.hInstApp = NULL;

// Execute the file with the parameters
if(ShellExecuteEx(&ShRun))
    printf("done");
else
    printf("no"); 
```

这里会有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:50:00.993

您对论点的引用是错误的。你的引号太多了。你需要写

```
ShRun.lpParameters = "Path \"C:\\Program Files\\Java\\jdk1.7.0_02\\bin\\\""; 
```

为了看到您的版本会失败，我在控制台上做了以下实验：

```
C:\Users\heff>setx 路径 """C:\Program Files\Java\jdk1.7.0_02\bin\"""
错误：无效的语法。默认选项不允许超过“2”次。
键入“SETX /？” 供使用。

```

我还注意到您正在使用`SEE_MASK_NOCLOSEPROCESS`. 通常你这样做是为了等待返回的进程句柄。你似乎没有这样做。更重要的是，您似乎没有关闭进程句柄，这是您在使用`SEE_MASK_NOCLOSEPROCESS`.

# extjs - Extjs 存储数据模型子字段空错误

> ID：15740770
> 
> 赞同：0
> 
> 时间：2013-04-01T09:21:34.053
> 
> 标签：extjs, null, store, datamodel

当我尝试将远程数据加载到网格时，子字段出现此错误：

```
Cannot read property 'id' of null 
```

我的数据模型：

```
 Ext.define('ruleDataModel', {
        extend: 'Ext.data.Model',
        fields: [
           { name: 'id'},
           { name: 'createTime', type:'date', dateFormat: 'timestamp', convert:function(v,j){ return (v != null?new Date(v):null);}},
           { name: 'discountPercent'},
           { name: 'discountAmount'},
           { name: 'discountOverSalePriceFlag', type: 'boolean'},
           { name: 'minSalePriceTotal'},
           { name: 'maxCount'},
           { name: 'execOrder'},
           { name: 'clearanceIncludedFlag', type: 'boolean'},
           { name: 'relatedProductMinCount'},
           { name: 'promocodeRuleTypeName', mapping: 'promocodeRuleType.friendlyType'},
           { name: 'groupName'},
           { name: 'productTypeId', mapping: 'productType.id', defaultValue: ''},
           { name: 'productTypeName', mapping: 'productType.name', defaultValue: ''},
           { name: 'relatedProductTypeId', mapping: 'relatedProductType.id', defaultValue: ''},
           { name: 'relatedProductTypeName', mapping: 'relatedProductType.name', defaultValue: ''}
        ], 
        idProperty: 'id'
    }); 
```

返回的 JSON 数据：

```
{totalCount: 1, root: [{"productType": {"name":
...
"relatedProductType":null,
...
"execOrder":0,"id":11}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:18:43.087

对于子字段，DataModel 应该这样定义：

```
Ext.define('ruleDataModel', {
            extend: 'Ext.data.Model',
            fields: [
               { name: 'id'},
               { name: 'createTime', type:'date', dateFormat: 'timestamp', convert:function(v,j){ return (v != null?new Date(v):null);}},
               { name: 'discountPercent'},
               { name: 'discountAmount'},
               { name: 'discountOverSalePriceFlag', type: 'boolean'},
               { name: 'minSalePriceTotal'},
               { name: 'maxCount'},
               { name: 'execOrder'},
               { name: 'clearanceIncludedFlag', type: 'boolean'},
               { name: 'relatedProductMinCount'},
               { name: 'promocodeRuleTypeName', mapping: 'promocodeRuleType.friendlyType'},
               { name: 'groupName'},
               { name: 'productType.id', mapping: 'productType', convert:function(v,j) { console.log(v,j); return (v != null?v.id:"");}},
               { name: 'productType.name', mapping: 'productType', convert:function(v,j) { console.log(v,j); return (v != null?v.name:"");}},
               { name: 'relatedProductType.id', mapping: 'relatedProductType', convert:function(v,j) { console.log(v,j); return (v != null?v.id:"");}},
               { name: 'relatedProductType.name', mapping: 'relatedProductType', convert:function(v,j){ console.log(v,j); return (v != null?v.name:"");}}
            ], 
            idProperty: 'id'
        }); 
```

不同的是

正确的那一个：

```
{ name: 'productType.id', mapping: 'productType', convert:function(v,j) { console.log(v,j); return (v != null?v.id:"");}}, 
```

错误一：

```
{ name: 'productTypeId', mapping: 'productType.id', defaultValue: ''} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:24:53.667

检查以下事项：

1.  检查模型的命名空间。它只是`ruleDataModel`还是类似的东西`foo.bar.ruleDataModel`？

2.  **你的json可能**有问题。有一种简单的方法可以测试 json 是否正确。将该 json 保存在 .json 文件中，然后在浏览器中打开该文件。如果浏览器能够正确打开该 json 文件，那么您的 json 是正确的，否则不是。

# php - COOKIES 标头已发送

> ID：15740772
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:21:47.617
> 
> 标签：php

我对 COOKIE 有疑问。

错误：

> 无法修改标头信息 - 标头已由 /data/web/virtuals/9784/virtual/ 中的（输出开始于 /data/web/virtuals/9784/virtual/www/subdom/roids/_libs/_lib.php:1）发送第 43 行 www/subdom/roids/_libs/_lib.php

指数：

```
<?php
session_start();
error_reporting(E_ALL);
require_once('_libs/_console.php');
require_once('_libs/class.phpmailer.php');
require_once('_libs/_lib.php');
//require_once('_libs/PasswordLib.phar');

$db = new database();
$func = new functions($db);
$cms = new CMS_system($func, $db);

$func->setLang(); 
```

文件 _lib.php 以开头，`<?php`并且开头没有空格。该文件包含类和函数。

函数设置语言：

```
 public function setLang() {

    setcookie("lang", "sk", time()+60*60*24*30);
    if (isset($_POST['lang'])) {
        setcookie("lang", $_POST['lang'], time()+60*60*24*30);
    }

} 
```

我尝试从脚本中删除 session_start 但这不起作用。感谢您的任何意见或解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:24:14.803

删除 _lib.php 文件中的 Echo（如果有）..然后尝试..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:24:19.930

您可以尝试从所有 3 个包含的文件中删除关闭 PHP 标记（即？>）然后检查吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:24:51.417

将数据发送到客户端后，您将无法修改 cookie。在打印内容之前执行 setlang 调用。

# .net - 通过 JsonTextWriter 正确解析 JSON

> ID：15740774
> 
> 赞同：0
> 
> 时间：2013-04-01T09:21:56.820
> 
> 标签：.net, asp.net-mvc, json, kendo-ui

我在将`JSON`数据与`Kendo UI`网格绑定时遇到了困难，但是在寻找解决这个问题的方法时，我遇到了另一个问题。正如@Petur Subev[在这里提到的，如何正确解析 JSON 以匹配其正确格式。](https://stackoverflow.com/questions/15675115/kendo-ui-grid-not-showing-json-data/15701888)

我当前的 JSON 格式如下：

```
//{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null}
//{"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0} 
```

但正如指出的那样，它应该是这样的：

```
[{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null},
{"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0},
{"No":null,"Desc":"asfasfasfskfjklajsfkjasklfjklasjfklajsfkljaklsfjklasjfkljasfkljlasf","Date":"2013-03-27T00:00:00","Height":0,"Final":0}] 
```

很难理解为什么会这样，因为我正在使用预构建函数来创建 JSON，但我仍然弄错了，请帮助。

在`Model Code`我有：

```
public object GetResult(string id)
{
    var sqlCom = new SqlCommand("SELECT [No],[Desc],[Date],[Height],[Final] FROM [cr_form] WHERE [uId]=@id;", sqlConn);
    sqlCom.Parameters.AddWithValue("@id", id);

    StringBuilder sb = new StringBuilder();
    StringWriter sw = new StringWriter(sb);
    JsonWriter jsonWriter = new JsonTextWriter(sw);
    var rcrds = GETSQLRESULTS(sqlCom);

    try
    {
        int i = 0;
        if (rcrds != null || rcrds.HasRows)
        {
            //jsonWriter.WriteStartObject();
            while (rcrds.Read())
            {
                jsonWriter.WriteStartObject(); //Changed
                for (int j = 0; j < rcrds.FieldCount; j++)
                {
                    jsonWriter.WritePropertyName(rcrds.GetName(j)); // column name
                    jsonWriter.WriteValue(rcrds.GetValue(j)); // value in column
                }
                i++;
                jsonWriter.WriteEndObject(); //Changed
            }
            //jsonWriter.WriteEndObject();

        }

    }

    catch (Exception ex) { }
    return jsonWriter;
} 
```

在`Controller`

```
public ActionResult GetRecords()
{
    var usrObj = new User();
    var jsnRslt = usrObj.GetResult(Session["Id"].ToString());

//After Changes in the Model I am getting it in the required Array format:
//{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null}
//{"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0}
//{"No":null,"Des...

    return Json(jsnRslt, JsonRequestBehavior.AllowGet);            
} 
```

* * *

添加后`WriteStartArray();`

```
{[{"No":null,"Desc":"asfasfasfasfasfasfasfasfasfasfasfasf","Date":"2013-03-27T00:00:00","Height":0,"Final":null},
{"No":null,"Desc":"etwetwetwetwet","Date":"2013-03-27T00:00:00","Height":0,"Final":0},
{"No":null,"Desc":"asfasfasfskfjklajsfkjasklfjklasjfklajsfkljaklsfjklasjfkljasfkljlasf","Date":"2013-03-27T00:00:00","Height":0,"Final":0},
{"No":null,"Desc":"hdfhdfhdfh","Date":"2013-04-04T00:00:00","Height":1,"Final":0}]} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:32:04.263

为什么要在 GetResult 方法中构建 JSON？为什么要编写这样的管道代码而不是将其留给框架？

你应该关注的是你的业务逻辑。

只需定义一个模型来表示您要返回的数据（您可能需要根据数据库中的列类型调整模型属性的类型）：

```
public class MyModel
{
    public int? No { get; set; }
    public string Desc { get; set; }
    public DateTime Date { get; set; }
    public int? Height { get; set; }
    public int? Final { get; set; }
} 
```

然后让您的方法返回此模型（更准确地说，实际上是此模型的集合）：

```
public IEnumerable<MyModel> GetResult(string id)
{
    string connectionString = "...";
    using (var conn = new SqlConnection(connectionString))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "SELECT [No],[Desc],[Date],[Height],[Final] FROM [cr_form] WHERE [uId]=@id;";
        cmd.Parameters.AddWithValue("@id", id);
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return new MyModel
                {
                    No = GetValue(reader, "No"),
                    Desc = reader.GetString(reader.GetOrdinal("Desc")),
                    Date = reader.GetDateTime(reader.GetOrdinal("Date")),
                    Height = GetValue(reader, "Height"),
                    Final = GetValue(reader, "Final"),
                };
            }
        }
    }
}

private static int? GetValue(DbDataReader reader, string columnName)
{
    var columnIndex = reader.GetOrdinal(columnName);
    if (!reader.IsDBNull(columnIndex))
    {
        return reader.GetInt32(columnIndex);
    }
    return null;
} 
```

请注意我是如何删除 tr/catch 逻辑的，因为您在 catch 语句中没有做任何有用的事情，并且默默地使用这样的异常是一个坏主意。

最后在您的控制器操作中简单地：

```
public ActionResult GetRecords()
{
    var usrObj = new User();
    var jsnRslt = usrObj.GetResult(Session["Id"].ToString());
    return Json(jsnRslt, JsonRequestBehavior.AllowGet);
} 
```

正如您在此示例中看到的，您不必担心管道和 JSON。您应该使用强类型模型并让框架为您执行序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:26:05.327

看起来你只是想[`WriteStartArray`](http://james.newtonking.com/projects/json/help/index.html?topic=html/M_Newtonsoft_Json_JsonTextWriter_WriteStartArray.htm)在一开始就打电话......

示例代码：

```
using System;
using Newtonsoft.Json;

class Test
{
    static void Main()
    {
        using (var writer = new JsonTextWriter(Console.Out))
        {
            writer.WriteStartArray();
            for (int i = 0; i < 5; i++)
            {
                writer.WriteStartObject();
                writer.WritePropertyName("Foo");
                writer.WriteValue(i);
                writer.WriteEnd();
            }
            writer.WriteEnd();
        }
    }
} 
```

输出：

```
[{"Foo":0},{"Foo":1},{"Foo":2},{"Foo":3},{"Foo":4}] 
```

# jquery - 如何在wordpress中只加载一个Js index.php

> ID：15740786
> 
> 赞同：0
> 
> 时间：2013-04-01T09:22:46.460
> 
> 标签：jquery, wordpress

我想在 wordpress 中加载两个仅 js 文件的主页（index.php）文件。但我不能

```
<?php if (is_page('home') ) { ?>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="<?php bloginfo('template_directory'); ?>/js/jcarousellite_1.0.1.js" type="text/javascript"></script>
<?php } ?> 
```

我试过这个但不工作。但没有主页，如果我输入其他页面名称则可以正常工作.. 实际上是我的主页 (index.php)。所以无论如何只能加载一个 index.php 或主页。我想我需要触发 index.php 页面而不是主页。因为我的主页不是由 wordpress 页面制作的。我索引。下面是我的 index.php 文件代码。

```
<?php get_header(); ?>
<style type="text/css">
.sliderarea .sliderbg .sliderwrap .anyClass ul li {
    background-color: #03F;
    border: 2px solid #930;
    height: 100px;
    width: 100px;
    margin-left: 10px;
}
</style>

<div class="slidshow">
  <div class="sshow"><?php echo do_shortcode("[widgetkit id=741]"); ?> </div>
  <div class="overshadow"></div>
  <div class="righpanbox">
    <ul>
      <li><a href="<?php echo get_permalink(get_ID_by_slug('why-web')); ?>"><?php echo $images=get_the_post_thumbnail(get_ID_by_slug('why-gentaweb'));?> </a></li>
      <li><img src="<?php bloginfo('template_directory'); ?>/images/star_sepa.png"  /></a></li>
      <li><a href="<?php echo get_permalink(get_ID_by_slug('why-web-domain-sale')); ?>"><?php echo $images=get_the_post_thumbnail(get_ID_by_slug('why-web-domain-sale'));?> </a></li>
      <li><img src="<?php bloginfo('template_directory'); ?>/images/star_sepa.png"  /></li>

    </ul>
  </div>
</div>
<div class="cls"></div>

<div class="sliderarea">

  <div class="sliderbg">
<div class="sliderwrap">  

<button class="prev"><<</button>
<button class="next">>></button>

<div class="anyClass">
    <ul>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
         <li><img src="someimage" alt="" width="100" height="100" ></li>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
        <li><img src="someimage" alt="" width="100" height="100" ></li>
    </ul>

</div>
<script>
$(function() {
    $(".anyClass").jCarouselLite({
        btnNext: ".next",
        btnPrev: ".prev"
    });
});

</script> 

</div>
  </div>
</div>
<?php get_footer(); ?> 
```

# javascript - 动态创建引导按钮

> ID：15740787
> 
> 赞同：3
> 
> 时间：2013-04-01T09:22:52.767
> 
> 标签：javascript, twitter-bootstrap

是否可以动态创建引导按钮？我有一个文本文件，其中包含一个项目列表，我将在其中使用 javascript 创建一个数组。这就是我想动态创建引导按钮的地方，这些项目是每个按钮中的文本。如果文本文件中有 10 个项目，则会创建 10 个按钮。有人可以告诉我怎么做，或者给我一些关于它的教程。

编辑（现在可以创建，但不能检查是否创建按钮的代码）：

创建按钮（）：

```
$(function() {
  $.ajax({
    url : 'http://localhost:8080/SSAD/type.txt',
    dataType : "text",
    success : function (filecontent) {
      var lines=filecontent.split('\n');
      $.each(lines, function() {
        if (this!='') {
            var word = this;
            word = word.toLowerCase().replace(/(?:_| |\b)(\w)/g, function(str, p1) { return p1.toUpperCase();});
            if ($('button:contains("'+word+'")').length==0) {
                var button='<button type="button" class="btn btn-block btn-inverse active" data-toggle="button tooltip" title="Click this to enable/disable viewing of'+this+'" onclick="toggleVisibility('+"'"+this+"'"+')">'+word+'</button>';
                $(".crisisButtons").append(button);
            }
        }
      });
    }
  });
}); 
```

HTML：

```
<button type="button" class="btn btn-block btn-inverse" onclick="createButtons">Click me!</button>

<div class="crisisButtons"></div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T10:29:53.133

是的。这很容易。

文本文件.txt

```
button1
button2
button3
button4
button5
button6
button7
button8
button9
button10 
```

代码

```
<div id="textfile-buttons"></div>

<script type="text/javascript">
$(document).ready(function() {
  $.ajax({
    url : 'textfile.txt',
    dataType : "text",
    success : function (filecontent) {
      var lines=filecontent.split('\n');
      $.each(lines, function() {
        if (this!='') {
          var button='<button class="btn btn-primary">'+this+'</button>&nbsp;';
          $("#textfile-buttons").append(button);
        }
      });
    }
  });
});
</script> 
```

结果 ![在此处输入图像描述](https://i.stack.imgur.com/L4y3j.png)

当然，您需要为`click`按钮分配一个 -handler，或者如果您使用`<a>`-tags 而不是`<button>`.

* * *

**更新**

如果要检查`button`带有特定文本的 a 是否已经存在，请修改`$.each`循环

```
$.each(lines, function() {
  if (this!='') {
    //check if a button with "this" text not already exists
    if ($('button:contains("'+this+'")').length==0) {
      var button='<button class="btn btn-primary">'+this+'</button>&nbsp;';
      $("#textfile-buttons").append(button);
    }
  }
}); 
```

所以，即使 textfile.txt 包含 button1 button2 button3 button3 button3 button3 button7 button8 button9 button10

只会创建一个 button3。

# java - 在 jsf 中显示图像

> ID：15740792
> 
> 赞同：1
> 
> 时间：2013-04-01T09:23:01.860
> 
> 标签：java, jsf-2, glassfish, javabeans

我在 jsf 中显示图像时遇到了一个奇怪的问题。我在服务器上的文件夹中有一个图像： **/glassfishv3/glassfish/domains/domain1/applications/images**。

我拥有对文件夹的完全访问权限，可以通过 bean 上传和删除图像，一切正常，但是当我尝试显示图像时，什么也没有显示！我尝试了以下方法：

```
<h:graphicImage value="/images/image.jpg"/> 
<h:graphicImage value="/glassfishv3/glassfish/domains/domain1/applications/images/image.jpg"/>
<img src="/glassfishv3/glassfish/domains/domain1/applications/images/image.jpg"> 
```

但似乎没有任何效果。不知道我在这里做错了什么，所以欢迎任何帮助。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:58:45.003

该`src`属性是`URL`可以在 Internet 上访问的图像的属性。它不是您机器上文件的路径。看看这篇关于如何设置虚拟目录的简短[文章。](http://www.marceble.com/2009/07/virtual-directories-in-glassfish/)在那之后你需要做的就是直截了当:)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-01T09:41:40.750

看起来图像是单独托管的，

```
<h:graphicImage url="<urlpath>/images/image.jpg" width="200" height="171" /> 
```

例如

```
<h:graphicImage url="http://localhost:8080/images/image.jpg" width="200" height="171" /> 
```

# javascript - 单元格悬停时的工具提示图像，Google 电子表格

> ID：15740798
> 
> 赞同：3
> 
> 时间：2013-04-01T09:23:31.407
> 
> 标签：javascript, google-apps-script

我目前正在研究一个必须包含一堆图像参考的 Google 电子表格。

我想要实现的是：当您将鼠标悬停在单元格上时，会出现一个图像（如工具提示）。

我在 Google Developers 上找到[了这个小部件](https://developers.google.com/apps-script/reference/ui/image)，但是当我将代码添加到我的电子表格时没有任何反应。

你们中有人知道如何做这样的事情吗？非常感谢任何有关如何解决此问题的提示！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-17T15:21:48.577

从电子表格显示用户界面

作为将用户界面部署为独立 Web 应用程序的替代方法，您可以从电子表格创建容器绑定脚本，并从电子表格显示用户界面。为此，请找到您的 doGet 函数并简单地将调用替换为

```
 return app; 
```

具有以下内容：

```
 var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
 spreadsheet.show(app); 
```

其中 app 是您要返回的 UiInstance 对象的变量名称。此外，当您从电子表格显示用户界面时，该函数不必命名为 doGet。您可以改为将其称为 displayMyUi，然后直接调用该函数以在电子表格中显示用户界面。当从电子表格显示用户界面时，脚本会以访问电子表格的用户身份运行。

例如

```
 function doGet() {
 var app = UiApp.createApplication();
 // The very first Google Doodle!
 app.add(app.createImage("http://www.google.com/logos/googleburn.jpg"));

 var spreadsheet = SpreadsheetApp.getActiveSpreadsheet();
 spreadsheet.show(app);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T12:38:36.973

您想要做的事情在 Google 电子表格中是不可能的，小部件仅在 UiApp 或 HTML 服务中可用。

应该做的是在 Ui 中重新创建电子表格显示，并从那里使用某种带有 mouseOver 处理程序的弹出窗口来根据需要显示图像。

根据您的用例 - 主要取决于您在查看数据时希望拥有的电子表格特定功能 - 这可能是一个好的或坏的解决方案，但只有您可以回答最后一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-23T06:34:34.377

所以可能不是最干净的解决方案，但是您可以添加指向单元格的链接，并且当您从谷歌驱动器添加指向图像的链接时（可能您应该通过链接使图像对所有人可用）然后在鼠标悬停时您会得到一个工具提示像框，带预览

# asp.net-mvc - 如何在登录表单上显示错误的用户名密码？

> ID：15740799
> 
> 赞同：0
> 
> 时间：2013-04-01T09:23:33.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, authentication

我正在开发 MVC 应用程序。我设计了登录表单。

当用户输入正确的用户名和密码时，它会重定向到下一页，但是当用户输入错误的用户名或密码时，我想在登录表单上显示消息，该怎么做。

这是控制器中的方法代码...

```
 [HttpPost]
        public ActionResult LoginUser(FormCollection oFormCollection)
        {
            string userName = oFormCollection["username"];
            string password = oFormCollection["password"];
            bool IsAccountPerson = false;
            var validEmployee = (from e in db.Employees
                                 where e.UserName == userName && e.Password == password
                                 select e).ToList();
            if (validEmployee.Count() == 1)
            {
                foreach (var v in validEmployee)
                {
                    oEmployee = v;
                    Session["LoggedEmployee"] = oEmployee;
                    Session["loggedEmpId"] = oEmployee.Id;

                    if (oEmployee.DesignationType == "Account")
                    {
                        IsAccountPerson = true;
                    }
                    else
                    {
                        IsAccountPerson = false;
                    }
                }
               if(IsAccountPerson)
                   return RedirectToAction("PaymentAdviceListForAccounts", "Account");
               else
                  return RedirectToAction("Index", "PaymentAdvice");

            }
            else
                return PartialView("Index");
        } 
```

这是我的观点代码....

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />   
    <link href="@Url.Content("~/Content/bootstrap.css")" rel="stylesheet" type="text/css" />

    <title></title>
</head>

@using (Html.BeginForm("LoginUser","Login",FormMethod.Post))

{
    @*<div style="margin:15% 20% 20% 30%; width:35%;min-height:25%;border:1px #ACACAC solid;">*@

    <div class="container-fluid" style="padding-left:0px; margin-top:165px; margin-left:140px;">            

                <div class ="span3">
                    <label style="font-size:15px; color:#666666;  margin-top:5px;">Username</label>
                </div>

                <div class ="span6">
                    <input type="text" id="username" name="username" style="height:20px; width:100%;" />
                </div>

                <div class ="span3">
                    <label style="font-size:15px;color:#666666; margin-top:5px; ">Password</label>
                </div>

                <div class ="span6">
                    <input type="password" id="password" name="password" style="height:20px;  width:100%;"/>
                </div>

            <div class="span6" style="padding-left:15px;">
                  <input type="submit" name="submit" value="Login" class="btn btn-primary" style="margin-right:10px; height:30px; font-size:14px; width:55px;" />
             <input type="button" name="Login" value="Cancel" class="btn btn-primary" style="margin-right:20px; height:30px; font-size:14px; width:55px; padding-left:5px; padding-right:5px;" />
             </div>

        </div>
       </div>
     </div>

  </div>

}

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:30:49.573

创建新模型或使用 TempData。

这是使用 TempData 的示例。

[http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html](http://www.devcurry.com/2012/05/what-is-aspnet-mvc-tempdata.html)

# java - 扩展java swing按钮？

> ID：15740802
> 
> 赞同：1
> 
> 时间：2013-04-01T09:23:54.473
> 
> 标签：java, swing, jbutton

我希望每个 JButton 也有一个与之关联的数字或 ID。这就是为什么我决定扩展 JButton 类来创建一个 SuperJButton 类。

如何在单击此按钮时生成的操作事件中包含 id/数字的值，以便响应此操作的类可以访问 id ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:31:19.380

另一种不需要子分类的替代方法是用于`JComponent.putClientProperty(Object key, Object value)`存储与您的按钮关联的 ID。

可以使用`getClientProperty(Object key)`.

```
public void actionPerformed(ActionEvent e) 
{
   JComponent comp = (JComponent)e.getSource();
   KeyObject kObj = (KeyObject)comp.getClientProperty("button.id");
} 
```

这可能会更灵活一些，因为您可以将此 ID 附加到每个按钮，而无需使用特定于应用程序的代码，例如，当使用 GUI 构建器时，更改按钮的创建代码有点复杂，或者当您需要使用已经存在的组件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T09:29:21.497

您不必更改 Action 事件。您可以这样做，

```
SuperJButton jButton = (SuperJButton) actionEvent.getSource();
jButton.getId() 
jButton.getNumber() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:32:48.433

从`MVC`观点来看：`JButton`是一个`view`，而`JButton`类不是更好的地方`id`。id 更好的地方是在你自己的`ButtonModel`实现中。

# ios - NSMutableAttributedString 是否会自动连接相同的相邻属性？

> ID：15740804
> 
> 赞同：3
> 
> 时间：2013-04-01T09:23:58.110
> 
> 标签：ios, core-text, nsattributedstring

我们的 iOS 应用程序中有一个简单的标记解析器，它接收带有类似 HTML 标记的文本，并`NSAttributedString`通过迭代简单的每个字符`NSString`并生成一个`NSMutableAttributedString`.

在最坏的情况下，我们在迭代字符串时为每个字符添加一组新属性，是否`NSMutableAttributedString`足够智能将相同的相邻属性范围连接在一起并进行优化？或者在 Core Text 中渲染会非常低效和缓慢吗？

我并不是说这是一个很好的算法！我只是在看最坏的情况，想知道是否`NSMutableAttributedString`有任何内置的智能行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T12:23:05.643

我刚刚尝试过这样的事情（我的真实代码的简化版本）：

```
NSMutableAttributedString *text = [[NSMutableAttributedString alloc] initWithString:@"Testfoobarhey"];
UIFont *font = [UIFont fontWithName:@"Georgia-Bold" size:12.0];
[text addAttribute:NSFontAttributeName value:font range:NSMakeRange(4, 3)];
[text addAttribute:NSFontAttributeName value:font range:NSMakeRange(7, 3)]; 
```

换句话说，我添加了两个相邻的粗体属性。然后我查看了结果：

```
NSLog(@"%@", text); 
```

输出显示了三个文本块：普通字体的“Test”、粗体的“foobar”和普通字体的“hey”。

所以回答你的问题，是的，看起来两个相邻的格式范围是在 NSMutableAttributedString 中自动加入的。

PS 在相关说明中，我注意到，如果我应用一个范围跨越换行符的属性，则生成的 NSAttributedString 将在换行符之前和之后有一个属性，并且换行符本身不会有任何属性。因此，如果您一次解析一个字符，您可能需要对此进行补偿。

# doctrine-orm - Doctrine - QueryBuilder，选择带有 where 参数的查询：实体或 ID？

> ID：15740806
> 
> 赞同：2
> 
> 时间：2013-04-01T09:24:04.910
> 
> 标签：doctrine-orm

我有一个 Product 实体和一个 Shop 实体。

一个商店可以有 0 到 n 个产品，一个产品只能在一个商店中。

因此，产品实体表通过 shop_id 表字段引用 Shop 实体。

当使用学说查询生成器查询给定商店的产品时，我们可以这样做：

```
 $products = $this->getDoctrine()->getRepository('MyBundle:Product')
                ->createQueryBuilder('p')
                ->where('p.shop = :shop')
                ->setParameter('shop', $shop)  // here we pass a shop object
                ->getQuery()->getResult(); 
```

或这个：

```
 $products = $this->getDoctrine()->getRepository('MyBundle:Product')
                ->createQueryBuilder('p')
                ->where('p.shop = :shopId')
                ->setParameter('shopId', $shopId)  // we pass directly the shop id
                ->getQuery()->getResult(); 
```

两者似乎都有效......因此我想知道：在这种情况下，我们是否总是可以直接传递实体 ID 而不是实体实例（即：在指向另一个实体的学说实体字段上）？

我最初认为只有第一个例子可以工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-02T09:39:33.990

**According to the Doctrine documentation, you can pass the object to `setParameter()` if the object is managed.**

* * *

extract from the documentation:

> Calling setParameter() automatically infers which type you are setting as value. This works for integers, arrays of strings/integers, DateTime instances **and for managed entities**.

for more information, please see:

[http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html#binding-parameters-to-your-query](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html#binding-parameters-to-your-query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T19:04:00.180

我可能是错的，但我认为如果你传递对象实例而不是 id 号，Doctrine 会`$instance->getId()`在翻译成 SQL（甚至 DQL）时自动调用使你的两个查询相同。

# .net - 当 CLR 初始化数据结构来存储它们时，ValueType 存储在哪里

> ID：15740808
> 
> 赞同：2
> 
> 时间：2013-04-01T09:24:09.643
> 
> 标签：.net, clr

我知道存储在堆栈中的值类型实例和存储在堆中的引用类型实例。但是，CLR确保所有定义Type的程序集都加载完毕后，它会创建一些数据结构来存储类型对象，引用类型对象将存储在堆中，值类型对象存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:31:26.703

不同类型的`Type`对象都是引用类型，即`Type`是一个类，所以都存放在堆上。

* * *

请注意，只有当值类型是方法中的局部变量时，它们才会存储在堆栈中。如果它们是类的成员，它们将作为该类实例的一部分存储在堆上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:28:20.883

作为引用类型对象成员的值类型对象将存储在堆中。

[该主题](https://stackoverflow.com/questions/11876503/memory-allocation-for-value-type-inside-reference-type-in-net)将帮助您了解更多。

# android - 跨平台的webview。建筑师观点？

> ID：15740813
> 
> 赞同：2
> 
> 时间：2013-04-01T09:24:23.837
> 
> 标签：android, c++, ios, macos, qt

我有ac，linux背景，对Web应用程序了解较少。我遇到了一些奇怪的要求，并且很难提供解决方案。

简短的要求：

一码/多平台[移动和桌面]

**我知道的：**

**1) 用户界面前端。**

所有移动、桌面应用程序都提供 Webview。[我知道的 Atlease：iOS、Mac、来自 QT 的 Windows/Linux/Mac ]。

结论：我可以有html5代码，可以跨桌面/移动平台使用。问题：如何从 HTML/JavaScript 进行本机访问。我们可以使用仅支持移动设备但不支持桌面设备的 phonegap [如果我错了请纠正我]。如果我们使用 QT，那么对 android/iOS 的支持就不多[如果我错了，请纠正我]。

2）用c++编写中间层：iOS/Windows/Mac/Android支持C++。

**问题：**

1.  在 iOS/Android 中，我知道如何使用 Xcode 带来 webview。但是我怎样才能在 Windows 和 Mac 中获得 webview。

2.  总之，我们有没有支持 Mac/Windows/iOS/Android 的开源框架

3.  是否可以编写我们自己的 Native 函数调用机制，从 JavaScript 到 C++ 代码，这很常见。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:42:05.250

**回答 ：**

*   您可以通过打开浏览器或作为浏览器的插件来启动应用程序，否则对于移动 webkit，您需要将其移植到您希望运行您的应用程序的平台上，例如 Mac、Windows 等
*   您可以轻松地在多平台中部分移植代码，但是您可以找到许多开源 SDK，如**phonegap、snehaTouch 等**，以适用于所有智能手机，**但不适用于移动和台式机/笔记本电脑环境**，**多平台**台式机/笔记本电脑可以使用 Java 应用程序。
*   是的，您可以通过使用 javasript 从 webkit 调用来调用相应平台中的本机函数。，

所以单个代码可以在移动操作系统中运行，或者对应部分编写 Java？c++ 代码将在所有台式机/笔记本电脑操作系统中运行

# javascript - jQuery mobile listview 更改选择项并突出显示它

> ID：15740815
> 
> 赞同：2
> 
> 时间：2013-04-01T09:24:26.407
> 
> 标签：javascript, jquery, css, html, jquery-mobile

在一个页面中，有一个listview，第一项被选中：

```
var len = results.rows.length,
$list = $("#listAddr");
var $strHTML  =" ";
for (var i = 0; i < len; i++) {
    $strHTML += '<li ';
    if (i == 0) {
        $strHTML += ' data-theme="b" ';
    }

    $strHTML += '> <a href="#" data-ajax="false"';
    $strHTML += ' data-id="' + results.rows.item(i).Id + '">' + results.rows.item(i).Name + '</a></li>';
}

$list.html($strHTML);
$list.delegate('li a', 'click',function(e){
//  $("#listAddr").attr("li").removeClass("liSel");
    $(this).addClass("data-theme='b'");
    $("#listAddr").listview("refresh");
    //$(this).removeClass("data-theme");
    clickAddr($(this).data('id'));
}); 
```

当我选择第三个项目时，我希望第三个项目为“data-theme='b'”样式，第一个项目删除主题。如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:41:55.233

您可以执行以下操作

```
$('#listAddr li').bind('click', function () {
    $('#listAddr li').attr("data-theme", "c").removeClass("ui-btn-up-b").removeClass('ui-btn-hover-b').addClass("ui-btn-up-c").addClass('ui-btn-hover-c');
    $(this).attr("data-theme", "b").removeClass("ui-btn-up-c").removeClass('ui-btn-hover-c').addClass("ui-btn-up-b").addClass('ui-btn-hover-b');
}); 
```

这是一个关于`**[Live fiddle](http://jsfiddle.net/mayooresan/hJYSL)**`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:29:30.933

使用 data() 更改数据属性...

```
$.removeData($list.find('li'), "theme");
$(this).data("theme",'b'); 
```

试试这个

```
 $list.on('click','li a',function(e){
                $.removeData($list.find('li'), "theme");
                $(this).data("theme",'b');
                $("#listAddr").listview("refresh");

                clickAddr($(this).data('id'));
            }); 
```

# c# - 在 IIS 中托管站点时出现 Sharepoint 2013 错误

> ID：15740816
> 
> 赞同：1
> 
> 时间：2013-04-01T09:24:36.477
> 
> 标签：c#, sharepoint, workflow

我有一个自定义 Web 服务，用于在 Sharepoint 2013 中执行工作流。这是代码的一部分，当我在 VS 中运行 Web 服务时效果很好。

```
WorkflowSubscription workflowSubscription = 
  workflowManager.GetWorkflowSubscriptionService().GetSubscription(new 
    Guid(Properties.Settings.Default.SPWorkflowId));

Dictionary<string, object> payload = new Dictionary<string, object>();
payload.Add("approvers", assignedTopo);
payload.Add("approversbn", assignedTo);
payload.Add("approversgd", assignedTogd);

worfklowService.StartWorkflowOnListItem(workflowSubscription, 
  Convert.ToInt32(currentFileInSP.ListItemAllFields["ID"]), payload);

context.ExecuteQuery();
enter code here 
```

将 Web 服务发布到 IIS 后，工作流开始显示错误消息。在英语中类似这样的“操作被禁止，因为它超过了列表视图的阈值，由管理员设置”。The exact message in Russian is "Операция, попытка выполнить которую осуществляется, запрещена, поскольку она превышает пороговое значение представления списка, принудительно установленное администратором." IIS 如何像这样影响 SharePoint？问题可能与编码有关吗？这是错误消息的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/b8Lq8.png)

顺便说一句，在同一个 Web 服务中，我将文件上传到 SharePoint。这部分代码即使在 IIS 中也能正常工作。

# xcode - CCLayer 到 UIImage - 抗锯齿？

> ID：15740819
> 
> 赞同：1
> 
> 时间：2013-04-01T09:24:42.510
> 
> 标签：xcode, cocos2d-iphone

当我在 CCRenderTexture 的帮助下将 CCLayer 的快照作为 UIImage 抓取时，似乎我正在失去抗锯齿功能，导致输出图像看起来与屏幕实际外观略有不同。

有没有办法获得与屏幕上显示的内容更准确对应的输出图像？

这就是我获取 UIImage 的方式：

```
-(UIImage*)layerRepresentation {
    CCLayer *layer1 = self;
    CCRenderTexture *renderer01 = [CCRenderTexture renderTextureWithWidth:layer1.contentSize.width height:layer1.contentSize.height];

    [renderer01 begin];
    [self visit];
    [renderer01 end];

    UIImage *image = [renderer01 getUIImage];
    return image;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:14:15.617

创建 CCRenderTexture 时，它`setAliasTexParameters`​​会向其纹理发送消息。尝试

```
[renderer01.sprite.texture setAntiAliasTexParameters]; 
```

# c++ - string.find() 不返回 -1

> ID：15740829
> 
> 赞同：0
> 
> 时间：2013-04-01T09:25:16.810
> 
> 标签：c++

下面的代码很简单。据我所知，如果 string::find() 未找到匹配项，则返回-1。但由于某些原因，下面的代码不起作用。每次我运行这段代码时，我都会得到无限循环。谢谢你的帮助！

```
#include <string>
#include <iostream>
using namespace std;

int main()
{
    string text;
    text = "asdasd ijk asdasd";
    string toReplace = "ijk";
    cout<<text<<endl;
    int counter = 0;
    while ( text.find(toReplace) != -1)
        counter++;

    cout<<counter<<endl;

    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T09:33:16.017

除了完全正确的其他答案之外，我只想补充一点，您的 while 循环无论如何都会产生一个无限循环。例如：

```
while(text.find(toReplace) != std::string::npos)
    counter++; 
```

将是一个无限循环，因为它会不断尝试在其中找到`toReplace`字符串`text`并且它总是会找到它（那是因为 find 每次都从字符串的开头开始）。这可能不是您想要的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-01T09:26:21.597

`std::string::find``std::string::npos`如果未找到搜索的子字符串，则返回not `-1`。的确切值`npos`是实现定义的，所以使用`npos`，如

```
while ( text.find(toReplace) != std::string::npos) 
```

想一想，`find`即使它想返回也无法返回 -1，因为 find 的返回类型被指定为`std::size_t`无*符号*类型。

此外，无论您调用多少次，find**总是**会搜索第**一次出现的子字符串。**如果你想遍历所有出现的地方，你应该使用`find`带第二个参数的重载 - 开始搜索的位置。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-01T09:26:35.957

不管是谁告诉你的，或者你在哪里读到的，都是骗你的。

如果`std::string::find`失败，则返回`std::string::npos`，而不是`-1`。

当您不确定时，您应该查看有关此类内容的文档。

所以，你`while`会是这样的：

```
while ( std::string::npos != text.find(toReplace) ) 
```

* * *

关于您的评论：

> 更新：我尝试使用 while ( text.find(toReplace) != string::npos ) 但我仍然得到无限循环:( – user2167403 10 秒前

你真的应该学会阅读[文档](http://www.cplusplus.com/reference/string/string/find/)。使用变量来存储`std::string::find`（不同于`std::string::npos`）的最后一个结果，并使用`std::string::find`的第二个参数 - `pos`（通过传递值 - `last_match_position + 1`）。

省略第二个参数，`std::string::find`总是从字符串的开头开始，这会导致无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:29:46.097

在您提供的代码片段中，`text`变量包含存储在变量中的子字符串“ijk” `toReplace`。只要在 while 循环中没有改变`text`或`toReplace`变量没有改变，find 方法将始终返回非 -1 值，这是 while 循环继续进行的条件。

正如其他评论中已经提到的那样，您不应该检查 -1 而是检查`std::string::npos`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T09:30:36.950

阅读手册页确实有帮助（答案是 string::npos）。

见[http://www.cplusplus.com/reference/string/string/find/](http://www.cplusplus.com/reference/string/string/find/)

# django - 错误类'django.contrib.auth.models.DoesNotExist

> ID：15740830
> 
> 赞同：1
> 
> 时间：2013-04-01T09:25:27.927
> 
> 标签：django, django-models

我收到以下错误消息，这不是很有帮助，并且仅此行没有其他错误...

```
**(<class 'django.contrib.auth.models.DoesNotExist'>)** 
```

这是代码（它是一个ajax调用）

```
@login_required
@csrf_exempt
def smartpage_create_ajax(request):
    if request.POST:

        try:
                json_dict = json.loads(request.POST['site'])

                page = Content()
                page.name = json_dict['name']
                page.user(request.user)
                page.json = request.POST['site']

                page.save()

                return HttpResponse('ok')

        except Exception as e:
            return HttpResponse('%s (%s)' % (e.message, type(e))) 
```

有人可以告诉我这意味着什么，因为它以前有效。

谢谢你。

更新：

```
class Content(models.Model):
    name = models.CharField(max_length=80, blank=True)
    logo = models.ImageField(upload_to="/logos", blank=True)
    json = models.TextField()

    objects = ContentManager()

    #FK
    user = models.ForeignKey(User, related_name="contentpages", blank=True) 
```

js

```
 $.ajax(
            {
                type: "POST",
                url: '../content/createpage',
                data: "site="+encodeURIComponent(JSON.stringify(site)),
                dataType: "json",
                success: function(ret)
                {
                    // console.dir(ret);
                    if(ret.result)
                    {
                        $('#build-btns').html(ret.html);
                    }
                    else
                    {

                        //report no builds left
                        $('#build-btns').after(ret.html);
                    }
                },
                error: function(xhr, textStatus, errorThrown)
                {
                    console.log(xhr, textStatus, errorThrown + 'error');
                    return false;
                },
                complete: function()
                {

                }
            });
        }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:54:14.073

该错误意味着用户模型上的 get() 与数据库中的任何对象都不匹配 请参阅：[https ://docs.djangoproject.com/en/dev/ref/exceptions/#django.core.exceptions.DoesNotExist](https://docs.djangoproject.com/en/dev/ref/exceptions/#django.core.exceptions.DoesNotExist)

我怀疑您当前登录的用户由于某种原因不再存在。也许尝试再次登录以检查它是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:26:49.407

是的，我不完全理解为什么或者这是否是 Django 1.5 的错误。当我将模型从...更改时，此错误消失了

```
user = models.ForeignKey(User) 
```

至

```
user = models.ForeignKey(User, null=True, blank=True) 
```

不，即使我插入用户并拥有第一个代码，它仍然会给出该错误。不知道为什么。

# android - Android 小部件升级应用程序.. 删除小部件

> ID：15740840
> 
> 赞同：1
> 
> 时间：2013-04-01T09:26:10.667
> 
> 标签：android, widget

脚步：

从市场下载我的应用程序 3.0。添加我的应用程序的小部件。现在签署我的应用程序 4.0。在设备上安装最新的 4.0 应用程序。

它删除了某些设备上的小部件。用户必须再次明确添加小部件。我想更新现有的小部件。

任何想法 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:29:16.583

你在说哪些设备？您不得更改 WidgetProviders 类名称和 BroadcastReceiver 以及您的包名称（显然）以允许更新小部件。如果您注意上述事项，我从未听说过更新软件包会使您失去小部件。

# c# - EF - 如何使用 linq 编辑以下模型？

> ID：15740841
> 
> 赞同：0
> 
> 时间：2013-04-01T09:26:20.940
> 
> 标签：c#, .net, linq, entity-framework

我正在从客户端发送一些视图模型数据并想更新模型。我知道如何通过调用存储过程来做到这一点，但非常想知道如何使用 linq 查询来做到这一点。任何帮助将不胜感激。谢谢

```
[HttpPost]
         public JsonResult EditEmployee(Models.Employee employee) 
         {
             try
             {
                 if (ModelState.IsValid)
                 {
                     using (emsCtx)
                     {
                         var employeeResults = (from q in emsCtx.Employees
                                                where q.Id == employee.Id
                                                //code to update the model.
                                                );                    
                               employeeData.Employees = employeeResults;         
                     }

                     return Json();
                 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:39:38.220

如果您想更新与员工对应的数据库中的数据，请检查您编辑的代码下方：

```
 [HttpPost]
     public JsonResult EditEmployee(Models.Employee employee) 
     {
         try
         {
             if (ModelState.IsValid)
             {
                 using (emsCtx)
                 {
                     var employeeResults = (from q in emsCtx.Employees
                                            where q.Id == employee.Id
                                             select q
                                            ).FirstOrDefault();        
                     if(employeeResults!=null)
                     {             
                           employeeResults.Column1 = employee.Column1; 
                           employeeResults.Column2 = employee.Column2; 
                           employeeResults.Column3 = employee.Column3; 
                           employeeResults.Column4 = employee.Column4; 
                     }
                     emsCtx.SaveChanges();
                 }

                 return Json();
             } 
```

# haskell - 黑线鳕编号列表继续

> ID：15740845
> 
> 赞同：32
> 
> 时间：2013-04-01T09:26:43.690
> 
> 标签：haskell, haddock

如何使用黑线鳕文档工具继续编号列表？黑线鳕中的以下行

```
--  1\. First line.
-- 
--  2\. Second line with instructions to do something 
-- 
--     >>> command-linecmd param
--
--  3\. Third line..
-- 
```

生成下一个html：

```
</p><ol><li> First line.
</li><li> Second line with instructions to do something 
</li></ol><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong         class="userinput"><code>command-linecmd param
</code></strong></pre><ol><li> Third line..
</li></ol> 
```

这打破了编号。有没有办法让黑线鳕继续在 HTML 中使用第三个数字，或者我应该尝试其他的东西（>>> 提供了一个很好的格式，为什么我想使用它）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-22T20:11:36.857

你不能。你正在使用`>>>`. 为了将此呈现为示例，它需要位于段落的开头。

什么被认为是段落的开头？

*   Haddock 注释开头的任何内容，跳过其前面的任何空白。

*   空行之后的任何内容。

在您的场景中，您有 4 个段落：列表元素、列表元素、示例、列表元素。在内部，Haddock 完全忽略了您输入的列表编号：如果您愿意，可以从 999 开始。当 Haddock 看到具有相同类型列表的连续段落时，它会将它们连接起来并编号。当您打破模式时，列表不会被视为延续。在这种情况下，用空格缩进`>>>`实际上是没有意义的，因为当我们进入一个新段落时，它们将被删除。请注意，如果您有连续的示例，则空格很重要：只要您的缩进相同，您就可以将它们放在同一段落中。

其他必须在自己的段落中（因此会破坏列表顺序）的内容是列表、鸟轨、代码块（段落仅包含`@`s 之间的文本）和属性 ( `prop>`)。

虽然这可以通过允许段落嵌套来解决，但这不是计划中的。Ticket #27 仅是关于嵌套列表（恰好是段落级实体），但不能解决这个问题。

如果数字不重要或有点作弊，我建议您使用无序列表并使用命名列表 ( `[name] content`)

![命名和无序列表解决方案](https://i.stack.imgur.com/6KBPB.png)

编辑：截至 2014 年 1 月 12 日，[Haddock 票证 #27](https://web.archive.org/web/20150219085320/http://trac.haskell.org:80/haddock/ticket/27)已得到解决，现在可以通过在第二个列表元素后缩进示例 4 个空格来实现这一点。这：

```
1\. First element

2\. Second element

    >>> your example
    your example result

3\. Third element 
```

现在结果：

[![黑线鳕嵌套列表项](https://i.stack.imgur.com/xVjOo.png)](https://i.stack.imgur.com/xVjOo.png)
[（来源：[fuuzetsu.co.uk](http://fuuzetsu.co.uk/images/1389605057.png)）]

# email - 'Simple' PHP 脚本在第 10 行显示错误，我做错了什么？

> ID：15740846
> 
> 赞同：-4
> 
> 时间：2013-04-01T09:26:57.357
> 
> 标签：email, php

我刚刚更新的网站有一个带有 php 邮件脚本的联系表，我基于[这里](http://myphpform.com/final-form.php)的表单脚本。

该脚本保存在我的网络服务器上，但是当提交数据时，由于第 10 行出现故障，因此没有发送任何邮件。

老实说，我的理解不足以确定我的错误 - 有人可以帮助新手吗？

我通过使用 Bravenet 找到了一个临时替代品，但我想使用我的无品牌版本，如果简单的 php 脚本像看起来一样简单……</p>

我的脚本（kontakt.php）如下所示：

```
 <?php
/* Set e-mail recipient */
$myemail  = "edw@rdturner.co.uk";

/* Check all form inputs using check_input function */
$name = check_input($_POST['name'], "Ihr Name");
$email  = check_input($_POST['email'], "Ihre E-Mail-Adresse");
$kontaktnummer    = check_input($_POST['kontaktnummer']);
$thema   = check_input($_POST['them']);
$message = check_input($_POST['message']), "Worum geht's?");

/* If e-mail is not valid show error message */
if (!preg_match("/([\w\-]+\@[\w\-]+\.[\w\-]+)/", $email))
{
    show_error("E-mail-Adresse ungültig");
}

/* Let's prepare the message for the e-mail */
$message = "Hallo!

Ihr Form ist unterwegs…:

Name: $name
E-Mail-Adresse: $email
Kontaktnummer: $kontaktnummer
Frage zum Thema? $thema

Nachricht: $message

Comments:
$comments

End of message
";

/* Send the message using mail() function */
mail($myemail, $subject, $message);

/* Redirect visitor to the thank you page */
header('Location: danke.htm');
exit();

/* Functions we used */
function check_input($data, $problem='')
{
    $data = trim($data);
    $data = stripslashes($data);
    $data = htmlspecialchars($data);
    if ($problem && strlen($data) == 0)
    {
        show_error($problem);
    }
    return $data;
}

function show_error($myError)
{
?>
    <html>
    <body>

    <b>Hier stimmt was nicht - bitte prüfen!</b><br />
    <?php echo $myError; ?>

    </body>
    </html>
<?php
exit();
}
?> 
```

我的提交表格是这样的：

```
 <form method="post" enctype="multipart/form-data" action="http://pub14.bravenet.com/emailfwd/senddata.php" accept-charset="utf-8">
<input type="hidden" name="usernum" value="1126560145">
<input type="hidden" name="cpv" value="2">
          <ol><li>
            <label for="name">Name (Erförderlich)</label>
            <input id="name" name="name" class="text" />
          </li><li>
            <label for="email">E-Mail-Adresse (Erförderlich)</label>
            <input id="email" name="email" class="text" />
          </li><li>
<label for="kontaktnummer">Kontaktnummer (Erförderlich)</label>
            <input id="kontaktnummer" name="kontaktnummer" class="text" />
          </li><li>
            <label for="thema">Fragen zum Thema (Erförderlich)</label></br>
            <input type="checkbox" name="thema" value="unterricht" /> Unterricht</br>
<input type="checkbox" name="thema" value="übersetzungen" /> Übersetzungen</br>
<input type="checkbox" name="thema" value="dolmetschen" /> Dolmetschen</br>
<input type="checkbox" name="thema" value="faß" /> Englsich vom Faß</br>
<input type="checkbox" name="thema" value="anders" /> Andere
          </li><li>
            <label for="message">Worum geht's? (Erförderlich)</label>
            <textarea id="message" name="message" rows="8" cols="50"></textarea>
          </li><li>
            <input type="image" name="imageField" id="imageField" src="images/submit.gif" class="send" />
            <div class="clr"></div>
          </li></ol>
          </form> 
```

当然，我需要调整 html 以反映新工作的脚本……但是如何？

提前致谢

埃德·特纳

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:29:22.857

```
$message = check_input($_POST['message']), "Worum geht's?"); 
```

至

```
$message = check_input($_POST['message'], "Worum geht's?"); 
```

有一个 ) 在错误的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:29:25.163

```
$message = check_input($_POST['message']), "Worum geht's?"); 
```

过分`)`，试试`$message = check_input($_POST['message'], "Worum geht's?");'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:30:56.520

查看额外的')'。错误在这一行。

改变

```
$message = check_input($_POST['message']), "Worum geht's?"); 
```

至

```
$message = check_input($_POST['message'], "Worum geht's?"); 
```

# notepad++ - 用 Notepad++ 用逗号分隔符替换新行？

> ID：15740853
> 
> 赞同：185
> 
> 时间：2013-04-01T09:27:26.993
> 
> 标签：notepad++, words

我有一个记事本++ 问题。

如何在 Notepad++ 中使用以下单词（位于不同的行）

```
Apples
Apricots
Pear
Avocados
Bananas 
```

并将它们变成一个段落，每个段落的末尾都有一个逗号？像这样：

```
Apples, Apricots, Pear, Avocados, Bananas 
```

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2013-04-01T12:25:26.083

打开查找和替换对话框（按`CTRL`+ `H`）。

然后`Regular expression`在底部的“搜索模式”部分中选择。

在该`Find what`字段中输入：`[\r\n]+`

在`Replace with`：`, `

*逗号后面有一个空格。*

这也将替换像

```
Apples

Apricots
Pear

Avocados
Bananas 
```

有空行的地方。

**如果您的行有尾随空格，您应该先删除这些空格。实现这一目标的最简单方法是**

```
EDIT -> Blank Operations -> Trim Trailing Space 
```

或者

```
TextFX -> TextFX Edit -> Trim trailing spaces 
```

请务必将搜索模式设置为“正则表达式”。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2013-07-23T13:38:17.963

[fapDaddy](https://stackoverflow.com/a/15741232/111424)使用宏的回答为我指明了正确的方向。

这正是对我有用的方法。

1.  将光标放在第一个数据项之后。![在此处输入图像描述](https://i.stack.imgur.com/c9vdZ.png)

2.  单击菜单中的“宏 > 开始录制”。![在此处输入图像描述](https://i.stack.imgur.com/1bt4L.png)

3.  键入以下序列：`Comma`, `Space`, `Delete`, `End`.![在此处输入图像描述](https://i.stack.imgur.com/eOY4u.png)

4.  单击菜单中的“宏 > 停止录制”。![在此处输入图像描述](https://i.stack.imgur.com/j54sz.png)

5.  单击菜单中的“宏 > 多次运行宏...”。![在此处输入图像描述](https://i.stack.imgur.com/rmqh6.png)

6.  单击“运行直到文件结束”，然后单击“运行”。![在此处输入图像描述](https://i.stack.imgur.com/zorvV.png)

7.  删除任何尾随字符。![在此处输入图像描述](https://i.stack.imgur.com/oHKVV.png)

8.  完毕！

![在此处输入图像描述](https://i.stack.imgur.com/EkBUI.png)

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2014-02-21T11:16:48.287

以下是对我有用的 Notepad++ 中类似的字符串列表，没有任何宏或其他任何东西：

1.  单击编辑 -> 空白操作 -> EOL 以空格 [所有项目现在应位于由“空格”分隔的单行中]

2.  选择任何“空格”并执行全部替换（按“，”）

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-06-12T12:26:51.557

对于记事本++ 5.9

1.  按**Ctrl+H**
2.  选择搜索模式**扩展（\n、\r、\t、\o、\x...）**
3.  输入查找内容：**\r\n**
4.  输入替换为：**,**
5.  **Replace_All**应该得到所需的结果。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-07-17T15:03:52.170

一个正则表达式匹配`\s+`对我有用：

[![在此处输入图像描述](https://i.stack.imgur.com/Kwuql.png)](https://i.stack.imgur.com/Kwuql.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-01T09:54:35.597

将光标放在**Apples**之后，在**Macro**选项卡下，选择**Start Recording**。键入逗号 ( **,** ) 字符、空格 ( ) 字符，然后按**End**键，在 Macro 选项卡下，选择**Stop Recording**。

Ctrl+Shift+P 单次播放。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-12-03T07:03:31.120

这可能听起来很奇怪，但是您可以通过复制整个文本并将其粘贴到 firefox 搜索栏中来删除下一行，然后在 notepad++ 中重新粘贴它

![第1步](https://i.stack.imgur.com/5xMYE.png)

![第2步](https://i.stack.imgur.com/DDmi5.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-10-19T20:41:43.140

## 使用 Chrome 的搜索栏

1-按下`CTRL` `F`
2-将复制的文本粘贴到**搜索栏中**
3-按下`CTRL` `A`然后`CTRL` `C`再次从搜索中复制文本
4-粘贴到**Notepad++**
5-替换`'space'`为`','`

![一键查看图片](https://i.stack.imgur.com/fT72s.png)
![2 点击图片](https://i.stack.imgur.com/HBbcP.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-15T16:08:40.890

您可以使用`cc.rnl ', '`ConyEdit（一个插件）的命令行将新行替换为您想要的内容。

# c# - 获取位置地址而不显示任何地图

> ID：15740855
> 
> 赞同：1
> 
> 时间：2013-04-01T09:27:32.107
> 
> 标签：c#, windows-phone-7, map, location, arcgis

我正在做一个带有地图位置服务的 windows phone 7 应用程序（我目前正在使用 ArcGis）。我想知道是否可以在不显示任何地图的情况下获取用户的当前位置地址。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T15:17:15.557

您需要做的第一件事是获取用户的位置。我从来没有在 Windows Phone 上开发过，但是快速谷歌搜索产生了[这个结果](http://mws580.wordpress.com/2011/01/15/get-location-on-windows-phone-7/)。

获得用户位置后，您应该继续调用[Reverse Geocode Rest API](http://nsdemo.esri.com/arcgis/sdk/rest/reverse.html)并输入用户坐标。

反向地理编码操作的结果应生成当前用户的地址，而不显示地图。

# iphone - 从 iOS 应用程序连接到 Oracle

> ID：15740856
> 
> 赞同：10
> 
> 时间：2013-04-01T09:27:35.460
> 
> 标签：iphone, ios, oracle

我知道这已被问过几次，但似乎没有明确的答案......在过去 3 天或更长时间内一直在搜索这个问题。

似乎有两种方法可以从 iOS App 连接到 Oracle 数据库：

1.  ODBC 客户端 我需要使用 gcj for ARM 编译 ODBC（哪个 ODBC？）。我认为这是一条艰难的道路，有错误，但可能需要付出相当大的努力。

2.  使用 WEB SERVICE 从 App 连接到 webservice，从 web service 连接到 Oracle DB。

这两种方法可用还是其他方法？

关于这两种方法的几个问题：哪个更安全？湾。我公司的安全部门会反对上述任何一项吗？C。哪个性能更高？d。上面哪一个通常使用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T18:04:01.873

Web 服务就是答案，您不希望人们从移动设备直接连接到数据库。Web 服务器将增加一层额外的安全性以及处理同时请求而不直接对数据库造成压力的能力

一个。哪个更安全？如上所述的 Web 服务

湾。我公司的安全部门会反对上述任何一项吗？是的，安全部门会坚持不打开oracle端口直接连接，除非他们已经打开它。

C。哪个性能更高？Web 服务，在 Web 服务器中设置正确的缓存策略可以将资源保存到数据库中。

d。上面哪一个通常使用？Web 服务，因为它们在安全性和性能方面为您提供了巨大的优势，不仅如此，Web 服务是可重用的，并且可以被许多不同的平台访问，想想未来您可能希望稍后在 Android 设备上为您的应用程序提供服务，而 Web 服务将为您节省大量的开发时间。

考虑一下，当今市场上的许多顶级应用程序都使用 Web 服务。

谷歌地图是一个很好的例子，展示了网络服务的强大！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-04T01:55:39.860

直接从您的应用程序连接到您的数据库不是一个好主意。如果您创建一个除了 SELECT 什么都不做的帐户，它可能是安全的，但还有一些其他的事情需要考虑。

为什么要使用 Oracle 客户端来增加应用程序的负担？

如果您有很多用户，您必须担心 Oracle 会处理大量同时连接。使用 Restful API 请求是无状态的。

如果您决定更改架构。您还必须更改您的应用程序。当您在两者之间放置服务时，应用程序不再依赖于架构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T05:38:18.453

ODBC 连接将要求 Oracle 端口对 Internet 开放，在绝大多数情况下，出于安全和性能原因，不允许这样做。即使是这样，或者即使您建立了一个安全的 VPN，直接数据库访问也要求连接保持打开状态，这在移动设备可以进出网络覆盖范围时可能会出现问题。

HTTP 对不可靠网络的容忍度要高得多，并且可以使用 SSL (HTTPS) 进行加密。HTTP 的问题是数据库没有直接支持这种传输，所以大多数人开发专门的 Web 服务。

我在一个名为 SlashDB 的项目上工作，该项目会自动从数据库中构建 RESTful API。对于公共 API，您将在所谓的 DMZ（两个防火墙之间的网段）中安装 /db，如[本文](http://www.slashdb.com/2013/03/14/database-gateway-for-mobile-and-web-apps/)所述。

SlashDB 可以配置为允许对公共用户进行受限数据访问，或者您可以定义具有不同数据权限的特定用户。它被设计为无状态服务，这意味着您可以轻松地在负载均衡器和反向 HTTP 代理后面设置多个节点，以实现高可用性 Web 规模部署。

无论您是手动开发 Web 服务还是使用我们的产品，您的解决方案都将获得比使用直接客户端/服务器方法更好的可扩展性、性能和安全性。我什至认为 REST API 应该用于内部企业数据集成解决方案，但这是一个全新的话题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T10:25:27.923

我将重复其他人所说的话，Rest API 是要走的路。不要直接连接到数据库。但是，可能有一种方法可以连接到我从未尝试过的数据库。

[http://odbcrouter.com/iosvsweb#hn_iOS_Open_Database_Connectivity_SDK](http://odbcrouter.com/iosvsweb#hn_iOS_Open_Database_Connectivity_SDK)

# php - 使用 PHP 从客户端发送到服务器的请求标头详细信息

> ID：15740858
> 
> 赞同：0
> 
> 时间：2013-04-01T09:27:56.180
> 
> 标签：php, nginx, http-headers

如何获取客户端发送到服务器的请求标头详细信息，例如 URL + cookie + postdata + 其他内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:32:23.463

检查 $_SERVER 变量，它包含您需要的所有信息。

# c# - 减少从 Silverlight 应用程序到数据库的次数

> ID：15740859
> 
> 赞同：1
> 
> 时间：2013-04-01T09:28:01.640
> 
> 标签：c#, .net, wcf, sql-server-2008, silverlight

我正在开发一个 Silverlight 应用程序。它有一个允许用户添加新对象的视图。绑定到此视图的视图模型具有该对象类型的集合作为属性。viewmodel 的构造函数有一个函数，比如 GetData()，它调用 WCF 服务并从数据库中获取数据，它将获取的列表添加到该集合中。

通过 WCF 服务向数据库添加新对象后，需要再次调用 GetData 方法来刷新集合，因为需要在集合中拥有最新数据。

这个过程有点慢，因为每次添加任何内容时，都需要再次获取表中的全部数据。随着数据变得越来越大，并且可能需要连接多个表来获取数据，它可能会变得更慢。

我正在考虑将传递给服务的对象添加到数据库中，直接添加到 viewmodel 中的集合中。显然，只有在调用它的服务没有返回任何错误以确保它已成功添加到数据库时，我才会将此对象添加到集合中。这样我就可以收集最新的数据，而无需从数据库中获取它。

任何人都可以指出这种方法的任何缺点或可能失败的任何情况吗？另外，请建议是否有其他更好的方法来实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T19:43:56.370

我经常让我的保存方法获取并返回已保存的对象。这样，如果服务/数据库层完全修改了它（创建日期、ID 等），您就会得到更改。此外，如果您想更新它，它并不认为它是“新的”。

# java - 单击ImageView后如何启动可绘制动画？

> ID：15740860
> 
> 赞同：1
> 
> 时间：2013-04-01T09:28:02.040
> 
> 标签：java, android, animation

我有问题。单击“ImageView”后，我想制作可绘制的动画。我找到了我的问题的答案，但我没有找到。

我的代码如下所示：

```
import java.util.Locale;

import android.app.Activity;
import android.graphics.drawable.AnimationDrawable;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;
import android.view.MotionEvent;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;

public class Talking extends Activity implements TextToSpeech.OnInitListener  {

        private TextToSpeech tts;
        private Button button1;
        private EditText editText1;
        private AnimationDrawable penguinAnimation;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.talking);

        tts = new TextToSpeech(this, this);
        button1 = (Button) findViewById(R.id.button1);
        editText1 = (EditText) findViewById(R.id.editText1);

        // button on click event
        button1.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                speakOut();
            }

        });

        ImageView penguin = (ImageView) findViewById(R.id.imageView1);
        penguin.setBackgroundResource(R.drawable.penguin_anim);
        penguinAnimation = (AnimationDrawable) penguin.getBackground();

    }
    @Override
    public void onDestroy() {
        // Don't forget to shutdown tts!
        if (tts != null) {
            tts.stop();
            tts.shutdown();
        }
        super.onDestroy();
    }

    protected void speakOut() {
        // TODO Auto-generated method stub
        String text = editText1.getText().toString();

        tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);

    }

    @Override
    public void onInit(int status) {
        // TODO Auto-generated method stub

        if (status == TextToSpeech.SUCCESS) {

            int result = tts.setLanguage(Locale.US);

            if (result == TextToSpeech.LANG_MISSING_DATA
                    || result == TextToSpeech.LANG_NOT_SUPPORTED) {
                Log.e("TTS", "This Language is not supported");
            } else {
                button1.setEnabled(true);
                speakOut();
            }

        } else {
            Log.e("TTS", "Initilization Failed!");
        }

    }
    public boolean onTouchEvent(MotionEvent event) {
          if (event.getAction() == MotionEvent.ACTION_DOWN) {
            penguinAnimation.start();
            return true;
          }
          return super.onTouchEvent(event);
        }

} 
```

我使用这个[http://developer.android.com/guide/topics/graphics/drawable-animation.html制作了可绘制动画](http://developer.android.com/guide/topics/graphics/drawable-animation.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:31:49.323

您应该调用`penguinAnimation.start()`in`speakOut()`方法来启动应用程序中的动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:34:40.977

添加

```
 penguinAnimation.start() 
```

在

```
 speakOut() 
```

方法，从`ImageView ClickListener`.

# jsp - 从中获取价值从 jsp 到 Action 类的语句 我的代码中有以下 <select>..</select>：<select name="approvername"> <option value="first name">my first name</option> <option value ="second name">我的第二个名字</option> <option value="third n

> ID：15740864
> 
> 赞同：2
> 
> 时间：2013-04-01T09:28:16.870
> 
> 标签：jsp

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:41:25.883

在动作类中而不是使用

```
String approvername = request.getParameter("approvername") 
```

我已将其更改为

```
String approvername = (String)areq.getParameter("approvername"); 
```

它有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T13:51:15.297

对这种类型的选择执行此操作的正确方法是使用`getParameterValues`. 您将获得一个包含所有选定值的字符串数组，在您的情况下，它只是一个包含 1 个元素的数组。

```
String approvername = request.getParameterValues("approvername")[0]. 
```

# joomla - 无法使用 JInput 将文件名保存到数据库中

> ID：15740867
> 
> 赞同：2
> 
> 时间：2013-04-01T09:28:21.213
> 
> 标签：joomla, save, joomla2.5, jinput, jform

我有一个带有文本和文件类型输入字段的表单。我有一个文件名没有保存在数据库中的问题，但其他一切都保存了。我 vardumped $myForm 并且除了文件之外的所有东西都在那里，所以我用文件名创建了另一个数组并将它与 $myForm 合并。然后我尝试将其设置为“jform”，但它似乎不起作用。有人对为什么有任何想法吗？谢谢！

控制器.php

```
 function save()
    {
        $jinput = JFactory::getApplication()->input;
        $myForm = $jinput->get('jform', null, 'array');
        //$files = $jinput->files->get('jform');
        $file_array = ['image1' => 'test.png',
                            'image2' => 'test2.png'];

        $merged_array = array_merge($myForm, $file_array);
        $jinput->set('jform',$merged_array);
        //or $jinput->post->set('jform',$merged_array); (this doesn't work either)

        return parent::save();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T05:23:42.647

不要**使用**$_POST 除非您打算编写大量验证代码来保护用户输入。

相反，使用`$jinput->get('jform', null, 'raw');`

这仍将应用一些验证，但应保持您的值不变。

# jsf - 禁用 icefaces 数据表的 onscroll 事件

> ID：15740868
> 
> 赞同：1
> 
> 时间：2013-04-01T09:28:31.493
> 
> 标签：jsf, jsf-2, icefaces

我使用了一个 ice:dataTable 组件来显示数据，不知何故，目标 div 中有一个默认的 onscroll 事件，这对我来说没有任何意义，并且它给页面中的其他浮动元素带来了一些定位问题。我想禁用此操作，但我没有找到任何方法来控制它。

它调用了以下函数：

```
var input = document.getElementById('targetId'); clearTimeout(ice.pid); 
ice.pid = setTimeout(function() { 
    input.value =   
    document.getElementById('targetId_scroll').scrollTop;    
    window.iceSubmitPartial(null, input, event); 
}, 400); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-08T18:50:40.577

我在使用 ICEFaces 时遇到了类似的问题，当我们升级 JSF 和 ICEFaces 版本时，最好的解决方案是将标签： **ice:dataTable**标签更改为**ace:dataTable**，并将里面的列从**ice:column**更改为**ace:column**。

但是，如果您没有升级 ICEFaces 版本，我想您可以在代码的某些点使用 JavaScript 或 jQuery 删除 onscroll 属性，例如：

```
document._getElementsByXPath("//div[contains(@onscroll,'scroll')]")[0].removeAttribute("onscroll") 
```

*这不是一个好的，只是一个例子，因为您可以从其他表中删除滚动。*

```
jQuery('.myClass div[id$="_scroll"]')[0].removeAttribute("onscroll") 
```

# php - 如何使用 Drupal 在站点->默认->文件中创建具有写读取权限的文件夹？

> ID：15740871
> 
> 赞同：1
> 
> 时间：2013-04-01T09:28:36.147
> 
> 标签：php, drupal, drupal-7

我在 Ubuntu 上工作，我需要在 drupal 的 default->files 文件夹中创建一个具有写权限的文件夹，以便以后可以将文件添加到该文件夹​​中。

这是我目前拥有的代码，

请帮忙。

```
drupal_mkdir('public://' . $new_dir . '/');
$file = file_copy($file, 'public://' . $new_dir . '/' . $file_name); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:41:33.020

```
 drupal_mkdir('public://' . $new_dir , 0777); 
```

如果您需要它是递归的，请将第三个参数设置为 true。

更新：

```
 $oldumask = umask(0);
    drupal_mkdir("public://". $new_dir , 0777);
    umask($oldumask); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:07:44.440

触发此命令，然后尝试您的代码.. chmod -R 0700 sites/default/files

# azure - 超出“数据库单元 - 网络版”的配额

> ID：15740872
> 
> 赞同：1
> 
> 时间：2013-04-01T09:28:41.580
> 
> 标签：azure, azure-storage

我有一个 Azure 订阅，并且超出了“数据库单元 - 网络版”的“1 个数据库单元”的配额。

我完全不确定这意味着什么。我有一个移动服务、blob 存储、网站和 5 个 SQL 数据库设置。究竟什么被归类为“数据库单元”和“1 DB 单元”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:12:49.577

由于 Windows Azure 计费团队决定为 SQL 数据库引入增量定价策略，从而大大降低了原始价格，因此他们引入了“数据库单元”一词。

说到“超出配额”，我怀疑您正在使用 MSDN [PRO|PREMIUM|ULTIMATE] 订阅优惠。[在详细说明所有这些好处的页面上，](http://www.windowsazure.com/en-us/pricing/member-offers/msdn-benefits/)非常清楚地说明了数据库单元是什么：

> ...此优惠包括 1DU Web 版 SQL 数据库 (1DU=1GB)，可用于您部署到订阅的任何服务，...

在[官方定价详情](http://www.windowsazure.com/en-us/pricing/details/#header-4)页面上显示为：

> 将出现在您的帐单上的数据库单元 (DU)

# jquery - 使用 jQuery 单击其他 div 后隐藏特定 div

> ID：15740873
> 
> 赞同：0
> 
> 时间：2013-04-01T09:28:46.260
> 
> 标签：jquery, html, show-hide

我是 jQuery 的新手。

我有一个如下的 html 代码，它是动态生成并添加到我的页面中的：

```
 <div class="outstandingcallback">
<span>a</span>
<span>b</span>
</div>
<div class="outstandingcallback">
<span>c</span>
<span>d</span>
</div>
    ...... 
```

当我单击另一个时，我需要隐藏其中一个。我使用了以下 jQuery，但我不确定如何隐藏 div 元素。

```
 $('.outstandingcallback').bind('click', function () {
                var selectdCallItemID = $(".callItemID", this).html();

                var myHtmlCode = $('#CallBacks').html();

                $('' + myHtmlCode + '').find('div').each(function () {
                    var thisCallID = $(".callItemID", this).html();

                    if (thisCallID == selectdCallItemID ) {
                        alert("test");
                        $('' + myHtmlCode + '').find(this).hide();
                    }
                });
            }); 
```

我不确定以下部分：

```
 $('' + myHtmlCode + '').find(this).hide(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:36:14.610

您可以使用`.siblings()`查找同一级别的其他元素：

因为*`which is generated on the fly and added to my page`使用`.on`*并将事件委托给最近的现有父级或`document`

```
 $(document).on('click', '.outstandingcallback', function () {
    $(this).siblings('.outstandingcallback').hide();
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:42:55.780

尝试这样的事情，[小提琴](http://jsfiddle.net/rajesh007/xjew8/)

```
 $('.outstandingcallback').bind('click', function () {
     $('.outstandingcallback').hide(); 
     $(this).show(); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:32:22.827

```
<script>
 function doAnimation()
 {
    $("#secondDiv").toggle(300);
 }
  </script>

 <div id='firstDiv' onclick='doAnimation()'></div>
 <div id='secondDiv' ></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:34:12.947

```
if($(".outstandingcallback:first").click()) {
    $(".outstandingcallback:first").show();
    $(".outstandingcallback:last").hide();
} else if ($(".outstandingcallback:last").click()) {
    $(".outstandingcallback:first").hide();
    $(".outstandingcallback:last").show();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T09:56:12.660

简单地隐藏未点击的 div 你只需要这样：

```
 $(function(){
    $('.outstandingcallback').on('click', function () {
        $(this).siblings().hide();
    });
}) 
```

# c# - 不锁定生产者或消费者的 C# 线程

> ID：15740874
> 
> 赞同：4
> 
> 时间：2013-04-01T09:28:50.810
> 
> 标签：c#, multithreading

TLDR；主要问题的版本：

1.  在使用线程时，使用 1 个线程读取列表的内容是否安全，而另一个线程写入它，只要您不删除列表内容（重新组织顺序）并且仅在完全添加新对象后读取新对象

2.  当一个线程正在将一个 Int 从“旧值”更新为“新值”时，是否存在风险，如果另一个线程读取此 Int，则返回的值既不是“旧值”也不是“新值”

3.  如果线程忙，线程是否可以“跳过”关键区域，而不是仅仅进入睡眠并等待区域释放？

我有 2 段代码在单独的线程中运行，我想让一个充当另一个的生产者。我不希望任何一个线程在等待访问时“休眠”，而是如果另一个线程正在访问它，则在其内部代码中向前跳过。

我最初的计划是通过这种方法共享数据（一旦计数器足够高，就切换到辅助列表以避免溢出）。

* * *

我最初打算的流程伪代码。

```
Producer
{
Int counterProducer;
bufferedObject newlyProducedObject;
List <buffered_Object> objectsProducer;
    while(true) 
    {
        <Do stuff until a new product is created and added to newlyProducedObject>;
        objectsProducer.add(newlyProducedObject_Object);
        counterProducer++
    }
}

Consumer
{
Int counterConsumer;
Producer objectProducer; (contains reference to Producer class)
List <buffered_Object> personalQueue
    while(true)
        <Do useful work, such as working on personal queue, and polish nails if no personal queue>
        //get all outstanding requests and move to personal queue
        while (counterConsumer < objectProducer.GetcounterProducer())
        {
            personalQueue.add(objectProducer.GetItem(counterconsumer+1));
            counterConsumer++;
        }
} 
```

* * *

看到这里，乍一看一切都很好，我知道我不会从队列中检索半构建的产品，所以无论它在哪里，列表的状态都应该不是问题，即使线程切换时发生生产者正在添加一个新对象。这个假设是正确的，还是这里有问题？（我的猜测是消费者要求列表中的特定位置并将新对象添加到末尾，并且永远不会删除对象，这不会成为问题）

但引起我注意的是，如果“counterProducer”是“counterProducer++”，是否会出现类似的问题？这会导致临时值是“null”还是某个未知值？这会是一个潜在的问题吗？

我的目标是在等待互斥锁时不让两个线程锁定，而是继续它们的循环，这就是我首先制作上述内容的原因，因为没有锁定。

如果列表的使用会导致问题，我的解决方法是做一个链表实现，并在两个类之间共享，仍然使用计数器查看是否添加了新工作，并在personalQueue移动新时保留最后位置东西到个人队列。所以生产者添加新链接，消费者读取它们，并删除以前的链接。（列表上没有计数器，只是外部计数器知道添加和删除了多少）

* * *

避免counterConsumer++风险的替代伪代码（需要帮助）。

```
Producer
{
Int publicCounterProducer;
Int privateCounterProducer;
bufferedObject newlyProducedObject;
List <buffered_Object> objectsProducer;
    while(true) 
    {
        <Do stuff until a new product is created and added to newlyProducedObject>;
        objectsProducer.add(newlyProducedObject_Object);
        privateCounterProducer++
        <Need Help: Some code that updates the publicCounterProducer to the privateCounterProducer if that variable is not 

locked, else skips ahead, and the counter will get updated at next pass, at some point the consumer must be done reading stuff, and 

new stuff is prepared already>      
    }
}

Consumer
{
Int counterConsumer;
Producer objectProducer; (contains reference to Producer class)
List <buffered_Object> personalQueue
    while(true)
        <Do useful work, such as working on personal queue, and polish nails if no personal queue>
        //get all outstanding requests and move to personal queue
        <Need Help: tries to read the publicProducerCounter and set readProducerCounter to this, else skips this code>
        while (counterConsumer < readProducerCounter)
        {
            personalQueue.add(objectProducer.GetItem(counterconsumer+1));
            counterConsumer++;
        }
} 
```

* * *

所以代码的第二部分的目标，我还没有弄清楚如何编写这个代码，是让两个类不要等待另一个类，以防另一个类处于更新 publicCounterProducer 的“关键区域”。如果我正确阅读了锁定功能，线程将进入睡眠状态等待释放，这不是我想要的。可能最终不得不使用它，在这种情况下，第一个伪代码会这样做，并且只是在获取值时设置一个“锁定”。

希望你能帮助我解决我的许多问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:44:41.617

1.  不，这不安全。`.Add`在添加对象之后`List`，但在`List`更新内部数据结构之前，可能会发生上下文切换。

2.  如果是`int32`，或者如果是`int64`并且您在 x64 进程中运行，则没有风险。但是，如果您有任何疑问，请使用该`Interlocked`课程。

3.  是的，您可以使用[Semaphore](http://msdn.microsoft.com/en-us/library/system.threading.semaphore.aspx)，当需要进入临界区时，使用需要超时的[WaitOne重载。](http://msdn.microsoft.com/en-us/library/cc190477.aspx)通过超时0。如果`WaitOne`返回true，那么你成功获得了锁，可以进入。如果它返回false，那么你没有获得锁，不应该进入。

你真的应该看看[System.Collections.Concurrent](http://msdn.microsoft.com/en-us/library/dd287108.aspx)命名空间。特别是，查看`BlockingCollection`. 它有一堆`Try*`运算符，您可以使用它们从集合中添加/删除项目而不会阻塞。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T09:43:53.927

> > 在使用线程时，使用 1 个线程读取列表的内容是否安全，而另一个线程写入它，只要您不删除列表内容（重新组织顺序）并且仅在完全添加新对象后读取新对象

**不，不是**。将项目添加到列表的副作用可能是重新分配其底层数组。当前实现`List<T>`在将旧数据复制到内部引用之前更新内部引用，因此多个线程可能会观察到正确大小但不包含数据的列表。

> > 当一个线程正在将一个 Int 从“旧值”更新为“新值”时，是否存在风险，如果另一个线程读取此 Int，则返回的值既不是“旧值”也不是“新值”

不，int 更新是原子的。但是如果两个线程同时递增`counterProducer`，就会出错。您应该使用[`Interlocked.Increment()`](http://msdn.microsoft.com/en-us/library/dd78zt0c.aspx)它来增加它。

> > 如果线程忙，线程是否可以“跳过”关键区域，而不是仅仅进入睡眠并等待区域释放？

不，但您可以使用（例如）[`WaitHandle.WaitOne(int)`](http://msdn.microsoft.com/en-us/library/cc189907.aspx)查看等待是否成功，并相应地进行分支。`WaitHandle`由几个同步类实现，例如`ManualResetEvent`.

顺便说一句，您是否有理由不使用内置的生产者/消费者类，例如[`BlockingCollection<T>`](http://msdn.microsoft.com/en-gb/library/dd267312.aspx)？BlockingCollection 易于使用（在您阅读文档之后！），我建议您改用它。

# c# - C# - 在预定义的字符串数组中查找字符串的位置

> ID：15740876
> 
> 赞同：0
> 
> 时间：2013-04-01T09:29:01.320
> 
> 标签：c#, arrays, string

我有一个预定义的字符串数组，其中包含从`A`to的字母`Q`：

```
string[] SkippedAreasArray = new string[] {"A", "B", "C", "D", "E", "F", "G",
            "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q"}; 
```

在`TextBox`内部 Windows 窗体中，用户可以像这样输入 skippedAreas：`A,B,C,D...`验证和限制只能使用字母和逗号，因此保证输入是这种格式。

我所做的是接受用户输入并填充另一个字符串数组：

```
string[] SkippedAreasFromForm = new string[17];
...
SkippedAreasFromForm = (txtSkippedAreas.Text).Split(','); 
```

现在是我正在寻求帮助的棘手部分。用户必须输入`Number of areas`例如 - 3。这意味着他只使用`A`、`B`和`C`。如果区域数为 2，则他只能使用`A`，`B`如果区域数为 4，则`A`、`B`、`C`和`D`可用，依此类推。

我需要检查在`SkippedAreasFromForm`填充了用户输入的数组中是否存在与上述条件不匹配的区域。

这在编码方面意味着什么 - 我需要从 中获取每个元素 `SkippedAreasFromForm`，从预定义中获取它的整数值，`SkippedAreasArray`并查看该值是否等于或大于他输入为“区域数”的值 (>=)。如果存在超出所选数字范围的区域，则应显示错误。

我现在拥有的是：

```
foreach (string tempAreaValue in SkippedAreasFromForm)
                {
                    for (int i = 0; i < SkippedAreasArray.Length; i++)
                    {
                        if (tempAreaValue == SkippedAreasArray[i])
                        {
                            if ((i + 1) > entity.AreasCnt)
                            {
                                MessageBox.Show("You must use areas only within the Number of Areas scope!", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                                txtSkippedAreas.Focus();
                                return false;
                            }
                        }
                    }
                } 
```

对于少数测试，我使它有效。但首先 - 至少对我来说它似乎过于复杂。其次 - 我不确定这个算法是否完全按照我的需要工作，或者我只是幸运地得到了正确的结果。第三 - 我现在正在编写 C# 代码 2 个月，在我看来，这似乎是 LINQ 表达式的绝佳候选者 - 你认为使用 LINQ 会更好吗，我希望能在转换中提供帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:30:27.377

我想你只是在寻找`IndexOf`：

```
int index = SkippedAreasArray.IndexOf(tempAreaValue);
if (index >= entity.AreasCnt)
{
    ...
} 
```

（您可能还想检查是否为`index`-1，如果元素根本不在列表中，则会发生这种情况。另外，考虑重复 - 用户可以输入`A`, `A`,`A`吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:34:36.197

如果您正在查找数组中从起始索引到基于 areaNumber 的最大字符串元素的元素，则：

```
int areaNumber = 4;
var result = SkippedAreasArray.Select((r, i) => new { Value = r, Index = i })
                              .Where(r => r.Index <= areaNumber - 1)
                              .Select(r => r.Value)
                              .ToArray(); 
```

因为`areaNumber 4`你会得到`"A", "B", "C", "D"`

**编辑：**

> 我正在查看用户输入中的每个元素（数组 A、C、H、Q ..）是否在由 areNumber 确定的区域内*（来自评论）*

假设您的 userInputArray 是：

```
string[] userInputArray = new string[] {"A", "C", "H", "Q"}; 
```

然后你可以通过`Enumerable.Except`以下方式使用：

```
if(result.Except(userInputArray).Any())
{
  //Invalid
}
else
{
 //Valid
} 
```

# iphone - 使用正则表达式将数字转换为电话格式

> ID：15740887
> 
> 赞同：0
> 
> 时间：2013-04-01T09:29:40.037
> 
> 标签：iphone, ios, regex, ios5, formatting

我的问题是我有一些带有数字的文本字段，我必须将此数字转换为某种电话格式，例如**(xxx) xxx-xxxx**。我已经用这段代码尝试了一个正则表达式：

```
wholeText = [wholeText stringByReplacingOccurrencesOfString:@"(\\d{1,3})(\\d{0,3})(\\d{0,4})"
                                                     withString:@"($1) $2-$3"
                                                        options:NSRegularExpressionSearch
                                                          range:NSMakeRange(0, wholeText.length)];
NSLog(@"wholeText = %@", wholeText); 
```

如果我逐渐在文本字段中输入文本，`NSLog`输出以下内容：

```
wholeText = (1) -
wholeText = (12) -
wholeText = (123) -
wholeText = (123) 4-
wholeText = (123) 45-
wholeText = (123) 456-
wholeText = (123) 456-7 
```

所以我的问题是**如果前面没有数字，我不需要括号和连字符**，即在我输入第 4 个数字后应该出现右括号，在我输入第 7 个数字后应该出现连字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:38:03.903

使用下面的代码

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{

    int length = [self getLength:textField.text];
    //NSLog(@"Length  =  %d ",length);

    if(length == 10)
    {
        if(range.length == 0)
            return NO;
    }

    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

    NSCharacterSet *charactersToRemove = [[ NSCharacterSet alphanumericCharacterSet ] invertedSet ];

    newString = [[newString componentsSeparatedByCharactersInSet:charactersToRemove]componentsJoinedByString:@""];

    NSString *expression = @"^([0-9]+)?(\\.([0-9]{1,2})?)?$";

    NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression 
                                                                           options:NSRegularExpressionCaseInsensitive 
                                                                             error:nil];
    NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                        options:0
                                                          range:NSMakeRange(0, [newString length])];
    NSLog(@"newString::%@",newString);
    if (numberOfMatches == 0)
        return NO; 

    if(length == 3)
    {
        NSString *num = [self formatNumber:textField.text];
        textField.text = [NSString stringWithFormat:@"(%@)",num];
        if(range.length > 0)
            textField.text = [NSString stringWithFormat:@"%@",[num substringToIndex:3]];
    }
    else if(length == 6)
    {
        NSString *num = [self formatNumber:textField.text];
        //NSLog(@"%@",[num  substringToIndex:3]);
        //NSLog(@"%@",[num substringFromIndex:3]);
        textField.text = [NSString stringWithFormat:@"(%@) %@-",[num  substringToIndex:3],[num substringFromIndex:3]];
        if(range.length > 0)
            textField.text = [NSString stringWithFormat:@"(%@) %@",[num substringToIndex:3],[num substringFromIndex:3]];
    }
    return YES;
}

#pragma mark - Mobile Validation

-(NSString*)formatNumber:(NSString*)mobileNumber
{

    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
    mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

    NSLog(@"%@", mobileNumber);

    int length = [mobileNumber length];
    if(length > 10)
    {
        mobileNumber = [mobileNumber substringFromIndex: length-10];
        NSLog(@"%@", mobileNumber);

    }

    return mobileNumber;
}

-(int)getLength:(NSString*)mobileNumber
{

     mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"(" withString:@""];
     mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@")" withString:@""];
     mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
     mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"-" withString:@""];
     mobileNumber = [mobileNumber stringByReplacingOccurrencesOfString:@"+" withString:@""];

     int length = [mobileNumber length];

     return length;
} 
```

试试这个你会成功的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:40:24.717

使用此实用程序

![在此处输入图像描述](https://i.stack.imgur.com/JeLPh.png)

UITextField 子类，允许以预定义格式输入数字。

[http://www.cocoacontrols.com/controls/reformattednumberfield](http://www.cocoacontrols.com/controls/reformattednumberfield)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:40:27.450

如果您可以访问惰性运算符，这将满足您的需求（我猜，您没有提供太多细节。）：

```
/^(\d{1,3}?)(\d{1,3}?)(\d{1,4})$/ 
```

如何？[懒惰的运营商。](http://www.regular-expressions.info/repeat.html)

# android - Android Widget 在第二次运行之前不会显示在列表中

> ID：15740890
> 
> 赞同：1
> 
> 时间：2013-04-01T09:29:45.390
> 
> 标签：android, android-widget, widget

我正在尝试运行一个小部件，我看到这个问题已经在这里的许多问题中讨论过，每个人都建议应该启动一个活动，这样才能显示应用程序。我什至开始了一项活动，但是当我完成活动时，仍然没有显示小部件。这是我的清单。任何帮助，将不胜感激。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mamlambo.imageswidget"
android:installLocation="internalOnly"
android:versionCode="2"
android:versionName="1.0.2" >

<application
    android:debuggable="true"
    android:icon="@drawable/icon"
    android:label="@string/app_name" >
    <receiver android:name=".ImagesWidgetProvider" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/imageswidget_info" />
    </receiver>

    <activity
        android:name=".ImagesWidgetConfiguration"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Recycle" >
    </activity>
    <activity android:name=".Search" >
    </activity>
    <activity android:name=".TabingActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MEDIA_MOUNTED" />

            <data android:scheme="file" />
        </intent-filter>
    </activity>
    <activity android:name=".MainActivity" >
    </activity>

    <receiver android:name=".ImagesWidgetProvider" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />

            <data android:scheme="images_widget" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/imageswidget_info" />
    </receiver>
    <receiver android:name=".ImagesWidgetProvider" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
        </intent-filter>
    </receiver>
    <receiver
        android:name=".CustomReceiver"
        android:enabled="true" >
        <intent-filter>
            <action android:name="android.intent.action.DELETE" />
        </intent-filter>
    </receiver>
</application>

<uses-sdk android:minSdkVersion="3" />

</manifest> 
```

# sql - 更新和设置 SQL 的首选方法

> ID：15740893
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:30:05.123
> 
> 标签：sql, sql-update, set, correctness

我现在正在学习 SQL，并且发现了一些不同的更新和设置表的方法。

对于这个例子，我想知道这样做的“最正确方法”是什么？

```
 UPDATE student
    SET test1 = 7, test2 = 9
    where stuid = 999 
```

或者

```
 UPDATE student
    SET test1 = 7
    where stuid = 999
    UPDATE student
    SET test2 = 9
    where stuid = 999 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:31:22.777

运行一个更新语句总是比两个好。**我选择第一个**。它只会在数据库上运行一次并更新两列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T09:32:26.670

我将使用第一个语句，因为它只是对数据库服务器的一次调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:34:13.310

我建议第一个，不要重复自己，并且总是编写整洁的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T09:36:18.950

毫无疑问，语句 1 比语句 2 更好……为什么要加载数据库服务器两倍于要求……

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T09:42:56.807

首先，在发布任何问题之前始终使用 Google 自己。

答案（正如其他人所说）是偏离**Method 1**的。因为它不会重新加载数据库**两次。**

另外，如果您是初学者，请尝试向**[W3Schools学习](http://www.w3schools.com/sql/)**

# iphone - 以编程方式创建的 UITextField 隐藏了其他控件

> ID：15740895
> 
> 赞同：0
> 
> 时间：2013-04-01T09:30:19.850
> 
> 标签：iphone, objective-c, uitableview, uiview, uitextfield

我需要动态创建一些控制器。在此处提供的图像中，我以编程方式添加了一个`UITextField`（名称），它隐藏了 UITableView。

![在此处输入图像描述](https://i.stack.imgur.com/6Q7Te.png)

`UITableView`默认隐藏。当用户触摸它`UIButton`上面时，`UITableVIew`就会出现。

我的问题何时`UITableView`出现，我怎样才能使`UITableView`所有其他控件居于首位？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T09:34:00.170

您将不得不更改顺序。首先添加 UItextfield

```
[self.view addSubview:yourTextField]; 
```

并在该行代码之后添加 tableview 和其他视图，以便它们出现在其上方。

```
[self.view addSubview:yourTableView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T11:04:52.990

尝试

```
[self.view bringSubviewToFront: yourTableView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T11:14:10.943

我认为这会很好，所以请实施这个。

```
 UITextField *txtFld = [[UITextField alloc] initWithFrame:CGRectMake(65, 300, 200, 30)];
    txtFld.backgroundColor = [UIColor clearColor];
    // Border Style None
    [txtFld setBorderStyle:UITextBorderStyleNone];
    [txtFld setPlaceholder:@"Name"];

    [self.view addSubview:txtFld]; 
```

# youtube - 如何自定义 youtube 中视频停止后出现的相关视频？

> ID：15740897
> 
> 赞同：1
> 
> 时间：2013-04-01T09:30:30.310
> 
> 标签：youtube, youtube-api

是否可以控制（显示我自己的视频列表）视频完成后显示的相关视频缩略图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T20:33:09.110

如果您在 youtube 上创建官方“播放列表”，那么您可以控制最多 200 个视频的顺序。

您只需嵌入该列表的播放列表代码。

# c++ - WritePrinter 不要求输入 PIN 码

> ID：15740898
> 
> 赞同：2
> 
> 时间：2013-04-01T09:30:31.660
> 
> 标签：c++, winapi

我们有类似安全打印的东西。

我去我的控制面板>>打印机和设备>>打印机>>打印机首选项在这里我分配一个4位数的密码..

我从 Word 或 Excel 打印...转到打印机 >> 检索作业 >> 选择我的打印作业并输入我的密码。

只有这样我的工作才会被打印出来。

现在我们的应用程序有两个用于打印的源代码

从我们的应用程序触发打印时，打印会立即完成....即它不会将我的工作存储在队列中并等待 pin ...但只是立即打印

一些源代码

```
bResult = OpenPrinter(szDevice, &hPrinter, NULL);
// szDevice contains printer name
startDocPrtInfo.pDocName = msg;
startDocPrtInfo.pOutputFile = NULL;
startDocPrtInfo.pDatatype = "RAW";
bPrntErr = (StartDocPrinter(hPrinter,1,(LPBYTE)&startDocPrtInfo) == 0);

WritePrinter(hPrinter, &buffer[2], i, &cnt);
EndDocPrinter(hPrinter);
ClosePrinter(hPrinter); 
```

~~~~~ 该代码正在打印给定的文档，但它不等待用户输入他的密码

问题 如何让上面的代码像其他应用程序一样等待？我在这里缺少一些设置吗？

感谢期待CP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:35:36.110

我解决了这个问题。

没有代码更改。在我们的打印机设置中，我们取消选中“允许转义序列”并且它起作用了。

感谢论坛 tho 提出问题。将经常访问，并针对其他人提出的问题提出更多问题和解决方案

一个无知的程序员祝你好运:)

# java - 在屏幕上显示时删除 pdf 文件的安全方法

> ID：15740900
> 
> 赞同：2
> 
> 时间：2013-04-01T09:30:35.453
> 
> 标签：java, pdf

我有一个方法调用另一个方法，该方法通过 swingutilities 线程机制打开已经保存的 pdf 文件到屏幕。当它从给定的客户端路径打开 pdf 文件时，其余的方法处理从文件夹中清除所有 pdf 文件。

我的问题是，如果我多次调用此方法以同时打开多个pdf文件，那么在内存管理方面清理包含所有pdf文件的路径的最佳方法是什么。

我的代码片段如下所示：

```
public void fileSaveFinished(String filePath){
         openPDFReport(filePath); //display pdf to screen
         cleanFolderContent(folderPath, filePath); // It cleans folder contents except given filePath}

public void opendPDFReport(String filePath){

    SwingUtilities.invokeLater(new Runnable(){

        PDFFileLauncher.open(filePath);
     }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:45:05.147

在这里，您的问题与共享资源有关。您将阅读 PDF 并删除它。因此，您必须使用方法池并使用等待和通知方法来管理工作。等到文件读取操作未完成并通知其删除文件。有关等待和通知的更多详细信息，请参阅一些好的教程。他们一定会解决你的问题。

# javascript - javascript中的简单3D粒子重力？

> ID：15740906
> 
> 赞同：1
> 
> 时间：2013-04-01T09:30:56.823
> 
> 标签：javascript, physics, game-physics

我正在尝试在我的 3D 环境中进行一些简单的重力处理（我正在使用three.js）。我有一些代码，但它不起作用。我希望它只是某个地方的一个愚蠢的错误。**编辑：替换旧代码**

```
function handleGravity() {
    for(var j = 0; j < spheres.length; j++) {

        for(var i = 0; i < spheres.length; i++) {

            var r1 = new Array( spheres[j].position.x, spheres[j].position.y, spheres[j].position.z);
            var r2 = new Array( spheres[i].position.x, spheres[i].position.y, spheres[i].position.z);
            var r12 = new Array(r2[0]-r1[0], r2[1]-r1[1], r2[2]-r1[2]);
            var r12UnitVector = new Array( r12[0]/Math.abs(r12[0]), r12[1]/Math.abs(r12[1]),r12[2]/Math.abs(r12[2]) );

            var m1 = masses[j];
            var m2 = masses[i];
            var r12Squared = r12[0]*r12[0] + r12[1]*r12[1] + r12[2]*r12[2];
            var a12 = new Array( -(gravConst*m2/r12Squared)*r12UnitVector[0], -(gravConst*m2/r12Squared)*r12UnitVector[1], -(gravConst*m2/r12Squared)*r12UnitVector[2]);

            velocities[j][0] += a12[0]*timePassed;
            velocities[j][1] += a12[1]*timePassed;
            velocities[j][2] += a12[2]*timePassed;
        }

    }
} 
```

如果你发现它有什么问题，或者给我任何关于使用 JavaScript 在 3D 环境中最**有效**地模拟许多粒子的提示（我对物理 + 模拟非常陌生），那将是很棒的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T12:45:08.263

这似乎有效：

```
function handleGravity() {
    for(var j = 0; j < spheres.length; j++) {

        for(var i = 0; i < spheres.length; i++) {
            if(i != j) {
                var r1 = new Array( spheres[j].position.x, spheres[j].position.y, spheres[j].position.z);
                var r2 = new Array( spheres[i].position.x, spheres[i].position.y, spheres[i].position.z);
                var r12 = new Array(r2[0]-r1[0], r2[1]-r1[1], r2[2]-r1[2]);
                var r12UnitVector = new Array( r12[0]/Math.abs(r12[0] + r12[1] + r12[2])/3, r12[1]/Math.abs(r12[0] + r12[1] + r12[2])/3, r12[2]/Math.abs(r12[0] + r12[1] + r12[2])/3 );

                var m1 = masses[j];
                var m2 = masses[i];
                var r12Squared = r12[0]*r12[0] + r12[1]*r12[1] + r12[2]*r12[2];
                var a12 = new Array( -(gravConst*m2/r12Squared)*r12UnitVector[0], -(gravConst*m2/r12Squared)*r12UnitVector[1], -(gravConst*m2/r12Squared)*r12UnitVector[2]);

                velocities[j][0] -= a12[0]*timePassed;
                velocities[j][1] -= a12[1]*timePassed;
                velocities[j][2] -= a12[2]*timePassed;
            }
        }

    }
} 
```

# sql - 使用 sql server management studio 恢复备份数据库

> ID：15740907
> 
> 赞同：0
> 
> 时间：2013-04-01T09:30:57.880
> 
> 标签：sql

我有一个数据库备份。

现在我想将此备份安装到我朋友的系统中。

他的系统不包含 SQL Server Management Studio。

我如何将我的备份安装到他的系统，两者都使用 SQL Server 2005。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:33:56.517

~~**声明一：** *他的系统不包含SQL server management studio*~~

**声明 2：** *两者都使用 SQL Server 2005...*

~~上述两种说法是不是相互**矛盾？**~~

**更新**请忽略我之前的回答

在命令提示符上运行以下命令：

```
SqlCmd -E -S MyServer –Q “RESTORE DATABASE [MyDB] 
       FROM DISK=’D:BackupsMyDB.bak(Your backup Databse file)’” 
```

我[从这里得到了参考](http://www.howtogeek.com/50295/backup-your-sql-server-database-from-the-command-line/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:44:27.850

您将需要在另一台计算机上安装*某种*SQL 客户端。作为`sqlcmd`可以使用的任何 SQL Server 安装的一部分。

然后使用`RESTORE`(SQL) 语句恢复备份。

有关该`RESTORE`语句的详细信息可以在手册中找到：http: [//msdn.microsoft.com/en-US/library/ms190372%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-US/library/ms190372%28v=sql.90%29.aspx)

您可以使用**任何**能够连接到第二台计算机上的 SQL Server 的 SQL 客户端来运行它。

为了让事情变得更简单，您可以使用*您的*SSMS 实例让它*生成*必要的 SQL 语句。只需假装在您的计算机上恢复备份，然后使用对话框顶部的“生成脚本”下拉菜单来查看 SSMS 将运行的 SQL。

# highcharts - 基于按钮事件添加标志

> ID：15740909
> 
> 赞同：1
> 
> 时间：2013-04-01T09:31:05.397
> 
> 标签：highcharts, highstock

```
series: [{

type: 'flags',
name: 'Flags on axis',

data: [{
x: Date.UTC(2011, 2, 1),
title: 'A'

}, {
x: Date.UTC(2011, 5, 1),
title: 'C'
}],

shape: 'squarepin'
}]

 $("#btnAddFlag").click(function () {

chart.series[0].setData(
{

x: Date.UTC(2011, 2, 1),
title: 'B'
});

}); 
```

上面的代码是 highstock 图表选项的一部分，我想根据用户事件点击添加标志。但是，我可以将新的点标志添加到图表中，但会错过标题 A 和 C 的现有标志。

1.  如何使用现有标志将新标志添加到图表中？

2.  另一方面，我能够获取标志数据，但我不确定生成正确的数据结构并将新旧标志数据重新初始化回图表中。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:42:23.127

使用 addPoint 而不是 setData。

[http://api.highcharts.com/highstock#Series.addPoint()](http://api.highcharts.com/highstock#Series.addPoint())

```
$("#btnAddFlag").click(function () {
  chart.series[0].addPoint({
    x: Date.UTC(2011, 2, 1),
    title: 'B'
  });
}); 
```

# java - 仅打印带有徽标的 JTable 中的填充数据

> ID：15740910
> 
> 赞同：0
> 
> 时间：2013-04-01T09:31:06.757
> 
> 标签：java, swing, printing, jtable, rowfilter

我的程序有一个有 100 个空白行的 JTable。让用户只填写 10 行。现在他只想打印顶部带有徽标的填充行。怎么做 ？

这是我使用的代码：

```
if(e.getSource() == print){
    try {
        table.print(JTable.PrintMode.FIT_WIDTH, head, null); 
    } catch (java.awt.print.PrinterException e1) {
         System.err.format("Cannot print %s%n", e1.getMessage()); 
    }
} 
```

它只是打印所有 100 行。

我只想打印填充的行（让前 10 行填充）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:09:16.127

您可以在打印前过滤空行：

```
table.setAutoCreateRowSorter(true);
RowFilter filter = new RowFilter() {

    public void include(Entry entry) {
        // here add a loop which checks if 
        // any of the values in the entry is not-null
        // return true if yes, false otherwise (that is all empty)
    }
};
((DefaultRowSorter) table.getRowSorter()).setRowFilter(filter);
table.print(....); 
```

# php - 模数运算在php中给出负值

> ID：15740919
> 
> 赞同：1
> 
> 时间：2013-04-01T09:31:41.053
> 
> 标签：php, modulus

我期望从以下语句中得到**768 。**但它与**-360**相呼应。为什么？

```
echo 1364808202768%1000; 
```

更新：

```
#: php -v
PHP 5.3.2-1ubuntu4.17 with Suhosin-Patch (cli) (built: Jun 19 2012 01:35:33) 
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2010 Zend Technologies
    with Xdebug v2.0.5, Copyright (c) 2002-2008, by Derick Rethans

#: php -r 'echo 1364808202768%1000;'
-360

#: uname -a
Linux tripura 2.6.32-37-generic #81-Ubuntu SMP Fri Dec 2 20:35:14 UTC 2011 i686 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:35:26.983

我认为那是因为它超出了 int 限制，请使用`fmod(1364808202768,1000);`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:57:32.400

这是因为数量超过了整数类型可以容纳的最大值。您可以像这样检查整数是否太大：

```
var_dump('1364808202768' > PHP_INT_MAX); 
```

内置函数`fmod`好用，应该可以处理大数：

```
echo fmod('1364808202768', 1000); 
```

如果由于某种原因不可用，或者如果您经常处理大量数字，您也可以使用两个常见扩展（[GMP](http://php.net/gmp)和[BC ）之一：](http://php.net/bc)`fmod`

```
// Using the GMP extension
$big = gmp_init('1364808202768', 10);
$val = gmp_strval(gmp_mod($big, 1000));
echo $val;

// Using the BC extension
echo bcmod('1364808202768', 1000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T09:37:23.657

您应该阅读有关数据类型及其范围的信息。用这个：-

```
$num = 1364808202768;
echo fmod($num,1000); 
```

# scala - 使用 spray-json 处理默认值的好方法是什么

> ID：15740925
> 
> 赞同：6
> 
> 时间：2013-04-01T09:32:03.620
> 
> 标签：scala, spray, spray-json

在某些情况下，默认值比案例类中的可选值更有意义：

```
case class Car(numberOfWheels:Int = 4, color:String)

case class Car(numbeOfWheels:Option[Int], color:String) //silly 
```

在第一种情况下，我希望能够轻松地将以下 json 转换为实例：

```
{"color":"red"} 
```

但是对于标准`jsonFormat2(Car)`，spray-json 抱怨缺少`numberOfWheels`.

我如何最干净地解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-19T12:11:26.623

我偶然发现了同样的问题。我已经创建了一个可以为我解决它的补丁。它使具有默认值的字段成为可选的。

[https://github.com/spray/spray-json/pull/56](https://github.com/spray/spray-json/pull/56)

更新：PR 已更新并仍然打开[https://github.com/spray/spray-json/pull/93](https://github.com/spray/spray-json/pull/93)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T18:08:38.740

我从未使用过喷雾剂，但这是我对可能起作用的猜测：

```
case class Car(numberOfWheels: Int, color: String) {
  def this(color: String) = this(4, color)
}

object Car {
  def apply(color: String) = new Car(color)
} 
```

也许现在`jsonFormat1(Car)`会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T14:36:29.327

我为同一问题找到的解决方法是实现我自己的 jsonFormat：

```
implicit object carFormat extends JsonFormat[Car] {
  def write(car: Car): JsObject = {
    val fields = List(
      ("numberOfWheels" -> JsNumber(car.numberOfWheels)),
      ("color" -> JsString(car.color))
    )
    JsObject(fields: _*)
  }

  def read(json: JsValue): Car = {
    val numberOfWheels = fromField[Option[Int]](json, "numberOfWheels")
    val color = fromField[String](json, "color")
    Car(numberOfWheels.getOrElse(4), color)
  }
} 
```

# java - 从文件执行 db 语句

> ID：15740926
> 
> 赞同：5
> 
> 时间：2013-04-01T09:32:03.820
> 
> 标签：java, sql, database, derby, javadb

我为我的应用程序使用嵌入式 Apache derby。我有一个名为**createdb.sql**的 SQL 脚本，它在数据库中创建所有表并用初始数据填充它，例如：

```
SET SCHEMA APP;

CREATE TABLE study (
    study_id    bigint  not null GENERATED ALWAYS AS IDENTITY  (START WITH 1, INCREMENT BY 1),
    name        varchar(50) not null,
    note         varchar(1000) DEFAULT '',      
    created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    deleted boolean DEFAULT false,
    UNIQUE(name),
    CONSTRAINT primary_key PRIMARY KEY (study_id)

);

INSERT INTO "APP"."STUDY" (NAME) VALUES ('default');

CREATE TABLE img (
    img_id bigint not null GENERATED ALWAYS AS IDENTITY  (START WITH 1, INCREMENT BY 1),
    filename varchar(200) not null,
    path        varchar(300) not null,
    flipped boolean DEFAULT false,
    type      smallint not null, 
    note varchar(1000) DEFAULT '',
    created TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (img_id)    
);

ALTER TABLE img ADD COLUMN dpix integer DEFAULT -1;
ALTER TABLE img ADD COLUMN dpiy integer DEFAULT -1; 
```

问题是如何加载此文件并使用 java 执行所有语句？我正在尝试不同的功能，但它们都不起作用。例如，

```
Statement s = conn.createStatement();
s.execute(sqlStr); 
```

或者

```
Statement s = conn.createStatement();
s.executeUpdate(sqlStr); 
```

其中**sqlStr**是一个字符串变量，其中包含**createdb.sql**文件的内容。如何执行脚本中包含的所有 SQL 命令，以便创建所有表并初始化它们？顺便说一句，SQL 脚本有效，因为我在 SQuirreL SQL 客户端中使用它来手动创建和初始化数据库。现在我想从我的应用程序中做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:45:40.767

下面的教程给出了如何运行 mysql 脚本（.sql 文件）。您要做的是将mysql db连接更改为derby db并运行。它会起作用的。

[http://www.mkyong.com/jdbc/how-to-run-a-mysql-script-using-java/](http://www.mkyong.com/jdbc/how-to-run-a-mysql-script-using-java/)

这是在不使用任何第三方库的情况下运行 MySQL 脚本的另一种方法。

[http://coreyhulen.wordpress.com/2010/04/07/run-a-sql-script-for-mysql-using-java/](http://coreyhulen.wordpress.com/2010/04/07/run-a-sql-script-for-mysql-using-java/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T15:59:03.823

对于 Derby，您通常使用 'ij' 工具来执行此操作：

[http://db.apache.org/derby/docs/10.9/tools/ttoolsij98878.html](http://db.apache.org/derby/docs/10.9/tools/ttoolsij98878.html)

如果您想通过自己的 Java 程序而不是命令行来执行此操作，您将需要研究 ij 的“运行脚本”功能；看到这个相关的问题：

[如何运行 sql 脚本以从 java 代码更新 Derby 模式？](https://stackoverflow.com/questions/6042711/how-to-run-sql-scripts-in-order-to-update-a-derby-schema-from-java-code)

# python - Python exec 和 __name__

> ID：15740932
> 
> 赞同：5
> 
> 时间：2013-04-01T09:32:34.293
> 
> 标签：python, scope, exec

当我运行时：

```
exec("print(__name__)") 
```

它打印`__main__`。

但是当我运行时：

```
exec("print __name__", {}) 
```

它打印`builtins`。

如何使第二个示例也打印`__main__`？

我试图实现的是运行一段代码，`exec()`以便从它的角度来看它看起来像是从命令行运行的。

我想用干净的范围调整代码，但第二个示例破坏了依赖于`if __name__ == "__main__"`. 如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T09:39:29.003

您可以[`imp.load_module`](http://docs.python.org/library/imp.html#imp.load_module)改用：

```
import imp

with open(mainfile) as src:
    imp.load_module('__main__', src, mainfile, (".py", "r", imp.PY_SOURCE)) 
```

这会将文件作为`__main__`模块导入并执行。

请注意，当类型设置为 时，它需要一个实际的文件对象`imp.PY_SOURCE`，因此如果您的源代码来自文件以外的其他地方，您需要创建一个临时文件才能工作。

否则，总是可以`__name__`手动设置：

```
>>> src = '''\
... if __name__ == '__main__': print('Main!')
... else: print('Damn', __name__)
... '''
>>> exec(src)
Main!
>>> exec(src, {})
Damn builtins
>>> exec(src, {'__name__':'__main__'})
Main! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:39:01.100

一种解决方案是在您的ution dict中`__name__`明确提供：`exec`

```
exec("print(__name__)", {'__name__': '__main__'}) 
```

# c# - 如何在 asp.net 中播放 (13 kb/s) .wav 文件

> ID：15740942
> 
> 赞同：1
> 
> 时间：2013-04-01T09:32:56.987
> 
> 标签：c#, asp.net, html

我无法在 aspx 页面中播放（.wav - 13 位）文件。我尝试过 Html5 播放器，在 html 中嵌入 mediaplayer，在 asp.net 中嵌入 SoundPlayer。我不想转换我的 wav 文件。有什么办法可以玩吗？谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:39:28.717

**背景：**

```
<embed src="bgsound.wav" hidden="true" autostart="true" loop="1"> 
```

**点击时：**

```
<a href="success.wav">Play Sound</a> 
```

[http://www.phon.ucl.ac.uk/home/mark/audio/play.htm](http://www.phon.ucl.ac.uk/home/mark/audio/play.htm) 你试过这个吗？

资料来源：[在浏览器中播放 wav 文件的最佳方式？](https://stackoverflow.com/questions/1175448/best-way-to-play-wav-files-in-the-browser)

# google-maps - GMaps InfoWindow 显示问题

> ID：15740943
> 
> 赞同：1
> 
> 时间：2013-04-01T09:33:05.937
> 
> 标签：google-maps, google-maps-api-3

我无法弄清楚为什么 Google Maps InfoWindow 无法正确显示。截图如下：

![在此处输入图像描述](https://i.stack.imgur.com/VTHjK.png)

知道可能是什么原因造成的吗？

这是代码（js）：

```
 /**
  * Basic Map
  */
$(document).ready(function(){
 var map = new GMaps({
    el: '#basic_map',
    lat: 51.5073346,
    lng: -0.1276831,
    zoom: 10,
    zoomControl : true,
    zoomControlOpt: {
        style : 'SMALL',
        position: 'TOP_LEFT'
    },
    panControl : false,
  });
map.addMarker({
    lat: 51.5073346,
    lng: -0.1276831,
    title: 'Big Ben',
    infoWindow: {
     content: 'Big Ben is the nickname for the great bell of the clock at the north end of the Palace of Westminster in London, and often extended to refer to the clock and the clock tower, officially named Elizabeth Tower.'
        }
      });   
}); 
```

CSS：

```
.map {
    display: block;
    width: 95%;
    height: 350px;
    margin: 0 auto;
    -moz-box-shadow: 0px 5px 20px #ccc;
    -webkit-box-shadow: 0px 5px 20px #CCC;
    box-shadow: 0px 5px 20px #CCC;
} 
```

html:

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>   
   <script type="text/javascript" src="https://raw.github.com/HPNeo/gmaps/master/gmaps.js"></script>
...
   <div id="basic_map" class="lg-map"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T10:42:33.337

[该问题是由http://dev.contractorshire.co.uk/assets/components/articles/themes/default/style.css](http://dev.contractorshire.co.uk/assets/components/articles/themes/default/style.css)中定义的以下格式造成的：

```
img {
    背景：#FAFAFA；
    边框：1px 实心#DCDCDC；
    填充：8px；
}

```

将此添加到您的 CSS 以覆盖地图内图像的背景设置：

```
#basic_map img{background:none} 
```

# java - Android-App消耗大量能量。套接字可能是原因

> ID：15740945
> 
> 赞同：2
> 
> 时间：2013-04-01T09:33:10.940
> 
> 标签：java, android, multithreading, sockets, energy

在我的应用程序中，我使用了一个数据报套接字、一个服务器套接字和几个套接字。当我的应用程序在我的 android 设备上运行时，手机会在某个区域发热，并且需要大量能量。我认为问题的原因是我的套接字。但我不确定哪种操作如此耗能：

创建新的 Sockets 是否需要花费很多精力：

```
Socket so = new Socket();
ss = new ServerSocket( port );
mSocket = new MulticastSocket( port ); 
```

如果我不再需要它，关闭服务器套接字和其他套接字是否重要。

连接会消耗能源吗？

```
so.connect( new InetSocketAddress(ip, port ), 1000); 
```

连接后连接是否需要很多能量？（长时间不发送数据时断开连接更好）大量的Sockets需要很多能量吗？

我也有几个线程：

除了我的主线程和三个 binderthreads，我还有三个：

第一个线程：在我的数据报套接字上侦听传入消息：

```
DatagramPacket packet = new DatagramPacket(buffer, buffer. length);
mSocket .receive(packet); 
```

第二个线程：监听多个套接字上的传入消息：

```
try {
      if (objectInputStreamList .size() != 0){
            if (counter >= objectInputStreamList .size()){
                 counter = 0;
             }
             ObjectInputStream ois = objectInputStreamList .get(counter);
             Object o = ois.readObject();
             if (o instanceof Message){
                 receive((Message) o);
             System.out .println("Message received in Server");
                 }
             }
     } catch (SocketTimeoutException soTOE){
        counter++;
     } 
```

第三个线程：通过互联网通过http请求将数据发送到服务器。

其中一根线需要很多能量吗？

即使 wifi 已关闭或 wifi 已打开但未连接到 wlan，该应用程序也需要大量能量。所以没有任何联系。

这些操作中哪些是耗能的？我能做些什么来减少能量？

谢谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T21:41:50.557

鉴于即使它不应该做任何事情也会运行很热，我怀疑您的一个线程正在自由运行而不是正确阻塞。如果没有完整的源代码，无法告诉您更多信息，但一些好的旧 printf 调试可能会派上用场。只需在每个 while 循环中放置不同的日志记录语句并运行程序。如果一个语句以惊人的速度填满你的日志，那么你就有了。

是的，您应该始终关闭不再需要的套接字。例如，如果您不关闭服务器套接字，那么它们的端口将保持被占用。最终系统将耗尽端口。（我可以想出许多其他原因，包括资源使用和优雅。整理东西甚至可能使问题变得明显。）

仅供参考，打开许多插座本身并不会消耗能源。网络活动会消耗一些能量（注意[空闲计时器](http://developer.android.com/training/efficient-downloads/efficient-network-access.html)！），但它不应该使您的设备的一部分变得非常热。

# android - 单击按钮时未调用 Activity 的 onTouchEvent()

> ID：15740948
> 
> 赞同：10
> 
> 时间：2013-04-01T09:33:19.657
> 
> 标签：android, button, touch

我想做一些 B.logic`Activity.onTouchEvent()`方法。它适用于`TextView`其他不可点击的视图。但是，它不会在单击 时被调用`Button`。但我也需要那个。

这是代码。

```
public class MainActivity extends Activity {
    private static final String TAG = MainActivity.class.getSimpleName();
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        findViewById(R.id.button1).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                Toast.makeText(MainActivity.this, "Oh shit!! click performed... :(", Toast.LENGTH_LONG).show();

            }
        });

    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        Log.d(TAG, "ssssssssssssssssssssssss:touch");
        return super.onTouchEvent(event);
    }

    public boolean dispatchTouchEvent(MotionEvent event) {
        int eventaction=event.getAction();

        switch(eventaction) {
        case MotionEvent.ACTION_MOVE:
            break;
        default:
            break;
        }

        return super.dispatchTouchEvent(event);
    }

} 
```

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T14:06:30.430

我根据需要使用了 dispatchTouchEvent(MotionEvent ev)。这是解决方案。

```
private boolean isInSideClicked = false;
public boolean dispatchTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        View content = findViewById(R.id.textView1);
        int[] contentLocation = new int[2];
        content.getLocationOnScreen(contentLocation);
        Rect rect = new Rect(contentLocation[0], 
                             contentLocation[1], 
                             contentLocation[0] + content.getWidth(), 
                             contentLocation[1] + content.getHeight());

        View frame = findViewById(R.id.editText1);
        int[] frameLocation = new int[2];
        frame.getLocationOnScreen(frameLocation);
        Rect framerect = new Rect(frameLocation[0], 
                                  frameLocation[1], 
                                  frameLocation[0] + frame.getWidth(), 
                                  frameLocation[1] + frame.getHeight());
        Log.d(TAG, "rect:  "+rect.bottom+" , "+rect.top+" , "+rect.left+" , "+rect.right);
        Log.d(TAG, "FrameRect:  "+framerect.bottom+" , "+framerect.top+" , "+framerect.left+" , "+framerect.right);
        Log.d(TAG, "x: "+event.getX()+"  y: "+event.getY());

        if ((rect.contains((int)event.getX(), (int)event.getY()) || framerect.contains((int)event.getX(), (int)event.getY()) ) ) {
            isInSideClicked = true;
        }
        if (isInSideClicked){
            return super.dispatchTouchEvent(event); 
        } else {
            return true;
        }
    } else if (event.getAction() == MotionEvent.ACTION_UP && isInSideClicked) {
        isInSideClicked = false;
        return super.dispatchTouchEvent(event);
    } else if (event.getAction() == MotionEvent.ACTION_MOVE && isInSideClicked) {
        return super.dispatchTouchEvent(event);
    } else {
        isInSideClicked = false;
        return true; 
    }
} 
```

以下是操作系统级别如何处理触摸事件的层次结构。

```
Activity.dispatchTouchEvent()
ViewGroup.dispatchTouchEvent()
View.dispatchTouchEvent()
View.onTouchEvent()
ViewGroup.onTouchEvent()
Activity.onTouchEvent() 
```

有了这个，我限制了不在所需布局/视图中的视图的触摸事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T10:08:46.303

您在哪里为按钮注册了 touchListener。您只为按钮实现了 clickListener。要为按钮调用 onTouchEvent()，您必须将按钮注册为： button.setOnTouchListener(this);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:45:04.210

```
 Please add below given 2 line in your xml hope it will help you its working fine for me.

    **android:focusable="false"
    android:focusableInTouchMode="false"**

     <Button
            android:id="@+id/button2"
            android:layout_width="80dp"
            android:layout_height="40dp"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/button1"
            android:layout_marginTop="3dp"
            android:background="#FFFFFF"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:text="Delete"
            android:textColor="#0099CC" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:58:28.883

请在您的 onCreate 方法中添加以下代码。

在此您可以获取按钮的向下、移动或向上事件。

当 Button up 事件调用时写下你的逻辑。

```
findViewById(R.id.btn).setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                Toast.makeText(Main.this,
                        "Oh shit!! click down performed... :(",
                        Toast.LENGTH_LONG).show();
                break;
            case MotionEvent.ACTION_MOVE:
                break;
            case MotionEvent.ACTION_UP:
                Toast.makeText(Main.this,
                        "Oh shit!! click up performed... :(",
                        Toast.LENGTH_LONG).show();
                break;
            default:
                break;
            }
            return true;
        }
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-19T18:33:35.387

我有同样的问题。这很容易解决，无需删除您的：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    Log.d(TAG, "ssssssssssssssssssssssss:touch");
    return super.onTouchEvent(event);
}; 
```

添加到按钮：

```
button.setOnTouchListener(new OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent event) {
        //YOUR CODE HERE
        if(v==button){
           //Your button has been pressed
        }
        else {  
          //Other View element has been pressed
             }
    }
} 
```

# dart - Pub 安装失败，[1] 类“_File”没有具有匹配参数的实例方法“readAsStringSync”

> ID：15740950
> 
> 赞同：0
> 
> 时间：2013-04-01T09:33:21.513
> 
> 标签：dart

我最近对 ​​Dart M3 (20602) 进行了更新，现在我遇到了 pubspec.yaml 的问题。当我尝试安装软件包时，我收到此消息错误：

> Pub 安装失败，[1] 类“_File”没有具有匹配参数的实例方法“readAsStringSync”。

感谢任何解决方法，在此先感谢。

# php - PHP中的404脚本到301？

> ID：15740951
> 
> 赞同：3
> 
> 时间：2013-04-01T09:33:24.867
> 
> 标签：php, redirect, http-status-code-404, http-status-code-301

我想对大量旧 URL 进行 301 处理。

我可以通过 PHP 在 404 脚本中执行此操作，还是会弄乱搜索引擎结果（他们认为找不到页面）？

我当前的.htaccess：

```
ErrorDocument 404 /404/ 
```

我的 404/index.php 脚本计划：

```
<?
switch (rtrim($_SERVER["REQUEST_URI"],"/")) {
    case "/blah/foo" :
        $redirect="/somewhere_else/";
        break;
    case "/over_here" :
        $redirect="/over_there/";
        break;
    case "/etc/etc/etc" :
        $redirect="/etc/and_so_on/";
        break;
}

if($redirect) {
    header ("HTTP/1.1 301 Moved Permanently");
    header ("Location: ".$redirect);
    exit();
}
?>
<html>
    <head>
        <title>404: Page not found.</title>
    </head>
    <body>
        <h1>404: Page not found.</h1>
    </body>
</html> 
```

所以，基本上，重定向不是问题，但我不希望搜索引擎认为这些页面“未找到”或将“少想”它们，或类似的东西......

这是合法的吗？谷歌会对此感到满意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:36:31.627

发送`Location`HTTP 标头会自动设置相应的状态。它已[记录在案](http://www.php.net/manual/en/function.header.php)，并且很容易使用 Firebug 或浏览器的等效工具进行测试。

# c++ - 编译器错误 C2653：不是类或命名空间名称

> ID：15740952
> 
> 赞同：24
> 
> 时间：2013-04-01T09:33:34.593
> 
> 标签：c++, visual-studio-2012

所以我最近在使用 Visual C++ 2012 时遇到了这个非常令人沮丧的问题。直到几个小时前，我还在编写代码，一切都按预期工作，直到我决定优化一些东西并删除了一些类。我修复了所有因此而弹出的错误，例如错误包含等。不幸的是，在此之后 VS 编译器发疯了。它开始给我错误，例如：

```
Error 14 error C2653: 'Class' : is not a class or namespace name 
```

甚至

```
Error 5 error C2143: syntax error : missing ';' before '}'
Error 4 error C2059: syntax error : '>' 
```

我检查了多次，一切都在正确的位置：包括所有标题，所有符号都放在它们应该在的位置。

据我了解，问题不在于我的代码，而在于编译器本身……我猜，Visual Studio 有时真的很烦人。无论如何，如果有人可以帮助我解决这个问题，我将不胜感激。

（顺便说一句，禁用预编译头文件*不起作用*）

代码的相关部分：

错误 14：

```
#include "PlayerEntity.h"
PlayerEntity::PlayerEntity(void) {} // This line causes the error 
```

错误 5：

```
class GameScreen : public BaseScreen
{
public:
    ...
private:
    ...
}; // This line causes the error 
```

错误 4：

```
private:
     std::vector<BaseEntity*> _EntityList; // This line causes the error 
```

整个 PlayerEntity.h 文件：

```
#ifndef PENTITY_H
#define PENTITY_H

#include "BaseEntity.h"

class PlayerEntity : public BaseEntity
{
public:
    PlayerEntity(void);
    PlayerEntity(float, float);
    virtual ~PlayerEntity(void);

    void render(sf::RenderWindow&);
    void update();
private:
    void init();
};

#endif 
```

整个 GameScreen.h 文件：

```
#ifndef GSCREEN_H
#define GSCREEN_H

#include "BaseScreen.h"
#include "BaseEntity.h"
#include "PlayerEntity.h"

class GameScreen : public BaseScreen
{
public:
    GameScreen(sf::Vector2u&);
    virtual ~GameScreen(void);

    void start();
    void stop();

    void render(sf::RenderWindow&);
    void update(void);

    void addEntity(BaseEntity*);
    void destoryEntity(int id);
private:
    std::vector<BaseEntity*> _EntityList;
    sf::Vector2u _ScreenDimensions;
};

#endif 
```

整个 BaseEntity.h 文件：

```
#ifndef BSENTITY_H
#define BSENTITY_H

#include "Input.h"
#include <SFML/Graphics.hpp>

class BaseEntity
{
public:
    BaseEntity(void);
    virtual ~BaseEntity(void);

    sf::Vector2f position;

    virtual void update(void);
    virtual void render(sf::RenderWindow&);
    void compare(BaseEntity*);
protected:
    sf::Texture *_EntityTexture;
    sf::Sprite  _EntitySprite;

    bool _isAlive;
    int  _id; 

    virtual void init();
};

#endif 
```

整个 Input.h 文件：

```
#ifndef INPUT_H
#define INPUT_H

#include "ScreenSystem.h"
#include <SFML/Window.hpp>

class Input
{
public:
    Input(void);
    Input(sf::RenderWindow*);
    virtual ~Input(void);

    static bool keyPressed(int);
    static bool keyReleased(int);

    static bool mouseHeld(int);
    static bool mouseReleased(int);
private:
    static sf::RenderWindow *_Window;
};

#endif 
```

整个 ScreenSystem.h 文件：

```
#ifndef GHANDLER_H
#define GHANDLER_H

#include "BaseScreen.h"
#include "MenuScreen.h"
#include "GameScreen.h"
#include <SFML/Window.hpp>

class ScreenSystem
{
public:
    ScreenSystem(void);
    ScreenSystem(sf::RenderWindow*);
    virtual ~ScreenSystem(void);

    BaseScreen *getCurrentScreen(void);
    void setScreen(int);
private:
    int _currentScreenID;

    std::vector<BaseScreen*> _Screens;
    sf::RenderWindow *_Window;
};

#endif 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-04-01T10:21:06.710

您的标头中有循环依赖项。`BaseEntity.h`包括`Input.h`，其中包括`ScreenSystem.h`，其中包括`GameScreen.h`，而后者又重新包括`BaseEntity.h`。这会导致类名在声明之前出现，从而导致编译失败。

为避免这种情况，请不要不必要地包含标题。例如，不要包含`Input.h`from `BaseEntity.h`，因为它根本不需要；并且不包括`BaseScreen.h`from`ScreenSystem.h`因为只需要一个声明`class BaseScreen;`，而不是完整的类定义。

此外，请检查您是否有重复的标头保护。其中一些与标题名称不匹配（例如`GHANDLER_H`for `ScreenSystem.h`），这让我认为它们可能是从其他标题中意外复制的。最后，不要`_EntitySprite`为自己的符号使用保留名称；为简单起见，请避免使用前导或双下划线。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T10:12:48.090

您是否将错误消息复制到您的问题中，或者您是否重新输入了它们？因为错误 14 具有大写 C 的“类”，这几乎肯定是不正确的。

此外，您应该在头文件中使用尽可能少的包含指令。例如，GameScreen 不使用 PlayerEntity，因此您可以删除该包含，并且 BaseEntity 仅通过指针使用，因此您可以替换

```
#include "BaseEntity.h" 
```

带有前向声明

```
class BaseEntity; 
```

# javascript - HTML5 - 构建具有地图区域突出显示的 iPad 地址栏放大镜

> ID：15740954
> 
> 赞同：0
> 
> 时间：2013-04-01T09:33:38.453
> 
> 标签：javascript, html, css, mobile-safari

我正在尝试构建一个示例来突出显示 iPad 的 html 页面上的多个图像地图区域。这个想法类似于您在点击并按住移动 safari 地址栏时注意到的放大镜功能。您可以平移放大镜以转到特定角色。我正在尝试利用相同的用户体验来突出显示图像映射“多边形”区域。当我平移放大镜时，我想通过突出显示它们并使它们处于活动状态来滚动浏览这些区域。

我正在考虑使用 Jquery Maphighlight 插件以及 CSS/JS 放大镜示例 [http://persistent.info/files/20040508.magnifier/](http://persistent.info/files/20040508.magnifier/) [http://davidlynch.org/projects/maphilight/docs/](http://davidlynch.org/projects/maphilight/docs/)

我卡住的地方是区域之间的实际滚动并自动突出显示它们。

我想知道是否有人做过类似于我想要实现的事情。

干杯! 萨米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:41:13.010

我无法完全概念化您想要什么，但这无论如何都可能有所帮助。

在你的css和标签中使用伪类：active

在这个演示中，我只是简单地使用 CSS 变换来模拟缩放，但它可以替换为任何你想要的。我认为您会比任何 javascript 更快地找到纯 css 选项。

[http://jsfiddle.net/thurstanh/QEudm/5/](http://jsfiddle.net/thurstanh/QEudm/5/)

```
<body ontouchstart=""> 
```

css img:active { -webkit-transform:scale(2,2); }

# python - 卡在 Flask 教程第 3 步

> ID：15740964
> 
> 赞同：12
> 
> 时间：2013-04-01T09:34:15.493
> 
> 标签：python, sqlite, python-2.7, flask

遵循 Flask 教程，运行 Win 7、Python 2.7.3、virtualenv，我被困在第 3 步：创建数据库[http://flask.pocoo.org/docs/tutorial/dbinit/#tutorial-dbinit](http://flask.pocoo.org/docs/tutorial/dbinit/#tutorial-dbinit)

> 这样的模式可以通过将 schema.sql 文件传递​​到 sqlite3 命令来创建，如下所示：
> 
> ```
> sqlite3 /tmp/flaskr.db < schema.sql 
> ```

如何运行这个命令，因为 CMD <venv> 返回：

> "sqlite3" 不是内部或外部命令、可运行程序或批处理文件。

这一步有必要吗？

文件夹项目，2 个文件 schema.sql 和 flaskr.py。

**架构.sql**

```
drop table if exists entries;
create table entries (
  id integer primary key autoincrement,
  title string not null,
  text string not null
); 
```

**烧瓶器.py**

```
# all the imports
import sqlite3
from flask import Flask, request, session, g, redirect, url_for, \
abort, render_template, flash
from contextlib import closing
# configuration
DATABASE = '/tmp/flaskr.db'
DEBUG = True
SECRET_KEY = 'development key'
USERNAME = 'admin'
PASSWORD = 'default'

# create our little application :)
app = Flask(__name__)
app.config.from_object(__name__)
app.config.from_envvar('FLASKR_SETTINGS', silent=True)

def connect_db():
    return sqlite3.connect(app.config['DATABASE'])

def init_db():
    with closing(connect_db()) as db:
        with app.open_resource('schema.sql') as f:
            db.cursor().executescript(f.read())
        db.commit()

if __name__ == '__main__':
    app.run() 
```

**`< venv > python`**

```
>>> from flaskr import init_db
>>> init_db()
Trackeback <most recent call last>:
File "<stdin>", line 1, in <module>
File "flaskr.py", line 24, in init_db
  with closing (connect_db()) as db: 
File "flaskr.py", line 21, in connect_db
return sqlite3.connect(app.config['DATABASE'])
sqlite3.OperationalError: unable to open database. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T13:45:26.253

您对 Windows 和 UNIX 文件系统感到困惑。

找出`sqllite.exe`文件在计算机上的位置。可以说它在`C:\sqllite`. 然后，您还需要确定将在何处创建数据库文件。`/tmp/flaskr.db`用于 UNIX 文件系统。在 Windows 上，您应该提供确切的路径或在您当前的工作目录中。可以说是`C:\flasktutorial`。

为了安全起见，您可能需要先创建一个空白`flaskr.db`文件。

```
Open a notepad and create the blank file at `C:\flasktutorial\flaskr.db` 
```

现在你可以运行：

```
C:\sqllite\sqllite.exe C:\flasktutorial\flaskr.db < schema.sql 
```

还要确保在您的 flaskr.py 文件中，将 DATABASE 更改为：

```
DATABASE = 'C:\flasktutorial\flaskr.db' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-29T02:19:08.477

您是否激活了 virtualenv 并安装了烧瓶？

默认情况下，flask 应该有 sqlite3。我得到了以下错误：

```
 File "flaskr.py", line 26, in connect_db
  return sqlite3.connect(app.config['DATABASE'])
sqlite3.OperationalError: unable to open database file` 
```

要解决这个问题，我必须执行以下操作（在 Windows 中）：

1.  更改`DATABASE = '/tmp/flaskr.db'`为`DATABASE = '.\\tmp\\flaskr.db'`
2.  在当前文件夹中创建 tmp 文件夹（flaskr）
3.  在 tmp 中创建一个空的 flaskr.db 文件

之后它对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T09:57:04.110

从错误日志中可以看出，连接数据库时出现错误

> sqlite3.OperationalError：无法打开数据库。

由于这一步对你来说失败了，

> sqlite3 /tmp/flaskr.db < schema.sql

您可以很容易地解释**这一步是必要的**。现在要解决这个错误，只需安装 sqlite3，在 ubuntu 中，您可以安装 sqlite3，

> apt-get 安装 sqlite3

安装后，您的程序将按预期正常工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-17T20:54:46.007

我不确定这些提示是否直接适用于 PO，但它们让我来到了这里，所以也许会有所帮助。

请务必检查指定从命令行运行`README`的目录中的文件。`flaskr``flask --app=flaskr initdb`

如果返回`AttributeError: 'Flask' object has no attribute 'cli'`，可能是由于`click`未安装。

如果命令返回`flask: command not found`，则可能是由于安装了较旧版本的 Flash，这就是原因`pip install flask`。

截至今天，此命令`pip install https://github.com/mitsuhiko/flask/tarball/master`将安装最新版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-10T05:05:37.660

仅适用于 linux 用户：

[首先从这里](https://www.sqlite.org/download.html)安装 Sqlite3 。

安装后你需要创建一个名为**flaskr.db**的文件，这个文件的位置是*/myproject/venv/bin/flaskr/tmp*。

下一步是运行命令

```
sqlite3 /home/ddserver/myproject/venv/bin/flaskr/tmp/flaskr.db<schema.sql 
```

我从家里拿了文件地址。

下一步是启动python shell，运行这段代码

```
>>> from flaskr import init_db
>>> init_db() 
```

就是这样。

# cloud - 使用 curl 的 RackSpace CreateImage API 不起作用

> ID：15740967
> 
> 赞同：0
> 
> 时间：2013-04-01T09:34:21.380
> 
> 标签：cloud, rackspace-cloud, rackspace

每当我尝试使用 curl 从给定的 api 创建图像时-：

> curl -i -X POST [https://lon.servers.api.rackspacecloud.com/v1.1/xxxxxxxxx/servers/xxxxxxxxx-xxxxxxxxx-xxxxxxxxx-xxxxxxxxx-xxxxxxxxx/createImage](https://lon.servers.api.rackspacecloud.com/v1.1/xxxxxxxxx/servers/xxxxxxxxx-xxxxxxxxx-xxxxxxxxx-xxxxxxxxx-xxxxxxxxx/createImage) -H "X-Auth-Token: xxxxxxxxx- xxxxxxxxx-xxxxxxxxx-xxxxxxxxx" -d '{"createImage" : {"name" : "test_image"}}' -H "Content-type: application/json"

它向我抛出错误-：

> {"itemNotFound":{"message":"发生意外故障。","details":"javax.ws.rs.WebApplicationException","code":404}}* 关闭连接 #0

我需要帮助，如何使用 curl 创建服务器映像。但是所有其他机架空间服务器 api 对我来说都很好。

我尝试使用 1.0、1.1 和 2.0 版本的相同 api，但没有成功。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:42:00.150

感谢戴夫·库尔特。正确的api调用是-：

> curl -X POST -H "X-Auth-Token: AUTH-TOKEN" -H "Content-type: application/json" -d '{"createImage" : {"name" : "test"}}' [https:// /lon.servers.api.rackspacecloud.com/v2/ACCOUNT-ID/servers/SERVER-UUID/action](https://lon.servers.api.rackspacecloud.com/v2/ACCOUNT-ID/servers/SERVER-UUID/action)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T03:23:15.830

这个问题在 ServerFault ( [https://serverfault.com/questions/495087/rackspace-createimage-api-using-curl-is-not-working](https://serverfault.com/questions/495087/rackspace-createimage-api-using-curl-is-not-working) ) 得到了回答。

总而言之，您需要将要发布的 URL 更改为在 UUID 之后使用 /action，而不是 /createImage。示例 cURL 命令的结构如下：

```
curl -X POST -H "X-Auth-Token: AUTH-TOKEN" -H "Content-type: application/json" -d '{"createImage" : {"name" : "test"}}' https://lon.servers.api.rackspacecloud.com/v2/ACCOUNT-ID/servers/SERVER-UUID/action 
```

# haskell - 在Haskell中设计一个通用的滑动窗口程序，需要type类族吗？

> ID：15740970
> 
> 赞同：6
> 
> 时间：2013-04-01T09:34:29.967
> 
> 标签：haskell

我试图在元素列表上实现通用滑动窗口算法。一个常见的用例是在所有长度为 5 的窗口中找到最大的数字。或者它可以计算窗口中有多少元素对于某个谓词是正确的。

滑动窗口从左到右，并保持一些数据结构。一个元素落在它调用`remove`数据结构的窗口之外。如果一个新元素落在​​窗口内，我们`add`将该元素添加到数据结构中。它还有一个函数`aggregate`，可以计算数据结构上的一些东西。

要使用的简单数据结构是出队，但可能有人希望将其他类型的数据结构用于特殊用例。

我最初的想法是有一个看起来像这样的长函数

```
runSlidingWindow :: (c->(Int,a)->c)  -- add
                 -> (c->(Int,a)->c)  -- remove
                 -> (c->b)           -- aggregate
                 -> c                -- identity
                 -> Int              -- width
                 -> [(Int,a)]        -- input
                 -> [(Int,b)] 
```

但我想知道是否有一些 Haskell 方法，所以我们可以定义一些类`Window a b c`，这样我们就可以将函数重写为

```
runSlidingWindow :: (Window a b c=>WindowInstance a b c)
                 -> WindowInstance a b c
                 -> [(Int,a)]
                 -> [(Int,b)]

runSlidingWindow window input 
```

当然我不认为上面是有效的 Haskell 代码。我们想强制任何类型的实例`Window a b c`具有以下形式的功能

```
add :: (Window a b c=>WindowInstance a b c)
    -> WindowInstance a b c
    -> a
    -> WindowInstance a b c 
remove :: (Window a b c=>WindowInstance a b c)
       -> WindowInstance a b c
       -> a
       -> WindowInstance a b c 
aggregate :: (Window a b c=>WindowInstance a b c)
          -> WindowInstance a b c
          -> b 
```

所以拥有这个类型类`Window a b c`很重要，因为这允许其他人实现他们自己的滑动窗口。

我不知道如何在 Haskell 中做到这一点。我认为使用类型类家族这是可能的吗？我想看一个例子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T10:29:53.533

每当您认为“我需要一个类型类”时，请停下来考虑一下函数记录是否可行。

```
data Window a b c = Window {
    add       :: c -> (Int, a) -> c,
    remove    :: c -> (Int, a) -> c,
    aggregate :: c -> b,
    identity  :: c,
    width     :: Int}

runSlidingWindow :: Window a b c -> [(Int, a)] -> [(Int, b)] 
```

甚至，隐藏实现类型：

```
{-# LANGUAGE ExistentialQuantification #-}

data Window a b = forall c. Window {
    add       :: c -> (Int, a) -> c,
    remove    :: c -> (Int, a) -> c,
    aggregate :: c -> b,
    identity  :: c,
    width     :: Int}

runSlidingWindow :: Window a b -> [(Int, a)] -> [(Int, b)] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T13:43:54.787

当您合理地期望类型和实现之间存在（接近）一一对应时，最好使用类型类。虽然`newtype`包装器使人们能够为给定类型公开多个实例，但过于频繁地依赖这一点表明该类的语义未指定。许多 Haskeller 会为类型类提供更正式的规则以更好地指定其语义（也就是说，模棱两可的情况仍然存在：例如and的`Applicative`实例）。`[]``ZipList`

为了进一步扩展类型类和函数记录的等价性，当您编写类型类声明时，

```
class MyNum t where
    add    :: t -> t -> t
    mul    :: t -> t -> t

instance MyNum Int where
    add = (+)
    mul = (*) 
```

您可以等效地将其写为函数的记录（字典），

```
data MyNumDict t = MyNumDict { add :: t -> t -> t
                             , mul :: t -> t -> t
                             }

intDict :: MyNumDict Int
intDict = MyNumDict { add = (+)
                    , mul = (*)
                    } 
```

当一个人去使用类型类时，真正的区别就出现了。在类型类的情况下，您可以隐式访问字典，

```
f :: MyNum t => t -> t -> t
f a b = mul a (add a b) 
```

而在功能记录的情况下，必须明确提供字典，

```
f :: MyNumDict t -> t -> t -> t
f dict a b = myMul a (myAdd a b)
  where myMul = mul dict
        myAdd = add dict 
```

类型类提供的字典的隐式传递使得多态代码可以说更容易使用。话虽如此，它们很容易被滥用。

我还应该说，类型类的作用不再局限于字典中的多态性。例如，最近的类型系统扩展，例如`TypeFamilies`使用类型类作为实现基本类型级功能的一种手段。

# amazon-cloudfront - 云锋日志时间

> ID：15740973
> 
> 赞同：1
> 
> 时间：2013-04-01T09:34:43.250
> 
> 标签：amazon-cloudfront

我尝试从 S3 的存储桶中收集云前端日志并将其放入数据库。这些文件中日志的日期时间确实有问题。它是否以标准时间的时间记录？还是x-edge-location的时间？如果我想将此修复为日本的标准时间，我应该按 x-edge-location 计算吗？

我还有一个问题。写在 S3 存储桶上的日志会延迟吗？如果我使用“s3cmd ls s3://mys3bucket/”观察我的 s3bucket。日志的计数在 2 小时内发生变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T01:01:43.327

[https://forums.aws.amazon.com/thread.jspa?threadID=30346](https://forums.aws.amazon.com/thread.jspa?threadID=30346)

> 日期和小时根据 GMT 时区指定。我找到了这个答案。

[http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/AccessLogs.html](http://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/AccessLogs.html)

> CloudFront 在收到相应请求后 24 小时内保存日志文件。

# java - 如何确保一个类只能由 Spring 实例化？

> ID：15740975
> 
> 赞同：0
> 
> 时间：2013-04-01T09:34:50.803
> 
> 标签：java, spring, dependency-injection, autowired

我正在重构一个遗留 Java 应用程序以使用 Spring。

这涉及将应用程序类声明为 Spring bean，然后将所有出现的 替换`new`为`context.getBean`或`DI`。

我正在以某些类成为单例的方式重写应用程序逻辑。但是，由于它们是在其他位置使用 new 实例化的，因此会存在多个副本，这会打乱业务逻辑。我想确保应用程序在尝试自行实例化对象时显式失败，而不是以不可预测的方式运行和行为不端。（我不确定重构是否覆盖了 100% 的应用程序，但仍有可能在某个角落潜伏新的）

确保类只能由 Spring 容器实例化的最佳方法是什么？（我希望避免为每个班级写一个工厂）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T09:44:04.350

从你的问题

> 在这个特定场景中，应该只存在从上下文中获取的对象的一个​​副本，多个副本会弄乱业务逻辑。

您可以在 spring 的 xml 文件中的 bean 定义中创建经典的单例并将`getInstance()`方法用作工厂方法：

```
<bean id="myBean" class="MyClass" factory-method="getInstance"/> 
```

将您的构造函数设为私有，并且没有人可以调用它。此外，如果旧代码的某些部分`new`用于实例化您的类，您将在编译时看到错误。

# gwt - Grails + SmartGWT

> ID：15740976
> 
> 赞同：1
> 
> 时间：2013-04-01T09:34:59.327
> 
> 标签：gwt, grails, smartgwt

试图让 Grails + smartgwt 一起工作。

设置：Grails 2.2.1（同时安装，gwt + smartgwt 插件）SmartGWT 3.1 GWT 2.5

玩了几个小时后，tomcat终于启动了。（创建应用程序并编译模块）

项目位于：zuhuse:8080/gwt3/

默认模块是 foo.bar 默认 index.gsp 看起来不错

```
<script>
var isomorphicDir = "${createLinkTo(dir: 'gwt/foo.bar.fooBar/sc/')}";
</script>

<!--                                           -->
<!-- This script loads your compiled module.   -->
<!-- If you add any GWT meta tags, they must   -->
<!-- be added before this line.                -->
<!--                                           -->
<script type="text/javascript" src="${createLinkTo(dir: 'gwt/foo.bar.foobar', file:   'foo.bar.foobar.nocache.js')}"></script> 
```

发现 nocache.js 在编译后的“nocache.js”中有一个参考

```
zuhause:8080/gwt3/static/gwt/foo.bar.foobar/sc/modules/ISC_Core.js 404 (Not Found) 
```

对“静态”的路径引用是我不知道它的配置位置。

模块 xml 如下所示：

```
<module>
<!-- Inherit the core Web Toolkit stuff.                  -->
<inherits name="com.google.gwt.user.User"/>

<!-- Smart GWT -->
<inherits name="com.smartgwt.SmartGwt"/>
<inherits name="com.smartgwt.tools.SmartGwtTools"/>

<!-- Specify the module entry point class.                   -->
<entry-point class="foo.bar.client.foobar"/> 
```

我已经扫描了我的完整项目，但从未在其中一个配置文件中定义“静态”。

任何想法 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:52:01.320

由[资源](http://grails.org/plugin/resources)插件`static`添加。

# c - 无法理解 Glib 错误

> ID：15740977
> 
> 赞同：2
> 
> 时间：2013-04-01T09:34:59.947
> 
> 标签：c, glib

我正在使用 glib 2.0 框架。一段时间后，我的 C 程序输出此错误：

> GLib-CRITICAL **：g_hash_table_foreach_remove_or_steal：断言 `version == hash_table->version' 失败

谁能告诉我这通常意味着什么？谷歌并没有真正帮助太多。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T09:38:29.397

使用您提供的文本进行的 Google 搜索生成：

> 这通常表明您在迭代同一个哈希表时执行了 g_hash_table_remove()（或 g_hash_table_insert()、g_hash_table_replace() 或类似方法）。我没有发现这可能发生在哪里。

取自[这里](http://lists.freedesktop.org/archives/telepathy-bugs/2012-September/020133.html)。

希望您现在有足够的信息来查找代码中的错误。

# vb.net - 我如何做到这一点，以便当变量在“Form1”中为真时，它在“Form2”中执行某些操作？

> ID：15740979
> 
> 赞同：1
> 
> 时间：2013-04-01T09:35:12.003
> 
> 标签：vb.net, visual-studio

所以，我试图做到这一点，当用户单击登录表单上的登录按钮时，它会将一个变量设置为 true，然后它会在主表单上激活某些东西。将放置在表格 2 中的一些伪代码：

```
If Form1.button = clicked Then
do something
end if 
```

谢谢你的帮助！

顺便说一句，我是一个完整的 vb.net 菜鸟。对不起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T09:37:44.113

按钮点击事件写在下面

```
If Form1.button = clicked Then
  Dim myForm As New Form2
  if LoggedIn = True then
     myForm.UserGroupBox.visible = true
     me.close
     myForm.Show()
  end if

End if 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T18:39:51.833

在解决方案资源管理器中双击您的应用程序名称，然后转到设置并使用名称创建一个新名称：clicked 和值：0，然后在 form1 中的 button1 上写入

```
 Private Sub Button5_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button5.Click
    My.Settings.clicked = "1"
    form1.show
    me.hide
End Sub 
```

在表格上是你想要的东西

```
if my.settings.clicked = "1" then
'Do Something what you want here
my.settings.clicked = "0"
end if
end sub 
```

这段代码的作用是：

当您单击 then 按钮时，如果给 my.settings.clickde 一个值 1 = true

当另一个表单加载时，它会检查 value = 1 if value = 1 然后它单击按钮，然后将单击的值更改回 0，这样它就不会永远重复

希望这对您有所帮助，如果它有助于单击我的帖子上的 button_up，请不要忘记

# php - 上传数组内的图像不起作用

> ID：15740982
> 
> 赞同：0
> 
> 时间：2013-04-01T09:35:26.090
> 
> 标签：php, image, file-upload

我想上传多张图片。`img[]`包含所有要上传的图像文件。这些值已成功插入到内爆的数据库中`commas(,)`。但是图像没有上传到名为 . 的指定文件夹`photos`中。

```
<input type="file" name="img[]" id="img[]" />

$n=$_FILES["img"]["name"];
$t=$_FILES["img"]["tmp_name"];
$image=implode(",",$n);

             $ex=explode(",",$image);
         $i=0;
         foreach($ex as $item)
         {

             move_uploaded_file($_FILES["img[$i]"]["tmp_name"],"photos/$ex[$i]");

             $i++;
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:46:43.967

我认为您的正确代码应该是

```
<input type="file" name="img[]" id="img[]" />

$n=$_FILES["img"]["name"];
$t=$_FILES["img"]["tmp_name"];
$image=implode(",",$n);

 // no need to explode here

     foreach($n as $key=>$item)
     {
         //name will be there in $items 
        // use temp_name of same file for which you are using name using $_FILES["img"]["tmp_name"][$key]
         move_uploaded_file($_FILES["img"]["tmp_name"][$key],"photos/$item");
     } 
```

# vb6 - 关于 VB6 - 环境变量

> ID：15740985
> 
> 赞同：-1
> 
> 时间：2013-04-01T09:35:55.810
> 
> 标签：vb6

关于 VB6：我想使用环境变量调用 1 个批处理文件，我正在尝试以下代码，但我认为缺少一些东西，为什么它不起作用：

代码 ：

```
Dim sPathUser As String
sPathUser = Environ$("windir")
MsgBox sPathUser
Shell "sPathUser\test.bat"           ---> Here i m calling Batch file 
```

那么，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:41:01.777

采用`Shell sPathUser & "\test.bat"`

# jquery - jquery - 为什么我们用选择标签写 .attr('selected','selected')

> ID：15740986
> 
> 赞同：4
> 
> 时间：2013-04-01T09:36:08.187
> 
> 标签：jquery, select, attr, selected

为什么我们`.attr('selected','selected')`用选择标签写

例如：

```
$('#countryList option').filter(function () {
 return ($(this).text() == findText); }).attr('selected','selected');
}); 
```

它的真正含义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T09:42:04.620

的解释 `.attr('selected','selected')`。

里面的第一个参数`.attr`表示`attribute`您要指向`value`的属性，而第二个参数集作为第一个参数传递。

如果我们有`.attr('selected')`那么它只是返回`selected`属性的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:37:28.880

> 为什么我们要写 .attr('selected','selected')

这就是 jQuery 允许选择的方式，如果要设置 select 的选定项，可以使用 val() 设置选定选项

```
$('#countryList').val(5); // it will set the selected attribute for option having value 5 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T09:40:24.113

`.attr()`jquery 方法用于设置选择器的属性。因此，在您的情况下，此功能用于将文本显示为下拉列表中的选定内容。

[请参阅此处的教程](http://api.jquery.com/attr/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T09:40:48.567

通常，大多数浏览器都会尊重 selected 属性，因为它的存在/不存在而不管其值如何。根据规范，这是一个布尔属性（通过 javascript 设置时），但在 HTML 标记中，此属性通常由其存在/不存在表示。这意味着该元素默认是下拉菜单中可见的选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T09:56:05.217

看看发生了什么：

```
$('#countryList option').filter(function () {
   return ($(this).text() == findText); 
}).attr('selected','selected');
}); //<---------this is extra 
```

好的，但问题是**我们****为什么要写标签`.attr('selected','selected')``select`**：

如果您可以看到您没有将选定的属性设置为`<select>`但`<option>`它包含。

您的代码会将 selected 属性设置为`option`包含文本的属性，该属性相当于`findText`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T10:11:59.883

`selected`是 的布尔属性`<option>`；以 HTML 属性表示，它的值要么为空（或未指定），要么等于属性名称本身来指示`true`（按照约定）。

```
$('#countryList option').filter(function () {
   return ($(this).text() == findText); 
}).attr('selected','selected'); 
```

该代码`selected`为第一个匹配的选项元素设置属性。代码实际上有几个问题：

1.  无论过滤结果如何，都会调用该`.attr()`函数。
2.  `selected`属性严格来说不是属性而是属性。

可以这样重写：

```
$('#countryList option').each(function () {
    if (this.text == findText) {
        this.selected = true;
        return false; // stop searching after we find the first match
    }
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T01:42:01.703

在任何编程语言中，当您想要设置属性时，您必须分配一个引用该属性的值。所以 jquery 做同样的事情。

# sql - 更改表然后在单个语句中更新

> ID：15740997
> 
> 赞同：19
> 
> 时间：2013-04-01T09:36:58.330
> 
> 标签：sql, sql-server, database, etl, talend

我有一个需要更改（添加 2 列）然后更新同一个表的要求。

这是我尝试的查询：

```
ALTER TABLE A
ADD c1 int,c2 varchar(10)

UPDATE  A set c1 = 23, c2 = 'ZZXX' 
```

我需要一次运行上述两个查询。

我正在使用 Talend ETL 工具，其中我们有一个组件 tMssqlrow，它允许我们运行多个查询（我在单个组件中使用 10 到 15 个更新查询）。

但是上面的查询不起作用。

我在数据库 Microsoft SQL 中进行了测试。我收到以下错误：

> 消息 207，第 16 层，状态 1，第 5 行
> 
> 列名“c1”无效。消息 207,
> 
> 16 级，状态 1，5 号线
> 
> 列名“c2”无效。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-01T10:03:55.347

您不能在单个语句（或批处理）中*完全*执行此操作，而且您使用的工具似乎不支持`GO`作为批处理分隔符。

不过，您可以使用`EXEC`它在子批次中运行它。

```
ALTER TABLE A
  ADD c1 INT, c2 VARCHAR(10);

EXEC('
UPDATE A
SET    c1 = 23,
       c2 = ''ZZXX'';
    '); 
```

注意：查询中的所有单引号都需要像上面那样加倍以在字符串文字中转义它们。

或者，您可以借助一些默认约束在单个语句中获得类似的结果。

```
ALTER TABLE A
  ADD c1 INT NULL CONSTRAINT DF_A_c1 DEFAULT 23 WITH VALUES, 
     c2 VARCHAR(10) CONSTRAINT DF_A_c2 NULL DEFAULT 'ZZXX' WITH VALUES; 
```

但这与原始查询并不完全相同，因为默认约束将被留下并可能需要删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T09:46:48.750

在 2 个查询之间使用 GO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T10:04:19.877

试试这个

```
ALTER TABLE A ADD c1 int,c2 varchar(10)

GO

UPDATE  A set c1 = 23, c2 = 'ZZXX'

GO 
```