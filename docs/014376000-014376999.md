# StackOverflow 问答 14376000-14376999

# c# - 找不到请求的 .Net Framework 数据提供程序。它可能没有安装。（informix）

> ID：14376003
> 
> 赞同：2
> 
> 时间：2013-01-17T09:37:04.150
> 
> 标签：c#, asp.net, web-config, informix, dbproviderfactories

我有一个旧应用程序，经过很长时间尝试测试它。我得到以下异常：

```
Unable to find the requested .Net Framework Data Provider.  It may not be installed. 
```

我的代码：

```
 public DBConnection(string ConnectionString)
        {
            this.providerFactory = DbProviderFactories.GetFactory("IBM.Data.Informix");//Exception here
            this.connection = new IfxConnection();
            if (string.IsNullOrEmpty(ConnectionString))
            {
                this.connection.ConnectionString = ConfigurationManager.ConnectionStrings["r_informix"].ToString();
            }
            else
            {
                this.connection.ConnectionString = ConfigurationManager.ConnectionStrings["r_informix"].ToString();
            }
            command = this.connection.CreateCommand();
        } 
```

* * *

我尝试在[这里执行以下解决方案](http://zeeshanumardotnet.blogspot.com/2011/11/unable-to-find-requested-net-framework.html)

```
</runtime>
 <system.data>
    <DbProviderFactories>
      <add name="IBM.Data.Informix"
              invariant="IBM.Data.Informix.Client"
              description="Informix Data Provider for .NET"
              type="IBM.Data.Informix,
                  IBM.Data.Informix,
                  Version=3.0.0.2,
                  Culture=Neutral,
                  PublicKeyToken=7c307b91aa13d208" />
    </DbProviderFactories>
  </system.data>
but In vain ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:49:12.507

根据[GetFactory 函数的 MSDN 文档，](http://msdn.microsoft.com/en-us/library/h508h681.aspx)提供的参数应与提供者工厂的不变名称匹配，该名称在您的配置文件中设置为 IBM.Data.Informix.Client，但您传递的是 IBM.Data.Informix（不带 .客户）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T19:30:31.560

我发现了这个：[如何注册 .NET 提供程序](http://www-01.ibm.com/support/docview.wss?uid=swg21429586)。我希望它有所帮助。

您也可以尝试在 GAC 中手动安装 IBM.Data.Informix 和 IBM.Data.DB2。

# joomla2.5 - 如何在 Joomla 2.5 中添加新的模块位置？

> ID：14376021
> 
> 赞同：1
> 
> 时间：2013-01-17T09:38:08.743
> 
> 标签：joomla2.5

如何在 Joomla 2.5 中添加新的模块位置？

我想在一个模板中添加一个新的模块位置，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:32:22.123

要在模板中添加新模块位置，您需要在 中添加位置，`templateDetails.xml`然后在`index.php`添加要显示模块的位置。

然后在模块管理器中选择您为该模块添加的位置并检查它。

例如：

*   在`templatedetails.xml`中，找到`<positions></positions>`开始和结束标签，然后在里面添加：

    ```
    <position>newposition</position> 
    ```

*   在`index.php`中，在模板中找到您希望放置新位置的位置并插入：

    ```
    <jdoc:include type="modules" name="newposition" /> 
    ```

有关更多详细信息，您可以查看此链接：

*   [如何添加新的模块位置？](http://docs.joomla.org/How_do_you_add_a_new_module_position%3f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-21T17:53:41.720

此外，如果你在一些黑暗和肮脏的地方做这件事，你不能使用指令（或不应该），这是最简单的方法：

```
 <?php
    jimport( 'joomla.application.module.helper' );
    $modules = JModuleHelper::getModules( 'your_position_name_that_you_just_enter_in_admin_ui' );
    foreach($modules as $mod )
    {
        //var_dump($mod);
        echo JModuleHelper::renderModule( $mod );
    }
   ?> 
```

# tcl - 对于变量的非初始化代码，预计 TCL 中会出现错误

> ID：14376032
> 
> 赞同：1
> 
> 时间：2013-01-17T09:39:02.747
> 
> 标签：tcl

我有下面的小代码，我希望 TCL 解释器为未初始化的变量抛出错误，但它不会抛出错误

```
set v1 "test" 
if { ($v1 != "test") && ($v2 == "3") } { 
  puts "fun" 
} 
#v2 is not initialized 
```

v2 的解释器没有抛出任何错误，因为它没有初始化

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:51:00.983

首先，`expr`TCL 中的子语言（也用于`if`, `while`, `for`）的工作方式不同于 TCL 本身。在这种子语言中，`$`并不意味着变量替换，而是变量引用。变量在其包含的子表达式被求值时被访问。并且逻辑运算是短路的，从左到右评估操作数*直到结果已知*，就像在 C 语言中一样。

这就是为什么`$v2 == 3`在您的示例中未评估的原因，并且不存在`$v2`不是错误。这种行为通常与这样的代码一起使用：

```
if {[info exists myvar] && $myvar} { .... } 
```

# java - 将 LinearLayout 调整为 ImageView 的宽度

> ID：14376033
> 
> 赞同：1
> 
> 时间：2013-01-17T09:39:04.233
> 
> 标签：java, android, xml, android-layout, android-widget

在我的 Fragment XML 中，我有一个用作背景的图像视图。在同一个布局中，我得到了一个 LinearLayout，它包含一些应该在视图上水平查看的按钮，并且与背景具有相同的宽度。由于 wrap_content，我的代码将其大小调整为屏幕宽度。如何将其调整到 imageview 的大小？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:layout_marginTop="45sp" >

<ImageView 
        android:src="@drawable/background_detail_view"
        android:id="@+id/detailview_background"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/detailview_background_description" />

<!-- more widgets -->

<LinearLayout
        android:id="@+id/detail_button_container"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_above="@+id/titel" >

        <Button 
        android:id="@+id/detail1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_weight="1" 
        android:text="1"/>

<Button 
        android:id="@+id/detail2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_weight="1" 
        android:text="2"/>

        <Button 
        android:id="@+id/detail3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_weight="1" 
        android:text="3"/>

<!-- more buttons -->

</LinearLayout> 
```

我尝试以编程方式获取宽度并分配新的布局参数，但返回 0，因为视图尚未呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:43:15.733

在您的 LinearLayout 中，设置`android:background="@drawable/background_detail_view"`参数，以便您的 LinearLayout 将具有此背景，而不是使用 ImageView。

# python-sphinx - 如何选择与 Sphinx 交叉引用的文本？

> ID：14376040
> 
> 赞同：10
> 
> 时间：2013-01-17T09:39:20.747
> 
> 标签：python-sphinx, cross-reference

使用 sphinx，我使用以下语法包含了一个图形。

```
.. _struct_NiO:

.. figure:: img/NiO.png
   :align: center
   :width: 400px

   long long very long caption ... 
```

在我使用的另一部分文本中

```
See figure :ref:`struct_NiO` bla bla bla 
```

为了对图进行交叉引用。这项工作，但输出看起来像：

见图“long long很长标题...” bla bla bla。

这是 sphinx 的正常行为，但是如果您的图形有点复杂，带有 3 或 4 行标题，则它并没有真正适应。

是否可以选择交叉引用中使用的文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T12:08:46.133

您可以为目标提供自定义链接文本`:ref:`，如下所示：

```
See figure :ref:`Link text <struct_NiO>` bla bla bla 
```

请参阅[http://www.sphinx-doc.org/en/master/usage/restructuredtext/roles.html#ref-role](http://www.sphinx-doc.org/en/master/usage/restructuredtext/roles.html#ref-role)。

# amazon-web-services - ASW S3 需要哪些权限才能通过云端下载文件

> ID：14376042
> 
> 赞同：0
> 
> 时间：2013-01-17T09:39:27.080
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront

我想知道需要为文件和文件夹设置哪些确切权限才能通过云端下载。

1）我创建了一个 S3 存储桶 2）使用创建的 S3 存储桶的来源创建云端分发（没有关于它的问题）

3) 我在 Bucket "Folder1" 中创建一个文件夹 4) 我将文件上传到创建的文件夹

问题：1）我应该用“Folder1”做什么并包含文件以使它们可以通过云端分发下载。

我的假设：在通过菜单的“Folder1”上，我应该选择“公开”（实际上我不完全理解“公开”的含义，如果有人解释，将不胜感激）并且在每个文件上我应该添加权限：每个人都打开\下载。

在文档中没有找到它（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:11:35.323

**公开**意味着您的文件可以公开访问。为此，您必须向公共用户授予**读取权限。**

有关更多详细信息：[Amazon S3 ACL：访问控制列表详细信息](http://www.bucketexplorer.com/documentation/amazon-s3--access-control-list-details.html)

[披露：[桶资源管理器]](http://www.bucketexplorer.com/)

# php - 记录集的选择语句问题

> ID：14376044
> 
> 赞同：0
> 
> 时间：2013-01-17T09:39:31.520
> 
> 标签：php, sql

我正在用 Dreamweaver 做一个项目，但我的 select 语句遇到了麻烦。我有这个

```
 SELECT *
    FROM client, `statement`
    WHERE client.client_id = `statement`.client_id 
```

当我执行此操作时，它会选择数据库中的每个人。所以我想在这个查询中添加另一个 WHERE 语句，这次将 client.username 与会话变量“MM_Username”进行比较。

所以我在看这样的东西

```
SELECT *
    FROM client, `statement`
    WHERE client.client_id = `statement`.client_id  AND WHERE client.username = '$_SESSION['MM_Username']' 
```

会话PHP代码如下

```
<?php
if (!isset($_SESSION)) {
  session_start();
}
$MM_authorizedUsers = "";
$MM_donotCheckaccess = "true";

// *** Restrict Access To Page: Grant or deny access to this page
function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
  // For security, start by assuming the visitor is NOT authorized. 
  $isValid = False; 

  // When a visitor has logged into this site, the Session variable MM_Username set equal to their username. 
  // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
    // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
    // Parse the strings into arrays. 
    $arrUsers = Explode(",", $strUsers); 
    $arrGroups = Explode(",", $strGroups); 
    if (in_array($UserName, $arrUsers)) { 
      $isValid = true; 
    } 
    // Or, you may restrict access to only certain users based on their username. 
    if (in_array($UserGroup, $arrGroups)) { 
      $isValid = true; 
    } 
    if (($strUsers == "") && true) { 
      $isValid = true; 
    } 
  } 
  return $isValid; 
}

$MM_restrictGoTo = "myflog.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers, $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
  $MM_qsChar = "?";
  $MM_referrer = $_SERVER['PHP_SELF'];
  if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
  if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
  $MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
  $MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" . urlencode($MM_referrer);
  header("Location: ". $MM_restrictGoTo); 
  exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:42:05.673

SELECT * FROM client, `statement`WHERE client.client_id = `statement`.client_id AND client.username = '$_SESSION['MM_Username']';

或 $user_name=$_SESSION['MM_Username']; SELECT * FROM client c, statement s WHERE c.client_id = s.client_id AND c.username = '$user_name';

试试这个查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:43:24.093

不应该有另一个`WHERE`；您将您的条件与`AND`：

```
WHERE client.client_id = `statement`.client_id AND client.username = '$_SESSION['MM_Username']' 
```

有关详细信息，请参阅您所使用的 SQL 引擎的 SQL 语法定义，以了解`SELECT`查询的语法。

# compilation - Sublime Text 2 - 编译时防止控制台打开（Ctrl + B）

> ID：14376047
> 
> 赞同：2
> 
> 时间：2013-01-17T09:39:37.347
> 
> 标签：compilation, console, sublimetext2

我正在使用 Less Build 工具将我的 less 文件编译为 css，但每次编译它都会自动打开控制台。我可以调整控制台的大小，但不能完全折叠它。编译某些东西时是否可以防止控制台打开？如果我需要打开控制台，我会从菜单中打开它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:19:11.600

您可以使用该`Escape`键完全关闭控制台。这并不能帮助您从一开始就禁止它出现，但如果该选项不存在，那么这可能是下一个最好的选择。

# php - 将数组值添加到 jquery 图形语法

> ID：14376049
> 
> 赞同：1
> 
> 时间：2013-01-17T09:39:38.187
> 
> 标签：php, jquery, json, each

我有一个从 php 进行 json 编码的数组

数组看起来像这样（称为 $jsonGraphData;）：

```
[{"Type":"Category","Name":"games","TotalClicks":"162"},{"Type":"Category","Name":"apps","TotalClicks":"29"},{"Type":"Category","Name":"music","TotalClicks":"28"},{"Type":"Category","Name":"video","TotalClicks":"25"}] 
```

我想在生成图形的 jquery 函数中的循环中使用数组值。这些是允许图表工作的硬编码值：

```
series: [{
                name: 'games',
                data: [162]

            }, {
                name: 'apps',
                data: [29]

            }, {
                name: 'video',
                data: [25]

            }] 
```

我想做的是使用 jquery 'each' 循环遍历数组，以便定义系列是动态的，这就是我想要实现的：

```
var totalClicks = $jsonGraphData; (this is the array, the alert works fine).

series: [{
  $.each(totalClicks, function(index, val) {
    alert('name: ' + val.Name + ' ' + 'data: ' + val.TotalClicks);
    //here is where I need the format to be the same as the example above.
  });   
}] 
```

我缺乏实现此目的的 jquery 语法知识，也不知道在 Google 上搜索什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:55:28.460

试试这个代码

```
var series = [];
  $.each(totalClicks, function(index, val) {
    series.push({name: val.Name, data: val.TotalClicks});
  }); 
```

或者，如果数据仍然应该是一个只有一个值的数组。

```
var totalClicks = [{ "Type": "Category", "Name": "games", "TotalClicks": "162" }, { "Type": "Category", "Name": "apps", "TotalClicks": "29" }, { "Type": "Category", "Name": "music", "TotalClicks": "28" }, { "Type": "Category", "Name": "video", "TotalClicks": "25"}]

var series = [];
$(totalClicks).each(function (index, val) {
    series.push({ "name": val.Name, "data": [val.TotalClicks] });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:58:23.757

您不需要使用 jQuery 来循环遍历常规数组。

```
for(var obj in yourArray){
  // do whatever you need with it.
  alert(obj.Name + " " + obj.TotalClicks);
} 
```

# iphone - 裁剪图像更改 iPhone 中的旋转

> ID：14376050
> 
> 赞同：0
> 
> 时间：2013-01-17T09:39:38.407
> 
> 标签：iphone, uiimage

我正在使用一个简单的裁剪`UIImage`，但是在我们检查最终图像进行裁剪后，它会在 iPhone 中旋转。下面是我用于裁剪的代码。

```
CGRect visibleRect;
float scale = 1.0f/scrollView.zoomScale;
visibleRect.origin.x = scrollView.contentOffset.x * scale;
visibleRect.origin.y = scrollView.contentOffset.y * scale;
visibleRect.size.width = scrollView.bounds.size.width * scale;
visibleRect.size.height = scrollView.bounds.size.height * scale;
finalImage = imageFromView(displayImageView.image, &visibleRect);

UIImage* imageFromView(UIImage* srcImage, CGRect* rect) {
    CGImageRef cr = CGImageCreateWithImageInRect(srcImage.CGImage, *rect);
    UIImage* cropped = [UIImage imageWithCGImage:cr];

    CGImageRelease(cr);
    return cropped;
} 
```

如果我做错了什么，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:25:25.063

您需要在 crpping 后调用此方法

```
-(UIImage*)rotateImage:(UIImage*)image 
```

{

```
UIGraphicsBeginImageContext(image.size);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextDrawImage(context, CGRectMake(0 , 0, image.size.width , image.size.height), [image CGImage]);

CGContextRotateCTM (context, radians(90));

CGImageRef cgImage = nil;

cgImage = CGBitmapContextCreateImage(context);

UIImage *img = [UIImage imageWithCGImage:cgImage];

return img;

} 
```

# magento - 使用 Mage_Checkout_Model_Cart_Product_Api 在购物车中添加捆绑包

> ID：14376053
> 
> 赞同：0
> 
> 时间：2013-01-17T09:39:52.150
> 
> 标签：magento, bundle, cart

我需要使用 Mage_Checkout_Model_Cart_Product_Api 的 API 在我的购物车中插入一个**捆绑包，**

```
function add($quoteId, $productsData, $store = null) 
```

简单的产品可以完美，但捆绑包有问题。

$productsData 的创建可能有错误？

```
$productsData = array ('product_id' => $productId,
'qty' => $qty); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:40:01.110

对不起，我的朋友，但我们的问题是我们需要在购物车中插入捆绑包，但我们不使用模型“checkout/cart”，而是使用“checkout/cart_product_api”，因为我们将能够在定义quote_id。

这是功能：

```
$params = array(
        'product_id' => $productId,
        'related_product' => null,
        'bundle_option' => array(
                57 => array(0 => 37,
                        1 => 38
                ),
        'bundle_qty' => 1));

Mage::getModel('checkout/cart_product_api')->add($cartId, $params, $store_id['eshop_id']); 
```

# debian - 找出谁是 smb 浏览大师

> ID：14376055
> 
> 赞同：0
> 
> 时间：2013-01-17T09:40:09.740
> 
> 标签：debian, samba, smb

嗨，我有一个 netgear nas (debian)，我喜欢将它作为 smb 浏览大师。但我怀疑windows 7 notebook 抢了这个角色。

我怎么知道谁是真正的浏览大师？

问题是三星蓝光播放器没有找到nas存储。

我是否有可能在网络中有不止一台机器担任浏览主机角色？

我的 smb.conf

```
[global]
 browseable = 1
 hostname lookups = 1
 os level = 255
 wins support = Yes
 workgroup = WORKGROUP
 domain master = Yes
 dns proxy = Yes
 preferred master = Yes
 local master = Yes 
 hostname lookups = 1
 dos charset = CP437 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:59:13.657

用于`nbtstat`找出作为浏览主机的计算机。语法：`nbtstat -a COMPUTER-NAME`. 输出应包含类似`MSBROWSE`

可悲的是，您必须为网络中的每台计算机执行此操作。

**编辑**

要查看当前域中的所有计算机，请使用`net view`. 要查看网络中现有域的列表，请使用`net use /domain`.

# sql - Sybase - 存储过程 - 将 SQL 查询的结果存储到 OUTPUT 参数中

> ID：14376058
> 
> 赞同：0
> 
> 时间：2013-01-17T09:40:24.560
> 
> 标签：sql, stored-procedures, sqlanywhere

在存储过程中，我必须构建自己的 SQL 请求（因为表名称和某些属性名称仅在执行时（参数）才知道）。

所以基本上我有这样的东西

```
 EXECUTE IMMEDIATE WITH RESULT SET OFF 'My custom query which select one data' 
```

通常，我会使用`INTO`命令，但我的参数在 Execute 立即数中被识别，这似乎是合乎逻辑的。

（在你问之前：我不能在结果集中返回这个，结果集用于另一个数据（这个结果`EXECUTE IMMEDIATE`将决定我将运行哪个查询（并且必须返回））。

你会如何处理这个问题？我想这在 SQL Server 上是同样的问题-...但我没有对其进行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T10:16:45.657

您可以在已编译的 Sql 中创建一个表，然后动态 Sql 填充它，以便动态部分之后的已编译 sql 语句可以读取结果并将它们更新到您的输出参数中。

# c# - 将存储库依赖项注入工作单元

> ID：14376062
> 
> 赞同：3
> 
> 时间：2013-01-17T09:40:31.143
> 
> 标签：c#, dependency-injection, repository-pattern, unit-of-work

我正在尝试在我的 asp.net MVC 项目中使用存储库和工作单元模式，但是我很难弄清楚如何将存储库依赖项传递给工作单元。工作单元的一般标准结构似乎如下：

```
public class UnitOfWork : IUnitOfWork
 {
        private ICustomerRepository _customerRepository;

        public ICustomerRepository CustomerRepository
        {
            get
            {
                if (this._customerRepository == null)
                {
                    this._customerRepository = new CustomerRepository(someContext);
                }
                return _customerRepository;
            }
        }
} 
```

具体来说，令我困惑的是这一行：

`this._customerRepository = new CustomerRepository(someContext);`

通过为存储库定义接口，随着时间的推移和业务需求的变化，是否能够将存储库依赖项注入 UoW 的整个想法？如果是这样，为什么我在网上看到的几乎每个实现都执行上述操作？在这个实现中，我们应该如何将一个新的实例传递`ICustomerRepository`给 UoW？当然，我们还需要更改 UoW 中的代码，这不违反开放关闭原则吗？我将如何将存储库注入我的 UoW？

我环顾四周，[这个问题](https://stackoverflow.com/questions/11791467/how-can-i-inject-the-repositories-to-the-unitofwork)似乎以前被问过，但我仍然很难理解提议的解决方案（门面服务）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T12:32:31.193

有两种常用方法可以获取 CustomerRepository 的实例。第一种方法称为构造函数注入，它是构造函数中的一个简单参数，例如

```
public class UnitOfWork : IUnitOfWork
{
    public UnitOfWork(ICustomerRepository repository)
    {
        _customerRepository = repository;
    }

    private ICustomerRepository _customerRepository;

    public ICustomerRepository CustomerRepository
    {
        get
        {
            if (this._customerRepository == null)
            {
                throw new ArgumentException("Missing repository");
            }
            return _customerRepository;
        }
    }
} 
```

第二种更灵活的方法是使用 IoC 框架，如 Structuremap、Unity、Ninject 等。

这是一个结构图的例子：

```
public class UnitOfWork : IUnitOfWork
{
    private ICustomerRepository _customerRepository;

    public ICustomerRepository CustomerRepository
    {
        get
        {
            if (this._customerRepository == null)
            {
                _customerRepository = ObjectFactory.GetInstance<ICustomerRepository>();
            }
            return _customerRepository;
        }
    }
} 
```

另外，您需要一个 configuraiton 类来告诉 Structuremap 要实例化哪个类，它可能看起来像这样：

```
public static class RepositoryRegistry
{
    internal static void DefaultConfiguration(Registry registry)
    {
       registry.For<ICustomerRepository>().Use<CustomerRepository>();
    }
} 
```

# java - Log4j：如何更改 Logger 的 LoggingEvent 类

> ID：14376064
> 
> 赞同：0
> 
> 时间：2013-01-17T09:40:35.990
> 
> 标签：java, logging, log4j

我想从 log4j 扩展 LoggingEvent 类（我想显示**线程 id**而不是**线程名称**）并保持 Logger 默认类。

如何将我自己的 LoggingEvent 类分配给现有的 Logger 类？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:44:39.210

您可以扩展`PatternLayout`以完成记录 ThreadId。请参阅[http://java.ittoolbox.com/groups/technical-functional/javaee-l/thread-id-in-log4j-logs-2926542](http://java.ittoolbox.com/groups/technical-functional/javaee-l/thread-id-in-log4j-logs-2926542)

# java - 无法使用 selenium webdriver 从弹出框切换回父窗口

> ID：14376068
> 
> 赞同：1
> 
> 时间：2013-01-17T09:40:46.270
> 
> 标签：java, javascript, selenium, webdriver, selenium-webdriver

我有登录页面，当单击登录时，它会打开新选项卡。我使用将控件移动到新选项卡

```
driver.switchTo().window("");
// Done some stuffs in new window. 
```

当我单击一个按钮时，它将打开弹出窗口（框架）。

我选择了一个弹出窗口`driver.switchTo().frame("frameName");`

并从那里通过选择记录，弹出窗口将被关闭。所选记录将显示在父窗口中并刷新页面。

现在我想将控件返回（重新聚焦）到我的父窗口来做一些其他的事情。

但我无法再次聚焦父窗口。

我努力了：

```
driver.switchTo().defaultcontent();
driver.switchTo().window(""); 
```

和

```
driver.getWindowHandles(); 
```

结果还是一样......

谁能帮我解决这个问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:10:05.637

```
String oldWindow = driver.getWindowHandle();
driver.findElement(By.xpath("//a[@id='searchSalesImg']/img")).click(); 
//by clicking on this we will get a new window

Thread.sleep(5000);
driver.switchTo().window(driver.getWindowHandle());

driver.switchTo().window("Employer Services Order Management (ESOM)"); 
//Navigate to new window
driver.findElement(By.id(" Primary Sales Person:")).sendKeys("MAS%"); 
//Do some stuff in new window

driver.switchTo().window(oldWindow); 
//navigate back to old window 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T06:49:49.010

尝试使用此代码：-

driver.switchTo().frame("Frame_identifier");

//你的代码

字符串 winHandleBefore = driver.getWindowHandle(); webDriver.SwitchTo().Window(winHandleBefore);

# c# - 使用 ParallelForeach 处理文件。这是最好的方法吗

> ID：14376072
> 
> 赞同：5
> 
> 时间：2013-01-17T09:40:52.883
> 
> 标签：c#, multithreading, task-parallel-library

只是一些建议，我有 100.000+ xml 文件要处理并移动到另一个系统。

这个概念很简单，我有一个像这样的循环：

```
 public void ProcessFiles()
    {
        IEnumerable<FileInfo> orderedFiles = GetFilesOrdered();

        foreach (FileInfo file in orderedFiles)
        {
            ProcessFile(file);
        }
    } 
```

我一直在阅读有关 Task Parallel 库的信息，但没有那么自信。不是很粘在线程上。似乎 TPL 为我包装了很多东西。

简单地说，它只是使用parallel.Foreach的一个例子吗？

任何样品或建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:00:50.277

是的，它可能就像替换`foreach`为`Parallel.ForEach`.

您必须记住，多个线程现在将`ProcessFile`同时执行。

因此，如果您在该方法中写入任何共享状态，则必须使用同步构造来保护它。

如果您不熟悉多线程，那么您应该在这里阅读一本很棒的介绍性电子书：[`Albahari`](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:07:47.500

希望对您有所帮助。演示如何并行移动文件的简单片段。

```
 List<FileInfo> files = new List<FileInfo>();
        files.Add(new FileInfo("F:\\1.xml"));
        files.Add(new FileInfo("F:\\2.xml"));
        files.Add(new FileInfo("F:\\3.xml"));

        Parallel.ForEach(files, f =>
        {
            f.MoveTo("d:\\test\\" + f.Name); 
        }); 
```

# html - 如何隐藏 dojox.grid.DataGrid 中的特定列

> ID：14376076
> 
> 赞同：0
> 
> 时间：2013-01-17T09:41:05.140
> 
> 标签：html, dojo

我有一些列的网格...我想在该网格中隐藏一列...怎么做...

这是我的网格....在这个我需要从网格中隐藏 CWDocId 标题...

```
<div class="claro" id="CWPWORKLIST__2" name="dataGrid" onclick="setWidgetproperty(this.id,'xy','inner__CWPWORKLIST__2')" ondblclick="editDataGridResponseMapping(this.id)" onmouseup="setDocStyle(this.id)" style="height:250px; left:auto; position:absolute; top:333px; width:920px;">
     <table class="claro" dojotype="dojox.grid.DataGrid" id="inner__CWPWORKLIST__2" rowselector="10px">
          <thead>
               <tr>
                    <th field="CWDocId" width="100px" style="display:none;">
                         CWDocId
                    </th>
                    <th field="Due" width="100px">
                         Due
                    </th>
                    <th field="Participant" width="100px">
                         Participant
                    </th>
                    <th field="User" width="100px">
                         User
                    </th>
                    <th field="Task" width="100px">
                         Task
                    </th>
                    <th field="Details" width="100px">
                         Details
                    </th>
                    <th field="Created" width="100px">
                         Created
                    </th>
                    <th field="Assigned" width="100px">
                         Assigned
                    </th>
                    <th field="Started" width="100px">
                         Started
                    </th>
               </tr>
          </thead>
     </table>
     <input id="hidden__CWPWORKLIST__2" name="orcl1.cw" style="display:none;" type="hidden" value="CWDocId##CWDOCID,Due##DUE_DATE,Participant##PARTICIPANT_TYPE,User##USER_ID,Task##OPERATION,Details##ORDER_VK,Created##CREATION_DATE,Assigned##ASSIGN_TO_USER_DATE,Started##START_WORK_DATE">
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T10:55:10.613

你有没有想过给一个列一个 ID 并使用 dojo.style 方法或 CSS 来设置它的可见性？

# sql - 从四个表制作报告

> ID：14376077
> 
> 赞同：2
> 
> 时间：2013-01-17T09:41:07.523
> 
> 标签：sql, oracle, oracle11g, sqlplus

我在 Oracle APEX 工作。我正在从以下四个表中制作报告，`Patient History Junction and Disease`但无法制作。

我想要`SELECT`

> Pat_Name,Pat_Age` 来自患者表

.

> 历史表中的 Treated_By、Sys_Date

和

> Dis_Name 来自疾病表

. 之间有一个`Junction`表`History and Disease`。下面是上述场景的示意图。

![在此处输入图像描述](../Images/0406246e238ac4f6c859d026c0156eff.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:06:11.270

您需要`JOIN`每个表，类似于：

```
select p.pat_name,
  p.pat_age,
  h.treated_by,
  h.sys_date,
  d.dis_name
from patient p
inner join history h
  on p.pat_id = h.pat_id
  and p.app_id = h.app_id
left join junction j
  on p.pat_id = j.pat_id
left join disease d
  on j.dis_id = d.dis_id 
```

如果您在学习连接语法方面需要帮助，请查看这个有用[的连接视觉解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

请注意，我使用了一个`INNER JOIN`between `patient`and`history`并在`patient`. 这种类型的连接将返回两个表中的所有匹配记录。

我`LEFT JOIN`在其他两个表上使用了 a ，即使其他两个表中没有匹配的记录，它也会返回所有患者/历史数据。根据您的需要，您可能可以`INNER JOIN`在这些表上使用。

# sql - 使用 smarty (Prestashop) 为 SQL 语句分配 var

> ID：14376078
> 
> 赞同：0
> 
> 时间：2013-01-17T09:41:08.640
> 
> 标签：sql, smarty, prestashop

您好，我想用 smarty 在 prestashop 的模板文件中分配一个变量。我怎样才能做到这一点？

到目前为止，我有以下代码：

```
{$db = DB::getInstance()}
{$id_lang = Context::getContext()->language->id}
{$sql = 'SELECT value FROM ps_feature_value_lang WHERE id_feature_value = 29 AND id_lang = $id_lang'} <- this is not working 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:08:21.387

它不起作用，因为变量在引号内。您需要将字符串与变量连接起来。未经测试，但应该是这样的：

```
{$sql = 'SELECT value FROM ps_feature_value_lang WHERE id_feature_value = 29 AND id_lang = '|cat:$id_lang} 
```

# jquery - 移动设备中的 Google Gravity 功能

> ID：14376079
> 
> 赞同：2
> 
> 时间：2013-01-17T09:41:11.510
> 
> 标签：jquery, html, css

在我的项目中，我希望有一个带有图像的页面，它应该像受到类似于“谷歌重力”的重力效应一样移动。

图像应通过在手机中滑动或触摸的触摸效果抛出，并在重力作用下掉落并与其他图像碰撞。

请建议一个插件或 jQuery 代码来支持相同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:06:29.517

You could check out the jQuery physics plugin

[http://code.google.com/p/jqueryphysics/](http://code.google.com/p/jqueryphysics/)

or Box2d-js

[http://box2d-js.sourceforge.net/index2.html](http://box2d-js.sourceforge.net/index2.html)

# android - 开始和停止父母的活动？

> ID：14376087
> 
> 赞同：2
> 
> 时间：2013-01-17T09:41:44.307
> 
> 标签：android, android-intent

我希望能够从父级启动和停止另一个活动，例如，如果我想将自定义对话框显示为一个活动。

因此，要开始我使用的活动：

```
private void showIntentDialog() {
    Intent i = new Intent(ActivityA.this, ActivityB.class);
    ActivityA.this.startActivity(i);    
} 
```

但是，如何通过停止活动来处理它？

```
private void stopIntentDialog(){
    //how to finish it ?
} 
```

ps 我搜索了很多主题，但找不到适合我的问题。他们中的大多数人在关闭`B`和返回`A`或返回某些值时遇到问题。

pss 明确地说，我想`B`从开始活动`A`，也想在一些操作之后`B`也从`A`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T09:57:24.540

开始活动为：

```
private void showIntentDialog() {
    Intent i = new Intent(ActivityA.this, ActivityB.class);
    i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    ActivityA.this.startActivity(i);    
} 
```

要结束活动，请发送另一个带有布尔标志的意图：

```
private void dismissIntentDialog() {
    Intent i = new Intent(ActivityA.this, ActivityB.class);
    i.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
    i.putExtra("finish",true);
    ActivityA.this.startActivity(i);
} 
```

在目标活动中：

```
@Override
protected void onNewIntent (Intent i){
  if( i.getBooleanExtra("finish",false) ){
     finish();
  }
} 
```

# php - 无法从下拉菜单中显示选定的值

> ID：14376091
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:41:51.017
> 
> 标签：php, html, mysqli

我有一个应用程序，您可以在此处查看以测试[应用程序，](http://helios.hud.ac.uk/u0867587/Mobile_app/Text16.php)但我遇到了一些我似乎无法弄清楚的小问题。

1.  即使查询是正确的，它也无法显示在下面的代码中选择的模块：

    ```
     <p>
        <strong>Selected Module:</strong><?php $dbModuleNo;?> - <?php$dbModuleName;?> <input type='hidden' value='<?php$_POST["module"];?>'>
        </p> 
    ```

2.  只有在用户从相关下拉菜单之一中选择一个选项并提交后，我才能显示`Please Select Module`和消息：`Please Select an Assessment``Please Select`

代码如下（我注释掉了查询）：

```
<form action="" method="post"> 
                <?php            
                /*
                $moduleactive = 1;
                $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

                $sqlstmt=$mysqli->prepare($sql);
                $sqlstmt->bind_param("i", $moduleactive);
                $sqlstmt->execute(); 
                $sqlstmt->bind_result($dbModuleId,$dbModuleNo,$dbModuleName);
                $sqlstmt->store_result();
                $sqlnum = $sqlstmt->num_rows();
                */
                ?>
                Module: 
                <select name="module" id="modulesDrop">
                    <option value="">Please Select</option>
                    <?php
                    while($sqlstmt->fetch()) { 
                        $ov = $dbModuleNo . "_" . $dbModuleName . "_" . $dbModuleId; 
                        if($ov == $_POST["module"]) 
                            echo "<option selected='true' value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL; 
                        else 
                            echo "<option value='$ov'>$dbModuleNo - $dbModuleName</option>" . PHP_EOL;
                     } 
                    ?>
                </select>
                <input id="moduleSubmit" type="submit" value="Submit Module" name="moduleSubmit" />
            </form>
    <?php if(isset($_POST["module"]) && $_POST["module"] != "") { ?>
            <form action="" method="post"> 
                <p>
                <strong>Selected Module:</strong><?php $dbModuleNo;?> - <?php$dbModuleName;?> <input type='hidden' value='<?php$_POST["module"];?>'>
                </p>
                Asessments: 
                <?php
                /*
                $sessionquery = "
                    SELECT s.SessionId, SessionName, SessionDate, SessionTime, ModuleId, SessionActive, Complete
                    FROM Session s
                    INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId
                    WHERE
                    (ModuleId = ? AND SessionActive = ? AND Complete = ?)
                    ORDER BY SessionName 
                    ";
                $active = 1;
                $complete = 1;
                $sessionqrystmt=$mysqli->prepare($sessionquery);
                // You only need to call bind_param once
                $sessionqrystmt->bind_param("iii",$moduleId, $active, $complete);
                // get result and assign variables (prefix with db)
                $sessionqrystmt->execute(); 
                $sessionqrystmt->bind_result($dbSessionId,$dbSessionName,$dbSessionDate,$dbSessionTime, $dbModuleId, $dbSessionActive, $dbComplete);
                $sessionqrystmt->store_result();
                $sessionnum = $sessionqrystmt->num_rows();        
                */

            if ($sessionnum == 0 ){    ?>
                <span class='red'>Sorry, You have No Assessments under this Module</span>
            <?php } else { ?>
                <select name="session" id="sessionsDrop">
                    <option value="">Please Select</option>
                    <?php
                        while ( $sessionqrystmt->fetch() ) {
                            $sv = $dbSessionId;
                            if($sv == $_POST["session"]) 
                                echo "<option selected='true' value='$sv'>$dbSessionName - date('d-m-Y',strtotime($dbSessionDate)) - date('H:i',strtotime($dbSessionTime))</option>" . PHP_EOL;
                            else
                                echo "<option value='$sv'>$dbSessionName - date('d-m-Y',strtotime($dbSessionDate)) - date('H:i',strtotime($dbSessionTime))</option>" . PHP_EOL;
                        }
                    ?>
                </select>
                <br>
                <input type="submit" value="Submit Assigments">
            </form>
            <br>
            <br>
            <?php
    if(isset($_POST["session"]) && $_POST["session"] != "")    {

    /*
            $sessiondetailsquery = "
                SELECT s.SessionId, SessionName, SessionDate, SessionTime, SessionDuration, SessionWeight, TotalMarks, 
                s.ModuleId, ModuleNo, ModuleName, s.Room, Building, Capacity, SessionActive, Complete, PenaltyEnabled, COUNT(PenaltyMarks)
                FROM Module m
                INNER JOIN Session s ON m.ModuleId = s.ModuleId
                INNER JOIN Session_Complete sc ON sc.SessionId = s.SessionId
                LEFT JOIN Room r ON s.Room = r.Room
                LEFT JOIN Penalty p ON s.SessionId = p.SessionId
                LEFT JOIN Penalty_Marks pm ON s.SessionId = pm.SessionId
                WHERE
                (s.SessionId = ?)";
            $active = 1;
            $complete = 1;
            $sessiondetailsqrystmt=$mysqli->prepare($sessiondetailsquery);
            // You only need to call bind_param once
            $sessiondetailsqrystmt->bind_param("i",$dbSessionId);
            // get result and assign variables (prefix with db)
            $sessiondetailsqrystmt->execute(); 
            $sessiondetailsqrystmt->bind_result($detailsSessionId,$detailsSessionName,$detailsSessionDate,$detailsSessionTime, $detailsSessionDuration, $detailsSessionWeight, 
            $detailsTotalMarks, $detailsModuleId, $detailsModuleNo, $detailsModuleName, $detailsRoom, $detailsBuilding, $dbCapacity, $detailsSessionActive, $detailsComplete, 
            $dbPenaltyEnabled, $dbCountPenalyMarks);?>
            */
            <h3>CHOSEN ASSESSMENT</h3>
            <input type='text' id='currentId' name='Idcurrent' readonly='readonly' value='$detailsSessionId' /></td> 
            <br>
            <strong>Assessment:</strong> <?php $detailsSessionName; ?>
    <?php } else { ?>
            <p><strong class='red'>Please Select an Assessment</strong></p>
    <?php } } } else { ?>
            <p><strong class='red'>Please Select a Module</strong></p>
    <?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:46:13.457

```
<strong>Selected Module:</strong> - <?php$dbModuleName;?> <input type='hidden' value='<?php$_POST["module"];?>'> 
```

这是你的错误。如果您查看源代码，您会看到 PHP 代码按原样打印，因为您没有正确间隔。尝试这个

```
<strong>Selected Module:</strong> - <?php echo $dbModuleName;?> <input type='hidden' value='<?php echo $_POST["module"];?>'> 
```

`<?php$dbModuleName;?>` 应该`<?php echo $dbModuleName;?>`

# sqlite - 从 sqlite 导入数据到 postgres：轻松转换 AUTOINCREMENT

> ID：14376092
> 
> 赞同：2
> 
> 时间：2013-01-17T09:41:56.647
> 
> 标签：sqlite, postgresql

我像这样转储我的`SQLite`数据库：

```
sqlite3 database.sqlite .dump 
```

这是转储的相关部分：

```
CREATE TABLE auth_user(
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    org_id INTEGER,
    email CHAR(512) UNIQUE,
    user_doc_id CHAR(128),
    password CHAR(512),
    registration_key CHAR(512),
    reset_password_key CHAR(512),
    registration_id CHAR(512)
); 
```

我必须将它导入到`postgres`. `Postgres`不接受`AUTOINCREMENT`，但我需要类似的功能。我想*自动*处理`SQLite`转储以便将其导入到`postgres`. 我已经阅读了`NEXTVAL`and `CREATE_SEQUENCE`，但我无法轻松地使用它来自动转换

有没有一种简单的方法可以`sed`将 sqlite 转储提供给 postgres？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:15:17.300

替换`INTEGER PRIMARY KEY AUTOINCREMENT`为`SERIAL PRIMARY KEY`。
确保抓住所有的写法（小写、空格等）。

# database - 避免多次运行相同的查询，这会花费大量时间

> ID：14376093
> 
> 赞同：1
> 
> 时间：2013-01-17T09:41:59.033
> 
> 标签：database, informix

我正在运行一个需要足够时间的复杂数据库查询。

首先，我将结果卸载到文件中，然后再次运行此查询以删除所有这些条目。这又需要很多时间。

有没有更好的方法让我可以在这里节省时间并实现两个目的。

我是数据库新手..不知道是否有办法。

谢谢 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T12:14:33.900

您必须在查询或过程中找到瓶颈：是 SQL 查询还是将数据保存到慢速媒体？

如果是 SQL 查询，则尝试找出该查询的哪一部分花费了大部分时间，例如添加一些索引以使其更快。看看类似的问题：[Tweak Informix query](https://stackoverflow.com/questions/5013845/tweak-informix-query)。记住那`SET EXPLAIN`是你的朋友。还记得`UPDATE STATISTICS`在您更改数据库中的大量数据之后。

为什么要将结果卸载到文件中？您是否使用不同的工具分析这些结果？如果是这样，那么也许有一种方法可以在 SQL 中更有效地做到这一点？

# powershell - Active Directory Add-QADUser-唯一标识符是什么？

> ID：14376096
> 
> 赞同：2
> 
> 时间：2013-01-17T09:42:07.097
> 
> 标签：powershell, active-directory

我正在编写一个 Powershell 脚本来自动从一个数据库中提取信息以更新 Active Directory，例如添加新用户。

我是 Active Directory 的新手，正在使用[这个有用的图形映射将 UI 标签链接到 AD 属性](http://www.selfadsi.org/user-attributes-w2k8.htm)

我希望 UserPrincipalName，例如**tina.Tana@example.com**是用户帐户的唯一标识符。

但在测试过程中，结果却并非如此。如果我做：

```
$status = New-QADUser -FirstName 'Tina' -LastName 'Tana' -Name 'Tina A Tana' `
            -UserPrincipalName 'tina.tana@example.com' `
            -ParentContainer 'OU=OU2,OU=OU2,DC=example,DC=com'
$status = New-QADUser -FirstName 'Tina' -LastName 'Tana' -Name 'Tina B Tana' `
            -UserPrincipalName 'tina.tana@example.com' `
            -ParentContainer 'OU=OU2,OU=OU2,DC=example,DC=com' 
```

2 个帐户都可以创建，唯一的区别是*-Name*字段。

如果我做：

```
$status = New-QADUser -FirstName 'Tina' -LastName 'Tana' -Name 'Tina Tana' `
            -UserPrincipalName 'tina.tana-1@example.com' `
            -ParentContainer 'OU=OU2,OU=OU2,DC=example,DC=com'
$status = New-QADUser -FirstName 'Tina' -LastName 'Tana' -Name 'Tina Tana' `
            -UserPrincipalName 'tina.tana-2@example.com' `
            -ParentContainer 'OU=OU2,OU=OU2,DC=example,DC=com' 
```

区别仅在于`-UserPrincipalName`. 第二个添加用户将失败，PS 说用户已经创建。我尝试了其他组合，但它表明 -Name 必须是唯一的，其他字段无关紧要。

我错过了什么吗？在我看来，人们可以有相同的名字，但是在创建帐户时，用户主体名称应该是唯一的。*（当您使用AD 用户和计算机*GUI 工具手动创建新用户 AD 帐户时，如果您为不同的人提供相同的登录名（即 userPrincipalName），该工具会告诉您必须提供不同的登录名。

那么，为什么使用 Quest Add-QADUser 从 Powershell 执行此操作时会有所不同？为什么从 Powershell 执行时，命令会成功执行？

困惑！非常感谢您的意见！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:14:34.187

阅读这个[microsoft KB](http://support.microsoft.com/kb/251359/en-us)和这个[msdn 库](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677605%28v=vs.85%29.aspx)

Active Directory 本身不强制 UPN 的唯一性。创建或修改 UPN 的进程负责检查唯一性（这是通过查询全局编录来完成的）。可能`New-Qaduser`不会做这个检查。

通常，用户的唯一标识符是`samAccountName`. 如果不设置`UserPrincipalName`AD 构建默认：用户主体名称有两部分：UPN 前缀（用户帐户名）和 UPN 后缀（DNS 域名）。这些部分通过 at 符号 (@) 符号连接在一起以构成完整的 UPN。例如，在示例域中拥有帐户的用户某人的 UPN 为“someone@example.com”。

# c++ - boost::bind 和 qtconcurrent::map ...似乎无法使其工作

> ID：14376099
> 
> 赞同：0
> 
> 时间：2013-01-17T09:42:29.517
> 
> 标签：c++, qt, boost, boost-bind, qtconcurrent

好吧，我需要你的帮助，因为我似乎找不到办法

[QtConcurrent::map](http://doc.qt.digia.com/qt/qtconcurrentmap.html#map)使用我的静态函数和我的元素序列。这是我正在尝试做的事情：

我想运行这个功能：

```
static void meta_engine_recursive(Node* node,OutputNode* output,Row *row); 
```

在这组元素上：

```
QList<Row*> tasks; 
```

这是我为调用 map 所做的，但编译器不喜欢它......即使在阅读了所有 boost & Qt 文档之后，我也找不到正确的语法！

```
QFuture<void> future= QtConcurrent::map(tasks,
                            boost::bind(&VideoEngine::meta_engine_recursive,
                            boost::ref(dynamic_cast<Node*>(input)),
                            boost::ref(output),_1)(row)); 
```

ps：显然这是C++

另外，请不要介意 boost::ref 调用，我只是在玩它。我要解决的是调用映射好的参数

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:58:14.583

没关系我没有做正确的括号，最后的额外（行）是不必要的。这是最后的电话：

```
QFuture<void> future= QtConcurrent::map(tasks,
                                            boost::bind(&VideoEngine::meta_engine_recursive,
                                                        dynamic_cast<Node*>(input),
                                                        output,_1)); 
```

# android - 在图形布局编辑屏幕中查看自定义布局

> ID：14376103
> 
> 赞同：0
> 
> 时间：2013-01-17T09:42:38.113
> 
> 标签：android, android-custom-view

这是我测试自定义布局（显示图像和标签）的来源。

XML 代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/screen_layout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#3535ff"
    android:orientation="vertical"
    android:padding="1dp" >
    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:padding="20dp" >
        <ImageView
            android:id="@+id/screen_image"
            android:layout_width="match_parent"
            android:layout_height="200dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:background="#000000"
            android:scaleType="centerInside"
            android:src="@drawable/cam_1_20130117_105601_118" />
        <TextView
            android:id="@+id/screen_label"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@id/screen_image"
            android:layout_centerHorizontal="true"
            android:layout_marginBottom="3dp"
            android:background="#95000000"
            android:gravity="center_vertical|center_horizontal"
            android:text="사출성형기 1호기"
            android:textColor="#ffffff" />
    </RelativeLayout>
</LinearLayout> 
```

JAVA代码

```
package com.example.testlayout;

import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

import com.example.testscreen.R;

public class CustomScreen extends LinearLayout {
    LinearLayout mLayout = null;
    TextView mLabel = null;
    ImageView mImage = null;

    public CustomScreen(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init();     
    }

    public CustomScreen(Context context, AttributeSet attrs) {
        super(context, attrs);  
        init();     
    }

    public CustomScreen(Context context) {
        super(context);
        init();     
    }   

    void init() {
        LayoutInflater inflater = (LayoutInflater)getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        inflater.inflate(R.layout.screen, this, true);
    //  mLabel = (TextView)findViewById(R.id.screen_label);
    //  mImage = (ImageView)findViewById(R.id.screen_image);

        if (isInEditMode()) {
            return;
        }

    }
} 
```

使用此代码，我检查了 Nexus One。它显示得很好。问题在于编辑器模式。正是在带有预览的 xml 编辑器上。当我添加此视图时，出现错误消息。

> 无法实例化以下类： - com.example.testlayout.CustomScreen（打开类，显示错误日志）有关详细信息，请参阅错误日志（窗口 > 显示视图）。提示：当在 Eclipse 中显示时，在自定义视图中使用 View.isInEditMode() 以跳过代码

我想在编辑模式下检查它。我怎样才能像其他视图一样检查好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-01T11:34:29.997

> 您必须在每个构造函数中添加 (!isInEditMode())。它告诉它是否不在编辑模式然后初始化这些东西

```
 if(!isInEditMode())
      init(context); 
```

并为初始化东西[**遵循这个**](https://stackoverflow.com/a/21621368/3496570)

也[**看看这个**](https://stackoverflow.com/a/30529218/3496570)

# xml - 如何使用 XSLT 从 XML 标记中的属性读取值

> ID：14376104
> 
> 赞同：0
> 
> 时间：2013-01-17T09:42:43.527
> 
> 标签：xml, xslt

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:59:52.277

更通用的方法是定义这样的模板：

```
 <xsl:template name="GetPIAttribute">
    <xsl:param name="pi" />
    <xsl:param name="attrName" />

    <xsl:variable name="toFind" select="concat(' ', $attrName, '=')"/>
    <xsl:variable name="piAdjusted" select="concat(' ', normalize-space($pi))"/>

    <xsl:variable name="foundMatch" select="substring-after($piAdjusted, $toFind)" />
    <xsl:if test="$foundMatch">
      <xsl:variable name="delimiter" select="substring($foundMatch, 1, 1)" />
      <xsl:value-of select="substring-before(substring-after($foundMatch, $delimiter), $delimiter)"/>
    </xsl:if>
  </xsl:template> 
```

然后你可以调用它来检索你想要的任何伪属性，如下所示：

```
 <xsl:template match="/">
    <xsl:call-template name="GetPIAttribute">
      <xsl:with-param name="pi" select="/processing-instruction()[name() = 'table']" />
      <xsl:with-param name="attrName" select="'name'" />
    </xsl:call-template>
  </xsl:template> 
```

这种方法的好处是它考虑了用单引号或双引号括起来的值，并且如果您需要提取多个值，您可以重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:49:22.460

这实际上不是一个属性。这只是处理指令的价值。

我认为获得价值的唯一方法是通过一些字符串操作......

```
<xsl:template match="processing-instruction()[name()='table']">
    <xsl:value-of select="substring-before(substring-after(.,'name=&quot;'),'&quot;')"/>
</xsl:template> 
```

# ios - 更新 SQLite 数据库时应用程序崩溃并显示断言失败消息

> ID：14376112
> 
> 赞同：0
> 
> 时间：2013-01-17T09:43:10.483
> 
> 标签：ios, sqlite, sql-update, xcode4.5

在我的应用程序中，我将一些数据保存在本地 Sqlite 数据库中。Sqlite 打开，插入一切正常。但是当我尝试更新特定行/记录的数据时，如果失败并显示 ASSERTION FAILURE 消息..

*** -[gss_databaseHandler updateRecord::::] 中的断言失败，/Users/gss/Desktop/SalesPro copy/SalesPro/../gss_databaseHandler.m:210

```
NSString *databasePath;
// Method to open a database, the database will be created if it doesn't exist
-(void)initDatabase
{
// Create a string containing the full path to the sqlite.db inside the documents folder
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
databasePath = [documentsDirectory stringByAppendingPathComponent:@"contact1"];

// Check to see if the database file already exists
bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

// Open the database and store the handle as a data member
if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
{
    // Create the database if it doesn't yet exists in the file system
    if (!databaseAlreadyExists)
    {
        // Create the contactList table
        const char *sqlStatement = "CREATE TABLE IF NOT EXISTS contactList (sapCustId TEXT, sapContactId TEXT, record_ID NUMERIC PRIMARY KEY, timestamp TEXT)";
        char *error;
        if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK)
        {
                NSLog(@"Database and tables created.");
        }
        else
        {
                NSLog(@"Error: in creating/opening database");
        }

    }
  }
}

- (void) updateRecord:(int)recordID:(NSString *)sapCustId:(NSString *)sapContactId:(NSString *)timestamp {

[self initDatabase];

sqlite3_stmt *updateStmt = nil;

    if(updateStmt == nil) {
        const char *sql_stmt = "update contactList Set sapCustId = ?, sapContactId = ?, timestamp = ? Where record_ID = ?";

     if(sqlite3_prepare_v2(databaseHandle, sql_stmt, -1, &updateStmt, NULL) != SQLITE_OK)
         NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(databaseHandle));
    }

    sqlite3_bind_text(updateStmt, 0, [sapCustId UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(updateStmt, 1, [sapContactId UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_int(updateStmt, 2, recordID);
    sqlite3_bind_text(updateStmt, 3, [timestamp UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(updateStmt))
        NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(databaseHandle));

sqlite3_finalize(updateStmt);
sqlite3_close(databaseHandle);

//Reclaim all memory here.
[sapContactId release];
[sapCustId release];

} 
```

请帮忙！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:34:05.743

所以，有几个想法：

1.  正如 Prateek 和 Lefteris 建议的那样，您应该更改`bind`调用的顺序，以便它们与 SQL 中字段的顺序相匹配。它们也以索引一开始，而不是零。我总是觉得奇怪的是`sqlite3_bind`调用索引从一开始，而`sqlite3_column`调用索引从零开始，但这就是它的工作方式。

2.  虽然这可能没问题，但如果你曾经做过断言，你通常应该确保首先 (a) 完成任何成功准备的语句；(b) 关闭数据库。您不想冒险让您的数据库处于不一致的状态。

3.  你可能不应该释放`sapContactId`或`sapCustId`在这里。你没有`retain`或没有做任何事情来增加他们的保留数量，所以在这里释放他们可能是不谨慎的。如果您通过静态分析器运行代码（按`shift`++或从产品菜单中选择“分析” `command`）`B`，您无疑会在那里看到建议/警告。

4.  正如官方 SQLite [An Introduction To the SQLite C/C++ Interface](http://www.sqlite.org/cintro.html)`open`中所述，您的、`prepare_v2`、`step`、`finalize`和的顺序`close`是完全正确的。你不需要打电话`sqlite3_reset`。的[目的](http://www.sqlite.org/c3ref/reset.html)是`reset`让你重用以前准备好的`sqlite3_stmt`，但你在这里没有这样做，所以`reset`这里没有必要并且什么都没有。

5.  在您的评论中，您曾说过您收到“数据库锁定”错误。如果您在解决上述问题后仍然得到它，请告诉我们您从哪里得到它（在`open`？在`prepare`SQL 语句期间？），因为这个问题可能有不同的来源。当然，多线程数据库操作会导致这种情况。您需要通过准确地向我们展示您在哪一行收到此锁定消息来帮助我们诊断此问题，并描述您可能正在执行的其他数据库操作（除了原始问题中的代码），特别是如果您正在执行任何操作后台队列/线程。

    解决“数据库锁定”问题的挑战在于，问题始终不在于您遇到“数据库锁定”错误的代码，而在于您未能正确处理的一些先前的数据库交互。从技术上讲，调用失败`sqlite3_finalize`可能会导致“数据库锁定”问题，但实际上这种情况很少发生。我看到“数据库锁定”错误通常是由于其他问题而发生的，但我们真的需要知道您是在打开数据库期间遇到它，还是在尝试`prepare`SQL`step`语句时遇到它。你需要告诉我们哪个让我们在诊断中走得更远。但是，就像我说的，问题无疑在于其他/先前的数据库交互，*在*“数据库锁定”错误之前。

* * *

如果您对有关原始问题中代码重写的讨论感兴趣，请参见下文。

一个小建议，但我建议更改您的`initDatabase`方法以确保在`sqlite3_open`调用失败时记录错误消息，例如：

```
-(void)initDatabase
{
    // Create a string containing the full path to the sqlite.db inside the documents folder
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *databasePath = [documentsDirectory stringByAppendingPathComponent:@"contact1.sqlite"];

    // Check to see if the database file already exists
    bool databaseAlreadyExists = [[NSFileManager defaultManager] fileExistsAtPath:databasePath];

    // Open the database and store the handle as a data member
    if (sqlite3_open([databasePath UTF8String], &databaseHandle) == SQLITE_OK)
    {
        // Create the database if it doesn't yet exists in the file system
        if (!databaseAlreadyExists)
        {
            // Create the contactList table
            const char *sqlStatement = "CREATE TABLE IF NOT EXISTS contactList (sapCustId TEXT, sapContactId TEXT, record_ID NUMERIC PRIMARY KEY, timestamp TEXT)";
            char *error;
            if (sqlite3_exec(databaseHandle, sqlStatement, NULL, NULL, &error) == SQLITE_OK)
            {
                NSLog(@"Database and tables created.");
            }
            else
            {
                NSLog(@"%s: error creating table: %s", __FUNCTION__, sqlite3_errmsg(databaseHandle));
            }
        }
    }
    else
    {
        NSLog(@"%s: error opening database: %s", __FUNCTION__, sqlite3_errmsg(databaseHandle));
    }
} 
```

其次，你看`insertRecord`：

*   您想修复使用四个绑定语句的顺序。

*   您还可以消除冗余`if`语句。

*   如果您使用断言或从方法中间返回进行数据库交互，您总是希望进行优雅的清理。例如，你会看到我的准备是否失败，我会直接关闭，但如果`step`失败，那么我确保`finalize`and `close`。

*   您可能应该摆脱那些不恰当的`release`语句，将它们移到代码中的正确位置。

*   您应该将方法签名更改为具有命名参数（因为在*编码指南的*[一般规则](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html#//apple_ref/doc/uid/20001282-1001751-BCIJHEDH)部分， Apple 说我们应该命名我们的方法关键字。

 *因此：

```
- (void) insertRecord:(int)recordID
            sapCustId:(NSString *)sapCustId
         sapContactId:(NSString *)sapContactId
            timestamp:(NSString *)timestamp
{
    [self initDatabase];

    sqlite3_stmt *statement = nil;

    const char *sql_stmt = "INSERT INTO contactList (sapCustId, sapContactId, timestamp, record_ID) VALUES (?, ?, ?, ?)";

    if(sqlite3_prepare_v2(databaseHandle, sql_stmt, -1, &statement, NULL) != SQLITE_OK)
    {
        NSLog(@"%s: insert prepare error: '%s'", __FUNCTION__, sqlite3_errmsg(databaseHandle));
        sqlite3_close(databaseHandle);
        NSAssert(0, @"insert prepare error");
    }

    sqlite3_bind_text(statement, 1, [sapCustId UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 2, [sapContactId UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(statement, 3, [timestamp UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_int(statement, 4, recordID);

    if (sqlite3_step(statement) != SQLITE_DONE)
    {
        NSLog(@"%s: insert step error: '%s'", __FUNCTION__, sqlite3_errmsg(databaseHandle));
        sqlite3_finalize(statement);
        sqlite3_close(databaseHandle);
        NSAssert(0, @"insert step error");
    }

    sqlite3_finalize(statement);
    sqlite3_close(databaseHandle);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:06:56.983

试试这个

您缺少 sqlite3_reset，编号应从 1 开始

```
- (void) updateRecord:(int)recordID:(NSString *)sapCustId:(NSString *)sapContactId:(NSString *)timestamp {

[self initDatabase];

sqlite3_stmt *updateStmt = nil;

    if(updateStmt == nil) {
        const char *sql_stmt = "update contactList Set sapCustId = ?, sapContactId = ?, timestamp = ? Where record_ID = ?";

     if(sqlite3_prepare_v2(databaseHandle, sql_stmt, -1, &updateStmt, NULL) != SQLITE_OK)
         NSAssert1(0, @"Error while creating update statement. '%s'", sqlite3_errmsg(databaseHandle));
    }

    sqlite3_bind_text(updateStmt, 1, [sapCustId UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(updateStmt, 2, [sapContactId UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_text(updateStmt, 3, [timestamp UTF8String], -1, SQLITE_TRANSIENT);
    sqlite3_bind_int(updateStmt, 4, recordID);

    if(SQLITE_DONE != sqlite3_step(updateStmt))
        NSAssert1(0, @"Error while updating. '%s'", sqlite3_errmsg(databaseHandle));

sqlite3_reset(updateStmt);
sqlite3_finalize(updateStmt);
sqlite3_close(databaseHandle);

//Reclaim all memory here.
[sapContactId release];
[sapCustId release];

} 
```

希望这可以帮助你..

编辑 ：-

您尚未添加`sqlite3_finalize();`任何以前的功能，因此您收到数据库锁定错误..*

# node.js - 哪些 NodeJS 框架支持关系数据库？

> ID：14376116
> 
> 赞同：4
> 
> 时间：2013-01-17T09:43:18.983
> 
> 标签：node.js, postgresql

我正在使用 NodeJS 开始服务器端开发，我发现了很多有前途的框架，但不知道其中哪些支持关系数据库（即 Postgres）。

有任何想法吗？首选服务器端 MVC 框架。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:49:52.123

[Express](http://expressjs.com/)是通用框架（并且非常流行），您可以将它与您想要的任何数据库一起使用。您只需要一个数据库驱动程序。您可以使用以下之一：

[https://github.com/brianc/node-postgres](https://github.com/brianc/node-postgres)（低级）

[https://github.com/grncdr/node-any-db](https://github.com/grncdr/node-any-db)

[https://github.com/brianc/node-sql](https://github.com/brianc/node-sql)

应该还有很多，google一下吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:50:14.727

[在此处](https://github.com/joyent/node/wiki/modules#database)查看模块列表

有许多用于 mysql/SQLite/PostgreSQL 等的数据库模块...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-28T12:37:58.543

[sails.js](http://sailsjs.org)建立在 express 之上（参见 @freakish 的回答），并支持 MySQL、Postgres 和十几个其他 NoSQL 和 SQL 数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T18:00:53.230

我会选择[Sequelize.js](http://www.sequelizejs.com)。它是 Postgres 和 MySQL 的 ORM。在一些关于 node.js 的书籍中推荐它。我试了一下，看起来很有希望。

另一方面我会问自己一个问题：*如果我需要使用关系数据库，node.js 是否仍然是一个不错的选择？*

# php - 以同样的方式洗牌数组，根据编号

> ID：14376120
> 
> 赞同：6
> 
> 时间：2013-01-17T09:43:22.120
> 
> 标签：php, arrays, sorting, shuffle

我正在运行一个测验制作网站。我希望以随机顺序向用户显示问题的答案。

如果我要随机打乱它们，我会尽量**避免存储向用户提供答案的顺序。**

我想以可预测的方式随机播放答案，**以便以后可以以相同的方式重复随机播放**（显示结果时）。

我认为我可以将答案列表改组为某个数字（使用排序中的数字，或者具有可通过 ID 号识别的多种类型。 **这样我可以简单地存储它们被改组的数字并记住该号码以将它们重新洗牌到相同的顺序。**

这是我到目前为止所拥有的框架，但我没有任何逻辑可以将答案按打乱顺序放回 $shuffled_array 中。

```
<?php

function SortQuestions($answers, $sort_id)
{
    // Blank array for newly shuffled answer order
    $shuffled_answers = array();

    // Get the number of answers to sort
    $answer_count = count($questions);

    // Loop through each answer and put them into the array by the $sort_id
    foreach ($answers AS $answer_id => $answer)
    {
        // Logic here for sorting answers, by the $sort_id

        // Putting the result in to $shuffled_answers
    }

    // Return the shuffled answers
    return $shuffled_answers;
}

// Define an array of answers and their ID numbers as the key
$answers = array("1" => "A1", "2" => "A2", "3" => "A3", "4" => "A4", "5" => "A5");

// Do the sort by the number 5
SortQuestions($answers, 5);

?> 
```

有没有我可以使用传递给函数的数字来随机播放答案的技术？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:50:23.913

PHP 的[shuffle](http://php.net/manual/en/function.shuffle.php)函数使用[srand](http://php.net/manual/en/function.srand.php)给出的随机种子，因此您可以为此设置特定的随机种子。

此外，shuffle 方法更改了数组键，但这对您来说可能不是最好的结果，因此您可以使用不同的 shuffle 函数：

```
function shuffle_assoc(&$array, $random_seed) {
    srand($random_seed);

    $keys = array_keys($array);

    shuffle($keys);

    foreach($keys as $key) {
        $new[$key] = $array[$key];
    }

    $array = $new;

    return true;
} 
```

此功能将保留原始密钥，但顺序不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:51:07.113

您可以将数组旋转一个因子。

```
$factor = 5;
$numbers = array(1,2,3,4);
for ( $i = 0; $i < $factor; $i++ ) {
    array_push($numbers, array_shift($numbers));
}
print_r($numbers); 
```

该因子可以是随机的，并且一个函数可以通过相反的方式将数组切换回原位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:50:24.820

这可能是一种可能的方式。

```
$result = SortQuestions($answers, 30);
print_r($result);

function SortQuestions($answers, $num)
{
$answers = range(1, $num);
shuffle($answers);
return $answers;
} 
```

# spring-mvc - Angularjs - Spring MVC 集成

> ID：14376123
> 
> 赞同：3
> 
> 时间：2013-01-17T09:43:30.527
> 
> 标签：spring-mvc, angularjs, restful-architecture

我正在尝试将 AngularJS 与 Spring MVC 集成；但我无法将参数作为 RequestBody 发布到弹簧控制器。有人可以帮助我实现同样的目标吗？以下是我的程序的简要流程。

完成数据输入后**TodoNewController**被执行。从这里我调用我在**services.js中定义的用户定义方法“** **create** ” 。根据之后的流程，它应该调用 **TodoController.java的****create**方法以及输入参数；但它没有发生。有人可以让我知道代码有什么问题吗？下面是相同的代码。

 ********控制器.js**

```
function TodoNewController($scope, $location, Todo) {

    $scope.submit = function () {

        Todo.create($scope.todo, function (todo) {

            $location.path('/');

        });

    };

    $scope.gotoTodoListPage = function () {

        $location.path("/")

    };

} 
```

**服务.js**

```
angular.module('todoService', ['ngResource']).

        factory('Todo', function ($resource) {

            return $resource('rest/todo/:id', {}, {

                'create': {method:'PUT'}

            });

        }); 
```

**TodoController.java**

```
@Controller

public class TodoController {

    private static final AtomicLong todoIdGenerator = new AtomicLong(0);

    private static final ConcurrentSkipListMap<Long, Todo> todoRepository = new                ConcurrentSkipListMap<Long, Todo>();

    @RequestMapping(value = "/todo", method = RequestMethod.PUT)

    @ResponseStatus(HttpStatus.NO_CONTENT)

    public void create(@RequestBody Todo todo) {

        long id = todoIdGenerator.incrementAndGet();

        todo.setId(id);

        todoRepository.put(id, todo);

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T09:22:18.783

Spring 期望`application/x-www-form-urlencoded`作为请求的 Content-Type。您可以尝试注入您的服务并在它的开头`$http`调用。`$http.defaults.headers.put["Content-Type"] = "application/x-www-form-urlencoded";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:50:39.657

修改请求映射以匹配实际映射`/rest/todo`并将数据绑定更改为使用@ModelAttribute。

```
 @RequestMapping(value = "/rest/todo", method = RequestMethod.PUT)
 @ResponseStatus(HttpStatus.NO_CONTENT)

    public void create(@ModelAttribute Todo todo) {

        long id = todoIdGenerator.incrementAndGet();

        todo.setId(id);

        todoRepository.put(id, todo);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:39:11.573

首先隔离问题。是 Spring 还是 Angular 导致了这个问题？我建议你在 Chrome 或 FireFox 中安装一个 Rest 客户端插件。然后创建一个 PUT 请求并输入正确的端点 URL。如果您能够收到正确的响应，则意味着您的 Angular 请求构造不正确。

现在，运行基于 Angular 的客户端。发出 PUT 请求。检查发送的参数和请求（在 Chrome 中，您可以使用开发者工具）并查看它是否与您之前发送的请求匹配。如果是这样，那么它应该可以工作。如果没有，那么你就知道问题所在了。

此外，您的 Angular 资源：

```
$resource('rest/todo/:id') 
```

与 Spring 控制器中的 URL 不同

```
@RequestMapping(value = "/todo", method = RequestMethod.PUT) 
```

所以第一个就像'rest/todo/1'，后者是'/todo'。我不认为那些会匹配。******

# entity-framework - 为实体构造函数传递 ConnectionString 必须包含 provider="System.Data.SqlClient" & providerName="System.Data.EntityClient"

> ID：14376125
> 
> 赞同：2
> 
> 时间：2013-01-17T09:43:36.357
> 
> 标签：entity-framework, entity-framework-4, connection-string, dbcontext, entities

我需要将连接字符串传递给实体对象构造函数（不能存储在配置中）。

我已成功使用 EntityConnectionStringBuilder 连接到数据库，但相信因为它不允许我添加`providerName="System.Data.EntityClient"`（仅提供程序属性> `provider="System.Data.SqlClient`“）不会让我更新数据库。

如何将它与来自字符串生成器的连接字符串一起传递给构造函数。

我的连接字符串与此基本相同

```
connectionString="metadata=.\AdventureWorks.csdl|.\AdventureWorks.ssdl|.\AdventureWorks.msl;
         provider=System.Data.SqlClient;provider connection string='Data Source=localhost;
         Initial Catalog=AdventureWorks;Integrated Security=True;Connection Timeout=60;
         multipleactiveresultsets=true'" providerName="System.Data.EntityClient" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:11:20.813

您不必设置外部`providerName`- 您只需`connectionString`从 web.config 复制条目。

```
var sqlBuilder = new SqlConnectionStringBuilder();
...

var entBuilder = new EntityConnectionStringBuilder();
entBuilder.ProviderConnectionString = sqlBuilder.ConnectionString;
entBuilder.Provider = "System.Data.SqlClient";
entBuilder.Metadata = "res://...";

using ( var db = new AdventureWorksContext( entBuilder.ConnectionString ) )
{
  ... 
```

* * *

此外，您的`metadata`配置看起来很奇怪。我一直使用这种格式：

```
metadata=res://*/AdventureWorks.csdl|res://*/AdventureWorks.ssdl|res://*/AdventureWorks.msl; 
```

* * *

如果您使用 Code First，则只需要 SQL 连接字符串。

看到这个问题：[Entity Framework Code First and Connection String Issue](https://stackoverflow.com/questions/7135600/entity-framework-code-first-and-connection-string-issue)

# android - 如何在android中加密发送的数据库？

> ID：14376130
> 
> 赞同：0
> 
> 时间：2013-01-17T09:44:03.823
> 
> 标签：android, database, sqlite, encryption

团队，

我有一个带有大型 SQLite 数据库的 Android 应用程序，这些数据花费了我很多钱，我不想让任何人轻易拥有它。这个数据库以 databse.sqlite 文件的形式提供给我，我将其放入 APK 资产中。

无论如何在运输之前加密这个数据库然后在读取数据时解密？

PS 我搜索了很多，我的所有结果都指向我使用 sqlcipher，但是这个库不适用于附带的 SQLite 数据库文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:34:04.630

问题是您需要将密钥（或密钥的位置）存储在代码中的某处，并且对应用程序进行解译并不需要太多努力。不幸的是，您无法真正阻止任何人访问数据。你只能让它变得更难，但对于真正有决心的人来说，这仍然很容易。

最好的解决方案是将数据库存储在服务器上，只将用户实际需要的数据发送到设备。这样，您至少可以控制设备请求的数据。

# ruby - 如何在 Windows 上的 cygwin Ruby 中修复 gem install gtk2

> ID：14376138
> 
> 赞同：0
> 
> 时间：2013-01-17T09:44:52.897
> 
> 标签：ruby, windows, rubygems, gtk

我选择使用 Cygwin 在我的系统上安装 ruby​​，而不是使用通常的 ruby​​installer 方式。

现在，就像我尝试安装我通常使用的 gem（如 gtk2）时一样。它会发出一些错误。

以下是详细信息：（我在 Windows 8 上）

```
C:\Users\imraven>ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [i386-cygwin]

C:\Users\imraven>gem install gtk2
Building native extensions.  This could take a while...
ERROR:  Error installing gtk2:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby.exe extconf.rb
"C:/Program Files (x86)/git/bin/sh.exe": /usr/bin/ruby.exe: No such file or directory

Gem files will remain installed in /usr/lib/ruby/gems/1.9.1/gems/glib2-1.1.9 for inspection.
Results logged to /usr/lib/ruby/gems/1.9.1/gems/glib2-1.1.9/ext/glib2/gem_make.out 
```

我应该怎么做才能解决这个问题？我选择 Cygwin 的 Ruby 的主要原因是我想使用 Process.fork 方法（在普通的 RubyInstaller Windows 版本的 Ruby 中不可用）

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T19:02:12.877

您可能已经安装了 ruby​​ for windows，而不是 cygwin 版本。

运行 Cygwin 设置，并在 Ruby 类别下选择 Ruby。还要确保您已在 Devel 类别下安装了 gcc 编译器和 GNU make，以便 gem 可以构建本机扩展。

# c# - MEF 2：导入很多

> ID：14376146
> 
> 赞同：2
> 
> 时间：2013-01-17T09:45:10.040
> 
> 标签：c#, .net, mef

我使用无属性方法来配置 MEF。
我读过以下文章：http:
[//msdn.microsoft.com/en-us/magazine/jj133818.aspx](http://msdn.microsoft.com/en-us/magazine/jj133818.aspx)
[http://blogs.microsoft.co.il/blogs/bnaya/archive/2013/01/12/ mef-2-0-mini-series-part-4-fluent-import.aspx](http://blogs.microsoft.co.il/blogs/bnaya/archive/2013/01/12/mef-2-0-mini-series-part-4-fluent-import.aspx)

测试代码（控制台应用程序项目，.NET 4.5）：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;
using System.ComponentModel.Composition.Registration;
using System.Linq;

namespace MEF2
{
    public interface IPlugin
    {
        void Run();
    }

    public interface IPluginMetadata
    {
        string Name { get; }
        string Version { get; }
    }

    [MetadataAttribute]
    [AttributeUsage(AttributeTargets.Class, AllowMultiple=false)]
    public class PluginMetadataAttribute : ExportAttribute, IPluginMetadata
    {
        public string Name { get; set; }
        public string Version { get; set; }

        public PluginMetadataAttribute(string name, string version)
            : base(typeof(IPlugin))
        {
            Name = name;
            Version = version;
        }
    }

    [PluginMetadata("Plugin1", "1.0.0.0")]
    public class Plugin1 : IPlugin
    {
        public void Run()
        {
            Console.WriteLine("Plugin1 runed");
        }
    }

    [PluginMetadata("Plugin2", "2.0.0.0")]
    public class Plugin2 : IPlugin
    {
        public void Run()
        {
            Console.WriteLine("Plugin2 runed");
        }
    }

    class Program
    {
        CompositionContainer container;
        IEnumerable<Lazy<IPlugin, IPluginMetadata>> plugins = Enumerable.Empty<Lazy<IPlugin, IPluginMetadata>>();

        static void Main(string[] args)
        {
            var program = new Program();

            foreach (var plugn in program.plugins) {
                Console.WriteLine("{0}, {1}", plugn.Metadata.Name, plugn.Metadata.Version);
                plugn.Value.Run();
            }
        }

        Program()
        {
            var builder = new RegistrationBuilder();
            builder
                .ForTypesDerivedFrom<IPlugin>()
                .Export<IPlugin>();
            builder
                .ForType<Program>()
                .Export()
                .ImportProperties<IPlugin>(
                    propertyFilter => true,
                    (propertyInfo, importBuilder) => {
                        importBuilder.AsMany();
                    }
                );

            var catalog = new AggregateCatalog(
                new AssemblyCatalog(typeof(Program).Assembly, builder)
            );

            container = new CompositionContainer(catalog);
            container.ComposeParts(this);
        }
    }
} 
```

出口工作正常。
但是当我尝试导入很多时它不起作用。
请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T01:29:23.703

这不是无属性（命令式）方法，因为导出是属性式（声明式）。您的自定义元数据属性派生自`ExportAttribute`.

要使此代码正常工作，您需要执行以下操作：

*   从构造函数代码中删除命令式导出。
*   将注册生成器传递给`AssemblyCatalog`. 没有这个，注册生成器将无法使用。
*   更新基于约定的导入，`Lazy<IPlugin, IPluginMetadata>`因为这是要导出的内容。
*   将调用替换`ComposeParts`为`GetExports`。

更新的构造函数代码是：

```
 var builder = new RegistrationBuilder();

            builder
                .ForType<Program>()
                .Export()                
                .ImportProperties<Lazy<IPlugin, IPluginMetadata>>(
                    propertyFilter => true,
                    (propertyInfo, importBuilder) =>
                    {
                        importBuilder.AsMany();
                    }
                );

            var catalog = new AggregateCatalog(
                new AssemblyCatalog(typeof(Program).Assembly, builder)
            );

            container = new CompositionContainer(catalog);
            //container.ComposeParts(this);
            plugins = container.GetExports<IPlugin, IPluginMetadata>(); 
```

我还不确定如何使用它`ComposeParts`。我会看看它。此外，自定义元数据不必派生自`ExportAttribute`. 它可以从`System.Attribute`. 这也将让你有一个必要的出口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T13:51:23.897

谢谢，我找到了解决这个问题的方法。
奇怪的是我从来没有找到这样的例子。
示例代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.Composition;
using System.ComponentModel.Composition.Hosting;
using System.ComponentModel.Composition.Registration;

namespace MEF2
{
    public interface IPlugin
    {
        void Run();
    }

    public interface IPluginMetadata
    {
        string Name { get; }
        string Version { get; }
    }

    [MetadataAttribute]
    [AttributeUsage(AttributeTargets.Class, AllowMultiple=false)]
    public class PluginMetadataAttribute : ExportAttribute, IPluginMetadata
    {
        public string Name { get; set; }
        public string Version { get; set; }

        public PluginMetadataAttribute(string name, string version)
            : base(typeof(IPlugin))
        {
            Name = name;
            Version = version;
        }
    }

    [PluginMetadata("Plugin1", "1.0.0.0")]
    public class Plugin1 : IPlugin
    {
        public void Run()
        {
            Console.WriteLine("Plugin1 runed");
        }
    }

    [PluginMetadata("Plugin2", "2.0.0.0")]
    public class Plugin2 : IPlugin
    {
        public void Run()
        {
            Console.WriteLine("Plugin2 runed");
        }
    }

    public class PluginStore
    {
        public IEnumerable<Lazy<IPlugin, IPluginMetadata>> Plugins { get; private set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            var builder = new RegistrationBuilder();
            builder
                .ForTypesDerivedFrom<IPlugin>()
                .Export<IPlugin>();
            builder
                .ForType<PluginStore>()
                .Export()
                .ImportProperties(
                    propertyFilter => true,
                    (propertyInfo, importBuilder) => {
                        importBuilder.AsMany();
                    }
                );

            var catalog = new AssemblyCatalog(typeof(PluginStore).Assembly, builder);

            using (var container = new CompositionContainer(catalog)) {
                var pluginStore = container.GetExport<PluginStore>().Value;

                foreach (var plugin in pluginStore.Plugins) {
                    Console.WriteLine("{0}, {1}", plugin.Metadata.Name, plugin.Metadata.Version);
                    plugin.Value.Run();
                }
            }
        }
    }
} 
```

# hadoop - 如何创建 oozie.war？

> ID：14376150
> 
> 赞同：0
> 
> 时间：2013-01-17T09:45:18.543
> 
> 标签：hadoop, cloudera, oozie

我正在使用`oozie-3.3.0.`在此我无法`oozie.war`在`${OOZIE_HOME}`目录中找到。当我执行这个命令

```
./addtowar.sh -inputwar ${OOZIE_HOME}/oozie.war -outputwar oozie-new.war -hadoop 0.20.205.0 ${HADOOP_HOME} -extjs /home/oozie/ext-2.2.zip 
```

> 我找不到 oozie.war。

如何创建 oozie.war？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:06:03.457

看起来 OOZIE 的 3.3.0 版本没有预建战争。您应该能够按照构建 Oozie 发行版的说明进行操作：

*   [http://oozie.apache.org/docs/3.3.0/ENG_Building.html#Building_an_Oozie_Distribution](http://oozie.apache.org/docs/3.3.0/ENG_Building.html#Building_an_Oozie_Distribution)

# c# - IIS Express 在停止 Web 应用程序后立即关闭正在运行的站点

> ID：14376154
> 
> 赞同：177
> 
> 时间：2013-01-17T09:45:36.853
> 
> 标签：c#, asp.net, visual-studio, visual-studio-2012, iis-express

我想在 IDE 中停止应用程序的第一天使用 Visual Studio 2012，应用程序仍在 IIS Express 上运行，我可以浏览和使用正在运行的应用程序，但现在我不能。如果我按下停止按钮，IIS 会立即关闭应用程序。因为我记得我没有对设置进行任何更改。我应该如何像第一天一样运行。

* * *

## 回答 #1

> 赞同：349
> 
> 时间：2013-09-13T20:26:25.163

我最近遇到了类似的情况，当我停止调试后，我的 IIS Express 突然停止了。这发生在我打开*“启用编辑并继续”*之后。因此，如果禁用此功能，您将看到即使在调试停止后 IIS Express 仍保持运行。

右键单击您的项目>单击属性>选择左侧的“Web”选项卡>取消选中该`Enable Edit and Continue`复选框。

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2013-11-04T11:45:29.660

在 VS2010 和 VS2012 中，创建新的 Web 应用程序项目时，默认禁用编辑和继续选项。在 VS2013 中它默认是打开的。

您可以在 Web 项目的属性窗口的 Web 选项卡上找到此选项。

![编辑并继续选项 vs2013](../Images/879bf760c2d3b9ddfc97a0853541ad68.png)

启用“启用编辑并继续”后，VS 调试器将在 IIS Express 中启动您的 Web 应用程序。当您停止调试时，IIS Express 也会关闭。使用此行为，您将看到 IIS Express 系统托盘在调试期间出现并在调试后消失。当启用编辑并继续选项打开时，此行为与 VS2012 中的相同。

**如果您在开发过程中不需要“编辑并继续”功能**，并且希望 IIS Express 在调试会话后保留，**您只需关闭启用编辑并继续选项即可**。

如果**您想使用“编辑并继续”或者您正在开发 Asp.net 5 站点**（ASP.NET 5 项目在项目属性中没有“编辑并继续”复选框）**，您必须使用“Detech all”命令**停止调试。

调试器将与 iis 进程分离而不关闭它。

显然，在您再次开始调试之前，“编辑并继续”功能将不起作用。

[![在此处输入图像描述](../Images/8a4cc4625ee5f49eb957a941d9eea818.png)](https://i.stack.imgur.com/76LzA.png)

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2013-01-17T17:43:28.340

`(X) STOP`您可以使用`Detach all`“调试”菜单中的菜单项，而不是点击按钮。主要区别在于停止按钮将终止当前正在调试的任何进程，而 Detach All 将断开调试器与进程的连接，但不会终止它们。

正常的 IIS 工作进程也将被终止，但由于它曾经作为服务运行，它也会自动重新启动，因此您可以继续使用它而无需通过`|> Debug`或重新启动进程`|> Start without debugging`。

**截图供参考**

![将“编辑并继续”按钮添加到调试工具栏。](../Images/bc86dc661bf923693b8fd5a360b7352b.png)

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2016-04-19T10:27:55.047

似乎自 Visual Studio 2015 Update 2 发布以来，公认的解决方案不再有效。

到目前为止，我发现的最简单的解决方案是通过从**Debug**菜单中选择“ **Start without Debugging ”来启动项目。**

 *** * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-18T16:10:57.687

这可能最好归类为另一种解决方法，但它对我有用。

我通常使用“在浏览器中查看”上下文菜单（或 CTRL-Shift-W）第一次启动项目。

从那时起，任何需要调试的东西，我通常都会附加到新的现有 iisexpress 进程中。虽然通过上下文菜单鼠标将使其无法启动，但它几乎与 F5 一样快，具有以下击键：

*   Shift-F6 构建当前项目或 Ctrl-Shift-B 构建整个解决方案（仅当您进行了更改时才需要这样做，但我认为我应该提及它，因为 F5 已经这样做了）。
*   Ctrl-Alt-P 打开附加到进程对话框

*   键入“iis”将带您进入 iisexpress 流程

*   按回车键，您已连接

如果你有不止一个 iisexpress 运行，最后一个启动的通常会出现在列表的顶部。另一种选择是移位选择并附加到所有这些。

这有许多 IMO 的优点。首先，它不会终止进程。其次，停止调试时浏览器窗口不会关闭。当我看到开发人员重复 7 个步骤来重现错误时，我感到很震惊，而他需要做的只是在现有浏览器窗口中按 F5 键，以便在连接调试器后重新发布。最后，我必须在附加到 nunit 时已经这样做了，所以我得到了更一致的体验。**

# javascript - 如何将结果从 JSON 放入 DIV？

> ID：14376156
> 
> 赞同：0
> 
> 时间：2013-01-17T09:46:06.993
> 
> 标签：javascript, jquery, json, jquery-ui

从下面的函数我得到了结果。现在我想将该结果放入一个 div 中。那么我应该如何将结果放入div中？

```
$(document).ready(function () {
    $.ajax({
        type: "POST",
        url: "../ajaxaction.php",
        data: {
            action: 'alllist'
        },
        dataType: 'json',
        success: function (msg) {
            for (var i = 0; i < msg.length; i++) {
                var uname = msg[i].user_name;
                var vtitle = msg[i].video_title;
                var vid = msg[i].video_id;
                var vthumb = msg[i].video_thumb;
            }
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:49:16.633

您可以使用您喜欢的格式将结果附加到 div 中，但添加的简单方法是。您可以使用[append()](http://api.jquery.com/append/)函数为循环的每次迭代保留添加的 html 和新的 html。

```
 success: function(msg){ 
       for (var i = 0; i < msg.length; i++) { 
        var uname = msg[i].user_name;
        var vtitle = msg[i].video_title;
        var vid = msg[i].video_id; 
        var vthumb = msg[i].video_thumb;
         $('#divId').append("Name: " + uname + "," + "Title: " + vtitle +
                            "Id: " + vid + "," + "Thumb: " + vthumb + "<br />");
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:49:14.383

```
$(document).ready(function() { 
    $.ajax({
       type: "POST",
       url: "../ajaxaction.php",
       data: { action:'alllist'},
       dataType: 'json',
       success: function(msg){ 
       for (var i = 0; i < msg.length; i++) { 
        var uname = msg[i].user_name;
        var vtitle = msg[i].video_title;
        var vid = msg[i].video_id; 
        var vthumb = msg[i].video_thumb;

        $("#container").html("Username: " + uname + "<br />Video Title: " + vtitle + "<br />Vide ID: " + vid + "<br />Video Thumb: " + vthumb);
       }

   }});

}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:49:30.810

如果您的 div 存在：

```
jQuery('div selector').append(uname+' '+vtitle+...whatever variable and format); 
```

如果不

`jQuery('element selector to put the div in').append('<div id="aID" class="some classes">'+uname+' '+vtitle+...whatever variable and format...+'</div>');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:54:36.803

你可以这样做：

```
success: function(msg){ 
   $.each(msg, function(i, item){
      $('#divid').html('User Name : '+item.user_name+ 
                       'Video title : '+item.video_title+
                       'Video Id : 'item.video_id+
                       'Video Thumb : 'item.video_thumb );
      });
} 
```

# python - 在 python 中使用 re 查找维基百科转储中的内部链接

> ID：14376158
> 
> 赞同：0
> 
> 时间：2013-01-17T09:46:11.457
> 
> 标签：python, regex, wikipedia

转储文本中的样本是 -

```
s='[[Pierre-Joseph Proudhon|Proudhon]], [[Peter Kropotkin|Kropotkin]], [[Mikhail Bakunin|Bakunin]]' 
```

当我运行给出的正则表达式时 -

```
match_internal=re.findall('\[\[(.+)\]\]',s)
for i in match_internal:
    print i
>>Pierre-Joseph Proudhon|Proudhon]], [[Peter Kropotkin|Kropotkin]], [[Mikhail Bakunin|Bakunin 
```

而不是打印

```
Pierre-Joseph Proudhon|Proudhon
Peter Kropotkin|Kropotkin
Mikhail Bakunin|Bakunin 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:48:20.263

您需要使用*不情愿的量词*而不是*贪婪*的量词：-

```
re.findall('\[\[(.+?)\]\]',s)  // Replaced `.+` with `.+?` 
```

使用*贪婪的量词*-您的模式-`(.+)`将匹配所有字符串直到最后一个`]]`，而使用*不情愿的量词*-模式-`(.+?)`将在第一个停止`]]`。

```
>>> match_internal=re.findall('\[\[(.+?)\]\]',s)
>>> for i in match_internal:
        print i

Pierre-Joseph Proudhon|Proudhon
Peter Kropotkin|Kropotkin
Mikhail Bakunin|Bakunin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:50:35.553

默认情况下，`+`量词尽可能匹配。而且由于`.`匹配字符串中的所有字符，因此只有一个匹配项，仅不包括最外层的括号。

您应该在括号内搜索“非括号”字符，如下所示：

```
re.findall('\[\[([^\]]+)\]\]', s) 
```

# php - 模拟对象并保留其他方法的功能

> ID：14376160
> 
> 赞同：1
> 
> 时间：2013-01-17T09:46:15.380
> 
> 标签：php, mocking, phpunit

例如说我有这个类：

```
class Foo {

    public function add($x, $y)
    {
        return $x + $y;
    }

    public function subtract($x, $y)
    {
        return $x - $y;
    }
} 
```

我只想改变 add 方法的行为：

```
$mock = $this->getMock('Foo');
$mock->expects($this->once())->method('add')->will($this->returnCallback(function ($x, $y) {
    return ($x + 0) + ($y + 0);
}));

$this->assertEquals(4, $mock->add(2,2));
$this->assertEquals(2, $mock->subtract(4,2)); 
```

为什么我的减法现在返回 null？我期待它表现得像往常一样。

```
Failed asserting that null matches expected 2. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:03:55.427

您需要进行部分模拟，指定 getMock 要模拟的方法：

```
$mock = $this->getMock('Foo', array('add'); 
```

这样，只有 add 方法被模拟，对象的其余部分表现如常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:04:17.250

像这样使用：

```
$mock = m::mock('Foo[add]'); 
```

# windows - 我可以从同一个客户端在同一个端口上与同一个服务器建立超过 1 个 TCP 连接吗？专门到端口 445

> ID：14376161
> 
> 赞同：1
> 
> 时间：2013-01-17T09:46:19.207
> 
> 标签：windows, tcp

我可以在同一端口上与同一服务器建立超过 1 个 TCP 连接吗？例如 ：

> 连接 1：机器 A 到机器 B 的端口 445
> 
> 连接 2：机器 A 到机器 B 的端口 445

不终止先前建立的连接 1\. 如果是，我需要做任何设置来启用这种情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:00:41.300

是的你可以。无需任何特殊设置。

这正是您启动时发生的情况，比如说 Internet Explorer 和 Mozilla Firefox，并使用两者导航到同一个站点。

在后台连接到服务器，机器 A 使用任何端口号打开一个套接字并尝试连接到机器 B 的 445 端口。正在侦听端口 445 的机器 B 可以接受这个传入连接，并使用另一个套接字使用其他任何连接它的端口号。最后，实际的 TCP 连接建立在机器 A 上的任何端口和机器 B 上的任何端口之间。在机器 B 上，端口 445 仅用于侦听（并且可以接受其他连接）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:20:05.370

是的，您可以，TCP/IP 会话由以下 5 元组标识：

```
(src-ip, src-port, dst-ip, dst-port, protocol). 
```

在您的情况下，5 个值中的 4 个必须相同：`src-ip (A), dst-ip (B), dst-port (445), protocol (tcp)`. 因此，`src-port`仍然为您提供一定程度的自由度，通过改变它，您可以设置多个会话。这是默认情况下应该发生的情况，您的操作系统将为与同一服务器的每个连接选择一个新的、唯一的源端口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:17:30.617

[TCP/IP 标准通过临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)支持这一点。您连接到服务器端的固定端口，但客户端的端口不受您的控制。TCP/IP 协议栈会选择客户端端口，然后定义连接并通过 4 位信息将连接与其他连接区分开来：客户端 IP 地址、客户端端口、服务器 IP 地址和服务器端口。

# d3.js - 是否可以在 D3 的标签云中使用点击事件，如果可以，如何使用？

> ID：14376162
> 
> 赞同：9
> 
> 时间：2013-01-17T09:46:19.347
> 
> 标签：d3.js

d3-cloud关于点击事件是否可以在D3的标签云中使用点击事件如果是的话如何

```
<!DOCTYPE html>
<meta charset="utf-8">
<script src="../lib/d3/d3.js"></script>
<script src="../d3.layout.cloud.js"></script>
<body>
<script>
  var fill = d3.scale.category20();
  var zz= ["Hello", "world", "normally", "you", "want", "more", "words", "than", "this"];
  d3.layout.cloud().size([300, 300])

      .words((zz).map(function(d) {
        return {text: d, size: 10 + Math.random() * 90};
      }))
      .rotate(function() { return ~~(Math.random() * 2) * 90; })
      .font("Impact")
      .fontSize(function(d) { return d.size; })
      .on("end", draw)
      .start();

  function draw(words) {
    d3.select("body").append("svg")
        .attr("width", 300)
        .attr("height", 300)
      .append("g")
        .attr("transform", "translate(150,150)")
      .selectAll("text")
        .data(words)
      .enter().append("text")
        .style("font-size", function(d) { return d.size + "px"; })
        .style("font-family", "Impact")
        .style("fill", function(d, i) { return fill(i); })
        .attr("text-anchor", "middle")
        .attr("transform", function(d) {
          return "translate(" + [d.x, d.y] + ")rotate(" + d.rotate + ")";
        })
        .text(function(d) { return d.text; });
  }
</script> 
```

（我希望“Hello”、“world”、“normally”、“you”、“want”、“more”、“words”、“than”、“this”这些词是可点击的）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T11:02:06.237

只需在脚本末尾添加以下内容：

```
...
.text(function(d) { return d.text; })
.on("click", function(d) {
    alert(d.text);
  }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-10T21:26:00.240

您可以使用 .on 绑定事件

我将向您展示如何在鼠标悬停时放大或缩小标签大小，并在单击标签时记录（我正在使用咖啡脚本）

```
.on("mouseover", ->
  d3.select(this).style("font-size", (d) ->
    d.size + 10 +"px"
  )
.on("mouseout", ->
  d3.select(this).style("font-size", (d) ->
    d.size - 10 +"px"
  )
.on("mousedown",  ->
  console.log(this) 
```

# android - 从通知启动活动会破坏父活动

> ID：14376168
> 
> 赞同：4
> 
> 时间：2013-01-17T09:46:33.527
> 
> 标签：android, android-activity, android-service, android-notifications

我有一个应用程序，其中包含 4 个活动，顺序为**A->B->C->D**和一个在应用程序启动时由**A**启动的服务**S。**现在，在特定条件下，该服务会触发一个通知，该通知应该再次启动活动**C**与我的应用程序以及**C**通常需要来自**B**的参数。同样为了正常运行，**C 需要使用活动 A 中的静态变量**。这就是设置。

 ******现在发生的情况是，当从服务**S**触发通知并且我单击它时，活动**A**和**B**会自动销毁，从而导致强制关闭（因为我的活动**C**依赖**于 A 中的静态变量**）。为什么会发生这种情况。我已经使用 a`TaskStackBuilder`将**C 的**父活动（即**B**）放在堆栈上，以便正常的返回行为将我带回活动**B**。

谁能告诉我这种行为的原因。我**不想**将我的 Activity **C**作为相互依赖的任务运行。我希望它与应用程序中已有的实例相同。请帮助我理解这里的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-05T05:03:11.743

1.  活动应该是独立的。这很危险*`activity C needs to use a static variable from the activity A`*。尽管您按照**A->B->C->D**的顺序创建活动，但当您的应用处于后台时，Android 可能会破坏 A/B/C/D，当用户返回您的应用时，只会重新创建活动 D。

2.  我曾经遇到过和你一样的问题，*`Starting an Activity from Notification destroys Parent Acitivities`*. 这是因为我使用了 TaskStackBuilder。即使在我停止使用 TaskStackBuilder 之后，问题仍然存在。只有在我卸载该应用程序后，它才能按预期工作。检查[https://stackoverflow.com/a/28268331/1198666的评论](https://stackoverflow.com/a/28268331/1198666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:13:40.800

这是因为活动生命周期的行为与 ICS 不同。这个事实回答了这个问题，但是我还没有弄清楚为什么会这样。如果有人想查看代码并自己验证此行为，请[点击此处](https://stackoverflow.com/questions/14441951/activity-lifecycle-behaves-differently-jellybean-onwards)******

# java - 通过超类引用调用子类方法

> ID：14376172
> 
> 赞同：-3
> 
> 时间：2013-01-17T09:46:44.453
> 
> 标签：java

我有这样的代码：

```
String stringRef = new String("Java");                    // (1)

System.out.println("(2): " + stringRef.getClass());       // (2)
System.out.println("(3): " + stringRef.length());         // (3)

Object objRef = stringRef;                                // (4)

// System.out.println("(5): " + objRef.length());            // (5) Not OK.
System.out.println("(6): " + objRef.equals("Java")); 
```

为什么我不能`length()`在第 (5) 行调用；`equals()`第 (6) 行将调用哪个类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:49:15.227

`equals`已声明，`Object`因此您可以调用它；`length`不是。编译器不会尝试确定究竟引用了什么对象类型`objRef`；它只有在知道它是一个对象的情况下才能工作。

Java 编译器根据点运算符左侧的表达式的静态类型静态解析要调用的方法的签名。多态性和动态分派的概念仅适用于决定调用哪个覆盖方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:48:56.150

你不能这样做，因为子类的方法不在你的超类中。在这种情况下，尽管 String 是 Object 的子类，因为 length() 没有在 java.lang.Object 类中声明，但它不可能在其实例上调用 length。

然而，equals() 方法在字符串类中被覆盖，因此将调用字符串的 equals()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:49:29.160

对于编译器，`objRef`是 的一个实例`Object`，它没有任何名为 的方法`length()`。另一方面，`equals()`是一个来自`Object`并继承于的方法`String`，这就是程序运行正确的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T09:49:58.047

length() 方法是字符串独有的。通过将其分配给一个对象，Java 不再知道它是一个字符串。

陈词滥调：所有的圆都是形状，不是所有的形状都是圆。

如果您执行以下操作，它将起作用：

```
System.out.println("(5): " + ((String)objRef).length()); 
```

在这里，您首先将类型转换为字符串，然后调用 length()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:50:08.187

当您有`Type`引用时，您只能调用对 公开且可见的方法或访问字段`Type`，即`Type`自己的方法或`Type`s 超类的公开方法。

在这种情况下，Object 定义了方法`equals`和许多其他方法，因此您可以使用它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T09:50:24.090

它是引用类型而不是实际对象，它定义了可以访问的所有方法。因此，即使您的超类引用包含子类对象，您也不能使用超类引用访问子类方法。

# android - openOptionsMenu 不适用于全屏

> ID：14376179
> 
> 赞同：3
> 
> 时间：2013-01-17T09:47:08.370
> 
> 标签：android

我有一个全屏模式的活动

```
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

我用按钮打开选项菜单

```
dmenu.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                openOptionsMenu();

            }
        }); 
```

但是当我点击按钮时没有任何反应

当我删除全屏主题时，一切正常，所以我可以从我的按钮和平板电脑软菜单按钮打开菜单

如何从我的按钮和全屏模式打开菜单

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-15T07:25:46.567

我有同样的问题。我通过将 AndroidManifest.xml 中的 targetSdkVersion 设置为 11 之前的版本来修复它，如下所示：

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="10"/> 
```

通过这样做，它可以工作并且对 openOptionsMenu() 的调用确实有效

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T10:01:55.287

这个问题已经在这里回答了 [Android Option Menu on Button click](https://stackoverflow.com/questions/5533757/android-option-menu-on-button-click)

# c# - 使用 SqlDataAdapter 更新多个表

> ID：14376185
> 
> 赞同：0
> 
> 时间：2013-01-17T09:47:40.403
> 
> 标签：c#, sql-server, strongly-typed-dataset, multiple-tables

几天来，我一直在浏览互联网上的页面和页面，尝试不同的方法，但我仍然不确定我应该如何做到这一点。

在我的第三个 InsertCommand 中，我想引用其他 2 个表上的列。

```
// Populate a DataSet from multiple Tables... Works fine
sqlDA = new SqlDataAdapter();
sqlDA.SelectCommand = new SqlCommand("SELECT * FROM hardware", sqlConn);
sqlDA.Fill(ds, "Hardware");
sqlDA.SelectCommand.CommandText = "SELECT * FROM software";
sqlDA.Fill(ds, "Software");
sqlDA.SelectCommand.CommandText = "SELECT * FROM join_hardware_software";
sqlDA.Fill(ds, "HS Join");

// After DataSet has been changed, perform an Insert on relevant tables...
updatedDs = ds.GetChanges();
SqlCommand DAInsertCommand = new SqlCommand();
DAInsertCommand.CommandText = "INSERT INTO hardware (host, model, serial) VALUES (@host, @model, @serial)";
DAInsertCommand.Parameters.AddWithValue("@host", null).SourceColumn = "host";
DAInsertCommand.Parameters.AddWithValue("@model", null).SourceColumn = "model";
DAInsertCommand.Parameters.AddWithValue("@serial", null).SourceColumn = "serial";
sqlDA.InsertCommand = DAInsertCommand;
sqlDA.Update(updatedDs, "Hardware"); // Works Fine

DAInsertCommand.Parameters.Clear(); // Clear parameters set above
DAInsertCommand.CommandText = "INSERT INTO software (description) VALUES (@software)";
DAInsertCommand.Parameters.AddWithValue("@software", null).SourceColumn = "description";
sqlDA.InsertCommand = DAInsertCommand;
sqlDA.Update(updatedDs, "Software"); // Works Fine

DAInsertCommand.Parameters.Clear(); // Clear parameters set above
DAInsertCommand.CommandText = "INSERT INTO join_hardware_software (hardware_id, software_id) VALUES (@hardware_id, @software_id)";
// *****
DAInsertCommand.Parameters.AddWithValue("@hardware_id", null).SourceColumn = "?"; // I want to set this to be set to my 'hardware' table to the 'id' column.
DAInsertCommand.Parameters.AddWithValue("@software_id", null).SourceColumn = "?"; // I want to set this to be set to my 'software' table to the 'id' column.
// *****
sqlDA.InsertCommand = DAInsertCommand;
sqlDA.Update(updatedDs, "HS Join"); 
```

有人可以告诉我哪里出了问题以及我如何克服这个问题吗？非常感谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:01:46.873

关于您的评论，这似乎是其中一种情况，如果您和我坐在一起，我们会对此进行排序，但这有点棘手。

这是我在使用 SqlConnection 和 SqlCommand 时使用的代码。这里可能有一些东西可以帮助你。

```
 public static void RunSqlCommandText(string connectionString, string commandText) {
        SqlConnection conn = new SqlConnection(connectionString);
        SqlCommand comm = conn.CreateCommand();

        try {
            comm.CommandType = CommandType.Text;
            comm.CommandText = commandText;

            comm.Connection = conn;
            conn.Open();
            comm.ExecuteNonQuery();
        } catch (Exception ex) {
            System.Diagnostics.EventLog el = new System.Diagnostics.EventLog();
            el.Source = "data access class";
            el.WriteEntry(ex.Message + ex.StackTrace + " SQL '" + commandText + "'");
        } finally {
            conn.Close();
            comm.Dispose();
        }
    }

    public static int RunSqlAndReturnId(string connectionString, string commandText) {
        SqlConnection conn = new SqlConnection(connectionString);
        SqlCommand comm = conn.CreateCommand();
        int id = -1;

        try {
            comm.CommandType = CommandType.Text;
            comm.CommandText = commandText;

            comm.Connection = conn;
            conn.Open();
            var returnvalue = comm.ExecuteScalar();
            if (returnvalue != null) {
                id = (int)returnvalue;                
            }
        } catch (Exception ex) {
            System.Diagnostics.EventLog el = new System.Diagnostics.EventLog();
            el.Source = "data access class";
            el.WriteEntry(ex.Message + ex.StackTrace + " SQL '" + commandText + "'");
        } finally {
            conn.Close();
            comm.Dispose();
        }

        return id;
    } 
```

# css - WordPress CSS 混乱

> ID：14376193
> 
> 赞同：0
> 
> 时间：2013-01-17T09:48:24.147
> 
> 标签：css, wordpress

早上好，

我正在从头开始创建我的第一个 Wordpress 主题，并且遇到了第一个障碍。

如果你看看我到目前为止的进展；

```
http://www.trevorpeters.co.uk/brad/?page_id=4 
```

您会看到 CSS 链接正确，但 H1 标签和 P 标签并没有从定义的样式中获取所有属性，在 Mozilla Firefox 开发工具中，一些属性被划掉但没有被任何其他属性覆盖样式。

谢谢，布拉德休斯顿

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:54:32.543

你的 style.css 高于你的 reset.css .. 你期望什么？

```
<link rel="stylesheet" href="http://www.trevorpeters.co.uk/brad/wp-content/themes/andromeda/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="http://www.trevorpeters.co.uk/brad/wp-content/themes/andromeda/css/reset.css" type="text/css" media="screen" /> 
```

应该

```
<link rel="stylesheet" href="http://www.trevorpeters.co.uk/brad/wp-content/themes/andromeda/css/reset.css" type="text/css" media="screen" />
<link rel="stylesheet" href="http://www.trevorpeters.co.uk/brad/wp-content/themes/andromeda/style.css" type="text/css" media="screen" /> 
```

检查您的 header.php 中的代码...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:55:07.183

您的样式被`reset.css line 92`. 您可以`computed styles`在开发工具中查看最终将哪种样式应用于您的元素以及该样式的来源名称。当有很多样式相互覆盖时，这非常方便。

您需要切换`style.css`and的顺序，`reset.css`然后一切都应该没问题，因为现在您的样式表覆盖了`reset.css`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:56:20.847

看起来您以错误的顺序放置了 CSS 文件。

```
<link rel="stylesheet" href="http://www.trevorpeters.co.uk/brad/wp-content/themes/andromeda/style.css" type="text/css" media="screen" />
<link rel="stylesheet" href="http://www.trevorpeters.co.uk/brad/wp-content/themes/andromeda/css/reset.css" type="text/css" media="screen" /> 
```

你在 style.css 之后重置了你的风格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T09:58:21.880

您需要重新排序 css 样式表。您将 reset.css 放在 style.css 之后，因此重置与样式重叠。

# javafx-2 - JavaFx 2.x：如何删除和添加绘图数据？

> ID：14376194
> 
> 赞同：1
> 
> 时间：2013-01-17T09:48:32.743
> 
> 标签：javafx-2, linechart

在下面的代码中，我想添加两个按钮，然后单击一个按钮（“删除”），它将一一删除绘制的数据，并通过单击按钮（“添加”）将其绘制回来，例如示例：

通过运行类绘制的完整数据

![在此处输入图像描述](../Images/670126e2a925a67209d0255d35a58498.png)

现在通过单击删除按钮最后一个数据点消失

![在此处输入图像描述](../Images/4420e763cba49b9a87f2913b15c56d23.png)

再次单击并再次最后一个数据点消失，依此类推

![在此处输入图像描述](../Images/aa742fb5a05d7467965fdd0306f87ad1.png)

单击“添加”按钮将执行反向操作：每次单击将添加回一个数据点

```
import javafx.application.Application; 
import javafx.beans.property.SimpleDoubleProperty; 
import javafx.event.EventHandler;  
import javafx.scene.chart.NumberAxis; 
import javafx.scene.chart.XYChart; 
import javafx.stage.Stage; 
import javafx.scene.Scene; 
import javafx.scene.chart.LineChart; 
import javafx.scene.control.Button;
import javafx.scene.input.MouseEvent; 
import javafx.scene.layout.BorderPane; 

public class XYMove extends Application {

BorderPane pane; 
XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectY = new SimpleDoubleProperty(); 

Button button1 = new Button("Remove");
Button button2 = new Button("Add");

@Override 
public void start(Stage stage) { 

final NumberAxis xAxis = new NumberAxis(12, 20, 1);

double max = 12;
double min = 3;

max *= (1+((double)3/100));
min *= (1-((double)3/100));

final NumberAxis yAxis = new NumberAxis(min, max, 1); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

@Override 
public String toString(Number object) { 
    return String.format("%2.0f", object); 
} 
}); 

final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(false); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 3)); 
series1.getData().add(new XYChart.Data(2, 8)); 
series1.getData().add(new XYChart.Data(3, 6)); 
series1.getData().add(new XYChart.Data(4, 7)); 
series1.getData().add(new XYChart.Data(5, 5)); 
series1.getData().add(new XYChart.Data(6, 6)); 
series1.getData().add(new XYChart.Data(7, 4)); 
series1.getData().add(new XYChart.Data(8, 7)); 
series1.getData().add(new XYChart.Data(9, 6)); 
series1.getData().add(new XYChart.Data(10, 7));
series1.getData().add(new XYChart.Data(11, 6)); 
series1.getData().add(new XYChart.Data(12, 7));
series1.getData().add(new XYChart.Data(13, 6));
series1.getData().add(new XYChart.Data(14, 12)); 
series1.getData().add(new XYChart.Data(15, 10)); 
series1.getData().add(new XYChart.Data(16, 11)); 
series1.getData().add(new XYChart.Data(17, 9)); 
series1.getData().add(new XYChart.Data(18, 10));

pane = new BorderPane(); 
pane.setCenter(lineChart); 
Scene scene = new Scene(pane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 
stage.show();
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 

if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {             
    rectinitX.set(mouseEvent.getX()); 
} 
else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED ||  mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

    double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
    double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound();             
    double Delta=0.3;

    if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
    if(rectinitX.get() < mouseEvent.getX()&& newXlower >= 0){    
        newXlower=xAxis.getLowerBound()-Delta;
        newXupper=xAxis.getUpperBound()-Delta;
    }
else if(rectinitX.get() > mouseEvent.getX()&& newXupper <= 22){    
        newXlower=xAxis.getLowerBound()+Delta;
        newXupper=xAxis.getUpperBound()+Delta;
    }    
    xAxis.setLowerBound( newXlower ); 
    xAxis.setUpperBound( newXupper );                        
    }                                        
    rectinitX.set(mouseEvent.getX());                                 
 } 
 } 
 }; 
 public static void main(String[] args) {
    launch(args);
}
} 
```

谢谢大家。

**编辑：**我已经能够解决这个问题，谢谢大家

# session - 使用 Servlet API 设置 SessionScoped ManagedBean

> ID：14376198
> 
> 赞同：0
> 
> 时间：2013-01-17T09:48:51.170
> 
> 标签：session, jsf-2, servlet-filters, managed-bean

我在我的应用程序中配置了一个过滤器，它拦截所有请求，它需要为某个`UserInfoBean`名为 as的 bean 设置值，该 bean`userInfo`定义为 a `ManagedBean`，即`SessionScoped`.

当我尝试创建 的实例`UserInfoBean`并将其设置为具有名称的会话`userInfo`并尝试在 JSF 页面上访问它时`#{userInfo.firstName}`，将返回一个`null`值。我的方法有什么问题？

豆类是：

```
@ManagedBean (name="userInfo")
@SessionScoped
public class UserInfoBean {
    private String firstName;

    public String getFirstName() {
        return firstName;
    }
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    public UserInfoBean(String firstName) {
        this.firstName = firstName;
    }

} 
```

过滤器代码为：

```
public void doFilter(HttpServletRequest request, HttpServletResponse response, FilterChain chain) throws IOException, ServletException {
    ....
    HttpSession session = request.getSession();
    session.setAttribute("userInfo", new UserInfoBean("Joe"));
    ....
} 
```

JSF 代码是：

```
<h:outputText value="#{userInfo.firstName}" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:20:27.150

消除

```
@ManagedBean (name="userInfo")
@SessionScoped 
```

从课堂上。您自己通过 servlet 过滤器而不是 JSF 管理 bean。

将`session.setAttribute("userInfo", new UserInfoBean("Joe"));`已经使其可用`#{userInfo}`。JSF 不需要创建/覆盖它。

请注意，它`@ManagedProperty("#{userInfo}")`仍将继续工作；它不要求目标对象是 JSF 托管 bean，而只是它可以通过指定的 EL 表达式“通常方式”获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:56:41.330

您可以使用

```
UserInfoBean userInfo = (UserInfoBean) request.getSession().getAttribute("userInfoBean"); 
```

但是 bean 必须在此之前已经在会话中创建。因此，如果过滤器应该进行一些身份验证，然后检查 bean 是否为空或用户名错误，那么您就知道您有未经授权的用户。

# jquery - 如何在 jQuery 中更改选取框速度？

> ID：14376202
> 
> 赞同：0
> 
> 时间：2013-01-17T09:49:01.610
> 
> 标签：jquery, html, marquee

如何使用 jQuery 控制选取框的速度？请建议确切的属性/属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:50:44.157

根据 MDN，您可以使用以下属性：

*   `scrollamount`
*   `truespeed`

[https://developer.mozilla.org/en-US/docs/HTML/Element/marquee](https://developer.mozilla.org/en-US/docs/HTML/Element/marquee)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T09:51:51.517

`<marquee behavior="scroll" scrollamount="1" direction="left" width="350">`

# java - Java HSBC API 支付网关

> ID：14376210
> 
> 赞同：-2
> 
> 时间：2013-01-17T09:49:24.260
> 
> 标签：java, xml

我正在寻找一个 Java HSBC API 支付网关脚本。我用 php 开发了它，但是来到 java 我怎么能这样做。下面是我使用的 php 代码

```
$ch = curl_init();
$url = ‘https://www.secure-epayments.apixml.hsbc.com’;
 curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $xml_data_will_go_here);
ob_start();
$data = curl_exec($ch);
curl_close ($ch);
ob_end_clean(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:53:15.547

看看 HTTPConnection 类，这可能会有所帮助！

[http://docs.oracle.com/javase/1.5.0/docs/api/java/net/HttpURLConnection.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/HttpURLConnection.html)

# sql-server-2008 - SQL Server 从表中选择列，其中子查询中的列

> ID：14376213
> 
> 赞同：0
> 
> 时间：2013-01-17T09:49:35.907
> 
> 标签：sql-server-2008, subquery

我的查询结果错误，因为我没有得到任何结果，但肯定存在。

询问

```
 select nr 
 from table1 
 inner join table2 on table2.nr = table1.nr
 where table1.nr in (select nr 
                     from table2 
                     where columnn like '%value%') 
   and nr in (select nr from table2 where columnn like '%other value%') 
```

当我只使用第一个子查询时，我得到了结果，但是其中的第二个子查询我没有

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:51:23.617

使用 OR 代替 AND

```
select nr from table1 
 inner join table2 on table2.nr = table1.nr
 where table1.nr in (select nr from table2 where columnn like '%value%') or nr in 
(select nr from table2 where columnn like '%other value%') 
```

如果它与您使用的查询完全相同，则连接是无用的。

优雅的方式是

```
select nr from table1 
 inner join table2 on table2.nr = table1.nr
 where CONTAINS(table2.column, '"*value*" OR "*other value*"') 
```

# c# - 如何在客户报告定义 (.RDLC) 文件中以阿拉伯语显示数字

> ID：14376214
> 
> 赞同：1
> 
> 时间：2013-01-17T09:49:40.127
> 
> 标签：c#, visual-studio-2010, rdlc

我在visual stdio 2010中使用微软报告，我想用阿拉伯语显示数字（٠‎，١‎，٢‎，٣‎，٤‎，٥‎，٦‎，٧‎，٨‎，٩‎）我在此站点和其他站点上进行了搜索，但找不到解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:56:56.033

我从未使用过`rdlc`，但我认为这是一个`Culture`问题。

查看此博客文章了解[如何在 .net 中生成阿拉伯数字，](http://weblogs.asp.net/abdullaabdelhaq/archive/2009/06/27/displaying-arabic-number.aspx)并查看[此](http://weblogs.asp.net/abdullaabdelhaq/archive/2009/06/27/displaying-arabic-number.aspx#7135645)评论。

```
CultureInfo.CurrentCulture.TwoLetterISOLanguageName == "ar" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T15:14:49.573

在属性集中

*   语言 = ar; 比如 ar_IQ
*   数字变量 = 3;

在客户端设备中使用阿拉伯语配置

# java - 如何在运行时突出显示 JLabel 的一部分？

> ID：14376216
> 
> 赞同：0
> 
> 时间：2013-01-17T09:49:42.590
> 
> 标签：java, jlabel, overriding

我在 JPanel 中有一个 JLabel。我将 Netbeans IDE 用于我的 java 程序的 GUI（免费设计，没有布局管理器）。

在运行时，我需要突出显示我的 JLabel 的一部分。可以像这里所说的那样突出 JLabel 的一部分：[如何突出 JLabel 的一部分？](https://stackoverflow.com/questions/3533967/how-to-highlight-part-of-a-jlabel)

我不知道如何在运行时做到这一点，我的意思是我已经有一个 JLabel，现在我该如何覆盖它的 paintComponent() 方法呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:25:41.050

这是 Tikhon Jelvis 在您提到的帖子中给出的答案的说明性示例，您只需添加一些字段（在此示例中`start`和`end`）以指示要突出显示的区域，并使用一种方法（`highlightRegion`在此示例中）设置这些字段：

```
import java.awt.Color;
import java.awt.FontMetrics;
import java.awt.Graphics;

import javax.swing.JFrame;
import javax.swing.JLabel;

public class Main
{
    public static void main(String[] argv)
    {
        JFrame frame = new JFrame("Highlighting");
        frame.setSize(300, 100);

        Label label = new Label();
        label.setText("Money does not buy happiness");
        label.setVerticalAlignment(JLabel.TOP);
        label.highlightRegion(3, 15);

        frame.add(label);
        frame.setVisible(true);
    }

    static class Label extends JLabel
    {
        private static final long serialVersionUID = 1L;
        private int start;
        private int end;

        @Override
        public void paint(Graphics g)
        {
            FontMetrics fontMetrics = g.getFontMetrics();

            String startString = getText().substring(0, start);
            String text = getText().substring(start, end);

            int startX = fontMetrics.stringWidth(startString);
            int startY = 0;

            int length = fontMetrics.stringWidth(text);
            int height = fontMetrics.getHeight();

            g.setColor(new Color(0x33, 0x66, 0xFF, 0x66));
            g.fillRect(startX, startY, length, height);

            super.paint(g);
        }

        public void highlightRegion(int start, int end)
        {
            this.start = start;
            this.end = end;
        }
    }

} 
```

注意使用`label.setVerticalAlignment(JLabel.TOP);`来简化事情。如果您不使用它，那么您需要进行额外的计算以确定要突出显示的区域的确切垂直位置。

# audio - 使用 libavcodec 将 .m4a 转换为 PCM

> ID：14376218
> 
> 赞同：3
> 
> 时间：2013-01-17T09:49:48.043
> 
> 标签：audio, ffmpeg, decoding, pcm, libavcodec

我正在尝试将 .m4a 文件转换为原始 PCM 文件，以便我可以在 Audacity 中播放它。

根据 AVCodecContext，它是一个使用样本格式 AV_SAMPLE_FMT_FLTP 的 44100 Hz 轨道，据我了解，当使用 avcodec_decode_audio4 解码时，我应该得到两个浮点值数组（每个通道一个）。

我不确定 AVCodecContext 的 bits_per_coded_sample = 16 的重要性

不幸的是，Audacity 播放结果就好像我的原始音轨中混入了一些白噪声。

这是我所做的一些示例代码。请注意，我还为使用带符号的 16 位非交错数据 (sample_format = AC_SAMPLE_FMT_S16P) 的轨道添加了一个案例，Audacity 可以正常播放。

```
int AudioDecoder::decode(std::string path)
{
  const char* input_filename=path.c_str();

  av_register_all();

  AVFormatContext* container=avformat_alloc_context();
  if(avformat_open_input(&container,input_filename,NULL,NULL)<0){
    printf("Could not open file");
  }

  if(avformat_find_stream_info(container, NULL)<0){
      printf("Could not find file info");
  }
  av_dump_format(container,0,input_filename,false);

  int stream_id=-1;
  int i;
  for(i=0;i<container->nb_streams;i++){
    if(container->streams[i]->codec->codec_type==AVMEDIA_TYPE_AUDIO){
        stream_id=i;
        break;
    }
  }
  if(stream_id==-1){
    printf("Could not find Audio Stream");
  }

  AVDictionary *metadata=container->metadata;
  AVCodecContext *ctx=container->streams[stream_id]->codec;
  AVCodec *codec=avcodec_find_decoder(ctx->codec_id);

  if(codec==NULL){
    printf("cannot find codec!");
  }

  if(avcodec_open2(ctx,codec,NULL)<0){
     printf("Codec cannot be found");
  }

  AVSampleFormat sfmt = ctx->sample_fmt;

  AVPacket packet;
  av_init_packet(&packet);
  AVFrame *frame = avcodec_alloc_frame();

  int buffer_size = AVCODEC_MAX_AUDIO_FRAME_SIZE+ FF_INPUT_BUFFER_PADDING_SIZE;;
  uint8_t buffer[buffer_size];
  packet.data=buffer;
  packet.size =buffer_size;

  FILE *outfile = fopen("test.raw", "wb");

  int len;
  int frameFinished=0;

  while(av_read_frame(container,&packet) >= 0)
  {
      if(packet.stream_index==stream_id)
      {
        //printf("Audio Frame read \n");
        int len=avcodec_decode_audio4(ctx, frame, &frameFinished, &packet);

        if(frameFinished)
        {       
          if (sfmt==AV_SAMPLE_FMT_S16P)
          { // Audacity: 16bit PCM little endian stereo
            int16_t* ptr_l = (int16_t*)frame->extended_data[0];
            int16_t* ptr_r = (int16_t*)frame->extended_data[1];
            for (int i=0; i<frame->nb_samples; i++)
            {
              fwrite(ptr_l++, sizeof(int16_t), 1, outfile);
              fwrite(ptr_r++, sizeof(int16_t), 1, outfile);
            }
          }
          else if (sfmt==AV_SAMPLE_FMT_FLTP)
          { //Audacity: big endian 32bit stereo start offset 7 (but has noise)
            float* ptr_l = (float*)frame->extended_data[0];
            float* ptr_r = (float*)frame->extended_data[1];
            for (int i=0; i<frame->nb_samples; i++)
            {
                fwrite(ptr_l++, sizeof(float), 1, outfile);
                fwrite(ptr_r++, sizeof(float), 1, outfile);
             }
           }            
        }
    }
}
fclose(outfile);
av_close_input_file(container);
return 0; 
```

}

我希望我刚刚完成了一个简单的转换（最重要/最不重要的位问题），但目前我无法弄清楚。请注意，Audacity 只能导入 32 位或 64 位浮点（大端或小端）的 RAW 浮点数据。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:12:36.537

我认为问题出在“nb_samples”中。这不完全是你需要的。最好尝试使用“linesize [0]”。

例子：

```
char* ptr_l = (char*)frame->extended_data[0];
char* ptr_r = (char*)frame->extended_data[1];
size_t size = sizeof(float);
for (int i=0; i<frame->linesize[0]; i+=size)
{
   fwrite(ptr_l, size, 1, outfile);
   fwrite(ptr_r, size, 1, outfile);
   ptr_l += size;
   ptr_r += size;    
} 
```

它用于“float”，并对“int16_t”重复相同的操作。但“大小”将是“sizeof(int16_t)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-17T15:18:07.063

您必须在 AC_SAMPLE_FMT_S16P 中使用 AV_SAMPLE_FMT_FLTP 的转换器

[如何将采样率从 AV_SAMPLE_FMT_FLTP 转换为 AV_SAMPLE_FMT_S16？](https://stackoverflow.com/questions/14989397/how-to-convert-sample-rate-from-av-sample-fmt-fltp-to-av-sample-fmt-s16)

这是一个工作示例（在 pAudioBuffer 中，白鼻子中有 pcm 数据）：

```
SwrContext *swr;
swr=swr_alloc();
av_opt_set_int(swr,"in_channel_layout",2,0);
av_opt_set_int(swr, "out_channel_layout", 2,  0);
av_opt_set_int(swr, "in_sample_rate",     codecContext->sample_rate, 0);
av_opt_set_int(swr, "out_sample_rate",    codecContext->sample_rate, 0);
av_opt_set_sample_fmt(swr, "in_sample_fmt",  AV_SAMPLE_FMT_FLTP, 0);
av_opt_set_sample_fmt(swr, "out_sample_fmt", AV_SAMPLE_FMT_S16P,  0);
swr_init(swr);
int16_t * pAudioBuffer = (int16_t *) av_malloc (AUDIO_INBUF_SIZE * 2);
while(av_read_frame(fmt_cntx,&readingPacket)==0){
   if(readingPacket.stream_index==audioSteam->index){
    AVPacket decodingPacket=readingPacket;
        while(decodingPacket.size>0){
     int gotFrame=0;
         int result=avcodec_decode_audio4(codecContext,frame,&gotFrame,&decodingPacket);
     if(result<0){
           av_frame_free(&frame);
       avformat_close_input(&fmt_cntx);
       return null;
        }
        if(result>=0 && gotFrame){
          int data_size=frame->nb_samples*frame->channels;
          swr_convert(swr,&pAudioBuffer,frame->nb_samples,frame->extended_data,frame->nb_samples);
          jshort *outShortArray=(*pEnv)->NewShortArray(pEnv,data_size);
                                (*pEnv)->SetShortArrayRegion(pEnv,outShortArray,0,data_size,pAudioBuffer);
          (*pEnv)->CallVoidMethod(pEnv,pObj,callBackShortBuffer,outShortArray,data_size);
          (*pEnv)->DeleteLocalRef(pEnv,outShortArray);
          decodingPacket.size -= result;
          decodingPacket.data += result;
        }else{
          decodingPacket.size=0;
          decodingPacket.data=NULL;
        }}
    av_free_packet(&decodingPacket);
    } 
```

# c++ - 在 c++ win32 控制台应用程序中输出 unicode 符号 π 和 ≈

> ID：14376219
> 
> 赞同：6
> 
> 时间：2013-01-17T09:49:48.330
> 
> 标签：c++, winapi, unicode, ascii, pi

我对编程相当陌生，但似乎该`π(pi)`符号不在`ASCII`处理的标准输出集中。

我想知道是否有办法让控制台输出`π`符号，以便表达有关某些数学公式的准确答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:05:31.867

我不太确定任何其他方法（例如使用 STL 的方法），但您可以使用 Win32 使用[WriteConsoleW](http://msdn.microsoft.com/en-us/library/ms687401%28v=vs.85%29.aspx)执行此操作：

```
HANDLE hConsoleOutput = GetStdHandle(STD_OUTPUT_HANDLE);
LPCWSTR lpPiString = L"\u03C0";

DWORD dwNumberOfCharsWritten;
WriteConsoleW(hConsoleOutput, lpPiString, 1, &dwNumberOfCharsWritten, NULL); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:03:29.203

Microsoft CRT 不是很熟悉 Unicode，因此可能需要绕过它并`WriteConsole()`直接使用。我假设您已经为 Unicode 编译，否则您需要显式使用`WriteConsoleW()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T12:26:34.010

我正处于学习阶段，如果我有什么不对的地方，请纠正我。

看起来这是一个三步过程：

1.  使用宽版本的 cout、cin、string 等。所以：wcout、wcin、wstring
2.  在使用流之前，请将其设置为 Unicode 友好模式。
3.  将目标控制台配置为使用支持 Unicode 的字体。

您现在应该能够摇滚那些时髦的 åäös。

例子：

```
#include <iostream>
#include <string>
#include <io.h>

// We only need one mode definition in this example, but it and several other
// reside in the header file fcntl.h.

#define _O_WTEXT        0x10000 /* file mode is UTF16 (translated) */
// Possibly useful if we want UTF-8
//#define _O_U8TEXT       0x40000 /* file mode is UTF8  no BOM (translated) */ 

void main(void)
{
    // To be able to write UFT-16 to stdout.
    _setmode(_fileno(stdout), _O_WTEXT);
    // To be able to read UTF-16 from stdin.
    _setmode(_fileno(stdin), _O_WTEXT);

    wchar_t* hallå = L"Hallå, värld!";

    std::wcout << hallå << std::endl;

      // It's all Greek to me. Go UU!
    std::wstring etabetapi = L"η β π";

    std::wcout << etabetapi << std::endl;

    std::wstring myInput;

    std::wcin >> myInput;

    std:: wcout << myInput << L" has " << myInput.length() << L" characters." << std::endl;

    // This character won't show using Consolas or Lucida Console
    std::wcout << L"♔" << std::endl;
} 
```

# c++ - 如果在运行时添加两个按钮，mfc 按钮将显示不完整

> ID：14376224
> 
> 赞同：0
> 
> 时间：2013-01-17T09:50:05.097
> 
> 标签：c++, c, visual-c++, user-interface, mfc

```
CButton *btn = new CButton();
btn->Create("btn", WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON, CRect(0,0,50,50), this, 1234);
btn = new CButton();
btn->Create("btn", WS_CHILD|WS_VISIBLE|BS_PUSHBUTTON, CRect(40,30,50,50), this, 1234); 
```

在 CDialog::OnInitDialog() 中运行上述代码只会正确显示第一个按钮，第二个按钮将显示不完整。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:34:34.447

您正在使用的`CRect`构造函数没有做您认为它正在做的事情。4[参数覆盖](http://msdn.microsoft.com/en-us/library/9y3502k0%28v=vs.80%29.aspx)以left、right、top、bottom 作为参数。您只是使矩形太小-它没有不完整的地方。

顺便说一句，您要为两个控件提供相同的控件 ID 1234 - 这可能很危险 - 您应该给它们唯一的值。

# graph - 如何自动保存 jmeter 摘要报告和其他图表（例如响应时间图）

> ID：14376234
> 
> 赞同：11
> 
> 时间：2013-01-17T09:50:18.767
> 
> 标签：graph, report, jmeter, summary, jmeter-plugins

每次运行 Jmeter 脚本时，我都必须手动保存摘要报告和图表。
我希望它们自动存储。

我尝试将摘要结果写入文件为`C:\JMeter\Summary${__time(ddMMyy HHmmss)}.csv`.

但它以 XML 格式输出。我想要表格格式。

当我尝试将响应图保存如下`C:\JMeter\ResponseGraph${__time(ddMMyy HHmmss)}.tif`。
不存储图表。它显示为无效图像。

另外，如果我对网站进行负载测试，请告诉我如何分析我获得的结果以及我应该如何解释它们。
我的网站就像以用户身份登录，搜索并将产品添加到购物篮，处理订单，付款并查看最近处理的订单。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T10:46:58.347

1.  查看这些答案以获取有关通过 GUI 和 CMD 获取 jmeter 开箱即用组件的 csv 结果的详细信息：

    *   [如何获取我的 CSV 文件？](https://stackoverflow.com/a/9827235/993246)
    *   [如何使用命令提示符将 JMeter 聚合报告结果保存到 CSV 文件？](https://stackoverflow.com/a/7992846/993246)

    要在 XML/CSV 结果存储格式之间为侦听器切换，请使用

    *   侦听器的“配置”对话框（示例结果保存配置：选中/取消选中“另存为 XML”）
    *   或jmeter.properties 文件中的 [结果文件配置部分：](http://jmeter.apache.org/usermanual/listeners.html#defaults)

        ```
        jmeter.save.saveservice.output_format=csv
        jmeter.save.saveservice.assertion_results_failure_message=true
        jmeter.save.saveservice.default_delimiter=| 
        ```

2.  您可能会喜欢这套漂亮的自定义 jmeter-plugins - [Jmeter Plugins](http://code.google.com/p/jmeter-plugins/) - 特别是 Graph 组件和[JMeterPluginsCMD 命令行工具](http://code.google.com/p/jmeter-plugins/wiki/JMeterPluginsCMD)。

3.  关于保存生成的图表的可能性：我可以成功地以 .tif 和 .png 格式（Jmeter v.2.8）保存为[Aggregate Graph](http://jmeter.apache.org/usermanual/component_reference.html#Aggregate_Graph)和[Response Time Graph创建的图表。](http://jmeter.apache.org/usermanual/component_reference.html#Response_Time_Graph)
    可以假设您可能正在使用您的路径在响应时间图/聚合图配置部分的字段中将图形存储为图像（`C:\JMeter\ResponseGraph${__time(ddMMyy HHmmss)}.tif`上面有问题） 。但是这个字段是用于 jmeter 的结果文件（.jtl / .csv）写入/读取的，而不是将图形存储为图像的路径。`Filename``Write results to file / Read from file`

    我不确定您是否可以自动存储从这 2 个侦听器生成的图表（例如，在非 gui 模式下的测试场景执行期间）。
    如果您需要这个，您可以更好地查看[JMeterPluginsCMD 命令行工具](http://code.google.com/p/jmeter-plugins/wiki/JMeterPluginsCMD)，该工具具有为选定的侦听器生成 PNG 的选项（插件的使用说明中有示例）。

4.  对于日志分析的可能性，请查看这个最近的问题：

    *   [如何分析Jmeter报告？](https://stackoverflow.com/a/14256688/993246)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-09T13:11:03.807

在您的 Apache Jmeter 中添加**jp@gc - 图形生成器**插件。它将在用户定义目录中创建并保存图表。您必须在它之前添加**查看结果树**。 [在此处输入图像描述](https://i.stack.imgur.com/8xzjt.png)

# java - 使用 Map 在数组列表中查找重复项 有输入顺序

> ID：14376243
> 
> 赞同：4
> 
> 时间：2013-01-17T09:50:31.760
> 
> 标签：java

大家好，我正在尝试打印所有重复的元素，这工作正常，但输出不按顺序排列（来自用户输入或来自文本文件）。我想按顺序打印所有元素（不打印重复项）。我怎么做？代码来自此[Find the duplicate elements in arraylist 并显示](https://stackoverflow.com/questions/12947926/find-the-duplicate-elements-in-arraylist-and-display) 感谢@Cory Kendall 的代码。

**********更新的问题：代码现在与LinkedHashMap完美配合。现在我希望用数字项目符号（即 1\. name1 = 2 ）递增地打印输出。谢谢

```
List<String> strings = new ArrayList<String>();
// suppose datas are entered by user incrementally or from a text files.

Map<String, Integer> counts = new HashMap<String, Integer>();

for (String str : strings) {
    if (counts.containsKey(str)) {
        counts.put(str, counts.get(str) + 1);
    } else {
        counts.put(str, 1);
    }
}

for (Map.Entry<String, Integer> entry : counts.entrySet()) {
    System.out.println(entry.getKey() + " = " + entry.getValue());
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:51:36.857

如果您想记住地图中的插入顺序，您需要使用[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html). 在您的情况下，您必须更换

```
Map<String, Integer> counts = new HashMap<String, Integer>(); 
```

和

```
Map<String, Integer> counts = new LinkedHashMap<String, Integer>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:51:46.660

`HashMap`未排序或排序，`LinkedHashMap`如果您关心则`insertion order`使用，或者`TreeMap`如果您关心则使用`natural order`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-18T08:14:15.270

```
public class FindDup {
    public static void main(String[] args) {
        String str[] = { "yogi", "ram", "ram", "yogi", "yogi", "yogi", "raju", "raju", "ram", "yogi", };
        Map<String, Integer> map = new HashMap<String, Integer>();
        for (String s : str) {
            if (map.containsKey(s)) {
                map.put(s, map.get(s) + 1);
            } else {
                map.put(s, 1);
            }
        }
        for (Entry<String, Integer> e : map.entrySet()) {
            System.out.println(e.getKey() + "---" + e.getValue());

        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T09:51:51.187

[LinkedHashMap](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)将保持顺序。

```
Map<String, Integer> counts = new LinkedHashMap<String, Integer>(); 
```

关于`LinkedHashMap`：

> Map 接口的哈希表和链表实现，具有可预测的迭代顺序。此实现与 HashMap 的不同之处在于它维护一个双向链表，该列表贯穿其所有条目。这个链表定义了迭代顺序，通常是键插入映射的顺序（插入顺序）。

# iphone - 从 UITableView 创建 UIImage

> ID：14376249
> 
> 赞同：3
> 
> 时间：2013-01-17T09:50:47.583
> 
> 标签：iphone, ios, objective-c, uitableview, uiimage

有没有办法`UIImage`从 a 中创建一个`UITableView`？

我知道这段代码会`UIImage`从给定的内容中提取`UIView`：

```
-(UIImage*) makeImageOutOfView:(UIView*)view {

    UIGraphicsBeginImageContext(view.bounds.size);

    [view.layer renderInContext:UIGraphicsGetCurrentContext()];

    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return viewImage;
} 
```

但它只会创建一个具有表格框架大小的图像。我想创建一个显示整个表格内容的图像。另一个问题是，不仅创建的图像仅限于表格的框架，而且在滚动表格后创建图像时会产生非常奇怪的结果（只有前 6 个中的可见单元格显示在图像中，仅此而已，未绘制其他可见单元格..）

编辑 - 我想创建一个从 tableView 的内容中提取的图像，而不是设置 tableView 的背景来显示图像..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:15:04.503

我只是为您创建一个 DEMO，希望它可以帮助您像这样捕获表格图像：-

```
-(IBAction)savebutn:(id)sender
{
    [tbl reloadData];

    CGRect frame = tbl.frame;
    frame.size.height = tbl.contentSize.height;
    tbl.frame = frame;

    UIGraphicsBeginImageContext(tbl.bounds.size);
    [tbl.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *saveImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();
    NSData *imageData = UIImagePNGRepresentation(saveImage);
    NSFileManager *fileMan = [NSFileManager defaultManager];

    NSString *fileName = [NSString stringWithFormat:@"%d.png",1];
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];
    [fileMan createFileAtPath:pdfFileName contents:imageData attributes:nil];

} 
```

这是捕获图像的屏幕截图：-

![在此处输入图像描述](../Images/a71fc1b79ae348084b024bef664c456f.png)

捕获图像从上到下包含完整的表格单元格，请下载它的演示：-

[http://www.sendspace.com/file/w48sod](http://www.sendspace.com/file/w48sod)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:05:51.213

您可以做的一件事是，创建一个`UIView`，将所有单元格添加到您想要的图像中的另一个下方，最后`UIView`使用您拥有的代码将其转换为图像。

我认为这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-25T11:14:09.207

```
- (UIImage *)imageWithTableView:(UITableView *)tableView{
UIImage* image = nil;

UIGraphicsBeginImageContextWithOptions(tableView.contentSize, NO, 0.0);

CGPoint savedContentOffset = tableView.contentOffset;
CGRect savedFrame = tableView.frame;

tableView.contentOffset = CGPointZero;
tableView.frame = CGRectMake(0, 0, tableView.contentSize.width, tableView.contentSize.height);

[tableView.layer renderInContext: UIGraphicsGetCurrentContext()];
image = UIGraphicsGetImageFromCurrentImageContext();

tableView.contentOffset = savedContentOffset;
tableView.frame = savedFrame;

UIGraphicsEndImageContext();

return image;
} 
```

[![在此处输入图像描述](../Images/5a8bd77d29b6e6b38303063b1871556d.png)](https://i.stack.imgur.com/ioUsd.jpg)

# java - 那些玻璃鱼线在做什么？

> ID：14376250
> 
> 赞同：0
> 
> 时间：2013-01-17T09:50:48.573
> 
> 标签：java, glassfish, jvm

从昨天开始，我们的 glassfish 后端服务器已经停止响应 3 次（暴露远程 ejb，因此通过 rmi-iiop 进行通信）。

重新启动前端服务器并没有改变这种情况，重新启动后端服务器确实如此。所以，我们很确定问题出在后面。

我们进行了线程转储，但查看它并没有给我们带来任何明显的东西。将其与重新启动（工作）后同一服务器的线程转储进行比较也没有。

这是线程转储： http: [//pastebin.com/ykjgD1m6](http://pastebin.com/ykjgD1m6)

# excel - 停用 Excel VBA 用户窗体

> ID：14376251
> 
> 赞同：1
> 
> 时间：2013-01-17T09:50:59.097
> 
> 标签：excel, userform, vba

我在 Excel vba 中有一些宏，并且我在 Excel 工作表上执行一些功能，这需要大约 30 秒才能完成。所以我想在这段时间内显示一个带有进度条的用户表单。

我尝试`userform.show`在函数的最开始和`userform.hide`最后使用，但我发现无法在后台执行任何操作。

所以只想知道在显示表单时是否有任何转机让处理在后台完成。

非常感谢 ：）

```
Private Sub CommandButton1_Click()
    '--------------Initialize the global variables----------------

   UserForm1.Show

    nameOfSheet2 = "Resource Level view"
    nameOfSheet3 = "Billable Hours"
    nameOfSheet4 = "Utilization"
    '-------------------------------------------------------------
    Dim lastRow, projectTime, nonProjectTime, leaveAndOther
    Dim loopCounter, resourceCounter
    lastRow = 0
    projectTime = 0
    nonProjectTime = 0
    leaveAndOther = 0
    resourceCounter = 2
    Set workbook1 = Workbooks.Open(File1.Value)
    Sheet3Creation
    Sheet2Creation
    Sheet4Creation
    UserForm1.Hide

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:12:44.593

进度条的用途是显示当前运行代码的进度。而且我不知道是否有人想在代码运行时对工作表做任何事情......

无论如何，如果您想在显示表单时与工作表进行交互，您可以尝试添加以下代码：

```
 UserForm.Show vbvModeless 
```

要更新`Modeless`表单，您必须**`DoEvents`**在子例程中添加。

当您想在最后关闭表单时，请执行以下操作：

```
 UserForm.Unload 
```

这是我要做的：

单击一个按钮以运行您的宏

```
Private Sub Button1_Click()
   Call userform.show vbMmodeless
End Sub

Private Sub UserForm_activate()
    Call Main '-- your macro name
End Sub 

Sub Main()
'-- your code
DoEvents '-- to update the form *** important

useroform.Unload
End Sub 
```

* * *

OP显示他的代码后：

## 为什么我们需要进度条？

> [**当宏需要很长时间才能运行时，人们会感到紧张。它崩溃了吗？需要多长时间？我有时间跑去洗手间吗？放松...**](http://oreilly.com/pub/h/2607)

*   在您的情况下，我并没有真正看到您正在使用在后台运行的任何类型的起伏代码。因此，添加进度条可能会使您的代码更新速度变慢，您可能会调用一个额外的循环...[如果您真的想要进度条，请查看这篇参考文章:)](http://www.your-save-time-and-improve-quality-technologies-online-resource.com/excel-vba-progressbar.html)，

*   您还可以[使用`Application.StatusBar`来显示消息。](http://www.vbaexpress.com/kb/getarticle.php?kb_id=87)

*   另一种是使用`Timer`或更技术性的方式是包装系统计时器滴答声并相应地刷新/更新表格。在 VBA Excel 中，我们没有 C# 或 VB 那样幸运。

*   [VBA 宏 On Timer 样式每隔设定的秒数（即 120 秒）运行代码](https://stackoverflow.com/questions/2319683/vba-macro-on-timer-style-to-run-code-every-set-number-of-seconds-i-e-120-secon)。

*   [如何在 Excel 中显示正在运行的时钟？](https://stackoverflow.com/questions/11867225/how-do-i-show-a-running-clock-in-excel?lq=1)

*   [你如何测试 VBA 代码的运行时间？](https://stackoverflow.com/questions/198409/how-do-you-test-running-time-of-vba-code)

# ios - NSString 替换导致韩语或捷克语问题的字符

> ID：14376252
> 
> 赞同：5
> 
> 时间：2013-01-17T09:50:59.167
> 
> 标签：ios, nsstring

我有一个小问题试图了解如何正确附加`NSString`韩语或捷克语。

上下文：我向`UITextField`用户提供了一个输入一些信息的信息，我想在文本字段中记录用户修改的内容，以便仅在字符串发生更改时才保存字符串。这样做时，我使用`UITextFieldDelegate`协议

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *resultingString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    [(NSMutableDictionary *)self.currentModifiedObject setObject:resultingString forKey: @"textfield" ];
    return YES;
} 
```

大多数语言都可以正常工作，但我最近收到有关韩语和捷克语的报告，称字母组合存在问题，例如口音。当查看我在字典中记录的内容时，通过这种方法按原样记录通过键入字母并在其后添加重音创建的带有重音的字母。

例如，在捷克语中：如果您在键盘上键入“Fidelesˇ”作为字母序列，则`UITextField`显示“Fideleš”，录制的字符串显示“Fideles\U02c7”，这相当于键盘序列。

我有兴趣了解从“Fideles\U02c7”键盘输入实际生成“Fideleš”的正确方法。

感谢您的帮助，我希望有人可以帮助我解决这个问题。亲切的问候，大卫

我试过使用：

```
- (NSString *)precomposedStringWithCanonicalMapping
- (NSString *)precomposedStringWithCompatibilityMapping 
```

但是没有结果，结果字符串保持不变。

# c# - 在 Web 服务中获取请求的域名

> ID：14376254
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:51:01.153
> 
> 标签：c#, web-services, asmx

我有一个 Web 服务，可以说它部署在[http://servicedomain.com/myservice.asmx](http://servicedomain.com/myservice.asmx)上。我想从我的另一个应用程序中调用它，假设这个应用程序部署在[http://appdomain.com/default.aspx](http://appdomain.com/default.aspx)上。现在我想在我的 Web 服务文件 (myservice.asmx.cs) 中获取请求域名，就像在这种情况下请求域名将是 appdomain.com

请建议

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-17T09:57:20.540

您可以做的是询问请求用户主机名：

```
this.Request.UserHostName 
```

如果由于某种原因无法对请求者 IP 进行 DNS 解析，那么您所能得到的只是

```
this.Request.UserHostAddress 
```

这是请求者的IP。

# android - 如何动态添加片段

> ID：14376258
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:51:20.867
> 
> 标签：android, android-fragments, sliding

我希望每当我收到`onListItemClick`事件时从右侧出现一个片段，例如滑动菜单。假设我已经实现了片段；我怎样才能让它出现？我似乎无法弄清楚。感谢您的时间。

**编辑：** 这是我要添加片段的视图组：

```
<TabHost
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="0dp"
                android:layout_height="0dp" />

            <android.support.v4.view.ViewPager
                android:id="@+id/tabviewpager"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginBottom="16dp"
                android:layout_marginLeft="16dp"
                android:layout_marginRight="16dp"
                android:layout_marginTop="16dp" >

            </android.support.v4.view.ViewPager>
    </LinearLayout>

</TabHost> 
```

TabViewPager 是我在 Activity 实例化时添加我的 Fragment 的地方，ans 是我需要动态添加我的新 Fragment 的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:26:00.043

这是图书馆：

[https://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

您可以通过多种方式推送 SlidingMenu，我认为您需要先尝试并在遇到错误时返回此处，然后我很乐意为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:52:28.107

我相当肯定我的问题也解决了你的问题，尽管布局略有不同：

[Android 片段侧边栏](https://stackoverflow.com/questions/15491090/android-fragment-sidebar/15491550#15491550)

# php - 解析xml文件时如何修复错误“使用未定义的常量id - 假定为'id'”？

> ID：14376259
> 
> 赞同：-1
> 
> 时间：2013-01-17T09:51:21.527
> 
> 标签：php, simplexml

> **可能重复：**
> [带有连字符名称的 SimpleXML Reading 节点](https://stackoverflow.com/questions/3626901/simplexml-reading-node-with-a-hyphenated-name)

我解析包含如下字段的 xml 文件：

```
<offers>
    <offer>
       <type>Vehicle</type>
       <type-id>2</type-id>
       <category>Car</category>
       <category-id>3</category-id>
       ...
    </offer>
    <offer>
       <type>Vehicle</type>
       <type-id>2</type-id>
       <category>Car</category>
       <category-id>3</category-id>
       ...
    </offer>
    ...
</offers> 
```

首先使用`$xml = simplexml_load_file($file);`，然后尝试在 foreach 循环中获取值后，我收到错误“使用未定义的常量 id - 假定为 'id'”，因为字段包含 'id' 作为其中的一部分，如 'type-id' 或 'category-id'

```
 foreach($xml->offers->offer as $offer) {
                    echo $offer->type; // WORKS JUST FINE
                echo $offer->type-id; //THIS GIVE ME ERROR                              
              } 
```

我试图设置`ini_set('error_reporting', E_ALL & ~E_NOTICE);`但在它之后带有“id”的字段返回零而不是值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:55:31.430

变量名是"type-id"，不能简单写成$type-id，需要用大括号访问：${"type-id"}

```
echo $offer->{"type-id"}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:54:26.867

试试这个：

```
foreach($xml->offers->offer as $offer) {
    echo $offer->type;
    $typeId = 'type-id';
    echo $offer->{$typeId};                        
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T09:54:53.700

您必须使用 { 和 } 访问对象/变量

```
echo $offer->{type-id}; 
```

# wpf - WPF 以编程方式在资源上创建窗口

> ID：14376268
> 
> 赞同：0
> 
> 时间：2013-01-17T09:52:05.003
> 
> 标签：wpf, resourcedictionary

我有一个需要进行单元测试的 WPF 窗口，所以我需要使用 C# 代码创建它的一个实例。窗口正在使用单独字典中可用的一些 DataTemplate。如果我运行应用程序一切都很好，但是当我在单元测试中创建 Window 的新实例时，使用以下代码：

```
MainWindow mockWindow = new MainWindow(); 
```

它抛出以下异常：

```
Test method 
[xxx] threw exception: 
System.Windows.Markup.XamlParseException: 'Provide value on 'System.Windows.StaticResourceExtension' threw an exception.' 
Line number '48' and line position '30'. ---> 
System.Exception: Cannot find resource named 'TreeViewItemTemplate'. 
Resource names are case sensitive. 
```

我假设“不知何故”我需要在创建视图之前初始化资源。我怎样才能以编程方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:17:54.920

使用动态资源而不是静态资源。

# c# - 将字典键设置为对象类型

> ID：14376270
> 
> 赞同：1
> 
> 时间：2013-01-17T09:52:13.273
> 
> 标签：c#, .net, list, generics, pass-by-reference

可以将字典的键设置为引用类型吗？字典是存储这些对象的引用还是存储对象实例？我有一本字典，我将列表是否加载为布尔值存储；如果它真的存储海量的列表，那就麻烦了。

```
public Dictionary<object, bool> isloaded; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T09:55:26.130

完全没问题 - 它只存储参考，而不是副本。

但是，您必须小心，在插入键对象后，您不要更改用于计算键的 GetHashCode() 的键对象的任何字段。

这是因为对象的 GetHashCode() 用于生成整数键，该键在内部用作键。显然，如果在插入密钥后情况发生了变化，那么它将出现在错误的位置并且会发生坏事。

（我个人认为你应该只使用不可变对象作为键。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T09:55:41.047

是的，它是“好的”。

字典存储参考；它不会复制实例。

请注意，如果关键对象是可变的并且以它们的哈希码会改变的方式发生变化，这可能会出现问题。另请注意，无论用作键的引用类型是什么，它们的`GetHashCode()`方法都应该具有有意义的实现。

# c++ - 如何在 Eclipse 中创建 C++ 库？

> ID：14376272
> 
> 赞同：3
> 
> 时间：2013-01-17T09:52:14.100
> 
> 标签：c++, eclipse

[这里](http://answers.yahoo.com/question/index?qid=20081112125751AApVBrX)有人问“如何用 C++ 制作自己的库？”。这正是我的问题。这个问题有答案了：

> 1.  创建文件“mylibrary.h”和“mylibrary.cpp”。
> 2.  只编译库，它不应该有“main()”函数。此步骤将生成一个名为“myfile.o”的目标文件。
> 3.  创建另一个名为“main.cpp”的文件。在 main.cpp 你需要#include "mylibrary.h"。
> 4.  编译 main.cpp 并将步骤 2 中的库添加到链接中（在本例中为“myfile.o”）。如果你不添加这个库，你会得到一个错误消息，比如“链接器错误 - 找不到函数定义”，或者类似的东西。

但我还有一些问题：

1.  Library.cpp 应该有一个`main()`功能。但是这个主要功能应该是什么？当我的程序启动时，我不希望我的库默认执行某些操作。我希望它包含一组仅在显式调用时才执行的函数。
2.  在第4步中，写着我需要“编译main.cpp并从第2步添加库”，但我已经在第2步编译了库，我应该再编译一次吗？
3.  “在这种情况下'myfile.o'”是什么意思？在这种情况下，我究竟应该如何处理“myfile.o”？
4.  在第 4 步上写着“如果您不添加此库，您将收到一条错误消息”。但是“添加库”是什么意思？在第 3 步中，我放入`#include "mylibrary.h"`了 main.cpp，所以我添加了库？或者我需要做更多的事情来添加库？

你能帮我理解答案吗？

* * *

**补充：**我想我需要使用 Eclipse 来生成、、、`.a`或`.lib`文件？有谁知道我该怎么做以及我应该生成什么？`.so``.dll`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:20:29.720

对于这个例子，考虑一个提供阶乘函数的“库”。为简单起见，我使用自由函数。

```
// factorial.h
int factorial(int input);

// factorial.cpp
#include "factorial.h"

int factorial(int input) {
    if(input > 0) return input * factorial(input - 1);
    else if(input == 0) return 1;
    else return 0;
} 
```

现在编译这些文件以生成一个`factorial.o`，但不要链接。（相应地配置 Eclipse 构建命令。如果使用 gcc，请适当地使用`-c`和`-o`标志。请参阅编译器文档以了解这些标志的作用。）

接下来创建一个`main.cpp`（您实际上可以将其命名为您喜欢的任何名称。）

```
// main.cpp
#include "factorial.h"

int main() {
    // use your library code here to make sure it is usable and working.  
    factorial(3);
    factorial(5); 
    // etc. 
} 
```

现在将其编译为 a `main.o`，然后将其与`factorial.o`之前的 from 链接以生成可执行文件。您实际上可以跳过中间`main.o`步骤，并使用适当的编译器选项在一个步骤中完成这两个步骤。

# apache-flex - 在 updateDisplayList 方法中更改元素大小

> ID：14376275
> 
> 赞同：0
> 
> 时间：2013-01-17T09:52:19.247
> 
> 标签：apache-flex, actionscript

我有标准`Group`控制，我正在为它编写新的布局。在这个布局中，我是覆盖`updateDisplayList`方法。经过一些计算，我想将`Group`控件的大小更改为此方法中的计算值，如下所示：

```
override public function updateDisplayList(containerWidth:Number, containerHeight:Number):void {
///// Here are some calculations.
layoutTarget.width = maxWidth;
layoutTarget.height = maxHeight + _padding;
} 
```

但是当我这样做时，我在这里得到了无限循环。`updateDisplayList`被一遍又一遍地调用。并且每次调用`layoutTarget`都有旧的宽度/高度值。有没有正确的方法来改变`layoutTarget`大小`updateDisplayList`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:57:04.800

对于布局，您应该在测量方法中更改目标大小并设置测量的..值而不是直接设置宽度/高度

```
override public function measure():void
{
    //calculate maxWidth and maxHeight here
    target.measuredWidth = target.measuredMinWidth = maxWidth;
    target.measuredHeight = target.measuredMinHeight = maxHeight+_padding;
} 
```

measureWidth/Height 是首选组件尺寸，measuredMinWidth/Height 是组件的最小尺寸。

# asp.net - asp.net Web API 检索文件而不保存它们

> ID：14376277
> 
> 赞同：0
> 
> 时间：2013-01-17T09:52:27.227
> 
> 标签：asp.net, asp.net-web-api

我想用 ASP.NET Web Api、XML 文件或 zip 文件检索文件。有很多例子如何做到这一点，像这样： [http ://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)

但问题是，我不想将它们保存在硬盘上！我只想使用一些函数验证 XML 并即时生成报告并希望返回此报告。但是每个教程都使用“MultipartFormDataStreamProvider”将文件保存在 HDD 上。

如何获取内存中的文件和文件名？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:06:05.460

我认为您可以使用 MultipartMemoryStreamProvider 吗？

查看[一种无需写入文件系统即可实现文件上传的方法。](http://forums.asp.net/t/1842441.aspx/1)

# ios - Monotouch 仅横向 iOS6

> ID：14376278
> 
> 赞同：1
> 
> 时间：2013-01-17T09:52:37.800
> 
> 标签：ios, xamarin.ios, uiinterfaceorientation, deployment-target

我希望我的应用程序中至少有 iOS6。我尝试使用 Mono 提供的示例项目创建一个标签栏应用程序。我试图删除 ShouldAutorotateToInterfaceOrientation 方法并将其替换为

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations ()
{
    return UIInterfaceOrientationMask.Landscape;
} 
```

我为两个 ViewController 都这样做了，但方向仍然是纵向的。我还尝试覆盖 ShouldAutorotate 并返回 true，但也没有帮助。我该怎么做才能使我的应用程序仅在横向模式下可用？

我也尝试将部署目标设置为iOS6，但我只能在下拉列表中切换到5.1。

有什么建议么？

编辑：我的安装完全错误。因为我无法选择 ios6 作为部署目标，所以没有任何效果。全新的全新安装后一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T14:47:17.520

就像@svn 所说的那样`Info.plist`，您的应用程序支持的方向。这可以通过覆盖来进一步定制（例如限制）`GetSupportedInterfaceOrientations`。

但是还有（iOS 6 中的新功能）[PreferredInterfaceOrientationForPresentation](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/supportedInterfaceOrientations)可以（并且应该）被覆盖。

[Apple文档](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html)中提供了更多详细信息，包括 iOS6 特定功能。

> 我也尝试将部署目标设置为iOS6，但我只能在下拉列表中切换到5.1。

听起来您使用的 Xcode 没有 6.0 SDK。请参阅我对您的问题的评论，了解如何检查 MonoDevelop 正在使用什么来构建您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:13:42.130

您还应该在 Info.plist 中设置支持的设备方向

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-23T21:20:19.080

对于 iOS 5 和 iOS 6 支持，您应该这样做，可悲的是“GetSupportedInterfaceOrientations”有问题，至少对于我的模态！

```
//iOS 6 support
    public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations ()
    {
        return base.GetSupportedInterfaceOrientations ();
    }

    //iOS 5 support
    //if I don't put it it doesn't work for iOS 5 device but works on iOS 6 simulator
    [Obsolete ("Deprecated in iOS6\. Replace it with both GetSupportedInterfaceOrientations and PreferredInterfaceOrientationForPresentation")]
    public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
    {
        return true;
    } 
```

首先确定项目属性以获得津贴。

# javascript - 使用 Spring 3.2.0.RELEASE 的 DeferredResult 反向 ajax。不能在 IE 中工作

> ID：14376285
> 
> 赞同：1
> 
> 时间：2013-01-17T09:52:55.293
> 
> 标签：javascript, spring, jquery, spring-mvc, spring-3

我正在尝试在 Spring 中使用反向 ajax 创建群聊演示。我正在使用 Spring 3.2.0.RELEASE 版本。

我正在使用 DeferredResult 在我的控制器中执行反向 ajax。以下是我的 Controller 类的片段。

```
@Autowired
private AsyncRepository asyncRepository;

Map<Integer, List<DeferredResult<String>>> watchers = new ConcurrentHashMap<Integer, List<DeferredResult<String>>>();

@RequestMapping(value="/asyncRequest/getMessages/{id}", method=RequestMethod.GET)
@ResponseBody
public DeferredResult<String> getMessages(final @PathVariable("id") Integer id){
    final DeferredResult<String> deferredResult = new DeferredResult<String>(null, Collections.emptyList());

    if(watchers.containsKey(id)) {
        watchers.get(id).add(deferredResult);
    } else {
        watchers.put(id, new ArrayList<DeferredResult<String>>());
        watchers.get(id).add(deferredResult);
    }

    deferredResult.onCompletion(new Runnable() {
        @Override
        public void run() {
            watchers.get(id).remove(deferredResult);
        }
    });

    return deferredResult;
}

@RequestMapping(value="/asyncRequest/setMessages/{id}/{message}", method=RequestMethod.GET)
@ResponseBody
public String setMessage(@PathVariable("id") Integer id, @PathVariable("message") String message) {
    asyncRepository.setMessage(id, message);

    return "";
}

@Scheduled(fixedRate=1000)
public void processQueues() {
    for (Map.Entry<Integer, Queue<AsyncDataBean>> entry : asyncRepository.getAsyncBeans().entrySet()) {
        while(entry != null && entry.getValue() != null && !entry.getValue().isEmpty()) {
            AsyncDataBean asyncDataBean = entry.getValue().poll();
            for (DeferredResult<String> deferredResult : watchers.get(asyncDataBean.getId())) {
                deferredResult.setResult(asyncDataBean.getMessage());
            }
        }
    }
} 
```

下面是包含 GroupID 及其相关消息队列的 Map 的 Repository 类。它还具有获取和设置相关组ID的消息的功能。

```
@Repository
public class AsyncRepository {

    private Map<Integer, Queue<AsyncDataBean>> asyncBeans = new ConcurrentHashMap<Integer, Queue<AsyncDataBean>>();

    public String getMessages(Integer id) {
        StringBuilder stringBuilder = new StringBuilder();
        while (asyncBeans.get(id) != null && !asyncBeans.get(id).isEmpty()) {
            stringBuilder.append(asyncBeans.get(id).poll().getMessage()).append("~");
        }

        return stringBuilder.toString();
    }

    public void setMessage(Integer id, String message) {
        if(asyncBeans.containsKey(id)) {
            asyncBeans.get(id).add(new AsyncDataBean(id, message));
        } else {
            Queue<AsyncDataBean> messageQueue = new ConcurrentLinkedQueue<AsyncDataBean>();
            messageQueue.add(new AsyncDataBean(id, message));
            asyncBeans.put(id, messageQueue);
        }
    }

    public Map<Integer, Queue<AsyncDataBean>> getAsyncBeans() {
        return asyncBeans;
    }

    public void setAsyncBeans(Map<Integer, Queue<AsyncDataBean>> asyncBeans) {
        this.asyncBeans = asyncBeans;
    }
} 
```

下面是我用来存储每条消息及其组 ID 的数据 bean。

```
public class AsyncDataBean {
    private Integer id;
    private String message;

    public AsyncDataBean() {
    }

    public AsyncDataBean(int id, String message) {
        this.setId(id);
        this.setMessage(message);
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getMessage() {
        return message;
    }

    public void setMessage(String message) {
        this.message = message;
    }
} 
```

然后是群聊的jsp页面。如下所示。

```
<script type="text/javascript">
    var messagesWaiting = false;
    function getMessages(){
        if(!messagesWaiting){
            $.ajax({ url: "${pageContext.servletContext.contextPath}/asyncRequest/getMessages/${id}", 
                     dataType:"text",
                     success: function(data,textStatus,jqXHR) {
                         if(textStatus == 'success'){
                             messagesWaiting = false;
                             var arr = data.split("~");
                             for(var i=0; i<arr.length; i++)
                             {
                                    try
                                    {
                                        if(arr[i] != '') {
                                            $("#txtaMessages").val($("#txtaMessages").val() + "\n\n" + arr[i]);
                                            document.getElementById("txtaMessages").scrollTop = document.getElementById("txtaMessages").scrollHeight;
                                        }
                                    }
                                    catch(e){
                                     alert(e.message);
                                    }
                             }
                         }
                     }, 
                     complete: function(j) {
                     },
                     error: function(xhr) { 
                     }
            });
            messagesWaiting = true;
        }
    }
    setInterval(getMessages, 1000);
    getMessages();

    function sendMessage() {
        var xmlhttp1 = new XMLHttpRequest();
        xmlhttp1.open("GET", '${pageContext.servletContext.contextPath}/asyncRequest/setMessages/${id}/' + $("#txtMessage").val(), true);
        xmlhttp1.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xmlhttp1.send();
        $("#txtMessage").val("");
        $("#txtMessage").focus();
    }
</script>

</head>
<body>
    <h1>Hello World!</h1>
    <table>
        <tr>
            <td>Messages :: </td>
            <td>
                <textarea cols="100" rows="10" id="txtaMessages"></textarea>
            </td>
        </tr>
        <tr>
            <td>Send Message :: </td>
            <td><input type="text" id="txtMessage"/></td>
        </tr>
        <tr>
            <td><input type="button" value="Send" onclick="sendMessage();"/></td>
        </tr>
    </table>
</body>
</html> 
```

这就是我到目前为止编写的代码以使其正常工作。一切都在 FF 和 Chrome 中正常工作。但是在 IE 中它没有按预期工作。该请求永远不会在服务器上保持不变，并且它总是按照 javascript 代码中的配置每秒执行一次。它总是返回与以前相同的结果。我尝试使用其他几种方法为 IE 发送 ajax 请求，但它不起作用。任何人都可以让它为我工作吗？

由于在 FF 和 Chrome 中一切正常，我怀疑问题在于 javascript 代码发送请求以获取消息。

请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:59:58.520

这是非常非常令人沮丧的。

为了让这个东西在 IE 中正常工作，我需要`cache:false`在我用 jquery 为 getMessages 创建的 ajax 请求中设置属性。否则 IE 将不会将请求保持在挂起状态，并始终返回旧响应文本。

这是IE的一个非常大的问题。我希望没有人再次面对这个问题或尽早找到这个答案。

:)

# c# - 这种工厂方法的最佳解决方案是什么

> ID：14376286
> 
> 赞同：0
> 
> 时间：2013-01-17T09:52:56.317
> 
> 标签：c#

这是我的工厂方法模式代码

```
public abstract class TestAbstract
{
    public abstract void MainFunc();
}

public class ClassA : TestAbstract
{
    public override void MainFunc()
    {
        //code for line 1
        //code for line 2
        //...
        Func1();
        Func2();
        //code for line 10
    }
    private void Func1() { }
    private void Func2() { }
}
public class ClassB : TestAbstract
{
    public override void MainFunc()
    {
        //code for line 1
        //code for line 2
        //...
        Func1();
        Func2();
        //code for line 10
    }
    private void Func1() { }
    private void Func2() { }
} 
```

目前，ClassA 和 ClassB 中的函数 MainFunc 有几行是相同的。而且我不想在这些类中重复代码。我将 MainFunc 移动到 TestAbstract 类，但它不起作用。

我在这里想要的是我如何才能为两个类都拥有一个 MainFunc，并且它可以正确调用每个类中的 2 个函数 Func1 和 Func2。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T09:56:41.767

你的意思是[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)吗？如果我理解正确，请尝试以下操作，并将 Func1 和 Func2 设置为子类中的覆盖。

```
public abstract class TestAbstract
{
    public void MainFunc(){ 
        //code for line 1
        //code for line 2
        //...
        Func1();
        Func2();
        //code for line 10
    }

    protected abstract void Func1();
    protected abstract void Func2();
} 
```

MainFunc 要调用 Func1 和 Func2，需要知道它们存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T09:56:47.490

这称为“模板方法模式”。MainFunc 可以存在于抽象类中并调用您专门用于派生类的方法 Func1 和 Func2。

```
public abstract class TestAbstract
{
    public void MainFunc() 
    { 
        //common code
        Func1();
        Func2(); 
    }

    // you can make these protected instead of public
    // if they are not meant to be called directly outside of your
    // derived classes    
    public abstract void Func1(); 
    public abstract void Func2();
}

public class ClassA : TestAbstract 
{
    public void Func1() 
    { //... logic for ClassA
    }

    public void Func2() 
    { //... logic for ClassA 
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:56:16.580

您可以移至`MainFunc`，`TestAbstract`但必须将`Func1`和声明`Func2`为抽象函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T10:05:53.410

在此示例中，ClassA 仅从 TestAbstract 执行 Func1 和 Func2，ClassB 覆盖了这些函数。请注意`base.MainFunction`覆盖 MainFunction 中所需的额外代码

```
void Main()
{
    ClassA a = new ClassA();
    a.MainFunc();
}

public class TestAbstract
{
    public virtual void MainFunc()
    {
    Func1();
    Func2();
    }
    public virtual void Func1() { "func1".Dump();}
    public virtual void Func2() { "func2".Dump();}
}

public class ClassA : TestAbstract
{
    public override void MainFunc()
    {
        //code for line 1
        //code for line 2
        //...
 base.MainFunc();
        //code for line 10
    }

}
public class ClassB : TestAbstract
{
    public override void MainFunc()
    {
        //code for line 1
        //code for line 2
        //...
        base.MainFunc();
        //code for line 10
    }
    public override void Func1() { "func1".Dump();}
    public override void Func2() { }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T09:56:32.263

如果您愿意修改逻辑或只是抽象类中的简单，而不是使用`abstract`use`virtual``MainFunc``MainFunc`

# java - Grails 在启动时卡在新服务器上

> ID：14376287
> 
> 赞同：0
> 
> 时间：2013-01-17T09:53:03.007
> 
> 标签：java, linux, grails, virtual-machine

我刚得到一个新的 Ubuntu 12.04LTS 虚拟机（Proxmox 1.9）实例。我做了以下工作：

1.  安装 Sun Java 7 JDK 并设置 JAVA_HOME
2.  下载 Grails 2.2.0 并设置 GRAILS_HOME 和 PATH

跑步

```
$ grails 
```

总是卡在：

```
| Loading Grails 2.2.0 
```

或者有时它会达到

```
| Configuring classpath 
```

我只能使用`kill -9 <pid>` / 来终止进程：我也遇到了以下异常：

```
$ grails          
Exception in thread "Reference Handler" java.lang.IllegalMonitorStateException
    at java.lang.Object.notifyAll(Native Method)
    at java.lang.ref.ReferenceQueue.enqueue(ReferenceQueue.java:68)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:146)

$ free -m
             total       used       free     shared    buffers     cached
Mem:          4096       1129       2966          0          0       1129
-/+ buffers/cache:          0       4096
Swap:            0          0          0

$ java -version
java version "1.7.0_11"
Java(TM) SE Runtime Environment (build 1.7.0_11-b21)
Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)
$ javac -version
javac 1.7.0_11 
```

我试过寻找任何系统日志但没有运气......只是[这个Java日志跟踪](http://pastebin.com/raw.php?i=YEesBGXn)......很长一个 [http://pastebin.com/raw.php?i=YEesBGXn](http://pastebin.com/raw.php?i=YEesBGXn)

使用以下 JAVA_OPTS 运行

```
$ echo $JAVA_OPTS
-verbose:gc -XX:+PrintGCDetails -Dgrails.env=development -server -Xmx512M -XX:MaxPermSize=256m 
```

显示了一个**非常不寻常的垃圾收集**，比我的本地机器上的要快得多**，仅在第二个 30 个周期内！！！！**

```
$ grails
[GC [DefNew: 13336K->933K(19648K), 0.0034700 secs] 13336K->933K(63360K), 0.0035060 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
[GC [DefNew: 12566K->806K(19648K), 0.0029880 secs] 12566K->806K(63360K), 0.0030090 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
[GC [DefNew: 10728K->640K(19648K), 0.0020080 secs] 10728K->640K(63360K), 0.0020290 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10717K->625K(19648K), 0.0021550 secs] 10717K->625K(63360K), 0.0021740 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11185K->895K(19648K), 0.0028080 secs] 11185K->895K(63360K), 0.0028280 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11239K->966K(19648K), 0.0027430 secs] 11239K->966K(63360K), 0.0027640 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11190K->959K(19648K), 0.0028930 secs] 11190K->959K(63360K), 0.0029140 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10801K->931K(19648K), 0.0027570 secs] 10801K->931K(63360K), 0.0027790 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
[GC [DefNew: 11730K->1483K(19648K), 0.0032850 secs] 11730K->1483K(63360K), 0.0033060 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 12693K->791K(19648K), 0.0036170 secs] 12693K->1286K(63360K), 0.0036380 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
[GC [DefNew: 10694K->623K(19648K), 0.0025120 secs] 11189K->1118K(63360K), 0.0025320 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10457K->596K(19648K), 0.0016330 secs] 10952K->1091K(63360K), 0.0016540 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10475K->604K(19648K), 0.0016960 secs] 10970K->1099K(63360K), 0.0017170 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10500K->621K(19648K), 0.0017230 secs] 10995K->1116K(63360K), 0.0017600 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11960K->848K(19648K), 0.0023630 secs] 12455K->1343K(63360K), 0.0023830 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
[GC [DefNew: 10656K->736K(19648K), 0.0020860 secs] 11151K->1231K(63360K), 0.0021090 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10706K->785K(19648K), 0.0022890 secs] 11201K->1330K(63360K), 0.0023100 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 12704K->1209K(19648K), 0.0031890 secs] 13249K->1754K(63360K), 0.0032090 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
[GC [DefNew: 11009K->988K(19648K), 0.0030880 secs] 11555K->1737K(63360K), 0.0031090 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10910K->1042K(19648K), 0.0026880 secs] 11659K->1791K(63360K), 0.0027080 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11699K->1233K(19648K), 0.0029880 secs] 12447K->1990K(63360K), 0.0030080 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11312K->1098K(19648K), 0.0032090 secs] 12069K->2088K(63360K), 0.0032280 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11480K->1169K(19648K), 0.0028980 secs] 12470K->2199K(63360K), 0.0029190 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 
[GC [DefNew: 11067K->996K(19648K), 0.0028780 secs] 12096K->2199K(63360K), 0.0028980 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10838K->987K(19648K), 0.0023150 secs] 12040K->2189K(63360K), 0.0023360 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10785K->989K(19648K), 0.0020500 secs] 11988K->2192K(63360K), 0.0020700 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10842K->1010K(19648K), 0.0020970 secs] 12044K->2212K(63360K), 0.0021170 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11668K->1184K(19648K), 0.0024270 secs] 12870K->2386K(63360K), 0.0024470 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11840K->854K(19648K), 0.0030320 secs] 13043K->2572K(63360K), 0.0030540 secs] [Times: user=0.00 sys=0.00, real=0.01 secs] 

[GC [DefNew: 11890K->1345K(19648K), 0.0025590 secs] 13608K->3063K(63360K), 0.0025810 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
[GC [DefNew: 11306K->1007K(19648K), 0.0022660 secs] 13024K->3022K(63360K), 0.0022860 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 10991K->1059K(19648K), 0.0017130 secs] 13006K->3074K(63360K), 0.0017360 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11440K->1255K(19648K), 0.0023460 secs] 13455K->3270K(63360K), 0.0023690 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 11989K->1298K(19648K), 0.0024010 secs] 14004K->3490K(63360K), 0.0024230 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 18770K->1948K(19648K), 0.0051470 secs] 20962K->4504K(63360K), 0.0051710 secs] [Times: user=0.02 sys=0.00, real=0.01 secs] 
| Loading Grails 2.2.0
[GC [DefNew: 15322K->1119K(19648K), 0.0060270 secs] 18786K->5620K(63360K), 0.0060520 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 12134K->1357K(19648K), 0.0036970 secs] 16635K->5913K(63360K), 0.0037210 secs] [Times: user=0.01 sys=0.00, real=0.00 secs] 
[GC [DefNew: 18695K->2148K(19648K), 0.0078430 secs] 23251K->7738K(63360K), 0.0078680 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
[GC [DefNew: 15902K->825K(19648K), 0.0071910 secs] 21492K->8544K(63360K), 0.0072170 secs] [Times: user=0.01 sys=0.00, real=0.01 secs] 
[GC [DefNew: 10669K->815K(19648K), 0.0028670 secs] 18388K->8535K(63360K), 0.0028910 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
[GC [DefNew: 12030K->1121K(19648K), 0.0037650 secs] 19750K->8840K(63360K), 0.0037880 secs] [Times: user=0.00 sys=0.00, real=0.00 secs] 
| Downloading: ivy-1.0.xml
| Downloading: ivy-3.2.3.xml 
```

关于这里可能有什么问题的任何想法？

非常感谢，

阿米特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T12:22:12.497

这不是 Proxmox 的问题，而是 OpenVZ 的问题。如果您使用 Proxmox，我建议您使用 kvm 实例。不过OpenVZ用IBM JDK好像没问题，也许你可以试试IBM的Java运行时。你最好不要在 OpenVZ 中运行 JVM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:44:32.287

解决了。

这是此处描述的 Proxmox 虚拟机的问题：http: [//forum.proxmox.com/archive/index.php/t-6998.html](http://forum.proxmox.com/archive/index.php/t-6998.html)

它有助于为机器提供更多的 CPU 能力。

# javascript - 我应该在 sinon.js 中模拟 cors OPTIONS 请求还是如何测试跨域 ajax 请求？

> ID：14376295
> 
> 赞同：3
> 
> 时间：2013-01-17T09:53:24.070
> 
> 标签：javascript, jquery, ajax, cross-domain, sinon

我正在为我正在处理的 javascript/jquery 库创建单元测试。我需要发出很多跨域 Ajax 请求，并试图通过[Sinon.js](http://sinonjs.org/)来尝试模拟以下场景：

*   我做了一个 AJAX“PUT”跨域请求`x-domain-abc.com/somestorage`
*   我包含用于身份验证的自定义标头
*   这将触发预检 OPTIONS 请求
*   请求应该被 fakeServer 捕获并以一些自定义标头响应（我希望我的提供者添加的标头 ;-)
*   之后实际的“PUT”完成，也被 fakeServer 捕获并做出相应的响应。

我的请求如下所示：

```
$.ajax({
  url: url + '?_=' + Date.now(),
  type: 'PUT',
  data: document,
  async: true,
  crossdomain: true,
  headers : {
  Authorization: 'Basic ' + Base64.encode(
    priv.user + ':' + priv.pass
    )
  },
  success: function () {
      // do sth
  },
  error: function () {
      // do sth else
  }
}); 
```

在我的测试模块中，我目前正在这样做：

```
test ("Put", function(){
  var o = generateTools(this);
  // lib invocation
  o.jio = JIO.newJio({
    "type": "dav",
    "username": "davput",
    "password": "checkpwd",
    "url": "https://ca-davstorage:8080"
  });

  // put non empty document
  o.addFakeServerResponse("PUT", "put1", 201, "HTML RESPONSE");
  o.spy (o, "value", {"ok": true, "id": "put1"},
         "Create = PUT non empty document");
  // the JSON "document" that should be stored
  o.jio.put({"_id": "put1", "title": "myPut1"}, o.f);
  o.clock.tick(5000);
  o.server.respond();
  o.jio.stop();
}); 
```

`O`包括：

```
generateTools = function (sinon) {
  var o = {};
  o.t = sinon;
  o.server = o.t.sandbox.useFakeServer();
  o.clock = o.t.sandbox.useFakeTimers();
  o.clock.tick(base_tick);
  o.spy = basicSpyFunction;
  o.tick = basicTickFunction;
  ...
  o.addFakeServerResponse = function (method, path, status, response) {
    var url = new RegExp('https:\\/\\/ca-davstorage:8080\\/' + path +
                    '(\\?.*|$)');
    o.server.respondWith(method, url,
      [status, { "Content-Type": 'application/xml' }, response]
    );
  }
  return o;
}, 
```

**问题：**
测试 OPTIONS/preflight 是否有意义，因为它是由浏览器内部处理的东西，我无法访问或影响？

如果不是，我应该对 CORS 请求进行什么测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T04:17:33.700

由于您的单元测试正在执行您的 JavaScript 代码，因此您不需要测试 CORS 预检响应。正如您所提到的，预检的详细信息由浏览器在幕后处理。所以没有代码来测试处理预检。

你真的不需要做任何 CORS 特定的测试，因为浏览器会为你处理所有这些细节。从 JavaScript 的角度来看，CORS 请求看起来就像一个常规的 XmlHttpRequest。你的假服务器应该只返回一个预期的响应，你的单元测试应该检查你的代码是否正确地处理了这个响应。

Now, if you were in control of the server, it would be important to test the CORS preflight response. If you really want to be complete, you could set up tests to make preflight and regular CORS requests to your provider. However this would be outside the realm of a simple unit test, since it would be making a live request to a remote server.

# ruby-on-rails - 保护 RABL gem (Ruby on Rails)

> ID：14376298
> 
> 赞同：1
> 
> 时间：2013-01-17T09:53:28.323
> 
> 标签：ruby-on-rails, security, api, rabl

我正在使用 rabl gem

**显示.rabl**

```
object @user
attributes :id, :name, :realname, :email 
```

我得到

```
{"user":{"id":1,"name":"username","email":"mail@mail.com"}} 
```

问题是任何人都可以在打开[http://website.com/users/user.json](http://website.com/users/user.json)链接时看到此信息

在我的数据库中，登录后的每个用户都有唯一的 auth_token 字段。

***问题是***-我只想通过此链接查看此信息-http: [//website.com/users/user.json?auth_token=yLrUAxWB2szkvx9jBEGv](http://website.com/users/user.json?auth_token=yLrUAxWB2szkvx9jBEGv)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:31:10.930

创建支票或使用一些授权宝石，例如`cancan`.

原始示例，以便您掌握（未经测试，在电话上写...）：

```
class MyController < ApplicationController
  before_filter :check_token_if_json
  respond_to :html, :json

  def show
    @user = User.find params[:id]

    respond_with(@user)
  end

  private

  def check_token_if_json
    if params[:format] == 'json'
      raise "Access denied" and return unless params[:token] == 'my_required_token'
    end
end 
```

# html - 本地 html 中的图像无法加载到 windows8 中的 webview 中

> ID：14376299
> 
> 赞同：2
> 
> 时间：2013-01-17T09:53:30.743
> 
> 标签：html, windows-8, webview

我想将本地文件夹中的本地html文件加载到webview，但WebView不支持'ms-aspx:///'协议，我找到了一个解决方案来读取html文件进行流式传输，然后将其转换为字符串，使用 NavigateToString 方法加载 html，效果很好。但是，如果 html 文件中有图像，则图像无法显示，任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-22T09:08:06.573

我已经解决了。

解决方案：

将图像文件转换为base64字符串

```
StorageFolder appFolder = ApplicationData.Current.LocalFolder;
        StorageFile file = await appFolder.GetFileAsync("SplashScreen.png");
        using (var stream = await file.OpenAsync(FileAccessMode.Read))
        {
            var reader = new DataReader(stream.GetInputStreamAt(0));
            var bytes = new byte[stream.Size];
            await reader.LoadAsync((uint)stream.Size);
            reader.ReadBytes(bytes);
            base64 = Convert.ToBase64String(bytes);
        } 
```

使用 StringBuilder 创建 html 字符串

```
sb.Append("<html><head><title>Image test</title></head><body><p>This is a test app!</p><img src=\"data:image/png;base64,");
        sb.Append(base64);
        sb.Append("\" /></body></html>");
        TestWebView.NavigateToString(sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T15:35:51.913

尝试使用 ms-appx-web:// 方案而不是 ms-aspx:// 从 WebView 加载 html。如果这不起作用，您可能需要使用 ms-appdata:// 方案来访问图像（如果它位于您的应用程序数据文件夹中）。

一些可能有帮助的进一步资源：
[如何将本地 HTML 文件加载到 Webview](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/3e759487-ea22-4ea6-8096-ff013fb099fd)
[URI 方案](http://msdn.microsoft.com/en-us/library/windows/apps/jj655406.aspx)
[中如何引用内容](http://msdn.microsoft.com/en-us/library/windows/apps/hh781215.aspx)

# java - 相机预览给出灰色图像

> ID：14376301
> 
> 赞同：2
> 
> 时间：2013-01-17T09:53:43.970
> 
> 标签：java, android, opencv

我正在使用 android sdk 相机开发 android 应用程序。在相机预览上我需要帧内容，所以我使用 PreviewCallback 返回字节数组中的数据，现在我的问题是将数据保存在 mat 对象中 mat 返回灰色图像：

```
public void onPreviewFrame(byte[] data, Camera camera) {
    Mat src = new Mat(previewSize.height, previewSize.width, CvType.CV_8U, new Scalar(255));
    src.put(0, 0, data);
    Highgui.imwrite("/mnt/sdcard/1.jpg", src);
} 
```

任何人都可以帮助我生成 argb 图像

注意：我在预览图像格式中使用 NV21。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:26:16.677

改为这样做：

```
Mat src = new Mat(previewSize.height, previewSize.width, CvType.CV_8UC3); 
```

如果它不起作用，则意味着您`data`已经是灰色的，因此您必须在代码中的某处将其设置为灰色。

# java - Android 上的 Exchange Web 服务，错误

> ID：14376305
> 
> 赞同：0
> 
> 时间：2013-01-17T09:54:11.053
> 
> 标签：java, android, exchangewebservices

我正在尝试在 Android 上实现和使用 Exchange Web 服务。我找到了这篇文章，并以同样的方式安装了 Microsoft 的 EWS API JAVA：

```
http://stackoverflow.com/questions/7476055/use-exchange-web-services-on-android 
```

我编写并执行了一个发送消息的简单示例。但我得到了这个错误：

```
java.lang.VerifyError: microsoft.exchange.webservices.data.ExchangeServiceBase 
```

有人可以帮助我吗？有没有人可以分享的样本？谢谢！

这是示例：

```
 package com.example.ewsandroid;
import java.net.URI;
import java.util.Locale;
import microsoft.exchange.webservices.data.EmailMessage;
import microsoft.exchange.webservices.data.ExchangeService;
import microsoft.exchange.webservices.data.MessageBody;
import microsoft.exchange.webservices.data.WebCredentials;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);    

        final Button mButton = (Button) findViewById(R.id.button);

        mButton.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                Locale.setDefault(Locale.ENGLISH);
                try {
                    ExchangeService service = new ExchangeService();
                    WebCredentials webCredentials = new WebCredentials(
                            "sample@gmail.com",
                            "sample");
                    URI url = new URI("https://sample.sample.com/ews/Exchange.asmx");
                    service.setCredentials(webCredentials);
                    service.setUrl(url);

                    EmailMessage msg= new EmailMessage(service);
                    msg.setSubject("Hello world!");
                    msg.setBody(MessageBody.getMessageBodyFromText
                               ("Sent using the EWS Managed API."));
                    msg.getToRecipients().add("sample@gmail.com");
                    msg.send();

                } catch (Exception ex) {
                    System.out.println(ex.toString());
                }
            }
        });
    }   
} 
```

我使用 Android 2.2 作为平台，Java 编译器 1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-23T10:44:52.217

有一个商业 ActiveSync 库可用[@JWebServices 用于 java 和 android](http://www.independentsoft.de/)。在该页面下载 JWebServices for Exchange。下载后，只需将 jwebservices-1.1.jar jar 文件添加到您的项目中，您只需在您的代码中创建服务对象时提供信息，如下所示。它在我的安卓应用程序中工作。

`Service service = new Service( "https://mail.yourdomain.com/ews/Exchange.asmx", "emailid@yourdomain.com", "password");`

这是显示当前时间和接下来 12 小时之间的约会的示例代码。

```
Service service = new Service(
                    "https://mail.yourdomain.com/ews/Exchange.asmx",
                    "emailid@yourdomain.com", "password");
            Date startDate = new Date(System.currentTimeMillis());
            Date endDate = new Date(System.currentTimeMillis()
                    + (12 * 60 * 60 * 1000));

            CharSequence startTime = DateFormat.format(
                    "yyyy-MM-dd HH:mm:ss", startDate);

            CharSequence endTime = DateFormat.format("yyyy-MM-dd HH:mm:ss",
                    endDate);

            IsGreaterThanOrEqualTo restriction1 = new IsGreaterThanOrEqualTo(
                    AppointmentPropertyPath.START_TIME,
                    startTime.toString());
            IsLessThanOrEqualTo restriction2 = new IsLessThanOrEqualTo(
                    AppointmentPropertyPath.END_TIME, endTime.toString());
            And restriction3 = new And(restriction1, restriction2);

            FindItemResponse response = service.findItem(
                    StandardFolder.CALENDAR,
                    AppointmentPropertyPath.getAllPropertyPaths(),
                    restriction3);
            int numberOfItems = response.getItems().size();
            if (numberOfItems <= 0)
                Log.v(">>><<<<", "There are no Appointments..");
            for (int i = 0; i < numberOfItems; i++) {
                if (response.getItems().get(i) instanceof Appointment) {
                    Appointment appointment = (Appointment) response
                            .getItems().get(i);
                    String logicalRoomName = null, location = appointment
                            .getLocation();
                    Log.v(">>><<<<", "Location = " + location);
                    Log.v(">>><<<<",
                            "Subject = " + appointment.getSubject());
                    Log.v(">>><<<<",
                            "StartTime = " + appointment.getStartTime());
                    Log.v(">>><<<<",
                            "EndTime = " + appointment.getEndTime());
                    Log.v(">>><<<<",
                            "Body Preview = "
                                    + appointment.getBodyPlainText()); } } 
```

# javascript - 如何从c#中以单引号传递java脚本参数字符串值

> ID：14376306
> 
> 赞同：0
> 
> 时间：2013-01-17T09:54:12.987
> 
> 标签：javascript

C# 代码

```
string excerpt = "&nbsp;&nbsp;<a href='#' onclick='javascript:onOptionSelect(" + pat.PatientId + "," + pat.PatientName.Replace(",", "") + "," + pat.PatientDob + ",1" + ")'>Patient Chart</a>"; 
```

我需要将单引号中的字符串值 pat.PatientName 和 pat.PatientDob 传递给 java 脚本函数。我尝试了很多方法，但我无法找到传递值的正确方法。

# c# - 缓存对象列表

> ID：14376307
> 
> 赞同：4
> 
> 时间：2013-01-17T09:54:16.590
> 
> 标签：c#, .net, winforms, caching

> **可能重复：**
> [system.runtime.caching 的性能](https://stackoverflow.com/questions/3157340/performance-of-system-runtime-caching)

我需要缓存对象列表（少于 50 个具有 10-20 个字段的对象），哪种缓存方法更好。

`EnterpriseLibrary Caching`或者`system.runtime.caching`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:11:13.207

鉴于您的对象数量相对较少，我建议您使用`system.runtime.caching`，这样您就可以避免使用 EnterpriseLibrary 的开销。您还可以考虑实例化[ConcurrenctDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)来存储您的缓存对象 - 特别是如果您想更好地控制对象的生命周期（过期策略等）。

如果您一直在创建一个 Web 应用程序，我会建议您使用`System.Web.Caching.Cache`而不是`System.Runtime.Caching.MemoryCache`. 我们遇到了问题`System.Runtime.Caching.MemoryCache`，有关详细信息，请参阅以下 SO 文章：-

*   [MemoryCache Empty ：设置后返回 null](https://stackoverflow.com/questions/7422859/memorycache-disposed-in-web-application)

# wpf - WPF IDataErrorInfo 问题

> ID：14376310
> 
> 赞同：1
> 
> 时间：2013-01-17T09:54:29.413
> 
> 标签：wpf, prism-4, idataerrorinfo, adornerdecorator

我在过去的应用程序中使用 WPF 和 IDataErrorInfo 通过控件模板向用户显示错误，方法是在装饰器中放置图像并向图像添加工具提示，如下所示；

```
<Style x:Key="textStyle" TargetType="TextBox">
  <Setter Property="Validation.ErrorTemplate">
    <Setter.Value>
      <ControlTemplate>
        <DockPanel LastChildFill="True">
          <Border BorderBrush="Orange"
                  BorderThickness="2"
                  CornerRadius="4"
                  SnapsToDevicePixels="True">
            <Border.Effect>
              <DropShadowEffect BlurRadius="10"
                                ShadowDepth="0"
                                Color="Orange" />
            </Border.Effect>
            <DockPanel>
              <Image Width="16"
                     Height="16"
                     Margin="-20,0,0,0"
                     HorizontalAlignment="Left"
                     VerticalAlignment="Center"
                     RenderOptions.BitmapScalingMode="HighQuality"
                     Source="{StaticResource imgError}"
                     ToolTip="{Binding ElementName=adornedElement,
                                       Path=AdornedElement.(Validation.Errors).CurrentItem.ErrorContent}"
                     ToolTipService.ShowDuration="30000" />
              <AdornedElementPlaceholder Name="adornedElement" />
            </DockPanel>
          </Border>
        </DockPanel>
      </ControlTemplate>
    </Setter.Value>
  </Setter>
</Style> 
```

在 ViewModel 中适当地实现 IDataErrorInfo 并在视图中相应地设置 Textbox 会显示图像和工具提示；

```
<TextBox Name="txt"
         Grid.Column="0"
         Height="40"
         Background="Aqua"
         Style="{StaticResource textStyle}"
         Text="{Binding Path=Text,
                        UpdateSourceTrigger=PropertyChanged,
                        ValidatesOnDataErrors=True}" />
<TextBlock Grid.Column="1"
           Height="40"
           Background="AliceBlue"
           Text="{Binding ElementName=txt,
                          Path=(Validation.Errors).CurrentItem.ErrorContent}" /> 
```

上面的代码在我以前的应用程序中正确显示，并在文本块确认的图像工具提示中显示错误。

但是，在我当前使用 Prism 构建的应用程序中，我无法显示图像。TextBlock 正确更新，我可以通过样式触发器将错误设置为 TextBox 工具提示，而不会出现任何问题。问题是我似乎无法让图像（或其他任何东西）显示在装饰器中。图像未显示，边框未更改。

与以前的应用程序之间的区别在于视图位于 ContentControl 的区域中，并且我使用依赖注入将视图模型注入视图构造函数并设置 DataContext。

我不明白为什么这在以前不起作用时不起作用。我**想**我可能需要在某个地方包含一个 AdornerDecorator，但我很困惑在几个地方没有成功尝试过它。有什么想法可以确保展示装饰器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:02:24.827

使用 AdornerDecorator 包装包含 texbox 的元素，一切正常。

# windows-8 - 如何在不启动新项目的情况下更改我的 Windows 8 应用程序的名称？

> ID：14376313
> 
> 赞同：2
> 
> 时间：2013-01-17T09:54:34.647
> 
> 标签：windows-8, rename

我正在开发一个名为 (boter kaas en eiren) 的 Windows 8 应用程序，但我想将整个项目重命名为 (Tic Tac Toe)。这可能吗？如果是我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T15:22:37.753

您最好的选择是在整个项目中进行查找。下面是一个名为“feedgrind”的应用程序的搜索：

![饲料研磨搜索结果](../Images/4bb5ac4b28a51241fd1b590869a68775.png)

关于如何使用文本的一些说明：

`App.xaml`- 您的应用程序使用它来显示其名称。

`Package.appxmanifest`- 我对此并不完全确定，但我相信 Windows 使用它来获取有关您（已部署）应用程序的信息。

`Package.StoreAssocation.xml`- 当您将应用上传到 Windows 应用商店时，此名称必须与您在 Windows 应用商店中设置的名称匹配。如果您尚未将应用上传到应用商店，则该文件可能不存在。

`AssemblyInfo.cs`- 当您显示 exe 的文件属性时，Windows 资源管理器会显示此信息。

`application.csproj`- Visual Studio 使用它作为可执行文件名称 (application.exe)。

显然，此答案适用于 C#/ XAML/ Windows Store 应用程序。您的文件可能因项目类型而异。

# ios - 如何在 iOS 中限制浮点值

> ID：14376320
> 
> 赞同：0
> 
> 时间：2013-01-17T09:54:45.717
> 
> 标签：ios, cocoa-touch, mpmediaitem

现在我正在尝试获取 iOS 中歌曲的长度。

```
- (NSString *)returnofTotalLength
{
    float duration = [[self.player.nowPlayingItem valueForProperty:MPMediaItemPropertyPlaybackDuration] floatValue]/60.0f;
    NSString *length = [NSString stringWithFormat:@"%.2f",duration];;
    NSString *totalLength = [length stringByReplacingOccurrencesOfString:@"." withString:@":"];

    return totalLength;
} 
```

以上代码是显示like的歌曲总长度`5:90`。你知道那`5:90`不可能是真的，因为`60`秒就是`1`分钟。

应该`6:30`是

所以我想限制这个值`1 minute (60 seconds).`

我该怎么做请帮帮我？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T09:58:51.427

这是简单的数学。伪代码：

```
minutes = (int)(seconds / 60);
rest    = seconds % 60;
result  = minutes:rest 
```

对象：

```
int seconds   = 150;
int minutes   = (int)(seconds / 60);
int rest      = seconds % 60;
return [NSString stringWithFormat:@"%i:%i", minutes, rest]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:02:25.003

执行以下操作：

```
min=(int)duration/60;
sec=duration%60; 
```

比附加分钟和秒

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T11:26:54.773

如果您的时间超过几个小时，那么您可以这样做：

```
NSInteger seconds = duration % 60;
NSInteger minutes = (duration / 60) % 60;
NSInteger hours = duration / (60 * 60);
NSString *result = nil;

result = [NSString stringWithFormat:@"%02ld:%02ld:%02ld", hours, minutes, seconds]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:23:29.043

我刚刚得到了我自己问题的答案。感谢其他答案。:)

```
NSTimeInterval currentProgress = [[self.player.nowPlayingItem valueForProperty:MPMediaItemPropertyPlaybackDuration] floatValue];

    float min = floor(currentProgress/60);
    float sec = round(currentProgress - min * 60);

    NSString *time = [NSString stringWithFormat:@"%02d:%02d", (int)min, (int)sec];
    return time; 
```

这将返回`NSString`完整格式。

# iphone - ASIFormDataRequest 图像通过 .net 上传错误请求

> ID：14376321
> 
> 赞同：1
> 
> 时间：2013-01-17T09:54:50.937
> 
> 标签：iphone, .net, ios, web-services, asiformdatarequest

我一直在尝试让我的应用程序将图像数据作为 base 64 发送到 .net Web 服务，该服务将其转换回图像并将其保存在服务器上。

这适用于 10px x 10px 的小图像，但对于其他任何东西，我都会从服务器收到错误的请求响应。这是我的代码。我将其作为 xml 执行，因为我也无法使 postValue 工作。

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];

[reqstring setString:@"<Files xmlns=\"http://schemas.datacontract.org/2004/07/FileUpload\">"];
[reqstring appendString:@"<filename>"];
[reqstring appendString:@"/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAA8AAD/4QMraHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI"];
[reqstring appendString:@"</filename></Files>"];

[request appendPostData:[reqstring dataUsingEncoding:NSUTF8StringEncoding]];

[request setValidatesSecureCertificate:NO];
[request addRequestHeader:@"Content-Type" value:@"text/xml"];

[request setDelegate:self];

[request setDidFinishSelector:@selector(requestUploadFinished:)];
[request setDidFailSelector:@selector(requestUploadFailed:)];
[request startSynchronous]; 
```

以这种方式发送的内容或服务器上需要更改的内容是否有限制？

关于这种事情的任何好的教程？

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:08:47.063

终于设法解决了这个问题。请求中已达到 xml 限制。

我的 web.config 需要在服务器上进行更正。我将绑定类型设置为 webHttpBinding 并添加了 readerQuotas 来解决它。

```
<readerQuotas maxDepth="3200" maxStringContentLength="2147483647" maxArrayLength="16384"
    maxBytesPerRead="4096" maxNameTableCharCount="16384" /> 
```

在服务上使用跟踪对此有很大帮助。

```
<system.diagnostics>
  <sources>
        <source name="System.ServiceModel" 
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
          <listeners>
           <add name="traceListener" 
               type="System.Diagnostics.XmlWriterTraceListener" 
               initializeData= "C:\Traces.svclog" />
          </listeners>
       </source>
  </sources> 
```

# clojure - Clojure 集/项目不维护秩序。该怎么办？

> ID：14376324
> 
> 赞同：3
> 
> 时间：2013-01-17T09:55:00.593
> 
> 标签：clojure

Clojure 中的 set/project 不保持顺序，如下所示：

```
(project (map #(hash-map :number % :square (* % %)) (range 100)) #{:square}) 
```

有没有一种惯用的方式在保持秩序的同时使用它，还是我必须明确添加序数并在之后对它们进行排序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:09:20.317

来源`clojure.set/project`：

```
(defn project
  "Returns a rel of the elements of xrel with only the keys in ks"
  {:added "1.0"}
  [xrel ks]
    (set (map #(select-keys % ks) xrel))) 
```

您需要实现自己的`project`而不将结果转换为`set`

```
(defn my-project [xrel ks]
  (map #(select-keys % ks) xrel)) 
```

测试：

```
(my-project (map #(hash-map :number % :square %) 
                 (range 100)) 
            #{:square})
=> ({:square 0}
    {:square 1}
    {:square 2}
    {:square 3}
    ...
    {:square 99}) 
```

**更新**。另一个版本：

```
(defn my-project2 [xrel ks] 
  (map (fn [m] (into {} (filter #(ks (key %)) m)))
       xrel)) 
```

# typo3 - Typo3 [globalVar = TSFE:id=6] - 继承

> ID：14376326
> 
> 赞同：0
> 
> 时间：2013-01-17T09:55:06.273
> 
> 标签：typo3, typoscript, inheritance

我有一个typo3 网站，我想为子网站的一个菜单点添加一个单独的css。

在我添加的打字稿中：

```
[globalVar = TSFE:id=6]
  page.headerData.10 = TEXT
  page.headerData.10.value (
     <link rel="stylesheet" type="text/css" href="fileadmin/templates/blau.css"        media="all" />
)
[global] 
```

到目前为止，它适用于 id 为 6 的页面。我如何编写脚本来继承 id 为 6 的页面的子站点的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:10:00.897

改为使用此条件

```
[PIDinRootline = 6]
   page.headerData.10 = TEXT
   page.headerData.10.value (
      <link rel="stylesheet" type="text/css" href="fileadmin/templates/blau.css" media="all" />
   )
[GLOBAL] 
```

您将在 TSref 中找到有关条件的文档（此处为 PIDinRootline [）](http://docs.typo3.org/typo3cms/TyposcriptReference/Conditions/Reference/Index.html#condition-pidinrootline)

# html - 背景大小：封面，左侧 1px 空白

> ID：14376328
> 
> 赞同：13
> 
> 时间：2013-01-17T09:55:10.863
> 
> 标签：html, css

我的网站上有一个关于背景大小的小问题：封面我一直在 Firefox 中对其进行测试，但是当我在谷歌浏览器中加载页面时，我在左侧得到 1px 白色。当我使用 background-position:-1px 时，左边的白色边缘消失了（但后来我把它移到了右边）。有什么办法可以解决这个问题，并且仍然保留封面吗？

我将此应用于我的身体：背景：url（“images/baggrund.jpg”）无重复中心中心固定；背景尺寸：封面

我目前无法链接到该网站，但希望我描述得足够清楚。

提前致谢

编辑：添加截图，顶部来自 Firefox，底部来自 Chrome。

![截屏](../Images/84785a4dea930843e1bb8e45613f5c9a.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-16T06:02:31.280

试试这个：

```
background: background:url("images/baggrund.jpg") no-repeat 49% center fixed;
background-size: cover; 
```

在chrome中，当你使用“background-size:cover”时，如果background-image的xpos不小于50%，就会遇到这个问题。

因此，将 xpos 设置为 49%（或 49.9% 以减少错误）而不是“中心”将解决该问题。

我的英语不好，我希望你知道我的意思。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-17T10:17:58.243

这对我不起作用，因为我使用了背景封面，但我只是添加了一个 chrome 特定的行来将我的背景大小设置为 101%，这似乎可以解决它（对于眼睛）。感谢您的输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-15T21:45:01.740

101% 可能工作正常，但您也可以尝试这个细粒度的解决方案：

```
background-size: calc(100% + 1px);
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T09:57:17.923

您可以将 background 属性应用于 body 标记，这将导致它覆盖整个页面。

您还可以尝试将以下样式应用于 body 和 html 标签：

```
html,body{
  padding:0;
  margin:0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T14:54:11.870

**选择 ：**

如果无关紧要，另一种解决方案是在图像编辑程序中将背景图像的宽度减少或增加 1px。

否则，应该这样做（正如@estrar 指出的那样）：[如何在 Google Chrome 上修复 1px 边距？](https://stackoverflow.com/questions/9752201/how-do-i-fix-1px-margin-on-google-chrome)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-10T19:37:57.207

改为。`background-size: cover;`_ `background-size: 100%;`为我工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-04T00:37:37.840

所以我尝试了所有的解决方案，但无法让最后一个 px 工作。也尝试了各种大小图像尺寸。

我的问题是我使用的是**svg**。我咬紧牙关，切换到**png**。

```
 /* background: url("/static/images/orgchart-background.svg") no-repeat; */
  background: url("/static/images/orgchart-background.png") no-repeat; 
  background-size: 100% 100%; 
```

# c++ - 内联 getter 和 setter 与公共变量

> ID：14376329
> 
> 赞同：1
> 
> 时间：2013-01-17T09:55:10.823
> 
> 标签：c++, oop

我看到在某些程序中建议使用`public`变量而不是`get`函数`set`来获得更好的性能。我知道这被认为是一种不好的做法。我也知道编译器可以生成`get`and `set` `inline`。这是否意味着它们的行为就像一个没有性能影响的变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:01:11.070

编译器很可能会内联这些函数，并且不会有函数调用开销。我会避免使用 getter/setter 和公共成员变量，并思考为什么要使用这些变量，并在该类中提供一个函数来做到这一点。大多数 getter/setter/public 成员变量都可以通过这种方式删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:58:24.783

您总是可以期望编译器内联琐碎的 getter 和 setter，因此您将获得相同的性能。

但是可能存在差异，例如如果您按值返回，则在使用 getter/setter 时无法获取指针或对私有成员的引用。此外，setter 可能有额外的复制或移动操作。

无论如何，如果您想要公共访问，那么只需使用公共变量。它们是最佳实践。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T09:58:32.527

*如果*编译器真的选择将它们内联，它们在性能方面应该是相同的。关键字只是给编译器的`inline`一个提示，它不能严格遵守它，反之亦然：它可以使一个没有用关`inline`​​键字标记的函数，一个内联函数。

但是，如果由于某种原因编译器*不会*使它们内联，您显然会在调用上损失一些性能。

# c# - 如果您想知道 Metro 应用程序何时关闭，需要注意的正确事件是什么？

> ID：14376331
> 
> 赞同：1
> 
> 时间：2013-01-17T09:55:23.183
> 
> 标签：c#, .net, xaml, windows-8, microsoft-metro

我知道在桌面应用程序中，我们有一些东西`Form_Closing`非常适合在应用程序关闭之前做一些事情，但是我需要在 Metro 应用程序关闭（被用户或系统关闭）之前做一些事情，我无法得到这个工作。

唯一似乎甚至远相关的事件是`App_Suspending`和`pageRoot_Unloaded`事件。

我的问题是，如果我将代码（任何代码）放在 Unloaded 事件中，它永远不会被调用，这让我相信 Unloaded 事件永远不会被触发。

我还没有尝试使用 Suspending 事件，因为我需要在应用程序实际关闭或即将关闭时执行此工作，而不仅仅是暂停。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:28:38.700

在暂停的那一刻，Closing 和 Suspending Metro App 没有区别，所以每次都必须在 OnSuspending 覆盖中保存状态。但是在重新激活后，您可以看到您的应用程序发生了什么（OnLaunched（例如，在这里您可以看到值 ClosedByUser））。 [这](http://iinspectable.wordpress.com/2012/07/08/forcing-metro-apps-to-terminate/)是一篇关于 WinRT LifeCycle 的不错的文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:20:38.930

您可以覆盖 OnNavigatedFrom 方法，该方法将在页面被导航离开时调用。

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.onnavigatedfrom.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.page.onnavigatedfrom.aspx)

我认为没有任何明确要求终止应用程序（接受检查 app.xaml.cs 中的先前状态）

# scala - 使用中缀方法时需要括号吗？

> ID：14376335
> 
> 赞同：1
> 
> 时间：2013-01-17T09:55:33.043
> 
> 标签：scala, infix-notation

非常简单的 Scala 问题。

为什么 1 + 2 的中缀方法不需要括号？

```
scala>1 + 2
res7: Int = 3 
```

但是点方法呢？

```
scala>1 .+(2)
res8: Int = 3

scala> 1 .+2
<console>:1: error: ';' expected but integer literal found.
   1 .+2
       ^ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:21:21.590

Scala 中的一切都是对象，因此意味着使用参数`1 .+(2)`调用`+`对象上的方法。当然，如果你调用这样的方法，你需要将参数括在括号中，就像在常规中一样。`1``2``obj.somemethod(someparam,foo,bar)`

中缀表示法 ( `1 + 2`) 实际上意味着同样的事情（使用一个参数调用方法是语法糖）。

并且需要点之前的空格，以便点被解释为方法调用而不是小数分隔符。否则`1.+(2)`或`1.+2`将被解释为`1.0 + 2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:24:51.307

我认为这与语言定义有关：

> 左关联二元运算 e1 op e2 被解释为 e1.op(e2)。

[http://www.scala-lang.org/docu/files/ScalaReference.pdf](http://www.scala-lang.org/docu/files/ScalaReference.pdf)

形式 1 .+ 2 没有在任何地方指定，所以我的猜测是编译器正在寻找 1 + 2 或 1.+(2)。事实上，编译器通常会将 1+2 转换为 1.+(2)。使用时。它需要一个函数而不是中缀语法。

底线：您可以使用其中任何一种，但不能半途而废。

PD：有人评论说调用一个方法你需要像这样使用它：`obj.somemethod(someparam,foo,bar)`但在这种情况下你也可以这样做：`obj somemethod (someparam,foo,bar)`你必须留出空间让它工作。

# android - 使用 SQLite 数据库时的 IllegalStateExcepton

> ID：14376338
> 
> 赞同：0
> 
> 时间：2013-01-17T09:55:41.760
> 
> 标签：android, android-sqlite

当我运行以下代码时，我会在 Toast 消息中显示此异常：`Java.lang.IllegalStateExcepton: Bad request for field slot 0,-1\. numRows = 1, numColumns = 1`.

```
SQLiteDatabase sb;
    String g="o";
    try {
        sb=SQLiteDatabase.openDatabase("data/data/com.example.datatestx/ma", null, SQLiteDatabase.CREATE_IF_NECESSARY);

        sb.execSQL("create table if not exists blac  (" + " phone text  , " + " ftime  text, " + " ttime text );  "    );

        sb.execSQL( "insert into blac(phone, ftime,ttime) values ('01711233434', '333333','33333' );"  );
        sb.execSQL( "insert into blac(phone, ftime,ttime) values ('01761233433', '777' ,'77777');"  );
        sb.execSQL( "insert into blac(phone, ftime,ttime) values ('01712333323', '999','33433' );"  );
        Cursor c1 = sb.rawQuery( "select count(*) as Total from blac", null);
    if(c1.getCount()>0){

    c1.moveToFirst();
    do {
        g=g+c1.getString(c1.getColumnIndex("phone"));

    }while(c1.moveToNext());
    }  c1.close();
        sb.close();

         Toast.makeText(getApplicationContext(), "Success!"+g, Toast.LENGTH_LONG).show();   
    }
    catch (Exception e)
    {

    Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();     
    } 
```

我不知道为什么这不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:00:06.853

在您`SELECT`要求的查询中`COUNT(*) as Total`，这意味着您的结果集将有一个名为“Total”的字段，其中包含总行数。

`phone`所以从这个结果集中读取字段是没有意义的......

尝试更换

```
Cursor c1 = sb.rawQuery( "select count(*) as Total from blac", null); 
```

经过

```
Cursor c1 = sb.rawQuery( "select * from blac", null); 
```

# iphone - 在 UITextView 中查找指定单词的 (x,y) 坐标

> ID：14376341
> 
> 赞同：5
> 
> 时间：2013-01-17T09:55:43.353
> 
> 标签：iphone, ios, objective-c, uitextview

这是我在 UITextView 中的内容...

==>“‘大都会’用餐体验，提供注重视觉细节和品味的精致美食。”

现在我的问题很简单，如何在文本视图中找到“体验”一词的位置（x，y）。

任何解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-10T05:07:09.577

试试这个：

```
- (CGPoint)getPoint:(UITextView *)textView
{
    NSRange range = [textView.text rangeOfString:@"experience"];

    UITextPosition *beginning = textView.beginningOfDocument;
    UITextPosition *start = [textView positionFromPosition:beginning offset:range.location];
    UITextPosition *end = [textView positionFromPosition:start offset:range.length];
    UITextRange *textRange = [textView textRangeFromPosition:start toPosition:end];
    CGRect rect = [textView firstRectForRange:textRange];
    return rect.origin;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-22T11:03:57.003

如果你想在 Swift 中试试这个

```
 let range: NSRange = (txtView.text as NSString).range(of: text)
    let beginning: UITextPosition? = txtView.beginningOfDocument
    let start: UITextPosition? = txtView.position(from: beginning!, offset: range.location)
    let end: UITextPosition? = txtView.position(from: start!, offset: range.length)
    let textRange: UITextRange? = txtView.textRange(from: start!, to: end!)
    let rect: CGRect = txtView.firstRect(for: textRange!) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T10:04:20.807

使用 sizeWithFont，它应该是这样的：

```
NSString *text = textView.text;
NSString *substring = [text substringToIndex:[text rangeOfString:@"experience"].location];
CGSize size = [substring sizeWithFont:textView.font];
CGPoint p = CGPointMake((int)size.width % (int)textView.frame.size.width, ((int)size.width / (int)textView.frame.size.width) * size.height); 
```

# c# - WP8 KnownContactProperties.Birthdate 无法设置值

> ID：14376342
> 
> 赞同：2
> 
> 时间：2013-01-17T09:55:44.833
> 
> 标签：c#, windows-phone

```
var store = await ContactStore.CreateOrOpenAsync();
StoredContact sc = new StoredContact(store);
IDictionary<string, object> values = await sc.GetPropertiesAsync();
values[KnownContactProperties.FamilyName] =  "bbb";
values[KnownContactProperties.GivenName]=  "worerrrrld";

//*************problem here**************
Nullable<DateTime> birth = DateTime.Now;
values[KnownContactProperties.Birthdate] = birth;
//values[KnownContactProperties.Birthdate] = DateTime.Now;
//values[KnownContactProperties.Birthdate] = "2010-05-10";
//it will cause exception by any way above.
//***************************************

await sc.SaveAsync();//Exception throw here  :System.InvalidCastException 
```

关于windows phone8 API

`Windows.Phone.PersonalInformation`命名空间

Class 太奇怪了`StoredContact`！

有谁能够帮我！这个怎么设置`KnownContactProperties.Birthdate`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:08:51.630

InvalidCastException 是正常的，因为预期的对象是 DateTimeOffset。

尝试这个：

```
values[KnownContactProperties.Birthdate] = new DateTimeOffset(DateTime.Parse("2010-05-10")); 
```

问候。

# objective-c - FSEvents - 找出目标目录中发生的变化

> ID：14376345
> 
> 赞同：3
> 
> 时间：2013-01-17T09:56:04.320
> 
> 标签：objective-c, fsevents

我只是设置了一个`FSEvent`以监视目标文件夹的状态。它工作得很好，因为每次发生更改时都会通知我，并且我还会获得发生更改的子目录的路径。但是，如果我想了解执行的操作是什么？是否添加、修改、重命名或删除了文件？

在 Mac 开发人员库中，我通过使用持久事件来阅读

> “即使您的应用程序未运行，您也可以找出哪些文件已被修改。这可以大大简化备份修改文件、检查多文件项目中更改的依赖项等任务。”

但如果我理解得很好，这只是将目录的当前状态与事件 ID 定义的前一个状态进行比较的一种方式。因此，我只会获得发生更改的子目录的路径。

我的问题是：我真的必须通过创建`Directory Hierarchy Snapshots`并稍后比较它们来“手动”在不同时间拍摄目录状态的快照，以便找出在快照之间执行的操作是什么？没有更快的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T21:55:15.780

我做了以下操作，以便能够区分正在监视的文件夹内的文件的不同操作`FSEvent`（添加文件、重命名文件、删除文件和修改文件）。

我创建了一个`File`具有以下属性的对象（您可以通过调用获得任意数量的对象`attributesOfItemAtPath:error:`）：

```
@property (strong) NSString *name;
@property (strong) NSString *type;
@property (strong) NSDate *creationDate;
@property (strong) NSDate *modificationDate;
@property (strong) NSString *hash;
@property (strong) NSString *path; 
```

可以通过以下方式填充`NSMutableArray`File 对象：

```
NSMutableArray *files = [[NSMutableArray alloc] init];
NSString *dirPath = //directory you are watching
NSFileManager *fileManager = [NSFileManager defaultManager];
NSArray *theFiles =  [fileManager contentsOfDirectoryAtURL:[NSURL fileURLWithPath:dirPath]
                                includingPropertiesForKeys:[NSArray arrayWithObject:NSURLNameKey]
                                                   options:NSDirectoryEnumerationSkipsHiddenFiles
                                                     error:nil];
NSArray* fileNames = [theFiles valueForKeyPath:@"lastPathComponent"];
if ( [fileNames count] > 0 ) {
    for (NSInteger i=0; i<[fileNames count]; i=i+1) {
        NSString *currentPath = [dirPath stringByAppendingString:[fileNames objectAtIndex:i]];
        NSError *error;
        NSDictionary *fileInfo = [fileManager attributesOfItemAtPath:currentPath error:&error];
        File *currentFile = [[File alloc] initWithName:[fileNames objectAtIndex:i]
                                                  withType:fileInfo.fileType
                                                  withPath:currentPath
                                                  withHash: //get file hash
                                          withCreationDate:fileInfo.fileCreationDate
                                   andWithModificationDate:fileInfo.fileModificationDate];
        [files addObject:currentFile];
} 
```

如果目录包含子文件夹，则为每个子文件夹迭代此过程就足够了，返回 File 对象数组。

要了解执行了什么操作，现在只需面对`NSMutableArray *oldSnap`在`NSMutableArray *newSnap`. `FSEvent`首先，有必要将文件与文件放在`oldSnap`一起`newSnap`，然后反之亦然。

如果 in`oldSnap`中缺少给定名称的文件`newSnap`，则表示该文件已被删除或重命名。如果在 中存在具有相同哈希`newSnap`的文件，则该文件已被重命名；否则它已从文件夹中删除。

完成比较，如果 中的文件与 中的同名文件`newSnap`不同，则该文件已被修改。如果 newSnap 中有一个文件在`fileModificationDate``oldSnap``oldSnap`，则该文件是新添加的。

我还没有想出一个关于重命名和修改文件的解决方案。希望这个答案可以帮助其他人！

# objective-c - iOS6 崩溃 : libMobileGestalt copySystemVersionDictionaryValue

> ID：14376347
> 
> 赞同：1
> 
> 时间：2013-01-17T09:56:15.833
> 
> 标签：objective-c, ios6, xcode4.5, ipad-3

我被困了一个多星期，我无法弄清楚为什么我的应用程序只在 IPAD3 ios6.0.1 中崩溃，所有其他 ipad 都没有崩溃，我的应用程序使用了大量内存，因为它下载了很多内容并使用了很多网络浏览量，

这是崩溃日志：

```
iPad-3 backboardd[51] <Warning>: BKSendGSEvent ERROR sending event type 23: (ipc/send) invalid destination port (0x10000003)
iPad-3 backboardd[51] <Warning>: BKSendGSEvent ERROR sending event type 23: (ipc/send) invalid destination port (0x10000003)
iPad-3 UserEventAgent[13] <Notice>: jetsam: kernel termination snapshot being created
iPad-3 com.apple.launchd[1] (UIKitApplication:com.mmm.ipad[0x1066][1275]) <Notice>: (UIKitApplication:com.mmm.ipad[0x1066]) Exited: Killed: 9
iPad-3 com.apple.debugserver-189[1274] <Warning>: 1 +0.000000 sec [04fa/1303]: error: ::read ( 5, 0x1b5a0c, 1024 ) => -1 err = Bad file descriptor (0x00000009)
backboardd[51] <Warning>: BKSendGSEvent ERROR sending event type 23: (ipc/send) invalid destination port (0x10000003)
iPad-3 backboardd[51] <Warning>: Application 'UIKitApplication:com.mmm.ipad[0x1066]' exited abnormally with signal 9: Killed: 9
<Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
<Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2013-01-17-114238.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0 
```

# java - 具有重复键的映射行为

> ID：14376351
> 
> 赞同：0
> 
> 时间：2013-01-17T09:56:20.597
> 
> 标签：java, collections

HashMap 通常用最新的值替换它的值。但是我读过的一篇文章提到了它，因为如果添加重复值，它会保留一个链表。

[阅读“如果两个不同的对象具有相同的哈希码会发生什么”](http://javarevisited.blogspot.sg/2011/02/how-hashmap-works-in-java.html)

但是我什至没有发现 ConcurrentHashMap 没有维护这样的列表？

哪个集合在列表中维护重复项，如果是，如何使用 get("key") 方法识别相关对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:04:31.580

“List”实际上是对链表对象结构的重新实现。这是 HashMap 用来存储键和值的 Entry 类：

```
static class Entry<K,V> implements Map.Entry<K,V> {
    final K key;
    V value;
    Entry<K,V> next;  <-- This one refers to the next element
    int hash
..
} 
```

所以，没有明确的实现`LinkedList`。

这篇文章讨论的是两个键具有相同的哈希码会发生什么。然后它当然会存储两个键值对。如果两个键是`equal()`相互的，那么它将替换值。

**HashMap 的详细工作原理**：请参阅我对这个问题的回答：[Best practice on what should be key in a hashtable](https://stackoverflow.com/questions/14367081/best-practices-on-what-should-be-key-in-a-hashtable/14369763#14369763)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:06:28.040

以下是哈希图（通常）的工作方式：

Hashmaps 保存了一个桶的集合，用来放置东西。当您插入某些内容时，哈希函数将应用于您要插入的键。生成的“哈希”指示将数据放入哪个存储桶。两个不同的键可以散列到同一个存储桶。这意味着，例如，当您将散列到存储桶 10 的第二个项目插入时，java 实现必须将您的新项目添加到跟踪存储桶 10 中项目的链表的末尾。

仅仅因为两个项目存储在同一个桶（链表）中并不意味着它们具有相同的键。这只是意味着它们的键碰巧散列到相同的值（或等效值以散列桶的数量为模，准确地说）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:08:47.670

ConcurrentHashMap 中的“并发”是指线程安全，与为一个键存储多个值无关。

您可能可以在这里找到解决问题的方法：[HashMap with multiple values under the same key](https://stackoverflow.com/questions/4956844/hashmap-with-multiple-values-under-the-same-key)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:20:29.020

![在此处输入图像描述](../Images/3ec6b9ab9620c13df356d0dba4a10e2f.png)

在这里，您可以看到数组是哈希码，如果两个对象 A2 和 B2 具有相同的哈希码，那么它们将被添加到同一个桶中。

但是如果对象 A2 和 A3 具有相同的哈希码并返回`true`，`equals()`则对象 A2 将被 A3 替换。

# visual-studio - 当目标在 VS 解决方案中失败时，如何使 msbuild 失败？

> ID：14376357
> 
> 赞同：6
> 
> 时间：2013-01-17T09:56:33.573
> 
> 标签：visual-studio, msbuild, projects-and-solutions

我在命令行上使用 msbuild 来构建一个包含 C++ 项目的 VS2012 解决方案。该项目有一个在构建之后运行的目标：

```
<Target Name="RunTargetAfterBuild" AfterTargets="Build">
  <Error Text="I am a failing target" />
</Target> 
```

我希望 msbuild 在构建时返回错误，但是在构建过程中的某个地方，错误会丢失并且 msbuild 报告“构建成功”。因此，ERRORLEVEL 仍然设置为 0，因此很难检测到在自动构建期间是否出现问题。如何让 msbuild 将此错误一直传播到顶级项目/解决方案？我知道这是可能的，因为编译器错误等会发生这种情况。

以下是输出的相关部分：

```
> msbuild test.sln

...

...: error : I am a failing target  [...test.vcxproj]
Done Building Project "...test.vcxproj" (default targets) -- FAILED.

Done Building Project "...test.vcxproj.metaproj" (default targets).

Done Building Project "...test.sln" (Build target(s)).

Build succeeded.    --> this is NOT what I want

....

0 Warning(s)
1 Error(s) 
```

而对于编译器错误，输出是这样的：

```
> msbuild test.sln

....

...: error C3861: 'HECK': identifier not found [...test.vcxproj]
Done Building Project "...test.vcxproj" (default targets) -- FAILED.

Done Building Project "...test.vcxproj.metaproj" (default targets) -- FAILED.

Done Building Project "....test.sln" (Build target(s)) -- FAILED.

Build FAILED.     --> this is what I want

0 Warning(s)
1 Error(s) 
```

**解决方案**

正如艾伦回答的那样，命名目标是有效的，`AfterBuild`因为这是 msbuild 的已知目标。但是，这需要在导入 Microsoft.Cpp.targets 之后定义目标，这有点容易出错，并且更难定义多个目标以在构建后运行。在研究这个时，我发现在不使用目标但使用任何其他目标`AfterTargets`时使用确实按预期工作。`Build`不知道为什么，但是现在我正在使用这个解决方案：

```
<Target Name="RunTargetAfterBuild" AfterTargets="FinalizeBuildStatus">
  <Error Text="I am a failing target" />
</Target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-06T15:04:11.417

您可以扩展 BuildDependsOn 属性以将您的目标作为构成成功构建的一部分：

```
<PropertyGroup>
  <BuildDependsOn>
      $(BuildDependsOn);
      RunTargetAfterBuild
  </BuildDependsOn>
</PropertyGroup> 
```

更多细节可以在这里找到：http: [//msdn.microsoft.com/en-us/library/ms366724.aspx](http://msdn.microsoft.com/en-us/library/ms366724.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T04:04:45.840

将您的自定义目标添加到项目的 InitialTargets 属性。

InitialTargets="RunTargetAfterBuild"

你是对的，这不会解决你的问题。但是使用 AfterBuild 目标，我能够在 .sln 上重现并让 msbuild 失败

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T14:26:12.617

我相信错误项应该只在满足条件时才会失败，而不是每次都失败（这可能是你想要的？）

例如

```
<Error Text="Setup Kit Failed to copy!" Condition="'@(FilesList)' == ''" /> 
```

如果满足条件（在这种情况下，之前的复制任务没有复制文件），那么只会引发错误，然后构建失败

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-03T07:27:10.927

您的解决方案的更好实施`AfterBuild`是使用`BeforeTargets`，如下所示：

```
<Target Name="RunTargetAfterBuild" BeforeTargets="AfterBuild">
  <Error Text="I am a failing target" />
</Target> 
```

这支持多个这样的目标，并且不依赖于包含顺序与`Microsoft.Cpp.targets`.

# c# - 使用嵌入式资源加载 Html

> ID：14376358
> 
> 赞同：0
> 
> 时间：2013-01-17T09:56:33.883
> 
> 标签：c#, xaml, webview, microsoft-metro

我在 Windows 8 Metro 应用程序中使用 WebView 控件。我有一个 html 字符串，我从网络流中读取，其中包含标记中的嵌入图像。

如果 html 中的图片的源指向某个网站，则该控件效果很好，但是对于嵌入在标记中的图像，结果不是很好。

这些图像不渲染，而是渲染了一些表示图像占位符的块。

我正在使用 NavigateToString 方法来加载 html。

*   嵌入图像是控件的限制还是有加载 html 以显示嵌入图像的特殊方法？

*   如果这是控件的限制，关于
    如何使其工作的任何想法或建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T06:29:16.133

经过一些研究和调查，我可以确认：

*   如果没有嵌入到您的应用程序本身中，您将无法将带有链接资源的 html 文件加载到图像、css 等。

**解决方法：**

*   在 html 文件中嵌入 css，而不是单独的文件。
*   将链接图像转换为 Base64 并嵌入`img`标签中。
*   如果已执行上述步骤，您现在可以将 html 文件存储在您有权访问的任何可写文件夹中。
*   接下来，将 html 文件内容读入字符串。
*   最后，要使用嵌入的 css 和图像渲染 html，请将上述步骤中的字符串传递给控件的`NavigateToString`方法`WebView`。
*   瞧！包含所有样式和图像的 html 应按预期呈现。

**也许不是最好的解决方案。但是，实现简单且可行。**

# android - 在 Google Map API V2 的 MyLocation 中禁用中心按钮

> ID：14376361
> 
> 赞同：30
> 
> 时间：2013-01-17T09:56:35.090
> 
> 标签：android, google-maps

我在网上搜索了很多，但我没有找到任何可以回答我的问题的东西。当我启用 MyLocation 时

> gmap.setMyLocationEnabled(true)

我会自动获得一个按钮，使地图以我当前的位置为中心。我想删除它，所以我问你怎么做。我希望你们中的某个人可以帮助我！

* * *

## 回答 #1

> 赞同：173
> 
> 时间：2013-03-21T13:30:55.613

在您的`GoogleMap`对象上调用以下方法后：

```
map.setMyLocationEnabled(true);
map.getUiSettings().setMyLocationButtonEnabled(false); 
```

您应该会看到当前位置指示器（蓝色圆圈），但无法将地图置于该位置的中心。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T10:25:52.267

这是非常简单的答案；

```
gmap.setMyLocationEnabled(true); ==> means "to center the map on my current location"
gmap.setMyLocationEnabled(false); ==> means "NOT to center the map on my current location" 
```

[更新]

如果您想删除地图上的位置按钮，请在下面的代码中搜索并删除它；

```
public void setMyLocationButtonEnabled(View v) {
    if (!checkReady()) {
        return;
    }
    // Enables/disables the my location button (this DOES NOT enable/disable the my location
    // dot/chevron on the map). The my location button will never appear if the my location
    // layer is not enabled.
    mUiSettings.setMyLocationButtonEnabled(((CheckBox) v).isChecked());
}

public void setMyLocationLayerEnabled(View v) {
    if (!checkReady()) {
        return;
    }
    // Enables/disables the my location layer (i.e., the dot/chevron on the map). If enabled, it
    // will also cause the my location button to show (if it is enabled); if disabled, the my
    // location button will never show.
    mMap.setMyLocationEnabled(((CheckBox) v).isChecked());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T09:59:48.500

你有没有尝试过这样的事情？

```
<fragment xmlns:map="http://schemas.android.com/apk/res-auto"
        android:id="@+id/backgroundMap"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        map:uiZoomControls="false"
        map:uiCompass="false"
        class="com.google.android.gms.maps.SupportMapFragment"/> 
```

它有效地从我的地图上删除了所有默认 UI，除了与标记相关的 UI。检查[此](https://developers.google.com/maps/documentation/android/map#using_xml_attributes)链接以获取更多信息。

**编辑**

回复 OP 的评论，id 建议使用自定义位置算法，而不是让谷歌地图 API 接管。我以前做过，它并不太痛苦，我只是在地图上放了一个标记，让用户知道他在哪里，并使标记可拖动，以便用户可以手动调整他的位置。

检查[此](http://www.vogella.com/articles/AndroidLocationAPI/article.html)链接。

# routes - ServiceStack.Swagger 仅捕获服务中的第一条路由

> ID：14376368
> 
> 赞同：1
> 
> 时间：2013-01-17T09:56:46.767
> 
> 标签：routes, servicestack, swagger

这是 ServiceStack.Swagger 的一个问题：

1）从github下载[一个例子。](https://github.com/ServiceStack/ServiceStack.UseCases/tree/master/SwaggerHelloWorld)2) 转到 HelloText 类（或任何描述对 REST 服务的请求的类，即 HelloImage 或 Hello - 在此特定示例中）。为请求再添加一条路由：

```
[Route("/hellotext/{Name}", Summary = "Hello Text Service")]
[Route("/abc/{Name}", Summary = "ABC Text Service")]
public class HelloText
{
   [ApiMember(Name = "Name", 
              Description = "Name Description", 
              ParameterType = "path", 
              DataType = "string", IsRequired = true)]
    public string Name { get; set; }
} 
```

3) 转到本地 swagger-page (localhost:yourport/swagger-ui.html) 或资源页面 (localhost:yourport/resources)，您会看到“/abc/”路由被捕获，“/hellotext”被捕获不是

```
/resource/abc   
/resource/helloimage    
/resource/hello 
```

这是错误还是预期行为？如何在多条路线上使用 swagger-ui？还是我必须复制粘贴请求类并将每条路线拆分到它自己的类上？

# diff - 两个java源文件的结构差异

> ID：14376370
> 
> 赞同：5
> 
> 时间：2013-01-17T09:56:56.010
> 
> 标签：diff, java

有没有办法找到两个java源文件的结构差异？我想找到两个 java 文件的结构差异，但我不知道如何启动它。java中有没有为此目的的库？

更新：结构差异意味着它不关心空白或位置。它应该在语法上比较源 a。这有助于我们跟踪实际更改，即使方法被移动到另一个位置或以不同的顺序出现。

我找到了一个适用于 C# 和 pascal 的工具，但我需要它来比较 java 源文件。请检查给定的链接 [http://www.modelmakertools.com/structured-diff-viewer/index.html](http://www.modelmakertools.com/structured-diff-viewer/index.html)

如果您知道任何用于此目的的库，请分享。谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:03:07.000

Eclipse JDT 对 java 源代码进行了结构比较。如果您有特殊要求，那么看看[Eclipse EMF](http://www.eclipse.org/modeling/emf/?project=emf)尤其是[EMF Compare](http://www.eclipse.org/emf/compare/)可能是个好主意。作为使用 Eclipse 建模的起点，您可能还想看看[Eclipse MoDisco](http://www.eclipse.org/MoDisco/)。它附带一个 Java 5 EMF 模型，因此还提供了带有 EMF 比较的结构差异。

# highcharts - 如何在 Highcharts 中移动图例

> ID：14376372
> 
> 赞同：1
> 
> 时间：2013-01-17T09:56:57.130
> 
> 标签：highcharts, draggable, legend

Highcharts 库的图例位置并不是很智能，所以我想为用户提供随意拖动图例的可能性。似乎原则上可以通过

```
jQuery(".highcharts-legend").draggable(); 
```

但似乎“它不起作用，因为 jQuery 可拖动基于绝对位置和顶部/左侧 css 值以及 SVG 命名空间内的 highcharts 绘制图表 - 绝对位置或顶部/左侧 css 属性在那里不起作用”（[来源](http://dev.highslide.com/forum/viewtopic.php?f=9&t=7967&p=37347)）。

有人知道解决方案吗？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:26:16.203

这个建议是要求的，所以你可以在这里投票：http: [//highcharts.uservoice.com/forums/55896-general/suggestions/912335-draggable-legend-box](http://highcharts.uservoice.com/forums/55896-general/suggestions/912335-draggable-legend-box)

# android - 如何申报清单？

> ID：14376375
> 
> 赞同：5
> 
> 时间：2013-01-17T09:57:06.347
> 
> 标签：android, list

我将所有应用程序字符保存在`R.string`. 现在我想将 R.string 字符保存在列表中。

如何申报清单？

我用

```
List<String> list = new ArrayList<String>();
list.add(R.string.helloworld); 
```

和

```
List<integer> list = new ArrayList<integer>();
list.add(R.string.helloworld); 
```

但我不能添加它。

这该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T09:59:46.470

你的声明是正确的，有问题`R.string.helloworld`。这实际上是一个`static int`（它的声明在`R.java`文件中）。记得导入`java.util`for`List`和`ArrayList`。如果您在 Eclipse 中，请按`Ctrl + Shift + O`组织导入。

使用`getString(R.string.helloworld)`：

[字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)

所以你的代码看起来像：

```
import java.util.ArrayList;
import java.util.List;    

List<String> list = new ArrayList<String>();
list.add(getResources().getString(R.string.helloworld)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:07:02.260

```
 List<String> list = new ArrayList<String>();
    list.add(getResources().getString(R.string.helloworld));

    List<Integer> list1 = new ArrayList<Integer>();
    list1.add(R.string.helloworld); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:02:28.260

试试这个...

也添加导入

```
import java.util.ArrayList;
import java.util.List;

List<String> lst = new  ArrayList<String>(); 
```

加上

```
lst.add(getResources().getString(R.string.helloworld)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:01:04.080

试试这个

```
 List<String> list = new ArrayList<String>();
  list.add(getResources().getString(R.string.helloworld)); 
```

这可能对你有帮助吗

# asp.net-mvc-4 - EF 5，更新对象给出“发生引用完整性约束违规”

> ID：14376376
> 
> 赞同：10
> 
> 时间：2013-01-17T09:57:14.193
> 
> 标签：asp.net-mvc-4, entity-framework-5

在我的模型中，我有一堆域对象。现在我在尝试更新用户对象时遇到问题。User 与 Role 对象有外键关系。当我在不更改外键值（FkRoleId）的情况下更新用户对象时，一切正常。但是，当我更改要更新的当前用户的角色时，出现错误：

> 发生参照完整性约束冲突：定义参照约束的属性值在关系中的主体对象和从属对象之间不一致。

这是我更新用户对象的方法：

```
public void Update(User user)
{
    using (var context = new DBEntities())
    { 
    context.Entry(user).State = System.Data.EntityState.Modified;
    context.SaveChanges();
    }
} 
```

如何在不出现此异常的情况下更新我的用户对象？必须有一种方法可以将外键值更改为将用户映射到另一个角色。

在这种情况下，这是我的域类：

```
public partial class User
{
public User()
{
    this.Advertisers = new HashSet<Advertiser>();
    this.Cases = new HashSet<Case>();
    this.Materials = new HashSet<Material>();
}

public int PkId { get; set; }
public int FkRoleId { get; set; }
public string Name { get; set; }
public string Email { get; set; }
public string Password { get; set; }
public System.DateTime Created { get; set; }
public bool Active { get; set; }

public virtual ICollection<Advertiser> Advertisers { get; set; }
public virtual ICollection<Case> Cases { get; set; }
public virtual ICollection<Material> Materials { get; set; }
public virtual Role Role { get; set; }
}

public partial class Role
{
public Role()
{
    this.Users = new HashSet<User>();
}

public int PkId { get; set; }
public string Name { get; set; }
public string Description { get; set; }

public virtual ICollection<User> Users { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-14T21:36:37.730

引用您的评论：

> 然而; 如果我将导航属性 user.Role 设置为 null 它工作得很好。但是，这是推荐的工作方式吗？

是的，在这种情况下是这样。

您必须记住，您输入一个带有分离对象的新上下文`user`（包括对 的引用`user.Role`）。通过将状态设置为`Modified`您将对象`user`与与`user.Role`此新上下文相关的对象一起附加。

因为您正在使用外键关联 - 这意味着外键由`FkRoleId`模型类中的属性表示 - 关系以两种方式描述：通过导航属性`user.Role`和标量属性`user.FkRoleId`。如果这些不一致 - 即`user.Role.PkId != user.FkRoleId`- EF 不知道哪一个描述了正确的关系并抛出您所拥有的异常。

如果设置`user.Role`为`null`EF，则将 only 视为`user.FkRoleId`描述用户和角色之间关系的属性，并删除导致异常的歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T14:33:35.707

为了搜索者的利益，我遇到了同样的错误，但找到了一个快速修复。

我正在将具有 FK 关系的类加载到要编辑的视图中。即使没有任何更改，FK 也会被删除并发生此错误。修复是在包含 FK 的 Razor 视图中包含一个隐藏字段。例如

```
@Html.HiddenFor(model => model.ReleaseInfo.BookId) 
```

复制下面的代码，以便您检查您的情况是否相似。

控制器动作

```
public ActionResult Edit(int id = 0)
        {
            Book book = db.Books.Find(id);
            if (book == null)
            {
                return HttpNotFound();
            }
            ViewBag.Id = new SelectList(db.ReleaseInfo, "BookId", "BookId", book.Id);
            return View(book);
        }

        //
        // POST: /Book/Edit/5

        [HttpPost]
        [ValidateAntiForgeryToken]
        public ActionResult Edit(Book book)
        {
            if (ModelState.IsValid)
            {
                db.Entry(book).State = EntityState.Modified;

                db.SaveChanges();
                return RedirectToAction("Index");
            }
            ViewBag.Id = new SelectList(db.ReleaseInfo, "BookId", "BookId", book.Id);
            return View(book);
        } 
```

关系

图书.cs

```
 public class Book
    {
        [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
        public int Id { get; set; }

        [Required]
        [MaxLength(100)]
        public string Title { get; set; }

        public virtual ICollection<Author> Authors { get; set; }

        public virtual ReleaseInfo ReleaseInfo { get; set; }

        public virtual ICollection<ReRelease> ReReleases { get; set; }

    } 
```

发布信息.cs

```
public class ReleaseInfo
    {
        // One to one relationship uses Books Key as Key.
        [Key, ForeignKey("Book")]
        public int BookId { get; set; }

        [DataType(DataType.Date)]
        [DisplayFormat(DataFormatString = "{0:yyyy-MM-dd}", ApplyFormatInEditMode = true)]
        public DateTime ReleaseDate { get; set; }

        public virtual Book Book { get; set; }
    } 
```

# python - 使用 nibabel 的 Python py2app 独立应用程序

> ID：14376377
> 
> 赞同：0
> 
> 时间：2013-01-17T09:57:14.230
> 
> 标签：python, macos, py2app

我正在尝试使用 py2app 创建一个 OSx 应用程序。

我使用 py2app 脚本没有问题：

```
py2applet --make-setup UltraProcCMD.py
python setup.py py2app 
```

当我不使用 nibabel 包时，此应用程序运行良好，但当我使用时，我收到以下错误：

```
File "nibabel/__init__.pyc", line 38, in <module>
File "nibabel/analyze.pyc", line 91, in <module>
File "nibabel/wrapstruct.pyc", line 111, in <module>
ImportError: cannot import name imageglobals 
```

我试图显式导入 imageglobals。即在代码中：

```
from nibabel import imageglobals 
```

这也会在 py2app 中产生错误，但在 python 解释器中运行的脚本中可以正常工作。

有人知道我错过了什么吗？任何帮助将不胜感激。

编辑：我感觉 py2app 并没有从 nibabel 中提取它应该的所有依赖项。有没有办法强制将整个 nibabel 包包含在 py2app 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T07:42:00.710

找到了一个简单的解决方案！

py2app 似乎没有在 nibabel 包中导入所有必需的依赖项，并且 nibabel 包众所周知，有一个自定义的 py2app[配方](http://svn.pythonmac.org/py2app/py2app/trunk/doc/index.html#recipes)。

所以使用：

```
python setup.py py2app --packages nibabel 
```

代替：

```
python setup.py py2app --packages nibabel 
```

似乎强制 py2app 包含整个 nibabel 包

# vb.net - 如何在 VB.NET 中制作只读日期时间选择器

> ID：14376388
> 
> 赞同：2
> 
> 时间：2013-01-17T09:57:37.803
> 
> 标签：vb.net, datetimepicker, readonly

谁能知道如何在 VB.NET 中制作只读的 DateTime 选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T12:31:12.767

没有内置方法可以将`DateTimePicker`控件更改为只读。您可能可以创建自己的自定义只读控件，该控件包含或继承该`DateTimePicker`控件，但是，您还有其他几个更简单的选项：

*   如果您从不需要该值是可编辑的，并且它只是只读的，那么不要使用该`DateTimePicker`控件。相反，您应该使用`Label`控件。
*   如果它有时是可编辑的，有时是只读的，请使用`DateTimePicker`控件并切换`Enabled`属性以在可编辑和只读模式之间切换。
*   如果您希望它看起来像其他条目控件，但不灰显（就像禁用它时的情况一样），则使用`TextBox`控件并将其`ReadOnly`属性设置为`True`.

# javascript - 上移列表项

> ID：14376389
> 
> 赞同：0
> 
> 时间：2013-01-17T09:57:38.050
> 
> 标签：javascript, dom

你好编码员我有以下脚本：http: [//jsfiddle.net/UqDJk/241/](http://jsfiddle.net/UqDJk/241/)

我希望 moveUp 函数将列表上移一位..

```
var moveUp = function (up, direction) {
  var btn = up.target,
    li = btn.parentNode;

  li.insertBefore(li[1].nextSibling)
} 
```

有没有一种简单的方法可以做到这一点？ps请纯javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:00:28.267

我想你想要：

```
li.parentNode.insertBefore(li, li.previousSibling); 
```

但请注意，这`li.previousSibling`将是`null`第一个元素，在这种情况下，它将*附加*到列表中。所以你必须添加一个检查以避免移动第一个元素：

```
if (li.previsousSibling) {
    li.parentNode.insertBefore(li, li.previousSibling);
} 
```

* * *

您的代码中的问题：

*   DOM 操作方法总是（？）在父节点上工作，而不是在节点本身上。如果您不确切知道某个方法的工作原理，请在[MDN](https://developer.mozilla.org)上查找，例如 google for `mdn insertBefore`.
*   `li[1]`尝试访问 的属性`1`，`li`该属性不存在，因为`li`它是一个 DOM 元素对象。

# php - DNS 设置 - 跨多个域的 1 个应用程序

> ID：14376390
> 
> 赞同：0
> 
> 时间：2013-01-17T09:57:40.937
> 
> 标签：php, dns, cname, multiple-domains

我已经使用 PHP 和 MySQL 创建了一个应用程序。我想跨多个域设置对系统的访问。该应用程序托管在我自己的域上，我想为每个客户使用 CNAME 来访问它。

客户 A： http: [//myapp.domain-a.com](http://myapp.domain-a.com) 客户 B：[http ://system.domain-b.co.uk](http://system.domain-b.co.uk)

谁能给我一些关于如何实现这一目标的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:05:25.680

您可以通过域的 DNS 挂钩来执行此操作。例如：更改子域的 DNS 设置`domain-b.co.uk`并编辑相应的 DNS 条目 ( **CNAME** )，并将此子域`system`的**别名**( `system.domain-b.co.uk`) 更改为`domain-a.com`.

现在所有请求都`system.domain-b.co.uk`被重定向到您的服务器`domain-a.com`。然后你只需要确保后面的服务器通过添加一个虚拟主机来`domain-a.com`接受请求，**或者**如果没有定义替代路由，则默认情况下将此机器的所有传入请求路由到虚拟主机。`system.domain-b.co.uk`**`myapp.domain-a.com`**

 **使用别名（而不是使用静态 IP 地址）的优点：如果 IP 地址发生`domain-a.com`变化，您不必编辑`system.domain-b.co.uk`.

*PS：DNS 更改可能需要 24-48 小时才能生效***

# python - 你如何存储 Django 模型的可数属性？

> ID：14376391
> 
> 赞同：0
> 
> 时间：2013-01-17T09:57:42.623
> 
> 标签：python, django, caching, django-models, nosql

我有一个代表链接实体的数据库。这个实体有一些“昂贵”的操作 - 可数属性。我不想将这个可数属性存储为数据库中的字段或缓存值：

> cache.set(full_entityname_entity_id, property_value)

看起来并不漂亮，我也可以在计数属性上提供“过期”方法。也许，是时候为此使用redis或其他nosql解决方案了，也许，我不知道Postgresql、python和django的所有优点。我认为，这是一个普遍的问题：解决它的更好方法是什么？

# excel - Excel 2010：复制单元格时自动滚动到下一个单元格

> ID：14376395
> 
> 赞同：0
> 
> 时间：2013-01-17T09:58:04.607
> 
> 标签：excel, excel-2010, vba

在做某种复制粘贴任务时，我想到了这个想法。实际上我正在复制一个单元格并粘贴到其他应用程序中，我需要再次复制下一个单元格并粘贴它。这继续。我有一些 15-20 行，我需要将其粘贴 100 次。所以每次我需要手动滚动到下一个单元格然后复制然后粘贴。相反，如果我复制单元格，光标应该自动滚动到下一个单元格，最后它应该滚动回第一个单元格，有什么办法吗？我正在使用 Excel 2010。

非常感谢任何有用的回复。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:01:46.990

将此 Sub 放入 VBA 并关联一个按钮：

```
 Sub CopyAndMove()
      Selection.Copy
      ActiveCell.Offset(0, 1).Range("A1").Select
  End Sub 
```

希望这可以帮助。

# iphone - WebView 自动重载 Xcode

> ID：14376401
> 
> 赞同：0
> 
> 时间：2013-01-17T09:58:21.003
> 
> 标签：iphone, xcode, webview, reload

基本上，一旦按下按钮，我需要每 5 秒左右刷新或重新加载一次 Web 视图。

按下按钮时，我可以加载网页。但是我最初编写的计时器只是在指定时间后崩溃。这就是我对按钮和 Web 视图所做的。

```
- (IBAction)SendGPSData:(id)sender {
    NSURL *myURL =[NSURL URLWithString:@"http://www.google.co.uk"];
    NSURLRequest *myRequest = [NSURLRequest requestWithURL:myURL];
    [myWebView2 loadRequest:myRequest];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:06:52.697

为了`UIButton`

```
- (IBAction)SendGPSData:(id)sender 
  {
   [webView reload];

  } 
```

并且对于`NSTimer`

```
[NSTimer scheduledTimerWithTimeInterval:5 target:self selector:@selector(WebViewLoad:) userInfo:nil repeats:NO];

-(void)WebViewLoad:(NSTimer *)theTimer
{
[webView reload];
} 
```

# ruby - 元编程 Ruby 中的 `self.attribute =` 问题

> ID：14376408
> 
> 赞同：1
> 
> 时间：2013-01-17T09:58:35.847
> 
> 标签：ruby, ruby-on-rails-3

所以我正在考虑使用缺少的方法来构造几个我需要管理的大量日期时间的日期时间方法。

我将这种方法基于 Ryan Bates 虚拟属性，并相信我已经完成了这个元编程挑战（我的第一个挑战！）除了一个我还没有解决的小问题......

对于我的方法的这一部分，我收到一个错误，`=`这应该是意外的......

```
 define_method(save_method) do
      self.send(attribute) = Chronic.parse(args[0], context: :past) if instance_variable_get("@#{method_name}").present?
    end 
```

该方法应该期待一个`)`......但我无法弄清楚。

```
def method_missing(method_name, *args)
  if method_name.to_s.match(/^chronic_(\w+)/)

      save_method     = "save_#{method_name}"
      validate_method = "check_#{method_name}"
      attribute = method_name.to_s.gsub(/^chronic_/, '').to_sym

      self.class.class_eval do
        attr_accessible method_name.to_sym
        attr_writer     method_name.to_sym
        validate        validate_method.to_sym
        before_save     save_method.to_sym

        define_method(save_method) do
          self.send(attribute) = Chronic.parse(args[0], context: :past) if instance_variable_get("@#{method_name}").present?
        end

        define_method(validate_method) do
          if instance_variable_get("@#{method_name}").present? && Chronic.parse(args[0], context: :past).nil?
            errors.add :released_at_text, "cannot be parsed"
          end
        end

        define_method(method_name) do
          instance_variable_get("@#{method_name}") || attribute
        end

      end
      puts attribute
      send(method_name)
    else
      super
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:18:16.380

```
define_method(save_method) do
  self.send("#{attribute}=", Chronic.parse(args[0], context: :past)) if instance_variables.include?("@#{method_name}")
end 
```

“ `=`”是setter方法名称方法的一部分，所以你必须`send("#{attribute}=", value)`

# wpf - RegisterMapping 抱怨“发现多个出口”？

> ID：14376409
> 
> 赞同：1
> 
> 时间：2013-01-17T09:58:37.627
> 
> 标签：wpf, telerik, prism, mef

我正在使用`Prism`v4 并`MEF`与`Telerik RadDocking`. 为了使用这些停靠面板`Prism`并与这些面板一起使用，需要一个自定义适配器。`MEF`我有一个工作适配器，其导出如下：

```
[Export]
public class RadPaneGroupRegionAdapter : RegionAdapterBase<RadPaneGroup>
{
    [ImportingConstructor]
    public RadPaneGroupRegionAdapter(IRegionBehaviorFactory regionBehaviorFactory)
        : base(regionBehaviorFactory)
    {
    }
    ...
} 
```

我在引导程序中配置聚合目录，如下所示：

```
protected override void ConfigureAggregateCatalog()
{
    this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(Bootstrapper).Assembly));
    this.AggregateCatalog.Catalogs.Add(new DirectoryCatalog("Modules"));
    this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(ViewModelLocator).Assembly));
    this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(MyContractClass).Assembly));
} 
```

## 棱镜抱怨多次出口？

问题是，当我尝试将此适配器添加到`Prism`适配器映射时，我收到[ImportCardinalityMismatchException](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.importcardinalitymismatchexception.aspx)，告诉我*“找到多个与约束匹配的导出：xxx.Adapters.RadPaneGroupRegionAdapter”*

```
protected override RegionAdapterMappings ConfigureRegionAdapterMappings()
{
    RegionAdapterMappings mappings = base.ConfigureRegionAdapterMappings();
    mappings.RegisterMapping(typeof(RadPaneGroup),
        this.Container.GetExportedValue<Adapters.RadPaneGroupRegionAdapter>());

    return mappings;
} 
```

我无法理解为什么会发生这种情况。**适配器类与 bootstrapper 在同一个程序集中**，所以我希望只有一个匹配的导出。

**请帮忙！**

## 更新：

如果我注释掉这一行，则永远不会抛出异常：

```
this.AggregateCatalog.Catalogs.Add(new AssemblyCatalog(typeof(MyContractClass).Assembly)); 
```

也许问题在于它`MyContractClass`依赖于相同的`Telerik`控件？如果是这种情况，我将如何解决这种歧义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T20:31:21.813

这里的问题是导入的候选者不止一个，而 MEF 无法决定使用哪一个。有两种方法可以处理这样的问题：

一种是更新您的构造函数以获取`IRegionBehaviorFactory`并添加[ImportManyAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.importmanyattribute%28v=vs.110%29.aspx)的序列。当然，您必须决定保留哪个工厂。

```
[ImportingConstructor]
        public RadPaneGroupRegionAdapter([ImportMany]IEnumerable<IRegionBehaviorFactory> regionBehaviorFactory)
            : base(regionBehaviorFactory)
        {
            //Decide which factory to keep.
        } 
```

另一种是使用[FilteredCatalog](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.hosting.filteredcatalog.aspx)并...过滤零件。您可以阅读这篇关于[过滤目录](http://mef.codeplex.com/wikipage?title=Filtering%20Catalogs)的文章。

[如果您添加导出元数据](http://mef.codeplex.com/wikipage?title=Exports%20and%20Metadata&referringTitle=Guide)，这两种方法都会更有效。

# c# - 在彼此下方显示数据行

> ID：14376412
> 
> 赞同：0
> 
> 时间：2013-01-17T09:58:43.327
> 
> 标签：c#, datatable, console-application

如何循环遍历数据表，以便行在彼此下方整齐地显示，逐行显示。

我尝试过的是以下内容，但就像这样，所有数据都显示在一列中。

```
foreach (DataRow row in myTopTenData.Rows)
            {
                foreach (DataColumn col in myTopTenData.Columns)
                {
                    Console.Write(row[col].ToString() + " ");
                    Console.WriteLine();
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:04:14.950

您可以使用这个小 Linq 查询和`String.Join`：

```
var allFields = myTopTenData.AsEnumerable()
      .Select(r => string.Join(Environment.NewLine, r.ItemArray));
string allFieldsLines = string.Join(Environment.NewLine, allFields);

Console.Write(allFieldsLines); 
```

这是带有循环的非 Linq 版本：

```
foreach (DataRow row in myTopTenData.Rows)
    Console.Write(string.Join(Environment.NewLine, row.ItemArray) + Environment.NewLine); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:04:26.143

你为什么不试试这个：

```
foreach (DataRow row in myTopTenData.Rows)
{
    foreach (DataColumn col in myTopTenData.Columns)
    {
        Console.Write(row[col].ToString() + " ");
    }
    Console.WriteLine();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:07:36.917

```
foreach (DataRow row in myTopTenData.Rows)
    {
        foreach (DataColumn col in myTopTenData.Columns)
            Console.Write(string.Format("{0, -10}", row[col].ToString()));

        Console.WriteLine();
     } 
```

`string.Format"{0, -10}"`将帮助您对齐列（左对齐使用负值，右对齐使用正值，当然 10 是任意值）。

# java - 如何使用 selenium webdriver 移动到网页中的不同选项卡？

> ID：14376413
> 
> 赞同：0
> 
> 时间：2013-01-17T09:58:46.233
> 
> 标签：java, selenium, webdriver, webpage

我有一个场景，我需要单击一个选项卡并输入一些文本并返回到第一个选项卡。

假设页面上有三个选项卡，我如何移动到 tab2 或 tab3 并返回到 tab1。

注意：我只是在谈论标签，而不是窗口。我尝试了各种 findElement (webdriver's) 方法，但没有运气。默认情况下，我将处于缺席状态（即第一次加载页面时）。我必须移动到例外选项卡

我使用 java 作为代码语言。

请参见下面的代码（两个 HTML 选项卡：1）缺席 2）例外）。您可以在跨度选项卡中看到选项卡名称。

```
<td nowrap="nowrap" align="center">
    <a accesskey="A" title="Absence" href="javascript:submitAction_RBET (document.win0,'TAB_BUTTON_ID','TIMESHEET#D');" name="TIMESHEET#D" tabindex="784">
       <span>
          <label class="PTUNDERLINE">A</label> bsence
       </span>
    </a>
</td>
<td nowrap="nowrap" align="center">
    <a accesskey="E" title="Exceptions" href="javascript:submitAction_RBET(document.win0,'TAB_BUTTON_ID','TIMESHEET#E');" name="TIMESHEET#E" tabindex="784">
       <span>
          <label class="PTUNDERLINE">E</label> xceptions
       </span>
    </a>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T10:32:37.973

我使用以下解决方案在选项卡之间切换。

```
 new Actions(driver)
    .sendKeys(driver.findElement(By.tagName("html")), Keys.CONTROL)
    .sendKeys(driver.findElement(By.tagName("html")), Keys.NUMPAD2)
    .build().perform(); 
```

在上面`Keys.NUMPAD2`是指您将移动到会话中的第二个选项卡。
您可以通过分别给出 NUMPAD3、NUMPAD4 等...来移动到第三、第四等...。

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:41:43.690

我有一个非常hacky的解决方案。我处于类似的情况，并通过在新窗口中打开所有选项卡，通过按住 shift 单击（这是在 Mac 上，因此快捷方式在不同平台上可能不同）解决了这个问题。它看起来像这样：

```
Actions builder = new Actions(driver); 
Action holdShift = builder.keyDown(Keys.SHIFT).build();
holdShift.perform();
webElement.click();

new Actions(driver).keyUp(Keys.SHIFT).build().perform();
//do something with window handles/names here (can switch between these). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:49:44.033

你能在a标签上放一个id吗？

```
<a id="tab1"></a> 
```

然后使用

```
WebElement tab1 = driver.findElement(By.id("tab1"));
tab1.click(); 
```

如果你不能，那么你还有其他选择：

[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/By.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/By.html)

XPath 可以工作，但我不能说我喜欢编写 xpath 表达式，所以我会尝试 css 选择器。见[http://www.w3schools.com/css/css_attribute_selectors.asp](http://www.w3schools.com/css/css_attribute_selectors.asp) 像这样的东西（虽然这很脆弱）

```
By.cssSelector("[title=Absence]"); 
```

# wordpress - 我们可以将 wordpress 中的小部件与 drupal 中的块进行比较吗

> ID：14376420
> 
> 赞同：0
> 
> 时间：2013-01-17T09:58:56.627
> 
> 标签：wordpress, drupal

我对 Wordpress 有点陌生。我发现 wordpress 中的术语与 Drupal 非常不同。我们可以将 Wordpress 中的小部件与 Drupal 中的块进行比较吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:06:14.613

是的，你可以将 wordpress 中的小部件作为 drupal 中的块进行比较

在 wordpress 中，我们可以定义小部件的渲染区域。

在 drupal 中，我们为要渲染的块定义区域。

# android - 由于动态访问字符串数组而导致程序崩溃

> ID：14376421
> 
> 赞同：0
> 
> 时间：2013-01-17T09:59:02.493
> 
> 标签：android, xml-parsing, android-asynctask

我创建了一个应用程序来解析数据并将其放入字符串数组中。我正在后台执行此任务。我想要实现的是，读取后台进程解析的任何数据的字符串。为了做到这一点，我将数组设为静态，并尝试在另一个类中读取它，但我的程序失败并出现以下错误。任何人都可以看看并帮助我。谢谢。

```
01-17 09:43:07.927: E/AndroidRuntime(1167): FATAL EXCEPTION: main
01-17 09:43:07.927: E/AndroidRuntime(1167): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.pro1/com.example.pro1.Secactivity}: java.lang.NullPointerException
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.os.Looper.loop(Looper.java:137)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at java.lang.reflect.Method.invokeNative(Native Method)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at java.lang.reflect.Method.invoke(Method.java:511)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at dalvik.system.NativeStart.main(Native Method)
01-17 09:43:07.927: E/AndroidRuntime(1167): Caused by: java.lang.NullPointerException
01-17 09:43:07.927: E/AndroidRuntime(1167):     at com.example.pro1.Secactivity.onCreate(Secactivity.java:29)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.Activity.performCreate(Activity.java:5104)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-17 09:43:07.927: E/AndroidRuntime(1167):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-17 09:43:07.927: E/AndroidRuntime(1167):     ... 11 more 
```

这是我执行异步任务的主要课程：

```
public class MainActivity extends Activity {
    EditText uid;
    EditText password;
    Button submit;
    static String Sarray1[] = new String[50];
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        submit = (Button)findViewById(R.id.submit);
        submit.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                uid = (EditText)findViewById(R.id.id);
                password = (EditText)findViewById(R.id.password);
                String userid = uid.getText().toString();
                String pwd = password.getText().toString();
                Loginauth log = new Loginauth();
                if(!userid.equals("")&&!pwd.equals(""))
                {
                    String result = log.Login(userid,pwd);
                    if(result.equals(""))
                    {
                        Toast toast = Toast.makeText(getApplicationContext(), "Login Error: Check id and Password", Toast.LENGTH_LONG);
                        toast.show();
                    }
                    else
                    {
                        Toast toast = Toast.makeText(getApplicationContext(), "Login Successfull", Toast.LENGTH_SHORT);
                        toast.show();
                        SAXParserActivity ab = new SAXParserActivity();
                        ab.execute();
                        for (int j = 0; j<15;j++)
                    {
                        Log.d("Array",Sarray1[j].toString());
                    }
                        startActivity(new Intent("com.example.pro1.ABC"));
                    }

                }
                else
                {
                    Toast toast = Toast.makeText(getApplicationContext(), "Invalid id or password", Toast.LENGTH_LONG);
                    toast.show();
                }

            }
        });

    }
    class SAXParserActivity extends AsyncTask<Void,Void,Void> {

        XMLGettersSetters data;
        @Override
        protected Void doInBackground(Void... params) {
            Log.i("Abe","Abe");
            try {
                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();
                URL url = new URL("http://www.xmlfiles.com/examples/cd_catalog.xml"); // URL of the XML             
                XMLHandler myXMLHandler = new XMLHandler();
                xmlR.setContentHandler(myXMLHandler);
                xmlR.parse(new InputSource(url.openStream()));

            } catch (Exception e) {
                System.out.println(e);
            }

            data = XMLHandler.data;                 
            for (int i = 0; i < data.getTitle().size(); i++) {

                Sarray1[i] =data.getTitle().get(i);
                //System.out.printf("Sarray",Sarray[i].toString());
                //Log.d("Abe",Sarray);
                //Sarray1[i]=Sarray;

                Log.d("Abe",Sarray1[i].toString());
            }

            return null;
        }
    }

} 
```

这是我尝试访问数组的类：

```
package com.example.pro1;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.widget.TabHost;

public class Secactivity extends FragmentActivity {
    TabHost tHost;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main1);

    tHost = (TabHost) findViewById(android.R.id.tabhost);
    tHost.setup();
    String array[] = new String[50];
    for(int i = 0;i<MainActivity.Sarray1.length;i++)
    {
        array[i] = MainActivity.Sarray1[i];
        Log.d("Secactivity",MainActivity.Sarray1[i]);
    }

    /** Defining Tab Change Listener event. This is invoked when tab is changed */
    TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {
                android.support.v4.app.FragmentManager fm =   getSupportFragmentManager();
                Protab1 androidFragment = (Protab1) fm.findFragmentByTag("ST");
                Protab2 appleFragment = (Protab2) fm.findFragmentByTag("CSI");
                android.support.v4.app.FragmentTransaction ft = fm.beginTransaction();

                /** Detaches the androidfragment if exists */
                if(androidFragment!=null)
                    ft.detach(androidFragment);

                /** Detaches the applefragment if exists */
                if(appleFragment!=null)
                    ft.detach(appleFragment);

                /** If current tab is android */
                if(tabId.equalsIgnoreCase("ST")){

                    if(androidFragment==null){      
                        /** Create AndroidFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new Protab1(), "ST");                        
                    }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(androidFragment);                     
                    }

                }else{  /** If current tab is apple */
                    if(appleFragment==null){
                        /** Create AppleFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new Protab2(), "CSI");                       
                    }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(appleFragment);                       
                    }
                }
                ft.commit();                
            }
        };

        /** Setting tabchangelistener for the tab */
        tHost.setOnTabChangedListener(tabChangeListener);

        /** Defining tab builder for Andriod tab */
    TabHost.TabSpec tSpecAndroid = tHost.newTabSpec("ST");
    tSpecAndroid.setIndicator("ST");        
    tSpecAndroid.setContent(new DummyTabContent(getBaseContext()));
    tHost.addTab(tSpecAndroid);

    /** Defining tab builder for Apple tab */
    TabHost.TabSpec tSpecApple = tHost.newTabSpec("CSI");
    tSpecApple.setIndicator("CSI");        
    tSpecApple.setContent(new DummyTabContent(getBaseContext()));
    tHost.addTab(tSpecApple);

}   

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:12:28.170

不要使用`Array`这样的固定尺寸，

```
static String Sarray1[] = new String[50]; 
```

将其更改为`ArrayList`,

```
ArrayList<String> Sarray1 = new ArrayList<String>(); 
```

然后再`add data`进一步使用，

```
Sarray1.add(data.getTitle().get(i)); 
```

在您的情况下，如果您使用 then 循环，即使只有 10 个数据条目`MainActivity.Sarray1.length`，它也将始终运行**50 次。****所以剩余索引**`null values`的获取有变化。

# android - Android跳过堆栈中的一些意图

> ID：14376422
> 
> 赞同：0
> 
> 时间：2013-01-17T09:59:03.750
> 
> 标签：android, android-intent, stack

我已经阅读了这篇文章，但它不会解决我的问题。[按下后跳回直接父活动](https://stackoverflow.com/questions/10202903/skip-going-back-to-direct-parent-activity-when-pressed-back)

假设我有一个从 A 到 Z 的意图列表，其中 A 是根。在任何这些意图中，我都想提供一个“返回 A”功能，并且应该保留正常的“返回上一个”。那么我该如何实现“返回A”功能呢？

因为 A 做了很多互联网操作并且有点慢，我不想再次新建 A，最好的方法是进入堆栈并跳过其间的意图并直接显示 A。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:02:50.073

使用下面的代码来调用堆栈中的 A。

```
Intent backToAIntent = new Intent(YourCurrentactivity.this,A.class);
backToAIntent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(backToAIntent); 
```

此[参考](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)将为您提供有关您的要求的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:03:09.430

开始一个带有特殊标志的活动：

> FLAG_ACTIVITY_CLEAR_TOP
> 
> 如果正在启动的 Activity 已经在当前任务中运行，那么不会启动该 Activity 的新实例，而是将其之上的所有其他 Activity 销毁，并将此 Intent 传递给该 Activity 的恢复实例（现在顶部），通过 onNewIntent())

# visual-studio-2010 - Visual Studio MSWord 插件

> ID：14376427
> 
> 赞同：0
> 
> 时间：2013-01-17T09:59:14.647
> 
> 标签：visual-studio-2010, ms-word

我正在为 MS Word 创建一个插件来监视复制/粘贴事件。由于我们有 Wordsavehandler 来监控保存事件，我没有找到任何事件处理程序来监控复制/粘贴或剪切/粘贴。任何人都可以建议使用事件处理程序吗？请帮我解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:26:50.663

基于[MSDN](http://msdn.microsoft.com/fr-fr/library/microsoft.office.tools.word.document_members%28v=VS.80%29.aspx)，我认为 XMLAfterInsert 和 XMLBeforeDelete 事件是您正在寻找的。

# android - android中的XML布局

> ID：14376429
> 
> 赞同：0
> 
> 时间：2013-01-17T09:59:24.433
> 
> 标签：android, xml, android-layout

他大家，

我想创建一个有 4 个面板的屏幕，一个接一个地垂直。第一个包含通知图标栏，第二个面板有列表（占据屏幕的一半），第三个包含另一个通知栏，然后第四个填充屏幕的其余部分。

我希望通知栏的高度应为 10dip，其余 2 个面板应以相同的方式覆盖设备中的剩余空间。

我尝试将 Dip 用于第一个三个面板，并将 fill_parent 用于最后一个面板。它在所有设备中看起来都不是很好。如何使用 XML 代码实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:18:28.173

您应该从布局中发布您的 xml 代码，以便我们可以查看是否有任何可以修复的小错误。

从我可以从您的问题中得到的信息，您正在使用 fill_parent 作为其余两个面板的高度？如果是这样的话，这可能是问题所在。您可以使用重力和重量属性使屏幕适合。例如，您可以放置​​的顶部屏幕：

```
android:layout_weight="1" 
```

第二个：

```
android:layout_gravity="bottom" 
```

# gwt - GWT 示例 MVP 应用程序

> ID：14376431
> 
> 赞同：0
> 
> 时间：2013-01-17T09:59:42.823
> 
> 标签：gwt, mvp

我一直在看本教程 [https://developers.google.com/web-toolkit/articles/mvp-architecture](https://developers.google.com/web-toolkit/articles/mvp-architecture) 我想知道的是，这种 MVP 风格每次用户更改页面时效率如何，并且创建 Presenter 的新实例。如果主持人是单身人士会更好吗？我的最终目标是使用 PhoneGap 部署一个应用程序，这样任何性能提升都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:25:24.987

这完全取决于您的实施。

如果您希望将状态保存在您的视图中，您可以使用单例演示者/视图。

它更有效，因为您不需要重新初始化视图，但如果另一个视图上的某些事务进行了需要更改第一个视图的更改，则效率会降低。在这种情况下，您需要在第二个演示者中引发一个事件，该事件被第一个演示者捕获并相应地修改视图。这使应用程序的可预测性降低了一些。

因此，如果每个演示者/视图都是独立的，则需要做一个单独的视图/演示者。

在任何其他情况下，我都会使用新的演示者/视图来重新初始化视图使用的表单中的数据。

请记住，虽然每个使用应用程序范围变量（例如事件总线）的新演示者都不会被破坏（垃圾收集），这将导致以下问题：

每当您加载视图并引发在相应演示者中捕获的事件时，该事件和所有计算都将发生与生成新演示者/视图一样多的次数。

示例： -Presenter1/View1 已加载并捕获某些事件 -Presenter2/View2 已加载 -Presenter1（新实例）/View1（新实例）已加载并捕获某些事件。-事件通过全局事件总线引发 -Presenter1 捕获事件 -Presenter1（新实例）捕获事件

因此，本质上（这不是规则），新的演示者为 GWT 应用程序提供了一个具有完整回发感觉的网页，而在另一种情况下，您拥有加载现有表单的桌面应用程序感觉。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T01:52:23.430

不要使用单例...糟糕！

如果您懒惰地初始化演示者并保存它们的引用以供重用，则不必每次都创建一个新实例。

看一下我从[https://developers.google.com/web-toolkit/articles/mvp-architecture-2#code_splitting](https://developers.google.com/web-toolkit/articles/mvp-architecture-2#code_splitting)获取和修改的以下示例，以突出显示如何重用演示者，类似于重用视图的方式.

```
 public void onValueChange(ValueChangeEvent<String> event) {
    String token = event.getValue();

    if (token != null) {
      if (token.equals("list")) {
        GWT.runAsync(new RunAsyncCallback() {
          ...
          public void onSuccess() {
            // lazily initialize our views and presenters, and keep them around to be reused
            if (contactsView == null) {
              contactsView = new ContactsViewImpl<ContactDetails>();
            }
            if (contactsPresenter == null) {
              contactsPresenter = new ContactsPresenter(rpcService, eventBus, contactsView);
            }
            contactsPresenter.go(container);
          }
        });
      }
      ...
   } 
```

除了通过 RunAsyncCallback 进行代码拆分的性能优势之外，本质上，您可以将每个 Presenter 引用为 AppController 类字段，并在切换历史令牌时重用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T12:51:22.817

我建议您使用[gwt-platform](http://code.google.com/p/gwt-platform/)。我在几个项目中使用它并且从未遇到任何性能问题。它非常强大，可以帮助您构建应用程序，以便将来更轻松地扩展它，同时保持良好的性能。

# java - 用于soap web servcie客户端的工具，可以获取凭据并提供输入

> ID：14376433
> 
> 赞同：0
> 
> 时间：2013-01-17T09:59:48.017
> 
> 标签：java, web-services, soap, soap-client

我编写了一个对其进行身份验证的 Web 服务。它需要用户名和密码。它是基于肥皂的。它需要字符串输入。

任何人都可以推荐满足上述要求的肥皂客户端。

我尝试在 Eclipse 中使用默认的 Web 服务启动器，但它似乎不需要凭据。

即使是eclipse的插件也可以

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:02:07.053

使用[SOAPUI](http://www.soapui.org/)

它是测试各种 Web 服务的绝佳工具

*SoapUI 提供完整的测试覆盖——从基于 SOAP 和 REST 的 Web 服务，到 JMS 企业消息传递层、数据库、富 Internet 应用程序等等。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:03:25.030

如果您指的是 SOAP 的测试客户端，我会立即想到[SOAP UI](http://www.soapui.org/)。

如果您的意思是编写自己的客户端以在代码中使用，我会找到一个教程来向您展示如何传递凭据。或者试试 Spring Web 服务——它有一个非常好的 SOAP 客户端。

# jquery - li 作为选项卡，组合悬停（或 mouseenter 和 mouseleave）并单击

> ID：14376435
> 
> 赞同：1
> 
> 时间：2013-01-17T09:59:48.367
> 
> 标签：jquery

我对标签有问题（使用`li`）。我不知道如何解决这种情况：通过单击选项卡（选项卡链接）不显示选项卡内容，但如果我再次悬停选项卡以显示选项卡内容。（只是第一次点击不显示标签内容）

提前致谢！

HTML：

```
<div id="tabs">
        <ul id="tabstest">
        <li id="first_tab" style="width:200px; height:40px;"><a href="#tab1" class="active tab_link" onclick="window.location.href = '\auto.php';"><strong>Auto</strong></a></li>
        <li style="width:180px; height:40px; line-height: 12px;"><a href="#tab2" class="tab_link" onclick="window.location.href = '\automk.php';"><strong><br>Automk</strong></a></li>
        <li style="width:120px; height:40px;"><a href="#tab3" class="tab_link" onclick="window.location.href = '\info.php';"><strong>Info</strong></a></li>
        <li style="width:180px; height:40px; line-height: 12px;"><a href="#tab4" class="tab_link" onclick="window.location.href = '\tteleko.php';"><strong><br>Teleko</strong></a></li>
        <li style="width:120px; height:40px; line-height: 12px;"><a href="#tab5" class="tab_link" onclick="window.location.href = '\pamet.php';"><strong><br>Pamet</strong></a></li>
        <li id="last_tab" style="width:100px; height:40px; line-height: 12px;"><a href="#tab6" class="tab_link" onclick="window.location.href = '\rracun.php';"s><strong><br>Računari</strong></a></li>
    </ul>
    </div>
    <div id="tabcontents" >
        <div id="tab1" class="tabcontent">
        <img src="/images/baner22.jpg" width="200" height="150" alt="Slideshow Image 2" title="Slideshow Image 2" style="float:left; margin:5px 5px 5px 5px;"/>
        <p style="margin:5px 5px 5px 5px;">tab1 content</p>
        </div>
        <div id="tab2" class="tabcontent">
        <p>tab2 content</p>
        </div>
        <div id="tab3" class="tabcontent" >
        <p>tab3 content</p>
        </div>
        <div id="tab4" class="tabcontent">
        <img src="images/baner22.jpg" width="947" alt="Slideshow Image 2" title="Slideshow Image 2" />
        </div>
        <div id="tab5" class="tabcontent">
        <img src="/images/baner32.jpg" width="947" alt="Slideshow Image 2" title="Slideshow Image 2" />
        </div>
        <div id="tab6" class="tabcontent">
        <img src="/images/banner35.jpg" width="947" alt="Slideshow Image 2" title="Slideshow Image 2" />
        </div>
    </div> 
```

查询：

```
 $("#tabstest li").click(function() { 

          ????

});

 $("#tabstest li").hover(function () {

$("#tabstest li").removeClass('active');

    $(this).addClass("active");

  var selected_tab = $(this).find("a").attr("href");

    $(selected_tab).fadeIn();

          }, function () {

$("#tabstest li").removeClass('active');

  var selected_tab = $(this).find("a").attr("href");

    $(selected_tab).hide();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:25:31.250

你可以做这样的事情。第一次点击它不会做任何事情。但第一次点击后，它会显示数据。

```
var clickCount = 0;
$("#tabstest li").click(function() { 
     if (clickCount > 1) {
        $(this).addClass("active");
        var selected_tab = $(this).find("a").attr("href");
        $(selected_tab).fadeIn();
     }
     clickCount++;
});

 $("#tabstest li").hover(function () {

$("#tabstest li").removeClass('active');

    $(this).addClass("active");

  var selected_tab = $(this).find("a").attr("href");

    $(selected_tab).fadeIn();

          }, function () {

$("#tabstest li").removeClass('active');

  var selected_tab = $(this).find("a").attr("href");

    $(selected_tab).hide();
}); 
```

# javascript - 每次加载页面时拉出随机图像

> ID：14376442
> 
> 赞同：2
> 
> 时间：2013-01-17T10:00:18.967
> 
> 标签：javascript, jquery, html

在每个页面加载时，我都在更改图像。我发现这个插件做得很好。

```
(function($){

    $.randomImage = {
        defaults: {

            //you can change these defaults to your own preferences.
            path: '/templates/default/images/', //change this to the path of your images
            myImages: ['fab_ad1.jpg', 'fab_ad2.jpg', 'fab_ad3.jpg'] //put image names in this bracket. ex: 'harold.jpg', 'maude.jpg', 'etc'

        }           
    }

    $.fn.extend({
            randomImage:function(config) {

                var config = $.extend({}, $.randomImage.defaults, config); 

                 return this.each(function() {

                        var imageNames = config.myImages;

                        //get size of array, randomize a number from this
                        // use this number as the array index

                        var imageNamesSize = imageNames.length;

                        var lotteryNumber = Math.floor(Math.random()*imageNamesSize);

                        var winnerImage = imageNames[lotteryNumber];

                        var fullPath = config.path + winnerImage;

                        //put this image into DOM at class of randomImage
                        // alt tag will be image filename.
                        $(this).attr( {
                                        src: fullPath,
                                        alt: winnerImage
                                    });

                }); 
            }

    });

})(jQuery); 
```

HTML：

```
<img class="shuffle" src="" alt="" onclick="chooseLink()"> 
```

调用这个函数：

```
$('.shuffle').randomImage(); 
```

使用此功能，我在我的页面中显示广告。我对每个广告图片都有单独的链接。当单击图像时，我正在调用一个`javascript`函数，并且我需要识别图像名称，并且我将重定向到单独的链接。就我而言，我不知道如何识别被点击的图像名称。请建议我如何识别被点击的图像名称。
希望我的问题很清楚。提前致谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:04:17.107

改变

```
<img class="shuffle" src="" alt="" onclick="chooseLink()"> 
```

到

```
<img class="shuffle" src=""> 
```

并将其添加到您的脚本中：

```
$('.shuffle').click(function(){
    var imageId = this.src.split('/').pop(); // this is the name of your image file
                                             // It identifies the image
    // use the image 
    chooseLink(imageId);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:15:15.920

你可以稍微修改你的图像html：

```
<img class="shuffle" src="" alt=""> 
```

然后添加这个

```
$('.shuffle').randomImage().click(function(){
    var imgsrc = $('.shuffle').attr('src');
    var imgname = imgsrc.substr(imgsrc.lastIndexOf('/')+1);
    chooseLink(imgname);
}); 
```

# android - 如何在andengine中移动精灵

> ID：14376443
> 
> 赞同：0
> 
> 时间：2013-01-17T10:00:21.633
> 
> 标签：android, android-emulator

嗨，我在这里做一个应用程序使用和引擎，当我单击按钮时，我需要移动两个精灵精灵移动正常，但是我的要求现在两个精灵在单击按钮时两个精灵都在相反的方向上，两个精灵都想要移动，然后当两个精灵都移动时居中屏幕有大约 100 距离我想停止动画。我尝试使用下面的代码，但它计算起始精灵位置，而移动时间它不计算精灵位置你可以帮助我....

```
 final float centerX = (CAMERA_WIDTH - this.mPaddleTextureRegionbtn.getWidth());
    final float centerY = (CAMERA_HEIGHT -  this.mPaddleTextureRegionbtn.getHeight()) / 2;
    paddle = new Sprite(centerX, centerY, this.mPaddleTextureRegionbtn, this.getVertexBufferObjectManager());
    final PhysicsHandler physicsHandler = new PhysicsHandler(paddle);
    paddle.registerUpdateHandler(physicsHandler);
 scene.attachChild(paddle);

 final AnimatedSprite banana = new AnimatedSprite(0, centerY,  this.mBananaTextureRegion, this.getVertexBufferObjectManager());
    banana.animate(100);
    scene.attachChild(banana);

  final float centerX1 = (CAMERA_WIDTH - this.mPaddleTextureRegion1.getWidth()) / 38;
        final float centerY1 = (CAMERA_HEIGHT - this.mPaddleTextureRegion1.getHeight()) /7;

     ButtonSprite moveRightButton = new ButtonSprite(centerX1, centerY1, this.mPaddleTextureRegion1, this.getVertexBufferObjectManager(), new OnClickListener() {

         @Override
         public void onClick(ButtonSprite pButtonSprite, float pTouchAreaLocalX,
                         float pTouchAreaLocalY) {      
             runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    Toast.makeText(Pong.this, "Haiii-------------", Toast.LENGTH_LONG).show();

                     MoveXModifier mod = new MoveXModifier(2, banana.getX(), paddle.getX()-100);
                    banana.registerEntityModifier(mod);

                     MoveXModifier mod1 = new MoveXModifier(2, paddle.getX(),banana.getX()+100);

                    paddle.registerEntityModifier(mod1);

                }
            });
         }
 });

     scene.attachChild(moveRightButton);
     scene.registerTouchArea(moveRightButton);
     scene.setTouchAreaBindingOnActionDownEnabled(true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:56:25.200

试试这个，它可能会帮助你。

MoveXModifier mod = new MoveXModifier(2,banana.getX(), paddle.getX()-100,new IEntityModifierListener() {

```
 @Override
        public void onModifierStarted(IModifier<IEntity> pModifier, IEntity pItem) 
        {

        }

        @Override
        public void onModifierFinished(IModifier<IEntity> pModifier, IEntity pItem) {

            banana.stopAnimation();
        }
    });
                banana.registerEntityModifier(mod); 
```

你可以为下一个做同样的事情。

希望这是你问题的答案，我能理解。

# android - 如何使用json从android客户端获取byte []到servlet

> ID：14376447
> 
> 赞同：1
> 
> 时间：2013-01-17T10:00:40.837
> 
> 标签：android, json, servlets

这是我的客户端代码，我在 json 对象中创建了 json 对象，我已经放置了 byte[] 和两个字符串，我刚刚将位图转换为 byte[]，并且我已经在 servlet 上接收到它，我使用 httppost 我试图发送那个 json data.how 我如何接收字节 [] 和两个字符串，然后我必须在浏览器和两个字符串上显示它。

```
public void getServerData(byte[] img, String name, String gender)throws JSONException, ClientProtocolException, IOException {

        ArrayList<String> stringData = new ArrayList<String>();
        DefaultHttpClient httpClient = new DefaultHttpClient();
        ResponseHandler<String> resonseHandler = new BasicResponseHandler();
        HttpPost postMethod = new HttpPost(SERVER_URL);
        postMethod.setHeader("Content-Type", "application/json");
        JSONObject json = new JSONObject("mydata");
        json.put("image", img);
        json.put("name", name);
        json.put("gender", gender);
        postMethod.setEntity(new ByteArrayEntity(json.toString().getBytes(
                "UTF8")));
        String response = httpClient.execute(postMethod, resonseHandler);
        Log.e("response :", response);
    } 
```

我`int doGet(request,response){}`必须收到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:04:18.600

```
JSONObject.put 
```

没有接受字节数组的重载，尝试将这些字节编码为 base64 字符串？

请参阅[https://stackoverflow.com/questions/9845767/base64-encoder-java](https://stackoverflow.com/questions/9845767/base64-encoder-java)

# objective-c - 如何使用 NSArrayController 对 NSTableView 中的行重新排序

> ID：14376452
> 
> 赞同：1
> 
> 时间：2013-01-17T10:00:45.440
> 
> 标签：objective-c, cocoa, binding, nstableview, nsarraycontroller

我已经得到`NSArrayController`了`NSTableView`来自 array 的对象数据`_files`。问题是我想通过拖动重新排序行。我怎样才能做到这一点`NSArrayController`？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:06:14.130

[您可以在Red Sweater Blog](http://www.red-sweater.com/blog/274/a-moveable-beast)中找到这篇文章的使用。

在其中，作者将 NSArrayController 子类化，以便在面向绑定的应用程序中提供此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:33:05.500

我不认为 ArrayController 给你这个功能。

您必须通过代码手动实现所有必需的方法，并通过创建相同 arrayController 的对象来更新数据源。

现在 Binding 仍处于增长阶段，每年我们都会看到一些新功能的添加，我希望在不久的将来 Cocoa Binding 会随着所有这些功能变得更强大。

# c# - Azure 存储容器大小

> ID：14376459
> 
> 赞同：14
> 
> 时间：2013-01-17T10:01:10.273
> 
> 标签：c#, azure, azure-storage

如何在 Azure 存储中获取容器的大小？我通过 C# API 访问 Azure 存储：

```
var account = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["AzureStoragePrimary"]);
var client = account.CreateCloudBlobClient();
var container = client.GetContainerReference("myContainer"); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-09T16:16:09.370

一种*可能*更完整的方法。关键区别在于 listblobs() 调用中的第二个参数，它强制执行平面列表：

```
public class StorageReport
{
    public int FileCount { get; set; }
    public int DirectoryCount { get; set; }
    public long TotalBytes { get; set; }
}

//embdeded in some method
StorageReport report = new StorageReport() { 
    FileCount = 0,
    DirectoryCount = 0,
    TotalBytes = 0
};

foreach (IListBlobItem blobItem in container.ListBlobs(null, true, BlobListingDetails.None))
{
    if (blobItem is CloudBlockBlob)
    {
        CloudBlockBlob blob = blobItem as CloudBlockBlob;
        report.FileCount++;
        report.TotalBytes += blob.Properties.Length;
    }
    else if (blobItem is CloudPageBlob)
    {
        CloudPageBlob pageBlob = blobItem as CloudPageBlob;

        report.FileCount++;
        report.TotalBytes += pageBlob.Properties.Length;
    }
    else if (blobItem is CloudBlobDirectory)
    {
        CloudBlobDirectory directory = blobItem as CloudBlobDirectory;

        report.DirectoryCount++;
    }                        
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T10:22:04.137

```
CloudStorageAccount cloudStorageAccount = CloudStorageAccount.Parse(ConfigurationManager.AppSettings["AzureStoragePrimary"]);
CloudBlobClient blobClient = account.CreateCloudBlobClient();
CloudBlobContainer blobContainer = blobClient.GetContainerReference("myContainer");
int fileSize = 0;
foreach (var blobItem in blobContainer.ListBlobs())
{
    fileSize += blobItem.Properties.Length;
} 
```

`fileSize`包含容器的大小，即包含的 blob（文件）的总大小。

参考：CloudBlob：http: [//msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblob_methods.aspx](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.storageclient.cloudblob_methods.aspx)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T22:04:38.060

我已将*Microsoft.WindowsAzure.StorageClient.dll* 1.1.0.0 从 Windows Azure SDK 更新为来自*Windows Azure Storage* NuGet 包的*Microsoft.WindowsAzure.Storage.dll* 2.0.0.0 ，它现在可以工作了。

 *```
long size = 0;
var list = container.ListBlobs();
foreach (CloudBlockBlob blob in list) {
    size += blob.Properties.Length;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-30T07:59:53.717

针对 .NET Core 2，**ListBlobs**方法不可用，因为您只能访问异步方法。

**因此，您可以使用ListBlobsSegmentedAsync**方法获取 Azure 存储容器大小

```
BlobContinuationToken continuationToken = null;
long totalBytes = 0;
do
{
    var response = await container.ListBlobsSegmentedAsync(continuationToken);
    continuationToken = response.ContinuationToken;
    totalBytes += response.Results.OfType<CloudBlockBlob>().Sum(s => s.Properties.Length);
} while (continuationToken != null); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-11-02T02:54:02.017

在`Azure.Storage.Blobs`版本中`12.6.0`，可以通过以下方式完成：

```
static void Main(string[] args)
{

    BlobServiceClient client = new BlobServiceClient(connectionString);

    GetContainersSize(client, connectionString, null, null).Wait();
}

//-------------------------------------------------
// List containers
//-------------------------------------------------
async static Task<ConcurrentDictionary<string, long>> GetContainersSize(BlobServiceClient blobServiceClient,
                                string connectionString,
                                string prefix,
                                int? segmentSize)
{
    string continuationToken = string.Empty;
    var sizes = new ConcurrentDictionary<string, long>();
    try
    {

        do
        {
            // Call the listing operation and enumerate the result segment.
            // When the continuation token is empty, the last segment has been returned
            // and execution can exit the loop.
            var resultSegment =
                blobServiceClient.GetBlobContainersAsync(BlobContainerTraits.Metadata, prefix, default)
                .AsPages(continuationToken, segmentSize);
            await foreach (Azure.Page<BlobContainerItem> containerPage in resultSegment)
            {

                foreach (BlobContainerItem containerItem in containerPage.Values)
                {
                    BlobContainerClient container = new BlobContainerClient(connectionString, containerItem.Name);

                    var blobs = container.GetBlobsAsync().AsPages(continuationToken);

                    await foreach(var blobPage in blobs)
                    {
                        var blobPageSize = blobPage.Values.Sum(b => b.Properties.ContentLength.GetValueOrDefault());
                        sizes.AddOrUpdate(containerItem.Name, blobPageSize, (key, currentSize) => currentSize + blobPageSize);
                    }
                }

                // Get the continuation token and loop until it is empty.
                continuationToken = containerPage.ContinuationToken;
            }

        } while (continuationToken != string.Empty);

        return sizes;
    }
    catch (RequestFailedException e)
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
} 
```*

# c# - 模拟存储库，linq 到实体函数，sqlfunctions

> ID：14376466
> 
> 赞同：0
> 
> 时间：2013-01-17T10:01:24.673
> 
> 标签：c#, linq-to-entities, mocking

我的函数中有以下代码来从数据库中检索数据：

```
var oldFareSpecification = new ObservationOnOrBeforeDateSpecification(previousOutboundDate));

var oldFare = _fareRepository.Find(oldFareSpecification).SingleOrDefault(); 
```

规范是：

```
public class ObservationOnOrBeforeDateSpecification : Specification<Fare>
    {
        public ObservationOnOrBeforeDateSpecification(DateTime date)
        : base(fh => EntityFunctions.DiffDays(fh.ObservationTS, date) >= 0)
    {
    }
    } 
```

它使用 System.Data.Entity。
存储库是

```
Repository<TEntity> : IRepository<TEntity>
private readonly DbContext _context;
        private readonly DbSet<TEntity> _entitySet;
public IEnumerable<TEntity> Find(ISpecification<TEntity> criteria)
        {
            return criteria.SatisfyingEntitiesFrom(_entitySet).AsEnumerable();
        } 
```

它工作正常，但是当我尝试在测试类中使用 Moq 存储库并调用存储库返回对我的假对象的查询结果时，我得到一个异常：函数只能从 LINQ 调用到实体（或非常相似 - 我明白了用其他语言：p）。

我的测试类使数据库以这种方式返回假结果：

```
var faresRepository = Fixture.Freeze<Mock<IRepository<DAL.Fare>>>();
faresRepository.Setup(
                fhr => fhr.Find(It.IsAny<ISpecification<Fare>>())).Returns(
                (ISpecification<Fare> spec) => spec.SatisfyingEntitiesFrom(fares.AsQueryable())); 
```

现在我的问题是如何编写代码规范来比较天数的差异，并且可以正常从代码和 Mocked 存储库中调用。通过正确比较，我的意思是，2013.01.16 23:55:34 和 2013.01.17 01:55:34 天数之间的差异返回 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T10:44:19.483

解决方案：

** 唯一的方法是创建一个队列，该队列在每次调用特定方法（此处为 .Find）时返回假结果。不完全是我想要实现的目标，但至少有效。所以这里是：

```
 var faresHistoryRepository = Fixture.Freeze<Mock<IRepository<DAL.FareHistory>>>();

    var fareHistoryResults = new Queue<List<FareHistory>>();

    var fareHistories = new List<DAL.FareHistory>();
    FareHistory fh1 = new FareHistory { FareHistoryId = fareHistoryId + 1, FareId = fareId, ObservationTS = date.AddDays(-1), StatusId = (int)DAL.Enum.Status.Active };
    fareHistories.Add(fh1);
    fh1 = new FareHistory { FareHistoryId = fareHistoryId + 4, FareId = fareId, ObservationTS = date.AddDays(-4), StatusId = (int)DAL.Enum.Status.Active };
    fareHistories.Add(fh1);
    fh1 = new FareHistory { FareHistoryId = fareHistoryId + 5, FareId = fareId, ObservationTS = date.AddDays(-5), StatusId = (int)DAL.Enum.Status.Active };
    fareHistories.Add(fh1);
    fareHistoryResults.Enqueue(fareHistories); // fare histories

    var fareHistoriesSample = new List<DAL.FareHistory>();
    fh1 = new FareHistory { FareHistoryId = fareHistoryId + 6, FareId = oldFareId,
 ObservationTS = depDate.AddDays(-fullDaysDifference), StatusId = (int)DAL.Enum.Status.Active };
    fareHistoriesSample.Add(fh1);
        fh1 = new FareHistory { FareHistoryId = fareHistoryId + 7, FareId = oldFareId,
     ObservationTS = depDate.AddDays(-15), StatusId = (int)DAL.Enum.Status.Active };
        fareHistoriesSample.Add(fh1);
        fh1 = new FareHistory { FareHistoryId = fareHistoryId + 8, FareId = oldFareId,
     ObservationTS = depDate.AddDays(-16), StatusId = (int)DAL.Enum.Status.Active };
                    fareHistoriesSample.Add(fh1);

        fareHistoryResults.Enqueue(fareHistoriesSample); // fareHistoriesSample

        faresHistoryRepository.Setup(
                            fhr => fhr.Find(It.IsAny<ISpecification<FareHistory>>
    ())).Returns(()=>fareHistoryResults.Dequeue()); 
```

# c# - 如何在 asp.net 应用程序中包含日历

> ID：14376467
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:01:25.760
> 
> 标签：c#, asp.net, calendar

我需要在我的 asp.net 应用程序中包含一个日历。有没有内置的方法？我会很感激一些代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:06:26.440

Visual Studio的工具箱里已经有一个日历控件了。查看如何自定义它： http: [//www.codeproject.com/Articles/229445/Customizing-the-ASP-NET-Calendar-Control](http://www.codeproject.com/Articles/229445/Customizing-the-ASP-NET-Calendar-Control)

如果您需要其他日历，这里有一些：

Telerik：[http ://www.telerik.com/products/aspnet-ajax/calendar.aspx](http://www.telerik.com/products/aspnet-ajax/calendar.aspx)

Ajax 日历：[http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:02:46.900

[**你可以使用 asp.net ajax 工具包，你可以在这里**](http://www.asp.net/ajaxlibrary/act_Calendar.ashx)找到它。[**您可以在此处查看**](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)ajax 控制套件日历的现场演示。

```
<ajaxToolkit:Calendar runat="server"
    TargetControlID="Date1"
    CssClass="ClassName"
    Format="MMMM d, yyyy"
    PopupButtonID="Image1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:03:45.583

Ajax 控件工具包有日历。

> Calendar 是一个 ASP.NET AJAX 扩展器，可以附加到任何 ASP.NET TextBox 控件。它在弹出控件中提供了具有可自定义日期格式和 UI 的客户端日期选择功能。

从[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx 查看](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)

```
<ajaxToolkit:Calendar runat="server"
    TargetControlID="Date1"
    CssClass="ClassName"
    Format="MMMM d, yyyy"
    PopupButtonID="Image1" /> 
```

# multithreading - 如何在我的应用程序中生成 IPython qtconsole，同时将现有对象传递到该控制台

> ID：14376469
> 
> 赞同：4
> 
> 时间：2013-01-17T10:01:40.313
> 
> 标签：multithreading, multiprocessing, ipython, qtconsole

我试图在我的应用程序中嵌入一个 IPython qtconsole，就像我可以嵌入一个 IPython 文本控制台一样，因此：

```
from IPython.frontend.terminal.embed import InteractiveShellEmbed
myobj={'jason':10}
shell = InteractiveShellEmbed()
shell.user_ns = myobj
shell() 
```

我可以通过使用在我的应用程序中启动 QT 控制台

```
from IPython.frontend.qt.console.qtconsoleapp import IPythonQtConsoleApp
app = IPythonQtConsoleApp()
app.initialize()
app.start() 
```

**但这无法访问现有对象。**

我可以在我的应用程序中启动一个可以访问现有对象的内核，使用：

```
import IPython
myobj={'jason':10}
IPython.embed_kernel(local_ns=myobj)
#No more code executes 
```

然后使用连接到它

```
ipython qtconsole --existing 
```

或者，在另一个 python 脚本中：

```
from IPython.lib.kernel import find_connection_file
from IPython.frontend.qt.console.qtconsoleapp import IPythonQtConsoleApp

cf=find_connection_file("*")
app = IPythonQtConsoleApp(existing=cf[-1])
app.initialize()
app.start() 
```

但这些不是单一的解决方案，都需要另一个外壳。内核在不产生的线程中运行，因此在内核存在之前不会执行更多代码。

所以，我的问题是，我怎样才能在一个脚本中实现上述目标？

我尝试过使用线程和多处理，但是由于**embed_kernel()**永远不会返回并且显然必须在**IPythonQTConsoleApp()**之前运行，否则连接文件将丢失，我不知道如何管理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T13:07:29.147

要在不阻塞的情况下嵌入内核，请查看 IPython 存储库中的[此示例](https://github.com/ipython/ipython/blob/master/examples/Embedding/ipkernel_qtapp.py)。IPython 知道一些将自身与 Qt 事件循环集成的巧妙技巧，因此您可以同时运行控制台和应用程序。对于诸如交互式调试之类的事情，这是要走的路。

如果您需要将控制台嵌入到您自己的应用程序中，我们[刚刚合并](https://github.com/ipython/ipython/pull/2724)了一个进程内内核。看看[这个例子](https://github.com/ipython/ipython/blob/master/examples/Embedding/inprocess_qtconsole.py)。在下一个版本之前，您需要使用 IPython 开发版本，但进行一些早期测试会很棒。

# android - 在Android中安排重复任务

> ID：14376470
> 
> 赞同：125
> 
> 时间：2013-01-17T10:01:48.543
> 
> 标签：android, scheduled-tasks

我正在设计一个应用程序，只要该应用程序处于前台，它就具有将存在发送到专用服务器的重复任务。

在我在网上的搜索中，我看到了几种不同的方法，并想知道什么是最好的方法。

**安排服务器调用的最佳方式是什么？**

我看到的选项是：

1.  [定时器](http://developer.android.com/reference/java/util/Timer.html)。

2.  [ScheduledThreadPoolExecutor](http://developer.android.com/reference/java/util/concurrent/ScheduledThreadPoolExecutor.html)。

3.  [服务](http://developer.android.com/reference/android/app/Service.html)。

4.  BroadcastReciever 与[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)。

你怎么看？

**编辑：**
我需要这个的原因是基于聊天的应用程序，它将所有用户操作发送到远程服务器。
即用户正在输入消息，用户正在阅读消息，用户在线，用户离线等。

这意味着每间隔一次，我需要向服务器发送我在做什么，因为我和其他人打开了一个聊天室，他们需要知道我在做什么。

类似于whatsapp消息反馈机制： ![消息看起来已送达](../Images/0a77d3b395dfdf7e680953b152bf3800.png)

**编辑#2：**
现在应该几乎总是通过`JobScheduler`API（或[`FirebaseJobDispatcher`](https://github.com/firebase/firebase-jobdispatcher-android)较低的 API）安排重复任务，以防止电池耗尽问题，如Android 培训的[生命体部分](https://developer.android.com/topic/performance/vitals/wakeup.html)

**编辑#3：**
FirebaseJobDispatcher 已被弃用并被[Workmanager](https://developer.android.com/topic/libraries/architecture/workmanager)取代，它还包含 JobScheduler 的功能。

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2013-01-17T11:17:08.787

我不确定，但据我所知，我分享我的观点。如果我错了，我总是接受最佳答案。

**报警管理器**

只要警报接收器的`onReceive()`方法正在执行，警报管理器就会持有 CPU 唤醒锁。这保证了在您完成广播处理之前手机不会休眠。一旦`onReceive()`返回，警报管理器就会释放这个唤醒锁。这意味着在某些情况下，只要您的`onReceive()`方法完成，手机就会进入睡眠状态。如果您的警报接收器呼叫`Context.startService()`，则手机可能会在请求的服务启动之前进入休眠状态。为防止这种情况发生，您`BroadcastReceiver`将`Service`需要实施单独的唤醒锁定策略，以确保手机继续运行，直到服务可用。

注意：警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。对于正常的计时操作（滴答声、超时等），使用 Handler 更容易、更高效。

**定时器**

```
timer = new Timer();

    timer.scheduleAtFixedRate(new TimerTask() {

        synchronized public void run() {

            \\ here your todo;
            }

        }, TimeUnit.MINUTES.toMillis(1), TimeUnit.MINUTES.toMillis(1)); 
```

`Timer`有一些缺点可以通过`ScheduledThreadPoolExecutor`. 所以这不是最好的选择

**ScheduledThreadPoolExecutor**。

您可以使用`java.util.Timer`或`ScheduledThreadPoolExecutor`（首选）安排在后台线程上定期发生的操作。

这是使用后者的示例：

```
ScheduledExecutorService scheduler =
    Executors.newSingleThreadScheduledExecutor();

scheduler.scheduleAtFixedRate
      (new Runnable() {
         public void run() {
            // call service
         }
      }, 0, 10, TimeUnit.MINUTES); 
```

所以我更喜欢`ScheduledExecutorService`

但是还要考虑一下，如果在您的应用程序运行时会发生更新，您可以使用 a `Timer`，如其他答案中所建议的那样，或者更新的`ScheduledThreadPoolExecutor`. 如果您的应用程序即使在未运行时也会更新，您应该使用`AlarmManager`.

> 警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。

请注意，如果您计划在应用程序关闭时更新，那么每十分钟一次是非常频繁的，因此可能有点太耗电了。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-20T13:11:40.673

## 定时器

如[javadocs](http://developer.android.com/reference/java/util/Timer.html)中所述，您最好使用 ScheduledThreadPoolExecutor。

## ScheduledThreadPoolExecutor

当您的用例需要多个工作线程并且睡眠间隔很小时，请使用此类。多么小 ？好吧，我会说大约15分钟。此时`AlarmManager`开始计划间隔，似乎建议对于较小的睡眠间隔，可以使用此类。我没有数据支持最后的声明。这是一种预感。

## 服务

VM 可以随时关闭您的服务。不要将服务用于重复性任务。一个重复的任务可以*启动*一个服务，这完全是另一回事。

## 带有 AlarmManager 的广播接收器

对于更长的睡眠间隔（>15 分钟），这是要走的路。`AlarmManager`已经有常量 ( `AlarmManager.INTERVAL_DAY`) 表明它可以在最初安排好几天后触发任务。它还可以唤醒 CPU 以运行您的代码。

您应该根据您的时间和工作线程需求使用其中一种解决方案。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-01-09T00:24:47.667

我意识到这是一个古老的问题并且已经得到解答，但这可以帮助某人。在你的`activity`

```
private ScheduledExecutorService scheduleTaskExecutor; 
```

在`onCreate`

```
 scheduleTaskExecutor = Executors.newScheduledThreadPool(5);

    //Schedule a task to run every 5 seconds (or however long you want)
    scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
        @Override
        public void run() {
            // Do stuff here!

            runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    // Do stuff to update UI here!
                    Toast.makeText(MainActivity.this, "Its been 5 seconds", Toast.LENGTH_SHORT).show();
                }
            });

        }
    }, 0, 5, TimeUnit.SECONDS); // or .MINUTES, .HOURS etc. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-23T12:55:37.937

引用[调度重复警报 - 了解权衡](https://developer.android.com/training/scheduling/alarms.html#tradeoffs)文档：

> 在应用程序生命周期之外触发操作的常见场景是与服务器同步数据。在这种情况下，您可能会想使用重复警报。但是，如果您拥有托管应用数据的服务器，则将 Google Cloud Messaging (GCM) 与同步适配器结合使用是比 AlarmManager 更好的解决方案。同步适配器为您提供与 AlarmManager 相同的所有调度选项，但它为您提供了更大的灵活性。

因此，基于此，安排服务器调用的最佳方式是将[Google Cloud Messaging (GCM)](https://developer.android.com/google/gcm/index.html)与[Sync Adapter](https://developer.android.com/training/sync-adapters/index.html)结合使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-13T12:57:51.967

我已经创建了用户想要重复的任务的准时任务，在自定义 TimeTask run() 方法中添加。它成功地再次发生。

```
 import java.text.SimpleDateFormat;
 import java.util.Calendar;
 import java.util.Timer;
 import java.util.TimerTask;

 import android.os.Bundle;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.CheckBox;
 import android.widget.TextView;
 import android.app.Activity;
 import android.content.Intent;

 public class MainActivity extends Activity {

     CheckBox optSingleShot;
     Button btnStart, btnCancel;
     TextView textCounter;

     Timer timer;
     MyTimerTask myTimerTask;

     int tobeShown = 0  ;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    optSingleShot = (CheckBox)findViewById(R.id.singleshot);
    btnStart = (Button)findViewById(R.id.start);
    btnCancel = (Button)findViewById(R.id.cancel);
    textCounter = (TextView)findViewById(R.id.counter);
    tobeShown = 1;

    if(timer != null){
        timer.cancel();
    }

    //re-schedule timer here
    //otherwise, IllegalStateException of
    //"TimerTask is scheduled already" 
    //will be thrown
    timer = new Timer();
    myTimerTask = new MyTimerTask();

    if(optSingleShot.isChecked()){
        //singleshot delay 1000 ms
        timer.schedule(myTimerTask, 1000);
    }else{
        //delay 1000ms, repeat in 5000ms
        timer.schedule(myTimerTask, 1000, 1000);
    }

    btnStart.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {

            Intent i = new Intent(MainActivity.this, ActivityB.class);
            startActivity(i);

            /*if(timer != null){
                timer.cancel();
            }

            //re-schedule timer here
            //otherwise, IllegalStateException of
            //"TimerTask is scheduled already" 
            //will be thrown
            timer = new Timer();
            myTimerTask = new MyTimerTask();

            if(optSingleShot.isChecked()){
                //singleshot delay 1000 ms
                timer.schedule(myTimerTask, 1000);
            }else{
                //delay 1000ms, repeat in 5000ms
                timer.schedule(myTimerTask, 1000, 1000);
            }*/
        }});

    btnCancel.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View v) {
            if (timer!=null){
                timer.cancel();
                timer = null;
            }
        }
    });

}

@Override
protected void onResume() {
    super.onResume();

    if(timer != null){
        timer.cancel();
    }

    //re-schedule timer here
    //otherwise, IllegalStateException of
    //"TimerTask is scheduled already" 
    //will be thrown
    timer = new Timer();
    myTimerTask = new MyTimerTask();

    if(optSingleShot.isChecked()){
        //singleshot delay 1000 ms
        timer.schedule(myTimerTask, 1000);
    }else{
        //delay 1000ms, repeat in 5000ms
        timer.schedule(myTimerTask, 1000, 1000);
    }
}

@Override
protected void onPause() {
    super.onPause();

    if (timer!=null){
        timer.cancel();
        timer = null;
    }

}

@Override
protected void onStop() {
    super.onStop();

    if (timer!=null){
        timer.cancel();
        timer = null;
    }

}

class MyTimerTask extends TimerTask {

    @Override
    public void run() {

        Calendar calendar = Calendar.getInstance();
        SimpleDateFormat simpleDateFormat = 
                new SimpleDateFormat("dd:MMMM:yyyy HH:mm:ss a");
        final String strDate = simpleDateFormat.format(calendar.getTime());

        runOnUiThread(new Runnable(){

            @Override
            public void run() {
                textCounter.setText(strDate);
            }});
    }
} 
```

}

# c# - 防止 SQL 注入的好方法是什么？

> ID：14376473
> 
> 赞同：53
> 
> 时间：2013-01-17T10:01:55.113
> 
> 标签：c#, sql, security, sql-injection

我必须为我的 OJT 公司编写一个应用程序管理系统。前端将在 C# 中完成，后端将在 SQL 中完成。

现在我以前从未做过这个范围的项目；在学校里，我们只有关于 SQL 的基本课程。不知何故，我们的老师完全没有讨论 SQL 注入，这是我现在才通过在网上阅读它才接触到的。

所以无论如何我的问题是：如何防止 C# 中的 SQL 注入？我隐约认为可以通过适当地屏蔽应用程序的文本字段来做到这一点，以便它只接受指定格式的输入。例如：电子邮件文本框的格式应为“example@examplecompany.tld”。这种方法就足够了吗？或者.NET 是否有预定义的方法来处理这样的事情？我可以将过滤器应用于文本框，使其仅接受电子邮件地址格式或名称文本框，因此它不接受特殊字符吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-01-17T10:28:20.750

通过使用[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)及其[子参数集合，](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)所有检查 sql 注入的痛苦都被消除了，将由这些类处理。

这是一个示例，取自上述文章之一：

```
private static void UpdateDemographics(Int32 customerID,
    string demoXml, string connectionString)
{
    // Update the demographics for a store, which is stored  
    // in an xml column.  
    string commandText = "UPDATE Sales.Store SET Demographics = @demographics "
        + "WHERE CustomerID = @ID;";

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand(commandText, connection);
        command.Parameters.Add("@ID", SqlDbType.Int);
        command.Parameters["@ID"].Value = customerID;

        // Use AddWithValue to assign Demographics. 
        // SQL Server will implicitly convert strings into XML.
        command.Parameters.AddWithValue("@demographics", demoXml);

        try
        {
            connection.Open();
            Int32 rowsAffected = command.ExecuteNonQuery();
            Console.WriteLine("RowsAffected: {0}", rowsAffected);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-17T10:27:17.227

SQL 注入可能是一个棘手的问题，但有一些方法可以解决它。只需使用 Linq2Entities、Linq2SQL、NHibrenate 之类的 ORM，您的风险就会降低。但是，即使使用它们，您也可能遇到 SQL 注入问题。

SQL 注入的主要内容是用户控制的输入（与 XSS 一样）。在最简单的示例中，如果您有一个需要用户名和密码的登录表单（我希望您永远不会有这样的表单）。

```
SELECT * FROM Users WHERE Username = '" + username + "' AND password = '" + password + "'" 
```

如果用户为用户名**Admin' 输入以下内容 -**对数据库执行时 SQL 语句将如下所示。

```
SELECT * FROM Users WHERE Username = 'Admin' --' AND password = '' 
```

在这个简单的情况下，使用参数化查询（这是 ORM 所做的）将消除您的风险。您还有一个鲜为人知的 SQL 注入攻击向量的问题，那就是存储过程。在这种情况下，即使您使用参数化查询或 ORM，您仍然会遇到 SQL 注入问题。存储过程可以包含执行命令，而这些命令本身可能容易受到 SQL 注入攻击。

```
CREATE PROCEDURE SP_GetLogin @username varchar(100), @password varchar(100) AS
DECLARE @sql nvarchar(4000)
SELECT @sql = ' SELECT * FROM users' +
              ' FROM Product Where username = ''' + @username + ''' AND password = '''+@password+''''

EXECUTE sp_executesql @sql 
```

因此，即使您使用参数化查询或 ORM，此示例也会与前一个示例存在相同的 SQL 注入问题。虽然这个例子看起来很傻，但你会惊讶于这样的东西被写的频率。

我的建议是使用 ORM 来立即减少遇到 SQL 注入问题的机会，然后学习发现可能出现问题的代码和存储过程并努力修复它们。我不建议直接使用 ADO.NET（SqlClient、SqlCommand 等...），除非您必须这样做，不是因为将其与参数一起使用不安全，而是因为它更容易变得懒惰并开始编写 SQL使用字符串查询并忽略参数。ORMS 在强迫您使用参数方面做得很好，因为这正是他们所做的。

Next 访问关于 SQL 注入的 OWASP 站点[https://www.owasp.org/index.php/SQL_Injection](https://www.owasp.org/index.php/SQL_Injection)并使用 SQL 注入备忘单来确保您可以发现并解决代码中出现的任何问题。 [https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet) 最后我想说的是，在您和您公司的其他开发人员之间进行良好的代码审查，您可以在其中审查彼此的代码，例如 SQL 注入和 XSS。很多时候程序员会错过这些东西，因为他们试图赶出一些功能并且没有花太多时间来审查他们的代码。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-17T10:05:33.253

我的回答很简单：

使用实体框架在 C# 和 SQL 数据库之间进行通信。这将使参数化的 SQL 字符串不易受到 SQL 注入的影响。

作为奖励，它也很容易使用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-17T10:05:58.513

不应该通过验证您的输入来阻止 SQL 注入；相反，该输入应该在传递到数据库之前正确转义。

如何转义输入完全取决于您用于与数据库交互的技术。在大多数情况下，除非您编写裸 SQL（应尽可能避免），否则框架会自动处理它，因此您可以免费获得防弹保护。

在您确定您的接口技术将是什么之后，您应该进一步探讨这个问题。

# svn - 我可以从 Subversion FTP 吗？

> ID：14376474
> 
> 赞同：1
> 
> 时间：2013-01-17T10:01:56.843
> 
> 标签：svn, logging, deployment, ftp

我正在使用 Subversion 来控制我的网站项目的源代码，我想知道是否有一种有效的方法可以从 SVN 日志消息对话框中使用 FTP 进行部署？我基本上是在顶部窗格中选择修订并在底部窗格中查看受影响的文件。然后，我使用受影响的文件列表单独选择要在我的 FTP 客户端中部署的项目。

如果存在允许我直接从底部窗格通过 FTP 部署的插件（也许确实存在？），那将非常方便。

有人知道这样的插件/扩展可以让我实现这一目标吗？

![Subversion - 日志消息](../Images/d062389b1aa77036f669f159ae9d0bbd.png)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T06:05:33.233

据我所知，不存在这样的插件。

但是你可以在你的 subversion 服务器上写一个 post-commit 钩子来获得类似的结果，与一些特定的标签相关联。见： [http ://www.itforeveryone.co.uk/svn2web.html](http://www.itforeveryone.co.uk/svn2web.html)

或者您可以通过 SSH 连接到您的主机，对您的项目进行 SVN 检出，然后在每次进行更改时进行 SVN 更新。

如果没有或想要 SSH 你的服务器，你可以设置一个 Netdrive 到你的 web 文件夹，并欺骗 TortoiseSVN 对该文件夹进行更新（没有尝试过这个，可能很慢）： [http:// www.netdrive.net/download.html](http://www.netdrive.net/download.html)

您还可以设置 lftp 以仅从本地文件夹上传更改的文件（这就是我所做的）。它不如 svn（或 rsync）高效，但它比普通的 ftp 好得多： [http ://sina.salek.ws/content/how-mirrorsync-remote-ftp-folder-local-folder](http://sina.salek.ws/content/how-mirrorsync-remote-ftp-folder-local-folder)

如果你在 Windows 上，你可以安装 Cygwin 来获取 lftp。 [http://www.cygwin.com](http://www.cygwin.com)

你可以使用 rsync，但它很难设置，我不推荐它，除非你有很多东西要同步，而且不介意弄乱服务器上的端口和打开端口。

Windows 上还有一个程序，您可以使用它通过 FTP 进行同步，称为 Allway Sync。我用过它，它很丑，设置起来很棘手，而且速度很慢，但是可以： [http ://www.allwaysync.com/](http://www.allwaysync.com/)

您可以为 SVN-FTP 同步的托管实施付费：http: [//svn2ftp.com/subversion-hosting-packages](http://svn2ftp.com/subversion-hosting-packages)

最后，如果您使用 FileZilla，您可以选择仅“覆盖具有较早日期或不同大小的文件”并上传整个项目，应该不会很慢。 [http://filezilla-project.org](http://filezilla-project.org)

# java - java - 如何在Java swing中的另一种方法中检查事件？

> ID：14376475
> 
> 赞同：1
> 
> 时间：2013-01-17T10:01:58.883
> 
> 标签：java, swing, actionlistener, method-call

在我的项目中，我想在服务器中选择一个文件并在 java swing 中发送给客户端。在此，我必须在客户的单选按钮中发送给我喜欢的客户。但我不知道如何检查在发送按钮中单击了单选按钮。因为我必须检查在发送按钮方法中单击了单选按钮。

我的单选按钮代码

```
jRadioButton1.setText("One");
jRadioButton1.addActionListener(new java.awt.event.ActionListener() {
  public void actionPerformed(java.awt.event.ActionEvent evt) {
    jRadioButton1ActionPerformed(evt);
  }
});
}

private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) {
  JOptionPane.showMessageDialog(null, "You Selected Button 1");
} 
```

对于发送按钮......

```
 jButton1.setText("SEND");
    jButton1.addActionListener(new java.awt.event.ActionListener() 
    {
        public void actionPerformed(java.awt.event.ActionEvent evt) 
        {
            jButton1ActionPerformed(evt);
        }
    });

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) 
    {

    jRadioButton1ActionPerformed(evt);
    Object k=evt.getSource();
    System.out.println(k);
} 
```

如何检查在发送操作方法中单击了单选按钮？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:05:21.297

假设您的不同 UI 组件在同一个类中并声明为实例成员，您可以在类中的任何位置简单地引用它们。所以你可以写：

```
jButton1.addActionListener(new java.awt.event.ActionListener() {
    public void actionPerformed(java.awt.event.ActionEvent evt) {
        if (jRadioButton1.isSelected()) {
            System.out.println("radio button selected");
        } else {
            System.out.println("radio button NOT selected");
        }
    }
}); 
```

# jquery - .delay divA，当显示 DivA 时，自动隐藏 DivB

> ID：14376479
> 
> 赞同：1
> 
> 时间：2013-01-17T10:02:20.553
> 
> 标签：jquery, css, animation, html

是否有任何代码，如果我设置.delay（500）显示divA，那么当divA显示时，当出现检测divA时divB将自动隐藏。因为对于我的视觉设计，DivA 和 DivB 将是同一个地方。我不能在页面的 .delay 上使用太多，因为我害怕计时器问题，因为不是每个人都有良好的互联网接入。

有没有办法做到这一点？因为我不是动画部分的专家，所以我使用 gif 动画继续。

我的视觉流程解释：第一件事将显示一个大纸卷（它很接近），当我点击纸卷时，它会缩小然后移动到左侧，然后下一帧将被推出从左到右的纸卷形式。

:((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:07:59.150

您可以使用带有此类功能的回调函数来检测第一件事何时完成其预期的操作......

```
$('#divA').delay(500).fadeIn('slow', function() {
    // divA has finished loading.. NEXT.
    $('#divB').hide();
}); 
```

你可以继续做更多的事情`fadeOut()`......

```
$('#divB').fadeOut('slow', function() {
    // Oh look, divB has just faded out!
}); 
```

* * *

所以最后，如果你`#divA`设置为隐藏和`#divB`可见，`#divA`淡入，当它完成淡入时，`#divB`淡出。

当然也可以切换

`.fadeIn('slow', function() . . .`相反`.show(function() ...`，如果您不想要淡入淡出动画。

* * *

根据您的问题，您的最终代码：

```
<div id="divA" style="display:none">
    divA
</div>
<div id="divB">
    divB
</div>

<script type="text/javascript">
    $('#divA').delay(500).fadeIn('slow', function() {
        // divA has finished loading.. NEXT.
        $('#divB').fadeOut('slow');
    });
</script> 
```

# iphone - 如何为单个类加载不同的 xib？

> ID：14376485
> 
> 赞同：0
> 
> 时间：2013-01-17T10:02:27.813
> 
> 标签：iphone, ios, ipad, xib, viewcontroller

> **可能重复：**
> [如何根据 iOS 中的当前设备为单个类加载不同的 xib？](https://stackoverflow.com/questions/14373739/how-can-i-load-the-different-xibs-for-single-class-depends-on-current-device-in)

我开发了一个通用应用程序。我为 iPhone 实现了该应用程序。现在我必须为 iPad 实现。我有关于数据处理的完整代码在视图控制器中，view-controller.xib 用于 iPhone。我如何使用 iPad 的代码。

我为 ipad 创建了一个 xib 文件（ViewController_iPad.xib）。当我在 iPad 中运行应用程序时，我得到了 ipad xib，但数据未显示。

如何获取 viewController 中存在的数据？

谢谢你的建议。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:13:10.687

在应用委托中添加此方法

```
 +(NSString *)getNibName:(NSString *)strNibName
    {
        if(UI_USER_INTERFACE_IDIOM()==UIUserInterfaceIdiomPad)
            return strNibName;
        else
            NSLog(@"%@",[NSString stringWithFormat:@"%@_iphone",strNibName]);
            return [NSString stringWithFormat:@"%@_iphone",strNibName];
    } 
```

并在您需要时调用它

```
 ViewController *obj=[[ViewController alloc] initWithNibName:[AppDelegate getNibName:@"ViewController"] bundle:nil];
[self.navigationController pushViewController:obj animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:18:31.857

iOS 有一个简单的方法来`NIB`为 iPad 和 iPhone 加载不同的内容。

如果您将`NIB`文件命名为：`ViewController~ipad.xib`否则`ViewController~iphone.xib`iOS 将加载相应的文件。

我只将`~ipad`视图添加到我的通用项目中，如果`NIB`没有任何设备说明符，它将被加载到所有其他设备上。

您现在可以加载您的`UIViewController`喜欢：

```
 [[UIViewController alloc] alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

这也适用于图像：

```
back.png //Normal images
back@2x.png // Retina images
back~ipad.png // iPad normal image
back@2x~ipad.png // Retina iPad images 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:11:15.067

对于您必须检查的第一件事是 iPad xib 中的文件所有者应该与 iPhone xib 的控制器相同。然后像在 iPhone xib 组件中那样进行所有连接，然后这应该可以工作。

# meteor - cursor.observe 会降低服务器性能吗？

> ID：14376486
> 
> 赞同：5
> 
> 时间：2013-01-17T10:02:29.070
> 
> 标签：meteor

我已经搜索并找到了

```
_suppress_initial: true 
```

但它不适用于 0.54

我想观察一些集合，比如 Orders Collection。

如果我有大量订单并且当添加新订单时，我想使用观察来更新另一个集合。

我没有将观察放入 Meteor.publish 如果我不停止观察会怎样，如果我在服务器运行期间一直观察它会减慢服务器吗？

```
if Meteor.isServer

    obOrders = Orders.find({}).observe # when server restart does this slow down performance ?

        _suppress_initial: true # doesnt work

        added: (order) ->

            console.log order # still add exist documents

            if Date.now() - order.timestamp < 500
                console.log order # update another one 
```

还是我应该限制 Orders.find {}, limit: 50 并按时间戳排序以观察最新文档？

将观察服务器 Meteor.startup 或 Meteor.publish 这两个条件有什么不同？

如果我把它放到 Meteor.startup 中，这是否意味着我会进行单例观察？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-02T01:04:02.223

现在，`observe`必须将查询的整个结果永久保存在内存中。因此，如果您调用`Orders.observe({})`，那么只要观察运行，服务器就会将 Orders 集合的完整副本保存在内存中。这是因为在幕后，`observe`当检测到潜在变化时，通过将旧查询结果与新查询结果进行比较来工作。这是为了确保结果`observe`始终 100% 正确，即使由于多个进程同时写入数据库而存在竞争条件。

因此，如果您查询有限数量的文档，例如最近的五个订单，或最近 5 分钟内下的订单，它将显着减少 RAM 使用率（可能还有 CPU 使用率）。但如果您这样做，您将拥有小心确保您不会遗漏任何文件。例如，如果您正在观察最近 5 分钟内插入的文档，但您的服务器关闭了 10 分钟，那么您可能不会收到某些订单的添加消息。或者，如果您正在观察最近的 5 个文档，然后另一个节点一次插入 1000 个文档，您可能只会收到最近 5 个消息的添加消息（因为`observe`不能保证您会观察每个中间状态，只是您的添加/删除/更改消息最终将使您了解当前状态。

至于你将在哪里开始这样的观察：如果你从服务器上的 Meteor.startup 执行它，它将始终运行，但只会运行一个副本（目前 - 未来 Meteor 将启动多个服务器进程，您将需要更新您的代码。）如果您从发布处理程序执行此操作，那么它将仅在至少有一个订阅时运行（并且仅消耗资源）。最近的 Meteor 版本将删除`observe`在完全相同的查询上调用的 s，因此如果您有 1000 个对调用 Orders.find({}).observe({ ... }) 的发布处理程序的订阅，它不应该比只有一个时消耗更多的资源。（记住在客户端退订时停止每个观察。）

根据您正在执行的操作，在创建每个订单时安排任务可能比使用`added`. 例如，您可以有一个`createOrder`插入订单的方法，并将项目添加到`ordersToProcess`集合中，然后分别有代码将项目从`ordersToProcess`集合中拉出并一次处理一个，然后将其删除。`createOrder`或者，如果不需要太长时间，您可以直接从方法中进行处理。

# php - 将 PHP 表单中的数据发布到 File maker pro 12 服务器上的 File Maker 数据库

> ID：14376492
> 
> 赞同：3
> 
> 时间：2013-01-17T10:02:58.243
> 
> 标签：php, database, api, odbc, filemaker

好的，这就是挑战。我在 Windows 盒子上托管的 Filemaker 12 服务器上有一个 File maker 数据库。我还有一个托管在 Linux 机器上的 PHP 表单。如何将 PHP 表单中的数据获取到 Filemaker 数据库？这是我尝试过的。

```
<?php
define('fm_host', '131.181.###.###');
define('fm_file', 'name of the db');
define('fm_user', 'user');
define('fm_pass', 'password');
$layout_name = 'Request'; 
$respondent_data = array("stuff","stuff","stuff","stuff","stuff");
require_once ('FileMaker.php');
$fm = new FileMaker(fm_file, fm_host, fm_user, fm_pass);
if(FileMaker::isError($fm)){ 
die('Error - ' . $fm->getCode() . ' ' . $fm->getMessage());
}
$newAdd =& $fm->newAddCommand('Request', $respondent_data);
$result = $newAdd->execute();
?> 
```

当我去 Filemaker pro 并打开我使用 Filemaker 管理控制台从服务器下载的数据库副本时，这完成了没有错误，但没有新记录。我已将 Filemaker 独立 PHP API 解压缩到与表单相同的目录中，它设法使用 Filemaker.php 函数。所以我很困惑为什么他们至少没有抛出错误。但是在项目的这个阶段我不在乎我只是想要数据库中的数据以任何方式！任何 hack 都会做，因为项目的范围以数据库中的数据结束。

旁注：我已尝试使用 ODBC 访问 DB，并考虑使用 file maker pro 手动导入，但安装在 Linux 服务器上的 PHP 在 php.ini 文件中缺少一个 com 类，我无权更改它。

我也考虑过使用 XML 做同样的事情，尽管我跟不上它的速度。但就像凌晨 4 点的醉汉一样，我愿意试一试。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T20:57:01.850

您需要将字段名映射到数组 $respondent_data 中的值。简单的 key=>value 编程风格。

```
$respondent_data = array("field1" => "stuff", "field2" => "stuff", "field3" => "stuff", "field4" => "stuff", "field5" => "stuff"); 
```

如果需要，您还可以逐个字段指定，如下所示

```
$fm = new FileMaker(fm_file, fm_host, fm_user, fm_pass);
$cmd = $fm->newAddCommand($layout_name);
$cmd->setField("fieldname", "Value");
$cmd->setField("fieldname2", "Value2");
$cmd->setField("fieldname3", "Value3");
$result = $cmd->execute();

if(FileMaker::isError($result)){ 
    die('Error - ' . $fm->getCode() . ' ' . $fm->getMessage());
} 
```

在调用 $fm->execute() 之前无需调用 FileMaker::IsError 方法。那是 PHP 使用 cURL 在 FileMaker Server 中查询 WPE 的时候。您将获得返回的 FoundSet-Object 或 Error-Object。IsError 是一种查看 WPE 是否返回一组记录的错误的简单方法。

欲了解更多信息 [http://www.filemaker.com/support/product/docs/12/fms/fms12_cwp_php_en.pdf](http://www.filemaker.com/support/product/docs/12/fms/fms12_cwp_php_en.pdf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T00:50:54.767

首先，FileMaker 自己建议您在构建 Web 应用程序时使用带有[外部 SQL 源](http://www.filemaker.com/support/technologies/sql.html)的第三方数据库。如果您要让多个用户同时点击它，这是获得良好性能的唯一方法。

这将允许您使用 MySQL、Access 或其他工具构建您的 Web 应用程序，然后将该数据库连接到 FileMaker，以便它的表像其他 FM 表一样显示。然后，您可以使用来自第 3 方数据库的数据在 FM 中创建布局、脚本、计算等，就像它是实际的 FM 数据一样。

如果您想坚持使用 PHP API，您需要确保文件实际在服务器上运行，并且您只需使用 Pro 打开它。我有点困惑你说你是如何下载它以在 Pro 中运行..?? 您不下载它...您只需从远程服务器打开它。

然后，您需要确保该文件为您通过 FM 中的安全设置连接的用户启用了 PHP API。我建议创建一个特定于您的 Web 应用程序的用户，并且只给它 PHP API 访问权限。

然后，当您将 Web 应用程序与该用户连接时，您应该一切顺利。

# jquery-validation-engine - 限制文本区域中的字符数

> ID：14376503
> 
> 赞同：0
> 
> 时间：2013-01-17T10:03:37.227
> 
> 标签：jquery-validation-engine

我想防止在`textarea`使用**jquery-validation-engine**时扣押超过 100 个字符。

它适用于输入，但不适用于`textarea`.

```
<textarea class="validate[maxSize[100]] Pt_Textarea" type="text" name="descriptif" id="descriptif" data-prompt-position="topLeft" spellcheck="true"></textarea> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T10:19:31.030

你可以使用类似的东西：

```
<textarea rows="5" cols="15" maxlength="100"></textarea> 
```

使用 Jquery 取自[Textarea maxlength的脚本](http://that-matt.com/2008/07/textarea-maxlength-with-jquery/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T08:59:41.513

您可以使用`type="textarea"`代替`type="text"`。

# google-apps-script - Apps 脚本和分析：当我从 API 检索 avgTimeOnSite 值时，我得到一个错误的格式编号

> ID：14376504
> 
> 赞同：0
> 
> 时间：2013-01-17T10:03:39.863
> 
> 标签：google-apps-script, number-formatting

我正在使用 Apps Script 中的“魔术”代码从 Analytics API 获取数据并将其输入电子表格。

我需要的值之一是 avgTimeOnSite。它应该以秒为单位返回时间。我的问题是如何将数字转换为有用的 HH.MM.SS 格式。

有时我会得到这些数字：

584.123076923077 在第一种情况下，我得到一个逻辑数字（584/60 秒 = 9,73 分钟）。但是当我尝试从该数字 =INT(584.123076923077) 中获取整数时，我得到 584.123.076.923.077,00。显然，我遇到了格式问题，系统将美国格式（整数.十进制）与拉丁系统（整数，十进制）混淆了。

581095 在第二种情况下，我得到一个巨大的整数。我想一定和同一个问题有关。

关于如何解决它的任何线索？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:38:57.607

在托管“Google Analytics Report Automation (magic)”代码的电子表格中，进入“文件”>“电子表格设置”并检查“区域设置”。

确保它位于支持点作为小数点而不是逗号的语言环境中。

如果这样可以解决您的问题，那么您需要保持这样的设置或修补“魔术”代码（应该不会太难）。

# r - 如何从列表列表中提取元素

> ID：14376506
> 
> 赞同：23
> 
> 时间：2013-01-17T10:03:46.330
> 
> 标签：r, vector

我是 R 的新手。我 `t1`在 R 中有一个列表，看起来像

```
[[1]]
[[1]][[1]]
[1] "a"       "control"

[[2]]
[[2]][[1]]
[1] "a"        "disease1"

[[3]]
[[3]][[1]]
[1] "a"        "disease2"

[[4]]
[[4]][[1]]
[1] "b"       "control"

[[5]]
[[5]][[1]]
[1] "b"        "disease1"

[[6]]
[[6]][[1]]
[1] "b"        "disease2" 
```

我需要从这个向量中获取一个唯一的第一个元素列表到一个向量中，即 ["a", "b"] `t1`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-17T12:08:50.930

`rapply`提供另一种选择：

```
unique(rapply(t1, function(x) head(x, 1))) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-17T10:09:51.420

另一种方法是使用`unlist`：

```
> t1=list(list(c("a","control")),list(c("b","disease1")))
> t1
[[1]]
[[1]][[1]]
[1] "a"       "control"

[[2]]
[[2]][[1]]
[1] "b"        "disease1"

> matrix(unlist(t1),ncol=2,byrow=TRUE)
     [,1] [,2]      
[1,] "a"  "control" 
[2,] "b"  "disease1" 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-17T10:07:52.220

我会使用`do.call`and`rbind`将列表连接成`data.frame`. 然后您可以`unique`在第一列上使用来获取唯一项目（使用@AR给出的示例）：

```
spam = do.call("rbind", lapply(t1, "[[", 1))
> spam
     [,1] [,2]      
[1,] "a"  "control"                                                         
[2,] "b"  "disease1" 
> unique(spam[,1])
[1] "a" "b" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-17T10:29:18.893

当一个或多个子列表包含多个元素时，我尝试处理一般情况。

例如：

```
ll <- 
        list(list(c("a","control")),
             list(c("b","disease1")),
             list(c("c","disease2"),c("c","disease2bis")), # 2 elements
             list(c("d","disease3")),
             list(c("e","disease4"))
) 
```

你可以这样做：

```
 unlist(lapply(ll,                                 ## for each element in the big list
        function(x) 
             sapply(1:length(x),                   ## for each element in the sublist
             function(y)do.call("[[",list(x,y))))) ## retrieve x[[y]]

[1] "a"           "control"     "b"           "disease1"    "c"         
     "disease2"    "c"           "disease2bis" "d"           "disease3"   
[11] "e"           "disease4" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-11-16T17:25:58.247

使用包`rlist`，即

```
library(rlist)
yourlist %>>% list.map(.[1]) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-01T23:44:18.493

作为 2020 年的更新，使用`purrr`. 使用@Gago-Silva 的测试列表：

```
library(purrr)
t1 %>% flatten() %>% map(1) %>% as_vector() 
```

子列表被展平为字符向量，从中提取元素 1，并将此单元素字符向量列表转换为一个向量。

另请注意，您可以直接从列表列表中获取一个小标题

```
t1 %>% flatten_dfc() 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-06T16:53:02.077

使用基础 R：

```
t1 <- list(list("a", "control"), list("a", "disease"), list("b", "control"))
id <- sapply(t1, function(x) {x[[1]]})
unique(id) 
```

# javascript - 如何将一个数组与多个数组匹配并返回最近的数组

> ID：14376507
> 
> 赞同：0
> 
> 时间：2013-01-17T10:03:51.120
> 
> 标签：javascript, arrays, compare, match

我正在尝试制作一个饮料网络应用程序，用户在其中输入成分，然后返回饮料或鸡尾酒的名称。

我的饮料阵列如下所示：

```
 // Drinks
 var drinks = new Array(
    [0,['Whisky on the Rocks'],['whisky','ice']],
    [1,['Vodka on the Rocks'],['vodka','ice']]
); 
```

我有这个票价，但它只返回第一个元素：

```
function compare(myDrink) {
var difference = [];
difference[0]  = [];
difference[0][0] = [];
var dCount = drinks.length;
for (x = 0;x < dCount; x++) { 
    jQuery.grep(drinks[x][2], function(el) {
        if (jQuery.inArray(el, myDrink) == -1){
             difference[x][0].push(el);
             difference[x][1] = difference[x][0].length;
        }
    });
    var theDrink = difference[x][0].join(',');
    if (theDrink == ''){
        return drinks[x][1];
    } else {
        var diff = 'The Difference is: ' + difference[x][1] + ' Missing: ' + theDrink;
        return diff;
    }

}
} 
```

我究竟做错了什么？有没有更好的方法呢？

提前致谢，

罗伯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:09:00.590

好的，我会这样做：在您的`for`循环中，跟踪您找到的最小距离及其索引：

```
....
var closest = -1;
var minDifference = 99;
for (x = 0;x < dCount; x++) {
    difference[x]  = [];
    difference[x][0] = [];
    difference[x][1] = 0;
    jQuery.grep(drinks[x][2], function(el) {
        if (jQuery.inArray(el, myDrink) == -1){
            difference[x][0].push(el);
            difference[x][1] = difference[x][0].length;
        }
    });
    if (difference[x][1] < minDifference) {
        minDifference = difference[x][1];
        closest = x;
    }
}
... 
```

有关完整示例，请参见[this fiddle](http://jsfiddle.net/9dTWx/4/)。顺便说一句，我强烈建议对`drinks`and`difference`数组使用更有意义的结构，正如 VisioN 所建议的那样，并且可能还使函数返回某种数据结构（例如，最近的饮料索引和成分数组）而不是描述字符串.

# c - 无法使用 Windows Driver Kit 构建环境声明变量

> ID：14376511
> 
> 赞同：3
> 
> 时间：2013-01-17T10:03:59.233
> 
> 标签：c, windows, wdk

我有一个微不足道的驱动程序，如下所示：

```
#include <ntddk.h>

NTSTATUS DriverEntry(__in DRIVER_OBJECT* a, __in UNICODE_STRING* b)
{
    UNREFERENCED_PARAMETER(a);
    UNREFERENCED_PARAMETER(b);

    int c; // this fails the build

    return 0;
} 
```

一个微不足道的makefile

```
TARGETNAME=main
TARGETTYPE=DRIVER
MSC_WARNING_LEVEL=/W4 /WX
SOURCES=main.c 
```

具有非繁琐的构建输出

```
C:\Test>pushd %cd%

C:\Test>C:\WinDDK\7600.16385.1\bin\setenv.bat C:\WinDDK\7600.16385.1 fre x64 wnet
WARNING: x64 Native compiling isn't supported. Using cross compilers.
Launching OACR monitor

C:\WinDDK\7600.16385.1>popd

C:\Test>build

BUILD: Compile and Link for AMD64
BUILD: Loading c:\winddk\7600.16385.1\build.dat...
BUILD: Computing Include file dependencies:
BUILD: Start time: Thu Jan 17 10:57:58 2013
BUILD: Examining c:\test directory for files to compile.
BUILD: Saving c:\winddk\7600.16385.1\build.dat...
BUILD: Compiling and Linking c:\test directory
Configuring OACR for 'root:amd64fre' - <OACR on>
_NT_TARGET_VERSION SET TO WS03
Compiling - main.c
1>errors in directory c:\test
1>c:\test\main.c(9) : error C2143: syntax error : missing ';' before 'type'
Linking Executable - objfre_wnet_amd64\amd64\main.sys
1>link : error LNK1181: cannot open input file 'c:\test\objfre_wnet_amd64\amd64\main.obj'
BUILD: Finish time: Thu Jan 17 10:57:58 2013
BUILD: Done

    3 files compiled - 1 Error
    1 executable built - 1 Error 
```

这到底怎么会导致`error C2143: syntax error : missing ';' before 'type'`？

并非所有的声明都失败了，我似乎能够声明全局变量但不能声明局部变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:52:27.223

问题是微软 C 编译器只支持 C89 标准，它不允许声明和代码的混合。改成：

```
{
    int c;

    UNREFERENCED_PARAMETER(a);
    UNREFERENCED_PARAMETER(b); 
```

# c# - LINQ：大字符串列表

> ID：14376512
> 
> 赞同：4
> 
> 时间：2013-01-17T10:03:59.660
> 
> 标签：c#, .net, linq

我正在使用 LINQ 解析从 csv 文件读取的大量字符串。我的代码适用于 100MB 文件。但是由于堆栈溢出异常而无法超越它。我正在使用 500MB 文件测试我的代码，其中列表中的字符串数约为 400 万。（500MB csv 文件中大约有 400 万行）

```
 public List<Metrics> MetricsParser(DateTime StartDate, TimeSpan StartTime, DateTime EndDate, TimeSpan EndTime,int dateIndex,int timeIndex)
    {
        DateTime sd = StartDate;
        DateTime ed = EndDate;
        TimeSpan st = StartTime;
        TimeSpan et = EndTime;
        StreamReader streamReader;
        List<string> lines = new List<string>();

        try
        {
            streamReader = new StreamReader("file.csv");
            lines.Clear();
            while (!streamReader.EndOfStream)
                lines.Add(streamReader.ReadLine());
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            if (streamReader != null)
                streamReader.Close();
        }

        IEnumerable<Metrics> parsedFileData = null;
        parsedFileData = from line in lines
                         let log = line.Split(",")
                         where (!(line.StartsWith("#")) & (line.Length > 0))
                         let dateVal = _utility.GetDateTime(dateformatType, log[(int)dateIndex], log[(int)timeIndex])
                         let timeVal = _utility.GetTime(log[(int)timeIndex], timeformatType)
                         where (dateVal >= new DateTime(sd.Year, sd.Month, sd.Day, st.Hours, st.Minutes, st.Seconds)
                                 & dateVal <= new DateTime(ed.Year, ed.Month, ed.Day, et.Hours, et.Minutes, et.Seconds))
                         select new Metrics()
                         {
                             Date = dateVal,
                             Metrics1 = log[(int)Metrics1Index],
                             Metrics2 = (Metrics2Index != null) ? log[(int)Metrics2Index] : "default",
                             Metrics3 = (log[(int)Metrics3Index] == null || log[(int)Metrics3Index] == "") ? "-" : log[(int)Metrics3Index],
                             Metrics4 = (log[(int)Metrics4Index] == null || log[(int)Metrics4Index] == "") ? "-" : log[(int)Metrics4Index],
                             Metrics5 = (log[(int)Metrics5Index] == null || log[(int)Metrics5Index] == "") ? "-" : log[(int)Metrics5Index],
                             Metrics6 = (log[(int)Metrics6Index] == null || log[(int)Metrics6Index] == "") ? "-" : log[(int)Metrics6Index],
                             Metrics7 = (log[(int)Metrics7Index] == null || log[(int)Metrics7Index] == "") ? "-" : log[(int)Metrics7Index],
                             Metrics8 = (log[(int)Metrics8Index] == null || log[(int)Metrics8Index] == "") ? "-" : log[(int)Metrics8Index],
                             Metrics9 = (log[(int)Metrics9Index] == null || log[(int)Metrics9Index] == "") ? "-" : log[(int)Metrics9Index],
                         };
        return parsedFileData.ToList();
    } 
```

任何想法如何用更大的数据完成任务。

我根据一些建议尝试了下面的方法，但它也无法克服堆栈溢出异常！

```
try
{
    streamReader = new StreamReader("file.csv");
    while (!streamReader.EndOfStream)
    {
        var line = streamReader.ReadLine();
        if (!(line.StartsWith("#")) & (line.Length > 0))
        {
            var log = line.Split(",");
            var dateVal = _utility.GetDateTime(dateformatType, log[(int)dateIndex], log[(int)timeIndex]);
            parsedData.Add(
                         new Metrics()
                         {
                             Date = dateVal,
                             Metrics1 = log[(int)Metrics1Index],
                             Metrics2 = (Metrics2Index != null) ? log[(int)Metrics2Index] : "default",
                             Metrics3 = (log[(int)Metrics3Index] == null || log[(int)Metrics3Index] == "") ? "-" : log[(int)Metrics3Index],
                             Metrics4 = (log[(int)Metrics4Index] == null || log[(int)Metrics4Index] == "") ? "-" : log[(int)Metrics4Index],
                             Metrics5 = (log[(int)Metrics5Index] == null || log[(int)Metrics5Index] == "") ? "-" : log[(int)Metrics5Index],
                             Metrics6 = (log[(int)Metrics6Index] == null || log[(int)Metrics6Index] == "") ? "-" : log[(int)Metrics6Index],
                             Metrics7 = (log[(int)Metrics7Index] == null || log[(int)Metrics7Index] == "") ? "-" : log[(int)Metrics7Index],
                             Metrics8 = (log[(int)Metrics8Index] == null || log[(int)Metrics8Index] == "") ? "-" : log[(int)Metrics8Index],
                             Metrics9 = (log[(int)Metrics9Index] == null || log[(int)Metrics9Index] == "") ? "-" : log[(int)Metrics9Index],
                         }
                         );
        }

    }
} 
```

感谢您的想法！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T10:09:06.180

尝试逐行解析文件，而不是像这样保存到内存中

```
var parsedFileData = new List<Metrics>();

while (!streamReader.EndOfStream)
{
    var line = streamReader.ReadLine();

    if(IsLineNeedToBeParsed(line))
        parsedFileData.Add(ParseLine(line));
} 
```

该方法在哪里`ParseLine`，它具有您的 LINQ 查询的内容，但在单行上运行并且`IsLineNeedToBeParsed`是您的`where`子句。. 正如我所注意到的 - 您不会对行进行任何连接。

避免加载整个文件内容，然后执行一些包含大量`let`子句的大型查询——它会在执行过程中消耗大量内存。

尝试创建过滤、选择聚合数据的纯函数，然后，如果您仍然不喜欢性能，请尝试通过添加状态、消除冗余计算、缓存、添加批处理等来优化查询。

快速说明一点：您应该使文件加载延迟，如下所示：

```
private IEnumerable<string> GetAllLines(string path)
{
    using (StreamReader streamReader = new StreamReader(path))
    {
        while (!streamReader.EndOfStream)
        {
            yield return streamReader.ReadLine();
        } 
    }
} 
```

然后你可以从`LINQ`查询中调用它

```
from line in GetAllLines("file.csv") 
```

并且所有行都将按需加载，并且您的内存消耗在执行期间应该相对恒定。

**更新：**

我刚刚发现，`File.ReadLines(string path)`通过在内部创建`ReadLinesIterator`. 所以你可以在你的 LINQ 查询中使用这个调用。

我已经鼓起勇气对您的代码进行了一些重构。请注意，您仍然需要添加一些检查，这**不是**最终版本 - 我只想展示一般想法。另请注意，我没有编译它 - 因为您可以访问解析器状态，而我对它的类型和值一无所知。代码比你的要长一点，但我永远不会忘记 Robert Martin 的 Clean Code 这本书，它的重点是“让代码可读的不是短”。如果我在某个地方错了，请纠正我。

```
public List<Metrics> MetricsParser(DateTime StartDate, TimeSpan StartTime, DateTime EndDate, TimeSpan EndTime,int dateIndex,int timeIndex)
{
    DateTime sd = StartDate;
    DateTime ed = EndDate;
    TimeSpan st = StartTime;
    TimeSpan et = EndTime;
    List<Metrics> parsedFileData = new List<Metrics>();

    using (StreamReader streamReader = new StreamReader("file.csv"))
    {
        while (!streamReader.EndOfStream)
        {
            var line = streamReader.ReadLine();

            if(IsLineNeedToBeParsed(line))
                parsedFileData.Add(ParseLine(line));
        } 
    }

    return parsedFileData;
}

private bool IsLineNeedToBeParsed(string line)
{
    return !(line.StartsWith("#")) && (line.Length > 0) && IsInDateRange(line);
}

private bool IsInDateRange(string line)
{
    var dateVal = GetDateTime(line);
    return dateVal >= new DateTime(sd.Year, sd.Month, sd.Day, st.Hours, st.Minutes, st.Seconds)
         & dateVal <= new DateTime(ed.Year, ed.Month, ed.Day, et.Hours, et.Minutes, et.Seconds);
}

private Metrics ParseLine(string line)
{
    var log = line.Split(',');
    var time = _utility.GetTime(log[(int)timeIndex], timeformatType);
    var dateVal = GetDateTime(line);
    return new Metrics{  /* fill values here */ }
}

private string[] GetDateTime(string line)
{
    var log = line.Split(',');
    return _utility.GetDateTime(dateformatType, log[(int)dateIndex], log[(int)timeIndex]);
}

public class Metrics{} 
```

# macos - 在 Mac 上安装 PyLucene

> ID：14376513
> 
> 赞同：7
> 
> 时间：2013-01-17T10:03:59.677
> 
> 标签：macos, pylucene, jcc

我希望能够在我的 Mac 上使用 pyLucene。这些说明让我绝望地迷失了方向，因为每个设置或制作说明都要求我在它之前做一些事情，而且很难知道从哪里开始以及从哪个窗口开始做什么。

我已经下载了 PyLucene。我想知道的第一件事是我把文件夹放在哪里，因为这对我来说似乎不是不言而喻的。

要使用它，我被告知我需要构建 JCC，它包含在 pylucene 下载中。

说明：

> 在命令行中，输入：
> 
> ```
> $ python setup.py build
> $ sudo python setup.py install 
> ```

但要做到这一点，我认为，我需要在正确的位置或将文件夹放在正确的位置，否则我会得到`"setup.py" not found`.

您可以在此环境中提供任何帮助（shell 窗口？IDE？）。非常感谢通过第一部分的任何帮助：构建 JCC，然后设置 pylucene。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-09T12:07:46.377

这适用于最近的 macOS 版本。首先，确保安装：

*   [Java 开发工具包 8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
*   [来自 Apple 的 Java 1.6](https://support.apple.com/kb/dl1572?locale=en_US)（由于一个错误）
*   Apache Ant，理想情况下与 Homebrew 和`brew install ant --with-ivy`

然后添加到您的`~/.bash_profile`：

```
export JAVA_HOME=$(/usr/libexec/java_home) 
```

然后，重新加载你的 shell。

[下载 PyLucene](http://www-us.apache.org/dist/lucene/pylucene/)`cd`并从你的 shell 中提取文件夹。现在，按照[官方安装指南](http://lucene.apache.org/pylucene/install.html)中的说明进行操作：

```
cd jcc
python setup.py build 
```

现在，安装 JCC：

```
python setup.py install 
```

（`sudo`如果您使用的是 macOS 系统 Python，则可能需要 A。）

现在返回父文件夹并编辑`Makefile`. 按照指示将未注释的行替换为`ant`、`python`、`jcc`和的实际路径`NUM_FILES`：

```
ANT=ant
PYTHON=python
JCC=python -m jcc
NUM_FILES=8 
```

现在构建 PyLucene：

```
make
make test 
```

最后，安装构建好的 PyLucene：

```
make install 
```

`sudo`（如果使用系统 Python，您可能需要。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-28T22:45:10.570

[从此处](https://code.google.com/a/apache-extras.org/p/pylucene-extra/downloads/list?q=mac)下载适用于 Mac 的预构建 JCC 和 pylucene 鸡蛋。

到目前为止，python 2.6 的最新版本是 JCC-2.8 和 lucene-3.1.0，所以下面我将使用 easy_install-2.6 和 python2.6。

安装它们：

```
$ sudo easy_install-2.6 JCC-*.egg
$ sudo easy_install-2.6 lucene-*.egg 
```

测试：

```
$ python2.6
>>> import jcc
>>> import lucene
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Library/Python/2.6/site-packages/lucene-3.1.0-py2.6-macosx-10.6-universal.egg/lucene/__init__.py", line 7, in <module>
    import _lucene
ImportError: dlopen(/Library/Python/2.6/site-packages/lucene-3.1.0-py2.6-macosx-10.6-universal.egg/lucene/_lucene.so, 2): Library not loaded: @rpath/libjcc.dylib
  Referenced from: /Library/Python/2.6/site-packages/lucene-3.1.0-py2.6-macosx-10.6-universal.egg/lucene/_lucene.so
  Reason: image not found 
```

如果您收到上述错误，只需创建`libjcc.dylib`in 的符号链接即可修复它`/usr/local/lib/`。`libjcc.dylib`应该在里面`site-packages/JCC-*.egg/`。

```
>>> jcc.__file__
'/Library/Python/2.6/site-packages/JCC-2.8-py2.6-macosx-10.7-intel.egg/jcc/__init__.pyc'
>>> ^D

$ ln -s /Library/Python/2.6/site-packages/JCC-2.8-py2.6-macosx-10.7-intel.egg/libjcc.dylib /usr/local/lib/

$ python2.6
>>> import jcc, lucene
>>> 
```

# c++ - 如何在 C++ 中增加 long long 的范围？

> ID：14376514
> 
> 赞同：0
> 
> 时间：2013-01-17T10:04:03.507
> 
> 标签：c++, rsa

我正在使用 dev C++ IDE 创建一个程序来运行 RSA 算法。众所周知，该算法使用非常大的数字。24-26 位数字。long long 数据类型最多只支持 20 位左右的数字。如何在 C++ 中处理如此庞大的数字？有没有办法可以更改长数据类型的限制/大小/范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:53:14.617

由于大众的要求：

有很多 bignumber 库（都服务于不同的受众）。例子是：

*   gmp（或在其之上更好的界面：mpfr）
*   mpir（gmp 分支）

维基百科文章[任意精度算术](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)也列出了一些。谷歌揭示了更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:09:49.423

您可以编写一个类或结构来封装，并且可能像 java 中的 BigInt

> 有一个例子给你[http://hi.baidu.com/lauo1988/item/ed31512ba601e8cddcf69adb](http://hi.baidu.com/lauo1988/item/ed31512ba601e8cddcf69adb)

# javascript - 覆盖 window.open()

> ID：14376522
> 
> 赞同：2
> 
> 时间：2013-01-17T10:04:20.020
> 
> 标签：javascript, overriding, window.open

我正在尝试覆盖`window.open()`，所以我试图找到一种在新窗口中打开链接而不使用`window.open()`.

详细地说，我处于这样的情况：我有一个 Silverlight Web 部件，它用于`HTMLWindow.Navigate()`在新窗口中打开超链接，所以我不能使用`<a>`，因为我完全无法控制 Web 部件。唯一的方法是覆盖`window.open()`.

例如，当我想在顶部窗口中打开链接时，我会`window.open()`这样覆盖：

```
window.open = function (open) {
    return function (url, name, features) {
            window.top.location = url;    
            return false;
       };
    }(window.open); 
```

是否有类似的方法可以在新窗口中打开链接？非常感谢！

PS：我不能在这里使用锚，因为我正在覆盖`window.open()`

**我最终为这个问题做了什么：**

首先，我复制了一份`window.open()`

```
var _open = window.open; 
```

然后我覆盖了这个`window.open()`函数。例如，假设“目标”是一个接收查询字符串的变量。请注意，默认行为是在当前窗口中打开链接。

```
if (target == "top")
    {
        window.open = function (open) {
            return function (url, name, features) {
                window.top.location = url;
                return false;
           };
        }(window.open);
    }
else if (target == "blank")
{
    window.open = function (open) {
            return function (url, name, features) {
                return open_(url, '_blank', features);
           };
        }(window.open);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:08:03.130

仅从 javascript 中，您无法在*不*使用`window.open()`. 此外，您对在新浏览器中打开窗口的方式没有影响。这取决于浏览器设置是否打开新选项卡或新窗口。

您可以通过在-element 上定义来声明您想要一个新窗口，但随后用户必须单击它。否则，如果您使用 javascript 触发点击，您将遇到浏览器的弹出窗口阻止程序。`<a`**[`target="_blank"`](https://developer.mozilla.org/de/docs/HTML/Element/a#attr-target)**`href="..."></a>``a`

# c++ - VS2012：在调试器启动时 ntdll.dll 中的断点没有更多信息

> ID：14376523
> 
> 赞同：12
> 
> 时间：2013-01-17T10:04:20.610
> 
> 标签：c++, windows, debugging, windows-8, visual-studio-2012

有时，当我使用 VS2012 在调试模式下启动/调试我的应用程序时，会出现一个对话框：

> <blahblah.exe> 已触发断点。

它不包含其他信息，所以我点击 break 看看发生了什么。哦，但是后来我得到“wntdll.pdb not loaded”，并且没有关于该问题的其他信息。调用堆栈指向 ntdll.dll，此时我的应用程序似乎还没有开始执行。

此时选择继续将使应用程序/调试器像往常一样继续。

这种情况经常发生（大约 10 次发射中的 7 次）。我正在运行 Windows 8（64 位）和带有更新 1 的 Visual Studio 2012。

以前我有 Windows 7（64 位）和 VS2010，从来没有遇到过这个问题。这个特定项目已经从它在 (2010) 中创建的版本升级，所以这可能是问题的一部分。

以前有人遇到过这个问题吗？我不知道从哪里开始寻找原因。虽然我运行的是 64 位 Windows，但我应该提到我正在构建一个 32 位应用程序。

**更新：** 启用 Microsoft 符号服务器后，调用堆栈如下所示：

```
>   ntdll.dll!_LdrpDoDebuggerBreak@0()  Unknown
    ntdll.dll!_LdrpInitializeProcess@8()    Unknown
    ntdll.dll!__LdrpInitialize@8()  Unknown
    ntdll.dll!_LdrpInitialize@8()   Unknown
    ntdll.dll!_LdrInitializeThunk@8()   Unknown 
```

我还应该补充一点，以防万一，我的代码中绝对没有手动*设置断点。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-30T07:42:08.647

这个烦人的问题源于 Visual Studio 中的一个错误：

> 发生的事情是我们没有同时正确处理来自不同进程的多个加载程序断点事件。一旦进程启动并运行，但在执行任何操作之前，操作系统会触发加载程序断点，以便调试器实例化断点并采取其他操作。通常我们会成功忽略这些（至少在单个启动案例中）。您可以通过禁用工具->选项->调试器中的“当一个进程中断时中断所有进程”复选框来解决此问题。另请注意，这不是致命错误。我们只是停在一个内部中断点，您可以再次按 F5 继续前进。
> 
> 这是一个竞争条件，所以我们不会那么容易追踪，而且 VS 中的多次启动使用率相当低，所以我不会解决这个问题，假设上面的解决方法足以让你畅通无阻并且如果我们看到更多来自其他客户的报告，我们将重新审视这一点。你觉得这听起来合理吗？
> 
> 再次感谢你的反馈。
> 
> Marc Paine Visual Studio 调试器工程经理

来源：[微软连接](https://connect.microsoft.com/VisualStudio/feedback/details/1059502/visual-studio-2013-update-4-issues-debug-break-with-multiple-startup-projects)

我遵循了在 Visual Studio 调试器设置中禁用“当一个进程中断时中断所有进程”复选框的建议，这暂时“消除”了这个问题。

也许如果我们能让更多人报告这个错误的相同问题/烦恼，微软最终会按照他们的建议修复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-06T13:46:31.130

如果您在调试器下运行应用程序，则进程一开始就会有一个自动断点。此断点使您有机会在进程开始执行之前设置更多断点。如果您不喜欢它，调试器中通常有一个选项可以忽略初始默认断点。例如，在`cdb` [选项中是`-g`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff539058(v=vs.85).aspx).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-13T16:57:36.947

我刚刚发现自己遇到了类似的问题，不过，这是我的调用堆栈：

```
ntdll.dll!LdrpDoDebuggerBreak()
ntdll.dll!LdrpInitializeProcess()
ntdll.dll!_LdrpInitialize() 
ntdll.dll!LdrInitializeThunk() 
```

就我而言，我的 Visual Studio 解决方案有几个项目，其中三个项目通过解决方案的“多个启动项目”设置设置为启动（和调试）。

其中两个启动项目是（非托管）C++，其中一个是 C#。通过打开 C# 项目的项目属性并启用“本机代码调试”，我能够摆脱这个启动断点。

[![](../Images/7f143e10db7c38183012c3ef533c8583.png)](https://i.stack.imgur.com/NxB14.png)

**编辑**：显然这并没有完全解决我的问题，它只是大大降低了它发生的频率。但是，我认为相同的通用解决方案可能仍然可以解决它。

此解决方案中的其他项目之一只是一个预构建的二进制文件，通过手动将二进制文件指定为项目的`TargetPath`.

在项目的属性页面中更改`Debugger Type`to似乎也有帮助。`Native Only``Debugging`

[![](../Images/32cc33f9f471aa5b1ac31fb6ef83adb0.png)](https://i.stack.imgur.com/22hNK.png)

所以，改变*这两个*似乎实际上已经为我解决了这个问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-06T13:32:27.233

查看您是否已打开在第一次机会异常时闯入调试器。

您可以在“调试/异常...”下看到这一点。查看是否选中了任何框。（至少这是旧 VS 变体中的菜单位置 - 我目前没有 VS 2012）如果启用，这会导致调试器在抛出异常时中断，即使应用程序可以正确处理它。如果禁用，调试器仅在未处理异常时中断。如果检查了任何异常，请尝试取消选中它们并查看是否仍然存在。

# c++ - xcode 4.5 中出现“iostream”文件未找到错误？

> ID：14376525
> 
> 赞同：12
> 
> 时间：2013-01-17T10:04:25.140
> 
> 标签：c++, iphone, ios, xcode

我正在练习 C++。我只是在 XCode 中添加 c++ 文件并在其中编写一些字符串拆分功能。之后，我在我的 AppDelegate 文件中包含该 C++ 文件，即 .mm 文件的扩展名，并从 C++ 类的 .h 文件中调用函数。但是我在红线发现了一个静态错误，即**“iostream”文件未找到**。我使用了最新的 XCode 版本 4.5 和 iOS 6.0。请查看我的错误或 xcode 屏幕的屏幕截图。 ![在此处输入图像描述](../Images/c131b8b1bcd206a6a8d7df8c920fa902.png)

我试图根据给定的[链接](http://www.mytechspace.com/2012/03/solved-integrate-c-code-with-objective.html)信息修改我的代码，但没有成功。:(

我也关注了这个[链接](https://stackoverflow.com/questions/6913637/xcode-4-2-c0x-libc-cannot-find-iostream)信息，但结果是一样的。

谢谢 iHungry

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T10:33:41.333

`Objective C`具有`.m`其实现文件的扩展名。如果你想使用`C++`它`Objective C`应该有`.mm`扩展。您可以`C++`在文件中包含头`.mm`文件。但是如果你想在你的文件中包含你的`C++`头文件`.h`，你需要检查`macro`一下，比如

```
#ifdef __cplus
#include <iostream>
#endif 
```

但是，我没有通过`C++`在文件中包含头文件来尝试任何功能`.h`。希望能帮助到你。

# c - 如何使用 C 检测系统是否要在 Linux 中待机

> ID：14376534
> 
> 赞同：6
> 
> 时间：2013-01-17T10:04:48.110
> 
> 标签：c, linux

我想知道如何使用 C 在 Linux 中检测系统是否进入待机模式。我`WM_POWERBROADCAST`在 windows 中找到了一条为此目的调用的消息，它在进入睡眠模式之前发送了此消息。

对于 Linux，C 中是否有任何替代方案？

我听说 DBus 可以用于相同的目的，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T07:50:08.093

最后我找到了解决方案。

我们可以为此使用 pm 实用程序。

如果您将任何 shell 脚本放在 /etc/pm/sleep.d 文件夹中，它将在系统进入睡眠之前和系统恢复之后自动执行。

内容会像

```
 #!/bin/bash
case $1 in
suspend)
    #suspending to RAM
    /home/harikrishnan/Desktop/sleepd Sleeping
    ;;
resume)
    #resume from suspend
    sleep 3
    /home/harikrishnan/Desktop/sleepd Woken
    ;;
esac 

```

在这里它将使用参数执行 /home/harikrishnan/Desktop/sleepd 程序

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:28:51.103

AFAIK 在 Linux 中没有这样的信号，但你可以试试

a) `acpid`daemon hooks，如果它存在，acpid 配置通常在`/etc/acpi`
b) [DBus daemon hooks](https://serverfault.com/questions/191381/what-dbus-signal-is-sent-on-system-suspend)，如果它存在于系统上
c) 读取`acpid`源代码以查看它如何获取信号
d) 编写您自己的内核模块

# php - 时间戳数据类型不能存储某些日期格式

> ID：14376535
> 
> 赞同：0
> 
> 时间：2013-01-17T10:04:48.503
> 
> 标签：php, mysql

时间戳数据类型不能采用或存储这种日期格式“2013 年 1 月 17 日星期四上午 11:47:49”，但这是我想存储在数据库中的格式，因为客户喜欢这种格式。我可以使用 varchar 或 text 存储它，但这些数据类型不允许我使用 TIMESTAMPDIFF 函数进行几分钟的计算。请提供任何帮助：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:10:42.097

如果您只想要该格式，请将字段的数据类型更改为 VARCHAR，但最好将其存储为 DATETIME/TIMESTAMP，然后在显示时您可以使用 php 的 DATE 格式以您想要的方式显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:42:35.787

您应该按原样存储 timastamp 值 - TIMESTAMP 格式。

使用[DATE_FORMAT](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)函数来格式化值，例如 -

```
SELECT DATE_FORMAT(column1, '%W %M %Y') FROM table1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:07:41.600

存储的格式是真实的，您要显示的格式必须从那里计算。

这是一个小示例：[http ://www.plus2net.com/php_tutorial/php_date_time.php](http://www.plus2net.com/php_tutorial/php_date_time.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:35:43.487

**您描述的存储问题可以通过使用 unix 时间戳 (INT)、ISO8601 (2013-01-17T19:47:49Z) 或 DATETIME（确保配置所有 UTC）而不是不运行就难以解码的长字符串来解决进入时区和 DST 问题。**

只有在界面中显示日期或时间戳时，才转换为您想要的任何时区和格式。如果唯一的界面是浏览器，只需使用 javascript 的 Date 对象转换为本地时间（以您喜欢的任何格式）。

MySQL 查询示例：

```
SELECT UNIX_TIMESTAMP(`datetime_stsuff`) FROM `whatever` LIMIT 1 
```

或者

```
SELECT `int_unixtimestamp_seconds` FROM `whatever` LIMIT 1 
```

Javascript 示例：

```
var objDateFromDatabase=new Date(<?php echo json_encode($nUnixTimestampFromDB);?>*1000); 
```

或者

```
//note that older browsers don't support the Z suffix ("Zulu time" (GMT or UTC)) so use +00:00 instead (2012-01-01T12:34:56+00:00).
var objDateFromDatabase=new Date(<?php echo json_encode($strISO8601TimestampFromDB);?>*1000); 
```

请参阅[MDN 日期对象文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，了解您可以使用哪些方法来格式化您的客户所需。不包含关键字 UTC 的方法返回值已经转换为浏览器的时区（操作系统配置的时区），因此您不必费心向用户询问他们的时区。

# android - 在显示时更改 Android ContextMenu 项目（ICS 之前）

> ID：14376536
> 
> 赞同：0
> 
> 时间：2013-01-17T10:04:53.963
> 
> 标签：android, android-2.3-gingerbread, android-contextmenu

我正在尝试将已显示的`ContextMenu`项目设置为不可见（ ）（在 期间将菜单的引用保存为成员）。`item.setVisible(false)``onCreateContextMenu()`

在 2.3 上执行此操作时出现异常：

`01-17 09:54:42.563: E/AndroidRuntime(2494): java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908823, class com.android.internal.app.AlertController$RecycleListView) with Adapter(class com.android.internal.view.menu.MenuBuilder$MenuAdapter)]`

当然，我所有的代码都在 UI 线程中运行。

我猜`ContextMenu`在 2.3 中是使用`ListView`相应的 `ListAdapter. 在 ICS 中，不会抛出此异常，并且该项目按照我的计划变得不可见。

有人知道如何在 2.3 上执行此操作吗？

一种解决方法是不模仿`ContextMenu`via `Dialog`，但我宁愿坚持`ContextMenu`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:59:31.173

您可以尝试通过以下方式获取菜单适配器：

public boolean onContextItemSelected(MenuItem item) { AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)item.getMenuInfo();

// ... 做一点事

```
 adapter.notifyDataSetChanged();
}
return super.onContextItemSelected(item); 
```

}

# iphone - 将 facebook 用户的显示图片与封面图片获取到 iphone

> ID：14376537
> 
> 赞同：0
> 
> 时间：2013-01-17T10:05:00.883
> 
> 标签：iphone, facebook, facebook-graph-api

我希望显示 facebook 用户的朋友的 dp 以及他们各自的封面图片。我仅通过以下代码成功获取 dp：

```
NSString *imgUrl = [NSString stringWithFormat:@"https://graph.facebook.com/%@/picture",[[data objectAtIndex:i ] objectForKey:@"id"]];
    NSData *mydata = [NSData dataWithContentsOfURL:[NSURL URLWithString:imgUrl]]; 
```

输出： ![在此处输入图像描述](../Images/b4d6b4ba06cd40a46a7e2ba28ea72e01.png)

但我希望有如下输出：[没有更新信息和活动日志按钮]

![在此处输入图像描述](../Images/96b99ed4490ac10b1ce0a183ce66be9b.png)

我该怎么做呢？我的意思是我需要更改 url 以实现所需的 putput？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:03:20.940

调用网址[https://graph.facebook.com/kingofbliss?fields=cover](https://graph.facebook.com/kingofbliss?fields=cover)

*其中 kingofbliss 是我的用户 ID ;)*

将返回数据，

```
{
   "cover": {
      "id": "379218405451233",
      "source": "http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/s720x720/579338_379218405451233_1152151936_n.jpg",
      "offset_y": 0
   },
   "id": "100000892310267"
} 
```

来源有封面图片的[网址](http://sphotos-b.ak.fbcdn.net/hphotos-ak-ash3/s720x720/579338_379218405451233_1152151936_n.jpg)。然后继续……！！！

# linux - 查看 Linux 内核配置选项

> ID：14376540
> 
> 赞同：16
> 
> 时间：2013-01-17T10:05:12.920
> 
> 标签：linux, kernel, config, fedora

是否可以查看内核编译期间使用了哪些标志？2.6.42.12-1 软呢帽 15。

我确定我以前做过，但我在谷歌上找不到任何东西（即我寻找错误的东西：/）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-17T15:51:04.017

当前内核配置：

```
cat /boot/config-`uname -r` 
```

其他安装的内核：

```
ls /boot/config-* 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-01-17T10:15:23.330

```
cat /proc/config.gz | gunzip 
```

如果内核是用相应的选项编译的（通常是这样）

# css - Firefox 中边界边之间的阴影和失真

> ID：14376543
> 
> 赞同：2
> 
> 时间：2013-01-17T10:05:20.653
> 
> 标签：css, firefox, css-selectors, border

我一直在使用 CSS 边框属性以及伪元素 :before 和 :after 来使我的元素具有几何形状的外观，一个简单的示例如下所示：

HTML：

```
<div id="shapeOne"></div> 
```

CSS：

```
#shapeOne
{
   height:0px;
   width:0px;
   margin:20px;
   border-style:solid;
   border-width:200px 200px 200px 200px;
   border-color:transparent #f00 #0f0 transparent;  
} 
```

因此，通过使两个边框透明，并赋予两种颜色，我有效地制作了一个三角形。

你可以在这里看到一个例子：http: [//jsfiddle.net/VTzS9/1/](http://jsfiddle.net/VTzS9/1/)

这似乎在除 Firefox 之外的所有浏览器中都能正常显示（特别是 PC 版本，因为它在 Mac 上的 Firefox 上看起来很正常）。问题是 Firefox 似乎在边框边之间放置了阴影/扭曲效果，并在边框中创建了一个“扭结”（空元素所在的位置）——随着不同边框边之间大小差异的增加，这种效果也会增加- 因此，在边框尺寸相等的情况下（我在上面的链接中的第一个形状），这个问题几乎没有（但仍然）明显，但是随着边框尺寸之间的差异增加（我的链接中的形状 2 和 3），效果变得更加明显。

有谁知道是什么原因造成的，如果我能做些什么来消除这种影响？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:30:08.430

利用

```
rgba(255,255,255,0) 
```

代替

```
transparent 
```

.

这将使它也可以在 Firefox 上运行。

> 演示：http: [//jsfiddle.net/SkXXy/](http://jsfiddle.net/SkXXy/)

PS：这里的同样问题：[奇怪的深色边框：在 Firefox 中的 css 箭头之后](https://stackoverflow.com/questions/12956228/weird-dark-border-after-css-arrow-in-firefox)

# windows - 揭秘 Windbd 内存使用标签：“Private Working Set”很大，而内存被标记为 RegionUsageFree

> ID：14376550
> 
> 赞同：1
> 
> 时间：2013-01-17T10:05:32.147
> 
> 标签：windows, memory, memory-leaks, windbg

运行后，我看到我的应用程序在 TaskMgr 中占用了 3.5Gb ![任务管理器](../Images/cd82b20c59978273f7f16be00e9423aa.png)

我在 Windbg 中看到的有点令人困惑：

```
0:022> !address -summary
 ProcessParametrs 0000000001b7ed70 in range 0000000001b7e000 0000000001b80000
 Environment 0000000001c0c970 in range 0000000001c0c000 0000000001c0e000

-------------------- Usage SUMMARY --------------------------
    TotSize (      KB)   Pct(Tots) Pct(Busy)   Usage
   1037fe000 ( 4251640) : 00.05%    87.22%    : RegionUsageIsVAD
   7fed67a5000 (8585059988) : 99.94%    00.00%    : RegionUsageFree
    7dd6000 (  128856) : 00.00%    02.64%    : RegionUsageImage
    1900000 (   25600) : 00.00%    00.53%    : RegionUsageStack
      32000 (     200) : 00.00%    00.00%    : RegionUsageTeb
     950000 (    9536) : 00.00%    00.20%    : RegionUsageHeap
   1bff4000 (  458704) : 00.01%    09.41%    : RegionUsagePageHeap
       1000 (       4) : 00.00%    00.00%    : RegionUsagePeb
          0 (       0) : 00.00%    00.00%    : RegionUsageProcessParametrs
          0 (       0) : 00.00%    00.00%    : RegionUsageEnvironmentBlock
       Tot: 7ffffff0000 (8589934528 KB) Busy: 000000012984b000 (4874540 KB)

-------------------- Type SUMMARY --------------------------
    TotSize (      KB)   Pct(Tots)  Usage
   7fed67b5000 (8585060052) : 99.94%   : <free>
    7dd7000 (  128860) : 00.00%   : MEM_IMAGE
    2e76000 (   47576) : 00.00%   : MEM_MAPPED
   11ebee000 ( 4698040) : 00.05%   : MEM_PRIVATE

-------------------- State SUMMARY --------------------------
    TotSize (      KB)   Pct(Tots)  Usage
   df283000 ( 3656204) : 00.04%   : MEM_COMMIT
   7fed67b5000 (8585060052) : 99.94%   : MEM_FREE
   4a5b8000 ( 1218272) : 00.01%   : MEM_RESERVE 
```

那么，99.94% 的内存是 RegionUsageFree 吗？

有人可以揭开上述条款的神秘面纱吗？`RegionUsageFree`意味着内存已被`free`删除并且可以使用？什么是`Private Working Set`手段？

如果免费，为什么显示在`Private Working Set`？我应该担心这个吗？该内存可以（重新）使用吗？我在 64 位，OOM 在这里不是问题，在 32 上可能是？我怎样才能减少这个`Private Working Set`？

PS：堆看起来不错：

```
0:022> !heap -s
LFH Key                   : 0x0000005b29625009
Termination on corruption : ENABLED
          Heap     Flags   Reserv  Commit  Virt   Free  List   UCR  Virt  Lock  Fast 
                            (k)     (k)    (k)     (k) length      blocks cont. heap 
-------------------------------------------------------------------------------------
00000000000e0000 00000002    1024      8   1024      3     1     1    0      0      
0000000003c20000 00001002     512      8    512      3     1     1    0      0      
0000000004d40000 00001002     512      8    512      3     1     1    0      0      
00000000001e0000 00008000      64      8     64      5     1     1    0      0      
00000000070e0000 00001002      64      8     64      3     1     1    0      0      
0000000004d30000 00001002      64      8     64      3     1     1    0      0      
0000000007010000 00001002     512      8    512      3     1     1    0      0      
0000000004d00000 00001002      64      8     64      3     1     1    0      0      
000000000c8b0000 00001002     512      8    512      3     1     1    0      0      
00000000070b0000 00001002      64      8     64      3     1     1    0      0      
000000000ef00000 00001002      64     32     64     27     1     1    0      0      
0000000012180000 00001002     512      8    512      3     1     1    0      0      
000000000f630000 00001002     512      8    512      3     1     1    0      0      
0000000010490000 00001002      64      8     64      3     1     1    0      0      
00000000105b0000 00001002     512      8    512      3     1     1    0      0      
0000000012170000 00001002      64      8     64      3     1     1    0      0      
0000000039860000 00001002     512      8    512      3     1     1    0      0      
00000000397e0000 00001003     512      8    512      5     1     1    0    bad      
000000003ca30000 00001003     512      8    512      5     1     1    0    bad      
000000003dbc0000 00001003     512      8    512      5     1     1    0    bad      
0000000010900000 00001003     512      8    512      5     1     1    0    bad      
0000000012090000 00001003     512      8    512      5     1     1    0    bad      
0000000039730000 00001003     512      8    512      5     1     1    0    bad      
0000000010aa0000 00001003     512      8    512      5     1     1    0    bad      
00000000136b0000 00001002      64      8     64      3     1     1    0      0      
000000000eff0000 00001002      64      8     64      3     1     1    0      0      
0000000013590000 00001002      64      8     64      3     1     1    0      0      
0000000013850000 00001002      64      8     64      3     1     1    0      0      
000000000fd70000 00001002      64      8     64      3     1     1    0      0      
------------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T13:34:55.740

TaskMgr 和 WinDbg 都显示正确的数据。在[如何解释 Windows 任务管理器？](https://stackoverflow.com/q/1170654/1888362) 99.94% 的内存是 RegionUsageFree，因为 x64 在用户模式下有 8TB 大小的虚拟地址空间，几乎所有的内存都是免费的并且可以使用。您不必减少工作集。Windows 为您修剪工作集。（尽管您可以在 View 菜单中使用[VMMap](http://technet.microsoft.com/en-us/sysinternals/dd535533.aspx) Empty Working Set 功能）有关更多信息，请参阅 M. Russinovich 博客[Pushing the Limits of Windows: Virtual Memory](http://blogs.technet.com/b/markrussinovich/archive/2008/11/17/3155406.aspx)。

# mysql - BLOB 与 LongBLOB 性能

> ID：14376557
> 
> 赞同：9
> 
> 时间：2013-01-17T10:05:50.273
> 
> 标签：mysql, hibernate, blob

`BLOB`mysql和 a之间的性能有什么区别`LongBLOB`？

有一些需要注意的问题吗？

# android - Android：您的手机上未安装应用程序（小部件）

> ID：14376562
> 
> 赞同：1
> 
> 时间：2013-01-17T10:06:02.283
> 
> 标签：android, widget

当我尝试将应用程序中的小部件创建到主屏幕上时，出现此错误。这是我启动 Activity 的启动类的清单文件：

溅

```
<activity
    android:name="com.test.me.Splash"
    android:label="@string/app_name"
    android:screenOrientation="portrait" >
    <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

小部件

```
<receiver
    android:name=".Widget"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
    </intent-filter>
    <meta-data android:name= "android.appwidget.provider"
        android:resource="@xml/widget_stuff" />
</receiver>

 <activity
    android:name=".WidgetConfig"
    android:label="@string/app_name"
    android:exported="false">
    <intent-filter>
        <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE" />
    </intent-filter>
</activity> 
```

如果我不把 Activity 放在那里，小部件将不会显示在小部件列表中。我已经尝试重新安装 JDK，但我仍然无法弄清楚我在做什么，有人知道如何解决这个问题吗？

编辑：通过删除解决它，`android:exported="false"`因为它不允许外部使用的活动

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:27:16.127

[Android 主屏幕小部件文档](https://stackoverflow.com/questions/2858648/android-home-screen-widget-documentation)

[http://www.vogella.com/articles/AndroidWidgets/article.html](http://www.vogella.com/articles/AndroidWidgets/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:10:36.107

尝试像这样为您的 Widget 添加一些 xml 布局。

```
 <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_info" /> 
```

看看这个[链接](http://www.vogella.com/articles/AndroidWidgets/article.html)

# .net - 清除组合框数据源项

> ID：14376577
> 
> 赞同：6
> 
> 时间：2013-01-17T10:06:43.430
> 
> 标签：.net, winforms, compact-framework

组合框数据源已分配给

```
cmbCombobox.DataSource = myCollection 
```

其中 myCollection 的类型为 MyCollection: List

如何清除组合框中的项目？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-19T20:58:09.597

当您对控件进行数据绑定时，它将与该集合同步。为了清除 ComboBox 中的项目，请将它的 DataSource 设置为 null。

```
cmbComboBox.DataSource = null; 
```

如果您的组合框**不是**数据绑定的（没有数据源），那么您可以这样做

```
cmbComboBox.Items.Clear(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-15T16:37:11.583

[http://support.microsoft.com/kb/327895](http://support.microsoft.com/kb/327895)

```
Me.ListBox1.DataSource = Nothing 
```

这对我有用。VB 错误地建议使用 DBNull（它会崩溃）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-16T20:16:45.437

以下是它对我的工作方式：

如果您的组合框有一个数据源，那么只需分配一个空数据源就足够了。但是，很多时候您必须手动清除绑定：

> comboBoxAssignee.DataSource = null;
> 
> comboBoxAssignee.DataBindings.Clear();

如果没有数据源，那么您只需清除项目：

> comboBoxAssignee.Items.Clear();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:18:01.607

在 asp.net 中你可以这样做：

```
cbMyComboBox.Items.Clear(); 
```

也许它适用于winforms）不确定

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-21T13:47:59.027

我正在使用 Visual Studio 2012 和 .net v4.5 并在 VB 中创建 winforms。以下不起作用：

```
me.combobox.Datasource = null
me.combobox.Items.clear() 
```

使用 Null 甚至不是数据源的选项，当我尝试 items.clear(); 时出现以下错误。“设置 DataSource 属性时无法修改项目集合。”

以下确实有效，我已在应用程序的许多升级中使用它。

```
Me.cmboFromLoc.DataSource = Nothing 
```

# php - 以非管理员身份将照片上传到 Facebook 页面

> ID：14376581
> 
> 赞同：0
> 
> 时间：2013-01-17T10:06:50.403
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk, facebook-apps

我一直在努力寻找一种方法来做到这一点。可能这是不可能的，但我没有找到任何资源说这是不可能的。所以我想在这里发帖。

我正在开发一个 Facebook 应用程序，它具有照片上传功能。我想做的是，当用户上传图片时，图片会自动添加到我的粉丝页面。

所以我就这样经历。但只有管理员才有可能。（我硬编码管理员用户 ID）

```
$fanpageId  = 562**23; //My Facebook fanpage ID
$adminFbId  = 100***12; // facebook user ID of admin (Fanpage)
    try{              
         $pagesInfo = $facebook->api("/100***00/accounts");               
    }
catch (FacebookApiException $e){              
     echo $e;     
 }

     foreach($pagesInfo["data"] as $page) {
     if($page["id"] == $fanpageId) {
        $page_access_token = $page["access_token"];
        break;
    }
}

if( !empty($page_access_token) ) {
    $args = array(
        'access_token'  => $page_access_token,
        'message'       => "I'm a Page from test!"
    );
    $post_id = $facebook->api("/$fanpageId/feed","post",$args);
    // sucess...
} 
```

是否有任何可能的方式为应用程序授予页面管理员权限或强制 api 使用管理员访问令牌发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:30:51.650

`page access token`如果您希望您的**用户**在粉丝专页上发帖，为什么要使用?

简单地说，将`access_token`in`$args`替换为具有权限`access token`的用户。`publish_stream`

该帖子将**通过您的应用代表用户发布****在粉丝专页**上。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T05:43:48.010

非常感谢，我认为正在取得一些进展。我按照你说的做了，现在消息正在粉丝页面上发布。然后我尝试上传图片。这就是我所做的

```
$args = array(
        'access_token'  => $access_token,
    'image' => '@/my/upload/file/path/'.$fileName
    );

try{          
    $post_id = $facebook->api("/".$fanpageId."/photos","post",$args);             
}
catch (FacebookApiException $e){
    echo $e;              
} 
```

但它抛出一个异常：`OAuthException: An unknown error has occurred`。

我将用户权限设置为：`publish_stream,photo_upload,user_photos`**

# opencv - 包含不需要的点的轮廓近似

> ID：14376582
> 
> 赞同：6
> 
> 时间：2013-01-17T10:06:51.940
> 
> 标签：opencv, polygon, shapes, approximation

嗨，我有一个多边形问题。我不知道要找什么，所以我决定在这里问。下图显示了一个简单的形状。使用 OpenCV 的[findContours()](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)检测轮廓，并通过[CV_CHAIN_APPROX_TC89_KCOS](http://www-prima.inrialpes.fr/perso/Tran/IEEE-PAMI/1989/Teh89-PAMI.pdf)（对于那些想知道这是如何完成的人）算法进行近似，以便将一条线上的所有点汇总为一条线。所以无论如何，一些轮廓在形状中包含某种，我称之为噪声。下图显示了噪声的含义。红线是轮廓。（对不起没有ms的绘画技巧）

![在此处输入图像描述](../Images/50cfe9b499b7fdf73cd2e0d6b539b214.png)

我的目标是重新定义形状以近似形状，但忽略这种“噪音”。所以轮廓应该是这样的。蓝线显示校正后的轮廓。

![在此处输入图像描述](../Images/514ef23f6b45ee1ec3aa9c3af2958e02.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:47:10.030

1.  尝试使用...检测角点。`cvGoodFeatuersToTrack()`但是有一个标准，角点应该分开很远的距离...如果角点形成一个簇，则丢弃它们。
2.  从轮廓中的点列表中...选择具有（最高 x，最高 y）、（最高 x，最低 y）、（最低 x，最高 y）和（最低 x，最低 y）的点。 ..现在加入这四点...
3.  如果角落本身有“噪音”，请尝试使用霍夫变换检测图像中的直线......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:24:06.010

我可以提出另一种方法：

1）您可以使用[霍夫线变换](http://docs.opencv.org/doc/tutorials/imgproc/imgtrans/hough_lines/hough_lines.html)来检测图像上的线条（在使用 Canny 检测轮廓之前）。您不能通过在 HoughLinesP 方法中使用相当大的阈值（“检测”一条线的最小交叉点数）来考虑小线。

2) 找到所有线后，您可以找到它们的交点，如[@DanielHsH](https://stackoverflow.com/questions/14042397/i-am-struck-at-finding-the-point-of-intersection-of-most-lines-in-an-image)所述。因此，您将能够找到所有角落。

# javascript - jquery点击链接

> ID：14376586
> 
> 赞同：0
> 
> 时间：2013-01-17T10:06:58.463
> 
> 标签：javascript, jquery, click, href

我有一个元素，该元素具有调用 javascript 函数的 href 属性。该元素分为两类：( `class="icon32 icon-close"`)。此链接在具有类的 div 上表示为“X”，`.modal`用于关闭`div`. 我的问题是，当用户按下“esc”键时，我可以关闭 div，因此调用链接。我尝试了下面的代码，但它不起作用，尽管出现了警报：

```
$(document).keypress(function (e) {
    if (e.keyCode == 27) {
        alert('esc was pressed');

        $('.modal>.icon32').click();
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:20:31.843

您应该调用本**机 DOM 元素**`.click()`的事件而不是 jQuery事件。为此，请使用以下代码：**`.click()`**

 **```
$('.modal>.icon32')[0].click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:11:05.247

您需要使用 keyup 或 keydown 作为转义键，并`e.which`在 jQuery 中进行了标准化：

```
$(function() {
    $(document).on('keyup', function (e) {
        if (e.which == 27) {
            $('.modal > .icon32').trigger('click'); //NOTE: direct child selector
        }
    });
}); 
```

[**小提琴**](http://jsfiddle.net/adeneo/TVdN4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:11:18.663

哪个不起作用 - 按下 esc 键（在这种情况下尝试使用 e.which 而不是 keyCode），或者实际的选择器来调用点击？（在这种情况下，通过给元素一个明确的 ID 来测试您的选择器是否错误，并尝试以这种方式选择它以验证它只是您的选择器）。

另外，为什么你需要“点击”“X”->你不能只“隐藏（）”模态 div 元素吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:18:25.507

你也可以这样做：

```
$(document).keyup(function (e) {
    if (e.keyCode == 27) {
        // As soon as he escape is clicked you do..
        $('.icon32.icon-close').click();
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:25:24.727

如果您使用的是 jQuery 模态对话框，请使用`closeOnEscape: false`如下选项：

```
$("#div").dialog({
            modal: true,
            resizable: false,
            closeOnEscape: false,
                buttons: {
                    Ok: function () {
                       //do something
                    }
                    Cancel: function(){
                       //do something
                    }
                }
            }); 
```**

# sql - 如何在查询的 AS 部分中包含函数？

> ID：14376591
> 
> 赞同：1
> 
> 时间：2013-01-17T10:07:42.253
> 
> 标签：sql, postgresql, plpgsql, crosstab

我查询 Postgres 数据库以获取过去 4 年的统计数据。
但是，我无法找出正确的语法来用`AS`函数替换查询部分中的硬编码日期。

说：`date_part('year',current_date)-1`代替`"2012"`

```
SELECT * FROM crosstab('
SELECT client,date_part (''year'',date) as SalesDate
       ,Sum(total)::integer AS Synthese
FROM statistic
WHERE date_part(''year'',date)>date_part(''year'',current_date)-5
AND date_part(''year'',date)<date_part(''year'',current_date)
GROUP BY client,SalesDate
ORDER BY 1,2',
$$VALUES 
(date_part('year',current_date)-4),
(date_part('year',current_date)-3),
(date_part('year',current_date)-2),
(date_part('year',current_date)-1)$$)
AS ( client text, "2009" text, "2010" text , "2011" text, "2012" text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T03:54:55.223

### 回答

SQL 的一个原则：您可以动态提供***值***，但***标识符***是静态的。

外部调用是一个基本的 SQL 语句，列定义列表由标识符组成，而不是值。（这就是为什么你被迫双引号以数字开头的非法标识符。）因此，你不能在这个地方使用函数调用。只是不可能。

### 可能的解决方法

有一些棘手的方法可以解决这个问题。您*可以*创建一个 plpgsql 函数，该函数返回一个[**多态复合类型**](http://www.postgresql.org/docs/current/interactive/extend-type-system.html#EXTEND-TYPES-POLYMORPHIC)并提交一个定义良好的复合类型的参数，该参数还带有列名。但这是非常先进的东西。为此，您需要跟上 plpgsql 的速度。

考虑一下我在这个相关问题下的综合回答：
[重构 PL/pgSQL 函数以返回各种 SELECT 查询的输出](https://stackoverflow.com/questions/11740256/refactor-a-pl-pgsql-function-to-return-the-output-of-various-select-queries)
答案的后半部分是给你的。

由于您需要一个定义良好的复合类型，因此您必须在以这种方式调用函数之前创建一个类型。或者只是创建一个临时表（自动提供类型）。您可以通过`DO`使用动态 SQL 从当前日期派生列名的语句自动执行此操作……我从未说过这很简单，但它是可能的。

### 基本查询

同时，您的`crosstab()`查询可以改进：

```
SELECT * FROM crosstab(
    $$
    SELECT client
          ,date_part ('year', date) AS salesdate
          ,sum(total)::int AS synthese
    FROM   statistic
    WHERE  date >= date_trunc('year', now()) - interval '5y'
    AND    date <  date_trunc('year', now())
    GROUP  BY 1,2
    ORDER  BY 1,2
    $$

    ,$$VALUES 
         (date_part('year', now()) - 4)
        ,(date_part('year', now()) - 3)
        ,(date_part('year', now()) - 2)
        ,(date_part('year', now()) - 1)
    $$
    )
AS  (client text
     ,"2009" text
     ,"2010" text
     ,"2011" text
     ,"2012" text); 
```

*   使用美元报价来避免引用地狱。
*   重写您的`WHERE`条件，以便它们可以使用索引。
    [这个密切相关的答案中的详细解释。](https://stackoverflow.com/a/14285655/939860)

剩下的就是品味和风格的问题了。

# c# - 使用 Visual Studio 安装项目在安装过程中删除特定文件

> ID：14376593
> 
> 赞同：0
> 
> 时间：2013-01-17T10:07:43.377
> 
> 标签：c#, visual-studio-2010, installation, setup-project

我有这个问题。我为我的 c# 解决方案构建了一个安装程序，它将与其他安装文件夹和需要复制到已安装文件夹的文件一起放置在一个文件夹中。这很容易，我只需通过在我的 Visual Studio 设置项目中指定属性，将它们复制到使用我想要的文件夹结构创建的文件夹中。

现在，我还希望当我运行我创建的“setup.exe”时，c:/ 目录中的某些文件也会从我正在运行安装程序的特定机器上删除（如果它们存在的话）。

我曾尝试在我的安装程序项目的属性窗口下的 PostBuildEvent 和 PreBuildEvent 中提供命令行参数，但它不起作用。它在我构建项目时删除这些文件，而不是我希望在运行项目构建后创建的安装程序文件（Setup.exe）时删除这些文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T15:53:18.960

您可以在自定义操作 dll 中编写代码，它可以为您执行此操作。

请记住，尽管您可能会遇到权限问题，具体取决于运行安装程序的帐户所拥有的权限。

MSDN 有一个很好的[示例，说明如何创建自定义操作 dll](http://msdn.microsoft.com/en-gb/library/vstudio/d9k65z2d%28v=vs.100%29.aspx)。听起来您可能想要：

*   [将安装路径传递到您的自定义操作 dll](http://msdn.microsoft.com/en-us/library/9cdb5eda%28v=vs.100%29.aspx)中。
*   在`Install`重载中，将路径写入 stateSaver 字典
*   在`Uninstall`重载中，从 stateSaver 字典中读取路径
*   你现在有了安装文件夹的路径，删除吧！

（我在这里假设您想在卸载时摆脱这些文件）

# javascript - 抑制未定义数组属性的 javascript 错误

> ID：14376595
> 
> 赞同：0
> 
> 时间：2013-01-17T10:07:49.443
> 
> 标签：javascript, suppress

我有一个用 javascript 构建的表单，我想用它来添加用户和更新用户。

该表单包含一些输入元素，如下所示。当我获取用户数据以构建用于更新的表单时，此方法有效，但对于添加新用户，此属性在数组中不存在，因此脚本失败并按预期停止正确运行。

问题是，抑制这个错误的最短方法是什么？像@$params['user_email'] 这样的 php。

*   我知道尝试，缓存
*   我知道抑制窗口对象上的所有错误。
*   类型，未定义等

我只是在寻找最短的方法来执行此操作，而无需添加多行代码来验证 params 数组中的每个属性。

```
<input name="user_email" type="text" value="'+params['user_email']+'"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:18:56.730

永远不要抑制错误。这是一个非常坏的习惯，迟早会给你带来严重的头痛。始终进行适当的检查。（如下所示）

```
 // if available           use it            otherwise echo empty string
value="'+(params['user_email'] ? params['user_email'] : '')+'" 
```

# sql-server-2008 - 如何找到最后一个孩子？

> ID：14376603
> 
> 赞同：1
> 
> 时间：2013-01-17T10:08:04.547
> 
> 标签：sql-server-2008

我在 SQL Server 中有下表

```
 (id,name,parentId)
    (1,nilesh,NULL)
    (2,nikhil,1)    
    (3,nitin ,2)  
    (4,Ruchi,3)

    (5,xx,NULL)
    (6,YY,5)
    (7,ZZ,6) 
```

我想找到每个组中的最后一个孩子

```
result: (4,Ruchi,3),(7,ZZ,6) 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:18:22.707

```
SELECT  *
FROM    mytable m
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    mytable mc
        WHERE   mc.parentId = m.id
        ) 
```

检查：

```
WITH    mytable AS
        (
        SELECT  *
        FROM    (
                VALUES
                (1,'nilesh',NULL),
                (2,'nikhil',1),   
                (3,'nitin' ,2),  
                (4,'Ruchi',3),
                (5,'xx',NULL),
                (6,'YY',5),
                (7,'ZZ',6)
                ) q (id, name, parentId)
        )
SELECT  *
FROM    mytable m
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    mytable mc
        WHERE   mc.parentId = m.id
        )

---

4   Ruchi   3
7   ZZ  6 
```

# vb.net - 电脑关机事件？VB.NET

> ID：14376605
> 
> 赞同：5
> 
> 时间：2013-01-17T10:08:14.263
> 
> 标签：vb.net, shutdown

> **可能重复：**
> [检测 Windows 关闭事件](https://stackoverflow.com/questions/3173825/detecting-windows-shutdown-event)

在 VB.NET 中是否有任何关于关闭的事件？我想在用户单击关闭计算机时执行语句，这可以在 vb.net 中完成吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T10:12:39.320

[来自这里](http://vbcity.com/forums/t/84431.aspx)的示例

```
Public Class Form1
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        AddHandler Microsoft.Win32.SystemEvents.SessionEnding, _
               AddressOf Handler_SessionEnding
    End Sub

    Public Sub Handler_SessionEnding(ByVal sender As Object, _
               ByVal e As Microsoft.Win32.SessionEndingEventArgs)
        If e.Reason = Microsoft.Win32.SessionEndReasons.Logoff Then
            MessageBox.Show("User is logging off")
        ElseIf e.Reason = Microsoft.Win32.SessionEndReasons.SystemShutdown Then
            MessageBox.Show("System is shutting down")
        End If
    End Sub
End Class 
```

# java - 如何忽略 apache 的 DOMParser 中的 DTD 验证？

> ID：14376608
> 
> 赞同：1
> 
> 时间：2013-01-17T10:08:16.283
> 
> 标签：java, xml, dom, xerces

使用 apaches DOMParser`(org.apache.xerces.parsers.DOMParser)`实现，我们可以通过使用以下特性来抑制 DTD 验证：

```
parser.setFeature("http://apache.org/xml/features/nonvalidating/load-external-dtd", false); 
```

但这将从 xml 本身中删除 DTD 声明。如果以字符串格式打印 xml，您将看到 XML 文件中的原始 DTD 声明丢失。有什么办法可以解决这个问题？甚至是这样的： 1\. 加载文档。2\. 提取 dtd 声明。3\. 禁止 dtd 验证（删除 DTD 声明）。4\. 解析和更新文档。5.再次添加DTD声明。

# mysql - 在mysql查询中的case语句中出现语法错误

> ID：14376610
> 
> 赞同：1
> 
> 时间：2013-01-17T10:08:20.880
> 
> 标签：mysql

我在 mysql 中的 case 语句中遇到语法错误。1064-您的 sql 语句中有错误。

```
insert into
abc_table(release_date,title,detail,num)  
select model1.release_date,model1.title,model1.detail,model1.num
CASE 
WHEN model1.num= 0 THEN 3
WHEN model1.num= 1 THEN 1
WHEN model1.num= 2 THEN 2
END AS model1.num
from def_table  model1 
```

这个语法在mysql中是否正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:10:11.207

您有两列`model1.num`：

```
insert into abc_table(release_date,title,detail,num)  
select model1.release_date,
   model1.title,
   model1.detail,
   model1.num -- <-- extra
   CASE 
      WHEN model1.num= 0 THEN 3
      WHEN model1.num= 1 THEN 1
      WHEN model1.num= 2 THEN 2
      END AS num
from def_table  model1 
```

您的代码应该是：

```
insert into abc_table(release_date,title,detail,num)  
select model1.release_date,
   model1.title,
   model1.detail,
   CASE 
      WHEN model1.num= 0 THEN 3
      WHEN model1.num= 1 THEN 1
      WHEN model1.num= 2 THEN 2
      END AS num
from def_table  model1 
```

*注意：*有时，格式化您的代码将有助于发现这些错误。当所有列都在一行中时，可能很难看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:16:28.587

```
insert into abc_table(release_date,title,detail,num)  
select m.release_date
     , m.title
     , m.detail
     , CASE WHEN m.num = 0 THEN 3
            WHEN m.num= 1 THEN 1
            WHEN m.num= 2 THEN 2
        END num
  FROM def_table m; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:11:09.403

您在此选择语句中有一个额外的列..

```
select model1.release_date,model1.title,model1.detail,model1.num 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:09:55.110

尝试这个，

你漏了一个逗号

```
insert into
abc_table(release_date,title,detail,num)  
select model1.release_date,model1.title,model1.detail,
CASE 
WHEN model1.num= 0 THEN 3
WHEN model1.num= 1 THEN 1
WHEN model1.num= 2 THEN 2
END AS model1.num
from def_table  model1 
```

# file-upload - 使用谷歌应用脚 本将 .txt 文件读取到数组

> ID：14376614
> 
> 赞同：0
> 
> 时间：2013-01-17T10:08:36.767
> 
> 标签：file-upload, google-apps-script

我尝试创建一个 Web 应用程序（在 google 网站上），它使用 google-apps-script 从标准 .txt 文件中读取数据。我成功使用了以下代码，它使用 FileUpload 小部件并希望我选择文件。

```
function doGet() {
  var app = UiApp.createApplication();

  var form = app.createFormPanel().setId('form').setEncoding('multipart/form-data');
  app.add(form);

  var formContent = app.createGrid().resize(2,2);
  form.add(formContent);

  formContent.setWidget(0, 0, app.createLabel('File:'));
  var fileUpload = app.createFileUpload().setName('thefile').setId('fileID');
  formContent.setWidget(0, 1, fileUpload);
  formContent.setWidget(1, 1, app.createSubmitButton('Submit'));

  return app;
}

function doPost(e) {
  var fileBlob = e.parameter.thefile;
  var app = UiApp.getActiveApplication();
  var metin = fileBlob.getDataAsString();
  var dataAsByte = fileBlob.getBytes();  
  var stringArray = metin.split('\n');

  return app;
} 
```

但是，我需要处理几个 .txt 文件并收集数据。因此，这个“文件上传小部件”不是我想要的。我想从我的本地磁盘中给出一个文件路径列表，并依次处理每个文件，其中路径由列表给出。

因此，使用文件路径填充 fileBlob 的方法将是我的答案！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:07:59.657

您可以将多个文件上传小部件添加到同一个表单。不幸的是，您无法上传整个路径。

# c# - smo 恢复数据库

> ID：14376615
> 
> 赞同：15
> 
> 时间：2013-01-17T10:08:41.773
> 
> 标签：c#, sql-server, sql-server-2012, smo

我使用 SQL Server SMO 将 .bak 还原到新数据库，但无法正常工作。

sql server 是 2012，smo 对象版本来自最新的 sdk 版本 11.0

文件 .bak 是使用 sql management studio 2012、同一本地 pc 和同一编码 pc 上创建的。

我得到的错误信息是：

> 服务器“SERVER”的恢复失败。

我的代码有什么问题？

```
string dbPath = Path.Combine(@"d:\my data", dbName + "_db" + ".mdf");
string logPath = Path.Combine(@"d:\my data", dbName + "_db" + "_Log.ldf");

Restore restore = new Restore();

BackupDeviceItem deviceItem = new BackupDeviceItem("d:\template.BAK", DeviceType.File);
restore.Devices.Add(deviceItem);
restore.Database = dbName + "_db";

RelocateFile relocateDataFile = new RelocateFile("Data", dbPath);
RelocateFile relocateLogFile = new RelocateFile("Log", logPath);

restore.RelocateFiles.Add(relocateDataFile);
restore.RelocateFiles.Add(relocateLogFile);

restore.Action = RestoreActionType.Database;
restore.ReplaceDatabase = true;
restore.SqlRestore(server); 
```

更新：我放弃了 SMO 解决方案，并尝试了

```
 using (SqlConnection connection = new SqlConnection("Data Source=server;user id=sa;password=xxxxx;"))
        {

            using (SqlCommand command = new SqlCommand(@"RESTORE DATABASE beauty01 FROM DISK = 'd:\template.bak' WITH RECOVERY, MOVE 'beauty1' TO 'D:\MyData\beauty01_Data.mdf', MOVE 'beauty1_log' TO 'd:\Mydata\beauty01_Log.ldf', REPLACE", connection))
            {
                connection.Open();
                // Add the parameters for the SelectCommand.

                command.CommandType = CommandType.Text;
                command.ExecuteNonQuery();
            }

        }  >> work good. 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-07-09T12:03:48.403

我成功地用来`SMO`恢复数据库。我会分享我的代码。希望能帮助到你。但是，此解决方案有一个警告，它认为您只有一个主数据文件。匹配日志和数据文件真的很棘手，而且在很多方面都可能出错。不管怎样，试着让我知道这有帮助。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.IO;
using System.Text;
using System.Threading;
using Microsoft.SqlServer.Management.Common;
using Microsoft.SqlServer.Management.Smo;
using Microsoft.Win32;

namespace DatabaseUtility
{
    public class BackupRestore
    {
        static Server srv;
        static ServerConnection conn;

        public static void BackupDatabase(string serverName, string databaseName, string filePath)
        {
            conn = new ServerConnection();
            conn.ServerInstance = serverName;
            srv = new Server(conn);

            try
            {
                Backup bkp = new Backup();

                bkp.Action = BackupActionType.Database;
                bkp.Database = databaseName;

                bkp.Devices.AddDevice(filePath, DeviceType.File);
                bkp.Incremental = false;

                bkp.SqlBackup(srv);

                conn.Disconnect();
                conn = null;
                srv = null;
            }

            catch (SmoException ex)
            {
                throw new SmoException(ex.Message, ex.InnerException);
            }
            catch (IOException ex)
            {
                throw new IOException(ex.Message, ex.InnerException);
            }
        }

        public static void RestoreDatabase(string serverName, string databaseName, string filePath)
        {

            conn = new ServerConnection();
            conn.ServerInstance = serverName;
            srv = new Server(conn);

            try
            {
                Restore res = new Restore();

                res.Devices.AddDevice(filePath, DeviceType.File);

                RelocateFile DataFile = new RelocateFile();
                string MDF = res.ReadFileList(srv).Rows[0][1].ToString();
                DataFile.LogicalFileName = res.ReadFileList(srv).Rows[0][0].ToString();
                DataFile.PhysicalFileName = srv.Databases[databaseName].FileGroups[0].Files[0].FileName;

                RelocateFile LogFile = new RelocateFile();
                string LDF = res.ReadFileList(srv).Rows[1][1].ToString();
                LogFile.LogicalFileName = res.ReadFileList(srv).Rows[1][0].ToString();
                LogFile.PhysicalFileName = srv.Databases[databaseName].LogFiles[0].FileName;

                res.RelocateFiles.Add(DataFile);
                res.RelocateFiles.Add(LogFile);

                res.Database = databaseName;
                res.NoRecovery = false;
                res.ReplaceDatabase = true;
                res.SqlRestore(srv);
                conn.Disconnect();
            }
            catch (SmoException ex)
            {
                throw new SmoException(ex.Message, ex.InnerException);
            }
            catch (IOException ex)
            {
                throw new IOException(ex.Message, ex.InnerException);
            }
        }

        public static Server Getdatabases(string serverName)
        {
            conn = new ServerConnection();
            conn.ServerInstance = serverName;

            srv = new Server(conn);
            conn.Disconnect();
            return srv;

        }
    }
} 
```

# performance - 出于性能原因，将 HttpSession 存储在 db 中

> ID：14376618
> 
> 赞同：0
> 
> 时间：2013-01-17T10:08:56.077
> 
> 标签：performance, nosql, httpsession

假设我们有一个面向性能的应用程序在集群中工作。它包含很多用户。众所周知，会话的复制很差，因此应用程序的可扩展性很差。当然最好的方法是将应用程序创建为无状态的。（节点之间没有序列化）但我的问题是：当我们决定将 HttpSession 保留在某些存储中时，例如 Redis 或 memcached ？

您认为将 HttpSession 保留在某个 nosql 实例中是个好主意吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:33:10.823

内存数据库有两个主要缺点：

1.  它们的容量仅限于服务器机器的 RAM（它们可以通过交换存储更多数据，但这几乎会破坏它们的目的）
2.  当他们因为某种原因宕机时，所有数据都会丢失

所以问题是：你的会话数据有多重要？当您丢失用户的会话数据时，要么是因为您必须删除它以便为新会话腾出空间，要么是因为您必须重新启动数据库服务器，这意味着什么？他们是否只需要重新登录，还是会丢失有价值的数据？

请注意，还有 memcacheDB，它的工作方式与 memcached 一样（字面意思！它被设计为用作替代品），但备份磁盘上的所有数据。当数据丢失不可接受时，这是 Memcached 的一个很好的替代方案。

# android - 在android中查看数据库

> ID：14376620
> 
> 赞同：-2
> 
> 时间：2013-01-17T10:09:05.563
> 
> 标签：android, database

是关于约会的。

我有 5 个页面一个接一个地链接。

在第 4 页，数据从用户在第 3 页给出的数据进入数据库。

在用户确认约会日期和时间之前，用户应以列表视图形式查看数据库...

这就是我编码的内容。你能帮我纠正一下吗？

我的基本适配器类：

```
public class viewlistadapter extends BaseAdapter 
{
SQLiteDatabase sdb;

private Context viewcontext;
ArrayList v1=new ArrayList();
ArrayList v2=new ArrayList();
ArrayList v3=new ArrayList();
ArrayList v4=new ArrayList();
ArrayList v5=new ArrayList();

int length;

public viewlistadapter(viewlist vl, ArrayList value12, ArrayList value22, ArrayList     value32, ArrayList value42, ArrayList value52)
{
    viewcontext=vl;
    v1=value12;
    v2=value22;
    v3=value32;
    v4=value42;
    v5=value52;
    length=v1.size();

}
public viewlistadapter(viewlist vl, String value12, String value22,
        String value32, String value42, String value52) 
    {
    // TODO Auto-generated constructor stub
}
public int getCount() 
    {
    // TODO Auto-generated method stub
    return length;
}

public Object getItem(int arg0) 
    {
    // TODO Auto-generated method stub
    return null;
}

public long getItemId(int position) 
    {
    // TODO Auto-generated method stub
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) 
    {
    // TODO Auto-generated method stub

    LinearLayout l=new LinearLayout(viewcontext);

    TextView tv1=new TextView(viewcontext);
    TextView tv2=new TextView(viewcontext);
    TextView tv3=new TextView(viewcontext);
    TextView tv4=new TextView(viewcontext);
    TextView tv5=new TextView(viewcontext);

    tv1.setText((String) v1.get(position));
    tv2.setText((String) v2.get(position));
    tv3.setText((String) v3.get(position));
    tv4.setText((String) v4.get(position));
    tv5.setText((String) v5.get(position));

    l.addView(tv1);
    l.addView(tv2);
    l.addView(tv3);
    l.addView(tv4);
    l.addView(tv5);

    return l;

}
} 
```

活动类是

```
public class viewlist extends Activity 
{
TextView viewtv1;
Button viewbutt;
ListView lv;
TextView statustv;
viewlistadapter vla;
SQLiteDatabase db=null;
SQLiteDatabase sdb;
final String path="/data/data/a.b.seventeenth/databases/";
final String dbname="checking2.db";

ArrayList value12=new ArrayList();
ArrayList value22=new ArrayList();
ArrayList value32=new ArrayList();
ArrayList value42=new ArrayList();
ArrayList value52=new ArrayList();

public void createdb()
{
    try
    {
        sdb=openOrCreateDatabase("checking2.db",Context.MODE_PRIVATE,   null);

    }
    catch (Exception e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
        Toast.makeText(getApplicationContext(), e.toString(), 5000).show();
    }

}

public void viewdb()
{
    try 
    {
        sdb=openOrCreateDatabase("checking2.db",Context.MODE_PRIVATE, null);
        lv=(ListView) findViewById(R.id.lv);        

        String res="";
        Cursor c=sdb.query("login",null, null, null, null, null, null);
        c.moveToFirst();
        while(!c.isAfterLast())
        {
            value12.add(c.getString(c.getColumnIndex("name")));
            value22.add(c.getString(c.getColumnIndex("date")));
            value32.add(c.getString(c.getColumnIndex("month")));
            value42.add(c.getString(c.getColumnIndex("hours")));
            value52.add(c.getString(c.getColumnIndex("minutes")));
            c.moveToNext();
            /*status=sdb.view("login", null, value12);
            return status;*/
            //long s=sdb.insertOrThrow("login", null, value12);             //long s= sdb.view("login", null, value12);
        }

        lv.setAdapter(new viewlistadapter(this,value12,value22,value32,value42,value52));

    } 
    catch (Exception e) 
    {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), e.toString(), 500000).show();
    }

}

    protected void onCreate(Bundle savedInstanceState) 
    {
    // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listviewform);

        viewbutt=(Button) findViewById(R.id.viewbutt);
        lv=(ListView) findViewById(R.id.lv);
        statustv=(TextView) findViewById(R.id.statustv);

        try 
        {
            sdb=SQLiteDatabase.openDatabase(path+dbname,null ,SQLiteDatabase.OPEN_READONLY);
        } 

        catch (Exception e) 
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    /*
        try {
            if(db==null)
            {

            statustv.setText("no one has booked the appointment for today!!");

            }
            else
            {
                viewdb();

            }
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            Toast.makeText(getApplicationContext(), e1.toString(), 500000).show();
        }
    */
        //statustv.setText(text, type)
    try {
        viewbutt.setOnClickListener(new OnClickListener() 
        {               
            public void onClick(View v) 
            {
                // TODO Auto-generated method stub
                try 
                {
                    Bundle b=viewlist.this.getIntent().getExtras();
                    String name=b.getString("name");
                    int date=b.getInt("date");
                    int month=b.getInt("month");
                    int hour=b.getInt("hour");
                    int minutes=b.getInt("minutes");
                    Intent i=new Intent(getApplicationContext(),register.class);

                    //Toast.makeText(getApplicationContext(), String.valueOf(date)+String.valueOf(hour)+String.valueOf(minutes), 5000).show();

                    i.putExtra("name",name);
                    /*a.putExtra("phone_no",phone_no);
                    a.putExtra("email", email);*/
                    i.putExtra("date", date);
                    i.putExtra("month", month);
                    i.putExtra("hour", hour);
                    i.putExtra("minutes", minutes);
                    i.putExtra("name", name);

                    startActivity(i);
                } catch (Exception e) 
                {
                    // TODO Auto-generated catch block
                    Toast.makeText(getApplicationContext(), e.toString(), 5000).show();
                }
            }
        });
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), e.toString(), 500000).show();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:36:53.243

首先我们可以试试这个。程序“sqlite browser”可以显示数据库中的数据。你可以在这里下载（http://sourceforge.net/projects/sqlitebrowser/）。它很容易使用。

2..打开cmd进入程序工具...

```
D:\Android Setup\android-sdk_r17-windows\android-sdk-windows\platform-tools>adb
shell
# cd data
cd data
# cd data
cd data
# cd com.maid.testnews(package name )
cd com.maid.testnews
# cd databases
cd databases
# sqlite3 Maidnews(Database name )
sqlite3 Maidnews
SQLite version 3.6.22
Enter ".help" for instructions
Enter SQL statements terminated with a ";"

sqlite> select * from maidtitle;(table name ) 
```

看到你的结果....

3\. 在 Eclipse 中查看 File Explorer 选项卡（靠近 Console 选项卡）。或查看菜单“窗口 -> 显示视图 -> 其他... -> 文件资源管理器”。应该运行模拟器。在文件资源管理器窗口中，转到文件夹“data/data/[your_package_name]/databases/”。在那里你可以找到你的数据库。您可以将其导出到您的计算机。在窗口的右上角有一个按钮“从设备中提取文件”。选择数据库，单击该按钮并在计算机上保存数据库。

# graph - 在有向加权图中找到平均权重最高的树

> ID：14376624
> 
> 赞同：4
> 
> 时间：2013-01-17T10:09:16.033
> 
> 标签：graph

我正在搜索以下问题的算法：给定一个有向加权图`G`，找到一棵树`T`，`G`使得 的平均权重`T`最大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T06:10:21.187

1.  Given a graph G

2.  Sort Edges in an ascending order (minimum weight first)

3.  Cut Top edge (one with smallest weight)

4.  Cut orphan vertices

5.  Is it a tree now ?

    *   Yes: go to step 6

    *   No: go to step 3

6.  Return G

# python - 递归删除所有空格（...的列表列表）

> ID：14376629
> 
> 赞同：2
> 
> 时间：2013-01-17T10:09:32.763
> 
> 标签：python, recursion, space

我正在尝试从作为列表列表列表的输入中删除所有空格...我不知道如何处理“其他：”

```
def removespace(lst):
   if type(lst) is str:
      return lst.replace(" ","")
   else:
      ????? 
```

*例子：*

```
lst = [ apple, pie ,    [sth, [banana     , asd, [    sdfdsf, [fgg]]]]] 
```

输出应该是：

```
lst2 = [apple,pie,[sth,[banana,asd,[sdfdsf,[fgg]]]]] 
```

如果 lst 包含整数或浮点数怎么办？我收到了整数错误。

示例输入：

```
 L = [['apple', '2 * core+1* sth'], ['pie', '1*apple+1*sugar+1*water'], ['water', 60]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:16:27.850

```
def removespace(a):
    if type(a) is str:
        return a.replace(" ", "")
    elif type(a) is list:
        return [removespace(x) for x in a]
    elif type(a) is set:
        return {removespace(x) for x in a}
    else:
        return a 
```

这是一个示例：

```
>>> removespace([["a ",["   "]],{"b ","c d"},"e f g"])
[['a', ['']], {'b', 'cd'}, 'efg'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:16:23.037

我建议遵循 EAFP 并捕获异常而不是使用`isinstance`. 此外，千万不要错过使函数更通用的机会：

```
def rreplace(it, old, new):
    try:
        return it.replace(old, new)
    except AttributeError:
        return [rreplace(x, old, new) for x in it] 
```

例子：

```
a = [" foo", ["    spam", "ham"], "  bar"]
print rreplace(a, " ", "") 
```

甚至更通用，尽管这可能对您的问题来说有点过头了：

```
def rapply(it, fun, *args, **kwargs):
    try:
        return fun(it, *args, **kwargs)
    except TypeError:
        return [rapply(x, fun, *args, **kwargs) for x in it]

a = [" foo", ["    spam", "ham"], "  bar"]
print rapply(a, str.replace, " ", "")     
print rapply(a, str.upper) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:11:50.317

```
def removespace(lst):
    if type(lst) is str:
        return lst.replace(" ","")
    else:
        return [removespace(elem) for elem in lst]

lst = [' apple', 'pie ', ['sth', ['banana', 'asd', [' sdfdsf', ['fgg']]]]] 
print removespace(lst) 
```

印刷

```
['apple', 'pie', ['sth', ['banana', 'asd', ['sdfdsf', ['fgg']]]]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:18:42.407

尽管您可以尝试递归解决方案，但您可以尝试使用 Python 提供的出色库，将格式良好的 Python 文字从字符串转换为 Python 文字。

*   只需将您的列表转换为字符串
*   删除任何必要的空格
*   然后使用[ast.literal_eval重新转换为递归列表结构](http://docs.python.org/2/library/ast.html#ast.literal_eval)

    ```
    >>> lst = [' apple', 'pie ', ['sth', ['banana', 'asd', [' sdfdsf', ['fgg']]]]]
    >>> import ast
    >>> ast.literal_eval(str(lst).translate(None,' '))
    ['apple', 'pie', ['sth', ['banana', 'asd', ['sdfdsf', ['fgg']]]]] 
    ```

# c# - sql查询中的多个SELECT命令

> ID：14376630
> 
> 赞同：0
> 
> 时间：2013-01-17T10:09:38.253
> 
> 标签：c#, .net, mysql, sql

我想在我的 sql 中检索这种表：

```
 Type     Qad (type count)     Correct(No. of item without error)     Accuracy(%)
   type 1        3                                 3                            100
   type2         6                                 3                             50 
```

我目前正在尝试使用此查询，但它有一个错误：

```
SELECT `type` AS 'ReturnType', COUNT(*) AS 'QAd',
(SELECT COUNT(*) FROM bartran WHERE QASample='2' AND QAErrorID='1' AND `type`=ReturnType AND TimefileDate BETWEEN '2012-01-01' AND '2012-12-31' AS 'Correct', 
(SELECT COUNT(*) FROM bartran WHERE QASample='2' AND QAErrorID='1' AND `type`=ReturnType AND TimefileDate BETWEEN '2012-01-01' AND '2012-12-31') / COUNT(*) * 100) AS 'Accuracy' 
FROM bartran WHERE QASample='2'
AND TimefileDate BETWEEN '2012-01-01' AND '2012-12-31'
GROUP BY TYPE; 
```

我目前是这个新手，希望有人能帮助我。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:13:37.623

您在查询中缺少括号**) ，正确的是：**

```
SELECT `type`  AS 'ReturnType', 
       Count(*)   AS 'QAd', 
       (SELECT Count(*) 
        FROM   bartran 
        WHERE  qasample = '2' 
               AND qaerrorid = '1' 
               AND `type` = returntype 
               AND timefiledate BETWEEN '2012-01-01' AND '2012-12-31') AS 
       'Correct', 
       (SELECT Count(*) 
        FROM   bartran 
        WHERE  qasample = '2' 
               AND qaerrorid = '1' 
               AND `type` = returntype 
               AND timefiledate BETWEEN '2012-01-01' AND '2012-12-31') / Count(* 
       ) * 100 AS 'Accuracy' 
FROM   bartran 
WHERE  qasample = '2' 
       AND timefiledate BETWEEN '2012-01-01' AND '2012-12-31' 
GROUP  BY type; 
```

更好的查询将是：

```
SELECT `type` AS 'ReturnType', 
       Count(*)  AS 'QAd', 
       Count(CASE 
               WHEN qaerrorid = '1' THEN 1 
               ELSE NULL 
             end)  AS 'Correct', 
       Count(CASE 
               WHEN qaerrorid = '1' THEN 1 
               ELSE NULL 
             end) / Count(*) * 100 AS 'Accuracy' 
FROM   bartran 
WHERE  qasample = '2' 
       AND timefiledate BETWEEN '2012-01-01' AND '2012-12-31' 
GROUP  BY type; 
```

# asp.net - 如何在 .net 中使用和实现 JSON？

> ID：14376633
> 
> 赞同：-3
> 
> 时间：2013-01-17T10:09:51.170
> 
> 标签：asp.net, json, json.net

谁能帮我弄清楚如何在 ASP.Net 中使用 JSON？我不知道 AJAX 和 JQuery。我只是一个初学者。（是否可以在 ASP.Net 和控制台应用程序中实现？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:16:35.597

```
void MainWindow_Loaded(object sender, RoutedEventArgs e)
{
    HttpWebRequest myReq = (HttpWebRequest)WebRequest.Create("(link for fetching json data)");
    myReq.Method = WebRequestMethods.Http.Get;
    myReq.Accept = "apllication/json";
    var response = (HttpWebResponse)myReq.GetResponse();
    string myString= response.GetResponseHeader("Registration_Status");
    using (var sr = new StreamReader(response.GetResponseStream()))
    {
        json = sr.ReadToEnd();

        StreamWriter sw = new StreamWriter(@"D:\others\DemoCreatingCustomEvents\TextFile1.txt");
        sw.Write(label1.Content.ToString());
        sw.Close();
    }
}

string json="";

private void button1_Click(object sender, RoutedEventArgs e)
{

    ProductCategory deserializedProdCategory = new ProductCategory();
    MemoryStream ms = new MemoryStream(Encoding.UTF8.GetBytes(json));
    DataContractJsonSerializer ser = new DataContractJsonSerializer(deserializedProdCategory.GetType());

    deserializedProdCategory = ser.ReadObject(ms) as ProductCategory;
    ms.Close();

//you can fetch the data here and it is shown in label
        label1.Content = deserializedProdCategory.ProdCategory[1].Product_ID + "//" + deserializedProdCategory.ProdCategory[1].Product_Name;
    }
    public class ProductCategory
    {
        public List<Product> ProdCategory = new List<Product>();
        public ProductCategory()
        {
            ProdCategory = new List<Product>();
        }
    }

    public class Product
    {
        public int Product_ID { get; set; }
        public string Product_Code { get; set; }
        public string Product_Name { get; set; }
        public Uri Image_Small { get; set; }
    } 
```

# c# - DateTime.Ticks 没有 100 ns 的分辨率？

> ID：14376636
> 
> 赞同：5
> 
> 时间：2013-01-17T10:09:58.490
> 
> 标签：c#, .net, visual-studio-2012

> **可能重复：**
> [C# DateTime.Now 精度](https://stackoverflow.com/questions/2143140/c-sharp-datetime-now-precision)

关于 .NET 中的高分辨率计时有几个关于 SO 的问题，其中指出（如 MSDN 文档中所述） DateTime.Ticks 的分辨率为 100 纳秒。

但在现实生活中似乎完全不是这样。如果我运行下面的代码，我希望它生成行，其中每行的 Tick 值都不同，其中很多行具有相同的毫秒值。但它没有 - 刻度值保持不变，直到毫秒值的下一个变化，不会增加时间戳的分辨率。

```
private static List<string> GetTimeLine(long iterations)
{
    List<string> liste = new List<string>();
    for (long i = 0; i <= iterations; i++)
    {
        liste.Add(DateTime.Now.Millisecond.ToString() + " - " + DateTime.Now.Ticks.ToString());
    }

    return liste;
}

static void Main(string[] args)
{
    Console.WriteLine("Generating timeline");
    guids = GetTimeLine(10000);
    File.WriteAllLines(@"C:\Test\GUIDS.TXT", guids);
    Console.WriteLine("File written - Press ENTER");
    Console.ReadLine();
} 
```

结果输出示例：

> ...
> 867 - 634940160118679615
> 
> 867 - 634940160118679615
> 
> 867 - 634940160118679615
> 
> 867 - 634940160118679615
> 
> 867 - 634940160118679615
> 
> 868 - 634940160118689616
> 
> 868 - 634940160118689616
> 
> 868 - 634940160118689616
> 
> ...

那么在.NET中获得超过毫秒分辨率的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:22:10.417

在 C# 中测量经过时间的最准确方法是使用[Stopwatch](http://msdn.microsoft.com/en-gb/library/system.diagnostics.stopwatch.aspx)类。

这使用微处理器的性能计数器，通过调用[QueryPerformanceCounter](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms644904%28v=vs.85%29.aspx)来实现。

# php - php中的访问数组通过ajax传递

> ID：14376640
> 
> 赞同：1
> 
> 时间：2013-01-17T10:10:17.380
> 
> 标签：php, jquery, html, ajax

我正在尝试通过 Ajax 将关联数组传递给 php，如下所示

```
var arr={'a':1,'b':2,'c':3};
$.ajax({
    type:'POST',
    url:'data.php',
    data:arr,
}); 
```

在php中，我想循环遍历数组的所有元素，如下所示

```
 $data=$_POST;
 foreach($data as $k=>$v)
 {
     echo $k.'='.$v;
 } 
```

有人可以在这方面帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:12:26.883

你可以这样做

```
var newarr = JSON.stringify(arr);
$.ajax({
    type:'POST',
    url:'data.php',
    data:{dat:newarr} ,
}); 
```

并在 php

```
$data = json_decode($_POST['dat']);
 foreach($data as $a){
     echo $a;
  } 
```

* * *

你也可以使用`serializeArray()`

```
$.ajax({
    type:'POST',
    url:'data.php',
    data:{dat: $(arr).serializeArray()} ,
}); 
```

然后`$_POST['data']`将是一个数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:35:34.513

这完成了工作

```
data:{dat:arr} 
```

在 jquery 和

```
$data=$_REQUEST['dat'] 
```

在 PHP 上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:13:30.600

```
<?php
$json = '{"a":1,"b":2,"c":3,"d":4,"e":5}';

var_dump(json_decode($json));
var_dump(json_decode($json, true));

?> 
```

上面的示例将输出：

```
object(stdClass)#1 (5) {
    ["a"] => int(1)
    ["b"] => int(2)
    ["c"] => int(3)
    ["d"] => int(4)
    ["e"] => int(5)
}

array(5) {
    ["a"] => int(1)
    ["b"] => int(2)
    ["c"] => int(3)
    ["d"] => int(4)
    ["e"] => int(5)
} 
```

[来自 -PHP 手册](http://php.net/manual/en/function.json-decode.php)

# ios - 状态栏后面的 uinavigationbar

> ID：14376647
> 
> 赞同：1
> 
> 时间：2013-01-17T10:10:25.637
> 
> 标签：ios, objective-c, uinavigationcontroller, uinavigationbar

用屏幕转储来解释：

![模态之前](../Images/b017c05458b39c0627ded07ec6dac363.png)

用户按下启动第 3 方编译的 ViewController 的按钮。这个第三方 ViewController 接管了整个屏幕并隐藏了状态栏。一旦用户完成它，他们就会回到第一个屏幕（上图），最终看起来像这样：

![后模态](../Images/05bcbbff4657a8226f2947787d39ac11.png)

到目前为止，我已经尝试过：

```
- (void)viewWillAppear:(BOOL)animated {
    self.view.frame = [[UIScreen mainScreen] applicationFrame];
    [self.view setNeedsLayout];
} 
```

但我仍然无法按下初始 UINavigationBar

========================

更新：

我已经使用以下方法修复了它：

```
CGRect frame = self.navigationController.navigationBar.frame;
frame.origin.y = 20;
self.navigationController.navigationBar.frame = frame; 
```

这行得通吗？状态栏总是20高吗？我试过读取状态栏的高度，但它返回 0...

# mysql - 从MYSQL中的另一列执行列计数

> ID：14376649
> 
> 赞同：0
> 
> 时间：2013-01-17T10:10:27.727
> 
> 标签：mysql, count

我有一个包含两列 meetingID 和 caseID 的表。meetingID 可以来自三个类别之一，因此我使用子查询通过仅返回与该类别匹配的另一个表中的 meetingID 来选择特定的一个。

一旦我有了这个 meetingID 列表，我想计算其中有多少有两个 caseID。我还需要从计数中排除一些 caseID，但这暂时无关紧要。

这是我到目前为止的代码；

```
 SELECT COUNT( meetingID ) , meetingID
FROM case_meeting
WHERE meetingID
 IN (

SELECT DISTINCT a.meetingID
FROM case_meeting a
INNER JOIN meeting b ON a.meetingID = b.meetingID
WHERE b.categoryID =  '1'
)
GROUP BY meetingID
HAVING COUNT( caseID ) =2 
```

我遇到的主要问题实际上是编写代码来成功计算具有两个 caseID 的 meetingID 的数量，而不是返回它们的列表。

目前代码正在返回一个列表，其中行数与我想要的数字相匹配，并且每一行都是'2'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:15:53.843

如果对 有`UNIQUE`约束`(meetingID, caseID)`：

```
SELECT cm.meetingID
FROM case_meeting AS cm
  INNER JOIN meeting AS m 
    ON m.meetingID = cm.meetingID
WHERE m.categoryID = 1
GROUP BY cm.meetingID
HAVING COUNT(*) = 2 ; 
```

如果没有，请将最后一行更改为：

```
HAVING COUNT(DISTINCT cm.caseID) = 2 ; 
```

# javascript - Imagebutton JS 交换在 webkit/phonegap 上不起作用？

> ID：14376655
> 
> 赞同：0
> 
> 时间：2013-01-17T10:11:01.300
> 
> 标签：javascript, android, image, cordova, webkit

我正在尝试让一个简单的图像按钮在 Phonegap 中工作。我想在单击时交换图像并在短时间内转发到位置。

所以我尝试过：

```
function highl(Bildname,BildURL,Link) {
document.images[Bildname].src = BildURL;
window.setTimeout(forward,1000);

function forward() {
window.location = Link;
}
} 
```

在 HTML 中只是链接，如：

```
<a href="javascript:highl('level01','level1h.png','test.html')"><img name="level01" src="level1.png" border="0"></a> 
```

在我的 Moz 中运行良好，但在 Webkit/phonegap 中运行良好（交换不能正常工作）。

有人可以帮忙吗？

编辑：在 chrome 中也不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:37:58.603

Webkit 不支持 DOM 属性突变（参见[issue 8191](https://bugs.webkit.org/show_bug.cgi?id=8191)）标记为**won't fix**。您的问题可能与链接有关。

作为一种解决方法，我认为您应该简单地删除 DOM 节点的内容，并创建一个新的图像节点。

**编辑**：用代码

您需要识别容器。另外，我设置了href，这样我的javascrpt被禁用了，链接仍然可以被关注。如果启用了 javascript，则`return false`告诉浏览器不要跟随链接。

```
<a href="test.html" onClick="return highl(this, 'level1h.png', 'test.html');"> 
```

javascript。我已经内联`forward`了，因为它很短，但你不需要。

```
function highl(el, imgURL, link) {
  var img =  new Image();
  img.src = imgUrl;
  // remove current image. TODO ensure firstChild is not null?
  el.removeChild(el.firstChild);
  // place new image
  el.append(img);
  setTimeout(function() {window.location=link;}, 1000);
  return false;
} 
```

# php - 如何使用 javascript 值设置 php 变量并在外部 php 文件中使用该 php 变量

> ID：14376657
> 
> 赞同：0
> 
> 时间：2013-01-17T10:11:06.730
> 
> 标签：php

`design.php`文件：

```
 <script>
    $(".colr_sldr li img").click(function(){
    var src = $(this).attr('src');
    var value=src.substring(src.lastIndexOf('/')+1);
    <?php $var = "<script>document.write('" + value + "')</script>";?>
     });
    </script> 
```

`index.php`并在文件中使用此变量：

```
<?php 
include('design.php');
echo $var;
?> 
```

在这里，当我打印这个变量时，它变为零任何人都可以帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:27:40.073

我可能知道的唯一解决方案是在客户端使用 jquery 并通过 ajax 发送变量：

脚本.js

```
$('document).ready(function(){
       var myVar="Hello";
      $.post('design.php',myVar);

}); 
```

在 design.php 中，您可以使用 $_POST design.php 访问您的变量

```
<?php 
   $myVar = $_POST['myVar'];
   echo $myVar;?> 
```

请查看[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)了解更多详情

或[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:14:47.313

你不能在 php 中使用这样的 var ..

```
$var = "<script>document.write('" + value + "')</script>";?> 
```

因为**php**是**服务器端语言**..
而**javascript**是**客户端**。

为此，您必须使用**ajax、get 和 post 方法**

# xml - 将两个 xml 文件中的节点集与 Ant 进行比较

> ID：14376660
> 
> 赞同：0
> 
> 时间：2013-01-17T10:11:17.180
> 
> 标签：xml, ant, compare, xmlnode

我正在尝试将两个 XML 文件与 Ant 进行比较。我的目的是比较这些 XML 文件中的特定节点，而不是完整的 XML。

请让我知道是否有人遇到此问题并能够解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:54:05.137

Ant 无法以有意义的方式做到这一点。

您可以将 XML 与[XMLUnit进行比较](http://xmlunit.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:42:52.420

听起来您需要[XML Task](http://www.oopsconsultancy.com/software/xmltask/)。我将它用于编辑 XML 配置文件（特别是 Tomcat server.xml）之类的事情，但是您可以很容易地使用它来根据 XPath 语句破解 XML 并比较节点的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:34:57.143

你想说什么？？

我想你想像这样比较值：C# Code for compare values in two xml files。

```
string item1;
string item2 ;   
XmlDocument xmlDoc1 = new XmlDocument();
XmlDocument xmlDoc2 = new XmlDocument();
xmlDoc1.Load(Server.MapPath("Document1.xml"));
xmlDoc2.Load(Server.MapPath("Document2.xml"));
XmlNodeList Nodelist1 = xmlDoc1.SelectNodes("//DataRows/DocumentElement");
XmlNodeList Nodelist2 = xmlDoc2.SelectNodes("//DataRows/DocumentElement");
foreach (XmlNode node1 in Nodelist1)
            {
                item1 = node["itemName"].InnerText;
                }
foreach (XmlNode node2 in Nodelist2)
            {
                item2 = node["itemName"].InnerText;
                }
if(item1 ==item2)
{
//to do
} 
```

希望它能奏效。

# sqlite - 导入后更新 SERIAL 值

> ID：14376665
> 
> 赞同：1
> 
> 时间：2013-01-17T10:11:35.247
> 
> 标签：sqlite, postgresql

我已经定义了一个`serial PRIMARY KEY`，像这样：

```
CREATE TABLE auth_event(
    id serial PRIMARY KEY,
    time_stamp TIMESTAMP,
    client_ip VARCHAR(512),
    user_id INTEGER REFERENCES auth_user (id) ON DELETE CASCADE,
    origin VARCHAR(512),
    description TEXT
); 
```

我正在导入的转储具有序列字段的显式值，如下所示：

```
INSERT INTO "auth_event" VALUES(6,'2012-12-03 21:50:49','127.0.0.1',181,'auth','User 181 Logged-in');
INSERT INTO "auth_event" VALUES(7,'2012-12-04 07:37:43','127.0.0.1',181,'auth','User 181 Logged-in');
INSERT INTO "auth_event" VALUES(8,'2012-12-05 11:42:28','127.0.0.1',181,'auth','User 181 Logged-in');
INSERT INTO "auth_event" VALUES(9,'2012-12-07 08:01:59','127.0.0.1',181,'auth','User 181 Logged-in');
INSERT INTO "auth_event" VALUES(10,'2012-12-07 16:32:58','127.0.0.1',181,'auth','User 181 Logged-in');
INSERT INTO "auth_event" VALUES(11,'2012-12-11 15:41:24','127.0.0.1',181,'auth','User 181 Logged-in');
INSERT INTO "auth_event" VALUES(12,'2012-12-11 22:55:08','127.0.0.1',181,'auth','User 181 Logged-in'); 
```

这意味着，根据[这](http://www.postgresql.org/message-id/4A92D5D6.3060201@iol.ie)一点，序列值（与 相关的`auth_event.id`）将不会得到更新。

现在出现了我的问题：我使用的框架没有给序列字段赋值。这意味着 postgres 正在使用默认值，并且由于尚未更新，因此会发生冲突。

`auth_event.id`导入后如何更新相关的序列值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:15:04.593

```
select setval(pg_get_serial_sequence('auth_event' , 'id'), (select max(id) from auth_event) ); 
```

# pascal - 帕斯卡 WriteLn 失败

> ID：14376668
> 
> 赞同：0
> 
> 时间：2013-01-17T10:11:48.117
> 
> 标签：pascal, freepascal, lazarus

我正在为学校做帕斯卡的小项目。我正在使用 Lazaruz 1.0.2

写入文件时，wirteLn 函数出现问题。一段时间后，它会停止写入文件。

以这个程序为例：

```
var oFile: Text;
  i: LongWord;
begin
  Assign(oFile, 'test.txt');
  ReWrite(oFile);
  for i:=1 to 4096 do
  WriteLn(oFile, 'ThisIsTest');
  CloseFile(oFile);//Added as suggested
end. 
```

这是输出：

```
...
4072 ThisIsTest
4073 ThisIsTest
4074 ThisIsTest
4075 ThisIsTe 
```

如您所见，它只是停在句子的中间，并没有全部写完。一切都取决于一个 WriteLn 指令有多长以及它被调用了多少次。

如何解决？

我尝试使用名为 WriteFile 的“Windows”模块中的 WinApi 函数，但我未能将最后 3 个参数传递给它。

* * *

**大更新**

谢谢。在该示例中有效（关闭文件）。但是我有一些更复杂的程序，我将打开的文件句柄传递给通过“var”写入它的函数。即使在关闭该文件之后，并且什么也不做。它很奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:22:57.157

您应该`Close(oFile)`在程序结束时确保刷新输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-26T13:47:33.037

也可以通过添加来更新文件而不关闭它（在这个例子中）

`Flush(oFile);` 写完之后

这在您可能有一个长文件并希望确保它定期更新的情况下很有用。当然，您仍然应该在完成后关闭文件。

# mysql - 在 SQL 中存储布尔选项

> ID：14376670
> 
> 赞同：1
> 
> 时间：2013-01-17T10:11:50.777
> 
> 标签：mysql, sql

我正在编写代码（使用 MySQL）来解决类似于以下的问题：

有 20 个布尔选项（每个用户）。

我应该存储 20`ENUM('false','true')`还是只将这些选项的 ID 放入表中，这些选项是正确的（因此每个用户可能少于 20 行）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:23:37.953

如果可能会出现新选项并且您没有按选项过滤，那么您也可以使用`EAV`结构（每个选项记录）。

这样，您可以更轻松地添加新选项（无需更改元数据）。

假设选项值是`TRUE`或者`FALSE`（`NULL`不可能），您应该只为非默认选项值（`TRUE`在您的情况下）创建记录。没有记录将意味着错误。

要检索所有选项，您可以使用以下命令：

```
SELECT  *, GROUP_CONCAT(CONCAT(o.id, ': ', ov.user IS NULL), ', ' ORDER BY o.id)
FROM    users u
CROSS JOIN
        options o
LEFT JOIN
        option_value ov
ON      (ov.user, ov.option) = (u.id, o.id)
GROUP BY
        u.id 
```

，这将为您提供动态输出：

```
user_id   options
1         1: 0, 2: 1, 3: 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T10:20:16.833

我建议创建一个`Options`具有不同选项的表。

```
+---Options---+
ID
Option

+---Users---+
ID
Name

+---User_Options---+
User_id
Option_id 
```

现在，如果您需要更多选项，请将它们插入`Options`表中，您不需要以这种方式更改数据库。

编辑：删除：像Quassnoi mensioned一样，`condition`在`user_options`“TRUE”的情况下添加记录会更好，并且没有记录应该被认为是“FALSE”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:17:37.610

我建议存储为 TINYINT 0 或 1。许多框架使用 TINYINT 数据类型开箱即用，并将其作为布尔值处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:26:01.507

创建 3 个表。第一个是 'user_table' 。它包含用户名和 user_id。样本数据如下

![在此处输入图像描述](../Images/9f2a668428952f612a236e633738f9f5.png)

表创建脚本如下

现在创建另一个名为 options_table 的表。它包含每个选项的 option_name 和 option_id。示例如下

![在此处输入图像描述](../Images/30f18d2be259d83e717f7695f9ad5dd7.png)

现在创建第三个名为“selected_options”的表。该表将用户映射到选项。它包含 user_id 和 option_id

示例如下

![在此处输入图像描述](../Images/08ab00e464903a52a8dfa87a413a530a.png)

在上面的例子中 user1 选择了 option1 和 option2

和 user2 选择 option1,option2 和 option3 即..option1,option2 和 option3 对于 user2 是 true

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:27:19.340

我建议使用位掩码列。如果您有许多选项，而不是为每个选项创建一个新列，您将能够快速执行逐位比较。

有关其他信息，请参阅：

[通过权限位掩码从 MySQL 数据库中选择用户？](https://stackoverflow.com/questions/11059182/select-users-from-mysql-database-by-privileges-bitmask)
[在 PHP 中实现位掩码或关系 ACL](https://stackoverflow.com/questions/11799789/implement-bitmask-or-relational-acl-in-php)
[使用位掩码指示状态](http://mark-story.com/posts/view/using-bitmasks-to-indicate-status)

# c++ - 如何在 kd-tree 中表示线段

> ID：14376679
> 
> 赞同：4
> 
> 时间：2013-01-17T10:12:15.587
> 
> 标签：c++, algorithm, optimization, computational-geometry, kdtree

我有大量的二维线段。我想用 kd-tree 结构表示它们，然后在附近找到特定线段的线段。关于如何用 kd-tree 做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:18:40.020

该段应该在它相交的每个 kd-tree 叶子中。也就是说，假设一条线段由一对点表示`(p1, p2)`，您应该在 kd 树节点中存储对该线段的引用。这条线段应该在它所经过的每个kd-tree节点中，这部分不同于处理点时，每个点只存储在1个kd树节点内。

拆分 kd 树节点时，您在水平或垂直线上拆分。如果至少一个端点在左子树中，则线段在“左”子树中。同样对于右子树。

您应该通过使用线段的端点执行类似于点查询的操作来查找附近。也就是说，查看查询端点附近的所有 kd-tree 叶子。

然后对于这些 bin 中的潜在线段，您可以通过查看从查询端点到候选线段的垂直线的长度来进行精确的长度比较，反之亦然（将候选线端点与查询线进行比较）。

此处回答了如何执行此操作的详细信息：[点和线段之间的最短距离](https://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment)。你应该做 4 次测试，一条线的端点到另一条线，反之亦然，并取最小值。注意忽略点投影到线段之外的情况的距离。

这是可行的，因为线不会弯曲，因此两条线之间的最近点必须位于端点之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T17:39:28.777

您不能使用段实现 kd-tree。kd-tree 是专门为 k 向量空间设计的，段不是向量空间的一部分。想法是 kd-tree 使用超平面来划分 kd-space，如果您不在 kd-vector 空间中，那并不理想。

但是，您需要的可能是 Bounding Volume Hierarchy，[https:](https://en.wikipedia.org/wiki/Bounding_volume_hierarchy) //en.wikipedia.org/wiki/Bounding_volume_hierarchy ，这是一种用于碰撞检测的技术。

# c# - 创建包含缺失键的分组

> ID：14376683
> 
> 赞同：0
> 
> 时间：2013-01-17T10:12:35.047
> 
> 标签：c#, linq, grouping

我有`IEnumerable<T>`一个`Created`字段，即日期。
每个日期可以有多个'，有时给定日期`T`没有'。`T`

目前我正在按日期对这些进行分组，这给了我所有至少有一个的日期`T`，并且`T`在它们下面。

不过，我想要的是我可以将其用作查询的一部分，该查询将使我获得一个范围内的所有日期，而不管`T`给定日期是否有任何 's。

当前代码：

```
var adjustments = DAL.GetAdjustmentsInDateRange(Start, End);

from adjustment in adjustments
group adjustment by adjustment.Created.Date into adjustmentsByDay
orderby adjustmentsByDay.Key descending
select .... 
```

在这里，**和****`adjustmentsByDay`之间没有所有日期。我想要的是它包含它们，没有元素。`Start``End`**

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:19:28.000

您可以在分组之前使用所有日期列表离开加入调整，如下所示：

```
var adjustments = DAL.GetAdjustmentsInDateRange(Start, End);
// Get all unique dates in time span
IEnumerable<DateTime> dates = GetAllDates(Start, End); 

var query = (from date in dates
                join adjustment in adjustments
                    on date.Date equals adjustment.Created.Date into a
                from adjustment in a.DefaultIfEmpty()
                select new {date.Date, adjustment}
                ).GroupBy(i=>i.Date).OrderBy(g=>g.Key); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:06:19.937

我已经组合了一个通用的 LINQ-to-objects 扩展方法来将缺失的东西插入到一个序列中：

```
public static IEnumerable<T> InsertMissing<T, U>(this IEnumerable<T> source,
    Func<T, U> key, Func<U, U> increment, Func<U, T> create)
{
    bool first = true;
    U last = default(U);

    foreach (var ig in source)
    {
        U current = key(ig);

        if (first)
        {
            first = false;
            last = current;
            yield return ig;
            continue;
        }

        while (!(last = increment(last)).Equals(current))
        {
            yield return create(last);
        }

        yield return ig;
    }
} 
```

您还需要自定义实现`IGrouping`：

```
class EmptyGrouping<K, E> : IGrouping<K, E> {
    public K Key { get; set; }

    public IEnumerator<E> GetEnumerator() {
        return Enumerable.Empty<E>().GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator() {
        return this.GetEnumerator(); 
    }
} 
```

然后你需要在 之后结束你的查询`orderby`，用这个调用跟随它，然后把你的`select`：

```
var allGroups = query.InsertMissing(
    // Key selector
    g => g.Key,
    // Get next desired key from current key
    d => d.AddDays(-1),
    // Create item for missing key
    d => new EmptyGrouping<DateTime,YourAdjustmentType>{ Key = d }); 
```

如果您的钥匙没有订购或者其中一个钥匙没有放在正确的位置（例如，在您的情况下，不是在午夜），这*将变得混乱。*

这样做的好处是不需要对原始源进行多次查询来确定最小值/最大值以生成键列表，然后再进行进一步的查询来连接和获取数据。

# apache-flex - 如何使用flex中的复选框选择数据网格中的所有行或选定行

> ID：14376691
> 
> 赞同：0
> 
> 时间：2013-01-17T10:13:18.277
> 
> 标签：apache-flex, datagrid, checkbox, flex4, flex4.5

实际上我需要使用复选框编码选择数据网格中的行。然后，如果我选择一行，那一行只会打印。如果我没有选择行，请打印所有行。请帮助代码。

```
 <mx:DataGrid id="dg" dataProvider="{dp}" allowMultipleSelection="true" selectable="true" height="100%" width="100%" >
                        <mx:columns>

                                <mx:DataGridColumn headerText="Select" dataField="Select" textAlign="center">
                                    <mx:itemRenderer>
                                        <fx:Component id="chkGrid">
                                            <mx:CheckBox click="data.Select=!data.Select" selected="{data.Select}"/>
                                        </fx:Component>
                                    </mx:itemRenderer>
                                </mx:DataGridColumn>

                            <mx:DataGridColumn headerText="Name" dataField="Nname"/>
                            <mx:DataGridColumn headerText="Metal Weight" dataField="metalwgt"/>
                            <mx:DataGridColumn headerText="Diamond Weight" dataField="diamondwgt"/>
                            <mx:DataGridColumn headerText="Metal Carat" dataField="carat"/>
                            <mx:DataGridColumn headerText="Price" dataField="price"/>
                            <mx:DataGridColumn headerText="ImagePath" dataField="imagePathTxt" visible="false"/>
                        </mx:columns>
                    </mx:DataGrid>

                </s:VGroup>
            </s:BorderContainer>

        </s:VGroup>
    </s:HGroup>
</s:BorderContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T06:38:10.823

假设`print_clickHandler`是打印按钮的点击处理程序..那么这就是代码将如何获取那些选定的行..

```
protected function print_clickHandler():void
{
    var PrintCollection:ArrayCollection = new ArrayCollection;
    // The below code will get you the selected rows..
    for each(var item:Object in dp)
    {
        if(item.hasOwnProperty("Select") && item.Select)
          PrintCollection.addItem(item);
    }

    // PrintCollection is the selected rows collection which you need to print
    // or the below code will also get you the selected rows.. Either of it will work       
    dp.filterFunction = function(item:Object):Boolean
    {
        return (item.hasOwnProperty("Select") && item.Select);
    }
    dp.refresh();

    // dp is the selected rows collection which you need to print
} 
```

# javascript - 从 .js 文件加载脚本

> ID：14376692
> 
> 赞同：0
> 
> 时间：2013-01-17T10:13:18.760
> 
> 标签：javascript, jquery, html, asp.net-mvc, datatables

我正在尝试从 .js 文件加载 .htm 模板。但是 .htm 文件中存在一个脚本，该脚本在加载模板并且事情顺利时触发。

这是模板的外观。`testing.htm`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>http://stackoverflow.com/questions/6946559/jqgrid-please-help</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
       <script type="text/javascript" charset="utf-8">
            $(document).ready(function () {
                $('#example').dataTable({
                    "bProcessing": true,
                    "sAjaxSource": '/Home/GetData',
                    "sScrollY": "400px",
                    "sScrollX": "200px",
                    "bPaginate": false
                });
            });
        </script>

 </head>
<div id="dynamic">
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
    <thead>
        <tr>
            <th width="20%">Date</th>
            <th width="25%">Name</th>
            <th width="25%">ProposalID</th>
            <th width="25%">Time</th>
               </tr>
    </thead>
    <tbody>
   </tbody>

</table>
</div>
</html> 
```

这是加载模板的 .js 文件。

```
var iTabs = function () {
    return {
        Init: function () {

            var placeholder = $("#testtab");
            placeholder.setTemplateURL("/Templates/Home/testing.htm");

            placeholder.load("/Templates/Home/testing.htm");

        }
    }
} (); 
```

但是，现在我想在 .js 文件中执行 .htm 脚本，即在加载模板之后。如果我只运行脚本的一部分，即

```
$('#example').dataTable({
                        "bProcessing": true,
                        "sAjaxSource": '/Home/GetData',
                        "sScrollY": "400px",
                        "sScrollX": "200px",
                        "bPaginate": false
                    }); 
```

在 .js 文件中，它不会工作。是否可以在 .js 文件中运行此脚本？如果是这样怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:51:31.833

尝试使用的回调运行该 js 代码`load`

像这样 ：

```
placeholder.load("/Templates/Home/rpt.htm", function() {
  $('#example').dataTable({
                    "bProcessing": true,
                    "sAjaxSource": '/Home/GetData',
                    "sScrollY": "400px",
                    "sScrollX": "200px",
                    "bPaginate": false
                });
}); 
```

有关详细信息，[请参阅 jQuery`load`文档](http://api.jquery.com/load/)

# c - 在文本文件中搜索特定单词

> ID：14376696
> 
> 赞同：1
> 
> 时间：2013-01-17T10:13:37.850
> 
> 标签：c, text-files, fgets, fputs

嗨，伙计们还没有找到如何在任何地方搜索文本文件中的特定单词，所以就在这里，这就是我现在所拥有的，只需阅读并打印整个文本文件。

```
#include <stdio.h>

#include <string.h>

#include <stdlib.h>

int main ( void )
{

static const char filename[] = "chat.log";
FILE *file = fopen ( filename, "r" );
if ( file != NULL )
{ 
char line [ 128 ]; /* or other suitable maximum line size */
while ( fgets ( line, sizeof line, file ) != NULL ) /* read a line */
{

fputs ( line, stdout ); /* write the line */
} 
fclose ( file );
}

else
{
perror ( filename ); /* why didn't the file open? */
}
return 0;
} 
```

谢谢 :D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:15:51.577

用于`strstr(line, word)`在行内的任何位置查找单词。如果`strstr`返回非 NULL，则表示当前行包含您的单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:25:21.247

你的方法会奏效，但有点天真，你可以做得比这更好。

这是一个优秀的字符串搜索算法：[Boyer–Moore string search algorithm](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:53:51.997

在搜索一组固定的单词时，我建议你看看[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)。就性能而言，它真的很好。

# ios - 使用 Storyboard 时如何使 UITable 标题贴在屏幕顶部？

> ID：14376697
> 
> 赞同：7
> 
> 时间：2013-01-17T10:13:49.750
> 
> 标签：ios, xcode, uitableview, storyboard

我使用这篇文章制作了标题：[StoryBoards 中的表格标题视图](https://stackoverflow.com/questions/7841167/table-header-views-in-storyboards)

但我无法在滚动时将标题粘贴（修复）到屏幕顶部。

怎样才能做到这一点？

PS Table 的风格很简单，当我厌倦了超载`viewForHeaderInSection`并返回标题视图的出口时，情况变得更糟。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T12:15:41.080

这是我认为使标题视图粘在桌面上的代码（这不是默认行为）：

```
-(void)scrollViewDidScroll:(UIScrollView *)scrollView
{
    CGRect rect = self.tableHeaderView.frame;
    rect.origin.y = MIN(0, self.tableView.contentOffset.y);
    self.tableHeaderView.frame = rect;
} 
```

另一种方法是为第一部分设置标题视图。您不能在 处使用任何子视图**，**`viewForHeaderInSection`您必须在那里返回尚未在视图层次结构中的视图。该方法的优点是节标题视图设计在桌面上，缺点是您可能希望在功能中具有节标题，这会破坏解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:21:04.550

我认为最好使用 UIViewController 而不是情节提要中的 UITableViewController 来实现这一点。只需在视图顶部、情节提要中放置一个标题，然后在标题下放置一个 UITableView。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T21:03:45.193

我能够做到（至少在 iOS 6 中）这样，不知道为什么这件事有效:)

```
- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

    if(self.headerManualView == nil) {
        //allocate the view if it doesn't exist yet
        headerManualView  = [[UIView alloc] init];

        //create the button
        UITextField *txtField = [[UITextField alloc] initWithFrame:CGRectMake(10, 3, 250, 44)];

        //the button should be as big as a table view cell
        txtField.borderStyle = UITextBorderStyleRoundedRect;

        //set action of the button
        //[txtField addTarget:self action:@selector(removeAction:) forControlEvents:UIControlEventTouchUpInside];

        //add the button to the view
        [headerManualView addSubview:txtField];
    }

    //return the view for the footer
    return headerManualView;
} 
```

# php - PHP 随机 M 或 F

> ID：14376702
> 
> 赞同：0
> 
> 时间：2013-01-17T10:14:06.347
> 
> 标签：php

我想创建一个在`M`或`F`字符之间随机的函数。我怎么能创建一个函数来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:19:07.440

使用此代码获取`M`或`F`随机：

```
return chr(rand(0, 1) ? 70 : 77); 
```

或者@Maerlyn 建议的更短版本：

```
return rand(0, 1) ? 'F' : 'M'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T10:17:30.740

比如像这样？

```
function randMF() {
    $chars = array('M', 'F');
    return $chars[array_rand($chars)];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T10:15:14.190

尝试这个...

```
function randomString($length = 6) {
 $str = "";
 $characters = range('F','M');
 $max = count($characters) - 1;
 for ($i = 0; $i < $length; $i++) {
  $rand = mt_rand(0, $max);
  $str .= $characters[$rand];
 }
 return $str;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T10:20:26.127

```
function randstr(){
    return substr(str_shuffle("FGHIJKLM"),0,1);
} 
```

或者

```
function randstr(){
    return chr(rand(70, 77)); //70 and 77 are char codes for M and F
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:18:01.613

根据@fire的回答，我认为这就是OP想要的：

```
$characters = range('F','M');
$max = count($characters) - 1;
$radnom_char = $characters[mt_rand(0, $max)]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T10:20:23.183

```
 function whatever(){

    $random = rand ( 1 , 2 );

    if ($random == 1)
    { 
       $letter = 'M';
    }
    else
    {
       $letter = 'F';
    }

      return $letter
    } 
```

这只是一种简单的方法。

# delphi - 使用 TControlBar，如何将波段的移动限制为单行？

> ID：14376703
> 
> 赞同：4
> 
> 时间：2013-01-17T10:14:16.847
> 
> 标签：delphi, tcustomcontrol

我在当前项目中使用了 TControlBar 组件，但是当我移动乐队时，我遇到了控件绘制额外行的问题，

基本上我想要的是 ControlBar 总是只有 1 行，它的高度是固定的，并且在拖动时乐队无法逃脱它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:12:14.757

您可以为此做一个解决方法：

```
procedure TForm1.ControlBar1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
var R:TRect;
    Pt:TPoint;

begin
  Pt:=ControlBar1.ClientToScreen(Point(0,Y));
  R.Left:=Pt.X;
  R.Top:=Pt.Y;
  R.Right:=Pt.X+ControlBar1.Width;
  R.Bottom:=Pt.Y;
  ClipCursor(@R);
end;

procedure TForm1.ControlBar1MouseUp(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  ClipCursor(nil) ;
end; 
```

有了它，您可以限制鼠标移动，只允许垂直定位 Bands。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-25T08:17:46.497

几个月前，我通过基本上从 TPanel 类派生我自己的组件并实现子面板的拖动解决方案来模仿我想要的行为来解决这个问题。

这是我用来实现预期效果的最基本原则：

```
var oldPos : TPoint;

procedure TMainForm.ControlMouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X: Integer; Y: Integer);

begin

   if Button = mbLeft then
     if (Sender is TWinControl) then
     begin
      inReposition:=True;
      SetCapture(TWinControl(Sender).Handle);
      GetCursorPos(oldPos);
      TWinControl(Sender).BringToFront;
     end else
        ((Sender as TLabel).Parent as TQPanelSub).OnMouseDown((Sender as TLabel).Parent as TQPanelSub,Button,Shift,X,Y)

end;

procedure TMainForm.ControlMouseMove(Sender: TObject; Shift: TShiftState; X: Integer; Y: Integer);
var
  newPos: TPoint;
  temp : integer;

begin

  if (Sender is TWinControl) then begin

    if inReposition then
    begin

      with TWinControl(Sender) do
      begin
        GetCursorPos(newPos);
        Screen.Cursor := crSize;
        (* Constrain to the container *)
        Top := 0;
        temp := Left - oldPos.X + newPos.X;
        if (temp >= 0) and (temp <= (Parent.Width - Width))
        then Left := temp;
        oldPos := newPos;
      end;

    end;

  end else
    ((Sender as TLabel).Parent as TQPanelSub).OnMouseMove((Sender as TLabel).Parent as TQPanelSub,Shift,X,Y);

end;

procedure TMainForm.ControlMouseUp(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X: Integer; Y: Integer);
begin

   if inReposition then
  begin
    Screen.Cursor := crDefault;
    ReleaseCapture;
    inReposition := False;
  end;

end; 
```

这只是我想要的 TControlBar 的基础，它实际上是一个写得很糟糕的组件。

# python - 列出所有可能的组合

> ID：14376706
> 
> 赞同：2
> 
> 时间：2013-01-17T10:14:31.120
> 
> 标签：python, combinations, itertools

我想知道你是否可以帮我解决这个问题。

我有以下代码来表示数字范围的所有可能组合：

```
import itertools
lst = [1, 2, 3]
combs = []
for i in xrange(1, len(lst)+1):
   els = [list(x) for x in itertools.combinations(lst, i)]
   combs.extend(els) 
```

问题是它以以下形式表示输出

```
[[1], [2], [3], [1, 2], [1, 3], [2, 3], [1, 2, 3]] 
```

在单独的文本文件中表示每个组合对我来说将是非常有益的。每个文本文件在一行中表示组合中的每个数字。作为 (1,2)，1 在第一行，2 在第二行，不带任何逗号。

我非常感谢您对我的帮助。

## 编辑

感谢百万人的帮助。请欣赏它。

我还有一个小问题要在这里解决。

对于很棒的 Poke 解决方案，有一个小问题（我的错误说明）

该文件的输出将是：

```
[[1], [2], [3]]
[[1, 2], [1, 3], [2, 3]]
[[1, 2, 3]] 
```

问题是我需要将代码用于大量组合（6-39）。

你能帮我解决这个问题吗？即使编辑提供的代码本身？

百万提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:26:07.567

您的问题与实际生成组合完全不同。您想要的只是一种输出数据的特殊方式。您可以使用标准文件写入内容轻松完成此操作：

```
>>> combinations = [[1], [2], [3], [1, 2], [1, 3], [2, 3], [1, 2, 3]]
>>> for i, combination in enumerate(combinations):
        with open(r'C:\Users\poke\Desktop\foobar\{0}.txt'.format(i), 'w+') as f:
            for value in combination:
                f.write(str(value) + '\n') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:27:17.813

```
import itertools

def savecomb(a, basename):
    k = 0
    for n in range(1, len(a) + 1):
        for c in itertools.combinations(a, n):
            k += 1
            f = open("{}{}.txt".format(basename, k), "wt")
            for i in c:
                f.write("{}\n".format(i))
            f.close() 
```

还有另一种解决方案，使用powerset，它没有在itertools中定义，但在[此处](http://docs.python.org/3/library/itertools.html)描述（在页面中查找*powerset*）：

```
def powerset(iterable):
    s = list(iterable)
    return itertools.chain.from_iterable(itertools.combinations(s, r) for r in range(len(s)+1))

def savecomb(a, basename):
    for k, c in enumerate(powerset(a)):
        with open("{}{}.txt".format(basename, k), "wt") as f:
            for i in c:
                f.write("{}\n".format(i)) 
```

这是可行的，因为采用所有尺寸的组合与采用列表的所有子集完全相同。将有一个空文件，占空子集。

另外，请记住，有 2^n 个子集，其中 n 是列表的大小，因此即使 n 不太大，也会有很多文件。在这种情况下，即使磁盘空间足够大，文件系统也可能存在问题，不*喜欢*目录中有太多文件。因此，明智的做法是将它们放在不同的目录中（这需要稍微调整代码），或者更好地采用另一种方法。

# java - 简单的 Java 代码错误，线程“main”中的异常

> ID：14376707
> 
> 赞同：0
> 
> 时间：2013-01-17T10:14:33.597
> 
> 标签：java, exception, main

我是 Java 的新手，但我试图运行这个简单的代码。有人可以解释一下我应该怎么做才能使这段代码正常工作吗？

```
public class BinaryGCD {

public static int gcd(int p, int q) {
    if (q == 0) return p;
    if (p == 0) return q;

    // p and q even
    if ((p & 1) == 0 && (q & 1) == 0) return gcd(p >> 1, q >> 1) << 1;

    // p is even, q is odd
    else if ((p & 1) == 0) return gcd(p >> 1, q);

    // p is odd, q is even
    else if ((q & 1) == 0) return gcd(p, q >> 1);

    // p and q odd, p >= q
    else if (p >= q) return gcd((p-q) >> 1, q);

    // p and q odd, p < q
    else return gcd(p, (q-p) >> 1);
}

public static void main(String[] args) {
    int p = Integer.parseInt(args[0]);
    int q = Integer.parseInt(args[1]);
    System.out.println("gcd(" + p + ", " + q + ") = " + gcd(p, q));
} 
```

}

在 Eclipse 中，我收到以下错误：

> 线程“main”中的异常 java.lang.ArrayIndexOutOfBoundsException: BinaryGCD.main 的 0(BinaryGCD.java:25)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:17:05.167

> 有人可以解释一下我应该怎么做才能使这段代码正常工作吗？

是的，您必须将 2 个参数传递给您的程序。您没有传递任何参数，因此`args`长度为 0，这就是您无法访问第一个和第二个值（索引 0 和 1）的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:17:20.057

你很可能没有传递命令行参数，

```
 int p = Integer.parseInt(args[0]);
    int q = Integer.parseInt(args[1]); 
```

如果您使用 Eclipse IDE 检查，[如何传递命令行参数](http://www.cs.colostate.edu/helpdocs/eclipseCommLineArgs.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:18:08.400

`args[0]`是命令行的第一个参数。您可能没有通过任何参数，所以这是一个问题。在这个程序中，你应该有 2 个参数。

在 Eclipse 中，您应该转到**运行配置并在****程序参数**文本区域中添加参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:18:36.677

您没有使用命令行参数调用程序。使用`java BinaryGCD 20 30` 您可以将上面示例中的 20 30 替换为任何其他数字

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T10:19:02.710

```
int p = Integer.parseInt(args[0]);
int q = Integer.parseInt(args[1]); 
```

你的程序需要两个参数。

第一个参数：p

第二个参数：q

尝试在命令行中运行您的课程：

```
java BinaryGCD 10 10 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T10:24:32.270

此代码需要传入两个参数，当您从 Eclipse 中启动程序时，您不会传入它们。

该代码不会允许用户不传递参数，它不会尝试发现它并给出用户友好的消息:-) 只是假设参数已被传递

Java 有一个数组“args”，它会自动填充这些参数，因此当它尝试在数组内部查找这些参数时，它会抛出 ArrayIndexOutOfBoundsException（即，您正在数组中查找第一个和第二个元素，但是数组没有第一个和第二个元素）

上面的答案解释了如何在使用 Eclipse 时传递参数。

# java - Sonar Java：检查测试类源代码的质量？

> ID：14376709
> 
> 赞同：10
> 
> 时间：2013-01-17T10:14:34.337
> 
> 标签：java, unit-testing, sonarqube, rules

是否可以在 Sonar 中检查 *Test.java 源代码的质量，例如方法最大大小为 100 行？

问题是，Java Junit 测试随着生产代码的增加而增加，复杂性也随之增加。

我们有超过 1000 行和 2 个方法的单元测试类。

我们想在 Sonar 中检查这些 *Test.java 类的一些规则。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:30:38.420

从 Sonar 3.1 开始，它包含一个插件，该插件具有针对单元测试执行的特定 PMD 规则（[为此创建了 JIRA](http://jira.codehaus.org/browse/SONAR-1076)）。您可以在`Configuration > Quality Profiles > Coding Rules`.

但是，您似乎希望像对*生产源代码一样对**测试*源代码进行全面分析，并获得额外的指标（例如 a和 a ）。我不认为 Sonar 本身就提供了这样的功能。您可以做的是运行 2 Sonar 分析：*`% rules compliance``% rules compliance for unit tests`*

 *1.  您的第一个分析是当前分析；
2.  第二个分析将考虑`src/test/java`作为“*生产*”源代码。因此，第二次分析将为您提供代码的质量。对于此分析，您可以指定将更改项目信息的特定 Maven 配置文件（或替代配置文件`pom.xml`）（例如，它将指示这`src/test/java`是默认配置文件`sourceDirectory`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-10T22:11:30.740

我还注意到 SonarQube 默认会忽略测试资源进行质量分析。使用 schnatterers 的答案，我找到了一种简单的方法来创建一个单独的项目，该项目仅包括测试类作为 SonarQube 中的源，从而触发对它们的质量分析。在我要分析的项目的 POM 中，我添加了一个配置文件，它相应地更改了声纳属性：

```
 <profiles>
            <profile>
                    <id>analyze-test-classes</id>
                    <properties>
                            <sonar.sources>src/test/java</sonar.sources>
                            <sonar.tests></sonar.tests>
                            <sonar.projectName>${project.name}-tests</sonar.projectName>
                            <sonar.projectKey>${project.groupId}:${project.artifactId}-tests</sonar.projectKey>
                    </properties>
            </profile>
    </profiles> 
```

运行 Maven

```
mvn sonar:sonar -Panalyze-test-classes 
```

然后将激活此配置文件并在 SonarQube 中创建一个带有后缀 -tests 的附加项目，该项目仅包含对测试类的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-17T16:23:13.787

使用 SonarQube 4.5.2（不知道他们何时改变了行为）在我看来，单元测试不再被排除在分析之外。`sonar-runner`使用`sonar.sources=src`声纳运行时也会为`src/test/java`.

对测试代码使用特定质量规则集的一种方法是运行两种分析：一种用于主代码，另一种用于测试代码。
这可以实现如下：

声纳-project.properties：

```
sonar.projectName=testSonar
sonar.projectKey=testsonar
sonar.sources=src/main/java
sonar.projectVersion=1.0 
```

*   分析主要代码：`sonar-runner`
*   分析测试代码：`sonar-runner -Dsonar.projectKey=testsonar.test -Dsonar.sources=src/test/java -Dsonar.projectName="testSonar TEST"`

必须通过服务器更改不同的质量配置文件（仪表板 | 项目配置 | 质量配置文件），因为`-Dsonar.profile` [已弃用](http://docs.sonarqube.org/display/SONAR/Analysis+Parameters)。

这也应该适用于通过 maven 或 jenkins 进行的分析。*

# java - 使用 Apache Commons VFS API 的特定文件监视器

> ID：14376713
> 
> 赞同：2
> 
> 时间：2013-01-17T10:14:41.553
> 
> 标签：java, vfs, apache-commons-vfs, file-monitoring

我想在特定目录中创建一个名为（XXXXXX.txt）的文件后执行一些操作。我只是不想监视整个目录。我如何使用 Apache Commons VFS API 来实现这一点？我尝试使用以下代码，但没有成功。关于如何实现这一目标的任何想法？

```
FileObject listendir1 = fsManager.resolveFile("C:\\Users\\Myname\\AppData\\Local\\Temp\\XXXXXXX.txt");
fileMonitor.addFile(listendir1);
fileMonitor.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T12:04:55.890

尝试这样的事情：

```
 FileSystemManager fsManager = VFS.getManager();
 FileObject listendir = fsManager.resolveFile("/home/username/monitored/");
 DefaultFileMonitor fm = new DefaultFileMonitor(new CustomFileListener());
 fm.setRecursive(true);
 fm.addFile(listendir);
 fm.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T02:45:55.620

1.  实现自定义监视器并覆盖 fileCreated() 方法

2.  创建一个并发队列以保留感兴趣的监视器并在使用后将其删除

# ruby - 使用“exists”watir-webdriver 方法时出现超时错误

> ID：14376717
> 
> 赞同：0
> 
> 时间：2013-01-17T10:14:51.007
> 
> 标签：ruby, firefox, watir, watir-webdriver

就搜索而言，我找不到 watir 支持的浏览器的最新列表。

我刚刚将 firefox 升级到 18 版，在升级时，还将 watir-webdriver 版本更新到最新版本（使用`gem update watir-webdriver`）。

到目前为止，我遇到了一个问题，我似乎无法找到解决方案。

当我尝试检查一个元素是否存在时，可以说使用`$browser.a(:href, "#{$url}/admin/").exists?`（`$url`变量被定义到我的测试服务器的主 url，所以这不是问题。此外，即使我用实际地址替换变量，我仍然遇到同样的问题），当元素**不**存在时，我总是会收到超时错误。

当元素**确实**存在时，我会立即得到`true`. 所以超时问题仅在元素不存在时**发生**。

*所以我的问题是：*

1.  有没有办法使该`.exists?`方法起作用？
2.  有谁知道最新版本的 Firefox（V. 18）还有其他类似的问题？
3.  如果有人能指出我支持的 watir 浏览器的更新列表，我将不胜感激。最好是定期更新的列表。

PS，我确实看到有人发布了有关该`present?`方法的问题，我不知道它是否相关，但是我仍然没有解决方案。我不想降级到以前版本的ff。

非常感谢任何愿意提供帮助的人，

亲切的问候，阿萨夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:45:44.993

我到处都有这样的问题，解决方案是捕获异常并重新运行触发此异常的代码。当然，我假设你的异常是由一些暂时的原因触发的，可能是由 Watir 中的一个小故障触发的。

简而言之，您可以执行以下操作：

```
begin
  $browser.a(:href, "#{$url}/admin/").exists?
rescue Timeout::Error
  puts("Caught a TIMEOUT ERROR!")
  sleep(1)
  # Retry the sode that generates the esception.
  retry
end 
```

这是最简单的形式。您还可以通过执行以下操作确保不要将自己锁定在无限循环中：

```
retries_left = 3
begin
  $browser.a(:href, "#{$url}/admin/").exists?
rescue Timeout::Error
  puts("Caught a TIMEOUT ERROR!")

  # You may want to wait for a while before retrying.
  sleep(1)

  # Retry the code that generates the exception.
  retries_left -= 1
  retry if retries_left > 0

  # No more retries left - time to bail out! Re-raise the exception.
  raise
end 
```

您可以通过将此异常处理代码抽象为一个接受块并以更简洁的方式使用它的测试助手方法来改进这一点，而无需重复自己，例如：

```
handle_transient_exceptions {
  $browser.a(:href, "#{$url}/admin/").exists?
} 
```

但这不是你问的。:)

关于你的第三个问题，我可以说 watir-webdriver 很好地支持最新的 Chrome、Firefox 和 IE9。我目前正在使用这些浏览器，还没有发现任何阻塞问题。

# html - 智能手机/个人电脑中的网站设计

> ID：14376718
> 
> 赞同：1
> 
> 时间：2013-01-17T10:15:00.137
> 
> 标签：html, css, web, smartphone

我怎样才能确定我的网站可以在 smatphones（具有不同的分辨率和屏幕尺寸）中毫无问题地查看。

有没有办法将经典网站的一对 html/css 转换为在任何地方都兼容。

最好的祝福。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:34:19.027

我使用[http://mite.keynote.com/](http://mite.keynote.com/)来帮助在我没有实际可用的手机上测试网站。它并不完美，但它是我见过的最好的测试套件，肯定会让您了解您的设计是否可行。

至于实际的设计方法，请确保您没有以像素或点为单位指定任何内容，所有尺寸都应使用 em（或 ex 等）或百分比指定。从那里开始，这只是一个问题或尝试一些事情，看看它们是否有效。

# javascript - 我如何重定向到 json 请求类型的任何其他页面？

> ID：14376722
> 
> 赞同：1
> 
> 时间：2013-01-17T10:15:14.627
> 
> 标签：javascript, ajax, json

只要没有会话，我的应用程序就会将用户重定向到登录页面。但是对于 Ajax 请求，这种重定向不会发生。

我需要为应用程序中的所有 ajax 调用处理这个重定向问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:40:29.917

我在 Zend/PHP 项目上做了类似的事情。不幸的是，我不熟悉 Java，我只能建议基本方向。

默认情况下，XMLHttpRequest 执行重定向。因此，如果您在 ajax 请求期间执行重定向，XMLHttpRequest 将执行它，而不会让您知道重定向发生了。至少我没有办法捕捉到这种情况并以某种方式处理它。因此，在服务器端，我覆盖了重定向方法。假设你也可以在 Java 中做类似的事情。一旦请求来自 ajax（您可以在 ajax 请求中添加一些特定的标头并在服务器上检查它），您可以返回与标头不同的`Location`标头。例如，`New-Location`, 并没有实际的重定向。只需停止请求执行。

在客户端，您可以使用[jQuery.ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)一次性为所有 ajax 请求配置全局处理程序。以下是如何向所有请求添加标头`.ajaxSetup`：

```
$.ajaxSetup({
    headers: {
        XHTTPRequest: 'true'
    }
}); 
```

此外，您可以设置全局[ajaxSuccess](http://api.jquery.com/ajaxSuccess/)和[ajaxError](http://api.jquery.com/ajaxError/)处理程序。它们将在单独的 ajax 请求的任何成功/错误处理程序之前执行。在全局 ajax 成功中，您可以从`xhr`作为第三个参数传递给回调函数的对象中获取标头并执行重定向：

```
var newLocation = xhr.getResponseHeader("New-Location");
if(newLocation)
     document.location = newLocation; 
```

基本上，您可以返回特殊对象而不是标头，或者找到其他方法将新位置传递给您的`ajaxSuccess`回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:40:00.953

我这样做的方式：

在**服务器**端：

```
 define('BASE_URL','http://www.yourdomain.com');

    if (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest'){
        // if it's an ajax request

        $json['success'] = 1;
        $json['redirect'] = BASE_URL.'/logout';
        echo json_encode($json);
    }else{
        // if it's an non ajax request

    } 
```

在**客户**端使用 jquery：

```
 $.ajax({
              type: "POST",
              url: 'www.yourdomain.com',

              data: {test: 1},
              complete: function(e, xhr, settings){
                  switch(e.status){
                      case 500:
                         alert('500 internal server error!');
                         break;
                      case 404:
                          alert('404 Page not found!');
                         break;
                      case 401:
                          alert('401 unauthorized access');     
                         break;       
                  }
              }
            }).done(function( data ) {

                var obj = jQuery.parseJSON(data)

                if (obj.success == 1){
                     var url = obj.redirect;
                     location.href = url;
                }

            }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:22:05.053

您可以在 AJAX 成功块中使用**window.location**将用户重定向到目标页面。

# c# - GetObject("", progId) 和 GetObject(, progId) 的区别

> ID：14376726
> 
> 赞同：0
> 
> 时间：2013-01-17T10:15:27.250
> 
> 标签：c#, com, vbscript

我正在尝试在 C# 中构建一个进程外 COM 服务器。我从微软找到了这个例子：http: [//support.microsoft.com/kb/977996](http://support.microsoft.com/kb/977996)

我已经构建它并用一点 VBScript 进行了测试：

```
Set app = GetObject("", "CSExeCOMServer.CSSimpleObject")
WScript.Echo(app.HelloWorld()) 
```

它有效，但当我这样做时（跳过GetObject的第一个参数）：

```
Set app = GetObject(, "CSExeCOMServer.CSSimpleObject")
WScript.Echo(app.HelloWorld()) 
```

我不明白这两个电话之间的区别。我需要第二种形式，因为我想从只有第二种方式可用的环境中拨打电话。

我可以对服务器进行哪些更改以使其正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:03:32.633

好的，我经常自己找到解决方案。实际上：

```
GetObject("", "CSExeCOMServer.CSSimpleObject") 
```

与以下内容相同：

```
CreateObject("CSExeCOMServer.CSSimpleObject") 
```

如果您正在寻找一个设计不佳的 API，我已经找到了一个（但我不知道整个故事，可能这里有人可以解释我为什么会这样）。

我的问题是微软示例没有在 ROT（运行对象表）中注册对象。因此 GetObject 调用找不到活动对象。在将此方法添加到构造函数后，我通过创建我的类的实例解决了这个问题：

```
public void AddToROT()
{
    IRunningObjectTable rot = null;
    IMoniker moniker = null;
    try
    {
        // Get the ROT
        rot = GetRunningObjectTable(0);

        // Create a moniker for the graph
        moniker = CreateItemMoniker("!", "{" + CLASS_ID  + "}");

        // Registers the graph in the running object table
        cookie = rot.Register(ROTFLAGS_REGISTRATIONKEEPSALIVE, this, moniker);
    }
    finally
    {
        if (null != moniker) Marshal.FinalReleaseComObject(moniker);
        if (null != rot) Marshal.FinalReleaseComObject(rot);
    }
} 
```

# java - Spring Bean 创建异常

> ID：14376730
> 
> 赞同：0
> 
> 时间：2013-01-17T10:15:33.770
> 
> 标签：java, spring, hibernate

要理解 Spring 中真正的问题是什么，需要对结构有很好的了解。我在这个问题上搜索了两天，找不到任何解决方案。在我的项目中，当我构建它时使用 Hibernate 会给出以下错误消息：

```
2013-01-17 06:28:50,251 INFO [org.hibernate.cfg.SettingsFactory] - Database ->
   name : MySQL
version : 5.0.96-community-nt
  major : 5
  minor : 0
2013-01-17 06:28:50,251 INFO [org.hibernate.cfg.SettingsFactory] - Driver ->
   name : MySQL-AB JDBC Driver
version : mysql-connector-java-5.1.12 ( Revision: ${bzr.revision-id} )
  major : 5
  minor : 1
2013-01-17 05:13:45,060 ERROR [org.springframework.web.context.ContextLoader] - Context initialization failed
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'blogController': Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'langService': 
Injection of resource dependencies failed; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'langDao' defined in URL [jar:file:/C:/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/NCFrameworkAdmin/WEB-INF/lib/NCFramework-0.0.1-SNAPSHOT.jar!/com/ns/commerce/framework/lang/dao/LangDaoImpl.class]: 
Unsatisfied dependency expressed through constructor argument with index 0 of type [org.hibernate.SessionFactory]: : Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/admin-hibernate.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Wrong column type in db.nc_alert_log for column alerted. Found: bit, expected: TINYINT(1) DEFAULT 0; nested exception is org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/spring/admin-hibernate.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Wrong column type in db.nc_alert_log for column alerted. Found: bit, expected: TINYINT(1) DEFAULT 0 
```

有趣的是 blogController、langServices 和 LangDao 是相关的，但是它们与“nc_alert_log”表无关。

**浪道实现**

```
package com.ns.commerce.framework.lang.dao;
import org.hibernate.Criteria;
import org.hibernate.SessionFactory;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.stereotype.Repository;
import com.ns.commerce.framework.lang.model.Lang;
import com.ns.commerce.framework.generic.dao.GenericDAOImpl;

@Repository("langDao")
public class LangDaoImpl extends GenericDAOImpl<Lang, Long> implements LangDao {

@Autowired
public LangDaoImpl(@Qualifier("sessionFactory") SessionFactory sessionFactory) {
    this.setSessionFactory(sessionFactory);
}

@Override
public Lang findByLocaleCode(String localeCode) {
    Criteria criteria = getCriteria();
    criteria.add(Restrictions.eq("localeCode", localeCode));        
    return findByCriteriaFirst(criteria);       
}

@Override
public Lang findBySubdomain(String subdomain) {
    Criteria criteria = getCriteria();
    criteria.add(Restrictions.eq("subdomain", subdomain));
    return findByCriteriaFirst(criteria);       
}

@Override
public Lang findDefaultLang() {
    Criteria criteria = getCriteria();
    criteria.add(Restrictions.eq("defaultFlag", true));
    return findByCriteriaFirst(criteria);       
}
} 
```

**AlertLog.Java 模型**

```
 @Column(name="alerted", columnDefinition = "TINYINT(1) DEFAULT 0")
private int alerted; 
```

在数据库上：Alerted Column > TINYINT(1) 并且默认值为 0。

**数据库属性**

```
 hibernate.hbm2ddl.auto=validate
#hibernate.hbm2ddl.auto=create-drop
hibernate.hbm2ddl.import_files=/import_standard.sql
hibernate.show_sql=false
hibernate.format_sql=true
hibernate.generate_statistics=false
hibernate.use_sql_comments=true
hibernate.query.factory_class=org.hibernate.hql.ast.ASTQueryTranslatorFactory
hibernate.cache.use_query_cache=true
hibernate.cache.region.factory_class=net.sf.ehcache.hibernate.SingletonEhCacheRegionFactory
hibernate.cache.use_second_level_cache=true
#-------------------------------------------------------------------------------
# MySQL Settings

jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/asd?autoReconnect=true
jdbc.username=asd
jdbc.password=asd

# Property that determines which Hibernate dialect / MySQL5Dialect || MySQLDialect
hibernate.dialect=org.hibernate.dialect.MySQL5Dialect 
```

**Pom.xml**

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>
<parent>
<artifactId>NC_Core</artifactId>
<groupId>com.ns.commerce</groupId>
<version>0.0.1-SNAPSHOT</version>
</parent>
<artifactId>NCFrameworkAdmin</artifactId>
<packaging>war</packaging>
<name>NCFrameworkAdmin Maven Webapp</name>
<url>http://maven.apache.org</url>
<properties>
<project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>
<dependencies>
    <dependency>
        <groupId>com.nc.commerce</groupId>
        <artifactId>NCFramework</artifactId>
    </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
        </dependency>                       
        <dependency>
            <groupId>org.springframework.security</groupId>         
            <artifactId>spring-security-config</artifactId>         
        </dependency>

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
        </dependency>

        <!-- Joda Time Library -->
        <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
        </dependency>

        <!-- Jackson JSON Mapper -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
        </dependency>

        <!--Regular Expression Libraries -->
        <dependency>
            <groupId>oro</groupId>
            <artifactId>oro</artifactId>
        </dependency>
        <dependency>
            <groupId>jakarta-regexp</groupId>
            <artifactId>jakarta-regexp</artifactId>
        </dependency>

        <!-- Commons validator -->
        <dependency>
            <groupId>commons-validator</groupId>
            <artifactId>commons-validator</artifactId>
        </dependency>           

        <!-- Tiles -->
        <dependency>
            <groupId>org.apache.tiles</groupId>
            <artifactId>tiles-jsp</artifactId>
        </dependency>

        <!-- AOP dependency -->
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
        </dependency>
  </dependencies>
<build>
<finalName>NCFrameworkAdmin</finalName> 
```

如果需要任何其他来源，请发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:16:11.067

```
private int alerted; 
```

尝试更改为：

```
private boolean alerted; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:19:37.583

```
Wrong column type in db.nc_alert_log for column alerted.   
Found: bit, expected: TINYINT(1) DEFAULT 0 
```

导致问题。检查`alerted`数据库中列的类型，并确保您在`AlertLog.java`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:21:11.310

nc_alert_log 和 LangDao 没有直接关系，但是 LangDao 和 hibernate sessionFactory 有关系。sessionFactory 无法创建，因为数据库定义错误。该错误表明数据库中的列类型不是 TINYINT，而是 BIT（布尔值）。这就是 sessionFactory 无法启动的原因。没有 sessionFactory 就无法创建 LangDao 等等。

# javascript - 使用嵌入或对象标签中的元素

> ID：14376732
> 
> 赞同：6
> 
> 时间：2013-01-17T10:15:52.443
> 
> 标签：javascript, jquery, object, svg, embed

我在页面中插入了一个带有嵌入或对象标签的 svg 图形：

```
<object data="graphics.svg" type="image/svg+xml" id="graphics" /> 
```

图像加载正确，我可以通过浏览器调试器看到它​​的 SVG 结构。我看到了所有元素的 id 和属性，但在我看来，无法使用页面上的脚本选择这些元素：

```
$('#graphics path').length; // 0 (jQuery)
$('path').length; // 0 anyway 
```

是否可以像往常一样浏览图形元素？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T10:29:38.423

它将显示为一个单独的文档，类似于 iframe。您可以像这样访问它：

```
var svg = document.getElementById('graphics').contentDocument 
```

请注意，等待 svg 文件加载很重要；您可能希望将代码放在`object`元素的`onload`事件处理程序中，如下所示：

```
<object data="graphics.svg" type="image/svg+xml" id="graphics" />
<script>
  document.getElementById('graphics').addEventListener('load',function(){
    var svg = document.getElementById('graphics').contentDocument
    // do stuff, call functions, etc.
  })
</script> 
```

# header - DOMPDF: page_script(): 检查当前页面内容？

> ID：14376733
> 
> 赞同：0
> 
> 时间：2013-01-17T10:15:58.290
> 
> 标签：header, footer, dompdf

我正在使用 dompdf 生成有时有首页，有时有一些附件的报告。主要内容有页眉和页脚，但首页和附件（pdf的最后3到5页）不应包含页眉和页脚。我使用内联 php page_script() 放置页眉和页脚，如下所示：

```
<script type="text/php"> 
    if (isset($pdf) ) { 
        $pdf->page_script('
            if ( $PAGE_COUNT > 10 && $PAGE_NUM == 1) {
                //front page footer
            }else{
                //other pages' header and footer
            }
        ');
    }
</script> 
```

整个报告由数据库引擎构建，该引擎将其全部输出为临时 html.txt 文件，然后将其读入 DOMPDF。

现在，要识别首页，我只需检查**页码是否为 = 1**。如果添加了任何附件（由 1000 像素高的 jpg 图像组成，每个在自己的页面上）

有没有人知道如何识别这些“附件”页面并让 DOMPDF 不在这些页面上呈现页眉和页脚？或者有什么方法可以**在 page_script()-script 中检查当前页面是否只包含一个图像**（或者可能是一个具有特定类或标识符的图像）？

感谢您的帮助，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:47:26.083

检测当前页面内容可能是可能的，但我必须准确研究你在这个级别可以做什么。如果您可以在生成的文档中注入一些内联脚本，则更简单的方法是。在主要内容之后和附件之前，您可以添加类似的内容`$GLOBALS['attachments'] = true;`，然后将对该变量状态的检查添加到您的条件中。

```
<script type="text/php">
if (isset($pdf) ) {
  $pdf->page_script('
    if ( $PAGE_COUNT > 10 && $PAGE_NUM == 1) {
      //front page footer
    }elseif ($GLOBALS['attachments']) {
      //attachments actions
    }else{
      //other pages' header and footer
    }
  ');
}
</script> 
```

当然，不要忘记在文档顶部将变量初始化为 false。（来自[https://groups.google.com/d/topic/dompdf/mDsYi8Efnhc/discussion](https://groups.google.com/d/topic/dompdf/mDsYi8Efnhc/discussion)）

# oracle - 在 CakePHP 2.0 中使用 Oracle 数据库

> ID：14376743
> 
> 赞同：5
> 
> 时间：2013-01-17T10:16:45.367
> 
> 标签：oracle, cakephp, cakephp-2.0, cakephp-2.1, cakephp-2.2

我注意到目前在 CakePHP 2.0 中没有 Oracle 的数据源，尽管他们现在似乎正在使用它：http: [//ask.cakephp.org/questions/view/any_news_about_oracle_datasource_with_cakephp_2_0](http://ask.cakephp.org/questions/view/any_news_about_oracle_datasource_with_cakephp_2_0)

有人解释如何使用 Oracle DB 改编 CakePHP 1.3 中的一些代码： http: [//www.hassanbakar.com/2012/01/09/using-oracle-in-cakephp-2-0/](http://www.hassanbakar.com/2012/01/09/using-oracle-in-cakephp-2-0/) [http:// liamgraham.wordpress.com/2007/04/19/using-oracle-with-cakephp-15-minute-blog-tutorial/](http://liamgraham.wordpress.com/2007/04/19/using-oracle-with-cakephp-15-minute-blog-tutorial/)

但我不确定这是正确的方法。如果它这么简单，他们早就发布了 CakePHP 2.X 的功能......

*使用那个“作弊”*会有什么问题吗？

我想将 CakePHP 与 PL/SQL 过程和桌面应用程序连接起来，它们正在 Oracle 上工作。我无法改变这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T15:09:11.017

在询问了一些 CakePHP 开发人员后，我得出的结论是，如果您想正确使用 CakePHP 模型及其查询语法，就不可能将 Oracle 数据库与 CakePHP 2.3 一起使用。在 CakePHP 中还没有任何可用的 Oracle 驱动程序，它是完全可用的。

因此，我找到的解决方案是使用 PHP 的[OCI8 函数](http://php.net/manual/en//function.oci-parse.php)。

像这样我可以`oci_parse`用来直接查询数据库，或者调用一个 PL-SQL 过程，这是我最终决定做的。（因为sql函数的复杂性和我工作组内的任务分工）

现在，我无法利用使用 CakePHP 模型的许多优点，但这是唯一的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-15T11:03:42.113

有一个[用于 Oracle 数据库的新 CakePHP 3 驱动程序已](https://github.com/CakeDC/cakephp-oracle-driver)发布 (MIT)，可与 Oracle 11g 和 Oracle 12c 数据库一起使用。一些特点：

*   触发器
*   序列
*   光标
*   存储过程
*   套餐
*   允许选择/插入/更新/删除行的所有基本 CRUD 功能。
*   CakePHP 分页
*   CakePHP 烘焙代码生成

在此处查看[文档](https://github.com/CakeDC/cakephp-oracle-driver/blob/master/docs/Home.md)，并在此处查看[发布公告](http://www.cakedc.com/yevgeny_tomenko/2016/03/10/cakephp_3_driver_for_oracle_database)。

# mysql - mysql数据透视查询和排名查询

> ID：14376744
> 
> 赞同：3
> 
> 时间：2013-01-17T10:16:47.460
> 
> 标签：mysql, pivot, rank

我有一个标记表，例如：

```
ID STUDENT_ID Branch_id Class_id Exam_id Subject_id Numbers Date
1 653 5 1 1 8 60 2012-01-01
2 653 5 1 1 9 40 2012-01-01
3 653 5 1 1 10 80 2012-01-01
4 653 5 1 1 11 50 2012-01-01
5 653 5 1 1 12 65 2012-01-01
6 653 5 1 1 13 33 2012-01-01
7 653 5 1 1 15 86 2012-01-01
8 222 5 1 1 8 100 2012-01-01
9 222 5 1 1 9 80 2012-01-01
10 222 5 1 1 10 92 2012-01-01
11 222 5 1 1 11 50 2012-01-01
12 222 5 1 1 12 65 2012-01-01
13 222 5 1 1 13 33 2012-01-01
7 222 5 1 1 15 86 2012-01-01

```

我想获得排名我得到了这个[问题的答案](https://stackoverflow.com/questions/14314471/mysql-get-rank-with-filters)

此外，当我获取所有类结果时，我使用数据透视查询：

```
SELECT stu_id, sum(numbers) AS total, branch_id, depart_id, class_id,
 SUM( IF( subject_id =1, numbers, 0 ) ) AS MAth,
 SUM( IF( subject_id =2, numbers, 0 ) ) AS Eng,
SUM( IF( subject_id =3, numbers, 0 ) ) AS Science
FROM marksheet where branch_id = 1 AND depart_id = 1
 AND class_id = 1 GROUP BY stu_id ORDER BY total DESC 
```

我想在我的班级查询（枢轴查询）中获得排名？我想计算第一名有多少学生，第二名和第三名有多少学生？

所需数据样本：

```
ID 姓名 数学 英语 科学 总百分比 位置 排名

```

有人帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:24:01.973

我认为您需要做的是创建第二个表，其中包含正在引用的等级边界，例如：

```
ID    grade    start_boundry    end_boundry
1       A             60            100 
```

等等。。

然后在表之间创建一个连接，然后`WHERE`在数字和开始/结束边界之间执行一条语句

所以->

```
SELECT grade FROM boundries_table RIGHT JOIN  sudent_table
WHERE boundries_table.start_boundry < student_table.numbers
AND boundries_table.end_boundry > student_table.numbers 
```

我认为如果我的 MySQL 内存可用，那应该可以工作，只需将表修改为你需要它运行的方式，它应该可以满足你的需要。

# c# - 在 C# 中创建自定义通用列表

> ID：14376745
> 
> 赞同：1
> 
> 时间：2013-01-17T10:16:49.540
> 
> 标签：c#, asp.net-mvc, c#-4.0, generics, generic-collections

你好朋友我想创建自定义通用列表我的代码如下：

```
public class Dates
{
    string _FromDate;
    string _ToDate;

    public string FromDate
    {
        get { return _FromDate; }
        set { _FromDate = value; }
    }

    public string ToDate
    {
        get { return _ToDate; }
        set { _ToDate = value; }
    }
}

protected void btnsearch_Click(object sender, EventArgs e)
{

    DateTime start = new DateTime(2013,1,5);
    DateTime end = new DateTime(2013,2,2);

    string dayName = drpday.SelectedItem.ToString().ToLower();

     Dates dt = new Dates();
    List<Dates> list = new List<Dates>();
    int i = 0;

   for (DateTime runDate = start; runDate <= end; runDate = runDate.AddDays(1))
    {
        if (runDate.DayOfWeek.ToString().ToLower() == dayName)
        {
            dt.FromDate = runDate.ToShortDateString();
            dt.ToDate = (runDate.AddDays(double.Parse(hd_tourdays.Value)).ToShortDateString());
            list.Insert(i++,dt);
        }
    }
     grd_TourDates.DataSource = list;
     grd_TourDates.DataBind();
 } 
```

在我的结果列表中，它只显示循环中添加的最后一项，请帮助解决问题..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:29:49.017

试试这个 ： - -

```
protected void btnsearch_Click(object sender, EventArgs e)
    {

        DateTime start = new DateTime(2013,1,5);
        DateTime end = new DateTime(2013,2,2);

        string dayName = drpday.SelectedItem.ToString().ToLower();

         Dates dt = new Dates();
        List<Dates> list = new List<Dates>();
        int i = 0;

       for (DateTime runDate = start; runDate <= end; runDate = runDate.AddDays(1))
        {
            if (runDate.DayOfWeek.ToString().ToLower() == dayName)
            {

                list.Add(new Dates{
                      FromDate=runDate.ToShortDateString();
                      ToDate=(runDate.AddDays(double.Parse(hd_tourdays.Value)).ToShortDateString());
    });

            }
        }
         grd_TourDates.DataSource = list;
         grd_TourDates.DataBind();
     } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:22:50.870

改变这个：

```
protected void btnsearch_Click(object sender, EventArgs e)
{
     Dates dt = new Dates();
    List<Dates> list = new List<Dates>();
    int i = 0;

   for (DateTime runDate = start; runDate <= end; runDate = runDate.AddDays(1))
    {
        if (runDate.DayOfWeek.ToString().ToLower() == dayName)
        {
            dt.FromDate = runDate.ToShortDateString();
            dt.ToDate = (runDate.AddDays(double.Parse(hd_tourdays.Value)).ToShortDateString());
            list.Insert(i++,dt);
        }
    }
     grd_TourDates.DataSource = list;
     grd_TourDates.DataBind();
 } 
```

对此并尝试：

```
protected void btnsearch_Click(object sender, EventArgs e)
{
     Dates dt;
    List<Dates> list = new List<Dates>();
    int i = 0;

   for (DateTime runDate = start; runDate <= end; runDate = runDate.AddDays(1))
    {
        if (runDate.DayOfWeek.ToString().ToLower() == dayName)
        {
            dt = new Dates()
            dt.FromDate = runDate.ToShortDateString();
            dt.ToDate = (runDate.AddDays(double.Parse(hd_tourdays.Value)).ToShortDateString());
            list.Insert(i++,dt);
        }
    }
     grd_TourDates.DataSource = list;
     grd_TourDates.DataBind();
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:35:39.040

导致问题的部分是这个

```
Dates dt = new Dates();
for (.....)
{
  dt.FromDate = ...;
  dt.ToDate = ...;
  list.Insert(i++,dt);
} 
```

您正在使用在代码中调用的类`Dates`，并且在 C# 中这是[一个引用类型](http://www.albahari.com/valuevsreftypes.aspx)。您正在代码中创建单个实例，并`dt`在该`Dates dt = new Dates();`行中分配对其调用的引用。
在循环中，您更改了实例的一些属性，并将对该实例的*引用*添加到列表中。然后循环再次执行，您更改实例的属性，从而更改已在列表中的引用的实例值，然后再次*将相同的引用*添加到列表中。
循环继续进行，就像循环一样，这种情况一次又一次地发生，你会得到一个列表，其中包含一堆对完全相同的实例的引用。

因此， 的值`list`不仅看起来相同，而且*完全相同*。`Dates`为了解决这个问题，每次需要向列表中添加实例时，都需要创建一个新的类实例，代码如下。

```
for (.....)
{
  Dates dt = new Dates(); //creates a new reference to a new instance
  dt.FromDate = ...;      //sets properties on the instance
  dt.ToDate = ...;
  list.Insert(i++,dt);    // inserts a reference to the instance in the list
} 
```

# c# - Web API 请求无效

> ID：14376746
> 
> 赞同：1
> 
> 时间：2013-01-17T10:16:50.113
> 
> 标签：c#, asp.net-mvc, asp.net-web-api

我有一条路线：

```
routes.MapRoute (name: "apicontroller2",
                 url: "api/{controller}/{action}/",
                 defaults: new { controller = "Default2", action = "Index" }
                ); 
```

和具有两个 post 方法的 Default2Controller：

```
[HttpPost] 
public HttpResponseMessage Post(ttReview review)
{
...
}

[HttpPost] 
public HttpResponseMessage PostPro(ttbewertungenpro pro)
{
...
} 
```

`webserver/api/default2/PostPro/`当我通过或`webserver/api/default2/Post/`ajax post调用这些 API-Methods 时，我得到了错误：

```
ExceptionMessage=Multiple actions were found that match the request: 
System.Net.Http.HttpResponseMessage Post(WT.Models.ttReview) on type WT.Controllers.Default2Controller
System.Net.Http.HttpResponseMessage PostPro(WT.Models.ttbewertungenpro) on type WT.Controllers.Default2Controller 
```

我的ajax调用是：

```
$.ajax({
        url: "../api/default2/Post", // or "../api/default2/PostPro",
        type: 'POST',
        dataType: "text", 
        data: review, // or pro
        success: function (test) {
        },
        error: function (test) {
            alert("Error");
        }
} 
```

我的路线错了还是什么？当我删除一种方法时，另一种方法有效...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:31:45.350

查看*AttributeRouting* (http://nuget.org/packages/AttributeRouting.WebApi)

绘制路线要容易得多。

例子

```
[POST("Page/Method")]
public HttpResponseMessage Post(ttReview review)
{
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:32:26.787

使用全新的空白 WebAPI 项目 - 我还没有触及 global.asax 文件。

家庭控制器

```
[HttpPost]
public HttpResponseMessage Post(string review)
{
    return new HttpResponseMessage(HttpStatusCode.Created);
}

[HttpPost]
public HttpResponseMessage PostPro(string pro)
{
    return new HttpResponseMessage(HttpStatusCode.Created);
} 
```

索引.cshtml

```
<script src="~/Scripts/jquery-1.7.1.js"></script>

<script>

    $(document).ready(function () {

        $("#submit").click(function() {

            $.ajax({
                url: "home/Post", // or "../api/default2/PostPro",
                type: 'POST',
                dataType: "text",
                data: "test", // or pro
                success: function(test) {
                },
                error: function(test) {
                    alert("Error");
                }
            });

        });

    });

 </script>

<input type="submit" value="submit" id="submit" /> 
```

这对我来说很好，所以问题一定是你的路径/路线。

# android - Android项目的缓存/存储信息

> ID：14376747
> 
> 赞同：0
> 
> 时间：2013-01-17T10:16:51.140
> 
> 标签：android, django, caching, persistence, storage

我正在设计一个 Android 应用程序，我需要从第三方项目中获取一些数据并将其显示给一些用户查看。

问题是，我需要尽量减少访问 Android 应用程序对第​​三方系统的影响。因此，我正在考虑在我的后端以某种方式缓存/存储数据（考虑使用 Python + Django，因为它是我最熟悉的，但随时建议其他人，总是很高兴了解更多信息！）所以Android 用户不直接访问第三方项目数据（即每 X 秒只访问一次第三方项目以刷新数据，并且用户可以访问他们使用应用程序时可用的任何信息）。

这样做的最佳方法是什么？我应该将数据存储在一个简单的数据库中吗？或者只是将数据转储到文件中并从那里工作？

提前致谢！

# asp.net - 为什么我不能在我的网站根目录中请求 ASP.net 页面？

> ID：14376753
> 
> 赞同：-5
> 
> 时间：2013-01-17T10:17:07.193
> 
> 标签：asp.net, umbraco

我可以请求位于“/umbraco”文件夹中但不在站点根目录中的 ASP.net 页面。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:34:25.253

您需要将 url 添加到保留的 url 列表中（查看 web 配置）。我建议您将您的 asp.net 网页放在自定义文件夹（例如 /pages/）中，然后保留该文件夹。

这样您就可以保留 /pages/ 并且其中的任何页面都将加载。只要确保将您的 dll 添加到 bin 等。

# codeigniter - Codeigniter - “foo”子域可以自动使用“foo”文件夹中的控制器吗？

> ID：14376761
> 
> 赞同：1
> 
> 时间：2013-01-17T10:17:32.253
> 
> 标签：codeigniter, subdomain, subdirectory, wildcard-subdomain

与 Codeigniter 一样，假设我有`$route['default_controller'] = "welcome";`，如果我请求左侧的 url，我将使用右侧列出的控制器：

```
www.foo.com/         =>  applications/controllers/welcome.php with method "index"
www.foo.com/bar      =>  applications/controllers/bar.php with method "index"
www.foo.com/bar/baz  =>  applications/controllers/bar.php with method "baz" 
```

这一切都在预料之中。但是当使用子域时，我想让codeigniter**在与子域同名的子目录中使用控制器：**

```
abc.foo.com/         =>  app/controllers/abc/welcome.php with method "index"
abc.foo.com/baz      =>  app/controllers/abc/baz.php with method "index"
abc.foo.com/baz/qux  =>  app/controllers/abc/baz.php with method "qux" 
```

这可以通过路线完成吗？如果是这样，您如何根据子域设置路由？

或者有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:31:12.537

您可以检查 routes.php 文件中的子域，例如：

```
if (strstr($_SERVER['HTTP_HOST'], 'abc.foo.com')) {
   $route['uri'] = "abc/controller/method";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:16:44.843

是的，这是可能的，

`$route['the/path'] = "folder/controller/method";`

# c# - 我在哪里可以找到“Microsoft.SqlServer.BatchParser.dll”？

> ID：14376764
> 
> 赞同：1
> 
> 时间：2013-01-17T10:17:42.607
> 
> 标签：c#, asp.net, sql-server, sql-server-2008, visual-studio-2008

> **可能重复：**
> [找不到 microsoft.sqlserver.batchparser.dll](https://stackoverflow.com/questions/3981027/cant-find-microsoft-sqlserver-batchparser-dll)

我安装了 Microsoft SQL Server 2008 R2。

我想`Microsoft.SqlServer.BatchParser.dll`在 C# 中包含为 Assebly。但是我找不到那个dll。

如果我去我的 GAC 文件夹，Assebly 就在那里：

![在此处输入图像描述](../Images/1a84786245fd17a73141fd8095389a97.png)

但是 VS2008 中的引用对话框不会显示给我。

我在哪里可以找到或如何获得该 dll？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:28:55.273

BatchParser 是 SMO 的一部分。作为一个简单的规则，除非明确允许，否则永远不允许重新分发不是您自己创建的 DLL。可再发行 DLL 以可再发行包的形式出现。对于 SQL Server，SMO 可再发行包以“功能包”的形式出现。对于 SQL Server 2008，相应的功能包已[在此处](http://blogs.technet.com/b/dataplatforminsider/archive/2008/10/18/sql-server-feature-pack-released.aspx)公布，但功能包本身的链接已损坏。您可以使用[Microsoft® SQL Server® 2008 R2 Feature Pack](http://www.microsoft.com/en-gb/download/details.aspx?id=16978)。它包含[SharedManagementObjects.msi](http://go.microsoft.com/fwlink/?LinkID=188438&clcid=0x409)，您需要将其包含在内并随应用程序一起分发，以在目标计算机上安装所需的 SMO 对象。另一种选择是使用[开源 SQL 批处理执行库](https://github.com/rusanu/DbUtilSqlCmd)。

# javascript - ColorBox - 错误：cboxElement 缺少设置对象

> ID：14376774
> 
> 赞同：3
> 
> 时间：2013-01-17T10:18:08.637
> 
> 标签：javascript, jquery, html, colorbox

我想做的是在[ColorBox](http://www.jacklmoore.com/colorbox)灯箱中播放视频。

我的 HTML 代码如下。当我单击链接时，它应该播放视频。

```
<a href="http://cdn-azu-ns.viddy.com/media/video/0b2b103a-0c40-48a4-877a-64645ef5a0ae-high.mp4?t=634914421568400000" target="_blank" class="photo_link cboxElement iframe">Video</a> 
```

我对 Colorbox 的操作如下。将视频加载到灯箱中。

```
jQuery(".iframe").colorbox({iframe:true, width:"80%", height:"80%"}); 
```

它给了我以下错误。

```
Error: cboxElement missing settings object 
```

截屏

![在此处输入图像描述](../Images/d8a269f1d624173f72add9d7e8f7b1af.png)

我应该怎么做才能解决这个问题？鉴于除了以上一个之外没有任何js错误。正确包含 jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-31T15:35:42.290

我有同样的问题。我很难理解究竟是为什么，但是颜色框在某个地方遇到了冲突，因为它在内部也使用了名称“iframe”。当类名“iframe”用作调用函数的类时，不知何故这会导致冲突。

在我的情况下改变

```
jQuery(".iframe").colorbox({iframe:true, width:"80%", height:"80%"}); 
```

到：

```
 jQuery(".photo_link").colorbox({iframe:true, width:"80%", height:"80%"}); 
```

工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T16:21:50.107

好吧，这对我有用。即使一切就绪并且所有代码都是在后端生成的，但由于某种原因，colorbox 没有正确拾取链接，因为在我的页面上，链接位于鼠标悬停时显示/隐藏的 div 内。无论如何，它对我有用的方式是这样的：

```
$(".iframe").live('click', function(e){
        $(this).colorbox({href: $(this).attr('href'), iframe:true, innerWidth:640, innerHeight:480, open:true});
        e.preventDefault();
        return false;
    }); 
```

通过这种方式，您将操作重新绑定到元素，然后强制颜色框打开链接。

我希望它对你有用，现在还为时不晚。

PS：如果你使用 jQuery 1.9+，你必须使用 on 而不是 live

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T19:34:36.853

我遇到了同样的错误，并通过删除对 colorbox 的重复调用来解决它。我已将库和颜色框函数都包含在两个单独的包含文件中。我认为它一定是重复的，因为我必须在每个颜色框窗口启动后关闭它两次。

检查您的代码并确保 jquery.colorbox-min.js 仅包含一次，以及调用它的函数。就我而言，我的功能很简单：

```
$(document).ready(function(){
    $("a.single_image").colorbox();
    $("a.link_preview").colorbox({iframe:true, width:"80%", height:"90%"});
}); 
```

删除重复调用后，问题就消失了。希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-23T18:25:46.753

我遇到了这个错误**Error: cboxElement missing settings object** when making a second *jQuery* *on document ready function call* after the initial *on document ready function call* that hold the *colorbox parameters*。

**我的情况：**

*   在我的页面上，我只使用并调用一个包含我所有代码的外部 .js 文件。

*   在外部 .js 文件中，我在 *jQuery* *on document ready function中有**颜色框参数*。

***   在问题页面（*cboxElement 缺少设置对象
    错误*的页面）上，紧随外部 .js 文件之后，我有一些使用*文档就绪函数的*
    *jQuery*代码：**$(function(){});**** 

 *******我的问题：**

这第二个文档就绪调用导致并触发了错误**Error: cboxElement missing settings object** for me。

**我的解决方案：**

修复就像将有问题的页面代码从使用*jQuery 的* *文档就绪函数*更改为使用*Javascript 的*本机*自动执行匿名函数*一样简单。

```
(function(){
})(); 
```

果然错误 **错误：cboxElement缺少设置对象**消失了，一切正常！*****

# java - wsimport 的默认绑定是什么？

> ID：14376775
> 
> 赞同：1
> 
> 时间：2013-01-17T10:18:09.567
> 
> 标签：java, web-services, jaxb, jax-ws, wsimport

我使用 wsimport 来生成我的客户端存根。我的 wsimport 代码是这样的：

```
wsimport -wsdllocation webservice.wsdl -keep webservice.wsdl -B-XautoNameResolution 
```

我使用什么绑定？我在使用 JAXB 吗？我如何知道我是否在使用 JAXB？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:25:15.960

[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)是[**JAX-WS (JSR-224)**](http://jcp.org/en/jsr/detail?id=224)实现的标准绑定层。`javax.xml.bind.annotation`如果生成的域模型具有来自包的注释，您将知道您正在使用 JAXB

# css - mso 属性列表

> ID：14376783
> 
> 赞同：18
> 
> 时间：2013-01-17T10:18:33.453
> 
> 标签：css, ms-office

我正在搜索带有 mso- 前缀的 Microsoft 特定 CSS 属性列表。

任何指向官方或非官方来源的链接都很棒。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2014-12-29T21:13:50.333

我只是在查找 MS Office 前缀样式属性列表时遇到了同样的困难。我找到了这个[链接](http://msdn.microsoft.com/en-us/library/Aa155477)，但它甚至没有很好的组织。因此，我决定在 Gist 中写下一份清单，以供所有正在寻找这些麻烦的人使用。仍然没有找到所有的东西，但你可能会发现这个资源至少作为网络上的参考很有帮助。

**MS Office 前缀样式属性** [https://gist.github.com/webtobesocial/ac9d052595b406d5a5c1](https://gist.github.com/webtobesocial/ac9d052595b406d5a5c1)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-17T15:11:52.813

可以通过[Microsoft® Office HTML 和 XML 参考](http://msdn.microsoft.com/en-us/library/Aa155477)页面找到 Microsoft 关于该主题的信息。它链接到一个 .exe 文件，该文件在执行时（当然是在 Windows 上）安装 C:\ofhtml9\ofhtml9.chm。该材料相当广泛，并且组织得不是特别好。但是在搜索框中搜索“mso-”，您会发现一个标题为“样式属性”的长表，其中包含标准和非标准 CSS 属性。

该表“显示了 Microsoft Office 2000 使用的样式属性”，但我不知道其他 Office 版本的类似信息。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-11-05T11:13:03.063

此[MSO - 样式参考表](https://stigmortenmyre.no/mso/html/concepts/ofconstyletable.htm)链接包含 372 种 Microsoft 特定样式的列表，其中包括电子邮件中使用的常用样式，例如`style="mso-line-height-rule:exactly;"`，它可以防止 Outlook 覆盖您的行高样式`line-height:20px;`等。您只需在该链接中输入`mso`过滤器栏和它应该为您提供带有 mso- 前缀的 Microsoft 特定 CSS 属性列表。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T10:31:52.367

我能找到的最接近的是这个列表： ~~[链接到列表](http://devfiles.myopera.com/articles/599/cssproplist-url.htm)~~ [链接到列表的存档](http://web.archive.org/web/20111227154247/http://devfiles.myopera.com/articles/599/cssproplist-url.htm)

我假设 mso 上的 ctrl+f 会很快向您展示您所需要的一切？然后从那里您可以快速收集您的清单。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-08-10T07:02:44.517

我见过的最好的属性列表位于[Litmus](https://litmus.com/community/learning/8-outlook-overview)。

真正的问题不是找到一个 mso- 属性列表，而是它们如何工作的详细信息。

对于追随我脚步的任何人，您可能会在打开此线程上其他人链接的 CHM 文件时遇到问题。有一个适用于 Mac 的 CHM 阅读器运行良好，尽管它毫无意义，因为其中几乎没有任何有用的信息。[您可以在App Store](https://itunes.apple.com/us/app/chm-reader/id424182884?mt=12)上找到该阅读器

# ios - UINavigationController 状态恢复（无情节提要）

> ID：14376786
> 
> 赞同：18
> 
> 时间：2013-01-17T10:18:37.650
> 
> 标签：ios, ios6, state-restoration

我一直在玩弄状态恢复。在下面的代码中，UITableViewController 的滚动位置被恢复，但是，如果我要点击进入详细视图（将 MyViewController 的实例推送到导航堆栈上），当应用程序重新启动时，它总是返回到第一个视图导航堆栈中的控制器（即 MyTableViewController）。有人能帮我恢复到正确的视图控制器（即 MyOtherViewController）吗？

**AppDelegate.m**

```
- (BOOL)launchWithOptions:(NSDictionary *)launchOptions
{
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.

        MyTableViewController *table = [[MyTableViewController alloc] initWithStyle:UITableViewStylePlain];
        table.depth = 0;
        UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:table];
        navCon.restorationIdentifier = @"navigationController";

        self.window.rootViewController = navCon;

        self.window.backgroundColor = [UIColor whiteColor];
        [self.window makeKeyAndVisible];

    });

    return YES;
}

- (BOOL)application:(UIApplication *)application willFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return [self launchWithOptions:launchOptions];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    return [self launchWithOptions:launchOptions];
} 
```

**MyTableViewController.m**

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if(self)
    {
        self.restorationIdentifier = @"master";
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Master";
    self.tableView.restorationIdentifier = @"masterView";
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 5;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 10;
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return [NSString stringWithFormat:@"Section %d", section];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%d", indexPath.row];

    return cell;
}

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyOtherViewController *vc = [[MyOtherViewController alloc] initWithNibName:nil bundle:nil];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

**MyOtherViewController.m**

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.restorationIdentifier = @"detail";
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.title = @"Detail";
    self.view.backgroundColor = [UIColor redColor];
    self.view.restorationIdentifier = @"detailView";
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-23T01:35:15.770

因为您是在代码中创建详细视图控制器，而不是从 Storyboard 中实例化它，所以您需要实现一个恢复类，因此系统恢复过程知道如何创建详细视图控制器。

恢复类实际上只是一个工厂，它知道如何从恢复路径创建特定的视图控制器。您实际上不必为此创建单独的类，我们可以在 MyOtherViewController 中处理它：

在 MyOtherViewController.h 中，实现协议：UIViewControllerRestoration

然后当你在 MyOtherViewController.m 中设置 restoreID 时，还要设置恢复类：

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.restorationIdentifier = @"detail";
        self.restorationClass = [self class]; //SET THE RESTORATION CLASS
    }
    return self;
} 
```

然后你需要在恢复类（MyOtherViewController.m）中实现这个方法

```
 +(UIViewController *) viewControllerWithRestorationIdentifierPath:(NSArray *)identifierComponents coder:(NSCoder *)coder
{
   //At a minimum, just create an instance of the correct class. 
    return [[MyOtherViewController alloc] initWithNibName:nil bundle:nil];
} 
```

这使您能够创建恢复子系统并将详细视图控制器推送到导航堆栈上。（你最初问的是什么。）

**扩展示例以处理状态：**

在一个真实的应用程序中，您需要保存状态并处理恢复它......我将以下属性定义添加到 MyOtherViewController 来模拟这一点：

```
@property (nonatomic, strong) NSString *selectedRecordId; 
```

我还修改了 MyOtherViewContoller 的 viewDidLoad 方法，将 Detail 标题设置为用户选择的任何记录 Id：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
  //  self.title = @"Detail";
    self.title = self.selectedRecordId;
    self.view.backgroundColor = [UIColor redColor];
    self.view.restorationIdentifier = @"detailView";
} 
```

为了使示例工作，我在最初从 MyTableViewController 推送详细视图时设置了 selectedRecordId：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MyOtherViewController *vc = [[MyOtherViewController alloc] initWithNibName:nil bundle:nil];
    vc.selectedRecordId = [NSString stringWithFormat:@"Section:%d, Row:%d", indexPath.section,  indexPath.row];
    [self.navigationController pushViewController:vc animated:YES];
} 
```

另一个缺失的部分是 MyOtherViewController 中的方法，您的详细视图，用于保存 Detail 控制器的状态。

```
-(void)encodeRestorableStateWithCoder:(NSCoder *)coder
{
    [coder encodeObject:self.selectedRecordId forKey:@"selectedRecordId"];
    [super encodeRestorableStateWithCoder:coder];
}

-(void)decodeRestorableStateWithCoder:(NSCoder *)coder
{
     self.selectedRecordId = [coder decodeObjectForKey:@"selectedRecordId"];
    [super decodeRestorableStateWithCoder:coder];
} 
```

现在这实际上还没有完全奏效。这是因为“ViewDidLoad”方法在 deoreRestorablStateWithCoder 方法之前在恢复时被调用。因此，在显示视图之前不会设置标题。为了解决这个问题，我们可以在 viewWillAppear: 中设置 Detail 视图控制器的标题，或者我们可以修改 viewControllerWithRestorationIdentifierPath 方法以在它创建类时恢复状态，如下所示：

```
+(UIViewController *) viewControllerWithRestorationIdentifierPath:(NSArray *)identifierComponents coder:(NSCoder *)coder
{
    MyOtherViewController *controller =  [[self alloc] initWithNibName:nil bundle:nil];
    controller.selectedRecordId = [coder decodeObjectForKey:@"selectedRecordId"];
    return controller;

} 
```

而已。

**其他一些注意事项...**

即使我没有看到代码，我认为您在 App Delegate 中执行了以下操作？

```
-(BOOL) application:(UIApplication *)application shouldSaveApplicationState:(NSCoder *)coder
{
    return YES;
}
- (BOOL) application:(UIApplication *)application shouldRestoreApplicationState:(NSCoder *)coder 
{
    return YES;
} 
```

在模拟器中运行演示代码并正确保留滚动偏移量时，我看到了一些不稳定。它似乎偶尔对我有用，但并非一直有效。我怀疑这可能是因为真正恢复 MyTableViewController 也应该使用 restoreClass 方法，因为它是在代码中实例化的。但是我还没有尝试过。

我的测试方法是通过返回跳板将应用程序置于后台（需要保存应用程序状态。），然后从 XCode 中重新启动应用程序以模拟干净启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T11:20:47.147

您的代码的唯一问题是导航控制器这两行

```
UINavigationController *navCon = [[UINavigationController alloc] initWithRootViewController:table];
    navCon.restorationIdentifier = @"navigationController"; 
```

我不知道为什么导航控制器永远不会得到它的恢复类。我有同样的问题。我找到了一些替代解决方案来在故事板中创建一个独立的导航控制器并使用它。

这是代码

```
UIStoryboard* storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" 
    bundle:nil];
UINavigationController* navigationController = [storyboard
    instantiateViewControllerWithIdentifier:
    @"UINavigationController"];

navigationController.viewControllers = @[myController]; 
```

它会正常工作。

只需遵循此[http://petr-pavlik.squarespace.com/blog/2013/6/16/stare-restoration-without-storyboard](http://petr-pavlik.squarespace.com/blog/2013/6/16/stare-restoration-without-storyboard)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T21:44:17.250

由于您是在代码中而不是通过 Storyboard 执行此操作，因此您不仅需要提供一个细节视图控制器，`restorationIdentifier`还需要提供一个`restorationClass`细节视图控制器。

您可以将其保留为未分配，在这种情况下`-(UIViewController *)application:(UIApplication *)application viewControllerWithRestorationIdentifierPath:(NSArray *)identifierComponents coder:(NSCoder *)coder`，会在应用程序委托上调用以创建对象（带有`restorationIdentifier`但没有的视图控制器`restorationClass`）。

尝试以下操作（请注意`UIViewControllerRestoration`协议）：

```
@interface MyViewController ()<UIViewControllerRestoration>
@end

@implementation

- (id)init
{
    self = [super init];
    if (self) {
        // Custom initialization
    }

    if( [self respondsToSelector:@selector(restorationIdentifier)] ){
        self.restorationIdentifier = @"DetailViewController";
        self.restorationClass = [self class];
    }
    return self;
}

#pragma mark - State restoration

+ (UIViewController *)viewControllerWithRestorationIdentifierPath:(NSArray *)identifierComponents coder:(NSCoder *)coder
{
    UIViewController *viewController = [[self alloc] init];

    return viewController;
}

@end 
```

另请注意，这是一个非常简单的示例，通常您可能会有更多有趣的事情发生`-viewControllerWithRestorationIdentifierPath:coder:`

# c# - 为什么在 OnPaint 中更改字体大小时出现 StackOverflowException'

> ID：14376798
> 
> 赞同：0
> 
> 时间：2013-01-17T10:19:19.247
> 
> 标签：c#

我尝试按照以下代码在运行时更改字体大小，但我总是得到`StackOverflowException`.

```
protected override void OnResize(EventArgs e)
{
    this.bitmapDoubleBuffer = new Bitmap(base.Width, base.Height);
    this.backGraphics = Graphics.FromImage(this.bitmapDoubleBuffer);
}

public void ReDrawRuntime()
{
    SizeF sizeF = this.backGraphics.MeasureString(this.Text, this.Font);
    if (sizeF.Width > this.Size.Width)
    {
        this.Font = new Font(this.Font.Name, 20, this.Font.Style);
        sizeF = this.backGraphics.MeasureString(this.Text, this.Font);
    }
    this.backGraphics.DrawString(this.Text, 
                this.Font, 
                this.solidBrushForeColor, 
                (float)((int)width), 
                (float)((int)height));
    this.graphicsDoubleBuffer.DrawImage(this.bitmapDoubleBuffer, 0, 0);
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:21:54.160

导致更改字体**大小**会增加文本所基于的控件的大小，这将引发 Resize 事件 agin (look on `this.Font =..`, this !!) ，这将再次运行您的代码，这*可能*（根据异常）将验证为 true ：

```
if (sizeF.Width > this.Size.Width) 
```

条件再次等等......

所以一般规则是：不要改变内部控件的形状，`OnResize`在另一个地方做。

# jsf-2 - JSF2 自定义组件 (UIInput) 'value' 属性

> ID：14376803
> 
> 赞同：1
> 
> 时间：2013-01-17T10:19:48.567
> 
> 标签：jsf-2, custom-component

您好我正在尝试创建一个扩展的自定义组件`UIInput`。在该组件中，我生成一个 html 输入、一个 html 提交按钮和一行文本。代码如下：

```
@Override
public void decode(FacesContext context) {
    Map requestMap = context.getExternalContext().getRequestParameterMap();
    String clientId = getClientId(context);
    char sep = UINamingContainer.getSeparatorChar(context);
    String symbol = ((String) requestMap.get(clientId + sep + "inputfield"));
    setSubmittedValue(symbol);
}

@Override
public void encodeEnd(FacesContext context) throws IOException {
    String clientId = getClientId(context);
    char sep = UINamingContainer.getSeparatorChar(context);
    //-----------------------this generates an html input-------------------------
    encodeInputField(context, clientId + sep + "inputfield");
    //Now if I uncomment the next line it generates another html, whose value always stays the same as the first one
    //encodeInputField(context, clientId + sep + "inputfield2");
    encodeSubmitButton(context, clientId + sep + "submit");
    encodeOutputField(context);
}

private void encodeInputField(FacesContext context, String clientId) throws IOException {
    // Render a standard HTML input field
    ResponseWriter writer = context.getResponseWriter();
    writer.startElement("input", this);
    writer.writeAttribute("type", "text", null);
    writer.writeAttribute("name", clientId, "clientId");
    Object value = getValue();
    if (value != null) {
        writer.writeAttribute("value", value.toString(), "value");
    }
    writer.writeAttribute("size", "6", null);
    writer.endElement("input");
}

private void encodeSubmitButton(FacesContext context, String clientId) throws IOException {
    // render a submit button
    ResponseWriter writer = context.getResponseWriter();
    writer.startElement("input", this);
    writer.writeAttribute("type", "Submit", null);
    writer.writeAttribute("name", clientId, "clientId");
    writer.writeAttribute("value", "Click Me!", null);
    writer.endElement("input");
}

private void encodeOutputField(FacesContext context) throws IOException {
    ResponseWriter writer = context.getResponseWriter();
    //----------------weird value that comes out of nowhere-----------------------
    String hellomsg = (String) getAttributes().get("value");
    writer.startElement("p", this);
    writer.writeText("You entered: " + hellomsg, null);
    writer.endElement("p");
} 
```

现在一切正常，但我不明白`value`属性的`String hellomsg = (String) getAttributes().get("value");`来源。我试图调试这个程序，`getAttributes()`hashmap 还包含奇怪的条目，我找不到任何键为`"value"`.

最后，如果我生成两个 html 输入，那么第二个输入的值始终与第一个相同。

我还注意到我可以`value`在标签中包含 a，例如`<mycc:cinput value="yes">`，当页面加载时，生成的 html 输入的值设置为`yes`.

我的疑问是：每个 UIInput 都有默认`value`属性吗？如果是这样，该属性值是否总是链接到任何 html 输入的`value`属性？如果是这样，它是否总是链接到`value`生成的第一个 html 输入的属性？

提前感谢您阅读这么长的问题。如果可能的话，你们能告诉我在哪里可以找到此类问题的答案吗？浏览随机的谷歌搜索结果让我头疼@_@

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:26:25.517

> *现在一切正常，但我不明白 String hellomsg = (String) getAttributes().get("value"); 中的 value 属性在哪里 来了。我试图调试这个程序，getAttributes() hashmap 也包含奇怪的条目，我找不到任何键为“value”的条目。*

阅读. [_ `UIComponent#getAttributes()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getAttributes%28%29)直截了当地说，这确实是一张抽象地图。并`get("value")`没有真正从映射中返回条目，但它基本上`value`通过调用其方法（如果有）来获取组件本身的属性（`getValue()`如果有的话`UIInput`）。但是如果您已经坐在组件本身中，则不需要调用`getAttributes().get("value")`，您可以直接调用该`getValue()`方法。

因此请注意，如果您打算在属性映射中放置自定义属性，那么您应该使用不同的名称，或者更好地使用`StateHelper`.

### 也可以看看：

*   [JSF 自定义组件：支持自定义类型的参数，从不调用属性设置器](https://stackoverflow.com/questions/13491805/jsf-custom-component-support-for-arguments-of-custom-types-the-attribute-sette)
*   [扩展 UIComponentBase 时如何保存状态](https://stackoverflow.com/questions/9405278/how-to-save-state-when-extending-uicomponentbase)

# node.js - 完整的 WebRTC 堆栈

> ID：14376805
> 
> 赞同：1
> 
> 时间：2013-01-17T10:19:51.370
> 
> 标签：node.js, networking, distributed, p2p, webrtc

1.  我试图了解创建具有文本、音频和视频交换功能的应用程序的正确工具是什么。作为服务器端工具，我想使用 node.js。
2.  有很多示例向您展示了客户端代码，但是服务器端呢？我知道，WebRTC 服务器仅用于信令目的，但我找不到描述性指南帮助我找出如何说：“嘿，这是这个人，他想和你说话，所以这是他的 IP”或类似的东西。
3.  如何确保我正在建立直接连接？如何建立最高效的连接？我知道有一些 NAT 遍历协议，但是我如何明确地使用/启用它们？
4.  我可以通过连接多对多对等点并拥有一些信令/身份验证服务器来创建类似 Skype 的分布式网络吗？或者也许只使用一些对等点作为服务器来发送信号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:15:05.960

1.  以上都可以通过Flash Media Server（或者开源的Red5）等软件获得。如果您想使用 Node.JS，您将需要创建 Node 服务（消息队列、媒体服务器），或者使用一些已经可用的服务，并让 Node.JS 处理它们之间的交互。因此，所有这些都将是必需的：

    *   带有 Web 套接字的节点 Web 服务
    *   节点/其他消息代理 (mq)
    *   节点/其他媒体服务器（FMS、Red5）
    *   可选，用于多个 Node Web 服务 (Redis) 的缓存服务
2.  您可以选择 Flash，它对 RTMFP/RTMP 有很好的支持。如果你真的想要 WebRTC，你必须为 p2p 发现创建一个 STUN 节点服务，它连接到缓存服务来处理授权。

3.  RTMFP 是一个选项，webrtc 也是。大多数性能取决于您如何定义性能：质量？潜伏？应该如何偏向？如果您想要低延迟，请选择 p2p。如果您想要录制功能，可以使用 rtmp 或节点 webrtc 中继。

4.  是的，但您很可能需要一个团队来做到这一点:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T16:58:52.343

找到了几乎所有的答案:)

1.  服务器端工具没有任何限制，因此您可以使用任何您想要的工具。Node.js 非常适合。出于通信目的，可以使用 WebSockets 或 XHR，但对任何其他都没有限制。
2.  在创建连接的过程中，浏览器会生成一些包含所有需要数据的事件。您只需将其发送到双方并在那里进行处理。还有提供/回答系统，因此只有在双方同意的情况下才能进行连接。
3.  默认情况下，浏览器将尝试建立最佳连接。如果无法完成，它将回退到 TURN，它通过服务器转换数据。
4.  DataChannels 将有可能实现。

# java - 在Android中从/向文件读取/写入字符串

> ID：14376807
> 
> 赞同：251
> 
> 时间：2013-01-17T10:20:02.560
> 
> 标签：java, android, string, file-io

我想通过获取从 EditText 输入的文本将文件保存到内部存储器。然后我希望同一个文件以字符串形式返回输入的文本并将其保存到另一个字符串以供以后使用。

这是代码：

```
package com.omm.easybalancerecharge;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText num = (EditText) findViewById(R.id.sNum);
        Button ch = (Button) findViewById(R.id.rButton);
        TelephonyManager operator = (TelephonyManager) getSystemService(Context.TELEPHONY_SERVICE);
        String opname = operator.getNetworkOperatorName();
        TextView status = (TextView) findViewById(R.id.setStatus);
        final EditText ID = (EditText) findViewById(R.id.IQID);
        Button save = (Button) findViewById(R.id.sButton);

        final String myID = ""; //When Reading The File Back, I Need To Store It In This String For Later Use

        save.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //Get Text From EditText "ID" And Save It To Internal Memory
            }
        });
        if (opname.contentEquals("zain SA")) {
            status.setText("Your Network Is: " + opname);
        } else {
            status.setText("No Network");
        }
        ch.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                //Read From The Saved File Here And Append It To String "myID"

                String hash = Uri.encode("#");
                Intent intent = new Intent(Intent.ACTION_CALL);
                intent.setData(Uri.parse("tel:*141*" + /*Use The String With Data Retrieved Here*/ num.getText()
                        + hash));
                startActivity(intent);
            }
        });
    } 
```

我已经包含评论以帮助您进一步分析我的观点，即我希望在哪里完成操作/使用变量。

* * *

## 回答 #1

> 赞同：381
> 
> 时间：2013-01-17T10:39:53.160

希望这可能对你有用。

写文件：

```
private void writeToFile(String data,Context context) {
    try {
        OutputStreamWriter outputStreamWriter = new OutputStreamWriter(context.openFileOutput("config.txt", Context.MODE_PRIVATE));
        outputStreamWriter.write(data);
        outputStreamWriter.close();
    }
    catch (IOException e) {
        Log.e("Exception", "File write failed: " + e.toString());
    } 
} 
```

阅读文件：

```
private String readFromFile(Context context) {

    String ret = "";

    try {
        InputStream inputStream = context.openFileInput("config.txt");

        if ( inputStream != null ) {
            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);
            BufferedReader bufferedReader = new BufferedReader(inputStreamReader);
            String receiveString = "";
            StringBuilder stringBuilder = new StringBuilder();

            while ( (receiveString = bufferedReader.readLine()) != null ) {
                stringBuilder.append("\n").append(receiveString);
            }

            inputStream.close();
            ret = stringBuilder.toString();
        }
    }
    catch (FileNotFoundException e) {
        Log.e("login activity", "File not found: " + e.toString());
    } catch (IOException e) {
        Log.e("login activity", "Can not read file: " + e.toString());
    }

    return ret;
} 
```

* * *

## 回答 #2

> 赞同：218
> 
> 时间：2014-02-28T10:48:30.260

对于那些寻找将字符串读取和写入文件的一般策略的人：

**首先，获取一个文件对象**

您将需要存储路径。对于内部存储，请使用：

```
File path = context.getFilesDir(); 
```

对于外部存储（SD 卡），请使用：

```
File path = context.getExternalFilesDir(null); 
```

然后创建你的文件对象：

```
File file = new File(path, "my-file-name.txt"); 
```

**将字符串写入文件**

```
FileOutputStream stream = new FileOutputStream(file);
try {
    stream.write("text-to-write".getBytes());
} finally {
    stream.close();
} 
```

或者使用谷歌番石榴

> 字符串内容 = Files.toString(file, StandardCharsets.UTF_8);

**将文件读入字符串**

```
int length = (int) file.length();

byte[] bytes = new byte[length];

FileInputStream in = new FileInputStream(file);
try {
    in.read(bytes);
} finally {
    in.close();
}

String contents = new String(bytes); 
```

或者，如果您使用的是 Google Guava

```
String contents = Files.toString(file,"UTF-8"); 
```

为了完整起见，我会提到

```
String contents = new Scanner(file).useDelimiter("\\A").next(); 
```

它不需要库，但基准测试比其他选项慢 50% - 400%（在我的 Nexus 5 上的各种测试中）。

**笔记**

对于这些策略中的每一个，您都会被要求捕获一个 IOException。

Android 上的默认字符编码是 UTF-8。

如果您使用的是外部存储，则需要添加到清单中：

```
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

或者

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

写权限意味着读权限，所以你不需要两者。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-07-23T15:08:59.793

```
public static void writeStringAsFile(final String fileContents, String fileName) {
    Context context = App.instance.getApplicationContext();
    try {
        FileWriter out = new FileWriter(new File(context.getFilesDir(), fileName));
        out.write(fileContents);
        out.close();
    } catch (IOException e) {
        Logger.logError(TAG, e);
    }
}

public static String readFileAsString(String fileName) {
    Context context = App.instance.getApplicationContext();
    StringBuilder stringBuilder = new StringBuilder();
    String line;
    BufferedReader in = null;

    try {
        in = new BufferedReader(new FileReader(new File(context.getFilesDir(), fileName)));
        while ((line = in.readLine()) != null) stringBuilder.append(line);

    } catch (FileNotFoundException e) {
        Logger.logError(TAG, e);
    } catch (IOException e) {
        Logger.logError(TAG, e);
    } 

    return stringBuilder.toString();
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-12-16T06:18:06.127

只需对从文件方法中读取字符串进行一些修改以获得更高的性能

```
private String readFromFile(Context context, String fileName) {
    if (context == null) {
        return null;
    }

    String ret = "";

    try {
        InputStream inputStream = context.openFileInput(fileName);

        if ( inputStream != null ) {
            InputStreamReader inputStreamReader = new InputStreamReader(inputStream);               

            int size = inputStream.available();
            char[] buffer = new char[size];

            inputStreamReader.read(buffer);

            inputStream.close();
            ret = new String(buffer);
        }
    }catch (Exception e) {
        e.printStackTrace();
    }

    return ret;
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-17T10:28:59.230

检查下面的代码。

从文件系统中的文件读取。

```
FileInputStream fis = null;
    try {

        fis = context.openFileInput(fileName);
        InputStreamReader isr = new InputStreamReader(fis);
        // READ STRING OF UNKNOWN LENGTH
        StringBuilder sb = new StringBuilder();
        char[] inputBuffer = new char[2048];
        int l;
        // FILL BUFFER WITH DATA
        while ((l = isr.read(inputBuffer)) != -1) {
            sb.append(inputBuffer, 0, l);
        }
        // CONVERT BYTES TO STRING
        String readString = sb.toString();
        fis.close();

    catch (Exception e) {

    } finally {
        if (fis != null) {
            fis = null;
        }
    } 
```

下面的代码是将文件写入内部文件系统。

```
FileOutputStream fos = null;
    try {

        fos = context.openFileOutput(fileName, Context.MODE_PRIVATE);
        fos.write(stringdatatobestoredinfile.getBytes());
        fos.flush();
        fos.close();

    } catch (Exception e) {

    } finally {
        if (fos != null) {
            fos = null;
        }
    } 
```

我想这会对你有所帮助。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-05-10T07:53:17.927

我是一个初学者，今天很难让它发挥作用。

下面是我结束的课程。它有效，但我想知道我的解决方案有多不完美。无论如何，我希望你们中一些更有经验的人可能愿意看看我的 IO 课程并给我一些提示。干杯!

```
public class HighScore {
    File data = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator);
    File file = new File(data, "highscore.txt");
    private int highScore = 0;

    public int readHighScore() {
        try {
            BufferedReader br = new BufferedReader(new FileReader(file));
            try {
                highScore = Integer.parseInt(br.readLine());
                br.close();
            } catch (NumberFormatException | IOException e) {
                e.printStackTrace();
            }
        } catch (FileNotFoundException e) {
            try {
                file.createNewFile();
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
            e.printStackTrace();
        }
        return highScore;
    }

    public void writeHighScore(int highestScore) {
        try {
            BufferedWriter bw = new BufferedWriter(new FileWriter(file));
            bw.write(String.valueOf(highestScore));
            bw.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2021-01-04T06:27:31.390

`Kotlin`使用内置扩展功能的方式`File`

**写：** `yourFile.writeText(textFromEditText)`
**读：** `yourFile.readText()`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-09-03T03:47:28.010

我们首先需要的是 AndroidManifest.xml 中的权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

所以在 asyncTask Kotlin 类中，我们处理文件的创建

```
 import android.os.AsyncTask
    import android.os.Environment
    import android.util.Log
    import java.io.*
    class WriteFile: AsyncTask<String, Int, String>() {
        private val mFolder = "/MainFolder"
        lateinit var folder: File
        internal var writeThis = "string to cacheApp.txt"
        internal var cacheApptxt = "cacheApp.txt"
        override fun doInBackground(vararg writethis: String): String? {
            val received = writethis[0]
            if(received.isNotEmpty()){
                writeThis = received
            }
            folder = File(Environment.getExternalStorageDirectory(),"$mFolder/")
            if(!folder.exists()){
                folder.mkdir()
                val readME = File(folder, cacheApptxt)
                val file = File(readME.path)
                val out: BufferedWriter
                try {
                    out = BufferedWriter(FileWriter(file, true), 1024)
                    out.write(writeThis)
                    out.newLine()
                    out.close()
                    Log.d("Output_Success", folder.path)
                } catch (e: Exception) {
                    Log.d("Output_Exception", "$e")
                }
            }
            return folder.path

    }

        override fun onPostExecute(result: String) {
            super.onPostExecute(result)

            if(result.isNotEmpty()){
                //implement an interface or do something
                Log.d("onPostExecuteSuccess", result)
            }else{
                Log.d("onPostExecuteFailure", result)
            }
        }

    } 
```

当然，如果您使用的是 Api 23 以上的 Android，您必须处理允许写入设备内存的请求。像这样的东西

```
 import android.Manifest
    import android.content.Context
    import android.content.pm.PackageManager
    import android.os.Build
    import androidx.appcompat.app.AppCompatActivity
    import androidx.core.app.ActivityCompat
    import androidx.core.content.ContextCompat

    class ReadandWrite {
        private val mREAD = 9
        private val mWRITE = 10
        private var readAndWrite: Boolean = false
        fun readAndwriteStorage(ctx: Context, atividade: AppCompatActivity): Boolean {
            if (Build.VERSION.SDK_INT < 23) {
                readAndWrite = true
            } else {
                val mRead = ContextCompat.checkSelfPermission(ctx, Manifest.permission.READ_EXTERNAL_STORAGE)
                val mWrite = ContextCompat.checkSelfPermission(ctx, Manifest.permission.WRITE_EXTERNAL_STORAGE)

                if (mRead != PackageManager.PERMISSION_GRANTED) {
                    ActivityCompat.requestPermissions(atividade, arrayOf(Manifest.permission.READ_EXTERNAL_STORAGE), mREAD)
                } else {
                    readAndWrite = true
                }

                if (mWrite != PackageManager.PERMISSION_GRANTED) {
                    ActivityCompat.requestPermissions(atividade, arrayOf(Manifest.permission.WRITE_EXTERNAL_STORAGE), mWRITE)
                } else {
                    readAndWrite = true
                }
            }
            return readAndWrite
        }
    } 
```

然后在一个活动中，执行调用。

```
 var pathToFileCreated = ""
    val anRW = ReadandWrite().readAndwriteStorage(this,this)
    if(anRW){
        pathToFileCreated =  WriteFile().execute("onTaskComplete").get()
        Log.d("pathToFileCreated",pathToFileCreated)
    } 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-09T11:21:52.840

### 科特林

```
class FileReadWriteService {

    private var context:Context? = ContextHolder.instance.appContext

    fun writeFileOnInternalStorage(fileKey: String, sBody: String) {
        val file = File(context?.filesDir, "files")
        try {
            if (!file.exists()) {
                file.mkdir()
            }
            val fileToWrite = File(file, fileKey)
            val writer = FileWriter(fileToWrite)
            writer.append(sBody)
            writer.flush()
            writer.close()
        } catch (e: Exception) {
            Logger.e(classTag, e)
        }
    }

    fun readFileOnInternalStorage(fileKey: String): String {
        val file = File(context?.filesDir, "files")
        var ret = ""
        try {
            if (!file.exists()) {
                return ret
            }
            val fileToRead = File(file, fileKey)
            val reader = FileReader(fileToRead)
            ret = reader.readText()
            reader.close()
        } catch (e: Exception) {
            Logger.e(classTag, e)
        }
        return ret
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2021-08-13T08:35:08.823

在 kotlin 中追加到文本文件的最简单方法：

```
val directory = File(context.filesDir, "LogsToSendToNextMunich").apply { 
    mkdirs() 
}
val file = File(directory,"Logs.txt")
file.appendText("You new text") 
```

如果您只想写入文件：

```
yourFile.writeText("You new text") 
```

使用字节将任何内容写入文件：

```
FileOutputStream(file).use {
    it.write("Some text for example".encodeToByteArray()) 
} 
```

# asp.net - 如何使用 UrlRouting 导航到页面上的 Id

> ID：14376809
> 
> 赞同：1
> 
> 时间：2013-01-17T10:20:05.800
> 
> 标签：asp.net, url-routing

我有一页很长，有几个不同的部分。这是一个条款页面。

我希望第二部分“竞争条款”的网址位于竞争条款标题旁边。

通常，我会有这样的东西： /mypage.aspx#competition-terms 用于 url，但是当我使用 url 路由时这似乎不起作用。我使用的是网络表单，而不是 MVC。

在这一点上，我不确定我是否做错了什么，或者不可能。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:50:39.113

如果您将 routeName 'MyPage' 用于 'mypage.aspx' 页面，那么 `'/MyPage#competition-terms'`应该可以正常工作。

# android - Android：对Fragments使用Activity的默认动画

> ID：14376810
> 
> 赞同：6
> 
> 时间：2013-01-17T10:20:14.013
> 
> 标签：android, animation, android-fragments, android-activity, transitions

我需要在片段替换中使用活动默认动画，但使用`android.R.anim`我找不到它。

我怎样才能找到它的名字？是否可以默认使用它，或者我必须手动创建动画才能使用它？

提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:10:42.987

在搜索了这个确切的问题后，我在 Google 论坛上找到了这个资源（奇怪的是不在 Android-Developers 中）：

[https://groups.google.com/d/topic/android-porting/c75-7TMgn3A/discussion](https://groups.google.com/d/topic/android-porting/c75-7TMgn3A/discussion)

# javascript - 以 px 为单位指定宽度或不更改画布行为

> ID：14376812
> 
> 赞同：2
> 
> 时间：2013-01-17T10:20:18.060
> 
> 标签：javascript, css, html, canvas

我正在尝试通过拖动鼠标来绘制一个矩形，基本上按照本[教程](http://atomicrobotdesign.com/blog/javascript/draw-a-rectangle-using-the-mouse-on-the-canvas-in-less-than-40-lines-of-javascript/)进行。

但是，我发现如果我在 中指定画布尺寸`px`，它将不起作用。相反，如果我使用此 html，则效果很好：

```
<!DOCTYPE html>
<html>

<head>
  <title>drag a rectangle</title>

  <style>
    #cvs {
      width: 500;
      height: 500;
      border: 1px solid #666;
    }
  </style>

  <script src="jquery-1.9.0.js"></script>
</head>

<body>
  <canvas id="cvs"></canvas>

  <script src="main.js"></script>
</body>

</html> 
```

而这个js：

```
$(document).ready(function() {
    var canvas = document.getElementById('cvs');
    var ctx = canvas.getContext('2d');
    var rect = {};
    var drag = false;

    var mouseDown = function(e) {
        rect.startX = e.pageX - this.offsetLeft;
        rect.startY = e.pageY - this.offsetTop;
        console.log(rect.startX + ' ' + rect.startY);
        drag = true;
    };

    var mouseUp = function(e) {
        drag = false;
    };

    var draw = function() {
        ctx.fillRect(rect.startX, rect.startY, rect.w, rect.h);
    };

    var mouseMove = function(e) {
        if (drag) {
            rect.w = (e.pageX - this.offsetLeft) - rect.startX;
            rect.h = (e.pageY - this.offsetTop) - rect.startY;
            console.log(rect.w + ' ' + rect.h);
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            draw();
        }
    };

    function init() {
        canvas.addEventListener('mousedown', mouseDown, false);
        canvas.addEventListener('mouseup', mouseUp, false);
        canvas.addEventListener('mousemove', mouseMove, false);
    }

    init();
}); 
```

它工作正常。但是，如果我在 中指定维度`px`，即

```
#cvs {
  width: 500px;
  height: 500px;
  border: 1px solid #666;
} 
```

鼠标位置和矩形不再对齐。此外，视口中的尺寸也不同。`px`我想这是一个基本问题，但是指定或不指定有什么区别？这对我的拖动矩形行为有何影响？

在最新的 Chrome 上进行了本地测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:23:07.790

要设置画布的大小，请使用画布元素属性`width`和`height`.

```
<canvas width="400" height="300">Not supported</canvas> 
```

当页面加载时，画布大小设置为它的`width`和`height`。如果设置`style.width`和/或`style.height`设置，画布将缩放以适合这些样式中指定的尺寸。

[这](http://jsfiddle.net/9bheb/5/)是一个例子。

所以现在关于你的问题。正如我在上面写的那样，当你设置`style.width`和`style.height`为：

```
#cvs {
  width: 500px;
  height: 500px;
  border: 1px solid #666;
} 
```

将应用宽度和高度，并且画布将缩放它的大小，因此带有坐标的点`(x, y)`不会出现在您期望的位置。例如，如果您尝试使用坐标绘制一个点，`(500, 500)`您可能根本看不到它，因为您的画布坐标系的尺寸比这小。当您没有指定时`px`，您根本没有提供有效的宽度和高度，并且您的样式无法正确应用，因此您的画布不会缩放，并且一切都按预期工作。

# python - 指定添加关系时要使用的数据库

> ID：14376814
> 
> 赞同：0
> 
> 时间：2013-01-17T10:20:24.427
> 
> 标签：python, django, django-models

我知道我可以像这样指定一个与“using”关键字一起使用的数据库：

```
zoo = Zoo.objects.using(db_id).get(pk=123) 
```

但是，当我添加关系时，如何指定要使用的数据库？

```
animal = Animal(name="Lion")
zoo.animals.add(animal) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:50:07.090

您拥有通过指定数据库`Zoo`的`Animal`模型。`get`关系不能跨不同的数据库存在。所以`ManyToMany`add 隐含地暗示`Add the relation to the same database as the Zoo and Animal instances which need to belong to the same database`

# java - 使用数据库更改进行缓存更新

> ID：14376826
> 
> 赞同：1
> 
> 时间：2013-01-17T10:20:49.933
> 
> 标签：java, mysql, performance, caching, triggers

我们有一个基于 java 的产品，它将 Calculation 对象作为 blob 保存在数据库中。在运行时，我们将其保存在内存中以获得快速性能。现在有另一个进程定期更新数据库中的这个计算对象。现在，最好的实现策略是什么，以便当这个对象在数据库中更新时，缓存会删除存储的对象并再次从数据库中获取它。

在必须使用之前，我不会喜欢任何缓存框架。

我很欣赏对此的回应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:37:13.067

**如果不了解您的系统架构、设计约束、IT 策略等，很难为您的问题提供好的答案。**

我个人会使用**消息传递模式**来解决这个问题。该模式的一些优点如下：

*   您的系统组件（计算过程、更新过程）可以松耦合
*   根据消息传递模式的实现，您可以“*连接*”许多计算过程（扩展）和许多更新过程（使用主从方法）。

然而，实现消息模式可能是一项非常具有挑战性的任务，我建议采用现有的框架或产品之一。

我希望这至少会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:58:26.633

我之前做过一些类似于你的场景的工作，一般有两种方法。一，缓存持有者定期轮询数据库，获取它需要的数据并将其保存在内存中。数据可以存储在 HashMap 或其他一些集合中。这种方法简单易实现，不需要额外的框架或库。但是用户将不得不时不时地忍受脏数据。此外，如果轮询器数量巨大或查询速度不够快，轮询会对 DB 造成很大压力。但是，如果您对实时性的要求不是很高，并且您的系统规模相对较小，这通常是一个不错的选择。

另一种方式是缓存持有者订阅数据更新者的通知，并在收到通知后更新其数据。它提供了更好的用户体验，但这会给您的系统带来更多的复杂性，因为您必须涉及一些 MS 基础架构，例如 JMS。开发和调优更耗时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-31T05:37:06.273

我知道我很晚才回应这个问题，但它可能会帮助寻找同样问题的人。这是我的问题，我将 requestPerMinute 信息存储在 Java 过滤器中的 Hashmap 中，该过滤器在应用程序启动期间被加载。如果有人用新信息更新数据库，地图不知道这一点。解决方案：我在我的 Java 过滤器中使用了一个变量 updateTime ，它只存储了我的哈希图上次更新的时间，并且每次请求它都会检查当前时间是否超过 24 小时，如果是，那么它会从数据库中更新哈希图。所以每 24 小时它只是刷新整个哈希图。虽然我的用例不是实时更新，所以它适合用例。

# c# - 显示数据表的数据

> ID：14376828
> 
> 赞同：8
> 
> 时间：2013-01-17T10:20:54.497
> 
> 标签：c#, datatable, console-application

我想显示值或将它们写入从数据集中写入的文本文件

```
ColumnID  columnName ColumnFamilyName
ValueOne  ValueTwo  ValueThree  
ValueThree  ValueFour  ValueFive
ValueSix  ValueSeven  ValueEight 
```

我已经这样做了，但这并不能解决问题

```
foreach (DataRow row in myTopTenData.Rows)
            {
                Console.WriteLine();
                foreach (DataColumn col in myTopTenData.Columns)
                {
                    Console.Write(row[0].ToString() + " ");

                }
            } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T10:25:55.067

我仍然无法发表评论，但这里有一个快速的答案：

```
 foreach(DataRow row in myTopTenData.Rows)
 { 
     string ID  = row["ColumnID"].ToString();
     string Name= row["columnName"].ToString();
     string FamilyName= row["ColumnFamilyName"].ToString();    
 } 
```

`null`确保在检索数据时检查值

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-17T10:24:16.733

假设 myTopTenData 是一个 DataTable 然后你以这种方式循环数据表的行

```
foreach (DataRow row in myTopTenData.Rows)
{
     Console.WriteLine();
     for(int x = 0; x < myTopTenData.Columns.Count; x++)
     {
          Console.Write(row[x].ToString() + " ");
     }
} 
```

当然，这个片段应该只是一个简单的例子。
您需要考虑空值和强大的错误检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-01T00:39:40.050

您可以使用 Datagrid 像这样显示您的 DataTable：

在 WPF 中：

```
datagrid.SetBinding(ItemsControl.ItemsSourceProperty, new System.Windows.Data.Binding { Source = dt}); 
```

在winform中：

```
datagrid.DataSource(datatable); 
```

# objective-c - 存储到“有效”的值永远不会被读取

> ID：14376831
> 
> 赞同：0
> 
> 时间：2013-01-17T10:20:55.133
> 
> 标签：objective-c, boolean, dead-code

我有一个验证方法，通过它我可以分析特定变量是否通过验证标准。

这是代码：

```
-(BOOL)validateFields{
    BOOL valid = FALSE;
    if (dateEntry != TRUE && saveOrderType != TRUE) {
        if (_editRequired==YES) {
            if ([[[editedTextField text] stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]] isEqualToString:@""]) {
                valid = FALSE;
            } else {
                valid = TRUE;
            }
        } else {
            valid = TRUE;
        }
        if (_editRegEx) {
            NSRegularExpression *regex = [NSRegularExpression
                                      regularExpressionWithPattern:_editRegEx
                                      options:NSRegularExpressionCaseInsensitive
                                      error:nil];
            if ([regex numberOfMatchesInString:[editedTextField text] options:0 range:NSMakeRange(0, [[editedTextField text] length])]==0) {
                valid=FALSE;
            } else {
                valid = TRUE;
            }
        } else {
            valid = TRUE;
        }

    } else {
        valid = TRUE;
    }
    return valid;
} 
```

我得到了 3 个`Value stored to 'valid' is never read`奇怪的实例，因为最终它会在方法结束时返回。

我在设置变量的前三个实例中得到它，仅在这三个实例上：

```
if (_editRequired==YES) {
    if (//checks if the field contains any characters) {
        valid = FALSE;
    } else {
        valid = TRUE;
    }
} else {
     valid = TRUE;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:44:34.357

您的`if (_editRequired==YES) {}`条件完全被`if (_editRegEx) {}`条件覆盖，因此前者中的任何分配都没有被使用过：`valid`总是在第二个条件中重新分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:39:10.810

您收到此警告是因为您在 if/else 之后存储了其他值。实际上，就在这之后，您还有另一个 if（用于测试 _editRegEx）并在所有情况下（if 和 else）都存储一个值。所以你的第一个 if 是不需要的。

# variables - Symfony2 用户实体更改类变量

> ID：14376832
> 
> 赞同：0
> 
> 时间：2013-01-17T10:21:02.023
> 
> 标签：variables, symfony, entity

简单的问题，但我不知道该怎么做。例如，我们有用于登录的用户实体（下面的类），我怎样才能将 $password 更改为 $accountPass ？当然，这意味着必须应用所有关系，因为它是 $password，并且所有 symfony2 类都必须理解变量（旧）$password 现在是（更改为）$accountPass。

问题是关于“变量名称”的......有人知道如何处理它吗？

用户实体：

```
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Security\Core\User\UserInterface;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * @ORM\Entity()
 * @ORM\Table(name="_account")
 * @UniqueEntity("username")
 */
class User implements UserInterface
{

public function __construct()
{
    $this->salt = md5(uniqid(null, true));
    $this->isActive = true;
}

/**
 * Get roles
 *
 * @return string 
 */
public function getRoles()
{
    return array('ROLE_USER');
}

/**
 * 
 *
 * @return 
 */
public function eraseCredentials()
{

}

/**
 * Get equals
 *
 * @return boolean
 */
public function equals(UserInterface $user)
{
    return $user->getUsername() == $this->getUsername();
}

/**
 * @var integer
 *
 * @ORM\Id
 * @ORM\Column(name="id", type="integer")
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @var string
 * 
 * @ORM\Column(name="username", type="string", length=255, unique=true)
 */
protected $username;

/**
 * @var string
 * 
 * @ORM\Column(name="password", type="string", length=255)
 */
protected $password;

/**
 * @var string
 * 
 * @ORM\Column(name="email", type="string", length=255)
 */
protected $email;

/**
 * @var string
 * 
 * @ORM\Column(name="salt", type="string", length=255)
 */
protected $salt;

/**
 * @var boolean
 * @ORM\Column(name="isActive", type="boolean")
 */
protected $isActive;

/**
 * Get id
 *
 * @return integer 
 */
public function getId()
{
    return $this->id;
}

/**
 * Set username
 *
 * @param string $username
 * @return User
 */
public function setUsername($username)
{
    $this->username = $username;

    return $this;
}

/**
 * Get username
 *
 * @return string 
 */
public function getUsername()
{
    return $this->username;
}

/**
 * Set password
 *
 * @param string $password
 * @return User
 */
public function setPassword($password)
{
    $this->password = $password;

    return $this;
}

/**
 * Get password
 *
 * @return string 
 */
public function getPassword()
{
    return $this->password;
}

/**
 * Set email
 *
 * @param string $email
 * @return User
 */
public function setEmail($email)
{
    $this->email = $email;

    return $this;
}

/**
 * Get email
 *
 * @return string 
 */
public function getEmail()
{
    return $this->email;
}

/**
 * Set salt
 *
 * @param string $salt
 * @return User
 */
public function setSalt($salt)
{
    $this->salt = $salt;

    return $this;
}

/**
 * Get salt
 *
 * @return string 
 */
public function getSalt()
{
    return $this->salt;
}

/**
 * Set isActive
 *
 * @param string $isActive
 * @return User
 */
public function setIsActive($isActive)
{
    $this->isActive = $isActive;

    return $this;
}

/**
 * Get isActive
 *
 * @return string 
 */
public function getIsActive()
{
    return $this->isActive;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:42:14.493

```
/**
 * @var string
 * 
 * @ORM\Column(name="password", type="string", length=255)
 */
protected $accountPass;

public function setPassword($password)
{
    $this->accountPass = $password;

    return $this;
}

/**
 * Get password
 *
 * @return string 
 */
public function getPassword()
{
    return $this->accountPass;
} 
```

当然应该很明显，当您更改方法名称时，其他类无法知道这一点！
所有出现的旧方法名称都应更改为！

但我真的不明白你为什么要这样做？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:45:51.760

检查这个答案：[https ://stackoverflow.com/a/12147185/927636](https://stackoverflow.com/a/12147185/927636)

您必须映射 Entity 类中的所有字段并根据需要命名它们。

# python - （最近）Twitter API 的 Python Wrapper

> ID：14376833
> 
> 赞同：0
> 
> 时间：2013-01-17T10:21:03.023
> 
> 标签：python, twitter, python-twitter

我正在为当前的 Twitter API 寻找一个 python 包装器，只是为了执行简单的搜索，但是我尝试过的包装器（twython、python-twitter 等）都已经过时了，并且无法在当前的 Twitter 下执行搜索。

是否有更新后的 python 包装器可以与当前的 twitter 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:13:31.783

大约一两年前我使用 了[http://pypi.python.org/pypi/python-twitter/ ，它仍然在同一个版本 0.8.2 中。](http://pypi.python.org/pypi/python-twitter/)它满足了我当时所需要的一切 - 只是发布推文。如果你要做一些简单的事情，它可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:47:45.920

我想，要执行一个简单的搜索，最好不要遍历所有的包装器......您可以简单地使用 http GET 搜索，如下所示：

```
import urllib2
parent = urllib2.urlopen("https://api.twitter.com/1/statuses/show.json?id=291095878196920320&include_entities=true").read() 
```

您当然可以将其写入文件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:33:19.403

如果您只需要搜索 — 使用 python 的 OAuth 库之一（例如[这个），然后自己拨打电话。](https://github.com/simplegeo/python-oauth2)对于一小部分请求，它会比搜索和评估不同的库更快。

# java - 使用 java 和 sql INSERT Query 在 MS 访问中插入字符串类型变量和日期类型变量

> ID：14376839
> 
> 赞同：1
> 
> 时间：2013-01-17T10:21:24.047
> 
> 标签：java, sql

我发布了一个关于如何将字符串日期转换为要添加到访问数据库中的日期/时间字段的问题：这里是链接

[如何使用 java sql INSERT 查询插入日期/时间 ms 访问字段](https://stackoverflow.com/questions/14375586/how-to-insert-in-a-date-time-ms-access-field-using-java-sql-insert-query)

我找到了我在这里使用的解决方案，这是我的代码

```
 if(b==c.t.addR){
        String n=Integer.toString(4);
        String t=c.t.titlefield.getText();
        String d=c.t.datefield.getText();
        String p=c.t.progressfield.getText();
        String pr=c.t.pselection;
        String s="Open";
        SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy hh:mm a");

        try {
            date = df.parse(d);
            String query = "INSERT into Records (Deadline) Values(?)";
            PreparedStatement ps  = c.b.con.prepareStatement(query);

            ps.setTimestamp(1,new java.sql.Timestamp(date.getTime()));
            ps.executeUpdate();

        }catch (Exception er) {
            // TODO Auto-generated catch block
            er.printStackTrace();
        }

        try {
            c.b.st.executeUpdate("INSERT into Records (Title,Progress,Priority,Status) VALUES('"+t+"','"+p+"','"+pr+"','"+s+"') ");
            JOptionPane.showMessageDialog(null, "Record Added");
        } catch (SQLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

    } 
```

现在出现的问题是，日期被添加到单独的记录中，而其他字段（如标题、进度等）被添加到另一个记录中！！！如何在单个记录中插入日期和其他字符串字段。请用几行代码来说明！！！以前解决方案的修改将非常有帮助，谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:26:06.867

您可以通过执行一条 sql 语句来插入 int oa 单条记录。您只需将列添加到语句中并使用准备好的语句设置它们的值。这是一种执行插入而不是连接字符串的更安全的方法。

```
if(b==c.t.addR){
    String n=Integer.toString(4);
    String t=c.t.titlefield.getText();
    String d=c.t.datefield.getText();
    String p=c.t.progressfield.getText();
    String pr=c.t.pselection;
    String s="Open";
    SimpleDateFormat df = new SimpleDateFormat("MM/dd/yyyy hh:mm a");

    try {
       date = df.parse(d);
       String query = "INSERT into Records (Deadline,Title,Progress,Priority,Status)" 
           + "Values(?, ?, ?, ?,?)";

       PreparedStatement ps  = c.b.con.prepareStatement(query);

       ps.setTimestamp(1,new java.sql.Timestamp(date.getTime()));
       ps.setString(2,t);
       ps.setString(3,p);
       ps.setSring(4,pr);
       ps.setString(5,s);
       ps.executeUpdate();

        }catch (Exception er) {
          // TODO Auto-generated catch block
          er.printStackTrace();
        }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:23:59.637

> 如何在单个记录中插入日期和其他字符串字段

使它成为一个插入语句而不是 2。

```
 String query = "INSERT into Records (Deadline,Title,Progress,Priority,Status) Values(?,?,?,?)"
 PreparedStatement ps  = c.b.con.prepareStatement(query);

                ps.setTimestamp(1,new java.sql.Timestamp(date.getTime()));
                ps.setString(2,t);
                ps.setString(3,p);
                ps.setSring(4,pr);
                ps.setString(5,s);
                ps.executeUpdate(); 
```

# java - 在 IntelliJ IDEA 中更改 Ctrl+Shift+Left/Right 的行为，就像在 Eclipse 中一样

> ID：14376840
> 
> 赞同：14
> 
> 时间：2013-01-17T10:21:28.087
> 
> 标签：java, eclipse, intellij-idea, usability, shortcut

嗨，我是 IntelliJ IDEA 的新手，遇到了这里和那里的可用性问题，因为我来自 Eclipse。

`Ctrl`当我重命名一个变量并想通过点击++来标记它的第二部分时`Shift`，`Right`光标移动到重命名边界之外的下一个单词，当我输入新名称并单击`Enter`时，重命名不会执行对于变量的其他用途。是否有一个设置可以改变 ++ / 的行为，`Ctrl`以便插入`Shift`符号在变量名的最后一个字符之后移动？`Left``Right`

### 第二个问题

当我用`Ctrl`+ `Left`/移动光标通过变量名时`Right`，Eclipse 中的下一站总是在下一个大写字母之前。在idea中也可以激活它吗？这在重命名变量时非常有用。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-16T10:55:21.317

您真正需要的是[我有 jIdea 12.1]：

1.  转到设置 [Ctrl+Alt+S]
2.  选择[编辑器->常规->智能键]
3.  勾选[使用“CamelHumps”单词]按钮

Вуаля！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:25:34.577

`Ctrl`++`Alt`并从设置中`S`选择`Keymap`，您可以在其中更改您想要的内容。

但我建议使用 IntelliJ 的自动完成/intellitext 功能和重构工具，而无需手动浏览变量名——它们通常第一次就正确。

# html - CSS sprites 以获得最大的可访问性？

> ID：14376841
> 
> 赞同：4
> 
> 时间：2013-01-17T10:21:43.960
> 
> 标签：html, css, accessibility, css-sprites

假设我想`>`用精美的图像箭头替换链接。为此，我想使用 CSS 精灵。

在许多文章中，例如在[Smashing Magazine中](http://coding.smashingmagazine.com/2012/04/11/css-sprites-revisited/)*最近*（2012 年）的一篇文章中，推荐的方法是这样的：

*   HTML：

    ```
    <a href="/article/123" class="nextLink">&gt;</a> 
    ```

*   CSS：隐藏文本并将精灵指定为背景

然而，这种方法在可访问性方面存在问题：如果图像被禁用但 CSS 被解释，那么上面的链接将不可见。

有趣的是，我发现[Paciello Group的一篇](http://www.paciellogroup.com/blog/2010/01/high-contrast-proof-css-sprites/)*旧*文章（2010 年）提出了看起来不错的解决方案。这个想法是在要替换的文本旁边放置一个。具有背景图像并位于文本顶部。如果图像加载，它将替换文本，否则文本仍然可见。`<span>``<span>`

为什么这种方法没有被广泛采用？该解决方案有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T13:29:39.663

主要缺点是在 CSS 精灵加载之前向没有特殊可访问性需求的用户显示文本。就代码而言，它在语义上也可能不像使用`aria-label`解决方案那样干净（解释如下）。

您可以考虑为元素使用 ARIA 标签：

> 该`aria-label`属性用于定义标记当前元素的字符串。在屏幕上看不到文本标签的情况下使用它。
> 
> [https://developer.mozilla.org/en-US/docs/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute](https://developer.mozilla.org/en-US/docs/Accessibility/ARIA/ARIA_Techniques/Using_the_aria-label_attribute)

我很快检查了 Gmail 和 Facebook 是如何解决这个问题的（没有文字的按钮）：

*   在 Gmail 中，“上一个”按钮的 aria-label 为“Older”
*   在 Facebook 中，右上角的“cog”图标有一些文本“Account Settings”缩进-5000em

# sql - Yii CDbCommand 创建查询

> ID：14376856
> 
> 赞同：0
> 
> 时间：2013-01-17T10:22:23.130
> 
> 标签：sql, yii

我无法使用 Yii 创建以下查询：

```
SELECT recipientId as broadcasterId, SUM(quantity) as quantity FROM `creditlog` 
WHERE websiteId=3 AND timeAdded>='2013-01-17' 
AND timeAdded<='2013-02-17' 
AND recipientId IN (10000024, 10000026, 1000028) GROUP BY `recipientId` 
```

我试过了：

```
$command = Yii::app()->db->createCommand();
$command->select('recipientId as broadcasterId, SUM(quantity) as quantity');
$command->from('creditlog');

$command->where('websiteId=:websiteId AND timeAdded>=:dateStart AND timeAdded<=:dateEnd AND recipientId IN (:recipients)',array(':websiteId' => $websiteId, ':dateStart' => $dateStart, ':dateEnd' => $dateEnd, ':recipients' => $broadcasterIds));

$command->group('recipientId'); 
```

文档中的`andWhere()`功能似乎也丢失了。

问题是 IN 条件，但我找不到重写它的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T10:35:57.140

由于您无权访问`andWhere`，这会使生活变得更加简单，因此您必须`where`像这样表达参数：

```
$command->where(array(
    array('and', 
          'websiteId=:websiteId',
          array('and', 
                'timeAdded>=:dateStart',
                 array('and',
                       // ...

), $parameters); 
```

这样做是为了您可以在某些时候使用正确的`array('in', 'recipientId', $values)`语法来生成`IN(...)`SQL。

但是，这很丑陋且难以管理。只要将所有条件简单地连接在一起，`AND`您就可以从像这样的更理智的数据表示中以编程方式构造数据结构（实际上这是缺少的解决方法`andWhere`）：

```
$conditions = array(
    'websiteId=:websiteId',
    'timeAdded>=:dateStart',
    'timeAdded<=:dateEnd',
    array('in', 'recipientId', $broadcasterIds),

);

$where = null;
foreach ($conditions as $condition) {
    if (!$where) {
        $where = $condition;
    }
    else {
        $where = array('and', $where, $condition);
    }
}

$command->where($where, $parameters); 
```

有关为什么必须使用这种表达方式的更多信息，您可以参考[`CDbCommand::where`](http://www.yiiframework.com/doc/api/1.1/CDbCommand#where%28%29-detail).

# javascript - 控制动画

> ID：14376857
> 
> 赞同：1
> 
> 时间：2013-01-17T10:22:26.310
> 
> 标签：javascript, jquery

我正在创建一个打地鼠风格的游戏，其中给出了一个总和，数字从容器底部到顶部动画。游戏的目的是点击总和的正确答案并收集尽可能多的正确答案。

我还添加了一些额外的图标，让游戏更有趣。其中一个图标是火焰，它可以将动画加速 5 秒。

目前，它使所有图标同时移动得非常快。我希望流程像往常一样继续，但速度更快，而不是发生这种情况。

这是我到目前为止所拥有的..

```
$(".character").click(clickThrottled(function () {
    if ($(this).hasClass("heat")) {
        $(this).effect("explode", 400);
        $("#container").children().css('top', '400px').fadeIn(1000).animate({
            'top': '-100px'
        }, 3000).fadeOut(1000);
    }
})); 
```

有人可以告诉我哪里出错了吗？查看演示并单击火焰图标以更好地了解问题。

小提琴：http: [//jsfiddle.net/pUwKb/52/](http://jsfiddle.net/pUwKb/52/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:48:39.003

缓动将使所有元素同时缓和到顶部，但以一种时尚的方式（就像它们最后放慢速度一样。）

您实际需要做的是保留一个名为“isFlameOn”或“speedModifier”的标志会更好。单击火焰图标时，将“speedModifier”设置为 2 或 3，这将使速度达到正常速度的两倍或三倍。

删除这个：

```
$("#container").children().css('top', '400px').fadeIn(1000).animate({
        'top': '-100px'
}, 3000).fadeOut(1000); 
```

因为您将单独更改对象的速度。

现在到你管理每个图标的地方（移动它们），而不是说： item[i].y -= item[i].speed;

做 item[i].y -= item[i].speed * speedModifier;

如果您让它们动画到顶部，那么您将需要跟踪每个动画间隔并重置它们。因此，如果您创建一个项目然后对其进行 .animate 动画处理，您将需要删除该 .animate 效果并创建一个具有补偿的 speedModifier 百分比的新效果。如果您逐帧进行，您将度过轻松的一天:)。

当你想让火焰效果用完时，只需将 speedModifier 设置回 1。如果为每个项目设置动画，则需要再次删除当前的 .animate 并将其替换为正常速度。请务必跟踪每个项目的随机速度，以便在效果消失后您可以将其速度重置为原始速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:27:50.730

查看jQuery UI 提供的不同[缓动，它们应该可以解决您的问题。](http://api.jqueryui.com/easings/)要使用它们，只需设置属性缓动`animate`（如果你需要更高级的，你还应该包括 jQuery UI）。

对于进一步的自定义，您可以`step`使用`animate`.

# objective-c - Objective-C 接口中的 C 函数风格不好？

> ID：14376858
> 
> 赞同：0
> 
> 时间：2013-01-17T10:22:27.090
> 
> 标签：objective-c, coding-style

我声明了一个带有一些函数和一些方法的接口。而不是声明：
`-(void)foo;`
`+(void)bar;`

我声明：
`-(void)foo;`
`void bar();`

我认为这很好。编译器认为没问题。其他程序员也觉得没问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:22:50.250

选择 C ​​函数或静态方法时的担忧：（从我的头顶）

*   名称冲突：首选静态方法。
*   功能：名字就像道路，它们告诉你你在哪里，你可以去哪里。如果代码与其他内容相关，则应将其设为类方法。即使它是不相关方法（`xxxUtils`类）的垃圾转储。否则使用 C 函数。
*   局部性：更喜欢静态方法作为将代码分组到更高级别单元中的一种方式（因为从 30,000 英尺处更容易看到和理解）。
*   打字：交流功能需要较少的它。CGPointMake 便利功能在输入更多时不会那么方便。
*   链接：在运行前会看到对 C 函数的错误调用。
*   全局状态：不是选择标准，但值得一提的是，在 OOP 语言中，C 函数和类方法的输出应该仅取决于它们的输入。触摸全局状态会违反封装、隐藏依赖项、使代码更难理解等。
*   重载：C 函数在使用 . 标记时可以被重载`__attribute__((overloadable))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:04:56.797

我不太明白问题的重点。您可以类似地一起声明它们：

```
 -(void)foo;
 +(void) bar;
 void bar(); 
```

所有在目标 C 中都是合法的，并且可以以相同的名称共存，因为它们是不同的实体（实例方法、类方法、C 函数）。您可以`void bar()`毫无问题地从前者调用，但不是 v/v，因为 void bar() 没有传递对`self`.

如果问题是风格问题，我会将 C 函数与 @interface 分开声明，因为它们不是 Objective-C。

对于 Clang 的最新版本，如果它们不供公众使用，则根本不需要声明它们......

*更新*

阅读了@Jano 的答案后，我现在更了解了问题的重点：为什么选择一个类方法而不是一个可以实现相同结果的函数（两者都无法访问`self`）。这些天来，我倾向于总是使用类方法，它似乎在 obj-C 上下文中才有意义。Jano 的回答似乎非常详尽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T11:15:52.407

这只是USED-TO的问题。

我会选择 Objective-C 风格的方法，除非我需要一些仅在 C 中可用的函数，例如 pow()。

即使你想添加一个 C 方法，我觉得它应该在一个单独的文件中，因为`AllCMethods.c`它会更容易回忆，记住，使用所有 obj-c 方法和 C 方法。

# android - 如何在 MapView 上绘制多边形，填充它，并在其上放置一个 onTouch 事件

> ID：14376869
> 
> 赞同：6
> 
> 时间：2013-01-17T10:23:07.477
> 
> 标签：android, overlay, android-mapview, polygon, osmdroid

是否可以在 osmdroid MapView Overlay 的绘制多边形中设置 EventListener ？我想在 Overlay 上打印，触摸它后我想改变它的颜色或处理 Polygon 后面的数据。

例如：

Poly1: ID = 1337, P1(0,0),P2(1,0),......,Pn(0,0)

Poly2: ID = 42 , P1(10,7),P2(18,39),......,Pn(10,7)

在 Poly1 中触摸后，我想知道按下了 ID 1337。想要改变它的颜色。

我怎么能实现这样的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:29:07.927

~~使用[本](https://developers.google.com/maps/documentation/android/lines)文档绘制多边形~~

~~使用[它](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap#setOnMapClickListener%28com.google.android.gms.maps.GoogleMap.OnMapClickListener%29)来监听地图点击~~

使用[它](http://www.vividsolutions.com/jts/jtshome.htm)来确定触摸是否在其中一个多边形内

我不确定几何库是否可以在 android 上运行，因此请随意替换第三个组件。

**编辑**：

误读了问题并将其与谷歌地图相关联，对不起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T10:45:14.370

以下是如何绘制和填充多边形（矩形示例）：

ArrayList bgRectPoints = new ArrayList<>();

```
 GeoPoint pt1 = new GeoPoint(-15.953548, 126.036911);
    bgRectPoints.add(pt1);
    GeoPoint pt2 = pt1.destinationPoint(10000, 0);
    bgRectPoints.add(pt2);
    GeoPoint pt3 = pt2.destinationPoint(10000, 90);
    bgRectPoints.add(pt3);
    GeoPoint pt4 = pt3.destinationPoint(10000, 180);
    bgRectPoints.add(pt4);
    bgRectPoints.add(pt1);

    Polygon polygon = new Polygon();
    polygon.setPoints(bgRectPoints);
    polygon.setFillColor(Color.BLACK);

    mapView.getOverlays().add(polygon); 
```

要接收触摸/点击初始化多边形，如下所示：

```
 Polygon polygon = new Polygon(){
        @Override
        public boolean onSingleTapConfirmed(MotionEvent event, MapView mapView) {
            Toast.makeText(context, "Polygon clicked!",Toast.LENGTH_SHORT).show();
            return super.onSingleTapConfirmed(event, mapView);
        }
    }; 
```

更多可以在[这里找到](https://github.com/osmdroid/osmdroid/wiki/Markers,-Lines-and-Polygons)

# validation - 如何在自定义多字段验证器中将其他组件标记为无效

> ID：14376875
> 
> 赞同：6
> 
> 时间：2013-01-17T10:23:24.957
> 
> 标签：validation, jsf, jsf-2, primefaces

我参考了 BalusC 的一个答案： [JSF 不支持跨字段验证，有解决方法吗？](https://stackoverflow.com/questions/6282466/jsf2-0-doesnt-support-cross-field-validation-is-there-a-workaround)

我遵循相同的方式，并得出如下代码：

在 .xhtml 中

```
<h:form id="form1">
  <div>
    <p:messages globalOnly="true" display="text" />

        <h:inputHidden value="true">
            <f:validator validatorId="fooValidator" />
            <f:attribute name="input1" value="#{input1}" />
            <f:attribute name="input2" value="#{input2}" />
            <f:attribute name="input3" value="#{input3}" />
        </h:inputHidden>

        <h:panelGrid columns="3">  
            <h:outputText value="name 1: " />
            <p:inputText binding="#{input1}" id="input11" value="#{testPage.input1}" />
            <p:message for="input11" display="text"/>
        </h:panelGrid>
        <h:panelGrid columns="3">
            <h:outputText value="name 2: " />               
            <p:inputText binding="#{input2}" id="input22" value="#{testPage.input2}" />
            <p:message for="input22" display="text"/>
        </h:panelGrid>
        <h:panelGrid columns="3">
            <h:outputText value="name 3: " />
            <p:inputText binding="#{input3}" id="input33" value="#{testPage.input3}" />
            <p:message for="input33" display="text"/>
        </h:panelGrid>
        <p:commandButton value="Submit" action="#{testPage.submitValidator}" update=":updateBody" />
    </div>

</h:form> 
```

java类：

```
@FacesValidator(value="fooValidator")
public class CustomValidator2 implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value)
        throws ValidatorException {
    UIInput input1 = (UIInput) component.getAttributes().get("input1");
    UIInput input2 = (UIInput) component.getAttributes().get("input2");
    UIInput input3 = (UIInput) component.getAttributes().get("input3");

    Object value1 = input1.getSubmittedValue();
    Object value2 = input2.getSubmittedValue();
    Object value3 = input3.getSubmittedValue();

    if (value1.toString().isEmpty() && value2.toString().isEmpty() && value3.toString().isEmpty()) {
        String errorMsg = "fill in at least 1";
        FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_ERROR, errorMsg, errorMsg);
        FacesContext.getCurrentInstance().addMessage("form1:input11", msg);
        //throw new ValidatorException(msg);
    }

    }
} 
```

代码工作正常，但我面临一个问题。如何在验证失败时用红色突出显示 name1 inputText（或 name1 和 name2 inputText）的边框，这通常由 JSF 完成。

图片作为参考：http: [//img443.imageshack.us/img443/8106/errork.jpg](http://img443.imageshack.us/img443/8106/errork.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T15:34:48.473

将它们标记为无效[`UIInput#setValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#setValid%28boolean%29)，通过`false`。

```
input1.setValid(false);
input2.setValid(false);
input3.setValid(false); 
```

边框特定于 PrimeFaces `<p:inputText>`，因此您不需要按照其他回答者的建议添加任何 CSS 样板。

Note that this can also be achieved by [OmniFaces `<o:validateAll>` tag](http://showcase.omnifaces.org/validators/validateAll) without the need to homegrow a custom validator.

# angularjs - 错误：达到 10 次 $digest() 迭代。中止！使用动态 sortby 谓词

> ID：14376879
> 
> 赞同：141
> 
> 时间：2013-01-17T10:23:44.730
> 
> 标签：angularjs, javascript-framework

我有以下代码重复并显示用户的姓名和他的分数：

```
<div ng-controller="AngularCtrl" ng-app>
  <div ng-repeat="user in users | orderBy:predicate:reverse | limitTo:10">
    <div ng-init="user.score=user.id+1">
        {{user.name}} and {{user.score}}
    </div>
  </div>
</div> 
```

以及相应的角度控制器。

```
function AngularCtrl($scope) {
    $scope.predicate = 'score';
    $scope.reverse = true;
    $scope.users = [{id: 1, name: 'John'}, {id: 2, name: 'Ken'}, {id: 3, name: 'smith'}, {id: 4, name: 'kevin'}, {id: 5, name: 'bob'}, {id: 6, name: 'Dev'}, {id: 7, name: 'Joe'}, {id: 8, name: 'kevin'}, {id: 9, name: 'John'}, {id: 10, name: 'Ken'}, {id: 11, name: 'John'}, {id: 1, name: 'John'}, {id: 2, name: 'Ken'}, {id: 3, name: 'smith'}, {id: 4, name: 'kevin'}, {id: 5, name: 'bob'}, {id: 6, name: 'Dev'}, {id: 7, name: 'Joe'}, {id: 8, name: 'kevin'}, {id: 9, name: 'John'}, {id: 10, name: 'Ken'}]
} 
```

当我运行上面的代码时，我得到了**错误：10 $digest() 达到了迭代。中止！**我的控制台中的错误。

我已经为此创建了[jsfiddle](http://jsfiddle.net/JSWorld/7ecYd/1/)。

排序谓词仅在 ng-repeat 内部初始化，并且限制应用于对象的数量。所以我觉得同时拥有 sortby 和 limitTo 观察者是错误的原因。

如果 $scope.reverse 为假（分数升序），则不会出错。

谁能帮我理解这里有什么问题？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2013-01-17T14:37:52.113

请检查这个[jsFiddle](http://jsfiddle.net/bmleite/Hp4W7/)。（代码与您发布的代码基本相同，但我使用元素而不是窗口来绑定滚动事件）。

据我所知，您发布的代码没有问题。您提到的错误通常发生在您对属性创建更改循环时。例如，当您观察某个属性的更改，然后在侦听器上更改该属性的值时：

```
$scope.$watch('users', function(value) {
  $scope.users = [];
}); 
```

这将导致出现错误消息：

> 未捕获的错误：达到 10 次 $digest() 迭代。中止！
> 观察者在最后 5 次迭代中被解雇：...

确保您的代码没有这种情况。

**更新：**

这是你的问题：

```
<div ng-init="user.score=user.id+1"> 
```

您不应该在渲染期间更改对象/模型，否则它将强制进行新的渲染（因此导致*循环*，这会导致*“错误：达到 10 $digest() 迭代。中止！”*）。

如果要更新模型，请在控制器或指令上进行，不要在视图上进行。angularjs 文档[建议不要使用](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_model)完全`ng-init`来避免这些情况：

> 在模板中使用 ngInit 指令（仅适用于玩具/示例应用程序，不推荐用于实际应用程序）

这是一个带有工作示例的[jsFiddle 。](http://jsfiddle.net/bmleite/7ecYd/3/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-06T15:57:35.910

对我来说这个错误的原因是......

```
ng-if="{{myTrustSrc(chat.src)}}" 
```

在我的模板中

它会导致我的控制器中的函数 myTrustSrc 在无限循环中被调用。如果我从这一行中删除 ng-if，那么问题就解决了。

```
<iframe ng-if="chat.src" id='chat' name='chat' class='chat' ng-src="{{myTrustSrc(chat.src)}}"></iframe> 
```

该函数仅在不使用 ng-if 时调用几次。我仍然想知道为什么使用 ng-src 多次调用该函数？

这是控制器中的功能

```
$scope.myTrustSrc = function(src) {
    return $sce.trustAsResourceUrl(src);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-03-23T17:41:59.427

对我来说，我将函数结果作为 2 路绑定输入“=”传递给每次都创建新对象的指令。

所以我有这样的事情：

```
<my-dir>
   <div ng-repeat="entity in entities">
      <some-other-dir entity="myDirCtrl.convertToSomeOtherObject(entity)"></some-other-dir>
   </div>
</my-dir> 
```

my-dir 上的控制器方法是

```
this.convertToSomeOtherObject(entity) {
   var obj = new Object();
   obj.id = entity.Id;
   obj.value = entity.Value;
   [..]
   return obj;
} 
```

当我做的时候

```
this.convertToSomeOtherObject(entity) {
   var converted = entity;
   converted.id = entity.Id;
   converted.value = entity.Value;
   [...]
   return converted;
} 
```

解决了问题！

希望这会对某人有所帮助:)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-06-25T17:13:52.347

我有另一个导致这种情况的例子。希望对日后参考有所帮助。我正在使用 AngularJS 1.4.1。

我通过多次调用自定义指令获得了这个标记：

```
<div ng-controller="SomeController">
    <myDirective data="myData.Where('IsOpen',true)"></myDirective>
    <myDirective data="myData.Where('IsOpen',false)"></myDirective>
</div> 
```

`myData`是一个数组，并且`Where()`是一种扩展方法，它遍历数组，返回一个新数组，其中包含原始数组中 IsOpen 属性与第二个参数中的 bool 值匹配的任何项。

在我`$scope.data`这样设置的控制器中：

```
DataService.getData().then(function(results){
    $scope.data = results;
}); 
```

`Where()`从上述标记中的指令调用扩展方法是问题所在。为了解决这个问题，我将对扩展方法的调用移动到控制器而不是标记中：

```
<div ng-controller="SomeController">
    <myDirective data="openData"></myDirective>
    <myDirective data="closedData"></myDirective>
</div> 
```

和新的控制器代码：

```
DataService.getData().then(function(results){
    $scope.openData = results.Where('IsOpen',true);
    $scope.closedData = results.Where('IsOpen',false);
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-20T17:06:16.163

对于初学者，请忽略所有答案，告诉您使用 $watch。Angular 已经在监听器中工作了。我向您保证，您只是朝这个方向思考会使事情复杂化。

忽略所有告诉您用户 $timeout 的答案。您无法知道页面加载需要多长时间，因此这不是最佳解决方案。

您只需要知道页面何时完成渲染。

```
<div ng-app='myApp'>
<div ng-controller="testctrl">
    <label>{{total}}</label>
    <table>
      <tr ng-repeat="item in items track by $index;" ng-init="end($index);">
        <td>{{item.number}}</td>
      </tr>
    </table>
</div> 
```

```
var app = angular.module('myApp', ["testctrl"]);
var controllers = angular.module("testctrl", []);
 controllers.controller("testctrl", function($scope) {

  $scope.items = [{"number":"one"},{"number":"two"},{"number":"three"}];

  $scope.end = function(index){
  if(index == $scope.items.length -1
        && typeof $scope.endThis == 'undefined'){

            ///  DO STUFF HERE
      $scope.total = index + 1;
      $scop.endThis  = true;
 }
}
}); 
```

通过 $index 跟踪 ng-repeat，当数组的长度等于索引时停止循环并执行您的逻辑。

[jsfiddle](https://jsfiddle.net/jlynch83/hb1dg7jf/16/)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-09T15:20:14.163

派对迟到了，但我的问题正在发生，因为 Angular 1.5.8 中的 ui-router 存在缺陷。值得一提的是，此错误仅在我第一次运行应用程序时出现，之后不会再次出现。 [来自github的这篇文章](https://github.com/angular-ui/ui-router/issues/2183)解决了我的问题。基本上错误涉及`$urlRouterProvider.otherwise("/home")` 解决方案是这样的解决方法：

```
$urlRouterProvider.otherwise(function($injector, $location) {
   var $state = $injector.get("$state");
   $state.go("your-state-for-home");
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-25T12:38:53.840

这很奇怪......我有完全相同的错误，来自不同的东西。当我创建我的控制器时，我传递了 $location 参数，如下所示：

```
App.controller('MessageController', function ($scope, $http, $log, $location, $attrs, MessageFactory, SocialMessageFactory) {
   // controller code
}); 
```

当我们使用第三方库或纯 JS 来操作某些细节（此处为 window.location）时，这被证明是一个[错误，下一个 Angular 的摘要将解决这个错误。](https://github.com/angular/angular.js/issues/1417)

所以我只是从控制器创建参数中删除了**$location**，它再次工作，没有这个错误。或者，如果您绝对需要使用 Angular 中的 $location，则必须删除`<a href="#">link</a>`模板页面链接中的每个链接，而是编写**href=""**。为我工作。

希望有一天能有所帮助。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-30T15:25:41.373

我在角度树控制的上下文中遇到了这个错误。就我而言，它是树选项。我从一个函数返回 treeOptions() 。它总是返回相同的对象。但是 Angular 神奇地认为它是一个新对象，然后导致一个摘要循环开始。导致摘要的递归。解决方案是将 treeOptions 绑定到范围。并且只分配一次。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-07-27T11:55:25.837

如果您使用 angular 从浏览器控制台中删除 ng-storage 配置文件。这不是一个通用的解决方案位它在我的情况下有效。

[在 Chrome 中 F12->资源->本地存储](http://i.stack.imgur.com/4MhZS.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-25T08:48:32.373

这发生在我将 Firefox 升级到 51 版之后。之后`clearing the cache`，问题就消失了。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-11T10:07:53.317

我有类似的错误，因为我已经定义

> ng-class="GetLink()"

代替

> ng-click="GetLink()"

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-10-09T15:32:01.267

当使用 $sce.trustAsResourceUrl() 作为从 ng-src 调用的函数的返回值时，从 angular 1.6 -> 1.7 升级后，这发生在我身上。你可以看到这里提到的这个[问题](https://docs.angularjs.org/guide/migration#-sce-)。

就我而言，我必须更改以下内容。

```
<source ng-src="{{trustSrc(someUrl)}}" type='video/mp4' />
trustSrc = function(url){
    return $sce.trustAsResourceUrl(url);
}; 
```

到

```
<source ng-src='{{trustedUrl}} type='video/mp4' />
trustedUrl = $sce.trustAsResourceUrl(someUrl); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-11-26T11:34:20.870

[当我在我的自定义排序过滤器中调用Array.reverse()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse)时，我使用 AngularJS 1.3.9 得到了完全相同的错误

拆掉之后，还不错。

# javascript - 验证文本框，因此必须输入值

> ID：14376882
> 
> 赞同：2
> 
> 时间：2013-01-17T10:23:57.320
> 
> 标签：javascript, validation

您好我正在尝试获取此代码来验证文本框，因此它们必须包含一个值；如果他们不希望出现一条消息，说明这些字段不能为空。这是我写的代码：

```
<head>
<title>Exam entry</title>
<script language="javascript" type="text/javascript">

function validateForm() {
    var result = true;
    var msg="";

        if (document.ExamEntry.name.value=="") {
        msg+="You must enter your name \n";
        document.ExamEntry.name.focus();
        document.gotElementById('name').style.color="red";
        result = false;
    }

        if (document.ExamEntry.subject.value=="") {
        msg+="You must enter the subject \n";
        document.ExamEntry.subject.focus();
        document.gotElementById('subject').style.color="red";
        result = false;
    }

        if (document.ExamEntry.examno.value=="") {
        msg+="You must enter an examination number \n";
        document.ExamEntry.examno.focus();
        document.gotElementById('examno').style.color="red";
        result = false;

    if(msg==""){
    return result;
    }

    {
    alert(msg)
    return result;
    }
}

</script>
</head>

<body>
<h1>Exam Entry Form</h1>
<form name="ExamEntry" method="post" action="success.html">
<table width="50%" border="0">
    <tr>
        <td id="name">Name</td>
        <td><input type="text" name="name" /></td>
    </tr>
    <tr>
        <td id="subject">Subject</td>
        <td><input type="text" name="subject" /></td>
    </tr>
    <tr>
        <td id="examno">Examination Number</td>
        <td><input type="integer" name="examno" /></td>
    </tr>

<tr>
    <td><input type="submit" name="Submit" value="Submit" onclick="return validationFrom();" /></td>
    <td><input type="reset" name="Reset" value="Reset" /></td>
</tr>

</table>
</form>
</body> 
```

任何帮助都会非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:34:36.150

1.  getElementById 而不是 gotelementById
2.  使用 fullName 而不是保留字名称
3.  不要使用与表单名称相同的 ID - IE 会混淆
4.  不要使用提交按钮的 onclick。而是使用表单提交
5.  您可能不会被允许 POST 到 HTML 文件
6.  HTML5 支持 type="number" 而不是 "integer"
7.  将属性添加`value`到每个字段

这是我的建议 - [DEMO](http://jsfiddle.net/mplungjan/r7k7Z/)

我已更改标签 ID 并将名称更改为 fullName

```
function setError(fld,id,msg) {

   if (fld.value=="") {
     document.getElementById(id).className="error";
     return msg;
   }
   document.getElementById(id).className="normal";
   return "";

}
window.onload=function() {
  document.getElementById("ExamEntry").onsubmit=function() {

    var msg,msgs=[],focusField="";
    msg=setError(this.fullName,"fullNameLabel","You must enter your name");
    if (msg) { msgs.push(msg); focusField = this.fullName;}
    msg=setError(this.subject,"subjectLabel","You must enter the subject");
    if (msg) {  msgs.push(msg); focusField = focusField || this.subject;}

    var examno = this.examno;
    msg = setError(examno,"examnoLabel","You must enter an examination number");
    if (msg) { msgs.push(msg); focusField = focusField || examno;}
    else {
      if (isNaN( examno.value) ||  examno.value.length<4) {
        msgs.push("You must enter a valid examination number");
        document.getElementById("examnoLabel").className="error"
        focusField = focusField || this.examno;
      }
    }
    if(focusField) {
      alert(msgs.join("\n"));
      focusField.focus();
      return false;
    }
    return true; // allow submission
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:35:36.477

如果你用保留字命名你的输入元素，你会遇到问题，比如`name`. 编码：

```
document.ExamEntry.name.value 
```

会给你带来问题，因为`ExamEntry`表单已经有一个名为`name`. 您应该重命名您的字段，或使用：

```
document.ExamEntry.elements['name'].value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:29:54.243

属性值不能直接用于元素，您应该始终使用：

```
element.getAttribute('value') 
```

这将为您提供 value 属性。

希望这可以帮助。

# iphone - NSURLIsExcludedFromBackupKey 是递归的吗

> ID：14376883
> 
> 赞同：15
> 
> 时间：2013-01-17T10:23:58.467
> 
> 标签：iphone, ios, backup

我的文档目录中有一个巨大的文件和目录树用于缓存。

按照建议，我将`NSURLIsExcludedFromBackupKey`用于阻止 iTunes 通过应用程序保存这些数据。

我可以在我的根目录 URL 上使用它一次吗？

```
[rootDirectoryURL setResourceValue:[NSNumber numberWithBool:YES] forKey:@"NSURLIsExcludedFromBackupKey" error:&error]; 
```

还是我必须为每个文件调用它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-17T10:29:08.870

是的，您可以将您想要排除的目录的 NSURL 传递给它。

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{
    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue:[NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }

    return success;
} 
```

如果有疑问，您可以使用

```
id flag = nil;
[URL getResourceValue: &flag
               forKey: NSURLIsExcludedFromBackupKey error: &error];
NSLog (@"NSURLIsExcludedFromBackupKey flag value is %@", flag) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T21:06:02.703

从我的测试（在模拟器上）来看，它不是递归的，而且由于 Documents 目录中的数据过多，我刚刚被应用程序拒绝。直接在 Documents 目录中的每个文件夹都被标记，所以我猜它们里面的文件没有，即使在真实设备上也是如此。但是我还在文件夹中添加了新内容，所以我可能只需要再次添加标志。

所以我现在使用这种递归方法，并在每个添加的新文件上添加标志：

```
- (void) addSkipBackupAttributeToFolder:(NSURL*)folder
{
    [self addSkipBackupAttributeToItemAtURL:folder];

    NSError* error = nil;
    NSArray* folderContent = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:[folder path] error:&error];

    for (NSString* item in folderContent)
    {
        NSString* path = [folder.path stringByAppendingPathComponent:item];
        [self addSkipBackupAttributeToFolder:[NSURL fileURLWithPath:path]];
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-08T08:50:04.373

这是已接受答案的快速版本：

```
func addSkipBackupAttributeToItemAtURL(URL: NSURL) -> Bool {
    assert(NSFileManager.defaultManager().fileExistsAtPath(URL.path!))
    var success: Bool = true

    do {
        try URL.setResourceValue(NSNumber(bool: true), forKey: NSURLIsExcludedFromBackupKey)
    } catch {
        success = false
        print("Error excluding \(URL.lastPathComponent) from backup: \(error)")
    }

    return success
} 
```

# .net - 从 VS 2010 切换到 2012 时无法使用 .edmx 模型

> ID：14376895
> 
> 赞同：1
> 
> 时间：2013-01-17T10:24:50.213
> 
> 标签：.net, entity-framework, visual-studio-2012

我正在从事的项目最初是针对 .Net 4.0 开发的。但是，我想开始在用于代码生成的 EDMX 模型中使用 ENUMS。我错误地使用 .NET 4.2 June 2011 CTP 作为中间解决方案（在升级到 VS2012 之前，并且能够使用 .NET 4.5）。现在在 VS2012 中打开解决方案，将所有项目定位为针对 .NET 4.5 构建并卸载 2011 年 6 月的 CTP，我无法正确打开 .edmx 文件。我只得到 XML 文本。此外，如果我尝试构建项目/解决方案，我会收到错误消息“类型或命名空间不存在......”。最后但并非最不重要的一点是，如果我开始一个*新*项目并想要添加一个*新*的.edmx 文件，我会收到错误消息

```
Could not load file or assembly 'System.Data.Entity, Version=4.2.0.0, 
Culture=neutral, PublicKeyToken=b77a5c561934e089' or one of its dependencies. 
The system cannot find the file specified 
```

我已经修复，然后卸载，然后安装VS2012，但这些问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T08:32:07.560

不幸的是，卸载 SQL Server 数据框架工具 2011 年 6 月 CTP 会从 Visual Studio 2010 中删除 edmx 设计图面，但我还无法恢复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T11:11:38.820

事实证明，您不仅需要卸载 EF June 2011 CTP，还需要卸载`SQL Server Data Framework Tools June 2011 CTP`. 特别感谢@mashtagidi：[无法加载程序集'system.data.entity，版本4.2.0.0，](https://stackoverflow.com/questions/9565650/could-not-load-assembly-system-data-entity-version-4-2-0-0)

# iphone - 如何正确实现 loadingScreen

> ID：14376898
> 
> 赞同：0
> 
> 时间：2013-01-17T10:24:52.473
> 
> 标签：iphone

我已经构建了 loadingView，现在看起来不错。但是我想不出合适的时机来显示和删除这个 loadingView。我将 NavigationController 与具有 UIButton 的初始 RootViewController 一起使用。按下 UIButton 时会出现一个新的 UIView，但这需要几秒钟，因为我正在从服务器加载一些文件。所以我想在这段时间展示我的 loadingView。我使用 prepareForSegue()-Method 并在那里放置代码以添加我的加载视图，如下所示

```
[self.navigationController.view addSubview:backgroundLoadingView]; 
```

在 viewDidDisapperar 我把这行代码

```
[backgroundLoadingView removeFromSuperview]; 
```

效果是，当我按下 UIButton 几秒钟内没有任何反应（因为正在加载文件）并且 loadingView 没有弹出（但我应该），新的 ViewController 出现，loadingView 弹出一秒钟然后消失。

所以我猜它会在正确的时刻消失，但它不会在正确的时刻出现。我该如何处理这种情况？

编辑：
这是我的 prepareForSegue 方法

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if([segue.identifier isEqualToString:@"showPointsOnMap"])
    {
        NSLog(@"Here is prepareForsegue()");
        [self.navigationController.view addSubview:backgroundLoadingView];
        [self prepareJSONData:[self getJSONData]];
        [segue.destinationViewController setPointArray:thePointArray];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:46:18.610

如果您想在与服务器通信时显示加载视图，您应该添加到窗口而不是查看控制器.. 像

```
UIWindow *window = [UIApplication sharedApplication].keyWindow;

window addSubView:backgroundLoadingView];

[window bringSubviewToFront:backgroundLoadingView]; 
```

# jquery - 图像形成 div (CSS3)

> ID：14376899
> 
> 赞同：0
> 
> 时间：2013-01-17T10:24:55.610
> 
> 标签：jquery, css

我正在使用 CSS3 边框来创建用户可以将图像拖到其上的形状。

问题是，我希望图像采用 div 的形状。

这可以用 CSS 完成还是我需要使用 jQuery 来完成？

谢谢

编辑：

```
 <div class="my-div">
     <img class="div-image" src="image.jpg" />
 </div>

 border-left: 300px solid red;
 border-right: 200px solid transparent;
 border-top: 30px solid transparent;
 border-bottom: 25px solid transparent; 
```

这会创建一个带有斜边的盒子，形状是我想要的图像

这是一个例子：[jsfiddle](http://jsfiddle.net/Rcpzd/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:31:48.673

这里真正的问题是使用 CSS 边框来修改形状。

如果您想按照您的要求做，您需要使用更好的解决方案——即使用真实图形（可能是 SVG 或 Canvas）创建形状，而不是在 CSS 中伪造它。CSS 形状非常有限，只有在展示 CSS 完全可以做到这一点时才真正有用。它们在实践中并没有多大用处。

我的建议是 SVG。SVG 是一种可以嵌入 HTML 页面的矢量图形格式，可以更好地解决您的问题。您可以轻松地创建您想要的任何形状的元素，并用图像填充它。SVG 唯一的缺点是它不受旧浏览器（例如 IE8）的支持，但这很容易解决，因为 IE8 支持称为 VML 的替代格式。存在几个可与 SVG 或 VML 一起使用的 Javascript 库

我建议您查找一个名为[Raphael](http://raphaeljs.com/)的库。有关您可以做的一些事情，请参阅他们网站上的示例。这一切真的很容易。您将需要学习一些新的语法，但是一旦您掌握了基础知识，您就会对自己能取得的成就感到惊讶。

[编辑] 我刚刚看到您对 JSFiddle 示例的问题的编辑，说明您正在尝试做什么。

JSFiddle 不起作用的原因是您看到的灰色背景的形状是由边框组成的。框边框显示在框内容的顶部。在您的情况下，框边框占据了整个框本身，因此您只能看到灰色边框。图像已加载但隐藏在框后面。我将重复我最初所说的内容：CSS 形状对于除了简单的 hack 之外的任何事情都不是一个好的解决方案。如果您想要一个强大的解决方案，请使用 SVG。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:57:39.967

```
$("div[class=my-div]").css({  "position": "absolute",
        "top": "300px",
        "left": "200px",
        "display": "block",
        "width": "500px"
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:32:23.613

您应该需要在 div 内将图像设置为 100% 宽度。

例子：

```
<div class="new-shape">(image)</div> 
```

CSS：

```
div.new-shape img {
    width: 100%;
} 
```

# python - 是否有推荐的多行导入格式？

> ID：14376900
> 
> 赞同：138
> 
> 时间：2013-01-17T10:24:57.710
> 
> 标签：python, python-2.7, pep8

我已经阅读了在 python 中编码多行导入的三种方法

带斜线：

```
from Tkinter import Tk, Frame, Button, Entry, Canvas, Text, \
    LEFT, DISABLED, NORMAL, RIDGE, END 
```

重复句子：

```
from Tkinter import Tk, Frame, Button, Entry, Canvas, Text
from Tkinter import LEFT, DISABLED, NORMAL, RIDGE, END 
```

带括号：

```
from Tkinter import (Tk, Frame, Button, Entry, Canvas, Text,
    LEFT, DISABLED, NORMAL, RIDGE, END) 
```

此语句是否有推荐的格式或更优雅的方式？

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2013-01-17T10:45:03.010

我个人在导入多个组件时使用括号并按字母顺序对它们进行排序。像这样：

```
from Tkinter import (
    Button,
    Canvas,
    DISABLED,
    END,
    Entry,
    Frame,
    LEFT,
    NORMAL,
    RIDGE,
    Text,
    Tk,
) 
```

这具有额外的优势，即可以轻松查看在每次提交或 PR 中添加/删除了哪些组件。

总的来说，虽然这是个人喜好，但我建议你选择最适合你的东西。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-17T10:35:41.023

您的示例似乎源于[PEP 328](http://www.python.org/dev/peps/pep-0328/)。在那里，括号符号正是针对这个问题提出的，所以我可能会选择这个。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-02-19T14:20:31.870

我会使用[PEP328](https://www.python.org/dev/peps/pep-0328/#rationale-for-parentheses)中的括号符号，在括号前后添加换行符：

```
from Tkinter import (
    Tk, Frame, Button, Entry, Canvas, Text, 
    LEFT, DISABLED, NORMAL, RIDGE, END
) 
```

这是[Django](https://github.com/django/django/blob/master/django/test/__init__.py)使用的格式：

```
from django.test.client import Client, RequestFactory
from django.test.testcases import (
    LiveServerTestCase, SimpleTestCase, TestCase, TransactionTestCase,
    skipIfDBFeature, skipUnlessAnyDBFeature, skipUnlessDBFeature,
)
from django.test.utils import (
    ignore_warnings, modify_settings, override_settings,
    override_system_checks, tag,
) 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-01-17T10:34:37.780

通常使用 Tkinter，只使用它是可以的，`from Tkinter import *`因为模块只会导出明显是小部件的名称。

[PEP 8](http://www.python.org/dev/peps/pep-0008/#imports)没有针对这种情况列出任何约定，所以我想由您决定什么是最佳选择。一切都与可读性有关，因此请选择任何可以清楚表明您正在从单个模块导入内容的内容。

由于所有这些名称都在您的范围内可用，我个人认为选项 2 是最清晰的，因为您可以最好地看到导入的名称。然后，您甚至可以将其进一步拆分，以将这些彼此所属的名称组合在一起。在您的示例中，我可能会将`Tk`,`Frame`和`Canvas`分开，因为它们将小部件组合在一起，而`Button`和`Text`分开，因为它们是视图中的较小组件。

# ruby - 在随机位置用 ruby 压缩 2 个数组

> ID：14376902
> 
> 赞同：4
> 
> 时间：2013-01-17T10:25:08.247
> 
> 标签：ruby, arrays, merge

有没有一种简单的方法可以在随机位置压缩 2 个数组并**保持其原始顺序**？

例如

```
a=[0,1,2,3,4,5,6,7,8,9,10]

b=["one","two","three","four"] 
```

和一个从 0 到 5 的随机数`rand(5)`

```
zipped = [0,"one",1,2,3,"two",4,"three",5,6,7,8,"four",9,10] 
```

并且随机序列将`1,3,1,4`作为将 b 的每个元素“压缩”到 a 的位置

我能做的最好的就是

```
i=0
merged=a
b.each do |x|
rnd = rand(5)
merged.insert(i+rnd,x)
i=i+rnd
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T11:24:31.770

此版本将提供平衡的改组，插入不会偏向阵列的任一端。

```
def ordered_random_merge(a,b)
  a, b = a.dup, b.dup
  a.map{rand(b.size+1)}.sort.reverse.each do |index|
    b.insert(index, a.pop)
  end
  b
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:39:38.983

[这是Mark Hubbart 方法](https://stackoverflow.com/a/14378016/1074296)的一种变体，风格更实用。

MergeTuple = Struct.new :place, :value

```
def ordered_random_merge( merge_to, merge_from )
  merge_from.
  map { |e| MergeTuple[ rand( merge_to.size+1 ), e ] }.
  sort_by { |mt| - mt.place }.
  each_with_object( merge_to.dup ) { |mt, merged| merged.insert(mt.place, mt.value) }
end 
```

# matlab - matlab中预分配单元格的结构

> ID：14376903
> 
> 赞同：2
> 
> 时间：2013-01-17T10:25:13.753
> 
> 标签：matlab, structure, cell

我使用了一个名为`test`以下“布局”的结构（结果`whos test, test`）

```
 Name      Size              Bytes  Class     Attributes
  test      1x1             8449048  struct              
test = 
     timestamp: {[7.3525e+05]  [7.3525e+05]  [7.3525e+05]}
    timeseries: {[44000x8 double]  [44000x8 double]  [44000x8 double]} 
```

对于速度问题，我想用零预先分配它。我找到了一些导致其他“布局”的方法：

```
test2=struct('timestamp',cell(1,3),'timeseries',cell(1,3));
test3=struct('timestamp',{0,0,0},'timeseries',{zeros(44000,8),zeros(44000,8),zeros(44000,8)});
tempstamp={0,0,0};
tempseries={zeros(44000,8),zeros(44000,8),zeros(44000,8)};
test4=struct('timestamp',tempstamp,'timeseries',tempseries);
whos test2 test3 test4,test2,test3,test4 
```

导致

```
 Name       Size              Bytes  Class     Attributes
  test2      1x3                 176  struct              
  test3      1x3             8448824  struct              
  test4      1x3             8448824  struct              
test2 = 
1x3 struct array with fields:
    timestamp
    timeseries
test3 = 
1x3 struct array with fields:
    timestamp
    timeseries
test4 = 
1x3 struct array with fields:
    timestamp
    timeseries 
```

发出命令`test5.timestamp=tempstamp;test5.timeseries=tempseries;whos test5,test5`时，得到

```
 Name       Size              Bytes  Class     Attributes
  test5      1x1             8449048  struct              
test5 = 
     timestamp: {[0]  [0]  [0]}
    timeseries: {[44000x8 double]  [44000x8 double]  [44000x8 double]} 
```

从而再现`test`. 这很奇怪，不是吗？
进一步使用`test2.timestamp{2}=now`不能与`test3`and一起使用`test4`。
好的，这在文档中有所描述`help struct`，但是我怎样才能预先分配这样`1x1 struct`的`test`或`test5`在一行内？最好没有这些`temp*`变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:31:56.800

使用`struct`with cells 来初始化一个带有 cell 的字段需要 depth-2 cell：

```
test=struct('timestamp',{cell(1,3)},'timeseries',{cell(1,3)}); 
```

或者

```
test3 = struct( 'timestamp', { {0,0,0}},...
                'timeseries',{ {zeros(44000,8),zeros(44000,8),zeros(44000,8)} }); 
```

有关参考，请参阅[`struct`](http://www.mathworks.com/help/matlab/ref/struct.html)有关“包含单元阵列的字段”的示例文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T14:06:17.247

另一种可能性（我觉得更容易阅读）是分别初始化每个字段。

```
test3.timestamp = {0, 0, 0};
test3.timeseries = {zeros(44000,8), zeros(44000,8), zeros(44000,8)}; 
```

# r - 警告消息：在文件中（文件，“rt”）

> ID：14376906
> 
> 赞同：9
> 
> 时间：2013-01-17T10:25:16.390
> 
> 标签：r, csv, error-handling, import-from-csv

我正在尝试**将 CSV 文件导入到项目的图表中**。我在 Mac OS X 上使用**R** 2.15.2。

*   第一种方法试过

    我试图运行以导入 CSV 文件的脚本是这样的：

    ```
    group4 <- read.csv("XXXX.csv", header=T) 
    ```

    但我不断收到此错误消息：

    ```
    read.table 中的错误（文件 = 文件，标题 = 标题，sep = sep，quote = quote，：
      找不到对象“XXXXXX.csv”

    ```

*   第二种方法试过

    我尝试移动我的工作目录，但出现另一个错误，提示我无法移动我的工作目录。所以我进入`Preferences`选项卡并将工作目录更改为包含我的 CSV 文件的文件。但我仍然得到同样的错误（作为第一种方式）。

*   第三种方法试过

    然后我尝试了这个脚本：

    ```
    group4 <- read.table(file.choose(), sep="\t", header=T) 
    ```

    我得到这个错误：

    ```
    警告信息：
    在 read.table(file.choose(), sep = "\t", header = T) 中：
      readTableHeader 在“/Users/xxxxxx/Documents/Programming/R/xxxxxx/xxxxxx.csv”上找到的不完整的最后一行

    ```

我在**R**站点和整个 Internet 上进行了搜索，但没有任何东西可以让我将这个简单的 CSV 文件导入**R**控制台。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:30:04.577

1.  该文件不在您的工作目录中，请更改它，或使用绝对路径。
2.  比你指向一个不存在的目录，或者你在那里没有写权限。
3.  文件的最后一行格式错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-19T14:13:04.530

至于缺少的EOF（即文件中的最后一行已损坏）...通常，数据文件应以空行结尾。如果是这样的话，也许检查你的文件。作为替代方案，我建议尝试`readLines()`. 此函数将数据文件的每一行读入一个向量。如果您知道输入的格式，即表格中的列数，您可以这样做...

```
number.of.columns <- 5 # the number of columns in your data file
delimiter <- "\t" # this is what separates the values in your data file
lines <- readLines("path/to/your/file.csv", -1L)
values <- unlist(lapply(lines, strsplit, delimiter, fixed=TRUE))
data <- matrix(values, byrow=TRUE, ncol=number.of.columns) 
```

# android - 为什么 GCM 会为某些 android 设备返回空的注册 id？

> ID：14376909
> 
> 赞同：4
> 
> 时间：2013-01-17T10:25:22.427
> 
> 标签：android, google-api, google-cloud-messaging

```
private void registerClient()    
{            
   try {  
            GCMRegistrar.checkDevice(this);  
            GCMRegistrar.checkManifest(this);  
            regId = GCMRegistrar.getRegistrationId(this);  
            if (regId.equals(""))   
            {  
              registrationStatus = "Registering...";                  
              GCMRegistrar.register(this, "517739810110");  
              regId = GCMRegistrar.getRegistrationId(this);
              registrationStatus = "Registration Acquired";  
              sendRegistrationToServer();
            } 
            else 
            {
              registrationStatus = "Already registered";
            }
     } 
  catch (Exception e) 
     {
           e.printStackTrace();
           registrationStatus = e.getMessage();
     }
} 
```

对于某些 Android 设备，我可以从 GCM 成功获取注册 ID，但不是所有 Android 设备。GCM 会为某些 Android 设备返回空的注册 ID。我使用 GCM.jar 文件作为返回注册 ID 的第三方工具。所有权限都在清单文件中正确定义。发件人 ID 正确。API 密钥是正确的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T15:33:37.833

我不确定返回空白注册 ID 的确切位置，但重要的是要意识到：

```
GCMRegistrar.register(this, "517739810110"); 
```

是一个异步事件，不会立即发生。所以调用：

```
GCMRegistrar.getRegistrationId(this); 
```

之后不会给你注册ID，只有一个空字符串。为了在您的设备向 GCM 服务器注册后正确获取注册 ID，您需要在 GCMBaseIntentService 中处理以下回调：

```
protected void onRegistered(Context context, String registrationId) 
```

这是您将获得注册 ID 以及您应该在应用程序服务器上注册的地方。您应该使用[GCM 客户端示例](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/GCMIntentService.java)作为如何执行此操作的指南：

```
@Override
protected void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId);
    displayMessage(context, getString(R.string.gcm_registered,
            registrationId));
    ServerUtilities.register(context, registrationId);
} 
```

您还应该遵循 GCM 客户端示例在其[DemoActivity](http://code.google.com/p/gcm/source/browse/samples/gcm-demo-client/src/com/google/android/gcm/demo/app/DemoActivity.java)中的注册方式：

```
final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
    // Automatically registers application on startup.
    GCMRegistrar.register(this, SENDER_ID);
} 
```

请注意，它不会在调用 register() 方法后立即查询注册 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-18T11:22:44.623

调用这个方法两次，因为有时在准备好的 Android 上没有得到那个 ID String Id = Notification();

```
if(Id.equals("")){
String Id =  Notification();
}        

  private String Notification() {
                registerReceiver(mHandleMessageReceiver, new IntentFilter(
                        DISPLAY_MESSAGE_ACTION));
                final String regId = GCMRegistrar
                        .getRegistrationId(ActivateScreen.this);

                // Check if regid already presents
                if (regId.equals("")) {
                    // Registration is not present, register now with GCM
                    GCMRegistrar.register(ActivateScreen.this, SENDER_ID);
                } else {
                    // Device is already registered on GCM
                    if (GCMRegistrar.isRegisteredOnServer(ActivateScreen.this)) {
                        // Skips registration.
                        // Toast.makeText(getApplicationContext(),
                        // "Already registered with GCM", Toast.LENGTH_LONG)
                        // .show();
                    } else {
                        final Context context = ActivateScreen.this;
                        mRegisterTask = new AsyncTask<Void, Void, Void>() {
                            @Override
                            protected Void doInBackground(Void... params) {
                                // Register on our server
                                // On server creates a new user
                                ServerUtilities.register(context, "", "", regId);
                                return null;
                            }

                            @Override
                            protected void onPostExecute(Void result) {
                                mRegisterTask = null;
                            }
                        };
                        mRegisterTask.execute(null, null, null);
                    }
                }

                Log.i("Device Id", appId);
                return regId;
            } 
```

# java - 我应该抓住 OutOfMemoryError 吗？

> ID：14376924
> 
> 赞同：3
> 
> 时间：2013-01-17T10:25:57.870
> 
> 标签：java, out-of-memory

一般建议是，除非在特殊情况下，否则不应捕获 java.lang.Error，请参阅[捕获 Throwable 是否是一种不好的做法？](https://stackoverflow.com/questions/6083248/is-it-a-bad-practice-to-catch-the-throwable)例如。

我的情况是我有一个程序有时会耗尽内存并抛出 java.lang.OutOfMemoryError。尽管无法从中恢复，但我确实想知道它发生了，所以我希望在日志中看到一些东西和一个非零退出代码。那么这样的事情是否值得建议？

```
public static void main(String[] args)
{
    try
    {
        ...
    }
    catch (Exception e)
    {
        e.printStackTrace();
        System.exit(1);
    }
    catch (OutOfMemoryError e)
    {
        e.printStackTrace();
        System.exit(1);
    }
} 
```

另一个程序是类似的，只是它可能是一个消耗所有内存的特定线程。在这种情况下，如果该线程退出，则可以继续处理，我真正想要的只是查看日志并最终获得非零退出代码。那么我应该在那个线程运行方法中捕获 OutOfMemoryError 吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T10:30:01.900

在调用堆栈的最顶部设置异常屏障，捕获并记录所有`Throwable`s 是非常有意义的。在服务器端代码中，这实际上是常态。如果您确保`OutOfMemoryError`在该级别捕获唯一的，而不是更低的，那么它很有可能不会损害您的系统：随着调用堆栈展开，为服务请求而创建的所有对象都将变得无法访问。由于 OOME 很可能恰好发生在对系统造成最大内存压力的线程中，因此所有内存都将被回收，系统的其余部分将能够再次呼吸。

是的，从技术上讲，总是有机会在块内获得 OOME `finally`，从而导致资源泄漏或更糟；或者在一些代码中修改了一个长期存在的全局结构，破坏了它的不变量，但在实践中这不太可能。

在决定您的 OOME 策略时，请记住，您的应用程序会受到许多不可预测的因素的影响，这些因素或多或少可能会降低其稳定性。OOME 只是该范围内的另一个点，通常其风险影响不是特别高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T10:29:22.807

捕获它很常见，但仅在线程的最高级别。最简单的方法是使用未捕获异常处理程序。这是一个在抛出异常时调用的函数。此时，您可以记录它并告诉用户您退出应用程序的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:35:41.483

一般规则是：任何异常都应该被最有能力做出充分反应的模块捕获。如果当前方法不知道该做什么，它应该让异常通过，直到到达 main() 或 run() 方法。那些方法不希望有更胜任的方法，所以他们可以捕捉和记录或泛滥。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:59:26.043

在上面的示例中，我认为这是一个好主意，因此您可以控制程序的关闭方式。如果你没有捕捉到这个错误，其他线程可以继续错误地运行（这个错误只在一个线程中抛出）当调用shell可以检查时它也会给出一个退出代码。我会为这个错误使用不同的退出代码。

一般来说，OOME 不保证是可恢复的，但也不保证您的程序也会关闭。

# python - 通过python 2.4连接oracle 10G

> ID：14376926
> 
> 赞同：0
> 
> 时间：2013-01-17T10:26:01.453
> 
> 标签：python

嗨，我想通过 python 连接到 oracle。Python 安装在我的版本为 (2.4) 的窗口机器中。Oracle 11G 安装在 UNIX 框中。我想知道我需要在哪台机器和哪个文件夹中安装“cx_Oracle”DB API，以及我需要在哪台机器（UNIX 或 oracle）中设置 ORACLE_HOME 路径。请让我知道整个步骤。

请回复我，因为这对我来说太重要了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T11:02:22.540

cx_Oracle 是一个 python 模块，它应该安装到 python site-packages 文件夹。但看起来他们不支持 Windows 上的 python2.4。[http://cx-oracle.sourceforge.net/](http://cx-oracle.sourceforge.net/)。

cx_Oracle 需要 Oracle[客户端](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)。您需要配置 Oracle 客户端路径来定位 sqlplus 二进制文件。

一种方法是使用 sqlplus 来验证连接是否按预期工作。然后使用 cx_Oracle 进行连接。

# spring - Spring 应用程序上下文导入

> ID：14376928
> 
> 赞同：2
> 
> 时间：2013-01-17T10:26:07.207
> 
> 标签：spring, import, applicationcontext

我有一个项目 A（Spring Web）并想导入另一个项目，例如

1.  网络项目
2.  桌面项目

怎么做 ？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T10:36:50.727

您不能像这样导入“项目”。您可以将 JAR 作为项目的依赖项提供，然后将 JAR 中的 Spring 配置（即应用程序上下文）导入项目的 Spring 配置中。

**例子**

项目A 编译`a.jar`成`a-context.xml`. `a.jar`然后在`project-context.xml`你的项目中你放置

```
<import resource="classpath:a-context.xml" /> 
```

**你的情况**

在您的情况下，这没有多大意义。我假设 web 项目被编译成一个`WAR`文件？如果在桌面应用程序中使用，那么您有很多多余的依赖项。因此，您应该提取一个已编译的通用项目，该项目`common.jar`可用作两个项目的依赖项。

# android - 2 个活动之间的进度条

> ID：14376935
> 
> 赞同：0
> 
> 时间：2013-01-17T10:26:32.963
> 
> 标签：android, android-progressbar

我正在制作一个非常简单的程序。我只想在第一个和第二个活动之间显示一个进度条。

活动 1 只包含一个按钮，一旦我单击它，它应该在同一活动中显示一个进度条并一直显示，直到第二个活动出现，其中只包含一条正在显示的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:33:36.833

每当有任何进程需要更多时间时都会使用 ProgressBar，那么我们应该使用异步任务并显示进度对话框，直到完成任务

如果您有任何类似的要求，请遵循这些

```
private class LongOperation extends AsyncTask<String, Void, String> 
{
    protected void onPreExecute() 
    { 
        progressDialog = new ProgressDialog(activity.this); 
        progressDialog.setTitle("Processing...");
        progressDialog.setMessage("Please wait...");
        progressDialog.setCancelable(true);
        progressDialog.show();
    }

    protected String doInBackground(String... params) 
    {
        try 
        {
            //BackGround process();
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
    protected void onPostExecute(String result) 
    {

        progressDialog.dismiss();
        Intent n = new Intent(firstactivity.this, secondactivity.class);
        startActivity(n);
    }
  } 
```

**这个怎么称呼**

```
ProgressDialog progressDialog;
LongOperation mytask = null;
mytask = new LongOperation();
mytask.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:34:20.543

看看这个例子，这将清除你所有与进度条和异步任务相关的概念

```
import java.io.BufferedInputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URL;
import java.net.URLConnection;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class download extends Activity {

public static final int DIALOG_DOWNLOAD_PROGRESS = 0;
private Button startBtn;
private ProgressDialog mProgressDialog;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startBtn = (Button)findViewById(R.id.startBtn);
    startBtn.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            startDownload();
        }
    });
}

private void startDownload() {
    String url = "http://farm1.static.flickr.com/114/298125983_0e4bf66782_b.jpg";
    new DownloadFileAsync().execute(url);
}
@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DIALOG_DOWNLOAD_PROGRESS:
        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("Downloading file..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
        return mProgressDialog;
    default:
        return null;
    }
}

class DownloadFileAsync extends AsyncTask<String, String, String> {

@Override
protected void onPreExecute() {
    super.onPreExecute();
    showDialog(DIALOG_DOWNLOAD_PROGRESS);
}

@Override
protected String doInBackground(String... aurl) {
    int count;

try {

URL url = new URL(aurl[0]);
URLConnection conexion = url.openConnection();
conexion.connect();

int lenghtOfFile = conexion.getContentLength();
Log.d("ANDRO_ASYNC", "Lenght of file: " + lenghtOfFile);

InputStream input = new BufferedInputStream(url.openStream());
OutputStream output = new FileOutputStream("/sdcard    /some_photo_from_gdansk_poland.jpg");

byte data[] = new byte[1024];

long total = 0;

    while ((count = input.read(data)) != -1) {
        total += count;
        publishProgress(""+(int)((total*100)/lenghtOfFile));
        output.write(data, 0, count);
    }

    output.flush();
    output.close();
    input.close();
} catch (Exception e) {}
return null;

}
protected void onProgressUpdate(String... progress) {
     Log.d("ANDRO_ASYNC",progress[0]);
     mProgressDialog.setProgress(Integer.parseInt(progress[0]));
}

@Override
protected void onPostExecute(String unused) {
    dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
}
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:30:45.830

在执行繁重的工作之前调用第二个活动并从那里显示进度条会更有效。看看 AsyncTask 类是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:31:06.993

我假设您想在移动到第二个活动时实现长时间运行的后台任务。如果是这种情况，则实施**[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)**。

您可以实现 4 种 AsyncTask 方法，但您可以执行以下操作：

1.  `doInBackground()`- 在这里执行您长期运行的任务
2.  `onPostExecute()`- 移动到第二个活动

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-26T05:52:00.540

在切换到新活动之前显示 ProgressDialog，或者在显示新活动之后显示，但数据仍在加载。你可以检查它......在这里：http: [//developer.android.com/reference/android/app/ProgressDialog.html](http://developer.android.com/reference/android/app/ProgressDialog.html)

# c - 'true' 未声明（在此函数中首次使用）在 opencv

> ID：14376940
> 
> 赞同：3
> 
> 时间：2013-01-17T10:26:58.857
> 
> 标签：c, opencv

> **可能重复：**
> [在 C 中使用布尔值](https://stackoverflow.com/questions/1921539/using-boolean-values-in-c)

我是 C 的新手，想编写一个从网络摄像头检测人脸的程序，我在网上找到了一个，我在 eclipse CDT 上使用 opencv-2.4.3，我在网上搜索了解决方案，但没有得到合适的我的问题的解决方案，因此将其发布为新问题。这是代码：

```
 // Include header files
 #include "/home/OpenCV-2.4.3/include/opencv/cv.h"
 #include "/home/OpenCV-2.4.3/include/opencv/highgui.h"
 #include "stdafx.h"

 int main(){

//initialize to load the video stream, find the device
 CvCapture *capture = cvCaptureFromCAM( 0 );
if (!capture) return 1;

//create a window
cvNamedWindow("BLINK",1);

 while (true){
    //grab each frame sequentially
    IplImage* frame = cvQueryFrame( capture );
    if (!frame) break;

    //show the retrived frame in the window
    cvShowImage("BLINK", frame);

    //wait for 20 ms
    int c = cvWaitKey(20);

    //exit the loop if user press "Esc" key
    if((char)c == 27 )break;
}
 //destroy the opened window
cvDestroyWindow("BLINK");

//release memory
cvReleaseCapture(&capture);
return 0;
 } 
```

而且我收到错误为 true' 未声明（首次在此函数中使用），它在 while 循环中引起问题，我读到使用 while(true) 不是一个好习惯，但我应该怎么做。谁能帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T10:27:59.610

用例如替换它

```
while(1) 
```

或者

```
for(;;) 
```

或者你可以这样做（`c`在循环之前定义）：

```
while (c != 27)
{
    //grab each frame sequentially
    IplImage* frame = cvQueryFrame( capture );
    if (!frame)
        break;
    //show the retrieved frame in the window
    cvShowImage("BLINK", frame);
    //wait for 20 ms
    c = cvWaitKey(20);
    //exit the loop if user press "Esc" key
} 
```

或`c`根本没有，但这将以20 毫秒的等待时间*开始*循环：

```
while (cvWaitKey(20) != 27)
{
    //grab each frame sequentially
    IplImage* frame = cvQueryFrame( capture );
    if (!frame)
        break;
    //show the retrieved frame in the window
    cvShowImage("BLINK", frame);
} 
```

第三种可能性：

```
for(;;)
{
    //grab each frame sequentially
    IplImage* frame = cvQueryFrame( capture );
    if (!frame)
        break;
    //show the retrieved frame in the window
    cvShowImage("BLINK", frame);
    if (cvWaitKey(20) == 27)
        break;
} 
```

*更新*：同时想知道定义是否更正确

```
#define true  1
#define false 0 
```

或者

```
#define true 1
#define false (!true) 
```

或再次

```
#define false 0
#define true  (!false) 
```

因为如果我说，做了：

```
int a = 5;
if (a == true) { // This is false. a is 5 and not 1\. So a is not true }
if (a == false){ // This too is false. So a is not false              } 
```

我会想出一个非常奇怪的结果，我发现[这个链接](http://markshroyer.com/2012/06/c-both-true-and-false/)指向一个稍微奇怪的结果。

我怀疑以安全的方式解决这个问题需要一些宏，例如

```
#define IS_FALSE(a)  (0 == (a))
#define IS_TRUE(a)   (!IS_FALSE(a)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T10:30:26.067

`true`在许多版本的 c 中都没有定义。如果您想使用“布尔”，请参阅[在 C 中使用布尔值](https://stackoverflow.com/questions/1921539/using-boolean-values-in-c)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T10:41:18.510

C 编译器指出该变量`true`未在代码中的任何位置或它包含的头文件中声明。它不是原始 C 语言规范的一部分。您可以将其定义为如下宏：

```
#define true  1 
```

但是使用起来更简单，更清晰`while(1)`。如果你需要一个事件循环，这通常是这样做的。如果这是“不好的做法”，那对我来说就是新闻。

我一直忘记C99。您也可以尝试添加

```
#include <stdbool.h> 
```

如果您的 C 版本支持它。

# iphone - 如何在 iPhone SDK 中使用自定义字体？

> ID：14376941
> 
> 赞同：48
> 
> 时间：2013-01-17T10:27:02.623
> 
> 标签：iphone, ios, objective-c, xcode4.2

我想在我的应用程序中实现自定义字体。所以我在我的项目源代码中添加了它。我不想以编程方式设置它。我可以通过在 xib 中设置属性来做到这一点吗？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2013-01-17T10:34:03.810

1.  **将**您的自定义字体添加到您的项目中，即将字体文件（`CALIBRIZ_0.TTF`）拖到 XCode 项目中。

2.  **编辑 Info.plist**：使用“应用程序提供的字体”键添加一个新条目。

3.  对于每个文件，将文件名添加到此数组

    ![在此处输入图像描述](../Images/ed8a7db61b492844173149f5a8586ff7.png)

4.  打开字体手册中的字体（**在 finder 中双击您的字体**）以查看真正的文件名是什么，我看到了这个：

![在此处输入图像描述](../Images/e2c5ec7c50efce3febb8b240b200b4c0.png)

**现在将字体设置为您的标签**

```
yourLabel.font = [UIFont fontWithName:@"Calibri" size:15]; 
```

按照[这个](http://rajneesh071.blogspot.in/2013/09/how-to-use-custom-font-in-iphone-sdk.html)获得更多

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-17T11:08:14.430

我认为你没有很好地搜索。

> ```
> How to add CUSTOM fonts:-
> Steps:-
>   1\.  Add your custom font files into your project using XCode as a resource
>   2\.  Add a key to your info.plist file called "Fonts provided by application".
>   3\.  Make this key an array
>   4\.  For each font you have, enter the full name of your font file (including the extension) as items to theUIAppFonts array
>   5\.  Save info.plist
>   6\.  Now call UIFont *fontCustom = [UIFont fontWithName:@"CustomFontName" size:12];  to get the custom fonts. 
> ```

**注意：-**确保字体在您的 Copy Bundle Resources 中。

例如：- 如果你想`Nexa Light`在你的应用程序中使用“”字体，那么将“Nexa Light.otf”添加到你的项目中并以这种方式调用。

```
UIFont *fontCustom = [UIFont fontWithName:@"Nexa Light" size:14];
lblName.font = fontCustom; 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-17T10:39:22.323

**第 1 步：**
将字体文件复制到您的资源文件中。确保将其添加到构建阶段设置中的复制捆绑资源中。

**第 2 步：**
在您的 Info.plist 中，只需在此屏幕下方进行配置

![在此处输入图像描述](../Images/6d9e9df3e954db0ecf2945f2999b671a.png)

**第 3 步：**

使用以下代码访问和使用它：

```
UIFont *font = [UIFont fontWithName:@"YOUR_FONT" size:10]; 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-01-17T10:43:00.143

使用**.ttf**文件中的字体名称

你也可以从这个[链接中找到](http://iosfonts.com/)

将此字体名称及其扩展名（例如**（OpenScan.ttf））**添加到`.plist`文件中

![在此处输入图像描述](../Images/bd519caa17e8a9d3a90c2e22e0380195.png)

将此字体添加到**.plist**文件后，您可以通过

```
[self.txtField setFont: [UIFont fontWithName:@"OpenSans" size:13]]; 
```

欲了解更多信息，请阅读我的答案[，将自定义字体添加到 iOS 应用程序中找到他们的真实姓名](https://stackoverflow.com/questions/15984937/adding-custom-fonts-to-ios-app-finding-their-real-names/15985113#15985113)。

# php - PHP更新功能不起作用

> ID：14376942
> 
> 赞同：0
> 
> 时间：2013-01-17T10:27:09.703
> 
> 标签：php, mysql, database, function, content-management-system

我有这个功能，它的目的是更新一个帖子。我有另一个函数，它从数据库中提取数据并在`<form>`标签之间显示它，该操作将指向一个 update.php 文件，其中包括以下内容：

```
<?php
include_once("functions.php");

$obj = new data_handler; 
$obj->update_post($_GET['id']);
?> 
```

然后运行：

```
public function update_post($id) {  
  try {
    $sql = $this->con->prepare("UPDATE Content SET Title=?, Body=? WHERE id=?");
    $sql->bindParam(1, $_POST['title']);
    $sql->bindParam(2, $_POST['body']);
    $sql->bindParam(3, $id);
    $sql->execute();
  } catch (PDOException $e) {
    echo $e->getMessage();
  }
  header("Location: index.php");
} 
```

这是拉取内容进行编辑的功能：

```
public function display_selected ($id) {
    $sql = $this->con->query("SELECT * FROM Content WHERE id= '$id'");
    while ($row = $sql->fetch()) {
        echo $row['Body'];
    }
} 
```

这是表格：

```
 <form action="update.php" method="post">
        <input type="text" size="105" name="title"></input>
        <textarea name="body"><?php $obj = new data_handler; $obj->display_selected($_GET['id']); ?></textarea>
        <input type="submit" value="Update"/>
    </form> 
```

我没有收到任何错误/异常/警告，我可以完成整个过程，但它不会改变任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T11:02:55.293

**选项1**

改变

```
$obj->update_post($_GET['id']); 
```

到

```
$obj->update_post($_POST['id']); 
```

并将其添加到您的表单中

```
<input type="hidden" name="id" value="<?=$_GET['id']?>"> 
```

*值得注意的是：输入标签是自关闭的，所以最后你不需要。*

**选项 2**

改变

```
<form action="update.php" method="post"> 
```

到

```
<form action="update.php?id=<?=$_GET['id']?>" method="post"> 
```

# android - 如何在android中发送电子邮件

> ID：14376949
> 
> 赞同：-4
> 
> 时间：2013-01-17T10:27:28.473
> 
> 标签：android, sendmail

> **可能重复：**
> [如何从我的 Android 应用程序发送电子邮件？](https://stackoverflow.com/questions/2197741/how-to-send-email-from-my-android-application)

我正在创建一个 main.xml

如何在android中发送电子邮件。但强制是 TO 是固定 ID（例如：To:myid@example.com）

我有 main.xml

```
 <LinearLayout android:id="@+id/LinearLayout02"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"     
   android:orientation="horizontal">

    <TextView android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:id="@+id/to"
     android:text="To" />

    <EditText android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:width="170dip" 
    android:id="@+id/to" />
    </LinearLayout>

   <LinearLayout android:id="@+id/LinearLayout02"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"     
   android:orientation="horizontal">

   <TextView android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:id="@+id/form"
     android:text="from" />

   <EditText android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:width="170dip" 
    android:id="@+id/emailaddress" />

</LinearLayout>

<LinearLayout android:id="@+id/LinearLayout03"
     android:layout_width="wrap_content" 
     android:layout_height="wrap_content"     
     android:orientation="horizontal">

 <TextView android:layout_width="wrap_content"     
       android:layout_height="wrap_content" 
       android:id="@+id/emailsubject"     
       android:text="Subject" />
   <EditText android:layout_width="wrap_content"
     android:layout_height="wrap_content" 
     android:width="170dip" 
     android:id="@+id/emailsubject" />
</LinearLayout>

<EditText android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:lines="5" 
    android:width="300dip"
    android:hint="Compose Mail"
    android:id="@+id/emailtext" />

<Button android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:id="@+id/emailsen" 
    android:text="send"
    android:width="150dip" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T10:32:34.783

这是用于发送电子邮件的意图

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("plain/text");
        String msg = "MESSAGE TEXT HEAR";
        emailIntent.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "myid@gmail.com" });
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT,
                "SUBJECT TEXT HEAR");
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, msg);
        startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T10:43:42.043

可以通过使用 Intent 来实现：

```
 intent.putExtra(Intent.EXTRA_EMAIL, new String[] { "username@domain.com" }); 
```

# .net - 将 Tridion 与其他用户连接时出错

> ID：14376952
> 
> 赞同：1
> 
> 时间：2013-01-17T10:27:36.333
> 
> 标签：.net, tridion, tridion-2011, core-services, tridion-core-services

嗨，我正在尝试使用以下代码使用另一个人的凭据通过核心服务连接到 Tridion：

```
using (ChannelFactory<ISessionAwareCoreService> factory = 
  new ChannelFactory<ISessionAwareCoreService>("netTcp_2011"))
{
  NetworkCredential networkCredential = 
   new NetworkCredential("username", "password", "domain");
  factory.Credentials.Windows.ClientCredential = networkCredential;
  ISessionAwareCoreService client = factory.CreateChannel();
  Console.WriteLine(client.GetCurrentUser().Title); 
```

但我得到错误：

```
Could not connect to net.tcp://localhost:2660/CoreService/2011/netTcp. The connection attempt lasted for a time span of 00:00:01.0310784\. TCP error code 10061: No connection could be made because the target machine actively refused it 127.0.0.1:2660 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T12:05:18.860

要回答您的问题，只有在端口 2660 开放的情况下才能将 netTcp 用于远程客户端。因此，如果您不确定防火墙限制，最好使用 wsHttp 或 basicHttp 绑定。

此外，我没有得到的一件事是您正在使用会话感知核心服务客户端并且您正在尝试提供密码。这对我来说并没有真正增加，在我看来，会话感知核心服务客户端应该用于您的用户帐户已经针对 SDL Tridion 进行身份验证的情况，或者当您通过有效的 SDL 调用核心服务时Tridion 模拟用户。之后，您只需通过用户名（不需要密码）模拟对有效 SDL Tridion 用户名的核心服务调用。您可以为 SessionAwareCoreServiceClient 提供凭据（用户名和密码），但是您必须提供有效 SDL Tridion 模拟用户的凭据，然后您仍然必须进行模拟。

我建议尝试使用常规的核心服务客户端，如下所述：[获取没有配置文件的核心服务客户端](http://code.google.com/p/tridion-practice/wiki/GetCoreServiceClientWithoutConfigFile)。

或者，如果您坚持使用 Session Aware Core Service Client（我认为您的情况是错误的），请确保您的应用程序在有效的 SDL Tridion Impersonation 用户下运行（如果您在外部服务器上运行，则需要添加域帐户在 SDL Tridion MMC 管理单元模拟用户中），然后模拟核心服务客户端，如下所示：

```
using (SessionAwareCoreServiceClient client = new SessionAwareCoreServiceClient())
{
  // impersonate with valid user
  client.Impersonate("SDL Tridion Username here");
  // use client
  client.Delete(...);
} 
```

但是您当然仍然必须选择正确的绑定。

# mysql - mysql中具有固定位数的整数

> ID：14376955
> 
> 赞同：1
> 
> 时间：2013-01-17T10:27:49.127
> 
> 标签：mysql

我在 MySQL 数据库中有一个类型为 的列`int`。

我希望将数字转换为固定数字。

例如：

如果一个数字是 69 那么它应该被转换为 000069

如果一个数字是 230 那么它应该被转换为 000230

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T10:31:27.310

该字段必须是`CHAR`或`VARCHAR`保存填充值，然后您将使用`LPAD`它来转换它：

```
UPDATE table SET col = LPAD(col, 6, '0'); 
```

但是，如果这是在应用程序端而不是数据库端完成的，对我来说会更有意义（除非你需要这个值`JOIN`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T10:32:00.377

您可以对整数字段使用 ZEROFILL 选项 -

```
CREATE TABLE table1 (
  number INT(6) ZEROFILL DEFAULT NULL
); 
```

但是你的 MySQL 客户端必须支持这个选项。

试试 MySQL 命令行客户端 -

```
INSERT INTO table1 VALUES(1);
SELECT * FROM table1;
+--------+
| number |
+--------+
| 000001 |
+--------+ 
```

# wpf - 如何使用 MVVM Light 恢复组合框上的选择

> ID：14376959
> 
> 赞同：1
> 
> 时间：2013-01-17T10:27:56.990
> 
> 标签：wpf, combobox, mvvm-light

我正在使用 WPF 和 MVVM Light 框架。

我想知道如何恢复组合框上的选择。

例如：

*   默认选择是“文本 1”
*   当用户在组合框中选择“文本 2”时，我会显示一个对话框（是/否）以确认操作
*   如果用户单击“否”，我想将值恢复为“文本 1”

到目前为止，我的 xaml 是这样的：

```
ComboBox ItemsSource="{Binding SourceData}" SelectedItem="{Binding SelectedSourceData,Mode=TwoWay}" 
```

我的绑定 SourceData 在 MainViewModel.cs 中定义为：

```
public ObservableCollection<TextItem> SourceData { get; set; } 
```

我的组合框没有名称。有没有办法使用绑定方法恢复选择？

任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T12:26:18.070

（未测试）

在 ViewModel 的绑定属性集中，在内部设置值之前调用确认对话框。如果答案是肯定的，则只设置私有值，然后在任何一种情况下引发更改的属性。

这仍然是可测试的（如果您有确认对话框的可模拟界面）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T16:39:20.747

我刚刚用列表视图浏览了这个

看到[这个链接](https://stackoverflow.com/questions/14516843/mvvm-cancel-changes-in-wpf-listbox-vb-net)

您必须使用 eventtocommand 绑定到组合框的 selecteditemchanged 事件上的中继命令。选择会改变，但您可以验证您的逻辑并在需要时将其更改回来

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-26T17:07:12.300

`ICollectionView`是在选择方面最常用的。
`MoveCurrentToPrevious()`将选择从当前移动到上一个，这就是您要寻找的。所以，将它绑定到你的`ComboBox`并使用它！[有关 MSDN 中的更多信息，](http://msdn.microsoft.com/en-us/library/system.componentmodel.icollectionview.aspx)希望对您有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-14T16:42:32.530

我遇到了同样的问题，原因是 UI 线程和投标的工作方式。检查此链接： [ComboBox 上的 SelectedItem](https://stackoverflow.com/questions/17078029/selecteditem-on-combobox/17113225#17113225)

示例中的结构使用后面的代码，但 MVVM 完全相同。

# c# - 正则表达式匹配（贪婪/不贪婪？）

> ID：14376966
> 
> 赞同：4
> 
> 时间：2013-01-17T10:28:31.290
> 
> 标签：c#, regex

我在“分离”这些数据时遇到了一些麻烦。Altough 辅助函数等*是*一个选项，我真的很想只使用正则表达式来解决这个问题（并在匹配后处理匹配组）。

这是（部分）我拥有的数据：

```
Belgium
Belgium M_Foo
Belgium A_Bar
Belgium M_FooBar
Belgium S_Whooptee Doo
Belgium Xxx
Belgium S_Foo Bar
United Kingdom
United Kingdom W_Foo-Bar
United Kingdom M_Yay
United Kingdom Xxx
United Kingdom S_Derp
United Kingdom F_Doh Lorem
United Kingdom S_Ipsum Dolor
United States of America L_Foo
Macedonia F.Y.R. Xxx
Macedonia F.Y.R. S_Foo Bar
Cyprus (Greek) M_Foo
Congo (Democratic Republic of)
Congo (Democratic Republic of) Q_Yolo 
```

本质上，这是一个“键/值”类型的字符串数组。它包含一个国家/地区名称（未标准化，因此我不能使用硬编码的国家/地区名称或“查找”，它也可能是国家/地区名称以外的其他字符串），`optionally`后跟关键字`Xxx` *或* `<random_upcase_char>_<random_text>`.

我想出了以下正则表达式：

```
^(.+?)(?:\s+(Xxx|[A-Z]_.*)?) 
```

或者，第一个匹配组的差异很小：

```
^(.*?)(?:\s+(Xxx|[A-Z]_.*)?) 
```

这适用于以 . 开头的第一个字符串`Belgium`。对于这些记录，它返回以下结果：

```
Group 1     Group 2
================================
Belgium
Belgium     M_Foo
Belgium     A_Bar
Belgium     M_FooBar
Belgium     S_Whooptee Doo
Belgium     Xxx
Belgium     S_Foo Bar 
```

但是，以下几行会引起麻烦：

```
Group 1     Group 2
================================
United
United
United
United
United
United
United
United
Macedonia
Macedonia
Cyprus
Congo
Congo 
```

我希望正则表达式执行以下操作：

```
Group 1                         Group 2
================================================
United Kingdom
United Kingdom                  W_Foo-Bar
United Kingdom                  M_Yay
United Kingdom                  Xxx
United Kingdom                  S_Derp
United Kingdom                  F_Doh Lorem
United Kingdom                  S_Ipsum Dolor
United States of America        L_Foo
Macedonia F.Y.R.                Xxx
Macedonia F.Y.R.                S_Foo Bar
Cyprus (Greek)                  M_Foo
Congo (Democratic Republic of)
Congo (Democratic Republic of)  Q_Yolo 
```

但我无法让第一部分匹配。我很确定这与第一个匹配组的贪婪/不贪婪选项有关，但在摆弄了一段时间后，我无法让它工作......

我不在乎是否返回额外/其他/更多匹配组。正则表达式旨在用于`.Net C#`应用程序（以防您想知道这是哪种“方言”）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:39:52.250

有时，对于非贪婪匹配，锚定非常重要。在这种情况下，锚定到行尾可以解决问题。你的正则表达式应该是：

```
^(.+?)(?:\s+(Xxx|[A-Z]_.*))?$ 
```

请注意，我还将可选的 ( `?`) 量词移到了另一个分组级别之外，因此空格是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T10:44:39.437

我用这个正则表达式管理了你想要的东西（使用多行运行）：

```
^((?:.+?| )+?)(?:\s+(Xxx|[A-Z]_.*)|\s)?$ 
```

使用你的输入给了我这个结果：

```
1: Belgium                  2: 
1: Belgium                  2: M_Foo
1: Belgium                  2: A_Bar
1: Belgium                  2: M_FooBar
1: Belgium                  2: S_Whooptee Doo
1: Belgium                  2: Xxx
1: Belgium                  2: S_Foo Bar
1: United Kingdom           2: 
1: United Kingdom           2: W_Foo-Bar
1: United Kingdom           2: M_Yay
1: United Kingdom           2: Xxx
1: United Kingdom           2: S_Derp
1: United Kingdom           2: F_Doh Lorem
1: United Kingdom           2: S_Ipsum Dolor
1: United States of America 2: L_Foo
1: Macedonia F.Y.R.         2: Xxx
1: Macedonia F.Y.R.         2: S_Foo Bar
1: Cyprus (Greek)           2: M_Foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T10:45:29.743

试试这个（不区分大小写）：

```
^([A-Z]+(?:\s+(?!Xxx)[A-Z]+)*(?:\s+\([^)]+\))?)(?:\s+(Xxx|(?:[-A-Z_.]+(?:\s+[-A-Z_.]+)*)))?$ 
```

它适用于您的所有示例。但坦率地说，您应该正确分隔数据。

演示：

```
$ perl -ne '/^([A-Z]+(?:\s+(?!Xxx)[A-Z]+)*(?:\s+\([^)]+\))?)(?:\s+(Xxx|(?:[-A-Z_.]+(?:\s+[-A-Z_.]+)*)))?$/i and print "MATCH: group 1 is \"$1\", group 2 is \"$2\"\n"'
> Belgium
> Belgium M_Foo
> Belgium A_Bar
> Belgium M_FooBar
> Belgium S_Whooptee Doo
> Belgium Xxx
> Belgium S_Foo Bar
> United Kingdom
> United Kingdom W_Foo-Bar
> United Kingdom M_Yay
> United Kingdom Xxx
> United Kingdom S_Derp
> United Kingdom F_Doh Lorem
> United Kingdom S_Ipsum Dolor
> United States of America L_Foo
> Macedonia F.Y.R. Xxx
> Macedonia F.Y.R. S_Foo Bar
> Cyprus (Greek) M_Foo
> Congo (Democratic Republic of)
> Congo (Democratic Republic of) Q_Yolo
> EOF
MATCH: group 1 is "Belgium", group 2 is ""
MATCH: group 1 is "Belgium", group 2 is "M_Foo"
MATCH: group 1 is "Belgium", group 2 is "A_Bar"
MATCH: group 1 is "Belgium", group 2 is "M_FooBar"
MATCH: group 1 is "Belgium", group 2 is "S_Whooptee Doo"
MATCH: group 1 is "Belgium", group 2 is "Xxx"
MATCH: group 1 is "Belgium", group 2 is "S_Foo Bar"
MATCH: group 1 is "United Kingdom", group 2 is ""
MATCH: group 1 is "United Kingdom", group 2 is "W_Foo-Bar"
MATCH: group 1 is "United Kingdom", group 2 is "M_Yay"
MATCH: group 1 is "United Kingdom", group 2 is "Xxx"
MATCH: group 1 is "United Kingdom", group 2 is "S_Derp"
MATCH: group 1 is "United Kingdom", group 2 is "F_Doh Lorem"
MATCH: group 1 is "United Kingdom", group 2 is "S_Ipsum Dolor"
MATCH: group 1 is "United States of America", group 2 is "L_Foo"
MATCH: group 1 is "Macedonia", group 2 is "F.Y.R. Xxx"
MATCH: group 1 is "Macedonia", group 2 is "F.Y.R. S_Foo Bar"
MATCH: group 1 is "Cyprus (Greek)", group 2 is "M_Foo"
MATCH: group 1 is "Congo (Democratic Republic of)", group 2 is ""
MATCH: group 1 is "Congo (Democratic Republic of)", group 2 is "Q_Yolo" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T10:46:20.483

`/(?:^(.+)\s+(Xxx|[A-Z]_.+)$|^(.+)$)/gm`将匹配您的所有字符串，**但是**，任何只有一个国家/地区的行都将被放入第三个匹配项中（因此在您查看结果时请检查这一点）。

[**演示**](http://regex101.com/r/hK2eV8)

# c - 奇怪的 malloc 崩溃

> ID：14376967
> 
> 赞同：3
> 
> 时间：2013-01-17T10:28:34.713
> 
> 标签：c, malloc

我有以下代码在过去几个月一直在工作，但最近有时开始崩溃（在多线程应用程序中运行时）：

```
struct some_struct {
    char* m_str1;
    char* m_str2;
}

struct some_struct*
set_some_struct(const char* p_str1, const char* p_str2) {
    struct some_struct* some_struct_ptr = 
        (struct some_struct*)malloc(sizeof(struct some_struct));
    if (some_struct_ptr == NULL)
        printf("malloc failed!\n");

    size_t str1_len = strlen(p_str1) + 1;
    size_t str2_len = strlen(p_str2) + 1;

    some_struct_ptr->m_str1 = malloc(str1_len);
    if (some_struct_ptr->m_str1 == NULL)
        printf("malloc failed!\n");

    some_struct_ptr->m_str2 = malloc(str2_len); // Crashes here
    if (some_struct_ptr->m_str2 == NULL)
        printf("malloc failed!\n");

    strcpy(some_struct_ptr->m_str1, p_str1);
    strcpy(some_struct_ptr->m_str2, p_str2);

    return some_struct_ptr;
} 
```

运行它会给我““0x7c81bb52”处的指令引用“0x00000002”处的内存。无法“读取”内存。”

上面的代码有什么明显的错误，在某些情况下可能会出现异常吗？如果我在测试程序中单独运行该函数，它工作得很好，但在完整的应用程序中运行时它总是崩溃。通往第三个 malloc 的一切似乎都很好。

**编辑：**进一步的调查让我相信，这是早些时候的电话，把`malloc`这个弄得一团糟。这样的事情甚至可能吗？如果我取消注释之前进行的函数调用`set_some_struct`并且涉及多个函数调用，`mallocs`那么`set_some_struct`它将运行得很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T10:42:26.270

好吧，当分配失败时，您所做的就是打印错误；也许打印被丢弃或者你错过了它？如果有多个线程运行它，输出可能会令人困惑。

其次，您没有检查*输入*指针。由于崩溃是读取，并且通过指针的所有其他访问都是写入新分配的区域，我怀疑一个或多个参数是`NULL`指针。你应该检查一下。

此外，您不应该``malloc()``在 C 中转换返回值（[请参阅此处了解原因](https://stackoverflow.com/a/605858/28169)），如果您不包括`stdlib.h`这可能会隐藏错误。

如果字符串是恒定的，您可以通过只调用一次来节省内存和速度，`malloc()`首先将三个分配的大小相加，然后相应地设置指针，当然。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T12:05:13.000

```
if (some_struct_ptr == NULL)
    printf("malloc failed!\n"); 
```

从此时起，您将使用垃圾指针。下面的代码也会出现同样的问题。

```
if (some_struct_ptr->m_str1 == NULL)
    printf("malloc failed!\n");

if (some_struct_ptr->m_str2 == NULL)
    printf("malloc failed!\n"); 
```

# solaris - 在 solaris 10 上激活 jre7

> ID：14376974
> 
> 赞同：-1
> 
> 时间：2013-01-17T10:28:56.710
> 
> 标签：solaris, java, solaris-10

我在 solaris 10 上的 /usr/jre7 位置安装了 jre7。

jdk1.5 和 jre 已经在 /usr/java

我希望运行 jre7 而不是 jre5。我怎样才能做到这一点？

以及如何找出当前活动的 jre 版本？

我的问题：

1) 我怎样才能知道当前正在考虑的 JRE 版本是什么？

2）如何将其更改为 JRE7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T10:56:02.190

这是基本的，如何设置我的环境问题。它们并不特定于 Java。

> 如何找出正在考虑的当前 JRE 版本？

```
which java 
```

像任何其他命令一样。如果您不确定这是什么版本，您可以运行

```
java -version 
```

> 如何将其更改为 JRE7

在 Windows 和 UNIX 上，您`PATH`确定它搜索的目录以查找可执行文件。

您需要更改您的路径，以便在您不想要的任何版本之前在您的路径中添加所需的版本。

# c# - Web 服务中的 JSON 字节数组值已更改

> ID：14376976
> 
> 赞同：1
> 
> 时间：2013-01-17T10:29:07.223
> 
> 标签：c#, android, json, bytearray, jsonserializer

我正在尝试通过 Web 服务在 json 中传递字节数组。当我尝试反序列化 JSON 时，字节数组值更改为未知值。

举个例子。当我尝试使用 android 传递给 web 服务时我的字节值。
**代码**

```
JSONObject object = new JSONObject();
try {
object.put("WayBillNo", bill);
object.put("ReceiverSignature", image);
} catch (JSONException e) {
e.printStackTrace();
} 
```

**图片** ![图片](../Images/76469f6d4122a33e137cf91b175081e6.png)

尝试序列化 JSON 时的 WebService。（C＃）

**代码**

```
payloadObj = JsonConvert.DeserializeObject<T>( encryptedJson ); 
```

**图片** ![图2](../Images/f56da523d85562a968f003ac159e2ac6.png)

Receiversingnature 网络服务中的价值变化。感谢任何建议/帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:00:35.520

我使用[Base64](http://en.wikipedia.org/wiki/Base64)将二进制数据转换为字符串。

```
byte [] image = array;
String stringToStore = new String(Base64.encode(image)); 
```

# jqgrid - JQgrid 高级搜索

> ID：14376979
> 
> 赞同：0
> 
> 时间：2013-01-17T10:29:08.487
> 
> 标签：jqgrid

我正在使用 jqgrid 高级搜索（客户端搜索）。有没有办法可以从搜索中排除几行。也就是说，无论搜索条件如何，我都想显示这些行。我知道我们可以通过在 colmodel 选项中给出 search : false 来排除列。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:53:28.137

我不确定你为什么需要这种行为。不过，如果您知道要排除哪些行，则意味着您可以制定一个额外的搜索过滤器来排除不需要的行。您可以使用搜索选项的[onSearch](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)回调来*修改*开始过滤之前的`filters`属性。`postData`

请参阅[此处](https://stackoverflow.com/a/9067628/315935)的修改示例。您可以向过滤器添加其他组（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)）以实现对需要排除的行的过滤。

# java - 类加载应用程序上下文 Spring

> ID：14376980
> 
> 赞同：4
> 
> 时间：2013-01-17T10:29:09.750
> 
> 标签：java, spring, class, loading, applicationcontext

我有一个 Spring Web 项目，我需要在初始化应用程序上下文后加载一些类，因为这些类最终将在未来使用。因此，我尝试在使用前预加载它们以提高性能。

怎么做 ？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T08:53:31.153

要将类加载到 JVM 中，只需调用`Class.forName('com.foo.bar.MyClassToPreLoad')`方法即可。您可以在自己的实现中执行`javax.servlet.ServletContextListener`它，然后在 web.xml 中注册它

```
<listener>
    <listener-class>com.foo.bar.MyClassPreloadingContextListener</listener-class>
</listener> 
```

或者，您可以在任何 Spring bean 实现`org.springframework.beans.factory.InitializingBean`接口中执行此操作。或者，如果您不想实现接口，您可以在任何不带参数的 bean 方法中执行此操作，并将其注册为此 bean的*init 方法：*

```
<bean class="com.foo.bar.MyClassPreloadingBean" init-method="preloadClasses"/> 
```

有关详细信息，请参阅[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-initializingbean](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lifecycle-initializingbean)。

或者[http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-postconstruct-and-predestroy-annotations](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-postconstruct-and-predestroy-annotations)如果您更喜欢基于注释的配置。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T12:12:46.447

我想你没有提到你的 bean 的范围。如果你没有在应用程序上下文中提到范围，那么默认容器使用单例范围。这意味着除非你关闭容器，否则整个 urs 系统都使用相同的 bean 实例。 bean 保持不变。如果你想覆盖默认行为，使用可以为 urs applicationcontext 中的 beans 提供范围。你最好在这个链接中看到我曾经问过关于同样问题的问题。 [使用tomcat在spring中进行预加载和延迟加载](https://stackoverflow.com/questions/14603886/pre-loading-and-lazy-loading-in-spring-with-tomcat)

# html - JSP没有调用按钮？

> ID：14376984
> 
> 赞同：0
> 
> 时间：2013-01-17T10:29:20.937
> 
> 标签：html, jsp

```
<form>
. . . 
    <div class="loginDiv">
        <%= new java.util.Date() %>
        <br/><br/>
        Username : <input type="text" class="resizedTextbox" name="username">&nbsp;&nbsp;
        Password : <input type="text" class="resizedTextbox" name="password">&nbsp;&nbsp;
        <input type="submit" name="btnLogin" value="LogIn">
            &nbsp;&nbsp;&nbsp;
            <a href="register.jsp">Register</a>
    </div>
</form>
               <%
                if(request.getAttribute("btnLogin") != null){
                    String username = request.getParameter("username");
                    String password = request.getParameter("password");
                    if(username != "" && password != ""){
                        out.print("Invalid Username/Password!");
                    }
                    else{
                        out.print("Invalid Username/Password!");
                    }
                }
               %> 
```

我放置了一个断点，当我单击 btnLogin 时，request.getAttribute("btnLogin").. 中的代码永远不会被调用。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T11:03:19.467

尝试这样做：

```
if(request.getParameter("username") != null && request.getParameter("password") != null) 
```

而不是这个：

```
if(request.getAttribute("btnLogin") != null){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T11:14:41.650

```
<form action="Call this Login page here (eg: Login.jsp)" method="post">
            <div class="loginDiv">
                <%= new java.util.Date()%>
                <br/><br/>
                Username : <input type="text" class="resizedTextbox" name="username">&nbsp;&nbsp;
                Password : <input type="text" class="resizedTextbox" name="password">&nbsp;&nbsp;
                <input type="submit" name="btnLogin" value="LogIn">
                &nbsp;&nbsp;&nbsp;
                <a href="register.jsp">Register</a>
            </div>
        </form>
        <%            
            String username = request.getParameter("username");
            String password = request.getParameter("password");
            if (username != "" && password != "") {                
            } else {
                out.print("Invalid Username/Password!");
            }
        %> 
```

# reporting-services - 在报告之间切换时保持参数的默认值

> ID：14376986
> 
> 赞同：2
> 
> 时间：2013-01-17T10:29:29.470
> 
> 标签：reporting-services, ssrs-2008

我知道这可能听起来很奇怪，但我找不到任何参考来解决这个问题。

我有一个带有`GroupID`as 参数的报告，它从辅助数据集中获取值列表。默认值定义为**(select All)**。

现在该报告是一个饼图，通过单击其中一个“饼图”，您可以定向到一个向下钻取报告。

现在的问题是当我希望回到主报告时。由于某种原因，`GroupID`参数的默认值消失了，并且没有显示数据。

我尝试了以下方法：

*   将 GroupID 参数传递给第二个报告并将其传递回主报告 - 因为该参数是允许的多个值，所以我无法传递所有值，而是可以传递`=Parameters!GroupID.Value(0)`（我尝试手动传递`=Parameters!GroupID.Value`，但又一次，没有 GO。

*   不要在报告之间传递任何参数 - 没有 GO。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T14:34:15.460

实际上，您可以将多个值从一个报告传递到另一个报告

> 将 GroupID 参数传递给第二个报告并将其传递回主报告 - 因为参数是允许的多值我无法传递所有值，而是可以传递 =Parameters!GroupID.Value(0) （我手动尝试过传递 =Parameters!GroupID.Value 但

遵循这种情况

**报告 1**

参数：OrganizationlID

环境：

*   设置为多值
*   从查询中获取值（数据集）
*   默认值从查询（数据集）中获取值

**报告 2**

参数：OrganizationlID（同名）

设置： - 设置为多个值 - 从查询（数据集）中获取值 -**无默认值**

**报告之间的转换**

我`Textbox`在报告正文上放了一个并在单击时对其进行配置以导航到“报告 2”

我传递的参数如下：

```
=Parameters!OrganizationalID.Value 
```

![报告 1 截图](../Images/eac702112b0558303ff43720ae9f5831.png)

在第二份报告中，我得到了参数中选择的**所有**值

在该报告中，我有一个“文本框”（背面），我将其配置为转到第一个报告，我传递了如下参数：

```
=Parameters!OrganizationalID.Value 
```

请注意，如果您对参数进行了一些更改，您必须单击“查看报告”按钮，以便将参数中的值保存在会话中。

![报告 2 截图](../Images/12d8a16efcfebf90db56a07fb9dd3937.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T12:17:59.687

作为一种变通方法，您可以使用当前报告值将链接添加回主报告。然而，这将导致报告再次运行。

好问题，我从来没有遇到过这个问题，祝你好运。

# java - 从进程输出中读取二进制和文本

> ID：14376988
> 
> 赞同：0
> 
> 时间：2013-01-17T10:29:43.353
> 
> 标签：java, git

我正在尝试从 Git 检索文件的单个修订版。我做了一些研究，我发现最好的方法是从上一个修订版向后退的修订版在哪里，并且`git show HEAD[x]:[filename]`是文件的名称。我的代码看起来像这样（在 Java 中）：`[x]``[filename]`

```
public static String runProcess2(String executable, String parameter) {
    try {
        Runtime rt = Runtime.getRuntime();
        String path = String.format("%s %s", executable, parameter);
        Process pr = rt.exec(path);

        BufferedReader input = new BufferedReader(new InputStreamReader(
                pr.getInputStream()));

        String line = null;

        StringBuilder sb = new StringBuilder();

        while ((line = input.readLine()) != null) {
            sb.append(line + NL);
        }

        pr.waitFor();
        return sb.toString();

    } catch (Exception e) {
        return null;
    }
} 
```

我用这行代码运行：

```
return Utilities.runProcess("git", String.format(
                "--git-dir=%s\\.git --work-tree=%s show HEAD%s:%s", path, path,
                rev, filePath)); 
```

这适用于文本文件。但是，存储库中有二进制文件。如果我运行这段代码，它会以某种方式破坏文件。（同样，这适用于文本文件）。如何从存储库中检索二进制文件和文本文件（使用任何内容编码）的文件内容？

我认为我用于读取输出的方法不够通用。