# StackOverflow 问答 14926000-14926999

# visual-studio-2010 - VS 2010 看不到 SQL Server 2012 Express

> ID：14926001
> 
> 赞同：0
> 
> 时间：2013-02-17T20:59:10.653
> 
> 标签：visual-studio-2010, windows-8, visual-studio-2012, sql-server-express

在我的装有 Windows 8 的 PC 上，有 Visual Studio 2012、SQL Server 2012 Express (x64)、SQL Server 2012 (x64)。

Visual Studio 2012 与 SQL Server 2012 Express 和 SQL Server 2012 完美配合。它`sqlexpress`通过名称轻松添加到服务器资源管理器的数据连接`.\SQLEXPRESS`。

但现在我正在尝试`SQLEXPRESS`在 Visual Studio 2010 中添加。但它找不到它。

我认为它不能因为 SQL Server 2012 Express 的版本。所以我尝试安装`SQLEXPR_x64_ENU`（SQL Server 2008 Express），但安装堆栈在“安装支持规则”上。出现错误“性能计数器注册表配置单元一致性”

我不知道应该也可以安装 SQL Server 2008 Express。或者解决方案在其他地方？

PS 当我尝试将 SQL 数据库服务器添加到`App_Data`(asp.net mvc3) 时，出现错误“连接到 SQL Server 数据库文件 ( `.mdf`) 需要在本地计算机上安装和运行 SQL Server 2005 Express 或 SQL Server 2008 Express ……”

所以我想我应该编辑 Windows 的寄存器来让知道 SQL Server Express 所在的 Visual Studio 2010...

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:23:51.530

您是否在安装 SQL Server Express 2012（或根本没有）之前安装了 Visual Studio 2010 Service Pack 1？见这篇文章：[http ://www.formatyourbrain.com/sql-server-express-2012-visual-studio-2010/](http://www.formatyourbrain.com/sql-server-express-2012-visual-studio-2010/)

# jquery - 在 jQuery 中寻找水平树视图

> ID：14926003
> 
> 赞同：0
> 
> 时间：2013-02-17T20:59:17.133
> 
> 标签：jquery, treeview

有没有像组织结构图一样水平对齐的树视图控件？

Treeview 控件通常是垂直对齐的。还是这样的控件称为其他东西而不是树视图？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:29:47.890

我找到了一个用于水平树视图的 jQuery 控件。实际上，它更恰当地称为`org chart`. 这是我发现有一个与 jQuery 一起使用的免费组织结构图的链接。

1.  [https://github.com/caprica/jquery-orgchart](https://github.com/caprica/jquery-orgchart)

# php - JSON 64位解码位图从android放置在mysql BLOB中

> ID：14926005
> 
> 赞同：0
> 
> 时间：2013-02-17T20:59:48.880
> 
> 标签：php, android, mysql, json

使用 android、json 和 php 将图像发送到 mysql

我能够使用将我的位图转换为格式正确的字符串

[将图像转换为 json 对象](http://mobile.cs.fsu.edu/converting-images-to-json-objects/)

这是android中的代码

```
JSONObject values = new JSONObject();
            values.put(KEY_CONTRACTUUID, con.UUID);
            ...
            if (con._sig != null) {
                String encodedImage = getStringFromBitmap(con._sig);
                values.put(KEY_CONTRACTSIGIMAGE, encodedImage);

    private static String getStringFromBitmap(Bitmap bitmapPicture) {
        /*
         * This functions converts Bitmap picture to a string which can be
         * JSONified.
         */
        final int COMPRESSION_QUALITY = 100;
        String encodedImage;
        ByteArrayOutputStream byteArrayBitmapStream = new ByteArrayOutputStream();
        bitmapPicture.compress(Bitmap.CompressFormat.PNG, COMPRESSION_QUALITY,
                byteArrayBitmapStream);
        byte[] b = byteArrayBitmapStream.toByteArray();
        encodedImage = Base64.encodeToString(b, Base64.DEFAULT);
        return encodedImage;
    } 
```

现在它在 base64 和一个字符串中，我需要正确检索它以放置在 mysql 中的 BLOB 中

我没有使用名称值对或任何废话 - 只需将其作为 json 发送并获取 json 字符串，如下所示：

```
$json = json_decode($HTTP_RAW_POST_DATA,true);
echo var_dump(HTTP_RAW_POST_DATA);
...
$varsigimage = $json['sigimage'];

$formatedJSONimage = "{'sigimage': '$varsigimage'}";
var_dump($formatedJSONimage);
$sigImagedecoded = json_decode($formatedJSONimage);
var_dump($sigImagedecoded); 
```

我需要在图像上调用 json_decode 以使其脱离 64 位以放置在 blob 中正确吗？

但是要做到这一点，我需要使用函数 json_decode，但是 json_decode 假设我会给它一个 JSONObject，并且由于我的 $json 对象中有更多对象，我需要重新创建一个仅包含图像的单个 JSON 对象。 ，并将其传递给 json_decode 但它会返回 SYNTAX 类型的 json_error

我做错了什么，将base64字符串转换为blob的正确方法是什么？

是的，关于将它从 blob 中恢复为 base64 字符串，我也会有同样的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:37:50.997

json_decode 解析 JSON 字符串并返回一个关联数组，模仿 JSON 字符串中的键/值对。

似乎您缺少另一个步骤：您需要将 base64 编码的图像字符串解码回位图。例如在您的代码中：

```
$json = json_decode($HTTP_RAW_POST_DATA,true);
echo var_dump(HTTP_RAW_POST_DATA);
...
$varsigimage = $json['sigimage'];

$image_bitmap = base64_decode($varsigimage); // decode the string back to binary 
```

您现在应该能够`$image_bitmap`在数据库中保存为 BLOB。

# php - 如何在 Magento 中通过多个标签过滤 productCollection？

> ID：14926006
> 
> 赞同：0
> 
> 时间：2013-02-17T21:00:09.050
> 
> 标签：php, magento

我有一系列产品标签，我想找到分配了这些标签的所有产品（IE 返回所有具有标签“大”和“红色”的产品）。我目前正在使用以下内容，但它没有按预期工作。

```
$this->_productCollection = Mage::getResourceModel('tag/product_collection')
    ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes())
    ->addStoreFilter(Mage::app()->getStore()->getId())
    ->addMinimalPrice()
    ->addUrlRewrite()
    ->setActiveFilter();

foreach ($tags as $tagName) {
    $tagId = Mage::getModel('tag/tag')->loadByName($tagName)->getId();
    $this->_productCollection->addTagFilter($tagId);
} 
```

似乎`addTagFilter()`只适用于一次，而不适用于多个标签。我也试过

```
$this->_productCollection->getSelect()->Where('relation.tag_id=?', $tagId); 
```

但同样，添加多个`Where(relation.tag_id=?, $tagId)`似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-26T10:06:15.407

我遇到了这个非常有趣的问题，当我尝试使用创建的多选属性中的值过滤产品集合时，因为它不像适用于任何其他属性那样容易，即

```
$product_collection->addAttributeToFilter('attribute_code',"some value") 
```

集合过滤器提供了一个过滤条件“finset”，它可以帮助我们过滤集合内的属性值。

首先，我们需要获取属性的各种值的 ID，如下所示：

```
$attributeOptionArray=array();
$opts_attr = Mage::getModel('eav/config')->getAttribute('catalog_product', 'attribute_code');
foreach ( $opts_attr->getSource()->getAllOptions(true, true) as $option){
$attributeOptionArray[$option['value']] = $option['label'];
} 
```

接下来，我们需要使用这个属性值数组来过滤产品选项：

```
$product_collection=Mage::getModel("catalog/product")->getCollection();
$product_collection->addAttributeToFilter("attribute_code",array('finset'=>array_search("Some Option's label",$attributeOptionArray))); 
```

解释：

1.  首先，我们将产品集合加载到一个变量中

2.  我们添加“attributeToFilter”，以指定过滤条件。

3.  借助array_search 条件，我们尝试找到与Option 的标签对应的id。

4.  将此 id 传递给带有 finset 条件的过滤器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:00:06.160

您必须在一个数组中收集所有标签 ID

```
$this->_productCollection->getSelect()->where('relation.tag_id IN (?)', implode(',',$tagId); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-26T08:12:18.300

$prodids =array();//产品ID数组 $tagName = array("Awesomeee","Black");//你的标签名称

```
 foreach ($tagName as $_tagname) {
                            $tagId=Mage::getModel('tag/tag')->loadByName($_tagname)->getId();
                            $collections = Mage::getResourceModel('tag/product_collection')
                                ->addAttributeToSelect('sku')
                                ->addAttributeToSelect('name')
                                ->addTagFilter($tagId);
                            $productIDs = $collections->getData();

                            foreach($productIDs as $_product){
                                array_push($prodids,$_product['product_id']);
                            }
                        }

                        $collection = Mage::getModel('catalog/product')
                            ->getCollection()
                            ->addAttributeToSelect('*')
                            ->addAttributeToFilter('entity_id', array('in' => $prodids)); 
```

$_productCollection=$collection;//最终产品集合

# javascript - 操作 JSON 数据以在 Google Maps API V3 中创建 lat/lngs 的 javascript 数组

> ID：14926013
> 
> 赞同：0
> 
> 时间：2013-02-17T21:00:54.870
> 
> 标签：javascript, arrays, json, google-maps-api-3

我正在尝试使用从 MySQL 检索到的 lat/lng 值来创建用于 GMaps API 的航点数组。我有下面的代码，但我有限的 javascript 知识正在努力将检索到的数据推送到 javascript 数组中以定义为航点数据。

我已经查看了一些在线示例，到目前为止，我已经设法获得了一个解析脚本来毫无问题地检索数据，并在我实例化了地图的页面中调用它：

```
makeRequest('parsedata.php', function(data) {

            var data = JSON.parse(data.responseText);

            for (var i = 0; i < data.length; i++) {
                displayLocation(data[i]);
            }

        }); 
```

parsedata.php 代码：

```
<?php     
    include 'session.php';

   $query = "SELECT itinerary_link.itineraryID, itinerary_link.coursesID, itinerary_courses.coursename, 
courses.lat, courses.lng FROM itinerary_link LEFT JOIN
 itinerary_courses ON itinerary_link.coursesID = itinerary_courses.coursesID LEFT JOIN 
courses ON courses.coursename = itinerary_courses.coursename WHERE itineraryID=6 ORDER BY coursename";
   $result = mysqli_query($dbc, $query);
   $rows = array();
   while ($r = mysqli_fetch_assoc($result)) {
       $rows[] = $r;
   }
   print json_encode( $rows );
?> 
```

并从此示例输出：

```
[{"itineraryID":"6","coursesID":"20","coursename":"Carnoustie Championship Course","lat":"56.497414","lng":"-2.720531"},{"itineraryID":"6","coursesID":"21","coursename":"Troon Old Course","lat":"55.534203","lng":"-4.642833"}] 
```

基本上，我无法弄清楚如何操作此输出以创建所需的 lat/lngs javascript 数组，以作为我在页面上运行的路线服务实例的航路点。

与往常一样，任何指针都非常感谢。干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:51:55.130

```
 //create an array for the waypoints
  var waypoints=[];

    //only up to 8 waypoints are allowed without business-license
  for(var i=0;i<8 && i<data.length;++i) {

      //push a LatLng-object to the array
    waypoints.push(new google.maps.LatLng(data[i].lat,data[i].lng));
  }
    //use the waypoints
  //doSomethingWith(waypoints); 
```

# c# - Windows 应用商店应用开发 - InvalidateRequerySuggested

> ID：14926016
> 
> 赞同：3
> 
> 时间：2013-02-17T21:01:46.470
> 
> 标签：c#, windows-store-apps, ivalueconverter

在我使用过的常规 WPF 项目中

```
CommandManager.InvalidateRequerySuggested(); 
```

为了强制再次执行值转换器。

现在，在 Windows Store App 开发中，这个方便的命令不再可用。是否存在等效的命令或其他可以解决问题的命令？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T06:08:25.783

WinRT中`CommandManager`不存在 。您需要手动刷新侦听器。这是我的示例实现`DelegateCommand<T>`，说明了这一点：

```
using System;
using System.Windows.Input;

public class DelegateCommand<T> : ICommand
{
    private readonly Action<T> m_executeAction;
    private readonly Predicate<T> m_canExecutePredicate;

    public DelegateCommand(Action<T> executeAction)
        : this(executeAction, null)
    {
    }

    public DelegateCommand(Action<T> executeAction, Predicate<T> canExecutePredicate)
    {
        if (executeAction == null)
        {
            throw new ArgumentNullException("executeAction");
        }

        m_executeAction = executeAction;
        m_canExecutePredicate = canExecutePredicate;
    }

    public event EventHandler Executed;

    public event EventHandler CanExecuteChanged;

    bool ICommand.CanExecute(object parameter)
    {
        return CanExecute((T)parameter);
    }

    void ICommand.Execute(object parameter)
    {
        Execute((T)parameter);
    }

    public bool CanExecute(T parameter)
    {
        var result = true;
        var canExecutePredicate = m_canExecutePredicate;
        if (canExecutePredicate != null)
        {
            result = canExecutePredicate(parameter);
        }
        return result;
    }

    public void Execute(T parameter)
    {
        m_executeAction(parameter);
        RaiseExecuted();
    }

    public void Refresh()
    {
        RaiseCanExecuteChanged();
    }

    protected virtual void RaiseExecuted()
    {
        var handler = Executed;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }

    protected virtual void RaiseCanExecuteChanged()
    {
        var handler = CanExecuteChanged;
        if (handler != null)
        {
            handler(this, EventArgs.Empty);
        }
    }
} 
```

该类的WPF版本`CommandManager.InvalidateRequerySuggested`通过实现间接使用`CanExecuteChanged`如下：

```
public event EventHandler CanExecuteChanged
{
    add { CommandManager.RequerySuggested += value; }
    remove { CommandManager.RequerySuggested -= value; }
} 
```

但是，在 WinRT 中，这不受支持，并且在我的 WinRT 版本中，任何使委托命令的状态无效的代码都必须调用该`Refresh`方法以使视图中的绑定项重新查询该命令。

我认为针对您的特定问题的最佳解决方案是`INotifyPropertyChanged`在您的视图模型中实现。在此接口上调用`PropertyChanged`事件等效于我的`Refresh`方法，并强制视图中的绑定元素重新评估自身，从而重新运行所有关联的`IValueConverter`实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T00:19:22.493

根据 Microsoft Developer Network 的说法，它确实适用于 Windows 8 和 Framework 4.5。但是，它确实声明了以下内容：

> CommandManager 在确定命令目标何时更改时仅关注某些条件，例如键盘焦点的更改。在 CommandManager 无法充分确定导致命令无法执行的条件变化的情况下，可以调用 InvalidateRequerySuggested 以强制 CommandManager 引发 RequerySuggested 事件。

但是，由于它没有提到 WinRT 以下 Windows 设备的 Windows Mobile 兼容，因此上述命令可能不适用于这些设备，但如果它适用于 WinRT 和 Windows 8 的 Windows Store，它应该可以正常工作。

如果我误解了您的问题，请告诉我，我会尽力提供进一步的帮助。

[关于命令的文章在这里：](http://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.invalidaterequerysuggested.aspx)

# javascript - 切换元素 FontWeight - Javascript

> ID：14926019
> 
> 赞同：1
> 
> 时间：2013-02-17T21:02:19.060
> 
> 标签：javascript, toggle

我正在尝试通过按下按钮将文本区域内的文本切换为粗体或不加粗。我有以下代码：

```
function bold()
{
    var ta = document.getElementById("textArea");

    if(ta.style.fontWeight == "normal"){
        ta.style.fontWeight = "bold";
    }
    else{
        ta.style.fontWeight = "normal";
    }
} 
```

当我按下按钮时，第一次没有任何反应。但我第二次按下它，它运行完美。通过调试器运行它，变量“ta”第一次变为等于“”，然后第二次变为“正常”，尽管在 css 中将文本区域设置为正常。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:15:33.343

所以发生这种情况的原因是因为`ta.style`正在访问 textarea 元素的 style 属性，它不会有任何关于来自 CSS 的样式的信息。你可以这样写你的 textarea ，它应该适用于你所拥有的：

`<textarea id="textArea" style="font-weight:normal"></textarea>`

但是，我建议你在你的 js 中按照这些方式做一些事情：

```
function bold()
{
    var ta = document.getElementById("textArea");

    if(ta.style.fontWeight !== "bold"){
        ta.style.fontWeight = "bold";
    }
    else{
        ta.style.fontWeight = "normal";
    }
} 
```

`toggleBold`将您的函数重命名为;)也可能会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:09:23.903

与其试图与之抗争，不如改变你的状况：

```
if (ta.style.fontWeight == "normal" || ta.style.fontWeight === '') { 
```

# linux - 在 Go 中设置进程名称（如 `ps` 所示）

> ID：14926020
> 
> 赞同：10
> 
> 时间：2013-02-17T21:02:24.610
> 
> 标签：linux, process, go

以下（正确）不起作用：

```
package main

import (
        "os"
        "time"
)

func main() {
        os.Args[0] = "custom name"
        println("sleeping")
        time.Sleep(1000 * time.Second)
        println("done")
} 
```

某些语言提供了[将进程名称设置](http://www.steve.org.uk/Reference/Unix/faq_2.html#SEC22)为内置功能（例如，在 Ruby 中，只需[分配给](https://github.com/mperham/sidekiq/blob/master/lib/sidekiq/launcher.rb#L27) `$0`）或第三方库（[Python](http://pypi.python.org/pypi/setproctitle)）的这种特性。

我正在寻找一种至少在 Linux 上有效的解决方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T18:39:50.037

有多种方法可以实现这一点，其中许多仅在某些情况下有效。我真的不建议这样做，因为（一方面）它可能会导致您的流程在不同情况下出现不同的名称。它们需要使用系统调用和/或不安全，因此您故意破坏 Go 语言的安全性。尽管如此，您的选择似乎是：

## 修改 argv[0]

```
func SetProcessName(name string) error {
    argv0str := (*reflect.StringHeader)(unsafe.Pointer(&os.Args[0]))
    argv0 := (*[1 << 30]byte)(unsafe.Pointer(argv0str.Data))[:argv0str.Len]

    n := copy(argv0, name)
    if n < len(argv0) {
            argv0[n] = 0
    }

    return nil
} 
```

在 Go 中，您无法访问实际的 argv 数组本身（无需调用内部运行时函数），因此您只能使用不超过当前进程名称长度的新名称。

这似乎主要适用于达尔文和 Linux。

## 致电 PR_SET_NAME

```
func SetProcessName(name string) error {
    bytes := append([]byte(name), 0)
    ptr := unsafe.Pointer(&bytes[0])
    if _, _, errno := syscall.RawSyscall6(syscall.SYS_PRCTL, syscall.PR_SET_NAME, uintptr(ptr), 0, 0, 0, 0); errno != 0 {
            return syscall.Errno(errno)
    }
    return nil
} 
```

新名称最多为 16 个字节。

这在 Darwin 上不起作用，并且在 Linux 上似乎没有多大作用，尽管它成功并且 PR_GET_NAME 之后报告了正确的名称。不过，这可能是我的 Linux VM 的一些特殊之处。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T21:34:37.160

要在 Linux 上更改进程名称，您需要结合使用[prctl 系统调用](http://www.kernel.org/doc/man-pages/online/pages/man2/prctl.2.html)和`PR_SET_NAME`选项。

目前，我认为你不能在 Go 代码中做到这一点。但是，您可以构建一个小的 C 模块来执行此操作，然后将其集成到您的 Go 构建中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T21:21:42.780

我不认为“流程标题”是一个定义明确的术语。无论如何，Ruby 与 Go 有什么关系？[os.Args](http://golang.org/pkg/os/#pkg-variables)的文档没有提到任何“进程标题”，也没有说在分配给切片项目时会发生任何魔术。后者实际上是 Go 的一般属性。结构字段、数组/切片项的变量没有神奇的 getter/setter，所以一个简单的赋值*只是*简单地赋值，什么也不做，*也不*能做更多的事情。

简而言之，缺乏魔法是预期的正确行为。

对于通过“os”包处理可移植访问的进程属性以外的进程属性，必须以特定于平台的方式使用包“syscall”。但是随后构建约束（在[此处](http://golang.org/pkg/go/build/)讨论）可以帮助正确处理跨平台的内容。

# c# - Buffer overflow protection for stackalloc in .Net

> ID：14926021
> 
> 赞同：7
> 
> 时间：2013-02-17T21:02:33.720
> 
> 标签：c#, .net, buffer-overrun, stackalloc

From C# reference for stackalloc:

> the use of stackalloc automatically enables buffer overrun detection features in the common language runtime (CLR). If a buffer overrun is detected, the process is terminated as quickly as possible to minimize the chance that malicious code is executed.

Specifically, what kind of protection mechanism is implemented for .NET?
And will it also detect buffer underruns? Against which known attacks is the protection weaker?

For a context, for example for MS C++ compiler the information is available here:
[Windows ISV Software Security Defenses](http://msdn.microsoft.com/en-us/library/bb430720.aspx "Windows ISV Software Security Defenses"):

> The Stack Buffer Overrun Detection capability was introduced to the C/C++ compiler in Visual Studio .NET 2002 and has been updated in subsequent versions. /GS is a compiler switch that instructs the compiler to add startup code, and function epilog and prolog code, to generate and check a random number that is placed in a function's stack.
> 
> Note that Visual C++ 2005 (and later) also reorders data on the stack to make it harder to predictably corrupt that data. Examples include:
> • Moving buffers to higher memory than non-buffers. This step can help protect function pointers that reside on the stack.
> • Moving pointer and buffer arguments to lower memory at run time to mitigate various buffer overrun attacks.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T22:20:53.953

Yes, the .NET jitter generates the kind of stack canary checking that also exists in native code generated by the Microsoft C/C++ compiler with the /GS compiler option. The basic scheme is to store a random 32-bit value at the top of the stack, written at method entry. At method exit it checks if the value is still there. A change in the value is a very high predictor for a stack buffer overflow, the kind that malware uses to take control of a program.

Some code to play with:

```
class Program {
    static void Main(string[] args) {
        Kaboom();
    }
    static unsafe void Kaboom() {
        byte* ptr = stackalloc byte[1];
        for (int ix = 0; ix < 42; ++ix) ptr[ix] = 0;
    }
} 
```

Running this code triggers the Windows Error Reporting dialog, even with the debugger attached. You can see the crash reason in the Output window:

> The program '[3636] ConsoleApplication33.exe: Native' has exited with code -1073740791 (0xc0000409).

The exception code is defined in the ntstatus.h SDK header file:

```
//
// MessageId: STATUS_STACK_BUFFER_OVERRUN
//
// MessageText:
//
// The system detected an overrun of a stack-based buffer in this application. This overrun could 
// potentially allow a malicious user to gain control of this application.
//
#define STATUS_STACK_BUFFER_OVERRUN      ((NTSTATUS)0xC0000409L)    // winnt 
```

You can see the code that does this with Debug + Windows + Disassembly. The essential parts of Kaboom:

```
00000000  push        ebp                               ; setup stack frame
00000001  mov         ebp,esp 
00000003  sub         esp,8                             ; stack space for local variables
00000006  xor         eax,eax 
00000008  mov         dword ptr [ebp-8],eax             ; zero-initialize local variables
0000000b  mov         dword ptr [ebp-4],eax 
0000000e  mov         dword ptr [ebp-4],esp
00000011  mov         dword ptr [ebp-8],0EDDB7EDFh      ; canary stored here

// For loop code omitted

0000002d  cmp         dword ptr [ebp-8],0EDDB7EDFh      ; check canary value
00000034  je          0000003B 
00000036  call        727767A8                          ; crash program
0000003b  lea         esp,[ebp]                         ; normal exit, pop stack frame
0000003e  pop         ebp 
0000003f  ret 
```

The actual canary value changes every time the code is jitted.

# javascript - javascript - 阅读一个单独的选项卡以检查它是否打开

> ID：14926022
> 
> 赞同：0
> 
> 时间：2013-02-17T21:02:45.250
> 
> 标签：javascript, jquery

我正在寻找一种在打开请求的选项卡之前以某种方式读取/检查另一个浏览器选项卡是否打开的方法。

例如：

这是我的流量交换网站，他们只是打开 mysite.com/surf.php 并让它在一个框架中查看用户提交的网站。他们只是因为离开那场比赛而获得积分。

现在假设用户 A 的 SURF PAGE A 运行良好，然后打开 SURF PAGE B 然后他有 2 mysite.com/surf.php 正在运行并获得其他人将获得的双倍积分。

我想要发生的是：

用户 A 的 SURF PAGE A 运行良好，然后尝试打开 SURF PAGE B，这将检查另一个 mysite.com/surf.php 是否已打开，以及是否将对第二个 surf 页面的请求重定向到另一个 mysite.com/冲浪错误.php

因此，他们在任何给定时间只能运行 1 个 mysite.com/surf.php。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:19:55.873

同一浏览器中同一域上的浏览器窗口可以通过以下方式交换一些信息：

1.  饼干
2.  本地存储
3.  与公共服务器通信

您可以使用 1) 或 2) 来存储有关活动页面的一些信息，并且如果其他页面已经处于活动状态，则拒绝让其他页面处于活动状态。

但是，执行您所询问的策略的最可靠方法是使用实​​际的服务器来执行它。如果用户有登录名，则对服务器进行编码以仅允许登录用户一次为一个站点累积积分。

除了这些选项之外，如果您想在客户端强制执行它，您可能需要一个可以监视所有打开的浏览器窗口的浏览器插件（我认为这不切实际）。您不能从网页中的纯 javascript 监视用户打开的多个窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:07:33.850

当您开始跟踪某人的时间时设置会话变量

```
session.trackingtime = true 
```

当您再次检查以开始跟踪时间时，请确保该值设置为`false`. 当您停止跟踪时间时，将变量设置为`false`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-29T04:08:45.903

我今天做了非常相似的事情。只需更新该`else if`部分以在您的情况下进行重定向。

```
// helper function to set cookies
function setCookie(cname, cvalue, seconds) {
    var d = new Date();
    d.setTime(d.getTime() + (seconds * 1000));
    var expires = "expires="+ d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

// helper function to get a cookie
function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}

// Do not allow multiple call center tabs
if (~window.location.hash.indexOf('#admin/callcenter')) {
    $(window).on('beforeunload onbeforeunload', function(){
        document.cookie = 'ic_window_id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    });

    function validateCallCenterTab() {
        var win_id_cookie_duration = 10; // in seconds

        if (!window.name) {
            window.name = Math.random().toString();
        }

        if (!getCookie('ic_window_id') || window.name === getCookie('ic_window_id')) {
            // This means they are using just one tab. Set/clobber the cookie to prolong the tab's validity.
            setCookie('ic_window_id', window.name, win_id_cookie_duration);
        } else if (getCookie('ic_window_id') !== window.name) {
            // this means another browser tab is open, alert them to close the tabs until there is only one remaining
            var message = 'You cannot have this website open in multiple tabs. ' +
                'Please close them until there is only one remaining. Thanks!';
            $('html').html(message);
            clearInterval(callCenterInterval);
            throw 'Multiple call center tabs error. Program terminating.';
        }
    }

    callCenterInterval = setInterval(validateCallCenterTab, 3000);
} 
```

# linux - 如何在 Linux 上向后读取文件？

> ID：14926024
> 
> 赞同：5
> 
> 时间：2013-02-17T21:03:28.840
> 
> 标签：linux, cat

我知道我可以用`cat`它在 Linux 上从头到尾打印文件中的所有内容。有没有办法向后做（最后一行）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-17T21:03:28.840

是的，您可以使用“tac”命令。

来自 man tac：

```
Usage: tac [OPTION]... [FILE]...
Write each FILE to standard output, last line first.
With no FILE, or when FILE is -, read standard input.

Mandatory arguments to long options are mandatory for short options too.
  -b, --before             attach the separator before instead of after
  -r, --regex              interpret the separator as a regular expression
  -s, --separator=STRING   use STRING as the separator instead of newline
      --help     display this help and exit
      --version  output version information and exit 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-17T21:25:40.077

```
sed '1!G;h;$!d' file

sed -n '1!G;h;$p' file

perl -e 'print reverse <>' file

awk '{a[i++]=$0} END {for (j=i-1; j>=0;) print a[j--] }' file 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-17T21:07:28.240

`tac`是一种方式，但并非所有 linux 都默认可用。

awk 可以这样做：

```
awk '{a[NR]=$0}END{for(i=NR;i>=1;i--)print a[i]}' file 
```

# asp.net-mvc - viewModel 属于 Web 层还是服务层？

> ID：14926028
> 
> 赞同：0
> 
> 时间：2013-02-17T21:03:42.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, asp.net-mvc-4

我的应用程序目前遵循服务模式，其中模型是瘦的和 mvc-blind 的，控制器调用从模型中检索数据的服务。

现在，我的控制器根据从服务或客户端获得的数据构建和使用 ViewModel。

我想知道的是 - 将 ViewModel 类重新定位到服务层是否明智？

**前：**

1.  控制器向服务请求数据
2.  Controller 接受数据并构造 viewModel
3.  控制器将 viewModel 发送给客户端
4.  客户端将数据发送回控制器
5.  Controller 从 viewModel 获取数据并将其发送回 Service 以更新 db

**后**

1.  控制器向服务请求数据
2.  服务构造一个 viewModel 并用数据填充它
3.  控制器接受 viewModel
4.  控制器将 viewModel 发送给客户端
5.  客户端将数据发送回控制器
6.  Controller 将 viewModel 转发给 Service
7.  服务将数据分开并根据需要执行更新/查询

这个比那个好吗？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:15:06.977

之前是更好的方法。顾名思义，您的视图模型应该是您的视图的模型。

它可能包含服务检索到的数据，但也可能会增加该特定视图所需的其他数据。

此外，视图模型可能是特定于 UI 技术的，而服务应该完全与 UI 无关。服务代码很可能可以跨 UI 技术重用，但视图模型代码可能不会。

事实上，在胖客户端应用程序中，您的视图模型可能不仅仅是数据传输对象，还包含表示逻辑以及管理用户状态等。您的服务代码很可能不会绑定到特定的客户端实现.

# c++ - 从空队列中删除元素？

> ID：14926031
> 
> 赞同：-1
> 
> 时间：2013-02-17T21:04:01.443
> 
> 标签：c++

我正在编写优先级队列的抽象数据类型作为大学的任务，其他人将使用它。我的类 dequeue 中有一个函数，它删除队列中的第一个元素并返回该元素的数据。但是，当我尝试从空队列中删除一个元素时，程序崩溃了。我应该在这里做什么？

如果有帮助，这是代码：

```
#ifndef PRIORITYQUEUE_H
#define PRIORITYQUEUE_H

#include <iostream>

using namespace std;

const int max_queue_items = 1000;

template<class T>
struct node{
    T data;
    int priority;
    node *next;
};

template<class T>
class PriorityQueue
{
    public:
        /*
            Constructor that creates an empty queue.
        */
        PriorityQueue(){
            head = NULL;
            size = 0;
        }

        /*
            Adds an element to the queue.

            Params:
            data - data of the element
            priority - priority of the element
        */
        bool is_empty(){
            if (size == 0){
                return true;
            }

            return false;
        }

        bool is_full(){
            if (size == max_queue_items){
                return true;
            }

            return false;
        }

        /*
            Adds an element to thq queue.
            It gets inserted before the first element with
            lower priority.
        */
        void enqueue(T data, int priority){
            node<T> * previous = NULL;
            node<T> * now = head;

            while (now != NULL && now->priority >= priority){
                previous = now;
                now = now->next;
            }

            node<T> * new_element = new node<T>;
            new_element->data = data;
            new_element->priority = priority;
            new_element->next = now;

            if (previous == NULL){
                head = new_element;
            } else {
                previous->next = new_element;
            }

            size++;
        }

        /*
            Removes the first element in the queue
        */
        T dequeue(){
            T data;

            if (!is_empty()){
                node<T> * now = head;
                data = now->data;
                head = head->next;
                delete now;

                size--;
            }

            return data;
        }

        /*
            Returns the priority of the first element.
            It's always the highest priority in the queue.
        */
        int get_first_priority(){
            return head->priority;
        }

        /*
            Returns the data of the first element in the queue.
        */
        T get_first_value(){
            if (is_empty())
                throw 0;

            return head->data;
        }

        /*
            Returns the number of elements in the queue.
        */
        int get_size(){
            return size;
        }

        /*
            Deletes the whole queue from the memory.
        */
        void flush(){
            node<T> * now;

            while (head != NULL){
                now = head;
                head = head->next;
                delete now;
                size--;
            }
        }

        /*
            Prints the whole queue following this format:
            data(priority)
        */
        void print(){
            node<T> * now = head;

            while (now != NULL){
                cout << now->data << "(" << now->priority << ")" << endl;
                now = now->next;
            }
        }

    private:
        node<T> * head; // Pointer to the head of the queue
        int size; // Number of elements in the queue
};

#endif // PRIORITYQUEUE_H 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:56:28.177

这可能是也可能不是您的问题的根源，但我肯定会认为这是一个问题。在函数`dequeue()`中，您可能会在返回时返回一个未初始化的变量（如果不是`T`类类型）：`is_empty()``true`

```
 T dequeue()
    {
        T data; // Uninitialized if T is not a class type

        if (!is_empty())
        {
            node<T> * now = head;

            //--------------------------------------------------------------
            // This initialization is skipped when `is_empty()` returns true
            data = now->data;
            //--------------------------------------------------------------

            head = head->next;
            delete now;

            size--;
        }

        return data;
    } 
```

根据您对该函数返回的值和 的类型所做的操作`T`，您的程序可能具有未定义的行为（我可以想象`T`是您稍后取消引用的指针类型）。

您可能希望将函数的第一行更改为：

```
T data = T(); 
```

这会强制您的`data`对象进行值初始化。如果`T`是类类型，将调用默认构造函数。否则，`data`将被零初始化。

然后调用的函数`dequeue()`应该在使用它之前检查返回的值（或者更好的是，`is_empty()`在尝试从中弹出一个值之前调用队列以检查它是否为空）。

`dequeue()`您甚至可以考虑在被调用且队列为空时抛出异常：

```
T dequeue()
{
    if (is_empty())
    {
        // Requires including the <stdexcept> standard header
        throw std::logic_error("Queue is empty"); 
    }

    node<T> * now = head;
    T data = now->data;
    head = head->next;
    delete now;

    size--;

    return data;
} 
```

客户端现在负责确保`dequeue()`永远不会在空队列上调用它（或者他们应该将调用包装`dequeue()`到一个`try/catch`块中以处理可能抛出的异常。

另一种可能性是将 a 返回`bool`给您的客户端，指示该值是否已成功弹出，可能会将弹出的元素分配给通过引用传递的参数：

```
bool dequeue(T& data)
{
    if (is_empty())
    {
        return false;
    }

    node<T> * now = head;
    data = now->data;
    head = head->next;
    delete now;

    size--;

    return true;
} 
```

这样，客户端负责检查函数的结果。如果函数返回`false`，则该`data`变量将被初始化为客户端将其初始化为的任何值。处理错误情况的责任再次转移给客户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:59:00.547

我认为有一些问题。

首先也是最重要的，类没有析构函数。如果您的程序中并非所有元素都出队，则会出现内存泄漏。编写析构函数或使用智能指针而不是原始指针。

其次，正如@Andy Prowl（顺便说一句，谁知道如何@ twitter 等帖子中的人？）说，应该考虑未初始化的局部变量。并且`T data = T()`适用于内置和自定义类型。

第三，我认为队列有容量限制`max_queue_items`但入队部分没有对应的代码。

尽管如此，我认为所有这些缺陷在正常情况下都不会导致严重的崩溃。也许问题发生在您的代码调用类并且对未初始化的返回值的错误处理导致崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T15:11:38.013

我在你的出队中看到的唯一潜在问题是你正在创建一个未知类型 T 的临时变量。如果你在优先级队列中存储没有默认构造函数的类型的数据，那么当你的出队时你会遇到问题调用并尝试默认构造该变量。

如果是这种情况，我建议您重新处理优先级队列以保存指向模板类型而不是数据本身的指针。

# jquery - jQuery 如果 URL 包含路径名

> ID：14926032
> 
> 赞同：2
> 
> 时间：2013-02-17T21:04:03.533
> 
> 标签：jquery, class, url

我有这个脚本：

```
<script type="text/javascript">
$(document).ready(function() {

var url = location.pathname;

  if ("url:contains('message')") {
    $("a#none").attr("class","active");
  }

});        
        </script> 
```

它很好地将活动类添加到 url。但是，即使 url 不包含路径消息，它也会将 active 类添加到 url。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:06:33.150

那是因为字符串是真实的，并且`:contains`是一个 jQuery 选择器，不会在你的代码中做任何事情，你可以使用`indexOf`String 对象的方法：

```
if (url.indexOf('message') > -1) {
    // $("#none").addClass("active");
} 
```

# linux - 在 Unix 中从 EAR 文件中提取特定的类文件

> ID：14926033
> 
> 赞同：3
> 
> 时间：2013-02-17T21:04:14.260
> 
> 标签：linux, unix, jar, pipe

我有一个包含大约 20 个 jar 文件的 ear 文件。现在这个 EAR 中有一个特定的 jar 文件，比如 jar 1，其中包含应用程序类文件。

现在我想要一个unix中的单行命令，它可以从EAR中存在的那个jar（在本例中为jar 1）中提取一个特定的类文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:28:35.697

我找到了一种分两个阶段进行的方法：

1.  找到你想要的文件：

    ```
    jar tvf file.ear | grep file_you_want.abc 
    ```

    您将获得所需的文件及其路径。

2.  提取它：

    ```
    jar xvf file.ear path/to/file/file.abc 
    ```

# ios - 取 NSArray 段的平均值

> ID：14926034
> 
> 赞同：1
> 
> 时间：2013-02-17T21:04:22.897
> 
> 标签：ios, algorithm, nsarray, key-value-observing

我有一个 100 个数字的 NSArray。我想创建一个 5 个数字的 NSArray。第二个数组中的第一个数字是第一个数组中前 20 个数字的平均值。第二个数字是第一个数组中第二组 20 个数字的平均值。等等。

我很想听听人们对高效算法的想法。

我的一个想法是对每组 20 个数字执行一个 for 循环，创建一个包含 20 个数字的临时 NSArray。然后执行一个 KVO 平均操作并添加到最终的 NSArray。

注意：我总是将答案授予某人，并且我并不羞于对您的答案进行投票。我鼓励许多答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:07:39.140

只需将每个 20 数字部分中的值相加，除以 20 并放入适当的输出数组位置。这是一次通过数组，大 O(n)，你还能要求什么？计算这个时间是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:51:44.497

你可以尝试这样的事情......

```
NSArray *_array = // with the 100 numbers... (I used NSNumber object for each number)

NSMutableArray *_averages = [NSMutableArray array];
for (int i = 0; i < 5; i++) [_averages addObject:@([[[_array subarrayWithRange:NSMakeRange(i * 20, 20)] valueForKeyPath:@"@avg.floatValue"] floatValue])]; 
```

将`_averages`包含 5 个值，以及 100 个数字的五个不同部分的平均值。

**更新：**

*这部分只是为了有额外好奇心的眼睛。*

如果你试图避免`NSObjects`和双`for`循环，你可以实现一个非常快的算法，当然当你越低级别时，你也可以提高当前速度，问题是：*它真的需要吗？*

```
NSInteger _segments = 1000; // it means 20.000 numbers;
Float64 _numbers[(_segments * 20)]; // fill this array as you'd like.

Float64 _averages[_segments];

for (int i = 0; i < _segments; i++) {
    NSInteger _offset = (_segments<<4)+4;
    _averages[i] = (_numbers[_offset] + _numbers[_offset+1] + _numbers[_offset+2] + _numbers[_offset+3] + _numbers[_offset+4] + _numbers[_offset+5] + _numbers[_offset+6] + _numbers[_offset+7] + _numbers[_offset+8] + _numbers[_offset+9] + _numbers[_offset+10] + _numbers[_offset+11] + _numbers[_offset+12] + _numbers[_offset+13] + _numbers[_offset+14] + _numbers[_offset+15] + _numbers[_offset+16] + _numbers[_offset+17] + _numbers[_offset+18] + _numbers[_offset+19]) / 20.f;
} 
```

`double`它比使用for 循环和`NSObject`类的解决方案快 10 倍。

（不）幸运的是，它甚至不是最丑陋的解决方案，但毫无疑问它快得要命，**我不会推荐它，**除非速度*真的很*重要，因为这种解决方案可以提供非常好的效率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:15:38.010

以下是简单有效的：

```
NSArray *numbers = ... // array of 100 numbers
NSMutableArray *averages = [NSMutableArray array];

for (int = 0; i < 5; i++) {
    float total = 0.0;
    int base = i * 20;
    for (int j = 0; j < 20; j++) {
        float num = [numbers[base + j] floatValue];
        total += num;
    }

    float avg = total / 20.0f;
    [averages addObject:@(avg)];
}

NSLog(@"Averages = %@", averages); 
```

# c# - 调用 C DLL 函数以从类型定义的 char 编组字符串

> ID：14926036
> 
> 赞同：2
> 
> 时间：2013-02-17T21:04:37.593
> 
> 标签：c#, c, pinvoke, dllimport

这是我第一次尝试为 C 库创建 C# 包装器。SDK 是第 3 方，不受我控制：

sdk_defines.h

```
#ifndef SDK_CHAR_T
#define SDK_CHAR_T
typedef char sdk_char_t;
#endif /* SDK_CHAR_T */

#ifndef SDK_CSTR_T
#define SDK_CSTR_T
typedef const sdk_char_t*  sdk_cstr_t;
#endif /* SDK_CSTR_T */ 
```

sdk.h

```
sdk_cstr_t SDK_API
sdk_get_version(void); 
```

我的 C# 包装器：

```
[DllImport("sdk.dll", CharSet = CharSet.Ansi)]
private static extern string sdk_get_version(); 
```

对 sdk_get_version 的任何调用都会导致崩溃，没有例外。我感觉它是返回类型，但是如何在 C# 中正确编组它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:14:34.370

如果您返回 as `string`，则编组器将调用`CoTaskMemFree`返回的指针。我希望这就是发生在您身上的事情，也是您的代码失败的原因。看看那个 API，返回的指针很可能指向 DLL 中的字符串文字，当然不是用`CoTaskMemAlloc`.

因此，您需要将其作为 an 返回，`IntPtr`然后使用`Marshal.PtrToStringAnsi`.

所以你需要这样的：

```
[DllImport("sdk.dll")]
private static extern IntPtr sdk_get_version();

....

IntPtr ptr = sdk_get_version();
string version = Marshal.PtrToStringAnsi(ptr); 
```

在你走得更远之前，你需要弄清楚`SDK_API`是什么。是`stdcall`吗`cdecl`？这个无参数函数没有任何区别，但不久你就会传递参数，你需要知道。

# django - Django的南方错误

> ID：14926043
> 
> 赞同：0
> 
> 时间：2013-02-17T21:05:18.053
> 
> 标签：django, django-south

我的旧models.py：

```
 from django.db import models
    from taggit.managers import TaggableManager
    from django.utils.encoding import smart_unicode
    import markdown

        class PublishedManager(models.Manager):
            def get_query_set(self):
                return super(PublishedManager, self).get_query_set().filter\
                (is_published=True)

        class Category(models.Model):
            name = models.CharField(max_length=55)

            def __unicode__(self):
                return u"%s" %(self.name)

        class BookMarks(models.Model):
            name = models.CharField(max_length=255)
            url = models.URLField()
            date_time = models.DateTimeField(auto_now_add=True)

            def __unicode__(self):
                return u"%s %s %s" %(self.name, self.url, self.date_time)

        class Post(models.Model):
            title = models.CharField(max_length=255)
            slug = models.SlugField(max_length=255, unique=True)
            excerpt = models.TextField(blank=True, help_text="A small teaser of\
                        your content")
            content = models.TextField(blank=True, null=True)
            contentmarkdown = models.TextField()
            date_created = models.DateTimeField(auto_now_add=True)
            is_published = models.BooleanField(default=True)
            objects = models.Manager()
            published_objects = PublishedManager()
            tags = TaggableManager()
            category = models.ForeignKey(Category)

            def save(self):
                self.content = markdown.markdown(self.contentmarkdown)
                super(Post, self).save() # Call the "real" save() method.

            class Meta:
                ordering = ("date_created",)

            def __unicode__(self):
                return smart_unicode("%s %s %s %s %s" %(self.title, self.content, self.is_published, self.category, self.tags))

            def get_absolute_url(self):
                return "/posts/%s/" % self.id

        class Book(models.Model):
            name = models.CharField(max_length=55)
            author = models.CharField(max_length=55)
            image = models.ImageField(upload_to="static/img/books/")
            body = models.TextField(blank=True, null=True)
            bodymarkdown = models.TextField()

            def __unicode__(self):
                return u"%s %s" %(self.name, self.author)

            def get_absolute_url(self):
                return "/books/%s/" % self

.id 
```

在将“category = models.ForeignKey(Category)”这个字段添加到 Book 和 BookMarks 表之后，我的新 models.py 如下所示：

```
from django.db import models
from taggit.managers import TaggableManager
from django.utils.encoding import smart_unicode
import markdown

class PublishedManager(models.Manager):
    def get_query_set(self):
        return super(PublishedManager, self).get_query_set().filter\
        (is_published=True)

class Category(models.Model):
    name = models.CharField(max_length=55)

    def __unicode__(self):
        return u"%s" %(self.name)

class BookMarks(models.Model):
    name = models.CharField(max_length=255)
    url = models.URLField()
    date_time = models.DateTimeField(auto_now_add=True)
    category = models.ForeignKey(Category)

    def __unicode__(self):
        return u"%s %s %s" %(self.name, self.url, self.date_time)

class Post(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField(max_length=255, unique=True)
    excerpt = models.TextField(blank=True, help_text="A small teaser of\
                your content")
    content = models.TextField(blank=True, null=True)
    contentmarkdown = models.TextField()
    date_created = models.DateTimeField(auto_now_add=True)
    is_published = models.BooleanField(default=True)
    objects = models.Manager()
    published_objects = PublishedManager()
    tags = TaggableManager()
    category = models.ForeignKey(Category)

    def save(self):
        self.content = markdown.markdown(self.contentmarkdown)
        super(Post, self).save() # Call the "real" save() method.

    class Meta:
        ordering = ("date_created",)

    def __unicode__(self):
        return smart_unicode("%s %s %s %s %s" %(self.title, self.content, self.is_published, self.category, self.tags))

    def get_absolute_url(self):
        return "/posts/%s/" % self.id

class Book(models.Model):
    name = models.CharField(max_length=55)
    author = models.CharField(max_length=55)
    image = models.ImageField(upload_to="static/img/books/")
    body = models.TextField(blank=True, null=True)
    bodymarkdown = models.TextField()
    category = models.ForeignKey(Category)

    def __unicode__(self):
        return u"%s %s" %(self.name, self.author)

    def get_absolute_url(self):
        return "/books/%s/" % self.id

class Errors(models.Model):
    name = models.CharField(max_length=255)
    created = models.DateTimeField(auto_now_add=True)
    body = models.TextField(blank=True, null=True)
    bodymarkdown = models.TextField()

    def __unicode__(self):
        return self.name

    def get_absolute_url(self):
        return "/errors/%s/" % self.id 
```

我用的是南方。一切都很顺利，但在这一行之后：

```
?  1\. Quit now, and add a default to the field in models.py
 ?  2\. Specify a one-off value to use for existing columns now
 ?  3\. Disable the backwards migration by raising an exception.
 ? Please select a choice: 2
 ? Please enter Python code for your one-off default value.
 ? The datetime module is available, so you can do e.g. datetime.date.today()
 >>> datetime.datetime.now() 
```

我收到这样的错误：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/management/commands/migrate.py", line 108, in handle
    ignore_ghosts = ignore_ghosts,
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/__init__.py", line 213, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 235, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 310, in migrate_many
    result = self.migrate(migration, database)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 133, in migrate
    result = self.run(migration)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 106, in run
    dry_run.run_migration(migration)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 191, in run_migration
    self._run_migration(migration)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 178, in _run_migration
    raise exceptions.FailedDryRun(migration, sys.exc_info())
south.exceptions.FailedDryRun:  ! Error found during dry run of '0012_auto__del_field_book_category__add_field_book_category1__del_field_boo'! Aborting.
Traceback (most recent call last):
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 175, in _run_migration
    migration_function()
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/home/ada/mainproject/blog/migrations/0012_auto__del_field_book_category__add_field_book_category1__del_field_boo.py", line 17, in forwards
    keep_default=False)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/generic.py", line 44, in _cache_clear
    return func(self, table, *args, **opts)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/generic.py", line 402, in add_column
    sql = self.column_sql(table_name, name, field)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/south/db/generic.py", line 688, in column_sql
    default = field.get_db_prep_save(default, connection=self._get_connection())
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/models/fields/related.py", line 991, in get_db_prep_save
    connection=connection)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 292, in get_db_prep_save
    prepared=False)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 284, in get_db_prep_value
    value = self.get_prep_value(value)
  File "/home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py", line 537, in get_prep_value
    return int(value)
TypeError: int() argument must be a string or a number, not 'datetime.datetime' 
```

请你能告诉我为什么我会收到这个错误吗？我必须做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:17:30.983

因为您的新类别字段是强制性的（如果不给它一个类别就无法创建书籍或书签），South 询问您如何处理数据库中现有的书籍和书签 - 您的最新更改会生成所有当前书籍/ 书签无效（因为它们没有类别）。

您的新类别字段使用类别表的主键在您的书/书签表中表示。这个主键可能是一个整数（或者可能是一个字符串）。

South 要求您提供默认主键。而不是提供数据库中类别对象的主键（可以是整数或字符串）。您提供了一个数据时间对象。

它在实际运行迁移时会出错，因为该字段不包含日期时间对象。它保存整数（或字符串）。您需要再次创建迁移并添加有效的主键。

# php - 如果目录存在，Htaccess 更改 URL 大小写

> ID：14926051
> 
> 赞同：3
> 
> 时间：2013-02-17T21:06:06.803
> 
> 标签：php, .htaccess

我遇到的问题是，当 URL 包含一个存在的目录时，URL 会随着文件的大小写而改变。

更具体地说，这是正在发生的事情：

`domain.com/cron/xxx`当我在我的 PHP 脚本中转到then 时，`uri`将是：

```
cron/xxx 
```

但如果该文件夹`Cron`存在，那么`uri`将是：

```
Cron/xxx 
```

有谁知道是什么原因导致这种情况发生？

这是我的`.htaccess`文件：

重写引擎开启

```
#remove www.
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^api
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?uri=api/$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?uri=$1 [L,QSA] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T01:20:08.047

我不是超级精通 ModRewrite，但你可以尝试：

```
RewriteMap  lc int:tolower 
```

然后在您的规则中使用它，如下所示：

```
RewriteRule (.*) ${lc:$1} [R=301,L] 
```

# visual-studio-2010 - 使用 Microsoft VisulaStudio 2010 express 编译 WSDLPULL

> ID：14926054
> 
> 赞同：0
> 
> 时间：2013-02-17T21:06:36.927
> 
> 标签：visual-studio-2010, soap, compiler-errors, wsdl

我正在尝试编译 wsdlpull ( [http://wsdlpull.sourceforge.net/#install](http://wsdlpull.sourceforge.net/#install) ) 以创建 dll 和工具，但我似乎无法按照说明将 dsw 文件打开到工作空间而没有错误。之前尝试过这个的人能否给我一些关于这可能是由什么引起的提示。

如果没有，有人可以建议一个具有 LGPL 许可证的好的 SOAP 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-08T09:25:17.220

在 wsdlpull-1.24\win32\vs2008 目录中查找 Visual Studio 2008 项目版本并进行转换。

# eclipse - 如何使用 ANTLR4 和 Maven 自动生成 lexer+parser？

> ID：14926060
> 
> 赞同：14
> 
> 时间：2013-02-17T21:07:24.490
> 
> 标签：eclipse, maven, antlr4

我是 ANTLR4 的新手，似乎 v4 没有 Eclipse-Plug-In。因此，最好从 .g4 语法自动构建 Java 源代码。我有一个简单的空 Maven 项目，带有 src/main/java、src/test/java。在哪里放置 .g4 文件？如何使用 Maven 自动构建语法？

我自己的 POM 测试失败：

```
<repository>
    <id>mvn-public</id>
    <name>MVNRepository</name>
    <url>http://mvnrepository.com</url>
</repository>

...

<build>
    <plugins>
        <plugin>
            <groupId>org.antlr</groupId>
            <artifactId>antlr4-maven-plugin</artifactId>
            <version>4.0.0</version>
            <executions>
                <execution>
                    <goals>
                        <goal>antlr</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

日食 说：

```
Failure to find org.antlr:antlr4-maven-plugin:pom:4.0.0 in http://repo.maven.apache.org/maven2 was cached in the local repository, resolution will not be reattempted until the update interval of
central has elapsed or updates are forced 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T17:31:07.377

我创建了以下 Gist，其`pom.xml`专门*用于*在 Eclipse 构建期间支持从 ANTLR 4 语法自动生成代码。它包括必要的生命周期信息，以便 m2e 知道代码生成是必要的，并使用 Eclipse 显式添加代码生成文件夹`build-helper-maven-plugin`，否则 Eclipse 似乎很难找到它。

在此配置中，语法文件 ( `*.g4`) 与其他 Java 源文件一起放置。Maven 插件会自动将正确的`package ...`语句添加到生成的文件中，因此您不应`@header{package ...}`在语法本身中包含一行。

[https://gist.github.com/sharwell/4979017](https://gist.github.com/sharwell/4979017)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-13T19:29:06.557

看看这个 Eclipse 的 Antlr4 插件

[https://github.com/jknack/antlr4ide](https://github.com/jknack/antlr4ide)

# c - 使用 \r\n\r\n 检测 http 标头的结尾

> ID：14926062
> 
> 赞同：2
> 
> 时间：2013-02-17T21:07:28.900
> 
> 标签：c, http

使用 recv 我想获取 http 标头，以便解析内容长度。但是我无法检测到换行符。或者实际上我是否必须检测换行符，或者我第一次读入缓冲区时总是完整的标题（假设我有足够长的缓冲区）。

这是用 C 写的。

编辑：查看一些相关问题，我担心的一件事是“......标题中断的“\r\n”可能会被两次不同的recv（）调用拉入您的缓冲区，这将阻止您的代码无法识别标题中断。”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:13:32.850

您应该反复调用 recv() ，每次它给您`x`字节时，您都会按字节增加您给它的缓冲区指针`x`（并减少它允许写入的 cb 也按`x`字节）。您这样做直到您的缓冲区包含 a`\r\n\r\n`或完全填满，在这种情况下，您只需关闭套接字并从那时起忽略恶意客户端。缓冲区大小应约为 3000 字节。

**但是**：这忽略了您的服务器似乎是轮询服务器的一般问题。如果你有一些经验，你应该尝试制作一个 epoll-server。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:49:15.287

除了跨数据包边界识别“\r\n\r\n”的问题外，您还有跨数据包边界识别“Content-Length: xxxx\r\n”的问题。我建议一次接收和解析一个字节。当你得到一个'\r'的recv（），然后是'\n'的recv（），然后是'\r'的recv（），然后是'\n'的recv（），你可以确保标题已结束。一旦你掌握了这一点，调整你的解决方案以接收和解析 n 个字节，其中 n 是最初定义为 1 的预处理器定义，并更改 n。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T01:01:44.953

最后我做了这样的事情：

```
while ( recv... > 0 ) {
     if rnrn is inside the buffer using strstr
         look for content length, output error if content length doesn't exist
     else
         keep on reading into the buffer
} 
```

然后一旦找到标题，我就会继续阅读邮件正文。

无论如何，谢谢你们，最终以一种非常低效的方式来获得我的答案，但必须做的事情已经完成。

# javascript - 在源代码模式下禁用 CKEditor 插件按钮

> ID：14926070
> 
> 赞同：2
> 
> 时间：2013-02-17T21:08:14.477
> 
> 标签：javascript, ckeditor, toolbar

我试图在 CKEditor 中添加我自己的工具栏按钮（在 vBulletin 中）。以下是我的代码：

```
CKEDITOR.plugins.add( 'app',
{
init: function( editor )
{
    editor.addCommand( 'AppWidget',
        {
            modes : { source : 1, wysiwyg : 1 },
            exec : function( editor )
            {   
                alert("foo");
            }
        });
    editor.ui.addButton( 'app',
    {
        label: 'App Widget',
        command: 'AppWidget',
        icon: this.path + 'app.png'
    } );
}
} ); 
```

问题是：它将在 WYSIWYG 模式下显示，但在源模式下将被禁用（灰显）。但我需要在源模式下启用此按钮。如果我写：

```
modes : { source : 1 }, 
```

它将在两种模式下都被禁用。

这里有任何提示吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:11:22.067

问题解决了。我注意到编辑器模式应该是：

```
modes : { enhancedsource : 1 } 
```

# javascript - 当元素在其父元素的某个区域内时检测或触发事件

> ID：14926071
> 
> 赞同：0
> 
> 时间：2013-02-17T21:08:18.907
> 
> 标签：javascript, html, jquery, listener, dom-events

在**overflow-y**设置为**滚动的****div**中（只有部分可见），会有**不同 height的****关键元素**（在本例中为**divs**）。我的计划是每次看到这些关键元素时都 ping 服务器。

 ******示例：**父 div**高**1000px** ，但实际上只有**80px 和 420px**之间的区域可见。内部将有大约**30 个其他****不可预测**高度的关键 div 。举例来说，假设我需要在**整个关键 div #27 位于其 parent 的第 80 和第 420 个像素之间**时 ping 服务器。

我有将所有子 div 的高度存储在一个全局数组中以供以后使用的想法，但这似乎不是最明智的选择。我真的不确定如何在这种情况下触发事件。如果它是一个听众，谁应该听，为了什么？

实现这一目标的最佳方法是什么？我对 jQuery 或纯 JavaScript 都很满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-29T20:55:20.767

**对于任何需要解决类似问题的人...**

我通过将要监视的 DIV 的 ID 存储在关联数组中并将事件处理程序附加到带有`.on("scroll", function)`.

每次用户滚动父 DIV 时，它都会循环遍历数组以检查子边框 ( `$("#childdiv").position().top + $("#childdiv").height()`) 的位置是否低于父 DIV 的高度（以确保整个 DIV 可见）。

我还发现从数组中删除项目`delete Array[id];`并执行我想要的操作是明智的。

如果有人有更好的主意，我很想听听。******

# java - Namenode恶魔启动错误

> ID：14926077
> 
> 赞同：0
> 
> 时间：2013-02-17T21:08:54.053
> 
> 标签：java, linux, unix, hadoop, mapreduce

我的目的——启动namenode的恶魔。我有必要使用 hdfs 的文件系统，从本地文件系统复制文件，在 hdfs 中创建文件夹，并且需要在配置 /conf/core-site 中指定的端口上启动 namenode 的恶魔.xml 文件。我启动了一个脚本

```
./hadoop namenode 
```

结果我收到了以下消息

```
2013-02-17 12:29:37,493 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = one/192.168.1.8
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 1.0.1
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1243785; compiled by 'hortonfo' on Tue Feb 14 08:15:38 UTC 2012
************************************************************/
2013-02-17 12:29:38,325 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2013-02-17 12:29:38,400 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2013-02-17 12:29:38,427 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2013-02-17 12:29:38,427 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started
2013-02-17 12:29:39,509 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2013-02-17 12:29:39,542 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2013-02-17 12:29:39,633 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2013-02-17 12:29:39,635 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered.
2013-02-17 12:29:39,704 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit
2013-02-17 12:29:39,708 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 19.33375 MB
2013-02-17 12:29:39,708 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries
2013-02-17 12:29:39,708 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304
2013-02-17 12:29:42,718 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=hadoop
2013-02-17 12:29:42,737 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup
2013-02-17 12:29:42,738 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=true
2013-02-17 12:29:42,937 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100
2013-02-17 12:29:42,940 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
2013-02-17 12:29:45,820 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean
2013-02-17 12:29:46,229 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times 
2013-02-17 12:29:46,836 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files = 1
2013-02-17 12:29:47,133 INFO org.apache.hadoop.hdfs.server.common.Storage: Number of files under construction = 0
2013-02-17 12:29:47,134 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 112 loaded in 0 seconds.
2013-02-17 12:29:47,134 INFO org.apache.hadoop.hdfs.server.common.Storage: Edits file /tmp/hadoop-hadoop/dfs/name/current/edits of size 4 edits # 0 loaded in 0 seconds.
2013-02-17 12:29:47,163 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 112 saved in 0 seconds.
2013-02-17 12:29:47,375 INFO org.apache.hadoop.hdfs.server.common.Storage: Image file of size 112 saved in 0 seconds.
2013-02-17 12:29:47,479 INFO org.apache.hadoop.hdfs.server.namenode.NameCache: initialized with 0 entries 0 lookups
2013-02-17 12:29:47,480 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Finished loading FSImage in 6294 msecs
2013-02-17 12:29:47,919 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Total number of blocks = 0
2013-02-17 12:29:47,919 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of invalid blocks = 0
2013-02-17 12:29:47,920 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of under-replicated blocks = 0
2013-02-17 12:29:47,920 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of  over-replicated blocks = 0
2013-02-17 12:29:47,920 INFO org.apache.hadoop.hdfs.StateChange: STATE* Safe mode termination scan for invalid, over- and under-replicated blocks completed in 430 msec
2013-02-17 12:29:47,920 INFO org.apache.hadoop.hdfs.StateChange: STATE* Leaving safe mode after 6 secs.
2013-02-17 12:29:47,920 INFO org.apache.hadoop.hdfs.StateChange: STATE* Network topology has 0 racks and 0 datanodes
2013-02-17 12:29:47,920 INFO org.apache.hadoop.hdfs.StateChange: STATE* UnderReplicatedBlocks has 0 blocks
2013-02-17 12:29:48,198 INFO org.apache.hadoop.util.HostsFileReader: Refreshing hosts (include/exclude) list
2013-02-17 12:29:48,279 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: ReplicateQueue QueueProcessingStatistics: First cycle completed 0 blocks in 129 msec
2013-02-17 12:29:48,279 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: ReplicateQueue QueueProcessingStatistics: Queue flush completed 0 blocks in 129 msec processing time, 129 msec clock time, 1 cycles
2013-02-17 12:29:48,280 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: InvalidateQueue QueueProcessingStatistics: First cycle completed 0 blocks in 0 msec
2013-02-17 12:29:48,280 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: InvalidateQueue QueueProcessingStatistics: Queue flush completed 0 blocks in 0 msec processing time, 0 msec clock time, 1 cycles
2013-02-17 12:29:48,280 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source FSNamesystemMetrics registered.
2013-02-17 12:29:48,711 INFO org.apache.hadoop.ipc.Server: Starting SocketReader
2013-02-17 12:29:48,836 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcDetailedActivityForPort2000 registered.
2013-02-17 12:29:48,836 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source RpcActivityForPort2000 registered.
2013-02-17 12:29:48,865 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Namenode up at: one/192.168.1.8:2000
2013-02-17 12:30:23,264 INFO org.mortbay.log: Logging to org.slf4j.impl.Log4jLoggerAdapter(org.mortbay.log) via org.mortbay.log.Slf4jLog
2013-02-17 12:30:25,326 INFO org.apache.hadoop.http.HttpServer: Added global filtersafety (class=org.apache.hadoop.http.HttpServer$QuotingInputFilter)
2013-02-17 12:30:25,727 INFO org.apache.hadoop.http.HttpServer: dfs.webhdfs.enabled = false
2013-02-17 12:30:25,997 INFO org.apache.hadoop.http.HttpServer: Port returned by webServer.getConnectors()[0].getLocalPort() before open() is -1\. Opening the listener on 50070
2013-02-17 12:30:26,269 ERROR org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hadoop cause:java.net.BindException: Address already in use
2013-02-17 12:30:26,442 WARN org.apache.hadoop.hdfs.server.namenode.FSNamesystem: ReplicationMonitor thread received InterruptedException.java.lang.InterruptedException: sleep interrupted
2013-02-17 12:30:26,445 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Number of transactions: 0 Total time for transactions(ms): 0Number of transactions batched in Syncs: 0 Number of syncs: 0 SyncTimes(ms): 0 
2013-02-17 12:30:26,446 INFO org.apache.hadoop.ipc.Server: Stopping server on 2000
2013-02-17 12:30:26,446 INFO org.apache.hadoop.ipc.metrics.RpcInstrumentation: shut down
2013-02-17 12:30:26,616 INFO org.apache.hadoop.hdfs.server.namenode.DecommissionManager: Interrupted Monitor
java.lang.InterruptedException: sleep interrupted
    at java.lang.Thread.sleep(Native Method)
    at org.apache.hadoop.hdfs.server.namenode.DecommissionManager$Monitor.run(DecommissionManager.java:65)
    at java.lang.Thread.run(Thread.java:722)
2013-02-17 12:30:26,761 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: java.net.BindException: Address already in use
    at sun.nio.ch.Net.bind0(Native Method)
    at sun.nio.ch.Net.bind(Net.java:344)
    at sun.nio.ch.Net.bind(Net.java:336)
    at sun.nio.ch.ServerSocketChannelImpl.bind(ServerSocketChannelImpl.java:199)
    at sun.nio.ch.ServerSocketAdaptor.bind(ServerSocketAdaptor.java:74)
    at org.mortbay.jetty.nio.SelectChannelConnector.open(SelectChannelConnector.java:216)
    at org.apache.hadoop.http.HttpServer.start(HttpServer.java:581)
    at org.apache.hadoop.hdfs.server.namenode.NameNode$1.run(NameNode.java:445)
    at org.apache.hadoop.hdfs.server.namenode.NameNode$1.run(NameNode.java:353)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.startHttpServer(NameNode.java:353)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:305)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:496)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1279)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1288)

2013-02-17 12:30:26,784 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at one/192.168.1.8
************************************************************/ 
```

帮助启动namenode的demo，进一步启动应用程序的hadoop。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:15:56.717

```
2013-02-17 12:30:26,761 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: java.net.BindException: Address already in use 
```

看起来您已经在名称节点绑定到的同一端口上运行了一个进程。可能意味着您已经运行了一个名称节点进程的实例。

您应该能够使用该`jps -v`命令列出当前用户正在运行的 java 进程，或`ps aww | grep java`列出所有正在运行的 java 进程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T23:47:26.640

检查您的 IP 地址是否在 /etc/hosts 文件中正确映射。使用 ifconfig 检查并映射到正确的 DNS 名称。如果映射也不正确，则会引发此错误。

# android - Eclipse 中的小部件比手机上的小

> ID：14926078
> 
> 赞同：1
> 
> 时间：2013-02-17T21:08:58.523
> 
> 标签：android, eclipse, android-widget, screen, resolution

我目前正在为屏幕分辨率为 960x540 的 HTC Evo 3D 手机准备一个应用程序。我已经设置了一个自定义布局配置，用于在此分辨率下设计界面。在此配置中，小部件（文本视图、搜索栏等）在屏幕上显得小而紧凑、稀疏。而当我在手机上启动应用程序时，按钮要大得多，并且会更多地填满屏幕。Eclipse 中是否有一些设置可以让我在编辑器中查看布局，就像它在我的手机上显示的一样，从而更容易设计界面。

非常感谢，马特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:50:42.100

使用相关代码会更容易提供帮助，但是，如果您使用 dp 单位测量，尺寸将根据分辨率：屏幕尺寸而变化，而不仅仅是分辨率。我认为给 textview/button 等的“wrap_content”也会改变大小，因为字体大小会在 sp。所以，看看是否有适合真实设备分辨率和屏幕尺寸的模拟器配置。[在这里](https://stackoverflow.com/questions/2025282/difference-of-px-dp-dip-and-sp-in-android)查看有关度量单位的更多信息。
编辑
那么您是否在 Eclipse 中的 yourlayout.xml 的图形布局中看到了它？在该窗口的顶部栏有一个用于显示配置的下拉菜单，更改它以查看不同屏幕中的布局（我看不到任何 960x540 顺便说一句）。然而，如果你真的想为单一设备开发是一个问题，但如果你要为不同的设备发布应用程序，你需要一些策略来进行灵活的布局。[这](http://developer.android.com/guide/practices/screens_support.html)非常有用。

# matlab - 如何以规范表示解决matlab中的线性规划？

> ID：14926079
> 
> 赞同：1
> 
> 时间：2013-02-17T21:09:16.953
> 
> 标签：matlab, linear-programming

是否可以在matlab中输入这样的字符串：

```
MAX  140 x1 + 160 x2 +x3

SUBJECT TO

2 x1 + 4 x2 <= 28

5x1 + 5.333x2 -500X3 = 0

x1 <= 8

x2 <= 6

END 
```

我安装的工具箱：

> > v = 版本；setdiff({v.Name}, 'MATLAB')'

答案=

```
'Aerospace Blockset'
'Aerospace Toolbox'
'Bioinformatics Toolbox'
'Communications System Toolbox'
'Computer Vision System Toolbox'
'Control System Toolbox'
'Curve Fitting Toolbox'
'DSP System Toolbox'
'Database Toolbox'
'Datafeed Toolbox'
'Econometrics Toolbox'
'Embedded Coder'
'Filter Design HDL Coder'
'Financial Derivatives Toolbox'
'Financial Toolbox'
'Fixed-Income Toolbox'
'Fixed-Point Toolbox'
'Fuzzy Logic Toolbox'
'Global Optimization Toolbox'
'IEC Certification Kit'
'Image Acquisition Toolbox'
'Image Processing Toolbox'
'Instrument Control Toolbox'
'MATLAB Builder JA'
'MATLAB Coder'
'MATLAB Compiler'
'MATLAB Distributed Computing Server'
'MATLAB Report Generator'
'Mapping Toolbox'
'Model Predictive Control Toolbox'
'Neural Network Toolbox'
'Optimization Toolbox'
'Parallel Computing Toolbox'
'Partial Differential Equation Toolbox'
'Phased Array System Toolbox'
'RF Toolbox'
'Robust Control Toolbox'
'Signal Processing Toolbox'
'SimBiology'
'SimDriveline'
'SimElectronics'
'SimEvents'
'SimHydraulics'
'SimMechanics'
'SimPowerSystems'
'SimRF'
'Simscape'
'Simulink'
'Simulink 3D Animation'
'Simulink Coder'
'Simulink Control Design'
'Simulink Design Optimization'
'Simulink Fixed Point'
'Simulink Report Generator'
'Simulink Verification and Validation'
'Stateflow'
'Statistics Toolbox'
'Symbolic Math Toolbox'
'System Identification Toolbox'
'SystemTest'
'Wavelet Toolbox' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:39:40.213

退房[`linprog`](http://www.mathworks.com/help/optim/ug/linprog.html)：

```
f = [140, 160, 1]'; %'
A = [2 4 0];
b = 28;
Aeq = [5 5.3333 -500]
beq = 0
lb = -inf*ones(3,1);
ub = [8, 6, inf]';

x = linprog( f, A, b, Aeq, beq, lb, ub ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T22:35:03.757

[YALMIP](http://users.isy.liu.se/johanl/yalmip/pmwiki.php?n=Main.HomePage)会让你更接近你想要的。您可能还想查看[CVX](http://cvxr.com/cvx/)。

# perl - 请解释perl代码的含义

> ID：14926086
> 
> 赞同：-1
> 
> 时间：2013-02-17T21:10:02.680
> 
> 标签：perl

这段代码到底在做什么，s*在perl中是什么意思，有没有其他方法可以写出这段代码。

```
my $group = join('","', split(/,\s*/, $tmp[4])) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T21:13:59.697

`,\s*`是一种[正则表达式模式](http://perldoc.perl.org/perlre.html)，它匹配以逗号 ( `,`) 开头后跟零个或多个 ( `*`) 空格字符 ( `\s`) 的字符串。

[`split`](http://perldoc.perl.org/functions/split.html)使用此模式来确定要在哪个分隔符上进行拆分。例如，使用该模式，它会将字符串拆分`foo,bar, baz`为三个字符串`foo`和。`bar``baz`

以下是 Perl 5.14.2 和 Unicode 6.0.0 考虑的空格字符：

*   U+00009 字符表
*   U+0000A 换行 (LF)
*   U+0000C 换页 (FF)
*   U+0000D 回车 (CR)
*   U+00020 空间
*   U+00085 下一行 (NEL)
*   U+000A0 无间断空间
*   U+01680 欧格姆空间标记
*   U+0180E 蒙古语元音分隔符
*   U+02000 EN QUAD
*   U+02001 EM 四边形
*   U+02002 EN 空间
*   U+02003 电磁空间
*   U+02004 每 EM 三个空间
*   U+02005 4-PER-EM 空间
*   U+02006 6-PER-EM 空间
*   U+02007 人物空间
*   U+02008 标点空格
*   U+02009 薄空间
*   U+0200A 头发空间
*   U+02028 行分隔符
*   U+02029 段落分隔符
*   U+0202F 狭窄的无间断空间
*   U+0205F 中数学空间
*   U+03000 表意空间

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:22:13.663

假设您的代码在可编译时如下所示：

```
my $test = "abc, xyz, mno";
print join('","', split(/,\s*/, $test)); 
```

它可以重写为：

```
my $test = "abc, xyz, mno";  
my @tokens = split /,\s*/, $test;   # split $test on `,\s*`
print join '","', @tokens;          # Join the array back on `","`. 
```

`regex`@ikegami 在他的回答中已经解释了这意味着什么。

请记住，您可以`omit`在不改变 Perl 含义的括号中加上括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:37:13.223

这是您[上一个问题的答案中这一行的一部分](https://stackoverflow.com/questions/14918936)

```
my $group = join('","',split(/,\s*/,$tmp[4])) 
```

我认为最好写成

```
my $group = join ', ', map qq{"$_"}, $tmp[4] =~ /[^\s,]/g; 
```

正则表达式提取不是空格或逗号的所有字符组，因此当应用于字符串时`TTT, TTC`，结果是`TTT`and `TTC`。在`map`每个项目周围放置双引号。并将`join`它们全部连接成一个字符串，用 . 分隔`,`。这给`"TTT", "TTC"`

你读过我对你前两个问题的回答吗？唯一的问题似乎是您不想安装模块，我已经为这种情况编写了一个替代方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T21:50:09.277

我同意 Rohl Jain 的观点。它是一个代码片段。我想出了案例。

```
my $line = 'a,b, c,  d,e';
my $newline = '"'.join('","',split(/,\s*/,$line)).'"';
print $newline; 
```

这是输出。"a","b","c","d","e"

它采用逗号分隔的一行数据，删除空格填充，并创建一个逗号分隔和双引号封装的行。注意我在行首和行尾添加了双引号。

# list - 相对于列表中的其他项目，将项目添加到 Prolog 中的列表

> ID：14926091
> 
> 赞同：1
> 
> 时间：2013-02-17T21:10:32.693
> 
> 标签：list, prolog

我是 Prolog 的新手，希望这是一件简单的事情。我想根据与列表中其他项目相关的一些事实在列表中的某处添加一个项目。例如，“X 服务在 Y 之后的某个时间启动”但您知道 X 不是最后一个运行的服务。有许多这样的小信息摘要，最终列表会弄清楚顺序。刚才我想知道如何输入项目“之后”或“之前”某个其他项目。作为规则的一种形式。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:38:55.550

当然，很大程度上取决于程序的结构。

假设您有一个数据库`service(ID, StartTime)`

```
:- dynamic service/2. 
```

可以使用 立即构建初始列表`setof(StartTime-ID, service(ID, StartTime), List)`，并且可以使用添加元素

```
add_service([ST0-ID0|R], service(ID, ST), [ST-ID, ST0-ID0|R]) :-
   ST < ST0, !.
add_service([E|R], S, [E|T]) :-
   add_service(R, S, T).
add_service([], S, [S]). 
```

使用此数据进行测试

```
service(a, 10).
service(b, 5).
service(c, 20).

?- setof(StartTime-ID, service(ID, StartTime), List), add_service(List, service(z, 12), Updated).
List = [5-b, 10-a, 20-c],
Updated = [5-b, 10-a, 12-z, 20-c]. 
```

# css - Wordpress 自定义 CSS，页面底部的水平滚动条，但为什么呢？

> ID：14926100
> 
> 赞同：0
> 
> 时间：2013-02-17T21:12:02.067
> 
> 标签：css, wordpress, scroll, scrollbar

我注意到[此页面](http://www.shaunhillphotography.co.uk/portraits/)在页面底部显示一个水平滚动条，但我不明白为什么或如何修复它。它也发生在其他页面之一上，但其他页面都没有。

请问有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:23:49.460

据我所知，没有任何东西会破坏子容器的宽度，您可以通过添加来修复`overflow:hidden`它`#container`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:24:37.037

我无法立即看到问题。但是我对快速修复的建议是将其添加到#wrapper。

```
#wrapper{overflow: hidden;} 
```

看起来包装器中的内容比包装器大？看不出来，好像大小一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T21:41:52.480

您正在使用 cufon 将文本动态转换为图像，以显示通常不支持的特殊字体。这是在扩展 div 内的区域。我的建议是不要使用 cufon，而是使用网络支持的字体。或者，您可以通过将溢出更改为隐藏来听取其他人对黑客攻击的看法。

# mysql - MySQL数据库查询，搜索不在数据库中的东西

> ID：14926102
> 
> 赞同：0
> 
> 时间：2013-02-17T21:12:26.603
> 
> 标签：mysql, database

我正在尝试做一些我不确定是否可行的事情，我希望有人能够帮助我。

我目前有一张这样排列的桌子：

request_id | 模块代码 | room_assigned | 年份 | 周 | 天 | 开始周期 | 期间

我想要做的是在上面的表中查询一个 room_assigned，它不等于一年、一周、一天、开始周期、持续时间的表中的结果。

我有一张桌子，里面有所有可能存在的房间。

我正在尝试查找未分配给该时间段的房间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:01:42.313

这取决于输入值的方式。如果您需要查询可用性，您需要根据您的持续时间计算结束时间，以便您可以找到已占用的房间：

SELECT secondtable.room FROM firsttable RIGHT JOIN secondtable ON firsttable.room_assigned = secondtable.rooms WHERE $time_period > firsttable.start_period AND $time_period < $endperiodcaculated

然后，您可以使用代码从第二个表中返回不在结果中的值。或者，使用 SELECT INTO 创建一个临时表，并使用 ...WHERE secondtable.room NOT IN ($valuesfromtemp) 查询值

# php - 识别和删除换行符

> ID：14926106
> 
> 赞同：0
> 
> 时间：2013-02-17T21:12:48.893
> 
> 标签：php, regex, preg-replace, associative-array, str-replace

我正在使用 cURL 和 php 来用 DOM 解析一些 html 内容。然后我将内容作为字符串放入变量中并创建一个数组。

这是我的问题，我有类似的东西

```
Array (
[firstname] => John
[lastname] =>

Doe
[occupation] =>
programmer

[location] => not far away
) 
```

`<br>`我得到了一些不是由html 中的标签引起的换行符。我可以在代码中看到（空白）换行符，但没有标签。

我尝试像`str_replace('\s', '', $firstname)`在将其放入关联数组之前一样使用代码，但它不起作用。我将添加`preg_replace('\s','', $firstname)`返回`NULL`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:15:10.177

str_replace 不接受正则表达式。也许只是在...之后修剪数组

```
$array = array_map( 'trim', $array ); 
```

* * *

如果这不起作用，那么它们不是正常的空间。采用...

```
preg_replace( '~^[\s]+|[\s]+$~', '', $firstname ); 
```

...在添加到数组之前。你忘记了分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:54:17.007

尝试：

```
foreach($array as &$v){
    $v = preg_replace( '/(\n¦\r)+/s', '', $v);
} 
```

# cocoa - 使用 NSApplicationDelegate 时无法让 Apple 的 SimpleScripting 示例正常工作

> ID：14926109
> 
> 赞同：3
> 
> 时间：2013-02-17T21:12:55.720
> 
> 标签：cocoa, properties, applescript, sdef, nsapplication-delegate

我正在尝试编写一个简单的 Objective-C 应用程序：我只想要一个在状态栏中显示一个单词并允许通过 AppleScript 更新该单词的应用程序。老实说，我对 AppleScript 知之甚少，对 Objective-C 也一无所知。但是，这并不难，因为我只花了 2 个小时就获得了一个菜单栏应用程序，该应用程序具有菜单项并响应诸如“退出”之类的核心 AppleScript 命令，所以我已经完成了 95% 的工作。不幸的是，我花了接下来的 6 个小时试图找到一种方法来为这个应用程序提供一个我可以通过 AppleScript 获取和设置的简单属性。

这是我的 .h 代码：

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> {
    NSWindow *window;
    IBOutlet NSMenu *statusMenu;
    NSStatusItem *statusItem;
}
@property (assign) IBOutlet NSWindow *window;
- (NSString*) foobaz;
@end 
```

该`foobaz`方法是我用来尝试创建可读属性的方法（`*window`是 XCode 提供的样板文件的一部分，与手头的问题无关）。这是我的 .sdef 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dictionary SYSTEM "file://localhost/System/Library/DTDs/sdef.dtd">
<dictionary xmlns:xi="http://www.w3.org/2003/XInclude">
  <xi:include
    href="file:///System/Library/ScriptingDefinitions/CocoaStandard.sdef"
    xpointer="xpointer(/dictionary/suite)"/>
  <suite name="StatusMenuApp suite" code="smas"
    description="StatusMenuApp specific classes.">
    <class name="application" code="smaa" inhereits="application"
      description="Application object.">
      <cocoa class="AppDelegate"/>
      <property name="foobaz" code="smas" type="text" access="r"/>
    </class>
  </suite>
</dictionary> 
```

所以我已经像 Apple 的 SimpleScripting 示例一样设置了它：[https ://developer.apple.com/library/mac/#samplecode/SimpleScripting/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/SimpleScripting/Introduction/Intro.html)

但是，我尝试在脚本编辑器中运行它：

```
tell application "StautsMenuApp"
    properties
end tell 
```

而且我只是得到一个核心属性的列表，没有提及`foobaz`任何内容，这与 Apple 的示例不同，其中自定义属性在我运行时出现在核心属性旁边。

我觉得我已经尝试了一百种变体并阅读了一百个示例，但无法使任何工作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T22:54:13.723

您的 SDEF 文件存在许多问题。

1.  虽然这不是主要问题，但在定义您自己的“类型”（`OSType`代码）时，所有小写字母历来都是为 Apple 保留的。所以，你应该做类似`'Smas'`or`'sMas'`但不做的事情`'smas'`。

2.  这可能是网络浏览器中的拼写错误，但您`inhereits`在`<class name="application" code="smaa" inhereits="application"...`. 拼写正确很重要，这样您就可以`application`使用自己的附加属性正确“扩展”基本 AppleScript 类。这可能是您在 AppleScript 编辑器中只看到默认应用程序属性的原因。（虽然单独更正拼写可能会让事情正常进行，但您还应该进行其他更正）。

3.  您试图指定“扩展” `application`AppleScript 类的 Cocoa 类是`AppDelegate`，但这是有问题的，因为`AppDelegate`它不是继承自`NSApplication`Apple 示例 .sdef 中指定的那样，而是继承自 plain-old `NSObject`。

在继续我将如何重写 SDEF 之前，我将回顾一下 Apple 的示例 SDEF 如何将自定义属性添加到默认 AppleScript`application`类的基本思想。AppleScript`application`类对应于`NSApplication`Cocoa 类。当您启动应用程序时，OS X 会创建一个实例`NSApplication`（或其子类，由`NSPrincipalClass`应用程序的 Info.plist 文件中的条目指定）。此实例管理应用程序。在 Cocoa 中，有 2 种可能的方法可以将附加的 AppleScript 属性添加到现有的`NSApplication`类中：1）创建一个`NSApplication`包含附加属性的自定义子类或 2）使用 Objective-C 类别来扩展现有的`NSApplication`按原样上课。（在 Cocoa 中，Objective-C 类别是一种向现有类添加附加功能的方法，而不会带来子类化引入的潜在复杂性）。Apple 的`SimpleScripting`示例使用后一种方法（Objective-C 类别）来添加附加功能。

下面是我将如何重写 SDEF。

SimpleScriptingAppDelegate.sdef：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE dictionary SYSTEM "file://localhost/System/Library/DTDs/sdef.dtd">
<dictionary xmlns:xi="http://www.w3.org/2003/XInclude">
    <xi:include
    href="file:///System/Library/ScriptingDefinitions/CocoaStandard.sdef"
    xpointer="xpointer(/dictionary/suite)"/>
    <suite name="StatusMenuApp suite" code="SSAD"
                 description="StatusMenuApp-specific classes.">
        <class name="application" code="capp" inherits="application"
                                 description="Application object.">
            <cocoa class="NSApplication"/>
            <property name="foobaz" code="Foob"
                description="Description of the foobaz property." type="text">
                <cocoa key="foobaz"/>
            </property>
        </class>
    </suite>
</dictionary> 
```

您会注意到我已经指定我正在创建一个`application`继承自标准 AppleScript类的自定义 AppleScript`application`类。我已经指定这个自定义的 Cocoa 类`application`是`NSApplication`. 我添加了一个自定义 AppleScript 属性，其名称为`foobaz`，类型为`text`. （AppleScript`text`类将对应于 Cocoa`NSString`类）。同样重要的是，我已指定访问此自定义属性的 Cocoa 键是`foobaz`. 这个“Cocoa 键”指定了用于为属性提供值的 Objective-C 方法的名称。`foobaz``foobaz``NSApplication`

为了在 Cocoa 方面实现这一点，我定义了如下所示的`(MDScriptingAdditions)`类别：`NSApplication`

MDNSApplicationScriptingAdditions.h：

```
@interface NSApplication (MDScriptingAdditions)

- (NSString *)foobaz;
- (void)setFoobaz:(NSString *)aFoobaz;

@end 
```

MDNSApplicationScriptingAdditions.m：

```
#import "MDNSApplicationScriptingAdditions.h"
#import "AppDelegate.h"

@implementation NSApplication (MDScriptingAdditions)

- (NSString *)foobaz {
    return [(AppDelegate *)[NSApp delegate] foobaz];
}

- (void)setFoobaz:(NSString *)aFoobaz {
    return [(AppDelegate *)[NSApp delegate] setFoobaz:aFoobaz];
}
@end 
```

您可以看到我基本上将这些方法的处理转发给了`AppDelegate`类，这就是您想要的设置方式。

AppDelegate.h：

```
@interface AppDelegate : NSObject <NSApplicationDelegate> {
    IBOutlet NSWindow                    *window;
    IBOutlet NSTextField                *foobazTextField;

    NSString                            *foobaz;
}
- (NSString *)foobaz;
- (void)setFoobaz:(NSString *)aFoobaz;
@end 
```

`foobaz`此设置允许您通过 AppleScript获取和设置自定义属性。设置该值将导致`foobaz:`文本字段中显示的值更改为您设置的值，如下图所示：

![在此处输入图像描述](../Images/7ceb749f30d2141de3680e4daa325a03.png)

示例项目：[SimpleScriptingAppDelegate.zip](http://www.markdouma.com/developer/SimpleScriptingAppDelegate.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:25:30.757

我唯一看到的是你的 sdef 有问题。此行的代码必须是“capp”。这是标准的，在任何 sdef 文件中都是一样的。它是由 Apple 定义的，所以你需要它。

```
<class name="application" code="smaa" inhereits="application"
      description="Application object."> 
```

在你这样做之后，你会像这样访问那个方法......

```
tell application "StautsMenuApp" to foobaz 
```

# java - 反转相同字符串 [] 中的单词？

> ID：14926111
> 
> 赞同：-4
> 
> 时间：2013-02-17T21:13:02.063
> 
> 标签：java

我在一次采访中被问到这个问题。

如何在java中反转字符串中的单词？示例： String[] s ="Cat sat on sofa" 将变成 s ="sofa on sat cat" 修改相同的 s

我说 ：

公共字符串反向（String[] s）{

```
 String reverse = "";
    for(int i = (s.length -1); i>=0; i--)
    {
    reverse = reverse + s[i] + " ";

    }
    return reverse;
    } 
```

面试官进一步说我不应该使用任何字符串变量，例如 string reverse = ""; 我需要修改相同的输入字符串 [] s = {坐在沙发上的猫}。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:17:05.230

您根本无法修改字符串对象，因为它是**不可变**的。如果您想做就地反转单词之类的操作，最好使用 char 数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:17:15.437

```
public void reverse(String[] s) {  
     if(s == null || s.length <= 1) {  
         return;  
     }  
     String temp = null;
     for(int i = s.length(), j = 0; i > j; i--,j++){  
          temp = result[j];  
          result[j] = result[i];  
          result[i] = temp;    
     }  

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T21:16:57.250

这是我为您提供的链接中的代码。看看这个链接有多种方法可以做到这一点。尽管记住字符串是不可变的，除非您强制转换或使用 char 等，否则您无法真正做到这一点。

```
public String reverse(String s) {
    String reverseStringVariable = "";
    for (int i = s.length() - 1; i != -1; i--) {
        reverseStringVariable += s.charAt(i);
    }
    return reverseStringVariable;
} 
```

[http://www.brilliantsheep.com/3-ways-to-reverse-a-string-in-java/](http://www.brilliantsheep.com/3-ways-to-reverse-a-string-in-java/)

# powershell - 从文本文件中提取变量（powershell）

> ID：14926112
> 
> 赞同：0
> 
> 时间：2013-02-17T21:13:02.020
> 
> 标签：powershell, text-files

我有一个脚本，它生成一个带有可变输入的 UI，并将这些变量放入 .txt 中。我需要能够将部分文本文件调用到另一个脚本中。IE：

文本文件读取用户 ID：用户名

我需要分隔这一行并将“用户名”作为另一个脚本中的变量调用，以便脚本将读取：

```
import-module ActiveDirectory
$id = "username"
$ADLocation = ($id.ParentContainer)
$hoou = "OU=User,OU=Office,OU=win7,DC=company,DC=corp"
get-aduser $id
Move-ADObject -Identity $ADLocation -TargetPath $hoou 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:18:16.067

1.  我无法理解您在这里实际要求的是什么。这个问题对我来说没有多大意义。
2.  将您需要稍后调用的数据存储在 txt 文件中是可以的，但您应该考虑将其存储在 CSV 中。PowerShell 支持使用 Import-Csv 和 Export-Csv 命令导出和导入 CSV 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:17:15.137

您可以将变量作为 PowerShell 变量存储在 .ps1 文件中吗？

```
$userId = "username" 
```

然后你可以简单地点源文件：

```
. C:\path\to\vars.ps1 
```

**更新：**由于您不能使用 PowerShell 格式，您必须解析输入文件。如果用户信息的行看起来像你上面提到的

> 用户ID：用户名

你可以做这样的事情来提取用户名并将其分配给一个变量：

```
$username = Get-Content C:\vars.txt `
              | ? { $_ -match '^\s*UserID:\s*' } `
              | select -First 1 `
              | % { ($_ -split ':\s*', 2)[1] } 
```

# ios - 如何从图像视图中删除选定的图像？

> ID：14926115
> 
> 赞同：1
> 
> 时间：2013-02-17T21:13:49.220
> 
> 标签：ios, cocoa-touch, imageview

在我的应用程序中，我有一种方法 loadImage。
loadImage 方法用于将新图像添加到 imageView 中。

```
-(void)loadimage:(int)index
{
  ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(self.view.frame.size.width*index, 0, self.view.frame.size.width, self.view.frame.size.height-88)]; // -88(Upper+Lower)

  NSString *imageNameStr = [NSString stringWithFormat:@"%@",[arrImages objectAtIndex:index]];
  ImageView.image=[UIImage imageNamed:imageNameStr];

  [ScrollView addSubview:ImageView];
} 
```

添加图像后，我想删除旧图像。
removeImage 方法用于从 imageView 中删除旧图像。

如何创建 removeImages 方法来删​​除选定的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:18:12.200

首先，您需要保留一个图像子视图列表。之后，您可以调用`removeFromSuperview`要从滚动视图中删除的那些。

声明一个 NSMutableArray 来保存 UIImageViews。

首先，将其添加到您的 loadImage 方法的末尾：

```
[arrayOfUIImageViews addObject:ImageView] 
```

然后，要删除索引 0 处的图像，请执行以下操作：

```
[[arrayOfUIImageViews objectAtIndex:0] removeFromSuperview]
[arrayOfUIImageViews removeObjectAtIndex:0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T04:17:14.543

您可以将图像视图设置为零，这是清除它的最简单方法。

```
ImageView.image = nil; 
```

正如您也可以在此答案中指出的那样。 [从 UIImageView 中删除图像](https://stackoverflow.com/questions/1992059/removing-image-from-uiimageview)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T09:43:23.463

您可以输入唯一的标签号来跟踪`UIImageView`您要删除的内容。在你的`loadImage:`方法中：

```
ImageView.tag = index + numberOffset; 
```

`numberOffset`是你知道你不会使用的整数值，这样你就可以避免碰撞

然后，删除图像

```
-(void)removeImage:(int)tagIndex
{
    UIImageView *imgView = (UIImageView *)[ScrollView viewWithTag:tagIndex];
    if (imgView != nil) 
    {
       [imgView removeFromSuperview];
    }
} 
```

通过调用`removeImage:index + numberOffset`

希望有帮助

# php - nginx 和 memcached，将“下载”作为附件返回，而不是 html 内容

> ID：14926119
> 
> 赞同：0
> 
> 时间：2013-02-17T21:14:18.960
> 
> 标签：php, apache, caching, nginx, memcached

我已将 nginx 设置为直接从 memcached 提供 html 内容，但使用我们自己的后端（不是传统设置因此配置）故障转移到 PHP，但是每当在 PHP 中设置要从 memcached 检索的页面时，就会出现 nginx找到它，然后只需下载一个名为“下载”的文件，其中包含看起来像二进制数据的文件。

这是 nginx.conf 文件，它是使用增强型 memcached 模块从源代码构建的。

```
worker_processes  1;

events {
    worker_connections  1024;
}

http {

    include /usr/local/nginx/conf/mime.types;
    default_type application/octet-stream;

    server {
        listen 80;
        server_name localhost;
        location / {
                root /var/www;
                index index.html;
        }
        location ~* \.php$ {
                root /var/www;
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_param PATH_INFO $fastcgi_script_name;
                include fastcgi_params;
        }
    }

    server {
        listen 80;
        server_name mydomain.com;
        access_log /path/to/access/log/access_log;
        error_log /path/to/error/log/error_log;
        root /u1/live/sites/public_html;

        location ~* \.(jpg|png|gif|css|js|swf|flv|ico|html|woff|ttf|svg|htm)$ {
                try_files $uri $uri/ $uri.html @notcached;
        }

        location ~* \.php$ {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_read_timeout 240;
                include fastcgi_params;
        }

        location / {
                set $enhanced_memcached_key "$server_name$request_uri";
                enhanced_memcached_hash_keys_with_md5 on;
                enhanced_memcached_pass memcache.local:11211;
                error_page 404 = @notcached;
        }

        location @memcache {
                set $enhanced_memcached_key "$server_name$request_uri";
                enhanced_memcached_hash_keys_with_md5 on;
                enhanced_memcached_pass memcache.local:11211;
                error_page 404 = @notcached;
        }

        location @notcached {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME /path/to/main/php/file/index.html;
                fastcgi_param PATH_INFO $fastcgi_script_name;
                fastcgi_read_timeout 240;
                include fastcgi_params;
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:21:13.587

其根本原因是 memcached 结果没有自动关联的 mimetype，这意味着它们默认以二进制形式提供。

要修复它，请将以下指令添加到您的 @memcached 位置：

```
default_type text/html; 
```

# ruby-on-rails - Active Admin - 如何在标签前添加自定义脚本？

> ID：14926120
> 
> 赞同：5
> 
> 时间：2013-02-17T21:14:23.500
> 
> 标签：ruby-on-rails, activeadmin

我想对我的活动管理员启用 Rails 应用程序进行一些分析。为此，我需要在我的布局文件中的标记`<script>`之前`<noscript>`粘贴一些代码。`</body>`不幸的是，我不能这样做，因为`application.html`布局文件似乎无效，因为 ActiveAdmin 呈现自己的布局文件。

有没有可以插入自定义 html 代码的钩子/地方？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-23T14:24:47.217

*使用 ActiveAdmin 0.6.0 和 Rails 4.0.5 测试。*

您还可以覆盖活动管理员使用的[arbre](https://github.com/gregbell/arbre)视图来呈现页脚。在您的`active_admin`初始化程序中添加：

```
# config/initializers/active_admin.rb
require 'admin/analytics_footer'

ActiveAdmin.setup do |config|
  config.namespace :admin do |admin|
    config.view_factory.footer = Admin::AnalyticsFooter
  end
end 
```

并定义视图：

```
# lib/admin/analytics_footer.rb
module Admin
  class AnalyticsFooter < ActiveAdmin::Views::Footer
    def build
      super
      render('layouts/analytics')
    end
   end
 end 
```

并将您的 ga 跟踪代码放入`app/views/layouts/_analytics.html.erb`. 服务器重新启动后，代码段应出现在页面末尾的页脚内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:30:32.140

好吧，首先你必须将存储库克隆到你的 Rails 应用程序中，通常你会把它放在供应商目录中，但是 Rails 会抛出这个烦人的警告，它会弃用供应商目录样式的目录，它不会如果您要使用 3.* 版本进行生产，这很重要，因此只需在您的 rails 应用程序中的 vendor 或 lib 目录中执行此操作。

`git clone git://github.com/gregbell/active_admin.git`

现在更改您的`Gemfile`并从您设置的目录中加载 gem

`gem 'activeadmin', :path => 'lib/activeadmin'`

现在您有了*自己*的 activeadmin 版本，因此无论您需要编辑什么，都可以直接从该目录进行编辑，包括更改捆绑的默认布局。

几句忠告：

尽管此方法允许您更多地自定义活动管理员，但您完全意识到要将其更新到较新的版本需要您在`git pull`必要时进行一些 ing 和合并。

我将此方法与 jquery-ui-rails 插件和另一个 gem 一起使用，它工作得很好，而且如果你将你想要的钩子添加到 gem 本身，你可以为 gem 做出贡献。祝你好运！

- - 编辑 - -

正如您在评论中指出的那样，activeadmin 并不能完全按照您的预期工作，但不用担心它仍然很容易解决。在后台，activeadmin 使用了`arbre`由同一个开发人员创建和维护的东西。

`https://github.com/gregbell/arbre`，它只是一个`DOM`ruby​​ 库。

所以你要做的是：

转到您刚刚克隆的 activeadmin 目录中的此文件`lib/active_admin/views/footer.rb`

这是 activeadmin 应用程序的页脚，正如您可以在`build`方法内部看到的那样，您可以将其插入到诸如`add_scripts`方法之类的内容中，然后在下面添加

```
def add_scripts
  script :src => 'http://yoursource.com'
end 
```

我不完全确定`arbre`语法是如何流动的，但应该不难弄清楚。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T00:31:30.103

这对我有用。我在 activeadmin 网站 ( [https://activeadmin.info/10-custom-pages.html](https://activeadmin.info/10-custom-pages.html) ) 上找到了它。

```
# app/admin/calendar.rb
ActiveAdmin.register_page "Calendar" do
  index do
    render partial: 'calendar'
  end
end

# app/views/admin/calendar/_calendar.html.erb
<h1>Hello</h1>
<script>
</script> 
```

# security - 为网络服务器正确设置 /home/user 文件夹的权限

> ID：14926122
> 
> 赞同：0
> 
> 时间：2013-02-17T21:14:44.700
> 
> 标签：security, permissions, centos, public-html

我目前正在设置我自己的运行 CentOs 6 的 Linux 服务器。我已经知道基本命令等，但我对 apache/php 安全性没有太多经验，尽管我对 PHP 本身有很多经验。

因此，为了测试我服务器上的安全性，我编写了一个 PHP 脚本，其作用类似于“导航器”。我可以上一个目录，打开文件等等。

问题是，我的工具允许我上到“/”，我对此不太满意。尽管 Apache 以“无人”身份运行，但它似乎可以访问整个服务器上的每个文件夹和文件。

我试图像 cPanel 那样解决这个问题，但由于我没有 cPanel，所以我不完全知道这是如何完成的。

基本上我有这个：

```
/home/account/public_html
/home/anotherAccount/public_html 
```

我想让“另一个帐户”无法访问“帐户”的文件。实际上我会喜欢它，所以“anotherAccount”甚至不能离开它自己的目录！

是的，我知道你在想：安装 suPHP/fastcgi/suExec，但我不能这样做，因为它们正在吃资源。我知道不安装其中任何一个都是可能的！我将我的脚本上传到了一些专业但不太知名的虚拟主机，我能够进入 / 使用它，但不能进入主目录，除了我自己的。/home/ 列为空！

如何保护我的主文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:59:16.677

您可以使用`open_basedir`php.ini 中的指令将脚本限制在一个目录中，请参阅[文档](http://www.php.net/manual/en/ini.core.php#ini.open-basedir)。

如果您希望不同的站点具有不同的限制，PHP 实例必须具有不同的值`open_basedir`，可以在 apache 中基于每个虚拟主机进行设置。有关更多详细信息，请参阅堆栈溢出中的[此问题](https://stackoverflow.com/questions/2781185/php-a-different-open-basedir-per-each-virtual-host)。

但是，请注意，`open_basedir`这不适用于使用`system()`和朋友执行的外部命令。如果您想避免这种情况，最好继续以不同用户身份运行多个 php-fpm 实例或使用 suPHP。[此问题](https://stackoverflow.com/questions/14980929/php-file-upload-permissions)的答案之一包含有关如何设置所有权和权限以仅允许用户访问自己的文件的说明。

# java - 使用来自 XML 的 mixin 生成 Java 源代码

> ID：14926123
> 
> 赞同：0
> 
> 时间：2013-02-17T21:14:51.437
> 
> 标签：java, xml, templates, mixins

我有一系列描述各种实体类型的 XML 文件。我想使用基于 mixins 的实现将这些 XML 文件转换为 Java 类（源代码，因此我可以检查它们是否编译）。

一个例子：

描述村民的 XML 文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<entity>
    <id>1</id>
    <gathers>
        <rate>12</rate>
    </gathers>
    <moves>
        <speed>4</speed>
    </moves>
</entity> 
```

应该变成以下类：

```
public class Villager implements Gathers, Moves {

    private final Gathers gathers;
    private final Moves moves;

    int getId() {

        return 1;
    }

    @Override
    public int getSpeed() {

        return this.moves.getSpeed();
    }

    @Override
    public int getRate() {

        return this.gathers.getRate();
    }

    public Villager() {

        super();

        this.moves = new MovesMixin(4);
        this.gathers = new GathersMixin(12);
    }
} 
```

我希望以一种易于扩展以涵盖新属性的方式来执行此操作。

是否有现有的包/工具可以做这样的事情？

* * *

带有模板的更新示例：

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:transform version="1.0"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text"/> 
<xsl:template match="entity">
/*
 * DO NOT MODIFY
 * This is an automatically generated class.  
 */
package xslt.entities;

import xslt.*;

public strictfp final class <xsl:value-of select="typeName"/> implements <xsl:apply-templates select="moves" mode="implement"/><xsl:apply-templates select="gathers" mode="implement"/><xsl:apply-templates select="shoots" mode="implement"/>Entity {
    <xsl:apply-templates select="moves" mode="mixin"/>
    <xsl:apply-templates select="gathers" mode="mixin"/>
    <xsl:apply-templates select="shoots" mode="mixin"/>
    public <xsl:value-of select="typeName"/>() {

        super();
    }
}
</xsl:template>

<xsl:template match="moves" mode="implement">Moves, </xsl:template>

<xsl:template match="gathers" mode="implement">Gathers, </xsl:template>

<xsl:template match="shoots" mode="implement">Shoots, </xsl:template>

<xsl:template match="moves" mode="mixin">
    private final Moves moves = new MovesMixin(<xsl:value-of select="speed"/>);

    @Override
    public int getSpeed() {

        return this.moves.getSpeed();
    }
</xsl:template>

<xsl:template match="gathers" mode="mixin">
    private final Gathers gathers = new GathersMixin(<xsl:value-of select="rate"/>);

    @Override
    public int getRate() {

        return this.gathers.getRate();
    }
</xsl:template>

<xsl:template match="shoots" mode="mixin">
    private final Shoots shoots = new ShootsMixin(<xsl:value-of select="range"/>);

    @Override
    public int getRange() {

        return this.shoots.getRange();
    }
</xsl:template>

</xsl:transform> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:27:40.443

看看 AspectJ 的 Inter-type Declarations，它基本上允许您将在一个方面中定义的新成员（字段、方法、构造函数）添加到现有类型。

[http://www.eclipse.org/aspectj/doc/next/progguide/language-interType.html](http://www.eclipse.org/aspectj/doc/next/progguide/language-interType.html)

它不是可以理解您的 XML 描述符的东西，但肯定是一种在 java 中实现 mixin 的方法，所以也许您可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:32:20.173

从 XML 生成 java 的方法有很多。我这里的示例使用从 ANT 调用的 XSLT。

# 例子

```
├── build.xml
└── src
    ├── xml
    │   └── entity.xml
    └── xsl
        └── java.xsl 
```

## 构建.xml

```
<project name="Generate Java" default="generate">

    <target name="generate">
        <xslt style="src/xsl/java.xsl" basedir="src/xml" destdir="build/java" extension=".java"/>
    </target>

    <target name="clean">
        <delete dir="build"/>
    </target>
</project> 
```

## java.xsl

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                >

<xsl:output method="text"/> 

<!-- 
==============================
Match the root tag 
==============================
-->
<xsl:template match="entity">
public class Villager implements Gathers, Moves {

    private final Gathers gathers;
    private final Moves moves;

    int getId() {

        return <xsl:value-of select="id"/>;
    }

    @Override
    public int getSpeed() {

        return this.moves.getSpeed();
    }

    @Override
    public int getRate() {

        return this.gathers.getRate();
    }

    public Villager() {

        super();

        this.moves = new MovesMixin(<xsl:value-of select="moves/speed"/>);
        this.gathers = new GathersMixin(<xsl:value-of select="gathers/rate"/>);
    }
}
</xsl:template>

</xsl:stylesheet> 
```

# 更新

以下样式表增强演示了如何根据输入 XML 使源代码生成更加动态。

笔记：

*   生成的 Java 包含语法错误，抱歉，它几乎完成了。

## java.xsl

```
<?xml version="1.0" encoding="UTF-8" ?>
<xsl:stylesheet version="1.0"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                >

<xsl:output method="text"/> 

<!-- 
==============================
Match the root tag 
==============================
-->
<xsl:template match="entity">
public class Villager implements <xsl:apply-templates select="gathers|moves" mode="class-implements"/> {

    private final Gathers gathers;
    private final Moves moves;

    int getId() {

        return <xsl:value-of select="id"/>;
    }

    <xsl:apply-templates select="gathers|moves" mode="class-getters"/>

    public Villager() {

        super();

        <xsl:apply-templates select="gathers|moves" mode="mixins"/>
    }
}
</xsl:template>

<!-- 
==============================
Match the gather tag 
==============================
-->
<xsl:template match="gathers" mode="class-implements">
    <xsl:text>Gathers,</xsl:text>
</xsl:template>

<xsl:template match="gathers" mode="class-getters">
    @Override
    public int getRate() {

        return this.gathers.getRate();
    }
</xsl:template>

<xsl:template match="gathers" mode="mixins">
        this.gathers = new GathersMixin(<xsl:value-of select="rate"/>);
</xsl:template>

<!-- 
==============================
Match the gather tag 
==============================
-->
<xsl:template match="moves" mode="class-implements">
    <xsl:text>Moves,</xsl:text>
</xsl:template>

<xsl:template match="moves" mode="class-getters">
    @Override
    public int getSpeed() {

        return this.moves.getSpeed();
    }
</xsl:template>

<xsl:template match="moves" mode="mixins">
        this.moves = new MovesMixin(<xsl:value-of select="speed"/>);
</xsl:template>

</xsl:stylesheet> 
```

# c++ - Qt/embedded 中的手动事件处理（不使用 QApplication:exec() ）

> ID：14926130
> 
> 赞同：0
> 
> 时间：2013-02-17T21:15:26.263
> 
> 标签：c++, c, linux, qt4, linux-kernel

我正在编写一个 Qt/嵌入式 GUI 应用程序。但是应该避免调用**exec()**，因为我不想只在 QWS（Qt 窗口系统）上离开事件处理的责任。如果可以的话，这对我来说是有利的必要时手动调用事件处理程序（例如**processEvents**）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:32:58.363

听起来这就是你想要的，从[这里](http://www.informit.com/articles/article.aspx?p=1405544&seqNum=2)：

> 我们可以继承 QApplication 并重新实现 notify()。
> 
> Qt 调用 QApplication::notify() 来发送一个事件。在任何事件过滤器有机会查看它们之前，重新实现此函数是获取所有事件的唯一方法。事件过滤器通常更有用，因为可以有任意数量的并发事件过滤器，但只有一个 notify() 函数。

然后我想你可以在事件进入时缓冲它们，并`QApplication`创建一个类似自定义`processEvents`的函数的子类，以便在你想要的时候将它们发送出去。但正如其他人所指出的，目前还不清楚为什么要覆盖 QWS。

# mysql - 在它自己的 WHERE 语句中使用来自 SELECT 语句的表数据，使用同一个表的数据

> ID：14926133
> 
> 赞同：0
> 
> 时间：2013-02-17T21:15:39.973
> 
> 标签：mysql, sql

对不起，令人困惑的标题。可悲的是，文字更加混乱。

基本上，我有一个将数据从一个表导入到另一个表的 SQL 脚本，并且我试图忽略某些行。

第一个表记录每个“事件”三行，我只想要其中一个。我想忽略的事件是两个*几乎*重复的事件，但一列是 0 而不是 1，以及时间，可能会有所不同。我给它一个 20 秒的限制，让它仍然匹配。

这是我到目前为止所拥有的：

```
INSERT INTO prism_actions (action_time, action_type, player, world, x, y, z, data)
  SELECT FROM_UNIXTIME(`co_blocks`.time), 
    'block-shift', 
    'Piston', 
    CASE WHEN `co_blocks`.wid = 1 THEN 'world' ELSE (CASE WHEN `co_blocks`.wid = 2 THEN 'world_nether' ELSE 'world_the_end' END) END, 
    SUBSTRING_INDEX( `co_blocks`.bcords , '.', 1 ), -- This will get the X coordinate of this action
    SUBSTRING_INDEX(SUBSTRING_INDEX( `co_blocks`.bcords , '.', 2 ),'.', -1), -- Y coordinate
    SUBSTRING_INDEX(SUBSTRING_INDEX( `co_blocks`.bcords , '.', 3 ),'.', -1), -- Z
    CONCAT("{\"block_id\":", `co_blocks`.type, ",\"block_data\":", `co_blocks`.data, "}")
  FROM `co_blocks`
  WHERE `co_blocks`.user LIKE '#piston' 
    AND `co_blocks`.action = 1 
    AND NOT (EXISTS(
      SELECT `id` FROM `co_blocks` WHERE user LIKE '#piston' AND action = 0 AND time < (`co_blocks`.time + 20) AND time > (`co_blocks`.time - 20) AND `co_blocks`.bcords LIKE bcords))
  ORDER BY id ASC; 
```

`EXISTS()`声明中的内容`WHERE`是我试图检查是否有几乎重复的记录。

我的问题是，我正在使用`co_blocks`.time 检查第一个`SELECT`列的时间。我不知道它会使用第一个`SELECT`时间还是第二个时间。

```
SELECT `id` 
FROM `co_blocks` 
WHERE user LIKE '#piston' 
AND action = 0 
AND time < (`co_blocks`.time + 20) 
AND time > (`co_blocks`.time - 20) 
AND `co_blocks`.bcords LIKE bcords 
```

它使用相同的表名。**我将如何使用第一个`SELECT`的数据签`WHERE`入第二个`SELECT`？**

**编辑：** 这是我开始的一些示例数据：

```
+------+------+------+------------+---------+------------+------+------+--------+------+------+
| id   | cx   | cz   | time       | user    | bcords     | type | data | action | rb   | wid  |
+------+------+------+------------+---------+------------+------+------+--------+------+------+
| 2147 |   22 |   17 | 1361130494 | #piston | 359.67.276 |    3 |    0 |      1 |    0 |    1 |
| 2148 |   22 |   17 | 1361130494 | #piston | 359.67.276 |    3 |    0 |      0 |    0 |    1 |
| 2149 |   22 |   17 | 1361130494 | #piston | 358.67.276 |    3 |    0 |      1 |    0 |    1 | 
```

我只想从最后一行导入数据（bcords 不同，action=1）

**编辑2：**

我应该对此提供更多背景信息。我正在尝试从一个表中获取数据`co_blocks`，并将其放入另一个表中，`prism_actions`。使用此操作的程序`prism_actions`仅使用一行，而使用的程序`co_blocks`使用 3。我只是想从中获取正确的操作`co_blocks`并将其放入`prism_actions`。

**编辑 3：**

这是我遇到问题的另一个例子，希望它能让它更容易理解。在我的表中有值，我希望有两个语句将每个表中的信息相互比较。

```
UPDATE co_pistons
    SET x = (SELECT SUBSTRING_INDEX( bcords , '.', 1 ) FROM `co_pistons` WHERE 
    `co_pistons`.bcords LIKE bcords
    LIMIT 1)
    WHERE NOT isFrom; 
```

在第 3 行，`co_pistons`.bcords 和 .bcords`bcords`指的是同一件事。我希望`co_pistons`.bcords 指代`UPDATE`的 bcords，所以我可以将它们相互比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:54:28.327

~~作为解决方案，我最终创建了一个单独的表，并添加了我需要使用的所有数据。然后，我可以将子查询中的表数据与主查询的数据进行比较。我不确定这是否太高效，但对于我的脚本来说它对我来说很好，因为脚本只运行一次。如果有人有任何更好的想法会很棒，但否则这对我有用。~~

**编辑**

我的问题实际上是我不知道如何使用`AS`不同的方式命名表。这导致我在查询中使用了两个同名的表，这最终让我感到困惑。解决方案是用昵称命名表：

```
FROM `co_blocks` as c1
...
SELECT `co_blocks` as c2 WHERE c1.bcords = c2.bcords 
```

我想，以前的解决方案是可行的，但这绝对不是最好的方法。

# spring - java.lang.AbstractMethodError: oracle.jdbc.driver.T4CPreparedStatement.setCharacterStream(ILjava/io/Reader;J)V

> ID：14926134
> 
> 赞同：8
> 
> 时间：2013-02-17T21:15:47.117
> 
> 标签：spring, hibernate, oracle10g, clob

尝试将 CKEditor（用于 CMS - 内容管理系统）的内容插入 Oracle 数据库 - **Oracle 10g**时出现以下异常。

Oracle 表中的字段是 clob 类型的。

> java.lang.AbstractMethodError: oracle.jdbc.driver.T4CPreparedStatement.setCharacterStream(ILjava/io/Reader;J)V

相反的一面是，当我尝试使用 JSON 通过 AJAX 将相同的内容插入数据库时​​，不会导致此异常。

我在用着

*   春天 3.2.0
*   休眠 4.2.0.CR1
*   Oracle JDBC 驱动程序版本 - 10.2.0.5.0
*   JDK - 1.7
*   甲骨文 10g

自从我将 Hibernate 从 3.2.5 更改为 4.2.0.CR1 以来，异常一直在引起

[这个](http://www.herongyang.com/JDBC/Oracle-CLOB-setCharacterStream.html)链接说

> setCharacterStream() 方法有 3 个版本，其中两个是作为 JDBC 4.0 (Java 1.6) 的一部分添加的。您的 JDBC 驱动程序可能不支持它们：

[此](https://stackoverflow.com/a/1195431/1037210)答案建议升级 JDBC 驱动程序，但该问题是关于我尚未使用的 Oracle 11g。

我不太确定。JDBC 11.x 驱动程序是否与 Oracle 10g 兼容？曾几何时，我试过一个，但它不能正常工作。

如何解决这个异常？

* * *

**编辑：**

我刚刚[下载](http://wiki.eeng.dcu.ie/ee557/589-EE/version/2/part/5/data/ojdbc6.jar?branch=main&language=default) 了`ojdbc6.jar`包含.`ojdbc14.jar``Oracle JDBC Driver version - "11.1.0.7.0-Production"`

异常异常消失了。请告诉我，如果此驱动程序版本与**Oracle 10g**完美兼容。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T03:59:34.377

> 我不太确定。JDBC 11.x 驱动程序是否与 Oracle 10g 兼容？曾几何时，我试过一个，但它不能正常工作。

如 Oracle JDBC 驱动程序 11g 文档[http://docs.oracle.com/cd/E11882_01/java.112/e16548/getsta.htm所述](http://docs.oracle.com/cd/E11882_01/java.112/e16548/getsta.htm)

> 向后兼容性
> 
> JDBC 驱动程序经认证可与当前支持的 Oracle 数据库版本一起使用。例如，Oracle 数据库 11g 第 2 版 (11.2) 中的 JDBC 瘦驱动程序经认证可与 10.2.x、10.1.x、9.2.x 和 9.0.1.x 版本的 Oracle 数据库一起使用。但是，它们未经认证可与旧的、不受支持的数据库版本（例如 8.0.x 和 7.x）一起使用。

# java - 将数据从 Oracle 插入 Java 对象

> ID：14926141
> 
> 赞同：-3
> 
> 时间：2013-02-17T21:15:57.993
> 
> 标签：java, oracle

我有这两个列表，用于将设置存储为键和值：

```
SETTINGNAME VARCHAR2(40 BYTE)
SETTINGVALUE    VARCHAR2(40 BYTE) 
```

我有这个 Java 对象，我想用它来存储 Oracle 表中的值：

```
public class DataObj {

        private String sessionTTL;
        private int maxUsersActive;
        private String timestampFormat;
        private int initState;
        private String logFileName;
        private String logDirectory;
        private int logBufferSize;
        private String logLevel;
.......
} 
```

问题是如何将表中的值插入到 Java 对象中。我总是有固定数量的返回值。在这种情况下，我如何将值插入到对象中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:21:43.090

你的问题相当广泛。您可以使用 JDBC 查询数据库，然后手动将值放入对象中。这是相当低的水平。或者，您可以使用像 DataNucleus 这样的 ORM 并让 ORM 查询数据库并为您填充 Java 对象。这是更高层次的。

# java - Class.forname 异常

> ID：14926144
> 
> 赞同：0
> 
> 时间：2013-02-17T21:16:35.823
> 
> 标签：java, junit, classpath

我正在尝试以这种方式运行junit测试：

我有这些文件：

./tested/Resta.java
./tested/Suma.class
./tested/Suma.java
./tested/Resta.class
./test/TestResta.class
./test/TestSuma.java
./test/TestSuma.class
. /test/TestResta.java
./Spumevaluador.class
./Spumevaluador.java

当我运行 Spumevaluador (java -cp /home/minyatur/.netbeans/7.2/modules/ext/junit-4.10.jar:.Spumevaluador) 我得到这个错误：

minyatur@orome:~/codigo$ ./ejecuta.sh Hola 线程“main”中的异常 java.lang.NoClassDefFoundError: test/TestSuma (wrong name: TestSuma) at java.lang.ClassLoader.defineClass1(Native Method) at java. lang.ClassLoader.defineClass(ClassLoader.java:787) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:447) at java.net.URLClassLoader.access $100(URLClassLoader.java:71) at java.net.URLClassLoader$1.run(URLClassLoader.java:361) at java.net.URLClassLoader$1.run(URLClassLoader.java:355) at java.security.AccessController.doPrivileged(Native方法）在 java.net.URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:423) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:356) 在 java.lang.Class.forName0(Native Method) 在 java.lang.Class.forName(Class.java:188) 在 Spumevaluador.main (Spumevaluador.java:45)

Spumevaluador.java 代码：

```
import org.junit.runner.JUnitCore;
import java.util.Iterator;
import org.junit.internal.TextListener;
import org.junit.runner.Computer;
import org.junit.runner.Request;
import org.junit.runner.Result;
import org.junit.runner.notification.Failure;
import java.util.ArrayList;

public class Spumevaluador {

    public static void main(String[] args) throws ClassNotFoundException {

    System.out.println("Hola");
        ArrayList clases = new ArrayList();
        clases.add("test.TestSuma");
        clases.add("test.TestResta");        
        Class<?>[] cClases = new Class<?>[clases.size()];
        for (int i = 0; i < clases.size(); i++) {
            cClases[i] = Class.forName(clases.get(i).toString());
        }
        Request req = Request.classes(cClases);
        JUnitCore jUnitCore = new JUnitCore();
        jUnitCore.addListener(new TextListener(System.out));
        jUnitCore.run(req);
    }
} 
```

如果我更改 Class.forname("TestSuma"); ，似乎对 Class.forname 的调用没有找到 test.TestSuma；并在类路径中包含 ../test 它工作正常。

为什么？有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:20:21.137

基本上，当您运行`Class.forName("test.TestSuma")`它时，它会尝试加载一个`TestSuma`名为`test`. 它正在`TestSuma.class`一个名为`test`.

它*找到*了文件 - 但它加载的类*实际上是*在默认包中调用`TestSuma`的......所以它失败了。

目前还不清楚您要*实现*什么，但您应该将类​​文件保存在与包结构匹配的结构中，并且只尝试使用其*正确的*完全限定类名加载文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:25:41.213

听起来您的 TestSuma 类是在默认包而不是测试包中定义的。尝试添加：

```
package test; 
```

到 TestSuma.java 文件的顶部。

Java 类路径包含 Java 可以找到包层次结构根的位置。如果测试包中有一个类，则需要将包含“测试”子目录的目录放在类路径中，而不是测试子目录本身。

# asp.net - 如何仅在部分网站上实施 HTTPS？

> ID：14926145
> 
> 赞同：3
> 
> 时间：2013-02-17T21:16:42.167
> 
> 标签：asp.net, security, ssl, https

我想知道，如何在网站的一部分上实现 HTTPS？比方说，我想创建网上商店。我希望能够在没有 HTTPS 的情况下浏览所有项目（它更快吧？）。当我想付款时，我想使用 HTTPS。正如我在其他文章中所读到的，当 IIS 配置为使用 HTTPS 时，该配置适用于整个站点:(

PS另一个问题。如果我希望商店只对已有帐户的用户开放（这意味着用户必须登录才能进入商店）怎么办？然后用户将商品添加到购物篮，然后转到付款页面（使用 HTTPS）。他们是否必须有另一个专门用于结帐的帐户并在 HTTPS 页面中登录？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:25:22.870

对整个网站使用 HTTPS 并没有错——事实上，这是鼓励的。早在 1990 年代，当计算机硬件还没有今天那么强大时，对所有请求使用 HTTPS 会带来性能下降，但现在不使用全站点 HTTPS 的唯一原因是你买不起 20 美元的证书费用:)

无论如何，你读过的文章是对的。HTTPS*支持*只能在每个网站的基础上启用，但是您不需要对整个网站强制使用 HTTPS：这由 IIS 中的“需要 SSL/TLS”复选框控制。如果您未选中该复选框，那么用户仍然可以使用非安全 HTTP 浏览该站点。当涉及到结帐页面时，您可以在您的 ASP.NET 代码中实现“需要 SSL/TLS”功能（检查`Request.IsSecureConnection`属性），例如通过重定向到您网站的安全版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:42:45.123

有一个不错的模块可以帮助您[在 asp.net 中自动从 http 切换到 https](http://www.codeproject.com/Articles/7206/Switching-Between-HTTP-and-HTTPS-Automatically-Ver)

我建议对所有与敏感数据无关的页面使用 http，在有敏感数据的页面上只使用 https。

主要原因是，如果一切都从 https 传递，包括图像，则传输的数据会更多，并且加密和解密它们的时间会增加显示页面的总时间 - 所以你可以避免额外的延迟和计算. 毕竟，所有主要网站都这样做（amazon、ebay、zazzle、cafepress、Endless、Crate 和 Brrel 等）。他们知道的更多——你不觉得吗？

相对答案：[准备我的 ASP.NET / MVC 站点以使用 SSL？](https://stackoverflow.com/questions/9581582/preparing-my-asp-net-mvc-site-to-use-ssl/9581782#9581782)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T05:26:42.713

有人告诉我，如果你想实施 HTTPS，这取决于你希望你的网站如何安全。那里有 SSL 证书，可以以便宜的价格购买，但安全性可能会受到限制。高安全性，当然它确实很昂贵，但安全性很高。我相信，如果您想让您的网站尽可能安全，请考虑您可以负担得起的合理价格以确保您的网站安全。希望这个链接会有所帮助。

[10个最便宜的SSL证书](http://webdesign.about.com/od/ssl/tp/cheapest-ssl-certificates.01.htm)

# java - java枚举用法获取和设置

> ID：14926148
> 
> 赞同：-5
> 
> 时间：2013-02-17T21:17:03.673
> 
> 标签：java, enums

我在这里试图在类对象中获取和设置一个枚举，但不知道该怎么做。这就是我到目前为止所拥有的。我已经查阅了所有可能的例子，有些例子似乎太复杂了，我无法理解。请问有什么帮助吗？

```
public class EnumExample {

public static class Task {

    private String _task;

    public enum Priority {

        ZERO (0), MAYBE (1), LOW (2), MEDIUM (3), HIGH (4), EXTREME (5);

        private int _priority;

        Priority() {
            _priority = 0;
            // Does this set set the default priority level to 0??
        }

        Priority(int priority) {
            _priority = priority;
            // This is where I can set the priority level of this task??
        }

        public int getPriority() {
            return _priority;
        }

        public void setPriority(int priority) {
            _priority = priority;
        }
    }
}

public static void main(String[] args) {

    Task task = new Task();
    task._task = "Study for test";
    System.out.println(task._task);
    System.out.println(task.getPriority());

    // How do I set the priority level for task "study for test"??
    // task.Priority = task.Priority.EXTREME;

    // How do I retrieve the value of priority??
    // System.out.println(task._task.getPriority());

} 
```

}

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T21:24:54.507

您可以使用`ordinal()`枚举的方法来获取它的位置。然后，您可以使用它来获取值优先级。

```
public class Task {

    private Priority priority = Priority.ZERO; // Default priority
    private String name = "";

    public enum Priority {
        ZERO, MAYBE, LOW, MEDIUM, HIGH, EXTREME;
    }

    public Task(String name) {
        this.name = name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
       return name;
    }

    public void setPriority(Priority p) {
        this.priority = p;
    }

    public Priority getPriority() {
        return priority
    }

    public static void main(String[] args) {
        Task t = new Task("Washing up");
        t.setPriority(Priority.HIGH);
        System.out.println(t.getName()); // Washing up
        System.out.println(t.getPriority().toString()); // This gets the string of HIGH
        System.out.println(t.getPriority().ordinal()); // this gives 4
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:22:22.520

你已经在你的类中定义了一个名为 Priority 的枚举类型，但是为了让你的任务有一个优先级，你必须在你的类中有一个 Priority 类型的成员变量：

```
public static class Task {

    private String task;

    private Priority priority; 
```

然后，您只需通过设置成员来使用您的任务，例如使用 setter 方法：

```
 public Priority getPriority() {
        return priority;
    }

    public Priority setPriority(Priority priority) {
        this.priority = priority;
    } 
```

然后在你的主要方法中：

```
 task.setPriority(Priority.LOW); 
```

关于枚举中的 getter/setter，由于 Priority 类型的语义是表示某个固定优先级，因此您不应该有 setter。您可能还可以摆脱变量本身（因此也摆脱了 getter），因为枚举本身很好地代表了任务的优先级（并且枚举默认情况下已经有一个序数）。

因此枚举声明可以很简单：

```
public enum Priority {
        ZERO, MAYBE, LOW, MEDIUM, HIGH, EXTREME;
} 
```

注意：按照标准 Java 代码样式，您不应该将下划线作为成员的开头。改用驼峰式。

# c# - Viewbox 控件和拖放

> ID：14926149
> 
> 赞同：1
> 
> 时间：2013-02-17T21:17:04.297
> 
> 标签：c#, windows-8, winrt-xaml, viewbox

在 win8 rt 上使用 XAML Viewbox 控件时，对于不同的屏幕尺寸（分辨率），控件会自动缩放

e.Delta.Translation 偏离正确的 X、Y 位置。在拖放操作中拖动控件越远，位置漂移得越远。

**XAML**

```
<Viewbox x:Name="viewbox" StretchDirection="Both" Stretch="Uniform"  >
  <Canvas x:Name="canvas" Style="{StaticResource LayoutRootStyle}" Width="1366" Height="768">
    <Image x:Name="test" ManipulationDelta="test_ManipulationDelta" ManipulationMode="All" ></Image>
     </Canvas>
</Viewbox> 
```

**C＃**

```
void test_ManipulationDelta(object sender, ManipulationDeltaRoutedEventArgs e) {
      var dragableItem = sender as Image;
      var translateTransform = dragableItem.RenderTransform as TranslateTransform;
      translateTransform.X += e.Delta.Translation.X;
      translateTransform.Y += e.Delta.Translation.Y; 

    } 
```

任何想法如何为此获得准确的位置/修复？

# c# - 序列化的 JSON 字符串未按预期反序列化（日期时间）

> ID：14926151
> 
> 赞同：0
> 
> 时间：2013-02-17T21:17:07.293
> 
> 标签：c#, asp.net-mvc, json

我有一个序列化为这样的 JSON 字符串：（在 VSTO automatio APP 中）

```
string miPublicacionStr = JsonConvert.SerializeObject(miPublicacion).ToString();

{"IdPublicacion":0.0,"FechaPublicacion":"0001-01-01T00:00:00","IdUsuario":"juanp","FechaPublicacionHasta":"2013-02-17T00:00:00-05:00","FechaArchivoHasta":"2013-02-17T00:00:00-05:00","Suscriptores_IdSuscriptor":1,"IdTipoPublicacion":1.0} 
```

然后我把它发送到一个网站，它就这样到达我的动作控制器

```
{"IdPublicacion":0.0,"FechaPublicacion":"0001-01-01T00:00:00","IdUsuario":"juanp","FechaPublicacionHasta":"2013-02-17T00:00:00-05:00","FechaArchivoHasta":"2013-02-17T00:00:00-05:00","Suscriptores_IdSuscriptor":1,"IdTipoPublicacion":1.0} 
```

它们之间没有区别。但是当尝试在我的网站上反序列化时：

```
Publicacion miPublicacion = JsonConvert.DeserializeObject<Publicacion>(miPublicacionJsonString); 
```

它抛出一条`FormatException`消息“字符串格式错误”

这是必须映射的对象：

```
public partial class Publicacion
{
    public decimal IdPublicacion { get; set; }
    public System.DateTime FechaPublicacion { get; set; }
    public string IdUsuario { get; set; }
    public System.DateTime FechaPublicacionHasta { get; set; }
    public System.DateTime FechaArchivoHasta { get; set; }
    public int Suscriptores_IdSuscriptor { get; set; }
    public decimal IdTipoPublicacion { get; set; }
} 
```

我能做些什么来避免这个问题？

# html - 如何停止 IE 滚动*隐藏*溢出内容

> ID：14926154
> 
> 赞同：0
> 
> 时间：2013-02-17T21:17:15.217
> 
> 标签：html, css

我有一些内容作为较大布局的一部分溢出，通常比页面宽。溢出的内容被其中一个容器剪切，这很好，除了在 IE9 中单击剪切容器并使用基于鼠标的水平滚动（想想触摸板、超导航、强大的鼠标）会导致容器中的所有内容滚动直到剪辑内容的边缘可见。我需要防止这种行为，同时仍然允许那些鼠标滚动外部容器。在我看来，在该元素上捕获滚动事件并将它们传递给其父元素会很好，但我还没有弄清楚如何让 jQuery 做到这一点。如果有人能想到非 JS 的解决方案，那也很酷。

更新：一些探测揭示了以下内容：由于不同的 HID 以不同的方式发送滚动事件（我在看你突触），唯一会始终被触发的事件是滚动事件。滚动事件没有冒泡阶段，不能取消。此外，简单地将滚动设置为 0 作为滚动处理程序的一部分的结果很差。这有效地排除了适用于大多数能够生成横向滚动输入的设备的所有 javascript 解决方案。我的下一个攻击过程是通过点击事件。点击确实会冒泡，并且要发生不希望的行为，必须首先单击有问题的溢出：隐藏的 div。如果我可以阻止焦点，那么它将永远不会成为滚动事件的目标。真正的诀窍是让链接继续工作。

演示该问题的小提琴是 [http://jsfiddle.net/conartist6/tnmT3/6/](http://jsfiddle.net/conartist6/tnmT3/6/)

HTML：

```
<div class="outer"><div class="ctnr"><div>Click in here and scroll r/l with wheel or midclick+drag. IE9 moves content, Chrome/FF do not.<div>The quick brown fox jumped over the lazy dog</div></div></div>
    <div style="width: 700px;">This should still scroll normally blah blah blah blah blah blah blah blah blah lajsof ijwjlk jdslf kjojfoj jjslfj sljfoi jdfoiaj ;lsajoi fejogro lfffos joidjgoe wqqqq</div></div> 
```

CSS：

```
.outer
{
    width: 500px;
    overflow-x: scroll;
}
.ctnr{
    width: 300px;
    background-color: violet;
    overflow: hidden;
}
.ctnr > div
{
    position: relative;
    width: 200px;
    height: 200px;
    background-color: lightsteelblue;
}

.ctnr>div>div
{
    position: absolute;
    left:0;
    bottom: 0;
    width:400px;
    background-color: salmon;
    overflow: hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:22:48.923

如果我正确理解了这个问题，这应该是您正在寻找的答案：

*使用您不想滚动的容器的 id。

```
//Firefox uses a different event that is **not cancelable** for mousewheel, of course there is a work around
//Since you only need IE though, here it is:
$('#divID').on('mousewheel', function(event) { //for all browsers except Firefox
  event.preventDefault();
}); 
```

注意：我使用触摸板，所以我无法对此进行测试，但我很确定它会起作用，只需确保您只针对要阻止默认操作的 div（使用 id 标签）。

[为了将来的参考， Dottoro Web Reference](http://help.dottoro.com/)是查找 DOM 元素、事件和其他 DOM 架构以及兼容性的绝佳网站。

请注意，滚动事件是不可取消的，请参见[此处](http://help.dottoro.com/ljurkcpe.php)；但是，鼠标滚轮事件是......所以[在这里](http://help.dottoro.com/ljmracjb.php)

# mysql - 从其中一个表中删除记录时如何保持两个表的数据一致？

> ID：14926156
> 
> 赞同：0
> 
> 时间：2013-02-17T21:17:39.833
> 
> 标签：mysql, database, database-design, foreign-keys

说，我有两张桌子：`students`和`course_scores`.

中的属性`students`是`student_id, name, sex`；

而其中的属性`course_scores`是`student_id, course, score`.

当我从 中删除记录时`students`，相应的记录`course_scores`也应该被删除，对吗？使它们保持一致。

你能告诉我这样做的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:44:42.123

```
ALTER TABLE course_scores ADD FOREIGN KEY (student_id) REFERENCES
    students (student_id) ON DELETE CASCADE 
```

这`ON DELETE CASCADE`部分是你想要的；`course_scores`如果相应的行被删除，这将删除所有行`student_id`。您的表必须使用`InnoDB`引擎。

# c# - 禁止直接方法调用

> ID：14926159
> 
> 赞同：0
> 
> 时间：2013-02-17T21:18:06.610
> 
> 标签：c#, security, methods

我的业务层具有从某些 BusinessBase 继承的类。主要的类似 CRUD 的方法有一个自定义的 RequiresPermission(activityId) 属性。这些方法是从自定义 WCF 服务调用的，因此我可以在那里检查用户权限，如果用户没有执行操作的权限或调用的方法没有设置 RequiresPermission 属性，则抛出异常。这对我团队中的其他程序员来说是完全透明的——如果他们忘记分配权限，方法调用就会失败。

问题是一个业务类可能直接调用某个方法（甚至可能来自其他业务类）。如果没有设置 RequiresPermission 属性或者当前经过身份验证的用户无法使用带有 activityId 的操作，我想禁止执行任何方法。

由于一些懒惰的程序员忘记在方法内部调用安全检查，我有什么办法可以强制执行这些检查以避免安全漏洞？

# c# - 如何根据 g-score 校正路径？

> ID：14926161
> 
> 赞同：2
> 
> 时间：2013-02-17T21:18:15.280
> 
> 标签：c#, algorithm, artificial-intelligence, a-star

我构建了 A* 引擎，用于在具有方形节点的网格中找到最佳路径。每个节点有八个可能的连接到其他节点（上、下、左、右、topLeft、topRight、downLeft、downRight）。

我在根据节点的 g 分数更正路径时遇到问题。当我发现当前节点的连接节点（相邻节点）时，必须进行此更正，并且对于已经在打开列表中但不在关闭列表中或不可行走的每个相邻节点，我需要做一些事情来检查该节点是否更适合路径使用g-score 做出决定。问题是我不知道该怎么做。

我有简单的代码，可以在其中发现相邻节点：

```
private ArrayList discoverChildren(Node parent) {
    ArrayList discoveredNodes = new ArrayList();
    if (parent.upNode != null && 
        parent.upNode.isWalkable &&
        !closedList.Contains(parent.upNode)) {
        if (!openList.Contains(parent.upNode)) {
            openList.Add(parent.upNode);
            parent.upNode.parent = parent;
            calculateScores(parent.upNode);
            discoveredNodes.Add(parent.upNode);
        } else {
            // Here i must check do I need to change path and update scores
        }       
    } ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:20:21.230

我找到了解决方案，但该解决方案在一种情况下没有给出正确的路径。我将把我所有的代码，以便人们可以改进和使用这个解决方案。如果您以任何方式改进此代码，请在此处发布，以便我们查看您的解决方案。谢谢！

首先，我对我的 calculateScore(...) 方法和他调用的方法进行了更改。然后我实现了上一篇文章中缺少的代码。

**节点类：**

```
using System;
using UnityEngine;
using System.Collections;

public class Node {
    public Cell cell {get; set;} // Unity Component that is linked to this node

    public bool isWalkable {get; set;}

    public int x {get; set;}
    public int z {get; set;}

    public Node rightNode {get; set;}
    public Node leftNode {get; set;}
    public Node upNode {get; set;}
    public Node downNode {get; set;}
    public Node upLeftNode {get; set;}
    public Node upRightNode {get; set;}
    public Node downLeftNode {get; set;}
    public Node downRightNode {get; set;}

    public Node[] children {get; set;}
    public Node parent {get; set;}

    public int gScore {get; set;}
    public int hScore {get; set;}
    public int fScore {get; set;}

    public void setGScore(Node start, bool isPenaltyApplied) {
        if (start.parent == null) {
            gScore = 0;
        } else {
            if (isPenaltyApplied) {
                gScore = start.parent.gScore + 14;
            } else {
                gScore = start.parent.gScore + 10;
            }
        }
    }

    public void setHScore(Node destination, bool isPenaltyApplied) {
        if (parent == null) {
            hScore = 0;
            return;
        }

        if (parent.hScore == 0) {
            hScore = Node.calculateHeuristic(this, destination) * 10;
        } else {
            hScore = parent.hScore + 10;
        }

        if (isPenaltyApplied) {
            hScore += 10;
        }
    }

    public void updateFScore() {
        fScore = gScore + hScore;
    }

    public Node[] getAllChildren() {
        if (this.children == null) {
            Node[] children = new Node[8];
            children[0] = rightNode;
            children[1] = leftNode;
            children[2] = upNode;
            children[3] = downNode;
            children[4] = upLeftNode;
            children[5] = upRightNode;
            children[6] = downLeftNode;
            children[7] = downRightNode;

            this.children = children;
        }
        return this.children;
    }

    public static int calculateHeuristic(Node from, Node to) {
        int distance = 0;

        int startX = from.x;
        int startZ = from.z;

        int destinationX = to.x;
        int destinationZ = to.z;

        while (startX != destinationX) {
            if (startX < destinationX) {
                startX++;
            } else if (startX > destinationX) {
                startX--;
            }

            distance++;
        }

        while (startZ != destinationZ) {
            if (startZ < destinationZ) {
                startZ++;
            } else if (startZ > destinationZ) {
                startZ--;
            }

            distance++;
        }

        return distance; 
    }

} 
```

**发动机类：**

```
using System;
using UnityEngine;
using System.Collections;

public class Engine {
    private ArrayList openList;
    private ArrayList closedList;
    private ArrayList potentialPaths;

    public ArrayList path {get; private set;}
    public Node startNode {get; set;}
    public Node destinationNode {get; set;}

    public bool isPathFound {get; set;}

    public void startEngine() {
        if (startNode != null && destinationNode != null) {
            openList = new ArrayList();
            closedList = new ArrayList();

            traverseNodes();
            if (isPathFound) {
                path = findPath();
            }
        }
    }

    private ArrayList findPath() {
        ArrayList bestPath = new ArrayList();
        Node currentNode = destinationNode;

        while (!object.ReferenceEquals(currentNode, startNode)) {
            bestPath.Add(currentNode);
            clearUnnecessaryNode(currentNode);
            currentNode = currentNode.parent;
        }

        bestPath.Add(currentNode);
        return bestPath;
    }

    private void clearUnnecessaryNode(Node node) {
        Node firstParent = node.parent;
        if (object.ReferenceEquals(firstParent, startNode)) {
            return;
        }

        Node secondParent = firstParent.parent;
        if (object.ReferenceEquals(node.upRightNode, secondParent)) {
            if (node.rightNode != null &&
                node.upNode != null &&
                node.rightNode.isWalkable &&
                node.upNode.isWalkable) {
                node.parent = secondParent;
                path.Remove(firstParent);
            }
        }

        if (object.ReferenceEquals(node.upLeftNode, secondParent)) {
            if (node.leftNode != null &&
                node.upNode != null &&
                node.leftNode.isWalkable &&
                node.upNode.isWalkable) {
                node.parent = secondParent;
                path.Remove(firstParent);
            }
        }

        if (object.ReferenceEquals(node.downLeftNode, secondParent)) {
            if (node.leftNode != null &&
                node.downNode != null &&
                node.leftNode.isWalkable &&
                node.downNode.isWalkable) {
                node.parent = secondParent;
                path.Remove(firstParent);
            }
        }

        if (object.ReferenceEquals(node.downRightNode, secondParent)) {
            if (node.rightNode != null &&
                node.downNode != null &&
                node.rightNode.isWalkable &&
                node.downNode.isWalkable) {
                node.parent = secondParent;
                path.Remove(firstParent);
            }
        }
    }

    private void traverseNodes() {
        Node bestNode = startNode;
        openList.Add(bestNode);
        calculateScores(bestNode, false);

        while (!object.ReferenceEquals(bestNode, destinationNode)) {
            discoverChildren(bestNode);
            closedList.Add(bestNode);
            openList.Remove(bestNode);
            bestNode = chooseBestNode(bestNode);

            if (bestNode == null) {
                // Path not found
                return;
            }

            if (object.ReferenceEquals(bestNode, destinationNode)) {
                closedList.Add(bestNode);
            }
        }
        // Success
        isPathFound = true;
    }

    private void calculateScores(Node node, bool isPenaltyApplied) {
        node.setGScore(startNode, isPenaltyApplied);
        node.setHScore(destinationNode, isPenaltyApplied);
        node.updateFScore();
    }

    private ArrayList discoverChildren(Node parent) {
        ArrayList discoveredNodes = new ArrayList();
        int currentCost = 0;
        int newCost = 0;
        if (parent.upNode != null && 
            parent.upNode.isWalkable &&
            !closedList.Contains(parent.upNode)) {
            if (!openList.Contains(parent.upNode)) {
                openList.Add(parent.upNode);
                parent.upNode.parent = parent;
                calculateScores(parent.upNode, false);
                discoveredNodes.Add(parent.upNode);
            } else {
                currentCost = parent.upNode.parent.gScore + parent.upNode.gScore;
                newCost = parent.gScore + parent.upNode.gScore;
                if (newCost < currentCost) {
                    parent.upNode.parent = parent;
                    calculateScores(parent.upNode, false);
                }
            }       
        }
        if (parent.downNode != null && 
            parent.downNode.isWalkable &&
            !closedList.Contains(parent.downNode)) {
            if (!openList.Contains(parent.downNode)) {
                openList.Add(parent.downNode);
                parent.downNode.parent = parent;
                calculateScores(parent.downNode, false);
                discoveredNodes.Add(parent.downNode);
            } else {
                currentCost = parent.downNode.parent.gScore + parent.downNode.gScore;
                newCost = parent.gScore + parent.downNode.gScore;
                if (newCost < currentCost) {
                    parent.downNode.parent = parent;
                    calculateScores(parent.downNode, false);
                }
            }
        }
        if (parent.leftNode != null && 
            parent.leftNode.isWalkable &&
            !closedList.Contains(parent.leftNode)) {
            if (!openList.Contains(parent.leftNode)) {
                openList.Add(parent.leftNode);
                parent.leftNode.parent = parent;
                calculateScores(parent.leftNode, false);
                discoveredNodes.Add(parent.leftNode);
            } else {
                currentCost = parent.leftNode.parent.gScore + parent.leftNode.gScore;
                newCost = parent.gScore + parent.leftNode.gScore;
                if (newCost < currentCost) {
                    parent.leftNode.parent = parent;
                    calculateScores(parent.leftNode, false);
                }
            }
        }
        if (parent.rightNode != null && 
            parent.rightNode.isWalkable &&
            !closedList.Contains(parent.rightNode)) {
            if (!openList.Contains(parent.rightNode)) {
                openList.Add(parent.rightNode);
                parent.rightNode.parent = parent;
                calculateScores(parent.rightNode, false);
                discoveredNodes.Add(parent.rightNode);
            } else {
                currentCost = parent.rightNode.parent.gScore + parent.rightNode.gScore;
                newCost = parent.gScore + parent.rightNode.gScore;
                if (newCost < currentCost) {
                    parent.rightNode.parent = parent;
                    calculateScores(parent.rightNode, false);
                }
            }
        }
        if (parent.upRightNode != null && 
            parent.upNode != null &&
            parent.rightNode != null &&
            parent.upRightNode.isWalkable && 
            parent.upNode.isWalkable &&
            parent.rightNode.isWalkable &&
            !closedList.Contains(parent.upRightNode)) {
            if (!openList.Contains(parent.upRightNode)) {
                openList.Add(parent.upRightNode);
                parent.upRightNode.parent = parent;
                calculateScores(parent.upRightNode, true);
                discoveredNodes.Add(parent.upRightNode);
            } else {
                currentCost = parent.upRightNode.parent.gScore + parent.upRightNode.gScore;
                newCost = parent.gScore + parent.upRightNode.gScore;
                if (newCost < currentCost) {
                    parent.upRightNode.parent = parent;
                    calculateScores(parent.upRightNode, true);
                }
            }
        }
        if (parent.upLeftNode != null && 
            parent.upNode != null &&
            parent.leftNode != null &&
            parent.upLeftNode.isWalkable && 
            parent.upNode.isWalkable &&
            parent.leftNode.isWalkable &&
            !closedList.Contains(parent.upLeftNode)) {
            if (!openList.Contains(parent.upLeftNode)) {
                openList.Add(parent.upLeftNode);
                parent.upLeftNode.parent = parent;
                calculateScores(parent.upLeftNode, true);
                discoveredNodes.Add(parent.upLeftNode);
            } else {
                currentCost = parent.upLeftNode.parent.gScore + parent.upLeftNode.gScore;
                newCost = parent.gScore + parent.upLeftNode.gScore;
                if (newCost < currentCost) {
                    parent.upLeftNode.parent = parent;
                    calculateScores(parent.upLeftNode, true);
                }
            }
        }
        if (parent.downRightNode != null && 
            parent.downNode != null &&
            parent.rightNode != null &&
            parent.downRightNode.isWalkable && 
            parent.downNode.isWalkable &&
            parent.rightNode.isWalkable &&
            !closedList.Contains(parent.downRightNode)) {
            if (!openList.Contains(parent.downRightNode)) {
                openList.Add(parent.downRightNode);
                parent.downRightNode.parent = parent;
                calculateScores(parent.downRightNode, true);
                discoveredNodes.Add(parent.downRightNode);
            } else {
                currentCost = parent.downRightNode.parent.gScore + parent.downRightNode.gScore;
                newCost = parent.gScore + parent.downRightNode.gScore;
                if (newCost < currentCost) {
                    parent.downRightNode.parent = parent;
                    calculateScores(parent.downRightNode, true);
                }
            }
        }
        if (parent.downLeftNode != null && 
            parent.downNode != null &&
            parent.leftNode != null &&
            parent.downLeftNode.isWalkable && 
            parent.downNode.isWalkable &&
            parent.leftNode.isWalkable &&
            !closedList.Contains(parent.downLeftNode)) {
            if (!openList.Contains(parent.downLeftNode)) {
                openList.Add(parent.downLeftNode);
                parent.downLeftNode.parent = parent;
                calculateScores(parent.downLeftNode, true);
                discoveredNodes.Add(parent.downLeftNode);
            } else {
                currentCost = parent.downLeftNode.parent.gScore + parent.downLeftNode.gScore;
                newCost = parent.gScore + parent.downLeftNode.gScore;
                if (newCost < currentCost) {
                    parent.downLeftNode.parent = parent;
                    calculateScores(parent.downLeftNode, true);
                }
            }
        }

        return discoveredNodes;
    }

    private Node chooseBestNode(Node closedNode) {
        if (openList.Count == 0) {
            return null;
        }

        Node bestNode = (Node)openList[0];
        foreach (Node node in openList) {
            if (node.fScore < bestNode.fScore) {
                bestNode = node;
            } else if (node.fScore == bestNode.fScore) {
                if (node.gScore < bestNode.gScore) {
                    bestNode = node;
                } else if (object.ReferenceEquals(node, closedNode.upNode) ||
                    object.ReferenceEquals(node, closedNode.leftNode) ||
                    object.ReferenceEquals(node, closedNode.rightNode) ||
                    object.ReferenceEquals(node, closedNode.downNode)) {
                    // priority have cell that is not in corner of current cell
                    bestNode = node;
                }
            }
        }

        return bestNode;
    }

} 
```

# c# - 我在访问下拉列表值时遇到问题

> ID：14926164
> 
> 赞同：0
> 
> 时间：2013-02-17T21:18:25.560
> 
> 标签：c#, asp.net, sql-server

问题是我从下拉列表中获取名称，然后从表中获取该名称的学生 ID。

```
protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        DropDownList ddl = sender as DropDownList;
        stud_name1 = ddl.SelectedValue;// sends the value
    //    Label1.Text = ddl.SelectedValue;

        string getquery = "select studnt_id from Student where name='"+stud_name1+"'";

        getidcon.Open();
        SqlCommand getid = new SqlCommand(getquery, getidcon);
      stdid1 = ((int)getid.ExecuteScalar());// gives the id in return to selection

     //   Session [stdid1]
      //  Label1.Text = stdid1.ToString();// testing value

        // get the roll number 
    } 
```

获得 id 后，我将其存储在 stdid1 全局变量中，但我没有获得存储在按钮代码中 stdid1 变量中的值。

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        Label1.Text = stdid1.ToString();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:27:46.463

`stdid1`此类中的一个字段也是如此。变量不会在 ASP.NET 中的回发中保留，它们会在页面呈现给客户端后立即释放。

所以你可以使用`ViewState`或`Session`存储它。但是我不知道为什么当你有一个无论如何都`DropDownList`需要存储的`SelectedValue`时候你需要另一个变量。`ViewState`

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label1.Text = DropDownList1.SelectedValue;
} 
```

[**在 ASP.NET 应用程序中管理持久用户状态的九个选项**](http://msdn.microsoft.com/en-us/magazine/cc300437.aspx)

**更新**

再次阅读您的问题后，我看到您想将 ID 存储在该变量中，但`DropDownList`只有名称。所以我假设你已经使用了`DataTextField` **和** `DataValueField`的名称。使用文本的名称和值的 id。

```
DropDownList1.DataTextField  = "studnt_id";
DropDownList1.DataValueField = "name";
DropDownList1.DataSource = getStudents();
DropDownList1.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:28:29.907

我建议您尝试将代码移动到按钮单击事件而不是 selectedindexchanged 事件中，因为在实际按下按钮之前您似乎不需要进行 DB 调用。

# c# - AWS API：如何将发电机结果转换为类

> ID：14926167
> 
> 赞同：2
> 
> 时间：2013-02-17T21:18:30.643
> 
> 标签：c#, dynamic, casting, amazon-web-services, amazon-dynamodb

所以我有一个模型存储库，它利用 C# AWS SDK for Dynamo。现在有点难看。我想要的是将结果项丢弃到我的模型中。进入 Dynamo 很棒。我只是对我的 Poco 课程进行一些类型反思，然后像这样将它们推入：

```
 var doc = new Document();
     foreach (PropertyInfo prop in model.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public))
     {
         var propName = (string)prop.Name;
         // dont add if value is null
         if (prop.GetValue(model, null) != null)
         {
             if (prop.PropertyType == typeof(string))
                 doc[propName] = (string)prop.GetValue(model, null);
             if (prop.PropertyType == typeof(List<string>))
                 doc[propName] = (List<string>)prop.GetValue(model, null);
             if (prop.PropertyType == typeof(float))
                 doc[propName] = (float)prop.GetValue(model, null);
         }
     } 
```

但是在 repo 中，我不想在检索项目时编写这个丑陋的手动转换。**是否有 AWS 助手可以减少手动操作？**我想我可以编写上述循环的逆循环并获取属性属性名称，然后在每个 N、S、SS 类型等上测试 null。

```
var request = new ScanRequest
            {
                TableName = TableName.User,
            };

            var response = client.Scan(request);
            var collection = (from item in response.ScanResult.Items
                from att in item
                select new User(att.Value.S, att.Value.N, att.Value.S, att.Value.N, att.Value.S, att.Value.S, att.Value.S, att.Value.S, att.Value.S,
                    att.Value.S, att.Value.S, att.Value.S, att.Value.S, att.Value.SS, att.Value.SS)).ToList();

            return collection.AsQueryable(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:00:44.097

您可以使用[.NET SDK 的对象持久性模型功能](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DotNetSDKHighLevel.html)。这允许您使用属性注释您的 .NET 对象，然后指导 SDK 如何将数据存储在 DynamoDB 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-08T12:57:31.933

您可以使用内置`FromDocument`方法将 转换`Dictionary<string, AttributeValue>`为您的类型 T

```
List<MyClass> result = new List<MyClass>();

var response = await client.QueryAsync(request);

        foreach (Dictionary<string, AttributeValue> item in response.Items)
        {
            var doc = Document.FromAttributeMap(item);
            var typedDoc = context.FromDocument<MyClass>(doc);
            result.Add(typedDoc);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T05:22:21.713

我最终以 LOOOOOONG 的方式进行操作。使用类型反射来创建我自己的转换函数很有趣。如果不是凌晨 2 点会更有趣。

帕维尔的回答更正式，但这仍然像一个魅力。

```
public static T ResultItemToClass<T>(Dictionary<string, AttributeValue> resultItem) where T : new()
        {
            var resultDictionary = new Dictionary<string, object>();

            Type type = typeof(T);
            T ret = new T();

            foreach (KeyValuePair<string, AttributeValue> p in resultItem)
                if (p.Value != null)
                    foreach (PropertyInfo prop in p.Value.GetType().GetProperties(BindingFlags.Instance | BindingFlags.Public))
                        if (prop.GetValue(p.Value, null) != null)              
                            {
                                if (prop.Name == "S")
                                    type.GetProperty(p.Key).SetValue(ret, prop.GetValue(p.Value, null), null);                                    

                                if (prop.Name == "SS")
                                    type.GetProperty(p.Key).SetValue(ret, (List<string>)prop.GetValue(p.Value, null), null);

                                if (prop.Name == "N")
                                    type.GetProperty(p.Key).SetValue(ret,  Convert.ToInt32(prop.GetValue(p.Value, null)), null);

                                // TODO: add some other types. Too tired tonight
                            }                           
            return ret;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-07T17:23:46.917

泛型方法将 Dynamo 表转换为 c# 类作为扩展函数。

```
public static List<T> ToMap<T>(this List<Document> item)
    {
        List<T> model = (List<T>)Activator.CreateInstance(typeof(List<T>));
        foreach (Document doc in item)
        {
            T m = (T)Activator.CreateInstance(typeof(T));
            var propTypes = m.GetType();
            foreach (var attribute in doc.GetAttributeNames())
            {
                var property = doc[attribute];
                if (property is Primitive)
                {
                    var properties = propTypes.GetProperty(attribute);
                    if (properties != null)
                    {
                        var value = (Primitive)property;
                        if (value.Type == DynamoDBEntryType.String)
                        {
                            properties.SetValue(m, Convert.ToString(value.AsPrimitive().Value));
                        }
                        else if (value.Type == DynamoDBEntryType.Numeric)
                        {
                            properties.SetValue(m, Convert.ToInt32(value.AsPrimitive().Value));
                        }
                    }
                }
                else if (property is DynamoDBBool)
                {
                    var booleanProperty = propTypes.GetProperty(attribute);
                    if (booleanProperty != null)
                        booleanProperty.SetValue(m, property.AsBoolean());
                }
            }
            model.Add(m);
        }
        return model;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-09T05:10:36.373

从 aws Document 结果类中，您可以使用实例方法：.ToJson()，然后反序列化到您的类中。

# ruby - 使用 RVM 安装 Ruby 1.9.3 时出错

> ID：14926170
> 
> 赞同：2
> 
> 时间：2013-02-17T21:18:47.650
> 
> 标签：ruby, rvm

我正在尝试使用 Mountain Lion 在我的工作机器上安装 Ruby 1.9.3-p385。

我已经安装了 RVM 并运行

```
rvm install 1.9.3 
```

但我得到这个错误......

```
Error running 'env LDFLAGS=-L/opt/sm/pkg/active/lib CFLAGS=-I/opt/sm/pkg/active/include CPATH=/opt/sm/pkg/active/include ./configure --disable-install-doc --prefix=/usr/local/rvm/rubies/ruby-1.9.3-p385 --with-opt-dir=/usr/local/rvm/usr --disable-shared', please read /usr/local/rvm/log/ruby-1.9.3-p385/configure.log
There has been an error while running configure. Halting the installation. 
```

这是错误指向的configure.log的内容......

```
[2013-02-18 10:10:50] ./configure
checking build system type... x86_64-apple-darwin12.2.1
checking host system type... x86_64-apple-darwin12.2.1
checking target system type... x86_64-apple-darwin12.2.1
checking whether the C compiler works... no
configure: error: in `/usr/local/rvm/src/ruby-1.9.3-p385':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

这对我来说有点神秘。如果有人可以提供帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:05:09.193

这是 railsinstaller 默认设置的问题，请查看此答案[https://stackoverflow.com/a/12929017/497756](https://stackoverflow.com/a/12929017/497756)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:31:13.880

看到[这个](https://stackoverflow.com/q/14662569/1008938)问题和[我的回答](https://stackoverflow.com/a/14663025/1008938)。

总结一下，安装 MacPorts 并运行：

```
sudo port selfupdate
sudo port install gcc-apple42
CC=/opt/local/bin/gcc-apple-4.2 rvm install ruby-1.9.3-p194 --enable-shared --without-tk --without-tcl 
```

# jquery - jQuery 自定义验证 - 输入更改

> ID：14926172
> 
> 赞同：1
> 
> 时间：2013-02-17T21:18:53.867
> 
> 标签：jquery, validation

我需要创建一个简单的验证函数，基本上反映了默认的 jQuery 验证。到目前为止它正在工作，但我无法重复使错误消息在您键入时消失。一旦您单击输入字段，它就会消失，但我希望它在我输入时触发。请您指出正确的功能，我目前正在使用 .change 。

**Jsfiddle** - [http://jsfiddle.net/clintongreen/tLpB4/7/](http://jsfiddle.net/clintongreen/tLpB4/7/)

**JS**

```
$('#save_menu').click(function(){
var value       = $('input#new_menu').val();
if (value.length){
        console.log('shows success message');
        $('.success').css('display','block');
        }

else{
        console.log('shows error message');
        $('.error').css('display','block');
        }
});

$('#new_menu').on('change', function() {
        $('.error').hide();
        console.log('hides error message');
}); 
```

**HTML**

```
<input id="new_menu" type="text" name="new_menu" placeholder="Please enter your menu title" onkeypress="return event.keyCode!=13">
<input name="save_menu" value="Save Menu" type="submit" id="save_menu">
<label class="error" style="display: none;">Please enter a Menu name</label>
<label class="success" style="display: none;">That is correct</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:24:34.247

替换`'change'`为`'keyup'`。这将在每次有人按键时触发事件。

问题：如果有人只是按下 Shift 或 Ctrl 或 Alt，这将触发。

# knockout.js - 使用 Knockout-Kendo 不会更新 observableArray 上项目的值

> ID：14926174
> 
> 赞同：0
> 
> 时间：2013-02-17T21:19:20.380
> 
> 标签：knockout.js

我不确定这里出了什么问题，但我们使用的是来自[http://rniemeyer.github.com/knockout-kendo/web/DatePicker.html](http://rniemeyer.github.com/knockout-kendo/web/DatePicker.html)的 DatePicker ，当我们将项目发送回数组时，该字段确实不更新。正如您将在下面的测试中看到的那样，我们选择的日期不会在我们寄回商品时更新。任何帮助深表感谢。谢谢

演示测试 [http://s7.postimage.org/68n30bd6z/knockoutjs_knockout_kendo.gif](http://s7.postimage.org/68n30bd6z/knockoutjs_knockout_kendo.gif)

jsFiddle [http://jsfiddle.net/DiegoVieira/epqUb/4/](http://jsfiddle.net/DiegoVieira/epqUb/4/)

JS

```
var data =
[
    {
        "name": "Diego",
        "birthday": "01/01/1984"
    },
    {
        "name": "Franciele",
        "birthday": "01/05/1983"
    }
];

var person = function() {
    this.id = ko.observable(0);
    this.name = ko.observable();
    this.birthday = ko.observable();
}

function viewModel() {
    var self = this;
    self.people = ko.observableArray(data);
    self.personData = ko.observable(new person());
    self.selectedPerson = ko.observable();

    self.addPerson = function() {
        var item = ko.toJS(new person());
        item.id = getRandomNumber();
        self.people.push(item);
        self.selectedPerson(item);
    }

    self.editPerson = function(item)
    {
        self.selectedPerson(item);
    }

    self.savePerson = function(item)
    {
        var index = self.people.indexOf(item);
        self.people.remove(item);
        self.people.splice(index, 0, item);
        self.selectedPerson(null);
    }

    self.deletePerson = function(item)
    {
        var index = self.people.indexOf(item);
        self.people.remove(item);
    }
}
ko.applyBindings(new viewModel());

function getRandomNumber(min, max) {
    if (typeof min === 'undefined')
        min = 10000000;
    if (typeof max === 'undefined')
        max = 99999999;
    return min + Math.floor(Math.random() * (max - min + 1));
} 
```

HTML

```
<div data-bind="with: $root.selectedPerson">
    <table border="1" cellpadding="1" cellspacing="1">
        <tr>
            <td>Name:</td>
            <td><input data-bind="value: name" /></td>
        </tr>
        <tr>
            <td>Birthday:</td>
            <td><input data-bind="kendoDatePicker: birthday" /></td>
        </tr>
        <tr>
            <td colspan="2"><button data-bind="click: $root.savePerson">Save</button></td>
        </tr>
    </table>
</div>

<button data-bind="click: $root.addPerson">Add Person</button>
<ul data-bind="foreach: $root.people">
    <li><span data-bind="html: name"></span> (<span data-bind="html: birthday"></span>) <button data-bind="click: $root.editPerson">Edit</button> <button data-bind="click: $root.deletePerson">Delete</button></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:59:55.970

kendoDatePicker 绑定期望它正在写入的属性是可观察的。使用您当前的结构，您可以在没有太多更改的情况下完成这项工作。

一种选择是同时保留所选项目和副本（带有可观察对象）以进行编辑。所以，你会有类似`selectedItem`and的东西`originalItem`。

您可以更新您的`Person`构造函数以允许它传递数据，例如：

```
var Person = function(data) {
    data = data || {};
    this.id = ko.observable(data.id || 0);
    this.name = ko.observable(data.name);
    this.birthday = ko.observable(data.birthday);
}; 
```

选择项目时：

```
self.editPerson = function(item) {
    self.original(item);
    self.selectedPerson(new person(item));
}; 
```

然后，当一个项目被接受时，您可以继续使用相同的逻辑将原始项目替换为编辑后的副本。

这是一个更新的小提琴：http: [//jsfiddle.net/rniemeyer/h4tsd/](http://jsfiddle.net/rniemeyer/h4tsd/)

我在这里的博客文章中对这种模式有一个轻微的替代方案：[http ://www.knockmeout.net/2013/01/simple-editor-pattern-knockout-js.html](http://www.knockmeout.net/2013/01/simple-editor-pattern-knockout-js.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T05:25:37.067

**你好，我发现了问题**，

**更改如下代码，它将完美运行。**

```
 <tr>
        <td>Birthday:</td>
        <td><input data-bind="kendoDatePicker: birthday,value: birthday" /></td>
    </tr> 
```

**请将其标记为答案**

# jquery - 在所有链接上滚动到

> ID：14926178
> 
> 赞同：0
> 
> 时间：2013-02-17T21:19:43.710
> 
> 标签：jquery, scrollto

我在页面上使用 scrollTo 并希望将功能应用于所有链接。这段代码不应该工作吗？我在这里忘记了什么？

谢谢

```
<script type="text/javascript">
    $(document).ready(function(){

    var target = $(this).attr('href');

        $('.scrollTo').scrollTo(target);

    });
</script>

<li><a class="scrollTo" href="#ref1">Recommendation for Developing and Disseminating Hazard and Exposure Data: The Integrated Tiered Testing and Assessment Approach</a></li>

<div id="ref1">
            <h3>REFERENCE 1\. Recommendation for Developing and Disseminating Hazard and Exposure Data: The Integrated Tiered Testing and Assessment Approach</h3>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:37:16.193

这应该是您正在寻找的更多内容。[http://jsfiddle.net/wUs3u/](http://jsfiddle.net/wUs3u/)你需要的行是

```
$('.scrollTo').click(function() {
  var target = $(this).attr('href');
  $.scrollTo(target);
}); 
```

此外，您可能应该只使用[HTML Anchors](http://www.w3schools.com/html/html_links.asp)来完成类似的事情。

# javascript - 获取选定 SVG 元素的边界框

> ID：14926180
> 
> 赞同：5
> 
> 时间：2013-02-17T21:19:59.400
> 
> 标签：javascript, svg, svg-edit

我想阅读：

*   `width`, `height`, `x`,`y`测量

对于特定的 SVG 元素。

* * *

我想最简单的方法是先获取[*最小边界框*](http://en.wikipedia.org/wiki/Minimum_bounding_box)并读取它的属性。

我怎样才能访问这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T11:02:08.233

如果您有对 DOM 节点的引用，请使用

```
svgNode.getBoundingClientRect() 
```

[https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/DOM/element.getBoundingClientRect)

编辑：SVG Edit 有[一个方法](http://code.google.com/p/svg-edit/source/browse/trunk/editor/svgcanvas.js#6200)可以返回当前选中的元素：

```
svgCanvas.getSelectedElems() 
```

所以在上面的例子中：

```
svgNode = svgCanvas.getSelectedElems()[0];
svgNode.getBoundingClientRect(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-21T09:56:12.943

有关示例和答案，请参阅[http://granite.sru.edu/~ddailey/svg/BBox0M.svg](http://granite.sru.edu/~ddailey/svg/BBox0M.svg)。

简而言之，这段代码在 Chrome 中适用于我：

```
<script>
function foo(evt)
{
    console.log(evt.target.getBBox());      
}
</script>

<svg>
    <circle onclick="foo(evt)" r="20%" cx="50%" cy="50%"/>
</svg> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:59:43.953

假设你有一个元素的句柄，我认为这会起作用，不是吗？

```
box = svgedit.utilities.getBBox(selected); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T21:24:02.257

我不确定我是否理解正确，但如果你想获取 jQuery 元素的高度或宽度，请使用 width() 和 height()：

```
log("The svg is " + $("img").width() + "px wide.");
log("The svg is " + $("img").height() + "px tall."); 
```

JSFiddle 示例：http: [//jsfiddle.net/gGWU4/](http://jsfiddle.net/gGWU4/)

# ios6 - ios6中的自定义右栏按钮项不透明

> ID：14926186
> 
> 赞同：2
> 
> 时间：2013-02-17T21:20:38.680
> 
> 标签：ios6, uinavigationbar, rightbarbuttonitem

我正在使用以下代码为我的导航栏创建一个自定义右栏按钮项：

```
// create a toolbar 
UIToolbar* tools = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 50, 44.01)];
// create the array to hold the button, which then gets added to the toolbar
NSMutableArray* buttons = [[NSMutableArray alloc] initWithCapacity:1];

// create a toolbar item with image
NSString* pathToSettingsResourceFile = [[NSBundle mainBundle] pathForResource:@"19-gear" ofType:@"png"];        
UIImage* settingsImage = [[[UIImage alloc] initWithContentsOfFile:pathToSettingsResourceFile] autorelease];         
settings = [[UIBarButtonItem alloc]initWithImage:settingsImage style:UIBarButtonItemStylePlain target:self action:@selector(showSettings:)];
settings.enabled = FALSE;

// add button to toolbar 
[buttons addObject:settings];
[tools setItems:buttons animated:NO];
[buttons release];

// add toolbar as a right bar button item 
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:tools] autorelease];

[tools release]; 
```

直到 ios 6 这按预期工作，从 ios 6 我得到这个奇怪的矩形背景

![设置右栏按钮项](../Images/f170a6f9af6e5eb098996e6d57a18f4d.png)

并添加

```
tools.opaque = NO;
tools.backgroundColor = [UIColor clearColor]; 
```

没有帮助，

请帮我摆脱这个背景

在此先感谢，阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T22:18:05.570

我知道这是一个旧线程，但我遇到了同样的问题，并且认为您可能对我的发现感兴趣。

[此线程中提供了一种解决方法](https://stackoverflow.com/questions/9389540/uitoolbar-background-transparent)（jd 的答案，而不是“已接受”的答案）。

您应该能够使用此代码获得所需的行为：

```
const float colorMask[6] = {222, 255, 222, 255, 222, 255};
UIImage *img = [[UIImage alloc] init];
UIImage *maskedImage = [UIImage imageWithCGImage: CGImageCreateWithMaskingColors(img.CGImage, colorMask)];

[tools setBackgroundImage:maskedImage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault]; 
```

虽然这可行，但我不相信这是*正确*的方法，所以我[在这里开始了一个新线程](https://stackoverflow.com/questions/16618410/uitoolbar-buttons-with-uiimage-not-entirely-transparent)`UIToolbar`，以防有人知道使包含矩形表现得像透明对象一样的密码。

# php - 如何将索引重定向到 index.php？（使用 .htaccess）

> ID：14926188
> 
> 赞同：-3
> 
> 时间：2013-02-17T21:20:56.937
> 
> 标签：php, .htaccess

但我也希望每个页面都重定向到 page.php，例如：

我->我.php

博客-> blog.php

测试-> test.php

我不知道重定向是否是正确的词，因为我想要的是我们调用 X 并且它打开 X.php 但不显示扩展名 (.php)

希望大家可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:22:43.550

创建一个`.htaccess`文件并将其放入其中：

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

这样，诸如 ,`domain.com/blog`之类的 URL 将默默地附加`.php`到文件名（即 loading `blog.php`）。

# jquery - 在 CSS/Jquery 中创建渐变网格

> ID：14926189
> 
> 赞同：15
> 
> 时间：2013-02-17T21:21:02.777
> 
> 标签：jquery, css

我不确定这是否可能，但我可以使用 CSS/Jquery 技术来创建渐变网格吗？类似的东西![在此处输入图像描述](../Images/5844f03bc8a2c1b8bf29fed510741478.png)

我想随机生成这个网格然后可能对其进行动画处理，所以我试图避免使用图像。我不确定这样的事情是否可能。

我在想也许可以创建几层单独的渐变，然后将它们全部分层到一个固定位置并更改它们的不透明度设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T20:59:03.983

**现在**

几年前，我使用 SVG、HTML5 画布标签和最近的 CSS3 渐变，尝试了一些类似的东西。我不相信目前有一种自然的方法可以超越简单的线性或径向渐变。

问题是是否可以仅使用简单的线性和径向渐变（这是唯一可用的工具）来模拟网格渐变。

不幸的是，当您使用 opacity 或 rgba 组合多个渐变时，不同渐变的颜色往往会以一种无用的方式组合，从而导致颜色褪色。避免这种情况需要能够在浏览器中将其呈现为单个复杂渐变。

渐变可以具有的形状也有很大的限制——任意角度的线性渐变和径向对称的椭圆渐变。两者都不允许自由形式的不规则形状。可应用于结果图像的 2D 变换在本质上也相当规则（缩放、倾斜等）。

**在将来**

在不久的将来，我所知道的最有希望的选择是可能支持 SVG 2.0 中的网格渐变（也许还有扩散曲线）。如果确实发生了这种情况并且最终得到浏览器的支持，那应该会开始大大扩展选项。HTML5 画布标签和 CSS3 可能很快就会出现。

正如@vals 在下面的评论中指出的那样，WebGL 应该提供一些非常有前途的选项（对于使用 3D 上下文的 HTML5 画布标签）。

**相关链接**

*   [http://www.svgopen.org/2011/papers/18-Advanced_Gradients_for_SVG/](http://www.svgopen.org/2011/papers/18-Advanced_Gradients_for_SVG/)
*   [http://w3-org.9356.n7.nabble.com/Diffusion-Curves-td146288.html](http://w3-org.9356.n7.nabble.com/Diffusion-Curves-td146288.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T20:04:02.690

我做了一个简单的布局来演示这一点。

首先我放4个div，第一个展示部分结果，最后一个看最终结果。标记只是：

```
<div class="box mesh1"></div>
<div class="box mesh2"></div>
<div class="box mesh3"></div> 
<div class="box mesh"></div> 
```

这里的框仅用于尺寸，mesh1 到 3 保存部分结果，在网格中我们将它们放在一起。

CSS是：

```
.box {
    width: 400px;
    height: 150px;
    position: relative;
    display: inline-block;
}

.mesh1, .mesh {
background:
    -webkit-linear-gradient(5deg,  rgba(0, 250, 0, 0.5), rgba(0, 100, 0, 0.5))
}

.mesh:after, .mesh:before {
    content: "";
    position: absolute;
    left: 0px;
    bottom: 0px;
    top: 0px;
    right: 0px;
}
.mesh2, .mesh:after {
background:   -webkit-radial-gradient(center center, circle cover, rgba(250, 0, 0, 0.6) 0%, rgba(120, 0, 10, 0.5) 100%);}

.mesh3, .mesh:before {
background: -webkit-radial-gradient(10% 10%, ellipse cover, rgba(0, 0, 250, 0.6) 0%, white 100%);} 
```

我给 mesh1 类一个背景线性，倾斜 5 度，并以 rgba 格式指定颜色以允许透明度。

然后，为了能够覆盖更多的渐变，我将伪元素指定为之前和之后，共享相同的布局属性。

对于后元素，我给出一个圆形渐变，与 mesh2 共享。对于前元素，我给出一个椭圆渐变，偏离中心。他们都可以是rgba。

最后，您会在网格 div 中看到所有内容重叠的结果

（我在任何地方都使用了 webkit 表示法来缩短它）

我不会说它很有艺术性，但我把这部分留给你:-)

[在这里摆弄](http://jsfiddle.net/vals/WLv7d/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-24T11:36:51.840

在我的第一个答案中，我更多地以“艺术”的方式解释了这一点，而不是“数学”的方式。Matt Coughlin 的回答让我想到了一个更数学的答案，我们将使要求的“网格”部分更加严格。

也就是说，我们有一个颜色矩阵，我们想在网格中显示它。如果网格的间距为 100px，那么矩阵的颜色 [x][y] 将被赋予 100x 和 100y 的像素。中间的像素将以双线性方式近似。

对于这种方法，css 将是：

```
.mesh { overflow: hidden; position: absolute;   width: 300px;   height: 300px;    }

.tile {    width: 200px;    height: 200px;    position: absolute;    display: block;   }

.tile11, .tile21, .tile31 {
left: -50px;
}
.tile12, .tile22, .tile32 {
left: 50px;
}
.tile13, .tile23, .tile33 {
left: 150px;
}
.tile11, .tile12, .tile13 {
top: -50px;
}
.tile21, .tile22, .tile23 {
    top: 50px;
}
.tile31, .tile32, .tile33 {
top: 150px;
}

.tile11 {
background: -webkit-radial-gradient(center center, 100px 100px, 
      rgba(255, 0, 0, 1) 0%, 
      rgba(255, 0, 0, 0.5) 50%,
      rgba(255, 0, 0, 0) 100%);}

.tile12 {
background: -webkit-radial-gradient(center center, 100px 100px, 
      rgba(255, 0, 0, 1) 0%, 
      rgba(255, 0, 0, 0.5) 50%,
      rgba(255, 0, 0, 0) 100%);} 
```

我将每个 div 用作网格的本地贡献者，仅“触摸”中间邻居，并在此之后达到完全透明。

结果是这样的：

[小提琴](http://jsfiddle.net/kmqWY/)

作为测试，前两种颜色都是红色。在一个完美的系统中，连接 2 个点的线应该一直是完美的红色。

确实不是完美的结果，但或多或​​少避免了结果的“浑浊”或“水洗”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-01-18T20:22:55.557

我写了一个使用光栅图像创建轻量级、可扩展网格渐变的解决方案：[https ://peterhrynkow.com/performance/2019/01/13/blowing-up-images-to-make-them-small.html](https://peterhrynkow.com/performance/2019/01/13/blowing-up-images-to-make-them-small.html)

它不能解决您希望随机生成它们的问题，但至少可以为您提供 CSS 或 SVG 解决方案所期望的小文件大小和与分辨率无关的缩放。

# mysql - MySQL遍历所有行并对它们进行编号

> ID：14926194
> 
> 赞同：0
> 
> 时间：2013-02-17T21:21:30.933
> 
> 标签：mysql, sql, database

所以我在表中添加了一列用于编号。我想浏览表中的所有行并从 1 开始编号。你会怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:23:19.603

只需使用`AUTO_INCREMENT`. 它将自动更新您现有的行和所有未来的行。

```
ALTER TABLE tablename CHANGE id id INT(10) AUTO_INCREMENT PRIMARY KEY; 
```

# php - 在 PHP 上使用 JSON 时重定向

> ID：14926200
> 
> 赞同：2
> 
> 时间：2013-02-17T21:22:05.250
> 
> 标签：php, javascript, jquery, json, redirect

我有一个转到 php 文件的 ajax 表单，我不希望用户能够直接将 php 文件输入到 URL 栏中，所以如果他们输入该 php 文件，我将如何重定向他们，我不能简单地添加一个`header("location:index.html")`或者表格不起作用。

```
<?php
$Reg['E'] = 'Test';

echo json_encode($Reg);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:28:03.663

没有办法 100% 确定，因为 ajax 请求与任何其他请求相比在技术上没有什么特别之处。如果您使用的是 jQuery，则可以检查`X-Requested-With`标题：

```
if (strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest' ) 
```

...否则重定向。您还可以将令牌放入随机`md5`散列等形式，并检查该令牌是否与请求一起提交（与值存储会话相比）。这至少需要先访问表单页面才能生成令牌，而“普通”用户将无法获得令牌。

# php - 在javascript（ajax）中调用php类函数

> ID：14926206
> 
> 赞同：0
> 
> 时间：2013-02-17T21:22:26.587
> 
> 标签：php, javascript, jquery, ajax, class

我想知道是否有任何好的做法可以通过 Ajax 使用 Javascript 从 php 类调用方法。

这是我目前执行它的“风格”。

（类中的方法仅在这里举例）

PHP端：

```
<?php

if(isset($_POST['action']) && $_POST['action'] != null)
{
    extract($_POST);

    if($action)
    {
        $ajaxCommand = new EleveUpdate();

        if(method_exists($ajaxCommand, $action))
        {
            $reponse = call_user_func(array($ajaxCommand, $action),$_POST);
            echo $reponse;
            exit(0);
        }
        else 
        {
            throw new Exception("Cette méthode n'existe pas");
        }
    }
}
else
{
    echo 'Cette action n\'est pas autorisée';
    return false;
}

class EleveUpdate
{

    public function __construct()
    {

    }

    public function testfunct($data)
    {
        echo $data['eleve'];
    }
} 
```

Javascript方面：

```
$(document).ready(function() {
    $.ajax({
        url: 'eleveupdate.php',
        type: 'POST',
        data: {
          action: "testfunct",
          eleve: 1
        },
        beforeSend: function()
        {
            loading(true);
        },
        error: function()
        {
            console.log('error');
        },
        success: function(data) 
        {
            loading(false);
            console.log(data);
        }
    });
}); 
```

问题是isset $_POST 总是在我的课堂上，我很确定这不是正确的方法，我在这里寻求帮助。

提前谢谢你

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:10:23.590

问题是基于字符串请求调用范围命名并不容易。您可以使用称为 LAMBDA 或匿名函数的东西。通过这种方式，您可以存储一个带有 LAMBDA 的字符串数组。像这样：

```
<?php
class EleveUpdate {
    private $funcs = array();

    function __construct($which_function) {
        $funcs['testfunct'] = create_function('$a,$b', 'return "ln($a) + ln($b) = " . log($a * $b);');

        $funcs[$which_function];
    }
}
?> 
```

在此处查看更多信息：[http ://www.php.net/manual/en/function.create-function.php](http://www.php.net/manual/en/function.create-function.php)

使用此方法，您甚至可能不再需要该类，而只是显示。

# javascript - 调用javascript初始化表单的有效方法？

> ID：14926215
> 
> 赞同：0
> 
> 时间：2013-02-17T21:23:18.410
> 
> 标签：javascript, jquery

一个经常有一些动态部分的表单，需要在加载时初始化。例如日期选择器、增强选择、部分切换、隐藏/显示条件元素等。

例子：

```
<form>
    <input type="text" name="date">
    <select name="selection"></select>
</form> 
```

我想在日期元素上初始化 datepicker，在选择元素上初始化 Select2。

表单初始化放在哪里？

我的想法：

*   通过全局选择器初始化：

    ```
    $(function() {
        $('input[name=date]').datepicker();
        $('select[name=selection]').select2(); 
    })`. 
    ```

    但是我有一个用于整个 web 的 js 文件，因此这将导致在每次页面加载时抓取整个 DOM，即使该元素不存在于当前页面上也是如此。

*   某种条件选择器。例如，给`<body>`和 id 并添加到我的全局 js 文件中，如下所示：`$(function() { $('input[name=date]', 'body#foo').datepicker(); })`
*   将每个表单的 init 封装成一个函数（或类方法），并从 HTML 中调用该函数：

    ```
    <script type="text/javascript">
        $(document).ready(initMyForm());
    </script> 
    ```

但我猜，没有更好的方法吗？你有什么建议，特别是对于需要不同 javascript 初始化的许多不同形式的大型项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:28:07.683

如果对于您当前的项目，您正在运行一个 JS 文件，或者甚至对于适合“通用”表单设置功能的中型项目，那么使用您描述的功能将是合适的。

请参见下面的示例，该函数被包装为一个小型 jQuery 插件，因此您可以根据需要在特定的选择器上调用它，以避免运行整个 DOM。

```
;(function($){
    $.extend({
        initMyForm : function(){
            $(this).find('input[name=date]').datepicker();
            $(this).find('select[name=selection]').select2(); 
        }
    });
})(jQuery); 
```

所以你可以像这样使用它：

```
$(document).ready(function(){
    $(body).find(form).initMyForm();
});

$("#my-form").initMyForm();

$(".page-content .form").initMyForm(); 
```

# facebook - Facebook 获得更大的个人资料图片

> ID：14926216
> 
> 赞同：0
> 
> 时间：2013-02-17T21:23:18.720
> 
> 标签：facebook

我使用这个 url 来获取用户的图像配置文件：

```
http://graph.facebook.com/userid/picture?type=large 
```

但我注意到我得到了 180*135 的图像配置文件，我看到我的脸书配置文件中的图像配置文件比这个大。有可能得到真实的图像吗？还是最大的是大？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-17T21:28:57.750

嗯，有。您必须创建一个 facebook 应用程序，请求访问用户相册，从“个人资料图片”相册中检索图像并扫描该相册以查找当前使用的图像。

如果你运气好，它总是专辑中的第一张图片。如果没有，您就有麻烦了，必须进行图像比较。

# ios - 使用 MPMoviePlayerController 恢复中断的广播流

> ID：14926220
> 
> 赞同：10
> 
> 时间：2013-02-17T21:23:24.947
> 
> 标签：ios, objective-c, mpmovieplayercontroller, radio

我正在为 iOS6 设备开发一个在线广播应用程序。我已经寻找各种包装器来完成这项任务。AVPlayer、MPMoviePlayerController 等

我尝试使用 AVPlayer，因为它是纯音频应用程序，因此将它用于我的目的听起来更正确。但很快我就遇到了这个问题：[这里](https://stackoverflow.com/questions/11676836/avaudiosessiondelegate-called-at-endinterruption-but-begininterruption-not-call/12736557#12736557)

因此我切换到 MPMoviePlayerController 这就是我想要做的：

```
 pPlayer = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://launch.fusionradio.fm:8004"]];
    pPlayer.movieSourceType = MPMovieSourceTypeStreaming;
    pPlayer.view.hidden = YES;

    [[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil];
    [[AVAudioSession sharedInstance] setActive:YES error:nil];

    [pPlayer prepareToPlay];
    [pPlayer play];

    pPlayer.shouldAutoplay = YES;

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(StreamStateChanged) name:MPMoviePlayerLoadStateDidChangeNotification object:pPlayer]; 
```

在我的 StreamStateChanged 方法中，我正在做：

```
NSLog(@"Trying to replay");
[pPlayer pause];

[pPlayer play]; 
```

pPlayer 是 MPMoviePlayer。一切都很好，除非有中断控制台吐出以下内容：

```
 Took background task assertion (1) for playback stall.
    Ending background task assertion (1) for playback stall. 
```

断言后的数量不断增加。然后一旦互联网连接稳定，它就会从中恢复。

我的问题是：这种方法正确吗？我在路上做错了吗？并且可以忽略该断言消息吗？

PS：请建议是否有更好的方法来使用不同的 API 开发无线电流应用程序，而不是 MPMoviePlayerController

谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T10:18:15.397

忽略那些内部断言消息是完全正确的。你对它们无能为力。

# ruby-on-rails-3 - 一次编辑多条记录 - 如何在没有 ID 的情况下更新

> ID：14926225
> 
> 赞同：1
> 
> 时间：2013-02-17T21:24:00.260
> 
> 标签：ruby-on-rails-3

Rails 还是新手。我会尽量提供尽可能详细的信息。

我有一个表格可以让我一次更新多条记录。
它基于[“单独编辑多个”Railscast 剧集](http://railscasts.com/episodes/198-edit-multiple-individually)。

```
<%= form_tag(auction_clerk_path(@auction), :method => :put) do %>
  <% @lots.each do |lot| %>
    <%= fields_for "lots[]", lot do |f| %>
      <%= f.number_field :sale_price %>
    <% end %>
  <% end %>
<% end %> 
```

*（简化为每个实例只包含一个输入）*

*拍卖*包含多个*批次*（待售物品）。
这`auction_clerk_path`是我用来在一次拍卖中展示所有拍品的路线。

一切都很好......直到我尝试自定义我的地段路径......

我已将以下内容添加到我的**lot.rb**文件中以便能够使用：
`/auctions/:auction_id/lots/:lot_number`
而不是`/auctions/:auction_id/lots/:id`

```
def to_param
  lot_number
end 
```

因此，在前面提到的表单中，字段以`name="lots[12][sale_price]"`where `12`is呈现`id`。

但是随着`to_param`更改，现在字段呈现`name="lots[1][sale_price]"`在 1 是`lot_number`.

当我保存时，提交的参数是 lot_numbers 而不是 ids。
所以很明显，当它尝试更新时，它不会找到正确的记录。

我的方法定义如下所示：

```
def save_clerking
  @updated_lots = Lot.update(params[:lots].keys, params[:lots].values).reject { |l| l.errors.empty? }
  if @updated_lots.empty?
    flash[:notice] = "Lots updated"
    redirect_to auction_clerk_path(@auction)
  else
    render :action => "clerk"
  end
end 
```

我要么需要将我的方法定义更改为按批号查找，要么首先将表单更改为以某种方式输出 ID……但我不知道如何。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T20:34:41.190

您可以在控制器操作中按批号获取 id，并将它们提供给 update 方法而不是 params 键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:59:34.020

Fixed this through some help on another question.

I changed my method def to

```
@updated_lots = []
params[:lots].each do |lot_number, attributes|
  lot = Lot.where("lot_number = ? AND auction_id = ?", lot_number, params[:auction_id]).first
  if lot.update_attributes(attributes)
    @updated_lots << lot
  end
end 
```

# java - 如何对齐 JPanels / JFrames 中的元素？

> ID：14926236
> 
> 赞同：5
> 
> 时间：2013-02-17T21:25:15.353
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我对在 java 中使用 GUI 完全陌生，所以我在弄清楚如何对齐我需要的所有内容时遇到了一些麻烦。我必须在我的 JFrame 中对齐需要对齐的面板（一个向左，一个向右）以及一个面板中的几个按钮，我需要在面板中居中。这是我的代码。

```
package application;

import javax.swing.*;
import java.awt.event.*;
import java.awt.*;
import java.io.*;
import java.nio.*;
import java.util.*;

public class Main extends JPanel 
{
    public static void main(String[] args)
    { 
        //set the ui to the native OS
        try
        { 
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        }catch(ClassNotFoundException | InstantiationException | IllegalAccessException 
        | UnsupportedLookAndFeelException e)                                   
        {
        }

        JFrame frame = new JFrame("Application Name");
        Menu menu = new Menu();
        JPanel iconPanel = new JPanel();
        final JPanel grid = new JPanel(new FlowLayout());
        JButton firewallButton = new JButton("Firewall");
        JButton networkButton = new JButton("Network");
        JButton printerButton = new JButton("Printer");

        int iconPanelSizeX;
        int iconPanelSizeY;
        int gridSizeX;
        int gridSizeY;
        int gridPosition;

        //frame setting
        frame.setSize(800, 600);
        frame.setMinimumSize(new Dimension(800, 600));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);

        //add grid and iconPanel JPanels to the frame
        frame.add(iconPanel);
        iconPanel.add(firewallButton);
        iconPanel.add(networkButton);
        iconPanel.add(printerButton);
        frame.add(grid);        

        //iconPanel settings
        iconPanel.setBorder(BorderFactory.createLoweredSoftBevelBorder());
        iconPanel.setBackground(Color.gray);
        iconPanel.setLayout(new FlowLayout());
        iconPanel.setSize(new Dimension(100, 600));
        iconPanel.setVisible(true);

        //grid setting
        grid.setBackground(Color.red);
        grid.setSize(new Dimension(700, 600));
        grid.setVisible(true);

        //this is for resizing components when the user resizes the window
        int counter = 0;
        while(counter == 0)
        {
            firewallButton.setSize(new Dimension(iconPanel.getWidth(), 50));
            networkButton.setSize(new Dimension(iconPanel.getWidth(), 50));
            printerButton.setSize(new Dimension(iconPanel.getWidth(), 50));
            iconPanelSizeX = frame.getWidth() / 10;
            iconPanelSizeY = frame.getHeight();
            gridSizeX = (frame.getWidth() / 10) * 9;
            gridSizeY = frame.getHeight();
            iconPanel.setSize(new Dimension(iconPanelSizeX, iconPanelSizeY));
            grid.setSize(new Dimension(gridSizeX, gridSizeY));
        }
    }
} 
```

如您所见，第二个 JPanel（网格）没有与框架的右侧对齐，并且 iconTray 内的按钮也不居中。我意识到这些可能都是简单的布局修复，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T21:51:16.137

对于简单的拆分，`JFrame`您可以使用`GridLayout`1 行和 2 列。

```
frame.setLayout(new GridLayout(1,2,3,3)); //3,3 are gaps
frame.add(grid);
frame.add(iconPanel); 
```

为了使面板中的组件居中，您可以使用`FlowLayout`默认设置为`JPanels`：

手动操作：

```
grid.setLayout(new FlowLayout()); //Centered components

grid.setLayout(new FlowLayout(FlowLayout.LEFT,3,3)); //Components aligned to left

grid.setLayout(new FlowLayout(FlowLayout.RIGHT,3,3)); //Components aligned to right 
```

这是它的外观：

![在此处输入图像描述](../Images/4fe01be5e451d5be3c2dd4ce465b6ebe.png)

此外，一些观察：

*   永远不要为你的组件调用 setXXXSize() 方法；

*   尽量避免调用`setSize();`，改为`JFrame`调用`pack();`；

*   `setVisible(true);`在代码末尾调用；

你所有的巨大代码都可以被“剥离”到这个：

```
import javax.swing.*;
import java.awt.*;

public class Main extends JPanel
{
    public static void main(String[] args)
    {
        JFrame frame = new JFrame("Application Name");
        JPanel iconPanel = new JPanel();
        JPanel grid = new JPanel(new FlowLayout());
        JButton firewallButton = new JButton("Firewall");
        JButton networkButton = new JButton("Network");
        JButton printerButton = new JButton("Printer");

        frame.add(iconPanel);
        iconPanel.add(firewallButton);
        iconPanel.add(networkButton);
        iconPanel.add(printerButton);
        grid.setBackground(Color.GREEN);

        frame.setLayout(new GridLayout(1,2,3,3));
        frame.add(grid);
        frame.add(iconPanel);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T23:17:10.033

> 如何垂直对齐按钮？

[`Box`](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)此示例在`WEST`框架的默认区域中使用垂直`BorderLayout`：

![在此处输入图像描述](../Images/bb73d65c79444fb67087cc5bac54499b.png)

```
import java.awt.*;
import javax.swing.*;

/** @see http://stackoverflow.com/a/14927280/230513 */
public class Main {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                display();
            }
        });
    }

    private static void display() throws HeadlessException {
        JFrame frame = new JFrame("Application Name");
        JButton firewallButton = new JButton("Firewall");
        JButton networkButton = new JButton("Network");
        JButton printerButton = new JButton("Printer");

        //iconPanel settings
        Box iconPanel = new Box(BoxLayout.Y_AXIS);
        iconPanel.add(firewallButton);
        iconPanel.add(networkButton);
        iconPanel.add(printerButton);
        iconPanel.setBackground(Color.gray);
        iconPanel.setVisible(true);
        frame.add(iconPanel, BorderLayout.WEST);

        //grid setting
        JPanel grid = new JPanel() {

            @Override
            // arbitrary placeholder size
            public Dimension getPreferredSize() {
                return new Dimension(320, 230);
            }
        };
        grid.setBackground(Color.red);
        frame.add(grid, BorderLayout.CENTER);

        //frame setting
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T22:04:41.727

我建议您花一些时间阅读[A Visual Guide to Layout Managers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)。这将帮助您熟悉标准 API 提供的布局管理器。需要一些经验和努力才能确定其中哪一个是获得您想要的确切外观的正确工具。一旦您对标准 API 提供的功能感到满意，您还应该四处寻找提供其他选项的第三方布局管理器 API。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T21:30:32.787

> 我必须在我的 JFrame 中对齐需要对齐的面板（一个向左，一个向右）以及一个面板中的几个按钮，我需要在面板中居中。这是我的代码。
> 
> 我意识到这些可能都是简单的布局修复，但我不知道从哪里开始。

`FlowLayout`使用比您实际使用的简单布局更复杂的布局。我建议你使用

*   **`GridBagLayout`**
*   **`BoxLayout`**

查看[**`references here`**](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)

# asp.net-mvc - 属性路由的异常行为

> ID：14926241
> 
> 赞同：0
> 
> 时间：2013-02-17T21:25:34.683
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing, attributerouting

我正在使用属性路由并发现它非常好。特别是我可以在许多不同的文化中本地化我的路线。

我遇到了一个不规则发生的问题 - 它有时会发生而不是其他人，我找不到模式。

我的操作方法是：

```
 [GET("/")]
    [GET("{productId:int}")]
    [GET("{category2Id:int},{productId:int}/{category2Slug}/{productSlug}")]
    [GET("{category2Id:int},{category3Id:int},{productId:int}/{category2Slug}/{category3Slug}/{productSlug}")]
    [GET("{category2Id:int},{category3Id:int},{category4Id:int},{productId:int}/{category2Slug}/{category3Slug}/{category4Slug}/{productSlug}")]
    public virtual ActionResult Index(int productId, string productSlug = null, string category2Slug = null, string category3Slug = null, string category4Slug = null, int? category2Id = null, int? category4Id = null, int? category4Id= null) 
```

我的控制器上有以下装饰

```
[SessionState(SessionStateBehavior.Disabled)]
[RoutePrefix("product", TranslationKey = "product")]
public partial class ProductController 
```

问题是有时属性渲染会生成正确的 url，例如。 `https://localhost/product/22,33,999/cat2/cat3/product-name`但大多数情况下它会生成：`https://localhost/product/999/?productSlug=product-name&category2Slug=cat2&category3Slug=cat3&category2Id=22&category3Id=33`

知道为什么会发生这种情况，并且控制器操作参数被添加为查询字符串参数而不是 URL 的一部分吗？

我正在开发用 C# 开发的 mvc4 应用程序，属性路由的版本是 3.4.2.0。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:38:39.197

您需要正确订购路线。正如您所拥有的，无法保证 5 条路线中的哪条路线首先出现。您可以通过访问 routes.axd 进行确认。

破坏你的 url 会发生什么是路由`"{productId}"`首先匹配，所以你所有的路由参数都被添加为查询字符串值。要解决此问题，请执行以下操作：

```
[GET("product/{a}/{b}/{c}/{d}", ActionPrecedence = 1)]
[GET("product/{a}/{b}/{c}", ActionPrecedence = 2)]
[GET("product/{a}/{b}", ActionPrecedence = 3)]
[GET("product/{a}", ActionPrecedence = 4)]
[GET("product", ActionPrecedence = 5)] 
```

这有助于通过从最具体到最不具体的路由排序来生成 URL。如果您提供 a、b、c 和 d，则第一个路由将用于 URL 生成。如果只有 a、b 和 c，则将使用第二个，等等......

# hadoop - 在多节点 Cassandra 集群上运行 pig

> ID：14926247
> 
> 赞同：1
> 
> 时间：2013-02-17T21:25:48.097
> 
> 标签：hadoop, cassandra, apache-pig

我正在研究 BI 流程，该流程将从 cassandra 读取数据，使用 Map Reduce 创建摘要并写回不同的键空间。

从单个节点开始，一切都按我的预期工作，但是当移动到多节点时，我不确定我是否完全理解拓扑和配置。

我有一个带有 3 个节点的设置。每个都有一个 Cassandra 节点（版本 1.1.9）、数据节点和任务跟踪器（版本 0.20.2+923.421-CDH3U5）。NameNode 和作业跟踪器位于不同的服务器上。此时我正在尝试从 DataNode 服务器运行 Pig 脚本。

我不确定的是猪参数 PIG_INITIAL_ADDRESS。我假设查询将在所有 Cassandra 节点上运行，每个任务跟踪器只会查询本地 Cassandra 节点，而减速器将处理任何重复项。基于这个假设，我认为 PIG_INITIAL_ADDRESS 应该是 localhost。但是在运行 pig 脚本时它失败了：

> java.io.IOException: 无法连接到服务器 localhost:9160

我的问题是 - 初始地址是否应该是 Cassandra 节点中的任何一个，并且在集群上拆分地图是从 Cassandra 密钥分区完成的（我会得到我需要的分布）吗？如果我在哪里使用 java map reduce，我还需要提供初始地址吗？当前的实现是否假设 pig 是从 Cassandra 节点运行的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T17:34:16.603

PIG_INITIAL_ADDRESS 是环中 Cassandra 节点之一的地址。为了让 Hadoop 作业从 Cassandra 读取数据或向 Cassandra 写入数据，它只需要设置一些属性。这些属性也可用于在作业属性或运行作业的服务器上的默认 Hadoop 配置中进行设置。除此之外，这就像向工作跟踪器提交工作一样。

有关更多信息，我会查看示例/pig 下的 cassandra 源代码下载中的自述文件。里面也有很多解释。

# .htaccess - htaccess 重写与？论据？

> ID：14926249
> 
> 赞同：0
> 
> 时间：2013-02-17T21:25:59.863
> 
> 标签：.htaccess, mod-rewrite

我在这里做错了什么？

我搬到了一个新的网上商店平台（从 OSCommerce 到 Drual/Ubercart）。OSCommerce 使用参数来挑选产品。

我想从这里重定向：

[http://www.ztwistbooks.com/oscstore/product_info.php?products_id=64](http://www.ztwistbooks.com/oscstore/product_info.php?products_id=64)

对此：

[http://www.ztwistbooks.com/node/39](http://www.ztwistbooks.com/node/39)

这不起作用（它给出了 404）：

`RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^oscstore/product_info.php\?products_id\=64$ "http\://www.ztwistbooks.com/node/39" [R=302,L]`

其他重写规则很好，例如，我可以重定向不使用 ?arg=value 的东西，它工作正常：

`RewriteCond %{HTTP_HOST} ^.*$
RewriteRule ^oscstore/?(.*)$ "http\://www.ztwistbooks.com/index.php" [R=301,L]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:49:17.123

`RewriteRule`的模式应用于 URL 路径，所以你需要这样的东西：

```
RewriteCond %{QUERY_STRING} ^products_id=64$
RewriteRule ^oscstore/product_info.php$ http://www.ztwistbooks.com/node/39 [R=302,L] 
```

# objective-c - 使用 UIImageView 作为 NSMutableDictionary 中的键来查找布尔值

> ID：14926255
> 
> 赞同：1
> 
> 时间：2013-02-17T21:26:39.560
> 
> 标签：objective-c, uiimageview, nsdictionary, nsmutabledictionary

标题基本概括了所有内容。我想创建一个 NSMutableDictionary，在其中使用 UIImageViews 来查找布尔值。这是它的样子：

我的 .h 文件：

```
@interface ViewController : UIViewController{
    UIImageView *image1;
    UIImageView *image2;
    NSMutableDictionary *isUseable;
}

@property (nonatomic, retain) IBOutlet UIImageView *image1;
@property (nonatomic, retain) IBOutlet UIImageView *image2;
@property (nonatomic, retain) NSMutableDictionary *isUseable; 
```

我的 .m 文件：

```
@synthesize image1, image2;
@synthesize isUseable

- (void)viewDidLoad
{
    isUseable = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                 @NO, image1,
                 @NO, image2,nil];
}

-(void)runEvents{
    if(some condition){
        [isUseable setObject:@YES forKey:(id)image1];
    }

    //Use it later:
    if(isUseable[image1]){
        //Do stuff
    }
} 
```

它可以编译，但是当我运行它时，我得到一个未捕获的异常 'NSInvalidArgumentException'，原因：'-[UIImageView copyWithZone:]: unrecognized selector sent to instance。

我猜问题在于 NSDictionary 类复制了它的键。有没有办法让字典在这种情况下工作？如果没有，我应该如何设置我想要的查找？有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:39:33.667

是的，问题是密钥`NSDictionary`必须符合`NSCopying`协议并且`UIImage`不符合。

一种解决方案是给每个图像一个唯一的标签。然后使用图像的标签作为键（将其包装在 中`NSNumber`）。

```
- (void)viewDidLoad {
    isUseable = [ @{ @(image1.tag) : @NO, @(image2.tag) : @NO } mutableCopy];
}

-(void)runEvents {
    if(some condition) {
        [isUseable setObject:@YES forKey:@(image1.tag)];
    }

    //Use it later:
    if(isUseable[@(image1.tag)]) {
        //Do stuff
    }
} 
```

只需添加代码即可查看每个图像的`tag`属性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T22:33:06.590

rmaddy 说的很对：`NSDictionary`必须符合`NSCopying`协议`UIImage`而不符合。

我建议`@(image.hash)`用作字典键。这就像一个指纹`UIImage`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:41:20.173

输入的键`NSDictionaries`必须符合`NSCopying`和`UIImageView`不符合。您将不得不找到不同的密钥，或者您可以扩展`UIImageView`以符合`NSCopying`. 有关[如何](https://stackoverflow.com/questions/2081177/make-uiimage-conform-to-the-nscopying-protocol)使用`UIImage`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-20T21:12:23.720

从图像中获取原始数据（不是重新渲染的 PNG 或 JPG 表示），然后通过内置的 common-crypto 运行它以获取数据的 SHA256，这将是您的密钥。

其他答案建议使用内置的实例属性`.hash`，但它很容易发生冲突，并且最终经常发生（我们在我们的一个应用程序中遇到了字符串冲突，它导致了一个严重的错误）。

```
#include <CommonCrypto/CommonDigest.h>

-(NSString *)keyFromImage:(UIImage *)image {

    NSData *imageData = (__bridge NSData *)CGDataProviderCopyData(CGImageGetDataProvider(image.CGImage));

    unsigned char result[CC_SHA256_DIGEST_LENGTH];
    CC_SHA256((__bridge const void *)imageData, (CC_LONG)imageData.length, result);

    NSMutableString *imageHash = [NSMutableString stringWithCapacity:CC_SHA256_DIGEST_LENGTH*2];

    for(int i = 0; i<CC_SHA256_DIGEST_LENGTH; i++) {
        [imageHash appendFormat:@"%02x",result[i]];
    }

    return imageHash;

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-20T21:49:58.373

根据您的对象的管理方式，您可以将其在内存中的地址用作键（这适用于 UIImageView 或 UIImage ，因为关于此问题的一般讨论似乎围绕一个/或展开）：

`myDictionary[@((intptr_t)myObject)] = myValue;`

# visual-c++ - C1905/LNK1257 结合 x64 发布库

> ID：14926258
> 
> 赞同：1
> 
> 时间：2013-02-17T21:26:57.137
> 
> 标签：visual-c++, linker, static-libraries

我已经建立了 zlib 和 libpng 的静态库版本。两者都可以编译成 .lib 文件。我正在使用 MSVC 2010。

通过此设置，要使用 libpng.lib，您还需要链接到 zlib.lib。为避免这种情况，我尝试使用 lib.exe 将 zlib 直接链接到 libpng。我的调用看起来像：

```
call "C:/Program Files (x86)/Microsoft Visual Studio 10.0/VC/bin/lib.exe"  /OUT:x64\Release\libpng2.lib  x64\Release\libpng.lib  ..\zlib\x64\Release\zlib.lib  /LTCG 
```

在他们的两个项目设置中，我明确地将“图书馆员->常规->目标机”设置为 MachineX64。而且，使用 dumpbin，我可以检查相关的 zlib.lib 和 libpng 是否都针对 x64 进行了编译。

此外，“General->Whole Program Optimization”和“C/C++->Optimization->Whole Program Optimization”具有相同的值。

该问题仅发生在 x64 Release 配置中。x86 Debug、x86 Release 和 x64 Debug 都可以正常工作。

编辑：具体来说，问题是我收到 C1905/LNK1257 错误：

```
C1905: Front end and back end not compatible (must target same processor).
LNK1257: code generation failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-20T15:45:15.917

我在 VS2012 中遇到了这个问题。您调用的 lib.exe 是 x86 工具的一部分。在*VC/bin的**amd64*子文件夹中，您将找到 x64 版本。打开*Visual Studio x64 Win64 命令提示符*将正确设置您的 PATH，或者您可以直接调用 x64 lib.exe，并像现在一样指定其完整路径。

# java - setenv.sh 中的多行 JAVA_OPTS

> ID：14926260
> 
> 赞同：16
> 
> 时间：2013-02-17T21:27:01.230
> 
> 标签：java, tomcat7

我正在尝试`setenv.sh`在 Ubuntu 12/Tomcat 7 上设置我的。Tomcat 已经安装了 apt-get 我试图创建一个多行`JAVA_OPTS`变量，但一直遇到错误消息。

```
#!/bin/sh
export JAVA_OPTS="$JAVA_OPTS -server \
-Xms512m -Xmx512m"

: not foundtomcat7/bin/catalina.sh: 4: /usr/share/tomcat7/bin/setenv.sh: 
Using CATALINA_BASE:   /usr/share/tomcat7
Using CATALINA_HOME:   /usr/share/tomcat7
Using CATALINA_TMPDIR: /usr/share/tomcat7/temp
Using JRE_HOME:        /usr/lib/jvm/java-7-oracle/
Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
Error: Could not find or load main class 
```

* * *

```
#!/bin/sh
export JAVA_OPTS="$JAVA_OPTS -server -Xms512m -Xmx512m"

: not foundtomcat7/bin/catalina.sh: 3: /usr/share/tomcat7/bin/setenv.sh: 
Using CATALINA_BASE:   /usr/share/tomcat7
Using CATALINA_HOME:   /usr/share/tomcat7
Using CATALINA_TMPDIR: /usr/share/tomcat7/temp
Using JRE_HOME:        /usr/lib/jvm/java-7-oracle/
Using CLASSPATH:       /usr/share/tomcat7/bin/bootstrap.jar:/usr/share/tomcat7/bin/tomcat-juli.jar
Invalid maximum heap size: -Xmx512m
Error: Could not create the Java Virtual Machine.
Error: A fatal exception has occurred. Program will exit. 
```

我已将其更新为此，但在回声位置仅显示最后一行。

```
#!/bin/sh
JAVA_OPTS="$JAVA_OPTS -server -Xms704m -Xmx704m"
JAVA_OPTS="$JAVA_OPTS -XX:OnOutOfMemoryError=/usr/share/scripts/on_server_crash.sh"
JAVA_OPTS="$JAVA_OPTS -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=/var/log/tomcat7"
JAVA_OPTS="$JAVA_OPTS -XX:MaxPermSize=128m -XX:MaxNewSize=256m -XX:NewSize=256m"
echo $JAVA_OPTS
JAVA_OPTS="$JAVA_OPTS -XX:SurvivorRatio=12 -XX:MaxTenuringThreshold=0"
JAVA_OPTS="$JAVA_OPTS -XX:+UseConcMarkSweepGC -XX:+CMSIncrementalMode"
JAVA_OPTS="$JAVA_OPTS -XX:+CMSIncrementalPacing -XX:+CMSClassUnloadingEnabled"
JAVA_OPTS="$JAVA_OPTS -XX:+CMSPermGenSweepingEnabled -XX:+DisableExplicitGC"
JAVA_OPTS="$JAVA_OPTS -XX:+UseParNewGC -XX:+UseTLAB"
JAVA_OPTS="$JAVA_OPTS -Djava.awt.headless=true"
JAVA_OPTS="$JAVA_OPTS -javaagent:$NR_JAR -Dnewrelic.environment=production"
echo $JAVA_OPTS
export JAVA_OPTS 
```

当我在没有导出选项的情况下尝试“每个命令在自己的行上”时，我得到“无法识别的选项 -server

```
#!/bin/sh
JAVA_OPTS="$JAVA_OPTS -server"
JAVA_OPTS="$JAVA_OPTS -Xms704m"
JAVA_OPTS="$JAVA_OPTS -Xmx704m"
JAVA_OPTS="$JAVA_OPTS -XX:OnOutOfMemoryError=/usr/share/scripts/on_server_crash.sh"
JAVA_OPTS="$JAVA_OPTS -XX:+HeapDumpOnOutOfMemoryError"
JAVA_OPTS="$JAVA_OPTS -XX:HeapDumpPath=/var/log/tomcat7"
JAVA_OPTS="$JAVA_OPTS -XX:MaxPermSize=128m"
JAVA_OPTS="$JAVA_OPTS -XX:MaxNewSize=256m"
JAVA_OPTS="$JAVA_OPTS -XX:NewSize=256m"
JAVA_OPTS="$JAVA_OPTS -XX:SurvivorRatio=12"
JAVA_OPTS="$JAVA_OPTS -XX:MaxTenuringThreshold=0"
JAVA_OPTS="$JAVA_OPTS -XX:+UseConcMarkSweepGC"
JAVA_OPTS="$JAVA_OPTS -XX:+CMSIncrementalMode"
JAVA_OPTS="$JAVA_OPTS -XX:+CMSIncrementalPacing"
JAVA_OPTS="$JAVA_OPTS -XX:+CMSClassUnloadingEnabled"
JAVA_OPTS="$JAVA_OPTS -XX:+CMSPermGenSweepingEnabled"
JAVA_OPTS="$JAVA_OPTS -XX:+DisableExplicitGC"
JAVA_OPTS="$JAVA_OPTS -XX:+UseParNewGC"
JAVA_OPTS="$JAVA_OPTS -XX:+UseTLAB"
JAVA_OPTS="$JAVA_OPTS -Djava.awt.headless=true"
JAVA_OPTS="$JAVA_OPTS -javaagent:$NR_JAR"
JAVA_OPTS="$JAVA_OPTS -Dnewrelic.environment=production"
echo JAVA_OPTS 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-18T11:20:24.143

嗯，删除整个文件并重新创建它，现在它可以工作了.....现在使用这种风格

```
export JAVA_OPTS="$JAVA_OPTS\
 -server\
 -Xms704m\
 -Xmx704m\
 -XX:OnOutOfMemoryError=/usr/share/scripts/on_server_crash.sh\
 -XX:+HeapDumpOnOutOfMemoryError\
 -XX:HeapDumpPath=/var/log/tomcat7\
 -XX:MaxPermSize=128m\
 -XX:MaxNewSize=256m\
 -XX:NewSize=256m\
 -XX:SurvivorRatio=12\
 -XX:MaxTenuringThreshold=0\
 -XX:+UseConcMarkSweepGC\
 -XX:+CMSIncrementalMode\
 -XX:+CMSIncrementalPacing\
 -XX:+CMSClassUnloadingEnabled\
 -XX:+CMSPermGenSweepingEnabled\
 -XX:+DisableExplicitGC\
 -XX:+UseParNewGC\
 -XX:+UseTLAB\
 -Djava.awt.headless=true\
 -javaagent:$NR_JAR\
 -Dnewrelic. environment=production" 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-17T21:35:05.507

你会更好：

```
JAVA_OPTS="$JAVA_OPTS -server "
JAVA_OPTS="$JAVA_OPTS -Xms512m -Xmx512m"
export JAVA_OPTS 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-31T22:30:12.810

使用类似于 Marc 的东西结束，但在属性定义中使用空格转义

```
export JAVA_OPTS="$JAVA_OPTS \
-DFOO=\"bar bar\" \
-DBAZ=\"bar2 bar2\" " 
```

# php - 如何重写 url domain.com/?id=123456 => domain.com/123456/

> ID：14926268
> 
> 赞同：-3
> 
> 时间：2013-02-17T21:28:02.853
> 
> 标签：php, url, seo, search-engine, friendly-url

如何使用搜索引擎友好的网址制作网站？我需要特殊的 PHP 代码而不是：

```
$_GET['id'] 
```

重写 URL 后如何访问“id”变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:35:08.817

在您的示例中，您只需要在主目录中的 .htaccess 文件中添加以下代码。

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule /(.*) ?id=$1 
```

不要忘记创建链接`domain.com/123456`样式。Web 服务器将正确解析`domain.com/123456`。例如：

```
<a href='domain.com/123456'>the link</a> 
```

这是一个非常基本的问题，互联网上有数百万的教程。只是做一些谷歌搜索的伙伴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:46:50.377

只需将其添加到您的 htaccess 文件中

```
Options +FollowSymLinks
RewriteEngine on

RewriteRule /(.*) ?id=$1 [QSA,NC,L] 
```

注意：如果你已经有

```
Options +FollowSymLinks
RewriteEngine On 
```

在您的 htaccess 文件中，只需放置

```
RewriteRule /(.*) ?id=$1 [QSA,NC,L] 
```

在它下面，忽略其余的

您现在访问的是 domain.com/123456/，而不是访问 domain.com/?id=123456。然后在该页面上，您仍然可以像往常一样使用 $_GET['id']

# java - 等价于 Java 中的 await(x==0)

> ID：14926280
> 
> 赞同：3
> 
> 时间：2013-02-17T21:29:25.003
> 
> 标签：java, concurrency, pthreads, semaphore

例如，在 Pthreads 中，有可能让进程等待某个条件，例如：

```
<await (nr == 0 ^ nw == 0) nw++>; 
```

有没有办法在Java中使用信号量以类似的方式做到这一点？等待像 nr==0 这样的条件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:34:33.567

如果它是一次性事件，您可以[使用`CountDownLatch`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)：

```
private final CountDownLatch xIsZeroLatch = new CountDownLatch(1); 
```

然后按如下方式使用它：

*   在您的等待线程中：

    ```
    xIsZeroLatch.await(); 
    ```

*   在其他线程中：

    ```
    x = newX();
    if (x == 0) xIsZeroLatch.countDown(); 
    ```

如果条件可以在 true 和 false 之间多次更改，并且每次更改都需要一个事件，则可以使用 a `Semaphore`with one permit。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:37:55.247

```
public void setX(int a) {
    x = a;
    if(x==0) {
         //do stuff
    }
} 
```

然后使用该 setter 而不是`x = a`.

# asp.net-mvc - 当找不到图像时显示默认图像

> ID：14926282
> 
> 赞同：2
> 
> 时间：2013-02-17T21:29:26.063
> 
> 标签：asp.net-mvc, iis, asp.net-mvc-4, url-rewriting, iis-7.5

我有一个在 iis 7.5 上运行的 mvc 4 应用程序。该应用程序生成一个产品目录，其中包含分配给每个产品的图像。

有时有些产品没有分配任何图像，在这种情况下，我想包含一个占位符图像而不是什么都没有。直到运行时和 404 发生时，图像才不存在。

我正在考虑在 IIS 中设置一个 url 重写规则，如果从匹配条件的图像返回 404，则显示默认图像。我对此有几个问题：

有可能吗？如果可以，怎么办？这样做是否存在性能问题？有没有其他方法可以实现上述目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:58:27.703

If you really want to handle this with IIS you could use the custom 404 error page configuration.
I don't know about the performance with this solution but I don't see a reason why it would be an issue.

1.  Setup a `Virtual Directory` containing all your images (let's call it `my_images`).

2.  Add your generic picture at the virtual directory root (so this picture is available using the url `http://yourwebsite.com/my_images/generic.jpg`).

3.  In IIS manager select your `my_images` virtual directory and under `Error Pages` edit the 404 custom error page as following:

    ![404](../Images/a15c87b7ab510a855545d0ab2520669f.png)

You should now have your generic picture when a 404 error is triggered when trying to access a resource under your virtual directory `my_images`.

**Limitation:**

The custom 404 error page is not limited to the image format so any request triggering the 404 error under your virtual directory will render the generic image.
If you want to test using `localhost`, you need to click on `Edit Feature Settings...` and change the value to `Custom error pages`:

![features](../Images/11db5b65fd9171d58cc4bcaf391c2aea.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:48:35.873

好问题。我的第一个想法是找出文件是否存在于服务器上。我假设这不像拥有图像的数据库列那么容易。

也许您有一个场景，您查看一个文件夹，其中图像与 productId（或类似名称）同名。您可以使用 System.IO.FileExists() 来确定文件是否存在。这可能不是非常有效。

另一个想法可能是查看文件所在的目录并将它们放入某种字典中。您可以将其存储在应用程序缓存中。您可以在渲染图像之前查看缓存。当然，您想要一种刷新该字典的方法（即为该产品上传产品图像）

我不知道重写将如何工作。我认为你可以做一些工作来避免这样做。

```
<img src="(@Dictionary[key] != null ? Model.Image : Model.EmptyImage)" /> 
```

# meteor - 流星：如何更改包括包裹的顺序

> ID：14926286
> 
> 赞同：0
> 
> 时间：2013-02-17T21:30:20.317
> 
> 标签：meteor

在[这篇](https://stackoverflow.com/questions/12946443/how-do-i-debug-a-twitter-bootstrap-modal-box?rq=1)关于 stackoverflow的帖子中，作者建议`bootstrap.js` **在**`jquery.js`. 在他写道的其他情况下，引导模式将无法正常工作。所以我查看了我的起始页的来源，我看到，meteor在jquery**之后包含引导程序。**现在我的问题是：**如何更改流星中包含的包的顺序？**

编辑：我问的原因是我在引导模式上有问题。例如，当我按下内部按钮或在输入中输入内容时，模式消失了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:07:14.730

添加包的顺序取决于它们的文件名。

默认顺序应该没问题，我也将模式与 jquery 和 bootstrap 包一起使用，没有问题。您是自己添加这些脚本标签吗？你真的不需要它们。

为什么不用流星安装软件包：

```
meteor add bootstrap
meteor add jquery 
```

# c# - 如何创建仅在插件可用时才调用函数的插件机制？

> ID：14926287
> 
> 赞同：2
> 
> 时间：2013-02-17T21:30:20.680
> 
> 标签：c#, design-patterns, architecture, asp.net-mvc-4

对不起，如果我不够清楚，我很难写这个问题。

我下载了一个开源软件。我想扩展功能，所以我想创建模块来封装这些模块的功能，这些模块将是 .dll 文件。我希望一个完全独立于另一个：如果我在配置文件中将一个键设置为 true 并且如果文件夹中存在 DLL，则应该加载插件。

**问题是：如何动态调用插件（仅应用插件调用）？**

如果我直接引用插件类，我将不得不引用插件 dll，但我希望能够在没有插件的情况下运行核心软件。是否有任何设计模式或其他机制允许我仅在应用插件时加载和使用 DLL，并且仍然可以在没有插件的情况下运行核心软件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:53:03.407

有多种方法可以实现这一点，我将在这里描述一个简单的解决方案。

制作每个插件必须实现的通用接口，以便与核心应用程序集成。这是一个例子：

```
// Interface which plugins must implement
public interface IPlugin
{
  void DoSomething(int Data);
}

// Custom plugin which implements interface
public class Plugin : IPlugin
{
  public void DoSomething(int Data)
  {
    // Do something
  }
} 
```

要实际从 dll 加载插件，您需要使用反射，例如：

```
// Load plugin dll and create plugin instance
var a = Assembly.LoadFrom("MyCustomPlugin.dll");
var t = a.GetType("MyCustomPlugin.Plugin");
var p = (IPlugin)Activator.CreateInstance(t);

// Use plugin instance later
p.DoSomething(123); 
```

您可以为插件程序集和类使用某种命名约定，以便轻松加载它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:40:26.600

您可以使用[MEF](http://mef.codeplex.com/)。

> 托管可扩展性框架 (MEF) 是 .NET 的组合层，可提高大型应用程序的灵活性、可维护性和可测试性。MEF 可用于第三方插件扩展，或者它可以为常规应用程序带来松散耦合的插件式架构的好处。

[这](http://mef.codeplex.com/wikipage?title=Guide&referringTitle=Home)是编程指南。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T21:41:09.103

.NET 术语中的插件或 DLL 称为程序集。查看 Assemply.Load 方法，以及[msdn 中的本指南](http://msdn.microsoft.com/en-us/library/ms173101%28v=vs.80%29.aspx)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T00:37:44.927

[`System.Reflection`命名空间](http://msdn.microsoft.com/en-us/library/f7ykdhsy.aspx)提供了许多工具来帮助您处理这种情况。

你可以

*   检查程序集（DLL 文件）以检查其中的对象，
*   找到您正在寻找的类型（特定类、实现特定接口的类等）
*   create new instances of those classes, and
*   invoke methods and access properties of those classes.

Typically you would write a class in the extension which does some work, create a method (e.g. `DoWork()`), and then invoke that method dynamically.

The MEF mentioned in this question does exactly this, just with a lot more framework.

# c# - 实体框架：实现单元测试的接口

> ID：14926291
> 
> 赞同：3
> 
> 时间：2013-02-17T21:30:35.677
> 
> 标签：c#, entity-framework, unit-testing, interface

今天我想开始对一个小的 asp.net MVC 3 Web（测试）应用程序进行单元测试，以学习一些新东西。

但事情比我预想的还要糟糕……

我现在已经阅读了一些关于与实体框架相关的单元测试的线程，现在我首先想为我的实体框架相关类实现接口，以便我可以为我的单元测试实现一个内存中的“数据库”。

我的代码库来自[ASP.NET MVC 教程](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-the-repository-and-unit-of-work-patterns-in-an-asp-net-mvc-application)。我读过[MSDN](http://msdn.microsoft.com/en-us/ff714955.aspx)，但在我的情况下它对我没有帮助。

我想向您展示我的代码。我正在使用带有存储库的工作单元模式：

工作单位：

```
public class SqlUnitOfWork : IUnitOfWork, IDisposable
{
    private SqlContext context = new SqlContext();
    private IGenericRepository<Message> messageRepository;
    private IGenericRepository<Receipt> receiptRepository;
    private IGenericRepository<Useraccount> useraccountRepository;
    private bool disposed = false;

    public IGenericRepository<Message> MessageRepository
    {
        get
        {
            if (this.messageRepository == null)
            {
                this.messageRepository = new SqlGenericRepository<Message>(context);
            }
            return messageRepository;
        }
    }

    public IGenericRepository<Receipt> ReceiptRepository
    {
        get
        {
            if (this.receiptRepository == null)
            {
                this.receiptRepository = new SqlGenericRepository<Receipt>(context);
            }
            return receiptRepository;
        }
    }

    public IGenericRepository<Useraccount> UseraccountRepository
    {
        get
        {
            if (this.useraccountRepository == null)
            {
                this.useraccountRepository = new SqlGenericRepository<Useraccount>(context);
            }
            return useraccountRepository;
        }
    }

    public SqlUnitOfWork()
    {
    }

    ~SqlUnitOfWork()
    {
    }

    public virtual void Dispose(bool disposing)
    {
        if (!this.disposed)
        {
            if (disposing)
            {
                context.Dispose();
            }
        }

        this.disposed = true;
    }

    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    public void Save()
    {
        context.SaveChanges();
    }
} 
```

这个实现了我创建的接口。

我的 sql 通用存储库：

```
public class SqlGenericRepository<TEntity> : IGenericRepository<TEntity> where TEntity : class
{
    internal SqlContext context;
    internal DbSet<TEntity> dbSet;

    public SqlGenericRepository(SqlContext context)
    {
        this.context = context;
        this.dbSet = context.Set<TEntity>();
    }

    ~SqlGenericRepository()
    {
    }

    public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter = null, 
        Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null, string includeProperties = "")
    {
        IQueryable<TEntity> query = dbSet;

        if (filter != null)
        {
            query = query.Where(filter);
        }

        foreach (var includeProperty in includeProperties.Split
            (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
        {
            query = query.Include(includeProperty);
        }

        if (orderBy != null)
        {
            return orderBy(query).ToList();
        }
        else
        {
            return query.ToList();
        }
    }

    public virtual TEntity GetByID(object id)
    {
        return dbSet.Find(id);
    }

    public virtual void Insert(TEntity entity)
    {
        dbSet.Add(entity);
    }

    public virtual void Delete(object id)
    {
        TEntity entityToDelete = dbSet.Find(id);
        Delete(entityToDelete);
    }

    public virtual void Delete(TEntity entityToDelete)
    {
        if (context.Entry(entityToDelete).State == EntityState.Detached)
        {
            dbSet.Attach(entityToDelete);
        }
        dbSet.Remove(entityToDelete);
    }

    public virtual void Update(TEntity entityToUpdate)
    {
        dbSet.Attach(entityToUpdate);
        context.Entry(entityToUpdate).State = EntityState.Modified;
    }
} 
```

它实现了我编写的接口：

```
public interface IGenericRepository<TEntity> where TEntity : class
{
    IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter = null, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null, string includeProperties = "");

    TEntity GetByID(object id);

    void Insert(TEntity entity);

    void Delete(object id);

    void Delete(TEntity entityToDelete);

    void Update(TEntity entityToUpdate);
} 
```

我现在想为我的单元测试实现一个“InMemoryGenericRepository”，然后是一个“InMemoryUnitOfWork”。那些“InMemoryGenericRepository”会是什么样子？

我想我会在存储所有数据的存储库中使用通用列表：

```
IEnumerable<TEntity> List { get; set; } 
```

但是我怎样才能适应这种方法：

```
public virtual IEnumerable<TEntity> Get(Expression<Func<TEntity, bool>> filter = null, Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null, string includeProperties = "")
{
    IQueryable<TEntity> query = dbSet;

    if (filter != null)
    {
        query = query.Where(filter);
    }

    foreach (var includeProperty in includeProperties.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
    {
        query = query.Include(includeProperty);
    }

    if (orderBy != null)
    {
        return orderBy(query).ToList();
    }
    else
    {
        return query.ToList();
    }
} 
```

所以它适用于我的

```
IEnumerable<TEntity> List { get; set; } 
```

我希望你能做到我的问题结束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:58:21.670

如果您的课程是 POCO，那么它们看起来像这样：

```
namespace Project.Model // auto-generated Foo.cs
{
    public partial class Foo // notice partiality
    {
    }
} 
```

然后你写这个：

```
namespace Project.Model // custom Foo.cs in another folder
{
    public partial class Foo : IEntity // notice interface
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:04:12.103

你也可以重写你的惰性属性：

```
private IGenericRepository<Message> messageRepository;

public IGenericRepository<Message> MessageRepository
{
    get
    {
        return messageRepository ?? (messageRepository = new IGenericRepository<Message>());
    }
} 
```

或者

```
private Lazy<IGenericRepository<Message>> messageRepository = new Lazy<IGenericRepository<Message>>(new IGenericRepository<Message>()));

public IGenericRepository<Message> MessageRepository
{
    get
    {
        return messageRepository.Value;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:27:40.720

通用存储库模式不是一个好的模式。为了换取存储独立性（你可能不需要它。你喜欢拥有它但你并不真正需要它），它会让你付出很多痛苦。由于以下几个原因，您真的很难编写可查询的内存存储库：

*   实体具有必须正确设置的关系
*   内存中查询的行为与 SQL 查询不同（例如，它们区分大小写）
*   内存中查询没有优化器，这会导致测试运行时间过长
*   基本上，您现在必须测试测试，因此您可以确定不存在行为差异

此外，通过抽象出您的 ORM，您可以不使用它的*任何*功能。您只能使用最通用和一般的功能。

几年前我就这样做了，痛苦还没有结束。我发现使用真正的 SQL 数据库进行测试是一种很好的模式。这样你就不需要任何存储库并且可以测试真实的东西。这有它的问题，但它是可行的。

这个问题的解决方案是放弃通用存储库模式。

# c++ - 代码编译后返回相同的东西？

> ID：14926292
> 
> 赞同：-3
> 
> 时间：2013-02-17T21:30:44.663
> 
> 标签：c++

我的代码现在有一些严重的问题。任务是编写一个接受 4 位整数的函数，对其进行加密并返回新加密的数字。

出于某种原因，我的代码在编译后返回完全相同的内容（数字 1886676324）。它甚至不阅读 cout 声明。有人可以看看，看看有什么问题吗？

```
#include <iostream>
#include <stdio.h>
#include <stdlib.h>
using namespace std;

int numSwap(int A[])
{
int t;
int encryptedVal= 0;
for(int i =0; i<4; i++)
{
if((i == 0)|(i == 1)){
A[i+2] = t;
A[i+2] = A[i];
A[i] = t;
}
encryptedVal = (A[i] * 10^(3-i)) + encryptedVal;
}
return encryptedVal;
}

int encrypt(int N)
{
int A[4];
for(int i =0; i<4; i++)
{
div_t M = div(N,(10^(3-i)));
div_t Encrypted = div(7+M.quot,10);
A[i] = Encrypted.rem;
N= M.rem;
}
return numSwap(A);
}

int main()
{
int UserVal;
cout<< 'Please input the 4 digit value to be encrypted' <<endl;
cin>>UserVal;
encrypt(UserVal);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:39:28.700

要解决您的问题，请`cout`确保对字符串文字使用双引号：

```
cout << "Please input the 4 digit value to be encrypted" << endl; 
```

单引号用于类型为 的字符文字（如`'a'`or `'b'`）`char`。如果您在字符文字中给出多个字符，则您将拥有一个具有实现定义值的类型的*多字符文字，因此您将获得作为输出的数字。*`int`

# c - 格式化打印到循环缓冲区

> ID：14926294
> 
> 赞同：5
> 
> 时间：2013-02-17T21:31:18.897
> 
> 标签：c, printf, stm32, circular-buffer

我正在为 STM32F3 mc (STM32F3-Discovery) 编写嵌入式代码。我需要向 UART 输出一些数据，并且为此使用 DMA，因为这使我可以专注于传感器读取和数据处理，而不是等待字节传输完成。然而问题是我必须结合：

1.  格式化输出（即来自 printf 的一些输出）
2.  多次连续打印（发生在上一次打印完成之前）

所以我在考虑一个循环缓冲区。但我认为我不知道如何让 sprintf 尊重缓冲区的结尾并继续写入缓冲区的开头。我当然可以创建另一个临时缓冲区，在那里打印并逐字节复制，但它对我来说并不优雅。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:35:27.790

一种解决方案可能是实现您自己`sprintf`的能够与环形缓冲区一起使用的解决方案。不幸的是，这不会帮助您解决更基本的问题：如果您的 ringbuffer 已满并且您调用 ，您会怎么做`sprintf`？

如果您的记忆力负担得起，我会建议这个问题的另一种解决方案：

这个想法基于两个链接的缓冲区列表（一个列表用于空闲缓冲区，一个列表作为传输队列）。缓冲区的大小相同，因此它们可以存储最坏情况长度的字符串。缓冲区构建一个简单的堆，其中分配/解除分配只是从空闲列表或传输列表中使元素出队/入队。

具有相同大小的缓冲区可确保您在动态分配内存时不会受到外部碎片影响，例如“棋盘式”。为这项工作构建自己的堆还可以让您完全控制可用于传输任务的总缓冲区大小。

我可以想象这个运行如下：

1.  您从空闲列表中分配一个缓冲区以将数据呈现到其中。
2.  使用您的渲染函数（例如 sprintf）渲染缓冲区中的数据
3.  将要发送的数据附加到传输队列（必要时触发传输）

对于 DMA 传输，您处理传输结束 IRQ。在那里，您将刚刚传输的缓冲区移动到“空闲列表”并为队列中的下一个缓冲区设置传输。

此解决方案不会是内存效率最高的，但运行时效率很好，因为您只写入一次内存并且分配/释放只是在某处获取/存储指针。当然，您必须确保您的应用程序和分配/解除分配的 IRQ 之间没有竞争条件。

也许这个想法会给你一个灵感来解决你的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:01:18.713

您可以近似的一种方法是将您的 printf 缓冲区分配为环形缓冲区大小的 2 倍，然后将前半部分用作环形缓冲区。检测溢出，将后半部分的溢出复制回前面（环形部分）。像这样的东西：

```
void xprintf(const char *format, ...)
{
  int written;
  va_list args;
  va_start(args, format);
  written = vsnprintf(buffer, HALF_BUFFER_SIZE, format, args);
  va_end(args);
  if (buffer + written > bufferStart + HALF_BUFFER_SIZE)
  { // time to wrap
    int overflow = (buffer + written) - (bufferStart + HALF_BUFFER_SIZE); 
    memmove(bufferStart, bufferStart + HALF_BUFFER_SIZE, overflow;
    buffer = bufferStart + overflow;
  }
} 
```

# ios - 移动安装广告被 Facebook 拒登

> ID：14926297
> 
> 赞同：0
> 
> 时间：2013-02-17T21:31:26.863
> 
> 标签：ios, facebook, mobile, installation, ads

我使用开发人员面板设置了一个移动应用程序，并添加了 Facebook SDK 页面上教程视频中提到的所有正确信息。

这是一个原生 iOS 应用，所以我提供了捆绑包 ID 和 App Store ID。我已经安装了 SDK，每当我在我的设备上运行它时，Facebook 都会注册安装。

但是，一旦我尝试使用“推广”功能来设置安装广告，它就会不断被 Facebook 拒绝，理由是 URL 不正确。该 URL 工作正常，因为我已经对其进行了多次测试。该 URL 由 Facebook 自己使用 App ID 生成。

我在更改广告素材后尝试再次提交，但我假设我已被列入黑名单，因为它立即被拒登。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T17:54:14.947

我有完全相同的东西。我认为 Facebook 在他们的广告仪表板中改变了很多东西。我昨天制作了一个新广告，它终于被批准了。再试一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T09:06:21.710

您的应用程序是否仅限于某个地区或国家？我的广告也未获批准，这就是我得到的：

“此广告的目标网址违反了我们的广告指南或无法审核。请检查您提交的网址，确保其没有任何拼写错误并且符合我们的广告指南。请注意，所有网站都必须是无论查看者的位置如何，都可以正常查看和运行。此外，禁止网站链接到专有文件类型（.pdf、.doc 等）、启动自动下载或以任何方式（例如，弹出窗口）捕获用户的浏览器任何形式的）。 ”

就我而言，唯一合乎逻辑的解释是该应用程序的可用性，因为它仅在一个国家/地区可用。我直接链接到应用商店，所以这应该不是问题......

很抱歉我的回复，我知道这不是很有帮助，但是网上关于它的信息太少了。我需要做侦探工作才能了解正在发生的事情。

# ios - 应用程序激活后iOS正确恢复

> ID：14926300
> 
> 赞同：1
> 
> 时间：2013-02-17T21:31:49.683
> 
> 标签：ios, cocos2d-iphone

我正在使用 Cocos2D 为 iOS 构建游戏。在我的游戏中，我有一个暂停菜单，可以在玩游戏时拉起。一个简单的点击将从暂停菜单返回到游戏。`applicationDidBecomeActive`如果调用该方法，我想实现的是一种在暂停菜单上恢复游戏的干净方法。问题是只有 appDelegate 收到对 的调用`applicationDidBecomeActive`，而我的暂停菜单比这更深。现在，我基本上是`applicationDidBecomeActive`通过大约 4 个不同的层将调用传递到暂停菜单。必须有更清洁的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:35:10.643

当然是。`UIApplicationDidBecomeActiveNotification`只需从任何方便的地方添加观察者即可。应用程序状态更改可以通过这种方式以及通过应用程序的委托进行挂钩。

（[文档在这里。](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:36:26.973

[在此处](https://stackoverflow.com/questions/2191594/send-and-receive-messages-through-nsnotificationcenter-in-objective-c)和[Apple](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNotificationCenter_Class/Reference/Reference.html)阅读有关 NSNotificationCenter 的 信息，或者在任何地方接收[UIApplicationDidBecomeActiveNotification](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T05:55:25.587

在 appdelegate.h 中获取一个带有属性的 BOOL 变量并合成它，然后当从任何场景按下暂停按钮时，将此变量设置为是。在 appdelegate 的 applicationDidBecomeActive 方法中检查 if(self.pause == YES) 然后不要恢复 ccdirector 否则恢复它我在我的游戏中使用了它，当我按下暂停然后按下主页按钮时它工作正常，当回来时应用程序是仍然暂停。试试这个

# html - Css 标题/文本位置

> ID：14926303
> 
> 赞同：0
> 
> 时间：2013-02-17T21:32:17.987
> 
> 标签：html, css

您好，谁能帮我解决定位问题？ [这是我必须使用的](http://filehop.org/pkb/artistwebtemplate/images.html)

好的，我希望这些标题更接近图片。
这是html

```
<li><a href="http://goo.gl/Kt472"><img src="http://dsjvpv76ko1eo.cloudfront.net/uimg/82ac1838e5ac76806ad2f85cf6afa1fe.90x90" alt="Img" /></a></li> 
```

这是CSS：

```
text-shadow:2px 2px 4px rgba(27,54,33,0.8);font-weight:normal;color:#4D311E;letter-spacing:4pt;word-spacing:-1pt;font-size:15px;text-align:right;font-family:tahoma, verdana, arial, sans-serif;line-height:0;margin-left: 100px; margin-bottom:150px; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:34:12.743

更改`text-align:right`为`text-align:left`。

```
#tr_caption {
    text-align:left;
} 
```

这是结果：

![在此处输入图像描述](../Images/080d778e1c4c3669e64646d520b27ed1.png)

# javascript - Javascript 在悬停时播放声音。在悬停时停止并重置

> ID：14926306
> 
> 赞同：6
> 
> 时间：2013-02-17T21:32:59.890
> 
> 标签：javascript, audio, onmouseover, onmouseout, onhover

```
function EvalSound(soundobj) {
    var thissound=document.getElementById(soundobj);
    thissound.currentTime = 0;  
    thissound.Play();
}

function StopSound(soundobj) {
    var thissound=document.getElementById(soundobj);
    thissound.Stop();
} 
```

这是我播放音频文件的代码，

```
onmouseover="EvalSound('sound1')" onmouseout="StopSound('sound1')" 
```

它目前正在悬停，但是当我回到它在它下面播放的图像时，它不会回到开头，它会继续播放

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T21:57:06.677

<embed> 标签是嵌入多媒体的老方法。您真的应该使用新的 HTML5 <audio> 或 <video> 标签，因为它们是嵌入多媒体对象的首选和标准化方式。您可以使用[HTMLMediaElement 界面](https://developer.mozilla.org/en-US/docs/DOM/HTMLMediaElement)来播放、暂停和搜索媒体（以及更多）。

这是一个[简单的示例](http://jsfiddle.net/PsyWolf/W3XdA/8/)，它在鼠标悬停时播放音频文件并在鼠标悬停时停止播放。

HTML：

```
<p onmouseover="PlaySound('mySound')" 
    onmouseout="StopSound('mySound')">Hover Over Me To Play</p>

<audio id='mySound' src='http://upload.wikimedia.org/wikipedia/commons/6/6f/Cello_Live_Performance_John_Michel_Tchaikovsky_Violin_Concerto_3rd_MVT_applaused_cut.ogg'/> 
```

Javascript：

```
function PlaySound(soundobj) {
    var thissound=document.getElementById(soundobj);
    thissound.play();
}

function StopSound(soundobj) {
    var thissound=document.getElementById(soundobj);
    thissound.pause();
    thissound.currentTime = 0;
} 
```

有关更多信息，请查看[MDN 嵌入音频和视频指南](https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T17:40:08.390

我有同样的问题，关于启动和停止音频。我使用 jQuery 没有任何其他插件。我的代码用于 mousedown 和 mouseup，但可以更改为其他操作。

HTML

```
<div class="soundbutton">
   cool wind sound
</div>
<audio id="wind-sound" src="wind-sound/wind.mp3"> 
```

Javascript

```
$('.soundbutton').on('mousedown', function () {     
    playWind();                                  //start wind sound
})
.on('mouseup', function () {                    
    stopWind();                                  //stops the wind sound
});

// my full functions to start and stop

function playWind () {                           //start wind audio
  $('#wind-sound')[0].volume = 0.7;
  $('#wind-sound')[0].load();
  $('#wind-sound')[0].play();
}
function stopWind () {                           //stop the wind audio
  $('#wind-sound')[0].pause();
  $('#wind-sound')[0].currentTime = 0;           //resets wind to zero/beginning
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-22T22:04:34.213

```
<html>

<script>
function stopAudio() {                      
player.pause();
player.currentTime = 0;           
}
</script>

<body>
<audio id="player" src="(place audio here)"></audio>

<div> 
<button onclick=" stopAudio()">Stop</button>
</div>

</body>
</html> 
```

//结束注意：您必须查看您的音频ID，因为我的名称为“播放器”，这就是它无法正常工作的原因，请在您的行中非常仔细地查看您的css和html。您必须注意的另一件事是您的调用函数，因为我的调用函数是 stopAudio()，您的调用函数可能会被命名为不同的。如果您正确使用调用方法，该函数仅适用于 css。

# header - 如何自动将注释头添加到程序中？代码::块

> ID：14926308
> 
> 赞同：1
> 
> 时间：2013-02-17T21:33:12.400
> 
> 标签：header, comments, codeblocks

我使用的是 DevC++。它在 EDIT/INSERT/COMMENT HEADER 下有一个选项可以自动添加评论标题。我切换到 Code::Blocks。Code::Blocks 有这个选项吗？我正在搜索互联网，但找不到有关如何执行此操作的任何信息。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-31T11:45:50.137

您需要的是**Code Snippets Plugin**，它已在默认 Code::Blocks 安装中可用。

> 从视图中检查“代码片段”。然后右键单击代码片段菜单并创建一个名为“评论”的子类别。然后右键单击“评论”类别，然后单击“添加片段”。然后粘贴您的评论标题并将其保存为“标题评论”。之后，您可以随时随地拖放您的标题评论。

类似地，可以为其他常用代码形成代码片段。

# css -

> ID：14926311
> 
> 赞同：0
> 
> 时间：2013-02-17T21:33:35.903
> 
> 标签：css, margin

如果我的 CSS 代码是：

```
h1 {
    font-family: Georgia, 'Times New Roman', Times, serif; 
    font-size: 2em; 
    margin-bottom:12px;
} 
```

一切都如我所料。但如果我`margin-bottom`的大于 12px，那么我的页面会向左浮动一点。

截至今天，我正在使用 Chrome 的最新版本。我也在使用 Meyer 的 reset.css 最新版本（v2.0）

我应该解决什么问题？你能指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:48:57.803

有没有检查过，将margin增加到12像素以上，会使整个页面无法垂直适应浏览器，从而触发滚动条出现在右侧，这会导致整个页面向左移动一点（如果您已将内容居中）？

# uicollectionview - 将笔尖加载到 UICollectionViewCell

> ID：14926317
> 
> 赞同：3
> 
> 时间：2013-02-17T21:34:24.680
> 
> 标签：uicollectionview, uicollectionviewcell

我刚刚开始使用 UICollectionView，所以请耐心等待！

如何将笔尖加载到单元格中？

看来我必须注册要使用的笔尖和类，但这不起作用。

代码：

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    [collectionView registerClass:[CluelessSymbolCell class] forCellWithReuseIdentifier:@"Symbol cell"];
    [collectionView registerNib:[UINib nibWithNibName:@"CluelessSymbolCell" bundle:[NSBundle mainBundle]]  forCellWithReuseIdentifier:@"Symbol cell"];

    CluelessSymbolCell *cell = (CluelessSymbolCell *)[collectionView dequeueReusableCellWithReuseIdentifier:@"Symbol cell" forIndexPath:indexPath];

    CluelessClue *clue = [clueManager clueForIndexPath:indexPath];

    [cell.backgroundImageView setImage:[UIImage imageNamed:[clue.imageNames objectAtIndex:0]]];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T14:08:11.640

事实证明，我的 nib 文件中有默认的视图控制器（它是隐藏的）以及我的自定义单元格 - 哦！

# ios - 检查 iOS 版本中是否存在 UIBarButtonSystemItemPageCurl

> ID：14926320
> 
> 赞同：0
> 
> 时间：2013-02-17T21:34:36.320
> 
> 标签：ios, objective-c, cocoa, typedef, uibarbuttonitem

我正在尝试检查`UIBarButtonSystemItemPageCurl`给定设备上是否存在。

*注意：`UIBarButtonSystemItemPageCurl`存在于 iOS 4.0 及更高版本。我的目标也是 iOS 3.1.3。不要担心目标 iOS 3 部分。*

目前尝试： `if (UIBarButtonSystemItemPageCurl != NULL)`

和

`if ((UIBarButtonSystemItemPageCurl) == TRUE)`

检查常量的存在（被`UIBarButtonSystemItemPageCurl`认为是常量吗？它是 的值`typedef enum` `UIBarButtonSystemIcon`）。这两种方法目前都不起作用。有人可以提供有关检查结构（而不​​是包含结构）中是否存在值的指导吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T04:58:35.640

如果您查看 UIBarButtonItem.h，您会发现它`UIBarButtonSystemItemPageCurl`是使用预处理器有条件地定义的：

```
typedef NS_ENUM(NSInteger, UIBarButtonSystemItem) {
    ⋮
#if __IPHONE_4_0 <= __IPHONE_OS_VERSION_MAX_ALLOWED
    UIBarButtonSystemItemPageCurl,
#endif
}; 
```

`…_MAX_ALLOWED`定义为 SDK 版本。一旦定义了常量，常量就一直存在。

比较它`NULL`是没有意义的，因为这不是一个指针。您实际上是将它与零进行比较，并且由于它不是枚举中的第一件事，因此它不是零，所以它从不`NULL`。

它*是*一个整数。`UIBarButtonSystemItemPageCurl`是 的同义词，并且无论操作系统版本如何，`23`该数字始终存在。`23`

所以问题变成了“是`UIBarButtonSystemItemPageCurl`（又名`23`）UIKit 会识别的东西吗？”</p>

找到它的一种方法是将它传递给`initWithBarButtonSystemItem:target:action:`并看看会发生什么。希望它会返回`nil`或抛出异常；无论哪种方式，您都可以通过在 iOS 3 设备上执行您需要执行的任何操作来检测并恢复。

另一种方法是向[设备询问它`systemVersion`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instp/UIDevice/systemVersion)`@"4.0"`并以能够理解版本号的方式进行比较。Growl 项目有[用于解析和比较版本号字符串的代码](http://code.google.com/p/growl/source/browse/Common/Source/GrowlVersionUtilities.m)。它是为 OS X 编写的，但在 iOS 上几乎不需要修改即可工作。

我会先做试试看的方法。只有当它静默失败（即，总是返回 UIBarButtonItem，即使在 iOS 3 上，并且您在 3 上获得的项目不起作用）时，您才应该求助于比较操作系统版本。

# c - 有人可以解释这个'typedef'的含义吗？

> ID：14926323
> 
> 赞同：1
> 
> 时间：2013-02-17T21:34:42.913
> 
> 标签：c, typedef

有人可以解释一下这个typedef吗？

```
typedef void (*_sig_func_ptr)(int); 
```

理解它的含义似乎对回答我的问题至关重要： [MPICH2 compilation issue using Cygwin](https://stackoverflow.com/questions/14915812/mpich2-compilation-issue-using-cygwin#comment20932150_14915812)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:36:07.730

它声明了一个类型，它是一个函数指针，它接受一个 int 并返回 void

可以像这样使用：-

```
void blah(int x)
{
}

_sig_func_ptr ptr;

ptr = blah;  // make ptr point to blah

ptr(12);     // now we can call blah by using the function pointer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:36:52.007

这是`typedef`函数指针类型的语法。

这`_sig_func_ptr`是 type 的别名`void (*)(int)`。

类型的对象`_sig_func_ptr`是指向具有一个`int`参数且不返回任何内容的函数的指针。

# javascript - 获取 Ajax 调用成功后传递的 Param 值

> ID：14926330
> 
> 赞同：0
> 
> 时间：2013-02-17T21:35:36.560
> 
> 标签：javascript, jquery, ajax

```
<a class="removeApp" data-app="12">Close Something </a>
$('.removeApp').click(function (e) {
   $.ajax({
       async: false,
       type: 'POST',
       url: '@Url.Action("Remove", "Something")',
       data: {
           id: $(this).data("app")
       },
       success: function (result, data) {
           console.log(this.data );  //gives id=12
           console.log (this.data["id"] ) ///gives nothing how do i get just 12
       }
    }) 
}); 
```

我正在尝试获取由参数名称传递的数据，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:48:13.053

那么数据应该看起来像“{'id'：12}”，这将是 JSON，您可以使用该`jQuery.getJSON()`函数，这将返回一个 javascript 对象 - 这就是您想要的。
我认为目前你得到一个等于“id=12”的字符串作为响应——所有的 HTTP 数据都是一个字符串，这就是它的工作原理。
您可以使用一些 javascript 解析字符串：

```
var id = parseInt(data.split("=")[1]); 
```

然而，这有点硬编码和丑陋。

# regex - 使用 grep 正则表达式匹配任意位数

> ID：14926332
> 
> 赞同：4
> 
> 时间：2013-02-17T21:35:48.100
> 
> 标签：regex, grep

我有一个文件，其中包含如下所示的行

```
data
datalater
983290842
Data387428later
datafhj893724897290384later
4329804928later 
```

我想要做的是使用正则表达式来匹配任何以数据开头并以后面结尾的行，并且两者之间有数字。这是我到目前为止所炮制的：

```
^[D,d]ata[0-9]*later$ 
```

但是，输出包括所有数据转换器行。我想我可以稍后管道输出和 grep -v 数据，但我觉得一个表达式应该可以解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T21:37:54.167

使用`+`而不是`*`.

`+`至少匹配上述一项或多项。
`*`匹配零个或多个。

```
^[Dd]ata[0-9]+later$ 
```

在 grep 中，您需要转义`+`，我们可以使用`\d`which 是字符类并匹配单个数字。

```
^[Dd]ata\d\+later$ 
```

在您的示例文件中，您还有一行：

```
datafhj893724897290384later 
```

由于数据和数字之间存在字母，因此目前不会匹配。我们可以通过添加一个`[^0-9]*`来匹配数据之后的任何内容直到数字来解决这个问题。

我们的最终命令将是：

```
grep '^[Dd]ata[^0-9]*\d\+later$' filename 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:41:27.690

您使用 * 限定符匹配零个或多个数字。尝试

```
^[Dd]ata\d+later$ 
```

反而。您还在字符串的开头找到逗号（例如“,ata1234later”）。\d 是查找任何数字字符的快捷方式。所以我也改变了这些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:39:52.570

您应该使用“+”（表示一个或多个）而不是“*”（表示零、一个或多个）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-20T01:14:37.847

使用 Cygwin，上述命令不起作用。我不得不修改上面给出的命令以获得所需的结果。

```
$ cat > file.txt <<EOL
> data
> datalater
> 983290842
> Data387428later
> datafhj893724897290384later
> 4329804928later
> EOL 
```

我总是喜欢确保我的文件具有我期望的内容：

```
$ cat file.txt
data
datalater
983290842
Data387428later
datafhj893724897290384later
4329804928later

$ 
```

我需要使用该`-P`标志运行 Perl 风格的表达式。这意味着我不能使用`[^0-9]+`，@Tom_Cammann 恰当地指出了它的必要性。相反，我使用`.*`which 匹配任何不匹配模式下一部分的字符序列。这是我的命令和输出。

```
$ grep -P '^[Dd]ata.*\d+later$' file.txt
Data387428later
datafhj893724897290384later

$ 
```

我希望我能更好地解释为什么需要 Perl 表达式，但我只知道 Cygwin 的`grep`工作方式有点不同。

**系统信息**

```
$ uname -a
CYGWIN_NT-10.0 A-1052207 2.5.2(0.297/5/3) 2016-06-23 14:29 x86_64 Cygwin 
```

**我以前答案的结果**

```
$ grep '^[Dd]ata[^0-9]*\d\+later$' file2.txt

$ grep '^[Dd]ata\d+later$' file2.txt

$ grep -P '^[Dd]ata[^0-9]*\d\+later$' file2.txt

$ grep -P '^[Dd]ata\d+later$' file2.txt
Data387428later

$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-10T18:47:36.693

“+”语法仅适用于扩展正则表达式，不适用于标准 grep。
至少，这是我在 RHEL 上的经验。

要使用扩展正则表达式，请运行 egrep 或通过 "-E" / "--extended-regexp" 示例...

*标准 grep*

```
echo abc123n1  | grep "abc[0-9]+n1"
<no output> 
```

*鹭鸶*

```
echo abc123n1  | egrep "abc[0-9]+n1"
abc123n1 
```

*grep 与 -E*

```
echo abc123n1  | grep -E "abc[0-9]+n1"
abc123n1 
```

HTH

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-29T03:24:42.747

**动机**

其余答案**不适**用于所有系统。

* * *

**️ 要求**

*   **grep**
*   选项：**--extended-regexp**
*   字符组，又名：**[:group:]**
*   匹配上述一项或多项，即：**+**
*   可选择设置为开始或结束：**^whatever$**

* * *

**命令**

`grep --extended-regexp "[[:group:]]+"`

* * *

**️ 组**

*   铝
*   α
*   空白的
*   控制
*   数字
*   图形
*   降低
*   **打印**
*   点点
*   空间
*   上
*   数字

# razor - ASP.NET MVC 4 - 在同一页面上登录和注册表单

> ID：14926333
> 
> 赞同：1
> 
> 时间：2013-02-17T21:35:53.417
> 
> 标签：razor, asp.net-mvc-4

我想在同一页面上同时拥有登录表单和注册表单，我试过这样：

```
@model Project.Models.LoginModel
@model Project.Models.RegisterModel

// Login form
...

// Register form
... 
```

...但我只能在视图顶部有一个模型参考。我尝试了两种形式的部分视图，但是功能丢失了。

关于如何做到这一点的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:37:35.460

您只能在视图中使用一个模型，创建您的 viewModel 类

```
public class ViewModel
{
    public LoginModel LoginModel { get; set; }
    public RegisterModel RegisterModel { get; set; }
} 
```

并将其导入您的视图中

```
@model Project.Models.ViewModel 
```

# arduino - 无法使用 Arduino 对 ATtiny2313a 进行编程。我的芯片变砖了吗？

> ID：14926335
> 
> 赞同：2
> 
> 时间：2013-02-17T21:35:54.837
> 
> 标签：arduino, microcontroller, avr

我一直在尝试将程序烧录到 ATtiny2313A-PU 中，并将我的 Arduino Uno R3 用作程序员。首先，我尝试从 Arduino IDE 1.0.1 (Windows 7) 对其进行编程，它似乎上传了草图，但闪烁程序不起作用。然后我找到了[Michael Holachek 的教程](http://michael.holachek.com/2012/09/avr-programming/)并按照他的指示进行操作：

1.  将 ArduinoISP 草图上传到我的 Arduino Uno
2.  将电路连接到面包板上
3.  在我的 Windows 7 上安装了 WinAVR。
4.  下载 Michael 的模板文件（Makefile 和 main.c）并编辑 Makefile 以匹配我的设置（外部 8 MHz 晶体）。我使用[这个在线保险丝计算器](http://www.engbedded.com/fusecalc/)来获得正确的保险丝参数。
5.  然后，在 cmd.exe 中，将目录更改为我保存 Makefile 和 main.c 并运行“make flash”的目录

生成文件

```
DEVICE     = attiny2313a
CLOCK      = 8000000
PROGRAMMER = -c arduino -P COM5 -b 19200 
OBJECTS    = main.o
FUSES      = -U lfuse:w:0x5e:m -U hfuse:w:0xdd:m -U efuse:w:0xff:m

######################################################################
######################################################################

# Tune the lines below only if you know what you are doing:

AVRDUDE = avrdude $(PROGRAMMER) -p $(DEVICE)
COMPILE = avr-gcc -Wall -Os -DF_CPU=$(CLOCK) -mmcu=$(DEVICE)

# symbolic targets:
all:    main.hex

.c.o:
    $(COMPILE) -c $< -o $@

.S.o:
    $(COMPILE) -x assembler-with-cpp -c $< -o $@
# "-x assembler-with-cpp" should not be necessary since this is the default
# file type for the .S (with capital S) extension. However, upper case
# characters are not always preserved on Windows. To ensure WinAVR
# compatibility define the file type manually.

.c.s:
    $(COMPILE) -S $< -o $@

flash:  all
    $(AVRDUDE) -U flash:w:main.hex:i

fuse:
    $(AVRDUDE) $(FUSES)

install: flash fuse

# if you use a bootloader, change the command below appropriately:
load: all
    bootloadHID main.hex

clean:
    rm -f main.hex main.elf $(OBJECTS)

# file targets:
main.elf: $(OBJECTS)
    $(COMPILE) -o main.elf $(OBJECTS)

main.hex: main.elf
    rm -f main.hex
    avr-objcopy -j .text -j .data -O ihex main.elf main.hex
# If you have an EEPROM section, you must also create a hex file for the
# EEPROM and add it to the "flash" target.

# Targets for code debugging and analysis:
disasm: main.elf
    avr-objdump -d main.elf

cpp:
    $(COMPILE) -E main.c 
```

主程序

![主程序](../Images/ef8cb97912bded8f26ba2d1813573aa1.png)

下面是我得到的输出：

```
C:\Users>cd /D D:\electronics

D:\electronics>cd nikon/mi

D:\electronics\nikon\mi>make flash
avr-gcc -Wall -Os -DF_CPU=8000000 -mmcu=attiny2313a -c main.c -o main.o
main.c:6: error: stray '\342' in program
main.c:6: error: stray '\200' in program
main.c:6: error: stray '\250' in program
main.c: In function 'main':
main.c:9: error: stray '\342' in program
main.c:9: error: stray '\200' in program
main.c:9: error: stray '\250' in program
make: *** [main.o] Error 1 
```

我怀疑我可能会把 Attiny 2313a 上的保险丝弄坏。如果是这样的话，我想我将不得不建造[这个 AVR 救援盾牌](http://mightyohm.com/blog/products/hv-rescue-shield-2-x/)。也许 Makefile 配置不正确？如何识别问题？如何检查芯片是否还活着？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:46:57.863

你在那里得到编译错误。我会检查 main.c 的内容以了解编译器告诉您检查的内容。看起来在代码的复制和粘贴中，有些东西丢失了。还

```
PORTD ^= (1 << PD6);  // toggle PD6 
```

可以替换为

```
PIND = (1 << PD6);   // or _BV(PD6), since you should be using avr-libc anyway. 
```

根据 Atmel 的数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:36:32.503

好吧，我用谷歌搜索了更多，发现最常见的解决方案是，当芯片相同但具有不同的后缀（如 attiny2313 和 attiny2313a）时，使用 -F 键覆盖签名检查。所以，我在 Makefile 中添加了密钥，`DEVICE = attiny2313 -F`我的 attiny2313a 编程成功！TRON，感谢您为我指明 main.c 的方向！不幸的是，我不能赞成你的回答，因为我的声誉是 11。我仍然想知道那些方形字符是如何到达那里的？

# drupal - Drupal 7：无法查看新加载的主题

> ID：14926341
> 
> 赞同：0
> 
> 时间：2013-02-17T21:36:25.237
> 
> 标签：drupal, drupal-7, drupal-themes

我一直在尝试通过将压缩的主题文件夹复制到以下位置来安装新主题：

```
 1) /Applications/MAMP/htdocs/drupal/sites/all/themes/ 
```

后来到这个：

```
 2) /Applications/MAMP/htdocs/drupal/sites/MYSITE/themes/marinelli/ 
```

对于每次安装，当我转到我的站点主页并选择“外观”时，我在“禁用/启用/管理主题下拉菜单”[其中任何一个]中都看不到我的新主题。这些是主题目录的权限

```
 drwxr-xr-x@ 17 MYNAME  admin  578 Feb 17 13:27 marinelli 
```

我已经交叉检查了我下载的主题版本是否支持 Drupal7。请帮帮我。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:43:00.617

您放入的文件

```
/Applications/MAMP/htdocs/drupal/sites/MYSITE/themes/marinelli/ 
```

`http://MYSITE`只有当您通过在浏览器中键入来访问它们时才会被识别。

对于本地安装，您应该将[Marinelli](http://drupal.org/project/marinelli)主题解压缩到

```
/Applications/MAMP/htdocs/drupal/sites/all/themes/ 
```

文件夹的权限通常应为 755，文件的权限应为 644。虽然我从来不必自己手动设置任何主题/文件夹文件的权限。

假设您可以通过访问**`http://localhost/drupal`**或**`http://127.0.0.1/drupal`**在您的机器中访问该站点。

将文件夹复制到站点/所有/主题后，通过访问清除缓存，

**`http://localhost/drupal/admin/config/development/performance`**并单击**清除所有缓存**按钮。

这些步骤应该使 Marinelli 可以在**`http://localhost/drupal/admin/appearance`**

# iphone - UIScrollView 不滚动，或者是交互的

> ID：14926346
> 
> 赞同：0
> 
> 时间：2013-02-17T21:36:36.013
> 
> 标签：iphone, ios, uiscrollview

我有以下层次结构：

VC -> UIView -> UISCrollView

UIView 恰好是 UIScrollView 的委托，并且拥有 UIScrollView 作为实例变量。

界面视图.h：

```
#import <UIKit/UIKit.h>
#import "ImageScrollView.h"

@interface Scroller : UIView <UIScrollViewDelegate>{

      ImageScrollView *scroller;
}

@end 
```

米：

```
#import "Scroller.h"

@implementation Scroller

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        DLog(@"");
        [self initScroll];
    }
    return self;
}

-(void)initScroll{

    DLog(@"");
    scroller = [[ImageScrollView alloc] initWithFrame:CGRectMake(0.0, 0.0, 200, 200)];
    scroller.delegate = self;

    [self addSubview:scroller];

}

- (void)scrollViewDidScroll:(UIScrollView *)sender {

    // Update the page when more than 50% of the previous/next page is visible
    CGFloat pageWidth = self.frame.size.width;
    int page = floor((scroller.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
    DLog(@"%d",page);

}

-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView{

    DLog(@"");

} 
```

注意：到目前为止，没有一个委托方法被调用。但是，我将 iphone 屏幕上的 UIScrollView 视为黑框。

```
#import "ImageScrollView.h"

@implementation ImageScrollView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        DLog(@"%f %f",frame.size.width,frame.size.height);
        [self configUI];
        [self configSelf];

    }
    return self;
}

-(void)configUI{

    self.backgroundColor = [UIColor blackColor];
    self.contentSize = CGSizeMake(1000, 400);
    self.showsHorizontalScrollIndicator = YES;

}

-(void)configSelf{

    self.scrollEnabled = YES;

}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    DLog(@"");

    for (UITouch *touch in touches) {

        CGPoint _location = [touch locationInView:touch.view];
        [self processTouch:_location];
    }

    [self.delegate scrollViewDidEndDecelerating:self];

}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

     DLog(@"");

    for (UITouch *touch in touches) {

        CGPoint _location = [touch locationInView:touch.view];
        [self processTouch:_location];
    }

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

     DLog(@"");

    for (UITouch *touch in touches) {

        CGPoint _location = [touch locationInView:touch.view];
        [self processTouch:_location];
    }

}

- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {

    [self touchesEnded:touches withEvent:event];
} 
```

注意：在 IUScrollViewSubclass 中都不会调用 touchesEnded 或 touchesMoved 方法。

我究竟做错了什么？

但是，如果我将视图控制器分配为 uiscrollview 的委托，则此代码有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:03:04.713

如果我实现你的代码，它工作正常。

为了更仔细地检查正在发生的事情，我添加了这一行：

```
NSLog (@"%@",NSStringFromSelector(_cmd)); 
```

在每个方法的开始。

如果我在 scrollView 内**平移，这是日志：**

```
ScrollViewTest1[4155:707] scrollViewDidScroll:
ScrollViewTest1[4155:707] 0
ScrollViewTest1[4155:707] scrollViewDidScroll:
ScrollViewTest1[4155:707] 0
ScrollViewTest1[4155:707] scrollViewDidScroll:
ScrollViewTest1[4155:707] 0
ScrollViewTest1[4155:707] scrollViewDidEndDecelerating: 
```

由于滚动视图的内置 panGestureRecognizer 拦截了触摸，因此不会调用您的触摸方法。

如果我在**scrollView**内点击，这是日志：

```
ScrollViewTest1[4155:707] touchesBegan:withEvent:
ScrollViewTest1[4155:707] processTouch:
ScrollViewTest1[4155:707] scrollViewDidEndDecelerating:
ScrollViewTest1[4155:707] touchesEnded:withEvent:
ScrollViewTest1[4155:707] processTouch: 
```

称为scrollView 的触摸不会为它自己的gestureRecognizer 抓取触摸事件。

# objective-c - C 与 vDSP 与 NEON - NEON 怎么能像 C 一样慢？

> ID：14926351
> 
> 赞同：3
> 
> 时间：2013-02-17T21:36:54.320
> 
> 标签：objective-c, assembly, arm, neon, vdsp

NEON 怎么会像 C 一样慢？

我一直在尝试构建一个快速的直方图函数，通过为它们分配一个值来将传入的值存储到范围中——这是它们最接近的范围阈值。这是将应用于图像的东西，所以它必须很快（假设一个 640x480 的图像数组，所以 300,000 个元素）。直方图范围数是 (0,25,50,75,100) 的倍数。输入是浮点数，最终输出显然是整数

我通过打开一个新的空项目（无应用程序委托）并仅使用 main.m 文件在 xCode 上测试了以下版本。我删除了除 Accelerate 之外的所有链接库。

这是 C 实现：旧版本有很多 if then 但这是最​​终优化的逻辑。花了 11 秒和 300 毫秒。

```
int main(int argc, char *argv[])
{
  NSLog(@"starting");

  int sizeOfArray=300000;

  float* inputArray=(float*) malloc(sizeof(float)*sizeOfArray);
  int* outputArray=(int*) malloc(sizeof(int)*sizeOfArray);

  for (int i=0; i<sizeOfArray; ++i)
  {
    inputArray[i]=88.5;
  }

  //Assume range is [0,25,50,75,100]
  int lcd=25;

  for (int j=0; j<1000; ++j)// just to get some good time interval
  {
    for (int i=0; i<sizeOfArray; ++i)
    {
        //a 60.5 would give a 50\. An 88.5 would give 100
        outputArray[i]=roundf(inputArray[i]/lcd)*lcd;
    }
  }
NSLog(@"done");
} 
```

这是 vDSP 的实现。即使有一些繁琐的来回浮动到整数，也只用了 6s！几乎提高了 50%！

```
//vDSP implementation
 int main(int argc, char *argv[])
 {
   NSLog(@"starting");

   int sizeOfArray=300000;

   float* inputArray=(float*) malloc(sizeof(float)*sizeOfArray);
   float* outputArrayF=(float*) malloc(sizeof(float)*sizeOfArray);//vDSP requires matching of input output
   int* outputArray=(int*) malloc(sizeof(int)*sizeOfArray); //rounded value to the nearest integere
   float* finalOutputArrayF=(float*) malloc(sizeof(float)*sizeOfArray);
   int* finalOutputArray=(int*) malloc(sizeof(int)*sizeOfArray); //to compare apples to apples scenarios output

   for (int i=0; i<sizeOfArray; ++i)
   {
     inputArray[i]=37.0; //this will produce an final number of 25\. On the other hand 37.5 would produce 50.
   }

   for (int j=0; j<1000; ++j)// just to get some good time interval
   {
     //Assume range is [0,25,50,75,100]
     float lcd=25.0f;

     //divide by lcd
     vDSP_vsdiv(inputArray, 1, &lcd, outputArrayF, 1,sizeOfArray);

     //Round to nearest integer
     vDSP_vfixr32(outputArrayF, 1,outputArray, 1, sizeOfArray);

     // MUST convert int to float (cannot just cast) then multiply by scalar - This step has the effect of rounding the number to the nearest lcd.
    vDSP_vflt32(outputArray, 1, outputArrayF, 1, sizeOfArray);
    vDSP_vsmul(outputArrayF, 1, &lcd, finalOutputArrayF, 1, sizeOfArray);
    vDSP_vfix32(finalOutputArrayF, 1, finalOutputArray, 1, sizeOfArray);
   }
  NSLog(@"done");
} 
```

这是霓虹灯的实现。这是我的第一次，所以玩得很好！它比 vDSP 慢，需要 9 秒和 300 毫秒，这对我来说没有意义。vDSP 比 NEON 优化得更好，或者我做错了什么。

```
//NEON implementation
int main(int argc, char *argv[])
{
NSLog(@"starting");

int sizeOfArray=300000;

float* inputArray=(float*) malloc(sizeof(float)*sizeOfArray);
float* finalOutputArrayF=(float*) malloc(sizeof(float)*sizeOfArray);

for (int i=0; i<sizeOfArray; ++i)
{
    inputArray[i]=37.0; //this will produce an final number of 25\. On the other hand 37.5 would produce 50.
}

for (int j=0; j<1000; ++j)// just to get some good time interval
{
    float32x4_t c0,c1,c2,c3;
    float32x4_t e0,e1,e2,e3;
    float32x4_t f0,f1,f2,f3;

    //ranges of histogram buckets
    float32x4_t buckets0=vdupq_n_f32(0);
    float32x4_t buckets1=vdupq_n_f32(25);
    float32x4_t buckets2=vdupq_n_f32(50);
    float32x4_t buckets3=vdupq_n_f32(75);
    float32x4_t buckets4=vdupq_n_f32(100);

    //midpoints of ranges
    float32x4_t thresholds1=vdupq_n_f32(12.5);
    float32x4_t thresholds2=vdupq_n_f32(37.5);
    float32x4_t thresholds3=vdupq_n_f32(62.5);
    float32x4_t thresholds4=vdupq_n_f32(87.5);

    for (int i=0; i<sizeOfArray;i+=16)
    {
        c0= vld1q_f32(&inputArray[i]);//load
        c1= vld1q_f32(&inputArray[i+4]);//load
        c2= vld1q_f32(&inputArray[i+8]);//load
        c3= vld1q_f32(&inputArray[i+12]);//load

        f0=buckets0;
        f1=buckets0;
        f2=buckets0;
        f3=buckets0;

        //register0
        e0=vcgtq_f32(c0,thresholds1);
        f0=vbslq_f32(e0, buckets1, f0);

        e0=vcgtq_f32(c0,thresholds2);
        f0=vbslq_f32(e0, buckets2, f0);

        e0=vcgtq_f32(c0,thresholds3);
        f0=vbslq_f32(e0, buckets3, f0);

        e0=vcgtq_f32(c0,thresholds4);
        f0=vbslq_f32(e0, buckets4, f0);

        //register1
        e1=vcgtq_f32(c1,thresholds1);
        f1=vbslq_f32(e1, buckets1, f1);

        e1=vcgtq_f32(c1,thresholds2);
        f1=vbslq_f32(e1, buckets2, f1);

        e1=vcgtq_f32(c1,thresholds3);
        f1=vbslq_f32(e1, buckets3, f1);

        e1=vcgtq_f32(c1,thresholds4);
        f1=vbslq_f32(e1, buckets4, f1);

        //register2
        e2=vcgtq_f32(c2,thresholds1);
        f2=vbslq_f32(e2, buckets1, f2);

        e2=vcgtq_f32(c2,thresholds2);
        f2=vbslq_f32(e2, buckets2, f2);

        e2=vcgtq_f32(c2,thresholds3);
        f2=vbslq_f32(e2, buckets3, f2);

        e2=vcgtq_f32(c2,thresholds4);
        f2=vbslq_f32(e2, buckets4, f2);

        //register3
        e3=vcgtq_f32(c3,thresholds1);
        f3=vbslq_f32(e3, buckets1, f3);

        e3=vcgtq_f32(c3,thresholds2);
        f3=vbslq_f32(e3, buckets2, f3);

        e3=vcgtq_f32(c3,thresholds3);
        f3=vbslq_f32(e3, buckets3, f3);

        e3=vcgtq_f32(c3,thresholds4);
        f3=vbslq_f32(e3, buckets4, f3);

        vst1q_f32(&finalOutputArrayF[i], f0);
        vst1q_f32(&finalOutputArrayF[i+4], f1);
        vst1q_f32(&finalOutputArrayF[i+8], f2);
        vst1q_f32(&finalOutputArrayF[i+12], f3);
    }
}
NSLog(@"done");
} 
```

PS：这是我第一次进行这种规模的基准测试，所以我尽量保持简单（大循环，设置代码不变，使用 NSlog 打印开始/结束时间，只加速框架链接）。如果这些假设中的任何一个对结果产生重大影响，请批评。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T01:48:26.273

首先，这不是“NEON”本身。这是内在的。在 clang 或 gcc 下使用内部函数几乎不可能获得良好的 NEON 性能。如果你认为你需要内在函数，你应该手写汇编程序。

vDSP 并不比 NEON“优化得更好”。iOS 上的 vDSP 使用 NEON 处理器。vDSP 对 NEON 的使用比您对 NEON 的使用得到了更好的优化。

我还没有深入研究您的内在代码，但最有可能（实际上几乎可以肯定）的问题原因是您正在创建等待状态。用汇编程序编写（而内在函数只是戴着焊接手套编写的汇编程序），与用 C 编写完全不同。你不会循环相同。你比较的不一样。你需要一种新的思维方式。在汇编中，您一次可以做不止一件事（因为您有不同的逻辑单元），但是您绝对必须以所有这些事情可以并行运行的方式安排事情。良好的组装使所有这些管道保持满。如果您可以阅读您的代码并且它非常有意义，那么它可能是垃圾汇编代码。如果您从不重复自己，那可能是垃圾汇编代码。

如果它像音译 C 一样简单，那么编译器会为您做到这一点。当你说“我要用 NEON 写这个”时，你就是在说“我认为我可以写出比编译器更好的 NEON”，因为编译器也使用它。也就是说，通常可以编写比编译器更好的 NEON（尤其是 gcc 和 clang）。

如果你准备好进入那个世界（这是一个非常酷的世界），你有一些阅读在你面前。以下是我推荐的一些地方：

*   [http://www.coranac.com/tonc/text/asm.htm](http://www.coranac.com/tonc/text/asm.htm)（你真的很想花点时间在这个上）
*   [http://hilbert-space.de/](http://hilbert-space.de/)（整个网站。他很快就停止了写作。）
    *   对于你的具体问题，他在这里解释：[http ://hilbert-space.de/?p=22](http://hilbert-space.de/?p=22)
*   关于您的具体问题的更多信息：[Arm Neon Intrinsics 与手工组装](https://stackoverflow.com/questions/9828567/arm-neon-intrinsics-vs-hand-assembly)
*   [http://wanderingcoder.net/2010/07/19/ought-arm/](http://wanderingcoder.net/2010/07/19/ought-arm/)
*   [http://wanderingcoder.net/2010/06/02/intro-neon/](http://wanderingcoder.net/2010/06/02/intro-neon/)
*   您也可能对。。。有兴趣：
    *   [http://robnapier.net/blog/fast-bezier-intro-701](http://robnapier.net/blog/fast-bezier-intro-701)
    *   [http://robnapier.net/blog/faster-bezier-722](http://robnapier.net/blog/faster-bezier-722)

**所有这一切**......总是总是从重新考虑你的算法开始。通常答案不是如何让你的循环快速计算，而是如何不那么频繁地调用循环。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T07:54:41.810

ARM NEON 有 32 个寄存器，64 位宽（双视图为 16 个寄存器，128 位宽）。您的 neon 实现已经使用了至少 18 128 位宽，因此编译器会生成代码以将它们从堆栈中来回移动，这并不好 - 过多的额外内存访问。

如果您打算使用汇编，我发现最好使用工具将指令转储到目标文件中。一个`objdump`在Linux中被称为，我相信它`otool`在Apple世界中被称为。通过这种方式，您实际上可以看到生成的机器代码的样子，以及编译器对您的函数做了什么。

以下是 gcc (-O3) 4.7.1 中的 neon 实现转储的一部分。您可以注意到通过`vldmia sp, {d8-d9}`.

```
1a6:    ff24 cee8   vcgt.f32    q6, q10, q12
1aa:    ff64 4ec8   vcgt.f32    q10, q10, q4
1ae:    ff2e a1dc   vbit    q5, q15, q6
1b2:    ff22 ceea   vcgt.f32    q6, q9, q13
1b6:    ff5c 41da   vbsl    q10, q14, q5
1ba:    ff20 aeea   vcgt.f32    q5, q8, q13
1be:    f942 4a8d   vst1.32 {d20-d21}, [r2]!
1c2:    ec9d 8b04   vldmia  sp, {d8-d9}
1c6:    ff62 4ee8   vcgt.f32    q10, q9, q12
1ca:    f942 6a8f   vst1.32 {d22-d23}, [r2] 
```

当然这一切都取决于编译器，更好的编译器可以通过更清楚地使用可用寄存器来避免这种情况。

因此，如果您不使用汇编（内联，独立），或者应该不断检查编译器输出，直到您从中得到您想要的，那么最后您将受到编译器的支配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T10:34:17.523

作为对 Rob 回答的补充，编写 NEON 本身就是一门艺术（顺便说一句，感谢您插入我的 Wandering Coder 帖子）和 auselen 的回答（您确实在任何给定时间都有太多的寄存器，导致溢出），我应该补充一点，您的内在算法比其他两个更通用：它允许任意范围，而不仅仅是倍数，因此您试图比较不可比较的事物。总是将橙子与橙子进行比较；但是，如果您只需要自定义算法的特定功能，那么比较一种比现成通用算法更具体的自定义算法是公平的游戏。所以这是另一种 NEON 算法可以像 C 算法一样慢的方式：如果它们不是同一个算法。

至于您的直方图需求，暂时*仅使用您使用 vDSP 构建的内容*如果您的应用程序的性能不令人满意，那么只有在那时，才可以研究另一种方式进行优化；这样做的途径，除了使用 NEON 指令外，还包括避免过多的内存移动（可能是 vDSP 实现中的瓶颈），并在浏览像素时增加每个桶的计数器，而不是让这个中间输出由强制价值观。高效的 DSP 代码不仅与计算本身有关，还与如何最有效地使用内存带宽等有关。在移动设备上更是如此：内存 I/O，甚至是缓存，比处理器内核中的操作更耗电，因此两个内存 I/O 总线往往以处理器时钟速度的较低部分运行，所以你没有那么多内存带宽可以玩，*并且*您应该明智地使用您拥有的内存带宽，因为任何使用它都会消耗电力。

# c# - 我在 TextChanged 事件中的代码破坏了 WPF 中的绑定 - 并导致非常奇怪的行为

> ID：14926352
> 
> 赞同：0
> 
> 时间：2013-02-17T21:36:59.720
> 
> 标签：c#, wpf, data-binding, visual-studio-2012

在我的 VS 2012 WPF 项目中，我有一个名为的自定义文本框类`TextBoxDX`，它添加了一项`AutoSelect`功能。没问题。我有另一个基于`TextBoxDX`IntBox 的类，它只允许整数。这就是我们的故事开始的地方。这两个类都用于绑定情况，如下所示：

```
<local:TextBoxDX Grid.Row="0" Grid.Column="1" x:Name="txtBox_singlesName" Width="320" HorizontalAlignment="left" Text="{Binding SelectedItem.name, ElementName=listBoxSingles, Mode=OneWay}"/>
<local:IntBox x:Name="intBox_heightin" Width="60" AllowZeroValue="True" MaxLength="2" Text="{Binding SelectedItem.heightin, ElementName=listBoxSingles, Mode=OneWay}" MinVal="0" MaxVal="11"/> 
```

可以肯定的是，除了绑定之外，大部分都是无关紧要的。两者都可以正常工作，因为它们会根据选择更改其文本`ListBox`。但是在`IntBox`课堂上，我不得不添加只允许整数的代码。为了做到这一点，我参加了课堂上的`TextChanged`活动。`IntBox`最终结果是这样的：

```
using System;
using System.Text.RegularExpressions;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;

 namespace Herculese
{
public class IntBox : TextBoxDX
{
    //INIT PROPERTIES
    private int _MaxVal = 0;
    private int _MinVal = 0;
    private bool _AllowZeroValue = false;

    //INIT STRING TO KEEP TRACK OF TEXT BEFORE CHANGES
    private string originalText;

    public IntBox()
    {
        //ADD TO TEXTCHANGED HANDLER
        TextChanged += new TextChangedEventHandler(My_OnTextChanged);

        //STORE ORIGINAL TEXT
        originalText = this.Text;
    }

    //EVENT HANDLER WHEN TEXT IS CHANGED

    private void My_OnTextChanged(object sender, EventArgs e)
    {
        //IF THERE IS TEXT IN THE BOX,
        MessageBox.Show("yee");
        if (this.Text.Length > 0)
        {
            //REMOVE SPACES AND LEADING ZEROS FROM STRING
            if (!_AllowZeroValue)
                this.Text = this.Text.TrimStart('0');
            this.Text = Regex.Replace(this.Text, @"\s+", "");

            //IF VALUE ISN'T NUMERICAL OR NOTHING IS LEFT AFTER REMOVING ZEROS AND SPACES, CHANGE TEXT BACK TO ORIGINAL
            Regex regex = new Regex("[^0-9]+");
            if (regex.IsMatch(this.Text) || this.Text.Length < 1)
            {
                this.Text = originalText;
                System.Media.SystemSounds.Beep.Play();
            }
            //IF VALUE IS NUMERICAL,
            else
            {
                //MAKE SURE VALUE IS WITHIN ACCEPTED RANGE. IF NOT, CHANGE IT TO HIGHEST/LOWEST AVAILABLE RESPECTIVELY
                int intText;
                intText = Convert.ToInt32(this.Text);
                if (intText > _MaxVal)
                {
                    this.Text = _MaxVal.ToString();
                    System.Media.SystemSounds.Beep.Play();
                }
                else if (intText < _MinVal)
                {
                    this.Text = _MinVal.ToString();
                    System.Media.SystemSounds.Beep.Play();
                }
                //SUCCESS!  UPDATE ORIGINAL TEXT WITH NEW VALID VALUE.
                else originalText = this.Text;
            }
        }
    }

    //PROVIDE GET/SET PROPERTIES
    public int MaxVal
    {
        get { return _MaxVal; }
        set { _MaxVal = value; }
    }
    public int MinVal
    {
        get { return _MinVal; }
        set { _MinVal = value; }
    }
    public bool AllowZeroValue
    {
        get { return _AllowZeroValue; }
        set { _AllowZeroValue = value; }
    }
}
} 
```

如您所见，我`TextChanged`在`IntBox`. 狂野派对，你的名字。突然我意识到绑定 for`IntBox`不再起作用了。我可以手动更改文本就好了。它只接受整数并且像魅力一样工作。但是更改`ListBox`选择不再更新文本。如果我删除了 中的代码`My_OnTextChanged`，则绑定再次起作用。我认为我的代码导致了问题。所以我今天带着全新的头脑回来，意识到一些奇怪的事情。

如果我删除其中的代码`My_OnTextChanged`并将其替换为`MessageBox`，则绑定有效并出现消息框。非常有意义，并进一步说明我的代码导致了问题。现在奇怪的是：如果我在代码之后将代码放回事件中`MessageBox`，绑定再次被破坏并且`MessageBox`从不显示意味着事件永远不会触发。我只能说...... HUUUUH？！我已经重新创建了几次，以确保我没有发疯。我能想到的唯一另一件事是与`TextBoxDX`它继承的冲突，所以我让它直接继承`TextBox`并得到相同的结果......有人知道这个吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:52:29.863

您正在分配一个新值，`Text`因为您已将其替换为新字符串，因此将删除原始绑定。

而不是使用`this.Text = "Somthing"`尝试使用`base.SetCurrentValue(TextProperty, value);`

例子：

```
//IF VALUE ISN'T NUMERICAL OR NOTHING IS LEFT AFTER REMOVING ZEROS AND SPACES, CHANGE TEXT BACK TO ORIGINAL
Regex regex = new Regex("[^0-9]+");
if (regex.IsMatch(this.Text) || this.Text.Length < 1)
{
    // this.Text = originalText;

    base.SetCurrentValue(TextProperty, originalText);
    System.Media.SystemSounds.Beep.Play();
} 
```

`SetCurrentValue`设置依赖属性的值而不更改其值源。

# php - PHP POST 变量为空

> ID：14926357
> 
> 赞同：0
> 
> 时间：2013-02-17T21:37:13.633
> 
> 标签：php, javascript, post

我的问题是我试图通过 POST/GET 推送一个参数，这个参数在下面的代码中传递给 js 函数，所有这些文件都在同一个目录中。

你的帮助，答案。此致。

```
<div id="sidebar"> <?php include('showContent.js'); ?>
 <ul>
   <li>
   <h2>TITLE</h2>
      <ul>
    <li><a onclick="showContent('1');">Link1</a></li>
    <li><a onclick="showContent('2');">Link2</a></li>
    <li><a onclick="showContent('3');">Link3</a></li>
      </ul>
    </li>
  </ul>
</div> 
```

显示内容.js

```
<script>function showContent(cId)
 {
 if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
     document.getElementById("contentArea").innerHTML=xmlhttp.responseText;
     }
   }
 xmlhttp.open("POST","contact/sendContent.php?cId="+cId,true);
 xmlhttp.send();
 } 
```

发送内容.php

```
<?php
    $cId=$_POST["cId"];
    $tmp='error.php';

    switch ($cId) {
        case 1:{
            $tmp='contact.php';
            break;
        }
        case 2:{
            $tmp='idCard.php';
            break;
        }
        case 3:{
            $tmp='location.php';
            break;
        }

    }

    ob_start();
    include($tmp);
    echo ob_get_clean();

?> 
```

PS：你应该在文本编辑器的按钮上添加提示如何使用它们，我花了很多时间弄清楚如何使用这个糟糕的编辑器进行代码格式化。

提示：选择代码按此按钮！

当您知道时非常容易，如果某些事情的行为不像它应该的那样非常烦人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:41:44.773

尽管您使用的是 POST 请求，但您并没有真正发布任何内容。

由于您附加了查询字符串，因此您可以访问它。

```
$cId=$_REQUEST["q"]; 
```

或者

```
$cId=$_GET["q"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:06:25.620

你有几个问题：
- 如前所述，你需要 $_GET 或 $_REQUEST
- 关闭 JS 文件中的脚本标签 -
我不熟悉 ob_start() 但 echo 效果很好
- 如果文件都在同一个文件夹中, 那么你的 AJAX 请求路径是错误

的 Here are working files...

```
<html>
<body>
<div id="sidebar"> <?php include('showContent.js'); ?>
 <ul>
   <li>
   <h2>TITLE</h2>
      <ul>
    <li><a onclick="showContent('1');">Link1</a></li>
    <li><a onclick="showContent('2');">Link2</a></li>
    <li><a onclick="showContent('3');">Link3</a></li>
      </ul>
    </li>
  </ul>
</div>
<div id="contentArea">content area</div>
</body>
</html>

<script type="text/javascript">function showContent(cId)
 {
 if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
     document.getElementById("contentArea").innerHTML=xmlhttp.responseText;
     }
   }
 xmlhttp.open("POST","sendContent.php?cId="+cId,true);
 xmlhttp.send();
 }
</script>

<?php
    $cId=$_REQUEST["cId"];
    $tmp='error.php';

    switch ($cId) {
        case 1:
            $tmp='contact.php';
            break;

        case 2:
            $tmp='idCard.php';
            break;

        case 3:
            $tmp='location.php';
            break;
    }

    echo $tmp;
?> 
```

# sql - 我在哪里可以找到关于第六范式的信息

> ID：14926358
> 
> 赞同：4
> 
> 时间：2013-02-17T21:37:15.830
> 
> 标签：sql, database, database-design, 6nf

我正在寻找有关如何实施第六范式的信息。我在网上到处搜索都没有成功。我想看一个如何实现和设计的例子。如果有任何关于如何实现它的书籍或文档，这将特别有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T22:24:40.323

既然你到处搜索，你可能也搜索过[dba.stackexchange.com](https://dba.stackexchange.com/) ......但如果你没有，请参阅[第 6 范式，重组查询，高效实现](https://dba.stackexchange.com/questions/8994/6th-normal-form-recomposition-query-efficient-implementation)。

他们参考[了 Hugh Darwen 的 An Introduction to Relational Database Theory（第 4 版）的](http://bookboon.com/en/textbooks/it-programming/an-introduction-to-relational-database-theory)第 7 章。

# javascript - 现代浏览器中的鼠标滚轮事件

> ID：14926366
> 
> 赞同：67
> 
> 时间：2013-02-17T21:37:56.027
> 
> 标签：javascript, mousewheel

我想为鼠标滚轮事件提供干净和漂亮的 JavaScript，只支持最新版本的通用浏览器，没有旧版本的遗留代码，没有任何 JS 框架。

[鼠标滚轮事件在这里](http://www.adomas.org/javascript-mouse-wheel/)得到了很好的解释。如何为当前最新版本的浏览器简化它？

我无法访问所有浏览器来测试它，所以[caniuse.com](http://caniuse.com/#cats=JS_API)对我有很大帮助。唉，那里没有提到鼠标滚轮。

根据 Derek 的评论，我编写了这个解决方案。它对所有浏览器都有效吗？

```
someObject.addEventListener("onwheel" in document ? "wheel" : "mousewheel", function(e) {
  e.wheel = e.deltaY ? -e.deltaY : e.wheelDelta/40;
  // custom code
}); 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2018-07-11T01:32:19.063

干净简单：

```
window.addEventListener("wheel", event => console.info(event.deltaY)); 
```

浏览器可能会为 delta 返回不同的值（例如，Chrome 返回`+120`(scroll up) 或`-120`(scroll down)。标准化它的一个好技巧是提取其符号，有效地将其转换为`+1`/ `-1`：

```
window.addEventListener("wheel", event => {
    const delta = Math.sign(event.deltaY);
    console.info(delta);
}); 
```

*参考：[MDN](https://developer.mozilla.org/en-US/docs/Web/Events/wheel)。*

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-09-26T20:27:42.777

这是一篇描述这一点的文章，并给出了一个例子：

[http://www.sitepoint.com/html5-javascript-mouse-wheel/](http://www.sitepoint.com/html5-javascript-mouse-wheel/)

相关代码，减去给出的调整图像大小的具体示例：

```
var myitem = document.getElementById("myItem");
if (myitem.addEventListener)
{
    // IE9, Chrome, Safari, Opera
    myitem.addEventListener("mousewheel", MouseWheelHandler, false);
    // Firefox
    myitem.addEventListener("DOMMouseScroll", MouseWheelHandler, false);
}
// IE 6/7/8
else
{
    myitem.attachEvent("onmousewheel", MouseWheelHandler);
}

function MouseWheelHandler(e)
{
    // cross-browser wheel delta
    var e = window.event || e; // old IE support
    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));

    return false;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-03T00:37:14.343

这也适用于 Firefox、Chrome 和 Edge：

```
window.addEventListener("wheel", function(e) {
    var dir = Math.sign(e.deltaY);
    console.log(dir);
}); 
```

# php - HTML 文件中的 PHP 未运行或被注释掉

> ID：14926372
> 
> 赞同：0
> 
> 时间：2013-02-17T21:38:32.613
> 
> 标签：php, html, .htaccess, cpanel

首先，我不是想在 js 脚本中运行 php，这里有一个类似的问题是指用户试图从 js 脚本中运行 php。

我添加了许多组合

AddType application/x-httpd-php .php .html

AddHandler x-httpd-php .html

到包含我要在其中运行 php 的 .html 文件的更高级别目录中的 .htaccess 文件。这不起作用。（我愿意尝试新的组合）

在浏览器中查看源代码时，要么根本不阅读，要么被注释掉。

我的问题是如何在 html 文件中运行，或者是否有更好的方法在 html 文档中包含 php 功能，而无需在同一文档中包含代码。

此外，如果这有帮助，我的主机会使用 cpanel。

我可以详细说明我需要的任何东西，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:42:41.000

您可以尝试`mod_rewrite`用于该任务：

```
RewriteEngine On
RewriteRule ^(.*).html index.php [QSA] 
```

# excel - 从串口输入数据到Excel

> ID：14926373
> 
> 赞同：1
> 
> 时间：2013-02-17T21:38:33.137
> 
> 标签：excel, serial-port, arduino

我已经建立了一个从数字卡尺到 Arduino 板的接口。Arduino 通过串行端口将读数从卡尺发送到计算机。

通过串行端口发送的数据当然是完全可定制的。

我现在想要一个选项，当某个命令通过串行端口（例如通过在卡尺中按下按钮生成）时，卡尺的数据将输入到 Excel 中的当前单元格中，并按下 Tab 键以移动到下一个单元格。

我想知道您推荐的解决方案是什么？什么编程语言？如何将数据发送到Excel？如何模拟 Tab 键？等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T11:43:14.640

我最终使用了以下解决方案：下载并安装了 scaleProgrammer.com Rs-232 Monitor（免费）并使用它将传入的串行传入数据转换为键盘输入。

对于传入的串行数据，我在每次传输结束时添加了 TAB 键，这有助于在 Excel 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:12:04.813

我不确定您的要求，但我希望您可以使用以太网屏蔽并进行一些 PHP 编码以将输出存储为 CSV 格式，稍后您可以使用 Excel 读取。

请正确描述您的要求，以便您得到一些好的答案。您工具的任何链接/图片都可以使用。

你可以试试[php-serial](http://code.google.com/p/php-serial/)。

# variables - 从特定行的文件中散列带有批处理和捕获变量的字符串

> ID：14926374
> 
> 赞同：0
> 
> 时间：2013-02-17T21:38:37.743
> 
> 标签：variables, hash, batch-file, cmd, line

是否可以散列变量，例如PHP`sha1($var);`或`md5($var);`在 PHP 中，然后在 Batch 中。

是否可以从文件的特定行获取变量？`set variable=<textfile.txt`会很有用，但它只需要第一行。是否可以以第三行代码为例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:00:24.770

我不能说在 PHP 中“散列”一个变量。但是有很多方法可以在 Windows 批处理中读取文本文件的第 n 行。这是提取第三行的两种方法。

将 FOR /F 与跳过一起使用：

```
for /f skip^=2^ delims^=^ eol^= %%A in (textfile.txt) do set "var=%%A"&goto break
:break 
```

使用 SET /P：

```
<textfile.txt (
  for /l %%N in (1 1 2) do set /p "="
  set "var="
  set /p "var="
) 
```

# php - 使用 preg_match ：用户#345

> ID：14926376
> 
> 赞同：-1
> 
> 时间：2013-02-17T21:38:51.373
> 
> 标签：php, regex, preg-match

我想使用预匹配，我的用户可以使用这种类型的用户名注册：name#3digit

我在使用 # 时遇到问题。这段代码有什么问题：

```
if (!preg_match("/(\w+)#(?P\d{3})/",$_REQUEST['irc_channel'])) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:07:00.570

你不需要这部分`?P`，因为它被命名为子模式。因此，如果您需要，则可以正确使用它。请参阅：[PHP：子模式 - 手册](http://php.net/manual/en/regexp.reference.subpatterns.php)

这将给出你想要的；

```
$r = preg_match('~(\w+)#(\d+)~i', 'user#345', $m);
print_r($r); // 1
print_r($m); // Array([0] => user#345 [1] => user [2] => 345)

$r = preg_match('~(\w+)#(\d+)~i', 'user......#345', $m);
print_r($r); // 0 error! 
```

如果你需要子模式怎么办？（但据我所知，在这种情况下您不需要任何数组结果，只需检查输入是否有效）。

```
$r = preg_match('~(\w+)#(?P<id>\d+)~i', 'user#345', $m);
print_r($m); // Array([0] => user#345 [1] => user [id] => 345 [2] => 345) 
```

所以最后;

```
if (!preg_match('~(\w+)#(\d+)~i', $_REQUEST['irc_channel'])) 
// actually this would work too
if (!preg_match('~\w+#\d+~i', $_REQUEST['irc_channel'])) 
```

# drupal - 在 Drupal 7 中使用 CSS 定位单个 HTML 元素

> ID：14926378
> 
> 赞同：0
> 
> 时间：2013-02-17T21:38:57.403
> 
> 标签：drupal, drupal-7

我想在 Drupal 7 站点的一个特定页面（节点）上重新设置页面标题（h1）的样式。在特定页面上使用 CSS 定位单个 HTML 元素的最佳方法是什么？

显然，我希望所有其他页面上的页面标题不受影响。

我正在使用 Bartik 的子主题，如果它有什么不同的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:55:05.660

通常在大多数主题中，类都被添加到 body 标记中。除非您使用像[Mothership](http://drupal.org/project/mothership)这样的主题，您可以强制它删除此类类，否则这些主题非常方便。甚至 Mothership 也提供了一个设置来启用/禁用使用此类类填充身体标签。

使用 chrome 中的检查元素或 Firefox 中的 Firebug 或 IE 中的开发人员工具栏来查找代表您想要主题的页面`<content_type>-<entity-type>-<id>`中的标记之类的类。`<body>`例如`page-node-12`

omega主题的示例输出如下

```
<body class="html not-front logged-in page-node page-node- page-node-8 node-type-page context-page admin-menu coffee-processed omega-mediaqueries-processed alpha-debug-processed responsive-layout-wide"> 
```

Bartic 主题的示例正文标签输出，

```
<body class="html not-front logged-in no-sidebars page-node page-node- page-node-33 node-type-team-member admin-menu coffee-processed"> 
```

然后找到您的节点标题的特定选择器，这就像说`#page-title`或者如果它没有 id 找出一些规则来选择它，以便它在页面中是唯一的。例如`.page h1.title`

现在你可以使用，

```
body.page-node-12 #page-title {
  /* your css rule */
} 
```

或者

```
body.page-node-12 .page h1.title {
  /* your css rule */
} 
```

# winapi - CreateFileMappingA 是否写入文件？

> ID：14926379
> 
> 赞同：0
> 
> 时间：2013-02-17T21:39:05.223
> 
> 标签：winapi, file-io

我正在调试一些 WinAPI 应用程序。
在调用该函数之前`CreateFileMappingA`，文件的大小为**0Kb**。调用该函数后，文件立即达到**200Kb**左右。我尝试浏览在线 Windows API 文档，但没有找到任何内容（或者可能不明白）在函数调用之后是否会发生文件写入。参数的`flProtect`值为`PAGE_READWRITE`。
我真的很想知道该函数的真正作用，尤其是为什么要写入文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T18:09:37.883

经过一番研究，我发现函数 CreateFileMappingA 是这样调用的：
`CreateFileMappingA(fh, NULL, PAGE_READWRITE, 0, 0x336BC, "kll");`
根据文档，如果文件大小低于映射目标的长度，则文件将被扩展以适应大小。
因此，就我而言，该文件刚刚创建。

```
fh = CreateFileA("file2.dat", GENERIC_READ | GENERIC_WRITE, FILE_SHARE_WRITE,
        NULL, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, NULL); 
```

因此，首先，将使用写入权限创建文件“file2.dat”。它将是 0Kb。然后，在上面调用 CreateFileMappingA 之后，文件大小将是 0x336BC 字节，或 206Kb。

# ruby-on-rails - 无法在单独的文件中运行 Ruby gem

> ID：14926381
> 
> 赞同：-2
> 
> 时间：2013-02-17T21:39:10.980
> 
> 标签：ruby-on-rails, ruby, gem, binaryfiles

下面是我创建的一个 gem，目的是打开一个 text/README.md 文件并拉出第一行和最后一行。gem 构建正确，但是如果我尝试运行一个单独的文件来调用我构建的 gem，我会收到以下错误消息：

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/nrodruck_test_gem-0.0.1/bin/test_gem:8:in 
`<top (required)>': uninitialized constant TestGem::Myfile (NameError)
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/test_gem:19:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/test_gem:19:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

下面是我试图用来运行我的 gem 的文件。该文件需要一个命令行，您可以在其中指定您希望我的 gem 读取的文件。

```
#!/usr/bin/env ruby

require 'test_gem'

puts "test_gem script executing"
puts ARGV[0]

puts TestGem::MyFile.first( ARGV[0] ) 
```

这是宝石：

```
$LOAD_PATH.unshift File.expand_path("../test_gem", __FILE__)

require 'version'
require 'hello'

module TestGem

  puts "module TestGem defined"

  class MyFile

    def self.first(filename)
        File.open(filename, "r") {|f| f.readline}
    end

    def self.last(filename)
        File.open(filename, "r")[-1]
    end 
  end   
end 
```

编辑

根据评论修复了错字，仍然收到相同的错误消息。

```
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/nrodruck_test_gem-0.0.1/bin/test_gem:8:
in `<top (required)>': uninitialized constant TestGem::Myfile (NameError)
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/test_gem:19:in `load'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/test_gem:19:in `<main>'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:43:00.583

这是一个错字。您`Myfile`在尝试调用它时输入了它，而不是`MyFile`常量的名称。

# opencv - Python、OpenCV 和数独

> ID：14926383
> 
> 赞同：-1
> 
> 时间：2013-02-17T21:39:29.380
> 
> 标签：opencv, python-3.x, sudoku

使用下面的 PDF，我想做以下事情。

1.  定位四个数独网格，以便分别处理它们中的每一个。
2.  对于每个网格图片，我想获得每个单元格对应的图片矩阵。
3.  最后，我想“找到”每个单元格中打印的值。

问题是我是 OpenCV 的真正初学者（我买了一本关于 OpenCV with Python 的书，但我还没有收到）。

我不是 Python 的初学者，也不是数学的初学者，所以欢迎每一条线索。

![在此处输入图像描述](../Images/5a8a40f77d783b3900a016f5eea9c27e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:48:46.000

你很幸运：

[数独求解器第 1 部分](http://opencvpython.blogspot.hu/2012/06/sudoku-solver-part-1.html)

[第2部分](http://opencvpython.blogspot.hu/2012/06/sudoku-solver-part-2.html)

[第 3 部分](http://opencvpython.blogspot.hu/2012/06/sudoku-solver-part-3.html)

[第 4 部分](http://opencvpython.blogspot.hu/2012/07/sudoku-extra.html)

不过，OpenCV 不支持 Python 3.x。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:00:27.947

tesseract 也有很好的 python 绑定（并且更专注于“ocr”工作；）

不过，欢迎使用 opencv！

# php - 如何在 MySQL 中搜索斜杠 (\)？为什么在 where (=) 中不需要转义 (\) 但对于 Like 是必需的？

> ID：14926386
> 
> 赞同：62
> 
> 时间：2013-02-17T21:39:34.957
> 
> 标签：php, mysql, sql, escaping

考虑这个查询（[演示在这里](http://sqlfiddle.com/#!2/b7284/1)）

```
(SELECT * FROM `titles` where title = 'test\\')
UNION ALL
(SELECT * FROM `titles` where title LIKE 'test\\\\') 
```

输出：

```
| ID | TITLE |
--------------
|  1 | test\ |
|  1 | test\ | 
```

## 问题：

为什么**(=)**不需要额外的**(\)**而 (like) 需要额外的**\\**？很明显，MySQL用**(test\\)转义了****(test\** )然后使用**(test\\\\)**对于 LIKE 是合乎逻辑的。

 ******表信息：

```
CREATE TABLE IF NOT EXISTS `titles` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

--
-- Dumping data for table `titles`
--

INSERT INTO `titles` (`id`, `title`) VALUES
(1, 'test\\'); 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2013-02-17T21:51:10.347

`\`默认情况下用作转义字符`LIKE`。

从[手册](http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html)中`LIKE`：

> 因为 MySQL 在字符串中使用 C 转义语法（例如，“\n”表示换行符），所以您必须将在 LIKE 字符串中使用的任何“\”加倍。例如，要搜索“\n”，请将其指定为“\\n”。要搜索“\”，请将其指定为“\\\\”；这是因为反斜杠被**解析器剥离一次，**并**在进行模式匹配时再次**剥离，留下一个反斜杠进行匹配。

您可以通过指定另一个转义字符来更改它，如下所示：

```
SELECT * FROM `titles` WHERE title LIKE 'test\\' ESCAPE '|' 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2014-11-21T12:57:10.483

实际上，以前的所有答案都在某个地方被破坏了。正如您在 Karoly Horvath 提供的链接中看到的，其重要位由 Explosion Pills 复制，**搜索 1 个反斜杠 (\) 的正确方法是一次使用 4 个反斜杠 (\\\\)**。

顺便说一句，要显示在单个反斜杠上方，我必须同时使用两个，而要显示这四个，我必须使用八个。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-17T21:46:12.477

`LIKE`接受两个通配符`%`和`_`.

为了能够匹配这些字符，可以使用转义：`\%`, `\_`. 这也意味着如果你想匹配`\`，它也必须被转义。

所有这些都记录在[手册](http://dev.mysql.com/doc/refman/5.6/en/string-comparison-functions.html)中。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-03-31T07:39:01.427

为了在文本字段中找到 a`\`我不得不转义`\`两次，否则`%`最后找到了：

```
SELECT * FROM `table` where `field` LIKE '%\\\%'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-27T09:49:36.933

如果您想从数据库列 (Test\'s) 中删除 (\') 并将其替换为 apostrophy(Test's)，那么您可以使用以下查询。

```
SELECT replace(column_name, "\\'", "'") FROM table where column_name  LIKE "%\\\%"; 
```******

# iphone - 为什么在使用橡皮擦时会有黑色的ouline？

> ID：14926388
> 
> 赞同：0
> 
> 时间：2013-02-17T21:39:38.980
> 
> 标签：iphone, ios, drawing, uibezierpath, erase

请看附图。我创建了一个应用程序，用户可以在其中使用多个图像进行绘制，但是当我使用清除颜色来擦除绘图时，它会在已擦除路径周围显示黑色边框。我使用 UIBezierPath 进行绘图。这是 UIBezierPath 的问题还是可以通过任何其他方式解决？如果您需要代码片段，请告诉我！我会在这里发布。

![在此处输入图像描述](../Images/7083cc36070839a196b71b2d04ce07a3.png)

**编辑：**已添加代码！请忽略不相关的代码。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(isFirstTapp)
    {
        isFirstTapp=NO;
        [self.spooleteView removeHandView];
    }
    isdraw=YES;
    mouseSwapped=NO;
    UITouch *touch = [touches anyObject];
    lastPoint=[touch locationInView:self];

    //UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
    [currentPath moveToPoint:p];
    currentPath.flatness = 10.0;

    NSMutableDictionary *dict=[[NSMutableDictionary alloc]init];
    UIBezierPath *myPath=[[UIBezierPath alloc]init];

    myPath.lineCapStyle=kCGLineJoinRound;
    [dict setObject:myPath forKey:@"Path"];
    colorTag= [[AppHelper userDefaultsForKey:@"ColorTag"]intValue];

    self.selectedColor = [brushColor objectAtIndex:colorTag];

    if(isErase)
    {
        myPath.lineWidth=30.0;
        self.selectedColor = [UIColor whiteColor];

    }
    else
    {
        if([mode isEqualToString:@"morsecode"])
            myPath.lineWidth=10.0;
        else
            myPath.lineWidth=5.0;
    }

    //[dict setObject:[brushColor objectAtIndex:colorTag] forKey:@"Colors"];
    [dict setObject:self.selectedColor forKey:@"Colors"];

    [myArr addObject:dict];
    currentPath=myPath;
    currentPath.flatness = 0.1;
    currentPath.lineJoinStyle = kCGLineJoinRound;
    currentDict=dict;
    [myPath moveToPoint:lastPoint];
    [myPath release];
    [dict release];    
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(!istapped)
    {
        if([mode isEqualToString:@"morsecode"])
        {
            mouseSwapped=YES;
            UITouch *mytouch=[[touches allObjects] objectAtIndex:0];

            currentPoint=[mytouch locationInView:self];

            [currentPath addLineToPoint:currentPoint];

            [self setNeedsDisplay];
        }
    }

//    UITouch *touch = [touches anyObject];
//    CGPoint p = [touch locationInView:self];
//    [currentPath addLineToPoint:p];
//    [self setNeedsDisplay];
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    if(!istapped)
    {
        mouseSwapped=YES;

        UITouch *objTouch=[[touches allObjects] objectAtIndex:0];

        if (!mouseSwapped&&(objTouch.tapCount==1))
        {
            lastPoint=currentPoint;
        }
    }

    if(isErase)
    {
        if ([myArr count]>50)
        {
            [myArr removeAllObjects];
        }
    }

    UITouch *touch = [touches anyObject];
    CGPoint p = [touch locationInView:self];
    [currentPath addLineToPoint:p];
    [self drawBitmap]; // (3)
    [self setNeedsDisplay];
    [currentPath removeAllPoints]; //(4)
}

- (void)drawRect:(CGRect)rect
{
    [self.incrementalImage drawInRect:rect]; // (3)
    [currentPath stroke];

    //[self.incrementalImage drawInRect:rect];

    for (NSMutableDictionary *dictionary in myArr)
    {
        UIBezierPath *_path = [dictionary objectForKey:@"Path"];

        self.selectedColor = [dictionary objectForKey:@"Colors"];
        [self.selectedColor setStroke];
        [_path stroke];

        [_path strokeWithBlendMode:kCGBlendModeCopy alpha:1.0];
        _path.lineCapStyle = kCGLineJoinRound;

        if([mode isEqualToString:@"morsecode"])
        {
            if (!isErase)
            {
                const float p[2] = {1,15.9};
                [_path setLineDash:p count:2 phase:0.9];
            }

            else
            {
                self.selectedColor = [UIColor whiteColor];
            }
        }
    }
}

- (void)drawBitmap // (3)
{
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0);

    [self.selectedColor setStroke];

    if (!self.incrementalImage) // first draw; paint background white by ...
    {
        UIBezierPath *rectpath = [UIBezierPath bezierPathWithRect:self.bounds]; // enclosing bitmap by a rectangle defined by another UIBezierPath object
        [[UIColor clearColor] setFill];
        [rectpath fill]; // filling it with white
    }

    [self.incrementalImage drawAtPoint:CGPointZero];
    [currentPath stroke];
    self.incrementalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T23:40:08.843

我找到了这个问题的原因。这是因为以下函数的第二行。

```
- (void)drawRect:(CGRect)rect
{
    [self.incrementalImage drawInRect:rect]; // (3)
    [currentPath stroke]; 
```

即，`[currentPath stroke];` 我已经评论过，现在路径周围没有黑色边框。我希望这对其他人有帮助。

# css - 悬停时 CSS 下拉菜单宽度更改

> ID：14926391
> 
> 赞同：0
> 
> 时间：2013-02-17T21:39:48.223
> 
> 标签：css, drop-down-menu

我们正在尝试使下拉菜单正常工作，但是当悬停在顶层时，它会扩展其宽度。我们如何确保它保持不变？

html代码如下：

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<title>Velocior | Accelerate your web</title>
</head>

<body class="body">
    <header role="banner">
        <nav role="navigation">
            <ul id="top-bar">
                <li class="top-icon-block">
                    <a href="http://ha.efficens-software.com">
                        <span id="top_icon_home" title="Home"></span>   
                    </a>
                </li>
                <li class="top-icon-sep-block"><img src="images/top_icon_separator.png"></li>
                <li class="top-icon-block"><a href="http://ha.efficens-software.com"><span id="top_icon_register" title="Register"></span></a></li>
                <li class="top-icon-sep-block"><img src="images/top_icon_separator.png"></li>
                <li class="top-icon-block"><a href="http://ha.efficens-software.com"><span id="top_icon_login" title="Login"></span></a></li>
                <li class="top-icon-sep-block"><img src="images/top_icon_separator.png"></li>
                <li class="top-icon-block"><a href="http://ha.efficens-software.com"><span id="top_icon_logout" title="Logout"></span></a></li>
                <li class="top-menu-left-edge-block"></li>
                <li class="top-menu-button-block"><a href="zbala.com">Velocior</a></li>
                <li class="top-menu-sep-block"></li>
                <li class="top-menu-button-block"><a href="zbala.com">Technology</a></li>
                <li class="top-menu-sep-block"></li>
                <li class="top-menu-button-block"><span>Solutions</span></li>
                <li class="top-menu-sep-block"></li>
                <li class="top-menu-button-block"><span>Tech Center</span></li>
                <li class="top-menu-sep-block"></li>
                <li class="top-menu-button-block">
                    <span>Free BETA</span>
                    <ul class="sub-menu">
                        <li id="menu-item-115" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-115"><a href="http://test/wp/solutions/wordpress-acceleration/">WordPress acceleration</a></li>
                        <li id="menu-item-111" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-111"><a href="http://test/wp/solutions/apache-acceleration/">Apache acceleration</a></li>
                        <li id="menu-item-113" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-113"><a href="http://test/wp/solutions/iis-sharepoint-acceleration/">IIS &amp; SharePoint acceleration</a></li>
                        <li id="menu-item-114" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-114"><a href="http://test/wp/solutions/isps-and-cloud-suppliers/">ISPs and Cloud suppliers</a></li>
                        <li id="menu-item-112" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-112"><a href="http://test/wp/solutions/developer-tools/">Developer tools</a></li>
                        <li id="menu-item-108" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-108"><a href="http://test/wp/products-and-pricing/">Pricing</a></li>
                    </ul>
                </li>
                <li class="top-menu-right-edge-block"></li>
            </ul>
        </nav>
    </header>
    <div id="page">
        <div id="logo"><img src="images/velocior_logo.png"></div>
        <div class="content long-content">
            <div class="content-inner-left long-inner-content">
                <div class="content-icon">
                    <img src="images/timer.png">
                </div>
            </div>
            <div class="content-inner-right long-inner-content">
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum           </div>
        </div>
            <div id="mailing-list-box">
                <div class="mailing-list-separator"></div>
                <div class="mailing-list-text">Join our mailing list : </div>
<!--                <div class="mailing-list-input">NREGEV@GMAIL.COM</div>  -->
                <input type="text" class="mailing-list-input">
                <div class="mailing-list-submit"><img src="images/subscribe.png"></div>
            </div>
<!--

        <div class="content long-content">
            <div class="content-inner-left long-inner-content">
                some text and icon
            </div>
            <div class="content-inner-right long-inner-content">
                some text but no icons here ..
            </div>
        </div>

    -->
    </div>
        <div id="footer">
            <span>Some footer text here</span>
        </div>
</body>
</html> 
```

CSS 代码如下所示：

```
body {
    background-color: black;
    width: 950px;
    margin-left: auto;
    margin-right: auto;
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 11px;
}

#top-bar {
    position: relative;
    display: block;
    width: inherit;
    height: 39px;
    padding: 0px;
    margin: 0px;
    vertical-align: middle;
    background-image: url("images/top_bar_bg.png");
    background-repeat: repeat-x;
}

.top-icon-block {
    width: 50px;
    margin: 0px;
    display: table-cell;
    text-align: center;
}

.top-icon-block a {
    position: relative;
    top: 5px;
}

.top-icon-block span {
    position: relative;
    left: 10px;
    background-repeat: none;
    width: 30px;
    height: 20px;
    cursor: pointer;
    display: block;
}

/* .top-icon-block div:hover { cursor: pointer; }   */

#top_icon_home { background-image: url("images/home.png");}
#top_icon_home:hover { background-image: url("images/home_red.png");}

#top_icon_register { background-image: url("images/register.png");}
#top_icon_register:hover { background-image: url("images/register_red.png");}

#top_icon_login { background-image: url("images/login.png");}
#top_icon_login:hover { background-image: url("images/login_red.png");}

#top_icon_logout { background-image: url("images/logout.png");}
#top_icon_logout:hover { background-image: url("images/logout_red.png");}

/*

.top-icon-block img {
    padding-top: 8px;
}

.top-icon-block img:hover {
    cursor: pointer;
}

*/
.top-icon-sep-block {
    width: 4px;
    margin: 0px;
    display: table-cell;
    text-align: center;
/*  background-image: url("images/top_icon_separator.png"); */
}

.top-icon-sep-block img {
    padding-top: 8px;
}

.top-menu-left-edge-block {
    width: 7px;
    margin: 0px;
    background-image: url("images/buttons_left_edge.png");
    background-repeat: repeat-x;
    display: table-cell;
    text-align: center;
}

.top-menu-sep-block {
    width: 7px;
    margin: 0px;
    background-image: url("images/buttons_separator.png");
    background-repeat: repeat-x;
    display: table-cell;
    text-align: center;
}

.top-menu-right-edge-block {
    width: 7px;
    margin: 0px;
    background-image: url("images/buttons_right_edge.png");
    background-repeat: repeat-x;
    display: table-cell;
    text-align: center;
}

.top-menu-button-block {
    width: 80px;
    margin: 0px;
    background-image: url("images/buttons_bg.png");
    background-repeat: repeat-x;
    display: table-cell;
}

.top-menu-button-block span, a{
    font-size: 12px;
    display: inline-block;
    width: inherit;
    text-align: center;
    vertical-align: 6px;
    color: white;
    text-decoration: none;
}

.top-menu-button-block *:hover {
    color: darkorange;
    cursor: pointer;
}

#page {
    position: relative;
/*  background-image: url('images/background.jpg'); */
    background-repeat: no-repeat;
    display: inline-block;
    width: inherit;
    height: 564px;
    z-index: 3;
/*  border-style: solid;
    border-color: red;
    border-width: 1px;*/
}

#logo {
    position: relative;
    top: 25px;
    left: 25px;
    z-index: 2;
}   

#footer {
    position: relative;
    background-color: #414142;
    display: inline-block;
    width: inherit;
    height: 20px;
}

#footer span {
    display: inline-block;
    width: inherit;
    text-align: center;
    vertical-align: -2px; /*middle */
    font-size: 10px;
    color: white;
    text-decoration: none;
}

.content {
    position: absolute;
    border-top: 1px solid lightgrey;
    border-bottom: 1px solid grey;
    border-radius: 15px 0px 15px 0px;
    width: 640px;
    bottom: 60px;
    right: 0px;
    padding: 5px;
    background-color: rgba(255,255,255,0.92);
    font-size: 13px;
}

.content-inner-left {
    position: absolute;
    border-right: 1px solid #AAAAAA;
    width: 100px;
    display: table-cell;
    padding: 5px;
}

.content-inner-right {
    position: absolute;
    width: 515px;
    display: table-cell;
    left: 120px;
    padding: 5px;
}

.content-icon {
    position: relative;
    width: 60px;
    height: 60px;
    top: 0px;
    margin: auto;
}

.short-content {    height: 130px; }
.long-content {height: 280px; }
.short-inner-content {  height: 120px; }
.long-inner-content {height: 270px; }

#mailing-list-box {
    position: absolute;
    width: 350px;
    height: 18px;
    bottom: 42px;
    right: 300px;
    background-color: black;
    padding: 0px;
}

.mailing-list-separator {
    position: absolute;
    display: table-cell;
    left: 20px;
    width: 3px;
    height: inherit;
    background-image: url("images/subscription_sep.png");
    background-repeat: no-repeat;
    top: 1px;
}

.mailing-list-text {
    position: absolute;
    display: table-cell;
    left: 50px;
    top: 1px;
    width: 110px;
    height: inherit;
    color: white;
}

.mailing-list-input {
    position: absolute;
    display: table-cell;
    left: 150px;
    width: 140px;
    top: 2px;
    height: 13px;
    vertical-align: middle;
    color: red;
    padding: 0px;
    border: none;
    font-size: 11px;
    border-radius:2px;
}

.mailing-list-submit {
    position: absolute;
    display: table-cell;
    left: 290px;
    top: 2px;
    width: 74px;
    height: inherit;
    cursor: pointer;
}
/*
nav ul:after {
    content: "";
    clear: both;
    display: block;
}
*/

nav ul ul {
    list-style-type: none;
}

nav ul li ul {display: none;}
nav ul li:hover > ul {display: inline-block;}
nav ul ul {
    position: abslute;
    top: 100%;
}
nav ul ul li {
    float: none;
    position: relative;
    background-color: grey;
}

/*
#top-bar li ul li {
    position: relative;
    z-index: 5;
    background-color: rgba(0,0,0,0.6);
    width: 220px;
    height: 20px;
    text-align: center;
    border-bottom: 1px solid black;
    border-radius: 4px;
    display: block;
}
*/

/*
#top-bar li ul ul {
    top: 0;
    left: 100%;
}

#top-bar ul li:hover > ul {
    border-left: 0;
    display: block;
}

#top-bar li ul li a {
    background: #efefef;
    border-bottom: 1px solid #ededed;
    display: block;
    font-size: 11px;
    font-size: 0.785714286rem;
    line-height: 2.181818182;
    padding: 8px 10px;
    padding: 0.571428571rem 0.714285714rem;
    width: 180px;
    width: 12.85714286rem;
    white-space: normal;
}

#top-bar li ul li a:hover {
    background: #e3e3e3;
    color: #444;
}
*/ 
```

问题是当我们将鼠标悬停在 BETA 菜单上时，它会展开以显示子级菜单。我们该如何预防呢？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:12:30.297

我还没有找到一种不使用 javascript 的方法。

这是我用来完成此操作的[jQuery 代码片段。](https://gist.github.com/th3hamburgler/5005694)该代码将为顶级 li 和子菜单 ul 设置显式宽度。

您需要一些 css 规则。

父项`nav ul > li`需要`overflow:visible;`设置。

# visual-studio-2012 - 是否有可能（如何？）在 Visual Studio 2012 中删除行号之前的间隙

> ID：14926397
> 
> 赞同：3
> 
> 时间：2013-02-17T21:40:23.120
> 
> 标签：visual-studio-2012

在 Visual Studio 2012 中，当为文本编辑器启用行号选项时，它会创建一个可以容纳大约 5 个数字的间隙。如何仅将“间隙”调整为文件中当前最大行数的大小？

![Visual Studio 2012 编辑器不必要的空白](../Images/118d90e470e63c552570e4d27cd3a986.png)![没有差距的 Visual Studio 2012 编辑器](../Images/bd9dc1f856d518e79847d94ceb229f94.png)

# git - 在预提交挂钩中引发 git 警告

> ID：14926401
> 
> 赞同：5
> 
> 时间：2013-02-17T21:40:42.207
> 
> 标签：git

当我或其他人在工作中提交项目时，我一直在使用 git 中的预提交挂钩来检查问题。我可以以非零状态退出，以表明提交存在严重问题，应立即修复。

然而，有时问题只是程序员需要警告的事情（例如，他们需要根据他们的更改更新帮助文件）。有什么方法可以让我发出一个 git 警告，例如你得到的“LF 将被 CRLF 取代”？我的部分动机是我们中的一些人使用 SmartGit，所以警告清楚地显示为黄色。

post-commit 钩子看起来很有希望，但是在尝试了不同的返回值之后，它也从来没有真正给过我警告。将所有内容都保留在 pre-commit 挂钩中会很好，我相信有更好的方法可以做到这一点。感谢您提供的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T04:08:24.217

似乎能够返回警告返回码的想法只是 SmartGit 在我脑海中种下的东西。底层 git 仅返回零表示成功，非零表示失败。

在 Windows 上的 git bash 中运行它，例如：

```
touch tmp.txt
echo "lf line endings" > tmp.txt
git add tmp.txt
echo $? 
```

你应该得到零作为最后一个返回码，即使在你最后一次调用 git 之后出现了一个“警告”（SmartGit 将它识别为一个警告并且可能给了你一个漂亮的黄色三角形）。

通过试验它（即困难的方式），我意识到 SmartGit 只是搜索以“警告：”开头的行并吸收该行的“警告：”部分来触发漂亮的黄色三角形。它删除“警告：”文本并打印“警告：”中“：”之后的所有内容作为“输出”窗口中的警告。

不是很复杂，但至少现在已经为他们记录了。

# java - UnsupportedClassVersionError：WebSphere AS 7 中的 JVMCFRE003 主要版本错误

> ID：14926402
> 
> 赞同：41
> 
> 时间：2013-02-17T21:40:48.150
> 
> 标签：java, eclipse, jakarta-ee, websphere-7, jdk1.6

我收到此错误

**java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version；类=map/CareMonths，偏移量=6**

我的 Eclipse 的 Java 编译器设置为`1.6`并且我在 C:\Program Files 中安装的 Java SDK 是`1.6.0`，但是当我将我的应用程序安装到 Webshere Application Server V7 时仍然出现此错误。

是什么`offset=6`意思？我想使用 Java 6 进行编译，而 Websphere 7 支持 Java 6。

我确实看到安装服务器的 IBM 目录中的 JDK 是 Java 7。这是造成这种情况的原因吗？....但我的工作区的 Eclipse 编译器再次设置为 Java `1.6`。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-19T13:11:22.440

WebSphere Application Server V7 确实支持**Java Platform, Standard Edition (Java SE) 6**（请参阅网络部​​署（所有操作系统）版本 7.0 信息中心中的[规范和 API 文档），并且它是自](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/rovr_specs.html#rovr_specs__anyappl)[发布 V8.5 以来的 Java 7支持](http://pic.dhe.ibm.com/infocenter/wasinfo/v8r5/topic/com.ibm.websphere.nd.doc/ae/rovr_specs.html)。

我找不到 Java 6 SDK 文档，只能查阅[Java 7 Windows 文档](http://www.ibm.com/developerworks/java/jdk/docs/java7/windows/index.html)中的[IBM JVM Messages](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/topic/com.ibm.java.messages/diag/appendixes/messages/messages.html)。唉，我在文档中也找不到错误消息。

因为[java.lang.UnsupportedClassVersionError](http://docs.oracle.com/javase/6/docs/api/java/lang/UnsupportedClassVersionError.html)是*“当 Java 虚拟机尝试读取类文件并确定文件中的主要和次要版本号不受支持时抛出。”* ，您遇到了使用比运行时环境（即 WebSphere Application Server 7.0）支持的版本更新的 Java 版本构建应用程序的问题。

我可能记错了，但我认为消息中的**offset=6**是为了让您知道是什么位置导致了不兼容问题的发生。它对你、我和许多其他人都无关紧要，但有些人可能会觉得它很有用，尤其是。当他们自己生成字节码时。

运行[versionInfo](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/rins_versionInfo.html)命令以了解 WebSphere Application Server V7 的**已安装特性**，例如

```
C:\IBM\WebSphere\AppServer>.\bin\versionInfo.bat
WVER0010I: Copyright (c) IBM Corporation 2002, 2005, 2008; All rights reserved.
WVER0012I: VersionInfo reporter version 1.15.1.47, dated 10/18/11

--------------------------------------------------------------------------------
IBM WebSphere Product Installation Status Report
--------------------------------------------------------------------------------

Report at date and time February 19, 2013 8:07:20 AM EST

Installation
--------------------------------------------------------------------------------
Product Directory        C:\IBM\WebSphere\AppServer
Version Directory        C:\IBM\WebSphere\AppServer\properties\version
DTD Directory            C:\IBM\WebSphere\AppServer\properties\version\dtd
Log Directory            C:\ProgramData\IBM\Installation Manager\logs

Product List
--------------------------------------------------------------------------------
BPMPC                    installed
ND                       installed
WBM                      installed

Installed Product
--------------------------------------------------------------------------------
Name                  IBM Business Process Manager Advanced V8.0
Version               8.0.1.0
ID                    BPMPC
Build Level           20121102-1733
Build Date            11/2/12
Package               com.ibm.bpm.ADV.V80_8.0.1000.20121102_2136
Architecture          x86-64 (64 bit)
Installed Features    Non-production
                      Business Process Manager Advanced - Client (always installed)
Optional Languages    German
                      Russian
                      Korean
                      Brazilian Portuguese
                      Italian
                      French
                      Hungarian
                      Simplified Chinese
                      Spanish
                      Czech
                      Traditional Chinese
                      Japanese
                      Polish
                      Romanian

Installed Product
--------------------------------------------------------------------------------
Name                  IBM WebSphere Application Server Network Deployment
Version               8.0.0.5
ID                    ND
Build Level           cf051243.01
Build Date            10/22/12
Package               com.ibm.websphere.ND.v80_8.0.5.20121022_1902
Architecture          x86-64 (64 bit)
Installed Features    IBM 64-bit SDK for Java, Version 6
                      EJBDeploy tool for pre-EJB 3.0 modules
                      Embeddable EJB container
                      Sample applications
                      Stand-alone thin clients and resource adapters
Optional Languages    German
                      Russian
                      Korean
                      Brazilian Portuguese
                      Italian
                      French
                      Hungarian
                      Simplified Chinese
                      Spanish
                      Czech
                      Traditional Chinese
                      Japanese
                      Polish
                      Romanian

Installed Product
--------------------------------------------------------------------------------
Name                  IBM Business Monitor
Version               8.0.1.0
ID                    WBM
Build Level           20121102-1733
Build Date            11/2/12
Package               com.ibm.websphere.MON.V80_8.0.1000.20121102_2222
Architecture          x86-64 (64 bit)
Optional Languages    German
                      Russian
                      Korean
                      Brazilian Portuguese
                      Italian
                      French
                      Hungarian
                      Simplified Chinese
                      Spanish
                      Czech
                      Traditional Chinese
                      Japanese
                      Polish
                      Romanian

--------------------------------------------------------------------------------
End Installation Status Report
-------------------------------------------------------------------------------- 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-11T18:32:42.377

在这个 Eclipse Preferences 面板中，您可以将编译器兼容性从 1.7 更改为 1.6。这解决了我收到的类似消息。对于 Eclipse，它位于：Preferences -> Java -> Compiler: 'Compiler compliance level'

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-05-23T14:48:52.923

您还应该确保已设置适当的 Project Facets Java 版本。Module Properties -> Project Facets -> Java 1.6 应该被检查

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-01-08T14:48:46.210

如果您的项目使用 JDK 1.6 编译并且您有使用 Java 7 编译的依赖项，则可能会发生此错误。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-02-03T22:48:55.370

我在 websphere 8.5 中遇到了这个错误：

java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version；class=com/xxx/随便，offset=6

我在 Eclipse 中将我的项目 JDK 级别设置为 1.7，默认情况下在 JDK 1.6 上运行 was8，因此发生了冲突。我必须在我的 websphere 服务器上安装可选的 SDK 1.7，然后问题就消失了。我想我也可以在 Eclipse 中将我的项目级别设置为 1.6，但我想编码为 1.7。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-13T07:05:44.770

即使在进行了上述更改后，我也遇到了同样的错误，而我所做的是

右键项目->属性->java编译器->编译器合规级别->修改为1.6

这种变化对项目来说是特别的。这应该有希望工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-16T19:27:09.790

我遇到了同样的错误。在我的 Java 项目的 Project Facets 中，Java 编译级别设置为 1.7，而 WebSphere Application Server v7.0 具有 JRE v1.6 的运行时组合；在 Project Facets 中将 Java 编译级别设置为 1.6 消除了该错误。不过，我不必更改编译器合规级别，它仍然是 1.7。希望这可以帮助！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-22T13:42:27.883

首先**，您应该检查已编译的有问题`.class`文件**的主要版本，在您的情况下`map/CareMonths`。请参阅[此答案](https://stackoverflow.com/a/1096159/3271406)如何操作。

WAS7 使用 Java 6（[如 Jacek 所说](https://stackoverflow.com/a/14958377/3271406)），而 Java 6 使用主要版本 50，因此**您必须使用 Java 6 编译您的项目**。如何设置适当的 Java 编译器版本取决于您的 IDE（例如 Eclipse、IntelliJ）或构建工具（例如 Maven、Ant）。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-11-08T05:15:02.237

如果日志显示 java.lang.UnsupportedClassVersionError: JVM**** bad major version。

那么代码和服务器不是用相同的JDK版本编译的。

要解决此问题，请在代码或服务器 JDK 中切换 JDK 版本。

试试这个：- 在下面的用例中，我切换到 1.7_64（JDK 1.7 64 位）

> c:\IBM\WebSphere\WSRR\v8.5\bin\managesdk.bat -enableProfile -profileName WSRRSrv01 -sdkname 1.7_64

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-31T14:55:55.400

如果您使用 maven 尝试添加 pom.xml

```
<properties>
    ...
    <maven.compiler.source>1.7</maven.compiler.source>
    <maven.compiler.target>1.7</maven.compiler.target>
    ...
</properties> 
```

否则尝试更改编译器版本。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-08-08T04:11:16.477

在 Eclipse 中，转到 Project->Properties->Java build Path->Order and Export。如果您使用多个 JRE，请尝试使用 jdk 和 ibm。订单应以 jdk 开头，然后是 IBM。我的问题就是这样解决的。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2017-02-17T12:19:17.807

我通过设置环境修复它。变量 JAVA_HOME。

# java - 自定义 Java Servlet 过滤器

> ID：14926405
> 
> 赞同：0
> 
> 时间：2013-02-17T21:41:16.037
> 
> 标签：java, servlets, servlet-filters

我正在编写我的第一个`javax.servlet.Filter`impl 并尝试编写`doFilter`方法的一部分，以防止请求在链中进一步传播：

```
@Override
public void doFilter(ServletRequest request, ServletResponse response)
        FilterChain chain) throws IOException, ServletException {
    // Check for some stuff in the request...
    boolean passesInspection = inspect(request);

    if(!passesInspection)
        // How do I prevent the request from going any further?
        // I don't want it even getting to the servlet at this point!
} 
```

我如何“阻止”请求甚至将其发送到侦听 servlet？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:42:22.950

干脆不叫`chain.doFilter()`。`doFilter()`呼叫是呼叫的进展。不要调用它，处理就会停止。然而，这不是一个好的设计。你至少需要通知来电者

# mongodb - mongoid 与匹配不同

> ID：14926413
> 
> 赞同：0
> 
> 时间：2013-02-17T21:42:03.477
> 
> 标签：mongodb, mongoid

在 mongodb 中，您可以使用类似的命令

```
db.sessions.distinct("Ip",{ 'Application': '123'}) 
```

这将返回所选应用程序的所有唯一 IP。如何通过 Mongoid 做到这一点？

我试图在`distinct`函数中传递 2 个参数，但它失败并出现异常`'ArgumentError: wrong number of arguments (2 for 1)'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:20:09.410

Distinct in Mongoid takes one argument -- the field you wish to filter distinct on. So in your case, you could chain a `where` clause w/a `distinct` like so:

```
 YourModel.where(Application: '123').distinct(:Ip) 
```

This would produce a collection of distinct YourModel's by field Ip where the field Application is equal to '123'.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T00:45:18.013

请向您展示完整的不同查询。我尝试遵循用户集合的语法（3 个名为 Bob 的文档）：

```
db.users.distinct("_id", {name: "Bob"}) 
```

它的工作原理：

```
[
        ObjectId("5121792d499af102889f2576"),
        ObjectId("5121792e499af102889f2577"),
        ObjectId("5121792f499af102889f2578")
] 
```

我的 MongoDB 版本是 2.2.0

# php - 如何解决 WordPress 循环的问题？

> ID：14926414
> 
> 赞同：0
> 
> 时间：2013-02-17T21:42:05.077
> 
> 标签：php, wordpress

我已经为自定义帖子类型创建了 WordPress 循环 - 投资组合，它确实有效。但是，当没有显示任何帖子但它以我尝试过的任何方式返回错误时，我需要添加消息。

这是我的工作 WordPress 循环：

```
 $gallery = new WP_Query($args);

        while($gallery->have_posts()): $gallery->the_post();
            if(has_post_thumbnail()):

            $data_types = '';
            $item_cats = get_the_terms($post->ID, 'portfolio_category');
            if($item_cats):
            foreach($item_cats as $item_cat) {
                $data_types .= $item_cat->slug . ' ';
            }
            endif;

            $full_image = wp_get_attachment_image_src(get_post_thumbnail_id($post->ID), 'portfolio-full'); ?>

              <li data-id="<?php echo $post->ID;?>" class="portfolio_item" data-type="<?php echo $data_types;?>">
                <a href="<?php the_permalink(); ?>" rel="prettyPhoto" title="">
                    <span class="pic"><?php the_post_thumbnail('portfolio-medium'); ?><div class="img_overlay"></div></span>
                    <h4><?php the_title(); ?></h4>
                </a>
              </li>         

        <?php endif; endwhile; ?> 
```

我试图像这样关闭循环：

```
<?php endwhile; ?>
<?php else : ?>
<p>My Text Here</p>
<?php endif; ?> 
```

而不是当前的：

```
<?php endif; endwhile; ?> 
```

我收到错误“语法错误，意外的 T_ENDWHILE”

我在这里错过了一些重要的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:59:15.537

我会将循环包装在一个`if`语句中，您可以使用它来检查是否有任何帖子 - 如下所示：

```
<?php
$gallery = new WP_Query($args); // initialize query
if( $gallery->have_posts() ): // if there are posts
    while( $gallery->have_posts() ) : $gallery->the_post(); // the loop
    // do stuff with the post here
    endwhile; // end of the loop
else: // if there aren't any posts
    echo "<p>no posts found!</p>";
endif; // end of the if statement
?> 
```

# php - 使用exit（）时清除PHP内存？

> ID：14926417
> 
> 赞同：0
> 
> 时间：2013-02-17T21:42:39.470
> 
> 标签：php, ajax, apache, memory-leaks, exit

我的 Web 应用程序通过 AJAX 对我的 PHP 脚本进行大量 POST 和 GET 调用。我注意到在导出到 PDF/excel、搜索、插入/更新/删除等时调用我的脚本后，我的服务器的内存使用量达到了相当低的水平。

`exit()`我的 PHP 脚本都没有以or结尾`die()`。这会导致我的记忆问题吗？如果我要在每个脚本的末尾添加`exit()`或添加，这会清除该给定脚本刚刚使用的内存吗？`die()`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T21:45:55.503

`exit`并且`die`与到达文件末尾基本相同。运行析构`ob_start`函数，刷新并结束关卡，运行任何关闭函数。

然而，在任何 PHP 进程结束时，该进程就像任何其他程序一样结束。没有留下任何记忆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T21:49:34.283

这不是 PHP 问题，它是 Apache 功能。

当 apache 启动一个新进程来处理您的请求时，它不会在处理完您的请求后立即释放其资源，而是对任何可能的未来请求保持可用。

如果您使用“top”命令，您将看到多个 apache 进程正在运行。

在这里阅读：[http ://abdussamad.com/archives/169-Apache-optimization:-KeepAlive-On-or-Off.html](http://abdussamad.com/archives/169-Apache-optimization:-KeepAlive-On-or-Off.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T21:49:03.467

我不认为`exit()`或`die()`不会有任何区别。

请确保您释放数据库资源（结果集、连接等）。此外，请考虑您使用的所有扩展，并确保它们都没有已知的内存泄漏错误，尤其是在您使用外来扩展时。

如果您在 Linux 上并且即使“可用内存”为“低”，您的服务器也没有在磁盘上进行交换，**这可能是由于磁盘缓存**。在这种情况下，一切都很好。请参阅：[linuxatemyram.com](http://linuxatemyram.com)。
顺便说一句，您从哪里获得有关可用内存的信息？

# bash - bash完成目录样式部分建议打印

> ID：14926422
> 
> 赞同：2
> 
> 时间：2013-02-17T21:43:03.237
> 
> 标签：bash, bash-completion

我正在编写一个脚本，该脚本`to`在 bash 中为文件系统位置添加书签（对 zsh 的支持有限）。你可以在这里找到源代码：[https ://github.com/resultsreturned/to](https://github.com/resultsreturned/to)

该脚本支持所有操作的选项卡完成。

假设您已“标记”文件夹的位置：

```
mara@andromeda:~/bin/android-sdk-linux$ to -b android 
```

然后，该脚本允许您访问书签的子文件夹，如下所示：

```
mara@andromeda:~$ to android/docs/
mara@andromeda:~/bin/android-sdk-linux/docs$ 
```

按两次 tab 将给出建议：

```
mara@andromeda:~$ to android/s<TAB><TAB>
android/samples/        android/sd-card/        android/sources/        android/system-images/ 
```

但是，我宁愿建议仅打印当前未输入到缓冲区的路径部分。例如，`cd`命令：

```
mara@andromeda:~/bin$ cd android-sdk-linux/s<TAB><TAB>
samples/       sd-card/       sources/       system-images/ 
```

请注意建议如何仅包含当前正在输入的目录级别。

所以问题是，你如何控制 bash 打印建议的方式？是否可以独立于完成词表（用于 compgen/complete）来执行此操作？有没有办法定义一个正则表达式来处理完成单词列表以作为建议打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T11:39:05.540

*[由于将评论标记为答案的](https://meta.stackexchange.com/questions/82099/answering-comment-answered-questions)功能请求仍然被拒绝，因此我在此处复制上述解决方案。*

因此，`-o filenames`在调用`complete`. [仅向用户显示 COMPREPLY bash 完成选项的子字符串](https://stackoverflow.com/questions/3951628/showing-only-the-substrings-of-compreply-bash-completion-options-to-the-user)– resultsreturned

# php - MySQL Pivot 查询显示空值并将值放置在不应出现的位置

> ID：14926424
> 
> 赞同：0
> 
> 时间：2013-02-17T21:43:28.290
> 
> 标签：php, mysql

我有这个 MYSQL 查询：

```
SELECT
   time_of_day as time,
   player_date as date , 
   CASE max(case when rownum = 1 then player_value end) WHEN 'P' THEN 'P' WHEN 'E' THEN 'P[' ELSE ' ' END as TMZH , 
   CASE max(case when rownum = 2 then player_value end) WHEN 'P' THEN 'P' WHEN 'E' THEN 'P[' ELSE ' ' END as BLAK 
FROM (
  select
    player_date, 
    time_of_day, 
    player_value, 
    player_cid, 
    @row:=case when @prev=player_date then @row else 0 end + 1 as rownum,
    @prev:=player_date 
  from ( 
    select 
      t1.player_date,
      t1.player_value,
      t1.time_of_day ,
      t2.player_cid 
    from 
      availability t1
      inner join players t2 on t1.player_id = t2.player_id 
    order by player_date, player_cid
  ) d,
  (SELECT @row:=0, @prev:=null) r
  order by player_date, player_cid 
) src 
WHERE
  YEAR(player_date) = YEAR(NOW())
group by
  player_date, 
  time_of_day 
```

我得到这样的结果（摘录）：

```
time    date    TMZH    BLAK
...
am  2013-06-03      P[
pm  2013-06-03  P   
am  2013-06-04      P
pm  2013-06-04  P[  
am  2013-06-05      
pm  2013-06-05      
... 
```

并且这些值应该只在 TMZH 列中，因为它们的可用性表条目具有键 1，当前该表中的所有条目都具有键 1（对应于 TMZH player_cid 字段）。

知道是什么原因造成的吗？

PS。抱歉，如果重复输入。

# java - 背景图像和文本的布局管理器

> ID：14926425
> 
> 赞同：2
> 
> 时间：2013-02-17T21:43:41.997
> 
> 标签：java, swing, layout, gridbaglayout, imageicon

我试图想出最好的布局管理器来实现下图。我知道绝对定位是我习惯的，但我无法使用它获取背景图像。`GridBagLayout`非常好，但是当我尝试时，我会为每个网格获得一个单独的图像，这非常困难。

有谁知道一个简单的方法，或者简单的代码来实现以下目标？

![在此处输入图像描述](../Images/c51829d96616295fe89da28cca1e1068.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:47:10.510

有几种方法可以做到这一点。目前我能想到的有这些：

1.  创建 的子类[`JComponent`](http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html)。
2.  覆盖该[`paintComponent(Graphics g)`](http://java.sun.com/javase/6/docs/api/javax/swing/JComponent.html#paintComponent%28java.awt.Graphics%29)方法以绘制要显示的图像。
3.  [将 的内容窗格设置](http://java.sun.com/javase/6/docs/api/javax/swing/JFrame.html#setContentPane%28java.awt.Container%29)为此`JFrame`子类。

一些示例代码：

```
class ImagePanel extends JComponent {
    private Image image;
    public ImagePanel(Image image) {
        this.image = image;
    }
    @Override
    protected void paintComponent(Graphics g) {
        g.drawImage(image, 0, 0, null);
    }
}

// elsewhere
BufferedImage myImage = ImageIO.read(...);
JFrame myJFrame = new JFrame("Image pane");
myJFrame.setContentPane(new ImagePanel(myImage)); 
```

`JFrame`请注意，如果您想要的话，此代码不会处理重新调整图像大小以适应.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T23:00:40.527

您可以通过多种方式实现这一目标。

最简单的可能是只使用已经可用的东西![在此处输入图像描述](../Images/622f40fcc23cb4fa37e9274348a698af.png)......

如果您不需要在运行时缩放背景（即您可以摆脱不可调整大小的窗口），只需使用 a`JLabel`作为主要容器就可以让您的生活变得更加轻松。

```
public class LabelBackground {

    public static void main(String[] args) {
        new LabelBackground();
    }

    public LabelBackground() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(new LoginPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class LoginPane extends JLabel {

        public LoginPane() {
            try {
                setIcon(new ImageIcon(ImageIO.read(getClass().getResource("/background.jpg"))));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
            setLayout(new GridBagLayout());
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.anchor = GridBagConstraints.EAST;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.gridx = 0;
            gbc.gridy = 0;

            JLabel nameLabel = new JLabel("Name: ");
            nameLabel.setForeground(Color.WHITE);
            JLabel passwordLabel = new JLabel("Password: ");
            passwordLabel.setForeground(Color.WHITE);

            add(nameLabel, gbc);
            gbc.gridy++;
            add(passwordLabel, gbc);

            gbc.anchor = GridBagConstraints.WEST;
            gbc.gridx++;
            gbc.gridy = 0;
            add(new JTextField(20), gbc);
            gbc.gridy++;
            add(new JTextField(20), gbc);

            gbc.gridy++;
            gbc.insets = new Insets(10, 2, 2, 2);
            gbc.anchor = GridBagConstraints.EAST;
            add(new JButton("Submit"), gbc);

        }

    }

} 
```

**更新了左对齐示例**

在构造函数的最后，添加...

```
JPanel filler = new JPanel();
filler.setOpaque(false);
gbc.gridx++;
gbc.weightx = 1;
add(filler, gbc); 
```

![在此处输入图像描述](../Images/ff49e404f5de1c577ff04684c4e185ed.png)

您可能想查看[如何使用 GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)了解更多详细信息

# c++ - C++中的lineBuffer

> ID：14926428
> 
> 赞同：-4
> 
> 时间：2013-02-17T21:44:24.717
> 
> 标签：c++

我只是在浏览一些编码的东西，并注意到了这段代码：

```
int main(int argc,char** argv)
{
  ifstream file;
  string lineBuffer;
  file.open(argv[1]) ;  
  while (!file.eof()) 
  {
     getline(file, lineBuffer);
     if (lineBuffer.length() == 0)
       continue; //ignore all empty lines
     else 
     {
        //do your code here
     }
  }
  return 0;
} 
```

我`lineBuffer`在网上搜索了 a 的概念，但没有找到相关的答案。谁能帮我理解如何`lineBuffer`逐行读取文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:52:39.303

```
string lineBuffer; 
```

这是一个名为 的变量`lineBuffer`。这不是一个需要理解的概念，它不读取文件，它只是一个带有名称的字符串，它可以很容易地被调用：

```
string fred; 
```

但是因为它是作为一个缓冲区来保存每一行文本的，所以调用它更明智和有帮助`lineBuffer`。

无论您在哪里找到该代码，都不要再阅读它了，该代码是由不太了解 C++ 的人破坏和编写的。这部分坏了：

```
while (!file.eof()) 
{
   getline(file, lineBuffer); 
```

应该这样做：

```
while (getline(file, lineBuffer))
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:46:49.770

这`lineBuffer`是一个字符串，您要求 C++ 在其中放置它读取的行。一旦该行在该字符串中，他们检查该行中是否有任何内容，如果没有，则跳过处理它。

# python - Python 文件完整性监控

> ID：14926432
> 
> 赞同：0
> 
> 时间：2013-02-17T21:44:43.453
> 
> 标签：python, file, hash, for-loop, md5

我已经编写了以下代码，但无法使其正常工作，我不明白为什么。编码：

1.  读取目标文件列表
2.  遍历目录
3.  对文件运行 MD5 哈希
4.  检查活动文件以获取所述文件的先前 md5 哈希值
5.  如果文件是新文件，它将记录为新文件
6.  如果日志存在但已更改，它将写入更改并记录更改
7.  如果不是新的并且没有变化，那么什么都不做

这是代码：

```
import hashlib
import logging as log
import optparse
import os
import re
import sys
import glob
import shutil

def md5(fileName):
    """Compute md5 hash of the specified file"""
    try:
        fileHandle = open(fileName, "rb")
    except IOError:
        return
    m5Hash = hashlib.md5()
    while True:
        data = fileHandle.read(8192)
        if not data:
            break
        m5Hash.update(data)
    fileHandle.close()
    return m5Hash.hexdigest()

req = open("requested.txt")
for reqline in req:
    reqName = reqline[reqline.rfind('/') + 1:len(reqline) - 1]
    reqDir = reqline[0:reqline.rfind('/') + 1] 
    tempFile = open("activetemp.txt", 'w') 
    for name in glob.glob(reqDir + reqName):    
        fileHash = md5(name) 
        actInt = 0
        if fileHash != None:

            actFile = open("activefile.txt")

            for actLine in actFile:
                actNameDir = actLine[0:actLine.rfind(' : ')]
                actHash = actLine[actLine.rfind(' : ') + 3:len(actLine) -1]
                if actNameDir == name and actHash == fileHash:
                    tempFile.write(name + " : " + fileHash + "\n")
                    actInt = 1 
                    print fileHash
                    print actHash
                    print name
                    print actNameDir
                if actNameDir == name and actHash != fileHash:
                    fimlog = open("fimlog.txt", 'a')
                    tempFile.write(name + " : " + actHash + "\n")         
                    actInt = 1
                    fimlog.write("FIM Log: The file " + name +  " was modified: " + actHash + "\n") 
            if actInt == 0: 
                fimlog = open("fimlog.txt", 'a')
                fimlog.write("FIM Log: The file " + name +  " was created: " + fileHash + "\n")
                tempFile.write(name + " : " + fileHash + "\n")                       

shutil.copyfile("activetemp.txt", "activefile.txt") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T01:53:44.903

您从未真正描述过问题，但一个可能的罪魁祸首是您从未关闭 tempFile（或其他文件），因此最后的文件复制可能会失败。

# dojo - 如果 JSON 包装在数组中，如何使用 JsonRest 和 ObjectStore 在 Dojo DataGrid 中显示 JSON 数据

> ID：14926437
> 
> 赞同：0
> 
> 时间：2013-02-17T21:45:39.237
> 
> 标签：dojo, dojox.grid.datagrid

我正在使用 Dojo 1.6 来呈现一个简单的 DatGrid。我面临的唯一问题类似于[dojo 1.6 DataGrid 无法显示列表？](https://stackoverflow.com/questions/10483844/dojo-1-6-datagrid-cannot-display-lists) 这里的解决方案以及来自这里的参考[http://dojotoolkit.org/documentation/tutorials/1.6/store_driven_grid/](http://dojotoolkit.org/documentation/tutorials/1.6/store_driven_grid/)确实有效，但 JSON 结构仍然存在一个问题。以下是工作和非工作示例。我正在以格式获取 JSON，其中所有内容都包含在 items 数组中。我如何使它工作？

**工作的 json 格式**

```
[{
    "bolist": ["CHM", "CVO", "PMO"],
    "title": "How do I do",
    "painpoints": ["this", "that", "manay more"],
    "solution": "wondeful"
}, {
    "bolist": ["DGM", "EXE", "CLI"],
    "title": "There we go",
    "painpoints": ["Front", "back", "many other places"],
    "solution": "under review"
}] 
```

**不工作的 json 格式（我正在以这种格式获取我的 json）**

```
{"items":[{
    "bolist": ["CHM", "CVO", "PMO"],
    "title": "How do I do",
    "painpoints": ["this", "that", "manay more"],
    "solution": "wondeful"
}, {
    "bolist": ["DGM", "EXE", "CLI"],
    "title": "There we go",
    "painpoints": ["Front", "back", "many other places"],
    "solution": "under review"
}]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:53:46.720

您可以像处理 javascript 对象一样处理 json ！所以尝试将 jsonReturn.items 传递到网格。这样，网格只获取您想要的 json 数据：

```
[{
    "bolist": ["CHM", "CVO", "PMO"],
    "title": "How do I do",
    "painpoints": ["this", "that", "manay more"],
    "solution": "wondeful"
}, {
    "bolist": ["DGM", "EXE", "CLI"],
    "title": "There we go",
    "painpoints": ["Front", "back", "many other places"],
    "solution": "under review"
}] 
```

# twitter-bootstrap - 如何在 Bootstrap 中为输入字段指定自定义错误消息

> ID：14926438
> 
> 赞同：7
> 
> 时间：2013-02-17T21:45:40.460
> 
> 标签：twitter-bootstrap, validation

我在 .NET 4.0 中使用 Twitter-Bootstrap。我没有使用任何额外的 jquery 验证插件。

我有这个代码：

```
<asp:TextBox ID="Url" runat="server" required  Text=''  placeholder="enter the  URL" pattern="http://*"  messages="Must start with 'http://' or 'https://' "></asp:TextBox> 
```

如果我在以下位置键入“asdf”，则正则表达式验证有效：

![在此处输入图像描述](../Images/f19f0b0549bc832793b263664e3fcc2d.png)

我的问题是：如何自定义“请匹配请求的格式”错误以显​​示“必须以 'http://' 或 'https://' 开头”？

如您所见，我尝试了“消息=”。我也尝试了其他几个。

1.  如何自定义通用错误消息？
2.  Bootstrap 是否有任何文档可以提供更多信息？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T23:55:43.393

这实际上与引导程序无关，而是在您的浏览器中实现 html5 表单输入验证（Chrome，根据您的屏幕截图）。

使用该`pattern`属性时，您应该使用 为`title`用户提供额外的帮助（[请参阅 MDN 文档](https://developer.mozilla.org/en-US/docs/HTML/Element/Input#attr-pattern)）。

使用`title="Must start with 'http://' or 'https://'"`，您应该会看到类似的内容（在 Chrome 中，不同的浏览器会以不同的方式呈现）：

[![使用模式和标题属性进行输入验证](../Images/8a039e3f7a6db9f1f5be4560b0cdfe72.png)](https://i.stack.imgur.com/eoalC.png)

您也可以尝试将输入类型更改为 URL，即使没有标题也会给您不同的消息，但我自己的经验是，有时浏览器实现的验证可能有点令人沮丧。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-10T10:39:33.067

如果要更改无效消息，可以使用 oninvalid 属性。

`oninvalid="this.setCustomValidity('User ID is a must')"`

希望这可以帮助你。

# html - 推出导航菜单 - 背景 css 问题

> ID：14926441
> 
> 赞同：0
> 
> 时间：2013-02-17T21:45:51.947
> 
> 标签：html, css, menu, navigation

[现场直播。](http://zoparealty.com/)

我有一个推出的导航菜单，其中（理想情况下）第一组按钮应该在`20px`任`#000104`一侧。将鼠标悬停在“关于”和“属性”上时，部署将`#000104`在扩展选项后面继续。

不过，我在限制第​​一组按钮的大小时遇到​​了麻烦。做这个的最好方式是什么？（我的主要问题是每个按钮的长度不同——关于、博客、联系人、属性；如何动态调整背景颜色的大小？）

[jsfiddle。](http://jsfiddle.net/498qm/)

![理想形象](../Images/66e702b811ae8be29b49dbb9d46d2618.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:59:43.920

您想`background: #000104`在`a`标签上使用，而不是`ul`标签。这样，颜色就不会延伸到无序列表的整个宽度；它只会延伸到`a`文本。此外，要使按钮在每一侧延伸得更多，`padding`请在左侧和右侧添加 20 像素。

```
nav ul li a {
    background: #000104;
    padding-left: 20px;
    padding-right: 20px;
} 
```

[JS 小提琴示例](http://jsfiddle.net/498qm/1/)

# jquery - 为什么 setTimeout 函数可以解决我的 Marionette ItemView/CollectionView DOM 范围问题？

> ID：14926446
> 
> 赞同：0
> 
> 时间：2013-02-17T21:46:28.700
> 
> 标签：jquery, backbone.js, raphael

我确实有以下设置：

```
 var LayerItemView = Backbone.Marionette.ItemView.extend({

    tagName: 'li',
    className: 'stage-layer',
    template: '#layer-item-tpl',

    initialize: function() {
           $(this.el).attr('id' 'layer-'+this.model.id);
    },

    onRender: function() {
    App.vent.trigger('layer:rendered', this.model);
    }

}); 
```

我相信，DOM 元素 layer-[id] 现在应该可用了。eventHandler 然后为每个模型创建一个 Raphael 画布到新创建的 DOM 元素，如下所示：

```
var paper1 = new Raphael(document.getElementById('layer-1'), 896,504);  
var paper2 = new Raphael(document.getElementById('layer-2'), 896,504);  
var paper3 = new Raphael(document.getElementById('layer-3'), 896,504);  
etc. 
```

但是我从 Raphael 收到了一个错误：未捕获的类型错误：无法读取未定义的属性“x”

这告诉我具有 layer-ids 的元素在 DOM 中尚不可用。我用一个简单的 setTimeout 解决了这个问题（有点这样做）：

```
setTimeout(function() {
  var paper1 = new Raphael(document.getElementById('layer-1'), 896,504);  
  var paper2 = new Raphael(document.getElementById('layer-2'), 896,504);  
  var paper3 = new Raphael(document.getElementById('layer-3'), 896,504);    
},0); 
```

我对此感到不舒服。会不会是正确的练习？我想了解为什么这是有效的以及这是否是好的做法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:06:43.520

此代码具有欺骗性，因为乍一看有人可能会认为

```
var paper1 = new Raphael(document.getElementById('layer-1'), 896,504);  
var paper2 = new Raphael(document.getElementById('layer-2'), 896,504);  
var paper3 = new Raphael(document.getElementById('layer-3'), 896,504); 
```

和

```
setTimeout(function() {
  var paper1 = new Raphael(document.getElementById('layer-1'), 896,504);  
  var paper2 = new Raphael(document.getElementById('layer-2'), 896,504);  
  var paper3 = new Raphael(document.getElementById('layer-3'), 896,504);    
},0); 
```

是相同的。实际上，它们是非常不同的。

使这两个代码块不同的原因是 Javascript 是一种单线程语言。`setTimeout`当计时器在 setTimeout 中达到 0 时，不会准确调用任何创建的函数。它将**大约**在那个时间范围内执行。首先 Javascript 将继续执行它所在的当前代码块。

因此`setTimeout`，在您的情况下，线程在其所在的当前代码块中完成**后执行。**

[此处](http://ejohn.org/blog/how-javascript-timers-work/)提供了一个很好的参考资料和更多详细信息。由 John Resig (jQuery) 编写。

# delphi - Delphi - 检测同时按下3个键

> ID：14926453
> 
> 赞同：8
> 
> 时间：2013-02-17T21:47:16.550
> 
> 标签：delphi

我想检测在我的表单中按下 3 个键，例如`Ctrl`+ `C`+ `N`...我需要检测的输入表单将始终以两个字母开头，`Ctrl`然后是两个字母。

我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-17T22:06:22.777

在其中一把钥匙到达时，您可以查看另一把钥匙是否已经被按下。例如：

```
procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if Shift = [ssCtrl] then begin
    case Key of
      Ord('C'):
        if (GetKeyState(Ord('N')) and $80) = $80 then
          ShowMessage('combo');
      Ord('N'):
        if (GetKeyState(Ord('C')) and $80) = $80 then
          ShowMessage('combo');
    end;
  end;
end; 
```

然而，这也会检测到例如`N`++ ，一个不以键开头的`Ctrl`序列。如果这不符合有效键组合的条件，您可以在标志的帮助下保留一些键历史记录。以下应仅检测最初以 开头的序列：`C``Ctrl``Ctrl`

```
type
  TForm1 = class(TForm)
    procedure FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
  private
    FValidKeyCombo: Boolean;
  end;

...

procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if FValidKeyCombo and (Shift = [ssCtrl]) then
    case Key of
      Ord('C'):
        if (GetKeyState(Ord('N')) and $80) = $80 then
          ShowMessage('combo');
      Ord('N'):
        if (GetKeyState(Ord('C')) and $80) = $80 then
          ShowMessage('combo');
    end;
  FValidKeyCombo := (Shift = [ssCtrl]) and (Key in [Ord('C'), Ord('N')]);
end;

procedure TForm1.FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  FValidKeyCombo := False;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-21T12:39:49.310

还有更简单的方法：

```
 procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;  Shift: TShiftState);
     begin
         If (GetKeyState(Ord('Q'))<0) and (GetKeyState(Ord('N'))<0) and (GetKeyState(VK_CONTROL)<0)
           Then ShowMessage('You did it :)');
     End; 
```

# c# - 使用 WIF 4.5 进行简单的访问控制

> ID：14926457
> 
> 赞同：0
> 
> 时间：2013-02-17T21:47:36.183
> 
> 标签：c#, .net-4.5, wif

可以肯定的是，我对 WIF 的了解越多，我就越对如何做事感到困惑。对于本应让事情变得轻松的东西，我无法想象如果没有它会怎样。我想有太多的场景，我很难找到适合我的那个。

出于某些（对我的观点来说很好，但可能很糟糕）的原因，我想避免使用官方的 STS（`ADFS`或`ACS`），然后编写自己的 STS 以**保持简单**！

我正在寻找的是能够处理用户（我将从 AD 身份包装）、用户组（自定义）和将用户/组分配给（自定义）的角色。

我想用`ClaimsPrincipalPermissionAttribute`（或声明性等效项）装饰我的客户端方法，以检查当前用户是否具有所需的角色。我希望能够从 Windows 客户端应用程序或`WCF`托管在 IIS/WAS 上的服务中使用它（Net.tcp 是我的首选绑定）。

一些指导将非常受欢迎，因为我厌倦了阅读关于`WIF`如何塑造解决方案的材料而没有任何改进。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:29:54.910

所以首先 - 没有简单的 STS 这样的东西。我希望您意识到 STS 是关键的安全基础设施，可能不应该是您的第一个 WIF 项目。如果您想查看开源 STS 以获得一些想法，请查看此处：[http](http://thinktecture.github.com/Thinktecture.IdentityServer.v2/) ://thinktecture.github.com/Thinktecture.IdentityServer.v2/ 。

下一个 authZ 发生在服务器端（客户端是可用性）。简单的角色检查是使用 PrincipalPermission 完成的。ClaimsPrincipalPermission 鼓励您将服务代码和安全代码分开 - 查找 ClaimsAuthorizationManager 以获取更多信息。

# cocos2d-iphone - 使用 addchild 方法添加精灵时出错：参数必须为非零

> ID：14926458
> 
> 赞同：0
> 
> 时间：2013-02-17T21:47:41.633
> 
> 标签：cocos2d-iphone, sprite, addchild

我在使用 addchild 添加精灵的方法时遇到问题

以前我从来没有遇到过这个问题，我可以毫无问题地添加 png 文件，现在有时如果我尝试使用 addchild 方法将一些精灵添加到场景中，我会收到以下错误：

*[2126:15503] cocos2d：CCTexture2D。无法创建纹理。cgImage 为零*

[2126:15503] cocos2d：无法在 CCTextureCache 中添加图像：image_1.png

*[2126:15503] *** -[HelloWorldLayer addChild:] 中的断言失败*

我认为问题不在代码中，因为如果我尝试使用默认 Cocos2d 项目中包含的图像添加精灵，它可以工作...我仅从某些图像中收到此错误...如果我添加了它通过同样的方式到项目和现场，可能是什么原因？

我也使用默认的 helloWorldLayer 类收到此错误，无需更改任何内容，仅添加

```
CCSprite * sprite = [CCSprite SpriteWithFile: @"image_1.png"];
[self addChild:sprite]; 
```

其余代码与默认的 HelloWorldLayer 类完全相同，在某些 png 文件中可能会导致此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:30:11.950

将 image_1.png 添加到您的 Xcode 项目中。确保使用完全相同的文件名，例如 Image_1.PNG 由于大写而不会加载到设备上。

# html - NSManagedDocument 中主包的相对地址

> ID：14926460
> 
> 赞同：0
> 
> 时间：2013-02-17T21:47:54.630
> 
> 标签：html, ios, objective-c, css, uiwebview

1.  我有一个 NSManagedDocument，它有一个由少量 html 组成的字符串属性，它将被`UIWebView`. 我还在我的主包中保存了一个样式表，我试图从 html 中提供相对路径。我该怎么做呢？我尝试`href="../MyApp.app/style.css"`了，假设 html 将位于 NSDocumentDirectory 中，但这似乎不起作用。

2.  是否可以在中加载一些html `UIWebView`，然后单独加载一个css（未链接到html）并将其应用于html？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:54:54.327

我要做的是构造一个自包含的 html 字符串。换句话说，加载 html，然后使用通常的`[NSBundle mainBundle]`foo 从包中加载样式数据，然后以通常的方式通过将`<style>`标签插入到`<head>`html 中来组合它们。

# c++ - OpenGL 颜色选择 RGBA 与 RGB

> ID：14926464
> 
> 赞同：1
> 
> 时间：2013-02-17T21:48:17.033
> 
> 标签：c++, opengl, colors, cross-platform, picking

我想通过这三种方法实现颜色选择/选择：

```
void ColorIndex(uint colorIndex)
{
    glColor4ubv((GLubyte *)&colorIndex);
}

void ColorIndices(vector<uint> &colorIndices)
{
    GLubyte *colorPtr = (GLubyte *)&colorIndices[0];
    glColorPointer(4, GL_UNSIGNED_BYTE, 0, colorPtr);
}

void ReadSelectedIndices(int x, int y, int width, int height, uint *selectedIndices)
{
    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glReadPixels(x, y, width, height, GL_RGBA, GL_UNSIGNED_BYTE, selectedIndices);
} 
```

它们基本上将无符号整数（32 位）打包成 4 个字节 R、G、B、A。与 GL_SELECT 相比，它简单且非常快。

问题是它有时不起作用。它不适用于带有 NVIDIA 9800 显卡的 Windows。它适用于 Mac/Windows 中的 ATI Radeon 4670。

我当时认为问题出在 alpha 通道中，所以我尝试了这个实现：

```
union RgbColor
{
    GLuint colorIndex : 24;
    GLubyte components[3];
    struct
    {
        GLubyte r;
        GLubyte g;
        GLubyte b;
    };
};

void ColorIndex(uint colorIndex)
{
    RgbColor color;
    color.colorIndex = colorIndex;
    glColor3ubv(color.components);
}

vector<GLubyte> colorComponents;

void ColorIndices(vector<uint> &colorIndices)
{
    colorComponents.clear();

    for (uint i = 0; i < colorIndices.size(); i++)
    {
        RgbColor color;
        color.colorIndex = colorIndices[i];

        colorComponents.push_back(color.components[0]);
        colorComponents.push_back(color.components[1]);
        colorComponents.push_back(color.components[2]);
    }

    GLubyte *colorPtr = (GLubyte *)&colorComponents[0];
    glColorPointer(3, GL_UNSIGNED_BYTE, 0, colorPtr);
}

const uint kMaxSelectedIndicesCount = 2000 * 2000;  // max width * max height resolution

GLubyte colorBuffer[kMaxSelectedIndicesCount * 3];

void ReadSelectedIndices(int x, int y, int width, int height, uint *selectedIndices)
{
    uint count = (uint)width * (uint)height;

    memset(colorBuffer, 0, count * 3);

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
    glReadPixels(x, y, width, height, GL_RGB, GL_UNSIGNED_BYTE, colorBuffer);
    GetGLError();

    for (uint i = 0; i < count; i++)
    {
        RgbColor color;
        color.components[0] = colorBuffer[i * 3 + 0];
        color.components[1] = colorBuffer[i * 3 + 1];
        color.components[2] = colorBuffer[i * 3 + 2];

        selectedIndices[i] = color.colorIndex;
    }
} 
```

现在在显卡和操作系统上都可以选择，但有时会选择错误的顶点（在选择矩形之外）。

这怎么可能发生？有没有更好的方法来实现颜色选择，它在各种显卡上是健壮的并且总是正确的？

# php - TreeStore 传递参数 - EXTJS 4

> ID：14926472
> 
> 赞同：1
> 
> 时间：2013-02-17T21:48:50.207
> 
> 标签：php, javascript, extjs, extjs4, parameter-passing

## 这是 extjs 4 传递参数 groupid

```
var store = Ext.create('Ext.data.TreeStore', {
        proxy: {
    type: 'ajax',
    autoLoad: true,
    url: 'tree1.php',
    extraParams :{groupid:'2'},
    // Here Magic comes
    },
    actionMethods: 'GET',
        sorters: [{
            property: 'leaf',
            direction: 'ASC'
                    }, {
            property: 'text',
            direction: 'ASC'
                    }]
    }); 
```

## 树1.php

```
<?php
mysql_connect("localhost", "root", "") or die("Could not connect");
mysql_select_db("db_gps") or die("Could not select database");

$parent_id = $_GET['node'];
$group_id = $_GET['groupid'];

if ($parent_id > 0){

}else{
$parent_id = "0";   
}
    // 1) Remove false as checked
    if ($group_id > 0){
    $query = "SELECT * FROM (SELECT GroupID as id,GroupName as text,0 as parent_id FROM tbl_group UNION SELECT DeviceID as id,VehicleNo as text,GroupID as parent_id FROM Tbl_device) as u WHERE parent_id = '".$parent_id."' AND id= '".$group_id."' ORDER BY u.text ASC"; 
    }else{
    $query = "SELECT * FROM (SELECT GroupID as id,GroupName as text,0 as parent_id FROM tbl_group UNION SELECT DeviceID as id,VehicleNo as text,GroupID as parent_id FROM Tbl_device) as u WHERE parent_id = '".$parent_id."' ORDER BY u.text ASC"; 
    }

    $rs = mysql_query($query);
    $arr = array();
    while($obj = mysql_fetch_object($rs)) {

        $qq = mysql_query("SELECT * FROM tbl_device WHERE GroupID='". $obj->id ."'");

        if (mysql_num_rows($qq) > 0) {
            // if have a child
            //echo "have child";
            $obj->leaf = "false";
            //$obj->cls = 'folder';
        } else {
            // if have no child

            $obj->leaf = "true";
            //$obj->cls = 'file';
        }

      // 2) If no leaf then destroy the attribute
      if($obj->leaf != "false"){
         // 1) set checked attribute with an boolean value 
         $obj->checked = false;       
      }
     $arr[] = $obj;
    }   

//echo $parent_id;  
echo json_encode($arr);
?> 
```

## 萤火虫截图

![在此处输入图像描述](../Images/485ed4f50297ee4da3c4a2e9dae32bbb.png)

## 问题

当我使用 FireBug 获取参数时，没有任何 groupid 参数。为什么？我完全不知道这是怎么回事。
请帮助非常感谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:24:42.413

看起来不错，但是`extraParams :{'groupid':'2'},`--> 字符串

# mysql - SQL 查询从所有用户的朋友那里检索消息

> ID：14926481
> 
> 赞同：1
> 
> 时间：2013-02-17T21:49:40.033
> 
> 标签：mysql, sql, database, database-design

我为 Twitter 克隆网站设置了 3 个数据库。

表“用户”：

```
email | firstname | lastname | hash_password 
```

链接表“朋友”：

```
email | friend 
```

这列出了所有用户及其朋友。友谊是单向的（如 Twitter 的“关注”/“关注者”）。 `friends`table 是一个链接表，用于列出所有用户的朋友。所以`friends.user`和`friends.friend`都是`users.email`.

表“消息”：

```
timestamp | user | content 
```

什么是从用户和他的朋友那里检索所有消息的 SQL 查询？

* * *

我试过了：

```
SELECT
  'timestamp', 
  user, 
  content 
FROM
  messages
  INNER JOIN friends ON messages.user = friends.friend
ORDER BY 'timestamp' DESC; 
```

这似乎正确地加入了他们，但我怎样才能只获取特定用户（电子邮件地址）朋友的消息。现在这只是返回所有消息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:07:41.890

的引用`timestamp`应该带有反引号，否则 MySQL 将假定一个字符串文字值。

否则，要返回来自用户和所有朋友的消息，您可以使用`UNION`. 一半返回用户的消息，另一半返回朋友的消息。您需要将用户的电子邮件添加到您的加入条件：

```
/* First part of the UNION returns friends messages */
SELECT
  `timestamp`, 
  user, 
  content 
FROM
  messages 
  /* The join ON clause specifies the main user email */
  INNER JOIN friends 
    ON messages.user = friends.friend
       AND friends.email = 'email@example.com'
UNION ALL
/* Other part of the UNION just gets all messages for the main user by email addr */
SELECT
  `timestamp`,
  user,
  content
FROM
  messages
WHERE user = 'email@example.com'
/* ORDER BY applies to everything */
ORDER BY `timestamp` DESC; 
```

如果你想在这里加入`users`信息（`firstname/lastname`），最简单的方法是将整个事情包装在一个子查询中并加入。

```
SELECT
  users.*,
  messages_sub.content,
  messages_sub.`timestamp`
FROM
  users
  JOIN (/* The entire thing from above */) AS messages_sub ON users.email = messages_sub.user
ORDER BY `timestamp` 
```

也可以使用`UNION`您要查找的文字电子邮件地址和朋友列表来完成，只产生一个外部查询。这有点棘手，但最终可能会更快。从这里的表中引入其他列也不会那么混乱`users`。我将添加名称：

```
SELECT
  `timestamp`,
  user,
  firstname,
  lastname,
  content
FROM
  messages
  INNER JOIN (
    /* Union query produces a list of email addrs - 
       the person you're looking for plus all his friends
       Starts with string literal for the main user
    */
    SELECT 'email@example.com' AS email
    UNION 
    /* Plus all his friends into one list joined against messages */
    SELECT friend AS email FROM friends WHERE email = 'email@example.com'
  ) user_and_friends ON messages.user = user_and_friends.email
  /* Join against the users table for name info */
  INNER JOIN users ON user_and_friends.email = users.email
ORDER BY `timestamp` DESC 
```

# c++ - const 和非 const 模板特化

> ID：14926482
> 
> 赞同：16
> 
> 时间：2013-02-17T21:49:50.273
> 
> 标签：c++, templates

我有一个类模板，我用它来获取变量的大小：

```
template <class T>
class Size
{
   unsigned int operator() (T) {return sizeof(T);}
}; 
```

这很好用，但是对于我想使用 strlen 而不是 sizeof 的字符串：

```
template <>
class Size<char *>
{
   unsigned int operator() (char *str) {return strlen(str);}
}; 
```

问题是当我使用 const char * 创建一个 size 实例时，它会转到非专业版本。我想知道是否有办法在模板专业化中同时捕获 char * 的 const 和非 const 版本？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T22:00:32.737

使用这种技术：

```
#include <type_traits>

template< typename T, typename = void >
class Size
{
  unsigned int operator() (T) {return sizeof(T);}
};

template< typename T >
class Size< T, typename std::enable_if<
                 std::is_same< T, char* >::value ||
                 std::is_same< T, const char* >::value
               >::type >
{
  unsigned int operator() ( T str ) { /* your code here */ }
}; 
```

**编辑：**如何在类定义之外定义方法的示例。

**EDIT2：**添加了帮助程序以避免重复可能冗长而复杂的情况。

**EDIT3：**简化的助手。

```
#include <type_traits>
#include <iostream>

template< typename T >
struct my_condition
  : std::enable_if< std::is_same< T, char* >::value ||
                    std::is_same< T, const char* >::value >
{};

template< typename T, typename = void >
struct Size
{
  unsigned int operator() (T);
};

template< typename T >
struct Size< T, typename my_condition< T >::type >
{
  unsigned int operator() (T);
};

template< typename T, typename Dummy >
unsigned int Size< T, Dummy >::operator() (T)
{
  return 1;
}

template< typename T >
unsigned int Size< T, typename my_condition< T >::type >::operator() (T)
{
  return 2;
}

int main()
{
  std::cout << Size< int >()(0) << std::endl;
  std::cout << Size< char* >()(0) << std::endl;
  std::cout << Size< const char* >()(0) << std::endl;
} 
```

哪个打印

```
1
2
2 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-10T02:35:25.513

当然，您还应该能够编写：

```
template <>
class Size<const char *>
{
   unsigned int operator() (const char *str) {return strlen(str);}
};

template <>
class Size<char *> : public Size<const char *>
{ }; 
```

...并且，您是否需要：

```
template <size_t size>
class Size<char[size]> : public Size<const char *>
{ };

template <size_t size>
class Size<const char[size]> : public Size<const char *>
{ }; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T22:08:07.490

一种方法是使用辅助函数来确定模板类型是 a`char *`还是 a `char const *`。你可以用一个简单的结构来做到这一点。然后您可以使用[SFINAE](https://encrypted.google.com/url?sa=t&rct=j&q=sfinae&source=web&cd=1&cad=rja&sqi=2&ved=0CC4QFjAA&url=http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error&ei=t1QhUcHZG-2F0QG9y4GQDw&usg=AFQjCNFZiKaK2Vh9x7OdzCq0MpA87_XU8w&bvm=bv.42553238,d.cWE)来选择您的 Size 结构的适当专业化。

```
#include <cstring>
#include <iostream>

#include <boost/utility/enable_if.hpp>

template<typename T>
struct is_cstring {
  enum { value = false };
};

template<>
struct is_cstring<char *> {
  enum { value = true };
};

template<>
struct is_cstring<char const *> {
  enum { value = true };
};

template<typename T, typename = void>
struct Size;

template<typename T>
struct Size<T, typename boost::disable_if<is_cstring<T> >::type> {
  unsigned int operator ()(T const &) const {
    return sizeof(T);
  }
};

template<typename T>
struct Size<T, typename boost::enable_if<is_cstring<T> >::type> {
  unsigned int operator ()(T const &str) const {
    return strlen(str);
  }
};

int main() {
  std::string blah = "afafasa";
  char *x = "asdfsadsad";

  std::cout << Size<int>()(4) << std::endl;
  std::cout << Size<char const *>()("blahblah") << std::endl;
  std::cout << Size<char *>()(x) << std::endl;
} 
```

打印的结果是：

```
4
8
10 
```

# c# - 优化正则表达式

> ID：14926486
> 
> 赞同：0
> 
> 时间：2013-02-17T21:50:08.630
> 
> 标签：c#, .net, regex

我遇到了针对此查询运行匹配需要很长时间的问题。我正在尝试匹配如下所示的内容：

```
One or more content paragraph of any length
Here is an optional paragraph

A single line or list item
A single line or list item 
```

这是我的模式。虽然它适用于短表达式，但它不适用于较长的表达式。

```
^((.+[\r\n]?)+)\r\n\r\n([* -]*(.+)[\r\n]?)+$ 
```

我的目标实际上是将第一段内容分成一个段落，并使用匹配模式将最后一项收集到一个列表对象中。我假设两个换行符将段落和一组单行项目（只有一个换行符）分开。

希望这不会令人困惑。如何优化这个正则表达式？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:03:05.713

通常可以通过将修饰符添加到和量词来避免耗时、低效的[回溯，以使它们](http://www.regular-expressions.info/catastrophic.html)*懒惰*或*不情愿地*匹配，即尽可能少地匹配。 `?``*``+`

 **`.`当量词跟随通配符元字符时，这一点尤其重要。

尝试

```
(.+?)\r\n\r\n(?:[* -]*(.+?)(?:\r\n|$))+ 
```

with `RegexOptions.Singleline`so`.`匹配任何字符，*包括*换行符。
（或者使用`[\s\S]`代替第一个`.`）。

第一个捕获组将捕获连续换行符之前的所有内容，然后下一个捕获组将捕获后面的每一行。`*`与您的正则表达式一样，`-`单行中的 任何前导或空格字符都不会被捕获。

段落将是`match.Groups[1].Value`，第一个捕获的单行将是`match.Groups[2].Captures[0].Value`，第二个`match.Groups[2].Captures[1].Value)`等。

如果行尾可能很简单`\n`，请更改`\r\n`为`\r?\n`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:10:36.687

我不擅长正则表达式，但你的对我来说似乎很优化。但为了使其更快，请改用 split 将段落与列表分开

```
res = yourstring.Split('\r\n\r\n');
paragraph = res[0];
list=res[1]; 
```

然后您可以使用正则表达式或再次拆分以将列表项彼此分开**

# ios - UIImageView 旋转但未正确重新定位

> ID：14926488
> 
> 赞同：0
> 
> 时间：2013-02-17T21:50:19.243
> 
> 标签：ios, uiimageview, rotation, landscape, portrait

我正在构建一个以横向和纵向模式显示图像的应用程序。旋转完美。图像在横向模式下也完美定位。然而，它将横向坐标保持为纵向，因此它错位了。请在下面找到我的代码。你能告诉我我错过了什么吗？还有一种方法可以严格地从 Xib 文件中实现这一点吗？

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
[[self navigationController] setNavigationBarHidden:YES animated:NO];

UIImage *startImage = [UIImage imageNamed:@"title.png"];
UIImageView *startImageView = [[UIImageView alloc] initWithImage:startImage];

if (curOrientation == UIInterfaceOrientationPortrait || curOrientation == UIInterfaceOrientationPortraitUpsideDown) {

    [startImageView setFrame:CGRectMake(-128, 0, 1024, 1024)];

}else{

    [startImageView setFrame:CGRectMake(0, -128, 1024, 1024)];

}

[self.view addSubview:startImageView];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:53:38.213

目前，您仅在首次加载视图时调用此代码。你实际上需要调用它

*   每当视图出现在屏幕上时（以防设备在屏幕外旋转时）
*   每当设备旋转

但是您应该将视图创建代码保留在 viewDidLoad 中，因为您只想创建一次。

创建一个属性来保存指向视图的指针，以便您可以从代码中的所有这些位置引用它……</p>

```
@property (nonatomic, weak) UIImageView* startImageView; 
```

在 viewDidLoad 中创建它（但不要担心几何，因为您可以在 viewWillAppear 中执行此操作）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
        // Do any additional setup after loading the view.
    [[self navigationController] setNavigationBarHidden:YES animated:NO];
    UIImage *startImage = [UIImage imageNamed:@"title.png"];
    UIImageView *startImageView = [[UIImageView alloc] initWithImage:startImage];
    self.startImageView = startImageView;
    [self.view addSubview:startImageView];
} 
```

制作一个通用的定位方法：

```
- (void) orientStartImageView
    {
        UIInterfaceOrientation curOrientation = [UIApplication sharedApplication].statusBarOrientation;
        if (curOrientation == UIInterfaceOrientationPortrait || curOrientation == UIInterfaceOrientationPortraitUpsideDown) {
            [self.startImageView setFrame:CGRectMake(-128, 0, 1200, 1200)];
        }else{
            [self.startImageView setFrame:CGRectMake(0, -128, 1200, 1200)];
        }
    } 
```

从 viewWillAppear 调用它（每次视图出现在屏幕上时触发）：

```
- (void) viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self orientStartImageView];
} 
```

从 viewWillLayoutSubviews 调用它（每次视图在屏幕上并且设备旋转时触发）：

```
- (void)viewWillLayoutSubviews
{
    [super viewWillLayoutSubviews];
    [self orientStartImageView];
} 
```

顺便说一句，我不确定您的帧是否正确 - 在纵向中，您将左边缘移出屏幕，在横向中，您将顶部边缘移出屏幕。那是你要的吗？很可能您可以在 Interface Builder 中实现您想要的，但从您的代码中不清楚那是什么 - 也许您可以发布一张图片。还要检查您是否禁用了自动布局（Interface Builder 的文件检查器中的复选框）以简化问题。

**更新**

您可以在没有代码的情况下从 Xib 执行此操作：将 imageView 置于其 superView 的中心，将其大小设置为您的最终大小（例如 1200x1200），禁用自动布局，取消选择所有弹簧和支柱，适当地设置您的视图模式（例如`center`或`scaleToFill`)

![在此处输入图像描述](../Images/243209457d4af19f4c58dde0c3eb7552.png)

![在此处输入图像描述](../Images/93c3e97b8b007105150a5bc17c58b601.png)

![在此处输入图像描述](../Images/3ee619d2a621d951f6557689039385f5.png)

# c++ - C++ 温纳皮。从文件中读取第一行，显示在文本框中

> ID：14926489
> 
> 赞同：0
> 
> 时间：2013-02-17T21:50:24.760
> 
> 标签：c++, winapi, fstream

我最近开始在 C++ 中尝试使用 winapi。到目前为止相处得很好。

但是，我在寻找读取文件第一行并将其显示在文本框中的方法时遇到了问题。

经过一些谷歌搜索后，似乎有些人建议为此使用 winapis 函数，而其他人则说使用 fstream 更简单。我确实采用了 fstream 的方式，但遇到了一些麻烦，可能没什么难的，但是，我找不到答案！

这是我的代码：

```
string line;
ifstream filen ("tid.txt");
if (filen.is_open())
   {

   getline (filen,line);
   cout << line << endl;
   filen.close();
   }

   SetDlgItemText(hwnd, IDC_MAIN_EDIT, line); 
```

这给了我来自编译器的这个问题：

```
Cannot convert `std::string' to `const CHAR*' 
```

这里需要某种转换，但不知道是什么。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:52:38.970

试试这个：

```
SetDlgItemText(hwnd, IDC_MAIN_EDIT, line.c_str()); 
```

# java - 如何在Java中实现等价类？

> ID：14926490
> 
> 赞同：1
> 
> 时间：2013-02-17T21:50:25.697
> 
> 标签：java, equivalence

在 Java 中实现等价类的简单方法是什么？有没有为此目的的图书馆？

麻烦的部分是如何编写一个高效且非天真的“相等”运算符。

让`S = {x,y,z,w,h}`. 如果我们`x->1, y->1, z->1, w->2, h->2`对 S 的等价类使用映射，则必须将映射`x->10, y->10, z->10, w->20, h->20`视为相同的等价类。

当集合 S 的基数变大时，幼稚的“相等”运算符会很快变得耗时。

什么是简单的方法？任何想法？

[编辑]为了澄清，具体问题可以形式化如下：

令 S 为非空集。我们用 M 表示一组从 V 到整数的部分映射。比较容易证明下面定义的二元关系 \sim 导出了 M 上的等价关系。

对于 m1 和 m2 M 的两个部分映射，m1 \sim m2 当且仅当，

1.  对于 V 的任何 a，当且仅当定义了 m2(a) 时，才定义 m1(a)
2.  对于 V 的任何 a,b，m1(a) 和 m1(b) 都被定义为相同的整数值 'z1' 当且仅当 m2(a) 和 m2(b) 都被定义为相同的整数值“z2”（可能与“z1”不同，也可能不同）

    例子。

    a->9,b->9,w->1 \sim a->10,b->10,w->0

    但是这样说是*不对的*

    a->5 \sim b->9

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:04:47.040

根据我从您的问题中了解到的情况，您可以找到一次集合的最大公约数（欧几里德算法递归），然后用它映射商 - 如果它们与另一个集合完全相等，则它相等，否则不相等。这仅在集合的大小和映射相等时才有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:25:23.560

如果我理解正确，您可以应用矢量归一化。例如，通过将其所有分量分别除以向量长度，将 3d 向量归一化为长度 1。如果两个归一化向量的分量相等，则它们的原始（非归一化）向量指向同一方向（我认为您将其定义为“相等”）

x,y,z,w,h 在您的情况下将是一个 5 维向量。当显示方向相同时，它们属于同一类，但可以具有任意长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-22T04:06:17.187

旁白：我假设集合 S 实际上是您定义中的集合 V。

我认为 Uli 走在正确的轨道上，尽管我不认为 Set(Set(E)).equals() 对您的目的有效。（抱歉，我无法让 lt 或 gt 符号通过）

Set(E).equals() 的默认实现可能是 O(n *log n) 或 O(n^2)。Set(E).equals() 几乎可以肯定涉及排序；O(n* log n) 尽可能好。我建议你看看基数排序。它是 O(n*log n)，但增长非常缓慢。

# c - 将节点添加到字符串的 BST

> ID：14926492
> 
> 赞同：0
> 
> 时间：2013-02-17T21:50:33.467
> 
> 标签：c, segmentation-fault, binary-search-tree

这是为了学校作业。当我尝试将新节点添加到 BST 时出现段错误。我认为这可能与我分配内存的方式有关，但我不知道如何解决这个问题。

结构代码：

```
struct tnode {
  char* data;
  struct tnode* left;
  struct tnode* right;
};

typedef struct tnode Tnode; 
```

添加节点功能：

```
Tnode* add_tnode(Tnode* current_tnode, char* value) {
  if (current_tnode == NULL) {
    malloc(sizeof(Tnode));
    current_tnode->data = value;
    current_tnode->left = NULL;
    current_tnode->right = NULL;
    return current_tnode;
      }
  else {
    if (strcmp(current_tnode->data, value) <= 0) {
      add_tnode(current_tnode->left, value);
      return current_tnode->left;
      }
    else {
      add_tnode(current_tnode->right, value);
      return current_tnode->right;
      }
  }
} 
```

测试功能的主程序：

```
int main() {
  Tnode* new_node =  (Tnode*)malloc(sizeof(Tnode));
  char* data1 = "Hello";
  char* data2 = "Goodbye";
  char* data3 = "Hi";
  char* data4 = "Bye";
  char* data5 = "Hey";

  add_tnode(new_node, data1);
  add_tnode(new_node, data2);
  add_tnode(new_node, data3);
  add_tnode(new_node, data4);
  add_tnode(new_node, data5);

  return 0;
} 
```

这是我回溯分段错误时收到的错误：

```
#0  0x0000003458478350 in strcmp () from /lib64/libc.so.6
#1  0x00000000004005be in add_tnode (current_tnode=0x601010, 
    value=0x400708 "Hello") at tree.c:16
#2  0x0000000000400523 in main () at treetest.c:12 
```

我在想当 strcmp() 试图找到存储在节点中的字符串时，它找不到它。任何帮助或提示将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T21:51:43.923

线（中`add_tnode`）

```
malloc(sizeof(Tnode)); 
```

应该

```
current_tnode = malloc(sizeof(Tnode)); 
```

您当前正在立即丢弃 from 的返回值`malloc`，这意味着下一行代码取消引用 NULL 指针，从而导致您的段错误。

您还需要显式地或通过使用分配来初始化`new_node`in的成员。并且，正如 Karoly Horvath 所指出的，使用来自的返回值`main``calloc``add_tnode`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T21:53:33.877

另一个问题：

`add_tnode`返回新分配节点的地址，但您从不使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:00:33.540

您正在尝试访问“new_node”的“数据”字段，

但是“new_node”没有用数据值初始化。

您需要将这些行移出 if 子句：

```
 current_tnode->data = value;
current_tnode->left = NULL;
current_tnode->right = NULL; 
```

祝你好运。

# sql - 保证行组的唯一性（数据库）

> ID：14926493
> 
> 赞同：0
> 
> 时间：2013-02-17T21:50:38.680
> 
> 标签：sql, database, unique-key

我正在概念化一个数据库。我想要一个有 3 列的表（1 列是 PK，另外 2 列是 FK），并且我想要使每个列组合只能有一个元素。两者都是外键的事实是否足以保证两者组合的唯一性？（这两列只能有一行具有相同的值组合）。我还应该使它们成为复合唯一键吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:52:19.350

> 两者都是外键的事实是否足以保证两者组合的唯一性？

没有。

> 我还应该使它们成为复合唯一键吗？

正确的。如果您创建包含它们的复合唯一键 - 您保证这些对是唯一的（除非它们接受`NULL`值）

# python - 如何在 python 中将 pdf 文件作为图形插入另一个 pdf 中？

> ID：14926495
> 
> 赞同：1
> 
> 时间：2013-02-17T21:50:49.370
> 
> 标签：python, pdf, reportlab, pdfrw

我正在尝试在 Python 中自动生成一些 pdf 格式的报告。我在报告中有我想要的数字，但这些数字目前保存为 pdf。将数字另存为其他选项是一种选择，但对于我正在尝试做的事情并不理想。我找到了使用 pdfrw 和 reportlab 将页面从一个 pdf 转换为新 pdf 页面的示例（[http://code.google.com/p/pdfrw/wiki/ExampleTools](http://code.google.com/p/pdfrw/wiki/ExampleTools)），但我不希望它们成为我的新pdf的整个页面，只是一个占据页面一部分的数字。我之前没有使用过pdfrw，所以对Canvas方法及其完全能够做什么我不是很了解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-28T04:21:38.953

`pagemerge`在画布上使用页面的一部分的技巧是`ViewInfo`对象。使用它，您可以描述矩形坐标（例如，当您向`PageMerge`对象添加页面时）。

`ViewInfo`文件中更详细地定义和描述了对象`buildxobj.py`。

我应该为此制作另一个示例和一些文档，但这是我不久前[回答的一个类似的](https://stackoverflow.com/a/31640152/3577601)[stackoverflow 问题](https://stackoverflow.com/questions/31557909/pypdf-split-each-page-in-two-pad-with-blank-space)。高温高压

（免责声明：我是 pdfrw 作者。）

# sql - 从 .sql 文件还原 SQL Server 数据库

> ID：14926498
> 
> 赞同：3
> 
> 时间：2013-02-17T21:51:18.737
> 
> 标签：sql, sql-server

所以我们有一个加密的数据库，它吐出并杀死了我们的整个 SQL Server 设置。糟透了我们的数据，但我们足够聪明，可以在 Git 中拥有我们的数据结构/存储过程/函数

问题是它们被保存为`.sql`文件。

有什么方法可以从充满这些文件的目录中批量恢复我们的模式？

我环顾四周，只能找到从`.bak`文件或`.mdf`'s 恢复的教程。这不是懒人的出路——我只需要尽快找到解决方案。任何建议或资源/任何东西都将不胜感激。

感谢互联网，

迪伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:35:49.887

考虑到我尝试恢复的数据结构很大，单独运行每个文件并不是一个实际的解决方案。我敢肯定我可以写一个 bat fie，但我在 python 中很快就完成了：

```
import os, subprocess
processDir = 'C:\\Database-master\\'
files = os.listdir(processDir)
for f in files:
    db = processDir + f
    #potentially drop corrupt db and create new ones with f
    scripts = os.listdir(db)
    for script in scripts:
        path = db + '\\' + script
        proc = subprocess.Popen('sqlcmd -S 127.0.0.1 -i "' + path +'"', shell=True)
        proc.wait() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:34:49.707

如果您的数据库很大/很复杂，那么您将遇到的真正问题不是批处理执行，而是应该执行脚本的顺序。

除非您有一些备份文件，否则这将是真正的问题。

如果您只有脚本，那么我建议您这样做。

1.  表
2.  意见
3.  其他一切...

只需执行一个又一个查询，直到出现错误。当您确实遇到错误时，这很可能是因为您试图引用尚不存在的对象。只需保存该脚本以供以后使用并继续执行脚本。然后重新从头开始，检查导致错误的脚本。现在对象可能在那里。根据需要重复此操作多次，直到创建所有对象。

# c# - 将对象列表复制到另一个对象的列表中

> ID：14926503
> 
> 赞同：1
> 
> 时间：2013-02-17T21:52:11.473
> 
> 标签：c#, forms, list, object, collections

我一直试图在 C# 中解决这个问题。我刚开始做 C#，所以我很感激你的帮助。

我想将对象列表复制到另一个对象的列表中。

它看起来像这样。

```
class Person
    {
        public String fName;
        public String lName;
        public List<House> housesOwned = new List<House>();
        public Student(String FName, String LName)
        {
            this.fName = FName;
            this.lName = LName;

        }
    }

class House
    {
        public String Address;

        public House (String ad1){
            this.Address1 = ad1;

        }
    } 
```

现在，在我的表单中，我创建了一个房屋类型的对象列表（准确地说，它有 2 个房屋类型的对象），这是该人拥有的两座房屋。

就像是 ：`List<House> housesList = new List<House>;`

基本上我想要做的是将`List<House> housesList`表单中创建的复制到`List<House> housesOwned`对象Person中的列表中。按下提交按钮时会发生这种情况。到目前为止，我得到了这个：

```
List<Person> person = new List<Person>(); // declared at the beginning of the form
.....
private void submit_Click(object sender, EventArgs e)
        {
            person.Add(new Person(personName.Text, personLName.Text));
            //I do not know what comes next to copy the list housesList to the list housesOwned
            MessageBox.Show("Done!");
        } 
```

我希望复制包含其地址的对象房屋。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:56:07.193

保留您创建的新 Person 的实例，然后将其添加`houseList`到该实例。

```
private void submit_Click(object sender, EventArgs e)
{
        var newPerson = new Person(personName.Text, personLName.Text);
        newPerson.housesOwned.AddRange(houseList);
        person.Add(newPerson);
        MessageBox.Show("Done!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:54:58.023

试试这个。

```
 List<Person> people = new List<Person>();

    var person = new Person(personName.Text, personLName.Text);

    person.housesOwned.AddRange(housesList);

    people.Add(person); 
```

# php - 你如何从电子邮件中获取附加的 PDF 并保存它，php

> ID：14926505
> 
> 赞同：0
> 
> 时间：2013-02-17T21:52:24.717
> 
> 标签：php, email, imap, attachment

我已经坚持了几个小时。但基本上，我有一个收件箱，其中包含一些我想取出的内容和附件 PDF。我想出了如何取出我想要的所有 HTML，但是如何保存附加的 PDF？

这是我到目前为止的鳕鱼：

public function read_emails(){ // 设置用户检查

```
 $strUser     = "email";
    $strPassword = "passwrd";
    $delete_emails=false;

    // open
    $hMail = imap_open ("{webmail.somethingsomething.com:143/notls}INBOX", "$strUser", "$strPassword") or die("can't connect: " . imap_last_error());
    // get headers
    $aHeaders = imap_headers( $hMail );
    // get message count
    $objMail = imap_mailboxmsginfo( $hMail );
    if($objMail != NULL)
    {           
        // process messages
        for( $idxMsg = 1; $idxMsg <= $objMail->Nmsgs; $idxMsg++  )
        {
            // get header info
            $objHeader = imap_headerinfo( $hMail, $idxMsg );

            // get from object array
            $aFrom = $objHeader->from;

            // process headers
            for( $idx = 0; $idx < count($aFrom); $idx++ )
            {
                // get object
                $objData = $aFrom[ $idx ];
                // get email from
                $strEmailFrom = $objData->mailbox . "@" . $objData->host;
                //Get the subject 
                $message_subject = $objHeader->subject;
                //Get the body of the message
                $fullBody = imap_fetchbody($hMail,$idxMsg, 2);//displays full body including junk
                $bodyMessage = quoted_printable_decode($fullBody);
                //Get the msg structure 
                $message_structure = imap_fetchstructure($hMail, $idx);
                //WHAT DO I DO HERE????
            }

            // delete message
            if($delete_emails == true){
                imap_delete( $hMail, $idxMsg );
            }

        }

        // expunge deleted messages
        if($delete_emails == true){
            imap_expunge( $hMail );
        }

        //Clears the cache
        imap_gc($hMail, IMAP_GC_ELT);

    }
    // close
    imap_close( $hMail );

} 
```

我有消息结构，如果我 print_r 可以看到其中一个部分有附件，我可以看到它是 PDF。不知道接下来会发生什么。我已经尝试过，但似乎无法找到一个好的解决方案。

谢谢！

编辑：这是 imap_fetchstructure 的内容

stdClass Object ( [type] => 1 [encoding] => 0 [ifsubtype] => 1 [subtype] => MIXED [ifdescription] => 0 [ifid] => 0 [ifdisposition] => 0 [ifdparameters] => 0 [ifparameters] => 1 [parameters] => Array ([0] => stdClass Object ([attribute] => boundary [value] => f46d044473ef81609f04d5f1997c)) [parts] => Array ([0] => stdClass Object ( [type] => 1 [encoding] => 0 [ifsubtype] => 1 [subtype] => ALTERNATIVE [ifdescription] => 0 [ifid] => 0 [ifdisposition] => 0 [ifdparameters] => 0 [ ifparameters] => 1 [parameters] => Array ([0] => stdClass Object ([attribute] =>boundary [value] => f46d044473ef81609b04d5f1997a)) [parts] => Array ([0] => stdClass Object ([ type] => 0 [encoding] => 0 [ifsubtype] => 1 [subtype] => PLAIN [ifdescription] =>0 [ifid] => 0 [lines] => 1 [bytes] => 37 [ifdisposition] => 0 [ifdparameters] => 0 [ifparameters] => 1 [parameters] => 数组 ( [0] => stdClass对象 ( [attribute] => charset [value] => ISO-8859-1 ) ) ) [1] => stdClass Object ( [type] => 0 [encoding] => 0 [ifsubtype] => 1 [subtype] => HTML [ifdescription] => 0 [ifid] => 0 [lines] => 1 [bytes] => 37 [ifdisposition] => 0 [ifdparameters] => 0 [ifparameters] => 1 [parameters] => Array ( [0] => stdClass Object ( [attribute] => charset [value] => ISO-8859-1 ) ) ) ) [1] => stdClass Object ( [type] => 3 [encoding] => 3 [ifsubtype] => 1 [subtype] => PDF [ifdescription] => 0 [ifid] => 0 [bytes] => 179876 [ifdisposition] => 1 [disposition] => 附件 [ifdparameters] => 1 [ d参数] =>Array ( [0] => stdClass Object ( [attribute] => filename [value] => Statement of Account.pdf ) ) [ifparameters] => 1 [parameters] => Array ( [0] => stdClass Object ( [ attribute] => name [value] => Statement of Account.pdf ) ) ) ) )

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:08:45.337

根据[doc](http://php.net/manual/en/function.imap-fetchstructure.php)，您在 中有一个正文部分数组，因此您可以循环遍历该数组并在该部分的和对应于 PDF 文档`$message_structure->parts`时停止。就像是：`->type``->subtype`

```
foreach ($message_structure->parts as $idx => $part) {
    if (TYPEAPPLICATION === $part->type && 'pdf' === strtolower($part->subtype)) {
        $data = imap_fetchbody($hMail, $idxMsg, $idx);
        // Then you should check the $part->encoding
        // to decode data appropriately, e.g.:
        if (ENCBASE64 === $part->encoding) {
            $data = base64_decode($data);
        }
    }
} 
```

# dart - 如何使用 Dart 打开 IndexedDB 数据库？

> ID：14926511
> 
> 赞同：2
> 
> 时间：2013-02-17T21:52:58.977
> 
> 标签：dart, indexeddb

如何使用 IndexedDB 和 Dart 打开数据库？API 与 JavaScript 的并不完全相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T21:52:58.977

新的 IndexedDB API 使用 Dart 对 Streams 和 Futures 的支持。以下是使用 Dart M3 或更高版本打开 IndexedDB 数据库的方法：

```
import 'dart:html';
import 'dart:indexed_db';
import 'dart:async';

Future<Database> openDatabase(String dbName, String storeName, {int version:1}) {
  return window.indexedDB.open(dbName, version: version,
    onUpgradeNeeded: (e) {
      Database db = e.target.result;
      if (!db.objectStoreNames.contains(storeName)) {  
        db.createObjectStore(storeName);
      }
    });
}

main() {
  openDatabase('test-db', 'test-store').then((Database db) {
    // do database stuff
  });
} 
```

在此代码中，`window.indexedDB.open`调用返回 a `Future<Database>`，在打开数据库时完成。

该`onUpgradeNeeded`函数在数据库版本与指定版本不匹配时运行。

# css - Twitter Bootstrap 在 CSS 中使用星号宽度属性

> ID：14926521
> 
> 赞同：0
> 
> 时间：2013-02-17T21:54:06.867
> 
> 标签：css, internet-explorer, twitter-bootstrap, scaffold, grid-layout

我一直在研究 Bootstrap 脚手架系统背后的 CSS，我想知道为什么在下面的代码中需要使用星号和不同的百分比。我相信星号是 IE hack，但为什么百分比需要不同？IE 渲染的东西是否略有不同？如果是这样，并且如果我想创建一个自己的简单脚手架，我将如何计算出带星号的宽度应该是多少（我知道如何计算出普通宽度）？

```
.row-fluid .span12 {
    width: 100%;
    *width: 99.94680851063829%;
}
.row-fluid .span11 {
    width: 91.43646408839778%;
    *width: 91.38327259903608%;
}
.row-fluid .span10 {
    width: 82.87292817679558%;
    *width: 82.81973668743387%;
} 
```

感谢您提供的任何帮助。:)

编辑：我现在看到 IE7 的宽度可以通过减去大约来得出。0.05319148936 从正常宽度，但为什么会这样？例如，如果我想创建一个具有更多或更少列的脚手架，那么计算会有所不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-16T12:15:22.943

IE7 在四舍五入它的子像素方面存在问题。在 webkit 或 firefox 中恰好 100% 的东西最终可能会在 IE7 中大几个像素，这些额外的几个像素的结果可能最终将列推到彼此下方。最好的解释[http://ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

看起来好像引导程序为 IE7 中的每一列删除 0.05319148936 以处理此问题。

如果你使用 sass，你可以使用这个 mixin

```
@mixin x-percent-width($percentage) {
 width: $percentage;
 *width: $percentage - 0.05319148936;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T12:45:01.847

这个问题很老了，但我仍然想添加一个解释。

该值源自固定为 940 像素的 bootstrap 2.0 网格宽度。舍入误差不能高于像素的一半，因此它是从 ie7 的每个宽度中减去的值。

检查代码：[https ://github.com/twbs/bootstrap/blob/v2.0.4/less/mixins.less#L601](https://github.com/twbs/bootstrap/blob/v2.0.4/less/mixins.less#L601)

```
.span (@columns) {
    width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1));
    *width: (@fluidGridColumnWidth * @columns) + (@fluidGridGutterWidth * (@columns - 1)) - (.5 / @gridRowWidth * 100 * 1%);
} 
```

@gridRowWidth = 940 像素

# linux - unix 格式化输出变量

> ID：14926531
> 
> 赞同：1
> 
> 时间：2013-02-17T21:55:18.873
> 
> 标签：linux, bash, unix

我正在编写一个程序，它将获取数据字段来创建用户名和密码

这是数据的格式

```
MWS1990 XXX-XX-XXXX STASNY, MATTHEW W SO-II BISS CPSC BS   INFO TECH   412/882-0581 
```

这是程序

```
for linePosition in {11..22}
do
  holder=`sed -n "${linePosition}p" $1|awk '{print $1}'`
  holder2=`sed -n "${linePosition}p" $1|awk '{print $12}'`
  holder3=`sed -n "${linePosition}p" $1|awk '{print $7}'`
  echo "UserName"
  echo "$holder"
  echo "password"
  echo "$holder2"
  echo "$holder3"
done 
```

它返回这样的输出

```
UserName
MWS1990
password
412/882-0581
BISS 
```

有两件事是错误的

1.  我希望它删除用户名后的一年。所以上面的例子只是 MWS。我可以添加什么到**holder=`sed -n "${linePosition}p" $1|awk '{print $1}'**以使其仅返回前 3 个字母。（最好是小写但不是必须的）

2.  我想删除电话号码的前 6 个字母。 所以电话号码不是**412/882-0581** **，而是 0581**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:45:56.167

既然你已经使用了[`awk`](http://www.gnu.org/software/gawk/manual/html_node/String-Functions.html)，你可以减少涉及的命令

```
awk 'NR >= 11 && NR <= 22 {
    print "UserName";
    print tolower(substr($1, 1, 3));
    print "password";
    print substr($12, 9);
    print $7;}' $1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:31:43.447

如果您使用 Bash，则可以使用 Bash[子字符串提取](https://stackoverflow.com/a/428580/825783)轻松完成这两件事（另请参见[此处](http://tldp.org/LDP/abs/html/string-manipulation.html#SUBSTREXTR01)）。

换句话说，类似：

```
echo ${holder2:0:3} # "MWS"
echo ${holder3:8:12} # "0581"

# Or, to begin indexing from the right end:

echo ${holder3:(-4)} # "0581" 
```

至于在 Bash 中将字符串转换为小写，请参见例如 ghostdog74 的[答案](https://stackoverflow.com/a/2264537/825783)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T22:43:05.603

所以这是一个修改后的答案

```
for linePosition in {11..22}
do
  holder=`sed -n "${linePosition}p" $1|awk '{print $1}'`
  holder2=`sed -n "${linePosition}p" $1|awk '{print $12}'`
  holder3=`sed -n "${linePosition}p" $1|awk '{print $7}'`
  echo "UserName"
  echo `expr match "$holder" '\([A-Z|a-z]*\)'`
  echo "password"
  echo ${holder2: -4}
  echo "$holder3"
done 
```

现在我坚持使用我在评论中发布的链接中描述的 bash 字符串替换。

但是，我想指出以下有关此解决方案的警告

这是对以下 bash 脚本行的快速描述...

```
`expr match "$holder" '\([A-Z|a-z]*\)'` 
```

反引号在您的 for 循环中执行一个**子 shell**`expr` ，它们运行传递的命令， `match`其中返回与字符串开头的`$holder`正则表达式匹配的字符串部分。`[A-Z|a-z]*`参考[http://tldp.org/LDP/abs/html/string-manipulation.html](http://tldp.org/LDP/abs/html/string-manipulation.html)

现在，如果您的数据文件不是太长，那么就可以了。

但是，如果您的脚本必须处理**大型数据文件**，那么我建议您查看 Olaf 的解决方案。

为什么？

如果您正在处理一个大文件，或者如果您不知道脚本要处理的文件的大小，那么最好避免*在 for 循环*中执行子 shell 。

Olaf 利用**awk**来执行您需要的处理的解决方案具有一个重要优势，因为所有工作都*在单个进程中进行*。*而 for 循环为文件的每一行*分叉和执行一个新的 bash 实例。一种昂贵的操作，当放置在 for 循环中时可能会有风险。

对于您的代码，我们可以看到当前 for 循环由一小组行绑定，但如果这曾经被更改或在 for 循环中引入了一个错误，导致它永远运行，那么脚本可能会对您的机器的性能产生不利影响。

因此，尽管我的回答可能更容易适应您的代码。如果您必须处理大量数据，Olaf 的答案会更好。

# text - 隐藏 jqgrid 标题中的文本

> ID：14926532
> 
> 赞同：0
> 
> 时间：2013-02-17T21:55:19.353
> 
> 标签：text, jqgrid, header, hide, caption

我不希望在我的标题上显示任何文本。但是，我需要标题。
**标题：“”，**
删除了整个标题。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T09:55:39.570

`caption: "&nbsp;"` - 在以后的版本中不起作用。您应该改用：

```
label: "&nbsp;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:14:08.537

如果我理解正确您的要求，您可以使用例如以下`caption`选项值：

```
caption: "&nbsp;" 
```

# haskell - Haskell: f :: hex String -> 使用尾递归的整数

> ID：14926533
> 
> 赞同：5
> 
> 时间：2013-02-17T21:55:24.047
> 
> 标签：haskell

我正在寻找一种使用尾递归将十六进制更改为整数的方法。到目前为止，我只尝试了常规原始递归的糟糕实现，我什至还没有接近。非常沮丧。即使是尾递归的例子也会有所帮助并受到高度赞赏。对于这个实现，我不太了解它。

例子：

*   `"005" -> 5`
*   `"1E" -> 30`

限制：不能使用导入或 if、then、else 等，如果可能，必须使用递归或尾递归。

我的递归尝试。

```
 hexToInteger :: String -> Integer
        |(x:xs) = []        = []
        |x == 0             = hexToInteger xs
        |otherwise          = addition x + hexToInteger xs

    addition :: String -> Integer
    addition x 
        |--something to check what position we're dealing with and what hex value.
        |--Return the Integer value 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T22:52:03.377

通常，对于尾递归函数，您需要一个累加器参数 - 如果具有纯度，则结果可能仅取决于达到的基本情况。因此，您需要一个辅助函数，该函数还带有一个累加器参数，并使用累加器的初始值调用它，

```
hexToInteger :: String -> Integer
hexToInteger string = hexToIntegerHelper initialAccumulator string 
```

你必须找出

*   你应该为累加器传递什么初始值
*   如何在每个步骤中更新累加器。

例如，尾递归实现`reverse`是

```
reverse :: [a] -> [a]
reverse xs = reverseHelper [] xs

reverseHelper :: [a] -> [a] -> [a]
reverseHelper accumulator [] = accumulator
reverseHelper accumulator (x:xs) = reverseHelper (x:accumulator) xs 
```

和一个尾递归阶乘（捏造否定论点的情况）

```
factorial :: Integer -> Integer
factorial n = factorialHelper 1 n

factorialHelper :: Integer -> Integer -> Integer
factorialHelper accumulator n
    | n < 2     = accumulator
    | otherwise = factorialHelper (n*accumulator) (n-1) 
```

所以你可以看到 的一般结构`hexToIntegerHelper`，

```
hexToIntegerHelper :: Integer -> String -> Integer
hexToIntegerHelper accumulator "" = accumulator
hexToIntegerHelper accumulator (d:ds) = hexToIntegerHelper (newAccumulatorFrom accumulator d) ds 
```

问题是如何从旧的累加器和十六进制数字计算新的累加器（以及初始累加器应该是什么）。

对于累加器的更新，

```
digitToInt :: Char -> Int 
```

from`Data.Char`可能很有用，它可以处理所有十六进制数字。但是，它不会返回所需的类型，因此您需要使用 a`fromIntegral`或 a`toInteger`将其转换`Int`为`Integer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T23:46:01.970

Here are two recursive functions, although it has been pointed out to me that they are not tail recursive. Maybe they can help you get there, though.

```
hexToInteger :: String -> Integer
hexToInteger [] = 0
hexToInteger str = 
  fromIntegral z + 16 * hexToInteger (init str)
    where z = let y = last str 
              in if y >= 'A' && y <= 'Z' 
                    then fromEnum y - 55 
                    else if y >= 'a' && y <= 'z'
                            then fromEnum y - 87
                            else fromEnum y - 48

hexToInteger :: String -> Integer
hexToInteger [] = 0
hexToInteger str = 
  z + 16 * hexToInteger (init str)
    where z = case last str of 
                '0' -> 0 
                '1' -> 1 
                '2' -> 2 
                '3' -> 3 
                '4' -> 4 
                '5' -> 5 
                '6' -> 6 
                '7' -> 7 
                '8' -> 8 
                '9' -> 9 
                'A' -> 10 
                'B' -> 11 
                'C' -> 12 
                'D' -> 13 
                'E' -> 14 
                'F' -> 15
                'a' -> 10 
                'b' -> 11 
                'c' -> 12 
                'd' -> 13 
                'e' -> 14 
                'f' -> 15
                otherwise -> 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-07T15:04:10.323

我们可以像在纸上转换十六进制字符串一样实现这一点：将输出初始化为 0，然后从左到右读取字符串，每次将结果乘以 16 并添加新数字。

创建并调用一个将累加器参数初始化为 0 的私有函数：

```
hex2int s = hex2int' s 0
    where 
```

递归的基本情况采用空字符串并返回累加器：

```
 hex2int' "" n = n 
```

递归情况采用字符串的第一个字符并相应地增加累加器。

```
 hex2int' (c:s) n = hex2int' s ((n * 16) + (hexDigit2int c)) 
```

`hexDigit2int`是一个简单的查找。

```
 hexDigit2int c
          | c == "0" = 0

         ...

          | c == "f" = 15 
```

# php - Dwolla 付款按钮：成功结帐后的重定向是否会被阻止，直到发生回调/通知？

> ID：14926536
> 
> 赞同：0
> 
> 时间：2013-02-17T21:55:42.443
> 
> 标签：php, payment-gateway, payment, dwolla

我问这个的原因是 b/c 成功购买后显示给用户的页面通常会有所不同，具体取决于是否实际进行了购买。

因此，通常**必须**在重定向发生之前知道购买是否成功。

如果 Dwolla 的回调和/或 webhook 通知不能保证首先到达，是否有人建议如何（在 PHP 中）在重定向 URL 处编写必要的轮询/等待以允许首先处理通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:56:41.267

根据 Dwolla 的说法：

“我们从不等待 webhook”

“但是，在我们将用户重定向回您的网站之前，我们确实会等待 CALLBACK（我假设它们的意思是称为[“付款回调”的那个）”。](https://www.dwolla.com/applications)

# c# - 线程不安全对象中的这种锁定模式有什么问题吗？

> ID：14926537
> 
> 赞同：2
> 
> 时间：2013-02-17T21:55:42.823
> 
> 标签：c#, multithreading, locking

这种模式似乎对我在这个线程不安全的环境中实现线程锁定有用。

然而，就模式和最佳实践而言（尤其是我自己已经弄清楚了），我对公开两个整理相同结果的集合并不过分生气。但是不安全的集合确实需要公开公开，我不想将其设为私有并使用“AddResult(x)”方法。

这是解决这个问题的正确方法吗？

```
public class UnsafeObject
{
    public ObservableCollection<HighSpeedObject> ResultsUnsafe { get; set; }

    /// Accessed by UI thread once every 100ms
    public List<HighSpeedObject> Results
    {
        get
        {
            lock (_padlock)
            {
                return ResultsUnsafe.ToList();
            }
        }
    }

    private readonly static object _padlock = new object();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:07:29.820

[`ObservableCollectionz<T>`类](http://msdn.microsoft.com/en-us/library/ms668604.aspx)的实例不是线程安全的，因此您的解决方案不稳定。

属性中的锁`Results`只确保一次有一个线程可以使用该属性，但它不保护该`ResultsUnsafe`属性。其他线程可以在属性从中创建列表时更改`ResultsUnsafe`属性中的集合。`Results`

* * *

旁注：您正在使用静态成员作为非静态数据锁定的标识符。这意味着锁将阻止对类的所有实例的访问，而不仅仅是您要保护的数据所在的实例。要保护静态数据，您应该使用静态成员作为标识符，并且要保护实例数据，您应该使用实例成员作为标识符。

# javascript - Javascript 距离计算返回 NaN

> ID：14926538
> 
> 赞同：0
> 
> 时间：2013-02-17T21:55:46.723
> 
> 标签：javascript, google-maps-api-3

我有一个函数来计算从 Google Maps API 获得的两组纬度和经度坐标之间的距离

这是计算距离函数：

```
function getDistance(lat1, lon1, lat2, lon2) {

    var lat1p = parseFloat(lat1);
    var lon1p = parseFloat(lon1);
    var lat2p = parseFloat(lat2);
    var lon2p = parseFloat(lon2);

    var R = 6371; // km (change this constant to get miles)
    var dLat = (lat2p-lat1p) * Math.PI / 180;
    var dLon = (lon2p-lon1p) * Math.PI / 180;
    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1 * Math.PI / 180 ) * Math.cos(lat2 * Math.PI / 180 ) *
        Math.sin(dLon/2) * Math.sin(dLon/2);
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
    var d = R * c;
    if (d>1) return Math.round(d)+"km";
    else if (d<=1) return Math.round(d*1000)+"m";

    return d;
} 
```

我相信所有坐标都被认为是浮点类型我不是 100% 确定，但是当我打印或警告它返回 NaN 的距离时......有没有办法做到这一点。我试图远离 Google Maps API 来计算距离，因为这会使一切变得更加困难，因为我基本上必须重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:08:54.930

对不起，我修复了它我双重声明变量以及我有一个 . 而不是 a ，当我调用距离函数时。谢谢你们的建议，他们让我弄清楚了。

# c# - XPath 可变时查找元素

> ID：14926544
> 
> 赞同：1
> 
> 时间：2013-02-17T21:56:14.807
> 
> 标签：c#, xml, linq, xpath

我正在尝试编写一个将 XML 作为输入的算法，并找到与特定元素关联的值，但 XML 正文中元素的位置会有所不同。我见过许多使用 XDocument.Descendants() 的示例，但大多数（如果不是全部）示例期望结构是一致的，并且后代是众所周知的。我想我需要递归 XML 才能找到这个值，但在朝着这个方向前进之前，请询问一般人群。

当元素的路径在每次调用中可能不同时，在 XDocument 中查找元素的最佳方法是什么？只需要找到第一次出现，而不是按任何特定顺序。可以通过扩大或深入发现第一次出现。

例如，如果我正在尝试查找元素“FirstName”，并且 Call one 的输入 XML 看起来像..

```
<?xml version="1.0"?>
<PERSON><Name><FirstName>BOB</FirstName></Name></PERSON> 
```

下一个电话看起来像：

```
<?xml version="1.0"?>
<PERSONS><PERSON><Name><FirstName>BOB</FirstName></Name></PERSON></PERSONS> 
```

你有什么建议吗？XDocument 中是否有我没有看到的“查找”选项？

## 更新：

上面的简单示例适用于 XDocument.Descendents 的lazyberezovsky 答案，但真正的 XML 不适用。我有问题的 XML...

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <To s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://localhost:52087/Service1.svc</To>
    <Action s:mustUnderstand="1" xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://tempuri.org/IService1/GetDataUsingDataContract</Action>
  </s:Header>
  <s:Body>
    <GetDataUsingDataContract xmlns="http://tempuri.org/">
      <composite xmlns:a="http://schemas.datacontract.org/2004/07/WcfService2" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
        <a:BoolValue>false</a:BoolValue>
        <a:Name>
          <a:FirstName>BOB</a:FirstName>
        </a:Name>
        <a:StringValue i:nil="true" />
      </composite>
    </GetDataUsingDataContract>
  </s:Body>
</s:Envelope> 
```

## 更新：

lazyberezovsky 极大地帮助我向我展示了 Descendents 应该如何工作。注意 XML 中的名称空间。学过的知识。又发现了一个。有类似问题的文章..

[在不知道命名空间的情况下使用 LINQ 搜索 XDocument](https://stackoverflow.com/questions/2610947/search-xdocument-using-linq-without-knowing-the-namespace)

使用以下代码段解决...

```
var xdoc = XDocument.Parse(xml);
var name = (from p in xdoc.Descendants() where p.Name.LocalName == "FirstName" select p.Value).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:18:09.820

当您使用 Descendants 查找第一次出现的元素时，您不需要知道文件的结构。以下代码适用于您的两种情况：

```
var xdoc = XDocument.Load(path_to_xml);
var name = (string)xdoc.Descendants("FirstName").FirstOrDefault(); 
```

与 XPath 相同

```
var name = (string)xdoc.XPathSelectElement("//FirstName[1]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:06:30.180

在不了解 XML 文档的所有可能排列方式的情况下（顺便说一句，这很不寻常），我认为没有人希望给您任何有价值的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:18:17.953

“只需要找到的第一个出现，而不是任何特定的顺序。” 我想`Descendants`耍花招。看这个：

```
string xml = @"<?xml version=""1.0""?>
             <PERSONS>
                  <PERSON>
                      <Name>
                         <FirstName>BOB</FirstName>
                      </Name>
                  </PERSON>
             </PERSONS>";
XDocument doc = XDocument.Parse(xml);
Console.WriteLine(string.Join(",", doc.Descendants("FirstName").Select(e =>(string)e)));

xml = @"<?xml version=""1.0""?>
            <PERSON>
               <Name>
                   <FirstName>BOB</FirstName>
               </Name>
            </PERSON>";
doc = XDocument.Parse(xml);
Console.WriteLine(string.Join(",", doc.Descendants("FirstName").Select(e =>(string)e))); 
```

# php - Mysqli_real_escape_string 阻止 preg_split 工作？

> ID：14926545
> 
> 赞同：2
> 
> 时间：2013-02-17T21:56:20.030
> 
> 标签：php, mysqli, preg-split

```
Example Text: This will be stored in the $_POST['x'] variable
This is sentence one.
This is sentence two.
This is sentence three. 
```

如果我在下面运行此代码，它将返回一个只有一个元素的数组

```
$x= mysqli_real_escape_string($db, $_POST['x']);
$y= preg_split("/(\r\n|\n|\r)/", $x); 
```

但是，如果我在下面运行此代码，它将正确地将其拆分为所有 3 个元素。

```
$x = $_POST['x'];
$y= preg_split("/(\r\n|\n|\r)/", $x); 
```

有没有其他人经历过这种现象？为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T21:57:52.510

> [http://php.net/mysqli-real-escape-string](http://php.net/mysqli-real-escape-string)
> 编码的字符为 NUL (ASCII 0)、\n、\r、\、'、" 和 Control-Z。

这意味着换行符变为`\\n`(LF)、`\\r`(CR) 和`\\r\\n`(CRLF)。因此它们不再匹配正则表达式。

将来，RTM ;)

# node.js - Nodejs：错误获取/响应本地主机

> ID：14926547
> 
> 赞同：0
> 
> 时间：2013-02-17T21:56:19.920
> 
> 标签：node.js, cakephp, localhost, mamp

我正在端口 80 的 localhost 上运行带有 MAMP 的 Cakephp 应用程序。我还有 Node.js，他们使用来自 Cake 应用程序（localhost/客户端）的 js 脚本在端口 4000 上侦听/写入。

当我从 js 应用程序调用 Node 时，它​​可以工作。

但是，当我尝试通过 http.get() 从 Node 调用 Cakephp 页面（localhost/saveData/123）时；oder http.request 用于将数据保存在数据库中，它崩溃了。

> events.js:71 抛出参数[1]；// 未处理的“错误”事件 ^ 错误：在 Object.afterConnect [as oncomplete] (net.js:761:19) 的 errnoException (net.js:770:11) 处连接 ECONNREFUSED

奥德

> 请求问题：连接 ECONNREFUSED

我已经测试了宽度 www.google.com，它可以工作。看来问题出在“本地主机”上。

有人可以帮助我吗？:)

编辑：我也尝试过 127.0.0.1 但它不起作用（对于 MAMP 和 Node）。

PS：对不起我的英语，我是法国人:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T08:36:23.193

可能你有一个在端口 80 上运行的本地网络服务器。像 Skype 这样的程序也可以连接到端口 80。

您可以尝试关闭 Skype 和/或 Webserver（XAMPP、WAMPP、usbwebserver 等...）。

在 Cmd.exe 中列出端口

> $ netstat -a

# java - 在 PayPalAPIInterfaceServiceService 中设置 token 和 tokenSecret

> ID：14926548
> 
> 赞同：0
> 
> 时间：2013-02-17T21:56:26.003
> 
> 标签：java, paypal

我正在尝试在 java 中实现 Paypal API 交易搜索调用。以下作品：

```
PayPalAPIInterfaceServiceService service = new PayPalAPIInterfaceServiceService(new File("sdk_config.properties"));
            SetAccessPermissionsReq perm = new SetAccessPermissionsReq();
            TransactionSearchRequestType transSearch = new TransactionSearchRequestType();
            transSearch.setStartDate(startDate);
            transSearch.setEndDate(endDate);

            TransactionSearchReq request = new TransactionSearchReq();
            request.setTransactionSearchRequest(transSearch);

            TransactionSearchResponseType response = service.transactionSearch(request);

            List ans = response.getPaymentTransactions(); 
```

但是，我找不到如何将令牌和 tokenSecret 加载到服务对象中，以返回对我拥有适当令牌的第三方 Paypal 帐户的交易搜索。

像这样简单的东西

```
service.setToken(token); 
```

不起作用，因为 PayPalAPIInterfaceServiceService 没有 setToken 方法。

可以使用 java.util.Properties 文件初始化“服务”对象，但我在任何地方都找不到这样的示例。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:05:23.477

SDK 本身提供了一个示例配置文件。如果你找不到它，那么这里是[GitHub 上当前版本的链接](https://github.com/paypal/merchant-sdk-java/raw/d3e6e4f9835a4b0707efbcdce9bc5a3a5a5b1dad/merchantsample/src/main/resources/sdk_config.properties)

# google-maps-api-3 - 谷歌地图将dragend的值传递给变量

> ID：14926551
> 
> 赞同：1
> 
> 时间：2013-02-17T21:56:59.693
> 
> 标签：google-maps-api-3, draggable

好的，我花了 2 天时间来寻求帮助 :) 现在代码一切正常，我只需要使标记可拖动并更新 Lat 和 Lng 值。目前，代码通过当前位置以及在网页上输入位置来捕获 lat 和 lng。然后将_Lat 和_lng 的值提交到数据库。我需要用户能够在提交数据库之前拖动标记以微调位置并更新 _lat 和 _lng。我已经使标记可拖动，但我不知道如何添加 dragend 代码，以便它在数据库提交之前动态更新 lat 和 _lng 的值。我不需要更新网页上的任何内容，只需更新发布到数据库的 _lat 和 _lng 值。这是现有的代码：

## 谢谢

```
var gmap;
var gmarker;
var geocoder;

function initialize() {
    // Get here center of map - by default - San Francisco center
    var center = new google.maps.LatLng(37.47, -122.25);
    var mapOptions = {
      center: center,
      zoom: 12,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    geocoder = new google.maps.Geocoder()
    gmap = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
    // Set inner position of map to form parameters
    $('input[name="_lat"]').val(37.47);
    $('input[name="_lng"]').val(-122.25);

    gmarker = new google.maps.Marker({
            map: gmap,
            position: center,
            icon: '/static/internal/images/mapicon.png',
    draggable: true
        });

    google.maps.event.addListener(gmap, 'click', function(event) {
        gmarker.setPosition(event.latLng);
        $('input[name="_lat"]').val(event.latLng.lat());
        $('input[name="_lng"]').val(event.latLng.lng());
    });

    navigator.geolocation.getCurrentPosition(function(position){
            var _lng = position.coords.longitude;
            var _lat = position.coords.latitude;
            $('input[name="_lng"]').val(_lng);
            $('input[name="_lat"]').val(_lat);
            var new_position = new google.maps.LatLng(_lat, _lng);
            gmap.setCenter(new_position);
            gmarker.setPosition(new_position);
        })
}

function showAddress(address) {
  if (geocoder) {
    geocoder.geocode(
      {'address': address},
      function(results, status) {
        if (status != google.maps.GeocoderStatus.OK) {
          alert(address + " not found");
        } else {
          gmap.setCenter(results[0].geometry.location);
          gmarker.setPosition(results[0].geometry.location);
          $('input[name="_lat"]').val(results[0].geometry.location.lat());
          $('input[name="_lng"]').val(results[0].geometry.location.lng());
        }
      }
    );
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:11:17.193

监听标记的`position_changed`-event：

```
google.maps.event.addListener(gmarker, 'position_changed', function() {

    $('input[name="_lat"]').val(this.getPosition().lat());
    $('input[name="_lng"]').val(this.getPosition().lng());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:44:47.663

您的点击事件在地图上，它应该在标记上

改变

```
google.maps.event.addListener(gmap, 'click', function(event) { 
```

至

```
google.maps.event.addListener(gmarker, 'click', function(event) { 
```

# heroku - Sendgrid/PHP/Heroku 不工作

> ID：14926554
> 
> 赞同：1
> 
> 时间：2013-02-17T21:57:08.870
> 
> 标签：heroku, directory, sendgrid

我将 SendGrid 的基本版本添加到 Heroku，以便我们可以从我们的网站发送用户反馈电子邮件。我正在使用的基本测试实现如下：

```
<?php
/**** Takes posted content from 'contact.html' and sends us an email *****/

require 'sendgrid-php/SendGrid_loader.php';
$sendgrid = new SendGrid('username', 'pwd');

$mail = new SendGrid\Mail();
$mail->
  addTo('matthewpolega@gmail.com')->
  setFrom('matthewpolega@gmail.com')-> 
  setSubject('another')->
  setText('Hello World!')->
  setHtml('<strong>Hello World!</strong>');

$sendgrid->
    smtp->
    send($mail);

header( 'Location: contact.html' );

?> 
```

它在本地主机测试中运行良好。但是，当我在线测试时，它会停止。有没有人遇到过这样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:32:21.527

听起来您在 Heroku 上的子模块有一些问题。有两种方法可以解决此问题：

[1）通过阅读heroku 子模块文档](https://devcenter.heroku.com/articles/git-submodules)找出你做错了什么。这可能很简单`git submodule add path/to/sendgrid`

2) 删除`.git`SendGrid 模块中的目录并将其签入您的存储库：

```
$ cd ../path/to/sendgrid_lib
$ rm -rf .git/
$ cd ../root/project/dir
$ git add ../path/to/sendgrid_lib
$ git commit -m "Removed SendGrid submodule and added to repo" 
```

# c++ - 具有自身的私有变量向量

> ID：14926558
> 
> 赞同：-2
> 
> 时间：2013-02-17T21:57:16.877
> 
> 标签：c++

我只是想知道我是否可以做这样的事情：

```
class apple
{
public: "constructor and public method in here"
private:
  vector<*apple> allApple;
} 
```

这段代码好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:58:49.687

您可能是指指向同一类型的指针向量，

```
vector<apple*> allApple; 
```

[在这种情况下，是的，您可以，尽管如果智能指针](http://en.wikipedia.org/wiki/Smart_pointer)指向动态分配的对象，您可能更愿意保留这些指针。

# java - 无法选择 ISO-7816-4 智能卡上的文件

> ID：14926559
> 
> 赞同：1
> 
> 时间：2013-02-17T21:57:18.940
> 
> 标签：java, smartcard, apdu

我正在尝试使用 javax.smartcardio 从 ISO-7816-4 eVCR（电子车辆登记卡）读取数据。每当我尝试从卡中选择文件时，我都会得到 SW 代码 6A86，它转换为“不正确的 P1 或 P2 参数”。我尝试了 P1 和 P2 的许多值组合并得到了相同的结果。卡本身可以与其他程序一起正常工作，示例代码可以与其他卡一起正常工作。我有问题的卡与 [此问题](https://stackoverflow.com/questions/9513383/evrc-smart-cards)中的卡相同。

这是我使用的代码： Card card = terminal.connect("*"); System.out.println("ATR: " + Utils.bytes2HexString(card.getATR().getBytes()));

```
 byte aid[] = {(byte)0xA0, 0x00, 0x00, 0x00, 0x77, 0x01, 0x08, 0x00, 0x07, 
        0x00, 0x00, (byte) 0xFE, 0x00, 0x00, (byte) 0xAD, (byte) 0xF2};
    ResponseAPDU response = null;
    CardChannel channel = card.getBasicChannel();
    response = channel.transmit(new CommandAPDU(0x00, 0xA4, 0x04, 0x0C, aid));
    System.out.println("AID: " + response);

    response = channel.transmit(new CommandAPDU(0x00, 0xA4, 0x02, 0x00, new byte[]{(byte)0xD0, 0x01}));
    System.out.println("SELECT: " + response); 
```

输出是：

```
 ATR: 3B:DB:96:00:80:B1:FE:45:1F:83:00:31:C0:64:1A:18:01:00:0F:90:00:52
    AID: ResponseAPDU: 2 bytes, SW=9000
    SELECT: ResponseAPDU: 2 bytes, SW=6a86 
```

我看不出我做错了什么。某些卡是否需要额外的初始化步骤或选择的一些额外参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T18:09:39.013

您可以`0x0C`用作 P2 （而不是`0x00`）？也许文件ID是正确的，但它不能回馈任何文件信息（`0x0C`意思是：不回馈文件信息）。

这取决于卡操作系统和/或应用程序是否会影响返回的状态字。

# python - 使用 python 脚本激活 root 用户。(OSX)

> ID：14926562
> 
> 赞同：1
> 
> 时间：2013-02-17T21:57:30.410
> 
> 标签：python, macos, root

好的，我一直在研究基于 python 的“hacktool”，它可以帮助渗透测试人员在 Mac 上安装一些基本工具。现在大多数这些工具都需要激活root用户，所以我需要一种简单的方法来激活root用户（在mac上，这可以通过'passwd root'来完成，遗憾的是需要输入另一个输入）

需要一些帮助，伙计们，时间不多了，互联网不会给我任何有用的答案。:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T13:02:48.580

OSX 中有一个名为“dsenableroot”的命令，它完全符合我的要求。该命令的工作方式如下：

```
dsenableroot -u yourusername -p yourpassword -r rootpassword 
```

它完全按照它应该做的事情，现在我只需要在“yourpassword”部分的解决方法，因为我不知道用户计算机的密码。将在这里发布更新！

# javascript - Javascript 中的 Markdown 语法高亮显示

> ID：14926564
> 
> 赞同：5
> 
> 时间：2013-02-17T21:57:45.017
> 
> 标签：javascript, callback, syntax-highlighting, markdown

我正在尝试让[彩虹](https://github.com/ccampbell/rainbow)语法突出显示库与[标记](https://github.com/chjj/marked)的降价渲染引擎一起使用。该`marked`文档指出，通过以下配置选项支持语法高亮显示：

```
marked.setOptions({
  highlight: function(code, lang) {
    return highlighter.javascript(code);
  }
}); 
```

`rainbow` [源代码](https://github.com/ccampbell/rainbow/blob/master/js/rainbow.js#L740)表明通过以下语法支持传递字符串以突出显示：

```
Rainbow.color(code, lang, success); 
```

我对如何将两者放在一起有点不知所措。具体来说，`success`是一个将被异步调用的回调，我不能简单地从回调中的`Rainbow.color`代码返回值`highlight`。这将如何实现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T02:34:04.040

作者标记在这里。我不久前在问题跟踪器上解决了这个问题：[https ://github.com/chjj/marked/issues/47](https://github.com/chjj/marked/issues/47)

使用带有标记的异步荧光笔是非常有可能的。您只需要遍历词法分析器吐出的标记。

此处的示例：[https](https://github.com/chjj/marked/issues/47#issuecomment-5297067) ://github.com/chjj/marked/issues/47#issuecomment-5297067 （请记住，这是一个示例。您必须对其进行一些修改。）

我可能只是使用上面链接中的方法在本地实现这一点。这将对使用异步荧光笔的人造成性能影响，但如果您需要异步荧光笔，这意味着荧光笔正在执行某种 IO，并且您已经在性能受到影响。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T00:05:05.093

您可以尝试使用另一个突出显示库，例如[highlight.js](https://github.com/isagalaev/highlight.js) - 它具有同步突出显示方法 (`hljs.highlight(lang, code).value`和`hljs.highlightAuto(code).value`)，您可以在浏览器中使用，如下所示：

```
marked.setOptions({
  highlight: function(code) {
    return hljs.highlightAuto(code).value;
  }
}); 
```

[这是一个有效的 JsFiddle 示例。](http://jsfiddle.net/7bsouk2d/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T22:24:50.070

不幸的是，没有办法解决这个问题。

`marked`似乎需要一个**同步**语法高亮，并且`rainbow`是一个**异步**语法高亮。

在 Javascript 中，无法将后者转换为前者。

这就是为什么在`node.js`许多库函数中同时存在同步和异步版本的原因。Javascript 中没有办法在只给定异步的情况下构建同步的，因为您无法创建“嵌套事件循环”（在某些情况下，相反的转换可以使用 web 工作者完成）。

可能不难添加同步版本`rainbow`（例如，通过预先提供可能异步加载的外部资源）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T14:49:25.827

不是完美的解决方案，但在同步 API 合并到 rainbow.js 之前，我使用以下代码解决了它：

```
// ... after marked() has converted the markdown to html 
// (the highlight option of marked should be unchanged!)

// find all <code> elements and go through each
$('body')
     .find('code')
     .each(function() {
            var $code = $(this),
                cls = $code.attr('class'),
                language;

            // no language information at all
            if(typeof cls === 'undefined') {
                return;
            }

            // actually we should also check if a valid "lang-" class 
            // (which is by default set through marked) is given
            language = cls.split('-')[1];

            // add the data-language to the <code> element
            $code.data('language', language);
        });

// let the rainbows shine
Rainbow.color(); 
```

这运行客户端并使用 jQuery。

# html - 子菜单定位

> ID：14926565
> 
> 赞同：2
> 
> 时间：2013-02-17T21:57:47.967
> 
> 标签：html, css, submenu

（我已经更新了代码以反映工作代码。下面的代码现在可以工作）

我一直在努力尝试定位子菜单。为了记录，我在上周完成了我的作业，试图完成这项工作，但我认为我在某个地方搞砸了我的父母/孩子关系。

我想要做的是在页面的列中放置一个菜单，然后，当悬停时，在其右侧出现一个子菜单。问题是我的菜单出现了，但是当我调整页面大小时，子菜单会到处乱跳。看起来我的相对和绝对位置是问题，但我看不到在哪里

这是我的 CSS 代码：

```
#col1
{
background-color:#000033;
width:15%;
height:100%;
float:left;
color:#FFF000;
font-family: bold;
font-size: 100%;
}

ul.nav li 
{
position:relative;
float:left;
width:100%;
}

ul.nav a
{
display: block;
background-color:#B2B2D9;
margin-right:3%;
margin-bottom:1%;
margin-left:1%;
text-decoration:none;
border-top-color:#FFFFFF;
border-right-color:#E6E6E6;
border-bottom-color:#FFFFFF;
border-left-color:#E6E6E6;
border-top-width: 3%;
border-right-width: 3%;
border-bottom-width: 3%;
border-left-width: 3%;
border-top-style: solid;
border-right-style: solid;
border-bottom-style: solid;
border-left-style: solid;
padding: 2%;
}

ul.nav
{
position:relative;
list-style-type: none;
padding-left:0px;
line-height:1.5em;
}

ul.nav2 a
{
display: block;
background-color:#000033;
border:solid 3px black;
padding:5%; 
margin-right:0px;
margin-bottom:0%;
margin-left:0%;
text-decoration:none;
color:white;
border-top-color:#FFFFFF;    
border-right-color:#E6E6E6;
border-bottom-color:#FFFFFF;
border-left-color:#E6E6E6;
}

ul.nav2
{
position:absolute;
top:0;
left:100%;
display:none;
font-size:100%;
list-style-type: none;
width:8em;
line-height:1.5em;
float: none;
clear: none;
margin: 0px;
}

ul.nav2 li 
{
display:block;
margin-left:-2.8em;
width:100%;
line-height:1.3em;
} 
```

这是我的 HTML 和 JavaScript：

```
<script>

$(document).ready(function () {
    $('.nav').hover(function (e) {
        $('.nav2').slideDown('normal');
    }, function () {
        $('.nav2').slideUp('normal');
    });
});

</script>
</head>

 <body>

<div id="banner">
<img src="images/banner.jpg" width="100%" alt="banner" />
</div>

<div id="wrapper">

<div id="col1">

<ul class="nav">
<li><a href="http://www.ahome.com">Home</a></li>
<li><a href="http://www.ab.com">About</a></li>

    <ul class="nav2">
  <li><a href="http://www.albio.com">Bio</a></li>
  <li><a href="http://www.acred.com">Credentials</a></li>
  <li><a href="http://www.aled.com">Education</a></li>
  </ul>

<li><a href="http://www.anew.com">New Listings</a></li>
<li><a href="http://www.afeat.com">Featured Home</a></li>
<li><a href="http://www.atow.com">Town Facts</a></li>
<li><a href="http://www.acme.com">Contact Me</a></li>
</ul>

</div>

<div id="main">
"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt 

</div>

</div>
</body>
</html> 
```

如您所见，我的菜单是问题所在。有人可以让我指出正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:18:00.217

你可能需要这种方式。如果您能够更改 HTML 并稍微调整 CSS，您就可以实现这一点。

### HTML

```
<ul class="nav">
    <li>
        <a href="#">Menu 1</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 2</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Menu 3</a>
        <ul>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
            <li><a href="#">Sub Menu Item</a></li>
        </ul>
    </li>
</ul> 
```

### CSS

```
* {font-family: "Segoe UI", Tahoma;}
ul.nav {border-bottom: 1px solid #999;}
ul.nav li a {display: block; text-decoration: none; color: #333; padding: 5px; border: 1px solid #fff;}
ul.nav > li:hover {border: 1px solid #666; border-bottom: 1px solid #fff;}
ul.nav li a:hover {background: #ccc; border: 1px solid #999;}
ul.nav > li {display: inline-block; position: relative; border: 1px solid #fff;}
ul.nav > li ul {display: none; position: absolute; left: -1px; width: 150px; border: 1px solid #666; border-top-color: #fff; margin-top: 1px;}
ul.nav > li:hover ul {display: block;}
ul.nav > li ul li {display: block;} /* Vertical Menu */
ul.nav > li ul li {display: inline-block;} /* Horizontal Menu */ 
```

### 小提琴： http:
[//jsfiddle.net/vMuxA/](http://jsfiddle.net/vMuxA/)（垂直菜单）
[http://jsfiddle.net/vMuxA/1/](http://jsfiddle.net/vMuxA/1/)（水平菜单）

# c# - 为什么这不起作用？

> ID：14926570
> 
> 赞同：0
> 
> 时间：2013-02-17T21:58:26.573
> 
> 标签：c#, for-loop, static, scope

下面是我正在使用的代码。

我希望输出为 1.65，但我得到 0。

这似乎是一个范围问题。但是我已经将变量声明`t`为静态，那么为什么输出仍然是 0？

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public static double t;

        private void Form1_Load(object sender, EventArgs e)
        {
            for (int i = 0; i < 100; i = i + 1)
            {
                t = (i * (1 / 60));
            }
            MessageBox.Show(Convert.ToString(t));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T21:59:36.273

`1 / 60`将始终为 0。

你正在做[整数除法](http://mathworld.wolfram.com/IntegerDivision.html)。

`double`在除法运算中，如果您想要一个`double`结果，您至少需要一个操作数。

改变：

```
t = (i * (1 / 60)); 
```

到：

```
t = (i * (1 / 60D)); 
```

或者：

```
t = (i * (1D / 60)); 
```

将解决问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T21:59:45.987

当你除整数值时，你得到一个整数。`1 / 60`产生零。将操作数之一转换为 double`(double)1/60`以获得正确的 double 结果。或者，当您在这种情况下使用常量时，您可以使用双字面量而不是整数字面量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T22:01:15.410

为什么你做 100 个部门但只显示一次消息框？它与以下内容相同：

```
t = (99 * (1 / 60));
MessageBox.Show(Convert.ToString(t)); 
```

# r - R中具有不同时间窗口的移动平均值

> ID：14926572
> 
> 赞同：7
> 
> 时间：2013-02-17T21:58:58.467
> 
> 标签：r

我想计算某个时间窗口内的移动平均值，而不在时间序列开始时生成 NA。例如，如果我将时间窗口设置为 3，那么前 2 个观察值将具有 NA。我想要的是第一次观察的时间窗口为 1，第二次观察的时间窗口为 2，所有剩余的观察时间窗口为 3。

我当前的代码：

```
#example data
x <- c(3,9,2,8,4,6,5,8)
#moving average with time window of length 3
(ma3 <- filter(x,rep(1/3,3),sides=1)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T22:12:17.343

除了蛮力，我没有看到其他方法：

使用`rollapply`from package`zoo`而不是`filter`：

```
c(x[1], mean(x[1:2]), rollapply(x, width=3, FUN=mean)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T22:15:50.377

让我也跳上`rollapply`火车：

```
> rollapply(c(NA, NA, x), width=3, FUN=mean, na.rm=T)
[1] 3.000000 6.000000 4.666667 6.333333 4.666667 6.000000 5.000000 6.333333 
```

预先添加两个 = 3-1的`NA`值并使用`na.rm=T`具有扩展时间序列的效果，但忽略了计算平均值的新值。稍微困难但其他方面等效的语法

```
> rollapply(c(NA, NA, x), width=3, FUN=function(v) mean(v, na.rm=T)) 
```

感谢 Matthew 指出这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-20T02:41:53.790

@thelatemail 做得很好，但是他在代码中有一个错误（`test[]`应该`x[]`在函数内部替换），更重要的是他必须对向量的末尾做同样的事情（如果你想要 side=2）。此外，窗口大小应该是向量中第 i 个元素的两倍+1（最后是第 n 个元素）。所以，这是最终版本：

```
movavg.grow = function(x,window) {
  startma = sapply(1:(floor(window/2)),function(y) mean(x[1:((y-1)*2+1)]))
  endma = sapply(1:(floor(window/2)),function(y) mean(x[(length(x)-((y-1)*2)):length(x)]))
  endma = rev(endma)
  c(startma,
    filter(x,rep(1/window,window))[(floor(window/2):(length(x)- floor(window)/2)+1)],
    endma)
} 
```

至于测试，你想要的必须`1:10`返回`x=1:10`

```
> x=1:10
> x
 [1]  1  2  3  4  5  6  7  8  9 10
> movavg.grow(x,5)
 [1]  1  2  3  4  5  6  7  8  9 10
> movavg.grow(x,3)
 [1]  1  2  3  4  5  6  7  8  9 10 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-12-22T15:31:18.573

您要求的功能称为“部分”窗口，AFAIK 已在 zoo 包中提供。

**data.table**中还有新的**快速滚动均值**函数将在**1.12.0**中发布。 不幸的是，它不支持部分窗口，但您可以通过以下方式使用该函数的“自适应”功能实现所需的行为：

 **```
x = c(3,9,2,8,4,6,5,8)
window = 3

library(data.table)
n = c(seq.int(window), rep(window, length(x)-window))
frollmean(x, n, adaptive=TRUE)
#[1] 3.000000 6.000000 4.666667 6.333333 4.666667 6.000000 5.000000 6.333333 
```

您可以在网上找到新功能的手动输入[`?froll`](https://rdatatable.gitlab.io/data.table/library/data.table/html/froll.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T22:05:53.313

使用移动平均线的大小在序列的开头和结尾添加零。这将防止 NA。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-17T22:58:01.247

基础 R 中的自定义函数可让您到达那里：

```
movavg.grow <- function(x,window,sides) {
 startma <- sapply(1:(window-1),function(y) mean(x[1:y]))
 c(startma,filter(x,rep(1/window,window),sides=sides)[window:length(x)])
} 
```

测试它：

```
> test <- c(3,9,2,8,4,6,5,8)
> movavg.grow(x=test,window=3,sides=1)
[1] 3.000000 6.000000 4.666667 6.333333 4.666667 6.000000 5.000000 6.333333 
```**

# ruby-on-rails-3 - angularjs 在索引视图上触发 $request.query() 之前同步 $request 以更新数据库

> ID：14926573
> 
> 赞同：0
> 
> 时间：2013-02-17T21:59:02.827
> 
> 标签：ruby-on-rails-3, coffeescript, angularjs

在执行更新之前，我的索引视图正在从数据库中提取所有模型是否有任何方法可以确保这些操作是同步的。模型已更新并在刷新后显示在索引页面中是代码

```
app = angular.module('enterprise',["ngResource"])
 .config(['$routeProvider','$locationProvider','$httpProvider', ($routeProvider,$locationProvider,provider )->         
 $locationProvider.html5Mode(true)
 provider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content')

 $routeProvider.when('/', {templateUrl: '<%=asset_path('list.html') %>', controller: AppCtrl})
 $routeProvider.when('/new', {templateUrl: '<%=asset_path('edit.html') %>', controller: NewCtrl})
 $routeProvider.when('/edit/:id', {templateUrl: '<%=asset_path('edit.html') %>', controller: EditCtrl})
 $routeProvider.otherwise({redirectTo: '/'})
]

app.factory "People", ["$resource",($resource)->
  $resource("/people/:id", {id:"@id"},{update: {method:"PUT"}}, {})
]

@AppCtrl=["$scope","People",($scope, People)->
$scope.crew = People.query()
]

@NewCtrl=["$scope","$location", "People",($scope, $location, People) ->
$scope.save = ->
  person = People.save($scope.person)
  $location.path("/")

]
 @EditCtrl=["$scope", "$location", "$routeParams","People",($scope, $location,  $routeParams, People)->
$scope.person = People.get({id:$routeParams.id})

$scope.save = ->
    person = People.get({id:$routeParams.id }
    , ->
       person.name =  $scope.person.name
       person.description = $scope.person.description
       person.$update()
    )
    $location.path("/") 
```

]

在返回索引视图之前确保模型更新的任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:28:40.187

放入资源`$location.path("/")`的`People`回调函数。[$resource](http://docs.angularjs.org/api/ngResource.%24resource)动作有成功/失败回调。

# php - [title](http://) 链接的正则表达式

> ID：14926574
> 
> 赞同：0
> 
> 时间：2013-02-17T21:59:04.020
> 
> 标签：php, regex, hyperlink

我正在尝试使用具有诸如 结构的 php 解析链接`[google](http://google.com)`，到目前为止我已经得到了这个：

```
"/\[(.+?)\]((.+?\))/is" 
```

我无法工作的唯一部分是带括号')'的部分。

任何帮助都会很棒！

[编辑]

@jari - 这是代码的一部分：

```
$find = array(
    "@\n@", 
    "/[**](.+?)[**]/is",
    "/\[(.+?)\]\((.+?)\)/is"
    );

$replace = array(
    "<br />",
    "<strong>$1</strong>",
    "<a href\"$1\" target=\"_blank\" rel=\"no follow\"></a>"
    );

$body = htmlspecialchars($body); 
$body = preg_replace($find, $replace, $body); 
return $body; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:01:57.043

括号是一个特殊字符，通常在表达式中标记**子模式**，因此您需要对它们进行转义（就像您对方括号所做的那样，顺便说一句）：

```
"/\[(.+?)\]\((.+?)\)/is" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:03:57.030

它应该看起来像：

```
\[([^\]]+)]\([^)]+\) 
```

我们使用`[^x]`which 表示，匹配任何不是`x`.
我们已经使用它在第一组中捕获`[`不是`]`. 第二组使用`[^)]+`. 任何不是`)`.

# cakephp - 在 CakePHP 中使用关联的条件过滤

> ID：14926575
> 
> 赞同：2
> 
> 时间：2013-02-17T21:59:09.007
> 
> 标签：cakephp, associations

在我的应用程序中，我有一个`Burger`模型、一个`Joint`模型和一个`Location`模型。

关节有很多汉堡，并且有很多位置。

我想做的是通过两种方式过滤汉堡：基于评级，还基于它们是否属于具有与条件匹配的位置的联合，在本例中为城市。

这是我尝试过的，但她没有工作：

```
$burgers = $this->Burger->find('all', array(
    'conditions' => array('Burger.official_rating !=' => 0),
    'contain' => array(
        'Joint',
            'Joint.Location.conditions' => array(
                'Location.city' => 'Toronto'
            )
    ),
    'order' => array('Burger.official_rating DESC'),
    'limit' => 10
)); 
```

`Joint.Location.conditions`似乎没有效果。

编辑：现在使用连接，但不确定这是否是最有效的方法（注意，我必须添加一个 Contain 子句，以确保在结果中返回相关数据）。

```
$options['joins'] = array(
    array('table' => 'joints',
        'alias' => 'Joint1',
        'type' => 'inner',
        'conditions' => array(
            'Joint1.id = Burger.joint_id'
        )
    ),
    array('table' => 'locations',
        'alias' => 'Location2',
        'type' => 'inner',
        'conditions' => array(
            'Location2.joint_id = Burger.joint_id'
        )
    )
);

$options['conditions'] = array(
    'Location2.city' => 'Toronto',
    'Burger.official_rating !=' => 0
);

$options['order'] = array(
    'Burger.official_rating DESC',
);

$options['limit'] = 10;

$options['contain'] = array(
    'Joint','Joint.Location'
);

$burgers = $this->Burger->find('all', $options); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:31:08.127

**问题：**

这是人们遇到的一个非常常见的问题，但是一旦您了解**您无法根据包含项目的条件限制主要查找模型，就可以轻松解决此问题。**

您不能这样做的原因是因为执行包含实际上会在表上创建单独的查询，而不是 JOIN，后者会创建单个查询。

**解决方案：**

在这种情况下，最好的选择是使用[CakePHP JOINs](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)。

在某些情况下（不是您的情况），使用 JOIN 的替代方法是更改​​您正在执行查询的模型。如果您只需要一个条件，那么您可以将查找更改为具有条件的模型，而不是包含中的一个，并以相反的顺序包含。

# visual-studio-2010 - 警告 MSB8012 - 链接器的 OutputFile 属性值 ()

> ID：14926576
> 
> 赞同：1
> 
> 时间：2013-02-17T21:59:17.647
> 
> 标签：visual-studio-2010, visual-c++, msbuild, msbuild-4.0, linker-warning

## 警告 MSB8012

我已经阅读了很多人询问这个错误的答案，但他们似乎都没有遇到像我这样的问题。我试图在我的项目中使用属性表来节省每次都必须设置属性设置，反过来我在构建时得到了这个：

```
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(989,5): warning MSB8012: TargetPath(C:\MyProj\Release\MyProj.dll) does not match the Linker's OutputFile property value (). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(990,5): warning MSB8012: TargetExt(.dll) does not match the Linker's OutputFile property value (). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile).
2>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppBuild.targets(991,5): warning MSB8012: TargetName(MyProj) does not match the Linker's OutputFile property value (). This may cause your project to build incorrectly. To correct this, please make sure that $(OutDir), $(TargetName) and $(TargetExt) property values match the value specified in %(Link.OutputFile). 
```

如果我所要做的只是更改链接器的 OutputFile 属性值，那会很容易，但是正如您所看到的，它`Linker's OutputFile property value ()`每次都说（OutputFile 值为 null？），这有点不同，`$(OutDir)$(TargetName)$(TargetExt)`我将其设置为...

我在属性表中配置的唯一内容是一些调试设置、一些优化设置、添加构建后事件和禁用 unicode。这就是我所需要的，但这个问题现在卡在项目中，即使我删除了属性表。我根本没有从以前版本的 Visual Studio 转换项目，就像许多收到此警告的人一样，只是尝试添加和配置属性表。

以下是一些相关设置：

常规->输出目录：`$(SolutionDir)$(Configuration)\`

常规->目标名称：`$(ProjectName)`

常规->目标扩展：`.dll`

链接器->输出文件：`$(OutDir)$(TargetName)$(TargetExt)`

起初我只是想忽略这个警告，但它实际上开始引起问题，所以如果有人能弄清楚这个 MS 谜题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:08:11.800

它似乎开始对所有项目产生影响，所以我重新安装了 Visual Studio，问题就消失了……我现在害怕再次尝试使用属性表，但总比没有好。我想这都是MS的错。

# css - 为什么在某些分辨率下，内容超出了包含 BootStrap 的“跨度”和重叠？ JSFiddle： http: //jsfiddle.net/ardave/8DR6n/3/ 全屏 JSFiddle：http: //jsfiddle.net/ardave/ 问问题 user74754 问问题 2013-02-17T21:59:17.580 43025 次 This question shows research effort; it is useful and clear 16 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. JSFiddle： http: //jsfiddle.net/ardave/8DR6n/3/ 全屏 JSFiddle：http: //jsfiddle.net/ardave/8DR6n/3/embedded/result/ 我在页面的右下角有这三个 div，每个都包含一个带有文本的 html 表格，并且在大多数桌面分辨率下都可以正常显示。 但是，当我水平缩小窗口或在某些移动设备上查看它时，表格的内容会相互重叠。 这个问题出现在窗口大小低于 979 像素宽时，这与 bootstrap-responsive.css 平板电脑大小的媒体查询一致，所以我确定这是相关的，但我不知道如何或为什么。 问题也与顶部导航栏消失的宽度相吻合，但我也不知道如何或为什么。 我发现的唯一其他可能有用的事情是，当窗口的大小调整为存在问题时，当我将鼠标悬停在 Chrome 的“元素”调试器窗口中的跨度或表格元素上时，我可以清楚地看到表格'列超出了表本身的大小，并且超出了包含表的 span4 div 的大小。 我真的不希望内容明显溢出，我认为这是当前的问题，但是我也不想隐藏或滚动溢出。我真的只是希望表格文本保持不重叠的大小，直到一旦屏幕变得太窄，表格/span4s 被迫通过堆叠在彼此之上做出响应。 任何帮助将不胜感激。 这似乎可能过度，但我想 SO 希望我包含代码本身，而不仅仅是指向 jsfiddle 的链接，所以这里是（假设引用了 bootstrap.css 和 bootstrap-responsive.css）

*   View All
*   [View All](/Search/Search)

# My Site Name

Introductory stuff

[About »](/Home/About)

## Newest Entries

| Column 1 | Column 2 | Column 3 |
| --- | --- | --- |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 1/28/2013 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 12/4/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 11/9/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 10/31/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 10/31/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 10/30/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 10/17/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 10/15/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 9/29/2012 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 9/21/2012 |

## Latest Stuff

| Column 1 | Column 2 | Column 3 | Column 4 |
| --- | --- | --- | --- |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 11/9/2012 | 10.0 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 11/7/2012 | 8.0 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 11/4/2012 | 10.0 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 10/11/2012 | 7.0 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 9/13/2012 | 9.0 |
| [Lots of stuff](/stuff/stuff) | [Lots of stuff](/stuff/stuff) | 9/6/2012 | 7.0 |

## Needing Inputs

| Column 1 | Column 2 | Column 3 |
| --- | --- | --- |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 1/28/2013 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 12/4/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 11/18/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 11/9/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 11/7/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 11/5/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 10/31/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 10/30/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 10/30/2012 | [Lots of stuff](/stuff/stuff) |
| Here's a thing | [Lots of stuff](/stuff/stuff) | 10/18/2012 | [Lots of stuff](/stuff/stuff) |

Here's a big blob of text!

* * *

© Some Company

[TheSiteName.com](/)您不能使用选择属性，而是可以创建自己的属性并在

Change Lang

*   ![](http://icons.iconarchive.com/icons/famfamfam/flag/16/ad-icon.png) English
*   ![](http://icons.iconarchive.com/icons/famfamfam/flag/16/il-icon.png) Hebrew

于 2013-05-05T22:44:35.790 回答 This answer is useful 3 分配表格的容器元素overflow: auto;和表格本身table-layout: fixed; .ie-table-fix { overflow: auto; } .ie-table-fix > table { table-layout: fixed; } 于 2014-10-09T16:44:38.367 回答 Related 2 matlab - 如何绘制球面函数？ 1 c# - Windows Phone 8 是否支持 GIF 图片？ 4 maven - Maven解压最新版本的tar.gz神器 1 sockets - 本地服务器上的连接被外部连接拒绝 0 php - 标题位置在 Laravel 中不起作用 1 list - 根据索引从列表中选择元素 1 android - 在 Fragment 中初始化 YouTube 播放器 0 python - 尝试解码 jsonp 响应 5 jquery - 如何在文本输入字段中禁用手动输入 - JQuery Datepicker 4 javascript - 为 Bootstrap 寻找多选、可滚动、列表组件 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14926577
> 
> 赞同：16
> 
> 时间：
> 
> 标签：css, twitter-bootstrap

JSFiddle： http: [//jsfiddle.net/ardave/8DR6n/3/](http://jsfiddle.net/ardave/8DR6n/3/) 全屏 JSFiddle：http: [//jsfiddle.net/ardave/8DR6n/3/embedded/result/](http://jsfiddle.net/ardave/8DR6n/3/embedded/result/)

我在页面的右下角有这三个 div，每个都包含一个带有文本的 html 表格，并且在大多数桌面分辨率下都可以正常显示。

但是，当我水平缩小窗口或在某些移动设备上查看它时，表格的内容会相互重叠。

这个问题出现在窗口大小低于 979 像素宽时，这与 bootstrap-responsive.css 平板电脑大小的媒体查询一致，所以我确定这是相关的，但我不知道如何或为什么。

问题也与顶部导航栏消失的宽度相吻合，但我也不知道如何或为什么。

我发现的唯一其他可能有用的事情是，当窗口的大小调整为存在问题时，当我将鼠标悬停在 Chrome 的“元素”调试器窗口中的跨度或表格元素上时，我可以清楚地看到表格'列超出了表本身的大小，并且超出了包含表的 span4 div 的大小。

我真的不希望内容明显溢出，我认为这是当前的问题，但是我也不想隐藏或滚动溢出。我真的只是希望表格文本保持不重叠的大小，直到一旦屏幕变得太窄，表格/span4s 被迫通过堆叠在彼此之上做出响应。

任何帮助将不胜感激。

这似乎可能过度，但我想 SO 希望我包含代码本身，而不仅仅是指向 jsfiddle 的链接，所以这里是（假设引用了 bootstrap.css 和 bootstrap-responsive.css）

```
<body>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span3">
            <div class="well sidebar-nav">
                <ul class="nav nav-list">
                    <li class="nav-header">View All</li>
                    <li><a href="/Search/Search">View All</a>

                    </li>
                </ul>
            </div>
        </div>
        <div class="span9">
            <div class="hero-unit">
                 <h1>My Site Name</h1>

                <p>Introductory stuff</p>
                <p> <a class="btn btn-primary btn-large" href="/Home/About">About &#187;</a>

                </p>
            </div>
            <div class="container">
                <div class="row-fluid">
                    <div class="span4">
                         <h2>Newest Entries</h2>

                        <table class="table .table-bordered">
                            <thead>
                                <tr>
                                    <th>Column 1</th>
                                    <th>Column 2</th>
                                    <th>Column 3</th>
                                </tr>
                            </thead>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>1/28/2013</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>12/4/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>11/9/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>10/31/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>10/31/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>10/30/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>10/17/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>10/15/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>9/29/2012</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>9/21/2012</td>
                            </tr>
                        </table>
                    </div>
                    <!--/span-->
                    <div class="span4">
                         <h2>Latest Stuff</h2>

                        <table class="table .table-bordered">
                            <thead>
                                <tr>
                                    <th>Column 1</th>
                                    <th>Column 2</th>
                                    <th>Column 3</th>
                                    <th>Column 4</th>
                                </tr>
                            </thead>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>11/9/2012</td>
                                <td>10.0</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>11/7/2012</td>
                                <td>8.0</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>11/4/2012</td>
                                <td>10.0</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>10/11/2012</td>
                                <td>7.0</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>9/13/2012</td>
                                <td>9.0</td>
                            </tr>
                            <tr>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td> <a href="/stuff/stuff">Lots of stuff</a>

                                </td>
                                <td>9/6/2012</td>
                                <td>7.0</td>
                            </tr>
                        </table>
                    </div>
                    <!--/span-->
                    <div class="span4">
                         <h2>Needing Inputs</h2>

                        <table class="table .table-bordered">
                            <thead>
                                <tr>
                                    <th>Column 1</th>
                                    <th>Column 2</th>
                                    <th>Column 3</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>1/28/2013</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>12/4/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>11/18/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>11/9/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>11/7/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>11/5/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>10/31/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>10/30/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>10/30/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                                <tr>
                                    <td>Here's a thing</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                    <td>10/18/2012</td>
                                    <td> <a href="/stuff/stuff">Lots of stuff</a>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!--/span-->
                </div>
            </div>
            <div>
                <p></p>
                <p>Here's a big blob of text!</p>
            </div>
        </div>
    </div>
    <hr>
    <footer>
        <p>&copy; Some Company</p>
    </footer>
</div>
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">
            <div class="nav-collapse collapse"> <a class="brand" href="/">TheSiteName.com</a>

                <form action="/Search/Search"
                class="navbar-search pull-left" method="get">
                    <input type="text" class="search-query" placeholder="Search by Name" name="SearchQuery"
                    />
                </form>
                <form ReturnUrl="" action="/Account/ExternalLogin" class="navbar-form pull-right"
                method="post">
                    <button type="submit" name="provider" value="facebook" class="logonpartialextlogin"
                    title="Log in using your Facebook account">
                        <img src="/Images/facebook.png" />
                    </button>
                    <button type="submit" name="provider" value="twitter" class="logonpartialextlogin"
                    title="Log in using your Twitter account">
                        <img src="/Images/twitter-bird-white-on-blue.png" />
                    </button>
                    <button type="submit" name="provider" value="google" class="logonpartialextlogin"
                    title="Log in using your Google account">
                        <img src="/Images/google-icon.png" />
                    </button>
                </form>
                <form action="/Account/Register" class="navbar-form pull-right" method="get">
                    <button type="submit" class="btn">Register</button>
                </form>
                <form action="/Account/LogOn" class="navbar-form pull-right" method="post">
                    <input class="span2" type="text" placeholder="Email" name="UserName" />
                    <input class="span2" type="password" placeholder="Password" name="Password"
                    />
                    <button type="submit" class="btn">Sign in</button>
                </form>
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-08-07T00:08:58.307

我知道这个帖子已有几个月的历史，但我也知道，当有人发布适用于他们类似情况的答案时，我真的很感激。这是我在引导程序 2 和 3 中的做法。

```
.cw-table-list{
    margin:0px !important;
    table-layout:fixed;  
  }
  .cw-table-list td{
    padding-bottom: 0px !important;  
    overflow:hidden;
  } 
```

希望这可以帮助。抽搐

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-17T22:54:23.863

我不能告诉你解决这个问题的“引导方式”，因为我不使用它。我可以告诉你*原因*：你的内容在那个断点处不允许它。

因为表格的行不会环绕（即每行的所有单元格必须出现在同一行），所以每个给定表格都可以调整到一个绝对最小宽度，这取决于填充和每个单元格的最宽的非包装内容。对于您的表格，它们可以走的最小尺寸是“Column”、“Column”和“10/11/2012”的宽度等于加上 48px（每边 8px 填充乘以 3）。

`span4`s 只允许为 724px（祖先元素上的定义）的 31.49% ，`.container`其宽度不足以包含尽可能小宽度的表格。

我的建议是不要尝试将所有 3 张桌子并排放置。您的显示器必须非常宽，才能使它看起来不拥挤并且没有水平滚动。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-05T22:44:35.790

您可以应用样式=“溢出：自动；” 在您的桌子上放置一个水平滚动条。因此，设计仍将保持响应。按照代码：

```
.table-scrollable{
    overflow: auto;
} 
```

并在您的父 div 上使用它：

```
<div class='table-scrollable'> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-10-09T16:44:38.367

分配表格的容器元素`overflow: auto;`和表格本身`table-layout: fixed;`

```
.ie-table-fix {
    overflow: auto;
}
.ie-table-fix > table {
    table-layout: fixed;
} 
```

# php - 当导航栏（未使用 ul 创建）位于单独的包含文件中时，如何使用 php 在页面上显示悬停/选定的类？

> ID：14926587
> 
> 赞同：0
> 
> 时间：2013-02-17T22:00:11.813
> 
> 标签：php, navigation, include

我设置了一个 php 模板，其中顶部和底部的公共信息位于单独的包含文件中。如何使悬停的类在当前页面时显示在每个页面上？（每个导航栏元素的效果都不同 - 它是单词左侧的一个小图标。）谢谢！

请参见下面的代码：

```
<nav>
         <div class="page">
          <a href="themes.php" class="themes">Themes</a>
            <a href="custom-gifts.php" class="custom-gifts">Custom Gifts</a>
            <a href="about-us.php" class="about-us">About Us</a>
            <a href="testimonials.php" class="testimonials">Testimonials</a>
            <a href="contact-us.php" class="contact-us">Contact Us</a>
         </div>
         </nav> 
```

CSS：

```
nav {top:0px; text-align:right; margin:0px auto;}
nav a {margin: 12px 10px 10px 20px;}
a.themes {
    padding: 0px 0px 0px 24px;
    background: url(../images/themes-sprint.png) no-repeat left 0px;
    height:23px;
}
a.themes:hover { background-position: left -23px; }

a.custom-gifts {
    padding: 0px 0px 0px 30px;
    background: url(../images/custom-gifts-sprint.png) no-repeat left 0px;
}
a.custom-gifts:hover { background-position: left -22px; }

a.about-us {
    padding: 0px 0px 0px 30px;
    background: url(../images/about-us-sprint.png) no-repeat left 0px;
}
a.about-us:hover { background-position: left -22px; }

a.testimonials {
    padding: 0px 0px 0px 30px;
    background: url(../images/testimonials-sprint.png) no-repeat left 0px;
}
a.testimonials:hover { background-position: left -22px; }

a.contact-us {
    padding: 0px 0px 0px 30px;
    background: url(../images/contact-us-sprint.png) no-repeat left 0px;
}
a.contact-us:hover { background-position: left -22px; } 
```

（导航栏设置为没有列表和单独的 sprint 图像的原因是因为我将网站设计为响应式的，并且在移动版本中，导航部分显示在另一个之上而不是彼此相邻。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:33:49.517

我希望我说对了。试试这个：

```
 <? $f=basename($_SERVER['PHP_SELF']); ?>

    <div class="page">
        <a href="themes.php" class="themes<?=($f=='themes.php'?' on':'')?>">Themes</a>
        <a href="custom-gifts.php" class="custom-gifts<?=($f=='themes.php'?' on':'')?>">Custom Gifts</a>
        <a href="about-us.php" class="about-us<?=($f=='about-us.php'?' on':'')?>">About Us</a>
        <a href="testimonials.php" class="testimonials<?=($f=='testimonials.php'?' on':'')?>">Testimonials</a>
        <a href="contact-us.php" class="contact-us<?=($f=='contact-us.php'?' on':'')?>">Contact Us</a>
    </div> 
```

第一行是将当前文件的名称加载到变量`$f`中。在以下几行中，我们检查文件名，以及它们是否在 -tag的-Attribute 中`$f`输出相等，例如.`on``class``<a>``class="contact-us on"`

现在添加一个 CSS`.on`就可以了。

# java - Java 进程在 OutOfMemoryException 之后没有死

> ID：14926594
> 
> 赞同：3
> 
> 时间：2013-02-17T22:00:40.600
> 
> 标签：java, garbage-collection, jvm, out-of-memory

我正在测试一个应用程序，我的应用程序抛出了 OutOfMemory 异常，但该进程仍然存在，正如我从 ProcessExplorer 中看到的那样。我以为它只是活着，在 OOM 之后没有做任何事情，但一段时间后我仍然看到一些应用活动。我有点惊讶。为什么会发生这种情况？

```
java.lang.OutOfMemoryError: Java heap space
Dumping heap to java_pid8920.hprof ...
Heap dump file created [2826469039 bytes in 59.888 secs]
Exception in thread "ActiveMQ Transport: tcp://localhost/127.0.0.1:61000@53335"
java.lang.OutOfMemoryError: Java heap space 
```

我使用的 JVM 选项是：

```
-XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:+PrintGCDetails -verbose:gc -Xloggc:C:/temp/GCVerbose.log 
```

它是 64 位 Java 1.7。

编辑：：：

我认为应用程序仍在做某事，因为在 OOM 异常之后我看到了更多与应用程序相关的日志消息。但几分钟后，我看到最终的异常堆栈如下所示，应用程序活动停止。但是这个过程仍然存在！

```
Exception in thread "pool-3-thread-1" java.lang.OutOfMemoryError: Java heap space
Exception in thread "ActiveMQ Session Task-13" java.lang.OutOfMemoryError: Java heap space
Feb 17, 2013 4:54:44 PM sun.rmi.transport.tcp.TCPTransport$AcceptLoop executeAcceptLoop
WARNING: RMI TCP Accept-0: accept loop for ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=53490] throws
java.lang.OutOfMemoryError: Java heap space
    at java.net.NetworkInterface.getAll(Native Method)
    at java.net.NetworkInterface.getNetworkInterfaces(NetworkInterface.java:326)
    at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:86)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:387)
    at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:359)
    at java.lang.Thread.run(Thread.java:722)

Feb 17, 2013 4:57:34 PM ServerCommunicatorAdmin reqIncoming
WARNING: The server has decided to close this client connection.
Exception in thread "ActiveMQ InactivityMonitor Worker" java.lang.OutOfMemoryError: Java heap space
Exception in thread "main" java.lang.OutOfMemoryError: Java heap space 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:16:23.427

尝试`kill -3 <process-pid>`打印 Java 线程转储并查看应用程序挂起的位置。

# drupal - Drupal 7 views_embed_view node.tpl.php 字段

> ID：14926595
> 
> 赞同：0
> 
> 时间：2013-02-17T22:00:49.000
> 
> 标签：drupal, drupal-7, drupal-views, drupal-fields, drupal-templates

使用 Drupal 7 和 Views 3，我正在尝试使用 hook_preprocess_node 中的上下文过滤器参数调用 views_embed_view 的结果，以嵌入到节点模板中。

该视图正在使用字段显示设置，包括“内容：标题”和一些自定义字段。当我使用视图 UI 中的上下文过滤器参数预览视图时，一切都按预期工作，但是当我嵌入视图时，没有加载来自 Fields API 的节点字段（仅加载标题和节点 ID 等内置属性）。

知道这里发生了什么吗？

*网站/所有/主题/XXX/template.php*

```
function XXX_preprocess_node(&$vars, $hook) {
  $node = $vars['node'];
  $vars['views__deals__single'] = views_embed_view('deals_single', 'page_1', $node->nid);
} 
```

*站点/所有/主题/XXX/模板/节点--deal.php*

```
// ...
echo 'THE VIEW SHOULD BE HERE:';
echo $views__deals__single;
// ... 
```

回显的结果是节点标题，以及其他视图字段的 HTML 包装器，包括标签，但它们的内容是空的，这与视图预览不同。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T05:35:01.143

你可以直接把它放在 node.tpl.php 模板中：

```
<?php print views_embed_view('deals_single', 'page_1', $node->nid); ?> 
```

# javascript - 获取线框坐标

> ID：14926597
> 
> 赞同：1
> 
> 时间：2013-02-17T22:00:52.273
> 
> 标签：javascript, math, line, coordinates

我一直在使用 JavaScript 编写线条绘图系统。我希望绘制的线条可以选择，所以我一直在尝试实现线条突出显示。如下图所示，我有一条已知坐标的线（黑色）和一个斜率截距方程（y=mx+b）。知道盒子的半径，如何计算角的（以绿色圈出）坐标？

![线框示例](../Images/8700b59ebd617ec34f8a9b8cad0942a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:14:27.043

就向量而言，这是最容易想到的。

首先将线末端的点定义为`A`，将另一端定义为`B`

```
var A = new Vector(1, 1)
var B = new Vector(5, 3) 
```

现在求直线的单位方向向量（从 A 指向 B 的长度为 1 的向量）及其垂线：

```
var dir = B.minus(A).normalize();
var dir_perp = new Vector(dir.y, -dir.x) 
```

并将它们扩展为长度`thickness`：

```
dir = dir.times(thickness);
dir_perp = dir_perp.times(thickness) 
```

那么四个角是：

```
[
    A.minus(dir).plus(dir_perp),
    A.minus(dir).minus(dir_perp),
    B.plus(dir).minus(dir_perp),
    B.plus(dir).plus(dir_perp)
] 
```

这显然假设您有某种矢量数学库。[这是我之前做的一个](https://github.com/eric-wieser/two.js/blob/master/vector.js)

# python - Python gmpy2 f_divmod 函数混淆

> ID：14926601
> 
> 赞同：0
> 
> 时间：2013-02-17T22:01:28.573
> 
> 标签：python, gmp

我对python很陌生，我刚开始玩gmpy2，但我对其中一个函数有点困惑，gmpy的文档在这方面没有帮助：

我想用模数（以及地板）进行除法，所以我找到了`f_divmod()`函数：

> f_divmod(...) f_divmod(x, y) 返回 x 除以 y 的商和余数。商向 -Inf 舍入（四舍五入），余数的符号与 y 相同。x 和 y 必须是整数。

但是，如果这做了我认为它应该做的事情（这可能是我的错误），它应该做：`x / y % m`，而且我看不出有办法提供一个`m`. 这是错误的功能，还是我需要以某种方式在其他地方定义模数？

我看到我的替代方案是：

```
c = gmpy2.f_div(a, b) % m 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T00:11:53.757

注意：我维护 gmpy2。

`gmpy2.f_divmod()`（与`gmpy2.c_divmod()`,`gmpy2.t_divmod()`和一起`gmpy2.divmod()`）在内置`divmod()`. 所有函数都返回商和余数，但每个函数使用稍微不同的规则来计算商和余数。这些名称意味着函数返回元组`(a // b, a % b)`。他们不做除法，然后是mod。

如果您想使用底除法计算商，然后将该结果以另一个数为模，那么您的选择是正确的。

稍微偏离主题的提示：您应该养成使用`//`整数除法的习惯。在 Python 3 中，`/`变为浮点除法。`//`在 Python 2 和 3 中都是整数除法。

# node.js - Rails 的资产管道和资产路径的明确等价物是什么

> ID：14926608
> 
> 赞同：3
> 
> 时间：2013-02-17T22:02:31.160
> 
> 标签：node.js, express, asset-pipeline, cdn

我正在寻找解决两个问题：

*   在生产环境中重写 URL 以使用 CDN URL 而不是原始域名
*   客户端JS和CSS的连接和缩小

实现后者似乎有一些选择，例如资产粉碎机。但是，我发现很难找到一个好的解决方案来重写图像和其他资产。有没有图书馆可以提供帮助？

谢谢！

# python - 使用 MySQLdb 使用 python 打开 MySQL 数据库得到 kwargs 错误

> ID：14926611
> 
> 赞同：0
> 
> 时间：2013-02-17T22:02:49.310
> 
> 标签：python, mysql

我正在尝试使用 mysqldb 使用 python 打开本地 mysql 数据库并收到此错误：

```
 File "c:\python27\lib\site-packages\MySQLdb\connections.py", line 56, in <module>
class Connection(_mysql.connection):
  File "c:\python27\lib\site-packages\MySQLdb\connections.py", line 154, in Connection
kwargs2 = kwargs.copy()
NameError: name 'kwargs' is not defined
2013-02-17 14:51:37 (Process exited with code 1) 
```

这是 mysqldb 调用的 connection.py 模块中的 Connection 类的代码。第 154 行的错误是此代码的最后一行。

```
class Connection(_mysql.connection):

"""MySQL Database Connection Object"""

default_cursor = cursors.Cursor

def __init__(self, *args, **kwargs):
    connection = MySQLdb.connect (host = "127.0.0.1", user = "root", passwd = "", db = "test")

"""

Create a connection to the database. It is strongly recommended
that you only use keyword parameters. Consult the MySQL C API
documentation for more information.

host
  string, host to connect

user
  string, user to connect as

passwd
  string, password to use

db
  string, database to use

port
  integer, TCP/IP port to connect to

unix_socket
  string, location of unix_socket to use

conv
  conversion dictionary, see MySQLdb.converters

connect_timeout
  number of seconds to wait before the connection attempt
  fails.

compress
  if set, compression is enabled

named_pipe
  if set, a named pipe is used to connect (Windows only)

init_command
  command which is run once the connection is created

read_default_file
  file from which default client values are read

read_default_group
  configuration group to use from the default file

cursorclass
  class object, used to create cursors (keyword only)

use_unicode
  If True, text-like columns are returned as unicode objects
  using the connection's character set.  Otherwise, text-like
  columns are returned as strings.  columns are returned as
  normal strings. Unicode objects will always be encoded to
  the connection's character set regardless of this setting.

charset
  If supplied, the connection character set will be changed
  to this character set (MySQL-4.1 and newer). This implies
  use_unicode=True.

sql_mode
  If supplied, the session SQL mode will be changed to this
  setting (MySQL-4.1 and newer). For more details and legal
  values, see the MySQL documentation.

client_flag
  integer, flags to use or 0
  (see MySQL docs or constants/CLIENTS.py)

ssl
  dictionary or mapping, contains SSL connection parameters;
  see the MySQL documentation for more details
  (mysql_ssl_set()).  If this is set, and the client does not
  support SSL, NotSupportedError will be raised.

local_infile
  integer, non-zero enables LOAD LOCAL INFILE; zero disables

There are a number of undocumented, non-standard methods. See the
documentation for the MySQL C API for some hints on what they do.

"""

from MySQLdb.constants import CLIENT, FIELD_TYPE
from MySQLdb.converters import conversions
from weakref import proxy, WeakValueDictionary

import types

kwargs2 = kwargs.copy() 
```

感谢您的帮助

这是我来自 helloworld.py 的代码，此代码可以在 google appengine 上运行，但不能在本地 mysql 上运行。我在 connection.py 中更改的唯一行是我添加了连接字符串：

```
 connection = MySQLdb.connect (host = "127.0.0.1", user = "root", passwd = "", db = "test") 
```

在第 8 行。

```
import cgi
import datetime
import urllib
import webapp2
from google.appengine.api import rdbms
from google.appengine.ext import db
from google.appengine.api import users
import jinja2
import os

_INSTANCE_NAME = 'ceemee111:ceemee111'

class MainPage(webapp2.RequestHandler):
def get(self):
    conn = rdbms.connect(instance=_INSTANCE_NAME, database='test')
    cursor = conn.cursor()
    cursor.execute('SELECT guest_name, content, ID FROM entries')
    self.response.out.write("""
      <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
      <html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
        <head>
           <title>My Guestbook!</title>
        </head>
        <body>
          <table style="border: 1px solid black">
            <tbody>
              <tr>
                <th width="35%" style="background-color: #CCFFCC; margin: 5px">Name</th>
                <th style="background-color: #CCFFCC; margin: 5px">Message</th>
                <th style="background-color: #CCFFCC; margin: 5px">ID</th>
              </tr>""")
    for row in cursor.fetchall():
      self.response.out.write('<tr><td>')
      self.response.out.write((row[0]))
      self.response.out.write('</td><td>')
      self.response.out.write((row[1]))
      self.response.out.write('</td><td>')
      self.response.out.write(row[2])
      self.response.out.write('</td></tr>')

    self.response.out.write("""
      </tbody>
        </table>
          <br /> No more messages! 
          <br /><strong>Sign the guestbook!</strong>
          <form action="/sign" method="post">
          <div>First Name: <input type="text" name="fname" style="border: 1px solid black"></div>
          <div>Message: <br /><textarea name="content" rows="3" cols="60"></textarea></div>
          <div><input type="submit" value="Sign Guestbook"></div>
        </form>
      </body>
    </html>""")
    conn.close()

class Guestbook(webapp2.RequestHandler):
def post(self):
    fname = self.request.get('fname')
    content = self.request.get('content')
    conn = rdbms.connect(instance=_INSTANCE_NAME, database='guestbook')
    cursor = conn.cursor()
    # Note that the only format string supported is %s
    cursor.execute('INSERT INTO entries (guest_name, content) VALUES (%s, %s)', (fname, content))
    conn.commit()
    conn.close()

    self.redirect("/")

app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True)

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T05:02:53.770

我唯一的解释是你不小心修改了`connections.py`文件的源代码。很可能您删除了 . 前面的前导空格`kwargs2 = kwargs.copy()`。重新安装`mysqldb`。

# visual-studio-2010 - 安装 Office 2013 后无法在计算机上安装 Outlook 加载项

> ID：14926614
> 
> 赞同：0
> 
> 时间：2013-02-17T22:03:01.750
> 
> 标签：visual-studio-2010, windows-installer, office-interop, outlook-addin, office-2013

我已经使用 Outlook Add in template 和 VSTO 在 Visual Studio 2010 中实现了 Outlook 添加，我使用 MSI 安装程序（在 Visual Studio 2010 中创建）为它创建了一个安装。我能够在所有机器上安装它（x86 和 x64 ）。

最近，我尝试在安装了 Office 2013 的机器上安装相同的安装程序并收到以下错误：

![在此处输入图像描述](../Images/3f0df07644ae2880f4617fa296c67685.png)

我应该强调的是，我没有更改系统配置中的任何内容，并且除了那里安装的内容之外，还安装了 Office 2013。

我在“Lv”模式下运行 MSI（详细记录），日志文件没有给我有用的信息。它包含的只是：

```
=== Logging stopped: 15/02/2013  14:22:04 ===
MSI (c) (20:24) [14:22:04:626]: Note: 1: 1708 
MSI (c) (20:24) [14:22:04:626]: Note: 1: 2262 2: Error 3: -2147287038 
MSI (c) (20:24) [14:22:04:626]: Note: 1: 2262 2: Error 3: -2147287038 
MSI (c) (20:24) [14:22:04:626]: Product:  Outlook AddIn -- Installation failed.

MSI (c) (20:24) [14:22:04:626]: Windows Installer installed the product. Product Name: Outlook AddIn. Product Version: 1.7.0\. Product Language: 1033\. Manufacturer: "Company". Installation success or error status: 1603.

MSI (c) (20:24) [14:22:04:626]: Grabbed execution mutex.
MSI (c) (20:24) [14:22:04:626]: Cleaning up uninstalled install packages, if any exist
MSI (c) (20:24) [14:22:04:641]: MainEngineThread is returning 1603
=== Verbose logging stopped: 15/02/2013  14:22:04 === 
```

提前感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T10:39:37.067

通常加载项安装程序还会[打包 PIA 先决条件](http://msdn.microsoft.com/en-us/library/15s06t57.aspx)，以便在缺少时进行安装。这就是为什么消息说直接运行“setup.exe”而不是 MSI。

先决条件安装在主软件包之前，即 MSI，这仅由“setup.exe”文件处理。

如果项目也为 Office 2013 配置，则 VS 应该在包中包含适当的先决条件，并且运行 setup.exe 应该安装它们。试试看，看看效果如何。

# ruby-on-rails-3 - Rails nil 错误 - 有什么方法可以阻止它们？

> ID：14926616
> 
> 赞同：2
> 
> 时间：2013-02-17T22:03:17.420
> 
> 标签：ruby-on-rails-3

在过去的 6 个月里，我一直在学习 Rails。我认为这很棒！

但是，我的应用程序遇到的 99% 的错误都是零错误。我要么尝试显示一个为零的字段，要么外键指向已删除的记录。

我在很多地方都有这种类型的代码：

```
 <% if location.parent != nil %>
          <td><%= location.parent.name %></td>
        <% else %>
          <td></td>
        <% end %>

      <% if location.client_id != nil %>
        <td><%= location.client.client_name %></td>
      <% else %>
        <td></td>
      <% end %> 
```

我真的希望Rails 在该字段为零时只显示一个空白！或者，设置一个错误的闪光灯并仍然显示页面。相反，页面炸弹。在 Heroku 上，您会收到“抱歉，出了点问题......”

有没有办法更好地处理空白字段？有没有更好的方法来编写上述代码？是否有一些我不知道的 Rails 设置？是否有宝石可以处理这些类型的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T03:43:16.963

你真的应该在你的关联上放置一些[外键约束](http://guides.rubyonrails.org/migrations.html#active-record-and-referential-integrity)和[after_destroy 方法](http://guides.rubyonrails.org/association_basics.html#association-callbacks)。这将阻止您的数据库进入不一致的状态。

但除了重构之外，您还应该检查 ActiveSupport 以及它对 ruby​​ 所做的各种添加。请参阅[http://guides.rubyonrails.org/active_support_core_extensions.html](http://guides.rubyonrails.org/active_support_core_extensions.html)。

我认为对您有帮助的任何对象都可以使用三种方法：

*   `blank?`- 如果对象为 nil、empty?、false 等条件，则返回 true。请参阅[文档](http://guides.rubyonrails.org/active_support_core_extensions.html#blank-and-present)以获得更好的解释。
*   `present?`- 如果对象不为零，不为空，则返回 true？或真的。请参阅[文档](http://guides.rubyonrails.org/active_support_core_extensions.html#blank-and-present)以获得更好的解释。
*   `try(:foo)`- 尝试调用`foo`对象上的方法，如果对象为 nil，则返回 nil。请参阅[文档](http://guides.rubyonrails.org/active_support_core_extensions.html#try)以获得更好的解释。

有了这个，您的示例代码可能是：

```
<td><%= location.parent.try(:name) %></td>
<td><%= location.parent.try(:client_name) %></td> 
```

我真的建议你看看为什么你期望一个对象不为零。迁移中的[外键约束和](http://guides.rubyonrails.org/migrations.html#active-record-and-referential-integrity)[关联的 after_destroy 挂钩](http://guides.rubyonrails.org/association_basics.html#association-callbacks)将对此有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T03:21:36.087

不是 Rails 修复，但您可以使用面向对象设计的 NullObject 模式来重构代码以不同方式处理“nil”。该模式基本上意味着您为一个对象创建一个 null/nil 类，该对象在它为 nil 时进行处理。它有一些缺点：需要维护一个额外的类，并且当您添加可能为 nil 的新方法时，您必须记住编辑 null 类。好处是它将条件句移出视图。

这是关于这个主题的一篇很好的博客文章： [http ://robots.thoughtbot.com/post/20907555103/rails-refactoring-example-introduce-null-object](http://robots.thoughtbot.com/post/20907555103/rails-refactoring-example-introduce-null-object)

另一个建议是将条件句从您的视图中移出并移到助手中。助手是包含视图逻辑的简单模块。我经历了视图中所有逻辑的视图，它使视图代码很快变得一团糟。

# android - ActiveAndroid：升级数据库版本

> ID：14926617
> 
> 赞同：0
> 
> 时间：2013-02-17T22:03:51.863
> 
> 标签：android, orm, activeandroid

我有以下场景：我的应用程序使用数据库版本 4 发布给客户。

我做了一些错误修正并添加了更多功能。这个过程也改变了我的模型，这就是数据库也改变的原因。

如何检查客户在其设备上安装的数据库版本并将旧数据迁移到新数据库？ActiveAndroid 库中是否有 onUpgrade 方法或类似的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T21:33:36.143

在深入研究了 ActiveAndroid 的源代码后，我找到了一个解决方案。ActiveAndroid 可以使用位于资产文件夹中的 sql 脚本从一个版本迁移到另一个版本。

它使用自然排序算法对位于 assets/migrations/ 中的所有 sql 文件进行排序：

如果找到的每个 SQL 脚本 > oldVersion 和 <= newVersion

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:55:39.637

如果您通过 SQLiteOpenHelper 访问您的数据库并进行适当的数据库版本控制，那么您可以使用它的 onUpgrade 方法运行一些代码来更新您的数据库。否则你应该做你的自定义解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T23:02:34.317

我建议你创建一个扩展类`SQLiteOpenHelper`。当你的数据库通过这个类打开时，它会`onUpgrade()`在需要的时候自动调用该方法。此方法的参数包括数据库模式的新旧版本号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T09:49:20.013

`AA_DB_VERSION`每当您的架构更改时，您都需要通过配置或元数据来增加数据库版本号。如果添加了新类，ActiveAndroid 会自动将它们添加到数据库中。但是，如果您想更改现有表中的某些内容（例如添加或删除列），则可以使用名为 的 sql-scripts 来完成`<NewVersion>.sql`，其中 NewVersion 是`AA_DB_VERSION`, in `assets/migrations`。

如果文件名大于旧数据库版本且小于或等于新版本，ActiveAndroid 将执行脚本。

假设您向 Items 表添加了列颜色。您现在需要增加到`AA_DB_VERSION`2 并提供一个脚本`2.sql`。

```
ALTER TABLE Items ADD COLUMN color INTEGER; 
```

# java - 如何检查有效的 Dropbox 用户会话？

> ID：14926620
> 
> 赞同：0
> 
> 时间：2013-02-17T22:04:10.463
> 
> 标签：java, android, if-statement, dropbox-api

我正在使用 Android Dropbox API。在我的应用程序的主要活动中，我正在对 Dropbox api 进行身份验证调用。问题是，每次我的应用程序启动时，用户都必须点击“允许”来授予应用程序访问其保管箱的权限。我的代码如下：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getWindow().requestFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    //clearKeys();
    //Log.e(TAG, "keys cleared");

    AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET);
    AndroidAuthSession session = new AndroidAuthSession(appKeys, ACCESS_TYPE);

    mDBApi = new DropboxAPI<AndroidAuthSession>(session);

    mDBApi.getSession().startAuthentication(Main.this);
    Log.e(TAG, "started authentication");

protected void onResume() {
    super.onResume();

    if (mDBApi.getSession().authenticationSuccessful()) {
        try {
            // MANDATORY call to complete auth.
            // Sets the access token on the session
            mDBApi.getSession().finishAuthentication();

            if(mDBApi.getSession().authenticationSuccessful()){
            Log.e(TAG, "Authentication finished");
            }
            AccessTokenPair tokens = mDBApi.getSession().getAccessTokenPair();

            // Provide your own storeKeys to persist the access token pair
            // A typical way to store tokens is using SharedPreferences
            storeKeys(tokens.key, tokens.secret);
        } catch (IllegalStateException e) {
            Log.i("DbAuthLog", "Error authenticating", e);
        }
    }

}//end of onResume() 
```

我需要找到一种方法来知道该应用程序是经过身份验证的，这样我就可以绕过身份验证。我现在不知道该怎么做。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T16:15:43.463

在进行身份验证之前，请检查存储的访问令牌是否仍然有效（当然，如果你有的话）。为此，只需向通过 OAuth 公开的任何方法发出授权请求。最好调用一个产生简短输出的方法。如果此调用因令牌无效/过期而失败，请继续进行身份验证。此时更新存储的令牌，其余的应该像以前一样工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:20:27.120

你用过SDK吗？

同步 API SDK：[https ://www.dropbox.com/developers/sync/tutorial/android](https://www.dropbox.com/developers/sync/tutorial/android)

在*向 Dropbox 进行身份验证时：*

> 完成后，您应该会在 LogCat 中看到一条信息级别的消息，上面写着“Dropbox 用户已链接”。用户只需执行一次，之后 SDK 会将用户令牌存储在缓存中。当您的应用重新启动时，您可以通过调用 hasLinkedAccount 来检查它是否已经链接。

**更新：**

核心 API SDK：[https ://www.dropbox.com/developers/core/setup#android](https://www.dropbox.com/developers/core/setup#android)

连接此处找到的 Java 文档：[https ://www.dropbox.com/static/developers/dropbox-android-sdk-1.5.3-docs/index.html](https://www.dropbox.com/static/developers/dropbox-android-sdk-1.5.3-docs/index.html)

在*用户授权后返回您的应用程序*：

> finishAuthentication() 方法将用户的访问令牌绑定到会话。您现在可以通过 mDBApi.getSession().getAccessTokenPair() 检索它们。
> 
> 在您的应用关闭后，您将再次需要这些令牌，因此保存它们以备将来访问非常重要。如果您不这样做，则用户每次从您的应用访问其 Dropbox 时都必须重新进行身份验证。
> 
> 实现存储密钥的常用方法是通过 Android 的 SharedPreferences API。要了解如何操作，请查看 Android 文档。同时，为简单起见，上面的代码假装 storeKeys 函数调用您想使用的任何方法，将您的密钥存储在更永久的位置。

**编辑：**

storeKeys的实现：

```
public static boolean storeKeys(String key, String secret) {
   SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this); // this refers to context
   SharedPreferences.Editor editor = settings.edit();
   editor.putString("key", key);
   editor.putString("secret", secret);
   return editor.commit();
} 
```

# android - Android自定义吐司：TextColor设置为黑色但有红色阴影

> ID：14926625
> 
> 赞同：1
> 
> 时间：2013-02-17T22:04:31.130
> 
> 标签：android, toast

我对自定义吐司有一点问题：吐司本身和三个文本视图的定位按预期工作。我将一个文本视图设置为黑色，将另一个设置为绿色。绿色的是绿色，带有黑色文本颜色（深灰色背景）的那个是黑色和红色的混合物。事实上，内部文本是黑色的，带有红色的阴影。对这种行为有什么解释吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/mytoast_layout"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:weightSum="100"

android:orientation="vertical"
android:background="@drawable/toast_frame">

<LinearLayout 
 android:orientation="horizontal"     
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content"  

 android:weightSum="100" 
 android:layout_weight="90" 

 android:background="#444444" >

 <TextView
    android:id="@+id/leftview" 
    android:layout_height="wrap_content" 
    android:layout_width="0dp" 
    android:layout_weight="50"

    android:paddingLeft="0dp"
    android:paddingRight="0dp"

    android:gravity="center"

    android:textColor = "#000000"
    android:textAppearance="@style/myToast_small"
    android:shadowColor="#BB0000"
    android:shadowRadius="2.75" />

 <TextView 
    android:id="@+id/rightview"
    android:layout_height="wrap_content"
    android:layout_width="0dp"        
    android:layout_weight="50"

    android:paddingLeft="0dp"
    android:paddingRight="0dp"

    android:gravity="center"

    android:textColor = "#00FF00"
    android:textAppearance="@style/myToast_small"
    android:shadowColor="#BB0000"
    android:shadowRadius="2.75" />      
</LinearLayout>
<LinearLayout
    android:orientation="horizontal"    
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"  >

 <TextView
    android:id="@+id/mainview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"      

    android:gravity="center_horizontal"

    android:textAppearance="@style/myToast_small"

    android:textColor="#FFFFFF"
    android:shadowColor="#BB0000"
    android:shadowRadius="2.75" />
 </LinearLayout> 
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:09:31.443

可能与每个`TextView`s 上的此代码有关：

```
android:shadowColor="#BB0000"
android:shadowRadius="2.75" 
```

如果您不想要红色阴影，您可能想要删除它。

# twitter-bootstrap - 引导登录 /img/glyphicons

> ID：14926628
> 
> 赞同：1
> 
> 时间：2013-02-17T22:04:44.577
> 
> 标签：twitter-bootstrap

我在 boostrap 响应方面遇到了麻烦。

当我在笔记本电脑上登录我的应用程序时，我可以毫无问题地进入主页`localhost:8080/abc/`，但是当我从任何移动设备登录同一个应用程序时，它会转到`ip:8080/abc/img/glyphicons-halflings.png`. 并且只在页面上显示所有引导程序图标。

如果我之后手动输入正确的 url，则该应用程序可以正常工作，如果我注销并重新登录，它可以正常工作。总是在您第一次尝试登录时发生。下面是我在我的 jsp 中使用的代码。我已经`img/glyphicons-halflings.png`在我的项目中搜索了“”，它出现的唯一位置是在引导代码中，所以我不明白为什么它会重定向到这个页面。

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ABC</title>
<meta name="description" content="">
<meta name="author" content="">

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="<c:url value="/css/bootstrap.css" />" rel="stylesheet" type="text/css" />
<link href="<c:url value="/css/bootstrap-responsive.css" />" rel="stylesheet" type="text/css">
<style type="text/css"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-24T13:16:35.487

问题是“glyphicons”不只是 CSS，它们需要其他资源而不是 js 和 css，这是这个资源的“字体”，在引导框架中包含“js”和“css”文件夹，现在让所有这项工作只需将“fonts”文件夹复制到 Java EE 项目中“css”和“js”的同一级别。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:09:59.530

以防万一有人遇到类似问题，问题实际上出在我的 spring-security.xml 上。permitAll() 查看图像文件夹时出现拼写错误。所以我对它的理解是，当引导程序尝试访问移动站点的图像文件夹（不在桌面版本上使用）时，spring security 拦截了它并重定向到登录页面，这是正常行为。然后，当我登录时，spring 重定向回引导程序在登录之前发出的请求，这就是显示所有字形图标的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T04:20:49.477

问题不在于引导程序，您只需要设置绝对网址。

创建一个助手类，其中包含调用`baseUrl`（或其他）的静态方法，该方法返回您网站的基本 url。

# java - 在afreechart android中设置yAxes的最小值

> ID：14926631
> 
> 赞同：0
> 
> 时间：2013-02-17T22:05:11.680
> 
> 标签：java, android, jfreechart

我正在使用 afreechart 来绘制时间序列，如本[示例代码](http://code.google.com/p/afreechart/source/browse/trunk/afreechart_sample/src/org/afree/chart/demo/view/TimeSeriesChartDemo01View.java)中所示。 但是，如果垂直平移图表，您将到达负 y 轴的区域。我想避免这种情况，并希望为 y 和 x 轴设置最小值和最大值。我尝试做类似下面的事情： -

```
ValueAxis yaxes=plot.getRangeAaxis();
yaxes.setRange(0,100); 
```

但这似乎不起作用，我仍然能够将图表平移到非负 y 值区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:16:09.023

好的，我自己解决了。我从示例中的类 DemoView 扩展。我只是更改了一些值如下：-

```
 this.domainMovable=true;
 this.rangeMovable=false; 
```

这可能是一种肮脏的方式，但我的工作

# android - 覆盖默认的点击噪音？

> ID：14926633
> 
> 赞同：0
> 
> 时间：2013-02-17T22:05:23.463
> 
> 标签：android, android-widget, audio, soundpool

默认情况下，在我的手机上，点击应用程序、小部件、主页按钮等会产生点击噪音。如何覆盖小部件中的点击噪音？我有一个小部件会在点击时播放噪音，但现在它会同时播放我的噪音和点击噪音。在小部件中，我使用 soundpool 来播放噪音。这是我用来访问噪音的唯一代码。

```
 public class MakeState { ...
    SoundPool snd =new SoundPool(4, AudioManager.STREAM_MUSIC, 0);
    int soundID;

    ...
    public  void OnClick() {
    soundID = snd.load(getcontext(), R.raw.noise, 1);
    snd.setOnLoadCompleteListener(new OnLoadCompleteListener() {
  @Override
    public void onLoadComplete(SoundPool sound pool, int sampleid, int status) {
    soundPool.play(soundID, .6f, .6f, 1, 0, 1f);
}
});
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:18:46.633

尝试使用禁用标准 onClick 噪音`setSoundEffectsEnabled(false);`

# c - 在C中静态分配二维数组，为什么它不起作用？

> ID：14926635
> 
> 赞同：-2
> 
> 时间：2013-02-17T22:05:33.187
> 
> 标签：c

我需要帮助弄清楚为什么这在 C 语言中不起作用。我的意图是像这样静态分配两个二维数组：

```
unsigned char raw_image2D[RAW_HEIGHT][RAW_WIDTH];
unsigned char raw_image2D_mirror[RAW_HEIGHT][RAW_WIDTH]; 
```

其中 RAW_WIDTH 和 RAW_HEIGHT 定义如下；

```
#define RAW_WIDTH 1600*3
#define RAW_HEIGHT 1200 
```

为什么这不起作用，它可以编译但在运行时它会中断说它是堆栈溢出？谢谢

PS为什么这个问题如此糟糕以至于你给出了一个缺点？

**注意：通过在数组声明前添加静态来解决。** 我会给建议这个解决方案的那个答案加分，尽管其他人是可能的，但我需要 [][] 注释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:07:11.313

你有一个堆栈溢出。例如，在某些系统上，每个进程的堆栈大小设置为 4 Mo。`4800 * 1200`在这种情况下（> 4 Mo）会太大。

使用具有静态存储持续时间或更好的数组，`malloc`用于分配您的数组。

# c# - C# 有什么简单的 SQL ORM 吗？

> ID：14926636
> 
> 赞同：0
> 
> 时间：2013-02-17T22:05:33.990
> 
> 标签：c#, sql, orm

我不是在寻找任何可以做任何花哨的查询的东西，使用最先进的 C# 有趣的业务来生成精巧的查询，自动将类映射到数据库表，或者任何可以处理必须的元数据负载的东西由开发人员配置。事实上，我希望 ORM 不知道我正在使用 C# 的事实。

相反，我希望能够执行简单的命令来执行基本的 SQL 任务，例如：

1.  处理与 SQL Server 的连接并执行动态 TSQL 语句的类。
2.  代表数据库的类，具有创建数据库、删除数据库、查找、添加或删除表等功能。
3.  一个类来表示数据库中的表，添加列，删除列等。

但是，这些中的每一个都最好像提供字符串一样简单：

```
connection = new ConnectionToSQLServer(connectionString);
database = connection.FindDatabase("MyDatabase");
foreach(Table table in database.Tables())
{
     table.AddColumn("MyColumn", typeof(String), COLUMNS::NOT_NULL)
     ...
} 
```

在处理 SQL 和 C# 时，有没有类似的东西？我并不十分担心拥有一台性能最好的设备。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T22:09:22.457

您所描述的不是ORM。ORM 是一个*对象关系映射器*。也就是说，它*专门设计*用于将数据库表和查询​​映射到它所设计的任何语言的对象。此外，您提到的其他内容（DDL 内容）通常不是 ORM 的一部分（这不是硬性规则，因为在某种程度上，实体框架之类的东西可以处理数据库模式升级）。

如果您的目标是 SQL Server，则可以查看[SQL Server Management Objects](http://msdn.microsoft.com/en-us/library/ms162169.aspx)以使用托管 API 与 T-SQL 语句来处理数据库和服务器维护任务，但这显然特定于 SQL Server 和 .NET 语言。

关于您列表中的第 1 项，您正在寻找尚未随`DbConnection/DbCommand/DbDataReader/etc.`课程提供的内容是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:41:05.873

我做过类似的事情。我有一个执行所有简单 SQL 函数（插入、更新、选择……）的 DLL。编写一个表示 SQL 函数的方法并不难。我的建议是对列值使用 string[]，对列标题使用匹配的 string[]。那可以处理该`addColumn`级别的功能和其他功能。至于`ConnectiontoSQLServer`，似乎几乎可以处理`SqlConnection`？`SqlCommand`您可以将连接字符串传递到您的`addColumn`方法中，并且只有两个 using 语句：

```
using (SqlConnection connect = new SqlConnection(connection))
{                                                                                                                         
   using (SqlCommand command = new SqlCommand(insert, connect))
   { 
```

至于`FindDatabase`，同样的事情？C# 已经有了`SqlConnection`和`SqlCommand`. 无论如何，您所需要的只是字符串，这再简单不过了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-12T20:45:15.497

一定要看看 SQL Data ( [http://sqldata.codeplex.com](http://sqldata.codeplex.com) )。我认为您会发现它可以处理您的所有需求，而不会出现典型 ORM 的臃肿。确实，处理 DDL 操作并不是真正的标准做法，但它肯定可以在数据库上执行任何命令。

（披露：我是 SQL Data 的作者）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-19T05:50:53.453

您可以先使用 ASP.net MVC 和实体框架代码，它会在您编码时生成数据库和表，并且可以为您处理 CRUD 编码，因为您可以专注于整个应用程序。

[在此处](https://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)查看有关 ASP.net MVC EF的更多信息。以及更多关于代码中 CRUD 的[信息](http://www.asp.net/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)。

# javascript - 获取意外令牌：n 在 JavaScript 中解析 JSON 时

> ID：14926640
> 
> 赞同：9
> 
> 时间：2013-02-17T22:05:54.597
> 
> 标签：javascript, json

抓取这个 div 的 innerHTMl

```
<div style="display:none;" id="graphdata">{n:2 , e:1},{from:1 , to:2},{from:2, to:3},{from:3, to:4}</div> 
```

然后用这个JS代码解析它

```
jdiv=document.getElementById('graphdata').innerHTML;
edges=JSON.parse(jdiv); 
```

Chrome 中的 JS 控制台显示：未捕获的 SyntaxError：`Unexpected token n`

找不到令牌 n 可以在哪里以及我的代码有什么问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T22:13:11.697

您需要引用您的标签并添加括号...

```
[
    {
        "n": 2,
        "e": 1
    },
    {
        "from": 1,
        "to": 2
    },
    {
        "from": 2,
        "to": 3
    },
    {
        "from": 3,
        "to": 4
    }
] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T09:28:54.403

您能否尝试获取该值，将其拆分为“，”以创建一个数组并使用 JSON.stringify 生成正确的 JSON。从那里您可以使用 JSON.parse 并拥有一个对象

# javascript - 如何在javascript中杀死一个进程？

> ID：14926641
> 
> 赞同：2
> 
> 时间：2013-02-17T22:05:57.540
> 
> 标签：javascript

举个**例子**（我根本不是问如何取消/杀死一个 setTimeout，我只是用它来表示不同任务的不同处理时间）：

```
<div id="content">
</div>

<p>Which color do you prefer ?</p>    
<button id="long" onClick="long_process();">Blue</button>
<button id="short" onClick="short_process();">Red</button>

<script>
  function long_process() {
    setTimeout(function() {
      $('div#content').text('My favorite color is blue');
    }, 10000);
  }

  function short_proccess() {
    setTimeout(function() {
      $('div#content').text('My favorite color is red');
    }, 1000);
  }

  $('button#long').click();
  $('button#short').click();
</script> 
```

关于这个例子，你可能已经知道我要问的是，如果用户启动了一个应该接管它的短处理动作，我们如何才能停止长*处理**动作**？*

 *在这个例子中，如果用户最喜欢的颜色是红色，但是用户点击了错误的（蓝色）按钮，然后点击了红色按钮，蓝色将是最后显示的颜色，因为它的过程较长。

我知道如何使用 pthread 库使用 C/C++ 来管理它，但我不知道使用 javascript，在某些情况下，100% 确定您的应用程序将显示什么非常重要。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:09:21.753

创建计时器时，`setTimeout`并`setInterval`返回可用于引用该计时器的 ID：

```
var long_timer;

function long_process() {
    long_timer = setTimeout(...);
} 
```

当您想停止该计时器时，将该 ID 传递给[`clearTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.clearTimeout)or [`clearInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.clearInterval)：

```
if (long_timer) {
    clearTimeout(long_timer);
} 
```*

# spring - 缺少弹簧事务拦截器类

> ID：14926643
> 
> 赞同：1
> 
> 时间：2013-02-17T22:06:08.450
> 
> 标签：spring, hibernate, transactions

我在春季使用事务时遇到问题。

下面的异常表示没有`org/springframework/transaction/interceptor/TransactionInterceptor`类。该项目是在 NetBeans 中开发的，当我列出包含的库时，我可以看到`package org.springframework.transaction.interceptor`里面`spring-tx-3.2.1.RELEASE.jar`的 . `TransactionInterceptor$1.class`在那里，那么为什么tomcat在找到这个类时有任何问题？

```
org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from relative location [hibernate.xml]
Offending resource: ServletContext resource [/WEB-INF/lyricsBaseApp-servlet.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from ServletContext resource [/WEB-INF/hibernate.xml]; nested exception is java.lang.NoClassDefFoundError: org/springframework/transaction/interceptor/TransactionInterceptor
    org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:271)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:196)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:181)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:125)
    org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:94)
    org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:130)
    org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:537)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:451)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:652)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:600)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:666)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:519)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:460)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:136)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:679) 
```

如果它很重要，这是我的休眠 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/tx
        http://www.springframework.org/schema/tx/spring-tx.xsd">

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop> 
            </props>
        </property>
        <property name="mappingResources">
            <list>
                <value>com/blogspot/symfonyworld/lyricsbase/model/Song.hbm.xml</value>
            </list>
        </property> 
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <tx:annotation-driven transaction-manager="transactionManager"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:28:08.757

这很奇怪，但我设法在[spring 论坛](http://forum.springsource.org/showthread.php?97146-Error-NoClassDefFoundError-and-TransactionIn&p=342484#post342484)上找到了解决方案。我的项目使用[Tiles](http://tiles.apache.org/)作为 UI 部分，这可能会产生上述错误。我需要包含 Tiles-3.0.1 dist 提供的可选 jar 文件。包含 aopalliance-1.0.jar 后，问题就消失了。

# c# - C 和 C++ 以外的语言中未定义行为的示例

> ID：14926648
> 
> 赞同：0
> 
> 时间：2013-02-17T22:06:32.387
> 
> 标签：c#, java, php, language-agnostic, undefined-behavior

我听说过大量来自 C 和 C++ 而不是来自其他语言的未定义行为示例，这让我感到有点奇怪，我也知道 C 和 C++ 用于许多可靠性至关重要的情况。在 SO 上搜索“未定义行为”几乎只产生 C 和 C++ 结果。

在我正在教的一门课程中，我还想举一些其他主要语言的奇怪陷阱或未定义行为的例子。有人可以举几个类似于 int i 的具体例子吗？if(--i == i++){...} 会导致其他语言中未定义的行为？

例如，我理解 if(--i == i++){...} 在 c++ 中未定义，但在 c# 中定义，因为此处描述的额外序列点[是 (--i == i++) 是未定义的行为吗？](https://stackoverflow.com/questions/5294885/is-i-i-an-undefined-behavior). 我想要其他语言中未定义行为的示例，这些示例不是非强制错误，例如忘记初始化变量或未锁定共享数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:15:06.383

C 和 C++ 语言期望程序员做艰苦的工作——这意味着没有边界检查等。这样做的好处是速度——如果你知道你不会写超出数组的末端（你的算法禁止它），不需要在每次迭代中检查。许多高级语言都内置了许多保护措施——它们会在首次声明时自动分配变量，如果您在当前范围之外分配，则扩展数组，为您跟踪字符串的长度，...

这也可能导致问题 - 如果您不必声明变量，那么输入错误的变量可能会导致难以发现的错误。这就是为什么例如 Visual Basic 具有`Option Explicit`覆盖默认行为并强制用户声明每个变量的语句 - 在此过程中捕获许多错误。同样的事情（不声明变量）可能导致意外的范围问题 - 与“未定义”行为不同，而是“意外”。

在具有“不错、简单”的数组操作的语言中——例如 Python 或 Perl——当你遍历一个你正在更改其内容的数组时，你可能会遇到一个有趣的（而且，我认为是未定义的）行为：

```
for tup in somelist:
    if determine(tup):
         code_to_remove_tup 
```

（在此示例中，循环遍历列表并删除满足特定条件的元组 - 从[在迭代时从列表中删除项目](https://stackoverflow.com/questions/1207406/remove-items-from-a-list-while-iterating-in-python)）

当一个数组在`foreach`循环过程中增长或缩小时，所有的赌注都被取消了（一些解释器会抛出异常）。再一次 - 做错事很“容易”，并得到意想不到的结果......

# microdata - schema.org：同一天有多个营业时间

> ID：14926650
> 
> 赞同：6
> 
> 时间：2013-02-17T22:06:47.950
> 
> 标签：microdata, schema.org

我正在为一家小商店建立一个网站，并希望实现 schema.org-microdata-markup。“问题”：商店从周二到周五营业——这几天从 10:00 到 14:00**和**16:30 到 23:00。所以我就这样实现了营业时间……</p>

```
<time itemprop="openingHours" datetime="Tu-Fr 10:00-14:00, 16:00-23:00">XYZ</time> 
```

但是这样一来，HTML 验证器会说……</p>

> 元素时间上属性 datetime 的错误值 Tu-Fr 10:00-14:00、16:00-23:00：文字不满足时间-日期时间格式。

我怎样才能实现这些每天的多个营业时间？还是用 -tag 不可能做到这一点，`<time>`我必须将其更改为`<meta>`-tags？谢谢你的帮助！:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-21T16:30:07.123

如果您使用 2 个条目作为开放时间怎么办？

```
<time itemprop="openingHours" datetime="Tu-Fr 10:00-14:00">XYZ</time>
<time itemprop="openingHours" datetime="Tu-Fr 16:00-23:00">XYZ</time> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T20:32:28.573

[LocalBusiness](http://schema.org/LocalBusiness)示例已更新为使用元素`<meta>`：

```
<div itemscope itemtype="http://schema.org/Restaurant">
  <span itemprop="name">GreatFood</span>
  ...
  Hours:
  <meta itemprop="openingHours" content="Mo-Sa 11:00-14:30">Mon-Sat 11am - 2:30pm
  <meta itemprop="openingHours" content="Mo-Th 17:00-21:30">Mon-Thu 5pm - 9:30pm
  <meta itemprop="openingHours" content="Fr-Sa 17:00-22:00">Fri-Sat 5pm - 10:00pm
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-11T09:47:49.603

我最近遇到了同样的问题，发现第二个小时字符串需要在另一行，如下所示：

```
<p><time itemprop="openingHours" datetime="Mo,Tu,We,Th, 08:30-13:30">M-Th 8:30am-12:30pm & 1:30pm-6:00pm</time>
<time itemprop="openingHours" datetime="Mo,Tu,We,Th, 14:30-18:00"></time></p> 
```

将此代码保留在结束标记内也很重要，否则它不会注册为格式正确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T21:33:40.403

问题是 schema.org 用于 openingHours 的符号在[HTML5 规范中对于 time 元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-time-element)（尚未）有效。

[您可以在验证器](http://validator.nu)中复制[LocalBusiness](http://schema.org/LocalBusiness)中的所有示例，它们都将无法通过验证。

除非规范包含在时间元素中编写 openingHours 的定义，否则您将不得不忽略 HTML 验证器。

顺便提一句。schema.org 网站上的文字暗示您*可以*在一个值中定义多次：

> 营业时间。营业时间可以指定为每周的时间范围，从天开始，然后**是每天的次数**。

# html - 创建一个像 facebook 一样的 div 聊天

> ID：14926653
> 
> 赞同：0
> 
> 时间：2013-02-17T22:07:12.397
> 
> 标签：html, css

在简短的例子中，我正在尝试做一个 div 聊天示例来模拟 Facebook 聊天。

我将它固定在右侧，z-index 300 始终显示。

我的问题是关于高度的，因为有些页面我有滚动和大高度视图，而我的聊天 div 固定在相同的原始页面高度上，如果我向上滚动或向下滚动，我会限制我的 div 的高度。

我想知道它是否足够固定，即使我向上或向下滚动页面，也能以相同的原始方式在页面上保持可见。

我的示例 CSS 是：

```
#chat {
  position: absolute;
  top: 0;
  right: 0;
  float: right;
  height: 100%;
  min-height: 100%;
  width: 200px;
  background-color: #6e9bfe;
  z-index: 300;
} 
```

任何提示都会非常有帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:14:23.097

如果我的想法是正确的，您希望此 div 保持在您向上和向下滚动要使用的页面`position:fixed;`而不是`position:absolute;`在 CSS 中的相同位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T06:45:11.270

使用`position:fixed;`代替`position:absolute;`

# javascript - jqPlot 在按钮单击时显示图像

> ID：14926656
> 
> 赞同：0
> 
> 时间：2013-02-17T22:07:49.620
> 
> 标签：javascript, image, button, charts, jqplot

我正在使用 jqPlot 来显示一些图表，还带有一个按钮，可以将图表保存到图像中。

我可以请一些帮助来修改代码，以便在单击图表时显示图像而不是按钮。

这是我的代码：

```
<script class="code" type="text/javascript">
$(document).ready(function(){
var cosPoints = []; 
for (var i=0; i<2*Math.PI; i+=0.1){ 
 cosPoints.push([i, Math.cos(i)]); 
} 
var plot1 = $.jqplot('chart1', [cosPoints], {  
  series:[{showMarker:false}],
  axes:{
    xaxis:{
      label:'Angle (radians)'
    },
    yaxis:{
      label:'Cosine'
    }
  }
});

if (!$.jqplot.use_excanvas) {
var outerDiv = $(document.createElement('div'));
var header = $(document.createElement('div'));
var div = $(document.createElement('div'));

outerDiv.append(header);
outerDiv.append(div);

outerDiv.addClass('jqplot-image-container');
header.addClass('jqplot-image-container-header');
div.addClass('jqplot-image-container-content');

header.html('Right Click to Save Image As...');

var close = $(document.createElement('a'));
close.addClass('jqplot-image-container-close');
close.html('Close');
close.attr('href', '#');
close.click(function() {
    $(this).parents('div.jqplot-image-container').hide(500);
})
header.append(close);

$('#chart1').after(outerDiv);
outerDiv.hide();

outerDiv = header = div = close = null;

var btn = $(document.createElement('button'));
btn.text('View Plot Image');
btn.addClass('jqplot-image-button');
btn.bind('click', {chart: $('#chart1')}, function(evt) {
    var imgelem = evt.data.chart.jqplotToImageElem();
    var div = $(this).nextAll('div.jqplot-image-container').first();
    div.children('div.jqplot-image-container-content').empty();
    div.children('div.jqplot-image-container-content').append(imgelem);
    div.show(500);
    div = null;
});

$('#chart1').after(btn);
btn.after('<br />');
btn = null;
}  
});
</script> 
```

**更新**

对于多个图表，仅显示一张图像。我需要如何处理这段代码才能显示多个图表？此外，每个图表都在不同的 div 中：

```
$('#chart1').after(outerDiv);
outerDiv.hide();

outerDiv = header = div = close = null; 
```

**更新2**

出于某种原因，我的图表现在都没有显示。我猜我的代码中有一个简单的错误。我可以对我做错的事情有所帮助吗？此外，这些图表称为“FinancialsLineGraph”和“SalesMonthVsBudgetLineGraph”。

这是我的完整代码：

```
if (!$.jqplot.use_excanvas) {
var charts = ['#FinancialsLineGraph', '#SalesMonthVsBudgetLineGraph'];

$.each(charts, function(index, value) {
    (function(chartId) {
var outerDiv = $(document.createElement('div'));
var header = $(document.createElement('div'));
var div = $(document.createElement('div'));

outerDiv.append(header);
outerDiv.append(div);

outerDiv.addClass('jqplot-image-container');

header.addClass('jqplot-image-container-header');
div.addClass('jqplot-image-container-content');

header.html('Right Click to Save Image As...');

var close = $(document.createElement('a'));
close.addClass('jqplot-image-container-close');
close.html('Close');
close.attr('href', '#');
close.click(function() {
    $(this).parents('div.jqplot-image-container').hide(500);
})
header.append(close);

$(chartId).after(outerDiv);
outerDiv.hide();

outerDiv = header = div = close = null;

    })(value);
}); 
```

**更新**

我为每个单独的图表找到了一个可行的解决方案。这是我的代码：

```
 $('#FinancialsLineGraph').bind('jqplotClick', function(ev, seriesIndex, pointIndex, data) {                    
 var outerDiv = $(document.createElement('div'));
var header = $(document.createElement('div'));
var div = $(document.createElement('div'));

outerDiv.append(header);
outerDiv.append(div);

outerDiv.addClass('jqplot-image-container');
header.addClass('jqplot-image-container-header');
div.addClass('jqplot-image-container-content');

header.html('Right Click to Save Image As...');

var close = $(document.createElement('a'));
close.addClass('jqplot-image-container-close');
close.html('Close');
close.attr('href', '#');
close.click(function() {
    $(this).parents('div.jqplot-image-container').hide(500);
})
header.append(close);

$('#FinancialsLineGraph').after(outerDiv);
outerDiv.hide();   

outerDiv = header = div = close = null;  

var imgelem = $('#FinancialsLineGraph').jqplotToImageElem();
var div = $(this).nextAll('div.jqplot-image-container').first();
div.children('div.jqplot-image-container-content').empty();
div.children('div.jqplot-image-container-content').append(imgelem);
div.show(500);
div = null;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:27:30.443

替换此代码块：

```
var btn = $(document.createElement('button'));
btn.text('View Plot Image');
btn.addClass('jqplot-image-button');
btn.bind('click', {chart: $('#chart1')}, function(evt) {
    var imgelem = evt.data.chart.jqplotToImageElem();
    var div = $(this).nextAll('div.jqplot-image-container').first();
    div.children('div.jqplot-image-container-content').empty();
    div.children('div.jqplot-image-container-content').append(imgelem);
    div.show(500);
    div = null;
});

$('#chart1').after(btn);
btn.after('<br />');
btn = null; 
```

有了这个：

```
$('#chart1').bind('jqplotClick', function(ev, seriesIndex, pointIndex, data) {                
    var imgelem = $('#chart1').jqplotToImageElem();
    var div = $(this).nextAll('div.jqplot-image-container').first();
    div.children('div.jqplot-image-container-content').empty();
    div.children('div.jqplot-image-container-content').append(imgelem);
    div.show(500);
    div = null;
}); 
```

**编辑：**

要使该代码适用于多个绘图，您可以尝试以下操作：

```
if (!$.jqplot.use_excanvas) {
    var charts = ['#chart1', '#chart2', '#chart3'];

    $.each(charts, function(index, value) {
        (function(chartId) {
            //The code that you currently have in the if-block.

        })(value);
    });
} 
```

然后，您将需要用with替换任何出现`'#chart1'`的地方。`$each``chartId`

**编辑2：**

我认为您的完整代码缺少连接情节事件的部分。

您目前拥有的位置：

```
outerDiv = header = div = close = null; 
```

在它之后添加这个：

```
$(chartId).bind('jqplotClick', function(ev, seriesIndex, pointIndex, data) {                
    var imgelem = $(chartId).jqplotToImageElem();
    var div = $(this).nextAll('div.jqplot-image-container').first();
    div.children('div.jqplot-image-container-content').empty();
    div.children('div.jqplot-image-container-content').append(imgelem);
    div.show(500);
    div = null;
}); 
```

# php - imagettfbbox() 获取边界并合并字母间距

> ID：14926659
> 
> 赞同：0
> 
> 时间：2013-02-17T22:08:01.873
> 
> 标签：php

我使用 imagettfbbox() 来计算边界框的尺寸。

例如：

```
$box = imagettfbbox(72, 0, 'My Font', 'My Message');
$width = (abs($box[2] - $box[0])) / 72;
$height = (abs($box[5] - $box[3])) / 72; 
```

无论如何，我可以将字母间距合并到我的消息中并将尺寸检索到边界框吗？

字母间距以点为单位，对吗？

提前致谢。

麦克风

# debugging - 如何将已知函数分配/绑定到变量？

> ID：14926662
> 
> 赞同：1
> 
> 时间：2013-02-17T22:08:13.690
> 
> 标签：debugging, reverse-engineering, ida

我想知道如何在 IDA Pro 中将变量绑定到某个函数，以便下次双击该变量时，它会将我发送到该函数。

```
v1 = this

*v2 = Known-Function 
```

在一些不同的位置：

```
char __stdcall ClassA__KnownFunction(ClassA *ClassA, void a2) {

commands.....

} 
```

我知道你可以将类型设置为 int、struct、dword 等。但我正在寻找一些方法来将变量指向 IDA Pro 中已知的偏移量/函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:22:04.800

函数指针只是一个保存函数地址的变量；您不能将变量视为常量。你有两个选择：

1.  将函数的名称添加为注释（仅用于文档）。

2.  去掉变量赋值，通过编辑十六进制硬编码函数地址，然后再次执行分析。

# asp.net-mvc - KendoUI 网格。一列中有多个值

> ID：14926663
> 
> 赞同：0
> 
> 时间：2013-02-17T22:08:41.673
> 
> 标签：asp.net-mvc, kendo-ui, kendo-grid, razor-2

我正在使用 Razor 和 KendoUI 开发 ASP.NET MVC 4.5 项目。我有以下两个课程：

```
public class Rol
    {
        [Key]
        [ScaffoldColumn(false)]
        public int RolId { get; set; }

        [Required]
        [MaxLength(50)]
        public string Name{ get; set; }

        [MaxLength(255)]
        public string Desciption { get; set; }

        public bool Active{ get; set; }

        [DisplayName("Permissions")]
        public virtual ICollection<Permission> Permissions { get; set; }
    }

public class Permission
    {
        [Key]
        [ScaffoldColumn(false)]
        public int PermisoId { get; set; }

        [Required]
        [MaxLength(50)]
        public string Name { get; set; }

        [MaxLength(255)]
        public string Description { get; set; }

        public bool Active { get; set; }

        public ICollection<Rol> Rols { get; set; }
    } 
```

但我不知道如何制作一个有列的网格：

具有 Rol.Name | 的列 列与 Rol.Description | Rol.Active 列 | 包含所有 Rol.Permissions.Name(list) 的列

并支持 KendoUI 的 CRUD 操作

在我看来：

```
@model IEnumerable<ItemsMVC.Models.Rol>    
    @(
        Html.Kendo().Grid(Model)
            .Name("Grid")
            .Columns(c =>
                {
                    c.Bound(p => p.RolId).Visible(false);
                    c.Bound(p => p.Name);
                    c.Bound(p => p.Description);
                    c.Bound(p => p.Active)
                        .ClientTemplate("#= Active ? 'yes' : 'No' #")
                        .Width(100);
                    **HERE THE LIST OF PERMISSIONS**
                    c.Command(p => { 
                        p.Edit(); 
                        p.Destroy();
                    }).Width(200);
                }        
            )        
            .Pageable(p => p.Enabled(true))
            .Scrollable(s => s.Enabled(true))
            .Sortable(s => s.Enabled(true))
            .Filterable(f => f.Enabled(true))
            .ColumnMenu(c => c.Enabled(true))
            .ToolBar(t => t.Create())
            .Editable(e => e.Mode(GridEditMode.PopUp))
            .DataSource( ds => ds
                .Ajax()
                .Model(model =>model.Id(p => p.RolId))
                .Create(c => c.Action("EditingInline_Create", "Rol"))
                .Read(r => r.Action("Permisos_Read","Rol"))
                .Update(u => u.Action("EditingInline_Update", "Rol"))
                .Destroy(d => d.Action("EditingInline_Destroy", "Rol"))
            )
    ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:51:01.167

您将需要在 Rol 中创建另一个属性，称为

```
string PermissionList
{
    get ( return [Convert Permissions collection to string of values]; ) 
} 
```

然后，此属性可以调用 Permissions 并转换为列出名称的字符串，大概。不要尝试在 Grid 中执行此操作，而是在您的 Rol 类中执行此操作。我还建议将 Rol 重命名为 RoleModel 并将 Permission 重命名为 PermissionModel，但显然这是偏好。

# php - Wordpress：为用户显示代码，在 javascript 中使用 PHP 变量

> ID：14926668
> 
> 赞同：0
> 
> 时间：2013-02-17T22:09:13.923
> 
> 标签：php, javascript, wordpress

在 Wordpress 中工作，我有一段代码想与我的用户分享：

```
<script type="text/javascript">
document.write('<div class="rslr1">Our Reviews');
new rssdisplayer("rslrdiv1", "http://mydomain.com/blogname/rss-feed/", 4, "description");
document.write('<a href="#">Add a Review</a></div>');
</script> 
```

同样，我没有运行此代码，而是在标签之间共享它，并转义所有括号。

这里棘手的一点是，我想将第三行代码中的“blogname”替换为实际的 blogname，它是一个 PHP 变量。

我在这里看到很多关于在 javascript 中使用 PHP 变量的答案，但我没有运行脚本。我只是将它发布在博客文章中供我的用户毕业，并且需要将博客名称动态插入到 RSS 提要 URL 中。

非常感谢任何帮助。

拉里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:12:33.483

```
<script type="text/javascript">
  document.write('<div class="rslr1">Our Reviews');
  new rssdisplayer("rslrdiv1", "http://mydomain.com/<?php echo $blog_name ; ?>/rss-feed/", 4, "description");
  document.write('<a href="#">Add a Review</a></div>');
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:12:32.613

您应该将 blogname 替换为

```
<?php echo $blogname; ?> 
```

而不是简单地输入“博客名”

另请注意，运行脚本的文档必须启用 php 处理（在简单的设置中，它必须命名为 .php）

您的答案似乎很挑剔，尽管上面的答案是正确的，这可能更适合您？

```
<pre><?php 
$blogname='WHATEVER-YOU-WISH';

$output="<script type='text/javascript'>
document.write('<div class=\"rslr1\">Our Reviews');
new rssdisplayer('rslrdiv1', 'http://mydomain.com/blogname/rss-feed/', 4, 'description');
document.write('<a href=\"#\">Add a Review</a></div>');
</script>";
$output=str_replace('blogname',$blogname,$output);
$output=str_replace('<','&lt;',$output);
$output=str_replace('>','&gt;',$output);
echo $output;
?></pre> 
```

上述代码的示例：http: [//allanthya.net/test.php](http://allanthya.net/test.php)

# c# - 如何在解决方案中包含快捷方式 (.lnk)？

> ID：14926669
> 
> 赞同：2
> 
> 时间：2013-02-17T22:09:14.993
> 
> 标签：c#, wpf, visual-studio-2012, shortcut, solution

首先，对不起我的英语。我怎样才能在我的解决方案中包含现有的快捷方式？

当我尝试将现有项目添加到我的项目中时，Visual Studio 似乎尝试添加链接目标，而不是链接本身，因为它给了我以下错误：

找不到文件“C:\linkdestination.exe”

但链接工作正常。

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-05T11:51:57.603

我必须这样做（将 lnk 添加到 PS 脚本）。

只需将您的 lnk 重命名为 sth else，例如 TXT。

```
REN "Foo.lnk" "Foo.txt" 
```

然后将其添加到 VS 中的解决方案中。完成后，在 VS 中将其重命名为 .lnk 扩展名。

# r - 执行库（pkg）后从包中执行函数

> ID：14926672
> 
> 赞同：8
> 
> 时间：2013-02-17T22:09:29.413
> 
> 标签：r, function, load, package

嗨，我有一个包，其中包含使用 gWidgets 制作 gui 的功能，有没有办法可以在包加载时执行它，以便界面立即出现。

我想是这样的：

```
.OnAttach <- function(libname, pkgname){
  gui()
} 
```

会工作，但我仍在学习钩子，以及包加载和卸载期间的事件，以及 R 环境的东西。

编辑：

这是我目前在我的 zzz 文件中的内容：

```
.onLoad <- function(libname = find.package("GspeEaR"), pkgname = "GspeEaR") {
  gui()
} 
```

谢谢，

本·W。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T02:50:12.470

我认为您想要`.onLoad`将其转储到名为 zzz.R 的 .R 文件中（传统上）。这是我使用过的示例：[github.com/trinker/gmailR/blob/master/R/zzz.R](http://github.com/trinker/gmailR/blob/master/R/zzz.R)

# c# - BitmapMetadata.GetQuery() 抛出“元数据查询请求无效”

> ID：14926676
> 
> 赞同：1
> 
> 时间：2013-02-17T22:09:55.203
> 
> 标签：c#, metadata, tiff, decoder

我正在尝试使用元数据类从 tiff 文件中提取时间信息；这是时间信息在 tiff 文件中的部分：

```
<Plane TheZ="0" TheT="0" TheC="0" DeltaT="0.2345"/> 
```

其中 0.2345 是我要提取的信息。这是我试图让它出来的代码：

```
string searchtext = "DeltaT=";
FileStream stream = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read);
            TiffBitmapDecoder tbd = new TiffBitmapDecoder(stream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default);

            if (tbd.Frames[0] != null && tbd.Frames[0].Metadata != null)
            {
                //BitmapMetadata bmd = new BitmapMetadata("tiff");

                BitmapMetadata bmd = tbd.Frames[0].Metadata as BitmapMetadata;

                bmd.GetQuery(@searchText);              

            } 
```

但是，该行`bmd.GetQuery(@searchText)`; 抛出异常`"Metadata query request is not valid"`；我不确定如何更改它以使其获得 0.2345 值。有人有什么想法吗？非常感谢。

这是 tiff 文件，以便您查看：[http ://dl.dropbox.com/u/105139407/ChanA_0001_0001_0001_0003.tif](http://dl.dropbox.com/u/105139407/ChanA_0001_0001_0001_0003.tif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:46:31.843

显然，您要查找的 XML 在“/ifd/{ushort=270}”中（不要问我为什么——我对 TIFF 元数据的外观一无所知......）。请注意，它返回整个 XML 文档，因此您仍然必须解析它。此代码检索 的值`DeltaT`：

```
var decoder = new TiffBitmapDecoder(new Uri(fileName), BitmapCreateOptions.None, BitmapCacheOption.Default);
var metadata = (BitmapMetadata)decoder.Frames[0].Metadata;
string xml = (string)metadata.GetQuery("/ifd/{ushort=270}");
var doc = XDocument.Parse(xml);
var ns = doc.Root.GetDefaultNamespace();
var plane = doc.Root.Element(ns + "Image")
                    .Element(ns + "Pixels")
                    .Element(ns + "Plane");
double deltaT = (double)plane.Attribute("DeltaT"); 
```

编辑：这是我用来快速查看图像元数据的 LINQPad 脚本：http: [//pastebin.com/daBTdW33](http://pastebin.com/daBTdW33)。随意使用它或根据您的需要进行调整；）

# javascript - 内容替换功能

> ID：14926677
> 
> 赞同：0
> 
> 时间：2013-02-17T22:10:00.720
> 
> 标签：javascript, replace

[我对内容替换功能](https://stackoverflow.com/questions/14917545/content-replace-function-replacing-a-space-with-an-underscore)有一个后续问题：

这是我当前的内容替换功能：

```
content = content.replace(/(<t t>(.*?)<t t>)/g, function(m,p1,p2){
    return p2,p1.replace(/     /g,"_").replace(/<t t>/g,"<html>");
}); 
```

当我运行时：

```
This <t t>this a test<t t> of 
```

通过我的 HTML 处理文本区域：

```
<textarea id="content" cols="48" rows="8"></textarea><br />
<input type="button" value="Process" onclick="process()" /> 
```

我将收到这个作为输出：

```
This <t_t>this_a_test<t_t> of the replace. 
```

而不是我想要的：

```
This <t d>this_a_test<t d> of the replace. 
```

我知道原因

```
<t t> 
```

不替换为

```
<t d> 
```

是因为我的函数正在寻找一个空格，然后会省略那个空格并创建一个下划线。但我无法弄清楚如何不发生这种情况，同时仍然在我的两个标签中用下划线替换空格，例如

```
this a test 
```

会变成

```
this_a_test 
```

我上一个问题的回答者使用了这个有用的资源[.replace() 方法](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace)来帮助我理解，但令我懊恼的是，我自己无法弄清楚这一点。非常感谢您的帮助，如果需要，这里是我的[示例的链接](http://jsfiddle.net/WVUYX/43/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:17:41.467

所以，根据你的评论...

> ...所以当“这个<t t>这是一个替换的测试<t t>”时。输入到我的过程文本区域，结果将是这个“替换的这个 <t d>this_a_test<t d>”...

...你可以简单地做：

```
content.replace(/<t t>/g, "<t d>"); 
```

请记住，`/g`正则表达式中的标志匹配测试字符串中的所有模式（g 代表“全局”）。

# java - 为什么 readLine() 没有阻塞？

> ID：14926678
> 
> 赞同：0
> 
> 时间：2013-02-17T22:10:11.217
> 
> 标签：java

鉴于以下代码，对 readLine() 的第一次调用不是阻塞的，“输入名称：”和“输入地址：”同时打印，并且地址被分配给输入的任何内容。为什么？我尝试将它们放在单独的尝试块中，摆脱循环并通常重新排序。

```
public class AddressReader {

public static void main(String[] args) {

    Path file = Paths.get("d:/java IO/addresses.txt");

    try {
        Files.createDirectories(file.getParent());
    } catch (IOException e) {
        System.err.println("Error craeting directory: " + file.getParent());
        e.printStackTrace();
        System.exit(1);
    }
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    int c = 0;
    try {
        System.out.println("<a>dd an entry or <r>ead entries");
        c = br.read();
    } catch (IOException e) {
        System.out.println("An error has occured, try again");
    }
    switch (c) {
    case 'a':
        String name = null;
        String address = null;

        while (name == null || name == "" || address == null || address == "") {
            try {
                System.out.println("Enter name:");
                name = br.readLine();
                System.out.println("Enter address:");
                address = br.readLine();
            } catch (IOException e) {
                System.out.println("An error has occured, try again");
            }
            System.out.println("name = " + name);
            System.out.println("address = " + address);
        }
        //writeEntry(file, name, address);
        break;
    case 'r':
        //readEntries(file);
        break;
    default:
        System.out.println("Invalid entry, try again.");
    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:24:36.080

这是因为这一行：

```
c = br.read(); 
```

这不会消耗按 生成的换行符`ENTER`。

要解决此问题，请改用：

```
c = br.readLine().charAt(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:18:26.477

除了已经说过的内容之外，对于您要尝试做的事情，我建议您改用控制台：

```
Console console = System.console();
String name = console.readLine("Create a name.");
char[] password = console.readPassword("Create a password.");
System.out.println(name + ":" + new String(password)); 
```

# c# - 如何将模型中的两个集合链接到视图？

> ID：14926683
> 
> 赞同：0
> 
> 时间：2013-02-17T22:10:43.617
> 
> 标签：c#, asp.net-mvc-3, razor

我定义了一个模型：

```
public class ExhibitionItemModel
{
    public IEnumerable<tblItem> Items { get; set; }
    public tblExhibition Exhibition { get; set; }
    public IEnumerable<tblExhibitionItem> ExhibitionItems { get; set; }
} 
```

`tblItem`包含有关特定项目的信息，例如描述、代码等。 `tblExhibitionItem`包含来自的 id `tblItem`、展览 id 告诉系统特定项目属于哪个展览，以及该项目/展览组合的价格。

在我的控制器中，我正在填充 ExhibitionItemModel：

```
ExhibitionItemModel exhibitionItemModel = new ExhibitionItemModel();
exhibitionItemModel.Exhibition = db.tblExhibitions.Find(id);
exhibitionItemModel.ExhibitionItems = (from objExhibitionItems in db.tblExhibitionItems
                                               where objExhibitionItems.ExhibitionID == id
                                               select objExhibitionItems).AsEnumerable<tblExhibitionItem>();

exhibitionItemModel.Items = (from objItem in db.tblItems
                                     select objItem).OrderBy(item => item.Code).AsEnumerable<tblItem>();

return View(exhibitionItemModel); 
```

我的观点是，我列出了所有项目，我希望有一个复选框，根据项目是否在`tblExhibitionItem`. 然后是一个文本框，用于输入商品的价格。

到目前为止，我有：

```
@foreach (var item in Model.Items) 
    {
        <tr>
            <td>@Html.DisplayFor(modelItem => item.Code)</td>
            <td>@Html.DisplayFor(modelItem => item.Description)</td>
            <td>@Html.CheckBoxFor(modelItem => item.AdditionalItem.Value, new { @disabled = "disabled" })</td>
            <td>@Html.CheckBox("chkIsSelected")</td>
            <td>@Html.Editor("txtPrice")</td>
        </tr>
    } 
```

由于我是 MVC 的新手，所以我不知道如何建立复选框和价格文本框之间的链接，以显示项目与项目的链接。换句话说，当我将更改提交到数据库时，我将使用项目的 ID 和价格填充展览项目，具体取决于是否选中了复选框（“chkIsSelected”）。

此外，如果数据库中已经有展览项目，我需要更改什么来填充复选框和价格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:16:27.887

您可以使用 ajax 来实现这一点。

您需要弄清楚哪个复选框用于什么值。所以链接它的最好方法是使用**ID**。

所以您的复选框代码可能如下所示：

```
<td>@Html.CheckBox("chkIsSelected", new { @value = item.ID })</td> 
```

现在您将使用 jquery 获取一组选定的复选框 id，并将其传递给您的控制器。

```
$('#submitButton').click(function(e) {
    e.preventDefault();
    var selectedItems = new Array(); // Create Array

    // Add to array
    $('#chkIsSelected:checked').each(function() { selectedItems.push($(this).val()); });

    $.ajax({
          url: '/update-exhibition-item',
          data: { items: selectedItems },
          traditional: true,
          success:function (data) {
                // do something.
          });
    });

}); 
```

现在你必须将它读入你的控制器。这可能是局部视图，也可能是带有结果的正确视图。由你决定。无论如何，您将循环遍历数组并更新数组中存在的每个值。例如

```
[ActionName("update-exhibition-item")]
public ActionResult UpdateExhibition(int[] items)
{
     var list = from a in tableA
                where items.Contains(a.id)
                select a;
     // etc.
} 
```

# ios - UICollectionViewFlowLayout 子类导致单元格消失

> ID：14926684
> 
> 赞同：3
> 
> 时间：2013-02-17T22:10:57.737
> 
> 标签：ios, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我正在尝试偏移所选单元格下方所有单元格的 y 轴中心。我向子类添加了一个属性`CollectionViewFlowLayout`，称为`extendedCell`，它标记了我应该抵消其他所有内容的单元格。

```
- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray *attributes = [super layoutAttributesForElementsInRect:rect];
    if(!self.extendedCell)
    {
        return attributes;
    }
    else
    {
        return [self offsetCells:attributes];
    }
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes *attribute = [super layoutAttributesForItemAtIndexPath:indexPath];
    if(!self.extendedCell)
    {
        return attribute;
    }
    else
    {
        if(![attribute.indexPath isEqual:self.extendedCell] &&
           attribute.center.y >= [super layoutAttributesForItemAtIndexPath:self.extendedCell].center.y)
        {
            CGPoint newCenter = CGPointMake(attribute.center.x,
                                            attribute.center.y + 180.f);
            attribute.center = newCenter;
        }

        return attribute;
    }
}

-(NSArray *)offsetCells:(NSArray *)layoutAttributes
{
    for(UICollectionViewLayoutAttributes *attribute in layoutAttributes)
    {
        if(![attribute.indexPath isEqual:self.extendedCell] &&
           attribute.center.y >= [super layoutAttributesForItemAtIndexPath:self.extendedCell].center.y)
        {
            CGPoint newCenter = CGPointMake(attribute.center.x,
                                            attribute.center.y + 180.0f);
            attribute.center = newCenter;
        }
    }

    return layoutAttributes;
} 
```

结果发现途中发生了一些不好的事情，因为底部的单元格消失了。我有一种感觉，这与单元格超出`UICollectionView`内容大小有关，但是在生成布局时设置大小并没有帮助。任何想法如何解决这种消失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:45:12.077

好吧，原来我发现了这个错误。似乎覆盖 -(CGSize)collectionViewContentSize 有帮助。如果任何单元格位于集合视图的内容大小之外，它们就会消失。由于在调用任何布局属性之前已经设置好内容大小，并且不允许将单元格放置在它之外，因此集合视图只是摆脱了它们。我认为内容大小是基于设置后的单元格属性，但事实并非如此。

```
-(CGSize)collectionViewContentSize
{
    if(self.extendedCell)
    {
        CGSize size = [super collectionViewContentSize];
        return CGSizeMake(size.width, size.height + 180);
    }
    else
    {
        return [super collectionViewContentSize];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T14:35:41.470

通过将大细胞分解成小细胞并将它们与视图连接来解决它。非常hacky，但iOS7希望能有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T03:31:33.273

检查任何返回的单元格大小是否具有边框大小等于 0 之一。

在我的情况下消失的原因是 sizeForItem 返回 {320,0}

[为什么带有 UICollectionViewFlowLayout 的 UICollectionView 不显示单元格，而是询问大小？](https://stackoverflow.com/questions/29504487/why-uicollectionview-with-uicollectionviewflowlayout-not-show-cells-but-ask-for/29504902#29504902)

为了从 nib 获得正确的尺寸视图（使用自动布局），我使用：

```
+ (CGSize)sizeForViewFromNib:(NSString *)nibName width:(CGFloat)width userData:(id)userData {
        UIView *view = viewFromNib(nibName, nil);
    [view configForUserData:userData];
    CGSize size = [view systemLayoutSizeFittingSize:CGSizeMake(width, SOME_MIN_SIZE) withHorizontalFittingPriority:UILayoutPriorityRequired verticalFittingPriority:UILayoutPriorityFittingSizeLevel];
    return CGSizeMake(width, size.height);
} 
```

# c++ - 删除传递给类的指针向量

> ID：14926685
> 
> 赞同：3
> 
> 时间：2013-02-17T22:11:31.367
> 
> 标签：c++, memory-management, memory-leaks

我有一个`module`特定模块派生的抽象类。在运行时，我解析一个配置文件并确定配置文件中每个模块的具体模块类型：

```
std::vector<module*> modules;
module *temp;

//Let nm be the result of parsing as a std::string

if(nm == "type1")
{
    temp = new module_1(...);
}
else if(nm == "type2")
{
    temp = new module_2(...);
}
else if(nm == "type3")
{
    temp = new module_3(...);
}
else
{
    //Syntax error
    return -1;
}

modules.push_back(temp);
partition p;
p.modules = modules; 
```

将向量`modules`交给一个`partition`类：

```
class partition
{
    public:
    //Member functions

    private:
    //...Other variables
    std::vector<module*> modules;
}; 
```

完成这些模块指针后，为这些模块指针释放内存的正确方法是什么？我试图在`partition`类的析构函数中删除它们，如下所示，但最终出现了分段错误：

```
partition::~partition()
{
    for(unsigned i=0; i<modules.size(); i++)
    {
         delete modules[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:31:57.720

这取决于您希望如何处理所有权以及分区是否将具有值语义。想想如果你复制一个分区会发生什么：

分区的副本是否将与原始分区共享模块。模块中的更改是否要在分区之间共享？

如果是，您应该使用 a`std::shared_ptr`作为您的分区。所有的痛苦都消失了。

如果没有，请为您的分区实现一个复制构造函数和赋值运算符，以执行模块列表的深拷贝。实现一个析构函数，删除列表中的每个模块。这是安全的，因为每个分区都有自己的模块对象。

总的来说，我赞成第二种方法。如果您不想实现深度复制，只需将其设为不可复制`partition`或仅移动并用于`std::unique_ptr`处理删除。

# c# - 在谓词表达式中传递 where 子句

> ID：14926686
> 
> 赞同：0
> 
> 时间：2013-02-17T22:11:31.830
> 
> 标签：c#, .net, linq, lambda

我有以下谓词表达式。

```
public IQueryable<T> Find(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
    {
        return //boolean
    } 
```

这是我调用该方法的地方：

```
 public void TestMethod1()
    {
        author.AuthorName = authorName;

        using (var context = new AspBlogRepository<Author>())
        {
            if (context.Find(e => e.AuthorName == authorName))
            {
                //do nothing
            }
            context.Add(author);   
        }
    } 
```

我收到一条错误消息，提示您无法将 IQueryable 转换为布尔值。我只想能够使用我的谓词表达式来查看作者是否已经在数据库中。

任何帮助将非常感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:14:02.727

错误说明了一切。`context.Find(e => e.AuthorName == authorName)`正在回归`IQueryable<T>`。`If`期待一个`bool`

所以你的用法`if (context.Find(e => e.AuthorName == authorName))`是错误的。将其更改为

```
if (context.Find(e => e.AuthorName == authorName).Any())
{

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:15:21.160

`context.Find`返回一个`IQueryable<T>`. 您的代码可能看起来像：

```
if (context.Find(e => e.AuthorName == authorName).Count() == 1)
{
    //do nothing
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T22:18:39.553

```
public IQueryable<T> Find(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
    {
        return //boolean
    } 
```

如果您确实返回布尔值，问题就在这里。如果此方法在您的上下文中，您首先需要解析`Author`，然后`Authors`在您的存储库中过滤。

如果这是一个 EF 上下文，并且您可以访问存储库中的 EF 上下文，您应该能够像这样获取数据库集：

```
var entitySet = context.Set<T>(); 
```

然后，您可以针对`entitySet`返回的过滤结果运行谓词。

# actionscript-3 - AS3 使用带有 .content 的加载器 CLASS

> ID：14926690
> 
> 赞同：0
> 
> 时间：2013-02-17T22:12:18.713
> 
> 标签：actionscript-3, loader

我一直在研究一个程序，但目前我被卡住了。

我的问题是`.content`我的脚本中的语句。由于我正在从网络加载 PNG，因此我将本地播放安全设置为“仅访问网络”。当我在本地加载图片时（当然使用“仅访问本地文件”和本地 URLRequests 的设置），程序工作得很好，但是当从网络加载时，`.content`我的程序会停止，我通过大量测试发现了这一点. `.content`当 SWF 文件仅使用本地请求时，它似乎唯一有效，这是正确的吗？

我知道我可以使用`addChild(loader)`，但我需要从加载器中取出 PNG 文件，以便将其转换为位图并进行编辑。有任何想法吗？脚本如下。

```
var loader:Loader = new Loader;
var ar:Array = [];
var teller:Number = 0;

loader.contentLoaderInfo.addEventListener(Event.COMPLETE, paste);
knapp.addEventListener(MouseEvent.CLICK, neste);

function paste(evt) {
    ar[teller] = loader.content;
    ar[teller].x = ar[teller].width*teller;
    addChild(ar[teller]);
}

function neste(evt) {
    teller ++
    loader.load( new URLRequest ("http://www.minecraft.net/skin/Notch.png"));
}

loader.load( new URLRequest ("http://www.minecraft.net/skin/Notch.png")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:50:17.010

跨域策略禁止对从另一个域加载的图像进行图像数据操作，而不是从加载 swf 文件的域：

[http://www.dwuser.com/flashslideshow/v4/help/advanced_topics/understanding_flash_player_cross_domain_loading_restrictions.html](http://www.dwuser.com/flashslideshow/v4/help/advanced_topics/understanding_flash_player_cross_domain_loading_restrictions.html)

# java - 用matlab读取html

> ID：14926691
> 
> 赞同：0
> 
> 时间：2013-02-17T22:12:18.840
> 
> 标签：java, matlab, urlread

我想使用matlab阅读一些html。我已经尝试了 urlread 但得到了 url 读取错误

[从 HTTPS 获取数据到 MATLAB](https://stackoverflow.com/questions/2610550/getting-data-into-matlab-from-https)：

所以我尝试使用java：

[使用 MATLAB 的 urlread 命令处理无效的安全证书](https://stackoverflow.com/questions/1638275/handling-an-invalid-security-certificate-using-matlabs-urlread-command)。

不幸的是，我不知道如何在 matlab 中使用 java。所以我尝试了这段代码，它似乎工作

```
 url = 'https://stackoverflow.com/questions/11053664/use-java-in-matlab';
  is = java.net.URL([], url ).openConnection().getInputStream(); 
  br = java.io.BufferedReader(java.io.InputStreamReader(is));
  str = char(br.readLine()); 
```

但是我想获得整个 html 页面。所以我可以使用正则表达式。我的王国需要帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T02:50:05.160

matlab中有一个函数可以做到这一点......名字是urlread！

见[http://www.mathworks.com/matlabcentral/answers/973](http://www.mathworks.com/matlabcentral/answers/973)

# javascript - 使用新数据更新 D3 流图

> ID：14926692
> 
> 赞同：2
> 
> 时间：2013-02-17T22:12:23.577
> 
> 标签：javascript, d3.js, transition, stream-graph

我有一个流图，我想通过更改它的数据来更新它。我有一个在数据集之间完美转换的折线图，我正在尝试为我的流图调整相同的代码，但收效甚微。我可以更改每个流的颜色，但不能更改数据。

这是我的更新行功能

```
 function UpdateData() {
    // Get new data
    d3.csv("data2.csv", function(data) {
        data.forEach(function(d) {
            d.date = parseDate(d.date);
            d.age = +d.age;
        });

    // Rescale range
    x.domain(d3.extent(data, function(d) { return d.date; }));
    y.domain([0, d3.max(data, function(d) { return Math.max(d.age); })]);

    var valueline = d3.svg.line()
        //.interpolate("interpolation")
        .x(function(d) { return x(d.date); })
        .y(function(d) { return y(d.age); });

    var svg = d3.select("body").transition();

    // change the line
    svg.select(".line") 
        .duration(750)
        .attr("d", valueline(data));

    svg.select(".x.axis") // change the x axis
        .duration(750)
        .call(xAxis);

    svg.select(".y.axis") // change the y axis
        .duration(750)
        .call(yAxis);
    });} 
```

这是我对流图的相同功能的尝试...

```
function UpdateData() {             
    var customPalette = ["#8c564b", "#e377c2", "#7f7f7f"];        
    var colours = d3.scale.ordinal().range(customPalette);
    var nest = d3.nest().key(function(d) { return d.age; });

    // Get new data
    d3.csv("data2.csv", function(error, data) {
    data.forEach(function(d) {
            d.date = format.parse(d.date);
            d.amount = +d.amount;
        });

    var svg = d3.select("body").transition();

    var layers = stack(nest.entries(data));

        x.domain(d3.extent(data, function(d) { return d.date; }));
        y.domain([0, d3.max(data, function(d) { return d.y0 + d.y; })]);

        svg.selectAll(".layer")
            .duration(750)
            .data(layers)
            .attr("class", "layer")
            .attr("d", function(d) { return (d.values); })
            .style("fill", function(d, i) { return colours(i); });                
        });
    } 
```

颜色会改变，但值不会传递到图表。任何意见或建议将不胜感激！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T23:12:44.477

成功！！

终于明白了。我应该以路径本身为目标，而不是针对层！

所以，调用你的新数据，

```
 // Get the data again
    d3.csv("PopulationStats/UK.csv", function(error, data) {
        data.forEach(function(d) {
            d.date = format.parse(d.date);
            d.amount = +d.amount;
        }); 
```

嵌套它

```
var layers = stack(nest.entries(data)); 
```

并更新您的路径。

```
 d3.selectAll("path")
   .data(layers)
  .transition()
   .duration(750)
   .style("fill", function(d, i) { return colours(i); })
   .attr("d", function(d) { return area(d.values); }); 
```

如此简单，但我花了两天时间才弄清楚！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-19T16:26:49.543

对发现这一点的其他人来说只是一个提醒——同样的技术也适用于更新堆积面积图示例 ( [http://bl.ocks.org/mbostock/3885211](http://bl.ocks.org/mbostock/3885211) ) 中的数据。将我的头撞在电脑上整整 4 个小时，直到我偶然发现了这一点。谢谢笨蛋！

# knockout.js - 在 knockoutjs 中自定义对象“创建”-属性绑定在加载时起作用，但在创建新对象时不起作用

> ID：14926698
> 
> 赞同：0
> 
> 时间：2013-02-17T22:12:52.000
> 
> 标签：knockout.js

我正在使用 ko.mapping.fromJS(data, mapping) 方法从服务器转换我的模型，以便我可以向我的子模型添加更多属性。

按照此处的示例：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html) =>“使用“创建”自定义对象构造</p>

这是我的代码：

```
var Employer = function (data) { 
        ko.mapping.fromJS(data,{}, this); 
        this.Foo = ko.observable("bar"); // added properties will go here. 

        console.log(this.Foo());      // i see this getting called OK on initial creation, and subsequent creations
        console.log(this.Name()); // ** this is only OK during initial creation, but on subsequent times i get "[Object] does not have a property Name" this property comes from the server model..** 
        }; 

        var mapping = {     
            'Employers' : { 
                create: function (options) {
                     var e = new Employer(options.data);
                     return e;
                } 
            } 
        }; 

        model = ko.mapping.fromJS(data, mapping); 
```

到目前为止，这工作正常！

问题发生在这里：

```
 model.addEmployer = function (options, o2) {
            var e = new Employer(options);
             this.Resume.Employers.push(e);
        }; 
```

我在这里遗漏了一些东西..当我想向集合中添加一个新对象时，它缺少来自模型（来自服务器）的所有属性，这些属性是通过这一行添加的“ko.mapping.fromJS（数据,{}, this); " 在 Employer 构造函数中。

我猜我需要在 addEmployer 函数中重复一些类似的映射，它将所有服务器端属性重新绑定到客户端模型

这是我如何调用addEmployer：

```
 <button data-bind="click: addEmployer">...</button> 
```

**更新**

归结为，当在映射中声明“创建”事件时，该函数接收**选项**对象，该对象具有可在此调用中使用的**options.data：ko.mapping.fromJS** *(data,{}, this);* .. 我不确定如何在我的 addEmployer 处理程序中获取这种类型的对象，以便为服务器上的 Employer 对象上存在的所有属性提供必要的绑定。

我可以通过保留初始绑定中的 options.data 并在 addEmployer 处理程序中重新使用它来破解它。问题在于，它将具有从该初始对象设置的所有属性。

我基本上需要的是 EmployerMappingOptions 对象，它是空的。在上述实现中，options.data 预先填充了我集合中第一个 Employer 对象的数据。**我怎样才能获得空雇主模型的映射数据**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:18:42.940

你的问题是你在添加函数中映射时没有添加任何数据

要么：给它一个虚拟数据对象 [http://jsfiddle.net/mfauL/1/](http://jsfiddle.net/mfauL/1/)

```
this.Employers.push(new EmployerViewModel({ Name: "" })); 
```

或显式声明可观察的名称（首选方式） [http://jsfiddle.net/mfauL/2/](http://jsfiddle.net/mfauL/2/)

```
EmployerViewModel = function (data) { 
    this.Foo = ko.observable("bar"); 
    this.Name = ko.observable(); 

    ko.mapping.fromJS(data,{}, this); 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:01:50.983

想出了**一个**解决办法。

1.  将有问题的子类（子模型）公开为主模型的属性

    公共 ResumeEmployer EmptyEmployer { get { return new ResumeEmployer(); } }

2.  创建它的 JSON 表示

    var newEmployerJson = @Html.Raw(Json.Encode(Model.EmptyEmployer));

3.  在客户端上创建新雇主时，使用空定义 json 进行绑定

    ```
     var Employer = function (data) { 
            if (data)
                ko.mapping.fromJS(data,{}, this);   // existing data in serialized model
            else
                ko.mapping.fromJS(newEmployerJson, {}, this); // json of single empty Employer class 
            ... 
         } 
    ```

# sql - 在 SQL 中合并来自 2 个表的查询和数据

> ID：14926702
> 
> 赞同：0
> 
> 时间：2013-02-17T22:13:00.617
> 
> 标签：sql, sql-server-2008

我有 2 个表需要从中查询不同的数据。公共链接是日期时间列。我试图合并查询，但不断收到各种错误......

最后的查询应该给我：`date, Peak Power each Day, KWHOpenHrs, KWHClosedTotal`

任何帮助表示赞赏。

2表如下

`Peak KVA`桌子

```
Date | Power_Apparent_Total 
```

询问：

```
SELECT
   CAST(t.HD as DATE), MAX(t.Power_Apparent_Total) as 'Peak Power Each Day'
FROM [Peak kVA] t
GROUP BY CAST(t.HD AS DATE) 
```

`Daily Consumption`

```
Date | KWH Open | KWH ClosedandOccupied | KWH ClosedandnotOccupied 
```

询问：

```
select date, 
max(value) kWhOpenHrs,
sum(case when col in ('zkWhClsedAndOccupied', 'zkWhClsedAndNotOccupied') then value   end) kWhClsedTotal
from 
(
  select date, 'zkWhOpenHrs' as col, kWhOpenHours as value
  from dbo.tblDailyPowerConsumption
  union all
  select date, 'zkWhClsedAndNotOccupied' as col, kWhClosedAndNotOccupied as value
  from dbo.tblDailyPowerConsumption
  union all
  select date, 'zkWhClsedAndOccupied' as col, kWhClosedAndOccupied as value
  from dbo.tblDailyPowerConsumption
) src
WHERE MONTH(date) = '12' 
group by date 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:57:21.717

首先执行此请求。您的日期类型不仅包含日期，还包含时间

```
SELECT [Peak kVA].HD AS [date], [Peak kVA].Power_Apparent_Total,
       tblDailyPowerConsumption.kWhOpenHours, 
       tblDailyPowerConsumption.kWhClosedAndOccupied, 
       tblDailyPowerConsumption.kWhClosedAndNotOccupied 
FROM dbo.[Peak kVA] LEFT JOIN dbo.tblDailyPowerConsumption 
                      ON CAST([Peak kVA].HD AS date) = CAST(tblDailyPowerConsumption.Date AS date) 
                        AND MONTH(tblDailyPowerConsumption.Date) = '12' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T19:13:27.307

```
select date, [Peak Power each Day], KWHOpenHrs, KWHClosedTotal
from
   (SELECT
        CAST(t.HD as DATE), MAX(t.Power_Apparent_Total) as 'Peak Power Each Day'
    FROM [Peak kVA] t
    GROUP BY CAST(t.HD AS DATE)) peak
inner join
   (select date, 
    max(value) kWhOpenHrs,
    sum(case when col in 
       ('zkWhClsedAndOccupied', 'zkWhClsedAndNotOccupied') 
       then value end) kWhClsedTotal
   from 
   (
   select date, 'zkWhOpenHrs' as col, kWhOpenHours as value
   from dbo.tblDailyPowerConsumption
   union all
   select date, 'zkWhClsedAndNotOccupied' as col, kWhClosedAndNotOccupied as value
   from dbo.tblDailyPowerConsumption
   union all
   select date, 'zkWhClsedAndOccupied' as col, kWhClosedAndOccupied as value
   from dbo.tblDailyPowerConsumption
   ) src
   WHERE MONTH(date) = '12' 
   group by date) daily
on peak.date = daily.date 
```

# ios - Objective-C 双精度、长计算

> ID：14926705
> 
> 赞同：2
> 
> 时间：2013-02-17T22:13:19.993
> 
> 标签：ios, objective-c, cocoa-touch

我正在尝试计算一个 long 值除以一个整数，以给出我期望的双精度值，尽管我得到的结果是 0。我正在使用的代码......

```
double daysByYear = daysSinceBirthdayToService/365;
NSLog(@"%d", daysByYear); 
```

在此代码中，daysSinceBirthdayToService 变量是一个 Long Double，可以使用以下代码进行 NSLogged`(long)daysSinceBirthdayToService`

它在头文件中声明为

```
@property (nonatomic) NSInteger daysSinceBirthdayToService; 
```

谁能帮我解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T22:18:48.830

问题是两个多头之间的 / 将进行整数除法。

要强制进行浮点除法，至少需要将其中一个操作数强制转换为双精度。

例如

```
double daysByYear = daysSinceBirthdayToService/(double)365; 
```

或者，如果您有文字，请通过添加小数点将其变为双精度

```
double daysByYear = daysSinceBirthdayToService/365.0; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T22:17:04.967

```
double daysByYear = daysSinceBirthdayToService/365.0; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-17T22:19:59.303

可能是 %d 输出十进制数而不是双精度数吗？

# bash - 如何查看所有（包括隐藏的）子目录

> ID：14926706
> 
> 赞同：2
> 
> 时间：2013-02-17T22:13:21.277
> 
> 标签：bash, shell, unix, ls

在服务器上，当我输入时，`ls -al`我会得到一个目录列表

```
-bash-3.2$ ls -al
total 12
drwxr-xr-x  3 root root    0 Feb 13  2011 .
drwxr-xr-x  4 root root 4096 May 11  2011 ..
drwxr-xr-x 55 torg torg 4096 May 15 05:40 stuff 
```

但是我碰巧知道现在还有更多目录，因为当我输入`cd loourr`然后返回时，`cd ..`我发现自己

```
-bash-3.2$ ls -al
total 32
drwxr-xr-x  3 root root    0 Feb 13  2011 .
drwxr-xr-x  4 root root 4096 May 11  2011 ..
drwxr-xr-x 55 torg torg 4096 May 15 05:40 torg
drwxr-xr-x 108 loourr loourr 20480 Jan 29 19:48 loourr 
```

为什么是这样？我的印象是该`-a`标志显示了所有目录。什么可能导致这种情况，我如何才能显示仍未列出的目录？

**更新**：当我遵循 David Wolever 的建议时会发生什么

```
-bash-3.2$ ls
torg
-bash-3.2$ pwd
/home/room1
-bash-3.2$ cd loourr
-bash-3.2$ pwd
/home/room1/loourr
-bash-3.2$ cd ..
-bash-3.2$ ls
torg  loourr
-bash-3.2$ pwd
/home/room1 
```

当我安装

```
-bash-3.2$ mount
/dev/sda2 on / type ext3 (rw)
proc on /proc type proc (rw)
sysfs on /sys type sysfs (rw)
devpts on /dev/pts type devpts (rw,gid=5,mode=620)
/dev/sda6 on /scratch type ext3 (rw)
/dev/sda3 on /var type ext3 (rw)
/dev/sda1 on /boot type ext3 (rw)
tmpfs on /dev/shm type tmpfs (rw)
none on /proc/sys/fs/binfmt_misc type binfmt_misc (rw)
sunrpc on /var/lib/nfs/rpc_pipefs type rpc_pipefs (rw)
cartman.foo.bar:/home/room2/me on /home/room2/me type nfs (rw,addr=*.43)
cartman.foo.bar:/home/room2/admin on /home/room2/admin type nfs (rw,addr=*.43)
storage1.foo.bar:/storage/3 on /storage/3 type nfs (rw,nfsvers=3,tcp,intr,hard,addr=*.44)
cartman.foo.bar:/home/room1/torg on /home/room1/torg type nfs (rw,addr=*.43)
cartman.foo.bar:/home/room1/loourr on /home/room1/loourr type nfs (rw,addr=*.43) 
```

一些注意事项：我用 替换了服务器管理员名称，用 替换了`admin`我的帐户名，用替换了`me`服务器扩展名，`foo.bar`并且 addr= 的一部分是不变的`*`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:23:27.070

我怀疑您设置了自动安装程序。这不是目录不可见的情况，而是当您第一次尝试引用该位置时，创建了该目录并按需在该位置安装了一个远程文件系统。

在这种情况下，使用`ls -a`或任何其他选项都不会显示目录，因为它们还不存在。您的系统管理员可以在自动挂载程序上设置选项以使目录可见（可浏览），但除了通常不是默认设置之外，他们可能没有这样做是有充分理由的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:59:06.303

没有理由`ls -al`不显示`loourr`目录。

它必须是在第一次和第二次调用之间创建的`ls`，或者您可能最终进入了不同的目录。尝试这个：

```
$ ls
stuff/
$ pwd
/foo/
$ cd loourr
$ pwd
/bar/loourr/
$ cd ..
$ ls
stuff/ loourr/
$ pwd
/bar/ <-- different directory 
```

有几个不同的原因`cd`可能会将您带到不同的目录......符号链接是一个（尽管可能不是您的情况），`CDPATH`环境变量是另一个（如果您`echo $CDPATH`，您看到什么了吗？）

# clojure - 将 Clojure .clj 编译成 .class / .jar 的简单工具

> ID：14926707
> 
> 赞同：4
> 
> 时间：2013-02-17T22:13:25.037
> 
> 标签：clojure, leiningen

我发现了两种将 Clojure *.clj 文件编译成 *.class 文件的方法，虽然它们都可以工作，但我对它们都有一些不满。

第[一个](http://dynamic-thinking.blogspot.gr/2009/06/clojure-first-steps-into-compilation.html)使用 REPL，因此不能自动化（或者可以吗？）

第二[个](http://walkwithoutrhythm.net/blog/2012/03/26/how-to-call-clojure-1-dot-3-functions-from-java/)使用**lein**。坦率地说，我不明白为什么我应该为应该成为语言核心工具链一部分的东西使用依赖管理工具。但无论如何，如果您的 Clojure 代码需要访问本地 jars（很有可能） ，使用**lein**很快就会[迫使您使用本地 Maven 存储库。](http://www.pgrs.net/2011/10/30/using-local-jars-with-leiningen/)

有没有更好的方法从 Clojure 代码生成 *.class 或 *.jar 文件，只涉及核心 Clojure 工具，并且可以以脚本化、非交互方式使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:04:33.060

Clojure provides `clojure.core.Compile`, which can be used to compile Clojure code from the command-line.

`java -Dclojure.compile.path=<targetdir> -cp <targetdir>;clojure.jar <list of namespaces>`

For an example of how to use this from ant, look at the `compile-clojure` task in Clojure's own build.xml file.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T00:17:46.043

[clojure.core/compile](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/compile)可以通过 Clojure 自动化

# google-chrome-extension - 简单的 Chrome 扩展 - 通过上下文菜单选择选项卡

> ID：14926708
> 
> 赞同：2
> 
> 时间：2013-02-17T22:13:30.470
> 
> 标签：google-chrome-extension

嘿，我正在寻找一个非常简单的 Chrome 扩展程序的帮助，我想开始工作。该扩展程序应该抓取选定的文本，然后通过上下文菜单打开一个新选项卡，其 URL 如下所示：*[http ://dict.cc/?s=selectedText](http://dict.cc/?s=selectedText)*

这是我到目前为止所得到的：

清单.JSON：

```
 {  
 "name": "QuickTranslate",  
 "version": "0.1",  
 "manifest_version": 2,  
 "background": {"persistent": true, "scripts": ["bg.js"]},  
 "permissions": ["contextMenus"]  
 } 
```

据我了解，到目前为止，一切都应该没问题。仅供参考，我真的不太了解 Java Script，更不用说 Chrome 扩展了。

bg.js：

```
chrome.contextMenus.create({  
   title: "Translate '%s'",  
   contexts: ["selection"],  
   onclick: function search() {  
   chrome.tabs.create ({url: "http://dict.cc"}) },  
}); 
```

现在这就是我卡住的地方。我确定有一些（简单的？）方法可以将选定的文本添加到 url。'%s' 不起作用，至少对我不起作用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:46:10.837

`search()`以对象[*OnClickData*](http://developer.chrome.com/extensions/contextMenus.html#type-OnClickData)作为其第一个参数调用，所选文本存储在属性*selectionText*中。

这将起作用：

```
onclick: function search(OnClickData) {  
  chrome.tabs.create ({url: "http://dict.cc/?s=" + OnClickData.selectionText}) } 
```

# node.js - 会话存储在每个 http 请求上获取和设置？

> ID：14926711
> 
> 赞同：2
> 
> 时间：2013-02-17T22:13:42.013
> 
> 标签：node.js, session, redis

我正在使用带有[https://github.com/visionmedia/connect-redis](https://github.com/visionmedia/connect-redis)的 node.js 将会话变量存储在 redis 中。

我跑了`redis-cli monitor`，注意到在单个页面加载时，有 3 组`get`命令`setex`正在执行。这 3 个集合来自我的页面加载时发出的 3 个 http 请求（`favicon.ico`、`/`和`index.css`）。

我的问题：redis`get`和`setex`在每个 http 请求上运行是否正常？每对包含相同的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:35:25.157

您看到的 3 个 HTTP 获取对于 Web 应用程序来说是正常的。

您可以在 favicon.ico 上设置一个非常长的过期日期，以便浏览器只请求一次。

对于静态资产（即 CSS、JS、图像），您可以这样做或将它们放在不同的域（或子域）中

请注意，如果您在 CSS/JS 文件上设置了很长的过期日期，浏览器将不会再次请求它，并且您可能会遇到奇怪的“问题”，在其中您对 CSS/JS 文件进行更改而浏览器可能不会获取更新的文件。这是许多网站“版本”其 CSS 文件（例如，styles-2013-02-17.css）的原因之一，以便在进行更改时可以使用不同的文件名。

# jquery - 根据所选选项创建 html 链接

> ID：14926712
> 
> 赞同：0
> 
> 时间：2013-02-17T22:13:42.817
> 
> 标签：jquery, html, parameters, hyperlink

我有一个带有不同链接的菜单`jsp's`。我正在将参数发送`jsp's`到`url`

```
<li><a href="<%=GlobalData.HOME_JSP%>?p=history">History</a></li> 
```

我还有一个`select`用户可以选择设备的地方

```
<select id="device_select" >
<option value='a'>a</option>
<option value='b'>b</option>
</select> 
```

现在我正在尝试像这样向jsp发送另一个参数

```
<li><a href="<%=GlobalData.HOME_JSP%>?p=history&d=">History</a></li> 
```

新参数`d`应在选择框中选择当前值

我可以通过简单地绑定单击事件`li`然后使用简单的 jquery 脚本创建链接来做到这一点（因为我可以在 jquery 中获取选定的值）。

`a`他们有什么方法可以在标签内编写脚本吗？ - 就像是 ：

```
<li><a href="<%=GlobalData.HOME_JSP%>?p=history&d=getSelectedValueUsingSomeFunction()">History</a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:18:20.790

你可以这样做：

```
<a onclick="$(this).attr('href', '<%=GlobalData.HOME_JSP%>?p=' + $('#device_select').val());"></a> 
```

我已经用心写了这个，还没有测试过。

# javascript - 在 div 中的一个单词后附加 span

> ID：14926717
> 
> 赞同：0
> 
> 时间：2013-02-17T22:14:18.493
> 
> 标签：javascript, jquery, jquery-plugins

我有以下JS：

```
str_counter.append(config.counter.message).fadeIn();
$('<span />', {
    text: config.counter.countdown
}); 
```

config.counter.message 目前显示以下内容：'*请等待几秒钟以继续！*'。

如何在指定数量的字符之后立即附加该跨度...在此示例中：

> '请稍候' + config.counter.countdown + '秒数继续！'

但由于它是配置，我想指定 X 数量的字符......在该数量跨度之后将被附加。可能还是只是我糟糕的想象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:37:51.390

你可以在你的 html 中做这样的事情：

```
<span>Please wait <span id="js-counter"></span> seconds to proceed!</span> 
```

然后在你的 JS 中：

```
$('#js-counter').html(config.counter.countdown); 
```

# android - ADT Bundle for Mac：Eclipse 无法启动

> ID：14926721
> 
> 赞同：4
> 
> 时间：2013-02-17T22:14:36.487
> 
> 标签：android, eclipse, macos, installation, adt

[我从这里](http://developer.android.com/sdk/index.html)下载了适用于 Mac 的 Android 开发者工具包。系统要求部分说它需要“Mac OS X 10.5.8 或更高版本（仅限**x86**）”。我尝试在 adt-bundle-mac- **x86_64** /eclipse 中启动 Eclipse.app，但收到以下错误消息：

> 您无法打开应用程序 Eclipse.app，因为这种类型的 Mac 不支持它。

我有一台配备**32 位**Intel Core Duo CPU 和 Mac OS X 10.6.8 和 JRE 1.6.0_39 的 Macbook。为什么我不能从 ADT 包启动 Eclipse？[如果我从这里](http://www.eclipse.org/downloads/packages/eclipse-classic-421/junosr1)安装 Eclipse Classic 4.2.1 32-bit ，它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:49:42.797

[http://developer.android.com/sdk/index.html#download](http://developer.android.com/sdk/index.html#download)

去那里并确保您选择 32 位进行下载。那应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:37:54.253

这：

> 我有一台 32 位的 Macbook

还有这个：

> 我试图在 adt-bundle-mac-x86_64/eclipse 中启动 Eclipse.app

不要排队。根据您的描述，您似乎正在尝试在 32 位环境中使用 64 位 Eclipse。

似乎没有 32 位 OS X 版本的 ADT 包，因此您可能需要单独安装 SDK 工具和 Eclipse 而不是使用该包。

# eclipse - JAX-RS 修改项目 /tomcat

> ID：14926727
> 
> 赞同：0
> 
> 时间：2013-02-17T22:15:29.447
> 
> 标签：eclipse, tomcat, jersey, jax-rs

我在 StackOverflow 上读了很多书，但这是我的第一个问题！我已经阅读了规则，但如果我错过了什么，请多多包涵:)。如果我在我的问题中遗漏了什么，请随时告诉我。

我正在尝试学习 jax-rs，但由于我是新手，所以有点令人困惑。我正在尝试[mykong 的教程](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)，它工作正常。

我一直在 Eclipse 下工作，这是我所拥有的教程中的确切代码：

```
package com.mkyong.rest;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.core.Response;

@Path("/hello")
public class HelloWorldService {

@GET
@Path("/{param}")
public Response getMsg(@PathParam("param") String msg) {

    String output = "Jersey say : " + msg;

    return Response.status(200).entity(output).build();

}

} 
```

我一直在尝试修改该行：

`String output = "Jersey say : " + msg;`

让我们说：

`String output = "Another message : " + msg;`

当我在 Debug 中重新启动 Tomcat 时，它仍然给我“Jersey say :...”消息，即使在 Debug 中当我查看输出值时，它也给了我这个值...我必须重新发布吗？或者每次我修改源代码时删除服务器并重新配置一个？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:14:29.557

本教程可以帮助您配置它：[http ://ducquoc.wordpress.com/2010/11/06/eclipse-wtp-tomcat-hot-deploy/](http://ducquoc.wordpress.com/2010/11/06/eclipse-wtp-tomcat-hot-deploy/)

# android - 小部件上的 TextView 未使用 OnUpdate 方法更新

> ID：14926731
> 
> 赞同：1
> 
> 时间：2013-02-17T22:16:23.200
> 
> 标签：android, android-widget, broadcastreceiver, textview

我有一个使用 TextView 显示数字时钟的小部件，我希望在其中比 xml 中允许的 30 分钟更频繁地更新。我看过一些例子，但我喜欢有人帮助我解决我的具体问题。该小部件配置正确并且工作正常，但不会像它应该的那样更新，因为它是一个数字时钟。

```
 public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent clockIntent = new Intent(context, DeskClock.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                clockIntent, 0);

        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.digitalclock);
        views.setOnClickPendingIntent(R.id.gl, pendingIntent);

        java.util.Date noteTS = Calendar.getInstance().getTime();

        String time = "kk:mm";
        views.setTextViewText(R.id.tvTime, DateFormat.format(time, noteTS));

        String date = "dd MMMMM yyyy";
        views.setTextViewText(R.id.tvDate, DateFormat.format(date, noteTS));

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
} 
```

xml android:updateperiodmills 仅每 30 分钟更新一次，但我需要至少每秒更新或设置 TextView，就像我在主应用程序中使用 run 方法完成的一样。非常感谢任何帮助。谢谢

**编辑**

```
public class DigitalClock extends AppWidgetProvider {

public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {
    final int N = appWidgetIds.length;

    for (int i = 0; i < N; i++) {
        int appWidgetId = appWidgetIds[i];

        Intent clockIntent = new Intent(context, DeskClock.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                clockIntent, 0);

        final RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.digitalclock);
        views.setOnClickPendingIntent(R.id.gl, pendingIntent);

        final java.util.Date noteTS = Calendar.getInstance().getTime();
        final String time = "kk:mm";
        final String date = "dd MMMMM yyyy";

        BroadcastReceiver mBroadcastTime = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {

                views.setTextViewText(R.id.tvTime,
                        DateFormat.format(time, noteTS));

                views.setTextViewText(R.id.tvDate,
                        DateFormat.format(date, noteTS));
            }
        };

        IntentFilter mTime = new IntentFilter(Intent.ACTION_TIME_TICK);
        registerReceiver(mBroadcastTime, mTime);

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }
}

private void registerReceiver(BroadcastReceiver mBroadcastTime,
        IntentFilter mTime) {

}
} 
```

这现在是我的课，但我不得不添加这个方法：

```
 private void registerReceiver(BroadcastReceiver mBroadcastTime,
        IntentFilter mTime) {

} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:21:04.740

你必须使用`AlaramManager`来实现这个功能。

我在我的时钟小部件中以下列方式使用。

**闹铃倒计时：**

```
 class CountSecond extends CountDownTimer
        {
            public CountSecond(long millisInFuture, long countDownInterval) {
                super(millisInFuture, countDownInterval);
                // TODO Auto-generated constructor stub

                Intent intent = new Intent(ClockWidget.CLOCK_WIDGET_UPDATE);
                 intent.putExtra("theme", SelectedTheme);
                sendBroadcast(intent);
            }

            @Override
            public void onFinish() {
                // TODO Auto-generated method stub
                Log.d("CL1 Service ","--- count finish ");
                //setTimertoUpdate();

                AlarmManager alarmManager = (AlarmManager)ClockWidgetSetting.this.getSystemService(Context.ALARM_SERVICE);
                Calendar calendar = Calendar.getInstance();
                calendar.setTimeInMillis(System.currentTimeMillis());
                //calendar.add(Calendar.MINUTE, 1);
                alarmManager.setRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), 60000, createClockTickIntent(ClockWidgetSetting.this));
                //finish();

            }

            @Override
            public void onTick(long millisUntilFinished) {
                // TODO Auto-generated method stub
            }

        } 
```

小部件的调用意图`appwidgetprovider`如下。这样`onUpdate()`小部件的就会被调用。

```
 private PendingIntent createClockTickIntent(Context context) {
            Intent intent = new Intent(ClockWidget.CLOCK_WIDGET_UPDATE);
            intent.putExtra("theme", SelectedTheme);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT);
            return pendingIntent;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:22:30.067

您可以注册一个[`BroadcastReceiver`](http://developer.android.com/reference/android/content/BroadcastReceiver.html)并监听该[`ACTION_TIME_TICK`](http://developer.android.com/reference/android/content/Intent.html)操作。

这将每分钟调用一次。

```
BroadcastReceiver mBroadcastTime = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            // Change the time on your widget
        }
    };

IntentFilter mTime = new IntentFilter(Intent.ACTION_TIME_TICK);
registerReceiver(mBroadcastTime, mTime); 
```

# c++ - 如何创建与当前投影矩阵匹配的 glClipPlanes？

> ID：14926732
> 
> 赞同：1
> 
> 时间：2013-02-17T22:16:37.623
> 
> 标签：c++, opengl, clipping, clip, projection-matrix

我正在渲染空间中的一组点，用户手动旋转、平移、缩放并最终在所需部分上绘制了一个选择矩形。当他们这样做时，我调用`gluPickMatrix`然后`gluPerspective`构造投影矩阵，然后使用`GL_SELECT`渲染模式在他们选择的区域中找到点。

我只想显示所选区域中的点。对于测试每个点都有一个 boolean `isSelected`，我知道选择有效，因为选择了正确的点。但是，这有太多的点不可行，所以我想用它来构造四个与用户选择矩形定义的矩形棱镜（*编辑：我的意思是截头锥体*`glClipPlane`）相对应的平面。设置投影矩阵后如何导出要传递的系数？*`glClipPlane`*

 *现在我正在这样做，但它最终会剪掉所有的点：

```
// Set up projection matrix
int viewport[4];
glGetIntegerv(GL_VIEWPORT, viewport);
gluPickMatrix(x, y, w, h, viewport);
gluPerspective(FOV_Y, ASPECT_RATIO, NEAR_PLANE, FAR_PLANE);

// Derive clip planes - this doesn't work
// Based on the paper "Fast Extraction of Viewing Frustum Planes from the World-View-Projection Matrix"
// http://graphics.cs.ucf.edu/cap4720/fall2008/plane_extraction.pdf
double t[4], r[4], b[4], l[4];
double m[16];
glGetDoublev(GL_PROJECTION_MATRIX, m);
t[0] = m[3] - m[1]; t[1] = m[7] - m[5]; t[2] = m[11] - m[9]; t[3] = m[15] - m[13];
r[0] = m[3] - m[0]; r[1] = m[7] - m[4]; r[2] = m[11] - m[8]; r[3] = m[15] - m[12];
b[0] = m[3] + m[1]; b[1] = m[7] + m[5]; b[2] = m[11] + m[9]; b[3] = m[15] + m[13];
l[0] = m[3] + m[0]; l[1] = m[7] + m[4]; l[2] = m[11] + m[8]; l[3] = m[15] + m[12];

// ... Render points in GL_SELECT mode, then go back to GL_RENDER mode ...

glMatrixMode(GL_MODELVIEW);
glLoadIdentity();
// ... Apply user's pan/rotate/zoom choices here ...
// Apply clip planes
glEnable(GL_CLIP_PLANE0);
glClipPlane(GL_CLIP_PLANE0, t);
glEnable(GL_CLIP_PLANE1);
glClipPlane(GL_CLIP_PLANE1, r);
glEnable(GL_CLIP_PLANE2);
glClipPlane(GL_CLIP_PLANE2, b);
glEnable(GL_CLIP_PLANE3);
glClipPlane(GL_CLIP_PLANE3, l); 
```

我还尝试过规范化和/或否定平面坐标，这似乎最终还是会剪掉所有的点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T04:39:44.417

仔细阅读那篇论文后，我发现了问题所在。我没有考虑模型视图矩阵。

这个：

```
double m[16];
glGetDoublev(GL_PROJECTION_MATRIX, m);
// ... derive t, r, b, and l from m 
```

应该是这样的：

```
double vm[16], pm[16], m[16];
glGetDoublev(GL_MODELVIEW_MATRIX, vm);
glGetDoublev(GL_PROJECTION_MATRIX, pm);
matrix_mul(vm, pm, m); // m = vm * pm
// ... derive t, r, b, and l from m 
```*

# c# - 实体数学无法识别方法“Double Acos(Double)”

> ID：14926737
> 
> 赞同：0
> 
> 时间：2013-02-17T22:17:07.600
> 
> 标签：c#, asp.net-mvc-3, linq, floating-point

我有这个实体代码给我带来了问题，在我加载页面然后错误提示之前它不会给出错误。 **LINQ to Entities 无法识别方法 'Double Acos(Double)' 方法，并且此方法无法转换为存储表达式** 我正在使用 hasrsine 函数来获取点的半径，我知道 Math 返回**Double**这就是为什么我已经投了它，我必须使用浮点数作为 CSV 文件的唯一格式，我该如何纠正上述错误？

```
 var ste = (from s in db.zipss where Math.Acos(Math.Sin(28.46348)
 * Math.Sin((float)s.latitude) + Math.Cos(28.46348) * Math.Cos((float)s.longitude - 
(-81.3881))) * 3960 <= 5 select s.zipcode).FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:00:19.190

对于 LINQ to Entities，无法翻译表达式。由于没有提出其他解决方案，我想您总是可以在内存中进行查询，即转到 LINQ to Objects，如下所示：

```
var ste = (from s in db.zipss.AsEnumerable()  // note AsEnumerable
           where Math.Acos(Math.Sin(28.46348) * Math.Sin((float)s.latitude)
               + Math.Cos(28.46348) * Math.Cos((float)s.longitude - (-81.3881)))
               * 3960 <= 5
           select s.zipcode).FirstOrDefault(); 
```

我不知道这是否会太慢而无法实用。我不知道演员表`float`。也许您可以省略它们（如果`.latitude`并且`.longitude`已经是`float`， a`float`可以隐式提升为 a `double`）。

# java - 排序链表的基于数组的实现

> ID：14926738
> 
> 赞同：4
> 
> 时间：2013-02-17T22:17:12.827
> 
> 标签：java

我需要编写一个需要基于数组和排序的java链表。因此数组包含具有 2 个字段的节点：数据和列表中下一个元素的索引。列表的最后一个元素的索引必须为 -1。

有人可以帮助如何将元素添加到此类列表中。这是我到目前为止编写的代码，但似乎不正确，因为我可以添加元素但索引不正确。

```
package listpackage;

import java.io.IOException;

public class ArrayLL {
    private int MAX_CAP = 100;
    private ANode[] list;
    private int size;

    public ArrayLL(){
        list = new ANode[MAX_CAP];
        list[list.length-1] = new ANode(null, -1);
        for(int i = 0; i < list.length-1; i++){
            list[i] = new ANode(null, i+1);
        }
        size = 0;
    }

    public void addElem(String s) throws IOException{
        if(this.getSize() == 0){
            ANode a = new ANode(s, -1);
            list[0] = a;
        }else if(size == MAX_CAP + 1){
            throw new IOException("List is full");
        }else{
            int index = 0;
            for(int i=0; i < list.length; i++){
                if(list[i].getData() == null){
                    index = i;
                    break;
                }
            }
            ANode b = new ANode(s);
            list[index] = b;
            if(this.getSize()==1){
                if (list[index].getData().compareTo(list[0].getData()) < 0){
                    list[index].setLink(0);
                    list[0].setLink(-1);
                }else{
                    list[index].setLink(-1);
                    list[0].setLink(index);
                }
            }else{
                int i = 0;
                while(list[i].getData() != null){
                    if(list[index].getData().compareTo(list[i].getData()) < 0){
                        list[index].setLink(i);
                        if(i>0)
                            list[i-1].setLink(index);
                    }else{
                        i++;
                    }
                }
            }
        }
        size++;
    }

    public ANode[] getList(){
        return list;
    }

    public int getSize(){
        return size;
    }

}

class ANode{
    private String data;
    private int link;

    public ANode(String d){
        data = d;
        link = -1;
    }

    public ANode(String d, int l){
        data =  d;
        link = l;
    }

    public String getData(){
        return data;
    }

    public int getLink(){
        return link;
    }

    public void setLink(int l){
        link = l;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:05:43.273

解决这个棘手的程序很有趣...:-)...我很喜欢...这是可行的解决方案...我使用各种场景进行了测试...

为了确保我不会更改您的大部分代码...我没有优化代码..有很多地方代码可以更简单和可读...

```
import java.io.IOException;

public class ArrayLL {

    public static void main(String[] args) throws IOException {
        ArrayLL myList  = new ArrayLL();
        myList.addElem("c");
        myList.addElem("b");
        myList.addElem("a");
        myList.addElem("d");
        int i = myList.startOfListIndex;
        while(myList.list[i].getLink()!=-1)
        {
            System.out.println(myList.list[i].getData());
            i = myList.list[i].getLink();
        }
        System.out.println(myList.list[i].getData());
    }

    private int MAX_CAP = 100;
    private ANode[] list;
    private int size;
    private int startOfListIndex = 0;

    public ArrayLL() {
        list = new ANode[MAX_CAP];
        for (int i = 0; i < list.length; i++) {
            list[i] = new ANode(null);
        }
        size = 0;
    }

    public void addElem(String s) throws IOException {
        if (this.getSize() == 0) {
            ANode a = new ANode(s, -1);
            list[0] = a;
        } else if (size == MAX_CAP + 1) {
            throw new IOException("List is full");
        } else {
            int index = 0;
            for (int i = 0; i < list.length; i++) {
                if (list[i].getData() == null) {
                    index = i;
                    break;
                }
            }
            ANode b = new ANode(s);
            list[index] = b;
            if (this.getSize() == 1) {
                if (list[index].getData().compareTo(list[0].getData()) < 0) {
                    list[index].setLink(0);
                    list[0].setLink(-1);
                    startOfListIndex = index;
                } else {
                    list[index].setLink(-1);
                    list[0].setLink(index);
                }
            } else {
                int i = startOfListIndex;
                int prevIndex = -1;
                while (i!=-1 && list[i].getData() != null) {
                    if (list[index].getData().compareTo(list[i].getData()) < 0) {
                        list[index].setLink(i);
                        if(prevIndex!=-1)
                            list[prevIndex].setLink(index);
                        else
                            startOfListIndex = index;
                        break;
                    } else {
                        prevIndex = i;
                        i=list[i].getLink();
                    }
                }
                if(i==-1)
                {
                    list[prevIndex].setLink(index);
                }
            }
        }
        size++;
    }

    public ANode[] getList() {
        return list;
    }

    public int getSize() {
        return size;
    }

}

class ANode {
    private String data;
    private int link;

    public ANode(String d) {
        data = d;
        link = -1;
    }

    public ANode(String d, int l) {
        data = d;
        link = l;
    }

    public String getData() {
        return data;
    }

    public int getLink() {
        return link;
    }

    public void setLink(int l) {
        link = l;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:56:34.643

这是我认为的完整解决方案，因为它适用于我所做的所有测试，但可能有一些我没有想到的东西。该解决方案也包括 removeElem() 方法。

```
package listpackage;

import java.io.IOException;

public class ArrayLL {
private int MAX_CAP = 100;
private ANode[] list;
private int size;
private int startOfListIndex = 0;

public ArrayLL() {
    list = new ANode[MAX_CAP];
    list[list.length-1] = new ANode(null, -1);
    for(int i = 0; i < list.length-1; i++){
        list[i] = new ANode(null, i+1);
    }
    size = 0;
}

public void addElem(String s) throws IOException {
    if (this.getSize() == 0) {
        ANode a = new ANode(s, -1);
        list[0] = a;
    }else if (size == MAX_CAP + 1) {
        throw new IOException("List is full");
    }else{
        int index = 0;
        for (int i = 0; i < list.length; i++) {
            if (list[i].getData() == null) {
                index = i;
                break;
            }
        }
        ANode b = new ANode(s);
        list[index] = b;
        if (this.getSize() == 1) {
            if (list[index].getData().compareTo(list[0].getData()) < 0) {
                list[index].setLink(0);
                list[0].setLink(-1);
                startOfListIndex = index;
            } else {
                list[index].setLink(-1);
                list[0].setLink(index);
            }
        } else {
            int i = startOfListIndex;
            int prevIndex = -1;
            while (i!=-1 && list[i].getData() != null) {
                if (list[index].getData().compareTo(list[i].getData()) < 0) {
                    list[index].setLink(i);
                    if(prevIndex!=-1)
                        list[prevIndex].setLink(index);
                    else
                        startOfListIndex = index;
                    break;
                }else{
                    prevIndex = i;
                    i=list[i].getLink();
                }
            }
            if(i==-1)
            {
                list[prevIndex].setLink(index);
            }
        }
    }
    size++;
}

public void removeElem(String s) throws IOException {
    if (this.getSize() == 0) {
        throw new IOException("List is empty");
    }else{
        int firstEmpty = 0;
        for(int i = 0; i< list.length; i++){
            if(list[i].getData() == null){
                firstEmpty = i;
                break;
            }
        }
        int elemindex = 0;
        int prev = -1;
        int next=-1;
        for(int i = 0; i < list.length; i++){
            if(list[i].getData() != null && list[i].getData().compareTo(s) == 0){
                elemindex = i;
                next = list[i].getLink(); 
                for(int j = 0; j < list.length; j++){
                    if(list[j].getLink() == elemindex){
                        prev = j;
                        break;
                    }
                }
                list[elemindex].setDataNull();
                list[elemindex].setLink(firstEmpty);
                if(next != -1)
                    list[prev].setLink(next);
                else
                    list[prev].setLink(-1);
                size--;
            }else{
                elemindex++;
            }
        }
    }
}

public ANode[] getList() {
    return list;
}

public int getSize() {
    return size;
}

}

class ANode {
private String data;
private int link;

public ANode(String d) {
    data = d;
    link = -1;
}

public ANode(String d, int l) {
    data = d;
    link = l;
}

public String getData() {
    return data;
}
public void setDataNull(){
    this.data = null;
}

public int getLink() {
    return link;
}

public void setLink(int l) {
    link = l;
}
} 
```

# image - 图像相对和绝对路径以及 .htaccess

> ID：14926740
> 
> 赞同：1
> 
> 时间：2013-02-17T22:17:14.813
> 
> 标签：image, .htaccess, codeigniter, relative-path, absolute-path

大家好，

我在 Codeigneter 中玩耍并尝试制作某种相册只是为了好玩（在我真正开始之前更好地了解 codeigneter）。

现在我在这里建立了一个测试网站：http: [//foal.scriptsenprogs.nl/](http://foal.scriptsenprogs.nl/)

现在的问题是用户将来可以上传图像。我希望该图像是某种保存...

因此，如果有人使用此链接： http: [//foal.scriptsenprogs.nl/media/img/albums/1.png](http://foal.scriptsenprogs.nl/media/img/albums/1.png)

它应该被阻止（就像现在一样）。

我在`/media/img/albums`文件夹中的 .htacces 文件中有这行代码

```
<Directory "http://foal.scriptsenprogs.nl/media/img/albums" >
    Options Includes
    AllowOverride All
    Order allow,deny
    Deny from All
</Directory> 
```

我必须承认我对 .htaccess 文件知之甚少，但这似乎有效（直接 url 被阻止）。

在我的 codeIgneter 代码中，我使用它向网页添加图像：

```
$str .= '<div style="margin-top:20px;"><img width="200px" src="./media/img/albums/' . $imageStuff[$row['album_id']] -> img_id . '.' . $imageStuff[$row['album_id']] -> img_type . '" /></div>'; 
```

在 .htaccess 文件之前，它起作用了。但现在它不起作用。

如果我检查 chromes 错误控制台，我会看到此错误：

```
GET http://foal.scriptsenprogs.nl/media/img/albums/1.png 404 (Not Found) foal.scriptsenprogs.nl:48 
```

所以`404 Not Found`这是一个错误。但是，如果您检查 URL，您会发现它被赋予了绝对 URL？但是我插入了一个相对 URL 对吗？

你们对如何解决这个问题有什么想法吗？

**编辑 1** 在子域的 de webroot 中，我有以下 .htaccess 文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|school|media|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

**编辑2** 为了澄清这个问题更多......

如果您在网站 ( [http://foal.scriptsenprogs.nl/](http://foal.scriptsenprogs.nl/) ) 上，则必须使用相对路径来显示图像。（像这样`<img width="200px" src="./media/img/albums/1.png" />`：）

但是，如果您尝试通过绝对路径访问图像，则必须阻止它（链接将是这样的：http: [//foal.scriptsenprogs.nl/media/img/albums/1.png](http://foal.scriptsenprogs.nl/media/img/albums/1.png)）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:52:00.323

您可以向现有`webroot/.htaccess`文件添加新规则。

将以下内容`RewriteEngine On`放在文件顶部的行之后。

```
RewriteCond %{HTTP_REFERER} !^http://(.+\.)?yoursite\.com/ [NC]
RewriteCond %{HTTP_REFERER} !^$
RewriteRule .*\.(jpe?g|gif|bmp|png|jpg)$ /404.html [L] 
```

这限制了对域[http://yoursite.com](http://yoursite.com)的任何 jpg、gif 等的访问，其他请求被重定向到 404 页面。

注意：如果您在本地服务器上对此进行测试，您将与您的站点在同一个域中，因此很可能看起来什么都没有发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:57:00.933

有时 CI 和相对 url 不能很好地结合在一起，尝试使用 base_url 函数

```
'src="'.base_url().'media/img/albums/' 
```

# php - 语法中的未知错误

> ID：14926749
> 
> 赞同：-4
> 
> 时间：2013-02-17T22:18:23.860
> 
> 标签：php

在解析时使用 PHP 中的 OOP 脚本时，我得到一个我知道不应该存在的语法错误。语法很完美。

```
class Organism
 {
  private $ex = array(0=>"Hello",1=>"world!");
  public $ex2 = array_rand($ex,1);
 } 
```

给我的错误

> 解析错误：语法错误，意外的 '('，期待 ',' 或 ';'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:20:57.767

在 PHP 中，您必须实现构造函数并在那里为变量分配默认值。

```
private $ex = array(0=>"Hello",1=>"world!"); // Will work (not a function/not dynamic)

public $ex2 = array_rand($ex,1);  //A function call won't work 
```

解决方案：

```
class Organism
 {
    private $ex = array(0=>"Hello",1=>"world!");
    public $ex2 ;

    public function __construct(){
      $this->ex2 = array_rand($this->ex,1);
    }
 } 
```

# java - 使用 Guice 注入时如何正确处理 Java 中的长期 MySQL 连接？

> ID：14926756
> 
> 赞同：0
> 
> 时间：2013-02-17T22:19:38.417
> 
> 标签：java, mysql, jdbc, connection-pooling, guice

我讨厌提出似乎在线上有很多解决方案的问题，但我们似乎真的找不到任何有效的最佳实践解决方案来解决我们的案例，因此觉得我们别无选择。

我们正在构建一个 RESTful 服务器应用程序，其中使用间隔可能从几个小时到几个月不等。

服务器由 Jetty 托管。我们没有使用任何 ORM，但应用程序分为三层（WebService-、业务-和数据层）。数据层存在通过 Guice 框架注入的**一个类。**JDBC（MySQL 连接）在此类的构造函数中实例化。[起初，在我们了解 Guice 默认情况下会在每个请求（ ref](http://code.google.com/p/google-guice/wiki/Scopes)）上创建一个新实例之前，我们遇到了太多的连接问题。为了摆脱这个问题，并且因为我们的数据层类是有状态的，我们将类注入为 Singleton。

现在我们已经预见到，当我们的 REST 应用程序有一段时间没有使用时，我们可能会遇到麻烦，因为连接会超时，并且不会实例化新的连接，因为构造函数只会被调用一次。

我们现在有多种解决方案，但我们似乎无法找出解决这个问题的最佳方法，因为它们似乎都不是那么好。对其他解决方案的任何输入或建议将不胜感激。

**1.延长配置的mysql超时间隔** 我们真的不想要这个，因为我们认为这真的不是最佳实践。我们当然不应该有任何泄漏的连接对象，但如果我们有，它们将填满可用连接的空闲空间。

**2\. 在每个方法的开头实例化一个新的连接，并在最后关闭它** 据我们了解，这根本不是最佳实践，因为它会导致很多开销，应该尽可能避免吗？

**3\. 将注入改回“per-request”，并在每个方法结束时关闭池** 这将比＃2 更糟糕，因为我们不仅要实例化一个新连接，还要在每个方法上实例化一个新对象要求？

**4\. 在每个方法开始时检查连接的状态，如果它关闭则实例化一个新连接** 一个例子是ping（[example](https://stackoverflow.com/questions/4569956/ping-a-mysql-server)）mysql，如果它抛出异常则实例化一个新连接。这会起作用，但会产生一些开销。关于这个输入是否真的会对性能产生任何影响的任何想法？

**5\. 显式捕获方法中抛出的任何异常，表明连接已关闭，如果是这样 - 实例化一个新连接** 这样，我们将摆脱 ping 开销，但它会使我们的代码显着复杂化，就像我们会做的那样找出一种方法来确保如果连接已经存在，这些方法将返回它们将返回的内容。

**6\. 使用连接池** 我们不熟悉连接池，除了使用应用服务器（例如 Glassfish）。我们也想知道这是否真的能解决我们的问题？如果是这样; 关于为我们提供连接池的任何框架有什么建议吗？[在这里](http://dev.mysql.com/tech-resources/articles/connection_pooling_with_connectorj.html)，他们建议将 PLUS 与 Jetty 一起使用。

请问有什么不清楚的地方。我可能忘记添加一些重要信息。这对我来说更像是一个设计问题，但如果有人认为这会有所帮助，我很乐意提供任何代码。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:26:46.447

连接池是要走的路。
它们有许多优点：

1.  他们为您检查您的连接 - 这涉及超时
2.  他们控制连接数
3.  完成后您可以简单地关闭连接 - 您不需要保留参考

你当然应该在某种池中保持连接，事实上，如果你不咬紧牙关，你几乎肯定最终会自己写一个。当您实施连接检查以使其不会过时时，某种连接持有者使您无需每次都重新打开它们，某种异常处理代码...您明白我的意思.
我使用过[dbcp](http://commons.apache.org/dbcp/)和[boneCP](http://jolbox.com/)，它们都非常易于使用和配置，可以为您节省数小时处理 JDBC 连接问题的挫败感。
我对 Guice 并不太熟悉，但我认为它有一些方法可以为 Object 提供您自己的工厂方法，因此您可以使用它从池中获取连接，然后进行简单调用`close()`当你完成将它们放回游泳池时。
如果您使用的是网络服务器，您始终可以使用`interceptor`或`filter`将连接绑定到工作线程并在处理后丢弃它们，在这种情况下，您的连接提供者只需要拉出与当前线程相关联的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:22:14.667

而是注入 a`Provider<Connection>`并让提供者从可以检测过时条目的连接池中发出连接（编辑：在您需要时）。

应该从池中丢弃未返回的连接。

# mysql - 从年份范围中选择数字

> ID：14926760
> 
> 赞同：1
> 
> 时间：2013-02-17T22:20:16.147
> 
> 标签：mysql, sql, database, sqlite

我正在尝试执行如下表的 SQL 查询：

```
 id         in_year     out_year 
  -------    ----------  -------------
     1          2001        2002 
     2          2002        2002 
     3          2004        2007 
```

可以查询，以便我将该范围内的所有年份映射到 id。例如，我想得到：

```
 id         year 
 ---------   ---------
     1          2001
     1          2002
     2          2002
     3          2004
     3          2005
     3          2006 
     3          2007 
```

具体来说，假设该表代表一个商店，其中包含元素及其到达商店和销售日期。该查询将返回映射到它们在商店中的年份的所有元素 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:53:53.203

您可以使用数据范围内的年份构建一个临时表，即

```
CREATE TABLE tmp_years (
 yr YEAR NOT NULL,
 PRIMARY KEY (yr)
) ENGINE=INNODB;

INSERT INTO tmp_years (yr) VALUES (2000), (2001), (2002), (2003), (2004), (2005), (2006), (2007); 
```

然后做一个JOIN：

```
SELECT w.id, y.yr FROM wesams_table w 
INNER JOIN tmp_years y ON (y.yr >= w.in_year AND y.yr <= w.out_year); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:11:25.993

最整洁的解决方案是创建一个 UDF 来返回年份范围并使用 CROSS APPLY。

性能应该相当好，因为 UDF 将是确定性的

编辑：对不起，我认为这不适用于 MySQL。

# c++ - C++ 内存分配。矩阵

> ID：14926763
> 
> 赞同：0
> 
> 时间：2013-02-17T22:20:29.447
> 
> 标签：c++, memory, dynamic, matrix, allocation

我研究了两种不同的方法来为矩阵的元素分配内存

方法 n.1

```
int** matrix = new int*[rows];
for (int i = 0; i < rows; ++i)
    matrix[i] = new int[cols]; 
```

方法 n.2

```
int** matrix = new int*[rows];
if (rows)
{
    matrix[0] = new int[rows * cols];
    for (int i = 1; i < rows; ++i)
        matrix[i] = matrix[0] + i * cols;
} 
```

我可以弄清楚方法 n.1 做了什么，但我无法弄清楚方法 n.2 中的 if 子句到底应该做什么（我会在没有 if 子句的情况下实现它并且它不起作用，它确实...）

编辑：这是显示我的问题的代码。为什么加载需要这么长时间（约 30 秒）？

[http://codepad.org/uKvI8Tk3](http://codepad.org/uKvI8Tk3)

Codepad 拒绝显示输出（超时），所以如果你想运行它，只需自己编译它。

另外，为什么程序启动后不执行 cout << 语句？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T22:22:58.663

方法 n.3：编写自己的 Matrix 类，在内部使用单个`std::vector<int>`并且巧妙地通过 (row,col) 索引进行访问。

```
struct Matrix
{
  explicit Matrix(unsigned int rows, unsigned int cols) : data_(rows*cols), cols_(cols) {}
  const int& operator()(unsigned int row, unsigned int col) const
  {
    return data_[row*cols_ + col];
  }
 private:
  std::vector<int> data_;
  unsigned int cols_;
}; 
```

编辑：**如果**在最后一个示例中向量的内存开销是一个问题，您可以考虑使用单个动态分配的 length 数组`rows*cols`，并确保`delete []`在析构函数中调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:30:24.697

方法 n.2 分配一个唯一的块来包含所有行的序列。因此第一行是指向整个块的指针。如果 rows==0 你没有空间来保存指向（空）空间的指针，所以你不能进行分配。

我会转向另一个答案中建议的方法4：

```
class Matrix {
   Matrix(int rows, int cols): rows_(rows), cols_(cols) {
      data_ = new int[rows*cols];
   }

   ~Matrix() {
       delete[] data_;
   }

   int &operator()(int i,int j) {return data_[cols_*i+j];}

   int operator()(int i,int j) const {return data_[cols_*i+j];}

 private:
   int rows_,cols_;
   int *data_;
}; 
```

# batch-file - 批处理更改了 vbs 代码，使其无法被 vbs 使用

> ID：14926767
> 
> 赞同：2
> 
> 时间：2013-02-17T22:21:06.050
> 
> 标签：batch-file, vbscript

批处理更改了 vbs 代码，使其无法被 vbs 使用。我该如何解决？

批号：

```
echo Const HIGH = 128 >> prio.vbs
echo strComputer = "." >> prio.vbs
echo Set objWMIService = GetObject("winmgmts:" _ >> prio.vbs
echo    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2") >> prio.vbs
echo Set colProcesses = objWMIService.ExecQuery _ >> prio.vbs
echo    ("Select * from Win32_Process Where Name = 'file.exe'") >> prio.vbs
echo For Each objProcess in colProcesses >> prio.vbs
echo    objProcess.SetPriority(HIGH)  >> prio.vbs
echo Next >> prio.vbs 
```

VBS 原版：

```
Const HIGH = 128
strComputer = "."
Set objWMIService = GetObject("winmgmts:" _
    & "{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2")
Set colProcesses = objWMIService.ExecQuery _
    ("Select * from Win32_Process Where Name = 'file.exe'")
For Each objProcess in colProcesses
    objProcess.SetPriority(HIGH) 
Next 
```

VBS 之后：

```
Const HIGH = 128 
strComputer = "." 
Set objWMIService = GetObject("winmgmts:" _ 
Set colProcesses = objWMIService.ExecQuery _ 
   ("Select * from Win32_Process Where Name = 'file.exe'") 
For Each objProcess in colProcesses 
   objProcess.SetPriority(HIGH)  
Next 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:09:44.423

`&`字符在 (command-chaining) 中具有特殊含义`CMD`，因此您必须对它们进行转义以获得文字 & 符号：

```
echo    ^& "{impersonationLevel=impersonate}!\\" ^& strComputer ^& "\root\cimv2") >> prio.vbs 
```

右括号 ')' 和 '<', '>' 也是如此

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-28T21:19:37.317

如果您可以使用 bat 混合格式保存 vbs 代码，您不需要创建另一个文件，也不需要任何转义：

```
<!-- :
@echo off && mode 050,03 && title <nul && title .\%~nx0 
for /f ^tokens^=* %%i in ('%__APPDIR__%wScript.exe "%~dpnx0?.wsf" ^& cls')do exit /b 2>nul >nul
--> <job> <script language = "vbscript">Const HIGH = 128 : strComputer = ".": Set objWMIService = GetObject("winmgmts:" &_
"{impersonationLevel=impersonate}!\\" & strComputer & "\root\cimv2"): Set colProcesses = objWMIService.ExecQuery ("Select *"&_
"from Win32_Process Where Name = 'file.exe'"): For Each objProcess in colProcesses: objProcess.SetPriority(HIGH): Next </script></job> 
```

所以，不需要任何转义，只需在命令行中执行或单击即可！

关于布局：

* * *

```
<!-- :
@echo off && mode 050,03 && title <nul && title .\%~nx0 
for /f ^tokens^=* %%i in ('%__APPDIR__%wScript.exe "%~dpnx0?.wsf" ^& cls')do exit /b 2>nul >nul
--> <job> <script language = "vbscript">

:: your vbs code here ::

</script></job> 
```

# java - 删除由 JSTL 标记生成的新行

> ID：14926768
> 
> 赞同：1
> 
> 时间：2013-02-17T22:21:07.940
> 
> 标签：java, jsp, jstl, newline

我想建立到 src 属性的链接，这取决于一些参数

```
<%@page trimDirectiveWhitespaces="true" %>
...
<iframe style="border: 0; width: 100%; height: 100%;"
    src="http://localhost:8080/AppName?
<c:if test="${not empty it.paramOne}">
    paramOne=${it.paramOne}
</c:if>
<c:if test="${not empty it.paramTwo}">
    &paramTwo=${it.paramTwo}
</c:if>
<c:if test="${not empty it.paramThree}">
    &paramThree=${it.paramThree}
</c:if>
">
Your browser doesn't support iFrames. </iframe> 
```

上面的代码，生成如下html

```
<iframe style="border: 0; width: 100%; height: 100%;" src="http://localhost:8080/AppName?

paramOne=val1
&amp;paramTwo=val2
&amp;paramThree=val3
">
    Your browser doesn't support iFrames. </iframe> 
```

链接看起来

```
http://localhost:8080/AppName/?%20%20%20%20%20%20paramOne=val1%20%20%20&paramTwo=val2%20%20%20&paramThree=val3 
```

但我想得到

```
http://localhost:8080/AppName/?paramOne=val1&paramTwo=val2&paramThree=val3 
```

我找到了这个[http://flgor.blogspot.com/2011/07/jsp-new-line.html](http://flgor.blogspot.com/2011/07/jsp-new-line.html)但我认为这不是我想要的。

那么如何摆脱 JSTL 标签生成的空格和换行符呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:06:56.617

尝试将所有内容放在一行中：

```
<c:set var="url" value="http://localhost:8080/AppName?"/>

<c:if test="${not empty it.paramOne}">
    <c:set var="url" value="${url}paramOne=${it.paramOne}"
</c:if>
<c:if test="${not empty it.paramTwo}">
    <c:set var="url" value="${url}&paramTwo=${it.paramTwo}"
</c:if>
<c:if test="${not empty it.paramThree}">
    <c:set var="url" value="${url}&paramThree=${it.paramThree}"
</c:if>

<iframe style="border: 0; width: 100%; height: 100%;"
    src="${url}"> 
```

# matlab - 使用 MATLAB 随机划分矩阵

> ID：14926769
> 
> 赞同：2
> 
> 时间：2013-02-17T22:21:13.920
> 
> 标签：matlab, partitioning

我有一个 130 x 2 的数据矩阵。使用 MATLAB，我想将行*随机*划分为 7 个大小大致相等的集合。

谷歌搜索给我的印象是 cvpartition 命令可以解决问题，但我一辈子都无法让它工作。我会很感激一些指导。我对 MATLAB 完全陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:41:53.453

创建一个随机索引向量：`I = randperm(130);`因为`130 = 3 * 18 + 4 * 19`，分区看起来像

```
P1 = A(I(  1: 18), :);
P2 = A(I( 19: 36), :);
P3 = A(I( 37: 54), :);
P4 = A(I( 55: 73), :);
P5 = A(I( 74: 92), :);
P6 = A(I( 93:111), :);
P7 = A(I(112:130), :); 
```

其中`A`表示包含要划分的数据的矩阵。

# facebook - Facebook 注册页面 - 未登录 Facebook 时“client_id”无效

> ID：14926770
> 
> 赞同：2
> 
> 时间：2013-02-17T22:21:15.957
> 
> 标签：facebook, facebook-javascript-sdk

我已经制作了一个 Facebook 注册表单，它可以与我期望的自定义​​字段和功能一起使用，除非用户在第一次访问该表单时**没有登录到 Facebook。**

在这种情况下，表单不会在屏幕上呈现，并且会出现以下错误：

> 无法加载此 ID 的注册表单。您之前可能在 Facebook 上屏蔽了此应用。转到您的 Facebook 隐私设置以取消阻止此应用。（错误：'client_id' 无效。）

现在我已经知道这已经在网站上讨论过了，但是其他地方提供的解决方案对我不起作用，我真的希望它能够基于 facebook 支持的 XFBML 解决方案工作（这里有一个演示[http://developers.facebook .com/docs/plugins/registration/](http://developers.facebook.com/docs/plugins/registration/)）

如果您注销 facebook，您可以访问我的代码测试，直接取自 facebook 示例，在这里几乎没有修改：[https ://www.askanutritionist.com/fb.html](https://www.askanutritionist.com/fb.html)

顺便说一句，是的，在 facebook 应用程序设置中禁用了沙箱，因为这是 SO 上其他人建议的常见修复。

谢谢你的时间。笔记; 我会评论这个主题的其他现有问题，但 stackoverflow 不会让我（还）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:13:23.897

检查您正在使用其 ID 的应用程序是否不受人口统计限制（例如，按年龄或国家/地区），并且它是否仍处于沙盒模式。

如果它受到限制或处于沙盒模式，则未登录且符合应用限制的用户（或对于沙盒模式，是应用程序的管理员）在登录之前无法看到应用程序的存在或其详细信息.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T09:43:06.627

只是为了确认; 我从来没有真正正确地解决过这个问题。相反，我做了一个解决方法，并能够通过 facebook sdk 进行 javascript 检查，以查看用户在第一次点击具有 facebook 注册表单的页面时是否已登录。

如果他们未登录（或未授权）并且如果他们稍后在页面中登录，我会执行 http 重定向，我会调用以初始化 facebook 表单。

```
window.fbAsyncInit = function() {
FB.init({
    appId      : xxxx, // App ID
    channelUrl : 'http:///xxxxx/fbchannel.php', 
    status     : true, // check login status
    cookie     : true, // enable cookies to allow the server to access the session
    xfbml      : true  // parse XFBML
});

// Additional initialization code here
FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
        // all ok!
        //var uid = response.authResponse.userID;
        //var accessToken = response.authResponse.accessToken;
    } else if (response.status === 'not_authorized') {
        window.location.href="create_account_with_facebook?authorizefirst";
    } else {
        window.location.href="create_account_with_facebook?loginfirst";
    }
});
};
// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
 }(document)); 
```

# actionscript-3 - 逆运动学问题

> ID：14926772
> 
> 赞同：1
> 
> 时间：2013-02-17T22:21:53.807
> 
> 标签：actionscript-3, flash, inverse-kinematics

我有逆运动学的问题。我无法移动触手，我不知道为什么。我实现了许多简单的骨架并成功了，但在这种情况下，一定有我遗漏的东西。希望你能帮我！

这里有详细的解释：

1.- 此图像显示我要移动的触手。*“Flup”是一个包含触手和下方圆圈的影片剪辑。*触手本身是另一个电影剪辑（如前所述在“Flup”内​​）*触手拥有一个电枢

[图片](http://i.stack.imgur.com/TI0By.png)

我只想创建一个简单的动作来开始，所以在这种情况下，我只会尝试移动蓝色骨骼。

2.- Flup 是一个类，所以我在一帧中创建一个实例

```
import IllGame.enemy.boss.*;

stage.addEventListener(MouseEvent.CLICK,moveTentacle);

//Creation of the monster and insertion into stage
var flup:Flup=new Flup();
flup.x=300;
flup.y=200;
stage.addChild(flup);

//Moves the tentacle (in this case the blue bone)
//to the click point
function moveTentacle(e:MouseEvent):void{
   flup.moveArmature(mouseX,mouseY);
} 
```

3.- Flup 类，此时非常简单

```
package IllGame.enemy.boss{
   import flash.display.MovieClip;

   public class Flup extends MovieClip{
      public function Flup(){

      }

      //Recives the coordinates of the click point
      //"TentacleOne" is the instance name of the tentacle
      public function moveArmature(x:Number,y:Number){
         this.tentacleOne.moves(x,y);
      }
   }
} 
```

4.- 接下来，我们有触手类。这个类是 Flup 将拥有的每条触手的父亲，所以它是“TentacleOne”的父亲

```
package IllGame.enemy.boss{
   import flash.geom.Point;
   import flash.display.MovieClip;
   import fl.ik.*;

   public class Tentacle extends MovieClip{

      //Variables needed for inverse quinematic
      private var armature:IKArmature;
      private var bone:IKBone;
      private var joint:IKJoint;
      private var point:Point;
      private var movement:IKMover;

      private var armatureName:String;
      private var bonesName:String;
      private var bonesNumber:int;

      public function Tentacle(armatureName:String,bonesName:String,bonesNumber:int){
         this.armatureName=armatureName;
         this.bonesName=bonesName;
         this.bonesNumber=bonesNumber;

         armature=IKManager.getArmatureByName(armatureName);
      }

      //This function is supposed to move the 7º bone (the blue one)
      public function moves(x:Number,y:Number){
         bone=armature.getBoneByName(bonesName+"7");
         joint=bone.headJoint;
         movement=new IKMover(joint,joint.position);
         movement.moveTo(new Point(x,y));
      }
   }
} 
```

5.- 最后是 TentacleOne 类，它只向其父亲发送信息

```
package IllGame.enemy.boss
{
   public class FlupTentacleOne extends Tentacle{

      const NUM_BONES:int=7;

      public function FlupTentacleOne(){
         super("Armature_20","ikBoneName",NUM_BONES);
      }
   }
} 
```

很抱歉这篇长文，但我真的很生气，不知道问题出在哪里。感谢所有试图帮助我的人。

PS：当我运行此代码时，骨架位置的 X 和 Y 变量被修改，但在视觉上骨架保持静态。

# ios - iOS - UIAutoresizingMask 边距：为什么我需要设置两边？

> ID：14926773
> 
> 赞同：0
> 
> 时间：2013-02-17T22:21:57.530
> 
> 标签：ios, autoresizingmask

我的问题可能看起来很奇怪，但举个例子更容易理解：

我有一个 UIButton，我创建然后：

```
// [...] Create button, add it to view
myButton.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

如果我不指定**UIViewAutoresizingFlexibleRightMargin**，我的组件将不会在屏幕上处于正确的 x 比。为什么 ？我指定了左边距，所以当我旋转设备时我的元素应该处于良好的位置......不明白右边距的需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:24:57.220

当您使用两个灵活边距时，宽度的变化将在两个边距之间分开。这通常用于保持视图居中。

当您只使用一个弹性边距时，宽度的变化将全部应用到一个弹性边距。这意味着其他边距保持不变，无论宽度如何变化。

# version-control - Bazaar 版本控制的状态如何？

> ID：14926774
> 
> 赞同：18
> 
> 时间：2013-02-17T22:22:00.257
> 
> 标签：version-control, dvcs, bazaar

我正在寻找一个使用分布式源代码控制的项目，并正在评估不同的选项。在看 Bazaar 时，我偶然发现了几篇文章（例如[this](http://stationary-traveller.eu/pages/bzr-a-retrospective.html)），它们的开发速度明显放缓。

项目集市的现状如何？错误是否得到修复？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-18T16:41:11.053

我会先用**事实**来回答。

1/ 根据 Bazaar 的[Active (published) Bazaar 分支](https://code.launchpad.net/bzr/+branches?field.lifecycle=CURRENT&field.lifecycle-empty-marker=1&field.sort_by=most%20recently%20changed%20first&field.sort_by-empty-marker=1)，我们可以看到有**8 个活跃的开发分支**（自 2013 年初以来发生了变化）

2/ 根据[Bazaar 2.6b3 里程碑](https://launchpad.net/bzr/+milestone/2.6b3)，下一个 2.6b3 版本修复了 12 个错误中的 3 个。这个版本开始于 6 个月前（2012 年 8 月）。

3/ 根据[Bazaar v2.5 系列](https://launchpad.net/bzr/2.5)，**v2.5 系列****每个月**都有一个 beta/minor 版本。

4/ 根据[Bazaar v2.6 系列](https://launchpad.net/bzr/2.6)，**v2.6 系列**每 4 个月发布一次 beta/minor 版本（好吧，这里没有那么多版本可以给出趋势）。

5/ Bazaar 仍然用于著名/雄心勃勃的/大型项目：Ubuntu、Debian、~~ MySql ~~、Launchpad ......在 Bazaar 社区中活跃的项目。

所以第一个观察结果是**发布频率较低**，很明显。
有人可能认为这是不好的趋势，但可以认为该应用程序现在已经足够成熟，需要预测新的路线图（具有新功能）。

* * *

最后，这是我与 bzr 团队进行的 IRC 聊天的摘录。这可能会指出中间版本的问题。

> trident_job：你好。我已经看到最新的 bzr 版本是 v2.6.2 并且是 1 年前（几乎）。
> trident_job: 下一个版本 v2.6.3 还有 3 个 bug 需要修复……你认为这个项目是停滞的吗？
> 
> mmm：**我们现在缺少负责发布的工作的人**
> mmm：你说得对，主干上的东西本来可以在不久前发布的
> 
> trident_job: mmm: 是的，对于一个开源项目有 1 年的发布周期来说，这可不是什么好广告
> 
> 嗯：好戳……所以，不幸的是，可能是一个 rt

* * *

**2013.09.20 更新**：开发人员的[Bazaar 回顾展](http://www.stationary-traveller.eu/pages/bzr-a-retrospective.html)。尤其要阅读最后两章：

*   慢车道上的集市
*   结论

* * *

# c# - Windows Phone 8 上的 ImageTools，更改 ImageSource 和 DataContext

> ID：14926779
> 
> 赞同：1
> 
> 时间：2013-02-17T22:22:35.677
> 
> 标签：c#, windows-phone-8, datacontext

我在 Windows Phone 8 项目中遇到 DataContext 问题。当我运行项目并且 MainPage() 完成时 - 我看到了第一个 GIF，但是当我去 Button_Click_1 时 - 第一个 GIF 仍然可见。我不知道 DataContext 是如何工作的。有没有办法再次设置 DataContext 并显示第二个 GIF？

```
namespace PhoneApp1
{
    public partial class MainPage : PhoneApplicationPage
    {

        public Uri ImageSource { get; set; }
        // Constructor
        public MainPage()
        {
            InitializeComponent();
            ImageTools.IO.Decoders.AddDecoder<GifDecoder>();
            ImageSource = new Uri("http://c.wrzuta.pl/wi7505/bcd026ca001736004fc76975/szczur-piwo-gif-gif", UriKind.Absolute);
            this.DataContext = this;
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {

            ImageSource = new Uri("http://0-media-cdn.foolz.us/ffuuka/board/wsg/image/1338/94/1338947099997.gif", UriKind.Absolute);
            this.DataContext = this;
        }

    }
} 
```

XAML

```
<imagetools:AnimatedImage x:Name="Image" Source="{Binding ImageSource, Converter={StaticResource ImageConverter}}" Margin="43,0,50,257" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:01:22.240

您将需要实施`INotifyPropertyChanged`以便`Xaml`了解对`ImageSource`属性的更改。

例子：

```
public partial class MainPage : PhoneApplicationPage, INotifyPropertyChanged
{
    private Uri _imageSource;
    public Uri ImageSource
    {
        get { return _imageSource; }
        set { _imageSource = value; NotifyPropertyChanged("ImageSource"); }
    }

    // Constructor
    public MainPage()
    {
        InitializeComponent();
        ImageTools.IO.Decoders.AddDecoder<GifDecoder>();
        this.DataContext = this;
        ImageSource = new Uri("http://c.wrzuta.pl/wi7505/bcd026ca001736004fc76975/szczur-piwo-gif-gif", UriKind.Absolute);
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        ImageSource = new Uri("http://0-media-cdn.foolz.us/ffuuka/board/wsg/image/1338/94/1338947099997.gif", UriKind.Absolute);
    }

    public event PropertyChangedEventHandler PropertyChanged;
    /// <summary>
    /// Notifies the property changed.
    /// </summary>
    /// <param name="property">The property.</param>
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

# python - 使用 i18n 和 compilemessage 命令本地化 Google App Engine 应用程序

> ID：14926780
> 
> 赞同：0
> 
> 时间：2013-02-17T22:22:42.787
> 
> 标签：python, django, google-app-engine, internationalization

我在 Google App Engine 中有一个应用程序。我将 Python 2.7 与 Django 1.4 一起使用。我的`app.yaml`：

```
application: myapp
version: 1
runtime: python27
api_version: 1
threadsafe: true

libraries:
- name: django
  version: latest

handlers:
- url: /static
  static_dir: static

- url: /.*
  script: myapp.app 
```

我想将国际化应用于我的应用程序，但不完全确定如何......是否有一些关于这个特定事物的文章或教程？我尝试使用几个不同的`compile-messages.py`文件并尝试运行它们，`dev_appserver.py compile-messages.py myapp`但我得到的主要是`dev_appserver.py`帮助页面，它实际上并没有解释项目中有关本地化/国际化的任何内容......我几乎在谷歌搜索这件事上苦苦挣扎一整天都没有运气：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:26:22.223

看看 webabb2 extras i18n：[http ://webapp-improved.appspot.com/api/webapp2_extras/i18n.html#api-webapp2-extras-i18n](http://webapp-improved.appspot.com/api/webapp2_extras/i18n.html#api-webapp2-extras-i18n)

# mysql - 重复行Sql查询

> ID：14926781
> 
> 赞同：1
> 
> 时间：2013-02-17T22:22:42.640
> 
> 标签：mysql, sql, records

我正在运行一个查询，我得到了重复的行。我不明白这是为什么。这是我的查询：

```
SELECT c.FName,
       p.ProductName,
       s.Description,
       s.Quantity,
       s.Price
FROM   customers c,
       products p,
       sellers s,
       requests r
WHERE  c.ID = s.CID
       AND p.ProductID = s.ProductID
       AND r.ProductID = s.ProductID
       AND r.C_ID = 3
       AND r.MatchType = 'Price'
ORDER  BY s.Price ASC 
```

=======编辑=======

好的，这里是 Requests 表中的值的编辑。注意：CID 2=DAZ（一般是卖家），3=Paul（一般是采购员）和 5=compny1（一般是卖家） 注意：产品 id 1=苹果，产品 id 2=梨，产品 3=浆果，产品 id4 =橙色

选择记录 MatchType=Price 和 cust ID=3 后，请求表如下所示：

```
 requestid |   cid   |   productid   | Quantity | Price  | matchtype
    ------------------------------------------------------------------
    1          3            1            3.0     2.00        price
    3          3            4            4.0     2.50        price
    4          3            3            2.5     2.00        exact  
    5          3            2            3.0     3.50        exact
    6          3            3            3.0     2.00        exact
    7          3            1            10.0    7.00        price 
```

这是卖家表

```
promotionID |   cid   |   productid   | Quantity | Price | description  
    ------------------------------------------------------------------
    1          2            4            5.0     2.99        oranges
    2          2            3            1.5     1.00        hand strawberries        
    3          2            3            2.5     2.00        l stawberries  
    4          2            2            3.0     3.00        pear       
    5          5            1            5.0     5.00        royal apples fm appleco.         
    6          2            1            6.0     5.50          sweet apples 
```

运行查询后，我尝试了建议的连接和此问题中的连接，我一直将其作为输出

```
FName   ProductName         Description         Quantity    Price 
```

* * *

```
daz         Oranges     Fresh and sweet oranges.    5.0        2.99
compny1      Apple      royal apples fm appleco.    5.0        5.00
compny1      Apple      royal apples fm appleco.    5.0      5.00
daz         Apple       sweet apples                 6.0      5.50
daz         Apple       sweet apples                 6.0      5.50 
```

我不明白为什么我会收到重复的行。请求的产品 id 必须是 = 卖家产品 id 以将请求的产品与可用的产品匹配，并且在这种情况下选择的 customerId 是 3...

我不明白为什么最后 4 条记录会自我重复？为什么会这样？？
从技术上讲，应该只显示 4 条记录。即行上的记录.. 1,2 和 3

建议/观察 好的，看过这个之后......你认为这些行是重复的，因为同一客户两次以不同的数量请求了 productID1=apple 吗？

```
 requestid |   cid   |   productid   | Quantity | Price  | matchtype
        ------------------------------------------------------------------
    1          3            1            3.0     2.00        price

    7          3            1            10.0    7.00        price 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:37:05.387

您需要使用内部联接来“过滤”行。尝试这个：

```
select c.FName, p.ProductName, s.Description, s.Quantity, s.Price 
FROM requests r
inner join sellers s on r.ProductID = s.ProductID
inner join products p on p.ProductID=s.ProductID 
inner join customers c on c.ID=s.CID       
where r.C_ID = 3 AND r.MatchType='Price'
ORDER BY s.Price ASC 
```

希望我在这里没有任何错误（这里很晚），但这是主要思想。对于存在于两个表中的列，并且您希望使用 for 过滤使用内部联接，对于从一个表中过滤使用 were 子句 ..（理论在一条腿上）...

- - 编辑 - -

此查询可以显示请求之间的差异...

```
select c.FName, p.ProductName, s.Description, s.Quantity, s.Price, r.demandid as 'Request ID'
FROM requests r
inner join sellers s on r.ProductID = s.ProductID
inner join products p on p.ProductID=s.ProductID 
inner join customers c on c.ID=s.CID       
where r.C_ID = 3 AND r.MatchType='Price'
ORDER BY r.demandid s.Price ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:19:23.587

```
select c.FName, p.Name, s.Description, s.Quantity, s.Price 
FROM customers c
left join sellers s on c.ID = s.cid
left join requests r on r.ProductID = s.ProductID
left join products p on p.productid = s.productid
where r.C_ID = 1
AND r.MatchType='Price'
ORDER BY s.Price ASC 
```

我为它设置了一个小提琴[SQL Fiddle](http://www.sqlfiddle.com/#!2/ad0397/1)并投入了一些虚拟数据。如果我正确设置了数据，代码就可以工作。

# c# - 为什么这些代码行没有按预期运行？

> ID：14926783
> 
> 赞同：1
> 
> 时间：2013-02-17T22:22:56.610
> 
> 标签：c#, mysql, .net, richtextbox

我正在创建一个聊天应用程序，我想以**Bold**显示名称。首次加载表单时，我使用这些代码行在控件上显示来自数据库的历史对话，`RichTextBox`并且我想以粗体显示名称：

这是使这成为可能的所有代码：

```
string strProvider = "Data Source=" + srv_host + ";Database=" + srv_db + ";User ID=" + srv_user + ";Password=" + srv_pass;
        MySqlConnection myConn = new MySqlConnection(strProvider);
        try
        {
            myConn.Open();
            string strCmd = "SELECT * FROM comments WHERE task_id=@task_id AND ((from_usr=@from AND to_usr=@to) OR (from_usr=@to AND to_usr=@from)) ORDER BY at_time ASC";
            MySqlCommand myCmd = new MySqlCommand(strCmd, myConn);
            myCmd.Parameters.AddWithValue("from", frm_usr);
            myCmd.Parameters.AddWithValue("to", to_usr);
            myCmd.Parameters.AddWithValue("task_id", tid);
            myCmd.ExecuteNonQuery(); // execute now

            MySqlDataReader dr = myCmd.ExecuteReader();

            while (dr.Read())
            {
                string text = dr.GetValue(1).ToString() + ": " + dr.GetValue(6) + Environment.NewLine;
                richTextBox1.AppendText(text);
                richTextBox1.SelectionStart = 0;
                richTextBox1.SelectionLength = dr.GetValue(1).ToString().Length;
                richTextBox1.SelectionFont = new Font(richTextBox1.Font,FontStyle.Bold);
            }

            myConn.Dispose();
        }

        catch (Exception E) { MessageBox.Show(E.Message); } 
```

这些是无法按预期工作的代码行：

```
 while (dr.Read())
            {
                string text = dr.GetValue(1).ToString() + ": " + dr.GetValue(6) + Environment.NewLine;
                richTextBox1.AppendText(text);
                richTextBox1.SelectionStart = 0;
                richTextBox1.SelectionLength = dr.GetValue(1).ToString().Length;
                richTextBox1.SelectionFont = new Font(richTextBox1.Font,FontStyle.Bold);
            } 
```

**编辑：**
`dr.GetValue(1).ToString()`保留用户
`dr.GetValue(6).ToString()`的全名 保留消息

上面代码的问题是它仅以粗体显示名字，但其他行不受影响。查看图片![在此处输入图像描述](../Images/aae4aa21e2f7a498bae88967bb24c17b.png)
有人可以告诉我代码不起作用的原因。我无法弄清楚错误在哪里。
谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T22:28:41.717

您在这里遇到的问题`richTextBox1.SelectionStart`是始终为零，这意味着格式只会应用于文本框中的第一行。

尝试将其设置为`richTextBox1.SelectionStart = richTextBox1.TextLength`.

**编辑：**

尝试将其设置为

```
richTextBox1.SelectionStart = richTextBox1.TextLength - text.Length; 
```

**编辑2：**

我认为 Invalid Argument 事情是由使用`Environment.NewLine`. 如果我改用`"\n"`，代码可以正常工作。问题`Environment.NewLine`当然是`\r\n`在 Windows 上，但`richtextBox1`似乎忽略了`\r`. 这导致在`richTextBox1.TextLength - text.Length`第一次迭代中为 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:36:34.230

我无法测试，但可能是因为`SelectionStart`索引始终为 0，尝试将其设置为刚添加的行的开头

```
 while (dr.Read())
        {
            string text = dr.GetValue(1).ToString() + ": " + dr.GetValue(6) + Environment.NewLine;
            richTextBox1.AppendText(text);
            richTextBox1.SelectionStart = richTextBox1.GetFirstCharIndexOfCurrentLine();
            richTextBox1.SelectionLength = dr.GetValue(1).ToString().Length;
            richTextBox1.SelectionFont = new Font(richTextBox1.Font,FontStyle.Bold);
        } 
```

# python - 为什么这个 Python 程序给我一个错误？

> ID：14926788
> 
> 赞同：2
> 
> 时间：2013-02-17T22:23:22.897
> 
> 标签：python, debugging, python-2.7

我正在上初学者编程课，我们的讲师选择了 Python 作为我们要使用的语言。他给了我们一个非常非常简单的任务，我将发布，以及我想出的代码，我也会发布。我觉得自己像个该死的白痴，因为我不明白为什么这不起作用。我不断收到全局定义错误，如果我们提出问题，老师就会把我们视为宇宙的渣滓。

任务是：

> 设计一个模块化的 Python 程序，要求用户以公里为单位输入距离，然后将该距离转换为英里。
> 
> 程序应该循环寻找新的输入，直到运行程序的人告诉它停止。
> 
> *提示：*可以使用零 (0) 公里的输入来停止程序
> 
> 换算公式如下：英里 = 公里 * 0.6214
> 
> 至少需要三个模块：
> 
> 1.  输入
> 2.  计算
> 3.  打印

我想出的代码是：

```
def main(ans):
    while ans=='yes':
        data()
        calculate()
        words()

def data():
    print 'Enter Kilometers Please'    
    kilometers=input()
    return

def calculate():
    miles=kilometers*0.6214
    print miles

def words():
    print 'The number of miles is',
    print 'Enter another number?'

ans='yes'
main(ans) 
```

谁能告诉我我做错了什么？请记住，我们才刚刚开始，我不知道我在这些论坛中看到的许多高级编码技术。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T04:56:34.173

运行你的程序，我们得到的第一条错误信息是这样的：

```
Traceback (most recent call last):
  File "kilomiles.py", line 21, in <module>
    main(ans)
  File "kilomiles.py", line 4, in main
    calculate()
  File "kilomiles.py", line 13, in calculate
    miles=kilometers*0.6214
NameError: global name 'kilometers' is not defined 
```

...这非常有帮助：它告诉您`kilometers`在程序的第 13 行中尝试使用的变量在`calculate()`函数中没有定义。

那是因为一个叫做[作用域](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)的东西：`kilometers`你在你的`data()`函数中定义的变量*只存在于那个函数*中。

所以，你需要得到结果

1.  出`data()`, 和
2.  进入`calculate()`.

要解决第一个问题，您需要进行更改`data()`以使其返回值：

```
def data():
    print 'Enter Kilometers Please'
    kilometers = input()
    return kilometers 
```

现在，在您的`main()`函数中，您可以捕获它返回的值：

```
 kilometers = data() 
```

接下来，您需要进行更改`calculate()`，使其`kilometers`以与 accept 相同的方式作为参数`main()`接受`ans`并返回`miles`：

```
def calculate(kilometers):
    miles = kilometers * 0.6214
    return miles 
```

完成后，您可以更改`main()`它以使其传递`kilometers`到，并从中`calculate()`捕获：`miles`

```
 miles = calculate(kilometers) 
```

最后，更改`words()`以使其接受`miles`并返回`ans`：

```
def words(miles):
    print 'The number of miles is', miles
    print 'Enter another number?'
    ans = input()
    return ans 
```

...并再进行一次更改`main()`，使其传递`miles`到，并从中`words()`捕获：`ans`

```
 ans = words(miles) 
```

所以你的最终程序如下所示：

```
def main(ans):
    while ans == 'yes':
        kilometers = data()
        miles = calculate(kilometers)
        ans = words(miles)

def data():
    print 'Enter Kilometers Please'
    kilometers = input()
    return kilometers

def calculate(kilometers):
    miles = kilometers * 0.6214
    return miles

def words(miles):
    print 'The number of miles is', miles
    print 'Enter another number?'
    ans = raw_input()
    return ans

ans = 'yes'
main(ans) 
```

该程序现在可以工作了，但是如果它成为一种习惯，它确实有一个问题会回来并咬你：你正在使用`input()`而不是`raw_input()`. 那很[危险](https://stackoverflow.com/a/7710959/1014938)，如果可能的话，你应该避免它。不过，我会把它留给你来解决这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-18T04:41:50.040

这很简单。U 在 data() 函数中声明或获取“公里”的值，并且您正尝试从 calculate() 访问它。计算不知道什么是“公里”..因为它是数据（）的本地范围。您应该定义公里并使用它。

```
kilometers=0.0

def date():
   global kilometers
   ...
   ...
def calculate():
   global kilometers
   ... 
```

# mysql - LEFT JOIN 查询中的重复内容 + 获取连接表的计数

> ID：14926792
> 
> 赞同：2
> 
> 时间：2013-02-17T22:23:44.553
> 
> 标签：mysql, left-join, inner-join

我正在尝试加入两个具有相似 ID 的表，然后也得到两个字段的总和。让我解释：

**测试表：** id | 发布 | 描述 | 日期

**likes_dislikes 表：** id | 歌曲ID | 用户ip | 喜欢 | 不喜欢

在测试“测试表”中，“id”与 likes_dislikes 的“song_id”匹配，所以我尝试了 LEFT JOIN，因为并非每个帖子在 likes_dislikes 表中都有一个 id，但我得到了重复的结果。

```
SELECT *
FROM
  test
  LEFT JOIN likes_dislikes ON test.song_id = likes_dislikes.page_id
GROUP BY test.song_id
ORDER BY test.id DESC LIMIT $start, $limit 
```

如何防止重复的内容，以及在我运行 while 循环时获取与每个帖子相关联的总喜欢/不喜欢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:29:42.777

我假设您正在寻找这样的东西：

```
SELECT
    T.`id`,
    T.`post`,
    T.`desc`,
    T.`Date`,
    COUNT(L.`like`) as `LikeCount`,
    COUNT(L.`dislike`) as `DislikeCount`
FROM `test` T
    LEFT JOIN `likes_dislikes` L
       ON T.`Id` = L.`song_id`
GROUP BY T.`Id`, T.`post`, T.`desc`, T.`Date`
ORDER BY T.`id` DESC; 
```

# matrix - Python：转换矩阵

> ID：14926798
> 
> 赞同：4
> 
> 时间：2013-02-17T22:24:38.180
> 
> 标签：matrix, python-2.7, rotation, translation

这是共同计算平移和旋转的正确方法，还是有更好的方法？目前我的代码翻译然后旋转，这会造成问题吗？

**代码**

```
from math import cos, sin, radians

def trig(angle):
  r = radians(angle)
  return cos(r), sin(r)

def matrix(rotation=(0,0,0), translation=(0,0,0)):
  xC, xS = trig(rotation[0])
  yC, yS = trig(rotation[1])
  zC, zS = trig(rotation[2])
  dX = translation[0]
  dY = translation[1]
  dZ = translation[2]
  return [[yC*xC, -zC*xS+zS*yS*xC, zS*xS+zC*yS*xC, dX],
    [yC*xS, zC*xC+zS*yS*xS, -zS*xC+zC*yS*xS, dY],
    [-yS, zS*yC, zC*yC, dZ],
    [0, 0, 0, 1]]

def transform(point=(0,0,0), vector=(0,0,0)):
  p = [0,0,0]
  for r in range(3):
    p[r] += vector[r][3]
    for c in range(3):
      p[r] += point[c] * vector[r][c]
  return p

if __name__ == '__main__':
  point = (7, 12, 8)
  rotation = (0, -45, 0)
  translation = (0, 0, 5)
  matrix = matrix(rotation, translation)
  print (transform(point, matrix)) 
```

**输出**

```
root@ubuntu:~$ python rotate.py 
[-0.707106781186547, 12.0, 15.606601717798213] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-27T13:07:36.227

好吧，您的矩阵函数很好，我可以正常工作，但是对于输出，我使用了这个：

```
#def transform(point, vector):
#  p = [0,0,0]
#  for r in range(0,3):
#    p[r] += vector[r][3]
#    print p
#    for c in range(3):
#        p[r] += point[c] * vector[r][c]
#  return p

def transform(point, TransformArray):
  p = np.array([0,0,0,1])
  for i in range (0,len(point)-1):
      p[i] = point[i]
  p=np.dot(TransformArray,np.transpose(p))
  for i in range (0,len(point)-1):
      point[i]=p[i]
  return point 
```

如果不是执行手动更改，而是让矩阵对其进行排序，则其背后的理论。在这里您可以找到文献以更好地理解我所做的：http: [//www.inf.ed.ac.uk/teaching/courses/cg/lectures/cg3_2013.pdf](http://www.inf.ed.ac.uk/teaching/courses/cg/lectures/cg3_2013.pdf)

是的，您执行*矩阵*函数的方式定义了您执行转换顺序的方式。有 3 种主要的变换：缩放、平移和旋转。更多关于我发送的链接。

尽管矩阵函数有效，但您现在似乎错误地交换了 x 和 z 旋转，我现在可以跟随您的任何矩阵索引，因此我将其重写为：

```
def matrix(rotation, translation):
  xC, xS = trig(rotation[0])
  yC, yS = trig(rotation[1])
  zC, zS = trig(rotation[2])
  dX = translation[0]
  dY = translation[1]
  dZ = translation[2]
  Translate_matrix = np.array([[1, 0, 0, dX],
                               [0, 1, 0, dY],
                               [0, 0, 1, dZ],
                               [0, 0, 0, 1]])
  Rotate_X_matrix = np.array([[1, 0, 0, 0],
                              [0, xC, -xS, 0],
                              [0, xS, xC, 0],
                              [0, 0, 0, 1]])
  Rotate_Y_matrix = np.array([[yC, 0, yS, 0],
                              [0, 1, 0, 0],
                              [-yS, 0, yC, 0],
                              [0, 0, 0, 1]])
  Rotate_Z_matrix = np.array([[zC, -zS, 0, 0],
                              [zS, zC, 0, 0],
                              [0, 0, 1, 0],
                              [0, 0, 0, 1]])
  return np.dot(Rotate_Z_matrix,np.dot(Rotate_Y_matrix,np.dot(Rotate_X_matrix,Translate_matrix))) 
```

如您所见，我返回的转换序列将改变输出：由于最后一个是平移，因此它将首先平移该点，然后在 X 中旋转，然后在 Y 中旋转，最后在 Z 中旋转。希望这有助于欢呼芽。

# java - 将 String 属性序列化为嵌套的 JSON 对象

> ID：14926803
> 
> 赞同：2
> 
> 时间：2013-02-17T22:24:52.317
> 
> 标签：java, json, jackson

我需要将对象的 String 属性序列化为嵌套 JSON 而没有任何转义等。所以给定 json：

```
{
  "regularProperty" : "Test here",
  "nestedJSON" : {
    "propertyArray" : [1,2,3],
    "propertyText" : "new Text",
    "anotherObject" : { ... }
  }
} 
```

并且**nestedJSON**属性必须包含文本

```
{
  "propertyArray" : [1,2,3],
  "propertyText" : "new Text",
  "anotherObject" : { ... }
} 
```

序列化/反序列化怎么可能？任何特定的注释或数据类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T09:57:11.847

也许在*nestedJSON*字段上添加注释[JsonRawValue](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/)？我以前从未使用过它，但它似乎对你的情况很有希望。

# p2p - 如果防火墙默认不接受传入连接，那么 p2p 网络如何工作？

> ID：14926807
> 
> 赞同：21
> 
> 时间：2013-02-17T22:25:46.070
> 
> 标签：p2p, firewall, bittorrent

如果防火墙默认阻止所有传入连接，那么 p2p 技术如何工作？像种子一样，您如何连接到共享文件的每个人并从他们那里获取信息？它是通过中继服务器还是其他什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T07:03:50.283

我对 BitTorrent 的一切都没有兴趣，因为我对一般的 P2P 连接技术很感兴趣。通常，P2P 网络中的客户端会在公共信令服务器（例如 SIP、XMPP、跟踪服务器、网站）上会合，以交换 IP 地址、其他元数据和消息以引导直接连接。然后使用以下任何技术来进行通信会话：

*   双方尝试同时相互连接 - 以防一方无法接受传入连接，但允许进行出站连接。防火墙场景就是这种情况。

*   打孔（与上述结合使用）。中继本身不是必需的，但当两个对等点都位于难以穿越的网络设备后面时，它确实有助于确保连接性。既有[UDP](http://en.wikipedia.org/wiki/UDP_hole_punching)打孔技术，也有[TCP 打孔](http://en.wikipedia.org/wiki/TCP_hole_punching)技术。更多信息[在这里](http://www.bford.info/pub/net/p2pnat/index.html)。

*   当无法直接连接时，可以将包括[TURN 服务器](http://en.wikipedia.org/wiki/Traversal_Using_Relays_around_NAT)在内的中继部署到 P2P 网络中。您最喜欢的所有视频通话应用程序都为这些场景部署中继，但尽最大努力让对等方直接连接以避免中继成本。

Bing 用于以下主题：STUN、TURN、ICE（交互式连接建立）、libjingle、pjnath、libnice。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-09T02:57:46.020

如果防火墙（而不是 NAT）打算阻止传入连接（我相信他们通常会这样做），那么您无能为力。你可以尝试所有你喜欢的打孔。这仅通过实施对称 NAT 来实现，即每个针孔都是专门为一个 ip、port-quadruple（源、目标端口和 IP）打开的。

BitTorrent 不太可能仅仅因为您无法接收传入连接而停止工作，它的性能只会稍差一些。很有可能群体中至少有一些人可以接收连接，而您只需连接到他们。

[这](http://bt.degreez.net/firewalled.html)是一个古老的解释，说明如何被防火墙主要只是意味着更差的性能。

**编辑：**

“为什么”的简短回答是大多数对等点不在防火墙后面（只是 NAT）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-10-23T01:24:47.733

为后代：

简短的回答是，它是通过[https://en.wikipedia.org/wiki/Hole_punching_(networking)完成的](https://en.wikipedia.org/wiki/Hole_punching_(networking))

当您从您的机器（很可能位于路由器和 NAT 后面）连接到 google.com 时，您的机器 IP 地址和经过 NAT 的端口号会发送到 Google 服务器。Google 使用这些连接信息将搜索结果发送到您的计算机。

你可以把google的服务器想象成p2p网络中的一个节点。即使您的路由器不接受传入连接，Google 也能够从他们的服务器“联系”您。这是因为他们没有启动连接（他们不知道您的 ip:NATedport 组合来启动连接）。但是您的机器可以建立出站连接并将您的 ip:NATedport 组合发送/发布到外部世界。

因此，p2p 中的两个节点都将它们的 ip:NATedport 组合发送到第三方站点并交换此信息并开始相互连接（谁先得到信息）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-10T18:01:06.540

让
*F* = # 防火墙节点，
*O* = # 具有开放传入端口的节点，
*T* = *F* + *O* = 总节点数​​，
*P* = *O* / *T* = 具有开放端口的总节点的比例，
*C [f]* = 每个防火墙的最大连接数节点可以拥有，并且
*C [o]* = max # 每个打开节点可以拥有的连接数。

然后，
*C [f]* = *O* , ^(∵ 防火墙节点只能连接到开放节点)
*C [o]* = *T* - 1, ^(∵ 开放节点可以连接到所有其他节点（并且一旦所有防火墙节点都首先连接到它们）)
所以
*C [o]* / *C [f]* = ( *T* - 1) / *O* = 1 / *P* - 1 / *O*。

如果*T*很大，则
*C [o]* / *C [f]* ≈ 1 / *P*。

因此，例如，假设一半节点具有开放的传入端口：*P* = ½。然后，
*C [o]* / *C [f]* ≈ 2，
这意味着开放节点的连接数约为防火墙节点的 2 倍（这意味着它们负担过重，但也意味着它们具有更高的可见性）。

因此，对于特定节点和整个网络来说，*P* = 1 会更好；所有节点都将同样可见且负担相同。

如果*P* = 0，网络将根本无法工作∵ 没有人能够发起与其他对等方的连接。

# javascript - 重新加载远程页面时调整本地页面上的 iframe 高度

> ID：14926813
> 
> 赞同：0
> 
> 时间：2013-02-17T22:26:22.590
> 
> 标签：javascript, html, iframe

我已经遵循了[这里](http://solidgone.org/Set-IFRAME-height-based-on-size-of-remotely-loaded-content)的建议，并让它按应有的方式工作。但是，它并没有*完全*实现我所追求的。我正在从另一个 url 中提取一个表单，当用户提交表单时，它会提供一个确认页面。是否有任何方法可以动态检查 iframe 内何时发生页面重新加载，然后实时（我假设使用 AJAX）更新它的高度以反映确认页面的新计算高度？

我猜这是不可行的，但我想检查一下:)

# ruby-on-rails-3 - rails3 猴子补丁生成器

> ID：14926814
> 
> 赞同：0
> 
> 时间：2013-02-17T22:26:24.497
> 
> 标签：ruby-on-rails-3, generator, monkeypatching

我想对 rspec-rails 生成器进行猴子补丁以生成 _form.html_spec.rb 模板。我知道怎么做，但不知道我应该把这个补丁放在哪里！

我做了什么：

```
# rspec_generator_patch.rb
module Rspec
  module Generators
    class ScaffoldGenerator < Base
      def generate_views_specs_with_form *args, &block
        generate_views_specs_without_form
        copy_view :_form
      end
      alias_method_chain :generate_views_specs, :form
    end
  end
end 
```

我把这个文件放在哪里？谢谢你。

编辑：

好的，我认为问题几乎解决了。我继承了特定的生成器并编辑了方法，而不是猴子补丁。有解决办法：

```
# lib/generators/rspec_modded/scaffold/scaffold_generator.rb
require 'generators/rspec/scaffold/scaffold_generator.rb'
module RspecModded
  module Generators
    class ScaffoldGenerator < Rspec::Generators::ScaffoldGenerator
      def generate_view_specs
        super
        copy_view :_form
      end
    end
  end
end 
```

如果我这样做`rails g`rspec_modded:scaffold 在列表中，并且如果手动调用（`rails g rspec_modded:scaffold test`）则实际工作。

```
# config/application.rb
# ...
config.generators do |g|
  g.test_framework :rspec_modded, :fixture => false, fixture_replacement: nil
  g.fallbacks[:rspec_modded] = :rspec
end 
```

据我所知，每个人都`hook_for :test_framework`应该调用 rspec_modded 生成器，而 rspec 应该管理其余的（后备）。但它不起作用：由于某种原因，unit_test 生成器启动了！什么事？我真的不明白...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:27:26.710

你可以把你的猴子补丁放在任何地方，只要它被加载。使用 rails，您通常会将其放在 /lib 文件夹中。

# shell - “[1]+ 已停止”我的 unix shell 是什么意思？

> ID：14926815
> 
> 赞同：5
> 
> 时间：2013-02-17T22:26:31.520
> 
> 标签：shell, unix

在我在 unix shell 上运行的 C 程序中，我使用线程来执行任务然后结束，但有时我会在 shell 上看到这些消息，说`[1]+ Stopped`or `[1]+ Done`.

有谁知道这些是什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T22:28:58.190

当此 shell 中的任务已停止或完成运行时，shell 会显示这些消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T22:28:28.557

这意味着在后台启动的进程退出（完成）或收到停止信号（已停止）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T06:30:49.860

正如在其他答案中所说，这些消息意味着您的程序启动子进程，并且控制台会通知您它们的状态。您可能不会混淆线程和进程吗？如何创建“线程”？通过使用编译器选项和 pthreads 库，还是使用 fork() 原语？如果是后者，您实际上是在创建子进程，而不是线程。

# ajax - Ajax.BeginForm 无法正常工作

> ID：14926818
> 
> 赞同：0
> 
> 时间：2013-02-17T22:27:40.927
> 
> 标签：ajax, asp.net-mvc-4

我有一个问题`Ajax submit`。我有一个 main `View`，我在其中渲染 a`PartialView`并在最后一个内部加载另一个`PartialView`。像这样的东西：

*   主视图

    *   元素列表 -> `PartialView`1

        *   在1中创建新元素 -> `PartialView`2`PartialView`

我正在使用`AjaxBeginForm`替换和更新选项：

```
 @using (Ajax.BeginForm("Create", "MyController", 
      new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "form0", HttpMethod = "POST" })) 
```

我的问题是第一次提交效果很好。它保存新元素并重新渲染`PartialView`1 （它更新我的列表）。如果想再次提交，它会将我重定向到`PartialView`1。

为什么会发生这种情况，我的代码有什么问题？我该怎么做 ？

这是我的**控制器操作**：

```
 [HttpPost]
    public PartialViewResult Create(Model viewModel)
    {
        viewModel.Save(viewModel.FormModel);

        var newViewModel = new DefaultViewModel(viewModel.xID,viewModel.yID);

        return PartialView("_DefaultPartialView", newViewModel);

    } 
```

没关系，我的操作返回`PartialView`? 它应该是类型`JsonResult`？

和**`PartialView`1**：

```
@using (Ajax.BeginForm("CreateBehaviorLog", "BehaviorLog", new AjaxOptions {    InsertionMode = InsertionMode.Replace, UpdateTargetId = "form0", HttpMethod = "POST" }))
{

@model DefaultViewModel

@Scripts.Render("~/bundles/jquery")

<h2>Title</h2>

 { Html.RenderPartial("PartialView2",    Model.ModelForPartialView2); }

<div id="listOfELements">

 @foreach(var item in Model.X)
  {
     --list--
  }  
</div>
} 
```

谢谢你。

**更新：**

我解决了这个问题（这是一个非常新手的错误）。我明天会发布我的答案，因为现在有点晚了，我需要睡觉！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:59:41.253

因此，首先，当您进行 Ajax 调用时，请确保包含您需要的所有内容。这里我的意思是：

*   一定要`<add key="UnobtrusiveJavaScriptEnabled" value="true"/>`在你的 webconfig 中有。

*   确保您已将脚本包含在页面中。

*   如果您使用的是最新版本，则`jQuery`需要`live`在.`on``unobtrusive script`

顺便说一句，如果你有上面提到的问题，这是我第一次做的（现在改变了，因为它不是一个很好的解决方案）：

```
 MainView

 @using (Ajax.BeginForm("Create", "MyController", 
  new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "form0", HttpMethod = "POST" }))
    {
     RenderPartial1

         RenderPartial1.2
     }

     RenderPartial2
     ..
     RenderPartialN 
```

正如你所看到的，我把 I 放在了`AjaxBeginForm`外面，放在了. 这种方法不太好，因为如果你需要 2 个表格，你会怎么做？`Partial1.2``submit``MainView`

最后我退出使用`AjaxBeginForm`并`HtmlBeginForm`与`ajax post`from一起使用`javascript`。

# heroku - 避免网络邮件重定向

> ID：14926825
> 
> 赞同：1
> 
> 时间：2013-02-17T22:28:23.240
> 
> 标签：heroku, flask, webmail

我已经确定了我的域，并且我的应用程序在 Heroku 上与 Flask 完美运行。问题是，我的主机（仅拥有该域）将 webmail 指向 mydomain.com/webmail。但是，我的应用程序认为脚本中的这个 URL 是正确的，当它尝试加载它时，它会给出 404 错误。

我环顾四周，在 CPanel 论坛上说我应该添加以下内容：

```
ScriptAlias /webmail /usr/local/cpanel/cgi-sys/wredirect.cgi
ScriptAliasMatch ^/webmail/(.*) /usr/local/cpanel/cgi-sys/wredirect.cgi 
```

到**httpd.conf**文件，我不知道在哪里找到。有没有办法解决？

# python - 该函数有两个参数：提示：str 和返回类型：int、float、str

> ID：14926830
> 
> 赞同：0
> 
> 时间：2013-02-17T22:28:54.170
> 
> 标签：python, prompt

大家好，我在这个问题上需要一些帮助

编写一个名为 safe_input(prompt, type) 的函数，它的工作方式类似于 Python 输入函数，只是它只接受指定类型的输入。

该函数有两个参数：

提示：str

类型：int、float、str

该函数将一直提示输入，直到输入指定类型的正确输入。该函数返回输入。如果输入指定为数字（float 或 int），则返回的值将是正确的类型；也就是说，该函数将执行转换。

提示的默认值是空字符串。该类型的默认值是字符串。

# 这是我所拥有的：

```
safe_input = input(str("Enter a String Type you want to check: "))

test = safe_input("this is a string")
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input("this is a string",int)
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input("this is a string",float)
print ('"{}" is a {}'.format(test,type(test)))                       
test = safe_input(5)
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input(5,int)
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input(5,float)
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input(5.044)
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input(5.044, int)
print ('"{}" is a {}'.format(test,type(test)))
test = safe_input(5.044, float)
print ('"{}" is a {}'.format(test,type(test)))

def safe_input (prompt, type=str):

    if (type == int):
        while (True):
           try:
            # check for integer or float
            integer_check = int(prompt)
            # If integer, numbers will be equal
            if (prompt == integer_check):
                return integer_check
            else:
                print("They are not equal!!")
                return integer_check
        except ValueError:
            print ("Your entry, {}, is not of {}."
                   .format(prompt,type))
            prompt = input("Please enter a variable of the type '{}': "
                           .format(type)) 
```

有谁知道我在这里做错了什么？我和我的朋友已经为此工作了好几个小时。

## 更新：我收到错误，例如：

```
 File "C:\Users\Thomas\Desktop\ei8069_Lab9_Q4.py", line 28, in <module>
       test = safe_input("this is a string")
  TypeError: 'int' object is not callable

  Traceback (most recent call last):
  File "C:\Users\Thomas\Desktop\ei8069_Lab9_Q4.py", line 28, in <module>
       test = safe_input("this is a string")
  TypeError: 'float' object is not callable 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:44:15.203

为什么你有这条线：

```
safe_input = input(str("Enter a String Type you want to check: ")) 
```

在您的程序开始时。你应该有函数的定义，但你在最后有它。

**解决方案**：删除该虚假行并将函数的定义移动到程序的顶部。

**解释**：当您运行该行时，它会向用户询问某些内容，并且那个（比如说`42`将被分配给`safe_input`。然后您尝试将其用作函数，但是嘿，`42`它是一个整数，并且无法调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T23:01:48.020

只是我的两分钱。

首先，更仔细地阅读你的作业，你的方法并不是他们想要的。

而且你使用了很多不必要的条件。您的功能可能会更简单，如下所示：

```
def safe_input(prompt, type_=str):
    if(type_ not in (str, int, float)): 
        raise ValueError("Expected str, int or float.")  

    while True:
        test = input(prompt)    
        try:
            ret = type_(test)
        except ValueError:
            print("Invalid type, enter again.")                
        else:
            break    

    return ret 
```

尽量不要使用像 type 这样的内置函数作为变量名。它们会覆盖内置函数，以后会引起很多麻烦。

# mysql - 无法附加 Mysql 列

> ID：14926835
> 
> 赞同：0
> 
> 时间：2013-02-17T22:29:05.850
> 
> 标签：mysql, append

所以我是 MySQL 的新手，但我已经为此工作了几个小时，无论我如何编写它，我都无法将任何内容附加到我的数据库中的列中。我一直在使用 w3schools 模板，但我似乎无法让它工作。我正在使用以下代码检查数据库的内容，该代码有效。我将删除密码和网址。我正在尝试将一堆将要更新的文本（例如 123、234、345）关联到一行（他们的电子邮件）。

```
<?php
mysql_connect('mywebsite.com', 'myusername', 'mypassword') or die (mysql_error());
mysql_select_db('mydatabase') or die (mysql_error());
$result = mysql_query("SELECT * from emails");
$row = mysql_fetch_array($result);
echo $row['myemail'];
?> 
```

现在可以了，如果我从 PHPmyadmin 给它一个值，它就会显示出来。这是另一个文件的片段，它应该给出/更改它的值。（这是在另一个 PHP 文件中）

```
mysql_connect('mywebsite.com', 'myusername', 'mypassword') or die (mysql_error());
mysql_select_db('mydatabase') or die (mysql_error());
$sql="UPDATE emails SET myemail = CONCAT(myemail, 'testappend')";` 
```

现在，每当我运行程序时，该代码就会运行，并且除了 mysql 区域之外的所有内容都可以正常工作。它似乎根本没有做任何事情，我无法将其追加，我将其更改为完全更新数据，但这也没有做任何事情。

当我使用 PHPMyadmin 插入一个值时，它会执行此操作，并且它会更新所有内容。

```
INSERT INTO  mydatabase.emails (
myemail
)
VALUES (
'test2'
); 
```

所以“emails”（真实姓名）是一个表，当前有 1 个电子邮件（myemail），并且现在的文本值为“test1”。

编辑：我将其更改为 CONACT 但这显然不是问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:32:48.350

它应该`CONCAT`而不是`CONACT`在您的代码中

如果这不起作用，放在`echo mysql_error()`代码末尾会返回什么？

# linux - 从 shell 创建和删除 AWS EC2 实例

> ID：14926838
> 
> 赞同：0
> 
> 时间：2013-02-17T22:29:28.457
> 
> 标签：linux, shell, amazon-web-services, amazon-ec2

我想知道是否可以在远程服务器上使用 shell 脚本从现有保存的快照创建亚马逊 EC2 实例，并删除该实例。

我确信这是可能的，但我无法运行任何示例代码来做到这一点，所以我现在开始怀疑它。

那么，谁能告诉我这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:49:32.840

亚马逊网页上有一个非常详细的描述如何做到这一点： http: [//docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/Welcome.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/Welcome.html)

你在哪个阶段挣扎？

# php - php 发送消息包括复选框数组

> ID：14926839
> 
> 赞同：0
> 
> 时间：2013-02-17T22:29:32.100
> 
> 标签：php, html, message, checkbox

我想让 php 将 productsq 复选框作为数组并在消息中发送

这不是代码它只是它的一部分

这是html部分

`<input type="checkbox" id="productsq" name="productsq[]" value="cardprinter"/> <input type="checkbox" id="productsq" name="productsq[]" value="hotelsolution"/ >`

这是php部分

```
<?php
    $productsqu= implode(',',mysql_real_escape_string($_post['productsq']));
    $message = '<html><body>';
    $message .= '<table rules="all" style="border-color: #666;" cellpadding="10">';
    $message .= "<tr style='background: #eee;'><td><strong>products:</strong> 
    $message .= "<tr style='background: #eee;'><td><strong>comments:</strong> </td>    <td>" .clean_string($_POST['comments']) . "</td></tr>";
    $message .= "<tr style='background: #eee;'><td><strong>selectionField:</strong> </td><td>" .clean_string($_POST['selectionField']) . "</td></tr>";
    $message .= "<tr style='background: #eee;'><td><strong>products:</strong> </td><td>" .clean_string($productsqu) ."</td></tr>";
    $message .= "</table>";
    $message .= "</body></html>";
?> 
```

我也尝试使用这个，但它没有用有没有办法让它正常工作？？？

```
$productsqu= implode(',',mysql_real_escape_string($_post['productsq'])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T12:15:07.797

试试下面的代码希望它会对你有所帮助。

```
<?php
if(isset($_POST['submit']) == 'submit')
{
         $productsqu= mysql_real_escape_string(implode(',',$_POST['productsq']));
         $message = '<html><body>';
         $message .= '<table rules="all" style="border-color: #666;" cellpadding="10">';
         $message .= "<tr style='background: #eee;'><td><strong>products:</strong>";
         $message .= "<tr style='background: #eee;'><td><strong>comments:</strong> </td>    <td>" .$_POST['comments'] . "</td></tr>";
         $message .= "<tr style='background: #eee;'><td><strong>selectionField:</strong> </td><td>" .$_POST['selectionField']. "</td></tr>";
         $message .= "<tr style='background: #eee;'><td><strong>products:</strong> </td><td>" .$productsqu."</td></tr>";
         $message .= "</table>";
         $message .= "</body></html>";
     echo $message;
}   
?> 
```

并且在下面的行中也`";`缺少。

```
 $message .= "<tr style='background: #eee;'><td><strong>products:</strong>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:35:32.870

根据您的复选框

`$_POST['productsq']`是一个数组。

```
$productsqu = mysql_real_escape_string(implode(", ", $_POST['productsq'])) ; //Implode into string first 
```

因此，首先将数组内爆成字符串，然后`mysql_real_escape_string()`在其上使用。

# ipython - ipython 所需的 python 包

> ID：14926844
> 
> 赞同：0
> 
> 时间：2013-02-17T22:30:04.967
> 
> 标签：ipython

我最近安装了 ipython 并在此之前安装了 curses：

jinja2 numpy pexpect pygments qt sqlite3 tornado zmq

我刚刚运行了 iptest 并在最后得到了确定。但在报告接近尾声时有以下内容：

测试时不可用的工具和库：azure cython matplotlib oct2py pymongo rpy2 wx wx.aui

我的问题是是否需要安装那些在测试时列为不可用的 ipython 才能以最佳方式运行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:51:22.080

其他用户已经在 ML 上提出并回答了问题：

[http://python.6.n6.nabble.com/IPython-User-question-about-need-td5006172.html](http://python.6.n6.nabble.com/IPython-User-question-about-need-td5006172.html)

这是MinRK给出的答案：

> 不，但是一些兼容性或扩展测试等使用这些，所以它只是说明运行了哪些测试的注释。

# c# - 模拟远程机器人运动

> ID：14926853
> 
> 赞同：0
> 
> 时间：2013-02-17T22:30:54.447
> 
> 标签：c#, sockets, xna, client-server, system.net.sockets

我正在完成我的导师给我的任务，他向我展示了一个使用 Java 开发的演示项目，但我没有任何 Java 经验，但我在 C# 方面的经验很少，我必须完成给定的要求，例如作为

1.  使用套接字技术
2.  客户端/服务器通信协议

场景：需要设计机器人世界，其中包含一些机器人要去探索的未知物体。所以我知道这将是某种动画，比如 2d 游戏，我可以使用 microsoft XNA 进行开发，并使用 C# 设计远程控制接口，并使用 System.Net.Sockets 技术传递参数值来移动机器人

注意：我知道在 Xbox 中使用 System.Net.Sockets 时有限制，但这个项目只能在 PC 中使用。

我的问题：是否有人对我的任务有任何想法或评论，无论是否可能。如果可能的话，请给我一些指导。如果不可能，请指导我使用可以完成任务的技术，例如不同的编程环境或工具？？？？![在此处输入图像描述](../Images/18202ce6a053e7e51af9795edbb5aaf1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:20:19.563

这是可能的。

我建议将问题分解为一些不同的部分。

**模拟**- 这纯粹是模拟机器人的位置及其周围的环境。完全忽略与此任务相关的任何图形。只关注所涉及的数学。例如，如果我的机器人在这里而一块石头在那边，我的机器人是否接触到了石头？由于它是一个 2D 应用程序，因此您可能能够摆脱很多假设和简化。例如，机器人和岩石都可以通过正方形或圆形来模拟。

（圆圈特别容易处理，因为它基本上只涉及检查机器人中心和岩石中心之间的距离是否足够大。）

**网络**- 创建两个简单的控制台应用程序并让它们通过套接字 API 进行通信。一旦你完成了这项工作，那么将它集成到 XNA 游戏中就会更加明显。

**UI** - 这是您可以（最终）专注于图形和用户输入的地方。这听起来可以通过常规的 Spritebatch 绘制调用和输入读取方法（例如键盘、鼠标或游戏板）来实现。

# facebook-graph-api - 检索到的帖子对象中缺少消息属性？

> ID：14926856
> 
> 赞同：0
> 
> 时间：2013-02-17T22:31:11.293
> 
> 标签：facebook-graph-api, post, message

我正在尝试使用 Graph API 检索某个用户的所有评论（不是在特定帖子上，而是以一般方式）。

我已经明白我需要查询用户的帖子，结果也将包含该用户的评论。我设法检索特定用户的帖子列表，并且确实看到了用户发布的评论。但是，消息属性总是缺失：

```
{
   "id": "100005227004296_112167712300795",
   "from": {
      "name": "Karen Amebbgkdbif Lausen",
      "id": "100005227004296"
   },
   "story": "\"Karens erster Kommentar zu...\" on Mike Amebkhdchid Letuchysky's photo.",
   "story_tags": {
      "35": [
         {
            "id": "100005200843894",
            "name": "Mike Amebkhdchid Letuchysky",
            "offset": 35,
            "length": 27,
            "type": "user"
         }
      ]
   },
   "privacy": {
      "value": ""
   },
   "type": "status",
   "application": {
      "name": "Photos",
      "id": "2305272732"
   },
   "created_time": "2013-02-17T20:59:52+0000",
   "updated_time": "2013-02-17T20:59:52+0000",
   "comments": {
      "count": 0
   }
} 
```

story 属性包含消息的一部分，但不是全部。

如何访问完整的评论（文本）？

提前致谢！亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T09:58:15.777

您可能需要撤回其他属性，例如 type、status_type 和 description。如果您喜欢在时间线中出现的其他内容的链接或评论，则可以从帖子提要中返回。

在图形 API 资源管理器中尝试这些字段以查看返回的数据：

```
 id,created_time,from,message,type,description,story,status_type 
```

# sql-server-ce - 在 SQL Server 2012 上使用 Join 进行更新时出现问题

> ID：14926858
> 
> 赞同：0
> 
> 时间：2013-02-17T22:31:24.523
> 
> 标签：sql-server-ce, sql-update, inner-join, sql-server-2012, with-statement

我对 SQL 不是很有经验，但我已经整理了一个查询，虽然我应该使用另一个表中的描述通过加入表来更新一个表中的两个价格（添加 20% 税），这是我的问题代码：-

```
UPDATE IT_PRICE
SET ITPrice1 = Price1 + (Price1 * .2), ITPrice2 = Price2 + (Price2 * .2)
INNER JOIN IT_PRICE
ON ITEMS.ID = IT_PRICE.ID
Where ITPrice1 <= 0 AND ITPrice2 <=0 AND ITEMS.Item = 'Jet Tec HP 78' 
```

我已经在 SQL Express 2008 和完整的 SQL 2012 中尝试过这个，但是我在“INNER”上遇到了一个语法错误，所以我尝试使用 WITH 语句从不同的角度来解决它：-

```
WITH Item_ID as (
SELECT ITEMS.ID FROM ITEMS WHERE ITEMS.Item = 'Jet Tec HP 78'
)
UPDATE IT_PRICE
SET ITPrice1 = Price1 + (Price1 * .2), ITPrice2 = Price2 + (Price2 * .2)
WHERE ITPrice1 <= 0 AND ITPrice2 <=0 AND ID = Item_ID 
```

现在我在执行语句时得到“无效的列名 Item_ID”。我想要做的就是在 IT_PRICE 表中的两个价格上对我匹配描述的项目中的所有项目加税。

如果有人能指出我正确的方向，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:22:23.403

您缺少 FROM 子句：

```
UPDATE IT_PRICE
SET ITPrice1 = Price1 + (Price1 * .2), ITPrice2 = Price2 + (Price2 * .2)
FROM IT_PRICE ITEMS INNER JOIN IT_PRICE
ON ITEMS.ID = IT_PRICE.ID
Where ITPrice1 <= 0 AND ITPrice2 <=0 AND ITEMS.Item = 'Jet Tec HP 78' 
```

# go - 方法接收者歧义

> ID：14926860
> 
> 赞同：4
> 
> 时间：2013-02-17T22:31:42.580
> 
> 标签：go

今天在旅途中工作。我注意到我可以将结构文字传递给与指向结构的指针关联的方法，反之亦然。为什么允许这样做？

```
package main

import (
    "fmt"
)

type Vertex struct {
    X, Y float64
}

func (v Vertex) Scale (f float64) {
    v.X = v.X * f
    v.Y = v.Y * f
}

func (v *Vertex) ScaleP(f float64) {
    v.X = v.X * f
    v.Y = v.Y * f
}

func main() {
    v := &Vertex{3, 4}
    vLiteral := Vertex{3, 4}

    v.Scale(5)
    fmt.Println(v)

    v.ScaleP(5)
    fmt.Println(v)

    vLiteral.Scale(5)
    fmt.Println(vLiteral)

    vLiteral.ScaleP(5)
    fmt.Println(vLiteral)
} 
```

输出：

```
&{3 4}
&{15 20}
{3 4}
{15 20} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T22:48:08.757

请参阅[方法集](http://golang.org/ref/spec#Method_sets)：

> 一个类型可能有一个与之关联的方法集（§接口类型，§方法声明）。接口类型的方法集就是它的接口。任何其他类型 T 的方法集由所有接收者类型为 T 的方法组成。对应指针类型 *T 的方法集是所有接收者为 *T 或 T 的方法集（即它还包含T)。进一步的规则适用于包含匿名字段的结构，如结构类型部分所述。任何其他类型都有一个空方法集。在方法集中，每个方法必须具有唯一的方法名称。
> 
> 类型的方法集决定了该类型实现的接口以及可以使用该类型的接收器调用的方法。

编辑：

另请参阅[电话](http://golang.org/ref/spec#Calls)：

> 如果 x 的（类型）的方法集包含 m 并且参数列表可以分配给 m 的参数列表，则方法调用 xm() 是有效的。如果 x 是可寻址的并且 &x 的方法集包含 m，则 xm() 是 (&x).m() 的简写：

# maven - jaxws:wsgen 找不到 Web 服务

> ID：14926862
> 
> 赞同：1
> 
> 时间：2013-02-17T22:31:44.727
> 
> 标签：maven, jax-ws

我通过以下方式设置了 jaxws-maven-plugin：

```
 <plugin>
            <groupId>org.jvnet.jax-ws-commons</groupId>
            <artifactId>jaxws-maven-plugin</artifactId>
            <version>2.2</version>
            <executions>
                <execution>
                    <id>generate-wsdl-for-random-num-generator</id>
                    <goals>
                        <goal>wsgen</goal>
                    </goals>
                    <configuration>
                        <sei>mydomain.sib.RandomNumberGeneratorEndpoint</sei>
                        <destDir>${basedir}\wsdls\</destDir>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

当我尝试运行时：

```
mvn jaxws:wsgen 
```

我收到以下错误：

```
[ERROR] Failed to execute goal org.jvnet.jax-ws-commons:jaxws-maven-plugin:2.2:w
sgen (default-cli) on project soap-ws: No @javax.jws.WebService found. -> [Help
1] 
```

mydomain.sib.RandomNumberGeneratorEndpoint 确实有 @javax.jws.WebService 注释：

```
@WebService(endpointInterface = "mydomain.RandomNumberGenerator")
public class RandomNumberGeneratorEndpoint implements RandomNumberGenerator {

        public double getRandomNumber(long limit) {
            return Math.random() * limit;
        }

} 
```

有谁知道我的设置有什么问题？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:53:48.370

事实证明，问题相当简单：我错过了插件设置中的*genWsdl*标签。

设置现在看起来像：

```
 <configuration>
            <sei>mydomain.sib.RandomNumberGeneratorEndpoint</sei>
            <genWsdl>true</genWsdl>
            <resourceDestDir>${basedir}\wsdls\randomNumberGenerator</resourceDestDir>
    </configuration> 
```

当我阅读[此处](http://jax-ws-commons.java.net/jaxws-maven-plugin/wsgen-mojo.html)的文档时，我确实看到了这个标签- 但我没有意识到这是问题所在......我掉球了。

无论如何，谢谢，希望这个答案有一天对某人有用。

# opengl - 部分渲染视口的问题

> ID：14926864
> 
> 赞同：0
> 
> 时间：2013-02-17T22:31:59.453
> 
> 标签：opengl

我使用以下代码尝试渲染视口的部分框架。开始和结束是框架的一部分，这是正确的。

```
 glViewport(start,0,end,SAVE_HEIGHT);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(90.0f, 1.0f, NEAR, FAR);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
    glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 
```

代码似乎乱序；我之前有它工作过。从我能找到的稀疏文档来看，这似乎是正确的顺序。

视觉输出是我看不到某些部分，并且渲染的部分没有正确的透视。请注意，我每次都渲染到同一个 FBO。

预期的输出是每次调用代码时都会将一部分视口渲染到同一个 fbo。

我的问题：如何在每次迭代时部分渲染到 FBO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:38:44.433

我显然在寻找 glScissor 。

# apache - Apache 不检测 CGI 脚本

> ID：14926866
> 
> 赞同：0
> 
> 时间：2013-02-17T22:32:02.033
> 
> 标签：apache, bash, cgi

我正在用 apache2 运行 ubuntu。我已经编辑了我的 httpd.conf 文件说...

```
ScriptAlias /cgi-bin/ /usr/local/apache2/cgi-bin/ 
```

我还创建了一个 bash 脚本并使其可执行，并将其放在`/usr/local/apache2/cgi-bin/`目录中。然而，当我发送...

```
http://[domain]/cgi-bin/vlc-http.cgi?226625 
```

我得到一个标准的 apache 404 URL not found 错误。我不知道如何解决这种情况，因为我是 apache 和 cgi 的新手。

额外信息：如果我向 /cgi-bin/ 发送一个 http 请求，那么 apache 会告诉我我没有访问权限。

# sql - ORACLE：解释插入计划

> ID：14926867
> 
> 赞同：2
> 
> 时间：2013-02-17T22:32:04.587
> 
> 标签：sql, oracle, explain, sql-execution-plan

当我执行以下语句时，我想知道为什么该值没有插入到表中。那是对的吗？是否可以插入值并观看解释计划？

```
EXPLAIN PLAN FOR INSERT INTO TABLE values(5); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T23:22:01.707

由于您正在运行解释查询，因此未插入该值。如果要插入记录，请运行此插入查询。

```
INSERT INTO TABLE values(5); 
```

根据您从哪里运行该命令，您可能必须在之后运行提交查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-26T11:47:39.623

这将完全符合您的要求（*插入值并观看解释计划*）...

```
SET AUTOTRACE ON
INSERT INTO myTABLE values(5);
SET AUTOTRACE OFF 
```

# node.js - 从 MongoDB 获取所有文档而不是所有模型

> ID：14926870
> 
> 赞同：0
> 
> 时间：2013-02-17T22:32:23.103
> 
> 标签：node.js, mongodb, mongoose

我正在使用 Mongoose 从我的 Node 应用程序中调用 MongoDB，如下所示：

```
var query = itemModel.find();
query.exec(function (err, items) {
  console.log(err);
  socket.emit("items", items); 
}); 
```

我有 3 个这样定义的模型：

```
var Schema = mongoose.Schema
  , ObjectId = Schema.ObjectId;
var playerModel = require('./models/player.js').make(Schema, mongoose);
var characterModel = require('./models/character.js').make(Schema, mongoose, ObjectId);
var itemModel = require('./models/item.js').make(Schema, mongoose); 
```

我的模型如下所示：

```
function make(Schema, mongoose) {
    itemSchema = new Schema({
        name: String
      , bonus: [{ 
            type: String
          , value: Number 
        }]
      , price: Number
      , slot: String
    });
    return mongoose.model('Character', characterSchema);
}
exports.make = make; 
```

出于某种原因，我得到了所有文件，无论它们是物品、角色还是玩家。因为我在 itemModel 上调用 find()，所以我只期待 Items，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:11:23.677

您显示的模型似乎是项目模型，但您正在使用“角色”名称创建模型。这意味着您告诉 Mongoose 项目的方案，并且它存储在“角色”集合中。假设您对每个其他模型（角色/玩家）都做了同样的事情，那么您就是 Mongoose，所有东西都在同一个集合中。

然后您查询该集合，您似乎对所有内容都存储在同一个集合中感到惊讶。我觉得你好像对 Mongoose/MongoDB 没有什么经验，所以我建议你下载并学习爱上 MongoVUE。这个应用程序是一个很好的 GUI，可以用来查看 MongoDB 数据库底层发生的事情。在开发过程中，您可能还希望启用调试功能，以便查看 mongoose 向服务器发起的查询 (mongoose.set('debug', true))。

# jquery - 将鼠标悬停在元素上时使用 jQuery 更改标题属性

> ID：14926878
> 
> 赞同：5
> 
> 时间：2013-02-17T22:33:43.323
> 
> 标签：jquery, jquery-ui, tooltip, jquery-ui-tooltip

我有一个具有标题属性的 div 按钮，我们将其用作使用 jQueryUI 的工具提示的文本。我想通过单击来更改按钮的工具提示。但是，当单击按钮并触发回调函数时，鼠标悬停在 div 上并且标题为空。

我该如何解决这种行为？看起来 jQueryUI Tooltip 小部件在悬停时删除了标题并将其放回鼠标上。

```
$( document ).tooltip();
$(".btn").click(function(){
    alert($(this).attr("title")); // Expect to see T1 or T2 but shows blank
    if ($(this).attr("title")=="T1"){
        $(this).attr("title","T2")
    }else{
        $(this).attr("title","T1")
    }
}); 
```

直播：http: [//jsfiddle.net/lordloh/ckTjA/](http://jsfiddle.net/lordloh/ckTjA/)

如果没有 jQueryUI 工具提示小部件，事情似乎工作正常：http: [//jsfiddle.net/lordloh/ckTjA/1/](http://jsfiddle.net/lordloh/ckTjA/1/)

此外，我将工具提示小部件应用于`$(document)`. 所以我不能使用`$(this).tooltip("option","content")`，因为工具提示没有`$(this)`明确应用。这会导致控制台上出现 Javascript 错误。

2013-02-18：截至目前，我正在运行`$(document).tooltip("destroy");`，更改标题属性和`$(document).tooltip();`. 不是一个优雅的解决方案:-(我正在寻找不是黑客的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T16:15:47.377

小部件从属性中删除文本`title`以防止出现本机浏览器工具提示。当它删除文本时，它将其存储在附加到元素的数据中。

您可以使用这行代码执行相同的操作：

```
$("#my-element").data("ui-tooltip-title", "My new tooltip message"); 
```

现在，如果用户将鼠标从元素上移开，然后将鼠标悬停在其上，它将显示新文本。

要立即显示新文本，您需要更新实时工具提示覆盖元素，幸好很容易找到。您只需要在更新文本后执行此操作：

```
$(".ui-tooltip-content").html($("#my-element").data("ui-tooltip-title")); 
```

[在 jQuery UI 1.10.0 上测试。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:37:49.743

使用工具提示小部件时，您可以通过其自己的 API 更新内容：

```
 $(this).tooltip('option', 'content', "New Content Goes Here"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-30T09:46:41.767

试试这个：

```

$('document').ready(function() { $('document').tooltip();
  $(".btn").click(函数(){
      alert($(this).attr("title"));
      if ($(this).attr("title")=="T1"){
          $(this).attr("title","T2");
      }别的{
          $(this).attr("title","T1");
      }
    });
  });

```

$( 'document' ) 应该用单引号或双引号（' 或 "） 并且它对我来说*很好*用$( 'document' ).tooltip() **;**

# laravel - 雄辩地大喊未定义的索引：用户名

> ID：14926880
> 
> 赞同：0
> 
> 时间：2013-02-17T22:33:59.143
> 
> 标签：laravel, laravel-3

我有这种情况，我改变`auth.php`了`'username'`从`username`到`email`所以我有

```
'username' => 'email' 
```

我没有任何`username`专栏了，但是在尝试登录时，雄辩地大喊未定义的索引：用户名：

```
.../laravel/auth/drivers/eloquent.php on line 39 
```

*   方法： http: [//paste.laravel.com/hWz](http://paste.laravel.com/hWz)
*   观点： http: [//paste.laravel.com/hWA](http://paste.laravel.com/hWA)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:55:39.530

傻我，由于我们指定`column`which 将作为`username for eloquent`，输入数组需要有一个用户名值。

所以在登录方法中我改变了用户数据：

***前 ：***

```
$userdata = array(
            'email'     => Input::get('email'),
            'password'      => Input::get('password'),
        ); 
```

***后 ：***

```
$userdata = array(
            'username'      => Input::get('email'),
            'password'      => Input::get('password'),
        ); 
```

# c# - 将数组中的数据与数字 ID 进行比较并将其插入数据网格

> ID：14926881
> 
> 赞同：0
> 
> 时间：2013-02-17T22:34:01.033
> 
> 标签：c#, arrays, datagrid

我有一个带有随机数的数组，如下所示

```
int[] numbers = new int[5] {2,5,3,7}; 
```

另外我的数据库中有一个表，ID中的ID和名称与我的数组具有相同的数值。

*   2、佩德罗
*   5、娟
*   3、克劳迪奥
*   7、贡萨洛

我需要做的是将数组中的数字与数据库的 id 进行比较，如果它们相等，则显示数据网格中关联的名称

什么想法是在数组上使用 For 循环所以，

```
for (int i = 0; i <numbers.length; i + +) 
```

并显示并因此获得名称'`select value from table where id =' + numbers[i];`

我需要太多帮助，希望你能帮助我，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:48:24.797

假设您有有效的连接，您可以使用诸如 SqlDataAdapter、DataTable 和 SqlConnection 之类的类来完成包含所需数据的表。您也可以使用稍微不同的查询来获得结果。看看这段代码：

```
string numList = string.Join(",", numbers.Select(i=>i.ToString()).ToList());
// you need to have connection initialized with connection string
SqlDataAdapter a = new SqlDataAdapter("select value from table where id in (" + numList + ")", connection);
DataTable dt = new DataTable();// the result goes here
a.Fill(dt);// actually querying the database 
```

就是这样 - 您现在从数据库中获得了与您提供的 ID 列表相对应的所有名称。现在您可以在 datagridview 或 datagrid 中显示该列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:54:22.317

所以问题可以归结为 ADO.NET 部分，如何`value`从`id`：

```
string sql = "SELECT value FROM dbo.table WHERE id = @id";
var pairs = new List<Tuple<int, string>>();
using (var con = new SqlConnection(yourConnectionString))
using (var cmd = new SqlCommand(sql, con))
{
    con.Open();
    foreach (int i in numbers)
    {
        cmd.Parameters.Clear();
        cmd.Parameters.AddWithValue("@id", i);
        using (SqlDataReader dr = cmd.ExecuteReader())
        {
            while (dr.Read())
            {
                pairs.Add(Tuple.Create(i, dr.GetString(0)));
            }
        }
    }
} 
```

我使用`List<Tuple<int, string>>`as 集合来存储所有 ID 和名称，您可以将其用作数据源或进一步处理（我不知道您是否只想显示在表中具有名称的 ID）。您可以通过这种方式访问​​ ID + 名称：

```
foreach(var pair in pairs)
{
    int id = pair.Item1;
    string name = pair.Item2;
} 
```

请注意，我使用了`using`-statement 来确保所有非托管资源都尽快得到处理。这也将关闭连接。

始终使用参数来防止 sql-injection 或转换问题，即使您目前不容易受到它的影响。

# jquery - 使用jquery“取消裁剪”悬停时的图像

> ID：14926882
> 
> 赞同：1
> 
> 时间：2013-02-17T22:34:22.870
> 
> 标签：jquery, image, effects

我敢肯定有人已经为此编写了一个插件，但我想知道是否有人知道一个允许在页面上显示图像的裁剪版本，并将鼠标悬停在它上面显示未裁剪的版本？

更多信息：

理想情况下，我想将未裁剪的图像存储在服务器上，并让页面最初显示裁剪后的版本（即可以用 css 裁剪）。在鼠标悬停时，图像在所有其他内容之前“增长”到其完整的、未裁剪的大小（即周围元素不移动）

# php - PHP Curl 只能在 CLI 中执行，而不是通过 Web 执行

> ID：14926884
> 
> 赞同：1
> 
> 时间：2013-02-17T22:34:50.787
> 
> 标签：php, apache, curl, web

我在这里有点困惑。我有一个文件**provision_test.php**，当使用**php provision_test.php**执行时，它会运行良好，执行 curl 并获取页面。但是当从网络**[http://example.com/provision_test.php](http://example.com/provision_test.php)**执行时，它无法正常运行。我正在运行 Ubuntu Linux 12.04.1 服务器 x86_64。

任何想法将不胜感激......如果您需要任何额外的信息，请告诉我，我很乐意帮助您帮助我。

**编辑 1**

**文件：provision_test.php**

```
<?php

    $domain = "example.net";
    $password = "123";
    $serverip = "example.com:10000";

    $ch = curl_init();

    $userpwd = 'root:password';

    curl_setopt($ch, CURLOPT_URL, "http://{$serverip}/virtual-server/remote.cgi?program=create-domain&domain={$domain}&pass={$password}&default-features");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($ch, CURLOPT_USERPWD, $userpwd);

    curl_exec($ch);
    curl_close($ch);

?> 
```

*系统上安装了 php5-curl 包。但是我没有在 php.ini 文件中专门启用 curl。我该怎么做呢？*

我可以验证 php5-curl 软件包是否已正确安装，但是我无法确认 apache 是否已启用它。我通过在命令行中执行它知道 curl 有效。

此外，我的服务器上没有 selinux 或类似的东西。

我将在 PHP 错误的情况下再次运行该脚本，看看我明天是否能找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-20T19:18:33.193

今天我遇到了与描述相同的问题。从 CLI 脚本工作正常，从浏览器结束时出现错误 7

请使用以下命令启用详细模式：

```
curl_setopt($ch, CURLOPT_VERBOSE, true); 
```

从 CLI 运行脚本

```
$proxy = 'url or ip';
$proxy_port = 8080;
$proxy_username = 'username';
$proxy_password = 'password';
curl_setopt($ch, CURLOPT_PROXY, $proxy);
curl_setopt($ch, CURLOPT_PROXYPORT, $proxy_port);
curl_setopt($ch, CURLOPT_PROXYUSERPWD, $proxy_username.':'.$proxy_password); 
```

这节省了我工作日的最后 30 分钟；-D

希望这对您有所帮助。

# php - php：复选框和表单

> ID：14926886
> 
> 赞同：0
> 
> 时间：2013-02-17T22:35:03.493
> 
> 标签：php, checkbox

我网站上的一个表单上有 20 个复选框，我需要在 1-3 之间进行选择。但你可以说

1、2 和 3 或 4、5 和 1

一旦用户选择了他想要的复选框，它就会根据他们选择的内容在数据库中搜索适当的答案。

我的想法是要有'IF'语句，但这意味着我会有负载。

还有其他办法吗？

```
 if ((!empty($1)))
  { 
  $sql= "SELECT * FROM db WHERE db.category 
  LIKE CONVERT( _utf8 '%1%' USING latin1 ) COLLATE latin1_swedish_ci $limit "; 
  $result = mysql_query($sql); 
  }
   else if ((!empty($1)) && (!empty($2))) { 
  $sql= "SELECT * FROM db WHERE db.category 
  LIKE CONVERT( _utf8 '%1%' USING latin1 ) COLLATE latin1_swedish_ci 
  AND db.category LIKE CONVERT( _utf8 '%2%' USING latin1 ) 
  COLLATE latin1_swedish_ci $limit "; $result = mysql_query($sql); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:41:13.470

如果您有复选框数组，您可以使用 foreach 循环遍历所有选中的复选框。你应该给一些 html o 更具体的是你的复选框值是什么。尝试阅读：[Get $_POST from multiple checkboxs](https://stackoverflow.com/questions/4997252/get-post-from-multiple-checkboxes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:42:22.833

在 JavaScript 中使用[DOM](http://www.w3schools.com/jsref/default.asp)并不难。

[此外，您将在此处](http://www.w3schools.com/jsref/dom_obj_checkbox.asp)找到有关复选框的信息

# event-handling - mvvmcross 自定义绑定到事件处理程序

> ID：14926889
> 
> 赞同：2
> 
> 时间：2013-02-17T22:35:20.740
> 
> 标签：event-handling, mvvmcross, custom-binding

我正在尝试在视图上实现 LongClick 功能并阅读以下内容，这些内容 [在 android 中提供了一些信息 mvvmcross touch 命令绑定](https://stackoverflow.com/questions/11815893/mvvmcross-touch-command-binding-in-android)

在代码中搜索 IMvxCommand 失败，因此假设这可能已过时？因此，我尽了最大努力，但无法获得任何 LongClick 功能——可能是由于对 C# 和事件处理程序的了解有限。我实现了以下但不确定 MvxRelayCommand 的用法。

```
public class LongClickEventBinding: MvxBaseAndroidTargetBinding
{
private readonly View _view;
private MvxRelayCommand<JobJob> _command;

public LongClickEventBinding(View view)
{
    _view = view;
    _view.LongClick += ViewOnLongClick;
}

private void ViewOnLongClick(object sender, View.LongClickEventArgs eventArgs)
{
    if (_command != null)
    {
        _command.Execute();
    }
}

public override void SetValue(object value)
{
   _command = (MvxRelayCommand<JobJob>)value;
}

protected override void Dispose(bool isDisposing)
{
    if (isDisposing)
    {
        _view.LongClick -= ViewOnLongClick;
    }
    base.Dispose(isDisposing);
}

public override Type TargetType
{
   get { return typeof(MvxRelayCommand<JobJob>); }
}

public override MvxBindingMode DefaultMode
{
    get { return MvxBindingMode.OneWay; }
}
} 
```

和

```
 protected override void FillTargetFactories(IMvxTargetBindingFactoryRegistry registry)
     {
     base.FillTargetFactories(registry);
     registry.RegisterFactory(new MvxCustomBindingFactory<View>("LongClick", view => new LongClickEventBinding(view)));
     } 
```

和

```
 public ICommand JobSelectedCommand
     {
     get { return new MvxRelayCommand<JobJob>(NavigateToJobTasks); }
     }

  public void NavigateToJobTasks(JobJob jobJob)
     {
        RequestNavigate<JobTaskListViewModel>(new { key = jobJob.JobID });
     } 
```

和

```
<Mvx.MvxBindableListView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
local:MvxBind="{'ItemsSource':{'Path':'GroupedList'},'LongClick':{'Path':'JobSelectedCommand'}}"    
local:MvxItemTemplate="@layout/listitem_job_old"/> 
```

但是，当我在模拟器上运行代码并在 listitem 上运行 LongClick 鼠标按钮时，并没有发生太多事情。是否需要在View中实现以下内容

```
public event EventHandler<View.LongClickEventArgs> LongClick; 
```

任何帮助/指针表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T05:53:38.217

对于列表，vNext MvxBindableListView 已经支持 ItemLongClick 一段时间了 - 请参阅

[https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableListView.cs#L77](https://github.com/slodge/MvvmCross/blob/vnext/Cirrious/Cirrious.MvvmCross.Binding.Droid/Views/MvxBindableListView.cs#L77)

请注意，此绑定挂钩到 ListView 的 ItemLongClick 而不是 LongClick

在你的 axml 中使用它，你应该能够做到：

```
<Mvx.MvxBindableListView
android:layout_width="fill_parent"
android:layout_height="fill_parent"
local:MvxBind="{'ItemsSource':{'Path':'GroupedList'},'ItemLongClick':{'Path':'JobSelectedCommand'}}"    
local:MvxItemTemplate="@layout/listitem_job_old"/> 
```

如果这不起作用，请就 Github 问题提交错误报告。

* * *

如果您想在通用（非列表）视图上进行自定义绑定，那么您的代码将需要切换到 ICommand 而不是 IMvxCommand，而且您也无法真正传入 Item 参数 - 所以您只需要在 ViewModel 上使用 MvxRelayCommand。

我已在问题列表中添加了视图级 LongClick 支持 - [https://github.com/slodge/MvvmCross/issues/165](https://github.com/slodge/MvvmCross/issues/165)

但是对于 ListView 它可能是您真正感兴趣的 ItemLongClick

# asp.net-mvc - 如何使用 Fluent Security 在 ASP.net MVC 应用程序中设置 SSL 重定向？

> ID：14926894
> 
> 赞同：1
> 
> 时间：2013-02-17T22:35:44.780
> 
> 标签：asp.net-mvc, redirect, ssl, fluent-security

使用 Fluent Security 在 mvc Web 应用程序中的控制器视图上设置 SSL 重定向的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:35:44.780

最好的方法是创建自定义策略和策略处理程序。这是我完成它的方式：

我的自定义政策

```
public class RequireSslPolicy : ISecurityPolicy
{
    public PolicyResult Enforce(ISecurityContext context)
    {
        var req = HttpContext.Current.Request;
        if (!req.IsSecureConnection && !req.IsLocal)
            return PolicyResult.CreateFailureResult(this, "A Secure Connection is Required.");
        return PolicyResult.CreateSuccessResult(this);
    }
} 
```

我的自定义策略处理程序

```
public class RequireSslPolicyViolationHandler : IPolicyViolationHandler
{
    public ActionResult Handle(PolicyViolationException exception)
    {
        var req = HttpContext.Current.Request;
        var url = req.Url.ToString().ToLower().Replace("http:", "https:");
        return new RedirectResult(url);
    }
} 
```

将策略添加到控制器或控制器中的操作的代码

```
c.For<AccountController>().AddPolicy<RequireSslPolicy>(); 
```

就是这样！当然，您需要确保正确配置依赖注入并遵循 Fluent Security 命名约定。但是一旦这些都是正确的，您应该会看到此代码完美运行！

# ruby-on-rails - 检索密码哈希时出现编码错误

> ID：14926896
> 
> 赞同：2
> 
> 时间：2013-02-17T22:36:12.430
> 
> 标签：ruby-on-rails, couchbase

我想通过使用 PBKDF2 并将密码哈希和盐存储在数据库中来实现用户身份验证。

我的用户类看起来像这样

```
class User < Couchbase::Model
  require 'pbkdf2'

  attribute :name
  attribute :surname
  attribute :email
  attribute :type
  attribute :password
  attribute :password_hash
  attribute :password_salt

  attribute :user_since, :default => lambda{ Time.now }

  #... Some not so interesting validates

  before_create :prepare_to_create

  #returns the document of the user found for the given id
  def self.retrieve(id)
    return User.bucket.get(id)
  end

  def encrypt_password
    if self.password.present? then
      hashedpassword = create_password(self.password)
    self.password_hash = hashedpassword.value
    self.password_salt = hashedpassword.salt
    end
  end

  #Creates a new PBKDF2 instance with the given string
  #and the given salt. If no salt is specified
  # a SecureRandom.base(16) string is used
  def create_password(pwString, saltString = SecureRandom.urlsafe_base64(16))
    password = PBKDF2.new do |p|
      p.password = pwString
      p.salt = saltString
      p.iterations = 5000
    end
  end

  def prepare_to_create
    encrypt_password
    @id = User.bucket.incr("user_key", 1, :initial => 1).to_s
  end

end 
```

控制器看起来像这样：

```
class UsersController < ApplicationController
  def new
    @user = User.new
    @user.type = params[:type]
  end

  def create
    @user = User.new(params[:user])    
    if @user.save
      data = User.retrieve(@user.id)
      newUser = User.new(:name => data[:name],
                         :surname => data[:surname],
                         :email => data[:email],
                         :type => data[:type],
                         :password => data[:password])

      redirect_to root_url, :notice => "You successfully signed up " + newUser.full_name 
    else
      render "new"
    end
  end

end 
```

它的安全性很好，但是当我调用检索以查找用户时，我得到一个异常，看起来密码哈希包含非 UTF-8 字符。

它看起来像这样：

```
Couchbase::Error::ValueFormat (unable to convert value for key '8': lexical error: invalid bytes in UTF8 string.
      :"123456","password_hash":"\r�����;��X�\u001E���S=c\u0018���
                 (right here) ------^
): 
```

现在我想知道我是否必须以某种方式清理密码。我必须转义一些字符吗？还是我应该使用其他加密功能？

PS：我知道密码以清除类型存储，我稍后会修复它：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T14:17:56.330

好吧，如果你只是打电话`hashedpassword.value`，你会得到哈希的二进制表示，你必须像下面这样调用它：

```
def encrypt_password
    if self.password.present? then
      hashedpassword = create_password(self.password)
      self.password_hash = hashedpassword.hex_string
      self.password_salt = hashedpassword.salt
  end
end 
```

# grails - 从 Grails 应用程序外部插入数据时，Grails 如何设置 _idx 字段？

> ID：14926899
> 
> 赞同：0
> 
> 时间：2013-02-17T22:36:58.113
> 
> 标签：grails, grails-orm

我有一个带有两个域的脚手架 Grails 应用程序，Person 和 Course。Person 属于 Course，Course 有很多 Person。我已经修改了课程的 show.gsp 以列出与所选课程相关的所有人员。

为此，Course.groovy 包含以下行：

```
List persons = new ArrayList() 
```

因此，“person”数据库表包含一个persons_idx 字段。我经常会从外部网站向我的 Grails 应用程序*之外的“人员”表添加新数据。*

插入新数据时，如何确定将 person_idx 设置为什么？

因为我关心排序，所以我最初使用的是 SortedSet 而不是 ArrayList。但是由于我是按 Person.lastName 排序的，并且总会有多个姓氏相同的人，因此该列表将排除那些与其他人姓氏相同的人。我希望有另一种方式...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:59:35.043

尽可能避免让两个应用程序操作同一个数据库。您的第二个应用程序能否改为在控制应用程序上调用一个操作以将一个人添加到课程中，并传递参数来指定每个人？这样，只有一个应用程序正在写入数据库，从而减少了缓存、索引和序列问题。

您还声明 Person belongsTo Course... 所以您为“Bob Jenkins”为他所在的每门课程创建一个新的 Person？这似乎太过分了。您可能应该为此研究 ManyToMany。

不幸的是，如果不迁移到服务，您可能希望更改您尝试添加 Person 的 Course 子级的一些行的索引，因为该索引是所有课程中的人员。

我建议回到“设置”，并在应用程序中进行排序。您关于排序的其他问题已经告诉您不要覆盖 compareTo 来检查姓氏。如果我是你，我会完全忘记覆盖 compareTo （除了检查 ID，如果你愿意的话），只使用 sort() 方法，传入一个正确排序对象的闭包。

# asp.net-mvc - 从 Html 到 Controller 的 C# 对象引用

> ID：14926902
> 
> 赞同：0
> 
> 时间：2013-02-17T22:37:19.790
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我的域对象`Store`包含对该对象的引用`Chain`：

```
public class Store
{
    public Chain Chain { get; set; }
} 
```

在创建新商店时，可以设置关联的连锁店。我通过 ViewBag 传递链对象并使用`Html.DropDownListFor`for 选择来实现这一点：

```
@Html.DropDownListFor(
    x => x.Chain,
    new SelectList(ViewBag.Chains, "Id", "Name")) 
```

到目前为止一切顺利，但回到控制器（提交后）链属性为空。我想我可以将 DropDownList 设置为，`Chain.Id`但随后我需要再次加载实体。有没有更好的方法来获取/保持正确的参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:40:40.727

> 有没有更好的方法来获取/保持正确的参考？

不，这就是 HTML 的工作原理。只有选择的值被发送到服务器，您需要使用这个值来加载相应的实体。在进入 ASP.NET MVC 开发之前，请先学习 HTML。这对你很有帮助。这是正确的方法：

```
@Html.DropDownListFor(
    x => x.Chain.Id,
    new SelectList(ViewBag.Chains, "Id", "Name")
) 
```

好吧，事实上，老实说，处理这个问题的最正确方法是摆脱所有`ViewBag`废话并在应用程序中使用真实的视图模型：

```
@Html.DropDownListFor(
    x => x.ChainId,
    Model.AvailableChains
) 
```

where`AvailableChains`当然将是`IEnumerable<SelectListItem>`您为此视图准备的视图模型上的类型属性。*如果您想以正确的方式*执行 ASP.NET MVC，您应该始终使用视图模型并且永远不要将域模型传递给您的视图。

以下是您的视图模型的外观：

```
public class MyViewModel
{
    public int ChainId { get; set; }
    public IEnumerable<SelectListItem> AvailableChains { get; set; }
} 
```

# ruby - Ruby：没有要加载的文件——EC2

> ID：14926906
> 
> 赞同：0
> 
> 时间：2013-02-17T22:37:43.757
> 
> 标签：ruby, rubygems, amazon-ec2

我正在使用该网站上的脚本：http: [//dysinger.net/2008/10/13/using-amazon-ec2-metadata-as-a-simple-dns/](http://dysinger.net/2008/10/13/using-amazon-ec2-metadata-as-a-simple-dns/) 我不得不说我是 PHPPerson，我知道几乎没有关于红宝石。无论如何，我在 Amazon Linux 的 ec2 实例上使用这个 scipt，所以我用 yum 安装了 ruby​​ 和 ruby​​gems，我做到了

```
gem install amazon-ec2 
```

$宝石清单：

```
*** LOCAL GEMS ***

amazon-ec2 (0.9.17)
rubygems-update (1.8.25)
xml-simple (1.1.2) 
```

看起来不错，但是当我运行脚本时，我得到：

```
/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require':   no such file to load -- EC2 (LoadError)
from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
from /usr/local/sbin/hosts:2
from /usr/local/sbin/hosts:2:in `each'
from /usr/local/sbin/hosts:2 
```

...为什么？我试着想了一个小时，但仍然不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:48:52.360

博客文章有点过时了。为了使用 amazon-ec2 gem，您需要`require 'AWS'`，而不是`require 'EC2'`. 这意味着您必须将第二行更改为：

```
%w(optparse rubygems AWS resolv pp).each {|l| require l} 
```

您还必须更改此行：

```
EC2::Base.new(options).describe_instances # etc... 
```

到

```
AWS::EC2::Base.new(options).describe_instances # etc... 
```

# mysql - MySQL 存储过程返回 false

> ID：14926910
> 
> 赞同：0
> 
> 时间：2013-02-17T22:37:51.710
> 
> 标签：mysql, stored-procedures, jdbc

调用此方法后，将调用存储过程（它将 1000 条新记录放入 db）。但是 bool 是假的，为什么？

```
public void loadTestData() throws SQLException {

    CallableStatement cStmt = connection.prepareCall("{call loadTestData }");

   boolean bool = cStmt.execute();

   if (bool) System.out.println("test data is loaded");
    else System.out.println("test data is not loaded!");
} 
```

* * *

程序在这里：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `loadTestData`()
BEGIN

 DECLARE x INT;

 delete from user where id<5000;

 SET x = 0;
  WHILE x <= 100 DO
   insert into user (name, description) VALUES( 
        concat("name", x), 
        concat("description", x)
   );
   SET x = x + 1;
  END WHILE;

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:43:19.287

如果您的过程的第一个结果不是`ResultSet`，则返回值为`false`.

**[PreparedStatement.execute()](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#execute%28%29)**

# drupal - 升级站点的所有文件时如何最大限度地减少停机时间并且有很多调整要做？

> ID：14926914
> 
> 赞同：0
> 
> 时间：2013-02-17T22:38:07.513
> 
> 标签：drupal

我需要在我的站点（它是 Drupal 6 站点，我正在将其升级到 Drupal 7）进行一些重大升级，并且我需要一段时间才能完成我需要更改的所有项目（我在全部升级到 Drupal 7 版本后必须做一些调整，因为某些模块有不同的配置）。如果一切顺利，我应该只需要一天的时间，但可能会出现问题。

那么，**什么是进行干净过渡并使网站离线几分钟的最佳解决方案？**

我考虑将我的站点克隆到另一个文件夹（并可能将其分配给我未使用的域之一，以便在使用它时更轻松地访问），然后在克隆的帐户中进行升级。

因此，当准备就绪时，我只需将我的域指向新的克隆文件夹。

唯一的停机时间是注册商更改指向域所需的时间......

**当您需要升级站点并做一些需要您一段时间的事情时，您会怎么做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:41:41.207

您将网站的文档根目录克隆到另一个位置并确保一切正常的方法是所谓的“分段”升级，它是一种广泛使用的确保缩短停机时间的方法。它使您能够在发布更新之前对其进行测试，这很棒。分配一个未使用的域很好，因为这样您就可以以部署（而不是本地）的方式进行测试。

# flash - 反编译.swf，但没有显示代码！请帮忙

> ID：14926918
> 
> 赞同：-2
> 
> 时间：2013-02-17T22:38:11.480
> 
> 标签：flash, decompiling, decompiler

花了两周时间创建了数百张照片的 Flash 演示文稿，当 Nero 7 崩溃时文件损坏了:(并且我的电脑重新启动。快速搜索告诉我一些反编译器 (showmycode.com) 可以保存文件...

但它没有向我展示一行代码:(

它适用于其他 .swf 文件。

有谁知道为什么没有显示任何代码？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T09:47:33.210

这可能由于不同的原因而发生 - 过时的反编译器（例如无法反编译 LZMA 压缩的 SWF）、反编译器中的一些错误等。尝试使用其他反编译器，如 ASV（Action Script Viewer）、Sothink 或 Trillix。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T21:36:02.557

尝试[https://www.free-decompiler.com/flash/](https://www.free-decompiler.com/flash/)或 rabcsm ...也是不错的反编译器

# java - java.lang.IllegalAccessError：试图访问字段

> ID：14926919
> 
> 赞同：2
> 
> 时间：2013-02-17T22:38:30.867
> 
> 标签：java, class, gson, loader

我收到错误消息：

java.lang.IllegalAccessError：试图从 jar 中的类 Jest-0.0.2.jar 中的方法访问字段 com.google.gson.JsonNull.INSTANCE。我还使用 gradle 工件加载了包 com.google.gson： compile 'com.google.code.gson:gson:2.2.1'

所有项目编译正常，但在运行时，我收到以下错误：

java.lang.IllegalAccessError：试图从 io.searchbox.client.http.JestHttpClient.isJson(JestHttpClient.java:155) 的类 io.searchbox.client.http.JestHttpClient 访问字段 com.google.gson.JsonNull.INSTANCE io.searchbox.client.http.JestHttpClient.createJsonStringEntity(JestHttpClient.java:142) 在 io.searchbox.client.http.JestHttpClient.constructHttpMethod(JestHttpClient.java:117) 在 io.searchbox.client.http.JestHttpClient.execute( JestHttpClient.java:46)

不知道为什么会出现这个错误。我知道如果有两个单独的类加载器，这是可能的。但是我没有做任何特别的事情来加载多个类加载器。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:58:12.610

发现了问题。并不是我加载了两个版本的 Gson jar，而是另一个第三方 Jar，tika-app-1.2.jar，它实际上将包 com.google.gson 捆绑为他们的 jar 的一部分。

事实证明，他们拥有的 Jar 版本是 1.7.1 版本，它具有不同版本的 JavaNull.java 和 JavaElement.java 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:42:57.340

听起来 JsonNull.INSTANCE 是受保护的或私有的，并且您正试图直接从 JestHttpClient 访问它，它在 JsonNull 的包（com.google.gson）之外。

至于为什么在运行时得到它...如果 JestHttpClient 是第三方jar，并且您没有自己编译它，则编译它不会出错。也有可能 JestHttpClient 是针对与您正在使用的版本不同的 Gson 版本编译的——其中 JsonNull.INSTANCE 是公开的。

# java - Java，Long.parse 二进制字符串

> ID：14926920
> 
> 赞同：9
> 
> 时间：2013-02-17T22:38:38.420
> 
> 标签：java, long-integer

为什么这段代码会抛出`NumberFormatException`：

```
String binStr = "1000000000000000000000000000000000000000000000000000000000000000";
System.out.println(binStr.length());// =  64
System.out.println(Long.parseLong(binStr, 2)); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-17T22:40:23.137

~~`1000000000000000000000000000000000000000000000000000000000000000`大于`Long.MAX_VALUE`。~~

请参阅[https://stackoverflow.com/a/8888969/597657](https://stackoverflow.com/a/8888969/597657)

 ~~考虑[`BigInteger(String val, int radix)`](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html#BigInteger(java.lang.String,%20int))改用。

* * *

**编辑：**

好的，这对我来说是新的。似乎`Integer.parseInt(binaryIntegerString, 2)`并将`Long.parseLong(binaryLongString, 2)`二进制解析为符号幅度而不是2的补码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T22:40:23.177

因为超出范围。 `1000...000`是 2 ^(63)，但`Long`只上升到 2 ^(63) - 1。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-17T23:49:15.167

这对于所有`Long`、`Integer`和都是相同`Short`的`Byte`。我会用一个`Byte`例子来解释，因为它是可读的：

```
System.out.println(Byte.MIN_VALUE); // -128
System.out.println(Byte.MAX_VALUE); // 127
String positive =  "1000000"; // 8 binary digits, +128 
String negative = "-1000000"; // 8 binary digits, -128
String plus     = "+1000000"; // 8 binary digits, +128
Byte.parseByte(positive, 2); //will fail because it's bigger than Byte.MAX_VALUE 
Byte.parseByte(negative, 2); //won't fail. It will return Byte.MIN_VALUE
Byte.parseByte(plus, 2);     //will fail because its bigger than Byte.MAX_VALUE 
```

无论提供什么基数，这些数字都被解释为无符号数。如果你想要一个负值，你必须在字符串的开头加上减号。[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html#parseLong%28java.lang.String,%20int%29)说：

> 将字符串参数解析为第二个参数指定的基数中的有符号长整数。字符串中的字符必须都是指定基数的数字（由是否`Character.digit(char, int)`返回非负值来决定），除了第一个字符可以是ASCII减号`'-' ('\u002D')`表示负值或ASCII加号`'+' ('\u002B')`表示正值. 返回结果的 long 值。

为了得到`MAX_VALUE`我们需要：

```
String max  =  "1111111"; // 7 binary digits, +127 
// or
String max2 = "+1111111"; // 7 binary digits, +127 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T22:44:00.737

最大的 long 值实际上是：

```
0111111111111111111111111111111111111111111111111111111111111111b = 9223372036854775807 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-08-29T11:06:04.733

这是因为 Long.parseLong 无法解析二进制补码表示。在 Java SE 中解析二进制补码表示的唯一方法是 BigInteger：

```
long l = new BigInteger("1000000000000000000000000000000000000000000000000000000000000000", 2).longValue() 
```

这给出了预期的 -9223372036854775808result

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-05T23:36:05.117

这是二进制格式的最大可能长 (9223372036854775807 = 2 exp 63 - 1)。请注意最后一位数字末尾的 L。

```
 long largestLong = 0B0111_1111_1111_1111_1111_1111_1111_1111_1111_1111_1111_1111_1111_1111_1111_1111L; 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-06-21T18:26:28.417

实际上，这对我有用：

```
String bitStr = "-1000000000000000000000000000000000000000000000000000000000000000";
System.out.println(Long.parseLong(bitStr, 2)); 
```

这是一件事：在 Long.parseLong() 代码逻辑中首先寻找显式符号。并且分别对符号使用不同的限制（Long.MAX_VALUE 表示正数，Long.MIN_VALUE 表示负二进制文字）。如果这个逻辑首先查找最高位（0 表示正数，1 表示负数）符号可能会更好~~

# ruby-on-rails - Ruby捆绑安装错误

> ID：14926923
> 
> 赞同：0
> 
> 时间：2013-02-17T22:39:45.610
> 
> 标签：ruby-on-rails, ruby, git, forem

我正在尝试在我的服务器上安装 forem，但运行时出现此错误`bundle install`：

```
Fetching git://github.com/radar/forem.git
fatal: unable to connect to github.com:
github.com[0: 207.97.227.239]: errno=Connection refused

Git error: command `git clone 'git://github.com/radar/forem.git' "/home/box1/.bundler/cache/git/forem-8662403862ddafa624baa2b55484281b10db048e" --bare --no-hardlinks` in directory /home/box1/rails_apps/forem has failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:43:33.747

尝试使用 HTTP 而不是 SSH 进行克隆：

```
git clone https://github.com/radar/forem.git 
```

[查看类似问题的答案和评论。](https://stackoverflow.com/questions/5015732/why-do-i-get-unable-to-connect-a-socket-when-i-try-to-clone-via-a-git-url)

# java - 从方法中获取值（java）

> ID：14926924
> 
> 赞同：0
> 
> 时间：2013-02-17T22:40:04.783
> 
> 标签：java, methods

到目前为止，我已经完成了此代码，但我正在尝试学习如何完成此方法，以便它将编译使用的总边数并在最后一个打印行中打印该值。问题方法是getTotalSides，我目前将它设置为返回0，但我希望它返回总边数，意思是：mp1.getSides() + mp2.getSides() + mp3.getSides() + mp4.getSides( ）。

```
public class TestParts {

public static void main(String[] args) {

    MyPolygon mp1 = new MyPolygon();
    MyPolygon mp2 = new MyPolygon(4);
    MyPolygon mp3 = new MyPolygon(5);
    MyPolygon mp4 = new MyPolygon(6);
    System.out.println("Polygon 1 has " + mp1.getSides()
            + " sides, angles total " + mp1.getSumOfAngles());
    System.out.println("Polygon 2 has " + mp2.getSides()
            + " sides, angles total " + mp2.getSumOfAngles());
    System.out.println("Polygon 3 has " + mp3.getSides()
            + " sides, angles total " + mp3.getSumOfAngles());
    System.out.println("Polygon 4 has " + mp4.getSides()
            + " sides, angles total " + mp4.getSumOfAngles());
    System.out.println("There are " + MyPolygon.getTotalSides()
            + " total sides");

}
}

class MyPolygon {
double getSides;

MyPolygon() {
    getSides = 3;
}

static double getTotalSides() {

    return 0;
}

double getSides() {
    // TODO Auto-generated method stub
    return getSides;
}

MyPolygon(double newGetSides) {
    getSides = newGetSides;
}

double getSumOfAngles() {
    return ((getSides - 2) * 180);
}

void setGetSides(double newGetSides) {
    getSides = newGetSides;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:43:54.557

如果你真的需要一个方法，你可以为此目的使用 varargs ( [variable arity arguments )：](https://stackoverflow.com/questions/14739831/what-is-a-variable-arity-parameter)

```
static double getTotalSides(MyPolygon... polygons) {
  double x = 0;

  for (MyPolygon p: polygons)
  {
   x+= p.getSides();
  }
   return x;
} 
```

然后像这样调用：

```
System.out.println("There are " + MyPolygon.getTotalSides(mp1,mp2,mp3,mp4)
            + " total sides"); 
```

或者做一个数组

```
MyPolygon myPolygons = new MyPolygon [4];
myPolygons [0] = mp1;
myPolygons [1] = mp2;
myPolygons [2] = mp3;
myPolygons [3] = mp4;
System.out.println("There are " + MyPolygon.getTotalSides(myPolygons)
            + " total sides"); 
```

*但是，更好的解决方案是从一开始就将*多边形存储在数组/列表中，然后将整个数组/列表传递给方法，执行循环并返回结果。但请注意，列表和数组是不同的，因此您需要相应地修改方法签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:45:55.320

你需要看看`scope`你的对象，也许你可以使用某种`Collection`

```
public class TestParts {

    public static void main(String[] args) {

        final MyPolygon mp1 = MyPolygon.newInstance(3);
        final MyPolygon mp2 = MyPolygon.newInstance(4);
        final MyPolygon mp3 = MyPolygon.newInstance(5);
        final MyPolygon mp4 = MyPolygon.newInstance(6);
        System.out.println("Polygon 1 has " + mp1.getSides()
                + " sides, angles total " + mp1.getSumOfAngles());
        System.out.println("Polygon 2 has " + mp2.getSides()
                + " sides, angles total " + mp2.getSumOfAngles());
        System.out.println("Polygon 3 has " + mp3.getSides()
                + " sides, angles total " + mp3.getSumOfAngles());
        System.out.println("Polygon 4 has " + mp4.getSides()
                + " sides, angles total " + mp4.getSumOfAngles());
        System.out.println("There are " + MyPolygon.getTotalSides()
                + " total sides");

    }
}

class MyPolygon {

    private static final Collection<MyPolygon> POLYGONS = new LinkedList<MyPolygon>();
    private final double sides;

    private MyPolygon(final double sides) {
        this.sides = sides;
    }

    public static MyPolygon newInstance(final double sides) {
        final MyPolygon polygon = new MyPolygon(sides);
        POLYGONS.add(polygon);
        return polygon;
    }

    public static double getTotalSides() {
        double sides = 0d;
        for (final MyPolygon polygon : POLYGONS) {
            sides += polygon.getSides();
        }
        return sides;
    }

    public double getSides() {
        return sides;
    }

    public double getSumOfAngles() {
        return ((sides - 2) * 180);
    }
} 
```

我已经整理了您的代码，使其符合命名约定（无`getSides`变量）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:43:43.200

你为什么不把你写的表达式写进去：

```
System.out.println("There are " + (mp1.getSides() + mp2.getSides() + mp3.getSides() + mp4.getSides()) + " total sides"); 
```

由于您尝试将 getTotalSides 编写为类的一部分，因此没有一种简单的方法可以检查所有其他实例化对象并调用它们的方法 getSides 来将所有边相加。您可以定义一个函数来获取所有多边形对象并将边相加，但它不能在类定义下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T22:57:48.047

如果您想要有关已创建的所有边数的全局信息，请尝试使用静态变量：

```
class MyPolygon {

    private static int totalSides;
    private int sides;

    MyPolygon() {
        this(3); // constructor chaining: really useful
    }

    MyPolygon(int numSides) {
        this.sides = numSides;
        MyPolygon.totalSides += numSides;
    }

    // ... the rest, incl. getter for sides and static getter for totalSides

} 
```

但是，当您不再需要一个多边形时，您必须以某种方式再次显式减少数字......

# java - java.lang.RuntimeException：在当前线程中找不到 OpenGL 上下文

> ID：14926929
> 
> 赞同：1
> 
> 时间：2013-02-17T22:40:46.577
> 
> 标签：java, applet, lwjgl

我试图为我创建的一个小游戏创建一个小程序。当我正常运行游戏（没有小程序）时，它工作得很好，但是当我尝试将它作为小程序运行时，它给了我以下错误。

我正在使用 lwjgl 2.8.4 opengl

```
java.lang.RuntimeException: No OpenGL context found in the current thread.
java.lang.RuntimeException: Unable to create display
    at com.base.engine.GameApplet.init(GameApplet.java:202)
    at sun.applet.AppletPanel.run(AppletPanel.java:434)
    at java.lang.Thread.run(Thread.java:722) 
```

这是 GameApplet.java 的代码

```
package com.base.engine;

import com.base.game.Game;
import java.applet.Applet;
import java.awt.BorderLayout;
import java.awt.Canvas;
import java.util.ArrayList;
import java.util.logging.Level;
import java.util.logging.Logger;
import org.lwjgl.LWJGLException;
import org.lwjgl.input.Keyboard;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;
import static org.lwjgl.opengl.GL11.*;

public class GameApplet extends Applet {

    Canvas display_parent;

    /** Thread which runs the main game loop */
    Thread gameThread;

    /** is the game loop running */
    private static boolean running = false;

    private static Game game;

    public void startLWJGL() {
        //gameThread = new Thread() {
                       // @Override
            //public void run() {
                running = true;
                try {
                                        initDisplay();
                    Display.setParent(display_parent);
                    System.out.println("hij loopt");
                                        //Display.create();
                                        System.out.println("hij loopt");

                                        initGL();
                                        initGame();

                                        gameLoop();

                                        cleanUp();

                } catch (LWJGLException e) {
                    return;
                }
                //gameLoop();                                
            //}

        //};
        //gameThread.start();
    }

    private static void initGame()
    {
        game = new Game();
    }

    private static void getInput()
    {
        System.out.print("before input");
        game.getInput();
        System.out.print("after input");
    }

    private static void update()
    {
        game.update();
    }

    private static void render()
    {
        glClear(GL_COLOR_BUFFER_BIT);
        glLoadIdentity();

        game.render();

        Display.update();
        Display.sync(60);
    }

    private static void gameLoop()
    {  

            System.out.print("before while");
            while(!Display.isCloseRequested())
            {
                while(running) {
                    System.out.print("before running shit");
                    Display.sync(60);
                    Display.update();

                    Display.destroy();

                    //getInput();
                    update();
                    render();
                    System.out.println("running gameLoop..");
                }
            }
            System.out.print("after while");
    }

    private static void initGL()
    {        

        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0, Display.getWidth(), 0, Display.getHeight(), -1, 1);
        glMatrixMode(GL_MODELVIEW);

        glDisable(GL_DEPTH_TEST);

        glClearColor(0,0,0,0);
    }

    private static void cleanUp()
    {
        Display.destroy();
        Keyboard.destroy();
    }

    private static void initDisplay()
    { 
        try 
        {

            Display.setDisplayMode(new DisplayMode(800,600));
            Display.create();
            Keyboard.create();
            System.out.println("Keyboard created");
            Display.setVSyncEnabled(true);
        } catch (LWJGLException ex) {
            Logger.getLogger(Main.class.getName()).log(Level.SEVERE, null, ex);
        } 
    }

    public static ArrayList<GameObject> sphereCollide(float x, float y, float radius)
    {
        return game.sphereCollide(x, y, radius);
    }

    /**
     * Tell game loop to stop running, after which the LWJGL Display will 
     * be destoryed. The main thread will wait for the Display.destroy().
     */

    private void stopLWJGL() {
        running = false;

    }

        @Override
    public void start() {
        //startLWJGL();
    }

        @Override
    public void stop() {

    }

    /**
     * Applet Destroy method will remove the canvas, 
     * before canvas is destroyed it will notify stopLWJGL()
     * to stop the main game loop and to destroy the Display
     */
        @Override
    public void destroy() {
        remove(display_parent);
        super.destroy();
    }

        @Override
    public void init() {
        setLayout(new BorderLayout());
        try {
            display_parent = new Canvas() {
                                @Override
                public final void addNotify() {
                    super.addNotify();
                    startLWJGL();
                }
                                @Override
                public final void removeNotify() {
                    stopLWJGL();
                    super.removeNotify();
                }
            };
            display_parent.setSize(800,600);
            add(display_parent);
                        System.out.println("gaat ie lekker");
            display_parent.setFocusable(true);
            display_parent.requestFocus();
            display_parent.setIgnoreRepaint(true);
            setVisible(true);
        } catch (Exception e) {
            System.err.println(e);
            throw new RuntimeException("Unable to create display");
        }
    }

} 
```

有人可以告诉我我做错了什么吗？

# backbone.js - Backbone.js木偶ItemView点击事件不起作用

> ID：14926931
> 
> 赞同：1
> 
> 时间：2013-02-17T22:40:49.133
> 
> 标签：backbone.js, marionette, backbone-events

我**已经**能够在我的木偶控制器中触发事件，如下所示：

```
 ...snip...
 var Controller = {};

_.extend(Controller, Backbone.Events);

// private
var Layout = Marionette.Layout.extend({
    template: _.template(layout),

    regions: {
        inspectorStart: "#inspector_start",
        loginStart:     "#login_start",
        playerStart:    "#player_start"
    }

});

// private
var _initializeLayout = function() {
    console.log('initialize Start Layout...');
    Controller.layout = new Layout();
    Controller.layout.on('show', function() {       **// This works**
        Controller.trigger('startLayout:rendered'); **// This works**
    });
    vent.trigger('app:show', Controller.layout); **// This works**

};

// Listen for events ///////////////////////////////////////////
// controller attach a sub view
Controller.on("startLayout:rendered", function() {  **// This works**
    console.log('startLayout:rendered =>StartController'); **// This works**
    // render views for the existing HTML in the template,...
    var inspectorStartView = new InspectorStartView();
    //  and attach it to the layout (i.e. don't double render)
    Controller.layout.inspectorStart.attachView(inspectorStartView);
    Controller.trigger('inspectorStart:show', inspectorStartView); **// This works**
...snip... 
```

但是，当我尝试使用扩展的木偶 ItemView 时，我无法让事件或触发器工作。

```
// views/InspectorStartView.js
// -------
define(["jquery", "marionette", "text!templates/InspectorStart.html"],

function($, marionette, template){

    var InspectorStartView = marionette.ItemView.extend({
       template: template,

        events: {
            'click .starting_thumbnail' : 'start'
            //'click #inspectorStart' : 'start' **// didn't work either**
        },
        //I had also tried triggers
        triggers: {
            //'click .starting_thumbnail' : 'inspectorStart:start'
            'click #inspectorStart' : 'inspectorStart:start' **// didn't work either**
        },

        start:function (){  **// Doesn't get called**
            console("Caught InspectorStartView click")
            this.trigger("inspectorStart:start")
        }

    });

    // Returns the View class
    return InspectorStartView;
}); 
```

这是模板：

```
<!-- InspectorStart.html -->
<div id="inspectorStart" class="thumbnail starting_thumbnail">
<img src="/img/detective-97715888.jpg" alt="Inspector" width="200px" height="300px">
<div class="caption">
    <h3>Inspectors Enter Here</h3>
    <p>Den Masters, Teachers, Parents, House Mothers, this is where you start.</p>
</div>
</div> 
```

我确实必须创建 starting_thumbnail 类，以便获得一个指针：

```
.starting_thumbnail{
cursor: pointer;
} 
```

我是否需要做其他事情才能使 div 可点击？

在我第一次尝试时，我通过了 App.vent 并尝试使用它无济于事，现在我正在使用 _.extend(Controller, Backbone.Events); 扩展 Controller {};

根据@Ingro 的一些调试建议，我记录了 ItemView 的 this.$el id。这个：console.log(["InspectorStartView initalise",this.$el])

这是输出。有 nodeName: "DIV" 和 localName 是 div。

```
["InspectorStartView initalise ", jQuery.fn.jQuery.init[1]]
0: "InspectorStartView initalise "
1: jQuery.fn.jQuery.init[1]
0: div
accessKey: ""
align: ""
attributes: NamedNodeMap
baseURI: "http://localhost:8001/index.html"
childElementCount: 1
childNodes: NodeList[3]
children: HTMLCollection[1]
classList: DOMTokenList
className: ""
clientHeight: 496
clientLeft: 0
clientTop: 0
clientWidth: 300
contentEditable: "inherit"
dataset: DOMStringMap
dir: ""
draggable: false
firstChild: #comment
firstElementChild: div#inspectorStart.thumbnail starting_thumbnail
hidden: false
id: ""
innerHTML: "<!-- InspectorStart.html -->↵&lt;div id="inspectorStart" class="thumbnail starting_thumbnail">↵    <img src="/img/detective-97715888.jpg" alt="Inspector" width="200px" height="300px">↵   <div class="caption">↵      <h3>Inspectors Enter Here</h3>↵     <p>Den Masters, Teachers, Parents, House Mothers, this is where you start.</p>↵ </div>↵&lt;/div>"
innerText: "↵Inspectors Enter Here↵Den Masters, Teachers, Parents, House Mothers, this is where you start.↵↵"
isContentEditable: false
lang: ""
lastChild: div#inspectorStart.thumbnail starting_thumbnail
lastElementChild: div#inspectorStart.thumbnail starting_thumbnail
localName: "div"
namespaceURI: "http://www.w3.org/1999/xhtml"
nextElementSibling: null
nextSibling: null
nodeName: "DIV"
nodeType: 1
nodeValue: null
offsetHeight: 496
offsetLeft: 621
offsetParent: body
offsetTop: 388
offsetWidth: 300

<!-- all the on<eventname> were null -->

outerHTML: "<div><!-- InspectorStart.html -->↵&lt;div id="inspectorStart" class="thumbnail starting_thumbnail">...snip..."
ownerDocument: #document
parentElement: li#inspector_start.span4
parentNode: li#inspector_start.span4
prefix: null
previousElementSibling: null
previousSibling: null
scrollHeight: 496
scrollLeft: 0
scrollTop: 0
scrollWidth: 300
spellcheck: true
style: CSSStyleDeclaration
tabIndex: -1
tagName: "DIV" 
```

当然上面是在initialize方法里面。我想在创建一个“新”之后看看有什么不同：

```
/ controller show inspector in the layout / subview
Controller.on('inspectorStart:show', function(inspectorStartView) {
    console.log('show inspector start view');
    console.log(**'InspectorVartView instance this.$el : ', inspectorStartView.el**);
    Controller.layout.inspectorStart.show(inspectorStartView);
}); 
```

输出要小得多：

```
InspectorVartView instance this.$el :  
<div>​
   <!-- InspectorStart.html -->
   <div id=​"inspectorStart" class=​"thumbnail starting_thumbnail">​…​&lt;/div>​
</div>​ 
```

@Ingro 包裹在一个 div 中，为什么这很重要？

有谁看到我做错了什么？

谢谢，

Andrew [jsFiddle](http://jsfiddle.net/KingAndrew/SeDeL)（见下面的评论）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T12:29:01.270

原来我以某种方式损坏了jquery。我使用 jsfiddle 来证明我的代码是正确的。然后我开始查看版本号要求并替换了 jquery 并开始工作。

感谢@Ingro 您的意见。

安德鲁

# php - 如何将变量从 url 传递到提交？

> ID：14926935
> 
> 赞同：0
> 
> 时间：2013-02-17T22:41:10.207
> 
> 标签：php, mysql, string, variables, int

我正在通过`fprs`URL 传递一个变量，但我似乎无法通过提交事件。`$userID`当我点击提交按钮时，来自 URL 的变量超出范围。如何成功将此变量传递给我的查询？如您所见，我从 URL 获取 fprs，将其传输到`$userID`，然后当我提交时，$userID 变为空。

```
$userID ="";
$usID="";

if(isset($_GET['fprs'])){       
    $usID = substr($_GET['fprs'], 8);
}

$userID = intval($usID);

if(isset($_POST['btnChange'])){
    if($Validate == true){

        $link = mysqli_connect($servername,$username,$password,$database);
        var_dump($userID);
        $updatePassStr= "Update User set Pass='$hashPass' WHERE UserID='$userID'";
        if($update = mysqli_query($link, $updatePassStr)){
            echo "good";
        }
        else{
            $Error = "Some error occured with the database, please wait a little and try again.";
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:48:51.127

在您的表单中创建一个隐藏字段`userID`并存储`$userID`在那里。提交后，使用 检索值`$userID=$_POST['userID']`。

# java - 私人、受保护、公共和我很困惑

> ID：14926937
> 
> 赞同：0
> 
> 时间：2013-02-17T22:41:14.733
> 
> 标签：java

在方法声明中使用 public private protected 关键字有什么好处？

我可以想象公共私有受保护关键字对变量的好处，因为它将防止特定类之外的对象进行不必要的“值更改”

但我无法想象将关键字“private”或“public”或“protected”放在方法声明中的好处。

如果有方法，我相信唯一可以使用该方法的对象是包含该方法的对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:44:41.110

首先，让我们澄清一下`public`, `protected`, package 和`private`access 的含义。在每种情况下，您都认为对象必须存在才能使用非静态方法是正确的。但是，这些关键字指示允许谁调用对象上的方法：

*   `public`任何人都可以调用方法。
*   `protected`方法可以被同一包中的任何类或其他包中的子类调用。
*   包私有方法（没有任何访问修饰符）只能由同一包中的类调用。
*   `private`方法只能由同一个类调用。

例如，我经常使用`private`方法来分解代码，否则这些代码会在几种不同的方法中重复。此代码不是供其他类使用的公共接口的一部分。相反，它是一个“worker”方法，它在类本身内部进行一些计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T22:45:00.663

`public`表示该方法可以被覆盖，并且可供任何封闭类可见的代码使用。

`private`表示该方法只能由封闭类使用。

`protected`意味着该方法只能由封闭类以及扩展该类的任何类调用。

包（方法前没有关键字）意味着该方法可以由与封闭类在同一包中的类中的任何代码调用。

[在 Java 中，default、public、protected 和 private 之间的区别](https://stackoverflow.com/questions/215497/in-java-whats-the-difference-between-public-default-protected-and-private)

这些不同的关键字在设计如何使用你的类时很有用。 `public`方法是您向班级用户公开的“合同”的一部分。 `private`方法通常是不应以任何方式向外界公开的实现代码，因为您希望隐藏该逻辑，以防将来要替换或修改它，而不会破坏与类用户的“合同”。

`protected`方法可用于扩展您的类的类。因此，也许您希望某些实现可用于覆盖 - 或者您可能需要一个扩展类来实现此方法以使您的类工作，但这不是您向类的调用者公开的“合同”的一部分或那些调用扩展类的人。

用于`package`创建包中其他类可以调用的实现代码，但您不想向使用您的类的人公开（不是您与用户的“合同”的一部分）。如果需要，我使用包级方法从单元测试中测试一些棘手的实现代码，但不想公开该方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T22:45:44.230

要了解限制对方法的访问的好处，请考虑以下几点：您可以安全地更改甚至`private`从类中删除方法，因为您知道它只能从该类中访问。如果您正在发布一个 API，并且您公开了一个`public`方法，那么它就永远存在。如果您尝试更改它，您将破坏依赖它可用的代码。您必须考虑代码将如何随着时间的推移而发展才能充分理解这一点。

> 如果有方法，我相信唯一可以使用该方法的对象是包含该方法的对象吗？

不，不是真的。方法可以声明为静态的，这意味着它们不需要调用对象。

# dynamic - 角动态工厂

> ID：14926939
> 
> 赞同：1
> 
> 时间：2013-02-17T22:41:25.650
> 
> 标签：dynamic, angularjs, factory

我正在尝试使用单个控制器来列出多个类似的集合，以便可以使用同一个控制器调用不同的模板。事实上，现在我有 6 个用于列表的控制器和另外 6 个用于表单的控制器，但它们都是重复的。

我做了一个非功能性的 plunker 只是为了展示我打算如何工作。我避免声明 routeProviders 因为知道它不起作用，我试图尽可能直截了当。 [http://plnkr.co/edit/d06PcrJS5newhrmNy6EJ?p=preview](http://plnkr.co/edit/d06PcrJS5newhrmNy6EJ?p=preview)

我在stackoverflow上看到了如何声明一个具有动态名称的类：

```
var str = "MyClass";
var obj = new window[str]; 
```

但由于我无法找到它的存储位置，我无法检索它。

有没有人暗示如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:30:04.943

你可以使用 Angular 的[注入器](http://docs.angularjs.org/api/AUTO.%24injector)返回你想要的服务实例。例如：

```
app.controller('NodeListCtrl', function($scope, $location, $injector) {
  var modelName = $location.path().split("/")[1];

  $scope.modelName = modelName.charAt(0).toUpperCase() + modelName.slice(1);

  $scope.nodes = $injector.get($scope.modelName).query();
}); 
```

注意：不要忘记将 添加`$injector`到控制器的函数签名中。

**jsfiddle**：http: [//jsfiddle.net/bmleite/Mvk2y/](http://jsfiddle.net/bmleite/Mvk2y/)

# php - 用数组排序数据

> ID：14926940
> 
> 赞同：0
> 
> 时间：2013-02-17T22:41:28.493
> 
> 标签：php, javascript, jquery, arrays, getjson

晚上好，

我正在使用以下代码从数据库中加载一些股票代码：

```
$username='root';
$password='password';
try {
$conn = new PDO('mysql:host=localhost;dbname=stock_d1', $username, $password);
$sql = 'SELECT * FROM holding_t1 WHERE view ="yes" ORDER BY id'; 
foreach($conn->query($sql) as $row) {

  }
} catch(PDOException $e) {
echo 'ERROR: ' . $e->getMessage();
die();
} 
```

然后，我使用 JQuery 的 getJSON 函数通过 YQL 使用以下方法提取相应的数据：

```
$.getJSON('http://query.yahooapis.com/v1/public/yql?   q=select%20*%20from%20yahoo.finance.quotes%20where%20symbol%20in%20(%22' + $EPIC + '%22)&format=json &env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=?', 
     function(data) { console.log(data);  
                     var ask = data.query.results.quote.AskRealtime; 
                     var bid = data.query.results.quote.BidRealtime; 
                     var name = data.query.results.quote.Name; 
                     ; } ); 
```

其中 YHOO 被替换为从数据库中获取的相应股票代码（假设在这种情况下变量为 $EPIC）。

如果我回显 Javascript 行，结果不会按 ID 顺序返回，而是通过回调检索所需的时间。我正在考虑将数据传递给一个数组，然后使用它来指示顺序。我很想知道这是否是解决这个问题的最佳方法，如果是，最好的方法。

提前感谢您的建议和持续的耐心。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:48:21.457

您可以在添加它们时创建一个管理功能：

```
var waiting = {};
var next = 0;

var addItem = function(id, item) {
    waiting[id] = item;

    while(item = waiting[next]) {
        console.log(item); // Or whatever you need to do with it
        next++;
    }
}; 
```

接着：

```
… function(data) {
    addItem(itemId, data.query.results.quote);
}); 
```

请注意，您需要将每个项目与其相对于其余项目的 ID 相关联，以使它们像这样按顺序显示。

# ruby-on-rails - 从哈希和数组中的数据插入数据库

> ID：14926943
> 
> 赞同：0
> 
> 时间：2013-02-17T22:41:58.927
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我已经像这样定义了我的哈希和数组：

```
POPULATION_SUMMARIES = {
    'ACO' => [   # year , member_count
        [2013, 523031],
        [2012, 492349],
        [2011, 432573]
    ]
} 
```

所以我要插入的表是**PopulationSummary**。它的行/字段是这样的：

```
 ACO, 2013, 523031
    ACO, 2012, 492349
    ACO, 2011, 432573
Org_id, year, member_count 
```

在DB中，它实际上是那些“ACO”或其他东西的ID，它们基本上是另一个表的外键。（即组织表）。

所以我试图遍历这个并读取结构并将其写入表中。我做到了这样的事情：

```
 POPULATION_SUMMARIES.each do |k, v|
    org_id = Organization.find_by_name(k).id  # so for example ID of ACO
    v.each do |o| # now read elements of each array
      # HERE :(  QUESTION
    end
  end 
```

所以我遇到问题的部分是如何说好的，您从数组中读取的第一个数字，将其插入年份字段，您从表中读取的第二个数字：将其插入 member_count 字段......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:58:46.123

这应该让你接近：

```
POPULATION_SUMMARIES.each do |org_name, summaries|
  org = Organization.find_or_create_by_name(org_name)

  summaries.each do |year, member_count|
    PopulationSummary.create({
      :organization => org,
      :year         => year,
      :member_count => member_count
    })
  end
end 
```

# hibernate - 迁移到 Hibernate 4 后集成测试中的配置设置

> ID：14926944
> 
> 赞同：0
> 
> 时间：2013-02-17T22:42:19.753
> 
> 标签：hibernate, integration-testing, hibernate-4.x

我有配置类

```
public class HibernateConfiguration {

    private HibernateConfiguration() {}

    public Configuration configuration(Class clazz) {
        Configuration c = new Configuration();
        c.setProperty(Environment.DRIVER, "org.postgresql.Driver");
        c.setProperty(Environment.URL, "jdbc:postgresql://localhost/brush_and_pixel");
        c.setProperty(Environment.USER, "postgres");
        c.setProperty(Environment.PASS, "solaris");
        c.setProperty(Environment.DIALECT, "org.hibernate.dialect.PostgreSQLDialect");
        c.setProperty(Environment.AUTOCOMMIT, "true"); //"true");
            c.setProperty(Environment.CURRENT_SESSION_CONTEXT_CLASS, "thread");
            c.addClass(clazz);

        return c;
    }

    public static HibernateConfiguration getHibernateConfiguration() {
        return new HibernateConfiguration();
    }

} 
```

我在测试中访问它，如下所示：

```
public void setUp() {
    /**/
    Configuration c = HibernateConfiguration.getHibernateConfiguration()
        .configuration(SettingsGroup.class).addClass(Setting.class);

    SessionFactory sessionFactory =  c.buildSessionFactory();

    settingsGroupDao = new SettingGroupDao();
    settingsGroupDao.setSessionFactory(sessionFactory);
} 
```

获得`sessionFactory`since`buildSessionFactory()`方法的推荐方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:01:21.663

来自[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/#hibernate-gsg-tutorial-basic-config)：

**例 2.4。获取 org.hibernate.SessionFactory**

```
protected void setUp() throws Exception {
    // A SessionFactory is set up once for an application
    sessionFactory = new Configuration()
            .configure() // configures settings from hibernate.cfg.xml
            .buildSessionFactory();
} 
```

# encryption - 使用 gpg 对加密密钥进行数字签名

> ID：14926947
> 
> 赞同：1
> 
> 时间：2013-02-17T22:42:47.210
> 
> 标签：encryption, aes, rsa, gnupg

我正在为我的计算机安全课程建立一个实验室，而一步就是给我带来问题。 [这里是任务。](http://pastebin.com/6RhEuK4A) [这是我在第 11 步之前所做的所有工作。](http://pastebin.com/QBAJbaEi) 这是第 11 步，我遇到了麻烦。

```
11\.  Use gpg and your own private RSA key to digitally sign aes.key.asc.
Digital signature must be appendedto cipher and stored in
key_signed.txt 
```

问题是当我执行以下命令时

```
gpg --sign -o key_signed.txt -a aes.key.asc 
```

预期输出（按分配）：

![示例输出](../Images/1378c573a81e6a6950bedfab390bb36d.png)

我的输出看起来像这样：

```
root@bt:~/lab2# cat key_signed.txt 
-----BEGIN PGP MESSAGE-----
Version: GnuPG v1.4.10 (GNU/Linux)

owFl0l2I2wQAwPFe9+Vy3Hanc2woszsO3cy8Num37IZpkyZpk7Rp2iatTEibz/ba
pvlo0p4OPEFxgpuCHPOEMbhDkfPpThHFKQhyE5FxB3ObIuhAwSETwcncPcgGPvl/
/D//zo5t8/lH4PXKpjC8NDHygX+zPirK1nRLHkyLVoM9PD7x1L1SGE4ygQJeCNAY
xyE4dv8CFdm09G7n6QDecQp4oA9NR6ahUOAIzpSDlN5xvKMAoLEYjUQwgjW8Dl63
2girgLSjiyasQSEQUnSGBHNEYqBKBJ5xgyittmIxMdEX23aCK5YloNVqZgwiVnXp
nleudpOFrKOS4VmIAbNxvu+CTFQcGGXHLcj1aDHJtsR62KONBKVGzY6DWgYwSFCR
uqJ4kmIQ5CxPihZkcbJcEKJIsiLhrWK3LIAVZ5bvcnCiojIFOS/YkZQDd6l0xaiF
AJPCa5moZTWUVh9EaDetxtksbVJOJIFDZFvkbQKuZodSpFHKMPVKFgqlzSZKpXXZ
hijdsoEUVBOdODzMDVuxZqqDgVXdrYZ4zgkyTtMjI/WiiQsuR9swGs6jVC1YcglW
iIN2123CBaoKDHGP08iYgqkVXO0FkyBaqeFVsdELSyZLx3FKJfJ2wyCwZK6PyIZc
6pNefRaV0STSaAvlPpAv6kok35cLhBbSLTyL5aSEW7ZKDlwqixk8Ey+FwJzsdvRY
z2W6GI9ZEgGl9W4KroXUeNYBOnqeSGQHHDvweIblgskcj1JlIYkh6aHhSEKe0ayB
Ggl3zKGRSGl9WshRIS9sRxOOqeUlDUhKStNCLC3DGgOpQbZcNzhsm66d4mu2WeUb
sbYiK4UQBUVdEu1JmIDnpbAdVqP5ZtGtZcKAKkV4LRuuVsoUJzAQnCNls+jOzAAz
PbeiAvdFYgz6f6Wvjjy63Tfi9+3c4b8H2gfsHv9PPLZ3192drXNfn159e+fa+cdO
oSs/TI59863/l5W1z5bPPOfLH/yyCh64sfsvjZDetc+uDVen9p67dmHsqruAXXy/
5d9YKl7fton8+NF+y395Abk7svLV+WOfcovro0tHkat7tr7nrh8XPpw7+Ru0n89d
GEy99dON5uLnD792wtq6CF+7/Ypve+DI7BP2k7fihQcu828i1M2lE3Ppv/Hl9V2/
v+A486t3rpxS3qBPxzKPHN/x5+O+Q/b8sfk2v3HTe+ZSe9+tZw+vPr+nKLz8xZVD
L0rguL61oB+gJhdHT05MDt+5/c/PzYD2qzX+EsPpZ6b8370+t5x+sM7MPPTenU82
Ph4N7ftj/OBCBP0X
=ZfM8
-----END PGP MESSAGE----- 
```

我想我只需要使用`>>`流重定向运算符将签名附加到加密中，但我尝试过的一切都不会导致以

```
-----BEGIN PGP SIGNATURE----- 
```

怎么做才能得到预期的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T23:11:45.410

查看您的预期输出，据我所知，作业要求您“清除签名”加密文件。所以试试这个命令：

```
gpg --clearsign -o key_signed.txt aes.key.asc 
```

我发现[这个很好的参考资料](http://www.spywarewarrior.com/uiuc/gpg/gpg-com-4.htm)可能会有所帮助。如果您进行网络搜索，还有许多其他可用的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T23:15:20.497

看看 GnuPG 的`--clearsign`标志。从手册页：

```
 --clearsign
          Make a clear text signature.  The content in a clear text signature is read-
          able without any special software. OpenPGP software is only needed to verify
          the signature.  Clear text signatures may modify end-of-line whitespace  for
          platform  independence and are not intended to be reversible.  The key to be
          used for signing is chosen by default or can be set  with  the  --local-user
          and --default-key options. 
```

使用此命令获得预期的输出：

```
gpg --clearsign -o key_signed.txt aes.key.asc 
```

# c - 二叉搜索树节点始终为 NULL

> ID：14926949
> 
> 赞同：-1
> 
> 时间：2013-02-17T22:42:56.430
> 
> 标签：c, binary-tree, binary-search-tree

我知道这可能看起来很简单，但在过去的几个小时里我一直在摸不着头脑，试图弄清楚为什么无论我做什么，thisNode 总是为 NULL。因为这是空的，这意味着实际上没有任何东西最终被添加到树中。有没有人有任何想法？啊啊啊

```
struct node *tra(struct node * start, Type input) 
{
    struct node * thisNode = start;

    if (thisNode == NULL)
        return thisNode;
    else 
    {
        Type current = thisNode -> el;

        if (strcmp(input, current) > 0)
            return tra(thisNode -> right, input);
        else if (strcmp(input, current) < 0)
            return tra(thisNode -> left, input);
        else
        return thisNode;
    }
}

Ta insert(Type input, Ta ta) 
{
    if ((find(input, ta)) == FALSE) 
    {
        struct node *newEl = tra(ta -> head, input);
        newEl = (struct node*)malloc(sizeof(struct node));
        newEl -> el = input;
        newEl -> left = NULL;
        newEl -> right = NULL;
    }

    return ta;
}

Boolean find(Type input, Ta ta) 
{
    if (tra(ta -> head, input) == NULL)
        return FALSE;
    else
        return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T22:49:58.353

这是问题所在：

```
 struct node *newEl = tra(ta -> head, input);
        newEl = (struct node*)malloc(sizeof(struct node)); 
```

您分配了新节点，但是指针 newEl 丢失了。您的函数 tra 应该返回一个指向该指针的指针，以让插入函数修改您附加新创建节点的节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:53:37.820

问题如下：

当 BST 中没有任何内容时，这会触发`tra`：

```
if (thisNode == NULL)
    return thisNode; 
```

那么`newEl == NULL`在`insert`.

然后你`malloc`为指针分配`newEl`一个指向分配内存的新值。但是您返回的原始指针仍然具有值`NULL`（因为给指针的副本一个新值不会改变原始指针）。

处理此问题的选项：

*   返回指向指针 ( `struct node **`) 的指针（我认为您还需要将指向指针的指针作为参数传递给`insert`函数）。
*   更改您的签到`tra`以查看下一个元素（以及适当的更改）。对于链接列表，它看起来像：`if (thisNode->next == NULL) return thisNode;`并且`insert`您将使用`newEl->next`. 虽然对于链表来说通常是一个不错的选择，但对于 BST 来说这需要付出更多的努力，因为您需要返回左节点或右节点是`NULL`，或者在`insert`.
    *   注意 - 您必须使用其中一个`newEl->left`或`newEl->right`in `insert`。
*   通过引用返回 - 这可能是最简单的选择。更改`tra`为 return`struct node *&`并将`newEl`声明更改为`struct node *&newEl = ...`，这可能就是全部。

# php - imagecreatefromstring 使用带有数据的图像：image/png;base64，

> ID：14926955
> 
> 赞同：6
> 
> 时间：2013-02-17T22:43:32.443
> 
> 标签：php, gd

我将图像存储为以以下开头的字符串：

```
data:image/png;base64, 
```

我需要将其转换为普通图像以便与 GD 一起使用。

我试过`imagecreatefromstring()`了，但它似乎只接受没有`data:image/etc`前缀的图像。

我能怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-08-17T01:45:43.867

```
$exploded = explode(',', $data, 2); // limit to 2 parts, i.e: find the first comma
$encoded = $exploded[1]; // pick up the 2nd part
$decoded = base64_decode($encoded);
$img_handler = imagecreatefromstring($decoded); 
```

# javascript - 使用 Backbone.js 的多个页面

> ID：14926957
> 
> 赞同：4
> 
> 时间：2013-02-17T22:43:43.613
> 
> 标签：javascript, node.js, backbone.js, single-page-application, backbone-boilerplate

我正在使用 Backbone Boilerplate [https://github.com/tbranyen/backbone-boilerplate](https://github.com/tbranyen/backbone-boilerplate)并且不知道处理多个页面的最佳方法是什么。我找不到可以帮助我轻松理解的答案。基本上，我正在考虑这些选项：

1.  每个页面应该有不同的`config.js`吗？比如`config-userpage.js`…… `config-homepage.js`？
2.  我应该`router.js`为不同的页面设置不同的内容吗？喜欢`router-userpage.js`还是`router-homepage.js`...？
3.  我应该尝试不同的样板，例如[https://github.com/hbarroso/backbone-boilerplate](https://github.com/hbarroso/backbone-boilerplate)吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T23:19:48.073

您绝对可以尝试不同的样板，但我不确定这会有所帮助。可以通过许多不同的方式实现多个页面。

Backbone Boilerplate 的一个很好的参考示例是：http: [//githubviewer.org/](http://githubviewer.org/)。我已将整个内容作为开源发布，您可以查看如何在其中添加基本页面。

您可能想要获得创意并制作一个 Page 模型来处理您所在的页面以及每条路线的内部设置新的页面标题和要使用的布局。

一个非常基本的概念验证实现`app/router.js`可能如下所示：

```
define([
  // Application.
  "app",

  // Create modules to break out Views used in your pages.  An example here
  // might be auth.
  "modules/auth"
],

function(app, Auth) {

  // Make something more applicable to your needs.
  var DefaultPageView = Backbone.View.extend({
    template: _.template("No page content")
  });

  // Create a Model to represent and facilitate Page transitions.
  var Page = Backbone.Model.extend({
    defaults: function() {
      return {
        // Default title to use.
        title: "Unset Page",

        // The default View could be a no content found page or something?
        view: new DefaultPageView();
      };
    },

    setTitle: function() {
      document.title = this.escape("title");
    },

    setView: function() {
      this.layout.setView(".content", this.get("view")).render();
    },

    initialize: function() {
      // Create a layout.  For this example there is an element with a
      // `content` class that all page Views are inserted into.
      this.layout = app.useLayout("my-layout").render();

      // Wait for title and view changes and update automatically.
      this.on({
        "change:title": this.setTitle,
        "change:view": this.setView
      }, this);

      // Set the initial title.
      this.setTitle();

      // Set the initial default View.
      this.setView();
    }
  });

  // Defining the application router, you can attach sub routers here.
  var Router = Backbone.Router.extend({
    routes: {
      "": "index"
    },

    index: function() {
      // Set the login page as the default for example...
      this.page.set({
        title: "My Login Screen!",

        // Put the login page into the layout.
        view: new Auth.Views.Login()
      });
    },

    initialize: function() {
      // Create a blank new Page.
      this.page = new Page();
    }
  });

  return Router;

}); 
```

如您所见，这是一种创建“页面”的固执己见的方式，我相信其他人有更好的实现。在 Matchbox，我有一个非常强大的 Page 模型，它会根据状态确定要突出显示的导航按钮。您还可以在模块内创建路由器以封装功能并在应用程序对象上公开 Page 模型，以便它在整个应用程序中可用。

希望这可以帮助！

# php - PHP mysqli无法获取数据

> ID：14926961
> 
> 赞同：0
> 
> 时间：2013-02-17T22:44:03.363
> 
> 标签：php, mysqli, prepared-statement

嗨，

我有一个奇怪的问题。这是代码：

首先，我获取参数并连接到基础。

```
<?php
    include('connect.php');
    $id=$_GET['id']; // if I echo this, it outputs 0
    $category=$_GET['category'];// if I echo this, it outputs 'category1'
    $name=$_GET['name'];
 ?> 
```

现在我去从数据库中获取数据：

```
<?php
    if ($stmt = $mysqli->prepare("SELECT modelID,modelName,modelLogo FROM model,maker WHERE model.makerID=maker.makerID AND model.makerID='.$id.' AND model.modelCategory='.$category.' ORDER BY modelName")) { 

    $stmt->execute();

    $stmt->bind_result($modelID, $modelName,$modelLogo);

    while ($stmt->fetch()) {
        echo '<a href="edit_model.php?id='.$modelID.'"><div class="box"><img src="'.$modelLogo.'" /><p>'.$modelName.'</p></div></a>';
    }

    $stmt->close();

    }

    else {
        printf("Prepared Statement Error: %s\n", $mysqli->error);
     }
?> 
```

这**不会**输出任何内容。**但是当我在 myPhpAdmin 中运行 sql 查询时，它会返回值。**

询问：

```
SELECT modelID,modelName,modelLogo 
FROM model,maker 
WHERE model.makerID=maker.makerID 
AND model.makerID='0' 
AND model.modelCategory='category1' 
ORDER BY modelName 
```

输出：0 // 名称 // 路径

我放`error_reporting(E_ALL);`了，但它没有返回任何错误。另外，我尝试将此代码放在后面，`$stmt->bind_result($modelID, $modelName,$modelLogo);`结果如下：

`var_dumb($modelID);die();`它返回“0”。

`var_dumb($modelName);die();`它返回“NULL”。

`var_dumb($modelLogo);die();`它返回'NULL'

我不知道发生了什么，所以需要任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:47:07.333

这是因为您在 PHP 中的查询是虚假的，请更改此：

```
... AND model.modelCategory='.$category.' ... 
```

对此：

```
... AND model.modelCategory='$category' ... 
```

或者更好的是，既然您已经在使用准备好的语句，请使用[参数绑定](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)，这样您就不必担心这种事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T22:48:56.427

您没有绑定参数。试试这个。

```
if ($stmt = $mysqli->prepare("SELECT modelID,modelName,modelLogo FROM model,maker 
    WHERE model.makerID=maker.makerID 
    AND model.makerID = ? AND model.modelCategory = ? 
    ORDER BY modelName")) {
$stmt->bind_param('ss', $id, $category);
//rest of the code intact 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T22:51:04.683

肖恩·布莱特回答了你的问题，但我更喜欢这个：

```
"SELECT 
  modelID, modelName, modelLogo 
FROM 
  model, maker 
WHERE 
  model.makerID=maker.makerID AND model.makerID='{$id}' 
AND 
  model.modelCategory='{$category}' 
ORDER BY modelName" 
```

只是因为像 Notepad++ 这样的代码编辑器在字符串中突出显示变量使其易于阅读。

# youtube - 是否可以使用 Youtube API 获得 Channels 社交链接

> ID：14926962
> 
> 赞同：7
> 
> 时间：2013-02-17T22:44:05.907
> 
> 标签：youtube, youtube-api, youtube-channels

在 Youtube 频道页面上有相关网站的链接。是否可以通过 Youtube API 获取这些信息，或者我必须解析页面。

![Youtube 频道上的相关链接](../Images/7efe452b502f264b940dbb67ad592f61.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T16:18:34.363

不幸的是，API 中没有提供“相关网站”，即使在“ [https://developers.google.com/youtube/v3/docs/channels#snippet.description](https://developers.google.com/youtube/v3/docs/channels#snippet.description) ”中也是如此

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-20T19:24:49.157

我创建了一个非常简单的 Java-API，它可以从 Youtube 频道获取相关网站。它将返回所有 URL 和链接文本。您甚至可以过滤掉特定网站或社交网络的链接。

```
YoutubeRelatedSites yrs = new YoutubeRelatedSites(new URL("https://www.youtube.com/user/WatchMojo/about?&ab_channel=WatchMojo.com"));
Map map = yrs.getLinks(); //Get all related sites
URL[] twitterLinks = yrs.getTwitter(); //Get all twitter links 
```

在此处下载源代码：[https ://github.com/Grunzwanzling/YoutubeRelatedSites](https://github.com/Grunzwanzling/YoutubeRelatedSites)

# iframe - 仅对特定 HTML 代码禁用右键单击按钮

> ID：14926964
> 
> 赞同：0
> 
> 时间：2013-02-17T22:44:15.480
> 
> 标签：iframe, right-click

我有这个代码：

```
 <div id="frameContainer" style="overflow:hidden;"> 
    <iframe oncontextmenu="return false;" src="http://youtube.com" scrolling="yes" style="width: 790px; height: 500px; margin-        top: -120px;"> 
    </iframe> 
    </div> 
    </div> 
```

我想要做的是在用户单击该框架内时禁用鼠标右键。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-05T16:43:08.780

要禁用您网站中的右键单击按钮，我们在标签正文中添加以下属性 oncontextmenu="return false"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T22:57:59.067

正如网络的其余部分会告诉您的那样，禁用右键单击通常是非常糟糕的做法。但是，可以通过将此 javascript 事件：添加`oncontextmenu="return false;"`到 iframe。

# sql - 查询以序列化数据

> ID：14926969
> 
> 赞同：0
> 
> 时间：2013-02-17T22:44:51.173
> 
> 标签：sql, postgresql, postgresql-9.2

我有两张桌子：

```
路线

标识说明
1 条街道1
2街2
3街3
4街4
5街5

细分市场

ID RouteID、Progres、LabelStart、LabelEnd
1 1 5 1 A 21 B
2 1 10 2 一个 10
3 2 15 3 25
4 2 15 2 20
5 3 20 1 11
6 3 22 4 10
7 4 30 5 11
8 4 31 2 12

```

我需要一个带有这些规则的序列：

1.  表必须由 Progress ASC 订购
2.  定义了一个列类型，如果 LabelStart 和 LabelEnd 是奇数则取 O，如果偶数取 E
3.  如果两条路线的进度相同，则将行合并为一个，其中 LabelStart 是最小值（在 LabelStart Odd 和 LabelStart Even 之间），LabelEnd 是 Max，在这种情况下，Type 取值 A（All）

根据上面的示例数据，结果应该是

```
顺序  
ID RouteID、Progres、LabelStart、LabelEnd 类型
1 1 5 1 A 21 BO
2 1 10 2 A 10 E
4 2 15 2 25 安
5 3 20 1 11 ○
6 3 22 4 10 E
7 4 30 5 11 ○
8 4 31 2 12

```

它适用于 Postgres 9.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:24:22.180

这是一个有趣的查询，因为您的 LabelStart 和 LabelEnd 字段中有字母。我曾经`REGEX_REPLACE`删除那些。然后我使用 CTE 来获取具有多个 routeid 和进度行的记录。

我认为应该这样做：

```
WITH CTE AS (
  SELECT 
    RouteId, Progress
  FROM Sequence
  GROUP BY RouteId, Progress
  HAVING COUNT(DISTINCT Id) > 1
  )
SELECT MAX(S.ID) Id,
  T.RouteId,
  T.Progress,
  MIN(regexp_replace(LabelStart, '[^0-9]', '', 'g')) LabelStart,
  MAX(regexp_replace(LabelStart, '[^0-9]', '', 'g')) LabelEnd,
  'A' as Type
FROM Sequence S 
  INNER JOIN CTE T ON S.RouteId = T.RouteId AND S.Progress = T.Progress
GROUP BY T.RouteId, T.Progress
UNION 
SELECT S.Id,
  S.RouteId,
  S.Progress,
  S.LabelStart,
  S.LabelEnd,
  CASE 
    WHEN CAST(regexp_replace(LabelStart, '[^0-9]', '', 'g') as int) % 2 = 0 
    THEN 'E' 
    ELSE 'O' 
  END  
FROM Sequence S 
  LEFT JOIN  CTE T ON S.RouteId = T.RouteId AND S.Progress = T.Progress
WHERE T.RouteId IS NULL
ORDER BY Progress ASC 
```

还有一些样品[Fiddle](http://www.sqlfiddle.com/#!1/69622/1)。

# android - Android - 如何将我的 2 列布局更改为具有动态宽度？

> ID：14926974
> 
> 赞同：1
> 
> 时间：2013-02-17T22:45:17.947
> 
> 标签：android, android-layout

我目前有一个 2 列布局，如下所示：

```
 <TextView android:id="@+id/TRAIN_CELL"
     android:layout_width="275dip"
     android:layout_height="wrap_content"         
     android:textSize="16sp"/>

 <TextView android:id="@+id/TO_CELL"
     android:layout_width="25dip"
     android:textSize="20sp"
     android:textStyle="bold" 
     android:gravity="center"
     android:textColor="@color/light_best_blue"
     android:layout_height="wrap_content"  
     android:layout_weight="1"/> 
```

但是用这种方法我只是硬编码宽度，我不确定在更窄的屏幕上更宽会发生什么。有没有办法调整它以使用宽度的百分比？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:54:12.417

您不能使用百分比指定宽度或高度，但有一些类似的东西 -`weightSum`和`layout_weight`. 例如，如果你`View`有一半的屏幕宽度，你必须这样做：

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_height="wrap_content"
  android:layout_width="fill_parent"
  android:orientation="horizontal"
  android:weightSum="1.0">
  <View
    android:id="@+id/view"
    android:layout_height="wrap_content"
    android:layout_weight=".5"
    android:layout_width="0dip" />
</LinearLayout> 
```

如您所见，`View`( `LinearLayout`) 的容器已设置`android:weightSum`为`1.0`这意味着`1.0`它将是其宽度/高度的 100%。然后，如果您在此容器内指定例如`android:layout_weight`并将其宽度或高度设置为（这部分非常重要，如果您错过它，将使用它的指定值而不是根据权重计算的值）它将获得 50% 的值它是容器的宽度/高度。`View``.5``0dp``View`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T22:49:15.357

`android:layout_weight="1/2/3/4/5/..."`将成为你的新朋友 ;-)

不要忘记也使用`android:layout_width="0dip"`

# node.js - 在 node.js 中使用 http.request 时出错

> ID：14926975
> 
> 赞同：1
> 
> 时间：2013-02-17T22:45:19.660
> 
> 标签：node.js, error-handling, httprequest, parse-error

这是我的一小段代码：

```
var options = {
  host: 'www.cuantocabron.com',
  port: 80,
  path: '/index.php',
  method: 'GET'
};

var http = require('http');

var req = http.request(options, function(res) {
  console.log('STATUS: ' + res.statusCode);
  console.log('HEADERS: ' + JSON.stringify(res.headers));
  res.setEncoding('utf8');
  res.on('data', function (chunk) {
    console.log('BODY: ' + chunk);
  });
});

// write data to request body
req.write('data\n');
req.write('data\n');
req.end(); 
```

我正在尝试从该 URL 获取所有 HTML 代码；我第一次运行该代码时，控制台打印了所有 HTML，但在那之后，抛出一个错误，所以我的服务器宕机了。

但是，当我运行它时，控制台会抛出一个错误：

```
events.js:71
        throw arguments[i]; //Unhandled 'error' event

Error: Parse Error
    at Socket.socketOnData (http.js:1447:20)
    at TCP.onread (net.js:404:27) 
```

有什么解决办法吗？谢谢;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T22:57:41.810

如果您只是尝试从该 URL 获取 HTML，则不需要 req.write 语句。这些是导致您的错误的陈述。当您将数据写入服务器时，您使用 req.write，例如，如果您正在执行 POST。

您还应该在声明您的 req 后添加一个错误处理程序

```
req.on('error', function(e) {
  console.log('problem with request: ' + e.message);
}); 
```

# html - 如何通过 htaccess 修复在 HTML 上显示的￡？

> ID：14926976
> 
> 赞同：0
> 
> 时间：2013-02-17T22:45:34.627
> 
> 标签：html

我已经切换了主机，并且不知何故在我所有包含井号的 HTML 文件上都替换为前面的 A：￡。有没有办法在不添加的情况下克服这个问题

```
<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /></head> 
```

在每个 HTML 页面上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T22:55:34.820

您有多种替代方法来解决该问题，包括以下任何*一种*：

*   按照您的要求在 .htaccess 中：插入“ [AddDefaultCharset utf-8](https://stackoverflow.com/questions/913869/how-to-change-the-default-encoding-to-utf-8-for-server) ”行或遵循[W3C](http://www.w3.org/International/questions/qa-htaccess-charset.en)的进一步建议或[askapache.com的进一步建议](http://www.askapache.com/htaccess/setting-charset-in-htaccess.html)
*   ~~在每个 HTML 页面的开头插入 HTML 5 文档类型“<!DOCTYPE html>”，从而导致浏览器将默认字符编码解释为 UTF-8 而不是 ISO-8859-1。~~
*   使用字符编码 ISO-8859-1 存储您的 HTML，以便井号存储为一个字节。目前，您的 HTML 似乎是使用字符编码 UTF-8 存储的，因此井号存储为两个字节。以下是将 UTF-8 文件的副本存储为 ISO-8859-1 的一种方法：`iconv --from-code=UTF-8 --to-code=ISO-8859-1 inputfile.html > outputfile.html`
*   使用 7 位 (ASCII) 字符存储 HTML，将井号编码为 XML 数字字符实体 £ 或（十六进制） £ 或 HTML 命名字符实体 £

# windows - 将数据从 Web 导入 Excel 2010 工作表

> ID：14926977
> 
> 赞同：0
> 
> 时间：2013-02-17T22:45:39.830
> 
> 标签：windows, vba, excel, excel-2010

我正在尝试在 win 7 上将数据从 web 导入 Excel 工作表。

但是，我不知道如何完成左边的标记。

```
Sub Ex2Macro()

    Ex2 from Macro1 Macro
    ' Macro changed 17/07/2007 by Dr. B. I. Czaczkes
    Dim qt As QueryTable
    Dim temp As Variant ' Double
    Set qt = ActiveSheet.QueryTables.Add(Connection:= _
      "URL;http://finance.yahoo.com/q?s=GBPUSD=X", Destination:=ActiveCell.Range("A1"))
    With qt
    .Name = "query1"
    .BackgroundQuery = False
    .SaveData = True
    .WebSelectionType = xlSpecifiedTables
    .WebFormatting = xlWebFormattingNone
    .WebTables = "14"
    .WebPreFormattedTextToColumns = True
    .WebConsecutiveDelimitersAsOne = True
    .Refresh BackgroundQuery:=False
  End With
  With qt.ResultRange
    .ClearContents
    .Range("a1").Value = "USD/GBP"
    .Range("b1").Value = ?     ' here, what I should put so that the queried result             
                               ' is printed ? 
  End With
End Sub 
```

* * *

提供交换结果的另一段代码。

```
Sub Ex3Macro()
  Dim qt As QueryTable
  ' Dim temp As Double
  Dim temp As Variant
  temp = ActiveCell.Value
  Set qt = Worksheets("temp").QueryTables.Add(Connection:= _
    "URL;http://finance.yahoo.com/currency/convert?amt=" & _
    temp & _
    "&from=USD&to=GBP&submit=Convert" _
    , Destination:=Worksheets("Temp").Range("a1"))
  With qt
    .Name = "query2"
    .BackgroundQuery = False
    .SaveData = True
    .WebSelectionType = xlSpecifiedTables
    .WebFormatting = xlWebFormattingNone
    .WebTables = "13"
    .WebPreFormattedTextToColumns = True
    .WebConsecutiveDelimitersAsOne = True
    .Refresh BackgroundQuery:=False
  End With
  ActiveCell.Range("b1").Value = qt.ResultRange.Range("e3").Value
End Sub 
```

但是，没有打印结果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:32:58.857

尝试选择 Microsoft WinHTTP Services，版本 5.1 参考，然后使用：

```
Sub HTTPTest()

Dim httpRequest As WinHttpRequest
Dim URL As String, strHTML As String

If httpRequest Is Nothing Then
    Set httpRequest = New WinHttp.WinHttpRequest
End If

URL = "http://finance.yahoo.com/q?s=GBPUSD=X"

httpRequest.Open "GET", URL, True
httpRequest.Send
httpRequest.WaitForResponse
strHTML = httpRequest.ResponseText
Set httpRequest = Nothing

'Parse strHTML now to get your value

End Sub 
```

# java - 运行 java -version 时“无法为对象堆保留足够的空间”

> ID：14926989
> 
> 赞同：5
> 
> 时间：2013-02-17T22:46:06.860
> 
> 标签：java, memory, windows-server-2008, virtual-memory

我知道这是一个常见的问题/问题。我想知道从哪里开始。

在 windows server 2008 上运行 java，我们有 65GB 内存，它显示 25GB 可用。（目前有几个人正在运行进程）。

`systeminfo | grep -i memory`

显示：

```
总物理内存：65、536 MB
可用物理内存：26,512MB
虚拟内存：最大大小 69,630 MB
虚拟内存：可用 299 MB
虚拟内存：使用中：69、331 MB。

```

真的只是想知道我如何解决这个问题。

*   我从哪里开始？
*   使用的虚拟内存多于物理内存是什么意思，这就是java无法启动的原因吗？
*   java是否想使用虚拟内存而不是物理内存？

`java -version`

给我：

`Error occured during initialization of VM could not reserve enough space for object heap`

更具体的问题：

*   **为什么JVM不想使用空闲的物理内存？**
*   **`java -version`如果不指定 Xms 参数，java 命令（如 ）想要使用多少内存？**
*   **简单地分配更多的虚拟内存是解决问题的好方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-28T14:24:29.880

我遇到了同样的问题。通过分析，我们发现机器的交换空间较低。请增加交换空间并验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T23:46:32.153

正如我在遇到类似问题时发现的那样（尽管系统上的内存要少得多——请参阅[Cannot run a 64-bit JVM in 64-bit Windows 7 with a large heap size](https://stackoverflow.com/questions/10889081/cannot-run-a-64-bit-jvm-in-64-bit-windows-7-with-a-large-heap-size)），在 Windows 上，JVM 将尝试分配一块*连续*的内存。

所以我敢打赌，虽然你有足够的*总*内存，但你没有足够的*连续*内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-19T09:09:05.340

至少要查看 java 版本运行 java -Xmx64m -version 如果需要，这应该向您显示版本。然后您可以尝试增加 Xmx 并查看它失败的值

# jquery - jQuery mobile：当我将选择菜单附加到不同页面上的另一个 DOM 节点时，为什么会中断？

> ID：14926991
> 
> 赞同：0
> 
> 时间：2013-02-17T22:46:16.190
> 
> 标签：jquery, dom, jquery-mobile, select-menu

我有一个包含三个页面 ( `<div data-role = 'page'>`) 的 jquery 移动网站。

在第 1 页的标题上，我有一个用于选择语言组件的选择菜单：

`<div data-role = 'header'> ... <label></><select><options></></> ... </>`.

我*不*希望整个站点中出现多个语言选择器组件实例。

因此，根据[SO](https://stackoverflow.com/questions/12009398/jquery-mobile-header-repeat-across-pages)的建议，我在每个页面的 pageshow 事件中将标题节点从一个页面移动到另一个页面。

当我转到第 2 页时，选择菜单不起作用；但是当我导航回第 1 页时，它又可以工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T00:25:37.620

使用“pagebeforeshow”而不是“pagecreate”事件，因为 pagecreate 在创建该页面时只会被调用一次。

所以，如果你想每次改变页面都得到一个事件，你应该使用'pagebeforeshow'、'pagebeforehide.'pageshow'或'pagehide'。

我推荐**pagebeforeshow**在页面显示之前更改 UI。:)

* * *

您是否使用 .remove() API 将“选择”从上一页移动到新页面？.remove() 从父元素及其数据和事件中删除一个元素。因此，您应该在删除后重新定义事件处理程序。

此外， .detach() 仅用于从其父元素中分离元素。但它有一些关于jquery mobile 增强的问题。

我在上面发布了一个 jsfiddle。[jsfiddle.net/cwdoh/ZaVch](http://jsfiddle.net/cwdoh/ZaVch)

***由 SHANNON 编辑**...以防将来删除小提琴，这是您的代码：*

```
 <div data-role="page" id="page1">
        <div data-role="header">
            <h1>Page 1</h1>
            <select id="language-select">
                <option>Korean</option>
                <option>English</option>
                <option>JavaScript :)</option>
            </select>
        </div>

        <div data-role="content">
            <a data-role="button" href="#page2">go to Page2</a>
        </div>
    </div>

    <div data-role="page" id="page2">
        <div data-role="header">
            <h1>Page 2</h1>
        </div>

        <div data-role="content">
            <a data-role="button" href="#page1">go to Page1</a>
        </div>
    </div>

$(document).on( "pagebeforeshow", function( e, data ) {
    // move language-select from previous page
    var selectMenu = data.prevPage.find( "#language-select" );

    selectMenu
        .remove()     // remove from previous page
        .appendTo( $(e.target)   // append to active page
            .find( "[data-role='header']" ) );

    // bind event handler after append
    $("#language-select").bind( "change", function() {
        alert( "language-select changed" );
    });

    // re-build 
    selectMenu.selectmenu();
}); 
```

# terminal - 缓冲区溢出在 GDB 中有效，但在终端中无效

> ID：14926994
> 
> 赞同：1
> 
> 时间：2013-02-17T22:46:45.413
> 
> 标签：terminal, gdb, buffer-overflow

我正在使用 Mac OSX。我创建了一个缓冲区溢出易受攻击的程序：

```
#include<stdio.h>
#include<string.h>

int neverCalled() {
    puts("You got me to be called");
    return 0;
}

int main() {
    puts("Name: ");
    char name[64];
    gets(name);
    return 0;
} 
```

我还创建了一个包含 88 个 "A" ( `0x414141...`) 的输入文件和`0x700E000001000000`

在 gdb 中运行时：

```
(gdb) run < input 
```

我得到输出：`You got me to be called`然后是一个`EXC_BAD_ACCESS`错误。这意味着我成功地利用了该程序。

在终端运行时：

`$ ./vulnerable < input`

我得到了输出：仅此`Segmentation fault: 11`而已。

为什么我的缓冲区溢出在 gdb 中有效，但在普通终端中失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:27:24.653

mac os X 上的 gdb 似乎禁用了地址空间布局随机化

[http://reverse.put.as/2011/08/11/how-gdb-disables-aslr-in-mac-os-x-lion/](http://reverse.put.as/2011/08/11/how-gdb-disables-aslr-in-mac-os-x-lion/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:33:42.380

为什么是 0x700E000001000000？您的漏洞利用似乎是特定于布局的，可能与键入“p neverCalled”时 gdb 打印的内容不同。

在所有执行中都不能保证这一点。正如 cabellicar123 正确指出的那样，库和可执行文件在进程中映射的布局是随机的，并且不能保证在执行之间是相同的。

出于某种原因，gdb 似乎总是得到相同的布局。作为练习，在您的程序中的某处包含“printf("%p"\n", neverCalled)" 并查看值如何变化。

# javascript - 从不规则的日期行创建连续数据集

> ID：14926995
> 
> 赞同：1
> 
> 时间：2013-02-17T22:46:47.293
> 
> 标签：javascript, python, sqlalchemy, d3.js, postgresql-9.1

我有这张桌子：

```
 Table "public.transaction"
   Column   |            Type             |                        Modifiers                         
------------+-----------------------------+----------------------------------------------------------
 id         | integer                     | not null default nextval('transaction_id_seq'::regclass)
 account_id | integer                     | 
 note       | character varying           | 
 date       | timestamp without time zone | 
 amount     | numeric                     | 
```

它包含以下格式的交易：

```
 id | account_id |               note               |        date         | amount 
----+------------+----------------------------------+---------------------+--------
  1 |          1 | Loopia AB                        | 2013-02-07 00:00:00 |   -178
  2 |          1 | ÅSGATAN 2 KÖK &                  | 2013-02-07 00:00:00 |   -226
  3 |          1 | BURGER KING ODEN                 | 2013-02-06 00:00:00 |    -89
  4 |          1 | OLEARYS 917                      | 2013-02-06 00:00:00 |   -309
  5 |          1 | TAXI STOCKHOLM                   | 2013-02-06 00:00:00 |   -875
  6 |          1 | GRET INDIAN REST                 | 2013-02-06 00:00:00 |    -85
  8 |          1 | VIDEO RULLEN                     | 2013-02-04 00:00:00 |   -169
  9 |          1 | ICA SUPERMARKET                  | 2013-02-04 00:00:00 |   -196
 10 |          1 | ICA SUPERMARKET                  | 2013-02-03 00:00:00 |   -110 
```

然后我以以下格式将数据提供给 D3：

```
[
    {
        "note": "TEXAS LONGHORN",
        "date": "2013-01-10T00:00:00",
        "amount": 110,
        "id": 74,
        "account_id": 1
    },
    {
        "note": "GOOGLE *FEO Medi",
        "date": "2013-01-10T00:00:00",
        "amount": 22,
        "id": 73,
        "account_id": 1
    },
    {
        "note": "Pressbyran 5122",
        "date": "2013-01-10T00:00:00",
        "amount": 13,
        "id": 77,
        "account_id": 1
    },
    {
        "note": "ICA SUPERMARKET",
        "date": "2013-01-10T00:00:00",
        "amount": 106,
        "id": 76,
        "account_id": 1
    },
    {
        "note": "HÅR 3000",
        "date": "2013-01-10T00:00:00",
        "amount": 345,
        "id": 75,
        "account_id": 1
    },
    {
        "note": "Pressbyran 5122",
        "date": "2013-01-11T00:00:00",
        "amount": 19,
        "id": 72,
        "account_id": 1
    },
    {
        "note": "BIRKA PUNKTEN",
        "date": "2013-01-11T00:00:00",
        "amount": 79,
        "id": 71,
        "account_id": 1
    }
] 
```

然而，D3 流图要求所有数据点都存在。因此，我必须将*所有*日期，即使是那些没有任何交易的日期，都放在我提供给 D3 的数据中。

我希望您能就如何使用任何可用的工具有效地实现这一点提供意见。[您可以在http://bl.ocks.org/joar/4747134/a702cf79bf10b1438cc665a2438b3f5cf9ab8bf0](http://bl.ocks.org/joar/4747134/a702cf79bf10b1438cc665a2438b3f5cf9ab8bf0)上玩一个活生生的例子

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T23:23:13.050

您想要`generate_series`一组日期覆盖目标区域，然后将您的事务表左外连接到它。请参阅[此 SQLFiddle 示例](http://sqlfiddle.com/#!12/a618a/1)。

```
SELECT
  x.gendate,
  t.account_id, t.id, t.note, t.amount
FROM 
  generate_series(
    (SELECT min("date") FROM transaction),
    (SELECT max("date") FROM transaction),
    INTERVAL '1' DAY
  ) AS x(gendate)
  LEFT OUTER JOIN transaction t ON (t."date" = x.gendate)
ORDER BY x.gendate; 
```

[您可以按照SQLFiddle](http://sqlfiddle.com/#!12/a618a/6)使用 PostgreSQL 的 json 函数生成所需的数据格式。

```
WITH continuous_tx AS (
  SELECT
    x.gendate AS "date",
    t.account_id, t.id, t.note, t.amount
  FROM 
    generate_series(
      (SELECT min("date") FROM transaction),
      (SELECT max("date") FROM transaction),
      INTERVAL '1' DAY
    ) AS x(gendate)
    LEFT OUTER JOIN transaction t ON (t."date" = x.gendate)
  ORDER BY x.gendate
)
SELECT array_to_json(array_agg(continuous_tx ),'t')
FROM continuous_tx; 
```

...虽然我还没有测试将它输入到绘图工具中。