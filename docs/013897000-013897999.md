# StackOverflow 问答 13897000-13897999

# javascript - 如何将这个确切的短语与正则表达式匹配？

> ID：13897000
> 
> 赞同：0
> 
> 时间：2012-12-15T23:05:36.073
> 
> 标签：javascript, regex

[在行动中看到它！](http://jsfiddle.net/ZZYMG/)

## HTML：

```
<input type='text' value="2012-12-30 Morning">
<input type='text' value="2012-12-30 Lunch">
<input type='text' value="2012-12-30 Dinner">
<input type='text' value="2012-12-30 Either akgalkgalkgla">
<input type='text' value="2012-12-30">
<input type='text' value="Morning">
<button>Check</button> 
```

## Javascript/jQuery：

```
$("button").click(function() {
    $("input")
        .filter(function() {
            return this.value.match(/[0-9]{4}-[0-9]{2}-[0-9]{2}\s[A-Za-z]+/);
        })
        .css("border", '1px solid red');

})​ 
```

我尝试使用锚点`^`，`$`但它不再匹配了。在上面的例子中，它不应该匹配“2012-12-30 Either akgalkgalkgla”

这是正则表达式 `[0-9]{4}-[0-9]{2}-[0-9]{2}\s[A-Za-z]+`

```
2012-12-30 Morning
2012-12-30 Lunch
2012-12-30 Dinner
2012-12-30 Either akgalkgalkgla 
```

**更新：**

工作也是如此`^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[A-Za-z]+$`。我最初是在正则表达式上尝试这个，它似乎没有工作......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:10:53.567

添加锚似乎可以完美地防止部分匹配。前三个输入的内容匹配，后三个不匹配：

```
$("button").click(function() {
    $("input")
        .filter(function() {
            return this.value.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[A-Za-z]+$/);
        })
        .css("border", '1px solid red');
}); 
```

这是在行动：http: [//jsfiddle.net/ZZYMG/4/](http://jsfiddle.net/ZZYMG/4/)

如果要将边框应用于所有未通过此测试的元素*，*只需反转您在过滤器回调中返回的布尔值：

```
return !this.value.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[A-Za-z]+$/); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:11:07.760

使用锚点按预期工作。你确定你把锚放在了正确的地方吗？

```
/^[0-9]{4}-[0-9]{2}-[0-9]{2}\s[A-Za-z]+$/ 
```

# python-2.7 - 如何在 Jinja2 中模拟 while 循环

> ID：13897001
> 
> 赞同：7
> 
> 时间：2012-12-15T23:05:53.770
> 
> 标签：python-2.7, while-loop, jinja2

我将如何在 jinja2 中执行以下操作：

```
while apples < oranges:
    # some work here. 
```

根据[http://jinja.pocoo.org/docs/dev/extensions/#loop-controls](http://jinja.pocoo.org/docs/dev/extensions/#loop-controls)，根据我得到的错误，Jinja2 不支持 while 循环。

问题是我想继续做一些工作，只要值`apples`小于`oranges`

谢谢你的帮助。

等价的东西`while True:`也很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T03:24:02.787

要在 Jina2 中循环，您必须使用：for。要结束 for 块中的循环，您可以使用 break。请参阅：http: [//jinja.pocoo.org/docs/extensions/#loop-controls](http://jinja.pocoo.org/docs/extensions/#loop-controls)。

```
jinja_env = Environment(extensions=['jinja2.ext.loopcontrols']) 
```

您可以使用以下方法创建“无尽”循环：

```
{% for _ in range(1, large_number) %}

   {% if loop.index > stop_at %}{% break %}{% endif %} 

{% endfor %} 
```

# java - JFrame，删除并创建了 JPanels

> ID：13897017
> 
> 赞同：2
> 
> 时间：2012-12-15T23:08:39.460
> 
> 标签：java, swing, jframe, jpanel, layout-manager

我有一个 JFrame，我在其中从外部类创建和删除面板，问题是，当我来回移动时（多次删除和创建面板，我不希望引用所有面板，所有应该传递的数据on (frame and boolean [即将实现]) 将在构造函数中）它将整个内容向下移动。

我正在使用`GridBagLayout`，也许这有一些隐藏的问题。我不想使用 CardLayout，所以请不要推荐它。

为什么会这样做，我应该怎么做才能阻止它？

代码

```
deleteContract = new JButton("Usuń kontrakt");
        deleteContract.addActionListener(new ActionListener() {
           public void actionPerformed(ActionEvent e) {

                ACDeleteContract ACDeleteContract = new ACDeleteContract(frame);
                removeAll();
            add(ACDeleteContract);
            revalidate();
            repaint();
        }
    });
    deleteContract.setPreferredSize(new Dimension(200, 50));
    c.gridy = 2;
    menu.add(deleteContract, c);

    back = new JButton("Powrót");
    back.addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent e) {
           ACMenu menu = new ACMenu(frame);
           removeAll();
           add(menu);
           revalidate();
           repaint();
       } 
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T11:30:03.163

好吧，安德鲁·汤普森（Andrew Thompson）引导我走上了我之前不想走的好路。

对于后代的一些提示：D。

在你的框架中做

```
CardLayout cards = new CardLayout();
    JPanel cardPanel = new JPanel();
    cardPanel.setLayout(cards);

    ACReadContract ACReadContract = new ACReadContract(cards, cardPanel);
    //your external JPanel classes with arguments such as above
    ACMenu ACMenu = new ACMenu(cards, cardPanel);

    cardPanel.add(ACMenu, "Menu");
    cardPanel.add(ACReadContract, "ReadContract");
    //naming and adding them for easy moving between them

    //adding this to frame
    add(cardPanel); 
```

在外部类中（构造函数的开始，类应该扩展 JPanel）

```
private JPanel menu, cardPanel1;
private CardLayout cardLayout1;

public ACMenu(CardLayout cardLayout, JPanel cardPanel) {

    cardLayout1=cardLayout;
    cardPanel1 = cardPanel; 
```

在外部类中的动作监听器

```
cardLayout1.next(cardPanel1); 
```

或者

```
cardLayout1.show(cardPanel1, "ReadContract"); 
```

我希望我对那些有类似问题的人有所帮助。

# asp.net-mvc-3 - ASP.NET MVC3 原始 Sql 更新

> ID：13897021
> 
> 赞同：0
> 
> 时间：2012-12-15T23:09:02.047
> 
> 标签：asp.net-mvc-3, rawsql

我确定我犯了一个简单的错误。我尝试在我的 ASP.NET MVC3 项目中运行原始更新语句。

```
if (Request["btApprove"] == (string)ViewBag._Approve)
{
    query = "UPDATE Proposals SET "
          + " TypeID=" + Request["ProposalTypes"]
          + " RejectionTypeID=" + Request["RejectionTypes"]
          + " Title='" + Request["taProposalTitle"] + "'"
          + " Explanation='" + Request["taProposalDescription"] + "'"
          + " RejectionCause='" + Request["taRejectionCause"] + "'"
          + " WHERE ID=" + Request["txProposalNo"] + " ";
     db.Database.ExecuteSqlCommand(query);
} 
```

上面的行返回错误：“'RejectionTypeID' 附近的语法不正确。” 我调试项目，但查询似乎正确。

```
"UPDATE Proposals SET  TypeID=1 RejectionTypeID=1 Title='SomeText' Explanation='Some Longer Text' RejectionCause='' WHERE ID=1 " 
```

**RejectionTypeID**是一个外键，取决于表**RejectionTypes的****ID** ，它们的类型是**int**，以防万一发生违规。知道我在这里做错了什么吗？

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:13:34.410

在每个变量集后添加“，”（逗号）。****

# sql - Sql Order by 在多列上

> ID：13897024
> 
> 赞同：15
> 
> 时间：2012-12-15T23:09:26.107
> 
> 标签：sql, oracle, sql-order-by

我有以下结果

```
VendorName | IncidentID | IncidentStatus | IncidentDate
-------------------------------------------------------
XYZ        | 100        |     Open       | 02-JUN-2011    
XYZ        | 101        |     Open       | 03-JUN-2011  
ABC        | 102        |     Open       | 01-JUN-2011  
XYZ        | 103        |     Open       | 01-APR-2011  
ABC        | 105        |     Open       | 05-JUN-2011 
```

我想订购`VendorName`最近发生的事件。供应商`ABC`有最新的事件，因此它应该首先与同一供应商的所有其他事件一起出现，然后是下一个供应商，所有相应的事件按降序排列。期望的结果是这样的 -

```
VendorName | IncidentID | IncidentStatus | IncidentDate  
-------------------------------------------------------
ABC        | 105        |     Open       | 05-JUN-2011 
ABC        | 102        |     Open       | 01-JUN-2011
XYZ        | 101        |     Open       | 03-JUN-2011 
XYZ        | 100        |     Open       | 02-JUN-2011    
XYZ        | 103        |     Open       | 01-APR-2011 
```

`ORDER BY IncidentDate desc, VendorName`没有提供所需的输出。有什么帮助吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-15T23:25:23.337

使用分析函数：

```
SELECT *
FROM(
    SELECT 
        VendorName, 
        IncidentID, 
        IncidentStatus, 
        IncidentDate, 
        MAX(IncidentDate) OVER (PARTITION BY VendorName) maxDate
    FROM yourTable
) t
ORDER BY t.maxDate DESC, t.VendorName ASC, t.IncidentDate DESC 
```

参考： http: [//docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj13658.html](http://docs.oracle.com/javadb/10.8.2.2/ref/rrefsqlj13658.html) [http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions003.htm](http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions003.htm) [http:// /docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-15T23:22:49.287

这会做到...

```
ORDER BY MAX(INCIDENTDATE) OVER (PARTITION BY VENDORNAME) DESC, INCIDENTDATE DESC 
```

...但我不确定 ORDER BY 中是否允许分析函数。如果不是，请在子查询中计算它并在主查询中排序...

```
select ...
from   (
  select Max(incidentdate) over (partition by vendorname) max_incidentdate_by_vendor,
         ...)
order by max_incidentdate_by_vender desc, incidentdate desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-09T16:00:35.203

如果您使用的是 RAC 安装

```
set linesize 300
column REDOLOG_FILE_NAME format a50
SELECT
    a.INST_ID,
    a.GROUP#,
    a.THREAD#,
    a.SEQUENCE#,
    a.ARCHIVED,
    a.STATUS,
    b.MEMBER    AS REDOLOG_FILE_NAME,
    (a.BYTES/1024/1024/1024) AS SIZE_GB
FROM gv$log a
JOIN gv$logfile b ON a.Group#=b.Group# 
AND a.INST_ID=b.INST_ID 
ORDER BY a.INST_ID ASC, a.GROUP# ASC; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-10-02T19:51:54.843

```
select vendorname, incidentid, incidentstatus, incidentdate, max(incidentdate) 
over (partition by vendorname order by incidentdate desc) max_incidentdate
from t1 order by max_incidentdate desc, incidentdate desc 
```

# qt - 在基类中访问 QPainter

> ID：13897026
> 
> 赞同：2
> 
> 时间：2012-12-15T23:09:49.860
> 
> 标签：qt, qpainter

我正在创建使用 QWidgets 绘制事件绘制网格的小部件类。我的基类 BaseRenderArea 包含此方法：

```
//draws a list of guesses in the grid
void BaseRenderArea::drawGuesses(const QList <GuessPoint> &list, QPainter *painter)
{
    //QPainter painter1(this);

    QPen currentPen = painter->pen();

    painter->setPen(QString("red"));

    for(int i=0;i<list.size();i++)
    {
        GuessPoint gp = list.at(i);

        switch(gp.m_type)
        {
        case GuessPoint::Miss:
            drawMiss(gp.m_row, gp.m_col, painter);
            break;
        case GuessPoint::Dead:
            drawDead(gp.m_row, gp.m_col, painter);
            break;
        case GuessPoint::Hit:
            drawHit(gp.m_row, gp.m_col, painter);
            break;
        default:
            ;
        }
    }

    painter->setPen(currentPen);

} 
```

我从派生类小部件的paintEvent 调用此方法。

```
//the paint event
//uses the base class to draw the texts and
//the grid
//and then draws the guesses made until now
//as well as the score for each choice of the computer
void DebugRenderArea::paintEvent(QPaintEvent *event)
{
    QPainter painter(this);

    BaseRenderArea::paintEvent(event);

    //to do: draw guesses
    drawGuesses(&painter);

    //draw scores
    //drawScores(&painter);

} 
```

派生类中的drawGuesses方法实现如下：

```
//draws the guesses made until this moment
void DebugRenderArea::drawGuesses(QPainter *painter)
{
    QList <GuessPoint> list = m_logic->getListGuesses();
    BaseRenderArea::drawGuesses(list,painter);

} 
```

这种方法在第二行painter->setPen中的BaseRenderArea::drawGuesses中给了我一个分段错误。

如果我使用以下代码更改 BaseRenderArea::drawGuesses（不重用在派生类中创建的 QPainter，而是创建一个新的 QPainter）：

```
//draws a list of guesses in the grid
void BaseRenderArea::drawGuesses(const QList <GuessPoint> &list, QPainter *painter)
{
    QPainter painter1(this);

    QPen currentPen = painter1.pen();

    painter1.setPen(QString("red"));

    for(int i=0;i<list.size();i++)
    {
        GuessPoint gp = list.at(i);

        switch(gp.m_type)
        {
        case GuessPoint::Miss:
            drawMiss(gp.m_row, gp.m_col, &painter1);
            break;
        case GuessPoint::Dead:
            drawDead(gp.m_row, gp.m_col, &painter1);
            break;
        case GuessPoint::Hit:
            drawHit(gp.m_row, gp.m_col, &painter1);
            break;
        default:
            ;
        }
    }

    painter1.setPen(currentPen);

} 
```

一切正常。我的问题为什么？如何在基类的方法中使用派生类的paintEvent中创建的QPainter？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:35:30.393

该[文档](http://qt-project.org/doc/qt-4.8/qpainter.html#begin)说您不能`QPainter`在同一个绘图设备上拥有 2 个 active 。

因此，因为`BaseRenderArea::paintEvent`可能正在创建自己的`QPainter`，它可能会使您之前在`DebugRenderArea::paintEvent`.

您可以简单地重新排序这两行：

```
BaseRenderArea::paintEvent(event);

QPainter painter(this); 
```

# windows - 如何在当前 shell 中使用管理员权限在 PowerShell 中运行命令？

> ID：13897028
> 
> 赞同：0
> 
> 时间：2012-12-15T23:10:25.730
> 
> 标签：windows, powershell, admin

我尝试编写一个简短的 runas-admin 函数，我可以在其中传递另一个函数名称作为参数，并以管理员权限执行该命令（或多或少相当于 linux 中的 sudo）。当我尝试运行该功能时，它会连续运行并且永不结束，占用了大量的 CPU。我是 PowerShell 新手，所以我的代码有问题吗？

```
function runas-admin
{
# Get the ID and security principal of the current user account
$myWindowsID=[System.Security.Principal.WindowsIdentity]::GetCurrent()
$myWindowsPrincipal=new-object System.Security.Principal.WindowsPrincipal($myWindowsID)

# Get the security principal for the Administrator role
$adminRole=[System.Security.Principal.WindowsBuiltInRole]::Administrator

# Check to see if we are currently running "as Administrator"
if ($myWindowsPrincipal.IsInRole($adminRole))
{
   # We are running "as Administrator" - so change the title and background color to indicate this
   $Host.UI.RawUI.WindowTitle = $myInvocation.MyCommand.Definition + "(Elevated)"
   $Host.UI.RawUI.BackgroundColor = "DarkBlue"
   clear-host
}
else
{
   # We are not running "as Administrator" - so relaunch as administrator

   # Create a new process object that starts PowerShell
   $newProcess = new-object System.Diagnostics.ProcessStartInfo "PowerShell";
   $newProcess.RedirectStandardError = $TRUE;
   $newProcess.RedirectStandardOutput = $TRUE;
   $newProcess.UseShellExecute = $FALSE;
   # Specify the current script path and name as a parameter
   $newProcess.Arguments = $myInvocation.MyCommand.Definition;

   # Indicate that the process should be elevated
   $newProcess.Verb = "runas";

   # Start the new process
   $childProcess = [System.Diagnostics.Process]::Start($newProcess);
   $childProcess.WaitForExit();
   Write-Output $childProcess.StandardOutput.ReadToEnd();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:02:42.977

或者您可以只`Start-Process`使用动词，`runas`例如：

```
Start-Process powershell.exe -Verb runas 
```

# wordpress - 如何在 Wordpress 的小部件描述中添加换行符？

> ID：13897029
> 
> 赞同：3
> 
> 时间：2012-12-15T23:10:48.603
> 
> 标签：wordpress, widget, line-breaks

我想在 Wordpress 的小部件描述中添加换行符，以在管理面板中显示使用说明，如下所示：

```
To format the text use the tags:
<h3>Subtitle</h3>
<strong>Bold</strong>
[:pt]Text in Portuguese
[:en]Text in English
[:es]Text in Spanish 
```

到目前为止的想法是使用 ISO 8859-1 符号 ( `&nbsp;`) 添加空格，这不是最佳解决方案（描述为葡萄牙语）：

```
register_sidebar( array(
    'name' => 'Widget',
    'id' => 'widget-user',
    'description' => "Para formatar o texto, utilize as tags: <h3>Subtítulo laranja</h3> &nbsp; <strong>Negrito</strong> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#91;:pt]Texto em português nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#91;:en]Texto em inglês &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &#91;:es]Texto em espanhol &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (o que estiver escrito fora das tags de idioma irão aparecer para todos",
    'before_widget' => '<div class="widget-user"><div class="box">',
    'after_widget' => '</div></div>',
    'before_title' => '<h3 class="widget-title">',
    'after_title' => '</h3>',
)); 
```

与'before_widget'、'after_widget'、'before_title'和'after_title'项不同，'description'不接受HTML。如果是这样，只需转义 HTML 即可轻松解决，我不想使用 .php 之类的 php 函数将其转换为 HTML `htmlspecialchars()`。

我拼命尝试了这些但没有成功：

```
"description" => "This is a line <br> break test"    
"description" => "This is a line \n break test"    
"description" => "This is a line \r break test"
"description" => "This is a line \r\n break test"
"description" => htmlspecialchars("This is a line <br>break test")
htmlspecialchars("description") => "This is a line <br>break test"
"description" => htmlentities("This is a line <br>break test")
"description" => html_entity_decode("This is a line <br>break test")
"description" => nl2br("This is a line <br> break test")
nl2br("description") => nl2br("This is a line <br> break test") 
```

那么，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:18:24.687

从您的问题来看，您可能对小部件和侧边栏感到有些困惑——或者从您使用这两个术语的方式来看，这听起来可能就是这样。因此，如果我向您重申显而易见的事实，我深表歉意。

**侧边栏**是您网站上可以显示小部件的动态部分。*小部件*是显示在一个或多个侧边栏中的单个项目。您引用的函数**register_sidebar()**用于创建侧边栏区域 - 设置 --> 外观菜单中的这些块之一，您可以将小部件拖到该区域。描述字段仅用于指示基本信息。关于该特定侧边栏的使用位置。例如，如果您注册了一个计划在标题中使用的侧边栏，则说明可能类似于“出现在导航菜单上方的标题中”。

小部件也有提供信息的描述。关于如何填写他们的各种选项。这听起来像你正在尝试做的事情。所以问题是你想使用什么小部件？您可以在小部件代码中设置您正在谈论的描述。

至于侧边栏描述，Wordpress 使用函数**wp_sidebar_description($id)**来输出每个侧边栏的描述。该函数通过另一个 Wordpress 函数**esc_html()**运行描述文本，该函数通过几个检查运行它并删除任何可能存在问题的内容。

不过，您有机会更改默认输出。它所做的最后一件事是将过滤器**esc_html**应用于文本。因此，如果您想让`<br>`实际功能作为换行符，您可以简单地在主题的 functions.php 文件中添加一个过滤器来恢复该功能，如下所示：

```
add_filter('esc_html', 'newLines');
function newLines($desc){
return htmlspecialchars_decode($desc);
} 
```

这将基本上撤消 Wordpress 正在执行的操作，并按照您的预期输出任何 HTML 代码（粗体、斜体等）。

应该在原始响应中指出，上述过滤器会影响 esc_html() 函数**在您网站上使用的任何地方**——您可能不希望这样！

不幸的是，没有任何钩子或过滤器可以让您定位特定的侧边栏，但您可以使用以下内容将上面的过滤器限制为仅在管理页面上发生：

```
function newLines($desc){
global $pagenow;
global $wp_registered_sidebars;
if($pagenow == 'widgets.php'){
return htmlspecialchars_decode($desc);
}
}
add_filter('esc_html', 'newLines'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T12:01:08.213

在 wp-includes/widgets.php 中打开这个文件

找到名为： wp_widget_description() 的函数；在第 664 行

用这个替换它

函数 wp_widget_description( $id ) { if ( !is_scalar($id) ) return;

```
global $wp_registered_widgets;

if ( isset($wp_registered_widgets[$id]['description']) )
    return ( $wp_registered_widgets[$id]['description'] ); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-11T16:33:28.293

我找到了一种使用简码的方法。首先，我们需要在 functions.php 文件中添加一个函数

```
function line_break_shortcode() {
    return '<br />';
}

add_shortcode( 'br', 'line_break_shortcode' ); 
```

然后我们可以在任何需要休息的地方使用 [br]

例如：

```
 Anti-counterfeiting [br] & [br] Online 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-16T02:59:10.130

我不知道答案。但是，一种可能的解决方案是将其添加到小部件 form() 中，就在字段的上方或下方。如果您还需要容纳更多文本，则可以使表单更宽（小部件构造函数中的第四个参数是一个接受“宽度”的数组）。

# lucene - Hibernate-Search 和 Lucene 3.5 拼写检查器

> ID：13897033
> 
> 赞同：0
> 
> 时间：2012-12-15T23:11:36.833
> 
> 标签：lucene, hibernate-search

我正在使用带有 Lucene 3.5 的 Hibernate Search 并尝试实现“您的意思是？” 拼写检查搜索。我想将索引用作字典。我遇到的问题是 indexDirectory 的文档与当前方法签名不匹配，我无法从任何其他来源找到有关如何实现的任何详细信息。谁能指出我正确的方向？这是我从方法签名本身中破译的内容，但它只会导致锁定异常。

```
Directory directory = FSDirectory.open(FileUtils.toFile(new URL("file:lucene/indexes/")));

IndexWriterConfig indexWriterConfig = new IndexWriterConfig(Version.LUCENE_35, new                StandardAnalyzer(Version.LUCENE_35));

IndexWriter indexWriter = new IndexWriter(directory, indexWriterConfig);
IndexReader indexReader = IndexReader.open(indexWriter, false);

this.spellChecker = new SpellChecker(directory);
this.spellChecker.indexDictionary(new LuceneDictionary(indexReader, "favorite"), indexWriterConfig, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T07:46:01.647

找到了解决方案。秩序很重要。

```
Directory directory = FSDirectory.open(FileUtils.toFile(new URL("file:lucene/indexes/")));
this.spellChecker = new SpellChecker(directory);
IndexReader indexReader = IndexReader.open(directory, true);
LuceneDictionary dictionary = new LuceneDictionary(indexReader, "field");
IndexWriterConfig indexWriterConfig = new IndexWriterConfig(Version.LUCENE_35, new StandardAnalyzer(Version.LUCENE_35));
this.spellChecker.indexDictionary(dictionary, indexWriterConfig, true); 
```

# php - 无法更新用户的个人资料

> ID：13897034
> 
> 赞同：0
> 
> 时间：2012-12-15T23:11:49.067
> 
> 标签：php, mysql

我做了一个程序。在这个程序中，用户可以登录并更改用户个人资料中的详细信息。详细信息是：用户名，密码，电子邮件。我的代码是：

配置文件.php

```
<?php
include_once "db_connection.php";
if (isset($_GET['user_name']))
{
$user_name = $_GET['user_name'];
$result = mysql_query("SELECT * FROM users WHERE user_name LIKE '$user_name' ")
or die(mysql_error());
$row = mysql_fetch_assoc($result);
if($row)
{
$user_email = $row['user_email'];
}
else
{
echo "error";
}
}
?> 
```

profile.php 中的形式是：

```
<form id="form1" action="updateprofile.php" method="post" class="form">
<fieldset class="form-inline">
<div class="form-col-3-8" style="padding-top:10px;padding-bottom:20px;"align="center">
<label>UserName<span class="required">*</span></label>
<input type="text" name="user_name" value="<?php echo $user_name; ?>" />
</div>
<div class="form-col-2-8" style="padding-top:10px;padding-bottom:20px;"align="center">
<label>Password<span class="required">*</span></label>
<input type="password" name="password"/>
</div>
<div class="form-col-3-8" style="padding-top:10px;padding-bottom:20px;"align="center">
<label>E-mail<span class="required">*</span></label>
<input type="text" name="user_email" value="<?php echo $user_email; ?>" />
</div>
</fieldset>
<div class="da-button-row">
<input type="reset" value="Reset" />
<input type="submit" value="Submit" name="submit"/>
</div>
</form> 
```

最后 updateprofile.php 是：

```
<?php
include_once "db_connection.php";
if (isset($_POST['submit'])) 
{
$user_name = $_POST['user_name'];
$user_name2 = mysql_real_escape_string(htmlspecialchars($_POST['user_name']));
$password =  mysql_real_escape_string(htmlspecialchars($_POST['password']));
$passwordmd = md5($password);
$user_email = mysql_real_escape_string(htmlspecialchars($_POST['user_email']));
mysql_query("UPDATE users SET user_name='$user_name2', user_email='$user_email' ,user_password_hash='$passwordmd' WHERE user_name LIKE '$user_name'")
or die(mysql_error());
header("Location: index.php");
}
?> 
```

一切正常，但是当我推送提交时，数据库中的详细信息不会改变。我究竟做错了什么？

# mysql - “ODBC 3.51 驱动程序”在 Windows 7 上拒绝用户 '*'@'*' 访问（使用密码：YES）

> ID：13897035
> 
> 赞同：1
> 
> 时间：2012-12-15T23:12:17.233
> 
> 标签：mysql, odbc, ms-access-2007

要创建从 Access 到 MySQL 的 ODBC 连接，我按照此页面 [http://www.plaintutorials.com/install-and-create-mysql-odbc-connector-on-windows-7/中给出的所有步骤操作](http://www.plaintutorials.com/install-and-create-mysql-odbc-connector-on-windows-7/)

我正在使用 64 位 Windows 7、32 位 Access 2007、32 位 3.51 ODBC 连接器和远程 MySQL 服务器：4.13（无法更新它，因为很多人都在使用它，而且他们很讨厌并且不愿意改变任何东西）

我的远程 MySQL 服务器密码包含一个特殊字符“#”。我认为因此我收到此错误“[ODBC 3.51 Driver] Access Denied error for user '<em>'@'' (using password:YES)”。但是，如果我在 Windows XO 上使用它，它可以工作，但不能在 Windows 7 上使用。如果我在 Windows 7 上使用 5.2 驱动程序，它可以工作，但这会导致另一个问题“服务器不支持 4 字节编码的 UTF8 字符”时我尝试同步表。

有什么解决办法吗？任何帮助表示赞赏。

# java - GridBagLayout 未在组件之间正确分配大小

> ID：13897036
> 
> 赞同：2
> 
> 时间：2012-12-15T23:12:27.490
> 
> 标签：java, swing, resize, gridbaglayout

我有什么在我看来应该是一个非常简单的问题。`GridBagLayout`在我看来，这只是对制造...的人的巨大疏忽。

反正。我正在`GridBagLayout`为我正在制作的游戏显示一个 27x13 的瓷砖网格。我使用这种布局是因为它能够调整组件的大小并且配置起来非常容易，但只有一个小问题。在调整图块大小时，如果宽度不是 27 的倍数或高度不是 13 的倍数，则边框周围会有空白。

为了说明我的意思：

[这](http://i.imgur.com/dbf80.png)是我调整框架大小以使`JPanel`内部大小为 864x416 时的样子，即 27 和 13 的完美倍数。

[这](http://i.imgur.com/TtepC.png)是我调整框架大小以使`JPanel`内部大小为 863x415 时的样子，几乎不是 27 或 13 的倍数。

它根本没有在图块之间分配额外的像素。我不知道为什么。`GridBagLayout`当我使用它们各自的方法或覆盖它们，甚至使用's`ipadx`和约束来摆弄最小/最大/首选尺寸时`ipady`，我可以删除空白 - 但它所做的只是挤压最外面的瓷砖以适应其余部分。您可以在下面的示例代码中看到这一点。

这是一个SSCCE：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.util.Random;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Game extends JPanel {
    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                start();
            }
        });
    }
    static void start() {
        JFrame frame = new JFrame("Game");
        JPanel newFrame = new MainGameScreen();
        frame.getContentPane().add(newFrame);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
}
class MainGameScreen extends JPanel {
    public MainGameScreen() {
        setPreferredSize(new Dimension(864, 551));
        setLayout(new GridBagLayout());
        setBackground(Color.green);
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.weightx = 1;
        gbc.weighty = 1;
        gbc.ipadx = 0; //Change to 64 to see undesired effects
        gbc.ipady = 0; //^
        for (int i=0;i<13;i++) {
            for (int j=0;j<27;j++) {
                gbc.gridx = j;
                gbc.gridy = i;
                add(new ImagePanel(), gbc);
            }
        }
    }
}
class ImagePanel extends JComponent { 
    private int r,g,b;
    public ImagePanel() {
        Random generator = new Random();
        r = generator.nextInt(100)+1;
        g = generator.nextInt(100)+1;
        b = generator.nextInt(100)+1;
    }
    @Override
    public void paintComponent(Graphics gr) {
        super.paintComponent(gr);
        gr.setColor(new Color(r,g,b));
        gr.fillRect(0, 0, getWidth(), getHeight());
    }
} 
```

我的问题是，如何使布局始终看起来像第一张图片？我需要不同的布局吗？我在这里很迷路。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:18:08.583

我会为带有方形图块的面板使用 GridLayout，并将其嵌套在窗口其余部分的另一个布局（GridBagLayout、BorderLayout、BoxLayout 或某种布局组合）中。

也就是说，在这种情况下，GridLayout 和 GridBagLayout 都会均匀分布像素。由于您只能使用整个像素，因此在划分空间后会留下余数，并将其用作填充。这在很大程度上是不可避免的，尽管有一些潜在的解决方法：

*   强制执行某些窗口大小
*   绘制比您需要的更大的面板，但使用视口，以便在视图中截断额外的图块
*   添加与平铺区域接壤的其他元素，以有效隐藏存在额外填充的事实

如果您对第一个选项没问题，您可以稍作修改以将窗口捕捉到兼容的大小，这样就没有剩余（注意：我还将您的几个硬编码整数更改为常量）：

```
package com.example.game;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import java.util.Random;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

    public class Game extends JPanel {      
        public static void main(String[] args) {
            javax.swing.SwingUtilities.invokeLater(new Runnable() {
                public void run() {
                    start();
                }
            });
        }

        static void start() {
            final JFrame frame = new JFrame("Game");
            JPanel newFrame = new MainGameScreen();

            frame.addComponentListener(new ComponentAdapter() {
                @Override
                public void componentResized(ComponentEvent e) {
                    int h = frame.getContentPane().getHeight() % MainGameScreen.ROWS;
                    int w = frame.getContentPane().getWidth() % MainGameScreen.COLS;

                    // Subtract the remainder pixels from the size.
                    frame.setSize(frame.getWidth() - w, frame.getHeight() - h);
                }
            });
            frame.getContentPane().add(newFrame);
            frame.pack();
            frame.setLocationRelativeTo(null);
            frame.setVisible(true);
        }
    }
    class MainGameScreen extends JPanel {
        static final int ROWS = 13;
        static final int COLS = 27;

        public MainGameScreen() {
            setPreferredSize(new Dimension(864, 551));
            setLayout(new GridBagLayout());
            setBackground(Color.green);
            GridBagConstraints gbc = new GridBagConstraints();
            gbc.fill = GridBagConstraints.BOTH;
            gbc.weightx = 1;
            gbc.weighty = 1;
            gbc.ipadx = 0; //Change to 64 to see undesired effects
            gbc.ipady = 0; //^
            for (int i=0;i<ROWS;i++) {
                for (int j=0;j<COLS;j++) {
                    gbc.gridx = j;
                    gbc.gridy = i;
                    add(new ImagePanel(), gbc);
                }
            }
        }
    }

    class ImagePanel extends JComponent { 
        private int r,g,b;
        public ImagePanel() {
            Random generator = new Random();
            r = generator.nextInt(100)+1;
            g = generator.nextInt(100)+1;
            b = generator.nextInt(100)+1;
        }
        @Override
        public void paintComponent(Graphics gr) {
            super.paintComponent(gr);
            gr.setColor(new Color(r,g,b));
            gr.fillRect(0, 0, getWidth(), getHeight());
        }
} 
```

# php - Php 计数器和子字符串连接

> ID：13897037
> 
> 赞同：0
> 
> 时间：2012-12-15T23:12:28.287
> 
> 标签：php, concatenation

我正在开发一个汽车租赁系统，用户可以在其中将汽车添加到 php 脚本中，从而将值添加到后端 dababase 中。我有一个名为“ID”的字段，它是自动递增的 INT 字段。每次我添加汽车时，该值都会自动添加为递增的 Integer。现在，我实际上希望它是不同的，例如，如果要添加的汽车的名称是“MERCEDES”，则 ID 值应该是 MER001。如果随后添加的下一辆车是 VAUXHALL，则 ID 值应为 VAU002，依此类推。我知道如何使用 php 中的子字符串函数从梅赛德斯中获取“MER”，但我不知道如何使用循环计数器并将其与提取的子字符串连接。我相信为此，我的数据库表中的 ID 字段必须是 VARCHAR，但我不知道 VARCHAR 是否可以自动递增（没有意义）。

# 将新汽车添加到数据库

填写以下详细信息以注册

```
 <label> Car Name
  <span class="small">Enter car name</span>
  </label>
  <input type="text" name="CARNAME" id="CARNAME" />

  <label>Fuel Type
  <span class="small">Eg: Petrol</span>
  </label>
  <input type="text" name="FUELTYPE" id="FUELTYPE" />

  <label>Transmission
  <span class="small">Eg: Manuel</span>
  </label>
  <input type="text" name="TRANSMISSION" id="TRANSMISSION" />

  <label>Engine Size
  <span class="small">Eg: 2.4</span>
  </label>
  <input type="text" name="ENGINE_SIZE" id="ENGINE_SIZE" />

  <label>Doors
  <span class="small">Eg: 4</span>
  </label>
  <input type="text" name="DOORS" id="DOORS" />

  <label>Total
  <span class="small">Eg: 40</span>
  </label>
  <input type="text" name="TOTAL" id="TOTAL" />

  <label>Available
  <span class="small">Eg: 40</span>
  </label>
  <input type="text" name="AVAILABLE" id="AVAILABLE" />

  <input type="submit" name="submit" value="Add Car">
  <div class="spacer"></div>

  </form> 
```

此表单将您带到包含以下代码的添加.php：

```
<?php
$link = mysql_connect ("xxxxx", "xxxxx", "xxxxx");
mysql_select_db ("xxxxx");

$ID = $_POST['ID'];
$CARNAME = $_POST['CARNAME'];
$FUELTYPE = $_POST['FUELTYPE'];
$TRANSMISSION = $_POST['TRANSMISSION'];
$ENGINE_SIZE = $_POST['ENGINE_SIZE'];
$DOORS = $_POST['DOORS'];
$TOTAL = $_POST['TOTAL'];
$AVAILABLE = $_POST['AVAILABLE'];
$DATEADDED = $_POST['DATEADDED'];
$test = substr($CARNAME,0,3); //tried to use this test variable and it works to get the substring!

if($TOTAL>=$AVAILABLE)
{     
$query = "insert into car (ID,CARNAME,FUELTYPE,TRANSMISSION,ENGINE_SIZE,DOORS,TOTAL,AVAILABLE,DATEADDED) values ('$_POST[ID]','$_POST[CARNAME]','$_POST[FUELTYPE]','$_POST[TRANSMISSION]','$_POST[ENGINE_SIZE]','$_POST[DOORS]','$_POST[TOTAL]','$_POST[AVAILABLE]',CURDATE())";
$result = mysql_query($query);
header("location: list_logged.php");
}
else
{
echo "<script>alert('The Total number of cars cannot be less than Available number!'); location.href='add.php';</script>"; 
}
mysql_close ($link);

?> 
```

关于如何将某些内容发布到 ID 以使其像 MER001、MAC002 ......等等的任何建议？现在它只是设置为一个自动递增的值，它是自动添加的。我知道我必须将数据库中的字段从 ID 更改为 VARCHAR，但我不知道下一步该做什么。我尝试在 substr 和 php counter concatenation 上搜索类似的问题，但没有发现任何用处。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:51:58.807

花了一些时间想通了。不过，您确实应该使用 PDO。您的数据库也将如下所示：

ID、CARNAME、FUELTYPE、TRANSMISSION、ENGINE_SIZE、DOORS、TOTAL、AVAILABLE 和 DATEADDED（这是一个日期时间数据类型。其余都是 VARCHARS）。

还有一件事。而不是使用 CURDATE() 您使用 NOW() 它给出了插入数据库的日期和时间。

```
<?php
$link = mysql_connect ("***", "****", "*******");
mysql_select_db ("*****");

$CARNAME = $_POST['CARNAME'];
$FUELTYPE = $_POST['FUELTYPE'];
$TRANSMISSION = $_POST['TRANSMISSION'];
$ENGINE_SIZE = $_POST['ENGINE_SIZE'];
$DOORS = $_POST['DOORS'];
$TOTAL = $_POST['TOTAL'];
$AVAILABLE = $_POST['AVAILABLE'];

    //FUNCTION TO GET LAST ID FROM DB
    function getLastID(){ //Function to get last ID created and return
        $query = "SELECT ID FROM car ORDER BY DATEADDED DESC LIMIT 1;";
        $lastID = mysql_query($query);
        $results = mysql_fetch_assoc($lastID);
        return $results; //returns last id
    }

    //SWITCH CASE TO CREATE PREPENDING CARNAME
    switch ($CARNAME) { //PreString based off of form input
        case 'MERCEDES':
        $preString = 'MER';
            break;
        case 'VAUXHALL':
        $preString = 'VAU';
            break;
        default:
        $preString = 'NONE';
            break;
    }
    //CREATING NEW INDEX
    $newID = getLastID(); // Get Newest ID from the database
    $castNewID = (String) $newID['ID']; //Cast ID to String
    $last3chars = substr($castNewID, -3);  //Get last three characters of ID
    $newIndexNumber = (int) $last3chars + 1; // Cast last3chars to int and add one
    $castToString = str_pad((String) $newIndexNumber, 3, "0", STR_PAD_LEFT); //Append zeros to string if we haven't reached 100 yet and cast back into a string.
    $newCarID = (String) $preString . (String) $castToString; //Finally create new ID concatenation

    //var_dump($newCarID); //For debugging

    //INSERT INTO DB
    if($TOTAL>=$AVAILABLE)
    {     
        $query = "insert into car (ID,CARNAME,FUELTYPE,TRANSMISSION,ENGINE_SIZE,DOORS,TOTAL,AVAILABLE,DATEADDED) 

                    values ('$newCarID', '$CARNAME', '$FUELTYPE','$TRANSMISSION','$ENGINE_SIZE','$DOORS','$TOTAL','$AVAILABLE',NOW())";

        $result = mysql_query($query);

        header("location: list_logged.php");
    }
    else
    {
        echo "<script>alert('The Total number of cars cannot be less than Available number!'); location.href='add.php';</script>"; 
    }
    mysql_close ($link);

?> 
```

# php - 在 CakePHP 应用程序中列出用户喜欢的帖子

> ID：13897040
> 
> 赞同：2
> 
> 时间：2012-12-15T23:13:00.650
> 
> 标签：php, cakephp

我有两个表：帖子和喜欢

我正在尝试列出当前登录用户喜欢的帖子。该方法如下所示：

```
$following = $this->Follower->listFollowing($this->Auth->user('id'));

$this->paginate = array('limit'=>20,'conditions'=>array('Post.id'=>array($following['Follower']['post_id']),'Post.status'=>array(1,2)),'order'=>array('Post.datetime'=>'desc'),
                        'contain'=>array('User','Answer'=>array('User'),'Tag'));

$this->set('posts',$this->paginate()); 
```

所以基本上我要做的是首先查询以下（喜欢）表以获取与用户匹配的所有行，然后在我的查找查询中使用这个帖子 ID 数组来列出查询中的帖子。

Follower 模型中的 listFollowing 方法如下所示：

```
public function listFollowing($user_id)
    {
        return $this->find('all', array( 
            'conditions' => array('Follower.user_id'=>$user_id) 
        ));
    } 
```

我目前收到如下错误：`Undefined index: Follower [APP/Controller/PostsController.php, line 94]`所以我会假设我在查找查询中尝试从以下内容传递帖子 ID 列表的方式不正确。

任何人都可以帮忙吗？谢谢

编辑：对 $following 进行调试会给出：

```
array(
    (int) 0 => array(
        'Follower' => array(
            'id' => '4',
            'user_id' => '6',
            'post_id' => '136'
        ),
        'User' => array(
            'password' => '*****',
            'id' => '6',
            'username' => 'driz',
            'email' => '######'
        ),
        'Post' => array(
            'id' => '136',
            'user_id' => '8',
            'datetime' => '2012-09-11 15:49:52',
            'modified' => '2012-09-16 15:31:38',
            'title' => 'Test Content',
            'slug' => 'Test_content',
            'content' => 'Test Content',
            'status' => '1'
        )
    ),
   (int) 1 => array(
        'Follower' => array(
            'id' => '5',
            'user_id' => '6',
            'post_id' => '133'
        ),
        'User' => array(
            'password' => '*****',
            'id' => '6',
            'username' => 'driz',
            'email' => '######'
        ),
        'Post' => array(
            'id' => '134',
            'user_id' => '8',
            'datetime' => '2012-09-11 15:49:52',
            'modified' => '2012-09-16 15:31:38',
            'title' => 'Test Content 2',
            'slug' => 'Test_content_2',
            'content' => 'Test Content 2',
            'status' => '1'
        )
    )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:22:13.280

几个问题：

*   您是否检查了正在执行的查询？如果它被执行，那么该方法可能是正确的。
*   $following 是否被填充？如果你调试它会发生什么？

*   如果您使用 'all' 进行检索，则结果将如下所示：

大批（

```
 [0] => Array
        (
            [ModelName] => Array
                (
                    [id] => 83
                    [field1] => value1
                    [field2] => value2
                    [field3] => value3
                )

            [AssociatedModelName] => Array
                (
                    [id] => 1
                    [field1] => value1
                    [field2] => value2
                    [field3] => value3
                )

        )
) 
```

因此，您将永远无法在 $following['Follower'] 中找到任何东西。检查[Cake 的](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html)文档

根据您的评论，如果您需要一个 id 列表，请在您的方法中尝试此操作：

```
public function listFollowing($user_id)
{
    return $this->find('list', array(
      'conditions' => array('Follower.user_id'=>$user_id) 
      'fields' => array('Follower.user_id'),
      'recursive' => 0);
} 
```

“列表”检索模式正是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:21:13.433

使用这些有限的信息很难猜出错误，但我猜这是与您的`$following`数组相关的 PHP 错误。

您可以尝试在函数调用`debug($following)`之后放置吗？`listFollowing()`所以最后，它应该是这样的：

```
$following = $this->Follower->listFollowing($this->Auth->user('id'));

debug($following);

$this->paginate = array('limit'=>20,'conditions'=>array('Post.id'=>array($following['Follower']['post_id']),'Post.status'=>array(1,2)),'order'=>array('Post.datetime'=>'desc'),
                        'contain'=>array('User','Answer'=>array('User'),'Tag'));

$this->set('posts',$this->paginate()); 
```

您将看到从中返回的`listFollowing()`内容导致了索引错误。您可以使用该信息进一步调试它。我无法再提供帮助，因为没有数据库架构、完整代码、导致此问题的变量/情况等 :)

# .htaccess - mod_rewrite：重定向子域和文件夹，但不重定向文件夹内容

> ID：13897042
> 
> 赞同：0
> 
> 时间：2012-12-15T23:13:20.060
> 
> 标签：.htaccess, mod-rewrite, subdomain

我有 assets.domain.com 托管我所有的图像、字体、脚本等，以便在顶级域上安装 Wordpress。我想在不影响文件夹内容的情况下将对子域和文件夹的任何访问重定向到顶级域（很多文件类型，因此希望避免将每个文件类型都列为豁免，但如果这是我唯一的选择，那就这样吧） .

接近：

```
# Enable URL Rewriting
Options -Indexes
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteRule ^(images|type|scripts)(/.*|$) - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/robots.txt
  RewriteCond %{REQUEST_URI} !images/.* [NC]
  RewriteCond %{REQUEST_URI} !type/.* [NC]
  RewriteCond %{REQUEST_URI} !scripts/.* [NC]
  RewriteRule ^(.*)$ http://www\.domain\.com [L,QSA]
</IfModule> 
```

感谢[Christopher Brix](https://stackoverflow.com/questions/11168307/mod-rewrite-but-skip-a-directory)和[mootinator](https://stackoverflow.com/questions/7717637/htaccess-mod-rewrite-exemptions)。

# html - 是否存在或正在设计任何并行的 HTML 解析器？

> ID：13897044
> 
> 赞同：2
> 
> 时间：2012-12-15T23:13:40.823
> 
> 标签：html, parallel-processing, html-parsing

据我所知，HTML 解析由于其强依赖性而难以并行化。

是否存在或正在设计任何并行 HTML 解析器，以便可以并行解析单个 HTML 文档并最终生成单个 DOM 树？

它可能适用于早期的 HTML 版本，也可能适用于最新的 HTML5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T00:53:45.007

从解析的角度来看，HTML 中的“强依赖关系”与您可能解析的任何其他语言中的强依赖关系没有太大区别。真正的问题是解析文件的一部分，通常取决于左边的上下文。并行解析器的问题是如何获取左上下文？

关于如何构建并行解析器的[一般理论，通过将文本分成块，分别解析它们并将部分拼接在一起。](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.30.389&rep=rep1&type=pdf)McKeeman 的论文（参考）声称 N 个处理器的加速比为 0.85N。

我似乎记得一篇论文提出从两端解析文件，在中间相遇。右向解析器生成左上下文；左行解析器生成正确的上下文。*您可以通过反转*语法相对容易地进行双向扫描，并将前向和后向语法提供给解析器生成器。将它们粘合在一起可能需要参考论文中概述的各种技术。

我们的 DMS Software Reengineering Toolkit 有一个 GLR 解析器，它使用*流水线*将词法分析阶段与解析分开，并且有一个完整的 HTML4 解析器可用。（DMS 建立在并行基础之上；将其配置为并行解析单个文件也相对容易。）使用 DMS 对语言方言的支持，HTML4 解析器很可能扩展到 HTML5。

作为一般规则，如果您只解析一个程序（或 HTML）文件，这种并行性实际上并不重要，因为它不会对您的整体性能产生太大影响。大多数解析器都非常快，它们的时间主要用于处理单个字符的工作。*通过将文件分成块并单独*对块进行词法分析，您可能会获得很大的加速，特别是因为大部分 HTML 文件都浪费了空格。

如果您必须处理*大量*HTML 文件，那么每个文件解析一个线程可能会更好。然后您可以在每个线程中使用非常传统的解析器技术。

# php - 为 bindParam 重用变量时出现奇怪的 PDO 行为

> ID：13897048
> 
> 赞同：3
> 
> 时间：2012-12-15T23:14:16.653
> 
> 标签：php, pdo, parameterized-query

我对 pdo 的这种意外行为感到困惑：

考虑我写的这个简单的查询：

```
 $username = "vidhu";
    $numResults = 10;

    $db_vc = new PDO(DB_ADDRESS, DB_USER, DB_PASS);
    $stmt = $db_vc->prepare("SELECT username, email FROM users WHERE username = :username LIMIT :numResults");
    $stmt->bindParam(':username', $username, PDO::PARAM_STR);
    $stmt->bindParam(':numResults', $numResults, PDO::PARAM_INT);
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    print_r($result); 
```

这给了我预期的输出：

```
Array ( [0] => Array ( [username] => vidhu [email] => someone@gmail.com) ) 
```

* * *

现在让我感到困惑的是。当我像这样复制并粘贴查询时

```
 $username = "vidhu";
    $numResults = 10;       
    $db_vc = new PDO(DB_ADDRESS, DB_USER, DB_PASS);
    $stmt = $db_vc->prepare("SELECT username, email FROM users WHERE username = :username LIMIT :numResults");
    $stmt->bindParam(':username', $username, PDO::PARAM_STR);
    $stmt->bindParam(':numResults', $numResults, PDO::PARAM_INT);
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    print_r($result);

    echo "<br />";        

    $username = "vidhu";
    $numResults = 10;   
    $db_vc = new PDO(DB_ADDRESS, DB_USER, DB_PASS);
    $stmt = $db_vc->prepare("SELECT username, email FROM users WHERE username = :username LIMIT :numResults");
    $stmt->bindParam(':username', $username, PDO::PARAM_STR);
    $stmt->bindParam(':numResults', $numResults, PDO::PARAM_INT);
    $stmt->execute();
    $result = $stmt->fetchAll(PDO::FETCH_ASSOC);
    print_r($result); 
```

我希望输出也会被复制，对吗？就像：

```
Array ( [0] => Array ( [username] => vidhu [email] => someone@gmail.com ) )
Array ( [0] => Array ( [username] => vidhu [email] => someone@gmail.com) ) 
```

但它不会产生那个输出！第二个查询**不返回**它显示的任何内容，如下所示：

```
Array ( [0] => Array ( [username] => vidhu [email] => xx.vidhuxx@gmail.com ) ) 
Array ( ) 
```

为什么是这样？有人可以解释吗？

* * *

**编辑**

如果我删除`:numResults`原始和副本中的参数以及查询中的硬编码 10，它会完美运行！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:39:27.270

好的，所以我想我发现了问题所在。

在我添加的第一个副本和第二个副本之间`var_dump($numResults)`。加载页面时显示在执行第一个查询副本后变量已转换为字符串。我真的不知道为什么会这样。

```
Array ( [0] => Array ( [username] => vidhu [email] => someone@gmail.com ) ) 
string(2) "10" 
Array ( ) 
```

所以我修复它的方式不是使用`$stmt->bindParam`我`$stmt->bindValue` 再次使用，我不知道机制或发生了什么，但它有效。

如果有人能解释为什么会发生这种行为会很好，即为什么将变量从整数更改为字符串。

# http - testng - 登录后的 HTTP REST 测试

> ID：13897049
> 
> 赞同：1
> 
> 时间：2012-12-15T23:14:19.700
> 
> 标签：http, rest, testing, functional-programming, testng

我已经设置了一个使用 testNG / Maven / Springs RestTemplate 测试 HTTP REST 应用程序的项目。

我用它来进行功能测试，对 REST 应用程序的多次调用包含在套件中以模拟用户流程。

这工作正常。

知道我们已经打开了身份验证。

问题是如何用 testNG 做到这一点？我如何（仅一次）登录我的测试套件。

我可以使用@BeforeSuite 并调用登录页面、登录并捕获所有其他请求所需的cookie。但是我在哪里存储这个 cookie 以便所有测试用例都可以添加它？当然，我可能必须在测试中添加一些代码来添加 cookie....但是我该如何掌握呢？

我查看了@parameter 和@dataprovider，但这些似乎对我没有多大帮助......

非常感谢任何帮助/建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:01:36.203

我创建了一个可行的解决方案。

我所做的是使用单例对象和@dataprovider，以获取数据进行测试：dataprovider 创建一个单例对象。单例对象在其创建过程中调用登录页面，并在每次来自不同测试的调用后返回 cookie 信息。

也许这有点像黑客，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T09:34:21.440

Singleton 解决方案有些笨拙，因为它阻止了将来的任何测试并行化。

有一些方法可以解决这个问题。一种是将 ITestContext 实例传递给您的 @BeforeSuite/@BeforeTest 和 @BeforeClass 配置方法，并通过每个实例中的测试上下文放置/获取参数：

```
public class Test {

    /** Property Foo is set once per Suite */
    protected String foo;

    /** Property Foo is set once per Test */
    protected String bar;

    /**
     * As this method is executed only once for all inheriting instances before the test     suite starts this method puts
     * any configuration/resources needed by test implementations into the test context.
     *
     * @param context test context for storing test conf data
     */
    @BeforeSuite
    public void beforeSuite(ITestContext context) {
        context.setAttribute("foo", "I was set in @BeforeSuite");
    }

    /**   
     * As this method is executed only once for all inheriting instances before the test starts this method puts any
     * configuration/resources needed by test implementations into the test context.
     *
     * @param context test context for storing test conf data
     */
    @BeforeTest(alwaysRun = true)
    public void beforeTest(ITestContext context) {
        context.setAttribute("bar", "I was set in @BeforeTest");
    }

    /**
     * This method is run before the first method of a test instance is started and gets all required configuration from
     * the test context.
     *
     * @param context test context to retrieve conf data from.
     */
    @BeforeClass
    public void beforeClass(ITestContext context) {
        foo = (String) context.getAttribute("foo");
        bar = (String) context.getAttribute("bar");

    }
} 
```

即使 @BeforeSuite/Test/Class 方法位于实际测试实现的超类中，此解决方案也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:20:50.890

如果您委托登录`Spring Security`并且您的后端不存储状态（意味着只授权孤立的请求），那么您不需要测试它。这意味着您可以在测试中禁用身份验证（cookie 获取）。这样您就可以将测试本身与授权分离。

但如果你不想这样做。如果你在套件中组织你的测试，你可以设置一个私人成员。cookie 将`header auth`在响应中。

```
@TestSuite
public void mySuite {

    private String cookie;

    @BeforeSuite public void login() {
         // Obtain cookie
         this.cookie = cookie;
    }
 ////// Rest of suite 
```

另一种看待它的方法是执行登录作为测试的一部分。

我不知道还有其他更优雅的方式来做到这一点。

# java - Android AnalogClock：以编程方式设置可绘制对象

> ID：13897050
> 
> 赞同：17
> 
> 时间：2012-12-15T23:14:24.540
> 
> 标签：java, android, xml, widget, clock

我正在制作一个模拟时钟应用程序，它在一个应用程序中包含大约 15 种设计。设置设计的一种方法是`widgetconfigs.XML`为每个设计创建不同的设计，但这会使运行 4.0+ 的设备变得混乱。

我还想过设置一个允许使用更改设计的活动

```
remoteviews.setInt(R.id.analogClock1, "setDialResource", R.drawable.clock1); 
```

但这不允许设置手绘...我还能做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-26T20:35:35.227

你实际上绘制一次drawables（当活动开始时）当然有一些动画和很多东西会改变activity的外观但不是drawables你可以将drawable用于activity中的不同对象，比如每个按钮都有一种样式但你不能重绘.

你有两种方法来做这个项目：

1.使用 XML

您可以进行 15 种不同的活动，并且通过[Intent](http://developer.android.com/reference/android/content/Intent.html) 您可以在活动之间切换

```
public void method()
{
    Intent i = new Intent(this , Destination.class);
    startActivity(i);
} 
```

2.使用代码

任何可以使用 XML 设计的东西也可以通过 java 代码编写。它需要更多的行，但它可以是[动态](https://en.wikipedia.org/wiki/Dynamic_programming)的，这意味着您不必为每个条件制作 if else ；您只需在每次需要时生成所需的对象。

例子：

xml

```
<Button
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@string/button_text"
... /> 
```

或以编程方式：

`Button button = new Button(this); YourView.addview(button);`

# ios - 如何在一个类中按下按钮以调用另一个类中的方法（iOS）

> ID：13897053
> 
> 赞同：0
> 
> 时间：2012-12-15T23:15:01.077
> 
> 标签：ios, class, button, delegates, ibaction

我很难解决这个问题。我有一个 MyCollectionViewController 类，它有一个名为“someMethod”的方法。我还有 MySupplementaryView 类，它有一个名为“aButton”的按钮。SupplementaryView 是 UICollectionView 中的页脚。

如何让 aButton 的 IBAction 调用 someMethod？

提前感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:18:21.017

我想我找到了。

```
[delegate someMethod]; 
```

傻我。

# android - 何时使用 Facebook 的新 Android SDK 3.0 请求权限？

> ID：13897056
> 
> 赞同：37
> 
> 时间：2012-12-15T23:15:07.800
> 
> 标签：android, facebook, facebook-authentication, facebook-android-sdk

随着 Facebook 的新 Android SDK 3.0（几天前发布），身份验证过程发生了变化。

那么如何请求读取权限，例如“friends_hometown”？

以下代码是我正在尝试的方式 - 但我很确定这不是你应该这样做的方式：

**版本 1：**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Session.openActiveSession(this, true, new Session.StatusCallback() { // start Facebook login
        @Override
        public void call(Session session, SessionState state, Exception exception) { // callback for session state changes
            if (session.isOpened()) {
                List<String> permissions = new ArrayList<String>();
                permissions.add("friends_hometown");
                session.requestNewReadPermissions(new Session.NewPermissionsRequest(FBImport.this, permissions));
                Request.executeGraphPathRequestAsync(session, "me/friends/?access_token="+session.getAccessToken()+"&fields=id,name,hometown", new Request.Callback() {
                    ...
                });
            }
        }
    });
} 
```

**版本 2：**

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Session currentSession = Session.getActiveSession();
    if (currentSession == null || currentSession.getState().isClosed()) {
        Session session = Session.openActiveSession(this, true, fbStatusCallback); // PROBLEM: NO PERMISSIONS YET BUT CALLBACK IS EXECUTED ON OPEN
        currentSession = session;
    }
    if (currentSession != null && !currentSession.isOpened()) {
        OpenRequest openRequest = new OpenRequest(this).setCallback(fbStatusCallback); // HERE IT IS OKAY TO EXECUTE THE CALLBACK BECAUSE WE'VE GOT THE PERMISSIONS
        if (openRequest != null) {
            openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
            openRequest.setPermissions(Arrays.asList("friends_hometown"));
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);
            currentSession.openForRead(openRequest);
        }
    }
} 
```

我正在做的是在会话打开后立即请求权限 - 但此时代码已经开始一个 Graph API 请求，因此权限请求来晚了......

您不能在初始化会话的同时请求权限吗？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-12-18T04:04:50.857

我能够让它工作。这是对您的第 2 版示例的修改。杰西提供的[链接](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/widget/LoginButton.java#L634)也有很大帮助。

**这是我在验证用户时运行的代码：**

```
private void signInWithFacebook() {

    mSessionTracker = new SessionTracker(getBaseContext(), new StatusCallback() {

        @Override
        public void call(Session session, SessionState state, Exception exception) {
        }
    }, null, false);

    String applicationId = Utility.getMetadataApplicationId(getBaseContext());
    mCurrentSession = mSessionTracker.getSession();

    if (mCurrentSession == null || mCurrentSession.getState().isClosed()) {
        mSessionTracker.setSession(null);
        Session session = new Session.Builder(getBaseContext()).setApplicationId(applicationId).build();
        Session.setActiveSession(session);
        mCurrentSession = session;
    }

    if (!mCurrentSession.isOpened()) {
        Session.OpenRequest openRequest = null;
        openRequest = new Session.OpenRequest(SignUpChoices.this);

        if (openRequest != null) {
            openRequest.setDefaultAudience(SessionDefaultAudience.FRIENDS);
            openRequest.setPermissions(Arrays.asList("user_birthday", "email", "user_location"));
            openRequest.setLoginBehavior(SessionLoginBehavior.SSO_WITH_FALLBACK);

            mCurrentSession.openForRead(openRequest);
        }
    }else {
        Request.executeMeRequestAsync(mCurrentSession, new Request.GraphUserCallback() {
              @Override
              public void onCompleted(GraphUser user, Response response) {
                  Log.w("myConsultant", user.getId() + " " + user.getName() + " " + user.getInnerJSONObject());
              }
            });
    }
} 
```

**为了测试，我在从 Facebook 身份验证返回后通过以下代码运行它：**

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
  super.onActivityResult(requestCode, resultCode, data);
  Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);

  if (mCurrentSession.isOpened()) {
    Request.executeMeRequestAsync(mCurrentSession, new Request.GraphUserCallback() {

          // callback after Graph API response with user object
          @Override
          public void onCompleted(GraphUser user, Response response) {
              Log.w("myConsultant", user.getId() + " " + user.getName() + " " + user.getInnerJSONObject());
          }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-12-27T02:22:17.547

我通过实现自己的`Session.openActiveSession()`方法解决了同样的问题：

```
private static Session openActiveSession(Activity activity, boolean allowLoginUI, StatusCallback callback, List<String> permissions) {
    OpenRequest openRequest = new OpenRequest(activity).setPermissions(permissions).setCallback(callback);
    Session session = new Builder(activity).build();
    if (SessionState.CREATED_TOKEN_LOADED.equals(session.getState()) || allowLoginUI) {
        Session.setActiveSession(session);
        session.openForRead(openRequest);
        return session;
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-12-17T22:32:40.427

我建议您在第 3 步中专门阅读我们的登录教程[。](https://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#step3)使用我们提供的登录按钮是最方便的方法，（请参阅`authButton.setReadPermissions()`）

编辑：

要在不使用登录按钮的情况下设置权限会比较棘手，因为您必须手动进行所有会话管理。深入研究登录按钮的源代码，这[行代码](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/widget/LoginButton.java#L634)可能就是你所需要的。看起来您需要创建自己的`Session.OpenRequest`并设置其属性，例如权限、受众和登录行为，然后获取当前会话并调用`openForRead()`您的`Session.OpenRequest`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-08-25T06:11:16.020

尽管第一个问题是几个月前提出的，并且已经接受了答案，但还有另一种更优雅的解决方案可以在身份验证时向用户请求更多权限。另外，[Facebook SDK 3.5](https://developers.facebook.com/docs/android/)最近发布了，刷新一下这个帖子就好了:)

所以，优雅的解决方案来自这个开源库：[**android-simple-facebook**](https://github.com/sromku/android-simple-facebook)

## **设置**

只需在您的`Activity`课程中添加下一行：

1.  定义并选择您需要的**权限**`friends_hometown`，例如：

    ```
    Permissions[] permissions = new Permissions[]
    {
        Permissions.FRIENDS_HOMETOWN,
        Permissions.FRIENDS_PHOTOS,
        Permissions.PUBLISH_ACTION
    }; 
    ```

    权限的好处是您不需要单独的 READ 和 PUBLISH 权限。您只需提及您需要的内容，其余的将由图书馆负责。

2.  `app_id`通过放置和来构建和定义`namespace`配置`permissions`：

    ```
    SimpleFacebookConfiguration configuration = new SimpleFacebookConfiguration.Builder()
            .setAppId("625994234086470")
            .setNamespace("sromkuapp")
            .setPermissions(permissions)
            .build(); 
    ```

3.  并且，创建`SimpleFacebook`实例并设置此配置：

    ```
    SimpleFacebook simpleFacebook = SimpleFacebook.getInstance(Activity);
    simpleFacebook.setConfiguration(configuration); 
    ```

现在，您可以运行以下方法：**登录**、**发布提要/故事**、**邀请**......</p>

## **登录**

```
mSimpleFacebook.login(OnLoginListener); 
```

## **登出**

```
mSimpleFacebook.logout(OnLogoutListener); 
```

有关更多示例和用法，请查看此页面：[https ://github.com/sromku/android-simple-facebook#actions-examples](https://github.com/sromku/android-simple-facebook#actions-examples)

# php - 如何在 Phalcon\Http\Request 中使用过滤器

> ID：13897057
> 
> 赞同：2
> 
> 时间：2012-12-15T23:15:10.093
> 
> 标签：php, phalcon

在下面的页面上说可以对 Request::getQuery() 方法使用过滤器：http: [//docs.phalconphp.com/en/latest/api/Phalcon_Http_Request.html](http://docs.phalconphp.com/en/latest/api/Phalcon_Http_Request.html)

但不幸的是，我无法找到有关如何设置它们的信息。你能帮忙吗？我需要在这里只过滤数字值：

```
// $filter = ??
$offset = $this->request->getQuery('offset', $filter); 
```

在文档中，据说值可以是字符串或数组，在哪里可以看到可用的过滤器列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:36:57.123

有几种方法可以做到这一点

在控制器中通过直接应用过滤器`getQuery`或`getPost`

```
$offset = $this->request->getQuery('offset', 'int'); 
```

或通过调用`sanitize`您想要的过滤器的功能（甚至自定义过滤器）

```
$filter = new \Phalcon\Filter();

$offset = $filter->sanitize($_GET["offset"], "int");

// or
$offset = $filter->sanitize($request->getQuery("offset"), "int");

// or
$offset = $request->getQuery("offset", "int"); 
```

如果传递的参数为null，也可以设置一个默认值（下面4为默认值）

```
$offset = $request->getQuery('offset', 'int', 4); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:17:24.790

刚刚找到这个页面：

[http://docs.phalconphp.com/en/0.7.0/reference/filter.html](http://docs.phalconphp.com/en/0.7.0/reference/filter.html)

答案很简单：没有正则表达式，只有字符串“int”

# java - Tomcat：Tomcat Lib 文件夹的位置

> ID：13897060
> 
> 赞同：1
> 
> 时间：2012-12-15T23:15:18.363
> 
> 标签：java, linux, tomcat, debian

我正在尝试在我的 tomcat 安装上安装 JDBC 驱动程序，但我遇到了困难。我将 Tomcat 安装到我的 opt/tomcat 目录。

然后我被告知将 JDBC 驱动程序放入我的 /lib 文件夹，但我无法在 opt/tomcat 目录中找到它。如果它不存在，我是否必须制作它，或者我只是没有找对地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T14:15:18.553

我想回答我自己的问题。我实际上是从源代码构建的，并且 catalina home 是在不同的目录中指定的，而不是 opt/tomcat。当我找到这个目录时，我找到了 lib 文件夹并将文件转储到那里。

谢谢大家的帮助，我尽可能多地投票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-10T21:22:44.250

尝试在我的 tomcat 安装上安装**drizzle-jdbc** jar 连接器时遇到了同样的问题。

**这是我修复它的方法**：

运行以下命令以确定`tomcat`安装位置：

```
sudo find / -name "tomcat" 
```

对我来说，输出是：

```
/opt/tomcat
/tmp/tomcat 
```

然后，使用输出，切换到`/opt/tomcat`目录：

```
cd /opt/tomcat 
```

接下来，列出目录的内容`/opt/tomcat`：

```
ls /opt/tomcat 
```

对我来说，输出是：

```
bin  conf  lib  LICENSE  logs  NOTICE  RELEASE-NOTES  RUNNING.txt  temp  webapps  work 
```

然后，您可以更改为 lib 目录：

```
cd lib 
```

现在您可以将 jar 文件复制到`lib`目录中。

就这样。

**我希望这有帮助**

# javascript - 代码以错误的顺序执行

> ID：13897066
> 
> 赞同：2
> 
> 时间：2012-12-15T23:15:54.883
> 
> 标签：javascript, jquery, ajax, json, function

我知道 Javascript 是异步的，但在这种情况下，我不明白为什么会发生这种情况。

在下面的第 27 行，我调用了函数“GetProducer”，它应该为我打算稍后使用的特定生产者返回数据。但是，当将其解决时，它会变得未定义，这是因为第 28 行的代码在检索数据之前执行（第 27 行）。

这是怎么发生的，我能做些什么来解决它？

```
1\.     function GetProducer(id) {
2\.  
3\.          $.ajaxSetup ({
4\.            url: "http://localhost/api/v1/producers/" + id,
5\.            type: "GET",
6\.            dataType: "json",
7\.            cache: false,
8\.            contentType: "application/json"
9\.          })
10\.         $.ajax({
11\.             success: function(data){
12\.                 return data;
13\.             },
14\.             error: function(xmlHttpRequest, textStatus, errorThrown) {
15\.                 console.log(xmlHttpRequest);
16\.                 console.log(textStatus);
17\.                 console.log(errorThrown);
18\.            }
19\.         }).done(function(data){
20\.             console.log(data);
21\.         })
22\.      }
23.
24\.     $('.modal-btn').click(function(){
25\.         var producerId = $(this).attr('id');
26\.         $('#myModalLabel').html(producerId);
27\.         var info = GetProducer(producerId);
28\.         console.log(info); // <--- undefined
29\.     }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T23:17:15.557

ajax 回调函数中的`return`语句是无用的。该函数是异步调用的，您不能期望任何东西将您的返回值传递给任何东西。

如果你把你的`console.log()`电话**放在**“成功”回调中，你会看到一个值。

您可能需要更改“GetProducer”函数，使其也接受回调参数：

```
 GetProducer(producerId, function(info) { ... }); 
```

然后，该函数或多或少看起来像这样：

```
 function GetProducer(producerId, callback) {
    $.ajaxSetup({
      // ... same
    });
    $.ajax({
      success: function(data) {
        callback(data);
      },
      // etc
    });
  } 
```

因此，回调函数将是您放置处理“生产者”信息的代码的地方。异步编程就是*在结果可用时提供处理结果的 API 函数。*

# scala - 找不到 Ordered[T] 类型的证据参数的隐式值

> ID：13897067
> 
> 赞同：4
> 
> 时间：2012-12-15T23:16:34.567
> 
> 标签：scala, generics

我现在实际上被阻止了大约 4 个小时。我想获得按其 int 值排序的 Pairs[String, Int] 列表。功能分区工作正常，最好的N也应该如此，但是当将其加载到我的解释器中时，我得到：

```
<console>:15: error: could not find implicit value for evidence parameter of type Ordered[T] 
```

在我的谓词上。有人看到问题是什么吗？我现在真的很绝望……

这是代码：

```
def partition[T : Ordered](pred: (T)=>Boolean, list:List[T]): Pair[List[T],List[T]] = {
    list.foldLeft(Pair(List[T](),List[T]()))((pair,x) => if(pred(x))(pair._1, x::pair._2) else (x::pair._1, pair._2))
}

def bestN[T <% Ordered[T]](list:List[T], n:Int): List[T] = {
    list match {
        case pivot::other => {
            println("pivot: " + pivot)
            val (smaller,bigger) = partition(pivot <, list)
            val s = smaller.size
            println(smaller)
            if (s == n) smaller 
            else if (s+1 == n) pivot::smaller
            else if (s < n) bestN(bigger, n-s-1) 
            else bestN(smaller, n)
        }
        case Nil => Nil
    }
}

class OrderedPair[T, V <% Ordered[V]] (t:T, v:V) extends Pair[T,V](t,v) with Ordered[OrderedPair[T,V]] {
    def this(p:Pair[T,V]) = this(p._1, p._2)
    override def compare(that:OrderedPair[T,V]) : Int = this._2.compare(that._2)
} 
```

编辑：第一个函数通过将谓词应用于每个成员将列表分成两部分，bestN 函数应返回列表列表中最低 n 个成员的列表。并且该课程可以使 Pairs 具有可比性，在这种情况下，我想做的是：

```
val z = List(Pair("alfred",1),Pair("peter",4),Pair("Xaver",1),Pair("Ulf",2),Pair("Alfons",6),Pair("Gulliver",3)) 
```

有了这个给定的列表，我想获得例如：

```
bestN(z, 3) 
```

结果：

```
(("alfred",1), ("Xaver",1), ("Ulf",2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:14:03.583

看起来您不需要在分区函数上使用 Ordered T，因为它只是调用谓词函数。

以下不起作用（大概），而只是编译。代码审查的其他事项是额外的大括号和类似的东西。

```
package evident

object Test extends App {

  def partition[T](pred: (T)=>Boolean, list:List[T]): Pair[List[T],List[T]] = {
    list.foldLeft(Pair(List[T](),List[T]()))((pair,x) => if(pred(x))(pair._1, x::pair._2) else (x::pair._1, pair._2))
  }

  def bestN[U,V<%Ordered[V]](list:List[(U,V)], n:Int): List[(U,V)] = {
    list match {
      case pivot::other => {
        println(s"pivot: $pivot and rest ${other mkString ","}")
        def cmp(a: (U,V), b: (U,V)) = (a: OrderedPair[U,V]) < (b: OrderedPair[U,V])
        val (smaller,bigger) = partition(((x:(U,V)) => cmp(x, pivot)), list)
        //val (smaller,bigger) = list partition ((x:(U,V)) => cmp(x, pivot))
        println(s"smaller: ${smaller mkString ","} and bigger ${bigger mkString ","}")
        val s = smaller.size
        if (s == n) smaller
        else if (s+1 == n) pivot::smaller
        else if (s < n) bestN(bigger, n-s-1)
        else bestN(smaller, n)
      }
      case Nil => Nil
    }
  }

  implicit class OrderedPair[T, V <% Ordered[V]](tv: (T,V)) extends Pair(tv._1, tv._2) with Ordered[OrderedPair[T,V]] {
    override def compare(that:OrderedPair[T,V]) : Int = this._2.compare(that._2)
  }

  val z = List(Pair("alfred",1),Pair("peter",4),Pair("Xaver",1),Pair("Ulf",2),Pair("Alfons",6),Pair("Gulliver",3))
  println(bestN(z, 3))
} 
```

我发现分区函数很难阅读；你需要一个函数来分割所有的括号。这里有几个公式，它们也使用过滤器接受的结果向左走，拒绝向右走的约定。

```
def partition[T](p: T => Boolean, list: List[T]) = 
  ((List.empty[T], List.empty[T]) /: list) { (s, t) =>
    if (p(t)) (t :: s._1, s._2) else (s._1, t :: s._2)
  }
def partition2[T](p: T => Boolean, list: List[T]) =
  ((List.empty[T], List.empty[T]) /: list) {
    case ((is, not), t) if p(t) => (t :: is, not)
    case ((is, not), t)         => (is, t :: not)
  }
// like List.partition
def partition3[T](p: T => Boolean, list: List[T]) = {
  import collection.mutable.ListBuffer
  val is, not = new ListBuffer[T]
  for (t <- list) (if (p(t)) is else not) += t
  (is.toList, not.toList)
} 
```

这可能更接近原始代码的意图：

```
def bestN[U, V <% Ordered[V]](list: List[(U,V)], n: Int): List[(U,V)] = {
  require(n >= 0)
  require(n <= list.length)
  if (n == 0) Nil
  else if (n == list.length) list
  else list match {
    case pivot :: other =>
      println(s"pivot: $pivot and rest ${other mkString ","}")
      def cmp(x: (U,V)) = x._2 < pivot._2
      val (smaller, bigger) = partition(cmp, other)     // other partition cmp
      println(s"smaller: ${smaller mkString ","} and bigger ${bigger mkString ","}")
      val s = smaller.size
      if (s == n) smaller
      else if (s == 0) pivot :: bestN(bigger, n - 1)
      else if (s < n) smaller ::: bestN(pivot :: bigger, n - s)
      else bestN(smaller, n)
    case Nil => Nil
  }
} 
```

箭头符号更常见：

```
 val z = List(
    "alfred" -> 1,
    "peter" -> 4,
    "Xaver" -> 1,
    "Ulf" -> 2,
    "Alfons" -> 6,
    "Gulliver" -> 3
  ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:43:25.707

我怀疑我遗漏了一些东西，但无论如何我都会发布一些代码。

因为`bestN`，你知道你可以做到这一点吗？

```
val listOfPairs = List(Pair("alfred",1),Pair("peter",4),Pair("Xaver",1),Pair("Ulf",2),Pair("Alfons",6),Pair("Gulliver",3))
val bottomThree = listOfPairs.sortBy(_._2).take(3) 
```

这给了你：

```
List((alfred,1), (Xaver,1), (Ulf,2)) 
```

对于`partition`函数，您可以这样做（假设您希望所有对低于 4）：

```
val partitioned = listOfPairs.partition(_._2 < 4) 
```

这给出了（左边都低于 4，右边都大于）：

```
(List((alfred,1), (Xaver,1), (Ulf,2), (Gulliver,3)),List((peter,4), (Alfons,6))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T13:00:54.583

只是与您分享：这行得通！非常感谢所有帮助过我的人，你们都很棒！

```
object Test extends App {

  def partition[T](pred: (T)=>Boolean, list:List[T]): Pair[List[T],List[T]] = {
    list.foldLeft(Pair(List[T](),List[T]()))((pair,x) => if(pred(x))(pair._1, x::pair._2) else (x::pair._1, pair._2))
  }

  def bestN[U,V<%Ordered[V]](list:List[(U,V)], n:Int): List[(U,V)] = {
    list match {
      case pivot::other => {
        def cmp(a: (U,V), b: (U,V)) = (a: OrderedPair[U,V]) <= (b: OrderedPair[U,V])
        val (smaller,bigger) = partition(((x:(U,V)) => cmp(pivot, x)), list)
        val s = smaller.size
        //println(n + " :" + s)
        //println("size:" + smaller.size + "Pivot: " + pivot + " Smaller part: " + smaller + " bigger: " + bigger)
        if (s == n) smaller
        else if (s+1 == n) pivot::smaller
        else if (s < n) bestN(bigger, n-s)
        else bestN(smaller, n)
      }
      case Nil => Nil
    }
  }

  class OrderedPair[T, V <% Ordered[V]](tv: (T,V)) extends Pair(tv._1, tv._2) with Ordered[OrderedPair[T,V]] {
    override def compare(that:OrderedPair[T,V]) : Int = this._2.compare(that._2)
  }
  implicit final def OrderedPair[T, V <% Ordered[V]](p : Pair[T, V]) : OrderedPair[T,V] = new OrderedPair(p)

  val z = List(Pair("alfred",1),Pair("peter",1),Pair("Xaver",1),Pair("Ulf",2),Pair("Alfons",6),Pair("Gulliver",3))
  println(bestN(z, 3))
  println(bestN(z, 4))
  println(bestN(z, 1))
} 
```

# php - 在值元素内回显随机字符串

> ID：13897068
> 
> 赞同：0
> 
> 时间：2012-12-15T23:16:36.287
> 
> 标签：php

我有一个输入元素（搜索框），在值元素中我试图回显一个随机字符串。

例如：我有

```
<input class="input-xxlarge" type="text" id="search" value="<?php echo($num);?>" /> 
```

对于随机字符串，我正在使用这个粗略的代码

```
<?php
 $num = Rand (1,3); 
  switch ($num)
  {
  case 1:
  echo "eg. Sydney, NSW";
  break;
  case 2:
  echo "eg. Manly, NSW";
  break;
  case 3:
 echo "eg. Jimboomba, QLD";
 }
?> 
```

出于某种原因，我只是将值作为 php 代码回显。

任何想法，我已经把我的大部分头发拉了出来

# javascript - Javascript只工作一次？

> ID：13897069
> 
> 赞同：1
> 
> 时间：2012-12-15T23:16:46.547
> 
> 标签：javascript, html, internet-explorer, firefox

我不知道为什么，但我的 Javascript 只能在 Firefox 和 IE 中运行一次（但在 Chrome 中运行良好）。有人知道为什么吗？

```
<script type="text/javascript">
function changeDivImage() 
       { 
        var imgPath = new String(); 
        imgPath = document.getElementById("div1").style.backgroundImage; 
        if (imgPath == "url(images/1.jpg)" || imgPath == "")
          { 
           document.getElementById("div1").style.backgroundImage ="url(images/2.jpg)"; 
          } 
        else if (imgPath == "url(images/2.jpg)")
          { 
           document.getElementById("div1").style.backgroundImage = "url(images/3.jpg)"; 
          }
        else if (imgPath == "url(images/3.jpg)")
          { 
           document.getElementById("div1").style.backgroundImage = "url(images/1.jpg)"; 
          }  
       }   
  </script> 
```

通过单击图像触发脚本

```
<img src="images/leftarrow.png"
     value="Change Background Image"
     onclick="changeDivImage()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:32:25.107

浏览器倾向于以不同的方式规范化 CSS 属性。例如，IE 和 Firefox 在 URL 周围加上引号。

所以，也许你应该试试这个：

```
var div = document.getElementById('div1'),
    imgPath = parseInt(div.style.backgroundImage.match(/\d(?=\.jpg)/) || ["0"],10),
    newnum = imgPath%3+1;
div.style.backgroundImage = "url(images/"+newnum+".jpg)"; 
```

# java - JSF：如何从对象调用方法？

> ID：13897071
> 
> 赞同：0
> 
> 时间：2012-12-15T23:17:06.060
> 
> 标签：java, jsf, javabeans

> **可能重复：**
> [未调用 h:commandLink / h:commandButton](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

我有一颗豆子。该 bean 返回一个对象：

```
public class LogoBrick {
    private String logoLink = "link";

    public LogoBrick() {
        System.out.println("LogoBrick");
    }
    public String getLogoLink() {
        return logoLink;
    }
    public void setLogoLink(String logoLink) {
        this.logoLink = logoLink;
    }
    public void save() {
        System.out.println("SUCCESS: " + logoLink);
    }
} 
```

我想（在 jfs 文件中）从这个对象调用方法：

```
<h:form id="logo-form">
    Logo link: <h:inputText id="logoLink" value="#{brick.logoLink}"/>
    <h:commandButton value="Save" action="#{brick.save()}"/>
</h:form> 
```

方法 save 和 setter 未被调用，但 getter 被调用。谁能告诉我为什么？我究竟做错了什么？

# java - 如何使用 Selenium 类型的方法？

> ID：13897076
> 
> 赞同：3
> 
> 时间：2012-12-15T23:17:24.143
> 
> 标签：java, selenium

我有一个带有输入文本字段的[JSP页面。](https://en.wikipedia.org/wiki/JavaServer_Pages)

```
<table>
    <tr>
        <td><input type="text" id="searchText" name="searchInput"/></td>
    </tr>
</table> 
```

我编写了一个 Selenium 测试用例来验证搜索输入文本是否存在。

```
public class UIRecipeListTest extends SeleneseTestBase {

    @Before
    public void setup() {
        WebDriver driver = new FirefoxDriver(
                        new FirefoxBinary(
                            new File("C:\\Program Files (x86)\\Mozilla Firefox 3.6\\firefox.exe")),
                        new FirefoxProfile()
                    );

        String baseUrl = "http://localhost:8080/RecipeProject/";
        selenium = new WebDriverBackedSelenium(driver, baseUrl);
    }

    @Test
    public void testShowRecipes() {
        verifyTrue(selenium.isElementPresent("searchText"));
        selenium.type("searchText", "salt");
    }
} 
```

测试`verifyTrue`返回`true`。但是，`selenium.type`测试失败并出现以下错误：

> ```
> com.thoughtworks.selenium.SeleniumException: Element searchText not found 
> ```

我应该怎么做才能使测试工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T05:46:55.177

第一个参数需要是一个选择器。`searchText`不是有效的 CSS 或 XPath 选择器。

你会使用类似的东西`selenium.type("css=input#searchText", "salt");`。

我还想指出，您似乎在两个版本的 Selenium 之间切换。

`selenium.type(String,String)`来自 Selenium 1 API。你应该保持 1 版本，如果它是 Selenium 2，你需要做类似的事情，

```
WebElement element = driver.findElement(By.id("searchText")) 
```

并使用

```
element.sendKeys("salt"); 
```

来源：*[Selenium API 类型（字符串，字符串）](http://release.seleniumhq.org/selenium-remote-control/0.9.0/doc/java/com/thoughtworks/selenium/DefaultSelenium.html#type%28java.lang.String,%20java.lang.String%29)*

# java - 删除和移动表中的元素：java

> ID：13897078
> 
> 赞同：0
> 
> 时间：2012-12-15T23:17:55.747
> 
> 标签：java, swing

```
private JEditorPane textArea[]= new JEditorPane[maxTabs]; 
```

我有这张表，我想删除一些元素并移动其他元素，例如，如果我删除第二个元素，第三个元素将代替第二个元素，依此类推。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:42:16.050

您可以使用 System.arraycopy() 来移动数组块：请参阅[https://stackoverflow.com/a/5536023/150001](https://stackoverflow.com/a/5536023/150001)

但是，如果可以，请考虑使用像 java.util.LinkedList 这样的 Collection 类，它更适合删除和重新排序元素。如果您在完成删除/移动后仍然需要一个数组（也许您正在使用的 API 需要它），您可以使用 toArray() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:43:14.247

根据您感兴趣的场景（我们删除例如位置 1 的元素）

1) 如果元素应该向左移动，最后一个元素应该设置为 0 或 null，具体取决于数组的类型，如

[0,1,2,3,4] 之前 [0,2,3,4,0]
之后

您可以使用

```
System.arraycopy(textArea, index+1, textArea, index, textArea.length-index-1);
array[array.length-1]=null; 
```

2）当您想用不包含所选元素的新数组替换旧数组时

[0,1,2,3,4] 之前
[0,2,3,4] 之后 //我们删除了位置 1 的元素（新数组更小）

你可以试试这样的

```
List<JEditorPane> listCopy = new ArrayList<JEditorPane>(
        Arrays.asList(textArea));
listCopy.remove(index);
textArea = listCopy.toArray(new JEditorPane[listCopy.size()]); 
```

# python - Django 模型中的 int() 文字无效

> ID：13897088
> 
> 赞同：1
> 
> 时间：2012-12-15T23:19:04.280
> 
> 标签：python, django, exception, model

我收到一个错误的 int() 以 10 为底的无效文字：`sharat`并且不知道如何修复它。有什么建议吗？

```
friend = 'sharat'
user_playlists = Everything.objects.filter(profile = friend).values('playlist').distinct()

class Everything(models.Model):
    profile = models.ForeignKey(User)
    playlist = models.CharField('Playlist', max_length = 2000, null=True, blank=True)
    platform = models.CharField('Platform', max_length = 2000, null=True, blank=True)
    video = models.CharField('VideoID', max_length = 2000, null=True, blank=True)
    video_title = models.CharField('Title of Video', max_length = 2000, null=True, blank=True)
    def __unicode__(self):
        return u'%s %s %s %s %s' % (self.profile, self.playlist, self.platform, self.video, self.video_title) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:22:33.043

您首先需要按该名称获取用户，然后按该用户过滤，而不是按用户名过滤。或者（并且可能更好），您可以让 Django 以更有效的方式自己执行此操作，可能涉及连接：

```
user_playlists = Everything.objects.filter(profile__username=friend).values('playlist').distinct() 
```

# jquery - HTML & CSS 博主侧边菜单？

> ID：13897090
> 
> 赞同：-1
> 
> 时间：2012-12-15T23:19:28.533
> 
> 标签：jquery, html, css, blogger

在[此博客](http://bernardodamele.blogspot.pt/)中，您可以看到右侧的菜单吗？

我想要一个这样的菜单，用于我将要开始的新项目。我找不到像这样的东西。

我尝试“检查元素”，但博主通过“js”添加了 CSS，因此我们没有要复制的 .css 文件。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:25:06.670

试试这个，我用过，还不错。

演示：[演示](http://tympanus.net/Tutorials/FixedNavigationTutorial/)

页：[页](http://tympanus.net/codrops/2009/11/30/beautiful-slide-out-navigation-a-css-and-jquery-tutorial/)

# dart - 如何在 Dart 中监听自定义事件？

> ID：13897091
> 
> 赞同：13
> 
> 时间：2012-12-15T23:19:29.187
> 
> 标签：dart

我想做类似的事情

```
// WARNING: this code does not work, it's illustrative
query("#myBtn").onClick.listen((e) {
  window.fire["foo"];
});

window.on["foo"].listen((e) => print("foo was here"));

window.on["foo"].listen((e) => print("and here")); 
```

是否可以？如何？我已经在 Google 上搜索了几个小时，但我对一般的编程有点陌生，所以我真的不知道这类事情的任何关键字。

谢谢！:)

-- 编辑：已解决 --

以下是传递参数的方法（编辑会抱怨，但它有效）

```
List<String> myData = ["one","two"];

query("#myBtn").onClick.listen((e) {
  window.on["foo"].dispatch(new CustomEvent("foo", canBubble: false, cancelable: false, detail: myData));
});

window.on["foo"].add((e) => print( e.detail[1] )); 
```

:-)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T14:15:54.593

你说你想传递数据。假设我们有这个类：

```
class Person {
    String name;
    int age;
} 
```

那么这个监听器：

```
window.on['foo'].listen((e) {
  Person p = e.detail;

  print(p.name); // Jack
}); 
```

我们需要传递数据的只是编写如下内容：

```
var p = new Person()
  ..name = 'Jack'
  ..age = 25;

var e = new CustomEvent('foo', detail: p);

window.on['foo'].dispatch(e); 
```

这是做到这一点的方法。请参阅文档：

*   [http://api.dartlang.org/docs/releases/latest/dart_html/Events.html](http://api.dartlang.org/docs/releases/latest/dart_html/Events.html)
*   [http://api.dartlang.org/docs/releases/latest/dart_html/CustomEvent.html](http://api.dartlang.org/docs/releases/latest/dart_html/CustomEvent.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-15T23:27:46.770

这应该有效：

```
window.on['foo'].listen((e) => print("foo was here")); 
```

请参阅文档：

*   [http://api.dartlang.org/docs/releases/latest/dart_html/Events.html](http://api.dartlang.org/docs/releases/latest/dart_html/Events.html)

# javascript - HTML5/jQuery - 页面滚动到输入值

> ID：13897095
> 
> 赞同：1
> 
> 时间：2012-12-15T23:19:53.757
> 
> 标签：javascript, jquery, html, forms, input

我有一个图像文档阅读器，标题中有一个 input[number] 字段。这个想法是用户可以输入他们想要查看的页面（图像），页面将平滑地向下滚动到适当的 div。这是我的代码：

```
<div class="score-header">
    <section class="nav">
        <input type="number" id="page" />
    </section>    
</div> 
```

文档的页面显示在它们自己的 div 中，如下所示：

```
<div class="page-one">
    <img src="page1.jpg" alt="" />
</div>
<div class="page-two">
    <img src="page1.jpg" alt="" />
</div> 
```

有没有一种方法，当用户插入数字并单击输入或按钮时，网页将向下滚动文档的相应页面。

NB 标题通过 jQuery 始终粘在网页顶部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:17:02.123

像这样的东西？

```
$(document).ready(function(){

$('#page').change(function() {
    $("page-div").eq($("#page").val()-1);
    //this selector takes the input value and subtracts 1 because the count starts in 0 so it will select the corect div ....

    //i do not know how to scroll down.... i tryed this but did not work.... you need scroll to the possition of the selected div
    $("#page-one").animate({scrollTop: $("#page-one").offset().top});
}); 
```

}); ​</p>

[http://jsfiddle.net/ukjvS/13/](http://jsfiddle.net/ukjvS/13/)

[http://jsfiddle.net/ukjvS/13/show](http://jsfiddle.net/ukjvS/13/show)

（阅读评论）

如果可能的话回答我的问题:)

[HTML & CSS 博主侧边菜单？](https://stackoverflow.com/questions/13897090/html-css-blogger-side-menu)

# mongodb - MongoDB 预测的效率如何？

> ID：13897098
> 
> 赞同：13
> 
> 时间：2012-12-15T23:20:31.920
> 
> 标签：mongodb, projection

查询 mongo 数据库时排除文档中几乎所有数据是否有很多开销？

例如，在我只想要**field1**和**field2**的情况下，对于具有以下文档结构的集合：

```
{
    "field1" : 1
    "field2" : true
    "field3" : ["big","array",...]
    "field4" : ["another","big","array",...]
} 
```

我会从以下方面受益更多：

1.  在此集合旁边创建一个单独的集合，该集合仅包含 field1 和 field2，或
2.  在具有包含/排除参数的原始文档上使用 .find()

注意：两次保存相同数据的低效率对我来说并不像查询数据的效率那样关心

非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T12:10:59.490

投影有点类似于在 SQL 中显式使用列名，因此询问返回少量数据是否会比返回大量数据（完整文档）产生开销似乎有点违反直觉。

所以你必须找到文档（取决于你如何 .find() 它可能是快还是慢）但是只返回文档的前两个字段而不是所有字段（完整的文档）会使它*更快*而不是更慢。

只有当您担心您的收藏适合 RAM 时，才有第二个收藏可能会受益。如果重复集合中的文档要小得多，那么它们可能适合较小的总 RAM，从而减少需要从磁盘换入页面的机会。但是，如果您正在写入此集合以及原始集合，那么您必须在 RAM 中拥有比只有原始集合更多的数据。

因此，虽然复杂的细节可能取决于您的个人设置，但一般答案可能是 2。您将从使用投影中受益更多，并且只返回您需要的两个字段。

# eclipse - eclipse中的GWT编译错误

> ID：13897102
> 
> 赞同：0
> 
> 时间：2012-12-15T23:21:00.247
> 
> 标签：eclipse, gwt

这并不是一个真正的错误，但我试图找出如何告诉 GWT 编译器将生成的文件放入文件夹 xx/yy 而不是它当前放入的默认 ModuleName/ModulaName+Package

```
https://developers.google.com/web-toolkit/doc/latest/DevGuideCompilingAndDebugging#DevGuideCompilerOptions 
```

没有任何帮助，因为看不到如何添加配置参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:39:20.100

该`-war`选项允许您指定是否生成了输出文件。该目录下生成文件的目录名默认为包+模块名。您可以通过在模块 .gwt.xml 文件中设置它来指定另一个名称：`<module rename-to="somename">`其中`somename`将是目录的名称。ModuleName 的第一个引用`ModuleName/ModulaName+Package`是部署名称。该名称是在您的 devmode 调试配置的 GWT 选项卡中设置的 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:35:21.257

Hilbrand，谢谢，但我遇到的问题是如何在 Eclipse 中运行 GWT 编译器时将参数传递给它。我在我的问题中并没有真正正确地解释它。无论如何，对于任何偶然发现这个问题的人来说，这是解决方案

[http://turbomanage.wordpress.com/2010/04/14/gwt-compiler-options/](http://turbomanage.wordpress.com/2010/04/14/gwt-compiler-options/)

当您在 eclipse 中启动 GWT Compile 命令时，它位于高级选项中。

# html - 为什么在链接到本地 计算机时会显示带有绝对 URL 的图像，但不会显示？

> ID：13897106
> 
> 赞同：1
> 
> 时间：2012-12-15T23:21:27.240
> 
> 标签：html, url, local

我正在使用已经构建的 HTML；除了幻灯片中的图像外，所有图片都可以在我的本地机器上使用。

这是有效的代码：

```
 <div class="backgroundImage" id="homePageBanner2" style="background:url(http://demandware.edgesuite.net/aajh_prd/on/demandware.static/Sites-beats-Site/Sites-beats-Library/default/v1355443668325/images/homepage/2-seasonal-pill-gap_2400x650.jpg) center 0 no-repeat;">
                <img src="http://demandware.edgesuite.net/aajh_prd/on/demandware.static/Sites-beats-Site/Sites-beats-Library/default/v1355443668325/images/homepage/2-seasonal-pill-gap_2400x650.jpg" style="display:none;" />
            </div> 
```

这不会，它只是显示为黑色。（请记住，此格式适用于此 html 中的所有其他图片。）

```
<div class="backgroundImage" id="homePageBanner1" style="background:"../demandware.edgesuite.net/aajh_prd/on/demandware.static/Sites-beats-Site/-/default/v1355443668325/images/MainImage2.png") center 0 no-repeat;">
            <img src="../demandware.edgesuite.net/aajh_prd/on/demandware.static/Sites-beats-Site/-/default/v1355443668325/images/MainImage2.png" style="display:none;" />
        </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:27:32.730

```
"background:" 
```

可能是您在指定背景后立即结束您的风格：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:50:19.867

```
style="background:"../demandware.edgesuite.net/aajh_prd/on/demandware.static/Sites-beats-Site/-/default/v1355443668325/images/MainImage2.png") center 0 no-repeat;" 
```

你的意思：

```
style="background:url(../demandware.edgesuite.net/aajh_prd/on/demandware.static/Sites-beats-Site/-/default/v1355443668325/images/MainImage2.png) center 0 no-repeat;" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:33:55.717

这里有 2 个图像引用，一个在标记中，一个在 CSS 样式中。不确定，这有什么意义。如果 style 参数在代码中确实被破坏了（从您粘贴的内容看来就是这种情况），则图像可能位于文档根目录中，而 CSS 位于子文件夹中，因此只有相对 URL如果 HTML 文件也在根目录中，则背景图像有效。图像标记源 URL 将指向层次结构中根目录上方的一个文件夹，而这可能不是图像所在的位置。因为本地版本的背景图片 CSS 坏了，所以两个图片都没有出现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T00:38:20.940

如果你是业务经理

> src="/images/homepage/2-seasonal-pill-gap_2400x650.jpg?$staticlink$"

如果这是在 isml 文件中

> src="${URLUtils.staticURL('/images/homepage/2-seasonal-pill-gap_2400x650.jpg')}"

对于所有实例（dev、stg、development 和 prod）是最一致的

# android - Android JellyBean DatePicker 问题

> ID：13897108
> 
> 赞同：0
> 
> 时间：2012-12-15T23:21:40.980
> 
> 标签：android

我在我的 Android 活动中使用 DatePicker。我只需要向用户显示年份。我用

```
private void findAndHideField(DatePicker datepicker, String name) {
        try {
            Field field = DatePicker.class.getDeclaredField(name);
            field.setAccessible(true);
            View fieldInstance = (View) field.get(datepicker);
            fieldInstance.setVisibility(View.GONE);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

接着

```
 findAndHideField(startDatePicker, "mDayPicker");
        findAndHideField(startDatePicker, "mMonthPicker");
        findAndHideField(startDatePicker, "mDaySpinner");
        findAndHideField(startDatePicker, "mMonthSpinner"); 
```

该代码在 2.3.x 上运行良好，但在 4.1.x 手机上只显示一个完整的日历。我该怎么做才能使年份表盘可见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T08:49:38.057

在您的 XML 中添加这些行

```
android:calendarViewShown="false" 
```

到你的**DatePicker**

# java - java - 当空格键被按下并在java中一直被按下时，如何执行一些代码1次

> ID：13897115
> 
> 赞同：2
> 
> 时间：2012-12-15T23:22:30.380
> 
> 标签：java

我一直在研究我的比赛，现在，我的球员需要投篮。他确实射击，但为了减少弹药，只要我按住空格键，它就会不断减少。我想知道一个代码，它可以让我在每次按下空格键时移除 -1 弹药，即使它仍然被按下。谢谢，希望你尽快回复我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:28:50.640

在按键按下时，初始化并`java.util.Timer`使用初始延迟 0 和延迟 X 启动 a（但您希望频繁触发。

上键时，停止计时器。

# python - 这个文本在python中的正则表达式是什么

> ID：13897120
> 
> 赞同：1
> 
> 时间：2012-12-15T23:22:51.167
> 
> 标签：python, regex

我有一个复杂的文本文件，这是其中的一部分：

```
& \multirow{2}{*}{52.7} & \multirow{2}{*}{3} & \multirow{2}{*}{$<$ 0.001}\\ 
```

我对后面的数字感兴趣`{*}`。这是我没有运气的尝试：

```
import re
m = re.findall(r'{\*}{(.+)}', '& \multirow{2}{*}{52.7} & \multirow{2}{*}{3} & \multirow{2}{*} $<$ 0.001}\\') 
```

但是，我得到以下结果：

```
['52.7} & \\multirow{2}{*}{3} & \\multirow{2}{*}{$<$ 0.001'] 
```

我尝试了许多其他组合，但我要么得到第一个数字（例如 52.7），要么得到中间数字（3）或以上。我怎样才能进入`52.7, 3, $<$ 0.001`一个组（列表）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:28:30.367

这是因为默认情况下`+`，`*`运营商是贪婪的。改为使用非贪婪修改：

```
{\*}{(.+?)} 
```

参考：[http](http://www.regular-expressions.info/repeat.html) ://www.regular-expressions.info/repeat.html （“*小心贪婪！* ”部分）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:28:52.270

使用以下正则表达式：

```
\{\*\}\{(.*?)\} 
```

您应该使用反斜杠转义所有特殊字符，`\`并在结果集的子类中使用非贪婪通配符`.*?`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T23:30:35.133

```
m = re.findall(r'({\*}{([\d|\.?]+?)})+', '& \multirow{2}{*}{52.7} & \multirow{2}{*}{3} & \multirow{2}{*} $<$ 0.001}\\')
[('{*}{52.7}', '52.7'), ('{*}{3}', '3')]

m = re.findall(r'{\*}{([\d|\.?]+?)}+', '& \multirow{2}{*}{52.7} & \multirow{2}{*}{3} & \multirow{2}{*} $<$ 0.001}\\')
['52.7', '3']

m = re.findall(r'{\*}{(.*?)}', '& \multirow{2}{*}{52.7} & \multirow{2}{*}{3} & \multirow{2}{*} $<$ 0.001}\\')
['52.7', '3', '$<$ 0.001'] 
```

# php - Graph API 新提要帖子对象-附件未显示

> ID：13897123
> 
> 赞同：11
> 
> 时间：2012-12-15T23:22:54.833
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我在使用图形 API 时遇到了一个奇怪的问题，下面的代码用于向用户新闻提要添加带有附加照片缩略图的帖子（在“object_attachement”参数中引用）。

然而，现在帖子已按预期创建，但缩略图为空。我使用的 photo_id 存在于用户的照片集中。

![现在下面代码的结果。](../Images/b8464ead31a9dc35235a02d67ef9b6a3.png)

```
 $photo_ID = "3415678920211";//Valid Facebook Photo ID...        
    $facebook = new Facebook($config);

    $attachment =  array(
            'access_token' => $user_token,
            'message' => "Test Message",
            'caption' => "THis is a Caption",
            'name' => "Test Name",
            'description' => "This is a description",
            'link' => 'http://url.com/',
            'object_attachment' => $photo_id,
    );

    $response = $facebook->api("/".$userID."/feed/", 'POST', $attachment); 
```

难道我做错了什么？我确信这确实有用，我想知道我下面的 API 是否发生了变化。

[更新] 我注意到当我在同一个 POST 中同时指定链接和 object_attachment 时似乎会发生这种情况。如果我从上面删除链接参数，那么我会得到一个更好的更新，但这并不是很好，因为我希望这篇文章存在的主要原因是添加链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T08:00:53.170

我假设用户授予了 user_photos/friends_photos 的权限。既然你有 photo_id，你可以试试这个。

```
$pic = $facebook->api("/PHOTO_ID");
$pic_url = $pic->source;

$attachment =  array(
    'access_token' => USER_ACCESS_TOKEN,
    'message'      => "...",
    'caption'      => "...",
    'name'         => "...",
    'description'  => "...",
    'link'         => URL,
    'picture'      => $pic_url
); 
```

**添加**

您需要将图像存储在本地服务器的某个位置。由于这篇 [文章](http://www.syndicatedmethods.com/SyndicatedBlogs/post/2010/06/22/FBCDN-image-is-not-allowed-in-stream-How-can-this-be.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T01:08:59.393

我认为这`'object_attachment'=>$photo_id`将不再起作用。你应该把它改成`'picture'=>$photo_url`

```
$photo_Url = "link to your photo";//Valid Facebook Photo ID...        
$facebook = new Facebook($config);

$attachment =  array(
        'access_token' => $user_token,
        'message' => "Test Message",
        'caption' => "THis is a Caption",
        'name' => "Test Name",
        'description' => "This is a description",
        'link' => 'http://url.com/',
        'picture' => $photo_Url,
);

$response = $facebook->api("/".$userID."/feed/", 'POST', $attachment); 
```

你可以在[这里找到更多](https://developers.facebook.com/docs/reference/api/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-25T08:56:36.980

您必须在您的应用程序上获得 pubish_stream 权限，然后使用 curl 尝试此操作：-

```
$attachment =  array(
        'access_token' => $access_token,
        'message' => 'i m success to using graph api for post wall',
        'name' => 'Wall Post using graph api',
        'link' => 'www.mysite.com',
        'description' => 'Using the Graph API, any Facebook users Wall feed may be accessed by using this URL:',
        'picture'=>'http://example.com/images/noimage.png'
 );
$url = "https://graph.facebook.com/$facebook_id/feed";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output
$result = curl_exec($ch);
curl_close ($ch);
print_r($result) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-22T20:14:31.147

您正在发布到提要。您应该改为发布到 LINK。

将图片的链接发布到链接提要，你应该没问题。

[https://developers.facebook.com/docs/reference/api/link/](https://developers.facebook.com/docs/reference/api/link/)

我将在勾选中发布一个示例。

- - 之后 - -

嗯，链接选项并不令人满意。你得到一张图片的缩略图，你可以点击它来查看完整的图片，但它非常难看。我真的不认为那是你所追求的。

所以我做了更多的实验，并不断地遇到你提到的那个 CDN 错误。于是我google了一下，发现如下：

在 Stream Stories 中提供图像 2010 年 6 月 18 日下午 3:21

我们不再允许流故事包含托管在 fbcdn.net 域上的图像。与这些 URL 关联的图像并不总是针对流故事进行优化，并且偶尔会导致错误，从而导致糟糕的用户体验。确保您的流附件不引用此域的图像。您应该在本地托管图像。

所以你有了它，根据 Facebook 的说法，你不能再做你想做的事了。

# java - Java条件语句/初始化变量

> ID：13897124
> 
> 赞同：0
> 
> 时间：2012-12-15T23:22:55.897
> 
> 标签：java

目前这是我的代码，当用户不选择 A、B、C、D、E 或 F 作为选择时，我需要显示“请输入有效的选择”。问题是如果我在“else”条件下加上“请输入有效的....”语句，Java 会要求我初始化变量 ActivityFactor，因为如果用户没有选择正确的选项，则不会有一个. 有谁知道我该如何解决这个问题？或者知道我应该如何编写一个程序来做到这一点？

```
if((inGender.equalsIgnoreCase("M") ||(inGender.equalsIgnoreCase ("F"))) && inActivity.equalsIgnoreCase("A"))
            ActivityFactor = 1.0;

        else if ((inGender.equalsIgnoreCase("M") ||(inGender.equalsIgnoreCase ("F"))) && inActivity.equalsIgnoreCase("B"))
        ActivityFactor = 1.3;

        else if (inGender.equalsIgnoreCase("M") && inActivity.equalsIgnoreCase("C"))
        ActivityFactor = 1.6;
        else if (inGender.equalsIgnoreCase("F") && inActivity.equalsIgnoreCase("C"))
        ActivityFactor = 1.5;
        else if (inGender.equalsIgnoreCase("M") && inActivity.equalsIgnoreCase("D"))
        ActivityFactor = 1.7;
        else if (inGender.equalsIgnoreCase("F") && inActivity.equalsIgnoreCase("D"))
        ActivityFactor = 1.6;
        else if (inGender.equalsIgnoreCase("M") && inActivity.equalsIgnoreCase("E"))
        ActivityFactor = 2.1;
        else if (inGender.equalsIgnoreCase("F") && inActivity.equalsIgnoreCase("E"))
        ActivityFactor = 1.9;
        else if (inGender.equalsIgnoreCase("M") && inActivity.equalsIgnoreCase("F"))
        ActivityFactor = 2.4;
        else if (inGender.equalsIgnoreCase("F") && inActivity.equalsIgnoreCase("F"))
        ActivityFactor = 2.2;
        else
        {
       ActivityFactor = -1;

    }

    //After
    if(ActivityFactor != -1){
     tdee = (nBMR * ActivityFactor);
     System.out.println(tdee);}
    else
   { System.out.println("Please enter a valid choice");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:25:17.560

如果 if 语句中的条件都不为真，那么您不会为 分配任何内容`ActivityFactor`，并且在行中使用时不会对其进行初始化`double TDEE = (nBMR * ActivityFactor);`。

要么在你在这里显示的代码之前初始化它，在最后一种情况下给它一个默认值，要么循环直到你得到一个有效的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:30:45.960

要么在循环之前初始化变量，要么将整个循环放在一个函数中，然后执行以下操作：

```
double TDEE = (nBMR * getActivityFactor()); 
```

另外，看看这个：[http ://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

快乐编码！;)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T23:34:40.987

在条件之前将 ActivityFactor 初始化为通常的值。

例如，您可以这样做：

```
// knowing that it can never be -1
// so if that value remains, you know that user entered wrong letter
ActivityFactor = -1

// then the conditional begins
if((inGender.equalsIgnoreCase("M") ||(inGender.equalsIgnoreCase ("F"))) && inActivity.equalsIgnoreCase("A"))
...

// after conditional...
if(activityFactor != -1){
    double TDEE = (nBMR * ActivityFactor);
} 
```

顺便说一句，我建议你使用 'activityFactor' 而不是 ActivityFactor。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T23:35:21.120

你应该做两件事：

1.  将逻辑封装在方法中
2.  如果参数与方法逻辑不匹配，则抛出异常。

您可以通过抛出您将捕获的异常来解决此问题。

```
private double getTDEE (String inGender, String inActivity) {

   //logic
   else {
     throw new IllegalArgumentException("Please enter a valid choice");
   }

  return (nBMR * ActivityFactor);
} 
```

[异常教程](http://docs.oracle.com/javase/tutorial/essential/exceptions/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T23:43:17.850

正如您已经知道的那样，您的代码的问题在于，无论用户是否输入了有效输入，执行都会继续进行。因此，需要进行大量重构——我也会尝试让条件语句更漂亮一些；但这是个人喜好。

可能的解决方案：

**a) 使用循环**- 然后在用户输入满意的输入时跳出循环..

```
while( true ){ 
   /* get input from the user */

   /* run through validation checks... 
        and -break- out of the loop when they're satisfied */
}
/* do calculations here */ 
```

**b）使用一个函数**来抽象所有这些逻辑......（正如[Psyclops](https://stackoverflow.com/a/13897183/1475897)建议的那样）

就个人而言，我会结合使用这些方法 - 将所有这些逻辑提取到一个函数中，该函数在没有输入有效输入时返回 false，然后使用类似的构造`while(! yourFunction() )`简单地循环遍历它直到它完成。您可以使用*通过引用传递*来避免必须将返回类型用于布尔值以外的任何内容。

**我不会在循环之前初始化变量！**这只是意味着程序将继续执行；但是它不会有任何适当的数据 - 这可能比应用程序崩溃更糟糕。

I haven't exactly gifted you the answer in code - but hopefully it's a starting point to allow you to think about how to conceptually compose/design such a solution. That's generally the hardest part.. ;) Good luck.

# emacs - Emacs：将 Ch 转换为 DEL，将 Mh 转换为 M-DEL

> ID：13897125
> 
> 赞同：7
> 
> 时间：2012-12-15T23:22:59.013
> 
> 标签：emacs, key-bindings, emacs23, dot-emacs, emacs24

我希望我的 C/Mh 键成为删除的绑定。

global-set-key 的常用解决方案对我不起作用，因为我希望这些键在任何地方都表现为删除，包括 minibuffer 和各种模式，并且能够在我的各种 Linux/OS X/Windows emacs 安装之间工作。

我有以下接近解决方案：

```
(when (>= emacs-major-version 23)
  (setq help-char (string-to-char "<f1>"))                      ;; Bind ONLY F1 to help, not C-h
  (define-key input-decode-map (kbd "C-h") (kbd "DEL"))         ;; Translate C-h to DEL ;; FIXME:  Should be in emacs 22, doens't work.
  (define-key input-decode-map (kbd "M-h") (kbd "M-<DEL>"))     ;; Translate M-h to M-DEL
  ;; (define-key input-decode-map (kbd "<backspace>") 'version) ;; Stop me using backspace for a while
) 
```

但这显然只适用于 Emacs > 22，因为`input-decode-map`.

有人能帮我找到一个适用于 22 甚至 21 的解决方案吗？（但不是优先事项）。干杯!

**编辑：我的解决方案：**

它还没有完成，但这已经解决了我的大部分问题：

```
(setq help-char [f1]) ;; I don't want help when I'm just trying to backspace!

(define-key isearch-mode-map "\C-h" 'isearch-delete-char)
;; (define-key isearch-mode-map "\M-h" 'my-isearch-delete-word)

(defvar my-overriding-binding-mode-map
  (let ((map (make-sparse-keymap)))
    (define-key map [?\C-h] 'delete-backward-char)
    (define-key map [?\M-h] 'backward-kill-word)
    map))

(define-minor-mode my-overriding-binding-mode
  "Personal global key-bindings."
  :global t)

(my-overriding-binding-mode 1) 
```

对于需要编写的一些行为不端的模式，可能有一些警告——我会在遇到它们时这样做。现在唯一真正的问题似乎`M-h`在 isearch 中，我将作为一个单独的问题发布。

再次感谢伙计们，你们帮了大忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:36:59.213

然后我建议您使用次要模式：

```
(defvar my-overriding-binding-mode-map
  (let ((map (make-sparse-keymap)))
    (define-key map [?\C-h] 'delete-backward-char)
    (define-key map [?\M-h] 'backward-kill-word)
    map))

(define-minor-mode my-overriding-binding-mode
  "Personal global key-bindings."
  :global t)

(my-overriding-binding-mode 1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T02:48:13.633

这是答案的第一个也是最重要的部分，所有的解释都在 elisp 评论中给出。这主要在 X11 环境中进行了测试，但包括使用 Mac 键盘。它已从 v19.28 开始进行测试，直至并包括 v23.3。我认为它适用于 v24，但我还没有非常多地使用 v24。

`~/.emacs.el`您可以在以下初始化和配置文件包中找到我的完整文件（尽管并不总是 100% 最新） ：

[ftp://ftp.planix.ca/pub/local/dotfiles.tar.gz](ftp://ftp.planix.ca/pub/local/dotfiles.tar.gz)

```
;;; first off, we do some fancy stuff to make C-h work "properly," but still
;;; have good access to the help functions!
;;;
;;; Using C-h for "help" might seem OK to some folks, but since it's also the
;;; ASCII standard value for the "backspace" character, one typically used ever
;;; since the days of the typewriter to move the cursor backwards one position
;;; and in computing normally to erase any character backed over, a vast amount
;;; of stupidity is needed in emacs to continue to (ab)use as the "help"
;;; character.  Instead it is still quite intuitive, and often much easier in
;;; zillions of environments, to use M-? for help.
;;;
;;; So, we can set C-h and C-? and friends to sensible bindings...
;;
;; Remember to call override-local-key-settings in the appropriate hooks to fix
;; up modes which violate global user preferences....
;;
(global-set-key "\C-h" 'delete-backward-char)
(global-set-key "\C-?" 'delete-char)
(global-set-key "\e\C-h" 'backward-kill-word)
(global-set-key "\e\C-?" 'kill-word)

;;; and then we diddle with help to make it work again....
;;
;; Oddly, the help interface in emacs is extremely scatter-brained, with
;; several slightly different ways of doing the same thing.  This is probably
;; due to the fact that several different programmers have implemented various
;; bits and pieces of the help systems.  See help.el and help-macro.el, but try
;; not to tear your hair out when you find out help-event-list in 19.34 is
;; essentially bogus, since it is simply an extension to a "standard" list.
;;
;; Remember to call override-local-key-settings in the appropriate hooks to fix
;; up modes which violate global user preferences....
;;
(global-set-key [f1] 'help-command)     ; first do this for 19.28.
(global-set-key "\e?" 'help-command)    ; this is the first step to set up help
(global-set-key "\e?F" 'view-emacs-FAQ) ; in 19.34 it needs more help...
;; should help-char be just ? instead?
(setq help-char ?\M-?)                  ; this should "fix" the rest.

;; one more handy help-related binding...
;;
(define-key help-map "?" 'describe-key-briefly) ; also C-x? for Jove compat

;;; Now for function key mappings...
;;;
;;; I USUALLY EXPECT THE BACKSPACE KEY TO WORK LIKE AN ASCII BACKSPACE!
;;
;; For some entirely un-fathomable reason the default function bindings make
;; the 'backspace' and 'delete' keys synonymous!
;;
;; NOTE: this *should* work by simply reading termio for current erase char.
;;
;; As of emacs-21.2 a note was added to the NEWS file which says "** On
;; terminals whose erase-char is ^H (Backspace), Emacs now uses
;; normal-erase-is-backspace-mode."  Unfortunately this does EXACTLY the WRONG
;; thing, and in a totally bizzare, disruptive, subversive, and stupid
;; backwards way.  With every major release it's gotten worse and worse and
;; worse; more convoluted, and ugly.
;;
;; So, we must do something to kill that horrible stupid broken poor
;; useless excuse for a feature, normal-erase-is-backspace-mode....
;;
;; seems 23.1 changes function-key-map radically....
;;
;; Unfortunately 23.1 also still has function-key-map so we can't make that
;; (function-key-map) an alias for the new local-function-key-map that we need
;; to use in 23.1 to modify key translations.  Sigh.
;;
;; Instead make a new alias that can be used transparently as the desired map.
;;
(eval-and-compile
  (if (functionp 'defvaralias)          ; since 22.1
      (if (boundp 'local-function-key-map)
          (defvaralias 'my-function-key-map 'local-function-key-map
            "Special variable alias to allow transparent override of
`local-function-key-map' for 23.1 vs 22.3(?).")
        (defvaralias 'my-function-key-map 'function-key-map
          "Special variable alias to allow transparent override
of `function-key-map' for 22.3(?) vs. older,"))
    ;; XXX is this right?  it works (maybe?)
    (defvar my-function-key-map function-key-map)))
;;
;; First undo (local-)function-key-map weirdness.
;;
;; luckily on Mac OS-X X11, at least with the mini-wireless keyboard and on the
;; large USB keyboard, the big "delete" key on the main block is actually
;; sending <backspace> by default, else one would have to first change the X11
;; keyboard map!
;;
(define-key my-function-key-map [delete] [?\C-?])
(define-key my-function-key-map [S-delete] [?\C-h])
(define-key my-function-key-map [M-delete] [?\C-\M-?])
(define-key my-function-key-map [kp-delete] [?\C-?])
(define-key my-function-key-map [backspace] [?\C-h])
(define-key my-function-key-map [S-backspace] [?\C-?])
;;(define-key my-function-key-map [C-backspace] [?\C-h]) ; sometimes *is* DEL....
(define-key my-function-key-map [M-backspace] [?\e?\C-h])
(define-key my-function-key-map [M-S-backspace] [?\e?\C-?])
(define-key my-function-key-map [kp-backspace] [?\C-h])
;;
;; Next, zap the keyboard translate table, set up by
;; normal-erase-is-backspace-mode (in simple.el), which can do nothing
;; but confuse!
;;
(setq keyboard-translate-table nil)
;;
;; Finally, kill, Kill, KILL! the input-decode-map added in 23.x, and set
;; up by normal-erase-is-backspace-mode (in simple.el) which can do
;; nothing but confuse!
;;
;; This is TRULY _E_V_I_L_!!!!  HORRID!!!  MASSIVELY STUPID!!!!
;;
;; input-decode-map is poorly documented, and causes things above and
;; below to fail with the most confusing errors!
;;
;; (This probably only needs to be blown away on window systems, and
;; perhaps only for X, but doing it here now is apparently early enough
;; to allow for terminal mode specific settings to be re-applied to it
;; and so it seems safe to just blow away the asinine stupid attempt to
;; transpose backspace and delete.  RMS is a pedantic idiot on this!)
;;
(if (boundp 'input-decode-map)
    (setq input-decode-map (make-sparse-keymap)))

;; finally here's a little function to help fix up modes which don't honour default
;; bindings in sensible ways.  Use this in any init hooks for modes which cause problems
;;
(defun override-local-key-settings ()
  "User defined function.  Intended to be called within various hooks to
override the value of buffer-local key map settings which may have been
overridden without consideration by the major mode."
  (local-set-key "\C-?" 'delete-char)   ; many modes
  (local-set-key "\C-h" 'delete-backward-char)  ; sh-mode
  ;; the rest are *not* overridden by cc-mode, but are by c-mode
  (local-set-key "\e\C-h" 'backward-kill-word) ; text-mode
  (local-set-key "\e?" 'help-command)   ; nroff-mode
  (local-set-key "\eh" 'mark-c-function)
  (local-set-key "\e\C-?" 'kill-word)
  (local-set-key "\e\C-e" 'compile)
  ;; try this on for size...
  (local-set-key "\C-x\e\C-e" 'recompile)
  )

(add-hook 'isearch-mode-hook
          (function
           (lambda ()
            "Private isearch-mode fix for C-h."
            (define-key isearch-mode-map "\C-h" 'isearch-delete-char))))

;;; OK, that's the end of the stuff to fix GNU Emacs' C-h brain damage.  Phew! 
```

# jquery - 使用 jQuery 显示具有相应文本/URL 的动态图像列表

> ID：13897126
> 
> 赞同：0
> 
> 时间：2012-12-15T23:23:01.947
> 
> 标签：jquery, image, list, dynamic

我有一个 Web 服务，它向我返回一个图像列表，它是用户在单击 XML 格式的这些图像时需要重定向到的标题和 URL。我需要构建这些水平对齐的可点击图像的动态列表，我需要使用 jQuery 或 javascript 来执行此操作。是否有任何已知的组件可以做到这一点？我需要从头开始写吗？如果我这样做了，我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:35:57.073

我建议使用[jQuery.parseXML()](http://api.jquery.com/jQuery.parseXML/) 将 XML 转换为 jQuery 对象，然后遍历该对象以填充可观察对象的剔除可观察数组。有关如何使用敲除进行动态绑定的示例，请参见[http://knockoutjs.com/ 。](http://knockoutjs.com/)我会使用一个无序列表来渲染每个带有标题和链接的图像。您可以根据需要为列表设置样式。

浏览到 knockout.js 教程 - [http://learn.knockoutjs.com/#/?tutorial=collections](http://learn.knockoutjs.com/#/?tutorial=collections) Nd 在您的 javascript 中，添加：

```
function SiteItem(u, t, s) {
    var self = this;
    self.url = ko.observable(u);
    self.title = ko.observable(t);
    self.imgSrc = ko.observable(s);
}

// Overall viewmodel for this screen, along with initial state
function ViewModel() {
    var self = this;

    // Editable data
    self.items= ko.observableArray([
        new SiteItem('http://www.google.com/', 'Test', 'http://www.google.com/images/srpr/logo3w.png'),
        new SiteItem('http://www.google.com/', 'Test', 'http://www.google.com/images/srpr/logo3w.png')
    ]);
}

ko.applyBindings(new ViewModel()); 
```

然后在 HTML 中，UL 的淘汰赛模板：

```
<h2>Your images</h2>

<ul class="horizontal-list" id="sites" data-bind="foreach: items">
    <li class="site" data-bind="attr: { 'data-url': url }">
    <a data-bind="text: title, attr: { href: url }"></a>
    <img data-bind="attr: { src: imgSrc, alt: title }" />
    </li>
</ul> 
```

# php - 是否可以在一个 Phalcon\Mvc\Model::find() 方法中指定两个限制值（从，偏移量）？

> ID：13897129
> 
> 赞同：0
> 
> 时间：2012-12-15T23:23:44.830
> 
> 标签：php, phalcon

一会儿我发现了下面的例子：

```
 $robots = Robots::find(array("limit" => 100)); 
```

是否可以为限制定义两个值，“从”和“偏移”？在 Zend Framework 中，可以使用 Db 适配器功能，如下所示：

```
 $db->select()->limit($from, $offset) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T02:41:00.757

试试这个：

```
$collection = Model::find(array(
    "limit" => array('number' => $from, 'offset' => $offset)
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:25:52.707

limit 参数不仅可以接受 int 值。这个例子也可以：

```
$offset = 20;
$from = 10;
$collection = Model::find(array("limit" => $from . ',' . $offset)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-15T23:41:14.467

您始终可以使用支持`OFFSET`类似功能的 PHQL（在控制器中）：

```
$sql     = 'SELECT * FROM Robots LIMIT 100 OFFSET 10';
$stmt    = $this->modelsManager->createQuery($sql)
$results = $stmt->execute(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-19T01:47:48.247

您可以只传递另一个名为 offset 的元素并在其中指定值，请参阅以下示例：

$orders=Orders::find(array( `"order"`=> "id DESC", `"limit"`=> 10, `"offset"`=> 0 ));

您可以参考以下链接了解详细信息：

[https://docs.phalconphp.com/en/latest/reference/models.html](https://docs.phalconphp.com/en/latest/reference/models.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-03-02T09:41:55.103

您可以通过以下方式使您的查询非常可定制：

```
 <?php
    $notifications = \UserNotification::find([
        "user_id = :user_id: ORDER BY date DESC LIMIT 5",
            "bind" => [
            "user_id" => 1
         ]
    ]); 
```

# javascript - KineticJS / Javascript 动态创建和立即拖动

> ID：13897131
> 
> 赞同：2
> 
> 时间：2012-12-15T23:24:05.817
> 
> 标签：javascript, html, events, logic, kineticjs

我想要做的是在 mousedown 上动态创建一个形状，然后立即让它（形状）跟随鼠标光标，直到 mouseup 将其设置到位。这是我到目前为止所拥有的，它对我不起作用。

```
addNegativeButton.on('mousedown', function(){
     var userPos = stage.getUserPosition();
     shapesLayer.add(new Kinetic.Image({
          image: imageObj,
          x: userPos.x,
          y: userPos.y,
          height: 25,
          width: 25,
          rotation: 1,                      
          draggable: true,
          offset: 12
}));

var last = shapesLayer.getChildren()[shapesLayer.getChildren().length -1];
stage.on("mouseup", function(){
    last.setAbsolutePosition(stage.getUserPosition());  
    stage.off("mouseup");
}); 
```

重申一下：我拥有的是一个“addNegativeButton”，单击它会创建一个形状。但我希望它跟随鼠标光标，直到点击被释放。

[http://jsfiddle.net/CPrEe/37/ 有](http://jsfiddle.net/CPrEe/37/) 什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:57:14.100

结果它相当简单；）
添加元素/形状后，您所要做的就是使用模拟功能来模拟鼠标向下并拖动......

```
var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
});

var layer = new Kinetic.Layer();

var rect = new Kinetic.Rect({
    x: 20,
    y: 20,
    width: 100,
    height: 50,
    fill: 'green',
    stroke: 'black',
    strokeWidth: 4
});
//What I really want here is to start dragging the circle until the 
//user releases the mouse, which would then place the circle.
rect.on('mousedown', function(evt) {

    var userPos = stage.getUserPosition();
    var latestElement = new Kinetic.Circle({
        x: userPos.x,
        y: userPos.y,
        radius: 20,
        fill: 'red',
        stroke: 'black',
        strokeWidth: 4,
        draggable: true
    })

    layer.add(latestElement);

    // Here's the bit you want.  After adding the circle (with draggable:true) simulate the mousedown event on it which will initiate the drag
    latestElement.simulate('mousedown');

    layer.draw();
});

layer.add(rect);

stage.add(layer);​ 
```

[http://jsfiddle.net/CPrEe/38/](http://jsfiddle.net/CPrEe/38/)
[http://kineticjs.com/docs/symbols/Kinetic.Node.php#simulate](http://kineticjs.com/docs/symbols/Kinetic.Node.php#simulate)

# iphone - 如何使用 YouTube API 在应用内播放视频？

> ID：13897132
> 
> 赞同：0
> 
> 时间：2012-12-15T23:24:27.903
> 
> 标签：iphone, objective-c, video, load, youtube-api

我有我`GDataEntryBase`的`GDataFeedYouTubeVideo`，现在我需要加载 youtube 视频来观看。

我已经在网上搜索并无法解决，使用 YouTube API 对此的记录很少。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:28:34.707

我建议在下面使用它来将 youtube 视频包含在您的应用中或嵌入。

[http://www.cocoacontrols.com/platforms/ios/controls/hcyoutubeparser](http://www.cocoacontrols.com/platforms/ios/controls/hcyoutubeparser)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T07:53:14.253

您可以使用 HTML5 webview 播放它。它将播放 YouTube 视频。但它给 4.* 设备带来了问题。谢谢桑塔努

# c - C 指针帮助：数组/指针等价

> ID：13897133
> 
> 赞同：1
> 
> 时间：2012-12-15T23:24:34.597
> 
> 标签：c, arrays, pointers

在这个玩具代码示例中：

```
int MAX = 5;

void fillArray(int** someArray, int* blah) {
  int i;
  for (i=0; i<MAX; i++)
    (*someArray)[i] = blah[i];  // segfault happens here
}

int main() {
  int someArray[MAX];
  int blah[] = {1, 2, 3, 4, 5};

  fillArray(&someArray, blah);

  return 0;
} 
```

...我想填充数组 someArray，并让更改在函数之外持续存在。

这是一个非常大的家庭作业的一部分，这个问题在不允许我复制解决方案的情况下解决了这个问题。我得到了一个接受 int** 作为参数的函数签名，我应该编写逻辑来填充该数组。我的印象是在 fillArray() 函数中取消引用 &someArray 会给我所需的数组（指向第一个元素的指针），并且在该数组上使用括号数组元素访问会给我需要分配的必要位置. 但是，我无法弄清楚为什么会出现段错误。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:26:53.990

> 我想填充数组 someArray，并让更改在函数之外持续存在。

只需将数组传递给函数，因为它会衰减到指向第一个元素的指针：

```
void fillArray(int* someArray, int* blah) {
    int i;
    for (i=0; i<MAX; i++)
        someArray[i] = blah[i]; 
} 
```

并调用：

```
fillArray(someArray, blah); 
```

对元素的更改将在函数之外可见。

如果实际代码是在其中分配一个数组，`fillArray()`则`int**`需要 an：

```
void fillArray(int** someArray, int* blah) {
    int i;
    *someArray = malloc(sizeof(int) * MAX);
    if (*someArray)
    {
        for (i=0; i<MAX; i++)  /* or memcpy() instead of loop */
            (*someArray)[i] = blah[i];
    }
} 
```

并调用：

```
int* someArray = NULL;
fillArray(&someArray, blah);
free(someArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T01:57:35.847

当您创建一个数组时，例如 int myArray[10][20]，会从堆栈中分配一个有保证的连续内存块，并使用普通数组算法来查找数组中的任何给定元素。

如果要从堆中分配该 3D“数组”，请使用 malloc() 并取回一些内存。那个记忆是“愚蠢的”。它只是一块内存，应该被认为是一个向量。阵列的导航逻辑都没有附带，这意味着您必须找到另一种方法来导航所需的 3D 阵列。

由于您对 malloc() 的调用返回一个指针，因此您需要的第一个变量是一个用于保存 int* 向量的指针，您将需要保存一些实际的整数数据 IE：

整数 *pArray;

...但这仍然不是您要存储整数的存储空间。你所拥有的是一个指针数组，目前没有指向任何东西。要获取数据的存储空间，您需要调用 malloc() 10 次，每个 malloc() 在每次调用时为 20 个整数分配空间，其返回指针将存储在 *pArray 指针向量中。这意味着

整数 *pArray

需要改为

int **pArray

正确地表明它是一个指向指针向量基数的指针。

第一个解引用 *pArray[i] 将您置于 int 指针数组的某个位置，第二个解引用 *p[i][j] 将您置于 int 数组中的某个位置，由 int 指针指向数组[i]。

IE：你有一堆散布在堆上的整数向量，由一组指针指向，跟踪它们的位置。与从堆栈中静态分配的 Array[10][20] 完全不同，后者都是连续存储，并且在任何地方都没有单个指针。

正如其他人所逃避的那样，基于指针的堆方法乍一看似乎没什么用，但事实证明它非常优越。

首先，最重要的是，您可以随时使用 free() 或 realloc() 来调整堆内存的大小，并且在函数返回时它不会超出范围。更重要的是，有经验的 C 编码人员尽可能安排他们的函数对向量进行操作，其中在函数调用中删除了 1 级间接。最后，对于大型数组，相对于可用内存，特别是在大型共享机器上，大块连续内存通常不可用，并且对其他需要内存才能运行的程序不友好。在堆栈上分配的具有大型静态数组的代码是维护的噩梦。

在这里您可以看到该表只是一个收集从向量操作返回的向量指针的外壳，其中所有有趣的事情都发生在向量级别或元素级别。在这种特殊情况下，VecRand() 中的向量代码是 calloc() 处理它自己的存储并将 calloc() 的返回指针返回到 TblRand()，但 TblRand 也可以灵活地分配 VecRand() 的存储，只需通过调用 calloc() 替换 VecRand() 的 NULL 参数

```
/*-------------------------------------------------------------------------------------*/
dbl **TblRand(dbl **TblPtr, int rows, int cols)
{
    int  i=0;

    if ( NULL == TblPtr ){
        if (NULL == (TblPtr=(dbl **)calloc(rows, sizeof(dbl*)))) 
            printf("\nCalloc for pointer array in TblRand failed");
    }
    for (; i!=rows; i++){
        TblPtr[i] = VecRand(NULL, cols);
    }
    return TblPtr;
}
/*-------------------------------------------------------------------------------------*/

dbl *VecRand(dbl *VecPtr, int cols)
{
    if ( NULL == VecPtr ){
        if (NULL == (VecPtr=(dbl *)calloc(cols, sizeof(dbl)))) 
            printf("\nCalloc for random number vector in VecRand failed");
    }

    Randx = GenRand(VecPtr, cols, Randx);
    return VecPtr;
}
     /*--------------------------------------------------------------------------------------*/

static long GenRand(dbl *VecPtr, int cols, long RandSeed)
{
    dbl  r=0, Denom=2147483647.0;

    while ( cols-- )
    {
        RandSeed= (314159269 * RandSeed) & 0x7FFFFFFF;
        r       = sqrt(-2.0 * log((dbl)(RandSeed/Denom)));
        RandSeed= (314159269 * RandSeed) & 0x7FFFFFFF;
        *VecPtr = r * sin(TWOPI * (dbl)(RandSeed/Denom));
        VecPtr++;
    }
    return RandSeed;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T00:21:50.383

没有“数组/指针”等价，数组和指针有很大不同。永远不要混淆他们。`someArray`是一个*数组*。`&someArray`是*指向数组*的指针，类型为`int (*)[MAX]`。该函数需要一个指向指针的指针，即`int **`，它需要指向内存中某处的指针变量。代码中的任何地方都没有指针变量。它可能指向什么？

对于某些表达式中的第一个元素，数组值可以隐式*降级*为指针*右值。*像获取地址 ( )这样需要*左值*`&`的东西显然不能这样工作。以下是数组类型和指针类型之间的一些区别：

*   不能分配或传递数组类型。指针类型可以
*   指向数组的指针和指向指针的指针是不同的类型
*   数组数组和指针数组是不同的类型
*   `sizeof`数组类型的长度乘以组件类型的大小；指针的`sizeof`只是指针的大小

# sencha-touch - 将选择字段自动绑定到 sencha touch 中的商店？

> ID：13897145
> 
> 赞同：2
> 
> 时间：2012-12-15T23:26:13.803
> 
> 标签：sencha-touch, sencha-touch-2

我正在尝试将选择字段绑定到 sencha-touch 中的商店。但是，我收到以下错误：

```
Uncaught TypeError: Cannot call method 'on' of undefined 
```

该字段如下所示：

```
{
            xtype: 'selectfield',
            label: 'Gender',
            store: 'GenderStore',
            displayField: 'ItemName',
            valueField: 'Id'
        }, 
```

和商店看起来像这样：

```
Ext.define('MobileApp.store.Gender', {
    extend: 'Ext.data.Store',

    requires: [
        'MobileApp.model.Lookup',
        'Ext.data.proxy.Rest'
    ],

    config: {
        autoLoad: true,
        model: 'MobileApp.model.Lookup',
        storeId: 'GenderStore',
        proxy: {
            type: 'rest',            
            url : '/api/lookup/genders',
            reader: {
                type: 'json'
            }
        }
    }    
}); 
```

任何想法为什么这不起作用？我想也许指定 storeId 会自动创建类似于使用 xtype 的商店？该字段是否不会自动绑定到商店，还是我需要显式创建商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:36:26.367

确保您的视图需要商店。也许它还不存在（它需要这样才能通过 ID 找到它）：

```
requires: ['App.store.MyStore'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T22:50:25.480

场

```
 {
        xtype: 'selectfield',
        label: 'Gender',
        store: GenderStore,
        displayField: 'ItemName',
        valueField: 'Id'
    }, 
```

商店

```
var GenderStore = Ext.create('Ext.data.Store', {
requires: [
    'MobileApp.model.Lookup',
    'Ext.data.proxy.Rest'
],
autoLoad: true,
model: 'MobileApp.model.Lookup',
proxy: {
    type: 'ajax',            
    url : '/api/lookup/genders',
    reader: {
       type: 'json',
       rootProperty: 'd'
    },
    root: 'd'

}   
}); 
```

# sharepoint - NewWebPage 出现奇怪的错误 - SP 2010 Foundation

> ID：13897147
> 
> 赞同：0
> 
> 时间：2012-12-15T23:26:56.110
> 
> 标签：sharepoint, powershell

我在这里使用 SP 2010 Foundation 中的 NewWebPage xml 命令遇到了一个奇怪的问题。下面的代码工作不工作

```
cls
Write-Host "Production Manager v8.0 Deployment Utility" -ForegroundColor red
Write-Host ""

#Starting the script. Lets see if we can find the configuration and map files first.
Write-Host -NoNewline "Checking for the Configuration.xml, PageMap.xml and  PageTemplate.xml files: " -ForegroundColor white
if((Test-Path "Configuration.xml") -and (Test-Path "PageMap.xml") -and (Test-Path "PageTemplate.xml"))
{
     Write-Host "FOUND" -ForegroundColor green
}
else
{
    Write-Host "NOT FOUND" -ForegroundColor red
    Write-Host "Check for the necessary files and try again."
    Write-Host ""
    Write-Host ""
    exit
}

Write-Host "Reading Configuration.xml"
[xml]$Configuration = Get-Content Configuration.xml
Write-Host "Reading PageMap.xml"
[xml]$PageMap = Get-Content PageMap.xml

Write-Host "Reading from Production Manager Site:    "$Configuration.Configuration.SiteConfiguration.SiteURL

#Some variables necessary for the loop
$pageCreationLoopIterations = 0
$pageLayout = ""
$pageTitle = ""
$createPageCommand = '<?xml version="1.0" encoding="UTF-8"?><Method ID="0,NewWebPage"><SetList Scope="Request">' + $productionManagerLibrary.ID + '</SetList><SetVar Name="Cmd">NewWebPage</SetVar><SetVar Name="ID">New</SetVar><SetVar Name="Type">WebPartPage</SetVar><SetVar Name="WebPartPageTemplate">' + $pageLayout + '</SetVar><SetVar Name="Overwrite">true</SetVar><SetVar Name="Title">MyPage</SetVar></Method>';

#Beginning the loop
Write-Host "Running through the PageMap file"

foreach($Page in $PageMap.Pages.Page)
{
     $web = Get-SPWeb $Configuration.Configuration.SiteConfiguration.SiteURL
     $productionManagerLibrary = $web.Lists | Where { $_.Title -eq "Production Manager" }
     $pageName = if($Page.SelectSingleNode("PageName")) { $Page.PageName } else {      $Configuration.Configuration.PageConfiguration.DefaultPageName }
     $pageLayout = if($Page.SelectSingleNode("PageLayout")) { $Page.PageLayout } else { $Configuration.Configuration.PageConfiguration.DefaultPageLayout }

     Write-Host 'Creating Page ' $pageName
     $web.ProcessBatchData($createPageCommand) 
```

}

但是每次我运行它时这个都可以正常工作：

```
$url = "http://mpm8/mpm";
$listname = "Production Manager"
$web = Get-SPWeb $url
$pagesLibrary = $web.Lists | Where { $_.Title -eq "Production Manager" }
$pageLayout = 8
$cmd = '<?xml version="1.0" encoding="UTF-8"?><Method ID="0,NewWebPage"><SetList Scope="Request">' + $pagesLibrary.ID + '</SetList><SetVar Name="Cmd">NewWebPage</SetVar><SetVar Name="ID">New</SetVar><SetVar Name="Type">WebPartPage</SetVar><SetVar Name="WebPartPageTemplate">' + $pageLayout + '</SetVar><SetVar Name="Overwrite">true</SetVar><SetVar Name="Title">MyPage</SetVar></Method>';
$web.ProcessBatchData($cmd) 
```

我真的看不出两个脚本之间有什么不同。我运行第一个错误是：

```
<Result ID="0,NewWebPage" Code="-2130575350">
<ErrorText>Invalid URL Parameter.

The URL provided contains an invalid Command or Value. Please check the URL again.   </ErrorText></Result> 
```

你能帮我解决这个问题吗？也许我不能在 foreach 循环中运行这个东西？:(

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:06:50.550

您首先设置了 $createPageCommand（在循环之前），然后设置了它需要的变量（在循环中）。

如果您在 ISE 中运行它并逐步执行（即调试它），您可以看到变量及其值，否则只需在运行循环时将变量的值发送到屏幕以确保其设置正确。

因此，在您的示例中，将 $createPageCommand 放在循环中并在设置 $productionManagerLibrary 之后。然后，在 $web.ProcessBatchData($createPageCommand) 之前，您应该发出 $createPageCommand 的值以确保它正常。

我只是盯着它而不运行它，但请我们知道这是否是原因！

# c++ - C++：如何解决这个递归难题（子集和风格）

> ID：13897149
> 
> 赞同：1
> 
> 时间：2012-12-15T23:27:10.273
> 
> 标签：c++, recursion

请给我一些指示，说明为什么我的代码不适用于此作业。我的想法是有一个`index`(param) 是 Vector 中的当前位置，而`target`(param) 是数组中给定索引的值。然后我要么向上或向下移动，直到达到一个基本情况。但它不起作用。

主要问题是到目前为止它只输出错误的结果。

![在此处输入图像描述](../Images/7ec514f14064edb29cec7826c02d94b9.png)

```
bool RecursivePuzzle :: SolvableReal(Vector<int> & squares, int index, int target)
{
if (target == 0 && index == squares.size() ) return true;
if (index >= squares.size()) return false;
if (index < 0) return false;

int goUp = squares[index] + index;
int goDown = squares[index] - index;

return SolvableReal(squares, goUp, squares[index]) ||
       SolvableReal(squares, goDown, squares[index]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:40:18.197

可能不是全部答案，但这部分看起来是错误的：

```
int goUp = squares[index] + index;
int goDown = squares[index] - index; 
```

我认为应该是

```
int goUp = index + squares[index];
int goDown = index - squares[index]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-15T23:36:16.213

不应该将您的最终解决方案状态与 size - 1 进行比较吗？

```
if (target == 0 && index == squares.size() - 1 ) return true; 
```

# android - Android - 小部件是否已经在主屏幕上？警报是否运行？

> ID：13897160
> 
> 赞同：0
> 
> 时间：2012-12-15T23:28:20.447
> 
> 标签：android, widget, alarmmanager

我正在尝试制作一个小部件，其更新频率可以由用户定义并在运行时更改。我可以使用警报管理器来做到这一点，但是，*有没有办法在设置警报后更改警报的间隔？*

如果没有，我仍然可以取消它并以新的间隔重新启动它，但是我不知道这将如何工作，因为小部件甚至可能不会添加到主屏幕，所以问题是，*有没有办法知道警报是否是运行**或更好，小部件在主屏幕上？***

谢谢

// 编辑 **如何确定您的小部件是否存在**

```
private boolean widgetExists() {
    ComponentName myWidget = new ComponentName(this, MyWidgetProvider.class);
    int[] ids = AppWidgetManager.getInstance(this).getAppWidgetIds(myWidget);
    return ids.length > 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:37:10.973

> 有没有办法在设置警报后更改警报的间隔？

对于这一点，我们可以参考以下文档`AlarmManager.setRepeating()`：

> 安排一个重复的警报...如果已经为同一个 IntentSender 安排了一个警报，它将首先被取消。

换句话说，使用相同类型设置警报会取消现有间隔并使用新值重置警报。

* * *

> 有没有办法知道警报是否正在运行或更好，小部件是否在主屏幕上？

这是 的工作`AppWidgetProvider`。`onEnabled`您的提供者（ 、等）中的回调`onUpdate`可用于确定任何小部件是否实际处于活动状态（[AppWidgetProvider 文档](https://developer.android.com/reference/android/appwidget/AppWidgetProvider.html)）。

# java - 为什么我们需要 Spring 框架？

> ID：13897167
> 
> 赞同：20
> 
> 时间：2012-12-15T23:28:59.740
> 
> 标签：java, spring

嗨，我是 String 新手，正在阅读 Martin Fowler 的文章：[http ://martinfowler.com/articles/injection.html](http://martinfowler.com/articles/injection.html)

他给出了一个使用 MovieFinder 来查找电影的 MovieLister 示例。在这个例子中，他首先提供了代码：

```
class MovieLister...
    private MovieFinder finder;
    public MovieLister() {
        finder = new ColonDelimitedMovieFinder("movies1.txt");
    }
} 
```

他指出，你不能将 MovieLister 提供给你的朋友重复使用，除非你的朋友使用相同的 MovieFinder 实现并将电影放在同一个 txt 文件中。

是的，当然，这不是您编写组件并希望有人可以重用它的方式。相反，随着他的进步，你应该写：

```
class MovieLister...
    public MovieLister(MovieFinder finder) {
        this.finder = finder;       
    }
} 
```

是的，这样更好。现在您的朋友可以接管您的 MovieLister 并插入他自己的代码。对我来说，故事是完整的。我错过了为什么你需要一个 Spring 框架来注入依赖项。通过您朋友的代码将依赖项注入到 MovieLister。句号。所有 Spring 设置等价于简单地实现 MovieFinder 接口并进行这样的调用：

```
MovieFinder myMovieFinder = new MyMovieFinderImpl();
MovieLister myMovieLister = new MovieLister(myMovieFinder); 
```

简单，轻松。我知道您在代码中对 MyMovieFinderImpl 实例的创建进行了硬编码。但是，将它转移到 XML 中并带来这么多其他东西有什么意义呢？从什么时候程序员变得如此害怕编译代码并更喜欢在不编译的情况下更改 XML 来完成所有工作？我很抱歉，但我想我只是错过了重点。几十年前，每个程序都使用依赖注入。但在过去，依赖是由程序使用库、DOS 命令行或 GUI 注入的。为什么现在我们需要另一种方式来注入依赖？

谢谢你。

更新：

好吧，你们中的许多人都提出了注释。在我对 Spring 的浅薄理解中，我可能觉得使用 XML 比使用注解更舒服。至少有一个中心位置以更容易理解的方式列出依赖关系。有了注释，就没有这样的中心位置。相反，只是魔术发生了。想知道传入的参数是什么？自己去弄清楚，祝你好运。是的，我知道有智能 IDE 插件可以帮助浏览代码。但是，为什么我们一开始就让一件事情变得复杂，然后庆祝另一件让我们的生活更轻松的事情呢？注释使代码更难浏览和理解，因此人们为此创建 IDE 插件这一事实是显而易见的，以至于我们可能会首先创建不必要的东西，不是吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T00:01:28.260

在“旧时代”中，代码​​的编写方式与第一个示例相同。

Spring*是*一个图书馆，你说这是“过去”的一种方式。

很少在命令行或通过 GUI 指定实现。不需要多次实现相同功能，因为 (a) 系统很少像现在这样复杂，(b) 他们不需要像今天那样与其他系统进行互操作，以及 (c) 深度测试的实施频率要低得多。

什么是“这么多其他东西”？弹簧是隔离的；你可以只带来你需要的东西。

为什么你忽略了通过注解的配置？

目的是使用通用的、本地化的、已知的标准机制。说“几十年前每个程序都使用依赖注入”是可笑的。几十年前我编程过，跨越了相当广泛的语言，虽然我们做了类似的事情，但我们都有自己的实现，具有不同程度的复杂性，以及不同程度的成功。

DI/IoC*需要*Spring吗？不，许多其他 DI 框架证明了这一点。这是一种众所周知的、本质上标准的方式吗？是的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T00:01:14.060

不要将原理 (DI) 与*一种*实现 (Spring) 混淆。

如果您喜欢 DI，但更喜欢在代码中进行布线：使用 Google Guice。

如果您喜欢 DI，但更喜欢在您的代码*和*可选的 XML 中进行连接，那么请使用 CDI（来自 Java EE 的事物轨道）。

如果您喜欢 DI 并且喜欢 XML（或者必须通过重新配置来改变应用程序的行为），那么只需使用 Spring。

如果您不喜欢 DI，那么……再问一个问题。

最好有几个相同原理的实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T00:06:29.610

是的，如果你只有两个类，手动进行“依赖注入”会更简单、更容易。但是如果你有很多类，如果一个框架（例如 Spring）为你找到正确的初始化和注入顺序，它会更容易和更灵活。

顺便说一句，在最近的 Spring 版本中，您不需要（太多）弄乱 XML，您可以使用注释声明依赖项。

# java - 以无头模式渲染 Swing 容器

> ID：13897168
> 
> 赞同：1
> 
> 时间：2012-12-15T23:29:04.307
> 
> 标签：java, swing, user-interface, awt

> **可能重复：**
> [将 Swing 与帧缓冲区一起使用](https://stackoverflow.com/questions/13896335/using-swing-with-a-framebuffer)

我整天都在寻找针对我的问题的各个方向的解决方案。我正在研究在 Kobo Touch 上运行的 Java，我想使用 Swing 来呈现组件。问题是，如果我只是调用paint() 或其朋友，有问题的组件只会呈现自己。如果我使用 JFrame 来打包（）组件，那么它可以在桌面上运行，但是当我将它移动到 Kobo 时它会失败，因为那里的 Java 环境是无头的。

在无头环境中，将带有子项的 JPanel 渲染为 BufferedImage 或 Graphics2D 的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:34:18.530

看一下这个：

[我可以从 JPanel 创建 BufferedImage 而不在 JFrame 中呈现吗？](https://stackoverflow.com/questions/12480181/can-i-create-a-bufferedimage-from-a-jpanel-without-rendering-in-a-jframe)

顺便说一句，为什么它是无头的？Kobo Touch 确实有显示器...

编辑：正如原始海报所发现的那样，

```
getLayout().layoutContainer(this); 
```

如果没有使用框架，是强制布局管理器对子项进行布局的一种方法，因此 frame.pack() 不会触发布局管理器。

# password-encryption - jBCrypt 的默认 log_rounds 是否仍然适用于 2013 年

> ID：13897169
> 
> 赞同：2
> 
> 时间：2012-12-15T23:29:04.123
> 
> 标签：password-encryption, jbcrypt

自 2010 年推出以来，我一直在使用开箱即用的 jBCrypt 0.3 版。我使用默认的 getsalt() 方法，将“log_rounds”的数量设置为 10。鉴于密码破解硬件和方法，这个值是否仍然适合作为默认值，或者我应该看一些更高的值。

来自javadoc的信息...

```
String pw_hash = BCrypt_v03.hashpw(plain_password, BCrypt_v03.gensalt());
String strong_salt = BCrypt_v03.gensalt(10)
String stronger_salt = BCrypt_v03.gensalt(12) 
```

> 工作量呈指数增长（2**log_rounds），因此每次增量都是工作量的两倍。默认 log_rounds 为 10，有效范围为 4 到 31。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:38:37.630

我做了一个小测试类来检查 checkPw() 在不同的 salt log_rounds 下的性能。

```
public void testCheckPerformance() {
    int MULT = 1;
    for( int i = 4; i < 31; i++) {
        String salt = BCrypt_v03.gensalt(i);
        String hashpw = BCrypt_v03.hashpw("my pwd", salt);
        long startTs = System.currentTimeMillis();
        for( int mult = 0; mult < MULT; mult++) {
            assertTrue(BCrypt_v03.checkpw("my pwd", hashpw));
        }
        long endTs = System.currentTimeMillis();
        System.out.println(""+i+": " + ((endTs-startTs)/MULT));
    }
} 
```

我的电脑是 8 核 i7 2.8GHz。结果是：

```
log-rounds: time in millis.
4: 3
5: 3
6: 6
7: 11
8: 22
9: 46
10: 92
11: 188
12: 349
13: 780
14: 1449
15: 2785
16: 5676
17: 11247
18: 22264
19: 45170 
```

使用默认的 log_rounds=10 意味着单线程可以在 0.1s 内检查一次登录。这可能会限制单个服务器可以实现的每秒登录检查次数。

所以我想问题变成了你准备花多少时间来检查每个密码，以及你想要调整系统大小以应对每秒多少次密码检查。

# java - 空类和列表悖论？

> ID：13897170
> 
> 赞同：-6
> 
> 时间：2012-12-15T23:29:04.877
> 
> 标签：java

如果我创建一个没有任何内容的类然后实例化它`n`，是否可能`OutOfMemory`发生错误？

如果我创建一个类并在该类的构造函数中创建一个自身的实例，我会无限嵌套同一个类吗？会出现`OutOfMemory`错误吗？

假设我创建了一个类，该类应该获取对象并检查它们是否对自己有任何变量引用，如果没有，则将它们包含在列表中。当传递给它的对象是它自己时，我的班级将如何反应？

我最感兴趣的是这如何应用于 Java，而不是 C `x`，但如果它们的行为可能不同，仍然会很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:45:10.530

> 如果我创建一个没有任何内容的类，然后实例化它 n 次，是否可能发生 OutOfMemory 错误？

是的。如果 N 足够大。

> 如果我创建一个类并在该类的构造函数中创建一个自身的实例，我会无限嵌套同一个类吗？

如果你有无限量的内存，是的。实际上你没有，所以创造必然会失败。

> 会发生 OutOfMemory 错误吗？

可能。您更有可能收到 StackOverflow 错误……因为您所描述的内容将创建一个递归循环。

> 假设我创建了一个类，该类应该获取对象并检查它们是否对自己有任何变量引用，如果没有，则将它们包含在列表中。当传递给它的对象是它自己时，我的班级将如何反应？

这是不可能的。这取决于您*如何*实现代码以“检查它们是否对自己有任何变量引用”。

* * *

您似乎正在尝试探索罗素悖论对 Java 程序的影响。简单的答案是它没有任何后果。涉及集合表示的 Java 程序将执行已编码的任何操作。如果您有一个允许“集合”“包含”自身的表示，那么就会发生这种情况。

不过，有一件事应该是显而易见的。Java 中集合的简单表示不允许您表示具有无限数量元素的集合。Java 中的内存（和堆栈）是有限的。这并不意味着不可能代表所有无限集。您只需要以不同的方式进行即可；例如使用“惰性”数据结构或符号表示。

* * *

人们很容易认为集合的表示实际上可能*是*数学集合，并且您可能会通过触发罗素悖论来引起未指定的怪异。实际上，不会发生这样的事情。罗素悖论提出的问题是“所有集合的集合都包含它自己吗？”。但是图灵机等效计算机上的程序无法测试简单无限集合中的所有元素……更不用说所有集合的集合了。罗素的问题根本不是一个容易处理的问题。（但是，它从来都不*是*易于处理的。它实际上是关于探索*有意义的数学*的极限。）

# java - 无法从活动访问服务静态字段

> ID：13897171
> 
> 赞同：0
> 
> 时间：2012-12-15T23:29:05.200
> 
> 标签：java, android, android-activity, android-service

我正在尝试在服务静态字段中设置布尔值以指示服务是否正在运行。问题是，我从中调用服务以及执行检查的活动中的值总是返回 false！即使在我在服务类中检查该值时也是如此。是因为某种线程锁还是为什么？

**UPD：** 我的服务和主要活动在不同的进程中运行（在 android Manifest 中声明）。我为这个问题搜索了更多，现在我想我会坚持使用应用程序上下文

**UPD2：** 切换到单进程和扩展应用程序类以使用公共上下文

# python - Python文本游戏的问题

> ID：13897172
> 
> 赞同：0
> 
> 时间：2012-12-15T23:29:09.523
> 
> 标签：python

所以，这可能会，也可能不会变得复杂。希望不会。无论如何，我在业余时间一直在写一个相当雄心勃勃的 Python 文本游戏，只是想看看我能不能完成它。我意识到那里有大量的交互式小说引擎、解析器等，但我是从头开始做的。这是我学习的方式——我猜是艰难的方式。

所以它是如何分解的：

*   您在 engine.py 模块中有 main() 函数，它几乎可以抓取房间对象并显示房间描述。然后它等待用户输入并将其发送到解析器。
*   parser.py 模块中的解析器通过用户输入运行并构造一个 Sentence 对象（由动词和对象组成 - 可以是名词或方向）。Sentence 对象还有一个输出函数，它从 command.py 模块内部调用 xxxCommand 类。
*   示例：您输入“向北”，解析器将其作为合适的句子接受。因此解析器输出函数将搜索 GoCommand 类。

现在这就是我遇到麻烦的地方。在我继续之前，为了清楚起见，我将粘贴我的 Engine & Sentence 类：

```
class Engine(object):
    def __init__(self, start_room):
        self.L = lexi.Lexicon() #Imported earlier
        self.P = parser.Parser() #Imported earlier
        self.room = start_room

    def main(self):
        while True:
            self.room.describe() #Describes the current room.

            # Ask for user prompt
            input = raw_input(self.room.prompt)
            cmd = input.lower()

            # Scans user input & creates tokens from Lexicon table
            # For example: [('verb', 'go'), ('direction', 'north')]
            tokenizer = self.L.scan(cmd)

            # Runs through tokens and creates a sentence object
            # With noun & object attributes
            parsed_sentence = self.P.parse_sentence(tokenizer)

            # See below
            parsed_sentence.output(self.room)

class Sentence(object):

    def __init__(self, verb, noun):
        self.verb = verb[1]
        self.obj = noun[1]

    # There's a command module with different xxxCommand classes with an execute method
    # as seen on last line. So pretend the command module has already been imported.
    def output(self, current_room):
        verb = self.verb.capitalize()
        obj = self.obj
        command = getattr(commands, '%sCommand' % verb)(obj)
        command.execute(current_room) 
```

好的，经过漫长的设置，我的 GoCommand 类如下所示：

```
# Subclassed from Command parent class. Has one method called execute. Does nothing else.
class GoCommand(Command):
    def __init__(self, direction):
        self.direction = direction

    def execute(self, current_room):
        # 'E' is the instantiation of the Engine class, declared within engine.py
        from engine import E

        # self.direction is 'north' in our example
        # current_room.map is a dict within any Room class named 'map'.
        # For example: Intro.map = {'north': char_intro }
        if self.direction in current_room.map:
            print "You head %s\n" % self.direction # Pretty explanatory

            # HERE'S WHERE I HAVE TROUBLE
            E.room = current_room.map[self.direction]
        else:
            print "You can't go that way." 
```

所以我希望实现的是，当循环结束时，E.room 将等于一个名为 char_intro 的房间类，并且当循环再次运行时，它会显示 char_intro 的描述，基本上是重新开始。

这不是正在发生的事情。它只停留在第一个房间。虽然 GoCommand.execute() 正在运行，但 E.room 没有改变。有谁知道为什么？

哦，天哪，我意识到这很长，但我希望有人知道我在说什么并且可以帮助我。我应该如何解决这个问题，以便当用户说向北并且为 North 设置了路径时，它会改变房间等级？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T09:13:24.710

So it looks like the game state (current room, inventory) is being kept on the Engine. Just for comparison's sake, look over the text adventure game I wrote as a command-parsing exercise at [http://www.ptmcg.com/geo/python/confs/adventureEngine.py.txt](http://www.ptmcg.com/geo/python/confs/adventureEngine.py.txt). In that code, I kept the current room and inventory on a Player instance. The main game loop then looks like:

```
parser = Parser()
p = Player("Joe")
p.moveTo( startRoom )
while not p.gameOver:
    cmdstr = raw_input(">> ")
    cmd = parser.parseCmd(cmdstr)
    if cmd is not None:
        cmd.command( p ) 
```

`parseCmd` parses the input string, and if valid, returns a Command object that implements `command(p)` where p is the Player. Through the player, the command has access to the current room, current inventory, and any special player state or skills (for instance, a player with heightened vision might have better odds at detecting a trap when entering a particular room). This also makes it easier to test your commands with a mock Player, instead of having to mock any globals or attributes in the Engine itself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T05:44:30.573

为了回答我自己的问题，Engine.main() 中的循环按预期工作，但我将 self.room.describe() 从 while 语句中取出：

```
def main(self):
    self.room.describe() #Describes the current room.
    while True:
        # Ask for user prompt
        input = raw_input(self.room.prompt)
        cmd = input.lower()
        ...etc, etc, etc... 
```

然后我将 GoCommand 更改为：

```
class GoCommand(Command):
def __init__(self, direction):
    self.direction = direction

def execute(self):
    # 'E' is the instantiation of the Engine class, declared within engine.py
    from engine import E

    # self.direction is 'north' in our example
    if self.direction in E.room.map.keys():
        print "You head %s\n" % self.direction # Pretty explanatory

        E.room = E.room.map[self.direction]
        print E.room.describe()
    else:
        print "You can't go that way." 
```

一切都按预期进行。

# javascript - 如何使用 JavaScript 检测文档中是否存在 HTML5 有效的文档类型？

> ID：13897173
> 
> 赞同：4
> 
> 时间：2012-12-15T23:29:21.907
> 
> 标签：javascript, html, parsing, dom, doctype

我想知道是否有一种简单的方法来检测 a`doctype`是否存在 - 最好只有 HTML5 文档类型。我不想以字符串或任何东西的形式返回它（尽管我已经尝试过这里提出的类似问题，请参见下面的代码），我只想看看它是否不存在。比如，如果它不存在，调用一个`alert`, then `return false`，或者如果它存在，调用一个接受函数。

就像我之前说的，我已经阅读了这里的其他帖子和其他论坛上的其他帖子，但似乎没有一个与我的答案相匹配，或者我可能错误地解释了代码，如果是这样，请告诉我。

我已经尝试过的代码如下：

```
 var msg = {
        noHTML5: "You're pages document type is either not defined or not compliant with HTML5."
    },

    node = document.doctype,
    thisNodeHTML = "<!DOCTYPE " + node.name + (node.publicId ? ' PUBLIC"' + node.publicId + '"' : '') + (!node.publicId && node.systemId ? ' SYSTEM' : '') + (node.systemId ? ' "' + node.systemId + '"' : '') + ">";

    if(!thisNodeHTML) {
        alert(msg.noHTML5);

        return false;
    }

    else {
       // success = true;
    } 
```

# 编辑：

但是，我确实注意到，一旦我删除了 html 文件中的 doctype，Chrome 的错误控制台就会捕获它并显示错误。也许我的条件语句的语法不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-15T23:43:23.993

`document.doctype`是`null`当没有文档类型存在时，因此您的错误。调整你的方法以在这种情况下返回 false，你应该很好。样本检测函数，基于文档类型：

```
var is_html5 = function () {
    if (document.doctype === null) return false;

    var node = document.doctype;
    var doctype_string = "<!DOCTYPE " + node.name + (node.publicId ? ' PUBLIC"' + node.publicId + '"' : '') + (!node.publicId && node.systemId ? ' SYSTEM' : '') + (node.systemId ? ' "' + node.systemId + '"' : '') + ">";

    return doctype_string === '<!DOCTYPE html>';
}; 
```

# ios - 检查一个类是否已在 iOS 中实例化

> ID：13897176
> 
> 赞同：1
> 
> 时间：2012-12-15T23:29:55.557
> 
> 标签：ios

我正在尝试检查一个类是否已在 iOS 中实例化。如果它已被实例化，那么我想释放它。

就像是

```
for (UIView* views in self.view.subviews) {
        if ([views isKindOfClass:[CCGLView class]])
            [views removeFromSuperview];
    } 
```

因为那时我已经知道它是某种 UIViews，但是我如何检查其他类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:57:25.373

> 我正在尝试检查一个类是否已在 iOS 中实例化。

你不需要。Objective-C 允许你在没有任何副作用的情况下发送 nil 消息。此外，子视图不允许为 nil，因为它们被添加到内部 NSMutableArray 中，这反过来又不允许将 nil 指针添加到自身。

> 因为那时我已经知道它是某种 UIViews，但是我如何检查其他类呢？

如果您希望发布每个 UIView（和相关的子类），则不需要在比较中如此具体，因为基类 (UIView) 是声明 removeFromSuperview 的类，这反过来又解决了释放问题你问题的一部分。当一个视图从它的父视图中移除时，它的引用计数减一。

现在我有了更多的上下文，你所要求的只是微不足道的。如果您使用的是 ARC，则此处的此代码段将找到所有 type 的对象`CustomClass`，然后将它们设置为 nil。

```
for (NSObject *object in self.someCollection) {
    if ([object isKindOfClass:[CustomClass class]])
        object = nil;
} 
```

如果您使用的是 MRC（如果您使用了，那么您到底出了什么问题？），那么您实际上应该检查它是否是一个活动实例。

```
for (NSObject *object in self.someCollection) {
    if ([object isKindOfClass:[CustomClass class]] && object != nil) {
        [object release];
    }
} 
```

# php - 将所选项目发布到表格

> ID：13897179
> 
> 赞同：0
> 
> 时间：2012-12-15T23:30:06.650
> 
> 标签：php, javascript, ajax, codeigniter

我有一个搜索产生的结果列表。每个项目都有一个复选框。我想要做的是将所选项目发布到不同的表。

这是显示数据的代码：

```
 <section class="grid_12">
        <div class="block-border">
        <form class="block-content form" id="table_form" method="post" action="">
            <h1>Sortable table</h1>

            <table id="mylist" data-campaignId="<?=$campaignid?>" class="table sortable no-margin" cellspacing="0" width="100%">

                <thead>
                    <tr>
                        <th class="black-cell"><span class="loading"></span></th>
                        <th scope="col">
                            <span class="column-sort">
                                <a href="#" title="Sort up" class="sort-up"></a>
                                <a href="#" title="Sort down" class="sort-down"></a>
                            </span>
                            Name
                        </th>
                        <th scope="col">Client Of</th>
                        <th scope="col">
                            <span class="column-sort">
                                <a href="#" title="Sort up" class="sort-up"></a>
                                <a href="#" title="Sort down" class="sort-down"></a>
                            </span>
                            Home Phone
                        </th>
                        <th scope="col">
                            <span class="column-sort">
                                <a href="#" title="Sort up" class="sort-up"></a>
                                <a href="#" title="Sort down" class="sort-down"></a>
                            </span>
                            Email
                        </th>
                        <th scope="col">
                            <span class="column-sort">
                                <a href="#" title="Sort up" class="sort-up"></a>
                                <a href="#" title="Sort down" class="sort-down"></a>
                            </span>
                            Created On
                        </th>
                        <th scope="col" class="table-actions">Actions</th>
                    </tr>
                </thead>

                <tbody>
                <?php foreach($r->result() as $row) : ?>
                    <tr data-clientid="$row->id"> 
                      <td class="th table-check-cell">
                        <input type="checkbox" name="selected[]" class="checkbox">
                      </td>
                        <td><a href="/client/view/<?=$row->id?>"><?=$row->firstname?> <?=$row->lastname?></a></td>
                        <td><ul class="keywords">
                            <li><a href="#"><?=$row->clientof?></a></li>
                            <li class="orange-keyword"><a href="#"><?=$row->status?></a></li>
                        </ul></td>
                        <td><?=$row->homephone?></td>
                        <td><?=$row->email?></td>
                        <td><?=$row->created?></td>
                        <td class="table-actions">
                            <a href="/client/view/<?=$row->id?>" title="View / Edit" class="with-tip"><img src="/images/icons/fugue/pencil.png" width="16" height="16"></a>
                        </td>
                    </tr>
                <?php endforeach;?>
                </tbody>

            </table>

            <div class="clear"></div>

<div class="block-footer">
                <img src="images/icons/fugue/arrow-curve-000-left.png" width="16" height="16" class="picto"> 
                <a href="javascript:toggleChecked('checked')" class="button">Select All</a> 
                <a href="javascript:toggleChecked('')" class="button">Unselect All</a>
                <span class="sep"></span>
                <button id="post_diff_table">POST selected</button>
            </div>                  
        </form></div>
    </section> 
```

这是上述页面中所有当前的 javascript。

```
<? $campaignid = $this->uri->segment(4); ?>
<script type="text/javascript">
<!--
$(document).ready(function(){
toggleChecked = function(status)
{
    alert('trigger');
    $(".checkbox").each( function() {
        $(this).attr("checked",status);
    });
}
});
//-->
</script>

<script type="text/javascript">
$(function() {
$('#post_diff_table').click(function() {
var table = $('table#mylist');
var campagnid = table.data('campaignId');
//Array of checked client ids
var checked_clients = $.map(table.find('tr td.table-check-cell input:checked'), function(e) {
    return $(e).parents('tr').data('clientid');
});
if (checked_clients.length === 0) {return false;}
//call the controller
$.post('/ajaxmodals/campaign_post_to_other_table', {
    campagnid: campagnid,
    clients: checked_clients
}, function(data) {
    //process response
},"json");
});​});
</script> 
```

这是ajax控制器中的代码。

```
function campaign_post_to_other_table()
{
$campagnid=$this->input->post('campagnid');
/* @var Array */
$clients = $this->input->post('clients');
foreach ($clients as $client_id) {
        $clientid = $this->input->post('clientid');
        $submit['clientid'] = $clientid;
        $submit['campaignid'] = $this->input->post('campaignid');
        $submit['creationdate'] = date('Y-m-d H:i:s');
        $submit['createdby'] = $this->session->userdata('uid');
        //print_r($submit); exit();

        $newid = $this->campaign_model->add_user_to_campaign($submit);
        $cname = $this->client_model->get_client_name($clientid);

        echo json_encode(array("response"=>"Success","name"=>$cname,"id"=>$newid,"clientid"=>$clientid));
  }
  } 
```

这是 add_user_to_campaign 模型。

```
function add_user_to_campaign($data)
{
    $this->db->insert('campaign_to_client',$data);

    $newid = $this->db->insert_id();
    return $newid;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:08:57.060

在表定义中（我假设 $campaignid 是活动 ID，将 mylist 更改为您想要的任何内容）：

```
<table id="mylist" data-campaignId="<?=$campaignid?>" class="table sortable no-margin" cellspacing="0" width="100%"> 
```

在您的循环中为客户设置数据

```
<?php foreach($r->result() as $row) : ?>
    <tr data-clientid="$row->id"> 
      <td class="th table-check-cell">
        <input type="checkbox" name="selected[]" class="checkbox">
      </td>
      <!---other td here -->
    </tr>
<?php endforeach;?>
</table>
<!--button to post all selected items -->
<button id="post_diff_table">POST selected</button> 
```

javascript:

```
$(function() {
$('#post_diff_table').click(function() {
    var table = $('table#mylist');
    var campagnid = table.data('campaignId');
    //Array of checked client ids
    var checked_clients = $.map(table.find('tr td.table-check-cell input:checked'), function(e) {
        return $(e).parents('tr').data('clientid');
    });
    if (checked_clients.length === 0) {return false;}
    //call the controller
    $.post('/ajaxmodals/campaign_post_to_other_table', {
        campagnid: campagnid,
        clients: checked_clients
    }, function(data) {
        //process response
    },"json");
});​}); 
```

在控制器中：

```
function campaign_post_to_other_table()
{
   $campagnid=$this->input->post('campagnid');
   /* @var Array */
   $clients = $this->input->post('clients');
   foreach ($clients as $client_id) {
     /* sql insertion code here 
        or call  $this->campaign_model->add_user_to_campaign for each clientid
     */
   }
} 
```

答案不是可复制粘贴的代码，因为我不了解您的项目内部结构，但您应该明白这一点。

* * *

* * *

关于其他代码的建议：不要在 js 中这样做：

```
$.post('/ajaxmodals/campaign_subscriber_add', { 
            clientid : cid,
            campaignid : <?=$r->id?> 
```

从我的示例中的表数据中获取活动 ID

* * *

不要这样做：

`$("#subscriberList").append('<li id="'+data.id+'"><a href="/client/view/'+data.clientid+'">'+data.name+'</a><span style="display: inline; float: right" onclick="javascript:delete_subscriber(\''+data.id+'\')">delete</span></li>');`

在 js 中编写元素，添加事件处理程序等。您的方式使您可以使用许多全局函数并使代码不可读。

# php - Opencart 按价格或按产品选项过滤产品

> ID：13897180
> 
> 赞同：1
> 
> 时间：2012-12-15T23:30:26.537
> 
> 标签：php, function, search, option, opencart

我对 opencart 很陌生，我想知道如何修改搜索功能以按选项或价格搜索产品。我的大学有一个项目，我需要创建这样的功能。

你能告诉我怎么做吗？我需要一个例子。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T06:55:32.930

**我在这个例子中使用 Opencart 1.5.3.1**

您需要修改 getProducts() 函数。搜索查询在构建时如下所示：

```
SELECT p.product_id, (SELECT AVG(rating) AS total FROM review r1 WHERE r1.product_id =
p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating FROM product p LEFT
JOIN product_description pd ON (p.product_id = pd.product_id) LEFT JOIN product_to_store  
p2s ON (p.product_id = p2s.product_id) LEFT JOIN product_tag pt ON (p.product_id = 
pt.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= NOW  
() AND p2s.store_id = '0' AND ( LCASE(pd.name) LIKE '%large%' OR LCASE(pt.tag) LIKE 
'%large%' AND pt.language_id = '1') GROUP BY p.product_id ORDER BY p.sort_order ASC, LCASE
(pd.name) ASC LIMIT 0,15 
```

您需要向查询添加选项值描述以及向 WHERE 子句添加参数：

```
SELECT p.product_id, (SELECT AVG(rating) AS total FROM review r1 WHERE r1.product_id = 
p.product_id AND r1.status = '1' GROUP BY r1.product_id) AS rating FROM product p LEFT 
JOIN product_description pd ON (p.product_id = pd.product_id) LEFT JOIN 
product_to_store p2s ON (p.product_id = p2s.product_id) LEFT JOIN product_option_value 
pov ON (p.product_id = pov.product_id) LEFT JOIN option_value_description ovd ON 
(pov.option_value_id = ovd.option_value_id) LEFT JOIN product_tag pt ON (p.product_id 
= pt.product_id) WHERE pd.language_id = '1' AND p.status = '1' AND p.date_available <= 
NOW() AND p2s.store_id = '0' AND ( LCASE(pd.name) LIKE '%large%' OR LCASE(ovd.name) 
LIKE '%large%' OR LCASE(pt.tag) LIKE '%large%' AND pt.language_id = '1') GROUP BY  
p.product_id ORDER BY p.sort_order ASC, LCASE(pd.name) ASC LIMIT 0,15 
```

为此，请编辑 catalog/model/catalog/product.php。查找第 37,38 行：

```
 if (!$product_data) {
        $sql = "SELECT p.product_id, (SELECT AVG(rating) AS total FROM 
" .     DB_PREFIX . "review r1 WHERE r1.product_id = p.product_id AND r1.status = '1'  
GROUP BY r1.product_id) AS rating FROM " . DB_PREFIX . "product p LEFT JOIN " . 
DB_PREFIX . "product_description pd ON (p.product_id = pd.product_id) LEFT JOIN " . 
DB_PREFIX . "product_to_store p2s ON (p.product_id = p2s.product_id)"; 
```

之后添加：

```
 //add option values to search query
        $sql.= " LEFT JOIN " . DB_PREFIX . "product_option_value pov ON (p.product_id = pov.product_id)";   
        $sql.= " LEFT JOIN " . DB_PREFIX . "option_value_description ovd ON (pov.option_value_id = ovd.option_value_id)";       
        // - - - - - - - - - - - - - 
```

查找第 70 行：

```
$implode[] = "LCASE(pd.name) LIKE '%" . $this->db->escape(utf8_strtolower($word)) . "%'"; 
```

将其更改为：

```
$implode[] = "LCASE(pd.name) LIKE '%" . $this->db->escape(utf8_strtolower($word)) . "%'
OR LCASE(ovd.name) LIKE '%" . $this->db->escape(utf8_strtolower($word)) . "%'"; 
```

现在搜索将“看到”产品选项值名称，例如“大”、“红色”等。

要搜索价格要容易得多，只需在 WHERE 子句中包含参数以进行精确匹配：

```
"pd.price = '" . $this->db->escape(utf8_strtolower($word)) . "' 
```

例如，对于达到某个值的价格值，请使用：

```
"pd.price <= '" . $this->db->escape(utf8_strtolower($word)) . "' 
```

希望，你明白了。

现在，**这只是一个快速而肮脏的示例**，旨在让您继续前进。

我不建议将此作为最终解决方案。

您需要考虑添加新的 GET 变量来控制是否在搜索中包含选项和/或价格。此外，搜索价格范围而不是价格。添加变量以控制是否使用 AND 或 OR 运算符 - 即查找“red”和“XL”或两者中的任何一个。

祝你好运。

# javascript - 删除 dynatree 中的所有选定节点

> ID：13897184
> 
> 赞同：2
> 
> 时间：2012-12-15T23:30:48.107
> 
> 标签：javascript, dynatree

我想从 dynatree 中删除所有选定的节点？但是，如果您在子项之前删除文件夹，则会引发错误。如何首先按叶节点的顺序删除选定节点的列表？

```
 for (var i = 0; i < selectedNodes.length; i++) {
   selectedNodes[i].remove(); //Remove
 } 
```

# android - 从线程更改 TextView 文本

> ID：13897193
> 
> 赞同：1
> 
> 时间：2012-12-15T23:31:44.200
> 
> 标签：android, multithreading, textview

我知道您只能从 UI 线程更改 tTxtViews 中的文本，但我似乎无法找到一种方法来处理它。

我将介绍更多细节：我正在尝试使用 TextView 来显示经过的时间，但我无法在线程中执行此操作，或者无法在不断调用的方法中执行此操作。你能帮我解决这个问题吗？因为我几乎没有想法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:54:09.000

用这个

```
new Thread(new Runnable() {

    @Override
    public void run() {
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // Do what you want.
            }          
        });
   }         
}).start(); 
```

或使用`Handler`：

```
Runnable r = new Runnable() {

    @Override
    public void run() {
        // Do what you want.
    }
};
Handler mHandler = new Handler();
mHandler.post(r); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T00:11:38.460

```
 public class MainActivity extends Activity {

            protected static final long TIMER_DELAY = 100;
            private TextView tv;
            protected Handler handler;

            @Override
            protected void onCreate(Bundle savedInstanceState) {
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_main);

                tv = (TextView)findViewById(R.id.helloWorld);
                handler = new Handler();
                handler.post(timerTask);

            }

            private Runnable timerTask = new Runnable() {
                public void run() {
                    Calendar now = Calendar.getInstance();

                    //format date time
                    tv.setText(String.format("%02d:%02d:%02d", now.get(Calendar.HOUR_OF_DAY), now.get(Calendar.MINUTE), now.get(Calendar.SECOND)));

                    //run again with delay
                    handler.postDelayed(timerTask, TIMER_DELAY);
                }
            };

        } 
```

忘记加了，不好意思。不要忘记这样做：

```
@Override
    public void onPause() {

        if (handler != null)
            handler.removeCallbacks(timerTask);

        super.onPause();
} 
```

如果你想要恢复应用程序试试这个

```
@Override
    public void onResume() {
        super.onResume();

        if (handler != null)
            handler.post(timerTask);
} 
```

# vb.net - VB.NET 和 Facebook 照片上传——收到 400 错误请求

> ID：13897194
> 
> 赞同：1
> 
> 时间：2012-12-15T23:31:44.743
> 
> 标签：vb.net, facebook, image, upload, photo

哇，我已经尝试了从编写自己的标头到转换 C# 示例的所有方法，但在上传照片时我仍然无法通过 400 Bad Request 错误。

我添加了所有可能的权限，并且我的令牌是正确的。

我可以将状态更新发布到我的提要中，但我无法上传图片。这是我尝试过的两种不同方法，都给了我 400 Bad Request ...

# 1

```
 Dim myReq As HttpWebRequest
    Dim myRes As HttpWebResponse
    Dim encoding As New System.Text.ASCIIEncoding()
    Dim postData As String
    Dim data() As Byte
    Dim sr As StreamReader
    Dim imagedata As String

    imagedata = File.OpenText("C:\ebay00042-1.jpg").ReadToEnd()

    postData += "access_token=MY_TOKEN_HERE_29ZB51pPizthxX5lhmst3MZC7hYXQhW8ZB8e7sVVLzEaN8ZCZAzAgrzk1pisw3ZCtK5lwMMTZBUhe07xTsQvfeHosA1GFUAZDZD&message=this is a test123&source=" & imagedata 'File.ReadAllBytes(photoPath)
    data = encoding.GetBytes(postData)

    myReq = WebRequest.Create("https://graph.facebook.com/380406275386560/photos")
    DirectCast(myReq, System.Net.HttpWebRequest).UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)"
    myReq.Method = "POST"
    myReq.ContentType = "application/x-www-form-urlencoded"
    myReq.ContentLength = data.Length
    Dim myStream As Stream = myReq.GetRequestStream
    myStream.Write(data, 0, data.Length)
    myStream.Close()
    myRes = myReq.GetResponse
    sr = New StreamReader(myRes.GetResponseStream)
    Dim strHTML As String = sr.ReadToEnd 
```

# 2，尝试创建自己的标题..

```
 Dim myReq As HttpWebRequest
    Dim myRes As HttpWebResponse
    Dim encoding As New System.Text.ASCIIEncoding()
    Dim data() As Byte
    Dim sr As StreamReader
    Dim boundary As String = "----------" + DateTime.Now.Ticks.ToString("x")

    Dim sb As StringBuilder = New StringBuilder("")
    sb.Append("----------").Append(boundary).Append("\r\n")
    sb.Append("Content-Disposition: form-data; name=""access_token""").Append("\r\n")
    sb.Append("\r\n")
    sb.Append("MY_TOKEN_HERE_MZC7hYXQhW8ZB8e7sVVLzEaN8ZCZAzAgrzk1pisw3ZCtK5lwMMTZBUhe07xTsQvfeHosA1GFUAZDZD").Append("\r\n")

    sb.Append("----------").Append(boundary).Append("\r\n")
    sb.Append("Content-Disposition: form-data; name=""message""").Append("\r\n")
    sb.Append("\r\n")
    sb.Append("Testttt").Append("\r\n")

    sb.Append("----------").Append(boundary)
    sb.Append("Content-Disposition: file; name=""source"" filename=""ebay00042-1.jpg""").Append("\r\n")
    sb.Append("Content-Type: image/jpeg).Append(\r\n")
    'sb.Append("Content-Transfer-Encoding: binary").Append("\r\n")
    sb.Append("\r\n")
    sb.Append(File.OpenText("C:\ebay00042-1.jpg").ReadToEnd()).Append("\r\n")

    sb.Append("----------").Append(boundary).Append("----------").Append("\r\n")

    'txtCaption.Text = sb.ToString
    data = encoding.GetBytes(sb.ToString)

    myReq = WebRequest.Create("https://graph.facebook.com/380406275386560/photos")
    DirectCast(myReq, System.Net.HttpWebRequest).UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)"
    myReq.Method = "POST"
    myReq.ContentType = "multipart/form-data; boundary=" + boundary
    'myReq.ContentType = "application/x-www-form-urlencoded"
    myReq.ContentLength = data.Length
    Dim myStream As Stream = myReq.GetRequestStream
    myStream.Write(data, 0, data.Length)
    myStream.Close()
    myRes = myReq.GetResponse
    sr = New StreamReader(myRes.GetResponseStream)
    Dim strHTML As String = sr.ReadToEnd 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:49:48.223

我对 Facebook 的 API 一无所知，但如果我是你，我会好好看看[http://csharpsdk.org/](http://csharpsdk.org/)

如果我必须根据您提供的信息发送图像，它看起来像这样：

```
' Request URL, image file to send, token and result HTML buffer
Dim reqUrl As String = "https://graph.facebook.com/380406275386560/photos"
Dim imageData As Byte() = File.ReadAllBytes("C:\ebay00042-1.jpg")
Dim token As String = "MY_TOKEN_HERE"
Dim strHtml As String = ""
' Request
Dim request As WebRequest = WebRequest.Create(reqUrl)
request.Headers.Add("access_token", token)
request.Method = "POST"
' set *correct* content type
request.ContentType = "image/jpeg"
' write image data to request stream
Using str = request.GetRequestStream()
    str.Write(imageData, 0, imageData.Length)
End Using
' response
Dim response As WebResponse = request.GetResponse()
' HTTP Status
Dim status As Integer = CType(response, HttpWebResponse).StatusCode
If status = 200 Then
    ' success
    Using reader As New StreamReader(response.GetResponseStream())
        strHtml = reader.ReadToEnd()
    End Using
Else
    ' oops
End If 
```

希望有帮助。

# javascript - webGL 故事球弹出窗口

> ID：13897198
> 
> 赞同：0
> 
> 时间：2012-12-15T23:32:45.243
> 
> 标签：javascript, popup, webgl

我正在尝试在[这里](http://studio.html5rocks.com/#Globe)调整看起来很酷的 WebGL Story Sphere、源代码和 css 。有一个大问题：一旦你点击一篇新闻文章，弹出的文章文本总是一样的。我想修改代码，以便当您单击一篇文章时，正确的文本会出现在弹出窗口中。

我正在使用我在代码中指定的一组文章文本，例如`var captions = ["good","better","best"]`. 虽然文章标题和图像在弹出窗口中正确填充，但我无法让文本这样做。你能帮助我吗？？这是我所拥有的：

```
// function code
var passvar = null; // failed attempt to store texts for later
function initialize() {
  math = tdl.math;
  fast = tdl.fast;
  canvas = document.getElementById("canvas");
  g_fpsTimer = new tdl.fps.FPSTimer();
  hack();

  canvas.addEventListener("mousedown", handleMouseDown, false);
  canvas.addEventListener("mousemove", handleMouseMove, false);
  canvas.addEventListener("mouseup", handleMouseUp, false);

  // Create a canvas 2d for making textures with text.
  g_canvas2d = document.createElement('canvas');

  window.two2w = window.two2h = g_tilesize; 

  g_canvas2d.width = two2w;
  g_canvas2d.height = two2h;
  g_ctx2d = g_canvas2d.getContext("2d");

  window.gl = wu.create3DContext(canvas);
  if (g_debug) {
    gl = wd.makeDebugContext(gl, undefined, LogGLCall);
  }
  //gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, gl.TRUE);

  // Here is where I specify article titles, images, captions
  // Titles and images populate the popup correctly, captions don't...

  var titles = ["a","b","c"];
  var captions = ["good","better","best"];
  var images = ['imagesphere/assets/1.jpg', 
                'imagesphere/assets/bp/2.png', 
                'imagesphere/assets/bp/3.png'
                ];

  var headlines = titles.concat( titles);
  var blurbs = captions.concat( captions);

  var tmpImages = [];
  var tmpHeadlines = [];
  var tmpCaptions = [];

  // make a bunch of textures.
  for (var ii = 0; ii < g_imagesDownGrid; ++ii) {
    var textures = [];
    for (var jj = 0; jj < g_imagesAcrossGrid; ++jj) {
      var imgTexture = new ImgTexture();

      textures.push(imgTexture);
      if (tmpImages.length == 0) {
        tmpImages = images.slice();
      }
      if (tmpHeadlines.length == 0) {
        tmpHeadlines = headlines.slice();
      }
      if (tmpCaptions.length == 0) {
          tmpCaptions = blurbs.slice();
      }
      var rando = math.randomInt(tmpImages.length);
      var img = tmpImages.splice(rando, 1)[0];
      var headline = tmpHeadlines.splice(rando, 1)[0];
      var caption = tmpCaptions.splice(rando, 1)[0];
      passvar = caption;

      if (img.indexOf('videoplay.jpg') > -1){
        window.vidtexture = imgTexture;
        images = images.slice(1); // dont use that thumb again.
        headlines = 'WebGL Brings Video To the Party as Well'
      }

      imgTexture.load(img, /* "[" + jj + "/" + ii + "]" + */ headline);
    }
    g_textures.push(textures);
  }

  // And here's where I try to put this in a popup, finally
  // But passvar, the stored article text, never refreshes!!!

 <div id="story" class="prettybox" style="display:none"> 
    <img class="close" src="imagesphere/assets/close.png">
    <div id="storyinner">
        <input id = "mytext">
            <script>document.getElementById("mytext").value = passvar;</script>
    </div>
 </div> 
```

这是我的点击处理程序代码：

```
 function sphereClick(e){
   window.console && console.log('click!', e, e.timeStamp);

   var selected = g_textures[sel.y][sel.x];
   window.selected = selected;

   animateGL('eyeRadius', glProp('eyeRadius'), 4, 500); 

   var wwidth   = $(window).width(),
       wheight  = $(window).height(),
       story    = $('#story').width( ~~(wwidth / 7 * 4) ).height( ~~(wheight / 6 * 5) ), 
       width    = story.width(),
       height   = story.height(),
       miniwidth = 30;

   story.detach()
    .find('#storyinner').find('h3,img,caption').remove().end().end()
    .show();

   story.css({
     left        :   e.pageX,
     top         :   e.pageY,
     marginLeft  :   - width / 2,
     marginTop   :   - height / 2

   }).appendTo($body); // we remove and put back on the DOM to reset it to the correct position.

   $('style.anim.story').remove();
   $('<style class="anim story">')
      .text( '.storyopen #story { left : ' + (wwidth  / 3 * 2) + 'px !important;  top : ' + wheight / 2 + 'px !important; }' )
      .appendTo($body);
   $(selected.img).prependTo('#storyinner').parent();

   $('<h3>').text(selected.msg.replace(/\(.*/,'')).prependTo('#storyinner');

   $body.addClass('storyopen');

} // eo sphereClick() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:05:02.210

这里有很多错误，但这是一个开始。它不会解决您的问题，但会帮助您避免此类问题。

* * *

`var passvar = null;`是一个全局变量。

您的循环`for (var ii = 0; ...`在每次迭代时将该全局变量设置为一个新值。

稍后，您单击某些东西，全局变量`passvar`永远不会改变。

如果您想使用此模式，您需要`passvar`从您的点击处理程序中进行设置，以便它具有被点击的值。由于您实际上并没有发布您的点击处理程序，因此很难提供更多建议。

* * *

但这也是一种不好的模式，函数接受参数是有充分理由的。既然你必须在点击处理程序中找到你点击的项目，为什么不直接传递它，它确实涉及一个共享的全局变量？

```
var handleMouseUp = function(event) {
  var story = findClickedThing(event);
  if (obj) {
    showPopup(story.texture, story.caption);
  }
} 
```

* * *

这让我想到了这一点：

```
var titles = ["a","b","c"];
var captions = ["good","better","best"];
var images = ['imagesphere/assets/1.jpg', 
              'imagesphere/assets/bp/2.png', 
              'imagesphere/assets/bp/3.png'
              ]; 
```

当你有 3 个长度相同的数组，每个数组描述一个对象的不同属性时，你*做错了*。您想要的是*一*组对象。

```
var stories = [
  {
    title: "a",
    caption: "good",
    image: "imagesphere/assets/1.jpg"
  }, {
    title: "b",
    caption: "better",
    image: "imagesphere/assets/bp/2.jpg"
  }, {
    title: "c",
    caption: "best",
    image: "imagesphere/assets/bp/3.jpg"
  },
];

console.log(stories[1].caption); // "better" 
```

现在一旦你找到点击的对象，你可以问它的标题是什么。您可以将整个对象传递给弹出窗口制作者。并且没有任何字段以不同的方式处理或以不同的方式传递，因为您没有传递字段。您正在*传递整个对象*。

# liferay - Liferay - 无法访问外观

> ID：13897199
> 
> 赞同：1
> 
> 时间：2012-12-15T23:33:01.780
> 
> 标签：liferay, portlet, liferay-6

使用 Liferay 6.1 CE GA 2 我已将 portlet 添加到页面。最近我遇到了以下问题：

当我单击选项 > 外观时，我收到“您没有访问此 portlet 所需的角色”。

但是我使用的是管理员帐户，那怎么可能？让我知道是否有任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T09:13:28.200

我曾经面对过它，因此把东西放在下面`portal-ext.properties`，它开始工作了。此外，删除一次 portlet 并重新配置它。

```
theme.css.fast.load=true
theme.images.fast.load=true
javascript.fast.load=true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T02:53:43.557

这是一个老问题，但我认为这个答案可能对其他人有所帮助，因为很难弄清楚。我遇到了同样的问题，发现它是由更改`portlet.add.default.resource.check.whitelist`portal-ext.properties 中的属性值引起的。不知何故，修改此列表使我无法访问任何 portlet 的外观菜单，我总是收到“您没有访问此 portlet 所需的角色”错误。在注释掉`portlet.add.default.resource.check.whitelist`我能够再次访问外观菜单。我的主题中有一个嵌入式 portlet，需要在这个白名单上，所以我担心如果我重新添加属性，外观菜单会被破坏，但显然 Liferay 只是缓存无效权限并删除属性清除了它们，因为我能够重新添加属性并重新启动服务器，一切正常。

# c++ - 预期指针错误向量的迭代器；

> ID：13897200
> 
> 赞同：4
> 
> 时间：2012-12-15T23:33:15.607
> 
> 标签：c++, templates, stl, vector, iterator

我正在使用一个指针向量来创建一个数据结构，并发现我收到了一个似乎不清楚的错误。这是头文件中的基本代码

```
#include <vector>  
using namespace std;  
template <typename Key, typename Value>  
class ST{  
    class STNode{  
    public:  
        STNode(Key k, Value v) : key(k), value(v){}  
        ~STNode(){}  
        Key key;  
        Value value;  
    };  
typedef typename ST<Key, Value>::STNode Node;  
public:  
    ST():v(NULL) {v = new vector<Node*>();}  
    ~ST(){  
        // vector contains allocated objects  
        for(vector<Node*>::iterator it = v->begin(); it != v->end(); ++it)  
        delete (*it);  
        delete v;  
    }  
private:  
    vector<Node*>* v;  
}; 
```

我在 g++ 4.6.6 版上收到的错误消息是

```
ST.h: In destructor 'ST<Key, Value>::~ST()':  
ST.h:20: error: expected ';' before 'it'  
ST.h:20: error 'it' was not declared in this scope 
```

我尝试删除 for 循环，并尝试声明迭代器并获取范围错误。我的搜索表明，这通常归因于内部类末尾缺少分号或内部类中缺少公共存在，但事实并非如此。指针向量的迭代器是否需要特殊声明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:41:39.753

您正在遭受 C++ 语言的一个有趣的怪癖。您需要添加一个`typename`迭代器 ( `typename vector<Node*>::iterator it`) 的声明。更多信息可以在问题中找到[为什么我需要在 g++ 中使用 typedef typename 而不是 VS？](https://stackoverflow.com/questions/642229/why-do-i-need-to-use-typedef-typename-in-g-but-not-vs)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T23:45:02.967

您需要添加 typedef`vector<Node*>::iterator`因为它是一个`dependent name`依赖于模板的模板参数。

```
for(typename vector<Node*>::iterator it = v->begin(); it != v->end(); ++it) 
```

# python - 在python中创建一个匿名类实例

> ID：13897205
> 
> 赞同：24
> 
> 时间：2012-12-15T23:34:10.020
> 
> 标签：python, instance, anonymous-types

有时我需要在 python 中创建一个匿名类实例，就像 c# 一样：

```
var o= new {attr1="somehing", attr2=344}; 
```

但在python中我这样做：

```
class Dummy: pass
o = Dummy()
o.attr1 = 'something'
o.attr2 = 344
#EDIT 1
print o.attr1, o.attr2 
```

如何在单个语句中以 pythonic 方式做到这一点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-15T23:43:16.587

```
o = type('Dummy', (object,), { "attr1": "somehing", "attr2": 344 }) 
```

```
o.attr3 = "test"
print o.attr1, o.attr2, o.attr3 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-02-04T10:38:48.537

## 类型

虽然这不完全是一个单一的陈述，但我认为围绕已接受答案的魔力创建一个包装器使其更具可读性。

```
import inspect 

# wrap the type call around a function 
# use kwargs to allow named function arguments
def create_type(name, **kwargs):
    return type(name, (object,), kwargs)

# example call to make a structure
p = create_type('foobar', xxx='barfoo', seti=0)

assert p.xxx == 'barfoo'
assert p.seti == 0

print inspect.getmembers(p) 
```

**输出**

```
[('__class__', <type 'type'>),
 ('__delattr__', <slot wrapper '__delattr__' of 'object' objects>),
 ('__dict__', <dictproxy object at 0x9a5050>),
 ('__doc__', None),
 ('__format__', <method '__format__' of 'object' objects>),
 ('__getattribute__', <slot wrapper '__getattribute__' of 'object' objects>),
 ('__hash__', <slot wrapper '__hash__' of 'object' objects>),
 ('__init__', <slot wrapper '__init__' of 'object' objects>),
 ('__module__', '__main__'),
 ('__new__', <built-in method __new__ of type object at 0x399c578460>),
 ('__reduce__', <method '__reduce__' of 'object' objects>),
 ('__reduce_ex__', <method '__reduce_ex__' of 'object' objects>),
 ('__repr__', <slot wrapper '__repr__' of 'object' objects>),
 ('__setattr__', <slot wrapper '__setattr__' of 'object' objects>),
 ('__sizeof__', <method '__sizeof__' of 'object' objects>),
 ('__str__', <slot wrapper '__str__' of 'object' objects>),
 ('__subclasshook__', <built-in method __subclasshook__ of type object at 0x919370>),
 ('__weakref__', <attribute '__weakref__' of 'foobar' objects>),
 # here they are
 ('seti', 0),
 ('xxx', 'barfoo')] 
```

## 命名元组

```
from collections import namedtuple

d = { 'a' : 'foo', 'b' : 'bar' }
foobar = namedtuple('foobar', d.keys())(**d)
print foobar 
```

**输出**

```
Python 2.7.5 (default, May 30 2013, 16:55:57) [GCC] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from collections import namedtuple
>>> d  =  { 'a' : 'foo', 'b' : 'bar' }
>>> foobar = namedtuple('foobar', d.keys())(**d)
>>> print foobar
foobar(a='foo', b='bar')
>>> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-11-30T17:44:27.123

如果您使用的是 Python 3.3 或更高版本，则可以使用[types.SimpleNamespace](https://docs.python.org/3/library/types.html#types.SimpleNamespace)：

```
from types import SimpleNamespace

o = SimpleNamespace(attr1="something", attr2=344)
print(o)

# namespace(attr1='something', attr2=344) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-15T23:39:36.103

```
class attrdict(dict):
    def __getattr__(self, key):
        return self[key]

o = attrdict(attr1='something', attr2=344)

o.attr1 
```

但似乎您应该只使用标准字典。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-15T23:43:19.533

我更喜欢 mwhite 的 dict 答案，但这是我过去使用 kwargs 的“魔法”（双关语）的方式。

```
class ObjectFromDict(object):
    def __init__(**kwargs):
        for k in kwargs:
            if k not in self.__dict__:
                setattr(k,v)

myObj = ObjectFromDict(**{'foo': 'bar', 'baz': 'monkey'})
print myObj.foo #bar 
```

# asp.net - web.config 404 中的 customErrors 有效，404.0 无效

> ID：13897206
> 
> 赞同：0
> 
> 时间：2012-12-15T23:34:15.297
> 
> 标签：asp.net, asp.net-mvc, iis, asp.net-mvc-4, web-config

我已经设置了自定义 404 并且可以正常工作。但是当我尝试访问一些不存在的文件时，它显示了很好的 ASP.NET 404.0 错误页面。

我尝试添加`<error statusCode="404.0" redirect="/notfound/?" />`，但它不起作用，因为它`statusCode`应该是整数。

## 例子

`http://localhost:123/das/dsagfdsa`将重定向到`http://localhost:123/notfound/?` `http://localhost:123/das/dsagfdsa.png`将保留并显示`404.0`错误。

## 自定义错误部分

```
<customErrors mode="On" redirectMode="ResponseRedirect" defaultRedirect="/notfound/?">
    <error statusCode="404" redirect="/notfound/?" />
</customErrors> 
```

## 问题

我如何确保它不仅会重定向到`/notfound/`错误的页面请求，还会重定向到错误的文件请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:16:09.927

您必须在 IIS 中进行配置。默认情况下，只有特定文件将通过 ASP.NET 框架进行路由，否则 IIS 将处理它（配置如下 IIS 的“错误页面”部分所示）。

或者，您也可以配置 ASP.NET 来处理其他文件类型。有关这方面的更多信息，请阅读[Handler Mappings](http://technet.microsoft.com/en-us/library/cc771240%28v=ws.10%29.aspx)。

![在此处输入图像描述](../Images/a4c59f7196508ff62b5b59ff5901d7e3.png)

# actionscript-3 - 如何在 Flash Builder 中使用 TLFTextField？

> ID：13897209
> 
> 赞同：2
> 
> 时间：2012-12-15T23:35:11.867
> 
> 标签：actionscript-3, flash, flash-builder

我尝试在 Flash Builder 中使用 TLFTextField 对象，用代码对其进行实例化，但由于某种原因，Flash builder 无法识别 fl.text 命名空间，并且不会从 fl.* 或 flashx.* 导入任何内容

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:14:23.007

您需要将 TLF 运行时库包含到您的项目中。它位于此处：

`[Flash Application Directory]/Common/Configuration/ActionScript 3.0/libs/tlfRuntime.swc`

我会将该 SWC 复制到您的项目目录（如果有，则在您的文件夹下），然后在项目属性中*库路径下的**ActionScript 构建路径*部分`libs`中指向它。

 **完成此操作后，该`fl.text.TLFTextField`课程将在您的项目中提供给您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-21T10:01:26.900

除了 tlfRuntime.swc，您可能还需要包含“textLayout.swc”，其中包含 TLFTextField 的重要类。

在 CC 中对 TLFTextfield 的支持已被删除。您可能需要安装 Flash Professional CS6 才能找到上述 SWC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T02:26:36.430

确保项目属性/编译器选项中的目标是 Flash 10 或更高版本。如果您以较低版本的 Flash 为目标，则 IDE 将不包含 TLF 类。**

# azure - 我需要做些什么来保持与 Azure DB 的连接？

> ID：13897213
> 
> 赞同：0
> 
> 时间：2012-12-15T23:35:31.543
> 
> 标签：azure, database-connection, ip-address, azure-sql-database, linqpad

我已经能够通过 LINQPad 连接到我的 SQL DB，但是今天我在连接上得到了可怕的红色 x 标记，并且提示/工具提示告诉我尝试连接的 IP 地址是不受欢迎的。

我估计我的 IP 地址可能是动态的，原来设置的 IP 地址已被新的 IP 地址取代。如果我是对的，那么我肯定不必根据我的 IP 地址在每次更改时碰巧创建新连接......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:44:32.013

在 Azure 中，您需要将防火墙配置为接受连接。如果你为你的开发机器获得了一个新的 IP，你需要重新配置防火墙。您无需更改连接字符串。

如果你经常得到一个新的IP。做这样的[事情](http://codemares.blogspot.se/2012/06/update-azure-db-firewall-rules-with.html)来自动更新防火墙。

# emacs - 让 emacs 使用真正的制表符来缩进每种语言

> ID：13897225
> 
> 赞同：2
> 
> 时间：2012-12-15T23:37:24.960
> 
> 标签：emacs

我想让 emacs 使用真正的制表符对每种语言进行缩进，并希望制表符的宽度约为 4 个空格（但要成为真正的制表符，就像在 vim 中一样）。我尝试使用 .emacs ：

```
(setq tab-width 4)
(setq-default indent-tabs-mode t) 
```

什么都没有发生：emacs 在 C/C++ 中继续缩进 2 个空格，在 Python 中缩进 8 个制表符！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:25:36.777

`c-mode`覆盖了相当多的 Emacs 默认行为，包括缩进。您可以在这里阅读更多内容：[http](http://www.gnu.org/software/emacs/manual/html_mono/ccmode.html#Indentation-Engine-Basics) ://www.gnu.org/software/emacs/manual/html_mono/ccmode.html#Indentation-Engine-Basics 。这意味着您可能希望设置`c-syntactic-indentation`为`nil`以释放所有缩进的好处`c-mode`（无论其他 Emacs 设置如何，它都可以插入任意数量的空格）。

也许，您的另一种方法可能是`c-mode`专门修补以按照您的意愿行事。在这种情况下：[http](http://www.emacswiki.org/emacs/IndentingC#toc3) ://www.emacswiki.org/emacs/IndentingC#toc3应该会有所帮助。

PS。我几乎不用 C 语言编写，所以我不知道没有默认行为会有多少好/坏。我很高兴总是使用空格，而不是制表符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:45:09.910

的值`tab-width`不会改变编程语言模式用于缩进代码的列数量。该值仅表示转换为一个制表符需要多少个空格字符，以及如何显示制表符。

列中的缩进偏移量是按语言设置的。例如，对于 C，设置`c-basic-offset`为 4。对于 Python，设置`python-indent-offset`. 不过，默认情况下它已经是 4 了。

除此之外，您可能需要替换`(setq tab-width 4)`为`(setq-default tab-width 4)`. 这也是一个缓冲区局部变量。

# android - 在cygwin中使用NDK构建项目

> ID：13897227
> 
> 赞同：2
> 
> 时间：2012-12-15T23:37:54.397
> 
> 标签：android, eclipse, android-ndk, cygwin

这是我配置项目所遵循的整个过程：

- 下载 android-ndk-r8b

-将我的项目导入到 Eclipse 工作区，即 tesseract-ocr

-将 tess-two 项目导入到包含本机代码的 Eclipse 中。它有一些文件夹，一个是 jni，有 android.mk 和 application.mk

- 下载并安装 cygwin，要求使用 ndk。

我的 EclipseProjects 工作区存在于驱动器 c 中，而 android-ndk-r8b 也在 c 驱动器中，我打开 cygwin。在终端上写入以下命令

```
/cygdrive/c/EclipseProjects/tess-two-master/tess-two/jni 
```

这让我进入这个目录：

```
Haris Riaz@HarisRiaz-PC /cygdrive/c/EclipseProjects/tess-two-master/tess-two/jni 
```

现在我编写以下命令：

```
$ /cygdrive/c/android-ndk-r8b/ndk-build 
```

从我的角度来看，我认为一切都是针尖的仍然 cygwin 终端说：

```
-bash: /cygdrive/c/android-ndk-r8b/ndk-build: No such file or directory 
```

而不是构建 myproject！和body请告诉我是否遗漏了什么以及构建项目后我会做什么！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T14:29:33.977

它可能指向 PATH 环境变量中的另一个 bash.exe。检查您的 PATH 环境变量，以获取可能的 bash.exe 包括，如 git 安装。cygwin\bin 应该是第一位的。

# android - 着色器属性 mat4 未正确绑定（Opengl ES 2.0 Android）

> ID：13897232
> 
> 赞同：2
> 
> 时间：2012-12-15T23:38:30.687
> 
> 标签：android, opengl-es-2.0, glsl

我有以下着色器：

```
protected final static String vertexShaderCode =
    "attribute vec4 vPosition;" +
    "attribute vec2 texCoord;" +
    "attribute mat4 uMVPMatrix;   \n" +

    "varying vec2 vTexCoord;" +

    "void main() {" +
    "  gl_Position = uMVPMatrix * vPosition;" +
    "  vTexCoord = texCoord;" +
    "}"; 
```

我想将 mvp 矩阵作为属性传递，但它似乎没有正确绑定。我正在使用自动分配的绑定。当我在链接程序后查询属性位置时，如下所示：

```
// program linked previously
GLES20.glUseProgram(program);
GLES20.glEnable(GLES20.GL_TEXTURE_2D);

GLES20.glEnable(GLES20.GL_BLEND);
mPositionHandle = GLES20.glGetAttribLocation(program, "vPosition");
mTextureHandle = GLES20.glGetAttribLocation(program, "texCoord");
mtextureSampHandle = GLES20.glGetAttribLocation(program, "textureSamp");
mMVPMatrixHandle = GLES20.glGetAttribLocation(program, "uMVPMatrix"); 
```

返回的句柄是：

mTextureHandle: 0

mMVP矩阵句柄：1

mPositionHandle：2

然而，从这里的文档：[http](http://www.khronos.org/opengles/sdk/docs/man/xhtml/glBindAttribLocation.xml) ://www.khronos.org/opengles/sdk/docs/man/xhtml/glBindAttribLocation.xml ， mMVPMatrixHandle 应该分配 4 个连续的句柄，一个用于矩阵的每一列（即 mMVPMatrix 应该有手柄 1,2,3,4)。事实并非如此，我不知道为什么...

结果，我无法在屏幕上绘制任何东西。为了完整起见，我尝试按如下方式加载矩阵：

```
 GLES20.glVertexAttribPointer(mMVPMatrixHandle2, 4, GLES20.GL_FLOAT, false, 0, t1);
    GLES20.glVertexAttribPointer(mMVPMatrixHandle2 + 1, 4, GLES20.GL_FLOAT, false, 0, t2);
    GLES20.glVertexAttribPointer(mMVPMatrixHandle2 + 2, 4, GLES20.GL_FLOAT, false, 0, t3);        
    GLES20.glVertexAttribPointer(mMVPMatrixHandle2 + 3, 4, GLES20.GL_FLOAT, false, 0, t4); 
```

其中 t1-t4 是包含 mvp 矩阵各行的缓冲区：

```
{
    1.74f, 0, 0, 0,
    0, 2.9f, 0, 0,
    0, 0, -2.414f, -1f,
    -2.088f, 0, -2.66f, 3
} 
```

当我将 uMVPMatrix 定义为统一 mat4 并使用 glUniformMatrix4fv 加载它时，它会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:24:43.807

原来问题不在于我的卡，而在于手机。在三星 Galaxy S2 上试用时，属性已正确分配，并且按预期工作。

有问题的手机是 HTC Incredible S，它有一个 Adreno 205 显卡。我想电话/显卡上的 Opengl 实现一定有问题。一种解决方案可能是将矩阵定义为着色器中的四个 vec4，并逐个元素计算位置。

# mysql - Mysql程序选择下一个日期

> ID：13897237
> 
> 赞同：1
> 
> 时间：2012-12-15T23:39:19.167
> 
> 标签：mysql, stored-procedures

我正在使用 MySQL 程序来获取商店营业时间内的营业日期。

我的商店有不同的送货/取货时间（delivery_type）。此外，我使用整数参数（偏移量）来增加当前时间，以防商店真的很忙。只能在当天考虑偏移量。

营业时间在表 *shop_hours* 中定义为与星期几 (1-7) 匹配的一条记录。为了增加一些灵活性，我有一个单独的表 *shop_hours_special* 用于特殊日期。此表会否决 shop_hours 中定义的任何开/关时间。*shop_hours_special* 定义为一年中的某一天。

**我的问题：**

1.  调用 nextDate(2, 9999999);

这将返回 2012-12-16（即今天的 UTC+1），但偏移参数非常高，以至于它应该推到下一个开放日期，例如 2012-12-17 星期一。

1.  调用 nextDate(1,0);

如果店铺今天有营业时间，但还没到营业时间，则返回下一个营业日，但确实应该返回今天的日期。

有人可以帮忙吗，我做错了什么？

* * *

**PHP函数：**

```
public function get_next_open_date($delivery_type, $offset = 0) {

    $sql = 'CALL nextDate('.$delivery_type.','.$offset.');';
    $date = $this->app['db']->fetchAssoc($sql);

    return date('Y-m-d', strtotime($date['final_date']));
} 
```

**MySQL程序：**

```
DROP PROCEDURE IF EXISTS `nextDate`;
DELIMITER $$
CREATE PROCEDURE `nextDate`(IN dType TINYINT(3), IN dOffset INT)
BEGIN

    DECLARE CURTIME TIME;
    DECLARE final_date DATE;
    DECLARE match_found, closed_day BOOLEAN;
    DECLARE dYear, dWeek, dayYear, dayWeek, contor INT;

    SET contor = 0;
    SET match_found = TRUE;
    SET dayYear = DAYOFYEAR(NOW());
    SET dayWeek = WEEKDAY(NOW()) + 1;
    SET dYear = -1;
    SET dWeek = -1;
    SET CURTIME = ADDTIME(TIME(NOW()),SEC_TO_TIME(dOffset));

    WHILE match_found DO

        SET closed_day = FALSE;
        IF contor = 0 THEN
            SELECT IFNULL(a.day_of_year, -1), IF(open_time = MAKETIME(0,0,0) AND close_time = MAKETIME(0,0,0), TRUE, FALSE) INTO dYear, closed_day
                FROM shop_hours_special a
                WHERE a.`type` = dType AND a.day_of_year = dayYear
                    AND (CURTIME BETWEEN a.open_time AND a.close_time OR (open_time = MAKETIME(0,0,0) AND close_time = MAKETIME(0,0,0)));       

            SELECT IFNULL(b.day_of_week, -1) INTO dWeek
                FROM shop_hours b
                WHERE b.`type` = dType AND b.day_of_week = dayWeek AND (b.open_time != MAKETIME(0,0,0) OR b.close_time != MAKETIME(0,0,0)) AND CURTIME BETWEEN b.open_time AND b.close_time ;

        ELSE
            SELECT IFNULL(a.day_of_year, -1), IF(open_time = MAKETIME(0,0,0) AND close_time = MAKETIME(0,0,0), TRUE, FALSE) INTO dYear, closed_day
                FROM shop_hours_special a
                WHERE a.`type` = dType AND a.day_of_year = dayYear;

            SELECT IFNULL(b.day_of_week, -1) INTO dWeek
                FROM shop_hours b
                WHERE b.`type` = dType AND b.day_of_week = dayWeek AND (b.open_time != MAKETIME(0,0,0) OR b.close_time != MAKETIME(0,0,0));
        END IF;

        IF closed_day THEN
            SET dYear = -1;
            SET dWeek = -1;
        END IF;     

        IF dYear != -1 THEN
            SET final_date = MAKEDATE(YEAR(NOW()), dYear);
            SET match_found = FALSE;

        ELSEIF dWeek != -1 THEN

            SET final_date = NOW() + INTERVAL contor DAY;
            SET match_found = FALSE;

        ELSE
            SET contor = contor + 1;
            SET dayYear = DAYOFYEAR(NOW() + INTERVAL contor DAY);
            SET dayWeek = WEEKDAY(NOW() + INTERVAL contor DAY) + 1; 

        END IF;

    END WHILE;

    SELECT final_date;

END$$

DELIMITER ; 
```

**样本数据：**

```
CREATE TABLE `shop_hours` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `shop_id` int(11) unsigned NOT NULL,
  `type` tinyint(3) NOT NULL DEFAULT '1',
  `day_of_week` int(11) NOT NULL,
  `open_time` time NOT NULL,
  `close_time` time NOT NULL,
  PRIMARY KEY (`id`),
  KEY `shop_id` (`shop_id`),
  CONSTRAINT `shop_hours_ibfk_1` FOREIGN KEY (`shop_id`) REFERENCES `shops` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `shop_hours` (`id`, `shop_id`, `type`, `day_of_week`, `open_time`, `close_time`)
VALUES
    (1,1,1,1,'09:30:00','20:00:00'),
    (2,1,1,2,'09:30:00','20:00:00'),
    (3,1,1,3,'09:30:00','20:00:00'),
    (4,1,1,4,'09:30:00','20:00:00'),
    (5,1,1,5,'09:30:00','20:00:00'),
    (6,1,1,6,'09:30:00','20:00:00'),
    (7,1,1,7,'11:00:00','20:00:00'),
    (8,1,2,1,'11:30:00','12:30:00'),
    (9,1,2,2,'11:30:00','12:30:00'),
    (10,1,2,3,'11:30:00','12:30:00'),
    (11,1,2,4,'11:30:00','12:30:00'),
    (12,1,2,5,'11:30:00','12:30:00'),
    (13,1,2,6,'00:00:00','00:00:00'),
    (14,1,2,7,'00:01:00','23:00:00');

CREATE TABLE `shop_hours_special` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `shop_id` int(11) unsigned NOT NULL,
  `type` tinyint(3) NOT NULL DEFAULT '1',
  `day_of_year` int(11) NOT NULL,
  `open_time` time NOT NULL,
  `close_time` time NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `unique` (`shop_id`,`type`,`day_of_year`),
  KEY `shop_id` (`shop_id`),
  CONSTRAINT `shop_hours_special_ibfk_1` FOREIGN KEY (`shop_id`) REFERENCES `shops` (`id`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `shop_hours_special` (`id`, `shop_id`, `type`, `day_of_year`, `open_time`, `close_time`)
VALUES
    (1,1,1,1,'00:00:00','00:00:00'),
    (2,1,1,92,'00:00:00','00:00:00'),
    (3,1,1,96,'00:00:00','00:00:00'),
    (4,1,1,97,'00:00:00','00:00:00'),
    (5,1,1,99,'00:00:00','00:00:00'),
    (6,1,1,100,'00:00:00','00:00:00'),
    (7,1,1,125,'00:00:00','00:00:00'),
    (8,1,1,138,'00:00:00','00:00:00'),
    (9,1,1,148,'00:00:00','00:00:00'),
    (10,1,1,149,'00:00:00','00:00:00'),
    (11,1,2,1,'00:00:00','00:00:00'),
    (12,1,2,92,'00:00:00','00:00:00'),
    (13,1,2,96,'00:00:00','00:00:00'),
    (14,1,2,97,'00:00:00','00:00:00'),
    (15,1,2,99,'00:00:00','00:00:00'),
    (16,1,2,100,'00:00:00','00:00:00'),
    (17,1,2,125,'00:00:00','00:00:00'),
    (18,1,2,138,'00:00:00','00:00:00'),
    (19,1,2,148,'00:00:00','00:00:00'),
    (20,1,2,149,'00:00:00','00:00:00'); 
```

# php - 将图像附件添加到 PHP 消息系统？

> ID：13897240
> 
> 赞同：0
> 
> 时间：2012-12-15T23:39:26.073
> 
> 标签：php, mysql

> **可能重复：**
> [如何使用 php 在邮件中附加和显示图像？](https://stackoverflow.com/questions/1606588/how-to-attach-and-show-image-in-mail-using-php)

我目前在我的网站上设置了一个简单的 php 消息传递系统，供用户向其他用户发送消息。我想知道是否有一种方法可以在消息中包含图像附件，如果可以，我将如何去做。

这是我的代码，它允许用户发送新消息。

```
<?php 
// CONNECT TO THE DATABASE
    require('includes/_config/connection.php');
// LOAD FUNCTIONS
    require('includes/functions.php');
// GET IP ADDRESS
    $ip_address = $_SERVER['REMOTE_ADDR'];

?>

<?php require_once("includes/sessionframe.php"); ?>

<?php
confirm_logged_in();

    if (isset ($_GET['to'])) {
    $user_to_id = $_GET['to'];

} ?> 

<?php 
//We check if the form has been sent
if(isset($_POST['subject'], $_POST['message_content']))
{
    $subject = $_POST['subject'];
    $content = $_POST['message_content'];
        //We remove slashes depending on the configuration
        if(get_magic_quotes_gpc())
        {
                $subject = stripslashes($subject);
                $content = stripslashes($content);
        }
        //We check if all the fields are filled
        if($_POST['subject']!='' and $_POST['message_content']!='')
        {
            $sql = "INSERT INTO ptb_messages (id, from_user_id, to_user_id, subject, content) VALUES (NULL, '".$_SESSION['user_id']."', '".$user_to_id."', '".$subject."', '".$content."');";
            mysql_query($sql, $connection);

            echo "<div class=\"infobox2\">The message has successfully been sent.</div>";
        }
}

if(!isset($_POST['subject'], $_POST['message_content']))

if (empty($_POST['subject'])){
        $errors[] = 'The subject cannot be empty.';

    if (empty($_POST['body'])){
        $errors[] = 'The body cannot be empty.';

    }
    }

{
?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" method="post">
  <input name="subject" type="text" id="subject" placeholder="Subject">
    <textarea name="message_content" id="message_content" cols="50" placeholder="Message" rows="8" style="resize:none; height: 100px;"></textarea>
    <input type="image" src="assets/img/icons/loginarrow1.png" name="send_button" id="send_button" value="Send">
</form>
<?php } ?> 
```

# asp.net-mvc - 如何允许客户网站与我的网站进行交互

> ID：13897241
> 
> 赞同：0
> 
> 时间：2012-12-15T23:39:28.480
> 
> 标签：asp.net-mvc

我的 MVC 应用程序允许用户创建采访。现在，为了让用户进行采访，他们可以与我的网站进行交互以开始采访。但我也想提供一种机制，允许我的用户从他们自己的网站开始采访。

因此，我的应用程序为每个面试分配了一个唯一的字符串标识符，我的客户可以查看（通过安全网页）。我的计划是有一个 HTTPS URL，我的客户可以向其发布，其中包含他们想要开始的采访的标识符的 POST 数据，以及一些告诉我如何将采访结果返回给他们的辅助数据。（在 POST 数据中包含数据允许 HTTPS 魔法保护数据不被窥探——我希望如此。）

这个方案完全是由一个实际 Web 编程经验为零的人（那就是我）构想出来的，所以我想征求那些真正知道如何做这类事情的人的反馈。有没有一种“标准”的方式来做这种事情？有点像网站如何转向 PayPal？

鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:28:59.467

您可以创建一种脚本 (javascript) 来呈现 iFrame，该 iFrame 在 ASP.NET MVC 中包含来自您的 Web 应用程序的某些视图。

这样，您客户的网站就不需要采用给定的技术。

检查[ECWID](http://www.ecwid.com/)与其他网站的集成方式……仅使用一些 HTML/JS 代码。

# asp.net-mvc-3 - 自定义 HTTP 错误 403.14 - 禁止错误视图

> ID：13897243
> 
> 赞同：1
> 
> 时间：2012-12-15T23:39:38.783
> 
> 标签：asp.net-mvc-3

如果您在资源管理器中输入目录以在资源管理器中浏览它，我的网站中有一个 mvc3 razor 网站，它会给您这个错误：

```
Error Summary
HTTP Error 403.14 - Forbidden
The Web server is configured to not list the contents of this directory. 
```

我该如何处理它，直到用户进入目录看到我的自定义错误页面而不是 iis 错误页面我用谷歌搜索但找不到任何解决方案我的情况下我在 web.config 中有这行

```
<validation validateIntegratedModeConfiguration="false" />
<modules runAllManagedModulesForAllRequests="true" /> 
```

和

```
 <customErrors  defaultRedirect="/CustomErrors/FileNotFound.htm" mode="RemoteOnly">
  <error  statusCode="404" redirect="/CustomErrors/FileNotFound.htm" />
  <error statusCode="500" redirect="/CustomErrors/FileNotFound.htm"  />
</customErrors> 
```

但不起作用

谢谢大家

# opengl - 如何获得硬边 - OpenGL

> ID：13897244
> 
> 赞同：2
> 
> 时间：2012-12-15T23:39:58.090
> 
> 标签：opengl, glsl, edges

我怎样才能在我的地形上获得坚硬的边缘。我在 GLSL 中有一个简单的环境和漫反射着色器。我认为片段着色器正在插入顶点法线并导致平滑着色。你们需要我的代码还是我可以启用一些设置？

当前没有硬边的地形：http: [//twirlbound.com/uploads/terin.png](http://twirlbound.com/uploads/terain.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T00:17:45.383

在您的顶点着色器中，执行以下操作：

```
flat out vec3 v_normal; 
```

在您的片段着色器中，如下所示：

```
flat in vec3 v_normal; 
```

`flat`告诉 GL 为三角形栅格化的所有片段赋予相同的值。使用哪个顶点的法线取决于当前的“激发顶点”，通过调用设置`glProvokingVertex`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:47:21.283

要获得您要求的硬边，您需要指定垂直于三角形方向的每个三角形法线。为此，您需要将它们作为三角形发送，与四边形或类似的相对。

您还应该在绘图程序之前设置以下内容以获得平坦的阴影。

```
glEnable(GL_FLAT);
glShadeModel(GL_FLAT); 
```

您可以在使用后将阴影设置为平滑

```
glEnable(GL_SMOOTH);
glShadeModel(GL_SMOOTH); 
```

# python - python时间减法

> ID：13897246
> 
> 赞同：16
> 
> 时间：2012-12-15T23:40:44.460
> 
> 标签：python, time

我想花时间在 Python 上。有`time.ctime()`很多功能：

我试过：

```
def write_time():  
  NUMBER_OF_MIN=40 #my offset
  obj=time.gmtime()
  print  " D", obj.tm_mday, " M",obj.tm_mon,  "Y",obj.tm_year, 
  " time", obj.tm_hour+TIME_OFFSET,":",   obj.tm_min-NUMBER_OF_MIN, ":",obj.tm_sec 
```

我想从时间中减去 40 分钟。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-12-15T23:42:53.790

查看[`datetime`](http://docs.python.org/2/library/datetime.html)库，它为使用日期的数学提供了更大的灵活性。

例如：

```
import datetime
print datetime.datetime.now()
print datetime.datetime.now() - datetime.timedelta(minutes=2)
print datetime.datetime.now() - datetime.timedelta(seconds=10)
print datetime.datetime.now() - datetime.timedelta(milliseconds=400) 
```

印刷：

```
el@dev ~ $ python test.py
2014-11-26 06:47:07.179411
2014-11-26 06:45:07.179538
2014-11-26 06:46:57.179581
2014-11-26 06:47:06.779614 
```

# php - 应用程序在浏览器中超时但不在命令行中

> ID：13897249
> 
> 赞同：1
> 
> 时间：2012-12-15T23:41:00.027
> 
> 标签：php, mysql, codeigniter, shell

我正在使用 CodeIgniter 和 MySQL 构建一个 Web 应用程序。我对此感到困惑：

我有一个 MySQL 视图，它汇集了 3 个表，其中一个表有大约 600,000 行数据。在这个视图中，我提出以下查询：

```
SELECT *, AVG(value_avg) hourly_value_avg, AVG(count) hourly_count_avg, (AVG(value_avg) * AVG(count)) hourly_time_consumed FROM (`perf_view`) GROUP BY `event_id` 
```

通过 MySQL 客户端大约需要 5 秒才能得出 30 个结果，通过命令行，调用执行查询的确切控制器和方法，时间大致相同，问题是，当我在浏览器中点击页面时，我收到以下错误：

```
Error Number: 2013
Lost connection to MySQL server during query 
```

阅读这个错误，我发现它可能是客户端错误，即 PHP 超时，而不是数据库。有点迷茫，有没有人遇到过同样的问题？

我真的很感激我能得到的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:38:31.070

在您的控制器构造函数或任何函数中，您可以尝试通过 codeigniters 框架扩展脚本使用的时间和内存。可以使用以下命令设置这些内容。

```
set_time_limit(0);     // set the execution time to any time. in my case infinite time
ini_set('memory_limit', '256M');      // set the memory use to whatever here 256 megs 
```

您的情况听起来可能是内存问题。600,000 条记录很容易超出 PHP 配置或 codeigniter 配置中的内存限制。两者通常都设置得很低，如果您的 600,000 条记录查询返回包含许多列的表的相当大块，我可以看到值得检查的内存限制问题。祝你好运。

# java - 语言环境：Eclipse 与 jar

> ID：13897251
> 
> 赞同：0
> 
> 时间：2012-12-15T23:41:09.810
> 
> 标签：java, eclipse, localization, locale, resourcebundle

这是一个非常简单的问题，我只是不明白。

我使用`messages.properties`文件和`Messages`类（由 Eclipse 生成）进行本地化。我有这个代码：

```
public class LocaleTest {

    public static void main(String[] args) {
        System.out.println(Messages.getString("LocaleTest.LocaleTestMessage")); //$NON-NLS-1$
    }

} 
```

还有两个属性文件：

**消息属性**

> LocaleTest.LocaleTestMessage=这是语言环境测试。

**messages_es.properties**

> LocaleTest.LocaleTestMessage=Esta es la prueba de locales。

和文件由 Eclipse 的“Externalize Strings”函数（`messages.properties`Source *→* Externalize *Strings...*）创建。`Messages.java`

 **当我在 Eclipse 中（通过标准`Ctrl`+ `F11`）在西班牙语系统上运行它时，它会按预期显示“Esta es la prueba de locales”。但是当我使用默认选项导出到 .jar 并从命令行运行时，它会打印“这是语言环境测试”。

在 GUI 应用程序中，整个应用程序始终使用主要语言（来自 的字符串`messages.properties`）。

我知道文件正在正确导出，因为如果我将以下内容添加到消息类的顶部，它就可以工作：

```
static {
    Locale.setDefault(new Locale("es"));
} 
```

如此处所述，我已将“非 unicode 程序的默认语言”设置为“西班牙语[”](http://java.com/en/download/help/locale.xml)。

那么，为什么会发生这种情况，我该如何解决呢？

**编辑**：打印`Locale.getDefault().getLanguage()`从命令行产生“英语”。在 Eclipse 中，它打印“español”。**

# image - 图片未显示在安全页面上？

> ID：13897259
> 
> 赞同：-2
> 
> 时间：2012-12-15T23:42:46.633
> 
> 标签：image, wordpress, ssl

这是我正在处理的页面：

[http://www.texashredderclassic.com/registration](http://www.texasshredderclassic.com/registration)

标题区域应该看起来像在这个页面上：

[http://texashredderclassic.com/contact-us/](http://texasshredderclassic.com/contact-us/)

我假设这与我们在注册页面上强制使用 SSL 的事实有关？关于如何显示这些图像的任何想法，还是我需要提供更多信息？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T23:46:47.567

您的图片位于[https://texasshredderclassic.com/wp-content/uploads/2012/11/TexasShredderClassicLogo3.png](https://texasshredderclassic.com/wp-content/uploads/2012/11/TexasShredderClassicLogo3.png)

如果单击该链接，您会发现问题在于您的 SSL 证书仅对**www** .texasshredderclassic.com 有效，对 texasshredderclassic.com 无效。

# android - Android扩展适配器与扩展BaseAdapter

> ID：13897268
> 
> 赞同：1
> 
> 时间：2012-12-15T23:43:28.083
> 
> 标签：android, listview, adapter, baseadapter

我正在创建一个自定义 ListView，它将容纳具有不同布局的行（即标题和可点击项目）。我的自定义适配器类在 BaseAdapter 上扩展 Adapter 有什么特别的区别吗？看起来我需要在任何一种情况下覆盖相同的方法（getItem、getView...等）。有性能差异吗？或者，如果您调用 super.method()，是否会为您做一些实现？我知道 BaseAdapter 是 Adapter 的一个子类，但是你能从中得到什么额外的功能呢？

干杯，卢克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T23:47:13.530

> 看起来我需要在任何一种情况下覆盖相同的方法（getItem、getView...等）

如果从接口继承`BaseAdapter`而不是创建`Adapter`接口的完整实现，则必须实现更少的方法。例如，`BaseAdapter`手柄`registerDataSetObserver()`和`unregisterDataSetObserver()`为您服务。

> 有性能差异吗？

通常不会。

> 我了解 Adapter 是 BaseAdapter 的子类

绝对不。`Adapter`是一个接口，而不是一个类。`BaseAdapter`实现`Adapter`。

> 但是你能从中得到什么额外的功能呢？

您不会从 中获得任何“额外功能” `Adapter`，因为`Adapter`它是一个接口。

# php - 使用 imagemagick 调整图像大小并保持质量的替代方法

> ID：13897269
> 
> 赞同：1
> 
> 时间：2012-12-15T23:43:36.397
> 
> 标签：php, imagemagick, image-manipulation

我有以下代码，它使用 Imagemagick 来调整 PNG 图像的大小。

```
$im = new imagick("$file");
$im->thumbnailImage($newwidth, $newheight);
$im->writeImage($output); 
```

`thumbnailimage()`然而，据我所知，这会产生图像，这些图像的大小与 Imagemagick 在使用该方法时可以制作的一样小。

理想情况下，我想调整图像大小并保持输出图像的质量尽可能高，在这种情况下，文件大小对我来说并不是真正的问题。是否有其他方法可以让我调整 PNG 的大小并保持尽可能高的质量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T23:49:11.713

缩小图像会降低其质量是理所当然的。但是，您可以使用插值模拟该质量。

PHP 的 GD 扩展确实带有一个`imagecopyresampled`功能，但它不是最好的质量。但是，在 [评论] 中，我确实找到了一个有用的`imagecopyresampledbicubic`功能，它的质量应该比原生功能好得多。当然似乎值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:08:55.060

缩略图与调整大小相同，只是它会去除所有 EXIF 数据，使文件大小更小。

您可以添加 $im->setCompressionQuality( 100 ); 您可以尝试在调整大小时使用不同的滤镜，但这仅在某些图像上效果更好添加一些锐化 $im->unsharpMaskImage(0 , 0.5 , 1 , 0.05);

# ruby-on-rails - form_for [@nested, @resource], remote => true 响应 format.html rails 3.2.6

> ID：13897271
> 
> 赞同：7
> 
> 时间：2012-12-15T23:43:46.117
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.2, form-for, nested-form-for

无法让 ajax form_for 尊重 format.js respond_to 仅响应 format.html。非常感谢任何帮助。

**看法**

此视图由 AJAX 部分调用，然后用户提交表单。最初的 ajax 调用会混淆这种形式的“remote:true”吗？

```
<%= form_for([@nested, @nested.resources.new], remote: true) do |i|%>
  <%= i.hidden_field :inviter_id, value: current_user.id %>
  <%= i.hidden_field :fb_pic_url, value: f['pic_square'] %>
  <%= i.hidden_field :name, value: f['name'] %>
  <%= i.hidden_field :uid, value: f['uid'] %>
  <%= i.submit "Invite", class:"btn btn-success invite_button" %>
<% end %> 
```

**路线.rb**

```
resources :nested do 
  resources :resources
end 
```

**控制器**

```
def create
  code code code

  respond_to do |format|
    format.html { redirect_to @nested, notice: "Successfully Posted Nested" }
    format.json { render json: @nested, status: :created, location: @nested }
    format.js { render :nothing => true }
  end
end 
```

**create.js.erb** 存在但为空

**应用程序.html**

```
<%= javascript_include_tag "application" %>
<%= csrf_meta_tags %> 
```

**应用程序.js**

```
//= require jquery
//= require jquery_ujs 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-05T12:40:02.843

确保你有 rails 内置的非侵入式 jquery 插件，因为它负责使`remote: true`代码工作。

另外，如果要渲染模板，则`create.js.erb`需要将行保留为`format.js`没有块：

```
respond_to do |format|
  ...
  format.js
end 
```

除此之外，您是否使用其他响应格式？`json`和`html`？如果没有，请尽量避免放置它们。

# php - 在 wordpress 中提交表单的问题

> ID：13897273
> 
> 赞同：0
> 
> 时间：2012-12-15T23:44:50.423
> 
> 标签：php, wordpress

嘿，伙计，我创建了这个表格，它可以滑出，您可以与它联系，它位于标题中。出于某种原因，如果我提交它，它告诉我找不到页面 - 我创建了一个页面并给了它一个发送电子邮件的模板。如果我只是点击没有值的提交按钮，它会转到带有感谢信息的页面。

联系代码：

```
<div id="feedback"><!-- Sliding contact form ---->

        <form method="post" action="../contactformsubmit">
            <h2>Phone: 847-782-9816</h2>
            <p><label>Name: </label><input type="text" name="name"/></p>
            <p><label>Email: </label><input type="text" name="email"/></p>
            <p><label>Subject: </label><input type="text" name="subject"/></p>
            <p><label>Message: </label><textarea name="message"></textarea></p>
            <p><input type="submit" value="Send" class="btn"/></p>
        </form>
        <a href="#" class="pull_feedback" title="Click to leave feedback" ><img src=""/>Feedback</a>
</div>
<!-- end contact form --> 
```

模板代码：

```
<?php
/*
Template Name: formsubmit
*/
session_start();
get_header(); ?>
<style>
.item-post{
    margin: 0 0 1.625em;
    padding: 0 0 1.625em;
    position: relative;
    float: left;
    height: 365px;
    width: 100%;
    margin-left: 2%;

}
.singular .item-post{
    text-align:center;  
}
.singular.page .hentry {
    padding:0 0 0 0;
    width: 17%;
    margin-top:1em;
    //height: 405px;

}
.singular.page .hentry:hover{
    background: #C9191B;
}
.singular .entry-title {
    font-size: 15px;
    width: 100%;
    text-align: center;

}
.singular .entry-content {

    width:100%;

}
.singular .entry-header {

    width:100%;
    text-align:center;

}
.singular .discription {
    width: 80%;
    text-align: left;
    font-size: 12px;
    padding-left: 15%;
    height: 12%;
}
.singular .prodslideshow {
    display:none;   
}
.singular .pricing {
    padding-left: 15%;
}
</style>

        <div id="primary">

            <div id="content" role="main">
            <div class="thankyou" style="text-align:center; padding-top:1em; padding-bottom:1em;">
                    <h2>Thank you for contacting us!  We are here to make sure your time with us is a good one!  We will contact you as soon as we can.</h2>
                </div>
            <?php

            $message = $_POST['message'];
            $name = $_POST['name'];
            $email = $_POST['email'];
            $subject = $_POST['subject'];
            /*******SEND EMAIL**********/
                require_once "Mail.php";
                $body = "
Message from contact form!

$name
$email

$message
                ";
                // Send
                $from = "Contact Form ";
                //$to = "";
                $to = "";
                $host = "";
                $username = "";
                $password = "";

                $headers = array ('From' => $from,
                  'To' => $to,
                  'Subject' => $subject);
                $smtp = Mail::factory('smtp',
                  array ('host' => $host,
                    'auth' => true,
                    'username' => $username,
                    'password' => $password));

                $mail = $smtp->send($to, $headers, $body);

            ?>

            </div><!-- #content -->
        </div><!-- #primary -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T23:50:49.140

```
<form method="post" action="../contactformsubmit"> 
```

您需要确保操作 URL 正确指向您的表单。当前上面的一个正在查看contactformsubmit是否是联系表格上方的一个目录。它可能在同一个文件夹中，因此请尝试：

```
<form method="post" action="contactformsubmit"> 
```

另外，如果您打算进行扩展，我不知道您的特定 SEO 设置，但这也可能是您的意思：

```
<form method="post" action="contactformsubmit.php"> 
```

如果这些不起作用，请发布联系表单和联系表单提交的文件路径和全名，以便我们正确设置 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:10:39.050

因此，我能够解决我的问题，将顶部表单替换为`<p><label>Name: </label><input type="text" name="name"/></p>`并`<p><label>Email: </label><input type="text" name="email"/></p>`更改值。就是这样:) 我认为这是一个间距问题，所以这可能就是原因。

# jquery - 全屏 API 停止可拖动功能

> ID：13897276
> 
> 赞同：2
> 
> 时间：2012-12-15T23:45:14.977
> 
> 标签：jquery, api, bind, draggable, fullscreen

我使用 jQuery 全屏 API。在全屏模式下，我不能再拖动 div，下拉菜单也不起作用。再次绑定、附加或激活事件处理程序的正确方法是什么？

```
function drag()
{
    $("#info").draggable({ containment: "body"});
    $("#info2").draggable({ containment: "body"});
    $(".circles").draggable({ containment: "body"});
    $(".drag").draggable({ containment: "body"})
}

$(function() 
{
    $('#fsButton').live('click',function(e)
    {
        $('body').fullScreen()
        drag();
    });
}); 
```

# wicket - 获取 Wicket 中登录用户的用户名值

> ID：13897279
> 
> 赞同：2
> 
> 时间：2012-12-15T23:45:56.287
> 
> 标签：wicket

如何在 wicket java 文件中获取当前登录用户的用户名？我想这将是一些简单的事情，`getSession().getUsername()`但这样的方法不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T12:09:50.890

如何实施安全取决于您。取决于你使用什么。

*   春天？试试 Spring Security（前 ACEGI）。我不喜欢那样。

*   JBoss AS？试试[PicketBox](http://www.jboss.org/picketbox)。或基于 Java EE 的安全性。

*   Wicket world 提供了我使用的[Wicket Auth/Roles](http://wicket.apache.org/learn/projects/authroles.html)。

它不是针对单个代码片段，因为它是多个文件。但检查示例： http: [//www.wicket-library.com/wicket-examples/authorization/](http://www.wicket-library.com/wicket-examples/authorization/)

也在[这里](https://github.com/jsenko/essc-portal/blob/master/src/main/java/org/jboss/essc/web/security/EsscAuthSession.java)检查。我尝试了几种安全方法，因此该应用程序在这方面有点混乱，但您应该能够隔离真正有效的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T14:04:08.757

确保您的会话存储用户，并为它创建一个 getter。最简单的方法是扩展`AuthenticatedWebSession`, 覆盖`authenticate`存储用户成功认证的方法`super.authenticate()`

# visual-studio-2010 - 未定义值??[cvFindContours] [轮廓]

> ID：13897287
> 
> 赞同：1
> 
> 时间：2012-12-15T23:48:03.140
> 
> 标签：visual-studio-2010, visual-c++, opencv, undefined

我正在使用 VS C++ 2010 专业版和 SP1。

**我的代码：**

```
 CvSeq* firstContour = NULL;
    int n = cvFindContours(grnt1, g_storage, &firstContour, sizeof(CvContour), CV_RETR_CCOMP, CV_CHAIN_APPROX_NONE, cvPoint(0,0)); 
```

**运行后出现此错误：** **Project.exe 中出现“System.Runtime.InteropServices.SEHEcxeption”类型的未处理异常附加信息：外部组件已引发异常**

**我的问题：** 汽车向我展示：**轮廓值是未定义的值。** 但我不明白，因为我定义了它。如果我删除 cvFindContours 行不要给我未定义的值。但我想使用 cvFindContours

请帮帮我 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:00:29.847

问题解决了 ：）

1-) 你的图像应该是一个通道图像

例如： IplImage *grnt1= cvCreateImage(cvGetSize(grnt1),8,1);

就是这样：D

# java - 将 php 和 Java 托管在一起

> ID：13897290
> 
> 赞同：4
> 
> 时间：2012-12-15T23:48:51.883
> 
> 标签：java, php, host

我是 Web 开发的新手，请耐心等待，问题是我正在编写一个主要用 PHP 编写的 Web 应用程序。尽管一半的代码已经由其他开发人员用 Java 编写，但我的托管服务器不支持 java。任何人都可以帮助我解决我的选择，我已经用谷歌搜索过，我已经看到一个 php to java bridge 作为一种可能的解决方案。问题是我不能这样做，因为我目前无法托管 java servlet。如果这是我唯一的选择，我将不得不使用不同的托管公司，尽管这不是我的首选解决方案。

我不知道 Java - 是否可以将 java 文件编译成 .class 文件并从我的 php 代码中引用它，我的 Apache 服务器是否可以托管 java .class 文件。

简而言之，我需要托管 Java 和 php 代码以及从我的 php 代码中引用 Java 代码，我可以这样做还是必须在 php 中重写 Java 代码才能使其工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T07:34:28.257

1) 大多数 Web 托管站点都为 JSP/Servlet（例如 Tomcat）提供*了一些服务。*即使是最便宜的网站托管服务。所以寻找另一个供应商不一定是一个坏主意。

2）Java代码不能直接和PHP代码对话，PHP代码也不能直接和Java代码对话。

3) 但是：可以将同一个 Web 服务器配置为运行 PHP/Apache 和 Tomcat。例如：

*   [http://robjames.name/2010/01/29/configure-apache-to-run-tomcat-and-php-2/](http://robjames.name/2010/01/29/configure-apache-to-run-tomcat-and-php-2/)

4) 同一*台服务器*可以*很容易地*同时支持 PHP/Apache 和 Tomcat 作为单独的*服务*。换句话说，同一台主机（例如 www.myserver.com）可以轻松运行 Apache/PHP（例如[http://www.myserver.com:80](http://www.myserver.com:80)）和 Tomcat（例如[http://www.myserver.com:8080](http://www.myserver.com:8080) ） ) 同时。这是一个很常见的配置。

5）不要*看*任何“翻译”。即使您找到一个声称能够做到这一点的工具，从 PHP 转换为 Java，或从 Java 转换为 PHP，对我来说可能会带来更多的麻烦而不是它的价值。

6) 除非有*很多*代码，否则我也不会真正考虑 Web 服务（或 Ajax）。

7) 只需找到支持 Apache/PHP、Tomcat 和您选择的数据库的提供商即可；在您觉得最舒服的任何一个上创建“主页”，并修改您的 PHP 和 JSP 页面以依赖 CSS 以确保两者具有一致的外观和感觉。

这种方法是最简单的……它*可能*就是您所需要的！

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:59:55.803

你不需要任何桥梁。但是您可以将 Java 应用程序用作服务......只需从您的 PHP 向它发出请求（可能使用 AJAX 调用），然后在返回时显示响应。

这是我能提供的最简单的解决方案。

在您提出更多问题之前，我建议您[在此处](http://www.w3schools.com/ajax/default.asp)阅读有关 AJAX和 Web 服务[的信息](http://www.w3schools.com/webservices/default.asp)。:-)

jQuery Ajax 具有 dataType 属性，您可以通过该属性清楚地指定您希望如何接收响应，而 HTML 是选项之一。但他甚至不必对此进行调整，因为 Ajax 可以智能地猜测数据的性质并按预期返回。此方法中可能存在的唯一问题是它可能会引入一些延迟。

[您可以通过阅读此文档](http://docs.jquery.com/Ajax/jQuery.ajax)了解如何使用 jQuery/Ajax 解决此问题，并在[此处](http://api.jquery.com/jQuery.ajax/)阅读有关选项的信息。

如果您愿意，请阅读我对其他答案的评论...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T07:22:18.710

关于（甚至免费）Java 和 PHP 托管，请尝试[Red Hat 的 OpenShift](https://openshift.redhat.com/app/)

关于 PHP 与 Java 交互，反之亦然 - 有多种方式：

*   XMLRPC
*   REST - 请参阅[您可以在 PHP 中使用 REST 吗？如果有怎么办？](https://stackoverflow.com/questions/1628628/how-to-write-rest-in-php)例如 RestEasy [http://www.jboss.org/resteasy](http://www.jboss.org/resteasy)
*   PHP 的 Java 集成 - [http://php.net/manual/en/book.java.php](http://php.net/manual/en/book.java.php)
    等。

此外，还有[Caucho Quercus](http://www.caucho.com/resin-3.1/doc/quercus.xtp)，用 Java 解释的 PHP。但这是一个死项目AFAIK

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T21:16:21.160

在不知道您的 Java 和 PHP 是如何编写的情况下，AJAX 可能是您最好的选择。但是可以使用 Quercus 来执行你的 PHP 代码和调用你的 Java 例程，所有这些都在同一个 Java 服务器上。当然，这需要在支持 servlet 的服务器上运行。

@Ondra Žižka，Quercus 还活着，非常感谢 :)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T17:13:24.330

最近我们使用 mod_jk 用于 Apache（用于 PHP）和 JBOSS 用于 JAVA。因此，基础服务器将是 Apache，请求从那里重定向到 JBOSS。 [这可能对你有帮助](https://stackoverflow.com/questions/2430938/configuring-mod-rewrite-and-mod-jk-for-apache-2-2-and-jboss-4-2-3)

# python - 如何通过 PyQt4 中的代理发出请求

> ID：13897293
> 
> 赞同：3
> 
> 时间：2012-12-15T23:49:12.113
> 
> 标签：python, qt, proxy, pyqt, pyqt4

我想通过 HTTP 代理发出请求，问题是我真的不明白如何设置它。

这是一个示例代码：

```
#! /usr/bin/env python2.7

from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtWebKit import *
from bs4 import BeautifulSoup
import sys

class MySettings(QWebPage):
    def __init__(self):
        QWebPage.__init__(self)
        self.settings().setAttribute(QWebSettings.AutoLoadImages, False)

class Browser(QWebView):
    def __init__(self):
        QWebView.__init__(self)
        self.setPage(MySettings())
        self.loadProgress.connect(self._progress)
        self.loadFinished.connect(self._loadFinished)
        self.doc = self.page().currentFrame()

    def _progress(self, progress):
        print progress

    def _loadFinished(self):
        html = unicode(self.doc.toHtml()).encode('utf-8')
        soup = BeautifulSoup(html[1000])
        print soup.prettify()

if __name__ == "__main__":
    app = QApplication(sys.argv)
    br = Browser()
    url = QUrl('http://http://ip2location.com/')
    br.load(url)
    br.show()
    app.exec_() 
```

我已经阅读了 QNetworkAccessManager 类，但不明白我应该把它放在哪里，或者我应该像使用 QWebPage 那样创建一个不同的类，如下所示：

```
class MyNetworkAccessManager(QNetworkAccessManager):
    def __init__(self):
        QNetworkAccessManager.__init__(self)
        proxy = QNetworkProxy('HTTP','127.0.0.1', '8080') 
        self.setProxy(proxy) 
```

如果是这样，如何让我的 Browser(QWebView) 类使用 MyNetworkAccessManager，

或者可能是我完全错了，应该以不同的方式做。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T13:43:19.730

要使用`QNetworkAccessManager`您创建的子类，请将此代码添加到您的`Browser`

```
old_manager = self.page().networkAccessManager()
new_manager = MyNetworkAccessManager(old_manager)
self.page().setNetworkAccessManager(new_manager) 
```

# android - android viewpager 适配器和 NullPointerException

> ID：13897294
> 
> 赞同：1
> 
> 时间：2012-12-15T23:49:15.967
> 
> 标签：android, nullpointerexception, android-viewpager

有时我在谷歌播放报告中得到 NullPointerExceptions，其中（我认为）我使用 viewpager 或它的适配器。这是我的代码：

```
private PagerAdapter mPagerAdapter;
private ViewPager mPagerView;

private static class PagerAdapter extends FragmentStatePagerAdapter {
    HashMap<Integer, PageFragment> mPageReferenceMap;

    public PagerAdapter(FragmentManager fm) {
        super(fm);
        mPageReferenceMap = new HashMap<Integer, PageFragment>();
    }

    @Override
    public int getCount() {
        return NUM_ITEMS;
    }

    @Override
    public Fragment getItem(int position) {
        PageFragment fragment = PageFragment.newInstance(position);
        mPageReferenceMap.put(position, fragment);
        return fragment;
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        super.destroyItem(container, position, object);
        mPageReferenceMap.remove(position);
    }

    public PageFragment getFragment(int key) {
        return mPageReferenceMap.get(key);
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }
} 
```

在 onCreate() 中：

```
 mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    mPagerView = (ViewPager) findViewById(R.id.pager); 
```

然后，在这一行，我收到了一些用户的崩溃报告：

```
 mPagerAdapter.getFragment(mPagerView.getCurrentItem()).whatEverFunctionFromFragment(); 
```

我在不同的地方（彼此独立）以这种方式调用片段 - 在对话框的 onDismiss 函数中，在 ListPopupWindow 的 onItemClick 等中 - 在片段中具有不同的功能。

**更多信息：在完成所有让**[Heinrisch](https://stackoverflow.com/questions/13897294/android-viewpager-adapter-and-nullpointerexception#comment19255183_13897294)伤心的事情后，我遇到了这个错误。当用户恢复活动时会出现此错误。但我仍然不明白如何解决它，为什么会这样？我应该保存`mPageReferenceMap`在 onSaveInstanceState() 中吗？还是在 onStop() 中？我在 Activity 和 Fragments 的生命周期中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T13:00:08.550

您应该发布在重现此错误时获得的堆栈跟踪。

只是猜测，但可能是恢复时返回 null 的 mPageReferenceMap。这样做的原因是 FragmentStatePagerAdapter 持有片段，并且仅在需要新片段时才调用 getItem。但是，FragmentStatePagerAdapter 不保留 mPageReferenceMap 中的信息。因此，如果适配器在不调用 getItem 的情况下恢复片段，您的片段将在那里，但在 mPageReferenceMap 中不会有引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T13:33:40.287

`mPageReferenceMap`解决方案是在应用停止和重新启动时进行存储。我发现存储片段引用的最佳方法是FragmentManager 的[putFragment()](http://developer.android.com/reference/android/app/FragmentManager.html#putFragment%28android.os.Bundle,%20java.lang.String,%20android.app.Fragment%29)和[getFragment()](http://developer.android.com/reference/android/app/FragmentManager.html#getFragment%28android.os.Bundle,%20java.lang.String%29)方法。

这是我的代码：

```
@Override
protected void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    FragmentManager fm = getSupportFragmentManager();
    for(int i=0;i<mPagerAdapter.getCount();i++)
        fm.putFragment(savedInstanceState,"fragment"+Integer.toString(i),mPagerAdapter.getFragment(i));
} 
```

并在 onCreate() 方法中（当 Activity 重新启动时）：

```
 mPagerAdapter = new PagerAdapter(getSupportFragmentManager());
    if (savedInstanceState != null){
        FragmentManager fm = getSupportFragmentManager();
        for(int i=0;i<mPagerAdapter.getCount();i++){
            PageFragment pf = (PageFragment)fm.getFragment(savedInstanceState,"fragment"+Integer.toString(i));
            if(pf!=null)
                mPagerAdapter.putFragment(i,pf);
        }
    } 
```

# icons - 在哪里可以找到标准的 Windows Phone 8 应用栏图标？

> ID：13897299
> 
> 赞同：12
> 
> 时间：2012-12-15T23:50:04.017
> 
> 标签：icons, windows-phone-8

我想要“添加”、“编辑”、“设置”、“删除”等的标准图标。我确定某个地方有官方下载。

我不是在寻找花哨的自定义图标。只有标准的对我有好处。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-16T03:30:18.407

[WindowsPhoneGeek.com](http://windowsphonegeek.com/marketplace/Browse?category=icons)上有一大堆内容可以帮助您。

我还发现[这个集合](https://github.com/Templarian/WindowsIcons)已签入 GitHub。

您还可以尝试[Syncfusion Metro Studio](http://windowsphonegeek.com/marketplace/components/Syncfusion-Metro-Studio)，它带有*大量*图标，可让您以 XAML 或 PNG 格式导出它们。

我也一直在寻找某种微软赞助的标准图标集，但我不相信这样的东西存在。

# node.js - 您将如何在 NoSql 数据库中建模客户 > 订单 > ordertem > 产品？

> ID：13897305
> 
> 赞同：9
> 
> 时间：2012-12-15T23:51:06.177
> 
> 标签：node.js, mongodb, couchdb, database, nosql

我目前正在学习 Node.JS，需要实现一个数据库。所有的 Node 书籍似乎都认为 MongoDB 是最好的解决方案，但我似乎无法理解 Mongo 和 Couch 等 NoSql 数据库，我是一名 MS SQL Server 人！

因此，我知道您可以将结构化数据保存为记录 (JSON)，但我不确定您如何使用以下（简化）表为典型的电子商务应用程序建模......

```
customers (id, name, address)
orders (id, customerID, orderDate)
orderItems (id, orderID, productID)
products (id, title, description, image) 
```

所以，通常我会写一个这样的查询（但显然更好优化）......

```
SELECT Customers.name, Products.title 
FROM (orders INNER JOIN customers ON orders.customerID = customers.id)
INNER JOIN orderItems ON orderItems.orderID = orders.id 
INNER JOIN products ON orderItems.productID = products.id 
```

如果我能看到一个如何在 NoSQL 数据库中工作的示例，那么我可能会开始“了解它”。

或者，我最好还是坚持使用 MSSQL Server 或 MySql，它们都与 Node 兼容？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-16T03:49:20.990

在为 MongoDB 设计模式时，一个重要的考虑因素不是您的数据是什么，而是您将如何使用它。如果不弄清楚您将执行哪种类型的读取和写入（以及它们的性能如何），可能很难设计一个“最佳”模式。

您可以考虑一些基本准则以避免遇到问题。其中之一是避免设计不断无限增长的文档。这意味着您不应该将订单嵌入到客户文档中。另一个规则是，那些本身不“感兴趣”的东西（或者它们自己不存在）可能最好嵌入。这表明 orderItems 不值得拥有自己的集合，而应该简单地被视为订单的属性（实际上它们就是这样）。

MongoDB 开发人员培训中涵盖了这个确切的练习，这是一个非常典型的模式设计示例。

底线是您应该拥有三个集合：

产品
客户
订单

订单将引用客户（可选地对客户集合中的一些信息进行非规范化处理）并且他们将引用产品（在他们将包含的 orderItems 数组中）。

更多集合和所有这些集合中的确切字段取决于您的特定用例，但我看不出比这三个集合更少的可行方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:39:50.677

Mongo 使用集合，您可以在某种程度上将其与“表格”相关联，因此您可以在此处拥有 4 个集合。但请注意，没有理由不能将“订单”和“订单项”组合成“订单”，因为您需要考虑每个条目都可以更像是您可以使用 RDBMS 实现的文档。

Couch 不同，您只需在其中存储文档。在这种情况下，您可以用它是什么“类型”的文档来标记每个文档。然后，您可以创建可以通过 map/reduce 返回所需数据的视图函数。

对于其中任何一个，不要太执着于在一个查询中做所有事情，因为这并不总是可能的。

这里的关键点是没有单一的“NoSQL”方法来解决这个问题，这与 SQL 是统一器的 RDBMS 不同。每种数据库和 NoSQL 存储类型都有其优点和缺点，您需要确定最适合您的是什么。

希望这可以帮助。

# apache-flex - 加载新 Excel 文件时 Flex DataGrid 未更新

> ID：13897306
> 
> 赞同：1
> 
> 时间：2012-12-15T23:51:13.130
> 
> 标签：apache-flex, datagrid, flex4, filereference, as3xls

我是 Flex 编码的新手，正在尝试导入 Excel 文件，以便以后使用。我已经从下面的两篇文章中拼凑了足够多的内容，以便我可以成功加载一个 Excel 文件并在 DataGrid 中显示内容。

但是，如果我尝试上传第二个 Excel 文件，DataGrid 的内容不会改变。（当代码将标题重新写入 DataGrid 时，我最终会从顶部截断一行。）

1.  [http://blog.flexexamples.com/2007/09/21/uploading-files-in-flex-using-the-filereference-class](http://blog.flexexamples.com/2007/09/21/uploading-files-in-flex-using-the-filereference-class)
2.  [http://code.google.com/p/as3xls/wiki/Tutorial](http://code.google.com/p/as3xls/wiki/Tutorial)

完整代码如下。关于我要去哪里错的任何想法？

提前干杯和感谢！

科里

PS：我处理标题的方式有一个小故障，因为在我删除标题后，Excel 工作表中的任何公式仍然引用原始行。他们指向他们应该在下面的一排。

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical" xmlns="*" creationComplete="init()" height="727" width="777">

<mx:Script>

    <![CDATA[
        import com.as3xls.xls.ExcelFile;
        import com.as3xls.xls.Sheet;

        import mx.collections.ArrayCollection;

        //Based on example from: http://blog.flexexamples.com/2007/09/21/uploading-files-in-flex-using-the-filereference-class/

        private var fileRef:FileReference;
        private var ba:ByteArray;
        private var xlFile:ExcelFile;
        private var hdrs:Array;
        private var runOnce:Boolean;

        [Bindable]
        private var xlsheet:ArrayCollection;

        private const FILE_URL:String = "http://localhost:8500/fileref/uploader.cfm";
        private const XLS_FILTER:FileFilter = new FileFilter("EXCEL FILES (*.xls, *.xlsx)", "*.xls; *.xlsx");
        private const TXT_FILTER:FileFilter = new FileFilter("TEXT FILES (*.txt, *.csv, *.tsv)", "*.txt; *.csv; *.tsv");
        private const ALL_FILTER:FileFilter = new FileFilter("ALL FILES (*.*)", "*.*");

        private function init():void {
            fileRef = new FileReference();
            fileRef.addEventListener(Event.SELECT, fileRef_select);
            fileRef.addEventListener(ProgressEvent.PROGRESS, fileRef_progress);
            fileRef.addEventListener(Event.COMPLETE, fileRef_complete);

            ba = new ByteArray();
            xlFile = new ExcelFile();
            hdrs = new Array();
            xlsheet = new ArrayCollection();
        }

        private function browseAndUpload():void {
            fileRef.browse([XLS_FILTER, TXT_FILTER, ALL_FILTER]);
            message.text = "";

        }

        private function fileRef_select(evt:Event):void {
            try {
                message.text = "size (bytes): "+ numberFormatter.format(fileRef.size);
                message.text += " | " + fileRef.name

                //Alert.show (fileRef.name);
                fileRef.load();

            } catch(err:Error) {
                message.text = "ERROR: zero-byte file";
            }
        }

        private function fileRef_progress(evt:ProgressEvent):void{
            progressBar.visible = true;
        }

        private function fileRef_complete(evt:Event):void{

            try {
                message.text += " (complete)";
                progressBar.visible = false;
                grid.initialize()               

                ba=fileRef["data"];
                xlFile.loadFromByteArray(ba);
                xlsheet = xlFile.sheets[0].values;

                hdrs =  xlsheet[0];
                xlsheet.removeItemAt(0);

                grid.dataProvider = xlsheet;
            } catch (err:Error) {
                message.text = "An error occurred";
            }

        }

        private function updateHeaders(): void {
            if(grid.columnCount>=1){
                for (var i:int=0; i<=grid.columnCount-1; i++){
                    grid.columns[i].headerText=hdrs[i];
                }

            }
        }

    ]]>

</mx:Script>

<mx:NumberFormatter id="numberFormatter"/>
<mx:Button label="Upload File"
           click="browseAndUpload();" labelPlacement="left"/>
<mx:Label id="message"/>
<mx:ProgressBar id="progressBar"
                indeterminate="true"
                visible = "false"/>

<mx:DataGrid id="grid"
    updateComplete="updateHeaders();"/>

</mx:Application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:33:11.827

代码中的唯一错误是每次加载新内容时 xlFile 对象都会递增。所以 sheet[0] 总是一样的！如果您的文件有 3 张纸，则新文件的第一张纸在 sheet[3] 对象中。

要更正此问题，请尝试在每次加载新文件时启动 xlFile 对象。我自己做的，效果很好！这是我的代码（我已经擦除了一些行以简化它）

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:mx="library://ns.adobe.com/flex/mx" 
            layout="vertical" 
            height="727" width="777" creationComplete="init()">

<fx:Script>
    <![CDATA[
        import com.as3xls.xls.ExcelFile;
        import com.as3xls.xls.Sheet;
        import mx.collections.ArrayCollection;

        private var fileRef:FileReference;
        private var ba:ByteArray;
        private var xlFile:ExcelFile;
        private var hdrs:Array;
        private var runOnce:Boolean;

        [Bindable]private var xlsheet:ArrayCollection;

        private const XLS_FILTER:FileFilter = new FileFilter("EXCEL FILES (*.xls)", "*.xls");

        private function init():void 
        {
            fileRef = new FileReference();
            fileRef.addEventListener(Event.SELECT, fileRef_select);
            fileRef.addEventListener(ProgressEvent.PROGRESS, fileRef_progress);
            fileRef.addEventListener(Event.COMPLETE, fileRef_complete);

            ba = new ByteArray();
            hdrs = new Array();
            xlsheet = new ArrayCollection();
        }

        private function browseAndUpload():void {
            fileRef.browse([XLS_FILTER]);
            message.text = "";
        }

        private function fileRef_select(evt:Event):void {
            try {
                message.text = "size (bytes): "+ fileRef.size;
                message.text += " | " + fileRef.name
                fileRef.load();
            } catch(err:Error) {
                message.text = "ERROR: zero-byte file";
            }
        }

        private function fileRef_progress(evt:ProgressEvent):void{
            progressBar.visible = true;
        }

        private function fileRef_complete(evt:Event):void{
            try {
                xlFile = new ExcelFile();

                message.text += " (complete)";
                progressBar.visible = false;

                ba=fileRef["data"];
                xlFile.loadFromByteArray(ba);
                xlsheet = xlFile.sheets[0].values;

                hdrs =  xlsheet[0];
                xlsheet.removeItemAt(0);

                grid.dataProvider = xlsheet;
            } catch (err:Error) {
                message.text = "An error occurred";
            }
        }

        private function updateHeaders(): void {
            if(grid.columnCount>=1){
                for (var i:int=0; i<=grid.columnCount-1; i++){
                    grid.columns[i].headerText=hdrs[i];
                }
            }
        }

    ]]>
</fx:Script>

<mx:Button label="Upload File" click="browseAndUpload();" labelPlacement="left"/>
<mx:Label id="message"/>
<mx:ProgressBar id="progressBar" indeterminate="true" visible = "false"/>
<mx:DataGrid id="grid" updateComplete="updateHeaders();"/>
</mx:Application> 
```

# ember.js - 如何序列化 ember 数据中的嵌入式关联？

> ID：13897307
> 
> 赞同：3
> 
> 时间：2012-12-15T23:51:16.433
> 
> 标签：ember.js

# 背景

最近， [Tom Dale 宣布](https://github.com/emberjs/data/pull/428#issuecomment-10977905)“嵌入式加载现已回归！”。然而，它似乎只完全支持*加载*场景。目前尚不清楚*序列化*嵌入式关联是否仍在开发中，或者是否希望用户通过构建自定义序列化程序自己实现它。

# 要求

我的嵌入式关联的 JSON 如下所示：

```
{
  inputs: [
    {
      id: 1,
      name: "Favorite Color",
      type: "SelectInput",
      options: {
        choices: [ 'red', 'green', 'yellow' ]
      }
    },   
    {
      id: 2,
      name: "email",
      type: "TextInput",
      options: {}
    }
  ]
} 
```

我相信表示这一点的“余烬方式”是构建一个自定义序列化程序，它将我的 JSON 转换为如下模型：

```
App.Choice = DS.Model.extend({
  name: DS.attr( 'string' ),
  input: DS.belongsTo( 'App.Input' )
});

App.Input = DS.Model.extend({
  name: DS.attr( 'string' ),
  type: DS.attr( 'string' ),
  choices: DS.hasMany( 'App.Choice' )
}); 
```

# 尝试的解决方案

以下解决方案大多有效，但感觉我一定是“做错了”，因为我不得不对这么多代码进行逆向工程和子类化。

```
Customizer.MyRESTAdapter = DS.RESTAdapter.extend({
  dirtyRecordsForAttributeChange: function(dirtySet, record, attributeName, newValue, oldValue) {
    if(record.constructor === Customizer.Choice) {
      if(newValue === oldValue) { return; }

      var input = null;
      if (attributeName == 'name') {
        input = record.get('input');
      }
      else if(attributeName == 'input') {
        input = newValue;
      }
      if( input ) {
        dirtySet.add( input );
      }
    }
    else {
      this._super(dirtySet, record, attributeName, newValue, oldValue);
    }
  },

  dirtyRecordsForBelongsToChange: function(dirtySet, child, relationship) {
    if(child.constructor === Customizer.Choice) {
      var input = child.get( 'input' );
      if( input ) {
        dirtySet.add( input );
      }
    }
    else {
      this._super(dirtySet, child, relationship);
    }
  },

  dirtyRecordsForHasManyChange: function(dirtySet, parent, relationship) {
    this._super(dirtySet, parent, relationship);
  }
});

Customizer.MyRESTSerializer = DS.RESTSerializer.extend({
  init: function() {
    this._super();
    this.mappings.set( 'Customizer.Input', { choices: { embedded: 'load' } } );
  },

  extractEmbeddedHasMany: function(type, hash, key) {
    if(type == Customizer.Input) {
      if(!(hash['options'] && hash['options']['choices'])) { return null; }

      var choices = [];
      hash['options']['choices'].forEach(function(choice, i){
        var choiceId = hash['id'] + '_' + i;
        var inputId = hash['id'];
        choices[i] = { id: choiceId, input_id: inputId, name: choice };
      });
      return choices;
    }

    return this._super(type, hash, key);
  },

  addHasMany: function(data, record, key, relationship) {
    this._super(data, record, key, relationship);

    if( key === 'choices' ) {
      var choices = record.get('choices').map(function( choice ){
        return choice.get( 'name' );
      });
      data['options'] = data['options'] || {};
      data['options']['choices'] = choices;
    }
  }

});

Customizer.store = DS.Store.create({
  revision: 10,
  adapter: Customizer.MyRESTAdapter.create({
    namespace: 'api/v1',
    bulkCommit: false,
    serializer: Customizer.MyRESTSerializer
  })
}) 
```

# 请求反馈

*   这是正确的道路吗？
*   ember 团队是否正在积极寻找更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:44:40.483

查看ember-data的embedded-records分支： [https ://github.com/emberjs/data/commits/embedded-records](https://github.com/emberjs/data/commits/embedded-records)

特别是，请参阅此提交以保存嵌入式数据： [https ://github.com/emberjs/data/commit/0abd3b965c50dfeb23bd8ff50751825482050e68](https://github.com/emberjs/data/commit/0abd3b965c50dfeb23bd8ff50751825482050e68)

对嵌入式记录的全面支持指日可待:)

**更新**

嵌入式记录分支于 2012 年 12 月 28 日合并到主分支：

[https://github.com/emberjs/data/commit/b5d7c478e79aa9706e0196b8769b7ef67bb26fc4](https://github.com/emberjs/data/commit/b5d7c478e79aa9706e0196b8769b7ef67bb26fc4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-11T17:07:15.933

我最终使用了[http://mozmonkey.com/2013/12/serializing-embedded-relationships-ember-data-beta/](http://mozmonkey.com/2013/12/serializing-embedded-relationships-ember-data-beta/)的变体。在我的例子中，我将它添加`id`到 JSON 中，或者如果它不脏，我只发送`id`它自己。

```
class App.ApplicationSerializer extends DS.ActiveModelSerializer
  # Based on http://mozmonkey.com/2013/12/serializing-embedded-relationships-ember-data-beta/
  # Also see http://discuss.emberjs.com/t/ember-data-beta-3-and-saving-hasmany-relationships-with-activemodelserializer`-and-rails/3167
  serializeHasMany: (record, json, relationship) ->
    key = relationship.key
    hasManyRecords = Ember.get(record, key)
    embed = relationship.options.embed
    if embed && hasManyRecords
      json[key] = []
      hasManyRecords.forEach (item, index) =>
        json[key].push @serializeItem(item, embed)
    else
      @._super(record, json, relationship)

  serializeBelongsTo: (record, json, relationship) ->
    key = relationship.key
    belongsToRecord = Ember.get(record, key)
    embed = relationship.options.embed
    if embed
      json[key] = @serializeItem(belongsToRecord, embed)
    else
      @._super(record, json, relationship)

  serializeItem: (item, embed) ->
    if embed == 'ifDirty'
      if item.isDirty
        data = item.serialize()
      else
        data = {}
      data['id'] = item.id
    else if embed == 'always'
      data = item.serialize()
      data['id'] = item.id
    else
      null
    data 
```

# c# - Physics.RaycastAll 找到带有标签的敌人

> ID：13897311
> 
> 赞同：1
> 
> 时间：2012-12-15T23:51:50.683
> 
> 标签：c#, unity3d

我是统一的新手，我想做的是创建一个光线投射，它可以找到所有标记为敌人的物体，它们在我的玩家面前，如果它们在我按下 F 键时在那个区域内，它需要一些健康他们每个人，有人可以帮助我吗？这是我的代码：

```
using UnityEngine;
using System.Collections;

public class meleeAttack : MonoBehaviour {
public GameObject target;
public float attackTimer;
public float coolDown;

private RaycastHit hit;

// Use this for initialization
void Start () {
    attackTimer = 0;
    coolDown = 0.5f;

}

// Update is called once per frame
void Update () {

    if(attackTimer > 0)
        attackTimer -= Time.deltaTime;

    if(attackTimer < 0)
        attackTimer = 0;

    if (Input.GetKeyUp(KeyCode.F)) {
        if(attackTimer == 0)
        Attack();
        attackTimer = coolDown;
    }
}

private void Attack() {

    float distance = Vector3.Distance(target.transform.position, transform.position);

    Vector3 dir = (target.transform.position - transform.position).normalized;

    float direction = Vector3.Dot(dir, transform.forward);

    Debug.Log(direction);
    if (distance < 3 && direction > 0.5) {
        enemyhealth eh = (enemyhealth)target.GetComponent("enemyhealth");
        eh.AddjustCurrentHealth(-10);
    }
}
} 
```

* * *

```
using UnityEngine;
using System.Collections;

public class enemyhealth : MonoBehaviour {

public int maxHealth = 100;
public int currentHealth = 100;

public float healthBarLength;
// Use this for initialization
void Start () {
    healthBarLength = Screen.width / 2;
}

// Update is called once per frame
void Update () {
    AddjustCurrentHealth(0);
}

void OnGUI() {
    GUI.Box(new Rect(10, 40, healthBarLength, 20), currentHealth + "/" + maxHealth);
}

public void AddjustCurrentHealth(int adj){
    currentHealth += adj;
    if (currentHealth < 0)
        currentHealth = 0;

    if (currentHealth > maxHealth)
        currentHealth = maxHealth;

    if (maxHealth < 1)
        maxHealth = 1;

    healthBarLength = (Screen.width / 2) * (currentHealth / (float)maxHealth);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:52:53.727

```
private void Attack(){
    int user_defined_layer = 8;  //use the 'User Layer' you created to define NPCs
    int layer_mask = 1 << user_defined_layer; 

    RaycastHit[] hits;

    // Get direction in front of your player
    Vector3 direction = transform.TransformPoint( Vector3.forward );
    hits = Physics.RaycastAll(transform.position, direction, Mathf.Infinity, layer_mask)

    foreach(RaycastHit hit in hits)
    {
        //NPC is hit, decrease his/her/its life
    }
} 
```

最好不要试图从你的位置推导出你的 NPC 的方向。让 Unity 的光线投射引擎为您处理光线-NPC 相交测试。这种方法确实需要你的 NPC 有一个 Collider。

# c - 此代码是否包含未定义的行为或隐藏的错误？我错过了什么？

> ID：13897315
> 
> 赞同：-1
> 
> 时间：2012-12-15T23:53:02.797
> 
> 标签：c, ansi

这是一段测试名为“logf”的函数的代码，该函数接受两个参数并使用它们记录一些信息。在这种情况下，函数的第一个参数是要记录的字符串，第二个参数是保存文件系统中日志文件路径的字符串。第一个字符串与时间戳一起打印到标准输出和日志文件。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>

#define EXIT_SUCCESS 0
#define EXIT_FAILURE 1

typedef struct tm tm;

int logf(char input_string[], char log_file_string[])
{
    /*Initializations.*/
    char output_string[32767];
    FILE* log_file_stream;
    time_t current_time_epoch_format;
    tm* current_time_calandar_format;

    /*Creating timestamp in output string, amending first argument to output string, and logging.*/
    if ((strlen(input_string) + 23) > 32767) return EXIT_FAILURE;
    if ((current_time_epoch_format = time(&current_time_epoch_format)) == -1) return EXIT_FAILURE;
    if ((current_time_calandar_format = localtime(&current_time_epoch_format)) == NULL) return EXIT_FAILURE;
    if (strftime(output_string, 23, "[%d-%m-%Y %H:%M:%S] ", current_time_calandar_format) != 22) return EXIT_FAILURE;
    if ((log_file_stream = fopen(log_file_string, "a")) == NULL) return EXIT_FAILURE;
    if (printf("%s\n", strcat(output_string, input_string)) < 1) return EXIT_FAILURE;
    if (fprintf(log_file_stream, "%s\n", output_string) < 1) return EXIT_FAILURE;
    if (fclose(log_file_stream) == EOF) return EXIT_FAILURE;
    return EXIT_SUCCESS;
}

int main(int argc, char** argv)
{
    /*Initializations.*/
    int EXIT_CODE;

    /*Print the returned integer from logf and exit.*/
    printf("%d\n", (EXIT_CODE = logf(argv[1], argv[2])));
    exit(EXIT_CODE);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:59:42.723

该程序调用未定义的行为，因为该名称`logf`是为外部使用而保留的。它是标准数学函数之一的名称。它是否也因为我没有检查过的其他原因而调用了未定义的行为。

# machine-learning - 用神经网络逼近正弦函数

> ID：13897316
> 
> 赞同：24
> 
> 时间：2012-12-15T23:53:12.540
> 
> 标签：machine-learning, neural-network

我已经实现了一个简单的神经网络框架，它只支持多层感知器和简单的反向传播。它适用于线性分类和通常的 XOR 问题，但对于正弦函数逼近，结果并不令人满意。

我基本上试图用一个由 6-10 个神经元组成的隐藏层来近似正弦函数的一个周期。该网络使用双曲正切作为隐藏层的激活函数和输出的线性函数。结果仍然是对正弦波的一个相当粗略的估计，并且需要很长时间来计算。

我查看了[encog](https://github.com/encog)以供参考，但即使如此，我也无法通过简单的反向传播使其工作（通过切换到弹性传播，它开始变得更好，但仍然比[这个类似问题中](https://stackoverflow.com/questions/1565115/approximating-function-with-neural-network)提供的超级光滑的 R 脚本差得多）。那么我真的在尝试做一些不可能的事情吗？用简单的反向传播（没有动量，没有动态学习率）不可能近似正弦吗？R中神经网络库使用的实际方法是什么？

**编辑**：我知道即使使用简单的反向传播（如果您对初始权重非常幸运） ，也绝对*有可能找到足够好的近似值，但实际上我更想知道这是否是一种**可行*的方法。与我的实现甚至 encog 的弹性传播相比，我链接到的 R 脚本似乎收敛得非常快和健壮（在 40 个 epoch 中只有很少的学习样本）。我只是想知道是否可以做一些事情来改进我的反向传播算法以获得相同的性能，或者我是否必须研究一些更高级的学习方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-19T17:16:14.177

使用 TensorFlow 等神经网络的现代框架可以很容易地实现这一点。

例如，在我的计算机上，每层使用 100 个神经元的两层神经网络可以在几秒钟内进行训练，并给出了一个很好的近似值：

[![在此处输入图像描述](../Images/647903c1171998d3ee4f950fa62d5283.png)](https://i.stack.imgur.com/JZeUQ.png)

代码也很简单：

```
import tensorflow as tf
import numpy as np

with tf.name_scope('placeholders'):
    x = tf.placeholder('float', [None, 1])
    y = tf.placeholder('float', [None, 1])

with tf.name_scope('neural_network'):
    x1 = tf.contrib.layers.fully_connected(x, 100)
    x2 = tf.contrib.layers.fully_connected(x1, 100)
    result = tf.contrib.layers.fully_connected(x2, 1,
                                               activation_fn=None)

    loss = tf.nn.l2_loss(result - y)

with tf.name_scope('optimizer'):
    train_op = tf.train.AdamOptimizer().minimize(loss)

with tf.Session() as sess:
    sess.run(tf.global_variables_initializer())

    # Train the network
    for i in range(10000):
        xpts = np.random.rand(100) * 10
        ypts = np.sin(xpts)

        _, loss_result = sess.run([train_op, loss],
                                  feed_dict={x: xpts[:, None],
                                             y: ypts[:, None]})

        print('iteration {}, loss={}'.format(i, loss_result)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T12:28:42.613

你绝对不是在尝试不可能的事情。神经网络是[通用逼近](https://en.wikipedia.org/wiki/Artificial_neural_network#Theoretical_properties)器——这意味着对于任何函数 F 和误差 E，都存在*一些*神经网络（只需要一个隐藏层）可以以小于 E 的误差逼近 F。

当然，找到那个（那些）网络是完全不同的事情。我能告诉你的最好的方法是反复试验......这是基本程序：

1.  将数据分成两部分：训练集（~2/3）和测试集（~1/3）。
2.  在训练集中的所有项目上训练您的网络。
3.  在测试集中的所有项目上测试（但不训练）您的网络并记录平均错误。
4.  重复第 2 步和第 3 步，直到您达到最小测试错误（当您的网络开始在训练数据上变得超级好而损害其他一切时，会发生“过度拟合”）或直到您的整体错误不再显着减少（暗示网络将达到最佳状态）。
5.  如果此时的错误是可以接受的低，你就完成了。如果不是，您的网络还不够复杂，无法处理您正在为其训练的功能；添加更多隐藏的神经元并回到开始......

有时改变你的激活函数也会产生影响（只是不要使用线性，因为它会抵消添加更多层的力量）。但同样，要知道什么是最好的，这将是反复试验。

希望对您有所帮助（抱歉，我不能更有用）！

**PS：** 我也知道这是可能的，因为我见过有人用网络近似正弦。我想说她*没有*使用 sigmoid 激活函数，但我不能保证我的记忆力……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-04T13:51:03.790

sklearn.neural_network 的类似实现：

```
from sklearn.neural_network import MLPRegressor
import numpy as np

f = lambda x: [[x_] for x_ in x]
noise_level = 0.1
X_train_ = np.arange(0, 10, 0.2)
real_sin = np.sin(X_train_)
y_train = real_sin+np.random.normal(0,noise_level,len(X_train_))    
N = 100
regr = MLPRegressor(hidden_layer_sizes= tuple([N]*5)).fit(f(X_train_), y_train)
predicted_sin = regr.predict(f(X_train_)) 
```

结果如下所示： [![用NN预测罪](../Images/d934d31237e5dfb99d2b605a2daad0f0.png)](https://i.stack.imgur.com/Wij9Z.png)

# sql - T-SQL Insert Trigger to insert,update on if condition on multiple tables

> ID：13897321
> 
> 赞同：8
> 
> 时间：2012-12-15T23:54:30.153
> 
> 标签：sql, sql-server, triggers, insert, updates

I'm having a few issues trying to resolve an SQL Trigger to automatically set a user to blocked & create the block record including date in another table, if their Due date is equal to a set date.

The issue is that when the trigger is set off by an insert, the print statements are executed and the insert occurs, but the insert into the table does not, or the update statement ? Can anyone explain why ?

Note: Both the insert and the Update statement are fine when executed by themselves.

ACCOUNT TABLE

```
CREATE TABLE [dbo].[Account](
[AccountNo] [int] IDENTITY(1,1) NOT NULL,
[CustomerNo] [int] NOT NULL,
[PaymentNo] [int] NULL,
[CreditNo] [int] NULL,
[BlockID] [dbo].[number] NULL,
[Balence] [dbo].[currency] NOT NULL,
[AmountDue] [dbo].[currency] NOT NULL,
[DueDate] [dbo].[dates] NULL,
[AutherisedBy] [nvarchar](50) NOT NULL,
[DateCreated] [date] NOT NULL, 
```

BLOCKEDUSER TABLE

```
CREATE TABLE [dbo].[BlockedUsers](
[BlockID] [int] IDENTITY(1,1) NOT NULL,
[DateEnforced] [dbo].[dates] NOT NULL,
[Blocked] [dbo].[switch] NOT NULL, 
```

TRIGGER

```
ALTER TRIGGER [dbo].[Add_Blocked_User]
ON [dbo].[Account]
FOR INSERT
AS  
BEGIN
SET NOCOUNT ON;

Declare @ID int
Select @ID = [AccountNo] from inserted  
If(Select [DueDate] from inserted) = '2011-01-01'

INSERT INTO dbo.BlockedUsers(DateEnforced,Blocked)
VALUES (GETDATE(),1)
PRINT 'New Block Date Added'

UPDATE Account 
Set BlockID = IDENT_CURRENT('BlockID')
where @ID = @ID
PRINT 'Account Blocked'

END

GO 
```

Fully Working Example : Completed using Help Below.

```
ALTER TRIGGER [dbo].[Add_Blocked_User]
ON [dbo].[Account]
AFTER INSERT
AS 
BEGIN

SET NOCOUNT ON;

Declare @ID int
Select @ID = [AccountNo] from inserted  
 If(Select [DueDate] from inserted)Not Between (select CONVERT(date, getdate() - 30)) And (select CONVERT(date, getdate()))
Begin
    INSERT INTO dbo.BlockedUsers(DateEnforced,Blocked)
    VALUES (GETDATE(),1)
    PRINT 'New Block Date Added'

    UPDATE Account 
    Set BlockID = (Select Max(BlockID) From BlockedUsers)
    where [AccountNo] = (Select [AccountNo] from inserted)  
    PRINT 'Account Blocked'
 End

 END

GO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T02:12:44.470

The `IF` statement in Transact-SQL expects a single statement after the condition:

```
IF *condition*
  *statement*; 
```

If you want to perform more than one statement in the same branch, you must enclose them in the `BEGIN`/`END` "brackets":

```
IF *condition*
BEGIN
  *statement*;
  *statement*;
  ...
END; 
```

In your trigger, only the INSERT statement executes depending on the result of the `(Select [DueDate] from inserted) = '2011-01-01'` condition. As for both PRINTs and the UPDATE, they execute unconditionally, i.e. after *every* insert into `Account`. So, you probably need to add `BEGIN` and `END` around INSERT, UPDATE and both PRINTs:

```
...
If(Select [DueDate] from inserted) = '2011-01-01'
**BEGIN**
INSERT INTO dbo.BlockedUsers(DateEnforced,Blocked)
VALUES (GETDATE(),1);
PRINT 'New Block Date Added';

UPDATE Account 
Set BlockID = IDENT_CURRENT('BlockID')
where @ID = @ID;
PRINT 'Account Blocked';
**END**;
... 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-16T00:28:07.143

You did

```
FOR INSERT 
```

You want to use

```
AFTER INSERT, UPDATE 
```

FOR INSERT tells Sql Server that your trigger will entirely replace the normal insert operation. AFTER INSERT tells Sql Server to go ahead and insert the row, and then execute this code as a post-processing step.

# trigger.io - 在 Android / iOS 上使用 Trigger.IO Forge 获取设备电话号码

> ID：13897323
> 
> 赞同：0
> 
> 时间：2012-12-15T23:54:51.507
> 
> 标签：trigger.io

我想在使用 Trigger.io Forge 编译的 Android / iOS 移动应用程序中获取设备电话号码。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:43:18.707

这目前无法通过现有的 Forge 模块实现。所以要做到这一点，你需要编写一个原生插件。

# php - 将多级关联数组显示为表格

> ID：13897324
> 
> 赞同：4
> 
> 时间：2012-12-15T23:54:54.057
> 
> 标签：php, html, arrays

以下是我要显示的数组示例：

```
Array
(
    [Media] => Array
    (
        [2012-12-10] => Array
        (
            [Mentor] => Evan Tobin
            [Veteran Member] => James
        )

        [2012-12-21] => Array
        (
            [Mentor] => Evan Tobin
        )
    )
    [Website] => Array
    (
        [2012-12-10] => Array
        (
            [Mentor] => Evan Tobin
        )

        [2012-12-21] => Array
        (
            [Mentor] => Evan Tobin
        )
    )
) 
```

所以你可以看到它有多个团队，每个团队有多个约会日期，每天都会有不同的人从事不同的工作。使用此表，我希望它显示为：

```
Media Team
Role           || 2012-12-10 || 2012-12-21
Mentor         || Evan Tobin || Evan Tobin
Veteran Member ||   James    || 
```

我尝试过使用 foreach 语句，但是一旦我走得更远，它就会变得太多。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T01:09:58.693

这个给你：

```
<?php
// [your array]
$tabledata = array(
    'Media' => array(
        '2012-12-10' => array(
            'Mentor' => 'Evan Tobin',
            'Veteran Member' => 'James'
        ),
        '2012-12-21' => array(
            'Mentor' => 'Evan Tobin'
        )
    ),
    'Website' => array(
        '2012-12-10' => array(
            'Mentor' => 'Evan Tobin'
        ),
        '2012-12-21' => array(
            'Mentor' => 'Evan Tobin'
        )
    )
);
// [/your array]

// [the tables]
echo '<table border="1">';
foreach($tabledata as $teamkey => $teamval){
    // [helper]
    $dates = array();
    $roles = array();
    foreach($teamval as $datekey => $dateval) {
        if (!in_array($datekey, $dates)) {
            $dates[] = $datekey;
        }
        foreach($dateval as $rolekey=>$roleval) {
            if (!in_array($rolekey, $roles)) {
                $roles[] = $rolekey;
            }
        }
    }
    // [/helper]

    // [team name] >> row 1
    echo '<tr>';
    echo '<th align="left" colspan="'.(sizeof($dates)+1).'">'.$teamkey.' Team</th>';
    echo '</tr>';
    // [/team name]

    // [role column and date column] >> row 2
    echo '<tr>';
    echo '<td>Role</td>';
    foreach($dates as $date) {
        echo '<td>'.$date.'</td>';
    }
    echo '</tr>';
    // [/role column and date column]

    // [role and team member for each date] >> row 3, 4, 5, ... n
    foreach($roles as $role) {
        echo '<tr>';
        echo '<td>'.$role.'</td>';
        foreach($dates as $date) {
            echo '<td>';
            if (isset($teamval[$date][$role])) {
                echo $teamval[$date][$role]; // team member name
            }
            else {
                echo '&nbsp;'; // insert blank space for cross browser support
            }
            echo '</td>';
        }
        echo '</tr>';
    }
    // [/role and team member for each date]
}
echo '</table>';
// [/the tables] 
```

如果您想为每个团队提供单独的表格，您可以将 放入循环中。

希望这可以帮助。

# python - Python-试图找到具有最大绿色圆圈的图像

> ID：13897325
> 
> 赞同：1
> 
> 时间：2012-12-15T23:55:16.440
> 
> 标签：python, image, image-processing, python-3.x, scipy

我收到了一个包含数百张图片的文件。每个图像都包含一个白色背景上的绿色圆圈。我需要使用 python 程序确定哪个图像包含直径最大的圆。这些图像中的每一个都具有相同的尺寸，因此我相信也可以通过找到具有最多绿色像素的图像来确定答案。我知道 scipy 可以处理图像，但是当我尝试运行以下代码时：

```
from scipy import misc

image=open("/Users/Myname/Desktop/greencircles/image_0.png", "r")
misc.imread(image) 
```

...它给出了错误“模块”没有属性“imread”AI 朝着正确的方向发展？我已经搜索了一段时间的解决方案，但无济于事。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:51:11.827

由于您所拥有的只是白色区域上的绿色区域，因此您需要做的就是对非白色像素求和（对偶也可以正常工作）。在这里使用 scipy 也没多大意义，PIL 就足够了，颜色在你的任务中也不重要。假设典型的颜色范围为 [0, 255]：

```
from PIL import Image, ImageOps

x = ImageOps.grayscale(Image.open('input.png'))
print sum(1 for xi in x.getdata() if xi != 255) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:58:52.913

‛imread‛ 直接读取文件路径

# ruby-on-rails - 如何访问 fields_for 对象的关联方法？

> ID：13897327
> 
> 赞同：-1
> 
> 时间：2012-12-15T23:55:41.917
> 
> 标签：ruby-on-rails

我很难以深度嵌套的形式访问 fields_for 对象的关联方法。你能帮我理解我哪里出错了吗？

机会模型：

```
class Opportunity < ActiveRecord::Base
  has_many :seedlings
  accepts_nested_attributes_for :seedlings
end 
```

苗木型号：

```
class Seedling < ActiveRecord::Base
  belongs_to :opportunity
  belongs_to :potential_building
  accepts_nested_attributes_for :potential_building
end 
```

潜力建筑模型：

```
class PotentialBuilding < ActiveRecord::Base
  has_many :seedlings
end 
```

我希望我可以在 hidden_​​field 旁边写下 potential_building 的名称，但我显然不明白。我可以将 potential_building_id 写入页面，如下所示（haml）：

```
...
= opportunity_form.fields_for :seedlings do |seedling_form|
  = seedling_form.hidden_field :potential_building_id
  = seedling_form.object.potential_building_id # => 73
.... 
```

我希望访问协会的方法会像这样简单，但我不明白为什么不是这样。

```
...
= opportunity_form.fields_for :seedlings do |seedling_form|
  = seedling_form.hidden_field :potential_building_id
  = seedling_form.object.potential_building.name # => undefined method `name' for nil:NilClass
... 
```

你能帮我理解吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:01:57.717

```
class Opportunity < ActiveRecord::Base
  has_many :seedlings
  accepts_nested_attributes_for :seedlings
end 
```

[http://currentricity.wordpress.com/2011/09/04/the-definitive-guide-to-accepts_nested_attributes_for-a-model-in-rails-3/](http://currentricity.wordpress.com/2011/09/04/the-definitive-guide-to-accepts_nested_attributes_for-a-model-in-rails-3/)

# ruby-on-rails - 与团队一起构建应用程序时，如何在多个应用程序实例之间共享数据？

> ID：13897328
> 
> 赞同：1
> 
> 时间：2012-12-15T23:55:53.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, collaboration

我正在构建一个应用程序，并且有一位设计师正在与我一起设计应用程序的样式。

我将应用程序推送到私人 Github 存储库 - 但是一旦他设置好，他就没有所有数据。

我知道我可以在我的文件中包含一些数据`seeds.rb`- 但有些东西在那种格式下不起作用（比如需要上传或添加到各种记录中的文件）。

在同一应用程序的多个实例中使用同一数据集而无需通过电子邮件发送`development.sqlite3`文件的最佳方式是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:39:03.577

过去，我使用 Dropbox 帐户在设计人员和开发人员之间共享文件。

# apache - pywebsocket 不起作用

> ID：13897329
> 
> 赞同：2
> 
> 时间：2012-12-15T23:56:39.817
> 
> 标签：apache, websocket, mod-pywebsocket

这就是我`mod_pywebsocket`作为 apache 扩展安装的方式

```
root@senior:/var/www# wget http://pywebsocket.googlecode.com/files/mod_pywebsocket-0.7.8.tar.gz
root@senior:/var/www# tar xvf mod_pywebsocket-0.7.8.tar.gz
root@senior:/var/www# cd pywebsocket-0.7.8/src/
root@senior:/var/www/pywebsocket-0.7.8/src# py:/./setpuup.py build
running build
running build_py
root@senior:/var/www/pywebsocket-0.7.8/src# python ./setup.py install
running install
running build
running build_py
running install_lib
running install_egg_info
Removing /usr/local/lib/python2.6/dist-packages/mod_pywebsocket-0.7.8.egg-info
Writing /usr/local/lib/python2.6/dist-packages/mod_pywebsocket-0.7.8.egg-info    
root@senior:/var/www/pywebsocket-0.7.8/src# mkdir /var/www/_wsh/
root@senior:/var/www/pywebsocket-0.7.8/src# cp example/* /var/www/_wsh/
root@senior:/var/www/pywebsocket-0.7.8/src# cd /var/www/_wsh/
root@senior:/var/www/_wsh# chmod a+x *.py
root@senior:/usr/local/lib/python2.6/dist-packages/mod_pywebsocket# cd /usr/local/lib/python2.6/dist-packages/mod_pywebsocket
root@senior:/usr/local/lib/python2.6/dist-packages/mod_pywebsocket# chmod a+rx *.py 
```

**这是我在httpd.conf**中插入的文本

 **```
<IfModule python_module>
  PythonPath "sys.path+['/usr/local/lib/python2.6/dist-packages']"
  PythonOption mod_pywebsocket.handler_root /var/www/_wsh/
  PythonOption mod_pywebsocket.handler_scan /var/www/_wsh/
  #PythonOption mod_pywebsocket.allow_draft75 On
  #<Location /var/www/_vsh>
  #  PythonHeaderParserHandler mod_pywebsocket.headerparserhandler
  #</Location>
</IfModule> 
```

在 apaceh 重新启动后，我正在尝试`console.html`来自 pywebsocket 目录示例的代码（复制到 /var/www/_wsh 中）。但它不起作用，我无法打开连接。

当我尝试运行示例时，我得到了这个

```
root@senior:/usr# /var/www/_wsh/echo_client.py
Traceback (most recent call last):
  File "/var/www/_wsh/echo_client.py", line 995, in <module>
    main()
  File "/var/www/_wsh/echo_client.py", line 991, in main
    EchoClient(options).run()
  File "/var/www/_wsh/echo_client.py", line 840, in run
    self._handshake.handshake()
  File "/var/www/_wsh/echo_client.py", line 385, in handshake
    'Expected HTTP status code 101 but found %r' % status_code)
__main__.ClientHandshakeError: Expected HTTP status code 101 but found '200' 
```

你能帮我找出问题在哪里吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T17:54:23.940

将它作为独立服务器运行要容易得多。你试过吗？

```
"""Standalone WebSocket server.

Use this file to launch pywebsocket without Apache HTTP Server.

BASIC USAGE

Go to the src directory and run

  $ python mod_pywebsocket/standalone.py [-p <ws_port>]
                                         [-w <websock_handlers>]
                                         [-d <document_root>]

<ws_port> is the port number to use for ws:// connection.

<document_root> is the path to the root directory of HTML files.

<websock_handlers> is the path to the root directory of WebSocket handlers.
If not specified, <document_root> will be used. See __init__.py (or
run $ pydoc mod_pywebsocket) for how to write WebSocket handlers.

For more detail and other options, run

  $ python mod_pywebsocket/standalone.py --help

or see _build_option_parser method below.

For trouble shooting, adding "--log_level debug" might help you. 
```

**更新**

试试[这个链接](http://code.google.com/p/websocket-sample/wiki/HowToInstallMod_pywebsocket)来解决你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T20:44:59.817

在阅读了许多关于如何设置的教程后`pywebsockets`，我最终得到了这个配置：

```
LogLevel debug
<IfModule python_module>
  Timeout 0
  #This is path where I have copied pywebsocket
  PythonPath "sys.path+['/usr/local/lib/python2.6/dist-packages']"
  #This is path where I have my websocket connection handlers (files that responds to requests, I have there example files copied too)
  PythonOption mod_pywebsocket.handler_root /var/www/websockets/
  PythonOption mod_pywebsocket.handler_scan /var/www/websockets/
  PythonHeaderParserHandler mod_pywebsocket.headerparserhandler
</IfModule> 
```

以下是此路径的列表，以便更好地了解在哪里是什么：

```
root@senior:/var/www/websockets# ls /usr/local/lib/python2.6/dist-packages/
mod_pywebsocket  mod_pywebsocket-0.7.8.egg-info
root@senior:/var/www/websockets# ls /usr/local/lib/python2.6/dist-packages/mod_pywebsocket
common.py       handshake                __init__.pyc        mux.pyc             _stream_hixie75.pyc  util.pyc
common.pyc      headerparserhandler.py   memorizingfile.py   standalone.py       _stream_hybi.py
dispatch.py     headerparserhandler.pyc  memorizingfile.pyc  standalone.pyc      _stream_hybi.pyc
dispatch.pyc    http_header_util.py      msgutil.py          _stream_base.py     stream.py
extensions.py   http_header_util.pyc     msgutil.pyc         _stream_base.pyc    stream.pyc
extensions.pyc  __init__.py              mux.py              _stream_hixie75.py  util.py
root@senior:/var/www/websockets#
root@senior:/var/www/websockets# ls .
bench_wsh.py  console.html    echo_wsh.py      origin_check_wsh.py
close_wsh.py  echo_client.py  handler_map.txt  pywebsocket.conf 
```

我还必须编辑apache 的[mod_reqtimeout](http://httpd.apache.org/docs/2.2/mod/mod_reqtimeout.html)以保持连接活动（有关更多信息，请参阅此问题[为什么会自动关闭使用 pywebsocket 创建的 websocket？](https://stackoverflow.com/questions/6030436/why-would-a-websocket-created-with-pywebsocket-be-closed-automatically)）**

# python - Python 插件，例如 Minecraft Bukkit

> ID：13897330
> 
> 赞同：1
> 
> 时间：2012-12-15T23:56:41.330
> 
> 标签：python, plugins

我一直在读这个： http:
[//lkubuntu.wordpress.com/2012/10/02/writing-a-python-plugin-api/](http://lkubuntu.wordpress.com/2012/10/02/writing-a-python-plugin-api/)
我正在尝试做一些类似Minecraft帮助系统的事情。
假设我有我的主模块，帮助命令是：

> 帮助
> 测试1测试
> 2

然后，在加载插件后，我将拥有相同的设置，以及插件可用的设置。
另外，在处理命令时，我该怎么做才能区分来自内部程序的命令和来自插件的命令？！
到目前为止，我想出了这个：

```
import imp
import os

PluginFolder = "./plugins"
MainModule = "__init__"

def getPlugins():
    plugins = []
    possibleplugins = os.listdir(PluginFolder)
    for i in possibleplugins:
        location = os.path.join(PluginFolder,i)
        if not os.path.isdir(location) or not MainModule + ".py" in os.listdir(location):
            continue
        info = imp.find_module(MainModule, [location])
        plugins.append({"name":i, "info": info})
    return plugins

def loadPlugin(plugin):
    return imp.load_module(MainModule, *plugin["info"])

disponiveis = []
for i in getPlugins():
    print("Loading plugin "+ i["name"])
    plugin = loadPlugin(i)
    plugin.run()
    disponiveis.append(i["name"])

while 1:
    foo = raw_input(":")
    if foo == 'quit':
        break;
    elif foo in disponiveis:
        print "ok"
    else:
        continue 
```

与原始示例相比不多：|
我的大问题是它加载所有插件的循环。
目前我有 2 个插件，*hello*和*testing*。我该怎么做才能有这样的事情：

```
send_command(plugin_name, action) 
```

此外，if/elif 有点蹩脚......可用的命令应该来自插件。
也许使用*字典*？！？！然后在加载插件时，它会将附加命令添加到该字典？！？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T09:22:36.323

正如您引用的博客条目的最后一行所说：“现在，当然，这个插件 API 非常简单，并且可以轻松（并且应该）根据您的程序需求进行扩展。”

示例代码中定义的唯一“api”是一个`plugin.run()`不返回任何内容的方法。因此，至少从您的问题来看，您需要一个描述加载插件具有的可用“命令”。一种方法是定义所有插件必须提供的另一种方法，该方法`available_commands()`返回一个命令字典，其中键是所有命令名称，值是执行它们的相应函数。

但是，这可能需要通过某种机制进行扩展，以将命令参数信息也提供回客户端应用程序。如何做到这一点仅受您的想象力限制，要么自己发明一些东西，要么学习其他人是如何做到的，也许可以通过在 StackOverflow 上提出更具体的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T14:04:49.553

感谢您的回答和帮助，但我不应该尝试重新发明轮子。
这个框架很棒：http:
[//yapsy.sourceforge.net/](http://yapsy.sourceforge.net/)

奇迹般有效。
（它确实有助于了解更多关于 Python 的信息）

# java - tabhost 类未发现异常

> ID：13897334
> 
> 赞同：-1
> 
> 时间：2012-12-15T23:57:13.727
> 
> 标签：java, android, android-tabhost, classnotfoundexception

在我的 android 应用程序中，我正在尝试实现 tabhost。实际上我正在尝试来自 androidhive 的 udapt 教程但是我不断收到致命错误。帮我解决这个错误

```
public class AndroidTabAndListView extends TabActivity {
    // TabSpec Names
    private static final String INBOX_SPEC = "Inbox";
    private static final String OUTBOX_SPEC = "Outbox";
    private static final String PROFILE_SPEC = "Profile";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TabHost tabHost = getTabHost();

        TabSpec inboxSpec = tabHost.newTabSpec(INBOX_SPEC);

        inboxSpec.setIndicator(INBOX_SPEC, getResources().getDrawable(R.drawable.icon_inbox));
        Intent inboxIntent = new Intent(this, InboxActivity.class);

        inboxSpec.setContent(inboxIntent);

        TabSpec outboxSpec = tabHost.newTabSpec(OUTBOX_SPEC);
        outboxSpec.setIndicator(OUTBOX_SPEC, getResources().getDrawable(R.drawable.icon_outbox));
        Intent outboxIntent = new Intent(this, OutboxActivity.class);
        outboxSpec.setContent(outboxIntent);

        TabSpec profileSpec = tabHost.newTabSpec(PROFILE_SPEC);
        profileSpec.setIndicator(PROFILE_SPEC, getResources().getDrawable(R.drawable.icon_profile));
        Intent profileIntent = new Intent(this, Testactivity.class);
        profileSpec.setContent(profileIntent);

        tabHost.addTab(inboxSpec); 
        tabHost.addTab(outboxSpec);
        tabHost.addTab(profileSpec);

    }
} 
```

布局

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

适配器

```
public class CandidateAdapter extends BaseAdapter{
    Context ctx;
    LayoutInflater lInflater;
    ArrayList<Candidate> objects;
    CandidateAdapter(Context context, ArrayList<Candidate> candidates) {
            ctx = context;
            objects = candidates;
            lInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          }
    public int getCount() {
        return objects.size();
      }
    public Object getItem(int position) {
        return objects.get(position);
      }
    public long getItemId(int position) {
        return position;
      }
    Candidate getCandidate(int position) {
        return ((Candidate) getItem(position));
      }
    public View getView(int position, View convertView, ViewGroup parent) {
        // используем созданные, но не используемые view
        View view = convertView;
        if (view == null) {
          view = lInflater.inflate(R.layout.inbox_list_item, parent, false);
        }
        Candidate p = getCandidate(position);
        ((TextView) view.findViewById(R.id.from)).setText(p.get_name());
        ((TextView) view.findViewById(R.id.subject)).setText(p.get_office());
        return view;
    }

} 
```

活动

```
public class InboxActivity extends ListActivity {

    List<Candidate> candidates;
    private DatabaseHandler db;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.inbox_list);
        db = new DatabaseHandler(this);
        candidates = db.getAllCandidates(1);
        CandidateAdapter adapter = new CandidateAdapter(this,(ArrayList) candidates);
        ListView lvMain = (ListView) findViewById(R.id.lvMain);
        lvMain.setAdapter(adapter);

    }

} 
```

活动布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/lvMain"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

列表项布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <!-- From Label -->
    <TextView
        android:id="@+id/from"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="8dip"
        android:paddingLeft="8dip"
        android:paddingBottom="4dip"
        android:textSize="20dip"
        android:textStyle="bold" />

    <!-- Mail Subject -->
    <TextView android:id="@+id/subject"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:paddingLeft="8dip"
        android:paddingBottom="6dip"
        android:textSize="15dip"
        android:layout_below="@id/from"/>

    <!-- Mail date -->
    <TextView android:id="@+id/date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:padding="8dip"/>

</RelativeLayout> 
```

其他活动实际上是相同的唯一字段：

> setContentView(R.layout.inbox_list); 候选人 = db.getAllCandidates(1);

是不同的

日志输出

```
12-15 23:27:47.529: W/dalvikvm(397): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
12-15 23:27:47.568: E/AndroidRuntime(397): FATAL EXCEPTION: main
12-15 23:27:47.568: E/AndroidRuntime(397): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.s1042512.newvoter/com.s1042512.newvoter.AndroidTabAndListView}: java.lang.ClassNotFoundException: com.s1042512.newvoter.AndroidTabAndListView in loader dalvik.system.PathClassLoader[/data/app/com.s1042512.newvoter-2.apk]
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.os.Looper.loop(Looper.java:123)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.ActivityThread.main(ActivityThread.java:4627)
12-15 23:27:47.568: E/AndroidRuntime(397):  at java.lang.reflect.Method.invokeNative(Native Method)
12-15 23:27:47.568: E/AndroidRuntime(397):  at java.lang.reflect.Method.invoke(Method.java:521)
12-15 23:27:47.568: E/AndroidRuntime(397):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
12-15 23:27:47.568: E/AndroidRuntime(397):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
12-15 23:27:47.568: E/AndroidRuntime(397):  at dalvik.system.NativeStart.main(Native Method)
12-15 23:27:47.568: E/AndroidRuntime(397): Caused by: java.lang.ClassNotFoundException: com.s1042512.newvoter.AndroidTabAndListView in loader dalvik.system.PathClassLoader[/data/app/com.s1042512.newvoter-2.apk]
12-15 23:27:47.568: E/AndroidRuntime(397):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
12-15 23:27:47.568: E/AndroidRuntime(397):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
12-15 23:27:47.568: E/AndroidRuntime(397):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
12-15 23:27:47.568: E/AndroidRuntime(397):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
12-15 23:27:47.568: E/AndroidRuntime(397):  ... 11 more
12-15 23:27:55.818: I/Process(397): Sending signal. PID: 397 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:10:13.703

您的包名有问题，请确保您的所有类和您的 Android Manifest 引用相同的包名。

# c# - 互换使用来自 dll 的方法和 WCF 方法

> ID：13897340
> 
> 赞同：-1
> 
> 时间：2012-12-15T23:58:12.097
> 
> 标签：c#, .net, wcf, inversion-of-control

我有实现一些业务逻辑的dll。我创建了 WCF 服务，该服务公开了使用此 dll 的方法。最后还有一个调用 WCF 服务的应用程序。但在某些情况下，最好从 dll 调用方法而不是调用 WCF 服务方法。我的问题是“如何告诉应用程序必须使用哪种方法（来自 wcf 或来自 dll）？”。我必须使用国际奥委会吗？你能给我一个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:00:05.370

这里的答案是关于信任。如果您的应用程序是受信任的，它应该直接调用 DLL。

如果您的应用程序不受信任，例如它是一个客户端应用程序，它可能会在不应该进行这些调用时进行这些调用，那么它应该通过 WCF 服务，以便可以控制安全性。

除非您可以提供令人信服的理由让您的应用程序需要实际来回切换，否则它不应该。

# cocoa - 有没有办法让 NSView 更频繁地重绘？

> ID：13897341
> 
> 赞同：1
> 
> 时间：2012-12-15T23:58:23.287
> 
> 标签：cocoa, user-interface, drawing, nsview

我目前有一些代码可以做这样的事情（大大简化，但足以说明这一点）：

```
@property (weak) IBOutlet CustomViewClass *customView;

...

for (int i=0; i<iterations; i++) {

    // Crunch some data (Up to ~200,000 operations)...

    // Update view to represent where we are in the process:
    [_customView setNeedsDisplay:YES];

} 
```

每当我为给定数量的迭代运行代码时，自定义视图 drawRect: 方法只会在所有迭代完成后调用一次。

我想要的是在每次迭代后强制更新视图，并等到视图被重绘后再进行下一次迭代 - 但我在文档中找不到任何地方如何让它像我一样工作喜欢！

我觉得如果我可以直接调用 drawRect: 就可以解决我的问题，但我知道 NSView 不允许这样做！

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T01:30:25.607

缺乏视图更新甚至不是您当前方法的最大问题。最大的问题是您的应用程序在完成之前一直挂起。用户不能取消（如果您甚至提供了取消按钮）、告诉应用程序隐藏、在工作进行时在应用程序中执行任何其他操作或退出应用程序。

正确的方法是将循环体移动到 NSOperation。您可以通过继承 NSOperation 或使用块创建一个来做到这一点。然后，将所有操作放入[队列](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperationQueue_class/)中。

如果您在循环中所做的事情可以[安全地](http://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Multithreading/ThreadSafetySummary/ThreadSafetySummary.html)并行运行，那么您应该创建一个队列并使用该队列。如果您需要一次执行一项操作，请使用依赖项将每个操作链接到之前的操作。如果它绝对必须发生在主线程上，你可以使用主队列，但你应该在主线程上做最少的事情，你可以安全地逃脱。

随着工作的进行，在主线程/主队列上运行一些代码，告诉您的视图`setNeedsDisplay:`. 由于操作不在主队列中（假设您没有将它们放在那里），或者至少被分解，所以这可能在工作进行时发生。

进一步阅读：

*   [使用 NSOperation 管理并发](http://developer.apple.com/library/mac/featuredarticles/ManagingConcurrency/)，正如顶部所承认的，但仍然是一个很好的介绍）
*   [并发编程指南](http://developer.apple.com/library/mac/documentation/General/Conceptual/ConcurrencyProgrammingGuide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T01:15:24.693

不确定这是否是您想要的，但请尝试使用 CVDisplayLink。[http://developer.apple.com/library/mac/#qa/qa1385/_index.html](http://developer.apple.com/library/mac/#qa/qa1385/_index.html)

# java - 如何设置 Jcurses 库？

> ID：13897344
> 
> 赞同：12
> 
> 时间：2012-12-15T23:59:32.920
> 
> 标签：java, eclipse, jcurses

我正在尝试使用 Jcurses 库对 Rougelike 进行编码。我想知道我应该如何具体设置 Jcurses 以便我可以编译和编写访问它的类。（我使用的是 Windows。）到目前为止，我已经尝试在 Eclipse 中包含该库，但是按照包含库的正常过程会导致错误。当一切都设置好后，我的目录应该是什么样子（与 Jcurses 文件夹的存储位置和我的项目的存储位置有关），以及我需要设置哪些路径？

PS：我发现有人问过类似的问题，但它似乎提供了 Jcurses 的替代方案，而不是如何使用 Jcurses。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-08T11:27:41.950

确保您有适合您平台的 Jcurses（可在[此处](http://sourceforge.net/projects/javacurses/files/javacurses/0.9.5b/)`jcurses-windows-0.9.5b.zip`获得。接下来，要安装这些步骤（来自[ECLIPSE_JCURSES_HOWTO.txt](http://downloads.sourceforge.net/project/javacurses/ECLIPSE_JCURSES_HOWTO.txt?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fjavacurses%2Ffiles%2FECLIPSE_JCURSES_HOWTO.txt%2Fdownload&ts=1386501782&use_mirror=softlayer-dal)） -

如果您知道 Eclipse 使用哪个命令来启动您的程序，请从第 4 步开始。

步骤 1) 像往常一样运行 Java 应用程序（失败也没关系），然后切换到调试视图。

步骤 2) 右键单击​​该进程，然后选择“属性”打开属性窗口。

步骤 3) 选择并复制用于启动程序的命令行参数。

第 4 步）点击“外部工具”旁边的箭头按钮（带有红色小工具箱的播放图标），然后点击“外部工具配置”

步骤 5) 使用以下数据创建一个新配置：

```
Location: The path to the cmd.exe of your Windows OS.
  For Example: C:\WINXP\system32\cmd.exe

  Working Directory: Whatever working directory you want.

  Arguments: "/c start C:\WINXP\system32\cmd.exe /k " followed by the previously copied command.
  For Example:
    /c start C:\WINXP\system32\cmd.exe /k C:\Programme\Java\jre6\bin\java.exe -Dfile.encoding=Cp1252 -classpath "C:\Dokumente und Einstellungen\mccae\Eigene Dateien\javawork\TWCC+\bin" at.co.lipski.twcc2.console.TWCCDaemon 
```

# matlab - matlab中的多个if条件

> ID：13897346
> 
> 赞同：0
> 
> 时间：2012-12-15T23:59:47.520
> 
> 标签：matlab

在运行下面的代码时，条件 (1) 和 (3) 不会在 Matlab 中读取。我尽了最大的努力，但无法弄清楚错误。任何帮助都感激不尽。

```
 % inputs are a_s, p, t, a
 % a_s=single number
 % p,t,a are column vectors
 % output is P (also a column vector)

 if a_s<a<=a_s-180
     if p<=180-t    %------(1)
         P=p+t;
     elseif p>180-t %------(2)
         P=p+t-180;
     end
 elseif a<=a_s | a_s-180<a
     if p>=t        %------(3)
         P=p-t;
     elseif p<t     %------(4)
         P=p-t+180;
     end
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:15:01.133

尝试以下替换：

替换这个：

```
 if p<=180-t    %------(1)
     P=p+t;
 elseif p>180-t %------(2)
     P=p+t-180;
 end 
```

为了这：

```
P = p+t;
P(P<=180) = P(P<=180)-180; 
```

和这个：

```
 if p>=t        %------(3)
     P=p-t;
 elseif p<t     %------(4)
     P=p-t+180;
 end 
```

为了这：

```
P = p-t;
P(P<0) = P(P<0)+180; 
```

至于两个ifs，`a_s`不清楚`a`是在`any()`条件为真时执行分支还是仅在所有条件都为真（这是默认设置）时执行分支。请记住，这`a`是一个向量，`a<a_s`布尔向量也是如此。

# ios - 核心数据实体中的托管对象导致“键值编码不符合键”错误

> ID：13897348
> 
> 赞同：0
> 
> 时间：2012-12-16T00:00:14.783
> 
> 标签：ios, core-data, entity-relationship, nsmanagedobject

我对 Core Data 和 Objective-c 还是很陌生。我一直在上下核心数据文档，不知道我在这里做错了什么。

在运行时，将 NSManagedObject“ReportItem”添加到 NSManagedObject“RoomItem”中的 NSMutableSet“reports”时出现以下错误：`NSUnknownKeyException', reason: '[<RoomItem 0x747c850> valueForUndefinedKey:]: the entity RoomItem is not key value coding-compliant for the key "reports"`

**错误发生在下面“creatReportForRoom”方法中的“RoomList”存储类内部，该方法在输入相关数据的 UIViewController 中的 viewWillDisapear 上调用：**

```
- (ReportItem *)creatReportForRoom:(RoomItem *)currentRoom Report:(ReportItem *)report
{
    NSDate *dateCreated = [NSDate date];

    ReportItem *detailItem = [NSEntityDescription insertNewObjectForEntityForName:@"ReportItem" inManagedObjectContext:context];

    [detailItem setDateReportCreated:dateCreated];

    NSMutableSet *reports = [currentRoom mutableSetValueForKey:@"reports"];

    [reports addObject:detailItem];  //error is occurring at this line

    [allReports addObject:detailItem];
    return detailItem;
} 
```

**“RoomItem”NSManagedObject 文件在这里：**

房间物品.h

```
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

@interface RoomItem : NSManagedObject

@property (nonatomic, strong) NSString *building;
@property (nonatomic, strong) NSString *room;
@property (nonatomic, retain) NSString *imageKey;
@property (nonatomic, retain) UIImage *buildingImage;
@property (nonatomic, strong) UIImage *buildingThumbnail;
@property (nonatomic, strong) NSData *buildingThumbnailData;
@property (nonatomic) double objectIndex;
@property (nonatomic, strong) NSDate *dateCreated;

@property (nonatomic, retain) NSMutableSet *reports;

@end 
```

房间物品.m

```
#import "RoomItem.h"

@implementation RoomItem

@dynamic building, buildingThumbnail, buildingThumbnailData, objectIndex, room, dateCreated, imageKey, buildingImage, reports;

@end 
```

**我已经包括了“createItem”方法是创建和存储 RoomItem，以防我在那里做错了什么：**

```
- (RoomItem *)createItem
{
    double order;

    //create new roomItem
    //tracks what number item it's creating
    if ([allItems count] == 0) {
        order = 1.0;
    }
    else
    {
        order = [[allItems lastObject] objectIndex] + 1;
    }
    NSLog(@"Adding after %d items, order = %.2f", [allItems count], order);

    RoomItem *detailItem = [NSEntityDescription insertNewObjectForEntityForName:@"RoomItem"
                                                    inManagedObjectContext:context];
    [detailItem setObjectIndex:order];
    [detailItem setDateCreated:[NSDate date]];

    [allItems addObject:detailItem];

    return detailItem;
} 
```

**具有关系的数据模型：** ![在此处输入图像描述](../Images/a8fca9c8daf6f79d395f00dc5effdb81.png)

**关系图：** ![在此处输入图像描述](../Images/1f1336b4984b5df7211d192195d9b82c.png)

任何有关解决此问题的建议将不胜感激。请让我知道是否有任何我未能包含的内容可能会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T10:57:04.983

图像中显示的核心数据模型与代码之间存在差异。

*   在模型图像中，`reports`是从`ReportItem`到的关系`RoomItem`。
*   您的代码将其视为从`RoomItem`to的关系`ReportItem`。

如果后者是您想要的，那么您必须在 Core Data 模型编辑器中正确命名关系：`reports`作为关系 on`RoomItem`和`roomReportsFor`作为逆关系 on `ReportItem`。

我也*强烈建议*你不要自己编写托管对象子类文件，而是让它由 Xcode 生成：在 Core Data 模型编辑器中选择实体，然后从菜单中选择“Editor -> Create NSManagedObject Subclass ...” .

“RoomItem.h”文件中还有另一个错误：对多关系的数据类型是`NSSet`，而不是`NSMutableSet`。

使用 Xcode 创建的托管对象子类文件有助于避免这种不一致和错误。您只需要记住在核心数据模型发生更改后重新创建文件。

（只是为了完整起见：还有其他工具可以创建托管对象子类，例如[mogenerator](http://rentzsch.github.com/mogenerator/)，有些人推荐。）

* * *

这是我认为关系应该如下所示的简化版本：

![在此处输入图像描述](../Images/dc9afd64c40fbe08d791f9f071ed90c7.png)

*   `reports`: from `RoomItem`to `ReportItem` (to-many 关系),
*   `room`：从`ReportItem`到`RoomItem`（一对一关系，倒数`reports`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:04:37.450

我在更新 Core Data 模型时也遇到过这种情况。在某些情况下，模拟器似乎保留了旧模型。这通常可以通过从模拟器中删除应用程序并清理/构建来解决。

# ios - 我需要以不同的方式验证两个 uitextfields。我该怎么做呢？

> ID：13897351
> 
> 赞同：0
> 
> 时间：2012-12-16T00:01:15.867
> 
> 标签：ios, uikit, uitextfield, uitextfielddelegate

一个文本字段只包含字母字符，另一个是字母数字。我在我的 ViewController 中为其中之一定义了 shouldChangeCharactersInRange。现在我不知道应该在哪里定义其他 uitextfield 的逻辑。

有人可以帮我理解这应该如何工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:08:27.940

如果它们都具有相同的委托，那么它们都将在相同的 shouldChangeCharactersInRange 方法中进行验证。您需要在该方法中放置一个 if-else 子句来检查哪个文本字段是发件人。您需要两个文本字段的 IBOutlets，以便进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:12:22.737

你有几个选择。如果您为文本字段创建了 iVar，则检查调用`shouldChangeCharactersInRange`的是哪个 iVar 就像`==`. 下面我还展示了另一个选项是将标签分配给文本字段并检查发送文本字段的标签。

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    //Your first option
    if (textField == myFirstTextField) {
        //
    }else{
        //
    }
    //another option, if you don't want to create iVars you can assign tags to your text fields and do this
    if (textField.tag == 99) {
        //
    }else{
        //
    }
} 
```

# php - 适当的 CakePHP 模型以本地使用多选和“动态”多选（例如标签）

> ID：13897354
> 
> 赞同：2
> 
> 时间：2012-12-16T00:01:43.190
> 
> 标签：php, cakephp, has-and-belongs-to-many, multiple-select

在我的模式测试*HABTM*变量中（最初我使用 hasMany，但我发现更多使用 HABTM 的文档，即使它对我来说似乎有点过分）。

我想在 CakePHP 表单中使用多项选择，我不想在保存、检索和预填充数据时遇到麻烦（即 beforeSave 和 beforeFind 中的丑陋数组操作、用于检索所选选项的额外查询和其他事情这可能会导致我比我可能更早地脱发）。
一个用例是预先知道选项的多项选择，另一个需要允许创建新选项和删除旧选项（我正在使用 select2）。

当我阅读 FormHelper 文档时，借助`cake bake`一些[模型 HABTM 文档，](http://book.cakephp.org/2.0/en/models/saving-your-data.html#saving-related-model-data-habtm)我发现

1.  我必须将我的多选表单字段命名为属于它的模型，即变量。
    它隐含在 FormHelper 文档中，但绝对可以更突出显示。
2.  也是隐含的：因为`find()`操作获取字段的可能值，所以我必须调用变量模型中的字段`id`和`name`（它如何从输入调用中的模型名称中知道要显示的内容）。我可以更改`find`'s 选项，但我认为这在其他步骤中打破了惯例。
3.  不一致的是，如果我想在控制器中提供可能值的列表，我必须设置一个小写、驼峰化和复数形式的变量（不像我的模型那样大写和单数，就像我必须命名表单字段，而不是小写，下划线- 分隔和单数，如我的姓名字段和我的表格）。

我以为我不需要在控制器中设置可能的选项（因为我要么知道它们，要么它们是由用户即时添加的，我真的不想事先用它们填充数据库），但我试图绕开大会。除非我事先用它们填充数据库并将它们设置在控制器中，否则我无法让它工作。

与单一选择的处理相比，这似乎很脆弱或至少更狭窄。

## 我的持续问题

1.  使用 HABTM，我无法即时创建新选项（对于一个用例可以，但对于另一个用例则不行，这更像是标记）。
2.  使用HABTM，我不想用选项填充数据库。而且我真的不想在控制器中设置选项，而是在视图中设置选项（因为我预计这会导致一页上的多个“测试”出现问题，如果没有那么没关系）。
3.  `Form->input`使用HABTM，当我将其更改为时它不起作用`Form->select`（并不重要，但增加了我的解决方案脆弱的感觉）。
4.  使用hasMany，我可以自动选择我在数据库中填写的值，但它不会破坏或创建关联（即删除子表中不再选择的选项，即使它被声明为依赖）。我认为这是由于这样一个事实，即我没有正确传递子表的 ID，但是 Cake 的方法是如何做到这一点的呢？

## 示例代码

```
/* Model Variable.php */
class Variable extends AppModel {
    public $belongsTo = 'Test';
}

/* Model Test.php */
class Test extends AppModel {
    public $belongsTo = 'Study';
    public $hasAndBelongsToMany = array(
            'Variable' => array(
                'className' => 'variable',
                'joinTable' => 'tests_to_variables',
                'foreignKey' => 'test_id',
                'associationForeignKey' => 'variable_id',
                'with' => 'TestsToVariables',
            ),
        );
}

/* in baked TestsController.php */
$variables = $this->Test->Variable->find('list');
$this->set(compact('variables'));

/* in edit.ctp, the baked view */
echo $this->Form->input('Variable'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:55:17.317

Cake`Form::input()`具有多选选项，它还会自动填充值并选择以前保存的数据。

这怎么不符合您的需求，您是否尝试过书中解释的内容？

[http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#creating-form-elements)

# c++ - 字符串在 C++ 中初始化为 NULL

> ID：13897362
> 
> 赞同：4
> 
> 时间：2012-12-16T00:03:56.057
> 
> 标签：c++, string, null

```
string a=NULL; 
```

它给出了错误。为什么以及如何将字符串初始化为 NULL？

但是当我写

```
string a="foo"; 
```

这很好用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T00:05:43.813

实际上要得到一个空`std::string`，你只需写

```
std::string a; 
```

`std::string`的默认构造函数将为您提供一个空字符串，而无需进一步提示。

顺便说一句，通常不鼓励在 C++ 中使用 NULL，建议要么使用 0（无论如何都倾向于定义 NULL），或者如果你有足够现代的编译器，`nullptr`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T00:12:03.813

*空*字符串和*空字符串*是有区别的（空字符串仍然是有效字符串）。如果您想要一个“可为空”的对象（*最多*可以容纳一个特定类型的对象），您可以使用[`boost::optional`](http://www.boost.org/doc/libs/1_35_0/libs/optional/doc/html/index.html)：

```
boost::optional<std::string> str; // str is *nothing* (i.e. there is no string)
str = "Hello, world!"; // str is "Hello, world!"
str = ""; // str is "" (i.e. empty string) 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-16T00:09:07.990

让我们分解一下您实际上在做什么：

```
string a=NULL; 
```

首先你执行`string a`. 这将在堆栈上创建一个具有默认值（空字符串）的新对象。然后执行`a=NULL`，调用字符串类的赋值函数。但什么是`NULL`？`NULL`在 C++ 中是宏扩展为`0`. 因此，您正在尝试将整数分配给`string`变量，这当然是不可能的。

```
string a="abc" 
```

有效，因为您要分配一个 char 数组，并且`string`该类具有为 char 数组重载的赋值运算符方法，但不适用于整数。这就是为什么`NULL`不起作用而“abc”起作用的原因。

# javascript - 从获取值的问题javascript 中的表单 为什么我可以从“Från omgång”列表而不是“Till Omgång”中获得结果？在此处检查此页面右侧的过滤器按钮，然后在“till omgång”字段中选择第二个值，您会收到错误消息。我不知道为什么第二个字段中的值为空，请仔细检查它是否拼写正确。HTML 代码

|  
> ID：13897364
> 
> 赞同：0
> 
> 时间：2012-12-16T00:04:04.233
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:15:46.700

```
var to = document.to.title.value.toString(); 
```

应该

```
var to = document.to.tit.value.toString(); 
```

但是，正如您所指出的，某些浏览器仍然不满意。Opera 不喜欢表单名称是`to`，因此将其更改为`toForm`并更新您的代码会使 Opera 再次高兴。 |
| --- |

# android - asmx 在标头中期望什么 sessionid/cookie 信息？

> ID：13897370
> 
> 赞同：1
> 
> 时间：2012-12-16T00:04:52.847
> 
> 标签：android, forms-authentication, asmx, ksoap2, android-ksoap2

我在调用登录 webmethod 时保存了 http 标头 cookie/sessionid 信息，因此我可以将其发送回由 formauthentication 保护的后续 webmethod 调用。我想我只需要知道正确的标头值即可保存并将它们发回。

我正在使用 ksoap2 从一个 android 应用程序调用这些服务。

当我在调用登录时单步执行代码时。我看到**两个** `Set-Cookie`标题项目：

```
Set-Cookie
ASP.NET_SessionId=wblzzrtfmli4blku2dslw5iw; path=/; HttpOnly

Set-Cookie
.ASPXAUTH=8264E023428DA853BB163504C0D375D792FC631BB873F04D196E04BAEDE7F7BB39BB5C840D0CD0613A0DD58B2456F12EE21F212D93457F3D6BC2FC343C6AE1E3DD97473B055B36379D178FE6C412EFF61CFCE7FACAF43EEAE85C46B5123CB97C3AFF156F54921993F4A2B85BEE239EAFB05AFFF58FBDA3B7EBDC59B5E0A614D8CC086B5C7DF3A884DE95DBE05F6A138DB97241666870AAF9320EDD; path=/; HttpOnly 
```

正如我从此处的[文档和此处](http://code.google.com/p/ksoap2-android/wiki/Cookies)的[答案](https://stackoverflow.com/a/6408988/442580)所了解的那样，我必须`Set-Cookie`使用`Cookie`. 但正如您在上面看到的，我得到了**两个 Set-Cookie**标题项。那么我应该发回哪个，我可以按原样发回还是我需要去掉那`.ASPXAUTH=`部分或其他任何东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T00:52:43.983

当我在我的 Web 应用程序中从 JQuery Ajax 调用安全服务时，我能够通过嗅探 Set-Cookie 标头的样子来得到答案。

基本上我使用分号“;”连接了两个 Set-Cookie 值。

在登录时我保存它是这样的：

```
StringBuilder cookieBuilder = new StringBuilder();

int intCookieValueCount = 0;
for (Object header : headerList) {
    HeaderProperty headerProperty = (HeaderProperty) header;
    String headerKey = headerProperty.getKey();
    String headerValue = headerProperty.getValue();

    if(headerKey != null){
        if(headerKey.equals("Set-Cookie"))
        {
            if(intCookieValueCount!=0){
                cookieBuilder.append("; ");
            }                   
            cookieBuilder.append(headerValue);
            intCookieValueCount++;
        }                   
    }
}

AppSettings.setSessionCookie(cookieBuilder.toString()); 
```

在随后的电话中：

```
HeaderProperty headerPropertyObj = new HeaderProperty("Cookie", AppSettings.getSessionCookie());
@SuppressWarnings("rawtypes")
List headerList = new ArrayList();

headerList.add(headerPropertyObj);

androidHttpTransport.call(SOAP_ACTION, envelope, headerList); 
```

# objective-c - 具有有效数字的 NSNumberFormatter 错误地格式化 0.0

> ID：13897372
> 
> 赞同：2
> 
> 时间：2012-12-16T00:05:14.580
> 
> 标签：objective-c, ios, nsnumberformatter

我有一个 NSNumberFormatter 设置为使用有效数字进行格式化，因此它应该只显示正确显示值所需的十进制数字。

当它用于格式化`7.0`时，它完全按预期工作并产生`@"7"`，但是当它用于`0.0`格式化格式化程序时，它会产生`@"0.0"`而不是`@"0"`预期的那样。

```
NSNumberFormatter *doubleValF = [[NSNumberFormatter alloc] init];
[doubleValF setNumberStyle:NSNumberFormatterDecimalStyle];
[doubleValF setRoundingMode:NSNumberFormatterRoundHalfUp];

doubleValF.maximumFractionDigits = 9;
doubleValF.minimumFractionDigits = 0;
doubleValF.minimumSignificantDigits = 0;
doubleValF.maximumSignificantDigits = 30;
[doubleValF setUsesSignificantDigits:YES];

double value1 = 0.0;
NSString *value1String = [doubleValF stringFromNumber:[NSNumber numberWithDouble:value1]];

double value2 = 7.0;
NSString *value2String = [doubleValF stringFromNumber:[NSNumber numberWithDouble:value2]];

NSLog(@"value1=%@", value1String);
NSLog(@"value2=%@", value2String); 
```

当我运行此代码时，我得到以下输出：

```
2012-12-15 15:57:03.425 StackOverflowTests[41701:11303] value1=0.0
2012-12-15 15:57:03.426 StackOverflowTests[41701:11303] value2=7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T20:58:36.707

按照 David 的 LaMacchia 的帖子，只需检查零值并设置 sig fig 模式：

```
if(fabs(value) < 1e-6) {
    self.numberLabelFormatter.usesSignificantDigits = NO;
}
else {
    self.numberLabelFormatter.usesSignificantDigits = YES;
}
self.numberLabel.text = [self.numberLabelFormatter stringFromNumber:[NSNumber numberWithDouble:value]]; 
```

这可能不是*正确*的方法，但它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:16:10.967

该问题与您设置`usesSignificantDigits`为`YES`. 我相信后面的数字 in`0.0`被认为是重要的。

这里有一个相关问题的很好的讨论：[https ://stackoverflow.com/a/13110633/1435955](https://stackoverflow.com/a/13110633/1435955)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-13T12:55:40.813

尝试将数字格式化程序的 zeroSymbol 属性设置为 @"0"。

```
doubleValF.zeroSymbol = @"0"; 
```

# php - 关于mysqli的PHP继承

> ID：13897379
> 
> 赞同：3
> 
> 时间：2012-12-16T00:06:29.060
> 
> 标签：php, mysql, mysqli, scope

我创建了一个名为 Database 的类。

```
class Database extends mysqli {

    public function __construct() {
        parent::__construct();
        $mysqli = new mysqli(DBHOST, DBUSER, DBPASSWORD, DBDATABASE);

        if (mysqli_connect_errno()) {
            printf("Connect failed: %s\n", mysqli_connect_error());
            exit();
        }
    }   
} 
```

还有一个扩展数据库的名为 Model 的类

```
class Model {

    function __construct() {
        $this->db = new Database();        
    }
} 
```

还有一个扩展 Model 的类 registerModel

```
class registerModel extends Model {

    public function __construct() {
        echo "This is the register Model";
    }

    public function register(//VARIOUS PASSED VALUES) {
        **$stmt = $mysqli->prepare("INSERT INTO users (firstName, lastName) values (?, ?)");**
        ...
        ... More Code
        ...

    } 
```

我想要做的是`$mysqli`从原始数据库类中获取，但我不确定如何引用它。我已经尝试了一切，但似乎没有任何效果。

PS 在我的应用程序中总是需要前两个类，最后一个 registerModel 类是通过控制器调用的。这就是为什么我不在子类中构造父类的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:13:41.503

使其成为`Database`类内的字段：

```
class Database extends mysqli {
    **public $mysqli;**

    public function __construct() {
        parent::__construct();
        **$this->**mysqli = new mysqli(DBHOST, DBUSER, DBPASSWORD, DBDATABASE);

        if (mysqli_connect_errno()) {
            printf("Connect failed: %s\n", mysqli_connect_error());
            exit();
        }
    }   
}
```

然后你可以像这样引用它：

```
$stmt = $**this->db->**mysqli->prepare("INSERT INTO users (firstName, lastName) values (?, ?)");
```

但是您还需要保留父构造函数：

```
echo "This is the register Model";
**parent::__construct();**
```

**最后，你的`Database`类*不应该*extend `mysqli`，**因为你实际上并没有使用那个继承；您正在创建一个完全不同的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T00:14:25.177

在您的注册模型中，构造函数需要调用父构造函数

```
<?php
class registerModel extends Model {
public function __construct() {
    echo "This is the register Model";
    parent::__construct();
} 
```

然后你可以从

```
$this->db 
```

# coldfusion - 使用 具有无效电子邮件帐户的 from 属性

> ID：13897380
> 
> 赞同：1
> 
> 时间：2012-12-16T00:06:59.500
> 
> 标签：coldfusion, coldfusion-10, cfmail

我想使用这个简单的代码从 error@domain.com 向调试团队 debug@domain.com 发送一封电子邮件

```
<cfmail to="debug@domain.com" from="error@domain.com" 
 subject="sending error message plz respond!" 
 username="sender@domain.com" password="password-correct" 
 server="mail.domain.com" type="html">
      bla bla bla bla blga    
</cfmail> 
```

问题是如果“发件人”电子邮件地址不是现有的电子邮件帐户，我会在 ColdFusion 的邮件日志中收到验证错误，尽管用户名是正确的。这曾经在cf8中工作，他们现在改变了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T00:28:35.693

与 CF 无关，可能是您的 smtp 服务器。你用的是gmail吗？

# xml - 将对象传递到 Template::Toolkit

> ID：13897382
> 
> 赞同：3
> 
> 时间：2012-12-16T00:08:15.627
> 
> 标签：xml, perl, atom-feed, template-toolkit

我正在编写一个脚本来将我的 Stackoverflow 活动提要拉入网页，它看起来像这样：

```
#!/usr/bin/perl

use strict;
use warnings;

use XML::Feed;
use Template;

my $stackoverflow_id = 1691146;
my $stackoverflow_url = "http://stackoverflow.com/feeds/user/$stackoverflow_id";

my $template = <<'TEMPLATE';
[% FOREACH item = items %]
[% item.title %]
[% END %]
TEMPLATE

my $tt = Template->new( 'STRICT' => 1 )
  or die "Failed to load template: $Template::ERROR\n";

my $feed = XML::Feed->parse(URI->new($stackoverflow_url));

$tt->process( \$template, $feed )
  or die $tt->error(); 
```

模板应该迭代我的活动提要（来自`XML::Feed->items()`）并打印每个的标题。当我运行此代码时，我得到：

```
var.undef error - undefined variable: items 
```

为了让它工作，我不得不将这`process`条线改为：

```
$tt->process( \$template, { 'items' => [ $feed->items ] } ) 
```

谁能解释为什么`Template::Toolkit`似乎无法使用该`XML::Feed->items()`方法？

我有过类似的工作`XML::RSS`：

```
my $rss = XML::RSS->new();
$rss->parse($feed);
$tt->process ( \$template, $rss )
    or die $tt->error(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T03:48:38.877

只是一些调整。

```
#!/usr/bin/perl -Tw

use strict;
use warnings;

use XML::Feed;
use Template;
use Data::Dumper;

my $stackoverflow_id = 1691146;
my $stackoverflow_url = "http://stackoverflow.com/feeds/user/$stackoverflow_id";

my $template = <<'TEMPLATE';
[% FOREACH item = feed.items() %]
[% item.title %]
[% END %]
TEMPLATE

my $tt = Template->new( 'STRICT' => 1 )
  or die "Failed to load template: $Template::ERROR\n";

my $feed = XML::Feed->parse(URI->new($stackoverflow_url));

$tt->process( \$template, { feed => $feed } )
  or die $tt->error(); 
```

模板编译器需要一个普通的哈希引用，其键和值都存储在内部。给它一个`XML::RSS`对象，因为它有一个`items`元素。`XML::Feed`对象没有`items`元素，因为它只是多个实现（包括`XML::RSS`）的包装器。模板不会得到一个`XML::Feed`对象，它会得到一个普通的哈希引用，比如：

```
{ 'rss' => XML::RSS Object } 
```

将您的提要包装在哈希引用中会使编译器保留对象，从而允许处理引擎在模板中找到`XML::Feed`对象时执行所需的“魔术” 。`feed.items`

# c++ - C++11 中有什么好的新方法可以将其他“层次类”的“克隆”对象作为成员存储？

> ID：13897385
> 
> 赞同：4
> 
> 时间：2012-12-16T00:08:28.053
> 
> 标签：c++

我们有一个`Base`类和一个`Derived`派生自`Base`.

在其他一些类中，我们希望有一个 type 的成员`shared_ptr<Base>`。

我们不能`Base`直接使用该类型，因为这样的直接复制会排除子类。

但是，我们仍然想`Base`在构造时“复制”（或子类）对象，因为我们想排除它被修改的可能性。

处理这个问题的经典方法是将一个虚拟成员函数`clone()`放入`Base`类中，`Base`然后每个子类都可以实现。然后Every`clone()`将返回其自身的“副本” - 例如，`Derived`将 return `make_shared<Derived>(*this)`。

这种方法的问题在于，这需要每个新的子类`Base`来实现这个`clone()`功能。每个中的代码都`clone()`相当样板，一直重复它似乎有点不自然。

自 C++11 以来有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T00:18:59.047

在普通的 C++ 中总是可以做到这一点：

```
struct base
{
    virtual ~base () {}
    virtual base* clone () = 0;  
    virtual void foo () = 0;
};

template <typename T>
struct base_impl : base
{
    T* clone () { return new T (*static_cast<T*> (this)); }
};

struct derived : base_impl<derived>
{ 
    void foo () { ... }
};

struct derived2 : base_impl<derived2>
{
    void foo () { ...}
}; 
```

等等

您可以使用 C++11 改进这一点：您可以使用（但您会失去协变返回类型），您可以制作private`unique_ptr<base>`的析构函数并使用.`base_impl``friend T`

我同意在这种情况下这不是很灵活，但是：

*   许多分层的层次结构并不常见
*   克隆函数不是很有用
*   然而，该设计是可扩展的并且超越了克隆：使用模板作为自动化样板代码的一种方式在例如。ATL 和 WTL。搜索“奇怪地重复出现的模板模式”。

另一种解决方案。这可能可以通过各种方式改进，但我认为你不能避免有两个克隆功能：

```
struct base
{
    std::unique_ptr<base> clone () { return std::unique_ptr<base> (do_clone ()); }

private:
    virtual base *do_clone () = 0;
};

template <typename T>
struct base_impl : base
{
    std::unique_ptr<T> clone () 
    {
        return std::unique_ptr<T> (static_cast<T*> (do_clone ()));
    }    

private:
    base *do_clone () { return new T (*static_cast<T*> (this)); }
}; 
```

# iphone - 重新布局 UIPageViewController

> ID：13897388
> 
> 赞同：1
> 
> 时间：2012-12-16T00:09:05.603
> 
> 标签：iphone, objective-c, ios, ipad, uipageviewcontroller

我有一个`UIPageViewController`名为`UIZoomedImageViewController`. 它`UIZoomedImageViewController`具有不同的布局/定位，具体取决于它是纵向还是横向。我有一个`setViewBasedOnOrientation`名为 on的方法`willAnimateToInterfaceOrientation`。

然而，我现在遇到的问题是，当我旋转设备并滑动到下一个视图控制器时，它仍然具有先前方向的大小/布局。我该如何处理？

# cakephp - 在 CakePHP 中的 URL 上强制使用语言前缀

> ID：13897391
> 
> 赞同：0
> 
> 时间：2012-12-16T00:09:52.813
> 
> 标签：cakephp, cakephp-2.3

我想强制我的网站的 URL 总是有一个语言后缀。

因此，如果他们键入`www.mysite.com`它应该将他们带到`www.mysite.com/en`.

我有一个默认语言，所以如果这是他们第一次访问该网站，应该使用它。如果不是，我设置了一个可以使用的 Cookie……但是 - 我不知道在哪里使用它。

我考虑过检查 URL 中是否有“语言”参数，如果没有，则进行重定向，但是 - 这似乎有点矫枉过正 - 有没有更好的方法？我可以在路线中这样做吗？或引导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:47:04.457

最有效的方法是通过您的网络服务器。您可以轻松检查请求是否针对`/`（主页）并重定向到`/en`.

检查文档以了解您使用的任何网络服务器，它们都有类似`mod_rewrite`或类似的东西。

**编辑**

你可以设置一个路由，比如`/set_default_language`在 的情况下重定向到`/`，这个控制器可以访问数据库并做它需要的任何事情。

或者，您可以将其重定向到`/your/usual/language_switch`不指定语言并允许代码使用默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:08:26.830

**我做了什么：**

我最终检查了 AppController 的 beforeFilter() 是否`$this->request->params['langauge']`已设置，如果未设置，则相应地构建 URL：

```
//Redirect to same url, but with language parameter
if (empty($this->request->params['language']) &&
empty($this->request->params['admin'])) {
    $defaultLanguageCode = Configure::read('Languages.default.code2');
    $cookiedLanguage = $this->Language->activeLanguageByCode($this->Cookie->read('lang'));
    $languageToRedirectTo = (!empty($cookiedLanguage['code2'])) ? cookiedLanguage['code2'] : $defaultLanguageCode;
    $newURL = '/' . $languageToRedirectTo . $this->request->here;
    $this->redirect($newURL);
} 
```

**笔记：**

我无法弄清楚的部分（直到在 IRC 中获得帮助）是使用 构建 URL `$this->request->here`，这只是作为字符串的 URL。在此之前，我尝试使用 params 数组构建数组，但没有运气。

**我的路线（以防他们帮助任何人）**

（请记住，我是路线菜鸟，所以 - 尽管它们似乎对我有用，但我不保证它们做得很好！）

```
//root URL and root URL w/ language
Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'));  // eg: www.google.com takes them to pages/display/home
Router::connect('/:language', array('controller'=>'pages', 'action' => 'display', 'home'), array('language'=>'[a-z]{2}')); // eg: /en takes them to pages/display/home and sets language

//pages (eg. /en/r/the_matrix  or  /r/the_matrix)
Router::connect('/:language/r/:slug/*', array('controller'=>'pages', 'action'=>'display'), array('language'=>'[a-z]{2}', 'pass'=>array('slug')));
Router::connect('/r/:slug/*', array('controller'=>'pages', 'action'=>'display'), array('pass'=>array('slug')));

//adds language to default URL
Router::connect('/:language/:controller/:action/*', array(), array('language'=>'[a-z]{2}'));

//Route prefixes
Configure::write('Routing.prefixes', array('admin'));

//User related
Router::connect('/login', array('controller' => 'users', 'action' => 'login'));
Router::connect('/logout', array('controller' => 'users', 'action' => 'logout'));
Router::connect('/myaccount', array('controller' => 'users', 'action' => 'my_account'));

//
CakePlugin::routes();
require CAKE . 'Config' . DS . 'routes.php'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-19T23:25:46.760

如果您不想从控制器或视图中重定向 requestAction 调用，则应将以下条件添加到 IF 语句

```
 if (empty($this->request->params['language']) &&
    empty($this->request->params['admin']) && 
    empty($this->request->params['requested'])) {
    ...
    } 
```

# android - 保护 Android 应用程序 - 它有多重要（尤其是与应用内支付相关）

> ID：13897392
> 
> 赞同：4
> 
> 时间：2012-12-16T00:10:01.300
> 
> 标签：android, security, in-app-purchase, obfuscation, proguard

我意识到这是一个沉重的问题，但我希望对混淆和公钥安全等有更深入了解的人能够提供帮助 - 当然，这些问题也不仅仅是应用程序内购买的应用程序，但那是我个人的兴趣在这一点上。

我曾经在我的一个（免费）Android 应用程序上使用 ProGuard 时犯了一个错误——我说错误是因为用户报告的跟踪问题变成了彻头彻尾的噩梦，我很快意识到我一无所获，所以我放弃了它。

我现在已经准备好使用应用内购买（使用亚马逊和谷歌计费系统）的付费应用程序和应用程序，并且似乎强烈建议使用 Proguard（或类似的替代方案） - 但在我回到那个噩梦之前，是它真的很重要吗？

如果人们想对我的代码进行逆向工程以删除广告或“免费”获取应用程序，那么我确信他们会以某种方式做到这一点 - 但我显然不想让计费系统和人们的个人凭据等安全性降低！

Google Play 应用内计费讨论了混淆应用内产品公钥之类的东西（通过将它们存储在单独的位中以使其更难更改）-我想 Proguarding 不会进一步削弱这一点-但这只是我的应用程序还是它对其他人的应用程序/客户自己的人身安全有更广泛的影响？

基本上 - 我一点也不关心海盗，因为他们无论如何都会做他们所做的事情，我当然不想让自己的工作仅仅为了这个目的，但我也不想削弱其他用户的安全性！

有人对此有足够的了解可以发表评论吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:59:00.963

ProGuard 仅有助于防止盗版；不影响个人信息安全。

即使有人入侵了他们的客户（也就是你的应用程序），精心设计的支付处理系统（面向公众）仍然是安全的。大多数人可以做的就是不付费访问付费内容，但黑客无法通过谷歌或亚马逊支付系统破坏其他人的应用程序。

因此，将 Google 或 Amazon 支付处理添加到应用程序不会影响应用程序的安全性。

但是，如果黑客设法通过常规方式入侵他人的手机，他们或许能够访问存储在您的应用中的支付信息。但是 ProGuard 只保护代码，而不是个人信息，所以它也不会阻止这种黑客攻击。

# c++ - C ++虚拟运算符删除？

> ID：13897394
> 
> 赞同：16
> 
> 时间：2012-12-16T00:10:54.397
> 
> 标签：c++, inheritance, operator-overloading, virtual, delete-operator

是否可以有一个虚拟删除操作员？我不是在说析构函数，我指的是实际的运算符重载。

减去（在大多数情况下）重载 new 和 delete 是一个很大的坏主意这一事实（是的，我已经知道这是异端邪说），我想知道使用虚拟删除运算符会产生什么样的影响。

我正在考虑尝试使用虚拟删除，因为有时我可能有一个重载删除的子类，存储在基类指针中。从技术上讲，我真的没有看到这个案例取得太多成果，除非我有不同节点类型的树（如果你问我，这首先是一个潜在的危险想法）。

我只想知道虚拟或非虚拟删除运算符覆盖的潜在优缺点是什么。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-16T00:17:32.580

您不能明确声明`operator delete`为`virtual`.

它是一个静态成员函数，即使您不提供关键字`static`。

但是在使用最派生类中定义的那个的意义上`operator delete` ***已经是虚拟的。***您可能会选择将其视为由析构函数调用。甚至可能是。;-)

* * *

> **C++11 §12.4/12**：
> “在定义虚拟析构函数（包括隐式定义（12.8））时，在析构函数的类（10.2）的范围内查找非数组释放函数，并且，如果未找到声明，则在全局范围内查找该函数。”

* * *

> **C++11 §12.5/4**：
> “如果*删除表达式*以一元运算符开头`::`，则在全局范围内查找释放函数的名称。否则，如果*delete-expression*用于释放静态类型具有虚拟析构函数的类对象，则释放函数是在定义动态类型的虚拟析构函数 (12.4) 时选择的函数。^(117)否则，如果*delete-expression*用于释放类`T`或其数组的对象，则对象的静态和动态类型应相同，并在释放函数的范围内查找释放函数的名称`T`. 如果此查找未能找到该名称，则在全局范围内查找该名称。如果查找的结果不明确或无法访问，或者如果查找选择了布局释放函数，则程序是非良构的。”

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T00:17:21.103

不——即使你没有这样标记它，当/如果你为一个类重载`new`/时`delete`，它们最终会成为静态成员函数¹，并且静态成员函数不能是虚拟的。

为了工作，它们确实需要是静态的——它们用于为对象分配/释放内存，因此必须在对象开始构造之前/完成销毁之后发生。您显然不能让它为最终将成为类的实例的内存分配内存，同时让它依赖于已经*是*该类的实例（虚函数所做的）。

* * *

1.  §12.5/1：

> 类 T 的任何分配函数都是静态成员（即使没有显式声明为静态的）。

和§12.5/6：

> 类 X 的任何释放函数都是静态成员（即使未显式声明为静态成员）。

...对于任何关心官方声明的人。有趣的是，当您分配时它是“T 级”，而当您释放时它是“X 级”。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T00:21:25.943

不 - 你不能有一个虚拟运算符 delete -特定于类`new`和`delete`重载必须是静态成员函数 - 特定于类，而不是对象。

您不能拥有虚拟静态成员函数。

请参阅标准的第 12.5.7 节，其中指出“由于成员分配和释放函数是静态的，它们不能是虚拟的。”

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-12-16T00:17:09.417

1）是的，当然你可以重载删除。不，重载不能是虚函数。

2）“优点和缺点”完全取决于你想要做什么。

3) 当然，操作符重载的整个想法——就像在 C++ 中一样——可以说是愚蠢、不必要和危险的。

呜呜呜……

4）如果你不需要它，那就不要这样做：）

恕我直言...

# google-chrome - TideSDK：Chrome 关系

> ID：13897400
> 
> 赞同：1
> 
> 时间：2012-12-16T00:12:33.907
> 
> 标签：google-chrome, tidesdk

首先，我是瑞士人，如果我错了，请原谅我；我的英语不是那么丰富。

在 tiapp.xml 文件中我可以看到这个指令`<chrome scrollbars="true">true</chrome>`。

意思是tideSDK用的是谷歌浏览器？或者还有什么？换句话说：根据最终用户的配置（未安装谷歌浏览器），是否有可能缺少功能？

请原谅我问了这个愚蠢的问题，但我不明白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T00:39:25.467

铬意味着外观 - 窗户的外部装饰。另一个词可能是“皮肤”。启用/禁用告诉框架将操作系统的本机窗口装饰添加到窗口 - 每侧缩放边框，带有窗口名称的标题栏，以及最小/最大/关闭按钮 - 所有这些都是窗口镶边的一部分。

如果你想创建 100% 自定义外观的窗口，你必须禁用窗口镶边。小心！窗口的缩放和移动由窗口镶边自动处理。如果禁用它，则必须自己处理该功能。

这与谷歌浏览器没有任何关系:)

# c++ - Boost 文件系统非常慢？

> ID：13897401
> 
> 赞同：14
> 
> 时间：2012-12-16T00:12:52.263
> 
> 标签：c++, boost

我目前正在学习 Boost 框架，我发现了如何列出我系统上的所有文件夹和文件，使用

```
#include <boost/filesystem.hpp>
#include <boost/foreach.hpp>
#include <iostream>
using namespace std;
int main()
{
    for ( boost::filesystem::recursive_directory_iterator end, dir("C:\\");
       dir != end; ++dir ) {
       cout << *dir << std::endl;
    }
    return 0;
} 
```

但我遇到的唯一问题是这个过程有多慢......我做错了什么还是只是微软列出所有文件的.NET版本要快得多？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T18:08:52.333

您的问题意味着比较，但您只提供了一半的信息，即您要进行比较的代码在哪里？有很多方法可以提高您提供的代码的性能，其中一些已在上面的注释中提供。

也就是说，您首先观察到性能差异的原因很可能可以追溯到运行 C# 代码的非常托管的环境。您的文件系统很可能在 .Net 的内存空间中被索引，而您的 C++ 代码和 Boost 库直接进入文件系统，并且没有受益于 Microsoft 试图使 .NET 环境更高效的方法之一。如果没有效率，C# 代码似乎更有可能比相同质量的已编译 C++ 代码慢几个数量级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T00:15:14.157

它还取决于文件夹中有多少文件。如果有很多文件，那么确实需要很多时间。您是否尝试使用包含很少文件的文件夹？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T12:30:01.753

.NET 版本可能会被索引，并且可能只需要从平面格式读取文件名。您建议的内容需要打开每个目录。

# expressionengine - 链接 ExpressionEngine 频道搜索参数 AND 或 OR？

> ID：13897407
> 
> 赞同：0
> 
> 时间：2012-12-16T00:14:43.030
> 
> 标签：expressionengine

下面这段代码：

```
{exp:channel:entries search:style="=ale" search:region="germany|belgium" search:rating="=3|4|5"} 
```

它会同时搜索 region = (germany, or belgium) AND rating = (3, or 4, or 5) 吗？或者它是一个 OR 语句？

我问的原因是我正在尝试进行搜索，其中只有条目显示在它们不匹配的地方。IE

```
{exp:channel:entries search:style="=ale" search:region="= not belgium" search:rating="= not 5"} 
```

这意味着它只会显示既不是比利时又不是 5 的条目，如果任何条目是一个而不是另一个，它仍然会显示。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:42:23.753

那将是“和”。请记住，你得到一个完全匹配，因为你有`= not`. 根据您的数据，您可能（？）实际上只想要`not`“不包含”。

# php - JavaScript 正则表达式不适用于 PHP

> ID：13897408
> 
> 赞同：0
> 
> 时间：2012-12-16T00:14:44.323
> 
> 标签：php, javascript, regex

我有一个 javascript 正则表达式

```
 Value.match(/[A-Za-z0-9\-\,\.\(\)/]/) 
```

如果字符串包含字母、数字、连字符、逗号、点或大括号，这给我 1；如果找到任何其他字符，则为 0。

当我在 PHP 中应用相同的正则表达式时，它不起作用。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:22:17.873

您不需要在内部转义字符，`[]`因此您可以尝试这个`/[A-Za-z0-9,.()]/`甚至这个，`/[\w,.()]/`但是如果您想检查字符串是否*只包含*那些正则表达式不会执行的字符，请尝试：

```
/^[\w,.()]+$/ 
```

我注意到你也有`/`. 这是故意的还是错误的，因为您没有在问题中提及...

# wcf-data-services - WCF 数据服务 - 存储过程 - StackOverflowException

> ID：13897409
> 
> 赞同：0
> 
> 时间：2012-12-16T00:15:21.483
> 
> 标签：wcf-data-services

我正在尝试运行 MCTS 70-516 书中的示例，更具体地说是第 470 页上的示例。

要求/创建什么：

*   `Northwind`数据库_
*   一个空的 ASP.Net Web 解决方案
*   `CustOrderHist`包含所有表和存储过程的 edmx

然后创建以下`.svc`文件：

```
using System.Data.Services;
using System.Linq;
using System.ServiceModel.Web;

namespace WcfDataServicesLibrary
{
    public class NorthwindService : DataService<NorthWindEntities>
    {
        // This method is called only once to initialize service-wide policies.
        public static void InitializeService(DataServiceConfiguration config)
        {
            config.SetEntitySetAccessRule("*",EntitySetRights.All);
            config.SetServiceOperationAccessRule("*",ServiceOperationRights.All);
            config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
        }

        [WebGet]
        public IQueryable<CustOrderHist_Result> CustOrderHist(string customerID)
        {
            using(NorthWindEntities db = new NorthWindEntities())
            {
                return CustOrderHist(customerID).ToList().AsQueryable();
            }
        }
    }
} 
```

然后我尝试按照文中的指示运行它：

```
"http://localhost:65363/NorthwindService.svc/CustOrderHist?customerID='ALFKI'" 
```

然后我收到错误消息 StackOwerFlowException。

为什么 ？

我尝试了以下方法：

*   更改过程以仅返回一行
*   创建一个返回字符串的新过程

没变。同样的结果。

我有一台 32 位机器（Windows Vista）。所以64位不是问题。

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T14:19:50.307

CustOrderHist 方法中有递归

尝试以下操作：

```
 [WebGet]
    public IQueryable<CustOrderHist_Result> CustOrderHist(string customerID)
    {
        using(NorthWindEntities db = new NorthWindEntities())
        {
            return db.CustOrderHist(customerID).ToList().AsQueryable();
        }
    } 
```

# javascript - Knockout JS Observable 数组数据组每个部分的总年龄计数

> ID：13897411
> 
> 赞同：0
> 
> 时间：2012-12-16T00:15:32.817
> 
> 标签：javascript, html, knockout.js, knockout-mapping-plugin

我有一个可观察的数组

```
var myArray = ko.observableArray([
      { name: "Jimmy", type: "Friend", Age: 30 },
      { name: "George", type: "Friend", Age: 40 },
      { name: "Zippy", type: "Enemy", Age: 20 }
    ]); 
```

现在我希望我的输出为

## 朋友总年龄：70

吉米 30 乔治 40

## 敌人总年龄：20

活泼的 20

有一个类似的jsfiddle[链接](http://jsfiddle.net/praneethjonna/mXVtN/71/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:51:16.217

如果您想保持通用结构（不仅仅是直接为“FriendTotalAge”和“EnemyTotalAge”创建计算），那么您可以扩展`distinct`扩展以包含一个用于总计的属性。

例如，您可以传入要用作总计的属性的名称，并在扩展中添加一个部分，例如：

```
 if (totalProp) {
        for (key in propIndex) {
            if (propIndex.hasOwnProperty(key)) {
                propIndex[key].total = ko.computed(function() {
                    var total = 0;
                    ko.utils.arrayForEach(propIndex[key], function(item) {
                        total += parseInt(ko.utils.unwrapObservable(item[totalProp]), 10) || 0;
                    });  

                    return total;                        
                });
            }                    
        }
    } 
```

现在，您的索引可以是“类型”并包含“年龄”属性的计算总数。

在这里更新小提琴：http: [//jsfiddle.net/rniemeyer/yrh5D/](http://jsfiddle.net/rniemeyer/yrh5D/)

# google-app-engine - 在没有 http.Redirect 的情况下实现 OAuth2 Facebook 登录

> ID：13897425
> 
> 赞同：4
> 
> 时间：2012-12-16T00:17:41.340
> 
> 标签：google-app-engine, facebook-graph-api, go

以下 App Engine 处理程序在我可以获得令牌的范围内工作：

```
func home(w http.ResponseWriter, r *http.Request) {
    c := appengine.NewContext(r)

    oaConfig := map [string]string {
        "ClientID":     "(redacted)",
        "ClientSecret": "(redacted)",
        "Scope":        "email",
        "AuthURL":      "https://graph.facebook.com/oauth/authorize",
        "TokenURL":     "https://graph.facebook.com/oauth/access_token",
        "RedirectURL":  "http://www.example.com/",
    }

    code := r.FormValue("code")
    if code == "" {
        // 1\. Code request
        url := oaConfig["AuthURL"] + 
            "?client_id=" + oaConfig["ClientID"] + 
            "&redirect_uri=" + oaConfig["RedirectURL"] + 
            "&state=SOME_UNIQUE_VALUE"
        http.Redirect(w, r, url, http.StatusFound)
    }

    // 2\. Token request
    client := urlfetch.Client(c)
    tokenResponse, err := client.PostForm(oaConfig["TokenURL"],
        url.Values{
            "client_id": {oaConfig["ClientID"]},
            "redirect_uri": {oaConfig["RedirectURL"]},
            "client_secret": {oaConfig["ClientSecret"]},
            "code": {code},
        })

    if err != nil {
        // ...
    } else {
        // 3\. Read token from response body
        defer tokenResponse.Body.Close()
        body, err := ioutil.ReadAll(tokenResponse.Body)
        if err != nil {
            // ...
        } else {
            token := string(body)
        }
    }

    // ...
} 
```

当连接到模板时，它会从 Facebook 获取令牌响应并愉快地显示它。但是，最好不必将用户重定向到 example.com/?state=SOME_UNIQUE_VALUE&code=AQB0iYpAf8nMmX5blahblah# *=*以实现登录。

有没有办法使用 client.Get 等访问授权 URL，遵循重​​定向，从生成的查询字符串中获取代码并将其填充到字符串中以供处理程序使用？不用求助于阿贾克斯，就是这样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T10:36:48.607

> 有没有办法使用 client.Get 等访问授权 URL，遵循重​​定向，从生成的查询字符串中获取代码并将其填充到字符串中以供处理程序使用？

不，因为用户可能必须在 Facebook 上输入他们的登录凭据（如果他们是第一次使用，也可能连接到您的应用程序）——如果您在服务器上完成所有操作而不显示它，这很难做到给用户。

如果您想识别已经登录 Facebook 的现有用户重新访问您的应用程序 - 这只能在客户端完成。`FB.getLoginStatus`JS SDK 能够为您做到这一点——它会识别用户，并同时为您提供有效的访问令牌。

# c++ - 将 libcurl 添加到 Visual C++

> ID：13897428
> 
> 赞同：0
> 
> 时间：2012-12-16T00:17:48.287
> 
> 标签：c++, visual-c++, curl, visual-studio-2012, libcurl

好的，所以我在 Visual C++ 上真的很新，因为我真的不想坚持使用 CodeBlocks，因为我觉得 Visual C++ 更适合制作 Windows 程序（我使用 Visual Basic 布局，所以 Visual C++ 有帮助）

我试图将 libcurl 链接到我的项目中，但考虑到它是一个新程序，我真的不知道该怎么做。

我必须通过选择我的项目>属性>链接器>常规>“其他库目录”>并添加“包含”文件夹的位置来添加“包含”文件夹，但仅此而已。

我需要添加其余的但不知道。任何帮助都会奏效...

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:27:42.787

第 1 步是指向包含您已经完成的库的目录。

下一步是在此处添加该库名称：

```
Project -> Properties -> Linker -> General -> Additional Dependencies 
```

要查看传递给链接器的标志：

```
Project -> Properties -> Linker -> Command Line 
```

要获取有关链接器正在执行的操作的详细信息：

```
Project -> Properties -> Linker -> General -> Show Progress -> Display all progress messages (/VERBOSE) 
```

希望这可以帮助。

# java - 类型转换为超类并调用重写方法是否可以接受？（爪哇）

> ID：13897430
> 
> 赞同：2
> 
> 时间：2012-12-16T00:18:20.280
> 
> 标签：java, types, casting, overriding, super

它似乎有效，但它被认为是“好”的编程吗？

这是一个澄清的例子：

```
public class foo{
   foomethod(){do something};
}

public class foo1 extends foo{
    @override foomethod(){do something};
}

public class foo2 extends foo{
    @override foomethod(){do something};
}

ArrayList x /*with foo1 and foo2 objects*/
for (Object o : x){((foo)o).foomethod();} 
```

这是被认为是“好”的编程吗？如果不是，还有什么是一个不错的紧凑替代方案？（如果可能，除了 switch(o.getClass()) 之外）

编辑因为我真的不擅长澄清它似乎:)

我的意思是调用已被覆盖的方法而不是超级方法。我想做的另一种方法是：

ArrayList x /* 再次使用 foo1 和 foo2 对象*/

```
for (Object o : x){
    switch(o.getClass()){
        case foo1.class:
            ((foo1)o).foomethod();
            break;
        case foo2.class:
            ((foo1)o).foomethod();
            break;
    }
} 
```

但我想避免 switch 语句，因为它使代码变得更大更复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:24:28.590

它是否被认为是可接受的完全无关紧要。真正的问题是它并没有像你想象的那样做。它不会“调用被覆盖的方法”。派生类的方法仍然被调用。如果要调用被覆盖的方法，则必须在派生类中使用 super 关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T00:28:46.050

您可能想使用泛型：

```
public class Foo{
   public void fooMethod(){ System.out.println("Foo");};
}

public class Foo1 extends Foo{
    @Override public void fooMethod(){System.out.println("1");};
}

public class Foo2 extends Foo{
    @Override public void fooMethod(){System.out.println("2");};
}

...

List<Foo> x = new ArrayList<Foo>();
x.add(new Foo1());
x.add(new Foo2());
x.add(new Foo());

for (Foo o : x){ o.fooMethod();} 
```

输出将是：

```
1
2
Foo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T00:42:04.983

> 它似乎有效，但它被认为是“好”的编程吗？

用你的问题的措辞模数问题......

是的，在超类中声明一个方法，在子类中覆盖它，并以多态方式调用它是一种很好的编程方式。

它肯定比在类名上使用`instanceof`测试链或 a好得多。`switch`这些方法被认为是“坏的”......因为它们涉及将太多的类层次结构知识连接到其他代码中。例如，如果您添加 的另一个子类，则`Foo`需要检查所有这些开关并可能进行更改。（而且编译器不会提醒你这样做......）

# ruby-on-rails - Rails 格式验证——字母数字，但不是纯数字

> ID：13897431
> 
> 赞同：6
> 
> 时间：2012-12-16T00:18:32.387
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3

什么是测试让我们说用户名的格式验证的最佳方法，使用正则表达式表示字母数字，但不是纯数字？

我一直在我的模型中使用以下验证

```
validates :username, :format => { :with => /^[a-z0-9]+[-a-z0-9]*[a-z0-9]+$/i } 
```

诸如“342”之类的数字用户名通过了验证，这是我不想要的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-16T00:50:45.177

您想“向前看”一封信：

```
/\A(?=.*[a-z])[a-z\d]+\Z/i 
```

# java - 片段 onCreate() 问题

> ID：13897432
> 
> 赞同：2
> 
> 时间：2012-12-16T00:18:39.383
> 
> 标签：java, android, android-fragments

我需要在我的片段的 onCreate() 上声明我的 Chronometer，因为如果我在 onCreateView() 上声明，每次调用 ChronometerFragment 时都会重置 Chronometer。

我的实际代码：

**ChronometerFragment.class**

```
public class CronometroFragment extends Fragment {
    Button btStart, btPause, btReset;
    boolean click;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_cronometro, container,
                false);

        final Cronometro cronometro = (Cronometro) v.findViewById(R.id.cronometro);

        click = true;

        btStart = (Button) v.findViewById(R.id.btStart);
        btPause = (Button) v.findViewById(R.id.btPause);
        btReset = (Button) v.findViewById(R.id.btReset);

        btStart.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                cronometro.start();
            }
        });

        btPause.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                cronometro.pause();
            }
        });

        btReset.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                cronometro.setBase(SystemClock.elapsedRealtime());
                cronometro.stop();
            }
        });

        return v;
    } 
```

**片段_cronometro.xml**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#f0f0f0"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/Title"
        android:layout_width="match_parent"
        android:layout_height="40sp"
        android:gravity="center" >

        <TextView
            android:id="@+id/titleText"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/title_cronometro"
            android:textSize="35sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/Timer"
        android:layout_width="match_parent"
        android:layout_height="70sp"
        android:gravity="center"
        android:orientation="horizontal" >

        <com.hello.app.Cronometro
            android:id="@+id/cronometro"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:textSize="45sp" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/Start"
        android:layout_width="match_parent"
        android:layout_height="50sp"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btStart"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="@string/button_start" />
    </LinearLayout>

    <LinearLayout
        android:id="@+id/PauseStop"
        android:layout_width="match_parent"
        android:layout_height="50sp"
        android:gravity="center"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/btPause"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/button_pause" />

        <Button
            android:id="@+id/btReset"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/button_reset" />
    </LinearLayout>

</LinearLayout> 
```

我的问题是用户无法更改片段，因为这会重置 Chronometer。

请问，有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:33:04.473

这个问题的表述很糟糕。但是在您的 onCreate 中，放置 setretaininstance(true)。这应该有效。:-)

# java - 使用 AbstractSolrTestCase 进行 SolR 4.0 测试

> ID：13897433
> 
> 赞同：1
> 
> 时间：2012-12-16T00:18:52.317
> 
> 标签：java, solr, solrj, solr4

我有一个 SolR 3.6 的测试环境，我正在尝试将其迁移到 4.0，但我收到以下错误。

主要源码如下：

```
public class SolrConfigTest extends AbstractSolrTestCase {
    String container = "mycore";

    @Override
    public String getSolrHome() {
        return System.getProperty("user.dir") + "/resources/";
    }

    @Override
    public String getSchemaFile() {
        return getSolrHome() + container + "/conf/schema.xml";
    }

    @Override
    public String getSolrConfigFile() {
        return getSolrHome() + container + "/conf/solrconfig.xml";
    }

    @Before
    @Override
    public void setUp() throws Exception {
        super.setUp();
        CoreContainer.Initializer initializer = new CoreContainer.Initializer();
        coreContainer = initializer.initialize();
        server = new EmbeddedSolrServer(coreContainer, "mycore");
    }
} 
```

solr 文件夹结构：

```
+solr
   +mycore
      +conf
      +data
      +lib 
```

solr.xml 配置文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<solr persistent="false">
  <cores adminPath="/admin/cores" defaultCoreName="mycore" host="${host:}" hostPort="${jetty.port:}" hostContext="${hostContext:}" zkClientTimeout="${zkClientTimeout:15000}">
    <core name="mycore" instanceDir="mycore" />
  </cores>
</solr> 
```

但是，当我执行此代码时，出现以下错误：

> ```
>  [java] 16-dic-2012 0:43:15 SolrConfig <init>
>  [java] 16-dic-2012 0:43:15 org.apache.solr.util.AbstractSolrTestCase setUp
>  [java] INFO: ####SETUP_START <unknown>
>  [java] 16-dic-2012 0:43:15 org.apache.solr.core.SolrResourceLoader <init>
>  [java] INFO: new SolrResourceLoader for directory: '/home/user/workspace/tech/SolrTest/resources//collection1/'
>  [java] 16-dic-2012 0:43:16 org.apache.solr.core.SolrConfig initLibs
>  [java] INFO: Adding specified lib dirs to ClassLoader
>  [java] 16-dic-2012 0:43:16 org.apache.solr.core.SolrConfig <init>
>  [java] INFO: Using Lucene MatchVersion: LUCENE_40
>  [java] 16-dic-2012 0:43:16 org.apache.solr.core.SolrConfig <init>
>  [java] INFO: Loaded SolrConfig: /home/user/workspace/tech/SolrTest/resources/mycore/conf/solrconfig.xml
>  [java] 16-dic-2012 0:43:16 org.apache.solr.schema.IndexSchema readSchema
>  [java] INFO: Reading Solr Schema
>  [java] 16-dic-2012 0:43:16 org.apache.solr.schema.IndexSchema readSchema
>  [java] INFO: Schema name=mycore
>  [java] 16-dic-2012 0:43:17 org.apache.solr.schema.IndexSchema readSchema
>  [java] INFO: unique key field: ID
>  [java] java.lang.RuntimeException: java.io.IOException: Can't find resource 'stopwords.txt' in classpath or 
> ```
> 
> '/home/user/workspace/tech/SolrTest/resources//collection1/conf/', cwd=/home/user/workspace/tech/SolrTest [java] at org.apache.solr.schema.IndexSchema.(IndexSchema.爪哇：116）

似乎 SolR 找不到 solr.xml（但确实找到了 solrconfig.xml），这就是为什么尝试访问 collection1（我已经读过，如果 solr 没有找到 solr.xml，则将核心设置为 collection1） ，但 getSolrHome() 指向的是存储 solr.xml 的文件夹。

我究竟做错了什么？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T09:07:42.280

您可能指定了错误的 solr 主页。

试试下面，

```
 @Override
    public String getSolrHome() {
        return System.getProperty("user.dir") + "/resources/solr";
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:14:57.650

实际上，错误似乎是Solr 的文件夹`stopwords.txt`中缺少该文件。`conf`您能否确认目录中存在 stopwords.txt 文件`/home/user/workspace/tech/SolrTest/resources/mycore/conf/`

报告此错误是因为架构文件中 fieldType 的分析器/过滤器正在引用 stopwords.txt 文件。

# php - 当我通过 cURL 调用 URL 时，CodeIgniter 中的会话被破坏

> ID：13897435
> 
> 赞同：1
> 
> 时间：2012-12-16T00:19:13.117
> 
> 标签：php, codeigniter, session

我对 CodeIgniter 2.1.3 中的会话有疑问。我使用 存储会话`$this->session->set_userdata`，并成功登录，然后重定向到主页 ( `http://localhost/sistem/index.php/home/`) 并使用 显示会话数据`$this->session->userdata`。现在，我正在尝试使用 cURL 获取数据。当我运行 cURL 时，我仍然在我的系统中登录`http://localhost/sistem/index.php/home`。没有数据显示，会话被破坏。这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:24:27.453

你也是通过 cURL 登录的吗？通过阅读您的问题，我得到的印象是您正在通过浏览器登录，然后通过 cURL 访问该页面。在这种情况下，您当然看不到会话，因为 cURL 不会将会话 cookie 信息发送到系统。

如果您通过 cURL 登录，请检查 cURL 是否配置正确以存储设置的 cookie 并在后续请求中发送它们。您可能需要研究 cURL “cookiejar”，以及如何在您的系统上设置它。

# css - 媒体查询不覆盖 webkit calc

> ID：13897437
> 
> 赞同：0
> 
> 时间：2012-12-16T00:19:44.500
> 
> 标签：css, sass, css-calc

我有一个计算定义：

```
#navigation-panel {
     a, i.navEmptyBlock {    
        // ...
        width: -webkit-calc(12% - 2px);
        width: -moz-calc(12% - 2px);
        width: -o-calc(12% - 2px);
        width: -ms-calc(12% - 2px);
        width: calc(12% - 2px);

        @media (max-width: 640px) {      
          width: -webkit-calc(20% - 2px);
          width: -moz-calc(20% - 2px);
          width: -o-calc(20% - 2px);
          width: -ms-calc(20% - 2px);
          width: calc(20% - 2px);
        }
        // ...
    }
} 
```

当在 640px 调整大小时，它应该应用新的计算，但它没有。

我已经使用 Google Developer Tools 进行了检查，新的 calc**确实**适用，但它并没有因为任何奇怪的原因覆盖旧的。

开发人员工具显示旧的已被划掉，但**仍在应用！**. 如果我禁用交叉的，它会起作用。

**在firefox中尝试过，它可以工作。**

似乎 chrome 不会覆盖`-webkit-calc`调用？

COMPASS 生成的代码：

```
#navigation-panel a, #navigation-panel i.navEmptyBlock {
  float: left;
  margin: 0 auto;
  text-decoration: none;
  color: #080808;
  text-shadow: 0 0 12px rgba(255, 255, 255, 0.6);
  position: relative;
  width: -webkit-calc(12% - 2px);
  width: -moz-calc(12% - 2px);
  width: -o-calc(12% - 2px);
  width: -ms-calc(12% - 2px);
  width: calc(12% - 2px);
  font-family: 'Lucida Sans Unicode', 'Lucida Grande', sans-serif;
  display: inline-block;
  border: 1px solid #3284b6;
  text-align: center;
  padding-top: 6px;
  height: 25px;
  font-family: Tahoma;
  font-size: 11px;
  /* Windows */
  background: rgba(255, 255, 255, 0);
  -webkit-transition: background 80ms;
  font-weight: 800;
  box-shadow: inset 0px 0px 6px rgba(255, 255, 255, 0.9); }
  @media (max-width: 640px) {
    #navigation-panel a, #navigation-panel i.navEmptyBlock {
      width: -webkit-calc(20% - 2px);
      width: -moz-calc(20% - 2px);
      width: -o-calc(20% - 2px);
      width: -ms-calc(20% - 2px);
      width: calc(20% - 2px); } } 
```

**编辑：**普通宽度确实覆盖了第一个计算，但第二个计算覆盖了新的普通宽度但不适用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:59:23.157

以某种方式将 webkit 的前缀放在重复的选择器中。

```
a, i.navEmptyBlock {    
        @media (max-width: 640px) {
          // fallback
          width: 18%;
          width: -webkit-calc(20% - 2px);         
        }
        @media (max-width: 565px) {
          // fallback
          width: 19%;
          width: -webkit-calc(20% - 2px);          
        }    
        @media (max-width: 355px) {
          // fallback
          width: 15.5%;
          width: -webkit-calc(20% - 2px);       
        }
      }
    a, i.navEmptyBlock {    
        float: left;
        text-decoration: none;
        color: $nav-panel-font-color;
        text-shadow: 0 0 12px rgba(255, 255, 255, 0.6);   
        position: rela 
```

过去; 宽度：12%；

```
 width: -moz-calc(12% - 0.18em);
    width: -o-calc(12% - 0.18em);
    width: -ms-calc(12% - 0.18em);
    width: calc(12% - 0.18em);

    @media (max-width: 640px) {
      // fallback
      width: 19%;          
      width: -moz-calc(20% - 2px);
      width: -o-calc(20% - 2px);
      width: -ms-calc(20% - 2px);
      width: calc(20% - 2px);
    }
    @media (max-width: 565px) {            
      width: -moz-calc(20% - 2px);
      width: -o-calc(20% - 2px);
      width: -ms-calc(20% - 2px);
      width: calc(20% - 2px);
    }    
    @media (max-width: 355px) {           
      width: -moz-calc(20% - 2px);
      width: -o-calc(20% - 2px);
      width: -ms-calc(20% - 2px);
      width: calc(20% - 2px);
    } 
```

# python - 某些程序执行中的 Python NoneType 错误

> ID：13897440
> 
> 赞同：1
> 
> 时间：2012-12-16T00:20:43.600
> 
> 标签：python, nonetype

我正在测试一本关于遗传算法的书中找到的代码，我想出了一个奇怪的错误。代码如下：

```
import time
import random
import math

people = [('Seymour','BOS'),
          ('Franny','DAL'),
          ('Zooey','CAK'),
          ('Walt','MIA'),
          ('Buddy','ORD'),
          ('Les','OMA')]
# Laguardia
destination='LGA'

flights={}
# 
for line in file('schedule.txt'):
  origin,dest,depart,arrive,price=line.strip().split(',')
  flights.setdefault((origin,dest),[])

  # Add details to the list of possible flights
  flights[(origin,dest)].append((depart,arrive,int(price)))

def getminutes(t):
  x=time.strptime(t,'%H:%M')
  return x[3]*60+x[4]

def printschedule(r):
  for d in range(len(r)/2):
    name=people[d][0]
    origin=people[d][1]
    out=flights[(origin,destination)][int(r[d])]
    ret=flights[(destination,origin)][int(r[d+1])]
    print '%10s%10s %5s-%5s $%3s %5s-%5s $%3s' % (name,origin,
                                                  out[0],out[1],out[2],
                                                  ret[0],ret[1],ret[2])

def schedulecost(sol):
  totalprice=0
  latestarrival=0
  earliestdep=24*60

  for d in range(len(sol)/2):
    # Get the inbound and outbound flights
    origin=people[d][1]
    outbound=flights[(origin,destination)][int(sol[d])]
    returnf=flights[(destination,origin)][int(sol[d+1])]

    # Total price is the price of all outbound and return flights
    totalprice+=outbound[2]
    totalprice+=returnf[2]

    # Track the latest arrival and earliest departure
    if latestarrival<getminutes(outbound[1]): latestarrival=getminutes(outbound[1])
    if earliestdep>getminutes(returnf[0]): earliestdep=getminutes(returnf[0])

  # Every person must wait at the airport until the latest person arrives.
  # They also must arrive at the same time and wait for their flights.
  totalwait=0  
  for d in range(len(sol)/2):
    origin=people[d][1]
    outbound=flights[(origin,destination)][int(sol[d])]
    returnf=flights[(destination,origin)][int(sol[d+1])]
    totalwait+=latestarrival-getminutes(outbound[1])
    totalwait+=getminutes(returnf[0])-earliestdep  

  # Does this solution require an extra day of car rental? That'll be $50!
  if latestarrival>earliestdep: totalprice+=50

  return totalprice+totalwait

def geneticoptimize(domain,costf,popsize=50,step=1,
                    mutprob=0.2,elite=0.2,maxiter=100):
  # Mutation Operation
  def mutate(vec):
    i=random.randint(0,len(domain)-1)
    if random.random()<0.5 and vec[i]>domain[i][0]:
      return vec[0:i]+[vec[i]-step]+vec[i+1:] 
    elif vec[i]<domain[i][1]:
      return vec[0:i]+[vec[i]+step]+vec[i+1:]

  # Crossover Operation
  def crossover(r1,r2):
    i=random.randint(1,len(domain)-2)
    return r1[0:i]+r2[i:]

  # Build the initial population
  pop=[]
  for i in range(popsize):
    vec=[random.randint(domain[i][0],domain[i][1]) 
         for i in range(len(domain))]
    pop.append(vec)

  # How many winners from each generation?
  topelite=int(elite*popsize)

  # Main loop 
  for i in range(maxiter):
    scores=[(costf(v),v) for v in pop]
    scores.sort()
    ranked=[v for (s,v) in scores]

    # Start with the pure winners
    pop=ranked[0:topelite]

    # Add mutated and bred forms of the winners
    while len(pop)<popsize:
      if random.random()<mutprob:

        # Mutation
        c=random.randint(0,topelite)
        pop.append(mutate(ranked[c]))
      else:

        # Crossover
        c1=random.randint(0,topelite)
        c2=random.randint(0,topelite)
        pop.append(crossover(ranked[c1],ranked[c2]))

    # Print current best score
    print scores[0][0]

  return scores[0][1] 
```

此代码使用名为 schedule.txt 的 .txt 文件，可从[http://kiwitobes.com/optimize/schedule.txt下载](http://kiwitobes.com/optimize/schedule.txt)

根据本书，当我运行代码时，我输入了以下内容：

```
>>> domain=[(0,8)]*(len(optimization.people)*2)
>>> s=optimization.geneticoptimize(domain,optimization.schedulecost) 
```

但我得到的错误是：

```
Traceback (most recent call last):
  File "<pyshell#12>", line 1, in <module>
    s=optimization.geneticoptimize(domain,optimization.schedulecost)
  File "optimization.py", line 99, in geneticoptimize
    scores=[(costf(v),v) for v in pop]
  File "optimization.py", line 42, in schedulecost
    for d in range(len(sol)/2):
TypeError: object of type 'NoneType' has no len() 
```

问题是错误消息有时会出现，有时则不会。我检查了代码，但看不出哪里有问题，因为 pop 永远不会填充空向量。有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:00:15.913

如果函数中的任何一个条件都不满足，您就可以进入`None`您的列表。在这种情况下，控件在函数的末尾运行，这与返回相同。您需要将代码更新为只有一个条件，或者在单独的块中处理不满足其中任何一个条件的情况：`pop``mutate``None`

```
def mutate(vec):
    i=random.randint(0,len(domain)-1)
    if random.random()<0.5 and vec[i]>domain[i][0]:
        return vec[0:i]+[vec[i]-step]+vec[i+1:] 
    elif vec[i]<domain[i][1]:
        return vec[0:i]+[vec[i]+step]+vec[i+1:]
    else:
        # new code needed here! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:46:37.130

这不是一个答案，但我会捕获这个错误并在它出现时打印出`pop`数组，看看它当时的样子。正如您所指出的，从代码中看起来它永远不应该进入这种状态，所以首先看看它*是否确实*进入了那种状态，然后回溯，直到找到它发生的条件。

据推测，这种情况有时只会发生，因为您的代码中有随机因素？

# c# - 如何将阿拉伯语、希伯来语写入 CSV 文件？

> ID：13897444
> 
> 赞同：8
> 
> 时间：2012-12-16T00:22:07.857
> 
> 标签：c#, csv, encoding, streamwriter

除了英语，我无法向Results.csv 写任何阿拉伯语或希伯来语。每次我尝试写其中任何一个时，我都会得到乱码，在 CSV 文件中，它应该有正确的阿拉伯语或希伯来语单词。

我一直在尝试使用 UTF8Encoding，但我显然做错了什么。

请看一下并尝试纠正我：

```
private void WriteToCsvFile()
{
    var us = users.ElementAt(0);
    string titlenames = "number,";
    string userAnswer = (us.userName + ",");
    foreach (string ss in List)
    {
        // Do stuff
    }
    foreach (string ans in us.answer)
    {
        // Do stuff
    }
    using (StreamWriter sw = new StreamWriter("Results.csv", true, Encoding.UTF8))
    {
        sw.WriteLine(titlenames);
        sw.WriteLine(userAnswer);
    }
    this.Close();
} 
```

感谢您的时间和帮助！

这是具有不同类型编码的 CSV 文件：

```
number  ×œ×•×™  ×¡×œ    ×¨×ž×™  ×©×•×¤×¨    ××‘××œ×”    ×‘×•×   ×œ×œ×•× ×”  ×¤××¨×§
22  FALSE   TRUE    FALSE   FALSE   TRUE    TRUE    FALSE   FALSE

number  ×œ×•×™  ×¡×œ    ×¨×ž×™  ×©×•×¤×¨    ××‘××œ×”    ×‘×•×   ×œ×œ×•× ×”  ×¤××¨×§
33  TRUE    TRUE    FALSE   FALSE   FALSE   FALSE   TRUE    FALSE

number  +BdwF1QXZ-  +BeEF3A-    +BegF3gXZ-  +BekF1QXkBeg-   +BdAF0QXQBdwF1A-    +BdEF1QXQ-  +BdwF3AXVBeAF1A-    +BeQF0AXoBec-
22  FALSE   FALSE   FALSE   TRUE    TRUE    TRUE    FALSE   TRUE

number  ÜÕÙ áÜ  èÞÙ éÕäè    ÐÑÐÜÔ   ÑÕÐ ÜÜÕàÔ   äÐèç
33  TRUE    TRUE    FALSE   TRUE    FALSE   TRUE    TRUE    FALSE

number  ÜÕÙ áÜ  èÞÙ éÕäè    ÐÑÐÜÔ   ÑÕÐ ÜÜÕàÔ   äÐèç
44  not answered    not answered    FALSE   not answered    not answered    not answered    not answered    not answered

number  ??? ??  ??? ????    ?????   ??? ?????   ????
55  not answered    not answered    not answered    not answered    not answered    not answered    not answered    not answered 
```

如您所见，乱码应该是阿拉伯语和希伯来语的名称。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T00:36:13.777

您说您的 CSV 文件中出现“乱码”。这不是因为您使用错误的编码编写，而是（很可能）因为您使用错误的编码*查看*它。

尝试使用 Notepad+ 等文本编辑器打开 CSV 文件。在编码菜单中选择 UTF8。您现在应该看到正确的字符了。如果没有，请附上您使用上述代码创建的示例 CSV 文件，也许我可以看到哪里出了问题。

# php - Facebook Javascript API ~ 登录预设账户

> ID：13897449
> 
> 赞同：-2
> 
> 时间：2012-12-16T00:24:12.413
> 
> 标签：php, javascript, facebook, facebook-graph-api

我正在设计一个网站，我想在其中显示来自某个用户的 Facebook 相册的图片。我已经实现了 FB Javascript API，但我不知道如何使用预先确定的用户名和密码登录帐户，而不是显示一个弹出窗口，要求用户提供凭据。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:47:05.230

您不能通过 JavaScript SDK 执行此操作。它是客户端的，这意味着您基本上可以向所有用户授予对该帐户的访问权限。

您需要使用 Facebook 用户的访问令牌来拉取此服务器端。

# php - 使用 PHP 将时间划分为时间块；合理化当前区块的问题

> ID：13897452
> 
> 赞同：1
> 
> 时间：2012-12-16T00:24:32.713
> 
> 标签：php

可能有一种更简单的方法可以做到这一点。鉴于我对 PHP 的新手技能水平，我想我在构建它的方式上存在一些严重的错误。我谦虚地接受任何批评，因为我刚刚开始，并且很高兴学习更好的做法。

但是，我试图将时间划分为两个小时的时间块。代码是根据每个块进行注释的，但如果当前是下午 5:30，我想说一个在“下午 4:00 到下午 6:00”时间块内。

我不完全确定我将如何构造 if 语句以正确选择时间。我认为一组更有经验的眼睛可能能够指出一个解决方案。当前包含的 if 语句不起作用，仅作为示例包含在内。

这显然是更大脚本的一部分，但我很确定问题出在以下代码中。但是，如有必要，我可以包含整个脚本。

```
<?php

date_default_timezone_set('America/Chicago'); // Set default time zone
$currenttime = date("G"); // Set the time in 24 hour format, no leading zeroes

if (0 >= $currenttime && $currenttime < 8) {
    $thisblock="00:00:00"; // Overnights
}

if (8 >= $currenttime && $currenttime < 10) {
    $thisblock="08:00:00"; // Eight to ten.
}

if (10 >= $currenttime && $currenttime < 12) {
    $thisblock="10:00:00"; // Ten to noon.
}

if (12 >= $currenttime && $currenttime < 14) {
    $thisblock="12:00:00"; // Noon to 2:00 PM.
}

if (14 >= $currenttime && $currenttime < 16) {
    $thisblock="14:00:00"; // 2:00 PM to 4:00 PM
}

if (16 >= $currenttime && $currenttime < 18) {
    $thisblock="16:00:00"; // 4:00 PM to 6:00 PM
}

if (18 >= $currenttime && $currenttime < 20) {
    $thisblock="18:00:00"; // 6:00 PM to 8:00 PM
}

if (20 >= $currenttime && $currenttime < 22) {
    $thisblock="20:00:00"; // 8:00 PM to 10:00 PM
}

if (22 >= $currenttime && $currenttime < 24) { 
    $currentblock="22:00:00"; // 10:00 PM to midnight
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:11:02.947

根据你的描述，这将做你想要的：

```
function get_time_block($currenttime)
{
    // if time is before 8, we'll just return the first, 8-hour block
    if ($currenttime < 8)
    {
        return '00:00:00';
    }

    // otherwise, return the first dividable-by-two number before this number as a block
    return sprintf("%02d:00:00", $currenttime - $currenttime%2);
} 
```

要测试它：

```
for ($i = 0; $i < 24; $i++)
{
    print($i . ': ' . get_time_block($i) . '<br />');
} 
```

这输出：

```
0: 00:00:00
1: 00:00:00
2: 00:00:00
3: 00:00:00
4: 00:00:00
5: 00:00:00
6: 00:00:00
7: 00:00:00
8: 08:00:00
9: 08:00:00
10: 10:00:00
11: 10:00:00
12: 12:00:00
13: 12:00:00
14: 14:00:00
15: 14:00:00
16: 16:00:00
17: 16:00:00
18: 18:00:00
19: 18:00:00
20: 20:00:00
21: 20:00:00
22: 22:00:00
23: 22:00:00 
```

..这似乎是你要找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:22:32.503

您可以使用一个简单的公式获得任何一组间隔，该公式将花费时间并将其“四舍五入”到正确的间隔。在你的情况下，你会想要这样的东西：

```
ceil($time/$interval)*$interval 
```

因此，在您的情况下，您可以执行以下操作：

```
$current_hour = date('G');
$check_hour = ceil($current_hour/2)*2;
switch ($check_hour) {
case 2:
...
case 4:
...
} 
```

如果你想改变时间，这很容易。类似的公式适用于任何时间间隔（小时、分钟、秒等）。

# c# - ASP.NET MVC 删除了控制器 QueryString 操作

> ID：13897453
> 
> 赞同：2
> 
> 时间：2012-12-16T00:24:39.153
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

当我使用默认路由时：

```
routes.MapRoute(
"Default", // 
"{controller}/{action}/{id}",
new { controller = "Home", action = "Index", id = UrlParameter.Optional } ); 
```

该应用程序找到以下方法：

```
public ActionResult News(DateTime? FromDate, DateTime? ToDate)
{
    IList<Model.MonthGroupNewsEntry> monthGroupNewsEntries = new services.NewsEntryService(new Data.SqlNewsEntryRepository()).GetMonthGroupNewsEntries();
    IList<Model.NewsEntry> newsEntries = new Services.NewsEntryService(new Data.SqlNewsEntryRepository()).GetNewsEntriesWithinDateRange(FromDate, 
    return View(new Models.NewsViewModel(monthGroupNewsEntries, newsEntries));
} 
```

从：

```
<%= Html.ActionLink(b.MonthName + " " + b.Year.ToString() +  " (" + b.EntryCount.ToString() + ")", "News", new { FromDate = b.FromDate, ToDate = b.ToDate}) %> 
```

但是，当我尝试使用以下方法从 url 中删除控制器时：

```
routes.MapRoute(
"Default",
"{action}/{id}",
new { controller = "Home", action = "Index", id = UrlParameter.Optional } ); 
```

我收到 404 资源未找到错误。

*注意*：类中的其他方法工作正常，但这些方法要么没有参数，要么没有“id”，只是用两个 DateTime? 调用的方法？当我从 URL 中删除控制器时失败的参数。

但是，感谢您提供更新的答案-我所做的唯一更改是从上面的“routes.MapRoute”中删除“{controller}/”文本-不可能出现任何拼写错误等，这也在使用MVC 3。

*进一步*：使用Charx的建议：

```
routes.MapRoute(
"SpecificAction",
"{action}/{FromDate}/{ToDate}",
new { controller = "ControllerName", id = UrlParameter.Optional } ); 
```

我不再收到 404 错误，但由于日期中的“/”，它给出了“400 - 错误请求”，因此我将日期重新格式化为 dd-MM-YYYY：

```
<%= Html.ActionLink(b.MonthName + " " + b.Year.ToString() +  " (" + b.EntryCount.ToString() + ")", "News", new { FromDate = b.FromDate.ToString("dd-MM-yyyy"), ToDate = b.ToDate.ToString("dd-MM-yyyy")}) %> 
```

它不再是 404，FromDate 被很好地识别，但 ToDate 以空值出现。

*Final*：我将两个日期的类型更改为字符串，并在方法中将它们转换为 datetime - 现在两个参数都很好 - 我猜它可能正在寻找第一个参数的时间元素，因此忽略了第二个。

现在唯一突出的是，需要“id”参数的方法现在似乎将其用作查询字符串（NewsEnrty?ID=5）而不是“NewsEntry/5”，如果有人可以回答这个问题，那么谢谢 - 否则问题得到解答 - 再次感谢钱克斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:43:54.157

好的，当您编辑问题时，我会得到您想要的初始答案。我还创建了简单的解决方案来测试您的问题，它也适用于新闻控制器操作。日期不可能影响路由。但是你需要先检查一下——也许你犯了一些错误。再次检查路由，检查控制器名称，重新输入，检查正确的操作放置在 prpper 控制器中。如果您仍然遇到问题，请为您的问题创建一个小项目并将其放在保管箱或其他我可以获取和测试的地方，因为现在我无法重现您的问题。另外，我正在使用 MVC 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T16:54:36.563

已编辑。如果您希望仍然能够识别要在 URL 中调用的操作，那么您必须指定您的特定操作路由并确保识别操作所在的正确控制器：

```
routes.MapRoute(
"SpecificAction",
"{action}/{FromDate}/{ToDate}",
new { controller = "ControllerName", id = UrlParameter.Optional } );

routes.MapRoute(
"Default", // 
"{controller}/{action}/{id}",
new { controller = "Home", action = "Index", id = UrlParameter.Optional } ); 
```

# r - 将变量名传递给函数并在R中的循环内输出

> ID：13897455
> 
> 赞同：2
> 
> 时间：2012-12-16T00:24:44.927
> 
> 标签：r, for-loop, raster

这个问题似乎有变体，但似乎没有一个解决处于循环和命名和输出文件中的情况。我认为这可能如何工作：

```
for(j in 1:3) {
    for(k in 1:17){
       extract_[j]km <- extract(RasterStack, SpatialPolygonsDataFrame_[j]km, layer=[k], nl=1, df=TRUE)
    }
} 
```

extract 函数来自 raster 包。我已经创建了一系列 RasterStacks 和 SpatialPolygons，我想将它们传递给具有多个参数的函数（“提取”），其中一些我希望通过循环进行操作，并相应地标记输出。这在 BASH 中是一件轻而易举的事，但我无法在 R 中解决这个问题。

最终，我也想传递字符串，但[另一篇文章](https://stackoverflow.com/questions/2948367/pass-variable-name-to-a-function-in-r)似乎显示了那里的方式。

编辑：我最初将上述函数发布为单个数据框，而实际上，它们是栅格包中的指定对象（最终是数据框）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T00:52:14.070

正如 Justin 所指出的，使用列表更符合 R 的结构，而不是使用大量命名变量来搞乱工作区。当您在工作区中有很多对象要“知道”接下来会发生什么时，工作很快就会变得具有挑战性。

你的方式：

```
for(j in 1:3) { 
assign(
   paste("extract",j,"km",sep=""), # or paste0 to avoid need for sep=""
   function(
            get(
                paste("data",j,"km",sep="")
               )
           )
      )
} 
```

就个人而言，我更喜欢使用列表，因此在下面，我将您的数据对象转换为列表，并向您展示如何在该列表的所有元素上运行函数。以这种方式工作通常会降低以“get”和“assign”方式使用字符串的需要。

```
# just converting your variables to a list    
data.list <- mget(grep("data",ls(),value=TRUE),envir=.GlobalEnv) 

# then output results
result.list <- lapply(data.list,your_function) 
```

# android - 即使我的代码中没有错误，Facebook android 应用程序也会不断崩溃。为什么？

> ID：13897458
> 
> 赞同：-1
> 
> 时间：2012-12-16T00:25:07.053
> 
> 标签：android, facebook

如果您导入 facebook SDK 库，代码可以工作（暂时忽略不推荐使用的方法，哈哈）并且没有错误或警告。

但是，当我在我的 Android 2.2 或 4.2 模拟器上运行我的 facebook 应用程序时，应用程序在打开或登录屏幕后崩溃。为什么？

是因为我没有实现异步任务吗？如果是这样，它是如何工作的？

这是我的代码：

```
package com.sara.facebookappl;
import java.io.IOException;
import java.net.MalformedURLException;
import java.net.URL;

import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.os.StrictMode;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;
import com.facebook.android.Util;

public  class MainActivity extends Activity implements OnClickListener, DialogListener {

    Facebook fb; 
    ImageView button; 
    SharedPreferences sp; 
    TextView welcome; 
    Button post; 

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            post=(Button)findViewById(R.id.button1);

            String APP_ID = getString(R.string.APP_ID);
            fb= new Facebook(APP_ID);

            sp =getPreferences(MODE_PRIVATE);
            String access_token=sp.getString("access_token", null);
            long expires=sp.getLong("access_expires", 0);

            if (access_token !=null) {
                    fb.setAccessToken(access_token);
            }
            if(expires !=0) {
                    fb.setAccessExpires(expires);
            }

            button=(ImageView)findViewById(R.id.login);
            button.setOnClickListener((OnClickListener) this);
            updateButtonImage();

    }

    @SuppressWarnings("deprecation")
    private void updateButtonImage() {
            // TODO Auto-generated method stub

            post.setVisibility(Button.VISIBLE);
            button.setImageResource(R.drawable.com_facebook_loginbutton_blue);
            //logout button

            if (fb.isSessionValid()) {
                    button.setImageResource(R.drawable.com_facebook_loginbutton_blue);
                    // ^logout button

            JSONObject obj=null;
            URL img_url =null;

            try {
            String jsonUser= fb.request("me");
            obj = Util.parseJson(jsonUser);
            String id=obj.optString("id"); 
            String name = obj.optString("name");
            welcome.setText("Welcome, " + name);
            }catch(FacebookError e) {
                    e.printStackTrace();

            }catch (JSONException e) {
                    e.printStackTrace();
            }catch (MalformedURLException e) {
                    e.printStackTrace();
            }catch (IOException e) {
                    e.printStackTrace();
            }

            }else {
                    post.setVisibility(Button.VISIBLE);
                    button.setImageResource(R.drawable.com_facebook_loginbutton_blue);
            }
    }

    @SuppressWarnings("deprecation")
    public void buttonClicks(View v) {
            switch (v.getId()) {
                    case R.id.button1:
                            //post

                            Bundle params= new Bundle();

                            params.putString("name", "User X"); 
                            params.putString("caption", "Rating"); 
                            params.putString("description", "User X Rated"); 
                            params.putString("link", "http://..."); 

                            fb.dialog(MainActivity.this, "feed", params, new Facebook.DialogListener() {

                                    @Override
                                    public void onFacebookError(FacebookError e) {
                                            // TODO Auto-generated method stub

                                    }

                                    @Override
                                    public void onError(DialogError e) {
                                            // TODO Auto-generated method stub

                                    }

                                    @Override
                                    public void onComplete(Bundle values) {
                                            // TODO Auto-generated method stub

                                    }

                                    @Override
                                    public void onCancel() {
                                            // TODO Auto-generated method stub

                                    }
                            });
                            break;
            }
    }
    @SuppressWarnings("deprecation")
    public void onClick(View v) {
            if(fb.isSessionValid()) {

                    try {
                    fb.logout(getApplicationContext());
                    updateButtonImage();
                    //button will close our our session
            }catch(MalformedURLException e) {
                    e.printStackTrace();
            } catch(IOException e) {
                    e.printStackTrace();
            }
    }else{
                    //login into facebook
                    fb.authorize(MainActivity.this, new String[] {"email"}, new Facebook.DialogListener() {

                            @Override
                            public void onFacebookError(FacebookError e) {
                                    // TODO Auto-generated method stub
                                    Toast.makeText(MainActivity.this, "fbError", Toast.LENGTH_SHORT).show();
                            }

                            @Override
                            public void onError(DialogError e) {
                                    // TODO Auto-generated method stub
                                    Toast.makeText(MainActivity.this, "onError", Toast.LENGTH_SHORT).show();
                            }

                            @Override
                            public void onComplete(Bundle values) {
                                    // TODO Auto-generated method stub
                                    Editor editor=sp.edit();
                                    editor.putString("access_token", fb.getAccessToken());
                                    editor.putLong("access_expires", fb.getAccessExpires());
                                    editor.commit();
                                    updateButtonImage();
                            }

                            @Override
                            public void onCancel() {
                                    // TODO Auto-generated method stub
                                    Toast.makeText(MainActivity.this, "onCancel", Toast.LENGTH_SHORT).show();
                            }
                    });

                    }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
            // Inflate the menu; this adds items to the action bar if it is present.
            getMenuInflater().inflate(R.menu.activity_main, menu);
            return true;
    }

    @SuppressWarnings("deprecation")
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            fb.authorizeCallback(requestCode, resultCode, data);
    }

    @Override
    public void onComplete(Bundle values) {
            // TODO Auto-generated method stub

    }

    @Override
    public void onFacebookError(FacebookError e) {
            // TODO Auto-generated method stub

    }

    @Override
    public void onError(DialogError e) {
            // TODO Auto-generated method stub

    }

    @Override
    public void onCancel() {
            // TODO Auto-generated method stub

    }

} 
```

LogCat 错误：

```
12-16 04:56:59.070: E/AndroidRuntime(822): FATAL EXCEPTION: main 
12-16 04:56:59.070: E/AndroidRuntime(822): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.sara.facebookappl/com.sara.facebookappl.MainActivity}: android.os.NetworkOnMainThreadException 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.ActivityThread.access$600(ActivityThread.java:141) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.os.Handler.dispatchMessage(Handler.java:99) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.os.Looper.loop(Looper.java:137) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.ActivityThread.main(ActivityThread.java:5039) 
12-16 04:56:59.070: E/AndroidRuntime(822): at java.lang.reflect.Method.invokeNative(Native Method) 
12-16 04:56:59.070: E/AndroidRuntime(822): at java.lang.reflect.Method.invoke(Method.java:511) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560) 
12-16 04:56:59.070: E/AndroidRuntime(822): at dalvik.system.NativeStart.main(Native Method) 
12-16 04:56:59.070: E/AndroidRuntime(822): Caused by: android.os.NetworkOnMainThreadException 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117) 
12-16 04:56:59.070: E/AndroidRuntime(822): at java.net.InetAddress.lookupHostByName(InetAddress.java:385) 
12-16 04:56:59.070: E/AndroidRuntime(822): at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236) 
12-16 04:56:59.070: E/AndroidRuntime(822): at java.net.InetAddress.getAllByName(InetAddress.java:214) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpConnection.connect(HttpConnection.java:128) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:461) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:433) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177) 
12-16 04:56:59.070: E/AndroidRuntime(822): at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:271) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.facebook.android.Util.openUrl(Util.java:219) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.facebook.android.Facebook.requestImpl(Facebook.java:806) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.facebook.android.Facebook.request(Facebook.java:732) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.sara.facebookappl.MainActivity.updateButtonImage(MainActivity.java:83) 
12-16 04:56:59.070: E/AndroidRuntime(822): at com.sara.facebookappl.MainActivity.onCreate(MainActivity.java:63) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.Activity.performCreate(Activity.java:5104) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080) 
12-16 04:56:59.070: E/AndroidRuntime(822): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
12-16 04:56:59.070: E/AndroidRuntime(822): ... 11 more 
12-16 04:56:59.090: D/dalvikvm(822): GC_CONCURRENT freed 150K, 9% free 2723K/2988K, paused 7ms+58ms, total 239ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:36:57.853

> 是因为我没有实现异步任务吗？

是的。查看 LogCat 并找到最低的“Caused by”，在本例中是 NetworkOnMainThreadException。[文档](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)内容如下：

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。... 请参阅文档[设计响应性](http://developer.android.com/guide/practices/design/responsiveness.html)。

如果我们从 LogCat 的底部向上阅读，您会看到您上次运行的代码及其上面的行是：

```
 at com.facebook.android.Facebook.request(Facebook.java:732)
    at com.sara.facebookappl.MainActivity.updateButtonImage(MainActivity.java:83) 
```

第 83 行调用`Facebook#request()`这是一个网络操作...创建一个自定义 AsyncTask 然后将这一行及其所有支持代码移动到它的`doInBackground()`方法中：

```
JSONObject obj=null;
URL img_url =null;

try {
    String jsonUser= fb.request("me");
    obj = Util.parseJson(jsonUser);
    String id = obj.optString("id"); 
    String name = obj.optString("name");
}catch (FacebookError e) {
    e.printStackTrace();
}catch (JSONException e) {
    e.printStackTrace();
}catch (MalformedURLException e) {
    e.printStackTrace();
}catch (IOException e) {
    e.printStackTrace();
} 
```

*除了*线`welcome.setText("Welcome, " + name);`。您不能在`doInBackground()`. 您需要将此代码放入 中`onPostExecute()`，如果您阅读 AsyncTask 文档，您将了解到它确实可以访问 UI 线程。

这听起来很复杂，但经过一些阅读和尝试后，你会发现它并没有那么糟糕。如果您遇到困难，有许多示例可以帮助您。祝你好运！

# python - 拆分字符串并用成分替换原始字符串

> ID：13897460
> 
> 赞同：1
> 
> 时间：2012-12-16T00:25:25.253
> 
> 标签：python, string, replace

假设我用字符串“Taco>Bell”读入了一个输入文件，我想用“Taco>”和“Bell”替换那个字符串。换句话说，我想用两个替换一个字符串。我知道如何使用带有正则表达式的 split 方法来拆分字符串，但是如何执行替换呢？

每次有一个字符串有一个 ">" 后跟一个非空格字符，我想在字符之间插入一个空格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:40:39.403

在这种情况下，您需要向前看，如下所示：

```
import re

mystring = "John likes to eat Taco>Bell because it is Bar>Foo healthy third> ok."

print mystring

mystring = re.sub(r">(?! )", "> ", mystring)

print mystring 
```

`>`基本上，只有在 之后的字符不是空格时才会发生替换。

输出：

```
John likes to eat Taco>Bell because it is Bar>Foo healthy third> ok.
John likes to eat Taco> Bell because it is Bar> Foo healthy third> ok. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T03:50:22.887

一个可能的非正则表达式解决方案是

```
>>> somestr.replace(">","> ").replace(">  ","> ")
'John likes to eat Taco> Bell because it is Bar> Foo healthy third> ok.' 
```

# iphone - viewDidAppear 中的调用方法

> ID：13897467
> 
> 赞同：2
> 
> 时间：2012-12-16T00:26:22.557
> 
> 标签：iphone, ios, uinavigationcontroller, presentmodalviewcontroller, viewdidappear

如果用户触摸按钮，我已经设置了一个`void`从另一个类调用的方法。但是，我收到了“谁的视图不在窗口层次结构中”的错误，然后我发现了这个：[谁的视图不在窗口层次结构](https://stackoverflow.com/questions/11862883/whose-view-is-not-in-the-window-hierarchy)中。我只想调用下面的方法，但我收到了这个错误，它没有显示`navigatoncontroller`. 它说`Warning: Attempt to present <UINavigationController: 0xae34f10> on <ViewController: 0xae1f200> whose view is not in the window hierarchy!` 我不知道​​这是否可以从`viewDidAppear`或从某个地方调用该方法，它仅在之前在另一个视图上点击按钮时才有效。如果我`NSLog`在方法中调用 a 它会在输出中显示我`NSLog`。只有呈现`navController`似乎不起作用。如果有人可以帮助我，我会很高兴。

**我的方法：**

```
- (void) launchGalleryView
{

    MWPhotoBrowser *browser = [[MWPhotoBrowser alloc] initWithDelegate:self];

    // Set browser options.
    browser.wantsFullScreenLayout = YES;
    browser.displayActionButton = NO;

    UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:browser];

    NSMutableArray *photos = [[NSMutableArray alloc] init];
    MWPhoto *photo;
    photo = [MWPhoto photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"calculator" ofType:@"jpg"]];
    photo.caption = @"The calculator is soo beauteful...";
    [photos addObject:photo];

    self.photos = photos;

    [self presentModalViewController:navController animated:YES];

} 
```

只是忘了说：MWPhotoprowser 是一个实际上无关紧要的类。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:34:14.430

错误消息非常清楚——您正试图从此类中呈现控制器，但具有您按下按钮的类是其视图位于视图层次结构中的类。您要么需要使用按钮从类中呈现它，要么返回到此类，但是您正在这样做，然后在 viewDidAppear 之后调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:42:39.837

我检查了你的项目..无法解决正确的问题..

但我尝试了一个黑客，它成功了..

将此行替换为

```
[self presentModalViewController:navController animated:YES]; 
```

**这**

```
[[[[[UIApplication sharedApplication] delegate] window] rootViewController] presentModalViewController:navController animated:YES]; 
```

# objective-c - 通过不同视图从 AppDelegate 调用用户位置

> ID：13897468
> 
> 赞同：-2
> 
> 时间：2012-12-16T00:26:37.043
> 
> 标签：objective-c, ios, xcode, cllocationmanager

我正在尝试使用我的 appDelegate 从另一个视图获取用户的位置。我可以将它保存在 NSUserDefaults 中，但我想知道是否有更好的方法来做到这一点。

我的 AppDelegate 包含以下内容：

```
- (NSString *)deviceLocation
{
NSString *userCoordinates = [NSString stringWithFormat:@"latitude: %f longitude: %f", 
locationManager.location.coordinate.latitude, 
locationManager.location.coordinate.longitude];
locationManager = [[CLLocationManager alloc] init];
locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters; // 100 m
[locationManager startUpdatingLocation];

return userCoordinates;

} 
```

然后我想用这个从另一个页面调用用户的位置：

```
//Get the User's Location
NSString *location =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate deviceLocation]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:32:55.893

这不起作用，因为 AppDelegate 中的 deviceLocation 方法不返回任何内容。

如果你想提醒你当前的位置，deviceLocation 应该返回一些东西（即带有当前位置的 NSString）。

然后用这样的东西显示它

```
NSString *location =[(PDCAppDelegate *)[UIApplication sharedApplication].delegate deviceLocation];

//Alert
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Your Location" 
message:location delegate:self cancelButtonTitle:@"Dismiss" otherButtonTitles:nil, 
nil];
[alert show]; 
```

# php - 单词中的点 beetwen 字母

> ID：13897470
> 
> 赞同：-2
> 
> 时间：2012-12-16T00:27:15.773
> 
> 标签：php

我试图让 PHP 脚本以所有可能的方式键入点 beetwen 字母。例如`mouse`它给出的单词：`m.ouse, mo.use, ..., m.o.use, m.ou.se,...`

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:30:39.990

遍历从 0 到 的所有数字`pow(2,strlen($input)-1)`。对于每一个，将其视为二进制。对于每个位，如果是 1，则有一个点，否则没有点。

# cookies - 第三方“跟踪 cookie”如何工作？

> ID：13897472
> 
> 赞同：134
> 
> 时间：2012-12-16T00:27:20.090
> 
> 标签：cookies

我在这里读过这个问题： [互联网广告商如何使用第三方 Cookie？](https://stackoverflow.com/questions/8794981/how-do-internet-advertisers-use-third-party-cookies) 关于第三方跟踪 cookie 的工作原理，但我仍然很困惑。我不明白如果我访问网站 A（一个有广告的普通网站），网站 B（一个广告网站）如何为我的计算机分配一个 ID，然后弄清楚我在网站 A 上，以及之后的其他网站有它的广告。

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-12-16T01:55:50.337

首先，通过 HTTP 标头设置和检索 cookie。[如果您的浏览器向http://example.com](http://example.com)发送请求，则响应可能会返回一个标题为`Set-Cookie: foo=bar`. [您的浏览器存储此 cookie，并且在对http://example.com](http://example.com)的任何后续请求中，您的浏览器将`foo=bar`在`Cookie`标头中发送。（或者至少在 cookie 过期或被删除之前。）浏览器将`foo=bar`cookie 与*任何*请求一起发送到[http://example.com](http://example.com)，无论是谁发起了请求或上下文是什么。如果[http://example2.com](http://example2.com)包含标签`<img src="http://example.com/img.jpg">`，则浏览器`foo=bar`在获取[http://example.com/img.jpg时将发送 cookie](http://example.com/img.jpg)，即使[http://example2.com](http://example2.com)负责发送请求。

因此，如果网站 A 包含网站 B 提供的广告，那么网站 B 可以在您的浏览器中设置 cookie。例如，可能网站 A 用于`<iframe src="http://websiteB.com/ad.html></iframe>`从网站 B 投放广告。然后，当您的浏览器转到 fetch`http://websiteB.com/ad.html`时，响应将返回一个`Set-Cookie`标头，该标头设置一个带有一些唯一随机字符串的 cookie。如果网站 C 还包含来自网站 B 的广告，则当从网站 B 获取网站 C 上的广告时，将发送该唯一 cookie。

至于网站 B 如何知道您正在访问的实际网站，有多种方法。在某些情况下，当浏览器向一个网站发送请求时，它会告诉该网站您来自哪个网站。所以当浏览器去 fetch 时`http://websiteB.com/ad.html`，它可能包含告诉网站 B 请求是由网站 A 发起的 HTTP 标头`Referer: http://websiteA.com`。每次网站 B 看到它分配给您的唯一随机字符串时，它可以检查 Referer 标头以添加到你去过的地方的日志。如果A网站与B网站合作，A可以直接告诉B你来自A网站。例如，A网站可以通过使用包含B网站的广告`<iframe src="http://websiteB.com/ad.html?referer=websiteA.com">`，然后B网站会在查询中看到referer细绳。

这有帮助吗？您链接的答案中是否有对您没有意义的特定部分？

# c++ - 构造函数和初始化函数的区别

> ID：13897474
> 
> 赞同：3
> 
> 时间：2012-12-16T00:27:50.213
> 
> 标签：c++

> **可能重复：**
> [复制初始化和直接初始化在 C++ 中有区别吗？](https://stackoverflow.com/questions/1051379/is-there-a-difference-in-c-between-copy-initialization-and-direct-initializati)
> [C++中显式赋值和隐式赋值有什么区别](https://stackoverflow.com/questions/3057859/whats-the-difference-between-explicit-and-implicit-assignment-in-c)

就那么简单。和有什么区别

```
std::string a("abc"); 
```

和

```
std::string a = "abc"; 
```

# c - 从管道（）中的读取方法返回什么

> ID：13897479
> 
> 赞同：-3
> 
> 时间：2012-12-16T00:28:39.687
> 
> 标签：c

我有一个简单的问题..当我在管道中使用读取方法时，返回什么参数？例子：

```
temp = read(fb[0],readbuffer,sizeof(readbuffer)); 
```

会返回`temp`什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:34:53.733

从管道读取的字节数

# bash - bash if 语句失败

> ID：13897482
> 
> 赞同：3
> 
> 时间：2012-12-16T00:29:21.697
> 
> 标签：bash, if-statement

if 语句似乎无法正常运行，无论 if 语句的结果如何，程序都会启动。我错过了什么？

```
#!/bin/bash

dtime=($(date |cut -c12-13))
sevenO="19"
redshift=($(gtk-redshift -l -31.9530044:115.8574693))

if ( [[ "$dtime" -gt "$sevenO" ]])
then
    $redshift
fi 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T00:41:50.663

我是否正确理解您只想`gtk-redshift`在晚上 8 点到午夜之间跑步？如果是这样，问题是这个符号：

```
$(...) 
```

`...` *立即*运行命令，并评估其输出；所以这个声明：

```
redshift=($(gtk-redshift -l -31.9530044:115.8574693)) 
```

运行 command `gtk-redshift -l -31.9530044:115.8574693`，然后将变量设置`redshift`为包含该命令输出的数组。（由于周围*的*`(...)`.不想要那些行为。）

 *您可以将 Bash 脚本简化为：

```
#!/bin/bash

if [[ "$(date +%k)" -ge 20 ]] ; then
    gtk-redshift -l -31.9530044:115.8574693
fi 
```*

# objective-c - Objective-C 对象和块

> ID：13897483
> 
> 赞同：0
> 
> 时间：2012-12-16T00:29:36.063
> 
> 标签：objective-c, object, block

我试过了，我已经成功地将一个块分配到 id 变量中。块是 obj-c 对象吗？为什么我们使用 NULL 而不是 nil？（如果是对象）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:20:38.200

C 块的一个很好的特性是它们可以像基本的 Obj-C 对象一样工作。您可以将块投射到`id`; 您可以发送块 Obj-C 消息，例如“复制”、“保留”、“释放”、“自动释放”；您可以将块填充到 NSArray 或 NSDictionary 中。但是当需要执行该块时，您必须将其转换回其原始类型。

NULL、nil、Nil 和 0 只是表示零的不同词。选择其中一个仅仅是为您的程序员同事提供的文档；它对编译器有影响。

按照约定，`NULL`表示一个空的 C 指针，并`nil`表示一个空的 Obj-C 对象。由于块是这两种东西，你的程序员同事不会嘲笑你选择 NULL 或 nil 来表示一个空块。你的编译器当然不会在意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T00:33:24.350

块可以在 Objective-C 上下文中用作对象（也就是说，用 GCC 或 LLVM 编译的纯 C 或 C++ 程序也可以使用块，但它们不能用作对象，因为这两种语言都不理解 Objective-C以一种有意义的方式。）

通常，您应该使用`nil`for objects、`Nil`for `Class`es 和`NULL`for other pointers。我不知道你看到谁使用`NULL`而不是`nil`for 块，但这不是我在 Objective-C 上下文中所做的（和以前一样，在 C 或 C++ 上下文中，`nil`并且`Nil`如果不引入 Objective- 则不可用 - C 运行时标头，所以我将使用`NULL`.)

# php - 提取电影或电视剧的名称

> ID：13897484
> 
> 赞同：1
> 
> 时间：2012-12-16T00:30:14.467
> 
> 标签：php, extract

从该路径中提取电影或电视剧名称的最佳解决方案是什么？`E:\Dropbox\Hemsidor\collection-test\movies\avatar\documents\actors.txt`?

我已经检查过了`explode`，但是如果您必须`/`从路径中拆分每个，那么该解决方案就会很烦人。

**编辑**

搜索可能会导致不止一次的点击。结果可以这样显示：

```
E:\Dropbox\Hemsidor\collection-test\movies\avatar\documents\actors.txt
E:\Dropbox\Hemsidor\collection-test\movies\the_butterfly_effect\documents\actors.txt 
```

如何循环播放标题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:37:27.200

```
$string = 'E:\Dropbox\Hemsidor\collection-test\movies\avatar\documents\actors.txt?';

preg_match('/\\\movies\\\([^\x5C]+)/', $string, $matchs);

echo $matchs[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:44:06.443

这个简单的搜索不需要正则表达式。事实上，RegEx 对于大规模数据来说速度较慢。以下代码将完美完成

```
$string = 'E:\Dropbox\Hemsidor\collection-test\movies\avatar\documents\actors.txt?';
$a = explode('\\', $string);
echo $a[array_search('movies', $a)+1]; 
```

# apache - 使用 mod_rewrite 缩短 URL

> ID：13897488
> 
> 赞同：1
> 
> 时间：2012-12-16T00:30:44.160
> 
> 标签：apache, .htaccess, mod-rewrite

我目前正在尝试为我的一个项目制作 URL 缩短功能；如果用户使用不包含任何斜杠（用于目录）或文件扩展名的 URL 访问该站点，我想要做什么，它应该重定向到将提供正确文件的 PHP 脚本。例如：

[http://example.com/A123](http://example.com/A123)将被重写为[http://example.com/view.php?id=A123](http://example.com/view.php?id=A123)

但是 [http://example.com/A123/](http://example.com/A123/)不会被重写， [http://example.com/A123.png](http://example.com/A123.png)也不会被重写。我已经把 mod_rewrite 搞砸了几个小时了，在我的一生中，我无法让它工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T00:12:21.800

由于无法识别需要缩短的 URI，您需要排除所有其他可能性。这可能需要您建立一个冗长的排除列表。下面是一个起点。这些条件中的每一个都验证请求的 URI 不匹配（由 ! 表示）。当它不匹配所有条件时，将运行规则。

```
RewriteCond %{REQUEST_URI} !^/view.php
RewriteCond %{REQUEST_URI} !.html$
RewriteCond %{REQUEST_URI} !/$
RewriteRule ^/(.*)$ http://example.com/view.php?id=$1 [QSA] 
```

以上还要求您（如您所要求的）打破标准实践规则，即处理不带斜杠的目录请求。您可能会遇到其他问题，因为上述规则破坏了您的 Apache 服务器端目录规则。

重新思考逻辑。如果您有某种方法来识别要缩短的 URL，那会容易得多。例如“s”，[http](http://example.com/s/A123) ://example.com/s/A123 。

```
RewriteCond %{REQUEST_URI} ^/s/
RewriteRule ^/s/(.*)$ http://example.com/view.php?id=$1 [QSA] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:59:40.490

我绝对不是这方面的专家，但这与我想要完成的事情相似（[请参阅我尚未回答的问题](https://stackoverflow.com/questions/13897801/my-htaccess-rewriterule-works-on-localhost-mysite-but-not-at-mysite-com-on-a-sha)）

但是，如果我理解正确，这（未经测试）`RewriteRule`可能会起作用：

```
RewriteRule ^([^\.\/]*)$ view.php?id=$1 [L] 
```

*神奇*的部分是`[^\.\/]*`： 1 个或多个 ( `*`) 个字符 ( ) 实例，`[]`它不是 ( `[^ ]`) 句点或斜线（`\`转义这些字符）。

就像我说的，我没有测试过这个，我也不是专家，但也许这会有所帮助。

# python-2.7 - Scipy - Cookbook - 用特殊值绘制图像 - 不起作用

> ID：13897490
> 
> 赞同：2
> 
> 时间：2012-12-16T00:31:04.080
> 
> 标签：python-2.7, matplotlib, scipy

我正在尝试运行 Scipy Cook Book 中的示例，但无法运行。

我正在使用 python 2.7（Numpy 版本 1.6.2，Matplotlib 1.1.1）

代码位于

[http://www.scipy.org/Cookbook/Matplotlib/Plotting_Images_with_Special_Values](http://www.scipy.org/Cookbook/Matplotlib/Plotting_Images_with_Special_Values)

```
 from matplotlib.colors import Colormap, normalize
    #import matplotlib.numerix as nx  #In original code changed to numpy in line below
    import numpy as nx
    from types import IntType, FloatType, ListType

    class SentinelMap(Colormap):
            def __init__(self, cmap, sentinels={}):
                    # boilerplate stuff
                    self.N = cmap.N
                    self.name = 'SentinelMap'
                    self.cmap = cmap
                    self.sentinels = sentinels
                    for rgb in sentinels.values():
                            if len(rgb)!=3:
                                    raise ValueError('sentinel color must be RGB')

            def __call__(self, scaledImageData, alpha=1):
                    # assumes the data is already normalized (ignoring sentinels)
                    # clip to be on the safe side
                    rgbaValues = self.cmap(nx.clip(scaledImageData, 0.,1.))

                    #replace sentinel data with sentinel colors
                    for sentinel,rgb in self.sentinels.items():
                            r,g,b = rgb
                            rgbaValues[:,:,0] =  nx.where(scaledImageData==sentinel, r, rgbaValues[:,:,0])
                            rgbaValues[:,:,1] =  nx.where(scaledImageData==sentinel, g, rgbaValues[:,:,1])
                            rgbaValues[:,:,2] =  nx.where(scaledImageData==sentinel, b, rgbaValues[:,:,2])
                            rgbaValues[:,:,3] =  nx.where(scaledImageData==sentinel, alpha, rgbaValues[:,:,3])

                    return rgbaValues

    class SentinelNorm(normalize):
            """
            Leave the sentinel unchanged
            """
            def __init__(self, ignore=[], vmin=None, vmax=None):
                    self.vmin=vmin
                    self.vmax=vmax

                    if type(ignore) in [IntType, FloatType]:
                            self.ignore = [ignore]
                    else:
                            self.ignore = list(ignore)

            def __call__(self, value):

                    vmin = self.vmin
                    vmax = self.vmax

                    if type(value) in [IntType, FloatType]:
                            vtype = 'scalar'
                            val = array([value])
                    else:
                            vtype = 'array'
                            val = nx.asarray(value)

                    # if both vmin is None and vmax is None, we'll automatically
                    # norm the data to vmin/vmax of the actual data, so the
                    # clipping step won't be needed.
                    if vmin is None and vmax is None:
                            needs_clipping = False
                    else:
                            needs_clipping = True

                    if vmin is None or vmax is None:
                            rval = nx.ravel(val)
                            #do this if sentinels (values to ignore in data)
                            if self.ignore:
                                    sortValues=nx.sort(rval)
                                    if vmin is None:
                                            # find the lowest non-sentinel value
                                            for thisVal in sortValues:
                                                    if thisVal not in self.ignore:
                                                            vmin=thisVal #vmin is the lowest non-sentinel value
                                                            break
                                            else:
                                                    vmin=0.
                                    if vmax is None:
                                            for thisVal in sortValues[::-1]:
                                                    if thisVal not in self.ignore:
                                                            vmax=thisVal #vmax is the greatest non-sentinel value
                                                            break
                                            else:
                                                    vmax=0.
                            else:
                                    if vmin is None: vmin = min(rval)
                                    if vmax is None: vmax = max(rval)
                    if vmin > vmax:
                            raise ValueError("minvalue must be less than or equal to maxvalue")
                    elif vmin==vmax:
                            return 0.*value
                    else:
                            if needs_clipping:
                                    val = nx.clip(val,vmin, vmax)
                            result = (1.0/(vmax-vmin))*(val-vmin)

                    # replace sentinels with original (non-normalized) values
                    for thisIgnore in self.ignore:
                            result = nx.where(val==thisIgnore,thisIgnore,result)

                    if vtype == 'scalar':
                            result = result[0]
                    return result

    if __name__=="__main__":
            import pylab
            import matplotlib.colors
            n=100

            # create a random array
            #X = nx.mlab.rand(n,n) # In original cookbook code changed to line below
            X = nx.random.rand(n,n)
            cmBase = pylab.cm.jet

            # plot it array as an image
            pylab.figure(1)
            pylab.imshow(X, cmap=cmBase, interpolation='nearest')

            # define the sentinels
            sentinel1 = -10
            sentinel2 = 10

            # replace some data with sentinels
            X[int(.1*n):int(.2*n), int(.5*n):int(.7*n)]  = sentinel1
            X[int(.6*n):int(.8*n), int(.2*n):int(.3*n)]  = sentinel2

            # define the colormap and norm
            rgb1 = (0.,0.,0.)
            rgb2 = (1.,0.,0.)
            cmap = SentinelMap(cmBase, sentinels={sentinel1:rgb1,sentinel2:rgb2,})
            norm = SentinelNorm(ignore=[sentinel1,sentinel2])

            # plot with the modified colormap and norm
            pylab.figure(2)
            pylab.imshow(X, cmap = cmap, norm=norm, interpolation='nearest')

            pylab.show() 
```

但是，我收到一条错误消息

```
 Exception in Tkinter callback
    Traceback (most recent call last):
      File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
        return self.func(*args)
      File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 236, in resize
        self.show()
      File "C:\Python27\lib\site-packages\matplotlib\backends\backend_tkagg.py", line 239, in draw
        FigureCanvasAgg.draw(self)
      File "C:\Python27\lib\site-packages\matplotlib\backends\backend_agg.py", line 421, in draw
        self.figure.draw(self.renderer)
      File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 55, in draw_wrapper
        draw(artist, renderer, *args, **kwargs)
      File "C:\Python27\lib\site-packages\matplotlib\figure.py", line 898, in draw
        func(*args)
      File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 55, in draw_wrapper
        draw(artist, renderer, *args, **kwargs)
      File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 1997, in draw
        a.draw(renderer)
      File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 55, in draw_wrapper
        draw(artist, renderer, *args, **kwargs)
      File "C:\Python27\lib\site-packages\matplotlib\image.py", line 350, in draw
        im = self.make_image(renderer.get_image_magnification())
      File "C:\Python27\lib\site-packages\matplotlib\image.py", line 569, in make_image
        transformed_viewLim)
      File "C:\Python27\lib\site-packages\matplotlib\image.py", line 201, in _get_unsampled_image
        x = self.to_rgba(self._A, bytes=True)
      File "C:\Python27\lib\site-packages\matplotlib\cm.py", line 214, in to_rgba 
```

网络搜索使我找到了有关它的评论，但是没有任何用处。

[http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg19249.html](http://www.mail-archive.com/matplotlib-users@lists.sourceforge.net/msg19249.html)

希望有人可以帮助我理解问题并找出错误。

# css - 带有 span4 标签的 Twitter Bootstrap 响应问题

> ID：13897493
> 
> 赞同：0
> 
> 时间：2012-12-16T00:31:23.440
> 
> 标签：css, twitter-bootstrap, responsive-design

我有一个演示站点，位于[此处](http://adambalan.com/WordPressDev/)，可让您了解正在发生的事情。如果您滚动到底部，您会看到 9 个单独的帖子，它们的布局都正确。但是，如果您将屏幕缩小到小于 1232 像素，您会看到第 7 个帖子与其他帖子分离并向下移动。

现在我使用默认样式来对齐它们，使用 row 然后 span4。任何人都可以解释为什么会这样吗？以及有什么办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:45:54.750

您的跨度总数应加起来为 12。但是，您的示例站点加起来超过 40！如果您不按预期使用它，我认为没有任何定义的行为会发生什么。

来自 Bootstrap 主页

> “默认的 Bootstrap 网格系统使用 12 列”

因此，您的跨度总数必须增加到每行 12 个。IE。

```
<div class="row">
  <div class="span4">...</div>
  <div class="span8">...</div>
</div>
<div class="row">
  <div class="span3">...</div>
  <div class="span3">...</div>
  <div class="span3">...</div>
</div>
<div class="row">
  <div class="span7">...</div>
  <div class="span3 offset2">...</div>
</div> 
```

# javascript - iPhone Web App - 禁用正文滚动但允许正文中的所有元素

> ID：13897495
> 
> 赞同：3
> 
> 时间：2012-12-16T00:31:42.073
> 
> 标签：javascript, jquery, css, iphone-web-app

我目前正在使用以下代码来禁用 html 和 body 滚动：

```
document.ontouchmove = function(event){
    event.preventDefault();
} 
```

这可行，但它会禁用页面内的所有本机滚动。我在这个网站上看到了很多关于这个的话题，但我没有看到一个明确的答案或例子，它允许滚动页面中的任何其他元素而无需定义一个。

您可以禁用滚动的弹性，然后使用 -webkit-overflow 滚动来滚动正文吗？

如果有人知道这样做的有效方法，我将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T22:33:30.327

最有效的方法是使用 css？

```
html {
    overflow: hidden;
    height: 100%;
}

body {
    margin: 0;
    height: 100%;
    background-color: red;
}
.container {
    overflow-y: scroll;
    height: 100%;
    background-color: green;
} 
```

[http://jsfiddle.net/xBuhy/](http://jsfiddle.net/xBuhy/)

# c - 我在 xcode 中使用 C 有一些问题

> ID：13897496
> 
> 赞同：0
> 
> 时间：2012-12-16T00:32:09.887
> 
> 标签：c, xcode, string, itoa

我正在使用 Microsoft Visual Studio 学习 C，我编写了一些代码，它运行良好。但是当我尝试使用 xcode 进行调试时，它不起作用。

[这是我在 xcode 中的错误](https://www.dropbox.com/s/kx5pozb88lg96va/Capture%20d%E2%80%99%C3%A9cran%202012-12-16%20%C3%A0%2001.25.15.png)

这是我将数字转换为罗马数字的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main()
{
    int dec,length,indice,irom,itab=0;
    char rom[4][5]={'\0'};
    char dconvert[10];
    char convert[2];
    char tab[7]={'I','V','X','L','C','D','M'};
    float dec2;

    puts("give a number");
    scanf("%d",&dec);

    itoa(dec,dconvert,10);
    length=strlen(dconvert);
    strrev(dconvert);

    for (indice=0; indice < length;indice ++)
    {   
        convert[0]=dconvert[indice];
        dec=atoi(convert);
        if (dec<=3)
        {
            for (irom=0; irom<dec;irom++)
                {
                    rom[indice][irom]=tab[itab];
                }
        }
        if (dec>3 && dec<9)
        {   
            irom=0;
            dec2=dec-5;
            if (dec2<0)
            {
                rom[indice][irom]=tab[itab];
                rom[indice][irom+1]=tab[itab+1];
            }
            else 
            {
                rom[indice][irom]=tab[itab+1];
                for (irom=1;irom<=dec2;irom++)
                {
                    rom[indice][irom]=tab[itab];
                }
            }
        }
        if (dec==9)
        {   
            irom=0;
            rom[indice][irom]=tab[itab];
            rom[indice][irom+1]=tab[itab+2];
        }

        itab=itab+2;
    }
    for (indice=length; indice>=0;indice--)
        {
            printf("%s",rom[indice]);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:37:41.600

如前所述，`itoa`它不是 C99 标准的一部分。相反，使用`sprintf`（或`snprintf`避免缓冲区溢出）：

```
sprintf(target_string, "%d", int_value); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:39:58.670

你可以使用：

```
snprintf(str, sizeof(str), "%d", num); 
```

以避免缓冲区溢出（当您转换的数字不适合您的字符串的大小时）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T00:40:38.400

itoa 和 strrev 都不是标准的。

其他 StackOverflow 问题：

[Linux中的itoa函数在哪里？](https://stackoverflow.com/questions/190229/where-is-the-itoa-function-in-linux)

[strrev() 函数在 Linux 中不可用吗？](https://stackoverflow.com/questions/8534274/is-strrev-function-not-available-in-linux)

解决这两个问题可能会解决中间问题，但如果没有，请阅读[http://forums.bignerdranch.com/viewtopic.php?f=77&t=1743](http://forums.bignerdranch.com/viewtopic.php?f=77&t=1743)

# mongodb - 使用 $inc 更新不会增加字段

> ID：13897497
> 
> 赞同：0
> 
> 时间：2012-12-16T00:32:32.893
> 
> 标签：mongodb

你们能告诉我我做错了什么吗？

我有以下文件

```
{
        "_id" : ObjectId("5013df3e4a4314271d002476"),
        "bgtiled" : NumberLong(1),
        "post_count" : NumberLong(0),
        "url" : "fb_test",
        "url_lower" : "fb_test",
        "user_id" : NumberLong(4044217),
        "verified" : NumberLong(0)
} 
```

我想增加`post_count`. 根据[文档](http://docs.mongodb.org/manual/reference/operators/#_S_set)，我这样做

```
db.users.update({user_id : 4044217}, {$inc : {post_count : 1}}); 
```

并且它不会增加该字段。我也试过这个

```
db.users.update({user_id : 4044217}, {$inc : {"post_count" : 1}}); 
```

和这个

```
db.users.update({user_id : 4044217}, {"$inc" : {"post_count" : 1}}); 
```

没有结果:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:42:01.063

如果您在 shell 中执行此操作，找出正在发生的事情的一种方法是检查[`getLastError()`](http://docs.mongodb.org/manual/reference/command/getLastError/)此更新返回的调用。

由于 shell 会在每个条目上自动为您调用 getLastError()，因此您可以通过以下两种方式之一执行此操作：

```
> db.users.update({user_id : 4044217}, {$inc : {post_count : 1}})
> db.getPrevError()
{ "err" : null, "updatedExisting" : true, "n" : 1, "nPrev" : 8, "ok" : 1 } 
```

或者您可以在 shell 为您调用 GLE 之前通过

```
> db.users.update({user_id : 4044217}, {$inc : {post_count : 1}}); db.getLastErrorObj();
{
    "updatedExisting" : false,
    "n" : 0,
    "connectionId" : 2,
    "err" : null,
    "ok" : 1
} 
```

注意：在第二个示例中，GLE 调用必须与更新在同一行。

在您的情况下，您似乎已经获得了一个现有文档已更新的信息，这可能会提示您通过以下方式检查更新语句的 find 子句

```
> db.users.find( {user_id : 4044217} ) 
```

这将返回多个文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:45:44.293

原来我有多个与查询匹配的文档，只有一个被更新。

对不起。

# c++ - Windows UTC 时间是否独立于夏令时？

> ID：13897505
> 
> 赞同：2
> 
> 时间：2012-12-16T00:33:50.007
> 
> 标签：c++, winapi, time, utc, dst

[我使用GetSystemTime](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724390%28v=vs.85%29.aspx) API从 Windows 服务应用程序获取要在内部使用的当前 UTC 时间。但是我很好奇，那个API夏令时返回的时间是独立的吗？

PS。让我解释一下我的意思。比如说，我调用 GetSystemTime，它在夏令时应该在凌晨 2 点生效的那一天返回 01:59:00 AM。然后我在 2 分钟后再次调用此 API（在夏令时更改之后）。第二个结果会与第一个结果相隔 2 分钟，还是会在其中反映夏令时更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:48:40.500

UTC 是 ... [UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)

> 夏令时
> UTC 不会随着季节的变化而变化，但如果时区管辖区遵守夏令时（夏令时），当地时间或民用时间可能会发生变化。例如，在冬季，UTC 比美国东海岸的本地时间早 5 小时（即，比当天晚），但在实行夏令时时会提前 4 小时。

您的本地时间是一个偏移量，而夏令时（这是一种本地现象）只会改变*偏移量*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:50:13.107

UTC 中没有夏令时。

但是，偶尔会有闰秒。最后一个闰秒是在 2012 年 6 月 30 日 23:59:60 UTC 添加的。当天结束的时间从 23:59:59 变为 23:59:60，然后变为 2012 年 7 月 31 日 00:00:00。

如果您想要闰秒空闲时间标准，请使用诸如 Atomic Time 之类的东西。

# ruby-on-rails - Rails 中的嵌套模型编辑页面出错

> ID：13897507
> 
> 赞同：0
> 
> 时间：2012-12-16T00:33:53.343
> 
> 标签：ruby-on-rails, ruby

我想对我的一个嵌套模型执行编辑操作。我不断收到以下错误“NilClass:Class 的未定义方法‘model_name’”

我不知道发生了什么事。有什么帮助吗？

**路线**

```
 resources :users, :except => [ :create, :new ] do
     resources :store do
       get "inbox", :on => :collection
       get "openedmessages", :on => :collection
     end
  end 
```

**存储操作**

```
 def edit
    @store = current_user.store.id
  end

  def create
    @store = current_user.store.new(params[:store])
  end

  def update
    @stores = current_user.store.id
    if @stores.update_attributes
      flash[:success] = "Store has been updated"
      render 'edit'
    else
      render 'edit'
    end
  end 
```

**在商店中查看编辑操作**

```
<ul class="storedashboard_header">
    <li><%= link_to "Manage Gear", user_store_index_path(current_user) %></li>
    <li><%= link_to "Store Appearance", edit_user_store_path(current_user, @store) %></li>
    <li><%= link_to "Announcements", '#' %></li>
</ul>
    <%= render "users/userdashboard_header" %>
    <%= render "store/storemenu" %>
    <div style="clear:both"></div>
    <% flash.each do |name, msg| %>
      <div class="alert alert-success">
        <a class="close" data-dismiss="alert">×</a>
        <%= msg %>
      </div>
    <% end %>
    <div>
        <%= simple_form_for @stores, :html => {:multipart => true, :class => 'form-horizontal'} do |f| %>
            </br>
            <div style="float: left;">
            <%= f.input :storename %>
            <%= f.input :storeimage %>
            <%= f.input :storelogo %>
            <%= f.button :submit, class: 'btn btn-large', style: 'margin-left: 40px;'  %>
            </div>
        <% end %>
    </div> 
```

**更新**

将我的控制器更改为以下内容：

```
 def edit
    @store = Store.find(current_user.store.id)
  end

  def create
    @store = current_user.store.new(params[:store])
  end

  def update
    @store = Store.find(current_user.store.id)
    if @store.update_attributes(params[:store])
      flash[:success] = "Store has been updated"
      render 'edit'
    else
      render 'edit'
    end
  end 
```

**更新后的新错误**

#<#:0x007fec93b97238> 的未定义方法“store_path”

**最终修复**

需要修复视图...

```
 <%= simple_form_for [current_user, @store], :html => {:multipart => true, :class => 'form-horizontal'} do |f| %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:27:13.010

如果我正确理解您的问题：

@store 需要是模型 Store 的对象，而不仅仅是 id。

类似：@store = Store.find(current_user.store.id) 将返回对象

# php - 计算 SQL 查询中的行数与使用 PHP 更新字段

> ID：13897508
> 
> 赞同：1
> 
> 时间：2012-12-16T00:33:54.227
> 
> 标签：php, mysql, optimization

我在一个评论应用程序中工作，我想要一些关于我用来跟踪评论的回复或喜欢数量的方法的反馈。评论和回复存储在同一个表中，为了确定评论是否是回复，如果评论不是回复，我使用该`parent_id`字段`0`。

请注意，我不会包括下表的所有列：

```
 cid | parent_id | replies | likes 
-----+-----------+---------+-------
  2  |     0     |    3    |   0   
  3  |     2     |    0    |   0   
  4  |     2     |    0    |   2   
  5  |     2     |    0    |   0 
```

在上表中，带有 id (cid)`[3,4,5]`的评论是对评论的回复`#2`。列`replies`和`likes`是整数，相应地保存回复和喜欢的计数。这些列的完整性和准确性通过 PHP 代码进行维护和更新，例如，如果`#2`添加了另一个评论回复，则回复列将增加一或如果删除则减少一。

我也知道我可以动态计算获取评论的 SQL 查询中的回复计数，但我认为这会给 SQL 服务器增加更多压力。这个查询看起来像这样：

```
SELECT cid, parent_id, (
    SELECT count(*)
    FROM comments as SC
    WHERE RC.parent_id = C.cid
    ) AS replies
FROM comments AS C
WHERE thread = {thread_id} 
```

通过将回复和喜欢存储在表格的实际列中，我做得对吗？或者我是否夸大了上述查询在 MySql 服务器中的压力，而我应该使用这种复杂的查询？

任何反馈将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:50:00.787

我认为您不需要名为“回复”的专栏。只是占用额外的不需要的空间。对 cid 和 parentId 进行组合索引。那应该足够好了。查询应该很快。通过拥有该专栏，您给应用程序代码和 mysql 增加了更多压力。（用于维护完整性的应用程序代码和 mysql coz 2 写入代替 1 写入 - 当输入评论时）。

但是如果你在谈论数百万行，它不会选择mysql，而是mongo，数据可以构造成漂亮的JSON并转储到mongo中。

# delphi - 小刻度 TeeChart delphi 对数刻度

> ID：13897509
> 
> 赞同：4
> 
> 时间：2012-12-16T00:34:00.333
> 
> 标签：delphi, teechart

我对小蜱有一个非常具体的要求。我的客户想要一个根据不同年代的具有不同数量的次要刻度的图表。例如，如果十年小于 1，他想要 10 个标签（1、2、3、4、5、6、7、8、9、10）和以下次要刻度（1.5、2.5、3.5、4.5、5.5 , 6.5, 7.5, 8.5 ,9.5)

如果十年是 1 到 2，他想要以下标签（1、2、3、4、5、6、8、10）和以下小刻度（1.5、2.5、3.5、4.5、5.5、7、9）

非常感谢任何帮助。我找不到如何覆盖刻度线，因此我可以将它们放置在自定义点。不过，我已经想出了自定义标签。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:17:41.833

[在这里](http://www.teechart.net/support/viewtopic.php?f=3&t=13743&p=60213#p60213)回答你。我在这里发布了最后一个更复杂示例的代码，其中自定义标签用于绘制不规则标签，并`DrawMinorTick`创建了一个函数来手动绘制不规则自定义次要刻度。

```
uses Series, TeCanvas;

procedure TForm1.FormCreate(Sender: TObject);
var i: Integer;
begin
  Chart1.View3D:=false;
  Chart1.Legend.Visible:=false;

  Chart1.AddSeries(TFastLineSeries).FillSampleValues(10);
  for i:=0 to Chart1[0].Count-1 do
    Chart1[0].XValue[i]:=i+1;

  Chart1.Axes.Bottom.Items.Clear;
  for i:=1 to 4 do
    Chart1.Axes.Bottom.Items.Add(i, IntToStr(i));

  Chart1.Axes.Bottom.Items.Add(7, '7');
  Chart1.Axes.Bottom.Items.Add(10, '10');

  Chart1.Axes.Bottom.MinorTickCount:=0;
end;

procedure TForm1.Chart1AfterDraw(Sender: TObject);
begin
  DrawMinorTick(Chart1.Axes.Bottom, 1.5);
  DrawMinorTick(Chart1.Axes.Bottom, 2.5);
  DrawMinorTick(Chart1.Axes.Bottom, 5);
  DrawMinorTick(Chart1.Axes.Bottom, 6);
  DrawMinorTick(Chart1.Axes.Bottom, 8);
  DrawMinorTick(Chart1.Axes.Bottom, 9);
end;

procedure TForm1.DrawMinorTick(axis: TChartAxis; value: double);
var XPos, YPos: Integer;
begin
  Chart1.Canvas.Pen.Color:=axis.MinorTicks.Color;
  Chart1.Canvas.Pen.Width:=axis.MinorTicks.Width;
  Chart1.Canvas.Pen.Style:=axis.MinorTicks.Style;
  if axis.Horizontal then
  begin
    XPos:=axis.CalcPosValue(value);
    YPos:=axis.PosAxis+1;
    Chart1.Canvas.Line(XPos, YPos, XPos, YPos+axis.MinorTickLength);
  end
  else
  begin
    XPos:=axis.PosAxis;
    YPos:=axis.CalcPosValue(value);
    Chart1.Canvas.Line(XPos, YPos, XPos-axis.MinorTickLength, YPos);
  end;
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T15:26:08.633

我已经阅读了 TeeChart 源代码 (v2010)。没有定制的余地——没有什么像`OnGetNextAxisLabel`.

对于非对数轴，小刻度在标签之间等距绘制。

对于对数轴，小刻度在标签之间的间距不相等，至少对于非等间距的标签。事实上，我可以在我的代码中看到，在使用对数轴时，我总是禁用次要刻度。我怀疑那是因为它们根本不起作用！

所以我认为你唯一的选择是自己修改源代码。

# php - 更新 CSV 文件 PHP 中的总计

> ID：13897514
> 
> 赞同：0
> 
> 时间：2012-12-16T00:34:23.710
> 
> 标签：php, csv

我正在尝试更新像这样被阻止的文件

```
0,0,5,2,0
0,0,7,0,0
0,2,2,3,0
1,2,2,2,0
0,0,5,2,0
0,1,3,2,1
0,0,3,2,2
0,0,6,1,0 
```

每行是一个问题，行中的每个数字是受访者的数量。这里的代码试图逐行检查用户从每个问题的 5 个单选按钮中选择了哪个答案。所以格式是这样的：

```
Question 1: Blah              |  1  |  2  |  3  |  4  |  5  | Check one

//Grab user input from survey
$q[1] = $_POST['radio1'];
$q[2] = $_POST['radio2'];
$q[3] = $_POST['radio3'];
$q[4] = $_POST['radio4'];
$q[5] = $_POST['radio5'];
$q[6] = $_POST['radio6'];
$q[7] = $_POST['radio7'];
$q[8] = $_POST['radio8'];

//Use file handle and write to file
$FileName = "results.csv";
$FileHandle = fopen($FileName, 'a+') or die("can't open file!!");

$i = 0;

while($row = fgetcsv($FileHandle)){
    $j = 1;
    for($i = 0; $i<8; $i++){
        if($q[$j] == 1){
            $row[0]++;
        }
        else if($q[$j] == 2){
            $row[1]++;
        }
        else if($q[$j] == 3){
            $row[2]++;
        }
        else if($q[$j] == 4){
            $row[3]++;
        }
        else if($q[$j] == 5){
            $row[4]++;
        }
        $j++;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:36:24.773

诸如`\n`不在单引号内插值的转义序列。

您必须使用双引号：

```
$result = $q1.','.$q2.','.$q3.','.$q4.','.$q5.','.$q6.','.$q7.','.$q8."\n"; 
```

另外，您应该看一下该[`fputcsv()`](http://php.net/fputcsv)功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:40:50.337

而不是 fwrite，检查 fputcsv() ：[http](http://php.net/manual/en/function.fputcsv.php) ://php.net/manual/en/function.fputcsv.php这将为您提供比字符串连接更多的灵活性。

例如

```
$q[1] = $_POST['radio1'];
$q[2] = $_POST['radio2'];
$q[3] = $_POST['radio3'];
$q[4] = $_POST['radio4'];
$q[5] = $_POST['radio5'];
$q[6] = $_POST['radio6'];
$q[7] = $_POST['radio7'];
$q[8] = $_POST['radio8'];

fputcsv($FileHandlem $q); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T02:09:33.927

这是我对我的问题的解决方案，它可能并不优雅，但它确实有效。脚本必须提取值并在最后更新它们。

```
<?php

//Grab user input from survey
$q[1] = $_POST['radio1'];
$q[2] = $_POST['radio2'];
$q[3] = $_POST['radio3'];
$q[4] = $_POST['radio4'];
$q[5] = $_POST['radio5'];
$q[6] = $_POST['radio6'];
$q[7] = $_POST['radio7'];
$q[8] = $_POST['radio8'];

//Use file handle and write to file
$FileName = "results.csv";
$FileHandle = fopen($FileName, 'r') or die("can't open file!!");

$result = array();

$i = 0;
$j = 1;
while(($row = fgetcsv($FileHandle, 1024, ",")) !== FALSE){

    if($q[$j] == 1){
        $temp[0] = $row[0] + 1;
        $temp[1] = $row[1];
        $temp[2] = $row[2];
        $temp[3] = $row[3];
        $temp[4] = $row[4]; 
    }
    else if($q[$j] == 2){
        $temp[0] = $row[0];
        $temp[1] = $row[1] + 1;
        $temp[2] = $row[2];
        $temp[3] = $row[3];
        $temp[4] = $row[4];
    }
    else if($q[$j] == 3){
        $temp[0] = $row[0];
        $temp[1] = $row[1];
        $temp[2] = $row[2] + 1;
        $temp[3] = $row[3];
        $temp[4] = $row[4];
    }
    else if($q[$j] == 4){
        $temp[0] = $row[0];
        $temp[1] = $row[1];
        $temp[2] = $row[2];
        $temp[3] = $row[3] + 1;
        $temp[4] = $row[4];
    }
    else if($q[$j] == 5){
        $temp[0] = $row[0];
        $temp[1] = $row[1];
        $temp[2] = $row[2];
        $temp[3] = $row[3];
        $temp[4] = $row[4] + 1;
    }
    $result[] = $temp;
    $j++;
}
fclose($FileHandle);

$FileHandle = fopen($FileName, 'w') or die("can't open file!!");

foreach($result as $line){
    fputcsv($FileHandle, $line);
}

fclose($FileHandle);

?> 
```

# php - 在 PHP 中获取货币符号

> ID：13897516
> 
> 赞同：49
> 
> 时间：2012-12-16T00:35:24.570
> 
> 标签：php, formatting, currency

让我们从一段简单的代码开始格式化货币`NumberFormatter`：

```
$formatter = new NumberFormatter('en_US', NumberFormatter::CURRENCY);
echo $formatter->formatCurrency(123456789, 'JPY'); 
```

这打印：`¥123,456,789`。

如果你想格式化钱，这没关系。

但我想做的是获取给定货币 ISO 4217 代码（例如 JPY）的货币符号（例如 ¥）。

我的第一个猜测是尝试使用：

```
$formatter->getSymbol(NumberFormatter::CURRENCY_SYMBOL); 
```

但这给出了构造函数（en_US）中给出的语言环境的货币符号，在我的例子中是 $ 。

有没有办法通过 PHP 中的货币 ISO 4217 代码获取货币符号？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2015-05-04T09:30:28.383

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-06-05T14:10:01.090

我使用[https://github.com/symfony/Intl](https://github.com/symfony/Intl)实现了这一点：

```
Symfony\Component\Intl\Intl::getCurrencyBundle()->getCurrencySymbol('EUR') 
```

返回

```
'€'. 
```

**Symfony 4.3 >**

值得指出的是 SF4.3 及以上已弃用：

```
/**
 * Returns the bundle containing currency information.
 *
 * @return CurrencyBundleInterface The currency resource bundle
 *
 * @deprecated since Symfony 4.3, to be removed in 5.0\. Use {@see Currencies} instead.
 */
public static function getCurrencyBundle(): CurrencyBundleInterface
{ 
```

因此，您可以这样做：

```
use Symfony\Component\Intl\Currencies;
echo Currencies::getSymbol('AUD'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-16T01:16:57.930

由于符号可以是多字节的，我使用 mb_*() 函数来正确抓取所有非标点符号和非数字字符，它们只会留下符号。

```
function get_currency_symbol($string)
{
    $symbol = '';
    $length = mb_strlen($string, 'utf-8');
    for ($i = 0; $i < $length; $i++)
    {
        $char = mb_substr($string, $i, 1, 'utf-8');
        if (!ctype_digit($char) && !ctype_punct($char))
            $symbol .= $char;
    }
    return $symbol;
}

$format = new NumberFormatter('en_US', NumberFormatter::CURRENCY);
$string = $format->formatCurrency(123456789, 'JPY');
echo get_currency_symbol($string); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-23T20:55:15.977

如果您使用此函数设置区域设置`setlocale("LC_ALL", "es_AR");` 您可以使用`localeconv()['currency_symbol']`或`localeconv()['int_curr_symbol']`获取区域设置货币符号和货币符号的国际变体。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-18T22:09:46.247

您可以使用**Symfony 国际**组件

通过作曲家安装它 `composer require symfony/intl`

然后使用以下内容获取 HTML 符号

```
use Symfony\Component\Intl\Currencies;
\Locale::setDefault('en');
$symbol = Currencies::getSymbol('INR'); // => '₹'
echo $symbol; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-14T11:02:29.877

Cryptic 有一个很好的答案，但有一种更简单的方法：

```
preg_replace('#[a-z0-9.]*#i', '', $formatter->formatCurrency('0', $currency)) 
```

这是一个很好的简单内联解决方案，不需要声明另一个函数，但是它也不能正确处理所有情况 - 即字母是输出的一部分的货币。但是为了区分例如 $ 和 £，它可以正常工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-16T02:14:44.260

```
Zend_Locale::getTranslationList('CurrencySymbol') 
```

将为您提供与其符号对应的 3 个字母货币代码的关联数组。

然后可以这样使用：

```
$curArr = Zend_Locale::getTranslationList('CurrencySymbol');
echo $curArr['GBP']; 
```

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-02-07T07:57:22.540

试试这个变种：

```
$formatter->getSymbol(NumberFormatter::INTL_CURRENCY_SYMBOL); 
```

# mysql - TideSDK：用 MySQL 代替 SQLite

> ID：13897521
> 
> 赞同：0
> 
> 时间：2012-12-16T00:36:13.150
> 
> 标签：mysql, sqlite, xampp, backend, tidesdk

首先，我是瑞士人，如果我错了，请原谅我；我的英语不是那么丰富。

我想知道是否有一种简单（或不那么难）的方法来使用 MySQL 而不是 SQLite。我能看到的唯一方法是使用 xampp 之类的东西更改默认后端，但说实话，我不知道如何在这个意义上进行操作。

最好不要考虑？

问候和谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:43:50.200

您可以尝试通过 TideSDKs PHP 支持来使用 MySQL。只需通过 PHP 类连接并与 MySQL 服务器对话。

为什么不想使用 SQLite 数据库？您可以像在 MySQL 服务器上一样对它们使用相同的 SQL 命令，而不是对于 SQLite 数据库，您无需连接到外部服务器，而是打开文件。那是唯一的区别。

在此处阅读有关 SQLite API 的更多信息：http: //tidesdk.multipart.net/docs/user-dev/generated/#! [/api/Ti.Database.DB](http://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.Database.DB)

# dataset - 如何构建显示大量数据的简单 D3 图表？

> ID：13897524
> 
> 赞同：3
> 
> 时间：2012-12-16T00:37:15.563
> 
> 标签：dataset, d3.js, massive

我想使用 D3 构建具有数亿数据点的简单图表。

显然，我不会尝试一次绘制数百万个点。在任何给定时间，这些点中只有非常非常小的一部分（<1000）会出现。我将根据当前视图和缩放级别从服务器“按需”下载预处理数据，并希望使用 D3 的内置缩放和平移行为。

基本上，想象一个无限宽的条形图来回平移，并根据当前缩放级别（例如语义缩放）改变自身以显示适当的细节级别。

D3 中有哪些可用的技术来实现这一点，但仍然感觉反应灵敏且流畅？我应该避免做什么？有没有这样的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:04:36.803

示例：查看 Fabian Fischer 的[BankSafe ，这是今年](http://ff.cx/banksafe/)[VAST 挑战赛](http://www.vacommunity.org/VAST+Challenge+2012)的获奖作品。不确定代码是否可用，但总结他使用的技术的报告肯定是可用的。该数据集也是“数亿”的数量级，并且 - 如果我没记错的话 - 具有类似于您描述的缩放技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:00:08.203

我强烈建议您考虑在[svg上使用](/questions/tagged/svg "show questions tagged 'svg'")[canvas](/questions/tagged/canvas "显示标记为“画布”的问题")。据我所见，拥有数千个 SVG 元素并不能很好地扩展。微软有一个很好的关于如何知道选择哪个的文章：http: [//msdn.microsoft.com/en-us/library/ie/gg193983 (v=vs.85).aspx#Using_Canvas_AndOr_SVG](http://msdn.microsoft.com/en-us/library/ie/gg193983(v=vs.85).aspx#Using_Canvas_AndOr_SVG)

![](../Images/27fd99f042b257c29407ab4a4ee95ae2.png)

# html - 垂直 CSS 分隔线颜色

> ID：13897525
> 
> 赞同：0
> 
> 时间：2012-12-16T00:37:18.993
> 
> 标签：html, css

所以我看到了这个[http://cre8tivenerd.com/demos/css/Line-separator.html](http://cre8tivenerd.com/demos/css/Line-separator.html)并想创建一个具有“按下”效果的分隔线。问题是，我不知道分隔线颜色对我来说应该是什么，测试它并没有得到相同的效果。我的背景颜色是#222222。任何可以帮助我并可能解释我如何“计算”我应该为分隔线使用哪些颜色的人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:25:23.683

你可以很容易地得到这样的效果：

```
<div class="vDivider"></div> 
```

CSS：

```
.vDivider {
    width: 80%;
    height: 1px;
    margin: 10px auto;
    background: #434343;
    border-bottom: 1px solid black;
} 
```

背景颜色和底部边框之间的对比产生了这种效果。

这是一个[**演示**](http://jsfiddle.net/Dim13i/DxuPu/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:16:32.387

它看起来不太好，因为#222 已经太暗了。@Dim13i 建议的唯一选项是使用黑色作为底部颜色，但它看起来并不明显。

再厚一点怎么样？

```
.line-separator {
    background: none repeat scroll 0 0 #777;
    border-bottom: 2px solid #000;
    height: 2px;
} 
```

# sql - SQL：日期时间作为变量

> ID：13897526
> 
> 赞同：0
> 
> 时间：2012-12-16T00:37:20.437
> 
> 标签：sql, database, sql-server-2008

尝试在过程中使用部分日期时间作为变量，因此参数将是像“六月”这样的月份。这是我写的

/* 3\. 创建一个名为 sp_product_listing 的存储过程，列出在指定月份和年份订购的指定产品。产品和月份和年份将作为存储过程的输入参数。显示产品表中的产品名称、单价和库存数量，以及供应商表中的供应商名称。运行显示包含 Jack 的产品名称的存储过程，订单日期的月份是六月，年份是 2001。存储过程应该产生下面列出的结果集。*/

```
CREATE PROCEDURE sp_product_listing
(
    @product varchar(40),
    @month  datetime,
    @year datetime
)
AS
    SELECT
        'product_name'=products.name,
        'unit_price'=products.unit_price,
        'quantity_in_stock'=products.quantity_in_stock,
        'supplier_name'=suppliers.name
    FROM
        products
    INNER JOIN suppliers ON suppliers.supplier_id=products.supplier_id
    INNER JOIN order_details ON order_details.product_id=products.product_id
    INNER JOIN orders ON orders.order_id=order_details.order_id
    WHERE
        products.name LIKE '%@product%' AND MONTH(orders.order_date) = @month AND YEAR(orders.order_date) = @year;
GO

/*Execute procedure*/
EXECUTE sp_product_listing 'Jack','June','2001' 
```

在我添加变量之前，程序测试工作正常，然后它转到 H 试图将 varchar 转换为日期时间？

我已经尝试过@month MONTH（datetime）等。不知道如何解决这个问题？也许这甚至不是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:55:08.680

`June`不是一个`DateTime`值，也不是`2001`。尝试将一个完整`Date`的值作为单个值传递，然后添加一个月以确定搜索窗口：

**编辑**：更新的示例代码。

```
-- Pass the month and year as a string and an integer.
declare @Month as VarChar(16)
declare @Year as Int

set @Month = 'June'
set @Year = 2001

-- Combine them into a date representing the first day of the desired month and year.
declare @WindowStart as Date = Cast( '1 ' + @Month + Cast( @Year as VarChar(4) ) as Date )

-- Calculate the start of the following month.
declare @WindowEnd as Date = DateAdd( month, 1, @WindowStart )

-- Display the resulting window of dates.
select @WindowStart as WindowStart, @WindowEnd as WindowEnd 
```

比较使用：`@WindowStart <= orders.order_date and orders.order_date < @WindowEnd`

这将允许优化器在`order_date`. 这一点的重要性可能会在本学期的后期变得明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:08:24.523

您不应该使用“@month”日期时间，因为正如其名称类型所暗示的那样，它需要格式为“日期和时间”的数据，如 YYYY/MM/DD hh:mm:ss，而“June”不适合 I刚刚介绍。如果您只想为日期创建一列，我们将其称为 [dateofsomething]，然后，您可以传递一个参数“@date”（类型为 datetime），其值类似于普通日期。

当然，如果你想要当前日期，只需使用 getdate()

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T01:35:40.167

这应该工作

```
CREATE PROCEDURE sp_product_listing
(
    @product varchar(40),
    @month  int,
    @year int
)
AS
    SELECT
        'product_name'=products.name,
        'unit_price'=products.unit_price,
        'quantity_in_stock'=products.quantity_in_stock,
        'supplier_name'=suppliers.name
    FROM
        products
    INNER JOIN suppliers ON suppliers.supplier_id=products.supplier_id
    INNER JOIN order_details ON order_details.product_id=products.product_id
    INNER JOIN orders ON orders.order_id=order_details.order_id
    WHERE
        products.name LIKE '%@product%' AND MONTH(orders.order_date) = @month AND YEAR(orders.order_date) = @year;
GO

/*Execute procedure*/
EXECUTE sp_product_listing 'Jack',6,2001 
```

# matlab - 字段内的结构

> ID：13897528
> 
> 赞同：5
> 
> 时间：2012-12-16T00:37:38.877
> 
> 标签：matlab, structure

```
s = struct('field1',...           
        {
        struct('a',num2cell(0 + 4*rand(5,1)),'b',num2cell(0 + 4*rand(5,1)),'c',0);...
        struct('a',num2cell(0 + 4*rand(5,1)),'b',num2cell(0 + 4*rand(5,1)),'c',0)...
        },...
        'field2',...
        {
        struct('a',num2cell(0 + 4*rand(5,1)),'b',num2cell(0 + 4*rand(5,1)),'c',0);...
        struct('a',num2cell(0 + 4*rand(5,1)),'b',num2cell(0 + 4*rand(5,1)),'c',0)...
        }...
       ); 
```

如何遍历每个字段中的结构以避免列出字段中的每个结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:29:38.660

怎么样

```
arrayfun( @( w ) structfun( @( x ) arrayfun( @( y ) structfun( @( z ) disp( z ), y ), x ), w ), s ) 
```

您可以用`disp`您希望应用的任何功能替换...

# objective-c - createFileAtPath 没有成功（“没有这样的过程”）

> ID：13897530
> 
> 赞同：3
> 
> 时间：2012-12-16T00:37:41.037
> 
> 标签：objective-c, ios

我在将一些数据保存到文件时遇到问题。以下行返回 NO：

```
[self.fileManager createFileAtPath:fileString contents:photoData attributes:nil]; 
```

错误代码为 3，错误消息为“No such process”。该`fileString`变量指向一个文件名（例如，“file://localhost/var/mobile/Applications/.../Library/Caches/photos/2-86290”）并且`photoData`是一个 NSData 变量（尽管在调试过程中鼠标悬停告诉我它实际上是一个 NSConcreteData 变量）。

谢谢阅读！任何关于这方面的想法都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:53:52.627

如果`fileString`以开头，`file://`那么这不是路径，它是文件 URL 的 URL 字符串。

如果你从一个`NSURL`对象开始，得到`fileString`如下：

```
fileString = [someURL absoluteString]; 
```

然后将其更改为：

```
fileString = [someURL path]; 
```

现在`fileString`将有一个有效的文件路径，您可以将其传递给该`createFileAtPath:`方法。

如果要编写`NSData`object `photoData`，另一种选择是：

```
[photoData writeToURL:someURL atomically:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-23T17:28:41.123

对于像我这样寻找这个错误但没有运气的人来说，这是一个额外的答案。

似乎如果您的文件名太长，您也会看到相同的错误消息。限制似乎是大约 250 个字符。

# jquery - 如何使此功能在滚动窗口/文档的 10% 处触发？

> ID：13897531
> 
> 赞同：0
> 
> 时间：2012-12-16T00:37:59.987
> 
> 标签：jquery

下面的函数在到达页面的 10% 时触发函数 doSomething，但是当您继续滚动时，它会继续触发。我如何让它以 10% 的速度开火并在那之后停止？

一切顺利，

乔伊

```
 $(document).scroll(function(e){

      // grab the scroll amount and the window height
      var scrollAmount = $(window).scrollTop();
      var documentHeight = $(document).height();

      // calculate the percentage the user has scrolled down the page
      var scrollPercent = (scrollAmount / documentHeight) * 100;

      if(scrollPercent = 10) {
          // run a function called doSomething
          doSomething();
      }

      function doSomething() { 
            $(".fill").append('<img src="img/arrow-down.png"/>');

          // do something when a user gets 10% of the way down my page
      }

  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:21:46.790

根据浏览器的不同，滚动事件可以触发很多。最好使用计时器。

尝试以下操作：

```
var  didScroll = false;
var doneAction = false;

$(window).scroll(function() {
    didScroll = true;
});

setInterval(function() {
    if ( didScroll ) {
      didScroll = false;

      // grab the scroll amount and the window height
      var scrollAmount = $(window).scrollTop();
      var documentHeight = $(document).height();

      // calculate the percentage the user has scrolled down the page
      var scrollPercent = (scrollAmount / documentHeight) * 100;

      if(scrollPercent >= 10 && !doneAction) {
          alert('You just scrolled to 10 percent.'); // or whatever action you want to perform
          doneaction = true;
      }
    }
}, 250); 
```

我希望这有帮助。

# javascript - 在 d3.js 中将州名添加到地图中

> ID：13897534
> 
> 赞同：9
> 
> 时间：2012-12-16T00:38:46.800
> 
> 标签：javascript, jquery, svg, d3.js

我正在使用 albersUSA 投影来显示地图。我想将各州的名称添加到每个州。

这是我尝试过的，我可以在源代码中看到状态的名称，但我没有看到它们呈现。我究竟做错了什么？

```
var width = 1060,
height = 600,

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

svg.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height)
    .on("click", click)
    .on("mousemove", mousemove);

var g = svg.append("g")
    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
    .append("g")
    .attr("id", "states");

var projection = d3.geo.albersUsa()
    .scale(width)
    .translate([0, 100]);

var path = d3.geo.path()
    .projection(projection);

draw();

function draw(){

  d3.json("readme.json", function(json) {
    g.selectAll("path")
    .data(json.features)
    .enter()
    .append("path")
    .attr("d", path)
    .append("svg:text")
    .text(function(d){
        return d.properties.name;
    })
    .attr("x", function(d){
        return -path.centroid(d)[0];
    })
    .attr("y", function(d){
        return  -path.centroid(d)[1];
    });

  });
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-16T06:45:18.243

任何想知道的人都可以，这就是我设法做到的：

```
function draw(){

  d3.json("readme.json", function(json) {
    g.selectAll("path")
    .data(json.features)
    .enter()
    .append("path")
    .attr("d", path)
    .on("click", click);

    g.selectAll("text")
    .data(json.features)
    .enter()
    .append("svg:text")
    .text(function(d){
        return d.properties.name;
    })
    .attr("x", function(d){
        return path.centroid(d)[0];
    })
    .attr("y", function(d){
        return  path.centroid(d)[1];
    })
    .attr("text-anchor","middle")
    .attr('font-size','6pt');

  });
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-02T18:23:01.480

我对您自己提供的答案采取了类似的方法，但我不喜欢“质心”将所有州名放在哪里。例如，夏威夷、路易斯安那州、密歇根州和佛罗里达州。所以我为这些状态的 dx 和 dy 的状态信息添加了 json 数据的属性，并将代码添加到绘图函数中。

这是一些修改状态的示例（删除了坐标以使其更小）：

```
 {
        "geometry": { "type": "Polygon", "coordinates": [] },
        "type": "Feature",
        "id": "12",
        "properties": { "name": "Florida", "abbr": "FL", "dx": "1em" }
    },
    {
        "geometry": { "type": "MultiPolygon", "coordinates": [] },
        "type": "Feature",
        "id": "15",
        "properties": { "name": "Hawaii", "abbr": "HI", "dx": "1.15em", "dy": "1.25em" }
    }, 
```

And here is the portion of the function that draws the labels:

```
 g.selectAll("text")
            .data(json.features)
            .enter()
            .append("text")
            .attr("transform", function (d) { return "translate(" + path.centroid(d) + ")"; })
            .attr("dx", function (d) { return d.properties.dx || "0"; })
            .attr("dy", function (d) { return d.properties.dy || "0.35em"; })
            .text(function (d) { return d.properties.abbr; }); 
```

# javascript - HTML5 和 Javascript 中的帧转换

> ID：13897535
> 
> 赞同：0
> 
> 时间：2012-12-16T00:38:49.400
> 
> 标签：javascript, jquery, html

我有一个大问题。使用[sequence.js](http://www.sequencejs.com)并创建了我的结构。它正在工作：

```
<script type="text/javascript"> 
        $(document).ready(function(){
            var options = {
                autoPlay: false,
                nextButton: true,
                prevButton: true,
                preloader: false,
                transitionThreshold: false,
                cycle: false,
                hashTags: true,
                preloader: true,
                fadeFrameWhenSkipped: false,
                waitForAnimationToComplete: true,
                navigationSkipThreshold: 100,
                navigationSkip: false,

            }
            var sequence = $("#sequence").sequence(options).data("sequence");

            sequence.afterLoaded = function(){
                $("#nav").fadeIn(500);
                $("#nav li:nth-child("+(sequence.settings.startingFrameID)+") a").addClass("active");
            }

            sequence.beforeNextFrameAnimatesIn = function(){
                $("#nav li:not(:nth-child("+(sequence.nextFrameID)+")) a").removeClass("active");
                $("#nav li:nth-child("+(sequence.nextFrameID)+") a").addClass("active");
            }

            $("#nav li").click(function(){
                if(!sequence.active){
                    $(this).children("a").removeClass("active").children("a").addClass("active");
                    sequence.nextFrameID = $(this).index()+1;
                    sequence.goTo(sequence.nextFrameID);
                }
            });
        }); 

    </script> 
```

我使用水平主题并添加了我的背景并有导航菜单。

```
<ul id="nav">
<li><a href="#">ONE</a></li>
<li><a href="#">TWO</a></li>
<li><a href="#">THREE</a></li>
<li><a href="#">FOUR</a></li>
<li><a href="#">FIVE</a></li>
</ul> 
```

当单击一个上的两个项目时，转到两个，没有问题。但是当在两个上单击五个时，转到相应的页面但不显示项目之间。我要这个：

EG 在二上点击四，首先是三，然后是四。我希望，你能理解我。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T00:09:58.277

Sequence.js 不能以这种方式工作。帧彼此独立，因此当您查看第一帧并导航到第五帧时，中间的帧保持非活动状态且未更改。

# python - 写入并发日志文件

> ID：13897540
> 
> 赞同：2
> 
> 时间：2012-12-16T00:39:56.653
> 
> 标签：python, logging, apache2, wsgi

我在 apache2 上有一个 WSGI 应用程序，它以最简单的方式写入日志文件：

```
def log (msg):
    with open (LOGFILE, 'a') as f: f.write (msg) 
```

在我的沙盒环境中它运行良好，不过我有点担心并发性。如果 apache2 运行各种线程，我是否必须担心并发问题？也许我的日志文件会被打乱？`log (msg)`如果另一个线程已经在记录，是否会调用失败？如果是这种情况，我将如何防止它？

**编辑：** 为了测试，我从两个 shell 同时运行两个脚本：

```
#! /usr/bin/python3.2

def log ():
    with open ('log', 'a') as f:
        f.write ('message from thread A\n')

while (True): log () 
```

和

```
#! /usr/bin/python3.2

def log ():
    with open ('log', 'a') as f:
        f.write ('message from thread B\n')

while (True): log () 
```

日志文件看起来不错，没有发生错误。我是幸运的还是从两个不同的线程写入同一个文件是否安全。文件系统是 ext4。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T01:05:07.957

您可以使用 python[日志记录模块](http://docs.python.org/2/library/logging.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T11:49:19.177

在 linux OS 中，确保使用 append 模式写入文件是原子的，因此不会发生错误

# asp.net - 选择中的 LINQ 动态属性

> ID：13897548
> 
> 赞同：1
> 
> 时间：2012-12-16T00:41:06.157
> 
> 标签：asp.net, asp.net-mvc, entity-framework, linq-to-objects

// 大家好

我在行动中做这个呼吁：

```
 [HttpGet]
    public virtual ActionResult JsonGetProvinces(int countryId)
    {
        //WebSiteContext WbContext = new WebSiteContext();
        //UnitOfWork UnitofWork = new UnitOfWork(WbContext);

        var provinces =
            (
                from province in unitofWork.ProvinceRepository.All
                where province.CountryId == countryId
                select new
                {
                    Id = province.Id,
                    Name = province.GetType().GetProperty("Name_" + CultureManager.GetCurrentCultureShortName()).GetValue(province)
                }
            ).ToList();

        return Json(provinces, JsonRequestBehavior.AllowGet);
    } 
```

我的查询有问题：

```
 var provinces =
            (
                from province in unitofWork.ProvinceRepository.All
                where province.CountryId == countryId
                select new
                {
                    Id = province.Id,
                    Name = province.GetType().GetProperty("Name_" + CultureManager.GetCurrentCultureShortName()).GetValue(province)
                }
            ).ToList(); 
```

特别是， **Name = Province.GetType().GetProperty("Name_" + CultureManager.GetCurrentCultureShortName()).GetValue(province)**

在 BDD 中，有`Name_fr`,`Name_en`列，我试图动态地取一个……这可能吗？

当然，我可以同时使用并在 View 中动态选择列，但我想知道该怎么做......

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:50:14.600

简短的回答是您需要稍微更改代码并在内部使用表达式树。看看这个[问题](https://stackoverflow.com/questions/4546463/help-with-linq-and-generics-using-getvalue-inside-a-query)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:09:09.023

EF 无法将函数调用转换为 SQL。使用表达式树可能会很复杂，[请参阅此问题](https://stackoverflow.com/questions/2719762/lambda-expression-to-be-used-in-select-query)

这是一个带有表达式树的示例。GetQuery2 与 GetQuery 相同，但具有表达式树和 propertyname 参数。

```
public static IQueryable<Foo> GetQuery(BlogContext context)
{
    var query = from x in context.BlogEntries
                select new Foo
                {
                    NameX = x.Name   
                };
    return query;
}

public static IQueryable<Foo> GetQuery2(BlogContext context, string propertyName)
{

    ConstructorInfo ci = typeof(Foo).GetConstructor(new Type[0]);
    MethodInfo miFooGetName = typeof(Foo).GetMethod("set_NameX");
    MethodInfo miBlogEntry = typeof(BlogEntry).GetMethod("get_" + propertyName);

    ParameterExpression param = Expression.Parameter(typeof(BlogEntry), "x");

    IQueryable<Foo> result = Queryable.Select<BlogEntry, Foo>(
                                context.BlogEntries,
                                Expression.Lambda<Func<BlogEntry, Foo>>(
                                    Expression.MemberInit(
                                        Expression.New(ci, new Expression[0]),
                                        new MemberBinding[]{
                                            Expression.Bind(miFooGetName, 
                                                            Expression.Property(param,
                                                            miBlogEntry))}
                                    ),
                                    param
                                )
                                );
    return result;
} 
```

获取所有语言字符串并编写一个附加的属性*名称*会更容易。

# c++ - 在 for 循环中递归到迭代

> ID：13897550
> 
> 赞同：0
> 
> 时间：2012-12-16T00:41:24.423
> 
> 标签：c++, recursion

我正在概括另一个有类似递归调用的问题。就我而言，所使用的变量是字符串，所以我不能简单地通过值来避免循环中递归调用之前和之后的代码。有没有办法把它变成一个迭代循环？请假设循环中递归调用之前和之后的代码无法更改以使此特定实例工作。

此代码测试以查看 nums 中的任何整数组合的总和是否为零。index 的原始值为 0，max 是我想在任何给定解决方案中加起来的最大数字数。

为了进一步澄清，数字可以重复，所以我不能尝试所有可能的组合，因为有无限多。

```
void findSolution(const vector<int>& nums, vector<int>& my_list, int& mySum,
int index, const int max)
{
    if(mySum == 0) {
        /* print my_list and exit(0) */
    }
    if(index < max) {
        for(int i = 0; i < nums.size(); ++i) {
            my_list.push_back(nums[i]);
            mySum += nums[i];
            findSolution(nums, my_list, mySum, index+1, max);
            mySum -= nums[i];
            my_list.pop_back();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T12:25:42.200

维护手动堆栈。

在您的情况下，递归调用的唯一独立状态是 I 的值和 index 的值。索引只是递归调用深度。

创建一个称为您的堆栈的 int 标准向量，将其保留为最大值。用 while stack true 替换循环。

在进入循环之前，将零压入堆栈。

将循环中的鳕鱼分成 3 部分。AB 和 C。A 在递归调用之前，B 是你递归调用的，C 在之后。C 中包含循环顶部的增量，它发生在原始代码中的 C 之后。

您在循环中做的第一件事是检查堆栈的顶部是否为 nums 大小或更大。如果是，则弹出堆栈，然后执行 C 并继续，除非堆栈为空，在这种情况下中断。

然后执行A。然后将0压入堆栈，如果堆栈大小小于max，则继续。然后执行 C。您可以使用标志变量删除 C 代码重复。

请记住，堆栈的顶部替换了对 I 的任何引用。基本上我们正在替换一个递归调用，它通过手动维护相同的堆栈自动为我们创建一个堆栈，但只存储我们可以摆脱的绝对最少的数量。循环的开始作为递归调用的结束和循环的开始具有双重职责，因此我们可以取消 goto。

试一试，看完再担心解释。代码到位后，关于标志变量的内容更有意义。

# macos - AppleScript 中的正确处理程序以响应自定义 URL 处理小程序的“打开”Unix 命令

> ID：13897551
> 
> 赞同：4
> 
> 时间：2012-12-16T00:41:29.827
> 
> 标签：macos, url, applescript, appleevents

我正在尝试编写一个简单的 AppleScript 应用程序来处理我的 Mac 上的 sftp:// 和 sshfs:// URL。基于[如何在 AppleScript 中创建自定义 URL 处理程序应用程序的良好指南](http://www.macosautomation.com/applescript/linktrigger/index.html)，我编写[了一个小应用程序](https://github.com/netj/MacSSHFSURLHandler)，如下所示，当我单击具有相应方案的 URL 时，它运行良好。实际工作是在调​​用 sshfs(FUSE) 的单独 shell 脚本中完成的，我使用 AppleScript 只是为了将其与操作系统接口。

```
on open location theURL
    set cmd to (quoted form of (get POSIX path of (path to resource "sshfs.sh" in directory "Scripts"))) & " " & theUrl
    do shell script cmd
end open location 
```

但是，如果我使用**来自 Terminal****的命令，此自定义 URL 处理程序 AppleScript 应用程序将不起作用`open`**，例如，

```
open sftp://host/path 
```

我尝试添加其他处理程序，发现命令行方式调用`on run argv`处理程序而不是我编写的处理程序，但无法弄清楚如何访问传递的 URL 参数。当直接调用脚本时，我可以正确访问 URL，例如`osascript my.applescript sftp://host/path`. 尝试了 ASObjC Runner，但没有帮助。

**AppleScript 应用程序中是否有用于接收通过`open`Unix 命令传递的参数的标准处理程序或方法？** 它似乎依赖于 AppleEvents，但我找不到一个很好的参考来描述如何使用 AppleScript 在命令和本机应用程序之间发挥同样的魔力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T08:22:34.047

Why not just handle it in your "on run handler"? Something like this...

```
on run argv
    set theArg to item 1 of argv
    if theArg starts with "sftp://" then
        open location theArg
    else
        -- do the normal applescript code
    end if
end run 
```

Or are you saying the "open" unix command doesn't pass the argument?

# symfony - Symfony2 KnpMenuBundle 自动加载？

> ID：13897552
> 
> 赞同：0
> 
> 时间：2012-12-16T00:41:34.653
> 
> 标签：symfony, bundle

在 symfony2 中，我有一个需要加载 KnpMenuBundle 的 CMS 包。有没有办法让 CMS 包自动加载菜单包？

或者我是否需要在安装 CMS 捆绑包时手动将菜单捆绑到 AppKernel 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T05:56:42.663

把它放在 appKernal 中就是做你想做的事。了解延迟加载和依赖注入。为了使用一个包，它需要在 appKernal 中

# c# - 如何通过属性反射获得变量/字段名称？

> ID：13897553
> 
> 赞同：-1
> 
> 时间：2012-12-16T00:41:34.887
> 
> 标签：c#, reflection

假设您有：
`PropertyInfo propInfo;`// 假设它已经使用私有字段的属性进行了初始化
( `private int m_Number`)

如果我这样做，`propInfo.PropertyType.Name`我想我会得到类似`int32`or的东西`int`。
**两个问题：**

**1** . 如何通过`propInfo`.
注意：一旦我能够通过迭代 a`FieldInfo`而不是`propInfo`.

**2** . 如果我想使用反射来了解给定类的所有类型的字段，那么正确的方法应该是：

**一个**。遍历所有属性（假设每个字段都有一个属性）
**B**。直接遍历所有字段。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:49:39.863

属性不一定与字段相关 - 实际上，属性不仅仅是一对函数之上的语法糖。

如果您的代码使用某种约定来命名支持属性的变量（例如在它们前面加上`m_`，如您的示例中所示），您可以依靠该约定来检索变量名称。在所有其他情况下，没有直接连接，也无法通过反射 API 检索该关系。

# svg - 如何减少任意 SVG 路径的坐标计数，而不会损失太多或任何精度？

> ID：13897556
> 
> 赞同：17
> 
> 时间：2012-12-16T00:42:07.733
> 
> 标签：svg, simplification

我最近在网上搜索工具、程序、实用程序、支持库和代码原语，这些工具、程序、实用程序、支持库和代码原语有助于优化 SVG 的简单性、空间和优雅性，以链接到[Kilobyte SVG Challenge](http://johan.github.com/kilobyte-svg-challenge/)的[工具部分](https://github.com/johan/kilobyte-svg-challenge/#tools)，但还没有找到好的原语关注关于如何减少路径坐标的数量，而不会损失太多——或者理想情况下是任何——精度。

以这个[可口可乐标志](http://codepen.io/johan/pen/fBqby)的标记增强版本为例（[~7kb，基本上所有路径数据](https://github.com/johan/kilobyte-svg-challenge/pull/17)）——它非常清楚地显示了减少贝塞尔数量的许多承诺，给定一些工具来进行数学运算以得出一个使用较少节点的路径，同时产生基本相同的曲线。

对于更简单的多边形和折线问题（阅读“全线路径”），您可以使用 Douglas–Peucker 或 Visvalingam 的算法（参见Mike Bostock对后者[的出色 d3 实现](http://bost.ocks.org/mike/simplify/)）来简单地删除对路径形状影响最小的坐标直到您对适合您需求的尺寸精确度感到满意为止。

我正在寻找可以注意到较大曲线（甚至弧）段可以替换许多这些冗余的中间曲线坐标停止点的等效项，而无需进行大量手动调整。我认为一些矢量图形包（Adobe Illustrator，甚至可能是 Inkscape？）可能会提供这样的功能（欢迎使用有关如何访问它们的提示！） - 尽管我很想找到我们可以推荐的可编写脚本的工具并提供如何使用的 HOWTO命令行，甚至是网络应用程序，它们会为人们挤出多余的路径填充材料。

作为参考，[千字节 SVG 挑战赛](https://twitter.com/1kSVGChallenge)是我最近设置的一个有趣的 SVG 教育和宣传噱头。所有关于它的非问题主题讨论最好在那里举行，和/或在上面链接的 github 存储库上。保持好状况！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-28T15:26:20.000

You can use [Ramer–Douglas–Peucker algorithm](http://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm) to simplify polylines or polygons path.

![enter image description here](../Images/569e21d72343f5a823a94dde642714a9.png)

# ios - iOS：在 userDefaults 中存储选定的表视图行

> ID：13897558
> 
> 赞同：0
> 
> 时间：2012-12-16T00:42:15.997
> 
> 标签：ios, nsuserdefaults

在我的应用程序中，我有一个表格视图，它允许用户通过点击行来启用或禁用元素。很简单，我需要将每一行的条件存储在 userDefaults 中——无论它是否打开。我该怎么办？

我在想我可以为每行表示的对象添加一个 BOOL 属性，以判断它是否启用，但是我将如何去记住每个单独对象的属性值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:18:23.723

您可以创建一堆设置键：

```
// SET
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setBool:YES forKey:@"setting1_ON"];
[defaults setBool:NO forKey:@"setting2_ON"];

// GET
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
bool setting1 = [defaults boolForKey:@"setting1_ON"];
bool setting2 = [defaults boolForKey:@"setting2_ON"]; 
```

或存储所有设置（或字典）的一个数组：

```
// SET
NSMutableArray *settings = [NSMutableArray array];
for (UITableViewCell *c in [self.tableView subviews]) {
    if (c.selected) {
        [settings addObject:[NSNumber numberWithBool:YES]];
    } else {
        [settings addObject:[NSNumber numberWithBool:NO]];
    }
}
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:settings forKey:@"settings"];

// GET
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSMutableArray *mySettings = (NSMutableArray *)[defaults objectForKey:@"settings"];
setting1 = [mySettings objectAtIndex:1];
setting2 = [mySettings objectAtIndex:2]; 
```

关于这一点，您可能会考虑其他 2 个选项... 1\. 只需将所有 BOOL 保存在一个数组中，而不是将它们添加到单元格中，然后在需要时存储它；2\. 创建一个 NSObject 作为您的设置，将它们全部保存在那里，然后存储整个对象：

```
NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:myApp.settings];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:myEncodedObject forKey:@"settings"]; 
```

为此，您必须向该设置对象添加编码/解码内容......还有更多关于在这些部分周围存储自定义对象的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:45:20.140

您可以在每一行上使用某种 id 来识别特定行。然后您可以创建一个自定义对象并将其存储在 NSUserDefaults 中。

[看看这个问题](https://stackoverflow.com/questions/2315948/how-to-store-custom-objects-in-nsuserdefaults)

# tridion - OnPageSetPublishedToPost & Tridion 2011

> ID：13897568
> 
> 赞同：3
> 
> 时间：2012-12-16T00:43:53.547
> 
> 标签：tridion, tridion-2011

是个

> OnPageSetPublishedToPost

Tridion 2011 支持的事件。我很难让这个事件触发。

我正在将遗留事件系统代码部署到 Tridion 2011 SP1 HR1。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T10:48:47.763

旧版事件处理程序与 Tridion 2011 不完全兼容。

> TOM 事件处理程序将不再触发发布、解析和（用于 Audience Manager 联系人导入）关键字保存。

[Legacy Event Adapter](http://sdltridionworld.com/community/2011_extensions/LegacyEventAdapter.aspx)可以帮助触发其中一些事件，但不幸的是我认为**OnPageSetPublishedToPost**不是其中之一。不过，您可以在配套文章中找到很多有用的信息

可能不是您正在寻找的答案，但对于这个特定的事件处理程序，您可以考虑重写新的事件系统模型。您可以在同一系统上混合使用旧式和新式事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:57:42.513

尝试如下事件。这应该有效。到目前为止你尝试了什么？

```
 EventSystem.Subscribe<PublishTransaction, SaveEventArgs>(YourMethod, EventPhases.TransactionCommitted); 
```

和

```
 EventSystem.Subscribe<Page, PublishEventArgs>(YourMethod, EventPhases.TransactionCommitted); 
```

# r - R - 预测命令错误“选择了未定义的列”

> ID：13897569
> 
> 赞同：6
> 
> 时间：2012-12-16T00:43:53.167
> 
> 标签：r, predict

我是 R 的新手，我在使用 R 预测命令时遇到了问题。我收到此错误

```
 Error in `[.data.frame`(newdata, , as.character(object$formula[[2]])) : 
  undefined columns selected 
```

当我执行这个命令时：

```
model.predict <- predict.boosting(model,newdata=test) 
```

这是我的模型：

```
model <- boosting(Y~x1+x2+x3+x4+x5+x6+x7, data=train) 
```

这是我的测试数据的结构： str(test)

```
'data.frame':   343 obs. of  7 variables:
 $ x1: Factor w/ 4 levels "Americas","Asia_Pac",..: 4 2 4 2 4 3 3 3 4 1 ...
 $ x2: Factor w/ 5 levels "Fifth","First",..: 3 3 2 2 4 2 4 4 1 1 ...
 $ x3: Factor w/ 3 levels "Best","Better",..: 2 3 1 1 3 2 2 1 3 3 ...
 $ x4: Factor w/ 2 levels "Female","Male": 1 1 2 1 1 2 1 2 2 2 ...
 $ x5: int  82 55 47 31 6 53 77 68 76 86 ...
 $ x6: num  22.8 14.6 25.5 38.3 7.9 32.8 4.6 34.2 36.7 21.7 ...
 $ x7: num  0.679 0.925 0.897 0.684 0.195 ... 
```

以及我的训练数据的结构：

```
$ RecordID: int  1 2 3 4 5 6 7 8 9 10 ...
 $ x1      : Factor w/ 4 levels "Americas","Asia_Pac",..: 1 2 2 3 1 1 1 2 2 4 ...
 $ x2      : Factor w/ 5 levels "Fifth","First",..: 5 5 3 2 5 5 5 4 3 2 ...
 $ x3      : Factor w/ 3 levels "Best","Better",..: 2 3 2 2 3 1 2 3 1 1 ...
 $ x4      : Factor w/ 2 levels "Female","Male": 1 2 2 2 1 1 2 2 1 1 ...
 $ x5      : int  1 67 75 51 84 33 21 80 48 5 ...
 $ x6      : num  21 13.8 30.3 11.9 1.7 13.2 33.9 17 3.4 19.5 ...
 $ x7      : num  0.35 0.85 0.73 0.39 0.47 0.13 0.2 0.12 0.64 0.11 ...
 $ Y       : Factor w/ 2 levels "Green","Yellow": 2 2 1 2 2 2 1 2 2 2 .. 
```

我认为测试数据的结构有问题，但我找不到它，或者我对“预测”命令的结构有误解。请注意，如果我对训练数据运行预测命令，它会起作用。关于在哪里看的任何建议？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:08:00.010

`predict.boosting()`期望得到测试数据的实际标签，因此它可以计算它的表现如何（如下面的混淆矩阵所示）。

```
library(adabag) 

data(iris)

iris.adaboost <- boosting(Species~Sepal.Length+Sepal.Width+Petal.Length+
      Petal.Width, data=iris, boos=TRUE, mfinal=10)

# make a 'test' dataframe without the classes, as in the question
iris2 <- iris
iris2$Species <- NULL

# replicates the error
irispred=predict.boosting(iris.adaboost, newdata=iris2)
#Error in `[.data.frame`(newdata, , as.character(object$formula[[2]])) : 
#  undefined columns selected 
```

这是一个工作示例，主要来自帮助文件，因此这里有一个工作示例（并演示混淆矩阵）。

```
# first create subsets of iris data for training and testing  
sub <- c(sample(1:50, 25), sample(51:100, 25), sample(101:150, 25))
iris3 <- iris[sub,]
iris4 <- iris[-sub,]

iris.adaboost <- boosting(Species ~ ., data=iris3, mfinal=10)

# works
iris.predboosting<- predict.boosting(iris.adaboost, newdata=iris4)

iris.predboosting$confusion
#               Observed Class
#Predicted Class setosa versicolor virginica
#     setosa         50          0         0
#     versicolor      0         50         0
#     virginica       0          0        50 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-19T06:16:28.213

当您的 y 是因素时，显示此错误，尝试`as.vector(y)~.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-18T09:27:33.157

您用于预测的数据的列名应与训练数据的列名完全相同。

# php - 触发删除表，然后用 Mysql 插入值

> ID：13897574
> 
> 赞同：3
> 
> 时间：2012-12-16T00:44:06.817
> 
> 标签：php, mysql

我如何使用 php 和 mysqli 进行查询，以删除整个表，然后添加新表我有一个接收数据的表单，但在添加新数据之前，我想从表中删除所有数据。
$oConni 是我的连接字符串

```
 $cSQLt  = "TRUNCATE TABLE approved";
$cSQLi = "INSERT INTO approved (ID_STUDENT, YEAR, APPROVED)
              VALUES (
              '" . $_POST['NSTUDENT'] . "',
                  '" . $_POST['YEAR'] . "',
                      'YES'
                                       )";

$oConni->query($cSQLt);
$oConni->query($cSQLi); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T00:49:35.823

您可以通过发出 TRUNCATE 语句从 MySQL 表中删除所有内容：

```
TRUNCATE TABLE approved; 
```

..通常与

```
DELETE FROM approved; 
```

..但有一些小的差异，[您可以在文档中阅读](http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html)。

在您粘贴的代码中，请[使用准备好的语句](http://no.php.net/manual/en/mysqli.prepare.php)以避免 sql 注入攻击。切勿在查询中直接使用未经过滤的 POST 数据！

如果您想将此作为触发器，我们需要更多地了解您的数据处理。在 INSERT 之前发出 TRUNCATE 通常会导致表中只有一行可用，这对于实际使用表来说似乎是一个奇怪的用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T01:18:40.203

你可以使用 TRUNCATE TABLE 然后你的下一个查询：

```
$cSQLt = "TRUNCATE TABLE CALIFICA_APTO";
$cSQLi = "INSERT INTO approved (ID_STUDENT, YEAR, APPROVED)
          VALUES (
          '" . $_POST['NSTUDENT'] . "',
              '" . $_POST['YEAR'] . "',
                  'YES'
                                   )";
$Connect->query($cSQLt);
$Connect->query($cSQLi); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T00:47:32.750

如果您希望从表中删除所有数据，则应使用[TRUNCATE](http://dev.mysql.com/doc/refman/5.0/en/truncate-table.html)：

`TRUNCATE TABLE approved`

然后你可以做你的SQL语句。

**注意：**这将删除表中的所有数据，所以**要小心**！此外，您的数据库用户必须能够截断表。

# ios - APNS（Apple 推送通知服务）可靠性

> ID：13897575
> 
> 赞同：37
> 
> 时间：2012-12-16T00:44:23.877
> 
> 标签：ios, push-notification, apple-push-notifications

我们的应用程序使用 APNS 来接收推送通知。但是，我们的客户声称他们的一些设备没有收到通知，并争辩说他们“必须”确保 100% 发送通知。但我在[某处](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)读到过，APNS 不是 100% 可靠的，应该存在通知未传递的情况。

我目前对我们如何确保随时接收 APNS 感到恐慌。我读过一个可能 APNS 未交付[的案例（设备可能离线）。](https://stackoverflow.com/questions/6591550/is-apples-push-notification-service-reliable)但我们的测试表明，即使设备在线（Wifi 或 3G），有时 APNS 也无法发送。

是否有任何特定情况可能导致 APNS 无法交付？或者我们（开发人员）可以用代码做些什么来确保收到所有通知？我在代码中所做的只是将应用程序注册到远程通知并写入 didRegisterForRemoteNotificationsWithDeviceToken，然后将设备令牌扔给我们的服务器。

任何帮助都将不胜感激，因为如果他们的所有设备都没有收到 APNS，我们的客户几乎要杀了我们！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-16T03:35:33.917

1.  APNS 基于 Apple Servers，Apple 不保证消息的成功传递。
2.  如果通知到达时应用程序处于打开状态（即用户正在使用应用程序），iOS 不会显示通知消息，您需要对其进行处理。
3.  仅当应用程序被后台或终止时才会显示通知。
4.  同时在您的服务器端实施反馈服务；将帮助您摆脱旧的不需要的令牌（通过设置删除应用程序或禁用通知的用户）。
5.  不要在短时间内向设备发送太多通知，因为 APNS 仅缓存 1 条消息/设备（如果设备离线）。因此，它可以在设备上线时传递消息。我不确定消息被缓存了多长时间。

或者只是实现 Pusher... [http://pusher.com](http://pusher.com)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-28T19:18:33.990

我们面临同样的问题。正如大家所说，APNS 是一项*尽力而为的*服务，因此您无法确定每条通知都会送达，但您可以做的是确定已收到哪些通知。这就是我们要做的。我们在后端注册每个通知队列*，*移动应用程序会报告它收到的每个通知。然后我们设置等待收到通知的最长时间，如果我们没有收到报告，我们再试一次。

我希望它可能对某人有所帮助（即使是 2 年后）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-07-12T04:40:34.663

它在 Apple Docs 中非常清楚地表明它不是 100% 保证的，也不应该这样使用。它是“尽最大努力”发送的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-23T06:36:01.723

根据 Apple 的指导方针，APNS 不是 100% 可靠的服务，这意味着您的应用可能由于以下一些原因而无法从 Apple 服务器获得推送通知：

*   设备离线
*   您的应用处于前台状态，您需要管理推送通知。

注意：Apple 拒绝使用通知服务强制执行的应用程序。（我在我的一个应用程序中遇到过它）

有关更多信息，您可以查看此答案

[https://stackoverflow.com/a/25830955/3278326](https://stackoverflow.com/a/25830955/3278326)

# workflow - Jira Workflow 中的自动条件转换

> ID：13897576
> 
> 赞同：1
> 
> 时间：2012-12-16T00:44:26.870
> 
> 标签：workflow, jira

目前我正在 Jira 中开发新的 WorkFlow 并且有一个案例，我不知道如何实施。

我们在开发周期中有几个状态，例如“等待重现”和“开发”，主要取决于错误的当前受让人，如果是 QA，则状态为“等待重现”，如果开发人员- “发展”。

在创建错误时，可以在创建步骤中将其分配给 qa、开发人员或 pm。所以我需要做出这样的条件：

```
if assignee in group "Developers":
  status = "Development";
elif assignee in group "QA
  status = "Waiting for reproduce"
else:
  status = "Open" 
```

我需要在“创建”步骤和其他步骤上进行这种条件转换......你能给我一些技巧或链接，可以帮助我处理这种情况吗？

最好的问候，亚历山大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T09:00:29.913

我会推荐[Groovy ScriptRunner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner "Groovy ScriptRunner")插件。

您可以通过在创建后直接引入新状态来实现您的目标。从这个新状态创建到您需要的所有状态的转换（例如“等待复制”和“开发”）。

然后，在“创建”过渡中，您可以使用多个[快速通道过渡和问题](https://studio.plugins.atlassian.com/wiki/display/GRV/Built-In+Scripts#Built-InScripts-Fasttracktransitionanissue "Groovy ScriptRunner 内置用于快速跟踪的脚本")后功能 - 每个用于您需要的一个条件。条件看起来像这样：

```
groupManager.isUserInGroup(issue.assignee, "QA") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:46:32.567

这可以使用[Jira Scripting Suite](https://marketplace.atlassian.com/plugins/com.quisapps.jira.jss)轻松完成：

```
# get the current assignee
assignee = issue.getAssignee()
if assignee.inGroup('Developers'):
    # set new status
    issue.setStatus(stateNumber.toString()) # status number as string, i.e. "6"
else:
    ..... 
```

# google-chrome - 如何提高视差滚动的帧速率？

> ID：13897581
> 
> 赞同：3
> 
> 时间：2012-12-16T00:45:47.437
> 
> 标签：google-chrome, timeline, parallax

我这个视差的帧率太低了。当我查看[Apple 的做法时](http://www.apple.com/iphone/features/)，他们的帧速率非常接近 60。

我拍摄了滚动的时间线快照，最大的问题是“图像调整大小（缓存）”的“绘画”。有没有办法减少它？

# android - 将ID名称放入字符串

> ID：13897582
> 
> 赞同：0
> 
> 时间：2012-12-16T00:45:54.987
> 
> 标签：android, string

***让它工作，但它比我想要的要长。*** 新Java：

```
package com.example.musicbynumbers;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

public class majorScales extends Activity implements View.OnClickListener  {
    Button aflatmaj, amaj, bflatmaj, bmaj, cmaj, dflatmaj, dmaj, eflatmaj, emaj, fmaj, fsharpmaj, gmaj;  
    ImageButton mainMenu;
    Intent j;
    String scaleName;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.majorscales);
        j  = new Intent(this, display.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        aflatmaj = (Button) findViewById(R.id.aflatmajb);
        amaj = (Button) findViewById(R.id.amajb);
        bflatmaj = (Button) findViewById(R.id.bflatmajb);
        bmaj = (Button) findViewById(R.id.bmajb);
        cmaj = (Button) findViewById(R.id.cmajb);
        dflatmaj = (Button) findViewById(R.id.dflatmajb);
        dmaj = (Button) findViewById(R.id.dmajb);
        eflatmaj = (Button) findViewById(R.id.eflatmajb);
        emaj = (Button) findViewById(R.id.emajb);
        fmaj = (Button) findViewById(R.id.fmajb);
        fsharpmaj = (Button) findViewById(R.id.fsharpmajb);
        gmaj = (Button) findViewById(R.id.gmajb);
        mainMenu.setOnClickListener(this);
        aflatmaj.setOnClickListener(this);
        amaj.setOnClickListener(this);
        bflatmaj.setOnClickListener(this);
        bmaj.setOnClickListener(this);
        cmaj.setOnClickListener(this);
        dflatmaj.setOnClickListener(this);
        dmaj.setOnClickListener(this);
        eflatmaj.setOnClickListener(this);
        emaj.setOnClickListener(this);
        fmaj.setOnClickListener(this);
        fsharpmaj.setOnClickListener(this);
        gmaj.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(majorScales.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.aflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);

                    startActivity(j);
                    break;
                case R.id.amajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.cmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.eflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.emajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fsharpmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.gmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;

    }

}
}

package com.example.musicbynumbers;

import android.app.Activity;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.ImageButton;
import android.widget.ImageView;

public class display extends Activity {
    ImageView displayScale;
    ImageButton logoButton;
    String gotScale;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);
        Initalize();
        gotScale = getIntent().getStringExtra("key");
        ImageView displayScale = (ImageView) findViewById(R.id.displayImage);
        int id = getResources().getIdentifier("com.example.musicbynumbers:drawable/" + gotScale, null, null);
        displayScale.setImageResource(id);
    }

    private void Initalize() {
        // TODO Auto-generated method stub
        displayScale = (ImageView) findViewById(R.id.displayImage);
        logoButton = (ImageButton) findViewById(R.id.imagelogo);
        gotScale = "ic_launcher.png";

    }

} 
```

* * *

我正在尝试获取 id 名称并将其放入字符串中，然后让它转到另一个活动并打开具有相应文件名的资源图片

例如。

r.id.x 获取 x 并将其放入字符串 y 然后将其发送到不同的活动 我如何获取 x 并将其放入字符串中？

我知道这有一个简单的答案，因为我对编程很陌生。

```
package com.example.musicbynumbers;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

public class majorScales extends Activity implements View.OnClickListener  {
    Button aflatmaj, amaj, bflatmaj, bmaj, cmaj, dflatmaj, dmaj, eflatmaj, emaj, fmaj, fsharpmaj, gmaj;  
    ImageButton mainMenu;
    Intent j;
    String scaleName;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.majorscales);
        j  = new Intent(this, display.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        aflatmaj = (Button) findViewById(R.id.aflatmajb);
        amaj = (Button) findViewById(R.id.amajb);
        bflatmaj = (Button) findViewById(R.id.bflatmajb);
        bmaj = (Button) findViewById(R.id.bmajb);
        cmaj = (Button) findViewById(R.id.cmajb);
        dflatmaj = (Button) findViewById(R.id.dflatmajb);
        dmaj = (Button) findViewById(R.id.dmajb);
        eflatmaj = (Button) findViewById(R.id.eflatmajb);
        emaj = (Button) findViewById(R.id.emajb);
        fmaj = (Button) findViewById(R.id.fmajb);
        fsharpmaj = (Button) findViewById(R.id.fsharpmajb);
        gmaj = (Button) findViewById(R.id.gmajb);
        mainMenu.setOnClickListener(this);
        aflatmaj.setOnClickListener(this);
        amaj.setOnClickListener(this);
        bflatmaj.setOnClickListener(this);
        bmaj.setOnClickListener(this);
        cmaj.setOnClickListener(this);
        dflatmaj.setOnClickListener(this);
        dmaj.setOnClickListener(this);
        eflatmaj.setOnClickListener(this);
        emaj.setOnClickListener(this);
        fmaj.setOnClickListener(this);
        fsharpmaj.setOnClickListener(this);
        gmaj.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(majorScales.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.aflatmajb:
                    scaleName = 

                    startActivity(j);
                    break;
                case R.id.amajb:

                    startActivity(j);
                    break;
                case R.id.bflatmajb:

                    startActivity(j);
                    break;
                case R.id.bmajb:

                    startActivity(j);
                    break;
                case R.id.cmajb:

                    startActivity(j);
                    break;
                case R.id.dflatmajb:

                    startActivity(j);
                    break;
                case R.id.dmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.eflatmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.emajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.fmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.fsharpmajb:
                    ;
                    startActivity(j);
                    break;
                case R.id.gmajb:
                    ;
                    startActivity(j);
                    break;

    }

}
} 
```

例如，在“R.id.aflatmajb”的开关盒中，我想要 r.id 之后的部分。(aflatmajb) 放入一个字符串有没有办法做到这一点，还是我必须为每个菜单中的每个按钮手动完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T17:34:14.443

***让它工作，但它比我想要的要长。*** 新Java：

```
package com.example.musicbynumbers;

import android.os.Bundle;
import android.app.Activity;
import android.app.ListActivity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ListView;

public class majorScales extends Activity implements View.OnClickListener  {
    Button aflatmaj, amaj, bflatmaj, bmaj, cmaj, dflatmaj, dmaj, eflatmaj, emaj, fmaj, fsharpmaj, gmaj;  
    ImageButton mainMenu;
    Intent j;
    String scaleName;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.majorscales);
        j  = new Intent(this, display.class);
        mainMenu = (ImageButton) findViewById(R.id.imagelogo);
        aflatmaj = (Button) findViewById(R.id.aflatmajb);
        amaj = (Button) findViewById(R.id.amajb);
        bflatmaj = (Button) findViewById(R.id.bflatmajb);
        bmaj = (Button) findViewById(R.id.bmajb);
        cmaj = (Button) findViewById(R.id.cmajb);
        dflatmaj = (Button) findViewById(R.id.dflatmajb);
        dmaj = (Button) findViewById(R.id.dmajb);
        eflatmaj = (Button) findViewById(R.id.eflatmajb);
        emaj = (Button) findViewById(R.id.emajb);
        fmaj = (Button) findViewById(R.id.fmajb);
        fsharpmaj = (Button) findViewById(R.id.fsharpmajb);
        gmaj = (Button) findViewById(R.id.gmajb);
        mainMenu.setOnClickListener(this);
        aflatmaj.setOnClickListener(this);
        amaj.setOnClickListener(this);
        bflatmaj.setOnClickListener(this);
        bmaj.setOnClickListener(this);
        cmaj.setOnClickListener(this);
        dflatmaj.setOnClickListener(this);
        dmaj.setOnClickListener(this);
        eflatmaj.setOnClickListener(this);
        emaj.setOnClickListener(this);
        fmaj.setOnClickListener(this);
        fsharpmaj.setOnClickListener(this);
        gmaj.setOnClickListener(this);

    }

         @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                switch(arg0.getId()){
                case R.id.imagelogo:
                    Intent i =  new Intent(majorScales.this, MainMenu.class);
                    startActivity(i);
                    break;
                case R.id.aflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);

                    startActivity(j);
                    break;
                case R.id.amajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.bmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.cmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.dmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.eflatmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.emajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.fsharpmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;
                case R.id.gmajb:
                    scaleName = "aflatmaj";
                    j.putExtra("key", scaleName);
                    startActivity(j);
                    break;

    }

}
}

package com.example.musicbynumbers;

import android.app.Activity;
import android.content.res.Resources;
import android.graphics.drawable.Drawable;
import android.os.Bundle;
import android.widget.ImageButton;
import android.widget.ImageView;

public class display extends Activity {
    ImageView displayScale;
    ImageButton logoButton;
    String gotScale;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.display);
        Initalize();
        gotScale = getIntent().getStringExtra("key");
        ImageView displayScale = (ImageView) findViewById(R.id.displayImage);
        int id = getResources().getIdentifier("com.example.musicbynumbers:drawable/" + gotScale, null, null);
        displayScale.setImageResource(id);
    }

    private void Initalize() {
        // TODO Auto-generated method stub
        displayScale = (ImageView) findViewById(R.id.displayImage);
        logoButton = (ImageButton) findViewById(R.id.imagelogo);
        gotScale = "ic_launcher.png";

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T00:52:38.977

您是指在转换时在活动之间传递数据吗？你会做的

```
// This is a String, you can use a lot of data types
String theData = "This is some data I need to send along";

// Create a new Intent that will start NextActivity
Intent i = new Intent(this, NextActivity.class);

// Add the data to the Intent using any key you want (which is how you reference the data)
i.putExtra("key", theData);

// Start the activity
startActivity(i); 
```

然后你会从`Intent`第二个活动中获取数据：

```
// getIntent() returns the Intent that was used to start the current Activity
String theData = getIntent().getStringExtra("key"); 
```

# php - 防止本地主机上的外部请求（脚本等）？

> ID：13897588
> 
> 赞同：0
> 
> 时间：2012-12-16T00:47:22.370
> 
> 标签：php, .htaccess, localhost

有什么方法可以阻止网站请求或加载任何第三方资源？具体来说，当我在本地主机上工作时，我想在带宽不足的时候（在咖啡店或其他地方）阻止所有外部请求。

我知道我可以使用 php 和/或 javascript 并有条件地加载脚本，例如：

```
if($_SERVER['HTTP_HOST'] != 'localhost'){
} 
```

但我想看看我是否可以全局阻止插件和其他任何尝试访问互联网的东西。

有没有办法通过 .htaccess、标头中的 php，甚至通过 WAMP 设置？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T00:53:30.467

我觉得最好的方法是在你的开发框架中添加一个环境概念。例如，在您的 .htaccess 中，您可以执行以下操作：

`SetEnv ENV dev`

然后在您的 config/boostrap 中，您可以执行以下操作：

```
$env = getenv('ENV');
define('APP_ENV', $env ? $env : 'prod'); 
```

现在，您可以轻松地用于`APP_ENV`有条件地执行/输出诸如 Facebook iFrame 或 api 请求之类的事情。您也可以直接在配置文件或脚本中定义它，而不是通过 htaccess 传递它。真的没关系。

# vb.net - 如何将noone图像放入datagridview的图像列

> ID：13897590
> 
> 赞同：2
> 
> 时间：2012-12-16T00:47:33.040
> 
> 标签：vb.net

我必须将图像放到 datagridview 的特定列中，但不是在每一行中。

```
If getExists(myTable, CInt(reader.GetValue(0)), dbConn) Then
  .Cells("myCol").Value = Image.FromFile("C:\myPath\myIco_16x16.ico")
Else
  .Cells("myCol").Value = "" ' error here
End If 
```

使用此代码，我在执行时遇到错误可能是因为我试图在图像列中放置一个字符串。第二个我尝试的是：

```
.Cells("myCol").Value = Nothing 
```

这不会导致错误，而是将“错误图像”图片（带有红色 X）放到网格中。

这是一种在不从文件或资源加载“空白图像”的情况下将任何图像（空白）放入 datagridview 的图像列的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T03:26:22.917

我过去不得不这样做，并且只使用了一个 1 像素的透明 PNG。即使有 18 个图像列和约 2000 行，我的应用程序的性能也是可以接受的，并且单元格的背景颜色可以很好地显示出来。

您应该能够使用诸如“Paint.Net”之类的免费程序相当容易地创建一个 1x1 像素的透明 PNG。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T15:08:37.453

您可以只创建一个临时空白位图并将其分配给而不是从文件中加载图像。

```
Friend Function BlankImage() As Image
    Try
        Dim oBM As New Bitmap(1, 1)
        oBM.SetPixel(0, 0, Color.Transparent)
        Return oBM
    Catch ex As Exception
        Return Nothing
    End Try

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-14T21:50:48.583

可以提高性能的稍微好一点的方法：

```
Friend Function BlankImage() As Image
    Static oBM As New Bitmap(1, 1)
    Try

        If oBM Is Nothing Then
            oBM.SetPixel(0, 0, Color.Transparent)
        End If
        Return oBM
    Catch ex As Exception
        Return Nothing
    End Try

End Function 
```

# java - Skype 错误？还是 Eclipse 错误？

> ID：13897591
> 
> 赞同：2
> 
> 时间：2012-12-16T00:47:43.727
> 
> 标签：java, eclipse, skype

我尝试为我的 skype-bot 制作一个简单的项目，它看起来像这样：

```
import com.skype.Skype;
import com.skype.SkypeException;

public class SkypeDemo {
    public static void main(String[] args) throws SkypeException {
        System.out.println(Skype.getVersion());
    }
} 
```

但是当我开始它时，我得到了这个错误：

```
Exception in thread "main" com.skype.SkypeException: Loading libskype.jnilib failed.
at com.skype.Utils.convertToSkypeException(Unknown Source)
at com.skype.Utils.getProperty(Unknown Source)
at com.skype.Skype.getVersion(Unknown Source)
at SkypeDemo.main(SkypeDemo.java:6)
Caused by: com.skype.connector.LoadLibraryException: Loading libskype.jnilib failed.
at com.skype.connector.ConnectorUtils.loadLibrary(Unknown Source)
at com.skype.connector.osx.SkypeFramework.init(Unknown Source)
at com.skype.connector.osx.OSXConnector.initializeImpl(Unknown Source)
at com.skype.connector.Connector.initialize(Unknown Source)
at com.skype.connector.Connector.connect(Unknown Source)
at com.skype.connector.Connector.assureAttached(Unknown Source)
at com.skype.connector.Connector.execute(Unknown Source)
at com.skype.connector.Connector.execute(Unknown Source)
at com.skype.connector.Connector.execute(Unknown Source)
at com.skype.connector.Connector.execute(Unknown Source)
... 3 more 
```

那么我该如何解决这个错误呢？请记住，我在构建路径中有两个 Skype jar。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T01:03:33.033

该错误告诉您它无法加载本机库（“libskype.jnilib”）。这（可能）既不是 Eclipse 也不是 Skype 的错。

这很可能是你的错，因为本机库不在它需要的位置（或者你没有告诉 Eclipse 去哪里查找），或者因为你的本机代码风格错误（DLL、.so 或其他）

（如果堆栈跟踪中有另一个链接的“原因”，它可能会告诉你更多......）

参考：

*   这篇博文解释了如何将本机库添加到 Eclipse 项目 - [http://www.eclipsezone.com/eclipse/forums/t49342.html](http://www.eclipsezone.com/eclipse/forums/t49342.html) （实际上，它描述了两种方式......）

# ios - iOS - 具有自动布局的依赖约束控制台输出

> ID：13897592
> 
> 赞同：2
> 
> 时间：2012-12-16T00:48:07.630
> 
> 标签：ios, autolayout

我正在制作一个多次使用弹出框的 iOS 应用程序。每次关闭一个特定的弹出窗口时，我都会在控制台收到以下输出消息（但不是在关闭任何其他弹出窗口时）：

> 所有依赖约束都应该从引擎中删除，也应该从视图的依赖约束列表中删除

我已经在谷歌和这个网站上搜索过那个短语，但没有任何结果。我不确定为什么它只会发生在一个弹出窗口而不是其他弹出窗口。它会与它的视图控制器有关吗？弹出框本身？我是一个自动布局新手，所以我可能缺少一些简单的东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T06:04:00.347

我也有这个问题，我通过从 XIB 中删除 Use AutoLayout 复选框来解决它，自动布局 XIB 存在于文件检查器选项中。

![在此处输入图像描述](../Images/7bacefca2b85536152b6b0173aff776d.png)

希望这可以帮助

# logging - 如何以可编程的方式禁用 jetty 9 日志记录？

> ID：13897597
> 
> 赞同：6
> 
> 时间：2012-12-16T00:49:22.883
> 
> 标签：logging, jetty, slf4j

我正在使用嵌入式 Jetty 9，路径中有 slf4j.jar。默认情况下，jetty 会记录大量信息。

我想禁用日志记录，或者至少将日志级别更改为 INFO。我怎样才能在程序中做到这一点（即，不放一些 xml 配置文件）？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T18:46:16.023

没有办法直接使用 slf4j 来设置[Logger](http://www.slf4j.org/apidocs/org/apache/log4j/Logger.html)级别，因为 slf4j 只是一个日志外观/路由 API。

您需要依赖底层日志实现来设置命名空间“org.eclipse.jetty”的日志级别，例如：

*   如果使用 slf4j-simple.jar 和[SimpleLogger](http://www.slf4j.org/apidocs/org/slf4j/impl/SimpleLogger.html)，那么您不能以编程方式设置级别，只能在 SimpleLogger 初始化后通过系统属性来设置，这在 JVM 中是非常早期的。

*   如果使用 slf4j-log4j.jar，请使用[Log4j 特定技术](https://stackoverflow.com/questions/4598702/dynamically-changing-log4j-log-level)。

```
org.apache.log4j.LogManager.getLogger("org.eclipse.jetty").setLevel(Level.WARN); 
```

*   如果使用 slf4j-jdk14.jar，请使用 java.util.logging 技术。

```
java.util.logging.LoggerFactory.getLogger("org.eclipse.jetty").setLevel(Level.WARNING); 
```

*   如果使用 logback.jar，请将 slf4j Logger 转换为[logback Logger](https://stackoverflow.com/questions/7967165/how-to-configure-logback-with-java-code-to-set-log-level)，然后设置 Level。

```
final org.slf4j.Logger logger = org.slf4j.LoggerFactory.getLogger("org.eclipse.jetty");
if (!(logger instanceof ch.qos.logback.classic.Logger)) {
    return;
}
ch.qos.logback.classic.Logger logbackLogger = (ch.qos.logback.classic.Logger) logger;
logbackLogger.setLevel(ch.qos.logback.classic.Level.WARN); 
```

# c - 使用 malloc 为结构分配内存

> ID：13897602
> 
> 赞同：0
> 
> 时间：2012-12-16T00:50:05.690
> 
> 标签：c, pointers, struct, malloc

我有一个名为 State 的结构：

```
typedef struct State{
    char alphabets[2][6]; 
    struct State *PREV; /*this points to the previous state it came from*/
    struct State *NEXT; /*this points to the next state in the linked list*/
    int cost; /*Number of moves done to get to this position*/
    int zero_index;/*this holds the index to the empty postion*/
} State; 
```

这是我的 memAllocator() 方法：

```
memAllocator(){
struct State *p = (State*) malloc(sizeof(State));
if (p==NULL){
        printf("Malloc for a new position failed");
        exit(1);
}
return p; 
```

这是我的主要方法。

```
main(){
State *start_state_pointer=memAllocator();
State start_state;
start_state.zero_index=15;
start_state.PREV = NULL;
start_state.alphabets[0][0]='C';
start_state.alphabets[0][1]='A';
start_state.alphabets[0][2]='N';
start_state.alphabets[0][3]='A';
start_state.alphabets[0][4]='M';
start_state.alphabets[0][5]='A';
start_state.alphabets[1][0]='P';
start_state.alphabets[1][1]='A';
start_state.alphabets[1][2]='N';
start_state.alphabets[1][3]='A';
start_state.alphabets[1][4]='L';
start_state.alphabets[1][5]='_';
start_state_pointer=&(start_state);
/*start_state=*start_state_pointer;*/ 
```

}

我认为语句 start_state_pointer=&(start_state); 只是将指针 start_state_pointer 分配给 State start_state 期间创建的少量临时空间，而不是分配给我分配的空间。但是，当我尝试使用注释掉的语句 start_state=*start_state_pointer 来尊重指针并分配空间以启动状态时。它给了我一个分段错误。

我刚从C开始。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:59:09.047

您的`memAllocator`and`main`函数没有明确的返回类型。这种代码风格已经被弃用了 10 多年。C 中的函数应始终具有返回类型。对于`main`，返回类型应该是`int`，对于你的`memAllocator`函数，它应该是`State *`。

第二个问题是您为`State`结构分配空间，但随后填充*不同* `State`的结构并`State`使用`start_state_pointer = &(start_state);`.

要使用刚刚分配的内存，您需要使用以下内容：

```
State *start_state = memAllocator();
start_state->zero_index = 15;
start_state->PREV = NULL;
start_state->alphabets[0][0] = 'C';
// etc. 
```

无需创建两个`State`结构。当您`State start_start;`在原始代码中使用时，您正在创建一个名为*自动存储*的结构。这意味着该结构的空间是自动分配的，并在声明它的范围结束时自动为您释放。如果您获取该结构的地址并将其传递给程序的其他部分，那么您将传递围绕指向已释放结构的指针，这可能是您的程序崩溃的原因。

# javascript - 在页面加载时设置滚动位置

> ID：13897603
> 
> 赞同：2
> 
> 时间：2012-12-16T00:50:11.220
> 
> 标签：javascript, jquery

我希望在页面加载时设置页面滚动。我可以通过 div 滚动顶部或只是像素高度来设置它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T00:57:53.103

```
$(document).ready(function() {
    $(document).scrollTop(100);
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T01:22:30.633

请改用 window.load，因为某些图像的加载可能会影响您的滚动位置

```
$(window).load(function() {
      $(document).scrollTop(100);
}); 
```

# windows - 为什么我不能浏览 dll 以确定其中的内容？：“无法浏览某些组件”

> ID：13897610
> 
> 赞同：1
> 
> 时间：2012-12-16T00:51:51.843
> 
> 标签：windows, dll, com, objectbrowser

我正在寻找一个丢失的 COM 接口`X`，我怀疑它是在`Y.dll`. 我可以使用

```
grep X Y.dll 
```

上面写着“匹配”。万岁，怀疑得到证实！

唉，当我在 Visual Studio Express 中使用对象浏览器，尝试添加`Y.dll`到我的自定义组件集时，我在弹出窗口中收到错误：“无法浏览某些组件”。

那么我不能浏览这个dll的原因是什么？是否可以有意或无意地保护、隐藏、保护或隐藏 COM 接口？显然我需要一个底漆！

官方上，所有微软对此的了解似乎普遍缺乏洞察力：

> 当您尝试在“组件选择器”对话框中添加不支持对象浏览的文件类型（例如 .htm 和 .txt 文件）时，通常会发生此错误。对象浏览器支持 .bsc、.olb、.tlb、.dll、.exe 和 .ocx 等文件类型。

说真的，dll或exe不支持对象浏览的原因是什么？这个初学者将不胜感激任何指向教程或书籍的指针！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T16:03:08.567

COM 对象浏览器依赖于COM 服务器（dll、exe、ocx 等）[导出的元数据（类型库）。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366757(v=vs.85).aspx)

问题是 COM 服务器不需要导出任何关于它实现了哪些接口的元数据。不幸的是，我发现了很多这样的服务器（所以需要知道其他方式支持哪些 CoClass、接口等）。

检查您的 COM 服务器 (y.dll) 是否包含名为“TYPELIB”的资源，类似于：

![COM 类型库资源](../Images/0265e3bc662fe8b3d39f85b7409be304.png)

希望这可以帮助。

# javascript - 如何在 div 中打开链接？

> ID：13897617
> 
> 赞同：1
> 
> 时间：2012-12-16T00:52:45.337
> 
> 标签：javascript, css, ajax, html, hyperlink

我正在尝试在某个 div 中打开 3 个链接。我知道 ajax 可以帮助我做到这一点，但无论出于何种原因，我都无法让它正常工作。（我是 ajax 和一般 javascript 的新手）如果有人可以帮助我，我将不胜感激！我四处寻找我的问题，但似乎找不到任何有用的信息。至少不是我需要的程度。

```
<div id="tickcontain">
    <div id="ticker"><ul class="bxslider">
        <li><img src="../images/01.png" /></li>
        <li><img src="../images/02.png" /></li>
        <li><img src="../images/03.png" /></li>
        <li><img src="../images/04.jpg" /></li>
    </ul></div>
<div id="calender"><center><?php include ("sources/status.php");?></center></div>

<div id="hallofame"> //**Want the information to load here**// </div> 
```

```
<div id="events">
    <div id="tab1">Register</div> //**Want these 3 to be my links**//
    <div id="tab2">Events</div>   //**Want these 3 to be my links**//
    <div id="tab3">Updates</div>  //**Want these 3 to be my links**//
</div>
<div id="adspace"></div> 
```

我已将此插入到我的标题中（页面顶部）：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

我在希望链接/ div 发生的页面上有这个。（仅尝试测试第一个链接。）

```
<script type=text/javascript"> 
    $("#tab1").click(function(){
        $("#hallofame").load('pages/register.php');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:51:51.727

您的源代码中没有链接。让我们添加它们并更改它们的默认行为：

```
<a data-target="#halloffame" href="pages/register.php">Register</a>
<a data-target="#halloffame" href="pages/events.php">Events</a>
<a data-target="#halloffame" href="pages/updates.php">Updates</a>

<div id="halloffame"></div>

<script>
  $('[data-target]').click( function (e) {
    var target = $($(this).attr('data-target'));
    target.load($(this).attr('href'));

    e.preventDefault(); // prevent anchor from changing window.location
  });
</script> 
```

# android - IntelliJ IDEA 上的 Android Maven 项目找不到 R 类

> ID：13897619
> 
> 赞同：3
> 
> 时间：2012-12-16T00:52:57.560
> 
> 标签：android, maven, intellij-idea

我试图在我的代码中引用 R 类，这是一个在 IntelliJ IDEA 12 上创建的 Android Maven 项目，但是在编译整个项目后还没有找到 R 类。

为什么？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T15:14:27.033

Eugene Kudelevsky 在 JetBrains 论坛上提出的建议解决了问题：

> 请您检查以下内容：
> 
> 转到项目结构 | 模块 | 选择 Android facet 打开 facet 设置。然后打开“编译器”选项卡。是否选择了“在 Make 之前运行 'process-resources' Maven 任务”？仅在这种情况下，我确实设法重现了该问题。

[http://devnet.jetbrains.net/message/5474227#5474227](http://devnet.jetbrains.net/message/5474227#5474227)

# asp.net-mvc - 如何本地化 mvc 路由？

> ID：13897625
> 
> 赞同：2
> 
> 时间：2012-12-16T00:54:19.857
> 
> 标签：asp.net-mvc, routing, asp.net-mvc-4, asp.net-mvc-routing

我目前正在本地化我的 MVC4 Web 应用程序并遇到了问题。我的网站有四种语言，英语、法语、俄语和波兰语。我根据用户选择的内容设置网站文化。这不在 url 中跟踪。

我希望我的网址对 SEO 友好。所以我需要将它们本地化。不过，棘手的部分是我用英语为我的控制器设置了路由。例如

/product/product-name 映射到产品控制器和获取操作 /customer/details 映射到客户控制器和详细信息操作

如何将路线本地化到不同的语言/文化？所以当我创建一个动作链接时，它会映射到正确的控制器/动作，生成本地化的 url？

我找到[了这个](http://blog.maartenballiauw.be/post/2010/01/26/Translating-routes-%28ASPNET-MVC-and-Webforms%29.aspx)解决方案，它非常优雅，但我遇到的问题是它不适用于动态 url，因为需要显式映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:00:09.233

实际上，我不知道该问题的正确答案，而且使用标准 MVC 路由如何做到这一点真的很有趣。

但是，如果您没有找到正确的方法来使用标准选项实现它，您可以在[前端控制器](http://en.wikipedia.org/wiki/Front_Controller_pattern)的帮助下手动实现它。

您创建的类将成为您的应用程序内的主要可用性点。在该方法中，您可以实现重定向逻辑，将您重定向到正确的控制器/操作。

# node.js - flapjax 从事件流中获取最后一个元素

> ID：13897631
> 
> 赞同：0
> 
> 时间：2012-12-16T00:55:36.020
> 
> 标签：node.js, socket.io

我正在尝试使用 flapjax 实现一个小型聊天服务。我使用 eventStream 来获取连接到服务器的所有客户端，并且在广播消息时（'message' 上的函数），我使用将消息发送到当前客户端的函数映射到此 eventStream。

```
// Event stream yielding received clients
var clientReceiverE = receiverE();
// Event stream collecting all the clients
var clientsE = clientReceiverE.collectE([], function (client, clients) {return clients.concat([client]);});

socket.on('connection', function(client) {
    clientReceiverE.sendEvent(client);
    for (i = 0; i < chatMessages.length; i++) {
      client.emit('message', chatMessages[i]);
    }

    client.on('message', function(message) {
        chatMessages.push(message);
        //for (i = 0; i < clients.length; i++) {
        // clients[i].emit('message', message);
        //}
        mapE(clientReceiverE, function(client) {console.log(client); client.emit('message', message); return client});
    });

    client.on('nickname', function(name) {

    });
}); 
```

使用此代码在事件流上注册客户端成功，但 mapE 不会导致所有这些客户端的循环。有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T00:27:30.823

你不应该那样使用 mapE 。在您的代码中，您尝试使用每个 client.on('message', ...) 重新创建 mapE 事件绑定。

这个问题使用receiverE来解决。此函数用于将外部事件流转换为flajax EventStream 的。

```
// Event stream yielding received clients
var clientReceiverE = receiverE();
// Event stream collecting all the clients
var clientsE = clientReceiverE.collectE([], function (client, clients) {return clients.concat([client]);});
var clientsB = clientsE.startsWith(undefined);    //Turn the event stream into a behaviour (event + value)

var messagesE = receiverE();
messagesE.mapE(function(messagePacket){
    var clients = clientsB.valueNow();     //Grab current value of client list behaviour
    if(clients==undefined){
       return;
    }
    var from = messagePacket.client;
    for(var index in clients){
       clients[index].emit('message', messagePacket.message);
       console.log(messagePacket.message);
    }
});

socket.on('connection', function(client) {
    clientReceiverE.sendEvent(client);

    client.on('message', function(message) {
        messagesE.sendEvent({client: client, message: message});
    });
}); 
```

不同的是这个。flajax 树与 WebSocket 事件代码隔离，它们之间没有共享状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T12:55:39.270

如果您仍然没有猜到:) 我认为这是因为 mapE 本身不会产生任何动作，mapE 只会创建并返回另一个 EventStream，它的行为类似于给定的源，但通过给定的函数修改了值。

# android - DefaultHttpClient post获取会话cookie并传递给WebView android

> ID：13897633
> 
> 赞同：1
> 
> 时间：2012-12-16T00:55:57.517
> 
> 标签：android, webview, httpclient, session-cookies

我在 SO 上找到了这个问题的一些答案，但我没有成功实施它们，所以希望有人可以检查我的代码并告诉我哪里出错了。

我已经验证我的 cookie 是从 DefaultHttpClient 设置的，并且正在使用 Log.d 将其写出来，如下面的代码片段所示。一切都在那里，只是没有为在此代码段底部调用的 WebView 设置。传递下来的 cookie 是我的 Asp.net mvc 项目中的会话 cookie。任何想法为什么当 WebView 访问网站时它没有让我保持登录状态？不要让 facebook 措辞让你失望，我都在工作，这个 cookie 用于我自己的服务器，它传递会话 cookie 以让我登录到自己的网站（基于我的 facebook 资料）。

```
Cookie sessionCookie = FacebookLoginService.cookie;
Log.d("intialwebview",sessionCookie.toString());
CookieSyncManager.createInstance(this);
CookieManager cookieManager = CookieManager.getInstance();
if (sessionCookie != null) {
    cookieManager.removeSessionCookie();
    String cookieString = sessionCookie.getName() + "=" + sessionCookie.getValue() + "; domain=" + sessionCookie.getDomain();
    Log.d("intialwebview",cookieString);
    cookieManager.setCookie(FacebookLoginService.cookie.getDomain(), cookieString);
    CookieSyncManager.getInstance().sync();
}  
//end cookie section

int userId = prefs.getInt(C.USER_ID, 0);
    webView = (WebView) findViewById(R.id.web_view);
webView.getSettings().setUserAgentString(webView.getSettings().getUserAgentString() + "(Rambo)");
webView.getSettings().setJavaScriptEnabled(true);
webView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY); 
webView.loadUrl(C.BaseUrl + "home/firstpage"); 
```

**编辑：** 我还尝试使用以下代码创建 Web 视图：

```
WebView webView = new WebView(this); 
```

同样的结果。Cookie 未发送到 web 视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:39:12.023

最后通过使用 Asynctask 并在后台运行 sleep 来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T09:43:17.157

你已经使用了这条线 -

```
if (sessionCookie != null) {
  cookieManager.removeSessionCookie();
  } 
```

确保您每次都能收到新的 cookie。好像您遇到了与我相同的问题，请查看以下链接-

[android 的 removeSessionCookie() 问题，(code.google.com)](https://code.google.com/p/android/issues/detail?id=16543)

它说这`removeSessionCookie()`是在一个线程中实现的，所以无论何时

称为；一个线程开始，在你`setCookie(url, cookieString);`被调用之后，

它会删除您刚刚设置的新 cookie。因此，对于某些设备，它`removeSessionCookie()`已经运行良好，

而对于某些人来说，它会删除 cookie，我们就会遇到这个问题。

我建议您删除它`removeSessionCookie();`，因为您只设置了一个 cookie，因此它不会与其他 cookie 冲突。您的代码将无缝运行。

# android - Android：除非您先按下按钮一，否则按钮二不会播放声音

> ID：13897634
> 
> 赞同：0
> 
> 时间：2012-12-16T00:56:30.643
> 
> 标签：android, audio

我试图能够在不先按下按钮 1 的情况下按下按钮 2 来让它播放声音。这是我的代码。因此，如果我按下按钮 2，则在按下按钮 1 之前不会播放任何声音

```
@Override
protected void onCreate(Bundle LiamIsTheBest) {
    // TODO Auto-generated method stub
    super.onCreate(LiamIsTheBest);
    setContentView(R.layout.liam);

    Button boton = (Button) findViewById(R.id.button1);
     boton.setOnClickListener(new View.OnClickListener() {
       @Override
        public void onClick(View v) { // onClick Method
        // Your Onclick Action Here
            MediaPlayer mp = MediaPlayer.create( MainActivity.this, R.raw.eat);  
              mp.start();

              Button play = (Button) findViewById(R.id.button2);
              play.setOnClickListener(new View.OnClickListener() {
               @Override
               public void onClick(View v) {
                MediaPlayer mp = MediaPlayer.create(MainActivity.this, R.raw.play);  
                mp.start();
               }
              });

        }

});

}
      }; 
```

xml

```
<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="I want to eat" />

<Button
    android:id="@+id/button2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="I want to play" /> 
```

<

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:01:01.010

用这个

```
@Override
protected void onCreate(Bundle LiamIsTheBest) {
    super.onCreate(LiamIsTheBest);
    setContentView(R.layout.liam);

    Button boton = (Button) findViewById(R.id.button1);
    boton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            MediaPlayer mp = MediaPlayer.create( MainActivity.this, R.raw.eat);  
            mp.start();
        }
    });

    Button play = (Button) findViewById(R.id.button2);
    play.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            MediaPlayer mp = MediaPlayer.create(MainActivity.this, R.raw.play);  
            mp.start();
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T00:59:10.157

```
 Button boton = (Button) findViewById(R.id.button1);
    Button play = (Button) findViewById(R.id.button2);
    boton.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) { // onClick Method
            // Your Onclick Action Here
            MediaPlayer mp = MediaPlayer.create(MainActivity.this,
                    R.raw.eat);
            mp.start();

        }
    });

    play.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            MediaPlayer mp = MediaPlayer.create(MainActivity.this,
                    R.raw.play);
            mp.start();
        }
    }); 
```

您正在声明您的播放按钮并`OnClickListener`在您的第一个按钮内设置`onClick()`。您应该先声明它们并`OnClickListener`单独设置；提示：如果您使用 Eclipse，请 ctrl+shift+f 格式化您的代码，以便您知道括号应该在哪里。

# facebook - Facebook PHP sdk 不使用 iframe 链接设置 cookie

> ID：13897635
> 
> 赞同：0
> 
> 时间：2012-12-16T00:56:35.223
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我正在为 Facebook 使用 PHP sdk。

```
require_once 'facebook-sdk/facebook.php';

session_start();

$facebook = new Facebook(array(
    'appId' => 'app_id',
    'secret' => 'app_secret',
    'cookie' => true,
));

$facebook->getUser();

if($user){
   // do stuff
}else{
   //redirect to app login
} 
```

在这段代码之后，我的页面上有一个链接，该链接指向带有查询字符串的同一页面。

就像是`<a href="/index.php?step=2">Continue</a>`

但是当我点击这个链接时，$user 是“0”。这只发生在 şn Safari 和 IE 中。当我检查这些浏览器中不存在应用程序设置的 cookie 时。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:52:59.677

由于用户id不会改变，如果通过GET发送它会不会有问题？

```
<a href="/index.php?step=2&id=<? echo $user ?>">Continue</a> 
```

然后在你的脚本顶部，在你按照你的方式获取 $user 之后：

```
if($_GET['step'] == 2){
   $user = $_GET['id'];
} 
```

如果您确实需要保留 cookie，可以将其添加到脚本的顶部，它必须是第一行。

```
header('P3P: CP="CAO COR CURa ADMa DEVa OUR IND ONL COM DEM PRE"'); 
```

你也可能想检查这个问题

[iframe Facebook 应用程序和 cookie [Internet Explorer]](https://stackoverflow.com/questions/1835285/iframe-facebook-application-and-cookies-internet-explorer)

[IE Facebook App iFrame 会话丢失](https://stackoverflow.com/questions/7205332/session-lost-on-ie-facebook-app-iframe)

这与标题解决方案有关。

# android - 多个意图附加功能

> ID：13897638
> 
> 赞同：1
> 
> 时间：2012-12-16T00:57:07.470
> 
> 标签：android, android-intent

在活动之间传递额外内容是行不通的。我尝试了所有我知道的方法。

```
Intent i = new Intent(getActivity(), SomethingMore.class);
i.putExtra(intentStart, 1);
i.putExtra(intentSomething, true);
startActivity(i); 
```

和

```
Bundle extras = i.getExtras();
if (extras != null) {
    start = extras.getInt(intentStart);
    something = extras.getBoolean(intentSomething);
} 
```

不起作用。我也试过用这种方法来检索

```
start = intent.getIntExtra(intentStart, 0);
something = intent.getBooleanExtra(intentSomething, false); 
```

，这也不起作用。使用 a`Bundle`也不起作用..

```
Intent i = new Intent(getActivity(), SomethingMore.class);
Bundle mBundle = new Bundle();
mBundle.putInt(intentStart, 1);
mBundle.putBoolean(intentSomething, true));
i.putExtras(mBundle);
startActivity(i); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:52:57.387

Intent Extra 键是否相同？;) (intentSomething 和 intentStart)

# jquery - 带有 ScrollTo 的箭头键导航跳跃

> ID：13897643
> 
> 赞同：0
> 
> 时间：2012-12-16T00:58:04.353
> 
> 标签：jquery, navigation, keyboard, scrollto

我`if (e.keyCode == 40)`用来触发一个 scrollTo 函数，但由于某种原因，在 chrome 中它似乎在滚动之前跳了起来，这真的是错误的。

我解决了我的问题（这只发生在 chrome 上，适用于 firefox。

确保在点击向下箭头之前单击结果选项卡，您会看到它向上跳然后滚动，与第二张幻灯片上的向上键一次相同。

[http://jsfiddle.net/vEpS3/9/](http://jsfiddle.net/vEpS3/9/)

如果你们中的任何人知道解决此问题的方法，我将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T01:00:44.580

你需要一个

```
e.preventDefault(); 
```

在滚动之前[http://jsfiddle.net/whucg/](http://jsfiddle.net/whucg/)

# php - 为什么mysqli不能在不同的php文件中工作

> ID：13897651
> 
> 赞同：0
> 
> 时间：2012-12-16T00:59:55.507
> 
> 标签：php, mysql, mysqli

首先，如果我的英语不完美，我很抱歉，英语不是我的母语。我会尽力让自己被理解。

我正在尝试创建使用 mysqli 连接和查询数据库的所有必要步骤。这些将保留在一个单独的 php 文件中，必要时将包含该文件。我这样做只是为了不必总是编写代码来连接数据库。

在我的 dbConnection.php 文件中，我有：

```
<?php
require("login.php");

$connection;
function connect() {
    global $connection;

    $connection = new mysqli($host, $username, $password, $database);

    if ($connection->connect_errno) {
        printf("Connection failed: %s\n", $connection->connect_error);
        exit();
    }
}

function mysqlQuery($query) {
    global $connection;

    if($connection == NULL) connect();

    $result = $connection->query($query);
    if (!$result) {
        printf("Query failed: %s\n", $connection->error);
        exit();
    }

    return $result;
}

?> 
```

（login.php 有连接的变量）

当我需要连接到数据库时，我使用 require("dbConnection.php");

问题是当我调用 mysqlQuery 函数时，它总是打印“查询失败：未选择数据库”。我很确定数据库名称是正确的。

当我直接在脚本中（而不是在单独的文件中）使用代码时，它可以正常工作。

提前致谢。

**问题已解决，忘记声明为全局$host、$username、$password、$database。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:17:57.060

一个人的代码出错有两个主要原因：

1.  错误的想法或算法或结构
2.  该想法或算法或结构的错误*实现*

没有经验的程序员总是坚持第一个而很少注意第二个（所以你问 - “如何使用......？”）。而在现实生活中，第二个更为重要。算法很少，但错误数不胜数。一个人必须学会如何发现错误。

尽管我认为这种结构没有意义，（mysqlQuery 函数实际上没用，可以用`$result = $connection->query($query) or trigger_error($connection->error."[$query]");`代码行代替，这会**更好**），乍一看它应该可以工作。
因此，我们必须不把注意力集中在“怎么做”上。问题，但在“为什么它不起作用？”。

后一个问题的答案称为*调试*。您必须学习它并在日常工作中大量使用它。实际上，这意味着您必须检查代码中的每个变量是否包含所需的值。

查看 PHP 生成的所有错误对于调试也是必不可少的。
在您的代码中始终包含`error_reporting(E_ALL);`指令（在全局配置文件中会很好）。

此外，在开发系统上添加`ini_set('display_errors',1);`到您的配置文件（但在生产中将值更改为 0！）

我敢打赌，这两个指令将阐明这个问题。
如果没有 - 继续调试。

# php - 失去焦点

> ID：13897652
> 
> 赞同：0
> 
> 时间：2012-12-16T01:00:00.170
> 
> 标签：php, javascript, jquery

我创建了一个带有 PHP`foreach`循环的表；现在我试图`td`用`input`点击时替换里面的值。

```
$('#memberTable tr td').click(function(e){
    $(this).html('<input type="text" id="" size="20" value=""/>');
}); 
```

输入样式只闪烁一次`:focus`，然后失去焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:04:25.657

你可以让它专注于`.focus()`：

```
$('#memberTable tr td').click(function(e) {
    var $this = $(this);
    $this.empty();

    $('<input />', {
        type: 'text',
        id: '',
        size: 20,
        value: $this.text()
    }).appendTo($this).focus();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:04:54.647

尝试手动对焦：

```
var input = $('<input type="text" id="" size="20" value="" />');

$(this).empty().append(input);

input.focus(); 
```

# javascript - 在 TypeScript 中扩展功能

> ID：13897659
> 
> 赞同：52
> 
> 时间：2012-12-16T01:01:47.017
> 
> 标签：javascript, typescript

> **可能重复：**
> [原型如何在打字稿上扩展？](https://stackoverflow.com/questions/12766117/how-does-prototype-extend-on-typescript)

我目前正在学习 TypeScript，并且想知道如何向现有对象添加功能。假设我想将 Foo 的实现添加到 String 对象。在 JavaScript 中，我会这样做：

```
String.prototype.Foo = function() {
    // DO THIS...
} 
```

了解 TypeScript 类、接口和模块是开放式的，这让我尝试了以下操作，但没有成功

*1\. 引用 TypeScript 中的 JavaScript 实现*

```
 JavaScript:

    String.prototype.Foo = function() {
        // DO THIS...
    }

    TypeScript:

    var x = "Hello World";
    x.Foo(); //ERROR, Method does not exist 
```

*2.扩展接口*

```
interface String {
    Foo(): number;
}

var x = "Hello World";
x.Foo(); //Exists but no implementation. 
```

*3.扩展类*

```
class String {
    Foo(): number {
        return 0;
    }
}

// ERROR: Duplicate identifier 'String' 
```

正如您从这些结果中看到的那样，到目前为止，我已经能够通过接口契约添加该方法，但没有实现，那么，我该如何定义和实现我的 Foo 方法作为预先存在的 String 类的一部分？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-12-16T01:32:07.313

我找到了解决方案。它结合了接口和 JavaScript 实现。该接口为 TypeScript 提供合约，允许新方法的可见性。JavaScript 实现提供了在调用方法时将执行的代码。

**例子：**

```
interface String {
    foo(): number;
}

String.prototype.foo= function() {
    return 0;
} 
```

**从 TypeScript 1.4 开始，您现在还可以扩展静态成员：**

```
interface StringConstructor {
    bar(msg: string): void;
}

String.bar = function(msg: string) {
    console.log("Example of static extension: " + msg);
} 
```

# visual-studio-2012 - 如何在 Visual Studio 2012 中卸载项目

> ID：13897661
> 
> 赞同：3
> 
> 时间：2012-12-16T01:02:02.400
> 
> 标签：visual-studio-2012

在 VS2008 中，我可以在解决方案资源管理器中右键单击项目时找到此上下文菜单项。

在 VS2012 中，我找不到这样的项目。如何在VS2012中存档？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T01:04:51.620

如果右键单击项目/解决方案时该选项不可用，请尝试选择要卸载的项目，然后打开项目菜单。该选项应该在那里可用。

# c# - 从任何给定的类（类型）中获取文件列表作为传递的参数

> ID：13897664
> 
> 赞同：0
> 
> 时间：2012-12-16T01:02:52.923
> 
> 标签：c#, reflection

我想转换一种已经完成这项工作的方法

（仅当您在其主体中实例化该类时）

一个将接受受控类作为传递参数的人......不知何故。

我试图通过反复试验自己得到这个结果，（主要是试验..和错误，很多......）

但没有成功（：

这第一类在我的助手类（扩展命名空间）中

```
public static List<string> AnyClassFieldsValuesAsList<T>(this T Clss, string nestedName)
{
    // i know how to get this to work... if an instace of the class is declared 
    // only here i would like to have any given class...as passed parameter
    // couple of tests to get a hold of the passed Class...no success (:
    var T1 = typeof(T.GetType());
    var T2 = Clss.GetType();

    return typeof(Clss.GetType()).GetFields(); //ToList<string>();
} 
```

这是用于保存表示样式字体的字符串的主题类（我已存储在相同的帮助文件中）

```
public class FontNames 
{
    public readonly string Aharoni = "Aharoni",
                           Andalus = "Andalus",
                           AngsanaNew = "Angsana New",
                           AngsanaUPC = "AngsanaUPC",
                           Aparajita = "Aparajita";
                           //.....etc'
} 
```

现在在当前项目**背后的代码**中，我希望能够做类似的事情

```
//imports of extensions and my style namespaces ....
// then somewhere after Page_Load()...

var instnceOfFnames  = new FontNames();
list<string> FontsLst= instnceOfFnames.AnyClassFieldsValuesAsList(.....); 
```

`AnyClassFieldsValuesAsList()`顶部签名中的参数仅用于测试，

因为我不能和他们一起工作，我不确定他们是我应该通过的人。

**获得结果的正确语法是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:53:01.190

据我了解，您需要在没有类实例的情况下获取字段的值。我想，您应该将这些字段声明为`public readonly static ...`. 然后，您将能够使用以下方法：

```
public static IEnumerable<string> GetFields<T>()
{
    Type type = typeof(T);
    return type.GetFields(BindingFlags.Static | BindingFlags.Public)
                .Where(f => f.FieldType == typeof(string))
                .Select(f => (string)f.GetValue(null));
} 
```

像这样：

```
foreach (string f in GetFields<FontNames>())
     Console.WriteLine(f); 
```

* * *

根据评论：

对于当前的问题（据我了解），它似乎是多余的，因为静态字段不需要访问实例。但至少它可以给出一些想法

```
public static IEnumerable<string> GetFields<T>(this T value)
{
    Type type = value.GetType();
    //...all the same as above
} 
```

为了得到相同的结果，没有泛型就足够了

```
public static IEnumerable<string> GetFields(this object value)
{
    Type type = value.GetType();
    //...all the same as above
} 
```

# iphone - 无法重置资源语句或进入无限循环

> ID：13897666
> 
> 赞同：0
> 
> 时间：2012-12-16T01:03:16.217
> 
> 标签：iphone, objective-c, ios, sqlite

当我试图关闭 SQLite 数据库时，我看到我收到代码错误 5。
所以我努力重置所有使用的资源。
我相信这是我没有正确重置所有资源的方法：

```
- (NSArray*) allObjects
{
    NSMutableArray* objects=[NSMutableArray new];
    // resource is an ivar of type sqlite3_stmt* , it has been initialized with   
    // sqlite3_prepare, a query where I select some rows of a table
    if(!resource)
    {
        return nil;
    }
    while(sqlite3_step(resource)== SQLITE_ROW)
    {
        NSMutableDictionary* object=[NSMutableDictionary new];
        int count= sqlite3_column_count(resource);
        for(int i=0; i<count; i++)
        {
            // I need to know the type and the name of all columns to build
            // a dictionary object.Later I'll optimize it doing this only at 
            // the first loop iteration.
            const char* key=sqlite3_column_name(resource, i);
            int type= sqlite3_column_type(resource, i);
            const unsigned char* text;
            double value;
            switch (type)
            {
                case SQLITE_TEXT:
                    text=sqlite3_column_text(resource, i);
                    [object setObject: [NSString stringWithFormat: @"%s",text] forKey: [NSString stringWithFormat: @"%s",key]];
                    break;
                case SQLITE_INTEGER:
                    value= sqlite3_column_int(resource, i);
                    [object setObject: @(value) forKey: [NSString stringWithFormat: @"%s",key]];
                    break;
                case SQLITE_FLOAT:
                    value= sqlite3_column_double(resource, i);
                    [object setObject: @(value) forKey: [NSString stringWithFormat: @"%s",key]];
                    break;
                case SQLITE_NULL:
                    [object setObject: [NSNull null] forKey: [NSString stringWithFormat: @"%s",key]];
                    break;
                default:
                    break;
            }
        }
        // sqlite3_reset(resource);  Point 1
        [objects addObject: object];
    }
    // sqlite3_reset(resource);  Point 2
    return objects;
} 
```

因此，如果我在关闭数据库时将 sqlite3_reset(resource) 放在第 2 点，我会得到错误 5，如果我将它放在第 1 点，我会进入无限循环。
我几乎可以肯定问题出在这个函数上，我也在用数据库做其他事情，所以错误可能在代码的其他部分，但代码很多。所以如果问题不在这里，请写它在评论中，我将发布代码的其他“可疑”部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:20:41.433

您应该将“重置”放在第 2 点。`sqlite3_finalize`然后，当您不再需要准备好的语句时，您应该调用它。执行此操作后，您还应该将 ivar 设置为`nil`。

`sqlite3_reset`表示您已准备好再次使用该语句。`sqlite3_finalize`表示您已完全完成该语句，并且应该清理其资源。

错误 5 是`SQLITE_BUSY`。如果“最终确定”不能解决问题，请搜索`SQLITE_BUSY`.

# php - 为什么 mysql 表中的名称列在没有插入名称的情况下最终为空白？

> ID：13897669
> 
> 赞同：0
> 
> 时间：2012-12-16T01:03:43.127
> 
> 标签：php, mysql, forms, drupal-6

当我运行此代码时，会在 mysql 数据库表 student_log 中创建一行。但是，student_name 列未填充用户输入的值。这是怎么回事？

```
 <?php

function student_grant_menu() {
  $items = array();
  $items['student_grant/form'] = array(
    'title' => t('student_grant'),
    'page callback' => 'student_grant',
    'access arguments' => array('access content'),
    'description' => t('student_grant'),
    'type' => MENU_CALLBACK,
  );
  return $items;
}

function student_grant_form() {
  return drupal_get_form('student_grant_my_form');
}

function student_grant_my_form($form_state) {
  $form['name'] = array(
    '#type' => 'textfield',
    '#title' => t('Name'),
    '#size' => 30, 
    '#required' => TRUE,
  );

  // Adds a simple submit button that refreshes the form and clears its contents -- this is the default behavior for forms.
  $form['submit'] = array(
    '#type' => 'submit',
    '#value' => 'Submit',

  );
  return $form;
}

// name of table is student_log and field is student_name. Name passed from form_state is put in student_name field?
 function student_grant_my_form_submit($form, &$form_state) {

  db_query("INSERT INTO {student_log} (student_name) VALUES ('%s')", 
  $form_state['name']);
  drupal_set_message(t('Your form has been saved.'));

}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:25:09.180

您应该查看 $form_state['values']，如下所示：

```
function student_grant_my_form_submit($form, &$form_state) {

  db_query("INSERT INTO {student_log} (student_name) VALUES ('%s')", 
  $form_state['values']['name']);
  drupal_set_message(t('Your form has been saved.'));

} 
```

# bash - 从列表或镜像中查找最快的镜像

> ID：13897671
> 
> 赞同：2
> 
> 时间：2012-12-16T01:04:12.247
> 
> 标签：bash, networking, ping, mirror, traceroute

标题已经说明了我想要什么。想想这个例子。

> 我想下载 ubuntu ISO。我去 Ubuntu 站点并获取镜像列表。在那里，我发现我的邻国托管了一面镜子。所以我选择了地理上离我的国家最近的那面镜子。开始下载。但是我的速度很慢。现在我的一个朋友告诉我选择一个实际上离我很远的镜子。但现在我的速度很快。

现在在linux中我怎样才能找到**最快**的镜像？我在文本文件中有一个主机名列表，例如

```
host1.net
host2.net
mirror.host3.net 
```

### 我尝试了什么？

我在 Ubunut 的镜像选择对话框中看到了相同的功能。我尝试`ping`了每台主机并节省了时间。然后我选择延迟较低的主机。但它并不快。它更接近。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T03:01:21.890

在服务器上查找文件，最好是在已知位置。下载第一个 16kiB。计时。选择花费最少的时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T07:04:42.447

看看Gentoo 的mirrorselect 就是为了做到这一点。

git://git.overlays.gentoo.org/proj/mirrorselect.git

# requirejs - 使用 require.js 加载非 AMD 文件和非 .js 扩展名的文件

> ID：13897677
> 
> 赞同：2
> 
> 时间：2012-12-16T01:05:05.077
> 
> 标签：requirejs, js-amd

是否有任何干净的方法来加载具有 js 扩展名而不是 AMD 内容的文件？

我使用*enforceDefine*配置来确保我的实际 AMD 代码在开发时工作。

到目前为止，我已经设法组合了一个将*enforceDefine*设置为 false 的插件，因此我可以像这样加载第 3 方库`require(['noamd!handlebars'])`：这对我来说似乎并不太难，但我想知道是否有更好的方法。

我目前正在测试*noext*插件，它完成了它的工作，但也以一种 hacky 的方式。我注意到它将 noext 参数两次应用于 url ( `test.txt?noext=1&noext=1`)。我可以忍受，但最好我想摆脱所有额外的参数。可以这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T11:24:24.373

要加载不是 JS 的文件（例如`.handlebars`, `.mustache`），那么[文本插件](http://requirejs.org/docs/download.html#text)将适合您的目的。

要加载普通的 js 文件，您可以使用 RequireJS 作为脚本加载器：

```
require(['full/path/to/file.js'], function(){
    // Fired when file is loaded but if non AMD
    // no value will be passed to this function
}); 
```

如果您想将非 AMD 文件视为一个模块，那么[您可以使用`shim`配置](http://requirejs.org/docs/api.html#config-shim)来实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-11T09:00:31.520

您可以在末尾附加 ?MEH=BLAH 以停止 .js 附加

例如

```
requirejs.config({
    paths: {
        "dynamicstripconfig": "../php/domain/config.php?dynamic=1"
    }
}); 
```

此外还有一个插件，但不支持路径-> [https://github.com/millermedeiros/requirejs-plugins](https://github.com/millermedeiros/requirejs-plugins)

添加了修复路径支持的问题-> [https://github.com/millermedeiros/requirejs-plugins/issues/47](https://github.com/millermedeiros/requirejs-plugins/issues/47)

如果您的文件实际上不是动态 js 文件，请使用文本插件 -> [https://github.com/millermedeiros/requirejs-plugins](https://github.com/millermedeiros/requirejs-plugins)

# python - Tkinter 提醒 MessageBox 出现

> ID：13897679
> 
> 赞同：-1
> 
> 时间：2012-12-16T01:05:51.367
> 
> 标签：python, tkinter, messagebox

我正在尝试使用 Tkinter 创建提醒。

我可以给适当的时间，同时更改标签的文本，但我也想显示一个 MessageBox。

我的代码如下：（我收到一个错误，如：“TkMessageBox 未定义”）

```
 from Tkinter import *
    import time

    form1=Tk()
    form1.title('Project')
    form1.resizable(width=FALSE, height=FALSE)
    form1.geometry('1032x680+200+200')

    time1 = ''
    clock = Label(form1, font=('times', 20, 'bold'), bg='red')
    clock.pack(fill=BOTH, expand=1)
    def tick():
        global time1
        time2 = time.strftime('%H:%M:%S')
        if time2 != time1:
            time1 = time2
            clock.config(text=time2)
        clock.after(200, tick)
    tick()
    reminder = Label(form1, font=('remind', 20, 'bold'),bg='green')
    reminder.pack(fill=BOTH , expand=1)
    reminder.config(text="o reminder")
    def hour():
        global x,y,z
        x=float(time.strftime("%H"))
        y=float(time.strftime("%M"))
        z=float(time.strftime("%S"))
        if y==37: reminder.config(text="First")
        if y==38:                       
            reminder.config(text="Second") 
            tkMessageBox.showinfo(text='Something',message='Else') 
        reminder.after(200,hour)

    hour()

    form1.mainloop() 
```

如果我评论：

```
 tkMessageBox.showinfo(text='Something',message='Else') 
```

..一切都好。

但是我怎样才能显示一个消息框...？？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:17:12.473

`tkMessageBox`实际上是它自己的模块。您需要单独导入 tkMessageBox。

```
import tkMessageBox 
```

此外，您似乎需要将 Tkinter 循环传递给消息框：

```
tkMessageBox.showinfo(form1,text='Something',message='Else') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-18T18:38:04.327

我只是有同样的问题。诀窍是直接从 tkinter 包中导入，如下所示：

```
import tkinter.messagebox as MB 
```

然后为了使用消息框：

```
MB.showinfo("heading text","body message") 
```

我希望这有帮助！！

# php - 合并两个表

> ID：13897680
> 
> 赞同：0
> 
> 时间：2012-12-16T01:05:51.607
> 
> 标签：php, mysql, sql

我有两张桌子：`Team`和`player`。团队玩家 ID 表。当我运行工具 url，播放器的 url 和 name 表时，我想取。

球员桌

播放器

```
p_id p_name p_url
1 伊克尔卡西利亚斯 iker-casillas
2 梅苏特厄齐尔梅苏特-厄齐尔
3 哈维哈维
4 维克多·瓦尔德斯
```

团队

```
t_id t_name t_url 播放器

1 巴塞罗那足球俱乐部 3,4
2 皇家马德里 CF real-madrid-cf 1,2
```

团队 url 正在运行，玩家想要打印名称和 url。但我无法得到结果。我犯错误的地方。

```
include('confing.php');

$t_url = $_GET["t_url"];
$sql = mysql_query("select player.p_name,player.p_url from player,team where player.t_id = team.t_name and team.t_url='.$t_url.'");

while($write = mysql_fetch_assoc($sql)) {
    echo '<a href="'.$write['t_url'].'">'.$write['t_name'].'</a>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:14:51.960

你需要使用`FIND_IN_SET`

```
SELECT  b.*
FROM    team a
        INNER JOIN player b
            ON FIND_IN_SET(b.p_ID, a.player) <> 0
WHERE   a.t_url = 'valueHere' 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/33167/2)

还有一件事，你的代码很容易受到攻击`SQL Injection`，请阅读下面的文章以防止它

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

# asp.net-mvc - 如何正确实现分页？

> ID：13897682
> 
> 赞同：0
> 
> 时间：2012-12-16T01:06:10.043
> 
> 标签：asp.net-mvc, wcf, pagination, sql-server-2012

我目前正在开发一个 MVC4 应用程序，该应用程序访问一组提供内容的 wcf 服务。

我有一个列出产品的页面。此页面具有称为无限滚动的分页功能，因此当您向下滚动页面时，会加载产品。

我想知道实现这种分页功能的最佳方法是什么。数据源是sql server。我看到的选项是：

1.  在 sql server 2012 层分页 - 仅返回所需的记录集并通过 wcf 将其反馈回堆栈并输入到 MVC 应用程序以显示
2.  作为选项 1，还包括在 WCF 层进行缓存，以便长期缓存记录集。这将意味着虽然一些记录集将存储在缓存中，而不是一个大的
3.  缓存所有数据，并对缓存项进行分页，从 WCF 服务缓存数据返回子集

注意：我使用 asp.net 进行缓存。

因此，我正在寻找有关此最佳实践的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:26:33.650

你可能的数据集有多大？我认为这将是缓存的问题，如果可以将其全部保存在内存中，那么请执行选项 3，我看不到选项 2 的意义，就好像您长期缓存一样，您很可能会得到无论如何都缓存一切。如果你想实现#2，我会缓存一小段时间（时间范围取决于网站的繁忙程度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T15:19:34.777

当我出于测试目的尝试此操作时，我遵循了本指南：[http ://www.gavindraper.co.uk/2012/05/10/infinite-scroll-with-asp-net-mvc-4/](http://www.gavindraper.co.uk/2012/05/10/infinite-scroll-with-asp-net-mvc-4/)

我不知道这是否是实现无限滚动的最佳方式，但它至少是一个概念证明。

# javascript - 制作下拉导航菜单不影响其他元素定位

> ID：13897683
> 
> 赞同：0
> 
> 时间：2012-12-16T01:06:18.310
> 
> 标签：javascript, jquery, css

想知道是否有更好的方法来处理我正在尝试做的事情。我制作了一个基本的下拉导航菜单，其中菜单栏是 li 和类元素，其高度设置为隐藏，溢出属性设置为隐藏，然后在高度上设置动画以在悬停时显示动画的“下拉”部分用鼠标结束。然而，我发现当菜单元素与它们发生碰撞时，其他网页元素（如主要内容）会被推送并重新定位。我通过使受影响的元素绝对定位来临时解决这个问题，但我不禁觉得有一种更好、更有效的方法来解决这个问题。

有什么办法可以使缺少更好单词的导航元素在定位方面被“忽略”？

这是在实践中 - 第一个“文章”区域已被绝对定位 - [http://gamearticlesite.bbdesigns.ca/index.html](http://gamearticlesite.bbdesigns.ca/index.html)

编码：

jQuery

```
 //When mouse rolls over  
    $("li.extend").mouseover(function(){  
        $(this).stop().animate({height:'250px'},{queue:false, duration:500})  
    });  

    //When mouse is removed  
    $("li.extend").mouseout(function(){  
        $(this).stop().animate({height:'35px'},{queue:false, duration:500})  
    }); 
```

CSS：

```
#headerNav ul{
    list-style-type: none;
    color:#efefef;  
    margin:0;
    margin-left:75px;
    padding:0;  
}

#headerNav ul li{
    width:125px;  
    height:35px;  
    float:left;  
    color:#efefef;  
    text-align:center;      
    margin-left:10px;
    margin-right:10px;
    overflow:hidden;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T08:27:22.567

The correct answer was that yes, Absolute Positioning is the way to solve this, but to use it on the navigation menu. In the example posted, on the ul element, not the individual li elements that would animate as that could cause issues with positioning of the li elements within the ul element.

Setting the position to position:absolute for the ul and giving a z-index property to make sure it's 'on top' of the elements it clashes with made everything work out just fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T06:09:44.193

利用

```
float:left 
```

或者

```
position:absolute 
```

# c++ - C++：我在做什么的名称和链接？

> ID：13897685
> 
> 赞同：0
> 
> 时间：2012-12-16T01:06:35.723
> 
> 标签：c++, templates, linkage

寻找这种模板特化的正式名称和链接类型，我们特化一个模板只是为了特化类模板中单个方法的实现。

```
template <class T>
class Foo
{
public:
    void f() 
    {
        // default method implementation
    }
};

// What is the default linkage of this function (I'm guessing 
// external based on basic function template specializations), 
// and what am I doing called? (method specialization of a class 
// template?)
template <> 
void Foo<int>::f()
{
     // method implementation for Foo<int>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:20:49.760

```
Foo<int> f1; f1.f(); //Use implementation for Foo<int>, i.e. the specialized one.
Foo<double> f2; f2.f(); //Use the default implementation. 
```

这种情况背后的术语称为显式专业化。编译器将选择它可以找到的“最佳”匹配模板。确定“最佳”匹配模板的过程有点复杂。有关详细信息，您可以参考《C++ 模板：完整指南》一书。

# java - Neo4j 节点索引：如何更改 Lucene 默认相似度？

> ID：13897686
> 
> 赞同：0
> 
> 时间：2012-12-16T01:06:38.623
> 
> 标签：java, lucene, neo4j, similarity

我正在使用 Neo4j (1.9) 和 lucene core 3.5，通过 neo4j-lucene-index 库提供的支持。在我的代码中，我创建了一个新的节点索引，如下所示：

```
 HashMap<String, String> stringMap = new HashMap<String, String>();
    stringMap.put("type", "fulltext");
    stringMap.put(IndexManager.PROVIDER, "lucene");
    stringMap.put("to_lower_case", "false");
    stringMap.put("similarity", MySimilarity.class.getName());
    stringMap.put("analyzer", MyAnalyzer.class.getName());
    simpleIndex = (LuceneIndex<Node>) template.getGraphDatabaseService()
            .index().forNodes("simple-index", stringMap); 
```

并通过多字段查询的方式查询节点索引：

```
 Analyzer analyzer = new MyAnalyzer();
    Query query = null;
    try {
        query = MultiFieldQueryParser.parse(Version.LUCENE_35,
                queriesArray, fieldsArray, flagsArray, analyzer);
    } catch (ParseException e) {
        e.printStackTrace();
        return;
    }
    if (query == null)
        return;
    QueryContext qc = new QueryContext(query).sortByScore();
    IndexHits<Node> hits = simpleIndex.query(qc); 
```

如何将用于按分数排序的 Similarity 实现更改为 MySimilarity 类（它扩展了 DefaultSimilarity 并覆盖了它的一些方法）？报告的查询始终使用 DefaultSimilarity 并且我无法找到任何挂钩来设置在我的查询期间激活的搜索器使用的相似性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:25:04.473

在查询期间不使用提供的相似性这一事实是一个错误，应该修复。创建[https://github.com/neo4j/neo4j/issues/375](https://github.com/neo4j/neo4j/issues/375)来跟踪它。

# php - PHP 中 :: 和 -> 的区别？

> ID：13897687
> 
> 赞同：5
> 
> 时间：2012-12-16T01:06:41.250
> 
> 标签：php

> **可能重复：** [PHP 中 ::（双冒号）和 ->（箭头）有什么区别？](https://stackoverflow.com/questions/3173501)
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139)

我对 PHP 很满意，但只是程序性的。所以我决定冒险学习面向对象。我掌握了它，并且非常喜欢它。

在 PHP.net 上，我一直将面向对象视为`mysqli::query`.

但是，我看到的每个示例都使用`mysqli->query`了我一直使用的示例。

今天，我碰到一个实际看到`::`用在课堂上的例子。

`::`所以现在，我的问题是，和之间有区别`->`吗？`"`就像和之间的区别`'`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T01:07:44.243

`::`用于调用静态方法，`->`用于实例方法

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T01:21:47.067

**::**是“[范围解析运算符](http://no.php.net/manual/en/language.oop5.paamayim-nekudotayim.php)”（也恰当地命名为 Paamayim Nekudotayim），*通常*用于执行静态（这意味着您将在类本身的上下文中调用方法，而不是对象）方法调用。但是，此规则也有例外，例如尝试从覆盖的方法调用父方法：

```
parent::foo(); // uses same context as when the method itself was called 
```

它还允许您引用类的静态属性，例如静态属性和常量。

```
ClassName::FOO; 
ClassName::$property = "bar"; 
```

**但是， ->**用于引用实际对象实例中的属性或方法，并且始终需要在运算符左侧的对象实例（例如 $this）。

# umbraco - 在单击保存按钮后和保存更改之前，在内容选项卡中获取已更改的节点的未保存属性值。乌姆布拉科

> ID：13897688
> 
> 赞同：2
> 
> 时间：2012-12-16T01:06:41.730
> 
> 标签：umbraco

**更新：**

我想在 BackOffice 的内容选项卡上获取在单击保存按钮后和以编程方式保存更改之前已更改的节点属性值。

该节点可以包含许多属性。单击保存按钮时，我想首先获取节点属性的新更改值。我认为 Umbraco 应该有 API 来获取服务器端的 API。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:02:21.780

您想要连接到 IApplicationEventHandler 类中的 Document.BeforeSave 方法。像这样（假设您将 bodyText 从“apple”更改为“orange”）：

```
using umbraco.cms.businesslogic.web;
using Umbraco.Core;
using Umbraco.Web;

namespace ClassLibrary1
{
    public class Class1 : IApplicationEventHandler
    {
        public void OnApplicationStarted(UmbracoApplication httpApplication, ApplicationContext applicationContext)
        {
            Document.BeforeSave += new Document.SaveEventHandler(Document_BeforeSave);
            Document.AfterSave += new Document.SaveEventHandler(Document_AfterSave);
        }

        void Document_BeforeSave(Document sender, umbraco.cms.businesslogic.SaveEventArgs e)
        {
            // your code goes here!
            sender.getProperty("bodyText").Value // returns apple
        }

        void Document_AfterSave(Document sender, umbraco.cms.businesslogic.SaveEventArgs e)
        {
            // your code goes here!
            sender.getProperty("bodyText").Value // returns orange
        }

        public void OnApplicationStarting(UmbracoApplication httpApplication, ApplicationContext applicationContext)
        {
            // unused
        }

        public void OnApplicationInitialized(UmbracoApplication httpApplication, ApplicationContext applicationContext)
        {
            // unused
        }

    }
} 
```

我在 Umbraco 4.11 中对此进行了测试

干杯

乔纳森

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:34:51.840

您可以做的是使用 jquery 事件处理程序，该处理程序针对您要检查更改的 umbraco 管理员中的字段。此示例将通过查找要监视的 umbraco 字段的标签来工作，然后添加一个 jquery 事件处理程序，该处理程序将在与标签同级的字段发生更改时触发 - 此示例适用于对“名称”的任何更改' 每个节点的“属性”选项卡上的字段。不同的字段类型会以不同的方式保存值，因此 $(this).val() 通常应该适用于大多数 - 但不是所有字段类型。

将其放到 \umbraco\editcontent.aspx 的末尾

```
 <script type="text/javascript">
        $(document).ready(function () {
            $("div.propertyItemheader:contains('Name') + div.propertyItemContent").keyup(function () {
                alert("field changed");
            });

        });
</script> 
```

# css - 带有 CSS 的向右滑动输入框

> ID：13897692
> 
> 赞同：0
> 
> 时间：2012-12-16T01:07:14.280
> 
> 标签：css

有没有办法让输入框跨越其父项的*右*边缘之间的距离并尽可能向左移动？

我的意思是，假设我有

```
<div>
    <span>a</span>
    <span>b</span>
    ...
    <input />
</div> 
```

我想`input`改变宽度，这样如果没有`span`s，`input`就会延伸到整个s `div`，但如果有跨度，它会从左边收缩？我会`span`从 javascript 添加 s 。

是否可以在纯 CSS 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T02:33:15.957

是的，从技术上讲。

如果只使用 CSS，您需要使用新的 flexbox 模型。

但是，支持[不是很大](http://caniuse.com/flexbox)。

```
div {
  width: 30em;
  display: -webkit-flex;
  display: flex;

input {
  width: 100%;
  flex: 1;
} 
```

在 Chrome 中试试这个[演示。](http://jsfiddle.net/kH6kU/)

对于不支持候选推荐的其他浏览器的支持，最好的选择是使用一点 Javascript 来根据跨度数添加基于百分比的宽度。

# templates - 如何在 ui:composition 模板子项中使用 f:loadBundle

> ID：13897693
> 
> 赞同：1
> 
> 时间：2012-12-16T01:07:16.407
> 
> 标签：templates, jsf-2, facelets

我有一个基于模板的“test.xhtml”：

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        template="/templates/BasicTemplate.xhtml">
        <f:loadBundle basename="label" var="label" />
...
    <h:commandButton value="#{label.buttonname}" ...></h:commandButton>
... 
```

文件“label.properties”位于 WEB-INF/classes 中。但是当我在浏览器中加载它时，没有替换，而是在我的按钮上得到了“label.buttonname”而不是预期的名称。仅当我将其与模板一起使用时才会出现此问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T13:20:02.493

我明白了：这是错误的（！）。LoadBudle 在组合和定义标签之间。

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="/templates/BasicTemplate.xhtml">
    <f:loadBundle basename="label" var="label" /> <--- WRONG place!!!
    <ui:define name="content">
        <h:commandButton value="#{label.buttonname}" ...></h:commandButton>
    </ui:define> 
```

这可以：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="/templates/BasicTemplate.xhtml">
    <ui:define name="content">
        <f:loadBundle basename="label" var="label" />
        <h:commandButton value="#{label.buttonname}" ...></h:commandButton>
    </ui:define> 
```

# php - php exec() 和 shell_exec()

> ID：13897696
> 
> 赞同：0
> 
> 时间：2012-12-16T01:08:00.607
> 
> 标签：php

我目前有一个我的网络服务器提供的 php 页面。为了显示我需要在页面上显示的所有信息，我需要从外部 python 脚本输出。所以我一直在使用 php 的 exec() 命令来执行 python 脚本并将输出捕获到一个字符串数组中，如下所示：

```
$somequery = $_GET['query'];
$result = exec("python /var/www/html/query/myscript.py ".somequery."");

//some for loop to loop through entries in result and echo them. 
```

但是，永远不会打印任何条目，但是当我直接在服务器的控制台上运行命令时，它会正确输出。我尝试在我正在执行的网页上回显命令，这是正确的命令。我认为唯一可能是 exec() 不会在 php 程序完成之前停止其余程序的执行，导致循环我打印出发现 $result 为空的条目。

如何确保 exec() 在我的 php 脚本的其余部分之前完成执行？php.ini 中是否有我需要更改的设置？我不完全确定。

编辑：我尝试运行和存储 shell_exec("echo hello"); 的输出 并打印该输出，它现在打印。但是，当运行我的命令需要几秒钟的时间时，程序在进入下一行之前永远不会完成执行它。

编辑 2：我在以下帖子中找到了我的解决方案[https://stackoverflow.com/a/6769624](https://stackoverflow.com/a/6769624)我的问题与我正在使用的 numpy python 包有关，我只需要在 /usr/lib64/python2 中注释掉该行.7/ctypes/ **init** .py 就像海报一样，我的脚本输出正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:31:02.837

获取 shell 输出的正确方法是这样的：

```
exec("python /var/www/html/query/myscript.py ".somequery."", $result);

var_dump($result); //output should be in here 
```

试试看。

# iphone - 在视图之间连接委托的问题

> ID：13897697
> 
> 赞同：0
> 
> 时间：2012-12-16T01:08:23.447
> 
> 标签：iphone, ios, delegates

我正在尝试将 KGModal 中的代表连接到 MainView，但它不起作用。基本上我在[KGModal (Github)](https://github.com/kgn/KGModal)中显示 SecondViewController ，当关闭 KGModal 视图时，我希望 MainView 通过委托知道这一点。有任何想法吗？（抱歉解释不好）。无法让它工作。

KGMdal.h

```
@class KGModal;
@protocol KGModalDelegate <NSObject>
- (void)modalControllerDidFinish:(KGModal *)controller;
@end

@interface KGModal : NSObject {
    UIButton *dismissButton;
}

@property (weak, nonatomic) id <KGModalDelegate> delegate; 
```

KGModal.m

```
-(void)dismissButtonPressed:(id)sender {
        [self.delegate modalControllerDidFinish:self];
        [self hideAnimated:self.animateWhenDismissed];   
} 
```

主视图.h

```
@interface MainView : UIViewController <KGModalDelegate> 

@property(weak) id<KGModalDelegate> delegate; 
```

主视图.m

```
- (void)modalControllerDidFinish:(KGModal *)controller{ 
    NSLog(@"Dismissed.");
}

-(IBAction)modalShowing {

SecondViewController *view2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];

        KGModal *kg = [[KGModal alloc] init];
        kg.delegate = self;

        [[KGModal sharedInstance] showWithContentView:view2.view andAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:32:03.597

问题解决了。我将委托设置为 KGModal 的不同实例。

```
KGModal *kgm = [KGModal sharedInstance];

kgm.delegates = self;
[kgm showWithContentView:view2.view andAnimated:YES]; 
```

感谢热舔！

# php - Opencart - 自定义新订单提醒邮件

> ID：13897699
> 
> 赞同：0
> 
> 时间：2012-12-16T01:08:26.393
> 
> 标签：php, opencart

我想更改生成新订单时发送给店主的电子邮件的 php/tpl。

我找不到执行此操作所需的文件，而且 google + opencart 论坛也没有多大帮助。如果有人能指出我正确的方向，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:05:45.927

模板文件位于`/catalog/view/theme/your-theme-name/template/mail/`被调用`order.tpl`

# qt - 使用 QList 填充 QTableView。当视图中的某些内容发生更改时，我如何将其取回数据中？

> ID：13897706
> 
> 赞同：2
> 
> 时间：2012-12-16T01:08:59.767
> 
> 标签：qt, tableview

我有一个数据矩阵，我只是将它存储为 QStringLists 的 QList，所有这些都包含相同数量的 QStrings。这样，数据看起来几乎就像一个电子表格。

我使用 QTableView 将这些数据呈现给用户：

```
void DialogwitQTableView::setData(QList<QStringList> s)
{
    /* Create the data model */
    // 1\. give it some headers
    QStandardItemModel model = new QStandardItemModel(s.count(),25,this); //x Rows and 25 Columns
    model->setHorizontalHeaderItem(0, new QStandardItem(QString("Column 1")));
    model->setHorizontalHeaderItem(1, new QStandardItem(QString("Column 2")));
     // ...
    model->setHorizontalHeaderItem(24, new QStandardItem(QString("Column 25")));

    // 2\. populate the model with the data

    for(int i = 0; i < s.count() ; i++)
    {
        for(int j = 0; j < s[i].count() ; j++)
            model->setItem(i,j,new QStandardItem(QString(s[i][j])));
    }
    ui->NameOfTheTableView->setModel(model);
} 
```

现在，如果用户想要更改一些数据，他只需双击对话框中的 QTableView 并编辑他想要的内容。

我如何在数据中也获得该编辑？如何使用该新信息调整 QStringList？

如果我搜索文档，我主要会找到链接到数据库的 QTableView，但我看不出这将如何与内存中的简单数据结构一起工作。如果我转到 QtDesigner 并单击 TableView 的“转到插槽”，我也看不到名为“datachanged”的插槽或类似的东西。

有什么想法吗？我觉得很困，我可能正在概述一些东西，非常欢迎任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:21:18.423

看文档，一个QTableView继承了QAbstractItemView的6个信号

[http://doc.qt.digia.com/qt/qabstractitemview.html#signals](http://doc.qt.digia.com/qt/qabstractitemview.html#signals)

此类具有用于捕获编辑和编辑触发器的各种功能。

一旦您可以捕捉到数据何时更改，如果您使用的是 MVC 视图，您可以将其重新提交回您的模型。我相信有很多例子。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T01:31:43.197

> 如果我搜索文档，我主要会找到链接到数据库的 QTableView，但我看不出这将如何与内存中的简单数据结构一起工作。

`QTableView`是 Qt 的[模型/视图框架](http://doc.qt.digia.com/qt/model-view-programming.html)的一部分。有很多模型视图的例子。

> 我如何在数据中也获得该编辑？如何使用该新信息调整 QStringList？

至少存在以下解决方案：

1.  `QStandardItemModel`您可以通过`item`方法获取所有数据。

2.  连接到`QStandardItemModel::itemChanged`信号。

3.  您可以通过子类化创建自己的模型（我建议基于`QAbstractTableModel`）并实现几种方法（`data`, `setData`+ 几种实用方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-10T14:53:51.243

我认为对于更复杂的情况，最好使用抽象类，在这种情况下更具体地说是 QAbstractTableModel。

查看这个文件，我只是将 Contact 替换为 StringList 并更改了 getter 和 setter。看看这个：

[https://doc.qt.io/qt-5/qtwidgets-itemviews-addressbook-tablemodel-cpp.html](https://doc.qt.io/qt-5/qtwidgets-itemviews-addressbook-tablemodel-cpp.html)

```
TableModel::TableModel(QObject *parent) : 
    QAbstractTableModel(parent)
{
}

TableModel::TableModel(QList<QStringList> stringLists, QObject *parent) : 
    QAbstractTableModel(parent), 
    stringLists(stringLists)
{
}

int TableModel::rowCount(const QModelIndex &parent) const
{
    Q_UNUSED(parent);
    return stringLists.size();
}

int TableModel::columnCount(const QModelIndex &parent) const
{
    Q_UNUSED(parent);
    return 2; // put the amount of columns here
}

QVariant TableModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid()) return QVariant();

    if (index.row() >= stringLists.size() || index.row() < 0)  return QVariant();

    if (role == Qt::DisplayRole) {
        const auto &strings = stringLists.at(index.row());

        if (index.column() == 0)
            return strings[0];
        else if (index.column() == 1)
            return strings[1];
    }
    return QVariant();
}
QVariant TableModel::headerData(int section, Qt::Orientation orientation, int role) const
{
    if (role != Qt::DisplayRole)
        return QVariant();

    if (orientation == Qt::Horizontal) {
        switch (section) {
            case 0:
                return tr("String 1");

            case 1:
                return tr("String 2");

            default:
                return QVariant();
        }
    }
    return QVariant();
}

bool TableModel::insertRows(int position, int rows, const QModelIndex &index)
{
    Q_UNUSED(index);
    beginInsertRows(QModelIndex(), position, position + rows - 1);

    for (int row = 0; row < rows; ++row)
        stringLists.insert(position, { QString(), QString() });

    endInsertRows();
    return true;
}

bool TableModel::removeRows(int position, int rows, const QModelIndex &index)
{
    Q_UNUSED(index);
    beginRemoveRows(QModelIndex(), position, position + rows - 1);

    for (int row = 0; row < rows; ++row)
        stringLists.removeAt(position);

    endRemoveRows();
    return true;
}
bool TableModel::setData(const QModelIndex &index, const QVariant &value, int role)
{
    if (index.isValid() && role == Qt::EditRole) {
        int row = index.row();

        auto strings = stringLists.at(row);

        if (index.column() == 0)
            strings[0] = value.toString();
        else if (index.column() == 1)
            contact[1] = value.toString();
        else
            return false;

        stringLists.replace(row, contact);
        emit dataChanged(index, index, {role});

        return true;
    }

    return false;
}
Qt::ItemFlags TableModel::flags(const QModelIndex &index) const
{
    if (!index.isValid()) return Qt::ItemIsEnabled;

    return QAbstractTableModel::flags(index) | Qt::ItemIsEditable;
}

QList<QStringList> TableModel::getStringLists() const
{
    return stringLists;
} 
```

我还强烈建议您阅读以下内容： [https ://doc.qt.io/qt-5/modelview.html](https://doc.qt.io/qt-5/modelview.html)

希望能帮助到你。

# maven - maven 传递依赖在 jetty:run 中丢失

> ID：13897709
> 
> 赞同：0
> 
> 时间：2012-12-16T01:10:12.873
> 
> 标签：maven, maven-jetty-plugin, transitive-dependency

我有一个[大型项目](http://www.powertac.org)，需要通过命令行界面或网络应用程序使用。核心服务器部署为 10 个单独的 jar。该网络应用程序当前部署为 .war，但这是一个巨大的文件，它复制了所有单独的部署，并且使更新模块变得非常痛苦 - 每次更新任何内容时都必须重新部署这个巨大的 .war 文件，很多时候我们不使用网络应用程序。

所以我试图部署一场“瘦身战争”，没有依赖。但是，没有 .ear 文件来携带它们，所以在运行时，我解压了瘦战争并使用 jetty:run，classesDirectory 和 webAppSourceDirectory 指向解压后的内容。这一切似乎都奏效了。问题是来自 web-app 模块的依赖项没有进入 jetty:run 的类路径。当我在 web-app 模块中使用 jetty:run 时，类路径包括所有父、本地和传递依赖项。但是当我在依赖于 web-app 模块的“分发”项目中使用 jetty:run 时，进入类路径的唯一依赖项来自父模块，而不是来自 web-app 模块。请注意，web-app 模块是分发模块中唯一的本地依赖项。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:33:25.683

如果我对您的理解正确，那么您的问题是[Maven 没有解决 war dependencies 的传递依赖项](http://jira.codehaus.org/browse/MNG-1991)。

# php - Disqus API 创建帖子错误

> ID：13897710
> 
> 赞同：2
> 
> 时间：2012-12-16T01:10:23.820
> 
> 标签：php, disqus

我在使用 Disqus API 尝试评论在 tumblr 上发表的一篇文章时遇到问题。这是代码：

```
<?php
    ini_set('display_errors', 'on');

    $thread="XXXXXXXXX"; // e.g., 455718495 — you'll need to also create a $forum and pass that if you know only the thread's URL or identifier rather than the ID
    $api="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"; // Generate one at http://disqus.com/api/applications/ -- Secret key is required for anonymous comment posting
    $message="Hello world."; // this is the content of the comment, i.e., what you'd normally type in the postbox
    $author_email="mail.user@mail.com"; // optional, including this will still make the comment a guest comment, but it will now be claimable 
    $author_name="user"; // optional, can be any display name you like
    $fields_string=""; // DO NOT EDIT

    // set POST variables
    $url = 'http://disqus.com/api/3.0/posts/create.json'; // full documentation at http://disqus.com/api/docs/posts/create/
    $fields = array(
        'api_secret'=>urlencode($api), // change to api_key when using a public key
        'thread'=>urlencode($thread),
        'message'=>urlencode($message),
        'author_email'=>urlencode($author_email),
        'author_name'=>urlencode($author_name),
    );

    foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
    rtrim($fields_string,'&');
    $ch = curl_init();
    curl_setopt($ch,CURLOPT_URL,$url);
    curl_setopt($ch,CURLOPT_POST,count($fields));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

    // execute POST
    $result = curl_exec($ch);

    // close connection
    curl_close($ch);

?> 
```

我传递了所需的值，如 api_key、您要评论的消息、线程 ID、邮件和用户名，当您运行代码时 php 给我以下错误：

```
{"code": 4, "response": "You must be authenticated to perform this action"} 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:59:24.130

默认情况下，Disqus API 应用程序现在设置为使用 OAuth，因此您必须在此示例中添加一个“access_token”参数。有两种获取访问令牌的方法：

1.  使用我们的 OAuth 流程并让用户使用他们的 Disqus 帐户登录——您不会包含`author_name`或`author_email`如果您使用此方法
2.  使用您的网站所有者访问令牌（对客人评论执行此操作，如上面的示例）

这是关于 OAuth 与 Disqus 一起使用的文档：http: [//disqus.com/api/docs/auth/](http://disqus.com/api/docs/auth/) - 请注意，站点所有者的访问令牌可以在您的应用程序概述中找到：http: [//disqus.com/api /应用程序/](http://disqus.com/api/applications/)

这是一个如何让用户进行身份验证的示例，然后为您提供访问令牌：[https ://github.com/disqus/DISQUS-API-Recipes/tree/master/php/oauth](https://github.com/disqus/DISQUS-API-Recipes/tree/master/php/oauth)

获得访问令牌后，脚本应如下所示：

```
<?php
    ini_set('display_errors', 'on');

    $thread="XXXXXXXXX"; // e.g., 455718495 — you'll need to also create a $forum and pass that if you know only the thread's URL or identifier rather than the ID
    $api="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"; // Generate one at http://disqus.com/api/applications/ -- Secret key is required for anonymous comment posting
    $message="Hello world."; // this is the content of the comment, i.e., what you'd normally type in the postbox
    $author_email="mail.user@mail.com"; // optional, including this will still make the comment a guest comment, but it will now be claimable 
    $author_name="user"; // optional, can be any display name you like
    $fields_string=""; // DO NOT EDIT
    $access_token="YOUR_ACCESS_TOKEN";

    // set POST variables
    $url = 'http://disqus.com/api/3.0/posts/create.json'; // full documentation at http://disqus.com/api/docs/posts/create/
    $fields = array(
        'api_secret'=>urlencode($api), // change to api_key when using a public key
        'thread'=>urlencode($thread),
        'message'=>urlencode($message),
        'author_email'=>urlencode($author_email),
        'author_name'=>urlencode($author_name),
        'access_token'=>urlencode($access_token),
    );

    // rest of script ...
?> 
```

# rdf - 我在哪里测试我用 SPARQL 编写的 RDF 的查询

> ID：13897712
> 
> 赞同：20
> 
> 时间：2012-12-16T01:10:37.903
> 
> 标签：rdf, sparql, jena

我是语义网技术的初学者，我的问题可能是一个非常基本的问题，但我真的很难弄清楚。我有一个从 XML 创建的 RDF 文件，并使用 w3.org RDF VALIDATOR 对其进行了验证。我的问题是如何使用 SPARQL 对我的 RDF 文档运行查询。在线资源[http://demo.openlinksw.com/sparql](http://demo.openlinksw.com/sparql)不起作用，我不知道什么或如何找到有关此的信息。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-17T02:08:04.440

您可以使用[Fuseki](https://jena.apache.org/documentation/fuseki2/)**设置您自己的本地 SPARQL 端点**。Fuseki 是[Apache Jena 项目](https://jena.apache.org/index.html)的一部分，但可以作为独立应用程序下载（在上面的链接中）。

使用**Fuseki**，您可以（除其他外）

1.  加载本地 RDF 数据集
2.  使用该数据集
    *   通过（默认情况下）将此数据公开为**SPARQL 端点**`http://localhost:3030/`
    *   使用基于**Web 的查询**表单`http://localhost:3030/sparql.html`

这意味着您可以使用 Fuseki 来简单地使用基于 Web 的表单查询您的数据集，或者使用任何通过 http 查询 SPARQL 端点的应用程序来查询您的数据集。

*就个人*而言，我目前正在开发一个通过 SPARQL 端点分析数据集的应用程序。我使用 Fuseki 设置一个本地 SPARQL 端点，其中包含可以运行和测试我的应用程序的示例数据。

* * *

## 如何？

Fuseki 的基本功能相当容易使用。下面的行将启动服务器（SPARQL 端点）。

```
java -jar fuseki-server.jar --config=yourConfig.ttl 
```

该文件`yourConfig.ttl`是一个 RDF 文件（海龟序列化格式）。要设置一个将 RDF 文件加载到内存的基本服务器，只需写入（*至少替换数据集文件的路径*）：

```
# Attention: I have omitted the @prefix declarations

[] rdf:type fuseki:Server ;
   fuseki:services (
 <#yourService>
) .

<#yourService> rdf:type fuseki:Service ;
fuseki:name                     "yourService" ;
fuseki:serviceQuery             "query" ;
fuseki:serviceReadGraphStore    "get" ;
fuseki:dataset                   <#yourDataset> ;
.

<#yourDataset>    rdf:type ja:RDFDataset ;
rdfs:label "a label for your dataset" ;
ja:defaultGraph 
  [ rdfs:label "yourDataset.rdf" ;
    a ja:MemoryModel ;
    ja:content [ja:externalContent <file:Path/To/yourDataset.rdf> ] ;
  ] ;
. 
```

* * *

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T18:39:38.557

There are several tools you can use to do this. Of course, there are the RDF frameworks like Apache Jena or OpenRDF Sesame (Java), or dotNetRdf (.Net), to name just three. Most if not all offer installation and getting started instructions. These are powerful solutions that you will definitely need if you go further with SW technologies and need to build your own code on top of RDF data sources.

But for trying out some simple queries, it's perhaps easier to try something like the [Sesame Windows Client (SWC) tool](http://sourceforge.net/projects/sesamewinclient/). This is a simple graphical Windows desktop application that you can use to create a repository, load data in it, and then do SPARQL queries, without any programming or advanced configuration (disclaimer: I wrote this tool).

# c# - 如何从 C# 列表中删除空行 ?

> ID：13897714
> 
> 赞同：8
> 
> 时间：2012-12-16T01:11:15.437
> 
> 标签：c#

我正在尝试在 C# 中创建一个例程，对添加到多行文本框中的列表进行排序。完成后，可以选择删除所有空行。有人能告诉我我会怎么做吗？这是我到目前为止所拥有的，但是当我选择框并单击排序时它根本不起作用：

```
private void button1_Click(object sender, EventArgs e)
{
    char[] delimiterChars = { ',',' ',':','|','\n' };
    List<string> sortBox1 = new List<string>(textBox2.Text.Split(delimiterChars));

    if (checkBox3.Checked) //REMOVE BLANK LINES FROM LIST
    {
        sortBox1.RemoveAll(item => item == "\r\n");
    }

    textBox3.Text = string.Join("\r\n", sortBox1);
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-16T01:13:58.600

如果您在 上拆分字符串`'\n'`，`sortBox1`则不会包含包含`\n`. 不过，我只会使用[`String.IsNullOrWhiteSpace`](http://msdn.microsoft.com/library/system.string.isnullorwhitespace.aspx)：

```
sortBox1.RemoveAll(string.IsNullOrWhiteSpace); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T01:17:36.103

您忘记对行进行排序：

```
sortBox1.Sort(); 
```

空行不是`"\r\n"`，即换行符。空行是空字符串：

```
sortBox1.RemoveAll(item => item.Length == 0); 
```

您还可以在拆分字符串时删除空行：

```
private void button1_Click(object sender, EventArgs e) {
    char[] delimiterChars = { ',',' ',':','|','\n' };

    StringSplitOptions options;
    if (checkBox3.Checked) {
        options = StringSplitOptions.RemoveEmptyEntries;
    } else {
        options = StringSplitOptions.None;
    }

    List<string> sortBox1 = new List<string>(textBox2.Text.Split(delimiterChars, options));
    sortBox1.Sort();
    textBox3.Text = string.Join("\r\n", sortBox1);
} 
```

# mongodb - 从客户端插入时在 Meteor 服务器端丰富 Mongo 文档？

> ID：13897715
> 
> 赞同：3
> 
> 时间：2012-12-16T01:11:17.497
> 
> 标签：mongodb, meteor

我在文档中找不到任何东西，但如果我遗漏了什么，Meteor 有什么方法可以`insert`在发送到 Mongo 之前丰富服务器上客户端的文档。

这样做的用例是处理诸如设置时间戳和其他（仅供服务器端使用）字段之类的事情，而不必将它们设置为客户端文档的一部分。

显而易见的方法是仅从服务器端使用，`Meteor.call('addMyNewRecord', publicFields)`但`insert`我非常喜欢在客户端使用 minimongo api，我希望避免这种`call`要求。我知道在 CouchDB 中，您可以在其处理程序中进行一些基本修改，`on-update`但似乎无法为 Meteor/Mongo 找到任何类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T15:29:50.003

我终于找到[了一个很好的方法](https://github.com/oortcloud/unofficial-meteor-faq#how-can-i-alter-every-document-before-it-is-added-to-the-database)来做到这一点，同时仍然在客户端使用 minimongo 接口。

看来您可以拦截`insert`并丰富文档作为`Deny`策略的一部分，如下所示：

```
 myCollection.deny({
        insert: function(userId, doc) {
            doc.created = new Date().valueOf();
            doc.creator = userId;
            //other default fields
            return false;
        }
    }); 
```

我尝试使用`update`拒绝策略来添加`modified`字段，但这似乎并不相同。如上面链接的帖子中所述，这不适用于该`Allow`政策。

# git - 将提交推送到另一个分支

> ID：13897717
> 
> 赞同：539
> 
> 时间：2012-12-16T01:12:02.170
> 
> 标签：git, git-branch

是否可以将更改从一个分支提交和推送到另一个分支。

假设我在**BRANCH1**中提交了更改并希望将它们推送到**BRANCH2**。

从**BRANCH1**，是否有效：

```
git push origin **BRANCH2** 
```

然后重置 BRANCH1？

* * *

## 回答 #1

> 赞同：978
> 
> 时间：2012-12-16T01:23:59.627

这几乎会奏效。

推送到非默认分支时，需要指定源 ref 和目标 ref：

```
git push origin branch1:branch2 
```

或者

```
git push <remote> <branch with new changes>:<branch you are pushing to> 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2012-12-16T01:15:04.123

当然，虽然它只有在 BRANCH2 的快进或者你强制它时才会起作用。做这样的事情的正确语法是

```
git push <remote> <source branch>:<dest branch> 
```

有关其工作原理的更多详细信息，请参阅[git push 手册页](http://www.kernel.org/pub/software/scm/git/docs/git-push.html)上对“refspec”的描述。另请注意，强制推送和重置都是“重写历史记录”的操作，除非您绝对确定您知道自己在针对任何远程存储库和其他存储库做什么，否则不应胆怯尝试拥有相同项目的分叉/克隆的人。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2018-11-20T07:28:10.583

这很简单。假设您对驻留在本地和远程位置的分支**A**进行了更改，但您希望将这些更改推送到在任何地方都不存在的分支**B。**

**Step-01：**创建并切换到新分支**B**

> git checkout -b B

**Step-02：**在新的本地分支中添加更改

> 混帐添加。//或特定文件

**步骤 03：**提交更改

> git commit -m "commit_message"

**Step-04：**将更改推送到新分支**B**。下面的命令也将远程创建一个新的分支**B**

> git推送原点B

现在，您可以从 bitbucket 验证分支**B**将比分支**A**多提交一次。当您签出分支**A**时，这些更改将不存在，因为这些更改已被推送到分支**B**中。

**注意：**如果您已将更改提交到分支**A**，然后您想将这些更改转移到新的分支**B**，那么您必须先重置这些更改。#快乐学习

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-28T08:18:20.787

我用`git push origin branch1:branch2`命令得到了一个不好的结果：

就我而言，`branch2`已删除并`branch1`已更新了一些新更改。

因此，如果您只想将更改推送到`branch2`from `branch1`，请尝试以下过程：

*   开`branch1`：`git add .`
*   开`branch1`：`git commit -m 'comments'`
*   开`branch1`：`git push origin branch1`

*   开`branch2`：`git pull origin branch1`

*   On `branch1`：恢复到之前的提交。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-07-03T17:57:12.240

当您将代码推送到另一个分支时，只需遵循以下 git 命令即可。请记住**demo**是我的另一个分支名称，您可以将其替换为您的分支名称。

```
git push origin master:demo 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-21T11:22:35.393

就我而言，我有一个本地提交，它没有被推送到`origin\master`，而是提交到我的本地`master`分支。这个本地提交现在应该被推送到另一个分支。

使用**Git 扩展**，您可以执行以下操作：

*   （如果不存在，则创建并）签出您要推送提交的新分支。
*   从历史中选择提交，它应该被提交并推送到这个分支。
*   右键单击并选择*Cherry pick commit*。
*   之后按*樱桃采摘*按钮。
*   选定的提交获取应用到您签出的分支。现在提交并推送它。
*   用错误的提交检查你的旧分支。
*   将此分支硬重置为倒数第二次提交，一切正常（注意你在这里做什么！）。您可以通过右键单击倒数第二次提交并选择*Reset current branch to here 来实现*。如果您知道自己在做什么，请确认操作。

您也可以在**GIT 命令行**上执行此操作。[*从David Christensen*](https://www.endpoint.com/blog/2012/06/21/moving-commit-to-another-branch-in-git)复制的示例：

> 我想你会发现`git cherry-pick`+`git reset`是一个更快的工作流程：
> 
> 使用相同的场景，“功能”是最高提交不正确的分支，这样做会容易得多：
> 
> `git checkout master`
> `git cherry-pick feature`
> `git checkout feature`
> `git reset --hard HEAD^`
> 
> 节省了相当多的工作，并且是`git cherry-pick` 旨在处理的场景。
> 
> 我还要注意，如果它不是最顶层的提交，这也会起作用；你只需要对cherry-pick的论点做出承诺，通过：
> 
> `git checkout master`
> `git cherry-pick $sha1`
> `git checkout feature`
> `git rebase -i ... # whack the specific commit from the history`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-11-25T11:37:46.610

[@SLaks](https://stackoverflow.com/a/13897766/9674470)答案的道具，这主要对我有用。但是在分支有不同头部的情况下。一种方便的方法是使用cherry-pick。

1.  `git log`- 在 Branch1 上进行更改
2.  复制您的更改的提交 SHA
3.  `git checkout branch2`- 在哪里应用您的更改
4.  `git cherry-pick SHA_OF_COMMIT_FROM_STEP_2`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-10-23T07:14:53.243

你可以很容易地做到这一点

```
git status
git add .
git commit -m "any commit"
git pull origin master 
git push origin master:development # assuming 'development' is the target branch name. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-06T10:45:14.503

1.  在 BRANCH1 上提交您的更改。
2.  打开终端并输入命令 -> "git push <remote_name> <branch1_name>:<branch2_name>"

完毕。

对于这个问题：命令是“

```
git push origin BRANCH1:BRANCH2 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-02-14T02:11:09.107

```
git init 
#git remote remove origin
git remote add origin  <http://...git>
echo "This is for demo" >> README.md 
git add README.md
git commit -m "Initail Commit" 
git checkout -b branch1 
git branch --list
****add files***
git add -A
git status
git commit -m "Initial - branch1"
git push --set-upstream origin branch1
#git push origin --delete  branch1
#git branch --unset-upstream 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2018-11-02T05:55:13.707

您已提交到 BRANCH1 并希望在不丢失更改的情况下摆脱此提交？ **git reset**是你需要的。做：

```
git branch BRANCH2 
```

如果您希望 BRANCH2 成为一个新分支。如果需要，您也可以在最后将其与另一个分支合并。如果 BRANCH2 已存在，则忽略此步骤。

然后做：

```
git reset --hard HEAD~3 
```

如果要重置已提交分支上的提交。这需要最后三个提交的更改。

然后执行以下操作将重置的提交带到 BRANCH2

```
git checkout BRANCH2 
```

这个来源很有帮助： [https ://git-scm.com/docs/git-reset#git-reset-Undoacommitmakingitatopicbranch](https://git-scm.com/docs/git-reset#git-reset-Undoacommitmakingitatopicbranch)

# entity-framework-4.3 - 实体框架通过变量获取实体

> ID：13897721
> 
> 赞同：0
> 
> 时间：2012-12-16T01:13:39.177
> 
> 标签：entity-framework-4.3

我有一个填充了表名的列表框。我希望能够单击列表框中的一行并返回该表中的所有记录并绑定到 datagridview。使用良好的老式 SQL 是小菜一碟。尝试对 Entity Framework 4.3.1 做同样的事情是另一回事。

例如，有没有办法在下面的代码中将“get_picklist_names_v”表示为变量？

```
static class EfHelper
{
    public static EfEntities CreateContext()
    {
        EfEntities context = new EfEntities();
        return context;
    }
}

using (var context = EfHelper.CreateContext())
{
    IList list = context.get_picklist_names_v.ToList();

    lboPicklist.DataSource = list;
    lboPicklist.DisplayMember = "name";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:01:33.500

实体框架用类型抽象了 SQL 的东西，并尽其所能，因此您不必为每种服务器类型（Oracle、SQL Server、MySQL 等）编写 sql。这就是 ORM 的作用......

如果您习惯于泛型类型，那么对 Entity Framework 做同样的事情就很简单了。

这不是您要寻找的东西，但也许您可以从以下文章中找到一些提示：

[带有实体框架的存储库模式](http://dotnetspeak.com/index.php/2011/03/repository-pattern-with-entity-framework/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:21:51.490

实体框架不是实现这一目标的最佳工具。您可以尝试[Entity Sql](http://msdn.microsoft.com/en-us/library/bb387145.aspx)，但问题是为了以动态方式使用它，您必须在`IEnumerable<DbDataRecord>`. A`DataGridView`不会这样显示。

没有什么比通过 TableAdapter 和 sql 语句填充 DataSet 更方便的了。如果我是你，我会坚持这一点。

# c# - linq/ef/c# - 返回一组记录

> ID：13897722
> 
> 赞同：1
> 
> 时间：2012-12-16T01:13:48.883
> 
> 标签：c#, linq, entity-framework

我希望用 linq 返回处于某个阶段的所有 PersonID。我的示例数据集是 -

```
ID  DateCreated Stage PersonID
1   1/1/2012    A    101   
2   1/1/2012    A    102
3   1/1/2012    A    103
4   1/1/2012    A    104
5   2/1/2012    B    101
6   3/1/2012    B    102
7   3/1/2012    B    103
8   3/1/2012    C    101
9   4/1/2012    C    102
10  5/1/2012    C    103
11  5/1/2012    D    101 
```

因此，如果我想返回所有处于 ci 阶段的人，只会得到 PersonID 的 102,103

任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:17:31.367

```
IEnumerable<int> personIds = DbContext.Table
    .GroupBy(record => record.PersonID)
    .Where(group => group.Last().Stage == "c")
    .Select(group => group.Key) 
```

这样，如果像 101 这样的人已经超过了阶段 c，那么将不会返回，因为他们的最后阶段是 D。104 也不会返回，因为他还没有到达阶段 C。想象一下，它看起来像这样. 最后阶段在括号中。

```
Group: 101 - A, B, C, [D]
Group: 102 - A, B, [C]
Group: 103 - A, B, [C]
Group: 104 - [A] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T13:56:11.233

所以我终于让它在这里工作是解决方案 -

```
 var query = DbContext.Table
                .GroupBy(p => p.PersonID)
                .Select(grp =>  grp.OrderByDescending(
                     d => d.DateCreated).FirstOrDefault()
                ).Where(a => a.Stage =="C"); 
```

感谢您的帮助@Despertar。

# django - Django模板中的分组CheckboxSelectMultiple

> ID：13897731
> 
> 赞同：13
> 
> 时间：2012-12-16T01:15:24.203
> 
> 标签：django, django-forms, django-templates

如何`CheckboxSelectMultiple`对相关模型生成的复选框进行分组？

这可以通过例子得到最好的证明。

**模型.py：**

```
class FeatureCategory(models.Model):
    name = models.CharField(max_length=30)

class Feature(models.Model):
    name = models.CharField(max_length=30)
    category = models.ForeignKey(FeatureCategory)

class Widget(models.Model):
    name = models.CharField(max_length=30)
    features = models.ManyToManyField(Feature, blank=True) 
```

**表格.py：**

```
class WidgetForm(forms.ModelForm):
    features = forms.ModelMultipleChoiceField(
        queryset=Feature.objects.all(),
        widget=forms.CheckboxSelectMultiple,
        required=False
    )
    class Meta:
        model = Widget 
```

**视图.py：**

```
def edit_widget(request):
    form = WidgetForm()
    return render(request, 'template.html', {'form': form}) 
```

**模板.html：**

```
{{ form.as_p }} 
```

以上产生以下输出：

```
[] Widget 1
[] Widget 2
[] Widget 3
[] Widget 1
[] Widget 2 
```

我想要的是按功能类别（基于`ForeignKey`）对功能复选框进行分组：

```
Category 1:
  [] Widget 1
  [] Widget 2
  [] Widget 3

Category 2:
  [] Widget 1
  [] Widget 2 
```

我怎样才能做到这一点？我尝试使用`{% regroup %}`模板标签无济于事。

非常感谢任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-18T13:32:19.113

您必须编写自定义`CheckboxSelectMultiple`小部件。使用我尝试过的[代码段](http://djangosnippets.org/snippets/2841/)，通过在 field 中添加as 属性来使`CheckboxSelectMultiple`字段可迭代。这样我以后可以在模板中使用标签。`category_name``attrs``regroup`

下面的代码是根据您的需要从代码片段中修改而来的，显然这段代码可以变得更干净、更通用，但目前它不是通用的。

`forms.py`

```
from django import forms
from django.forms import Widget
from django.forms.widgets import SubWidget
from django.forms.util import flatatt
from django.utils.html import conditional_escape
from django.utils.encoding import StrAndUnicode, force_unicode
from django.utils.safestring import mark_safe

from itertools import chain
import ast

from mysite.models import Widget as wid # your model name is conflicted with django.forms.Widget
from mysite.models import Feature

class CheckboxInput(SubWidget):
    """
    An object used by CheckboxRenderer that represents a single
    <input type='checkbox'>.
    """
    def __init__(self, name, value, attrs, choice, index):
        self.name, self.value = name, value
        self.attrs = attrs
        self.choice_value = force_unicode(choice[1])
        self.choice_label = force_unicode(choice[2])

        self.attrs.update({'cat_name': choice[0]})

        self.index = index

    def __unicode__(self):
        return self.render()

    def render(self, name=None, value=None, attrs=None, choices=()):
        name = name or self.name
        value = value or self.value
        attrs = attrs or self.attrs

        if 'id' in self.attrs:
            label_for = ' for="%s_%s"' % (self.attrs['id'], self.index)
        else:
            label_for = ''
        choice_label = conditional_escape(force_unicode(self.choice_label))
        return mark_safe(u'<label%s>%s %s</label>' % (label_for, self.tag(), choice_label))

    def is_checked(self):
        return self.choice_value in self.value

    def tag(self):
        if 'id' in self.attrs:
            self.attrs['id'] = '%s_%s' % (self.attrs['id'], self.index)
        final_attrs = dict(self.attrs, type='checkbox', name=self.name, value=self.choice_value)
        if self.is_checked():
            final_attrs['checked'] = 'checked'
        return mark_safe(u'<input%s />' % flatatt(final_attrs))

class CheckboxRenderer(StrAndUnicode):
    def __init__(self, name, value, attrs, choices):
        self.name, self.value, self.attrs = name, value, attrs
        self.choices = choices

    def __iter__(self):
        for i, choice in enumerate(self.choices):
            yield CheckboxInput(self.name, self.value, self.attrs.copy(), choice, i)

    def __getitem__(self, idx):
        choice = self.choices[idx] # Let the IndexError propogate
        return CheckboxInput(self.name, self.value, self.attrs.copy(), choice, idx)

    def __unicode__(self):
        return self.render()

    def render(self):
        """Outputs a <ul> for this set of checkbox fields."""
        return mark_safe(u'<ul>\n%s\n</ul>' % u'\n'.join([u'<li>%s</li>'
                % force_unicode(w) for w in self]))

class CheckboxSelectMultipleIter(forms.CheckboxSelectMultiple):
    """
    Checkbox multi select field that enables iteration of each checkbox
    Similar to django.forms.widgets.RadioSelect
    """
    renderer = CheckboxRenderer

    def __init__(self, *args, **kwargs):
        # Override the default renderer if we were passed one.
        renderer = kwargs.pop('renderer', None)
        if renderer:
            self.renderer = renderer
        super(CheckboxSelectMultipleIter, self).__init__(*args, **kwargs)

    def subwidgets(self, name, value, attrs=None, choices=()):
        for widget in self.get_renderer(name, value, attrs, choices):
            yield widget

    def get_renderer(self, name, value, attrs=None, choices=()):
        """Returns an instance of the renderer."""

        choices_ = [ast.literal_eval(i[1]).iteritems() for i in self.choices]
        choices_ = [(a[1], b[1], c[1]) for a, b, c in choices_]

        if value is None: value = ''
        str_values = set([force_unicode(v) for v in value]) # Normalize to string.
        if attrs is None:
            attrs = {}
        if 'id' not in attrs:
            attrs['id'] = name
        final_attrs = self.build_attrs(attrs)
        choices = list(chain(choices_, choices))
        return self.renderer(name, str_values, final_attrs, choices)

    def render(self, name, value, attrs=None, choices=()):
        return self.get_renderer(name, value, attrs, choices).render()

    def id_for_label(self, id_):
        if id_:
            id_ += '_0'
        return id_

class WidgetForm(forms.ModelForm):
    features = forms.ModelMultipleChoiceField(
        queryset=Feature.objects.all().values('id', 'name', 'category__name'),
        widget=CheckboxSelectMultipleIter,
        required=False
    )
    class Meta:
        model = wid 
```

然后在模板中：

```
{% for field in form %}
{% if field.name == 'features' %} 
    {% regroup field by attrs.cat_name as list %}

    <ul>
    {% for el in list %}
        <li>{{el.grouper}}
        <ul>
            {% for e in el.list %}
                {{e}} <br />
            {% endfor %}
        </ul>
        </li>
    {% endfor %}
    </ul>
{% else %}
    {{field.label}}: {{field}}
{% endif %}

{% endfor %} 
```

*结果*：我在类别表中添加了国家名称，在特征表中添加了城市名称，因此在模板中我能够根据国家（类别）重新组合城市（特征）

![在此处输入图像描述](../Images/e798dcab2f8ab0670e75121be1ceafbc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-15T11:06:51.790

这是当前版本的 Django (~2.1) 的解决方案。

```
## forms.py

from itertools import groupby
from django import forms
from django.forms.models import ModelChoiceIterator, ModelMultipleChoiceField

from .models import Feature, Widget

class GroupedModelMultipleChoiceField(ModelMultipleChoiceField):

    def __init__(self, group_by_field, group_label=None, *args, **kwargs):
        """
        ``group_by_field`` is the name of a field on the model
        ``group_label`` is a function to return a label for each choice group

        """
        super(GroupedModelMultipleChoiceField, self).__init__(*args, **kwargs)
        self.group_by_field = group_by_field
        if group_label is None:
            self.group_label = lambda group: group
        else:
            self.group_label = group_label

    def _get_choices(self):
        if hasattr(self, '_choices'):
            return self._choices
        return GroupedModelChoiceIterator(self)
    choices = property(_get_choices, ModelMultipleChoiceField._set_choices)

class GroupedModelChoiceIterator(ModelChoiceIterator):

    def __iter__(self):
        """Now yields grouped choices."""            
        if self.field.empty_label is not None:
            yield ("", self.field.empty_label)
        for group, choices in groupby(
                self.queryset.all(),
                lambda row: getattr(row, self.field.group_by_field)):
            if group is None:
                for ch in choices:
                    yield self.choice(ch)
            else:
                yield (
                    self.field.group_label(group),
                    [self.choice(ch) for ch in choices])

class WidgetForm(forms.ModelForm):
    class Meta:
        model = Widget
        fields = ['features',]

    def __init__(self, *args, **kwargs):
        super(WidgetForm, self).__init__(*args, **kwargs)
        self.fields['features'] = GroupedModelMultipleChoiceField(
            group_by_field='category',
            queryset=Feature.objects.all(),
            widget=forms.CheckboxSelectMultiple(),
            required=False) 
```

然后，您可以`{{ form.as_p }}`在模板中使用正确分组的选择。

如果您想使用`regroup`模板标签并遍历选项，您还需要引用以下自定义小部件：

```
class GroupedCheckboxSelectMultiple(forms.CheckboxSelectMultiple):

    def optgroups(self, name, value, attrs=None):
        """
        The group name is passed as an argument to the ``create_option`` method (below).

        """
        groups = []
        has_selected = False

        for index, (option_value, option_label) in enumerate(self.choices):
            if option_value is None:
                option_value = ''

            subgroup = []
            if isinstance(option_label, (list, tuple)):
                group_name = option_value
                subindex = 0
                choices = option_label
            else:
                group_name = None
                subindex = None
                choices = [(option_value, option_label)]
            groups.append((group_name, subgroup, index))

            for subvalue, sublabel in choices:
                selected = (
                    str(subvalue) in value and
                    (not has_selected or self.allow_multiple_selected)
                )
                has_selected |= selected
                subgroup.append(self.create_option(
                    name, subvalue, sublabel, selected, index,
                    subindex=subindex, attrs=attrs, group=group_name,
                ))
                if subindex is not None:
                    subindex += 1
        return groups

    def create_option(self, name, value, label, selected, index, subindex=None, attrs=None, group=None):
        """
        Added a ``group`` argument which is included in the returned dictionary.

        """
        index = str(index) if subindex is None else "%s_%s" % (index, subindex)
        if attrs is None:
            attrs = {}
        option_attrs = self.build_attrs(self.attrs, attrs) if self.option_inherits_attrs else {}
        if selected:
            option_attrs.update(self.checked_attribute)
        if 'id' in option_attrs:
            option_attrs['id'] = self.id_for_label(option_attrs['id'], index)
        return {
            'name': name,
            'value': value,
            'label': label,
            'selected': selected,
            'index': index,
            'attrs': option_attrs,
            'type': self.input_type,
            'template_name': self.option_template_name,
            'wrap_label': True,
            'group': group,
        }

class WidgetForm(forms.ModelForm):
    class Meta:
        model = Widget
        fields = ['features',]

    def __init__(self, *args, **kwargs):
        super(WidgetForm, self).__init__(*args, **kwargs)
        self.fields['features'] = GroupedModelMultipleChoiceField(
            group_by_field='category',
            queryset=Feature.objects.all(),
            widget=GroupedCheckboxSelectMultiple(),
            required=False) 
```

然后以下内容应该在您的模板中起作用：

```
{% regroup form.features by data.group as feature_list %}
{% for group in feature_list %}
<h6>{{ group.grouper|default:"Other Features" }}</h6>
<ul>
  {% for choice in group.list %}
  <li>{{ choice }}</li>
  {% endfor %}
</ul>
</div>
{% endfor %} 
```

将部分解决方案归功于以下页面：

[https://mounirmesselmeni.github.io/2013/11/25/django-grouped-select-field-for-modelchoicefield-or-modelmultiplechoicefield/](https://mounirmesselmeni.github.io/2013/11/25/django-grouped-select-field-for-modelchoicefield-or-modelmultiplechoicefield/)

# xml - 是否可以从 AcstionScript 事件处理程序获取返回值？

> ID：13897736
> 
> 赞同：1
> 
> 时间：2012-12-16T01:17:07.227
> 
> 标签：xml, actionscript, event-handling, xml-parsing, return-value

我已经研究了4天以找到答案。我为我的代码找到了一些解决方案，包括这个网站上给出的一些解决方案；但是，它们似乎都没有产生我试图在我的网站上创建的结果。
该项目是：我正在使用 XML 数据创建一个媒体播放器。到目前为止，我已经以两种不同的方式解析了 XML 数据，目标是将所有返回的数据从一个类中放入一个公共数组中，这样我就可以在一个完全不同的类中使用它（该类中的公共数组）。
我已经尝试过返回值，但是在试验之后我认为甚至不可能从事件处理函数中获取返回值。我在本网站的帖子中设置了一个值；但是，该值仅保存该函数中的 XML 数据，我仍然不能将其用作其他类中的公共变量。

 `> `public function getXML(xmlUrl:String):void{
> var xmlLoader:URLLoader = new URLLoader();
> xmlLoader.load(new URLRequest(xmlUrl));
> xmlLoader.addEventListener(Event.COMPLETE, LoadXML2);
> };` `public function LoadXML2(evt:Event):void{
> _xmlData = XML(evt.currentTarget.data);
> _albArray=[];
> _albArray = parseXML2(_xmlData);
> };`

在函数 LoadXML2 中（“2”在那里，因为这两个版本都是我的原始代码尝试的第二个版本）设置了 _albArray 的值并返回我需要它返回的对象。现在的问题是该值仅在此函数中设置，即使 _albArray 是其他类可以访问的类的公共变量，我仍然无法访问返回的数据。因为它是一个事件处理程序，所以我不能简单地调用函数本身并从单独的类中提取值。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:24:32.487

您上面提供的代码应该可以工作：一旦 XML 加载，_albArray 将包含正确的值，并且该值将从其他类中读取。也许 parseXML2 函数不起作用？还是我误解了你的问题？

您还应该考虑监听 IOErrorEvent.IO_ERROR，以防加载 XML 失败。`

# php - 在搜索多个表的查询中检索表名

> ID：13897741
> 
> 赞同：0
> 
> 时间：2012-12-16T01:17:55.857
> 
> 标签：php, mysql, database, multi-table

如何修改以下查询代码以在结果中包含表名？

**$query**搜索数据库中的4 个表，我希望结果包括它们来自哪个表。所有 4 个表都有相同的字段。

然后我想输出结果，如下面的**$results_array[]**数组所示。

提前致谢。

```
$query = mysql_query("select * from $TableName_1 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
UNION select * from $TableName_2 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
UNION select * from $TableName_3 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
UNION select * from $TableName_4 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
order by Post_Date desc LIMIT $items_to_query");

while($row = mysql_fetch_assoc($query)){
 $table_name = ?????????????????????;
 $db1 = $row['Post_Date']);
 $db2 = $row['Post_Title'];
 $db3 = $row['Author']);

 $results_array[] = '<div>'.$table_name.' - '.$db1.' - '.$db2.' - '.$db3.'</div>'."\n";
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T01:29:45.243

```
$query = mysql_query("select *, '$TableName_1' as table_name from $TableName_1 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
UNION select *, '$TableName_2' as table_name from $TableName_2 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
UNION select *, '$TableName_3' as table_name from $TableName_3 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
UNION select *, '$TableName_4' as table_name from $TableName_4 where Topic = '$topic' AND 
((convert(`Post_Title` using utf8) like '%$term_1%') OR 
 (convert(`Post_Title` using utf8) like '%$term_2%') OR 
 (convert(`Post_Title` using utf8) like '%$term_3%') OR 
 (convert(`Post_Title` using utf8) like '%$term_4%')) 
order by Post_Date desc LIMIT $items_to_query"); 
```

# php - 如何在 Joomla 中为文章插入“副标题”元素？

> ID：13897746
> 
> 赞同：1
> 
> 时间：2012-12-16T01:19:21.237
> 
> 标签：php, joomla, overriding, joomla2.5

我知道这是一个“老”问题，四处搜索我在 joomla 论坛上找到了几个线程，但许多线程可以追溯到 1.5 或 1.6 的 '09/'10，并且没有一个找到真正实用的解决方案.

那么如何在文章中插入*字幕*元素，并将其提取到 Joomla 中的模块或组件的覆盖中呢？（我对 2.5+ 的解决方案感兴趣，如果这有帮助的话）

我想到的一个想法是在文章标题的同一字段中添加*副标题*，在特殊字符或单词之后，或两者的组合之后，例如：`My title_sub_My subtitle`.
然后在使用 PHP 的覆盖文件中，获取`$title`变量（或任何变量），解析文本，如果出现特殊分隔符，则将变量拆分为另外两个变量以在代码输出中使用，例如：

```
$title = 'My title_sub_My subtitle' 
```

变成

```
$mainTitle = 'My title'
$subTitle  = 'My subtitle' 
```

不幸的是，我真的是 PHP 的初学者，并且我对如何实现这样的结果有非常基本的了解，或者即使有可能，也可能是由于 Joomla CMS 结构或其他复杂性。

如果我刚才说的完全是废话，或者有更好的方法来实现文章的副标题，应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T04:57:03.717

你可以轻松做到。阅读以下链接。

[如何在 Joomla 文章中添加附加字段](http://www.kavdesign.net/blog/coding/how-to-add-additional-field-in-the-joomla-article-administrator-page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T22:03:38.220

编辑 joomla 的核心可能会因更新而丢失您的脚本。在覆盖中，您可以编写：

```
<?php 
    $itemTitle = $item->title; // 'My title_sub_My subtitle'
    list($title, $subtitle) = explode("_sub_", $itemTitle);
    echo  $title;
    echo "<span class='subtitle'>".$subtitle."</span>";
?> 
```

# mysql - 如何打印由分组语句产生的每个项目

> ID：13897748
> 
> 赞同：1
> 
> 时间：2012-12-16T01:19:47.780
> 
> 标签：mysql

我做了一个使用 group by 的声明。现在，我需要知道每条记录的详细信息，但我需要在一个语句中执行此操作。

例如：我进行了以下查询来查询以`_1`相同结尾和共享的文件`number`：

SELECT number, COUNT(*) AS `sum domains` FROM table
WHERE file LIKE '%_1' GROUP BY number HAVING `sum domains`> 1

所以，如果我有下表：

```
domain      |   file      | Number 
------------------------------------     
aaa.com     | aaa.com_1   | 111
bbb.com     | bbb.com_1   | 222
ccc.com     | ccc.com_2   | 111
ddd.com     | ddd.com_1   | 222
eee.com     | eee.com_1   | 333
qqq.com     | qqq.com_1   | 333 
```

查询的结果是（`number`被多个共享的那个和以这个数字结尾并共享这个数字`file`的（s）的计数）：`file``_1`

```
number | sum domains
------------------------
222    | 2
333    | 2 
```

我需要做的是打印出文件名。我需要：

```
number | file
------------------------
222    | bbb.com_1 
222    | ddd.com_1
333    | eee.com_1
333    | qqq.com_1 
```

我怎么能这样做，因为`group by`子句不允许我打印`file`(s) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:26:46.163

您可以`JOIN`将查询作为子查询返回到主表，以获取原始行和文件名：

```
SELECT 
  main.number, 
  main.file
FROM 
  table AS main
  /* Joined against your query as a derived table */
  INNER JOIN (
    SELECT number, COUNT(*) AS sum domains 
    FROM table
    WHERE RIGHT(file, 2) = '_1' 
    GROUP BY number 
    HAVING sum domains > 1
    /* Matching `number` against the main table, and limiting to rows with _1 */
  ) as subq ON main.number = subq.number AND RIGHT(main.file, 2) = '_1' 
```

[http://sqlfiddle.com/#!2/cb05b/6](http://sqlfiddle.com/#!2/cb05b/6)

请注意，我已将您的替换`LIKE '%_1'`为`RIGHT(file, 2) = '_1'`. 不过，如果没有基准，很难说哪个会更快。

# parsing - 递归树重写 ANTLR

> ID：13897749
> 
> 赞同：1
> 
> 时间：2012-12-16T01:20:07.720
> 
> 标签：parsing, tree, antlr, grammar, abstract-syntax-tree

我有一个 AST，其中包含一个简单的令牌列表......

![](../Images/ad258422a146000d691aa28ec4bc18d4.png)

我只是想将成对的平衡参数组合成嵌套树。

我一直在尝试各种规则，但我无法完全理解它......

```
bottomup : findParams;

findParams
: ^(LIST left+=expression* LPARAM inner? RPARAM right+=expression*)
-> ^(LIST  $left* ^(PARAMS inner?) $right*);

inner : (left+=expression* LPARAM inner? RPARAM right+=expression*)
-> $left* ^(PARAMS inner?) $right*) | (a+=expression* -> $a*);

fragment expression = INT; 
```

这有点像 dyck 语言，但在树上而不是源上。此外，我无法使用远程调试来调试模式匹配树语法，这是一个障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:22:37.620

你的方法是在正确的轨道上，但是你正在混合一种自上而下的方法和一种自下而上的方法。自上而下有利于分解：“这个清单很大，分成一些更小的清单。” 自下而上有利于打破事物*：* “这是最简单的东西，可以是一个列表，所以我会把它变成一个。”

这是对节点进行分组的自下而上的解决方案：

```
bottomup
    : exit_list
    ;

exit_list
    : ^(LIST pre* LPAR reduced* RPAR post+=.*) -> ^(LIST pre* ^(LIST reduced*) $post*)
    ;

pre : INT
    | LPAR 
    | ^(LIST .*)
    ;   

reduced
    : INT
    | ^(LIST .*)
    ; 
```

对于每组不包含其他括号的括号，将该组的内容转换为一个新列表。重复此规则，直到没有括号为止。

例子：

### 输入

```
1(3(4))5 
```

### 基线 AST

![基线AST](../Images/14fea8c4893e705c34dc231ec74bb872.png)

### 最终 AST

![分组AST](../Images/b3fb74e3c16dddee64f395a0a1d4b72e.png)

规则`bottomup`被递归应用了两次：

```
applied to (4):    (LIST 1 '(' 3 '(' 4 ')' ')' 5) -> (LIST 1 '(' 3 (LIST 4) ')' 5)

applied to (3(4)): (LIST 1 '(' 3 (LIST 4) ')' 5) -> (LIST 1 (LIST 3 (LIST 4)) 5) 
```

# c# - 如何使用 Unity 解析 JavaScriptSerializer？

> ID：13897750
> 
> 赞同：0
> 
> 时间：2012-12-16T01:20:10.197
> 
> 标签：c#, asp.net-mvc, unity-container

我的很多 MVC 控制器中都有这个：

```
private JavaScriptSerializer _javaScriptSerializer;
        protected JavaScriptSerializer javaScriptSerializer
        {
            get
            {
                if (_javaScriptSerializer == null)
                {
                    _javaScriptSerializer = new JavaScriptSerializer();
                }

                return _javaScriptSerializer;
            }
            set
            {
                _javaScriptSerializer = value;
            }
        } 
```

我试过解决它：

```
<alias alias="JavaScriptSerializer" type="System.Web.Script.Serialization.JavaScriptSerializer, System.Web.Script.Serialization" /> 
```

和

```
<register type="JavaScriptSerializer" mapTo="JavaScriptSerializer" /> 
```

但是每次我运行我的应用程序时，它都会让我无法解决依赖关系。有没有一种方法可以在整个应用程序中初始化一次，现在必须为每个控制器初始化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:16:30.337

实际上，您不必注册任何内容。JavaScriptSerializer 是一个具有零参数构造函数的具体类，因此 Unity 应该为您新建它，无需配置。

那么为什么它之前没有工作呢？配置时，需要在别名中使用完整的程序集名称。你没有 - 你离开了版本、公钥令牌和文化字段。因此，CLR 无法找到您要求的程序集并且解析失败。

从您的配置中删除别名和注册。

# asp.net-mvc - 如何将非常相似的 URL 路由到不同的控制器操作？

> ID：13897751
> 
> 赞同：1
> 
> 时间：2012-12-16T01:20:23.470
> 
> 标签：asp.net-mvc, url-rewriting, routing, asp.net-mvc-4

我目前正在使用 MVC4 Web 应用程序，并且遇到了一些我不确定如何处理的路由问题。我希望能够将我的 URL 映射到控制器操作，但是 URL 没有区分因素来帮助我理解哪些 URL 需要哪些控制器操作。

网址示例：

*   /[产品分类]
*   /[产品类别]/[产品名称]
*   /[产品类别]/[产品子类别]/[产品名称]
*   /[随机内容名称]

有什么方法可以在不包含 URL 中的标识符来映射控制器操作的情况下完成此操作。例如：

*   /pc/[产品类别]
*   /p/[产品类别]/[产品名称]
*   /p/[产品类别]/[产品子类别]/[产品名称]
*   /c/[随机内容名称]

有了这个，我可以将 pc、p、c 映射到必要的控制器，但如果可能的话，我宁愿避免。

有没有办法实现我所概述的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T11:04:50.223

It isn't possible with the built-in routes, but you can extend the RouteBase class to support it.

```
public class ProductRoute : RouteBase {
    private readonly IRouteHandler _routeHandler;

    public ProductRoute(IRouteHandler handler) {
        _routeHandler = handler;
    }

    public override RouteData GetRouteData(HttpContextBase httpContext) {
        string virtualPath = httpContext.Request.AppRelativeCurrentExecutionFilePath + httpContext.Request.PathInfo;

        IDictionary<string, string> routeValues;
        if (TryGetRouteValuesForAlias(virtualPath, out routeValues)) {
            var data = new RouteData(this, _routeHandler);
            foreach (var routeValue in routeValues) {
                data.Values.Add(routeValue.Key, routeValue.Value);
            }

            return data;
        }
        //No route data for alias found, return null, which means that this route doesn't match the path
        return null;
    }

    public override VirtualPathData GetVirtualPath(RequestContext requestContext, RouteValueDictionary values) {
        string virtualPath = null;
        if (GetVirtualPathForRouteData(values, out virtualPath);) {
            VirtualPathData result = new VirtualPathData(this, match);

            return result;
        }
        //No virtual path found for the route data
        return null;
    }
} 
```

We are using something similar in our CMS. The implementation of the functions `GetVirtualPathForRouteData` and `TryGetRouteValuesForAlias` is tied with our solution, so I won't post it here, but I think you get an idea, how it is working.

Essentially the `GetVirtualPathForRouteData` function takes dictionary of route parameters (e.g. controller, action, id) and tries to find an URL for them. The `TryGetRouteValuesForAlias` do the reverse process it takes URL and tries to find a route parameters for it.

**Edit** (sample implementation of the GetVirtualPathForRouteData and TryGetRouteValuesForAlias)

```
//key - url, value - route values
IDictionary<string, IDictionary<string, string>> _urls;

public bool TryGetRouteValuesForAlias(string path, out IDictionary<string, string> routeValues) {
    return _urls.TryGetValue(path, out routeValues);
}

public bool GetVirtualPathForRouteData(RouteValueDictionary routeValues, out string virtualPath) {
    foreach (var url in _urls) {
        if (this.CompareValuesLists(url.Value, routeValues)) {
            virtualPath = url.Key;
            return true;
        }
    }

    return false;
}

private bool CompareValuesLists(IDictionary<string, string> urlValues, IDictionary<string, object> routeValues) {
    if (urlValues.Count != routeValues.Count) {
        return false;
    }

    foreach (var key in urlValues.Keys) {
        if (!routeValues.ContainsKey(key)) {
            return false;
        }

        if (!string.Equals(urlValues[key], Convert.ToString(routeValues[key]), StringComparison.OrdinalIgnoreCase)) {
                return false;
            }
        }

        return true;
    }
} 
```

Routing data is held in the `_urls`variable. (In our solution we have a little more complicated solution - instead of the simple variable we are using a DI container to get an instance of a class, that is responsible for loading and caching data from DB)

# jquery - 使用验证和 jquery 处理 Rails 错误

> ID：13897759
> 
> 赞同：0
> 
> 时间：2012-12-16T01:22:11.527
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我正在尝试捕获验证错误并通过 jQuery 返回它们。但是，当推文有效时，它似乎没有方法错误。并且不运行else format.js并触发failure.js.erb

**hashtag_controller.rb**

定义创建

```
 @hash_create = Hashtag.create_hashtag(params[:hashtag])
    Hashlog.create_hashlog(params[:hashtag])
    @random_hashtag_pull = Hashtag.random_hashtags_pull
    @leaderboard = Hashtag.leaderboard_history_current
    respond_to do |format|
        if @hash_create
        format.html { redirect_to root_path }
        format.js 
    else
        format.js { render :action => "failure" }

        end
    end
end 
```

**标签.rb**

```
 hashtag_regex = /[A-Za-z][A-Za-z0-9]*(?:_[A-Za-z0-9]+)*$/i 

  validates :hashtag,  :presence => true,
                    :length   => { :within => 3..20 },
                    :format   => { :with => hashtag_regex }

 class << self

def create_hashtag(hashtag)                #creates new tweetvstweet for inputed hashtag with # for guests
    dash = "#"
    @hashtag_scrubbed = [dash, hashtag].join.downcase
    (User.current_user ? User.current_user.twitter : Twitter).search("%#{@hashtag_scrubbed}", :lang => "en", :count => 100, :result_type => "mixed").results.map do |tweet|
        unless exists?(tweet_id: tweet.id)
      create!(
        tweet_id: tweet.id,
        text: tweet.text,
        profile_image_url: tweet.user.profile_image_url,
        from_user: tweet.from_user,
        from_user_name: tweet.user.name, 
        created_at: tweet.created_at,
        hashtag: @hashtag_scrubbed,
        view_count: "0",
        wins: "0"
          ) 
        end  
    end
end 
```

**有效时出错**

在 388 毫秒内完成 500 内部服务器错误

```
NoMethodError (undefined method `create!' for #<Array:0x007ffa911efb20>):
  app/controllers/hashtags_controller.rb:16:in `block in create'
  app/controllers/hashtags_controller.rb:15:in `create' 
```

**无效时出错**

```
Completed 500 Internal Server Error in 900ms

ActiveRecord::RecordInvalid (Validation failed: Hashtag is too short (minimum is 3 characters), Hashtag is invalid):
  app/models/hashtag.rb:45:in `block in create_hashtag'
  app/models/hashtag.rb:34:in `map'
  app/models/hashtag.rb:34:in `create_hashtag'
  app/controllers/hashtags_controller.rb:11:in `create' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:12:45.863

你不应该打电话`tweet.create!`而不是只`create!`在你的 hash_tag.rb 中打电话吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T11:31:26.613

试试这个（对我有用）：

```
`if @hash_create
  respond_to do |format|
    format.html { redirect_to root_path }
    format.js
  end
else
  respond_to do |format|
    format.js { render :action => "failure" }
  end
end 
```

`

# c++ - 我有一些代码，无论我做了多少谷歌搜索，我都无法解决 .h 中的编译器错误

> ID：13897760
> 
> 赞同：0
> 
> 时间：2012-12-16T01:22:20.163
> 
> 标签：c++

我正在尝试为学校生成一个测验程序。我的代码如下

主.cpp：

```
#include <cmath>
#include <ctime>
#include <string>

#include "getQuestion.h"

using namespace std;

int main() {
int mainMenuChoice;
ifstream Bibliography;
//string easyBib;
ifstream easyBib;
ifstream inputFile;

cout << "Quiz Menu\n\n";
cout << "1\. Play Game!\n";
cout << "2\. Bibliography\n";
cout << "3\. Developer Info\n";
//cout << "4\. Admin Menu\n";
cout << "4\. Exit\n";
cout << "Menu Choice: ";
cin >> mainMenuChoice;

switch (mainMenuChoice) {
    case 1:
        break;
    case 2:
        inputFile.open("Bib.txt");
        inputFile >> easyBib;
        cout << easyBib << endl;
        break;
    case 3:

        break;
    /*case 4:
        break;*/
    case 4:
        cout << "Thank you for playing!" << endl;
        return(0);
    default:
        cout << "Sorry, Invalid Choice!\n";
        return(0);

}
return(0);
} 
```

获取问题.h：

```
#ifndef getQuestion
#define getQuestion

int getQuestion () {

ifstream Question;
ifstream Linker;                //Linker for 2 flies
ifstream Answer;
string A;
string L;               //Linker for 2 flies
string Q;
int line;

Question.open("Question.txt");
Question >> Q;
Answer.open("Answer.txt");
Answer >> A;
Linker.open("Linker.txt");
Linker >> L;

getline(Question,line);
number_of_lines++;
#endif 
```

编译器错误：

```
Build Social Studies of project Social Studies with configuration Debug

CompileC "build/Social Studies.build/Debug/Social Studies.build/Objects-normal/x86/main.o" main.cpp normal x86_64 c++ com.apple.compilers.gcc.4_2
cd "/Users/student/Desktop/Social Studies"
setenv LANG en_US.US-ASCII
/Developer/usr/bin/gcc-4.2 -x c++ -arch x86_64 -fmessage-length=0 -pipe -Wno-trigraphs -fpascal-strings -fasm-blocks -O0 -Wreturn-type -Wunused-variable -isysroot /Developer/SDKs/MacOSX10.6.sdk -mfix-and-continue -fvisibility-inlines-hidden -mmacosx-version-min=10.6 -gdwarf-2 -iquote "/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/Social Studies-generated-files.hmap" "-I/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/Social Studies-own-target-headers.hmap" "-I/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/Social Studies-all-target-headers.hmap" -iquote "/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/Social Studies-project-headers.hmap" "-F/Users/student/Desktop/Social Studies/build/Debug" "-I/Users/student/Desktop/Social Studies/build/Debug/include" "-I/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/DerivedSources/x86_64" "-I/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/DerivedSources" -c "/Users/student/Desktop/Social Studies/main.cpp" -o "/Users/student/Desktop/Social Studies/build/Social Studies.build/Debug/Social Studies.build/Objects-normal/x86_64/main.o"

In file included from /Users/student/Desktop/Social Studies/main.cpp:8:
/Users/student/Desktop/Social Studies/getQuestion.h:4: error: expected unqualified-id before 'int'
/Users/student/Desktop/Social Studies/getQuestion.h:4: error: expected `)' before 'int' 
```

谢谢。另外请不要吝啬，我是编程新手！我正在使用 Mac OS X v. 10.6.8 和 XCode 3.2.6 在有人要求我升级任何东西之前，我不是管理员（这是一台学校笔记本电脑）

编辑：感谢大家的帮助！代码中是否还有其他问题（与性能有关？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:29:37.340

```
#define getQuestion

int getQuestion () { 
```

这里发生的事情是你`#define`将字符串“getQuestion”设置为空白，然后你使用`int getQuestion()`哪个被转换为`int ()`现在没有意义的.. @chris 很好。这是您遇到错误的原因，一旦您解决了这个问题，我希望会出现指出的其他问题。

制作宏时的良好经验法则是使其与另一个名称匹配的机会很小甚至没有机会，在这种情况下是一个函数。它们通常都是全部大写，既可以帮助实现这一点，又可以使您在处理宏时看起来很明显。`GETQUESTION_H`因此，在这种情况下，例如可以命名包含保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:31:21.877

您的编译器错误的问题是#define 与函数同名。如果将预处理器语句更改为

```
#ifndef getQuestion_h
#define getQuestion_h 
```

您的编译器错误将得到解决。

还有许多其他错误会导致其他编译器错误，但因为这是家庭作业，您应该先尝试解决这些错误。

作为风格问题，您应该只在 .h 文件中包含函数声明。您应该在另一个文件中定义 getQuestion 函数体，例如 getQuestion.cpp。

# javascript - 将css模式添加到javascript新打开窗口

> ID：13897762
> 
> 赞同：0
> 
> 时间：2012-12-16T01:22:35.557
> 
> 标签：javascript

我想用 css 模型添加类新的打开窗口。

```
 class="modal-basic" 
```

如何配置新的打开窗口并添加类“modal-basic”以使用 JavaScript 打开窗口？

```
window.open('jex5.htm','mywindow','width=600,height=500,left=0,top=100'); 
```

添加新的班级窗口，所以我不想输入`width=600,height=500,left=0,top=100`.

```
window.open('jex5.htm','mywindow','clas=modal-basic'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:37:12.283

弹出窗口的外观是由浏览器设计的，css 不能改变它的样式。如果您想在模态框内打开另一个位置，只需在 div 中嵌入 iframe 并将 div 样式设置为看起来像您的模态框。

# vb.net - 当整数除以十进制时，VB.NET 尝试除以 0 错误

> ID：13897764
> 
> 赞同：3
> 
> 时间：2012-12-16T01:23:22.960
> 
> 标签：vb.net, zero, divide

我正在尝试将整数除法 () 除以 0.25，但 VB 告诉我我尝试除以零，我也尝试除以 (1/4)。

这是我的片段

```
AmountLeft = Remainder \ 0.25
lblQuartersAmount.Text = AmountLeft 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:25:01.187

您不能用非整数进行整数除法；只是截断并在之后投射它。

```
AmountLeft = CInt(Math.Truncate(Remainder / 0.25)) 
```

有什么问题`* 4`？=)

# html - 从另一个html文件链接html？

> ID：13897765
> 
> 赞同：0
> 
> 时间：2012-12-16T01:23:29.983
> 
> 标签：html

我知道这可能是一个愚蠢的问题，我对此比较陌生。我的菜单栏在我的 html 文件中占据了 1,000 多行。我的客户希望`index.html`整理他的文件，以便他可以在需要时自行编辑。我想知道我是否可以将我的菜单的 html 放在另一个文件中，例如放在一个名为：menu.html 的文件中，并通过以下方式链接到我的`index.html`文件中

`<link href="../files/menu.html " type="text/html">`

或以任何其他方式可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:25:43.523

如果您使用任何编程语言，请使用其代码。例如，如果您使用的是 php，请使用

```
include_once('../files/menu.html'); 
```

# iphone - iOS6应用状态保存与恢复

> ID：13897775
> 
> 赞同：2
> 
> 时间：2012-12-16T01:25:09.783
> 
> 标签：iphone, ios6, save, state

我的应用程序的最低支持 iOS 版本是 iOS5。而且我没有进行任何状态保存和恢复。它在我自己的 iphone4 上运行良好，但一些用户抱怨当他们接听电话或切换到其他应用程序并返回时应用程序被重置。
所以，我更重视状态恢复，我想将它添加到我的应用程序中。但是，我有相册功能，所以我调用了 ALAssetLibrary。
我需要创建与原来完全相同的缩略图视图。
我在 operationQueue 中有一些后台操作，所以我需要知道它们的状态并添加未完成的后台操作。这有点复杂。这是我的问题。
1.我没有找到有用的示例代码，项目。（WWDC2012中的session208，但是他们没有在WWDC示例代码发布中发布代码），你知道吗？
2\. 最好的方法是什么？跟随iOS6还是自己做？
有什么不同。
3\. ALAssetlibrary，图片缩略图查看，如何实现状态保存和恢复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T19:19:13.983

绝对使用 Apple 的 API，不要重新发明轮子。[WWDC 2012 上关于此的会议](https://developer.apple.com/videos/wwdc/2012/?id=208)使用WWDC 2012 应用程序作为示例来展示该功能，从来没有任何演示项目可以分享给开发人员。然而，他们（最近）发布了一个演示来演示它，你可以在这里找到它：http: [//developer.apple.com/library/ios/#samplecode/StateRestore/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/StateRestore/Introduction/Intro.html)

听起来您的状态很复杂，我不确定您是否真的想要恢复这些后台操作。您可能会发现将用户恢复到应用程序中更稳定的部分会更好。

对于您的 ALAssetlibrary 问题，您将在视图控制器的实现中将 ID 保存到当前图像`encodeRestorableStateWithCoder:`，确保您阅读了文档，您需要遵守协议，如果您在代码或使用 xibs（不使用情节提要）...您可以通过以下方式保存 ID：

```
NSString * const ImageReferenceIDKey = @"ImageReferenceID";

- (void)encodeRestorableStateWithCoder:(NSCoder *)coder
{
    NSString *objectID = nil; // get some ID that can relocate your image
    [coder encodeObject:objectID forKey:ImageReferenceIDKey];
    [super encodeRestorableStateWithCoder:coder];
}

- (void)decodeRestorableStateWithCoder:(NSCoder *)coder
{
    [super decodeRestorableStateWithCoder:coder];
    NSString *objectID = [coder objectForKey:ImageReferenceIDKey];
    // get into the ALAssetlibrary and use the objectID to restore which image you had.
} 
```

请注意，我在 encode 方法中调用`super`last，但在 decode 方法中首先调用。

您应该非常小心用户更改了您访问他们照片的隐私，不要让他们崩溃，如果您尝试恢复照片，请确保您仍然拥有这样做的权限，否则您可能会崩溃。

# iis - 使用 powershell 在 IIS 中创建站点

> ID：13897777
> 
> 赞同：1
> 
> 时间：2012-12-16T01:25:35.473
> 
> 标签：iis, powershell, iis-7.5

使用在 IIS 7.5 中运行的 mvc4 应用程序，该站点虽然存在于磁盘上，但有超过 100 个 url 指向它。这是因为该站点根据需要访问它的国家/地区显示内容。

因此，该站点可以有超过 100 个绑定，这很难管理。

我希望使用 powershell 在 IIS 中自动创建站点。我会在每次部署期间运行它，以确保我的每个环境都是相同的（开发、质量保证、生产）。

powershell 脚本将删除站点并重新创建它，应用绑定，配置它等。我是 powershell 的新手，所以我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-23T21:48:24.353

您应该能够使用 PowerShell [IIS 管理 Cmdlet](http://technet.microsoft.com/en-us/library/ee790599.aspx)。[我在我的博客上](http://blog.danskingdom.com/powershell-functions-to-convert-remove-and-delete-iis-web-applications/)展示了如何使用它们自动创建和删除 Web 应用程序，这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-25T13:50:44.540

我在 IIS 7+（在 .net4、集成管道等）中创建网站和 AppPool 时使用了一个脚本，并认为您可能会发现它有用，因为它比其他一些答案更简单。如果站点已经存在，它将删除站点并替换它，使其在持续集成场景中表现良好。

像这样使用它：

```
CreateSite.ps1 [WebsiteName] [AppPoolName] [Port] [Path] 
```

如果您要重新安装该站点，则需要先停止它。这样做是这样的：

```
StopSite.ps1 [WebsiteName] [AppPoolName] 
```

你可以[从我的要点中获取脚本](https://gist.github.com/alastairtree/3c2a17d26ed1e49f6d51)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:09:47.977

PowerShell 有一个 IIS 提供程序，您可以使用它从 PowerShell 管理 IIS。

查看[可用的 cmdlet](http://www.iis.net/learn/manage/powershell/powershell-snap-in-using-the-task-based-cmdlets-of-the-iis-powershell-snap-in)。

# .htaccess - 如何编写 .htaccess 301 重定向规则

> ID：13897779
> 
> 赞同：1
> 
> 时间：2012-12-16T01:25:37.160
> 
> 标签：.htaccess, redirect, http-status-code-301

我需要重定向以下页面：

```
www.site.com/austin-tx-key-word-string
www.site.com/austin-tx-different-key-word-string
www.site.com/austin-tx-even-different-key-word-string 
```

都去这个页面：

```
www.site.com/austin-tx 
```

# database - 打开/解密 Webex Connect db3 文件

> ID：13897783
> 
> 赞同：2
> 
> 时间：2012-12-16T01:25:52.713
> 
> 标签：database, sqlite, message, encryption, webex

所以我有很多即时消息日志/历史记录，我想从我的聊天客户端备份，即 Windows 7 中的 Cisco WebEx Connect。这些存储在*C:\Users\\AppData\Local\WebEx Connect\Archive*和文件下被称为“我的电子邮件地址”.db3

下载 SQLiteBrowser 打开此文件后，我收到错误：

> SQLiteManager：打开文件“myfile”.db3 时出错 - 文件已加密或损坏异常名称：NS_ERROR_FILE_CORRUPTED 异常消息：组件返回失败代码：0x8052000b (NS_ERROR_FILE_CORRUPTED) [mozIStorageService.openUnsharedDatabase]

该文件没有损坏，所以我在想它可能以某种方式加密 - 在记事本中打开文件会显示如下随机字符，没有可识别的文本：

> =¢^£ÍV¶»ñû‡«– `×ÚµÏýº°ÎîÎL

除了包含实际消息的文件之外，ConnectDB 文件夹下还有另一个 20kb 的小文件，其中包含各种配置设置（例如创建 CacheTable），它在第一行显示（在记事本中打开时）：“SQLite 格式 3” -很明显，这个没有加密。

有没有办法将数据从第一个文件中提取到可读的东西（即文本）？它的大小只有 5MB 左右，因此不会导致任何内存问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:03:28.990

不幸的是，我还没有找到解密此文件的方法，但是如果您仍然能够访问 Messenger 客户端并拥有一个真实帐户，您仍然可以通过单击相关人员逐个导出它们（确保您如果您要检索离线用户的聊天历史记录，则已启用查看离线人员）> 单击历史记录选项卡> 单击“另存为”。

我希望这对你有用。

# java - Java 中的基类实例和派生类实例之间的物理内存是如何组织的？

> ID：13897784
> 
> 赞同：12
> 
> 时间：2012-12-16T01:26:04.197
> 
> 标签：java, oop

当一个子类`C`被实例化时，它的超类的构造函数（比如`A`，和`B`（`B`extends `A`））会比`C`. 那么这是否意味着：

1.  为A的实例，B的实例和C的实例分配了单独的内存？
2.  对于subclass*的*实例，除了它自己的字段之外，`C`它是否具有为继承自`B`and的字段分配的所有物理内存？`A`
3.  那么's 的实例除了它自己的之外还有`B`继承自的字段的物理内存吗？`A`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-16T01:41:23.563

> ...众所周知，其超类的构造函数（比如 A 和 B（B 扩展 A））将被实例化...

类被实例化。构造函数被*调用*。

（在编辑中建议这应该是“对象已实例化”；但是，这在技术上并不正确。根据下面链接的同一 JLS 部分：“在评估类实例创建表达式时，会显式创建一个新类实例导致一个类被实例化。”即你实例化一个类是为了得到一个对象。一个对象是一个实例。你不实例化对象。）

> 1）A的实例，B的实例和C的实例有单独的内存分配吗？

不，有*一个*类的实例。即一块内存。

> 2) 对于子类 C 的实例，除了它自己的字段之外，它是否具有为从 B 和 A 继承的字段分配的所有物理内存？

是：“每当创建一个新的类实例时，都会为其分配内存空间，并为该类类型中声明的所有实例变量和该类类型的每个超类中声明的所有实例变量，包括所有可能的实例变量被隐藏起来。”

> 3) 那么 B 的实例除了它自己的之外，是否还有从 A 继承的字段的物理内存？

根据 1，在这种情况下没有“B 的实例”。只有一个实例。

资料来源：[12.5。创建新类实例，JLS 7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T01:42:07.087

1.  只分配一个实例。
2.  该实例包含所有类的所有字段。
3.  好吧，唯一的实例具有从和`C`继承的字段的内存。`A``B`

# ruby-on-rails - 在 Ruby on Rails 3.1+ 中公开静态文件？

> ID：13897786
> 
> 赞同：2
> 
> 时间：2012-12-16T01:26:38.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

我想使用 SoundManager2 在我的 Ruby on Rails 应用程序中播放声音。它想要的东西之一是带有 swfs 的目录。我应该把它放在哪里，然后如何配置我的声音管理器？我想将它们放在目录 /soundmanager/ 中并使用 JS，如下所示：

```
<script>
if (soundManager) {
  soundManager.setup({
    url: '/soundmanager/',
    onready: function() {
      var myGameMusic = soundManager.createSound({
        id: 'music1',
        url: 'music1.wav'
      });
      myGameMusic.play();
    },
    ontimeout: function() {
      console.log("Error in soundManager.setUp")
      // Hrmm, SM2 could not start. Missing SWF? Flash blocked? Show an error, etc.?
    }
  });
}
</script> 
```

我在哪里放置 swfs (/soundmanager/) 以及如何将其配置为公开？

一个相关的问题是：假设我有一些想要下载的 PDF。我应该把它们放在哪里以便它们可以下载？

我很困惑，因为有一个 /public 目录，但显然它不再在 rails 3.1 中工作了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:29:44.383

你把它们放进去`app/assets/`

关键是它们是从那里*以开发模式*服务的。

在*生产模式下*，资产被缩小并放置在`public/`

这称为“资产编译”，是在 Rails 3.1 中引入的，如您所见，它引起了很多混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T08:37:16.363

Web 服务器应该与 Rails 一起提供静态资源（而不是*通过*Rails）。

我必须这样做才能让 phpMyAdmin 安装与 Apache/Passenger 上的 Rails 应用程序一起工作。

```
# Apache vhosts.conf
<Location ~ "/static_content"> 
  PassengerEnabled off 
</Location> 
```

这`/static_content`直接从 Apache 提供内容，完全绕过 Rails。理想情况下，这是任何情况下静态内容的最佳解决方案。

# jquery - 如何将条件 If 语句设置为“.offset().top”等于“零”？

> ID：13897794
> 
> 赞同：0
> 
> 时间：2012-12-16T01:28:40.827
> 
> 标签：jquery, html

*问题已被改写。*

# 一个例子：

这是我创建的一个示例：

**链接：http:** [//jsfiddle.net/4hpC8/](http://jsfiddle.net/4hpC8/)

# jQuery：

```
/* First: */
/* Set the Position of the Division Tag to Fixed When Reaching the Top of the Window While Scrolling */

$(window).scroll(function(){
    /* var lasttop = 0; */    
    var u_div_cn = $('div#container_nav');

    var u_div_cn_os_top = $('div#container_nav').offset().top;

    if ( u_div_cn_os_top == 0 ) {      

        u_div_cn.addClass('set_position');

    };

}); 
```

# CSS：

```
.set_position {    
    position: fixed;
    top: 0;
    margin-top: 0;
} 
```

上面的例子没有成功，让`division tag`通过。

# 一个不同的比较示例：

这是一个不同的例子，以防有人想比较：

**链接：http:** [//jsfiddle.net/yr2B3/2/](http://jsfiddle.net/yr2B3/2/)

# php - 使用 PHP 多维数组作为数据库

> ID：13897795
> 
> 赞同：2
> 
> 时间：2012-12-16T01:28:55.693
> 
> 标签：php, arrays, database, security

我正在构建一个私人 CMS 供我自己使用，并且我将开始构建用户名和密码存储功能。我正在考虑将所有管理员用户名、密码和用户详细信息存储在 PHP 文件中的多维数组中的可能性，而不是使用 SQL 将它们存储在数据库中。

我想要使​​用这种非传统方法来存储用户信息的原因是相信这将使攻击者更难获得对用户信息（用户名、密码、IP 地址等）的未经授权的访问，因为我不会连接到 MySQL 数据库。

**粗略的代码大纲：**

*add_user.php*

```
// set the last referrer session variable to the current page 
$_SESSION['last_referrer'] = 'add_user.php';

// set raw credential variables and salt
$raw_user = $_POST['user'];
$raw_pass = $_POST['pass'];
$raw_IP = $_SERVER['REMOTE_ADDR'];
$salt = '&^${QqiO%Ur!W0,.#.*';

// set the username if its clean, else its false
$username = (is_clean($raw_user)) ? $raw_user : false; // is_clean() is a function I will build to check if strings are clean, and can be appended to an array without creating a parsing error.

// set the salted, sanitized, and encrypted password if its clean, else its false
$password = (is_clean($raw_pass)) ? $salt . encrypt($raw_pass) : false; // encrypt() is a function I will build to encrypt passwords in a specific way

// if username and password are both valid and not false
if( $username && $password ) {

    // set the users IP address
    $IP = sanitize($raw_IP);

    // create a temporary key
    $temp_key = $_SESSION['temp_key'] = random_key(); 

    // random_key() is a function I will build to create a key that I will store in a session only long enough to use for adding user info to the database.php file

    // add user details array to main array of all users
    $add_user = append_array_to_file('database.php', array($username, $password, $IP)); 

    // append_array_to_file() is a function I will build to add array's to the existing multidimensional array that holds all user credentials. 

    // The function will load the database.php file using cURL so that database.php can check if the temp_key session is set, the append_array_to_file() function will stop and return false if the database.php file reports back that the temp_key is not set.

    // The function will crawl database.php to read the current array of users into the function, will then add the current user's credentials to the array, then will rewrite the database.php file with the new array. 

    // destroy the temporary session key
    unset($_SESSION['temp_key']);
}
else {
    return false;
} 
```

*数据库.php*

```
$users_credentials = array(1 => array('username' => 'jack', 
                                      'password' => '&^${QqiO%Ur!W0,.#.*HuiUn34D09Qi!d}Yt$s',
                                      'ip'=> '127.0.0.1'), 
                           2 => array('username' => 'chris', 
                                      'password' => '&^${QqiO%Ur!W0,.#.*8YiPosl@87&^4#',
                                      'ip'=> '873.02.34.7')
                          ); 
```

然后，我将创建自定义函数来模拟 SQL 查询（如**SELECT**），以用于验证尝试登录的用户。

**我的问题**

1.  这是一个坏主意，如果是，为什么？

2.  我是否正确地认为这将减少黑客试图获得未经授权的访问、嗅探/窃取密码等的可能性，因为我没有连接到远程数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:18:06.420

我没有看到任何优势：无论您使用文本文件、mysql 数据库还是 php 文件（=== 文本文件），它们都是“数据库”，因为它们是存储信息的文件。不同之处在于为这些东西制作了一个 sql 数据库。

我确实看到了缺点，因为您必须考虑更多潜在的漏洞。一些例子（除了评论中提到的东西）：

*   你需要注意密码文件总是在 web-root 之外，以防 php 死在你身上；
*   您需要避免在源代码控制中传递您的密码文件。

这些都不是很难解决的事情，但是使用普通的数据库，您甚至不必担心它们。

除此之外，还误解了盐的用途：如果您只是将其添加到加密密码中，那么使用盐确实没有意义，您需要将其发送到您的`encrypt`函数以使用您的文本密码对其进行哈希处理，以便彩虹必须为每个密码生成表，而不是为整个数据库生成一个表。出于这个原因，您也不应该为所有用户使用单一的盐，每个用户都应该有不同的、独特的盐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:26:35.353

如果您计划将任何类型的配置数据存储在任何类型的文本文件中，而不是传统数据库，请考虑使用 .ini 文件。如果我没记错的话，您也可以将其存储在您的网络根目录之外，就像`php.ini`文件一样。

这是一篇很棒的帖子，准确地解释了如何解决这个问题：[使用 ini 文件进行 PHP 应用程序设置](http://brian.moonspot.net/using-ini-files-for-php-application-settings)

[PHP 手册：get_cfg_var()](http://php.net/manual/en/function.get-cfg-var.php)

# apache - 我的 htaccess RewriteRule 可以在 localhost/mysite 上工作，但不能在 1&1 共享主机上的 mysite.com 上工作

> ID：13897801
> 
> 赞同：4
> 
> 时间：2012-12-16T01:30:16.013
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

# 解决了：

**不幸的是，该解决方案并不令人满意。今天早上，在尝试@Wige 的建议时，令我惊讶的是，预期值实际上是作为`GET`查询发送到页面的。显然，1&1（我知道他们在过去几周一直在改变他们的环境），在幕后做了一些神奇的事情，神奇地解决了我的问题，现在我以前所有不工作的代码*都*按预期工作。**

* * *

**新信息**：生产服务器的*Apache*版本在我的*本地主机*上是**`1.3.34`**vs。**`2.2.21`**

 ***我无法弄清楚为什么我的 RewriteRule 在生产中无法正常工作。**

> `RewriteRule ^page/pretty-url/(.*)$ page.php?query=$1 [L]`

在我的本地测试环境 ( `localhost/mysite/page/pretty-url/{...}`) 中它工作正常，但在`mysite.com/page/pretty-url/{...}`它上面不能正常工作。`page.php`它按预期加载，但显然该`?query=$1`部分被忽略（`$_GET`为空）

我想这个问题与服务器配置有关。我使用的是 1&1 共享主机帐户，没有 httpd.conf 访问权限。

* * *

**那做什么`RewriteRule`（或*应*该做什么）：**

我想要像这样的网址

> *`example.com/page/pretty-url/{{info_for_dynamic_content}}`

重写为

> *`/page.php?query={{info_for_dynamic_content}}`

所以我可以访问**`info_for_dynamic_content`**

`php`作为内`$_GET['query']`

* * *

**完整的 .htaccess 文件供参考：**

```
AddHandler x-mapp-php6 .php

DirectoryIndex index.php
ErrorDocument 404 /index.php 

Options +FollowSymLinks

# per @Jacques Chester's suggestion
Options -MultiViews

RewriteEngine on
RewriteBase /

# the rule in question
RewriteRule ^page/pretty-url/(.*)$ page.php?query=$1 [L]

RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php !-f 
RewriteRule (.*) /index.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:59:24.583

很可能，您的主机将变量存储在其他地方。我会添加一个调用 phpinfo(); 进入你的脚本并检查那里的环境变量，看看你是否能找到应该在 get 中的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:36:39.510

似乎连接到 1&1 的托管环境。

[看到这个问题](https://stackoverflow.com/questions/8681959/1and1-mod-rewrite-issues)，特别是[这个答案](https://stackoverflow.com/a/8856274/599240)。

基本上，1&1 似乎启用了“MultiViews”。通过添加

```
Options -MultiViews 
```

您为您的网站禁用该设置，根据各种报告，这可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-24T15:36:36.273

我在 WEEKS 的 1&1 / 1and1 / IONOS 共享服务器上遇到了 RewriteRule 问题，最终我找到了 1 和 1 共享服务器的完美设置，像这样启动你的 .htaccess 文件

```
Options -MultiViews
Options +FollowSymlinks
RewriteEngine On
RewriteBase / 
```

我希望这对某人有所帮助，因为 1&1 在 htaccess 支持方面毫无用处*

# android - 在应用计费 v3 NullPointerException

> ID：13897809
> 
> 赞同：7
> 
> 时间：2012-12-16T01:31:40.467
> 
> 标签：android, nullpointerexception, in-app-billing

为了在适用于 Android 的 app billing v3 中进行测试，我实现了一个对话框，该对话框添加了一个单选项适配器。我添加了测试 Sku，“android.test.purchased”、“android.test.canceled”、“android.test.refunded”、“android.test.item_unavailable”。

当我使用对话框启动购买流程时，一切都很好，我可以购买该物品并且该物品绝对是购买的。但是，当我的应用程序尝试刷新 UI 时，我得到一个空指针异常。我知道刷新工作。

这是我的日志：

```
12-16 01:06:06.706: I/Running inventory query with(20846): android.test.purchased
12-16 01:06:06.706: I/Running details query with(20846): SkuDetails:{"title":"Sample Title","price":"£0.61","type":"inapp","description":"Sample description for product: android.test.purchased.","productId":"android.test.purchased"}
12-16 01:06:06.706: I/Running details query with(20846): SkuDetails:{"title":"Sample Title","price":"£0.61","type":"inapp","description":"Sample description for product: android.test.purchased.","productId":"android.test.purchased"}
12-16 01:06:06.706: I/Running inventory query with(20846): android.test.canceled
12-16 01:06:06.706: I/Running details query with(20846): null
12-16 01:06:06.706: I/Running details query with(20846): null
12-16 01:06:06.706: D/AndroidRuntime(20846): Shutting down VM
12-16 01:06:06.706: W/dalvikvm(20846): threadid=1: thread exiting with uncaught exception (group=0x40d12930)
12-16 01:06:06.706: E/AndroidRuntime(20846): FATAL EXCEPTION: main
12-16 01:06:06.706: E/AndroidRuntime(20846): java.lang.NullPointerException
12-16 01:06:06.706: E/AndroidRuntime(20846): at com.example.test.MainActivity$1.onQueryInventoryFinished(MainActivity.java:201)
12-16 01:06:06.706: E/AndroidRuntime(20846): at com.example.test.util.IabHelper$2$1.run(IabHelper.java:536)
12-16 01:06:06.706: E/AndroidRuntime(20846): at android.os.Handler.handleCallback(Handler.java:725)
12-16 01:06:06.706: E/AndroidRuntime(20846): at android.os.Handler.dispatchMessage(Handler.java:92)
12-16 01:06:06.706: E/AndroidRuntime(20846): at android.os.Looper.loop(Looper.java:137)
12-16 01:06:06.706: E/AndroidRuntime(20846): at android.app.ActivityThread.main(ActivityThread.java:5039)
12-16 01:06:06.706: E/AndroidRuntime(20846): at java.lang.reflect.Method.invokeNative(Native Method)
12-16 01:06:06.706: E/AndroidRuntime(20846): at java.lang.reflect.Method.invoke(Method.java:511)
12-16 01:06:06.706: E/AndroidRuntime(20846): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-16 01:06:06.706: E/AndroidRuntime(20846): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-16 01:06:06.706: E/AndroidRuntime(20846): at dalvik.system.NativeStart.main(Native Method)

for (String s : allSkus) {
Log.i("Running inventory query with", "" + s);
SkuDetails c = inv.getSkuDetails(s);
Log.i("Running details query with", "" + c);
if (inv.hasPurchase(s)) {
    purchaseArray.add(c.getTitle());
} else {
    **LINE 201** objects.add(c.getPrice() + "  T:" + c.getSku());
} 
```

allSkus 是一个包含上述 4 个 skus 的 ArrayList。

空指针是 SkuDetails c = inv.getSkuDetails(s);

在 UI 刷新时返回 null。但问题是它似乎适用于第一个 sku (android.test.purchased) 但对于第二个 sku (android.test.canceled) 是 null 并且它也只有在购买另一个项目后运行时才为 null (退款或购买）。但是，如果我随后再次打开它，那很好，并且不会引发 nullpointerexception。

如果我在添加到 ArrayList 对象之前添加了一个空检查，那么不会添加任何项目，因为在购买的项目之后或之前的每个项目都在 inv.getSkuDetails(s) 上返回空值

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T19:24:21.373

这让我很困惑，接受的答案不包含相关细节。

您需要做的是在调用 startSetup 后传递一个包含您要查询的 SKU（无论是否购买）的列表。所以它看起来像下面的代码，而不是（不充分的）样板 TrivialDrive 示例中提供的代码。

```
mHelper.queryInventoryAsync(true, skuList, mGotInventoryListener); 
```

此外，看起来有一些幻像方法（评论中仍未清理，这也是不准确的）......该错误的更多细节在这里：

[http://code.google.com/p/marketbilling/issues/detail?id=98](http://code.google.com/p/marketbilling/issues/detail?id=98)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T01:36:49.217

想通了，把这个留给和我有同样问题的人。在 UI 刷新中，我调用了 IabHelper 查询而不查询 sku 的详细信息。因此，预缓存的 sku 有详细信息，但那些没有的，失败了。

# c# - 使用 C# 为基于节点的接口绘制交互式元素

> ID：13897814
> 
> 赞同：-1
> 
> 时间：2012-12-16T01:32:11.807
> 
> 标签：c#, wpf, user-interface, opengl, xna

**注意：**这个问题不是关于使用一些预制库，所以它可能不是[实现基于节点的图形界面的重复？](https://stackoverflow.com/questions/645354/implementing-a-node-based-graphical-interface)

* * *

我正在尝试制作像 Autodesk 3DS MAX 在材质编辑器中使用的基于节点的界面：

![在此处输入图像描述](../Images/215b158066eb0291d1191a0287e5ccf9.png)

到目前为止，我有一些节点的简单图形（.png），我刚刚完成了曲线算法（Cubic Bezier Curve）

到目前为止，所有的逻辑、类和其他一些代码已经完成了 70%，但我想知道在 C# WinForm 中实现基于节点的接口的“正确”方式到底是什么。

我曾考虑过使用 OpenGL 或 XNA ( Direct3D )，但后来我认为这对于目的来说太过分了。

下一个 WPF 进入了我的脑海，但无论如何我都没有使用 WPF 处理过这样的事情，所以我不知道这是否可行并且性能也很好。

像这样的提示，我可以在每个节点周围拖动吗？我可以用绘制的图形注册点击和拖动事件吗？

我希望能够让用户创建节点，为它们提供属性和值，连接节点并将它们拖动到 WinForm 的滚动区域中（就像在容器中一样）

好吧，你有什么建议？从哪里开始？该怎么办 ？也许有任何例子或参考？

* * *

**编辑：**

这是我正在尝试制作的节点结构的简单（图形）示例： ![在此处输入图像描述](../Images/4ce117d651bb553cbe7f6ba4bb0c7257.png)

如您所见，我希望在节点内有按钮，或其他用户控制的元素，如开关或调光器之类的东西。请注意，此图像仅用于显示我想如何构造节点和每个“矩形”。

所以每个矩形都应该有它自己的属性（ signal = true / false ， connectedNode = "node_id" ）并且它也是自己的鼠标事件，我想将所有矩形分组到一个代表节点的对象。

**所以我的问题是：如何在“面板”之类的控制元素内绘制矩形？** （我最好的情况是我想使用 .png 的主矩形和连接器矩形而不是绘制纯色重新排列）

* * *

**更新：** system.drawing 类是什么？我可以简单地画成“面板”元素吗？什么是可拖动性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:00:57.113

首先，您需要了解 mani tec 能够满足您的需求。

关于性能是：

按从好到坏排序的列表

-xna 或 open gl - (Direct 3d 或 Direct X)
-windows forms (System.Windows.Forms)
-wpf

如果您对简化开发感兴趣，请从最简单的顺序开始：

-wpf
-winforms
-xna (...)

* * *

为了帮助你多一点，我会说：

在 Win Forms 中，您可以自定义用户控件，在用户控件中，您可以覆盖受保护的方法调用 onpaint，在此方法中，您可以执行与鼠标的移动和单击交互的实时设计。

如果您需要有关它的更多信息，请询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:09:35.657

您应该能够找到自定义 Winforms 用户控件可以响应的鼠标向上和鼠标向下事件。从那里您应该能够实现单击和拖动（鼠标单击的控件相对位置通常在事件结构中传递）并从那里开始。

我首先编写一个能够拖动单个对象并从那里开始的小型原型 - 尝试几种不同的方式，看看什么是可以理解和干净的。

完成后，您可以开始设计课程设置；您可能希望将许多常见的拖放代码放在实现边界框和类似内容的基类中，然后创建要绘制的对象/节点/线及其关联的列表。慢慢建立自己的方式；不打算一口气构建整个事物。

# c - 为什么这段代码在 C 中有效

> ID：13897817
> 
> 赞同：1
> 
> 时间：2012-12-16T01:32:53.600
> 
> 标签：c

```
#include <stdio.h>

int main(){

char array[2];
array[0] = 'q';
array[1] = 'a';
printf("%s",array);

return 0;
} 
```

如果你问我这个代码不应该工作。printf 像字符串一样打印 array[2] 但它不是字符串。当我执行它时，它工作得很好。你能解释一下为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T01:37:15.850

> 当我执行它时，它工作得很好。

您刚刚（不）走运：您的代码表现出*未定义的行为*，因为它让`printf`'`%s`参数在非空终止字符序列的末尾运行。

C 中的字符串是 的序列`char`，它必须有一个带有值的额外字符`0`，称为空终止符。这是一种使您的代码在没有未定义行为的情况下工作的方法：

```
char array[3];
array[0] = 'q';
array[1] = 'a';
array[2] = '\0'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T01:34:06.807

在 C 中，`String`与字符数组相同。`String`C中没有这样的东西。

# javascript - 从 DOM 解析 HTML（不是静态 HTML）

> ID：13897820
> 
> 赞同：0
> 
> 时间：2012-12-16T01:33:47.767
> 
> 标签：javascript, html, html-parsing, beautifulsoup

尝试从 DOM 解析 HTML 数据，当我使用 Chrome 的开发者工具时，我可以在控制台中看到该数据。当我在本地将页面保存为 HTML 并搜索目标数据时，找不到它。我已经阅读了一些关于静态 HTML 文件是如何被浏览器接收的，以及 Javascript 将如何以不同方式呈现它以进行演示的阅读。

具体示例：谷歌“nba”，结果在页面顶部包含一个表格，其中嵌套了当天的所有预定比赛`<tbody>`，如果您保存此页面，则 HTML 文件不包含`<tbody>`标签。尝试使用 BeautifulSoup4 和 Python 解析这个游戏表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:37:04.993

要完全以编程方式执行此操作，您需要[运行一个无头浏览器](https://stackoverflow.com/questions/6025082/headless-browser-for-python-javascript-support-required)——它可以像您的真实浏览器一样执行 JavaScript。[Ghost.py](http://jeanphix.me/Ghost.py/)可以使这更容易。

否则，您可以[按照 millimoose 的建议](https://stackoverflow.com/questions/13897820/parse-html-from-dom-not-static-html/13897831#comment19149287_13897820)进行操作，并使用浏览器的内置开发人员工具将当前 DOM 状态保存为 HTML。

# linux - Lisp 工具包（ltk）：无法获取 SCALE：变量值

> ID：13897824
> 
> 赞同：0
> 
> 时间：2012-12-16T01:34:08.483
> 
> 标签：linux, common-lisp, x86-64, sbcl, ltk

我正在 AMD64 机器上使用 SBCL for Linux。函数 CONTROL-TEST 使用绘图 CANVAS 和两个滑动 SCALE 创建一个窗口。UPPER-SLIDER 和 FORE-SLIDER 的滑块 :VARIABLES 应该分别绑定到 UPPER-THETA 和 FORE-THETA，但更新代码只看到 0。我已经在另一个函数中测试了更新代码。

```
(defun controltest ()
  "Test of a user-controlled robot arm"
  (with-ltk ()
    ; (make-instance 'scale :master fscale :from 0 :to 100  :length 150 )
    (let* ((upper-theta 0) (fore-theta 0)
       (upper-slider 
        (make-instance 'scale :from 0 :to 7 
               :length  360 :variable upper-theta))
       (fore-slider 
        (make-instance 'scale :from 0 :to 7
               :length  360 :variable fore-theta))
       (cnvs (make-instance 'canvas :width cnvs-width :height cnvs-height))
       (upper (manip:uctk-beam :cen-x 200 :cen-y 200 
                   :b-length 40 :b-width 20
                   :tk-cnvs cnvs))
       (fore (manip:uctk-beam :cen-x 0 :cen-y 40 ; relative to upper
                  :b-length 40 :b-width 20
                  :tk-cnvs cnvs))
       (slp-time 50))
      (labels ((update ()
         (draw upper nil) ; contains FORE, no need to draw separately
         (geo:set-member-theta upper 2 fore-theta)
         (geo:set-theta upper upper-theta)
         (after slp-time #'update)))
    (geo:add-geo upper fore) ; make FORE a member of UPPER
    (pack cnvs :fill :both :expand 1)
    (pack upper-slider :side :bottom)
    (pack fore-slider :side :bottom)
    (update))))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:44:28.820

请原谅，我似乎没有进行尽职调查，这个问题是 3 年前在以下位置回答的：http: [//permalink.gmane.org/gmane.lisp.ltk.user/329](http://permalink.gmane.org/gmane.lisp.ltk.user/329)

答案是传递给 :VARIABLE 的名称实际上并没有自动更新。我没有弄乱 :VARIABLE，而是将 LAMBDA 表达式传递给 :COMMAND 关键字；因此以下是正确的方法：

```
(upper-slider 
        (make-instance 'scale :from 0 :to 7 
               :length  360 
               :command (lambda (val) (setq upper-theta val))))
(fore-slider 
        (make-instance 'scale :from 0 :to 7 
               :length  360 
               :command (lambda (val) (setq fore-theta val)))) 
```

# ruby - 找不到捆绑命令 Windows x64

> ID：13897825
> 
> 赞同：25
> 
> 时间：2012-12-16T01:35:15.160
> 
> 标签：ruby, bundle, windows-7-x64, heroku-toolbelt

我刚刚使用 Heroku Toolbelt 安装了 ruby​​，当我这样做时，`bundle install`它给了我这个错误：

```
sh.exe": /c/Program Files (x86)/ruby-1.9.3/bin/bundle: "c:/Program: bad interpreter: No such file or directory 
```

根据这个问题[找不到捆绑命令。Bad Interpreter](https://stackoverflow.com/questions/10575644/bundle-command-not-found-bad-interpreter/13897538#13897538)我应该更改 PATH，但我不知道该怎么做，我更改了 windows PATH 环境变量，甚至更改为 C:\ruby-1.9.2\bin 我收到类似的错误：

```
sh.exe": /c/ruby-1.9.3/bin/bundle: "c:/Program: bad interpreter: No such file or directory 
```

当我尝试重新安装 Toolbelt 时，我将安装目录更改为 c:\，但向导仍然在 Program Files (x86) 目录中安装 git 和 ruby​​ 文件夹。

有什么建议么？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-12-16T02:58:50.907

您可能没有安装 Bundler gem。

假设你已经安装了 Ruby：

`gem install bundler`

应该做的伎俩。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T04:25:40.163

好吧，我找到了解决方案，所以我在这里发布。问题似乎是windows x64机器上的bunlder安装，为了解决这个问题我做了这个。

将以下目录复制到 C:/

> ```
> C:\Program Files (x86)\Heroku
> 
> C:\Program Files (x86)\Git
> 
> C:\Program Files (x86)\ruby-1.9.2 
> ```

更改 Windows 环境“路径”变量，为此右键单击计算机 > 属性 > 高级设置 > 环境变量。路径位于“系统变量”部分下。将它们编辑为：

> C:\Heroku\bin;C:\ruby-1.9.2\bin;C:\git\bin;C:\git\cmd

转到 C:\ruby-1.9.2\bin 并用记事本打开“bunlde”文件（不是 bundle.bat），将第一行从 更改`#!"c:/Program Files (x86)/ruby-1.9.2/bin/ruby.exe"##`为`!#!c:/ruby-1.9.2/bin/ruby.exe##`

现在转到 C:\Git 并更改 Git Bash 直接访问的属性（右键单击>属性），并将目标从更改`C:\Windows\SysWOW64\cmd.exe /c ""C:\Program Files (x86)\Git\bin\sh.exe" --login -i"`为`C:\Windows\SysWOW64\cmd.exe /c ""C:\Git\bin\sh.exe" --login -i"`

希望它可以帮助某人

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-09T07:48:58.037

**对于 Windows 用户：**

我使用 gitbash 安装捆绑器。

```
gem install bundler 
```

并且捆绑器已成功安装。即使在那之后我也面临着同样的问题。

发现这是由于我的情况下的一些许可问题。

这是我所做的：

1.  我启动了命令提示符（**注意：**具有管理员权限）
2.  我再次做了**gem install bundler并安装了它。**
3.  现在我可以做一些类似**bundle -v**的事情，它给了我当前安装的捆绑器版本。
4.  我使用**Git Bash**尝试了相同的**bundle -v** ，但它仍然无法以某种方式工作。
***   我重新启动了我的笔记本电脑，令人惊讶的是现在它可以工作了。**

 **希望这对任何人都有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T06:42:19.913

我遇到了这些问题，对我来说唯一的问题是文件路径中的空格。只需在路径周围添加 's 即可解决我的问题：

'C:\Program Files (x86)\git\bin';'C:\Program Files (x86)\Heroku\ruby-1.9.2\bin'

就是这样！**

# ios - 当 UIActionSheet 显示时抑制主视图变暗

> ID：13897826
> 
> 赞同：0
> 
> 时间：2012-12-16T01:35:18.607
> 
> 标签：ios, uiactionsheet

我有一个 UIActionSheet，当它显示它时，它会使后面的主视图变暗，我的印象是这是操作表的默认行为。我的问题是，如何覆盖此行为以使主屏幕保持与通常相同的色调？我假设我做了类似的事情：

```
mainView.alpha = 1f; 
```

或其他什么...我不记得是否需要最大化 alpha 或 0 以使屏幕具有相同的着色/透明度。无论如何，如果这是正确的，它应该发生在哪里？我的操作表被调用来代替 UITextField 的键盘。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:40:30.940

您无法更改此行为。`UIActionSheet`实际上是在您的视图之上呈现一个全新的视图。正是这个额外的视图增加了色彩。没有 API 可以改变这一点。

您最好的解决方案是实现您自己的自定义等效项，`UIActionSheet`以便它完全按照您的意愿行事。

# java - 无法运行 java 注释处理器

> ID：13897827
> 
> 赞同：7
> 
> 时间：2012-12-16T01:35:18.530
> 
> 标签：java, annotations, javac, processor

我在从命令行运行注释处理器时遇到了麻烦。问题是它适用于 Windows 环境，但不适用于我的 linux 安装。

我的处理器位于一个 jar 文件 (meta-validator.jar) 中。我还向 META-INF/services/javax.annotation.processing.Processor 添加了条目，其中包含我的处理器类的完全限定名称。

我正在尝试使用以下命令调用注释处理器：

```
javac -cp "./metadata-validator.jar; ... (path to annotations.jar etc.)" -processor xammt.validator.modules.ValidatorModule -proc:only " ... path to sources" 
```

在 Windows 环境下它可以正常工作（Windows 7 64bit Pro，JDK 1.7.xx），找到处理器并执行处理方法。

在我的 linux 环境中（Linux Mint 13 32bit -> 基本上是 Ubuntu 12.04，Oracle JDK 1.7）我收到消息：

```
error: Annotation processor 'xammt.validator.modules.ValidatorModule' not found
warning: Annotation processing without compilation requested but no processors were found. 
```

同样在没有`-processor`开关的情况下，我也会收到相同的警告（还有其他冗长的东西）。

什么可能导致这个问题？我猜我在 linux 机器上的 JDK 安装正确，因为我能够毫无问题地运行/编译 java 应用程序。

感谢您的任何建议。

**编辑：**我仍然不知道为什么这不起作用。有趣的是，它以编程方式工作 - 我设法通过 Java Compiler API 毫无问题地调用我的注释处理器（在两个平台上），由于调试，这也是更好的解决方案。

**EDIT2：** 实际命令：

```
javac -cp "./metadata-validator.jar;./lib/common-library.jar;./Annotation source.jar" 
-processor xammt.validator.modules.ValidatorModule -proc:only "SourceFile.java" 
```

**已解决：** 检查[http://en.wikipedia.org/wiki/Classpath_(Java)#OS_specific_notes](http://en.wikipedia.org/wiki/Classpath_%28Java%29#OS_specific_notes)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T04:38:36.283

在 Linux 上，您是否使用冒号而不是分号作为类路径分隔符？包括您正在执行的 Linux 命令。

在类路径中将分号更改为冒号，它应该可以工作。

像这样：

```
javac -cp "./metadata-validator.jar:./lib/common-library.jar:./Annotation source.jar" -processor xammt.validator.modules.ValidatorModule -proc:only "SourceFile.java" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T02:44:52.477

我还发现 Debian Wheezy (7u3) 中包含的 OpenJDK 7 版本根本不适用于注释处理器。我做了一个 OpenJDK 7u9 的自定义构建（来自 Ubuntu Quantal），它运行良好。

我在 Debian 的 bugtracker 中报告了一个错误：[http ://bugs.debian.org/cgi-bin/bugreport.cgi?bug=697658](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=697658)

# asp.net - 散列密码的机制

> ID：13897828
> 
> 赞同：1
> 
> 时间：2012-12-16T01:35:21.293
> 
> 标签：asp.net, security, hash, passwords

我有一个 .net 应用程序，它将散列密码存储在 sql server 数据库中。

密码使用盐进行散列，该盐与散列密码一起存储在数据库中。

作为额外的安全层，我使用另一个站点范围的密钥对哈希密码进行哈希处理，出于安全原因，该密钥未存储在数据库服务器上。由于系统是负载平衡的，我应该将站点范围的密钥存储在哪里？将它的副本存储在我的每个 .net 应用程序的配置中（所有服务器上的值相同）。

第二个问题是，存储密码的推荐散列机制是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:13:22.400

我倾向于使用 bcrypt 存储密码。它的 .NET 实现是[BCrypt.NET](http://bcrypt.codeplex.com/)，因为此时它不在 .NET 框架中。您不想使用像 MD5 这样的通用哈希函数。另一种常见的算法是[PBKDF2](http://msdn.microsoft.com/en-us/magazine/cc163913.aspx)，但我个人没有在 .NET 中使用过它。

# c - 将函数中创建的字符串分配给 main 中创建的 typedef 结构体数组

> ID：13897835
> 
> 赞同：1
> 
> 时间：2012-12-16T01:37:22.157
> 
> 标签：c, arrays, pass-by-reference, typedef

好的。所以我在 C 语言中有这个程序，我在其中获取一个带有参数和值的字符串（例如：“GO 45 STOP 15”）。目标是解析字符串并将参数及其对应的值放入 typedef 结构中以供以后使用。

这是我的结构的样子：

```
typedef struct {
    char* keyword;
    double value;
} parameter; 
```

这是我遇到问题的一些代码副本。main() 和 initParams() 都在同一个文件中，因此都可以访问相同的 #defines...

主要的（）：

```
#include <stdio.h>
#include <stdlib.h>
#include "findArgs.h"

#define STR0_SIZE 80
#define LIST_SIZE   4
#define MAX_PARAMS 15

void main(){
int i;

char str0[STR0_SIZE] = "LEFT 45 GO 686 GO 34.3 STOP 56 RIGHT 26";   //Input String
char* wordList[LIST_SIZE]={"GO", "STOP", "LEFT", "RIGHT"};

int num_arg = 0; //Number of arguements in str0 (each space denotes the end of an arg)

parameter* param;
initParams(param);

replaceSpaces(str0, &num_arg);

findWords(param, str0, num_arg);
} 
```

初始化参数：

```
void initParams(parameter* param){
int ctr0, ctr1;

param = (parameter*) malloc(MAX_PARAMS * sizeof(parameter));
printf("\n%i\n", sizeof(parameter));
for(ctr0=0;ctr0<MAX_PARAMS;ctr0++){
        param[ctr0].keyword = "";
        param[ctr0].value = 0;
} 
```

好的一些快速解释。initParams 用于为我的每个参数分配内存。我假设我不知道字符串中将包含多少参数，并计划稍后在程序中确定字符串中的数字。我知道我不会接受超过字符串中的参数。
分配内存后，我循环遍历每一个并将每个值初始化为空字符串或 0。（我确实意识到这可能是不必要的，但是我已经将其作为代码故障排除的一部分。

继续，replaceSpaces() 简单地循环遍历字符串并将每次出现的 ' ' 替换为 '\0'。它还计算字符串中存在的争论数量，以便我知道我刚刚通过添加空终止符创建了多少新字符串。

现在是我遇到困难的棘手部分。

```
#define MAX_ARG_LENGTH 20

void findWords(parameter* param, char* str0, int num_arg){
parameter temp[countWords(str0, num_arg)];
int i;
int ctr0,ctr1, ctr2=0;
int word=0; //flag
char tempStr[MAX_ARG_LENGTH]="";
char* c0 = str0;

for(ctr0=0; ctr0<num_arg; ctr0++){
    word=0;
    ctr1=0;
    if(((*c0 > 'a') && (*c0 <'z')) || ((*c0 > 'A') && (*c0 <'Z'))){
        word=1;
        tempStr[ctr1]=*c0;
        ctr1++;
    }
    while(*c0 != '\0'){
        c0++;
        if(word)
            tempStr[ctr1++] = *c0;
        printf("\ntempStr: '%s'\n", tempStr);
    }
    if(word){
        param[ctr2].keyword = tempStr;
        printf("%s\n", param[ctr2].keyword);
        ctr2++;
    }
    c0++;
}
    for(i=0; i<num_arg/2;i++){
        printf("'%s'\n", param[i].keyword);
        printf("'%g'\n", param[i].value);
}

} 
```

此函数在查找字符串中的每个单词并将其存储在 tempStr 中时正常工作。我的问题是将它分配给我的 main() 中的参数数组。我尝试将它们分配给临时参数数组，然后将“参数”设置为等于临时数组。然而，由于 param 是一个指针，当我为它分配一个本地位置时，函数完成后，内存被释放和丢失。输入我的想法，使用 malloc 为它们预定义内存并在之后分配。

这是我编译和运行代码时的当前输出。我添加了评论以澄清

> 16 //sizeof(参数)
> 
> 5 //str0中的字数
> 
> 剩下
> 
> 去
> 
> 去
> 
> 停止
> 
> 对
> 
> 'RIGHT' //单引号中的内容是从参数数组中打印出来的
> 
> '8.05316e-315'
> 
> '对'
> 
> '0'
> 
> '对'
> 
> '8.04051e-315'
> 
> '对'
> 
> '0'
> 
> '对'
> 
> '0'
> 
> MAIN: //我使用 findWord() 中相同的 for 循环在 main 中打印了这些
> 
> '▒▒'
> 
> '8.05316e-315'
> 
> '▒▒'
> 
> '0'
> 
> '▒▒'
> 
> '8.04051e-315'
> 
> '▒▒'
> 
> '0'
> 
> '▒▒'
> 
> '0'

如果有人可以帮助我正确地将 tempStr 的内容分配给我在 main 中声明的数组中的参数，我将不胜感激。如果您需要更多信息，请告诉我。

谢谢你们！！我得到了它！！！

我没有制作“tempStr”，而是将字符直接分配给 param[index].keyword。它就像一个魅力

非常感谢你们！我已经阅读了许多不同的 Qs 和 As here，但这是我第一次发帖。我对你们能够如此迅速地回复感到非常兴奋。

再次感谢！

〜尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:45:48.857

I think you are misunderstanding what `param[ctr2].keyword = tempStr;` does It does not copy the string in `tempstr` to `keyword` it just makes `keyword` point to `tempstr`, which means all the keywords will point to the `tempStr` variable and will be invalid if you access it outside this function.

What you want to do is to make

```
char* keyword; 
```

into

```
char keyword[MAX_ARG_LENGTH]; 
```

And use something like `strcpy` or `strncpy` to do the copying.

You also do not appear to be setting `value` anywhere

# php - 为什么不显示这个？

> ID：13897839
> 
> 赞同：1
> 
> 时间：2012-12-16T01:38:36.947
> 
> 标签：php, wordpress

无法弄清楚我在这里做错了什么这是模板文件的顶部

```
<?php
/**
 * @package 1
 * @since 1 1.0
 */

$source_name = get_post_meta($post->ID, 'Source Name', true);
$source_url = get_post_meta($post->ID, 'Source URL', true);
?> 
```

下面是另一部分：

```
<?php if($source_url) { ?>
<div id="content-source">
    <span>Source:</span> <a href="<?php echo $source_url; ?>"> <?php echo $source_name; ?></a>
</div>
<?php } ?> 
```

如果我删除它`<?php if($source_url) { ?>`并且`<?php } ?>`它工作正常，但是我如何让它工作，所以如果没有源，什么都不会显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:44:32.070

快速查看`get_post_meta()`函数：

> 如果没有要返回的内容，该函数将返回一个空数组，除非 $single 已设置为 true，在这种情况下返回一个空字符串。

所以，试试：

```
 <?php if($source_url <> "") { ?>
    <div id="content-source">
        <span>Source:</span> <a href="<?php echo $source_url; ?>"> <?php echo $source_name; ?></a>
    </div>
    <?php } ?> 
```

以前您正在检查是否没有返回任何内容。您需要改为检查空字符串。

# erlang - 字符串后的erlang异常：从文件读取的行上的令牌

> ID：13897840
> 
> 赞同：1
> 
> 时间：2012-12-16T01:38:47.150
> 
> 标签：erlang

试图将从文件中读取的 Line 剪切成字符串列表。这总是导致我不知道要解决的异常。

```
 exception error: no function clause matching string:tokens1
(<<"Cascading Style Sheets CSS are an increasingly common way for website developers to control the look\n">>," ,.",[]) in function  readTest:run/1

-module(readTest).
-export([run/1]).

open_file(FileName, Mode) ->
    {ok, Device} = file:open(FileName, [Mode, binary]),
    Device.

close_file(Device) ->
    ok = file:close(Device).

read_lines(Device, L) ->
    case io:get_line(Device, L) of
        eof ->
            lists:reverse(L);
        String ->
            read_lines(Device, [String | L])
    end.

run(InputFileName) ->
    Device = open_file(InputFileName, read),
    Data = read_lines(Device, []),
    close_file(Device),
    io:format("Read ~p lines~n", [length(Data)]),
    Bla = string:tokens(hd(Data)," ,."),
    io:format(hd(Data)). 
```

愿它很容易失败。刚开始使用erlang。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:24:05.053

当您打开带有二进制标志的文件时，行被读取为二进制而不是列表（字符串）。所以在你的代码中

```
 Bla = string:tokens(hd(Data)," ,."), 
```

hd(Data) 实际上是一个二进制文件，它会导致 string:tokens 崩溃。您可以从 file:open 中删除二进制标志，或者将二进制显式转换为列表：

```
 Bla = string:tokens(binary_to_list(hd(Data))," ,."), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T10:04:24.057

也可以在不将其转换为列表的情况下拆分二进制文件：

```
Bla = binary:split(Data, [<<" ">>, <<",">>, <<".">>], [global]) 
```

（请参阅[binary:split/3 的文档](http://www.erlang.org/doc/man/binary.html#split-3)。）

# jquery - Jquery ui timepicker不会触发

> ID：13897842
> 
> 赞同：2
> 
> 时间：2012-12-16T01:39:05.933
> 
> 标签：jquery, jquery-ui, timepicker

我是一个 javascript 新手，尤其是 jquery，我无法让 datetimepicker 触发。我确信我犯了一个基本的错误，但我一生都无法弄清楚。我期待时间选择器在我点击它时触发。

谁能告诉我我做错了什么？（我正在使用这个时间选择器-http://trentrichardson.com/examples/timepicker/#rest_examples）

**外部样式表和 javascript 文件**- 可能相关也可能不相关

```
<link rel="stylesheet" href="http://127.0.0.1/bi/assets/bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="http://127.0.0.1/bi/assets/bootstrap/css/custom_bootstrap.css">
<link rel="stylesheet"
    href="http://127.0.0.1/bi/assets/bootstrap/css/bootstrap-responsive.min.css">
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css">
<link rel="stylesheet"
    href="http://127.0.0.1/bi/assets/timepicker/jquery-ui-timepicker-addon.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
<script src="http://127.0.0.1/bi/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="http://127.0.0.1/bi/assets/jquery_validate/jquery.validate.min.js"></script>
<script src="http://127.0.0.1/bi/assets/timepicker/jquery-ui-timepicker-addon.js"></script> 
```

**HTML** - 相关标记

```
<form class="well form" method="post" id="checkin">
    <fieldset>
        <input type="text" name="basic_example_1" id="basic_example_1" value="" class="hasDatepicker">
    </fieldset>
    <div class="form-actions">
        <button type="reset" class="btn">Clear</button>
        <button type="submit" class="btn btn-primary" name="checkin" value="submit">Checkin</button>
    </div>
</form> 
```

**之前的 Javascript`</body>`** - 相关的 javascript

```
<script type="text/javascript">
$(document).ready(function(){
    $('#basic_example_1').datetimepicker();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:19:22.793

hasDatepicker 是 jQuery UI 添加的，自己添加会导致问题。大概是因为它认为它已经添加了一个日期选择器并且不会在同一个元素中添加第二个。

```
<input type="text" name="basic_example_1" id="basic_example_1" value="" /> 
```

# c# - 如何判断一个词的唯一性？

> ID：13897843
> 
> 赞同：2
> 
> 时间：2012-12-16T01:39:14.153
> 
> 标签：c#

我有一个大约 300,000 字的文本文件。每个单词5个字母。

我希望能够确定每个单词在互联网上的独特性。

我的一个想法是谷歌这个词，看看它产生了多少结果。不幸的是，这违反了他们的服务条款。

我试图想出任何其他方式，但它必须涉及到查询一些网站很多，我怀疑他们会很感激。

有人有其他想法吗？编程语言无关紧要，但我更喜欢 C#。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:42:35.053

如果您的话不包含俚语，我建议您查看[公共领域的书籍](http://en.wikipedia.org/wiki/Category%3aPublic_domain_books)。这里的问题是这些书籍中的大多数都比较老，所以你真的会*及时了解一个单词的流行程度*（或者我猜是）。有利的一面是，这些书籍以文本文件格式免费提供，使您可以轻松地挖掘它们以获取数据。

需要注意的一点是，如果您在美国并计划使用[Project Gutenberg](http://www.gutenberg.org)来获取书籍，他们有一条规则，即该网站仅供人类用户使用。有一个[页面告诉您如何通过 mirror 获取相同的数据](http://www.gutenberg.org/wiki/Gutenberg%3aInformation_About_Robot_Access_to_our_Pages)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T01:48:00.333

要查找“书中”的频率，您可以使用[Google Ngram dataset](http://storage.googleapis.com/books/ngrams/books/datasetsv2.html)，但这不是“用于互联网”。如果这是出于学术目的，[Bing 替代方案](http://research.microsoft.com/en-us/collaboration/focus/cs/web-ngram.aspx)也可能有效，并且它基于互联网频率。

# ruby-on-rails - 如何删除重复的验证错误

> ID：13897844
> 
> 赞同：12
> 
> 时间：2012-12-16T01:39:38.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, devise, simple-form

我在使用注册表单时遇到问题。它是用 SimpleForm 创建的，身份验证是用 Devise 完成的。提交表单时，如果电子邮件或密码为空，则会显示两次错误。在用户模型中，存在对名字、姓氏、个人资料名称、密码和电子邮件的存在验证。这些重复错误仅出现在空白的电子邮件和密码字段中。任何其他空白字段都会这样说一次。

例子：

> **# 禁止保存此用户的错误：**
> 
> *   电子邮件不能为空
> *   电子邮件不能为空
> *   密码不能为空
> *   密码不能为空

用户.rb：

```
 class User < ActiveRecord::Base

      devise :database_authenticatable, :registerable,
           :recoverable, :rememberable, :trackable, :validatable

      attr_accessible :email, :password, :password_confirmation, :remember_me, :first_name, :last_name, :profile_name

      validates :first_name, :last_name, :email, :profile_name, :password, presence: true

      validates :profile_name, uniqueness: true,
                               format: {
                                  with: /^[a-zA-Z0-9_-]+$/
                               }
      has_many :posts

      def full_name
        first_name + " " + last_name
      end
    end 
```

注册/new.html.erb：

```
 <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
    <%= devise_error_messages! %>

    <div class="formGroupLeft">
      <%= f.input :first_name, :input_html => { :class => 'formGroupInput'} %>
    </div>
    <div class="formGroupRight">
      <%= f.input :last_name, :input_html => { :class => 'formGroupInput'} %>
    </div>
    <div class="formGroupLeft">
      <%= f.input :email, :input_html => { :class => 'formGroupInput'} %>
    </div>
    <div class="formGroupRight">
      <%= f.input :profile_name, :input_html => { :class => 'formGroupInput'} %>
    </div>
    <div class="formGroupLeft">
      <%= f.input :password, :input_html => { :class => 'formGroupInput'} %>
    </div>
    <div class="formGroupRight">
      <%= f.input :password_confirmation, :input_html => { :class => 'formGroupInput'} %>
    </div>

    <div class="formActions">
      <%= f.button :submit, "Sign Up" %>
    </div>

  <% end %> 
```

为什么会这样？我该如何尝试修复它？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-16T02:00:15.367

看起来您已经指定了设计可验证插件，[它添加了电子邮件/密码验证。](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/Validatable)

```
class User
  devise :database_authenticatable, ... :validatable
end 
```

由于您要指定自己的验证，我会省略设计可验证插件。

# ruby - 是否可以将 JSON 字符串转换为对象？

> ID：13897846
> 
> 赞同：25
> 
> 时间：2012-12-16T01:40:54.073
> 
> 标签：ruby, json

> **可能重复：**
> [在 ruby​​ 中解析 JSON 字符串](https://stackoverflow.com/questions/5410682/parsing-a-json-string-in-ruby)

是否可以将 JSON 字符串转换为 Ruby 对象？我想使用类似于以下的表达式访问其信息：

```
drawer.stations.tv.header 
```

JSON字符串：

```
{
  "drawer" : {
    "stations" : {
      "tv" : {
        "header" : "TV Channels",
        "logos" : {
          "one" : "www1",
          "two" : "www2",
          "three" : "www3"
        }
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-12-16T09:46:40.027

您可以将字符串解析为 ruby​​ 哈希，然后将其转换为[Mash](https://github.com/intridea/hashie)。Mash 为您提供类似方法的访问。

```
require 'json'
require 'hashie'

hash = JSON.parse json_string
obj = Hashie::Mash.new hash
obj.drawer.stations.tv.header # => "TV Channels" 
```

### 更新

您也可以在没有 3rd 方 gem 的情况下使用 ruby​​ 自己的`OpenStruct`：

```
require 'ostruct'
require 'json'

obj = JSON.parse(json_string, object_class: OpenStruct)
obj.drawer.stations.tv.header # => "TV Channels" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-16T01:43:46.950

如果您将此字符串解析为 ruby​​ 对象，它将返回一个 ruby​​ Hash 对象，您可以像这样获取它

```
 ruby_obj = JSON.parse(json_string)
  ruby_obj['drawer']['stations']['tv']['header'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T09:22:52.647

```
require 'json'

json_info = %q(
{
  "drawer" : {
    "stations" : {
      "tv" : {
        "header" : "TV Channels",
        "logos" : {
          "one" : "www1",
          "two" : "www2",
          "three" : "www3"
        }
      }
    }
  }
}
)

class MyJson
    def self.for(p_jason_string)
        self.new(JSON.parse(p_jason_string))
    end

    def initialize(p_info)
        @info = p_info
    end

    def inspect
        @info.inspect
    end

    def method_missing(p_missing_method_name)
        print 'mm '; p p_missing_method_name
        key = p_missing_method_name.to_s

        if @info.has_key?(key)
        then
            MyJson.new(@info[key])
        else
            puts "no key #{p_missing_method_name}"
        end
    end
end # class MyJson

holder = MyJson.for(json_info)
puts '-----holder.drawer'
p holder.drawer
puts '-----holder.drawer.stations'
p holder.drawer.stations
puts '-----holder.drawer.stations.tv.header'
p holder.drawer.stations.tv.header 
```

执行 ：

```
$ ruby -v
ruby 1.9.2p320 (2012-04-20 revision 35421) [x86_64-darwin12.2.0]
$ ruby -w t.rb
-----holder.drawer
mm :drawer
{"stations"=>{"tv"=>{"header"=>"TV Channels", "logos"=>{"one"=>"www1", "two"=>"www2", "three"=>"www3"}}}}
-----holder.drawer.stations
mm :drawer
mm :stations
{"tv"=>{"header"=>"TV Channels", "logos"=>{"one"=>"www1", "two"=>"www2", "three"=>"www3"}}}
-----holder.drawer.stations.tv.header
mm :drawer
mm :stations
mm :tv
mm :header
"TV Channels" 
```

请注意，我使用 RVM 并没有做任何特别的事情来让 json 工作，必须是自动安装的。

# sql-server - 创建脚本以更改数据库的排序规则

> ID：13897847
> 
> 赞同：1
> 
> 时间：2012-12-16T01:40:54.900
> 
> 标签：sql-server, sql-server-2012, collation

我已经使用 sql server 2012 数据库数周了，现在我想更改数据库的排序规则。

我认为只需更改其整体设置很容易，但不幸的是，这仅适用于这一点，而不是当前的数据库设置。

所以我需要生成一个脚本来改变数据库的排序规则，包括它现有的内容/结构。

任何人都可以协助自动化这个或任何提示如何生成脚本来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:17:58.620

刚刚做了一个快速的谷歌搜索并想出了这些：

[http://msdn.microsoft.com/en-us/library/ms175835.aspx](http://msdn.microsoft.com/en-us/library/ms175835.aspx)（不是很有帮助，只解释了如何在数据库上设置排序规则，不涉及更改现有表）

[动态更新数据库中所有字段的排序规则](https://stackoverflow.com/questions/1878430/update-collation-of-all-fields-in-database-on-the-fly)（我认为这是你想要的）

# html - 需要删除丑陋的 tumblr 左边框但遇到问题

> ID：13897848
> 
> 赞同：0
> 
> 时间：2012-12-16T01:40:57.253
> 
> 标签：html, css, tumblr

我正在修改的网站是：www.fashiontogo.ca

请通过 Google Chrome 的查看源代码功能查看源代码，因为我无法在此处直接提供 HTML 或 CSS。这不是我的网站，也不是我从头开始开发的。查看右上角的个人资料图片或页面上的任何图像。你会看到一个 1px 的左边框（有一个边距与个人资料图片相关联，但不是其他的）。那需要被删除。

我为该站点提供的 CSS 文件不包含任何导致此问题的内容。我已经尝试删除 CSS 中所有“border”或“border-left”的实例，但没有任何改变。我能够做的唯一可能的事情是删除图像周围的 div 元素（名为 .img_container）。一个 hack 修复（我宁愿避免）是使用 jQuery 在加载时动态删除所有 img_container div，但我更愿意为此找到一些 CSS 修复。

有什么建议或想法吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T01:48:51.297

有一个规则

```
.img_container::after { 
    ...
    background-color: rgba(0, 0, 0, 0.2);
} 
```

你必须去掉那个BG颜色

# c++ - LNK2019 C++ 类定义中的错误需要示例

> ID：13897853
> 
> 赞同：1
> 
> 时间：2012-12-16T01:41:41.783
> 
> 标签：c++, class, header

> **可能重复：**
> [如何在 Visual Studio 2008 Express 中获得一个最小的 SDL 程序来编译和链接？](https://stackoverflow.com/questions/396183/how-do-you-get-a-minimal-sdl-program-to-compile-and-link-in-visual-studio-2008-e)

所以我是 C++ 新手，需要创建一个类。我认为这与 Sprite.cpp 中方法的实现有关。

谁能给我一个带有属性和方法的简单类的例子。或者至少让我知道我做错了什么？

错误 #1

```
Error   12  error LNK2019: unresolved external symbol __imp___CrtDbgReportW referenced in function "public: void __thiscall std::_String_const_iterator<char,struct std::char_traits<char>,class std::allocator<char> >::_Compat(class std::_String_const_iterator<char,struct std::char_traits<char>,class std::allocator<char> > const &)const " (?_Compat@?$_String_const_iterator@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QBEXABV12@@Z)   D:\GSE\Game with Jon Bye\game\game\main.obj 
```

错误 #2

```
Error   13  error LNK1120: 1 unresolved externals   D:\GSE\Game with Jon Bye\game\Debug\game.exe    1 
```

精灵.h

```
#include <string>
#include <SDL.h>
#include "Functions.h"

using namespace std;

class Sprite
{
private:
    int PosX;
    int PosY;
    int xDist;
    int yDist;
    string ImagePath;
    SDL_Surface Screen;
    SDL_Surface *temp, *sprite, *screen;

public:
    Sprite(int PosX, int PosY, string ImagePath, SDL_Surface Screen );
    void Sprite::DrawSprite( int x, int y, SDL_Surface *sprite, SDL_Surface *screen )
    {
        //Make a temporary rectangle to hold the offsets
        SDL_Rect offset;

        //Give the offsets to the rectangle
        offset.x = x;
        offset.y = y;

        //Blit the surface
        SDL_BlitSurface( sprite, NULL, screen, &offset );

        SDL_UpdateRect(screen, 0, 0, 0, 0);
    }

    void Sprite::Draw()
    {
        #pragma region Char to String Conversion

        string ImagePath;
        char * writable = new char[ImagePath.size() + 1];
        copy(ImagePath.begin(), ImagePath.end(), writable);
        writable[ImagePath.size()] = '\0';

        #pragma endregion
        temp = SDL_LoadBMP(writable);
        sprite = SDL_DisplayFormat(temp);
        SDL_FreeSurface(temp);

        // free the string after using it
        delete[] writable;

        DrawSprite(PosX, PosY, sprite, screen);
    }

    void Sprite::Move(int xDist, int yDist)
    {
        PosX += xDist;
        PosY += yDist;
        Draw();
    };
}; 
```

精灵.cpp

```
#include "Sprite.h"

Sprite::Sprite(int posX, int posY, std::string imagePath, SDL_Surface screen) :        PosX(posX), PosY(posY), ImagePath(imagePath), Screen(screen)
{
    void DrawSprite( int x, int y, SDL_Surface *sprite, SDL_Surface *screen );
    void Draw();
    void Move(int xDist, int yDist);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:47:36.777

啊，我的朋友乔纳森哦！看来您毕竟接受了我的建议来使用 SDL...

我不确定您的错误是什么意思，但我知道在 SDL 中，您需要输入以下内容：

```
#undef main 
```

在你之后：

```
#include <SDL.h> 
```

否则它将无法正常工作。为什么？出于某种原因，SDL 在某处定义了“main”，因此当您包含“SDL.h”时，链接器会发疯，并且会感到困惑（因为 main 是入口函数）。

也许这是您的错误的根源，尽管我对此表示怀疑，但错误消息看起来与字符串有关...

另外，我真的不明白您的 Sprite.CPP 文件中发生了什么。如果您还是 C++ 的新手并且正在研究如何在 C++ 中创建类，您会在这里找到一些 C++ 教程，这就是我开始学习 C++ 的方式：[http ://thenewboston.org/list.php?cat=16](http://thenewboston.org/list.php?cat=16)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:11:59.550

[使用向量和查找时 C++ 中未解决的外部问题](https://stackoverflow.com/questions/6003368/unresolved-externals-in-c-when-using-vectors-and-find)

我处于调试模式而不是发布模式。

确保在您选择的新发布模式中设置链接器设置等，并且您正在构建发布项目。

# php - PHP 还是使用 Exe 文件？

> ID：13897859
> 
> 赞同：0
> 
> 时间：2012-12-16T01:43:10.460
> 
> 标签：php, exe

> **可能重复：**
> [没有文件扩展名的网站网址？](https://stackoverflow.com/questions/322747/websites-urls-without-file-extension)

我不确定它到底是什么，但在查看了 Facebook 和其他网站后，我经常看到像[http://www.youtube.com/results?search_query=examplequery这样的网址](http://www.youtube.com/results?search_query=examplequery)

我的问题是 Facebook 等网站和其他网站是用 PHP 编写的，但并不总是使用 .php 扩展名，例如 youtube 的搜索而不是 results.asp 或 results.php，它只使用 /results？然后在末尾添加查询字符串。

谁能告诉我这些是使用 PHP/ASP.Net 还是像 cgi 程序这样的 EXE 文件？我很困惑。

提前感谢任何可以为我解决这个问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:56:37.357

您可以使用 MVC 模型在 PHP 中开发您的网站，这里有一篇文章（http://tonymarston.net/php-mysql/model-view-controller.html）介绍基本理论，您可以看看。顺便说一句，如果你正在开发一个新站点，你可以考虑使用[Drupal](http://drupal.org)，它应该很容易实现 MVC 模型而无需扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T01:51:45.587

它不是一个exe文件。我认为在 PHP 中你可以通过使用 .htaccess 删除/隐藏 PHP 扩展来做到这一点，但我不知道如何在 ASP 或其他语言中做到这一点

# html - 如何使用 javascript 或 css 使我的文本有点透明？

> ID：13897860
> 
> 赞同：0
> 
> 时间：2012-12-16T01:43:24.390
> 
> 标签：html, css, text, transparent

我有一个网站正在制作背景图像发生变化的地方，我希望文本模仿背景的颜色，但在它们不可见的地方不太多，我怎样才能以这种方式使我的文本透明？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:56:41.067

如果你的文本字体颜色为白色，并且你给[文本一个 opacity](https://developer.mozilla.org/en-US/docs/CSS/opacity)，如果它非常微弱，它将开始类似于底层颜色。这是您可以使用内联样式（为简单起见）（[参见此处的 jsFiddle](http://jsfiddle.net/FEB6P/)）的一种方法。

```
<html>
<body style="background:skyblue">
  <p style="color:#fff;opacity:0.3;filter:alpha(opacity=30);">This is some text that will be partially see-through.</p>
</body>
</html> 
```

作为旁注，您的网站将很难阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T02:38:10.040

使用透明颜色：

```
p {
  color: rgba(255,255,255, .5);
} 
```

# r - 如何从时间（时间序列）中获取 x 个标签

> ID：13897863
> 
> 赞同：3
> 
> 时间：2012-12-16T01:43:56.687
> 
> 标签：r

我正在尝试格式化我的 x 轴。

假设我想为 x 轴上的每个值获取“MM.YYYY”以便在 中使用它`axis()`，所以我：

```
> test <- ts (c(12,23,45,31,15), start=2012, frequency = 12)

> time(test)
      Jan      Feb      Mar      Apr      May
2012 2012.000 2012.083 2012.167 2012.250 2012.333 
```

我的问题是，如何将“2012.333”转换为“05.2012”。我试过：

```
> strftime(strptime(time(test),"%?.%?"),"%m.%Y") 
```

但我忽略了“%?.%?”中的适当变量

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T01:50:15.027

尝试这个：

```
> library(zoo)
> format(as.yearmon(time(test)), "%m.%Y")
[1] "01.2012" "02.2012" "03.2012" "04.2012" "05.2012" 
```

# android - 如何检测 Android 设备何时从深度睡眠中恢复？

> ID：13897864
> 
> 赞同：2
> 
> 时间：2012-12-16T01:43:57.280
> 
> 标签：android, multicast, power-management

我有理论认为我的 IGMP 多播套接字在设备从深度睡眠中恢复后停止工作（可能是因为 IGMP 组成员身份超时）。有没有办法检测设备是否已经进入睡眠状态（除了跟踪 upTimeMillis() 和当前挂钟时间之间的偏差）？请注意，我特别感兴趣的是 CPU 是否已进入睡眠状态，而不是屏幕是否已进入睡眠状态。是的，我有一个多播锁。但我想释放部分唤醒锁和/或 wifi 锁。

# javascript - 每当正确回答提示时尝试调出新按钮

> ID：13897865
> 
> 赞同：0
> 
> 时间：2012-12-16T01:44:03.347
> 
> 标签：javascript, html, prompt

所以现在我正在尝试编写一个本质上是一个简单的游戏的程序，其中给用户一个谜语，当他们给出正确的答案时，他们被允许继续下一个谜语。现在我可以提出一个提示，然后您回答导致更多文本的问题，并且我可以假设在其中添加一个按钮...但是随着按钮的出现，所有围绕它的编码也随之而来？有没有什么办法解决这一问题？或者对于我正在尝试做的事情，是否有更好的编码替代方案？我有点希望我知道如何使用表单而不是提示和按钮，但是从我试图找到的内容来看，我似乎看不到任何这样做的方法。

这是我到目前为止所写的（对不起，我以前没有在这个网站上发布过，我现在真的很绝望）（Ps。我知道我在编码方面很糟糕）：

```
<p>Click the button!.</p>

<button onclick="myFunction()">Try it</button>

<p id="demo"></p>

<script>

function nextButton()
{{
<button onclick="nextButton()">Next question!</button>
}

var y;
var name=prompt("What are bunnies?");

if (name!="fluffy")
{
 y= name + " " + "is" + " " + "wrong!";
 document.getElementById("demo").innerHTML=y;
 }
 else
 {
 y="correct!";
 document.getElementById("demo").innerHTML=y;
 }
 }

 function myFunction()
 {
 var x;

 var name=prompt("what is cute a fluffy and adorable?");

 if (name!="a bunny")
  {
  x= name + " " + "is" + " " + "wrong!";
  document.getElementById("demo").innerHTML=x;
  }
  else
  {

  x="correct!" + nextButton ;
 document.getElementById("demo").innerHTML=x;
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:47:38.147

您可以尝试加载隐藏功能，然后实现一个 else if 语句，如果选择了答案 a 则显示按钮 else msbox "请重试"？对不起; 我正在学习从 C# 和 C++ 中学到的东西，看看它在 Javascript 中是否对你有帮助，但我不能 100% 肯定它会。（所以如果你能让我知道那也很棒。:)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T01:54:10.523

也许将您的 nextButton 函数更改为以下内容：

```
function nextButton()
{
   return "<button onclick='nextButton()'>Next question!</button>";
} 
```

看看这是否有效。

编辑：也改变

```
x="correct!" + nextButton ; 
```

到：

```
x="correct!" + nextButton() ; 
```

那应该可以解决脚本问题。

祝你好运！

# regex - 在 Ocaml 中拆分字符串 - 但不是当分隔符被反斜杠转义时

> ID：13897866
> 
> 赞同：3
> 
> 时间：2012-12-16T01:44:11.600
> 
> 标签：regex, split, escaping, ocaml

**目标：**能够拆分以下字符串：`"command/test \/ escaped/"`

进入以下列表：`["command", "test / escaped"]`

**当前的正则表达式**如下所示：

`Str.split (Str.regexp "/") string_to_split;;`

这太简单了，我需要在字符串前面加上反斜杠来转义。

**我试过**这个：`Str.regexp "((?!\\).)/"`但它不适用于 Ocaml 解析器，产生：`uncaught exception Failure("spurious \) in regular expression")`

有任何想法吗？

我应该提一下，我注意到 Ocaml 解析器会自动转义字符串中的反斜杠，因此像：这样的字符串 `"foobar\/barfoo"`会转换为`"foobar\\/barfoo"`. 因此，也许有人实际上想要删除字符串中的所有偶数反斜杠。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T06:21:56.220

您需要两次转义反斜杠：

*   一次用于字符串内容
*   一次用于正则表达式

所以正确的正则表达式是`Str.regexp "((?!\\\\).)/"`.

但是，该正则表达式不起作用。

我建议改为 3 种其他解决方案：

*   `match_beginning`使用等手动进行搜索和拆分，
*   对字符使用简单的拆分`'/'`，并根据需要重新组合字符串，
*   用另一种组合替换`\\/`字符，比如说`\\§`（或其他一些不太可能出现在您希望处理的文本中的字符串），进行拆分，然后在每个子字符串中进行反向替换（这次仅将 '§' 替换为 '/ '）。

如果你有一个很好的 in 替换字符，最后一个可能是最快`'/'`的`"\\/"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T17:57:31.137

这是一个不太明显的解决方案：

```
let rec split s = Scanf.sscanf s "%s@/%s@\n" (fun left right ->
  let llen = String.length left in
  let (left, escaped) = 
    if llen > 0 && left.[llen - 1] = '\\' then
      (String.sub left 0 (llen - 1), true) 
    else
      (left, false) in
  if right = "" then
    [left]
  else match split right with
    h :: t when escaped ->
      (left ^ "/" ^ h) :: t|
    ht ->
      left :: ht         
);; 
```

和输出：

```
# split "command/test \\/ escaped/";;
- : string list = ["command"; "test / escaped"] 
```

这有点太神秘了，但仍然可以完成这项工作。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T17:34:15.063

AFAIR，***Str.regexp***不支持`!`构造。

但是，[PCRE-OCaml](https://bitbucket.org/mmottl/pcre-ocaml)库会：

```
# #directory "+pcre";;
# #load "pcre.cma";;
# Pcre.split 
    ~rex:(Pcre.regexp ~flags:[`EXTENDED] "(?<!\\\\)/")
    "command/test \\/ escaped/"
  ;;
- : string list = ["command"; "test \\/ escaped"] 
```

如果你想摆脱`\/`字符串转义，你要么必须对*split*的结果进行后处理，要么（更好地）使用*match*并自己构建该列表。

# objective-c - CIImage:imageWithCVPixelBuffer: 不适用于 copyNextSampleBuffer 中的缓冲区？

> ID：13897868
> 
> 赞同：1
> 
> 时间：2012-12-16T01:44:18.340
> 
> 标签：objective-c, ios, avassetreader

长期潜伏者，第一次海报。

我正在尝试解码视频并将每一帧保存为图像。（该视频是我之前录制的，可以在 iPhone 上正常播放。）我的第一步是确保我得到正确的图像数据，所以这个小片段只是为了在 UIImageView 中显示它：

```
- (void)showFrame:(UIImage*)frame {
    self.videoIV.image=frame;
}

- (void)unarchiveThread:(NSString*)fileName {
    NSAutoreleasePool *pool=[[NSAutoreleasePool alloc] init];

    AVURLAsset *asset = [[[AVURLAsset alloc] initWithURL:[NSURL fileURLWithPath:fileName] options:nil] autorelease];
    if (asset==nil) {
        NSLog(@"Couldn't load avasset from '%@'\n",fileName);
        return;
    }
    AVAssetReader *reader=[[[AVAssetReader alloc] initWithAsset:asset error:NULL] autorelease];

    NSArray* video_tracks = [asset tracksWithMediaType:AVMediaTypeVideo];
    AVAssetTrack* video_track = [video_tracks objectAtIndex:0];
    CGAffineTransform transform=video_track.preferredTransform;

    NSDictionary* dictionary = [NSDictionary dictionaryWithObject:@(kCVPixelFormatType_32BGRA) forKey:(NSString*)kCVPixelBufferPixelFormatTypeKey];
    AVAssetReaderTrackOutput* asset_reader_output = [[[AVAssetReaderTrackOutput alloc] initWithTrack:video_track outputSettings:dictionary] autorelease];
    [reader addOutput:asset_reader_output];

    [reader startReading];

    CMSampleBufferRef buffer;

    while ([reader status]==AVAssetReaderStatusReading ) {
        buffer = [asset_reader_output copyNextSampleBuffer];
        if (buffer!=NULL) {
            NSLog(@"buffer=%@",buffer);
            CVPixelBufferRef pixelBuffer = CMSampleBufferGetImageBuffer(buffer);
            NSLog(@"pixel buffer=%@",pixelBuffer);
            CIImage *cImage = [CIImage imageWithCVPixelBuffer:pixelBuffer];
            NSLog(@"cImage = %@",cImage);
            cImage=[cImage imageByApplyingTransform:transform];
            NSLog(@"transformed cImage = %@",cImage);
            UIImage *image=[UIImage imageWithCIImage:cImage];
            NSLog(@"image=%@",image);
            [self performSelectorOnMainThread:@selector(showFrame:) withObject:image waitUntilDone:YES];
            CMSampleBufferInvalidate(buffer);
            CFRelease(buffer);
            buffer = nil;
        }
    }
    [pool drain];
} 
```

前两个步骤工作正常（我得到一个有效的缓冲区和像素缓冲区），但由于`cIImage:imageWithCVPixelBuffer:`某种原因不能工作（get（null））。这是我的输出：

```
buffer=CMSampleBuffer 0xba6e2d0 retainCount: 1 allocator: 0x4b43e7
    invalid = NO
    dataReady = YES
    makeDataReadyCallback = 0x0
    makeDataReadyRefcon = 0x0
    formatDescription = <CMVideoFormatDescription 0xba6e260 [0x212eb48]> {
    mediaType:'vide'
    mediaSubType:'BGRA'
    mediaSpecific: {
            codecType: 'BGRA'               dimensions: 1920 x 1080
    }
    extensions: {<CFBasicHash 0xba6e2a0 [0x212eb48]>{type = immutable dict, count = 5,
entries =>
    2 : <CFString 0x4c0024 [0x212eb48]>{contents = "Version"} = <CFNumber 0xb8682b0 [0x212eb48]>{value = +2, type = kCFNumberSInt32Type}
    3 : <CFString 0x4bffe4 [0x212eb48]>{contents = "CVBytesPerRow"} = <CFNumber 0xba6e1f0 [0x212eb48]>{value = +7680, type = kCFNumberSInt32Type}
    4 : <CFString 0x466f1c [0x212eb48]>{contents = "CVImageBufferYCbCrMatrix"} = <CFString 0x466f2c [0x212eb48]>{contents = "ITU_R_709_2"}
    5 : <CFString 0x466f5c [0x212eb48]>{contents = "CVImageBufferColorPrimaries"} = <CFString 0x466f2c [0x212eb48]>{contents = "ITU_R_709_2"}
    6 : <CFString 0x466f8c [0x212eb48]>{contents = "CVImageBufferTransferFunction"} = <CFString 0x466f2c [0x212eb48]>{contents = "ITU_R_709_2"}
}
}
}
    sbufToTrackReadiness = 0x0
    numSamples = 1
    sampleTimingArray[1] = {
            {PTS = {0/600 = 0.000}, DTS = {INVALID}, duration = {INVALID}},
    }
    imageBuffer = 0xba6dff0
pixel buffer=<CVPixelBuffer 0xba6dff0 width=1920 height=1080 bytesPerRow=7680 pixelFormat=BGRA attributes=<CFBasicHash 0xba6de30 [0x212eb48]>{type = immutable dict, count = 3,
entries =>
    0 : <CFString 0x466cdc [0x212eb48]>{contents = "Height"} = <CFNumber 0x8e70ec0 [0x212eb48]>{value = +1080, type = kCFNumberSInt32Type}
    1 : <CFString 0x466ccc [0x212eb48]>{contents = "Width"} = <CFNumber 0x8e70eb0 [0x212eb48]>{value = +1920, type = kCFNumberSInt32Type}
    2 : <CFString 0x46707c [0x212eb48]>{contents = "PixelFormatType"} = <CFNumber 0xbb89710 [0x212eb48]>{value = +1111970369, type = kCFNumberSInt32Type}
}
 propagatedAttachments=<CFBasicHash 0xba6e110 [0x212eb48]>{type = mutable dict, count = 3,
entries =>
    0 : <CFString 0x466f1c [0x212eb48]>{contents = "CVImageBufferYCbCrMatrix"} = <CFString 0x466f2c [0x212eb48]>{contents = "ITU_R_709_2"}
    1 : <CFString 0x466f8c [0x212eb48]>{contents = "CVImageBufferTransferFunction"} = <CFString 0x466f2c [0x212eb48]>{contents = "ITU_R_709_2"}
    2 : <CFString 0x466f5c [0x212eb48]>{contents = "CVImageBufferColorPrimaries"} = <CFString 0x466f2c [0x212eb48]>{contents = "ITU_R_709_2"}
}
 nonPropagatedAttachments=<CFBasicHash 0xba6dce0 [0x212eb48]>{type = mutable dict, count = 0,
entries =>
}
 iosurface=0x0>
cImage = (null)
transformed cImage = (null)
image=<UIImage: 0x8c669d0> 
```

有人知道我做错了什么吗？我搜索了 Stack Overflow，发现了很多可以使用的示例（来自实时提要），但没有使用 AVAssetReader 然后将缓冲区从 copyNextSampleBuffer 转换为 CIImage。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T05:35:23.237

好的，我对此的理论如下。来自 copyNextSampleBuffer 的 CVPixelBufferRef 已经与 GPU 上的 IOSurface 相关联。

我能够通过获取 CVPixelBufferRef 数据并使用它创建一个传递给 [CIImage imageWithCGImage:] 的 CGImageRef 来完成这项工作。

实现如下（类方法，放在任何类中）。

```
+(CGImageRef) imageWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer
{
CGImageRef image = NULL;
CGColorSpaceRef colorSpace = (CGColorSpaceRef)CVBufferGetAttachment((CVImageBufferRef)pixelBuffer,kCVImageBufferCGColorSpaceKey,NULL);
    if (REQUIRED_DEBUG(colorSpace!=NULL))
        {
        image = [self imageWithCVPixelBuffer:pixelBuffer colorSpace:colorSpace];
        }
    return image;
}

+(CGImageRef) imageWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer colorSpace:(CGColorSpaceRef)colorSpace
{
    return [self imageWithCVPixelBuffer:pixelBuffer colorSpace:colorSpace copyMemory:YES];
}

static void sReleaseCVPixelBuffer(void* pixelBuffer, const void *data=0, size_t size=0) 
{   
    if (REQUIRED_DEBUG(pixelBuffer!=NULL))
        {
        REQUIRED_CVRETURN(CVPixelBufferUnlockBaseAddress((CVPixelBufferRef)pixelBuffer,kCVPixelBufferLock_ReadOnly));
        CVPixelBufferRelease((CVPixelBufferRef)pixelBuffer);
        }
}

static void sReleasePixelMemory(void* pixel_memory, const void *data=0, size_t size=0) 
{   
    if (REQUIRED_DEBUG(pixel_memory!=NULL))
        free(pixel_memory);
}

+(CGImageRef) imageWithCVPixelBuffer:(CVPixelBufferRef)pixelBuffer colorSpace:(CGColorSpaceRef)colorSpace copyMemory:(BOOL)copyMemory
{
CGImageRef imageRef = NULL;
CGBitmapInfo imageBitmapInfo = 0;
OSType sourcePixelFormat = CVPixelBufferGetPixelFormatType(pixelBuffer);
    if ( kCVPixelFormatType_32ARGB==sourcePixelFormat )
        imageBitmapInfo = kCGBitmapByteOrder32Big|kCGImageAlphaNoneSkipFirst;
    else if ( kCVPixelFormatType_32BGRA == sourcePixelFormat )
        imageBitmapInfo = kCGBitmapByteOrder32Little|kCGImageAlphaNoneSkipFirst;
    if (REQUIRED_DEBUG(imageBitmapInfo!=0) && REQUIRED_DEBUG(colorSpace!=NULL))
        {
    size_t imageRowBytes = CVPixelBufferGetBytesPerRow(pixelBuffer);
    size_t imageWidth = CVPixelBufferGetWidth(pixelBuffer);
    size_t imageHeight = CVPixelBufferGetHeight(pixelBuffer);
        if (REQUIRED_CVRETURN(CVPixelBufferLockBaseAddress( pixelBuffer, kCVPixelBufferLock_ReadOnly )))
            {
        size_t imageDataSizeBytes = imageRowBytes*imageHeight;
        void* imageBaseAddress = CVPixelBufferGetBaseAddress(pixelBuffer);
        if (REQUIRED_DEBUG(imageBaseAddress!=NULL))
                {
                if (copyMemory)
                    {
                void* pixel_memory = malloc(imageDataSizeBytes);
                    if (REQUIRED_DEBUG(pixel_memory!=NULL))
                        {
                        memcpy(pixel_memory,imageBaseAddress,imageDataSizeBytes);
                    CGDataProviderRef imageDataProvider =     CGDataProviderCreateWithData(pixel_memory, pixel_memory, imageDataSizeBytes, sReleasePixelMemory);
                        if (REQUIRED_DEBUG(imageDataProvider!=NULL))
                            {
                            imageRef = CGImageCreate(imageWidth, imageHeight, 8, 32, imageRowBytes, colorSpace, imageBitmapInfo, imageDataProvider, NULL, true, kCGRenderingIntentDefault);
                            CGDataProviderRelease(imageDataProvider);
                            }
                    }
                    }
                else /* make an alias of the bits in the CVPixelBuffer */
                    {
                CGDataProviderRef imageDataProvider = CGDataProviderCreateWithData((void*)pixelBuffer, imageBaseAddress, imageDataSizeBytes, sReleaseCVPixelBuffer);
                    if (REQUIRED_DEBUG(imageDataProvider!=NULL))
                        {
                        CVPixelBufferRetain(pixelBuffer);
                        imageRef = CGImageCreate(imageWidth, imageHeight, 8, 32, imageRowBytes, colorSpace, imageBitmapInfo, imageDataProvider, NULL, true, kCGRenderingIntentDefault);
                        REQUIRED_DEBUG(imageRef!=NULL);
                        CGDataProviderRelease(imageDataProvider);
                    }
                    else
                        sReleaseCVPixelBuffer(pixelBuffer);
                    }
                }
            }
        }
    REQUIRED_DEBUG(imageRef!=NULL);
    return imageRef;
}

+(CIImage*) coreImageForPixelBuffer:(CVPixelBufferRef)pixelBuffer colorSpace:(CGColorSpaceRef)colorSpace
{
CIImage* coreImage = nil;
#if 0 // FAILS TARGET_OS_IPHONE
    REQUIRED_DEBUG(coreImage = [CIImage imageWithCVPixelBuffer:pixelBuffer]);
#else
CGImageRef pixelBufferImageRef = [self imageWithCVPixelBuffer:pixelBuffer colorSpace:colorSpace];
    if (REQUIRED_DEBUG(pixelBufferImageRef!=NULL))
        {
        REQUIRED_DEBUG(coreImage=[CIImage imageWithCGImage:pixelBufferImageRef]);
        CGImageRelease(pixelBufferImageRef);
        }
#endif
    return coreImage;
} 
```

# php - 如何使用 ucwords() 将斜线后的字母大写？

> ID：13897869
> 
> 赞同：1
> 
> 时间：2012-12-16T01:44:29.370
> 
> 标签：php, string

我正在尝试将“预告片/宣传片”中的 T 和 P 大写，但`ucwords()`只会将 T 大写。有没有办法做到这一点？

**注意：**我不能只操作字符串将每个 / 转换为空格，然后再转换为斜杠，因为我将在诸如“音乐视频”之类的字符串上运行它，这些字符串中不应包含斜杠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:55:10.087

您可以使用两种方法。不太可靠，希望没有空格的选项：

```
str_replace(' ', '/', ucwords(str_replace('/', ' ', "trailer/promo,"))); 
```

然后可能是一种更强大的方法：

```
implode('/', array_map(ucwords, explode('/', "trailer/promo,"))); 
```

[http://codepad.org/N8FmWRz5](http://codepad.org/N8FmWRz5)

我敢肯定我可能会想到其他的。可能有类似的东西`filter_var()`，埋在某个地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T01:59:36.330

ucword 不会这样做，因为除非您在 ucwording 每个单词之后设法将单词分开并再次将它们连接在一起。这是一个简单的例子：

```
implode('/', array_map('ucwords',explode('/','trailer/promo')));

```

上面的代码很简单，使用“/”从字符串“trailer/promo”中创建一个数组来分隔单词。然后通过 ucwords() 运行每个单词（使用 array_map() ）。在每个单词被 ucwords 处理后，包含已处理值的数组再次使用相同的“/”连接在一起。所有这一切都只是一条线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-27T08:26:00.410

感谢 ucwords 的 delimiter 参数，从 PHP 5.4.32 和 5.5.16 开始，就这么简单：

```
ucwords($string, '/'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-29T11:00:15.933

您也可以在 php 7.2.24 中使用分隔符

```
$word = "White/white pearl and silver";
$result = ucwords(ucwords($word)), "/"); 
```

结果字符串将是“白色/白色珍珠和银色”

在 Laravel 5.7 中

```
ucwords(Illuminate\Support\Str::title($word), "/"); 
```

# android - android：在特定时间显示通知？

> ID：13897871
> 
> 赞同：3
> 
> 时间：2012-12-16T01:44:56.917
> 
> 标签：android, time, notifications

我有一个函数`show_notification()`，当用户点击一个按钮时我会调用它。关键是，我不想在他点击后显示通知[如下面的函数]，而是在特定的地方显示这个通知，`time= hours:mins`
其中小时和分钟是两个整数，具有我想要的时间值[例如小时=22和minutes=40..表示在 22:40 [10:40 pm] 触发此通知。顺便说一句，这个闹钟应该每天在同一时间重复。

```
public void show_notification() {
        CharSequence notify_msg="Don't foget!";
        CharSequence title= "you ve been notified by My app";
        CharSequence details= "It works!";
        NotificationManager nm= (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notify= new Notification(android.R.drawable.stat_notify_more,
                                notify_msg, 
                                System.currentTimeMillis());
        Context mycontext= ActA.this;
        Intent myintent= new Intent (mycontext, ActA.class);
        PendingIntent pending= PendingIntent.getActivity(mycontext, 0, myintent, 0); ///0's are not applicable here
        notify.setLatestEventInfo(mycontext, title, details, pending);

        nm.notify(0, notify);

    } 
```

我希望您能详细回答，因为我是一个非常新的开发人员。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T01:50:05.057

这很简单。您可以为此使用警报管理器。您可能需要修改清单文件并注册应用程序以从警报管理器获取通知。现在您可以要求警报管理器类在您的应用程序将收到的所需时间发送消息。

您必须以响应此消息并向用户显示通知的方式对您的活动进行编程。

# wpf - 列表框选定项作为新窗口的数据源

> ID：13897873
> 
> 赞同：0
> 
> 时间：2012-12-16T01:45:24.347
> 
> 标签：wpf, entity-framework-4

我有一个我正在开发的 WPF 应用程序，它使用 Entity Framework 4.0 一个 Observable Collection 和一些 CollectionViewSources。在我的表单上，我有两个文本框用于过滤我的数据，然后根据我过滤它的内容将其显示到一个列表框中。我需要做的是让用户从列表框中选择一个项目并点击一个按钮（“选择”），然后信息将在一个全新的窗口中显示为适当的集合。到目前为止，我有：

```
Imports System.Data.Objects

Public Class SearchText

Private db As New CraftingProjectsEntities
Private ProjectsData As ProjectsCollection

Private ProjectViewSource As CollectionViewSource
Private MaterialsViewSource As CollectionViewSource
Private ColoringsViewSource As CollectionViewSource
Private DirectionsViewSource As CollectionViewSource
Private SpecialsViewSource As CollectionViewSource

Private WithEvents ProjectView As ListCollectionView
Private MaterialsView As BindingListCollectionView
Private ColoringsView As BindingListCollectionView
Private SpecialsView As BindingListCollectionView
Private DirectionsView As BindingListCollectionView

Private Sub SearchText_Loaded(sender As Object, e As System.Windows.RoutedEventArgs) Handles Me.Loaded
    Dim query = From r In db.Projects
                                  Where r.Materials.Count > 1
                             Select r

     Me.ProjectViewSource = CType(Me.FindResource("ProjectsViewSource"), CollectionViewSource)
    Me.DirectionsViewSource = CType(Me.FindResource("DirectionsViewSource"), CollectionViewSource)
    Me.ColoringsViewSource = CType(Me.FindResource("ColoringsViewSource"), CollectionViewSource)
    Me.SpecialsViewSource = CType(Me.FindResource("SpecialsViewSource"), CollectionViewSource)
    Me.MaterialsViewSource = CType(Me.FindResource("MaterialsViewSource"), CollectionViewSource)
    Me.ProjectViewSource.Source = Me.ProjectsData

    Me.ProjectView = CType(Me.ProjectViewSource.View, ListCollectionView)
    Me.DirectionsView = CType(Me.DirectionsViewSource.View, BindingListCollectionView)
    Me.ColoringsView = CType(Me.ColoringsViewSource.View, BindingListCollectionView)
    Me.MaterialsView = CType(Me.MaterialsViewSource.View, BindingListCollectionView)
    Me.SpecialsView = CType(Me.SpecialsViewSource.View, BindingListCollectionView)

    MyLists.ItemsSource = ProjectsData

End Sub 

Private Sub Button1_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles Button1.Click

    Dim query2 As ObjectQuery(Of Project) = Nothing
    Dim query = From p In db.Projects
                Select p

    If TextBox2.Text.Length > 1 And TextBox1.Text.Length > 1 Then

        query2 = query.Where(Function(p) p.Materials.Any(Function(m) m.Material1.ToLower().Contains(Me.TextBox1.Text)) And
                 p.Materials.Any(Function(m) m.Material1.ToLower().Contains(Me.TextBox2.Text)))

    ElseIf TextBox2.Text.Length < 1 And TextBox1.Text.Length > 1 Then

        query2 = query.Where(Function(p) p.Materials.Any(Function(m) m.Material1.ToLower().Contains(Me.TextBox1.Text)))

    Else
        MessageBox.Show("What are you looking for?")
        Return
    End If

    Me.ProjectsData = New ProjectsCollection(query2.ToList(), db)
    MyLists.ItemsSource = ProjectsData

  End Sub
                           **Works great through here... Below is where i get lost trying to get the selected item to the new window**
  Private Sub btnSelect_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles btnSelect.Click
    Dim mychoice As New MyChoice
    Dim selitem = Me.MyLists.SelectedItem
    mychoice.ProjectsData = (selitem)
    mychoice.Show()
    Me.Close()
End Sub
End Class 
```

任何关于我如何做到这一点的想法，或者我可以在哪里找到一个例子来展示这样做的正确方法，将不胜感激。谢谢。亚当对不起....如果这有帮助，请不要使用 MVVM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T01:51:20.910

使您的模型`Project`成为`MyChoice`窗口类的参数。根据窗口是否需要它，`Project`为构造函数设置一个必需参数或可选参数`MyChoice`。将其设置为新窗口的 Layout Root 的数据上下文，将其设置为 Window 类本身的属性，或者将其放在 View Model 中；以合适的为准。

# java - 使用观察者模式移动标签 (JavaFx)

> ID：13897878
> 
> 赞同：0
> 
> 时间：2012-12-16T01:46:46.417
> 
> 标签：java, javafx, observer-pattern

我正在创建一个聊天程序，其中我的聊天人员是一个标签。当用户点击时，标签可以在屏幕上移动，`anchorpane`现在这里有两个senerios：

1.  聊天者必须在本地移动。

2.  客户端必须将此移动发送给所有其他连接的客户端。

如果对象按其应有的方式工作，则第二种情况很容易，目前我的`ChatPerson`对象如下所示：

```
 package GUI;

public class ChatPerson {

    private String username;
    private int x;
    private int y;
    // Brugerens ID i databasen
    private int id;

    public ChatPerson(String name){
        this.username = name;
    }

    public String getUserName(){
        return username;
    }
    public void setX(int x){
        this.x = x;
    }
    public void setY(int y){
        this.y = y;
    }
    public int getX(){
        return x;
    }
    public int getY(){
        return y;
    }
    public int getId(){
        return id;
    }
    public void setId(int id){
        this.id = id;
    }

} 
```

我的问题是我将如何实现这种行为。我查看了观察者模式，但我发现在这种情况下如何让它发挥作用很难？

此外，JavaFx 是否有某种我可以在这里使用的实现？我看过 Observablelist，但我真的不明白这对我有什么帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T17:39:12.737

在这种情况下，您可以使用观察者模式。我假设您在每个客户的某个地方都有一个相关人员列表。如果这是一些，通知其他人移动事件应该很简单。只需像这样使 ChatPerson 可观察

```
public class ChatPerson {
     //your props here :P...
    private final List<MoveListener> listeners = new ArrayList<MoveListener>();

    private void notifyListeners(MoveEvent e){
        for(MoveListener l : listeners){
             l.onMoveEvent(e);
        }
    }
    public void addMoveListener(MoveListener l){
        this.listeners.add(l);
    }
    public void removeMoveListener(MoveListener l){
        this.listeners.remove(l);
    }

    //i would create a move method but you can do this on setX() and setY()
    public void move(int x,int y){
        this.x=x;
        this.y=y;
        this.notifyListeners(new MoveEvent(this,x,y));
    }
    //your other method...
} 
```

现在是 MoveListener 接口。

```
public interface MoveListener{
    public void onMoveEvent(MoveEvent e);
} 
```

还有 MoveEvent。

```
public class MoveEvent{
    public final ChatPerson source;//i could be more generic but you get the ideea
    public final int currentX;
    public final int currentY;
    public MoveEvent(ChatPerson source, int x,int y){
        this.source = source;
        this.currentX = x;
        this.currentY = y;
    }
    //you can make the fields private and getters ofc :P
} 
```

现在，每当 ChatPerson 移动时，它都会以一种很好且通用的方式广播其位置，这取决于每个侦听器对其内容的响应以响应此事件。
在容器类（具有关联人员列表的类）中，只需实现一个 MoveListener 并将其添加到当前 ChatPerson。
在这个实现中，您可以遍历连接的人员列表并可以说“通过电线”发送当前位置。如果没有更多关于如何实现您的应用程序的详细信息，我真的无法给出更好的答案。
希望这会有所帮助。

# javascript - 如何访问 CoffeeScript 类中的 arguments.callee？

> ID：13897882
> 
> 赞同：1
> 
> 时间：2012-12-16T01:47:28.680
> 
> 标签：javascript, node.js, coffeescript

我有以下代码

```
class Foo 

  a: ->
    console.log arguments.callee.name

  b: ->
    @a()

  c: ->
    @a()

f = new Foo
f.b() #=> should output 'b'
f.c() #=> should output 'c' 
```

### 问题：如何获取班级中调用函数的名称？

* * *

这是一个用例

```
class Something extends Stream

  foo: ->
    _helper 'foo', 'a', 'b', 'c'

  bar: ->
    _helper 'bar', 'my neighbor totoro'

  dim: ->
    _helper 'dim', 1, 2, 3

  sum: ->
    _helper 'sum', 'hello', 'world'

  _helper: (command, params...) ->
    @emit 'data', command, params...

something = new Something
something.foo()
something.bar()
# ... 
```

我不想为每次调用我的私有`_helper`方法重复发送方法名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:41:09.347

这就是我会做的：

```
class Something extends Stream
    constructor: ->
        @foo = helper.bind @, "foo", "a", "b", "c"
        @bar = helper.bind @, "bar", "my neighbor totoro"
        @dim = helper.bind @, "dim", 1, 2, 3
        @sum = helper.bind @, "sum", "hello", "world"

    helper = (command, params...) ->
        @emit 'data', command, params... 
```

这种方法的优点是：

1.  该`helper`函数是一个私有变量。它不能通过实例直接访问。
2.  该`helper`函数只声明一次，并在所有实例之间共享。
3.  函数`foo`,`bar`和是`dim`的[部分](http://en.wikipedia.org/wiki/Partial_application "部分应用 - 维基百科，免费的百科全书")应用。因此，它们不会为函数体消耗更多内存。`sum``helper`
4.  它不需要像@loganfsmyth 的答案那样的循环。
5.  它更干净。

**编辑：**更清洁的方法是：

```
class Something extends Stream
    constructor: ->
        @foo = @emit.bind @, "data", "foo", "a", "b", "c"
        @bar = @emit.bind @, "data", "bar", "my neighbor totoro"
        @dim = @emit.bind @, "data", "dim", 1, 2, 3
        @sum = @emit.bind @, "data", "sum", "hello", "world" 
```

当然，这有点多余，但你不能对 JavaScript 这样的语言有更多期望。这不是[因素](http://factorcode.org/ "因子编程语言")。然而，它是可读的、干净的、易于理解的，而且最重要的是——正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:04:45.393

所以说清楚，我认为你拥有它的第二种方式是完全合理的，并且是要走的路。

但要回答您的问题，您可以动态生成每个函数以避免重新键入命令。

```
class Foo
  commands =
    foo: ['a', 'b', 'c']
    bar: ['my neighbor totoro']
    dim: [1,2,3]

  for own name, args of commands
    Foo::[name] = ->
      @emit 'data', name, args... 
```

并假设您希望这些功能有用，您仍然可以使用功能。

```
// ...
  commands =
    foo: (args...) -> return ['a', 'b', 'c']
    // ...

  for own name, cb of commands
    Foo::[name] = (command_args...) ->
      args = cb.apply @, command_args
      @emit 'data', name, args... 
```

# scala - 如何删除这个额外的类型参数？

> ID：13897885
> 
> 赞同：2
> 
> 时间：2012-12-16T01:47:46.347
> 
> 标签：scala, generics, covariance

我目前有：

```
class X[+T: Numeric](val x: T)
abstract class M[N: Numeric, T <: X[N]] { // <- I'd like to remove N.
  def apply(x: Int): T
  final def row = (1 to 10).map(this(_))
} 
```

我这样使用它：

```
class Y(x: Double, val y: Double) extends X[Double](x)
class Z extends M[Double, Y] {           // <- So that this is simpler.
  def apply(x: Int) = new Y(0.0, 0.0)
} 
```

它是这样工作的：

```
object testapp {
  // row is properly polymorphic, allowing access to Y.y
  def main(args: Array[String]): Unit = (new Z).row.map(r => println(r.y))
} 
```

我想`Z`更简单，以便我可以使用`M`：

```
class Z extends M[Y] {
  def apply(x: Int) = new Y(0.0, 0.0)
} 
```

或者，甚至更好：

```
class Z extends M[Double] {           // i.e. Meaning apply can return
  def apply(x: Int) = new Y(0.0, 0.0) // any subclass of X[Double]
} 
```

这是我达到这一点[的要点迭代。](https://gist.github.com/4301540)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T09:23:47.643

类型参数与类型成员的第三种方法是同时使用两者。

类型成员的一个优点是它不会污染子类的签名。如果类型成员是多余的（即使在具体类中），则类型成员可以保持抽象；如果需要，只有底层必须定义它。

```
 import scala.collection.immutable.IndexedSeq
  class X[+T: Numeric](val x: T)
  abstract class M[+A: Numeric] {
    type W <: X[A]
    def apply(x: Int): W
    final def row: IndexedSeq[W] = (1 to 10) map apply
    def sumx: A = {  // in terms of the underlying Numeric
      val n = implicitly[Numeric[A]]
      n fromInt (0 /: row)((s,w) => s + (n toInt w.x))
    }
  }

  class Y(x: Double, val y: Double) extends X[Double](x)
  class Z extends M[Double] {
    type W = Y
    def apply(x: Int) = new Y(0.0, 0.0)
  }

  def main(args: Array[String]): Unit = (new Z).row foreach (Console println _.y) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:46:41.803

你真的不需要`class M`这里：

```
class X[+T: Numeric](val x: T)
def row[W <: X[_]](c: => Int => W) = (1 to 10).map(c)

class Y(x: Double, val y: Double) extends X[Double](x)
def z = row(_ => new Y(0.0, 0.0))

def main(args: Array[String]): Unit = z.map(r => println(r.y)) 
```

如果你想保留`M`，你使用相同的想法：

```
class X[+T: Numeric](val x: T)
abstract class M[W <: X[_]] {
    def apply(x: Int): W
    final def row = (1 to 10).map(this(_))
}

class Y(x: Double, val y: Double) extends X[Double](x)
class Z extends M[Y] {
  def apply(x: Int) = new Y(0.0, 0.0)
}

def main(args: Array[String]): Unit = (new Z).row.map(r => println(r.y)) 
```

# android - 将MotionEvent转换为位置后，如何确定在expandablelistview中引用了哪个列表项

> ID：13897889
> 
> 赞同：1
> 
> 时间：2012-12-16T01:48:26.660
> 
> 标签：android, expandablelistview, gesturedetector

我有一个`ExpandableListView`带有自定义适配器的 , ，并且在我的手势检测器中，我试图弄清楚如何找到由手势选择的列表项。

```
class MyGestureDetector extends SimpleOnGestureListener {
    @Override
    public void onLongPress(MotionEvent e) {
        int itemnum = listView.pointToPosition((int) e.getX(), (int) e.getY());
        itemnum -= listView.getFirstVisiblePosition(); 
```

所以，如果 itemnum=7 它可能是

```
group A label
group B label
item B1
item B2
group C label
item C1
item C2
item C3 <== this is position 7, assuming group A label was still on the screen 
```

因此，如果组 B 被折叠，那么 itemnum 7 将是 C5 或 D1。

给定一个特定的位置编号，我如何确定它所指的组位置和子位置？

如果我知道哪个组被扩展了，那么我可以循环遍历，计算每个项目，但如果列表已经滚动，那么不应该计算前面的那些。

那么，给定一个`MotionEvent`我`ExpandableListView`如何将其转换为`View`所执行的操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:01:18.857

我找到了解决方案。不确定这是否是最好的方法。

```
 @Override
    public void onLongPress(MotionEvent e) {
        int itemnum = listView.pointToPosition((int) e.getX(), (int) e.getY());
                    int itemnum2 = itemnum - listView.getFirstVisiblePosition();
        View vi = listView.getChildAt(itemnum2); 
```

所以这就是我获得观点的方式。

不幸的是，为了找到子记录，在我的情况下，`File`我必须循环，在我`TextView`从`vi`上面检索到之后：

```
 String filename = textView.getText().toString();
                int groupCount = mAdapter.getGroupCount();
                for(int t = 0; t < groupCount; t++) {
                        int childCount = mAdapter.getChildrenCount(t);
                        for(int y = 0; y < childCount; y++) {
                            File f = (File) mAdapter.getChild(t, y);
                            if (f.getName().equals(filename)) {
                            }
                        }
                } 
```

# jsf - jsf输入文本到bean

> ID：13897895
> 
> 赞同：0
> 
> 时间：2012-12-16T01:49:26.963
> 
> 标签：jsf

在我的 JSF 应用程序中，我有一个包含多个 inputtext 组件的页面。显示页面时，这些 inputtext 组件将填充数据库中的数据。当我点击提交按钮时，我想将这些值作为参数传递给下一个 facelet。

发生的事情是当我点击提交时，传递的是旧值，而不是用户输入的更新值。这是 inputtext 组件之一的样子：

```
 <div align="center">
              <h:outputLabel value="Product Quantity " />
              <h:inputText id="quantity" value="#{product.quantity}" />
           </div> 
```

然后，在提交按钮中，我试图获取用户输入的值：

```
 <h:button value="Save Edits" outcome="welcome">
                  <f:param name="quantity" value="#{product.quantity}" />                    
                </h:button> 
```

假设 100 是该字段填充的原始数量。当用户将其更改为 110 并点击提交时，欢迎 facelet 仍然认为 100 是值。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T04:51:31.357

您决定使用 a`<h:button/>`而不是 a 有什么特别的原因`<h:commandButton/>`吗？因为这就是你的参数没有进入下一页的原因

`<h:commandButton/>`处理它所包含`<h:form/>`的内容，在 POST 请求中将其内容提交给服务器（以及 JSF 处理生命周期等），同时`<h:button/>`将生成一个 GET 请求。`<h:button/>`一般用于导航。`<h:commandButton/>`如果您想做的不仅仅是导航，请坚持

# python - 在构造函数中使用 **kwargs 时出现意外的关键字参数

> ID：13897896
> 
> 赞同：15
> 
> 时间：2012-12-16T01:49:43.920
> 
> 标签：python

我很困惑。我正在尝试创建一个不关心任何关键字参数的子类——只需将它们一直传递给超类，并显式设置构造函数所需的一个参数。这是我的代码的简化版本：

```
class BaseClass(object):
    def __init__(self, required, optional=None):
        pass

def SubClass(BaseClass):
    def __init__(self, **kwargs):
        super(SubClass, self).__init__(None, **kwargs)

a = SubClass(optional='foo')  # this throws TypeError!?!?? 
```

这失败了

```
leo@loki$ python minimal.py
Traceback (most recent call last):
  File "minimal.py", line 9, in <module>
    a = SubClass(optional='foo')
TypeError: SubClass() got an unexpected keyword argument 'optional' 
```

当方法有 时，它如何抱怨意外的关键字参数`**kwargs`？

（Ubuntu 上的 Python 2.7.3）

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-16T01:51:15.997

```
def SubClass(BaseClass): 
```

是一个函数，而不是一个类。没有错误，因为`BaseClass`可能是参数名称，并且允许嵌套函数。语法很有趣，不是吗？

```
class SubClass(BaseClass): 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-10T05:35:17.137

在寻找完全相同的错误但原因不同的答案时偶然发现了这篇文章。

我解决了我的问题（python 初学者的错误），但我认为我应该把它放在这里以防它帮助别人。

我的项目结构：

```
project\
--package1\
----Module1.py
----Module2.py
--package2\
...blah blah blah... 
```

**其中 Module2 扩展 Module1，类名与模块/文件名相同**

在 Module2.py 中，我有：

```
from package1 import Module1 
```

假设这将导入其中的类。

尝试创建 Module2 类时收到意外的关键字参数错误

```
Mod2 = Module2(kw1=var1, kw2=var2) 
```

通过使用修复

```
from package1.Module1 import Module1 
```

那是`[package name].[module name] import [class name]`

希望这对其他人有帮助

# c++ - 列表容器 - 使用不相关类型存储和删除

> ID：13897900
> 
> 赞同：1
> 
> 时间：2012-12-16T01:50:38.110
> 
> 标签：c++

编辑：

我选择重写我的整个问题，并一步一步地让它变得更详细。

因此，我想将类型存储在 std::list 中（如下所示的 ObjectA 和 ObjectB ），而这些类型又必须具有返回预期类型的​​成员属性（如本例中的 int const* ）：

```
class ObjectA
{

public:

    int const* GetItem () {return mpItem;} const;

private:

    int*        mpItem;
    ObjectC     mrObjectC;

}; // class

class ObjectB
{

public:

    int const* GetItem () {return &mrItem;} const;

private:

    int         mrItem;
    ObjectD     mrObjectD;

}; // class 
```

所以现在上面的两个对象需要在 std::list 中，如下所示：

```
ObjectA         nrA;
ObjectB         nrB;

std::list<###   const*> nrRender;

nrRender.push_back (nrA); // comes down to storing ObjectA and ObjectB
nrRender.push_back (nrB); // inside the same list 
```

在这一切完成之后。子例程迭代 std::list 并发送数据以进行进一步处理，如下所示：

```
std::list<###   const*> nrRender::const_iterator niObject;
for (niObject = nrRender.begin(); niObject != nrRender.end(); ++niObject) {

    this -> Display ((*niObject).GetItem ());

} 
```

最后我也想这样做：

```
nrRender.remove(nrA);
nrRender.remove(nrB); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T05:10:32.667

如果我正确理解了您的代码，则该`nrZ`对象可能会检查通过该方法传递给它的任何内容`HooksInto`，并保留对该参数中找到的内部对象的引用。

例如，如果对象`nrB`包含对象`iB1`，并且`iB2`，`nrZ`可以通过检查来找到它们并保持对它们的引用`nrB`。

该`nrRender.push_back(nrZ)`调用让`nRender`获取这些引用并存储它们以供进一步处理；然而，如果`nrRender.remove(nrB)`被调用，这些引用必须从`nrRender`对象中移除。

我将假设`list`您的代码中提到的模板实际上是`std::list`.

因此，`nrRender`只能存储 type 的值`TypeZ`。这实际上是您的代码中的一个问题。如果要`nrRender`跟踪值，则必须将其设为最通用类型的列表`TypeA`：。然而，一旦一个值被压入列表，它的完整类型就会被遗忘，如下图所示：`TypeZ``TypeA`

```
 list<TypeA *> nrRender;
  TypeB nrB;      
  TypeA *ptr;

  nrRender.push_back(&nrB);
  ptr = nrRender.pop_back(); // here we're getting back nrB, 
                             // but now it's a (TypeA *) value 
```

此外，如果您不使列表成为指向实例的指针列表，那么您将无法保存对传入对象的引用。

接下来，您想要的功能不可用。该`nrZ::HooksInto`方法建议您的对象是使用组合构建的，当您需要通过继承构建它们以使该`list<TypeA>::remove`方法按要求工作时。

如果`list`不是`std::list`，而是您希望使用所需功能实现的某些模板，我想这可以完成，但我看不出将其设为模板的意义。

```
 class render_list {

   public:
     /* ... */
     void push_back(const TypeZ &t){
         // get the inner references within t
         // store them in this instance
     }
     void remove(const TypeA &t){
         // remove t
     }
     // overload remove if necessary to handle TypeB peculiarity
     void remove(const TypeB &t){
         // remove t
     }
     // etc.
     void remove(const TypeA &t){
         // remove t
     }
 }; 
```

请注意，如果没有更多关于您想要实现的目标的详细信息，很难提供更好的指导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T09:01:33.033

在与编译器斗争了半天之后，这是解决方案（虚拟接口和基类合二为一）：

```
class TypeA
{

public:

    virtual int GetCount () = 0; // The notation =0 simply indicates the Virtual function is a pure virtual function as it has no body

};

class TypeB : public TypeA
{

    string      GetTitle ();

public:

    string      mrTitle;

};

class TypeC : public TypeB
{

public:

    int GetCount () {return 5;}

};

class TypeD : public TypeB
{

public:

    int GetCount () {return 8;}

}; 
```

测试解决方案：

```
 TypeC           nrC;
        TypeD           nrD;
        list<TypeB*>    nrRender;

        nrRender.push_back(&nrC);
        nrC.GetCount();

        nrRender.push_back(&nrD);
        nrC.GetCount();

        cout << endl << "Ca: " << &nrC;
        cout << endl << "Da: " << &nrD;

        cout << endl << "SizeA: " << nrRender.size();

        list<TypeB*>::iterator niItem;
        for (niItem = nrRender.begin(); niItem != nrRender.end(); ++niItem) {

            cout << endl << "Adress: " << (*niItem);
            cout << endl << "Counts: " << (*niItem) -> GetCount();

        }

        nrRender.remove(&nrD);

        cout << endl << "SizeB: " << nrRender.size();

        for (niItem = nrRender.begin(); niItem != nrRender.end(); ++niItem) {

            cout << endl << "Adress: " << (*niItem);
            cout << endl << "Counts: " << (*niItem) -> GetCount();

        } 
```

我希望这会对某人有所帮助。

# c++ - “向量迭代器不兼容”断言在使用交换和弹出迭代时擦除向量中的元素失败

> ID：13897907
> 
> 赞同：4
> 
> 时间：2012-12-16T01:52:04.030
> 
> 标签：c++, vector

我从这里使用交换和弹出技术：[擦除向量中的元素，同时使用交换和弹出进行迭代](https://stackoverflow.com/questions/13804039/erasing-element-in-a-vector-while-iterating-using-swap-and-pop)

下面的代码导致“向量迭代器不兼容”断言失败。

```
for(auto iter=vec.begin(); iter!=vec.end();)
{
    if((*iter).isAlive())//update the entity if the entity is alive
    {
        (*iter).update();
        ++iter;
    }
    else  //otherwise, get rid of it
    {
        std::swap(*iter, vec.back());
        vec.pop_back();
    }
} 
```

但是，当我使用 std::list 而不是 std::vector 时，一切运行良好。

为什么在使用向量时会出现断言失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-01-29T01:07:39.650

当您调用`vec.pop_back()`最后一个元素时，`iter`由于它指向`vec.back()`. STL文档说这`vector::pop_back()`会使.`back()``end()`

解决此问题的一种方法是检测以下特殊情况`size()==1`：

```
for(auto iter=vec.begin(); iter!=vec.end(); )
{
    if((*iter).isAlive())//update the entity if the entity is alive
    {
        (*iter).update();
        ++iter;
    }
    else if(vec.size() > 1) // can swap&pop
    {
        std::swap(*iter, vec.back());
        vec.pop_back();
    }
    else // need to reset iterator
    {
        vec.pop_back();
        iter = vec.begin();
    }
} 
```

假设：

*   `auto`正在推断正确的类型
*   循环不变量`iter!=vec.end()`没有被缓存

# heroku - 使用 Heroku 进行部署是否会改变我应该如何处理安全性？

> ID：13897909
> 
> 赞同：0
> 
> 时间：2012-12-16T01:52:32.033
> 
> 标签：heroku, security

使用 Heroku 进行部署是否会改变我在创建 web 应用程序时应该遵循的任何最佳安全实践？

例如来自[Yahoo](http://developer.yahoo.com/security/#application)的一些建议：

*   哈希和盐密码
*   安全的 cookie 管理
*   检查传递给数据库的参数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:39:24.623

没什么变化，没什么好说的。

# java - Joda Api 处理 isBeforeNow isAfterNow 比较的时区

> ID：13897910
> 
> 赞同：4
> 
> 时间：2012-12-16T01:52:33.547
> 
> 标签：java, datetime, timezone, jodatime

> 我想检查给定的日期时间是在当前日期时间之前还是之后。我正在将输入时间和当前时间转换为公共时区（比如 UTC）并比较 DateTime。但是我偶然发现了 Joda Api，因此我很想知道 Joda 是否能够在没有时区转换的情况下做到这一点。例子：

```
clientDateTime.isBeforeNow() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T02:45:14.833

是的，Joda DateTime 与当前时间的比较不需要时区转换。

在与当前时间（例如`DateTime.isBeforeNow`和）进行比较时`DateTime.isAfterNow`，Joda 仅比较自 1970 年 1 月 1 日以来的基础绝对毫秒数。无论时区如何，同一时刻的绝对毫秒值完全相同。

例如，瞬间 1355625068295 对应于：

```
DateTime dt = new DateTime(1355625068295L);

DateTime utc = dt.withZone(DateTimeZone.UTC);
DateTime ny = dt.withZone(DateTimeZone.forID("America/New_York"));
DateTime tk = dt.withZone(DateTimeZone.forID("Asia/Tokyo"));

System.out.println(utc.getMillis() + " is " + utc);
System.out.println(ny.getMillis() + " is " + ny);
System.out.println(tk.getMillis() + " is " + tk); 
```

输出：

```
1355625068295 is 2012-12-16T02:31:08.295Z
1355625068295 is 2012-12-15T21:31:08.295-05:00
1355625068295 is 2012-12-16T11:31:08.295+09:00 
```

与“现在”比较时：

```
System.out.println("now: " + new DateTime().getMillis());
System.out.println(ny.isBeforeNow());
System.out.println(ny.plusHours(1).isAfterNow());
System.out.println(tk.isBeforeNow());
System.out.println(tk.plusHours(1).isAfterNow()); 
```

输出：

```
now: 1355625752323
true
true
true
true 
```

# c# - 如何在 PowerShell cmdlet 中获取当前目录？

> ID：13897918
> 
> 赞同：10
> 
> 时间：2012-12-16T01:54:03.087
> 
> 标签：c#, c#-4.0, powershell

我正在`cmdlet`使用 Visual Studio 2010 中的 C#/.Net 4.0 开发 PowerShell 3.0。我想在 PowerShell 中获取用户执行`cmdlet`. 但是 Directory.GetCurrentDirectory() 没有按预期工作。在下面的代码中，结果是 C:\Users\Administrator。

问题：使用什么`cmdlet`代码来获取 PowerShell 的当前目录？

```
[System.Management.Automation.Cmdlet(System.Management.Automation.VerbsCommon.Get, "StatusBar")]
public class GetStatusBarCommand : System.Management.Automation.PSCmdlet
{
    /// <summary>
    /// Provides a record-by-record processing functionality for the cmdlet.
    /// </summary>
    protected override void ProcessRecord()
    {
        this.WriteObject(Directory.GetCurrentDirectory());
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T02:26:37.117

一个 PowerShell 进程可以有多个运行空间，因此单个全局目录不适用于 PowerShell。除此之外，在 PowerShell 中，您的当前目录可能在注册表中，而不是在文件系统中。但是，您可以使用 PowerShell API 访问文件系统目录，如下所示：

```
this.SessionState.Path.CurrentFileSystemLocation 
```

# fluent-nhibernate - 是否可以在 Fluent Hibernate 映射中使用 IUserType 作为 Id？

> ID：13897919
> 
> 赞同：1
> 
> 时间：2012-12-16T01:54:05.760
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我有一个 IUserType 定义的类，我想将它用作表的 Id。使用本机生成器时出现异常

```
InnerException: System.InvalidOperationException
    Message=Identity type must be integral (int, long, uint, ulong)
    Source=FluentNHibernate 
```

我的下一步是研究自定义生成器，但我想验证是否可以使用用户类型作为 Id。

那么，可以做到吗？

# java - 如何使用 java config 而不是 XML 声明一个存储库填充器 bean？

> ID：13897926
> 
> 赞同：16
> 
> 时间：2012-12-16T01:55:45.360
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

我正在开发一个基于 Spring 的项目，该项目（到目前为止）完全无 XML，但现在我已经使用 Spring JPA 存储库填充器碰壁了：

```
<repository:jackson-populator location="classpath:data.json" /> 
```

以上内容如何在 java @Configuration 类中表达？

这篇文章建议直接使用 FactoryBean： [https ://stackoverflow.com/a/13566712/1746274](https://stackoverflow.com/a/13566712/1746274)

我试过了，我得到的最接近的是以下，但它不太正确。

```
@Bean(name="repositoryPopulator")
public RepositoryPopulator getRespositoryPopulator() throws Exception {
    final JacksonRepositoryPopulatorFactoryBean factory =  new JacksonRepositoryPopulatorFactoryBean();
    factory.getObject().setResourceLocation("classpath:test-data.json");
    factory.afterPropertiesSet();
    return factory.getObject();
} 
```

上面的结果是`FactoryBeanNotInitializedException`带有消息`JacksonRepositoryPopulatorFactoryBean does not support circular references`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T12:47:11.173

它实际上是直截了当的：

```
@Configuration
class ApplicationConfig {

  @Bean
  public JacksonRepositoryPopulatorFactoryBean repositoryPopulator() {

    Resource sourceData = new ClassPathResource("test-data.json");

    JacksonRepositoryPopulatorFactoryBean factory = new JacksonRepositoryPopulatorFactoryBean();
    // Set a custom ObjectMapper if Jackson customization is needed
    factory.setObjectMapper(…);
    factory.setResources(new Resource[] { sourceData });
    return factory;
  }
} 
```

通过返回`FactoryBean`自身，Spring 将负责调用所有必要的回调接口（即`setApplicationContext(…)`，`setBeanClassLoader(…)`等等）。工厂 bean 是一个`ApplicationListener`，因此将在完全初始化`ContextRefreshedEvent`时侦听并触发填充。`ApplicationContext`

# php - PHP访问父级

> ID：13897936
> 
> 赞同：0
> 
> 时间：2012-12-16T01:56:54.873
> 
> 标签：php, class, inheritance

我在访问父级变量时遇到问题，如下所示：

```
class Priveleges
{
    protected $user_id;

    public __construct($user_id)
    {
         $this->user_id = $user_id;
    }
 } 
```

现在我的子类：

```
class userInfo extends Priveleges
{

    public function __construct($user_id)
    {
         parent::__construct($user_id);
    }

    public function showID()
    {
        return $this->user_id;
    }
}

$a = new userInfo(63);
echo $a->showID(); 
```

我期望的输出是 63，不是吗？但是，它不输出任何东西...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:00:06.767

如果您反而得到“意外`__construct`”，那将是因为您在`function`这里缺少 a：

```
protected $user_id;

public __construct($user_id)
{
     $this->user_id = $user_id;
} 
```

修复后，[输出确实是 63](http://codepad.viper-7.com/9RCfHg)。

# css - 引导表单内联以在一行中显示字段

> ID：13897937
> 
> 赞同：0
> 
> 时间：2012-12-16T01:57:27.153
> 
> 标签：css, ruby-on-rails, twitter-bootstrap

我希望我的登录表单在一行中显示相邻的字段，而不是在彼此的下方。

标题：

更新：此代码现在可以使用

```
<header class="navbar navbar-fixed-top navbar-inverse">
<div class="navbar-inner">
<div class="container">
  <%= link_to "Apollo", root_path, id: "logo" %>
  <nav>
    <ul class="nav pull-right">

<%= form_for(:session, url: sessions_path, :html => { :class => "form-inline"}) do |f| %>
  <input id="session_email" name="session[email]" type="text" class="input-medium" placeholder="Email">
  <input id="session_password" name="session[password]" type="password" class="input-medium" placeholder="Password">
  <button type="submit" class="btn btn-small btn-primary">Sign in</button>
<% end %>

</ul>
  </nav>
</div>
</div>
</header> 
```

生成的 HTML

```
<header class="navbar navbar-fixed-top navbar-inverse">
<div class="navbar-inner">
<div class="container">
  <a href="/" id="logo">Apollo</a>
  <nav>
    <ul class="nav pull-right">

          <div class="row">
            <div class="span2 offset3">
              <form accept-charset="UTF-8" action="/sessions" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="xmS0FBX+pX8ZzBr/yHIUNmXOQMFI4krsv3FxIl51Hjg=" /></div>

                  <input id="session_email" name="session[email]" placeholder="Email" size="30" type="text" />

                  <input id="session_password" name="session[password]" placeholder="Password" size="30" type="password" />

                  <input class="btn btn-small btn-primary" name="commit" type="submit" value="Sign in" />

</form>                </div>
          </div>
    </ul>
  </nav>
</div>
</div>
</header> 
```

自定义 CSS.SCSS

```
@import "bootstrap";

/* mixins, variables, etc. */

$grayMediumLight: #eaeaea;

@mixin box_sizing {
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  box-sizing: border-box;
}

/* forms */

input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  margin-bottom: 15px;
  @include box_sizing;
}

input {
  height: auto !important;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T02:18:34.207

更改您的 CSS。

[视图](http://jsfiddle.net/7jsJd/)没有问题。

看起来您正在使用引导程序，因此将类添加`.form-inline`到表单中：

```
<%= form_for(:session, url: sessions_path, :html => { :class => "form-inline"}) do |f| %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T08:17:11.547

表单中的每个`input`元素都应显示为内联或内联块，并且应调整大小以适合单行上的所有元素。任何溢出都会被撞到下一行。

给表格上课。例如，`inline_form`。

```
form.inline_form input {
  display: inline-block;
  width: 80px; //small for example
} 
```

[使用您的代码的示例](http://jsfiddle.net/4epf5/)

# php - MySQL will not accept INSERT INTO table with varchar, tinytext, time, time values

> ID：13897940
> 
> 赞同：3
> 
> 时间：2012-12-16T01:58:04.807
> 
> 标签：php, html, mysql

MySQL gives an error when I try to input data into the following table my_table:

```
my_table
Columns | data type:
Task    | varchar(20) (primary key)
Descr   | tinytext
start   | time
end     | time 
```

The my_table character set is utf8

I am trying to insert values into the table from a PHP file:

```
<?php

mysql_connect("localhost", "admin", "passwd") or die(mysql_error());
mysql_select_db("my_table") or die(mysql_error());

$task = $_POST["taskname"];
$descr = $_POST["taskdesc"];
$start = $_POST["starttime"];
$end = $_POST["endtime"];

$insert = "INSERT INTO tasks (task, descr, start, end) 
VALUES ('$task','$descr','$start','$end')";

mysql_query($insert) or die(mysql_error());
mysql_close();

?> 
```

I receive the following error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'descr, start, end) VALUES ('Task 1','This is a task. This is only a task. This ' at line 1

Here is the html that gives the inputs:

```
<form id="taskentry" method="post" action="create-task.php">
<ul>
    <li><input type="text" name="taskname" placeholder="Task Name"/></li>
    <li><textarea form="taskentry" name="taskdesc" placeholder="Description" rows="5"></textarea></li>
    <li><input type="time" name="starttime"></li>
    <li><input type="time" name="endtime"></li>
    <li class="naked"><input type="submit" name="Save" value="Submit Task" /></li>
</ul>
</form> 
```

I suspect it is a format issue. Can anyone help?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:48:18.280

try to insert data using mysql comand prompt, if that works then try to check if your form data is submitted to your action php page or not. you can write a code to test that

```
if(isset($_POST["taskname"]) && isset($_POST["taskdesc"]) && isset($_POST["starttime"]) && isset($_POST["endtime"]))
{
$task = $_POST["taskname"];
$descr = $_POST["taskdesc"];
$start = $_POST["starttime"];
$end = $_POST["endtime"];
echo $task."<br />".$descr."<br />".$start."<br />".$end;
} 
```

# php - php 脚本的许可证密钥

> ID：13897941
> 
> 赞同：5
> 
> 时间：2012-12-16T01:58:06.713
> 
> 标签：php, ioncube

我有一个剧本，我把它卖给了一些人。我需要一种方法来确保我的脚本不会在我的客户列表之外的任何网站上运行。

*   首先，我使用 IonCube 来加密我的 PHP 代码。
*   我的所有客户端都在我的服务器数据库中。
*   每个客户都有一个域名、电子邮件、姓名、电话。

避免使人们窃取我的脚本的最佳方法是什么？

我阅读了有关在脚本中制作许可证密钥的信息，因此任何没有许可证的脚本都将无法工作。但是，有很多方法可以在不获得我的许可的情况下生成许可证密钥？

我只需要不激活任何域名中的任何脚本，除非我的客户列表中有它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T03:12:55.453

你的问题很有趣，因为太多的 php 开发人员想知道同样的事情。如何保护我的产品不被盗窃和复制？

一些评论说不要贪心，但事实是很多人以编程为生，所以这不仅仅是你作为爱好构建的一些软件的问题，这是你的工作，你应该得到报酬它，就像任何其他职业一样。

可悲的是，PHP 是一种很难保护的语言，但我会给你一些建议：

1）不要相信加密：我见过太多的解密代码的工具，即使是我曾经信任的一些工具，比如 Zend Guard，也容易受到攻击。我见过的最先进的工具可以在几分钟内揭示你的代码。

编辑：关于加密的另一件事我忘了提及。它将要求服务器安装某些特殊模块才能使您的代码正常工作，这对于所有使用共享主机且无法安装解密模块的人来说是一个交易破坏者。

2）尝试混淆：即使你的代码仍然可读，但如果混淆器在混合变量、添加废话和在函数内制作函数方面做得很好，代码本身将变得几乎不可修改，因此尝试将毫无用处修改它。

3）利用混淆在您的软件本身中插入域锁定代码：而不是许可证文件，只需将软件出售给某个客户，并在软件本身中带有一些域验证码，这种方法与混淆相结合，就可以了很难弄清楚要改变什么以使其在其他领域工作，所以你可能会实现你的目标。

4）做一个伟大的软件：这是最重要的部分，构建一个人们愿意支付的优秀软件，为它创建一个合适的网站，在那里宣传。

我希望我对你有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T03:20:51.070

Adobe、微软和其他公司没有过度积极地追捕盗版是有原因的（不是说他们没有，只是没有达到史诗般的专制水平）——他们的大部分收入来自企业之间的销售和支持。一个简单的许可和支持结构通常足以让自己从想要您的产品的合法企业和各方那里获利。

如果您要向任何人提供代码，技术保护将是一场失败的战斗。这就是SaaS如此受欢迎的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-01T05:23:27.863

您可以使用[http://www.ioncube.com](http://www.ioncube.com)混淆您的源代码或使用[http://www.phplicengine.com](http://www.phplicengine.com)远程或本地许可您的 php 代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-16T03:43:07.833

> 我只需要不激活任何域名中的任何脚本，除非我的客户列表中有它。

好的，你已经足够缩小了。

创建您的 openssl 证书，硬编码公共部分以检查代码，在使用您的私钥颁发许可证签名 domain.name 字符串时，在您的许可证中发布签名部分作为许可证：

```
$lic=<<<EOL
LICENSE CODE HERE - SIGNATURE of string contained domain name
EOL; 
```

在您的代码中检查许可证：

```
include 'license.php';
$cert=<<<EOK
PUBLIC KEY DATA HERE
EOK;
$pub_key=openssl_get_publickey($cert);
$ok = openssl_verify($_SERVER['SERVER_NAME'], $lic, $pub_key);
if ($ok !== 1) {die ('bad license!')} 
```

O'c 都应该尽可能地加密。

这对于特制的 libopenssl 二进制文件可能很脆弱，但我希望它会对你有所帮助。为避免运行此类代码，您可以添加如下条件：

```
if (int(random()*100))==6) {check_license();} 
```

但这取决于应该保护哪个部分。

此外，在代码的所有部分中，您应该检查包含许可证检查代码的文件的 md5summ。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-16T03:08:56.297

锁定您放弃的基于脚本的代码的唯一真正方法是让该代码的核心部分在您控制的服务器上执行 - 并将您提供给客户的代码“回电”到您的每次执行时的服务器。然后你所要做的就是根据请求的 ip 阻止对这个“回拨”脚本的访问。

此外，在这种“回拨”机制中，仅执行简单的连接测试或握手是没有好处的，因为这是可以解决的——服务器上的脚本必须对整个系统做一些不可或缺的事情，以便客户端能够必须重写丢失的部分才能在您不知情的情况下在其他地方使用您的代码。这可能是一些关键计算或数据提供。

显然这并不理想，因为许多客户端不喜欢调用远程服务器的脚本，而且您必须确保您的网络和服务器可以处理请求的数量——否则您将减慢或超时您的客户端自己的系统。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-17T22:19:00.047

There are some good comments from other posters to this. Depending on the edition of the ionCube Encoder that you're using the features that you need are there already (in Pro and Cerberus), including features to allow you to craft your own layers of licensing if you wish, though this shouldn't be necessary. Some basic steps give the biggest wins, and as others have said, it's not generally worth going over the top with a massive licensing infrastructure. Keep in mind too that a main benefit to licensing comes not so much from stopping those who are intent on cheating and not paying, but from keeping the paying customers in line.

Say that you have a fee for each domain where your software is used. If you mention this somewhere but do nothing to enforce it, then when an honest customers tries your scripts on a second domain and finds that it works, chances are that they'll simply use it without even realising that they should have paid. In contrast, if your software alerts them to the fact that a new license is needed, it's likely that they'll purchase for the second domain.

Realistically it's impossible to stop the most determined thieves, and as one poster eluded to it may even be beneficial in the long term to have cheaters using software for free rather than not at all, but licensing can definitely lock in revenue from the honest majority who are happy to purchase good software (plus support, bug fixes, upgrades etc.), and it's foolish not to do that.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-16T02:55:36.733

我的想法是您无法成功保存代码以使其为空。我真的不喜欢创建非免费应用程序的方式，但我不会评判你。保护代码的最佳解决方案有时不值得，因为许多人（阅读网站）的托管非常有限，他们无法安装 ioncube... 最好的保护是加入多种类型的保护（例如 IonCube + 注入许可证连接到您的数据服务器在不同的地方使用不同的代码+如果站点需要使用一些 ssl，您可以尝试通过在您的数据服务器上出售带有公钥检查的 ssl 来进行一些保护），或者很多很多其他方式，只是有创造力的）

但正如我所说，如果你想要非常高的保护，你会因为创建它而蒙受损失，而失去客户也会蒙受损失，因为他们使用了一些廉价的托管......

你需要考虑一切...

忘了说：在您的服务器上托管是最好的保护，但也有缺点：您需要添加“模板”站点的可能性，创建一些插件的访问权限，以及类似的东西......但有时客户只是不喜欢保留您托管服务器上的所有数据。

我想我以某种方式帮助了...

# git - 防止 git merge 确认提交消息

> ID：13897942
> 
> 赞同：5
> 
> 时间：2012-12-16T01:58:13.760
> 
> 标签：git

我正在编写一个脚本，在该脚本中，我逐渐将 Linux 内核合并到一个从旧版本起飞并稍作修改的分支中。

结果，我`git merge <sha> -m "merge without conflict"`的脚本中有很多命令。如果存在冲突，脚本将停止以供用户解决并使用正确的消息提交合并。

但是，`git merge -m "message" ...`仍然调出编辑器，迫使我确认消息。我怎样才能防止这种情况？

我知道一般来说，有一个非描述性的合并消息不是一个好主意，但这是一个不会产生冲突的消息，而且它可能会发生数百次，所以每次都要求用户（我自己）确认是不合适的这个问题。

编辑：情况并非总是如此。但是，这可以重现问题：

```
# Clone Linux's repository

$ git checkout v2.6.38
$ git checkout -b test

$ touch new_file
$ git add new_file
$ git commit

$ git merge v2.6.39 -m "merge message"
# brings up the editor, even though there are no conflicts 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T02:12:04.970

也许是`--no-edit`国旗？它的[文档](http://www.kernel.org/pub/software/scm/git/docs/git-merge.html)说“该`--no-edit`选项可用于在合并带注释的标签时接受自动生成的消息（通常不鼓励这样做）......”

# makefile - 通配符获取所有目录的列表

> ID：13897945
> 
> 赞同：38
> 
> 时间：2012-12-16T01:59:36.257
> 
> 标签：makefile, wildcard, gnu-make

在我的 Makefile 中，我需要获取其他目录中存在的所有目录的列表。

要获取与我使用的同一文件夹中的所有目录的列表`Makefile`：

```
DIRECTORIES = $(wildcard */)

all:
    echo $(DIRECTORIES) 
```

效果很好，并给了我想要的列表。但是，如果我想使用另一个目录中的所有目录列表

```
DIRECTORIES = $(wildcard ../Test/*/)

all:
    echo $(DIRECTORIES) 
```

我得到了该目录中所有文件（带路径）的列表，包括`.h`文件`.cpp`。

任何建议为什么会发生这种情况以及如何解决它？也欢迎其他获取列表的解决方案。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-16T03:19:21.710

与一起使用`sort`和功能：`dir``wildcard`

```
DIRECTORY = $(sort $(dir $(wildcard ../Test/*/))) 
```

来自 GNU make 手册：

> $(dir names...) 提取名称中每个文件名的目录部分。文件名的目录部分是通过（包括）最后一个斜杠的所有内容。如果文件名不包含斜杠，则目录部分是字符串'./'。
> 
> $(sort list) 按词汇顺序对 list 中的单词进行排序，去除重复的单词。输出是由单个空格分隔的单词列表。

另请看本文中的第二种和第三种方法：[自动创建目录列表](http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gnat_ugn_unw/Automatically-Creating-a-List-of-Directories.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-16T02:53:31.720

尝试：

```
$(shell find <directory> -maxdepth 1 -type d) 
```

这将为您提供给定目录中的目录列表，而无需进入子目录。您可能需要清理该列表，因为它将包括列出`.`的`./`每个目录之前。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-11-10T15:31:57.267

采用：

```
$(wildcard ../Test/*/.) 
```

这工作正常。

# android - 从片段 NullPointerException 调用活动方法

> ID：13897949
> 
> 赞同：0
> 
> 时间：2012-12-16T02:00:16.117
> 
> 标签：android, casting, android-fragments, android-activity

我从片段访问活动的方法时遇到问题。或片段中的任何活动。

这是片段代码：

```
public class MainFragment extends Fragment {

private MainActivity ma = (MainActivity) getActivity();
public SipAudioCall call = null;
public SipManager mSipManager = null;
public SipProfile mSipProfile = null;

public MainFragment() {
    // TODO Auto-generated constructor stub

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // Create a new TextView and set its text to the fragment's section
    // number argument value.
    LinearLayout mLinearLayout = (LinearLayout) inflater.inflate(R.layout.main_layout, container, false);

    final Button callbtn = (Button) mLinearLayout.findViewById(R.id.callbtn);
    final Button endbtn = (Button) mLinearLayout.findViewById(R.id.endbtn);

    callbtn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            callbtn.setVisibility(View.GONE);
            endbtn.setVisibility(View.VISIBLE);
            ma.initiateCall();    
        }
    }); 
```

也许投射活动是错误的？提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:28:15.690

我猜当你调用 getActivity() 时，片段没有附加到活动中。尝试在片段方法 onAttach() 中初始化活动引用。

所以是这样的：

```
@Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        try {
            ma = (MainActivity) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString() + " Not MainActivity class instance");
        }
    } 
```

# java - 2D 开销瓷砖生成

> ID：13897951
> 
> 赞同：2
> 
> 时间：2012-12-16T02:00:35.197
> 
> 标签：java, tile

我现在有这个代码：

```
private void generateLevel() {
    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            tiles[x + y * width] = random.nextInt(4);
        }
    }
} 
```

这允许此方法工作：

```
public Tile getTile(int x, int y) {
    if (x < 0 || y < 0 || x >= width || y >= height) return Tile.voidTile;
    if (tiles[x + y * width] == 0) return Tile.grass;
    if (tiles[x + y * width] == 1) return Tile.stone;
    else return Tile.water; 
    //return Tile.voidTile;
} 
```

返回此结果： ![2D 瓦片生成](../Images/be9cce1ec0bf3c74fbdb1ed02ef5f4ec.png)

我想要的是光滑、圆形的岛屿，到处都是随机的石头沉积物。perlin 噪音会不会过大？我想我可以只生成一个图块，检查它旁边的图块 ID，然后如果相邻的图块属于同一类型，则将其放下。但这会在同一个瓷砖上创造出无穷无尽的广阔空间。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T03:11:32.977

我将采取的第一步是从您的域级别的任何内容中创建对象：

```
public class Island {
    private Point2D center = null;
    private int radius = 0;

    private List<Deposit> deposits = new ArrayList<Deposit>();

    public Island(Point2D center, int radius) {
        this.center = center;
        this.radius = radius;
    }

    public void generateDeposits(int numDeposits) {
        for (int i = 0; i < numDeposits; i++) {
            // TODO: I leave it to you to find an x and y inside the island's
            // boundary.
            int x = getIntInsideCircle(center, radius);
            int y = getIntInsideCircle(center, radius);
            if (!depositInLocation(x, y)) {
                deposits.add(new StoneDeposit(x, y));
            } else {
                i--; // TODO: This code could potentially go on forever,
                     // if we keep generating locations that have been used, 
                     // but I'll leave this for you to handle.
            }
        }
    }
}

public abstract class Deposit {
    private Point2D location = null;

    public Deposit(Point2D location) {
        this.location = location;
    }
}

public class StoneDeposit extends Deposit {
    // TODO: You can fill this with StoneDeposit specifics.
} 
```

现在我们的代码将生成一个带有所有随机存款的岛屿。唯一剩下要做的就是实际放置这些岛屿。我将保持简单，只在地图上添加一个，但我相信你可以弄清楚如何添加多个（我会留下一些评论与我的想法）：

```
public class Map {
    private final int WIDTH = 1000;
    private final int HEIGHT = 1000;

    private List<Island> islands = new ArrayList<Island>();

    public void generate() {
        // TODO: If you want to make more, make a for loop.
        int radius = 100;
        Island island = new Island(new Point2D(WIDTH / 2, HEIGHT / 2), radius);
        // TODO: If you are going to add more, then you can't simply add them
        // all willy-nilly. You are going to have to check if the islands collide
        // and, if they do, find a way to handle that.
        // You could let them collide and create a mountain range where they do, or,
        // you could try to place the next island in a different position (similar
        // to what we used above placing deposits, but both situations require
        // code a bit better than what I've included).
        islands.add(island);
     }
} 
```

好的，现在我们已经获得了我们需要的所有数据。这将我们带到了使用图块将其实际绘制到屏幕上的最后一点。我对这个主题没有太多经验，所以这可能效率低下，但它应该作为一个起点。

*我已经概括了一些函数（比如 drawTile(int x, int y, TileType type)，因为我不知道你是如何将图块绘制到屏幕上的）。*

```
// Generate our data.
Map map = new Map();
map.generate();
// Draw to the screen.

// 1\. Fill the entire screen with water.
for (int y = 0; y < HEIGHT; y++) {
    for (int x = 0; x < WIDTH; x++) {
        drawTile(x, y, Type.WATER);
    }
}

// 2\. Draw the islands.
// We're going to use this algorithm to draw the circle:
// http://en.wikipedia.org/wiki/Midpoint_circle_algorithm
for (Island island : map.getIslands()) {
    int f = 1 - island.getRadius();
    int ddF_x = 1;
    int ddF_y = -2 * island.getRadius();
    int x = 0;
    int y = 0;

    Point2D center = island.getCenter();
    int radius = island.getRadius();
    drawTile(center.getX(), center.getY() + radius, TileType.LAND);
    drawTile(center.getX(), center.getY() - radius, TileType.LAND);
    drawTile(center.getX() + radius, center.getY(), TileType.LAND);
    drawTile(center.getX() - radius, center.getY(), TileType.LAND);

    while(x < y) {
        if(f >= 0) {
          y--;
          ddF_y += 2;
          f += ddF_y;
        }
        x++;
        ddF_x += 2;
        f += ddF_x;    
        drawTile(center.getX() + x, center.getY() + y, TileType.LAND);
        drawTile(center.getX() - x, center.getY() + y, TileType.LAND);
        drawTile(center.getX() + x, center.getY() - y, TileType.LAND);
        drawTile(center.getX() - x, center.getY() - y, TileType.LAND);
        drawTile(center.getX() + y, center.getY() + x, TileType.LAND);
        drawTile(center.getX() - y, center.getY() + x, TileType.LAND);
        drawTile(center.getX() + y, center.getY() - x, TileType.LAND);
        drawTile(center.getX() - y, center.getY() - x, TileType.LAND);
      }

      // TODO: Now you have to figure out how to fill in the guts of the island.
    }

// 3\. Draw the deposits.
// TODO: I'll leave this one for you. 
```

所以基本上就是这样——还不错。

您总是可以更进一步，添加主要是水但有一些海岸线的瓷砖。为此，您必须检查您正在绘制的瓷砖是边缘还是角落：

```
+-+-+-+
|1|2|3|
+-+-+-+
+-+-+-+-+
|4|5|6|7|
+-+-+-+-+
+-+-+-+
|8|9|0|
+-+-+-+ 
```

在这里您可以看到 2,9 和 4 都是边缘瓷砖。1, 3, 8, 0 都是角落瓷砖，5 是内部瓷砖。当您将瓷砖识别为角落时，您必须选择所有连接的水瓷砖并将它们绘制为“海岸”瓷砖：

```
 +-+-+
  | |x|
  +-+-+-+-+
  |x|1|2|3|
  +-+-+-+-+
    +-+-+-+-+
    |4|5|6|7|
    +-+-+-+-+
    +-+-+-+
    |8|9|0|
    +-+-+-+ 
```

那里所有的x都是沿海瓷砖。

我希望这个能有一点帮助。

# r - 安装slam包失败

> ID：13897952
> 
> 赞同：3
> 
> 时间：2012-12-16T02:00:48.457
> 
> 标签：r, installation, rstudio

> **可能重复：**
> [slam 软件包安装失败并出现 make 错误](https://stackoverflow.com/questions/13532682/slam-package-install-fails-with-make-error)

尝试安装软件包时出现此错误`slam`（我正在使用 RStudio 菜单）

```
/usr/bin/ld: cannot find -lblas
collect2: ld returned 1 exit status
make: *** [slam.so] Error 1
ERROR: compilation failed for package ‘slam’ 
```

我必须道歉声明我正在使用带有 RStudio 0.97.173 的 Xubuntu 12.04 x64。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T03:24:49.200

如果您使用的是 MacOS 或 Windoze，则需要安装这些工具才能编译源包。（尽管我们可能会问您为什么不安装二进制文件？）Mac 工具是从安装光盘或 Xcode 资源中获得的。有关 Mac 工具的更多资源和信息，请参阅此页面：[http](http://r.research.att.com/tools/) ://r.research.att.com/tools/ 对于 Windoze，请访问此处：[http](http://cran.r-project.org/bin/windows/Rtools/) ://cran.r-project.org/bin/windows/Rtools/如果你在 Linux 上，库和编译器应该是你安装的一部分。

# android - Android Eclipse - 单击多个按钮快速使我的应用程序崩溃

> ID：13897953
> 
> 赞同：1
> 
> 时间：2012-12-16T02:00:53.070
> 
> 标签：android, eclipse

我是为 Android 开发应用程序的新手，为此我正在使用 Eclipse。

我有一个课程/活动，里面有几个按钮。单击这些按钮后，每个按钮都会启动不同的活动。大多数情况下，这很好用——我可以单击一个按钮启动activity1，单击后退按钮终止activity1，然后单击另一个按钮启动activity2。

但是，我发现如果我退出活动 1，然后快速（在离开活动 1 的 1 秒内）单击按钮以启动活动 2，我的应用程序就会崩溃。我已经尝试在线搜索解决方案，但没有遇到任何问题。

有没有办法可以避免单击按钮快速使应用程序崩溃的情况？

谢谢！任何帮助是极大的赞赏。

这是我的课程的代码：

```
public class CharPicker extends Activity implements View.OnClickListener {

ImageButton otherHeader;
ImageButton char1, char2, char3, char4, char5, char6, char7, char8, char9, char10;

private boolean clicked; // Determines if a character was selected.

@Override
public void onCreate(Bundle savedInstanceState){
    // Sets the view to the character picker screen.
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_charpicker);

    // Set audio manager to handle volume changes in music/audio. 
    this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

    otherHeader = (ImageButton) findViewById(R.id.otherHeader); // Other header.

    char1 = (ImageButton) findViewById(R.id.first); // Char1 icon. 
    char2 = (ImageButton) findViewById(R.id.second); // Char2 icon.
    char3 = (ImageButton) findViewById(R.id.third); // Char3 icon.
    char4 = (ImageButton) findViewById(R.id.fourth); // Char4 icon.
    char5 = (ImageButton) findViewById(R.id.fifth); // Char5 icon.
    char6 = (ImageButton) findViewById(R.id.sixth); // Char6 icon.
    char7 = (ImageButton) findViewById(R.id.seventh); // Char7 icon.
    char8 = (ImageButton) findViewById(R.id.eighth); // Char8 icon.
    char9 = (ImageButton) findViewById(R.id.ninth); // Char9 icon.
    char10 = (ImageButton) findViewById(R.id.tenth); // Char10 icon.

    otherHeader.setOnClickListener(this);

    char1.setOnClickListener(this);
    char2.setOnClickListener(this);
    char3.setOnClickListener(this);
    char4.setOnClickListener(this);
    char5.setOnClickListener(this);
    char6.setOnClickListener(this);
    char7.setOnClickListener(this);
    char8.setOnClickListener(this);
    char9.setOnClickListener(this);
    char10.setOnClickListener(this);

    clicked = false;
}

@Override
protected void onStart(){
    // Resets clicked boolean to false so another character can be selected.
    super.onStart();
    if(clicked == true)
        clicked = false;
}

@Override
protected void onResume(){
    // Resets clicked boolean to false so another character can be selected.
    super.onResume();
    if(clicked == true)
        clicked = false;
}

@Override
protected void onPause(){
    // Sets clicked boolean to true to avoid crashing cases arising from multiple concurrent button clicks.
    super.onPause();
    if(clicked == false)
        clicked = true;
}

@Override
protected void onStop(){
    // Sets clicked boolean to true to avoid crashing cases arising from multiple concurrent button clicks.
    super.onStop();
    if(clicked == false)
        clicked = true;
}

public void onClick(View view){
    // Determines which instruction screen to load up as an activity.
    // Creates a new activity.

    switch(view.getId()){
        case(R.id.otherHeader):
            if(clicked == false){
                // Clicking on this returns user to the home page.
                // Terminates this activity.
                clicked = true;
                finish();
            }
        case(R.id.first):
            if(clicked == false){
                Intent collection1Char1 = new Intent(this, Collection1Char1.class);
                startActivity(collection1Char1);
                clicked = true;
            }
            break;
        case(R.id.second):
            if(clicked == false){
                Intent collection1Char2 = new Intent(this, Collection1Char2.class);
                startActivity(collection1Char2);
                clicked = true;
            }
            break;
        case(R.id.third):
            if(clicked == false){
                Intent collection1Char3 = new Intent(this, Collection1Char3.class);
                startActivity(collection1Char3);
                clicked = true;
            }
            break;
        case(R.id.fourth):
            if(clicked == false){
                Intent collection1Char4 = new Intent(this, Collection1Char4.class);
                startActivity(collection1Char4);
                clicked = true;
            }
            break;
        case(R.id.fifth):
            if(clicked == false){
                Intent collection1Char5 = new Intent(this, Collection1Char5.class);
                startActivity(collection1Char5);    
                clicked = true;
            }
            break;
        case(R.id.sixth):
            if(clicked == false){
                Intent collection1Char6 = new Intent(this, Collection1Char6.class);
                startActivity(collection1Char6);
                clicked = true;
            }
            break;
        case(R.id.seventh):
            if(clicked == false){
                Intent collection1Char7 = new Intent(this, Collection1Char7.class);
                startActivity(collection1Char7);
                clicked = true;
            }
            break;
        case(R.id.eighth):
            if(clicked == false){
                Intent collection1Char8 = new Intent(this, Collection1Char8.class);
                startActivity(collection1Char8);    
                clicked = true;
            }
            break;
        case(R.id.ninth):
            if(clicked == false){
                Intent collection1Char9 = new Intent(this, Collection1Char9.class);
                startActivity(collection1Char9);    
                clicked = true;
            }
            break;
        case(R.id.tenth):
            if(clicked == false){
                Intent collection1Char10 = new Intent(this, Collection1Char10.class);
                startActivity(collection1Char10);   
                clicked = true;
            }
            break;
        }
    }   
} 
```

下面是logcat：

```
12-15 17:36:47.698: D/dalvikvm(28552): GC_FOR_ALLOC freed 154K, 9% free 14686K/15971K, paused 17ms
12-15 17:36:47.708: I/dalvikvm-heap(28552): Grow heap (frag case) to 17.289MB for 2406416-byte allocation
12-15 17:36:47.728: D/dalvikvm(28552): GC_FOR_ALLOC freed <1K, 8% free 17036K/18339K, paused 16ms
12-15 17:36:47.778: D/dalvikvm(28552): GC_CONCURRENT freed 589K, 11% free 16465K/18339K, paused 2ms+2ms
12-15 17:36:47.798: D/memalloc(28552): ion: Mapped buffer base:0x5d709000 size:3768320 offset:0 fd:51
12-15 17:36:47.818: D/CLIPBOARD(28552): Hide Clipboard dialog at Starting input: finished by someone else... !
12-15 17:36:49.029: D/dalvikvm(28552): GC_FOR_ALLOC freed 198K, 6% free 17870K/18979K, paused 13ms
12-15 17:36:49.039: I/dalvikvm-heap(28552): Grow heap (frag case) to 20.495MB for 2508016-byte allocation
12-15 17:36:49.059: D/dalvikvm(28552): GC_CONCURRENT freed 1K, 6% free 20318K/21475K, paused 2ms+2ms
12-15 17:36:49.089: D/dalvikvm(28552): GC_FOR_ALLOC freed 612K, 9% free 20319K/22115K, paused 12ms
12-15 17:36:49.099: I/dalvikvm-heap(28552): Grow heap (frag case) to 22.886MB for 2508016-byte allocation
12-15 17:36:49.119: D/dalvikvm(28552): GC_CONCURRENT freed <1K, 8% free 22768K/24611K, paused 2ms+1ms
12-15 17:36:49.149: D/memalloc(28552): ion: Mapped buffer base:0x5dba1000 size:3768320 offset:0 fd:58
12-15 17:36:52.433: D/memalloc(28552): ion: Mapped buffer base:0x5d609000 size:3768320 offset:0 fd:51
12-15 17:36:52.583: D/memalloc(28552): ion: Mapped buffer base:0x5df39000 size:3768320 offset:0 fd:54
12-15 17:36:52.663: D/dalvikvm(28552): GC_FOR_ALLOC freed 3533K, 17% free 22033K/26339K, paused 13ms
12-15 17:36:52.703: D/memalloc(28552): ion: Mapped buffer base:0x5e2d1000 size:3768320 offset:0 fd:64
12-15 17:36:54.174: D/dalvikvm(28552): GC_CONCURRENT freed 557K, 9% free 24190K/26339K, paused 1ms+3ms
12-15 17:36:54.225: D/dalvikvm(28552): GC_FOR_ALLOC freed 577K, 8% free 26392K/28387K, paused 15ms
12-15 17:36:54.265: D/dalvikvm(28552): GC_FOR_ALLOC freed 502K, 7% free 28892K/30947K, paused 15ms
12-15 17:36:54.295: D/dalvikvm(28552): GC_FOR_ALLOC freed 500K, 7% free 30892K/32995K, paused 15ms
12-15 17:36:54.345: D/dalvikvm(28552): GC_FOR_ALLOC freed 1001K, 8% free 34394K/37091K, paused 21ms
12-15 17:36:54.425: D/dalvikvm(28552): GC_FOR_ALLOC freed 1001K, 7% free 38895K/41699K, paused 28ms
12-15 17:36:54.485: D/dalvikvm(28552): GC_FOR_ALLOC freed 1001K, 7% free 42896K/45795K, paused 18ms
12-15 17:36:54.535: D/dalvikvm(28552): GC_FOR_ALLOC freed 1001K, 7% free 46898K/49891K, paused 15ms
12-15 17:36:54.545: V/MediaPlayer(28552): constructor
12-15 17:36:54.545: V/MediaPlayer(28552): setListener
12-15 17:36:54.545: V/MediaPlayer(28552): setDataSource(49, 20974933, 217100)
12-15 17:36:54.565: V/MediaPlayer(28552): setVideoSurfaceTexture
12-15 17:36:54.565: V/MediaPlayer(28552): prepare
12-15 17:36:54.565: V/MediaPlayer(28552): message received msg=5, ext1=0, ext2=0
12-15 17:36:54.565: V/MediaPlayer(28552): New video size 0 x 0
12-15 17:36:54.565: V/MediaPlayer(28552): callback application
12-15 17:36:54.565: V/MediaPlayer(28552): back from callback
12-15 17:36:54.565: V/MediaPlayer(28552): message received msg=1, ext1=0, ext2=0
12-15 17:36:54.565: V/MediaPlayer(28552): prepared
12-15 17:36:54.565: V/MediaPlayer(28552): signal application thread
12-15 17:36:54.565: V/MediaPlayer(28552): callback application
12-15 17:36:54.565: V/MediaPlayer(28552): back from callback
12-15 17:36:54.565: V/MediaPlayer(28552): prepare complete - status=0
12-15 17:36:54.565: V/MediaPlayer(28552): start
12-15 17:36:54.575: E/MediaPlayer(28552): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.
12-15 17:36:54.575: I/MediaPlayer(28552): Don't send intent. msg.arg1 = 0, msg.arg2 = 0
12-15 17:36:54.575: E/MediaPlayer(28552): mOnPreparedListener is null. Failed to send MEDIA_PREPARED message.
12-15 17:36:54.605: D/memalloc(28552): ion: Mapped buffer base:0x5d609000 size:3768320 offset:0 fd:51
12-15 17:36:55.826: D/memalloc(28552): ion: Mapped buffer base:0x5dba1000 size:3768320 offset:0 fd:58
12-15 17:36:55.866: D/memalloc(28552): ion: Mapped buffer base:0x5df39000 size:3768320 offset:0 fd:64
12-15 17:36:55.916: D/memalloc(28552): ion: Mapped buffer base:0x5e2d1000 size:3768320 offset:0 fd:70
12-15 17:36:56.167: V/MediaPlayer(28552): stop
12-15 17:36:56.357: W/MediaPlayer-JNI(28552): MediaPlayer finalized without being released
12-15 17:36:56.357: V/MediaPlayer(28552): setListener
12-15 17:36:56.357: V/MediaPlayer(28552): disconnect
12-15 17:36:56.367: V/MediaPlayer(28552): destructor
12-15 17:36:56.367: V/MediaPlayer(28552): disconnect
12-15 17:36:56.367: D/dalvikvm(28552): GC_FOR_ALLOC freed 1018K, 6% free 50943K/53987K, paused 18ms
12-15 17:36:56.417: D/dalvikvm(28552): GC_FOR_ALLOC freed 25044K, 47% free 30901K/58083K, paused 15ms
12-15 17:36:56.457: D/dalvikvm(28552): GC_FOR_ALLOC freed 1001K, 40% free 34902K/58083K, paused 16ms
12-15 17:36:56.537: D/dalvikvm(28552): GC_CONCURRENT freed 1001K, 30% free 40904K/58083K, paused 1ms+6ms
12-15 17:36:56.597: D/dalvikvm(28552): GC_FOR_ALLOC freed 1501K, 23% free 44905K/58083K, paused 15ms
12-15 17:36:56.617: V/MediaPlayer(28552): constructor
12-15 17:36:56.617: V/MediaPlayer(28552): setListener
12-15 17:36:56.617: V/MediaPlayer(28552): setDataSource(49, 17037044, 211255)
12-15 17:36:56.627: V/MediaPlayer(28552): setVideoSurfaceTexture
12-15 17:36:56.627: V/MediaPlayer(28552): prepare
12-15 17:36:56.627: V/MediaPlayer(28552): message received msg=5, ext1=0, ext2=0
12-15 17:36:56.627: V/MediaPlayer(28552): New video size 0 x 0
12-15 17:36:56.627: V/MediaPlayer(28552): callback application
12-15 17:36:56.627: V/MediaPlayer(28552): back from callback
12-15 17:36:56.627: V/MediaPlayer(28552): message received msg=1, ext1=0, ext2=0
12-15 17:36:56.627: V/MediaPlayer(28552): prepared
12-15 17:36:56.627: V/MediaPlayer(28552): signal application thread
12-15 17:36:56.627: V/MediaPlayer(28552): callback application
12-15 17:36:56.627: V/MediaPlayer(28552): back from callback
12-15 17:36:56.627: V/MediaPlayer(28552): prepare complete - status=0
12-15 17:36:56.627: V/MediaPlayer(28552): start
12-15 17:36:56.637: E/MediaPlayer(28552): mOnVideoSizeChangedListener is null. Failed to send MEDIA_SET_VIDEO_SIZE message.
12-15 17:36:56.637: I/MediaPlayer(28552): Don't send intent. msg.arg1 = 0, msg.arg2 = 0
12-15 17:36:56.637: E/MediaPlayer(28552): mOnPreparedListener is null. Failed to send MEDIA_PREPARED message.
12-15 17:36:56.657: D/memalloc(28552): ion: Mapped buffer base:0x5d609000 size:3768320 offset:0 fd:51
12-15 17:36:57.478: D/memalloc(28552): ion: Mapped buffer base:0x5dba1000 size:3768320 offset:0 fd:58
12-15 17:36:57.738: V/MediaPlayer(28552): stop
12-15 17:36:57.878: D/dalvikvm(28552): GC_FOR_ALLOC freed 1515K, 14% free 50456K/58083K, paused 16ms
12-15 17:36:57.908: D/dalvikvm(28552): GC_FOR_ALLOC freed 506K, 9% free 52951K/58083K, paused 17ms
12-15 17:36:57.948: D/dalvikvm(28552): GC_FOR_ALLOC freed 500K, 9% free 54951K/60131K, paused 16ms
12-15 17:36:57.979: D/dalvikvm(28552): GC_FOR_ALLOC freed 500K, 9% free 56952K/62179K, paused 16ms
12-15 17:36:58.019: I/dalvikvm-heap(28552): Clamp target GC heap from 65.421MB to 64.000MB
12-15 17:36:58.019: D/dalvikvm(28552): GC_FOR_ALLOC freed 500K, 9% free 58952K/64227K, paused 16ms
12-15 17:36:58.019: I/dalvikvm-heap(28552): Forcing collection of SoftReferences for 2048016-byte allocation
12-15 17:36:58.049: I/dalvikvm-heap(28552): Clamp target GC heap from 65.414MB to 64.000MB
12-15 17:36:58.049: D/dalvikvm(28552): GC_BEFORE_OOM freed 9K, 9% free 58942K/64227K, paused 27ms
12-15 17:36:58.049: E/dalvikvm-heap(28552): Out of memory on a 2048016-byte allocation.
12-15 17:36:58.049: I/dalvikvm(28552): "main" prio=5 tid=1 RUNNABLE
12-15 17:36:58.049: I/dalvikvm(28552):   | group="main" sCount=0 dsCount=0 obj=0x40c5ccd0 self=0x15d0f60
12-15 17:36:58.049: I/dalvikvm(28552):   | sysTid=28552 nice=0 sched=0/0 cgrp=default handle=1075107208
12-15 17:36:58.049: I/dalvikvm(28552):   | schedstat=( 0 0 0 ) utm=99 stm=31 core=0
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.Bitmap.nativeCreate(Native Method)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:775)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.content.res.Resources.loadDrawable(Resources.java:1968)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.content.res.Resources.getDrawable(Resources.java:677)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.drawable.LevelListDrawable.inflate(LevelListDrawable.java:127)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:869)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.graphics.drawable.Drawable.createFromXml(Drawable.java:806)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.content.res.Resources.loadDrawable(Resources.java:1953)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.widget.ImageView.<init>(ImageView.java:119)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.widget.ImageView.<init>(ImageView.java:109)
12-15 17:36:58.049: I/dalvikvm(28552):   at java.lang.reflect.Constructor.constructNative(Native Method)
12-15 17:36:58.049: I/dalvikvm(28552):   at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.createView(LayoutInflater.java:586)
12-15 17:36:58.049: I/dalvikvm(28552):   at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-15 17:36:58.049: I/dalvikvm(28552):   at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:278)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.Activity.setContentView(Activity.java:1835)
12-15 17:36:58.049: I/dalvikvm(28552):   at com.fun2draw.Collection1Char1.onCreate(Collection1Char1.java:39)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.Activity.performCreate(Activity.java:4470)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
12-15 17:36:58.049: I/dalvikvm(28552):   at android.os.Handler.dispatchMessage(Handler.java:99)
12-15 17:36:58.059: I/dalvikvm(28552):   at android.os.Looper.loop(Looper.java:137)
12-15 17:36:58.059: I/dalvikvm(28552):   at android.app.ActivityThread.main(ActivityThread.java:4517)
12-15 17:36:58.059: I/dalvikvm(28552):   at java.lang.reflect.Method.invokeNative(Native Method)
12-15 17:36:58.059: I/dalvikvm(28552):   at java.lang.reflect.Method.invoke(Method.java:511)
12-15 17:36:58.059: I/dalvikvm(28552):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-15 17:36:58.059: I/dalvikvm(28552):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-15 17:36:58.059: I/dalvikvm(28552):   at dalvik.system.NativeStart.main(Native Method)
12-15 17:36:58.059: D/AndroidRuntime(28552): Shutting down VM
12-15 17:36:58.059: W/dalvikvm(28552): threadid=1: thread exiting with uncaught exception (group=0x40c5ba68)
12-15 17:36:58.069: E/AndroidRuntime(28552): FATAL EXCEPTION: main
12-15 17:36:58.069: E/AndroidRuntime(28552): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.fun2draw/com.fun2draw.Collection1Char1}: android.view.InflateException: Binary XML file line #133: Error inflating class <unknown>
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1970)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.ActivityThread.access$600(ActivityThread.java:128)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.os.Handler.dispatchMessage(Handler.java:99)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.os.Looper.loop(Looper.java:137)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.ActivityThread.main(ActivityThread.java:4517)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at java.lang.reflect.Method.invokeNative(Native Method)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at java.lang.reflect.Method.invoke(Method.java:511)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at dalvik.system.NativeStart.main(Native Method)
12-15 17:36:58.069: E/AndroidRuntime(28552): Caused by: android.view.InflateException: Binary XML file line #133: Error inflating class <unknown>
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.createView(LayoutInflater.java:606)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:278)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.Activity.setContentView(Activity.java:1835)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at com.fun2draw.Collection1Char1.onCreate(Collection1Char1.java:39)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.Activity.performCreate(Activity.java:4470)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
12-15 17:36:58.069: E/AndroidRuntime(28552):    ... 11 more
12-15 17:36:58.069: E/AndroidRuntime(28552): Caused by: java.lang.reflect.InvocationTargetException
12-15 17:36:58.069: E/AndroidRuntime(28552):    at java.lang.reflect.Constructor.constructNative(Native Method)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.view.LayoutInflater.createView(LayoutInflater.java:586)
12-15 17:36:58.069: E/AndroidRuntime(28552):    ... 24 more
12-15 17:36:58.069: E/AndroidRuntime(28552): Caused by: java.lang.OutOfMemoryError
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.Bitmap.nativeCreate(Native Method)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:618)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:593)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:775)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.content.res.Resources.loadDrawable(Resources.java:1968)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.content.res.Resources.getDrawable(Resources.java:677)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.drawable.LevelListDrawable.inflate(LevelListDrawable.java:127)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:869)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.graphics.drawable.Drawable.createFromXml(Drawable.java:806)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.content.res.Resources.loadDrawable(Resources.java:1953)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.widget.ImageView.<init>(ImageView.java:119)
12-15 17:36:58.069: E/AndroidRuntime(28552):    at android.widget.ImageView.<init>(ImageView.java:109)
12-15 17:36:58.069: E/AndroidRuntime(28552):    ... 27 more
12-15 17:37:09.571: I/Process(28552): Sending signal. PID: 28552 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T06:42:49.050

看起来您的 collection1Char1 活动中存在某种内存压力。您应该在启动下一个活动之前等待几秒钟，以便让系统有一些时间来恢复资源。

# ruby-on-rails - 渲染@users 和渲染“新”有何不同？

> ID：13897956
> 
> 赞同：8
> 
> 时间：2012-12-16T02:01:40.727
> 
> 标签：ruby-on-rails, ruby

在 RoR 中，我有时会看到：

```
render @users 
```

或者

```
render 'new' 
```

两者有何不同？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T02:31:16.640

简而言之，`render @users`正在渲染具有`User`名为 的部分文件的类型对象的集合`_user.html.erb`，并且`render 'new'`正在渲染`new`动作 & 等价于`render :action => new`.

最好查看 Ruby on Rails 指南中的[Layouts and Rendering in Rails](http://guides.rubyonrails.org/layouts_and_rendering.html)`render`页面，以了解这两个如何工作以及它们可以在何处适当使用，以及使这些和许多其他方便方法成为可能的各种内置假设。

# c# - 有什么比绘制单独的线更快的方法来绘制图形？

> ID：13897958
> 
> 赞同：3
> 
> 时间：2012-12-16T02:02:34.037
> 
> 标签：c#, graph, xna, drawing

到目前为止，我正在绘制我的调试性能图，其中 1px 矩形拉伸到必要的高度，但是以这种方式绘制大量数据会导致显着的性能损失。

目前的逻辑是：收集当前帧的所有时间，将它们放入`Queue<float>`s 中，并通过绘制 300 个拉伸的 1px 精灵为每个队列绘制图形。有 4 个图，因此仅在调试覆盖中就有 1200 个精灵，这很耗费资源。

有没有更好的方法来绘制至少不需要绘制这么多精灵的图形？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T15:53:56.203

## 行列表

您可以使用[`VertexPositionColor`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.vertexpositioncolor.aspx)数组来存储单独的图形值，然后[`GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionColor>`](http://msdn.microsoft.com/en-us/library/bb196409.aspx)与定义的[线列表（索引）](http://msdn.microsoft.com/en-us/library/bb196414%28v=xnagamestudio.40%29.aspx#ID4EBE)一起使用以通过正交投影绘制它们。

![在此处输入图像描述](../Images/085851445e92458a4419066f00c8375c.png)
[由于文件大小，.gif 的大小调整了 50%。]

我正在以 60fps 的速度绘制这些样本（4 个图形，每个图形有 300 个值点/像素）。

![在此处输入图像描述](../Images/2e3f0ee64633f8db01ef97378bf58db1.png)

* * *

## 三角带

如果您需要填充线条下方的图形，则可以改为绘制[三角形条](http://msdn.microsoft.com/en-us/library/bb196414%28v=xnagamestudio.40%29.aspx#ID4E2BAC)（点位于图形底部）。

![在此处输入图像描述](../Images/c5e4c8df8424b8a51efeceec1d12930c.png)

* * *

## 行列表代码

这是上面呈现的第一个图形的相关代码：

```
Matrix worldMatrix;
Matrix viewMatrix;
Matrix projectionMatrix;
BasicEffect basicEffect;

VertexPositionColor[] pointList;
short[] lineListIndices;

protected override void Initialize()
{
    int n = 300;
    //GeneratePoints generates a random graph, implementation irrelevant
    pointList = new VertexPositionColor[n];
    for (int i = 0; i < n; i++)
        pointList[i] = new VertexPositionColor() { Position = new Vector3(i, (float)(Math.Sin((i / 15.0)) * height / 2.0 + height / 2.0 + minY), 0), Color = Color.Blue };

    //links the points into a list
    lineListIndices = new short[(n * 2) - 2];
    for (int i = 0; i < n - 1; i++)
    {
        lineListIndices[i * 2] = (short)(i);
        lineListIndices[(i * 2) + 1] = (short)(i + 1);
    }

    worldMatrix = Matrix.Identity;
    viewMatrix = Matrix.CreateLookAt(new Vector3(0.0f, 0.0f, 1.0f), Vector3.Zero, Vector3.Up);
    projectionMatrix = Matrix.CreateOrthographicOffCenter(0, (float)GraphicsDevice.Viewport.Width, (float)GraphicsDevice.Viewport.Height, 0, 1.0f, 1000.0f);

    basicEffect = new BasicEffect(graphics.GraphicsDevice);
    basicEffect.World = worldMatrix;
    basicEffect.View = viewMatrix;
    basicEffect.Projection = projectionMatrix;

    basicEffect.VertexColorEnabled = true; //important for color

    base.Initialize();
} 
```

绘制它：

```
foreach (EffectPass pass in basicEffect.CurrentTechnique.Passes)
{
    pass.Apply();
    GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionColor>(
        PrimitiveType.LineList,
        pointList,
        0,
        pointList.Length,
        lineListIndices,
        0,
        pointList.Length - 1
    );
} 
```

对于三角形带状图，修改代码以显示[三角形带状](http://msdn.microsoft.com/en-us/library/bb196414%28v=xnagamestudio.40%29.aspx#ID4E2BAC)，并为图形曲线中的每个点在图形底部放置一个。

# iphone - iOS推送视图控制器不起作用

> ID：13897963
> 
> 赞同：0
> 
> 时间：2012-12-16T02:03:18.780
> 
> 标签：iphone, objective-c, ios, xcode

我有一个 uitabbarcontroller 设置为窗口的根视图。选项卡栏中的选项卡之一设置为 uitableviewcontroller 的子类。我要做的是在触摸其中一行时显示详细信息视图，因此我实现了

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

if (!detailViewController) {        
detailViewController = [[ItemDetailViewController alloc] init]; 

}   
[detailViewController setEditingArray:   
[list objectAtIndex:[indexPath row]]];  
[[self navigationController] pushViewController:detailViewController animated:YES];

} 
```

在我的表控制器中，但是当我选择该行时，我的详细视图不会弹出。我添加了 nslog 以查看该函数是否触发 - 确实如此，但我的详细视图仍然没有显示。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:06:55.500

您没有导航控制器（`[self navigationController]`正在返回`nil`）。不要将表视图控制器作为选项卡的根，而是将选项卡的根作为包含表视图控制器的导航控制器。您现在将能够从表视图控制器推送细节控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T03:26:04.110

`tableViewController`应该放在`NavigationController`一个. 我猜你是`tableView`在标签栏中创建的。

```
TableViewControllerSubclass* table = [[TableViewControllerSubclass alloc] init];

UINavigationController* tableNav = [[UINavigationController alloc] initWithRootViewController:table];

mainController = [[UITabBarController alloc] init];
mainController.viewControllers = [NSArray arrayWithObjects:tableNav,..., nil]; 
```

# mysql - 如何将 InnoDB 表从一台电脑移动到另一台电脑？

> ID：13897967
> 
> 赞同：0
> 
> 时间：2012-12-16T02:04:35.363
> 
> 标签：mysql, innodb

我有一个“管理员”表，我想将所有数据从一个位置移动到另一个位置。如果我使用 MyISAM 引擎，那么我会在数据文件夹中为 'admin' 表获得 3 个文件 'admin.frm'、'admin.MYD' 和 'admin.MYI'，我可以将这些文件复制并粘贴到另一个位置并可以运行桌子。但是如果我使用 InnoDB 引擎，那么我在数据文件夹中只会得到“admin.frm”，并且当将该文件复制到另一个位置时，该表将无法运行。

有人请告诉我如何将 InnoDB 表从一个位置移动到另一个位置？

-谢谢。

***编辑：（***我也需要传输数据和结构（作为整个表）。我想要它像 MyISAM 表文件一样简单的复制粘贴。有可能吗？以及如何？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:13:22.053

如果您只需要传输数据，则使用内置工具可能会更简单，因此...

使用 mysqldump 来获取你的表，一个非常简单的例子：

```
mysqldump -u USERNAME -p DATABASE admin > admin.sql 
```

然后在另一台计算机上：

```
mysql -u USERNAME -p DATABASE < admin.sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T02:11:13.863

为什么不使用[mysqldump](https://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)将所有数据转储到一个文件中，然后您可以在另一台机器上运行该文件？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T11:14:43.740

在 5.6 版本中使用表空间方法移动 Innodb：

1）在目标服务器/数据库上创建与源服务器相同的空表。

2) 丢弃目标服务器上的表空间。

```
Alter Table table_name discard tablespace. 
```

3) 在源服务器上执行“flush tables with read lock”后，将.frm 和.ibd 复制到目标服务器。

4）在目标服务器上导入表空间：

```
ALTER TABLE table_name IMPORT TABLESPACE; 
```

# jquery - 小 JQuery 交互

> ID：13897968
> 
> 赞同：0
> 
> 时间：2012-12-16T02:04:42.277
> 
> 标签：jquery, function, this

这是10个之一

*   ```
    <li class="application">
        <img class="iconapp" ..../>
        <p>
            <span class="spancat">....</span>
            <span class="prix>....</span>
            <span class="description">....</span>

            <span class="panier">
                <img .../>
            </span>
        </p>
    </li> 
    ```

    所以我尝试当我点击“.panier”时，它将“.iconapp”的alt属性的值放在一个新的div中。我很难过，因为我有 10 个 <li> 像上面那样，当我点击任何 <li> 的任何“.panier”时，我总是得到第一个 <li> 中的 .icon 的 att li>（在警报中）。

    这是我的 JQuery 代码：

    ```
    $(function ()    {
        $(".panier").click(function ()
        {
            var nom = $(".iconeapp").attr("alt");
            alert(nom);
            $("#divcat").append("<div id='appspanier'>HOLLA</div>");
        })
    }) 
    ```

    希望你能帮助我。

    谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:07:14.053

当您使用`$(".iconapp")`它时，它会选择该类的所有元素，然后该`.attr()`方法从第一个元素中获取一个属性（如您所见）。要将单击的项目与`.iconapp`同`li`一个第一个起点`this`（被单击的项目）相关联，并通过 DOM 向上导航到 the [`.closest("li")`](http://api.jquery.com/closest/)，然后在该 li[`.find()`](http://api.jquery.com/find/)内`.iconapp`：

```
$(function ()    {
    $(".panier").click(function ()
    {
        var nom = $(this).closest("li").find(".iconapp").attr("alt");
        alert(nom);
        $("#divcat").append("<div id='appspanier'>HOLLA</div>");
    });
}); 
```

# ruby-on-rails - RSpec 失败：“静态页面 X 应该有标题 X”——尝试使用 have_xpath 和 have_selector

> ID：13897970
> 
> 赞同：0
> 
> 时间：2012-12-16T02:04:57.460
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我一直在搜索网络和 Stack Overflow 以了解如何让这些测试正常工作。我是 Ruby 和 Rails 的新手，我只是按照 Hartl 的教程进行操作 - 复制粘贴大部分代码，看看它们最终是如何结合在一起的。

现在，我陷入了第 3.3 节“稍微动态的页面”中。

这是我收到的错误：

```
C:\Sites\sample_app>bundle exec rspec --no-color spec/requests/static_pages_spec.rb
F.F.F.

Failures:

  1) Static pages About page should have the title 'About Us'
 Failure/Error: page.should have_selector('title',
   expected css "title" with text "Ruby on Rails Tutorial Sample App | About Us" to return something
 # ./spec/requests/static_pages_spec.rb:44:in `block (3 levels) in <top (required)>'

  2) Static pages Help page should have the title 'Help'
 Failure/Error: page.should have_selector('title',
   expected css "title" with text "Ruby on Rails Tutorial Sample App | Help" to return something
 # ./spec/requests/static_pages_spec.rb:29:in `block (3 levels) in <top (required)>'

  3) Static pages Home page should have the title 'Home'
 Failure/Error: page.should have_selector('title',
   expected css "title" with text "Ruby on Rails Tutorial Sample App | Home" to return something
 # ./spec/requests/static_pages_spec.rb:14:in `block (3 levels) in <top (required)>'

Finished in 3.09 seconds
6 examples, 3 failures

Failed examples:

rspec ./spec/requests/static_pages_spec.rb:42 # Static pages About page should have the title 'About Us'
rspec ./spec/requests/static_pages_spec.rb:27 # Static pages Help page should have the title 'Help'
rspec ./spec/requests/static_pages_spec.rb:12 # Static pages Home page should have the title 'Home'

Randomized with seed 25648 
```

一旦我从这个 HTML 结构（在我的 About/Home/Help.html.erb 文件中）切换，就会发生错误：

```
<% provide(:title, 'Home') %>
<!DOCTYPE html>
<html>
  <head>
    <title>Ruby on Rails Tutorial Sample App | <%= yield(:title) %></title>
  </head>
  <body>
  <h1>Sample App</h1>
    <p>
      This is the home page for the
      <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
      sample application.
    </p>
</body>
</html> 
```

**对此：**

```
<% provide(:title, 'Home') %>
<h1>Sample App</h1>
  <p>
     This is the home page for the
     <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
     sample application.
  </p> 
```

其他相关文件：

**应用程序.html.erb：**

```
<!DOCTYPE html>
<html>
  <head>
    <title>Ruby on Rails Tutorial Sample App | <%= yield(:title) %></title>
    <%= stylesheet_link_tag    "application", :media => "all" %>
    <%= javascript_include_tag "application" %>
    <%= csrf_meta_tags %>
  </head>
  <body>
    <%= yield %>
  </body>
</html> 
```

**static_pages_spec.rb**

```
require 'spec_helper'

describe "Static pages" do

describe "Home page" do
  it "should have the h1 'Sample App'" do
    visit '/static_pages/home'
    page.should have_selector('h1', :text => 'Sample App')
  end

  it "should have the title 'Home'" do
    visit '/static_pages/home'
    page.should have_selector('title',
                    :text => "Ruby on Rails Tutorial Sample App | Home")

     // The line below is something I tried replacing the page.should have_selector with
    // page.should have_xpath("//title", :text => "Home")
  end
end

.... (other describe pages, same structure)

end 
```

我可能只是在复制/粘贴/阅读 Hartl 教程的过程中失明了，但我非常确定它看起来和他描述的一样。

我已经尽力寻找解决方案，但可惜我无法弄清楚，所以就这样吧！

干杯!

编辑：回答 Fiona #1

在这个网址上：“http://localhost:3000/static_pages/home”

文档标题什么都不是。

文档的来源如下所示：

```
<h1>Sample App</h1>
<p>
  This is the home page for the
  <a href="http://railstutorial.org/">Ruby on Rails Tutorial</a>
  sample application.
</p> 
```

源代码中没有 doctype、head、body 或 title 声明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T02:24:43.023

为了让 Rails 获取布局文件，application.html.erb 文件应该位于 app/views/layouts/application.html.erb 中。

# java - Android - 让用户浏览内部存储文件

> ID：13897973
> 
> 赞同：2
> 
> 时间：2012-12-16T02:06:36.403
> 
> 标签：java, android, file-io

所以我正在编写一个 Android 应用程序，它执行某些涉及数十个变量的计算，我想让用户将这些变量的值存储在一个文件中，以便他们将来可以再次将这些值加载到计算中，而无需重新输入它们。

理想情况下，我想要的是能够让用户将他们的值存储在他们的设备中，大概是作为文件，然后稍后浏览这些文件，选择他们想要上传到计算中的任何一个。

但是，我不确定实现这种“浏览”的最佳方式是什么。我目前最可能的原始想法是拥有一个始终存在的单个文件，该文件存储用户保存的所有其他文件的名称，以及一个读取该静态文件并在 Buttons 中显示所有这些文件名的片段用户随意选择。是否有更强大或更直观的方式让用户浏览不需要此类手动修补的可用文件或数据集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:39:16.780

创建文件时使用该`openFileOutput(String name, int mode)`方法。

**注意**，名称必须仅为文件名（无路径），并且该文件将在应用程序自己的内部“文件”目录中创建。

当您要枚举文件时，使用`getFilesDir()`获取具有`File`“文件”目录路径的对象，然后调用`listFiles()`以获取该目录中的文件数组（as `File[]`）。

遍历`File[]`以获取所有文件的名称，并使用它们来填充一个`ArrayAdapter<String>`并使用它来填充一个`ListView`.

当用户从列表中选择文件时，从选定的列表项中检索文件名，然后用于`openFileInput(String name)`打开文件。**注意**，同样`name`是没有路径的文件名。

# kdevelop - KDevelop：隐藏备份文件

> ID：13897977
> 
> 赞同：2
> 
> 时间：2012-12-16T02:07:22.460
> 
> 标签：kdevelop

我正在使用 KDevelop 4.3.1 和 Debian Wheezy。我的问题是，对于我的项目目录中的每个文件，KDevelop 似乎都创建了一个同名的备份文件，以波浪号结尾。这使得项目目录看起来非常不清楚。

我的问题是是否有一个选项可以在 KDevelop 中隐藏这些备份文件（例如所有以 ~ 结尾的文件）？项目文件的侧边栏列表中的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-08T08:57:10.500

备份文件由文本编辑器组件“Kate Part”在保存时创建。要摆脱 *~ 文件，您有两个选择。

`Settings`首先，通过>打开编辑器设置对话框`Configure Editor`，然后选择`Open/Save`项目，然后选择`Advanced`选项卡。

1.  禁用备份

    要完全禁用备份，请移除`[ ] Local files`.

2.  隐藏备份文件

    要隐藏备份，只需添加`Prefix: .`, 以便每个备份文件都是隐藏文件。然后将备份文件命名为例如`.MyFile.cpp~`.

备份文件背后的想法是保留旧版本，以防保存的文件因任何原因（系统崩溃、文件系统错误……？）而损坏。实际上，您很可能根本不需要备份，原因如下：

> 保存文件时，Kate 使用[KSaveFile](http://api.kde.org/4.11-api/kdelibs-apidocs/kdecore/html/classKSaveFile.html)类（在 Qt5 中可用作 QSaveFile）。简而言之，为了避免数据丢失，KSaveFile 将文件保存到与目标文件相同目录的临时文件中，并在成功写入时最终将临时文件移动到目标文件名。

换句话说，保存文件非常节省，并且由于 KSaveFile 的原子重命名，理论上应该始终有效。

因此，备份文件的唯一用例是您意外更改并保存了文件。在这种情况下，备份文件仍然包含您未保存两次的旧数据*。*

更重要的是：如果您使用版本控制系统（git、svn、...），备份的用处几乎为零。这也是为什么在较新版本的编辑器组件中完全禁用备份的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T10:50:19.200

如果您使用此过滤器（在文件列表的顶部）：

```
[A-Z]*[A-Z] 
```

您可能只会看到以字母开头和结尾的文件，因此不会显示隐藏文件（以“.”开头）和备份文件（以“~”结尾）。

请小心，因为任何其他不以字母开头或结尾的文件也将被隐藏

# java - 在 Android 中设置文本

> ID：13897978
> 
> 赞同：0
> 
> 时间：2012-12-16T02:07:44.470
> 
> 标签：java, android, android-layout

我是 Android 编程新手，如果这个问题听起来很愚蠢，请原谅我。我正在为 Android 开发一个计算器。所以我有大约 20 个按钮和一个文本字段。每当按下按钮时，我都会更新文本字段，以便用户知道他输入了什么。

但是，当我更新文本字段时，应用程序崩溃了。

updateExpression 是按下任何按钮时调用的方法。

```
 public void updateExpression (View v)
    {
      Log.d("string", "updateExpression Called");
      EditText text = (EditText) findViewById(R.id.name);
      text.setText("HELLO EVERYONE");
    } 
```

按钮的 .xml 文件是：

```
<Button
    android:id="@+id/Button03"
    android:layout_width="70dp"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/name"
    android:layout_below="@+id/name"
    android:onClick="updateExpression"
    android:text="C" />
// goes on for 20 buttons with different ids and text

<TextView  
    android:id="@+id/name"
    android:layout_width="fill_parent" 
    android:text="@string/edit_message" 
    android:layout_height="33dp" 
    android:textColor="@color/opaque_red"/>
</RelativeLayout> 
```

最后，logcat 有字符串数据“updateExpression Called”。但是，在那之后它立即崩溃。该错误具有标记 AndroidRuntime Fatal Exception main。这之后还有很多错误。一个相关的（据我说是）

引起：java.lang.classCatException: android.widget.TextView 不能转换成 android.widget.EditText

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T02:10:17.697

您正在尝试将 TextView 转换为 EditText，就像错误所说的那样。这是两个**单独**的类。

```
EditText text = (EditText) findViewById(R.id.name); 
```

应该

```
TextView text = (TextView) findViewById(R.id.name); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T02:09:39.523

在您的 xml 中，它是 a`TextView` 在您的代码中
`EditText text = (EditText) findViewById(R.id.name);`
，它是 a `EditText`。
所以选择一个。这取决于您的需求。如果用户能够输入此内容`View`，则使用`EditText`. 如果它是只读的并且您将处理这些文本，请选择`TextView`.

# django - Django 1.4 在开发服务器上提供 MEDIA_URL 和 STATIC_URL 文件

> ID：13897982
> 
> 赞同：4
> 
> 时间：2012-12-16T02:08:28.727
> 
> 标签：django

刚刚升级到 Django 1.4，并且在开发服务器上对静态和媒体文件的新“改进”服务遇到了严重的问题。我喜欢 Django，但是为什么他们现在使用 STATIC_URL、STATIC_ROOT、STATICFILES_DIR 使这些文件的服务变得更加复杂，这完全超出了我的理解。

我只是想在开发服务器上提供所有静态文件和上传文件。经过大量实验，我让 STATIC_URL 文件正常工作，但我根本无法获得 MEDIA_URL 文件。

设置：

```
DIRNAME = os.path.dirname(__file__)
MEDIA_ROOT = os.path.join(DIRNAME, 'media/')
MEDIA_URL = '/media/'
STATIC_ROOT = ''
STATIC_URL = '/static/'
STATICFILES_DIRS = () 
```

我添加了媒体和静态上下文处理器：

```
TEMPLATE_CONTEXT_PROCESSORS = (
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
'django.core.context_processors.media',
'django.core.context_processors.static',
"django.core.context_processors.request",
'satchmo_store.shop.context_processors.settings',
'django.contrib.messages.context_processors.messages', 
```

)

我在 url confs 中添加了：

```
# serve static and uploaded files in DEV
urlpatterns += staticfiles_urlpatterns()
urlpatterns + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT) 
```

按照文档中的说明添加了两个 conf 设置，第一个用于静态，第二个用于媒体。

我的结构，网站是一个应用程序，并且按照 djangoproject 的说明放置在其中的静态目录：

```
<myproject>
  --media
  --settings
  --templates
  --website
      |->static 
```

在模板中，我可以提供静态内容没问题

```
{{STATIC_URL}}css/style.css 
```

但是没有提供任何上传的图片，这个使用 photologue 的图片，但网址是正确的：

```
/media/photologue/photos/cache/spawning-2_admin_thumbnail.jpg 
```

该目录结构确实在 media/ 下退出

超级，超级迷茫。现在这一切看起来都非常复杂，而我以前从未遇到过任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T03:18:29.090

我对 Django 很陌生，我从来没有遇到过静态内容的任何问题。

这是我的配置。我希望它可以帮助

**我的文件夹结构**

```
django-project
--mainapp
----settings.py
----wsgi.py
----[...]
--otherapp
--fixtures
--static
--templates
--manage.py
--requirements.txt 
```

**设置.py**

```
import os, socket

DEBUG = True
TEMPLATE_DEBUG = DEBUG
MAIN_APP = os.path.abspath(os.path.dirname(__file__))
PROJECT_ROOT = os.path.abspath(os.path.join(MAIN_APP, ".."))
MY_LOCALHOST = "VirusVault.local" # this is the real name of my local machine :)

try: HOST_NAME = socket.gethostname()
except: HOST_NAME = "localhost" 
```

[...]

```
if HOST_NAME == MY_LOCALHOST:
    STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static/')
    STATIC_URL = "/static/"
    MEDIA_ROOT = os.path.join(STATIC_ROOT, 'media/')
    MEDIA_URL = "/media/"
else:
    STATIC_ROOT = "/server/path/to/static/files"
    STATIC_URL = "http://server.com/static/"
    MEDIA_ROOT = "/server/path/to/static/files/media/"
    MEDIA_URL = 'http://server.com/static/media/' 
```

您需要添加`'django.contrib.staticfiles'`到 INSTALLED_APPS

**网址.py**

```
if settings.HOST_NAME == settings.MY_LOCALHOST:
    urlpatterns += patterns('',
        (r'^media/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': settings.MEDIA_ROOT, 'show_indexes': True}),
    )
    urlpatterns += patterns('',
        (r'^static/(?P<path>.*)$', 'django.views.static.serve',
        {'document_root': settings.STATIC_ROOT, 'show_indexes': True}),
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:04:03.497

我打算先写评论，但不知何故`add comment`按钮不起作用。

您是否检查了媒体目录的权限？

既然它成为了答案，我将转储一个完美运行的 Django 1.4 站点配置。

结构体：

```
-myproject
-- media
-- static
-- templates
-- myproject
--- settings.py
--- urls.py 
```

设置.py：

```
PROJECT_ROOT = os.path.dirname(os.path.dirname(__file__)) # Not the best way but works
MEDIA_ROOT = os.path.join(PROJECT_ROOT, 'media/')
MEDIA_URL = '/media/'
STATIC_ROOT = os.path.join(PROJECT_ROOT, 'static/')
STATIC_URL = '/static/' 
```

网址.py：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
urlpatterns = patterns('',
...
(r'^media/(?P<path>.*)$', 'django.views.static.serve', 
   {'document_root': settings.MEDIA_ROOT}),
)
urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T04:14:37.490

如果您使用的是 Django 1.4 文件夹结构，则您已移动`settings.py`到新的`website`应用程序文件夹，这意味着您的 MEDIA_ROOT 现在不正确。不确定在这种情况下相对位置是否有效，但应该是这样的

```
MEDIA_ROOT = os.path.join(DIRNAME, '../media/') 
```

使用绝对路径可能更简单。

# asp.net-mvc-4 - 支持工作流的 MVC 应用程序中的领域驱动设计 - 设计决策

> ID：13897983
> 
> 赞同：1
> 
> 时间：2012-12-16T02:09:10.987
> 
> 标签：asp.net-mvc-4, domain-driven-design, repository-pattern, workflow-activity, service-locator

我正在构建一个 N-Tier MVC 4 应用程序，该应用程序使用一个抽象的 CommandProcessor 层来验证和执行我的 CommandModel 来实现 Repository 和 UnitOfWork 模式以及域驱动设计。

我现在开始学习Workflow Foundation，并添加了一个处理用户注册的工作流项目。在工作流结束时，如果一切顺利，工作流将执行 ApproveMembership CodeActivity：

```
public sealed class ApproveMembership : CodeActivity
{
    [RequiredArgument]
    public InArgument<string> UserEmail { get; set; }

    protected override void Execute(CodeActivityContext context)
    {
        IDatabaseFactory databaseFactory = new DatabaseFactory();
        IUnitOfWork unitOfWork = new UnitOfWork(databaseFactory);
        IUserRepository userRepository = new UserRepository(databaseFactory);

        string userEmail = UserEmail.Get(context);

        User user = userRepository.Get(u => u.Email == userEmail);

        if (user != null)
        {
            user.Activated = true;
            userRepository.Update(user);
            unitOfWork.Commit();
        }
    }
} 
```

还有一个类似的 RemoveMembership 活动，如果用户从不验证，则在一定时间后删除用户。

我的问题是，在我的工作流程中处理这个问题有意义吗？或者是更好的方法在工作流中使用依赖注入来获得一个 CommandBus，它将处理我必须创建的 2 个新的、几乎相同的命令模型，以及它们的验证和提交处理程序？这是在我的 MVC AccountController 中完成的。

```
 public class DeleteUserCommand : ICommand
    {
        public int UserId { get; set; }
    }
    public class ApproveUserCommand : ICommand
    {
        public int UserId { get; set; }
    }

    public sealed class RemoveMembership : CodeActivity
    {
        public InArgument<string> UserEmail { get; set; }

        private readonly ICommandBus commandBus;
        private readonly IUserRepository userRepository;

        public RemoveMembership(ICommandBus commandBus, IUserRepository userRepository)
        {
            this.commandBus = commandBus;
            this.userRepository = userRepository;
        }

        protected override void Execute(CodeActivityContext context)
        {
            string userEmail = UserEmail.Get(context);
            User user = userRepository.Get(u => u.Email == userEmail);

            if (user != null)
            {
                var command = new DeleteUserCommand
                {
                    UserId = user.UserId
                };

                IEnumerable<ValidationResult> errors = commandBus.Validate(command);
                if (!errors.Any())
                {
                    commandBus.Submit(command);
                }
            }
        }
    } 
```

显然这是更多的代码，但它是好的设计吗？

我觉得我在写这篇文章时回答了我自己的问题，我认为答案是肯定的。但还是想听听专业意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T20:15:25.730

> 我的问题是，在我的工作流程中处理这个问题有意义吗？

我会将您在 CodeActivity 中的代码封装到应用程序服务中，并让工作流引用该应用程序服务：

```
class UserApplicationService
{
    public void ApproveMembership(string userEmail) 
    { 
        var user = userRepository.Get(u => u.Email == userEmail);
        if (user != null)
        {
            user.Activated = true;
            userRepository.Update(user);
        }
    }
}

public sealed class ApproveMembership : CodeActivity
{
    [RequiredArgument]
    public InArgument<string> UserEmail { get; set; }

    protected override void Execute(CodeActivityContext context)
    {
        var userEmail = UserEmail.Get(context);
        this.userService.ApproveMembership(userEmail);
    }
} 
```

这样做的动机是 WWF 是您架构中的一个基础设施组件，它可以很好地将基础设施与域逻辑分离。WWF 可以替换为 NServiceBus 之类的东西，您可以在其中引用相同的应用程序服务。有人会说这是[YAGNI](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)的例子，但我认为分离域代码的基础设施在代码质量和推理域的能力方面都非常有益。

我还建议您尽可能将工作单元代码推送到基础架构中，这样应用程序服务就不必`Commit`显式调用。

> 或者是更好的方法在工作流中使用依赖注入来获得一个 CommandBus，它将处理我必须创建的 2 个新的、几乎相同的命令模型，以及它们的验证和提交处理程序？

这似乎更符合我的建议，但是根据您的代码示例，我建议更进一步，将 CodeActivity 中的大部分逻辑提取到应用程序服务中，或者以您可以的方式构建应用程序在不需要访问存储库的情况下分派命令。

# objective-c - iTunes Connect 不要求更新屏幕截图？

> ID：13897984
> 
> 赞同：6
> 
> 时间：2012-12-16T02:09:16.563
> 
> 标签：objective-c, xcode, app-store-connect

我已经更新了我的 iPhone 应用程序以支持 iPhone 5 屏幕..

我之前为另一个应用程序这样做过，我被迫上传用 iPhone 5 拍摄的新屏幕截图。

然而，这一次，iTunes Connect 只是将状态显示为“等待审核”，并没有提及任何关于屏幕截图的内容。

我有点担心出了什么问题？应用程序在 iPhone 5 和模拟器上运行良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T23:30:11.213

当 AppStore 发生变化（Apple 添加设备）时，他们可能会要求您获取新的屏幕截图。但如果他们的系统没有任何变化，他们不问是正常的。

不用担心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T13:31:38.827

事实证明，Apple 可以在审核过程中阻止元数据有问题的应用程序。如果他们认为您的元数据有误，他们只会将您的应用状态更改为“元数据被拒绝”。

以下是此状态规则的引用：

> 当您的二进制文件之外的特定元数据项未通过审核时出现。要解决此问题，请在 iTunes Connect 中编辑元数据，然后将现有二进制文件重新用于审查过程。您会在调解中心收到来自 App Review 的关于元数据拒绝原因的通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T14:04:35.653

您的应用可能尚未审核（现在截至 21 日）并且在 29 日之后才会进行审核。一旦您的应用通过审核，它将因缺少屏幕截图而被拒绝。如果您想节省一些时间和痛苦，请在 Apple 圣诞节假期期间更新屏幕截图。以后你会感谢自己的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-22T18:50:59.643

我的应用程序昨天被接受了，没有关于截图的消息。

应用程序在 iPhone 5 上运行良好，邮寄给 Apple 抱怨这可能是一个错误（iTunes Connect 无法识别本地化的 Default.png，我相信这是检查它以验证它是 iPhone 5 优化的。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T12:35:54.367

他们复制了您上一个版本的应用程序的屏幕截图（或者您在 itunesconnect 中的 Retina4 屏幕截图部分是否为空？）。因此，如果您不想更新它们，应该可以这样。

# php - 如何将类添加到表的最后一行

> ID：13897986
> 
> 赞同：0
> 
> 时间：2012-12-16T02:09:34.703
> 
> 标签：php

我想为`<tr>`主要类别的最后一个添加一个类。我不想将类名添加到每个`<tr>`. 我可以在脚本中更改什么？

像这样：

```
 <table>
    <tr>
    <th></th>
    </tr>
    <tr>
    <td></td>
    </tr>
    <tr class="test">
    <td></td>
    </tr>

<th></th>
<tr>
<td></td>
</tr>
<tr class="test">
    <td></td>
    </tr>
</table>

 <table class="data forum">   

        <? foreach ($this->mainCategories as $mainCategory): ?>
            <tr>
                <th><strong><?= $this->escape($mainCategory->fcName) ?></strong></th>
                <th>&nbsp;</th>
                <th><strong>Topics</strong></th>
                <th><strong>Laatste topic</strong></th>
             </tr>
             <? foreach ($mainCategory->getSubCategories() as $category): ?>

                <tr>
                    <td><a href="<?= $this->url(array('categoryid' =>  $this->escape($category->getID()), 'controller' => 'forum', 'action' => 'subcategory'), 'default', true) ?>"><?= $this->escape($category->getName()) ?></a></td>
                    <td><?= $this->escape($category->fcDescription) ?></td>
                    <? if ($this->escape($category->numTopics) > 0): ?>
                        <td><?= $this->escape($category->numTopics) ?></td>
                        <td><?= date_create($this->escape($category->last_topic))->format('d-m-Y H:i') ?></td>
                    <? else: ?>
                        <td>&nbsp;</td>
                        <td>&nbsp;</td>
                    <? endif ?>
                </tr>
             <? endforeach ?>
            <tr>
                <td class="split"></td>
            </tr>

         <? endforeach ?>

 </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T02:11:20.023

抓住`count`你的`$this->mainCategories`变量并根据计数器变量测试最后一个......

```
$count = count($this->mainCategories;
$current = 0;

<?
    foreach ($this->mainCategories as $mainCategory):
        $current++;
?>
    <tr<?= $current == $count?' class="someClass"':''?>> 
```

**更新：**

让我们看一个简化版本作为概念证明：

```
<?php
$mainCategories = array("Eins", "Zwei", "Drei");

$count = count($mainCategories);
$current = 0;

    foreach ($mainCategories as $mainCategory):
    $current++;
?>
    <tr<?= $current == $count?' class="someClass"':''?>>
        <td><?= $mainCategory ?></td>
    </tr>
<?php endforeach ?> 
```

这会产生以下 HTML：

```
<tr>
    <td>Eins</td>
</tr>
<tr>
    <td>Zwei</td>
</tr>
<tr class="someClass">
   <td>Drei</td>
</tr> 
```

# apache - 我被黑了吗？

> ID：13897993
> 
> 赞同：29
> 
> 时间：2012-12-16T02:11:01.483
> 
> 标签：apache

以下是我的 Apache 2.0 中的几行`error_log`：

```
[Sun Nov 25 08:22:04 2012] [error] [client 64.34.195.190] File does not exist: /var/www/vhosts/default/htdocs/admin
[Sun Nov 25 14:14:32 2012] [error] [client 96.254.171.2] File does not exist: /var/www/vhosts/default/htdocs/azenv.php
[Wed Nov 28 03:02:01 2012] [error] [client 91.205.189.15] File does not exist: /var/www/vhosts/default/htdocs/user
[Wed Nov 28 03:44:35 2012] [error] [client 66.193.171.223] File does not exist: /var/www/vhosts/default/htdocs/vtigercrm
[Mon Dec 03 00:09:16 2012] [error] [client 82.223.239.68] File does not exist: /var/www/vhosts/default/htdocs/jmx-console
[Mon Dec 03 20:48:44 2012] [error] [client 221.2.209.46] File does not exist: /var/www/vhosts/default/htdocs/manager
[Thu Dec 06 07:37:04 2012] [error] [client 116.254.203.24] File does not exist: /var/www/vhosts/default/htdocs/w00tw00t.at.blackhats.romanian.anti-sec:)
[Thu Dec 06 07:37:05 2012] [error] [client 116.254.203.24] File does not exist: /var/www/vhosts/default/htdocs/phpMyAdmin
[Thu Dec 06 07:37:05 2012] [error] [client 116.254.203.24] File does not exist: /var/www/vhosts/default/htdocs/phpmyadmin
[Thu Dec 06 07:37:06 2012] [error] [client 116.254.203.24] File does not exist: /var/www/vhosts/default/htdocs/pma
[Thu Dec 06 07:37:06 2012] [error] [client 116.254.203.24] File does not exist: /var/www/vhosts/default/htdocs/myadmin
[Thu Dec 06 07:37:07 2012] [error] [client 116.254.203.24] File does not exist: /var/www/vhosts/default/htdocs/MyAdmin
[Thu Dec 13 02:19:53 2012] [error] [client 96.254.171.2] File does not exist: /var/www/vhosts/default/htdocs/judge.php 
```

最常见的错误是对“phpMyAdmin”文件和“w00tw00t.at.blackhats.romanian.anti-sec:)”的请求。

我可以看到请求来自的 IP 地址。但谁是“客户”？

谢谢，谢恩。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-12-16T02:16:16.797

这只是许多 Script Kiddies 部署的自动脚本，用于寻找您的 apache 版本/配置中的安全漏洞。签名 w00tw00t 通常由`DFind`.

只需使用类似`fail2ban`配置的程序，例如此示例说明，以避免被这些请求淹没：

> [https://web.archive.org/web/20160617020600/http://www.userdel.com/post/18618537324/block-w00tw00t-scans-with-fail2ban](https://web.archive.org/web/20160617020600/http://www.userdel.com/post/18618537324/block-w00tw00t-scans-with-fail2ban)

这并不一定意味着您已被黑客入侵，但已对服务器进行了漏洞扫描。但是，如果您使用在这些日志中看到的任何软件并且它是具有已知漏洞的旧版本，您应该检查您的服务器是否存在异常文件和登录活动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-17T15:05:04.680

对此的请求通常在没有服务器标头的情况下发送。只需为没有您期望的服务器标头的请求创建一个默认虚拟主机并将其黑洞。记录中断的流量并执行反向 DNS 以查看它是否来自另一个网络服务器（被入侵？）并根据 whois 数据库联系所有者也很有趣。您永远不知道谁在可公开识别的服务器上运行愚蠢的脚本来扫描漏洞，然后通过 ToR 隧道利用它们。如果您不想引起注意，请使用燃烧器联系信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-09T19:03:33.460

为了跟进@user823629 给出的答案，这是我在 Apache 2.4 上使用的默认虚拟主机配置：

```
<VirtualHost *:80>
    # Default vhost for requests not matching IP or Host of other vhosts
    ServerName blackhole
    ErrorLog logs/error_log_default
    CustomLog logs/access_log_default combined

    Redirect 404 /
</VirtualHost>

<VirtualHost *:443>
    # Default vhost for requests not matching IP or Host of other vhosts
    ServerName blackhole

    ErrorLog logs/ssl_error_log_default
    CustomLog logs/ssl_access_log_default combined
    CustomLog logs/ssl_request_log_default   "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"

    SSLEngine on
    SSLCertificateFile /etc/pki/tls/certs/localhost.crt
    SSLCertificateKeyFile /etc/pki/tls/private/localhost.key

    Redirect 404 /
</VirtualHost> 
```

它将所有请求重定向到默认的 404 页面。与任何其他站点不匹配的 SSL 请求将在第二个`VirtualHost`定义中结束，当然会导致证书错误，但这是预期的并且很好。

我把它放进去`conf.d`并给它起一个名字，`conf.d/0_default.conf`这样它就出现在其他虚拟主机定义之前，它是默认的虚拟主机。这可以通过以下方式验证：

```
apachectl -t -D DUMP_VHOSTS 
```

或在 Redhat/Fedora/CentOS 发行版上：

```
httpd -t -D DUMP_VHOSTS 
```

如果出现以下情况，其他虚拟主机将在此默认虚拟主机之前匹配：

1.  它们的 IP 地址和端口更明确地匹配 VirtualHost 定义（基于 IP 的虚拟主机），或者
2.  请求包含`Host`与请求匹配的标头（基于名称的虚拟主机）。否则，请求将回退到上面定义的默认黑洞虚拟主机。

小心使用指定 IP 地址的 VirtualHost 定义。由于这些在黑洞之前匹配，因此错误的配置可能成为该 IP 的默认设置。如有必要，列出黑洞中的特定 IP。

有关虚拟主机匹配的更多详细信息，请参阅[http://httpd.apache.org/docs/current/vhosts/details.html](http://httpd.apache.org/docs/current/vhosts/details.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-06T06:51:10.657

除非您实际`/var/www/vhosts/default/`用于托管网站，否则这意味着您有发送到默认主机的请求，而这些请求并未被您的虚拟主机设置捕获。

暂时忽略这些是恶意请求，因为这些*vhosts/default/*错误的根本原因是您可能为虚拟主机禁用了 SSL，并且这些是在默认服务器配置中捕获的 HTTPS 请求。

您可以在 httpd.conf 中添加`%v %V %p`到您的 Apache 访问日志参数，以查看有关这些请求是什么以及处理它们的虚拟主机/服务器名称( ) 以及请求通过`%v %V`哪个端口 ( ) 发出的更多信息（通常是端口 443，如果它是`%p`HTTPS）。

要修复 HTTPS 方面，我将启用 SSL，然后放入 RewriteRule 以将 HTTPS 请求发送到 HTTP（如果这是预期的行为）。[有关如何在此处执行此操作的更多信息](http://blog.netscraps.com/tips/plesk-apache-404-error-file-does-not-exist-var-www-vhosts-default-htdocs.html)。

否则，为了帮助脚本小子，上面提到的黑洞是要走的路。只要确保您没有错误地将请求 HTTPS 的合法网络爬虫/蜘蛛发送到同一个银河死亡——例如 Googlebot 通过 HTTPS 测试合法页面，因为这是 Google 希望网络进入的方向。

# jquery - JS 可拖动视口

> ID：13897999
> 
> 赞同：0
> 
> 时间：2012-12-16T02:12:15.700
> 
> 标签：jquery, draggable, viewport

我想知道是否有可能在 JS 中创建一个可拖动的视口。这个想法是让三个 DIV 相互叠加：

*   顶层是一个可拖动的视口，显示最底层的 DIV（图像）
*   中间层是一个完全覆盖底部DIV的大图像
*   底层是被中间层隐藏的大图（视口中的位除外）

我找到了许多有用的库来制作可拖动的 DIV，但我不太确定是否可以让它透过中间层来显示底层。

编辑：我已经上传了我的意思的图表 - 视口看起来“穿过”中间层，在底层 -[图表](http://theflounderinghalibut.com/stuff/diagram.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T11:24:01.643

非常感谢charlietfl，我已经解决了我的问题。我使用了[JQuery UI Draggable 插件](http://jqueryui.com/draggable/)并将层数减少到两个，只需根据自己的位置调整顶部 DIV (#viewport) 的背景位置。

HTML：

```
<body>
    <div id="container">
        <div id="viewport"></div>
    </div>
</body> 
```

CSS：

```
#container {
    width: 1600px;
    height: 817px;
    background-image: url("assets/images/extras2/extras-top.jpg");
    position: relative;
}

#viewport {
    width: 338px;
    height: 235px;
    position: absolute;
    left: 300px;
    top: 20px;
    background-image: url("assets/images/extras2/extras-bottom.jpg");
    background-position: -300px -20px;
} 
```

JS：

```
jQuery(function($){
    $("#viewport").draggable({containment: "#container", scroll: false});
    $("#viewport").on("drag", function(){
        $(this).css("background-position", "-" + $(this).position().left + "px -" + $(this).position().top + "px")
    });
}); 
```