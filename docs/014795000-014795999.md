# StackOverflow 问答 14795000-14795999

# c - 负索引；释放时出错

> ID：14795001
> 
> 赞同：-2
> 
> 时间：2013-02-10T05:26:10.560
> 
> 标签：c, malloc, free

在 C 中，我在编写以下示例时遇到了错误：

```
int *pointer;
int i = 0;
pointer = malloc(10 * sizeof(int));
pointer[i - 1] = 4; 
```

显然`i`是一个负索引`pointer`。

即使更改了不正确的片段内存，为什么仅在`free(pointer)`[稍后在代码中] 时才触发错误？错误是：`double free or corruption (out)`。

编辑：使用的编译器是`gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T05:32:40.677

大多数（如果不是全部）内存管理器（例如：malloc）会在您请求的内存周围分配额外的数据。这个额外是为了帮助内存管理器通过将一些自己的数据添加到分配中来管理各种分配。当你做你的负索引时，你覆盖了这个额外的数据。它本身并不是无效的内存，因此 CPU 无法防御它，但是当 malloc 看到它的数据被破坏时，它确实会抱怨。这将发生在 free() 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T05:37:25.233

从根本上说，访问`pointer[-1]`您所做的方式会产生未定义的行为；理论上，*任何事情都*可能发生。但在实践中，对于您收到的特定错误消息有一个很好的解释。

回想一下，`malloc`必须将分配的内存块的大小保存在某处，这样`free`才能正常工作。在某些系统上——你的系统似乎就是其中之一——这些信息存储在内存中，就在`malloc`返回的地址之前。（如果您想了解系统的实现，打印出该值可能会很有趣。）

当您覆盖了那块内存时，您使系统内部处于不一致的状态，导致`malloc`发现时报告错误。当然，这种发现最有可能发生的时间是调用有关该内存区域的内存管理函数时。（下一次调用时会检测到一些损坏，但这通常需要更刻意的努力才能实现。）调用应该会给你一个类似的错误消息。`free``free``malloc``malloc``realloc`

# javascript - twitter bootstrap 的 typeahead 和多个文本字段

> ID：14795003
> 
> 赞同：0
> 
> 时间：2013-02-10T05:26:43.467
> 
> 标签：javascript, jquery, ruby-on-rails, twitter-bootstrap, callback

我的应用处理标签和电影实体：多对多关系。加入实体被命名为“tagazation”。我希望用户能够在模态窗口中为每部电影添加标签。因此，我将隐藏的模式窗口渲染到索引操作中的每部电影的页面。问题出在 tag_id 字段中：我在每个表单中都有 twitter bootstrap 的 typeaheaded 文本字段。所有这些字段共享公共类“标签输入”。在文本字段中的选择事件触发 set_id 函数：

```
$(document).ready(function() {
function set_id(item, val, text){
    $(this).parent().children("#tagazation_tag_id").val(val);
}
$(".tags-input").typeahead({
    source: [],
    itemSelected: set_id
});
}); 
```

set_id 函数应该以与触发该回调的文本字段相同的形式更改特定的隐藏字段，但标签 ID 有多个隐藏字段。如果我们确切地知道 set_id 函数是为哪部电影启动的，那当然不会是一个大问题。

我相信，应该有一种“标准”的方式来处理这个问题，而不是通过 DOM 树搜索来进行我仍然无法正常工作的浏览。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:39:09.113

如果我了解您要做什么，我认为最简单的解决方案是仅将一个隐藏的模态对话框呈现为 html，而不是为每部电影呈现一个模态对话框。在您打开模态之前，您可以使用 javascript 设置所需的任何文本，以使模态引用被单击的电影。

如果您只有一个模态对话框，则可以将隐藏标签 id 字段称为`$('#tagazation_tag_id')`，而不会混淆它所指的输入。

# android - 滚动时获取时间选择器值并在文本视图中显示

> ID：14795004
> 
> 赞同：0
> 
> 时间：2013-02-10T05:26:45.070
> 
> 标签：android, android-intent, textview, actionlistener, timepicker

我使用 onTimeChanged 侦听器从 timepicker 接收，但是当我尝试在 textview 中显示它时，我收到错误消息“无法从 TextView 类型对非静态方法 setText(CharSequence) 进行静态引用”，即使我声明了全局变量。我在 onCreate 方法中使用监听器。

```
 TimePicker.OnTimeChangedListener timePickerListener = new TimePicker.OnTimeChangedListener() {
        public void onTimeChanged(TimePicker view, int selectedHour, int selectedMinute) { 
            hour = selectedHour; 
            minute = selectedMinute; 
            StringBuilder sb=new StringBuilder(); 
            sb.append(hour).append(":").append(minute); 
            str=sb.toString(); 
            TextView.setText(str);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:47:31.763

您需要获取`TextView`要更改的实例。尝试在处理程序中执行此操作，因为我不确定您在哪里定义`TextView`.

```
TextView myTextView = (TextView) v.findViewById(R.id.myTextView);
if (myTextView != null)
     farm.setText(str); 
```

# javascript - 简单的褪色图像交换

> ID：14795007
> 
> 赞同：3
> 
> 时间：2013-02-10T05:27:14.183
> 
> 标签：javascript, jquery, html, image, slideshow

我很难找到一个简单的 jquery 图像交换。我发现的大多数示例都比我需要的复杂，并且做我不想要的事情。

目标：我有 5 张图像要淡入、滑入等。我很想从一张图像淡入/溶解到下一张，但幻灯片也可以。当第 1 页加载时，我希望第 1 个图像显示 4 秒......然后淡入下一个图像，4 秒，然后是下一个，等等。无限循环。

目前我的代码是一个简单的图像交换，不是很优雅：

```
document.getElementById("imgMain").src = "images/yurt/sleigh.png"; 
```

实现这一目标的最佳和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T06:29:46.347

[jsFiddle 上的工作示例。](http://jsfiddle.net/htmled/2kkHH/)

这是代码：

HTML

```
<div class="fadein">
    <img src="http://farm9.staticflickr.com/8359/8450229021_9d660578b4_n.jpg">
    <img src="http://farm9.staticflickr.com/8510/8452880627_0e673b24d8_n.jpg">
    <img src="http://farm9.staticflickr.com/8108/8456552856_a843b7a5e1_n.jpg">
    <img src="http://farm9.staticflickr.com/8230/8457936603_f2c8f48691_n.jpg">
    <img src="http://farm9.staticflickr.com/8329/8447290659_02c4765928_n.jpg">
</div> 
```

CSS

```
.fadein {
    position:relative;
    height:320px;
    width:320px;
}

.fadein img {
    position:absolute;
    left:0;
    top:0;
} 
```

JavaScript

```
$('.fadein img:gt(0)').hide();

setInterval(function () {
    $('.fadein :first-child').fadeOut()
                             .next('img')
                             .fadeIn()
                             .end()
                             .appendTo('.fadein');
}, 4000); // 4 seconds 
```

# c# - Metro App 有条件地禁用 AppBar RightTapped 事件

> ID：14795008
> 
> 赞同：2
> 
> 时间：2013-02-10T05:27:49.347
> 
> 标签：c#, windows-8, microsoft-metro, windows-runtime, appbar

每当在 Metro 应用程序上检测到右键单击时，都会`AppBar`显示 。

如果事件是通过右键单击特定控件触发的，如何取消**/禁用/防止显示？**`AppBar``RightTapped`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:35:00.190

[RightTapped](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.uielement.righttapped.aspx)是一个路由事件，[它的事件参数](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.righttappedroutedeventargs.aspx)包括[Handled](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.input.righttappedroutedeventargs.handled.aspx)属性。因此，在您处理事件的任何控件中，请在末尾添加以下代码以抑制 AppBar。

```
e.Handled = true; 
```

# xsl-fo - XSL-FO - 如何在最后添加一个没有页眉和页脚的信息页？

> ID：14795011
> 
> 赞同：0
> 
> 时间：2013-02-10T05:28:16.657
> 
> 标签：xsl-fo

在 XSL-FO 中如何在最后添加一个信息页面，我们不需要这个页面的页眉和页脚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:07:30.467

如果您想在输出的末尾添加一个页面，无论之前的分页如何，您都可以使用新的`fo:page-sequence`引用特定`fo:simple-page-master`于最后一页的页面。

例子：

```
 ...
    </fo:page-sequence>
    <fo:page-sequence master-reference="my-page-last">
        <fo:flow flow-name="xsl-region-body">
            <fo:block/>
        </fo:flow>
    </fo:page-sequence>
</fo:root> 
```

如果你只是想改变最后一页的布局，你可以使用`fo:conditional-page-master-reference`和使用`page-position="last"`条件。

例子：

```
<fo:page-sequence-master master-name="my-page-sequence">
    <fo:repeatable-page-master-alternatives>
        <fo:conditional-page-master-reference master-reference="my-page-last" page-position="last"/>
        <fo:conditional-page-master-reference master-reference="my-page"/>
    </fo:repeatable-page-master-alternatives>
</fo:page-sequence-master> 
```

# java - 如何将字符串解析为整数

> ID：14795013
> 
> 赞同：0
> 
> 时间：2013-02-10T05:28:34.857
> 
> 标签：java

好的，我的石头、纸、剪刀游戏正在运行。除了 Q 之外的其他所有操作都有效。由于我的扫描仪只接受整数，我如何将“Q”字符串传递给它。我假设我只是`if(string.equals("Q") {break;}`在 while 循环中添加一个简单的，我会很高兴去。让我知道你的想法。

```
import java.util.Scanner;
import java.util.Random;

public class RockPaperScissors
{

    /**
     * (Insert a brief description that describes the purpose of this method)
     * 
     * @param args
     */
    public static void main(String[] args)
    {
        int compint;
        String usermove = "";
        String compmove = "";
        String winner = "";
        int count = 0;
        int input=0;

        Scanner in = new Scanner(System.in);
        Random gen = new Random();

        System.out.print("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
        input=in.nextInt();
        while (count < 3)
        {
            compint = gen.nextInt(3) + 1;

            if (input == 1)
            {
                usermove = "Rock";
            }
            else if (input == 2)
            {
                usermove = "Paper";
            }
            else if (input == 3)
            {
                usermove = "Scissors";
            }

            if (compint == 1)
            {
                compmove = "Rock";
            }
            else if (compint == 2)
            {
                compmove = "Paper";
            }
            else if (compint == 3)
            {
                compmove = "Scissors";
            }

            if (compint == input)
            {
                winner = "TIE";
            }
            else if (compint == 1 && input == 3)
            {
                winner = "COMPUTER";
            }
            else if (compint == 2 && input == 1)
            {
                winner = "COMPUTER";
            }
            else if (compint == 3 && input == 2)
            {
                winner = "COMPUTER";
            }
            else
            {
                winner = "USER";
            }

            System.out.print("Computer: " + compmove + " | ");
            System.out.print("You: " + usermove + " | ");
            System.out.println("Winner: " + winner);
            System.out.println();
            count++;
            System.out.print("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
            input = in.nextInt();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:33:32.110

这段代码对我有用：

```
package com.sandbox;

import java.util.Random;
import java.util.Scanner;

public class Sandbox {

    /**
     * (Insert a brief description that describes the purpose of this method)
     *
     * @param args
     */
    public static void main(String[] args) {
        int compint;
        String usermove = "";
        String compmove = "";
        String winner = "";
        int count = 0;
        String rawInput = null;
        int input = 0;

        Scanner in = new Scanner(System.in);
        Random gen = new Random();

        System.out.print("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
        rawInput = in.next();
        if ("Q".equals(rawInput)) {
            return;     //exit main
        }
        input = Integer.parseInt(rawInput);

        while (count < 3) {
            compint = gen.nextInt(3) + 1;

            if (input == 1) {
                usermove = "Rock";
            } else if (input == 2) {
                usermove = "Paper";
            } else if (input == 3) {
                usermove = "Scissors";
            }

            if (compint == 1) {
                compmove = "Rock";
            } else if (compint == 2) {
                compmove = "Paper";
            } else if (compint == 3) {
                compmove = "Scissors";
            }

            if (compint == input) {
                winner = "TIE";
            } else if (compint == 1 && input == 3) {
                winner = "COMPUTER";
            } else if (compint == 2 && input == 1) {
                winner = "COMPUTER";
            } else if (compint == 3 && input == 2) {
                winner = "COMPUTER";
            } else {
                winner = "USER";
            }

            System.out.print("Computer: " + compmove + " | ");
            System.out.print("You: " + usermove + " | ");
            System.out.println("Winner: " + winner);
            System.out.println();
            count++;
            System.out.print("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
            input = in.nextInt();

        }
    }
} 
```

我正在做的是将输入作为字符串。我将它保存到一个名为`rawInput`. 然后我检查它是否等于“Q”。如果是，我就辞职了。如果不是，我将其转换为 Integer 并使用您的其余逻辑。

@MadProgrammer 对如何使此代码更具容错性提出了一些很好的建议，我将遵循这些建议，但我发布了此代码，因为它直接回答了您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T05:35:35.730

你有两个选择：

*   要么使用数值退出（0 或 -1），要么
*   将您的程序转换为同时接受字符串和数字。你这样做的方式是通过[`Integer.parseInt()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29).

    ```
    // This assumes that input is of type String instead
    int option = 0;
    System.out.print("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
    input=in.nextLine();
    try {
        option = Integer.parseInt(input);
    } catch (NumberFormatException nfe) {
        // wasn't a number, so it was either bogus input or the quit option.
        if("Q".equalsIgnoreCase(input)) {
            System.out.println("Quitting.");
            System.exit(0);
        } else {
            System.out.println("Bogus input.");
        }
    }
    while (count < 3 && option != 0) {
        // logic
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T05:30:40.510

`Integer.parseInt(myString)`

只需插入 myString

```
class JTest
{
    public static void main(String[] args)
    {
        String a = "5";
        int b = Integer.parseInt(a);
        System.out.println(b);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T05:45:30.370

如果用户不输入除 0-9 和“q”或“Q”以外的其他输入，那么它应该可以工作：

```
Scanner sc = new Scanner(System.in);
   String a = sc.next();
   if(a.equalsIgnoreCase("q")){
       System.out.println("quit game");
   }    
   else{
       int input = Integer.parseInt(a);
   } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T06:43:49.037

更改您的程序如下：

```
public static void main(String... args) {

        Scanner in = new Scanner(System.in);
        int compint;
        String usermove = "";
        String compmove = "";
        String winner = "";
        int count = 0;
        int input = 0;
        Random gen = new Random();
        Set<Boolean> set = new HashSet<Boolean>();
        boolean contains = false;
        while (count < 3) {
            System.out.print("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
            String nextLine=in.next().trim();
            do {
                for (int index = 0; index < nextLine.length(); index++) {
                    set.add(Character.isLetter(nextLine.charAt(index)));
                }
                contains = set.contains(true);
                if(contains) {
                if (nextLine.equals("Q")) {
                    System.out.println("program exited");
                    return;
                } else {
                    System.out .print("Re-enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
                    nextLine=in.next();
                }
                } else {
                    input=Integer.parseInt(nextLine);
                }

                set.remove(true);
            } while (contains);

            compint = gen.nextInt(3) + 1;

            if (input == 1) {
                usermove = "Rock";
            } else if (input == 2) {
                usermove = "Paper";
            } else if (input == 3) {
                usermove = "Scissors";
            }

            if (compint == 1) {
                compmove = "Rock";
            } else if (compint == 2) {
                compmove = "Paper";
            } else if (compint == 3) {
                compmove = "Scissors";
            }

            if (compint == input) {
                winner = "TIE";
            } else if (compint == 1 && input == 3) {
                winner = "COMPUTER";
            } else if (compint == 2 && input == 1) {
                winner = "COMPUTER";
            } else if (compint == 3 && input == 2) {
                winner = "COMPUTER";
            } else {
                winner = "USER";
            }

            System.out.print("Computer: " + compmove + " | ");
            System.out.print("You: " + usermove + " | ");
            System.out.println("Winner: " + winner);
            System.out.println();
            count++;
        }
        System.out.println("program's end");
    } 
```

# ruby-on-rails - RoR: $bundle install => /usr/bin/env: ruby : 不是目录

> ID：14795014
> 
> 赞同：0
> 
> 时间：2013-02-10T05:28:46.507
> 
> 标签：ruby-on-rails, ruby, linux, ubuntu, path

我正在尝试在 Ubuntu 上使用 Mysql 安装 RoR，到目前为止，这是一次非常痛苦和烦人的体验。

一切都已使用 RVM 完成，并在尝试调用时：

```
$ rails new <some path> <some name> -d mysql 
```

我收到未安装 MySQL 的错误，因此我按照说明运行：

```
$ gem install bundler
=> Successfully installed bundler 1.2.3 
```

从这里通过控制台安装 MySQL 的说明是：

```
=> Run 'bundle install' to install missing gems.
$ bundle install 
```

尝试运行此命令会导致以下输出：

```
/usr/bin/env: ruby: not a directory 
```

我真的很感激一些帮助，因为我只想开始编程，所以这让我很头疼。我希望这些垃圾来自 Windows，而不是 Ubuntu。

**问：我该如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:56:45.617

**解决了：**

源代码：[https ://askubuntu.com/questions/182418/how-to-get-usr-bin-env-ruby-to-point-to-the-correct-ruby-environment](https://askubuntu.com/questions/182418/how-to-get-usr-bin-env-ruby-to-point-to-the-correct-ruby-environment)

添加：

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"  # This loads RVM 
```

到：

```
.bashrc 
```

**然后为了修复 MySQL 安装错误，我在这个问题上使用了第二种解决方案（67 票）：**

[MySQL 安装：错误：无法构建 gem 原生扩展](https://stackoverflow.com/questions/2167598/mysql-install-error-failed-to-build-gem-native-extension)

**我希望这对将来的其他人有所帮助！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:38:27.570

你试过运行'gem install mysql2'吗？你的gem文件中有mysql2吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T20:47:47.590

我有同样的问题。就我而言`source /etc/profile.d/rvm.sh`，成功了！

（在这里找到：http: [//phpcommit.wordpress.com/2012/04/06/install-apache2-php-rvmpassenger-ruby-in-ubuntu-12-04-linode/](http://phpcommit.wordpress.com/2012/04/06/install-apache2-php-rvmpassenger-ruby-in-ubuntu-12-04-linode/)）

# ios - 返回时查看 IOS 模拟器上的崩溃

> ID：14795015
> 
> 赞同：0
> 
> 时间：2013-02-10T05:28:50.003
> 
> 标签：ios, view, crash, xib

我有两个 XIB 设置，一个启动，XIB 上有一个按钮，然后加载一个具有 RSS 提要的视图（单独的 XIB）。

在作为 RSS 提要的第二个 Xib 上，我有一个名为 home 的导航按钮，它返回到原始 Xib。一切正常，但是当我单击原始 Xib 上的按钮再次返回第二个 Xib 时，IOS 模拟器崩溃。

我想我必须发布原始视图，但我不确定该怎么做？有小费吗。

这是我用来移动到第二个 Xib 的代码（所以当我尝试转到 RSS 视图时，它会再次执行）。

```
- (IBAction)changeratings:(id)sender
{
    RSSTableViewController *rss2 = [[RSSTableViewController alloc]init];
    [self presentViewController:rss2 animated:YES completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:45:01.293

它崩溃了，因为你只是在分配 RSSTableViewController，你没有在任何 nib 接口中初始化它，这就是原因。

你必须用`initWithNibName`. 像下面这样初始化

```
RSSTableViewController *rss2 = [[RSSTableViewController alloc]initWithNibName:@"RSSTableViewController" bundle:nil]; 
```

# c# - 为什么 System.Array 不能是类型约束？

> ID：14795017
> 
> 赞同：14
> 
> 时间：2013-02-10T05:29:12.467
> 
> 标签：c#, .net, arrays, compiler-errors, generic-constraints

我正在开发一个带有几种不同类型数组的小项目（例如`double[]`，，`float[]`。`int[]`为了验证/测试/健全的目的，我正在将其中一些数组打印到控制台。所以我有多个功能如下所示（为本示例进行了简化 - 假设我只处理一维数组）：

```
void Print(float[] a) // prints an array of floats
{
    for (int i = 0; i < a.Length; i++)
    {
        Console.Write(a[i]);
    }
}

void Print(double[] a) // prints an array of doubles
{
    for (int i = 0; i < a.Length; i++)
    {
        Console.Write(a[i]);
    }
} 
```

我以我无限的智慧认为我可以通过简单地创建这些函数的通用版本来减少一些代码重复。所以我尝试了这个：

```
void Print<T>(T t) where T : Array
{
    for (int i = 0; i < t.Length; i++)
    {
        Console.Write(t.GetValue(i));
    }
} 
```

Intellisense 没有抱怨，但编译器失败并出现一个非常有趣的错误：

> `Constraint cannot be special class 'System.Array'`

我一直在寻找解释（类似于或密封类，但除了[在 msdn 上](http://msdn.microsoft.com/en-us/library/56b2hk61.aspx)`Object`提及之外，还没有找到太多。谁能向我解释*为什么*会这样？为什么我不能指定类型约束？*`System.Array`*

 *ps：在打字的时候，我意识到我可以更容易地完成我最初想要的事情，用一个简单的函数如下：

```
void Print(System.Array a)
{
    for (int i = 0; i < a.Length; i++)
    {
        Console.Write(a.GetValue(i));
    }
} 
```

这就是为什么编译器中有一个特殊的数组规则吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-10T05:31:33.770

执行您想要的操作的适当语法是：

```
void Print<T>(T[] array)
{
    for (int i = 0; i < array.Length; i++)
    {
        Console.Write(array[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-01T15:17:12.427

如果从字面上理解这个问题，那么有一个`Array`约束是没有用的。这与拥有`ValueType`约束没有用是一样的，因为它实际上并不检查您是否使用值类型作为泛型参数，而是检查您传递的类型是否可分配给`ValueType`.
所以你甚至可以`Array`作为通用参数传递，这没关系。

真正有用的是有一个*数组*约束，允许从 派生的任何类型`Array`，但不是`Array`其本身：

```
void Print<TArr>(TArr t) where TArr : array //or [*] or other fancy syntax 
```

哪里`T`可以是`[]`, `[,]`, `[,,]`, `[,,,]`, 等等。唯一过度的非泛型`Array`参数是我们知道数组的元素类型。

解决此问题的另一种方法是创建一个自定义`Array<T>`类，其中包含 , 等的隐式运算`T[]`符`T[,]`重载`T[,,]`。

编辑：
即使在 CIL（当前）中也无法实现这一点，因为在任何接口或构造函数`int[,]`中`Array`都没有区别。我们需要`where T : Array but not Array itself`约束。*

# ruby-on-rails - psql 排除基于另一个表的记录

> ID：14795019
> 
> 赞同：0
> 
> 时间：2013-02-10T05:29:32.247
> 
> 标签：ruby-on-rails, orm, rails-activerecord, rails-postgresql

我正在使用 postgres 并希望从另一个表中排除当前在一个表中的用户。目前我正在尝试通过 Rails 中的 ActiveRecord 系统来做到这一点。

所以我需要它从我的可用性表中获取 id，然后将该 id 返回到我的用户表中以删除它们（如果它们在可用性表中）。

```
@availabilities = Availability.where(:event_id => params[:id]).all
@players = User.where('team_id = ? and id <> ?', current_user[:team_id], @availabilities).all 
```

这将返回以下错误

```
PG::Error: ERROR:  argument of WHERE must be type boolean, not type record
LINE 1: SELECT "users".* FROM "users"  WHERE (team_id = 1 and id <> ...
                                             ^
: SELECT "users".* FROM "users"  WHERE (team_id = 1 and id <> 101,102,103) 
```

如下所述更改了代码，尽管我这样做的方式可能仍然不理想

```
@availabilities = Availability.where(:event_id => params[:id]).all
@exclude = Availability.where(:event_id => params[:id]).select(:user_id).pluck(:user_id)
if @exclude.count > 0
  @players = User.where('team_id = ? and id NOT IN (?)', current_user[:team_id], @exclude).all
else
  @players = User.where('team_id =?', current_user[:team_id]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T05:53:50.103

你可以这样做：

```
@availabilities = Availability.where(event_id: params[:id]).pluck(:id)
@players = User.where(team_id: current_user[:team_id])
@players = @players.where('id NOT IN (?)', @availabilities) unless @availabilities.empty? 
```

使用`pluck()`将返回一个 ID 数组，然后您可以通过使用排除它们`NOT IN (?)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T05:53:42.447

尝试：

```
id not in 
```

pg引擎看到的方式是((team_id=1 and id <> 101), 102, 103)。因此，您看到的错误。

将其用作：

```
User.where('team_id = ? and id not in (?)', current_user[:team_id], @availabilities).all 
```

# c# - 如何从多个单选按钮检查正确答案，考虑到答案必须从数据库中获取

> ID：14795027
> 
> 赞同：2
> 
> 时间：2013-02-10T05:30:57.463
> 
> 标签：c#, mysql, ado.net, radio-button

代码：

```
using (var connection = new MySqlConnection(connectionString))
using (var command = connection.CreateCommand())
{
    command.CommandText = "SELECT * from question WHERE question_id='10'" ;
    connection.Open();
    using (var reader = command.ExecuteReader())
    {

        while (reader.Read()) ;

        label1.Text = reader["question"].ToString();
        radioButton1.Text = reader["option1"].ToString();
        radioButton2.Text = reader["option2"].ToString();
        radioButton3.Text = reader["option3"].ToString();
        radioButton4.Text = reader["option4"].ToString();
    }
} 
```

我想从这些单选按钮中检查正确答案，我的数据库中有一个列，其中包含每组问题的正确答案的值，我如何获取它，我是这些语言的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:59:02.293

首先，我不建议`while (reader.Read())`在这种情况下使用，因为我假设您需要等待他们回答。您需要在单选按钮的 OnChange 事件或按钮 OnClick 事件（如提交答案）上运行某些内容，该事件会读取下一个问题和选项。

但是要阅读答案，就像阅读选项一样简单。假设您的 MySql 数据库中有一个名为 的列，`answer`您可以像其他列一样获取它：`reader["answer"].ToString();`.

# php - 如何在验证中允许非字母字符

> ID：14795030
> 
> 赞同：-4
> 
> 时间：2013-02-10T05:31:22.790
> 
> 标签：php, cakephp

我怎样才能允许像 ,.':;" 这样的非字母字符在我的 cakephp 项目中使用正则表达式我的代码：

```
'alpha' => array(
    'rule' => '/^[a-z\s\-\']+$/i',
    'message' => 'Please limit to alphabetical and non-alphabetical characters.'
    ); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:47:06.790

您的规则已经允许某些非字母字符。它允许使用空白字符（空格字符）、连字符（破折号）和撇号（单引号字符）。您所要做的就是添加到列表中：

```
'alpha' => array(
    'rule' => '/^[a-z\s\-\'\.,:;]+$/i',
    'message' => 'Please limit to alphabetical and non-alphabetical characters.'
); 
```

不要忘记转义具有特殊含义的字符，例如句点字符`.`。

请注意，此规则非常宽松。它将允许各种非常规输入，例如 -

*   `;;;;;;;;`
*   `--;;--::`
*   `''. .''`

# twitter-bootstrap - Twitter Bootstrap 模式阻止文本输入字段

> ID：14795035
> 
> 赞同：42
> 
> 时间：2013-02-10T05:32:32.083
> 
> 标签：twitter-bootstrap, modal-dialog

我正在尝试使用模式作为弹出帮助窗口。我将背景设置为“无”。当模式打开（没有背景）时，“原始”页面中的输入字段无法聚焦。

其他输入类型（例如复选框和按钮）运行良好......

任何想法 ？

我的代码：

```
<div class="container">
<!-- Button to trigger modal -->
  <form>
      <label>Input</label>
      <input type="text" placeholder="Type something…">
      <label class="checkbox">
        <input type="checkbox">Checkbox
      </label>
      <button type="submit" class="btn">Submit</button>
  </form>

  <!-- Button to trigger modal -->
  <a href="#myModal" role="button" class="btn" data-toggle="modal">Open Help...</a>

  <!-- Modal -->
  <div id="myModal" class="modal hide" data-backdrop="" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <h3 id="myModalLabel">Modal header</h3>
    </div>
    <div class="modal-body">
      <p>One fine body…&lt;/p>
    </div>
    <div class="modal-footer">
      <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
  </div>
</div> 
```

使弹出窗口可拖动的简单 Javascript：

```
$('#myModal').draggable(); 
```

所有这些都在 JSFiddle 上......

[http://jsfiddle.net/Jxdd8/3/](http://jsfiddle.net/Jxdd8/3/)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-10T06:18:45.773

听起来模态不是解决您的问题的正确方法。

根据定义，模态对话框不应允许用户与其下方的任何内容进行交互。

> 在用户界面设计中，模态窗口是一个子窗口，需要用户与其交互才能返回操作父应用程序，从而阻止了应用程序主窗口上的工作流。
> 
> - [http://en.wikipedia.org/wiki/Modal_window](http://en.wikipedia.org/wiki/Modal_window)

话虽如此，有一种方法可以绕过它。Bootstrap[设置了一个事件侦听](https://github.com/twitter/bootstrap/blob/master/js/bootstrap-modal.js#L110)器以从其他所有内容中窃取焦点，这就是阻止您编辑文本输入的原因。其他按钮之所以起作用，是因为它们不需要焦点，只需要单击事件。

您可以侦听引导模式触发的“显示”事件，并禁用它设置的焦点侦听器。

```
$('#myModal').on('shown', function() {
    $(document).off('focusin.modal');
}); 
```

只是为了好玩：http: [//jsfiddle.net/Jxdd8/4/](http://jsfiddle.net/Jxdd8/4/)

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2014-02-15T12:17:33.273

请记住，如果您使用的是 Twitter Bootstrap 3，Eric Freese 的回答将不再有效 - 事件名称已更改，因此请改用以下代码：

```
$('#myModal').on('shown.bs.modal', function() {
    $(document).off('focusin.modal');
}); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-04-20T08:26:28.143

请删除：

```
tabindex="-1" 
```

从

```
<div id="myModal" class="modal hide" data-backdrop="" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

改用这个：

```
<div id="myModal" class="modal hide" data-backdrop="" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-28T11:59:41.520

请删除：

```
tabindex="-1" 
```

并将模态的第一行更改为

```
tabindex="" 
```

这将使焦点能够输入字段。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-11-13T10:26:28.187

*解决

如果有人仍然卡在这个问题上，解决方案如下：

在 div 类`<div class="modal fade"`插入之后：`style="display:none;"`这将阻止模式阻止字段，它应该可以解决问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-28T04:39:28.430

以下方法可以解决 IE11 中 Bootstrap v2.3.2、Kendo UI Grid 版本 2013.3.1119.340 的这个问题。

关键是从模态的类中删除类“in”。不需要使用 "style='display:none;'" 因为它会导致 Kendo Grid UI 奇怪。

修复前的html代码：

```
 <div class="modal hide fade in" id="YourWindow" role="dialog"> 
```

修复后的html代码：

```
 <div class="modal hide fade" id="YourWindow" role="dialog">
       <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            
       </div>
       <div class="modal-body" >
          <div id="YourWindowBody">
          </div>
       </div>
       <div class="modal-footer">
          <button type="button" data-dismiss="modal">Close</button>      
       </div>
  </div> 
```

同时，添加以下 javascript 行：

```
 $("#YourWindow").on('shown', function () {
        $(document).off('focusin.modal');
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-10T12:05:31.227

正如 Eric Freese 所说，“根据定义，模态对话框不应允许用户与其下方的任何内容进行交互。” 我猜你在找什么可以在 Popover 中找到，它可以选择允许 html 内容[http://twitter.github.com/bootstrap/javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-29T01:51:03.957

对我来说，问题是我使用的是 jquery 3.2.1，所以我将其更改为 2.1.3，它在我们开发的以前的应用程序中使用，一切正常。可能与 jquery 和 bootstrap 兼容版本有关。

希望能帮助到你

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-06-26T10:45:34.283

以下为我工作：

```
$('#myModal').on("show.bs.modal", (ev) => {
    $('#myModal').find(".modal-content").on("mousedown", (e) => {

                if ($(e.target).is("input")) {
                    //Fix for bootstrap modal being stealing focus from inputs like textbox
                    e.stopImmediatePropagation();
                }
            });
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-05-15T18:30:50.437

> 使用此代码结束所有 javascript 代码：

```
$(document).on('focusin', function(e) {
    if ($(event.target).closest(".mce-window").length) {
        e.stopImmediatePropagation();
    }
}); 
```

[jsfiddle](http://jsfiddle.net/y9wgdfdw/6/)

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2015-02-18T06:47:51.693

使用 Bootstrap 3.3.2 版，上述解决方案均无效。

添加以下CSS就可以了

```
.modal-backdrop {
    position: static; 
} 
```

# php - 安装 memcached - 类存在但未找到

> ID：14795041
> 
> 赞同：2
> 
> 时间：2013-02-10T05:33:30.320
> 
> 标签：php, memcached, php-extension

这是一个很奇怪的问题——

我在我的 10.7.4 Mac 上安装了 Memcached 2.1.0，使用开发者工具运行 1.7.3 XAMPP。

我已按照[此处的说明进行操作](http://www.lecloud.net/post/3102678831/install-memcached-php-memcached-extension-under-mac)

1.  我也安装了 memcache 扩展（不是 memcached）。
2.  memcached 守护程序正在运行，我可以将数据远程登录到其中。
3.  php.ini -> 当我使用“extension=memcache.so”时，`phpinfo()`显示 memcache 扩展加载正常。
4.  php.ini -> 当我使用“extension=memcached.so”时，`phpinfo()`不显示 memcached 扩展
5.  php.ini -> 当我使用“extension=memcache.so”和“extension=memcached.so”时，`phpinfo()`两者都不显示！

真正奇怪的部分是：

1.  `class_exists('Memcached')`返回真！
2.  `extension_loaded('Memcached')`返回真！
3.  `new Memcached()`说找不到类。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T00:18:20.193

我刚刚遇到这个问题，这是因为命名空间。如果您正在使用命名空间，请尝试取出它们。看看这是否有效，然后从那里开始工作。

# messagebroker - FileInput 节点消息 ID 是什么？

> ID：14795047
> 
> 赞同：0
> 
> 时间：2013-02-10T05:34:30.863
> 
> 标签：messagebroker

FileInput 节点中的消息标识符是什么？或者..有没有办法在读取文件后获得唯一标识符？

当我们使用 MQInput 节点时，MQMD 用于获取 MsgId，但在这里我不知道如何获取此属性，如果有的话。我尝试在 InputFile 节点旁边添加一个 MQ Header 来添加消息 Id (MsgId = MQMI_NONE)，但总是得到 0000 ...，换句话说.. 它不会生成新的 MsgId。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T16:03:01.867

最后我在计算节点中使用 UUIDASCHAR 函数完成了它：

```
DECLARE MsgId CHAR; 
SET MsgId = UUIDASCHAR; 
```

它不是 FileInput 特定的属性，但它的作用是为消息流创建唯一标识符。

# php - 我的论坛搜索不能只是搜索主题

> ID：14795048
> 
> 赞同：1
> 
> 时间：2013-02-10T05:34:37.120
> 
> 标签：php, mysql, sql

我正在写我的论文，我正在尝试制作一个标准论坛，但我的搜索遇到了问题。

现在它只搜索我的线程主题，而不是搜索该线程中的文本。

```
`$query=mysql_db_query($db,"SELECT topic,isi FROM forum where ID_replay=0 and topic like '%$key%' or isi like '%key%' order by date desc",$koneksi);` 
```

似乎该查询仅从该表论坛中的“主题”列中搜索。我习惯`ID_replay`按日期对结果进行排序，所以我对它为什么不起作用感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:36:11.130

我认为您需要对条件进行分组...

```
SELECT topic,isi 
FROM   forum 
where  ID_replay = 0 AND
       (topic LIKE '%$key%' OR isi LIKE '%key%') 
ORDER  BY date DESC 
```

# java - 本机方法的 Javah 命令给出异常

> ID：14795050
> 
> 赞同：17
> 
> 时间：2013-02-10T05:34:53.143
> 
> 标签：java, java-native-interface, javah

我将它输入到命令提示符中，但我不确定为什么它说它不是有效的类名，因为它在磁盘上具有位置和完全限定的类名。Java - 版本有效，我正在使用 JDK 运行最新版本的 JVM，CLASSPATH 也已正确配置。

课程是这样的：

```
package JNI;

public class Main {

public native void printTitle();

public static void main(String[] args) {
    Main main = new Main();
    main.print();
}

public void print(){
    System.out.println("The print subroutine has finished.");
} 
```

命令行参数是：

```
C:\Users\USER\Documents\NetBeansProjects\JNI Test Project\build\classes\JNI>javah -jni -classpath "C:\Users\USER\Documents\NetBeansProjects\JNI Test Project\build\classes\JNI" JNI.Main.class
Exception in thread "main" java.lang.IllegalArgumentException: Not a valid class name: JNI.Main.class
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:177)
    at com.sun.tools.javac.api.JavacTool.getTask(JavacTool.java:68)
    at com.sun.tools.javah.JavahTask.run(JavahTask.java:509)
    at com.sun.tools.javah.JavahTask.run(JavahTask.java:335)
    at com.sun.tools.javah.Main.main(Main.java:46) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T05:43:27.533

`classpath`应该指向您的顶级包（JNI）所在的根文件夹，而不是您的类物理所在的文件夹。

类名不应包含`.class`扩展名。

将其视为对类而不是物理文件进行操作。

`javah -jni -classpath "C:\Users\GETH COMMANDER\Documents\NetBeansProjects\JNI Test Project\build\classes" JNI.Main`

此外，您应该遵循 Java 命名约定并使您的包名称小写。

# sql - 编写 SQL 查询来解决 SQL 难题

> ID：14795055
> 
> 赞同：1
> 
> 时间：2013-02-10T05:36:00.880
> 
> 标签：sql

关于如何使用以下信息编写 SQL 查询，我需要一些帮助/指导：

![在此处输入图像描述](../Images/fa549d30b4aad3c4348ba7a9ad5a59d8.png)

问题是：

> 经理想查看当前陈列室中的所有汽车及其价格，格式如下：[制造] [型号] – £[价格] 例如“VW GOLF - 3000”。编写一个 SQL 查询来满足这个请求。

__

我已经把它分解成我认为它需要如何工作-

*   首先它需要查看 showroom 表中的 CarID，并将它们与 car 表中的 ID 匹配
*   然后它需要从 Car 表中显示汽车的型号

    2,5,8 = 嘉年华、高尔夫和 307

*   找到名称后，它会检查 ParentCarID 以查看 make 是什么

    福特、大众和标致

然后，品牌和型号将显示在价格旁边，从而产生查询结果：

```
CarID  Model    Make     Price

2      Fiesta   Ford     4000
5      Golf     VW       3000
8      307      Peugeot  5000 
```

_

在观看和阅读了很多关于各种查询的内容后，我认为我需要使用关系查询或带有连接的查询，我将不胜感激任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:40:01.233

```
SELECT  a.MakeCode,
        a.ModelCode,
        b.Price
FROM    CarTable a
        INNER JOIN ShowRoom
            ON a.ID = b.CarID 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:48:11.637

您可以通过 parentID 将表连接到自身来获取品牌和型号：

```
SELECT * FROM tableA
    JOIN tableB ON tableA.ID = tableB.parentID 
```

然后你只需要加入陈列室表中的价格：

```
SELECT Model.ID, Make.Name, Model.Name, S.Price FROM car Make
    JOIN car Model ON Make.id = Model.parentCarID
    JOIN showroom S ON Model.ID = S.CarID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-15T12:08:04.117

我希望这个查询能如你所愿。

选择 c.Makecode, c.madecode,s.price from car c, showroom s where c.id=s.carid

# iphone - 处理图像的RGB

> ID：14795056
> 
> 赞同：1
> 
> 时间：2013-02-10T05:36:06.010
> 
> 标签：iphone, ios, objective-c, image-processing

我正在开发一个应用程序。我有要求，比如我的应用程序应该检测图像的特定颜色。例如，如果我想检测红色，那么我应该只看到图像的红色区域。我已经通过以下方式尝试过：

**伪代码：**

首先，我使用以下方法以 RGB 的形式获取图像的每个像素的信息：

```
 for(int i=0; i < width; ++i)
{
    for (int j=0; j <height; j++)
    {
         byteIndex = (bytesPerRow * j) + i * bytesPerPixel;

        CGFloat red   = (rawData[byteIndex]     * 1.0) /255.0;
        CGFloat green = (rawData[byteIndex + 1] * 1.0)/255.0 ;
        CGFloat blue  = (rawData[byteIndex + 2] * 1.0)/255.0 ;
        if (red>0.9 && red<1)
        {
            rgba[byteIndex]   =red*255;
            rgba[byteIndex+1] =green*0 ;
            rgba[byteIndex+2] = blue*0;
            count++;

        }

    }

} 
```

然后我将此信息分配给另一个带有空蓝色和绿色部分的图像，因此我只能看到图像的红色区域。它工作正常。

但问题在于 for 循环。我必须迭代 for 循环取决于图像的高度和宽度。例如。如果图像的高度为 300，宽度为 400，则必须将 for 循环迭代 300 * 400 =120000 次，我认为这不是更好的方法。那么有什么方法可以有效地做到这一点？是否有任何开源库来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T10:26:24.263

您可以开始优化您的代码。那里有很多不必要的操作和浮点/整数转换。

```
for ( NSUInteger i = 0; i < width * height ; i ++ ) {
    NSUInteger red = rawData[i] ;
    if ( red > 230 ) {
        rawData[i+1] = 0 ;
        rawData[i+2] = 0 ;
    }
} 
```

# blackberry - 无论如何添加到 NavigationPane 时在 qml 中有一个 onLoad 函数？

> ID：14795071
> 
> 赞同：1
> 
> 时间：2013-02-10T05:39:40.593
> 
> 标签：blackberry, blackberry-10, blackberry-cascades

我是黑莓 10 开发新手。所以我想知道最好的方法是什么，因为我没有从开发文档中得到任何明确的答案。

我想要的是从导航屏幕在我的应用程序中启动一个单独的视图。然后，新页面将创建一个 http 请求并根据输出更新 UI。

最好的方法似乎是使用 NavigationPane 并添加一个 qml 视图。但是，当 C++ 函数被推入堆栈时，如何调用它呢？类似于 Fragments 中的 android onActivityCreated() 的东西。有 Http 示例文档，但是程序从继承的 QObject 的构造函数开始了 http 请求。如何在将新 qml 添加到导航堆栈时执行一个函数

```
 // navigationpane.qml

NavigationPane {
    id: navigationPane
    Page {
        Container {
            Label { 
                text: "First page"
            }
        }

        actions: [
            ActionItem {
                title: "Next page"
                ActionBar.placement: ActionBarPlacement.OnBar
                onTriggered: {
                    var page = pageDefinition.createObject();
                    navigationPane.push(page);
                }

                attachedObjects: ComponentDefinition {
                    id: pageDefinition;
                    source: "secondpage.qml"
                }
            }
        ]
    }
    onPopTransitionEnded: { page.destroy(); }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T01:43:11.813

我认为 onCreationCompleted 函数可能是您正在寻找的。

在您的 secondpage.qml 文件的 Page 对象中，添加以下内容：

```
Page {
        id: secondpage

        onCreationCompleted: {
            // use Javascript to call the exposed C++ function
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T19:47:50.387

如果你想要更多的“onActivityCreated()”精神，你可以使用信号transitionEnded：

```
 NavigationPane { 
         onPushTransitionEnded{
             top.callYourPageFunction();
        }
    } 
```

# javascript - 使用 jquery 保存 contenteditable 数据

> ID：14795072
> 
> 赞同：1
> 
> 时间：2013-02-10T05:39:41.203
> 
> 标签：javascript, jquery, html, css

我正在尝试`contenteditable` `div`使用 jQuery 在本地保存 a 的数据。
这是我所做的一切：[链接](http://jsfiddle.net/XNkaY/11/)

请帮助我，我被困在这个问题上！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:57:46.497

将“textarea”元素更改为“div”并添加 contenteditable="true"。然后将 text.value 更改为 text.innerHTML。你是这个意思吗？[在这个链接](http://jsfiddle.net/XNkaY/12/)上它似乎对我有用。

```
<div id="editor" contentEditable="true" placeholder="Start writing..."></div>
...
[text.innerHTML || text.placeholder], {
...
session.text = text.innerHTML; 
```

# mysql - 使用多个表创建有效查询

> ID：14795074
> 
> 赞同：1
> 
> 时间：2013-02-10T05:40:33.230
> 
> 标签：mysql, sql, select, union

我正在尝试查询网站搜索。我需要对这个查询做的是我想根据搜索关键字（导师、机构、学科、城市）选择四个主要列。键入关键字时，查询必须检查这四个表，并且需要在这四个类别下显示搜索结果。显示搜索结果时，我需要添加一些值以生成有意义的搜索结果。例如：考虑在导师类别下显示导师作为搜索结果，我需要显示他/她的姓名、城市、个人资料图片等。

它是这样的。

```
**Tutors** 
  tutor's name
  city
  profile image
**institutes** 
  institute's name
  city
  profile image 
**subjects**
  subject name
  category name which belong this subject
**cities** 
  city name
  district name which city belong etc... 
```

我试过这样的东西

```
$q = "SELECT keyword, col, city_name, image_name, tutor_code 
        FROM (
            SELECT tutor_name AS keyword, 'Tutors' AS col, IFNULL(c1.city_name, '') city_name, IFNULL(ti.image_name, '') image_name, tutor_code FROM tutors AS t
            LEFT JOIN address a ON t.address_id = a.address_id
            LEFT JOIN city c1 ON a.city_id = c1.city_id 
            LEFT JOIN tutor_images ti ON t.tutor_id = ti.tutor_id AND ti.image_type = 'profile'
            UNION
            SELECT subject_name AS keyword, 'Subject' AS col, '' city_name, '' image_name, '' tutor_code FROM subjects 
            UNION
            SELECT city_name AS keyword, 'City' AS col, '' city_name, '' image_name, '' tutor_code FROM city
            UNION
            SELECT institute_name AS keyword, 'Institute' AS col, '' city_name, '' image_name, '' tutor_code FROM institutes AS i
            LEFT JOIN address a ON i.address_id = a.address_id
            LEFT JOIN city c2 ON a.city_id = c2.city_id 
            LEFT JOIN institute_images ii ON i.institute_id = ii.institute_id AND ii.image_type = 'profile'             
        ) s
      WHERE keyword LIKE '%$queryString%' 
      LIMIT 10"; 
```

这个查询工作大约 50%，但不能 100% 工作。问题是在机构类别下不显示城市名称和头像，在城市和学科字段下无法显示地区名称和类别名称。而且我想这种查询是无效的，是否浪费时间和资源？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:34:09.013

尝试这个：

```
SELECT keyword, col, city_name, image_name, tutor_code, district_name, category_name 
FROM (
    SELECT tutor_name AS keyword, 'Tutors' AS col, IFNULL(c1.city_name, '') city_name,  
             IFNULL(ti.image_name, '') image_name, tutor_code, '' district_name, '' category_name 
    FROM tutors AS t 
    LEFT JOIN address a ON t.address_id = a.address_id 
    LEFT JOIN city c1 ON a.city_id = c1.city_id 
    LEFT JOIN tutor_images ti ON t.tutor_id = ti.tutor_id AND ti.image_type = 'profile' 
    UNION
    SELECT subject_name AS keyword, 'Subject' AS col, '' city_name, '' image_name, '' tutor_code, 
             '' district_name, c.category_name 
    FROM subjects s 
    LEFT JOIN category_subjects cs ON s.subject_id = cs.subject_id 
    LEFT JOIN category c ON cs.category_id = c.category_id 
    UNION
    SELECT city_name AS keyword, 'City' AS col, '' city_name, '' image_name, '' tutor_code, 
             district_name, '' category_name 
    FROM city 
    UNION
    SELECT institute_name AS keyword, 'Institute' AS col, IFNULL(c2.city_name, '') city_name, 
             IFNULL(ii.image_name, '')  image_name, institute_code tutor_code, '' district_name, '' category_name
    FROM institutes AS i 
    LEFT JOIN address a ON i.address_id = a.address_id  
    LEFT JOIN city c2 ON a.city_id = c2.city_id  
    LEFT JOIN institute_images ii ON i.institute_id = ii.institute_id AND ii.image_type = 'profile'             
) s
WHERE keyword LIKE '%$queryString%' 
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:48:47.647

`UNION`尝试将所有`SELECT`查询的结果放入具有一组列名/数据类型的大表中。因此，所有语句的列数和每列的数据类型`SELECT`必须匹配。您已经在使用关键字，这是一种区分类型的有用策略。我认为您可以在正确的列中选择额外的数据来完成这项工作。

我认为您应该做的是尝试并衡量性能。然后并行进行单独的数据库调用并获取结果并衡量该性能。我认为它们将与更易于理解和维护的第二个相媲美。

# linq - 使用 Datatable 中的 LINQ 进行 PIVOT

> ID：14795079
> 
> 赞同：0
> 
> 时间：2013-02-10T05:41:26.803
> 
> 标签：linq

我有一个通过执行 SQL Query 填充的数据表。列是

```
Env Group Issue
DIT  A     1
DIT  B     2
SIT  A     3
SIT  C     4
STG  D     5 
```

LINQ 查询应如下所示

```
Group  DIT SIT STG
A      1   1   0
B      1   0   0
C      0   1   0
D      0   0   1 
```

转置后，ENV 列应该有计数（问题）

# android - 在帧缓冲区上显示数据

> ID：14795080
> 
> 赞同：0
> 
> 时间：2013-02-10T05:41:33.373
> 
> 标签：android, linux, android-ndk, java-native-interface, rgb

我有一个植根的 android 设备，在我的本机代码中，我有一个指向保存像素数据的缓冲区的指针。现在我的任务是将这些像素数据转储到帧缓冲区以显示它。我对 linux 环境很陌生，所以我几乎没有关于相同的信息。我用谷歌搜索，发现 ioctl() 可能有帮助，但没有找到更多关于相同的细节。

如果有人处理过类似的要求和问题，请提供一些链接或答案。任何做同样事情的建议都将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:16:20.687

作为 android 硬件和视频软件学习曲线的一部分，您可能想要查看这些链接，一种长 mp4，但它们与了解您工作的领域非常相关。

[一](http://marakana.com/static/courseware/android/Aptina-Android-Camera-Internals.pdf)

[二](http://video.linux.com/videos/exposing-the-android-camera-stack)

# html - Internet Explorer CSS 标头问题

> ID：14795088
> 
> 赞同：0
> 
> 时间：2013-02-10T05:43:29.343
> 
> 标签：html, css, debugging, internet-explorer-8, internet-explorer-9

我正在开发[一个网站](http://tinyurl.com/ajukxdf)，它在 Chrome/Firefox 中运行良好，但我在 IE8 和 9 中遇到了两个问题。

1.  在 IE9 中，标题中的导航菜单不显示。

2.  在 IE8 中，整个标题都被搞砸了。标题、副标题和导航菜单都出现在主标题图像上方，而不是在其顶部。（[单击此处查看它的外观](http://tinyurl.com/ajukxdf)）。

我确信这些都是非常简单的修复，我只是找不到它们。提前致谢。

编辑代码。HTML：

```
 <div class="heightWrapper">
        <h1 class="birthofahero"><?php bloginfo( 'name' ); ?></h1>
        <h2 class="jennasue"><?php bloginfo( 'description' ); ?></h2>
        <img src="/resources/images/header.jpg" alt="StartLivingNow | Inspiring a Generation" />
        <nav class="topNavigationMenu">
            <ul>
                <li><a href="/" title="Home">Home</a></li>
                <li><a href="/about/">About</a></li>
                <li><a href="/blog/">Blog</a></li>
                <li><a href="/media/">Media</a></li>
                <li><a href="/newsletter/">Newsletter</a></li>
                <li><a href="/partnership/">Partnership</a></li>
                <li><a href="/contact/">Contact</a></li>
            </ul>
        </nav>
    </div> 
```

CSS

```
.heightWrapper {
    height: 100%; /* To position the navbar at the bottom of the div */
    margin-bottom: -.4em; /* A magic number, for some reason. */
}
.topNavigationMenu {
    float: left;
    position: relative;
    bottom: 3.9em;
    margin-bottom: -3.9em;
    z-index: 100; /* test */
}
.topNavigationMenu li, .topNavigationMenu a {
    float: left;
}
.topNavigationMenu li a {
    font-family: 'Open Sans', Arial, sans-serif;
    font-size: 2em;
    font-weight: bold;
    text-decoration: none;
    color: #004080;
    float: left;
    padding: .2em .4em;
}
.topNavigationMenu li a:hover, .topNavigationMenu li a:active {
    background-color: #004080;
    color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:52:33.087

# IE8

原因是你的布局。在您的布局中，有 3 件事：

*   h1*   h2*   菜单现在对于 h，您使用了浏览器中不存在的字体，或者使用 @font-face 的计算机。Internet Explorer 不支持许多 CSS3 命令，例如 @font-face，导致您的菜单位于顶部。

## 解决方案：

使整个标题成为图像，然后放置菜单。

# IE9

我不知道，但很可能是一样的。并且不要忘记检查错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:58:28.753

修复了 IE9 中的导航菜单 Apply position:relative to your heightWrapper 和 Apply position:absolute to .topNavigationMenu（你已经设置了底部：0）。您还应该从 .topNavigationMenu 中删除 float:left。

As for the IE8 issues, neither header nor nav are HTML 4 elements, and IE 8 doesn't support HTML 5\. Try including modernizer ([http://modernizr.com/](http://modernizr.com/)) in the head section of the page, or another HTML5 shiv. That should allow you to style them in IE7/8.

# node.js - 从存储消息切换到节点和快递中的实时聊天

> ID：14795089
> 
> 赞同：0
> 
> 时间：2013-02-10T05:43:38.000
> 
> 标签：node.js, mongodb, express, socket.io, chat

我是服务器端开发的新手。我正在尝试通过这样做来学习，因此我正在服务器上构建一个使用 express 的应用程序，将 mongodb 作为我的数据库，并在客户端使用 twitter bootstrap 构建一个 angularjs。

我不知道这是否是最实用的方法，但是在考虑如何实现用户之间的消息传递时，我想到了一个名为 Conversation 的 mongodb 模型，其中包含一个 id 和一个对话中每个用户的 id 数组以及另一个对应的字符串数组到消息。然后将此模型添加到我的 REST API 中。

但是假设对话中的所有/部分用户都在线，为什么不从 socket.io 中受益。那么我怎样才能从这个切换到实时聊天呢？与 mongodb 的交互是否完全按照解释发生，socket.io 只是通知每个在线用户发生了交互？如果是，如何？或者是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:17:17.340

socket.io 可以将实时事件发送到连接的套接字，您可以使用数据库来存储无法传递的消息和离线用户。

此外，您可能希望为此使用 Redis 之类的东西，因为它具有具有订阅和发布功能的通道。

# php - 上传成功隐藏输入框

> ID：14795090
> 
> 赞同：0
> 
> 时间：2013-02-10T05:43:38.593
> 
> 标签：php

如果上传成功，我想隐藏输入字段。我试图通过如下方式隐藏它，`$sub =1;`但`if($sub==0)`只要按下提交而不是上传成功时，它就会隐藏输入。有任何想法吗？

```
 <?php

function uploadFile ($file_field = null, $check_image = false, $random_name = false) {

//Config Section    
//Set file upload path
$path = 'productpic/'; //with trailing slash
//Set max file size in bytes
$max_size = 2097152;
//Set default file extension whitelist
$whitelist_ext = array('jpg','png','gif');
//Set default file type whitelist
$whitelist_type = array('image/jpeg', 'image/png','image/gif');

//The Validation
// Create an array to hold any output
$out = array('error'=>null);

if (!$file_field) {
$out['error'][] = "Please specify a valid form field name";           
}

if (!$path) {
$out['error'][] = "Please specify a valid upload path";               
}

if (count($out['error'])>0) {
return $out;
}

//Make sure that there is a file
if((!empty($_FILES[$file_field])) && ($_FILES[$file_field]['error'] == 0)) {

// Get filename
$file_info = pathinfo($_FILES[$file_field]['name']);
$name = $file_info['filename'];
$ext = $file_info['extension'];

//Check file has the right extension           
if (!in_array($ext, $whitelist_ext)) {
  $out['error'][] = "Invalid file Extension";
}

//Check that the file is of the right type
if (!in_array($_FILES[$file_field]["type"], $whitelist_type)) {
  $out['error'][] = "Invalid file Type";
}

//Check that the file is not too big
if ($_FILES[$file_field]["size"] > $max_size) {
  $out['error'][] = "We are sorry, the image must be less than 2MB";
}

//If $check image is set as true
if ($check_image) {
  if (!getimagesize($_FILES[$file_field]['tmp_name'])) {
    $out['error'][] = "The file you trying to upload is not an Image, we only accept images";
  }
}

//Create full filename including path
if ($random_name) {

  // Generate random filename
  $tmp = str_replace(array('.',' '), array('',''), microtime());

  if (!$tmp || $tmp == '') {
    $out['error'][] = "File must have a name";
  }     
  $newname = $tmp.'.'.$ext;                                
} else {
    $newname = $name.'.'.$ext;
}

//Check if file already exists on server
if (file_exists($path.$newname)) {
  $out['error'][] = "The image you trying to upload already exists, please upload only once";
}

if (count($out['error'])>0) {
  //The file has not correctly validated
  return $out;
} 

if (move_uploaded_file($_FILES[$file_field]['tmp_name'], $path.$newname)) {
  //Success

  $out['filepath'] = $path;
  $out['filename'] = $newname;
  return $out;
} else {
  $out['error'][] = "Server Error!";
}

} else {
$out['error'][] = "Please select a photo";
return $out;
}      
}
?>

<?php

if (isset($_POST['submit'])) {
$sub=1;
$file = uploadFile('file', true, false);
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message .= '<p>'.$msg.'</p>';    
}
} else {
$message = "File uploaded successfully";
}
echo $message;
}
?>
<form action="" method="post" enctype="multipart/form-data" name="form1" id="form1">
<?php
ini_set( "display_errors", 0);
if($sub==0)
{
?>
<input name="file" type="file" size="20" />
<input name="submit" type="submit" value="Upload" />
<?php
}
?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:46:06.457

试试这个

```
if (is_array($file['error'])) {
$message = '';
foreach ($file['error'] as $msg) {
  $message .= '<p>'.$msg.'</p>';    
}
} else {
$message = "File uploaded successfully";
$sub=1; // keep here sub=1
} 
```

$sub=1 是在按下提交时执行的，因为它在`if (isset($_POST['submit']))`这意味着如果设置了提交。它应该在上传完成时给出。

# iphone - NSURL getFileSystemRepresentation:maxLength

> ID：14795092
> 
> 赞同：0
> 
> 时间：2013-02-10T05:44:24.550
> 
> 标签：iphone, ios, xml, ios4, xml-parsing

我对此代码有错误

```
 NSString *theURL = @"http://www.w3schools.com/xml/cd_catalog.xml";
        NSData *theData=[NSData dataWithContentsOfFile:[NSURL URLWithString:theURL]];
        NSDictionary *theDic=[XMLReader dictionaryForXMLData:theData error:nil]; 
```

错误是

```
 2013-02-10 00:39:05.113 MyXml[4139:c07] -[NSURL getFileSystemRepresentation:maxLength:]: unrecognized selector sent to instance 0x7139670
2013-02-10 00:39:05.115 MyXml[4139:c07] *** Terminating app due to uncaught exception 

    'NSInvalidArgumentException', reason: '-[NSURL getFileSystemRepresentation:maxLength:]: unrecognized selector sent to instance 0x7139670'
    *** First throw call stack:
    (0x1c96012 0x10d3e7e 0x1d214bd 0x1c85bbc 0x1c8594e 0xad3ee4 0xad3e92 0xad3de2 0xaf2336 0x2bb8 0x15157 0x15747 0x1694b 0x27cb5 0x28beb 0x1a698 0x1bf1df9 0x1bf1ad0 0x1c0bbf5 0x1c0b962 0x1c3cbb6 0x1c3bf44 0x1c3be1b 0x1617a 0x17ffc 0x295d 0x2885)
    libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:01:34.850

它给出了错误，因为您正在通过 的帮助使用文件初始化 NSData `dataWithContentsOfFile`，但实际上您正在向 NSData 提供 URL 以进行初始化。因此，您的代码间接调用文件方法 `getFileSystemRepresentation:maxLength:`，`NSURL`这就是它给出错误未知选择器的原因。

用这个`dataWithContentsOfURL`代替`dataWithContentsOfFile`

```
NSString *theURL = @"http://www.w3schools.com/xml/cd_catalog.xml";
        NSData *theData=[NSData dataWithContentsOfURL:[NSURL URLWithString:theURL]]; 
```

# java - 循环遍历字节数组中的十六进制数字

> ID：14795097
> 
> 赞同：0
> 
> 时间：2013-02-10T05:45:28.563
> 
> 标签：java, hex, bytearray, brute-force

嘿伙计们，我想知道我是否能得到一点帮助：我试图在字节数组中以十六进制计数。我正在做的是我有 8 个十六进制数字形式的纯文本和相同形式的密文以及密钥的前 4 个数字。我试图使用 DES 通过暴力破解密钥。

我的钥匙看起来像这样：

```
[A3 BB 12 44 __ __ __ __] 
```

我希望它像这样开始，我想：

```
[A3 BB 12 44 00 00 00 00] 
```

然后

```
[A3 BB 12 44 00 00 00 01] 
```

等等。我只是真的不知道如何以十六进制计数。在那个字节数组里面！

任何帮助深表感谢！

**帮助后编辑**

这是找到关键（我更改了一些东西的名称以更好地适应我的程序）

```
public static void findKey(){

    byte [] keyBytes = null;
    byte [] pt;
    byte [] ct;

    codeBreaker KEY = new codeBreaker(new byte[]{(byte)0x01, (byte)0x23, (byte)0x45, (byte)0x67, (byte)0x00, (byte)0x00, (byte)0x00, (byte)0x00}, 2 );

    String plaintext = "Plaintxt";
    ct = new byte [] {(byte)0x4A, (byte)0xC4, (byte)0x55, (byte)0x3D, (byte)0xB3, (byte)0x37, (byte)0xCA, (byte)0xB3};

    //convert the plain text "Plaintxt" into a hex byte array
    String ptHex = asciiToHex(plaintext);
    pt = getBytes(ptHex);

    //keyBytes = KEY.inc()

    //my attempt
    /*while(!isKey(pt,keyBytes,ct)){
        KEY.inc(); // something like increase the key by 1 and send t back in.
    }
    */

    //this is your original while loop
    /*while (KEY.inc()) {
        byte[] bytes = KEY.getBytes();
        for (byte b: bytes) {
            System.out.printf("%02X ", b);
        }
        System.out.println();
    }
    */

    //Final outputs for the findKey method
    System.out.println("        Plain Text In Hex Is:");        
    printByteArray(pt);
    System.out.println();
    System.out.println("         The Cipher Text Is:");
    printByteArray(ct);
    System.out.println();

} 
```

这是你想出的东西

```
 public codeBreaker(byte[] keyAr, int startIndex) {
    this.key = keyAr;
    this.startIndex = startIndex;
}

   public boolean inc() {
   int i;
   for (i = key.length-1; i >= startIndex; i--) {
       key[i]++;
       if (key[i] != 0)
           break;
   }
        // we return false when all bytes are 0 again
   return (i >= startIndex || key[startIndex] != 0);
}

public byte[] getBytes() {
    return key;
} 
```

我都把它放在一个类中，并用我拥有的其他方法将其称为 codeBreaker（但其他那些与这个特定部分没有任何关系）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:01:25.850

这个如何？

```
public class ByteIncrement
{
    private final byte[] bytes;
    private final int startIndex;
    public ByteIncrement(byte[] bytes, int startIndex) {
        this.bytes = bytes;
        this.startIndex = startIndex;
    }
    public boolean inc() {
        int i;
        for (i = bytes.length-1; i >= startIndex; i--) {
            bytes[i]++;
            if (bytes[i] != 0)
                break;
        }
        // we return false when all bytes are 0 again
        return (i >= startIndex || bytes[startIndex] != 0);
    }
    public byte[] getBytes() {
        return bytes;
    }

    public static void main(String[] args) {
        ByteIncrement bi = new ByteIncrement(new byte[]{(byte)0xa4, 0x56, 0x17, (byte)0x9f, 0x00, 0x00, 0x00, 0x00}, 2 ); // first two bytes are constant -> 2
        while (bi.inc()) {
            byte[] bytes = bi.getBytes();
            for (byte b: bytes) {
                System.out.printf("%02X ", b);
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:46:09.963

```
public static void tryCipher (
    byte b1, byte b2, byte b3, byte b4,
    byte b5, byte b6, byte b7, byte b8)
{
    // Try the variant, convert to HEX if necessary
}

public static void bruteForce (byte b1, byte b2, byte b3, byte b4)
{
    for (int b5 = Byte.MIN_VALUE; b5 <= Byte.MAX_VALUE, b5++)
        for (int b6 = Byte.MIN_VALUE; b6 <= Byte.MAX_VALUE, b6++)
            for (int b7 = Byte.MIN_VALUE; b7 <= Byte.MAX_VALUE, b7++)
                for (int b8 = Byte.MIN_VALUE; b8 <= Byte.MAX_VALUE, b8++)
                    tryCipher (b1, b2, b3, b4, (byte)b5, (byte)b6, (byte)b7, (byte)b8);
} 
```

# javascript - 纯 javascript 检查是否有悬停（不设置鼠标悬停/移出）

> ID：14795099
> 
> 赞同：68
> 
> 时间：2013-02-10T05:45:40.917
> 
> 标签：javascript, jquery, hover

我见过这个 jQuery 语法：

```
if($(element).is(':hover')) { do something} 
```

由于我没有使用 jQuery，我正在寻找在纯 JavaScript 中执行此操作的最佳方法。

我知道我可以保留一个全局变量并使用 and 设置/取消设置它`mouseover`，`mouseout`但我想知道是否有某种方法可以通过 DOM 检查元素的本机属性？也许是这样的：

```
if(element.style.className.hovered === true) {do something} 
```

此外，它必须是跨浏览器兼容的。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2017-10-27T10:00:45.900

简单地使用`element.matches(':hover')`似乎对我来说效果很好，您也可以为旧版浏览器使用全面的 polyfill：[https ://developer.mozilla.org/en-US/docs/Web/API/Element/matches](https://developer.mozilla.org/en-US/docs/Web/API/Element/matches)

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2013-02-10T17:11:41.760

您可以将[querySelector](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelector) **用于 IE>=8**：

```
const isHover = e => e.parentElement.querySelector(':hover') === e;    

const myDiv = document.getElementById('mydiv');
document.addEventListener('mousemove', function checkHover() {
  const hovered = isHover(myDiv);
  if (hovered !== checkHover.hovered) {
    console.log(hovered ? 'hovered' : 'not hovered');
    checkHover.hovered = hovered;
  }
});
```

```
.whyToCheckMe {position: absolute;left: 100px;top: 50px;}
```

```
<div id="mydiv">HoverMe
  <div class="whyToCheckMe">Do I need to be checked too?</div>
</div>
```

回退我认为可以@Kolink回答。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-10T06:19:15.193

首先，您需要跟踪悬停在哪些元素上。这是一种方法：

```
(function() {
    var matchfunc = null, prefixes = ["","ms","moz","webkit","o"], i, m;
    for(i=0; i<prefixes.length; i++) {
        m = prefixes[i]+(prefixes[i] ? "Matches" : "matches");
        if( document.documentElement[m]) {matchfunc = m; break;}
        m += "Selector";
        if( document.documentElement[m]) {matchfunc = m; break;}
    }
    if( matchfunc) window.isHover = function(elem) {return elem[matchfunc](":hover");};
    else {
        window.onmouseover = function(e) {
            e = e || window.event;
            var t = e.srcElement || e.target;
            while(t) {
                t.hovering = true;
                t = t.parentNode;
            }
        };
        window.onmouseout = function(e) {
            e = e || window.event;
            var t = e.srcElement || e.target;
            while(t) {
                t.hovering = false;
                t = t.parentNode;
            }
        };
        window.isHover = function(elem) {return elem.hovering;};
   }
})(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-10T13:08:05.020

我突然想到，检查元素是否悬停的一种方法是在 css 中设置一个未使用的属性`:hover`，然后检查该属性是否存在于 javascript 中。它不是问题的正确解决方案，因为它没有使用本地悬停属性，但它是我能想到的最接近和最小的解决方案。

```
<html>
    <head>
        <style type="text/css">
#hover_el
{   
    border: 0px solid blue;
    height: 100px;
    width: 100px;
    background-color: blue;
}   
#hover_el:hover
{   
    border: 0px dashed blue;
}
        </style>
        <script type='text/javascript'>
window.onload = function() {check_for_hover()};
function check_for_hover() {
    var hover_element = document.getElementById('hover_el');
    var hover_status = (getStyle(hover_element, 'border-style') === 'dashed') ? true : false;
    document.getElementById('display').innerHTML = 'you are' + (hover_status ? '' : ' not') + ' hovering';
    setTimeout(check_for_hover, 1000);
};
function getStyle(oElm, strCssRule) {
    var strValue = "";
    if(document.defaultView && document.defaultView.getComputedStyle) {
        strValue = document.defaultView.getComputedStyle(oElm, "").getPropertyValue(strCssRule);
    }
    else if(oElm.currentStyle) {
        strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1) {
            return p1.toUpperCase();
        });
        strValue = oElm.currentStyle[strCssRule];
    }
    return strValue;
};
        </script>
    </head>
    <body>
        <div id='hover_el'>hover here</div>
        <div id='display'></div>
    </body>
</html> 
```

（功能`getStyle`感谢[JavaScript get Styles](https://stackoverflow.com/questions/4172871/javascript-get-styles)）

如果有人能想到一个更好的 CSS 属性来用作标志，`solid/dashed`请告诉我。该财产最好是很少使用且不能继承的财产。

# matlab - matlab中的梯度直方图

> ID：14795107
> 
> 赞同：3
> 
> 时间：2013-02-10T05:46:40.823
> 
> 标签：matlab, image-processing, histogram

我试图弄清楚如何创建一个直方图数组来比较matlab中图像的梯度向量的大小和方向。我将使用 sobel 掩码来查找渐变，到目前为止，我有：

```
sobel_x = [-1 -2 -1;0  0  0;1  2  1];
sobel_y = [-1  0  1;-2  0  2;-1  0  1];

gx = filter2(sobel_x,im,'same');
gy = filter2(sobel_y,im,'same'); 
```

现在我需要弄清楚如何创建直方图以将其与其他图像进行比较。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T05:51:14.127

您可以将计算出的*gx*和*gy*矩阵视为长向量，然后将它们分组为大小为 2 x 的梯度向量（# number of elements in *gx* or *gy*）

```
% create the gradient vectors
    grad_vector(1,:) = gx(:);
    grad_vector(2,:) = gy(:); 
```

那么你可以通过多种方式找到每个梯度向量的大小和方向，例如：

```
%find magnitude and direction of each gradient vector
    for i=1:size(grad_vector,2);
       magn(i) = norm(grad_vector(:,i));
       dir(i) = atand(grad_vector(2,i)/grad_vector(1,i));
    end 
```

然后可以通过决定如何将结果划分为多个 bin 来创建直方图。例如，您可以选择将方向划分为 4 个 bin，将幅度划分为 3，则：

```
% find histograms, dividing into appropriate bins
    histdir = hist(dir,4);
    histmag = hist(magn,3); 
```

# javascript - 从数组中获取随机条目，将其打印并使用拼接删除以避免重复

> ID：14795108
> 
> 赞同：1
> 
> 时间：2013-02-10T05:46:52.223
> 
> 标签：javascript, random, splice

我有以下功能可以为测验生成国家名称。我想从数组中生成一个随机名称并将其显示在屏幕上，然后将其删除，这样我就没有重复的问题。有人建议按照我以前从未使用过的代码上显示的方式使用拼接，所以我不知道为什么它不能正常工作。你能帮我找出问题所在吗？谢谢！这是代码：

```
<div>
 <div style="float:left">
<h1> <span id="questionnum"></span>. Can you locate <span id="countryquestion"></span> on the map?</h1>
</div>

<script type="text/javascript">
generateCountry();

function generateCountry(){

filenames = [ "Albania", "Andorra", "Armenia", "Austria", "Azerbaijan", "Belarus", "Belgium", "Bosnia and Herzegovina", "Bulgaria", "Croatia", "Cyprus", "Czech Republic", "Denmark", "Estonia", "Finland", "France", "Georgia", "Germany", "Greece", "Hungary", "Iceland", "Ireland", "Italy", "Latvia", "Liechtenstein", "Lithuania", "Luxembourg", "FYROM", "Malta", "Moldova", "Monaco", "Montenegro", "The Netherlands", "Norway", "Poland", "Portugal", "Romania", "Russia", "San Marino", "Serbia", "Slovakia", "Slovenia", "Spain", "Sweden", "Switzerland", "Ukraine", "United Kingdom" ];

filename = filenames.splice(Math.floor(Math.random()*filenames.length), 1);

document.getElementById('countryquestion').textContent = filename[0];

}

</script> 
```

* * *

为路易斯编辑

你是对的..我刚刚用 getelementById 替换了 document.write，如下所示，我遇到了某种冲突。

```
document.getElementById('countryquestion').textContent = filename; 
```

我使用这个函数和另一个函数来检查用户是否在地图上点击了正确的国家。通过添加您的代码，第一个国家名称出现，当我点击地图时，什么也没有发生。我没有得到任何回应，并且国家名称保持不变，因为该函数可能不会再次被调用。这是从 googlemaps 获取国家名称的功能。唯一应该发生的事情应该是将文件名（您的 randElement）与谷歌地图中的国家/地区进行比较，然后调用 generateCountry() 答案是否正确，但现在没有发生这种情况..为什么？

```
 function getCountry(latLng) {
              geocoder.geocode( {'latLng': latLng},
                function(results, status) {
                  if(status == google.maps.GeocoderStatus.OK) {
                    if(results[0]) {
                      for(var i = 0; i < results[0].address_components.length; i++) {
                        if(results[0].address_components[i].types[0] == "country") {
                          if(results[0].address_components[i].long_name == **filename**) {

                                right();
                                generateCountry();
                                numQuestions();
                                updateScore();
                                countRights();
                                showProgress();

                           } else {

                            wrong();
                             updateLives();
                              generateCountry();
                                numQuestions();
                                 showProgress();

                           }
                        }
                      }
                    }

                    else {
                      alert("No results");
                    }
                  }
                  else {

                 water(); 
                  }
                }
              );
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:40:02.753

见：http: [//jsfiddle.net/bXVr9/](http://jsfiddle.net/bXVr9/)

```
var filenames = [ "Albania", "Andorra", "Armenia", "Austria"];

// Get a random index
var index = Math.floor(Math.random() * filenames.length);

// This holds your random name
var randElement = filenames[index];

// Remove it
filenames.splice(index, 1);

document.write("Country: " + randElement + "<br />");
document.write("Remaining: " + filenames + "<br />"); 
```

# ios - 无法在 ios 设备中写入大文件（> 200MB，在我的情况下为 700MB）？

> ID：14795110
> 
> 赞同：0
> 
> 时间：2013-02-10T05:47:14.800
> 
> 标签：ios, objective-c, ios5

我在 iOS 设备 (iPad) 中写入大文件 (>200 MB) 时遇到问题，但在模拟器中它运行良好。
我正在使用`NSFileManager`创建文件和`NSFileData`写入文件。我认为我的代码没有问题，因为它在模拟器中运行良好。有没有人有同样的问题？

详细说明我的情况：

我在我的设备中保存了大量文件（每个 3MB），效果很好。这意味着对于 300 MB 的文件，我有 100 个块。现在，我想从 100 个块中创建实际文件。所以我`NSFileManager`在第一次迭代中使用创建文件，然后使用`NSFileData`在文件末尾写入 3MB 数据。在运行程序时，它在 61 个块后崩溃。我猜 iPad 中可能存在一些与内存相关的问题。

我正在以`fileDir`data-0、data-1、data-2 格式保存文件块...我正在对数据应用解密操作，但为简单起见，我删除了该部分。

```
// List of chunk files        
NSArray *filelist= [[NSFileManager defaultManager] contentsOfDirectoryAtPath:fileDir error:err];
for(int i = 0; i < [filelist count]; i++) {
                // Read the chunk of file
                fileName = [[NSString alloc] initWithFormat:@"data-%d", i];
                filePath = [fileDir stringByAppendingPathComponent:fileName];
                fileReadHandle = [NSFileHandle fileHandleForReadingAtPath:filePath];

                // Write in tempFile
                if(offset == 0){
                    if([[NSFileManager defaultManager] createFileAtPath:tempFile contents:data attributes:nil]){
                        fileWriteHandle = [NSFileHandle fileHandleForWritingAtPath:tempFile];
                        NSLog(@"File was created!");
                    } else {
                        NSLog(@"File was not created.");
                    }
                } else {
                   [fileWriteHandle seekToEndOfFile];  // Tried with comment out this line but same problem
// Write the decrypted data from chunk
            [fileWriteHandle writeData:[[fileReadHandle readDataToEndOfFile] decryptedAES256DataUsingKey:AESEncryptionKey error:err]];
                    }
                } 
```

**编辑（11.02.2013）** 我尝试使用我以前的代码，其中我省略了数据解密部分。有趣的是，问题出在解密部分，我猜是因为没有解密它可以正常工作。我已经添加了解密代码。对于解密，我使用的是 NSData+CommonCrypto 库（它不是 ARC），但我的项目在 ARC 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T22:45:01.980

这可能是一个操作系统问题，因为 NSFileHandle 永远不会为每个块关闭。我建议关闭它。

此外，您似乎在 for 循环范围之外声明了变量。除非您需要在循环之外使用这些变量，否则通常最好将变量的范围保持在尽可能小的范围内，尤其是当您使用 ARC 并试图考虑何时释放内存时。

如果您认为 NSFileHandle 在内存中保存数据，请尝试`-synchronizeFile`在写入每个块后使用该方法，以确保内存中的更改反映到磁盘。

另外，我将您正在写入的文件的创建移到了循环之外，因为它对我来说更容易理解。

试试这个调整：

```
// List of chunk files        
NSArray *filelist= [[NSFileManager defaultManager] contentsOfDirectoryAtPath:fileDir error:err];

if([[NSFileManager defaultManager] createFileAtPath:tempFile contents:[NSData data] attributes:nil]){
    NSLog(@"File was created!");
} else {
    NSLog(@"File was not created.");
}

NSFileHandle *fileWriteHandle = [NSFileHandle fileHandleForWritingAtPath:tempFile];

for(int i = 0; i < [filelist count]; i++) {
    // Read the chunk of file
    NSString *fileName = [NSString stringWithFormat:@"data-%d", i];
    NSString *filePath = [fileDir stringByAppendingPathComponent:fileName];

    NSFileHandle *fileReadHandle = [NSFileHandle fileHandleForReadingAtPath:filePath];
    NSData *data = [fileReadHandle readDataToEndOfFile];

    // No longer using the file
    [fileReadHandle closeFile];

    // Write in tempFile
    [fileWriteHandle writeData:data];
    [fileWriteHandle synchronizeFile];// Flush any data in memory to disk
}

[fileWriteHandle closeFile]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T10:24:40.473

修改以下代码就像魔术一样，

```
@autoreleasepool { 
[fileWriteHandle writeData:[[fileReadHandle readDataToEndOfFile] decryptedAES256DataUsingKey:AESEncryptionKey error:err]]; 
} 
```

# java - 匈牙利算法：如何用最少的行覆盖 0 个元素？

> ID：14795111
> 
> 赞同：14
> 
> 时间：2013-02-10T05:47:31.950
> 
> 标签：java, algorithm, logic, hungarian-algorithm

我正在尝试用 Java 实现匈牙利算法。我有一个 NxN 成本矩阵。我正在逐步遵循[本指南。](http://www.wikihow.com/Use-the-Hungarian-Algorithm)所以我有 costMatrix[N][N] 和 2 个数组来跟踪覆盖的行和覆盖的列 - rowCover[N], rowColumn[N] （1 表示已覆盖，0 表示未覆盖）

如何用最少的行数覆盖 0？谁能指出我正确的方向？

任何帮助/建议将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T06:38:46.863

[检查维基百科文章](http://en.wikipedia.org/wiki/Hungarian_algorithm#Matrix_interpretation)*中算法的第三步（[*矩阵解释*](http://en.wikipedia.org/wiki/Hungarian_algorithm#Matrix_interpretation)[部分）](http://en.wikipedia.org/wiki/Hungarian_algorithm#Matrix_interpretation)，他们解释了一种计算最小行数以覆盖所有 0 的方法*

 ***更新：**以下是另一种获取覆盖的最小行数的方法`0's`：

```
import java.util.ArrayList;
import java.util.List;

public class MinLines { 
    enum LineType { NONE, HORIZONTAL, VERTICAL }

    private static class Line {
        int lineIndex;
        LineType rowType;
        Line(int lineIndex, LineType rowType) { 
            this.lineIndex = lineIndex;
            this.rowType = rowType;
        }      
        LineType getLineType() {
            return rowType;
        }

        int getLineIndex() { 
            return lineIndex; 
        }
        boolean isHorizontal() {
            return rowType == LineType.HORIZONTAL;
        }
    }

    private static boolean isZero(int[] array) {
        for (int e : array) {
            if (e != 0) {
                return false;
            }
        }
        return true;
    }

    public static List<Line> getMinLines(int[][] matrix) {
        if (matrix.length != matrix[0].length) {
            throw new IllegalArgumentException("Matrix should be square!");
        }

        final int SIZE = matrix.length;
        int[] zerosPerRow = new int[SIZE];
        int[] zerosPerCol = new int[SIZE];

        // Count the number of 0's per row and the number of 0's per column        
        for (int i = 0; i < SIZE; i++) { 
            for (int j = 0; j < SIZE; j++) { 
                if (matrix[i][j] == 0) { 
                    zerosPerRow[i]++;
                    zerosPerCol[j]++;
                }
            }
        }

        // There should be at must SIZE lines, 
        // initialize the list with an initial capacity of SIZE
        List<Line> lines = new ArrayList<Line>(SIZE);

        LineType lastInsertedLineType = LineType.NONE;

        // While there are 0's to count in either rows or colums...
        while (!isZero(zerosPerRow) && !isZero(zerosPerCol)) { 
            // Search the largest count of 0's in both arrays
            int max = -1;
            Line lineWithMostZeros = null;
            for (int i = 0; i < SIZE; i++) {
                // If exists another count of 0's equal to "max" but in this one has
                // the same direction as the last added line, then replace it with this
                // 
                // The heuristic "fixes" the problem reported by @JustinWyss-Gallifent and @hkrish
                if (zerosPerRow[i] > max || (zerosPerRow[i] == max && lastInsertedLineType == LineType.HORIZONTAL)) {
                    lineWithMostZeros = new Line(i, LineType.HORIZONTAL);
                    max = zerosPerRow[i];
                }
            }

            for (int i = 0; i < SIZE; i++) {
                // Same as above
                if (zerosPerCol[i] > max || (zerosPerCol[i] == max && lastInsertedLineType == LineType.VERTICAL)) {
                    lineWithMostZeros = new Line(i, LineType.VERTICAL);
                    max = zerosPerCol[i];
                }
            }

            // Delete the 0 count from the line 
            if (lineWithMostZeros.isHorizontal()) {
                zerosPerRow[lineWithMostZeros.getLineIndex()] = 0; 
            } else {
                zerosPerCol[lineWithMostZeros.getLineIndex()] = 0;
            }

            // Once you've found the line (either horizontal or vertical) with the greater 0's count
            // iterate over it's elements and substract the 0's from the other lines 
            // Example:
            //                          0's x col:
            //           [ 0  1  2  3 ]  ->  1
            //           [ 0  2  0  1 ]  ->  2
            //           [ 0  4  3  5 ]  ->  1
            //           [ 0  0  0  7 ]  ->  3
            //             |  |  |  | 
            //             v  v  v  v
            // 0's x row: {4} 1  2  0 

            //           [ X  1  2  3 ]  ->  0
            //           [ X  2  0  1 ]  ->  1
            //           [ X  4  3  5 ]  ->  0
            //           [ X  0  0  7 ]  ->  2
            //             |  |  |  | 
            //             v  v  v  v
            //            {0} 1  2  0 

            int index = lineWithMostZeros.getLineIndex(); 
            if (lineWithMostZeros.isHorizontal()) {
                for (int j = 0; j < SIZE; j++) {
                    if (matrix[index][j] == 0) {
                        zerosPerCol[j]--;
                    }
                }
            } else {
                for (int j = 0; j < SIZE; j++) {
                    if (matrix[j][index] == 0) {
                        zerosPerRow[j]--;
                    }
                }                    
            }

            // Add the line to the list of lines
            lines.add(lineWithMostZeros); 
            lastInsertedLineType = lineWithMostZeros.getLineType();
        }
        return lines;
    }

    public static void main(String... args) { 
        int[][] example1 = 
        { 
           {0, 1, 0, 0, 5},
           {1, 0, 3, 4, 5},
           {7, 0, 0, 4, 5},
           {9, 0, 3, 4, 5},
           {3, 0, 3, 4, 5} 
        };

        int[][] example2 = 
        {
           {0, 0, 1, 0},
           {0, 1, 1, 0},
           {1, 1, 0, 0},
           {1, 0, 0, 0},
        };

        int[][] example3 = 
        {
           {0, 0, 0, 0, 0, 0},
           {0, 0, 0, 1, 0, 0},
           {0, 0, 1, 1, 0, 0},
           {0, 1, 1, 0, 0, 0},
           {0, 1, 0, 0, 0, 0},
           {0, 0, 0, 0, 0, 0}
        };

        List<int[][]> examples = new ArrayList<int[][]>();
        examples.add(example1);
        examples.add(example2);
        examples.add(example3);

        for (int[][] example : examples) {
            List<Line> minLines = getMinLines(example);
            System.out.printf("Min num of lines for example matrix is: %d\n", minLines.size());
            printResult(example, minLines);
            System.out.println();
        }
    }

    private static void printResult(int[][] matrix, List<Line> lines) {
        if (matrix.length != matrix[0].length) {
            throw new IllegalArgumentException("Matrix should be square!");
        }

        final int SIZE = matrix.length;
        System.out.println("Before:");
        for (int i = 0; i < SIZE; i++) {
            for (int j = 0; j < SIZE; j++) {
                System.out.printf("%d ", matrix[i][j]);
            }
            System.out.println();
        }

        for (Line line : lines) {
            for (int i = 0; i < SIZE; i++) {
                int index = line.getLineIndex();
                if (line.isHorizontal()) {
                    matrix[index][i] = matrix[index][i] < 0 ? -3 : -1;
                } else {
                    matrix[i][index] = matrix[i][index] < 0 ? -3 : -2;
                }
            }
        }   

        System.out.println("\nAfter:");
        for (int i = 0; i < SIZE; i++) {
            for (int j = 0; j < SIZE; j++) {
                System.out.printf("%s ", matrix[i][j] == -1 ? "-" : (matrix[i][j] == -2 ? "|" : (matrix[i][j] == -3 ? "+" : Integer.toString(matrix[i][j]))));
            }
            System.out.println();
        }   
    }
} 
```

重要的部分是`getMinLines`方法，它返回一个`List`包含矩阵`0's`条目的行。对于示例矩阵打印：

```
Min num of lines for example matrix is: 3
Before:
0 1 0 0 5 
1 0 3 4 5 
7 0 0 4 5 
9 0 3 4 5 
3 0 3 4 5 

After:
- + - - - 
1 | 3 4 5 
- + - - - 
9 | 3 4 5 
3 | 3 4 5 

Min num of lines for example matrix is: 4
Before:
0 0 1 0 
0 1 1 0 
1 1 0 0 
1 0 0 0 

After:
| | | | 
| | | | 
| | | | 
| | | | 

Min num of lines for example matrix is: 6
Before:
0 0 0 0 0 0 
0 0 0 1 0 0 
0 0 1 1 0 0 
0 1 1 0 0 0 
0 1 0 0 0 0 
0 0 0 0 0 0 

After:
- - - - - - 
- - - - - - 
- - - - - - 
- - - - - - 
- - - - - - 
- - - - - - 
```

我希望这能给你一个推动，匈牙利算法的其余部分应该不难实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-05T00:07:25.650

我知道这个问题很久以前就已经解决了，但是我想分享我对第 3 步的实现，其中应该以覆盖所有零的方式绘制最小线。

以下是关于我的算法在此步骤中的工作原理的简要说明：

*   在所有单元格上循环，值为零的单元格，我们需要画一条经过它的线，以及它的邻居
*   为了知道应该在哪个方向绘制线，我创建了一个名为 maxVH() 的方法，它将垂直和水平计算零，并返回一个整数。如果整数是正数，画一条垂直线，否则如果为零或负数，画一条水平线。
*   colorNeighbors() 方法将绘制线条并计算它们。此外，它会将 1 放在直线垂直通过的元素上。-1 在线条水平通过的元素上。2 在 2 条相交线通过的元素上（水平和垂直）。

使用这 3 种方法的优点是我们知道两次覆盖的元素，我们知道哪些元素被覆盖，哪些没有被覆盖。此外，在绘制线条时，我们会增加线条计数器的数量。

匈牙利算法的完整实现+示例：[**Github**](https://github.com/amirbawab/Hungarian-Algorithm)

**第 3 步的代码 + 详细注释**：

```
/**
     * Step 3.1
     * Loop through all elements, and run colorNeighbors when the element visited is equal to zero
     * */
    public void coverZeros(){
        numLines = 0;
        lines = new int[values.length][values.length];

        for(int row=0; row<values.length;row++){
            for(int col=0; col<values.length;col++){
                if(values[row][col] == 0)
                    colorNeighbors(row, col, maxVH(row, col));
            }
        }
    }

    /**
     * Step 3.2
     * Checks which direction (vertical,horizontal) contains more zeros, every time a zero is found vertically, we increment the result
     * and every time a zero is found horizontally, we decrement the result. At the end, result will be negative, zero or positive
     * @param row Row index for the target cell
     * @param col Column index for the target cell
     * @return Positive integer means that the line passing by indexes [row][col] should be vertical, Zero or Negative means that the line passing by indexes [row][col] should be horizontal
     * */
    private int maxVH(int row, int col){
        int result = 0;
        for(int i=0; i<values.length;i++){
            if(values[i][col] == 0)
                result++;
            if(values[row][i] == 0)
                result--;
        }
        return result;
    }

    /**
     * Step 3.3
     * Color the neighbors of the cell at index [row][col]. To know which direction to draw the lines, we pass maxVH value.
     * @param row Row index for the target cell
     * @param col Column index for the target cell
     * @param maxVH Value return by the maxVH method, positive means the line to draw passing by indexes [row][col] is vertical, negative or zero means the line to draw passing by indexes [row][col] is horizontal
     * */
    private void colorNeighbors(int row, int col, int maxVH){
        if(lines[row][col] == 2) // if cell is colored twice before (intersection cell), don't color it again
            return;

        if(maxVH > 0 && lines[row][col] == 1) // if cell colored vertically and needs to be recolored vertically, don't color it again (Allowing this step, will color the same line (result won't change), but the num of line will be incremented (wrong value for the num of line drawn))
            return;

        if(maxVH <= 0 && lines[row][col] == -1) // if cell colored horizontally and needs to be recolored horizontally, don't color it again (Allowing this step, will color the same line (result won't change), but the num of line will be incremented (wrong value for the num of line drawn))
            return;

        for(int i=0; i<values.length;i++){ // Loop on cell at indexes [row][col] and its neighbors
            if(maxVH > 0)   // if value of maxVH is positive, color vertically
                lines[i][col] = lines[i][col] == -1 || lines[i][col] == 2 ? 2 : 1; // if cell was colored before as horizontal (-1), and now needs to be colored vertical (1), so this cell is an intersection (2). Else if this value was not colored before, color it vertically
            else            // if value of maxVH is zero or negative color horizontally
                lines[row][i] = lines[row][i] == 1 || lines[row][i] == 2 ? 2 : -1; // if cell was colored before as vertical (1), and now needs to be colored horizontal (-1), so this cell is an intersection (2). Else if this value was not colored before, color it horizontally
        }

        // increment line number
        numLines++;
//      printMatrix(lines); // Monitor the line draw steps
    }//End step 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T01:48:40.277

这是对@higuaro 答案的改进，但在 Swift 中（适用于 `[[0,94,2,91,57,0,115,2,99],[113,19,7,32,42,13,0,35,16],[109,11,31,56,38,29,16,31,0],[81,51,39,0,10,37,24,67,40],[94,0,34,59,23,42,27,30,11],[71,37,39,0,0,47,32,71,48],[71,41,43,4,0,43,28,71,44],[80,110,0,153,137,0,113,0,97],[0,94,0,89,57,8,121,0,105]]` ）：

```
func modifiedGetMinLines(_ matrix: [[Int]]) -> Set<Line> { // O(N^4)

    // Using the algorithm found here - https://www.youtube.com/watch?v=rrfFTdO2Z7I
    func drawLinesWhileIsolatedZerosExist(_ matrix: inout [[Int]]) -> Set<Line> { // O(N^3)

        let N = matrix.count

        var lines: Set<Line> = []
        var unprocessedTableChange = true
        while unprocessedTableChange { // While loop occurs 2N-1 times max!...each time a line in a matrix must be crossed out to continue
            unprocessedTableChange = false

            for i in 0..<N { // rows
                var zeroCount = 0
                var columnOfLastZero = -1
                for j in 0..<N {
                    if matrix[i][j] == 0 {
                        zeroCount += 1
                        columnOfLastZero = j
                    }
                }

                if zeroCount == 1 {
                    unprocessedTableChange = true

                    var selectedCol = Line(columnOfLastZero, .VERTICAL)
                    for i in 0..<N {
                        if matrix[i][columnOfLastZero] == 0 {
                            selectedCol.coord.insert(i)
                        }
                        matrix[i][columnOfLastZero] = -1 // Cross line out
                    }
                    lines.insert(selectedCol)
                }
            }

            for i in 0..<N { // columns
                var zeroCount = 0
                var rowOfLastZero = -1
                for j in 0..<N {
                    if matrix[j][i] == 0 {
                        zeroCount += 1
                        rowOfLastZero = j
                    }
                }

                if zeroCount == 1 {
                    unprocessedTableChange = true

                    var selectedRow = Line(rowOfLastZero, .HORIZONTAL)
                    for i in 0..<N {
                        if matrix[rowOfLastZero][i] == 0 {
                            selectedRow.coord.insert(i)
                        }
                        matrix[rowOfLastZero][i] = -1 // Cross line out
                    }
                    lines.insert(selectedRow)
                }
            }
        }

        return lines
    }

    func zerosToProcessExist(_ array: [Int]) -> Bool { // O(N)
        for e in array {
            if e > 0 { return true }
        }
        return false
    }

    var matrix = matrix
    let N = matrix.count
    var lines: Set<Line> = drawLinesWhileIsolatedZerosExist(&matrix) // O(N^3)
    var zerosPerRow = Array(repeating: 0, count: N)
    var zerosPerCol = Array(repeating: 0, count: N)

    for i in 0..<N { // O(N^2)
        for j in 0..<N {
            if matrix[i][j] == 0 {
                zerosPerRow[i] += 1
                zerosPerCol[j] += 1
            }
        }
    }

    while zerosToProcessExist(zerosPerRow) || zerosToProcessExist(zerosPerCol) { // While loop occurs 2N-1 times max!...each time a line in a matrix must be crossed out to continue

        var max = 0
        var lineWithMostZeros: Line?

        var linesWithMaxZeros: Set<Line> = []
        for i in 0..<N { // O(N)
            if zerosPerRow[i] > max {
                linesWithMaxZeros = []
                linesWithMaxZeros.insert(Line(i, LineType.HORIZONTAL))
                max = zerosPerRow[i]
            } else if zerosPerRow[i] == max && max > 0 {
                linesWithMaxZeros.insert(Line(i, LineType.HORIZONTAL))
            }

            if zerosPerCol[i] > max {
                linesWithMaxZeros = []
                linesWithMaxZeros.insert(Line(i, LineType.VERTICAL))
                max = zerosPerCol[i]
            } else if zerosPerCol[i] == max && max > 0 {
                linesWithMaxZeros.insert(Line(i, LineType.VERTICAL))
            }
        }

        if linesWithMaxZeros.count == 1 {
            lineWithMostZeros = linesWithMaxZeros.first
        } else {
            var minScore = Int.max
            var minScoreLine: Line?
            for l in linesWithMaxZeros {
                var score = 0
                if l.isHorizontal() {
                    for j in 0..<N {
                        if matrix[l.lineIndex][j] == 0 {
                            for k in 0..<N {
                                if matrix[k][j] == 0 { score += 1 }
                            }
                        }
                    }
                } else {
                    for j in 0..<N {
                        if matrix[j][l.lineIndex] == 0 {
                            for k in 0..<N {
                                if matrix[j][k] == 0 { score += 1 }
                            }
                        }
                    }
                }
                if score < minScore {
                    minScore = score
                    minScoreLine = l
                }
            }
            lineWithMostZeros = minScoreLine
        }

        let index = lineWithMostZeros!.lineIndex
        var temp: Set<Int> = []
        if lineWithMostZeros!.isHorizontal() { // O(N)
            zerosPerRow[index] = 0
            for j in 0..<N {
                if matrix[index][j] == 0 {
                    zerosPerCol[j] -= 1
                    temp.insert(j)
                }
                matrix[index][j] = -1
            }
        } else {
            zerosPerCol[index] = 0
            for j in 0..<N {
                if matrix[j][index] == 0 {
                    zerosPerRow[j] -= 1
                    temp.insert(j)
                }
                matrix[j][index] = -1
            }
        }
        lineWithMostZeros!.coord = temp
        lines.insert(lineWithMostZeros!)
    }
    return lines
} 
```*

# jquery - HTML5中文本框的选择器？

> ID：14795112
> 
> 赞同：5
> 
> 时间：2013-02-10T05:47:58.097
> 
> 标签：jquery, html, css, css-selectors

很多时候，您可以在样式表或 jQuery 中使用文本框的“input[type=text]”选择器。现在有了 HTML5 中所有新的文本框变体，除了像这样列出它们之外，您如何处理文本框？：

> 输入[type=text], input[type=color], input[type=datetime], input[type=email], input[type=number], input[type=search], input[type=tel], input [类型=网址]，...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:23:19.823

据我所知，没有选择这些输入的选择器，您可以定义一个自定义选择器。

```
var types = ['button', 'submit', 'reset', 'hidden', 'checkbox', 'radio'];
jQuery.extend(jQuery.expr[':'], { 
    textbox: function (elem) {    
       return jQuery.inArray(elem.type, types) === -1
    }
});

$('input:textbox').bar(); 
```

[http://jsfiddle.net/Xryyq/](http://jsfiddle.net/Xryyq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:25:06.163

仅将其用于您的文本框可能更容易`input`，然后覆盖（用于 CSS）或排除（使用`:not()`）以去除复选框、单选按钮等。

# java - 加密和保护 Android 数据

> ID：14795116
> 
> 赞同：0
> 
> 时间：2013-02-10T05:48:20.793
> 
> 标签：java, android, eclipse, crypt

我的应用每 5 分钟获取一次用户的 GPS 位置，将其保存，然后将其发送到服务器。我面临的问题是我需要对存储在 android SD 卡上的数据进行加密，以便服务器上除了我之外没有人可以访问它。我还需要想办法确保除了我之外没有人编辑过数据。最后，我想在每次关闭文件时写入文件的 MD5 校验和，因此当应用程序打开文件时，它会检查 MD5 以查看它们是否匹配。问题是我认为这会浪费资源和电池，因为我已经每 5 分钟检查一次 GPS 位置。任何关于加密数据的想法都将不胜感激，我一直无法找到最安全的方式谢谢！！！

编辑：我已经检查了密码学的主题，但一切似乎都认为它容易受到任何有一点时间的人的攻击，这就是我问的原因！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:43:42.343

您应该使用带有 SqlCipher 的 Sqlite 存储您的数据：http: [//sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

正如您所说，没有办法完全阻止确定的攻击者查看/编辑数据，因为您必须在程序代码或系统某处的保存文件中公开您的加密密钥。

但是，您或我编写的任何本土解决方案都不会更好，这只是硬件/操作系统的本质。

如果您希望数据不被读取，我建议您在传输到服务器后将其删除。

此外，如果您每 5 分钟检查一次 GPS，那么与此相比，您几乎没有什么可以做的会明显消耗电池电量。

# javascript - 在其他地方播放在 Android Cordova 中录制的 3gp 音频

> ID：14795118
> 
> 赞同：0
> 
> 时间：2013-02-10T05:48:24.113
> 
> 标签：javascript, cordova, html5-audio, amr, 3gp

我希望能够在移动设备上的 Cordova 应用程序中录制音频，然后在 Web 应用程序中的台式计算机上播放。但是，我遇到了一些令人讨厌的编解码器问题。

根据科尔多瓦文档：

> Android 设备以自适应多速率格式录制音频。指定的文件应以 .amr 扩展名结尾。

这似乎是错误的。根据[此处](http://www.digitalpreservation.gov/formats/fdd/fdd000254.shtml)的信息，.amr 文件应具有以下开头的标题：

```
#!AMR.4 
```

但是，[我的 Nexus 7 中的音频文件](https://www.dropbox.com/s/is2mura8dybd16f/00ca9168-3b19-b7b9-6abc-e7dc0695ee6c.amr)具有如下标题：

```
....ftyp3gp4.... 
```

这似乎表明它们应该具有 .3gp 扩展名。

此外，我认为这两种格式都没有本机浏览器支持（Cordova 之外）。我找到了一个 JavaScript [amr 播放库](https://github.com/jpemartins/amr.js)，但是它不能转换 .3gp 文件（即 android 生成的文件）。我敢打赌，可以使用类似的方法来解码 .3gp 文件，但这似乎是一项艰巨的任务。我希望避免这种情况。如果有人愿意这样做，我将永远感激不尽。

如果无法更改 Cordova Media API 生成的格式，则需要解码器。一个纯 JavaScript 解码解决方案将是理想的，闪存转换器几乎一样好。我考虑过的其他可能性有一些问题：

一种可能性是使用另一个应用程序进行转换。例如，[适用于 android 的 ffmpeg](https://play.google.com/store/apps/details?id=roman10.media.ffmpeg#?t=W251bGwsMSwxLDIxMiwicm9tYW4xMC5tZWRpYS5mZm1wZWciXQ..)。我想避免这种情况，因为从 Cordova 启动意图需要一个 Phonegap Build 不提供的插件，并且用户必须处理安装和操作另一个应用程序。

另一种可能性是在云端进行解码。如果可能的话，我不想运行我自己的任何网络服务。我尝试了 encoding.com 并且能够成功地将我的一个音频文件转换为 mp4，但是他们还没有 Dropbox 文件监视支持。如果音频文件在到达之前需要加密，例如因为 HIPAA，那么云解码会变得非常复杂，如果不是不可能的话。

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:31:09.907

问题是 Android 中包含的编码编解码器并不多。如果您查看[此表](https://developer.android.com/guide/appendix/media-formats.html#core)，您可以看到 Android 4.1 之前可用的内容。Phonegap 使用 AMR-NB 作为 3gpp 容器中的编码类型。

我给你的建议是在云端解码。

# css - 如何将右列 div 设置为固定（当前“位置：固定”使部分移动到左侧）

> ID：14795123
> 
> 赞同：1
> 
> 时间：2013-02-10T05:49:07.583
> 
> 标签：css, html, fixed, multiple-columns

我正在尝试使用 div 设置三个部分，中间一个主要部分，左右一个较小的列。我能够做到这一点，但不能让正确的列有一个固定的位置。每当我为此部分添加“位置：固定”时，它都会忽略“浮动：右”并将该部分放在左列的顶部。请注意，我需要在代码中对 div 的左右中间进行排序，否则右列位于其他内容下方的右侧。谢谢。

```
 <div style = "height: 100%">

    <div style = "width: 15%; float:left; background-image: url(image.jpg);
    background-size: 100% 100%;height: 100%; background-repeat:no-
    repeat; background-position:left top; position: fixed" >
    <div style = "margin-left:20px; margin-right:20px; margin-top:40px; margin-
    bottom:40px">

    <p2>
    content
    </p2>
    </div>
    </div>

    <div style = "width: 15%; float:right; background-image: url(image.jpg);
    background-size: 100% 100%; min-height: 100%; background-repeat:no-
    repeat; **position: fixed;** background-position:right top">
    <div style = "margin-left:20px; margin-right:20px; margin-top:40px; margin-
    bottom:40px">

    <p2>
    content
    </p2>
    </div>
    </div>

    <div style = "width: 60%; margin-left:300px; margin-right:300px; top: 100px" >
    <h1>head  </h1>
    <p>content
    </p>

    </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:53:34.870

当你给一个元素固定位置时，你可以强制它在屏幕上的位置。例如，当您的 div 卡在左侧时，您可以添加“left: 100px”以将其向右移动 100px。也就是说，它将元素从左侧移动 100px（向右移动）。您可以将此度量更改为在这种情况下有效的任何值，例如 75%。

还要研究 CSS。将样式直接放入您的标记中可能会变得混乱和重复，我不知道您是否打算让页面随着浏览器窗口缩小，但大多数网页以像素而不是百分比指定列的宽度。

# html - 如何在图像旁边放置一个文本区域并让它填满其余的空间？

> ID：14795124
> 
> 赞同：2
> 
> 时间：2013-02-10T05:49:24.067
> 
> 标签：html, css, image, textarea

我正在尝试制作漂亮的评论框。我想在一行/行的文本区域之前显示一个图像。图像大小应该是固定的。textarea 应该填满剩余的空间。该网站具有动态宽度，因此修复 textarea 宽度对我不起作用。

但是文本区域不会靠近图像，而是会在图像下方。

```
<img src="http://i2.wp.com/c0589922.cdn.cloudfiles.rackspacecloud.com/avatars/male200.png" style="float:left;"/>
<textarea style="float: left; height: 200px; margin-left: 210px; width:100%"></textarea> 
```

[看到这个小提琴](http://jsfiddle.net/W8ebm/17/)。

关于如何实现这一目标的任何想法？[查看 cnn.com 上的评论框，看看我在说什么](http://www.cnn.com/2013/02/08/tech/social-media/apparently-this-matters-face-tattoos/index.html?hpt=hp_c2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:50:49.903

我认为这段代码会做你想做的事：

```
<div style="position:absolute; left:100px; right:100px;">
  <div style="position:relative;">
    <img src="http://i2.wp.com/c0589922.cdn.cloudfiles.rackspacecloud.com/
          avatars/male200.png" style="position:absolute;">
    <div style="position: absolute; left:210px; right:0px; top:0px;">
      <input type="textbox" style="width:100%; height:200px; display:block;
          padding:0;">
    </div>
  </div>
</div> 
```

可能需要进行一些微调。我的回答基于这篇文章：http: [//jsfiddle.net/QaWMN/2/](http://jsfiddle.net/QaWMN/2/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:30:29.567

试试这个

HTML 代码：

```
<div>
   <img src="http://i2.wp.com/c0589922.cdn.cloudfiles.rackspacecloud.com/avatars/male200.png" />
    <textarea cols="20" rows="4"></textarea>
</div> 
```

CSS 代码

```
div img {
    float: left;
    width: 100px;
    height: 120px;
    margin: 0 5px 0 0;
}

div textarea {
    width: 80%; // adjust this value you need
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:36:20.603

我想你正在寻找这样的东西：http: [//jsfiddle.net/6shan/](http://jsfiddle.net/6shan/)

这是html：

```
<div class="comment">
    <div class="avatarContainer">
    <img class="avatar" src="http://i2.wp.com/c0589922.cdn.cloudfiles.rackspacecloud.com/avatars/male200.png"></img>
    </div>
        <div class="commentBody">
        <div class="commentHeader">commentHeader</div>
        <textarea class="commentText">commentText</textarea>
    </div>
</div> 
```

这是随附的 css ：

```
.comment
{height:150px; width:250px;
    border:1px solid black;
    padding:15px;
}
.avatar 
{ height:px; width:24px;}
.avatarContainer
{ height:150px; width:30px;float:left;}
.commentBody
{ height:150px;width:220px;float:right;}
.commentHeader
{height:30px; width:100%; margin-left:10px; border-bottom:1px solid black;}
.commentText 
{ height:100px; width:100%;
margin:10px 10px 10px 10px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T06:41:45.230

它看起来有点奇怪，但这可以解决问题：

[http://jsfiddle.net/6shan/4/](http://jsfiddle.net/6shan/4/)

对 img 和相对 div 内的 textarea 使用绝对位置。

```
<div>
    <img src="..."/>
    <textarea></textarea>
</div> 
```

CSS：

```
div {
    position: relative;
    padding: 0px;
    margin: 0px;
    height: 100px;
}

div img {
    width: 100px;
    height: 100px;
    position: absolute;
    top: 1px;
    left: 1px;
}

div textarea {
    display: block;
    position: absolute;
    top: 0px;
    left: 110px; /* 100px of the image's width plus 10px margin */
    right: 0px;
    height: 100px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-04T23:49:56.473

我发现不使用 position: absolute 的最佳方法如下：

```
img {
    width: 100px;
    height: 100px;
    float: left;
}
.wrap {
  display: block;
  padding-left: 100px;
}
textarea {
    display: block;
    height: 100px;
    width: 100%;
}
```

```
<img src="http://i2.wp.com/c0589922.cdn.cloudfiles.rackspacecloud.com/avatars/male200.png"/>
<div class="wrap">
  <textarea></textarea>
</div>
```

# android - 如何在滚动视图中保存滚动位置？

> ID：14795125
> 
> 赞同：1
> 
> 时间：2013-02-10T05:49:25.340
> 
> 标签：android, position, save, scrollview

我在滚动视图中有很长的文本。当用户按下后退按钮或退出程序时，我希望滚动视图保存其位置，然后在重新创建活动时，用户可以继续离开他们的位置。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T00:05:04.090

[getScrollY()](http://developer.android.com/reference/android/view/View.html#getScrollY%28%29) 描述了你需要什么。ScrollView 继承它并返回滚动位置。要稍后恢复位置，您需要调用[scrrollTo(int, int)](http://developer.android.com/reference/android/widget/ScrollView.html#scrollTo%28int,%20int%29)或[smoothScrollTo(int, int)](http://developer.android.com/reference/android/widget/ScrollView.html#smoothScrollTo%28int,%20int%29)。要处理后退按钮，您需要覆盖[onBackPressed()](http://developer.android.com/reference/android/app/Activity.html#onBackPressed%28%29)。

# c++ - exchange 或 compare_and_exchange 是否按修改顺序读取最后一个值？

> ID：14795126
> 
> 赞同：3
> 
> 时间：2013-02-10T05:49:49.707
> 
> 标签：c++, c++11, atomic, lock-free, memory-model

我正在阅读Anthony Williams 的[C++ Concurrency in Action](http://www.manning.com/williams/)。在“了解轻松排序”部分，它具有：

> 您还可以告诉隔间里的人一些额外的事情，例如“写下这个数字，并告诉我**列表底部是什么”（交换）和“如果****底部**的数字，写下这个数字**清单**是这样的；否则告诉我我应该猜到什么”（compare_exchange_strong），但这并不影响一般原则。

这是否意味着此类操作总是按修改顺序读取最后一个值（如果在约束之前没有发生额外的线程间）？即是否有一些缓存更新/等（即使在宽松的排序中）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T17:27:41.243

是的。C++ 标准说 (29.3/10)：

> 原子读-修改-写操作应始终读取在与读-修改-写操作关联的写之前写入的最后一个值（按修改顺序）。

`exchange`成功的操作都是`compare_exchange_{weak,strong}`读-修改-写操作。

# javascript - 节点 bcrypt 的比较总是返回 false

> ID：14795130
> 
> 赞同：18
> 
> 时间：2013-02-10T05:50:58.810
> 
> 标签：javascript, node.js, bcrypt

我很难让我的密码成功地与使用节点的 bcrypt 进行比较。也许我错过了一些东西，但在创建帐户时，我在注册方法中执行以下操作（一些代码缩写）：

```
bcrypt.genSalt(10, function(err, salt) {
               if(err) {

               }
               bcrypt.hash(user.Password, salt, function(err, hash) {
                           console.log('hashing and saving');
                           db.query(db insert code, function (error, rows, fields) {
                                    if(error) {
                                    console.log(error);
                                    res.setHeader('500', { 'Content-Type': 'x-application/json'});
                                    res.send({UserId: 0, ErrorMessage: 'Something terrible happened.'});
                                    } else {
                                    console.log('User created : ' + rows.insertId);
                                    res.setHeader('200', { 'Content-Type': 'x-application/json'});
                                    res.send({UserId: rows.insertId});
                                    }
                                    });
                           });
               });

return next(); 
```

这一切都很好。我的数据库有加密的密码。但是当用户登录时，我无法从 bcrypt.compare 获得成功的结果：

```
db.query(get account code, function(error, rows, fields) {
         if(rows.length == 1) {
           bcrypt.compare(request.params.password, rows[0].Password, function(err,res) {
              if(err) { console.log(err.toString()); }
              if(res == true)
              {
                        response.setHeader('200', { 'Content-Type': 'x-application/json' });
                        response.send({result: true});
              } else {
                        response.setHeader('401', { 'Content-Type': 'x-application/json' });
                        console.log('invalid password');
                        response.send({result:false});
                     }
              });
         }
        });

return next(); 
```

而且我总是以无效密码告终。在与从数据库中提取的内容进行比较之前，我是否需要获取明文密码并重新加密？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-10T10:33:53.167

你可以跳过做`bcrypt.genSalt`和使用`bcrypt.hash(password, 10, function(err, hash) {..});`

你的比较功能对我来说似乎很好。

这对我来说很好用：

```
var bcrypt = require('bcrypt');

bcrypt.hash('mypassword', 10, function(err, hash) {
    if (err) { throw (err); }

    bcrypt.compare('mypassword', hash, function(err, result) {
        if (err) { throw (err); }
        console.log(result);
    });
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-01-02T18:54:48.520

我不知道你是否和我一样，我有同样的问题，因为我的表的长度为 45 个字符，bcrypt 比较哈希长度是否与 60 不同，它返回 false。只需增加表格中字符的长度

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-06-24T18:46:24.700

我的原因是我的数据库列没有足够大的 varchar 长度。一个检查的好地方。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-11-24T17:29:16.127

bcrypt 的比较方法的参数应该是

`bcrypt.compare(actual_password, encrypted_password)`

代替

`bcrypt.compare(encrypted_password, actual_password)`

=> encrypted_pa​​ssword 应该是第二个参数。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-23T09:02:21.273

我有同样的问题。将节点包从`bcrypt`更改`bcryptjs`为比较后，效果就像一个魅力。由于包似乎是一个fork，功能不需要调整。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-07T08:02:44.240

对我来说，这只是一种争论障碍

正确的顺序

```
bcrypt.compare(plainPasswordToCheck, hashedPasswordOnStorage) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-24T08:05:23.117

我遇到了同样的问题，但我确定我没有对密码进行两次编码。事情就是这样。bcrypt-nodejs npm 包在 v0.0.3 上，我正在使用这个版本。我正在编写算法以在注册时存储用户密码并在登录时读取用户密码。前端是一个简单的电子邮件字段输入文本和密码字段输入密码。当我提交请求时，我在本地节点服务器上发布对[https://localhost ... 的调用。](https://localhost)我可以记录收到的数据，我可以看到记录的密码与前端插入的密码相同。

用于存储密码的代码是：

```
//var user.bcrypt = bcrypt.genSaltSync(10);;
var clearPwd = user.password;
user.password = bcrypt.hashSync(clearPwd);//, user.bcrypt);
log4.debug("hashSyncked: "+ user.password);
db.userSave(user, cb); 
```

用于读取和比较密码的代码是：

```
log4.debug('compare '+pwd+' with saved on db for user %j', userDoc.password);
var okPwd = bcrypt.compareSync(pwd, userDoc.password); 
```

所以，我看到了散列密码，它被记录为一个字符串，如 $ert3435tF.02ri 等......

但是每次我使用注册时的相同密码登录时，**okPwd**总是错误的。为什么？

即使我取消注释注释代码！

**更新** 我找到的解决方案是关于方法的。密码不应该这样存储和读取，这太……粗鲁了！[这里](http://blog.mongodb.org/post/32866457221/password-authentication-with-mongoose-part-1)提到了正确的方法当心！该指南有错误。bcrypt.hash(...) 函数需要 2 个对象参数和 2 个回调！最后一个是在散列过程结束时调用的，第一个被调用来跟踪散列过程。我把它**设为空**，一切都很好。我承认我犯了另一个错误：我使用 bcrypt-nodejs 包而不是 brcrypt。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-04T20:00:09.837

只需修改数据库中分配给密码字段的字符长度，可能生成的哈希值大于该字段可以支持的值

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-05-08T12:58:07.257

我的哈希以 $2y 开头，它必须以 $2b 开头

> 该库支持 $2a$ 和 $2b$ 前缀 bcrypt 哈希。$2x$ 和 $2y$ 哈希是专门为 John the Ripper 开发的 bcrypt 实现。理论上，它们应该与 $2b$ 前缀兼容。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-13T08:31:41.413

这对我有用。

```
var bcrypt = require('bcrypt');
var salt = bcrypt.genSaltSync();

bcrypt.hash('mypassword', salt, function(err, hash){
    if(err) throw err;

    bcrypt.compare('mypassword', hash, function(err, result) {
      if (err) { throw (err); }
      console.log(result);
    });

}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-02-22T09:11:20.117

我遇到了同样的问题，对我来说，解决方案是修复前端的错字。我正在从我的表单中发送“密码”并期待“密码”。然后 bcyppt 以某种方式对返回的未定义值进行哈希处理，这就是 compare() 总是返回 false 的原因。

希望这对某人有帮助！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-06-14T16:26:35.003

对我有用的另一种可能的解决方案是，如果在您的用户模型中，您将其放在密码字段下。

```
lowercase: true, 
```

我碰巧从另一个领域复制了这个。当我删除它时，问题就消失了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-17T21:33:58.607

我删除了我的用户并重新创建了它并这样做了

```
const isMatch = await bcrypt.compare(password, user.password);
console.log(user.password, isMatch);
if (!isMatch) {
  return res.status(400).json({
    msg:
      "Sorry, your password was incorrect. Please double-check your password.",
  }); 
```

在创建用户时，我这样做了

```
const salt = await bcrypt.genSalt(10);
user.password = await bcrypt.hash(password, salt); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-02-09T17:46:30.837

在比较函数中，您不需要生成新的哈希，请执行以下操作：

```
async function Login(email, password) {
  const user = await this.service.getByEmail(email);

  const passwordBd = user.user_password;

  const matching = await bcrypt.compare(password, passwordBd);

  console.log(matching); //true
}; 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-12-28T17:55:21.757

就我而言，我将哈希作为命令行参数传递给节点程序 - 仅用于测试：

```
node admin/bcrypt.js password $2b$10$/v9nAxpPQoDH5LMa/q.0AON/gEk.AxF57hHtIGkKR5IAWfMLyBcmm 
```

哈希以`$2b$10$/`;开头 `$2`and被解释为`$1`位置参数并被评估为空值，因此被比较的值与我传入的值不同。`$`用 a 转义符号`\`解决了这个问题：

```
node admin/bcrypt.js password \$2b\$10\$/v9nAxpPQoDH5LMa/q.0AON/gEk.AxF57hHtIGkKR5IAWfMLyBcmm 
```

* * *

## 回答 #16

> 赞同：-2
> 
> 时间：2022-02-10T10:59:41.873

那是由于密码长度为 45，增加它并解决问题。

# wpf - RadGridView 数据绑定

> ID：14795133
> 
> 赞同：1
> 
> 时间：2013-02-10T05:51:13.673
> 
> 标签：wpf, data-binding, telerik, radgridview

我正在为我的 wpf 应用程序使用 telrik RadGridView。我想将网格绑定到我在 SQL 数据库中的表。我认为这会很简单，但我运气不好。我正在获取 SQL 数据并将其存储在正确填充的 DataSet 中。不过，我在屏幕上看到的唯一内容是没有填写数据的表格列。我的 RadGridView 的 XAML 是：

```
 <telerik:RadGridView Name="Grid" Grid.Row="2" Grid.ColumnSpan="3"  HorizontalAlignment="Center" VerticalAlignment="Bottom" 
                         AlternateRowBackground="AliceBlue" SelectionMode="Multiple" 
                         AutoGenerateColumns="False" MinHeight="300" MinWidth="800"  CanUserResizeColumns="True" CanUserResizeRows="True"
                         FilteringMode="FilterRow"  IsFilteringAllowed="True"  CanUserSortColumns="True" GridLinesVisibility="Both" 
                         DataLoadMode="Asynchronous"  >
        <telerik:StyleManager.Theme>
            <telerik:Windows8Theme/>
        </telerik:StyleManager.Theme>
        <telerik:RadGridView.Columns>
            <telerik:GridViewDataColumn Width="40" Header="Add" DataMemberBinding="{Binding Add}" IsGroupable="False" IsFilterable="True" >
</telerik:GridViewDataColumn>
            <telerik:GridViewDataColumn Width="75" Header="Qty"  IsGroupable="False" IsFilterable="True">
</telerik:GridViewDataColumn>
            <telerik:GridViewDataColumn Width="75" Header="ID" DataMemberBinding="{Binding ID}" IsGroupable="False" IsFilterable="True"/>
            <telerik:GridViewDataColumn Width="200" Header="Description" DataMemberBinding="{Binding Description}" IsGroupable="False" IsFilterable="True"/>
            <telerik:GridViewDataColumn Width="75" Header="Price" DataMemberBinding="{Binding Price}" IsGroupable="False" IsFilterable="True"/>
            <telerik:GridViewDataColumn Width="75" Header="Min" DataMemberBinding="{Binding Min}" IsGroupable="False" IsFilterable="True"/>
        </telerik:RadGridView.Columns>

    </telerik:RadGridView> 
```

在cs代码中，我正在填充数据集并将datacontext设置为网格

```
 Grid.DataContext = ds.Tables[0].DefaultView; 
```

我还是 WPF 编程的新手，所以我不确定我是否在这里遗漏了一些小东西，或者我正在尝试做一些根本不可能的事情。感谢你们提供的任何帮助。

编辑：这是加载网格时即时窗口的一些输出。

`A first chance exception of type 'System.ArgumentException' occurred in System.Data.dll A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll System.Windows.Data Error: 17 : Cannot get 'Item[]' value (type 'Object') from '' (type 'DataRowView'). BindingExpression:Path=[]; DataItem='DataRowView' (HashCode=30892613); target element is 'ValueSetter' (Name=''); target property is 'Value' (type 'Object') TargetInvocationException:'System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentException: is neither a DataColumn nor a DataRelation for table Catalog. at System.Data.DataRowView.get_Item(String property) --- End of inner exception stack trace --- at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor) at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments) at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture) at MS.Internal.Data.PropertyPathWorker.GetValue(Object item, Int32 level) at MS.Internal.Data.PropertyPathWorker.RawValue(Int32 k)' A first chance exception of type 'System.ArgumentException' occurred in System.ComponentModel.DataAnnotations.dll A first chance exception of type 'System.ArgumentException' occurred in System.Data.dll A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll System.Windows.Data Error: 17 : Cannot get 'Item[]' value (type 'Object') from '' (type 'DataRowView'). BindingExpression:Path=[]; DataItem='DataRowView' (HashCode=37343064); target element is 'ValueSetter' (Name=''); target property is 'Value' (type 'Object') TargetInvocationException:'System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentException: is neither a DataColumn nor a DataRelation for table Catalog. at System.Data.DataRowView.get_Item(String property) --- End of inner exception stack trace --- at System.RuntimeMethodHandle.InvokeMethod(Object target, Object[] arguments, Signature sig, Boolean constructor) at System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal(Object obj, Object[] parameters, Object[] arguments) at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) at System.Reflection.RuntimePropertyInfo.GetValue(Object obj, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture) at MS.Internal.Data.PropertyPathWorker.GetValue(Object item, Int32 level) at MS.Internal.Data.PropertyPathWorker.RawValue(Int32 k)' A first chance exception of type 'System.ArgumentException' occurred in System.ComponentModel.DataAnnotations.dll A first chance exception of type 'System.ArgumentException' occurred in System.Data.dll A first chance exception of type 'System.Reflection.TargetInvocationException' occurred in mscorlib.dll System.Windows.Data Error: 17 : Cannot get 'Item[]' value (type 'Object') from '' (type 'DataRowView'). BindingExpression:Path=[]; DataItem='DataRowView' (HashCode=17870819); target element is 'ValueSetter' (Name=''); target property is 'Value' (type 'Object') TargetInvocationException:'System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.ArgumentException: is neither a DataColumn nor a DataRelation for table Catalog. at System.Data.DataRowView.get_Item(String property) --- End of inner exception stack trace ---`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:58:52.417

在与 Telerik 客户支持就此事进行了一番交谈后，问题是它
`DataLoadMode = Asynchronous`
不起作用并且必须被取出。此外，由于我使用的是行虚拟化，因此我需要在网格上设置一个高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:25:08.457

代替
`Grid.DataContext = ds.Tables[0].DefaultView;`

做它喜欢
`Grid.ItemsSource = ds.Tables[0].DefaultView;`

我的意思是它应该是`ItemsSource`网格的属性，而不是`DataContext`. 我不确定这一点，但我认为是的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-18T15:28:41.373

为我工作：

```
RadGridView.ValidatesOnDataErrors = "InEditMode" 
```

另请参阅[http://www.telerik.com/forums/argumentexception-when-using-icustomtypedescriptor](http://www.telerik.com/forums/argumentexception-when-using-icustomtypedescriptor)

# bash - awk 如何将参数传递给函数，从 awk 内部调用

> ID：14795137
> 
> 赞同：0
> 
> 时间：2013-02-10T05:52:00.227
> 
> 标签：bash, awk

示例功能：

```
$ testfn() { echo "${1} world"; }
$ testfn hello
hello world 
```

awk 示例：

```
$ echo "something bla bla2"|awk '$1 ~/something/ { print $0; }'
something bla bla2 
```

现在我想使用上面创建的函数将“某物”更改为“某物世界”，当将它作为一整行打印时，通过传递第一个 awk“列元素”作为参数：

```
$ echo "something bla bla2"|awk '$1 ~/something/ { $1="'"$(testfn) $1"'" ; print $0 }'
 world  bla bla2 
```

^^以上不起作用

**有没有办法将参数从 awk 传递给 awk 内部的函数？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T14:06:08.887

非常不推荐，但是：

```
$ cat .env
testfn() { echo "${1} world"; }
$ echo $BASH_ENV
.env
$ echo "something bla bla2" | awk '$1 ~/something/{"bash -c \"testfn " $1 "\"" | getline $1; print $0}'
something world bla bla2 
```

现在，告诉我们您真正想要做什么，我们可以帮助您编写一个理智的脚本来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:16:02.987

不 - 你不能从`awk`. 它不是贝壳。但是，一种常见的解决方法是将您的函数添加到文件中并使用 awk 的`system()`函数调用它。这是一个简单的例子：

内容`yourfunction.sh`：

```
{
    echo "$1 world"
} 
```

然后运行：

```
echo "what the ..." | awk '{ system("./yourfunction.sh" FS $1) }' 
```

结果：

```
what world 
```

请注意，如果您发现自己必须这样做，几乎可以肯定有更好的方法。你到底*想*在这里做什么？

* * *

*编辑：*

针对以下评论，使用以下`getline()`功能：

```
echo "what the ..." | awk '{ "./yourfunction.sh" FS $1 | getline $1 }1' 
```

结果：

```
what world the ... 
```

这是该功能的一些信息`getline()`：

[http://www.gnu.org/software/gawk/manual/html_node/Getline.html](http://www.gnu.org/software/gawk/manual/html_node/Getline.html)

# canvas - 夹在与 KineticJS 楔子的交点上

> ID：14795138
> 
> 赞同：0
> 
> 时间：2013-02-10T05:52:17.927
> 
> 标签：canvas, kineticjs, intersection, clip, wedge

我是 KineticJS 初学者，我想制作两个可拖动的楔子，在它们的交点处更改为特定颜色。我在这个论坛上看到了形状剪裁教程和形状相交问题。我知道一般策略是捕获拖动事件，然后重绘 KineticJS 形状，并在该形状的 drawFunc 中使用 context.rect/context.arc 复制形状并对其进行剪辑。

我的问题是没有方便的 context.wedge 来模拟 KineticJS 楔形。所以要么我停止使用楔形，要么我执行复杂的计算来模拟带有 context.arc 和线条的楔形，或者我想出一个更好的方法。有谁知道更好的方法？

谢谢，
梅

JSFiddle 上的代码：http: [//jsfiddle.net/kdRjP/5/](http://jsfiddle.net/kdRjP/5/) （不起作用，只是在整个地方制作重复的楔子，甚至没有剪掉的楔子。）

代码：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" charset="utf-8" src="js/kinetic-v4.3.1.min.js"></script>
</head>

<body>
    <div id="container"></div>

    <script type="text/javascript">

        drawWedges();

        function drawWedges() {
            var stage = new Kinetic.Stage({
                container: "container",
                width: 400,
                height: 400
            });
            window.console.log("Wedges: 1");

            var wedgeLayer = new Kinetic.Layer();

            var wedgeGroup = new Kinetic.Group({
                x: stage.getWidth() / 2,
                y: stage.getWidth() / 2
            });

            var wedge_1 = new Kinetic.Wedge({
                x: -100,
                y: 0,
                radius: 80,
                angleDeg: 40,
                opacity: 0.7,
                fill: 'red',
                stroke: 'black',
                strokeWidth: 2,
                draggable: true,
                rotationDeg: 0
            });

            var wedge_2 = new Kinetic.Wedge({
                x: 100,
                y: 0,
                radius: 80,
                angleDeg: 40,
                opacity: 0.7,
                fill: 'cyan',
                stroke: 'black',
                strokeWidth: 2,
                draggable: true,
                rotationDeg: 0
            });             

            function makeShapeClip(clipShape, compositeShape) {
                clipShape.attrs.drawFunc_bak = clipShape.attrs.drawFunc;
                clipShape.attrs.drawFunc = function() {
                    var context = this.getContext();
                    context.save();
                    context.beginPath();
                    this.attrs.drawFunc_bak.call(this, context);
                    context.clip();
                    context.beginPath();
                    compositeShape.attrs.drawFunc.call(this, context);
                    context.fill();
                    context.closePath();
                    context.restore();
                };

                return compositeShape;
            };   

            wedge_1.on("dragend", function(evt) {
                var mousePos = stage.getMousePosition();

                var stageIntersections = stage.getIntersections({"x": mousePos.x, "y": mousePos.y});
                if (stageIntersections.length > 0) {
                    // Want to draw a piece of wedge_1 clipped around wedge_2.
                    // Since can't turn wedge_2 into a clip path after it's been drawn, 
                    // draw a duplicate of wedge_2 superimposed on top of wedge_2, 
                    // turn that duplicate into a clip path, 
                    // and then try to draw a duplicate of wedge_1 into it.

                    // Start by creating the wedge_1 duplicate in proper "intersection area color"
                    var wedgeComposite = new Kinetic.Wedge({
                        x: wedge_1.getX(),
                        y: wedge_1.getY(),
                        radius: wedge_1.getRadius(),
                        angleDeg: wedge_1.getAngleDeg(),
                        opacity: 0.5,
                        fill: 'yellow',
                        stroke: 'blue',
                        strokeWidth: 2,
                        draggable: true,
                        rotationDeg: wedge_1.getRotationDeg()
                    });

                    // Now pass that wedge_1 duplicate into a special function that 
                    // creates wedge_2 duplicate and makes it into a clip path.
                    var wedgeClip = makeShapeClip(new Kinetic.Wedge({
                        x: stageIntersections[0].getX(),
                        y: stageIntersections[0].getY(),
                        radius: stageIntersections[0].getRadius(),
                        angleDeg: stageIntersections[0].getAngleDeg(),
                        opacity: 0.5,
                        fill: '#999999',
                        stroke: 'red',
                        strokeWidth: 2,
                        draggable: true,
                        rotationDeg: stageIntersections[0].getRotationDeg()
                    }), wedgeComposite);

                    wedgeGroup.add(wedgeClip);
                }

                wedgeLayer.draw();
            });

            wedgeGroup.add(wedge_1);
            wedgeGroup.add(wedge_2);
            wedgeLayer.add(wedgeGroup);
            stage.add(wedgeLayer);
        }   
    </script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:32:57.863

这是一个解决方案：

假设你的 canvas#1 有两个 KineticJs 楔子（红色和青色）。

当用户完成拖动时：

1.  创建一个新的画布#2（与画布#1 大小相同），其当前位置/旋转中只有红色楔形。不显示画布#2（可见性：隐藏）。

2.  创建一个新的画布#3（与画布#1 大小相同），其当前位置/旋转中只有青色楔形。不显示画布#3（可见性：隐藏）。

3.  从画布#2 和画布#3 的左上角像素开始，遍历画布#2 和画布#3 上的每个对应像素。

4.  如果 #2 和 #3 上的任何相应像素都“着色”，则楔形在该像素处相交。

5.  对于第 4 步中的任何“命中”，在画布#1 上的相交像素处绘制您想要的任何内容（例如将该像素更改为您指定的颜色）

为了提高性能，您可以计算两个楔形的边界框并查看它们是否完全相交。

如果楔子根本不相交，请不要​​打扰像素命中测试。

如果它们确实相交，只需对组合楔块的边界框进行像素命中测试。

# jquery - jquery touch 在 iframe 上滑动

> ID：14795140
> 
> 赞同：3
> 
> 时间：2013-02-10T05:53:37.673
> 
> 标签：jquery, iframe, touch, swipe

我正在尝试组合一个小应用程序，我可以在屏幕上的任何位置滑动。

在我想将 iframe 添加到页面的一部分之前，这一切都很好。当人们在这个区域上时，我希望能够知道何时发生了滑动。这可能吗？

因此，#box 是可滑动区域的想法

```
<div id="box">

<div id="left">
    <h1></h1>
    <p> this is some text</p>
</div>

<div id="right"> 
  <iframe src="anyurl" frameborder="0" height="430"></iframe>     
</div> 
```

我整理了一个基本的jsfiddle，可能有助于说明我的意思

[http://jsfiddle.net/dwhitmarsh/v42S9/](http://jsfiddle.net/dwhitmarsh/v42S9/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-13T08:44:45.443

我个人会**使用 div 来覆盖 iframe**。

```
var maxTime = 1000,
    // allow movement if < 1000 ms (1 sec)
    maxDistance = 50,
    // swipe movement of 50 pixels triggers the swipe
    target = $('#box'),
    startX = 0,
    startTime = 0,
    touch = "ontouchend" in document,
    startEvent = (touch) ? 'touchstart' : 'mousedown',
    moveEvent = (touch) ? 'touchmove' : 'mousemove',
    endEvent = (touch) ? 'touchend' : 'mouseup';

target.bind(startEvent, function(e) {
    // prevent image drag (Firefox)
    // e.preventDefault();
    startTime = e.timeStamp;
    startX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX;
}).bind(endEvent, function(e) {
    startTime = 0;
    startX = 0;
}).bind(moveEvent, function(e) {
    // e.preventDefault();
    var currentX = e.originalEvent.touches ? e.originalEvent.touches[0].pageX : e.pageX,
        currentDistance = (startX === 0) ? 0 : Math.abs(currentX - startX),
        // allow if movement < 1 sec
        currentTime = e.timeStamp;
    if (startTime !== 0 && currentTime - startTime < maxTime && currentDistance > maxDistance) {
        if (currentX < startX) {
            // swipe left code here
            target.find('h1').html('Swipe Left').fadeIn();
            setTimeout(function() {
                target.find('h1').fadeOut();
            }, 1000);
        }
        if (currentX > startX) {
            // swipe right code here
            target.find('h1').html('Swipe Right').fadeIn();
            setTimeout(function() {
                target.find('h1').fadeOut();
            }, 1000);
        }
        startTime = 0;
        startX = 0;
    }
});
```

```
h1 {
    text-align: center;
    font-size: 24px;
}
#box {
    width: 800px;
    height: 600px;
    margin: 30px auto;
    background-color:#eee;
}
#left{ position:relative; float:left; width:40%;
}
#right{  position:relative; float:left; width:40%; }

#right .iframe_cover{
  position: absolute;
  width: 100%;
  height: 40%;
  top: 0;
  left: 0;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<h1>Swipe Inside the Box</h1>
<div id="box">

    <div id="left">
        <h1></h1>
        <p> this is some text</p>
    </div>

    <div id="right"> 
      <iframe src="https://lnt.org/" frameborder="0" height="430"></iframe>
      <div class="iframe_cover"></div> 
    </div>
</div>
```

注意：如果您需要能够在 iframe 内单击或滚动或单击，则应捕获此封面上的滚动或单击事件并将其应用于 iframe。

# asp.net-mvc - Kendo UI ComboBox 在返回页面时保留值但不保留文本

> ID：14795143
> 
> 赞同：0
> 
> 时间：2013-02-10T05:53:57.573
> 
> 标签：asp.net-mvc, kendo-ui

我正在为 MVC 使用 Kendo UI，并且在执行以下操作时遇到了 ComboBox 的奇怪行为：

1.  在组合框中选择一个项目。
2.  离开页面。
3.  使用浏览器的后退按钮返回页面。

返回后，ComboBox 为空白（或者如果我配置了占位符，则会出现）。但是，当我打开 ComboBox 时，我最初选择的项目会突出显示。因此，尽管文本没有保留，但似乎保留了该值。

通常，数据输入项会保留它们在您离开页面时的值，因此这种行为似乎是不标准的。

有什么方法可以确保 ComboBox 在返回页面时保留其文本？

谢谢，

肯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:57:53.493

看到你的一些代码会有所帮助，但我会把它扔掉。使用 Kendo().DropDownListFor 有点无证，但我发现它是最好的。我还发现最好继续将列表选项从您的数据看起来像 IList 的 SelectListItem 转换，以后会节省很多麻烦。这是一个在一堆视图中被丢弃的部分。

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "ChangeProject" }))
{   
    @(Html.Kendo().DropDownListFor(x => x.CurrentProjectId)
        .HtmlAttributes(new { style = "width: 450px;" })
        .OptionLabel("Project...")
        .BindTo(Model.ProjectSelectList)
        .Events(events => events.Change("submitProjectForm"))
    )
    <script type="text/javascript">
        function submitProjectForm() {
            $('#ChangeProject').submit();
        }
    </script>
} 
```

模型应用于页面...

```
public class ThisViewModel
{
    public int CurrentProjectId { get; set; }
    public IList<SelectListItem> ProjectSelectList { get; set; }
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T03:17:28.603

您可以在 sumit 或转到新页面之前设置控制值等于组合框的文本：

```
$("#controlid").val($("#controlid").data("kendoComboBox").text()); 
```

# node.js - 单线程非阻塞 IO 模型如何在 Node.js 中工作

> ID：14795145
> 
> 赞同：342
> 
> 时间：2013-02-10T05:54:17.067
> 
> 标签：node.js

我不是 Node 程序员，但我对**单线程非阻塞 IO 模型的**工作原理很感兴趣。在我阅读了[理解-the-node-js-event-loop](http://blog.mixu.net/2011/02/01/understanding-the-node-js-event-loop/)的文章后，我真的很困惑。它为模型提供了一个示例：

```
c.query(
   'SELECT SLEEP(20);',
   function (err, results, fields) {
     if (err) {
       throw err;
     }
     res.writeHead(200, {'Content-Type': 'text/html'});
     res.end('<html><head><title>Hello</title></head><body><h1>Return from async DB query</h1></body></html>');
     c.end();
    }
); 
```

**问：**当有两个请求A（先来）和B，因为只有一个线程，服务器端程序会先处理请求A：做SQL查询是休眠语句，等待I/O。并且程序一直处于`I/O`等待状态，无法执行渲染网页的代码。程序会在等待期间切换到请求 B 吗？在我看来，由于单线程模型，没有办法将一个请求从另一个请求切换。但是示例代码的标题表明**除了您的代码之外的所有内容都是并行运行的**。

> （PS我不确定我是否误解了代码，因为我从未使用过Node。）Node如何在等待期间将A切换到B？并且能简单的解释一下Node**的单线程非阻塞IO模型吗？**如果您能帮助我，我将不胜感激。:)

* * *

## 回答 #1

> 赞同：394
> 
> 时间：2013-02-10T11:41:36.507

Node.js 建立在[libuv 之上](https://github.com/libuv/libuv)，这是一个跨平台库，它为支持的操作系统（至少是 Unix、OS X 和 Windows）提供的异步（非阻塞）输入/输出抽象 api/syscall。

## 异步 IO

在此编程模型中，对文件系统管理的设备和资源（套接字、文件系统等）的打开/读取/写入操作*不会阻塞调用线程*（如在典型的同步类 c 模型中），只需标记当新数据或事件可用时通知进程（在内核/操作系统级数据结构中）。对于类似 Web 服务器的应用程序，该进程负责确定通知事件属于哪个请求/上下文，并从那里继续处理请求。请注意，这必然意味着您将位于与向操作系统发起请求的堆栈帧不同的堆栈帧上，因为后者必须让步给进程的调度程序，以便单线程进程处理新事件。

我所描述的模型的问题在于它对程序员来说并不熟悉且难以推理，因为它本质上是非顺序的。“您需要在函数 A 中提出请求，并在另一个函数中处理结果，而 A 中的本地人通常不可用。”

## Node的模型（继续传递样式和事件循环）

Node 利用 javascript 的语言特性解决了这个问题，通过引导程序员采用某种编程风格，使这个模型看起来更加同步。每个请求 IO 的函数都有一个类似的签名，`function (... parameters ..., callback)`并且需要给一个回调，当请求的操作完成时将调用该回调（请记住，大部分时间都花在等待操作系统发出完成信号 - 时间可以是做其他工作）。Javascript 对闭包的支持允许您使用在回调主体内的外部（调用）函数中定义的变量——这允许在节点运行时独立调用的不同函数之间保持状态。另请参阅[继续传递样式](http://en.wikipedia.org/wiki/Continuation_passing_style)。

此外，在调用产生 IO 操作的函数后，调用函数通常会`return`控制节点的**事件循环**。此循环将调用计划执行的下一个回调或函数（很可能是因为操作系统通知了相应的事件）——这允许并发处理多个请求。

您可以将节点的事件循环视为**有点类似于内核的调度**程序：一旦其挂起的 IO 完成，内核将安排执行阻塞线程，而节点将在相应事件发生时安排回调。

## 高并发，无并行

最后一句话，“除了你的代码之外，一切都并行运行”这句话很好地捕捉到了这一点，即节点允许你的代码通过多路复用和排序你的所有 js来同时处理来自*数十万个打开套接字的*请求。单个执行流中的逻辑（即使说“一切都并行运行”在这里可能不正确 - 请参阅[并发与并行 - 有什么区别？](https://stackoverflow.com/questions/1050222/concurrency-vs-parallelism-what-is-the-difference)）。这对于 webapp 服务器非常有效，因为大部分时间实际上都花在等待网络或磁盘（数据库/套接字）上，并且逻辑并不是真正的 CPU 密集型 - 也就是说：**这适用于 IO-bound 工作负载**。

* * *

## 回答 #2

> 赞同：219
> 
> 时间：2013-02-10T11:09:51.653

好吧，为了给出一些观点，让我将 node.js 与 apache 进行比较。

Apache 是一个多线程 HTTP 服务器，对于服务器接收到的每个请求，它都会创建一个单独的线程来处理该请求。

另一方面，Node.js 是事件驱动的，从单线程异步处理所有请求。

当在 apache 上接收到 A 和 B 时，会创建两个处理请求的线程。每个单独处理查询，每个在服务页面之前等待查询结果。该页面仅在查询完成之前提供。查询获取是阻塞的，因为服务器在收到结果之前无法执行线程的其余部分。

在 node 中，c.query 是异步处理的，这意味着当 c.query 为 A 获取结果时，它会跳转到为 B 处理 c.query，当 A 的结果到达时，它会将结果发送回回调，回调发送回复。Node.js 知道在 fetch 完成时执行回调。

> 在我看来，因为它是单线程模型，所以没有办法从一个请求切换到另一个请求。

实际上，节点服务器一直在为你做这件事。要进行切换，（异步行为）您将使用的大多数函数都将具有回调。

### 编辑

SQL 查询取自[mysql](https://npmjs.org/package/mysql)库。它实现了回调样式以及事件发射器来对 SQL 请求进行排队。它不会异步执行它们，这是由提供非阻塞 I/O 抽象的内部[libuv线程完成的。](http://nikhilm.github.io/uvbook/index.html)进行查询时会发生以下步骤：

1.  打开与 db 的连接，连接本身可以异步进行。
2.  连接 db 后，查询将传递到服务器。查询可以排队。
3.  主事件循环通过回调或事件获得完成通知。
4.  主循环执行您的回调/事件处理程序。

对 http 服务器的传入请求以类似的方式处理。内部线程架构是这样的：

![node.js 事件循环](../Images/e56e0eede9a8708e5cca738f4bf6341c.png)

C++ 线程是执行异步 I/O（磁盘或网络）的 libuv。主事件循环在将请求分派到线程池后继续执行。它可以接受更多请求，因为它不等待或休眠。SQL 查询/HTTP 请求/文件系统读取都以这种方式发生。

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2016-11-28T19:56:16.630

Node.js在幕后使用[libuv 。](https://github.com/libuv/libuv)libuv[有一个线程池](http://docs.libuv.org/en/v1.x/threadpool.html)（默认大小为 4）。因此 Node.js**确实使用线程**来实现并发。

**但是**，*您的代码*在单个线程上运行（即，Node.js 函数的所有回调都将在同一个线程上调用，即所谓的循环线程或事件循环）。当人们说“Node.js 在单线程上运行”时，他们实际上是在说“Node.js 的回调在单线程上运行”。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-14T07:51:52.653

Node.js 基于事件循环编程模型。事件循环在单线程中运行并反复等待事件，然后运行订阅这些事件的任何事件处理程序。事件可以是例如

*   定时器等待完成
*   下一块数据已准备好写入此文件
*   有一个全新的 HTTP 请求即将到来

所有这些都在单线程中运行，并且没有任何 JavaScript 代码是并行执行的。只要这些事件处理程序很小并且本身等待更多事件，一切都会很好地工作。这允许单个 Node.js 进程同时处理多个请求。

（在事件起源的地方有一点魔力。其中一些涉及并行运行的低级工作线程。）

在这个 SQL 案例中，**在进行数据库查询和在回调中获取结果之间发生了很多事情（事件）**。在此期间，事件循环不断为应用程序注入生命，并一次推进其他请求一个微小的事件。因此同时处理多个请求。

> ![事件循环高级视图](../Images/7c0ba0ca65f913b9ca38d03187e762c7.png)

根据：[“来自 10,000 英尺的事件循环 - Node.js 背后的核心概念”](http://bytearcher.com/articles/event-loop-10-000ft/)。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-06-09T09:43:22.810

函数 c.query() 有两个参数

```
c.query("Fetch Data", "Post-Processing of Data") 
```

在这种情况下，“获取数据”操作是一个 DB-Query，现在这可以由 Node.js 通过产生一个工作线程并赋予它执行 DB-Query 的任务来处理。（记住 Node.js 可以在内部创建线程）。这使函数能够立即返回，没有任何延迟

第二个参数“数据后处理”是一个回调函数，节点框架注册这个回调并被事件循环调用。

因此，该语句`c.query (paramenter1, parameter2)`将立即返回，使节点能够满足另一个请求。

PS：我刚刚开始了解节点，实际上我想将其写为对[@Philip](https://stackoverflow.com/questions/14795145/how-the-single-threaded-non-blocking-io-model-works-in-node-js#comment29713499_14797359)的评论， 但由于没有足够的声誉点，所以将其写为答案。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-10T10:25:19.013

如果您进一步阅读 - “当然，在后端，有用于数据库访问和进程执行的线程和进程。但是，这些并没有显式地暴露给您的代码，所以除了知道之外，您不必担心它们从每个请求的角度来看，与数据库或其他进程的 I/O 交互将是异步​​的，因为这些线程的结果通过事件循环返回到您的代码。”

about - “除了你的代码之外，所有东西都并行运行” - 你的代码是同步执行的，每当你调用异步操作（例如等待 IO）时，事件循环都会处理所有内容并调用回调。这不是你必须考虑的事情。

在您的示例中：有两个请求 A（首先出现）和 B。您执行请求 A，您的代码继续同步运行并执行请求 B。事件循环处理请求 A，当它完成时调用请求 A 的回调结果，同样适用于请求 B。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-09T10:50:18.497

好的，到目前为止，大多数事情都应该很清楚了......**棘手的部分是 SQL**：如果它实际上不是**在另一个线程或进程**中运行，则必须将 SQL 执行**分解为单独的步骤**（通过SQL 处理器是为异步执行而设计的！），其中执行非阻塞的，而阻塞的（例如睡眠）实际上*可以*转移到内核（作为警报中断/事件）并放在事件列表中主循环。

这意味着，例如 SQL 的解释等是立即完成的，但在等待期间（由内核存储在一些 kqueue、epoll、...结构中作为将来发生的事件；与其他 IO 操作一起) 主循环可以做其他事情，并最终检查这些 IO 是否发生了某些事情并等待。

所以，重新表述一下：程序永远不会（允许）卡住，睡眠调用永远不会执行。他们的职责是由内核（写一些东西，等待一些东西通过网络，等待时间过去）或另一个线程或进程来完成的。– Node 进程检查内核是否在每个事件循环周期中对操作系统的唯一阻塞调用中完成了这些职责中的至少一项。当所有非阻塞都完成时，就达到了这一点。

清除？:-)

我不知道节点。但是 c.query 是从哪里来的呢？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-27T03:55:50.503

这`event loop`就是允许 Node.js 通过尽可能将操作卸载到系统内核来执行非阻塞 I/O 操作的原因——尽管 JavaScript 是单线程的。把它想象`event loop`成经理。

*   新请求被发送到队列中并由`synchronous event demultiplexer`. 如您所见，每个操作处理程序也已注册。

[![在此处输入图像描述](../Images/11a85583c48f262293085e57e850b07c.png)](https://i.stack.imgur.com/EgloV.png)

*   然后将这些请求同步发送到线程池（Worker Pool）执行。JavaScript 不能执行异步 I/O 操作。在浏览器环境中，浏览器处理异步操作。在节点环境中，异步操作`libuv`由使用`C++`. 线程的池默认大小为 4，但可以在启动时通过将`UV_THREADPOOL_SIZE`环境变量设置为任何值（最大值为 128）来更改它。线程池大小 4 意味着一次可以执行 4 个请求，如果事件解复用器有 5 个请求，则 4 个将被传递到线程池，第 5 个将等待。一旦每个请求被执行，结果就会返回给`event demultiplexer。

[![在此处输入图像描述](../Images/052b222b73ea07eaa8182d865507c17f.png)](https://i.stack.imgur.com/WtWHm.png)

*   当一组 I/O 操作完成时，Event Demultiplexer 将一组相应的事件推送到 Event Queue 中。

[![在此处输入图像描述](../Images/a82f8f71cc58adf01551bb78b13bc3af.png)](https://i.stack.imgur.com/S8fGU.png)

处理程序是回调。现在事件循环关注事件队列，如果有东西准备好，它被推入堆栈执行回调。请记住，回调最终会在堆栈上执行。请注意，某些回调具有其他优先级，事件循环确实会根据它们的优先级选择回调。

# c# - 如何填充 DataGridViewComboBoxColumn

> ID：14795146
> 
> 赞同：0
> 
> 时间：2013-02-10T05:54:17.883
> 
> 标签：c#, winforms, linq, datagridview

我有`DataGridViewComboBoxColumn`我的`datagridview`，我想`linq`在运行时填充使用：

我试试这个

```
var line = from li in dbdata.Production_lines select li;
grdEmp.Rows.Add();

(grdEmp.Rows[count].Cells["Line"] as DataGridViewComboBoxCell).DataSource = line;
(grdEmp.Rows[count].Cells["Line"] as DataGridViewComboBoxCell).ValueMember = "L_id";
(grdEmp.Rows[count].Cells["Line"] as DataGridViewComboBoxCell).DisplayMember = "L_id"; 
```

但这没有用。那么如何将数据绑定到`ComboBox`我的`DataGridView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:01:32.813

尝试这个 ：

```
DataGridViewComboBoxColumn combo = (DataGridViewComboBoxColumn)grdEmp.Columns["Line"];

combo.DataSource = line;
combo.ValueMember = "L_id";
combo.DisplayMember = "L_id"; // I also suspect this should be a text column 
```

# java - 从 Java 中的命令行传递多个参数

> ID：14795147
> 
> 赞同：3
> 
> 时间：2013-02-10T05:54:24.797
> 
> 标签：java, if-statement, parameters

我正在做一个项目，我需要从命令行传递多个参数-

以下是我的用例-

1.  从命令行，我将传递至少四个参数`noOfThreads`- ,和`noOfTasks`，所以如果我传递这四个东西，那么我需要将它们存储在一个变量中，对于任何表名 - 我需要将它添加到字符串列表中这样我就可以在我的其他代码中使用它们。`startRange``tableName1`

2.  其次，我可以传递五个参数而不是像上面那样传递四个 - 所以五个参数可以是- `noOfThreads`、`noOfTasks`、`startRange`和。所以这里是额外的。因此，如果我要传递这五个东西，那么我需要将它们存储在一个变量中，在这里我将作为两个表传递，所以我会将这两个表存储在一个字符串列表中。`tableName1``tableName2``tableName2``tableName1``tableName2`

3.  第三，我可以传递六个参数而不是像上面那样传递五个 - 所以六个参数可以是- `noOfThreads`、`noOfTasks`、`startRange`、`tableName1`和。所以这里是额外的。所以如果我传递这六个东西，那么我需要将它们存储在一个变量中，在这里我传递,作为三个表，所以我将再次将这三个表存储在一个字符串列表中。`tableName2``tableName3``tableName3``tableName1``tableName2``tableName3`

因此，对于上述情况，我有以下代码。它目前看起来非常难看，因为我的代码中有很多重复，如下所述。有什么办法可以让它更干净吗？

下面是我的代码-

```
private static List<String> databaseNames = new ArrayList<String>();
private static int noOfThreads;
private static int noOfTasks;
private static int startRange;
private static String tableName1;
private static String tableName2;
private static String tableName3;

public static void main(String[] args) {

if (args.length > 0 && args.length < 5) {

    noOfThreads = Integer.parseInt(args[0]);
    noOfTasks = Integer.parseInt(args[1]);
    startRange = Integer.parseInt(args[2]);
    tableName1 = args[3];
    databaseNames.add(tableName1);
} else if (args.length > 0 && args.length < 6) {
    noOfThreads = Integer.parseInt(args[0]);
    noOfTasks = Integer.parseInt(args[1]);
    startRange = Integer.parseInt(args[2]);
    tableName1 = args[3];
    tableName2 = args[4];
    databaseNames.add(tableName1);
    databaseNames.add(tableName2);
} else {
    noOfThreads = Integer.parseInt(args[0]);
    noOfTasks = Integer.parseInt(args[1]);
    startRange = Integer.parseInt(args[2]);
    tableName1 = args[3];
    tableName2 = args[4];
    tableName3 = args[5];
    databaseNames.add(tableName1);
    databaseNames.add(tableName2);
    databaseNames.add(tableName3);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:58:08.503

您有**很多**冗余，当您看到这些时，请考虑使用简化方法进行重构。这实际上就是我要做的。此外，请考虑为您的 tableNames 设置 String[] 字段，`String[] tableNames`一旦您知道参数计数，您就可以将其声明为所需大小的数组。例如：

```
public void fillParams(String[] args) {
    if (args.length < someMinimum) {
       // throw some exception
    }
    noOfThreads = Integer.parseInt(args[0]);
    noOfTasks = Integer.parseInt(args[1]);
    startRange = Integer.parseInt(args[2]);

    tableNames = new String[args.length - 3];
    for (int i = 0; i < tableNames.length; i++) {
       tableNames[i] = args[i + 3];
       databaseNames.add(tableNames[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:14:21.467

我建议删除 tableName1 - tableName3，它们是多余的，你总是可以得到一个表名

```
tablename1 =  databaseNames.get(0); 
```

这是我的版本：

```
public static void main(String[] args) {
    if (args.length < 4) {
        System.err.println("Usage: ....");
        System.exit(1);
    }
    noOfThreads = Integer.parseInt(args[0]);
    noOfTasks = Integer.parseInt(args[1]);
    startRange = Integer.parseInt(args[2]);
    for(int i = 3; i < args.length; i++) {
        databaseNames.add(args[i]);
    }
} 
```

# sql - SQL 选择具有连续相似值的行

> ID：14795148
> 
> 赞同：-2
> 
> 时间：2013-02-10T05:55:36.953
> 
> 标签：sql, sql-server

我有一个名为“学生”的表，其中包含......

```
Student          Code1      Code2      Code3      Code4

Mark             0           1         1          1        1
Joseph           0           1         0          1        0
Bryan.           0           0         1          1        1 
```

因此，SQL 查询应该选择有两个 1 以上的学生，并且它们也应该是连续的。在上述情况下......应该返回 Mark 和 Bryan，但不返回 Joseph

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:55:49.843

另一种方法

```
SELECT Student
FROM 
(
  SELECT Student,(CONVERT(CHAR(1),Code1) + 
                  CONVERT(CHAR(1),Code2) + 
                  CONVERT(CHAR(1),Code3) + 
                  CONVERT(CHAR(1),Code4)) AS Codes
  FROM Students
) s1
WHERE CHARINDEX('11', Codes) > 0 
```

这是[sqlfiddle](http://sqlfiddle.com/#!3/e6e87/45)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:37:04.533

如果只有少数列：

```
Select *
From Students
Where ( Code1 + Code2 ) = 2
    Or ( Code2 + Code3 ) = 2
    Or ( Code3 + Code4 ) = 2
    Or ( Code4 + Code5 ) = 2 
```

另一种解决方案：

```
With NormalizedData As
    (
    Select Student, Code1, 1 As Sequence From Students Where Code1 = 1
    Union All Select Student, Code2, 2 From Students Where Code2 = 1
    Union All Select Student, Code3, 3 From Students Where Code3 = 1
    Union All Select Student, Code4, 4 From Students Where Code4 = 1
    Union All Select Student, Code5, 5 From Students Where Code5 = 1
    )
Select ...
From Students As S
Where Exists    (
                Select 1
                From NormalizedData As N1
                    Join NormalizedData As N2
                        On N2.Student = N1.Student
                            And N2.Sequence = N1.Sequence + 1
                Where N1.Student = S.Student
                ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:45:58.580

虽然您的架构确实非常非常奇怪，但假设您使用的是 SQL Server 2005 或更高版本，您可以使用 UNPIVOT 轻松解决它。请注意，您必须将所有代码的硬编码列表提供给 unpivot ...

```
WITH pvt (student, code, value) as (
        SELECT 
            Student,
            ROW_NUMBER()OVER(Partition By Student Order By Codes) as CodeId, 
            Value
        FROM 
            ( select * from students ) P
        UNPIVOT ( 
            Value FOR Codes IN (Code1, Code2, Code3, Code4, Code5) 
        ) Code
    )

    select 
    distinct
        pvt.student
    from 
        pvt
        inner join pvt p2
            on p2.code = pvt.code + 1
            and p2.student = pvt.student
    where 
        pvt.value = 1 and p2.value = 1 
```

这里真正的优势是您只需在一个地方处理各种代码 - 例如，如果您添加 Code6，您只需将其添加到 UNPIVOT 中，它将被合并到代码中。

另请注意，这只是解决了“学生在代码中必须有 2 个连续的 1”这一更一般的要求。它不检查学生有多少个 1，也不关心 2 值落在哪里。

最后一个警告是 ROW_NUMBER() 函数假设您的代码是按顺序命名的，没有间隙，所以如果您从 Code7 转到 Code9，它只会假设这两个是“连续的”。

# ruby - 有没有更好的方法来确保 ruby 的 LOAD_PATH 不会搞砸？

> ID：14795150
> 
> 赞同：0
> 
> 时间：2013-02-10T05:56:40.907
> 
> 标签：ruby, load-path

我试图避免向 ruby​​'s 添加冗余路径`LOAD_PATH`。这不是一项非常复杂的任务，我只是想知道是否有比我想出的更清洁的方法。

这是我目前的解决方案：

```
def add_loadpath(new_path)
  included = $LOAD_PATH.inject(false) do |acc,path|
    acc || new_path == File.expand_path(path)
  end
  $LOAD_PATH.unshift new_path unless included
end 
```

`$LOAD_PATH.unshift SOME_PATH`然后，您不会像往常一样打电话
`add_loadpath SOME_PATH`

这是为了避免在加载路径包含两个指向同一个文件夹但不是同一个字符串的路径时出现问题。例如`foo/../bar`和`bar`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:51:46.647

我相信所有的路径`$LOAD_PATH`都已经扩展了，所以`File.expand_path(path)`毫无意义。您的代码可以重构为：

```
def add_loadpath(new_path)
  File.expand_path(new_path)
  .tap{|new_path| $LOAD_PATH.unshift(new_path) unless $LOAD_PATH.include?(new_path)}
end 
```

或者

```
def add_loadpath(new_path)
  $LOAD_PATH.unshift(File.expand_path(new_path)).uniq!
end 
```

# asp.net - lucene.net 的 IN 运算符

> ID：14795153
> 
> 赞同：1
> 
> 时间：2013-02-10T05:57:14.653
> 
> 标签：asp.net, lucene.net

SQL 服务器可以使用 IN 运算符查询特定 ID，例如：

```
ID in (2,23,122,44,22) 
```

我使用相同的查询在另一个页面中显示相关结果。我必须转移到 lucene.net 以提高显示速度，所以我需要替换上面使用的旧代码。我在谷歌上搜索了很多，但没有找到任何替代方案。

我尝试在 lucene.net 中编写布尔查询，例如：

```
ID:1 OR ID:2 OR ID:3 
```

...但由于 1024 表达式的限制，我也无法使用这种方式。请建议我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:40:15.030

默认情况下，布尔查询中的最大子句数为 1024。

您可以增加此限制。

但是，会有性能损失。或者您可以索引文档上的值并搜索它们（lucene 将对具有相同名称的不同字段执行 OR 操作）。

您可以使用 BooleanQuery 类的静态属性更改限制：

```
 BooleanQuery.MaxClauseCount = 99999; 
```

暗里

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T00:09:04.517

默认情况下，查询中的所有术语默认为 ORed：

```
ID: 1 2 3 
```

这将返回 ID 为 1、2 和 3 的所有文档的列表。

您可以使用一个简单的查询，

```
var ids = new[] { "1", "2", "3" };
var query = new QueryParser(version, idProperty, analyzer).Parse(string.Join(" ", ids)); 
```

# javascript - Skitter jQuery Slideshow - 想要设置时间间隔

> ID：14795155
> 
> 赞同：3
> 
> 时间：2013-02-10T05:57:41.967
> 
> 标签：javascript, jquery, slideshow

我发现了这个很棒的 jQuery 幻灯片，叫做 Skitter。这很棒！所以我在我最新的项目中实现了它。是否可以更改两个图像之间的时间间隔。我在他们的网站和 javascript 文件中的每个地方都进行了搜索。在 jquery.skitter.js 页面波纹管行有

> interval: 2500,
> interval_in_elements: 300, // 间隔动画悬停元素 hideTools interval_out_elements: 500, // 间隔动画出元素 hideTools

我改变了那些，但那些行，但没有效果。

我的代码

```
<script>
$(document).ready(function() {

var options = {};

if (document.location.search) {
    var array = document.location.search.split('=');
    var param = array[0].replace('?', '');
    var value = array[1];

    if (param == 'animation') {
        options.animation = value;
    }
    else if (param == 'type_navigation') {
        if (value == 'dots_preview') {
            $('.border_box').css({'marginBottom': '40px'});
            options['dots'] = true;
            options['preview'] = true;
        }
        else {
            options[value] = true;
            if (value == 'dots') $('.border_box').css({'marginBottom': '40px'});
        }
    }
}
$('.box_skitter_large').skitter({interval: 3000});
$('.box_skitter_large').skitter(options);

// Highlight
$('pre.code').highlight({source:1, zebra:1, indent:'space', list:'ol'});

});
</script>   
< div class="box_skitter box_skitter_large">

    <ul>        
    <?php 
    $galClass           =   "cube,cubeRandom,block,cubeStop,cubeHide,cubeSize,horizontal,showBars,showBarsRandom,tube,fade,fadeFour,paralell,paralell,blind,blind,blindHeight,directionTop,directionBottom,directionRight,directionLeft,cubeStopRandom,cubeSpread";
    $galClassArray      =   array_filter(explode(',',$galClass));

    foreach($getall_img as $all_image)  
    {
        if($all_image!='')
        {
            shuffle($galClassArray);
    ?>
            <li>
                <a href='<?php echo $all_image["img_link"];?>' target="_blank">
                    <img src="<?php echo $upload_path.$all_image["img_name"];?>" class="<?php echo $galClassArray[1];?>" width="950" height="320" />
                </a>
            <?php /*<div class="label_text"><p><?php echo $all_image["img_title"];?></p></div>*/?>
           </li>    

    <?php 
        } 
    }
    ?> 
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T06:43:43.630

看起来像这样完成了工作：

```
$('.box_skitter_large').skitter({interval: 3000});
$('.box_skitter_large').skitter(options);  // REMOVE THIS LINE TO PREVENT
                                           // PREVIOUS CUSTOM SETTINGS
                                           // OVERWRITE 
```

# css - 如何在 IE 中覆盖 Twitter Bootstrap 下拉悬停

> ID：14795158
> 
> 赞同：6
> 
> 时间：2013-02-10T05:57:54.573
> 
> 标签：css, internet-explorer, twitter-bootstrap, internet-explorer-9

这适用于 Chrome、Safari 和 Firefox。**但在 IE9 中没有。**我想从下拉菜单悬停中删除蓝色背景。

我有一个 twitter 引导下拉菜单。

```
<ul class="dropdown-menu">
  <li>
    <a href="/users/sign_out">Sign out</a>
  </li>
</ul> 
```

在我的 overrides.css 中（在 bootstrap.min.css 之后加载）

```
.dropdown-menu > li > a:hover, .dropdown-menu > li > a:focus {
  color: red;
  background-color: white;
  background-image: none;
} 
```

但是，在 IE 中`background-color`并`background-image`不起作用，它仍然是 twitter bootstrap blue。`color`效果很好，当我悬停时它是红色的。

任何帮助是极大的赞赏！

这是一个带有我的示例的 jsfiddle：http: [//jsfiddle.net/tcpxq/](http://jsfiddle.net/tcpxq/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-10T07:11:18.847

```
.dropdown-menu > li > a:hover, .dropdown-menu > li > a:focus {
  color: red;
  background-color: white;
  background-image: none;
  filter: none;
} 
```

# linux - 为什么 Linux 程序的 .text 部分从 0x0804800 开始，而堆栈顶部从 0xbffffff 开始？

> ID：14795164
> 
> 赞同：5
> 
> 时间：2013-02-10T05:58:57.200
> 
> 标签：linux, assembly, virtual-memory

根据[Assembly Primer For Hackers (Part 2) Virtual Memory Organization](http://www.youtube.com/watch?v=aoEEH2EJdVY)，Linux 程序`.text`部分从 开始`0x0804800`，堆栈顶部从 开始`0xbffffff`。这些数字有什么意义？为什么不从`.text`（`0x0000000`或`0x0000020`过去`0x0000040`32 或 64 位`NULL`）开始？为什么不从堆栈顶部开始`0xfffffff`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T07:44:43.327

让我们先这么说吧：大多数时候，各个部分不需要放在特定的位置，更重要的是布局。如今，堆栈顶部实际上是随机的，请参见[此处](http://lxr.linux.no/#linux+v3.7.6/fs/binfmt_elf.c#L545)。

0x08048000 是 ld`PT_LOAD`在 Linux/x86 上启动第一个段的默认地址。在 Linux/amd64 上，默认值为 0x400000，您可以使用自定义链接描述文件更改默认值。您还可以将 .text 部分以`-Wl,-Ttext,0xNNNNNNNN`标志开头的位置更改为 gcc。要了解为什么 .text 没有映射到地址 0，请记住，为方便起见，NULL 指针通常映射到 ((void *) 0)。因此，将零页映射为不可访问以捕获 NULL 指针的使用是有用的。.text 开头之前的内存其实被很多东西占用了；举`cat /proc/self/maps`个例子：

```
$ cat /proc/self/maps 
001c0000-00317000 r-xp 00000000 08:01 245836     /lib/libc-2.12.1.so
00317000-00318000 ---p 00157000 08:01 245836     /lib/libc-2.12.1.so
00318000-0031a000 r--p 00157000 08:01 245836     /lib/libc-2.12.1.so
0031a000-0031b000 rw-p 00159000 08:01 245836     /lib/libc-2.12.1.so
0031b000-0031e000 rw-p 00000000 00:00 0 
00376000-00377000 r-xp 00000000 00:00 0          [vdso]
00852000-0086e000 r-xp 00000000 08:01 245783     /lib/ld-2.12.1.so
0086e000-0086f000 r--p 0001b000 08:01 245783     /lib/ld-2.12.1.so
0086f000-00870000 rw-p 0001c000 08:01 245783     /lib/ld-2.12.1.so
08048000-08051000 r-xp 00000000 08:01 2244617    /bin/cat
08051000-08052000 r--p 00008000 08:01 2244617    /bin/cat
08052000-08053000 rw-p 00009000 08:01 2244617    /bin/cat
09ab5000-09ad6000 rw-p 00000000 00:00 0          [heap]
b7502000-b7702000 r--p 00000000 08:01 4456455    /usr/lib/locale/locale-archive
b7702000-b7703000 rw-p 00000000 00:00 0 
b771b000-b771c000 r--p 002a1000 08:01 4456455    /usr/lib/locale/locale-archive
b771c000-b771e000 rw-p 00000000 00:00 0 
bfbd9000-bfbfa000 rw-p 00000000 00:00 0          [stack] 
```

我们在这里看到的是 C 库、动态加载器 ld.so 和内核 VDSO（内核映射的动态代码库，为内核提供了一些接口）。请注意，堆的开始也是随机的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T06:22:40.917

没有太大意义。

堆栈通常会向下增长（到低地址），因此将其放置在高地址并有一些空间向低地址扩展是有点合理的（但不是强制性的）。

至于程序段不使用地址0，这里有一些逻辑。首先，很多软件使用 0 表示`NULL`C 和 C++ 中的合法无效指针，不应取消引用。许多软件都有错误，因为它实际上试图在地址 0 处读取或写入内存而没有适当的指针验证。如果您使程序无法访问地址 0 周围的内存区域，您可以发现其中的一些错误（程序将在调试器中崩溃或停止）。此外，由于`NULL`是合法的无效指针，因此该地址不应有数据或代码（如果有，您无法区分指向它的指针`NULL`）。

在 x86 平台上，地址 0 周围的内存通常通过虚拟地址到物理地址的转换而变得不可访问。页表的设置方式是，虚拟地址 0 的条目不由物理内存页备份，并且页的大小通常为 4 KB，而不仅仅是几个字节。这就是为什么如果你取出地址 0，你也会取出地址 1 到 4095。在地址 0 处取出超过 4 KB 的地址空间也是合理的。原因是指向 C 和 C++ 中的结构的指针。你可以有一个`NULL`指向结构的指针，当您取消引用它时，尝试的内存访问发生在指针 (0) 中包含的地址加上您尝试访问的结构成员与结构的开头之间的距离（第一个成员为 0 , 其余大于 0)。

为程序选择特定地址范围可能还有其他一些考虑因素，但我不能代表所有这些因素。操作系统可能希望在程序本身中保留一些与程序相关的东西（数据结构），那么为什么不使用一个固定位置来靠近地址空间可访问部分的一端呢？

# jquery - jquery中鼠标事件的问题

> ID：14795168
> 
> 赞同：1
> 
> 时间：2013-02-10T05:59:46.547
> 
> 标签：jquery

我使用 JS API 创建了一个自定义 youtube 播放器。当我从播放器鼠标移出时，我试图淡出播放器控件，当我在播放器上鼠标移出时，我试图淡出播放器控件。

以下是我使用的 jQuery 代码。

```
$("#video-container, #ytPlayer").on('mouseover', function(){
    $('#video-controls').fadeIn(500);
}).on('mouseout', function() {
    $('#video-controls').fadeOut(500);
}); 
```

演示网址：[http ://staging.xhtml-lab.com/tik-o-talk/](http://staging.xhtml-lab.com/tik-o-talk/)

鼠标事件无法正常工作，请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:05:45.317

```
$("#video-container, #ytPlayer").on('mouseenter mouseleave', function( e ){
    var fadeOpacity = e.type == 'mouseenter' ? 1 : 0 ;
    $('#video-controls').stop().fadeTo( 500, fadeOpacity  );
}); 
```

Mouseenter 和 mouseout 是`hover`方法的兄弟，并且对于进入/离开元素事件更可靠，而不是添加一些`.stop()`来清除动画队列，并且奇妙的`fadeTo()`方法应该是我们秘诀的樱桃。

# php - 正则表达式匹配除开始标签以外的内容

> ID：14795171
> 
> 赞同：-1
> 
> 时间：2013-02-10T06:00:22.560
> 
> 标签：php, regex

尝试匹配标签的内容，排除任何其他标签。我正在尝试清理一些格式错误的 html。
简单地说：

```
 <td><ins>sample content</td>
    <td>other content</td>
</tr>
<tr>
    <td>remaining</ins>other copy</td> 
```

我想捕获“示例内容”、它之前的 html ( `<td><ins>`) 和它之后的 html，直到并排除`</ins`>

我相信我正在寻找的是对未来的负面展望，但我对这在 PHP 中的工作方式有点迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:25:54.913

由于您不知道未闭合的开始标签是什么，因此您正在创建一个简单的解析器。

每次遇到开放的尖括号时，您都需要遍历您的内容并停止`<`。这真的应该用**[AWK](http://en.wikipedia.org/wiki/AWK)**来完成；但是如果你必须使用 PHP，你会做这样的事情

```
<?php

    $file = file_get_contents('path/to/file');
    $file = preg_replace( '/[\n\r\t]/' , '' , $file );

    $pieces = explode( '<' , $file );
    if ( !$pieces[0] ) array_shift($pieces);

    /* Given your example code, $pieces looks like this
    $pieces = array(
        [0] => 'td>',
        [1] => 'ins>sample content',
        [2] => '/td>',
        [3] => 'td>other content',
        [4] => '/td>',
        [5] => '/tr>',
        [6] => 'tr>',
        [7] => 'td>remaining',
        [8] => '/ins>other copy',
        [9] => '/td>'
    );
    */

    $openers = array();//$openers = [];
    $closers = array();//$closers = [];
    $brokens = array();//$brokens = [];

    for ( $i = 0 , $count = count($pieces) ; $i < $count ; $i++ ) {
        //grab everything essentially between the brackets
        $tag = strstr( $pieces[$i] , '>' , TRUE );
        $oORc = strpos( $pieces[$i] , '/' );

        if ( $oORc !== FALSE ) {
            //store this for later (and maintain $pieces' index)
            $closers[$i] = $tag;
            $elm = str_replace( '/' , '' , $tag );
            if ( ( $oIndex = array_search( $elm , $openers ) ) && count($openers) != count($closers) ) {
                //more openers than closers ==> broken pair
                $brokens[$oIndex] = $pieces[$oIndex];
                $cIndex = array_search( $tag, $closers );
                $brokens[$cIndex] = $pieces[$cIndex];
                //remove the unpaired elements from the 2 arrays so count works
                unset( $openers[$oIndex] , $closers[$cIndex] );
            }
        } else {
            $openers[$i] = $tag;
        }//fi

    }//for

    print_r($brokens);

?> 
```

索引 in`$brokens`是`$pieces`出现格式错误的 html 的索引，它的值是有问题的标签及其内容：

```
$brokens = Array(
    [1] => ins>sample content
    [8] => /ins>other copy
); 
```

**警告**这不考虑像`<br />`或这样的自动关闭标签`<img />`（但这就是为什么你应该使用已经存在的许多软件应用程序之一）。

# asp.net - 从asp.net中的url获取一组值

> ID：14795173
> 
> 赞同：0
> 
> 时间：2013-02-10T06:00:43.483
> 
> 标签：asp.net, request

我是第一次使用 ASP.NET。

这是我的问题。我有一个 ASP.NET 页面。其他一些网站重定向到我的网页，网址是

```
http://localhost/mysite/newpage.aspx?request=424718&to%5B0%5D=111832&to%5B1%5D=1186313&to%5B2%5D=100009#_=_ 
```

实际上该网站发送的是一个请求值和一个 id 的数组

我必须在我的页面中获取这些值并显示它们。

我已经使用 @Request["request"] 来获取请求值。但我不知道如何获取 id 值（因为它是一个数组）。我尝试了@Request["to"]，它给出了null。

我也无法理解 url 编码.. 它应该是这样的

?request=3435&to=3495&to=435&to=3546

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:02:28.220

我相信您正在寻找的 id 和值在 URL 中。这称为查询字符串。

# 单一值

此代码将从查询字符串中输出每个键值对。如果有多个值，它们将用逗号分隔。

*C＃*

```
foreach (String key in Request.QueryString.AllKeys)
{
    Response.Write("Key: " + key + " Value: " + Request.QueryString[key]);
} 
```

*VB.NET*

```
For Each key as String in Request.QueryString.Allkeys
    Response.Write("Key: " & key & " Value: " & Request.QueryString(key))
Next 
```

如果您使用上面的代码，您会注意到为该`to`键输出的值的逗号分隔列表。这是因为`to`密钥被多次使用。

# 多个值

这将输出每个键和每个键的值。

```
foreach (String key in Request.QueryString.AllKeys)
{
    var values = Request.QueryString.GetValues(key);

    foreach (String item in values)
    {
      Response.Write("value: " + item + " ";
    }
} 
```

这将输出每个键，然后是每个键的每个值，即使有多个。

**参考**

*   [有没有办法将所有查询字符串名称/值对放入一个集合中？](https://stackoverflow.com/questions/2375372/is-there-a-way-to-get-all-the-querystring-name-value-pairs-into-a-collection)

# php - 简单的 html php dom 解析器一种从所有页面收集信息的方法？

> ID：14795177
> 
> 赞同：0
> 
> 时间：2013-02-10T06:01:49.417
> 
> 标签：php, html, parsing, dom

我想知道是否有可能使此代码搜索该网站的每个页面，以便从所有页面中提取每个图像 src。目前它只会从那一页中提取图像 src。我尝试使用 while 循环，但它只会一遍又一遍地重复主页上的相同结果。任何帮助都会很棒。

```
<?php
include_once('simple_html_dom.php');

//show errors
ini_set('display_errors', true);
error_reporting(E_ALL);

$html = file_get_html('http://betatv.net/');
$result=($html);
while($html = ($result)) {

// find the show img and echo it out
foreach($html->find('.entry-content') as $cover_img)
foreach($cover_img->find('img') as $cover_img_link)

//echo the images src
echo $cover_img_link->src .'<br>';
echo '<br>';

}
// clean up memory
$html->clear();
unset($html);

?> 
```

证明我拥有 betatv.net 我在首页添加了指向此问题的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:05:48.433

这是一个很好的页面爬虫示例：

[如何在 PHP 中制作一个简单的爬虫？](https://stackoverflow.com/questions/2313107/how-do-i-make-a-simple-crawler-in-php)

您只需要为它找到的每个链接使用您的代码。

此外，如果您拥有此页面，我敢打赌有更好的方法来查找所有图像，而不是从前端抓取它。

# c# - 使用c#删除xml中的单个节点

> ID：14795179
> 
> 赞同：1
> 
> 时间：2013-02-10T06:02:34.413
> 
> 标签：c#, .net, xml

我的xml文件如下：

```
 <Default>
      <CareSettingName>
         <Name>Hosp1/Name>
         <Name>Hosp2/Name>
         <Name>Hosp3/Name>
         <Name>Hosp4/Name>
       </CareSettingName>
      <DocNames>
         <Name>Doc1/Name> 
         <Name>Doc2/Name> 
         <Name>Doc3/Name> 
        </DocNames>
    </Default> 
```

使用以下代码，我尝试删除 Hosp4：

```
 XmlDocument xmlDoc = new XmlDocument();
 xmlDoc.Load(localXMLfile);
 XmlNode node = xmlDoc.SelectSingleNode("/Default/CareSettingName[Name='Hosp4']");

 node.ParentNode.RemoveChild(node);
 xmlDoc.Save(localXMLfile); 
```

当我运行它时，它会删除 CareSettingName 中的所有条目 - 而不是我正在寻找的单个条目。我看不到问题。有人能帮帮我吗？

有人可以帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:10:43.300

这是因为您正在选择`/Default/CareSettingName`（当它包含一个`Name`等于时`Hosp4`）。

尝试将您的 xpath 更改为：

```
/Default/CareSettingName/Name[.='Hosp4'] 
```

# jquery - nivo 滑块标题中的 z-index 问题

> ID：14795189
> 
> 赞同：0
> 
> 时间：2013-02-10T06:05:27.970
> 
> 标签：jquery, html, css

我正在尝试将“nivo 滑块标题”置于顶部，但我做不到。我从我的 html 结构和 css 代码中做了一个小提琴。如果您点击标题，javascript 会提醒您点击的元素属性，但它找不到标题。请帮忙！ [http://jsfiddle.net/BbHn4/](http://jsfiddle.net/BbHn4/)

```
<div id="sliderWrap">
  <div class="slider-wrapper theme-h0mayun">
    <div class="ribbon"></div>
    <div id="slider" class="nivoSlider" style="z-index:-1000">
      <img src="images/slider/176110test.png" data-thumb="images/slider/176110test.png" alt="" title="test" style="width: 850px; visibility: hidden; display: inline">
      <img class="nivo-main-image" src="images/slider/176110test.png" style="display: inline; width: 850px; height: auto">
      <div class="nivo-caption" style="display: block; position: absolute; top: 390px; left: 0px">test</div>
      <div class="nivo-directionNav">
        <a class="nivo-prevNav">Prev</a>
        <a class="nivo-nextNav">Next</a>
      </div>
    </div>
    <div class="nivo-controlNav">
      <a class="nivo-control active" rel="0">1</a>
    </div>
  </div>
</div>

#slider { 
background-color: #2E4ADC;
background-position: 50% 50%;
border: 5px solid #295C94;
border-radius: 15px;
position: absolute;
}

#slider { 
z-index: -1 !important;
}
.theme-h0mayun .nivoSlider { 
background: url() 50% 50% no-repeat #FFFFFF;
box-shadow: 0px 1px 5px 0px #4A4A4A;
height: 430px;
margin-bottom: 10px;
overflow: hidden;
position: relative;
width: 550px;
}

.nivoSlider { 
height: 300px;
margin: 0px auto 0px;
overflow: hidden;
position: relative;
width: 900px;
}
.theme-h0mayun .nivoSlider img { 
display: none;
left: 0px;
position: absolute;
top: 0px;
}

.nivoSlider img { 
left: 0px;
max-width: none;
position: absolute;
top: 0px;
}

.nivoSlider { 
z-index: -1;
}

.nivo-caption { 
background: #000000;
bottom: 0px;
box-sizing: border-box;
color: #FFFFFF;
display: none;
left: 0px;
opacity: 0.8;
overflow: hidden;
padding: 5px 10px;
position: absolute;
width: 100%;
z-index: 8;
}

.nivo-caption { 
height: 40px;
margin-left: auto;
margin-right: auto;
z-index: 2000000 !important;
} 
```

我应该补充的一件事是标题位置应该是绝对的，因为我的需要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:38:38.377

删除所有小于 0 的 z-index 内容。您将所有内容都推到后台。Z-index 在堆栈中工作，因此由于 .nivo-caption 的父级小于 0，所以它被放置在后台。无论你给它什么 z-index，它的所有孩子也将在后台。此外，您的上课提醒不正确，您两次提醒 ID。

Jfiddle：http: [//jsfiddle.net/BbHn4/1/](http://jsfiddle.net/BbHn4/1/)

```
<div id="sliderWrap">
  <div class="slider-wrapper theme-h0mayun">
    <div class="ribbon"></div>
    <div id="slider" class="nivoSlider">
      <img src="images/slider/176110test.png" data-thumb="images/slider/176110test.png" alt="" title="test" style="width: 850px; visibility: hidden; display: inline">
      <img class="nivo-main-image" src="images/slider/176110test.png" style="display: inline; width: 850px; height: auto">
      <div class="nivo-caption" style="display: block; position: absolute; top: 390px; left: 0px">test</div>
      <div class="nivo-directionNav">
        <a class="nivo-prevNav">Prev</a>
        <a class="nivo-nextNav">Next</a>
      </div>
    </div>
    <div class="nivo-controlNav">
      <a class="nivo-control active" rel="0">1</a>
    </div>
  </div>
</div>

#slider { 
background-color: #2E4ADC;
background-position: 50% 50%;
border: 5px solid #295C94;
border-radius: 15px;
position: absolute;
}

.theme-h0mayun .nivoSlider { 
background: url() 50% 50% no-repeat #FFFFFF;
box-shadow: 0px 1px 5px 0px #4A4A4A;
height: 430px;
margin-bottom: 10px;
overflow: hidden;
position: relative;
width: 550px;
}

.nivoSlider { 
height: 300px;
margin: 0px auto 0px;
overflow: hidden;
position: relative;
width: 900px;
}
.theme-h0mayun .nivoSlider img { 
display: none;
left: 0px;
position: absolute;
top: 0px;
}

.nivoSlider img { 
left: 0px;
max-width: none;
position: absolute;
top: 0px;
}

.nivo-caption { 
background: #000000;
bottom: 0px;
box-sizing: border-box;
color: #FFFFFF;
display: none;
left: 0px;
opacity: 0.8;
overflow: hidden;
padding: 5px 10px;
position: absolute;
width: 100%;
z-index: 8;
}

.nivo-caption { 
height: 40px;
margin-left: auto;
margin-right: auto;
z-index: 2000000 !important;
} 
```

# java - 引起：org.hibernate.MappingException：无法确定类型

> ID：14795191
> 
> 赞同：2
> 
> 时间：2013-02-10T06:05:36.527
> 
> 标签：java, hibernate, jakarta-ee, jpa

我有`JPA Entity`一个

```
@Entity
@Table(uniqueConstraints = @UniqueConstraint(columnNames = { "name", "market_version" }))
public class Market extends MutableEntity {

    @Column(nullable = false)
    private String name;
    @Column
    private String description;
    @Column(name = "market_version", nullable = false)
    private Version marketVersion;

    public Market(final String name, final String description) {
        this.name = name;
        this.description = description;
        this.marketVersion = new Version("1.0", VersionType.MAJOR, VersionStatus.ACTIVE);
    } ... snipped 
```

其中包含一个`Version`和`Version`类看起来像

```
public class Version {
    private String name;
    private VersionType type;
    private VersionStatus status;
    private DateTime publishedOn;
    private DateTime retiredOn;
    private Version parentVersion;

    public Version(@Nonnull final String name, @Nonnull final VersionType type, @Nonnull final VersionStatus status) {
        this.name = name;
        this.type = type;
        this.status = status;
    }
}

enum VersionType {
    MAJOR,
    MINOR,
    BOTH
}

enum VersionStatus {
    ACTIVE,
    RETIRED
} 
```

当我尝试`market`在测试中保存实体时，

```
 @Test
    public void testMarket() {
        final Market market = new Market("test", "test market");
        final MarketCrudService crudService = new MarketCrudService(jpaRule.getEntityManager());
        crudService.create(market);
    } 
```

我看到错误

```
Caused by: org.hibernate.MappingException: Could not determine type for: com.myorg.project.versioning.entities.Version, at table: Market, for columns: [org.hibernate.mapping.Column(market_version)] 
```

这里的问题到底是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:05:28.327

您要么必须像使用 Market 一样使用它自己的表使 Version 成为一个完整的实体，要么如果您想将其保存为 Market 的一部分，您应该使用 @Embeddable 注释使其可嵌入。

如果将其设为可嵌入的，则必须从 Market 的 marketVersion 字段中删除 @Column 注释。

# java - || 和 && 在单个 if 语句中

> ID：14795195
> 
> 赞同：-1
> 
> 时间：2013-02-10T06:06:55.317
> 
> 标签：java

我从一个程序中得到一些特殊的输出，其中我有一些这样的 if 语句：

```
if((m.getLeft(position).state == position.state.wall || m.getLeft(position).state == position.state.border) 
    && (m.getBelow(position).state == position.state.open || m.getBelow(position).state == position.state.visited)){
    check = true;
} 
```

我有 && 和 || 在相同的 if 条件下使用。如果 getLeft() 处的单元格是墙或边框并且 getBelow() 处的单元格是打开的或已访问，我希望布尔检查为真。

这段代码，我现在写的方式，是否正确地执行了这个检查？也许更重要的是，写这样的声明是不是很糟糕？把它分成两个陈述会更好吗？

我不确定我所看到的特殊性是由这些陈述还是其他原因引起的，我的问题更多是关于一般最佳实践。

编辑：感谢所有输入。我也有同样的怀疑（它太复杂了），这就是为什么我以我的方式提出我的问题。

***编辑（一年后，回首往事）***（更努力地重申以上内容）为了上帝的爱，不要写任何类似上述`if`声明的东西。如果您发现自己有类似的代码行，请记住[occam 的剃刀](http://en.wikipedia.org/wiki/Occam%27s_razor)可能比编程更适用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:16:30.077

在我看来，它执行得很好，但是阅读起来相当困难。

如果你要在 if 语句中使用`&&`一个 if 语句，你也可以嵌套一个新的 if 语句，在大多数情况下它本质上是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:19:41.993

分解您的布尔语句，它的内容如下：

```
(a == x_1 || a == x_2) && (b == x_3 || b == x_4) 
```

不幸的是，这与特定的布尔语句一样简单。有一些选项可以让疼痛变得更容易：

*   通过将代码分解为两个 if 块（如下面的重构所示），重构您的代码以不需要如此复杂的语句，或者
*   将其提取为方法并将返回值分配给`check`. 老实说，它要么是真的，要么是假的。

这是重构方法的示例。我不知道具体`m`是什么：

```
public boolean isCheck(M m, Position p) {
    boolean retVal = false;

    if(m.getLeft(p).state == p.state.wall || m.getLeft(p).state == p.state.border)) {
        if((m.getBelow(p).state == p.state.open || m.getBelow(p).state == p.state.visited))
            retVal = true;
         }
     }

     return retVal;
 }

 // call it as such

 check = isCheck(m, position); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T06:22:23.430

使用另一个`IF`insted 的 using `&&`：

```
if(m.getLeft(position).state == position.state.wall || 
   m.getLeft(position).state == position.state.border){
   if(m.getBelow(position).state == position.state.open || 
      m.getBelow(position).state == position.state.visited){
         check = true;
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T06:25:18.280

您的复杂`if`语句可以重构为：

```
if((m.getLeft(position).state == position.state.wall || m.getLeft(position).state == position.state.border)) {
    if((m.getBelow(position).state == position.state.open || m.getBelow(position).state == position.state.visited)){
        check = true;
    }
} 
```

感谢@Makoto：

```
check = ((m.getLeft(position).state == position.state.wall || m.getLeft(position).state == position.state.border)) && ((m.getBelow(position).state == position.state.open || m.getBelow(position).state == position.state.visited)); 
```

您的代码以及此代码“有效”。

但是，请记住，请遵守 Java 样式指南中提到的命名约定。我不知道`m`你的代码是什么。必须避免这种命名对象引用的方式。此外，`state`似乎是`public`您班级中的一个领域（假设）。还应避免此类公共访问字段。而是使用`getters()`和`setters()`。

# c# - 在使用 System.IO.Compression 提取文件期间强制替换现有文件？

> ID：14795197
> 
> 赞同：35
> 
> 时间：2013-02-10T06:07:15.310
> 
> 标签：c#

我正在使用以下代码提取文件夹中的所有文件

```
 using (ZipArchive archive = new ZipArchive(zipStream))
        {
            archive.ExtractToDirectory(location);
        } 
```

但是如果存在一个文件，那么它会引发异常。有什么方法可以告诉 Compression API 替换现有文件。

我发现一种方法是先获取所有文件名，然后检查文件是否存在并删除它。但这对我来说是非常昂贵的。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-10T07:40:48.557

我创建了一个扩展。任何对其改进的评论将不胜感激，

```
public static class ZipArchiveExtensions
{
    public static void ExtractToDirectory(this ZipArchive archive, string destinationDirectoryName, bool overwrite)
    {
        if (!overwrite)
        {
            archive.ExtractToDirectory(destinationDirectoryName);
            return;
        }

        DirectoryInfo di = Directory.CreateDirectory(destinationDirectoryName);
        string destinationDirectoryFullPath = di.FullName;

        foreach (ZipArchiveEntry file in archive.Entries)
        {
            string completeFileName = Path.GetFullPath(Path.Combine(destinationDirectoryFullPath, file.FullName));

            if (!completeFileName.StartsWith(destinationDirectoryFullPath, StringComparison.OrdinalIgnoreCase))
            {
                throw new IOException("Trying to extract file outside of destination directory. See this link for more info: https://snyk.io/research/zip-slip-vulnerability");
            }

            if (file.Name == "")
            {// Assuming Empty for Directory
                Directory.CreateDirectory(Path.GetDirectoryName(completeFileName));
                continue;
            }
            file.ExtractToFile(completeFileName, true);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-05-24T15:23:01.547

当文件夹不存在时，此代码不会引发异常，而是会创建文件夹。

```
public static class ZipArchiveExtensions
{
    public static void ExtractToDirectory(this ZipArchive archive, string destinationDirectoryName, bool overwrite)
    {
        if (!overwrite)
        {
            archive.ExtractToDirectory(destinationDirectoryName);
            return;
        }
        foreach (ZipArchiveEntry file in archive.Entries)
        {
            string completeFileName = Path.Combine(destinationDirectoryName, file.FullName);
            string directory = Path.GetDirectoryName(completeFileName);

            if (!Directory.Exists(directory))
                Directory.CreateDirectory(directory);

            if (file.Name != "")
                file.ExtractToFile(completeFileName, true);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-10T06:25:45.290

看看这个：[在 .NET 4.5 中轻松创建 zip 文件](http://www.codeproject.com/Articles/381661/Creating-Zip-Files-Easily-in-NET-4-5)。你的问题似乎得到了解决。或者，您也可以检查[DotNetZip](http://dotnetzip.codeplex.com/)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-21T08:50:02.210

由于我是 Linq 的忠实粉丝，Linq-ish 方式仅供参考：

```
using (var strm = File.OpenRead(zipPath))
using (ZipArchive a = new ZipArchive(strm))
{
    a.Entries.Where(o => o.Name == string.Empty && !Directory.Exists(Path.Combine(basePath, o.FullName))).ToList().ForEach(o => Directory.CreateDirectory(Path.Combine(basePath, o.FullName)));
    a.Entries.Where(o => o.Name != string.Empty).ToList().ForEach(e => e.ExtractToFile(Path.Combine(basePath, e.FullName), true));
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-02-10T06:32:09.160

您可以将文件提取到某个临时目录，然后使用“File.Copy”和 ovveride 选项将文件复制到目标目录

我知道这不是一个完美的解决方案，但是这样你就不需要检查文件是否存在

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-07-05T12:41:01.003

这是一个获取 zip 文件路径的方法。

基于接受的答案。

```
 public void ExtractZipFileToDirectory(string sourceZipFilePath, string destinationDirectoryName, bool overwrite)
    {
        using (var archive = ZipFile.Open(sourceZipFilePath, ZipArchiveMode.Read))
        {
            if (!overwrite)
            {
                archive.ExtractToDirectory(destinationDirectoryName);
                return;
            }

            DirectoryInfo di = Directory.CreateDirectory(destinationDirectoryName);
            string destinationDirectoryFullPath = di.FullName;

            foreach (ZipArchiveEntry file in archive.Entries)
            {
                string completeFileName = Path.GetFullPath(Path.Combine(destinationDirectoryFullPath, file.FullName));

                if (!completeFileName.StartsWith(destinationDirectoryFullPath, StringComparison.OrdinalIgnoreCase))
                {
                    throw new IOException("Trying to extract file outside of destination directory. See this link for more info: https://snyk.io/research/zip-slip-vulnerability");
                }

                if (file.Name == "")
                {// Assuming Empty for Directory
                    Directory.CreateDirectory(Path.GetDirectoryName(completeFileName));
                    continue;
                }
                file.ExtractToFile(completeFileName, true);
            }
        }
    } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-04-09T22:15:40.343

自 .NET Standard 2.1 起，只需在以下位置设置`overwriteFiles`为 true 即可： `ZipFile.ExtractToDirectory(string sourceFile, string destDir, Encoding entryNameEncoding, bool overwriteFiles)`

```
Example:
ZipFile.ExtractToDirectory("c:\\file.zip","c:\\destination_folder", Encoding.UTF8, true); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-21T05:23:15.427

嗨，我正在使用从 nugget 下载的 DotNetZip。我只是简单地使用这段代码。如果存在，这将自动替换目录中的文件。“静默覆盖”！

```
using (ZipFile archive = new ZipFile(@"" + System.Environment.CurrentDirectory + "\\thezipfile.zip"))
{
     archive.ExtractAll(@"" + System.Environment.CurrentDirectory, ExtractExistingFileAction.OverwriteSilently);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-04-06T20:52:37.400

从答案中重新制作的方法来创建所有文件夹

```
public static void ExtractToDirectory(this ZipArchive archive, string destinationDirectoryName, bool overwrite)
{
    if (!overwrite)
    {
        archive.ExtractToDirectory(destinationDirectoryName);
        return;
    }
    foreach (ZipArchiveEntry file in archive.Entries)
    {
        string completeFileName = Path.Combine(destinationDirectoryName, file.FullName);
        if (file.Name == "")
        {// Assuming Empty for Directory
            Directory.CreateDirectory(Path.GetDirectoryName(completeFileName));
            continue;
        }
        // create dirs
        var dirToCreate = destinationDirectoryName;
        for (var i = 0; i < file.FullName.Split('/').Length - 1; i++)
        {
            var s = file.FullName.Split('/')[i];
            dirToCreate = Path.Combine(dirToCreate, s);
            if (!Directory.Exists(dirToCreate))
                Directory.CreateDirectory(dirToCreate);
        }
        file.ExtractToFile(completeFileName, true);
    }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-25T18:13:02.920

当您有 zip 文件路径时，这很有用

```
public static class ZipArchiveHelper
    {
        public static void ExtractToDirectory(string archiveFileName, string destinationDirectoryName, bool overwrite)
        {
            if (!overwrite)
            {
                ZipFile.ExtractToDirectory(archiveFileName, destinationDirectoryName);
            }
            else
            {
                using (var archive = ZipFile.OpenRead(archiveFileName))
                {

                    foreach (var file in archive.Entries)
                    {
                        var completeFileName = Path.Combine(destinationDirectoryName, file.FullName);
                        var directory = Path.GetDirectoryName(completeFileName);

                        if (!Directory.Exists(directory) && !string.IsNullOrEmpty(directory))
                            Directory.CreateDirectory(directory);

                        if (file.Name != "")
                            file.ExtractToFile(completeFileName, true);
                    }

                }
            }            
        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-18T16:04:22.413

看起来躲避包含该代码块的唯一方法是在使用以下命令提取存档之前简单地删除文件`del`：

```
del (location + "\*")
using (ZipArchive archive = new ZipArchive(zipStream))
{
  archive.ExtractToDirectory(location);
} 
```

这不完全是 OP 想要的，但它很紧凑。

# java - java - 如何在java中深度克隆包含多个对象的对象列表？

> ID：14795199
> 
> 赞同：0
> 
> 时间：2013-02-10T06:07:26.113
> 
> 标签：java, clone, deep-copy

假设有一个包含 5 个 Employee 对象的 EmployeeList。

我想执行该 EmployeeList 的克隆以创建一个新的 EmployeeList，我想知道我应该怎么做？

所以以下是我的班级员工：

```
public class Employee {
private String name;
private String ssn;
private double salary;

private String name() {
    return name;
}

private void name(String name) {
    this.name = name;
}

private String ssn() {
    return ssn;
}

private void ssn(String ssn) {
    this.ssn = ssn;
}

private double salary() {
    return salary;
}

private void salary(double salary) {
    this.salary = salary;
}

void initialize(String initName, String initSsn, double initSalary) {
    this.name(initName);
    this.ssn(initSsn);
    this.salary(initSalary);
}

public Employee(String name, String ssn, double salary) {
    this.initialize(name, ssn, salary);
}

public Employee clone() {
    return new Employee(this.name, this.ssn, this.salary);
}
} 
```

以下是我的班级EmployeeList：

```
public class EmployeeList implements Cloneable {
private Employee[] list;
private int MAX = 5;

public EmployeeList() {
    list = new Employee[MAX];
    for (int i = 0; i < MAX; i++)
        list[i] = null;
}

public void add(Employee employee) {
    list[count] = employee;
}

public Object clone() {
    try {
        return super.clone();
    } catch (CloneNotSupportedException c) {
        System.out.println(c);
        return null;
    }
}   
} 
```

我缩短了代码，以便更容易看到。

我的问题是：

**当我执行复制时，我认为它复制了带有指向原始 Employee 对象的指针的 EmployeeList。因为当我更改原始对象时，新列表中的对象也会更改**

无论如何我可以解决这个问题吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:12:25.843

是的，它完全按照你的想法做了——它克隆了你的数组，包括它的值。在这种情况下，数组值是指向 Employee 实例的指针，因此您有第二个数组指向相同的Employees。它被称为浅拷贝。如果你想要一个完整的副本，你需要类似的东西

```
public Object clone() {
    try {
        EmployeeList copy = (EmployeeList) super.clone();
        if (list!=null) {
            copy.list = new Employee[list.length];
            for (int i=0; i<list.length; i++) {
                copy.list[i] = (Employee)list[i].clone();
            }
        } else {
            copy.list = null;
        }
        return copy;
    } catch (CloneNotSupportedException c) {
        System.out.println(c);
        return null;
    }
} 
```

您还需要使 Employee 可克隆。通常，当您处理对象图时，每个对象的 clone() 方法都需要递归地克隆其数据成员，直到您点击原语（例如您的`double`）或不可变类（一旦构造就无法更改的类 - 就像`String`您的情况一样）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:19:29.280

在你的`EmployeeList.cone()`, insted of calling`super.clone()`中，它执行浅拷贝，你应该迭代列表元素并调用`clone()`每个`Employee`对象，如下面的伪代码：

```
EmployeeList.clone() {
   EmployeeList newList = (EmployeeList) super.clone();
   int i=0;
   for (Employee emp: this.list){
      newList[i++] = (Employee) emp.clone();
   }
   return newList;
} 
```

不使用的其他选项`Cloneable`是使用`Serializable`接口并使用 Apache commons SerializationUtils 之类的实用程序来深度克隆对象[http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/SerializationUtils.html#克隆%28java.io.Serializable%29](http://commons.apache.org/lang/api-2.3/org/apache/commons/lang/SerializationUtils.html#clone%28java.io.Serializable%29)

# orchardcms - 覆盖果园博客模板

> ID：14795202
> 
> 赞同：0
> 
> 时间：2013-02-10T06:07:42.353
> 
> 标签：orchardcms

我正在构建一个自定义主题。我需要重写博客文章列表的呈现方式以匹配我想要的外观。我似乎无法弄清楚如何呈现博客文章的标题（或任何其他相关信息）。我所有的标记和硬编码信息都会呈现，但动态数据不会。

在我的主题文件夹“~/Views/Items/Content-BlogPost.cshtml”中：

```
<div class="media row-fluid">
    <div class="span1 hidden-phone">
        <!-- Date desktop -->
        <div class="date-wrapper"><span class="date-m">Jan</span> <span class="date-d">20</span> </div>
        <!-- Meta details desktop -->
        <p class="meta muted"><i class="icon-user"></i><a href="#">Alex</a> </p>
    </div>
    <!-- PROBLEM IS HERE!!!!!!!!!!! Title does not render! -->
    <div class="span11"><h1>@Display(Model.Content.Title)</h1>
        <div class="media-body">
            <div class="tags"><a href="#" class="tag">coding</a> / <a href="#" class="type">event</a></div>
            <h4 class="title media-heading"><a href="blog-post.htm">a nec in sed hac ultrices cursus</a></h4>

            <!-- Meta details mobile -->
            <ul class="inline meta muted visible-phone">
                <li><i class="icon-calendar"></i><span class="visible-desktop">Created:</span> Sun 20th Jan 2013</li>
                <li><i class="icon-user"></i><a href="#">Alex</a></li>
            </ul>
            <a href="blog-post.htm" class="media-object">
                <img src="img/blog/ape.jpg" alt="Picture of frog by Ben Fredericson">
            </a>
            <p>@Display(Model.Content)</p>
            <ul class="inline links">
                <li><a href="blog-post.htm" class="btn btn-mini"><i class="icon-circle-arrow-right"></i>Read more</a></li>
                <li><a href="blog-post.htm#comments" class="btn btn-mini"><i class="icon-comment"></i>50 Comments</a></li>
            </ul>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T03:42:37.103

感谢 Bertrand，我找到了这样做的方法。

模型.ContentItem.TitlePart.Title

# grails - 将样板代码移出控制器

> ID：14795203
> 
> 赞同：3
> 
> 时间：2013-02-10T06:07:44.003
> 
> 标签：grails, groovy

我实际上只是从 grails 开始，只是生成了一些脚手架。这里似乎有一些非常通用的代码将在每个控制器中重复。

1.  测试 get() 是否成功
2.  乐观锁定检查

您如何建议从控制器中删除它？理想情况下，我只想做一个

```
def personInstance = Person.get(id) 
```

然后让一个异常处理程序为每个控制器执行默认情况下在每个控制器中生成的操作。

```
 def update(Long id, Long version) {
    def personInstance = Person.get(id)
    if (!personInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'person.label', default: 'Person'), id])
        redirect(action: "list")
        return
    }

    if (version != null) {
        if (personInstance.version > version) {
            personInstance.errors.rejectValue("version", "default.optimistic.locking.failure",
                      [message(code: 'person.label', default: 'Person')] as Object[],
                      "Another user has updated this Person while you were editing")
            render(view: "edit", model: [personInstance: personInstance])
            return
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T09:12:03.990

如果要更改控制器的默认脚手架，只需发出“grails install-templates”命令。src/templates 文件夹中会创建很多文件。其中之一是“src/templates/scaffolding/Controller.groovy”

然后只需将“更新”功能修改为您需要的格式，并再次为您的域类生成控制器。

不过，您应该考虑是否真的不想使用乐观/悲观锁定，因为这会使您的应用程序在某种程度上不是事务性的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T08:48:18.120

看看[A Pattern To Simplify Grails Controllers](http://mrpaulwoods.wordpress.com/2011/01/23/a-pattern-to-simplify-grails-controllers/)，它为这些东西提出了一个 Groovy 模式。如果您想出一个不错的解决方案，请告诉我们，我自己也将做类似的事情。

# javascript - 为什么 jQuery 的 .data 方法会这样？（可能的错误？）

> ID：14795204
> 
> 赞同：5
> 
> 时间：2013-02-10T06:07:47.447
> 
> 标签：javascript, jquery, jquery-ui, object

这段代码最能说明我的困惑。

```
var nativeObj, jWrapped, jSelector;

//WIAT = "What I Am Thinking"
nativeObj = $( '#tableTab' ) [0];  //WIAT: unwrap the jQuery object created by the selector and get the native DOM object
jWrapped = $( nativeObj );  //WIAT: wrap up the native DOM object again... should be equal to $( '#tableTab' )
jSelector = $( '#tableTab' );   //WIAT: pass the jQuery object as reference to jSelector variable

// set the data with jQuery's .data method
$.data( jWrapped, 'key', { test: 12 } );    //WIAT: will be equivalant to using $( '#tableTab' ) and should attach the data to it
$.data( $( '#tableTab' ) [0], 'key', { test: 34 } );    //WIAT: using the native DOM obj, it shouldn't work with this, since it doesn't specify in the docs
$.data( $( '#tableTab' ) , 'key', { test: 56 } );   //WIAT: should rewrite the data in the element to { key: { test: 56} }

console.log( $.data ( jWrapped ) ); // {key:{test:12}}
console.log( $.data ( jWrapped[0] ) );  // {key:{test:34}}
console.log( $.data ( nativeObj ) );    // {key:{test:34}}
console.log( $.data ( $( nativeObj ), 'test' ) );  // undefined  
console.log( $.data ( $( '#tableTab' ) [0] ) );  // {key:{test:34}}
console.log( $.data ( $( '#tableTab' ) , 'test' ) ); // undefined 
```

哇，等等，**这是怎么回事**？

1.为什么我得到不同的结果？我只使用了 1 个选择器并引用了一个元素。

2.为什么对象引用`jWrapped`和对象`$( '#tableTab' )`产生的结果不一样？

3.Furthermore`jWrapped`并`jWrapped[0]`产生**不同的结果？**前者是一个 jQuery 包装对象，后者是一个原生 DOM 对象。本质上，它们**引用相同的元素但结果不同**！？？

```
//Now let's see what's inside the objects
console.log( $( '#tableTab' ) [0]);  // [object HTMLDivElement]         
console.log( nativeObj );  // [object HTMLDivElement]
console.log( $( nativeObj ) );  // {0:({}), context:({}), length:1}
console.log( jWrapped );   // {0:({}), context:({}), length:1, jQuery182021025872972076787:{toJSON:(function () {}), data:{key:{test:12}}}}
console.log( $( '#tableTab' ) );    // {length:1, 0:({}), context:({}), selector:"#tableTab"}
console.log( jSelector );   // {length:1, 0:({}), context:({}), selector:"#tableTab"} 
```

很好`nativeObj == $( '#tableTab' ) [0]` ，这是我的预期

哇，这很奇怪，为什么不`jWrapped == $( nativeObj )`呢？

不错，`jSelector = $( '#tableTab' )` 也是我期待的

鉴于这些数据，我会推断 $.data 必须接受本机 DOM 元素，但是

```
$( '#tableTab' ).data( 'key' , { test: 78 } );
console.log($( '#tableTab' ).data('key')); // 78 
```

嗯，对不起，控制台先生……不是很酷的人。

好吧，我非常困惑和沮丧，我讨厌 jQuery，我讨厌 Javascript，我讨厌 IE……好吧，不，我只是讨厌 IE，但那是另一回事了。为什么 jQuery 的行为如此奇怪？我觉得用 IE 玩得太多了……

我的猜测是它与 $.data 在 jQuery 中的工作方式有关，它实际上并不将数据附加到元素，而是将数据存储在它自己的对象中，并基于解析传递的数据来引用数据它。我发现错误了吗？

帮助。

我也看过[jQuery .data() 是如何工作的？](https://stackoverflow.com/questions/2764619/how-does-jquery-data-work)虽然它确实提供了一些很好的信息，但它仍然没有回答这里发生的事情，这是我真正的问题。虽然它确实证实了我的想法，即没有数据存储在元素中，而是存储在 jQuery 对象中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:50:20.203

查看 chrome 开发人员工具中的源代码，我在 1.9 版中的第 1564 行附近找到了此评论（[此处为 GitHub 源代码](https://github.com/jquery/jquery/blob/1.9-stable/src/data.js)，函数中的第 17 行`internalData`）

```
// Only DOM nodes need the global jQuery cache; JS object data is
// attached directly to the object so GC can occur automatically 
```

所以，这里发生的事情是，当你传入时`nativeObj`，它会将数据存储在 $.cache 中，否则它会将值存储到你传入的 jQuery 对象中。

看看这个小提琴：http: [//jsfiddle.net/tomprogramming/SNqwh/](http://jsfiddle.net/tomprogramming/SNqwh/)

我对您的原始示例进行了一些更改。第一个是我传入你在顶部设置的对象。第二个是您查询对象以获取一条名为“test”的数据，但这永远不会存在 - 您正在存储一个恰好具有名为 test 的属性的对象 - 在“key”的属性下.

在您的日志语句的末尾，我添加了我自己的，使用面向对象的性质来`$.data`代替。每次，我都会得到相同的结果。我的猜测是它使用每个 jQuery 对象的底层 dom 节点来访问全局缓存，在您的情况下，它的值为`{test:34}`.

`$.data`我确实同意这是出乎意料的行为，因为在新手用户看来您正在选择相同的元素，但我相信这只是和之间区别的一个下划线`$(selector).data()`。后者始终使用底层 dom 节点（因此始终是“正确的”），而前者将使用您传入的 jQuery 对象（如果可用）。

编辑：[这个小提琴](http://jsfiddle.net/tomprogramming/SNqwh/1/)再次强调了差异。我使用 设置值`$(selector).data()`，然后使用 再次将其拉出`$.data`。用于原始对象的“缓存”没有改变（作为对象本身），但对于底层 DOM 节点，全局缓存已经改变。

这里的教训：始终使用 DOM 节点，或`$().data`. 那是“最一致的”

# javascript - JavaScript / HTML：仅在 Opera 中禁用代码块

> ID：14795208
> 
> 赞同：1
> 
> 时间：2013-02-10T06:08:14.303
> 
> 标签：javascript, html, conditional, opera

我想告诉 Opera 忽略一段 JavaScript 代码，但我希望所有其他浏览器都能识别该代码，如下所示：

```
if NOT Opera:

<script type="text/javascript">

// Code

</script> 
```

或者更确切地说：

```
<script type="text/javascript">

 if NOT Opera:

// Code

</script> 
```

有解决办法吗？我将不胜感激您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:12:13.697

这应该可以解决问题：

```
<script type="text/javascript">
if(navigator.userAgent.indexOf("Opera") < 0 ) {
    // Code
}
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T06:13:57.040

您几乎只需要查看[`window.navigator.userAgent`变量](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.userAgent)。在其中您会找到一个字符串，其中包含有关您正在使用的浏览器的信息。我无法访问某个版本的 safari，所以我无法真正为您测试 -

```
if (window.navigator.userAgent.match('/safari/i')){
  // user is using safari
} 
```

参考 -

*   [`window.navigator.userAgent`](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.userAgent)
*   [`string.match`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/match)

* * *

请记住，这不是进行浏览器检测的最佳方法，并且不会阻止人们通过 safari 使用您的网站 - 您的 JavaScript 可供所有人查看和编辑，因此如果您认为这是一项安全功能，您可能需要重新考虑它。

我建议在服务器端检测用户浏览器（如果您使用的是 PHP，那么您可以使用`$_SERVER['HTTP_USER_AGENT']`），然后让服务器根据用户浏览器返回不同的 JavaScript 文件。

# c - 如何在一个运行时生成不同的随机数？

> ID：14795209
> 
> 赞同：0
> 
> 时间：2013-02-10T06:08:16.853
> 
> 标签：c, random, srand

考虑这段代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int main ()
{
  int ctr;
  for(ctr=0;ctr<=10;ctr++)
    {
      int iSecret;
      srand ( time(NULL) );
      printf("%d\n",iSecret = rand() % 1000 + 1);
    }
} 
```

它输出：256 256 256 256 256 256 256 256 256 256

不幸的是，我希望输出在该循环中打印 10 个不同的随机数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T06:10:45.863

将调用移动到循环`srand(time(NULL));`之前。`for`

问题是`time()`每秒只更改一次，但是您正在生成 10 个数字，除非您的CPU*非常*慢，否则生成这 10 个随机数不需要一秒钟。

因此，您每次都使用相同的值重新播种生成器，使其返回相同的数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:12:05.780

放在`srand ( time(NULL) );`循环之前。您的循环可能会在一秒钟内运行，因此您正在使用相同的值重新初始化种子。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int main ()
{
  int ctr;
  srand ( time(NULL) );
  for(ctr=0;ctr<=10;ctr++)
    {
      int iSecret;
      printf("%d\n",iSecret = rand() % 1000 + 1);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-23T15:08:24.957

将 srand(time(0)) 保持在 for 循环之外。它不应该在那个循环内。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int main ()
{
  int ctr;
  srand ( time(NULL) );
  for(ctr=0;ctr<=10;ctr++)
    {
      int iSecret;
      printf("%d\n",iSecret = rand() % 1000 + 1);
    }
} 
```

# iphone - 并非所有自定义按钮照片都显示在 Xcode 模拟器或设备中

> ID：14795212
> 
> 赞同：0
> 
> 时间：2013-02-10T06:09:08.360
> 
> 标签：iphone, xcode, png, simulator

我一直在为我的应用程序制作主屏幕按钮链接图像，以将用户带到不同的页面。当我终于完成了所有自定义照片的制作（所有相同的分辨率）时，我的设备/模拟器上只显示了两张，我终生无法弄清楚原因。[您可以在此处](http://cl.ly/image/3E1945040j3R)查看情节提要与模拟器的外观。它在我的 iPhone 4 上看起来完全一样，我调整了故事板中的所有视图控制器以仅与 3.5 英寸的视网膜兼容。如果有人知道发生了什么，我将非常乐意听到您的反馈。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:18:18.113

1）只是拉伸更多，这意味着只需通过拉动或拉伸它们来尝试增加图像的宽度和高度。

2）确保图像具有正确的命名

3）确保在项目中添加图像

# jquery - 显示带有自定义属性的引导工具提示

> ID：14795213
> 
> 赞同：0
> 
> 时间：2013-02-10T06:09:41.727
> 
> 标签：jquery, twitter-bootstrap

我有一个表格：

```
<form method="post" id="update_user_info" action="/Cabinet/Edit">
    <div class="modal-header">
        <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
        <h3 id="myModalLabel">Modal Header</h3>
    </div>
    <div class="modal-body">
        <div class="span4 clear_mp">
            <div class="span2 pull-left clear_mp">
                <label for="FirstName">Name</label>
                <input type="text" value="John" name="FirstName" id="FirstName" />
            </div>
            <div class="span1 pull-right clear_mp">
                <label for="CarMark">Car</label>
                <input type="text" value="SUBARU LEGACY" name="CarMark" id="CarMark" />
            </div>          

            <div class="span1 pull-right clear_mp">
                <label for="Email">Email</label>
                <input type="text" value="test@mail.com" name="Email" id="Email" data-val-email="The email is wrong" data-val="true" class="input-validation-error" />
            </div>
            <div class="span2 pull-left clear_mp">
                <label for="PhoneNumber">Phone number </label>
                <input type="text" value="" name="PhoneNumber" id="PhoneNumber" data-val-regex-pattern="(\+)?77[0-9]{9}" data-val-regex="The phone number is wrong" data-val="true" />
                <span data-valmsg-replace="true" data-valmsg-for="PhoneNumber" class="field-validation-valid"></span>
            </div>

        </div>            
    </div>
    <div class="modal-footer">
        <input type="submit" value="Save" id="update_user_info" class="btn btn-large btn-primary" />
    </div>
</form> 
```

我想做以下事情：
1\. 查找`input`哪些有类`input-validation-error`（在这里，我没有问题）
2\. 获取`data-val-*`（* 表示电子邮件或正则表达式或其他内容）属性的值，并显示带有此值的引导工具提示输入？

我怎样才能做到这一点？

[jsFiddle](http://jsfiddle.net/h3KEz/)上的标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:07:32.457

我不太确定，你想做什么。无论如何，这可能是起点：

```
$(document).ready(function(){
    $('input[data-val="true"]').each(function(i, elem){
        var theTitle = '';
        if ( $(elem).data('val-email') ) {
            theTitle = $(elem).data('val-email');
        } else if ( $(elem).data('val-regex') ) {
            theTitle = $(elem).data('val-regex');
        } else {
            theTitle = "Something is wrong here";
        }
        $(elem).tooltip({
            title: theTitle
        });
    });
}); 
```

这是一个[jsFiddle](http://jsfiddle.net/h3KEz/1/)。

正则表达式模式没有被执行，因为你没有在你的帖子中提到它。所以我假设，验证不是你的问题的一部分。如果是这样，您可能希望提供更多关于您正在尝试做什么的详细信息。

# forms - 如何告诉 Play Framework 2 和 Ebean 保存空字段？

> ID：14795220
> 
> 赞同：12
> 
> 时间：2013-02-10T06:10:52.663
> 
> 标签：forms, playframework, save, playframework-2.0, ebean

我正在使用 Play Framework 2 和 Ebean。当用户提交表单以编辑数据库中的现有对象时，它不会保存空值。我想这是为了防止用 null 覆盖不在表单中的字段。但是，如果他们需要，我怎样才能让他们将表单中的字段设置为 null 呢？

例如，用户编辑一个`Event`对象。 `Event.date`是 13 年 1 月 1 日。用户将`Event.date`表单中的字段设置为空并提交表单。在调试器中检查`Event.date`显示其值为 null。我保存`Event`. 如果我查看`Event`数据库中的 ，它的值仍然是 1/1/13。

编辑：似乎有一种方法。唯一的问题是它不适用于嵌套实体。有什么解决方案吗？

```
update(Object bean,Set<String> properties) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-07T12:09:10.273

`ebean.properties`在文件旁边创建一个文件`application.conf`并将此行添加到其中：

```
ebean.defaultUpdateNullProperties=true 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T12:38:49.090

`Null`Ebean 中的属性被视为已卸载，因此为防止意外将不应为空的属性置空，将它们排除在外。

因为这个在 Ebean 中的恢复`Date`（和其他领域）`null`是......很难:)。上次当我不得不做同样的事情（revert `Date`）时，我使用第二个查询来做......将`Date`（**之后** `event.update(Object o)`）归零：

```
public static Result updateEvent(){
    Form<Event> eventForm = form(Event.class).bindFromRequest();

    // do some validation if required...

    Event event = eventForm.get();
    event.update(event.id);

    if (eventForm.get().date == null){
       Ebean
         .createUpdate(Event.class, "UPDATE event SET date=null where id=:id")
         .setParameter("id", page.id).execute();  
    }

} 
```

另一方面，如果您使用比较来过滤事件（总是选择比 X 更新的事件），您可以将日期设置为非常“旧”的值，这也应该可以解决问题。在这种情况下，您将只更新一次对象。

```
private static final Date VERY_OLD_DATE = new GregorianCalendar(1, 0, 1).getTime();

public static Result updateEvent(){
    Form<Event> eventForm = form(Event.class).bindFromRequest();
    Event event = eventForm.get();
    if (eventForm.get().date == null){
        event.date = VERY_OLD_DATE;
    }

    event.update(event.id);
} 
```

在这种情况下，在您的 HTML 表单中，您需要清除表单字段的值（或只发送每个时间日期，如`0001-01-01`），但是即使使用 JavaScript 也可以轻松完成。

# asp.net - 插入带有详细信息视图的项目后更新 DropDownList 控件

> ID：14795228
> 
> 赞同：1
> 
> 时间：2013-02-10T06:12:20.843
> 
> 标签：asp.net, updatepanel, detailsview, html-select

我有一个更新面板，其中包括一个下拉列表控件和一个详细信息视图控件。下拉列表由 sqldatasource 控件填充，该控件从名为 Places 的表（只是场地列表）中获取数据。detailsview 仅是插入模式，并将位置插入到填充下拉列表的数据库表中。我试图允许某人在更新面板中插入一个新位置并同时刷新下拉列表，以便用户将看到下拉列表中的所有位置，包括他们刚刚使用详细信息视图添加的位置。现在，详细信息视图正在正确地将地点添加到数据库中，但没有更新下拉列表。如果我在添加新地点后刷新页面，下拉列表将更新为新地点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:27:59.257

免责声明：此答案是在问题中发布任何代码之前发布的。

这也假设两个控件都在更新面板内。

在 DetailsView 控件的更新或插入事件处理程序中，您需要添加以下代码：

```
MyDropDownList.DataBind() 
```

而且，最坏的情况是，如果更新面板给您带来问题，您可以这样做。不过，这并不是最好的性能。

```
Response.Redirect(Request.RawURL) 
```

# java - 有没有办法使用 ant 构建 UTF-8 源文件

> ID：14795234
> 
> 赞同：0
> 
> 时间：2013-02-10T06:13:43.427
> 
> 标签：java, ant, encoding

我的 java 文件中有硬编码的 UTF-8 字符串文字。Eclipse 正确地构建了这个应用程序，因此生成的类文件包含 UTF-8 格式的那些字符串。但是如果使用 ant build.xml，生成的类文件会包含编码不正确的字符串。

我已经尝试将 encoding="UTF-8" 添加到 javac 任务，但没有成功。

如何修复？

ps 我知道在源文件中硬编码字符串文字是非常糟糕的做法，但这是我需要它的情况，所以请不要建议将它提取到资源包中。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:19:44.917

正确的方法是

```
<javac ... encoding="UTF-8" ... /> 
```

如果生成的类文件中的字符串编码不正确，这意味着您的源编码可能不是 UTF-8，或者这些文件是由其他`javac`任务编译的，而不是您修改的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:49:28.857

编码必须与文件的编码相匹配。您对 utf-8 的猜测可能不正确。请检查其他[合适的编码名称](http://en.wikipedia.org/wiki/ISO_8859-1)，例如 iso-8859-1。

请查看[如何在 ant 的 build.xml 中设置 -Dfile.encoding 中的投票答案？](https://stackoverflow.com/questions/1339352/how-do-i-set-dfile-encoding-within-ants-build-xml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T20:05:42.960

这实际上不是原始问题的答案，但我不希望这个问题没有答案。也许版主会决定删除它。反正。

看起来这是使用 ant、jdk、windows 的特定组合时的某种错误。我挖得很深，无法以正常的方式解决这个问题。

所以我决定将字符串外部化到属性文件，这无论如何都是更好的做法......

通常 Mikhail Vladimirov 建议的解决方案应该可以正常工作，但这次不行。

# java - 仅在 Android webview 中加载 html

> ID：14795241
> 
> 赞同：1
> 
> 时间：2013-02-10T06:16:24.667
> 
> 标签：java, android, webview

我只想从 url 显示 html 并避免在用户单击 webview 上的任何链接时加载图像。我已经将 .setSupportMultipleWindows() 设置为 true。如何使用 loadDataWithBaseURL() 完成此操作？

# opencv - 轮廓的矩形近似

> ID：14795246
> 
> 赞同：3
> 
> 时间：2013-02-10T06:16:52.450
> 
> 标签：opencv, contour

经过一些颜色检测、二进制阈值处理，并使用 cvFindContours() 并在图像上绘制轮廓和检测到的蓝色矩形后，我有：

![在此处输入图像描述](../Images/56e8af5289f6111ab933ad08663005ab.png)

我的问题是一些简单的碰撞避免（中心的蓝色矩形不能撞到红色的“墙壁”）。将红墙轮廓近似为矩形将有助于我的目的。但是，使用简单的 cvBoundingRect 并在白色轮廓周围绘制红色矩形，我得到：

![在此处输入图像描述](../Images/7836250e0c87b6f5f2c4ea1140898529.png)

边缘被剪掉了一点，但您可能会了解我们对轮廓使用边界矩形的期望，因为整个轮廓用于近似边界矩形，因此是大的重叠矩形。我想要的是墙壁轮廓被划分为多个边界矩形，例如左墙近似为一个矩形，右墙，前墙等......如下面的说明性再现：

![在此处输入图像描述](../Images/b3cda23b53cb4cbbd526cee98139a783.png)

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:51:13.330

检测线（通常是 Hough、RANSAC）以及您拥有的有关问题的其他一些信息应该就足够了，甚至可能是矫枉过正。例如，从左下图开始，我们得到右下图。

![在此处输入图像描述](../Images/6b745fe474e787f3995215a46a16e0c2.png) ![在此处输入图像描述](../Images/a445d73a761fdf48255eac1fb276173c.png)

但是如果你在左边有上面的图片（你应该已经有了），那么问题已经解决了。只需绘制墙壁的内部和外部轮廓即可。

# php - 输出缓冲，分层？

> ID：14795247
> 
> 赞同：0
> 
> 时间：2013-02-10T06:17:11.890
> 
> 标签：php, apache, output-buffering

PHP 中的输出缓冲很有趣。它简化了很多事情。我在脚本顶部使用 ob_start() 并在底部使用 ob_get_clean() （或任何其他函数）。

在这两个调用之间，可以再次调用这些函数，而不会干扰父调用。

这种类型的代码有效吗？（它工作正常，但是......）这是一个好习惯吗？

```
<?php

ob_start(); //NOTICE !!!

echo '<p>echos of the top of the script</p>';
echo GetSomeOtherData(true);
echo '<p>echos after GetSomeOtherData()</p>';

$data = ob_get_clean(); //NOTICE !!!
echo $data;

//just a function to return something, with the help of output buffering
function GetSomeOtherData($toReturn)
{

    ob_start();     //NOTICE !!!
    echo '<p>This has been rendered inside a function</p>';
    $function_data = ob_get_clean();    //NOTICE !!!

    if($toReturn===true)
    {
        return $function_data;
    }
    else
    {
        //may be an error | return something else
        return '<p>An Error</p>';
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:21:30.980

老实说，我认为这没有任何问题。对 ob_start() 的每次调用都与 ob_get_clean() 调用相匹配，因此此类函数的使用对“父级”ob_start() 是完全透明的。如果对（对 ob_start() 和 ob_get_clean() 的调用）不匹配，这将是一个可怕的习惯——但只要它们匹配，它就不应该（也不会）给你带来任何麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:05:04.250

从[`ob_start()`](http://php.net/manual/en/function.ob-start.php)手册：

> 输出缓冲区是可堆叠的，也就是说，您可以在另一个 ob_start() 处于活动状态时调用 ob_start()。只需确保调用 ob_end_flush() 的次数适当。如果多个输出回调函数处于活动状态，则输出将按嵌套顺序依次通过每个回调函数进行过滤。

因此，假设 an`ob_end/get`将结束/返回匹配是完全有效的，`ob_start`例如：

```
ob_start();
  echo "<div class=outer>";
  ob_start();
    echo "<div class=inner></div>";
  $inner = ob_get_clean(); // <div class=inner></div>
  echo "</div>";
$outer = ob_get_clean();     // <div class=outer></div> 
```

# php - 使用 javascript 禁用 php 脚本中的链接

> ID：14795248
> 
> 赞同：-2
> 
> 时间：2013-02-10T06:17:26.650
> 
> 标签：php, javascript

您好我正在尝试使用 JS 函数禁用我的 PHP 脚本中的链接。我不确定为什么它不起作用。任何输入表示赞赏..

```
 <!DOCTYPE html>
 <html>
 <head>
 <script type="text/javascript">

function disable() 
{   document.getElementById("perfumes_web_link").innerHTML='<a href="javascript: void(0)"><http://www.google.com" rel="external"">Perfumes</a>';    
}

function enable() 
{       document.getElementById("perfumes_web_link").innerHTML='<a href="http://www.google.com" rel="external"">Perfumes<\/a>';

}       
</script>

</head>

<?php

$disable_link = 0 ;

echo '<h1>JavaScript to disable link if  set to zero</h1>';
echo '<li><span id="perfumes_web_link"></span><br>'."\n";
echo '<span class="perfumes_browser"><small>(Internet Explorer v6 or higher req.)    < /small></span></li>';

if ($disable_link = 1)
{echo '<script type="text/javascript">disable();</script>';
}
elseif ($disable_link = 0) 
{
echo '<script type="text/javascript">enable();</script>';
}

?>
</html> 
```

那我做错了什么？我应该在 JS 函数本身中使用 if/else 语句还是应该使用 true/false 而不是 0 和 1。

我应该使用 jQuery 或 Ajax 之类的其他东西吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:21:13.030

因为你在比较，使用`==`代替`=`，喜欢，改变

```
if ($disable_link = 1) 
```

到

```
if ($disable_link == 1) 
```

或者你可以这样做：

```
if ($disable_link == 1) {
  echo '<script type="text/javascript">disable();</script>';
}
else {
  echo '<script type="text/javascript">enable();</script>';
} 
```

如果您的意思是在新窗口中打开链接，请使用`target="_blank"`代替`rel="external"`，例如：更改

```
<a href="http://www.google.com" rel="external"">Perfumes<\/a> 
```

到

```
<a href="http://www.google.com" target="_blank">Perfumes</a> 
```

# linux - 在 Unix 中使用静态库的更好做法？

> ID：14795251
> 
> 赞同：1
> 
> 时间：2013-02-10T06:18:21.377
> 
> 标签：linux, unix, shared-libraries, system, static-libraries

我是 unix 新手。这是我第一次尝试在 Mac 上使用外部库（Ogre3D）。我不想将所有 .lylib 文件转储到 /usr/lib 目录中，因为我可能想在不需要它们时删除这些文件，并且很难将它们与其他库文件区分开来。当我在 /usr/lib/ 目录中创建一个名为 Ogre 的新文件夹来托管我的 Ogre 库文件时，似乎在使用 -l 标志编译文件时无法访问这些文件以指定位置。所以我想知道是否有必要将所有文件放在 /usr/lib/ 中，而不是将它们放入 /usr/lib/ 内的文件夹中？

我想知道是否可以将包含文件夹直接放入 /usr/includes/ 以便我可以访问头文件？或者我必须将所有标题放在 /usr/includes/ 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:24:16.673

> 所以我想知道是否有必要将所有文件放在 /usr/lib/ 中，而不是将它们放入 /usr/lib/ 内的文件夹中？

不，`-L<dir>`链接器标志使编译器`dir`与标准库路径一起搜索。

> 我想知道是否可以将包含文件夹直接放入 /usr/includes/ 以便我可以访问头文件？

这里还有更多选择。要么把它们放进去`/usr/include/foo`，然后

```
#include <foo/foo.h> 
```

（首选）或将它们放入`/usr/include/foo`，使用`-I/usr/include/foo`编译器标志，然后编写

```
#include <foo.h> 
```

# c++ - 随机访问时至少为 O(ln N) 且删除时至少为 O(ln N) 的数据结构 [NOT DUPLICATE]

> ID：14795253
> 
> 赞同：1
> 
> 时间：2013-02-10T06:18:39.757
> 
> 标签：c++, boost, data-structures, stl, complexity-theory

没有标准的容器可以开箱即用地提供这种保证，需要一些额外的操作（例如，像 Jerry Coffin 建议的那样），**它不是重复**的。

* * *

是否有任何现成的数据结构/容器，在随机访问时至少为 O(ln N)，在删除时至少为 O(ln N)？（stl/升压/等）

容器内元素的顺序并不重要。

此类操作可能会连续发生，例如：

1.  按索引随机访问（索引也是随机的， rand()%size() ）

2.  删除此项目

3.  按索引随机访问（索引也是随机的， rand()%size() ）

4.  删除此项目

ETC...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T06:23:03.890

由于您说排序无关紧要，因此您可以使用向量在恒定时间内完成这两项操作。

随机访问（显然）是恒定时间。

可以通过将要删除的元素与最后一个元素交换，然后删除最后一个元素来完成恒定时间内的删除。

# java - 如何在活动、序列化或 SingleInstance 之间共享对象？

> ID：14795258
> 
> 赞同：2
> 
> 时间：2013-02-10T06:19:07.197
> 
> 标签：java, android

我在数据模型类中有某些数据，并希望将此数据/对象共享给其他活动。单实例可能是一个不错的选择，但我想完成我之前的活动，因此会得到空指针。请建议最好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:29:31.713

最佳实践是为此使用意图对象，将包裹或序列化数据放入他的附加组件中。

静态是危险的，因为您必须始终为应用程序将被终止和恢复的情况做好准备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:39:42.757

使用序列化的最佳方法，SingleInstance 在这里不起作用，因为您必须完成您的活动。

```
Intent intent = new Intent(this, B.class);
ArrayList<String> data = new ArrayList<String>();
arrays.add("testing");
intent.putExtra("arrayList", data);
startActivity(intent); 
```

您可以使用您的对象而不是 String 和其他方面，您可以使用它检索。

```
ArrayList<String> arrayList =(ArrayList<String>) getIntent().getSerializableExtra("arrayList"); 
```

# c# - x64 CLR 的好处

> ID：14795266
> 
> 赞同：2
> 
> 时间：2013-02-10T06:20:01.153
> 
> 标签：c#, .net, 64-bit, clr, native

我脑海中的小过早优化错误告诉我，我应该将现有的 x86 C# 应用程序移植到 x64，因为它依赖的非托管 DLL 的 x64 版本。我知道答案可能是这样做，测试并看看会发生什么，但我想看看通常期望的好处是什么。我发现两到四年前有很多帖子抱怨 x64 CLR 速度比 x86 CLR 慢。

哪些领域可以期望使用 x64 代码加速？是否值得移植，除非您需要超过 2 GB 的内存？我的代码主要面向网络，处理中等大小的字节数组和加密算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:49:23.350

这个问题最简单的答案是分析 32 位和 64 位并比较它们。但是，由于您说您正在使用加密算法，如果您经常使用它们，我强烈建议您考虑使用 64 位。

加密算法通常对大于 32 位的值执行整数算术和/或逻辑运算，这在 64 位代码中要快得多。此外，它们通常可以比普通代码更多地利用处理器的扩展寄存器集（尽管某些超标量/缓存优化可能已经在一定程度上做到了这一点）。

最后，除了在您的特定情况下测试它之外，没有办法判断哪个会表现得更好，但是如果您使用的任何密码库都有 64 位版本，我相信值得一试。

# java - 解析通过 TCP 套接字服务器接收的 java 中的二进制数据

> ID：14795269
> 
> 赞同：0
> 
> 时间：2013-02-10T06:20:58.140
> 
> 标签：java, parsing, binary-data, serversocket

我有一个套接字服务器，它一直在监听传入的请求。接收到的数据将采用二进制字节数组的形式。数据格式是这样的。 **2321902321221200AA**

*   而**1**字节是数据开始
*   **4**位是版本
*   **4**位是数据返回类型
*   **5**个字节为产品代码
*   **2**字节数据长度

问题是，如何解析数据并分离参数。

提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:32:18.077

试试 java.io.DataInputStream：

```
 DataInputStream dis = new DataInputStream(in);
    byte b = dis.readByte();
    int version = (b >> 4) & 0xF;
    int returnType = b & 0xF;
    byte[] productCode = new byte[5];
    dis.readFully(productCode);
    int len = dis.readShort() & 0xFFFF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-24T13:27:04.663

如果使用[java 二进制块解析器](https://code.google.com/p/java-binary-block-parser/)，那么代码看起来像

```
class Parsed { 
  @Bin byte begin; 
  @Bin(type = BinType.BIT) int version; 
  @Bin(type = BinType.BIT) int returnType;
  @Bin byte [] productCode;
  @Bin(type = BinType.USHORT) int dataLength;
}
final Parsed parsed = JBBPParser.prepare("byte begin; bit:4 version; bit:4 returnType; byte [5] productCode; ushort dataLength;")
        .parse(new byte[]{0x23,0x21,(byte)0x90,0x23,0x21,0x22,0x12,0x00,(byte)0xAA})
        .mapTo(Parsed.class);

assertEquals(0x23, parsed.begin);
assertEquals(0x01, parsed.version);
assertEquals(0x02, parsed.returnType);
assertArrayEquals(new byte[]{(byte)0x90,0x23,0x21,0x22,0x12}, parsed.productCode);
assertEquals(0x00AA,parsed.dataLength); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:24:55.793

```
try {
    char [] cbuf = new char[16];
    char databegin = cbuf[0];
    char [] version = Arrays.copyOfRange(cbuf, 1, 6) 
    char [] product_typep = Arrays.copyOfRange(cbuf, 7, 12)
    char []data_lendth = Arrays.copyOfRange(cbuf, 13, 15)

} catch(Error e){
    System.out.println(e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T06:28:50.897

```
byte [] data = receiveData ();

int dataBegin = data [0];           // Once field is 1-byte, it is simple!
int version = data [1] & 0x0F;      // Use shift (>>>) and binary "and" (&)
int returnCode =                    // to extract value of fields that are
    (data [1] >>> 4) & 0x0F;        // smaller than one byte
byte [] productCode =               // Copy fixed-size portions of data
    new byte [] {                   // into separate arrays using hardcode
        data [2], data [3],         // (as here),  or System.arrayCopy
        data [4], data [5],         // in case field occupies quite
        data [6]};                  // a many bytes.
int dataLength =                    // Use shift (<<) binary or (|) to 
    (data [7] & 0xFF) |             // Combine several bytes into one integer
    ((data [8] & 0xFF) << 8);       // We assume little-endian encoding here 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T08:58:33.497

我会得到一些包装阅读器之王：

```
class Record {

   .....

   Record static fromBytes(byte[] bytes) {
       // here use ByteBuffer or DataInputStream to extract filds
       ......
   }
}

Record readNextRecord(InputStream in) {
    int len = in.read() && 0xFF;
    byte[] data = new byte[len];
    in.read(data);
    return Record.fromBytes(data)
}

{
  InputStream in = ....;
  Record r readNextRecord(in);
  process (r);
} 
```

当然，您需要添加错误处理。一般来说，对于应该运行可靠的东西，我会建议使用像 Grizzly 或 Netty 这样的 NIO 框架。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-10T06:27:56.923

您可以通过[ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)获取数据 ，然后通过应用掩码（主要是 AND、OR）来解析字节。

看看[这个问题](https://stackoverflow.com/questions/8274966/reading-a-byte-array-from-socket)

希望这可以帮助

# c# - 简单的 Linq 到 Xml 查询设置属性与元素（而不是 IEnumerable）

> ID：14795270
> 
> 赞同：1
> 
> 时间：2013-02-10T06:21:10.573
> 
> 标签：c#, xml, linq, linq-to-xml

我正在尝试编写一个简单的 Linq to Xml 查询来将`serverOpen`和`onlinePlayers`值提取到我的类中，该类分别具有两个属性`ServerStatus`和`Players`。

我正在处理的 xml 是这种简单的形式：

```
<eveapi version="2">
   <currentTime>2013-02-10 05:27:33</currentTime>
   <result>
     <serverOpen>True</serverOpen>
     <onlinePlayers>32723</onlinePlayers>
   </result>
   <cachedUntil>2013-02-10 05:28:39</cachedUntil>
</eveapi> 
```

我觉得这应该是一个非常微不足道的解决方案。XML 中只有一个结果，我希望能够非常简单地查询出来。

我已经尝试过（`Results`是我在 XDocument 中的 xml）：

```
var result = Results.Elements().Elements().First(); //successfully gets result
ServerStatus = result.Element("serverOpen").Value;  //this doesn't work
                       //null reference exception with .Value 
```

还有一些其他查询都返回 IEnumerables，而我从未能够成功提取这些值。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:27:30.467

在这里使用 xpath 会更容易一些，尤其是在没有结果的情况下。

```
var serverStatus = (bool?)doc.XPathSelectElement("/eveapi/result/serverOpen");
var onlinePlayers = (int?)doc.XPathSelectElement("/eveapi/result/onlinePlayers"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:28:35.593

好吧，我能够使用一个被忽略的 XDocument 方法`Single()`来获取单个`result`XElement。然后使用`Element()`从 XElement 中提取正确的`result`XElement。

```
var result = Results.Descendants("result").Single();
ServerStatus = result.Element("serverOpen").Value; 
```

如果有更好的方法或其他华丽的方法，请提交您自己的建议。

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:32:01.130

我不完全确定，但如果我正确理解 Linq，你已经有了你的对象。代替：

```
ServerStatus = result.Element("serverOpen").Value; 
```

做：

```
ServerStatus = result.Value; 
```

希望这可以帮助。

# php - 我的文件中的安全问题在哪里

> ID：14795280
> 
> 赞同：1
> 
> 时间：2013-02-10T06:23:12.650
> 
> 标签：php

每次我将此图像查看器上传到我的网站时，我都会被黑客入侵，即每次我上传此图像时，有人会破解我的网站任何更改密码。黑客总是上传 php shell。但没有办法上传文件。

```
include "./config.php";

@ $db = mysql_pconnect($mysql['host'], $mysql['user'], $mysql['pass']) or die(mysql_error());

if ($_GET['id'])
{
    $id = $_GET['id'];
}
else
{
    header( 'Location: http://404.html' ) ;
    exit;
}

$id = mysql_real_escape_string($id, $db);

//IT"S NOT WORKING!
if (!$db)
{
    die("error");
}
mysql_select_db($mysql['db']) or die(mysql_error());

$query = "SELECT * FROM `images` WHERE id='" . $id . "'";

$result = mysql_query($query) or die(mysql_error());

if (!$result)
{
    die("MySQL Select error");
}

$num_results = mysql_num_rows($result);
if ($num_results ==0)
{
header( 'Location: http:///404.html' );
exit;
}
else{
    $row = mysql_fetch_array($result);
    $downloads = $row['downloads'] + 1;

    $lastuse = time();

     $ss = mysql_query("select downloads from `images` where id='".$id."'") or die(mysql_error());
     $rr = mysql_fetch_array($ss);

    $query = "update `images` set downloads=downloads+1, lastuse='" . $lastuse . "' where id='".$id."'";
    $result = mysql_query($query);
    if (!$result)
    {
        die("MySQL update error");
    }

    //get current stats
    $query = "SELECT * FROM `stat_cache` WHERE 1";

    $result = mysql_query($query);

    if (!$result)
    {
        die("MySQL Select error");
    }
    $stat = mysql_fetch_array($result);

    //downloads update
    $downloads = $stat['downloads'] + 1;
    $query = "UPDATE `stat_cache` SET downloads='" . $downloads . "' WHERE 1";
    $result = mysql_query($query);
    if (!$result)
    {
        die("MySQL Update error");
    }
}
//Lets create the image, now.
if(!file_exists('./images/' . $id)) {
header( 'Location: http:///404.html' ) ;
    exit;
}
header('Content-type: image/jpeg');

$fp = fopen('./images/' . $id, 'r');

$contents = fread($fp, $maxfilesize);
fclose($fp);

echo $contents; 
```

谁能告诉我这里的安全问题在哪里？

# objective-c - 有没有办法限制 UITextView 中文本的宽度

> ID：14795282
> 
> 赞同：0
> 
> 时间：2013-02-10T06:23:17.297
> 
> 标签：objective-c, cocoa-touch, nsstring, size, uitextview

我有 UITextView ，我需要控制文本的开始和结束位置。

这是因为我使用气泡作为 UITextView 的背景图像，并且我需要在气泡图像中显示文本。

到目前为止，我已经能够控制文本开始使用的位置：

```
self.contentOffset = (CGPoint){.x = -10, .y = -10}; 
```

但我不知道如何控制文本结束的位置。目前，默认情况下它使用所有 UITextView 宽度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:51:07.523

随着文本的拉伸，气泡会变高吗？还是将气泡限制在 1 行？无论哪种方式，我认为你应该使用不同的方法来处理这个问题。

在 NSString 实例上使用`-sizeWithFont:constainedToSize:lineBreakMode:`来确定文本的大小。如果大小大于您允许的值，请停止允许输入（如果这是您的目标）或增加气泡的高度并允许文本在下一行继续。

您通常会在文本输入时执行这些重新计算，这意味着您将`-textView:shouldChangeTextInRange:replacementText:`根据上述建议实现 UITextViewDelegate 方法。

*- 或者 -*

仅限制 textView 的大小并设置 lineBreakMode 和 numberOfLines 也可能足以满足您的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:37:43.207

> # 定义 #define TEXT_LENGTH 25 // 无论你的限制是什么

`UITextView`每当用户键入新字符或删除现有字符时，都会调用此方法。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    NSUInteger newLength = (textView.text.length - range.length) + text.length;
    if(newLength <= TEXT_LENGTH)
    {
        return YES;
    } else {
        NSUInteger mySpace = TEXT_LENGTH - (textView.text.length - range.length);
        textView.text = [[[textView.text substringToIndex:range.location] 
                                            stringByAppendingString:[text substringToIndex: mySpace]]
                                         stringByAppendingString:[textView.text substringFromIndex:(range.location + range.length)]];
        return NO;
    }
} 
```

使用`replacementText` not `replacementString`in 方法，所以要注意replacementString 和replacementText 之间的区别。

# stata - 当存在缺失值时，如何获得两个变量的差异？

> ID：14795283
> 
> 赞同：0
> 
> 时间：2013-02-10T06:23:18.953
> 
> 标签：stata

我有两个变量`A`& `B`，我想获得`A - B`一个名为`C`. 为此，我使用了`generate C = A - B`. 但它在 , 中给出了一些缺失值`C`，其中一个`A`或`B`包含缺失值。

例如，如果缺失`A`时为 5000 ，则即使我想要5000，它也会缺失。`B``C``C`

所以我想将这些缺失值视为零并得到答案。我怎样才能在Stata中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T11:04:06.843

```
 gen C = cond(missing(A, B), min(A, B), A - B) 
```

这是简写

```
 gen C = A - B 
 replace C = min(A, B) if missing(A, B) 
```

这是缩写

```
 gen C = A - B 
 replace C = B if missing(A) 
 replace C = A if missing(B) 
```

有关`cond()`参见[http://www.stata-journal.com/article.html?article=pr0016的教程](http://www.stata-journal.com/article.html?article=pr0016)

当有一个值时，结果`min(A, B)`始终是单个非缺失值。（此外，`max(A, B)`事实上也是如此。）

如果两者都缺失，您没有说明您想要什么；这里的代码返回缺失作为差异。

如果您的缺失确实被视为零，请参阅`help mvencode`。

# html - LocalStorage 不适用于 Windows 8 Phone HTML 5 项目模板

> ID：14795286
> 
> 赞同：3
> 
> 时间：2013-02-10T06:23:42.600
> 
> 标签：html, windows-phone-8, local-storage

我正在使用 HTML 5 制作 Windows 8 Phone 应用程序。

我正在使用 localStorage 来保存一些小的值，如下面的代码所示，我已经在所有浏览器中测试了我的代码并且它工作得非常好，然后我创建了一个新的 HTML 5 项目并将我的代码添加到项目中并运行应用程序.

在下面的代码中，**我怀疑这里的 localStorage 不起作用，我想知道为什么？**！

```
$("#cow_btn").click(function(){
    localStorage.selected_category = "cow";
    window.location.href = 'animals.html';
}); 
```

**我是怎么得出这个结论的？**

1 - 我尝试在 localStorage.selected_category = "cow" 之前和之后发出警报；行，这里显示了第一个警报，但未显示第二个警报。

```
$("#cow_btn").click(function(){
    alert("hello1");
    localStorage.selected_category = "cow";
    alert("hello1");
    window.location.href = 'animals.html';
}); 
```

2 - 接下来我尝试删除该行本身，然后我的 window.location.href = 'animals.html'; 之前没有工作现在工作了。

```
$("#cow_btn").click(function(){
    window.location.href = 'animals.html';
}); 
```

这里可能是什么问题？我的整个应用程序可以在 Firefox、Chrome 甚至 Internet Explorer 10 上流畅运行。

请分享您对此的看法。如何使 localStorage 在我的 HTML 5 Windows 8 Phone 应用程序上工作？

*笔记：*

*我正在使用以下 js - jquery.min.js & jquery.mobile-1.2.0.min.js*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T20:55:34.207

我在我的 Windows 8 phonegap 应用程序中看到了完全相同的行为。该问题仅在使用 jquery mobile 时出现。您能否尝试在没有 jquery mobile 的情况下运行您的应用程序？

一旦我删除 jquery 移动本地存储就可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T08:54:42.607

WP8/IE10 完全支持 localStorage。要仔细检查这个试试这个

```
alert("typeof localStorage=" + typeof window.localStorage); 
```

PS。以下可能会帮助您解决问题

[Windows Phone 8 IE10 Javascript 调试](https://stackoverflow.com/questions/14567491/windows-8-phone-ie10-javascript-debugging)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-27T07:05:16.993

Windows Phone 将不支持您的编码风格。请务必使用 setItem / getItem 命令，如 WP8/IE10 中的 localStorage.key = value; 即使很难，也不支持命令，它们是 W3C 标准。

# templates - 我真的需要知道这些步骤 - 如何将我自己的 html 模板插入 umbraco？

> ID：14795287
> 
> 赞同：-2
> 
> 时间：2013-02-10T06:24:11.760
> 
> 标签：templates, umbraco

我真的需要知道这些步骤 - 如何将我自己的 html 模板插入 umbraco？

![在此处输入图像描述](../Images/0ff278342c8f642687ce0fc10c384364.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T21:41:11.590

'html 模板'和宏之间有区别。

您正在查看宏的概述。在左下角，您应该单击“设置”，然后打开“母版页”项。那是放置基本 Masterpage 的地方 - 这是网站的总体布局。

宏是您可以放在页面中以生成菜单或最新新闻项目列表的脚本片段。您甚至可以编写普通的 .NET 用户控件并像使用宏一样使用它们。宏可以存在于 XSLT 文件或脚本文件 (Razor-script) 或使用 UserControl。

我想你应该先阅读一个好的教程。这个看起来不错： http: [//www.blogfodder.co.uk/2010/5/13/building-your-first-umbraco-site-from-scratch](http://www.blogfodder.co.uk/2010/5/13/building-your-first-umbraco-site-from-scratch)

# c - C 关闭 STDOUT 永远运行

> ID：14795299
> 
> 赞同：0
> 
> 时间：2013-02-10T06:25:46.313
> 
> 标签：c, pipe, infinite-loop

我正在编写一些涉及使用管道的 C 代码。为了让子进程使用我的管道而不是 STDOUT 进行输出，我使用了以下几行：

```
 close(STDOUT);
    dup2(leftup[1], STDOUT); 
```

但是，它似乎进入某种无限循环或挂在这些线上。当我摆脱它时`close`，它会挂起`dup2`。

奇怪的是，同样的想法也适用于 STDIN 的前一行：

```
close(STDIN);
dup2(leftdown[0], STDIN); 
```

什么可能导致这种行为？

编辑：只是为了清楚......

```
#define STDIN   0
#define STDOUT  1 
```

编辑 2：这是一个精简的示例：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>
#include <string.h>
#include <sys/wait.h>

#define STDIN   0
#define STDOUT  1

main(){
    pid_t child1 = 0;
    int leftdown[2];
    if (pipe(leftdown) != 0)
        printf("ERROR");
    int leftup[2];
    if (pipe(leftup) != 0)
        printf("ERROR");

    printf("MADE PIPES");

    child1 = fork();
    if (child1 == 0){
        close(STDOUT);
        printf("TEST 1");
        dup2(leftup[1], STDOUT);
        printf("TEST 2");
        exit(0);
    }
    return(0);  
} 
```

这`"TEST 1"`条线永远达不到。唯一的输出是`"MADE PIPES"`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:28:42.503

至少*，*您应该确保该`dup2`函数返回新的文件描述符而不是`-1`.

它总是有可能给你一个错误（例如，如果`pipe()`之前调用失败）。此外，请绝对确定您使用的是正确的索引（0 和 1）——我之前被这个问题困扰过，这取决于您是在父进程还是子进程中。

* * *

根据您的编辑，我一点也不惊讶这`MADE PIPES`是最后一件事。

当您尝试 print`TEST 1`时，您已经关闭了`STDOUT`描述符，因此它将无处可去。

当您尝试打印`TEST 2`时，您已经`dup`编辑了`STDOUT`描述符，以便将其发送给父级，但您的父级不会读取它。

如果您将分叉代码更改为：

```
child1 = fork();
if (child1 == 0){
    int count;
    close(STDOUT);
    count = printf("TEST 1\n");
    dup2(leftup[1], STDOUT);
    printf("TEST 2 (%d)\n", count);
    exit(0);
} else {
    char buff[80];
    read (leftup[0], buff, 80);
    printf ("%s\n", buff);
    sleep (2);
} 
```

您会看到该`TEST 2 (-1)`行是由父级输出的，因为它是通过管道读取的。里面是您在关闭描述符后（但在您编辑它之前）尝试在孩子中的`-1`返回代码，这意味着它失败了。`printf``STDOUT``dup`

来自`ISO C11 7.20.6.3 The printf function`：

> 该`printf`函数返回传输的字符数，如果发生输出或编码错误，则返回负值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T10:41:43.103

多事要提，

当您使用 fork 时，它会导致几乎完整的父进程副本。`stdout`这还包括为标准输出流设置的缓冲区。流将`stdout`保存数据，直到缓冲区已满或明确请求从缓冲区/流中刷新数据。现在正因为如此，现在你已经`"MADE PIPES"`坐在缓冲区中了。当您关闭`STDOUT`fd 并`printf`用于将数据写入终端时，它只会将您的`"TEST 1"`和传输`"TEST 2"`到`stdout`缓冲区中，并且不会导致任何错误或崩溃（由于缓冲区足够）。因此，即使在复制`pipe`fd on之后`STDOUT`，由于缓冲输出`printf`甚至没有触及管道写入结束。最重要的是，请仅使用一组 API，即 *NIX 或标准 C lib 函数。确保你很好地理解了这些库，因为它们经常为某种优化而耍花招。

现在，要提到的另一件事是，确保在适当的过程中关闭管道的适当末端。这意味着如果说 pipe-1 用于从父级到子级进行通信，那么请确保您关闭父级中的读取端并在子级中写入端。否则，由于与文件描述符相关的引用计数，您的程序可能会挂起，您可能会认为在子进程中关闭读取端意味着管道读取端已关闭。但是，当您不关闭父级中的读取端时，您对管道的读取端有额外的引用计数，最终管道将永远不会关闭。

关于你的编码风格还有很多其他的东西，你应该更好地掌握它:) 你越早学会它就会节省你的时间。:)

错误检查是绝对重要的，至少使用 assert 来确保你的假设是正确的。

在使用`printf`语句记录错误或作为调试方法并且您正在更改终端 FD 时`(STDOUT / STDIN / STDERR)`，最好打开一个带有`*NIX`open 的日志文件并将错误/日志条目写入其中。

最后，使用`strace`实用程序将对您有很大帮助。此实用程序将允许您跟踪执行代码时执行的系统调用。这是非常直接和简单的。如果您有正确的权限，您甚至可以将其附加到执行过程中。

# java - 如何检查数组是否为空？

> ID：14795303
> 
> 赞同：14
> 
> 时间：2013-02-10T06:26:43.987
> 
> 标签：java, arrays

我编写了一个程序，如果数组集是 {1, 3, 6, 7, 12}，它将返回两个数字之间的最小间隙。换句话说，它将首先找到 3 和 1、6 和 3、7 和 6、12 和 7 之间的差异。在达到它们的差异之后，它会返回最小的差异，在我们的例子中是 1，因为 6-7 =1。例如，如果给定一个数组集 {60}，程序将返回 0。现在，如果我们有一个数组集 {}，其中没有任何内容，它也将返回 0。但是，我无法让我的程序返回 0！它抛出一个异常。我错过了什么？我应该如何解决这个问题？到目前为止，这是我的程序：

```
public static void main(String[] args) {
    int[] numberSet = {1, 3, 6, 7, 12};
    //int[] numberSet = {};
    System.out.println(minGap(numberSet));      
}

public static int minGap(int[] numberSet) {
    int[] differenceArray = new int[numberSet.length-1];
    int smallestNum = 0;
    if (numberSet.length < 2) {
        return 0;
    }
    else {
        for(int i = 0; i < numberSet.length-1; i++) {
            differenceArray[i] = numberSet[i+1] - numberSet[i]; 
        }       
        Arrays.sort(differenceArray);
        smallestNum = differenceArray[0];
        return smallestNum;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-10T06:27:52.323

检查数组是否为空：

```
int arr[] = null;
if (arr == null) {
 System.out.println("array is null");
} 
```

检查数组是否为空：

```
arr = new int[0];
if (arr.length == 0) {
 System.out.println("array is empty");
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-10T06:28:49.553

你的测试：

```
if (numberSet.length < 2) {
    return 0;
} 
```

应该在您在以下语句中分配该长度的数组之前完成：

```
int[] differenceArray = new int[numberSet.length-1]; 
```

否则`-1`，当`numberSet.length = 0`. 这很奇怪。因此，将您`if statement`作为方法中的第一个语句移动。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T06:27:59.400

你可以用它`yourArray.length`来找出数组中元素的数量。

在做之前确保 yourArray 不为空`yourArray.length`，否则你最终会得到`NullPointerException`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T07:25:28.323

您的问题是您没有测试数组的长度，直到为时已晚。

但我只想指出，解决这个问题的方法是阅读堆栈跟踪。

异常消息将清楚地告诉您正在尝试创建一个长度为 -1 的数组，并且跟踪将准确地告诉您代码的哪一行正在执行此操作。剩下的就是简单的逻辑......回到为什么你使用的长度是-1。

# php - 如何在 Codeigniter 的分页类中隐藏页面链接？

> ID：14795313
> 
> 赞同：3
> 
> 时间：2013-02-10T06:28:04.083
> 
> 标签：php, codeigniter, pagination

我试图达到以下效果：

```
Prev 1 of 4 Next 
```

我尝试设置以下`$config`选项：

```
$config['num_links'] = 0; 
```

但我收到以下错误：

> 您的链接数必须是正数。

我的配置选项设置为：

```
 $config['base_url'] = "/browse/tag/$tid/";
    $config['total_rows'] = $num_items;
    $config['per_page'] = $max_items;
    $config['first_link'] = FALSE;
    $config['last_link'] = FALSE;
    $config['uri_segment'] = 4;
    $config['use_page_numbers'] = TRUE;
    $config['display_pages'] = TRUE;
    $config['num_links'] = 0; # this doesn't work
    $config['prev_link'] = 'Previous';
    $config['next_link'] = 'Next';
    $config['cur_tag_open'] = '<span>';
    $config['cur_tag_close'] = " of $pages</span>";
    $config['full_tag_open'] = '<div class="previousnext">';
    $config['full_tag_close'] = '</div>'; 
```

如果我更改`num_links`为 1，我显然会得到：

```
Prev 1 2 of 4 3 Next 
```

如果我关闭，`display_pages`我会得到：

```
Prev Next 
```

在这个阶段，我想避免修改核心代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T10:27:17.060

如果您可以将数字链接放在 HTML 中退出但不显示，您可能只想使用 CSS 隐藏它们。

用于`$config['num_tag_open']`定义带有类的开放标签，例如：

```
$config['num_tag_open'] = '<div class="hidden">'; 
```

然后简单地添加一个 CSS：

```
.hidden { display: none; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T10:26:06.260

您需要通过在目录中创建一个文件来扩展分页类[，](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)[并](http://ellislab.com/codeigniter/user-guide/libraries/pagination.html)使用它来覆盖该函数，该函数负责回显页面列表。`MY_Pagination.php``application/libraries``create_links()`

## MY_Pagination.php

```
class MY_Pagination extends CI_Pagination{
    public function __construct(){
        parent::__construct();
    }

    public function create_links(){
        //copy and paste the logic from system/libraries/Pagination.php
        //but reimplement lines ~258-296 (CI 2.1.3) 
    }
} 
```

通过在应用程序目录中进行更改并*扩展*核心，您可以保护自己免受未来的核心升级（例如从 2.1.3 到 3.0）。

# xml - 添加图片链接

> ID：14795325
> 
> 赞同：1
> 
> 时间：2013-02-10T06:29:53.703
> 
> 标签：xml, database, image, xml-parsing, phpmyadmin

我想在 XML 中添加图像链接。

我正在做[一个需要连接生物通路的项目](http://www.kegg.jp/kegg-bin/show_pathway?scale=1.0&query=TLX&map=hsadd05202&scale=1.0&image=/share/www/mark_pathway136047628530435/hsadd05202.png&auto_image=&show_description=hide&multi_query=)。当我尝试链接时，源在上面的 URL 中。但是当我将鼠标悬停在特定文本上时，链接没有显示。该网站还提供 XML 数据。我不知道如何在图像中插入标记。

我正在使用 PhpMyadmin 进行数据库开发。

# java - java：39：找不到符号符号：方法指数（双，整数）否则{返回基数*指数（基数，指数-1）；}

> ID：14795327
> 
> 赞同：0
> 
> 时间：2013-02-10T06:30:03.053
> 
> 标签：java, methods, compiler-errors, symbols

```
import java.util.Scanner;

public class TaylorSin {

    /* I am trying to approximate sin(x) using Maclaurin Series...
    I am trying to get 1 term (1 Step Towards my approximation) the exponent divided by a factorial...
    However I get stuck in the calculateExponent method...
    Thank You in Advance! */

    public static void main(String[] args) {

        Scanner Keyboard = new Scanner(System.in);

        double base; int exponent, n;

        System.out.println();
        System.out.println("Enter Base: ");
        base = Keyboard.nextDouble();
        System.out.println("Enter Exponent: ");
        exponent = Keyboard.nextInt();
        System.out.println("Enter n: ");
        n = Keyboard.nextInt();
        System.out.println();

        System.out.println(calculateTerm(2.0, 4, 2));
    }       

    public static int calculateFactorial(int n) {

        int facto = 1;

        for (int i = 1; i <= n; i++)

        {facto = facto * i;}

        return facto;

    }

    public static double calculateExponent(double base, int exponent) {

        if(exponent == 0){return 1;}

        else { return base * exponent(base, exponent - 1);} //The mistake occurs on that line...    
    }       

    public static double calculateTerm(double base, int exponent, int n) {

        double term = (calculateExponent(base, exponent)/calculateFactorial(n));

        return term;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:57:14.050

代替

```
else { return base * exponent(base, exponent - 1);} //The mistake occurs on that line... 
```

你的意思

```
else { return base * calculateExponent(base, exponent - 1);} //The mistake occurs on that line... 
```

^(（即替换`exponent`为`calculateExponent`）)

方法名称`exponent`未定义。这就是错误消息试图告诉您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:31:22.880

你是说 Math.pow 吗？数学.exp？

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Math.html)

# c# - 自定义控件中的 AutoCompleteExtender

> ID：14795331
> 
> 赞同：2
> 
> 时间：2013-02-10T06:30:37.787
> 
> 标签：c#, asp.net, custom-controls, ajaxcontroltoolkit, autocompleteextender

我有一个带有动态创建的文本框的复合用户控件。在创建文本框并将其插入 ASCX 上的占位符时，我还动态创建了一个 AutoCompleteExtender，以刚刚创建的文本框为目标。如果我只添加一个 ACE，一切正常，但是一旦页面上存在多个 ACE，我就会收到以下错误：

> Microsoft JScript 运行时错误：无法获取属性“_behaviors”的值：对象为空或未定义

这是 JScript 错误的特定位置，包含在 jQuery 中。

> var c=a._behaviors=a._behaviors||[];

如果我在我的页面上创建虚拟文本框和 ACE，则相同的代码可以工作。但我需要在自定义控件中创建这些。

这表明我“做对了”——而且，因为我可以让 ONE ACE 在控件中正常工作。

我正在使用 Web 服务——不是页面方法——我意识到用户和自定义控件不能包含页面方法，它们必须在“页面”中。

我已经尝试了很多方法——我确保文本框都有唯一的 ID。ACE 都有唯一的 ID。我已经尝试过在定义的 ACE 上使用和不使用 BehaviorID（再次使用唯一 ID）。我知道 Web 服务有效，因为单个 ACE 运行良好。

我什至尝试将生成的 ACE 列表从控件传递到页面级别，并将它们插入到页面级别的占位符中。然后我得到 RTE 的文本框无法使用提供的 ID 找到。

在复合用户控件中添加多个 ACE 以及动态生成的文本框和扩展器的任何提示？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T13:30:34.147

这对我有用：

```
public partial class multiACEfromCodeBehind : System.Web.UI.Page
{
    public override void VerifyRenderingInServerForm(Control control)
    {
        /* Confirms that an HtmlForm control is rendered for the specified ASP.NET
           server control at run time. */
    }
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {   
            for(int i = 0; i < 10; i++)
            {
                // Create TextBox and its properties
                string textBoxID = String.Format("{0}_{1}", "AutoCompleteTextBox", i);
                TextBox textbox = new TextBox();
                textbox.ID = textBoxID;
                textbox.Width = new Unit(250);
                textbox.Attributes.Add("autocomplete", "off");

                // Create AutoCompleteExtender and its properties
                AutoCompleteExtender autoCompleteExtender = new AjaxControlToolkit.AutoCompleteExtender();
                autoCompleteExtender.TargetControlID = textBoxID;
                autoCompleteExtender.ServiceMethod = "GetCompletionList";
                autoCompleteExtender.ServicePath = "YourAutoCompleteWebService.asmx";
                autoCompleteExtender.CompletionInterval = 1500;
                autoCompleteExtender.CompletionSetCount = 10;
                autoCompleteExtender.EnableCaching = true;

                // Add created controls to the page controls collection
                this.Controls.Add(textbox);
                this.Controls.Add(autoCompleteExtender);
            }
        }
    }
} 
```

# python - 如何在python的堆中维护字典？

> ID：14795333
> 
> 赞同：20
> 
> 时间：2013-02-10T06:30:43.737
> 
> 标签：python, data-structures, heap

我有一本字典如下：

```
{'abc':100,'xyz':200,'def':250 .............} 
```

它是一个字典，键是实体的名称，值是该实体的计数。我需要从字典中返回前 10 个元素。

我可以写一个堆来做到这一点，但我不确定如何对键映射进行值，因为某些值将是相等的。

有没有其他数据结构可以做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-10T07:23:04.797

使用`heapq`你可能想做这样的事情：

```
heap = [(-value, key) for key,value in the_dict.items()]
largest = heapq.nsmallest(10, heap)
largest = [(key, -value) for value, key in largest] 
```

请注意，由于`heapq`仅实现最小堆，因此最好反转值，以便更大的值变得更小。

对于较小的堆，此解决方案会较慢，例如：

```
>>> import random
>>> import itertools as it
>>> def key_generator():
...     characters = [chr(random.randint(65, 90)) for x in range(100)]
...     for i in it.count():
...             yield ''.join(random.sample(characters, 3))
... 
>>> the_dict = dict((key, random.randint(-500, 500)) for key, _ in zip(key_generator(), range(3000)))
>>> def with_heapq(the_dict):
...     items = [(-value, key) for key, value in the_dict.items()]
...     smallest = heapq.nsmallest(10, items)
...     return [-value for value, key in smallest]
... 
>>> def with_sorted(the_dict):
...     return sorted(the_dict.items(), key=(lambda x: x[1]), reverse=True)[:10]
... 
>>> import timeit
>>> timeit.timeit('with_heapq(the_dict)', 'from __main__ import the_dict, with_heapq', number=1000)
0.9220538139343262
>>> timeit.timeit('with_sorted(the_dict)', 'from __main__ import the_dict, with_sorted', number=1000)
1.2792410850524902 
```

使用 3000 个值，它比`sorted`版本稍快，而`O(nlogn)`不是`O(n + mlogn)`. 如果我们将 dict 的大小增加到 10000，`heapq`版本会变得更快：

```
>>> timeit.timeit('with_heapq(the_dict)', 'from __main__ import the_dict, with_heapq', number=1000)
2.436316967010498
>>> timeit.timeit('with_sorted(the_dict)', 'from __main__ import the_dict, with_sorted', number=1000)
3.585728168487549 
```

时间可能还取决于您正在运行的机器。您可能应该分析哪种解决方案最适合您的情况。如果效率不重要，我建议使用该`sorted`版本，因为它更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-05-14T18:19:26.650

使用堆是具有时间复杂度的最佳解决方案：**O(nlogk)**。其中n是堆的长度，*k*在这里是10。

现在键映射的技巧是我们可以创建另一个类来比较键并定义魔术方法`__lt__()` `__gt__()`。覆盖 < , > 运算符

```
import heapq
class CompareWord:
  def __init__(self , word , value):
    self.word = word
    self.value = value

  def __lt__(self, other):   #To override > operator
    return self.value < other.value

  def __gt__(self , other):  #To override < operator
    return self.value > other.value

  def getWord(self):
    return self.word

def findKGreaterValues(compare_dict , k):
  min_heap = []
  for word in compare_dict:
      heapq.heappush(min_heap , CompareWord(word ,compare_dict[word] ))
      if(len(min_heap) > k):
          heapq.heappop(min_heap)   
  answer = []
  for compare_word_obj in min_heap:
      answer.append(compare_word_obj.getWord())

  return answer 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T06:54:03.197

为了获取前 10 个元素，假设数字在第二位：

```
from operator import itemgetter

topten = sorted(mydict.items(), key=itemgetter(1), reverse = True)[0:10] 
```

如果要按值排序，则 key 只需将其更改为`key=itemgetter(1,0)`.

至于数据结构，堆听起来像你想要的。只需将它们保留为元组，然后比较数字项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T06:50:02.893

如果字典保持**不变**，那么您可以尝试使用值作为键以相反的顺序对字典项进行排序，然后从中获取前 10 个元素，而不是尝试直接或通过[collections.Counter](http://docs.python.org/2/library/collections.html#collections.Counter)创建[heapq 。](http://docs.python.org/2/library/heapq.html)您需要从元组重新创建字典

```
>>> some_dict = {string.ascii_lowercase[random.randint(0,23):][:3]:random.randint(100,300) for _ in range(100)}
>>> some_dict
{'cde': 262, 'vwx': 175, 'xyz': 163, 'uvw': 288, 'qrs': 121, 'mno': 192, 'ijk': 103, 'abc': 212, 'wxy': 206, 'efg': 256, 'opq': 255, 'tuv': 128, 'jkl': 158, 'pqr': 291, 'fgh': 191, 'lmn': 259, 'rst': 140, 'hij': 192, 'nop': 202, 'bcd': 258, 'klm': 145, 'stu': 293, 'ghi': 264, 'def': 260}
>>> sorted(some_dict.items(), key = operator.itemgetter(1), reverse = True)[:10]
[('stu', 293), ('pqr', 291), ('uvw', 288), ('ghi', 264), ('cde', 262), ('def', 260), ('lmn', 259), ('bcd', 258), ('efg', 256), ('opq', 255)] 
```

如果您使用 heapq，要创建堆，则需要`nlogn`操作，如果您通过插入元素来构建堆，或者`logn`如果您堆化列表，则需要`mlogn`操作以获取顶部`m`元素

如果您正在对项目进行排序，则 Python 排序算法保证`O(nlogn)`在最坏的情况下（请参阅[TIM Sort](http://en.wikipedia.org/wiki/Timsort)）并且获取前 10 个元素将是一个常量操作

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-05-25T05:23:14.090

您可以在您的类中实现**lt**函数，您可以在其中指定应该比较哪些属性。

```
def __lt__(self, other):
   return self.attribute if self.attribute < other else other 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T07:33:42.457

想象一个像这样的字典（`a-z`a=1 和 z=26 的映射）：

```
>>> d={k:v for k,v in zip((chr(i+97) for i in range(26)),range(1,27))}
>>> d
{'g': 7, 'f': 6, 'e': 5, 'd': 4, 'c': 3, 'b': 2, 'a': 1, 'o': 15, 'n': 14, 'm': 13, 'l': 12, 'k': 11, 'j': 10, 'i': 9, 'h': 8, 'w': 23, 'v': 22, 'u': 21, 't': 20, 's': 19, 'r': 18, 'q': 17, 'p': 16, 'z': 26, 'y': 25, 'x': 24} 
```

现在你可以这样做：

```
>>> v=list(d.values())
>>> k=list(d.keys())
>>> [k[v.index(i)] for i in sorted(d.values(),reverse=True)[0:10]]
['z', 'y', 'x', 'w', 'v', 'u', 't', 's', 'r', 'q'] 
```

您还声明映射的某些值将相等。现在让我们更新`d`，使其具有`A-Z`映射 1-26 的字母：

```
>>> d.update({k:v for k,v in zip((chr(i+65) for i in range(26)),range(1,27))}) 
```

现在两者都`A-Z`映射`a-z`到`1-26`：

```
>>> d
{'G': 7, 'F': 6, 'E': 5, 'D': 4, 'C': 3, 'B': 2, 'A': 1, 'O': 15, 'N': 14, 'M': 13, 'L': 12, 'K': 11, 'J': 10, 'I': 9, 'H': 8, 'W': 23, 'V': 22, 'U': 21, 'T': 20, 'S': 19, 'R': 18, 'Q': 17, 'P': 16, 'Z': 26, 'Y': 25, 'X': 24, 'g': 7, 'f': 6, 'e': 5, 'd': 4, 'c': 3, 'b': 2, 'a': 1, 'o': 15, 'n': 14, 'm': 13, 'l': 12, 'k': 11, 'j': 10, 'i': 9, 'h': 8, 'w': 23, 'v': 22, 'u': 21, 't': 20, 's': 19, 'r': 18, 'q': 17, 'p': 16, 'z': 26, 'y': 25, 'x': 24} 
```

因此，对于重复映射，唯一合理的结果是返回具有值的键列表：

```
>>> [[k[x] for x,z in enumerate(v) if z==i ] for i in sorted(d.values(),reverse=True)[0:10]]
[['Z', 'z'], ['Z', 'z'], ['Y', 'y'], ['Y', 'y'], ['X', 'x'], ['X', 'x'], ['W', 'w'], ['W', 'w'], ['V', 'v'], ['V', 'v']] 
```

你可以在这里使用 heapq：

```
[[k[x] for x,z in enumerate(v) if z==i ] for i in heapq.nlargest(10,v)] 
```

您没有说明要对重复结果做什么，所以我假设您希望在结果列表保持 N 长的同时消除这些重复项。

这样做：

```
def topn(d,n):
    res=[]
    v=d.values()
    k=d.keys()
    sl=[[k[x] for x,z in enumerate(v) if z==i] for i in sorted(v)]
    while len(res)<n and sl:
        e=sl.pop()
        if e not in res:
            res.append(e)

    return res

>>> d={k:v for k,v in zip((chr(i+97) for i in range(26)),range(1,27))}
>>> d.update({k:v for k,v in zip((chr(i+65) for i in range(0,26,2)),range(1,27,2))})  
>>> topn(d,10)
[['z'], ['Y', 'y'], ['x'], ['W', 'w'], ['v'], ['U', 'u'], ['t'], ['S', 's'], ['r'], ['Q', 'q']] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-10T08:31:59.123

Bakuriu 的回答是正确的（使用 heapq.nlargest）。

但是，如果您对使用正确的算法感兴趣，*quickselect*使用与快速排序类似的原理，并且是由同一个人发明的：CAR Hoare。

但是，它的不同之处在于没有对数组进行完全排序：完成后，如果您要求前 n 个元素，那么它们位于数组中的前 n 个位置，但不一定按排序顺序。

与快速排序一样，它首先选择一个枢轴元素并旋转数组，以使所有 a[:j] 小于或等于 a[j] 并且所有 a[j+1:] 都大于 a[j]。

接下来，如果 j == n，那么最大的元素是 a[:j]。如果 j > n，则仅在枢轴左侧的元素上递归调用快速选择。如果 j < n 则在枢轴右侧的元素上调用 quickselect 以从中提取 n - j - 1 个最大的元素。

因为 quickselect 只在数组的一侧被递归调用（不像 quicksort 在两边都被递归调用），它在线性时间内工作（如果输入是随机排序的，并且没有重复的键）。这也有助于将递归调用转换为 while 循环。

这是一些代码。为了帮助理解它，外部 while 循环中的不变量是元素 xs[:lo] 保证在 n 最大的列表中，并且元素 xs[hi:] 保证不在 n 最大的列表中。

```
import random

def largest_n(xs, n):
    lo, hi = 0, len(xs)
    while hi > n:
        i, j = lo, hi
        # Pivot the list on xs[lo]
        while True:
            while i < hi and xs[i] >= xs[lo]:
                i += 1
            j -= 1
            while j >= lo and xs[j] < xs[lo]:
                j -= 1
            if i > j:
                break
            xs[i], xs[j] = xs[j], xs[i]
        # Move the pivot to xs[j]
        if j > lo:
            xs[lo], xs[j] = xs[j], xs[lo]
        # Repeat on one side or the other based on the location of the pivot.
        if n <= j:
            hi = j
        else:
            lo = j + 1
    return xs[:n]

for k in xrange(100):
    xs = range(1000)
    random.shuffle(xs)
    xs = largest_n(xs, 10)
    assert sorted(xs) == range(990, 1000)
    print xs 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-22T13:54:33.333

下面怎么样，应该是O(len(xs))。

您只需将前 n 个元素与其余元素中最大的一个交换即可。

```
 def largest_n(xs, n):
        for i in range(n):
            for j in range(i+1,len(xs)):
                if xs[j] > xs [i]:
                    xs[i], xs[j] = xs[j], xs[i]
        return xs[:n] 
```

# html - 灵活的缩略图溢出

> ID：14795334
> 
> 赞同：0
> 
> 时间：2013-02-10T06:30:46.340
> 
> 标签：html, css

我有一个包含 3 个图像的 div。根据 div 的大小，图像是灵活的，但是它们会溢出。它可以很好地在全屏模式下工作，但在全屏模式下效果不佳。

这是全屏之前的样子：![在此处输入图像描述](../Images/8631c77c80b746473862ee9f4cd63b64.png)

HTML：

```
 <div id="controls">
            <button id="playButton">Play</button>      
            <div id="defaultBar">
                <div id="progressBar"></div>
            </div>
            <button id="vol" onclick="level()">Vol</button>
            <button id="mute">Mute</button>
            <button id="full" onclick="toggleFullScreen()">Full</button>
       </div> 
       <div id="playlist" class="animated fadeInRight">
            <div class="thumb"><img src="TbGow.jpg" /></div>
            <div class="thumb"><img src="TbLast.jpg" /></div>
            <div class="thumb"><img src="TbTwo.jpg"/></div>
       </div> 
```

CSS：

```
#playlist{
    position:absolute;
    display:block;
    border:1px solid red;
    height: 90%;
    width: 30%;
    top: 0px;
    right: 0px;
    z-index: 2;
    float:right;
    padding: 2px;
    margin: 2px; 
    color:white;
    opacity: 0;  
}
.thumb img{
    max-width: 85%;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px; 
    border: 2px solid white;
    opacity:0.1;
} 
```

**基本上如何让子元素填充但适合父 div（全屏或全屏。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:01:11.190

尝试添加此规则

```
.thumb img{
max-height:30%;
} 
```

但它不适用于超过 3 张图像

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:14:54.487

**OP 说这对他** [有用 http://jsfiddle.net/xDx49/27/](http://jsfiddle.net/xDx49/27/)

如果您的目标是始终拥有三张图像并且图像的高度始终相同，那么您将不得不增加#playlist div 的高度。您应该能够完全删除 height 属性，然后它应该可以工作。

如果您将来想要超过三个图像或者它们可能更高，您可以尝试使用溢出属性，它可以在#playlist div 上放置一个滚动条。然后，您可以使用 css 为 IE 和 webkit 浏览器设置适当的滚动条样式，或者使用 jquery 插件来完全控制所有浏览器。

[http://jsfiddle.net/xDx49/5/](http://jsfiddle.net/xDx49/5/)

说明你的问题。当一个元素是绝对定位并且具有高度属性时，可能会发生内容溢出。

```
<div id="playlist">
    <div class="thumb">
        <img src="http://placehold.it/100x100" />
    </div>
    <div class="thumb">
        <img src="http://placehold.it/100x100" />
    </div>
    <div class="thumb">
        <img src="http://placehold.it/100x100" />
    </div>
</div>

#playlist {
    position:absolute;
    display:block;
    border:1px solid red;
    height: 90%;
    width: 30%;
    z-index: 2;
    padding: 2px;
    margin: 2px;
    color:white;
}
.thumb img {
    max-width: 85%;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border: 2px solid white;
} 
```

# javascript - 在元素数组中查找重复的元素系列

> ID：14795340
> 
> 赞同：4
> 
> 时间：2013-02-10T06:31:37.867
> 
> 标签：javascript, algorithm

我有一个这样的数组

```
 var randomArray = [1,2,1,1,1,1,0,2,1,2,3,10,12,54,10,12] etc.. 
```

我可以删除重复元素或在其中找到重复元素。但我想记录数组中重复的所有重复元素序列。这是我尝试过的代码，但它正在进入无限循环

```
 for (i = 0; i < randomLength; i++) {
    var cycle = [i],
    flag = 0,
    start = i;
    for (var j = i + 1; j < randomLength; j++) {
       if (randomArray[i] == randomArray[j]) {
         cycle.push(randomArray[j]);
         while (i <= j) {
            if (randomArray[i + 1] == randomArray[j + 1]) {
                cycle.push(randomArray[j + 1]);
            }
            i = i + 1;
            j = j + 1;
         }
         console.log(cycle);
       }
       i = start;
    }
   i = start;
 } 
```

它应该还给我。而且我不想用正则表达式做同样的事情

```
1,2
1,1
10,12

If array is ["a","d","z","e","g","h","a","d","z"] 
```

然后

```
output would be "a","d","z" 
```

它应该是最佳解决方案。请就此向我提出建议。至少更正我当前的代码..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T11:49:12.627

我使用了“trie”树数据结构（谷歌获取更多信息）。每个序列的树分支。因为 1,1,1 出现了两次，所以它找到了 1,1,1 作为解。（如果你想阻止一个数字在两个序列中重复，你需要针对树的每个节点计算唯一索引）。

这是代码：运行时应该类似于 O(N^2) ，可以稍微改进。

```
var randomArray = [1,2,1,1,1,1,0,2,1,2,3,10,12,54,10,12]

var solve = function(a) {
    var trie = {};
    var sequence_set = {};
    for (var start = 0; start < a.length - 1; start += 1)  {
        var sub_trie = trie[a[start]] || {};
        trie[a[start]] = sub_trie;
        sequence = "" + a[start]
        for (var i = start + 1; i < a.length; i += 1) {
            sequence += "," + a[i]
            sub_trie[a[i]] = sub_trie[a[i]] || {};
            sub_trie = sub_trie[a[i]];
            var sub_trie_count = sub_trie.count || 0;
            sub_trie.count = sub_trie_count + 1;
            if (sub_trie_count >= 1) {
                sequence_set[sequence] = "found";
                console.log(sequence);
            }
        }
    }
    solution = "";
    for (sequence in sequence_set) {
        solution += sequence + ", ";
    }
    console.log(trie)
    return solution;
} 
```

输出：

```
1,1 fiddle.jshell.net:37
1,1,1 fiddle.jshell.net:37
1,1 fiddle.jshell.net:37
2,1 fiddle.jshell.net:37
1,2 fiddle.jshell.net:37
10,12 fiddle.jshell.net:37
Object {0: Object, 1: Object, 2: Object, 3: Object, 10: Object, 12: Object, 54: Object}
 fiddle.jshell.net:45 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:40:52.407

```
var randomArray = [1,2,1,1,1,1,0,2,1,2,3,10,12,54,10,12];

for(var i = 0; i < randomArray.length; i++) {
    var item = randomArray[i];
    var str  = "";    

    while(randomArray[i] == item) {
        str = str + " " + randomArray[i];   
        i++;
    }

    document.write(str + "<br />");
} 
```

看到这个 JSFiddle：http: [//jsfiddle.net/Ucgtm/](http://jsfiddle.net/Ucgtm/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T08:00:43.320

这是我刚刚在 Haskell 中编写的解决方案。（你可以看到这种语言是多么的简洁。）下面的代码是一个例子，说明它是如何在解释器命令行中实现的。

```
import Data.List

findSequences list length
  | length >= 2 = repeatedPattern list length ++ findSequences list (length-1)
  | otherwise = []
    where repeatedPattern [] _ = []
          repeatedPattern list size
            | take size list `isInfixOf` drop size list = 
                take size list : repeatedPattern (tail list) size
            | otherwise = repeatedPattern (tail list) size 
```

Prelude> :load "findSequences.hs"
[1 of 1] 编译 Main (findSequences.hs，解释)
好的，模块已加载：Main。
*Main> let randomArray = [1,2,1,1,1,1,0,2,1,2,3,10,12,54,10,12]
*Main> findSequences randomArray (floor $(/2 ) $ fromIntegral (length randomArray))
[[1,2],[2,1],[1,1],[10,12]]
*Main> let array = ["a","d","z ","e","g","h","a","d","z"]
*Main> findSequences array (floor $(/2) $ fromIntegral (length array))
[["a" ,"d","z"],["a","d"],["d","z"]]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-20T08:02:38.033

**[这是我的解决方案](http://jsfiddle.net/kCqaG/1/)**，就像@robert king 的（我自己解决问题后发现的那样），除了我的解决方案是完整的（已经能够不计算重叠模式）和优化（尽我所能）。

此外，返回一个对象映射，因此您可以对其进行枚举，并且只提取大小为 X 的模式或重复 Y 次的模式等。

以下行（具有以下功能）

```
getPatterns([1,2,1,1,1,1,0,2,1,2,3,10,12,54,10,12]).showRepeated(); 
```

会导致这种情况；

```
1 2 found 2 times
2 1 found 2 times
1 1 found 2 times
10 12   found 2 times 
```

**代码**

```
function getPatterns(input, generateAll) {
    var patternMap = new getPatterns.presentation();

    var generated = [];
    var patternObj;
    var start;
    //for each item
    for (var index = 0; index < input.length; ++index) {
        //open a new slot for a new pattern start at this index
        generated.push('');

        start = 0;
        //unless told to generate all
        //skip patterns that cant possibly be repeated
        //(i.e. longer than half the input length)
        if (!generateAll && generated.length > input.length / 2)
            start = generated.length - Math.floor(input.length / 2);

        //test patterns we have generated for this index
        for (var index2 = start; index2 < generated.length; ++index2) {
            //generate a fresh lot of patterns for this index
            generated[index2] += ' ' + input[index];

            //unless told to generate all, dismiss patterns of length 1
            if (!generateAll && index2 == generated.length - 1)
                break;

            //try to fetch a pre-existing pattern, O(1)
            patternObj = patternMap[generated[index2]];
            //if this is a new pattern
            if (!patternObj) {
                //generate an object
                patternMap[generated[index2]] = {
                    lastSeen : index,
                    count : 1,
                    size : generated.length - index2
                };
                continue;
            }

            //unless told to generate all, skip patterns that overlap with themselves
            if (!generateAll && index - patternObj.lastSeen < patternObj.size)
                continue;

            //this pattern has repeated! update the object data
            ++patternObj.count;
            patternObj.lastSeen = index;
        }
    }

    return patternMap;
}
//just for a function prototype
getPatterns.presentation = function() {};
getPatterns.presentation.prototype = {
    showRepeated : function() {
        var patternObj;
        for (var pattern in this) {
            patternObj = this[pattern];
            if (patternObj.count > 1)
                console.log(pattern + '\tfound ' + patternObj.count + ' times');
        }
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T06:38:07.603

如果你想要它在 php 中，它是这样的：

在 php 之外创建一个数组`<script>`

`$array=array("1","2","2","1".....);`

`$result = array_unique($array);`

然后

`var randomArray = <?php echo json_encode($result) ?>;`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T06:49:50.017

我认为您的代码可能会进入无限循环，因为 i 和 j 在“while”循环内以相同的速率增加，因此“while”条件没有得到满足。

# c# - ExtractToFile 引发访问被拒绝错误？

> ID：14795341
> 
> 赞同：8
> 
> 时间：2013-02-10T06:31:58.683
> 
> 标签：c#, security, iis

首先，我清楚我正在使用带有 DefaultAppPool（集成 4.0）的 ASP.NET 4.5。我还为 DefaultAppPool 用户配置了匿名访问。我已授予对 DefaultAppPool 的所有访问权限。`System.Security.Principal.WindowsIdentity.GetCurrent()`方法给我相同的用户。但是当以下行运行时，它给了我`Access to the path 'XXXX' is denied.`例外。然后出于测试目的，我已将所有权利授予`EveryOne`用户，但仍然出现相同的错误。这是代码行。注意桁架

```
 using (ZipArchive archive = new ZipArchive(zipStream))
        {
            foreach (ZipArchiveEntry file in archive.Entries)
            {
                file.ExtractToFile(location,true);
            }
        } 
```

这是堆栈跟踪，

```
[UnauthorizedAccessException: Access to the path 'XXX' is denied.]
   System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath) +10793558
   System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost) +1352
   System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share) +65
   System.IO.Compression.ZipFileExtensions.ExtractToFile(ZipArchiveEntry source, String destinationFileName, Boolean overwrite) +96
   XX.XX.XX.ExtractZipFile(Stream zipStream, String location) in XX.cs:44
   XX.XX.XX.XX.XX.XX.ExtractZipFile(Stream zipStream, String location) in XXX.cs:17 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-10T08:19:07.337

在这种情况下，.NET 框架给了我错误的异常。问题是，我只是在传递位置（没有文件名的文件夹位置）。因此，在包含完整路径后，此方法有效。

# javascript - 有时 HTML5 画布可以工作并显示图像，有时在 IE9 上不能

> ID：14795344
> 
> 赞同：0
> 
> 时间：2013-02-10T06:32:03.357
> 
> 标签：javascript, html, canvas

有时 HTML5 画布可以工作并显示图像，有时它不能在 IE9 上用于此网页：[https](https://www.barnwellmd.com/PainDiagram/PainDiagram.html) ://www.barnwellmd.com/PainDiagram/PainDiagram.html 。它始终适用于 Firefox 和 Chrome。

谁能看到我做错了什么？

这是加载图像的js代码：

```
function init () {
// Find the canvas element.
canvas = document.getElementById('imageView');
if (!canvas) {
  alert('Error: I cannot find the canvas element!');
  return;
}

if (!canvas.getContext) {
  alert('Error: no canvas.getContext!');
  return;
}

// Get the 2D canvas context.
context = canvas.getContext('2d');
if (!context) {
  alert('Error: failed to getContext!');
  return;
}
var img=new Image();
img.onload = function(){
context.drawImage(img,0,0);
imageData = context.getImageData(0, 0, 700, 643);
pixels = imageData.data;
};
img.src="PainDiagram.png";
    ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:45:51.770

我认为如果你交换这两个代码块，就像我在下面所做的那样，它应该得到修复：

```
// Get the 2D canvas context.
context = canvas.getContext('2d');
if (!context) {
  alert('Error: failed to getContext!');
  return;
}

if (!canvas.getContext) {
  alert('Error: no canvas.getContext!');
  return;
} 
```

# applescript - 变量在重复循环中的行为不同

> ID：14795347
> 
> 赞同：0
> 
> 时间：2013-02-10T06:32:13.227
> 
> 标签：applescript

```
set randomString to "this is a random string" 
```

由于某些原因

```
set firstWord to the first word of randomString
set isThereTruth to firstWord = "this" 
display dialog isThereTruth 
```

返回 true 但

```
repeat with x in words of randomString
     display dialog x
     set isThisTruth to x = "this"
     display dialog isThisTruth
end repeat 
```

返回假

我对applescript很陌生，很抱歉这个愚蠢的问题，但是很难找到答案，也许其他人也遇到了这个问题。

我尝试测试以确保（尽管我无法想象为什么它不会是）该变量是一个字符串，但我很确定我测试变量类型的方法为什么不能真正起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:27:03.867

当您像您一样构建重复循环时，x 只是对单词的引用（类似于内存指针）。并且“对 x 的引用”，指向 x 在内存中的位置的指针，不等于“this”。要从参考中获取实际单词，您必须获取它的“内容”。因此，使用它，这将按您的预期工作......

```
repeat with x in words of randomString
    display dialog (contents of x)
    set isThisTruth to (contents of x = "this")
    display dialog isThisTruth as text
end repeat 
```

编写重复循环以便您首先获得实际值的另一种方法是这样的。所以任何一个都可以。

```
repeat with i from 1 to count of words of randomString
    set x to item i of (words of randomString)
    display dialog x
    set isThisTruth to x = "this"
    display dialog isThisTruth as text
end repeat 
```

请注意，“显示对话框”仅显示字符串。它不能显示布尔值、数字等。只能显示字符串。因此，当您“显示对话框 isThisTruth”时，applescript 正在修复代码中的错误。它将 isThisTruth 强制为一个字符串，然后显示它。

这就是为什么当您在重复循环中使用“显示对话框 x”时，它会显示正确的单词。它将“对 x 的引用”强制转换为字符串，然后显示它。

注意：我解释引用的方式是我对它们的看法。它并不完全那样工作，但我更容易以这种方式思考它们，结果是一样的。如果您想了解更多关于它们的信息，请[点击此处的链接](http://www.mactech.com/articles/mactech/Vol.22/22.03/AdvAppleScript/index.html)。

# android - Phonegap“hello world”应用程序不会在安卓模拟器中启动？

> ID：14795351
> 
> 赞同：4
> 
> 时间：2013-02-10T06:33:03.933
> 
> 标签：android, cordova, emulation

我一直在使用本教程： http: [//www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.edu.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.edu.html)

尝试使用 PhoneGap 制作“hello world”程序，但无法在模拟器上启动。我放弃并使用了PhoneGap下载附带的示例项目，我也无法将它加载到模拟器上。我已经用模拟器搞了一个小时，似乎没有任何效果。

我用它来安装 SDK：http: [//developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T16:27:20.367

我不确定为什么我的答案被删除了，但这与我遇到的完全相同的问题（新手试图遵循 phonegap android 教程，它不在模拟器中运行）。如果我这样做了

phonegap 运行安卓

它抱怨它无法在模拟器中运行它。我必须先创建“android 虚拟设备”：

android 创建 avd -n blah -t 1

然后上面的 phonegap 命令会启动模拟器并加载我的应用程序。

也许删除我答案的版主认为配置模拟器是与phonegap无关的明显步骤。他可能是对的，除了像我这样只安装了 android sdk 的 phonegap 新手（也可能是 topic starter），这一点都不明显，我们想知道为什么 hello world 没有在模拟器中弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:32:59.463

检查您的偏好。转到 window->preferences 并检查您是否提供了正确的 android sdk 路径..

试试[这个你管](http://www.youtube.com/watch?v=DfSL4KK4nzk&feature=youtu.be&t=13m28s "教程")视频来设置你的安卓。

# javascript - 在使用摘要身份验证对用户名和密码进行身份验证时，javascript 中出现错误

> ID：14795352
> 
> 赞同：0
> 
> 时间：2013-02-10T06:33:07.943
> 
> 标签：javascript, sencha-touch-2

在这里我想验证用户名和密码。这里我在控制台（valuesUser）中成功获取用户名，密码vlues。我尝试了以下代码，

```
Ext.define('Form.controller.Digestauth', {
    extend: 'Ext.app.Controller',
    requires:['RegisterForm.view.Login','RegisterForm.view.Main'],
    config:{
        refs:{
            loginform: '#loginform'
        },
        control: {
            '#loginButton': {
                tap: function(){
                    var valuesUser = this.getLoginform().getValues();
                    console.log(valuesUser);
                    console.log(valuesUser.userName);
                    $.Class("pl.arrowgroup.DigestAuthentication",{
                        MAX_ATTEMPTS : 1,
                        AUTHORIZATION_HEADER : "Authorization",
                        WWW_AUTHENTICATE_HEADER : 'WWW-Authenticate',
                        NC : "00000001", //currently nc value is fixed it is not incremented
                        HTTP_METHOD : "GET",
                        /**
                           * settings json:
                           *  - onSuccess - on success callback
                           *  - onFailure - on failure callback
                           *  - username - user name
                           *  - password - user password
                           *  - cnonce - client nonce
                           */
                        init : function(settings) {
                            this.settings = settings;
                        },
                        setCredentials: function(username, password){
                            this.settings.username = valuesUser.username;
                            this.settings.password = valuesUser.userPassword;
                        },
                        call : function(uri){
                            this.attempts = 0;
                            this.invokeCall(uri);
                        },
                        invokeCall: function(uri,authorizationHeader){
                            var digestAuth = this;
                            $.ajax({
                                url: uri,
                                uri:'http://localhost/sencha2011/RegisterForm/newuser.php?action=check',
                                type: this.HTTP_METHOD,
                                beforeSend: function(request){
                                    if(typeof authorizationHeader != 'undefined'){
                                        request.setRequestHeader(digestAuth.AUTHORIZATION_HEADER, authorizationHeader);
                                    }
                                },
                                success: function(response) {
                                    digestAuth.settings.onSuccess(response);
                                },
                                error: function(response) {
                                    if(digestAuth.attempts == digestAuth.MAX_ATTEMPTS){
                                        digestAuth.settings.onFailure(response);
                                        return;
                                    }
                                    var paramParser = new pl.arrowgroup.HeaderParamsParser(response.getResponseHeader(digestAuth.WWW_AUTHENTICATE_HEADER));
                                    var nonce = paramParser.getParam("nonce");
                                    var realm = paramParser.getParam("realm");
                                    var qop = paramParser.getParam("qop");
                                    var response = digestAuth.calculateResponse(uri, nonce, realm, qop);
                                    var authorizationHeaderValue = digestAuth.generateAuthorizationHeader(paramParser.headerValue, response, uri);
                                    digestAuth.attempts++;
                                    digestAuth.invokeCall(uri, authorizationHeaderValue);
                                }
                            });
                    },
                            calculateResponse : function(uri, nonce, realm, qop){
                                var a2 = this.HTTP_METHOD + ":" + uri;
                                var a2Md5 = hex_md5(a2);
                                var a1Md5 = hex_md5(this.settings.username + ":" + realm + ":" + this.settings.password);
                                var digest = a1Md5 + ":" + nonce + ":" + this.NC + ":" + this.settings.cnonce + ":" + qop + ":" +a2Md5;
                                return hex_md5(digest);
                            },
                            generateAuthorizationHeader : function(wwwAuthenticationHeader, response, uri){
                                return wwwAuthenticationHeader+', username="'+this.settings.username+'", uri="'+
                                    uri+'", response="'+response+'", nc='+
                                    this.NC+', cnonce="'+this.settings.cnonce+'"';
                            }
                    });
                    $.Class("pl.arrowgroup.HeaderParamsParser",{
                        init : function(headerValue) {
                            this.headerValue = headerValue;
                            this.headerParams = this.headerValue.split(",");
                        },
                        getParam: function(paramName){
                            var paramVal = null;
                            $.each(this.headerParams, function(index, value){
                                if(value.indexOf(paramName)>0){
                                    paramVal = value.split(paramName+"=")[1];
                                    paramVal = paramVal.substring(1, paramVal.length-1);
                                }
                            });
                            return paramVal;
                        }
                    });
                }
            }
        }
    }
}); 
```

要编写上述代码，我借助“ [http://marcin-michalski.pl/2012/11/01/javascript-digest-authentication-restful-webservice-spring-security-javascript-ajax/](http://marcin-michalski.pl/2012/11/01/javascript-digest-authentication-restful-webservice-spring-security-javascript-ajax/) ”链接摘要- auth.js 文件

我收到错误为：未捕获的 ReferenceError：$ 未定义。任何人都可以帮我这样做。提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:00:31.633

您需要包含 jQuery。它定义了一个全局`$`变量，这是您抱怨的错误。可能是从调用到[`$.ajax`](http://api.jquery.com/jQuery.ajax/).

在此处查看“入门”部分：http: [//docs.jquery.com/](http://docs.jquery.com/)

# php - 具有多个变量的 PHP HTTP 请求？

> ID：14795354
> 
> 赞同：1
> 
> 时间：2013-02-10T06:33:49.680
> 
> 标签：php, api, url, variables, httprequest

嗨，我想将每个 HTTP 请求的 3 个变量发送到另一个站点并希望得到响应。检查.php：

```
<html><body> 

  <form action="response.php" method="post">
   <p>Variable1: <input type="text" name="var1" /></p>
   <p>Vairable2: <input type="text" name="var2" /></p>
   <p><input type="submit" /></p>
  </form>
</body></html> 
```

响应.php：

```
<?php 

 $url = "http://www.testpage/api.php?authcode=";

 $apikey = "xxxxxxx" ;

 $request = new HTTPRequest($url$apikey&$var1&$var2, HTTP_METH_POST); //req not work !
 $request->send();                                                    //nothing happens
 response = $request->getResponseBody();                              //only
                                                                      //got
 echo "$response ";                                                   //500 error

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:41:27.220

尝试这个：

```
$url = "http://www.testpage.com/api.php";
$r = new HTTPRequest($url, HTTP_METH_POST);
$r->addPostFields(array('authcode' => $apikey, 'var1' => '', 'var2' => ''));
$r->send(); 
```

将数组中的空字段替换为 var1 和 var2 的值。

此外，您可能希望使用 cURL 而不是内置的 HTTP 处理程序。 [PHP + curl、HTTP POST 示例代码？](https://stackoverflow.com/questions/2138527/php-curl-http-post-sample-code)

# tomcat - 如何在 Windows 7 中为 tomcat 6 设置类路径

> ID：14795356
> 
> 赞同：0
> 
> 时间：2013-02-10T06:34:11.687
> 
> 标签：tomcat, classpath

```
 please guide me how to set the classpath of tomcat in windows 7 
```

我正在尝试运行一个 servlet 我也尝试为 selvlet-appi.jar 手动设置类路径

设置 classpath=C:\tomcat\lib\servlet-api.jar 有时它可以工作，有时不请帮助我。我是 Servlet 的初学者

当我尝试编译 sevlet 时显示 4 个错误

packege servlet 不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T14:24:02.357

如果要手动设置类路径，请转到安装的 tomcat 文件夹和 lib->servlet-api.jar 复制路径并粘贴到环境变量 java 路径继续并以结尾；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:50:22.013

您在 tomcat/lib 中找到的每个 jar 都将自动位于所有 Web 应用程序的类路径中。此外，您的 webapp 的 WEB-INF/lib 中的每个 jar 以及您的 webapp 的 WEB-INF/classes 中的任何类（在适当的文件夹中）都将可用。

如果您不需要其他任何东西（可能就是这种情况），您将不需要手动配置任何类路径。

对于您提到的编译器问题：您需要类路径中提到的目录中的类/库。由于您没有提及您的开发环境是什么，因此很难说要做什么。如果您在您选择的 IDE 中创建了一个合适的 Web 应用程序项目，那么一切都应该自动存在

# javascript - html中的Javascript写入文件

> ID：14795357
> 
> 赞同：5
> 
> 时间：2013-02-10T06:34:25.167
> 
> 标签：javascript, html, file

我正在尝试从 html 表单写入文件，但是 javascript 的写入部分不执行任何操作。

只有脚本的验证部分似乎在工作。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<script LANGUAGE="JavaScript">
function Write(input1, input2)
{
    var fso =  new ActiveXObject("Scripting.FileSystemObject");  
    var s = fso.OpenTextFile("C:\\test.txt", true);
    s.WriteLine(input1 + "," + input2);
    s.Close();
}

function validateForm() {
    var x1=document.userform.pwd.value;
    var x2=document.userform.re_pwd.value;
    if (x2 == x1){
        Write(document.userform.user.value, document.userform.pwd.value);
    }
    else{alert("Passwords are not the same, Re-enter password");}
}
</SCRIPT>

<head>

    <link rel="stylesheet" href="css/screen.css" media="screen" />
</head>
<body>

<div id="container">

        <h2>Create a new account <?php echo "It works!"; ?></h2>
        <form id="form1" NAME="userform" METHOD="GET" ONSUBMIT="return validateForm()" ACTION="">   

            <fieldset><legend>Create a new Account</legend>
                <p class="first">
                    <label for="username">Username</label>
                    <input type="text" name="user" size="30" />
                </p>
                <p>
                    <label for="password">Password</label>
                    <input type="password" name="pwd" size="30" />
                </p>
                <p>
                    <label for="repassword">Re-enter Password</label>
                    <input type="password" name="re_pwd" size="30" />
                </p>

            </fieldset>             

            <p class="submit"><button type="submit" value="Submit">Signup</button></p>          

        </form> 

</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T08:57:47.443

我拿出我的一般`.HTA`读/写例程，把它们放在这里给你。

*   删除`XHTML`东西并切换到`HTML 5 doctype`
*   清理标记以`HTML5`符合要求。
*   修复了`ID`输入中的 's。`label`元素按 ID 而非名称匹配。
*   `return false`在您的表单中添加了一个。

一般注意事项：

*   只有构造函数应该以大写字母开头。
*   这必须以`.HTA`文件名保存
*   不用说，仅此`windows`而已。

* * *

```
<!doctype html>
<html>

<script>

var ie_writeFile = function (fname, data) {
    var fso, fileHandle;
    fso = new ActiveXObject("Scripting.FileSystemObject");
    fileHandle = fso.CreateTextFile(fname, true);
    fileHandle.write(data);
    fileHandle.close();
  };

var ie_readFile = function (fname) {
    try {
      fso = new ActiveXObject("Scripting.FileSystemObject");
      var fso, filehandle, contents;
      filehandle = fso.OpenTextFile(fname, 1);
      contents = filehandle.ReadAll();
      filehandle.Close();
      return contents;
    } catch (err) {
      return null;
    }
  };

function Write(input1, input2)
{
    var s = input1 + "," + input2;
    ie_writeFile("test.txt", s);
}

function validateForm() {
    var x1=document.userform.pwd.value;
    var x2=document.userform.re_pwd.value;
    if (x2 == x1){
        Write(document.userform.user.value, document.userform.pwd.value);
    }
    else{alert("Passwords are not the same, Re-enter password");}
}
</script>

<head>

    <link rel="stylesheet" href="css/screen.css" media="screen">
</head>
<body>

<div id="container">

        <h2>Create a new account <?php echo "It works!"; ?></h2>

        <!-- return false added to keep the form from reloading -->

        <form id="form1" NAME="userform" METHOD="GET" ONSUBMIT="return validateForm();return false" ACTION="">   

            <fieldset><legend>Create a new Account</legend>
                <p class="first">
                    <label for="username">Username</label>
                    <input type="text" name="user" id="user" size="30">
                </p>
                <p>
                    <label for="pwd">Password</label>
                    <input type="password" name="pwd" id="pwd" size="30" />
                </p>
                <p>
                    <label for="repassword">Re-enter Password</label>
                    <input type="password" name="repassword" id="repassword" size="30" />
                </p>

            </fieldset>             

            <p class="submit"><button type="submit" value="Submit">Signup</button></p>          

        </form> 

</div>
</body>
</html> 
```

# php - Lambda and colon in while statement for PHP?

> ID：14795362
> 
> 赞同：7
> 
> 时间：2013-02-10T06:35:48.037
> 
> 标签：php

What does the below code mean (it's a lambda in the while-statement, then a colon after)? Coming from JavaScript, I have no idea what that means or even how to search for that. Can anyone help explain this?

```
while ($query->have_posts()): $query->the_post(); 
```

Btw I got this from WordPress but is the syntax pure PHP?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T06:38:34.383

This is a less-common while structure:

```
while (condition):
    doSomething();
endwhile; 
```

This is not how things are traditionally done, but it is valid syntax. See [while loop syntax](http://www.php.net/manual/en/control-structures.while.php) for more details, as well as [alternative control syntax](http://www.php.net/manual/en/control-structures.alternative-syntax.php).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:39:31.680

It is an [alternative syntax](http://www.php.net/manual/en/control-structures.alternative-syntax.php) for control structures.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T06:53:05.210

In general, this:

```
while (expression) :
  //actions
endwhile; 
```

is the same as this:

```
while (expression) {
  //actions
} 
```

which is what you're probably used to. The bracketted expression `$query->havePosts()` is just the condition of the `while`, and the sentence after the colon is the first line within the `while`.

# php - 向其他页面发送数据时的空响应

> ID：14795364
> 
> 赞同：0
> 
> 时间：2013-02-10T06:36:16.313
> 
> 标签：php, jquery

我对 jquery 有问题 响应为空，

```
<input id="bill_customer" name="bill_customer" onChange="showBalance()"/>
<span id="CustomerBalance" style="color:#F00"></span> 
```

在这里，我有输入类型来插入客户名称并将请求发送到其他页面以获取该客户的余额，并将其插入到具有 id 名称的 span`CustomerBalance`

当我向此页面代码发送请求以获取余额时

```
$name = $_POST['name'];

$sql = "SELECT * FROM customer where customer_Name ='$name' and customer_StorID='$ausers_ID'";
$query = mysql_query($sql) or die ("Error Query [".$strSQL."]");

while($row = mysql_fetch_assoc($query)){
echo $row['customer_Balance'];
} 
```

我们必须把余额寄给我，但我拿不到。为什么！！

这是函数 jquery

```
function showBalance(){
 $.ajax({
  url: "getBalance.php",
  type: "POST",
  data: { name : $("#bill_customer").val() },
  dataType: "html",
  success : function(data){
   $("#CustomerBalance").html(data);
  }
 });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:38:41.703

你可以试试这样的东西吗？：

```
$name = $_POST['name'];
*$balances = array();*

*$sql = "SELECT customer_Balance FROM customer where customer_Name ='$name' and customer_StorID='$ausers_ID'";*
$query = mysql_query($sql) or die ("Error Query [".$strSQL."]");

while($row = mysql_fetch_assoc($query)){
    *$balances[] = $row['customer_Balance'];*
}
*echo json_encode($balances);* 
```

您必须尽可能在 SELECT 语句中使用字段名称，因为它非常快。

您也必须使用 mysqli（或 PDO）函数，因为 mysql 将来可能会被删除（而且非常不安全）。

最后，您可以使用 fetch_all 之类的函数，这样您就可以省略 while。像这样的东西：

```
echo json_encode($query->fetch_all(MYSQLI_ASSOC)); 
```

# javascript - JavaScript：使用 AngularJS

> ID：14795366
> 
> 赞同：0
> 
> 时间：2013-02-10T06:36:23.393
> 
> 标签：javascript, angularjs

您好，我是 Java 脚本的新手。我的小组成员编写了一些代码来为一个项目创建一个网站，我想在我的笔记本电脑上运行它。我们在客户端使用 AngularJS。但我收到以下错误：

```
ReferenceError: angular is not defined
at Object.<anonymous> (C:\Users\Usman\Desktop\temp_course_rating\temp_course
_rating\public\app.js:2:11)
at Module._compile (module.js:449:26)
at Object.Module._extensions..js (module.js:467:10)
at Module.load (module.js:356:32)
at Function.Module._load (module.js:312:12)
at Module.runMain (module.js:492:10)
at process.startup.processNextTick.process._tickCallback (node.js:244:9) 
```

我已经粘贴了该特定文件中的代码。我非常感谢任何帮助，因为我在我的团队中落后：

```
var ratemycourse = {};
var App = angular.module('ratemycourse', ['ngResource']);

App.config(['$routeProvider', function($routeProvider) {
  $routeProvider.when('/', {
   templateUrl : '/templates/home.html',
   controller : HomeCtrl
 });

 $routeProvider.when('/register', {
  templateUrl : '/templates/register.html',
  controller : RegisterCtrl
  });

  $routeProvider.when('/login', {
   templateUrl : '/templates/login.html',
   controller : LoginCtrl
  });

 $routeProvider.when('/logout', {
   templateUrl : '/templates/logout.html',
   controller : LogoutCtrl
 });

$routeProvider.when('/mcgill', {
templateUrl : '/templates/mcgill.html',
//controller : McGillCtrl
 });

$routeProvider.when('/concordia', {
   templateUrl : '/templates/concordia.html',
   //controller : ConcordiaCtrl
  });

$routeProvider.when('/udem', {
   templateUrl : '/templates/udem.html',
//controller : UdemCtrl
 });
 $routeProvider.otherwise({
  redirectTo : '/'
 });
 }]); 
```

以下是调用 angular.js 代码的代码文件：

```
<!DOCTYPE html>
    <html lang="en" ng-app="ratemycourse">
      <head>
    <title>Rate My Courses</title>
    <link rel="stylesheet"          href="//cdnjs.cloudflare.com/ajax/libs/foundation/3.2.2/stylesheets/foundation.min.css" />
    <link rel="stylesheet" href="index.css" />
    {{{block "stylesheets"}}}
    <script src="http://www.parsecdn.com/js/parse-1.2.0.min.js"></script>
    <script type="text/javascript">
    Parse.initialize("mWF6nv6fLZx5l0FOYW8SSxfE07fcA4kMHPfl2UzR",       "m2N5pguJAwmEa6pEK1JwQ3nYqCg17K3PXIN3yCKK");
    </script>
  </head>

  <body ng-controller="MainCtrl">
    <nav class="top-bar" ng-controller="HeaderCtrl">
      <ul>

        <li class="toggle-topbar"><a href="/"></a></li>
      </ul>
       <section>
         <ul class="left">

          <li><a href="#mcgill">McGill</a></li>
          <li><a href="#concordia">Concordia</a></li>
          <li><a href="#udem">UDEM</a></li>
        </ul>
         {{email}}
         <ul class="right">
          <li data-ng-hide="isLoggedIn"><a href="#login">Login</a></li>
           <li data-ng-hide="isLoggedIn"><a href="#register">Register</a></li>
          <li data-ng-show="isLoggedIn"><a href="#logout">
            {{email}}</a></li>
          <li data-ng-show="isLoggedIn"><a href="#logout">Logout</a></li>

        </ul>
      </section>
    </nav>

    {{{body}}}

    <script type="text/javascript"   src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript"  src="C:\Users\Usman\Desktop\temp_course_rating\temp_course_rating\public\libs\angular.min.js"></script>
    <script type="text/javascript"  src="C:\Users\Usman\Desktop\temp_course_rating\temp_course_rating\public\libs\angular-    resource.min.js"></script>
    <script type="text/javascript" src="/app.js"></script>
<script type="text/javascript" src="/controller.js"></script>

    {{{block "scripts"}}}
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:43:16.563

`src`脚本标签的属性应该是 url 而不是文件路径而不是使用 javascipt 源的路径使用 url，如更改

```
src="C:\Users\Usman\Desktop\temp_course_rating\temp_course_rating\public\libs\angular.min.js"> 
```

至

```
src="http://localhost/yourproject/angular.min.js"> 
```

# batch-file - 将多个脚本打包到一个 .cmd 文件中

> ID：14795370
> 
> 赞同：3
> 
> 时间：2013-02-10T06:37:20.007
> 
> 标签：batch-file, cmd

我编写了一个非常简单（但我相信非常有用）的 PowerShell 脚本，并以 .cmd 文件的形式为其创建了安装程序。该发行版包含两个 .cmd 文件和两个 .ps1 文件。目前安装程序[从 github 下载所有需要的文件](https://github.com/utapyngo/ppt_rasterize/blob/master/install.cmd)。

我的目标是使安装程序自成一体，这样人们即使在严格的防火墙之后也可以使用它。

一种方法可能是这样的：

```
echo param(>!filename!
echo     [string] $pfilename>>!filename!
echo )>>!filename!
... 
```

但是这种方法需要转义可能变得非常复杂的特殊字符。此外，它需要以某种方式自动化才能有用。

另一种方法是将脚本源代码直接包含在 .cmd 文件中，用注释标记，`::begin file1`然后`::end file1`提取它。但是怎么做？

我的第一个想法是调查[`pl2bat`](http://docs.activestate.com/activeperl/5.10/bin/pl2bat.html)。但事实证明，它`perl`有一个特殊的开关 ( `-x`)，它只是去掉了行前的所有文本`#!perl`，并且生成的 .bat 文件`pl2bat`只是`perl -x`在自身上运行。所以我不能使用与使用相同的方法`pl2bat`。

有任何想法吗？

PS：我知道 NSIS、InnoSetup 和 WiX。我只希望我的安装程序是文本的，而不是二进制的，所以每个人都可以看到它是无害的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T01:29:18.430

当我遇到同样的问题时，我选择为此目的使用既定标准，而不是自己设计一个新术语，因此我选择了[XML 规范](http://msdn.microsoft.com/en-us/library/x4d5a2tx%28v=vs.84%29.aspx)的“资源”元素。这是我的方法：

```
@echo off
setlocal EnableDelayedExpansion

rem Extract "FirstSection.txt" and place in its own file:
call :getResource FirstSection > FirstSection.txt

rem Extract "SecondSection.txt" and place in its own file:
call :getResource SecondSection > SecondSection.txt

goto :EOF

:getResource resourceId

rem Resource data start format: ^<resource id="resourceId"^>
set start=
set lines=
for /F "tokens=1,3 delims=:=>" %%a in ('findstr /N "^</*resource" "%~F0"') do (
   if not defined start (
      if "%1" equ "%%~b" set start=%%a
   ) else (
      if not defined lines set /A lines=%%a-start-1
   )
)
set line=0
for /F "skip=%start% tokens=1* delims=]" %%a in ('find /N /V "" ^< "%~F0"') do (
   setlocal DisableDelayedExpansion
   echo(%%b
   endlocal
   set /A line+=1
   if !line! equ %lines% exit /B
) 
```

例如：

```
<resource id="FirstSection">
Place here
the contents
of First Section
</resource>

<resource id="SecondSection">
The same
... for Second Section
</resource> 
```

安东尼奥

# wpf - 我无法使用导航属性将项目添加到自我跟踪实体集合

> ID：14795371
> 
> 赞同：0
> 
> 时间：2013-02-10T06:37:32.010
> 
> 标签：wpf, vb.net, entity-framework, self-tracking-entities

我有一个 WPF 4 应用程序，通过自我跟踪实体（STE 5）访问我的数据。我有一个 WPF 内容控件，其数据上下文设置为 STE 的模型类 ( **vendor** )。供应商类具有**vendor_accounts**的导航属性。我可以成功获取这些供应商帐户的集合并将它们绑定到内容控件中的列表视图。但是，当我尝试将新的 vendor_account 对象添加到集合时，我收到以下错误

> 在 CollectionChanged 事件期间无法更改 ObservableCollection。

这是我用来添加到列表视图集合中的简化 vb.NET 代码：

```
Private Sub AddAccountExecute()

    Dim newAcc As New vendor_account With {.chrAccName = "New Account Name", .chrAccNumber = "New #"}

    VendorSelection.vendor_account.Add(newAcc)
    ''FTC_Context is the object context for the STE data access model
    FTC_Context.SaveChanges()

End Sub 
```

在为 STE 生成的模板代码中的以下子代码中会引发此错误。错误出现在**previousValue.vendor_account.Remove(Me)**行上：

```
Private Sub Fixupvendor(ByVal previousValue As vendor)
    If IsDeserializing Then
        Return
    End If

    If previousValue IsNot Nothing AndAlso previousValue.vendor_account.Contains(Me) Then
        previousValue.vendor_account.Remove(Me)
    End If

    If vendor IsNot Nothing Then
        vendor.vendor_account.Add(Me)

        idVendor = vendor.idVendor
    End If
    If ChangeTracker.ChangeTrackingEnabled Then
        If ChangeTracker.OriginalValues.ContainsKey("vendor") AndAlso
            ChangeTracker.OriginalValues("vendor") Is vendor Then
            ChangeTracker.OriginalValues.Remove("vendor")
        Else
            ChangeTracker.RecordOriginalValue("vendor", previousValue)
        End If
        If vendor IsNot Nothing AndAlso Not vendor.ChangeTracker.ChangeTrackingEnabled Then
            vendor.StartTracking()
        End If
    End If
End Sub 
```

我注释掉了该行，并且项目可以成功添加到 account_vendor 集合中（这不是可接受的修复，因为它会修改自动生成的代码，每次我更新我的 STE 模型时都会重新创建该代码）。
所以我在 FTC_Contect.SaveChanges() 中添加了上面的代码行，以测试数据库是否得到更新。但是现在我在保存更改行上收到以下错误：

> 违反了多重性约束。关系“FTC_devModel.FK_vendor_account_vendor”的角色“供应商”具有多重性 1 或 0..1。

我是 STE 的新手，遇到了麻烦。

所以，我的问题是，有人可以通过提供如何使用“导航属性”添加/删除记录的示例来帮助我，或者帮助我更正上面的代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:25:34.857

所以我现在有一个可行的*“解决方案”*。也许 hack 是一个更好的术语。

我更改了 STE 实体框架模板 (FTCModel.tt) 以排除以下行：previousValue.vendor_account.Remove(Me)

我将 addAccountExecute 子代码更改为：

```
Dim vendorAccount As New vendor_account With {.idVendor = idVendor,
                                                              .chrAccName = "New Account Name",
                                                              .chrAccNumber = "New #"}
FTC_Context.vendor_account.AddObject(vendorAccount)
FTC_Context.SaveChanges() 
```

它使用 STE 上下文添加对象，而不是像我提供的第一个代码中的供应商对象。

所以它正在工作，但这感觉就像一个黑客，就像我做错了什么一样。从 vendor_account 类的“vendor”setter 属性调用 fixup 方法，它尝试删除 vendor_account 对象，然后将其添加到供应商，然后抛出我在第一篇文章中概述的错误。

我仍然不明白为什么我首先得到错误。也许它与 WPF 将列表视图直接绑定到导航属性（类型为 trackablecollection(of T)）有关。

现在我将使用它，但如果有人能帮助我更好地理解这个问题，我将不胜感激。

# html - Chrome 在页面首次加载或刷新时忽略 div 的高度

> ID：14795376
> 
> 赞同：0
> 
> 时间：2013-02-10T06:38:30.140
> 
> 标签：html, css, google-chrome

对于网站：[http ://dev.blackboxdesign.co](http://dev.blackboxdesign.co)

我对 Chrome 有一个相当令人沮丧的问题。当我第一次用 Chrome 打开我的页面时，导航栏会忽略我的横幅栏并弹出到顶部，隐藏在横幅下。如果我单击主页链接，此问题会自行解决，但如果我刷新，则会重新出现。如果检测到 Chrome，我已经尝试强制重新加载（但这并不那么聪明，因为它只是做了一个循环）。我尝试在横幅 div 中添加填充

```
 padding-bottom:1px; 
```

但后来我遇到了同样的问题，除了这次横幅没有显示。我在这里读到有同样问题的人说这与 Chrome 想要图像大小有关。但是我无法定义图像大小，因为它们会随着页面宽度而变化。

HTML

```
 <div class="slideshow">
        <div id="banner_bar1"><img src="images/banner5.jpg" width="750px" height="178px" class="banner"></div>
        <div id="banner_bar2"><img src="images/banner4.jpg" width="750px" height="178px" class="banner"></div>
        <div id="banner_bar3"><img src="images/banner3.jpg" width="750px" height="178px" class="banner"></div>
        <div id="banner_bar4"><img src="images/banner2.jpg" width="750px" height="178px" class="banner"></div>
    </div> 
```

CSS

```
#banner_bar1 {
    margin-top: 0px;
    width: 100%;
    background-color:#313131;
}
/* repeat #banner_bar1 for 2,3,4 changing only background-color */
.slideshow {
    margin:0px;
    padding:0px;
}
.banner {
    display:block;
    max-width: 1300px;
    min-width: 750px;
    width: 90%;
    margin: 0px auto;
} 
```

哦，我忘了提到这个问题也可以通过调整窗口大小来解决，这要归功于：

```
 <script language="javascript" type="text/javascript">
        function Reload(){
            window.location.href = window.location.href
        }
        window.onresize = Reload;
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T20:40:20.140

由于`.banner`子级`.slideshow`应用了绝对位置，大概是通过您正在使用的循环插件，这些元素不构成文档流的一部分 - 也就是说，这些 div 和子图像不给`.slideshow`容器任何高度。

> 相对定位的元素仍被认为在文档中的正常元素流中。相反，**绝对定位的元素会从流中取出，因此在放置其他元素时不会占用空间**。

请参阅[https://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)

如果您查看您选择的开发人员工具，您会看到`.slideshow`div 的高度为零像素。如果您浮动 div，也会发生同样的情况`.banner`，这就是我问的原因。如果您在构建页面时不使用任何开发人员工具来检查页面，我建议您查阅您最喜欢的浏览器的文档，因为您会发现它们对于了解“幕后”发生的事情绝对无价。Chrome 尤其具有出色的工具，Opera 的 Dragonfly 和 Mozilla（内置开发者工具和出色的 Firebug 扩展）获得了极高的评价。

由于`.banner`元素不会拉伸父`.slideshow`容器以赋予其高度，因此您必须手动指定高度以匹配内容。在这种情况下`215px`，请注意按照我的评论使用 unit - 简单地说明`215`将不起作用，或者至少不能跨浏览器正常工作。

我建议在您的外部 CSS 文件中执行此操作，我将对其进行编辑，如下所示 -

```
#banner_bar1 {
    margin-top: 0;
    width: 100%;
    background-color: #313131;
}

/* repeat #banner_bar1 for 2,3,4 changing only background-color */
.slideshow {
    height: 215px;
    margin:0px;
    padding:0px;
}

.banner {
    display:block;
    max-width: 1300px;
    min-width: 750px;
    height:100%;
    width: 90%;
    margin: 0 auto;
    padding-bottom: 0;
} 
```

这还包括我在评论中提到的对您的保证金属性的更新。

我要归功于defau1t，因为他为您指出了正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:48:59.287

您可以将 CSS 属性添加`overflow:hidden;`到包含横幅的 div，

```
.slideshow{overflow:hidden;} 
```

# php - 构建 Mediawiki cookie

> ID：14795380
> 
> 赞同：1
> 
> 时间：2013-02-10T06:39:20.420
> 
> 标签：php, mediawiki

我已经在使用我编写的自定义登录名来连接我的网站和 Wordpress。

我的 Mediawiki 实例也在同一个域中。但是，我已经尝试了几个小时来研究如何管理它，但我根本无法弄清楚。我不确定 AuthPlugin 是如何工作的，我还没有设法用它做任何事情。我找不到有关该主题的足够文档。

登录 API 声明[我可以自己构建 cookie](http://www.mediawiki.org/wiki/API%3aLogin#Construct_cookies)。是否有任何关于 Mediawiki cookie 如何工作以及如何生成它们的示例或解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:36:18.157

您可以使用

```
$wgUser->setCookies(); 
```

一旦用户通过身份验证，这将自动创建所需的 cookie

# java - 使用码头创建 bean 时出错

> ID：14795387
> 
> 赞同：0
> 
> 时间：2013-02-10T06:40:12.447
> 
> 标签：java, hibernate, tomcat, spring-mvc, jetty

我在使用 Jetty 启动 Web 应用程序时遇到问题，但是当我使用 Tomcat-07 启动它时没有这样的问题，

错误 ：

```
org.springframework.beans.factory.BeanCreationException:  
Error creating bean with name    
'hbmSessionFactory' defined in ServletContext resource 
[/WEB-INF/applicationContext.xml]:
Invocation of init method failed; nested exception is java.lang.NoSuchMethodError:   
javax.persistence.OneToMany.orphanRemoval()Z 
```

可能是什么原因？

谢谢，

```
<properties>
    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    <slf4j.version>1.5.6</slf4j.version><cxf.version>2.3.3</cxf.version>
    <ehcacheVersion>2.4.2</ehcacheVersion><toolkitVersion>3.3.0</toolkitVersion>
</properties><dependencies>        
    <dependency><groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId><version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-expression</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-beans</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-aop</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-context</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-context-support</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-tx</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-jdbc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-orm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-oxm</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-web</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-webmvc</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-webmvc-portlet</artifactId>
        <version>${org.springframework.version}</version>
    </dependency><dependency>
        <groupId>org.springframework</groupId><artifactId>spring-test</artifactId>
        <version>${org.springframework.version}</version><scope>test</scope>
    </dependency><dependency>
        <groupId>javax.servlet</groupId><artifactId>servlet-api</artifactId>
        <version>2.5</version><type>jar</type><scope>compile</scope>
    </dependency><dependency>
        <groupId>javax.servlet</groupId><artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency><dependency>
        <groupId>taglibs</groupId><artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency><dependency>
        <groupId>javax.transaction</groupId><artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency><dependency>
        <groupId>org.aspectj</groupId><artifactId>aspectjrt</artifactId>
        <version>1.6.2</version>
    </dependency><dependency>
        <groupId>commons-io</groupId><artifactId>commons-io</artifactId>
        <version>2.0</version>
    </dependency><dependency>
        <groupId>commons-dbcp</groupId><artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency><dependency>
        <groupId>commons-pool</groupId><artifactId>commons-pool</artifactId>
        <version>1.4</version>
    </dependency><dependency>
        <groupId>mysql</groupId><artifactId>mysql-connector-java</artifactId>
        <version>5.1.18</version>
    </dependency><dependency>
        <groupId>org.hibernate</groupId><artifactId>hibernate-entitymanager</artifactId>
        <version>3.5.5-Final</version>
    </dependency><dependency>
        <groupId>org.hibernate.java-persistence</groupId><artifactId>jpa-api</artifactId>
        <version>2.0-cr-1</version>
    </dependency><dependency>
        <groupId>javax.ws.rs</groupId><artifactId>jsr311-api</artifactId>
        <version>0.11</version>
    </dependency><dependency>
        <groupId>javax.validation</groupId><artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency><dependency>
        <groupId>org.hibernate</groupId><artifactId>hibernate-validator</artifactId>
        <version>4.0.2.GA</version>
    </dependency><dependency>
        <groupId>javax.annotation</groupId><artifactId>jsr250-api</artifactId>
        <version>1.0</version><scope>provided</scope>
    </dependency></dependencies> 
```

感谢您的回复，所有依赖项都正确加载，mvn clean compile package war:war 也可以正常工作，并且该 war 文件对 Tomcat-7 没有任何问题，但在码头有上述错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:44:39.083

我认为这是因为这个方法在你的类路径中的 OneToMany 的 jar 接口中不存在。它应该是相对较新的东西（JPA 2），并且您的类路径中可能有 jpa-1 罐子。因此，请尝试找出您的 jar 版本并在此处发布。也许我们可以说那里缺少什么。

看这里例如： [链接1](https://stackoverflow.com/questions/3189056/hibernate-3-5-x-nosuchmethoderror-javax-persistence-onetomany-orphanremoval)

或在这里： [链接 2](https://stackoverflow.com/questions/4591684/java-lang-nosuchmethoderror-javax-persistence-onetomany-orphanremovalz)

希望这可以帮助

# batch-file - 将文件从文件夹移动和重命名为 .bat 文件，并在开头添加修改日期

> ID：14795390
> 
> 赞同：1
> 
> 时间：2013-02-10T06:40:30.200
> 
> 标签：batch-file, rename, move, last-modified

我花了很多时间试图解决这个问题，但没有运气。

场景：文件夹中有多个不同的文件名，但扩展名相同。在 Windows 服务器 2008 64 位上。想要使用计划批处理作业将它们移动到另一个文件夹。。蝙蝠。在移动过程中，我想重命名它们以包括它们的最后修改日期。我正在尝试输入这种格式：

```
yyyymmddhhmmss-name.zip 
```

我查看了 PowerShell 和`for`命令，但无法解决。

我找到了这段 3 行代码，它在 Windows 7 上运行良好，但在 Windows Server 2008 上却不行！

```
@echo off
set Date=%date:~10,4%%date:~4,2%%date:~7,2%
move d:\Test\*.zip d:\Test1\*%Date%.zip 
```

在服务器上，它无法理解`*%Date%`. 一旦我删除了`*`，它就起作用了。我尝试过使用引号等的不同变体，但不起作用。我知道日期不是我所追求的解决方案，但如果我无法让这条简单的线路正常工作，那么其余的都无关紧要。

哦，补偿确实有效，所以我得到了出现的日期`yyyymmdd`。我避免使用 PowerShell，因为我不擅长它，而且我还研究了 VBS。但这不是强项。有人可以帮忙吗？

我知道很多问题都相似，但没有什么完全符合我想要做的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:14:25.587

WMIC 可用于获取最后修改的时间戳，精度为小数秒。前 14 个字符以您正在寻找的格式给出时间戳。

这是一个快速的解决方案，完全符合您的要求：

```
@echo off
for /f "skip=1 delims=" %%A in (
  'wmic datafile where "drive='d:' and path='\\test\\' and extension='zip'" get lastModified^,name'
) do for /f "tokens=1*" %%B in ("%%A") do (
  set "timestamp=%%B"
  set "file=%%~fC"
  set "fileName=%%~nxC"
  setlocal enableDelayedExpansion
  move "!file!" "d:\test1\!timestamp:~0,14!-!fileName!"
  endlocal
) 
```

如果您想更改要求，上述内容很挑剔。如果您不小心，您的 WMIC 命令可能会花费很长时间，并且有些文件掩码根本无法用 WMIC 模拟。

下面是一个非常方便的慢得多的解决方案。您将源文件掩码和目标路径作为参数传入。假设脚本名为“addTimeStamp.bat”，那么您将使用`addTimeStamp "d:\test\*.zip" "d:\test1"`

```
@echo off
setlocal disableDelayedExpansion
set "filePath="
if "%~2" neq "" for /f "eol=: delims=" %%F in ("%~2\") do set "filePath=%%~fF"
for %%F in (%1) do (
  set "file=%%~fF"
  set "fileName=%%~nxF"
  setlocal enableDelayedExpansion
  for /f "skip=1" %%A in (
    'wmic datafile where "name='!file:\=\\!'" get lastModified'
  ) do for /f %%A in ("%%A") do (
    set "timestamp=%%A"
    move "!file!" "!filePath!!timestamp:~0,14!-!fileName!
  )
  endlocal
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:40:10.627

您可以使用`FOR`循环并将`~t`修饰符应用于循环变量以访问每个文件的最后修改时间戳。在实际使用`MOVE`命令之前，您需要将原始时间戳值调整为必要的格式。这是一个如何做到这一点的示例：

```
@ECHO OFF
FOR %%I IN ("D:\Test\*.zip") DO (
  SET lmdate=%%~tI
  SETLOCAL EnableDelayedExpansion
  SET lmdate=!lmdate:~6,4!!lmdate:~3,2!!lmdate:~0,2!!lmdate:~11,2!!lmdate:~14,2!
  MOVE "%%I" "D:\Test1\!lmdate!-%%~nxI"
  ENDLOCAL
) 
```

应该注意的是，带有`~t`修饰符的循环变量返回的时间戳的精度仅限于分钟，所以如果你真的需要它是秒，正如你的帖子所建议的那样，这可能不是你的解决方案。

无论如何，这就是脚本的工作方式。

在每次迭代中，`%%I`循环变量都被分配一个文件名。`~t`修饰符指示变量解析为相应文件的最后修改时间戳。

该`lmdate`变量首先使用`%%~tI`（第一条`SET lmdate`语句）返回的时间戳进行初始化，然后重新排列该值以适应`yyyyMMddHHmm`格式（第二`SET lmdate`条语句）。请注意，由于原始时间戳的格式取决于系统的语言环境，您可能需要修改第二个 SET 语句以适应您的特定系统。上面的脚本采用以下格式：

```
dd.MM.yyyy HH:mm 
```

您还可以在上面看到的`SETLOCAL EnableDelayedExplansion`语句用于访问`lmdate`循环体内的实际值。如果您不知道，`%`当在同一命令块中设置和检索值时，块命令中环境变量的“正常”( ) 扩展不起作用。这就是延迟扩展派上用场的地方。您首先需要启用它，然后使用不同的扩展语法（`!`s 而不是`%`）。

您可以看到脚本中使用的其他修饰符，即`~n`和`~x`（`~nx`一起使用时）。前者仅解析为文件名（无路径或扩展名），后者仅解析为扩展名。还有其他修饰符，它们记录在`FOR`命令的内置帮助 ( `FOR /?`) 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:16:53.053

您可以通过使用`wmic`命令来做到这一点。这使您可以在不受区域设置影响的情况下获取当前日期和时间。同时它还可以帮助您重命名 zip 文件。

```
@echo off
SETLOCAL EnableDelayedExpansion

for /f "skip=1 tokens=1-6 delims= " %%a in ('wmic path Win32_LocalTime Get Day^,Hour^,Minute^,Month^,Second^,Year /Format:table') do (
    IF NOT "%%~f"=="" (
        set /a FormattedDate=10000 * %%f + 100 * %%d + %%a
        set /a FormattedTime=%%b * 10000 + %%c * 100 + %%e
    )
)

for /f %%f in ("D:\Test*.zip") DO set filename=%%~nf

move "D:\Test*.zip" "D:\%FormattedDate%%FormattedTime%-%filename%.zip" 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-19T15:24:31.447

我已经制作了一个 PowerShell 脚本来完全按照您的意愿行事。

**脚本 ：-**

```
$src=""      # Source Path of Files to move
$trg=""      # Destination folder
$a=Get-ChildItem $SRC 
IF($a)
{
    for($i=0; $i -le ($a.Count - 1); $i++)
    {
        $fileName=$a[$i].Name
        $fileNameWithoutExtension=$fileName -replace ".zip", ""
        $dirPath=$a[$i].DirectoryName
        $lastModifiedDate=$a[$i].LastWriteTime
        $LMFDate=($lastModifiedDate).ToString("yyyy-MM-dd-hh-mm-ss");
        $srcFile="$dirPath\$fileName"
        move-Item $srcFile "$trg\$LMFDate-$fileName"
    }
} 
```

# android - 在 Android 中是否可以转移触摸事件的所有权？

> ID：14795397
> 
> 赞同：0
> 
> 时间：2013-02-10T06:41:45.533
> 
> 标签：android

我正在开发一个模态电影播放器​​，它可以根据手势改变模式。目前，不同的模式被分成单独的 ImageView，因为每个模式的组成和交互都是不同的。

我将视图保存在单个 ViewGroup 中。ViewGroup 将确保任何时候只有一个 ImageView 可见。视图将通过手势切换。

一种这样的手势是拖动。目前我正在处理 ImageViews 中的手势，并通过触发 ViewGroup 的回调来切换视图。

我在将移动操作从当前视图转移到切换视图时遇到问题。当前视图检测到移动触摸事件，然后触发切换。但是，新视图看不到触摸事件的其余部分。

我的问题是，是否可以将触摸事件的所有权从一个视图转移到另一个视图？

# dart - 你如何将变量传递给 Dart 中的 main？

> ID：14795398
> 
> 赞同：6
> 
> 时间：2013-02-10T06:42:28.997
> 
> 标签：dart

我在 Django 应用程序中使用 Dart。有一些配置参数需要传递给 Dart。如何将值传递给 main()？此时我正在考虑在网页中创建隐藏元素并使用查询来获取值。有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T06:55:02.753

听起来您正在构建浏览器应用程序？

（顺便说一句，您可以`new Options().arguments`用于命令行应用程序。效果很好，但显然浏览器应用程序中没有命令行 :)

（第二，`main()`不接受参数，所以我们必须找到另一种方式。）

好的，对于浏览器应用程序，我可能会尝试将一些 JSON 嵌入到`<script>`标签内的页面中。然后，使用查询，找到那个元素，解析内容，你就可以开始了。

在您的 HTML 中：

```
<script id="config">
  {"environment":"test"}
</script> 
```

在你的 Dart 文件中：

```
import 'dart:html';
import 'dart:json' as json;

void main() {
  var config = json.parse(query("#config").innerHtml);

  print(config['environment']);
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-19T19:58:54.900

`Options`不再是一种选择。

现在主函数接受参数。

```
main(List<String> args) {
   print(args);
} 
```

如果你来自 python、c、c++。期望`args[0]`会给出脚本的路径。

但在 dart 中，args 只是参数。

`Platform.script`可以使用对象来获取脚本的路径[`Uri`](https://api.dartlang.org/stable/2.4.1/dart-core/Uri-class.html)。然后`Uri.path`将文件路径作为字符串获取。

一个例子：

```
import 'dart:io';

main(List<String> args) {
  var dir = Directory.current.path;
  var p = Platform.script.path;
  print("$p called with $args in $dir");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:46:39.013

使用[此答案](https://stackoverflow.com/questions/9279541/how-do-i-access-argv-command-line-options-in-dart)中看到的[选项](http://api.dartlang.org/docs/releases/latest/dart_core/Options.html)：

```
#!/usr/bin/env dart

main() {
    print("Args: " + new Options().arguments);
} 
```

# django - 如何在 /admin/ 处修复 ViewDoesNotExist

> ID：14795399
> 
> 赞同：1
> 
> 时间：2013-02-10T06:42:37.023
> 
> 标签：django, admin

我的 django 项目中有一个管理部分工作正常，但突然报告此错误：

> ViewDoesNotExist 在 /admin/
> 
> 无法导入 restaurant.views.question。模块 restaurant.views 中不存在视图。

前端仍然可以正常工作。

不知道我做了什么改变导致这个 - 如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:55:39.140

这通常表明相关视图不存在或管理面板无法访问。你确定你导入了它，还是根据需要包含了它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:32:34.067

在我看来，您创建了一个与您的`question`视图相关的错误，这就是破坏管理员（`Could not import restaurants.views.question`）的原因。`restaurants.views`这实际上不是管理员的错误，也不是模块正文中的新错误。

`restaurants.views`我的猜测是您已经创建了一个循环导入 - 查看模块顶部的导入。现在检查您要从中导入的每个模块，并查看该模块是否从`restaurants.views`.

如果这没有显示任何内容，请检查导入到您的`restaurants.views`模块中的所有模型中的所有导入，并在那里寻找一些东西。

自从使用基于类的视图以来，我已经看过几次了。显然，基于类的视图的全部意义在于它们可以扩展。这可能导致循环依赖。除非我的应用程序中只有几个视图，否则我倾向于将所有内容从一个文件中拆分出来并创建一个视图目录 -

```
my_app
    views
        __init__.py
        view1.py
        view2.py
        view3.py 
```

然后将以下导入语句添加到您的`__init__.py`，以便一切正常 -

```
from view1 import View1
from view2 import View2
from view3 import View3 
```

这使您可以在每个视图模块的顶部使用更少的导入语句，从而降低循环依赖的风险。

# android - 使用 ActionBarsherlock 时更改应用程序标签字体

> ID：14795403
> 
> 赞同：2
> 
> 时间：2013-02-10T06:43:25.743
> 
> 标签：android, android-actionbar, actionbarsherlock, android-fonts

我正在尝试更改应用程序标签的字体（我在我的应用程序中使用 ActionBarSherlock 作为库项目）并出现错误。

以下是我试图在 setContentView() 之后将存储在资产中的外部字体设置到应用标签的代码片段。

```
mAppName = (TextView) findViewById(R.id.abs__action_bar_title);
Typeface face = Typeface.createFromAsset(getAssets(), "fonts/handsean.ttf");
mAppName.setTypeface(face); 
```

以下是来自 logcat 的错误。错误似乎出现在 mAppName.setTypeface(face) 行上。

```
E/AndroidRuntime(18762): FATAL EXCEPTION: main
E/AndroidRuntime(18762): java.lang.RuntimeException: Unable to start activity  ComponentInfo{com.cheats/com.cheats.LandingPage}: java.lang.NullPointerException
E/AndroidRuntime(18762):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
E/AndroidRuntime(18762):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/AndroidRuntime(18762):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
E/AndroidRuntime(18762):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/AndroidRuntime(18762):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(18762):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(18762):    at android.app.ActivityThread.main(ActivityThread.java:5039)
E/AndroidRuntime(18762):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(18762):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(18762):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(18762):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(18762):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(18762): Caused by: java.lang.NullPointerException
E/AndroidRuntime(18762):    at com.cheats.LandingPage.onCreate(LandingPage.java:89)
E/AndroidRuntime(18762):    at android.app.Activity.performCreate(Activity.java:5104)
E/AndroidRuntime(18762):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/AndroidRuntime(18762):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144) 
```

我在 abs__action_bar_title_item.xml 中找到了应用程序标签的以下文本视图声明：

```
<TextView android:id="@+id/abs__action_bar_title"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:singleLine="true"
              android:ellipsize="end" /> 
```

这是正确的方法还是我错过了什么？有人可以建议吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T22:30:27.633

经过大量试验，我能够以以下方式获得 textView 的参考，现在字体已经改变：

```
int titleId = Resources.getSystem().getIdentifier("action_bar_title", "id", "android");
if(titleId == 0)
    titleId = com.actionbarsherlock.R.id.abs__action_bar_title;

mAppName = (TextView) findViewById(titleId);
Typeface face = Typeface.createFromAsset(getAssets(), "fonts/handsean.ttf");
mAppName.setTypeface(face); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T01:27:31.413

在 Xamarin.Android（MonoDroid - C#）中：

如果您在使用时遇到问题`null`，`TextView`可能是因为 Android 版本，上面的代码适用于我的 Android 4.2，但不适用于 3.1。

这对我有用：

```
TextView title = FindViewById<TextView>(Resources.GetIdentifier("action_bar_title", "id", "android"));
if (title == null) title = FindViewById<TextView>(Resource.Id.abs__action_bar_title);

if( title != null)
{
   Android.Graphics.Typeface face = Android.Graphics.Typeface.CreateFromAsset(Assets, "fonts/font.otf");
   title.SetTypeface(face, Android.Graphics.TypefaceStyle.Bold);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T11:49:57.010

Abhishek Sabbarwal 提供的解决方案工作正常（< 3.x 和 >= 4.x），但在 Honeycomb 的情况下，它无法找到 Textview，正如 charlesbock 指出的那样。

调试后，似乎这一行给出了一个积极的 titleId，但与 TextView 不匹配。

```
int titleId = Resources.getSystem().getIdentifier("action_bar_title", "id", "android"); 
```

但是，使用这一行，TextView 是成功找到的

```
titleId = R.id.abs__action_bar_title; 
```

因此，这是适用于任何版本的我的代码

```
int titleId = Resources.getSystem().getIdentifier("action_bar_title", "id", "android");
if(titleId == 0 || (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB && Build.VERSION.SDK_INT < Build.VERSION_CODES.ICE_CREAM_SANDWICH))
{
    titleId = R.id.abs__action_bar_title;
}

final TextView appName = (TextView) findViewById(titleId); 
```

# c++ - .gdbinit 文件丢失

> ID：14795407
> 
> 赞同：1
> 
> 时间：2013-02-10T06:43:43.207
> 
> 标签：c++, eclipse, gdb, gdbinit

Eclipse 没有调试我的 c++ 代码。它要求提供一个 gdb 版本。我修复了 gdb 的路径，但 .gdbinit 文件仍然丢失。我找不到它。调试过程现在刚刚终止。eclipse 有一个内置的 .gdbinit 文件，我可以给出它的位置吗？有人可以给我一个标准的 .gdbinit 文件吗？

可能是它的调试正确，但 eclipse 没有正确解析 gdb 输出。有没有解决这个问题的插件？

我将非常感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T04:54:13.687

很难判断是否 a) 您无法让 Eclipse 找到您现有的 .gdbinit 文件，或者 b) 您缺少一个 .gdbinit 文件。

a) 在 UNIX 和 Linux 系统上，gdb 初始化文件的路径是 ~/.gdbinit（或 $HOME/.gdbinit）——也就是说，.gdbinit 文件位于主目录的顶层。

b) 运行 gdb 不需要 .gdbinit 文件——即使是名为 .gdbinit 的空文件也可以。例如 .gdb 初始化文件，检查[dotfiles.org](http://www.dotfiles.org/.gdbinit)。

# php - 两表1变量

> ID：14795409
> 
> 赞同：1
> 
> 时间：2013-02-10T06:44:10.753
> 
> 标签：php, mysql

我有 2 个表——每个表都有一个相同的字段——我们称之为 id。我需要从表 1 和表 2 中提取所有数据，其中 id = 变量，例如 $variable。我已经看到了可以从两个表中提取数据的答案，其中两个表中的 id 字段相同，但这不是我想要的。这是我当前的代码：

```
SELECT
  topic_title,
  topic_uri
FROM bx_groups_forum_topic
  RIGHT JOIN bx_groups_forum_post
    ON (bx_groups_forum_topic.topic_id = bx_groups_forum_post.topic_id)
WHERE bx_groups_forum_topic.forum_id = '$variable' 
```

任何有关如何正确编码的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:47:45.657

要仅从`topic_id`两者中该 id 相同的表中获取数据，请尝试使用`INNER JOIN`而不是`RIGHT JOIN`：

```
SELECT 
  t.topic_title, 
  t.topic_uri 
FROM bx_groups_forum_topic      AS t
INNER JOIN bx_groups_forum_post AS p ON t.topic_id = p.topic_id 
WHERE t.forum_id = '$variable' 
```

# c# - 使用来自动态链接标签的动态事件关闭当前表单

> ID：14795410
> 
> 赞同：1
> 
> 时间：2013-02-10T06:44:13.320
> 
> 标签：c#, winforms

您好，我有一种动态生成链接标签的方法，一旦您单击动态标签，它将打开另一个表单并关闭当前表单。我已经能够打开另一个表单，但我无法从我的动态事件中找到代码“this.close()”。这是我的代码：

```
 public void xxx(){

 // codes to generate linklabels ...etc 

  lnklbl1.Click += (sender, e) =>
              {
                  try
                  {

                      new frmTest().Show();
                     //this.Close();  <---- what am not being able to do

                  }
                  catch (Exception ex)
                  {
                      MessageBox.Show(ex.Message);
                  }
                  // MessageBox.Show(answerIndex.ToString());
              };
} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:01:07.077

您不应该关闭它，也许您应该将其可见性设置为 false。Form2 是在 Form1 中创建的，如果您关闭 Form1 也会关闭 Form2。

```
this.Visible = false; 
```

# d3.js - 如何在 d3 工具的强制布局中可视化 mysql 数据库中的数据

> ID：14795412
> 
> 赞同：2
> 
> 时间：2013-02-10T06:44:34.357
> 
> 标签：d3.js, force-layout

我需要一些关于 d3 和 MySQL 的帮助。以下是我的问题：

我正在使用 d3 强制定向布局来可视化存储在 MySQL 中的数据。我现在想使用 d3 将其可视化。据我对 d3 的了解，它需要 json 文件作为包含节点和链接的输入。我的问题是：如何从 d3 脚本以指定格式访问这个 MySQL 数据库？我想要 d3 工具的这种输入。请帮我。

```
 {"nodes":[{"name":"Myriel","group":1},
           {"name":"Mlle.Baptistine","group":1},
                                                                                                              {"name":"Mme.Hucheloup","group":1}],
      "links":[{"source":1,"target":0,"value":1},
         {"source":2,"target":0,"value":8},
          {"source":3,"target":0,"value":10}]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T17:25:46.963

这里有一篇关于使用 MySQL 数据库和 D3 [http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html](http://www.d3noob.org/2013/02/using-mysql-database-as-source-of-data.html)的博客文章。

关键是让 d3 中的数据调用调用一个 php 脚本，该脚本以 d3 期望的格式返回数据。

例如这条线;...

```
d3.json("php/data2.php", function(error, data) { 
```

...正在告诉 d3 以 JSON 格式获取数据，但它正在调用一个 php 脚本，该脚本正在查询数据库并以 JSON 格式返回数据；

这是它调用的脚本（data2.php）；

```
<?php
    $username = "homedbuser"; 
    $password = "homedbuser";   
    $host = "localhost";
    $database="homedb";

    $server = mysql_connect($host, $username, $password);
    $connection = mysql_select_db($database, $server);

    $myquery = "
SELECT  `date`, `close` FROM  `data2`
";
    $query = mysql_query($myquery);

    if ( ! $myquery ) {
        echo mysql_error();
        die;
    }

    $data = array();

    for ($x = 0; $x < mysql_num_rows($query); $x++) {
        $data[] = mysql_fetch_assoc($query);
    }

    echo json_encode($data);     

    mysql_close($server);
?> 
```

# actionscript-3 - gotoAndStop(); 将无法正常工作

> ID：14795414
> 
> 赞同：0
> 
> 时间：2013-02-10T06:45:42.363
> 
> 标签：actionscript-3, flash, flash-cs6

我为正在制作的游戏编写了此代码，我只是在学习，没有编译器错误，但是当我运行代码时它失败且没有错误。我有一行我想转到指定的帧，所以代码是 Button_Object.gotoAndStop(Local_Frame) 但它看起来好像程序只是跳过它。我试图把 _root.gotoAndstop(Local_Frame) 和 stage.gotoAndStop(Local_Frame) 但这些都给编译器错误它给出的错误是

```
 C:\Users\Nathan\Desktop\Matching Game\ClickSolver.as, 
 Line 34    1120: Access of undefined property _root. 
```

我确实看到了跟踪语句。作为旁注，我试图访问主时间线，而不是对象时间线。

这是代码

```
package  {
import flash.display.MovieClip;
import flash.events.MouseEvent;
import flash.utils.Timer;
import flash.events.TimerEvent;

public class ClickSolver {
    private var Button_Object:MovieClip;
    private var Check_Object:MovieClip;
    private var Score:Number = 0;
    private var Local_Frame:Number = 0;
    private var Local_Timer:Timer = new Timer(1000,3);

    public function ClickSolver(ButtonObject:MovieClip, CheckObject:MovieClip, Frame:Number) {

        Local_Frame = Frame;
        Button_Object = ButtonObject;
        Check_Object = CheckObject;
        Button_Object.buttonMode = true;
        trace(Button_Object.name);
        trace(Check_Object.name);
        Local_Timer.start();
        trace(Local_Timer.currentCount);
        Button_Object.addEventListener(MouseEvent.CLICK, Object_Button_Clicked);
        Button_Object.addEventListener(MouseEvent.MOUSE_OVER,Button_Mouse_Over);
        Button_Object.addEventListener(MouseEvent.MOUSE_OUT, Button_Mouse_Out);
        Local_Timer.addEventListener(TimerEvent.TIMER_COMPLETE, TimerIsDone);

    }
    private function TimerIsDone (event:TimerEvent):void{
        trace("Timer is done");
        Local_Timer.stop();
        Local_Timer.reset();
        Button_Object.gotoAndStop(Local_Frame);
    }
    private function Button_Mouse_Out (event:MouseEvent):void{
        Button_Object.alpha = 1;
    }
    private function Button_Mouse_Over (event:MouseEvent):void{
        Button_Object.alpha = 0.75;
    }
    private function Object_Button_Clicked (event:MouseEvent):void{
        Score++;
        Check_Object.visible =  false;
        Button_Object.gotoAndStop(Local_Frame);
        trace("Score: " + Score);
        trace("Frame: " + Local_Frame);
    }

  }

   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:03:06.773

AS3 不支持 _root。

尝试

```
MovieClip(root).gotoAndStop(local_Frame); 
```

PS。代码的一个常见命名约定是使用小驼峰命名法（即以小写字母开头）命名变量，并使用大驼峰命名法命名类（即以大写字母开头）。

This will make your code easier to read and allow you to instantly see which items are variables and classes.

# c# - 如何调用具有动态确定的类型参数的泛型方法？

> ID：14795415
> 
> 赞同：0
> 
> 时间：2013-02-10T06:45:42.700
> 
> 标签：c#, asp.net-mvc, generics, reflection, asp.net-mvc-4

我有一个`IndexModel`基类，用于几乎所有构建实体索引表的视图模型：

```
public class IndexModel<TIndexItem, TEntity> : ViewModel
        where TIndexItem : MappedViewModel<TEntity>, new()
        where TEntity : new()
    {
        public IndexModel()
        {
            Items = new List<TIndexItem>();
        }

        public TIndexItem TemplateItem { get; set; }
        public List<TIndexItem> Items { get; set; }

        public virtual void MapFromEntityList(IEnumerable<TEntity> entityList)
        {
            Items = Mapper.Map<IEnumerable<TEntity>, List<TIndexItem>>(entityList);
        }
    } 
```

我觉得`TEntity`参数是不必要的，就像`TIndexItem`type一样`MappedViewModel<TEntity>`。我的问题是双重的：

1.  我需要动态调用`MapFromEntityList`，使用反射来确定是什么`TEntity`。构造`IEnumerable<TEntity>`参数相当简单，但`Mapper.Map<IEnumerable<TEntity>, List<TIndexItem>>(entityList)`调用是一个挑战。如何使用动态构建的类型参数调用 map？

2.  我的班级有约束`where : MappedViewModel<TEntity>, new()`。这不是一个太大的问题，因为我可以让这个不太具体，例如`where TIndexItem : ViewModel, new()`，`ViewModel`我的所有视图模型的“无类型”基类在哪里。然后我只能做一些`TEntity`特定的事情，比如映射调用 if `TIndexItem`is a `MappedViewModel<TEntity>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:40:09.080

我想这就是你所追求的：

```
public class IndexModel<TEntity> : ViewModel
    where TEntity : new()
{
    public IndexModel()
    {
        Items = new List<MappedViewModel<TEntity>>();
    }

    public MappedViewModel<TEntity>TemplateItem { get; set; }
    public List<MappedViewModel<TEntity>> Items { get; set; }

    public virtual void MapFromEntityList(IEnumerable<TEntity> entityList)
    {
        Items = Mapper.Map<IEnumerable<TEntity>, List<MappedViewModel<TEntity>>>(entityList);
    }

} 
```

# forms - Struts2 标记仅将单个字段错误检索为文本

> ID：14795419
> 
> 赞同：5
> 
> 时间：2013-02-10T06:46:04.873
> 
> 标签：forms, jsp, struts2

如何在没有任何格式的情况下检索单个字段错误？

我只想要在jsp中没有任何格式的纯文本消息，这可能吗？

这可以在一个动作中完成，但我将如何在 jsp 中做到这一点？

```
System.out.println(this.getFieldErrors().get("fileMissing")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T08:39:59.807

如果你使用 JSTL，你可以这样做

```
<c:out value="${fieldErrors['passwordError']}"/> 
```

对于struts标签，你可以这样做

```
<s:property value="fieldErrors['fileMissing']"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-28T09:47:34.683

你可以 [**`<s:fielderror />`**](http://struts.apache.org/release/2.3.x/docs/fielderror.html)像这样在你的jsp中使用：

```
<s:fielderror fieldName="fileMissing"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:55:59.050

```
<s:property value="fieldErrors['fileMissing']"/> 
```

# html - 负边距如何将元素设置在页面中心？

> ID：14795423
> 
> 赞同：0
> 
> 时间：2013-02-10T06:46:20.777
> 
> 标签：html, css

我遇到了以下*css*片段。它为具有 id*搜索栏*的元素提供绝对位置，宽度为`300px`27px，高度为 27px，并将搜索栏设置为`50%`从其正常位置开始

```
#search_bar {
  position:relative;
  width: 300px;
  left:50%;
  height:27px;
} 
```

但我没有看到*搜索栏*在中心对齐。这是为什么 ？但是，如果我将代码段更改为：

```
#search_bar {
  position:relative;
  width: 300px;
  margin-left:-150px;
  left:50%;
  height:27px;
} 
```

它与页面的中心对齐。那个怎么样 ？该属性`margin-left:-150px`如何将其设置为中心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:49:36.323

left: 50% 将栏的开头放在屏幕中间，而不是居中。但是，如果您知道栏的宽度（300 像素），然后将其向左移动一半，那么栏的中间将位于屏幕的中间。那有意义吗？150 是 300 宽度的一半。如果条的宽度为 400，那么您将需要使用 -200。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T06:49:44.887

这是因为您使用的是绝对位置，因此负边距是元素宽度的一半，因此它将元素向后移动了其总宽度的 1/2

```
position: absolute;
left: 50%; /* This shifts the element 50% from left, if you 
             don't want to use negative margins you can use 45%, 40% but you need 
             to fiddle with the measurements first */ 
```

![在此处输入图像描述](../Images/d97a104fe405a608f1fe2605ebf5f96b.png)

所以计算就像

总容器宽度`1000px`

元素宽度`300px`

left：`50%`表示从左到右`500px`开始`800px`

所以这不是中心吗？

所以`-150px`从`500px`/* 500 剩下：50% */

你从`350px`到获取元素`650px`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:49:44.503

通过使用相对定位，您可以允许块相对于它所在的位置移动`static`。 `left: 50%`将边距的左侧放置在包含定位块的一半处，这对您来说可能是视口（也称为浏览器窗口）。 `margin-left: -150px`然后将边距框的左侧从当前位置边距框向左移动 150px。由于您的总宽度为 300 像素，因此边框/内容框相对于包含定位的块居中。

# authentication - Meteor 项目是否考虑过添加 Persona 身份验证支持？

> ID：14795424
> 
> 赞同：-1
> 
> 时间：2013-02-10T06:46:27.853
> 
> 标签：authentication, meteor

Persona 是 Mozilla 的身份验证系统（但不特定于 Firefox）。它的一大优势是服务器开发人员不必存储和管理密码，但它仍然是联合的，因此当域选择成为主要身份验证提供者时，没有可以访问所有用户活动的中心点。

似乎将作为身份验证智能包添加到 Meteor 可能相当容易，因此是个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:49:28.943

是的，智能包已经存在！它不是官方的流星包，但它与社区包一起使用。您需要先安装[陨石](https://github.com/oortcloud/meteorite)。

然后运行

```
mrt add accounts-persona 
```

它的好去！（`accounts-base`如果您还没有，您还需要）

有关包本身的更多详细信息：[https ://github.com/vladikoff/meteor-accounts-persona](https://github.com/vladikoff/meteor-accounts-persona)

# c++ - 套接字 write() 函数的问题

> ID：14795427
> 
> 赞同：0
> 
> 时间：2013-02-10T06:46:51.687
> 
> 标签：c++, sockets

我在让`write()`套接字的参数正常工作时遇到问题。我构建了自己的`write()`包装器来接受`std::string`或`char *`. 代码如下，以及编译器错误，我犯了什么愚蠢的错误，我似乎无法正确看到？泰

```
ftp.cpp:136:50: error: cannot convert 'std::basic_string<_CharT, _Traits, 
_Alloc>::length<char, std::char_traits<char>, std::allocator<char> >' from type 
'std::basic_string<char>::size_type (std::basic_string<char>::)()const {aka long unsigned 
int (std::basic_string<char>::)()const}' to type 'size_t {aka long unsigned int}'

int FTP::_write(std::string data)
{
    if (data != "")
    {
        int n = write(sockfd, data.c_str(), data.length); // this line is what the compiler is complaining about
        log->write("Write: " + data);
        if (n < 1)
            throw new FTPException(100, "Failed to write.");
    }
    else
    {
        int n = write(sockfd, buffer, strlen(buffer) + 1);
        log->write("Write: " + std::string(buffer));
        if (n < 1) 
            throw new FTPException(100, "Failed to write.");
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:52:14.413

你需要这条线

```
int n = write(sockfd, data.c_str(), data.length); 
```

读书

```
int n = write(sockfd, data.c_str(), data.length()); 
```

# ruby - 重复方法给“字符串”一个“x”次

> ID：14795428
> 
> 赞同：15
> 
> 时间：2013-02-10T06:47:01.607
> 
> 标签：ruby

我正在尝试编写一个方法，该方法将采用两个参数，一个用于字符串，另一个用于重复它的次数。这是我的代码：

```
 def repeat(text,c=2)
   c.times do print text end
 end

 repeat ("hi") 
```

这里的问题是，我希望结果是“hi hi”，我尝试了“puts”，但它开始了一个新行...... [打印文本“+”文本]也不起作用......

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-11T03:04:24.763

你的问题不清楚。如果您只想打印重复 n 次的文本，请使用[`String#*`](https://ruby-doc.org/core-1.9.3/String.html#method-i-2A)

```
def repeat(text, n=2)
  print text * n
end 
```

您的示例结果表明您想要`"hi hi"`暗示您希望每次重复之间有空格。最简洁的方法是使用[`Array#*`](https://www.ruby-doc.org/core-1.9.3/Array.html#method-i-2A)

```
def repeat(text, n=2)
  print [text] * n * ' '
end 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2019-10-14T22:10:08.350

只需将字符串乘以数字，Ruby 就足够聪明，知道您的意思；）

```
pry(main)> "abcabcabc" * 3
=> "abcabcabcabcabcabcabcabcabc" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T18:27:57.030

`Enumerator#cycle`返回一个枚举器：

```
puts ['hi'].cycle(3).to_a.join(' ')

# => hi hi hi 
```

分解代码：

`['hi']`创建一个包含字符串的数组

`cycle(3)`从重复元素 3 次的数组中创建一个枚举器

`.to_a`从枚举器创建一个数组，以便 的`join`方法`Array`可以创建最终的输出字符串。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-10T07:28:04.070

或者您可以执行以下操作：

```
def repeat(text, c=2)
  print c.times.collect { text }.join(' ')
end 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-12T20:30:40.543

我是 ruby​​ 的新手，但我认为这个解决方案对我很有效，我自己想出了它。

```
def repeat(word, i=2)
  word + (" #{word}" * (i-1))   
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-24T21:13:39.343

```
def repeat(text, c=2)
  print Array.new(c, text).join(' ')
end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-04T07:33:40.500

```
def repeat(text, c=2)
  print ([text]*c).join(' ')
end 
```

也许更容易阅读。除非，有什么理由改用 .collect 方法吗？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-10T06:56:39.140

你可以试试这个：

```
 def repeat(text, c=2)
   print ((text + ' ')*c).strip
 end 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-13T21:50:43.657

我没有看到创建数组（有或没有 collect()）然后调用 join() 的意义。这也有效：

```
def repeat(text, c=2)
  c.times { |i| print text; print ' ' unless i+1 == c }
end 
```

虽然，它有点冗长（可以说不像红宝石），但它做的工作更少（这可能更有意义）。

# algorithm - 根据属性权重查找对象

> ID：14795430
> 
> 赞同：1
> 
> 时间：2013-02-10T06:47:13.210
> 
> 标签：algorithm, search, data-structures, storage

假设我有一堆具有很多属性的对象。在我的系统中，我知道属性的总集，并且在任何给定时间，我都可以为这些属性生成一组权重。存储对象的最佳方法是什么，以便我能够根据这些属性权重找到前 n 个对象。

例如

对象 A => [attribute1，attribute2，attribute4] 对象 B => [attribute2，attribute5]

权重 => {attribute1 => 0.5，attribute2 => 1.2，attribute3 => 1，attribute4 => -1，attribute5 => 10}

使用这些权重： 对象 A 的得分为 0.5 + 1.2 + (-1) = .7 对象 B 的得分为 1.2 + 10 = 11.2

所以对象 B 将是顶部对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:13:31.907

我会将对象维护在一个数组中。当需要找到权重最高的对象时，我会将数组放入 qsort。qsort 的比较例程将通过添加对象属性的权重来比较给定对象的权重。将数组中的对象按加权顺序排序后，取前n个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:57:51.440

如果我正确理解了这个问题，最好的方法是使用标准的平衡搜索树（如 AVL-trees、RB-trees、Cartesian trees.std::set in c++）。在这棵树上我会存储对

```
<AttributesWeightsSum, ObjectID>. 
```

然后，插入和删除对象将花费 O(P + logN) 时间，其中 P 是计算属性权重总和的复杂度（即 O(max_attributes_in_objects_count)），N 是集合中的最大对象数。通过遍历这棵树，找到前 K 个对象的 ID-s 将只是 O(K)。

如果您不必枚举前 K 个对象，而只找到一个顶部对象，则可以使用包含与上述相同对的二叉堆来代替平衡搜索树。

# python - GUI中具有长进程的选项卡都调用同一个实例？[用于将对象传递到 GUI 的 EDITED-QThread 和 QObject]

> ID：14795439
> 
> 赞同：1
> 
> 时间：2013-02-10T06:48:54.083
> 
> 标签：python, multithreading, qt, user-interface, matplotlib

**编辑#3：** tcaswell 已经解决了我原来的问题中的一些问题，但是现在我似乎引用了一个对象的同一个实例，而我应该有几个并行。（请参阅 tcaswell 答案的评论部分）

**原始问题：** 我想知道是否有人对我在将用户创建的对象传递给 GUI 时遇到的问题有任何见解，以便 GUI 将自行刷新而不是移动到“不响应”。我知道这是一个相当普遍的问题，我已经阅读了几个论坛试图了解 QThreads、信号、插槽、多处理等，但仍然遇到问题。我现在正在避免出现灰显的窗口，但是现在当我希望它在后台启动几个大型进程时，我的程序根本什么都不做。

我的项目需要在自己的进程中运行多个选项卡，但每个选项卡都有自己的数据以显示在 matplotlib 图中。我有几个按钮可以启动数据处理并显示 matplotlib 图中的变化。很多关于如何组织阈值的想法都来自这个线程。这是按下按钮后启动的功能：

```
# This appears to be where the problem lies because this should initialize all of the processes
def process_tabs(self):
    for special_object in self.special_objects_list:
        thread = QtCore.QThread(parent=self)
        worker = Worker(special_object)
        worker.moveToThread(thread)
        worker.signal.connect(self.update_GUI)
        thread.start()
    return 
```

工作人员应该在一个循环中创建一大堆信号，发送对象以更新 GUI。这是我制作的工人阶级：

```
# This class performs the iterative computation that needs to update the GUI
# the signals it send would *ideally* be special_obect objects so any of the parameters can be shown
class Worker(QtCore.QObject):
    signal = QtCore.pyqtSignal(QtCore.QObject)
    done = QtCore.pyqtSignal()
    def __init__(self, special_object):
        QtCore.QObject.__init__(self)
        self.special_object = special_object
    @QtCore.pyqtSlot()
    def process_on_special_object(self):
        # do a long fitting process involving the properties of the special_object
        for i in range(0,99999999999999999):
            self.special_object.Y += .1
            self.signal.emit(self.special_object)
        self.done.emit()
        return 
```

感谢您对此的任何帮助，非常感谢。

**编辑：** 我重新编写了代码以遵循 tcaswell 的模式，并更改了 python 插槽装饰器以将 special_objects 传递给 update_GUI 插槽。

**再次编辑：**我添加了 time.sleep(0.03)，因此 GUI 将保持响应。这是完整形式的新代码：

```
import multiprocessing as mp
from PyQt4 import QtGui, QtCore
import numpy as np
import matplotlib
matplotlib.use('QtAgg')
from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas
from matplotlib import figure
import sys
import lmfit
import time
# This object will just hold certain objects which will help create data objects ato be shown in matplotlib plots
# this could be a type of species with properties that could be quantized to a location on an axis (like number of teeth)
#, which special_object would hold another quantization of that property (like length of teeth) 
class object_within_special_object:
    def __init__(self, n, m):
        self.n = n
        self.m = m
    def location(self, i):
        location = i*self.m/self.n
        return location
    def NM(self):
        return str(self.n) + str(self.m)
# This is what will hold a number of species and all of their properties, 
# as well as some data to try and fit using the species and their properties
# I made this inherit QObject becuase I figured it *may* be more acceptable to send as a signal if the class inherited a PyQt4 class
class special_object(QtCore.QObject):
    def __init__(self, name, X, Y):
        QtCore.QObject.__init__(self)
        self.name = name
        self.X = X
        self.Y = Y
        self.params = lmfit.Parameters()
        self.things = self.make_a_whole_bunch_of_things()
        for thing in self.things:
            self.params.add('something' + str(thing.NM()) + 's', value = 3)
    def make_a_whole_bunch_of_things(self):
        things = []
        for n in range(0,20):
            m=1
            things.append(object_within_special_object(n,m))
        return things
# a special type of tab which holds a (or a couple of) matplotlib plots and a special_object ( which holds the data to display in those plots)
class Special_Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    def __init__(self, parent, tmp_so):
        QtGui.QTabWidget.__init__(self, parent)
        self.special_object = tmp_so
        self.grid = QtGui.QGridLayout(self)
        # matplotlib figure put into tab
        self.fig = figure.Figure()
        self.plot = self.fig.add_subplot(111)
        self.line, = self.plot.plot(0, 0, 'r-')
        self.canvas = FigureCanvas(self.fig)
        self.grid.addWidget(self.canvas)
        self.canvas.show()
        self.canvas.draw()
        self.canvas_BBox = self.plot.figure.canvas.copy_from_bbox(self.plot.bbox)
        self.ax1 = self.plot.figure.axes[0]
        thread = QtCore.QThread(parent=self)
        self.worker = Worker(self.special_object)
        self.worker.moveToThread(thread)
        self.worker.update_signal.connect(self.update_GUI)
        #        self.worker.done_signal.connect(?)
        self.start_comp.connect(self.worker.process_on_special_object)
        thread.start()

    @QtCore.pyqtSlot(special_object)
    def update_GUI(self, tmp_so):
        """
        have the tab update it's self
        """
        # change the GUI to reflect changes made to special_object
        self.line.set_data(tmp_so.X, tmp_so.Y)
        self.ax1.set_xlim(tmp_so.X.min(), tmp_so.X.max())
        self.ax1.set_ylim(0, tmp_so.Y.max() + 0.05*tmp_so.Y.max())
        self.plot.draw_artist(self.line)
        self.plot.figure.canvas.blit(self.plot.bbox)

    def start_computation(self):
        self.start_comp.emit()

# This class performs the iterative computation that needs to update the GUI
# the signals it send would *ideally* be special_obect objects so any of the parameters can be shown
class Worker(QtCore.QObject):
    update_signal = QtCore.pyqtSignal(QtCore.QObject)
    done_signal = QtCore.pyqtSignal()
    def __init__(self, tmp_so):
        QtCore.QObject.__init__(self)
        self.tmp_so = tmp_so

    @QtCore.pyqtSlot()
    def process_on_special_object(self):
        # do a long fitting process involving the properties of the special_object
        for i in range(0,999):
            self.tmp_so.Y += .1
            time.sleep(0.03)
            self.update_signal.emit(self.tmp_so)
        self.done_signal.emit()
        return

# This window just has a button to make all of the tabs in separate processes
class MainWindow(QtGui.QMainWindow):
    process_signal = QtCore.pyqtSignal()
    def __init__(self, parent = None):
        # This GUI stuff shouldn't be too important
        QtGui.QMainWindow.__init__(self)
        self.resize(int(app.desktop().screenGeometry().width()*.6), int(app.desktop().screenGeometry().height()*.6))
        self.tabs_list = []
        self.special_objects_list = []
        central_widget = QtGui.QWidget(self)
        self.main_tab_widget = QtGui.QTabWidget()
        self.layout = QtGui.QHBoxLayout(central_widget)
        self.layout.addWidget(self.main_tab_widget)
        button = QtGui.QPushButton('Open Tabs')
        self.layout.addWidget(button)
        QtCore.QObject.connect(button, QtCore.SIGNAL("clicked()"), self.open_tabs)
        button2 = QtGui.QPushButton('process Tabs')
        self.layout.addWidget(button2)
        QtCore.QObject.connect(button2, QtCore.SIGNAL("clicked()"), self.process_tabs)
        self.setCentralWidget(central_widget)
        central_widget.setLayout(self.layout)

    # Here we open several tabs and put them in different processes
    def open_tabs(self):
        for i in range(0, 10):
            # this is just some random data for the objects
            X = np.arange(1240.0/1350.0, 1240./200., 0.01)
            Y = np.array(np.e**.2*X + np.sin(10*X)+np.cos(4*X))
            # Here the special tab is created
            temp_special_object = special_object(str(i), X, Y)
            new_tab = Special_Tab(self.main_tab_widget, temp_special_object)
            self.main_tab_widget.addTab(new_tab, str(i))
            # this part works fine without the .start() function
            self.tabs_list.append(new_tab)
        return
    # This appears to be where the problem lies because this should initialize all of the processes
    def process_tabs(self):
        for tab in self.tabs_list:
            tab.start_computation()

        return

if __name__ == "__main__":
    app = QtGui.QApplication([])
    win = MainWindow()
    win.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:46:43.753

首先，你从来没有真正调用过`process_on_special_object`，所以计算永远不会运行。

其次，我认为您没有正确理解信号和插槽。把它们想象成带有止回阀的管道。A`Signal`是管道的开口端，东西只能流出，a`Slot`是开口端，东西只能流入。当您连接`Signal`到时，`Slot`您正在将输出修补到输入。当你打电话`emit`给`Signal`你时，你把东西推到了管道里。您可以将单个连接`Signal`到多个`Slots`以及将多个连接`Signals`到单个`Slot`.

第三，注意不要用变量名掩盖你的类名（你似乎同时使用`special_object`两者）

第四，你创建了无数个线程和工作线程，但对它们不做任何事情。我建议进行重大的设计更改。你应该认为这个`Special_Tab`类是完全自包含的，封装了图、worker 和它的线程：

```
class Special_Tab(QtGui.QTabWidget):
    start_comp = QtCore.pyqtSignal()
    kill_thread = QtCore.pyqtSignal()
    def __init__(self, parent, tmp_so):
        QtGui.QTabWidget.__init__(self, parent)
        self.special_object = tmp_so
        self.grid = QtGui.QGridLayout(self)
        # matplotlib figure put into tab
        self.fig = figure.Figure()
        self.plot = self.fig.add_subplot(111)
        self.line, = self.plot.plot(0, 0, 'r-')
        self.canvas = FigureCanvas(self.fig)
        self.grid.addWidget(self.canvas)
        self.canvas.show()
        self.canvas.draw()
        self.canvas_BBox = self.plot.figure.canvas.copy_from_bbox(self.plot.bbox)
        ax1 = self.plot.figure.axes[0]
        thread = QtCore.QThread(parent=self)
        self.worker = Worker(self.special_object)
        self.worker.moveToThread(thread)
        self.worker.update_signal.connect(self.update_GUI)
        #        self.worker.done_signal.connect(?)
        self.start_comp.connect(self.worker.process_on_special_object)
        self.kill_thread.connect(thread.quit)
        thread.start()

    @QtCore.pyqtSlot(special_object)
    def update_GUI(self, tmp_so):
        """
        have the tab update it's self
        """
        # change the GUI to reflect changes made to special_object
        self.line.set_data(tmp_so.X, tmp_so.Y)
        self.plot.draw_artist(self.line)
        self.plot.figure.canvas.blit(self.plot.bbox)

    def start_computation(self):
        self.start_comp.emit()

    def closeEvent(self, ce):
        self.kill_thread.emit()
        QtGui.QTabWidget.closeEvent(self, ce) 
```

随着相关的变化`Worker`

```
# This class performs the iterative computation that needs to update the GUI
# the signals it send would *ideally* be special_obect objects so any of the parameters can be shown
class Worker(QtCore.QObject):
    update_signal = QtCore.pyqtSignal(QtCore.QObject)
    done_signal = QtCore.pyqtSignal()
    def __init__(self, special_object):
        QtCore.QObject.__init__(self)
        self.special_object = special_object

    @QtCore.pyqtSlot()
    def process_on_special_object(self):
        # do a long fitting process involving the properties of the special_object
        for i in range(0,99999999999999999):
            self.special_object.Y += .1
            self.signal.emit(self.special_object)
        self.done.emit()
        return 
```

这使您的主窗口更简单

```
# This window just has a button to make all of the tabs in separate processes
class MainWindow(QtGui.QMainWindow):
    process_signal = QtCore.pyqtSignal()
    def __init__(self, parent = None):
        ## snipped
        pass

    # Here we open several tabs and put them in different processes
    def open_tabs(self):
        for i in range(0, 10):
            # this is just some random data for the objects
            X = np.arange(1240.0/1350.0, 1240./200., 0.01)
            Y = np.array(np.e**.2*X + np.sin(10*X)+np.cos(4*X))
            # Here the special tab is created
            temp_special_object = special_object(str(i), X, Y)
            new_tab = Special_Tab(self.main_tab_widget, temp_special_object)
            self.main_tab_widget.addTab(new_tab, str(i))
            # this part works fine without the .start() function
            self.tabs_list.append(new_tab)
        return
    # This appears to be where the problem lies because this should initialize all of the processes
    def process_tabs(self):
        for tab in self.tabs_list:
            tab.start_computation()

        return
    # This should be the 'slot' which the signal is communicating to
    def update_GUI(self, special_object):
        pass 
```

# javascript - 获取 innerHtml 但删除不需要的标签

> ID：14795441
> 
> 赞同：1
> 
> 时间：2013-02-10T06:49:15.570
> 
> 标签：javascript, jquery, html, css

我想知道如何在没有 html 标签的情况下获得 innerHtml。只有文字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T06:50:44.087

如果您使用的是 jquery，请使用`$('myelem').text()`.

API 参考：[http ://api.jquery.com/text/](http://api.jquery.com/text/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T07:12:27.443

如果您不使用 jQuery（或者即使您使用），此链接将探讨一些不同的选项（例如 innerText 与 textContent），以及它们在浏览器之间的不同之处：

[http://www.davidtong.me/innerhtml-innertext-textcontent-html-and-text/](http://www.davidtong.me/innerhtml-innertext-textcontent-html-and-text/)

基本上，并非所有方法都适用于所有浏览器，有些带换行符，而有些则不适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T06:55:15.820

您可以改用 text() 函数：

采用`$("your_element").text()`

您还可以使用：

```
document.getElementById("your_element").textContent; 
```

# php - 将字符串转换为整数的函数——调用未定义的函数

> ID：14795446
> 
> 赞同：-1
> 
> 时间：2013-02-10T06:49:52.170
> 
> 标签：php

我正在创建一个将用户首字母 (STRING) 转换为用户 ID (INT) 的函数

问题是当我调用该函数时，我会调用 undefined func 错误，因为在源代码中找不到以下声明的函数！

```
// connect to database -- this works, I checked it
function convertRadInitToRadID($radInits){
    $sqlGetRadID="SELECT id FROM sched_roster WHERE radInitials == '".$radInits."'";
    $resultGetRadID=mysql_query($sqlGetRadID);
    $radID=mysql_result($resultGetRadID,0);
    return $radID;
} 
```

...然后我创建并排列（$radNotOnVacay_and_NonMRNotonVacayWeekBeforeAndAfter）的用户首字母，它可以正常工作我独立测试它

```
$randKey=rand(0,(count($radNotOnVacay_and_NonMRNotonVacayWeekBeforeAndAfter)-1));
$randRad=$radNotOnVacay_and_NonMRNotonVacayWeekBeforeAndAfter[$randKey];
$randAssignedRadID=convertRadInitToRadID($randRad);  // call to undefined function error here 
```

当我查看源代码时，函数定义代码（我定义函数的地方）在源代码中无处可见。很奇怪。我尝试将它放在脚本的不同区域，同样的错误。函数定义被适当地声明并被包裹在 .

很奇怪。该功能只是没有出现。引号，语法，分号等都在现场。

没有语法错误。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:07:13.147

我非常同意答案#1。

此外，如果您在调用函数后定义函数，则在 php 中会出现常见问题。即您的调用代码在函数定义之前，那么它将不会运行并且会给出未定义函数的错误。

您可以创建一个类，然后在该类中定义此函数，在调用时您可以在 $this->function(args) 的帮助下调用该函数

我认为这将解决您的问题，而我正在尝试在我的机器上运行您的代码，让我们看看会发生什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:58:46.183

可能是您的函数是某个类的方法。因此，如果是，您应该以另一种方式使用它：

```
MyClass::convertRadInitToRadID($radInits) // if static method 
```

或者像这样

```
$class = new MyClass();
$class ->convertRadInitToRadID($radInits) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T07:32:56.547

我找到了答案：我使用的是 Jquery UI 选项卡.... 必须与选项卡发生冲突。当我在没有标签的情况下运行代码时，没有问题。

感谢您的“==”修复……感谢。我的错

感谢您提醒我 80 char varname 代码限制

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T07:02:01.013

试图理解您的问题...您是否尝试使用 JavaScript 调用该函数？如果是这样，请记住 JavaScript 在浏览器上运行，而 PHP 在服务器上运行（这就是为什么当您“查看源代码”时在任何地方都看不到该函数的原因）。要将数据从 JavaScript 发送回 PHP，您应该使用 AJAX。

# android - 在 android 应用程序中使用统一 3d 模型

> ID：14795451
> 
> 赞同：2
> 
> 时间：2013-02-10T06:50:22.570
> 
> 标签：android, unity3d

我正在开发一个**android AR 应用程序**。在这个应用程序中，用户可以放置家具的 3d 模型并与之交互。我想在统一 3d 中设计这些模型。我正在使用**vuforia sdk**进行应用程序开发。为此，我还下载了 vuforia unity 扩展。但我对使用统一一无所知。 **现在的问题是我不确定我可以在我的应用程序中使用统一模型吗？如果不是，那么我应该使用哪个软件来设计这些 3d 模型？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:20:32.020

Unity 只是一个`Game Engine`. 您不能使用它来设计您的 3D 模型。您应该使用**3Ds Max**、**Blender**、**Maya等 3D 建模软件**等 3D 建模软件对您的 3D 家具进行建模，然后将它们导入 Unity。

在此之后，您可以使用 Unity 的 Vuforia 插件来创建您的增强现实应用程序。如果您的应用程序不是那么复杂，那么将 Unity 与 Vuforia 一起使用只需拖放即可。

检查[Vuforia 教程系列](http://www.youtube.com/watch?feature=player_embedded&v=WrEnREOT1F0)。这真的很容易遵循。

# java - 使用剪切的 Java 2d 立方体效果

> ID：14795453
> 
> 赞同：1
> 
> 时间：2013-02-10T06:50:28.860
> 
> 标签：java, graphics, 3d, 2d, affinetransform

我已经坚持了大约一个星期，我在整个互联网上搜索，试图找到如何使用剪切创建 2d 立方体效果的解决方案，我尝试了许多方程，这是我一周内得到的最接近的方程，我相信这纯粹是数学，但我无法弄清楚。它适用于多人游戏，这是 Youtube 上的一段视频，讲述了我目前拥有的剪毛视频。

[https://www.youtube.com/watch?v=J0qP7T0k6xk](https://www.youtube.com/watch?v=J0qP7T0k6xk)

这是我的代码：

```
public void addWall(Graphics2D g2d, ImageIcon img, int objX, int objY, int dir) {
    //objX = objX/16;
    objX = objX*32;
    //objY = objY/16;
    objY = (objY+4)*32;
    int OffsetX = screen.width;
    int OffsetY = screen.height*0;

    if(dir == 1) {
        //g2d.drawImage(img.getImage(), (((2*objX)+OffsetX)-(player.x*2)), (((2*objY)+OffsetY)-(player.y*2)) ,32*SCALE, ((32*SCALE)*-2)-(player.y-objY), null);
    } else if(dir == 0) {
        g2d.drawImage(img.getImage(), (((2*objX)+OffsetX)-(player.x*2)), (((2*objY)+OffsetY-(32*SCALE))-(player.y*2)) ,32*SCALE, ((32*SCALE)*-2)-(player.y-objY), null);

    }

    double skewX = (((player.x-objX)*2)*.100)*.1;
    double skewY = 0;
    //int x = (skewX < 0) ? -skewX*(32) : 0;

    AffineTransform reset = g2d.getTransform();
    AffineTransform at = AffineTransform.getTranslateInstance((-skewX*100) , 0);

    at.shear(skewX, skewY);

    //g2d.translate((((2*objX)+OffsetX)-(player.x*2)), (((2*objY)+OffsetY)-(player.y*2)));

    // g2d.scale(SCALE, (((SCALE)*-2)-(player.y-objY)));
    g2d.setTransform(at);

    g2d.drawImage(img.getImage(), (((2*objX)+OffsetX)-(player.x*2)), (((2*objY)+OffsetY)-(player.y*2)) ,32*SCALE, ((32*SCALE)*-2)-(player.y-objY), null);

    g2d.setTransform(reset);
    //g2d.dispose();

}

public void addRoof(Graphics2D g2d, ImageIcon img, int objX, int objY) {
    //objX = objX/16;
    objX = objX*32;
    //objY = objY/16;
    objY = (objY+2)*32;
    int shadowY = (objY+3)*32;
    int OffsetX = screen.width;
    int OffsetY = screen.height*0;

    /* SHADOW */
    /* SHADOW */
    ImageIcon shadow = new ImageIcon("./res/shadowPixel.png");
    g2d.drawImage(shadow.getImage(), (2*objX+OffsetX)-(player.x*2), (2*objY+(32*SCALE)+OffsetY)-(player.y*2), 32*SCALE, 32*SCALE, null);
    /* SHADOW */
    /* SHADOW */

    g2d.drawImage(img.getImage(), (3*objX+OffsetX)-(player.x*3), (3*objY+OffsetY)-(player.y*3), 32*SCALE, 32*SCALE, null);
} 
```

# vb.net - 插入排序并使用相关数组

> ID：14795465
> 
> 赞同：1
> 
> 时间：2013-02-10T06:53:03.223
> 
> 标签：vb.net

我需要一些关于这种插入排序的帮助，到目前为止我的代码是这样的：

```
Private Sub SortedList_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim currentitem As Integer = 2
    While currentitem <= numitems
        currentdataitem = frmEntry.starname(currentitem)
        comparison = 1
        finish = False
        While comparison < currentitem And finish = False
            If currentdataitem < frmEntry.starname(comparison) Then
                shuffleitem = currentitem
                While shuffleitem > comparison
                    frmEntry.starname(shuffleitem) = frmEntry.starname(shuffleitem - 1)
                    shuffleitem = shuffleitem - 1
                End While
                frmEntry.starname(comparison) = currentdataitem
                finish = True
            End If
            comparison = comparison + 1
        End While
        currentitem = currentitem + 1
    End While
    arrayindex = 0
    For Me.arrayindex = 1 To numitems
        lstsorted.Items.Clear()
        lstsorted.Items.Add(frmEntry.starname(arrayindex))
        lstsorted.Items.Add(frmEntry.DOB(arrayindex))
        lstsorted.Items.Add(frmEntry.rank(arrayindex))
    Next
End Sub 
```

这个插入对他们的名字进行了排序，但我还需要使用他们的 DOB 和他们的等级，我应该在我的 Visual Basic 代码中的哪个位置放置这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:34:43.513

只要移动starname的元素，就可以移动DOB和Rank的对应元素。

# java - JPA：如何创建与实体相同类型的字段？

> ID：14795468
> 
> 赞同：1
> 
> 时间：2013-02-10T06:53:32.463
> 
> 标签：java, hibernate, jakarta-ee, jpa

我的课看起来像

```
@Entity
public class Version extends MutableEntity {
    @Column(nullable = false)
    private String name;
    @Column(nullable = false)
    @Enumerated(EnumType.STRING)
    private VersionType type;
    @Column(nullable = false)
    @Enumerated(EnumType.STRING)
    private VersionStatus status;
    @Column(nullable = true)
    private DateTime publishedOn;
    @Column(nullable = true)
    private DateTime retiredOn;
    @Column
    private Version parentVersion; 
```

我想要一个`parentVersion`与 相同的类型`Version`，但我的测试失败了

```
@Test
public void testVersion() {
    Version version = new Version("testVersion", VersionType.MAJOR);
    version = crudService.create(version);
    assertNotNull(version.getId());
} 
```

我看到错误为

```
Caused by: org.hibernate.MappingException: Could not determine type for: com.myorg.project.versioning.entities.Version, at table: Version, for columns: [org.hibernate.mapping.Column(parentVersion)] 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:51:27.930

它不是基本属性。它是关系，因为价值是其他实体。因此应该使用[@ManyToOne注释：](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToOne.html)

```
@ManyToOne
private Version parentVersion; 
```

如果需要双向关系（父母知道孩子），可以通过添加以下内容来完成：

```
@OneToMany (mappedBy = "parentVersion")
private List<Version> childVersions; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:30:33.177

您在 处缺少一些注释`parentVersion`。Hibernate 不知道如何在数据库中映射此列。

添加`@JoinColumn`到您的字段，hibernate 将使用它的@Id 字段。

# android - 如何在 locationlistener 中使用 onlocationchanged 方法

> ID：14795470
> 
> 赞同：1
> 
> 时间：2013-02-10T06:53:59.377
> 
> 标签：android

你好，我对 android 很陌生。我正在制作一个需要精确（可接受大约 50m 精度）用户位置的应用程序。我正在使用 locationmanager 和 locationlistener 。每当我启动应用程序时，我都需要返回用户位置。问题是 locationlistener 中的 onlocationchanged 方法仅在它们更改时才返回纬度经度。我如何获取用户位置？

`locmgr.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, loclist_netwk);` 这就是我如何调用我已经实现 locationlistener 的类。

`

```
package com.example.gpsmanager;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class MyLocationListener extends Activity implements LocationListener
{
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylocation_layout);
    }
    @Override

    public void onLocationChanged(Location loc) {
        // TODO Auto-generated method stub
        loc.getLatitude();
        loc.getLongitude(); 
        String text="my current location is"+"lat: "+loc.getLatitude()+"long: "+loc.getLongitude();
        //TextView text1=(TextView) findViewById(R.id.textView1);
        //text1.setText(text+"");
        Toast.makeText(MyLocationListener.this, text, Toast.LENGTH_LONG).show();        
    }

    @Override
    public void onProviderDisabled(String arg0) {
        // TODO Auto-generated method stub
        String text="GPS Provider not availabe";
    }

    @Override
    public void onProviderEnabled(String arg0) {
        // TODO Auto-generated method stub
        String text="GPS Provider availabe";
    }

    @Override
    public void onStatusChanged(String arg0, int arg1, Bundle arg2) {
        // TODO Auto-generated method stub

    }

} 
```

` pllzz plzz 帮助大家...谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T05:54:56.277

```
 For user location you can use Reverse Geocoding 

      For it u have to send only lat,long.
Code is below:-

public String getAddress(double lat, double lng,Context mContext) {
        Geocoder geocoder = new Geocoder(mContext, Locale.getDefault());
        try {
            List<Address> addresses = geocoder.getFromLocation(lat, lng,1);
            String add="";
            for(int i=0;i<addresses.size();i++){
            Address obj = addresses.get(i);
            //String = obj.getAddressLine(i);
            add = add+obj.getAddressLine(i)+","+obj.getLocality()+","+obj.getAdminArea()+","+obj.getCountryName();

            Log.v("IGA", "\n"+"Address " + add);

            }
            return add;
            } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(mContext, e.getMessage(), Toast.LENGTH_SHORT).show();
            return null;
        }
    } 
```

# c - 如何将 C unsigned int 中的底部 n 位清零？

> ID：14795473
> 
> 赞同：1
> 
> 时间：2013-02-10T06:54:07.410
> 
> 标签：c

我正在尝试编写自己的 C 楼函数。我被困在这个代码细节上。我只想知道如何将无符号整数的底部 n 位清零。

例如，要将 51.5 舍入到 51.0，我需要将底部 18 位清零，并保留顶部 14。由于它是一个底函数，我想制作一个掩码以将底部（23 减去指数）位从浮动表示。我知道如何为这样的个别情况制作面具，但我不确定如何对其进行编码以使其适用于所有人。请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T07:01:41.947

一个更简单的方法就是这样做：

```
value = (value >> bits) << bits 
```

因为左移将用零填充它，而不是那里的任何东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T06:58:37.420

将一个数左移 N 位。减一。反转位。并使用您需要掩盖的数字。

```
1 << 14 = 00000000000000000010000000000000
     -1 = 00000000000000000001111111111111
     ~  = 11111111111111111110000000000000 
```

当你`and`这样做时，掩码中的 1 将保留输入，掩码中的 0 会将结果设置为 0。

# jquery - 重命名同位素砌体中的布局

> ID：14795475
> 
> 赞同：2
> 
> 时间：2013-02-10T06:54:36.987
> 
> 标签：jquery, rename, jquery-isotope, typeerror

我想在一页中使用几个同位素实例。其中一个实例是角落印章，而其他实例是常规的“砌体”印章

我想用新名称重命名cornerstamp - `homeMasonry`。

如果我从[http://isotope.metafizzy.co/docs/extending-isotope.html](http://isotope.metafizzy.co/docs/extending-isotope.html)重命名这两个函数，我会遇到一个`Uncaught TypeError: Cannot set property 'cols' of undefined`

这是2个功能

```
 $.Isotope.prototype._homeMasonryReset = function() {
    // layout-specific props
    this.masonry = {};
    this._getSegments();
    var i = this.masonry.cols;
    this.masonry.colYs = [];
    while (i--) {
      this.masonry.colYs.push( 0 );
    }

    if ( this.options.masonry.cornerStampSelector ) {
      var $cornerStamp = this.element.find( this.options.masonry.cornerStampSelector ),
          stampWidth = $cornerStamp.outerWidth(true) - ( this.element.width() % this.masonry.columnWidth ),
          cornerCols = Math.ceil( stampWidth / this.masonry.columnWidth ),
          cornerStampHeight = $cornerStamp.outerHeight(true);
      for ( i = Math.max( this.masonry.cols - cornerCols, cornerCols ); i < this.masonry.cols; i++ ) {
        this.masonry.colYs[i] = cornerStampHeight;
      }
    }
  };

    $.Isotope.prototype._homeMasonryResizeChanged = function() {
    return true;
  }; 
```

和同位素调用

```
 $container.isotope({
      layoutMode: 'homeMasonry',
    itemSelector: '.item',
      homeMasonry: {cornerStampSelector: '.corner'}
  }); 
```

我用 jsfiddle 重新创建了这个问题

[http://jsfiddle.net/DQydj/133/](http://jsfiddle.net/DQydj/133/)

看来同位素不喜欢我的重命名。有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T01:22:28.930

除了重命名布局函数外，您还必须重命名引用原始砌体对象的变量。换句话说`this.masonry`，必须更改为`this.homeMasonry`.

# c++ - 为什么字符串类没有预定义 << 运算符 (operator<<) 以便字符串像 ostringstreams 一样工作？

> ID：14795481
> 
> 赞同：4
> 
> 时间：2013-02-10T06:56:24.117
> 
> 标签：c++

在我看来，定义 << 运算符 (operator<<) 以直接使用字符串比使用 ostringstreams 然后转换回字符串更优雅。c++ 没有开箱即用的原因吗？

```
#include <string>
#include <sstream>
#include <iostream>
using namespace std;

template <class T> 
string& operator<<(string& s, T a) {
    ostringstream ss;
    ss << a;
    s.append(ss.str());
    return s;
}
int main() {
    string s;
    // this prints out: "inserting text and a number(1)"
    cout << (s << "inserting text and a number (" << 1 << ")\n");

    // normal way
    ostringstream os; 
    os << "inserting text and a number(" << 1 << ")\n";
    cout << os.str();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:09:41.920

流包含额外的状态。想象一下，如果这是可能的：

```
std::string str;
int n = 1234;
str << std::hex;
str << n;
return str; // returns "0x4d2" (or something, I forget) 
```

为了维持这个额外的状态，字符串必须有这个状态的存储空间。C++ 标准委员会（以及一般的 C++ 程序员）普遍反对过多的资源消耗，其座右铭是“只为你使用的东西付费”。因此，字符串类中没有额外的字段。

**主观的回答**是：我认为这个`std::string`类一开始就设计得很糟糕，特别是与 C++ 优秀标准库的其他部分相比，添加特性`std::string`只会让事情变得更糟。这是一个非常主观的意见，请随意将我视为一个疯狂的疯子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T07:13:37.347

字符串作为输出流的想法的问题是它们会变得太重。

字符串旨在“保存字符串数据”，而不是格式化某些输出。输出流具有很重的“状态”，可以对其进行操作（参见 参考资料`<iomanip>`），因此必须进行存储。这意味着，当然，这必须为每个程序中的*每个*字符串存储，但几乎没有一个被用作输出流；所以这是一种巨大的资源浪费。

C++ 遵循“零开销”设计原则（或至少不超过完全必要的开销）。没有一个不会增加任何不必要开销的字符串类将严重违反此设计原则。如果是这种情况：人们在开销严重的情况下会怎么做？使用 C 弦……哎呀！

在 C++11 中，另一种方法是使用[`operator+=`](http://en.cppreference.com/w/cpp/string/basic_string/operator+=)with[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)附加到字符串，也可以像`operator<<`输出流的一样链接。`+=`如果您愿意，可以将两者都包装`to_string`在一个不错`operator<<`的字符串中：

```
template <class Number> 
std::string& operator<<(std::string& s, Number a) {
    return s += std::to_string(a);
}
std::string& operator<<(std::string& s, const char* a) {
    return s += a;
}
std::string& operator<<(std::string& s, const std::string &a) {
    return s += a;
} 
```

您的示例，使用此方法更新：http: **[//ideone.com/4zbVtD](http://ideone.com/4zbVtD)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:05:49.820

现在可能迷失在时间的深处，但格式化的输出*总是*与 C 中的流相关联（因为它们没有“真正的”字符串），这可能已经被带到 C++ 中（毕竟，这是带有类的 C） . 在 C 中，格式化为字符串的方法是使用output-to-stream 函数`sprintf`的变体。`fprintf`

显然是我的猜想，但有人可能与您自己类似地认为，流中的这些格式化内容也可以用于字符串，因此他们将流类子类化以生成一个使用字符串作为“输出”的类。

这似乎是让它尽快工作的优雅解决方案。否则，您将在流和字符串中重复格式化代码。

# java - 如何使用 Java 根据长度拆分单词？

> ID：14795489
> 
> 赞同：-1
> 
> 时间：2013-02-10T06:57:27.000
> 
> 标签：java

将一个单词分成 2 到 4 个字符的最佳方法是什么？

例子：

*   "tundra" 可以是 "tun" & "dra" 或 "tund" & "ra"
*   "rainforest" 可以是 "ra" & "in" "fore" & "st"

是否有专门设计的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:29:42.020

看看这个[关于](https://stackoverflow.com/questions/12295711/split-a-string-at-every-nth-position)如何在每个第 n 个位置分割字符串的问题。然后，您只需将 n 从 2 迭代到 4 即可获得所有子字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:01:02.207

为什么不对字符串长度使用模运算？结果，您可以轻松地将字符串分成几部分。

# c# - WPF故事板动画不起作用

> ID：14795491
> 
> 赞同：2
> 
> 时间：2013-02-10T06:58:34.430
> 
> 标签：c#, wpf, animation, 3d, storyboard

我有我的自定义 3D 模型类 (Model)，其中包含 Visual3D 元素和一个`Storyboard`(sb) 来保存与该模型相关的动画。我正在尝试使用 旋转 Visual3D 元素，`Storyboard`但不幸的是它不起作用。

这是代码片段

```
public void AnimationRotate(Model model, double duration, double startTime, RepeatBehavior behaviour)
    {

        //Rotate transform 3D
        RotateTransform3D rotateTransform = new RotateTransform3D();

        //assign transform to the model
        model.Visual3D.Transform = Transform3DHelper.CombineTransform(model.Visual3D.Transform, rotateTransform);

        //define the rotation axis
        AxisAngleRotation3D rotateAxis = new AxisAngleRotation3D(new Vector3D(0, 0, 1), 180);

        //create 3D rotation animation
        Rotation3DAnimation rotateAnimation = new Rotation3DAnimation(rotateAxis, TimeSpan.FromSeconds(0.5));

        //rotation behaviour
        rotateAnimation.RepeatBehavior = behaviour;

        //start animation from time
        rotateAnimation.BeginTime = TimeSpan.FromSeconds(startTime);

        //begin animation - THIS WORKS FINE
       // rotateTransform.BeginAnimation(RotateTransform3D.RotationProperty, rotateAnimation);

        Storyboard.SetTargetProperty(rotateAnimation, new PropertyPath(RotateTransform3D.RotationProperty));
        Storyboard.SetTarget(rotateAnimation, rotateTransform);

        //add animation to the storyboard of the model
        model.sb.Children.Add(rotateAnimation);

        //BUT THIS APPROACH IS NOT WOKRING
        model.sb.Begin();

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T09:54:47.220

[此答案](https://stackoverflow.com/a/2340356/1136211)中描述了该问题。

而不是使用`Storyboard.SetTarget`您需要为转换和调用注册一个名称`Storyboard.SetTargetName`。此外，您必须调用[Storyboard.Begin(FrameworkElement)](http://msdn.microsoft.com/en-us/library/ms605709.aspx)并传递具有适当名称范围的 FrameworkElement 作为参数（`this`此处）。

```
RegisterName("RotateTransform", rotateTransform);
Storyboard.SetTargetName(rotateAnimation, "RotateTransform");
...
model.sb.Begin(this); 
```

* * *

另外我猜你需要在某个地方清除 Storyboard 的 Children，或者在动画开始时创建一个新的 Storyboard。

# java - java继承

> ID：14795493
> 
> 赞同：0
> 
> 时间：2013-02-10T06:58:41.237
> 
> 标签：java, inheritance, constructor

当我将此代码更改为`Member m1 = new Member ();`它时，它可以完美运行。为什么它不适用于超级类参考？请问有人可以解释吗？

```
public class Family {

String Surname = "Richard";
String Address = "No:10, High Street,Colombo";

}

public class Member extends Family{

String Name;
int age;

public void Details() {
    System.out.println("full Name ="+ Name +" "+ Surname);
    System.out.println("Age =" +age);
    System.out.println("Address =" + Address);
}

public static void main(String[] args) {
    Member m1 =  new Family ();

    m1.Name="Anne";
    m1.age=24;

    m1.Details();

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T07:00:41.933

您没有超类参考。您有一个子类引用持有对超类对象的引用，这完全是非法的。

其次，如果你想看到多态性生效，你需要在子类中定义你在超类中的方法。您只能在超类引用中调用该方法，该方法也在超类中定义。

所以，你基本上需要这个： -

```
Family m1 =  new Member(); 
```

然后在你的类中*定义*`details()`方法（是的，方法名称应该以小写字母开头） 。`Family`

现在，当您尝试访问`Member`. 为此，最好在类中使用*2-arg 构造函数*`Member`，并从该构造函数调用*2-arg 超级构造函数*（您需要显式执行此操作）或*0-arg 超级构造函数*（这是隐式的）

```
public Member(String name, int age) {
    this.name = name;
    this.age = age;
} 
```

并使用此构造函数创建对象。它将隐式调用*0-arg 超级构造函数*以使用其默认值初始化它的字段。如果要给它们一个值，可以在类中使用*4-arg 构造函数*`Member`，传递超类字段的 2-参数，然后从那里调用超类*2-arg 构造函数。*

我认为，您最好从一个好的教程开始，从一般的继承、访问说明符开始，然后继续学习多态性。

# php - PHP 无法连接到 Microsoft Access 数据库

> ID：14795496
> 
> 赞同：0
> 
> 时间：2013-02-10T06:59:46.957
> 
> 标签：php, database, ms-access, odbc

我正在尝试使用 PHP PDO 连接到 Microsoft Access 数据库，但收到以下错误消息：

> SQLSTATE[IM002] SQLDriverConnect: 0 [Microsoft][ODBC Driver Manager]未找到数据源名称，未指定默认驱动程序

错误发生在这一行：

```
 $dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb,*.accdb)};Dbq=C:\\wamp\\www\\phprestsql\\UTILITY.accdb"); 
```

我没有为数据库设置用户名，我也试过了

```
$dbh = new PDO("odbc:Driver={Microsoft Access Driver (*.mdb,*.accdb)};Dbq=C:\\wamp\\www\\phprestsql\\UTILITY.accdb;User=Admin"); 
```

问题仍然存在

可能是什么问题呢？我检查了 Access 数据库文件的路径，它是正确的。我正在为 PHP 使用 WAMP。

该系统是 Windows 7 家庭高级版。我需要安装一些 ODBC 驱动程序吗？

**编辑：** 我按照 HansUp 的建议下载了 ACE，但还是有同样的问题。我也尝试将我的文件转换为 .mdb，但仍然有同样的问题。在 PHP 代码中，我验证了 .mdb 文件确实存在。所以这一定是某种环境问题。

**更新** 忘了提到我在 Mac 上运行 Virtual Box。也许这就是问题所在。非常沮丧，然后转移到旧的 Windows Vista 32 位机器并使用所有 32 位工具设置环境。它在第一次运行中起作用。谢谢雷

# php - 使用ajax将参数传递给php文件时出错

> ID：14795497
> 
> 赞同：0
> 
> 时间：2013-02-10T06:59:54.630
> 
> 标签：php, javascript, ajax, curl, urlencode

我正在做一个从 Ip camera 录制视频的项目。我使用 ajax 运行我的程序后端，它使用 process.php 文件中的代码成功录制视频。但是，我正在尝试使每个用户的程序更加动态，并且我在将参数传递到我的下一页时遇到问题，即 record.php 我要传递的 2 个参数是电子邮件和 url 我尝试了以下方式将变量传递给我的进程。 php 使用 ajax 链接：

```
xmlhttp.open('GET','http://localhost/IPCAM/process.php?sh=1&url=<?php echo $url ?>&email=<?php echo $email ?>',true); 
```

这是完整的脚本。谁能建议我正确的方法来编写上述 url 以动态工作。

```
<script type="text/javascript">

function st()
{
                        if (window.XMLHttpRequest)
                        {
                            xmlhttp=new XMLHttpRequest();
                        }
                        else
                        {
                            xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
                        }
                        xmlhttp.onreadystatechange=function()
                        {
                            if (xmlhttp.readyState==4 && xmlhttp.status==200)
                            {
                            alert('stored');
                            }

                        }
                        xmlhttp.open('GET','http://localhost/IPCAM/process.php?sh=1&url=<?php echo $url ?>&email=<?php echo $email ?>',true);
                        xmlhttp.send();

setTimeout('st()',5000);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:34:28.607

尝试对您的 php 变量进行 URL 编码，例如：

```
xmlhttp.open('GET','http://localhost/IPCAM/process.php?sh=1&url=<?php echo urlencode($url) ?>&email=<?php echo urlencode($email); ?>',true); 
```

我以前用过模式。这假设包含上述代码的 JavaScript 页面实际上是一个 .php 文件。尽管设计应用程序的更好方法是将 javascript 作为外部文件包含在内，但在这种情况下，您应该执行以下操作：

```
$export_vars = array('url' => $url, 'email' => $email);
echo '<script type="text/javascript">' .
    'var userData = ' . json_encode($export_vars) . ";" .
    '</script>'; 
```

而您的初始 javascript 函数必须重写为：

```
function st(url, email) 
```

# jquery - 如何使用 jQuery Ajax 发送身份验证标头

> ID：14795498
> 
> 赞同：0
> 
> 时间：2013-02-10T06:59:56.627
> 
> 标签：jquery, ajax

我正在使用 domainAPI 站点（目前是免费的）来处理域可用性检查。他们的简短文档在[这里](http://www.domainapi.com/documentation/how-to-use-domainapi/servuces-provided/domain-availability-api.html)。

我对大部分内容都很陌生，所以我可能会忽略一些明显的东西。标题的第二部分是我的用户名和密码，加密为 base64，格式为 username:password。如果我直接访问该 url，相同的用户名和密码成功地使我可以访问。

我到目前为止的代码如下，但仍然失败：

```
$('#domain').keyup(function() {
    $("#loading").show();
    $.ajax({
        url: 'http://api.domainapi.com/v1/availability/example.com',
        type: 'GET',
        datatype: 'json',
        success: function() { alert("Success"); },
        error: function() { alert('Failed!'); },
        beforeSend: function setHeader(xhr) {xhr.setRequestHeader('Authorization', 'Basic ZW1iZXJza2VjaDp6eWFrc21hdnNvenY=');}
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:42:11.683

看起来您在这里遇到了跨域问题。

[如果服务器启用了 CORS 支持（有关更多信息，请参阅http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing) ），则只能跨域执行 AJAX 请求，并且快速检查`api.domainapi.com`并不建议这样做. 如果您打开浏览器的控制台，您应该会收到一条错误消息。

为了解决这个问题，您需要在您自己的服务器上实现某种代理（因为它与您的网页在同一个域上运行，应该可以用作 AJAX '目标'），这反过来会将请求转发到`api.domainapi.com`.

# database - PL/pgPSM 安装问题

> ID：14795499
> 
> 赞同：0
> 
> 时间：2013-02-10T07:00:00.407
> 
> 标签：database, postgresql

我一直在尝试在 postgres 中安装 PL/pgPSM，但没有取得多大成功。我尝试按照此页面底部的说明安装 PL/pgPSM [http://postgres.cz/wiki/SQL/PSM_Manual](http://postgres.cz/wiki/SQL/PSM_Manual)但 make 文件只是告诉我。

```
Makefile:18: ../../src/Makefile.global: No such file or directory
Makefile:19: /contrib/contrib-global.mk: No such file or directory
make: *** No rule to make target `/contrib/contrib-global.mk'.  Stop. 
```

当我尝试发出：

```
make USE PGXS=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T18:33:30.517

可能你还没有安装 PostgreSQL 的开发包。

我也不确定 PSM 在最新 Postgres 版本上的可编译程度。[**PSM0**](https://github.com/okbob/plpsm0)更现代，也更正确。

您应该知道，这两种实现都是高度实验性的，目前尚不支持。我正在重新实现 PSM0，但我相对远离生产使用。
我欢迎任何`PL/pgPSM`用户！:)

# regex - 在 Eclipse 中查找和替换“收藏夹”？

> ID：14795500
> 
> 赞同：2
> 
> 时间：2013-02-10T07:00:03.280
> 
> 标签：regex, eclipse, eclipse-plugin, eclipse-cdt

我使用 Eclipse CDT 进行 C 开发，并使用正则表达式自动执行许多繁琐的任务。我已经建立了一组非常复杂的正则表达式，我经常使用这些正则表达式，最终将它们保存在一个文本文件中。每次我想使用我常用的正则表达式之一时，我都必须在使用之前将查找和替换表达式复制到查找/替换对话框字段中（单独）。这可能非常耗时。有谁知道一个插件，它可以让我存储并从命名的 fjnd/replace 收藏夹中进行选择，然后我可以将其应用于编辑器中的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T18:32:06.130

“查找”和“替换”对话框有**记忆**。如果您使用正则表达式，它会保存在此内存中，您可以稍后使用“查找”和“替换”中的下拉菜单选择它。

除此之外，我认为没有插件可以做你想做的事......

# php - DirectoryIterator() 以某种方式复制路径

> ID：14795501
> 
> 赞同：2
> 
> 时间：2013-02-10T07:00:07.827
> 
> 标签：php, jquery, ajax, directory, image-gallery

我正在尝试遍历一个目录并显示里面的所有图片。我让它工作，直到我将 Jquery/ajax 添加到等式中。不知何故，路径被复制了，所以我得到了这个错误（你可以看到它在哪里被复制）：

`Fatal error: Uncaught exception 'UnexpectedValueException' with message 'DirectoryIterator::__construct(images/gallery/album1,images/gallery/album1) [<a href='directoryiterator.--construct'>directoryiterator.--construct</a>]: The system cannot find the path specified`

我一生都无法弄清楚为什么会这样……`contruct(images/gallery/album1,images/gallery/album1)` 应该是 `construct(images/gallery/album1)`

PHP：

> ```
> $album = $_POST['album'];
> $dir = new DirectoryIterator("images/gallery/$album");
> foreach ($dir as $fileInfo)
> {
>     if($fileInfo->isDot()) continue;
>     $pic = $fileInfo->getFilename();
>     print "<div>
>             <img src='images/gallery/$album/$pic'>
>             </div>";
> } 
> ```

jQuery/ajax：

> ```
> function albumChosen(id)
> {
> var id = id;
> var album = $('a[id="'+id+'"]').attr("rel");
> $.ajax({
>     url: "PHPscripts/getAlbums.php",
>     type: "POST",
>     data: {'album' : album},
>     success: function(data){
>         $('#galleryList').html(data);
>     }
> });
> return false; 
> ```
> 
> }

如果我`alert(album);`正确显示'album1'。所以它与它如何从`$_POST`

编辑：我添加了建议的代码..

```
$album = $_POST['album'];
print_r($_POST);
var_dump($album);
$dir = new DirectoryIterator("images/gallery/$album");
//rest of code... 
```

`print_r($_POST)`打印出来 `Array ( [album] => album1 )`
`var_dump($album)`打印出来`string 'album1' (length=6)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:33:17.000

结果我只需要添加`../`到路径的前面。小路。所以这是完整的代码，我再次添加的只是`../`路径前面的代码。

```
$album = $_POST['album'];
$dir = new DirectoryIterator("../images/gallery/$album");
foreach ($dir as $fileInfo)
{
    if($fileInfo->isDot()) continue;
    $pic = $fileInfo->getFilename();

    print "<div>
                <img src='images/gallery/$album/$pic'>
            </div>";
} 
```

# javascript - 用于填充 SELECT 选项的 JSON 结构

> ID：14795507
> 
> 赞同：0
> 
> 时间：2013-02-10T07:00:52.923
> 
> 标签：javascript, html, json

[在这里](https://stackoverflow.com/questions/5918144/how-can-i-use-json-data-to-populate-the-options-of-a-select-box)提出的问题中，我看到以下代码可用于向 SELECT 添加选项

```
function getResults(str) {
  $.ajax({
        url:'suggest.html',
        type:'POST',
        data: 'q=' + str,
        dataType: 'json',
        success: function( json ) {
           $.each(json, function(i, optionHtml){
              $('#myselect').append(optionHtml);
           });
        }
    });
}; 
```

有人可以告诉我，在 php 服务器端，json 的格式应该是什么。比如，它应该如何创建，**以便它被 "$('#myselect').append(optionHtml);" 正确解析** ??

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T07:04:54.097

该代码将解析这个 JSON，基本上是一个带有标记的字符串数组。

```
[
    "<option value='...</option>",
    "<option value='...</option>",
    "<option value='...</option>",
    ...
] 
```

不过，这几乎违背了 JSON 的目的。

* * *

如果 JSON 只包含数据会更好：

```
{
    "text1" : "value1",
    "text2" : "value2",
    "text3" : "value3",
    ...
} 
```

以及您的代码来解析它并为您创建元素。这样，JSON 就更轻了。

```
success: function( json ) {
    var mySelect = $('#myselect')
    $.each(json, function(key,val){
        $('<option/>',{
            value : val //i like this method of making elements better
        })              //because string concatenation is messy
        .text(key)
        .appendTo(mySelect);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:04:47.053

要与您展示的 JS 一起使用，您需要 JSON 是这样的数组：

```
["<option value='Woodland Hills'>Woodland Hills<\/option>","<option value='none'>none<\/option>","<option value='Los Angeles'>Los Angeles<\/option>","<option value='Laguna Hills'>Laguna Hills<\/option>"] 
```

...其中每个数组元素都是单个`<option>`元素的适当 html。

（也就是说，与其他问题中显示的第一个 JSON 完全相同。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:07:16.697

JSON 是键值/名称对的集合。这些可以是对象或数组或两者的形式。

让我假设您想要有两个下拉列表，第一个下拉列表包含国家，第二个下拉列表包含该特定国家/地区的城市。在这种情况下，JSON 结构如下所示：

```
{
  "<select value='usa'>USA</select>": "<option value='boston'>Boston</option>",
  "<select>FRANCE</select>": "<option value=paris'>Paris</option>",
  "<select>UNITED KINGDOM</select>": "<option value=london'>London<option value=not'>Nottingham</option>",
  "<select>GERMANY</select>": "<option value='munich'>Munich</option>"
} 
```

JSON 在[http://jsonlint.com/验证](http://jsonlint.com/)

# php - Mysql JOIN 不返回连接表的值

> ID：14795509
> 
> 赞同：2
> 
> 时间：2013-02-10T07:01:04.213
> 
> 标签：php, mysql, left-join

我一生都无法弄清楚为什么我不能从表 B 中获取图像。它从表 A 中的所有内容中都没有从表 B 中返回任何内容。

我想知道它是否是表结构。该表的设置方式是 order_detail 表中可能有多个 order_number 实例。两个 Product_id 字段都是 INT(10) 并且之前 order_detail 表没有主键（自动增量）。因为订单号是从另一个表中获取的，并且对于每个购买的产品，每个订单可能有 10 个相同的订单号，所以主键是一个单独的字段。

我应该将 order_number 创建为索引字段吗？任何帮助都会很棒，因为我快要放弃了。

```
Here is order details:
id      order_number  date_time         product_id  product_name    quantity
2       10011     2012-12-20 14:11:24   13          T-Shirt         1
3       10011     2012-12-20 20:02:31   11          T-Shirt         1

Here is products:
product_id  who product_name    color   size    price   image
13          men T-shirt     red medium  15.00   /images/apparel/t-shirt.jpg
11          men T-Shirt         red small   15.00   /images/apparel/t-shirt.jpg

This is the end result of my query:

Order Number    Image   Product Name    Quantity    Cost Each   Total
10011               T-Shirt         2           $15.00          $30
10011               T-Shirt         2           $15.00      $30

$order_number = $_GET['var1'];
$query = "SELECT a.product_name, a.quantity, b.image, a.product_cost FROM order_detail a LEFT JOIN products b ON a.product_id = b.product_id WHERE a.order_number = '$order_number'";
$data = mysqli_query($dbc, $query); 

while($row = mysqli_fetch_assoc($data)){
$prod_name = $row['product_name'];
$quantity = $row['quantity'];
$cost = $row['product_cost'];
$img = $row['image']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:49:03.653

It works with your data and query with some changes (there is no product_cost field in order_detail table):
[http://www.sqlfiddle.com/#!2/38c9b/7](http://www.sqlfiddle.com/#!2/38c9b/7)

# django - django 'Manager' 对象不可迭代（但代码在 manage.py shell 中工作）

> ID：14795516
> 
> 赞同：12
> 
> 时间：2013-02-10T07:02:27.050
> 
> 标签：django, templates, exception

我是 django 的新手，并创建了一个与教程中描述的投票网站没有太大区别的应用程序。在我得到的网站上：

```
Exception Type: TemplateSyntaxError
Exception Value:    
Caught TypeError while rendering: 'Manager' object is not iterable
Exception Location: /usr/lib/python2.7/dist-packages/django/template/defaulttags.py in render, line 190 
```

指向标记错误 lin 第 4 行的模板（渲染时捕获 TypeError：'Manager' 对象不可迭代）：

```
test
2   {% if clips %}
3       <ul>
4       {% for aclip in clips %}
5           <li><a href="/annotate/{{ aclip.id }}/">{{ aclip.name }}</a></li>
6       {% endfor %}
7       </ul>
8   {% else %}
9       <p>No clips are available.</p>
10  {% endif %} 
```

这是剪辑对象：

```
class Clip(models.Model):
    def __unicode__(self):
        return self.name
    name = models.CharField(max_length=30)
    url = models.CharField(max_length=200) 
```

以及查看代码：

```
def index(request):
    #return HttpResponse("You're looking at clips.")
    mylist = []
    latest_clip_list = Clip.objects.all()#.values_list("name","id")#.order_by('-pub_date')[:5]
    print latest_clip_list
    return render_to_response('annotateVideos/index2.html', {'clips': latest_clip_list}) 
```

当我从 manage,py shell 运行这段代码时，也不例外：

```
In [2]: from annotateVideos import views

In [3]: f = views.index("")
[{'id': 6L, 'name': u'segment 6000'}]

In [4]: f.content
Out[4]: 'test\n\n    <ul>\n    \n        <li><a href="/annotate//"></a></li>\n    \n        </ul>\n' 
```

有任何想法吗？我发现很难调试，因为代码似乎在 shell 上运行，但在 web 服务器上却没有。

谢谢，拉斐尔

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-10T07:09:52.093

您的视图代码中有很多部分被注释掉，特别是在该行中

```
latest_clip_list = Clip.objects.all()#.values_list("name","id")#.order_by('-pub_date')[:5] 
```

您收到的错误`'Manager' object is not iterable`, 表明模板中的 for 循环正在尝试遍历 manager `Clip.objects`，而不是 queryset `Clip.objects.all()`。

仔细检查以确保您的视图实际读取

```
latest_clip_list = Clip.objects.all() 
```

而且*不*只是看起来

```
latest_clip_list = Clip.objects 
```

# c# - 如何使用预加载的 MethodInfo 局部变量发出方法？

> ID：14795517
> 
> 赞同：6
> 
> 时间：2013-02-10T07:02:39.347
> 
> 标签：c#, .net, reflection.emit

我想发出一个有变量的方法，我可以做到。但是，我想在该变量中存储一个 MethodInfo 对象，它是对不同（非发出）方法的引用。

我可以发出操作码来调用 typeof(someClass).GetMethod(...)，但如果我可以简单地为此 MethodInfo 加载一个令牌并将其直接烘焙到变量中，效率会更高。

所以，换个说法，我试图找出它的可能性，让我们说一个“加载对象”操作码，并在发射时将一个对象传递给它，该对象将在运行时加载到堆栈中。（当我尝试这个时，OpCodes.Ldobj 给出了某种错误）。或者，我是否被迫发出将在运行时执行此操作的操作码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T13:10:14.797

你不能只在 IL 中加载任何通用对象，因为没有办法将它存储在 IL 中（除了一些特殊类型，如`string`）。您可以使用序列化（对于支持它的类型）来解决这个问题，但我认为这不是您想要的。此外，[`ldobj`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldobj.aspx)服务于完全不同的目的。

但是您可以通过`MethodInfo`与 C# 对运算符所做的非常相似的方式来执行此`typeof`操作。这意味着：

1.  使用[`ldtoken`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.ldtoken.aspx)指令得到一个[`RuntimeMethodHandle`](http://msdn.microsoft.com/en-us/library/system.runtimemethodhandle.aspx)
2.  打电话[`MethodBase.GetMethodFromHandle()`](http://msdn.microsoft.com/en-us/library/5wk6z0dh.aspx)要一个`MethodBase`
3.  将其投射到`MethodInfo`

生成返回 的方法的整个代码`MethodInfo`如下所示：

```
MethodInfo loadedMethod = …;
var getMethodMethod = typeof(MethodBase).GetMethod(
    "GetMethodFromHandle", new[] { typeof(RuntimeMethodHandle) });

var createdMethod = new DynamicMethod(
    "GetMethodInfo", typeof(MethodInfo), Type.EmptyTypes);

var il = createdMethod.GetILGenerator();
il.Emit(OpCodes.Ldtoken, loadedMethod);
il.Emit(OpCodes.Call, getMethodMethod);
il.Emit(OpCodes.Castclass, typeof(MethodInfo));
il.Emit(OpCodes.Ret);

var func = (Func<MethodInfo>)createdMethod.CreateDelegate(typeof(Func<MethodInfo>));
Console.WriteLine(func()); 
```

# objective-c - 如何更改 UIBarButtonItem 按钮设计？

> ID：14795522
> 
> 赞同：1
> 
> 时间：2013-02-10T07:03:41.710
> 
> 标签：objective-c, ios6, uinavigationcontroller, uibarbuttonitem, uinavigationitem

我是 iPhone 应用程序的新手。

我所拥有的如下。

```
UIBarButtonItem *flipButton = [[UIBarButtonItem alloc] 
                           initWithTitle:@"Flip"                                            
                           style:UIBarButtonItemStyleBordered 
                           target:self 
                           action:@selector(flipView)];

self.navigationItem.leftBarButtonItem = flipButton;
[flipButton release]; 
```

但是，问题在于按钮设计。它只是方形按钮。

如何使此按钮与后退按钮相同？

任何想法/建议将不胜感激。

* * *

我正在尝试

```
self.navigationItem.leftBarButtonItem.title = @"Back";
self.navigationController.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(goBackToSAMA:)] autorelease]; 
```

但它的工作正常。不工作意味着，`goBackToSAMA`没有被调用，按钮文本也没有出现`Back`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:16:17.960

一种可能是通过此方法更改后退栏按钮：

[`backButtonBackgroundImageForState: barMetrics:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/backButtonBackgroundImageForState%3abarMetrics%3a)

另一种可能性可能是将“ `backBarButtonItem`”替换为自定义视图。

如果您想滚动您自己的自定义条形按钮项目，您正在寻找的选项是`UIBarButtonItem`“方法” [`initWithCustomView`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/initWithCustomView%3a)，您可以在其中放入您选择的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:32:16.647

# android - 带有 Android 4.0 和 NDK r8d 的 OpenCV 无法正常工作

> ID：14795523
> 
> 赞同：0
> 
> 时间：2013-02-10T07:03:47.700
> 
> 标签：android, eclipse, opencv, android-ndk

我是 OpenCV 和 android NDK 的新手。从一个示例 NDK 程序开始，我编写了一个具有本机功能的活动并实现了它，它工作正常。我能够成功构建和运行它。

但是在 CPP 文件中，我插入以下标题：-

```
#include <opencv2/core/core.hpp> 
```

我在 Eclipse 上遇到构建错误：- **E:/software\java\android_adt\OpenCV-2.4.3.2-android-sdk/sdk/native/jni/include/opencv2/core/core.hpp:56:21:致命错误：算法：没有此类文件或目录编译终止。制作：****[obj/local/armeabi/objs/OpenCVTest/OpenCVTest.o] 错误*1*

 *这是我的java文件： -

```
package com.example.opencvtest;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class OpenCVMain extends Activity {

    public final String TAG = "OPENCVLOG";
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Log.i(TAG,"loading the library OpenCVTest.so");
        System.loadLibrary("OpenCVTest");
        Log.i(TAG,"Loaded the library successfully");
        TextView t =  new TextView(this);
        t.setText(nativeDemo());
        setContentView(t);
        //setContentView(R.layout.activity_open_cvmain);
    }

    public native String nativeDemo();

} 
```

JNI cpp 文件：-

```
#include <jni.h>
#include <opencv2/core/core.hpp>

extern "C"
{

jstring Java_com_example_opencvtest_OpenCVMain_nativeDemo(JNIEnv* env, jobject obj);
}

jstring Java_com_example_opencvtest_OpenCVMain_nativeDemo(JNIEnv* env, jobject obj)
{
    return env->NewStringUTF("Hello Native !!!!");
} 
```

Android.mk 文件：-

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

include ${OPENCVROOT}/sdk/native/jni/OpenCV.mk

LOCAL_MODULE    := OpenCVTest
LOCAL_SRC_FILES := OpenCVTest.cpp

include $(BUILD_SHARED_LIBRARY) 
```

请指导我在导入 OpenCV 头文件时我在哪里犯了错误。此外，当我在 core.hpp 第 56 行中的“算法”文件上按 CTRL 并单击时，我可以在 eclipse 中访问“算法”文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:43:33.820

您是否创建了“ **Application.mk** ”文件？

[这个答案](https://stackoverflow.com/a/15129570/1368342)可能会有所帮助。*

# jquery - jQuery .click() 被提升了两次

> ID：14795524
> 
> 赞同：1
> 
> 时间：2013-02-10T07:04:07.483
> 
> 标签：jquery, events

这个问题之前已经被问过很多次，我查看了其他问题，但他们提出的修复不适用于我。

问题是`.click`函数中的处理程序`collapseFieldsets()`被引发了两次。

这是我的初始化函数：

```
$(document).ready(function() {

    navigation_setup();

    collapseFieldsets();

    $('input[placeholder], textarea[placeholder]').placeholder();

    $(window).resize( function() {

        var width = $(window).width();
        $('h1').css('display', width < 1000 ? 'none' : 'block');
    } );
}); 
```

这是我的collapseFieldsets：

```
function collapseFieldsets() {

    $("fieldset.collapseable legend").css("cursor", "pointer");
    $("fieldset.collapseable legend label").css("cursor", "pointer");

    $("fieldset.collapsed div.fieldsetContent").hide();

    $("fieldset.collapseable legend").click(function(event) {

        var fieldsetContent = $(this).parent().find("div.fieldsetContent");

        fieldsetContent.toggle(200);
    });
} 
```

这就是我的 HTML 的样子：

```
<fieldset class="collapseable">
    <legend><label><input checked="checked" name="ClientUpdate" type="radio" value="Current" /> Mr John Smith</label></legend>
    <div class="fieldsetContent">

        <input id="ClientCurrent_PersonId" name="ClientCurrent.PersonId" type="hidden" value="9" />

        <!-- More input elements etc -->

    </div>
</fieldset> 
```

该`collapseFieldsets`函数只调用一次——当我插入`alert`调用时，它们只出现一次。

我正在使用 jQuery 1.9.1，但它也发生在 1.8.0 上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:17:27.273

该复选框触发一个单击事件，该事件传播到父级（并由其处理）。

你需要把点击事件放在图例上吗？如果你改变这个：

```
$("fieldset.collapseable legend").click(function(event){...}) 
```

对此：

```
 $("fieldset.collapseable input").click(function(event){
    var fieldsetContent = $(this).parentsUntil('.collapseable').parent().find("div.fieldsetContent");

    fieldsetContent.toggle(200);
 }) 
```

它会工作的。

或者，您可以在绑定到图例的事件中返回 false 以防止传播

# c# - .NET 程序扫描 .PDF 中图表中的可呈现文本 - 不是针对单词，而是针对值 - 文本位置功能？

> ID：14795529
> 
> 赞同：0
> 
> 时间：2013-02-10T07:04:49.157
> 
> 标签：c#, .net, text-recognition

您好，我有一张图表，需要进行系统审查并给出结果...

图表图像位于此处....

[示例图表 .pdf http://imageshack.us/photo/my-images/651/scorecardchartexample.gif/](http://imageshack.us/photo/my-images/651/scorecardchartexample.gif/)

[http://imageshack.us/photo/my-images/651/scorecardchartexample.gif/](http://imageshack.us/photo/my-images/651/scorecardchartexample.gif/)

--假设图表是 .PDF 并且文本是可渲染的 IE “高亮”。

--假设图表每次都以完全相同的方式和相同的位置放置在页面上

--假设图表可以更改-也就是说，我需要能够上传 1000 个这些图表，所有这些图表都遵循完全相同的格式，但图表之间有一些替代信息。

——假设在 .NET 方面具有 VAST 专业知识，而在实际文本解释方面几乎没有专业知识。

--假设具有解释具有可编辑字段的 .PDF 的专业知识...我已经在这样做了，这仅限于我创建的 .PDF 并且能够在每个字段上放置值等。

--假设这个图表只能在一个单一的文本可呈现的.PDF中交付——也就是说——我们与一个创建这个图表的网站交互——这个网站没有API可以交互，我们必须从网页打印这个图表到PDF这就是我们所能做的……（政府网站）

使用 .NET 系统，我需要创建一个程序...或将现有应用程序合并到我的 .NET 系统中，它将查看此图表并能够分辨每个“X”代表什么...也就是说左边一英寸或下一行的“X”表示不同的结果（参见图表）

我需要该程序根据击中文件夹或其他任何内容的 .PDF 文档的触发器来执行搜索并返回结果。假设我们从头开始创建程序，我们可以处理这部分......否则我们将仅限于根据需要与现有应用程序进行交互。

我们对各种策略持开放态度。假设存在这样的类或对象，我们正在考虑根据文档中的位置读取文本，例如 X、Y 之类的东西。另一个理想的路线是某种 stringBuffer（假设 C#），但需要能够导航图表网格线，并且需要计算空格以准确解释“X”的位置以及“X”的含义根据它的位置。第三个选项，我们不知道的事情。

如果某件事存在并且经过验证并且是真实的，那当然是最好的。然后是使用 .NET 和 C# 与它交互的任何提示。

非常感谢大家提前Code Gawds！

卷轴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T06:05:26.900

好的，我们找到了一些名为 ClearImage 的软件——它并不便宜，但非常简洁。它将以 Adob​​e PDF 分析文档以查找表单字段的相同方式分析任何图像。在清晰的图像完成之后，它会为您提供一个“blob”列表，然后您可以指定每个 blob 的含义并给它一个唯一的标识符。这允许基于图像中的“blob”位置进行自动值声明。

它还允许对图像进行“指纹”排序，因此如果要显示相同的图像，它可以识别它......在我的例子中，我们有 3 个不同的图表模板，实际上每个模板都会因为不同而有所不同图表，但最终每个模板都具有与图表的倍数相同的布局……这有助于我们的系统识别输入的图表，然后在第一次检查之后，继续对每个 blob 进行任何化处理。

无论如何，如果其他人应该遇到这个问题并且需要这种类型的功能，那么值得一看。我不想让它无人回答。当我们了解更多信息时，我可能会更新它。我知道这不完全是一个编码问题，但这种类型的任务是编码密集型的，如果有人想要执行相同的任务，他们可能会在这里找到自己的方式。我将努力本着 stackoverflow 的精神更新有关集成和对象等的评论。

如果有人对此软件有更多关于编码的问题，您可以在这里提问或发布新问题，我们将很乐意发布我们使用（在 C# 中）的代码（方法、类对象等），以便将其集成到我们/您的计划。

# android - eclipse pause 如何在我的应用程序中获取有用的堆栈跟踪？

> ID：14795532
> 
> 赞同：1
> 
> 时间：2013-02-10T07:05:03.183
> 
> 标签：android, eclipse, debugging

有时我的应用程序会陷入循环。在调试模式下我当然可以暂停它，但是在调试窗口中我得到一个无用的堆栈跟踪，告诉我它在 DalvikVM 的某个地方。

有没有办法可以找出它在我的应用程序中的位置？就像视觉工作室的暂停一样。

现在我只需要猜测它可能在哪里，然后在其中设置似乎浪费时间的断点。

# unix - 将多个输出发送到文件而不覆盖

> ID：14795539
> 
> 赞同：0
> 
> 时间：2013-02-10T07:05:53.673
> 
> 标签：unix

我正在尝试将 UNIX 中两个命令的输出发送到名为“log.txt”的文件中

现在我一直在尝试：

```
# date ; quota -v myName > log.txt 
```

目的是让我的 log.txt 文件看起来像：

```
Mon Sep 11 14:13:34 PDT 2006
Disk Quota for ....
...
... 
```

其中第一行代表日期命令，其余代表配额命令。

有没有办法将这两个命令的输出发送到同一个 log.txt 文件而不相互覆盖？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:09:32.287

使用括号将您的命令分组以重定向标准输出。

```
(date ; quota -v myName) > log.txt 
```

例如：

```
# (date; echo "hi") > foo
# cat foo
Sat Feb  9 23:09:15 PST 2013
hi 
```

`>>`如果您想在一个大脚本中包含许多命令，Louis 的回答会更好。应该使用第一个命令`>`，以便截断文件的任何现有内容。所有其他命令用于`>>`附加到文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:07:35.577

你想追加，使用*>>*所以类似：

```
date >> log.txt && quota -v myName >> log.txt 
```

# php - 表单文本区域 isset

> ID：14795542
> 
> 赞同：0
> 
> 时间：2013-02-10T07:06:01.303
> 
> 标签：php, html

这是 php/html 表单文本区域代码

```
<textarea name="txtDispMsg" cols="1" rows="1"  value="<?php if(isset($disp_msg)){echo $disp_msg;} ?>" <?php if(isset($flag) && $flag == 4){echo "div style = 'border:2px solid red;'" . "/div";}?>></textarea> 
```

我在这里检查用户是否在 textarea 中输入了值，如果表单中是否有任何其他错误，它应该留在那里。所以表单中其他字段中的数据会留在那里。但不是 textarea。为什么？

我是否使用了错误的方法来设置/修复 textarea 的值？虽然它适用于普通文本字段

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:08:37.520

值未在 textarea 中使用，请更改

```
<textarea name="txtDispMsg" cols="1" rows="1"  value="<?php if(isset($disp_msg)){echo $disp_msg;} ?>" <?php if(isset($flag) && $flag == 4){echo "div style = 'border:2px solid red;'" . "/div";}?>></textarea> 
```

到

```
<textarea name="txtDispMsg" cols="1" rows="1">
<?php if(isset($disp_msg)){echo $disp_msg;} elseif(isset($flag) && $flag == 4){echo "<div style='border:2px solid red;'></div>";} ?>
</textarea> 
```

请参阅：[文本区域](https://developer.mozilla.org/en-US/docs/HTML/HTML_Elements/textarea)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:24:55.717

值不是 HTML 语法中 Textarea 标记的属性。如果要在 Textarea 中显示内容，则必须将内容放在开始和结束 Textarea 标记之间。您正在尝试通过声明 value="content" 来设置内容，而您需要执行以下操作：

```
<textarea name="fieldName" cols="15" rows="4">CONTENT GOES HERE</textarea> 
```

见： [http ://www.w3.org/wiki/HTML/Elements/textarea](http://www.w3.org/wiki/HTML/Elements/textarea)

* * *

如果您希望在提交时不清除您的值，那么您必须在页面顶部处理它们以寻找一些操作，然后在表单中设置它们的值。

```
<?php

// check if values submitted to page and if not, set empty value
// add html escaping just in case
$field1 = (isset($_GET['field1'])) ? htmlspecialchars($_GET['field1']) : "";
$field2 = (isset($_GET['field2'])) ? htmlspecialchars($_GET['field2']) : "";
$field3 = (isset($_GET['field3'])) ? htmlspecialchars($_GET['field3']) : "";
$field4 = (isset($_GET['field4'])) ? htmlspecialchars($_GET['field4']) : "";

// toggle radio button if one was selected
$on = ($field4 == "1") ? "checked" : "";
$off = ($field4 == "0") ? "checked" : "";

?>

<html>
<head><title>Test Page</title></head>
<body>
<h1>Test Page</h1>
<form action="test.php" method="GET">
Field 1: <input type="text" name="field1" value="<?php echo $field1; ?>" /><br />
Field 2: <input type="text" name="field2" value="<?php echo $field2; ?>" /><br />
Field 3: <textarea name="field3" cols="15" rows="5"><?php echo $field3; ?></textarea><br />
Field 4: On <input type="radio" name="field4" value="1" <?php echo $on; ?> /> &nbsp; <input type="radio" name="field4" value="0" <?php echo $off; ?> /><br />
<input type="submit" value="Submit" />
</form>
</body>
</html> 
```

当然，您可以添加额外的逻辑和样式，但代码的主要问题是 HTML 语法错误，并且 textarea 与其他表单标签不同，并且没有“值”参数。

# c - gdb 步骤调试 C 程序

> ID：14795543
> 
> 赞同：3
> 
> 时间：2013-02-10T07:06:18.040
> 
> 标签：c, gdb

考虑一个函数有 10 行代码的情况，并且您正在通过 GDB 进行一步调试并且在第 6 行。你意识到第 4 行的函数调用做了一些错误，因为你在第 5 行。

假设第 4 行函数调用没有做任何剧烈的事情（无内存等），您希望在第 4 行创建 SP 点并进入该函数而不重新运行该测试用例。

我已经能够通过修改注册表来做到这一点。

我想知道的是，是否有一些 gdb 命令可以帮助我在没有手动注册表模式的情况下实现上述目标。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:08:08.893

使用[这里](http://www.delorie.com/gnu/docs/gdb/gdb_119.html)`jump`描述的命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T07:54:14.570

如果我理解正确，您想“退后一步”。GDB 从版本 7 开始支持这一点。请参阅[手册](http://www.gnu.org/software/gdb/news/reversible.html)、[教程](http://www.sourceware.org/gdb/wiki/ProcessRecord/Tutorial)或[相关的 Stackoverflow 主题](https://stackoverflow.com/questions/1206872/go-to-previous-line-in-gdb)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:10:03.690

只需在您需要的行上设置一个断点（使用 break 命令）并跳转到它（使用 jump 命令）。

# python - 实例字典和类字典的区别是什么

> ID：14795546
> 
> 赞同：5
> 
> 时间：2013-02-10T07:06:53.453
> 
> 标签：python

我正在阅读 python 描述符，那里有一行

> Python 首先在实例字典中查找成员。如果没有找到，它会在类字典中查找。

我真的很困惑什么是实例字典，什么是类字典

谁能用代码解释一下那是什么

我认为他们是一样的

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T07:20:17.977

实例字典保存对分配给实例的所有对象和值的引用，类级别字典保存类命名空间中的所有引用。

举个例子：

```
>>> class A(object):
...    def foo(self, bar):
...       self.zoo = bar
...
>>> i = A()
>>> i.__dict__ # instance dict is empty
{}
>>> i.foo('hello') # assign a value to an instance
>>> i.__dict__ 
{'zoo': 'hello'} # this is the instance level dict
>>> i.z = {'another':'dict'}
>>> i.__dict__
{'z': {'another': 'dict'}, 'zoo': 'hello'} # all at instance level
>>> A.__dict__.keys() # at the CLASS level, only holds items in the class's namespace
['__dict__', '__module__', 'foo', '__weakref__', '__doc__'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T07:10:52.827

我想，你可以通过这个例子来理解。

```
class Demo(object):
    class_dict = {}   # Class dict, common for all instances

    def __init__(self, d):
        self.instance_dict = d   # Instance dict, different for each instance 
```

并且总是可以像这样动态添加实例属性：-

```
demo = Demo({1: "demo"})
demo.new_dict = {}  # A new instance dictionary defined just for this instance

demo2 = Demo({2: "demo2"})   # This instance only has one instance dictionary defined in `init` method 
```

因此，在上面的示例中，`demo`实例现在具有`2`实例字典 - 一个添加到类外部，一个添加到`__init__`方法中的每个实例。而`demo2`instance 只有 1 个实例字典，即在`__init__`方法中添加的字典。

除此之外，这两个实例都有一个共同的字典——类字典。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T07:19:33.073

这些 dicts 是表示对象或类范围名称空间的内部方式。

假设我们有一个类：

```
class C(object):
    def f(self):
        print "Hello!"

c = C() 
```

此时，`f`是类 dict ( 中定义的方法`f in C.__dict__`，并且在 Python 2.7 中`C.f`是*未绑定的方法)。*

`c.f()`将执行以下步骤：

*   寻找失败`f`_`c.__dict__`
*   寻找`f`并`C.__dict__`成功
*   称呼`C.f(c)`

现在，让我们做一个技巧：

```
def f_french():
    print "Bonjour!"

c.f = f_french 
```

我们刚刚修改了对象自己的字典。这意味着，`c.f()`现在将打印`Bounjour!`. 这不会影响原始的类行为，因此其他`C`的实例仍然会说英语。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T07:09:57.023

类字典在类的所有实例（对象）之间共享，而每个实例（对象）都有自己单独的实例字典副本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T07:10:25.823

您可以在每个实例的基础上单独定义属性，而不是为整个类

例如。

```
class A(object):
    an_attr = 0

a1 = A()
a2 = A()

a1.another_attr = 1 
```

现在 a2 将没有 another_attr。那是实例字典而不是类字典的一部分。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T07:14:21.943

[Rohit Jain](https://stackoverflow.com/users/1679863/rohit-jain)有最简单的 python 代码来快速解释这一点。但是，在 Java 中理解相同的想法会很有用，这里有更多关于类和实例变量的[信息](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

# cobol - Cobol 将文件存储到表中

> ID：14795548
> 
> 赞同：0
> 
> 时间：2013-02-10T07:06:59.907
> 
> 标签：cobol

我正在尝试将从文本文件接收到的模式存储到 COBOL 中的表中。我正在使用 READ.. INTO.. 语句来做到这一点，这就是我到目前为止所拥有的。

```
WORKING-STORAGE SECTION.
   01 ROWCOL.
        03 NROW     PIC 9(3).
        03 NCOL     PIC 9(2).
   01 PATT-INIT.
        03 ROW PIC X OCCURS 1 TO 80 TIMES
              DEPENDING ON NCOL.
   01 PATT.
        03 COL OCCURS 1 TO 80 TIMES
              DEPENDING ON NCOL.
              05 ROW OCCURS 1 TO 100 TIMES
                    DEPENDING ON NROW PIC X.

   PROCEDURE DIVISION.
   MAIN-PARAGRAPH.
        OPEN INPUT INPUT-FILE.
        READ INPUT-FILE INTO ROWCOL.
        PERFORM READ-PATTERN
        STOP RUN.

   READ-PATTERN.
        READ INPUT-FILE INTO PATT-INIT(1:NCOL). 
```

input.txt 中的模式如下所示：

```
011000
001010
010100 
```

问题是，我不确定如何将 PATT-INIT 阵列放入 PATT 2d 阵列中。我只使用 PATT-INIT 数组逐行接收每行中的模式。然后，我试图将它存储到 PATT 2d 数组中，以便我可以通过索引号访问每个数字。例如 PATT(1:2) 将返回 1。

请给我一些关于如何实现这一点的指示。如果 READ.. INTO.. 不是要走的路，我很高兴收到其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T10:12:04.073

我*认为*您的部分问题是您认为 (1:NCOL) 之类的事情正在做一件事，而实际上它们的含义完全不同。该符号表示“参考修改”。您可能期待普通的下标，或者至少从一个固定长度为 1 的可变起点开始“参考修改”。

```
01  a-nicely-name-table.
    05  FILLER OCCURS 80 TIMES.
        10  a-nicely-named-row-entry.
            15  FILLER OCCURS 6 TIMES.
                20  a-nicely-named-column-entry PIC X. 
```

READ 中的数据进入一个很好的名称行条目（下标）。一切就绪后，您可以通过一个很好命名的列条目（ a-row-subcript, a-column-subscript ）引用特定行上的特定列。

请注意，没有“：”这是下标，而不是“参考修改”。逗号是可选的。

您需要确保不要“超出”您放入表中的行数的范围，并且不要让输入数据“溢出”表。

您可以使用索引进行下标（OCCURS 定义上的 INDEXED BY）。我没有在示例中，因为不清楚您要达到的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T21:50:35.583

如果我正确理解了您的问题，则可能存在一些问题。比尔和布鲁斯注意到您似乎混淆了下标和引用修改。基本上是这样的：

```
 DISPLAY PATT-INT (1:3) 
```

将显示 的前 3 个字符`PATT-INT`。这是一个参考修改。尽管

```
 DISPLAY ROW OF PATT (1, 3) 
```

将在表格的`COL`1、3处显示字符。请注意，您需要在此处引用“最低”级别的元素名称，因此重命名您的某些数据结构可能会使“跟随”变得更容易一些。`ROW``PATT`

另一个问题可能是行和列之间的混淆......

您提供的`input-txt`文件有 3 行数据（行）。每行有 6 个字符（列）。您的声明`PATT-INIT`似乎再次加强了这一点，因为它有一个`OCCURS NCOL`时代。当您读取一行数据时，您将获得该行的 6 列。然而，`PATT` 桌子翻转了这一边。它是用 Column 然后 Row 布局声明的。此布局意味着您无法直接从中读取，`input.txt`因为表声明不遵循文件布局。

该问题的两种解决方案。

这是我认为您可能一直在努力的方向：

读取每一`input.txt`行并将其存储在同一行的`PATT`6 列中`PATT`。例如输入的第一行：`011000`将存储在`PATT (1, 1)`6`PATT (6, 1)`列 1 行中。注意：您指出`ROW OF PATT (1, 2)`应该有一个值“1” - 这里`ROW OF PATT (2, 1)`是“1”。

除此之外，您可以将一行输入读入一维数组 ( `PATT-INIT`)，然后将其重新分配到`PATT`表中。这是一个程序大纲：

```
 MAIN-PARAGRAPH.
     OPEN INPUT INPUT-FILE
     READ INPUT-FILE INTO ROWCOL
     PERFORM VARYING WS-R FROM 1 BY 1
               UNTIL WS-R > NROW
        PERFORM READ-1-ROW
     END-PERFORM
     CLOSE INPUT-FILE
     .
 READ-1-ROW.
     READ INPUT-FILE INTO PATT-INIT (1:NCOL)
     PERFORM VARYING WS-C FROM 1 BY 1
               UNTIL WS-C > NCOL
        MOVE ROW OF PATT-INIT (WS-C) TO ROW OF PATT (WS-C, WS-R)
     END-PERFORM
     . 
```

另一个解决方案可能被重新定义`PATT`为

```
01 PATT.
     03 ROW OCCURS 1 TO 100 TIMES
           DEPENDING ON NROW.
           05 COL OCCURS 1 TO 80 TIMES
                 DEPENDING ON NCOL PIC X. 
```

现在您可以简单地阅读如下：

```
 MAIN-PARAGRAPH.
     OPEN INPUT INPUT-FILE
     READ INPUT-FILE INTO ROWCOL
     PERFORM VARYING WS-R FROM 1 BY 1
               UNTIL WS-R > NROW
        READ INPUT-FILE INTO ROW (WS-R) (1:NCOL)
     END-PERFORM
     CLOSE INPUT-FILE 
```

您可以删除`PATT-INIT`工作存储，因为它不再被引用。

注意：使用此布局 `COL OF PATT (1, 2)`= '1'

通过适当的数据编辑、边界检查和`FILE-STATUS`每次 I/O 后检查来充实上述内容以完成程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T22:41:25.673

问题不在于**PATT-INIT(1:NCOL) 的****读取**。这称为 [参考修改](http://www.fluffycat.com/COBOL/Reference-Modification/)。

 **Cobol 执行面向行或记录的 IO。所以

```
 READ INPUT-FILE INTO PATT-INIT 
```

可能是你想要的。要访问数组元素，请使用 (i,j) 而不是 (i:j)**

# objective-c - 使用 NSDictionary 访问 YELP 1.0 JSON

> ID：14795550
> 
> 赞同：-1
> 
> 时间：2013-02-10T07:07:12.117
> 
> 标签：objective-c, ios6, nsjsonserialization, yelp

我在使用 NSJSONSerialization 解析 YELP1 Json 并使用 NSDictionary 访问数据方面做得很好。但是，我发现响应中存在不一致之处：

一些键被 包围`"`，主要是包含一个`_`

部分回复：

```
(
        {
        address1 = "xxx";
        address2 = "";
        address3 = "";
        "avg_rating" = 5;
        city = "Chicago";
        country = USA;
        "country_code" = US; 
```

从...获取
`[[NSString alloc] initWithData:self.recievedData encoding:NSUTF8StringEncoding];`

这与括号中没有键的文档不一致。 [http://www.yelp.com/developers/documentation/search_api](http://www.yelp.com/developers/documentation/search_api)

显然，括号表示键值中的“_”出于某种原因，而不是值的类型。括号包围每个包含`_`, 的键的值可以是*字符串*或*int*或其他。

访问诸如 avg_rating 之类的字段

`[dict objectForKey:@"avg_rating"];`

失败了`NSInvalidArgumentException`

虽然`[dict objectForKey:@"country"];`会工作。

因此，我认为返回的值不是 NSDictionary / NSLog 问题，而是提交给 dict 对象的键有问题。或者，也许在 JSON 解析期间？但是，请用一段工作代码证明我错了...... :)

有任何想法吗？谢谢，埃尔

编辑：已编辑，因为问题现在可能已经足够清楚了。
Edit2：实际上，这里返回的是一个 NSNumber。对这些 "" 感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:34:44.203

> 部分回复：

不，这不是回应的一部分。那是结果的描述，`NSDictionary`它***不是 JSON。***

> `NSLog([dict objectForKey:@"avg_rating"]);`失败`NSInvalidArgumentException`，而`NSLog([dict objectForKey:@"country"]);`会工作。

当然，因为`NSLog()`不是没有魔法。它需要一个（格式）字符串作为它的第一个参数，所以如果你提供给它的对象是 an `NSString`，它会正常工作（`country`我假设是一个字符串），但如果你不这样做（`avg_rating`可能是 an `NSNumber`），那么它就赢了't （它将尝试将消息发送`NSString`到`NSNumber`实例，这显然失败了）。

因此，请了解 JSON 与从该 JSON 生成的**描述**之间的区别。`NSDictionary`

# sql - 为多个值自动执行相同的查询（和导出）

> ID：14795554
> 
> 赞同：1
> 
> 时间：2013-02-10T07:07:44.713
> 
> 标签：sql, sql-server-2005, reporting-services

我正在使用一个包含 5 个表的数据库，所有这些表都包含有关客户及其员工的不同信息集。如果您在任何表中向下钻取与特定客户相关的数据，则会根据数据集中员工的数量返回许多行。

如果我要手动运行我需要的报告，我将查询每个表，一次一个，以获取指定特定客户编号的所有结果。然后我会将每个表导出到 .csv，然后将这些导出复制到具有 5 个选项卡的同一个 excel 工作簿中（对应于 SQL 数据库中的 5 个表）。最后，我将为每个客户提供一份单独的工作簿。

一个复杂的因素是，并非每个客户端 ID 都出现在 5 个表中。最好，我不会导出空数据集，并且只有三个表中的数据的客户端在最终工作簿中只有三个选项卡。

有没有办法给 SQL 服务器一个客户端 ID 列表，它应该查询 5 个表，导出现有数据，并（可能/希望）在单独的选项卡上的工作簿中组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T09:26:07.867

您的问题相当模糊和广泛，但以下是您需要调查以使事情顺利进行的关键信息：

*   创建五个不同的数据集，每个数据集查询一个表。
*   创建五个 tablix，在每个 tablix 之前添加一个[PageBreak](http://msdn.microsoft.com/en-us/library/dd207058.aspx)，以便在 Excel 中它们位于不同的选项卡上。
*   使用基于[RowNumber](http://msdn.microsoft.com/en-us/library/ms159225%28v=sql.90%29.aspx)函数的表达式设置[NoRowsMessage](http://msdn.microsoft.com/en-us/library/dd220407.aspx) 或沿[这些行隐藏 tablix](https://stackoverflow.com/questions/14769294/hide-subreport-on-query-result)
*   [创建一个](http://msdn.microsoft.com/en-us/library/aa337432%28v=sql.105%29.aspx)用于选择客户端 ID 的参数，并`WHERE`在数据集的子句中使用该参数。

棘手的一点是如何生成多个 Excel 文件。SSRS 一次只导出一个，因此您的基本选项：

1.  将多个客户端放在一个 XLS 中（即不使用参数，但将 clientId 作为工作表上的一列包含）
2.  让用户一次选择一个客户端，一次导出一个 XLS。
3.  自动生成报告。

# android - Android 列表过滤器

> ID：14795561
> 
> 赞同：2
> 
> 时间：2013-02-10T07:09:44.233
> 
> 标签：android, list, filtering, guava, predicates

我有一个文件对象列表，我想根据类型（音频、视频、照片）或捕获日期/时间或 Exif 信息（如果是照片）等规则进行过滤。例如，我可以用一些 cicles 来做到这一点。

有聪明的方法吗？我在某处读到解决方案可能是使用 Google Guava 的谓词，但我不明白它是如何工作的。有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T10:03:16.150

使用 Guava Predicates 你会做一些事情

```
import java.io.File;
import java.util.Collection;
import java.util.List;

import javax.annotation.Nullable;

import com.google.common.base.Predicate;
import com.google.common.collect.Collections2;
import com.google.common.io.Files;

public class FileFiltering {

    public static void main(String[] args) {
        List<File> files = getFiles();
        Collection<File> audioFiles = Collections2.filter(files,
                new AudioPredicate());

        Collection<File> videoFiles = Collections2.filter(files,
                new VideoPredicate());
    }

    private static List<File> getFiles() {
        // TODO Auto-generated method stub
        return null;
    }
}

class AudioPredicate implements Predicate<File> {

    @Override
    public boolean apply(@Nullable File file) {
        return Files.getFileExtension(file.getName()).equalsIgnoreCase("mp3");
    }
}

class VideoPredicate implements Predicate<File> {

    @Override
    public boolean apply(@Nullable File file) {
        return Files.getFileExtension(file.getName()).equalsIgnoreCase("mkv");
    }
} 
```

在应用方法中，您需要编写代码，为您想要的文件类型返回 true。

# c++ - 以空字符结尾的字符 (\0) 和 `^@` 之间的区别

> ID：14795565
> 
> 赞同：4
> 
> 时间：2013-02-10T07:10:10.643
> 
> 标签：c++, c, arrays, string, char

我的代码是这样的：

```
#include <iostream>
using std::cout;
using std::endl;

int main(int argc, char *argv[])
{
    cout << (int)('\0') << endl;
    cout << (char)(0) << endl;
    return 0;
} 
```

我希望在终端中看到这样的：

```
$ test-program
0

$ 
```

然而，我看到的是这样的：

```
$ test-program
0
^@
$ 
```

让我感到困惑的是，我认为`'\0'`可以转换为`0`. 并且`0`也可以铸成`\0`。我希望看到一个空字符后跟一个`endl`，但结果有点奇怪，比如`^@`。

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T07:12:16.167

`^@`就是您的终端模拟器呈现的方式`'\0'`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T07:13:38.843

`^@`是空字符的常见表示。类似地，`^A`用于表示序数值为 1`^G`的字符、序数值为 7 的字符（铃）和`^M`序数值为 13 的字符（回车）。

```
cout << (char)0 
```

只是打印字符表示，而不是整数表示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T07:33:29.433

如果您正在查看终端的输出，您不知道是您的程序没有按预期运行，还是只是您的终端仿真器。

在 UNIXoid 系统上，用于`./myProgram | hexdump -C`查看十六进制输出。这样你就可以确保*你的程序*做你期望它做的事情，所以*终端*的行为不像（你）预期的那样：

```
00000000  30 0a 00 0a                                       |0...|
00000004 
```

如果您看到的输出与我相同，那么您实际上是在打印 zero `'0'`、 newline `'\n'`、 null `'\0'`、 newline `'\n'`。因此，在这种情况下，您的程序会按照您的预期运行。

您可能想尝试不同的终端仿真器或设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T07:13:38.443

如果您`0`转换为`char`，它不会生成`'0'`，但是`'\0'`- 请记住从整数类型转换为使用该 ASCII 代码`char`创建 a 。`char`所以基本上，第二行输出一个空字符（ASCII 0）。

如果你想输出一个`'0'`字符，你需要做类似的事情`(char) 48`，因为 48 恰好是字符 0 的 ASCII 值。

# python - 从 lm_sensors 命令解析温度

> ID：14795568
> 
> 赞同：2
> 
> 时间：2013-02-10T07:10:33.943
> 
> 标签：python, bash, parsing, sensors, temperature

目前我正在使用 lm_sensors 从我的服务器获取温度信息。我想运行一个每五分钟运行一次 lm_sensors 的 cron 作业，获取温度数据并将其放入 CSV 文件中。但是，我不知道如何解析 lm_sensors 输出。我想用 Python 或 bash 来解析它，因为它们是我最舒服的语言。我将把 lm_sensors 命令的当前输出作为示例粘贴到我正在使用的数据中。如果有人能指出我如何剥离数据的正确方向，我可以从那里找出其余的。谢谢您的帮助。

示例输出：

```
$ sensors
k10temp-pci-00c3
Adapter: PCI adapter
temp1:        +0.0Â°C  (high = +70.0Â°C, crit = +90.0Â°C)

atk0110-acpi-0
Adapter: ACPI interface
Vcore Voltage:       +1.42 V  (min =  +0.85 V, max =  +1.70 V)
+3.3 Voltage:       +3.38 V  (min =  +2.97 V, max =  +3.63 V)
+5 Voltage:         +4.95 V  (min =  +4.50 V, max =  +5.50 V)
+12 Voltage:       +12.48 V  (min = +10.20 V, max = +13.80 V)
CPU FAN Speed:      1510 RPM  (min =  600 RPM)
CHASSIS FAN Speed:  1683 RPM  (min =  600 RPM)
CPU Temperature:     +37.0Â°C  (high = +60.0Â°C, crit = +95.0Â°C)
MB Temperature:      +25.0Â°C  (high = +45.0Â°C, crit = +75.0Â°C) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:23:54.650

如果您想使用 Python，请使用[`PySensors`](http://pypi.python.org/pypi/PySensors/)，但不要重新发明轮子。设置任意数量的监控系统，如[cacti](http://cacti.net/)、[munin](http://munin-monitoring.org/)等[并](http://en.wikipedia.org/wiki/Comparison_of_network_monitoring_systems)完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-13T04:08:51.957

使用 -u 开关运行传感器以获取原始输出。你会得到是这样的：

```
 Adapter: PCI adapter
power1:
  power1_input: 21.950
  power1_crit: 124.947

f71889a-isa-0480
Adapter: ISA adapter
+3.3V:
  in0_input: 3.264
in1:
  in1_input: 0.968
  in1_max: 2.040 
```

如您所见，硬件传感器返回的实际值将由格式为 的字符串标记`sensor_input`。从那以后，将您想要的值放入脚本中应该相当容易，就像我每秒监控传感器的单行脚本一样：

```
#!/bin/sh
watch -n 1 "sensors -u | sed -n 's/_input//p'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:22:28.527

[`grep`](http://linux.die.net/man/1/grep)只获取您想要的行，然后[`cut`](http://linux.die.net/man/1/cut)获取您需要的字段。

或者一个简单的[`awk`](http://linux.die.net/man/1/awk)脚本。

# cordova - 可以通过 javascript 上传 Cordova 文件吗？

> ID：14795570
> 
> 赞同：1
> 
> 时间：2013-02-10T07:10:44.107
> 
> 标签：cordova, file-upload, camera, amazon

这是我在 StackOverflow 上的第一个问题，所以请温柔一点！:)

我正在使用 Cordova (2.4.0rc1) 将相机照片上传到亚马逊。我找到了一个不错的上传器 s3_direct_uploader ( [s3_direct_uploader 0.0.8](https://github.com/waynehoover/s3_direct_upload) ) 并让它工作并与我的 Rails 服务器集成。现在，我正在尝试对基于 Cordova 的“带摄像头的浏览器”做同样的事情。

我可以让相机拍照，并且可以获取生成的文件 URI，然后调用 fileEntry.file() 来获取看起来像 File 对象的东西（但实际上只是 Object 类型的对象）。

当我尝试将该类似文件的对象传递给 S3 直接上传器时，我得到了正确的 # 字节上传到 Amazon，但 Amazon 上的实际文件只是文本“[object Object]”。

我有可能朝着这个方向前进吗？我可以欺骗 WebView 创建指向实际图片的真实文件对象吗？（注意：出于记忆的原因，我不想将图片加载到内存中然后创建一个 Blob。）或者我是否必须弄清楚如何将 Cordova 的文件上传器到 CORS 到亚马逊？

提前感谢您对如何改进我的问题的回答和建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T09:55:16.053

没有办法欺骗 WebView 创建指向实际图片的真实文件对象。这显然是一项安全功能。

相反，我最终使用 Cordova 的文件上传机制使用 s3_direct_uploader 提供的标头信息将文件传输到 Amazon。这是最好的方向。

# php - Joomla 编程 - 创建自定义表单（第一步）

> ID：14795571
> 
> 赞同：0
> 
> 时间：2013-02-10T07:10:52.123
> 
> 标签：php, joomla, content-management-system, joomla3.0

我对 joomla 编程很陌生。我应该和coninciding数据库表一起制作一个表格。截至目前，我对应该看的东西感到很困惑。

我应该首先看什么？我应该看看组件概念吗？我来自 Java 背景，所以这对我来说仍然很困惑。我已经看到了 joomla 的几个表单扩展，但是，我希望能够从头开始创建自己的表单。

我应该首先看什么？如果您能给我指点，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:23:43.537

根据表单的大小，如果要相当简单，我会使用模块而不是组件。为了让您开始使用模块，您可以使用模块生成器。确保将“**帮助文件**”设置为“**是**”。

好的，基本上，假设您的模块称为“**测试表格**”。

您将拥有 3 个主要文件：

*   **helper.php** - 这个文件将包含你所有的函数
*   **mod_testform.php** - 这将包含诸如调用一些函数（如果需要）、定义参数、添加自定义 CSS 和 JS 等内容。基本上是一个控制器。
*   **default.php** - 这是表单的 html。它还可以用于导入 css 和 javascript 文件。显然 PHP 是允许的，但我不会在这里添加函数。

另请查看以下页面：

[http://www.techguywebsolutions.com/create-a-custom-joomla-2.5-module.html](http://www.techguywebsolutions.com/create-a-custom-joomla-2.5-module.html)

希望这可以帮助。

# java - 如何将字符串值发送到另一个活动？

> ID：14795573
> 
> 赞同：1
> 
> 时间：2013-02-10T07:11:13.063
> 
> 标签：java, android, google-maps, android-intent

我想将纬度和经度的字符串值发送到另一个类，但我有点困惑如何使用它来增加额外的意图。

这是我的代码：

```
Intent i = new Intent(getApplicationContext(), PlacesMapActivity.class);

//Sending data to another Activity
String latitude = Double.toString(placeDetails.result.geometry.location.lat);
String longitude = Double.toString(placeDetails.result.geometry.location.lng);
i.putExtra("user_lat", latitude);
i.putExtra("user_lng", longitude);

startActivity(i); 
```

如果我尝试像这样检索字符串值是否正确？

```
// Getting intent data
Intent i = getIntent();

// Users current geo location
String user_lat = i.getStringExtra("user_latitude");
String user_lng = i.getStringExtra("user_longitude"); 
```

请给我你的意见。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:35:45.450

根据您的问题 - 是的，将数据从另一个传递`Activity`到另一个是正确的方法，但您必须记住，您的`name`论点对于放置和检索数据应该是相同的。

第二种方法是使用`getExtras()`方法。在第二个活动中，您要在其中检索数据：

```
// Getting intent data
Intent i = getIntent();
Bundle extras = i.getExtras();

// Users current geo location
if(extras != null) { // Check if extras were found
   String user_lat = extras.getString("user_latitude");
   String user_lng = extras.getString("user_longitude");
} 
```

两种方式的区别在于：

*   `getStringExtra()``String`如果找不到具有指定名称的方法，则返回 null
*   `getExtras()`如果没有找到额外的方法，则返回 null

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T07:22:29.220

对于 put 和 get 中的额外内容，您必须使用相同的名称。例如，您 put`user_lat`但然后尝试 get `user_latitude`，这显然是行不通的。否则，我觉得很好。

请注意，您可以`double`直接输入值，无需转换为`String`. 让他们回来使用`getDoubleExtra`.

# assembly - x86 程序集，我的代码有什么问题？输入、算术、打印

> ID：14795576
> 
> 赞同：0
> 
> 时间：2013-02-10T07:11:29.250
> 
> 标签：assembly, x86

我需要一些关于我正在尝试编写的程序的帮助。该程序应该从标准输入中读取两个数字，保存并使用它来执行基本的数学运算，然后返回它。

我想，大多数事情都在工作。但它不能正确打印结果。它打印一大堆随机字符。我相信这个问题与我的代码中发生的 ascii 到 int 或 int 到 ascii 的转换有关，但我不能确定。

这是我从输入中读取的代码部分：

```
mov byte    [firstNum], 30
mov byte    [firstNum + 1], 0
mov     ah, 0Ah
mov     edx, firstNum
int     021H
movzx   esi, byte [firstNum+1]
mov     edx, firstNum+2 
add     esi, edx
mov byte    [esi], "$"

mov byte    [secondNum], 30
mov byte    [secondNum + 1], 0
mov     ah, 0Ah
mov     edx, secondNum
int     021H
movzx   esi, byte [secondNum+1]
mov     edx, secondNum+2
add     esi, edx
mov byte    [esi], "$" 
```

在哪里：

```
firstNum    resb    32      ; first number
secondNum   resb    32      ; second number
result      resb    32      ; result 
```

现在这是将字符串输入转换为整数的部分，将两个值相加，从整数转换为字符串并打印结果：

```
push dword  secondNum+2
call        _atoi
add         esp, 4
mov         ebx, eax
push dword  firstNum+2
call        _atoi
add         esp, 4
add         eax, ebx
push dword  10                  ; base of 10, decimal
push dword  result
push dword  eax
call        _itoa
add         esp, 12
printOut    result 
```

如果有人能告诉我我的代码有什么问题，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:58:31.060

好吧，看起来不对的一件事是，如果`atoi`是 C 库版本，那么您应该用零而不是美元符号来终止输入字符串。

我们也看不到段寄存器是否设置正确。为了`int 21`工作，`DS`必须设置为保留缓冲区的段。

此外，它看起来像是`printOut`一个宏。由于您得到的是无意义的输出，因此可以肯定的是，您错误地设置了对该宏的调用，否则宏本身存在错误。但是我们不知道它是如何工作的，所以不能说这部分代码有什么问题。例如，如果`printOut`正在使用`int 21`，那么它将期望一个美元符号终止符，并且`itoa`将使用 0 代替。

当汇编代码不起作用时，调试器就是你的朋友。您是否尝试过单步执行代码并查看发生了什么？

如果您没有调试器，则删除输入部分并单独尝试输出部分：在 eax 中加载 42 并将其转换为字符串并将其放入标准输出。

# php - 如何通过组合两个表返回多行

> ID：14795577
> 
> 赞同：1
> 
> 时间：2013-02-10T07:11:58.737
> 
> 标签：php, mysql, sql

出于这个问题的目的，以下是我的问题的简化。我有两张桌子。

表简介：

```
TABLE profile
profile_id  | first_name    | last_name
1           | David         | Battery
2           | John          | Motor 
```

表 known_names：

```
TABLE known_names
profile_id  | first_name
1           | A
1           | B
1           | C
2           | X
2           | Y
2           | X 
```

我想要实现的是在 profile.profile_id = known_names.profile_id 时将 known_names.first_name 与 profile.last_name 一起输出。但是我还想在结果的其中一行中打印出 profile.first_name 和 profile.last_name 。

所以查询可能看起来像这样（语法错误，我正在寻找正确的查询来执行此操作）：

```
SELECT profile_id, first_name, last_name FROM profile CROSS JOIN known_names ON known_names.profile_id = profile.profile_id WHERE profile.first_name = 'David' 
```

结果的一个例子是：

```
profile_id  | first_name    | last_name
1           | David         | Battery
1           | A             | Battery
1           | B             | Battery
1           | C             | Battery 
```

我怎样才能编写一个可以实现这一目标的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:15:24.253

试试这个：：

```
 Select t.profileId, t.firstName, t.lastName
    FROM
(
SELECT 
        p.profile_id as profileId, 
        p.first_name as firstName, 
        p.first_name as first_Name,
        p.last_name as lastName
        FROM profile p

    UNION 

        SELECT 
        p.profile_id as profileId, 
        k.first_name as firstName,
        p.first_name as first_Name,
        p.last_name as lastName 
        FROM profile p, 
        known_names k
        WHERE  k.profile_id = p.profile_id
) t
where t.first_Name='David' 
```

检查[SQL-Fiddle](http://www.sqlfiddle.com/#!2/39eb3/36)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:58:17.197

假设您可以使用 profile_id 作为查询的输入而不是 first_name：

```
SELECT
  p.profile_id AS profileId,
  p.first_name AS firstName,
  p.last_name AS lastName
  FROM profile p
  WHERE p.profile_id = 1

UNION

SELECT
  k.profile_id AS profileId,
  k.first_name AS firstName,
  p.last_name AS lastName
  FROM known_names k
  INNER JOIN profile p ON p.profile_id = k.profile_id
  WHERE k.profile_id = 1 
```

[http://www.sqlfiddle.com/#!2/fa421/18](http://www.sqlfiddle.com/#!2/fa421/18)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T09:56:37.617

我不得不承认我不经常使用[GROUP BY WITH ROLLUP](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)，但我想用它来回答你的问题而不使用 UNION 查询：

```
SELECT
  profile_id,
  COALESCE(first_name_k, first_name_p) First_Name,
  Last_Name
FROM (
  SELECT 
    p.profile_id, 
    k.first_name as first_name_k,
    p.first_name as first_name_p,
    p.last_name 
  FROM
    profile p inner join known_names k
    ON k.profile_id = p.profile_id
  WHERE
    p.first_name='David'
  GROUP BY
    p.profile_id,
    k.first_name WITH ROLLUP
  ) s
WHERE
  profile_id IS NOT NULL
ORDER BY
  first_name_k IS NOT NULL,
  COALESCE(first_name_k, first_name_p) 
```

看到它在[这里](http://www.sqlfiddle.com/#!2/e1ac7/1)工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T07:14:04.493

 ~~~~```
SELECT  a.*,
        b.first_name other_FirstName
FROM    profile a
        INNER JOIN known_names b
            ON a.profile_ID = b.profile_ID
// WHERE a.first_Name = ''
ORDER BY a.profile_id, a.first_Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/39eb3/4)~~  ~~```
SELECT  a.*
FROM    profile a
WHERE   first_name = 'david'
UNION
SELECT  c.profile_id, c.first_name, d.last_name
FROM    profile b
        INNER JOIN known_names c
            ON b.profile_ID = c.profile_ID
        CROSS JOIN 
       (
          SELECT  last_Name
          FROM    profile 
          WHERE   first_name = 'david'
       ) d
WHERE   b.first_name = 'david' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/39eb3/9)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)~~~~

# java - 列表视图上的大型数据库显示

> ID：14795579
> 
> 赞同：0
> 
> 时间：2013-02-10T07:12:04.683
> 
> 标签：java, android, mysql, sqlite

我有一个列表视图，它显示 500 多个单词及其含义。问题是，当我加载列表视图时，它确实需要很多时间。我想添加一个监听器，例如 OnScrollListener，这样当用户加载列表视图时它只会加载 100 个单词，然后当用户向下滚动时它会添加更多话..我使用 SimpleCursorAdapter 我的代码是这样的：

在 onCreate() 方法中：

```
 dbHelper = new WordDbAdapter(this);
    dbHelper.open();

    //Clean all data
    dbHelper.deleteAllWords();

    //Add some data
    dbHelper.insertSomeWords();

    //Generate ListView from SQLite Database
    displayListView(); 
```

在 onCreate() 方法之外：

```
@SuppressWarnings("deprecation")
private void displayListView() {

  Cursor cursor = dbHelper.fetchAllWords();

  // The desired columns to be bound
  String[] columns = new String[] {
          WordDbAdapter.KEY_WORD,
          WordDbAdapter.KEY_ROWID,

  };

  // the XML defined views which the data will be bound to
  int[] to = new int[] {

    R.id.Word,
    R.id.imgStar,

  };

  // create the adapter using the cursor pointing to the desired data
  //as well as the layout information
  dataAdapter = new SimpleCursorAdapter(
    this, R.layout.word_info,
    cursor,
    columns,
    to
    );

  ListView listView = (ListView) findViewById(R.id.Diclist);
  // Assign adapter to ListView
  listView.setAdapter(dataAdapter);

  listView.setOnItemClickListener(new OnItemClickListener() {
   @Override
   public void onItemClick(AdapterView<?> listView, View view,
     int position, long id) {
   // Get the cursor, positioned to the corresponding row in the result set
   Cursor cursor = (Cursor) listView.getItemAtPosition(position);

   // Get the word name from this row in the database.
       String wordSelected =
               cursor.getString(cursor.getColumnIndexOrThrow("word"));

       String wordMeaning =                      cursor.getString(cursor.getColumnIndexOrThrow("meaning"));
       String wordSpeak =
               cursor.getString(cursor.getColumnIndexOrThrow("speakword"));

       EditText TextDic = (EditText) findViewById(R.id.TextDic);
       TextDic.setText(wordSelected);
       speakMeaning = wordMeaning;
       speakWord = wordSpeak;

       }
      });

  EditText TextDic = (EditText) findViewById(R.id.TextDic);
  TextDic.addTextChangedListener(new TextWatcher() {

   public void afterTextChanged(Editable s) {
     speakWord = "";
     speakMeaning = "";

   }

   public void beforeTextChanged(CharSequence s, int start,
     int count, int after) {
   }

   public void onTextChanged(CharSequence s, int start,
     int before, int count) {
   dataAdapter.getFilter().filter(s.toString());
   }
  });

   dataAdapter.setFilterQueryProvider(new FilterQueryProvider() {
         public Cursor runQuery(CharSequence constraint) {
         return dbHelper.fetchWordsByWord(constraint.toString());
         }
     });
  } 
```

我还有另外 2 个 DBAdapter 和 Word 类。有人可以帮我..谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:26:32.413

```
public class MyListModel extends AbstractListModel <String>
{
    public String [] items = new String [1000];

    @Override
    public int getSize ()
    {
        return items.length;
    }

    @Override
    public String getElementAt (int index)
    {
        if (items [index] == null)
            loadRange (Math.max (0, index - 50), Math.min (1000, index + 50));

        return items [index];
    }

    private void loadRange (int begin, int end)
    {
        // Load items from begin (inclusive) to end (exclusive) from database.
        for (int i = begin; i < end; i++)
        {
            if (items [i] == null)
                items [i] = "Item #" + i + ", loaded at " + new Date ();
        }
    }

    public static void main (String [] args)
    {
        JList <String> list = new JList <String> (new MyListModel ());
        list.setPrototypeCellValue (list.getModel ().getElementAt (999));

        JFrame frame = new JFrame ();
        frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
        frame.getContentPane ().setLayout (new BorderLayout ());
        frame.getContentPane ().add (
            new JScrollPane (
                list,
                JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED),
            BorderLayout.CENTER);
        frame.pack ();
        frame.setVisible (true);
    }
} 
```

# linkedin - “使用 LinkedIn 登录”在 Mobile Safari 上不起作用

> ID：14795583
> 
> 赞同：5
> 
> 时间：2013-02-10T07:12:38.517
> 
> 标签：linkedin, linkedin-jsapi

在 Mobile Safari 上，“使用 LinkedIn 登录”按钮会打开一个空白页面，但不会执行其他任何操作。例如，如果我在 iPhone 上打开[文档示例](http://developer.linkedinlabs.com/tutorials/jsapi_login_reg/example.html)，点击“使用 LinkedIn 登录”按钮会打开一个空白页面（偶尔会将焦点切换回原始页面），但没有明显的错误（即使使用错误控制台激活）。

“登录”按钮是否可以在 Mobile Safari 上使用？而且，如果没有，有什么办法可以“伪造”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T07:10:31.577

使用适用于 iOS 的移动 SDK ( [https://developer.linkedin.com/docs/ios-sdk](https://developer.linkedin.com/docs/ios-sdk) )

--

是：您将需要使用 REST API 和 OAuth 1/2。

# c - 用逗号打印出浮点数和双打的任何体面的方法？

> ID：14795584
> 
> 赞同：1
> 
> 时间：2013-02-10T07:12:38.173
> 
> 标签：c

我正在开发一个与货币有关的程序。我一直在寻找一种像这样体面地显示货币价值的解决方案：

```
9,999.99 USD 
```

请记住，在为某个变量赋值（金钱）时，不能插入逗号。

IE：

```
double money=9999.99; 
```

并且在访问它时；

```
printf("%.2l USD",money); 
```

这将输出：

```
9999.99 USD 
```

这不是我想要的，尤其是对于超过百分之一、千分之一、百万分甚至十亿位值的更大金额。

现在除了直接在 printf 上打印出所需的输出之外，我找不到任何解决方案。

```
printf("9,999.99"); 
```

对于许多变量，这是不可取的。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:23:04.903

请查看[printf](http://linux.die.net/man/3/printf)手册页并注意以下几点：

*“对于某些数字转换，使用基数字符（“小数点”）或千位分组字符。实际使用的字符取决于语言环境的 LC_NUMERIC 部分。POSIX 语言环境使用 '.' 作为基数字符，并且没有分组字符。因此， printf("%'.2f", 1234567.89); 在 POSIX 语言环境中产生“1234567.89”，在 nl_NL 语言环境中产生“1234567,89”，在“ 1.234.567,89" 在 da_DK 语言环境中。"*

这可以通过函数[setlocale更改](http://linux.die.net/man/3/setlocale)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:24:12.287

有一个函数[strfmon](http://h30097.www3.hp.com/docs/base_doc/DOCUMENTATION/V40G_HTML/MAN/MAN3/0618____.HTM)可以帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T07:45:35.323

首先，不要使用浮点类型来表示货币，因为通常浮点类型是二进制的，因此不能准确地表示所有小数（美分），而且这些类型容易出现舍入错误。使用整数代替并计算美分而不是美元。

```
#include <stdio.h>
#include <limits.h>

unsigned long long ConstructMoney(unsigned long long dollars, unsigned cents)
{
  return dollars * 100 + cents;
}

void PrintWithCommas(unsigned long long n)
{
  char s[sizeof n * CHAR_BIT + 1];
  char *p = s + sizeof s;
  unsigned count = 0;
  *--p = '\0';
  do
  {
    *--p = '0' + n % 10;
    n /= 10;
    if (++count == 3 && n)
    {
      *--p = ',';
      count = 0;
    }
  } while (n);
  printf("%s", p);
}

void PrintMoney(unsigned long long n)
{
  PrintWithCommas(n / 100);
  putchar('.');
  n %= 100;
  putchar('0' + n / 10);
  putchar('0' + n % 10);
}

int main(void)
{
  PrintMoney(ConstructMoney(0, 0)); puts("");
  PrintMoney(ConstructMoney(0, 1)); puts("");
  PrintMoney(ConstructMoney(1, 0)); puts("");
  PrintMoney(ConstructMoney(1, 23)); puts("");
  PrintMoney(ConstructMoney(12, 34)); puts("");
  PrintMoney(ConstructMoney(123, 45)); puts("");
  PrintMoney(ConstructMoney(1234, 56)); puts("");
  PrintMoney(ConstructMoney(12345, 67)); puts("");
  PrintMoney(ConstructMoney(123456, 78)); puts("");
  PrintMoney(ConstructMoney(1234567, 89)); puts("");
  return 0;
} 
```

输出（[ideone](http://ideone.com/eK0dwg)）：

```
0.00
0.01
1.00
1.23
12.34
123.45
1,234.56
12,345.67
123,456.78
1,234,567.89 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T07:27:06.940

如果您使用的是标准库，则无法做到这一点——您必须编写一些代码手动完成。

我建议将该值乘以 100，转换为整数，并根据需要使用分隔符打印数字——处理整数上的单个数字要容易得多。

例如，以下代码将`char *`使用您拥有的值的字符串表示形式填充缓冲区：

```
void formatString (double number, char * buffer) {
  if (number < 0) {
    *buffer = '-';
    formatString(number, buffer + 1);
    return;
  }
  unsigned long long num = (unsigned long long) (number * 100);
  unsigned long long x; // temporary storage for counting the digits
  unsigned char digits;
  for (x = num / 1000, digits = 1; x; digits ++, x /= 10);
    // counts the digits, also ensures that there's at least one digit
  unsigned char pos; // digit position
  for (pos = 1, x = 100; pos < digits; pos ++, x *= 10);
    // reuses x as a value for extracting the digit in the needed position;
  char * current = buffer;
  for (pos = digits; pos; pos --) {
    *(current ++) = 48 + (num / x);
      // remember 48 + digit gives the ASCII for the digit
    if (((pos % 3) == 1) && (pos > 1)) *(current ++) = ',';
    num %= x;
    x /= 10;
  }
  *(current ++) = '.';
  *(current ++) = 48 + num / 10;
  *(current ++) = 48 + num % 10;
  *current = 0;
} 
```

# javascript - 嵌套数组操作看起来像一个矩阵

> ID：14795585
> 
> 赞同：0
> 
> 时间：2013-02-10T07:12:40.517
> 
> 标签：javascript, google-apps-script

我正在检索一些数据，数据如下所示：

```
1,  2,  3,  4,  5
6,  7,  8,  9,  10
11, 12, 13, 14, 15 
```

我希望它看起来像这样

```
[
   [[1],[2],[3],[4],[5]],
   [[6],[7],[8],[9],[10]],
   [[11],[12],[13],[14],[15]]
] 
```

这样我就可以像矩阵一样寻址数组，`data[0][1]`将是“2”。

通过这个答案，它几乎[就在那里](https://stackoverflow.com/questions/14173667/parse-data-fetch-from-html)，但并不完全。我很难看起来像我想要的那样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T07:20:42.607

这个怎么样，假设这准确地代表了您的输入数据：

```
var data   = "1,2,3,4,5\n6,7,8,9,10\n11,12,13,14,15";
var matrix = data.split('\n').map(function(val) {
  return val.split(',');
}); 
```

请注意，您指定的输出可能不是您的意思。每个数字可能不应该是它自己的单项数组。相反，上面的代码产生：

```
[
[1, 2, 3, 4, 5],
[6, 7, 8, 9, 10],
[11, 12, 13, 14, 1]
] 
```

这意味着`matrix[0][1]`会返回`2`，而不是必须做`matrix[0][1][0]`

编辑：如评论中所述，我已将其留给您，以确保这符合您的浏览器支持需求。这也适用于您编写的所有其他 JS 行...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:19:43.433

**注意**- 如果您需要遍历**数组**，请使用简单的`for`，而不是`for..in`

*   `for..in`以无保证的顺序返回项目，这可能不是您在使用数组时想要的
*   `for..in`不仅返回数组元素，还返回任何添加到 Array 原型的内容（这意味着如果您使用传统的 for 循环，则无论页面上可能包含哪些外部库，您都可以完全确信代码将正常工作。无需担心其他一些编码器已向 Array.prototype 添加了属性/方法）

* * *

如果`\n`是行分隔符并且`,`是行内的项目分隔符，则可以使用如下内容：

```
/* assuming data is already filled like:
1,2,3,4,5
6,7,8,9,10
11,12,13,14,15
*/
var arr = data.split("\n"), arr2 = [];
for(var i = 0; i < arr.length; i++) {
    if(arr[i] != '') arr2.push(arr[i].split(','));
}
console.log(arr2);
/* arr2 will be like:
[
[1, 2, 3, 4, 5],
[6, 7, 8, 9, 10],
[11, 12, 13, 14, 15]
]
*/ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T07:24:24.653

```
var data = '1,2,3,4,5,6,7,8,9,10,11,12,13,14,15'.split(',');
var matrixData = [];
while (data.length > 0) {
    matrixData.push(data.splice(0, 5));
}
document.write(matrixData[0][1]); 
```

**编辑：**如果您将数据作为一个简单的数字数组

# recursion - 没有 List.function 的 OCaml 非递减列表

> ID：14795595
> 
> 赞同：1
> 
> 时间：2013-02-10T07:14:37.617
> 
> 标签：recursion, ocaml

更新：我不能使用任何 List.function 的东西。

我是 OCaml 的新手，我正在学习这门课程，我应该从值列表中计算出非递减值的列表。

因此，例如，我有一个列表 [1; 2；3；1个；2；7; 6]

因此，接受列表的函数 mono 返回以下内容：

```
# mono [1; 2; 3; 1; 2; 7; 6];;
- : int list = [1; 2; 3; 7] 
```

我执行以下操作：

```
let rec calculateCheck value lst = (
    match lst with
     [] -> true
    | x :: xs -> (
        if (value < x) then
            false
        else
            calculateCheck value xs
    )
);;

let rec reverse_list lst = (

    match lst with
     [] -> []
    | x :: xs -> (
        reverse_list xs @ [x]
    )
);;

let shouldReverse = ref 1;; 

let cancelReverse somelist lst = (
    shouldReverse := 0;
    reverse_list lst
);;

let rec mono lst = (
    let somelist = ref lst in
        if (!shouldReverse = 1) then
            somelist := cancelReverse somelist lst
        else
            somelist := lst;

    match !somelist with
     [] -> []
    | x :: xs -> (
        if (calculateCheck x xs) then
            [x] @ mono xs
        else
            [] @ mono xs
    );
);; 
```

**问题？**

1.  由于 shouldReverse，这只适用于一次。
2.  我无法反转价值；`mono list`应该返回非递减列表。

**问题？**

1.  有什么简单的方法可以做到这一点？
2.  具体如何获取列表的子集。例如对于 [1; 2；3；5个；6]，我想要[1; 2；3] 作为 5 的输出，以便我可以递归地解决这个问题。另一件事是，您可以将列表设为 [1; 2；3；5个；6；5]:: 所以对于第二个 5，输出应该是 [1; 2；3；5个；6]。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T09:16:30.143

解决此类问题的一个好方法是强迫自己以数学上正确的方式*正式制定您正在寻找的内容。*通过一些培训，这通常会给你一个接近你将要编写的最终程序的描述。

我们试图定义一个`incr li`包含 的严格递增子序列的函数`li`。正如 Jeffrey Scoffield 所问的那样，您可能正在寻找 [最长](http://en.wikipedia.org/wiki/Longest_increasing_subsequence)的 此类子序列：这是一个经过充分研究的有趣且非平凡的算法问题，但鉴于您是初学者，我想您的老师要求的是更简单的东西。这是我对更简单规范的建议：您正在查找列表中大于它们之前的所有元素的所有元素。

产生易于转化为算法的数学定义的一个好方法是通过*归纳*`P(n)`推理：根据前任定义自然数上`P(n-1)`的属性，或者根据在一个小于的列表上的该属性定义给定列表上的属性。元素。考虑您要定义`incr [x1; x2; x3; x4]`. 你可以用 and 来表达它，也可以用and来`incr [x1; x2; x3]`表达。`x4``x1``incr [x2; x3; x4]`

*   `incr [x1;x2;x3;x4]`是`incr[x1;x2;x3]`，加上`x4`它是否大于列表中它之前的所有元素，或者等效地，它的最大元素`incr[x1;x2;x3]`

*   `incr [x1;x2;x3;x4]`是`incr[x2;x3;x4]`所有小于`x1`已删除的元素（它们不大于它们之前的所有元素），并`x1`添加

这两个精确的定义当然可以推广到任何长度的列表，并且它们给出了两种不同的写法`incr`。

```
(* `incr1` defines `incr [x1;x2;x3;x4]` from `incr [x1;x2;x3]`,
   keeping as intermediate values `subli` that corresponds to
   `incr [x1;x2;x3]` in reverse order, and `biggest` the biggest
   value encountered so far. *)
let incr1 li =
  let rec incr subli biggest = function
    | [] -> List.rev subli
    | h::t ->
      if h > biggest
      then incr (h::subli) h t
      else incr subli biggest t
  in
  match li with
    | [] -> []
    | h::t -> incr [h] h t

(* `incr2` defines `incr [x1;x2;x3;x4]` from `incr [x2;x3;x4]`; it
   needs no additional parameter as this is just a recursive call on
   the tail of the input list. *)
let rec incr2 = function
  | [] -> []
  | h::t ->
    (* to go from `incr [x2;x3;x4]` to `incr [x1;x2;x3;x4]`, one
       must remove all the elements of `incr [x2;x3;x4]` that are
       smaller than `x1`, then add `x1` to it *)
    let rec remove = function
      | [] -> []
      | h'::t ->
        if h >= h' then remove t
        else h'::t
    in h :: remove (incr2 t) 
```

# asp.net - 我可以使用RequiredFieldValidator 来检查多个ControlToValidate 吗？

> ID：14795596
> 
> 赞同：1
> 
> 时间：2013-02-10T07:14:45.433
> 
> 标签：asp.net, visual-studio, requiredfieldvalidator

我`TextBox`连续有 3 个 es，然后是一个 Next 按钮。

`TextBox`单击 Next 按钮时，仅当 3 个es 中的所有都包含一些用户输入的文本时，控件才会转到下一页。

是否有任何选项可以让我通过`TextBox`使用检查所有 es 是否包含一些文本`RequiredFieldValidator`（而不是为每个选项使用不同的 RequiredFieldValidator `ControlToValidate`）？

我目前有以下代码：

```
 <tr>
            <td class="style1">
                <asp:Label ID="lblDOB" runat="server" Font-Bold="True" Font-Italic="False" Font-Size="Medium"
                    ForeColor="Black" Text="Date of Birth"></asp:Label>
            </td>
              <td>
                  <asp:TextBox ID="txtA" runat="server" Width="45px"></asp:TextBox>
                  <asp:TextBox ID="txtB" runat="server" Width="45px"></asp:TextBox>
                  <asp:TextBox ID="txtC" runat="server" Width="45px"></asp:TextBox>
                  <asp:RequiredFieldValidator ID="RequiredFieldValidator9" runat="server" 
                    ControlToValidate="txtA"
                    ErrorMessage="Please enter Text">
                  </asp:RequiredFieldValidator>
                  <asp:RequiredFieldValidator ID="RequiredFieldValidator10" runat="server" 
                    ControlToValidate="txtB"
                    ErrorMessage="Please enter Text">
                  </asp:RequiredFieldValidator>
                  <asp:RequiredFieldValidator ID="RequiredFieldValidator11" runat="server" 
                    ControlToValidate="txtC"
                    ErrorMessage="Please enter Text">
                  </asp:RequiredFieldValidator>
              </td>
          </tr> 
```

因此，`RequiredFieldValidator`我不想使用 3 个不同的 s，而只想使用一个`RequiredFieldValidator`来检查所有 3 个 TextBoxes 是否都包含一些文本。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:27:48.310

您最好的选择是使用[CustomValidator](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.customvalidator.aspx)并与客户端 javascript 或服务器端 c#/vb.net 代码结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:24:05.453

您不能使用 验证多个控件`RequiredFieldValidator`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T14:35:35.380

您不能将`RequiredFieldValidator`与多个控件一起使用，但我更喜欢使用 HTML5 必需属性而不是 ASP.NET 验证。

```
<asp:TextBox ID="txt1" required="required" /> 
```

# c# - 我必须为 `→` 做些什么才能使用 @Html.ActionLink 辅助方法给出一个右箭头？

> ID：14795604
> 
> 赞同：2
> 
> 时间：2013-02-10T07:16:21.637
> 
> 标签：c#, asp.net-mvc

我想知道为什么下面创建超链接的代码没有给我一个右箭头。我必须做什么`" &rarr;"`才能给出一个尾随箭头？

```
@Html.ActionLink(
    String.Concat("leading ", viewModel.Text.ToLower(), " &rarr;"),
    link.Key,
    link.Value) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-07T18:27:47.667

最好的方法是使用 HtmlDecode。

```
@Html.ActionLink(
    String.Concat("leading ", viewModel.Text.ToLower(), HttpUtility.HtmlDecode("&rarr;")),
    link.Key,
    link.Value) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T07:26:10.770

尝试指定一个右箭头：

```
@Html.ActionLink(
    String.Concat("leading ", viewModel.Text.ToLower(), " →"),
    link.Key,
    link.Value) 
```

# python - py2exe 找不到 .py

> ID：14795605
> 
> 赞同：0
> 
> 时间：2013-02-10T07:16:32.697
> 
> 标签：python, pygame, converter, py2exe

抱歉，如果这是一个非常愚蠢的问题，
**我如何让 py2exe 找到我想要转换的模块？**
我不断收到此错误：

```
C:\Python27\lib\distutils\dist.py:267: UserWarning: Unknown distribution option: 'dist_dir'
  warnings.warn(msg)
running py2exe
creating C:\Users\David\workspace\setup\src\dist
*** searching for required modules ***
error: Pygame.py: No such file or directory 
```

我查找了许多 Pygame 的`.exe`教程或其他人遇到的问题，但他们的问题似乎发生在他们创建`.exe`文件之后......
我什至无法创建一个文件。
我使用的代码与[http://pygame.org/wiki/Pygame2exe](http://pygame.org/wiki/Pygame2exe)上的代码完全相同，只是我更改了：

```
class BuildeExe:
 def __init__(self):
     #Name of starting .py
     self.script = "MyApps.py" 
```

进入

```
class BuildExe:
 def __init__(self):
     #Name of starting .py
     self.script = "Pygame.py" 
```

我的 Pygame.py 存在于 "C:\Users\"username"\workspace\pygame\src" 中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:28:38.603

您可以尝试将其放入 .py 文件中：

```
from distutils.core import setup
import py2exe

setup(console=['hello.py']) 
```

例如他们在[本](http://www.py2exe.org/index.cgi/Tutorial)教程中的表现。然后你所要做的就是打开 cmd.exe 和 cd 到你的 "C:\Users\"username"\workspace\pygame\src" 并输入：

```
python setup.py py2exe 
```

或者您可以将 setup.py 更改为您保存上述代码的任何 .py 文件。（在您提供的同一目录中）

# mysql - 显示创建视图 | 来自 mysql 的 TABLE 不报告 QSqlQuery 中的任何行

> ID：14795607
> 
> 赞同：0
> 
> 时间：2013-02-10T07:16:45.907
> 
> 标签：mysql, qt, qsqlquery

在我的基于 Qt (4.8.1) 的应用程序中，我需要检索存储在 MySql 数据库中的视图的定义。

我正在使用的代码是

```
QSqlQuery query;   
query.prepare(QString("SHOW CREATE VIEW %1").arg(viewName));

qDebug() << "actually sending this query: " << query.lastQuery();
qDebug() << "exec retuned " << query.exec();
qDebug() << "last error reported as " << query.lastError();
qDebug() << "size = " << query.size();
qDebug() << "numRowsAffected" << query.numRowsAffected();

QString viewCreateString;
if (query.first()) {
    viewCreateString = query.value(1).toString();
    qDebug() << "got this create view record" << viewCreateString;
} 
```

当我运行上面的代码时，我得到以下结果：

```
actually sending this query:  "SHOW CREATE VIEW AC_STATE_V" 
exec retuned  true 
last error reported as  QSqlError(-1, "", "") 
size =  -1 
numRowsAffected -1 
```

注意：

1.  如果我使用相同的凭据从连接到同一个数据库的 MySql Workbench SQLTab 中运行相同的（剪切和粘贴）命令，我确实得到了预期的结果（即视图存在并且用户有足够的权限来检索它）
2.  以上所有内容也适用于 TABLE

# linux - asm/errno.h: 没有这样的文件或目录

> ID：14795608
> 
> 赞同：43
> 
> 时间：2013-02-10T07:16:51.677
> 
> 标签：linux, gcc

在构建 gcc 时，我收到此错误：

```
In file included from /usr/include/bits/errno.h:25,
             from /usr/include/errno.h:36,
             from ../.././gcc/tsystem.h:96,
             from ../.././gcc/crtstuff.c:68:
/usr/include/linux/errno.h:4:23: error: asm/errno.h: No such file or directory
make[2]: *** [crtbegin.o] Error 1
make[2]: Leaving directory `/opt/gcc-4.1.2/host-x86_64-unknown-linux-gnu/gcc' 
```

我正在从源代码构建 gcc 4.1。我想我必须安装`build-essential`. 但是，在 ubuntu 12.04 中安装该软件包会自动下载并安装 gcc 4.6，我不希望这样。

还有其他方法吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-04-24T20:22:18.197

我想你想要的包是`linux-libc-dev`. 我在构建 32-on-64 时遇到了这个问题；所以我需要`linux-libc-dev:i386`.

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-10-20T19:11:39.163

这对我有用：

```
ln -s /usr/include/asm-generic /usr/include/asm 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-08-03T18:38:22.053

这对我有用：

```
sudo ln -s /usr/include/asm-generic /usr/include/asm 
```

原因是 GCC 期望被称为在某些发行版中`/usr/include/asm`被重命名为。`/usr/include/asm-generic`

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-21T17:39:39.517

这为我修好了。

```
sudo apt-get install linux-libc-dev:i386 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2020-04-17T09:34:23.947

这在 Debian 10 上为我解决了这个问题，即使我正在使用基于 LLVM 的编译器进行编译：

```
sudo apt install gcc-multilib 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-10T07:24:18.027

`/usr/include/asm/errno.h`是 linux 头文件的一部分。我不能直接与 Ubuntu 12.04 交谈，但一般来说，您可以将 linux 源代码下载为您的发行版的软件包，并且它不应该要求您下载/安装 gcc。如果做不到这一点，您可以手动下载内核版本的 linux 头文件 ( `uname -a`) 并使用 CFLAGS 的包含指令来指定要查找的目录。

编辑：`sudo apt-get install linux-headers-generic`可能适合你。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-24T20:57:25.663

您缺少部分开发包。我不知道 Ubuntu，但你应该可以询问它的包管理系统来安装包含`/usr/include/asm/errno.h`.

*不要*从系统上的某个地方（或者，更糟糕的是，从其他地方）复制一些具有相似名称的文件。丢失文件可能意味着某些包已损坏；再次，请您的包管理器检查所有内容并（重新）安装丢失/损坏的部分。

除非您正在运行某些 LTS 版本，否则请升级。您的 Ubuntu 已经有 2 年历史了，即古老的。

当我们在这的时候，为什么在这个美丽的星球上建造这样一个古老的编译器？当前的 GCC 刚刚发布 4.9.0，4.7 之前的任何内容都是古老的历史，不再支持。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-05T13:59:08.470

如果要使用 asm 文件中的 errno.h，只需转到 /usr/(ctrl + l，键入 /usr/)，然后搜索 errno.h 和 errno-base.h。找到它们后，复制这两个文件中的代码，并将它们放在包含文件夹中。请注意，在“errno.h”中，该文件包含“errno-base.h”：

```
#include <asm-generic/errno-base.h> 
```

要么在上面创建一个同名的目录，要么将上面的代码更改为适合您使用的不同内容。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-13T08:33:09.613

在 Ubuntu 16.04 x86_64 上，你可以试试这个：

```
ln -s /usr/include/x86_64-linux-gnu/asm /usr/include/asm 
```

这适用于我的服务器。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2014-07-03T07:36:32.170

如果你能找到：

`usr/include/asm-generic/errno.h`

通过执行：

`find /usr/include -name errno.h`

然后尝试执行：

`cp --archive /usr/include/asm-generic /usr/include/asm`

它可能会解决这个问题。

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-11-02T13:57:19.420

我在编译 Asterisk 1.8.24.0 时遇到了这个问题，并通过以下方式解决了它：

```
mkdir /usr/include/asm-generic
cp /usr/include/asm/errno-base.h /usr/include/asm-generic/ 
```

不知道这是否是“正确的方式”，但我已经阅读了上面的评论，这给了我这个想法......它奏效了:)

# windows - WampApache 服务未运行

> ID：14795610
> 
> 赞同：1
> 
> 时间：2013-02-10T07:16:58.730
> 
> 标签：windows, apache, wamp, wampserver

我使用 wamp 2 年了，但现在它给出了一个错误

> **HTTP 错误 404。未找到请求的资源。**

在运行 localhost 和 phpmyadmin 上。

我尝试了以下方法：

1.  重新启动所有服务。

2.  重新下载安装

3.  检查没有其他程序正在使用端口 80。

4.  Skype 没有运行。

5.  在服务中 wampmysqld 正在运行，但 wampapache 没有运行。

6.  试图手动运行服务，它说

    > **Windows 无法在本地计算机上启动 wampapache。**

你有什么解决办法吗？wampserver 显示在线状态，颜色为橙色。在错误发生之前它是绿色的。

# batch-file - 从子例程中获取批处理文件名

> ID：14795614
> 
> 赞同：3
> 
> 时间：2013-02-10T07:17:40.377
> 
> 标签：batch-file, cmd, subroutine

在子例程中，%0 扩展为子例程名称，而不是脚本名称。是否有合法的方式仍然可以访问脚本名称，或者我应该将其作为参数传递？

```
@echo off

call :subroutine %~f0 my parameters
exit /b

:subroutine
shift
echo Script name is %0
echo Parameters: %1 %2
exit /b 
```

我希望调用语句只是

```
call :subroutine my parameters 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:58:02.893

在一个函数中，您需要添加至少一个修饰符到`%~0`.

```
call :test
exit /b

:test
echo 0   %0    - shows "test"
echo ~0  %~0   - shows "test"
echo ~f0 %~f0  - shows the batch name (full path)
exit /b 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T09:02:12.777

我相信 %~nx0 会给你带有扩展名的文件名，而 %~n0 只会给你文件名......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T10:20:42.850

我更喜欢在我的脚本顶部使用它：

```
set "This=%~dpnx0" 
```

这样，您仍然保留当前正在运行的脚本的完整路径。如果只需要获取脚本的名称，您可以使用 FOR /F 循环来提取它：

```
set "This=%~dpnx0"
echo This=%This%
for /F %%I in ('echo.%This%') do set "Name=%%~nxI"
echo Name=!Name! 
```

# .net - 调试 Microsoft SharePoint 代码 - 禁用优化

> ID：14795615
> 
> 赞同：2
> 
> 时间：2013-02-10T07:18:07.983
> 
> 标签：.net, debugging, sharepoint, iis, sharepoint-2010

我想在 SharePoint 网站上调试 Microsoft 代码。

我下载了[.NET Reflector Visual Studio Extension](http://visualstudiogallery.msdn.microsoft.com/95789cdb-08f9-4dae-9b2f-fc45a452ad77)，这样我就可以进入 Microsoft 代码，但是当我尝试获取一些变量的值时 - 我得到了错误：`"Cannot obtain value of local or argument <this> as it is not available at this instruction pointer, possibly because it has been optimized away."`

我尝试取消优化，我看到了 Cameron MacFarland 在[这里](https://stackoverflow.com/a/1518810/1206300)写的内容，所以我创建了一个文件，其中包含打开 VS 的命令而不进行 JIT 优化。至于第二个动作 - 当涉及到 IIS 正在运行的 SharePoint 应用程序时，我不知道该怎么做。

如何做到这一点？

**编辑：**我的问题基本上是：当代码由 IIS 运行时，如何禁用代码优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:12:25.570

[我在这里](https://stackoverflow.com/questions/294738/problem-debugging-net-code-with-mss-symbol-server)发布了答案，然后看到它也适用于您的具体问题。

长话短说，您可以更改注册表设置以使其正常工作。在“HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment”的注册表中添加一个名为“COMPLUS_ZAPDISABLE”的字符串键。将键值设置为“1”

这篇原创的[Red Gate 文章](http://www.red-gate.com/products/dotnet-development/reflector/debugging-experience)帮助我找到了这个技巧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T12:40:12.263

我最后做的解决方案，或多或少是 JaredPar 在[这里](https://stackoverflow.com/a/294744/1206300)写的：

我创建了一个如下所示的文件：

```
[.NET Framework Debugging Control] 
GenerateTrackingInfo=1 
AllowOptimize=0 
```

我把它放在 GAC 中，在我想禁用它的优化的每个 dll 文件夹中，并用 dll 的名称命名它，扩展名为“ini”。

现在，我可以使用绝大多数变量。

# ruby-on-rails - 数据库迁移后部署到 Heroku 的问题

> ID：14795617
> 
> 赞同：0
> 
> 时间：2013-02-10T07:18:26.267
> 
> 标签：ruby-on-rails, heroku

我有一个在本地运行但在部署到 heroku 后不运行的应用程序。在 Heroku 上，应用程序默认为“Welcome Aboard”页面。该文件已在本地删除。

我已经尝试解决这个问题几个小时，并尝试了其他 Stackoverflow 答案中提出的建议，其中最常见的是：

```
heroku run rake db:migrate
heroku restart 
```

无济于事。

这个问题似乎与我之前执行的数据库迁移有关。日志显示：

```
2013-02-10T06:58:31+00:00 app[web.1]: Processing by CorporationsController#new as HTML
2013-02-10T06:58:31+00:00 app[web.1]: Started GET "/corporations/new" for 64.236.139.254 at 2013-02-10 06:58:31 +0000
2013-02-10T06:58:31+00:00 app[web.1]:     28:     <%= f.text_field :incorporation_date %>
2013-02-10T06:58:31+00:00 app[web.1]:   Rendered corporations/new.html.erb within layouts/application (51.7ms)
2013-02-10T06:58:31+00:00 app[web.1]:   Rendered corporations/_form.html.erb (36.4ms)
2013-02-10T06:58:31+00:00 app[web.1]: Completed 500 Internal Server Error in 60ms
2013-02-10T06:58:31+00:00 app[web.1]:     26:   <div class="field">
2013-02-10T06:58:31+00:00 app[web.1]:     27:     <%= f.label :incorporation_date %><br />
2013-02-10T06:58:31+00:00 app[web.1]: 
2013-02-10T06:58:31+00:00 app[web.1]: ActionView::Template::Error (undefined method `incorporation_date' for #<Corporation:0x00000001e8c5c8>):
2013-02-10T06:58:31+00:00 app[web.1]:   app/views/corporations/_form.html.erb:28:in `block in _app_views_corporations__form_html_erb__2627361166614576795_14624240'
2013-02-10T06:58:31+00:00 app[web.1]:     29:   </div>
2013-02-10T06:58:31+00:00 app[web.1]:   app/views/corporations/new.html.erb:3:in `_app_views_corporations_new_html_erb___3891731594578946395_15501200'
2013-02-10T06:58:31+00:00 app[web.1]:     30:   <div class="actions">
2013-02-10T06:58:31+00:00 app[web.1]:     25:   </div>
2013-02-10T06:58:31+00:00 app[web.1]: 
2013-02-10T06:58:31+00:00 app[web.1]:   app/views/corporations/_form.html.erb:1:in `_app_views_corporations__form_html_erb__2627361166614576795_14624240'
2013-02-10T06:58:31+00:00 app[web.1]:     31:     <%= f.submit %>
2013-02-10T06:58:31+00:00 app[web.1]:   app/controllers/corporations_controller.rb:34:in `new'
2013-02-10T06:58:31+00:00 app[web.1]: 
```

我有三个如下所示的迁移文件：

**20130209192118_create_corporations.rb**

```
class CreateCorporations < ActiveRecord::Migration
  def change
    create_table :corporations do |t|
      t.string :name
      t.string :shares
      t.string :par_value
      t.string :incorporation_date
      t.timestamps
    end
  end
end 
```

**20130209231940_add_filing_date_to_corporations.rb**

```
class AddFilingDateToCorporations < ActiveRecord::Migration
  def change
    add_column :corporations, :filing_date, :date
  end
end 
```

**20130209232108_remove_incorporation_date_from_corporations**

```
class RemoveIncorporationDateFromCorporations < ActiveRecord::Migration
  def up
    remove_column :corporations, :incorporation_date
  end

  def down
    add_column :corporations, :incorporation_date, :string
  end
end 
```

真的很感激任何想法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:27:52.903

在您上次迁移中，您`incorporation_date`从表中删除列，但在您`corporations/_form.html.erb`调用`f.label :incorporation_date`. 奇怪的是它在本地工作；可能是您没有运行最新的迁移或手动编辑表。

# android - 数据加载后刷新Android应用程序

> ID：14795619
> 
> 赞同：0
> 
> 时间：2013-02-10T07:19:19.740
> 
> 标签：android, android-activity

在我的 android 应用程序中，我使用 sql 脚本插入初始数据。插入完成后，我需要强制停止应用程序或任何其他类似的东西来刷新应用程序以启用数据库更改。

我`finish()`在插入结束时调用了，但未显示新插入的数据。

我怎样才能做到这一点 ？

# ubuntu - VNC 连接到 Ubuntu EC2

> ID：14795623
> 
> 赞同：0
> 
> 时间：2013-02-10T07:19:52.770
> 
> 标签：ubuntu, amazon-ec2, vnc, vnc-server, vnc-viewer

我一直在尝试与安装在 EC2 上的 Ubuntu 实例建立 VNC 连接。

这是我到目前为止所做的：-

*   安装 x11vnc 并以`x11vnc -create`. 我使用了 create 标志，因为我不确定我是否相信 xserver 不会运行并且必须创建。我得到以下输出，提到“VNC 桌面是，端口 = 5903”。
*   我编辑了安全组以允许传入连接到端口 5903。
*   我尝试在公共 dns 和端口 5903 上使用“VNC 的鸡”从我的 Mac 连接到 VNC 桌面，但它说`connect() failed`。

我究竟做错了什么？我是否绑定到错误的界面？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:41:04.570

x11vnc 服务器的默认端口是 5900，可以更改。VNC 服务器将在 TCP 端口 5900+N 上侦听来自 VNC 查看器的连接，其中 N 是显示端口号（默认为零）。只需确保您打开正确的端口，以便您可以访问。还要正确配置其他设置。按照链接设置服务器：

[http://ubuntuguide.org/wiki/Ubuntu:Maverick#VNC](http://ubuntuguide.org/wiki/Ubuntu:Maverick#VNC)

[http://judsonsnotes.com/notes/index.php?option=com_content&view=article&id=706:set-up-a-vnc-server-in-ubuntu&catid=37:tech-notes&Itemid=59](http://judsonsnotes.com/notes/index.php?option=com_content&view=article&id=706:set-up-a-vnc-server-in-ubuntu&catid=37:tech-notes&Itemid=59)

# arrays - Strange output with my as3 arrays

> ID：14795625
> 
> 赞同：0
> 
> 时间：2013-02-10T07:20:11.070
> 
> 标签：arrays, actionscript-3, null, indexof

So, I think my question should be fairly straightforward, I am just looking for a little clarification on why I'm getting these seemingly odd results when I try to use the Array.indexOf method with null. Here's my code:

```
var myArray:Array = new Array(20);
trace(myarray.indexOf(null)); //output: -1
trace(myarray[0] == null); //output true 
```

So, it looks like the elements of an array are defaulted to null when a length constructor parameter is initialized, but why does indexOf(null) not return 0?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T08:41:59.697

> elements of an array are defaulted to null

Nope. It's a popular belief in [JS](http://saladwithsteve.com/2008/02/javascript-undefined-vs-null.html) & [AS3](http://www.bobbyberberyan.com/2011/01/as3-undefined-vs-null/). A property, when it has no definition, is **undefined**.

Besides, anyone implementing the indexOf function, would obviously check if the value to be searched is **null** before actually starting to search.

Also I think you are looking for this :

```
var myArray:Array = new Array(20);
trace(myArray.indexOf(undefined)); //output: 0
trace(myArray[0] == null); //output true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T13:28:33.460

If only a single numeric parameter is passed to the Array constructor, it is assumed to be length and it is converted to an integer by using the Integer() function. [http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000737.html](http://help.adobe.com/en_US/AS2LCR/Flash_10.0/help.html?content=00000737.html)

```
var myArray:Array = new Array(20);
trace(myArray.length); //output: 20 
```

As for the difference between `null` and `undefined` you can check this [http://www.bobbyberberyan.com/2011/01/as3-undefined-vs-null/](http://www.bobbyberberyan.com/2011/01/as3-undefined-vs-null/)

# javascript - 在 img click 上更改视频

> ID：14795630
> 
> 赞同：0
> 
> 时间：2013-02-10T07:20:50.523
> 
> 标签：javascript, html, html5-video, dom-events

我为他们准备了三个视频和缩略图。我正在尝试根据选择的缩略图更改初始视频的 src。

我的 HTML：

```
<video id="trailers">
            <source src="vLast.mp4" type="video/mp4">
            <source src="vLast.webm" type="video/webm">
</video>

<div id="playlist" class="animated fadeInRight">
    <div class="thumb" id="tGow"><img src="TbGow.jpg" onClick="changeTrailer()"/></div>
    <div class="thumb" id="tLast"><img src="TbLast.jpg" onClick="changeTrailer()"/></div>
    <div class="thumb" id="tTwo"><img src="TbTwo.jpg" onClick="changeTrailer()"/></div>
</div> 
```

我的脚本：

```
function changeTrailer(){

    var media = document.getElementById('trailers')
    var thumb = document.getElementsByTagName("img")
    if(thumb.getAttribute("src") == "TbGow.jpg"){
        media.src = "vGow.mp4";
        media.load();
        media.play();
    }else if (thumb.getAttribute("src") == "TbLast.jpg"){
        media.src = "vTwo.mp4";
        media.load();
        media.play();
    }else if(thumb.getAttribute("src") == "TbLast.jpg"){
        media.src = "vLast.mp4";
        media.load();
        media.play();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:33:10.740

`getElementsByTagName`将返回具有该特定标记名的所有元素的数组。因此，您`thumb.getAttribute("src")`将失败。你可以交替做的是：

HTML：

```
<video id="trailers"> 
    <source src="vLast.mp4" type="video/mp4"> 
    <source src="vLast.webm" type="video/webm"> 
</video> 

<div id="playlist" class="animated fadeInRight"> 
    <div class="thumb" id="tGow"><img src="TbGow.jpg" onClick="changeTrailer('vGow')"/></div> 
    <div class="thumb" id="tLast"><img src="TbLast.jpg" onClick="changeTrailer('vTwo')"/></div> 
    <div class="thumb" id="tTwo"><img src="TbTwo.jpg" onClick="changeTrailer('vLast')"/></div> 
</div> 
```

JavaScript：

```
function changeTrailer(source){
    var media = document.getElementById('trailers') 
    var source1 = media.children[0]; 
    var source2 = media.children[1]; 
    source1.src = source+'.mp4'; 
    source2.src = source+'.webm'; 
    media.load(); 
    media.play(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:27:26.757

当您说`media.src = "vGow.mp4";`您将 vGow.mp4 的源属性设置为您定义为视频标签的媒体元素时，使用`document.getElementById('trailers');`但实际上 html5`<video>`标签没有任何源属性。它实际上是`<source>`您需要更新的标签的源属性。

# android - OpenGL坐标映射到设备坐标

> ID：14795631
> 
> 赞同：0
> 
> 时间：2013-02-10T07:20:59.540
> 
> 标签：android, opengl-es

我已经阅读了很多教程并且还在 OpenGL 中实现了一些小应用程序。我对 OpenGL 坐标系统到 android 视图坐标系统的映射感到困惑。我在尝试将纹理显示为全屏时遇到了这个问题。不知何故，通过 hit&trial 方法，我能够将纹理显示为全屏，但有很多疑问，我无法快速进行。

1.  在 OpenGL 坐标系中从左下角（作为原点）开始，而在设备左上角作为原点。事物如何正确映射到设备。

2.  在 OpenGL 中，我们指定顶点范围从 -1 到 1。这些范围如何映射到范围从 0 到宽度和高度的设备。

3.  顶点能否以与设备坐标完全相同的方式进行映射。就像具有 0,100 的顶点映射到具有 0,100 的设备坐标一样。

在尝试将纹理显示为全屏时，我根据一些博客更改了代码并且它有效。这是更改。

```
glOrtho(0, width, height, 0, -1, 1);  from  glOrtho(0, width, 0, height, -1, 1);  

 &   vertices[] = {                            
       0, 0,
      width, 0,
      width, height,                
      0, height
      };

  from  {-1,-1,
          1,-1,
         -1,1,
           1,1} 
```

请帮助我理解坐标映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T00:22:03.393

您将 glOrtho 设置为宽度和高度 opengl 将拉伸它以适合您正在使用的设备，例如当您制作 glOrth(0,width,height,0,1,- 1）opengl拉伸它以适应您的屏幕，因此坐标可以通过设置 glOrth() 的宽度和高度来设置您想要的任何值

# cordova - 带有自定义主题的本地 jQuery Mobile CSS 未正确应用（但肯定已加载）

> ID：14795632
> 
> 赞同：0
> 
> 时间：2013-02-10T07:21:28.393
> 
> 标签：cordova, jquery-mobile

我的本地 CSS 用于 jQuery Mobile 有问题。一些样式正在被应用（颜色、边框和其他一些样式），但其他的没有，我不知道为什么。列表视图的样式不正确，并且“ui-loader”显示在页面底部。所以下面的样式不完全正确：

```
<link rel="stylesheet" type="text/css" href="./css/mobile-custom.min.css" />
<script type="text/javascript" src="./js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="./js/jquery.mobile-1.2.0.min.js"></script> 
```

但这确实：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script type="text/javascript" src="./js/jquery-1.8.2.min.js"></script>
<script type="text/javascript" src="./js/jquery.mobile-1.2.0.min.js"></script> 
```

针对这个问题：[jquery mobile css does not load from local, only from web](https://stackoverflow.com/questions/13980742/jquery-mobile-css-does-not-load-from-local-only-from-web)，我也尝试了其他相对路径，但这没有区别。我可以在 Chrome 中看到本地 jQuery js 和 css（以及它的 5 个图像，例如`ajax-loader.gif`under `./css/images/`）肯定已经加载。Chrome 元素/页面检查器中也没有错误。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T10:52:37.243

图像文件夹下有 4 个图像文件，也需要复制。这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T16:43:09.843

好的，这花了我两天的时间才弄清楚，但就是这样。如果您使用 themeroller 创建自己的主题，您必须记住下载并添加“无主题结构”CSS 文件。SOF的任何答案中都没有提到这一点。通过增加：

```
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.2.0.css" /> 
```

到：

```
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile-custom.min.css" />
 <link rel="stylesheet" type="text/css" href="css/jquery.mobile.structure-1.2.0.css" />
 <script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
 <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
 <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script> 
```

这一切终于奏效了！

# animation - 在 transitionFromViewController 期间 UINavigationBar 跳了 20 像素

> ID：14795645
> 
> 赞同：3
> 
> 时间：2013-02-10T07:23:42.577
> 
> 标签：animation, uiviewcontroller, ios6, uinavigationcontroller

在尝试使用 Apple 的 UIViewController 容器时，我遇到了在两个 UIViewController 之间设置动画过渡的问题。

这是设置...我创建了一个 UITabBarController 并在其中一个选项卡中创建了一个 UIViewController 作为容器。这个 ViewController 管理 UIViewController 和 UINavigationController 之间的转换。之前的观点是：

![VC 1 的显示](../Images/60a647402f1d86a412f7b9e818bccfab.png)

当点击 Next 按钮时，视图开始它的转换，并带有一个 FlipFromRight 转换。在过渡期间，导航栏处于“到”视图中，但位于视图顶部边缘向下 20 像素处。下图：

![在此处输入图像描述](../Images/ff2e89114c1ba4fc8cbdc43d124c7fcc.png)

绿色是容器视图的背景色。新视图完成转换后，导航栏会吸附到视图顶部，最终结果是：

![最终状态](../Images/7474deafa342fd0d0484ce191a9477fe.png)

捕捉到位的时间与动画的持续时间无关。我达到了我想要的最终状态，但过渡是一个问题。

我已经检测了 viewController 生命周期，并且导航栏和 UITableView 的框架与 XIB 中指定的一样。xib 看起来像这样：

![视图的xib配置](../Images/e0886282e7721a5c39511ac58d47315f.png)

这是代码：

在 -viewDidLoad -

```
_fromVC = [[FromVC alloc] initWithNibName:@"FromVC" bundle:nil delegate:self];

[self addChildViewController:_fromVC];
[self.view addSubview:_fromVC.view];
[_fromVC didMoveToParentViewController:self]; 
```

在我的按钮处理程序中 -

```
- (void)buttonSelected 
```

{

```
//
//  Create the "to" View controller
//
ToVC *toVC = [[ToVC alloc] initWithNibName:@"ToVC" bundle:nil];

//
//  Create the navigation controller for the study activity
//
_toNavCon = [[UINavigationController alloc] initWithRootViewController:toVC];

[self addChildViewController:_toNavCon];
[_fromVC willMoveToParentViewController:nil];

[self transitionFromViewController:_fromVC
                  toViewController:_toNavCon
                          duration:0.7
                           options:UIViewAnimationOptionTransitionFlipFromRight
                        animations:nil
                        completion:^(BOOL finished) {
                            [_fromVC removeFromParentViewController];
                            [_toNavCon didMoveToParentViewController:self];
                        }]; 
```

}

“to”视图控制器中没有代码可以更改视图控制器的外观。

另一点信息......当我在模拟器中“切换通话状态栏”时，导航栏顶部的间隙是通话状态栏的高度。

我已经查看了网络上的所有内容，但没有任何帮助。有没有人看到这个并且有没有人修复它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T05:29:09.953

我找到答案了！！子类 UINavigationController 并覆盖

```
- (BOOL)wantsFullScreenLayout{

  return NO;

} 
```

显然， UINavigationController 和 UITabController 总是想要全屏（默认是）-调整状态栏-您不能以任何其他方式设置此属性。它一直在为我工作。

# canvas - 画布坐标

> ID：14795649
> 
> 赞同：0
> 
> 时间：2013-02-10T07:24:02.250
> 
> 标签：canvas, mouse, coordinates

所以我是 Html/Javascript 的新手。所以我决定玩转画布并显示瓷砖并获得鼠标点击。我正在尝试做的是单击鼠标，然后将用户单击的磁贴变为更改颜色。问题是我得到用户单击以转换为平铺坐标的方式。似乎我越往右走越不准确。

```
<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Fun Canvas!!!</title>
    <style>
        canvas 
        {
            position: relative;
            padding-left: 0;
            padding-right: 0;
            margin-left: auto;
            margin-right: auto;
            display: block;
            border:1px solid #000000;
            height: 100%;
            width: 100%;
        }
    </style>
    <script>
        // Map Related
        var m_iTotalWidth;
        var m_iTotalHeight;
        var m_iMapWidth = 60;
        var m_iMapHeight = 30;
        var m_iTileWidth;
        var m_iTileHeight;
        var m_bColorFull = new Array(m_iMapWidth);
        var m_cColors = ['#FF0000', '#FF7700', '#FFFF00', '#00FF00', '#1500FF', '#C700FF'];
        var m_cDefaultColor = "#000";
        var m_CanvaContext;
        var m_Canvas;
        var m_iBorderLength = 1;

        // Map Color related
        var iMin = 0;
        var iMax = 255;
        var m_iPrevX = 0;
        var m_iPrevY = 0;

        // GameSpeed
        var m_iGameSpeed = 60;

        var m_IntervalID;
        document.addEventListener("DOMContentLoaded", initialize, false);
        document.documentElement.style.overflowX = 'hidden';     // horizontal scrollbar will be hidden
        document.documentElement.style.overflowY = 'hidden';

        function initialize() {
            m_IntervalID = window.setInterval("gameLoop();", m_iGameSpeed);

            // Get canvas context for drawing
            m_CanvasContext = document.getElementById("myCanvas").getContext("2d");
            setCanvasSize();
            m_Canvas = document.getElementById("myCanvas");
            document.addEventListener('mousedown', getPosition, false);

            for (var x = 0; x < m_iMapWidth; x++) {
                m_bColorFull[x] = new Array(m_iMapHeight);

                for (var y = 0; y < m_iMapHeight; y++)
                {
                    if (y == 0)
                        paintTile(x, y, "white", 2);

                    m_bColorFull[x][y] = false;
                }
            }

            drawMap();
            gameLoop();
        }

        // Runs all the functions required for the game to work.
        function gameLoop() {
            drawMap();
        }

        // Draws everything on the canvas.
        function drawMap() {

            for (var x = 0; x < m_iMapWidth; x++)
                for (var y = 1; y < m_iMapHeight; y++) {

                    if (m_bColorFull[x][y])
                        paintTile(x, y, getRandomColor(0, 255), 2);

                    else
                        paintTile(x, y, m_cDefaultColor, 2);
                }
        }

        // Paints a tile on the screen, handles converting pixel to tile.
        function paintTile(x, y, color, borderThickness) 
        {
            m_CanvasContext.fillStyle = color;
            m_CanvasContext.fillRect((x * m_iTileWidth) + borderThickness, (y * m_iTileHeight) + borderThickness, m_iTileWidth - (borderThickness * 2), m_iTileHeight - (borderThickness * 2));
        }

        // Handles clicks.
        function getPosition(event)
        {
            var rect = m_Canvas.getBoundingClientRect();
            var x = event.clientX - rect.left;
            var y = event.clientY - rect.top;
            x = Math.round(x / m_iTileWidth);
            y = Math.round(y / m_iTileHeight);

            for (var xIndex = 0; xIndex < m_iMapWidth; xIndex++)
                for (var yIndex = 0; yIndex < 1; yIndex++)
                    paintTile(xIndex, yIndex, "white", 0);

            writeMessage(1, "black", x + "-" + y);
            m_bColorFull[x][y] = !m_bColorFull[x][y];
        }

        // Sets the canvas as big as the broswer size.
        function setCanvasSize()
        {
            m_CanvasContext.scale(1, 1);
            m_iTileWidth = Math.floor(m_CanvasContext.canvas.width / m_iMapWidth);//Math.floor(window.innerWidth / m_iMapWidth);
            m_iTileHeight = Math.floor(m_CanvasContext.canvas.height / m_iMapHeight); //Math.floor(window.innerHeight / m_iMapHeight);
            //m_CanvasContext.canvas.width = (m_iTileWidth * m_iMapWidth);
            //m_CanvasContext.canvas.height = (m_iTileHeight * m_iMapHeight);
        }

        function writeMessage(startTile, color, message) 
        {
            m_CanvasContext.font = '16pt Calibri';
            m_CanvasContext.fillStyle = color;
            m_CanvasContext.fillText(message, startTile * m_iTileWidth, 16);
        }
        /*********************************************************************************************************/
        /*USEFULL FUNCTIONS*/

        function getRandomColor(iMin, iMax) {

            //return m_cColors[getRandomNumber(0, m_cColors.length)];
            // creating a random number between iMin and iMax
            var r = getRandomNumber(iMin, iMax)
            var g = getRandomNumber(iMin, iMax)
            var b = getRandomNumber(iMin, iMax)

            // going from decimal to hex
            var hexR = r.toString(16);
            var hexG = g.toString(16);
            var hexB = b.toString(16);

            // making sure single character values are prepended with a "0"
            if (hexR.length == 1)
                hexR = "0" + hexR;

            if (hexG.length == 1)
                hexG = "0" + hexG;

            if (hexB.length == 1)
                hexB = "0" + hexB;

            // creating the hex value by concatenatening the string values
            var hexColor = "#" + hexR + hexG + hexB;
            return hexColor.toUpperCase();
        }

        function getRandomNumber(iMin, iMax) {
            return Math.floor((Math.random() * (iMax - iMin)) + iMin);
        }
    </script>
</head>
<body>
    <canvas id="myCanvas" width="1000" height="500" style="border:1px solid #000000;">
</canvas>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T22:39:40.120

我已经这样做了：http: [//jsfiddle.net/Saturnix/rJD3r/](http://jsfiddle.net/Saturnix/rJD3r/)

并在这里详细解释：[https ://ijosephblog.wordpress.com/2012/05/09/implementing-conways-game-of-life-in-html5-canvas-with-javascript/](https://ijosephblog.wordpress.com/2012/05/09/implementing-conways-game-of-life-in-html5-canvas-with-javascript/)

您真正需要的东西还有很多，所以在这里我制作了一个更简单的版本：http: [//jsfiddle.net/DTMRt/](http://jsfiddle.net/DTMRt/)

上面演示中的这段代码将鼠标坐标转换为数组索引。

```
var j = Math.floor((g.mouseX / (dim + spacing)));
var i = Math.floor(g.mouseY / (dim + spacing));
grid[j][i] = "mouse is passing over here!"; 
```

其中`dim`是瓷砖的尺寸，是瓷砖`spacing`之间的距离（您可以将其设置为零），g.mouseX/g.mouseY 是鼠标坐标。

您需要将所有图块放在数组数组中，我是这样做的：

```
var grid = new Array(grid_width);

for (var j = 0; j<grid_width; j++){
grid[j] = new Array(grid_height);
}; 
```

其中 grid_width 和 grid_height 将是瓦片的行数和列数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T14:10:56.507

这段代码对我有用：

```
update = function(){
canvas.onmousedown=function(){
var e = window.event;
var posX = e.clientX;
var posY = e.clientY; 
```

> alert("X 位置："+ posX +" Y 位置：" + posY);`

```
};
setInterval(update,100); 
```

对你起作用吗？

# iphone - 无法将 UIScrollView 添加到另一个 UIscrollView

> ID：14795656
> 
> 赞同：0
> 
> 时间：2013-02-10T07:24:32.580
> 
> 标签：iphone, uiscrollview

我努力尝试，但无法在启用分页的另一个水平滚动视图中添加垂直滚动视图。我尝试寻找解决方案，但没有任何帮助。请帮忙。谢谢。以下是我尝试过的代码：

for (int i = 0; i < kNumImages; i++) {

```
 NSString *imageName = [NSString stringWithFormat:@"dots.png"];
    UIImage *image = [UIImage imageNamed:imageName];

    UIScrollView *insetScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 300)];
    insetScrollView.scrollEnabled = NO;
    UIView *insetView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 320)];

    UILabel *textLabel = [[UILabel alloc] initWithFrame:CGRectMake(320*i, 300, 300, 21)];
    textLabel.backgroundColor = [UIColor clearColor];
    textLabel.text = @"MyRandomText";
    UIImageView *imageButton = [[UIImageView alloc] initWithImage:image];
    imageButton.frame = CGRectMake(320*i, 0, 320, 260);

    [insetView addSubview:imageButton];
    [insetView addSubview:textLabel];
    [insetScrollView addSubview:insetView];
    [mainScrollView addSubview: insetScrollView];
    [mainScrollView setDelegate:self];
    [self.view addSubview:mainScrollView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:31:33.537

为什么你们都是insetScrollView 设置frame origin x=0？

所以试试这个。

```
UIScrollView *insetScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(320*i, 0, 320, 300)]; 
```

* * *

```
 mainScrollView<->
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||   inset0      |   inset1        |    inset2     |   inset3      |   inset4   ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            ||
||               |                 |               |               |            || 
```

# jquery - 添加表头行会禁用 jQuery 选择器

> ID：14795657
> 
> 赞同：1
> 
> 时间：2013-02-10T07:24:42.307
> 
> 标签：jquery, html, html-table, jquery-selectors

使用 jQuery，当我比较同一行中不同的 2 个单元格时，我可以突出显示一个单元格。

```
$(".g-rebuild-thumb-list tr").each(function () {
    if ($(this).find("td")[2].innerHTML != $(this).find("td")[3].innerHTML) {
        $(this).find("td")[0].bgColor = "red";
    }
}); 
```

这是一个按预期工作的 JS 小提琴：http: [//jsfiddle.net/HY2Q3/](http://jsfiddle.net/HY2Q3/)

但是，如果我在表中添加标题，它就不起作用。

```
<tr>
<th>head</th>
<th>head2</th>
<th>head3</th>
<th>head4</th> 
```

添加标题行的相同代码的完整 JS 小提琴：http: [//jsfiddle.net/kah2J/](http://jsfiddle.net/kah2J/)

有人可以提出解决方案或解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:30:38.577

因为您仍然基于`tr`您还为标题添加的选择器。我更新了 jsfiddle，并添加了`tbody`and `thead`，但您不必使用它们。您可以简单地向`tr`您希望应用选择器的类添加一个类，然后`td`将 jQuery 中的类替换为类名。这是小提琴：http: [//jsfiddle.net/HY2Q3/2/](http://jsfiddle.net/HY2Q3/2/)

# autohotkey - 如何将键盘输入存储到变量中？

> ID：14795670
> 
> 赞同：-1
> 
> 时间：2013-02-10T07:27:08.377
> 
> 标签：autohotkey

我目前在 Autohotkey 中使用 Random 函数来生成随机并保存到变量 rand 但如果用户按 R。

我的问题在这段代码下面

```
 R::
    Random, rand, 1, 3
    Msgbox, %rand%

if (rand = "1")
{
    ;SAM()
}
else if (rand = "2")
{
    ;AAJ()
}
else if (rand = "3")
{
    ;HEAD()
}
else
{
    ;Msgbox, else
} 
```

我还想在用户按下 1 时添加代码，如果我可以在 if 语句中添加 OR 表达式，例如

```
if (rand = "1" || keyboardinput = "1" )
{
    ;SAM()
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:30:26.343

为什么不使用与您的代码相同的方法来生成随机数。

```
1::
    if( rand == 1)
    {
        tooltip, hello
    }
return 
```

您还缺少代码第一部分末尾的返回，除非您希望脚本开始执行不应该执行的操作。

# sql-server-2008-r2 - 来自平面文件的 SSIS 格式化输入

> ID：14795671
> 
> 赞同：0
> 
> 时间：2013-02-10T07:27:25.417
> 
> 标签：sql-server-2008-r2, ssis, text-parsing

我是 SSIS 新手。我想在将条目保存在数据库表中之前格式化我的平面文件的输入。最初我创建了一个平面文件，如下所示：-

*   《1》、《超人》、《大都会》
*   《2》、《蝙蝠侠》、《哥谭》
*   《3》、《蜘蛛侠》、《纽约》
*   “4”，“詹姆斯邦德”，“伦敦”
*   《5》、《绿灯侠》、《Oa》

    剥离的解决方案很简单，如下所示[http://www.mssqltips.com/sqlservertip/1316/strip-double-quotes-from-an-import-file-in-integration-services-ssis/](http://www.mssqltips.com/sqlservertip/1316/strip-double-quotes-from-an-import-file-in-integration-services-ssis/)

    但是现在我创建了一个新的类似包，并给出了我的输入文件，如下所示：-

    *   “6”、“TMNT”、“纽约下水道”
    *   《7》、《钢铁侠》、《纽约》

请注意，我在分隔逗号后放置了一个空格。现在，当我按照上述方法时，第一个数字字段去掉了双引号，但其余条目保留了它们的引号。知道如何解决这个问题吗？关于 stackoverflow 的类似问题的一项建议提到了使用“转换脚本”。由于我是新手，任何人都可以阐明这种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T15:44:41.783

是的，您可以使用脚本组件转换。选择所有列，并将它们更改为 ReadWrite。编码：

```
public override void Input0_ProcessInputRow(Input0Buffer Row)
{
    Row.ID = Row.ID.Replace("\"", string.Empty);
    Row.Movie = Row.Movie.Replace("\"", string.Empty);
    Row.City = Row.City.Replace("\"", string.Empty);
} 
```

如果你想修剪你可以使用的空间

```
Row.ID.Replace("\"", string.Empty).Trim(); 
```

如果您想保留“”的值，您还需要小心。如果建议有帮助或有任何疑问，请发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:14:06.720

在“常规”选项卡中，您可以设置文本限定符“。然后这些引号将被忽略。

然后，当有简单的解决方案时，您不需要编写容易出错的脚本。

# javascript - 石灰JS循环动画不显示

> ID：14795672
> 
> 赞同：0
> 
> 时间：2013-02-10T07:27:25.303
> 
> 标签：javascript, html, limejs

我在 LimeJS 中有一个循环动画：

```
var scrollAnim = new lime.animation.MoveTo(800,248).setEasing(lime.animation.Easing.LINEAR);
var loopedAnim = lime.animation.Loop(scrollAnim);

roadSprite.runAction(loopedAnim); 
```

但是，当我使用此代码时，屏幕上不会显示任何内容。

如果我自己使用动画：

```
var scrollAnim = new lime.animation.MoveTo(800,248).setEasing(lime.animation.Easing.LINEAR);
//var loopedAnim = lime.animation.Loop(scrollAnim);

roadSprite.runAction(scrollAnim); 
```

它工作正常。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:37:39.760

arrrgh....我觉得很傻....我忘了补充

```
goog.require('lime.animation.Loop'); 
```

到我的 js 文件的顶部。

# ruby - 未在 ActiveRecord 类实例上填充 FactoryGirl 属性值

> ID：14795674
> 
> 赞同：0
> 
> 时间：2013-02-10T07:27:30.357
> 
> 标签：ruby, activerecord, factory-bot

我有一个 FactoryGirl 工厂，它为 ActiveRecord::Base 类定义了一些默认值。除了一个之外的所有值都进入了实例化类，除了一个。

这是我的工厂：

```
FactoryGirl.define do
  factory :office, :class => Office do
    open_date '03/01/2011'
    set_up_date '04/28/2011'
    type_code 'D'
  end

  after(:build) do |office|
    puts "Office open_date: #{office.open_date}"
    puts "Office set_up_date: #{office.set_up_date}"
  end
end 
```

这是我的基类：

```
class Office < ActiveRecord::Base
end 
```

当我执行 FactoryGirl.build :office 时，我得到以下输出：

```
Office open_date: 2011-01-03 00:00:00 -0500
Office set_up_date: 
```

这两列都是数据库上的 DATE 数据类型。出于某种原因，只有 open_date 被填充到基类中。到目前为止，我还无法确定原因。由于我只是调用构建，我想我可以安全地假设数据库触发器没有任何干扰。

有什么想法会导致 set_up_date 不在类实例上填充？

版本：

```
activemodel (3.2.11)
activerecord (3.2.11)
activerecord-oracle_enhanced-adapter (1.4.1)
activesupport (3.2.11)
factory_girl (4.2.0)

JRuby 1.7.2 (Running Ruby in 1.9 mode) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:23:18.097

只是出于好奇，您会尝试`set_up_date '28/04/2011'`代替`04/28/2011`吗？它看起来像根据以下内容`FactoryGirl`理解您的输入：`DD/MM/YYYY`

```
Office open_date: 2011-01-03 00:00:00 -0500 
```

看到**01-03**而不是**03-01**那里？

# mysql - 声明和设置变量以测试 SP 和查询之间的差异

> ID：14795680
> 
> 赞同：1
> 
> 时间：2013-02-10T07:28:40.847
> 
> 标签：mysql, stored-procedures, procedure

我试图在[这里](https://stackoverflow.com/questions/14794011/why-does-query-give-different-result-once-put-into-stored-procedure)解决另一个问题。一位成员告诉我，为了找到问题的答案，我需要更改查询以匹配 SP。为了做到这一点，我被告知要声明变量，所以我像在 SP 中一样使用变量。我的问题是我读了这么多，我的眼睛很痛，我不知道如何声明 friggin 变量。

请帮忙！！

这是我到目前为止所读到的：

[资源 1](https://stackoverflow.com/questions/1102109/mysql-delimiter-syntax-errors)资源 [2](http://forums.mysql.com/read.php?104,72508,72508)资源 [3](https://stackoverflow.com/questions/14678934/mysql-error-code-1193-unknown-system-variable)资源[4](http://dev.mysql.com/doc/refman/5.0/en/set-statement.html)资源[5](https://stackoverflow.com/questions/1009954/mysql-variable-vs-variable-whats-the-difference)

我可以继续下去。我真的被卡住了。我是 SQL 新手，这让我很烦。我不必使用 SP，但我真的很想这样做，这样我就可以了解注意事项，并希望学到足够的知识来帮助他人。

```
DECLARE zipcode VARCHAR(30)
DECLARE radius VARCHAR(30)
SET zipcode = 08360
SET radius = 50

SELECT C.CustomerName, C.MenuId
FROM Customers C
INNER JOIN (
  SELECT ZIPCODE, ( 3959 * ACOS( COS( RADIANS( (
    SELECT Z.LAT
    FROM ZipCodes Z
    WHERE Z.ZIPCODE =zipcode
    LIMIT 0 , 1
    ) ) ) * COS( RADIANS( LAT ) ) * COS( RADIANS( LNG ) - RADIANS( (

      SELECT Z.LNG
      FROM ZipCodes Z
      WHERE Z.ZIPCODE =zipcode
      LIMIT 0 , 1
    ) ) ) + SIN( RADIANS( (

    SELECT Z.LAT
    FROM ZipCodes Z
    WHERE Z.ZIPCODE =zipcode
    LIMIT 0 , 1
  ) ) ) * SIN( RADIANS( LAT ) ) ) ) AS distance
  FROM ZipCodes
  HAVING distance <radius
  ORDER BY distance
) AS RelevantCodes ON ( C.ZIPCODE = RelevantCodes.ZIPCODE ) 
```

我已经尝试了很多我在互联网上看到的组合，以至于我开始认为现在已经太晚了，不能再做任何事情了。如果您查看我查看的一些资源，您会看到我在哪里看到了带“@”和不带“@”之间的区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:11:58.857

如果要创建存储过程，则需要使用正确的语法。

请参阅：[http](http://dev.mysql.com/doc/refman/5.5/en/create-procedure.html)
://dev.mysql.com/doc/refman/5.5/en/create-procedure.html 请注意，在 proc 主体内，您需要用`;`.

因为您需要让 MySQL 知道主体过程何时结束，并且您需要将分隔符重新声明为不是`;`. 这将阻止 MySQL 在第一个 ';' 之后解释您的存储过程，而是一直监听到`$$`.

完成输入函数后，不要忘记将分隔符恢复为默认值。

```
SET DELIMITER $$

CREATE PROCEDURE QueryCustomerMenu(IN zipcode VARCHAR(30), IN radius VARCHAR(30))
BEGIN

DECLARE somevar VARCHAR(20);
SET somevar = '456';

SELECT C.CustomerName, C.MenuId
FROM Customers C
INNER JOIN (
  SELECT ZIPCODE, ( 3959 * ACOS( COS( RADIANS( (
    SELECT Z.LAT
    FROM ZipCodes Z
    WHERE Z.ZIPCODE =zipcode
    LIMIT 0 , 1
    ) ) ) * COS( RADIANS( LAT ) ) * COS( RADIANS( LNG ) - RADIANS( (

      SELECT Z.LNG
      FROM ZipCodes Z
      WHERE Z.ZIPCODE =zipcode
      LIMIT 0 , 1
    ) ) ) + SIN( RADIANS( (

    SELECT Z.LAT
    FROM ZipCodes Z
    WHERE Z.ZIPCODE =zipcode
    LIMIT 0 , 1
  ) ) ) * SIN( RADIANS( LAT ) ) ) ) AS distance
  FROM ZipCodes
  HAVING distance <radius
  ORDER BY distance
) AS RelevantCodes ON ( C.ZIPCODE = RelevantCodes.ZIPCODE );

END $$

SET DELIMITER ; 
```

现在您可以使用以下命令调用存储的过程：

```
CALL QueryCustomerMenu('09210','20'); 
```

它将返回一个带有`CustomerName`and的结果集`MenuID`。

# php - 使用 php include 从文件夹中添加第二个/第三个/第四个文件？

> ID：14795684
> 
> 赞同：0
> 
> 时间：2013-02-10T07:29:30.083
> 
> 标签：php, include

这是来自新手的两部分问题，因此如果可以仔细解释答案，将不胜感激。

目前我正在使用此代码将最新的新闻文章从新闻文件夹添加到我的首页，每篇文章都是一个单独的 html 页面。

```
 <?php $files = glob('news/*.html'); 
sort($files);    
$newest = array_pop($files); 
    include($newest); ?> 
```

但是我将如何从所述文件夹中添加第二个，第三个，第四个等等文件而不添加所有文件。

现在是第二个问题，我如何以与链接到这些文章的相同方式创建“回声”功能。目前我使用这种简单的方法 `<a href="#20130207 Grass Lands"> Grass Lands</a>` ，但每次有新文章出现时我都必须手动执行。我想过用这个。（注意所有新闻的html页面都命名为“20130207 Grass Lands.html”、“20130206 Demons vs Fairyland”等等。）

```
 <a href="# <?php $files = glob('news/*.html'); 
sort($files);    
$newest = array_pop($files); 
    echo $newest; ?>  "> <?php $files = glob('news/*.html'); 
sort($files);    
$newest = array_pop($files); 
    echo $newest; ?>
    </a> 
```

但是按钮最终显示为“news/20130207 Grass Lands.html”我如何剪掉按钮的“news/20130207”和“.html”部分并离开“Grass Lands”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T19:08:34.773

我已经解决了我自己困境的第二部分，并想将代码留在这里，以供未来想知道如何做到这一点的电枢。

```
 <?php   
$files = glob('news/*news.php');
rsort($files);
$before = '<a href="#';
$after = '</div></a>';

foreach ($files as $f) {
    $f = substr($f, 14, -9);
    $link = $before . $f . '"><div>' . $f . $after;
    echo $link;
} ?> 
```

所有这一切都创建了一个看起来像这样的按钮

```
<a href="#Demons vs Fairyland, another TD game Not as bad as it sounds"><div>Demons vs Fairyland, another TD game Not as bad as it sounds</div></a> 
```

现在在我的文章旁边，我将此代码添加到顶部，它将创建和锚定文件名

```
<a id="<?php echo substr(basename(__FILE__, ".php"), 9); ?>" name="<?php echo substr(basename(__FILE__, ".php"), 9); ?>"></a> 
```

这会创建一个看起来像这样的锚

```
<a id="Demons vs Fairyland, another TD game Not as bad as it sounds" name="Demons vs Fairyland, another TD game Not as bad as it sounds"></a> 
```

我花了几天的时间来做这件事，我希望下一个人会使用我的代码并让他免于遭受折磨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:48:26.990

好的，所以您想要生成静态页面并且仍然具有 a 的最低功能`CMS`；

您要做的第一件事是创建命名 url/文件的规则；这必须是独一无二的；

喜欢：`number-varchar1-varchar2-varchar3.html`

数字需要每次递增，而不是随机数！

现在，每次您需要列出文章/页面时，您可以通过 2 种方式进行：

一个。每次添加新新闻时，从您使用新数据创建/刷新的统计页面加载所有文章

湾。使用扫描方法从该文件夹加载文件

`explode()`现在，使用`-`as 键对链接进行排序；按数字降序对它们进行排序，因为您希望新新闻排在首位

但我有一些问题：

1.  你将如何编辑新闻？你会手动编辑文件吗？

2.  您需要 htaccess 技能来使用 seo 友好的网址吗？你知道 htaccess 规则是如何工作的吗？

3.  `wordpress`你为什么不使用`yii framework`？

Yii创造奇迹，我可以教你；

# iphone - 我的 tableview 没有重新加载？

> ID：14795706
> 
> 赞同：1
> 
> 时间：2013-02-10T07:33:11.027
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我正在使用 nsmutablearray 来控制一个表格视图，我是这样以编程方式创建的。`

```
tableview = [[UITableView alloc] init];
    [tableview setFrame:CGRectMake(self.view.frame.origin.x,44,self.view.frame.size.width, self.view.frame.size.height)];
    tableview.dataSource = self;
    tableview.delegate = self;

    [self.view addSubview:tableview];
     self.tableview.rowHeight = 55;

    [tableview release]; 
```

`.then i have an nsmutable array which is an instance array.when it is first loading everything seems to be working fine.i am storing that mutable array to the nsuserdefaults.from the second time onwords i am trying to load the data from the nsuserdefaults array like this.`

```
NSUserDefaults *userslist = [NSUserDefaults standardUserDefaults];
        NSArray *arrayObj = [userslist objectForKey:@"userslist"]; 

        NSMutableArray *searchfriendarray1=[NSMutableArray arrayWithArray:arrayObj];
        searchfriendarray=searchfriendarray1; 
```

.thats 也工作。但在一个方法中，我试图编辑该数组，然后尝试重新加载表，重新加载表没有被调用。`

```
[sortedFriendsArray removeAllObjects];
    [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"userslist"];
   [[NSUserDefaults standardUserDefaults]synchronize ];
   NSDictionary *dictionary = [self.searchfriendarray objectAtIndex:index];
     [dictionary setValue:@"offline" forKey:@"TYPE"];  

    NSUserDefaults *userslist = [NSUserDefaults standardUserDefaults];

    [userslist setObject:searchfriendarray forKey:@"userslist"]; 
```

`在此之后从我的数组创建排序数组。但是当我调用 [self.tableview reloadData]; 它没有重新加载。有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:16:29.597

没有更新您的表格视图的两个可能原因是

*   您的 dataSource 数组未正确更新，因此请在调用 reloadData 时检查数组的大小/内容

*   如果您的数据源已正确更新，则可能您不是在 mainThread 上调用 reloadData。

    [tableView performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:04:04.137

这里有几点：

*   在头文件 (.h) 中声明表视图
*   viewDidLoad 方法中的 Alloc-Init 表视图
*   在 dealloc 方法中释放表视图

并为您的数据源数组更新做同样的事情，一旦数组得到更新调用表视图重新加载数据方法：

```
[tableview reloadData]; 
```

注意：数据源数组 = numberOfRows 和 cellForRowAtIndexPath 方法中使用的数组。该数组需要在调用 reload data 方法之前更新。

希望这可以帮助你

# java - 将完整的滚动合成导出到图像

> ID：14795707
> 
> 赞同：3
> 
> 时间：2013-02-10T07:33:15.093
> 
> 标签：java, image, swt, scrolledcomposite

我想将完整的滚动合成导出到图像。我的意思是整个复合材料，而不仅仅是复合材料的可见区域。我找到了这个例子：

```
 Image drawable = new Image(display, someComposite.getBounds());
        GC gc = new GC(drawable);
        mainWidget.print(gc);
        ImageLoader loader = new ImageLoader();
        loader.data = new ImageData[] {drawable.getImageData()};
        loader.save("exportedImage.bmp", SWT.IMAGE_BMP);
        drawable.dispose();
        gc.dispose(); 
```

但输出是滚动合成的可见区域。:(而不是全部，我猜是因为`.getBound()`方法的原因，但我找不到将其切换到另一种方法的方法。我试过`.getClientArea()`但没有奏效......

在此先感谢，约西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T09:16:51.993

我找到了一个例子并修改了一些东西 - 只需复制并粘贴它：

```
import org.eclipse.swt.*;
import org.eclipse.swt.custom.ScrolledComposite;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.graphics.Color;
import org.eclipse.swt.graphics.GC;
import org.eclipse.swt.graphics.Image;
import org.eclipse.swt.graphics.ImageData;
import org.eclipse.swt.graphics.ImageLoader;
import org.eclipse.swt.graphics.Rectangle;
import org.eclipse.swt.layout.FillLayout;
import org.eclipse.swt.layout.GridLayout;
import org.eclipse.swt.widgets.*;

public class ScroledCompositeExport {
    public static void main (String [] args) {
        final Display display = new Display ();
     Shell shell = new Shell(display);
        shell.setLayout(new FillLayout());
        shell.setSize(200, 200);
        shell.setLocation(20, 20);

        final ScrolledComposite sc = new ScrolledComposite(shell, SWT.BORDER  | SWT.V_SCROLL | SWT.H_SCROLL);
        sc.setLayout(new GridLayout(1,true));

        final Composite innerComposite = new Composite(sc, SWT.NONE);
        innerComposite.setSize(400, 400);
        innerComposite.setLayout(new GridLayout(1, true));
        innerComposite.setBackground(new Color(display, 255, 0, 0));

        for(int i = 0; i < 10; i++)
        {
                Button b = new Button(innerComposite, SWT.PUSH);
                b.setText("Text");
                b.addSelectionListener(new SelectionAdapter() {
                    public void widgetSelected(SelectionEvent e) 
                    {
                        Image image = new Image(display, innerComposite.getBounds().width, innerComposite.getBounds().height);
                        ImageLoader loader = new ImageLoader();

                        GC gc = new GC(image);
                        innerComposite.print(gc);

                        gc.dispose();

                        loader.data = new ImageData[]{image.getImageData()};
                        loader.save("c:/temp/out.png", SWT.IMAGE_PNG);
                    }
                });
        }

        sc.setMinSize(innerComposite.computeSize(SWT.DEFAULT, SWT.DEFAULT));
        sc.setContent(innerComposite);
        sc.setExpandHorizontal(true);
        sc.setExpandVertical(true);

        shell.open();
        shell.open ();
        while (!shell.isDisposed()) {
            if (!display.readAndDispatch ()) display.sleep ();
        }
        display.dispose ();
    }
} 
```

它正在工作:) 并且可以作为开始的好点。

# kendo-ui - 带有列菜单的 Kendo UI 分组

> ID：14795713
> 
> 赞同：1
> 
> 时间：2013-02-10T07:34:41.110
> 
> 标签：kendo-ui

在启用分组和列菜单的情况下使用剑道网格时，我遇到了一个问题。

当我们选择任何一列进行分组时（比如 ShipCountry），折叠所有行，从列菜单中取消选择任何列（列的右上角）并展开行。取消选择的列在内部网格中可见，列名在标题中不可见。

我们甚至尝试处理列菜单的检查事件，手动显示或隐藏列，但没有成功。一些机构可以帮助解决这个问题。

下面是我的实现的代码片段。

```
 <html>
<head>
    <title></title>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://cdn.kendostatic.com/2012.3.1315/js/kendo.all.min.js"></script>
    <link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.common.min.css" rel="stylesheet" />
    <link href="http://cdn.kendostatic.com/2012.3.1315/styles/kendo.default.min.css" rel="stylesheet" />
</head>
<body>

        <div id="example" class="k-content">
            <div id="grid"></div>

            <script>
                $(document).ready(function() {
                    $("#grid").kendoGrid({
                        dataSource: {
                            type: "odata",
                            transport: {
                                read: "http://demos.kendoui.com/service/Northwind.svc/Orders"
                            },
                            schema: {
                                model: {
                                    fields: {
                                        OrderID: { type: "number" },
                                        ShipCountry: { type: "string" },
                                        ShipName: { type: "string" },
                                        ShipAddress: { type: "string" }                                        
                                    }
                                }
                            },
                            pageSize: 10,
                            serverPaging: true,
                            serverFiltering: true,
                            serverSorting: true
                        },
                        height: 250,
                        sortable: true,
                        filterable: true,
                        columnMenu: true,
                        pageable: true,
            groupable:true,
                        columns: [
                            "OrderID",
                            "ShipCountry",
                            "ShipName",
                            {
                                field: "ShipAddress",
                                filterable: false
                            }
                        ]
                    });
                });
            </script>
        </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:39:38.953

我确认这是一个错误。我已将其记录下来以进行修复。

# jquery-mobile - jQuery Mobile 样式被移除

> ID：14795718
> 
> 赞同：0
> 
> 时间：2013-02-10T07:35:48.993
> 
> 标签：jquery-mobile

我有硬编码的代码……一切正常……然后我将其换成动态更新：

```
<script>
  var items = [];

  $.getJSON('initialize.json', function(data) {
    $.each(data["home"], function(key, val) {

      var tmp1 = '';
      var tmp2 = '';

      $.each(val["group"], function(key2, val2) {
        tmp1 += key2 + "/";
        tmp2 += val2 + "/";
      });

      items.push('<li><a href="#">'+key+' ('+tmp1.slice(0, -1)+')<br /><small>Completed '+tmp2.slice(0, -1)+' days ago</small><span class="ui-li-count">'+val["total"]+'</span></a></li>');
    });

    $("#temp").append(items.join(""));
  });      
</script> 
```

这是容器：

```
 <ul id="temp" data-role="listview" data-theme="c">
      <!-- Populated dynamically -->
    </ul> 
```

我已经用谷歌搜索并尝试了建议的解决方案，但没有任何工作：

[页面初始化后添加内容的 jQuery Mobile 渲染问题](https://stackoverflow.com/questions/5651776/jquery-mobile-rendering-problems-with-content-being-added-after-the-page-is-init)

[http://jquerymobile.com/test/docs/pages/page-dynamic.html](http://jquerymobile.com/test/docs/pages/page-dynamic.html)

我已经尝试过上述方法......我很想知道为什么上述方法不起作用......以及会发生什么以及为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:39:15.687

`listview('refresh')`将新项目添加到列表视图后，您需要调用。所以试试

```
$("#temp").append(items.join("")).listview("refresh"); 
```

代替

```
$("#temp").append(items.join("")); 
```

> **[更新列表](http://jquerymobile.com/demos/1.2.0/docs/lists/docs-lists.html)**
> 
> 如果将项目添加到列表视图，**则需要对其调用 refresh() 方法**来更新样式并创建添加的任何嵌套列表。

这是工作的[jsFiddle](http://jsfiddle.net/pmatseykanets/PFrwu/)

# sql-server - 在同一台机器上运行 VS2012 和我的 SQL Server 效率低吗？

> ID：14795719
> 
> 赞同：0
> 
> 时间：2013-02-10T07:35:58.163
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3, visual-studio-2010, azure

我正在开发一个在 Azure 上运行的 ASP.NET MVC4 应用程序。我使用简单的成员身份进行身份验证，我的数据主要存储在表存储中。这包括存储在一行表存储中的网页源。

最近，我在本地环境中的页面出现了巨大的性能问题，需要 10-60 秒才能出现。我曾尝试使用本地 Web 服务器和 IIS Express，但差别不大。事情仍然进展缓慢。

我记得的一件事是最近我改用简单会员资格，现在我有以下连接字符串：

```
 <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=(LocalDb)\v11.0;Initial Catalog=aspnet-WebUx-20121229234926;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnet-WebUx-20121229234926.mdf" />
  </connectionStrings> 
```

我看到一个 SQL Server 进程在任务管理器中运行。有没有可能这可能会很慢。我的内存使用量是 3GB 的 70%。有什么建议么？你认为如果我改用我在云上运行的 SQL Server 会更好吗？

```
 <connectionStrings>
    <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=xxx.database.windows.net;Initial Catalog=selftestware;Persist Security Info=True;User ID=xx;Password=yy" />
  </connectionStrings> 
```

我愿意尝试任何事情。只希望我的页面在不到一分钟的时间内在本地出现:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:44:05.293

重要的是分析您的代码。这可以简单到将数据库调用与对`Stopwatch`.

我的猜测是，您的应用程序正在通过您的住宅 Internet 连接对 Azure Web 服务进行大量、闲聊的调用，如果您通过移动宽带连接，这可能至少需要约 100 毫秒，甚至可能高达 2000 毫秒(3G) 服务。

Azure 应用程序在 MS 的服务器上运行得更快，因为它们与数据库服务器的连接延迟低，你没有这种奢侈。

我建议您将应用程序配置为仅使用本地 SQL Server。

不用担心初始页面请求 - 这些在 ASP.NET 上总是很慢，因为它会重新编译您的 *.aspx/Razor 文件，重要的是所有后续请求。

# php - 无法传递会话变量

> ID：14795724
> 
> 赞同：-1
> 
> 时间：2013-02-10T07:36:28.403
> 
> 标签：php

```
if(isset($_POST["username"])&& isset($_POST["password"])){
include('config.php'); //this one connects to the database

$username = $_POST["username"];
$password = md5($_POST["password"]);

$sql2=mysql_query("SELECT * FROM clinic_staff WHERE username='$username' AND password='$password'");
$count2 = mysql_num_rows($sql2);

if($count2 == 1){
  while($row2 = mysql_fetch_array($sql2)){
        $id = $row2["staff_ID"];
        $position = $row2["position"];
  }
  $_SESSION["id"] = $id;
  $_SESSION["name"] = $username;
  $_SESSION["password"] = $password;
  $_SESSION["pos"] = $position;

  header("location:index.php");
  exit();
} 
```

问题是我无法在`index.php`. 不知道能不能顺利通过。在`index.php`我用过`echo $_SESSION["name"]`；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:39:59.170

您需要查看[session_start](http://php.net/manual/en/function.session-start.php)以启动会话。例子在[这里](http://php.net/manual/en/session.examples.basic.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:40:56.620

我没看到`session_start();`。您*必须*在使用会话变量的每个页面的顶部调用该函数。（至少我必须在我的服务器上这样做，有人对我说你实际上应该能够在没有 Session 的情况下使用 Session 变量`session_start();`，但是在我删除对 的调用后，所有需要 session 变量的东西都停止工作了`session_start();`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:42:18.843

把 session_start(); 在文档的开头，上面没有空格。

# c++ - C++ VS 2010 OpenCV 中 FindFirstFile 参数的 Concat 命令行参数

> ID：14795725
> 
> 赞同：0
> 
> 时间：2013-02-10T07:36:31.220
> 
> 标签：c++, visual-studio-2010, opencv

有没有人使用 FindFirstFile 函数扫描多个相同类型的文件？

```
int main(int argc, char** argv){
if(argc != 3)
{
 cout <<" Usage: Run [dir of images folder] [file format]" << endl;
 cout <<" Example: Run \\imgs\\\\ .jpg " << endl;
 return 0;
}

WIN32_FIND_DATA FindFileData;
HANDLE hFind;

string dir = argv[1];   // store user input dir
string type = argv[2];  // store user input file type
stringstream sst;
sst << dir << "*" << type;
string folderDir = sst.str();
sst.str("");
cout << "Scanning all " << type << " files in "<< dir << endl;
cout << folderDir << endl;

/* LOADING IMAGES IN FOLDER */ 
```

**我尝试了 folderDir.c_str() 而不是 "\imgs\*.jpg" 但我不能让它工作；**

```
hFind = FindFirstFile("\imgs\\*.jpg", &FindFileData);   //images must be in .vcxproj dir
    if (hFind != INVALID_HANDLE_VALUE){
        int i = 0;
        do {    
            char loc[50] = "\imgs\\";   // Obvsly, I couldn't assign argv[1] here
            images.push_back(imread(strcat(loc,FindFileData.cFileName)));   //pushes images into vector
            img_fname[i] = FindFileData.cFileName;          // stores file names into string array
            cout << "Successfully loaded " << FindFileData.cFileName << endl;   //prints loaded file names
            i++;
        }while(FindNextFile(hFind, &FindFileData));
    } 
```

另外，我可以请求帮助分配`string dir`给`char loc[50] = "\imgs\\";`吗？如果只有 char loc[50] = dir; 有可能...

我在实例化 loc 后尝试过`strcpy(loc, dir.c_str());`，但它仍然失败。在未知函数中给了我一个错误（无法识别或不支持的数组类型）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:25:58.587

```
i think, it should be only one backslash there: 
"imgs\*.jpg" instead of "\imgs\\*.jpg".

this works fine for me ( and gives me the filelist ):

std::vector<std::string> readdir( const char * dmask ) 
{
    std::vector<std::string> vec;
    HANDLE hFind;
    WIN32_FIND_DATA FindFileData;
    if ((hFind = FindFirstFile(dmask, &FindFileData)) != INVALID_HANDLE_VALUE)
    {
        do {
            vec.push_back( FindFileData.cFileName );
        } while(FindNextFile(hFind, &FindFileData));
        FindClose(hFind);
    }
    return vec;
}

std::vector<std::string> files = readdir("imgs\*.jpg"); 
```

# yahoo - 从雅虎财经获取数据

> ID：14795726
> 
> 赞同：45
> 
> 时间：2013-02-10T07:36:46.513
> 
> 标签：yahoo, finance, yql, yahoo-finance, stockquotes

我阅读了 YQL，但我不明白如何获得所有公司的一些简单数据（如公司代码、市值、股票价格等）？

还有一个问题，如何获取 YQL 可以查询的所有 Yahoo Finance 表及其字段？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-02-19T04:58:40.170

对于您的第一个问题，您实际上无法通过 YQL 进行任何查询来获取所有公司的数据。它更倾向于为较小的查询获取数据。（即，它不会为您提供整个 Yahoo! Finance 数据库的完整数据转储。）

对于您的第二个问题，以下是您如何开始探索 Yahoo! YQL 中的财务表：

1.  从[YQL 控制台开始](http://developer.yahoo.com/yql/console/)
2.  在左上角，确保选中 Show Community Tables
3.  `finance`在搜索字段中输入
4.  您将看到所有 Yahoo Finance 表格（大约 15 个）

然后您可以尝试一些示例查询，如下所示：

[`select * from yahoo.finance.quote where symbol in ("YHOO","AAPL","GOOG","MSFT")`](http://developer.yahoo.com/yql/console/?q=select%20*%20from%20yahoo.finance.quote%20where%20symbol%20in%20(%22YHOO%22%2C%22AAPL%22%2C%22GOOG%22%2C%22MSFT%22)&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys)

*2016-04-04 更新：*这是一个当前屏幕截图，显示了 Show Community Tables 复选框的位置，必须单击该复选框才能查看这些财务表： [![在此处输入图像描述](../Images/f854ae50002a9dc485a8504f0cf57860.png)](https://i.stack.imgur.com/1zviN.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-12-26T11:12:15.953

从 BrianC 的回答来看，使用 YQL 控制台。但在选择“显示社区表格”后，转到表格列表的底部并展开 yahoo，您会在其中找到大量 yahoo.finance 表格：

股票行情：

*   yahoo.finance.quotes
*   yahoo.finance.historydata

基本面分析：

*   yahoo.finance.keystats
*   yahoo.finance.balancesheet
*   yahoo.finance.损益表
*   yahoo.finance.analystimates
*   yahoo.finance.dividendhistory

技术分析：

*   yahoo.finance.historydata
*   yahoo.finance.quotes
*   yahoo.finance.quant
*   yahoo.finance.option*

一般财务信息：

*   雅虎财经
*   yahoo.finance.sectors
*   雅虎财经网
*   yahoo.finance.quoteslist
*   yahoo.finance.xchange

2017 年 11 月 2 日：**Yahoo Finance 显然已经杀死了这个 API**，有关更多信息和替代资源，请参阅[https://news.ycombinator.com/item?id=15616880](https://news.ycombinator.com/item?id=15616880)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-06T10:57:54.493

通过请求接收它的示例：

a) [http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.historical](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.historicaldata%20where%20symbol%20in%20%28%27YHOO%27%29%20and%20startDate%20=%20%272009-09-11%27%20and%20endDate%20=%20%272010-03-10%27&diagnostics=true&env=store://datatables.org/alltableswithkeys)

或者

b) [http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20yahoo.finance.quotes](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22AAPL%22%29&env=store://datatables.org/alltableswithkeys)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-14T19:41:16.817

由于 Yahoo Finances API 被禁用，我找到了[Alpha Vantage API](https://www.alphavantage.co/)

这是我与 Excel 的 Power Query 一起使用的股票查询示例：

```
https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=MSFT&interval=15min&outputsize=full&apikey=demo 
```

# binary - 从二进制数中删除第一个数字的含义？

> ID：14795728
> 
> 赞同：1
> 
> 时间：2013-02-10T07:37:20.073
> 
> 标签：binary

如果您有一个二进制数，例如 1010（以 10 为底的 10），是说除以二将删除第一个数字（使其最终为 010），对吗？

基本上你如何删除第一个数字（即，如果二进制数是 0 或 1，那么它最终会什么都没有）？我不想要代码或任何东西，我只想知道像你除以或乘以 2 之类的东西。

也不要考虑二进制数的任何最左边的零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:56:42.027

它的工作方式与在十进制中的工作方式相同。没有第一个数字的数字 401 是 1。你减去了 400，不是吗？现在，要除以 10，您需要将数字向右移动。401 右移是 040。401/10 = 40。注意 1 被丢弃，因为我们正在处理整数除法。

所以在二进制中，它是完全相同的，但具有 2 的幂。删除第一位不会除以 2。它减去其位置的值。所以 101b（即 4+1 = 5），没有它的最大位，是 001b，或 1 个十进制。这是减法：5 - 4 = 1。

要除以 2，请将位向右移动，就像以 10 为基数一样。所以 101b 将变为 010b，即十进制的 2。5/2 == 2（我们删除小数部分，因为它是整数除法）

有道理？如果你曾经对二进制感到困惑，想想数字和位置是如何以十为底的，而不是十的幂，使用二的幂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:42:12.160

如果“第一个数字”的意思是“第一个有效数字”，那么您要查找的内容类似于`number and not (1 shl (int(log number / log 2)))`, where`and`和`not`are 位运算，`shl`表示左移，并且`int`向下舍入（从不向上）为整数。`log`只是一个对数，在任何基数（两种情况下的基数相同）。

如果“第一个数字”是指第 n 个位置的数字（让最右边的位置为 0，从左数），那么您只需执行`number and not (1 shl position)`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-10T07:41:46.720

删除一个数字就像将其更改为 0。将 1010 更改为 0010 是通过减去 1000 来完成的：1010 - 1000 = 0010。

# mysql - MySQL：引用外键

> ID：14795729
> 
> 赞同：0
> 
> 时间：2013-02-10T07:37:20.977
> 
> 标签：mysql, foreign-keys

我试图在 mysql 中将外键引用到其父键，但出现了一个尴尬的错误。

我尝试了以下方法。

```
ALTER TABLE `website`
  ADD CONSTRAINT `website_cms_fk1` FOREIGN KEY (`cms_id`) REFERENCES `cms_technology` (`ID`); 
```

还

```
ALTER TABLE website ADD FOREIGN KEY (cms_id) REFERENCES cms_technology (ID) 
```

我收到以下错误。

*#1005 - 无法创建表 'script.#sql-5203_110b8ba' (errno: 150)*

以下是我的表格

```
CREATE TABLE IF NOT EXISTS `cms_technology` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `cms_name` varchar(250) NOT NULL DEFAULT '',
  `cms_description` varchar(250) NOT NULL DEFAULT '',
  PRIMARY KEY (`ID`)
);

INSERT INTO `cms_technology` (`ID`, `cms_name`, `cms_description`) VALUES
(1, 'Wordpress', 'WordPress › Blog Tool, Publishing Platform, and CMS');

CREATE TABLE IF NOT EXISTS `website` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `website_url` varchar(60) NOT NULL DEFAULT '',
  `website_ip` varchar(20) NOT NULL DEFAULT '',
  `website_title` varchar(250) NOT NULL DEFAULT '',
  `website_status` varchar(10) NOT NULL DEFAULT '',
  `website_scanned` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `website_response` int(3) NOT NULL DEFAULT '0',
  `cms_id` int(5)  NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`)
);

INSERT INTO `website` (`ID`, `website_url`, `website_ip`, `website_title`, `website_status`, `website_scanned`, `website_response`, `website_cms`) VALUES
(1, 'http://www.wpbeginner.com/', '', '', '', '0000-00-00 00:00:00', 0, 0); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:40:02.583

您需要更改`cms_ID`表`website`中列的数据类型才能引用表`cms_technology`。to 列的属性必须相同。

```
CREATE TABLE IF NOT EXISTS `website` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `website_url` varchar(60) NOT NULL DEFAULT '',
  `website_ip` varchar(20) NOT NULL DEFAULT '',
  `website_title` varchar(250) NOT NULL DEFAULT '',
  `website_status` varchar(10) NOT NULL DEFAULT '',
  `website_scanned` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
  `website_response` int(3) NOT NULL DEFAULT '0',
  `cms_id` bigint(20) unsigned NOT NULL,                        -- <<== HERE
  PRIMARY KEY (`ID`)
); 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/31e8f)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:55:12.040

我错过了**KEY `cms_id`( `cms_id`)**

```
 CREATE TABLE IF NOT EXISTS `website` (
      `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
      `website_url` varchar(60) NOT NULL DEFAULT '',
      `website_ip` varchar(20) NOT NULL DEFAULT '',
      `website_title` varchar(250) NOT NULL DEFAULT '',
      `website_status` varchar(10) NOT NULL DEFAULT '',
      `website_scanned` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
      `website_response` int(3) NOT NULL DEFAULT '0',
      `cms_id` bigint(20) unsigned NOT NULL DEFAULT '0',
      PRIMARY KEY (`ID`),
      KEY `cms_id` (`cms_id`)
    );

ALTER TABLE `website`
  ADD CONSTRAINT `website_cms_fk1` FOREIGN KEY (`cms_id`) REFERENCES `cms_technology` (`ID`); 
```

# ios - 在进行多次 setneedsdisplayinrect 后找出哪些矩形在 drawrect 中无效

> ID：14795734
> 
> 赞同：2
> 
> 时间：2013-02-10T07:38:29.540
> 
> 标签：ios, drawrect, setneedsdisplayinrect

我正在以网格形式绘制图像。一些图像会移动，我需要更新显示，但显然，我不想不必要地刷新整个屏幕。我多次使用 SetNeedsDisplayInRect 但有时，UIKit 似乎（而且我从其他来源得到这个）会使额外的矩形无效。我不介意重新绘制这些额外的块，但我需要知道哪些额外的块正在失效。

我目前正在保留需要刷新的矩形数组，但是当系统执行额外的矩形时，我最终会得到空方块，因为我没想到会重绘它们。

DrawRect 有参数，但它是一个包含无效区域的矩形。有没有办法确定这些额外的矩形？

# django - django：具有多个外键查询的模型

> ID：14795735
> 
> 赞同：0
> 
> 时间：2013-02-10T07:38:33.163
> 
> 标签：django, django-models

我已经完成了一个概念验证 django 项目，现在想重新设计模型以使其更加健壮。

基本模型称为 a `PhraseRequest`：

```
class PhraseRequest(models.Model):
    user = models.ForeignKey(User)
    timestamp = models.DateTimeField()
    phrase = models.TextField() 
```

现在复杂之处在于一个`PhraseRequest`有一堆关联的模型，，`PhraseRequestVote`（`Phrase`响应），`PhraseRequestComment`&c。

现在，当我列出按投票顺序排列的前十个 Phrase Request 时，我的模板有一个 for-each 循环，该循环提供十个 PhraseRequest 对象。然后它用请求填充 HTML，以及它的所有关联数据。

到目前为止，我一直在添加 each`PhraseRequest`的字典来实现这一点：

```
for r in phrase_requests:
    r.votes = PhraseRequestVote.objects.filter(request=r)
    r.n_votes = sum([v.weight for v in r.votes])
    r.comments = PhraseRequestComment.objects.filter(request=r)
    #and so on 
```

直觉上，这似乎不对 - 必须有一个“正确”的方法来做到这一点。我需要重新设计模型吗？查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:51:22.983

您可以在模型中创建函数并在视图中对其进行排序。像这样

模型.py

```
class model_name(models.Model)

    ........

    def votes(self):
         return Vote_Name.objects.filter(phrase_id=self).count() 
```

# java - 如何使用 AES_ENCRYPT 在 MySQL 中编写更新查询？

> ID：14795736
> 
> 赞同：0
> 
> 时间：2013-02-10T07:38:52.537
> 
> 标签：java, mysql, sql

这是我在用户想要更改密码时编写的代码。

```
s2.executeUpdate("UPDATE user SET AES_ENCRYPT(password='"+newpw1+"','key') WHERE uid='"+pubvar.uid+"')"); 
```

但它不起作用，有人可以为我纠正并发布它吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:47:33.870

你的意思是，

```
UPDATE user 
SET password = AES_ENCRYPT('" + newpw1 + "','key') 
WHERE uid = '" + pubvar.uid + "') 
```

更好地使用`PreparedStatement`以防止`SQL Injection`.

```
String _upd = "UPDATE user SET password = AES_ENCRYPT(?,'key') WHERE uid = ?)";
PreparedStatement pstmt = con.prepareStatement(_upd);
pstmt.setString(1, newpw1);
pstmt.setString(2, pubvar.uid);
pstmt.executeUpdate(); 
```

*   [准备好的语句](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)

# java - Netbeans：字符串不显示

> ID：14795742
> 
> 赞同：0
> 
> 时间：2013-02-10T07:39:29.507
> 
> 标签：java, string, textbox

我想在我的代码下方显示类中`textbox`的字符串`vpsfame`，但我无法显示它。你能给我建议这个字符串在`new8`代码中的类中显示吗？串行类给我来自gps的字符串继续。它还在运行时通过 System.out.println 显示它，但不通过`textbox`of`vpsfame`类显示它

包vpspro；

```
import javax.comm.*;
import java.util.*;
import java.io.*;

public class Serial
{
public void com() throws UnsupportedCommOperationException, IOException, TooManyListenersException
{
int c=1;

String wantedPortName="COM6";

Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

CommPortIdentifier portId = null;  
while(portIdentifiers.hasMoreElements())
{
    CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
    if(pid.getPortType() == CommPortIdentifier.PORT_SERIAL &&
       pid.getName().equals(wantedPortName)) 
    {
        portId = pid;
        break;
    }
}
if(portId == null)
{
    System.err.println("Could not find serial port " + wantedPortName);
    System.exit(1);
}
else
{
    System.out.println("system find gps reciever");
}
SerialPort port = null;
try {
    port = (SerialPort) portId.open(
        "RMC", 
        1);
    System.out.println("all are ok"); 
} catch(PortInUseException e) {
    System.err.println("Port already in use: " + e);
    System.exit(1);
}

port.setSerialPortParams(
    4800,
    SerialPort.DATABITS_8,
    SerialPort.STOPBITS_1,
    SerialPort.PARITY_NONE);

BufferedReader is = null;  

try {
  is = new BufferedReader(new InputStreamReader(port.getInputStream()));
  System.out.println("data is ok");
} catch (IOException e) {
  System.err.println("Can't open input stream: write-only");
  is = null;
}

String pt=null;
while(true)
{

String st = is.readLine();

        System.out.print("(" + c + ")");
        c++;
        new8 obj1 = new new8();

        obj1.decode(st);
        System.out.println(st);
        st = st.replace(st, "");

}

if (is != null) is.close();
/*if (os != null) os.close();*/
if (port != null) port.close();

}
} 
```

此代码用于开始与串行类通信

```
package vpspro;

import java.io.IOException;
import java.util.TooManyListenersException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.comm.UnsupportedCommOperationException;

public class getcon extends javax.swing.JFrame {

    public getcon() {
        initComponents();
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        sc = new javax.swing.JComboBox();
        jLabel2 = new javax.swing.JLabel();
        br = new javax.swing.JComboBox();
        help = new javax.swing.JButton();
        ok = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jLabel1.setText("select comport");

        sc.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "COM1", "COM2", "COM3", "COM4", "COM5", "COM6", "COM7", "COM8", "COM9", "COM10", "COM11", "COM12" }));
        sc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                scActionPerformed(evt);
            }
        });
        sc.addInputMethodListener(new java.awt.event.InputMethodListener() {
            public void caretPositionChanged(java.awt.event.InputMethodEvent evt) {
            }
            public void inputMethodTextChanged(java.awt.event.InputMethodEvent evt) {
                scInputMethodTextChanged(evt);
            }
        });

        jLabel2.setText("select buad rate");

        br.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "4800", "1900", "150000" }));
        br.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                brActionPerformed(evt);
            }
        });

        help.setText("help");

        ok.setText("ok");
        ok.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                okActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(67, 67, 67)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel1)
                            .addComponent(sc, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(105, 105, 105))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                        .addContainerGap(171, Short.MAX_VALUE)
                        .addComponent(ok)
                        .addGap(28, 28, 28)))
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(jLabel2)
                    .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                        .addComponent(help)
                        .addComponent(br, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(80, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(57, 57, 57)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel1)
                    .addComponent(jLabel2))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(sc, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(br, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(57, 57, 57)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(help)
                    .addComponent(ok))
                .addContainerGap(118, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void brActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
        if(evt.getSource()==br)
                br.addItem("4800");
                br.addItem("9600");
    }                                  

    private void scActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
        if(evt.getSource()==sc)
            sc.addItem("COM6");
        sc.addItem("COM7");
    }                                  

    private void scInputMethodTextChanged(java.awt.event.InputMethodEvent evt) {                                          
        // TODO add your handling code here:
        if(evt.getSource()==sc)
            sc.addItem("COM6");
        sc.addItem("COM7");
    }                                         

    private void okActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
        if(evt.getSource()==ok)
        {
            try {
                new Serial().com();
            } catch (UnsupportedCommOperationException ex) {
                Logger.getLogger(getcon.class.getName()).log(Level.SEVERE, null, ex);
            } catch (IOException ex) {
                Logger.getLogger(getcon.class.getName()).log(Level.SEVERE, null, ex);
            } catch (TooManyListenersException ex) {
                Logger.getLogger(getcon.class.getName()).log(Level.SEVERE, null, ex);
            }
            new new8();

        }
    }                                  

    public void getcom() {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new getcon().setVisible(true);
            }
        });
    }                    
    private javax.swing.JComboBox br;

    private javax.swing.JButton help;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    public javax.swing.JButton ok;
    private javax.swing.JComboBox sc;

} 
```

此代码解码我的 gps 字符串并显示和听到问题，当我朗姆酒程序文本框为空时，我无法在文本框中的字符串下方显示。

```
package vpa.io.*;
import vpspro.vpsfame;

public class new8
{
static String[] a2;
static String a1[];
static String c;
public static String[] t;

public void decode(String st)

{

    if(st.isEmpty())
    {
        System.out.println("System has proble");
        vpsfame obj=new vpsfame();
        obj.ab.setText("ok");
    }
else
    {

 a1=st.split("\\$",0);

a2=a1[1].split("\\*",0);
checksum();

if(a2[1].equalsIgnoreCase(c))
{

t=st.split(",",0);

switch (t[0].charAt(0))
{
case '$':

String s=t[0].substring(3,6);

String s3="RMC";

if (s.compareTo(s3)==0)                                                    

{

System.out.println("                    NMEA 0183 Details.....");
System.out.println("System identity:                            "+t[0].substring(1,3));
System.out.println("NMEA Formate:                               "+t[0].substring(3,6));
System.out.println("(UTC)Time:                                  "+t[1].substring(1,2));
new vpsfame().ac.setText(t[1].substring(1,2));
System.out.println("Lattitude:                                  "+t[3]);

System.out.println("Direction of Lattitude:                     "+t[4]);
new vpsfame().ab.setText(t[3].concat(t[4]));
System.out.println("Longitude:                                  "+t[5]);
System.out.println("Direction of Longitude:                     "+t[6]);
new vpsfame().bc.setText(t[5].concat(t[6]));
System.out.println("Speed over Ground:                          "+t[7]);
new vpsfame().cd.setText(t[7]);
/*System.out.println("Track mode:                                 "+t[8]);
System.out.println(st.isEmpty());
System.out.println("DATE:                                       "+t[9]);
System.out.println("adjustment declination                      "+t[10]);
System.out.println("Direction of Magnetic variation:            "+t[11].charAt(0));*/

}

}

else
        System.out.println("                                    Invalid Formate...");
        break;
        default:
        System.out.println("                                    Invalid DATA....");
}
}
else
System.out.println("                                            no match checksum");

}
}

public static void checksum()
{

int l=a2[0].length();
char[] a=a2[0].toCharArray();
int b=0;

for(int i=0;i<l;i++)
{

b=b^a[i];

}

 c=Integer.toHexString(b);

} 
```

}

这是我的主要课程

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * vpsfame.java
 *
 * Created on Jan 26, 2013, 11:02:32 PM
 */
package vpspro;

import java.awt.Color;
import java.awt.Cursor;
import java.awt.Font;
import java.awt.Image;
import java.awt.TextField;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import java.util.TooManyListenersException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.comm.UnsupportedCommOperationException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JComboBox;
import javax.swing.JFrame;

/**
 *
 * @author DHARMA
 */
public class vpsfame extends javax.swing.JFrame {
    public vpsfame()
    {
            initComponents();
    }

    /** Creates new form vpsfame */

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jComboBox1 = new javax.swing.JComboBox();
        ab = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        bc = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        ac = new javax.swing.JTextField();
        jLabel5 = new javax.swing.JLabel();
        cd = new javax.swing.JTextField();
        jPanel1 = new javax.swing.JPanel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        gc = new javax.swing.JMenuItem();
        jMenuItem2 = new javax.swing.JMenuItem();
        lm = new javax.swing.JMenuItem();
        jMenuItem4 = new javax.swing.JMenuItem();
        jMenuItem5 = new javax.swing.JMenuItem();
        jMenuItem6 = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        jMenuItem7 = new javax.swing.JMenuItem();
        jMenuItem8 = new javax.swing.JMenuItem();

        jComboBox1.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Item 1", "Item 2", "Item 3", "Item 4" }));

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        ab.setEditable(false);
        ab.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                abActionPerformed(evt);
            }
        });

        jLabel1.setText("latitude");

        jLabel2.setText("longitude");

        bc.setText(" ");
        bc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bcActionPerformed(evt);
            }
        });

        jLabel4.setText("UTC");

        ac.setText(" ");
        ac.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                acActionPerformed(evt);
            }
        });

        jLabel5.setText("Speed of vessel");

        cd.setText(" ");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 621, Short.MAX_VALUE)
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 368, Short.MAX_VALUE)
        );

        jMenu1.setText("File");

        gc.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_G, java.awt.event.InputEvent.CTRL_MASK));
        gc.setIcon(new javax.swing.ImageIcon("C:\\Users\\DHARMA\\Desktop\\png\\20x20\\55.png")); // NOI18N
        gc.setText("get connection");
        gc.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                gcActionPerformed(evt);
            }
        });
        jMenu1.add(gc);

        jMenuItem2.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_T, java.awt.event.InputEvent.CTRL_MASK));
        jMenuItem2.setText("track");
        jMenu1.add(jMenuItem2);

        lm.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_M, java.awt.event.InputEvent.ALT_MASK));
        lm.setText("load map");
        lm.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                lmActionPerformed(evt);
            }
        });
        jMenu1.add(lm);

        jMenuItem4.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_S, java.awt.event.InputEvent.CTRL_MASK));
        jMenuItem4.setText("data save");
        jMenu1.add(jMenuItem4);

        jMenuItem5.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_T, java.awt.event.InputEvent.META_MASK));
        jMenuItem5.setText("set time zone");
        jMenu1.add(jMenuItem5);

        jMenuItem6.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_Q, java.awt.event.InputEvent.CTRL_MASK));
        jMenuItem6.setText("quit");
        jMenu1.add(jMenuItem6);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("view");

        jMenuItem7.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_S, java.awt.event.InputEvent.ALT_MASK));
        jMenuItem7.setText("saved data");
        jMenu2.add(jMenuItem7);

        jMenuItem8.setAccelerator(javax.swing.KeyStroke.getKeyStroke(java.awt.event.KeyEvent.VK_A, java.awt.event.InputEvent.ALT_MASK));
        jMenuItem8.setText("about us");
        jMenu2.add(jMenuItem8);

        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(52, 52, 52)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jLabel5)
                        .addGap(19, 19, 19))
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(cd, javax.swing.GroupLayout.PREFERRED_SIZE, 60, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(35, 35, 35))
                    .addComponent(ab, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 95, Short.MAX_VALUE)
                    .addComponent(jLabel3)
                    .addComponent(ac, javax.swing.GroupLayout.DEFAULT_SIZE, 95, Short.MAX_VALUE)
                    .addComponent(jLabel4)
                    .addComponent(bc, javax.swing.GroupLayout.DEFAULT_SIZE, 95, Short.MAX_VALUE)
                    .addComponent(jLabel2)
                    .addComponent(jLabel1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGap(11, 11, 11)
                        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(25, 25, 25)
                        .addComponent(jLabel1)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(ab, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(43, 43, 43)
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                        .addComponent(jLabel2)
                        .addGap(16, 16, 16)
                        .addComponent(bc, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 56, Short.MAX_VALUE)
                        .addComponent(jLabel4)
                        .addGap(18, 18, 18)
                        .addComponent(ac, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(45, 45, 45)
                        .addComponent(jLabel5)
                        .addGap(18, 18, 18)
                        .addComponent(cd, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    private void gcActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
        if(evt.getSource()==gc)
        {
            getcon obj3=new getcon();
            obj3.setVisible(true);
        }

    }                                  

    private void lmActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void abActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:

    }                                  

    private void acActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void bcActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:

    }                                  

    /**
     * @param args the command line arguments
     */ 

    public static void main(String args[]) throws UnsupportedCommOperationException, IOException, TooManyListenersException {

    /*public vpsfame() 
    {

        initComponents();*/
        new new8();

        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {

                /*URL url=getClass().getResource("C:\\Users\\DHARMA\\Documents\\NetBeansProjects\\vpspro\\src");*/
                vpsfame obj4=new vpsfame();

                new vpsfame().setBackground(Color.yellow);
                obj4.setSize(1000, 
                        500);

                ImageIcon image1=new ImageIcon("C:\\Users\\DHARMA\\Documents\\NetBeansProjects\\vpspro\\src");
                System.out.println("jjdfhj");
                obj4.setIconImage(image1.getImage());
                obj4.setTitle("VPS");
                obj4.setVisible(true);
                new new8();

            }
        });

}
    /*public vpsfame()
    {
       fm=new JFrame("VPS");
        fm.setSize(1000, 1000);
        fm.setVisible(true);
        fm.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);  
    }*/
    // Variables declaration - do not modify
    public static javax.swing.JTextField ab;
    public javax.swing.JTextField ac;
    public static javax.swing.JTextField bc;
    public javax.swing.JTextField cd;
    private javax.swing.JMenuItem gc;
    private javax.swing.JComboBox jComboBox1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem jMenuItem2;
    private javax.swing.JMenuItem jMenuItem4;
    private javax.swing.JMenuItem jMenuItem5;
    private javax.swing.JMenuItem jMenuItem6;
    private javax.swing.JMenuItem jMenuItem7;
    private javax.swing.JMenuItem jMenuItem8;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JMenuItem lm;
    // End of variables declaration
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T10:39:10.000

我会认真建议您花点时间，并重构您的所有代码。忽略在类`new8`中，在方法中`decode`替换此代码：

```
new vpsfame().ac.setText(t[1].substring(1,2));
System.out.println("Lattitude:                                  "+t[3]);

System.out.println("Direction of Lattitude:                     "+t[4]);
new vpsfame().ab.setText(t[3].concat(t[4]));
System.out.println("Longitude:                                  "+t[5]);
System.out.println("Direction of Longitude:                     "+t[6]);
new vpsfame().bc.setText(t[5].concat(t[6]));
System.out.println("Speed over Ground:                          "+t[7]);
new vpsfame().cd.setText(t[7]); 
```

有了这个：

```
//use one object, dont just create new frames
vpsfame myFrame = new vpsfame();

myFrame.ac.setText(t[1].substring(1,2));
System.out.println("Lattitude:                                  "+t[3]);
System.out.println("Direction of Lattitude:                     "+t[4]);

myFrame.ab.setText(t[3].concat(t[4]));
System.out.println("Longitude:                                  "+t[5]);
System.out.println("Direction of Longitude:                     "+t[6]);

myFrame.bc.setText(t[5].concat(t[6]));
System.out.println("Speed over Ground:                          "+t[7]);
myFrame.cd.setText(t[7]);

//Also set the frame to visible, so it can be displayed once you've done all this work.
myFrame.setVisible(true); 
```

问题是：

1.  首先，您正在创建多个 vpsframe 对象，而您应该只有一个。创建 5 个帧，每个帧都有 4 个空字段是没有意义的。创建一个对象并初始化它的所有字段，而不是使用 5 个不同的对象。
2.  您没有跟踪您正在创建的对象，垃圾收集器只会摆脱它们，因此创建一个对象，将其分配给一个变量并使用它。
3.  将 vpsfame 对象设置为可见，否则您将永远看不到它。

您的代码也需要重构，您应该使用 camelCase 命名约定，并且类应该始终以大写字母开头。

# c# - MSBuildTaskHost.exe 已停止工作

> ID：14795744
> 
> 赞同：3
> 
> 时间：2013-02-10T07:39:56.187
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio

我正面临 Visual Studio 2010 的问题，当我尝试构建应用程序时，它给了我“MSBuildTaskHost.exe 已停止工作”错误。

![在此处输入图像描述](../Images/a68071270090ced9cd5192f81e2ea83f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T09:55:22.847

虽然很老我会回答这个问题，因为它仍然出现在谷歌的首位。在我的情况下，问题是由 Visual Studio 2012 安装引起的。修复它的一种肮脏方法是重命名/删除文件夹，如此[处](https://stackoverflow.com/questions/10247337/looks-like-msvs-11-0-beta-spoiled-a-msvs-10-0-installation "这里")`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A`接受的答案中所述

# mysql - 如何从 EAV 表设计中查询多行？

> ID：14795753
> 
> 赞同：0
> 
> 时间：2013-02-10T07:40:54.820
> 
> 标签：mysql, entity-attribute-value

我有一种情况，我必须使用 EAV 表设计。

我有以下两张表。

**节点**

```
id    name    structure_id
 1    name 1       7
 2    name 2       7 
```

**属性**

```
id    node_id    name       value    structure_id
1       1        firstname  test         7
2       1        lastname   test         7
3       2        firstname  test         7 
```

我有以下查询

```
SELECT n.*, GROUP_CONCAT( CONCAT_WS('||', a.name, a.value) ORDER BY a.name SEPARATOR ';;' ) as _attributes
            FROM nodes n JOIN attributes a ON n.structure_id = a.structure_id where n.structure_id = 7 
```

上面的查询输出以下内容（只有一行）

```
id: 1
name: name 1
structure_id: 7
_attributes: firstname||test;;firstname||test;;firstname||test;;firstname||test;;lastname||test;;lastname||test 
```

如何使其从**节点**表中输出两行以及**属性**中的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:03:14.287

如果通过 structure_id 和 node_id 连接节点和属性表，您将获得所需的结果集。所需的结果集：“来自节点表，其行来自属性”。

*   [http://sqlfiddle.com/#!2/83643/1](http://sqlfiddle.com/#!2/83643/1)

祝你好运

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:20:39.073

```
select n.id,n.name,n.structure_id,firstname,lastname from Nodes n 
join (select node_id, a.value as firstname from Attributes a where a.name='firstname' ) matches1 on matches1.node_id = n.id 
left join (select node_id, a.value as lastname  from Attributes a where a.name='lastname' )  matches2 on matches2.node_id = n.id 
```

# c# - 将数字属性设置为按引用移动 - C#

> ID：14795755
> 
> 赞同：1
> 
> 时间：2013-02-10T07:40:57.167
> 
> 标签：c#, recursion, reference

我有下一个对象（树结构对象）：

```
public class someClass
{

ObservableCollection<someClass> Children { get; }
long NumOfSelectedChildren { get; set; }
}

//There is more properties but its not important for my question 
```

我需要扫描给定的“someClass”对象并将每个节点设置到属性 NumOfSelectedChildren 中他的孩子的数量。

我写了一些递归来完成这项任务，但我必须发送 NumOfSelectedChildren 属性作为参考。目前，当我的递归完成时，所有“NumOfSelectedChildren”属性都等于 0，因为递归通过值而不是通过引用移动参数。

当我尝试将属性作为“ref”发送时，我收到以下错误：“错误 23 属性、索引器或动态成员访问可能不会作为 out 或 ref 参数传递”

如何确保此属性将通过引用而不是按值发送？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:45:21.493

您还没有展示如何更新`NumOfSelectedChildren`属性，所以让我提出一个不需要您通过引用传递属性的替代解决方案：

```
public class someClass
{
    ObservableCollection<someClass> Children { get; }

    long NumOfSelectedChildren { get; set; }

    int UpdateNumOfSelectedChildren()
    {
       return NumOfSelectedChildren =
           Children.Sum(x => 1 + x.UpdateNumOfSelectedChildren());
    }
} 
```

# iphone - 有没有办法将现有用户添加到新的 iOS 应用内购买的“付费列表”？

> ID：14795759
> 
> 赞同：0
> 
> 时间：2013-02-10T07:42:04.183
> 
> 标签：iphone, ios, in-app-purchase, upgrade

我处于一个棘手的位置，我正试图找出最好的方法。几个月前我发布了一个应用程序，向几百人收取了 0.99 美元的费用。我现在有兴趣通过应用内购买使应用免费。我怎样才能做到让已经付款的人不需要再次付款？我可以以编程方式将它们“列入白名单”吗？然后只是向未来的用户收费？

我已经与 Game Center 集成，所以我已经在玩弄在排行榜上检查用户的想法了？

我无法制作单独的应用程序，我只是想知道是否有任何 API 或路由可以用来实现此目的。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T08:00:35.380

这是一个潜在的策略：

1) 使您的应用内购买本质上是一个切换，可以访问您应用中的某些功能或资源。

2) 更改某些密钥文件的名称或位置。数据库将是最简单的（如果你有的话），但也会查找用户默认值或其他保存的文件。

3）在启动新版本时，检查是否存在旧版本 - 如果存在，请将标记键保存到应用程序的钥匙串中（如果您重命名数据库，请将旧版本移动到新名称/位置！） . 钥匙串是放置它的好地方，因为它在应用程序安装之间持续存在。我不确定iCloud是否支持它。

4) 现在，在检查功能时，除了询问 Storekit 是否购买了您想要为他们解锁的物品外，还要在钥匙串中查找该标记键。

5）在UI块购买并表明他们已经付款。

这是您能做的最好的事情，他们可能已经完全删除了该应用程序，在这种情况下，您无能为力帮助他们……您可能还想制作某种一次性使用代码来解锁该功能同样的方式（除了你的应用程序将根据你的服务器验证代码，以便它只能在你允许的情况下使用），这样你就可以帮助那些联系你说他们以前购买过应用程序的人。没有办法验证这一点，但无论如何让他们进行升级只是良好的客户服务。

# c# - 在 C# 中从 xaml 中检索绑定文本

> ID：14795769
> 
> 赞同：0
> 
> 时间：2013-02-10T07:44:32.873
> 
> 标签：c#, .net, xaml, windows-phone-7.1

我的 xaml 代码为：

```
<ListBox x:Name="SecondListBox" Margin="0,0,-12,0" >
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,17" Width="432" Height="78">
                                <toolkit:ToggleSwitch Name="toggle3" Header="{Binding name}" Height="120" HorizontalAlignment="Left" Margin="35,20,0,0"  VerticalAlignment="Center" Width="440" Content="{Binding descrip}" Checked="toggleSwitch1_Checked" Unchecked="toggleSwitch1_Unchecked" Tap="toggleSwitch1_Tap"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </controls:PivotItem> 
```

现在我想在 c# 代码中检索切换开关（切换 3）的标题文本。怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T17:23:47.233

这应该让您走上正确的路径来访问 ItemTemplate 中的元素。可能这就是您要寻找的东西。

[http://dotbay.blogspot.in/2009/09/accessing-controls-in-wpf-itemtemplate.html](http://dotbay.blogspot.in/2009/09/accessing-controls-in-wpf-itemtemplate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:01:08.187

当您像以前一样创建数据绑定时，它应该会自动更新您绑定到的变量，名称

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T09:06:05.770

假设您有一个适当的集合作为 ItemsSource 绑定，xaml 将编写如下：

```
<ListBox x:Name="SecondListBox" Margin="0,0,-12,0" ItemsSource="{Binding Path=ItemsCollection}" >
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Margin="0,0,0,17" Width="432" Height="78">
                                <toolkit:ToggleSwitch Name="toggle3" Header="{Binding Name,Mode=TwoWay}" Height="120" HorizontalAlignment="Left" Margin="35,20,0,0"  VerticalAlignment="Center" Width="440" Content="{Binding descrip}" Checked="toggleSwitch1_Checked" Unchecked="toggleSwitch1_Unchecked" Tap="toggleSwitch1_Tap"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox> 
```

您必须在 DataContext 中提供一个名为`ItemsCollection`type的属性，其中类应该包含属性`IEnumerable<TModel>``TModel``Name`

# delphi - Delphi中的UDP文件传输

> ID：14795778
> 
> 赞同：4
> 
> 时间：2013-02-10T07:45:49.457
> 
> 标签：delphi, delphi-xe3

我正在编写一个通过局域网计算机传输文件的程序，我正在寻找Delphi中的文件传输方法已经有一段时间了。我发现 UDP 是一个很好的解决方案，但是有一个问题：在每个示例或文章中，我发现在服务器程序旁边有一个客户端程序，但是我的程序必须向/从网络中的每台计算机发送和接收，没有特定的服务器或客户端，例如p2p，我不想让一台计算机服务器和另一个客户端，我该怎么办？我也搜索了 Indy 文章，它也在服务器/客户端模式下工作（据我所知）。

![在此处输入图像描述](../Images/a1c2dc69615973177254a530d2fe7473.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T09:47:20.367

UDP 可以在*广播*模式下工作，这正是您所需要的。但是这样的 UDP 广播*在当前网络之外是不可路由的*（即它们被路由器阻止），所以如果您的项目需要在主要物理网络之外访问，您必须实现更复杂的东西。

不要重新发明轮子！如果您想查看一些实现此概念的工作源，请参阅*Ares Galaxy*：

> “Delphi自组织p2p网络项目，具有高规模能力和快速广播式搜索系统。客户端支持多源文件传输、部分文件共享、内置音频/视频播放器和去中心化聊天室”。

[源代码文件可从 SourceForge](http://sourceforge.net/projects/aresgalaxy/files/aresgalaxy/)获得。您可以根据需要重新使用/调整 P2P 网络层 - 但如果您在项目中使用它，请注意 Ares 源代码的许可条款。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T19:53:42.137

看看印地的`TIdTrivialFTP`和`TIdTrivialFTPServer`组件。 [TFTP](https://www.rfc-editor.org/rfc/rfc1350)是一种基于 UDP 的文件传输协议。

# c++ - 用于在 DirectX 周围移动精灵的动态顶点缓冲区

> ID：14795779
> 
> 赞同：0
> 
> 时间：2013-02-10T07:45:56.613
> 
> 标签：c++, directx

我正在尝试使用 DirectX 中的 2D 渲染在屏幕上移动精灵

我正在阅读一个利用动态顶点缓冲区来移动这些精灵的教程。但是，我想知道......

使用平移矩阵来移动这些有什么问题？据我了解，动态顶点缓冲区在大多数情况下效率低下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:55:23.963

实际上，这可以通过平移矩阵来完成。如果没有看到您正在谈论的教程，很难猜测他们使用动态顶点缓冲区的基本原理，它可能纯粹是教学。

# sql - 我可以在没有 Visual Studio 的情况下使用 SQL Server Compact Edition 3.5

> ID：14795781
> 
> 赞同：1
> 
> 时间：2013-02-10T07:46:35.183
> 
> 标签：sql, sql-server-ce

我可以在没有 Visual Studio 的情况下使用 SQL Server Compact Edition 3.5。我安装了 SQL Server Compact Edition，但找不到创建数据库的位置。

请指导我，我必须在客户端计算机上安装 sql server 才能在没有 Visual Studio 的情况下运行我的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T21:47:34.463

在这里（[链接](http://erikej.blogspot.ro/2009/04/sql-compact-3rd-party-tools.html)），您有大量用于 SQL CE 的工具（商业和免费）。

# qt - 如何使用特殊的 qt sdk 路径安装 qt-createor

> ID：14795782
> 
> 赞同：1
> 
> 时间：2013-02-10T07:46:51.113
> 
> 标签：qt, qt-creator

*   `/usr/local/Txxxx/qt4`我首先在“ ”路径中安装了“Qt libraries 4.8.4 for Linux/X11 (225 MB)” ，
*   然后安装“Qt Creator 2.6.2 for Linux/X11 32-bit (60 MB)”，

但它默认qt sdk的路径是“ `/usr/share/qt`”

我收到以下错误：

> “xxxxxx.h”：没有那个文件或目录；

但是这个文件在`/usr/local/Txxxx/qt4`目录下；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T11:32:27.177

使用您安装的 Qt 在 Qt Creator 中创建一个工具包：http: [//doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html](http://doc-snapshot.qt-project.org/qtcreator-2.6/creator-targets.html)

# r - 创建对对象的引用

> ID：14795783
> 
> 赞同：3
> 
> 时间：2013-02-10T07:46:54.320
> 
> 标签：r

**问题**R 是否包含对对象的引用的概念。

在 python 中，相等运算符实际上是引用复制。例如：

```
>> a = [1,2,3]
>> b = a
>> b[1] = 10
>> a
   [1, 10, 3] 
```

或在 C++ 中

```
 vector a(3);
 a[1] = 1;
 vector& b = a;
 b[1] = 10;
 // now a[1] = 10 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T09:00:50.553

您可能应该查看参考类，但您也可以只使用普通的旧环境：

```
> a=new.env()
> a$data=c(1,2,3)
> b=a
> b$data
[1] 1 2 3
> a$data[1]=99
> b$data
[1] 99  2  3 
```

`a`并且`b`是相同的环境：

```
> a
<environment: 0xa1799fc>
> b
<environment: 0xa1799fc> 
```

所以它们的内容是相同的对象。

我认为其他一些 R OO 系统（R.oo，proto？）使用这样的环境来实现 OO 对象和方法。

因此，尽管您*可以*这样做，但像这样的远距离动作效果可能会导致很难找到错误，而您可能不应该这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:07:57.290

是的，这个特性存在于 R 中，虽然我自己从未使用过它。参考类（或有时被称为 R5 类）具有这种行为。相当详细的文档在下面的链接中，以及一个示例

[http://www.inside-r.org/r-doc/methods/ReferenceClasses](http://www.inside-r.org/r-doc/methods/ReferenceClasses)

SE 上还有其他问题，这些问题链接到可能包含更多示例的各种演示文稿

[新的参考类有什么意义？](https://stackoverflow.com/questions/5137199/what-is-the-significance-of-the-new-reference-classes)

# php - 避免多次重新加载 xml

> ID：14795785
> 
> 赞同：0
> 
> 时间：2013-02-10T07:47:35.523
> 
> 标签：php, xml

我想从 XML 文件中获取国家/地区源和目的地，它在 localhost 中完美运行，但在服务器中无法正常工作，如果我在地图上快速移动光标，在服务器中它会显示不同的目的地国家/地区。

在`jquerymap.php` 我调用 price_by_countries.php 文件`mouseover`和`mouseclick`事件，我还传递了 2 个变量，`price_by_countries.php`在这个文件中我正在加载 XML 文档，我认为每次都加载 XMLfile 可能会导致这个问题。我是编程新手想尽快解决这个问题..谢谢

* * *

jquerymap.php 文件代码

```
 jQuery.ajax({  type: "POST",
                url: "price_by_countries.php", 
                data: "s="+source+"&d="+destination,
                dataType: 'HTML',
                success: function (msg) {
                             jQuery("#rightinput").html(msg);
                         }
                }); 
```

price_by_countries 文件代码

```
$xml = simplexml_load_file("rd.xml") or die("Error: Cannot create object");

function processXML($node){
   foreach($node->children() as $books  ){  
      if($books['source'] == trim(ucfirst($_REQUEST['s'])) && 
         $books['destination'] ==  trim(ucfirst($_REQUEST['d']))) 
      {
         echo "<pre>";
         //echo  $books ; 
         echo 'Source Country from XML file = '.$books['source'] . '  ------  Source Country from Textbox = '. trim(ucfirst($_REQUEST['s'])) ; 
         echo '<hr>';
         echo 'Destination Country from XML file =  '.$books['destination'] . '  ------  Destination Country from Textbox = '. trim(ucfirst($_REQUEST['d'])) ; 
         exit();
      } 
   }
}

processXML($xml); 
```

网站网址：[http ://realwebit.com/jquerymap/jquerymap.php](http://realwebit.com/jquerymap/jquerymap.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T12:15:29.293

该问题似乎与 onmouseover 上的数据请求有关。如果光标移动得太快，onmouseover 会同时向服务器触发多个请求！这适用于本地主机，因为没有延迟，但不是！您应该为 firefox 安装 firebug 并查看对服务器的请求。

如果您不想在每次需要缓存时都加载 xml：将客户端的 price_by_countries.php 响应保存在一个数组中，使用源和目标作为键！

如果有人单击或悬停在某个国家/地区上，请不要立即调用 jquery ajax 函数。如果您已经请求数据并返回它，请先检查数组！如果不做ajax请求。如果成功将数据存储在数组中！

卢西安

# python-2.7 - 如何在 PyQt4 中将 QDockWidget 添加到 QFrame

> ID：14795786
> 
> 赞同：2
> 
> 时间：2013-02-10T07:47:58.850
> 
> 标签：python-2.7, pyqt4, qdockwidget, dockable

`QDockWidget`我该如何添加`QFrame`？因为QFrame没有`addDockWidget`！！！

```
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import sys

app = QApplication( sys.argv )

qmainwin = QFrame()
#qmainwin.setWindowFlags(Qt.FramelessWindowHint)
s = QWidget()
vboxlayout = QVBoxLayout( )

spin1 = QSpinBox()
vboxlayout.addWidget( spin1 )

spin2 = QSpinBox()
vboxlayout.addWidget( spin2 )
s.setLayout( vboxlayout )

qdock = QDockWidget( )
qdock.setWindowFlags(Qt.FramelessWindowHint)
qdock.setWidget( s )
qmainwin.addDockWidget( Qt.TopDockWidgetArea, qdock )
qmainwin.show()

app.exec_() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-22T20:25:00.313

这个怎么样？我添加`QDockWidget`到 an`QLayout`然后设置`QFrame`.

```
import sys
from PyQt4 import QtGui, QtCore

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()

        self.initUI()

    def initUI(self):

        frame = QtGui.QFrame()
        frame.setFrameStyle(QtGui.QFrame.Panel |
                QtGui.QFrame.Plain)

        label = QtGui.QLabel('This is random text')

        dockWidget = QtGui.QDockWidget('Main', self)
        # set the widget to non-movable, non-floatable and non-closable
        dockWidget.setFeatures(dockWidget.NoDockWidgetFeatures)
        dockWidget.setWidget(label)

        # add the QDockWidget to the QLayout
        hbox = QtGui.QHBoxLayout()
        hbox.addWidget(dockWidget)

        # set the layout of the QFrame
        frame.setLayout(hbox)

        # create another QLayout to add QFrame
        vbox = QtGui.QVBoxLayout()
        vbox.addStretch(1)
        vbox.addWidget(frame)

        self.setLayout(vbox)

        self.setGeometry(300, 300, 500, 400)
        self.setWindowTitle('Test')

def main():

    app = QtGui.QApplication(sys.argv)
    ex = Example()
    ex.show()
    sys.exit(app.exec_())

if __name__ == '__main__':
    main() 
```

# android - Activity 恢复时 Android SoundBoard 崩溃

> ID：14795790
> 
> 赞同：0
> 
> 时间：2013-02-10T07:49:00.857
> 
> 标签：android, crash, media-player

嗨，我为我的一个名为 Aussie Bloke 的角色制作了一个音板——音板包含 30 个按钮和 30 个媒体播放器。我最初对所有按钮都使用了一个媒体播放器，但最终在大约 20 次随机按下后声音会停止播放。所以我决定为我使用的原始音板模板中使用的每个声音使用单独的媒体播放器对象。这工作得很好，你可以整天按下按钮并让声音正常工作..但我遇到的问题是，当活动被发送到后台并在几秒钟后再次恢复时，当你按下按钮时应用程序崩溃..我尝试创建一个 onResume 方法来准备所有玩家，但这只是让应用程序从一开始就崩溃..

```
package com.zammacat.aussiebloke1;

import java.io.IOException;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class AUSSIEBLOKE1 extends Activity {

private static final String BASE64_PUBLIC_KEY = "key here";

    MediaPlayer beer1;
    MediaPlayer beer2; 
    MediaPlayer beer3; 
    MediaPlayer beauty; 
    MediaPlayer boner; 
    MediaPlayer death; 
    MediaPlayer dingo; 
    MediaPlayer dogupya; 
    MediaPlayer donotpress; 
    MediaPlayer enough; 
    MediaPlayer heaven; 
    MediaPlayer help; 
    MediaPlayer hungry; 
    MediaPlayer kebab; 
    MediaPlayer kids; 
    MediaPlayer knees; 
    MediaPlayer later; 
    MediaPlayer meatpie; 
    MediaPlayer medal; 
    MediaPlayer oath; 
    MediaPlayer poem; 
    MediaPlayer politics; 
    MediaPlayer pub; 
    MediaPlayer sex; 
    MediaPlayer sport; 
    MediaPlayer strewth; 
    MediaPlayer tango; 
    MediaPlayer v8; 
    MediaPlayer what; 
    MediaPlayer yoursister; 

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_aussiebloke1);

     beer1 = MediaPlayer.create(this, R.raw.beer1);
     beer2 = MediaPlayer.create(this, R.raw.beer2);
     beer3 = MediaPlayer.create(this, R.raw.beer3);
     beauty = MediaPlayer.create(this, R.raw.beauty);
     boner = MediaPlayer.create(this, R.raw.boner);
     death = MediaPlayer.create(this, R.raw.death);
     dingo = MediaPlayer.create(this, R.raw.dingo);
     dogupya = MediaPlayer.create(this, R.raw.dogupya);
     donotpress = MediaPlayer.create(this, R.raw.donotpress);
     enough = MediaPlayer.create(this, R.raw.enough);
     heaven = MediaPlayer.create(this, R.raw.heaven);
     help = MediaPlayer.create(this, R.raw.help);
     hungry = MediaPlayer.create(this, R.raw.hungry);
     kebab = MediaPlayer.create(this, R.raw.kebab);
     kids = MediaPlayer.create(this, R.raw.kids);
     knees = MediaPlayer.create(this, R.raw.knees);
     later = MediaPlayer.create(this, R.raw.later);
     meatpie = MediaPlayer.create(this, R.raw.meatpie);
     medal = MediaPlayer.create(this, R.raw.medal);
     oath = MediaPlayer.create(this, R.raw.oath);
     poem = MediaPlayer.create(this, R.raw.poem);
     politics = MediaPlayer.create(this, R.raw.politics);
     pub = MediaPlayer.create(this, R.raw.pub);
     sex = MediaPlayer.create(this, R.raw.sex);
     sport = MediaPlayer.create(this, R.raw.sport);
     strewth = MediaPlayer.create(this, R.raw.strewth);
     tango = MediaPlayer.create(this, R.raw.tango);
     v8 = MediaPlayer.create(this, R.raw.v8);
     what = MediaPlayer.create(this, R.raw.what);
     yoursister = MediaPlayer.create(this, R.raw.yoursister); 

   Button b01 = (Button) findViewById(R.id.beer1);
   b01.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                beer1.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            beer1.start();              
            }
    });

   Button b02 = (Button) findViewById(R.id.beer2);
   b02.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                beer2.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            beer2.start();              
            }
    });

   Button b03 = (Button) findViewById(R.id.beer3);
   b03.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                beer3.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            beer3.start();              
            }
    });

   Button b04 = (Button) findViewById(R.id.beauty);
   b04.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                beauty.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            beauty.start();             
            }
    });

   Button b05 = (Button) findViewById(R.id.boner);
   b05.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                boner.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            boner.start();              
            }
    });

   Button b06 = (Button) findViewById(R.id.death);
   b06.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                death.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            death.start();              
            }
    });

   Button b07 = (Button) findViewById(R.id.dingo);
   b07.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                dingo.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            dingo.start();              
            }
    });

   Button b08 = (Button) findViewById(R.id.dogupya);
   b08.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                dogupya.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            dogupya.start();                
            }
    });

   Button b09 = (Button) findViewById(R.id.donotpress);
   b09.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                donotpress.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            donotpress.start();             
            }
    });

   Button b10 = (Button) findViewById(R.id.enough);
   b10.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                enough.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            enough.start();             
            }
    });

   Button b11 = (Button) findViewById(R.id.heaven);
   b11.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                heaven.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            heaven.start();             
            }
    });

   Button b12 = (Button) findViewById(R.id.help);
   b12.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                help.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            help.start();               
            }
    });

   Button b13 = (Button) findViewById(R.id.hungry);
   b13.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                hungry.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            hungry.start();             
            }
    });

   Button b14 = (Button) findViewById(R.id.kebab);
   b14.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                kebab.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            kebab.start();              
            }
    });

   Button b15 = (Button) findViewById(R.id.kids);
   b15.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                kids.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            kids.start();               
            }
    });

   Button b16 = (Button) findViewById(R.id.knees);
   b16.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                knees.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            knees.start();              
            }
    });

   Button b17 = (Button) findViewById(R.id.later);
   b17.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                later.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            later.start();              
            }
    });

   Button b18 = (Button) findViewById(R.id.meatpie);
   b18.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                meatpie.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            meatpie.start();                
            }
    });

   Button b19 = (Button) findViewById(R.id.medal);
   b19.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                medal.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            medal.start();              
            }
    });

   Button b20 = (Button) findViewById(R.id.oath);
   b20.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                oath.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            oath.start();               
            }
    });

   Button b21 = (Button) findViewById(R.id.poem);
   b21.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                poem.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            poem.start();               
            }
    });

   Button b22 = (Button) findViewById(R.id.politics);
   b22.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                politics.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            politics.start();               
            }
    });

   Button b23 = (Button) findViewById(R.id.pub);
   b23.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                pub.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            pub.start();                
            }
    });

   Button b24 = (Button) findViewById(R.id.sex);
   b24.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                sex.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            sex.start();                
            }
    });

   Button b25 = (Button) findViewById(R.id.sport);
   b25.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                sport.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            sport.start();              
            }
    });

   Button b26 = (Button) findViewById(R.id.strewth);
   b26.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                strewth.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            strewth.start();                
            }
    });

   Button b27 = (Button) findViewById(R.id.tango);
   b27.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                tango.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            tango.start();              
            }
    });

   Button b28 = (Button) findViewById(R.id.v8);
   b28.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                v8.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            v8.start();             
            }
    });

   Button b29 = (Button) findViewById(R.id.what);
   b29.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                what.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            what.start();               
            }
    });

   Button b30 = (Button) findViewById(R.id.yoursister);
   b30.setOnClickListener(new OnClickListener(){
       public void onClick(View v){
           try {
                yoursister.prepare();
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            yoursister.start();             
            }
    });

}

protected void onStop() {

     super.onStop();
     beer1.release();
     beer2.release(); 
     beer3.release(); 
     beauty.release(); 
     boner.release(); 
     death.release(); 
     dingo.release(); 
     dogupya.release(); 
     donotpress.release(); 
     enough.release(); 
     heaven.release(); 
     help.release(); 
     hungry.release(); 
     kebab.release(); 
     kids.release(); 
     knees.release(); 
     later.release(); 
     meatpie.release(); 
     medal.release(); 
     oath.release(); 
     poem.release(); 
     politics.release(); 
     pub.release(); 
     sex.release(); 
     sport.release(); 
     strewth.release(); 
     tango.release(); 
     v8.release(); 
     what.release(); 
     yoursister.release(); 

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:32:06.120

您需要`onResume()`在您的活动中实现方法并在那里重新创建您的媒体播放器对象：

```
public void onResume()  {
  super.onResume();

 // ...

 beer1 = MediaPlayer.create(this, R.raw.beer1);
 beer2 = MediaPlayer.create(this, R.raw.beer2);
 beer3 = MediaPlayer.create(this, R.raw.beer3);

 // ...
} 
```

您可以在此处阅读有关活动生命周期的更多信息：http: [//developer.android.com/training/basics/activity-lifecycle/index.html](http://developer.android.com/training/basics/activity-lifecycle/index.html)

# java - 如何在 google-maps 上从用户位置到用户选择的 itemoverlay 进行路线/导航？

> ID：14795793
> 
> 赞同：0
> 
> 时间：2013-02-10T07:50:03.933
> 
> 标签：java, android, google-maps, routes, overlay

我很困惑，如何进行操作以从用户位置到用户选择/点击 pin 覆盖的 pin 覆盖（谷歌位置）进行路线/导航。这是我的地图活动，将显示我的地图。

```
public class PlacesMapActivity extends MapActivity {
// Nearest places
PlacesList nearPlaces;

// Map view
MapView mapView;

// Map overlay items
List<Overlay> mapOverlays;

AddItemizedOverlay itemizedOverlay;

GeoPoint geoPoint;
// Map controllers
MapController mc;

double latitude;
double longitude;
OverlayItem overlayitem;

private Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.map_places);

    // Getting intent data
    Intent i = getIntent();

    // Users current geo location
    String user_latitude = i.getStringExtra("user_latitude");
    String user_longitude = i.getStringExtra("user_longitude");

    // Nearplaces list
    nearPlaces = (PlacesList) i.getSerializableExtra("near_places");

    mapView = (MapView) findViewById(R.id.mapView);
    mapView.setBuiltInZoomControls(true);

    mapOverlays = mapView.getOverlays();

    // Geopoint to place on map
    geoPoint = new GeoPoint((int) (Double.parseDouble(user_latitude) * 1E6),
            (int) (Double.parseDouble(user_longitude) * 1E6));

    // Drawable marker icon
    Drawable drawable_user = this.getResources()
            .getDrawable(R.drawable.mark_red);

    itemizedOverlay = new AddItemizedOverlay(drawable_user, this);

    // Map overlay item
    overlayitem = new OverlayItem(geoPoint, "Your Location",
            "That is you!");

    itemizedOverlay.addOverlay(overlayitem);

    mapOverlays.add(itemizedOverlay);
    itemizedOverlay.populateNow();

    // Drawable marker icon
    Drawable drawable = this.getResources()
            .getDrawable(R.drawable.mark_blue);

    itemizedOverlay = new AddItemizedOverlay(drawable, this);

    mc = mapView.getController();       

    // These values are used to get map boundary area
    // The area where you can see all the markers on screen
    int minLat = Integer.MAX_VALUE;
    int minLong = Integer.MAX_VALUE;
    int maxLat = Integer.MIN_VALUE;
    int maxLong = Integer.MIN_VALUE;

    // check for null in case it is null
    if (nearPlaces.results != null) {
        // loop through all the places
        for (Place place : nearPlaces.results) {
            latitude = place.geometry.location.lat; // latitude
            longitude = place.geometry.location.lng; // longitude

            // Geopoint to place on map
            geoPoint = new GeoPoint((int) (latitude * 1E6),
                    (int) (longitude * 1E6));

            // Map overlay item
            overlayitem = new OverlayItem(geoPoint, place.name,
                    place.vicinity);

            itemizedOverlay.addOverlay(overlayitem);

            // calculating map boundary area
            minLat  = (int) Math.min( geoPoint.getLatitudeE6(), minLat );
            minLong = (int) Math.min( geoPoint.getLongitudeE6(), minLong);
            maxLat  = (int) Math.max( geoPoint.getLatitudeE6(), maxLat );
            maxLong = (int) Math.max( geoPoint.getLongitudeE6(), maxLong );
        }
        mapOverlays.add(itemizedOverlay);

        // showing all overlay items
        itemizedOverlay.populateNow();
    }

    // Adjusting the zoom level so that you can see all the markers on map
    mapView.getController().zoomToSpan(Math.abs( minLat - maxLat ), Math.abs( minLong - maxLong ));

    // Showing the center of the map
    mc.animateTo(new GeoPoint((maxLat + minLat)/2, (maxLong + minLong)/2 ));
    mapView.postInvalidate();
}

@Override
protected boolean isRouteDisplayed() {
    return false;
} 
```

}

这是我在地图上显示图钉的 itemoverlay。

```
public class AddItemizedOverlay extends ItemizedOverlay<OverlayItem> {

   private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

   private Context context;

   public AddItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
   }

   public AddItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
   }

   @Override
   public boolean onTouchEvent(MotionEvent event, MapView mapView)
   {   

       if (event.getAction() == 1) {
           GeoPoint geopoint = mapView.getProjection().fromPixels(
               (int) event.getX(),
               (int) event.getY());
           // latitude
           double lat = geopoint.getLatitudeE6() / 1E6;
           // longitude
           double lon = geopoint.getLongitudeE6() / 1E6;
           //Toast.makeText(context, "Lat: " + lat + ", Lon: "+lon, Toast.LENGTH_SHORT).show();
       }
       return false;
   } 

   @Override
   protected OverlayItem createItem(int i) {
      return mapOverlays.get(i);
   }

   @Override
   public int size() {
      return mapOverlays.size();
   }

   @Override
   protected boolean onTap(int index) {
     OverlayItem item = mapOverlays.get(index);
     AlertDialog.Builder dialog = new AlertDialog.Builder(this.context);
     dialog.setTitle(item.getTitle());
     dialog.setMessage(item.getSnippet());
     dialog.setPositiveButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        }
    });
     dialog.show();
     return true;
   }

   public void addOverlay(OverlayItem overlay) {
      mapOverlays.add(overlay);
   }

   public void populateNow(){
       this.populate();
   }

} 
```

请给我你的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T07:55:08.533

使用“mapController”类的函数 animateTo(your_desired_point)。在 onTap() 的 AddItemizedOverlay 类中使​​用它。

# scala - 为什么 SIGAR 随机返回 NaN 或零

> ID：14795798
> 
> 赞同：2
> 
> 时间：2013-02-10T07:50:59.287
> 
> 标签：scala, nan, sigar

尝试快速运行[SIGAR](http://www.hyperic.com/products/sigar)以获得许多硬件指标样本，我看到了这种行为：

```
val sig: Sigar = new Sigar()
val steady_cpu: Double = (for (i <- 1 to 100) yield sig.getCpuPerc().getUser()).sum / 100.0 
```

其中 stable_cpu 结果为 NaN。查看生成的列表，NaN 来自 getUser() 调用返回 NaN

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:50:59.287

一般问题似乎是 SIGAR 调用可能是有状态的，并且太快地调用函数不会给 SIGAR 时间来重建它的内部状态。我猜他们正在计算 CPU 周期或类似的东西，这通常是一门近似科学，如果你调用函数太快，内部库最终会被零除。解决方法是在调用之间添加一个短暂的睡眠：

```
val sig: Sigar = new Sigar()
val steady_cpu: Double = (for (i <- 1 to 100) yield {
  Thread.sleep(10); 
  sig.getCpuPerc().getUser()
}).sum / 100.0 
```

# input - 在 webshaper 中修改 Controls.Input 宽度

> ID：14795803
> 
> 赞同：2
> 
> 时间：2013-02-10T07:51:31.577
> 
> 标签：input, controls, websharper

我尝试通过使用 Enhance.WithCssClass 来修改 Websharper 中的 Controls.Input 大小，但未成功。css 中的最大长度应用于整个控件，而不是输入标记。

如何将不同的长度应用于不同的 Controls.Input 控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:15:39.100

CSS 类确实适用于容器。要使用 设置实际输入`Enhance.WithCssClass "myClass"`的样式，您需要将样式应用于`input`内部`myClass`：

```
.myClass input {
    width: 300px;
} 
```

# php - 使用 CTRL 键 PHP 多次上传

> ID：14795805
> 
> 赞同：0
> 
> 时间：2013-02-10T07:51:54.620
> 
> 标签：php, html

你能为我的代码提供帮助吗，我需要进行多次上传，但我不能，所以请你帮助我。我需要这么糟糕。

```
here's my code 
```

我多次上传表格，但它不起作用。输出是“错误数组”//HTML

```
<html>
<head>
    <form name="Image" enctype="multipart/form-data" action="upload.php" method="POST">
        <h1><font face="tahoma"> UPLOAD FILES</h1>
        <label for="file">Filename:</label>
        <input type="file" name="Photo[]"  accept="image/*" multiple="multiple"/><br/><br/>
        <input type="hidden" id="pageName" name="pageName">
            <script type="text/javascript">
                //get page name from parent

                var value = window.opener.pageName
                document.getElementById("pageName").value = value;
            </script>

        <INPUT type="submit" class="button" name="Submit" value=" Upload ">
        <INPUT type="reset" class="button" value="Cancel"><br/><br/>
    </form>
</head>
</html>

//PHP this is were upload is do.

<?php

include('global.php');
?>

<?

$uploadDir = 'directory/'; //Image Upload Folder

if(isset($_POST['Submit']))
    {

    $fileName = $_FILES['Photo']['name'][0];
     $fileName1 = $_FILES['Photo']['name'][1];
    $tmpName = $_FILES['Photo']['tmp_name'];
    $fileSize = $_FILES['Photo']['size'];
    $fileType = $_FILES['Photo']['type'];
    $filePath = $uploadDir . $fileName . $fileName1;

    //upload error
    if ($_FILES["Photo"]["error"] > 0)
  {
  echo "Error: " . $_FILES["Photo"]["error"] . "<br />";
  }
    //photo already exixts

else    
//insert image into DB
{

  move_uploaded_file($tmpName, $filePath);

  $filePath = addslashes($filePath);
        $filePath = stripslashes($filePath);
        $filePath = mysql_real_escape_string($filePath);

   $query = "INSERT INTO images (image , category ) VALUES ('$filePath', '$pageName')";
    mysql_query($query) or die('Error, query failed');
    echo" Upload Successful. <br/> <br/>";
            echo "Stored in: " . "directory/" . $_FILES["Photo"]["name"];
?>
  <br/><br/>
                    <img width="300" height="400" src="directory /<?=$_FILES["Photo"]["name"]?>"><br/>
<?
}
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:22:41.803

`Error: Array`告诉您返回的错误实际上是一个 Array 对象，而不是字符串。如果要查看实际的错误消息，则需要查看数组的全部内容。像这样`print_r($_FILES["Photo"]["error"]);`或循环遍历数组的东西

```
foreach($_FILES["Photo"]["error"] as $err) {
    echo "error: " . $err . "<br>";
} 
```

或者您可以打印返回的第一个错误，就像您返回名称数组中的第一个文件一样`echo $_FILES["Photo"]["error"][0];`

# python - 如何检测用户在 5 秒内处于非活动状态以分配会话密钥？

> ID：14795806
> 
> 赞同：0
> 
> 时间：2013-02-10T07:52:29.093
> 
> 标签：python, django

我正在尝试为网页实现以下场景。如果用户在 5 秒内处于非活动状态，则注销该用户。我有 request.session['islogin']，我想在用户处于非活动状态 5 秒后将此会话密钥重新设置为 False。我曾尝试使用装饰器，但在编写了一些代码之后，我还没有弄清楚接下来应该写什么，以便我的代码能够检测到非活动用户。因此，我有一个问题“如何检测用户处于非活动状态 5 秒以便将会话密钥 isLogin 分配给 False ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:55:29.017

您可以为此制作中间件

**中间件.py**

```
from datetime import datetime, timedelta
from django.conf import settings
from django.contrib import auth

class AutoLogout:
  def process_request(self, request):
    if not request.user.is_authenticated() :
      #Can't log out if not logged in
      return

    try:
      if datetime.now() - request.session['last_touch'] > timedelta( 0, settings.AUTO_LOGOUT_DELAY * 60, 0):
        auth.logout(request)
        del request.session['last_touch']
        return
    except KeyError:
      pass

    request.session['last_touch'] = datetime.now() 
```

在您的设置中，将其添加到您的中间件类中：

```
MIDDLEWARE_CLASSES = [
    .................
    'app_name.middleware.AutoLogout',
]

and this:

# Auto logout delay in minutes
AUTO_LOGOUT_DELAY = 60 #this is equivalent for 1 hour 
```

# python - 大型文本数据库：转换为 SQL 或按原样使用

> ID：14795810
> 
> 赞同：2
> 
> 时间：2013-02-10T07:53:23.740
> 
> 标签：python, sql, database, text

我的 python 项目涉及一个外部提供的数据库：大约 100K 行的文本文件。

该文件将每天更新。

我应该将它加载到 SQL 数据库中，并`diff`每天处理吗？或者有没有一种有效的方法来“查询”这个文本文件？

附加信息：

*   每个“条目”或行包含三个字段 - 其中任何一个都可以用作索引。
*   更新是整个数据库的形式 - 我必须手动生成一个差异
*   查询只是查找记录并显示文本。
*   查询数据库将是应用程序的一项基本任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:04:50.273

多久查询一次数据？在一个极端情况下，如果每天一次，您可能会比维护数据库或索引更有效地使用顺序搜索。

对于更多查询和每日更新，您可以构建和维护自己的索引以实现更高效的查询。最有可能的是，使用 SQL 数据库（或其他数据库，取决于您的需要）以换取更简单和更可维护的代码，在速度上的牺牲可以忽略不计（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:45:19.903

我之前所做的是从数据库提取创建的 txt 文件创建 SQLite 数据库，每天一个 SQLite 数据库。

可以跨 SQLite db 查询以检查值等并创建其他数据表。

我添加了一个额外的数据列，即文本行的 SHA1，以便我可以轻松识别不同的行。

它在我的情况下有效，希望可以为您提供最简单的想法。

# php - MySQL PHP Escape String '\' - 为什么它没有用反斜杠保存在数据库中？

> ID：14795811
> 
> 赞同：7
> 
> 时间：2013-02-10T07:53:30.073
> 
> 标签：php, mysql, escaping, backslash

对转义字符串及其在数据库中的存储方式感到困惑

在我的 MySQL 调用中，我用反斜杠转义了一个字符串：

```
UPDATE `TABLE` SET `PERSONAL_BELONGINGS` = 'Tom\'s things' 
```

但是当我查看 phpadmin - 值是这样保存的：

```
|Tom's things| 
```

为什么反斜杠没有保存到数据库中？当我将此值读入 javascript 然后尝试传递它时，这会导致问题 - 我的 javascript 字符串将终止。这就是为什么我一开始就逃脱了这个角色。

**为什么 MySQL 在将“\”反斜杠保存到数据库之前会删除它？**

**如果不使用 '\' 将其保存在数据库中 - 当您将其作为字符串传递回 javascript 时，最好的处理方法是什么？当作为字符串传递给javascript时再次转义它？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T08:01:55.477

首先让我说你真的不应该在数据库中以任何特定的转义格式存储数据，如果你以后需要以另一种格式提取它或稍后出于某种原因搜索数据，你会后悔的。您现在保存的格式看起来不错，在将数据传递给实际 Javascript 时，最好在代码中为 Javascript 添加反斜杠。

现在这就是为什么它目前表现得像现在这样；

在 string`'Tom\'s things'`中，`\'`是一个[字符转义序列](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html#character-escape-sequences)，实际上只是用来让 MySQL 了解如何解析 SQL 字符串，它从不按原样保存到数据库中。

您在开始显示的 SQL 语句中转义字符的原因`'`是，否则 MySQL 无法知道字符串不会在`'Tom`.

如果您使用 MySQLi 或 PDO 准备语句而不是自己构建 SQL 语句，MySQL 将允许您保存完全不变的值，而无需转义任何内容。这绝对是首选选项，因为不支持预准备语句的 MySQL API 无论如何都已弃用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T08:00:48.787

反斜杠被视为“[转义字符](http://en.wikipedia.org/wiki/Escape_character)”。如果没有反斜杠，您的字符串将以结尾，`Tom`但其余的`s things`将导致语法错误。

`\`告诉 MySQL 不要将转义的`'`字符串视为字符串分隔符，而是继续执行直到`'`找到下一个未转义的字符串。

此转义字符仅用于查询目的，不被视为您要更新的字符串的一部分。

就像 Alvin 在评论中建议的那样，如果您想在数据库中保留反斜杠，您必须通过添加另一个转义反斜杠来添加它，即`\\`. 这将使您的查询看起来像：

```
UPDATE `TABLE` SET `PERSONAL_BELONGINGS` = 'Tom\\\'s things' 
```

数据库中的数据如下所示：

```
|Tom\'s things| 
```

[您可以在MySQL 手册](http://dev.mysql.com/doc/refman/5.5/en/string-literals.html)中阅读有关字符串文字和转义特殊字符的更多信息

不过值得注意的是，将已经转义的字符串存储在数据库中是一种不好的做法。您应该注意转义代码中的特殊字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T08:04:32.850

因为，在 MySQL 中，反斜杠是转义字符（就像在 PHP 中一样）。您必须转义反斜杠本身才能存储它——因此，`\\`将存储一个反斜杠。`\\\'`将存储一个反斜杠后跟一个引号，因为第一个反斜杠转义第二个，第三个转义引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T08:12:13.373

> 当我将此值读入 javascript 时，这会导致问题

*这* 当然**不是**。
然后你把钱锁在保险箱里，如果被盗了，你可以责怪保险箱制造商。
但是一旦你拿回你的钱并且它被盗了 - 你仍然不能为此责怪保险箱。
现在是**你**的责任。

因此，如果您需要为 javascript 转义数据 - 只需将其转义即可。
但当然不是使用**mysql** _escape_string()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-03T07:26:43.733

尝试使用这个：

```
 Function EscapeBack(ByVal msData As Object) As String
        Return (Replace(msData, "\", "\\"))
    End Function 
```

使用这个：

`EscapeQuote(filename.Text)`

# algorithm - iTunes中的颜色识别？

> ID：14795814
> 
> 赞同：3
> 
> 时间：2013-02-10T07:54:48.923
> 
> 标签：algorithm, colors

当在 iTunes 中选择专辑视图并单击封面时，iTunes 会展开与封面匹配的彩色条带。有趣的是，还选择了字体颜色和高亮颜色来与封面很好地匹配。我正在研究一种做同样的算法，但没有想出一个很好的解决方案来自动找到图像中的主色。我最好的解决方案是分别取 r、g 和 b 的中值。有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:02:30.183

[最近有一篇关于使用 k-means 聚类在图像中寻找主色](http://charlesleifer.com/blog/using-python-and-k-means-to-find-the-dominant-colors-in-images/)的优秀博客文章。我不确定它将如何适用于您的情况，但这可能是一个很好的起点。

希望这可以帮助！

# php - 检查用户名可用性 php

> ID：14795815
> 
> 赞同：1
> 
> 时间：2013-02-10T07:54:55.263
> 
> 标签：php, mysql

```
<?php
$con = mysqli_connect('localhost','root','[mypassword]','dbhwsource');

if(isset($_GET['username'])){
$username = $con->real_escape_string($_GET['username']);
$test = $con->query("SELECT username FROM users WHERE username='$username'");
if($test!=false) die("usererror");
}

if(isset($_GET['email'])){
$email = $con->real_escape_string($_GET['email']);
$test = $con->query("select * from users where email='$email'");
if($test!=false) die("emailerror");
}

$con->close();
echo "ok";
?> 
```

所以我只是想检查用户名/电子邮件是否可用，但无论输入用户名是什么，我得到的都是“usererror”！我很沮丧，到处搜索示例代码，代码看起来没有任何问题。我究竟做错了什么？

**编辑：**

```
$test = $test->fetch_assoc();
if(!empty($test)) die("usererror"); 
```

这行得通！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:01:06.507

由于您的查询返回 true，因此该行将`if($test!=false) die("usererror");`被执行，应该类似于

```
$test = $con->query("SELECT username FROM users WHERE username='$username'");
$row_cnt = $test->num_rows;
if( $row_cnt > 0 ) { 
  //you already have user with this name, do something 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:00:17.477

`$con->query`如果*查询成功*，则返回*结果对象*。这并没有说明找到多少行或查询是否匹配任何内容，它只是意味着查询成功执行。因此你的测试*总是*成功的；只有在数据库错误的情况下才会失败。*`$test!=false`*

 **执行查询 as `SELECT COUNT(*) FROM ...`，然后获取结果的第一行并查看计数是否为`> 0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T08:03:12.203

我最近为一个 android 应用程序做了类似的事情。你真的应该看看[这个网站](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)。它极大地帮助了我。这是一个为应用程序提供 PHP API 的详细示例。具体登录。

具体来说，这里是 PHP 页面的一个片段

```
/*
 * Check user is existed or not
 */
public function isUserExisted($email) {
    $result = mysql_query("SELECT email from users WHERE email = '$email'");
    $no_of_rows = mysql_num_rows($result);
    if ($no_of_rows > 0) {
        // user existed
        return true;
    } else {
        // user not existed
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T20:22:16.657

这对我有用：

```
$test = $test->fetch_assoc();
if(!empty($test)) die("usererror"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-10T08:05:03.530

您的代码确实不安全，没有经过优化，任何人都可以在您的代码中使用 sql 注入登录。

并且您的代码是正确的，因为您正在检查 thar (test != false) 这意味着它是正确的，这就是您的代码 og usererror 正在执行的原因

这里有一些提示，始终使用这种风格进行安全和优化

> 对 $email 做同样的事情
> 
> 第三次运行查询后不检查是真还是假，但在查询后再次检查

```
if($test->username === $_GET['username']) { do something } 
```

> 在谷歌上检查 sql injections 为什么我这样做**

# python - 尝试设置 Django 时出现 ImproperlyConfigured("settings.DATABASES 配置不正确。") 错误

> ID：14795824
> 
> 赞同：8
> 
> 时间：2013-02-10T07:57:20.503
> 
> 标签：python, sql, django, heroku, celery

尝试按照[此处](https://devcenter.heroku.com/articles/django)的说明在 Heroku 上设置 Django 实例。

就安装 Celery 而言，到以下步骤：

```
$ python manage.py syncdb 
```

当我收到以下错误时：

> raise ImproperlyConfigured("settings.DATABASES 配置不正确。"django.core.exceptions.ImproperlyConfigured: settings.DATABASES 配置不正确。请提供 ENGINE 值。查看设置文档以获取更多详细信息。

我相信我的`settings.py`文件在正确的位置`(project-name/project-name)`，并且我正在运行 django 1.4.3，但是当我尝试运行时`manage.py diffsettings`，我得到以下输出：

> BROKER_BACKEND = 'django' ### DATABASES = {'default': {'ENGINE': 'django.db.backends.dummy', 'TEST_MIRROR': None, 'NAME': '', 'TEST_CHARSET': None, ' TIME_ZONE'：'UTC'，'TEST_COLLATION'：无，'PORT'：''，'HOST'：''，'USER'：''，'TEST_NAME'：无，'PASSWORD'：''，'OPTIONS' ：{}}}

绝对不知道`django.db.backends.dummy`条目来自哪里，我的`settings.py`has `'ENGINE': 'django.db.backends.postgresql_psycopg2'`，我认为这是正确的条目，即使 Heroku 说明没有告诉您在任何时候更新它。

有什么想法我需要在这里编辑吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T23:58:47.887

我遇到了同样的问题。在[https://devcenter.heroku.com/articles/django#prerequisites](https://devcenter.heroku.com/articles/django#prerequisites)的 Heroku 文档中，它说要添加以下内容`settings.py`：

```
DATABASES['default'] =  dj_database_url.config() 
```

你可以传入一个参数：

```
DATABASES['default'] =  dj_database_url.config(default='postgres://user:pass@localhost/dbname') 
```

这将使您能够在本地和 Heroku 上进行开发。实际上解决我遇到的问题的部分是 DATABASE_URL 的 Heroku 配置环境变量实际上没有设置。为了设置这个，我跑了

```
$ heroku config 
```

我看到分配给单独配置变量的数据库 URL。所以我创建了一个新变量：

```
$ heroko config:add DATABASE_URL={#the database url} 
```

这解决了我的问题。我希望它可以帮助其他有类似问题的人。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T08:05:03.817

尝试在 settings.py 中的 DATABASE 设置之后添加这些行

```
# Your Database setting. 
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.',  # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '',  # Or path to database file if using sqlite3.
        'USER': '',  # Not used with sqlite3.
        'PASSWORD': '',  # Not used with sqlite3.
        'HOST': '',  # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',  # Set to empty string for default. Not used with sqlite3.
    }
}
# Add these two lines.
import dj_database_url
DATABASES['default'] = dj_database_url.config(default='sqlite://db/sqlite3.db') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-08T13:12:42.587

非常感谢 Chatri，因为您建议添加 default='sqlite://db/sqlite3.db' 解决了这个问题。

# c++ - Opencv矩阵乘法

> ID：14795825
> 
> 赞同：2
> 
> 时间：2013-02-10T07:57:35.340
> 
> 标签：c++, opencv, matrix-multiplication

我需要将矩阵及其转置相乘，但出现以下错误：

“OpenCV 错误：断言失败 (type == B.type() && (type == CV_32FC1 || type == CV_64FC1 || type == CV_32FC2 || type == CV_64FC2)) 在未知函数中，文件.. .. ..\src\opencv\modules\core\src\matmul.cpp，第 711 行"

这是代码：

```
int dA[] = {
     1,     2,     3,
     4,     5,     6,
     6,     5,     4,
    }; 
Mat A = Mat(3,3, CV_32S, dA );
Mat C = A.t()* A; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T08:13:37.027

OpenCV 仅支持浮点实数或复数类型矩阵的矩阵乘法。

您正在创建有符号整数类型的矩阵。

支持的类型有：

```
CV_32FC1 //real float
CV_32FC2 //complex float
CV_64FC1 //real double
CV_64FC2 //complex double 
```

以下类似的代码将起作用：

```
float dA[] = {
     1,     2,     3,
     4,     5,     6,
     6,     5,     4,
    }; 
Mat A = Mat(3,3, CV_32F, dA );
Mat C = A.t()* A; 
```

# ruby-on-rails-3 - 设计和 Rspec：即使在确认后，用户也需要在请求规范中激活帐户

> ID：14795829
> 
> 赞同：0
> 
> 时间：2013-02-10T07:58:35.157
> 
> 标签：ruby-on-rails-3, devise, capybara, rspec2

我的请求规范中有以下代码：

```
describe 'Poll' do
    subject { page }

    context 'as system admin' do
        let(:user) { Fabricate(:system_admin) }
            before { login user}

        it 'is accessible' do
            visit '/admin/poll'
            current_path.should == '/admin/poll'
        end

        describe 'sending poll' do

            it 'sends to all users' do
                save_and_open_page
            end
        end
    end
end 
```

即使该方法似乎工作正常，登录用户似乎也不起作用。我尝试`login user`在`it 'is accessible' do`块内使用，如果我这样做，规范工作正常。如果我将它从那里移除并放在上面的`before`块中。用户没有保持登录状态。我输入了一个`save_and_open_page`进行调试，并在页面中收到此通知：

```
Your account was not activated yet. If a reset password link was sent to you, use that link to change your password. 
```

我正在使用 Devise、RSpec、Capybara 和 Rails 3。我还在`confirm!`我的 Fabrication 文件中设置了用户。下面是它的外观：

```
Fabricator(:system_admin) do
    first_name { sequence(:first_name) { |n| "Person#{n}"} }
    last_name { sequence(:last_name) {|n| "#{n}" } }
    email { sequence(:email) { |n| "person_#{n}@example.com"} }
    password "foobar"
    password_confirmation "foobar"
    company_name { sequence(:company_name) { |n| "google#{n}" } }
    role "system_admin"

    after_create do |user|
        user.confirm!
      user.create_company
    end
end 
```

**问题：**可能是什么问题？为什么用户没有保持登录状态，为什么我会收到提示我应该激活我的帐户的消息？还`user.confirm!`不够吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T00:11:08.333

添加此设计方法：

```
confirmed_at { Time.now } 
```

因此，您的 after_create 方法应如下所示：

```
 after_create do |user|
      user.confirm!
      user.confirmed_at { Time.now }
      user.create_company
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T21:09:16.400

因此，如果您调试您的 save_and_open_page 并且它告诉您该帐户未激活，那么您的制造似乎无法正常工作。您是否尝试过调试？

你的 save_and_open_page 做什么？它是否试图利用用户做某事？因为我在用 let 定义时经历过，如果没有触及变量（在这种情况下是用户），那么它在该上下文中不存在。除了。当你在它上面运行这样的规范时，错误是什么“可以访问”？只是说没有用户登录？

所以你可以存根你的登录方法（例如，如果你有一个名为 current_user 的方法，它可以为你提供登录用户或其他东西），或者不使用 let，启动如下：

用户 = 制造（：system_admin）

但是，这里有很多好的建议：

[http://betterspecs.org/](http://betterspecs.org/)

似乎您的块上下文和描述太复杂了。我也没有 100% 遵循这个指导方针，但我认为我应该，你也会从中受益。

如果您发现它不起作用的另一个原因，请告诉我！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T21:23:11.190

这可能是问题吗？

制造（：system_admin）！=制造商（：system_admin）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T22:45:07.240

我认为`before(:each)`应该解决问题

# c++ - 无法编译mysql源

> ID：14795832
> 
> 赞同：0
> 
> 时间：2013-02-10T07:59:07.767
> 
> 标签：c++, mysql

我正在尝试编译 mysql 客户端库源

```
source paclage\client\mysql.cc 
```

我同时使用了 gcc 和 g++

```
g++ -o mysql.cc mysql.cc 
```

所以每当我编译它总是给出错误

```
In file included from mysql.cc:33:0:
client_priv.h:20:23: fatal error: my_global.h: No such file or directory
compilation terminated. 
```

虽然 my_global.h 已经存在，但我将它移到了 mysql.cc 的根文件夹，但同样的错误，我用它做了所有的事情，但是找不到库的同样错误，我复制了 my_global.h 的代码并将其粘贴到 client_priv.h之后，当我编译它时说缺少其他库，这些库在 client_priv.h 中列出......所以帮助它相当混乱

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:07:37.703

您应该遵循[官方指南](http://dev.mysql.com/doc/refman/5.1/en/source-installation.html)

运行 gcc 是不够的，因为需要设置很多环境设置，例如 LIB 路径、包含路径等。

他们正在使用 CMake 为您准备构建。

更新：

如果要编译将使用 mysql 客户端库的程序，请遵循本[指南](http://dev.mysql.com/doc/refman/5.1/en/building-clients.html)。

# pdf - 没有尺寸规格的pdf2svg

> ID：14795833
> 
> 赞同：2
> 
> 时间：2013-02-10T07:59:26.893
> 
> 标签：pdf, svg

我想在`pdf2svg`没有自动添加的`width`and`height`规范的情况下将 pdf 转换为 svg（目的是使其符合[此处](https://stackoverflow.com/questions/6145867)提到的内容的容器）。我在 pdf2svg 上找不到任何选项来执行此操作。最现实可靠的方法是什么？如果需要编写脚本，我会使用 jQuery 和/或 Ruby。

# sql - 在水晶报表的查询中添加`'`

> ID：14795834
> 
> 赞同：0
> 
> 时间：2013-02-10T07:59:30.037
> 
> 标签：sql, crystal-reports

我正在构建一个水晶报表查询，我想添加`'`一个查询，我该怎么做？

```
WHERE "Table"."Id" = {?ParamID} 
```

我想包围`{?ParamID}`。`'`

# asp.net - 文本框上的一些客户端验证消失并被 jQuery17205969379292482464="55" 取代

> ID：14795837
> 
> 赞同：1
> 
> 时间：2013-02-10T07:59:40.407
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, bundling-and-minification

我发布的 asp.net MVC4 解决方案有一个奇怪的问题。到目前为止，关于验证的一切都很顺利。然后只有在我发布的 IISTEST 服务器上出现问题（通过 VS2012 在本地没有问题，即使是“不调试就开始”，所以捆绑包是活动的）。

怎么了？我注意到两三件事，但让我们谈谈第一件事。

我对不同的文本框、选项进行了一些客户端验证……其中一个在我发布的服务器上不再管理验证。要检查这一点，我导航到页面，按 F12，单击文本框并复制 html。

这是本地版本（通过VS2012运行）：

```
<input name="EmergencyReason" class="input-validation-error" id="EmergencyReason" type="text" data-val="true" hideRow="true" data-val-requiredifloadingtoday="Le champ {0} n'est pas valide." value=""/> 
```

如您所见，有一些验证。

这是发布的版本：

```
<input name="EmergencyReason" id="EmergencyReason" type="text" jQuery17205969379292482464="55" hiderow="true"/> 
```

不再验证。但是我的一些文本框有验证，有些没有。

我注意到每次我有一个验证不再起作用的文本框时，我都有这个：jQuery17205969379292482464 代替 input-validation-error ... 我捆绑了这个脚本和 css 解决方案。也许它可以帮助你理解。

任何想法？我半天以来一直在处理这个问题，因此非常感谢任何帮助。

谢谢。

更新 - - - - - - - - - - - -

在本地进行一些测试并操作 F12 /“浏览器模式”>> IE7 后，我发现 jQuery17205969379292482464 出现在本地和服务器上，因此这与我的问题无关。可以肯定的一件事：一些基本的客户端验证，如 [Required] 属性有效。不再工作的验证如下：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class RequiredIfLoadingTodayAttribute : ValidationAttribute, IClientValidatable
{        
    public RequiredIfLoadingTodayAttribute() { }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        ///////////////
        // IsLoading //
        ///////////////
        var propertyIsLoadingInfo = validationContext.ObjectType.GetProperty("IsLoading");
        var propertyIsLoadingValue = propertyIsLoadingInfo.GetValue(validationContext.ObjectInstance, null);

        //////////
        // Date //
        //////////
        var propertyDateInfo = validationContext.ObjectType.GetProperty("Date");
        var propertyDateValue = propertyDateInfo.GetValue(validationContext.ObjectInstance, null);

        ////////////////
        // Validation //
        ////////////////
        Boolean isLoading = Convert.ToBoolean(propertyIsLoadingValue);
        DateTime dateLoading = Convert.ToDateTime(propertyDateValue);
        DateTime dateToday = Convert.ToDateTime(DateTime.Now.ToString("dd/MM/yyyy"));

        // Validation uniquement pour le chargement
        if (isLoading)
        {
            // Si la date de chargement = date du jour et on a pas de raison indiquée -> déclencher une erreur de validation
            if ((DateTime.Compare(dateLoading, dateToday)==0) && (value==null))
            {
                return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
            }
        }
        return ValidationResult.Success;
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule {
            ErrorMessage = this.ErrorMessageString,
            ValidationType = "requiredifloadingtoday"
        };
        yield return rule;
    }
} 
```

以及相关的js文件：

```
$.validator.unobtrusive.adapters.add(
    'requiredifloadingtoday', '', function (options) {
        options.rules['requiredifloadingtoday'] = options.params;
        options.message['requiredifloadingtoday'] = options.message;
    });
$.validator.addMethod('requiredifloadingtoday', function (value, element, params) {
    // Cette validation côté client n'est utilisée que sur le tab chargement
    // pour s'assurer qu'une raison est indiquée dans le cas ou la date
    // de chargement est le jour même.
    return (($Date.val() == DateToday) && (value != ''))
}, ''); 
```

和视图模型：

```
 [RequiredIfLoadingToday()]
    public string EmergencyReason { get; set; } 
```

和观点：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/Loading/When.js")"></script>

<span class="editor-field">   
     @Html.TextBoxFor(m => m.EmergencyReason, Model.Date != DateTime.Today ? new {hideRow="true"} : null)
 </span> 
 ... 
```

我不知道这个“更高级”的验证问题出在哪里。阿贾克斯问题？

# crystal-reports - 水晶报表日期范围报表

> ID：14795838
> 
> 赞同：0
> 
> 时间：2013-02-10T07:59:51.987
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-xi, crystal-reports-8.5

我正在使用 Crystal Reports，我有这样的输出（按天分组）：

（这个输出计算是从每天00:00到23:59..）

```
 Date (dd/mm/yyyy)     Weight
   -----------------------------------------
    01-01-2013            4000
    02-01-2013            3000
    03-01-2013            6000
    04-01-2013            5000 
```

我怎样才能按时间范围（例如 01-01-2013 6:00AM 到 04-01-2013 6:00AM）来实现，并且输出仍然是每天：（我假设当天的一半 + 第二天的一半）

```
 Date (dd/mm/yyyy)     Weight
   -----------------------------------------
    01-01-2013            3500 ( =half of 01-01-2013 and 02-01-2013)
    02-01-2013            4500 ( =half of 02-01-2013 and 03-01-2013)
    03-01-2013            5500 ( =half of 03-01-2013 and 04-01-2013)
    04-01-2013            2500 ( =half of 04-01-2013 and so on..) 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:06:47.043

您需要检查时间是在中午 12:00 之前还是之后。如果是 11:59:59 或更少，则将其添加到前一天。之后的任何事情，今天。使用类似的东西创建一个公式

```
 IF TIME({yourdatetime}) <= TIME(11,59,59) THEN
       DATE({yourdatetime}) - 1
    ELSE 
       DATE({yourdatetime}) 
```

然后按公式分组并将组标题格式化为日期。

# php - 无法使用 jquery 应用截断段落

> ID：14795842
> 
> 赞同：-1
> 
> 时间：2013-02-10T08:00:16.830
> 
> 标签：php, javascript, jquery

我为截断段落编写了一个小的 jquery 函数。但这对我不起作用。即它没有为我显示“显示更多”或“显示更少”的链接。

请帮我解决我的问题。

如果我的段落很简单/手动，我的代码就可以完美运行。但是，如果我显示通过富文本编辑器添加的段落，其中包含一些粗体字，para 等然后是一个面部问题。（即它没有为我显示“显示更多”或“显示更少”的链接。）

例如。

**如果我的 para 是**（没有任何`<b>,<p>`）**

```
<p class="descpara">  
Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem      </p> 
```

`<b>..</b> ,<p>..</p>`如果我包含（ ）则不起作用

```
 <p class="descpara">  
<b>Lorem Ipsum </b>is simply <p> dummy text of the printing and typesetting industry.</p> Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem 
       </p> 
```

我的jQuery函数

```
jQuery(function()
        { 
        var minimized_elements = $('p.descpara');

         var desc_minimized_elements = $('p.descpara');
        minimized_elements.each(function()
        {    
             var t = $(this).text();        
             if(t.length < 300) return;

             $(this).html(
                 t.slice(0,300)+'<span>... </span><a href="#" class="more">More details</a>'+
                 '<span style="display:none;">'+ t.slice(300,t.length)+' <a href="#" class="less">Less details</a></span>'
             );

         });  
         $('a.more', minimized_elements).click(function(event){
             event.preventDefault();
             $(this).hide("fast").prev().hide("slow");
             $(this).next().show("fast");        
         });

         $('a.less', minimized_elements).click(function(event){
             event.preventDefault();
             $(this).parent().hide().prev().show().prev().show();    
         }); 
       }); 
```

在我的 view.php 页面中

```
 <div class="products">
         <div id="bookcont">
           <?php echo"<div id='btitle'>$row->book_title</div></br>";  
               echo "<p>by $row->auth_firstname   $row->auth_lastname</p>"; ?> 
             <div class="detail"> 

             <!--  A long text paragraph, i am apply for this -->
              <p class="descpara">  
                   <?php echo $row->description?>
               </p> 
         </div> 
       </div> 
```

应用代码后的当前输出如下： ![在此处输入图像描述](../Images/466465481d90963cbbdd8605c446f599.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:15:54.717

问题是你有`<p>`一个`<p>`

解决方案：使用`<div>`代替`<p>`容器，见这里：http: [//jsfiddle.net/tbE8V/1/](http://jsfiddle.net/tbE8V/1/)

另请注意，如果您想保留提取容器所需的富文本，而`html`不是`text`

```
var minimized_elements = $('div.descpara');  // <--- note div not p  (change in html as well)

     var desc_minimized_elements = $('div.descpara');
    minimized_elements.each(function()
    {    
         var t = $(this).html();    // <--- note taken html not text 
```

另外-您的解决方案可能存在富文本问题（！！！），即。如果 300 个字符的限制可能在 `<b>`and之间结束`</b>`，或者甚至在元素名称的中间（例如，在“ `<small>`”的中间）

* * *

编辑：

为了处理富文本问题，我建议您的 javascript 应该检查容器元素的高度，而不是字符串中的字符数。如果它超过所需的高度，则应用一个“隐藏溢出”css 类，该类将具有最大高度和溢出：隐藏，并添加“更多”链接。单击“更多”只会从容器中删除“隐藏内容”类并将链接更改为“更少”。

# c# - Newtonsoft 如何将一些值转换为 json？

> ID：14795846
> 
> 赞同：0
> 
> 时间：2013-02-10T08:00:43.967
> 
> 标签：c#, json

我有代码返回“Datatable”、“Datatable”内容 idstudent、avg、firstname、namecourse 和 date，这个“Datatable”内容更多。

```
 DataTable row = mn.selectProgram("programStudent", attributes);
                JsonTrans responce = new JsonTrans();
                responce.Convert(row);
                 //if (row.Rows.Count != 0)
            //{
            //    foreach (DataRow result in row.Rows)
            //    {
            //        string idstudent = result["id"].ToString();

            //        string avgstudent = result["AVG"].ToString();
            //        string firstname = result["fname"].ToString();
            //        string date = result["date"].ToString();
            //        string namecourse = result["name"].ToString();

            //    }

            //} 
```

我尝试：

```
public string Convert(DataTable row)
        {
            StringBuilder sb = new StringBuilder();
            StringWriter sw = new StringWriter(sb);
            JsonWriter jsonWriter = new JsonTextWriter(sw);
            jsonWriter.Formatting = Formatting.Indented;
            jsonWriter.WriteStartArray();
            if (row.Rows.Count != 0)
            {
                foreach (DataRow result in row.Rows)
                {
                    jsonWriter.WriteStartObject();
                    string idstudent = result["id"].ToString();
                    jsonWriter.WritePropertyName("id");
                    jsonWriter.WriteValue(idstudent);
                    jsonWriter.WriteEndObject();
                }

            }
            jsonWriter.WriteEndArray();
            jsonWriter.Close();
            sw.Close(); 
```

如何将此行转换为 json，例如：

```
 [ {idstudent:"value" ,avg :"value" , avg : "value",firstname :"value"}
      {idstudent:"value" ,avg :"value" , avg : "value",firstname :"value"}   
      {idstudent:"value" ,avg :"value" , avg : "value",firstname :"value"}  ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:40:19.693

看起来您的代码非常接近您要完成的工作。如果您希望 DataRows 中存在每一列，则您的 foreach 循环应遍历表的所有列。（请注意，为了清楚起见，我已将您的*DataTable*名称更改为**table**，并将*DataRow*名称更改为**row**。）

```
 foreach (DataRow row in table.Rows)
            {
                jsonWriter.WriteStartObject();
                foreach (DataColumn col in table.Columns)
                {
                    jsonWriter.WritePropertyName(col.ColumnName);
                    jsonWriter.WriteValue((row[col.ColumnName] == null) ? string.Empty : row[col.ColumnName].ToString());
                }
                jsonWriter.WriteEndObject();
            } 
```

请注意，此示例将写出源数据为空的空字符串。如果您想完全保留空值，请在写入属性名称和值之前执行 (row[col.ColumnName] == null) 的检查。

# jquery - jquery ui 主题不适用于我的模板 css

> ID：14795851
> 
> 赞同：0
> 
> 时间：2013-02-10T08:01:12.610
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

每当我包含我的模板 css 时，jquery ui 对话框主题就会受到影响。

这是我的模板css：

```
 *   {
        margin: 0;
        padding: 0;
        }
    html, body  {
        height: 100%;
        }
    body    {
        background: #fff;
        color: #393939;
        font-family: Arial;
        font-size: 0px;
        line-height: 0;
        }
    #page-top-outer {
        background: url(../images/top_bg.jpg) top center repeat-x;
        /*border-bottom: 1px solid #7e7e7e;*/
        height: 92px;
        }
    #page-top   {
        margin: 0 auto;
        max-width: 1260px;
        min-width: 850px;
        position: relative;
        }
    #logo   {
        float: left;
        margin: 45px 0 0 15px;
        }
    #logo   a   {
        display: block;
        }

    #content-outer  {
        background: url(../images/content_repeat.jpg) repeat-x;
        }
    #content    {
        color: #333;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 12px;
        line-height: 18px;
        margin: 0 auto 0 auto;
        max-width: 1260px;
        min-width: 780px;
        padding: 35px 0px 30px 0px;
        }

    /*************** Notifications ***************/
    .notification {
        position: relative;
        margin:15px  0 0;
        padding: 0;
        border: 1px solid;
        background-position: 10px 11px !important;
        background-repeat: no-repeat !important;
        font-size: 13px;
        margin-bottom:10px;
        -moz-border-radius: 6px;
        -webkit-border-radius: 6px;
        border-radius: 6px;
    }

    .attention {
        background: #fffbcc url('../images/icons/exclamation.png') 10px 11px no-repeat;
        border-color: #e6db55;
        color: #666452;
    }

    .information {
        background: #dbe3ff url('../images/icons/information.png');
        border-color: #a2b4ee;
        color: #585b66;
    }

    .success {
        background: #d5ffce url('../images/icons/tick_circle.png');
        border-color: #9adf8f;
        color: #556652;
    }

    .error {
        background: #ffcece url('../images/icons/cross_circle.png');
        border-color: #df8f8f;
        color: #665252;
    }

    .notification div {
        display:block;
        font-style:normal;
        padding: 10px 10px 10px 36px;
        line-height: 1.5em;
    }

    .notification .close {
        color:#990000;
        font-size:9px;
        position:absolute;
        right:5px;
        top:5px;
    }

    /************Table icons ***************/
    a.icon-plus {
        background: url(../images/icons/table_icon_plus.gif) no-repeat;
        display: block;
        height: 24px;
        margin: 0 8px 0 0;
        width: 24px;
        }
    a:hover.icon-plus   {
        background: url(../images/icons/table_icon_plus.gif) 0 -24px;
        }

    a.icon-edit {
        background: url(../images/icons/table_icon_edit.gif) no-repeat;
        display: block;
        float: left;
        height: 24px;
        margin: 0 8px 0 0;
        width: 24px;
        }
    a:hover.icon-edit   {
        background: url(../images/icons/table_icon_edit.gif) 0 -24px;
        }
    a.icon-delete   {
        background: url(../images/icons/table_icon_delete.gif) no-repeat;
        display: block;
        float: left;
        height: 24px;
        margin: 0 8px 0 0;
        width: 24px;
        }
    a:hover.icon-delete {
        background: url(../images/icons/table_icon_delete.gif) 0 -24px;
        }
    a.icon-tick {
        background: url(../images/icons/table_icon_tick.gif) no-repeat;
        display: block;
        float: left;
        height: 24px;
        width: 24px;
        }
    a:hover.icon-tick   {
        background: url(../images/icons/table_icon_tick.gif) 0 -24px;
        }

    /******* Tooltip ******************/
    #tooltip    {
        background-color: #8c8c8c;
        border: 1px solid #767676;
        color: #fff;
        font-family: Arial;
        font-size: 10px;
        font-weight: normal;
        opacity: 0.85;
        padding: 0 5px;
        position: absolute;
        text-align: left;
        z-index: 3000;
        }
    #tooltip h6, #tooltip div   {
        font-family: Arial;
        font-size: 11px;
        line-height: 20px;
        margin: 0;
        }

    /**********Table CSS************/

    /*  ACTIONS BOX ----------------------------------------------- */  
    #actions-box    {
        float: left;
        margin: 0px;
        position: relative;
        }
    a.action-slider {
        background: url(../images/dropdown_actions.gif) no-repeat;
        display: block;
        height: 30px;
        width: 110px;
        }
    a.action-slider.activated   {
        background: url(../images/dropdown_actions.gif) no-repeat 0 -30px;
        display: block;
        height: 30px;
        width: 110px;
        }
    #actions-box-slider {
        background: url(../images/actions_slider_bg.gif) bottom no-repeat;
        display: none;
        left: 0;
        padding-bottom: 1px;
        padding-top: 10px;
        position: absolute;
        top: 24px;
        width: 110px;
        }
    #actions-box-slider-inner   {
        font-size: 0px;
        line-height: 0;
        margin: 0 auto;
        width: 108px;
        }
    a.action-delete {
        color: #272727;
        display: block;
        font-weight: bold;
        height: 20px;
        margin: 0 auto;
        padding: 10px 0 5px 45px;
        width: 63px;
        }
    a.action-delete {
        background: #c7c7c7 url(../images/action_delete.gif) no-repeat 14px 5px;
        }
    a:hover.action-delete   {
        background: #949494 url(../images/action_delete.gif) no-repeat 14px 5px;
        color: #fff;
        }

    /********* Pagination **************/

    .pagination {
        float:right;
    }
    .page a,.current,.first a,.previous a,.next a,.last a{
        display: inline-block;
        margin-right: 10px;
        text-decoration: none;
        color: #717171;
        font: bold 11px Arial, sans-serif;
        text-shadow: 0px 1px white;
        padding: 5px 8px;

        -webkit-border-radius: 3px;
        -moz-border-radius: 3px;
        border-radius: 3px;

        -webkit-box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.35);
        -moz-box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.35);
        box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.35);
        background: #f9f9f9;

        background: -webkit-linear-gradient(top, #f9f9f9 0%, #e8e8e8 100%);
        background: -moz-linear-gradient(top, #f9f9f9 0%, #e8e8e8 100%);
        background: -o-linear-gradient(top, #f9f9f9 0%, #e8e8e8 100%);
        background: -ms-linear-gradient(top, #f9f9f9 0%, #e8e8e8 100%);
        background: linear-gradient(top, #f9f9f9 0%, #e8e8e8 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f9f9f9', endColorstr='#e8e8e8',GradientType=0 );
    }

    .current{
        color: white;
        text-shadow: 0px 1px #3f789f;

        -webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.8);
        -moz-box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.8);
        box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.8);
        background: #aeadad;

        background: -webkit-linear-gradient(top, #aeadad 0%, #a4a6a7 100%);
        background: -moz-linear-gradient(top, #aeadad 0%, #a4a6a7 100%);
        background: -o-linear-gradient(top, #aeadad 0%, #a4a6a7 100%);
        background: -ms-linear-gradient(top, #aeadad 0%, #a4a6a7 100%);
        background: linear-gradient(top, #8aeadad 0%, #a4a6a7 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#aeadad', endColorstr='#a4a6a7',GradientType=0 );
    }

    .page a:hover,.page a:hover,.current a:hover,.first a:hover,.previous a:hover,.next a:hover,.last a:hover{
        -webkit-box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.55);
        -moz-box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.55);
        box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.55);
        background: #fff;

        background: -webkit-linear-gradient(top, #fff 0%, #e8e8e8 100%);
        background: -moz-linear-gradient(top, #fff 0%, #e8e8e8 100%);
        background: -o-linear-gradient(top, #fff 0%, #e8e8e8 100%);
        background: -ms-linear-gradient(top, #fff 0%, #e8e8e8 100%);
        background: linear-gradient(top, #fff 0%, #e8e8e8 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fff', endColorstr='#e8e8e8',GradientType=0 );
    }

    .current a:hover {
        -webkit-box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.9);
        -moz-box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.9);
        box-shadow: 0px 1px 2px 0px rgba(0,0,0,0.9);
        background: #99cefc;

        background: -webkit-linear-gradient(top, #99cefc 0%, #57a1d8 100%);
        background: -moz-linear-gradient(top, #99cefc 0%, #57a1d8 100%);
        background: -o-linear-gradient(top, #99cefc 0%, #57a1d8 100%);
        background: -ms-linear-gradient(top, #99cefc 0%, #57a1d8 100%);
        background: linear-gradient(top, #99cefc 0%, #57a1d8 100%);
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#99cefc', endColorstr='#57a1d8',GradientType=0 );
    }

    /*******Custom form********/
    .form_errors ul {list-style-type: none; padding-left: 0; margin-left: 0;color: #d11111;}
    .form_errors ul li {
        background: url("../images/icons/error_circle.png") no-repeat scroll 0 0 transparent ;
        color: #f85507;
        padding-bottom: 2px;
        padding-left: 20px;
    }

    form.custom label.form_label { display: block; margin-bottom:5px; font-size: 12px; }

    form.custom label.inline_label { display: inline;margin-right:12px; font-size: 12px }

    form.custom label.form_element_error {
        margin-left: 4px;
        background: url("../images/icons/error_circle.png") no-repeat scroll 0 0 transparent ;
        color: #f85507;
        padding-bottom: 2px;
        padding-left: 20px;
    }

    form.custom input.text-input,form.custom textarea {
        padding: 6px;
        font-size: 13px;
        background: #fff url('../images/bg-form-field.gif') top left repeat-x;
        border: 1px solid #d5d5d5;
        color: #333;
        border-radius: 4px 4px 4px 4px !important;
    }

    form.custom input[type="checkbox"],form.custom input[type="radio"] {
        padding: 0;
        background: none;
        border: 0;
    }

    form.custom input.text-input:focus, form.custom textarea:focus {
        box-shadow: 0 0 5px rgba(204,204,204, 1);
        -webkit-box-shadow: 0 0 5px rgba(204,204,204, 1);
        -moz-box-shadow: 0 0 5px rgba(204,204,204, 1);
        border:1px solid rgba(204,204,204, 0.8);
    }
    form.custom input[type="submit"] {
    -moz-box-shadow:inset 0px 1px 0px 0px #ffffff;
        -webkit-box-shadow:inset 0px 1px 0px 0px #ffffff;
        box-shadow:inset 0px 1px 0px 0px #ffffff;
        background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #f9f9f9), color-stop(1, #e9e9e9) );
        background:-moz-linear-gradient( center top, #f9f9f9 5%, #e9e9e9 100% );
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#f9f9f9', endColorstr='#e9e9e9');
        background-color:#f9f9f9;
        -moz-border-radius:6px;
        -webkit-border-radius:6px;
        border-radius:6px;
        border:1px solid #dcdcdc;
        display:inline-block;
        color:#666666;
        font-family:arial;
        font-size:15px;
        font-weight:bold;
        padding:6px 24px;
        text-decoration:none;
        text-shadow:1px 1px 0px #ffffff;
        cursor:pointer;
    }
    form.custom input[type="submit"]:hover {
        background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #e9e9e9), color-stop(1, #f9f9f9) );
        background:-moz-linear-gradient( center top, #e9e9e9 5%, #f9f9f9 100% );
        filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#e9e9e9', endColorstr='#f9f9f9');
        background-color:#e9e9e9;
    }
    form.custom input[type="submit"]:active {
        position:relative;
        top:1px;
    }

    /*********Step wise css*********/
    #step-holder {
    font-family: Tahoma;
        height:39px;
        margin-bottom: 20px;
    }   

    .step-no {
        float:left;
        height:29px;
        width:18px;
        font-size: 18px;
        line-height: 18px;
        padding:10px 0 0 0;
        text-align: center;
    }

    .step-no-off {
        float:left;
        height:29px;
        width:18px;
        font-size: 18px;
        line-height: 18px;
        padding:10px 0 0 0;
        text-align: center;
        color:#cbcbcb;
    }

    .step-dark-left {
        float:left;
        background: url(../images/step_dark_left.gif) no-repeat;
        height:27px;
        padding:13px 15px 0 25px;
        font-size: 13px;
        color:#fff;
        font-weight: bold;
    }

    .step-dark-left a{

        font-size: 13px;
        color:#fff;
        font-weight: bold;
    }

    .step-dark-right {
        float:left;
        width:12px;
        background: url(../images/step_dark_right.gif) no-repeat;
        height:39px;
    }
    .step-dark-round {
        float:left;
        width:8px;
        height:39px;
        background: url(../images/step_dark_round.gif) no-repeat;
    }

    .step-light-left {
        float:left;
        height:27px;
        padding:13px 15px 0 25px;
        font-size: 13px;
        background: url(../images/step_light_left.gif) no-repeat;
        height:39px;
        color:#cbcbcb;
        font-weight: bold;
    }

    .step-light-left a{
        font-size: 13px;
        color:#cbcbcb;
        font-weight: bold;
    }
    .step-light-right {
        float:left;
        width:12px;
        background: url(../images/step_light_right.gif) no-repeat;
        height:39px;
    }
    .step-light-round {
        float:left;
        width:8px;
        height:39px;
        background: url(../images/step_light_round.gif) no-repeat;
    }

    /* FOOTER -------------------------------------------------------------- */
    #footer {
    height: 70px;

        margin: 80px auto 0px auto;
        padding: 0px 0 0 0;
        text-align: left;
        min-width: 780px;
        max-width: 1260px;
        }
    #footer-left    {
        color: #818181;
        font-size: 11px;
        line-height: 11px;
        padding: 15px 0 15px 25px;
        margin: 0 20px;
        border-top: 1px solid #dbdbdb;
        border-bottom: 1px solid #dbdbdb;
        } 
    #footer-left a  {
        color: #818181;
        text-decoration: none;
        }
    #footer-left     a.selected,
    #footer-left     a:hover    {
        color: #000;
        text-decoration: none;
        }

    /*******Content box **********/
    .content-box {
                    border: 1px solid #ccc;
                    margin: 0 0 20px 0;
                    background: #fff;
                    }
    .filter-box.closed-box {
        width:90px;
        float:right;
    }

    .content-box-header {
                    background: #e5e5e5 url('../images/bg-content-box.gif') top left repeat-x;
                    margin-top: 1px;
                    height: 40px;
    }

    .content-box-header h3 {
                    padding: 12px 15px 10px;
                    float: left;
                    }
    .content-box-tabs{
    width:450px;
    float:right;
    display:block;
    padding:12px 15px 0 0;
    margin-top:-4px;
    text-align:right;
    }
    .content-box-tabs span{
    cursor:pointer;

    }
    .content-box-tabs a{
    cursor:pointer;

    }
    ul.content-box-tabs {
                    float: right;
                    padding: 12px 15px 0 0 !important;
                    margin: 0 !important;

                    }

    ul.content-box-tabs li {
                    float: left;
                    margin: 0;

                    background-image: none !important;
                    padding: 8px 10px !important;
                    cursor:pointer;
                    }

    ul.content-box-tabs li a {
                    color: #333;

                    display: block;
                    margin: 1px;
                    border-bottom: 0;
                    }

    ul.content-box-tabs li:hover,a:hover {
                    color: #57a000;
                    }              

    ul.content-box-tabs li a.current {
                    background: #fff;
                    border: 1px solid #ccc;
                    border-bottom: 0;
                    margin: 0;
                    }

    .content-box-content {
                    /*padding: 20px 0;*/
                    font-size: 13px;
                    border-top: 1px solid #ccc;
                    overflow:auto;

                    }

    .content-box,.content-box-header,ul.content-box-tabs li a.current,.shortcut-button,.notification {
                    -moz-border-radius: 6px;
                    -webkit-border-radius: 6px;
                    border-radius: 6px;
                    }

    .content-box-header {
                    -moz-border-radius-bottomleft: 0;
                    -moz-border-radius-bottomright: 0;
                    -webkit-border-bottom-left-radius: 0;
                    -webkit-border-bottom-right-radius: 0;
                    border-bottom-left-radius: 0;
                    border-bottom-right-radius: 0;
                    }

    .closed-box .content-box-header {
                    -moz-border-radius-bottomleft: 6px;
                    -moz-border-radius-bottomright: 6px;
                    -webkit-border-bottom-left-radius: 6px;
                    -webkit-border-bottom-right-radius: 6px;
                    border-bottom-left-radius: 6px;
                    border-bottom-right-radius: 6px;
                    }

    ul.content-box-tabs li a.current {
                    -moz-border-radius-bottomleft: 0;
                    -moz-border-radius-bottomright: 0;
                    -webkit-border-bottom-left-radius: 0;
                    -webkit-border-bottom-right-radius: 0;
                    border-bottom-left-radius: 0;
                    border-bottom-right-radius: 0;
                    }

    /************ Table ************/

    #content table {
                    width: 100%;
                    border-collapse: collapse;
                    }

    #content table thead th {
                    font-weight: bold;
                    font-size: 15px;
                    border-bottom: 1px solid #ddd;
                    }

    #content tbody {
                    border-bottom: 1px solid #ddd;
                    }

    #content tbody tr {
                    background: #fff;
                    }

    #content tbody tr.alt-row {
                    background: #f3f3f3;
                    }

    #content table td,
    #content table th {
                    padding: 10px;
                    line-height: 1.3em;
                    text-align:left;
                    }        

    #content table tfoot td .bulk-actions {
                    padding: 15px 0 5px 0;
                    } 

    /* GENERAL --------------------------------------------------------*/ 
    .fr {
        float: right;
        }
    a   {
        outline: none;
        text-decoration: none;
        }
    a:hover {
        }
    .clear  {
        clear: both;
        font-size: 0px;
        height: 0;
        line-height: 0px;
        margin: 0px;
        padding: 0px;
        }
    img {
        border: 0;
        }
    p   {
        margin: 0px;
        padding: 0px;
        }
    form    {
        margin: 0;
        padding: 0;
        }
    .line   {
        border-top: 1px solid #dcdada;
        font-size: 0px;
        height: 1px;
        line-height: 0px;
        margin: 20px 0;
        padding: 0;
        }
    .font11 {
        font-size: 11px;
        } 
```

这是 jsfiddle 链接[jsfiddle](http://jsfiddle.net/h89Az/)

我不是一个设计师。我认为某些 css 规则覆盖了 jquery ui css 规则。有人能弄清楚吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:09:47.497

改变

```
body    {
  background: #fff;
  color: #393939;
  font-family: Arial;
  font-size: 0px;
  line-height: 0;
} 
```

到：

```
body    {
  background: #fff;
  color: #393939;
  font-family: Arial;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:10:27.680

检查你的 CSS 层次结构。在这些情况下，CSS 类将覆盖另一个类：

1.  CSS 在前者之后加载，例如：

    一个{颜色：蓝色；} a { 颜色：红色；在这种情况下，颜色将为红色

2.  CSS 选择器更“具体”，例如：

    div a { color: blue } a { color: red } 在这种情况下，div 内的锚标记的颜色将为蓝色，尽管红色类是在之后加载的。

There is another case that you use the "important" keyword (`color: black !important`) - this will override anyway, but I guess you don't use it.

# file - .htaccess 在这种情况下可以帮助我吗？

> ID：14795852
> 
> 赞同：2
> 
> 时间：2013-02-10T08:01:13.667
> 
> 标签：file, .htaccess

如果用户访问 URL，例如： http: [//www.domain.com/image/orange.jpg](http://www.domain.com/image/orange.jpg) 但`orange.jpg`不存在，但 orange.png 存在，.htaccess 可以让用户找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:11:02.403

这应该是可能的。mod_rewrite 允许检查文件是否存在。并且它允许多次重写，以防您不使用`[L]`标志主动停止该过程。.

因此，尝试以这样的方式作为起点（未经测试）：

```
RewriteEngine on

RewriteCond %{REQUEST_URI} ^/image/([^/.]).jpg$
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^/image/([^/.]).jpg /image/$1.png

RewriteCond %{REQUEST_URI} ^/image/([^/.]).png$
RewriteCond %{REQUEST_URI} !-f
RewriteRule - /image/no-found [G,L] 
```

如果在中央服务器配置（每主机配置）中定义，则上述内容适用。对于 .htaccess 样式文件，语法略有不同：在这种情况下，不得出现.htaccess 中的前导斜杠 ( `/`) 。`RewriteRule`如果您可以选择在服务器配置中进行重写。.htaccess 样式文件类似于一种解决方法，而且很容易出错。如果可能，尽量避免它们。

但是请注意，这样的设置有些限制并且维护起来很烦人。通常，设置一个小型包装脚本（可能基于 php）来处理请求并在决定发送什么响应之前检查许多替代方案是一个更好的选择。您可以将请求重写为以下内容：

```
RewriteEngine on
RewriteRule ^/image/([^/.])\..+$ /image.php?name=%1 
```

现在，您可以使用脚本为该请求提供服务，您可以在该脚本`image.php`中轻松检查现有版本的图像，并根据自己的喜好返回标题和内容。

# asp.net - 如何获取用户向其发送请求的朋友的电子邮件 ID？

> ID：14795854
> 
> 赞同：0
> 
> 时间：2013-02-10T08:01:45.293
> 
> 标签：asp.net, facebook, facebook-graph-api

我在我的网站上使用 facebook 发送请求。（就像一个多朋友选择器）

我正在使用 fb 文档中的基本方法作为

```
https://www.facebook.com/dialog/apprequests?app_id=APP_ID&message=Facebook%20Dialogs%20are%20so%20easy!&redirect_uri=http://localhost/mysite/newpage.aspx 
```

它工作并发送请求，我得到了发送到的用户请求的 ID。

现在，我如何获得他们的电子邮件地址？我想存储所有请求发送到的人的 facebook id 和电子邮件地址。

事实上，如果我能获得所有这些 id 的一些基本详细信息，例如电子邮件、名字和姓氏、Facebook 个人资料图片等，那将是非常有帮助的。

我正在使用 asp.net。请尝试回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:45:40.377

这根本不可能——Facebook Graph API 不可能公开朋友的电子邮件地址！（您当然可以在使用“电子邮件”扩展权限进行授权时访问当前用户的电子邮件地址）。

至于其他基本细节 - 是的，名字、姓氏和头像是公开的，只需查询[https://graph.facebook.com/USERID?fields=first_name,last_name,picture](https://graph.facebook.com/USERID?fields=first_name,last_name,picture)。如果你想一次性查询很多不同的人，你应该考虑使用 Batch-Requests。

# c++ - 在 C++ 中查找二维数组的行数和列数

> ID：14795860
> 
> 赞同：9
> 
> 时间：2013-02-10T08:03:10.393
> 
> 标签：c++, sizeof, multidimensional-array

我知道在 C++ 中，您可以通过以下方式获得包含行和列的数组：

```
 int rows = sizeof array / sizeof array[0];
 int cols = sizeof array[0] / sizeof array[0][0]; 
```

但是有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T08:15:23.640

在 C++11 中，您可以使用模板参数推导来做到这一点。似乎已经为此目的存在：[`extent`](http://www.cplusplus.com/reference/type_traits/extent/) `type_trait`

```
#include <type_traits>
// ...
int rows = std::extent<decltype(array), 0>::value;
int cols = std::extent<decltype(array), 1>::value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-02T22:32:51.817

您也可以使用[sizeof()](https://en.cppreference.com/w/cpp/language/sizeof)函数；

```
int rows =  sizeof (animals) / sizeof (animals[0]);
int cols = sizeof (animals[0]) / sizeof (string); 
```

例子：

```
#include <iostream>

using namespace std;

void sizeof_multidim_arrays(){
    string animals[][3] = {
        {"fox", "dog", "cat"},
        {"mouse", "squirrel", "parrot"}
    };
    int rows =  sizeof (animals) / sizeof (animals[0]);
    int cols = sizeof (animals[0]) / sizeof (string);
    for(int i = 0; i < rows; i++){
        for(int j = 0; j < cols; j++){
            cout << animals[i][j] << " " << flush;
        }
        cout << endl;    
    }
} 
```

输出：

```
fox dog cat 
mouse squirrel parrot 
```

# maven - 将通用代码移动到 `subprojects {}` 块中断构建

> ID：14795863
> 
> 赞同：0
> 
> 时间：2013-02-10T08:03:14.980
> 
> 标签：maven, gradle, artifacts, multi-project

我在 Grade 中有一个多项目（多个 java 子项目），我计划将它上传到一个 maven 存储库（当前是一个本地存储库），包括`sources`和`javadoc`工件。我只需将以下代码添加到每个子项目，然后`maven install`完成工作：

```
apply plugin: 'maven'

task sourcesJar(type: Jar, dependsOn:classes) {
        from sourceSets.main.allSource 
        classifier = 'sources' 
} 
task javadocJar(type: Jar, dependsOn:javadoc) {
        from javadoc.destinationDir 
        classifier = 'javadoc' 
}
artifacts { 
        archives jar
        archives sourcesJar 
        archives javadocJar 
} 
```

现在在 10 个子项目中拥有相同的代码并不是很好，所以我决定将这段代码移动到*父*项目的`subprojects { ... }`配置中。但是，现在它不再工作了：只构建空源和 javadoc jar，普通 jar 被忽略，并且不再将文件复制到本地 maven 存储库。如何正确地做到这一点？*`maven install`*

 *谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:33:26.113

父项目的构建脚本在其子项目的构建脚本之前被评估。当您将一些代码提升到父项目的构建脚本时，您必须确保评估顺序保持不变，即提升的代码不会急切地读取仅由子项目的构建脚本设置的属性。例如，如果`javadoc.destinationDir`由子项目的构建脚本设置，您要么必须提升该代码，要么推迟`from javadoc.destinationDir`对父构建脚本中表达式的评估。

有几种延迟评估的技术。一些属性（如归档任务的`from`and `into`）接受闭包；因此你可以简单地做`from { javadoc.destinationDir }`。另一种选择是使用钩子，如`gradle.projectsEvaluated {}`,`project.afterEvaluate {}`或`task.doFirst {}`。决定使用哪种技术的第一步是在[Gradle Build Language Reference](http://gradle.org/docs/current/dsl/index.html)中查找相关属性。

在没有看到更多构建脚本的情况下，我最好的猜测是您的特定问题与不提升`apply plugin: "java"`到父构建脚本的`subprojects {}`块有关。

配置注入的替代方法（例如 via `subprojects {}`）是将通用代码放入单独的构建脚本中，并让项目构建脚本将该代码包含在`apply from:`. 在某些情况下，这比配置注入更容易（有选择地）共享代码。通常，这两种方法一起使用。*

# oracle - 在 Oracle 10g 中发出提交语句时，底层会发生什么？

> ID：14795864
> 
> 赞同：6
> 
> 时间：2013-02-10T08:03:38.427
> 
> 标签：oracle, oracle10g

假设通过事务进行更新，然后发出提交语句。

在提交语句之后，Oracle 服务器内部发生的所有内部流程是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T08:54:24.163

1.  SCN（System Change Number）递增：SCN保证事务的顺序
2.  LGWR (Log Writer) 将剩余的重做日志写入磁盘
3.  LGWR 将 SCN 写入在线重做日志文件
4.  交易从 V$TRANSACTION 中移除
5.  实际会话的锁被释放，从 V$LOCK 中移除
6.  通知其他等待实际会话锁的会话
7.  可能会发生块清除：从交易修改的块的块头中清除与锁相关的信息

# windows-phone-7 - 在 Windows Phone 7.5 中弹出键盘时，滚动被禁用/限制

> ID：14795865
> 
> 赞同：1
> 
> 时间：2013-02-10T08:03:49.877
> 
> 标签：windows-phone-7, xaml, keyboard, silverlight-toolkit, scrollviewer

基于链接[滚动查看器滚动到文本框位置](https://stackoverflow.com/questions/12128365/scrollviewer-to-scroll-to-textbox-position/14794450#14794450)

我尝试在启动键盘时解决滚动问题，但在横向模式下出现问题。

使用问题 (App.Current as App).RootFrame.RenderTransform = new CompositeTransform(); 在横向模式下。

上述解决方案帮助我生成了类似于 Windows Phone 7.5 的默认日历应用程序中的新约会页面的行为。

但是这个 (App.Current as App).RootFrame.RenderTransform = new CompositeTransform(); 不适用于横向页面。

它在纵向模式下按预期工作，但是在改变方向（转动设备）时，页面不会自动转换为横向视图，而是页面看起来类似于纵向视图，其宽度和高度发生了变化。

最初我把它放在 App 类 (App.Current as App).RootFrame.RenderTransform = new CompositeTransform();

它在纵向模式下工作正常。但是在横向模式下，它没有按预期工作。因此，在以方向更改方法分配复合变换之前，我将 (App.Current as App).RootFrame.RenderTransform 恢复为存储在 App 类中的静态变量中的原始值。这使得页面可以正确更改为横向模式。

现在放置(App.Current as App).RootFrame.RenderTransform = new CompositeTransform(); 在文本框焦点方法中，单击文本框时，横向页面会自动变为纵向，其宽度和高度会发生变化，甚至看起来与正确的纵向视图不同。我不知道到底发生了什么。任何帮助都将不胜感激。

任何解决此问题的想法，等待您的宝贵回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T05:39:36.337

在横向模式下，基于横向左或横向右，使用以下代码

if(orientation == PageOrientation.LandscapeLeft) (App.Current as App).RootFrame.RenderTransform = new CompositeTransform() { Rotation = 90, TranslateX = 480 }; else (App.Current as App).RootFrame.RenderTransform = new CompositeTransform() { Rotation = -90, TranslateY = 800 };

这也将为横向模式正确更改您的页面。这将防止页眉在启动键盘时消失。在滚动查看器中滚动到特定文本框需要通过特定文本框的 GotFocus() 事件中的 ScrollToVerticaloffset() 来处理。

# r - 如何删除长格式纵向数据的不完整数据？

> ID：14795873
> 
> 赞同：0
> 
> 时间：2013-02-10T08:05:03.807
> 
> 标签：r

这是一个可重现的测试数据集

```
mydata <- structure(list(subject = c(1, 1, 1, 2, 2, 2, 3, 3, 3), time = c(0, 1, 2, 0, 1, 2, 0, 1, 2), measure = c(10, 12, 8, 7, 0, 0, 5, 3, NA)), .Names = c("subject", "time", "measure"), row.names = 1:9, class = "data.frame")

mydata

subject  time  measure
1          0      10
1          1      12
1          2       8
2          0       7
2          1       0
2          2       0
3          0       5
3          1       3
3          2      NA 
```

我想删除`measure`NA 所在的所有行*以及*相同的所有相应行`subject`。所以在上面的例子中，这将产生：

```
subject  time  measure
1          0      10
1          1      12
1          2       8
2          0       7
2          1       0
2          2       0 
```

有没有一种简单的方法可以做到这一点而无需先重塑为宽格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T10:43:15.277

我不认为这需要`reshaping`甚至`ave`. 如果我正确理解您的问题，这只是一个`subsetting`问题。

```
mydata[!with(mydata, subject %in% subject[is.na(measure)]), ]

#   subject time measure
# 1       1    0      10
# 2       1    1      12
# 3       1    2       8
# 4       2    0       7
# 5       2    1       0
# 6       2    2       0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:24:52.650

你可以使用：

```
mydata[with(mydata, as.logical(ave(measure, subject, FUN=function(x) ifelse(any(is.na(x)), 0, 1)))),]
#   subject time measure
# 1       1    0      10
# 2       1    1      12
# 3       1    2       8
# 4       2    0       7
# 5       2    1       0
# 6       2    2       0 
```

# php - 在没有 Post (PHP) 的数据库中插入整数数据

> ID：14795875
> 
> 赞同：0
> 
> 时间：2013-02-10T08:05:03.973
> 
> 标签：php, database

在编码方面我是初学者，但我想在每次有人注册时自动将这些值添加到数据库中。当我尝试输入代码时，我得到的只是：

```
Parse error: syntax error, unexpected '[' in C:\ -----\ ---\ -------\register.php on line 16 
```

这是代码：

```
$level = 1 ['level'];
$money = 500 ['money'];
$current_health = 100 ['current_health'];
$max_health = 100 ['max_health'];

$query = "INSERT INTO users VALUES ('',
        '".mysql_real_escape_string($level)."',
        '".mysql_real_escape_string($money)."',
        '".mysql_real_escape_string($current_health)."',
        '".mysql_real_escape_string($max_health)."')";

if ($query_run = mysql_query($query))   {
            header ('Location: register_success.php');
        } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:10:45.470

```
1 ['level']; 
```

这种类型的语法在 php 中不可用

删除 [ ] 及其内容

# jquery - 如何在 JQuery UI Dialog 中设置元素的值

> ID：14795879
> 
> 赞同：1
> 
> 时间：2013-02-10T08:06:20.663
> 
> 标签：jquery, ajax, jquery-ui

我目前遇到一个问题，我需要将值传递给 Jquery UI 对话框，但我不知道如何。我到处检查文档，但似乎没有任何效果。这就是我所拥有的（并且已经尝试过）

实际对话：

```
 <div id="amountDialog" title="Add to Basket">
        <table style="text-align: center">
            <tr>
                <td colspan="2">
                    <p id="productAdd"></p> <!-- need to set this value -->
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" id="modalInputAmount" />
                </td>
                <td>
                    <p id="maxAmt">Maximum Amount: </p>
                </td>
            </tr>
        </table>
    </div> 
```

对话框选项：

```
$( "#amountDialog" ).dialog({ 
                        autoOpen: false, 
                        width: 'auto',
                        modal: true,
                        buttons : {
                            "OK" : execute
                        },
                        open : function (event, ui) {
                            $("#productAdd").val('How many [' + item + ']\'s do you wish to add to the basket?"'); <!-- item is the global variable describing which item is added to the basket -->
                        }
                    }); 
```

打开代码

```
 $("#amountDialog" ).dialog("open"); 
```

我不会费心在此处粘贴执行代码，因为我知道这是可行的，我可以从模式对话框中的文本框中获取值。然而，我担心的是，如何`#productAdd`在模式对话框打开时设置段落的值？

只需要再把它放在那里，我还是 JQuery 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T08:08:48.973

应该`html()`不是`val()`，改变：

```
$("#productAdd").val(...) 
```

至

```
$("#productAdd").html(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:26:21.473

你的问题是这`#productAdd`是一个段落（`<p>`）。jQuery 的`val()`方法只适用于表单域。使用`html`或`text`代替。例如`$('#productAdd').text("How many ...")`

附带说明一下，您想重新考虑如何确定`#productAdd`的新内容。您现在拥有的`parent().parent().find('specific thing')`意味着您的脚本将在 HTML 更改后立即中断。

# c++ - 在 main 中声明的数组会引发堆栈溢出，在 main 之外声明的则不会

> ID：14795880
> 
> 赞同：0
> 
> 时间：2013-02-10T08:06:36.557
> 
> 标签：c++

我有以下代码：

```
#include<iostream>
#include<cstdio>
using namespace std;
int main(){
    int pnp[2][105],fin[2][105];
    int time[105],n,m,dummy,prod = 0;
    int const maxvv = 2000000;
    int d[maxvv];
    return 0;
} 
```

我在`int d[maxvv]`. 但是，如果我转移到全局范围

```
#include<iostream>
#include<cstdio>
using namespace std;
int const maxvv = 2000000;
int d[maxvv];
int main(){
    int pnp[2][105],fin[2][105];
    int time[105],n,m,dummy,prod = 0;

    return 0;
} 
```

我没有收到此错误。谁能告诉我有什么区别。在 Windows 7 上使用带有 C++ 的 vs 2008

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T08:08:05.200

你正在破坏堆栈。它的大小通常约为 1MB，而您分配的空间不止于此。移动到全局空间可以解决您的错误，因为那里的可用空间比堆栈中的空间多得多。

# c++ - 打印字符数组的结尾时出现奇怪的结果（`\210`）

> ID：14795882
> 
> 赞同：0
> 
> 时间：2013-02-10T08:07:19.610
> 
> 标签：c++, c, arrays, string, char

我的代码是这样的：

```
int main(int argc, char *argv[])
{
    char ca[] = {'0'};
    cout << *ca << endl;
    cout << *(ca+1) << endl;
    cout << ca[1] << endl;
    cout << (char)(0) << endl;
    return 0;
} 
```

结果是这样的：

```
 0
 \210
 \210
 ^@ 
```

从[这个线程](https://stackoverflow.com/questions/14795565/difference-between-null-terminated-char-0-and)，我知道这和实际上`^@`是一样的`\0`。但是，`\210`似乎不是因为当我使用`hexdump`查看结果时。

```
 bash-3.2$ ./playground | hexdump -C
 00000000  30 0a 88 0a 88 0a 00 0a                           |0.......|
 00000008 
```

可以清楚地看到`\210`是`88`而不是`00`。

据我了解，`ca+1`应该指向 a `null terminator`，即`\0`. 但为什么`cout << *(ca+1) << endl;`给我`\210`作为结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T08:10:32.973

因为在声明字符**数组**时必须手动添加空终止符。如果将其设为**字符串**（例如 in `char myString[] = "hi"`），则它将添加一个空终止符。但是如果你用大括号把它变成一个**数组**，它就不会。

至于 0x88 字节，无论出于何种原因，它恰好是 RAM 中的下一个字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T09:28:08.457

在任何有效的 C 程序中，字符串文字总是以 null 结尾。在这里，您尝试初始化字符数组的单个元素，但仅使用列表初始化语法而不是字符串文字。由于这是在同一函数中分配的静态数组，您甚至可以借助 sizeof 运算符来确认这一点。做`ca`应该给你 1 即一个字符数组。但是，如果你会做类似的事情，`char ca[] = "0";`那么应用`sizeof(ca)`应该给你 2 即字符 '0' 和空终止字符。正如 aaaaaa123456789 所提到的，这只是你现在得到的一个输出，只是内存中的另一个字节。如果你在不同的时间运行它，你会看到不同的输出或者你的程序可能会崩溃。引用不正确的位置可能会导致任何运行时异常。

# asp.net - 我可以创建一个在 asp.net mvc 3 中呈现 Rss 的 Razor 视图吗？

> ID：14795883
> 
> 赞同：2
> 
> 时间：2013-02-10T08:07:23.497
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, rss

我知道要生成 rss，我可以使用 SyndicationFeed 和 Rss20FeedFormatter 等内置类。我也知道它可以通过自定义类和 aspx 视图来完成。

但是如果我想创建自定义提要对象和自定义视图，我可以使用 razor 执行此操作吗？

这是我的看法：

```
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0">
<channel>
<h2>@Model.Title</h2>
<div><b>Description:</b> @Model.Description</div>
<div><b>Language:</b> @Model.Language</div>
<a href="@Model.Url" class="averageLink">Subscribe to this Feed</a>

@foreach (var item in Model.Items)
{
    <h3>
        Title: @item.Title 
    </h3>
    <div>
        <img width="75" height="75" src="@Url.Action("GetImage", "Store", new { productId = item.ProductId })"/>
    </div>
    <div><b>Description:</b> @item.Description</div>
    <div><b>Creator:</b> @item.Creator</div>
    <div><b>Date published</b> @item.Published</div>
    <div>
        <a href="@item.Url" class="averageLink">place order on Ozon</a>
    </div>
    @Html.ActionLink("go to item", "ItemInformation", "Store", new {itemId = item.ItemId}, new {@class = "averageLink"})
}
</channel>
</rss> 
```

其他问题：

1）我不知道如何准确地实现“订阅”链接：为@Model.Url 分配什么值？

2) 它生成 html，mabby 而不是我需要将我的提要对象序列化为 xml 文档并使用自定义 XmlResult 返回它：ActionResult？

编辑 1：Mabby 我可以以某种方式同时使用内置类和自定义提要模型吗？

编辑 2：我不想使用现有类的原因是因为我需要使用 Html.ActionLink() 和 Url.Action() 助手。如果我将提要对象序列化为 xml，我将如何使用这些辅助方法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T20:47:15.840

您的视图代码正在生成 html，而不是 rss 提要所需的 xml（您正在包含类似 html 的元素`div`）`h3`。

要生成输出 RSS 的视图，视图的布局应该复制[RSS](http://en.wikipedia.org/wiki/RSS#Example) [标准](http://feed2.w3.org/docs/rss2.html)。

例如：

```
@model MyProject.Models.RssModel
@{ Layout = null }

<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0">
<channel>
  <title>@model.FeedTitle</title>
  <description>@model.FeedDescription</description>
  <link>@model.FeedLink</link>
  <lastBuildDate>@model.LastBuildDate</lastBuildDate>
  <pubDate>@model.PubDate</pubDate>
  <ttl>@model.Ttl</ttl>
  @foreach (var item in Model.Items)
  {
    <item>
      <title>@item.Title</title>
      <description>@item.Description</description>
      <link>@item.Url</link>
      <guid>@item.Id</guid>
      <pubDate>@item.PublicationDate</pubDate>
    </item>   
  }  
</channel>
</rss> 
```

但是，您可能需要考虑一种不同的方法：从您的控制器操作返回一个结果，该结果将直接生成 RSS。[您可以在此博客文章](http://damieng.com/blog/2010/04/26/creating-rss-feeds-in-asp-net-mvc)中查看此方法的示例或在[此答案](https://stackoverflow.com/a/11920/51)中进行描述。

# hibernate - 如何使用带有 struts 2 框架（引导文件）的 hibernate 自动创建数据库？

> ID：14795885
> 
> 赞同：1
> 
> 时间：2013-02-10T08:07:38.167
> 
> 标签：hibernate, struts2, struts

struts框架中是否有任何类型的引导文件，该文件在第一次启动时只运行一次。因为我需要在应用程序第一次运行时在数据库中插入一些默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:34:04.420

问：struts 框架中是否有任何类型的引导文件？

A：不。（至少没有做一些非典型的事情......虽然我认为有空间为struts2添加一个功能以按照规定的方式做到这一点）

但是在稍高的级别（Java EE 环境），您可以使用 ServletContextListener 执行您需要的操作，有关使用示例，请参见：[http ://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example /](http://www.mkyong.com/servlet/what-is-listener-servletcontextlistener-example/)

# svn - 如何将 SVN 存储库作为文件夹复制到另一个具有历史记录的存储库

> ID：14795887
> 
> 赞同：4
> 
> 时间：2013-02-10T08:07:49.937
> 
> 标签：svn, repository, project

我有 2 个存储库

```
http://mysnv/svn/proj1/trunk 
```

*   proj1_folder1
*   proj1_folder2

和

```
http://mysnv/svn/proj2/trunk 
```

*   proj2_folder1
*   proj2_folder2

如何将具有历史记录的*proj2复制为**proj1*主干中的**文件夹**以获得以下结果

 *```
http://mysnv/svn/proj1/trunk 
```

*   proj1_folder1
*   proj1_folder2
*   项目2
    *   proj2_folder1
    *   proj2_folder2

实际上我想要做的是只有一个 SVN 存储库，其中包含 proj2 的所有内容*以及*文件夹*proj2*中的历史记录`http://mysnv/svn/proj1/trunk`

这是我正在使用的 SVN 版本：

> svn，版本 1.7.8 (r1419691)

我找到[了这个](https://stackoverflow.com/questions/976829/svn-copy-between-repositories-with-history)博客，但我不清楚 svn 合并。它位于哪里`./foo/trunk:proj1`？

我的 svn 文件夹结构就像`/data/svn/repos/`我没有看到树干文件夹。

我正在寻找一个命令来制作副本，而不影响我的主要项目*proj1*。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T09:54:14.187

**物理聚合**

*   从 proj2 存储库（`svnadmin dump | svndumpfilter --include --include > dump`或`svnrdump URL-proj2_folder1 > dump1 & svnrdump URL-proj2_folder1 > dump2`）创建所需路径的转储
*   **使用更改的父文件夹**( `svnadmin load --parent-dir trunk < dump`)将转储加载到 proj1
*   **检查proj1/trunk/trunk**下是否存在 proj2_folder1 和 proj2_folder2 的数据（第二个主干是 repo1 转储中的基本路径）
*   将子主干文件夹重命名为 proj2 ( `svn mv`)

*使用父目录将 svnrdump-ed 主干加载到新仓库的示例`trunk/Project1`*

![在此处输入图像描述](../Images/ba2c4af905a1af3655729d893c52ddb8.png)

**逻辑聚合**

*   创建 proj1/trunk/proj2 文件夹
*   在 proj2 中创建两个 svn:externals（目录类型）：proj2_folder1 链接到 proj2/trunk/proj2_folder1 和 proj2_folder2 链接到 proj2/trunk/proj2_folder2*

# android - android 的谷歌分析忽略 setDebug

> ID：14795892
> 
> 赞同：1
> 
> 时间：2013-02-10T08:08:02.797
> 
> 标签：android, google-analytics

我在我的 android 应用程序中使用 google analytics V2 的 beta 4。为方便起见，我将它包装在一个单独的类（单例）中，如下所示：

```
private AnalyticsTracker(Context context) {

    GAServiceManager.getInstance().setDispatchPeriod(5);
    GoogleAnalytics googleAnalytics = GoogleAnalytics.getInstance(context);

    googleAnalytics.setDebug(true);

    tracker = googleAnalytics.getTracker(context.getString(R.string.ga_trackingId));
} 
```

为了进一步使用，我使用 EasyTracker 进行活动跟踪，使用 tracker 成员变量进行事件跟踪。

```
public void onActivityStart(Activity activity) {
    EasyTracker.getInstance().activityStart(activity);
}

public void onActivityStop(Activity activity) {
    EasyTracker.getInstance().activityStop(activity);
}

public void trackEvent(AnalyticsEvent event) {
    tracker.sendEvent(event.category, event.action, event.label, 0L);
    GAServiceManager.getInstance().dispatch();
} 
```

问题是构造函数中的 setDebug(true) 似乎被忽略了，因为 LogCat 上没有输出，并且我的交互出现在报告中。我没有在 analytics.xml 中设置调试标志。

如果我这样做并在 xml 文件中将标志设置为 true，它将按预期工作，并且分析将事件记录到 LogCat。

知道为什么它会忽略来自代码的调用吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:05:38.027

`<bool name="ga_debug">false</bool>` 在 values 文件夹中的 analytics.xml 中使用 以启用禁用调试。

分析.xml：

```
<!-- Replace placeholder ID with your tracking ID -->
<string name="ga_trackingId">UA-123456-2</string>

<!-- Enable automatic activity tracking -->
<bool name="ga_autoActivityTracking">true</bool>

<!-- Enable automatic exception tracking -->
<bool name="ga_reportUncaughtExceptions">true</bool>

<!-- Enable debug -->
<bool name="ga_debug">false</bool>

<!-- The screen names that will appear in your reporting -->
<string name="com.example.myapp.MainActivity">any name</string>

<!--The inverval of time after all the collected data  should be sent to the server, in seconds.-->
<integer name="ga_dispatchPeriod">30</integer> 
```

参考：[链接](https://developers.google.com/analytics/devguides/collection/android/v2/)

# python - 数据描述符优先级在python中是如何工作的

> ID：14795894
> 
> 赞同：2
> 
> 时间：2013-02-10T08:08:34.023
> 
> 标签：python

我从网上读到这个东西

> 对物体而言，机器在`object.__getattribute__`其中转化`b.x`为`type(b).__dict__['x'].__get__(b, type(b)).`
> 
> 该实现通过优先级链工作，该优先级链 **赋予数据描述符优先于实例变量**，**实例变量优先于非数据描述符**，如果提供，则将最低优先级分配给**getattr**。

我不明白“赋予数据描述符优先于实例变量”和“实例变量优先于非数据描述符”是什么意思

谁能给我举个例子，这实际上是如何工作的？我想看看代码中有什么优先级

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T09:55:52.597

每个对象都有一个属性字典，其中包含它的变量和函数。参考这些词典：

```
If an instance’s dictionary has an entry with the same name as a data descriptor,    
the data descriptor takes precedence. If an instance’s dictionary has an entry with
the same name as a non-data descriptor, the dictionary entry takes precedence. 
```

这就是他们所说的。

要显示这一点：

```
#data descriptor
class A(object):
   def __get__(self, obj, type):
       print "hello from get A"
   def __set__(self, obj, val):
       print "hello from set A"
#non data descriptor
class B(object):
   def __get__(self, obj, type):
       print "hello from get B"

class C(object):
   #our data descriptor
   a = A()
   #our non data descriptor
   b = B()

>>> c = C()
>>> c.a
hello from get A
>>> c.b
hello from get B
>>> c.a = 0
hello from set A
>>> c.a          #notice after reassignment, A.__get__ is still called
hello from set A
>>> c.b = 0     #instance variable with the same name as the non data-descriptor
>>> c.b         #notice how B.__get__ isn't called anymore
0 
```

基本上它是说当用户为对象（数据描述符）定义时，它们将被调用而不是默认方法`__get__`。`__set__`如果仅为`__get__`对象（非数据描述符）定义用户，则实例可以重新分配实例变量。

因此，当调用`g.x = 0`: 如果 x 是数据描述符，则调用 x 的用户定义`__set__`方法，当 x 是实例变量或非数据描述符时，调用默认行为。

使用**数据描述符**，该类控制对变量的所有访问和修改。**所有对数据描述符类型变量的访问都将通过`__get__`和`__set__`**。所以`c.a = 0`调用`A.__set__`和 ca 改变了类定义它的方式。无法创建不属于 A 类型的实例变量“ca”。

使用**非数据描述符**，该类仅控制访问，因此当`c.b = 0`被调用时，由于`__set__`未定义，因此会创建一个新的实例变量（默认行为）。设置变量时没有用户定义的行为，因此您可以创建一个具有相同名称的实例变量，而无需该`__get__`行为。

The precedence they are talking about is the dynamics of the two. A data descriptor will always call `__get__` and `__set__`, and so an instance variable can't be created with the same name. A non data descriptor will only call `__get__` until an instance variable with the same name is created.

# hadoop - Apache Pig 中 WHERE IN () SQL 的等价物

> ID：14795898
> 
> 赞同：0
> 
> 时间：2013-02-10T08:09:27.030
> 
> 标签：hadoop, apache-pig

`where in (select col1 from tbl where col = col2)`我想知道在 Apache pig 中是否有任何等价物。换句话说，我如何确定关系 A 是关系 B 的子集还是关系 A 和 B 之间的公共元组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:21:05.723

我认为你想要的相当于内部连接。 [http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#JOIN+%28inner%29](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#JOIN+%28inner%29) 我将在哪里引用作为连接的糖语法。例如，在 oracle 中，您可以在其中放置一组常量以及一个子查询。

# c# - 一个实体对象不能被多个 IEntityChangeTracker 实例引用，即使我分离了它

> ID：14795899
> 
> 赞同：0
> 
> 时间：2013-02-10T08:09:47.160
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework, caching

我正在使用EF。我将实体保存到缓存中。

我在放入缓存之前分离每个实体，

并在从缓存中获取后将其附加到新的 objectContext 中。

我`using`在高点使用语句（在我的 BL 课程中，根据每个请求）

然而我得到这个错误：

```
System.InvalidOperationException: An entity object cannot be referenced by multiple instances of IEntityChangeTracker.
at System.Data.Objects.ObjectContext.VerifyContextForAddOrAttach(IEntityWrapper wrappedEntity)
at System.Data.Objects.ObjectContext.AttachSingleObject(IEntityWrapper wrappedEntity, EntitySet entitySet, String argumentName)
at System.Data.Objects.ObjectContext.AttachTo(String entitySetName, Object entity)
at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
at System.Data.Entity.Internal.Linq.InternalSet`1.Attach(Object entity)
at System.Data.Entity.DbSet`1.Attach(TEntity entity)
at Conduit.Mam.ClientService.DAL.MamData.MamDataRepository.GetMamData(String stamp, MaMDBEntities maMDBEntities) in d:\Builds\TFS\9\221\Sources\Server\ClientServices\Dev\ClientService 1.3\ServiceDAL\MamData\MamDataRepository.cs:line 56
at Conduit.Mam.ClientService.BLL.MamDataManager.GetMamData() in d:\Builds\TFS\9\221\Sources\Server\ClientServices\Dev\ClientService 1.3\Conduit.Mam.ClientService.BLL\MamDataManager.cs:line 57
at Conduit.Mam.ClientService.BLL.AppsDataManager.GetClientRelevantsApps(List`1 appsData) in d:\Builds\TFS\9\221\Sources\Server\ClientServices\Dev\ClientService 1.3\Conduit.Mam.ClientService.BLL\AppsDataManager.cs:line 107
at Conduit.Mam.ClientService.Service.Controllers.ClientDataController.GetAppsData() in d:\Builds\TFS\9\221\Sources\Server\ClientServices\Dev\ClientService 1.3\Conduit.Mam.ClientService.Service\Controllers\ClientDataController.cs:line 58 
```

这是我的分离+附加代码：`using`将objectContext注入到这里：

```
public static Group GetMamData(string stamp, MaMDBEntities maMDBEntities)
    {
        Group group = MamDataCacheManager.GetMamData(stamp);

        if (group == null)
        {
            //was not found in the cache
            //check for aveilable test with status 'start' - 1
            group = GetGroupsFromDb(stamp, maMDBEntities);

            if (group != null)
            {
                maMDBEntities.Entry(group).State = EntityState.Detached;

                MamDataCacheManager.InsertMamData(stamp, group);

            }
        }

        //option B: attache a new context
        if (maMDBEntities.Entry(group).State == EntityState.Detached)
        {
            maMDBEntities.Groups.Attach(group);
        }

        return group;
    } 
```

第一次（从数据库中获取新实体到缓存中）：

实体被分离并附加到相同的 contextObjec。

第二次（从缓存中获取实体），

它只附加到一个新的 contextObject。

我需要做任何额外的步骤吗？我的分离缺少什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T10:01:58.857

分离只影响传递给方法的特定对象。如果要分离的对象在对象上下文中有相关对象，则这些对象不会被分离。

# php - 我的 php 脚本中的会话有什么问题？

> ID：14795902
> 
> 赞同：0
> 
> 时间：2013-02-10T08:10:12.953
> 
> 标签：php, session

我在这里有这段代码，在脚本的某个地方我有代码的第二部分。当我运行脚本时，它会显示一条通知：

注意：未定义变量：第 215 行 C:\xampp\htdocs\BB\shoppingcart.php 中的 msg
注意：未定义索引：第 218 行 C:\xampp\htdocs\BB\shoppingcart.php 中的购物车

以下是代码：

```
if(isset($_REQUEST['command']) && $_REQUEST['command']=='add' && $_REQUEST['productid']>0)

{
    remove_product($_REQUEST['pid']);
}
else if(isset ($_REQUEST['command'])=='clear'){
    unset($_SESSION['cart']);
}
else if(isset ($_REQUEST['command'])=='update'){
    $max=count($_SESSION['cart']);
    for($i=0;$i<$max;$i++){
        $pid=$_SESSION['cart'][$i]['productid'];
        $q=intval($_REQUEST['product'.$pid]);
        if($q>0 && $q<=999){
            $_SESSION['cart'][$i]['qty']=$q;
        }
        else{
            $msg='Some proudcts not updated!';
        }
    }
} 
```

这是第 215 和 218 行：

```
<div style="color:#F00"><?php  echo $msg?></div>

if(is_array($_SESSION['cart'])){ 
```

我找不到问题，我在网上搜索了几个小时。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:22:55.523

首先在代码的第一部分将上面的 $msg 定义为 nul 即 $msg = null 或者您可以使用 echo isset($msg) 直接调用？$味精：''；

它将解决您的第一行错误

然后你一步一步调试你的代码，为什么 $msg 不包含任何值改变这一行 else if(isset ($_REQUEST['command'])=='clear') 到 else if(isset ($_REQUEST[ 'command']) && ($_REQUEST['command'] == 'clear'))

是否可以解决您的问题只需检查一次然后返回，如果没有，我们可以通过另一种方式找到它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:24:35.450

您仅在某些条件下设置 $_SESSION['cart'] 和 $msg，因此如果这些条件不成立，则它们是未定义的。您不能在代码中使用未定义的变量或索引。将第 215 和 218 行更改为以下内容，您将不会遇到问题：

```
<div style="color:#F00"><?php  if (isset($msg)) {echo $msg;} ?></div>

if(isset($_SESSION['cart']) && is_array($_SESSION['cart'])){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T08:18:46.573

摆脱：

注意：未定义变量：第 215 行 C:\xampp\htdocs\BB\shoppingcart.php 中的 msg

将此指令放在脚本的开头，以使您的变量始终可用：

```
$msg = ''; 
```

对于通知：

注意：未定义索引：第 218 行 C:\xampp\htdocs\BB\shoppingcart.php 中的购物车

尝试把 session_start(); 脚本开头的说明。

# php - extjs 4 使用 PHP 和 MySQL 在树形面板中添加复选框

> ID：14795906
> 
> 赞同：1
> 
> 时间：2013-02-10T08:10:38.933
> 
> 标签：php, javascript, mysql, extjs, extjs4

这是 extjs 4 代码：

```
checktree.js

Ext.require([
    'Ext.tree.*',
    'Ext.data.*',
    'Ext.window.MessageBox'
]);

Ext.onReady(function() {
    var store = Ext.create('Ext.data.TreeStore', {
        proxy: {
            type: 'ajax',
            url: 'tree.php',
     node:'id' // send the parent id through GET (default 0)
        }
    });

    var tree = Ext.create('Ext.tree.Panel', {
        store: store,
        rootVisible: false,
        useArrows: true,
        frame: true,
        title: 'Check Tree',
        renderTo: 'tree-div',
        width: 289,
        height: 220,
        dockedItems: [{
            xtype: 'toolbar',
            items: {
                text: 'Get checked nodes',
                handler: function(){
                    var records = tree.getView().getChecked(),
                        names = [];

                    Ext.Array.each(records, function(rec){
                        names.push(rec.get('text'));
                    });

                    Ext.MessageBox.show({
                        title: 'Selected Nodes',
                        msg: names.join('<br />'),
                        icon: Ext.MessageBox.INFO
                    });
                }
            }
        }]
    }); 
}); 
```

这是 tree.php 代码：

```
<?php
mysql_connect("localhost", "root", "") or die("Could not connect");
mysql_select_db("tree") or die("Could not select database");
$parent_id = $_GET['node'];
$query = "SELECT id, text, leaf,false as checked FROM mytree WHERE parent_id='".$parent_id."' ORDER BY text ASC";
$rs = mysql_query($query);
$arr = array();
while($obj = mysql_fetch_object($rs)) {
 $arr[] = $obj;
}
echo json_encode($arr);
?> 
```

MySql 数据库：

```
CREATE DATABASE `tree`;

DROP TABLE IF EXISTS `mytree`;
CREATE TABLE `mytree` (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'node_id',
  `text` varchar(20) NOT NULL COMMENT 'node_name',
  `parent_id` int(11) NOT NULL,
  `leaf` varchar(5) NOT NULL COMMENT 'true/false',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=95 DEFAULT CHARSET=latin1;

INSERT INTO `mytree` VALUES (36,'Folder 1',0,'false'),
(38,'Folder 2',0,'false'),(42,'Text 1',36,'true'),
(43,'Text 3',36,'true'),(44,'Text 2',36,'true'),
(52,'Text 6',38,'true'),(57,'Text 5',38,'true'),
(58,'Text 4',38,'true'),(73,'Subfolder 1',36,'false'),
(74,'Text 7',73,'true'),(75,'Text 10',73,'true'),
(76,'Text 9',73,'true'); 
```

## 问题

1）我想在树中添加复选框，并且我已经`false as checked`在SQL中添加了，成为所有具有复选框的树，不幸的是复选框无法取消选中或选中，无论如何如何在树面板中添加复选框正确?
2）我只想要有复选框的文件，文件夹不需要复选框
3）当复选框被选中或取消选中时，弹出一个消息框，并写下ID和复选框状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:35:22.940

For the first and second question you have to change your PHP-Code:

1) The problem is that "mysql_fetch_object" returns an object with **string** properties and ExtJs expects a boolean value at attribute "checked".

2)When a node is a leaf then add the attribute "checked"

```
 <?php
    mysql_connect("localhost", "root", "brandt") or die("Could not connect");
    mysql_select_db("tree") or die("Could not select database");
    $parent_id = $_GET['node'];
    // 1) Remove false as checked
    $query = "SELECT id, text, leaf FROM mytree WHERE parent_id='".$parent_id."' ORDER BY text ASC";
    $rs = mysql_query($query);
    $arr = array();
    while($obj = mysql_fetch_object($rs)) {

      // 2) If no leaf then destroy the attribute
      if($obj->leaf != "false"){
         // 1) set checked attribute with an boolean value 
         $obj->checked = false;       
      }
     $arr[] = $obj;
    }
    echo json_encode($arr);
    ?> 
```

3) Add listener for check change after tree panel

```
tree.on('checkchange', function(node){
        var data = node.data;
        Ext.MessageBox.show({
        title: 'Changed checkbox status',
        msg: 'ID: ' + data.id + ' <br /> Checkbox status: ' + data.checked,
        icon: Ext.MessageBox.INFO
        });    
}) 
```

# c# - Adobe Acrobat 浏览器控件类型库 1.0（不能作为参考添加）

> ID：14795910
> 
> 赞同：1
> 
> 时间：2013-02-10T08:11:42.360
> 
> 标签：c#, wpf, pdf

我正在尝试使用 adobe com 参考 Adob​​e Acrobat Browser Control Type Library 1.0

当我尝试添加它时，它会引发此错误：

![在此处输入图像描述](../Images/4072cf237f265ff38c45e671a58e6773.png)

我已经尝试重新安装 Reader 11，并且抱怨的 .dll 位于正确的文件夹中：

![在此处输入图像描述](../Images/1fa378029e0bdb31138571b4d6de0299.png)

不完全确定发生了什么......我是否缺少其他依赖项？我已经添加了：

![在此处输入图像描述](../Images/e51e48f0c7f487a21d62e15e978d7b54.png)

但无济于事。

其他人遇到过这个问题吗？

# php - PHP如何只计算单击次数

> ID：14795912
> 
> 赞同：0
> 
> 时间：2013-02-10T08:12:42.567
> 
> 标签：php, click, counter

如果我在横幅上单击 1 次我的 PHP 函数计数它，也许是一些仅计算 1 次单击的解决方案，或者创建更快的重定向，用户没有时间单击更多的 1 次？

这是我的功能：

```
function wp125_adclick() {
    if (isset($_GET['adclick']) && $_GET['adclick'] != "" && ctype_digit($_GET['adclick'])) {
    $theid = $_GET['adclick'];
    global $wpdb;
    $adtable_name = $wpdb->prefix . "wp125_ads";
    $thead = $wpdb->get_row($wpdb->prepare(
        "SELECT target FROM {$adtable_name} WHERE id = %d",
        $theid
    ));
    $theid = $wpdb->escape($theid);
    $update = "UPDATE ". $adtable_name ." SET clicks=clicks+1 WHERE id='$theid'";
    $results = $wpdb->query( $update );
    header("Location: $thead->target");
    exit;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:14:03.170

您可以使用会话变量来计算点击次数。因此，您可以避免计算多次点击。

```
if(!isset($_SESSION['click_already_saved'])) {
    $update = "UPDATE ". $adtable_name ." SET clicks=clicks+1 WHERE id='$theid'";
    $results = $wpdb->query( $update );
    $_SESSION['click_already_saved']=true;
} 
```

# yii - CDbCriteria 中的“订单”属性是否安全？

> ID：14795921
> 
> 赞同：1
> 
> 时间：2013-02-10T08:15:50.803
> 
> 标签：yii

下面的代码对 SQL 注入安全吗？

```
$criteria = new CDbCriteria();
$arySort= json_decode($_GET['sort']);
$criteria->order= $arySort[0]->property . ' ' .  $arySort[0]->direction;

Person::model()->findAll($criteria); 
```

如果没有，我应该怎么做才能确保对象的“顺序”属性没有危险`CDbCriteria`？

我应该使用[`mysql_real_escape_string`](http://php.net/manual/en/function.mysql-real-escape-string.php)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:04:37.217

我认为仅仅考虑 sql 注入是不够的。您必须检查 json 数组中的数据，因为可能会发送错误的字段名称或错误的方向。

所以

```
 $criteria = new CDbCriteria();
    $arySort= json_decode($_GET['sort']);
    $criteria->order=$this->prepareSort($_GET['sort']);
    Person::model()->findAll($criteria);

    public function prepareSort($arySort)
    {
        $property='t.id';
        $direction='ASC'
        if(is_seet($arySort[0])
        {
            if(in_array($arySort[0]->property, array_keys($this->attributes))
                $property=$arySort[0]->property;
            if(in_array($arySort[0]->direction, array('ASC', 'DESC')))
                $direction=$arySort[0]->direction;
        }
        return $property.' '.$direction;
    } 
```

附言

在使用这样的 CGridView 的情况下

```
public function search()
{
    $criteria=new CDbCriteria;

    $criteria->compare('t.id',$this->id);
    $criteria->compare('t.title',$this->title,true);
    $criteria->compare('content',$this->content,true);
    $criteria->compare('url',$this->url,true);

    return new CActiveDataProvider(
        $this,
        array(
            'criteria'=>$criteria,
            'sort'=>array(
                'defaultOrder'=>'title ASC',
                'attributes'=>array(
                    '*'
                )
            ),
            'pagination'=>array(
                'pageSize'=>20,
            ),
        )
    );
} 
```

# csv - SSIS - CSV 到 SQL Server 数据导入错误

> ID：14795923
> 
> 赞同：1
> 
> 时间：2013-02-10T08:15:55.793
> 
> 标签：csv, ssis

我正在尝试使用 CSV 文件将数据导入到使用 SSIS 的 SQL Server 表中。该包很简单，带有文件源任务和 SQL Server 目标。

CSV 文件有 2 个字段 Transaction_Date 和 Account_Created。这些字段中的日期格式为 1/2/2009 6:00:00 AM。我看到以下错误消息：“错误：数据插入期间发生异常，从提供程序返回的消息是：数据源中字符串类型的给定值无法转换为指定目标列的日期时间类型。”

我在下面尝试的步骤：我尝试使用各种其他目标转换。我尝试在平面文件连接管理器中使用数据类型。我尝试使用源任务和 SQL Server 目标之间的数据转换转换。

当我尝试通过仅提供与 Transaction_Date 的连接来加载数据时，它可以工作。但是，当我尝试通过仅提供与 Account_Created 的连接来加载时，它会失败。

我确定我错过了一些愚蠢的东西。请帮忙。

问候， KK

我厌倦了从使用向导开始构建包的不同方法。我使用了实际的 CSV 文件，其中包含许多其他列，例如价格、产品名称等。当我尝试执行包时，我看到如下不同的错误消息：“[Destination for AdventureWorks [58]] 错误：输入“OLE DB 目标输入”（71 ）。返回的列状态是：“由于可能丢失数据，无法转换该值。”。“当我尝试一个只有 2 个日期字段的 CSV 文件时，它工作得很好。

我现在真的很困惑，认为这是某种数据类型问题，我没有正确理解。有人可以解释一下这个问题吗？

问候， KK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:23:44.687

要加载前两个字段（Transaction_Date、Account_Created），您需要一个包含以下内容的 DataFlow 任务：

*   平面文件源
*   派生列（创建两列以用下面的公式替换“Transaction_Date”和“Account_Created”）
*   SQL Server 目标

笔记：

*   SSIS 不解析像 '1/2/2009 6:00:00 AM' 这样的日期格式，确保平面文件连接管理器将字段视为字符串（长度 > 22）
*   在派生列中，您可以使用以下公式解析“01/02/2009”：

    (DT_DBDATE)(SUBSTRING([Column 2],7,4) + "-" + SUBSTRING([Column 2],4,2) + "-" + SUBSTRING([Column 2],1,2))

*   由于缺少 SSIS 的高级日期时间解析功能，您在文件“2009 年 1 月 2 日”中的当前日期格式使得转换非常棘手。根据日期和月份，您必须从可变长度字符串中减去，因此您必须将 SUBSTRING 与 FINDSTRING 组合以确定分隔符“/”的位置

祝你好运

# mongodb - Meteorjs 显示引用的文档字段

> ID：14795924
> 
> 赞同：2
> 
> 时间：2013-02-10T08:16:02.280
> 
> 标签：mongodb, meteor, one-to-many

我有以下情况。有一个集合 Suppliers 和另一个 Invited。现在 Invited.supplier = Supplier._id （语法可能是错误的） Invited collection 是指一对多方式的供应商。

在我的 html 中，我有

```
<template name="mytemplate">
{{#each invited_list}}
{{supplier}}
{{f1}}
{{f2}}
{{/each}}
</template> 
```

我有一个辅助功能

```
Template.mytemplate.helpers({
invited_list : function(){
return Invited.find({"something"});
}
}); 
```

我想在我的邀请列表中显示 {{Suppliers.name}} 而不是 _id in {{supplier}} 。我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:27:27.270

您可以创建解析器函数，例如：

```
Template.mytemplate.helpers({
    invited_list : function(){
        return resolveSupplierToNames(Invited.find({"something"}).fetch());
    }
});

function resolveSupplierToNames(invitedList) {
    for (var i=0; i<invitedList.length; i++) {
        invitedList[i].supplier = Suppliers.findOne({_id: invitedList[i].supplier}).name;
    }

    return invitedList;
} 
```

mongodb一般有两种选择，一种是上面的（手动）。第二个是使用[DBRefs](http://docs.mongodb.org/manual/applications/database-references/)。但是我不确定流星是否完全支持 DBRefs。正如 mongodb 文档中所建议的那样，手动执行它没有任何问题。

**更新**

Meteor 已经引入了一个*变换*函数，你可以做类似的事情：

```
Template.mytemplate.helpers({
    invited_list : function(){
        return Invited.find({"something"},{transform:function(doc) {
            doc.supplier_name = Suppliers.findOne({_id: doc.supplier_id}).name;
            return doc;
        });
    }
}); 
```

# php - js 无法识别重音字符 onclick

> ID：14795926
> 
> 赞同：3
> 
> 时间：2013-02-10T08:16:06.493
> 
> 标签：php, javascript, jquery, html, ajax

我有一个具有 onkeyUp 绑定的输入元素。我面临的问题是，当用户输入重音字符时，即：Ä ä Ö ö Ü ü JS 不会触发 onkeyup 事件/函数。在常规字符上，这很好用。此外，如果我输入重音字符和常规字符 (Ös)，则绑定会识别这两个字符并触发事件/函数。此外，复制粘贴重音字符效果很好。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T16:00:25.647

嗯...我发现重音字符以 keyCode=0 的形式进入我的 JS 文件，因此我忽略了它们。再次为 (event.keycode==0), Tnx 添加了新规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:24:16.420

我使用的是瑞士键盘，你是对的：`keyup`事件为字符返回相同的值，`é`并且`ö`这些值是从同一个键提供的（`ö`由 激活`shift`）。

您可以使用`keypress`事件来捕获所有键盘事件，包括特殊键：[http ://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

# c - “__attribute__((always_inline))”没有按预期工作？

> ID：14795927
> 
> 赞同：2
> 
> 时间：2013-02-10T08:16:13.533
> 
> 标签：c, xcode, inline, xcode4.6

```
static inline int my_function() __attribute__((always_inline));

static inline int my_function()
{
     //...
} 
```

所以我已经像上面那样声明了我的函数，尽管在二进制文件中函数被分支而不是内联，因此一个简单的 NOP 可以使整个函数无用。

![在此处输入图像描述](../Images/dba50aef1c6186f0ff6bcb3b28ee57ff.png)

如何强制 Xcode 4.6 内联函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T08:48:14.640

你在这里给出的函数没有原型：你没有提供参数的类型。在 C 中，仅`()`在声明中意味着函数接收未知数量的参数。可能编译器然后假设对内联它的函数不够了解。用于`(void)`声明不带参数的函数。

# javascript - 按名称的一部分查找数据属性

> ID：14795928
> 
> 赞同：5
> 
> 时间：2013-02-10T08:16:19.680
> 
> 标签：javascript, jquery

如何通过部分名称获取数据属性的值？
例如：

```
<div data-pcp-email="some text" data-pcp-order="some int" data-ref="some data"></div> 
```

假设，我想让所有数据属性都以 开头`data-pcp-`：结果必须是`data-pcp-email`和 `data-pcp-order`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T08:22:18.890

您可以获取属性名称为“pcp”的所有属性（及其值），如下所示：

```
// get an object map containing all data attributes
var data = $('selector').data();

// filter out what you need
for(var key in data) {
    if(key.indexOf('pcp') === 0) { // attrib names begins with 'pcp' ?
        console.log(key + ' => ' + data[key]);
    }
} 
```

这是一个演示：http: [//jsfiddle.net/8waUn/1/](http://jsfiddle.net/8waUn/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:18:51.643

如果您只使用 HTML 或 jQuery`attr`函数设置属性：

```
$('div[data^=pcp-]') 
```

如果使用 jQuery 的`data`函数设置值，则必须使用`filter`.

```
$('div').filter(function(){
    var data = $(this).data();
    for (var key in data){
        return key.indexOf('pcp-') === 0;

    }
}); 
```

如果您只想要可以使用的属性`map`：

```
var values = $('div').map(function () {
    var data = $(this).data();
    var results = [];
    for (var key in data) {
        if (key.indexOf('pcp') === 0) results.push({
            key: key,
            value: data[key]
        });
    }
    if (results.length) 
        return results;
}).get();

console.log(JSON.stringify(values)); 
```

[**现场演示**](http://jsfiddle.net/XwjfV/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-10T08:18:11.923

[使用“属性以”jQuery 选择器开始](http://api.jquery.com/attribute-starts-with-selector/)：

```
$('div[data^=pcp-]') 
```

# jquery - Arbor/JQuery DOM 异常 18

> ID：14795932
> 
> 赞同：2
> 
> 时间：2013-02-10T08:17:42.127
> 
> 标签：jquery, arbor.js

我正在使用 arbor.js 和 raphael.js 绘制连接图。在我的本地主机上一切正常，但在 heroku 上，我收到以下错误：

```
Uncaught Error: SECURITY_ERR: DOM Exception 18 arbor.js:33
j.init                arbor.js:33
Kernel                arbor.js:33
ParticleSystem        arbor.js:35
(anonymous function)  pg.js:63
f                     jquery.min.js:1
p.fireWith            jquery.min.js:1
st.extend.ready       jquery.min.js:1
xt                    jquery.min.js:1 
```

在我的代码（pg.js）中，它出现在`arbor.ParticleSystem()`. 我所有的静态文件都来自 amazon s3，最新的 jquery 来自 google ajax 库。

我在网上搜索了过去 3 天，试图找出导致它的原因。我不使用任何 file:// 也不使用画布。

是什么导致了这个错误？我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T07:25:27.207

我删除了`window.location.protocol=="file:"&&`arbor.js 源代码中 kernel.js 函数开头的行，它似乎可以工作。

仍然不确定真正的问题是什么......

# jquery - 在 jQuery isotope 中重新布局后移动较小的项目以适应空白空间

> ID：14795938
> 
> 赞同：3
> 
> 时间：2013-02-10T08:18:43.030
> 
> 标签：jquery, jquery-isotope

在更改其他项目的大小后，我想将较小的项目移动到空白空间。

这是它在 jsfiddle 上的样子：http: [//jsfiddle.net/FRH8v/](http://jsfiddle.net/FRH8v/)

例如，当您单击否时。2，你会得到它上面的两个空格。如何移动较小的物品来填充这些空间？

这是代码（与 jsfiddle 相同）：

```
$(function(){
    // Modified Isotope methods for gutters in masonry
    $.Isotope.prototype._getMasonryGutterColumns = function() {
        var gutter = this.options.masonry && this.options.masonry.gutterWidth || 0;
        containerWidth = this.element.width();

        this.masonry.columnWidth = this.options.masonry && this.options.masonry.columnWidth ||
        // Or use the size of the first item
        this.$filteredAtoms.outerWidth(true) ||
        // If there's no items, use size of container
        containerWidth;

        this.masonry.columnWidth += gutter;

        this.masonry.cols = Math.floor((containerWidth + gutter) / this.masonry.columnWidth);
        this.masonry.cols = Math.max(this.masonry.cols, 1);
    };

    $.Isotope.prototype._masonryReset = function() {
        // Layout-specific props
        this.masonry = {};
        // FIXME shouldn't have to call this again
        this._getMasonryGutterColumns();
        var i = this.masonry.cols;
        this.masonry.colYs = [];
        while (i--) {
            this.masonry.colYs.push(0);
        }
    };

    $.Isotope.prototype._masonryResizeChanged = function() {
        var prevSegments = this.masonry.cols;
        // Update cols/rows
        this._getMasonryGutterColumns();
        // Return if updated cols/rows is not equal to previous
        return (this.masonry.cols !== prevSegments);
    };

    var $container = $('#container'),
        $element = '.element';

    $container.isotope({
        itemSelector: $element,
        resizable: false,
        transformsEnabled: true,
        animationEngine: 'best-available',
        layout: 'masonry',
        masonry: {
            gutterWidth: 4,
            columnWidth: 157
        }
    });

    // click action
    $container.find($element).each(function(){
        var that = $(this);

        that.click(function(){
            if( that.hasClass('active') ){
                $container.find($element).removeClass('active');
            } else {
                $container.find($element).removeClass('active');
                that.addClass('active');
            }

            $container.isotope('reLayout');

            return false;
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T14:42:39.317

Well, that's how isotope / masonry works.

I doesn't really remove all "holes" as good as possible. From my experience, I would say that isotope/masonry only pushes tiles up, but doesn't jump over tiles.

In your fiddle, when enlarging "5", "7" won't go up, because it would have to "jump over" 5.

But why? I don't know exactly, but I could imagine 2 reasons:

*   It preserves the order of elements. In extreme case, an optimal algorithm could totally shuffle your items. When you would resize individual boxes, you would have completely unpredictable "jumping around" of block during the resize.
*   It reduces the computational complexity - more info here: [http://en.wikipedia.org/wiki/Knapsack_problem#Computational_complexity](http://en.wikipedia.org/wiki/Knapsack_problem#Computational_complexity)

That said, it seems like packery ([http://packery.metafizzy.co/](http://packery.metafizzy.co/)) does exactly what you want :)

# c# - 使用 SWIG 从 C# 使用 C++ 游戏引擎

> ID：14795941
> 
> 赞同：1
> 
> 时间：2013-02-10T08:18:54.607
> 
> 标签：c#, c++, .net, wrapper, swig

我最近获得了我打算使用的 3D 游戏引擎的 C++ 源代码。然而，我的 C++ 编码技能远非传奇，而且我肯定发现 C# 更容易使用。我已经看到完全用 C++ 实现的组件，并且在 .NET 中只有一组包装类，没有源代码 - 相反，它们使用关键字将类标记为外部直接指向 DLL 的类`[ComImport]`，以及 `public virtual extern' 关键字将函数标记为外部。因此是否可以使用 SWIG，在 C# 中创建直接链接到 C++ 游戏引擎的 DLL 中的类和方法的类和方法？所以我应该能够直接在 .NET 中实例化 C++ 引擎的类，并从 .NET 控制它们。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:21:24.460

如果 C++ 类是 COM 对象，则只能使用 [ComImport]。很有可能他们没有得到这是一个游戏引擎。（在您的 C++ 代码中搜索诸如 CoInitialize 之类的 COM 方法以明确了解）

鉴于您有源代码，理论上 SWIG 将为您的 C++ 创建 C# 包装器，而不需要您将 C++ 类作为 COM 对象，但是不要指望这完全是微不足道的。

我过去采用的另一种方法是为我的 C++（google 'extern "c"'）编写一个“C”包装器，然后使用 pinvoke 轻松创建 C# 包装器。在您的情况下这是否可行将取决于 C++ api。

请记住，任何 C# => 本机（c、c++ 等）都会涉及一些性能损失。多少将取决于 C# -> 本机（或本机 -> C#）调用的频率。

# vb.net - 如何在 vb.net 中拆分字符串中的新行

> ID：14795943
> 
> 赞同：19
> 
> 时间：2013-02-10T08:19:12.687
> 
> 标签：vb.net, string, split

例如..如果我有这样的文字

```
214asd
df5df8
d66f66 
```

我想使用 vb.net 将它们分成 3 个字符串。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-10T08:23:57.590

假设您想在新行上拆分 - using`String.Split`将返回一个包含以下部分的数组：

```
Dim parts As String() = myString.Split(new String() {Environment.NewLine},
                                       StringSplitOptions.None) 
```

这将是特定于平台的，因此您可能希望拆分`"\n"`、`"\r"`或`"\n\r"`它们的组合。`String.Split`有一个重载，它需要一个字符串数组，其中包含您要拆分的字符串。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-10-21T18:12:45.670

```
Dim strLines() As String = Clipboard.GetText.Replace(Chr(13), "").Split(Chr(10)) 
```

我喜欢这样做。只能在一个字符上拆分，但在大多数情况下，NewLine 是两个字符，回车（0x0D AKA Char 13）和换行（0x0A AKA Char 10）。但在其他系统中，它只是一个 LF。因此，我只需删除 CR 的所有实例并在 LF 上拆分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T08:26:15.257

```
str.Split(New String() {Environment.NewLine}, 
          StringSplitOptions.RemoveEmptyEntries) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-05-07T01:41:39.447

```
Dim enter As String = vbCrLf
Dim linecount As Integer = 0
Dim sr As New System.IO.StreamReader(yourTextFilePath)
linecount = sr.ReadToEnd.Split(CChar(enter)).Length - 1 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-08-17T23:06:42.560

```
Dim strLines As String() = myString.Split(New String() {Convert.ToChar(13), Convert.ToChar(10)}, StringSplitOptions.RemoveEmptyEntries) 
```

# jquery - jQuery单击事件在iOS中不起作用

> ID：14795944
> 
> 赞同：70
> 
> 时间：2013-02-10T08:19:19.243
> 
> 标签：jquery, ios, css, click, transform

> **第二次更新：**看起来我的一个函数（resetFigures）阻止了事件处理程序，因此将其移至绑定函数的末尾将其整理出来。
> 
> **更新：**经过一些基本测试后，我意识到点击事件正在注册，只是点击时框无法翻转。

我的网站在 Chrome 和 Firefox 中运行的基本美学功能，但它拒绝在 iOS 上正常运行（在 iOS 6.1 的 iPhone 4 和 iOS 4.3.5 的 iPad 上测试）。

您可以在此处查看该站点，当然还有脚本 (main.js)：http: [//bos.rggwebdesigns.com/](http://bos.rggwebdesigns.com/)

我读过 iOS 并没有真正正确地处理 jQuery 点击事件，但我正在努力寻找解决方法。Stack Overflow 上的几个线程提到了 live() 方法，但如下实现它（以及添加`onclick=""`到可点击元素）似乎不起作用：

```
$('.card').live('click touchstart', function() {
        var figure = $(this).children('.back');
        var button = figure.find('.button');
        var column = $(this).parents().eq(1);
        $('.column').removeAttr('style');
        column.css('z-index', 2000);
        resetFigures();
        if(flipCard(this)){
            swoosh.pause();
            swoosh.currentTime = 0;
            swoosh.play();
        }
    }); 
```

我还遇到了这个有趣的解决方法项目：[http](http://aanandprasad.com/articles/jquery-tappable/) ://aanandprasad.com/articles/jquery-tappable/ 。但是，我也没有运气：

```
$('.card').tappable(function() {
        var figure = $(this).children('.back');
        var button = figure.find('.button');
        var column = $(this).parents().eq(1);
        $('.column').removeAttr('style');
        column.css('z-index', 2000);
        resetFigures();
        if(flipCard(this)){
            swoosh.pause();
            swoosh.currentTime = 0;
            swoosh.play();
        }
    }); 
```

另外，如果我被误导了，请纠正我，但根据这个网站，iOS 支持 3D 转换，并带有适当的前缀：[http ://caniuse.com/transforms3d](http://caniuse.com/transforms3d)

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2013-04-15T01:26:09.913

iOS 没有注册绑定到在 DOM 加载后添加的元素的点击/触摸事件存在问题。

虽然 PPK 有这个建议：[http ://www.quirksmode.org/blog/archives/2010/09/click_event_del.html](http://www.quirksmode.org/blog/archives/2010/09/click_event_del.html)

我发现这很容易解决，只需将其添加到 css 中：

```
cursor: pointer; 
```

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2015-01-14T08:08:22.773

最近在为客户开发 Web 应用程序时，我注意到添加到非锚元素的任何点击事件在 iPad 或 iPhone 上都不起作用。所有台式机和其他移动设备都运行良好 - 但由于 Apple 产品是最受欢迎的移动设备，因此修复它很重要。

事实证明，在 jQuery 中分配了点击处理程序的任何非锚元素都必须具有 onClick 属性（可以为空，如下所示）：

```
onClick="" 
```

或者

元素 css 需要具有以下声明：

```
cursor:pointer 
```

奇怪，但这就是让事情再次正常运转所需要的！
来源： http: [//www.mitch-solutions.com/blog/17-ipad-jquery-live-click-events-not-working](http://www.mitch-solutions.com/blog/17-ipad-jquery-live-click-events-not-working)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T09:05:14.630

您应该绑定点击事件，移动 safari 或 UIWbview 中不存在点击。你也可以使用这个[polyfill](https://github.com/ftlabs/fastclick)来避免触摸链接时的 300 毫秒延迟。

# ruby-on-rails - 随机 rails partials 比预期慢 100 倍

> ID：14795945
> 
> 赞同：4
> 
> 时间：2013-02-10T08:19:20.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3, templates, rendering

我有一个相当大的响应视图分解成结构看起来像这样的部分，其中 * 表示这个部分被多次加载：

`show
-responses
--response*
---comments
----comment*
---comment_form
-stats`

我的问题是，根据页面的大小，这些部分中的大多数需要 10-20 毫秒来渲染，但是其中一些部分需要 800-1000 毫秒来渲染。似乎没有一种模式，如果我快速刷新并且经常不刷新，通常会有相同的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:03:20.683

首先使用

`<%= render partial: 'partial', collection: @collection, as: c %>`

而不是

```
<% @collection.each do |c| %>  
  <%= render partial: 'partial', locals: { c: c } %>  
<% end %> 
```

这很明显，我不知道我为什么不这样做。提供了一些改进，但不是很大。

如果您运行的是 1.9.3，则增加这些环境变量会产生巨大的影响，减少约 20% 的请求：

```
RUBY_HEAP_MIN_SLOTS=600000 # This is 60(!) times larger than default
RUBY_GC_MALLOC_LIMIT=59000000 # This is 7 times larger than default
RUBY_HEAP_FREE_MIN=100000 # This is 24 times larger than default 
```

通过：[http ://www.web-l.nl/posts/15-tuning-ruby-s-garbage-collector-with-rvm-and-passenger](http://www.web-l.nl/posts/15-tuning-ruby-s-garbage-collector-with-rvm-and-passenger)

# url - Nginx 2 参数 URL 重写

> ID：14795949
> 
> 赞同：1
> 
> 时间：2013-02-10T08:19:51.003
> 
> 标签：url, parameters, nginx, rewrite

基本上我有以下网址：

```
http://website.com/details.php?id=10&id=1 
```

我想被改写成

```
http://website.com/details.customextension 
```

我尝试添加以下行：

```
location /details {
  rewrite ^/details\.customextension$ /details.php?id=$1&hit=$2;
} 
```

但是当我点击 details.php 链接时，它会将我重定向到 index.php。

这是 vhost 的 conf 文件：

```
 # You may add here your
# server {
#   ...
# }
# statements for each of your virtual hosts to this file

##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# http://wiki.nginx.org/Pitfalls
# http://wiki.nginx.org/QuickStart
# http://wiki.nginx.org/Configuration
#
# Generally, you will want to move this file somewhere, and start with a clean
# file but keep this around for reference. Or just disable in sites-enabled.
#
# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.
##

server {
    listen   80 default; ## listen for ipv4; this line is default and implied
    #listen   [::]:80 default ipv6only=on; ## listen for ipv6

    root /var/www/website/application;
    index index.php index.html index.htm;

    # Make site accessible from http://localhost/
    server_name website.com www.website.com;

    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
    '$status $body_bytes_sent "$http_referer" '
    '"$http_user_agent" "$http_x_forwarded_for"';

    # Logs
    access_log  /var/www/website/logs/website.access.log  main;

    error_log /var/www/website/logs/website.error.log ;

    # File uploads
    client_max_body_size 10M;
    client_body_buffer_size 128k;

    # Add www to all urls
    if ($host ~* ^([a-z0-9\-]+\.(be|fr|nl|de))$) {
    rewrite ^(.*)$ http://www.$host$1 permanent;
    }

    location / {
        expires 1d;
        # Note that nginx does not use .htaccess.
        # This will allow for SEF URL’s
        try_files $uri $uri/ /index.php?$args;

    }

        # Here we set up static files access and caching
        location ~* ^.+\.(jpg|jpeg|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|exe|pdf|ppt|txt|tar|mid|midi|wav|bmp|rtf|

js)$ {
    access_log off;
    expires max;
        }

    location ~* /(admin|cache|include|install)/ {
    deny all;
    }

        error_page  404              /404.html;
        location = /404.html {  
    root   /usr/share/nginx/www;
    }

        # redirect server error pages to the static page /50x.html
        #
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
    root   /usr/share/nginx/www;
    }

    proxy_cache_key "$host$request_uri$cookie_sessioncookie";

        # Send PHP scripts to FPM on 127.0.0.1:9000
        location ~ \.php$ {
              fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_param  SCRIPT_FILENAME /var/www/public$fastcgi_script_name;
            fastcgi_connect_timeout 60;
            fastcgi_send_timeout 180;
            fastcgi_read_timeout 180;
            fastcgi_buffer_size 128k;
            fastcgi_buffers 4 256k;
            fastcgi_busy_buffers_size 256k;
            fastcgi_temp_file_write_size 256k;
            fastcgi_intercept_errors on;
            include        fastcgi_params;
            expires 0d;
        }

} 
```

我究竟做错了什么？谢谢！

# c++ - c++ char 到 const char*

> ID：14795950
> 
> 赞同：0
> 
> 时间：2013-02-10T08:20:01.173
> 
> 标签：c++, char, type-conversion, constants

我需要将字符数组中的字符转换为 a`const char *`以便使用 fstream 将其打印到文件中。我不确定该怎么做。我尝试将单个字符放入字符串中，然后使用`c_str()`，但这不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:25:28.330

如果你想写一个字符，只需使用`operator<<`：

```
char arr[256] = "...";
fstream f(...);

f << arr[2]; 
```

您不需要将字符转换为 C 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:22:57.710

`char *`嗯...如果你有一个字符数组，当传递给一个函数时它已经衰减了。

如果您只需要一个字符：

```
char array[128]; // whatever - you want to extract the char from this
char s[] = { array[64], 0 }; 
```

然后使用`s`which now 可以衰减为`char *`.

**编辑：** D'oh，我刚读到这个：

> 为了使用 fstream 将其打印到文件中

好吧，那就不要费心将它转换为正确的 C 字符串。`operator<<`知道它的工作，它也超载`char`了。

# jquery - jQuery .toggleClass() 在本地工作，但不在远程服务器上

> ID：14795951
> 
> 赞同：1
> 
> 时间：2013-02-10T08:20:26.197
> 
> 标签：jquery, remote-server, pageload, jquery-hover, toggleclass

请帮忙。此代码在本地有效，但在我将其上传到远程服务器后无效。这似乎不是 cdn 问题，因为我将警报语句作为测试放入。第二个语句用于一个单独的页面，它在那里工作。我在我的html页面底部通过cdn引用jQuery，并在其下方链接到我的javascript文件。任何帮助将不胜感激。

```
$(document).ready(function () {
    $('.thmb').hover(function () {
        var x = $('.thmb').index(this);
        $('.info_art').eq(x).toggleClass("hover-animation");
    });
    $('.thmbs_pdg_div a').click(function (evt) {
        evt.preventDefault();
        var divname = this.name;
        $("#" + divname).show().siblings().hide();
    });
}); 
```

这是我在 html 页面末尾添加的代码：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="javascript/jquery-1.8.2.min.js">  <\/script>')</script>
<script type="text/javascript" src="javascript/artwork.js"></script> 
```

这是页面的网址：[http ://www.kipdeeds.com/artwork_page.html](http://www.kipdeeds.com/artwork_page.html)

关于不工作的页面的一些附加信息：有七个类别，每个类别的文本都是精灵（例如“纸上”、“新艺术”等）。当一个人悬停时，位置应该会移动，显示带有箭头图标的文本的新图像。我正在编写的程序将允许相应的图像图标在显示文本的精灵中产生相同的效果。

现在我不会修改代码，直到我得到反馈（想法比我的好）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:14:36.220

你的JS很好。

问题是您的 CSS 和图像的差异。这是你的CSS：

```
a.art_paper {
    background: url("../assets/artwork_page/on_paper.gif") repeat scroll 0 0 transparent;
    display: block;
    height: 20px;
    margin-top: 33px;
    width: 95px;
}

a:hover, #artwork_main_div .hover-animation {
    background-position: 0 -100px;
} 
```

她是你的图片：![在此处输入图像描述](../Images/b3f05e742f3e1cd319b58fca17746cd2.png)（95px x 20px）

你无限重复你的背景图像，它恰好是 20px 高。当`.hover-animation`该类处于活动状态时，它会将背景向下滑动 100 像素，这将带您进行图像的第 5 次 (100/20=5) 垂直迭代......看起来与原始图像完全相同。

![在此处输入图像描述](../Images/b4bf4c723ec7a08cd00a40152a24f3f3.png)

# javascript - 点击事件未在移动目标上触发

> ID：14795954
> 
> 赞同：6
> 
> 时间：2013-02-10T08:20:43.810
> 
> 标签：javascript, javascript-events

我正在编写一个带有移动球的 javascript 游戏。当用户设法单击移动球时，我想要一条警报消息。它现在正在工作，但事件并不是每次都触发......看起来球移动得太快，js引擎无法注意到球确实被点击了。我正在一个 5 岁的 cpu 上测试 Firefox 18、windows 7 ...

这是我的一些代码：

```
myBall = document.getElementById("myBall");
function move(){
    myLeft += 20;
    myBall.style.left = myLeft + "px";
}    
myTimer = window.setInterval(move, 10);
...
myBall.addEventListener("click", function(){alert("win")}); 
```

有没有办法在一个小的移动目标上设置一个点击事件侦听器，这会更准确？jQuery 在这里会有什么不同吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T08:58:16.587

好的，要解决您遇到的问题，您需要添加事件侦听器`mousedown`而不是`click`.

这是因为`click`需要鼠标按钮同时向下和向上，并且 - 正如@techfoobar 指出的那样 - 它必须在目标元素上的同一位置完成（如果`mousedown`和的坐标`mouseup`不相等，`click`则不会触发事件）。球只是移动得太快而无法满足上述条件，因此出现了问题。

# php - 来自数据库记录的多级菜单

> ID：14795956
> 
> 赞同：4
> 
> 时间：2013-02-10T08:21:48.507
> 
> 标签：php, mysql

我需要一些关于 PHP 的帮助。我有一个可以正常工作的多级 css 菜单，但现在我想根据数据库中的记录生成。

**菜单代码：**

```
<div id="page-wrap">
    <ul class="dropdown">
        <li><a href="#">Link 1</a> </li>
        <li><a href="#">Link 2</a> </li>
        <li><a href="#">Link 3</a> </li>
        <li><a href="#">Link 4</a>
        <ul class="sub_menu">
            <li><a href="#">Link 4 - 1</a></li>
            <li><a href="#">Link 4 - 2</a></li>
            <li><a href="#">Link 4 - 3</a></li>
        </ul>
        </li>
        <li><a href="#">Link 5</a></li>
        <li><a href="#">Link 6</a> </li>
    </ul>
</div> 
```

在数据库中，每条记录都有一个名为**main_manu的字段，如果该字段的值为****Yes**则使其成为主链接，如果值为**No**那么它有另一个字段 ( **sub_menu** ) 表示此链接应位于的父菜单放置。！请参阅屏幕截图。 [DB Fields](http://i.stack.imgur.com/9l4ii.png)

SO，现在我不知道如何做将获取记录的php片段，如果main_menu的值为yes，它将创建一个顶级菜单，如果**main_menu**的值为no，它将根据**sub_menu**字段的值创建子级菜单。

非常感谢

**更新**

这是我到目前为止的代码，它可以工作。如果我可以使用单个查询而不是多个嵌套查询，那就太好了。

```
<div id='page-wrap'>
    <ul class='dropdown'>
<?

$sql_menu = "SELECT * FROM content WHERE visible = '1' and main_menu='yes' ";
$result_menu = mysql_query($sql_menu); 
while($row = mysql_fetch_assoc($result_menu))
 {
$id=$row['id'];
$menu_top=$row['menu_name'];
$menu_url=$row['menu_url'];

print "<li><a href='$menu_url'>$menu_top</a>";

$sql_sub = "SELECT * FROM content WHERE sub_menu = '$menu_url' ";
$result_sub = mysql_query($sql_sub);
$num_rows = mysql_num_rows($result_sub);

while($row = mysql_fetch_assoc($result_sub))
 {
$id=$row['id'];
$menu_sub=$row['menu_name'];
$sub_url=$row['menu_url'];
If ($num_rows != 0)
{
print "<ul class='sub_menu'>
            <li><a href='$sub_url'>$menu_sub</a></li>
       </ul>";
}
}
print "</li>";
}
?>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:43:29.580

我认为这些链接会帮助你。如果没有，请告诉我，我会给你代码

[http://board.phpbuilder.com/showthread.php?10337808-how-to-create-menu-submenu-subsubmenu-using-php-mysql](http://board.phpbuilder.com/showthread.php?10337808-how-to-create-menu-submenu-subsubmenu-using-php-mysql)

[http://www.sitepoint.com/forums/showthread.php?718237-how-to-create-dynamic-menu-and-submenu-using-php-and-mysql](http://www.sitepoint.com/forums/showthread.php?718237-how-to-create-dynamic-menu-and-submenu-using-php-and-mysql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:40:49.213

代码将类似于以下内容（无论您与数据库交互的任何方式，都需要更改此代码等）：

```
// Here we do a query to get all the rows from the table
$db_result = db_execute_query('SELECT * FROM `menu_table` ORDER BY `order_no`');

// Here we take the rows and put it into a structured array
$items = array();
$hierarchy = array('' => array());
while ($row = db_fetch_row($db_result)) {
    $items[$row['menu_name']] = $row['menu_name_en'];
    if ($row['main_menu'] == 'yes') {
        $hierarchy[''][] = $row['menu_name'];
    } else {
        if (!isset($hierarchy[$row['sub_menu']]) {
            $hierarchy[$row['sub_menu']] = array();
        }
        $hierarchy[$row['sub_menu']][] = $row['menu_name'];
    }
}

// Here we define a recursive function to run through our $hierarchy array;
function show_menu($name = '') {
    if (isset($hierarchy[$name])) {
        if ($name == '') {
                echo '<ul class="dropdown">';
        } else {
                echo '<ul class="sub_menu">';
        }

        foreach ($hierarchy[$name] as $sub) {
            echo '<li><a href="#">' . $items[$sub] . '</a>';
            show_menu($sub);
            echo '</li>';
        }

        echo '</ul>';
    }
}

// Here we execute the recursive function on the main menu
show_menu(''); 
```

试着理解我在这里做什么，而不是逐字执行。一旦你了解了递归函数，一个全新的世界就会为你打开。

另请注意，可以更改您的数据库表以使此代码更简单

# wcf - 在 Umbraco 中托管具有身份验证的自定义 WCF 服务

> ID：14795958
> 
> 赞同：1
> 
> 时间：2013-02-10T08:22:41.247
> 
> 标签：wcf, authentication, umbraco, membership-provider

我在 Umbraco 中创建了一个自定义 WCF 服务。该服务驻留在`Service`文件夹中，似乎工作正常（我可以调用它，它会适当地响应）。现在我希望用户在调用服务时进行身份验证。

为此，我已将这些行添加到`web.config`：

```
<system.serviceModel>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" aspNetCompatibilityEnabled="true" />
 <bindings>
  <webHttpBinding>
    <binding name="RaceManBinding">
      <security mode="None" />
    </binding>
  </webHttpBinding>
</bindings>
<services>
  <service name="RaceManagerAdmin.RaceManDataService" behaviorConfiguration="RaceManBehavior">

    <endpoint address=""
              binding="webHttpBinding"
              contract="System.Data.Services.IRequestHandler" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="RaceManBehavior">
      <serviceCredentials>
        <userNameAuthentication userNamePasswordValidationMode="MembershipProvider"
                                membershipProviderName="UmbracoMembershipProvider" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>
</system.serviceModel> 
```

当我的服务被调用时，它应该使用 Umbraco 会员提供者来验证用户。

我的客户通过创建一个网络凭证对象来指定这一点，如下所示：

```
var a = new RaceEntities(new Uri("http://localhost:40406/umbraco/Webservices/RaceManDataService.svc")) { Credentials = new NetworkCredential("admin", "secret") }; 
```

当我检查时，`HTTPContext.Current`我没有看到任何经过身份验证的用户。

我究竟做错了什么？

弗雷德里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:44:53.027

您需要启用 ASP.Net 兼容性才能通过 HttpContext 访问身份：

```
<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"/>
</system.serviceModel> 
```

这个问题的答案提到了另一种方法：[How to access HttpContext.Current.User.Username in WCF service](https://stackoverflow.com/questions/6747263/how-to-access-httpcontext-current-user-username-in-wcf-service)

# sql-server - 在 SQL Server 2008 R2 Express 上设置发布

> ID：14795960
> 
> 赞同：3
> 
> 时间：2013-02-10T08:22:44.980
> 
> 标签：sql-server, replication, sql-server-express, sql-server-2008r2-express

我在 SQL Server Management Studio 的节点复制中找不到本地发布文件夹。

我最近安装了 SQL Server 2008 R2 Express 版本。

我还创建了两个实例用于测试目的。

[此处](https://stackoverflow.com/questions/3160093/cant-locate-local-publications-folder-under-replication-folder-in-sql-server-20)提供了 SQL Server 2005 的解决方案，但不适用于 SQL Server 2008 R2 Express

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:13:19.043

根据[Replication Considerations (SQL Server Express)](http://msdn.microsoft.com/en-in/library/ms165686%28v=sql.105%29.aspx)，SQL Server Express Edition 实例不能用作发布者或分发者：

> SQL Server Express 不能用作发布者或分发者。

但是，SQL Server Express Edition 实例可以用作订阅者。

您将需要 SQL Server Standard Edition 实例或更高版本来配置发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T08:46:53.613

在一个地方总结评论 - 所以它可以帮助其他人，

SQL 2008 Express 不能用作发布者，但可以用作订阅者。

阅读 MSDN 以了解更多[复制注意事项 (SQL Server Express)](http://msdn.microsoft.com/en-in/library/ms165686%28v=sql.105%29.aspx)

# ruby-on-rails-3 - 如何调试不返回成功或失败的 Delayed::Worker.work_off

> ID：14795961
> 
> 赞同：2
> 
> 时间：2013-02-10T08:22:55.010
> 
> 标签：ruby-on-rails-3, rspec, delayed-job

我正在使用 Rspec 测试我的 Delayed::Job。

在我的 rspec_controller 中：

```
 it "queues up delayed job and fires" do
    setup        
    expect {
    post :create, {:job => valid_attributes}
    }.to change(Delayed::Job, :count).by(2)     

    Delayed::Worker.new.work_off.should == [2,0]

  end 
```

Delayed::Job.count按预期通过，但Delayed::Worker.new.work_off返回[0,0]，表示有2个job时成功0次，失败0次。

我应该如何调试以找出 work_off 不解雇工作的原因。

**编辑**：应该运行的 2 个作业将它们的 run_at 设置为未来。work_off 是否会触发不应该立即执行的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:56:06.413

构造

```
Delayed::Worker.new.work_off 
```

立即处理 DJ 队列中的所有内容，并且与调用者在同一个线程中（它不会产生单独的工作线程）。但这并不能解释为什么你没有得到 [2, 0] 的结果。

要回答您最初的问题“我应该如何调试以找出 work_off 不触发作业的原因？”，我建议您使用回调挂钩来跟踪作业的生命周期。如果需要向您展示如何执行此操作，请添加评论... :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T09:41:02.417

虽然这可能是一个较老的问题，但有一个参数没有太多记录，请尝试使用

```
Delayed::Worker.new(quiet: false).work_off 
```

调试后台作业的结果，这可以帮助您找出它们应该在未来运行的事实是否与断言本身混淆。

编辑：完成后不要忘记取消“quiet:false”，否则您的测试将始终输出后台作业的结果。

# asp.net-web-api - 如何使用 Jaydata Web api 提供程序调用特定的操作名称？

> ID：14795965
> 
> 赞同：2
> 
> 时间：2013-02-10T08:23:38.820
> 
> 标签：asp.net-web-api, jaydata

我的 Web Api 控制器中有多个“HttpGet”操作，我想明确告诉 Jaydata 提供者使用特定的操作名称来获取请求，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:48:30.433

抱歉，目前不支持，但会支持。您可以将此添加到我们的待办事项或打开 github 问题...如果您非常需要此功能，那么您可以从我们这里购买支持服务并请求此功能。解决此问题的另一种方法是将 oData 与 WebApi 一起使用，此功能适用。

# c# - 存储更新、插入或删除语句影响了 EF5 中意外的行数 (0)

> ID：14795967
> 
> 赞同：2
> 
> 时间：2013-02-10T08:24:08.957
> 
> 标签：c#, entity-framework, entity-framework-5

我已经尝试了这个错误的很多变体，但都失败了。这就是我问的原因。我收到此错误，

> 存储更新、插入或删除语句影响了意外数量的行 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目

这是我的代码，

```
 var page = .....;// page Construction
        var oldPage = pageRepository.GetPageByID(id);
        if (oldPage != null){
             page.ModifiedDate = DateTime.Now;
             context.Entry(page).State = EntityState.Modified;
        }
        else{
              page.ModifiedDate = DateTime.Now;
              page.CreatedDate = DateTime.Now;
             context.Pages.Add(page);
        }
        pageRepository.Save(); 
```

# php - php codeigniter 数据库查询

> ID：14795974
> 
> 赞同：0
> 
> 时间：2013-02-10T08:25:12.107
> 
> 标签：php, mysql, codeigniter

我想这样回答

[“巴丁”，“巴哈瓦尔纳加尔”，“巴哈瓦尔普尔”]

但是当我运行查询时

```
if ($result->num_rows() > 0)
    {   
        echo '[';
        foreach($result->result() as $listing)
        {
            echo '"'.$listing->city_name.'"';
            if ($listing->city_name!='')
            {
                echo ',';
            }
        }
        echo ']';
    } 
```

然后我在最后一次昏迷了请帮我删除这个

我想删除最后的昏迷 ["Badin","Bahawalnagar","Bahawalpur",]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:31:11.293

您的代码应如下所示：

```
if ($result->num_rows() > 0)
{   
    echo '[';

    foreach($result->result() as $key => $listing)
    {
        $row = $key+1;

        if ($listing->city_name != '')
        {
            echo '"'.$listing->city_name.'"';

            // If it's not last item, then add a comma
            if ($row < $result->num_rows())
            {
                echo ',';
            }
        }
    }
    echo ']';
} 
```

我还假设，如果城市名称为空，您不想回显城市名称，否则您最终会得到 empty `""`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T08:33:47.797

您的输出与 json 可疑地相似，一旦您获得城市名称，也许直接 json_encode() 就足够了：

```
$cities = array();
foreach($result->result() as $listing) {
   $cities = $listing->city_name;
}
$cities = array_values(array_filter($cities)); // removes the empty ones, reset the indexes

echo json_encode($cities); 
```

此外，您也可以使用 implode() 进行这样的连接：

```
echo '["'.implode('","', $cities).'"]'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T04:36:56.863

您可以使用 json_encode 来执行此操作

```
if($result->num_rows > 0){
  foreach ($result->result_array() as $row){

    $new_row['label']=htmlentities(stripslashes($row['user_name']));
     $new_row['val']=htmlentities(stripslashes($row['user_id']));

    $row_set[] = $new_row; //build an array
  }
  echo json_encode($row_set); //format the array into json data
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T13:20:23.863

您可以将结果连接到变量中并修剪最右边的“，”。

```
if ($result->num_rows() > 0)
    {   
    $my_result = '';
        echo '[';
        foreach($result->result() as $listing)
        {
            $my_result .=  '"'.$listing->city_name.'"';
            if ($listing->city_name!='')
            {
                $my_result .= ',';
            }
        }

    $my_result = rtrim($my_result , ",");

    echo $my_result;
        echo ']';
    } 
```

# xamarin.ios - 从标签栏导航到详细信息

> ID：14795988
> 
> 赞同：2
> 
> 时间：2013-02-10T08:27:53.730
> 
> 标签：xamarin.ios

所以我在 monotouch 中创建了默认的 TabBar 示例。在我的例子中，我已经用 tableviews 替换了两个 viewcontrollers 的内容。

现在，一旦最终用户单击一行，我们应该能够导航到不是选项卡之一的详细信息页面。

在里面：

```
 public override void RowSelected (UITableView tableView, NSIndexPath indexPath) 
```

部分我似乎无法使用 pushviewcontroller。有这样的例子吗？我已经看到在 rowselected 中显示警报的示例：

```
 new UIAlertView ("Row Selected", rows [indexPath.Row].Title, null, "OK", null).Show ();
  tableView.DeselectRow (indexPath, true); 
```

但我正在尝试导航到一个不是选项卡之一的详细信息页面。

有什么帮助吗？我是 Mono 的新手，所以任何示例代码都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:43:44.113

还有很多其他问题可以帮助解决这个问题：

*   [单点触控中的 UITableView 导航](https://stackoverflow.com/questions/14785320/uitableview-navigation-in-monotouch)
*   [在 tableview 中选择特定行时如何导航到视图控制器？](https://stackoverflow.com/questions/9563546/how-to-navigate-to-a-view-controller-when-a-specific-row-is-selected-in-tablevie)

MonoTouch 文档也有很多好东西 - 在[http://docs.xamarin.com/ios/Guides/User_Interface/Tables](http://docs.xamarin.com/ios/Guides/User_Interface/Tables)上下载并运行示例，您很快就会成为大师。

[NavItemTableSource.cs](https://github.com/xamarin/monotouch-samples/blob/master/TableAndCellStyles/TableAndCellStyles/Code/NavigationTable/NavItemTableSource.cs)中的示例可能对您特别有用。

# wpf - WPF动态更改布局的最佳方法

> ID：14795990
> 
> 赞同：2
> 
> 时间：2013-02-10T08:28:01.277
> 
> 标签：wpf, wpf-controls

我开始构建一个 C# WPF 应用程序，我想要一个带有多个“屏幕”（实际上是另一个屏幕）的控件`UserControl`，但我想让用户在几个布局预设之间进行选择。
例如 - 将该主控件拆分为 4/9/16/64 个窗口，或者在中间有一个大窗口，在边缘有一个小窗口。
所以我知道如何构建每个“模式”的布局，但我应该如何在它们之间切换？
毕竟，我想拥有一个主控件，其方法如下：

```
mainControl.SwitchMode(Modes.LAYOUT_4_SCREENS); 
```

并且控件将以优雅的方式更改布局（讲代码），并将每个屏幕（另一个`UserControl`）放置在正确的位置。
有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T12:12:46.597

您可能会以编程方式更改包装网格的内容。在不同的网格中，您可以构建您的布局。但我认为对开发人员更友好的方法是简单地创建不同的视图（用户控件），然后将包装网格的内容切换到不同的用户控件，即

```
<Grid x:Name="LayoutRoot">
</Grid> 
```

代码隐藏：

```
Layout4ScreenView screenView4 = new Layout4ScreenView();
Layout2ScreenView screenView2 = new Layout4ScreenView();

Switch(LayOut)
{
case Mode.LAYOUT_4_SCREENS:
LayoutRoot.Content = screenView4;
break;

case Mode.LAYOUT_2_SCREENS:
LayoutRoot.Content = screenView2;
break;

} 
```

# spring-mvc - @Responsebody Spring 3-如何配置选择哪个 MessageConverter。

> ID：14795993
> 
> 赞同：1
> 
> 时间：2013-02-10T08:28:21.513
> 
> 标签：spring-mvc

任何人都可以帮助我如何将 AnnotationMethodHandlerAdapter 配置为根据来自客户端的 Accept Header 值选择不同的 MessageConverter 写入 responsebody。

解释 responsebody 注释的工作将有很大帮助。

# java - 如何将 jFrame 设置为始终位于顶部并启用焦点，直到它关闭？

> ID：14795995
> 
> 赞同：11
> 
> 时间：2013-02-10T08:29:11.290
> 
> 标签：java, swing, jframe

我的程序中有两个不同的框架，当我单击 jButton 时打开的第二个框架是第一个框架，所以当第二个框架打开时，我希望第二个框架始终位于顶部并聚焦直到它关闭。在关闭第二个窗口之前，不允许用户在第一个窗口中执行任何操作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-02-10T08:34:07.983

```
JFrame frame = new JFrame ();
frame.setAlwaysOnTop (true); 
```

如果您希望框架始终保持焦点，您可能需要使用模态对话框而不是 JFrame：

```
JDialog dialog = new JDialog ();
dialog.setModal (true);
dialog.setAlwaysOnTop (true);
dialog.setModalityType (ModalityType.APPLICATION_MODAL); 
```

# javascript - 可以在 d3.js 中使用具有固定圆圈大小的圆圈包布局吗？

> ID：14795996
> 
> 赞同：8
> 
> 时间：2013-02-10T08:29:17.387
> 
> 标签：javascript, svg, d3.js, circle-pack

这个圆形包布局示例 ( [http://bl.ocks.org/4063269](http://bl.ocks.org/4063269) ) 非常适合我正在从事的一个项目，但是它会相对于彼此调整所有圆圈的大小：

![在此处输入图像描述](../Images/8804b597284df605136a2a9796b04a9c.png)

有没有一种简单的方法来为每个圆指定固定半径？

我搜索了源代码、示例、google 和 stackoverflow，似乎找不到任何有用的东西。

圆圈的确切大小对我来说很重要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-26T11:14:16.277

这是可能的，而且做起来很简单。第一个答案是准确的，但我相信我的答案更简单、更明确，所以我也附上它。

请看一下这个例子：[jsfiddle](http://jsfiddle.net/VividD/WDCpq/8/)

当你按下“Constant”按钮时，你会看到这样的东西：

![在此处输入图像描述](../Images/aa7baa487df80b4530967ba800528673.png)

关键代码行是这样的：

```
 pack.value(function(d) { return 100; }) 
```

这将使圆半径与数据无关。当然，100 可以是任何常数。您可以在循环包初始化（很可能是您的情况）或重新初始化（如我的示例中）中应用此行。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T22:19:35.267

如果您按照给出的示例中的代码进行操作，则`<circle>`元素的大小将在此处确定：

```
node.append("circle")
  .attr("r", function(d) { return d.r; })
// ... 
```

要将圆圈的大小固定为`50`，您可以执行以下操作：

```
node.append("circle")
  .attr("r", function(d) { return 50; })
// ... 
```

* * *

# 更新

但是，这将破坏评论中指出的布局。为了解决这个问题，可以为`value`每个节点提供相同的：

```
// Returns a flattened hierarchy containing all leaf nodes under the root.
function classes(root) {
  var classes = [];

  function recurse(name, node) {
    if (node.children) node.children.forEach(function(child) { recurse(node.name, child); });
    else classes.push({packageName: name, className: node.name, value: node.size});
  }

  recurse(null, root);
  return {children: classes};
} 
```

至：

```
// Returns a flattened hierarchy containing all leaf nodes under the root.
function classes(root) {
  var classes = [];

  function recurse(name, node) {
    if (node.children) node.children.forEach(function(child) { recurse(node.name, child); });
    else classes.push({packageName: name, className: node.name, value: 1});
  }

  recurse(null, root);
  return {children: classes};
} 
```

# c# - 如何知道用户是否通过 facebook 登录

> ID：14795997
> 
> 赞同：3
> 
> 时间：2013-02-10T08:29:30.687
> 
> 标签：c#, dotnetnuke, dotnetnuke-6, dotnetnuke-module

我的本地主机上同时运行了 DNN 6.2 和 DNN 7.0。

我已成功设置 facebook 身份验证并让 facebook 登录正常工作。

现在，通过代码我如何知道用户是否通过 facebook 登录以及如何获取他的 facebook ID、他的朋友信息等，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-10T07:04:30.823

请检查您的 AuthType 变量，它将映射到 Facebook 或服装身份验证类型。