# StackOverflow 问答 15423000-15423999

# php - \r \t 和 \n 有什么不同？

> ID：15423001
> 
> 赞同：14
> 
> 时间：2013-03-15T01:06:35.507
> 
> 标签：php, escaping, character

在下面的代码中，我不知道这些字符在功能上有何不同：\r \t \n。有人对这些有解释或描述吗？

这是一些示例代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <title>Sorting words in a block of text by length</title>
        <link rel="stylesheet" type="text/css" href="common.css" />
    </head>
    <body>
        <h1>Sorting words in a block of text by length</h1>

<?php

$myText = <<<END_TEXT
But think not that this famous town has 
only harpooneers, cannibals, and 
bumpkins to show her visitors. Not at 
all. Still New Bedford is a queer place. 
Had it not been for us whalemen, that 
tract of land would this day perhaps 
have been in as howling condition as the 
coast of Labrador.
END_TEXT;

echo "<h2>The text:</h2>";
echo "<div style=\"width: 30em;\">$myText</div>";

$myText = preg_replace( "/[\,\.]/", "", $myText );
$words = array_unique( preg_split( "/[ \n\r\t]+/", $myText ) );
usort( $words, create_function( '$a, $b', 'return strlen($a) - strlen($b);
' ) );

echo "<h2>The sorted words:</h2>";
echo "<div style=\"width: 30em;\">";

foreach ( $words as $word ) {
    echo "$word ";
}
echo "</div>";

?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-15T01:10:26.923

`\n`是新行的符号

`\t`是制表符的符号

并且`\r`是为了“返回”

您可以在此处找到更多信息：[\r 和 \n 有什么区别？](https://stackoverflow.com/questions/1279779/what-is-the-difference-between-r-and-n)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-15T01:15:09.587

该`\n`符号的字面意思是*新行*。这将转到下一个新行的开头。

该`\t`符号表示*添加一个制表符*（通常为 4 个空格，但根据上下文可以轻松为 2 或 8 个）。

该`\r`符号不再经常使用。这意味着*回车*，这意味着*转到行首*。它与`\n`确保即使“旧”打印机也能到达下一行的开头一起使用。

# scrollbar - 滚动条不会显示 - Jscrollpane 插件

> ID：15423008
> 
> 赞同：1
> 
> 时间：2013-03-15T01:08:14.570
> 
> 标签：scrollbar, jscrollpane

我目前在使用插件 jScrollPane] 时遇到了一个恼人的问题（我正在使用的演示：tympanus.net/Tutorials/ScrollbarVisibility）。

我已经链接了我的 HTML 表（js 和 css）头部所需的所有文件，但似乎我错过了一些东西。即使我对 JS 不是很熟悉，但我已经使用了很多插件，并且总能设法让它们工作。但是这个很难。

我希望左侧边栏的中间部分滚动，并在不需要时隐藏滚动条。现在它不滚动。

我正在开发的网站在这里：[http ://denislefevre.com/gmapstfe1.2](http://denislefevre.com/gmapstfe1.2)

有人能帮我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:38:16.883

在包含任何其他 JS 库之前，您必须包含 jQuery 库。

Chrome 的脚本调试器派上用场了

```
Uncaught ReferenceError: jQuery is not defined jquery.mousewheel.js:78
Uncaught ReferenceError: jQuery is not defined jquery.jscrollpane.min.js:11
Uncaught ReferenceError: jQuery is not defined scroll-startstop.events.jquery.js:3
Uncaught TypeError: Object [object Object] has no method 'jScrollPane' denislefevre.com:204
Uncaught TypeError: Cannot read property 'style' of null denislefevre.com:125 
```

# ibm-mobilefirst - 搜索字段中“数字”和“整数”之间的 JSONStore 差异

> ID：15423015
> 
> 赞同：2
> 
> 时间：2013-03-15T01:08:55.367
> 
> 标签：ibm-mobilefirst, jsonstore

我有一个关于 JSONStore searchFields 的问题。

如果我`number`用作 searchFields 键并尝试通过作为查询的`WL.JSONStore.find`方法查找数据`0`，它将命中所有数据（未过滤）。

使用上述`integer`情况可以正常工作。

`number`和有什么区别`integer`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T06:01:29.257

JSONStore 使用 SQLite 来持久化数据，您可以[在此处](http://www.sqlite.org/datatype3.html)阅读有关 SQLite 数据类型的信息。简短的回答是`number`将数据存储为，`REAL`而`integer`将数据存储为`INTEGER`.

如果您创建一个名为的集合`nums`，其中一个名为的 searchField`num`类型为`number`

```
var nums = WL.JSONStore.initCollection('nums', {num: 'number'}, {}); 
```

并添加一些数据：

```
var len = 5;
while (len--) {
    nums.add({num: len});
} 
```

然后`find`使用查询调用：`{num: 0}`

```
nums.find({num: 0}, {onSuccess: function (res) {
    console.log(JSON.stringify(res));
}}) 
```

你应该回来：

```
[{"_id":1,"json":{"num":4}},{"_id":2,"json":{"num":3}},{"_id":3,"json":{"num":2}},{"_id":4,"json":{"num":1}},{"_id":5,"json":{"num":0}}] 
```

请注意，您取回了所有存储的文档（num = 4、3、2、1、0）。

如果您查看 .sqlite 文件：

```
$ cd ~/Library/Application Support/iPhone Simulator/6.1/Applications/[id]/Documents
$ sqlite3 jsonstore.sqlite 
```

（android文件应该在下`/data/data/com.[app-name]/databases/`）

```
sqlite> .schema
CREATE TABLE nums ( _id INTEGER primary key autoincrement,  'num' REAL, json BLOB, _dirty REAL default 0, _deleted INTEGER default 0, _operation TEXT); 
```

注意 num 的数据类型是`REAL`。

运行与 find 函数中使用的查询相同的查询：

```
sqlite> SELECT * FROM nums WHERE num LIKE '%0%';
1|4.0|{"num":4}|1363326259.80431|0|add
2|3.0|{"num":3}|1363326259.80748|0|add
3|2.0|{"num":2}|1363326259.81|0|add
4|1.0|{"num":1}|1363326259.81289|0|add
5|0.0|{"num":0}|1363326259.81519|0|add 
```

注意`4`存储为`4.0`JSONStore 的查询始终使用`LIKE`，任何带有 a 的 num`0`都将匹配查询。

如果您`integer`改用：

```
var nums = WL.JSONStore.initCollection('nums', {num: 'integer'}, {}); 
```

查找回报：

```
[{"_id":5,"json":{"num":0}}] 
```

这`schema`表明 num 具有`INTEGER`数据类型：

```
sqlite> .schema
CREATE TABLE nums ( _id INTEGER primary key autoincrement,  'num' INTEGER, json BLOB, _dirty REAL default 0, _deleted INTEGER default 0, _operation TEXT);

sqlite> SELECT * FROM nums WHERE num LIKE '%0%';
5|0|{"num":0}|1363326923.44466|0|add 
```

为简洁起见，我跳过了一些`onSuccess`和所有的`onFailure`回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T06:11:38.037

JSON数字和整数之间的实际区别是

```
defining {age: 'number'} indexes 1 as 1.0,
while defining{age: 'integer'} indexes 1 as 1. 
```

希望你能理解

# css - Phonegap 中 CSS 与其他 DOM 的顺序

> ID：15423020
> 
> 赞同：0
> 
> 时间：2013-03-15T01:09:25.737
> 
> 标签：css, cordova, loading

下面是我在 HTML 中的 head 部分的一部分。我发现我的页面内容总是在 jquery.css 之前加载，因此布局非常简单，并在 0.5 秒加载时间后返回所需的布局。我应该如何修改代码以避免纯内容？它与设备就绪有关吗？在之前，href 是超链接，之后，我将其更改为本地文件。令我惊讶的是，即使是本地文件，它也使用 0.5 秒来加载它，而不是立即加载它。

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
<link rel="stylesheet" type="text/css" href="css/index.css">
<link rel="stylesheet" href="jquery.mobile-1.0a1.min.css" />
<script src="jquery-1.4.3.min.js"></script>
<script src="jquery.mobile-1.0a1.min.js"></script>
<script type="text/javascript" charset="utf-8">

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        document.addEventListener("backbutton", onBackKeyDown, false);
        document.addEventListener("menubutton", showConfirm, false);
    }

</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:58:12.147

尝试将加载 Cordova-2.3.0.js 的行移到加载 CSS 的行下方。所以像：

```
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="css/index.css">
<link rel="stylesheet" href="jquery.mobile-1.0a1.min.css" />
<script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
<script src="jquery-1.4.3.min.js"></script>
<script src="jquery.mobile-1.0a1.min.js"></script>
<script type="text/javascript" charset="utf-8">

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    document.addEventListener("backbutton", onBackKeyDown, false);
    document.addEventListener("menubutton", showConfirm, false);
}

</head> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T16:59:26.117

它在我将 jquery mobile 和 jquery 更改为最新版本后工作............

# windows-7 - Windows 7 上的 DXGI 和 2+ 全屏显示

> ID：15423021
> 
> 赞同：1
> 
> 时间：2013-03-15T01:09:27.227
> 
> 标签：windows-7, fullscreen, multiple-monitors, dxgi

我正在开发一个需要两个全屏 Direct3D 显示器的程序。根据[文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ee417025%28v=vs.85%29.aspx#multiple_monitors)，我应该在窗口模式下创建交换链，然后切换到全屏模式。虽然这在 Windows 8 上运行良好（目前我只是使用 Alt-Enter 进行切换），但它在 Windows 7 上不起作用。在 Windows 7 上，我遇到了与最近出现的屏幕类似的[问题](https://gamedev.stackexchange.com/questions/47880/d3d-dxgi-handle-fullscreen-transition)切换到全屏工作正常，但之前在全屏下工作正常的另一个屏幕变黑（并保持相同的全屏分辨率），直到我将其从全屏中取出。

[你可以在这个标签](http://github.com/AllenPestaluky/InputLagTimer/tree/DXGI)上找到我乱七八糟的粗略原型。

显然，过去还有[其他专门与 Windows 7 相关](http://scalibq.wordpress.com/2012/05/25/the-story-of-multi-monitor-rendering/)的错误……但我似乎遇到了一个略有不同的问题。

另外，我尝试禁用链接问题中建议的 DWM 组合，但这并没有解决问题。

如果我可以提供有关该问题的更多信息，请告诉我...我想最坏的情况是我只是退回到 DX9，这显然适用于多显示器全屏设置...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T16:58:19.680

我想我可能已经找到了问题的原因：可能是因为我为同一个适配器创建了多个 ID3D11Device。

我的代码对于我需要的东西来说过于复杂，因为我遵循[本文](http://scalibq.wordpress.com/2012/05/25/the-story-of-multi-monitor-rendering/)中介绍的技术，而实际上我只需要一个线程来处理所有窗口和渲染。在为每个渲染目标（每个输出一个渲染目标，每个适配器一个 ID3D10Device）共享相同的 ID3D10Device 之后，我已经成功获得 DXGI 和 DX10 渲染两个全屏显示，如我[粗略的内存泄漏概念证明](https://github.com/AllenPestaluky/InputLagTimer/tree/Single_DXGI_Device)所示。

由于这是我第一次使用这种技术，我使用这篇文章来帮助我完成这个过程：[Display Different images per monitor directX 10](https://stackoverflow.com/questions/10744788/display-different-images-per-monitor-directx-10?answertab=active#tab-top)

# php - PHP找到给定$haystack和$needle的最接近的数字

> ID：15423023
> 
> 赞同：1
> 
> 时间：2013-03-15T01:09:30.217
> 
> 标签：php, arrays

真正寻找解决方案（我知道有人问过类似的问题）并试图用“英语”理解如何思考代码。

我想在给定某个数字的数组中找到最接近的数字；下面的代码是我迄今为止所拥有的。

```
//Array of numbers
$haystack = array(1,4,67,34,12,76,6,8,45,2);

//Number which we are finding the closest
$needle = 4;

sort($haystack);

foreach($haystack as $number){
    if($number > $needle){
        $difference = array($number-$needle);
        $smallest_num = array_shift($difference);
        echo $smallest_num.", "; //Echos out 2, 4, 8, 30, 41, 63, 72,
    }
} 
```

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:14:55.933

[对于这种情况，二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)看起来是个不错的选择。

它比这要复杂一些（例如，您拥有`1,5,6`并且正在寻找`4`。您查看 5 并取左半边，即 1。这意味着您必须返回并取 5，因为它更接近），但是您应该能够将其用作基本算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T01:03:51.173

这是我想出的一个小函数，`usort`用于返回整个 Haystack，按与 Needle 的接近程度排序。我在函数之后提供的示例应该 echo `77`。（对不起，如果评论有点过分，我喜欢我的文档是防白痴的。）

```
// Sorts the array by closest to given number
function Find_Closest($Haystack, $Needle)
{
    $GLOBALS['Needle'] = $Needle; // allows $Needle to be accessible inside Compare()
    // Comparison function used by usort() to determine which number is closest to the needle
    if(!function_exists('Reviews_By_Date_Published')) // Only declare function if it hasn't already been declared
    {
        function Compare($A, $B)
        {
            global $Needle;
            $DistanceB = abs($B - $Needle);
            $DistanceA = abs($A - $Needle);
            return($DistanceA - $DistanceB);
        }
    }
    usort($Haystack, 'Compare'); // Sorts the Haystack by closest to Needle, using Compare()
    return $Haystack;
}

    // Example:
    $ArrayInQuestion = array(3,4,8,3,6,77,3,5,85,1,24,3);
    $SortedArray = Find_Closest($ArrayInQuestion, 76);
    $Closest = $SortedArray[0];
    echo "Closest = $Closest"; 
```

请注意，我的函数假定数组实际上是数组而不是其他数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:32:27.673

我想出的最简单的函数（它不断拆分数组，直到它上下到达最接近的数字`$needle`，然后最后比较两者。

```
function findClosest($needle, array $haystack) {

    sort($haystack);

    $b = 0; // bottom
    $u = count($haystack) - 1; // up

    while ($u - $b > 1) {
        $m = round(($b + $u) / 2);
        if ($haystack[$m] < $needle) $b = $m;
        else $u = $m;
    }

    $x = $haystack[$b];
    $y = $haystack[$u];
    return (($needle-$x) > ($y-$needle)) ? $y : $x;

} 
```

如何在数组中减少数组索引的示例：

```
$needle = 7;
$array = array(2, 4, 8, 30, 41, 63, 72);

# loop: [$b..$u]

1 loop: [0..6]
2 loop: [0..3]
3 loop: [0..2]
4 loop: [1..2] 
```

现在我们知道`$haystack[1]`is just below`$needle`和`$haystack[2]`is above `$needle`。然后脚本将进行此评估：

```
return (7-4 > 8-7) ? 8 : 4; 
```

返回正确的结果：`8`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T02:09:51.817

I've found a solution in PHPs docs using the levenshtein function. By slightly altering the example code, I got it to find the closest number in a sorted array. The function is also relatively quick compared to other similar PHP functions.

```
<?php
function findClosest($input = 0){
    // array of numbers to check against
    $numbers  = array(4,7,10,15,
                    1,2,666,1234);
    sort($numbers);
    // no shortest distance found, yet
    $shortest = -1;

    // loop through numbers to find the closest
    foreach ($numbers as $num) {

        // calculate the distance between the input num,
        // and the current num
        $lev = levenshtein($input, $num);

        // check for an exact match
        if ($lev == 0) {

            // closest num is this one (exact match)
            $closest = $num;
            $shortest = 0;

            // break out of the loop; we've found an exact match
            break;
        }

        // if this distance is less than the next found shortest
        // distance, OR if a next shortest num has not yet been found
        if ($lev <= $shortest || $shortest < 0) {
            // set the closest match, and shortest distance
            $closest  = $num;
            $shortest = $lev;
        }
    }
    echo "Closest number is: " . $closest;
 }
?> 
```

I hope this helps, Adam.

# git - Git：恢复我的 .gitignore 中的文件

> ID：15423024
> 
> 赞同：2
> 
> 时间：2013-03-15T01:09:33.840
> 
> 标签：git, gitignore

我想将 Git 中的文件恢复到以前的提交。我的 .gitignore 文件忽略了该文件。在我最近的提交中，我不小心将其强制执行。

这个问题回答了如何恢复任何特定文件：[Reset or revert a specific file to a specific revision using Git?](https://stackoverflow.com/questions/215718/how-do-i-reset-revert-a-specific-file-to-a-specific-revision-using-git)

跑步：

`git checkout 234234234b234234234c123424 build/includes/initialize.php`

错误：

`error: pathspec 'build/includes/initialize.php' did not match any file(s) known to git.`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:15:17.633

您必须指定错误的提交或错误的路径。

```
$ 混帐初始化
在 /.../.git/ 中初始化空的 Git 存储库
$ echo test.txt > .gitignore
$ git add .gitignore
[master (root-commit) 6ed8815] 提交 1
 1 个文件已更改，1 个插入（+）
 创建模式 100644 .gitignore
$ git commit -m "提交 1"
$ echo '版本 1' > test.txt
$ git add test.txt
您的 .gitignore 文件之一会忽略以下路径：
测试.txt
如果您真的想添加它们，请使用 -f。
致命：没有添加文件
$ git add -f test.txt
$ git commit -m "提交 2"
[主 b23a130] 提交 2
 1 个文件已更改，1 个插入（+）
 创建模式 100644 test.txt
$ echo '版本 2' > test.txt
$ git add test.txt
$ git commit -m "提交 3"
[master 60c1f24] 提交 3
 1 个文件更改，1 个插入 (+)，1 个删除 (-)
$猫测试.txt
版本 2
$ git checkout b23a130 test.txt
$猫测试.txt
版本 1

```

如果我输入了错误的提交，我会收到以下错误消息：

```
$ git checkout 6ed8815 test.txt
错误：pathspec 'test.txt' 与 git 已知的任何文件都不匹配。

```

如果我输入了错误的路径名，我也会收到错误消息：

```
$ git checkout b23a130 other.txt
错误：pathspec 'other.txt' 与 git 已知的任何文件都不匹配。

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:38:44.257

错误信息：

`error: pathspec 'build/includes/initialize.php' did not match any file(s) known to git`

意味着您不在包含该文件的存储库中的正确目录中，`build/includes/initialize.php`或者该文件`build/includes/initialize.php`实际上不存在于存储库历史记录中的任何位置。

您可以运行`git log -- build/includes/initialize.php`以验证您是否能够查看修改此文件的提交日志（即使该文件当前已被删除）。如果这没有返回输出，则确认您在错误的目录中。

顺便说一句，一旦您将文件添加到 git，git 会自动跟踪对文件的更改，而不管该文件是否列出`.gitignore`。换句话说，后续添加不再需要指定`-f`。

# c++ - C++11/Boost 随机库，在循环的指定点开始生成

> ID：15423029
> 
> 赞同：2
> 
> 时间：2013-03-15T01:09:50.643
> 
> 标签：c++, boost, random, c++11

使用`C++11 #include<random>`or`Boost C++ Boost.Random`是否可以使用一个种子以您可以选择的任意序列启动随机数生成器？

换句话说，我希望能够指定数字生成器在序列中的哪个位置开始，同时使用相同的种子。

例如，如果我正在使用`mt19937`具有周期长度的生成器，`2^19937-1`我想开始在周期长度中用户指定的位置生成随机数。假设我选择 1000，生成器将从循环长度的第 1000 个位置开始。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T02:44:21.960

是的。有一个成员`discard(unsigned long long z)`会为你做这件事。例如：

```
#include <random>
#include <cassert>

int main()
{
    std::mt19937 e1(6492);
    std::mt19937 e2(6492);
    const int N = 1000;
    for (int i = 0; i < N; ++i)
        e1();
    e2.discard(N);
    assert(e1() == e2());
} 
```

这个程序不应该断言。

# objective-c - 可以将 Objective-c 方法放入 C++ 类中吗？

> ID：15423032
> 
> 赞同：0
> 
> 时间：2013-03-15T01:10:04.977
> 
> 标签：objective-c, objective-c++

是否可以在 C++ 类中声明一个 Objective-C 方法？例如：

```
class Piles {

public:
    int topIndexOf();
    void incrementTopIndex();
    void addCard();
    - (void)addImage:(); // <-- this
    .
    .
    . 
```

}

# search - 多字段，多词，不匹配query_string

> ID：15423033
> 
> 赞同：22
> 
> 时间：2013-03-15T01:10:04.903
> 
> 标签：search, lucene, elasticsearch, tire

我希望能够将多词搜索与多个字段匹配，其中搜索的每个词都包含在**任何**字段中，任何组合。问题是我想**避免使用**query_string。

```
curl -X POST "http://localhost:9200/index/document/1" -d '{"id":1,"firstname":"john","middlename":"clark","lastname":"smith"}'
curl -X POST "http://localhost:9200/index/document/2" -d '{"id":2,"firstname":"john","middlename":"paladini","lastname":"miranda"}' 
```

我希望搜索“John Smith”以仅匹配文档 1。以下查询可以满足我的需要，但我宁愿避免使用 query_string，以防用户传递“OR”、“AND”和任何其他高级参数。

```
curl -X GET 'http://localhost:9200/index/_search?per_page=10&pretty' -d '{
  "query": {
    "query_string": {
      "query": "john smith",
      "default_operator": "AND",
      "fields": [
        "firstname",
        "lastname",
        "middlename"
      ]
    }
  }
}' 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-15T10:40:42.167

您正在寻找的是[multi-match query](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html)，但它并没有按照您想要的方式执行。

比较[validate](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-validate.html) for `multi_match`vs的输出`query_string`。

`multi_match`（使用 operator `and`）将确保所有术语都存在于至少一个字段中：

```
curl -XGET 'http://127.0.0.1:9200/_validate/query?pretty=1&explain=true'  -d '
{
   "multi_match" : {
      "operator" : "and",
      "fields" : [
         "firstname",
         "lastname"
      ],
      "query" : "john smith"
   }
}
'

# {
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 1,
#       "total" : 1
#    },
#    "explanations" : [
#       {
#          "index" : "test",
#          "explanation" : "((+lastname:john +lastname:smith) | (+firstname:john +firstname:smith))",
#          "valid" : true
#       }
#    ],
#    "valid" : true
# } 
```

而`query_string`（使用 default_operator `AND`）将检查每个术语是否存在于至少一个字段中：

```
curl -XGET 'http://127.0.0.1:9200/_validate/query?pretty=1&explain=true'  -d '
{
   "query_string" : {
      "fields" : [
         "firstname",
         "lastname"
      ],
      "query" : "john smith",
      "default_operator" : "AND"
   }
}
'

# {
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 1,
#       "total" : 1
#    },
#    "explanations" : [
#       {
#          "index" : "test",
#          "explanation" : "+(firstname:john | lastname:john) +(firstname:smith | lastname:smith)",
#          "valid" : true
#       }
#    ],
#    "valid" : true
# } 
```

所以你有几个选择来实现你所追求的：

1.  在使用`query_string`

2.  预解析搜索词以提取每个单词，然后为每个单词生成一个`multi_match`查询

3.  在您的映射中使用`index_name`名称字段以将其数据索引到单个字段中，然后您可以将其用于搜索。（如您自己的自定义`all`字段）：

如下：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "mappings" : {
      "test" : {
         "properties" : {
            "firstname" : {
               "index_name" : "name",
               "type" : "string"
            },
            "lastname" : {
               "index_name" : "name",
               "type" : "string"
            }
         }
      }
   }
}
'

curl -XPOST 'http://127.0.0.1:9200/test/test?pretty=1'  -d '
{
   "firstname" : "john",
   "lastname" : "smith"
}
'

curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "match" : {
         "name" : {
            "operator" : "and",
            "query" : "john smith"
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "firstname" : "john",
#                "lastname" : "smith"
#             },
#             "_score" : 0.2712221,
#             "_index" : "test",
#             "_id" : "VJFU_RWbRNaeHF9wNM8fRA",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 0.2712221,
#       "total" : 1
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 33
# } 
```

但是请注意，`firstname`和`lastname`不再可独立搜索。两个字段的数据都已编入`name`.

您可以使用带参数的[多字段](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type.html)`path`来使它们既可独立搜索又可一起搜索，如下所示：

```
curl -XPUT 'http://127.0.0.1:9200/test/?pretty=1'  -d '
{
   "mappings" : {
      "test" : {
         "properties" : {
            "firstname" : {
               "fields" : {
                  "firstname" : {
                     "type" : "string"
                  },
                  "any_name" : {
                     "type" : "string"
                  }
               },
               "path" : "just_name",
               "type" : "multi_field"
            },
            "lastname" : {
               "fields" : {
                  "any_name" : {
                     "type" : "string"
                  },
                  "lastname" : {
                     "type" : "string"
                  }
               },
               "path" : "just_name",
               "type" : "multi_field"
            }
         }
      }
   }
}
'

curl -XPOST 'http://127.0.0.1:9200/test/test?pretty=1'  -d '
{
   "firstname" : "john",
   "lastname" : "smith"
}
' 
```

搜索该`any_name`领域的作品：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "match" : {
         "any_name" : {
            "operator" : "and",
            "query" : "john smith"
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "firstname" : "john",
#                "lastname" : "smith"
#             },
#             "_score" : 0.2712221,
#             "_index" : "test",
#             "_id" : "Xf9qqKt0TpCuyLWioNh-iQ",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 0.2712221,
#       "total" : 1
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 11
# } 
```

搜索不起作用`firstname`：`john AND smith`

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "match" : {
         "firstname" : {
            "operator" : "and",
            "query" : "john smith"
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [],
#       "max_score" : null,
#       "total" : 0
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 2
# } 
```

但搜索`firstname`只是`john`正常工作：

```
curl -XGET 'http://127.0.0.1:9200/test/test/_search?pretty=1'  -d '
{
   "query" : {
      "match" : {
         "firstname" : {
            "operator" : "and",
            "query" : "john"
         }
      }
   }
}
'

# {
#    "hits" : {
#       "hits" : [
#          {
#             "_source" : {
#                "firstname" : "john",
#                "lastname" : "smith"
#             },
#             "_score" : 0.30685282,
#             "_index" : "test",
#             "_id" : "Xf9qqKt0TpCuyLWioNh-iQ",
#             "_type" : "test"
#          }
#       ],
#       "max_score" : 0.30685282,
#       "total" : 1
#    },
#    "timed_out" : false,
#    "_shards" : {
#       "failed" : 0,
#       "successful" : 5,
#       "total" : 5
#    },
#    "took" : 3
# } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T20:06:18.903

> 如果用户传递“OR”、“AND”和任何其他高级参数，我宁愿避免使用 query_string。

以我的经验，用反斜杠转义特殊字符是一种简单有效的解决方案。该列表可以在文档[http://lucene.apache.org/core/4_5_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package_description](http://lucene.apache.org/core/4_5_0/queryparser/org/apache/lucene/queryparser/classic/package-summary.html#package_description)以及 AND/OR/NOT/TO中找到.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-12T15:11:37.750

现在你可以使用[cross_fields](https://www.elastic.co/guide/en/elasticsearch/guide/current/_cross_fields_queries.html)输入`multi_match`

```
GET /_validate/query?explain
{
    "query": {
        "multi_match": {
            "query":       "peter smith",
            "type":        "cross_fields", 
            "operator":    "and",
            "fields":      [ "firstname", "lastname", "middlename" ]
        }
    }
} 
```

跨领域采用以术语为中心的方法。它将所有字段视为一个大字段，并在任何字段中查找每个术语。

不过要注意的一件事是，如果您希望它以最佳方式工作，则分析的所有字段都应具有相同的分析器（标准、英语等）：

> 为了使 cross_fields 查询类型以最佳方式工作，所有字段都应具有相同的分析器。共享分析器的字段被组合为混合字段。
> 
> 如果您包含具有不同分析链的字段，它们将以与 best_fields 相同的方式添加到查询中。例如，如果我们将标题字段添加到前面的查询中（假设它使用不同的分析器），则解释如下：
> 
> (+title:peter +title:smith) ( +blended("peter", fields: [first_name, last_name]) +blended("smith", fields: [first_name, last_name]) )

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-15T07:47:22.307

我认为“匹配”查询是您正在寻找的：

“匹配系列查询不经过“查询解析”过程。它不支持字段名称前缀、通配符或其他“高级”功能。因此，它失败的可能性非常小/不存在，并且它提供了一种出色的行为，只需分析和运行该文本作为查询行为（这通常是文本搜索框所做的）”

[http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html](http://www.elasticsearch.org/guide/reference/query-dsl/match-query.html)

# paypal - Paypal REST api 和配置直接支付页面

> ID：15423039
> 
> 赞同：4
> 
> 时间：2013-03-15T01:10:46.440
> 
> 标签：paypal

使用 paypal NVP api，我们可以为生成的 paypal 结帐页面设置一些选项`SetExpressCheckout`。有没有办法使用新的 REST api 执行以下操作？

*   `NOSHIPPING`告诉贝宝我不需要送货地址。
*   `LOCALECODE`以用户的语言设置网关。
*   `HDRIMG`将页面标题更改为徽标。
*   `EMAIL`在网关中预填充电子邮件。*注意：*我尝试过使用`$payerInfo->setEmail()`，但显然这种方法仅适用于请求，`credit_card`而不是`paypal`请求。
*   `SOLUTIONTYPE`默认设置帐单信息。
*   `LANDINGPAGE`设置着陆页。

我在贝宝开发人员 REST api 文档中找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:54:34.603

不幸的是，此时不是。我们正在尝试实施一种更好的机制来配置支付体验，而不是重载 API 调用。在此之前，如果您确实需要这些东西，请使用经典的 ExpressCheckout API。

# jquery - html5 播放音频循环 4x 然后停止

> ID：15423040
> 
> 赞同：1
> 
> 时间：2013-03-15T01:10:55.320
> 
> 标签：jquery, html, loops, audio

嗨，我需要循环音频文件一定次数，即 4 次，我的声音文件循环正确，代码如下。? 4x后如何停止循环，非常感谢P

```
$('#play_audio').click(function () {
            var audio = document.createElement("audio");
            audio.src = "files/windows%20default.mp3";

            audio.addEventListener('ended', function () {
                // Wait 500 milliseconds before next loop

                setTimeout(function () { audio.play(); }, 500);
            }, false);           

            audio.play(); 
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T07:04:31.920

我设法这样做：

```
 $('#play_audio').click(function () {                     
            var times = 4;
            var loop = setInterval(repeat, 500);

        function repeat() {
            times--;
            if (times === 0) {
                clearInterval(loop);
            }

            var audio = document.createElement("audio");
            audio.src = "files/windows%20default.mp3";

            audio.play();
        }

        repeat();           
    });      
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-25T07:38:13.563

也许更好的方法是保持 HTML 不变。只需使用特定的 id 定位它。

```
<audio id="loop-limited" controls>
    <source src="music.ogg" type="audio/ogg">
    <source src="music.mp3" type="audio/mpeg">
</audio> 
```

这是JavaScript：

```
// Audio Loop Limit
var loopLimit = 4;
var loopCounter = 0;
document.getElementById('loop-limited').addEventListener('ended', function(){
    if (loopCounter < loopLimit){
        this.currentTime = 0;
        this.play();
        loopCounter++;
    }
}, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T01:22:31.880

`if`用这样的计数器抛出一个简单的语句：

~~更新：~~

 ~~```
$('#play_audio').click(function () {
            var audio = document.createElement("audio");
            audio.src = "files/windows%20default.mp3";

            audio.addEventListener('ended', function () {

                var repeat = 0;

                // Wait 500 milliseconds before next loop  
                setTimeout(function () {
                      if repeat < 3 {
                           var repeat = repeat + 1;
                           audio.play();
                      }
                      else {
                           return done;                
                      }
                }, 500);

            }, false);

      audio.play();
}); 
```~~  ~~第二次更新：

```
$('#play_audio').click(function () {
        var audio = document.createElement("audio");
        audio.src = "files/windows%20default.mp3";        

        delay(500).audio.play();
        delay(1000).audio.play();
        delay(1500).audio.play();
        delay(2000).audio.play();
}); 
```

从编程的角度来看，它是不可扩展的，但是如果您尝试仅解决这个问题一次，这是一种可行的解决方法。

我确定如果我有更多时间，我们可以聊天，也许我可以让循环代码工作，但试试这个，让我知道它是否有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-15T15:39:05.670

我最近遇到了类似的情况，我用这样的代码解决了它：

```
var ringsToPlay = 4;
var sound = new Audio('http://www.oneoakway.com/_inactive/oldfiles/chimebang.mp3');
var currentRing = 0;

function doIt() {
    sound.volume = .4;
    sound.play();
    currentRing = 1;
    sound.addEventListener('ended', ringMore, false);
}

function ringMore() {
    if(currentRing == ringsToPlay) {
        sound.removeEventListener('ended', ringMore, false);
    } else {
        sound.play();
        currentRing++;
    }
} 
```

请注意，我只为最新的浏览器编写代码。我不知道这是否适用于较旧的浏览器，可能不会。我只在 FF、Chrome 和 IE、最新版本、Windows 7 中测试我的代码。

小提琴：http : [//jsfiddle.net/fidnut/2oL5fsxz/1/](http://jsfiddle.net/fidnut/2oL5fsxz/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-05T22:04:38.207

当他们加载您的页面时吓唬他们......但是，谢谢我正在寻找一种方法来做到这一点，

```
$(document).ready(function () {
    var times = Math.floor((Math.random() * 5) + 1);
    var loop = setInterval(repeat, 500);

    function repeat() {
        times--;
        if (times === 0) {
            clearInterval(loop);
        }

        var audio = document.createElement("audio");
        audio.src = "http://static1.grsites.com/archive/sounds/birds/birds001.wav";

        audio.play();
    }

    repeat();
}); 
```

[https://jsfiddle.net/qmcw0cqq/](https://jsfiddle.net/qmcw0cqq/)~~

# sql - SQL 查询以添加具有特定计数的列

> ID：15423041
> 
> 赞同：0
> 
> 时间：2013-03-15T01:11:04.513
> 
> 标签：sql, count, group-by, left-join

我有下表 Tble ：

```
姓名 | 等级
--------------
n1 | L1
n1 | L2
n2 | L1
n2 | L3
n3 | L1
n4 | L3

```

我怎样才能编写一个 SQL 查询来输出这样的结果？

```
姓名 | 水平 | CountOfDifferentLevelsForName
------------------------------------------
n1 | L1 | 2
n1 | L2 | 2
n2 | L1 | 2
n2 | L3 | 2
n3 | L1 | 1
n4 | L3 | 1

```

即例如n1有两个级别L1和L2

我试着做： SELECT Name, count(*) FROM Tble GROUP BY Name

但是只要我也想查看级别...它会弄乱计数，或者不显示所有行

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:15:44.427

...并且不使用相关的子查询：

```
SELECT tb1.Name, tb1.Level, count(*) c
FROM Tble tb1
JOIN Tble tb2 ON tb1.Name = tb2.Name
GROUP BY tb1.Name, tb1.Level 
```

确保连接 ( ) 中使用的列`Name`已编入索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:10:27.383

尝试这个...

```
select name,lvl,count(*) over (partition by name) as tot_cnt from table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:12:38.430

有许多可能的方法来达到旅游所需的结果。其中之一是加入一个子查询，该子查询分别获取每个 Name 的记录数，然后将子查询的结果重新加入表本身。

```
SELECT  a.name, a.Level,
        b.TotalCount
FROM    TableName a
        INNER JOIN 
        (
            SELECT  Name, Count(*) TotalCount
            FROM    TableName
            GROUp   BY Name
        ) b ON a.Name = b.Name 
```

为了获得更快的性能，您应该定义一个`INDEX`on 列`Name`。

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b1271/1)

输出

```
╔══════╦═══════╦════════════╗
║ NAME ║ LEVEL ║ TOTALCOUNT ║
╠══════╬═══════╬════════════╣
║ n1   ║ L1    ║          2 ║
║ n1   ║ L2    ║          2 ║
║ n2   ║ L1    ║          2 ║
║ n2   ║ L3    ║          2 ║
║ n3   ║ L1    ║          1 ║
║ n4   ║ L3    ║          1 ║
╚══════╩═══════╩════════════╝ 
```

* * *

**更新 1**

*具有 1 级的名称，该级别是 L1（即 n3）*

询问：

```
SELECT  Name
FROM    TableName
GROUP   BY Name
HAVING  COUNT(*) = 1 AND
        MAX(Level) = 'L1' 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b1271/22)

*名称有 2 个级别，这些级别是 L1 和 L3（即 n2）*

询问：

```
SELECT  Name
FROM    TableName
GROUP   BY Name
HAVING  COUNT(*) = 2 AND
        SUM(CASE WHEN Level IN ('L1', 'L3') THEN 1 ELSE 0 END) = COUNT(*) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b1271/23)

# javascript - 用于保存 Javascript 更改的 HTML5 Web Storage API

> ID：15423042
> 
> 赞同：0
> 
> 时间：2013-03-15T01:11:06.407
> 
> 标签：javascript, html, web-storage

我有一个包含三个按钮的 HTML5 页面。这些按钮改变了我页面上的各种内容。例如，第一个将隐藏一个 div，第二个用于将视频播放器更改为随机颜色，第三个用于循环浏览文件夹中的背景图像。

这是带有侧面菜单按钮的页面（部分隐藏）：[http ://www3.carleton.ca/clubs/sissa/html5/video.html](http://www3.carleton.ca/clubs/sissa/html5/video.html)

我的任务希望我们在离开页面和返回时使用 Web 存储 API 来保存任何更改。因此，如果我将视频播放器更改为红色并关闭窗口，当我打开窗口时，视频播放器将保持红色。

这可能吗？

这是每个按钮的 JS：

```
// Side Menu Function 1
function wideScreen(){
    sidebar = document.getElementById('sidebar');
    banner = document.getElementById('top_header'); 
    body = document.getElementById('body_div');

    if(sidebar.style.display != 'none'){
            sidebar.style.display = ('none');
            banner.style.display  = 'none';
            body.style.marginTop = ('80px');
        }else{
            sidebar.style.display = ('block');
            banner.style.display = 'block';
            body.style.marginTop = ('220px');

        }
    }

//Side Menu Function 2
var dfault = false   
function get_random_color() {
    var letters = '0123456789ABCDEF'.split('');
    var color = '#';
    for (var i = 0; i < 6; i++ ) {
        color += letters[Math.round(Math.random() * 15)];
    }
    return color;
}
function randFrame(){
    vid = document.getElementById("video_container");
    c = document.getElementById('controls');

    if(!dfault){
        vid.style.backgroundColor  = get_random_color();
        c.style.backgroundColor = vid.style.backgroundColor;
        c.style.backgroundImage = 'none'; 

    }else{
        vid.style.backgroundColor = ('black');
        c.style.backgroundImage = "url('images/bg/bg4.jpg')";
        c.style.backgroundColor = 'none';
    }

    dfault = !dfault
}

//Side Menu Function 3
function randNum(){
    num=Math.floor((Math.random()*13)+1); 
    return num;   
}
function randBG(){
    b = document.getElementsByTagName('body');
    b[0].style.background = "url('images/bg/bg"+randNum()+".jpg') no-repeat center center fixed"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:20:48.053

您可能想阅读“localstorage”。一个好的页面在：

[http://diveintohtml5.info/storage.html](http://diveintohtml5.info/storage.html)

因此，您可以创建一个密钥/对，或者在点击时更新：

因此，要阅读它，您将执行以下操作：

```
var mystore = localStorage.getItem("sidebar"); 
```

要设置它，您可以执行以下操作：

```
localStorage.setItem("red", mystore); 
```

因此，在加载时，查找键，如果它们存在，设置元素，只要有点击，就创建/更新存储。

有关更多信息，您可以查看：

[http://paperkilledrock.com/2010/05/html5-localstorage-part-one/](http://paperkilledrock.com/2010/05/html5-localstorage-part-one/)

# c# - 如何序列化自定义类型的 ObservableCollection

> ID：15423047
> 
> 赞同：1
> 
> 时间：2013-03-15T01:11:37.080
> 
> 标签：c#, serialization, windows-phone-8, observablecollection

我正在尝试将自定义类型的 ObservableCollection 保存到我的 wp8 应用程序中的隔离存储中。observable 集合包含 BitmapImage 和字符串类型的值。这样做的目的是从 CameraCaptureTask 结果中保存图像及其各自的名称。

```
void cameraCaptureTask_Completed(object sender, PhotoResult e)
    {
        if (e.TaskResult == TaskResult.OK)
        {
            //clear current values if any
            imgChosenPhotoFileName = null;
            bmp = new BitmapImage();

            imgChosenPhotoFileName = e.OriginalFileName;

            //Display the photo on the page
            bmp.SetSource(e.ChosenPhoto);
            imgChosenPhoto.Source = bmp;

            //Add photo info to Recent
            AddToImgList(imgChosenPhotoFileName, bmp);
        }
    }

    private void AddToImgList(string fileName, BitmapImage bitmap)
    {
        Settings.imageList.Value.Add(new ImageItem() { ImageName = fileName, ImageUri = bitmap });
        //Settings.imageList.Value.Add(bitmap);

        //populate the List with the saved imageList
        imgList.ItemsSource = Settings.imageList.Value;
    } 
```

其中 Settings 是我已声明保存名为 imageList 的 observable 集合的类，而 imgList 是 observablecollection 绑定到的 Listbox。

设置.cs

```
public static class Settings
{
    public static readonly Setting<ObservableCollection<ImageItem>> imageList = new Setting<ObservableCollection<ImageItem>>("imageList", new ObservableCollection<ImageItem>());
} 
```

Setting 是从隔离存储中保存和加载数据的类。

设置.cs

```
public class Setting<T>
{
    string name;
    T value;
    T defaultValue;
    bool hasValue;

    public Setting(string name, T defaultValue)
    {
        this.name = name;
        this.defaultValue = defaultValue;
    }

    public T Value
    {
        get
        {
            //Check for the cached value
            if (!this.hasValue)
            {
                //Try to get the value from Isolated Storage
                if (!IsolatedStorageSettings.ApplicationSettings.TryGetValue(this.name, out this.value))
                {
                    //It hasn't been set yet
                    this.value = this.defaultValue;
                    IsolatedStorageSettings.ApplicationSettings[this.name] = this.value;
                }
                this.hasValue = true;
            }
            return this.value;
        }

        set
        {
            //Save the value to Isolated Storage
            IsolatedStorageSettings.ApplicationSettings[this.name] = value;
            this.value = value;
            this.hasValue = true;
        }
    }

    public T DefaultValue
    {
        get { return this.defaultValue; }
    }

    // Clear cached value
    public void ForceRefresh()
    {
        this.hasValue = false;
    }
} 
```

另外，observable集合是ImageItem类型的，如下

图像项.cs

```
public class ImageItem
{
    public BitmapImage ImageUri
    {
        get;
        set;
    }

    public string ImageName
    {
        get;
        set;
    }
} 
```

出于某种原因，虽然应用程序运行时图片保存在imageList集合中并填充到imgList Listbox中，但是当应用程序关闭并重新启动时，observablecollection为空？我相信 BitmapImage 是问题（它没有序列化？），我无法获得可观察的集合来保存来自 CameraCaptureTask 的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:29:58.000

在您的代码中，我看到您使用的是 IsolatedStorage 类。我真的不知道如何使用 IsolatedStorage 类，但是我怀疑为它分配一个变量

`IsolatedStorageSettings.ApplicationSettings[this.name] = this.value;`

不进行将值保存到变量中的设置。我做了一个快速搜索并在[msdn](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx)找到了一个保存方法，也许它可以提供帮助。

但是，您可以缩小问题范围，仅使用 IsolatedStorageSettings 来获得更好的答案。

# css - 在不知道宽度的情况下水平居中 div 中的图像

> ID：15423049
> 
> 赞同：-1
> 
> 时间：2013-03-15T01:12:27.173
> 
> 标签：css, image, centering

我试图在 div 中将图像居中而不控制图像宽度。您可以在此处查看精选列表的示例：

[http://citylightsrealtygroup.com/](http://citylightsrealtygroup.com/)

由于这将由管理员更新，我无法控制。代码看起来像这样但它没有居中它仍然排列在左边缘：

```
.feature_thumb img{
    width:auto;
    height:100%;
    display:block;
    margin-left: auto;
    margin-right: auto;
} 
```

使用拇指的纵横比将高度设置为自动并让宽度溢出而不是相反会更好。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:20:21.800

您在那里使用的图像太大，在较慢的带宽上加载速度会非常缓慢；应生成缩略图以防止这种情况。我建议您以编程方式或使用 timthumb - [https://code.google.com/p/timthumb/生成它们](https://code.google.com/p/timthumb/)

当您使用它时，脚本会自动居中、裁剪和调整图像大小。您只需要指定宽度和高度

```
<img src="timthumb.php?src=IMAGE_SOURCE&w=WIDTH&h=HEIGHT" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:25:45.560

听起来这个问题可以稍微清理一下。您可能想发布后续内容，询问您提到的其他一些问题。但是要回答手头的问题，关于在其父级中居中图像......而不是在图像本身上设置 CSS 属性，设置为`text-align`图像**的 parent**。`center` **`div`**

# c++ - 此程序中的编译器错误与 g++

> ID：15423053
> 
> 赞同：1
> 
> 时间：2013-03-15T01:12:41.297
> 
> 标签：c++

```
#include <iostream>
using namespace std;

class C
{
    public:
    virtual string toString()
    {
        return "class C";
    }
};

class B : public C
{
    public:
    string toString()
    {
        return "class B";
    }
};

class A : public B
{
    public:
    string toString()
    {
        return "class A";
    }
};

void displayObject(C &p)
{
    cout << p.toString << endl;
}

int main()
{
    A a;
    B b;
    C c;    
    displayObject(a);
    displayObject(b);
    displayObject(c);
    return 0;
} 
```

错误

```
demo.cpp: In function ‘void displayObject(C&)’:
demo.cpp:33: errors：no match for ‘operator<<’ in ‘std::cout << p->C::toString’
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:108: 附注：备选为： std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ostream<_CharT, _Traits>& (*)(std::basic_ostream<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:117: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_ios<_CharT, _Traits>& (*)(std::basic_ios<_CharT, _Traits>&)) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:127: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::ios_base& (*)(std::ios_base&)) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:165: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:169: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:173: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(bool) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/ostream.tcc:91: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(short int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:180: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(short unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/ostream.tcc:105: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:191: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:200: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long long int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:204: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long long unsigned int) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:209: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(double) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:213: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(float) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:221: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(long double) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/ostream:225: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(const void*) [with _CharT = char, _Traits = std::char_traits<char>]
/usr/lib/gcc/i686-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/ostream.tcc:119: 附注：         std::basic_ostream<_CharT, _Traits>& std::basic_ostream<_CharT, _Traits>::operator<<(std::basic_streambuf<_CharT, _Traits>*) [with _CharT = char, _Traits = std::char_traits<char>] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T01:14:15.847

尝试*调用*该函数`toString()`而不是打印它：

```
cout << p.toString() << endl; 
```

注意括号:)

打印它不起作用，因为没有流插入运算符重载需要一个指向成员函数类型的指针`std::string(C::*)()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:14:55.823

打印时忘记了 toString 后的 ()

# xaml - WF4 运行时尝试加载松散耦合的活动设计器

> ID：15423061
> 
> 赞同：2
> 
> 时间：2013-03-15T01:13:40.170
> 
> 标签：xaml, workflow-foundation-4, workflow-foundation

我创建了一个自定义代码活动，还有一个自定义设计器 - 我使用以下约定将其应用于活动

```
[Designer("MyDesignerType, Assembly, Version=1.0.0.0, PublicKeyToken=XXX")] 
```

这在设计时起作用，我的设计器已加载（如果我将它放在 GAC 中）并用于在设计表面上显示我的活动。

当我发布我的工作流程时，设计器 DLL 不在生产服务器上（这正是我的意图 - 因此我通过 DesignerAttribute 构造函数的“强名称”版本引用设计器，而不是创建硬链接到设计器 DLL）。

但是，当运行时在生产服务器上加载工作流时——它会抛出 TypeNotFound 异常——试图加载 MyDesignerType/DLL。为什么？？为什么工作流运行时试图在运行时加载设计时功能？DesignerAttribute 带有松散耦合的构造函数的全部原因是避免将设计器 DLL 与产品一起部署......

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:54:26.190

如果您想要松散耦合的活动设计器，则根本不会应用`DesignerAttribute`。

所以基本上，为了支持您的方案，您将拥有 2 个这样的 dll：

*   MyProject.Activity.dll
*   我的项目。活动。**设计.dll**

这里的关键部分是*Design.dll*。在该 dll 中，您应该有一个实现[IRegisterMetadata](http://msdn.microsoft.com/en-us/library/system.activities.presentation.metadata.iregistermetadata.aspx)的类，这就是神奇发生的地方。

> IRegisterMetadata 类型提供了一种以松散耦合方式封装设计时属性与运行时类型的关联的方法。承载 Windows 工作流设计器的应用程序可以使用 IRegisterMetadata 接口来注册活动的属性。例如，Visual Studio 2010 会在加载包含这些类型的程序集时搜索实现 IRegisterMetadata 的类型，此外还会在 *.design 程序集中查找类型。

如何通过 IRegisterMetadata 在活动中注册设计师：

```
class Metadata : IRegisterMetadata
{
    public void Register()
    {
        AttributeTableBuilder builder = new AttributeTableBuilder();
        // Register Designers.
        builder.AddCustomAttributes(typeof(MyActivity), new DesignerAttribute(typeof(MyActivityDesigner)));
        // Apply the metadata
        MetadataStore.AddAttributeTable(builder.CreateTable());
    }
} 
```

Visual Studio 工作流设计器将查找以*.Design.dll*结尾的 dll ，找到它后，将`IRegisterMetadata.Register()`在您将设计器附加到活动的位置执行。

# c - c 将结构传递给方法进行更新

> ID：15423067
> 
> 赞同：0
> 
> 时间：2013-03-15T01:14:39.697
> 
> 标签：c, methods, struct

我在使用以下代码段时遇到了一些问题：

```
#include <stdio.h>

struct some_numbers 
{
int id;
char *somestring;
};

typedef struct some_numbers numb;

void print_numbers(numb *a)
{
printf("%d: %s\n", a->id, a->somestring);
}

void add_number(numb *a)
{

 // do someting magical
 // push the new result to the existing struct
 // put something into like:
  a->somestring[5] = "widdley";
}

int main(void)
{

// put some stuff in the struct
numb entries[50];
int x;
for(x=0; x < 4; x++)
{
    numb a = entries[x];
    a.id = x;
    a.somestring = "goats";
    print_numbers(&a);
}

add_numbers(&a);  // i want to call a method 

return 0;
} 
```

我想创建一个结构数组，将结构传递给一个方法，并将更多项目弹出到数组中。到目前为止，我所尝试的一切都以惨败告终，我很难想出办法摆脱这个难题。我可以毫无问题地打印这些值：

```
> ./struct 
0: goats
1: goats
2: goats
3: goats
> 
```

我希望输出看起来像：

```
> ./struct 
0: goats
1: goats
2: goats
3: goats
4: widdley
> 
```

请帮忙。我不擅长c，所以要温柔！

编辑：澄清了代码示例以将焦点从错误的区域上移开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:18:33.483

这里：

```
a->somestring[5] = "widdley"; 
```

的类型`somestring[5]`是`char`，不是`char*`。如果你需要一个字符串数组，你需要定义：

```
struct some_numbers {
  int id;
  char *somestring[20];  // 20 is an example
}; 
```

并根据您的实际目标以某种方式管理这些字符串。

If you want to add a new number into `entries` then define it with more than 4 items and keep track of valid locations:

```
numb entries[20]; // 20 is an example
int num_entries = 0;
entries[num_entries++] = new_entry(); // some function that returns an entry 
```

or just use a dynamic array, which requires dynamic memory management (malloc/realloc);

```
#include <stdio.h>

#include <stdlib.h>
#include <string.h>
struct some_numbers 
{
  int id; 
  char *somestring;
};

typedef struct some_numbers numb;

void print_numbers(numb *a) {
  printf("%d: %s\n", a->id, a->somestring);
}

void add_entry(numb **list, int *n, int id, const char *str) {
  int cnt = *n; 
  *list = realloc(*list, sizeof(numb)*(cnt + 1));
  (*list)[cnt].id = id; 
  (*list)[cnt].somestring = malloc(strlen(str)+1);
  strcpy((*list)[cnt].somestring, str);
  *n = cnt + 1;
}

int main(void)
{

  // put some stuff in the struct
  numb *entries = 0;
  int x, num_entries=0;
  for(x=0; x < 4; x++)
  {
    add_entry(&entries, &num_entries, x, "goats");
  }

  for (x=0; x<num_entries; x++)
    print_numbers(&entries[x]);
  printf("\n\n");
  add_entry(&entries, &num_entries, 6, "widdley"); 
  for (x=0; x<num_entries; x++) 
    print_numbers(&entries[x]);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:37:26.960

If you want to add more values to your array, you need to either allocate enough memory upfront to store the maximum possible number of structs, or allocate the memory dynamically. So:

```
numb entries[100]; 
```

Or

```
numb *entries = malloc(sizeof(numb)*100); 
```

Then, you'll need to pass a variable to the add_number function to keep track of where your array ends:

```
void add_number(numb *a, int position) {
        a[position].somestring = "widdley";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:20:31.847

You commented out the call to `add_numbers()`, so of course, the structs in your array won't change. I suspect you did this because you are getting a compiler error. `a->somestring[5] = "widdley";` should be `a->somestring = "widdley";` since you want to set the value of the whole string, not just one char in that string. In the future, please post any compiler errors that you get. After this one change to your code, you should print out the array *after* calling `add_numbers()`.

# jquery - 如何按数据表中的状态过滤条目？

> ID：15423069
> 
> 赞同：0
> 
> 时间：2013-03-15T01:14:45.693
> 
> 标签：jquery, filter, datatables

我需要在我的数据表中过滤我的条目，但我不执行任何功能并连接我的数据库并返回每个状态按钮的结果：

```
Pendiente = Slope
En atención = In Attention
Concluido = concluded
Cancelado = Canceled 
```

我想要这个：当按下任何状态按钮时，在不连接数据库的情况下过滤数据表中的当前结果并获取每个状态的数据。

![在此处输入图像描述](../Images/7039eb0235ce404d37584da0624d28cf.png)

我希望我已经解释了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:27:33.420

根据您的评论，它很容易修复它，好的。[这里](http://datatables.net/release-datatables/examples/api/multi_filter.html)和[这里](http://datatables.net/release-datatables/examples/api/multi_filter_select.html)有 2 个示例，在 datatables 官方网站上可以为您提供解决方案。

有点像这样：

```
var oTable = $('#example').dataTable( {
        "oLanguage": {
            "sSearch": "Search all columns:"
        }
    } );

    $("this should be the buttons that you want to bind filter function").click( function () {
        /* Filter on the column (the index) of this element */
        oTable.fnFilter( "this is the status that you want use to filter", $("tfoot input").index(this) );
    } ); 
```

并且请提醒您，如果您对数据表有任何疑问，可以在其论坛中提出。allan 维护整个项目，他会告诉你一切。

# delphi - 如何在没有 ProcessMessages 的情况下让 TAnimate 重绘

> ID：15423073
> 
> 赞同：0
> 
> 时间：2013-03-15T01:15:16.913
> 
> 标签：delphi, animation, delphi-xe2, vcl

我有一个简单的 VCL 表单，其中设置了一个 TAnimate 组件以使用 aviCopyFiles。该表单包含 ShellAnimations 单元，因此可以在 Windows 7 上运行。

在表单激活时，它使 TAnimate 处于活动状态，然后开始使用 LZCopy 复制文件作为更新过程的一部分。

但我发现 TAnimate 图像只有在我调用 Application.ProcessMessages 时才会发生变化，即使它应该在它自己的线程中（Timers 属性为假）。

如何在循环复制更新的文件时使其平滑动画？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:25:54.590

改变你的想法！

应用程序的主线程旨在维护 UI 并对操作系统做出响应，例如，为消息队列提供服务并对接收到的消息做出适当的响应。

这样想，你会意识到你不需要`TAnimate`在你的主线程很忙的时候工作。您需要的是通过将繁重的工作转移到不同的线程来拥有响应式主线程。

在您的情况下，移动*循环以将更新的文件复制*到不同的线程，您将始终通过主线程*平滑地为 TAnimate 设置动画。*

# iphone - 带有大图像的 UIScrollView

> ID：15423076
> 
> 赞同：2
> 
> 时间：2013-03-15T01:15:22.130
> 
> 标签：iphone, uiview, uiscrollview, uiimageview

此代码显示滚动视图，但我想要显示的图像（教程）大于视图。换句话说，tutorial.png 正好是 280X1200，但它不会有 aspectFit。我在这里遗漏了一些小东西：

```
tipScroll = [[UIScrollView alloc]initWithFrame:CGRectMake(20, 10, 280, 1200)];
tipScroll.showsVerticalScrollIndicator = YES;
tipScroll.scrollEnabled = YES;
tipScroll.userInteractionEnabled = YES;

UIImageView *tutorialImageView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"tutorial"]];

tipScroll.contentMode = UIViewContentModeScaleAspectFit;
tutorialImageView.contentMode = UIViewContentModeScaleAspectFit;

tipScroll.contentSize = tutorialImageView.frame.size;

[self.view addSubview:tipScroll];
[tipScroll addSubview:tutorialImageView]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:20:37.707

请看下面的编辑代码。它会工作

```
tipScroll = [[UIScrollView alloc]initWithFrame:CGRectMake(20, 10, 280, 1200)];
tipScroll.showsVerticalScrollIndicator = YES;
tipScroll.scrollEnabled = YES;
tipScroll.userInteractionEnabled = YES;

UIImageView *tutorialImageView = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 280, 1200)];
tutorialImageView.image = [UIImage imageNamed:@"tutorial"];

tipScroll.contentSize = tutorialImageView.frame.size;
[tipScroll addSubview:tutorialImageView];
[self.view addSubview:tipScroll]; 
```

# c# - 如何修改C#图表控制chartArea百分比

> ID：15423080
> 
> 赞同：9
> 
> 时间：2013-03-15T01:15:57.400
> 
> 标签：c#, mschart

如果我有一个包含 2`chartAreas`的图表控件，默认情况下，图表控件会将 chartAreas 放在彼此的顶部，使每个区域占据图表控件可用大小的 50%。

有没有办法改变 chartAreas 的百分比，这样我就可以说，顶部的图表占区域的 75%，底部的图表占 25%？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T19:20:02.787

所以，我最终找到了它，但我认为它没有很好的记录。每个`chartArea`都有属性[ChartArea.Position](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chartarea.position.aspx)。此属性为[ElementPosition](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.elementposition.aspx)类型，包含与此问题相关的 4 个属性。

Height：获取或设置图表元素的高度。
Width：获取或设置图表元素的宽度。
X：获取或设置适用图表元素左上角的相对 X 坐标。
Y：获取或设置适用图表元素左上角的相对 Y 坐标。

当你深入挖掘时，`Height`和`Width`属性也以相对坐标表示，因此你只能输入 0 - 100。

基本上，你必须改变每个高度，每个 Y 来移动它们。初始创建后，不会自动调整其他数字。

例如，如果我只是将`Height`chartArea[1] 更改为更小的值，它仍将锚定在以前的位置，这是有道理的，在它下面留下很多空白。

如果我再增加`Height`chartArea[0] 的值，它可能会覆盖我们刚刚调整大小的 chartArea[1]。因此，我必须设置`Y`chartArea[1] 将其向下移动，这样它就不会被覆盖，并且空白区域消失了。

因此，为了获得类似于我在问题中提出的内容，我将其设置为：

```
chart1.ChartAreas[0].Position.Y = 10;
chart1.ChartAreas[0].Position.Height = 60;
chart1.ChartAreas[1].Position.Y = 70;
chart1.ChartAreas[1].Position.Height = 20; 
```

为了使这个解释更清楚一点，我将这些 chartAreas 所在的 Chart 控件称为“父级”。

这些是百分比，但对于本示例，让我们假设父对象的大小为 100 像素。

这将第一个 chartArea 设置为 10 像素开始显示，并使其高约 60 像素。然后它开始在 70px 处显示第二个 chartArea，并使其高约 20px。

如果这个图表是 200 像素高，那么比例将是相同的，但实际像素将是两倍（因此将第一个图表区域设置为 60 将使其高 120 像素）。

我确实在我的真实程序中多加了一点，因为它的标题覆盖了轴标签，但我觉得这些数字有助于更好地解释它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-10T15:03:34.227

您还可以将第二个图表的 .Y 位置设置为第一个图表的底部。这样你只需要担心第一个图表的位置。代码看起来像这样：

```
chart1.ChartAreas[0].Position.Y = 10;
chart1.ChartAreas[0].Position.Height = 60;
chart1.ChartAreas[1].Position.Y = chart1.ChartAreas[0].Position.Bottom;
chart1.ChartAreas[1].Position.Height = 20; 
```

当然，您也可以填充 .Y 位置，具体取决于图表之间需要多少空白空间。我将这种方法用于我构建的使用多个图表的应用程序，它保证每个图表都将正确定位，无论对单个图表做什么。

# outlook - 在我的 VSTO Outlook 应用程序中，为什么调用 SelectNamesDialog.Display() 会将我的表单移到 Outlook 后面？

> ID：15423081
> 
> 赞同：0
> 
> 时间：2013-03-15T01:16:03.077
> 
> 标签：outlook, vsto

我有一个 Outlook VSTO 应用程序。我正在尝试从我加载的表单中调用 SeletNamesDialog。出现的对话框很棒，它的模式很好，但它似乎将我的表单移到了 Outlook 应用程序后面。因此，在我选择了一堆名称并单击“确定”后，对话框消失了，但我的表单不可见，除非我将 Outlook 最小化（这显然不理想）。

有没有办法避免这种情况发生？这是我用来加载对话框的代码：

```
 var app = new Application();

        AddressList gal = app.ActiveExplorer().Session.GetGlobalAddressList();
        var dlg = app.Session.GetSelectNamesDialog();
        dlg.InitialAddressList = gal;
        bool b = dlg.Display();
        var sb = new StringBuilder();
        foreach (Recipient r in dlg.Recipients)
        {
           sb.Append(r.Name +  ";");
        }
        txtPeople.Text = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:49:36.217

Outlook 将不允许您在显示通讯簿时指定窗体的窗口句柄。

您可以使用扩展 MAPI（仅限 C++ 或 Delphi）和[IAddrbook::Address](http://msdn.microsoft.com/en-us/library/office/cc840028.aspx)方法或 Redemption 及其[RDOAddressBook.ShowAddressBook](http://www.dimastr.com/redemption/rdoaddressbook.htm)方法（它具有 ParentWindow 参数）或[RDOSelectNamesDialog](http://www.dimastr.com/redemption/rdoselectnamesdialog.htm)对象（它将使用分配给 RDOSession 的窗口句柄。父窗口属性）

# php - 我试图使用 php 删除一个 mysql 文件，这是按下删除后的代码，没有任何想法？

> ID：15423082
> 
> 赞同：0
> 
> 时间：2013-03-15T01:16:18.090
> 
> 标签：php, mysql

我试图使用 php 删除一个 mysql 文件，这是按下删除后的代码，没有任何想法？

删除.php

```
<?php
  include("db.php");  

    $id =$_REQUEST['PlayerID'];

    // sending query
    mysql_query("DELETE FROM Player WHERE PlayerID = '$id'")
    or die(mysql_error());      

    header("Location: usersOnline.php");
?> 
```

从单独的文件在这里调用它

```
echo"<td><font face = 'Verdana' size = '3' color='black'> <a href ='del.php?Player=$id'><center>Delete</center></a>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:18:43.287

你有`?Player=$id`，但你的代码正在寻找`$_REQUEST['PlayerID']`. 这两个术语需要匹配。

* * *

您的代码也容易受到 SQL 注入的影响。研究使用带有 PDO 或 mysqli 的参数化查询。

# android - 以编程方式使用 relativeLayout 不适用于深层内部孩子

> ID：15423087
> 
> 赞同：1
> 
> 时间：2013-03-15T01:16:59.957
> 
> 标签：android, android-relativelayout

我想以编程方式使用RelativeLayout（由于某些关于动态创建的原因，我不能使用xml-layouts）。但是有一个问题，我似乎只能相对于其他“直接”孩子调整孩子。请参见以下示例：

```
public class PView extends RelativeLayout {
...

private void init(Context context) {
    int viewId = 1;

    LinearLayout center = new LinearLayout(context);
    center.setOrientation(LinearLayout.VERTICAL);

    LinearLayout.LayoutParams topParams = new LinearLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    topParams.gravity = Gravity.CENTER_HORIZONTAL;

    frontRow = new LinearLayout(context);
    frontRow.setOrientation(LinearLayout.HORIZONTAL);
    TextView tmp1 = new TextView(context);
    tmp1.setText("TEST TEXT1");
    tmp1.setBackgroundColor(Color.GREEN);
    frontRow.addView(tmp1);

    center.setId(viewId++);
    frontRow.setId(viewId++);

    center.addView(frontRow,topParams);

    LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.addRule(CENTER_IN_PARENT);
    addView(center,params);

    LayoutParams bLayoutParams = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    bLayoutParams.addRule(RelativeLayout.RIGHT_OF, frontRow.getId()); 

    bImageView = new ImageView(context);
bImageView.setImageBitmap(someBitmap);
    addView(bImageView,bLayoutParams);
} 
```

这不起作用，ImageView bImageView 没有定位在frontRow 的右侧。但是如果我使用

```
 bLayoutParams.addRule(RelativeLayout.RIGHT_OF, center.getId()); 
```

它显示在右侧（但显然与右侧组件无关）。

到底发生了什么？我并没有真正找到有关以编程方式创建RelativeLayout 的太多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:19:50.783

`RelativeLayout`的规则仅适用于作为自身直接子代的兄弟姐妹`RelativeLayout`。您正在观察的是按设计/预期工作。

# webkit - TideSDK webkit 版本会升级吗？

> ID：15423094
> 
> 赞同：1
> 
> 时间：2013-03-15T01:17:20.317
> 
> 标签：webkit, tidesdk

我在 StackOverflow 上听说 webkit 版本大约有 2 年历史了。

你会升级 webkit 吗？

或者我可以自己升级吗？

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:01:33.470

主要通过由TideSDK 核心开发人员创立的公司[CoastalForge Inc](http://coastalforge.com)的努力进行了实质性投资，以开发解决方案并为该技术的未来提供服务。

从这个角度来看，WebKit 是地球上最大的代码库之一，应用程序开发人员可能无法完全理解一段时间以来所做的努力。WebKit 每天可能有超过 100 次提交，当前产品中有三个版本的 WebKit。每个都有自己的挑战，需要修补以使我们支持的脚本语言（python、php 和 ruby​​）能够被评估。这深入到我们代码的核心（它本身是大量而复杂的）。

成功的分析和编程需要高级技能和大量时间。除了人力资源，还需要配备适当工具链的适当系统。当一切正常时，WebKit 的编译本身大约需要 4 小时。我们使用专门配备的机器来尝试减少编译周期。

毫无疑问，WebKit 在很长一段时间内都受到了相当大的关注。我们还一直在评估我们支持的平台上的升级代码。关于如何推出这项工作的公告即将发布。你可以期待在不久的将来。我们意识到任何投资该技术的人都迫切需要最高级别的 HTML5 合规性。我们确信我们将发布的内容会受到欢迎。

# objective-c - 在类定义的@interface 部分不声明任何方法的后果是什么？

> ID：15423095
> 
> 赞同：0
> 
> 时间：2013-03-15T01:17:28.460
> 
> 标签：objective-c, class, methods

即使我的@interface 部分为空白，我的代码也会编译并返回预期结果，我不知道为什么。正确的代码：

```
@interface XYPoint : NSObject
-(void) setX: (int) x;
-(void) setY: (int) y;
-(int) valueX;
-(int) valueY;

@end 
```

当@interface 看起来像这样时，代码仍然可以编译：

```
@interface XYPoint : NSObject

@end 
```

为什么当我忽略在类部分的@interface 部分声明任何方法时，代码仍然有效？

完整的代码块位于[http://pastebin.com/J40gJbbj](http://pastebin.com/J40gJbbj)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:54:31.893

当您从 .h 文件中删除声明时，您的代码将编译，因为没有其他类必须使用这些方法。

如果方法打算由其他类使用，则仅应在 .h 文件中声明方法。实际类的实现根本不需要它们。

听起来您需要返回许多 .h 文件并删除所有不必要的方法声明。

.h 中应该出现的唯一内容是供其他类使用的内容。这包括实例变量（很少有公共实例变量）、属性和方法。您添加到该`@interface`行的许多协议也应移至 .m 文件。您的所有私有 ivars、属性和协议引用都应添加到 .m 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:19:28.443

因为编译器足够聪明，可以在您的实现中找到它们，这就是它编译的原因。

它不会崩溃的原因是在 Objective-C 技术上，您可以向任何对象发送任何消息，它可能不会响应它。这就是运行时的力量。

在objective-c中，虽然我们有类型，但它们不是必需的。您可以像这样使用简单的鸭子类型：

```
id obj = ...

if ( [myObj respondsToSelector:@selector(valueX)] )
{
  // myXYPoint talks like a XYPoint
   int aXval = [(XYPoint*)myobj valueX];

  //or if you don't like the cast,
  aXval = [myObj performSelector:@selector(valueX)];

} 
```

# jquery - 需要显示一个隐藏的 div 并在用户将鼠标悬停在它上面时让它保持不变

> ID：15423096
> 
> 赞同：0
> 
> 时间：2013-03-15T01:17:31.957
> 
> 标签：jquery, html, jquery-hover

我正在尝试重新创建与此页面相同的效果[http://www.zendesk.com/company/management-team](http://www.zendesk.com/company/management-team)

我正在使用下面的代码

```
 $("#theLink").hover(
    function () {
        $("#theDiv").fadeIn();
    },
    function () {
        $("#theDiv").fadeOut();
    }
); 
```

这是我正在寻找的一半，你可以在这里看到它工作[http://jsfiddle.net/np87e/](http://jsfiddle.net/np87e/)。

我似乎无法理解如何让它以这种方式运行。我怎样才能使它与 zendesk 上的功能相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:28:34.467

[http://jsfiddle.net/np87e/405/](http://jsfiddle.net/np87e/405/)

您可以将 div 放在`<a>`标签内：

```
<a id="theLink">hover here
<div id="theDiv">this is the div</div>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:24:25.507

你可以用纯 css 做一些事情：

```
#theDiv {
    display: none;
}
#theLink:hover + #theDiv, #theDiv:hover {
    display: inherit;
} 
```

但是，这依赖于元素在 DOM 中的特定定位（即，作为兄弟姐妹），类似于@superUntitled 的答案（伪弹出窗口必须是子级）。

虽然它不会让您不必让伪弹出窗口出现在您想要转换的元素旁边（对用户），但您可以执行以下操作来解开元素在 DOM 中的位置：

```
#theDiv {
    display: none;
}
#theDiv.hovering, #theDiv:hover {
    display: inherit;
}
// ... wherever your script lives
$('#theLink').hover(function(){
 $('#theDiv').addClass('hovering');
},function(){
 $('#theDiv').removeClass('hovering');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:34:23.623

创建自己的插件怎么样？

```
(function ($) {
    $.fn.tooltip = function (options) {
        var settings = options;
        return this.each(function () {
            $(this).hover(

            function () {
                $(settings.div).stop().fadeIn();
            },

            function () {
                $(settings.div).stop().fadeOut();
            });
        });
    };
})(jQuery);

//USAGE
$("#theLink").tooltip({
    div: "#theDiv"
}); 
```

[演示](http://jsfiddle.net/np87e/406/)

# java - 编译 jar 文件，其中包含所有需要的外部源

> ID：15423103
> 
> 赞同：1
> 
> 时间：2013-03-15T01:17:59.303
> 
> 标签：java, jar

我对 Java 并不陌生，但我对这些术语也并不感到惊讶。我一直在对这些东西进行一些研究，并为在编程和编译等过程中发生的所有不同事情获得正式名称。

无论如何，我遇到的问题是能够将程序打包到一个整洁`.jar`的文件中，而不是拥有诸如“图像”和“音频”之类的外部文件夹。而不是`.jar`从外部文件夹（任何人都可以轻松编辑）访问图片的文件，我希望在`.jar`文件本身中编译图片。

我已经对已经存在的问题进行了研究，但结果要么是：

1.  它说明了如何在 Eclipse 中执行此操作（我可以跟随，但我使用 Netbeans，有时事情会变得很棘手）
2.  它说明了其他一些不同的答案，例如如何`.jar`在程序中使用外部文件。
3.  我只是不明白（由于我的技术词汇薄弱）。

有人可以帮我吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:54:17.753

我建议您考虑使用 maven 来创建项目结构、管理构建生命周期并创建 jar 工件。使用 maven，您可以指示构建过程包括依赖项和要包含的资源，所有这些都在您的 pom 文件中。

看看这个[In maven how can I include non-java src files in the same place in the output jar?](https://stackoverflow.com/questions/4509309/in-maven-how-can-i-include-non-java-src-files-in-the-same-place-in-the-output-ja) 有关如何配置 maven pom 以构建包含资源文件的 jar 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:01:56.303

您想构建一个 Maven 程序集。参见例如[http://maven.apache.org/plugins/maven-assembly-plugin/](http://maven.apache.org/plugins/maven-assembly-plugin/)

# javascript - 使用 Node.js 在 Mongo DB 中存储 JS 函数时出现问题

> ID：15423107
> 
> 赞同：5
> 
> 时间：2013-03-15T01:18:29.800
> 
> 标签：javascript, node.js, mongodb

我有一个简单的 JS 类：

```
var User = function(id){
    this._id = id;
    this.sayHello = function (){
        return "hello";
    }
} 
```

然后我使用默认的 Node.js 驱动程序将其存储在 MongoDB 中：

```
users.insert(new User(1)); 
```

最后，我检索用户，并尝试执行该函数：

```
users.findOne({_id:1}, function(err, item) {
    console.log("Say hello: " + item.sayHello());
}); 
```

我收到以下错误，这确实令人困惑：

```
 throw err;
          ^
TypeError: Object #<Object> has no method 'sayHello' 
```

我完全迷失了这个。我的理解是 MongoDB 按原样存储 JS 函数和属性。如果不是这种情况，你能推荐我如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T01:22:06.900

Mongo 不能存储函数（代码），只能存储数据。获取您返回的原始数据并将其传递给构造函数，或者考虑像猫鼬这样的 ODM。

有一组非常具体且有限的条件，您可以在其中以字符串形式发送 mongo 函数代码并在服务器上对其进行评估。这些记录在[MongoDB 手册](http://docs.mongodb.org/manual/applications/server-side-javascript/)中。但是，在 mongo 中运行的代码的目的是支持复杂的数据查询操作，而不是对应用程序逻辑进行建模，这正是这个问题所要问的。应用程序逻辑位于您的 node.js 模块`.js`文件中。数据进入数据库。

# java - JVM 字节码指令 Tload_ 与负载

> ID：15423111
> 
> 赞同：2
> 
> 时间：2013-03-15T01:19:18.297
> 
> 标签：java, optimization, jvm, bytecode

我最近一直在研究 JVM 字节码，我想知道是否重组性能关键代码以利用 Tload_<n> 指令（aload_0、aload_1、aload_2 等）而不是两个操作数 Tload 指令将净任何明显的性能优势？

这完全属于“您永远不需要的微优化”的类别，但将其视为学术好奇心。如果一个方法可以将其局部变量表保持在 7 个条目以下，那么可以表现出哪些性能优势（如果有）？我认为这可能只会导致字节码变得更小。

高质量链接到字节码级别优化的阅读材料的奖励积分！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T01:28:03.263

短负载的存在主要是因为 Java 字节码的最初目的。最初，该语言是为机顶盒设计的，并且尽可能紧凑，因此认为使用特殊短版本的常用指令是值得的，以节省 RAM/ROM。

在解释器中还有一个微小的性能优势，因为可以使用内置的必要偏移单独编码解释器例程。

但是，在 JITCed 代码中没有区别——所有操作都将折叠成相同的逻辑，这可能会利用短机器指令来实现短偏移，但与短字节码的边界不同。

# vb.net - 检查文本框输入是否为数字

> ID：15423114
> 
> 赞同：1
> 
> 时间：2013-03-15T01:19:37.073
> 
> 标签：vb.net, validation, text, numeric

我已经对此进行了一些研究，但仍然无法让我的程序正常工作。我只需要检查文本框以查看用户输入是否为数值（“。”和或“/”除外）

到目前为止我的代码，

```
 Private Sub Num1_KeyPress(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Num1.KeyPress
    Dim UserEntry As Boolean
    If UserEntry = IsNumeric(False) Then
        MessageBox.Show("That's not numeric!")
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T02:29:08.343

我建议处理 TextChanged 并检查整数而不是单个字符。

```
Private Sub Num1_TextChanged(sender As Object, e As TextChangedEventArgs) Handles Num1.TextChanged
        If IsInputNumeric(Num1.Text) Then
            'handle numeric input
        Else
            'handle not a number
        End If
    End Sub

    Private Function IsInputNumeric(input As String) As Boolean
        If String.IsNullOrWhiteSpace(input) Then Return False
        If IsNumeric(input) Then Return True
        Dim parts() As String = input.Split("/"c)
        If parts.Length <> 2 Then Return False
        Return IsNumeric(parts(0)) AndAlso IsNumeric(parts(1))
    End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T01:31:16.320

我认为你最好使用`TextBox.KeyUp`事件，它通过`KeyEventArgs`. 尝试这个 ：

```
Private Sub Num1_KeyUp(sender As System.Object, e As System.Windows.Forms.KeyEventArgs) Handles Num1.KeyUp

    Dim isDigit As Boolean = Char.IsDigit(ChrW(e.KeyValue))
    Dim isKeypadNum As Boolean = e.KeyCode >= Keys.NumPad0 And e.KeyCode <= Keys.NumPad9
    Dim isBackOrSlashOrPeriod As Boolean = (e.KeyCode = Keys.Decimal Or e.KeyCode = Keys.Oem2 Or e.KeyCode = Keys.Back Or e.KeyCode = Keys.OemPeriod)

    If Not (isDigit Or isKeypadNum Or isBackOrSlashOrPeriod) Then
        MessageBox.Show("That's not numeric!")
    End If

End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:28:24.223

我发现这种验证在文本框的`LostFocus`事件处理程序中或在表单级别（例如，当用户单击确定按钮时）更容易进行。

然后您可以按如下方式进行验证

**a）**文本框是否包含任何字符，`"0123456789./"`如果是，那么非数字

**b)**在字符出现的任何地方（如果有）拆分文本`"/"`，然后`IsNumeric()`在每个子字符串上使用该函数。如果其中任何一个不是数字，则文本不是数字。

这确实假设您允许 1/2/2，即 1/4。如果没有，那么您还必须检查字符串中最多有 1 个“/”字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T01:47:05.697

```
Public Function onlyNumbers(ByVal KeyChar As Char) As Boolean
    Dim allowedChars As String

    allowedChars = "0123456789./" 

    If allowedChars.IndexOf(KeyChar) = -1 And (Asc(KeyChar)) <> 8 Then 
        Return True
    End If

    Return False
End Function 
```

true 表示无效字符。

在按键上，您需要执行以下操作：

```
e.handled = onlyNumbers(e.keychar) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-27T19:25:42.547

```
Private Sub tbYear_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles tbYear.KeyPress
    If e.KeyChar < Chr(48) Or e.KeyChar > Chr(57) Then
        e.KeyChar = Nothing
    End If
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-16T00:26:56.427

```
' Validates textboxes for numeric only keystrokes.  Hook this up to the 
' PreviewTextInput of the desired textbox
Private Sub SetTextboxNumericOnly(sender As Object,
                                  e As TextCompositionEventArgs)

    Dim regex As New System.Text.RegularExpressions.Regex("[^0-9]+")
    e.Handled = regex.IsMatch(e.Text)

End Sub 
```

请记住，您仍然需要检查文本框是否包含值，以防他们删除文本框的内容。此例程确保它始终是数字，因此不再需要检查。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-23T18:08:15.520

[稍稍切线，根据对在visual basic中检查文本框中输入的数值](https://stackoverflow.com/questions/21894851/checking-for-numeric-value-entered-in-text-box-in-visual-basic)的问题的最佳答案，还有方法[.TryParse](https://msdn.microsoft.com/en-us/library/system.double.tryparse(v=vs.110).aspx)被认为是比 IsNumeric 更好的解决方案：

> 第一个原因是，使用 TryParse 您还可以获得转换结果，而使用 IsNumeric 您必须在检查后进行转换。
> 
> 第二个原因是你可以给 IsNumeric 任何你想要的对象（例如也是一个按钮）并且它接受它。你永远不会在编译时发现这种错误。相反，使用 TryParse，您只能传递一个字符串作为其第一个参数。

# ios - 在 iOS 中为围棋/黑白棋建模

> ID：15423117
> 
> 赞同：1
> 
> 时间：2013-03-15T01:19:53.420
> 
> 标签：ios, uiview, grid

我正在尝试创建一个围棋/黑白棋棋盘。

[![登船](../Images/a8e7029dc348e7c9df56c2a7cfcf4b3a.png)](https://i.stack.imgur.com/9aSMM.png)
[（来源：[xmp.net](http://senseis.xmp.net/diagrams/29/ad217a381dbb8bc75d8420f6aec40af5.png)）]

我不知道我会怎么做。我尝试查找如何使用 UICollectionView 但这真的很混乱。我在网上看到的例子似乎已经过时了，或者它们并没有真正的 MxN 网格结构

目标是能够触摸棋盘上的一个点并在该位置创建一个围棋棋子。我还需要能够查看相邻棋子的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:25:08.327

您需要手动绘制网格。[iOS 绘图指南](http://developer.apple.com/library/ios/ipad/#documentation/2DDrawing/Conceptual/DrawingPrintingiOS/Introduction/Introduction.html) 会有所帮助。
这里还有很好的[RayWenderlich 教程](http://www.raywenderlich.com/29228/how-to-develop-an-ipad-board-game-app-part-12)

# go - 如何使用 struct 作为地图的替代品？

> ID：15423122
> 
> 赞同：4
> 
> 时间：2013-03-15T01:20:22.153
> 
> 标签：go

我阅读了 Caleb Doxsey 的“GO 编程简介”。在第 6 章中，他举了一个例子：

```
package main

import "fmt"

func main() {
    elements := map[string]map[string]string{
        "H": map[string]string{
            "name":  "Hydrogen",
            "state": "gas",
        },
        "He": map[string]string{
            "name":  "Helium",
            "state": "gas",
        },
        "Li": map[string]string{
            "name":  "Lithium",
            "state": "solid",
        },
        "Be": map[string]string{
            "name":  "Beryllium",
            "state": "solid",
        },
        "B": map[string]string{
            "name":  "Boron",
            "state": "solid",
        },
        "C": map[string]string{
            "name":  "Carbon",
            "state": "solid",
        },
        "N": map[string]string{
            "name":  "Nitrogen",
            "state": "gas",
        },
        "O": map[string]string{
            "name":  "Oxygen",
            "state": "gas",
        },
        "F": map[string]string{
            "name":  "Fluorine",
            "state": "gas",
        },
        "Ne": map[string]string{
            "name":  "Neon",
            "state": "gas",
        },
    }

    if el, ok := elements["Li"]; ok {
        fmt.Println(el["name"], el["state"])
    }
} 
```

他评论了这个例子，“虽然地图经常被这样使用，但在第 9 章中，我们将看到一种更好的存储结构化信息的方法。” 第 9 章是关于结构和接口的。

对于上面的示例，用结构和接口存储结构化信息的更好方法是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T01:46:16.413

```
type element struct {
    name  string
    state string
}

func main() {
    elements := map[string]element{
        "H":  {"Hydrogen", "gas"},
        "He": {"Helium", "gas"},
        "Li": {"Lithium", "solid"},
        "Be": {"Beryllium", "solid"},
        "B":  {"Boron", "solid"},
        "C":  {"Carbon", "solid"},
        "N":  {"Nitrogen", "gas"},
        "O":  {"Oxygen", "gas"},
        "F":  {"Fluorine", "gas"},
        "Ne": {"Neon", "gas"},
    }
    if el, ok := elements["Li"]; ok {
        fmt.Println(el.name, el.state)
    }
} 
```

[http://play.golang.org/p/vIbA5Qs7SD](http://play.golang.org/p/vIbA5Qs7SD)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T01:55:20.040

例如，

```
package main

import "fmt"

type Element struct {
    Symbol, Name, State string
}

func main() {

    elements := []Element{
        {"H", "Hydrogen", "gas"},
        {"He", "Helium", "gas"},
        {"Li", "Lithium", "solid"},
    }
    symbols := make(map[string]*Element)
    for i := range elements {
        symbols[elements[i].Symbol] = &elements[i]
    }
    if el, ok := symbols["Li"]; ok {
        fmt.Println(el.Symbol, el.Name, el.State)
    }
} 
```

输出：

```
Li Lithium solid 
```

# c - 读取文件并返回c中的缓冲区变量

> ID：15423128
> 
> 赞同：0
> 
> 时间：2013-03-15T01:20:37.947
> 
> 标签：c

我需要从文件中读取文本并将其传递回主函数，并且在 EOF 之后我总是得到额外的 3 个字符，为什么会这样？

```
#include<stdio.h>
#include<string.h>

int activenw(char *);

void main()
{
    char act_con[50];
    int len,i;
    len=activenw(act_con);
    for(i=0;i<=len;i++)
    {
        printf("%c",act_con[i]);
    }
}

int activenw(char *buff)
{
    char ch="\0";
    FILE *fp;
    int i=0;
    fp=fopen("abc.txt","r");
    if(fp==NULL)
    {
        printf("Error opening a file :");
        exit(0);
    }
    while((ch=fgetc(fp))!=EOF)
    {
        printf("%c",ch);
        *buff=ch;
        buff++;
        i++;
    }
    fclose(fp);
    return i;
} 
```

这个实现是正确的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:24:42.717

在您的函数中，您实际上并没有以空值终止字符串。除非您的“字符串”能够包含 NUL 字符，否则最好将其*视为*字符串而不是字符数组。但是，这只是一般建议，与您的具体问题无关。

首先， from 的返回码`fgetc`是`int`(not `char`)，因为它必须能够表示每个字符*plus* `EOF`。

其次，`"\0"`不是字符，它是指向字符串常量的字符*指针。*如果你想要 NUL*字符，*你应该使用单引号，而不是双引号。

最后，你的循环`main`打印出字符：它使用`<=`which 会给你比你想要的多一个字符 -`<`改为使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:53:55.750

假设 len == 0，这个循环会运行多少次？`for(i=0;i<=len;i++)`这就是你打印*零个*字符的方式吗？

a 可以`char`代表 a 的所有值`unsigned char`吗？它可能具有这种能力......如果可以，它是否也代表负值`EOF`？假设`char`是无符号类型，考虑 的有符号性`(ch=fgetc(fp))`。永远`(unsigned char) EOF`平等`EOF`吗？fgetc 返回`int`，它这样做是因为它`int`可以表示每个`unsigned char`值以及负值`EOF`。`ch`显然应该是`int`，因此您可以正确区分`EOF`（非字符）和`unsigned char`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:16:16.000

首先，将 i <= len 更改为 i < len，这样它就不会再计算 1 个字符。其次，使用 hexdump 程序检查您的文件是否没有额外的换行符或初始 unicode 字节顺序标记。

# android - 为什么我会收到此错误 - RunTimeException：无法实例化活动？

> ID：15423131
> 
> 赞同：2
> 
> 时间：2013-03-15T01:21:05.293
> 
> 标签：android

我的 LogCat 说：

```
java.lang.RunTimeException: Unable to instantiate activity ComponentInfo{com.erikbalen.idealgaslawcalculator/com.erikbalen.idealgaslawcalculator.NumberActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity{ActivityThread.java:2121} 
```

这是我的java文件：

```
public class NumberActivity extends Activity {

EditText pressure = (EditText) findViewById(R.id.editTextPressure);
EditText temperature = (EditText) findViewById(R.id.editTextTemperature);
EditText volume = (EditText) findViewById(R.id.editTextVolume);
TextView answer = (TextView) findViewById(R.id.textViewSolve);
Button solve = (Button) findViewById(R.id.buttonSolve);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_number);
    solve.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            double pressureValue = Double.parseDouble(pressure.getText().toString());
            double temperatureValue = Double.parseDouble(temperature.getText().toString());
            double volumeValue = Double.parseDouble(volume.getText().toString());
            double r = 0.0821;
            double answerValue = (pressureValue*volumeValue)/(r*temperatureValue);
            answer.setText(Double.toString(answerValue));
        }
    });
}

} 
```

希望这就是你所需要的。如果您需要其他代码，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T01:22:13.610

移动`findViewById()`电话

```
EditText pressure = (EditText) findViewById(R.id.editTextPressure);
EditText temperature = (EditText) findViewById(R.id.editTextTemperature);
EditText volume = (EditText) findViewById(R.id.editTextVolume);
TextView answer = (TextView) findViewById(R.id.textViewSolve);
Button solve = (Button) findViewById(R.id.buttonSolve); 
```

所以他们追求`setContentView(R.layout.activity_number);`

`findViewById()`如果在布局中`null`找不到，将返回。`View`如果没有布局，就`View`找不到。`Activity`首次实例化时肯定没有设置布局。

# image - matlab将RGB图像转换为yuv420图像

> ID：15423132
> 
> 赞同：1
> 
> 时间：2013-03-15T01:21:05.413
> 
> 标签：image, matlab, image-processing

我想将 RGB 图像转换为 yuv420 图像，这是我的 Matlab 代码：

```
ColorImageRGB = imread('view1.png');
ColorImageYUV = rgb2ycbcr(ColorImageRGB);

[rows cols d] = size(ColorImageRGB);
dims = [cols rows];
dimsUV = uint8(dims / 2);
Yd = zeros(dimsUV);
UVd = zeros(dimsUV);

Y = Yd';
U = UVd';
V = UVd';
Y = uint8(Y);
U = uint8(U);
V = uint8(V);

%sample:420
for i = 1 : rows
    for j = 1 : cols
        %sample Y in every row
        r = ColorImageRGB(i,j,1);
        g = ColorImageRGB(i,j,2);
        b = ColorImageRGB(i,j,3);
        Y(i,j) = 0.299 * r + 0.587 * g + 0.114 * b + 16;
        %old line : sample 1/2 U
        if mod(i,2) == 1
            index_i = uint8(i / 2);
            index_j = uint8(j / 2);
            U(index_i,index_j) = -0.147 * r - 0.289 * g + 0.436 * b + 128;
        end
        %even line : sample 1/2 V
        if mod(i,2) == 0
            index_i = uint8(i / 2);
            index_j = uint8(j / 2);
            V(index_i,index_j) = 0.615 * r - 0.515 * g - 0.1 * b + 128;
        end
    end
end

filename = 'view1.yuv';
fid=fopen(filename,'w');
count = fwrite(fid,Y','ubit8');
count = fwrite(fid,U','ubit8');
count = fwrite(fid,V','ubit8');
count = fwrite(fid,Y','ubit8');
count = fwrite(fid,U','ubit8');
count = fwrite(fid,V','ubit8');
fclose(fid); 
```

view1.png：</p>

![在此处输入图像描述](../Images/b78e0bc1c621d8f665fb19dcc9816f6a.png)

当我得到 yuv 图像时，我是这样读取的（我尝试读取其他 yuv 图像，这段代码可以正常工作）：

```
[Y U V] = yuv_import('view1.yuv',[cols rows],2);
rgb=yuv2rgb(Y{1},U{1},V{1});
imwrite(rgb,'test.bmp','bmp'); 
```

但是test.bmp和view1.png不一样： ![在此处输入图像描述](../Images/45fefc6b8be20e2fdc6e18693debe405.png)

那么，问题来了，将rgb图像转换为yuv图像的代码有什么问题？Thx。</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T05:00:49.940

```
ColorImageRGB = imread('view1.png');
ColorImageYUV = rgb2ycbcr(ColorImageRGB);

[rows cols d] = size(ColorImageRGB);
dims = [cols rows];
dimsUV = uint8(dims / 2);
Yd = zeros(dimsUV);
UVd = zeros(dimsUV);

Y = Yd';
U = UVd';
V = UVd';
Y = uint8(Y);
U = uint8(U);
V = uint8(V);

%sample:420
for i = 1 : rows
    for j = 1 : cols
        %sample Y in every row
        r = ColorImageRGB(i,j,1);
        g = ColorImageRGB(i,j,2);
        b = ColorImageRGB(i,j,3);
        Y(i,j) = 0.299 * r + 0.587 * g + 0.114 * b + 16;
        %old line : sample 1/2 U
        if mod(i,2) == 1
            index_i = uint8(i / 2);
            index_j = uint8(j / 2);
            U(index_i,index_j) = -0.147 * r - 0.289 * g + 0.436 * b + 128;
        end
        %even line : sample 1/2 V
        if mod(i,2) == 0
            index_i = uint8(i / 2);
            index_j = uint8(j / 2);
            V(index_i,index_j) = 0.615 * r - 0.515 * g - 0.1 * b + 128;
        end
    end
end

filename = 'view1.yuv';
fid=fopen(filename,'w');
count = fwrite(fid,Y','ubit8');
count = fwrite(fid,U','ubit8');
count = fwrite(fid,V','ubit8');
count = fwrite(fid,Y','ubit8');
count = fwrite(fid,U','ubit8');
count = fwrite(fid,V','ubit8');
fclose(fid);

figure(1);
[Y U V] = yuv_import('view1.yuv',[cols rows],2);
rgb=yuv2rgb(Y{1},U{1},V{1});
imwrite(rgb,'test.bmp','bmp'); 
a = imread('test.bmp');
subplot(1,2,1);
imshow(a);

ColorImageRGB = double(imread('view1.png'));
ColorImageYUV = rgb2ycbcr(ColorImageRGB);

[rows cols d] = size(ColorImageRGB);
dims = [cols rows];
dimsUV = uint8(dims / 2);
Yd = zeros(dimsUV);
UVd = zeros(dimsUV);

Y = Yd';
U = UVd';
V = UVd';
Y = uint8(Y);
U = uint8(U);
V = uint8(V);

%sample:420
for i = 1 : rows
    for j = 1 : cols
        %sample Y in every row
        r = ColorImageRGB(i,j,1);
        g = ColorImageRGB(i,j,2);
        b = ColorImageRGB(i,j,3);
        Y(i,j) = 0.299 * r + 0.587 * g + 0.114 * b + 16;
        %old line : sample 1/2 U
        if mod(i,2) == 1
            index_i = uint8(i / 2);
            index_j = uint8(j / 2);
            U(index_i,index_j) = -0.147 * r - 0.289 * g + 0.436 * b + 128;
        end
        %even line : sample 1/2 V
        if mod(i,2) == 0
            index_i = uint8(i / 2);
            index_j = uint8(j / 2);
            V(index_i,index_j) = 0.615 * r - 0.515 * g - 0.1 * b + 128;
        end
    end
end

filename = 'view1.yuv';
fid=fopen(filename,'w');
count = fwrite(fid,Y','ubit8');
count = fwrite(fid,U','ubit8');
count = fwrite(fid,V','ubit8');
count = fwrite(fid,Y','ubit8');
count = fwrite(fid,U','ubit8');
count = fwrite(fid,V','ubit8');
fclose(fid);

[Y U V] = yuv_import('view1.yuv',[cols rows],2);
rgb=yuv2rgb(Y{1},U{1},V{1});
imwrite(rgb,'test.bmp','bmp'); 
a = imread('test.bmp');
subplot(1,2,2);
imshow(a); 
```

输出：

![在此处输入图像描述](../Images/f03596458d91a215b89bc660401dbc05.png)

# c - 从C中的文件中读取混合字符和文字数字

> ID：15423134
> 
> 赞同：-1
> 
> 时间：2013-03-15T01:21:21.303
> 
> 标签：c, scanf

假设我想读入数字 1 乘以数字 4

```
5000     49     3.14     Z      100
0322     35     9.21     X      60 
```

目前我有，但只能复制信息而不能操纵信息

```
#include <stdio.h>
#include <stdlib.h>
#define FILE_1 "File1.txt"
#define FILE_2 "File2.txt"
int main (void)
{
    // Local Declarations 
    char score;
    int curCh;
    int count = 0;
    FILE* sp1;
    FILE* sp2;

    if (!(sp1 = fopen (FILE_1, "r"))) //check if file is there
    {
        printf ("\nError opening %s.\n", FILE_1);
        return (1);
    } // if open error 
    if (!(sp2 = fopen (FILE_2, "w")))
    {
        printf ("\nError opening %s.\n", FILE_2);
        return (2);
    } // if open error

    while((curCh = fgetc(sp1)) != EOF)
    {
        printf ("%c", curCh); //copy the contents
            count++;
    } // while 

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:24:39.427

同意 Randy 和 Jonathan 的意见，您应该使用 fgets() 来处理整行。如果您知道定界符（如制表符）和已知列，则可以使用 strtok() 在定界符上标记您的行，然后使用计数来提取您想要的值。

除了 sscanf() 之外，您还可以~~使用 atoi() 和 atof()~~ *成功使用* **strtol()**，如下面 Randy 的评论中所述，并在 StackOverflow 的其他地方引用：

*   [已弃用的 C 函数列表？](https://stackoverflow.com/questions/2892951/list-of-deprecated-c-functions)
*   [atoi() — 字符串到 int](https://stackoverflow.com/questions/1488569/c-atoi-string-to-int)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:24:09.210

将 1 乘以 4 很容易：`1 * 4`.

你的意思是“乘以`better_identifier`，`best_identifier`从`uint64_t`同一个文件中读取的值”？您能想到的最佳标识符是什么？

你需要这些`#include`：

```
#include <stdio.h>
#include <assert.h>
#include <stdint.h>
#include <inttypes.h> 
```

不要忘记注释掉这个：

```
/*while((curCh = fgetc(sp1)) != EOF)
{
    printf ("%c", curCh); //copy the contents
        count++;
}*/ // Make sure you comment this, because the side-effect of this
    // ... won't allow you to do anything else with sp1, until you
    // ... rewind 
```

顺便问一下，你在看哪本书？

```
uint64_t better_identifier = 0, best_identifier = 0;
assert(fscanf(sp1, "%"SCNu64" %*d %*g %*c %"SCNu64, &better_identifier, &best_identifier) == 2);
printf("%"PRIu64" * %"PRIu64" = %"PRIu64"\n", better_identifier, best_identifier, better_identifier * best_identifier); 
```

也许您打算使用`x`and`y`作为标识符。当然，您可以想出比这更好的标识符！

```
uint64_t x = 0, y = 0;
assert(fscanf(sp2, "%"SCNu64" %*d %*g %*c %"SCNu64, &x, &y) == 2);
printf("%"PRIu64" * %"PRIu64" = %"PRIu64"\n", x, y, x * y); 
```

# unix - 找到字符串并打印出unix脚本之前和之后的行

> ID：15423135
> 
> 赞同：-1
> 
> 时间：2013-03-15T01:21:27.387
> 
> 标签：unix, printing, scripting

现在我有这个代码

```
 FNR==NR  { id[$0]; next } 
 $0 in id { f=1 }         
 f                          
 NF==0    { f=0 } 
```

我也想在找到字符串之前打印出该行。

我将如何修改此代码来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T04:51:33.423

这是我提到的 Perl 脚本，`sgrep`. 今年的变化是使用`#!/usr/bin/env perl`而不是`#!/path/to/perl/v5.16.2/bin/perl`线。否则，它是在 2007 年 9 月写的。我预计还有改进的余地。

```
#!/usr/bin/env perl
#
# @(#)$Id: sgrep.pl,v 1.7 2013/01/28 02:07:18 jleffler Exp $
#
# Perl-based SGREP (special grep) command
# 
# Print lines around the line that matches (by default, 3 before and 3 after).
# By default, include file names if more than one file to search.
#
# Options:
# -b n1     Print n1 lines before match
# -f n2     Print n2 lines following match
# -n        Print line numbers
# -h        Do not print file names
# -H        Do     print file names

use warnings;
use strict;
use constant debug => 0;
use Getopt::Std;
my(%opts);

sub usage
{
    print STDERR "Usage: $0 [-hnH] [-b n1] [-f n2] pattern [file ...]\n";
    exit 1;
}

usage unless getopts('hnf:b:H', \%opts);
usage unless @ARGV >= 1;

if ($opts{h} && $opts{H})
{
    print STDERR "$0: mutually exclusive options -h and -H specified\n";
    exit 1;
}

my $op = shift;

print "# regex = $op\n" if debug;

# print file names if -h omitted and more than one argument
$opts{F} = (defined $opts{H} || (!defined $opts{h} and scalar @ARGV > 1)) ? 1 : 0;
$opts{n} = 0 unless defined $opts{n};

my $before = (defined $opts{b}) ? $opts{b} + 0 : 3;
my $after  = (defined $opts{f}) ? $opts{f} + 0 : 3;

print "# before = $before; after = $after\n" if debug;

my @lines = (); # Accumulated lines
my $tail  = 0;  # Line number of last line in list
my $tbp_1 = 0;  # First line to be printed
my $tbp_2 = 0;  # Last line to be printed

# Print lines from @lines in the range $tbp_1 .. $tbp_2,
# leaving $leave lines in the array for future use.
sub print_leaving
{
    my ($leave) = @_;
    while (scalar(@lines) > $leave)
    {
        my $line = shift @lines;
        my $curr = $tail - scalar(@lines);
        if ($tbp_1 <= $curr && $curr <= $tbp_2)
        {
            print "$ARGV:" if $opts{F};
            print "$curr:" if $opts{n};
            print $line;
        }
    }
}

# General logic:
# Accumulate each line at end of @lines.
# ** If current line matches, record range that needs printing
# ** When the line array contains enough lines, pop line off front and,
#    if it needs printing, print it.
# At end of file, empty line array, printing requisite accumulated lines.

while (<>)
{
    # Add this line to the accumulated lines
    push @lines, $_;
    $tail = $.;

    printf "# array: N = %d, last = $tail: %s", scalar(@lines), $_ if debug > 1;

    if (m/$op/o)
    {
        # This line matches - set range to be printed
        my $lo = $. - $before;
        $tbp_1 = $lo if ($lo > $tbp_2);
        $tbp_2 = $. + $after;
        print "# $. MATCH: print range $tbp_1 .. $tbp_2\n" if debug;
    }

    # Print out any accumulated lines that need printing
    # Leave $before lines in array.
    print_leaving($before);
}
continue
{
    if (eof)
    {
        # Print out any accumulated lines that need printing
        print_leaving(0);
        # Reset for next file
        close ARGV;
        $tbp_1 = 0;
        $tbp_2 = 0;
        $tail  = 0;
        @lines = ();
    }
} 
```

`-b 1`它对匹配前的行和匹配后的行使用选项，`-f 1`而不是`-A`and `-B`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:55:12.073

如果您有 gnu grep 或支持 grep 的 grep `-C`，您可以执行以下操作：

```
grep -w -f file1 -C 1 input 
```

make只匹配整个单词，旨在模仿脚本的匹配，但不会`-w`做完全相同的事情（我不清楚你想要做什么匹配）你可能更愿意省略.`grep``awk``-w`

在 awk 中，您可以执行以下操作：

```
FNR==NR  { id[$0]; next }
$0 in id { print prev; f=1 }         
f{ f += 1; print}                          
f == 3 { f=0 }
{ prev = $0 } 
```

# clojure - 如何在不发出 ajax 请求的情况下将 edn 从 clojure 传递给 clojurescript（即通过打嗝生成的页面）

> ID：15423136
> 
> 赞同：5
> 
> 时间：2013-03-15T01:21:31.310
> 
> 标签：clojure, clojurescript, hiccup, edn

我正在使用 clojure 和 clojurescript 开发 RIA。后端使用打嗝来生成结果 html，比如

```
(html5 
[:head 
  (include-js "/js/my-cljs-generated.js")]
[:body ... ]) 
```

如何在生成的 html 中将 edn(hashmap、vector 等) 传递给 clojurescript，即不进行 ajax 调用？

我想让打嗝做这样的事情：

```
(include-edn 
   "var_name" {:foo :bar}) ; or any other clojure data 
```

并且能够以某种方式（例如通过名称）从 cljs 访问传递的 edn。

目前我的实现有点hacky并将edn存储在全局js var中

```
(hiccup/javascript-tag (str "var edn = \""
                       (pr-str my-clojure-data) "\";")) 
```

并且在 cljs 方面确实喜欢

```
(jayq/document-ready 
  (fn []
    (if-let [edn (.-edn js/window)]
      (do-something-with (cljs.reader/read-string edn))
    )
    ...
) 
```

也许有更惯用的方式来实现这一目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-07T17:06:30.350

你的方法很好。如果您担心手动创建 JavaScript 代码，另一种方法是将`pr-str`作为数据的结果放在定义明确的元素中。类似于以下内容：

```
[:div {:style {:display "hidden"}
       :id "server-originated-data"
       :data-var-1 (pr-str var-1)
       :data-var-2 (pr-str var-2)}] 
```

然后，您可以使用以下内容从 ClojureScript 获取该数据：

```
(defn get-data
  [tag]
  (-> (.getElementById js/document "server-originated-data")
      (.getAttribute (str "data-" tag))
      (cljs.reader/read-string))) 
```

不过，同样，您的方法很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T20:47:42.227

您的“实施”非常好。如果这会让你感觉更舒服，请将其包装在一个函数中:)

如果您发出例如已编译的 ClojureScript，则不会有什么不同；该值仍然是全局且可变的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T10:37:12.417

您可以考虑使用推送（基于事件）的方法，而不是拉取：将生成的 edn 数据作为字符串放置在 [:script] 标记内，作为 javascript 调用 clojurescript 函数的参数。当浏览器加载脚本时，它会将 edn 发送到您的处理函数，允许您的应用程序加载它。

这将比您当前的方法更惯用，因为它不需要状态或全局数据，并且如果需要，可以很容易地适应以后使用 ajax。

# php - 仅在 safari 和 chrome 中我的网页下方的奇怪空间

> ID：15423137
> 
> 赞同：0
> 
> 时间：2013-03-15T01:21:36.337
> 
> 标签：php, html, css, google-chrome, safari

我的联系页面底部有一个空白区域，我不知道为什么。它只发生在我所知道的 chrome 和 safari 中。 [http://tshirthideout.com/contact-us/](http://tshirthideout.com/contact-us/)

我不认为问题出在我的页脚模板中，因为它只在联系页面上。所以这是我的页面内容代码。

```
<?php
/**
 * The template for displaying all pages.
 *
 * This is the template that displays all pages by default.
 * Please note that this is the WordPress construct of pages
 * and that other 'pages' on your WordPress site will use a
 * different template.
 *
 * @package WordPress
 * @subpackage Twenty_Twelve
 * @since Twenty Twelve 1.0
 */

get_header(); ?>

<div style="position: relative; top: -35px; left: 3px; display: block;margin-bottom: 40px;">

    <div id="ribbon"><span style="padding-left: 11px; color: #fff;
        text-shadow: 1px 1px 0px #c1c1c1,2px 2px 0px #c1c1c1;
        font-size: 30px;font-family:'Century Gothic',futura,'URW Gothic L',Verdana,sans-serif;
        text-transform: uppercase;"><strong><h1 style="position: absolute; top: 0px; left: 11px;"><?php the_title(); ?></h1></strong></span></div>
<div style="right: 5px; top: 48px; position: absolute; display: block;"><form class="widget-area" role="search" method="get" id="searchform" action="<?php echo home_url( '/' ); ?>">
    <div><label class="screen-reader-text" for="s">Search for:</label>
        <input type="text" value="" name="s" id="s" />
        <input type="submit" id="searchsubmit" value="" />
    </div>
</form></div>
</div>
    <div id="primary" class="site-content">
        <div id="content" role="main">

            <?php while ( have_posts() ) : the_post(); ?>
                <?php get_template_part( 'content', 'page' ); ?>

            <?php endwhile; // end of the loop. ?>

        </div><!-- #content -->
    </div><!-- #primary -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:26:40.280

`<iframe src="about:blank" style="height: 0px; width: 0px; visibility: hidden; border: none;">...</iframe>`这个元素引起的那个空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T01:32:44.790

你应该添加`Display:block`到 iframe

# ios - 有没有办法判断 iOS 应用程序是否意外关闭？（崩溃，强制关闭）

> ID：15423138
> 
> 赞同：3
> 
> 时间：2013-03-15T01:21:52.143
> 
> 标签：ios

如果应用程序上次意外关闭，我想在应用程序启动时做一些事情。（崩溃，强制关闭），我怎么知道？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T01:29:16.407

我通过在应用启动时和应用进入前台时在 NSUserDefaults 中设置 a`BOOL`来做到这一点。`YES`

`NO`我在应用程序进入后台时设置了相同的值。

在开始时`didFinishLaunchingWithOptions`（在将标志设置为 YES 之前），我检查标志当前是否设置为`YES`. 如果是`YES`，那么我知道该应用程序不干净地崩溃了。

但是，这不会检查应用程序是否在后台被杀死（由操作系统或用户）。

您可以通过在应用程序进入后台时设置标志并在应用程序进入前台时清除标志来在后台（由操作系统或用户）处理强制关闭。然后在方法中检查这个标志`didFinishLaunchingWithOptions`。如果设置了这个标志，那么你就知道你的应用程序在后台被杀死了。

请记住，在后台强制关闭不应真正被视为“意外关闭”。其实挺期待的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T01:27:24.260

是的，您可以这样做：最简单的方法是在目录中创建一个具有已知名称的`<Application_Home>/Documents/`文件，然后在“正常”退出时删除该文件。如果文件在启动时就在那里，您就知道之前的退出不是“正常”退出。

您可以定期更新文件的内容，每分钟在计时器上写入当前时间戳。这样您就可以大致了解异常退出发生的时间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-09T18:14:28.713

我将发布此内容以供将来参考：

对于额外的覆盖检查活动状态

*   (void)applicationDidBecomeActive:(UIApplication *)application
*   (void)applicationWillResignActive:(UIApplication *)application

然后使用 nsuserdefaults 跟踪状态

后台检查的主要区别在于，当应用程序仍在前台执行时，当用户通过应用程序切换器立即关闭应用程序时，这些检查覆盖了边缘情况。我认为这也有助于后台兼容的应用程序

我认为它可能会给你更多的覆盖范围之间的碰撞和力量关闭这些......虽然我还没有测试过电池耗尽

# python - 使用 RegEx 从伪标签之间提取数据（不能使用 BeautifulSoup）

> ID：15423142
> 
> 赞同：1
> 
> 时间：2013-03-15T01:22:28.223
> 
> 标签：python, xml, regex, import, html-parsing

我一直在尝试各种方式，无论我做什么，我都会得到一个空白输出。这是我试图导入和解析的文件中的缩短版本：

```
<PRESOL>
<DATE>0310
<AGENCY>Defense Logistics Agency
<DESC>*(this is full of HTML tags and the such)*
<URL>https://www.fbo.gov/spg/DLA/J3/DSCR-BSM/SPE4A713R0575/listing.html
<SETASIDE>N/A
</PRESOL> 
```

我想为每个 DATE、AGENCY、DESC、URL 和 SETASIDE 创建一个包含一列的表，因为在“PRESOL”标签之间有 100 个这样的条目。每个标签的数据之后也有返回，当我将它拉入 python 时，它会显示为“\n”。这是我到目前为止尝试过的正则表达式（s 是我将文件读入并重新导入的变量）：

```
testall = re.findall(r'<PRESOL>\n<DATE>(.*?)\n<AGENCY>(.*?)\n<DESC>(.*?)\n<URL>(.*?)\n<SETASIDE>(.*?)\n</PRESOL>', s) 
```

我在没有“\n”的情况下尝试了这个，也没有使用 (.+?) 而不是 (.*?)。

如果您需要更多信息来帮助我，请告诉我，非常感谢任何帮助。我的最终目标是能够轻松地从[ftp://ftp.fbo.gov/FBOFeed20130311](ftp://ftp.fbo.gov/FBOFeed20130311)导入数据（似乎有多种表类型，但我目前专注于 PRESOL 只是为了得到这个概念证明地面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-19T04:18:09.600

花了一些时间，能够为 FBO 数据构建解析器函数。怀疑您仍然需要它，但也许这会对其他人有所帮助。

```
def fbo_parser(fbo):
     split_fbo = fbo.split('<PRESOL>')
     n_ops = len(split_fbo)
     all_ops_dict = {}
     for i in range(1, n_ops):
         strings = fbo.split('<PRESOL>')[i].replace('</PRESOL>', '')
         strings = strings.split('<')
         lists = [x.split('>') for x in strings]
         opp_dict = {}
         desc_count = 0 
         desc = ['OpDesc', 'URL_Desc', 'EMAIL_Desc']
         for ii in lists:
             if len(ii) == 2:
                 if ii[0] == 'DESC':
                     #TODO: Figure out a better name for the duplicate DESC
                     ii[0] = ii[0] + str(desc_count)
                     desc_count += 1

                 opp_dict[ii[0]] = ''.join([x for x in filter(None, ii[1].split('\\n'))])
         all_ops_dict[i] = opp_dict
     return all_ops_dict

f = open('FBOFeed19991231', 'rb')
fbo = str(f.read())
fbop = fbo_parser(fbo)

fbop[68]
RETURNS:>>
{'ADDRESS': 'Christel.Wittmer@ramstein.af.mil',
 'AGENCY': 'Department of the Air Force',
 'CLASSCOD': '32',
 'CONTACT': 'Christel Wittmer, Ms., Phone (49) 631 3539 174, Fax (49) 631 3539 158, Email Christel.Wittmer@ramstein.af.mil - Ursula Nabinger, Ms., Phone (49) 631 3539 178, Fax (49) 631 3539 158, Email Ursula.Nabinger@ramstein.af.mil',
 'DATE': '0720',
 'DESC0': 'WORKBENCH FOR VEHICLE MAINTENANCE,2 METER LONG, TOP IS METAL COVERWERKBANK, 2 METER LANG, SCHICHSTOFF OEL AND FEUCHTIGKEITSBESTAENDIG  (22EA/STCK)WORKBENCH FOR VEHICLE MAINTENANCE, 2 METER LONG TOP CONSISTS 40 MM TICK WOODWERKBANK, 2 METER LANG ARBEITSPLATTE HOLZ MEHRSCHICHTVERLEIMTESBUECHENHOLZ (22EA/STCK)FOR MORE INFO CALL MRS WITTMER 0631-3539-174!',
 'DESC1': 'Link to FedBizOpps document.',
 'DESC2': 'Christel Wittmer',
 'EMAIL': '',
 'LINK': '',
 'LOCATION': '700 CONS',
 'OFFADD': 'United States Air Force, United States Air Force Europe, Rhine Ordnance Barracks, USAFE CONS, UNIT 3115, Germany, .  09094-3115',
 'OFFICE': 'United States Air Force Europe',
 'RESPDATE': '073099',
 'SOLNBR': 'F61521-99T0607',
 'SUBJECT': 'WORKBENCH FOR VEHICLE MAINTENANCE',
 'URL': 'http://www.fbo.gov/spg/USAF/USAFE/ROB/F61521-99T0607/listing.html',
 'YEAR': '99',
 'ZIP': '09021'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:35:55.280

我在 ftp 中看到了以下示例（我删除了第一个字段以专注于 popaddress）：

```
In [7]: data = """<PRESOL>
   ...: <DESC>Link To Document
   ...: <SETASIDE>N/A
   ...: <POPCOUNTRY>US
   ...: <POPADDRESS>Moody AFB, GA
   ...: Avon Park, FL
   ...: </PRESOL>"""

In [11]: re.findall(r'<PRESOL>\n<DESC>(.*?)\n<SETASIDE>(.*?)\n<POPCOUNTRY>(.*?)\n<POPADDRESS>(.*?)\n</PRESOL>', data)
Out[11]: [] 
```

由于最后一个字段的 \n 后面没有标签，因此它不匹配。那就是问题所在。

查看 FTP 中的数据，我发现还有其他多行字段，例如 DESC、CONTACT，在某些情况下相当大并且被 HTML 标记包围。也许您最好使用更算法的方法，而不是尝试使用单个正则表达式解析整个“行”数据。我认为可能有足够的极端案例可以考虑逐行进行。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:38:27.453

这是创建可以变成表格的数据结构的一个想法：

```
presol = []
split = re.split('<\/PRESOL>', file_data)

for s in split:
    d = {}
    for k,v in re.findall('<([^>]+)>(.[^<]+)\n', s, re.M|re.S):
        d[k]=v
        presol.append(d)

print("DATE\tAGENCY\tDESC\tURL\tSETASIDE\n")
for p in presol:
    print("%s\t%s\t%s\t%s\t%s\n"%(p["DATE"], p["AGENCY"], p["DESC"], p["URL"], p["SETASIDE"])) 
```

# ruby-on-rails - 使用 Rails 和 Jquery 生成 HTML 不起作用

> ID：15423147
> 
> 赞同：0
> 
> 时间：2013-03-15T01:22:54.217
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我试图制作一个按钮来添加一个表单来创建一个包含许多用户的任务，我把这个：

```
$("#more").click(function(){
    i++;
    $("#more").after("<%= select_tag 'user_id_"+i+"',options_for_select(User.all.map { |u| [u.email,u.id] }) %>");

}); 
```

对，这看起来很正常，但是这个标签是 Rails 的，出现这个：

```
< %= select_tag 'user_id_4',options_for_select(User.all.map { |u| [u.email,u.id] }) %><%= select_tag 'user_id_3',options_for_select(User.all.map { |u| [u.email,u.id] }) %><%= select_tag 'user_id_2',options_for_select(User.all.map { |u| [u.email,u.id] }) %> 
```

我怎样才能让这个代码出现在 Rails 中？

更新：

当我尝试将代码 jquery 放在我的 .html.erb 中时，这不会执行，之前是在 application.js 中：

```
<script type="text/javascript">
$(document).ready(function() {

    var i = 1;
    $("#more").click(function(){
        i++;
        $("#more").after("<%= select_tag 'user_id_"+i+"',options_for_select(User.all.map { |u| [u.email,u.id] }) %>");

    });

});

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T12:41:28.310

让我们尝试一下，这是一个疯狂的猜测，但我希望它能满足您的需求。您可以在新应用程序中尝试此操作。只需创建一个**用户**模型，播种一些数据，然后在您的资产组中添加 gem 'jquery-rails'。运行`bundle install`并重新启动您的服务器。

在您的**assets/javascripts/application.js**中，确保您至少有以下几行：

```
//= require jquery
//= require jquery_ujs
//= require_tree . 
```

在您的**users_controller.rb**中，定义**index**方法以从数据库中获取所有用户并呈现**索引**模板，这非常简单，您只需这样做：

```
def index
  @users = User.all

  respond_to do |format|
    format.html
    format.js
  end
end 
```

**然后在views/users**中编辑您的视图文件，并确保它被命名为**index.html.erb**。当您尝试使用浏览器访问 localhost:3000/users 时，将显示此视图（详细信息：这是一个 GET HTML 请求）。在您的视图中，您将编写 HTML 并嵌入 ruby​​，就像您通常所做的那样。现在只需创建一个 div 并给它一个 id “更多”，你还可以放置一个带有属性的链接`remote`

```
<%= link_to 'click me', users_path, remote: true %> 
```

**然后在views/users**中创建一个新的视图文件并将其命名为**index.js.erb**。您注意到扩展名发生了变化，现在我们使用*js.erb*而不是*html.erb*。详细说明：当您的页面将向您的**users#index**路由发出 javascript 请求（在本例中为 GET JS）时，它将以**index.js.erb**视图响应。这里最大的好处是您可以在此视图中编写 javascript 代码，该代码将在您的浏览器中执行。

你还记得我们添加`remote: true`到链接吗？这告诉 Rails 通用一个将发出 JS 请求的链接。魔法。

所以现在你只需要在你的**views/users/index.js.erb**文件中写一些javascript 代码。让我们从一些超级简单的事情开始：

```
alert('Hello'); 
```

转到您的页面（通常为 localhost:3000/users）并单击“单击我”链接，您应该会看到显示的 javascript 警报框。

让我们进行第二次测试，并集成一些 ruby​​ 代码。通过以下方式更改您的**视图/用户/index.js.erb**的内容：

```
alert('Ruby compute: <%= 1+1 %>'); 
```

在您的网页中，您将看到带有测试“Ruby 计算：2”的警报。您只需要在您的应用程序中使这种技术适应您的情况，瞧。

可以在此 railscast 上找到相同的技术（但有更好的解释）：[http: //railscasts.com/episodes/136-jquery](http://railscasts.com/episodes/136-jquery)

# android - 如何使用 isInEditMode() 在编辑器中查看带有自定义视图的布局

> ID：15423149
> 
> 赞同：92
> 
> 时间：2013-03-15T01:23:05.550
> 
> 标签：android, android-layout, android-custom-view

我必须编辑具有自定义视图的软件，当我尝试编辑布局 xml 时，Eclipse 告诉我：

> 在 Eclipse 中显示时，在自定义视图中使用 View.isInEditMode() 跳过代码

但我不知道在应用程序中必须*如何*以及*在何处*使用*isInEditMode()*

我的 xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:orientation="vertical"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:background="#ff000000"
    >
<TextView
     android:id="@+id/result"
     android:layout_width="fill_parent" 
     android:layout_height="wrap_content"
     android:gravity="right"
     android:textSize="32dip"
     android:scrollbars="none"
     android:lines="1"
     android:freezesText="true"
     android:textColor="@color/result"
    />
<EditText
     android:id="@+id/input"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:gravity="left"
     android:textSize="28dip"
     android:scrollbars="none"
     android:singleLine="true"
     android:autoText="false"
     android:imeOptions="flagNoEnterAction|flagNoExtractUi"
     />
<ListView
     android:id="@+id/history"
     android:layout_width="fill_parent"
     android:layout_height="0dip"
     android:layout_weight="1"
     android:cacheColorHint="#ff000000"
     android:choiceMode="singleChoice"
     android:scrollbarStyle="outsideInset"
     android:scrollbars="none"
    />
<calculator.GraphView
     android:id="@+id/graph"
     android:layout_width="fill_parent"
     android:layout_height="0dip"
     android:layout_weight="1"
     android:visibility="gone"
     />
<include layout="@layout/keyboard" />
</LinearLayout> 
```

我的 GraphView 是

```
public class GraphView extends View implements Grapher,
        ZoomButtonsController.OnZoomListener,
        TouchHandler.TouchHandlerInterface {
    private int width, height;
    private Matrix matrix = new Matrix();
    private Paint paint = new Paint();
    private Paint textPaint = new Paint();
    private ArrayList<Function> funcs = new ArrayList<Function>();
    private Data next = new Data(), endGraph = new Data();
    private Data graphs[] = { new Data(), new Data(), new Data(), new Data(),
            new Data() };
    private static final int GRAPHS_SIZE = 5;
    private float gwidth = 8;
    private float currentX, currentY;
    private float lastMinX;
    private Scroller scroller;
    private float boundMinY, boundMaxY;
    protected ZoomButtonsController zoomController = new ZoomButtonsController(
            this);
    private ZoomTracker zoomTracker = new ZoomTracker();
    private TouchHandler touchHandler;
    private float lastTouchX, lastTouchY;

    private static final int COL_AXIS = 0xff00a000, COL_GRID = 0xff004000,
            COL_TEXT = 0xff00ff00;

    private static final int COL_GRAPH[] = { 0xffffffff, 0xff00ffff,
            0xffffff00, 0xffff00ff, 0xff80ff80 };

    public GraphView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    public GraphView(Context context) {
        super(context);
        touchHandler = new TouchHandler(this);
        init(context);
    }

    private void init(Context context) {
        zoomController.setOnZoomListener(this);
        scroller = new Scroller(context);
        paint.setAntiAlias(false);
        textPaint.setAntiAlias(true);
    }

    @SuppressLint("WrongCall")
    public String captureScreenshot() {
        Bitmap bitmap = Bitmap.createBitmap(width, height,
                Bitmap.Config.RGB_565);
        Canvas canvas = new Canvas(bitmap);
        onDraw(canvas);
        return Util.saveBitmap(bitmap, Grapher.SCREENSHOT_DIR, "calculator");
    }

    private void clearAllGraph() {
        for (int i = 0; i < GRAPHS_SIZE; ++i) {
            graphs[i].clear();
        }
    }

    public void setFunctions(ArrayList<Function> fs) {
        funcs.clear();
        for (Function f : fs) {
            int arity = f.arity();
            if (arity == 0 || arity == 1) {
                funcs.add(f);
            }
        }
        clearAllGraph();
        invalidate();
    }

    public void setFunction(Function f) {
        funcs.clear();
        if (f != null) {
            funcs.add(f);
        }
        clearAllGraph();
        invalidate();
    }

    public void onVisibilityChanged(boolean visible) {
    }

    public void onZoom(boolean zoomIn) {
        if (zoomIn) {
            if (canZoomIn()) {
                gwidth /= 2;
                invalidateGraphs();
            }
        } else {
            if (canZoomOut()) {
                gwidth *= 2;
                invalidateGraphs();
            }
        }
        zoomController.setZoomInEnabled(canZoomIn());
        zoomController.setZoomOutEnabled(canZoomOut());
    }

    public void onResume() {
    }

    public void onPause() {
    }

    public void onDetachedFromWindow() {
        zoomController.setVisible(false);
        super.onDetachedFromWindow();
    }

    protected void onSizeChanged(int w, int h, int ow, int oh) {
        width = w;
        height = h;
        clearAllGraph();
    }

    protected void onDraw(Canvas canvas) {
        if (funcs.size() == 0) {
            return;
        }
        if (scroller.computeScrollOffset()) {
            final float scale = gwidth / width;
            currentX = scroller.getCurrX() * scale;
            currentY = scroller.getCurrY() * scale;
            if (!scroller.isFinished()) {
                invalidate();
            }
        }
        drawGraph(canvas);
    }

    private float eval(Function f, float x) {
        float v = (float) f.eval(x);

        if (v < -10000f) {
            return -10000f;
        }
        if (v > 10000f) {
            return 10000f;
        }
        return v;
    }

    private float distance2(float x1, float y1, float x2, float y2, float y) {
        final float dx = x2 - x1;
        final float dy = y2 - y1;
        final float up = dx * (y1 + y2 - y - y);
        return up * up / (dx * dx + dy * dy);
    }

    private void computeGraph(Function f, float minX, float maxX, float minY,
            float maxY, Data graph) {
        if (f.arity() == 0) {
            float v = (float) f.eval();
            if (v < -10000f) {
                v = -10000f;
            }
            if (v > 10000f) {
                v = 10000f;
            }
            graph.clear();
            graph.push(minX, v);
            graph.push(maxX, v);
            return;
        }

        final float scale = width / gwidth;
        final float maxStep = 15.8976f / scale;
        final float minStep = .05f / scale;
        float ythresh = 1 / scale;
        ythresh = ythresh * ythresh;
        if (!graph.empty()) {
            if (minX >= lastMinX) {
                graph.eraseBefore(minX);
            } else {
                graph.eraseAfter(maxX);
                maxX = Math.min(maxX, graph.firstX());
                graph.swap(endGraph);
            }
        }
        if (graph.empty()) {
            graph.push(minX, eval(f, minX));
        }
        float leftX, leftY;
        float rightX = graph.topX(), rightY = graph.topY();
        int nEval = 1;
        while (true) {
            leftX = rightX;
            leftY = rightY;
            if (leftX > maxX) {
                break;
            }
            if (next.empty()) {
                float x = leftX + maxStep;
                next.push(x, eval(f, x));
                ++nEval;
            }
            rightX = next.topX();
            rightY = next.topY();
            next.pop();

            if (leftY != leftY && rightY != rightY) { // NaN
                continue;
            }

            float dx = rightX - leftX;
            float middleX = (leftX + rightX) / 2;
            float middleY = eval(f, middleX);
            ++nEval;
            boolean middleIsOutside = (middleY < leftY && middleY < rightY)
                    || (leftY < middleY && rightY < middleY);
            if (dx < minStep) {
                if (middleIsOutside) {
                    graph.push(rightX, Float.NaN);
                }
                graph.push(rightX, rightY);
                continue;
            }
            if (middleIsOutside
                    && ((leftY < minY && rightY > maxY) || (leftY > maxY && rightY < minY))) {
                graph.push(rightX, Float.NaN);
                graph.push(rightX, rightY);
                continue;
            }

            if (!middleIsOutside) {

                if (distance2(leftX, leftY, rightX, rightY, middleY) < ythresh) {
                    graph.push(rightX, rightY);
                    continue;
                }
            }
            next.push(rightX, rightY);
            next.push(middleX, middleY);
            rightX = leftX;
            rightY = leftY;
        }
        if (!endGraph.empty()) {
            graph.append(endGraph);
        }
        long t2 = System.currentTimeMillis();

        next.clear();
        endGraph.clear();
    }

    private static Path path = new Path();

    private Path graphToPath(Data graph) {
        boolean first = true;
        int size = graph.size;
        float[] xs = graph.xs;
        float[] ys = graph.ys;
        path.rewind();
        for (int i = 0; i < size; ++i) {
            float y = ys[i];
            float x = xs[i];
            // Calculator.log("path " + x + ' ' + y);
            if (y == y) { // !NaN
                if (first) {
                    path.moveTo(x, y);
                    first = false;
                } else {
                    path.lineTo(x, y);
                }
            } else {
                first = true;
            }
        }
        return path;
    }

    private static final float NTICKS = 15;

    private static float stepFactor(float w) {
        float f = 1;
        while (w / f > NTICKS) {
            f *= 10;
        }
        while (w / f < NTICKS / 10) {
            f /= 10;
        }
        float r = w / f;
        if (r < NTICKS / 5) {
            return f / 5;
        } else if (r < NTICKS / 2) {
            return f / 2;
        } else {
            return f;
        }
    }

    private static StringBuilder b = new StringBuilder();
    private static char[] buf = new char[20];

    private static StringBuilder format(float fv) {
        int pos = 0;
        boolean addDot = false;
        int v = Math.round(fv * 100);
        boolean isNeg = v < 0;
        v = isNeg ? -v : v;
        for (int i = 0; i < 2; ++i) {
            int digit = v % 10;
            v /= 10;
            if (digit != 0 || addDot) {
                buf[pos++] = (char) ('0' + digit);
                addDot = true;
            }
        }
        if (addDot) {
            buf[pos++] = '.';
        }
        if (v == 0) {
            buf[pos++] = '0';
        }
        while (v != 0) {
            buf[pos++] = (char) ('0' + (v % 10));
            v /= 10;
        }
        if (isNeg) {
            buf[pos++] = '-';
        }
        b.setLength(0);
        b.append(buf, 0, pos);
        b.reverse();
        return b;
    }

    private void drawGraph(Canvas canvas) {
        long t1 = System.currentTimeMillis();
        float minX = currentX - gwidth / 2;
        float maxX = minX + gwidth;
        float ywidth = gwidth * height / width;
        float minY = currentY - ywidth / 2;
        float maxY = minY + ywidth;
        if (minY < boundMinY || maxY > boundMaxY) {
            float halfw = ywidth / 2;
            boundMinY = minY - halfw;
            boundMaxY = maxY + halfw;
            clearAllGraph();
        }

        canvas.drawColor(0xff000000);

        paint.setStrokeWidth(0);
        paint.setAntiAlias(false);
        paint.setStyle(Paint.Style.STROKE);

        final float h2 = height / 2f;
        final float scale = width / gwidth;

        float x0 = -minX * scale;
        boolean drawYAxis = true;
        if (x0 < 25) {
            x0 = 25;
            // drawYAxis = false;
        } else if (x0 > width - 3) {
            x0 = width - 3;
            // drawYAxis = false;
        }
        float y0 = maxY * scale;
        if (y0 < 3) {
            y0 = 3;
        } else if (y0 > height - 15) {
            y0 = height - 15;
        }

        final float tickSize = 3;
        final float y2 = y0 + tickSize;
        paint.setColor(COL_GRID);
        float step = stepFactor(gwidth);
        float v = ((int) (minX / step)) * step;
        textPaint.setColor(COL_TEXT);
        textPaint.setTextSize(12);
        textPaint.setTextAlign(Paint.Align.CENTER);
        float stepScale = step * scale;
        for (float x = (v - minX) * scale; x <= width; x += stepScale, v += step) {
            canvas.drawLine(x, 0, x, height, paint);
            if (!(-.001f < v && v < .001f)) {
                StringBuilder b = format(v);
                canvas.drawText(b, 0, b.length(), x, y2 + 10, textPaint);
            }
        }

        final float x1 = x0 - tickSize;
        v = ((int) (minY / step)) * step;
        textPaint.setTextAlign(Paint.Align.RIGHT);
        for (float y = height - (v - minY) * scale; y >= 0; y -= stepScale, v += step) {
            canvas.drawLine(0, y, width, y, paint);
            if (!(-.001f < v && v < .001f)) {
                StringBuilder b = format(v);
                canvas.drawText(b, 0, b.length(), x1, y + 4, textPaint);
            }
        }

        paint.setColor(COL_AXIS);
        if (drawYAxis) {
            canvas.drawLine(x0, 0, x0, height, paint);
        }
        canvas.drawLine(0, y0, width, y0, paint);

        matrix.reset();
        matrix.preTranslate(-currentX, -currentY);
        matrix.postScale(scale, -scale);
        matrix.postTranslate(width / 2, height / 2);

        paint.setStrokeWidth(0);
        paint.setAntiAlias(false);

        int n = Math.min(funcs.size(), GRAPHS_SIZE);
        for (int i = 0; i < n; ++i) {
            computeGraph(funcs.get(i), minX, maxX, boundMinY, boundMaxY,
                    graphs[i]);
            Path path = graphToPath(graphs[i]);
            path.transform(matrix);
            paint.setColor(COL_GRAPH[i]);
            canvas.drawPath(path, paint);
        }
        lastMinX = minX;
    }

    private boolean canZoomIn() {
        return gwidth > 1f;
    }

    private boolean canZoomOut() {
        return gwidth < 50;
    }

    private void invalidateGraphs() {
        clearAllGraph();
        boundMinY = boundMaxY = 0;
        invalidate();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        return touchHandler != null ? touchHandler.onTouchEvent(event) : super
                .onTouchEvent(event);
    }

    public void onTouchDown(float x, float y) {
        zoomController.setVisible(true);
        if (!scroller.isFinished()) {
            scroller.abortAnimation();
        }
        lastTouchX = x;
        lastTouchY = y;
    }

    public void onTouchMove(float x, float y) {
        float deltaX = x - lastTouchX;
        float deltaY = y - lastTouchY;
        if (deltaX < -1 || deltaX > 1 || deltaY < -1 || deltaY > 1) {
            scroll(-deltaX, deltaY);
            lastTouchX = x;
            lastTouchY = y;
            invalidate();
        }
    }

    public void onTouchUp(float x, float y) {
        final float scale = width / gwidth;
        float sx = -touchHandler.velocityTracker.getXVelocity();
        float sy = touchHandler.velocityTracker.getYVelocity();
        final float asx = Math.abs(sx);
        final float asy = Math.abs(sy);
        if (asx < asy / 3) {
            sx = 0;
        } else if (asy < asx / 3) {
            sy = 0;
        }
        scroller.fling(Math.round(currentX * scale),
                Math.round(currentY * scale), Math.round(sx), Math.round(sy),
                -10000, 10000, -10000, 10000);
        invalidate();
    }

    public void onTouchZoomDown(float x1, float y1, float x2, float y2) {
        zoomTracker.start(gwidth, x1, y1, x2, y2);
    }

    public void onTouchZoomMove(float x1, float y1, float x2, float y2) {
        if (!zoomTracker.update(x1, y1, x2, y2)) {
            return;
        }
        float targetGwidth = zoomTracker.value;
        if (targetGwidth > .25f && targetGwidth < 200) {
            gwidth = targetGwidth;
        }
        invalidateGraphs();
    }

    private void scroll(float deltaX, float deltaY) {
        final float scale = gwidth / width;
        float dx = deltaX * scale;
        float dy = deltaY * scale;
        final float adx = Math.abs(dx);
        final float ady = Math.abs(dy);
        if (adx < ady / 3) {
            dx = 0;
        } else if (ady < adx / 3) {
            dy = 0;
        }
        currentX += dx;
        currentY += dy;
    }
} 
```

XML 编辑器的错误日志

```
java.lang.NullPointerException
    at android.widget.ZoomButtonsController.createContainer(ZoomButtonsController.java:266)
    at android.widget.ZoomButtonsController.<init>(ZoomButtonsController.java:212)
    at calculator.GraphView.<init>(GraphView.java:43)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(    at sun.reflect.NativeConstructorAccessorImpl.newInstance(    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(    at java.lang.reflect.Constructor.newInstance(    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:422)
    at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:179)
    at android.view.BridgeInflater.loadCustomView(BridgeInflater.java:207)
    at android.view.BridgeInflater.createViewFromTag(BridgeInflater.java:135)
    at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:746)
    at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:64)
    at android.view.LayoutInflater.rInflate(LayoutInflater.java:718)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    at android.view.LayoutInflater.inflate(LayoutInflater.java:372) 
```

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2013-03-15T04:55:54.663

`isInEditMode()`应该在自定义视图构造函数中使用。试试下面的代码：

```
 public class GraphView extends View implements Grapher
        {

         public GraphView(Context context, AttributeSet attrs) {
                super(context, attrs);
                if(!isInEditMode())
                 init(context);
            }

            public GraphView(Context context) {
                super(context);
               if(!isInEditMode()){
                touchHandler = new TouchHandler(this);
                init(context);
              }
            } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-07T07:05:56.210

```
public class CustomTextView extends TextView {

public CustomTextView(Context context) {
    super(context);
}

public CustomTextView(Context context, AttributeSet attrs) {
    super(context, attrs);

    if (!isInEditMode()) {
        createTypeface(context, attrs); //whatever added functionality you are trying to add to Widget, call that inside this condition. 
    }

}

public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

//Typeface I wan to set to my Custom TextView It can be any other functionality of your choice

private void createTypeface(Context context, AttributeSet attrs) {

    TypedArray styledAttrs = context.obtainStyledAttributes(attrs,
            R.styleable.CustomTextView);
    String fontName = styledAttrs
            .getString(R.styleable.CustomTextView_Typeface);
    styledAttrs.recycle();

    if (fontName != null) {
        Typeface typeface = Typeface.createFromAsset(context.getAssets(),
                "fonts/" + fontName);

        setTypeface(typeface);
        styledAttrs.recycle();
    }
}

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-31T19:41:42.517

无法实例化以下类： - com.google.android.gms.ads.AdView（开放类、显示异常、清除缓存）

提示：在自定义视图中使用 View.isInEditMode() 可跳过代码或在 IDE 中显示示例数据。如果这是一个意外错误，您也可以尝试构建项目，然后手动刷新布局。

```
Exception Details java.lang.NoClassDefFoundError: 
    com/google/android/gms/ads/R$styleable   at 
    com.google.android.gms.internal.ads.zzuq.<init>(com.google.android.gms:play-services-ads-lite@@18.3.0:45)   at com.google.android.gms.internal.ads.zzxl.<init>(com.google.android.gms:play-services-ads-lite@@18.3.0:30)   at com.google.android.gms.internal.ads.zzxl.<init>(com.google.android.gms:play-services-ads-lite@@18.3.0:52)   at com.google.android.gms.internal.ads.zzxl. 
```

`<init>(com.google.android.gms:play-services-ads-lite@@18.3.0:17)   at com.google.android.gms.ads.BaseAdView.<init>(com.google.android.gms:play-services-ads-lite@@18.3.0:5)   at com.google.android.gms.ads.AdView.<init>(com.google.android.gms:play-services-ads-lite@@18.3.0:4)   at java.lang.reflect.Constructor.newInstance(Constructor.java:423)   at` `android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:730)   at android.view.LayoutInflater.rInflate_Original(LayoutInflater.java:863)   at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:72)   at android.view.LayoutInflater.rInflate(LayoutInflater.java:837)   at android.view.LayoutInflater.rInflateChildren(LayoutInflater.java:824)   at android.view.LayoutInflater.inflate(LayoutInflater.java:515)   at android.view.LayoutInflater.inflate(LayoutInflater.java:394) Copy stack to clipboard`

* * *

## 回答 #4

> 赞同：-24
> 
> 时间：2014-03-03T15:09:36.700

试试这个它对我有用

```
public class MyOwnTextView extends TextView {

    public MyOwnTextView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        // TODO Auto-generated constructor stub
        isInEditMode();
    }

    public MyOwnTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
        isInEditMode();
    }
    public MyOwnTextView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        isInEditMode();
    }

    public void setTypeface(Typeface tf, int style) {
        if(!this.isInEditMode()){
        Typeface normalTypeface = Typeface.createFromAsset(getContext().getAssets(), "font/Roboto-Light.ttf");
        Typeface boldTypeface = Typeface.createFromAsset(getContext().getAssets(), "font/Roboto-Light.ttf");

        if (style == Typeface.BOLD) {
            super.setTypeface(boldTypeface/*, -1*/);
        } else {
            super.setTypeface(normalTypeface/*, -1*/);
        }
        }

    }   

} 
```

然后在 xml

```
<com.xxxxx.appname.MyOwnTextView

          android:layout_width="fill_parent"
          android:layout_height="fill_parent"

        /> 
```

# jquery - 我是否过度瞄准了一个物体

> ID：15423156
> 
> 赞同：0
> 
> 时间：2013-03-15T01:23:50.923
> 
> 标签：jquery, radio-button

有一个我用jquery和css修饰的形式的收音机。现在我想对它做更多的 jquery，但是当我运行这两个代码时，一旦选择了收音机，li 就不会关闭。一旦你点击无线电位，李应该关闭。还需要告诉它执行以下操作：使用输入 = 名称“radio_selected”进行无线电选择的无线电交换。这样隐藏 li 中的选定收音机将移出隐藏 li 并与页面上未隐藏的收音机交换位置。

```
 $("input[name='domain_ext']").each(function() {
        $("#radio_select").attr('checked', 'checked');
        var lbl = $(this).parent("label").text();
        if  ($(this).prop('checked')) {
            $(this).hide();
            $(this).after("<div class='radioButtonOn'>" + lbl + "</div>");
        } else { 
            $(this).hide();
            $(this).after("<div class='radioButtonOff'>" + lbl + "</div>");
        }
    });

    $("input[type=radio]").change(function() {
        $(this).siblings('.radioButtonOff').add('.radioButtonOn').toggleClass('radioButtonOff radioButtonOn');
    });

   $('div.ribbonBoxarrow').click(function() {
            $('.ribbonBoxarrow li').show('medium');
            return false;
        });
// once you leave the div (which is contained in the above li hide.
        $('.ribbonBoxtab').mouseleave(function() {
            $('.ribbonBoxarrow li').hide('slow'); //missing .
            return false;
        });
//if a radio buttn is clicked the hide li
        $("input[name='domain_ext']").click(function() { //changed .each to .click
            $('.ribbonBoxarrow li').hide('slow'); //missing .
            return false;
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:05:55.263

```
$("input[name='domain_ext']").each(function() {
        $("#radio_select").attr('checked', 'checked');
        var lbl = $(this).parent("label").text();
        if  ($(this).prop('checked')) {
            $(this).hide();
            $(this).after("<div class='radioButtonOn'>" + lbl + "</div>");
        } else { 
            $(this).hide();
            $(this).after("<div class='radioButtonOff'>" + lbl + "</div>");
        }
    });

    $("input[type=radio]").change(function() {
        $(this).siblings('.radioButtonOff').add('.radioButtonOn').toggleClass('radioButtonOff radioButtonOn');
    });

   $('div.ribbonBoxarrow').click(function() {
            $('.ribbonBoxarrow li').show('medium');
            return false;
        });
// once you leave the div (which is contained in the above li hide.
        $('.ribbonBoxtab').mouseleave(function() {
            $('.ribbonBoxarrow li').hide('slow'); //missing .
            return false;
        });
//if a radio buttn is clicked the hide li
        $("input[name='domain_ext']").parent('label').click(function() { //changed .each to .click
            $('.ribbonBoxarrow li').hide('slow'); //missing .
            return false;
        }); 
```

# python - return 函数在递归中是如何工作的？

> ID：15423157
> 
> 赞同：0
> 
> 时间：2013-03-15T01:24:01.297
> 
> 标签：python

我不明白 return 语句在任何递归函数中是如何工作的（在 python 中）。当您在递归函数中返回“东西”时，有人可以给我一些关于发生了什么的基本示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:26:58.313

递归是一种优雅的编程风格，其中函数以更简单的形式调用自身，直到实现最简单的形式。

这种最简单的形式称为“基本情况”（在下面的示例中，基本情况是`if n == 1: return 1`因为对于阶乘，1 是您需要达到的最简单情况），这是一个测试以查看输入是否是最简单的可能状态。

递归函数的另一部分是“递归情况”，它进一步简化了函数（在下面的示例中，`n * factorial(n-1)`是递归情况，因为它使用 来简化函数`n-1`）。

一个简单的递归阶乘函数：

```
def factorial(n): # only works for positive numbers
    if n == 1: return 1 # base case
    return n * factorial(n-1) # recursive case; only executed if the above is not
                              # executed because 'return' stops a function 
```

阶乘是直到并包括所有数字的乘积`n`。

让我们把它分开 `factorial(4)`：：

1.  是`n`1？不，所以`return n * factorial(n-1)`
2.  `4 * factorial(4-1)`=`4 * factorial(3)`
3.  是`n`1？不，所以`return n * factorial(n-1)`
4.  `3 * factorial(3-1)`=`3 * factorial(2)`
5.  是`n`1？不，所以`return n * factorial(n-1)`
6.  `2 * factorial(2-1)`=`2 * factorial(1)`
7.  是`n`1？是的，所以`return 1`

现在让我们跟踪调用：

步骤 1、3、5 只是检查，所以它们并没有真正返回任何东西：

*   第2步：`factorial(4) = 4 * factorial(3)`
*   第4步：`factorial(3) = 3 * factorial(2)`
*   第 6 步：`factorial(2) = 2 * factorial(1)`
*   第 7 步：`factorial(1) = 1`。

因此，跟踪`return`语句：1 * 2 * 3 * 4 = 24，这是 4 的阶乘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:31:18.103

当一个函数进行递归调用时，控制权传递*给*被调用的函数。当一个函数返回时，控制权*从*那个函数传递给调用它的那个函数。这就是交互式调试器描述正在发生的事情的方式：步入函数，步*过*每个语句，*步出**函数*。

函数调用的常用簿记是称为堆栈的结构。我们应该想象一堆放在弹簧上的盘子。函数的每次调用（调用）都是一个“推”到堆栈“顶部”的板。函数的每次返回都会从堆栈中“弹出”该调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T02:03:46.930

这是一个使用缩进来表示递归调用的简单示例（通过测量堆栈的深度）

```
>>> import inspect
>>> def factorial(n):
...     print('{:{}}factorial({})'.format('', len(inspect.stack()), n))
...     retval = 1 if n == 1 else n * factorial(n-1)
...     print('{:{}}return {}'.format('', len(inspect.stack()), retval))
...     return retval
... 
>>> factorial(5)
  factorial(5)
   factorial(4)
    factorial(3)
     factorial(2)
      factorial(1)
      return 1
     return 2
    return 6
   return 24
  return 120
120 
```

# asp.net-mvc-3 - MVC 3：将带有字典字段的模型传递给控制器

> ID：15423163
> 
> 赞同：1
> 
> 时间：2013-03-15T01:24:30.827
> 
> 标签：asp.net-mvc-3

我正在为网格生成以下 hml：

```
<form method="POST" action="home/Edit">
 <table>
   <thead>
     <tr>
       <th> Level </th>
       <th> Cost </th>
       <th> Test </th>
     </tr>
   </thead>
   <tbody>
     <tr>
       <td> <input type='text' name="Prize[0].Level" value='1' /> </td>
       <td> <input type='text' name="Prize[0].Cost" value='$1.00' /> </td>
       <td> <input type='text' name="Prize[0].Properties['Test'].Name" value='Passed' /> </td>
     </tr>
     <tr>
       <td> <input type='text' name="Prize[1].Level" value='2' /> </td>
       <td> <input type='text' name="Prize[1].Cost" value='$2.00' /> </td>
       <td> <input type='text' name="Prize[1].Properties['Test'].Name" value='Failed' /> </td>
     </tr>
   </tbody>
 </table>
 <input type="submit"/>
</form> 
```

我的 Home 控制器有一个方法：

```
[HttpPost]
public ActionResult Edit(PrizelevelsModel model) { ... } 
```

模型定义如下：

```
public class PrizelevelsModel
{
    public PrizeLevel[] Prize { get; set; }
}

public class PrizeLevel
{
    public readonly Dictionary<string, PrizeLevelProperty> Properties = new Dictionary<string, PrizeLevelProperty>();

    public int Level { get; set; }
    public decimal Cost { get; set; }
}

public class PrizeLevelProperty
{
    public int Ordinal { get; set; }
    public string Name { get; set; }
    public object Value { get; set; }
} 
```

当我点击提交时，MVC 用 Prize[2] 膨胀我的模型，数组中的每个 Prizelevel 都有正确的 Level 和 Cost，但是 Properties 字典有 0 个元素。如何让 MVC 将键为“Test”的元素添加到每个奖品的属性字典中，值是新的 PrizeLevelProperty，其名称与每个奖品的表单中设置的名称相同？

换句话说，当我调试我的控制器方法时，我想看到：

```
model.Prize[0].Level == 1  // this works ok
model.Prize[0].Cost == "$1.00"  // and so does this
model.Prize[0].Properties["Test"].Name" == "Passed"  // but not this, instead model.Prize[0].Properties.Count == 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:45:46.880

这篇文章几乎正是你想要的：[http ://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx](http://www.hanselman.com/blog/ASPNETWireFormatForModelBindingToArraysListsCollectionsDictionaries.aspx)

MVC 3 中的默认模型绑定器将绑定您指定项目的键和值的字典，因此在您的情况下，它看起来像这样：

```
<form method="POST" action="home/Edit">
 <table>
   <thead>
     <tr>
       <th> Level </th>
       <th> Cost </th>
       <th> Test </th>
     </tr>
   </thead>
   <tbody>
     <tr>
       <td> <input type='text' name="Prize[0].Level" value='1' /> </td>
       <td> <input type='text' name="Prize[0].Cost" value='$1.00' /> </td>
       <td> 
            <input type='text' name="Prize[0].Properties[0].Key" value='Test' />
            <input type='text' name="Prize[0].Properties[0].Value.Name" value='Passed' />
      </td>
     </tr>
     <tr>
       <td> <input type='text' name="Prize[1].Level" value='2' /> </td>
       <td> <input type='text' name="Prize[1].Cost" value='$2.00' /> </td>
       <td> 
            <input type='text' name="Prize[0].Properties[0].Key" value='Test' />
            <input type='text' name="Prize[0].Properties[0].Value.Name" value='Failed' />
       </td>
     </tr>
   </tbody>
 </table>
 <input type="submit"/>
</form> 
```

尽管您可能会根据您想要实现的内容/方式来隐藏密钥。

# jquery - jQuery 模态覆盖整个页面

> ID：15423174
> 
> 赞同：0
> 
> 时间：2013-03-15T01:25:52.363
> 
> 标签：jquery, asp.net, jquery-ui, modal-dialog

我有一个这样定义的 jQuery 对话框：

```
$(function ()
    {
        $("#addDocumentModal").dialog({
            modal: true,
            autoOpen: false,
            height: 300,
            width: 475
        });

        //allow asp.net button clicks
        $("#addDocumentModal").parent().appendTo(jQuery("form:first"));
    }); 
```

最后一行旨在允许 ASP.NET 按钮单击仍可处理，但是我遇到的问题是当我在 UI 样式的背景图像中有该行时（尝试了几个不同的 - 全部来自[http： //www.asp.net/ajaxlibrary/cdn.ashx](http://www.asp.net/ajaxlibrary/cdn.ashx) ) 覆盖对话框，所以你不能做任何事情。去掉那条线可以让对话框按预期显示，但是按钮不起作用。

请注意，我还使用 $(document).ready() （而不仅仅是 $(function()) 进行了尝试，但这并没有改变任何东西。

有什么建议么？我正在使用 jQuery 1.9.1 和 jQuery UI 1.10.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:39:32.890

我遇到过同样的问题。当您将其设置为模态时，Jquery(jquery.UI) 会自动转储一些 inlune 样式。这是解决方案：

下载 jquery.ui 样式表并在您的解决方案中包含样式以对其进行自定义并参考下载的：（下面的链接）

[http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css](http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css)

在这个样式表里面——找到“ui-front”类。

将 z-index 更改/添加到 500 或不断更改，直到达到所需的值。

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:03:58.583

不要尝试推送 div 的父级，将对话框推送到表单中：

```
$(document).ready(function() {
    $("#addDocumentModal").dialog({
        modal: true,
        autoOpen: false,
        height: 300,
        width: 475
    }).parent().appendTo(jQuery("form:first")); //allow asp.net button clicks
}); 
```

如果这不起作用，请查看模态 div 在 z-index 上设置的 CSS。确保它低于对话框。

# batch-file - 使用批处理从 txt 文件中删除最后一行

> ID：15423186
> 
> 赞同：2
> 
> 时间：2013-03-15T01:27:29.450
> 
> 标签：batch-file

我想使用批处理脚本删除 .txt 文件的最后一个空白行。我的最后一行将始终为空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:13:32.050

使用*sed*：

```
sed '$d' in 
```

*$*表示最后一行，*d*表示删除匹配的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:39:34.133

如果您的输出文件只有一个空行，而空行是指空行 - 不包含任何字符，则作为批处理文件命令：

```
for /f "delims=" %%i in (sqloutfile.txt) do >>newfile.txt echo %%i 
```

或者根据提示，

```
for /f "delims=" %i in (sqloutfile.txt) do >>newfile.txt echo %i 
```

# javascript - 在 DFP 中根据浏览器宽度更改广告尺寸

> ID：15423189
> 
> 赞同：1
> 
> 时间：2013-03-15T01:27:40.620
> 
> 标签：javascript, jquery, google-dfp

在 DFP 标准版/DoubleClick 中，我为具有三种不同尺寸的广告单元生成了以下广告代码，并为每种指定尺寸生成了一个广告素材。因此，广告单元有三种不同的尺寸，当您点击刷新时，广告会变为我指定的三种广告尺寸之一。这很好用，但这不是我想要广告做的，

**我希望广告这样做：**

我希望广告根据浏览器宽度更改尺寸，例如，如果观众浏览器宽度大于 800 像素，则以最大指定尺寸显示广告，如果浏览器宽度在 600-800 之间，则使用第二大为广告指定尺寸，最后，如果广告小于 600 像素，则使用最小的广告尺寸......广告应根据浏览器宽度的变化相应地改变尺寸。800、600-800 和小于 600 不是实际尺寸，只是示例尺寸，但无论如何这三种广告尺寸都在此行中指定：

```
googletag.defineSlot('/16569348/Different-Sizes-Unit-Test', [[292, 195], [310, 207], [345, 230]], 'div-gpt-ad-1363309773051-0').addService(googletag.pubads()); 
```

这是完整的代码：

```
<script type='text/javascript'>
var googletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
 gads.async = true;
gads.type = 'text/javascript';
var useSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

 <script type='text/javascript'>
googletag.cmd.push(function() {
googletag.defineSlot('/16569348/Different-Sizes-Unit-Test', [[292, 195], [310, 207],     [345, 230]], 'div-gpt-ad-1363309773051-0').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
googletag.enableServices();
});
</script>

<!-- Different-Sizes-Unit-Test -->
<div id='div-gpt-ad-1363309773051-0'>
<script type='text/javascript'>
googletag.cmd.push(function() { googletag.display('div-gpt-ad-1363309773051-0'); });
</script> 
```

`

这是此代码的 jsfiddle（点击运行或刷新以查看广告随机更改大小）：

[http://jsfiddle.net/Zkm5j/](http://jsfiddle.net/Zkm5j/)

再说一次，我希望广告根据浏览器宽度大小/更改相应地更改大小。如果有人能帮助我想出一个实现这一目标的方法，那对我来说真的意义重大！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-25T19:22:46.317

您应该使用 DFP 提供的映射功能

这是一个页面上有 5 个广告单元的示例。第 1 步：为每个广告单元定义所有可能的尺寸。在 DFP 的广告单元设置中定义这些尺寸。第 2 步：决定哪个广告单元将在哪个视口上使用哪个尺寸。使用变量 megaboardsize firstsize 等创建如下代码所示的尺寸映射。第 3 步：定义插槽和适当的定义映射，如下所示。

在示例中，尺寸将在以下广告单元中投放： **广告单元 - example-megaboard**：在视口宽度超过 970 像素的设备上：970x90,970x250,728x90。在视口宽度超过 728 像素的设备上：728x90。在所有视口较小的设备上：320x100,320x50 **广告单元 - /XXX/example-300x250-1st**：在视口宽度超过 920 像素的设备上：300x250,300x600。在视口宽度超过 300 像素的设备上：300x250。在所有视口较小的设备上：无广告。

等等...

```
<script async='async' src='https://www.googletagservices.com/tag/js/gpt.js'></script>
<script>
  var googletag = googletag || {};
  googletag.cmd = googletag.cmd || [];
</script>

<script>
var gptAdSlots = [];
googletag.cmd.push(function() {

    var megaboardsize = googletag.sizeMapping().addSize([970, 0], [[970,90],[970,250],[728,90]]).addSize([728, 0], [728, 90]).addSize([0, 0], [[320, 100],[320,50]]).build();
    var firstsize = googletag.sizeMapping().addSize([920, 0], [[300,250],[300,600]]).addSize([300, 0],[300,250]).addSize([0, 0], []).build();
    var secondsize = googletag.sizeMapping().addSize([920, 0], [300,250]).addSize([0, 0],[]).build();  
    var thirdsize = googletag.sizeMapping().addSize([920, 0], [300,250]).build();  
    var fourthsize = googletag.sizeMapping().addSize([690, 0], [300,250]).addSize([0, 0],[]).build();

    gptAdSlots[0] = googletag.defineSlot('/XXX/example-megaboard', [[970, 90], [320, 100], [320, 50], [728, 90], [970, 250]], 'gpt-megaboard').defineSizeMapping(megaboardsize).addService(googletag.pubads());

    gptAdSlots[1] = googletag.defineSlot('/XXX/example-300x250-1st', [[300, 600], [300, 250]], 'gpt-1st').defineSizeMapping(firstsize).addService(googletag.pubads());

    gptAdSlots[2] = googletag.defineSlot('/XXX/example-300x250-2nd', [300, 250], 'gpt-2nd').defineSizeMapping(secondsize).addService(googletag.pubads());

    gptAdSlots[3] = googletag.defineSlot('/XXX/example-300x250-3rd', [300, 250], 'gpt-3rd').defineSizeMapping(thirdsize).addService(googletag.pubads());

    gptAdSlots[4] = googletag.defineSlot('/XXX/example-300x250-4th', [300, 250], 'gpt-4th').defineSizeMapping(fourthsize).addService(googletag.pubads());

    googletag.pubads().enableSingleRequest();
    googletag.pubads().collapseEmptyDivs();
    googletag.enableServices();
  });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T17:46:15.030

您无法直接根据 dfp 配置的设备宽度/高度来真正控制将提供给用户的订单项的宽度。

你能做的是 - 。触发广告时，根据设备宽度/高度指定尺寸。例如，如果设备的宽度小于 600 像素，则仅使用最小的广告尺寸来触发。例如

```
 if(window.innerWidth < 800){
     googletag.defineSlot('ADID', [[292, 195]], 'domid')
  } 
```

检查这两个演示链接，它们触发了不同大小的同一个 adunit。

320x50 - [http://tinyurl.com/q2x3562](http://tinyurl.com/q2x3562)

300x250 - [http://tinyurl.com/o3vx4qk](http://tinyurl.com/o3vx4qk)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-02T13:45:10.720

对我来说，这篇文章总结了最佳选择：[http ://exisweb.net/how-to-use-google-adsense-on-a-responsive-website](http://exisweb.net/how-to-use-google-adsense-on-a-responsive-website)

我基于 #3 制作了一个 WordPress 插件：[https ://wordpress.org/plugins/responsive-ad-shortcodes/](https://wordpress.org/plugins/responsive-ad-shortcodes/)

# c# - 是否可以将派生类的属性参数传递给其基类？

> ID：15423191
> 
> 赞同：3
> 
> 时间：2013-03-15T01:27:51.777
> 
> 标签：c#, attributes, base, derived-class

是否可以将派生类的属性参数传递给其基类？

本质上，我正在尝试从派生类中设置属性的属性参数。

*   如何在 C++ 中完成

    ```
    public class HasHistory<T, string name> {
        public HasHistory() {
            History=new History<T>();
        }

        // here's my attribute
        [BsonElement(name)]
        public History<T> History {
            get;
            protected set;
        }
    } 
    ```

    但是，**非类型模板参数**在 C++ 中是合法的，但**在 C# 中是非法的**。

*   C# 中的一个出乎意料的解决方法

    我意识到我可以将属性设为虚拟，并在派生类中添加属性。但是我会在构造函数中调用一个虚函数，虽然这可能有效，但这是不好的做法。

    我确实想进行该调用，因为我希望基类构造函数初始化成员；这实际上是基类的重点。

    ```
    public class HasHistory<T> {
        public HasHistory() {
            // this will be called before Derived is constructed
            // and so the vtbl will point to the property method
            // defined in this class.
            // We could probably get away with this, but it smells.
            History=new History<T>();
        }

        // here's my property, without an Attribute
        public virtual History<T> History {
            protected set;
            get;
        }
    }

    public class Derived: HasHistory<SomeType> {
        // crap! I made this virtual and repeated the declaration
        // just so I could add an attribute!
        [BsonElement("SomeTypeHistory")]
        public virtual HasHistory<SomeType> History {
            protected set;
            get;
        }
    } 
    ```

    所以我想我不能把属性放在基类中，而是把它放在派生类属性上，该属性使用/是根据受保护的基类属性实现的，但这太麻烦了，它消除了使用基类所获得的任何便利班级。

所以有一个好方法可以做到这一点，对吧？正确的？

如何在**不覆盖**派生类中的属性的情况下重新定义从基类继承的派生类属性的属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:21:13.113

**更新：**该死，你已经考虑过了。我应该在发布之前更新:)

不幸的是，您想要做的远远超出了 C# 的属性机制的范围。泛型与模板不同，因此这种解决方法几乎可以做到。

大多数情况下，无论如何你都会在顶层定义一个属性，所以通常这不是问题。当这*是*一个问题 - 显然在你的情况下 - 那么你必须使用丑陋的解决方法。

**下面的原始答案...**

* * *

如果我正确理解了该示例，则您希望根据派生类型中/由派生类型声明的某些值将属性应用于类成员。由于 C# 不支持泛型的非类型参数，因此您需要另一种方法来执行此操作。

您可能可以做的一件事是覆盖后代类中的属性，如下所示：

```
public class HasHistory<T>
{
    public HasHistory() 
    {
        History = new History<T>();
    }

    public virtual History<T> History { get; protected set; }
}

public class MyHistory<T> : HasHistory<T>
{
    public MyHistory()
        : base()
    {}

    [BSONElement("some name")]
    public override History<T> History 
    { 
        get
        {
            return base.History;
        }
        protected set
        {
            base.History = value;
        }
    }
} 
```

使用该`BsonElement`属性的代码将使用派生实例的*实际*`HasHistory<T>`类型，因此它将查看在`virtual`链末尾定义的属性。鉴于上面的代码，如果我创建一个`MyHistory<T>`实例并将其传递给 BSON 序列化程序，它将找到附加到类中`History`属性的属性`MyHistory<T>`。

但是，您可以在基本级别定义一个属性，并在必要时在派生类中覆盖它。不确定这对您的情况是否有用。

这是更多的工作，特别是因为您必须在每个派生类中执行此操作，但我认为在这种情况下，这与您将要获得的 C++ 模板样式一样接近。但是，我很高兴被证明是错误的:)

# image - 在画布中动态创建的图像到 h264

> ID：15423193
> 
> 赞同：1
> 
> 时间：2013-03-15T01:28:11.707
> 
> 标签：image, video, canvas, stream

我正在尝试构建一个应用程序，将几个画布对象动态地并不断地创建为 h264 视频流。

我现在正在使用 node.js，但我可以改变。

你能建议我最好的方法吗？

提前致谢。

爱德华多

# php - mysql验证来自多个表数据的数据

> ID：15423195
> 
> 赞同：0
> 
> 时间：2013-03-15T01:28:24.790
> 
> 标签：php, mysql, sql, database

# 已编辑

我意识到我没有包含品牌代码 ID 现在主表包含品牌 ID，其中只有 1001 和 1002 是我关心的其他品牌是第三方品牌。

## 结束编辑部分

首先感谢所有社区在这里提供的帮助，一直非常有用。我完全是 mysql 的菜鸟，我开发 java、javascript 和当前的 php，在我当前的项目中，我面临一个问题，我需要从我们的数据库中检索数据，考虑到我无法以任何方式修改任何数据库问题都不是如下：

例如，有一个销售不同品牌的购物网站，包括两个自有品牌，将它们命名为“puma”、“nike”、“ownbrand1”和“ownbrand2”，仓库只保留“ownbrand1”和“ownbrand2”的库存，如果客户购买任何其他品牌的第三方公司将根据需要发送所要求的产品。该网站提供了许多过滤结果的选择，其中之一是仅显示我们目前有库存的商品。

假设我们有 3 个表，第一个表，我们称之为“库存”，其中包含每个产品的内部唯一代码（仅限自有品牌）的库存数量，第二个“主”具有每个具有唯一代码 id 和一般信息的单个产品的信息产品id和第三个表格“照片”保存图片，目的是在网站上展示图片信息和一般产品id。

产品由每个产品不同的唯一产品代码 id 标识，这意味着相同的产品但不同尺寸或颜色将具有不同的代码 id，第二个 id 通用产品 id 仅对每个产品不同，即不同的尺寸或颜色将具有相同的产品 ID 和图片信息，即一般产品之一的图片。

```
------------------------------ 
          Stock 
------------------------------ 
ID            Name         Stock 
00001     puma1             0 
00002     puma2             0 
00003     ownbrand1(s)      0 
00004     ownbrand2(l)      0 
00005     nike              0 
00006     ownbrand1(l)      1 
00007     ownbrand1(m)      3 

---------------------------------------------
        Master 
---------------------------------------------
 ID         Name         GeneralId    BrandId
00001   puma1             pum001      1030
00002   puma2             pum001      1030
00003   ownbrand1(s)      owbr001     1001
00004   ownbrand2(l)      owbr002     1002
00005   nike              nike001     1040
00006   ownbrand1(l)      owbr001     1001
00007   ownbrand1(m)      owbr001     1001

------------------------------ 
        Photo 

------------------------------ 
GeneralId    　Picture
pum001  　 　 pum001.jpg
owbr001  　  owbr001.jpg
owbr002　 　 owbr002.jpg
nike001  　  nike001.jpg 
```

如果单击仅库存商品的选项，页面将显示来自第三方的商品，并且在这种情况下，只有自有品牌的库存大于 0 的商品才会显示

# 期望的结果

"puma" = show
"nike" = show
"ownbrand1" = show (因为它有一些尺码的库存)
"ownbrand2" = not shown (因为没有库存)

现在我完成了首先做这个查询的任务：

```
$sql_query = "SELECT stock.*, master.*  FROM stock, master WHERE master.ID = stock.ID AND stock.stock > '0'" 
```

然后生成一个数组，其中包含从主表中获取的库存商品的 generalID 代码，然后生成以下查询：

```
$sql_query = "SELECT * FROM master WHERE generalID NOT IN $previous_array" 
```

并加入这两个数组以生成整个产品品牌列表，以显示在进行更多过滤以进行分类后执行最后一个查询：

```
$sql_query = "SELECT * FROM photo WHERE generalID IN $complete_array" 
```

现在这个方法给了我我需要的结果，但是正如你所期望的那样，它有超过 2000 种商品和 30 多个品牌，它确实会稍微降低性能速度，我尝试进行 UNION 查询，但我真的无法理解这个想法。

如果你们中的任何一个 sql 大师可以帮助我理解这一点，我将是一个非常快乐的兔子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:44:36.777

```
SELECT *
FROM 
 (SELECT * 
 FROM stock 
   inner join master using (ID) 
   inner join photo using (generalID)
 WHERE (master.BrandId!=1001 and master.BrandId!=1002) or stock.stock>0
 ) as whatever
GROUP BY master.generalID 
```

# cognos - cognos 10.1 提示 API Javascript

> ID：15423196
> 
> 赞同：1
> 
> 时间：2013-03-15T01:28:32.743
> 
> 标签：cognos, cognos-8, cognos-bi

在“IBM cognos BI 的附录 H Prompt API”中有一个关于如何使用方法调用 addValues 的示例。然而，我尝试过的每一次尝试都给我留下了 0 个结果。这是我一直在尝试使用的代码，它不会产生任何错误。

```
 window.onload = function()
{
var oCR = cognos.Report.getReport("_THIS_");
       function setPromptValue(promptName, useValue, displayValue ) {
    var oP = oCR.prompt.getControlByName( promptName );

var oValue =( {"use": useValue, "display": displayValue});
oP.addValues( [oValue]);
}
setPromptValue ( 'L', 'ca', 'Canada');
} 
```

我基本上传递了我的控制名称，即“L”并说使用“ca”但显示加拿大。它根本不起作用。有没有人能够做到这一点？我已经做了几个小时了，并且有任何运气，任何帮助将不胜感激。感谢所有米格尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:57:45.043

我建议使用 Cognos 中的“静态选择”或“使用值”/“显示值”功能来解决此问题。

在您定义下拉列表的提示页面上，有三个属性。

使用静态选项，您可以定义特定于该报告的选项列表，这些选项始终在下拉列表中可用。这可以代替或补充使用查询来填充下拉工具的内容。

![Cognos 8.4.1 中的静态选择](../Images/d0b1cffb8e4f5f3097791e14b9b164f0.png)

在这里，您可以将 Use 设置为“ca”，将 Display 设置为“Canada”，ca/Canada 选项将始终可用。

现在 ca = 'Canada' 是一个相当可重用的设置，因此最好的解决方案可能是有一个定义国家代码及其名称的表（我们将其称为 COUNTRY_CODES）。在框架管理器中设置 COUNTRY_CODES 后，您可以创建一个查询来提取您希望用户从中选择的国家代码，然后在“查询”属性下的下拉属性中，指定您创建的查询。

接下来，您转到“使用值”属性并选择国家代码字段（“ca”所在的位置）。在“显示值”属性中，选择国家名称字段（“加拿大”所在的位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T19:11:32.140

你没有说你的提示控制是什么类型的控制。如果控件是值提示，则必须确保“使用”值有效，否则将被忽略。设置值时，不需要“显示”值。您不需要window.load，只需执行该功能即可。我尝试了以下示例并且它有效。

```
(function() {
var oCR = cognos.Report.getReport("_THIS_");
function setPromptValue(promptName, useValue, displayValue ) {
    var oP = oCR.prompt.getControlByName( promptName );
    var oValue =( {"use": useValue});
    oP.addValues( [oValue]);
}
setPromptValue ( 'L', 'ca');})() 
```

# sql - 解析日志以恢复 SQL 插入信息

> ID：15423203
> 
> 赞同：1
> 
> 时间：2013-03-15T01:30:03.963
> 
> 标签：sql, parsing, sed, awk

我设法错过了一个字母并删除了大约 10000 多个 SQL 记录....在两个不同的表中。
无论如何，在过去的 4 个小时里，我一直在阅读和测试软件以恢复这些记录。简而言之，忘记它......
但是，我确实启用了完全详细的应用程序日志。
这是一个例子：

```
07.03 17:04:30|      |         » 0
07.03 17:04:30|      |SQLSERVER» MyProcedure.InsertHeader:insert into mytable(myFields,...) values(0,etc)
07.03 17:04:30|      |         #1 
```

我的简单问题是如何在没有用户干预的情况下解析它？
所以最终的结果只有：

```
insert into mytable(myFields,...) values(0,etc) 
```

我有 1 个月的此类日志要恢复，除了插入信息之外，还有太多其他包含不同信息的行。
我不在乎它是在 Linux 中还是在 Windows 中，像 awk、sed 之类的东西会很棒，而且会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:39:12.117

从您当前的示例中，此行有效：

```
grep -io "insert into .*" file 
```

从您的输入（示例）中，您要提取的 sql 以“插入”开头。它是独一无二的。所以很容易找到和提取。如果它不适用于您的真实数据，请粘贴更多示例作为输入。

# java - 试图从 jtextfield 读取用户输入并在另一个 jtextfield 中显示。出现空

> ID：15423204
> 
> 赞同：-1
> 
> 时间：2013-03-15T01:30:18.917
> 
> 标签：java, jtextfield, gettext

我是java新手，我似乎无法解决这个问题。我知道我错过了一些东西。

基本上，我正在尝试做的是从 a 中读取用户的输入`JTextfield`，然后显示用户在另一个中输入的内容`JTextfield`。

我希望这一切在我点击添加按钮后发生。一旦我点击添加按钮，我希望用户输入从第一个`JTextfield`然后显示在不同的`JTextfield`.

但是，当在第一个文本字段中输入内容并点击添加按钮时，我会`null`在另一个中得到一个值`JTextfield`。我不知道为什么。

我正在使用应该使用 .gettext() 方法存储用户输入的类变量。

不知道发生了什么任何帮助表示赞赏。

```
package inventoryprogrampart6;

import javax.swing.JFrame;

public class AddItemWin extends javax.swing.JFrame {
  private int itNm,unitNm,yr;
  private String prodName;
  private double price;
    /**
     * Creates new form AddItemWin
     */
    public AddItemWin() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        textField1 = new java.awt.TextField();
        textField2 = new java.awt.TextField();
        textField3 = new java.awt.TextField();
        textField4 = new java.awt.TextField();
        textField5 = new java.awt.TextField();
        jButton1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jPanel1.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Add New Item", javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION, javax.swing.border.TitledBorder.DEFAULT_POSITION, new java.awt.Font("Times New Roman", 1, 12))); // NOI18N

        jLabel1.setText("Item Number:");

        jLabel2.setText("Product Name:");

        jLabel3.setText("Number of Units:");

        jLabel4.setText("Prodcut Price");

        jLabel5.setText("Year Made:");

        jButton1.setText("Add Item");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addContainerGap()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel5, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel4, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel3, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel2, javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jLabel1, javax.swing.GroupLayout.Alignment.TRAILING))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                            .addComponent(textField1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(textField2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(textField3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(textField4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                            .addComponent(textField5, javax.swing.GroupLayout.DEFAULT_SIZE, 166, Short.MAX_VALUE)))
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGap(157, 157, 157)
                        .addComponent(jButton1)))
                .addContainerGap(156, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(jPanel1Layout.createSequentialGroup()
                        .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(jPanel1Layout.createSequentialGroup()
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addComponent(jLabel1)
                                    .addComponent(textField1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addComponent(jLabel2)
                                    .addComponent(textField2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(jLabel3))
                            .addComponent(textField3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel4))
                    .addComponent(textField4, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(jLabel5)
                    .addComponent(textField5, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addGap(21, 21, 21)
                .addComponent(jButton1)
                .addContainerGap(23, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(76, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
       textField5.setText(String.valueOf(getitNm())); 

    }                                        

   public void addToArray()
   {
        itNm = Integer.parseInt(textField1.getText());
        prodName = (textField2.getText());
        unitNm = Integer.parseInt(textField3.getText());
        price = Double.parseDouble(textField4.getText());
        yr = Integer.parseInt(textField5.getText());

   }

    public int getitNm()
    {
        return itNm;
    }

    public String getProdName()
    {
        return prodName;
    }
    public int getunitNm()
    {
        return unitNm;
    }
    public double getprice()
    {
        return price;
    }
    public int getyear()
    {
        return yr;
    }

    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JPanel jPanel1;
    private java.awt.TextField textField1;
    private java.awt.TextField textField2;
    private java.awt.TextField textField3;
    private java.awt.TextField textField4;
    private java.awt.TextField textField5;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:58:17.063

您没有在课堂上的任何地方调用此方法

```
 public void addToArray() 
```

这就是您输入的值不会被存储的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:01:51.793

首先，您不需要所有额外的代码，它只会浪费内存。实例化类型时取出包名。其次，您不能直接从文本字段中解析某些文本，您必须首先将值放入字符串中。如果这不起作用，请尝试

```
 myTextBox.setEnabled(true); 
```

如果您需要更多帮助，请询问我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:36:04.107

有很多问题，主要是围绕着实际上不知道你想要达到的目标的问题......

如果任何字段没有文本（或无法解析为 a 的文本`int`） ，这将导致错误

```
public void addToArray() {
    itNm = Integer.parseInt(textField1.getText());
    prodName = (textField2.getText());
    unitNm = Integer.parseInt(textField3.getText());
    price = Double.parseDouble(textField4.getText());
    yr = Integer.parseInt(textField5.getText());
} 
```

这意味着，如果您将最后一个字段留空，它将通过`NumberFormatException`. 现在，您想要将第一个字段的内容复制到最后一个字段的事实让我更清楚为什么您想要该字段的内容。

在你`jButton1ActionPerformed`的方法中，你可以简单地使用`textField5.setText(textField1.getText())`并实现你想要的

# vb.net - 索引超出了数组的范围 - VB2008

> ID：15423205
> 
> 赞同：1
> 
> 时间：2013-03-15T01:30:19.723
> 
> 标签：vb.net

为什么我不断收到此错误：索引超出了数组的范围。请帮忙。谢谢你。

```
 Dim list As New ListBox
 Dim dirsize As Integer
 Dim a As Integer
 Dim container(0) As String

 Dim counter As System.Collections.ObjectModel.ReadOnlyCollection(Of String)
 counter = My.Computer.FileSystem.GetFiles("C:\myfolder")
 dirsize = counter.Count

 For a = 0 To dirsize

     container(a) = a + 1
     lstItems.Items.Add(container(a))

 Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:20:14.317

基本上`container`只有 1 个元素，您在子开始时会变暗。您永远不会调整容器大小，因此如果`dirsize`不是 0，您将收到此错误。

您应该执行以下操作：

```
 Dim list As New ListBox
 Dim dirsize As Integer
 Dim a As Integer
 Dim container() As String

 Dim counter As System.Collections.ObjectModel.ReadOnlyCollection(Of String)
 counter = My.Computer.FileSystem.GetFiles("C:\myfolder")
 dirsize = counter.Count

 **ReDIm container(dirsize)**
 For a = 0 To dirsize

     container(a) = a + 1
     lstItems.Items.Add(container(a))

 Next 
```

# titanium - 为什么带有圆形边框的 TextField 在放置在背景图像顶部时会有一个奇怪的底部边框？

> ID：15423206
> 
> 赞同：0
> 
> 时间：2013-03-15T01:30:26.333
> 
> 标签：titanium, titanium-mobile

这是我的 TSS 代码：

```
"TextField": {
    font: {fontFamily: "Open Sans", fontSize: "20"},
    borderStyle: Ti.UI.INPUT_BORDERSTYLE_ROUNDED
},

".yourNameText": {
    top: 279,
    left: 566,
    width: 364,
    height: 45
} 
```

..这就是它的样子：

![截屏](../Images/6ace43e9ab965e615ed4d990432de5df.png).

这是正常的吗？底部边框似乎不应该像那样分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:43:19.460

该阴影是边框样式的一部分。不，在深色背景下看起来不太好。

而不是`borderStyle`，您可以使用`borderRadius: 10`来获得相同的圆形边框。可能需要玩弄这个数字才能让它看起来像你想要的那样。

另外，如果你想模拟一点阴影，你可以使用`borderColor`和`borderWidth`。

[边界半径文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TextField-property-borderRadius)

# core-data - NSManagedObjects 的重复副本

> ID：15423212
> 
> 赞同：0
> 
> 时间：2013-03-15T01:31:18.617
> 
> 标签：core-data, nsmanagedobject, nsmanagedobjectcontext

我有许多需要显示来自核心数据存储的数据的视图控制器。

它们中的每一个都从相同的上下文中获取托管对象，但是由于某种原因，当 VC 不止一次进行获取时，托管对象的数量会增加？

managedObjects 不能在同一个上下文中共享并且只能引用指针吗？

当 View Controller 请求相同的数据时，为什么托管对象的数量会增加？

代码：

```
- (void) updateCacheWithObject:(Object *)object
{

[self.coreDataSaveQueue addOperationWithBlock:^{

    NSManagedObjectContext *saveContext = [[NSManagedObjectContext alloc] init];
    [saveContext setPersistentStoreCoordinator:[self persistentStoreCoordinator]];

    AudioObject *object = [NSEntityDescription
                             insertNewObjectForEntityForName:@"object"
                             inManagedObjectContext:saveContext];

    [audioObject setValue:object.localPath forKey:@"localPath"];
    [audioObject setValue:object.title forKey:@"title"];
    [audioObject setValue:object.data forKey:@"data"];

    NSError *error;

    // does the psc have a store
    if ([saveContext.persistentStoreCoordinator.persistentStores count] == 0) {
        [saveContext setPersistentStoreCoordinator:[self persistentStoreCoordinator]];
    }

    if (![saveContext save:&error])
    {
        NSLog(@"Couldn't save: %@", [error localizedDescription]);
        NSLog(@"Error user info dictionary is %@", [error userInfo]);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T00:05:11.223

你所展示的不是一个获取。这是一个插入（特别是`insertNewObjectForEntityForName:inManagedObjectContext:`）。你想要的课程是`NSFetchRequest`.

我还看到，出于某种原因，您将 self.persistentStoreCoordinator 分配给 saveContext 的 PSC 两次，一次在第 7 行，一次在底部约 10 行。

# java - java中的memfill / arrayfill？比嵌套循环更有效的方法？

> ID：15423223
> 
> 赞同：1
> 
> 时间：2013-03-15T01:32:29.327
> 
> 标签：java, arrays, multidimensional-array

我知道在 java 中复制数组的最快方法是使用 System.arraycopy()-fn。当我想将数组的所有字段设置为 - 让我们说： - 5 时是否有类似的东西？

还是我确实使用了嵌套的 for 或 while 循环？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:36:38.337

是的。使用`Arrays.fill()`. 请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Arrays.html)

# requirejs - 使用包没有解决依赖关系（包没有被尊重？）

> ID：15423224
> 
> 赞同：1
> 
> 时间：2013-03-15T01:32:31.013
> 
> 标签：requirejs

我有一个已定义的模块并具有它自己的依赖项（在本地解决）

在浏览器中使用 require 时，它​​工作正常。但是，当我设置测试时，我使用一个包来解析回我的源代码

```
packages: [
    {
        name:"packageSource",
        location:( process.argv[2] == "html-cov" ) ? "../../CodeCoverage" : "../../src",
        main:"packageSource"
    }
] 
```

这适用于所有需要的顶级文件，但是当它们在自己的模块中需要时，路径没有被正确解析。

顶级文件（工作）：

```
var controller = require('packageSource/modules/moduleA/ParentController'); 
```

在该文件中，我执行以下操作：

```
var rowController = require('./components/simple/controller.js'); 
```

它应该调用：src/modules/moduleA/components/simple/controller.js

相反，它调用 packageSource/components/simple/controller.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T05:16:19.443

经过几个开发人员的研究，我们终于弄明白了。

这是因为路径中的 .js 。可能是因为包定义，当你给它一个文字文件时，它会尝试从字面上解析它，而不是使用它现有的定义。

删除 .js 修复了它。

# python - Python：加载str数组时，列表索引必须是整数，而不是str

> ID：15423227
> 
> 赞同：1
> 
> 时间：2013-03-15T01:32:40.540
> 
> 标签：python, list

我正在尝试加载一个大的多维数组，首先使用字符串（因为像 08 和 09 这样的东西被注册为不同的类型标记），然后将它们映射到整数。

```
strarray = [['08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08']
            ['49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00']
            ['81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65']
            ['52 70 95 23 04 60 11 42 69 24 68 56 01 32 56 71 37 02 36 91']
            ['22 31 16 71 51 67 63 89 41 92 36 54 22 40 40 28 66 33 13 80']
            ['24 47 32 60 99 03 45 02 44 75 33 53 78 36 84 20 35 17 12 50']
            ['32 98 81 28 64 23 67 10 26 38 40 67 59 54 70 66 18 38 64 70']
            ['67 26 20 68 02 62 12 20 95 63 94 39 63 08 40 91 66 49 94 21']
            ['24 55 58 05 66 73 99 26 97 17 78 78 96 83 14 88 34 89 63 72']
            ['21 36 23 09 75 00 76 44 20 45 35 14 00 61 33 97 34 31 33 95']
            ['78 17 53 28 22 75 31 67 15 94 03 80 04 62 16 14 09 53 56 92']
            ['16 39 05 42 96 35 31 47 55 58 88 24 00 17 54 24 36 29 85 57']
            ['86 56 00 48 35 71 89 07 05 44 44 37 44 60 21 58 51 54 17 58']
            ['19 80 81 68 05 94 47 69 28 73 92 13 86 52 17 77 04 89 55 40']
            ['04 52 08 83 97 35 99 16 07 97 57 32 16 26 26 79 33 27 98 66']
            ['88 36 68 87 57 62 20 72 03 46 33 67 46 55 12 32 63 93 53 69']
            ['04 42 16 73 38 25 39 11 24 94 72 18 08 46 29 32 40 62 76 36']
            ['20 69 36 41 72 30 23 88 34 62 99 69 82 67 59 85 74 04 36 16']
            ['20 73 35 29 78 31 90 01 74 31 49 71 48 86 81 16 23 57 05 54']
            ['01 70 54 71 83 51 54 69 16 92 33 48 61 43 52 01 89 19 67 48']]

numarray = map(int, strarray)

print numarray 
```

但是，当我尝试运行它时，它给了我错误“列表索引必须是整数，而不是字符串”

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:35:06.380

您有一个列表 if 字符串列表，因此您需要解压缩子列表的项目，拆分它们并将 int 应用于每个。此外，您似乎忘记用逗号分隔顶级列表项。试试这个：

```
strarray = [['08 02 22 97 38 15 00 40 00 75 04 05 07 78 52 12 50 77 91 08'],
        ['49 49 99 40 17 81 18 57 60 87 17 40 98 43 69 48 04 56 62 00'],
        ['81 49 31 73 55 79 14 29 93 71 40 67 53 88 30 03 49 13 36 65'],
        ...]
numaarray = [map(int, subL[0].split()) for subL in strarray] 
```

# asp.net - Web 控件在后面的代码中无法识别

> ID：15423228
> 
> 赞同：4
> 
> 时间：2013-03-15T01:32:42.107
> 
> 标签：asp.net, visual-studio-2012

我正在通过 Visual Studio 2012 为我的第一个网站（使用 twitter oAuth）工作。我觉得不得不问这个问题很愚蠢，因为我确信它非常简单。

我无法让代码隐藏识别我的 .aspx 页面上的任何 Web 元素。我不确定是否需要更改选项中的某些内容，或者我是否只是缺少某些内容。

我通过工具箱向“index.aspx”添加了一个文本框，并为其指定了 id = 'txtUserName'。当我尝试将 txtUserName.Text 分配给 page_load 中的变量时，我收到一条错误消息，指出当前上下文中不存在“txtUserName”。

希望有人能让我打我的头，我错过了一个简单的标签或其他东西。

索引.aspx：

```
<%@ Page Language="C#" AutoEventWireup="True" CodeBehind="index.aspx.cs" Inherits="TwitterTest.index" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>TwitterTest!!!</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    Welcome to TwitterTest

    </div>
        <asp:TextBox ID="txtUserName" runat="server" Text=""></asp:TextBox>
    </form>
</body>
</html> 
```

index.aspx.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.Mvc;
using TweetSharp;

namespace TwitterTest
{
    public partial class index : System.Web.UI.Page
    {
        static void Page_Load(object sender, EventArgs e)
        {
            string UserName = txtUserName.Text;
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:40:24.690

你`Page_Load`应该是`protected void Page_Load`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:51:07.473

你在VS2012中使用什么视图？您可以尝试从代码视图翻转到设计器视图以刷新您的 page.designer.cs。还要仔细检查designer.cs，以确保您的控件确实存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T06:43:28.310

右键单击该页面并选择“**转换为 Web 应用程序**”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-29T11:04:13.383

删除母版页并再次添加母版（并复制现有内容，不包括页面指令），然后设计器页面也将被添加，问题将得到解决。

# html - 如何从另一个 CSS 规则中借用样式

> ID：15423230
> 
> 赞同：1
> 
> 时间：2013-03-15T01:32:49.853
> 
> 标签：html, css

**主要文件：**

home.html（访问：只读）

```
...

    <h1>Heading 1</h1>

... 
```

externalFile.css（访问：只读）

```
.tagh1 {
  margin: 10px 0;
  font-family: inherit;
  font-weight: bold;
} 
```

myfile.css（访问：读/写）

```
h1 {
  color: #08C;
} 
```

如何`.tagh1`在 CSS 规则 (myfile.css) 中包含 (externalFile.css) 的`h1`样式，而无需将它们从一个文件复制粘贴到另一个文件？

**逻辑答案：**

```
h1 {
  color: #08C;
  /* Just copy and paste them */
  margin: 10px 0;
  font-family: inherit;
  font-weight: bold;
} 
```

但我不能这样做:)

**编辑：**

我认为它可能是这样的：

```
.tag1 {
  property1: value1;
  property2: value2;
}

.tag2 {
  include(.tag1); /* or something */
  property3: value3;
} 
```

避免重复代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T01:38:23.807

如果我正确理解了这个问题，那么您已经在页面中包含了这两个 CSS 文件，并且您希望在没有必要 CSS 类的 H1 标记上重新使用第一个 CSS 规则。而且它不是编辑 HTML 文件或第一个 CSS 文件的选项。

CSS 本身不提供您正在寻找的重用类型。像[LESS](http://lesscss.org/)或[SASS](http://sass-lang.com/)这样的动态样式表语言可能会，但考虑到您网站的限制（只读文件），这可能不是一个选项。

如果 JavaScript 或 jQuery 是一个选项，您可以动态地将`.tagh1`类添加到`h1`元素中，而无需接触 HTML 源代码。

**jQuery**

```
$(document).ready(function(){
    $('h1').addClass('tagh1');
}); 
```

那么上述两个 CSS 规则都将应用于 H1 元素。

是否有`.js`您具有写入权限的文件？如果是这样，请在此处添加上述代码。如果没有，您必须将 CSS 样式复制并粘贴到第二个 CSS 文件中。

# php - 检查文件1中的单词是否存在于文件2中

> ID：15423231
> 
> 赞同：-3
> 
> 时间：2013-03-15T01:32:55.437
> 
> 标签：php, perl, bash, compare

我有两个文件。file1.txt 包含：

```
hello
world
france 
```

file2.txt 包含：

```
hello
germany
france 
```

我试图弄清楚如何获得`germany`file1.txt 中不存在的单词

任何语言

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:36:10.483

我建议使用[`comm`](http://linux.die.net/man/1/comm)

```
comm -13 <(sort -u /tmp/list1) <(sort -u /tmp/list2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:46:40.077

这条短线应该适合你：

```
 grep -Fwvf file1 file2 
```

或更长的线：

```
 awk 'NR==FNR{a[$0];next}!($0 in a)' file1 file2 
```

两个命令输出：

```
germany 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:44:51.343

珀尔：

```
++$file1{$_} while <$fh1>;
while (<$fh2>) {
    print if !$file1{$_};
} 
```

# javascript - 如何将带有图像的 div 与带有文本的另一个 div 保持在同一行

> ID：15423232
> 
> 赞同：0
> 
> 时间：2013-03-15T01:32:56.303
> 
> 标签：javascript, html, css

我很难让我的蓝色添加图像与字母表的字母在同一行。正如您在此处看到的，它始终显示在字母表下方：

![在此处输入图像描述](../Images/f9c39490c30a9e68877e827a3fc77eed.png)

这是 HTML，显示了我最近的尝试（空白：nowrap）：

```
<div style="width:900px">
    <fieldset>                
        <div style="width:900px"><h2>abook</h2></div>
        <div class="center" id="headerAlphabet" style="white-space:nowrap"></div>
    </fieldset>
</div> 
```

下面是我在 JavaScript 中准备好的函数。循环通过附加到 div 来创建字母表中的字母。然后，当它添加添加图像时，它会在新行上结束。

这是我最近的尝试，显示`float:left`. 我也试过`display:block`and `display:inline`。我也试过把它们放在锚标签中。我还尝试了其他我现在不记得的事情。

```
$(function () {
    // Show the letters of the alphabet, with a link to call GetEntries() for each of them.
    for (var i = 65; i <= 90; i++) {
        $('#headerAlphabet').append('<a href=\"#\" onclick=\"GetEntries(\''
            + String.fromCharCode(i) + '\')\">'
            + String.fromCharCode(i) + '</a> ');
    }

    $('#headerAlphabet').append('<a href=\"#\" onclick=\"AddEntry()\">'
            + '<img src=\"/Scripts/Home/add.png\" title=\"Add contact\" style=\"float:left\" /></a>')
}); 
```

我发现的每个解决方案都说要做我上面尝试过的事情，但没有任何效果。如何让我的添加图像与字母在同一行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:38:37.943

[http://jsfiddle.net/VKmN7/](http://jsfiddle.net/VKmN7/)

我猜您正在使用 css 重置或类似的东西，将所有`img`标签设置为`display:block;`. 将附加的 img 设置为`display:inline;`：

```
a img { display:inline; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:48:03.927

如果图像位于 < a > 标签内，请尝试将 < a > 标签向左浮动。

然后只需确保有足够的空间让它们都适合，900px 可能还不够。

# c++ - 引擎盖下的 c++ 字符串构造函数

> ID：15423233
> 
> 赞同：6
> 
> 时间：2013-03-15T01:33:06.953
> 
> 标签：c++

我有一个简单的程序：

```
#include <iostream>
#include <string>
#include <string.h>

using namespace std;

string read0() {
    int length = 4;

    char *cstr = new char[length];

    string str(cstr);

    delete[] cstr;

    return str;
}

string read1() {
    int length = 4;

    char cstr[length];

    memset(cstr, '-', 4);

    string str(cstr);

   return str;
}

string read2() {
    const char* cstr = "abcd";

    string str(cstr);

    return str;
} 
```

在上述所有 3 个函数中，为了构造一个字符串，它们`call basic_string( const CharT* s, const Allocator& alloc = Allocator()`. 当我使用 valgrind/massif 检查堆使用情况时，函数 read0 只使用 4 个字节（从`new`），但 read1 和 read2 都使用 29 个字节。

以下是地块的一些详细输出：

对于 read0：

> 16.67% (4B) (堆分配函数) malloc/new/new[], --alloc-fns, etc.
> 
> -> 16.67% (4B) 0x400A0B: read0() (main.cpp:10)
> 
> -> 16.67% (4B) 0x400BC8: 主要 (main.cpp:40)

对于 read1 和 read2：

> 72.50% (29B) (堆分配函数) malloc/new/new[], --alloc-fns, etc.
> 
> ->72.50% (29B) 0x4EE93B7: std::string::_Rep::_S_create(unsigned long, unsigned long, std::allocator const&) (在 /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0 .17)
> 
> ->72.50% (29B) 0x4EEAD93: char* std::string::_S_construct(char const*, char const*, std::allocator const&, std::forward_iterator_tag) (在 /usr/lib/x86_64-linux-gnu /libstdc++.so.6.0.17)
> 
> ->72.50% (29B) 0x4EEAE71: std::basic_string, std::allocator >::basic_string(char const*, std::allocator const&) （在 /usr/lib/x86_64-linux-gnu/libstdc++.so 中。 6.0.17)
> 
> -> 72.50% (29B) 0x400B81: read2() (main.cpp:34)
> 
> -> 72.50% (29B) 0x400BC8: 主要 (main.cpp:40)

是什么导致了这种差异？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T01:42:13.470

如果我错了，请有人纠正我，但我想我知道这是为什么。

在`read0`中，您可以：

```
char *cstr = new char[length];
string str(cstr); 
```

你根本不初始化`cstr`，所以它可能是未定义的。字符串构造函数接受一个以**null 结尾的**c-string 并将其复制[到 null 终止符](http://www.cplusplus.com/reference/string/string/string/)。我认为它在第一个元素处找到它，所以它只是复制指向这样一个字符串的指针，它大概占用 4 个字节。

我觉得你的`read1`很相似。它最终在字符串本身之后的某个点找到了一个空终止符，因为它不是空终止的，最终是 29 个字节。

`read2`老实说，我不知道为什么会做同样的事情。上面的原因可能是我错了`read1`，29 个字节（减去 c 字符串中的 4 个字符/字节）是您的体系结构和编译器的 STL 实现中字符串的最小操作成本。

**在任何情况下**，为了缩小各种可能性，我建议您以空值终止字符串，`read0`然后`read1`通过分配一个额外元素并将最后一个元素设置为`'\0'`或使用采用额外第二个参数的替代字符串构造函数来再次尝试您的实验这表示要复制多少个字符：

```
string(non_null_terminated_string, this_many_characters_to_copy) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:54:32.600

在 read0 中，您正在从 cstr 初始化 str，它是空的（零长度）。在 read1 和 read2 中，您正在从非空字符串初始化 str 。在后一种情况下实际分配的堆数量（29 字节）大于使堆管理更快和更简单所需的严格要求 - 例如，以 32 字节（或其他一些舍入数字）的块分配堆并不罕见。

此外，您的 read1 有问题：如果您希望 cstr 包含“----”，那么您需要 cstr[5]，而不是 cstr[4]。您的数组需要空间用于以字符串结尾的零。然后你可能应该使用 strcpy(cstr, "----") 而不是 memset(cstr, '-', 4) 否则 cstr 将没有（需要的）零终止符。

# c# - 从文本文件中读取日期/从 DateTime 中排除时间

> ID：15423234
> 
> 赞同：0
> 
> 时间：2013-03-15T01:33:15.897
> 
> 标签：c#, datetime, text-files

我有一个文本文件，每一行都是一个句子。结尾的每个句子都有一个输入或制作的日期。例如：

> blablablablabla 2013 年 3 月 14 日

当我从文本文件中读取该行时，我收到一条错误消息，指出格式异常未处理。

```
x.DateOfSentence = 
    DateTime.ParseExact(lineArray[lineArray.Length-1], "M/D/YYYY", null); 
```

其中 x 是`Sentence`对象的名称，并且`DateOfSentence`是名为 的类中的访问器`Sentence`。

我已经尝试了常规`DateTime.Parse`，但是，仍然给我错误。

有没有办法排除`DateTime`我从文本文件中读取日期的时间部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:54:48.913

如果您知道日期在行尾，与句子之间用空格隔开，您可以定位并删除它：

```
int pos = line.LastIndexOf(' ');
if (pos != -1)
{
    line = line.Substring(0, pos);
} 
```

这会将所有内容都带到空间，而不是日期。

所以你可以做的是：

```
var lines = new List<string>();
foreach (var line in File.ReadLines(filename))
{
    // do the above
    lines.Add(line);
}

// lines now is a list that contains all of the lines with the dates stripped. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:29:42.950

通过显示 lineArray[lineArray.Length-1] 中的内容进行一些调试。这将是您错误的原因，因为它很可能不是日期。

# go - Go 练习教程 #8：循环和函数

> ID：15423241
> 
> 赞同：2
> 
> 时间：2013-03-15T01:34:43.317
> 
> 标签：go

我正在尝试解决 Go Tour 的练习[#8](https://tour.golang.org/flowcontrol/8)。

我的解决方案失败并显示错误消息`the process to take too long`

怎么了 ？

```
package main

import (
    "fmt"
    "math"
)

func Sqrt(x float64) float64 {
    guess := 1.0
    i := 1
    for i < 10 {
        guess = guess - (math.Pow(guess, 2)-x)/(2*guess)
    }
    return guess
}

func main() {
    fmt.Println(Sqrt(2))
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T01:46:30.023

你没有`i`在循环中增加变量，所以它总是`< 10`.

```
 //-----------v
for ; i < 10; i++ {
    guess = guess - (math.Pow(guess, 2)-x)/(2*guess)
} 
```

# highcharts - Highstock：当滚动条被拖动或导航器手柄被释放时动画图表更新

> ID：15423246
> 
> 赞同：1
> 
> 时间：2013-03-15T01:34:56.823
> 
> 标签：highcharts, highstock

我想在滚动条被移动时为 highstock 图表设置动画，并在拖动滚动条上的句柄然后释放时为图表的更新设置动画（参见谷歌金融图表）。我尝试在图表对象和 plot->series->animation 上设置动画。图表在加载时动画，但在滚动条更新时不动画（它只是给出一个不和谐的更新）。

此功能当前是否存在，或者是否正在为高库存图书馆工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:10:07.880

不幸的是，这个选项是不可能的，但您可以在我们的用户语音系统中建议它：http: [//highcharts.uservoice.com/](http://highcharts.uservoice.com/)

# java - 线性搜索期间二维数组中的数组索引越界错误

> ID：15423249
> 
> 赞同：-2
> 
> 时间：2013-03-15T01:35:10.383
> 
> 标签：java, multidimensional-array, linear-search

我正在编写一个程序，该程序的作用类似于检票器。它显示了可能的座位选择图表及其价格，并询问用户是想按数量还是按价格选择座位。它的工作原理就像它假设的按号码在座位上一样，但是当我尝试按价格找到座位时，我得到一个数组索引超出范围错误。我很困惑，因为它假设从零开始线性搜索。我不明白为什么会出现这个错误。

```
import java.util.Scanner;

public class FindTicket{
  public static void main(String[] args){
    String answer="number";
    Scanner kb=new Scanner(System.in);
    int[][] seats= {
      {10,10,10,10,10,10,10,10,10,10},
      {10,10,10,10,10,10,10,10,10,10},
      {10,10,10,10,10,10,10,10,10,10}, 
      {10,10,20,20,20,20,20,20,10,10}, 
      {10,10,20,20,20,20,20,20,10,10}, 
      {10,10,20,20,20,20,20,20,10,10}, 
      {20,20,30,40,40,40,30,30,20,20}, 
      {20,30,30,40,50,50,40,30,30,20},
      {30,40,50,50,50,50,50,50,40,30}
    };

    printChart(seats);
    do{
      System.out.println("Would you like to choose a seat by number, price, or quit?");
      answer = kb.nextLine();
      if(answer.equals("price")){
        sellSeatbyPrice(seats);}
      if(answer.equals("number")){ 
        sellSeatbyNumber(seats);}
      printChart(seats);
    }while(!answer.equals("quit"));
  }

  public static void printChart(int[][] seats){
    for (int i=0; i<seats.length; i++)
    {
      for(int j=0; j<seats[0].length; j++)
      {
        System.out.printf("%8d", seats[i][j]);
      }
      System.out.println();
    }
  }

  public static int[][] sellSeatbyPrice(int[][] seats){
    Scanner kb=new Scanner(System.in);
    int ticketprice;
    int row = 0, col = 0;
    boolean found = false, seatavaliable=true;
    do{
      System.out.println("What is your prefered ticket price?");
      ticketprice=kb.nextInt();
      while (row<seats.length && !found){
        do{
          if(seats[row][col] == ticketprice){
            found = true;}
          else{
            col++; }  
        }while(col<seats[0].length &&!found);
        if(seats[row][col] == ticketprice){
          found = true;}
        else{
          row++;} 
      }
      if(found){
        seats[row][col] = 0; }
      else {
        System.out.println("Seat not found at specified price.");
        seatavaliable=false;}
    }while(seatavaliable==false);

    return seats;
  }

  public static int[][] sellSeatbyNumber(int[][] seats){
    Scanner kb=new Scanner(System.in);
    int row = 0, col = 0;
    int editedrow, editedcol;
    boolean seatavaliable = true;
    do{
      System.out.println("What is your prefered seat number?  Please enter row then column.");
      row=kb.nextInt();
      col=kb.nextInt();
      editedrow = 9-row;
      editedcol = col - 1;
      if(seats[editedrow][editedcol] > 0){
        seats[editedrow][editedcol] = 0;}
      else{
        System.out.println("Seat is not avaliable.");
        seatavaliable=false;}
    }while(seatavaliable==false);

    return seats;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:45:40.437

这是因为`do...while`。

这段代码完成后，col 将大于数组的长度。

看看评论：

```
public static int[][] sellSeatbyPrice(int[][] seats){
    Scanner kb=new Scanner(System.in);
    int ticketprice;
    int row = 0, col = 0;
    boolean found = false, seatavaliable=true;
    do{
      System.out.println("What is your prefered ticket price?");
      ticketprice=kb.nextInt();
      while (row<seats.length && !found){
        do{
          if(seats[row][col] == ticketprice){
            found = true;}
          else{
            col++; }  // this line, in the last iteration, will make col=seats[0].length
        }while(col<seats[0].length &&!found);
        if(seats[row][col] == ticketprice){ //col with value greater than it should.
          found = true;}
        else{
          row++;} 
      }
      if(found){
        seats[row][col] = 0; }
      else {
        System.out.println("Seat not found at specified price.");
        seatavaliable=false;}
    }while(seatavaliable==false);

    return seats;
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:45:52.690

该`nextInt()`方法离开`\n`（结束行）符号并立即被 拾取`nextLine()`，跳过下一个输入。你想要做的是使用`nextLine()`一切，并在以后解析它：

```
String nextIntString = keyboard.nextLine(); //get the number as a single line
int nextInt = Integer.parseInt(nextIntString); //convert the string to an int 
```

这是迄今为止避免问题的最简单方法——不要混合你的“下一个”方法。仅使用`nextLine()`，然后解析`int`s 或单独的单词。

* * *

你不能关闭另一个`Scanner`，因为它会关闭底层证券`InputStream`，因此第一个`Scanner`不能再从同一个读取`InputStream`，你会得到一个`NoSuchElementException`.

* * *

最后一点：你应该总是`Scanner`在完成后关闭它以节省系统资源。

# javascript - 我如何使简单的效果下拉菜单上升？

> ID：15423250
> 
> 赞同：1
> 
> 时间：2013-03-15T01:35:20.533
> 
> 标签：javascript, css, drop-down-menu

有人有时间帮我处理这段代码吗？

[http://tympanus.net/codrops/2012/11/29/simple-effects-for-drop-down-lists/](http://tympanus.net/codrops/2012/11/29/simple-effects-for-drop-down-lists/)

基本上，我希望有下拉下拉菜单。. . 我试过设置

底部：100%；

和其他一些东西，但我无法弄清楚。任何事情都值得赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:53:23.860

添加或编辑这个 CSS 类：

```
.cd-dropdown ul {

top: auto;
bottom: 100%;
width: 100%;
} 
```

如果您添加它，请确保它位于示例的 css 文件之后

在提供的文件上使用文件 index.html 的示例：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <title>Simple Effects for Drop-Down Lists</title>
        <meta name="description" content="Simple Effects for Drop-Down Lists" />
        <meta name="keywords" content="drop-down, select, jquery, plugin, fallback, transition, transform, 3d, css3" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="../favicon.ico"> 
        <link rel="stylesheet" type="text/css" href="css/style1.css" />
        <script src="js/modernizr.custom.63321.js"></script>
    </head>
    <body>

<style>
.cd-dropdown ul {

top: auto;
bottom: 100%;
width: 100%;
}
</style> 
```

您可以在每个示例文件的正文之后添加此代码段：index2.htnml ...

或者在 srtyle* *X* *.css 文件的末尾不要忘记清除浏览器的缓存！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:06:39.137

也许你需要做的`bottom: 0px;`不是 100%！

# html - 在 CSS 中，如何制作一条垂直居中的线，占据块元素后剩余的水平空间？

> ID：15423253
> 
> 赞同：4
> 
> 时间：2013-03-15T01:35:32.987
> 
> 标签：html, css, vertical-alignment

我正在实现一个设计，其中包含语义标题（h3、h4 等）的元素，是全宽块元素，后面是一条垂直居中的水平线，它扩展了标题的整个宽度：

![标题](../Images/0dcb3d1f78b26efcd4ca16667d544e3c.png)

我知道我可以通过将每个标头包装在 a 中`<div>`并在其后插入另一个块级元素来解决这个问题，但不希望这样污染我的 HTML。我的第一个倾向是`::after`在标题上使用一个元素，如下所示：

```
.line-header::after {
    content:'\00a0';
    display: inline-block;
    float: right;
    width: 55%;
    margin-top: -12px;
    border-bottom: 1px solid gray;
} 
```

但是，这需要使`::after`元素固定宽度，这显然不适用于不同宽度的标题：http: [//jsfiddle.net/nbSTf/](http://jsfiddle.net/nbSTf/)

关于如何获得一条可变宽度的线条来填充标题右侧的空间，而不在 HTML 中插入额外元素的任何想法？

**编辑：** Tyriar 在下面的回答（建议在标题后面全宽绘制线条并设置背景颜色以擦除文本后面的线条）提醒我这是在重复的背景图像前面发生的 - 所以没有背景技巧不幸的是可能的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:48:56.273

这是您可以使用的一种方法，不幸的是它依赖于一个属性（不一定`title`），但这可以很容易地用 JavaScript 以编程方式设置。

它使用`:before`和`:after`伪元素，`:after`用于绘制全宽的线条和`:before`用于在文本后面绘制文本大小的白色背景。伪元素需要`z-index`正确设置才能以正确的顺序分层。

[jsFiddle](http://jsfiddle.net/uacbB/)

![示例截图](../Images/8b228f0e4d7559c7dc1f6a92bc9c5249.png)

HTML

```
<h3 class="line-header" title="Longer Header Looks Good">Longer Header Looks Good</h3>
<h3 class="line-header" title="Short Doesn't">Short Doesn't</h3> 
```

CSS

```
.line-header {
    margin-top: 15px;
    position:relative;
}
.line-header:before {
    position: absolute;
    display:block;
    top:0;
    left:0;
    bottom:0;
    content: attr(title);
    background-color:#FFF;
    color:#FFF;
    z-index:-1;
    padding-right:.5em;
}
.line-header::after {
    position:absolute;
    content:'';
    display: block;
    left:0;
    right:0;
    top:50%;
    background-color:#555;
    height:1px;
    z-index:-2;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:58:29.937

为你的 CSS 试试这个：

**编辑**：

```
body { background: red; overflow-x: hidden }

.line-header {
    margin-top: 15px;
    margin-right: 5px;
    display: inline;
    z-index: 100;
    float: left;
    clear: left;
}

.line-header::after {
    position:absolute;
    content:'\00a0';
    width: 100%;
    margin-top: -12px;
    margin-left: 5px;
    border-bottom: 1px solid gray;
    z-index: 0;
} 
```

我只在 Chrome 中测试过这个。[这是小提琴](http://jsfiddle.net/jvanscoy/s8rHH/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:32:39.863

那么，反过来呢？画线（以任何你喜欢的方式）然后用于`:after`插入标题，没有额外的 HTML，但一些额外的 CSS。

**HTML**

```
<div id="header1"></div>
<div id="header2"></div> 
```

要画线，只需`border-top-style:solid;`. 要编写标题，`:after`.

**CSS**

```
div
{
    position:relative;
    border-top-style:solid;
    margin-top:20px; /* just for spacing */
}
div:after
{
    display:block;
    background-color: #FFFFFF;
    position:absolute;
    top:-10px;
    left:0px;
}
#header1:after
{
    content:"Hello;"
}
#header2:after
{
    content:"Hello Again";
} 
```

你会得到这样的**[东西](http://jsfiddle.net/BKPnQ/)**。

要进行更多自定义，您可以放大字体、更改颜色、添加填充（以获得更多空白），只需更改`top`适合您的方式即可。

# java - 创建 AlertDialog 时出现代码中断。我想我的上下文错了......？

> ID：15423254
> 
> 赞同：1
> 
> 时间：2013-03-15T01:35:34.390
> 
> 标签：java, android, sharedpreferences, android-alertdialog, onclicklistener

我似乎无法弄清楚为什么我的应用程序/代码在本节中崩溃。任何帮助，将不胜感激。我认为问题在于在 else if 语句中创建 AlertDialog。

基本上，此方法在应用程序首次启动时调用，并要求用户在两个选项之间进行选择：OCPS 和其他。选择 OCPS 时，将设置 SharedPreference。选择其他情况后，应弹出带有文本框的AlertDialog，允许用户输入自己的本地URL，然后将其保存到共享Preference中。

完整代码可在此处获得：[https ://github.com/danielblakes/progressbook/](https://github.com/danielblakes/progressbook/)

代码如下：

```
public class MainActivity extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    boolean firstrun = getSharedPreferences(
            "com.danielblakes.progressbook", MODE_PRIVATE).getBoolean(
            "firstrun", true);
    if (firstrun) {
        new AlertDialog.Builder(this).setTitle("First Run").show();
        pickDistrict(this);
        getSharedPreferences("com.danielblakes.progressbook", MODE_PRIVATE)
                .edit().putBoolean("firstrun", false).commit();
    }

    else {
        String saved_district = getSharedPreferences(
                "com.danielblakes.progressbook", MODE_PRIVATE).getString(
                "district", null);
        startupWebView(saved_district);
    }
}

public Dialog pickDistrict(final Context context) {
    AlertDialog.Builder districtalert = new AlertDialog.Builder(context);
    districtalert
            .setTitle(R.string.choose_district)
            .setItems(R.array.districts,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int i) {
                            if (i == 0) {
                                String district_site = "https://parentaccess.ocps.net/General/District.aspx?From=Global";
                                startupWebView(district_site);
                                getSharedPreferences(
                                        "com.danielblakes.progressbook",
                                        MODE_PRIVATE)
                                        .edit()
                                        .putString("district",
                                                district_site).commit();
                            } else if (i == 1) {
                                AlertDialog.Builder customdistrict = new AlertDialog.Builder(context);
                                customdistrict
                                        .setTitle(
                                                R.string.custom_district_title)
                                        .setMessage(
                                                R.string.custom_district_message);
                                final EditText input = new EditText(
                                        getParent());
                                customdistrict.setView(input);
                                customdistrict
                                        .setPositiveButton(
                                                "Ok",
                                                new DialogInterface.OnClickListener() {
                                                    public void onClick(
                                                            DialogInterface dialog,
                                                            int which) {
                                                        String custom_url = input
                                                                .getText()
                                                                .toString();
                                                        getSharedPreferences(
                                                                "com.danielblakes.progressbook",
                                                                MODE_PRIVATE)
                                                                .edit()
                                                                .putString(
                                                                        "district",
                                                                        custom_url)
                                                                .commit();
                                                    }
                                                });
                                customdistrict
                                        .setNegativeButton(
                                                "Cancel",
                                                new DialogInterface.OnClickListener() {
                                                    public void onClick(
                                                            DialogInterface dialog,
                                                            int which) {
                                                        return;
                                                    }
                                                }).show();
                            }
                        }
                    }).show();
    return districtalert.create();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:41:08.493

改变

```
AlertDialog.Builder customdistrict = new AlertDialog.Builder(this); 
```

到

```
AlertDialog.Builder customdistrict = new AlertDialog.Builder(context); 
```

还，

```
final EditText input = new EditText(getParent()); 
```

需要改为

```
final EditText input = new EditText(context); 
```

# c++ - 如何让 WinProc 访问由它创建的对象？

> ID：15423255
> 
> 赞同：3
> 
> 时间：2013-03-15T01:35:35.383
> 
> 标签：c++, windows, winapi

在某些时候，我有这个

```
LRESULT CALLBACK WinProc(HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam)
{
    if(msg==WM_CREATE)
    {
        LPCREATESTRUCT pcs = (LPCREATESTRUCT)lParam;
            D2DResources* pD2DResources = (D2DResources*)pcs->lpCreateParams;

            ::SetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA,
                PtrToUlong(pD2DResources)
                );
    }
    else
    {
        D2DResources* pD2DResources = reinterpret_cast<D2DResources*>(static_cast<LONG_PTR>(
            ::GetWindowLongPtrW(
                hWnd,
                GWLP_USERDATA
                )));

        switch(msg)
        {

    case WM_PAINT:
        {
            pD2DResources->OnRender();
            ValidateRect(hWnd, NULL);
        }
        break;

    case WM_SIZE:
        {
            UINT width = LOWORD(lParam);
            UINT height = HIWORD(lParam);
            pD2DResources->OnResize(width, height);
        }
        break; 
```

所以我的 WinProc 可以访问以前创建的 D2DResources。现在我希望它能够访问另一个以前创建的对象。我怎么做？我的意思是，它可以访问多个先前创建的对象吗？如果是这样，怎么做？

编辑：Raymond Chen 说：“将指向结构的指针作为 lpCreateParams 传递。你可以在结构中放入任何你想要的东西。” 我怎么做？谁能给我一个例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:00:14.353

创建自己的结构并在创建时将其传递给窗口。你可以在里面放任何你喜欢的东西，包括指向其他​​东西的指针。

例如

```
struct MyWindowData
{
    D2DResources*   pD2DResources;
    void*       pMyOtherData;
    int     iSomethingElse;
};

// on window creation
MyWindowData* pData = new MyWindowData(...);
HWND hWnd = CreateWindowEx(..., pData); // window will own the data and destroy it itself

// in the window procedure
if (msg == WM_CREATE)
{
    MyWindowData* pData = ((LPCREATESTRUCT)lParam)->lpCreateParams;
    SetWindowLongPtr(hWnd, GWLP_USERDATA, (ULONG_PTR)pData);
}
else
{
    MyWindowData* pData = (MyWindowData*)GetWindowLongPtr(hWnd, GWLP_USERDATA);
    switch (msg)
    {
        case WM_PAINT:
            pData->pD2DResources->OnRender();
            break;

        case WM_NCDESTROY:
            delete pData; // delete data on destroy
            break;
    }

    ...
} 
```

# list - 列表上的 Prolog 递归

> ID：15423258
> 
> 赞同：1
> 
> 时间：2013-03-15T01:35:52.087
> 
> 标签：list, recursion, prolog

我试图了解这个 prolog 程序是如何工作的，而且，作为一个初学者，我遇到了一些困难。程序如下：

```
initialCan([w, b, w, w, w]).
scholten([X], X).
scholten([X, X | Z], Answer) :- scholten([b | Z], Answer).
scholten([X, Y | Z], Answer) :- scholten([w | Z], Answer).
run(Answer) :- initialCan(L), scholten(L, Answer). 
```

这是通过第一个解决方案运行它的跟踪。

```
{trace}
| ?- run(A).
      1    1  Call: run(_17) ? 
      2    2  Call: initialCan(_84) ? 
      2    2  Exit: initialCan([w,b,w,w,w]) ? 
      3    2  Call: scholten([w,b,w,w,w],_17) ? 
      4    3  Call: scholten([w,w,w,w],_17) ? 
      5    4  Call: scholten([b,w,w],_17) ? 
      6    5  Call: scholten([w,w],_17) ? 
      7    6  Call: scholten([b],_17) ? 
      7    6  Exit: scholten([b],b) ? 
      6    5  Exit: scholten([w,w],b) ? 
      5    4  Exit: scholten([b,w,w],b) ? 
      4    3  Exit: scholten([w,w,w,w],b) ? 
      3    2  Exit: scholten([w,b,w,w,w],b) ? 
      1    1  Exit: run(b) ? 

A = b ? 
```

我无法理解的是递归调用是如何工作的。究竟发生了什么

```
scholten([X, X | Z], Answer) :- scholten([b | Z], Answer). 
```

最令人困惑的是 [X, X | Z] 和 [b | Z]。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:48:01.670

有问题的规则说，如果`scholten`看到以两个相同元素开头的列表，则需要将这两个元素替换为单个`b`. 该列表`[b | Z]`比 . 短一个元素`[X, X | Z]`。

注意下面的规则

```
scholten([X, Y | Z], Answer) :- scholten([w | Z], Answer). 
```

有一个单例（即在其他任何地方未使用）变量`Y`。您应该将规则更改为

```
scholten([X, Y | Z], Answer) :- X \= Y, scholten([w | Z], Answer). 
```

确保`X`不等于`Y`，防止此规则匹配与该规则相同的参数`[X, X | Z]`。

# ethernet - Openwrt下Ping 100%丢包，驱动相关问题

> ID：15423264
> 
> 赞同：1
> 
> 时间：2013-03-15T01:36:16.463
> 
> 标签：ethernet, openwrt

有熟悉 Atheros 解决方案和 OpenWrt 系统的人吗？我的测试平台在 Atheros-SDK 映像下运行良好，而在 OpenWrt 映像上运行时发现我的以太网接口（eth0）出现“ping 100% 丢包”。我什至继续使用寄存器的设置值，例如ETH_CONF，XMII_CONF，但它还不起作用。

任何建议将不胜感激。谢谢！我在 arch/mips/ath79/mach-db120.c 的以太网设置是：

```
ath79_register_mdio(0, ~(BIT(5)));
ath79_eth0_data.phy_if_mode = PHY_INTERFACE_MODE_RGMII;
ath79_eth0_data.phy_mask = BIT(5);default is BIT(0)
ath79_eth0_data.mii_bus_dev = &ath79_mdio0_device.dev;
ath79_eth0_pll_data.pll_1000 = 0x06000000;
ath79_eth0_data.duplex = DUPLEX_FULL;
ath79_register_eth(0); 
```

如果我将 th79_eth0_pll_data.pll_1000 修改为 0x46000000

（设置1805002c GIGE_QUAD位），然后它可以ping但仍然有3％-5％甚至更多的ping损失。奇怪！我真的很想知道 ag71xx 相关代码有什么问题吗？部分引导日志是：

```
Starting kernel ...
......
......
[ 0.650000] libphy: ag71xx_mdio: probed
[ 0.650000] eth0: Atheros AG71xx at 0xb9000000, irq 4, mode:RGMII
[ 1.470000] ag71xx ag71xx.0 eth0: connected to PHY at ag71xx-mdio.0:05 [uid=004dd072, driver=Generic PHY]
root@OpenWrt:/# ping 192.168.1.99
PING 192.168.1.99 (192.168.1.99): 56 data bytes
C
--- 192.168.1.99 ping statistics ---
3 packets transmitted, 0 packets received, 100% packet loss
root@OpenWrt:/# 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T22:43:55.820

您需要指定您使用的 OpenWRT 版本才能获得答案！

# php - HTML 未按正确顺序显示提交按钮

> ID：15423266
> 
> 赞同：1
> 
> 时间：2013-03-15T01:36:53.020
> 
> 标签：php, html, css

我刚刚启动了一个 php 数独求解程序，其中主页有一个表单。在该表单中，一个 php include 语句调用一个函数，该函数使用构成数独框的输入绘制网格。在 HTML 代码的下方，我放置了一个输入提交按钮。但是，它位于网站的网格上方，如[http://shodor.org/~amalani/sudoku.php](http://shodor.org/~amalani/sudoku.php)所示。有人知道为什么是这样吗？

主要代码在这里

```
<html>
<head>
    <title>Sudoku Solver</title>
    <link rel='stylesheet' href='main.css' type='text/css'>

</head>
<body>
    <table>
        <form name='entry' method='POST' action='solve.php'>    
            <?php 
                include('grid.php');
            ?>
            <input type='submit' value='Submit!'></input>           
        </form>
    </table>
</body>
</html> 
```

CSS 在这里

```
td{
    border:1px solid black;
}input[type=number]{
    border:none;
    width:30px;
    height:30px;
}input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
}table{
    border-collapse:collapse;
}.xborder{
    border-bottom:3px solid black;
}.bothborder{
    border-bottom:3px solid black;
    border-right:3px solid black;
}.yborder{
    border-right:3px solid black;
} 
```

网格抽屉代码在这里

```
<?php 
    for ($x=1;$x<=9;$x++){
echo '

            <tr>';
        for ($y=1;$y<=9;$y++){
            $name=$x.''.$y;
            if(($y==3||$y==6)&&($x==3||$x==6)){
                echo "
            <td class='bothborder' ><input type='number' name='$name'></input></td>";
            }
            else if ($y==3||$y==6){
                echo "
                <td class='yborder' ><input type='number' name='$name'></input></td>";
            }
            else if ($x==3||$x==6){
                echo "
            <td class='xborder' ><input type='number' name='$name'></input></td>";
            }
            else{
                echo "

                <td><input type='number' name='$name'></input></td>";
            }
        }
echo '
            </tr>';
    }

    ?> 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:40:54.810

尝试将表单元素移到表格之外。

```
<form name='entry' method='POST' action='solve.php'>    
    <table>
        <?php 
            include('grid.php');
        ?>
    </table>
    <input type='submit' value='Submit!'></input>           
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T01:40:04.690

您正在生成无效的 html：a`form`不能是元素的直接子`table`元素。

您应该让表单封装表格并将按钮移动到表格下方或将其放在表格内网格下方的一行（和一列）中：

```
<form name='entry' method='POST' action='solve.php'>  
    <table>  
        <?php 
            include('grid.php');
        ?>
    </table>
    <input type='submit' value='Submit!'></input>           
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:40:07.593

只需将`<input type='submit' value='Submit!'></input>`里面的另一个`<td></td>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T01:40:14.163

您已放入标签`form`内。`table`你不能这样做，它处于困境中。做这个。

```
<form>
    <table>
        ....
    </table>
    <input type="submit" />
</form> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T01:41:14.053

交换`<form>`并`<table>`像这样：

```
<form name='entry' method='POST' action='solve.php'>    
    <table>
            <?php 
                include('grid.php');
            ?>
            <input type='submit' value='Submit!'></input>           

    </table>
 </form> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T01:48:35.350

您可以将其留在 table 标记之外。

```
<input type='submit' value='Submit!'></input> 
```

[http://jsfiddle.net/8N6hE/](http://jsfiddle.net/8N6hE/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T01:52:21.437

这是一个简单的示例，您不能将 a`<div>`放入 a `<p>`，因此如果您这样做，您的浏览器将修改您的代码

你不能在 ap （内联元素）中放置一个 div （块元素）

所以如果你这样做

```
<p>
    <div>
    </div>
</p> 
```

您的浏览器会将代码更改为

```
<p>
</p>
<div>
</div> 
```

或者

```
<p>
</p>
<div>
</div>
<p>
</p> 
```

所以这里的表格和表格是一样的，你应该在开始`<form>`之前开始你的`<table>`

这一切都是说，如果您生成无效的 html 代码，浏览器将编辑您的代码

# jquery - 按需绑定 KendoUI 下拉列表

> ID：15423278
> 
> 赞同：1
> 
> 时间：2013-03-15T01:38:11.160
> 
> 标签：jquery, .net, asp.net-mvc, kendo-ui, html-select

如果我有一个剑道下拉列表如下

```
@(Html.Kendo().DropDownList()
      .Name("products")
      .DataTextField("ProductName")
      .DataValueField("ProductID")
      .DataSource(source => {
          source.Read(read =>
          {
              read.Action("GetProducts", "Home");
          }); 
      })
) 
```

这会在我的页面加载时加载。有没有办法对其进行编码，使其仅在我调用它以通过 javscript 加载时才加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T21:33:56.987

在服务器端初始化数据源而不执行读取。例如，.DataSource(source => {source.Type = "json"})。在客户端事件处理程序上，您可以使用 ajax 检索 JSON 数据并将其附加到下拉列表数据源：

```
var dataretrieved = <ajax query here>
$("#products").data("kendoDropDownList").dataSource.data(dataretrieved ); 
```

或者，

在服务器端代码中不定义数据源。在您的客户端事件处理程序中定义下拉列表的数据源。例如，

```
$("#products").data("kendoDropDownList").dataSource = new kendo.data.DataSource({
 type: "json",
 data: dataretrieved 
}); 
```

注意数据类型被指示为数据源定义的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T18:05:21.090

如果你想在打开下拉列表时第一次加载数据，你可以设置`AutoBind = false`和添加`OptionLabel`这样的：
`@(Html.Kendo().DropDownList() .Name("products") .DataTextField("ProductName") .DataValueField("ProductID") .OptionLabel(new { ProductID = -1, ProductName= "Select Product"}) .DataSource(source => { source.Read(read => { read.Action("GetProducts", "Home"); }); }) .AutoBind(false) )`

您必须确保使用带有`id`and的选项标签`name`，否则将不会显示。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-15T04:37:48.030

创建一个JS函数并将这段代码放入其中。并在需要时调用该函数。

# activemq - ActiveMQ，一个主题的多个消费者会减慢生产者的发送速率吗？

> ID：15423279
> 
> 赞同：0
> 
> 时间：2013-03-15T01:38:14.263
> 
> 标签：activemq

*这里的一些配置：non-durable consumer,non-persistent message,disabled flow control,default prefetch size,optimizeAcknowledge = true,asynsend = true,使用jms连接ActiveMQ*

例如，

一个生产者，一个消费者，</p>

```
Producer————Topic————consumer 
```

生产者发送速率可达6k/s

但是，在这种情况下：一个生产者三个消费者，

```
 /——consumer

Producer——-Topic——-consumer

                \——consumer 
```

生产者发送速率下降到 4k/s

这是我的一些关键代码：

发件人类别：

```
public class sender {

    public Boolean durable=false;
    public String clientID=null;
    public Boolean transacted=false;
    public int ackMode=Session.AUTO_ACKNOWLEDGE;
    public int timeToLive=0;
    public String queuename = "";
    public int persistent = DeliveryMode.NON_PERSISTENT;

    public Connection createConnection(String user,String pwd,String url) throws JMSException, Exception {   
         ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(user, pwd, url);
         connectionFactory.setDispatchAsync(true);
         //connectionFactory.setAlwaysSessionAsync(false);
         Connection connection = connectionFactory.createConnection();   
         if (durable && clientID!=null) {   
             connection.setClientID(clientID);   
         }   
         connection.start();   
         return connection;   
        }  

    public Session createSession(Connection connection) throws Exception {   
        Session session = connection.createSession(transacted, ackMode);   
        return session;   
       }   

    public MessageProducer createProducer(Session session) throws JMSException {   
        Queue destination = session.createQueue(queuename);   
        MessageProducer producer = session.createProducer(destination);   
        producer.setDeliveryMode(persistent);   

        if( timeToLive!=0 )   
            producer.setTimeToLive(timeToLive);   
        return producer;   
        }   

    public void onMessage(Message message) {   
         //process message   
         } 
} 
```

sendmain方法：</p>

```
public static void main(String[] args) throws JMSException, Exception {
        // TODO Auto-generated method stub
        sender s = new sender();
        s.persistent = DeliveryMode.NON_PERSISTENT;
        Connection c = s.createConnection("","","tcp://localhost:61616?jms.useAsyncSend=true");
        Session sess = s.createSession(c);
        Topic topic = sess.createTopic("topic.test");
        MessageProducer mp = sess.createProducer(topic);
        StringBuffer tmpsb=new StringBuffer();
        for (int j=0;j<1024;j++)
        {
        tmpsb.append("0");
        }
        Message m = sess.createTextMessage(tmpsb.toString());
        long pre=System.currentTimeMillis();
        for (int i=0;i<10000;i++)
        {
            mp.send(m);
        }
        long post=System.currentTimeMillis();
        mp.close();
        System.out.println("sendtime:"+(post-pre));
        System.out.println("sendrate:"+10000000/(float)(post-pre));
        System.out.println("timenow:"+(post));
    } 
```

接收器类代码：

```
public class receiver implements MessageListener
{
    public  int receivetimes=0;
    public long pretime;

    public void onMessage(Message msg)
    {
        //TextMessage tm = (TextMessage) msg;
        try {
            if (receivetimes==0)
            {
                pretime=System.currentTimeMillis();
            }
            receivetimes+=1;
            if (receivetimes==10000)
            {
                long now=System.currentTimeMillis();
                System.out.println("time:"+(now-pretime)+"\nrecive rate:"+9999999/(float)(now-pretime));
                System.out.println("timenow:"+(now));
                receivetimes=0;
            }

        } catch(Throwable t) {
            t.printStackTrace();
        }
    }
} 
```

*这里的接收者类代码隐藏了一些方法，例如 createConnection、createSession 或类似于发送者类的东西。*

接收器主要方法：

```
public static void main(String[] args) throws JMSException, Exception {
        // TODO Auto-generated method stub
        receiver s = new receiver();
        Connection c = s.createConnection("","","tcp://localhost:6151?jms.optimizeAcknowledge=true");
        Session sess = s.createSession(c);
        Topic destination  = sess.createTopic("topic.test");   
        MessageConsumer  consumer = sess.createConsumer(destination);  
        consumer.setMessageListener(new receiver());   
    } 
```

每个消费者都处于一个独立的过程中。我运行了三个消费者和一个生产者，然后我得到了表现不佳的结果。有谁知道我为什么得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:08:08.687

Just as @TimBish said. The issue is 'producer,consumer,activemq-server on same machine'.When separated,the issue never shows up.

It is so important to test something in a strict way.......

# c++ - 使用依赖于类型的模板名称的声明

> ID：15423283
> 
> 赞同：16
> 
> 时间：2013-03-15T01:38:22.153
> 
> 标签：c++, templates, grammar, crtp

当在模板中使用 CRTP 时（或者通常当模板参数作为基类模板参数传递时），是否不可能在`using`声明中命名基类的成员模板？

```
template< typename d >
struct base {
    template< typename >
    struct ct {};

    template< typename >
    void ft() {}
};

template< typename x >
struct derived : base< derived< x > > {
     using derived::base::template ct; // doesn't work
     using derived::base::ft; // works but can't be used in a template-id
}; 
```

在我看来，这是语言中的一个漏洞，仅仅是因为*using-declaration*语法产生不包含*qualified-id*。

```
using-declaration:
    using typename(opt) nested-name-specifier unqualified-id ; // have this
    using :: unqualified-id ;

unqualified-id:
    identifier
    operator-function-id
    conversion-function-id
    literal-operator-id
    ~ class-name
    ~ decltype-specifier
    template-id

qualified-id:
    nested-name-specifier template(opt) unqualified-id // want this
    :: identifier
    :: operator-function-id
    :: literal-operator-id
    :: template-id 
```

如果唯一的规则是`using-declaration: using typename(opt) qualified-id`，唯一的后果就是

*   排除`:: conversion-function-id`, `:: ~ class-name`，并且`:: ~ decltype-specifier template-id`没有语义意义，
*   7.3.3/5 已经明确禁止的允许`:: template-id`，以及
*   允许`template`已经有足够规格的关键字来修补漏洞。

这个分析正确吗？

考虑到新语法是允许的，也许一个声明`typename`应该导入一个类模板或别名模板，而一个不`typename`应该导入一个函数或变量模板到当前作用域。

```
 using typename derived::base::template ct;
     using derived::base::ft; 
```

这可能需要一些额外的规范。此外，目前的现状似乎是依赖的模板名称总是有模棱两可的种类（不是模板ID），所以根本不清楚它是否`typename`属于`ct`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T11:26:26.910

以下适用于 C++11：

```
#include <iostream>

template< typename d >
struct base {
    template< typename >
    struct ct {};

    template< typename >
    void ft() {std::cerr << "cheesecake" << std::endl;}
};

template< typename x >
struct derived : base< derived< x > > {
  template<typename X>
    using ct = typename derived::base::template ct<X>; // new in C++11
  using derived::base::ft;
};

int main()
{
  derived<int>::ct<float> c;
  derived<int> a;
  a.ft<int>();
} 
```

如果这不是您想要的，您能否举例说明您希望如何使用*ct*和*ft*？

# python - 使用python页面上的按钮

> ID：15423286
> 
> 赞同：1
> 
> 时间：2013-03-15T01:38:36.040
> 
> 标签：python, web-scraping

我正在为一些数据抓取页面，但是我需要将文本插入文本框中，提交表单并抓取结果页面。我查看了页面源代码，但我不确定如何激活按钮或传递它的参数。

网站是[http://archive.org/web/web.php](http://archive.org/web/web.php) 试图查看一些历史，但不知道该使用什么。对任何解决方案开放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:28:55.953

首先，您应该知道单击该按钮通常会对某些 url 进行**POST**，以该形式传递数据，这里是：

```
<form id="wwmform" name="wwmform" method="get" action="http://web.archive.org/form-submit.jsp" onsubmit="document.location.href='http://web.archive.org/web/*/'+document.getElementById('wwmurl').value;return false;" style="display:inline;">
      <input id="wwmurl" type="text" name="url" size="50" value="http://">
      <button type="submit" name="type" value="urlquery" class="roundbox5">Take Me Back</button>
    </form> 
```

你看到*action*属性了吗？这就是数据的去向。

因此，在 python 中，您可能需要对数据进行编码`urllib`并将`urllib2`其发布到目标 url，然后获取结果。

ps：注意`onsubmit`

# ruby - 告诉 rspec 不要将目录添加到 $LOAD_PATH

> ID：15423288
> 
> 赞同：0
> 
> 时间：2013-03-15T01:38:43.497
> 
> 标签：ruby, rspec

Rspec 会自动将我的项目的 lib 目录添加到 load_path。有没有办法告诉它不要这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:19:29.570

不。据我所知，没有人希望它以前不这样做。

它给你带来了什么问题？大多数用户发现 rspec 添加`lib`到加载路径非常方便。

如果您不希望该目录存在，您可以随时从加载路径中删除该目录。

# ios - 虚拟内存中的 UIImage 表示

> ID：15423298
> 
> 赞同：0
> 
> 时间：2013-03-15T01:39:59.307
> 
> 标签：ios, objective-c, uiimage, virtual-memory

我有很多电话`[UIImage imageNamed:]`，我知道缓存将位图分配在虚拟内存中。

但是，我有许多小图像，例如按钮和图标，并且总数据大小并不接近 ImageIO 区域中的虚拟内存分配。

一旦完全映射到虚拟内存中，图像会变成多大？

如何引用放置在 Interface builder 中的图像？通过文件 URL 或缓存在 VM 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:47:38.900

如果图像被映射为位图。那么它的大小将是宽度 * 高度 * 每个像素的大小。因此，如果您有一个 10 * 10 的图像，即每像素 24 字节。那么它将在内存中为 240 字节。

# php - 选择时文本框更改

> ID：15423301
> 
> 赞同：0
> 
> 时间：2013-03-15T01:40:09.050
> 
> 标签：php, javascript, mysql, combobox, textbox

我有以下代码：

```
$sql="SELECT * from customer_billing where sequence = '".$_GET["seq"]."' ";
    $rs=mysql_query($sql,$conn) or die(mysql_error());
    $result=mysql_fetch_array($rs);
    ?>
    <script type="text/javascript">
    function producttype(data) {
    document.getElementById ("producttype").value = data.value;
    }
    function sagenominalcode(data) {
    document.getElementById ("sagenominalcode").value = data.value;
    }
    </script>
    <form method="post" action="editbillingline.php">
    <table width="800" border="0" cellspacing="5" cellpadding="5">
      <tr>
        <td width="50%"><strong>Product Type: </strong>
          <br />
        <select name="producttype-dropdown" id="producttype-dropdown" onchange="producttype(this)">
        <option value="">none</option>
        <?php
        $sql2="SELECT * from customer_billing group by producttype order by producttype ";
        $rs2=mysql_query($sql2,$conn) or die(mysql_error());
        $display='';
        while($result2=mysql_fetch_array($rs2))
        {
            $display.='<option value="'.$result2["producttype"].'"';
            if($result["producttype"]==$result2["producttype"]){$display.=' selected="selected" ';}
            $display.='>'.$result2["producttype"].'</option>';
        }
        echo($display);
        $display='';
        ?>
        </select>
        <input name="producttype" id="producttype" type="text" size="30" value="<?php echo $result["producttype"]; ?>" /></td> 
```

因此它从工作正常的数据库中进行选择，然后当您更改下拉框中的选项时，它需要将值放入其下方的文本框中。如您所见，组合框是从 mysql 数据库生成的。

关于如何将所选项目的值插入文本框中的任何想法？

编辑：

```
<script type="text/javascript">
function producttype(data) {
document.getElementById ("producttype").value = data.value;
}
function sagenominalcode(data) {
document.getElementById ("sagenominalcode").value = data.value;
}
</script>
<form method="post" action="editbillingline.php">
<table width="800" border="0" cellspacing="5" cellpadding="5">
  <tr>
    <td width="50%"><strong>Product Type: </strong>
      <br />
    <select name="producttype-dropdown" id="producttype-dropdown" onchange="producttype(this)">
    <option value="">none</option>
    <option value="PC Maintenance">PC Maintenance</option><option value="VoIP Telephony" selected="selected" >VoIP Telephony</option>        </select>
    <input name="producttype" id="producttype" type="text" size="30" value="VoIP Telephony" /></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:47:50.833

尝试这个

```
<script>
window.onload = function(){
    document.getElementById('producttype-dropdown').addEventListener('change', function(){
        document.getElementById('producttype').value = this.options[this.selectedIndex].value;
    });
}
</script> 
```

# c# - 该进程无法访问文件 \App_Data\ASPNETDB.MDF'，因为它正被另一个进程使用。

> ID：15423305
> 
> 赞同：2
> 
> 时间：2013-03-15T01:40:34.390
> 
> 标签：c#, asp.net, .net, file, publishing-site

尝试在 Windows Server 2008 R2 上发布我们的网站时，我们看到以下错误。`Error 4 The process cannot access the file 'C:\Users\Student\Desktop\CSFP Front-End\App_Data\ASPNETDB.MDF'`因为它正在被另一个进程使用。
我们不明白还有什么可以使用数据文件。web.config 看起来像这样

```
<connectionStrings>
    <add name="FBConnectionString" connectionString="Data Source=SERVER4;Initial Catalog=AITP;Integrated Security=True" providerName="System.Data.SqlClient" />
    <add name="ASPNETDBConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Users\Student\Desktop\CSFP Front-End\App_Data\ASPNETDB.MDF;Integrated Security=True;User Instance=True"/>
  </connectionStrings>
  <system.web> 
```

它在本地运行良好，角色和用户也可以正常工作。“建立网站”也可以正常工作，但是当我们尝试发布网站时，它会抛出错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T04:15:39.710

在发布项目时，首先分离数据库文件。然后发布它会正常工作。对于分离`right click on App_Data->ASPNETDB.MDF, detach`...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-21T16:25:04.830

最简单的解决方案可能是简单地关闭 .mdf 文件并重新启动 Visual Studios。当 felix 的方法不起作用时，我不得不这样做。

我尝试的另一个迷信是使用任务管理器终止“SQL Server”进程。

# c# - 存储库方法中的类型推断

> ID：15423307
> 
> 赞同：1
> 
> 时间：2013-03-15T01:40:56.843
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个 RepositoryBase 类，我在其中为我的实体框架上下文定义基本的 crud 方法。我有 All() 方法的这两个重载：

```
public virtual IQueryable<T> All<TKey>(Expression<Func<T, bool>> predicate)
{
    return All().Where(predicate);
}

public virtual PagedResult<T> All<TKey>(int startRowIndex, int maximumRows,
    Expression<Func<T, TKey>> orderingKey, Expression<Func<T, bool>> predicate,
    bool sortDescending = false)
{
    var subset =  All().Where(predicate);

    IEnumerable<T> result = sortDescending
                                ? subset.OrderByDescending(orderingKey).Skip(startRowIndex).Take(maximumRows)
                                : subset.OrderBy(orderingKey).Skip(startRowIndex).Take(maximumRows);

    //More code ommited
} 
```

第一种方法总是需要我明确指定实体类型，但第二种方法不需要。为什么是这样？

例如，这不会编译：

```
return All(s => s.LoanApplicationId == loanApplicationId) 
```

相反，我必须这样称呼它：

```
return All<LoanApplication>(s => s.LoanApplicationId == loanApplicationId) 
```

但这确实编译：

```
return All(0,10, s => s.Name, s => s.LoanApplicationId == loanApplicationId, false) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:52:54.310

`TKey`在第二个（via `Expression<Func<T, TKey>> orderingKey`）的参数列表中，而不是第一个。当您将其与您提供的参数 ( `s => s.Name`) 一起使用时，这足以让第二个成功推断出类型。在第一个版本中您不会给自己那么奢侈，因此编译器会强制您通过显式提供类型参数来填写详细信息。

而且从它的外观来看，无论如何你都不需要`TKey`，所以可能会摆脱它（除非有比那个相对简单的实现更多的代码可见）。而且我认为这并不意味着您的示例调用认为它意味着什么。`TKey`例如，第二个很可能`string`（无论是什么类型`s.Name`）。

# java - 通过小程序调用类

> ID：15423312
> 
> 赞同：0
> 
> 时间：2013-03-15T01:41:33.460
> 
> 标签：java, executable-jar, japplet

您好，我是 Applets 的新手，我需要帮助来理解某些东西。

因此，我在 Eclipse 中创建了一个小程序，当单击小程序上的按钮时，它会调用另一个类文件及其方法。

```
public class mainApplet extends JApplet {
private JTextField textField;
private JTextField textField_1;
private JTextField textField_2;

private int x;
private int y;
private int result;
public mainApplet() {

    textField = new JTextField();
    textField.setColumns(10);
    textField_1 = new JTextField();
    textField_1.setColumns(10);
    textField_2 = new JTextField();
    textField_2.setColumns(10);

    JButton btnCalculate = new JButton("Calculate");
    final JCheckBox ChckbxADD= new JCheckBox("Add");
    final JCheckBox chckbxLaunch = new JCheckBox("Launch  Browser");

    GroupLayout groupLayout = new GroupLayout(getContentPane());
    groupLayout.setHorizontalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGap(49)
                        .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                        .addGap(26)
                        .addComponent(textField_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                    .addGroup(groupLayout.createSequentialGroup()
                        .addGap(89)
                        .addGroup(groupLayout.createParallelGroup(Alignment.TRAILING)
                            .addComponent(btnCalculate)
                            .addComponent(textField_2, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                            .addGroup(groupLayout.createParallelGroup(Alignment.LEADING)
                                .addComponent(ChckbxADD)
                                .addComponent(chckbxLaunch)))))
                .addContainerGap(203, Short.MAX_VALUE))
    );
    groupLayout.setVerticalGroup(
        groupLayout.createParallelGroup(Alignment.LEADING)
            .addGroup(groupLayout.createSequentialGroup()
                .addGap(48)
                .addGroup(groupLayout.createParallelGroup(Alignment.BASELINE)
                    .addComponent(textField, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(textField_1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                .addGap(18)
                .addComponent(ChckbxADD)
                .addGap(3)
                .addComponent(chckbxLaunch)
                .addGap(20)
                .addComponent(btnCalculate)
                .addGap(28)
                .addComponent(textField_2, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                .addContainerGap(74, Short.MAX_VALUE))
    );
    getContentPane().setLayout(groupLayout);

    btnCalculate.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent arg0) {
            Functions func = new Functions();

            if (ChckbxADD.isSelected()){
                x=Integer.parseInt(textField.getText());
                y=Integer.parseInt(textField_1.getText());
                result=func.addition(x, y);
                textField_2.setText(String.valueOf(result));

            }
            if(chckbxLaunch.isSelected()){
                func.Launch();

            }

        }
    });

} 
```

}

这在我通过 Eclipse 运行时有效。我将类文件与小程序文件一起导出到 jar (Calc.jar) 中。然后，我使用以下简单的 html 来调用小程序。这个 html 是一个本地文件。

```
 <HTML>
     <HEAD>
        </HEAD>
     <BODY>
     <div >
     <APPLET CODE="mainApplet.class" archive="Calc.jar" WIDTH="800" HEIGHT="500">
     </APPLET>
     </div>
    </BODY>
     </HTML> 
```

小程序在 MainApplet 类中，它调用 Functions 类。

```
 public class Functions {

        public void Launch(){

WebDriver driver= new FirefoxDriver();
driver.get("http://www.google.com");

}

public int addition(int x, int y){

    int result;
    result=x + y;
    return result;

} 
```

}

在浏览器中启动小程序并选中“启动浏览器”复选框并单击按钮时，应打开一个 firefox 窗口并启动 google.com。在日食中，这完美地发生了。但是当小程序嵌入到本地站点时，选中“启动浏览器”复选框并单击按钮时不会发生任何事情。我有另一个用于小程序（加法）的函数，它按设计工作。用户可以在两个 Jtextfields 中输入两个数字，并选中“添加”复选框，当单击按钮时，结果将显示在 applet 的另一个 jtextfield 上。这工作正常，但其他功能不起作用。

更新：

以下是控制台中的异常：

```
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: org/openqa/selenium/WebDriver
    at mainApplet$1.actionPerformed(mainApplet.java:75)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.openqa.selenium.WebDriver
    at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 36 more 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T05:30:23.030

> > 在网页中运行时， [Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)会报告什么？我希望它会显示与安全相关的内容 - 例如`AccessControlException`.
> 
> 我在控制台中收到以下错误：

```
Exception in thread "AWT-EventQueue-2" java.lang.NoClassDefFoundError: 
```

改变：

```
archive="Calc.jar" 
```

至：

```
archive="Calc.jar,x.jar" 
```

..where是包含该类`x.jar`的 Jar 的名称。`WebDriver`

# javascript - 为什么我的函数没有在谷歌地图的点击事件中被调用？

> ID：15423317
> 
> 赞同：1
> 
> 时间：2013-03-15T01:42:09.007
> 
> 标签：javascript, jquery, function, google-maps, google-api

我不确定这个问题背后的概念是什么，可能是闭包或其他。我不知道为什么这个函数不能执行。在我看来它执行但我的浏览器只是变成空白。不知道发生了什么。

```
google.maps.event.addListener(map,'click', function searchComplete() {  

    function outside() {

        google.load('search', '1');
        var newsSearch;   
        function onLoad() { 
            // Create a News Search instance.
            newsSearch = new google.search.NewsSearch();

            // Set searchComplete as the callback function when a search is 
            // complete.  The newsSearch object will have results in it.
            newsSearch.setSearchCompleteCallback(this, searchComplete, null);

            // Specify search quer(ies)
            newsSearch.execute('Obama');

            // Include the required Google branding
            google.search.Search.getBranding('branding');
        }

        // Set a callback to call your code when the page loads
        google.setOnLoadCallback(onLoad);
    }

    outside();
}); 
```

我还设置了一个 JSFIDDLE：

[**http://jsfiddle.net/L9MDu/3/**](http://jsfiddle.net/L9MDu/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:14:08.073

我假设`onload()`没有被调用是否正确？

据我所知，`setOnLoadCallback`函数类似于`DOMReady`就绪状态，而不是通过`google.load()`.

我尝试了以下方法，这导致整个事情无限循环并发出警报。也许这是需要的？

```
google.load('search', '1', {
    callback: function() {
        onLoad();
    }
}); 
```

# c++ - 数组作为参数，变量混淆

> ID：15423320
> 
> 赞同：0
> 
> 时间：2013-03-15T01:42:46.173
> 
> 标签：c++, arrays, parameter-passing

好的，所以我得到了一些非常偏离课程的答案，所以我想我会编辑这篇文章并添加教科书中的注释以清楚起见：

有时，数组中的元素数量可能小于数组的大小。例如，存储学生数据的数组中的元素数量可能会随着学生删除或添加课程而增加或减少。在这种情况下，我们只想处理数组中包含实际数据的组件。要编写处理此类数组的函数，除了将数组声明为形式参数外，我们还要声明另一个形式参数，指定数组中元素的数量，如下面的函数所示：

```
void initialize(int list[], int listSize)
{
￼int count;
for (count = 0; count < listSize; count++)
list[count] = 0;
} 
```

函数initialize的第一个参数是一个任意大小的int数组。调用函数 initialize 时，实际数组的大小作为函数 initialize 的第二个参数传递。

好的，现在我发布了包含教科书注释的整个示例，我的困惑是为什么他们将数组设置为零。注释给我的印象是这个函数允许用户使用他们想要的任何大小的数组，因为大小设置为零（我在这里猜）允许用户选择他们想要的任何大小的数组？它每次都会重置为零，所以如果你下次需要更多或更少的单位，它会默认为零，这样你就可以再次填充它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:51:34.040

你说：

> 我知道函数 initialize 用于通过将数组的值传递给 listsize 来确定数组列表的值

不。这不是真的。这个函数不是用来确定什么，而是用 0 初始化所有数组（直到 listsize 索引，顺便说一句：这可能很危险，因为实际上你可以传递大于这个列表大小的 listsize）。

和

> 通过将数组的值传递给 listsize

不！listsize 这里不是元素的值，它是数组大小，请查看“for”循环@Jason xD。你有没有尝试在一些列表大小的数组上调用这个函数？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:52:20.013

`list[count] = 0;`如果您的代码格式正确，则每次`for`循环都执行该语句可能会更明显。

也就是说，每次循环都会将一个元素设置为零。结果是循环完成后，数组中的所有元素都将设置为零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T01:45:45.413

它正在做它所说的，它正在初始化。在这种情况下，该方法只是将每个元素设置为`list`to `0`。如果添加大括号可能会更清楚：

```
for (count = 0; count < listSize; count++)
{
  list[count] = 0;
} 
```

`So based on your updated post`，这本书的描述是说 1）您可能不想处理整个数组，因为它可能只有一部分有有效数据 2）为了编写函数来处理以这种方式运行的数组，处理这些数组的函数不仅将数组作为参数，还有有效元​​素的数量。3）我们将提供一个示例函数`initialize`，它遵循我们刚刚描述的规则`BUT`，文本中实际上并没有说明`initialize`.

我的上述描述以及其他帖子提供了对`initialize`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T01:50:20.737

# 如果您在谈论“count = 0”，那么：

更常用的语法是：for(int blah = 0; blah < max; blah++)

但是没有理由必须在 for() 语句本身内声明 'blah'：

```
int blah;
for(blah = 0; blah < max; blah++) 
```

……也可以接受。

或者：

```
int blah = 0;
for( ; blah < max; blah++) 
```

有时（但不是在您的示例中）希望有 'blah' 存在于 for() 语句的范围之外，因此您可以稍后对其进行处理：

```
int fileNum = 0;
for( ; fileNum < maxFiles && file_exists(fileNum); fileNum++)
{
    //...do something...
}

int lastFileWas = fileNum; //Either it's 'maxFile', or the first file that didn't exist. 
```

将变量放在 for() 语句之外的另一个原因是，当变量真的很大时，如果它在语句之外，它会使代码更易于阅读：

```
std::vector< std::pair<std::string, int> >::iterator myIterator = myVector.begin();
for( ; myIterator != myVector.end(); myIterator++) 
```

如果它在 for 语句本身内部，这将非常混乱（***std::vector< std::pair >::iterator***是一个很长的变量名，写出来会很混乱，塞进 for() 语句） . （尽管这对于 C++11 的“auto”关键字来说不是问题）。

# 如果你在谈论“list[count] = 0;”，那么：

对于数组，要分配一个值，您可以使用方括号（称为“下标运算符”）“索引”数组，并且可以访问保存在数组内存中的各个变量（称为“元素”）：

```
int myArray[10]; //10 integers in a block of memory.

myArray[0] = 5; //Accessing the first element in the block of memory.
myArray[3] = 17; //Accessing the fourth element in the block of memory. 
```

# 一般来说：

由于您使用的是 C++，因此通常（90% 的时间）最好使用 std::vector。数组相当奇怪，因为它们与指向内存块的指针非常相似，并且不能像常规变量一样对待。除了许多其他好处外，std::vector 还包装了数组，因此您**可以**将其视为常规变量（因为向量就是其中之一）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T01:56:08.533

完成同样事情的另一种快速方法：

```
memset(list, 0, sizeof(int)*listSize); 
```

`list`这通过计算数据类型的大小乘以元素的数量并将其全部设置为 0 来获得分配给的整个内存块。

# linux - 树莓派 ad-hoc 网络

> ID：15423325
> 
> 赞同：12
> 
> 时间：2013-03-15T01:43:22.450
> 
> 标签：linux, networking, wireless, raspberry-pi, adhoc

我想用树莓派尝试一些网络项目，我只需要在一对树莓派之间发送数据包。作为第一步，我很高兴能够以临时模式在 Raspberry Pis 之间进行 ping 操作。尽管在线查看了几个教程和示例，但我还没有成功地做到这一点。

我有 2 个安装了 Debian Wheezy OS 的 Raspberry Pi。我正在使用以下 USB 适配器，我在两个 pi 上都安装了固件，并通过以托管模式将它们连接到路由器来测试它们是否工作：总线 001 设备 004：ID 050d:945a Belkin Components F7D1101 v1 Basic Wireless Adapter [Realtek RTL8188SU]

以下是有关网络信息的一些打印输出：

每个 pi 的 /etc/network/interfaces：

```
 pi1@raspberrypi ~ $ cat /etc/network/interfaces 
auto lo
iface lo inet loopback
iface eth0 inet dhcp
auto wlan0
iface wlan0 inet manual
    address 192.168.2.1
    netmask 255.255.255.0
    wireless-channel 4
    wireless-essid pi-ad-hoc
    wireless-mode ad-hoc
pi2@raspberrypi ~ $ cat /etc/network/interfaces 
auto lo
iface lo inet loopback
iface eth0 inet dhcp
auto wlan0
iface wlan0 inet manual
    address 192.168.2.2
    netmask 255.255.255.0
    wireless-channel 4
    wireless-essid pi-ad-hoc
    wireless-mode ad-hoc 
```

每个 pi 上的 ifconfig：

```
 pi1@raspberrypi ~ $ ifconfig wlan0
wlan0     Link encap:Ethernet  HWaddr ec:1a:59:46:8e:5a  
          inet addr:192.168.2.1  Bcast:192.168.2.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:26 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)
pi2@raspberrypi ~ $ ifconfig wlan0
wlan0     Link encap:Ethernet  HWaddr ec:1a:59:46:59:0a  
          inet addr:192.168.2.2  Bcast:192.168.2.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:6 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

每个 pi 上的 iwconfig：

```
 pi1@raspberrypi ~ $ iwconfig wlan0
wlan0     IEEE 802.11bg  ESSID:"pi-ad-hoc"  Nickname:"rtl_wifi"
          Mode:Ad-Hoc  Cell: 02:11:87:FA:4A:02   Bit Rate:54 Mb/s

          Sensitivity:0/0

          Retry:off   RTS thr:off   Fragment thr:off
          Power Management:off
          Link Quality:0  Signal level:0  Noise level:0
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0
pi2@raspberrypi ~ $ iwconfig wlan0
wlan0     IEEE 802.11bg  ESSID:"pi-ad-hoc"  Nickname:"rtl_wifi"
          Mode:Ad-Hoc  Cell: 02:11:87:C4:F2:01   Bit Rate:54 Mb/s

          Sensitivity:0/0

          Retry:off   RTS thr:off   Fragment thr:off
          Power Management:off
          Link Quality:0  Signal level:0  Noise level:0
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0 
```

在一个 pi 上的路线（在另一个 pi 上相同）：

```
 pi1@raspberrypi ~ $ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         192.168.1.1     0.0.0.0         UG    0      0        0 eth0
192.168.1.0     *               255.255.255.0   U     0      0        0 eth0
192.168.2.0     *               255.255.255.0   U     0      0        0 wlan0 
```

在每个 pi 上进行 iwlist 扫描：

```
 pi1@raspberrypi ~ $ sudo iwlist wlan0 scan
wlan0     Scan completed :
          Cell 01 - Address: 02:11:87:FA:4A:02
                    ESSID:"pi-ad-hoc"
                    Protocol:IEEE 802.11bg
                    Mode:Ad-Hoc
                    Frequency:2.427 GHz (Channel 4)
                    Encryption key:off
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s; 24 Mb/s; 36 Mb/s
                              48 Mb/s; 54 Mb/s
                    Quality:0  Signal level:0  Noise level:0
          Cell 04 - Address: 02:11:87:C4:F2:01
                    ESSID:"pi-ad-hoc"
                    Protocol:IEEE 802.11bg
                    Mode:Ad-Hoc
                    Frequency:2.427 GHz (Channel 4)
                    Encryption key:off
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s; 24 Mb/s; 36 Mb/s
                              48 Mb/s; 54 Mb/s
                    Signal level=100/100

pi2@raspberrypi ~ $ sudo iwlist wlan0 scan
wlan0     Scan completed :
          Cell 01 - Address: 02:11:87:C4:F2:01
                    ESSID:"pi-ad-hoc"
                    Protocol:IEEE 802.11bg
                    Mode:Ad-Hoc
                    Frequency:2.427 GHz (Channel 4)
                    Encryption key:off
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s; 24 Mb/s; 36 Mb/s
                              48 Mb/s; 54 Mb/s
                    Quality:0  Signal level:0  Noise level:0
          Cell 02 - Address: 02:11:87:FA:4A:02
                    ESSID:"pi-ad-hoc"
                    Protocol:IEEE 802.11bg
                    Mode:Ad-Hoc
                    Frequency:2.427 GHz (Channel 4)
                    Encryption key:off
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s; 24 Mb/s; 36 Mb/s
                              48 Mb/s; 54 Mb/s
                    Signal level=100/100 
```

Ping 不起作用，并且它们之间似乎没有网络工作。从 iwconfig 中，您可以看到它们每个都有不同的“Cell”地址（与 iwlist 扫描中的 Cell 不同），这是用于定义 ad-hoc 网络的伪基站 ID（我的最佳理解来自我读过的）。此外，从 iwlist 中，每个 pi 都可以看到自己的以及其他 pi 的 ad-hoc 网络。我假设他们需要选择相同的 Cell id 进行通信，但我不确定如何让他们自动执行此操作。我尝试在每个 pi 上静态强制这些与以下命令相同，该命令不会更改单元格 ID，因此不起作用：

```
sudo iwconfig wlan0 ap (some address)
```

我还尝试了一个在 wpa_supplicant 配置中使用 ap_scan=2 的解决方案，这似乎没有帮助。

有人知道我做错了什么吗？

谢谢，安迪。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-19T17:09:18.953

经过一番搜索，我发现我使用的 Belkin USB 适配器显然不支持 linux 驱动程序的 ad-hoc 模式。我购买了其他一些运行良好的无线 USB 适配器“Edimax EW-7811Un 150 Mbps 无线 11n 纳米尺寸 USB 适配器”。它们更便宜、更小，而且它们在 ad-hoc 模式下工作，甚至不需要担心司机。如果您还想做临时 raspberry PI 项目，我为故障排除提供的详细信息可以用作指南。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-03T08:11:48.240

这在 /etc/network/interfaces 中对我有用：

```
auto wlan0
allow-hotplug wlan0
iface wlan0 inet static
wireless-essid "MYPINET"
wireless-channel 3
wireless-mode ad-hoc
wireless-ap 11:5F:02:38:5C:45
address 192.168.10.1
netmask 255.255.255.0 
```

essid、channel 和 ap 可以是任何有效值（在所有 Pi 上都相同）。确保将同一子网上的不同地址分配给不同的 Pi，这样就可以了。ap 定义了上面提到的小区 ID。FWIW 我正在使用 TP-link WN725N。它具有 RTL8188CUS 芯片组，即使 dmesg 指示 Pi 将其视为 RTL8192，也可以开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-06T16:22:17.257

`RTL8188CUS`我使用芯片组的任何适配器都不成功。幸运的是，我有许多支持接口和 ad-hoc 模式的 Ralink`RT5370`加密狗（来自[这个套件）。](http://www.canakit.com/raspberry-pi-starter-ultimate-kit.html)`nl80211`

我的解决方案涉及使用`wpa_supplicant`并配置了 2 个文件。确保`nl80211`已安装驱动程序：

```
sudo apt-get install libnl1 
```

接下来，创建在每个 Pi 上调用的以下`wpa_supplicant`配置文件：`/etc/wpa_supplicant-adhoc.conf`

```
ctrl_interface=DIR=/run/wpa_supplicant GROUP=netdev
update_config=1
ap_scan=2

network={
  ssid="pihoc_wpa"
  mode=1
  frequency=2462
  proto=WPA
  key_mgmt=WPA-NONE
  pairwise=NONE
  group=TKIP
  psk="password"
} 
```

您可以在其中选择`ssid`, `frequency`（[在此处](http://www.radio-electronics.com/info/wireless/wi-fi/80211-channels-number-frequencies-bandwidth.php)查找有效值）和`psk`. `net-dev`使用命令确保您是用户组的一部分

```
getent group netdev 
```

如果没有，您可以添加自己使用

```
sudo usermod -a -G netdev userName 
```

接下来，将以下块添加到`/etc/network/interfaces`每个 Pi 上的文件中：

```
auto wlan0
allow-hotplug wlan0
iface wlan0 inet static
   address 10.10.2.1
   netmask 255.255.255.0
pre-up wpa_supplicant -B -D nl80211 -i wlan0 -c /etc/wpa_supplicant-adhoc.conf 
```

其中每个 Pi 都有一个以`address`开头的不同字段`10.10.2.`。此外，如果您的`RT5370`适配器使用的接口不是`wlan0`（例如`wlan1`、`wlan2`等），请务必改用该接口名称。

此时，Pi 应该会在重新启动后自动加入网络。通过 ping 或使用 ssh 测试连接，例如从具有 IP 地址的代理运行以下命令`10.10.2.1`：

```
ssh 10.10.2.2 
```

使用 IP 地址访问代理`10.10.2.2`。

此处列出的步骤改编[自此 Arch Linux wiki 文章](https://wiki.archlinux.org/index.php/Ad-hoc_networking)和[此 Raspberry Pi 论坛讨论](https://www.raspberrypi.org/forums/viewtopic.php?f=28&t=88623)。

# wpf - 我如何将 kinect 跟踪传递到另一种形式

> ID：15423327
> 
> 赞同：0
> 
> 时间：2013-03-15T01:43:33.623
> 
> 标签：wpf, kinect, kinect-sdk

我在 wpf 中有一个 kinect 项目，它使用骨架流来跟踪用户的左右手，并允许我将鼠标悬停在按钮上。

我尝试制作一个新表单，然后复制和粘贴所有内容，以便创建一个新页面，但它不起作用，我想我可能必须参考主页中使用的方法，但我不确定。

我希望能够在新窗口中与悬停方法一起使用骨架流

任何帮助将不胜感激 - 如果这没有意义，我很抱歉我是初学者

代码

```
 public partial class MainWindow : Window
    {
        private KinectSensor _Kinect;
        private WriteableBitmap _ColorImageBitmap;
        private Int32Rect _ColorImageBitmapRect;
        private int _ColorImageStride;
        private Skeleton[] FrameSkeletons;

        List<Button> buttons;
        static Button selected;

        float handX;
        float handY;

        public MainWindow()
        {
            InitializeComponent();

            InitializeButtons();
            kinectButton.Click += new RoutedEventHandler(kinectButton_Click);

            this.Loaded += (s, e) => { DiscoverKinectSensor(); };
            this.Unloaded += (s, e) => { this.Kinect = null; };
        }

        //initialize buttons to be checked
        private void InitializeButtons()
        {
            buttons = new List<Button> { button1, button2, quitButton};
        }

        //raise event for Kinect sensor status changed
        private void DiscoverKinectSensor()
        {
            KinectSensor.KinectSensors.StatusChanged += KinectSensors_StatusChanged;
            this.Kinect = KinectSensor.KinectSensors.FirstOrDefault(x => x.Status == KinectStatus.Connected);
        }

        private void KinectSensors_StatusChanged(object sender, StatusChangedEventArgs e)
        {
            switch (e.Status)
            {
                case KinectStatus.Connected:
                    if (this.Kinect == null)
                    {
                        this.Kinect = e.Sensor;
                    }
                    break;
                case KinectStatus.Disconnected:
                    if (this.Kinect == e.Sensor)
                    {
                        this.Kinect = null;
                        this.Kinect = KinectSensor.KinectSensors.FirstOrDefault(x => x.Status == KinectStatus.Connected);
                        if (this.Kinect == null)
                        {
                            MessageBox.Show("Sensor Disconnected. Please reconnect to continue.");
                        }
                    }
                    break;
            }
        }

        public KinectSensor Kinect
        {
            get { return this._Kinect; }
            set
            {
                if (this._Kinect != value)
                {
                    if (this._Kinect != null)
                    {
                        UninitializeKinectSensor(this._Kinect);
                        this._Kinect = null;
                    }
                    if (value != null && value.Status == KinectStatus.Connected)
                    {
                        this._Kinect = value;
                        InitializeKinectSensor(this._Kinect);
                    }
                }
            }
        }

        private void UninitializeKinectSensor(KinectSensor kinectSensor)
        {
            if (kinectSensor != null)
            {
                kinectSensor.Stop();
                kinectSensor.ColorFrameReady -= Kinect_ColorFrameReady;
                kinectSensor.SkeletonFrameReady -= Kinect_SkeletonFrameReady;
            }
        }

        private void InitializeKinectSensor(KinectSensor kinectSensor)
        {
            if (kinectSensor != null)
            {
                ColorImageStream colorStream = kinectSensor.ColorStream;
                colorStream.Enable();
                this._ColorImageBitmap = new WriteableBitmap(colorStream.FrameWidth, colorStream.FrameHeight,
                    96, 96, PixelFormats.Bgr32, null);
                this._ColorImageBitmapRect = new Int32Rect(0, 0, colorStream.FrameWidth, colorStream.FrameHeight);
                this._ColorImageStride = colorStream.FrameWidth * colorStream.FrameBytesPerPixel;
                videoStream.Source = this._ColorImageBitmap;

                kinectSensor.SkeletonStream.Enable(new TransformSmoothParameters()
                {
                    Correction = 0.5f,
                    JitterRadius = 0.05f,
                    MaxDeviationRadius = 0.04f,
                    Smoothing = 0.5f
                });

                kinectSensor.SkeletonFrameReady += Kinect_SkeletonFrameReady;
                kinectSensor.ColorFrameReady += Kinect_ColorFrameReady;
                kinectSensor.Start();
                this.FrameSkeletons = new Skeleton[this.Kinect.SkeletonStream.FrameSkeletonArrayLength];

            }
        }

        private void Kinect_ColorFrameReady(object sender, ColorImageFrameReadyEventArgs e)
        {
            using (ColorImageFrame frame = e.OpenColorImageFrame())
            {
                if (frame != null)
                {
                    byte[] pixelData = new byte[frame.PixelDataLength];
                    frame.CopyPixelDataTo(pixelData);
                    this._ColorImageBitmap.WritePixels(this._ColorImageBitmapRect, pixelData,
                        this._ColorImageStride, 0);
                }
            }
        }

        private void Kinect_SkeletonFrameReady(object sender, SkeletonFrameReadyEventArgs e)
        {
            using (SkeletonFrame frame = e.OpenSkeletonFrame())
            {
                if (frame != null)
                {
                    frame.CopySkeletonDataTo(this.FrameSkeletons);
                    Skeleton skeleton = GetPrimarySkeleton(this.FrameSkeletons);

                    if (skeleton == null)
                    {
                        kinectButton.Visibility = Visibility.Collapsed;
                    }
                    else
                    {
                        Joint primaryHand = GetPrimaryHand(skeleton);
                        TrackHand(primaryHand);

                    }
                }
            }
        }

        //track and display hand
        private void TrackHand(Joint hand)
        {
            if (hand.TrackingState == JointTrackingState.NotTracked)
            {
                kinectButton.Visibility = System.Windows.Visibility.Collapsed;
            }
            else
            {
                kinectButton.Visibility = System.Windows.Visibility.Visible;

                DepthImagePoint point = this.Kinect.MapSkeletonPointToDepth(hand.Position, DepthImageFormat.Resolution640x480Fps30);
                handX = (int)((point.X * LayoutRoot.ActualWidth / this.Kinect.DepthStream.FrameWidth) -
                    (kinectButton.ActualWidth / 2.0));
                handY = (int)((point.Y * LayoutRoot.ActualHeight / this.Kinect.DepthStream.FrameHeight) -
                    (kinectButton.ActualHeight / 2.0));
                Canvas.SetLeft(kinectButton, handX);
                Canvas.SetTop(kinectButton, handY);

                if (isHandOver(kinectButton, buttons)) kinectButton.Hovering();
                else kinectButton.Release();
                if (hand.JointType == JointType.HandRight)
                {
                    kinectButton.ImageSource = "/Images/RightHand.png";
                    kinectButton.ActiveImageSource = "/Images/RightHand.png";
                }
                else
                {
                    kinectButton.ImageSource = "/Images/LeftHand.png";
                    kinectButton.ActiveImageSource = "/Images/LeftHand.png";
                }
            }
        }

        //detect if hand is overlapping over any button
        private bool isHandOver(FrameworkElement hand, List<Button> buttonslist)
        {
            var handTopLeft = new Point(Canvas.GetLeft(hand), Canvas.GetTop(hand));
            var handX = handTopLeft.X + hand.ActualWidth / 2;
            var handY = handTopLeft.Y + hand.ActualHeight / 2;

            foreach (Button target in buttonslist)
            {
                Point targetTopLeft = new Point(Canvas.GetLeft(target), Canvas.GetTop(target));
                if (handX > targetTopLeft.X &&
                    handX < targetTopLeft.X + target.Width &&
                    handY > targetTopLeft.Y &&
                    handY < targetTopLeft.Y + target.Height)
                {
                    selected = target;
                    return true;
                }
            }
            return false;
        }

        //get the hand closest to the Kinect sensor
        private static Joint GetPrimaryHand(Skeleton skeleton)
        {
            Joint primaryHand = new Joint();
            if (skeleton != null)
            {
                primaryHand = skeleton.Joints[JointType.HandLeft];
                Joint rightHand = skeleton.Joints[JointType.HandRight];
                if (rightHand.TrackingState != JointTrackingState.NotTracked)
                {
                    if (primaryHand.TrackingState == JointTrackingState.NotTracked)
                    {
                        primaryHand = rightHand;
                    }
                    else
                    {
                        if (primaryHand.Position.Z > rightHand.Position.Z)
                        {
                            primaryHand = rightHand;
                        }
                    }
                }
            }
            return primaryHand;
        }

        //get the skeleton closest to the Kinect sensor
        private static Skeleton GetPrimarySkeleton(Skeleton[] skeletons)
        {
            Skeleton skeleton = null;
            if (skeletons != null)
            {
                for (int i = 0; i < skeletons.Length; i++)
                {
                    if (skeletons[i].TrackingState == SkeletonTrackingState.Tracked)
                    {
                        if (skeleton == null)
                        {
                            skeleton = skeletons[i];
                        }
                        else
                        {
                            if (skeleton.Position.Z > skeletons[i].Position.Z)
                            {
                                skeleton = skeletons[i];
                            }
                        }
                    }
                }
            }
            return skeleton;
        }

        void kinectButton_Click(object sender, RoutedEventArgs e)
        {
            selected.RaiseEvent(new RoutedEventArgs(Button.ClickEvent, selected));
        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            message.Content = "Button 1 clicked!";
        }

        private void button2_Click(object sender, RoutedEventArgs e)
        {
            message.Content = "Button 2 clicked!";
        }

        private void quitButton_Click(object sender, RoutedEventArgs e)
        {
            Application.Current.Shutdown();
        }

        private void Window_Loaded(object sender, RoutedEventArgs e)
        {

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:30:57.973

您可以通过几种不同的方式来做到这一点，还有更多的方式，然后是下面的方式。

您可以在创建新窗口时将对传感器本身的引用传递给新窗口：

```
public MainWindow()
{
    // init code for window and Kinect

    // show the second window
    SecondWindow mySecondWindow = new SecondWindow(_Kinect);
    mySecondWindow.Show();

    // other stuff...
}

public class SecondWindow : Window
{
    public SecondWindow(KinectSensor sensor)
    {
        // ... stuff

        sensor.SkeletonFrameReady += SkeletonFrameReadyCallback;

        // ... more stuff
    }
} 
```

`SkeletonFrameReady`然后在您的第二个窗口中订阅回调。如果您正在与秒窗口中的*项目*进行交互，这可能适用于您的情况。

另一种方法是在您的第二个窗口中创建一个公共回调并将其订阅到该`SkeletonFrameReady`事件。

```
public MainWindow()
{
    // init code for window and Kinect

    // show the second window
    SecondWindow mySecondWindow = new SecondWindow(_Kinect);
    mySecondWindow.Show();

    _Kinect.SkeletonFrameReady += mySecondWindow.SkeletonFrameReadyCallback;
} 
```

我还在您的代码中注意到您正在触发事件。如果您想对来自不同窗口中的一个窗口的事件采取行动，您可以订阅上述相同的那些自定义事件。

# ruby-on-rails - 如何使回形针裁剪而不缩放附加图像？

> ID：15423330
> 
> 赞同：2
> 
> 时间：2013-03-15T01:43:58.693
> 
> 标签：ruby-on-rails, image-processing, imagemagick, paperclip

我希望 Paperclip 进行裁剪，而不是缩放（请参阅此摘录中的 :full1）

```
class Graphic < ActiveRecord::Base
  has_attached_file :image, :styles => { :full0 => "940x1000#" #want it to scale, and crop if neccessary
                                         :full1 => "940#", #want it to crop width, not scale
                                       } 
```

我想 :full1 工作，但它没有。通过“工作”，我的意思是它应该裁剪图像的宽度，但对它的高度不做任何事情。原因是我正在上传网络截图，我希望它们被修剪到 940 像素宽（从中心），但它们的高度应该保持不变。就我对回形针的研究而言，我没有找到如何做到这一点。

显然 ImageMagick 非常支持它：[http](http://www.imagemagick.org/Usage/crop/#crop_strip) ://www.imagemagick.org/Usage/crop/#crop_strip但我不知道如何将它塞进轨道上的回形针中。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:18:57.333

您可以将高度设置为大到离谱的高度，这样就不会出现问题了吗？

```
class Graphic < ActiveRecord::Base
  has_attached_file :image, :styles => { :full0 => "940x1000#" #want it to scale, and crop if neccessary
                                         :full1 => "940x9999999#", #want it to crop width, not scale
                                       } 
```

我认为这将裁剪任何超过 940 像素的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T07:26:38.987

您可以用户转换图像处理的选项，以下将集中裁剪图像。

```
has_attached_file :profile_picture, :storage => :s3,                             
                                     :styles => { :medium => "", :thumb => ""},
                                      :convert_options => {
                                          :thumb => Proc.new { |instance| instance.thumnail_dimension },
                                          :medium => Proc.new { |instance| instance.thumnail_dimension(300) }
                                          }

def thumnail_dimension(size=100)
    dimensions = Paperclip::Geometry.from_file(profile_picture.queued_for_write[:original].path)
    min = dimensions.width > dimensions.height ? dimensions.height : dimensions.width
    "-gravity Center -crop #{min}x#{min}+0+0 +repage -resize #{size}x#{size}^"
  end 
```

# visual-c++ - 从 DirectX 中的多个渲染目标读取

> ID：15423331
> 
> 赞同：2
> 
> 时间：2013-03-15T01:44:05.843
> 
> 标签：visual-c++, directx, direct3d, pixel-shader

我有两个渲染目标视图，我的后台缓冲区和一个表示专用掩码的 Texture2D（我不能使用模板缓冲区来满足我的需要）。我的渲染方法大致如下：

```
// clear the render target and depth stencil views, set render targets, 
// update subresources, set vertex buffers, topology, input layout, etc.

// draw to the back buffer and the mask
m_d3dContext->PSSetShader(m_pixelShader1.Get(), nullptr, 0);
m_d3dContext->IASetIndexBuffer(m_indexBuffer1.Get(), DXGI_FORMAT_R16_UINT, 0); 
m_d3dContext->DrawIndexed(m_indexCount1, 0, 0);

// read from the mask and draw to the back buffer
m_d3dContext->PSSetShader(m_pixelShader2.Get(), nullptr, 0);
m_d3dContext->IASetIndexBuffer(m_indexBuffer2.Get(), DXGI_FORMAT_R16_UINT, 0);
m_d3dContext->DrawIndexed(m_indexCount2, 0, 0); 
```

PixelShader1 看起来像这样（省略输入结构和其他一些部分）：

```
struct PixelShaderInput
{
    float4 Color   : COLOR;
    float2 Texture : TEXCOORD;
};

struct PixelShaderOutput
{
    float4 Color : SV_TARGET0;
    float4 Mask  : SV_TARGET1;
};

PixelShaderOutput main(PixelShaderInput input)
{
    PixelShaderOutput output; 
    output.Color.rgba = input.Color;
    output.Mask.rgba = float4(1, 0, 0, 1);
    return output;
} 
```

PixelShader2 看起来像这样：

```
struct PixelShaderInput
{
    float3 Color   : COLOR0;
    float2 Texture : TEXCOORD0;
    float4 Mask    : COLOR1;
};

struct PixelShaderOutput
{
    float4 Color : SV_TARGET0; 
};

PixelShaderOutput main(PixelShaderInput input)
{
    PixelShaderOutput output; 

    // do some work with input.Texture

    if (input.Mask.x == 0)
    {
        output.Color = float4(0, 0, 0, 1); }
    }
    else
    {
        output.Color = float4(1, 1, 1, 1); 
    }

    return output;
} 
```

使用 Visual Studio 的图形调试工具，可以看到 PixelShader1 正确写入了遮罩纹理。在帧的末尾，红色的几何图形出现在正确的位置。此外，后台缓冲区的输出（看起来不同）也符合预期。所以我坚信 PixelShader1 是正确的。

但是，我从 PixelShader2 得到了意想不到的结果。通过它，input.Mask.x 的值到处都是。人们会期望它们为 1 或 0，因为这是所有其他像素着色器将它们设置为的值，但是这些值看起来非常像纹理坐标。

那么，首先，我正在尝试做的事情是否可能？如果是的话，谁能发现我在阅读 COLOR1 时的错误？我已经被这件事难住了好几个小时，所以任何帮助都将不胜感激。

我正在使用 DirectX 11、着色器模型 4.0 级别 9_1 和 vc110。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:57:47.597

您的 PixelShader2 的编写方式有一些概念错误。PixelShader1 将 Color 和 Mask 的值写入两个渲染纹理。在 PixelShader 2 中，您需要从纹理中读取这些值，而不是作为顶点输入。

```
Texture2D<float4> MaskTexture;
SamplerState MaskSampler;

struct PixelShaderInput
{
    float3 Color   : COLOR0;
    float2 Texture : TEXCOORD0;
};

struct PixelShaderOutput
{
    float4 Color : SV_TARGET0; 
};

PixelShaderOutput main(PixelShaderInput input)
{
    PixelShaderOutput output; 

    // do some work with input.Texture

    float maskValue = MaskTexture.Sample(MaskSampler, Texture).x;

    if (maskValue == 0)
    {
        output.Color = float4(0, 0, 0, 1);
    }
    else
    {
        output.Color = float4(1, 1, 1, 1); 
    }

    return output;
} 
```

因此，为了做到这一点，您需要通过 SetShaderResources() 将 MaskTexture（这是您从 PixelShader1 输出的第二个渲染目标输出）作为 ShaderResource 传递。您还需要创建一个 SamplerState 并通过 SetSamplerStates() 将其设置到设备中。

# android - 使用android自动将数据从sqlite拉到MS访问

> ID：15423333
> 
> 赞同：0
> 
> 时间：2013-03-15T01:44:40.590
> 
> 标签：android, ms-access, ms-access-2010

我是 android 新手，将数据从 sqlite 导出到 MS Access 有点困难。是否有可能有用于将数据从模拟器自动提取到 MS Access 的代码？

因为我希望我的 sqlite 数据库中的数据在我的 MS Access 数据库中是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:54:04.300

我无法从 MS Access 链接到 SQLite，但理论上你应该可以，这可能是因为我在这台机器上的设置有点奇怪。但是，最坏的情况是获取表数据并对 Access 执行逐行更新。您可以使用任务调度程序自动执行此操作。

一些注意事项：

```
Dim cn As New ADODB.Connection
Dim rs As New ADODB.Recordset

scn = "DRIVER=SQLite3 ODBC Driver;Database=z:\docs\new.db;" _
& "LongNames=0;Timeout=1000;NoTXN=0;SyncPragma=NORMAL;StepAPI=0;"

cn.ConnectionString = scn
cn.Open

s = "SELECT * FROM test"
rs.Open s, cn

Debug.Print rs.GetString 
```

参考：
[连接字符串](http://connectionstrings.com)
[SQLite ODBC 驱动程序](http://www.ch-werner.de/sqliteodbc/)

可能感兴趣：
[SQLite for Excel](http://sqliteforexcel.codeplex.com/)

# scala - 在所有 Scalatest 测试之前或之后做某事

> ID：15423337
> 
> 赞同：74
> 
> 时间：2013-03-15T01:45:09.727
> 
> 标签：scala, scalatest

我有一套 scalatest 测试来测试 RESTful API 的不同端点。我真的希望将它们分成不同的文件以实现最佳组织。

我的问题是如何在所有测试之前启动某些东西（在我的情况下是一个 HTTP 服务器，但它是什么并不重要）并在所有测试完成后关闭它。

我知道 BeforeAndAfterAll，但这只能在一个测试文件中完成之前/之后。我需要类似的东西，但对于所有测试，例如：

-- 测试前启动 http 服务器
-- 运行所有测试套件
-- 关闭 http 服务器

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-03-21T19:27:19.807

这样做的预期方法是使用嵌套套件。Suite 有一个 nestedSuites 方法，它返回一个 IndexedSeq[Suite]（在 2.0 中，在 1.9.1 中它是一个 List[Suite]）。Suite 还有一个 runNestedSuites 方法，负责执行任何嵌套的套件。默认情况下，runNestedSuites 调用nestedSuites，并且在每个返回的套件上直接调用 run，或者如果传递了 Distributor，则将嵌套套件放入分发器中，以便它们可以并行运行。

因此，您可能真正想做的是将 Foo 和 Bar 放入类，并从 EndpointTests 的nestedSuites 方法返回它们的实例。有一个类叫做 Suites。这是它的使用示例：

```
import org.scalatest._
import matchers.MustMatchers

class Foo extends FunSpec with MustMatchers {
  describe("Message here...") {
    it("Must do something") {  }
    it("Must be ok") {  }
  }
}

class Bar extends FunSpec with MustMatchers {
  describe("Hello you...") {
    it("One more!") {  }
  }
}

class EndpointTests extends Suites(new Foo, new Bar) with BeforeAndAfterAll {

  override def beforeAll(configMap: Map[String, Any]) {
    println("Before!")  // start up your web server or whatever
  }     

  override def afterAll(configMap: Map[String, Any]) {
    println("After!")  // shut down the web server
  }         
} 
```

但是，一个潜在的问题是，如果您使用发现来查找要运行的套件，则会发现所有三个 EndpointTest、Foo 和 Bar。在 ScalaTest 2.0 中，您可以使用 @DoNotDiscover 注释 Foo 和 Bar，ScalaTest 的 Runner 不会发现它们。但 sbt 仍然会。我们目前正在增强 sbt，以便它通过其他可发现的带有 DoNotDiscover 注释的套件，但这将在 sbt 0.13 中，尚未发布。同时，您可以通过向 Foo 和 Bar 添加未使用的构造函数参数来让 sbt 忽略它们。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-15T02:31:11.670

好的，找到方法了。Scalatest 似乎没有“主”套件的功能（除非这里有人可以纠正我）。但是......你可以建造一个。

您可以从特征组成一个套件。所以使用我的端点示例：

```
class EndpointTests extends FunSpec with MustMatchers with BeforeAndAfterAll 
      with Foo with Bar {
        override def beforeAll(configMap: Map[String, Any]) {
            println("Before!")  // start up your web server or whatever
        }

        override def afterAll(configMap: Map[String, Any]) {
            println("After!")  // shut down the web server
        }   
} 
```

好的，但是测试呢？注意 with `Foo`with `Bar`。我将依赖测试作为特征引入。看这里：

```
trait Foo extends FunSpec with MustMatchers {
    describe("Message here...") {
        it("Must do something") {  }
        it("Must be ok") {  }
    }
}

trait Bar extends FunSpec with MustMatchers { 
    describe("Hello you...") {
        it("One more!") {  }
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-06-01T16:31:26.440

或者，您可以只使用一个对象。

```
object TestServer {
  startServer()
} 
```

当您访问对象时，它将被初始化，启动服务器。只需在您访问对象的主体中创建一个公共特征。然后将该特征混入您的所有测试中。完毕。

如果您的服务器以守护程序模式运行（例如处于测试模式的 Play! 应用程序），它将在所有测试运行后自动关闭。

# javascript - 自定义 AngularJS 指令的一部分应该保存在哪里？

> ID：15423339
> 
> 赞同：1
> 
> 时间：2013-03-15T01:45:17.147
> 
> 标签：javascript, angularjs, kineticjs

我正在尝试创建一个自定义 Angular 指令，该指令使用 KineticJS 根据范围内的值在画布上绘制。我打算创建一个服务，然后根据接收 JSON 响应的 $http 调用更新范围。那时我希望指令循环遍历范围内的值并为每个值创建一个动力学节点。

但是，我不确定是否应该在控制器内或指令的链接函数内执行此操作。如果我要在链接函数中进行更新，我会使用 scope.$watch 还是其他东西？

我创建了这样的自定义指令：

```
angular.module('history.directives', [])
    .directive('kinetic', function() {
        var kineticContainer = '<div id="container"></div>';
        return {
            restrict: 'E',
            compile:function (tElement, tAttrs, transclude) {
                tElement.html(kineticContainer);
            },
            controller: KineticCtrl
        };
}); 
```

然后控制器看起来像这样：

```
function KineticCtrl($scope) {
    $scope.stage = new Kinetic.Stage({
        container: 'container',
        width: window.innerWidth,
        height: window.innerHeight - $('.navbar').outerHeight()
    });

    $scope.drawNode = function(posx, posy) {
        var layer = new Kinetic.Layer();
        var group = new Kinetic.Group({
            x: posx,
            y: posy
        });

        var line = new Kinetic.Line({
            points: [0, 25, 500, 25],
            stroke: 'black',
            strokeWidth: 4
        });

        var text = new Kinetic.Text({
            text: 'www.google.com',
            fontSize: 18,
            fontFamily: 'FontAwesome',
            fill: '#555',
            width: 300
        });

        group.add(line);
        group.add(text);
        layer.add(group);
        $scope.stage.add(layer);
    };

    $scope.drawNode(200, 400);
    $scope.drawNode(800, 400);
    $scope.drawNode(400, 100);
} 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:16:51.817

请参阅[定义指令时“控制器”、“链接”和“编译”函数之间的区别](https://stackoverflow.com/questions/12546945/difference-between-the-controller-and-link-functions-when-defining-an-angula)

总之，指令的控制器和链接功能之间几乎没有区别。如果这很重要，控制器将首先运行，但我不认为它在这里 - 因为您通过 $http 检索数据，您必须在控制器或链接函数中使用 $watch 才能触发您的逻辑数据变得可用。

# c# - 从组合框填充从 sql 获取数据以传递到 windows 上的文本框

> ID：15423340
> 
> 赞同：-3
> 
> 时间：2013-03-15T01:45:29.487
> 
> 标签：c#, sql, sql-server-2008, datagridview, combobox

早安先生/女士，

我有一个 Windows 窗体，它将通过 ODBC 连接连接到 SQL 服务器，将信息检索到组合框，然后根据组合框选择将文本传输到文本框。请看一下我的表单的布局。我将如何在 C# 上编写代码来做到这一点？谢谢，我只需要一个简短的简单代码，因为我对 C# 很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:21:57.033

我找到了答案。但是我有点好奇在windows窗体上的一些实现，用于在运行业务实现逻辑时禁用按钮，这是正确的吗？

# c++ - Visual Studio 2012 中的 c++ std::thread 问题

> ID：15423345
> 
> 赞同：3
> 
> 时间：2013-03-15T01:45:52.027
> 
> 标签：c++, multithreading, debugging, visual-studio-2012

我正在尝试执行此代码。

```
BOOL genFunctionOne(std::vector <char> functionOneBuffer, int functionOneCharCount)
{
  int lineCountTest = 0;
  int characterCountTest = 0;

  for (int i = 0; i < functionOneCharCount; i++)
  {
    if (functionOneBuffer[i] == '\n')
      lineCountTest++;

    characterCountTest++;
  }

  return FALSE;     
} 
```

有了这个电话。

```
std::thread funcThreadOne( [&] { functionOne = genFunctionOne( functionBufferOne, functionCharCountOne ); } ); 
```

每次我调用这个函数。我明白了。。

```
Microsoft Visual C++ Runtime Library

Debug Error!

Program:... my.exe

R6010
-abort() has been called

Please retry to debug the application. 
```

断点是由... crt0msg.c 引起的

```
 if (rterrnum != _RT_CRNL && rterrnum != _RT_BANNER && rterrnum != _RT_CRT_NOTINIT)
        {
            switch (_CrtDbgReportW(_CRT_ERROR, NULL, 0, NULL, L"%s", error_text))
            {
            case 1: _CrtDbgBreak(); msgshown = 1; break;
            case 0: msgshown = 1; break; 
```

提前致谢。

我实际上已经尝试在同一个程序中运行其他线程调用并且没有运气。它可能是我的编译器，是否有任何库需要在构建选项中与 #include 链接？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-15T01:51:34.630

您在退出范围之前加入或分离线程吗？因为你必须。退出范围与线程运行调用终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:21:59.073

请注意，lambda 通常仅在它们出现的完整表达式中使用，并且临时 lambda 对象将在该完整表达式的末尾被销毁。

我希望`std::thread`复制传入的仿函数对象，以避免生命周期问题。

但是您可以通过以下方式确保没有问题：

```
auto threadProc =  [&] { functionOne = genFunctionOne( functionBufferOne, functionCharCountOne ); };
std::thread funcThreadOne(threadProc);
funcThreadOne.join(); // <- make sure you do this before threadProc goes out of scope 
```

（注意：标准确实要求`std::thread`复制仿函数和所有参数，并且还要求 lambda 对象具有复制构造函数。但 Visual C++ 可能还不能满足这些要求。）

# ios - 如何防止 AutoLayout 重置视图框架？

> ID：15423352
> 
> 赞同：0
> 
> 时间：2013-03-15T01:46:28.393
> 
> 标签：ios, objective-c, autolayout

我有一个带有 AutoLayout 的视图，它适用于不同的屏幕尺寸。屏幕上有一个元素，但它会根据用户操作四处移动。每当我向下导航到另一个屏幕然后返回此视图时，此元素都会重置为其原始位置。

我明白为什么会发生这种情况，但我该如何预防呢？我确实希望它最初设置正确，但不是在第一次之后。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T01:51:38.407

我找到的唯一解决方案是，实施`viewDidLayoutSubviews`

它将`layoutSubviews`在视图加载后立即调用该方法..

```
- (void)viewDidLayoutSubviews
{
    @try
    {
         // Adjusting controls.
    }
    @catch (NSException *exception)
    {
        NSLog(@"%s\n exception: Name- %@ Reason->%@", __PRETTY_FUNCTION__,[exception name],[exception reason]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T14:41:52.057

如果你使用 Autolayout，你永远不应该使用 setFrame/setBounds，因为正如你所见，Autolayout 会忽略它们并在更新时重写它们。

解决办法是改变约束。约束有一个名为的参数`constant`，这是您在创建约束后唯一可以更改的参数。当您需要移动 NSViews 时，您还可以添加/删除额外的约束。

WWDC 2012 中有一个视频，其中有一个很好的示例，说明了如何使用 AutoLayout 移动视图。

# python - ImportError：无法导入名称 ceil_shift

> ID：15423359
> 
> 赞同：1
> 
> 时间：2013-03-15T01:46:59.627
> 
> 标签：python, importerror, shift, ceil

我今天收到此错误，之前工作正常。

```
ImportError: cannot import name ceil_shift 
```

我只有：

```
#!/usr/bin/python -W ignore::UserWarning
import urllib;
import urllib2;
import hashlib;
import simplejson as json;
import subprocess;
import smtplib;
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
import ssh; 
```

- - 结果：

```
Traceback (most recent call last):
  File "./api.py", line 2, in <module>
    from maborak import maborak
  File "/root/automated/maborak.py", line 10, in <module>
    import ssh;
  File "/usr/lib/python2.6/site-packages/ssh/__init__.py", line 62, in <module>
    from transport import SecurityOptions, Transport
  File "/usr/lib/python2.6/site-packages/ssh/transport.py", line 33, in <module>
    from ssh import util
  File "/usr/lib/python2.6/site-packages/ssh/util.py", line 33, in <module>
    from ssh.common import *
  File "/usr/lib/python2.6/site-packages/ssh/common.py", line 98, in <module>
    from Crypto import Random
  File "/usr/lib64/python2.6/site-packages/Crypto/Random/__init__.py", line 29, in <module>
    from Crypto.Random import _UserFriendlyRNG
  File "/usr/lib64/python2.6/site-packages/Crypto/Random/_UserFriendlyRNG.py", line 38, in <module>
    from Crypto.Random.Fortuna import FortunaAccumulator
  File "/usr/lib64/python2.6/site-packages/Crypto/Random/Fortuna/FortunaAccumulator.py", line 39, in <module>
    import FortunaGenerator
  File "/usr/lib64/python2.6/site-packages/Crypto/Random/Fortuna/FortunaGenerator.py", line 34, in <module>
    from Crypto.Util.number import ceil_shift, exact_log2, exact_div
ImportError: cannot import name ceil_shift 
```

这很奇怪，因为代码在 1 天前就可以工作。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-11T14:07:31.547

代表 OP 发布：

该错误已通过以下方式修复：

```
pip -v uninstall ssh
pip -v uninstall pycrypto

pip -v install pycrypto --upgrade
pip -v install ssh --upgrade 
```

# android - 是否可以从我们在 android 上创建的类中获取最新的未接电话或收到的短信通知？

> ID：15423361
> 
> 赞同：0
> 
> 时间：2013-03-15T01:47:07.117
> 
> 标签：android, class, sms

我可以看到从我构建的 apk 中获取新的短信或通话记录，但我的问题是；例如，我创建了一个 .class 在

```
<com.example.xx 
Can I use it on my any other apk's layout xml file using <com.example.xx ... /> using with layout width and height. 
```

那可能吗？如果是这样，你可以创建这个类文件吗？（我知道清单需要接收者和最新未接电话和消息的权限）我希望我能清楚地解释我的意思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:02:42.417

我也不确定你在问什么，但是...

是的，您可以从您想要的任何活动、您想要的任何 apk 和/或几乎任何您想要在手机上的任何地方访问最新的短信或通话记录。

您将使用内容提供者来访问该信息。如果您愿意，您甚至可以在收到消息或电话时使用广播接收器来触发您的应用程序。

是的，如果您愿意，您甚至可以在库中执行此操作（以便其他人可以从他们自己的布局中使用它）。如果这就是你要问的。

是的，如果您愿意，您甚至可以通过意图从一个 apk 到另一个 apk 执行此操作（并不是说我会看到这样做有什么好处）。可能是，最后一个不是你要问的。

我回答你的问题了吗？

# git - 使用`git merge --squash`后如何删除git分支

> ID：15423362
> 
> 赞同：2
> 
> 时间：2013-03-15T01:47:21.133
> 
> 标签：git, github

有一段时间，我以这种不同寻常的方式使用 Git：

1.  `git checkout -b feature123`
2.  微小的编辑、提交、重复
3.  `git checkout master`
4.  `git merge --squash feature123`
5.  使用输出`git log --oneline`来填充提交消息，如下所示：

```
实现功能 123，对 brob 进行处理

长而详细的描述在这里。

         f5d1b77 重构：提取方法
         1c1346e 重构：将“A”重命名为“B”
         63457de等
         884fga1 浮球

```

> 我特别喜欢重构的工作模式，直到我想要创建的行为改变微不足道。在任何时候，如果我卡住了，我可以回滚到我最后一次好的提交。阅读我的提交历史很容易，因为行为更改和重构是分开的，并且行为更改简单明了。
> 
> 我在微软的 Source Depot 工作时养成了这个习惯。我可以对一个分支进行一系列微小的提交，并将上游的分支合并为一个提交。我们有一个 gui 工具（类似于 gitk），它可以显示合并提交及其`+`旁边的 a。如果需要，我可以扩展并查看详细信息。非常好。我试图在 Git 中复制它。

如果我想深入了解细节，GitHub 会将这些提交 SHA 放入到各个提交的链接中。但是，它只对一些提交执行此操作，其余的不会成为链接。

[![在此处输入图像描述](../Images/b52ca3a3ade2cfb9b1758eb68b0e6a92.png "点击查看完整尺寸")](https://i.stack.imgur.com/v0RVb.png)

这显然是在 Git 中一种不同寻常的工作方式。这些工具不太可能围绕它进行改进，其他程序员看到它时可能会感到困惑。

通常，在合并 Git 功能分支后，您可以将其删除 - 没有太多理由保留它。但是在这种情况下，如果我删除分支，单个提交将消失，并且您无法在 GitHub 中单击它们。所以那些旧的分支把东西弄得乱七八糟，即使它们没有用。**我怎样才能摆脱它们？**

也许一些变基的魔法咒语？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T06:14:47.837

据我了解你的意图，你的意思是有一个简单的历史和需要的细节。

如果您进行压缩合并，则（除非您添加一些明确的参考）没有直接的方式来访问原始提交，并且 git 将（最终）清理所有那些无法访问的提交。

因此，您需要一种方法来存储原始分支的 ref。最自然的地方就是合并提交本身，这会导致未取消的合并。

因此，我的建议是在显示您的历史记录时进行定期合并并过滤重要的提交，例如在`gitk --first-parent`. 这只会向您显示主分支上的提交，而忽略任何侧分支。（即在第一种方法中取消合并时您将摆脱的那个。）

# javascript - 使用自定义函数在 d3.js 中创建元素

> ID：15423363
> 
> 赞同：2
> 
> 时间：2013-03-15T01:47:22.413
> 
> 标签：javascript, d3.js, codemirror

我想使用 d3.js 与 CodeMirror 中的标记文本进行交互。但是，要在 CodeMirror 中标记文本，您需要调用`markText(from,to, {class: 'my-class'})`它并使用 class 围绕文本创建一个跨度`my-class`。

我希望根据数据标记许多文本，然后向它们添加一些事件处理等。因此，我想做类似的事情：

```
var box = d3.selectAll('box').data(myData);
box.enter().each(function(d) {cm.markText(from(d), to(d), {class: 'box'});})
box.on('mouseover', function(d) {...});
box.exit().remove(); 
```

但是，d3 的输入选择仅支持`append`、`insert`和`select`。我尝试用`select`已经（例如`box.enter().select(arbitraryElt).each(...)`）来伪造效果，但这没有用。

当然，我可以遍历我的数据，标记文本，然后使用 d3 应用我想要的其他属性，但这有点违背了使用 d3 的意义。

是否可以用 d3 以优雅的方式做到这一点？

编辑：

我意识到我完全误解了 markText 的工作原理，因此我的问题的上下文是无效的。但是，我仍然很好奇是否可以使用任意函数而不是 append 创建元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-25T18:44:03.667

您可以使用`.call`自定义函数，这样就可以了`.call(box)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T10:55:16.033

您也可以使用`insert()`，但不能使用任意函数。问题是`enter()`选择中的元素还没有真正存在（即没有相应的 DOM 元素）。由于没有 DOM 元素，因此您无法对它们进行操作。

[文档](https://github.com/mbostock/d3/wiki/Selections#wiki-enter)中的更多信息。您当然可以实现自己的自定义函数来处理`enter()`元素，但这需要相当多的关于 d3 如何在内部工作的知识。

# function - 在 OCaml 中的函数内定义变量

> ID：15423371
> 
> 赞同：0
> 
> 时间：2013-03-15T01:48:02.290
> 
> 标签：function, variables, functional-programming, ocaml

我有一个函数 numofday 我想将它应用于另一个函数中的两个变量，它将返回两天之间的天数，函数本身并不重要，我想这更像是一种语法问题，但谷歌并没有产生太多。

我想做的是（这就是我尝试过的，显然没有用）

```
let daysbetween day1 day2 =
 let x = numofday day1;
 let y = numofday day2;
 x-y;; 
```

我试过删除 let，删除分号，并使用 := 而不是 =，但我似乎无法让它工作。必须有一种方法可以在函数中定义变量。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:07:43.723

ocaml 的 let 绑定的正确语法是`let name=bindng in expr` Here is the fixed code for you

```
let daysbetween day1 day2 =
  let x = numofday day1 in 
  let y = numofday day2 in
  x-y;; 
```

您的具体示例甚至可以通过绑定元组一次分配两个值：

```
let daysbetween day1 day2 =
  let (x,y) = (numofday day1, numofday day2) in
  x - y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:55:16.597

以 rgrinberg 的回答为基础：
OCaml 中的单个分号与 Java 或 C 中的分号非常不同。

在您的情况下，您似乎将分号的功能解释为语句的结束标记。
但是，分号用作表达式的分隔符。并且 OCaml 期望分号前的值是单位类型 ()，副作用函数通常会返回。

表达方式：

```
();();();.....();x;; 
```

具有 x 的值。

那怎么用呢？

```
let x = 1;;
let y = 
    print_string("assigning x to y\n");
    x;; 
```

# php - php setcookie() 不起作用 - 无法修改标头信息

> ID：15423381
> 
> 赞同：0
> 
> 时间：2013-03-15T01:49:31.170
> 
> 标签：php, cookies

我找到了出现此错误的原因，我的代码没有任何问题，因此我将其从帖子中删除。

我的 php 页面被编码为 UTF-8，但它必须被编码为没有 BOM（字节顺序标记）的 UTF-8。

据我了解，BOM 被解释为输出，或者至少创建一个。

感谢您的所有回答，我的问题是重复的，对此我深表歉意，我查看了其他帖子，但还不够远。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:01:39.123

如果您在使用 setcookie 之前已经完成了 HTML 输出，您需要找到您的 HTML 输出开始的位置。在该行上方放置将开始输出缓冲的[ob_start Docs函数。](http://php.net/ob_start)

启用输出缓冲后，您的程序仍然可以“输出” HTML，但不会立即发送。然后你应该可以毫无问题地调用 setcookie：

```
 <?php
  function login($username,$pwd)
    {   
        $mysqli=dbconnect(); //no output
        $query = "SELECT * FROM `users` WHERE `name`='$username' AND `password`='$pwd'";
        $result = $mysqli->query($query) or die($mysqli->error.__LINE__);
        if($result->num_rows == 1) {
            while($row = $result->fetch_assoc()) {
                ob_start(); //set output buffering before setting cookies..
                setcookie("ID", $row['userid'], time()+3600*24*365);
                ob_end_flush(); // flush data
                if (isset($_COOKIE['UNIQUE_ID']))
                    {echo 'Connected';}
                else{echo 'No cookie today :(';}
            }
        }
        dbclose($mysqli); //no output
    }
    ?> 
```

当你的脚本完成时，输出缓冲区将自动发送到浏览器，所以你不需要关心更多，其余的会自动工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:26:08.353

在打开标签之前尝试删除所有空格。

结束标签是可选的，可能有助于将空格误解为输出

# ruby-on-rails - 创建 has_one 关联错误，批量分配

> ID：15423385
> 
> 赞同：0
> 
> 时间：2013-03-15T01:49:43.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我把这个放进去

订单.rb

```
 has_one :adress 
```

地址.rb

```
belongs_to :order 
```

并以创建一个订单的形式输入：

```
<td><%= order.select :adress_id,Adress.all.map { |a| [a.name,a.id] }%></td> 
```

但是当我尝试创建时出现这个

无法批量分配受保护的属性：地址

我不明白，因为出现这种情况，请有人解决，我尝试将 :adress 放入订单模型中，但出现此错误：

```
Adress(#2220351840) expected, got String(#2207089660) 
```

是一个协会，所以请举例说明我是如何做到的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T01:56:51.177

添加`attr_accessible :adress`到您的模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:13:00.047

尝试：
attr_accessible :adress_attributes 在您的订单模型中。

如果您使用嵌套的 has_one 关联，请添加，

Accept_nested_attributes_for :adress, :update_only => true

希望这可以帮助。

# javascript - 如何让plupload从队列中删除文件？

> ID：15423388
> 
> 赞同：3
> 
> 时间：2013-03-15T01:50:06.323
> 
> 标签：javascript, jquery, file-upload, plupload

在过去的 5 个小时里，我一直试图弄清楚这一点。

我尝试了无数在网上找到的方法，但都没有奏效。到目前为止，这种方法效果最好（只显示一个错误）。

我得到的错误是：“Uncaught ReferenceError: deletefile is not defined” 请注意，该错误仅在我单击“删除”超链接时发生。

```
//UPLOAD CODE
$(document).ready(function() {
// Custom example logic
function $(id) {
    return document.getElementById(id);
}

var uploader = new plupload.Uploader({
    runtimes : 'gears,html5,flash,silverlight,browserplus',
    browse_button : 'pickfiles',
    container: 'container',
    drop_element: 'uploadBox',
    max_file_size : '10mb',
    url : 'upload.php',
    flash_swf_url : '../js/plupload/plupload.flash.swf',
    silverlight_xap_url : '../js/plupload/plupload.silverlight.xap',
    filters : [
        {title : "Image files", extensions : "jpg,gif,png"},
        {title : "Zip files", extensions : "zip"}
    ]

    //,
    //multipart_params : {
    //  "title" : $("#title").val(),
    //  "descripition" : $("#description").val()
        //}
});

uploader.bind('Init', function(up, params) {
    if (uploader.features.dragdrop) {
        var target = $("uploadBox");

        target.ondragover = function(event) {
            event.dataTransfer.dropEffect = "move";
            this.className = "dragover";
        };

        target.ondragenter = function() {
            this.className = "dragover";
        };

        target.ondragleave = function() {
            this.className = "";
        };

        target.ondrop = function() {
            this.className = "";
        };
    }
});

uploader.bind('FilesAdded', function(up, files) {
    function deletefile(i) {
        uploader.splice(i,1);
    }
    for (var i in files) {
        $('filelist').innerHTML += '<div id="' + files[i].id + '">' + files[i].name + ' (' + plupload.formatSize(files[i].size) + ') <a href="#" onclick="deletefile(\'' + i + '\');">Remove</a><b></b></div>';
    }
});

uploader.bind('UploadProgress', function(up, file) {
    $(file.id).getElementsByTagName('b')[0].innerHTML = '<span>' + file.percent + "%</span>";
});

$('uploadfiles').onclick = function() {
    uploader.start();
    return false;
};

uploader.init();
}); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:39:03.153

假设`filelist`是一个 id（所以，使用`$('#filelist')`），您可以尝试替换它：

```
uploader.bind('FilesAdded', function(up, files) {
    function deletefile(i) {
        uploader.splice(i,1);
    }
    for (var i in files) {
        $('filelist').innerHTML += '<div id="' + files[i].id + '">' + files[i].name + ' (' + plupload.formatSize(files[i].size) + ') <a href="#" onclick="deletefile(\'' + i + '\');">Remove</a><b></b></div>';
    }
}); 
```

有了这个 ：

```
uploader.bind('FilesAdded', function(up, files) {
var deleteHandle = function(uploaderObject, fileObject) {
        return function(event) {
            event.preventDefault();
            uploaderObject.removeFile(fileObject);
            $(this).closest("div#" + fileObject.id).remove();
        };
    };

    for (var i in files) {
        $('#filelist').append($('<div id="' + files[i].id + '">' + files[i].name + ' (' + plupload.formatSize(files[i].size) + ') <a href="#" id="deleteFile' + files[i].id + '">Remove</a></div>'));
        $('#deleteFile' + files[i].id).click(deleteHandle(up, files[i]));
    }    
}); 
```

我也认为`$('uploadfiles')`应该是`$('#uploadfiles')`，但这超出了问题的范围。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-16T14:03:44.920

```
// jquery plugin
uploader.plupload('getUploader').splice();
$('.plupload_filelist_content', uploader).empty(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T11:26:06.410

```
uploader=newplupload.Uploader({
//-----
});

uploader.bind('FilesAdded',function(up,files)
{
//----
up.refresh();//RepositionFlash/Silverlight
});

uploader.bind('QueueChanged',function(up,files){

 //#doc-filelist is the id of dive, which shows the Queue
$('#doc-filelist').html('');

$.each(uploader.files,function(i,file){
$('#doc-filelist').append(
'<divid="'+file.id+'">'+
file.name+'('+plupload.formatSize(file.size)+')<b></b>'+
'<spanclass="remove_file"data-file="'+i+'">X</span>'+
'</div>');
});

if(uploader.files.length==0){
$('#uploadfiles').addClass('disabled');
}

//console.log(uploader.files);
});

 uploader.bind('UploadComplete', function (up, file) {
    up.splice();
    up.refresh();

}); 

$('.relevant-document').on('click','.remove_file',function(e){

uploader.splice($(this).attr('data-file'),1);

uploader.refresh();
}); 
```

# unix - '-d' 在 Unix 中有什么作用？

> ID：15423391
> 
> 赞同：1
> 
> 时间：2013-03-15T01:50:23.210
> 
> 标签：unix

我有这个代码，它被设置为一个步骤的条件。代码中的“-d”是什么意思？

```
if [ -d $FTBASEDIR/$1/$2 ]; then
    ftcmd="lcd $FTBASEDIR"
    ftcmd2="cd $FTROOTDIR"
    ftcmd3="put $1"
fi 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T01:51:11.193

这意味着：以下参数是目录吗？

从`bash`手册页（下`CONDITIONAL EXPRESSIONS`）：

```
-d file
    True if file exists and is a directory. 
```

有很多这些，让您发现常规文件、字符特殊文件、文件是否可写等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:52:11.403

来自[http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions](http://www.gnu.org/software/bash/manual/bashref.html#Bash-Conditional-Expressions)：

> ```
> -d file 
> ```
> 
> 如果*文件*存在并且是目录，则为真。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T01:55:32.017

`[`实际上是一个命令名，（几乎）等同于`test`命令。

两者`[`和`test`都作为许多 shell 中的内置命令实现，也作为实际的可执行文件实现，通常在`/usr/bin`(`[`通常是指向`test`) 的符号链接。（在过去，它们只是可执行文件；将它们构建到 shell 中可以更快地执行测试。）

bash 或`test`命令的文档解释了`-d`测试以下参数是否是目录。

（我在上面写了“几乎”；不同之处在于`[`需要匹配的`]`参数，`test`而不需要。）

# jquery - jQuery 淡出 div 在 Flash 对象顶部时无法正确显示边框

> ID：15423395
> 
> 赞同：3
> 
> 时间：2013-03-15T01:51:01.507
> 
> 标签：jquery, firefox, flash, border, opera

第一次发帖...对我放轻松:-)

我有一个客户的二维码测试​​登陆页面：

[http://www.woodfold.com/qr](http://www.woodfold.com/qr)

我没有开发网站，但我现在负责更改。

目前，客户只希望出现一个简单的感谢框，然后在访问 QR 码页面时淡出。我写了一个简单的 div、css 并使用 jQuery 来实现淡出效果。

该网站在屏幕顶部有一个 .swf 电影/旋转器。

只要浏览器的大小足够大，以便 QR 感谢消息显示在电影下方，该代码就可以正常工作。

如果浏览器/屏幕的大小足够小以将消息推送到电影区域 FF 和 Opera 不会正确渲染圆角。当消息出现在影片下方时，它们会正确呈现。

我确定我错过了一些简单的愚蠢的东西，但是......有人知道是什么原因造成的吗？这是相关的代码片段。

```
 <div id="qrThanks">
        <img src="../i/qrSmall.png" title="Woodfold QR Code" alt="Woodfold QR Code" />
        <p class="qrContent">Thank you for using Woodfold's QR Code!</p>
    </div>
    <div id="contentContainer">
        <div id="flashContainer">
            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="731" height="312">
                <param name="movie" value="http://woodfold.com/flash/superhomeFlash.swf" />
                <param name="wmode" value="transparent">
                        <!--[if !IE]>-->
                        <object type="application/x-shockwave-flash" data="http://woodfold.com/flash/superhomeFlash.swf" width="731" height="312">
                        <!--<![endif]-->

                            <img src="slide.gif" alt="slide" width="731" height="312" />
                        <!--[if !IE]>-->
                        </object>
                    <!--<![endif]-->
            </object>
        </div> 
```

js/jQuery

```
<script type="text/javascript" src="../scriptz/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    jQuery(document).ready(function(){
     $('div#qrThanks').show();
     window.setTimeout(function() {
     $('div#qrThanks').fadeOut('slow');
     }, 2000);
});
</script> 
```

CSS

```
#qrThanks {
position: absolute;
left: 50%;
top: 50%;
display: block;
margin: -100px 0 0 -250px;
text-align: center;
z-index: 1000;
width: 500px;
height: 100px;
background-color: #FFF;
box-shadow: 5px 5px 3px #000;
border: 10px solid #ccc;
border-radius: 10px;
}
#qrThanks img {
margin: 20px 10px 20px 20px;
padding: 0px;
width: 60px;
float: left;
box-shadow: 5px 5px 3px #000;
}
.qrContent {
display: block;
margin: auto 0px;
font-size: 20px;
line-height: 100px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-12T14:43:39.467

有趣的问题，但这不是您的代码，而是正常行为。我创建了一个小提琴并测试了各种 css 设置，但无法让它工作。在您的情况下，我会考虑 Nate B 提供的解决方法。这里：[https ://stackoverflow.com/a/7838520/1807551](https://stackoverflow.com/a/7838520/1807551)

引用：

> 为了创建圆角的外观，您必须制作四个看起来像圆角的叠加 div，并将它们放置在每个角上。根本不是一个优雅的解决方案，但它是创造这种效果的唯一方法。
> 
> 具有边框半径的容器不会一致地裁剪其中包含的内容，尤其是 Flash 内容。如果您要创建一个单独的 div 叠加层，我想它会导致无法单击视频中的任何控件，这就是为什么我认为四个绝对定位的角 div 是唯一的方法。

# php - 从json获取属性的正确方法

> ID：15423398
> 
> 赞同：0
> 
> 时间：2013-03-15T01:51:27.673
> 
> 标签：php, json, decoding

```
 <?php
         $json_string = file_get_contents('infile.json');
         $get_json_values=json_decode($json_string,true);

            foreach ($get_json_values as $key=>$getlikes) {  
              if($getlikes[$key]['type']=='like') {

              ?>
              <div><p><?php echo $getlikes['name'] ?></p></div>
            <?php
          }}
           ?> 
```

上面的代码有一个错误：未定义的偏移量在与 if 的行上。我猜是因为`$getlikes[$key]['type']`错了。`type`获取属性为“like”的所有对象的正确代码是什么？

Json 可以从[这里下载](https://www.dropbox.com/s/gtqrzml1p9p5zpy/infile.json)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T01:56:19.900

这实际上取决于您的 .json 对象的内容。但很可能导致未定义的偏移量，因为并非所有 $getlikes[$key] 都具有“type”的数组键。在比较之前验证以确保它存在。尝试

```
foreach ($get_json_values as $key=>$getlikes) { 
    if(!isset($getlikes['type'])) continue;
        if($getlikes['type']=='like') {
    .... 
```

编辑：

根据您的 .json 文件，您只是添加了一个不需要的附加密钥。更改了代码以反映正确的调用。检查是否设置了值仍然不是一个坏主意。尝试使用 var_dump($getlikes) 或在您正在使用的文件上查看您正在迭代的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:17:47.520

给定 JSON 字符串，很明显你做错了什么。$get_json_values 是一个没有索引的列表，你在键上加倍，很难解释。改为这样做。

```
foreach ($get_json_values as $getlikes) { 
    if($getlikes['type']=='like') { 
```

如果你要使用 $key，你会像这样使用它

```
foreach ($get_json_values as $key=>$getlikes) { 
    if($get_json_values[$key]['type']=='like') { 
```

但无论如何你都不会那样做。Foreach 一个一个地提取元素。

# php - 什么是“双”字符串类型？

> ID：15423399
> 
> 赞同：0
> 
> 时间：2013-03-15T01:51:31.877
> 
> 标签：php, prepared-statement

关于函数 mysqli_stmt_bind_param 的“类型”参数。什么是“双”字符串？它写在php手册[here的表格中](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T01:58:41.670

文档在“string”、“integer”和“blob”旁边说“double”。

A`double`是一个“双精度”浮点数，之所以这么称呼是因为最初的浮点数是 32 位的，称为`single`s，但我们需要更高的精度，所以他们将其扩大到 64 位并称为它们`doubles`（我个人更喜欢名字`ieee32`和`ieee64`分别但是哦）。

所以 a`double`根本不是字符串。An`integer`是整数，a`blob`是 Binary-Large-OBject，本质上是可变长度的任意数据。

# php - 用于发送内容处置头的 readfile 可以使用 Web 根目录之外的文件吗？

> ID：15423403
> 
> 赞同：0
> 
> 时间：2013-03-15T01:51:39.117
> 
> 标签：php, header, download

如果我将某人链接到文件：

`site.com/file.php?id=someid`

`~/files/somefile.zip`并获得一个位于文档根目录之外的网址，这会起作用吗？这样做有安全风险吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:56:36.957

你试过了吗？那应该可以正常工作；php 不关心文档根目录。

它还使您可以更好地控制何时以及向谁提供文件，因此在很多情况下它实际上是在提高安全性（例如，如果文件应该只在登录后可用）。

# wcf - 排除 WCF DataContract 上的属性

> ID：15423405
> 
> 赞同：0
> 
> 时间：2013-03-15T01:51:42.943
> 
> 标签：wcf, serialization

给定这样的 WCF 接口定义，有没有办法从 ComplexObject 响应值中排除属性？

我想排除 ChildObjects 属性。我不想从属性定义中删除 DataMember 属性，因为我需要在另一种情况下对其进行序列化。

```
[ServiceContract]
public interface IComplexObjectService
{
    [OperationContract]
    ComplexObject Test(int a);
} 
```

ComplexObject 的定义如下：

```
[DataContract(IsReference = true)]
public class ComplexObject 
{
    [DataMember]
    public long ObjectCode
    {
        get { return _ObjectCode; }
        set { _ObjectCode = value; }
    }

    [DataMember]
    public List<ComplexObject> ChildObjects
    {
        get { return _ComplexObject; }
        set { _ComplexObject = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:34:04.603

如果不想在 ComplexObject 中公开 ChildObjects 属性，则必须删除 DataMember 属性。如果您有另一个需要 ChildObjects 的用例，那么我建议您有一个单独的 ComplextObject 确实有它。您不能只在运行时打开或关闭它，因为它会违反合同定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T08:44:51.307

```
[DataContract(IsReference = true)]
public class ComplexObject 
{
public ComplexObject()
{
 ChildObjects=null;
}
[DataMember]
public long ObjectCode
{
    get { return _ObjectCode; }
    set { _ObjectCode = value; }
}

[DataMember]
public List<ComplexObject> ChildObjects
{
    get { return _ComplexObject; }
    set { _ComplexObject = value; }
}
} 
```

# delphi - 调用 OS 函数失败后获取访问冲突 00000000

> ID：15423407
> 
> 赞同：0
> 
> 时间：2013-03-15T01:51:54.110
> 
> 标签：delphi, crash, stack-trace, access-violation

我们一直在尝试解决这个导致我们的程序崩溃的问题。但是，我们无法在内部重现崩溃。

来自客户端计算机的调用堆栈位于此处的链接上：

点击放大：

[![截屏](../Images/f3b763d12ff7e902cdca95576e426674.png)](https://i.stack.imgur.com/SXQLd.png)

它似乎没有引用我们项目中的任何文件，所以我们有点迷失在哪里寻找解决方案。

这可能是环境问题吗？遇到此问题的客户端使用的是 Windows 7 SP1 和 Windows Server 2003。有时，就在崩溃之前，客户一直报告他们收到了“调用 OS 函数失败”的错误消息。这有关系吗？基于调用堆栈，任何人都可以理解它正在尝试做什么吗？

[更新] 调用栈来自 EurekaLog。此外，我在调用堆栈下方附加了客户也遇到的“对 OS 函数的调用失败”错误。这似乎与客户收到的 AV 错误有关，但我们不确定。[http://postimage.org/image/jku5dlnuf/](http://postimage.org/image/jku5dlnuf/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:02:51.433

根据图像中堆栈跟踪的部分，无法判断。堆栈跟踪主要显示来自内核 DLL 的 Windows API 内部函数。

地址全为零的异常是一个 nil 指针（一个在创建之前使用的对象），但无法从堆栈跟踪中判断它发生在哪里。

您应该考虑将异常处理产品（如[MadExcept](http://madshi.net)或[EurekaLog）添加](http://www.eurekalog.com/)到您的应用程序中，这将为您提供可用的堆栈跟踪和更多错误信息。两者都相对便宜，尤其是与在没有它们的情况下试图追踪此类错误所花费的时间相比。（我自己的经验是使用 MadExcept，但我不隶属于其中任何一个。）

# javascript - 未初始化的常量 EmberController

> ID：15423408
> 
> 赞同：0
> 
> 时间：2013-03-15T01:52:03.227
> 
> 标签：javascript, ruby-on-rails, ruby, ember.js

我正在按照[本教程](http://www.devmynd.com/blog/2013-3-rails-ember-js)使用 ember-rails gem 创建一个 ember-rails 应用程序。

我在教程的最后，但我收到了一个路由错误

在浏览器中：

```
 uninitialized constant EmberController 
```

在终端中：

```
 ActionController::RoutingError (uninitialized constant EmberController):
   activesupport (3.2.12) lib/active_support/inflector/methods.rb:230:in `block in constantize'
   activesupport (3.2.12) lib/active_support/inflector/methods.rb:229:in `each'
   activesupport (3.2.12) lib/active_support/inflector/methods.rb:229:in `constantize'
   actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:69:in `controller_reference'
   actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:54:in `controller'
   actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:32:in `call'
   journey (1.0.4) lib/journey/router.rb:68:in `block in call'
   journey (1.0.4) lib/journey/router.rb:56:in `each'
   journey (1.0.4) lib/journey/router.rb:56:in `call'
   actionpack (3.2.12) lib/action_dispatch/routing/route_set.rb:601:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
   rack (1.4.5) lib/rack/etag.rb:23:in `call'
   rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/head.rb:14:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/flash.rb:242:in `call'
   rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
   rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/cookies.rb:341:in `call'
   activerecord (3.2.12) lib/active_record/query_cache.rb:64:in `call'
   activerecord (3.2.12)           lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
   activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `_run__4018265295575118160__call__2187012938703494479__callbacks'
   activesupport (3.2.12) lib/active_support/callbacks.rb:405:in `__run_callback'
   activesupport (3.2.12) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
   activesupport (3.2.12) lib/active_support/callbacks.rb:81:in `run_callbacks'
   actionpack (3.2.12) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/reloader.rb:65:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
   railties (3.2.12) lib/rails/rack/logger.rb:32:in `call_app'
   railties (3.2.12) lib/rails/rack/logger.rb:16:in `block in call'
   activesupport (3.2.12) lib/active_support/tagged_logging.rb:22:in `tagged'
   railties (3.2.12) lib/rails/rack/logger.rb:16:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/request_id.rb:22:in `call'
   rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
   rack (1.4.5) lib/rack/runtime.rb:17:in `call'
   activesupport (3.2.12) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
   rack (1.4.5) lib/rack/lock.rb:15:in `call'
   actionpack (3.2.12) lib/action_dispatch/middleware/static.rb:62:in `call'
   railties (3.2.12) lib/rails/engine.rb:479:in `call'
   railties (3.2.12) lib/rails/application.rb:223:in `call'
   rack (1.4.5) lib/rack/content_length.rb:14:in `call'
   railties (3.2.12) lib/rails/rack/log_tailer.rb:17:in `call'
   rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
   /Users/user/.rvm/rubies/ruby-1.9.3-p385/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service' 
```

路线.rb

```
Application::Application.routes.draw do
   namespace :api do
     namespace :v1 do
       resources :posts
     end
   end

   root :to => 'ember#start'
 end 
```

但是 EmberController 不存在。事实上，我搜索了整个文件夹，并且该名称存在的唯一位置是在日志文件中。我在这里想念什么？

rake 路由的输出

```
 api_v1_posts GET    /api/v1/posts(.:format)          api/v1/posts#index
                 POST   /api/v1/posts(.:format)          api/v1/posts#create
 new_api_v1_post GET    /api/v1/posts/new(.:format)      api/v1/posts#new
edit_api_v1_post GET    /api/v1/posts/:id/edit(.:format) api/v1/posts#edit
     api_v1_post GET    /api/v1/posts/:id(.:format)      api/v1/posts#show
                 PUT    /api/v1/posts/:id(.:format)      api/v1/posts#update
                 DELETE /api/v1/posts/:id(.:format)      api/v1/posts#destroy
            root        /                                ember#start 
```

# javascript - JavaScript Chrome 似乎不支持通过 setAttributeNode 添加 id

> ID：15423412
> 
> 赞同：3
> 
> 时间：2013-03-15T01:52:29.807
> 
> 标签：javascript, google-chrome, innerhtml

所以我正在为我的网站开发一个 JavaScript 搜索器，并且已经运行了几天，当我意识到它与 Chrome 不兼容时，我检查了其他一些浏览器并意识到它可以在 Firefox 和 IE9 中运行，但是确实不适用于 Chrome 或 Safari。

几个小时以来，我一直在 Chrome 和 Firefox 中并排使用调试器，但终其一生都无法弄清楚问题出在哪里。它一直给我一个错误。我确切地知道错误的含义，以及它为什么给我错误，但我不知道是什么原因造成的。

这是错误： Uncaught TypeError: Cannot set property 'innerHTML' of null

我知道这意味着没有具有该 ID 的对象，但我之前设置了一个具有该 ID 的对象。在 Firefox 的调试器中，在该行代码中它说 Id 已设置，但在 Chrome 调试器的同一行中，它说它没有。

这是代码的摘录：

```
 arrayFinal[arrayln2]="end";
  var displayNumber=0;
  while(arrayFinal[displayNumber].charAt(0) != "e"){
    var boxPath="camper_htmls/"+arrayFinal[displayNumber]+".txt";
    boxhttp = new XMLHttpRequest();
    boxhttp.open("GET",boxPath,false);
    boxhttp.send(null);
    var boxHTML = boxhttp.responseText;
    var setDivId=document.createAttribute("Id");
    setDivId.value=("div_"+displayNumber);
    var node = document.createElement("div");
    node.setAttributeNode(setDivId);
    document.getElementById("resultContainer").appendChild(node);
    var divIdNumber = ("div_"+displayNumber);
    document.getElementById(divIdNumber).innerHTML=boxHTML;
    displayNumber++;
  } 
```

尽管该网站的几乎每个页面都使用了此代码的一个版本，但它们都不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:00:56.987

使用`id`而不是`Id`如

```
var setDivId=document.createAttribute("id"); 
```

[**演示**](http://jsfiddle.net/BuCrV/)

# sql - sql查询连接同一列的2行

> ID：15423414
> 
> 赞同：-2
> 
> 时间：2013-03-15T01:52:48.550
> 
> 标签：sql, oracle, hsqldb, concat

我有下表 Tble ：

```
姓名 | 等级
--------------
n1 | L1
n1 | L2
n2 | L1
n2 | L3
n3 | L1
n4 | L3

```

我怎样才能编写一个 SQL 查询来输出这样的结果？

```
姓名 | 等级  
----------------
n1 | L1_L2
n2 | L1_L3
n3 | L1
n4 | L3

```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:20:53.670

因此，如果您的问题标题所暗示的始终是 2 行，只需执行以下操作：

```
SQL> select name,
  2         case
  3           when min(lvl)=max(lvl) then min(lvl)
  4           else min(lvl)||'_'||max(lvl)
  5         end lvl
  6    from data group by name
  7   order by name;

NA LVL
-- -----
n1 L1_L2
n2 L1_L3
n3 L1
n4 L3 
```

在 11g 中，如果每个名称的行数超过 2 行，则可以使用 listagg：

```
SQL> select name,
  2         listagg(lvl, '_') within group (order by lvl) lvl
  3    from data
  4   group by name
  5   order by name;

NA LVL
-- --------------------
n1 L1_L2
n2 L1_L3
n3 L1
n4 L3 
```

或 10 克：

```
SQL> select name,
  2         replace(wm_concat(lvl), ',', '_') lvl
  3    from data
  4   group by name
  5   order by name;

NA LVL
-- --------------------
n1 L1_L2
n2 L1_L3
n3 L1
n4 L3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T01:56:56.510

假设 MySQL：

```
SELECT Name, GROUP_CONCAT(Level SEPARATOR "_") Level
FROM tbl
GROUP BY Name 
```

**结果**

```
| 姓名 | 水平 |
----------------
| n1 | L1_L2 |
| n2 | L1_L3 |
| n3 | L1 |
| n4 | L3 |
```

[查看演示](http://sqlfiddle.com/#!2/e377a/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:44:35.423

这是 Oracle **11g R2**解决方案：使用`LISTAGG`：

```
SELECT "Name", LISTAGG("Level", ',') WITHIN GROUP (ORDER BY "Level") "Levels"
FROM Table1 
GROUP BY "Name"
ORDER BY "Name"; 
```

[SQL小提琴](http://sqlfiddle.com/#!4/4e467/18)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:14:54.803

HSQLDB 支持与 MySQL 相同的语法，但它使用 SQL 标准单引号作为字符串常量。

```
SELECT "Name", GROUP_CONCAT("Level" ORDER BY "Level" SEPARATOR '_') "Level"
FROM "Tbl"
GROUP BY "Name"
ORDER BY "Name" 
```

此示例假定您有带引号的混合大小写的表和列名称。

[http://www.hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_aggregate_funcs](http://www.hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_aggregate_funcs)

# vb6 - VB6后台进程，如何检测另一个应用程序上的条码扫描

> ID：15423429
> 
> 赞同：1
> 
> 时间：2013-03-15T01:54:47.330
> 
> 标签：vb6

我正在构建一个后台 vb 程序，用于检测另一个应用程序上的条形码扫描。如果检测到某个字符串，我想通过在 VB 中使用 keySend 命令将另一个字符串添加到正在运行的应用程序中。我可以从 keypress 或 keydown 读取字符串，但不能从条形码扫描仪读取字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:44:05.590

在名为的窗体上放置一个 Timer 控件`Timer1`

```
Private Declare Function GetAsyncKeyState Lib "User32" (ByVal vKey As KeyCodeConstants) As Long

Private barcode As String

Private Sub Timer1_Timer()
    Dim keyResult As Integer
    Dim chrKey As String
    Dim i As Integer
    For i = 2 To 90
        keyResult = 0
        keyResult = GetAsyncKeystate(i)
        If keyResult = -32767 Then
            chrKey = Chr(i)
            barcode = barcode & chrKey
            Exit For
        End If
    Next i
End Sub 
```

这是一个键盘记录器。它将记录所有按下的键。将计时器间隔设置为扫描仪的速度，这样您就不会重复击键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:09:23.843

如果我理解正确，您的问题是如何检测应用何时扫描代码？

如何执行扫描、手动键盘输入或使用条形码扫描仪设备？

如果它使用设备，那么这一切都取决于设备。我只使用过一些设备，它们所做的就是每当您扫描某些东西时，它会将数据从条形码复制到剪贴板（就像您按 CTRL+C 复制一行文本一样）。

因此，您所要做的就是监视剪贴板中的特定字符串，然后执行您需要做的任何事情。

# c++ - 使用 MinGW 在 Eclipse 中提升单元测试不产生输出

> ID：15423436
> 
> 赞同：0
> 
> 时间：2013-03-15T01:55:38.330
> 
> 标签：c++, eclipse, boost, mingw, boost-unit-test-framework

我有一个非常简单的 Boost 单元测试，如下所示：

```
#define BOOST_TEST_DYN_LINK
#define BOOST_TEST_MODULE myModule
#include <boost/test/unit_test.hpp>

BOOST_AUTO_TEST_CASE(universeInOrder)
{
    BOOST_CHECK(true);
} 
```

这编译得很好，没有任何问题。但是，当我运行应用程序时，控制台视图没有输出，并且控制台视图显示应用程序已终止。我尝试通过 将日志级别设置为程序参数`--log_level=all`，但没有效果。但是，当我从命令行运行我的可执行文件时，我看到了预期的输出。我也无法调试程序，这是一个非常关键的问题。我正在使用 Eclipse 3.7、MinGW 4.6 和 Boost 1.52。有什么想法吗？

**编辑** 这是我的编译器参数：

g++ -IC:\Boost\boost_1_52_0 -O0 -g3 -Wall -c -fmessage-length=0 -o src\Test1.o ..\src\Test1.cpp

g++ -LC:\Boost\boost_1_52_0\stage\lib -o MinGWUnitTestProject.exe src\Test1.o -llibboost_unit_test_framework-mgw46-d-1_52

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:06:02.030

问题是在Eclipse中执行测试时，Boost单元测试库不在执行路径上。我通过修改“运行配置”以将 Boost 单元测试库的目录添加到“路径”环境变量来解决此问题。它现在运行并给我输出以及允许我调试。

# java - 配置文件不是工件名称的一部分

> ID：15423444
> 
> 赞同：0
> 
> 时间：2013-03-15T01:56:19.233
> 
> 标签：java, maven-2, maven-3, build-automation

我的项目使用可以在 Android 或 Java 上运行的代码。为了抽象出不常见的部分，我们使用相同的 API 但特定于平台的实现——一种用于 Android，一种用于 Java。

像这样的东西：

```
common/src/main/java/...
droid/src/main/java/...
POJ/src/main/java/... 
```

common 可以依赖于*droid.jar*或 POJ.jar。

我正在使用配置文件进行 android 构建（指定 droid.jar 依赖项），然后是 java 构建（指定 POJ.jar 依赖项）。这会导致冲突，因为两者都创建了一个名称相同但内容不同的工件。

我是在要求 maven 向后弯腰吗？有没有更好的方法来实现这一目标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:13:53.840

我猜您使用一些插件来构建您的 jar/war/.... 在 Maven 配置文件中，您不仅可以声明依赖项，还可以声明插件配置。

它看起来像：

```
<profile>
  <id>whatever</id>
  <build>
    <plugins>
      <groupId/>
      <artifactId/>
      <version/>
      <configuration>
        ...
      </configuration>
    </plugins>
  </build>
</profile> 
```

例如，如果您使用 maven-jar-plugin。您可以定义[finalname](http://maven.apache.org/plugins/maven-jar-plugin/jar-mojo.html#finalName)，以从不同的配置文件中获取唯一名称。

但是，请注意，如果您使用一个配置文件构建，那么如果您`mvn -Panother clean package`将删除另一个配置文件。

另一种方法是创建具有不同依赖关系的子模块。

# uml - UML 类图关联

> ID：15423451
> 
> 赞同：0
> 
> 时间：2013-03-15T01:57:09.050
> 
> 标签：uml, class-diagram

在 UML 类图中，有人告诉我我们不应该有任何独立的类，而是应该以某种方式连接它们。从理论上讲，这是有道理的，并且使用简单的类，当然……以以下为例：

![在此处输入图像描述](../Images/a110ef5a2984d79a850a3a56e9b6cb45.png)

所以，a`Person`可以有 0 个或多个`Car`... 很公平.. 但现在看下面的例子：

![在此处输入图像描述](../Images/aaf5d2b10a407f53dbcd3b8eff84896c.png)

在a可以属于 a或 a具有 a的意义上， `Person`and`PersonRepository`并没有真正连接。它们是相关联的，但是将返回给定的 a 。那么，在它们之间添加一条关联线是否正确，如果是，它应该指向哪个方向？我收到有关这种情况的相互矛盾的信息。我将不胜感激对此作出的任何澄清。`Person``PersonRepository``PersonRepository``Person``PersonRepository``Person``ID`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:11:26.627

通常，当某个类的实例*属于*另一个类的实例时，它是一种聚合或组合关系（这是一种特殊的关联）。

如果您可以`Person`从 a中获得 a，`PersonRepository`则它是一个关联。请注意，存储库可能有多个`Person`，因此它必须`1..n`位于`Person`末尾。

关联端的箭头表示该端是*可导航*的：您可以从另一端的类实例到带有箭头的类的实例。在您的示例中，您可以从实例`Person`转到`PersonRepository`（例如：） ，`person.getRepository()`但不能`Person`从`PersonRepository`. **箭头应该在另一端**。

```
 1..n     1
Person <----------- PersonRepository 
```

# jquery - 在 Ruby 中运行 jQuery

> ID：15423454
> 
> 赞同：3
> 
> 时间：2013-03-15T01:57:32.273
> 
> 标签：jquery, ruby, execjs

我想在 Ruby 应用程序中运行 jQuery 并使用它来操作 HTML 字符串。（是的，我知道还有其他 Ruby 库可以处理该任务，但在这种情况下我有充分的理由使用 jQuery。）这可能吗？我知道我可以使用 ExecJS 在我的 Ruby 应用程序中执行简单的 JavaScript 代码，但 jQuery 似乎不起作用：

```
irb(main):001:0> require 'execjs'
=> true
irb(main):002:0> require 'open-uri'
=> true
irb(main):003:0> context = ExecJS.compile(open("http://code.jquery.com/jquery-1.9.1.js").read)
=> <Return omitted for brevity>
irb(main):004:0> context.call("$", "<div>Test</div>")
ExecJS::ProgramError: ReferenceError: window is not defined
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:68:in `extract_result'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-.4.0/lib/execjs/external_runtime.rb:27:in `exec'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-.4.0/lib/execjs/external_runtime.rb:19:in `eval'
        from c:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/execjs-.4.0/lib/execjs/external_runtime.rb:33:in `call'
        from (irb):4
        from c:/RailsInstaller/Ruby1.9.3/bin/irb:12:in `<main>' 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T04:20:12.373

错误消息告诉您问题所在：

```
ExecJS::ProgramError: ReferenceError: window is not defined 
```

jQuery 是一个用于 DOM 操作的库。它期望看到所有常见的 DOM 对象和接口，包括`window`对象。

您使用的 ExecJS 库不提供 DOM 或`window`对象。它提供了一个 JavaScript 执行上下文，但与浏览器提供的不同。

您可能可以通过使用另一个库（例如[JSDOM）](https://github.com/tmpvar/jsdom)来提供 jQuery 可以使用的 DOM 来实现此功能。这是[一个可以提供一些提示的搜索](https://www.google.com/search?q=ruby+execjs+jquery+window)。

第一个链接描述了[JSDOM 和 jQuery 与 ExecJS 的使用，](http://blog.envylabs.com/post/29003944783/running-jquery-code-from-ruby-using-execjs-async)这可能与您想要的类似。

也就是说，为什么是 jQuery？有几个很好的[Ruby HTML 解析器](https://www.google.com/search?q=ruby+html+parser)，包括[Nokogiri](http://nokogiri.org/)。为什么不尝试其中之一？

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-03-15T02:58:13.007

你不能在 Ruby 中运行 jQuery。jQuery 不是用 Ruby 编写的，它是用 JavaScript 编写的，因此您需要运行 JavaScript 解释器才能使用它。

# parameters - 缺少 YouTube Direct Lite“播放列表”参数

> ID：15423457
> 
> 赞同：0
> 
> 时间：2013-03-15T01:57:39.613
> 
> 标签：parameters, youtube, playlist

我已经在我的网站上设置了 YouTube Direct Lite。验证工作正常，能够使用您的 Google 帐户通过 YouTube 登录。现在，当我加载页面时出现问题。

我收到一条错误消息，指出“缺少“播放列表”URL 参数”。我整天都在努力解决这个问题。我假设它与获取播放列表 ID 的全局变量有关。

我不知道变量是如何被调用或存储的，所以我不知道这是否有问题。

```
 if (panel.needsPlaylist && !globals.hashParams.playlist) {
          utils.showMessage('The "playlist" URL parameter is missing.');
          return;
        } 
```

那是返回错误的代码行，但我在代码中找不到存储 globals.hashParams.playlist 的任何地方。

还有其他人遇到并解决了这个问题吗？

这发生在所有三个选项卡上，因为它们都需要这个“播放列表”。非常令人沮丧....因为它在 api 文档中没有提到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T19:23:18.417

登录到应用程序的“管理”部分，单击要嵌入的播放列表，然后您将获得嵌入代码“要添加与此播放列表关联的提交小部件，请使用以下 HTML 代码：”。

粘贴那个 iframe 就可以了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T08:21:05.057

使用管理员的 iframe 只是加载它的托管版本。

Amir 的答案是您将得到的最接近的答案，因为他们拒绝让我在最终解决方案中得到其他答案。祝你好运。

登录到应用程序的“管理”部分，单击要嵌入的播放列表，然后您将获得嵌入代码“要添加与此播放列表关联的提交小部件，请使用以下 HTML 代码：”。

# coldfusion - 如何处理coldfusion共享主机环境中的正常运行时间和冗余问题？

> ID：15423464
> 
> 赞同：1
> 
> 时间：2013-03-15T01:58:49.690
> 
> 标签：coldfusion, redundancy, uptime

我在共享的 Coldfusion 10 环境中运行生产服务。虽然它比 CF9 可靠得多，但我仍然遇到一些问题，即当他们这样做时，实时服务可能会在技术人员处理之前关闭近一天。

我能做些什么来防止这些停机时间？到目前为止，我所做的是让两个帐户具有相同的主机（但不同的机器）指向同一个数据库。如果由于某种原因生产机器向南运行，我登录到他们的管理面板并将 DNS 指针路由到另一台物理服务器。这不是立即的，因为它需要传播等等，但感觉比技术人员可能花费的未指定时间来查看问题要快。

但即便如此，这也不像是一种专业的处理方式。所以我愿意接受任何想法。不幸的是，这项服务还没有到我可以获得专用服务器的地步（因为这意味着我必须为相当昂贵的 CF 许可证付费）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:18:29.420

如果可以的话，我会从主机获取一些日志，以找出导致停机的原因。您的代码中某处是否存在无限循环？楼主很烂吗？从字面上看，它崩溃的原因可能有数千个。如果房东无法告诉您他们遇到问题的原因，那么您需要寻找新的房东。

至于购买专用服务器的 CF 许可证，您可以试用[Railo](http://www.getrailo.org/index.cfm/download/)或[OpenBD](http://openbd.org/downloads/)（两者都是免费的）。我已经用过Railo 很多次了，除了一些非常小的改动之外，我不需要做很多事情来使代码在Railo 上工作。如果您的代码大部分是`<cfset>`，`<cfquery>`那么`<cfoutput>`您应该能够非常轻松地进行更改。

Railo 提供了一个速成版 - 下载 zip 文件，解压缩并启动 .bat 文件，您就可以开始使用了，测试起来真是再简单不过了。如果您走 Railo 路线并遇到任何问题，他们的[Google Group](https://groups.google.com/forum/?fromgroups#!forum/railo)非常活跃

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T16:11:15.773

更改您的主机，或考虑获得通常介于共享和专用之间的 VPS。

# javascript - 今天默认引导日期选择器

> ID：15423467
> 
> 赞同：69
> 
> 时间：2013-03-15T01:59:15.647
> 
> 标签：javascript, html, date, bootstrap-datepicker

我正在为我的 datepicker 使用这个[bootstrap-](http://www.eyecon.ro/bootstrap-datepicker/) datepicker。我希望日期选择器选择“今天”作为开始日或默认日。我不知道如何自动设置“今天”，所以我做了一个低效的方法

HTML：

```
<input type="text" value ="today();" id="datepicker"/> 
```

JS：

```
 $('#datepicker').datepicker();
function today(){
    var d = new Date();
    var curr_date = d.getDate();
    var curr_month = d.getMonth() + 1;
    var curr_year = d.getFullYear();
    document.write(curr_date + "-" + curr_month + "-" + curr_year);
} 
```

在线示例：http: [//jsfiddle.net/BXZk2/](http://jsfiddle.net/BXZk2/)

只是寻找一个简单的解决方案，将默认日期设为“今天”。

谢谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-03-15T02:03:05.613

这应该有效：

`$("#datepicker").datepicker("setDate", new Date());`

对于自动关闭（[小提琴](http://jsfiddle.net/her2p/)）：

```
$('#datepicker').datepicker({
        "setDate": new Date(),
        "autoclose": true
}); 
```

[jQuery > 日期选择器 API](http://api.jqueryui.com/datepicker/#method-setDate)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2014-01-14T11:09:30.420

初始化后设置

```
 $('#dp-ex-3').datepicker({ autoclose: true, language: 'es' });
$('#dp-ex-3').datepicker('update', new Date()); 
```

这个例子是有效的。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2017-11-20T09:45:05.277

我用了这段代码

```
$('#datePicker').datepicker({
                    format:'mm/dd/yyyy',
                }).datepicker("setDate",'now'); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2017-12-27T15:25:49.050

具有当前日期和基本设置的日期选择器：

```
// Datepicker
$('.datepicker').datepicker({
    autoclose: true,
    format: "yyyy-mm-dd",
    immediateUpdates: true,
    todayBtn: true,
    todayHighlight: true
}).datepicker("setDate", "0"); 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-06-24T10:08:54.870

如果上述选项均不起作用，请使用以下命令：

```
$(".datepicker").datepicker();
$(".datepicker").datepicker("setDate", new Date()); 
```

这对我有用。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-08-31T03:31:28.417

我用了这个小例子，它奏效了。

```
$('#date').datetimepicker({
    defaultDate: new Date()
}); 
```

演示：http: [//jsfiddle.net/m2fjw57b/1/](http://jsfiddle.net/m2fjw57b/1/)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-05-21T06:29:28.990

## 这对我来说可以...

```
$(document).ready(function() {
    var date = new Date();
    var today = new Date(date.getFullYear(), date.getMonth(), date.getDate());

    $('#datepicker1').datepicker({
        format: 'dd-mm-yyyy',
        orientation: 'bottom'
    });

    $('#datepicker1').datepicker('setDate', today);

}); 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-11-28T10:17:26.440

对于引导日期选择器

```
$( ".classNmae" ).datepicker( "setDate", new Date()); 
```

* new Date 是 jquery 默认函数，您可以在其中传递自定义日期，如果未设置，则默认采用当前日期

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-05-08T07:40:07.753

这个问题是关于引导日期选择器的。但以上所有答案都适用于 jquery 日期选择器。对于 Bootstrap 日期选择器，您只需在输入元素的值中提供默认日期。像这样。

```
<input class="form-control datepicker" value=" <?= date("Y-m-d") ?>"> 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-01-20T15:25:06.390

简单的说下一个。这对我有用。

```
$('.className').datepicker('setDate', 'now'); 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-03-15T02:37:28.293

根据此链接[Set default date of jquery datepicker](https://stackoverflow.com/questions/1646590/jquery-datepicker-default-date)，另一种解决方案是

```
var d = new Date();

var currDate = d.getDate();
var currMonth = d.getMonth();
var currYear = d.getFullYear();

var dateStr = currDate + "-" + currMonth + "-" + currYear;

$("#datepicker").datepicker(({dateFormat: "dd-mm-yy" autoclose: true, defaultDate: dateStr }); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2015-12-01T09:53:50.277

这很简单

```
$(function() {
    $("#datePicker").datetimepicker({
        defaultDate:'now'       
    });
}); 
```

这将在今天设置为默认值

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2017-11-06T09:32:11.843

我更改了第 1796 行文件“bootstrap-datetimepicker.js”中的代码。它对我有用

[![在此处输入图像描述](../Images/6f9e05fa00eee54eba7a792a5101ab65.png)](https://i.stack.imgur.com/uGUYs.png)

# windows - git错误推送失败

> ID：15423468
> 
> 赞同：0
> 
> 时间：2013-03-15T01:59:22.500
> 
> 标签：windows, git

当我尝试将更改推送到本地存储库时出现此错误

```
remote: error: its current branch; however, this is not recommended unless you[K
remote: error: arranged to update its work tree to match what you pushed in some[K
remote: error: other way.[K
remote: error: [K
remote: error: To squelch this message and still keep the default behaviour, set[K
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.[K
To C:\LocalRepositories\CompareDateTime
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'C:\LocalRepositories\CompareDateTime' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:57:01.473

您正在尝试推送到远程的已签出分支，并且默认情况下您不能。

请参阅[此问题](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)以获取更多帮助。

# php - 使用嵌套的 ManyToOne 和 OneToMany 查询复杂的 Doctrine 关系

> ID：15423469
> 
> 赞同：2
> 
> 时间：2013-03-15T01:59:47.737
> 
> 标签：php, symfony, doctrine-orm, doctrine

我有一个非常复杂的 Doctrine 关系架构，查询起来很头疼。它是这样写的：

**项目** `[OneToMany, Bidirectional]` **里程碑**

**里程碑** `[OneToMany, Bidirectional]` **冲刺**

**冲刺** `[OneToMany, Bidirectional]` **票**

因此，工单直接依赖于 Sprint，而不是项目或里程碑。它几乎就像一个树层次结构。它工作得很好。但是，我在以下方面遇到严重问题：

*   我如何发现来自特定项目的所有票证？
*   我如何发现特定里程碑的所有门票？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:31:05.303

使用 Doctrine Query Builder，您可以从这样的项目中获取所有票证：

```
$project_id = ...

$repository = $this->getDoctrine()->getRepository('AcmeBundle:Ticket');

$query = $repository->createQueryBuilder('t')
                    ->join('t.sprint', 's')
                    ->join('s.milestone', 'm')
                    ->join('m.project', 'p')
                    ->where('p.id = :project_id')
                    ->setParameter('project_id', $project_id)
                    ->getQuery(); 
```

这就是从里程碑中检索所有票证的方式：

```
$milestone_id = ...

$repository = $this->getDoctrine()->getRepository('AcmeBundle:Ticket');

$query = $repository->createQueryBuilder('t')
                    ->join('t.sprint', 's')
                    ->join('s.milestone', 'm')
                    ->where('m.id = :milestone_id')
                    ->setParameter('milestone_id', $milestone_id)
                    ->getQuery(); 
```

# html - Google 地球 - KMZ - 打开嵌入图像

> ID：15423471
> 
> 赞同：0
> 
> 时间：2013-03-15T02:00:01.253
> 
> 标签：html, image, google-earth, kmz

我有一个使用对图像的相对引用在 KMZ 内编写的 KML。描述完美地显示了调整大小的缩略图。当我点击它曾经在 GE 内部打开的图像时。我不知道发生了什么，但图像不会再打开了。

在我的 kmz 内，我有 doc.kml 和 dir “文件”，其中包含我的图像

如果可能的话，我还希望它在 Windows 照片查看器中打开。提前致谢！这是我的代码（部分）

```
<tr><td class="padr">Photo 1:</td><td><a href="files/IMG_0003331.JPG"><img src="files/IMG_0003331.jpg" width="200" height="150"/></a></td></tr>
<tr><td class="padr">Photo 2:</td><td><a href="files/IMG_0004332.JPG"><img src="files/IMG_0004332.jpg" width="200" height="150"/></a></td></tr>
<tr><td class="padr">Photo 3:</td><td><a href="files/IMG_0005333.JPG"><img src="files/IMG_0005333.jpg" width="200" height="150"/></a></td></tr>
<tr><td class="padr">Photo 4:</td><td><a href="files/IMG_0006334.JPG"><img src="files/IMG_0006334.jpg" width="200" height="150"/></a></td></tr>             <tr><td class="padr">Photo 5:</td><td><a href="files/IMG_0007335.JPG"><img src="files/IMG_0007335.jpg" width="200" height="150"/></a></td></tr>
<tr><td class="padr">Photo 6:</td><td><a href="files/IMG_0008336.JPG"><img src="files/IMG_0008336.jpg" width="200" height="150"/></a></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-01T21:11:22.537

我有同样的问题。最近的一次强制更新采用了我拥有的一个已建立的项目，其中嵌入超链接到图像至关重要并破坏了它。

我的工作是使用 UNC 路径名而不是映射的驱动器名。即\server\drive name\directory\file.html 而不是k:\directory\file.html，并强制Google Earth 在外部浏览器中打开而不是直接在GE 中打开。

这并不理想，但至少现在可以使用，我可以通过“复制+粘贴”来解决，而不是破坏我的整个项目并重新开始。

令人沮丧。它应该比这更优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T15:43:26.163

您可以在 KML 描述气球弹出窗口中内联它们，它们将像在 HTML 文档中一样显示。假设您还可以链接到嵌入在 KMZ 文件中的图像，就像您在上面尝试做的那样，这样您就可以在气球弹出窗口中显示缩略图，并链接到也嵌入在 KMZ 文件中的更大版本的图像。

GE 7.x 的当前版本不允许链接到 KMZ 文件中的嵌入图像。一个不太理想的解决方法是在外部网站上发布图像（例如 plus.google.com、dropbox.com、imageshack.us 等）并让 KML/KMZ 通过其绝对 URL 引用图像，但这会失败KMZ 作为自包含数据集的全部目的。但是您仍然可以将缩略图嵌入到 KMZ 文件中，以便在气球内查看它。唯一的问题是链接到图像（即`<A href="">`）并在气球上下文外部访问它。

即使您在 GE 中选中了“访问本地文件”选项，点击嵌入图像的链接也会被 Google Earth 忽略。同样，在图像上选择“在新窗口中打开”也没有效果。

更新：在一个相关主题上，最近[讨论](https://productforums.google.com/d/msg/earth/TujDjltjCmI/iFqdXf80yyIJ)了 Google 地球 iOS 平台上的 KMZ 文件中的嵌入图像不受支持，并且内嵌图像在那里不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T02:41:21.843

以防万一有人遇到与我相同问题的帖子，我终于让它按我想要的方式工作。

```
<tr><td class="padr">Photo 1:</td><td><a href="../files/IMG_0003331.JPG"><img src="../files/IMG_0003331.jpg" width="200" height="150"/></a></td></tr>
<tr><td class="padr">Photo 2:</td><td><a href="../files/IMG_0004332.JPG"><img src="../files/IMG_0004332.jpg" width="200" height="150"/></a></td></tr>
<tr><td class="padr">Photo 3:</td><td><a href="../files/IMG_0005333.JPG"><img src="../files/IMG_0005333.jpg" width="200" height="150"/></a></td></tr> 
```

这会在气泡中显示缩略图大小的预览，并在单击时在照片查看器中打开照片。

# html - Div 100％高度显示为0px？

> ID：15423473
> 
> 赞同：11
> 
> 时间：2013-03-15T02:00:13.327
> 
> 标签：html, css, height

我目前正在建立一个网站并且有一个我似乎无法解决的小问题，我创建了一个高度为 100% 的 div，在该 div 内部是一个高度为 100% 的滑块 div，问题是第一个 div 显示 0px 的高度，以便应该在滑块 div 下方的 div 显示在滑块 div 后面，谁能帮助我？

这是我的代码：

```
.slider-container {
    width:                              100%;
    min-height:                         100%;
    background-color:                   white;
    float:                              left;
}

.main-content {
    width:                              100%;
    height:                             1000px;
    background-color:                   pink;
    float:                              left;
}

.column {
    width:                              31%;
    height:                             auto;
    background-color:                   orange;
    float:                              left
}

/* SLIDER */

.caption {
    width:                              500px;
    background-image:                   url("..//img/caption-bg.png");
    background-size:                    100%;
    position:                           absolute;
    z-index:                            99;
    overflow:                           hidden;
    margin-top:                         7%;
    margin-left:                        5%;
    -moz-border-radius:                 20px;
    border-radius:                      20px;
}

.caption-text {
    max-width:                          460px;
    overflow:                           hidden;
    margin:                             20px;
}

.wrapper .slider-container #slideshow { 
    position:                           relative; 
    width:                              100%;
    float:                              left;
}

.wrapper .slider-container #slideshow > div { 
    position:                           absolute; 
} 
```

滑块容器 div 应该有 100% 的高度，以便主要内容 div 低于它。

提前感谢您！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-15T02:14:58.303

单位总是相对于`%`某个值..即使你已经指定`height: 100%;`了`<body>`你会注意到它最终是 0px 高，`<div>`因为你给了 100% 高度，因为这些值是相对于它的父容器的，它最终成为`<html>`当前没有明确设置高度的根元素，因此默认为`auto`. 如果您给出根元素`height: 100%;`，您将获得预期的行为

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:14:13.750

尝试给一个高度：

```
html, body {
    width:100%;
    position:relative;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T06:32:03.100

尝试这个

```
 <style type="text/css">
html {
    height: 100%;
}

body {
    text-align: center;
    height: 100%; 
}

        </style> 
```

# vba - Excel - VBA | 根据用户单击的按钮使图表显示特定系列

> ID：15423475
> 
> 赞同：1
> 
> 时间：2013-03-15T02:00:14.277
> 
> 标签：vba, excel

我是 Excel-VBA 的新用户。所以，我正在尝试一个小项目来教自己婴儿步骤。我希望创建一个交互式图表，显示 sin (x)、cos (x) 或 tan (x) 的曲线，具体取决于用户在我创建的用户窗体上单击的按钮。

下面是模块 1 的 VBA 代码。此代码创建图表，在工作表中定位图表，生成 x 值，并为 sin (x) 集生成 y 值。到目前为止，我只为 sin (x) 集创建了 y 值，因为我更关心让用户窗体按钮执行我希望它们执行的操作。另外，我想快点发布这个问题！

```
Option Explicit
---------------------------------------------------------------------------------
Sub one()

'VARIABLES
Dim Row As Integer
Dim j As Single
Dim pi As Single
pi = 3.14159265359

'LABEL X SET
Cells(1, 38).Value = "X"

'GENERATE X VALUES
j = -4 * pi
For Row = 2 To 82

Cells(Row, 38).Value = j

j = j + 0.025 * pi

Next Row

'LABEL / GENERATE Y VALUES = SIN ( X )
Cells(1, 39).Value = "SIN ( X )"
For Row = 2 To 82

Cells(Row, 39).Value = Sin(Cells(Row, 38).Value)

Next Row

'CREATE CHART 1
Dim c As Chart
Set c = ActiveWorkbook.Charts.Add
Set c = c.Location(where:=xlLocationAsObject, Name:="Sheet1")
With c
    .ChartType = xlXYScatter
    .Axes(xlValue).MajorGridlines.Delete
    .Legend.Delete
End With

'POSITION CHART 1
Dim cobject As ChartObject
Dim r As Range
Set cobject = ActiveSheet.ChartObjects(1)
Set r = ActiveSheet.Range(Cells(1, 1), Cells(37, 22))
cobject.Left = r.Left
cobject.Top = r.Top
cobject.Width = r.Width
cobject.Height = r.Height

'DISPLAY USERFORM 1
Userform1.Show

End Sub 
```

我创建的简单用户窗体有三个命令按钮。按钮 1 用于 Sin (x)，按钮 2 用于 Cos (x)，按钮 3 用于 Tan (x)。下面是我为 Button1_Click 编写的代码。它不是模块一的一部分。它位于项目资源管理器中自己的部分下。VBAProject/Forms/Userform1

```
Option Explicit
---------------------------------------------------------------------------------------
Private Sub CommandButton1_Click()

Dim sinx As Series
Set sinx = c.SeriesCollection.NewSeries :::ERROR
With sinx
    .Values = Range(Cells(2, 39), Cells(82, 39))
    .XValues = Range(Cells(2, 38), Cells(82, 38))
    .Format.Fill.ForeColor.RGB = rgbBlack
    c.SeriesCollection(1).MarkerSize = 2
End With

End Sub 
```

所以...我运行模块 1。它成功地将 x 值生成到它们各自的范围，将 sin (x) 值生成到它们各自的范围，创建和定位图表，并显示 UserForm1。然而！当我单击用户窗体上的按钮 1 时，出现错误...

编译错误：未定义变量

Excel 请突出显示导致错误的代码行。我用 :::ERROR 表示这行代码我假设错误是指我在模块 1 中定义为图表的“c”。我猜定义的变量不会从模块 1 转移到 userform1。

我的目标是让用户能够单击用户窗体上的 sin (x) aka 按钮 1 或 cos (x) 按钮 2 或 tan (x) 按钮 3，然后 sin、cos 或 tan 的曲线应该向上在图表上。我提前感谢 stackoverflow 的所有成员对此调查发表评论。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:55:37.137

您发现（突出显示的错误）VBA 变量具有*范围*：它们仅对声明它们的模块已知，除非您在声明它们的模块中将它们声明为**公共**（在模块级别） . ，并再次在您使用它们的另一个模块中。有关更多详细信息，请参阅[本文](http://support.microsoft.com/kb/843144/en-us)。

回到你的问题：声明

```
Option Explicit
Public c as Chart 
```

在模块 1 中的模块级别（在 Sub one() 之前）；去掉对应的

```
Dim c as Chart 
```

从里面`Sub one()`。接下来，更改用户窗体的代码，如下所示：

```
Option Explicit

Private Sub CommandButton1_Click()

Dim sinx As Series

Set sinx = c.SeriesCollection.Add(Source:=Range(Cells(2, 38), Cells(82, 39)), _
  CategoryLabels:=True)

With sinx
    .Format.Fill.ForeColor.RGB = rgbBlack
    c.SeriesCollection(1).MarkerSize = 2
End With

' important: must hide the dialog so control returns to the calling sub!
Me.Hide

End Sub 
```

这些变化使事情对我有用......

# facebook - Facebook 个人资料图片显示为 Http：在安全网站上预期 Https：

> ID：15423476
> 
> 赞同：0
> 
> 时间：2013-03-15T02:00:19.507
> 
> 标签：facebook, ssl, https, profile, image

在我的 Drupal 7 网站上，当用户使用 Facebook 登录时，它会拉取不安全的图像

http://profile.ak.fbcdn.net/hprofile-ak-ash3/211260_100002498550684_1807914074_s.jpg

我正在为 Facebook 使用 Drupal

我已按照此处的说明进行操作

[Facebook JavaScript SDK over HTTPS 加载非安全项目](https://stackoverflow.com/questions/5212016/facebook-javascript-sdk-over-https-loading-non-secure-items)

也许它已经过时了，目前的解决方法是什么？

同样奇怪的是，当我使用我的 Facebook 帐户登录时，它没有问题

https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/211648_100004825298386_474362609_s.jpg

无论如何，如何使个人资料照片安全？谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:30:13.800

您可以通过附加参数轻松地让 Graph API 返回用户图片的 SSL URL `return_ssl_resources=1`- 请参阅 Mark 的图片，在安全版本中请求：

[https://graph.facebook.com/4/picture?return_ssl_resources=1](https://graph.facebook.com/4/picture?return_ssl_resources=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:47:58.553

因此，经过进一步审查，我意识到我的 Facebook 个人资料是我网站上唯一有问题的个人资料，我的个人资料图片在登录 Facebook 后仍然不安全。

深入挖掘后，我意识到当我直接登录 www.facebook.com 时，我的连接默认也是不安全的。

我进入了帐户设置和安全选项卡，它说安全浏览正在迁移中。我将安全浏览更改为启用，瞧！

一切正常。

我仍然想实现这个

```
str_replace('http://profile.ak.fbcdn.net','https://fbcdn-profile-a.akamaihd.net',$user['pic_square']); 
```

因此，以防万一有人卡在旧学校不安全的浏览中，它会替换链接，但我什至不知道如何执行此操作或代码的去向，但我会再保存一天。

# bugzilla - bugzilla如何链接到bugzilla数据库？附件字段如何保存在数据库中？

> ID：15423478
> 
> 赞同：2
> 
> 时间：2013-03-15T02:00:34.047
> 
> 标签：bugzilla

现在我正在尝试熟悉 bugzilla，所有的 bugzilla 都是相同的格式吗？我的意思是相同的用户界面，屏幕？另外，bugzilla 的数据是如何保存在数据库中的？使用哪种方法？现在我最怀疑的是bugzilla中的附件字段如何保存在数据库中，我的意思是哪种格式？

此外，如果我想从 bugzilla 中提取只有几个有用字段或列的数据，以便制作多个仪表板以向不同部门显示 bug 的状态，我是否也应该链接到同一个数据库？使用 API 或 ODBC 或 JDBC 与数据库通信？在这些方法中，你能告诉我最显着的区别吗？非常感谢...

# django - 具有自定义管理系统的 Django 博客应用程序

> ID：15423480
> 
> 赞同：2
> 
> 时间：2013-03-15T02:00:50.750
> 
> 标签：django, django-admin, blogs, django-apps

我们正在寻找可以通过或多或少的小集成工作集成到我们现有项目中的 django 博客应用程序。我们的客户登录到使用 django 用户框架进行身份验证的定制管理系统。他们无权访问管理员。我们希望我们的客户能够通过我们的管理系统管理他们自己的博客。所以我们正在寻找 django 应用程序，我们可以使用它来单独将管理系统集成到我们的系统中。

[这里](https://www.djangopackages.com/grids/g/blogs/)列出了一些常见的博客应用程序

但是，我们查看的大多数应用程序都使用管理员进行博客管理。有没有人有任何将这些应用程序的管理系统移植到定制管理的经验？

为了完整起见，这里是我们正在寻找的博客的一些主要标准：

*   应该将 django 应用程序集成到现有项目中
*   应该支持站点框架，因为我们有超过 1 个拥有单独域的客户端
*   RSS/Atom、标签和搜索基本上是必须的。
*   分离良好的管理模块，或者使用定制的视图，或者如果使用管理员，很容易与非管理员定制的管理系统集成。

特别是从上面的博客列表中，Zinnia 看起来很有希望，但我们还不知道移动管理站点以使用定制的非管理员视图和模板有多容易。我们不一定希望集成所有内容，但最低限度是发布或编辑博客条目的能力。

如果有人有经验请分享！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:39:01.087

一个简单的事实是，博客是最容易写的东西之一，而且，在像你这样的情况下，有这么多参数，写你自己的可能是最好的方法。

博客有一个定义明确、有据可查的数据模型。真的，它们并不多，而且 Django 提供了您需要的所有部分，而无需花费太多时间。

我体验过的许多（如果不是全部）现成的 Django 博客包提供了许多你并不总是需要的功能，这些复杂的“试图成为 WordPress”的模型对于什么是没有意义的客户*实际*需要。如果他们不这样做，它们是如此简单，您可以在一个下午自己编写它们。

想想数据模型。博客真正有什么？

*   具有标题、发布日期、slug、作者和 HTML 内容字符串的对象。
*   将标签和/或类别附加到帖子的分类法。
*   RSS 提要
*   一个适度的评论系统。

前两项是您将编写的一些最简单的模型。Django 提供了一个强大的 RSS 提要框架，最后，当 Disqus 运行良好时，为什么还要管理自己的评论系统呢？

简而言之，如果您想要最少的麻烦，以及与您现有的 CMS 集成的东西，只需花两天时间自己编写即可。

# java - 如何创建一个可以存储多个对象的arraylist类？

> ID：15423483
> 
> 赞同：4
> 
> 时间：2013-03-15T02:00:58.107
> 
> 标签：java, class, arraylist, 2d

我是一个自学者。目前，我正在制作一个需要矩阵类型数据库的 GUI 项目。

我想了解如何创建一个可以在数组列表中存储多个对象的类。

这是我的示例代码。请注意，这只是我的尝试。此代码尚未最终确定，并且无法正常工作。

感谢您的热心帮助。

```
 import java.util.ArrayList;
    import java.util.List; 
```

}}

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T02:15:41.190

我认为更好的方法是创建一个用户信息类来存储这样的特定用户的信息。

```
// I made them all public but this might not be a good idea!
class UserInfo {
    String user;
    String pass;
    String secretCode;
} 
```

然后你把它放到一个 ArrayList 中。

```
ArrayList <UserInfo> InfoList = new ArrayList<UserInfo> (); 
```

然后对于您当前的方法，您可以执行

```
// Not so sure what you want to do in this method... so you get to figure out that yourself!
public void userInternalDatabase (UserInfo info) {

    this.user = info.user;
    this.pass = info.pass;
    this.secretCode = info.secretCode;
}

public void addUser(String i, String j, String k) {
    UserInfo newUser = new UserInfo();
    newUser.user = i;
    newUser.pass = j;
    newUser.secretCode = k;
    InfoList.add(newUser);
}

public Object findUsername(String a)  
{    
    for (int i=0; i <InfoList.size(); i++) {
        if (InfoList.get(i).user.equals(a)){
             return "This user already exists in our database.";
        }
    }
    return "User is not founded."; // no Customer found with this ID; maybe throw an exception
} 
```

# windows - 如何从 SQLCMD 输出中删除空白

> ID：15423486
> 
> 赞同：2
> 
> 时间：2013-03-15T02:01:14.963
> 
> 标签：windows, sql-server-2008, for-loop, batch-file, cmd

我正在使用以下命令运行批处理文件，该命令基本上从 sql 表中提取数据。我的结果 txt 文件最后给出了一个空行。

```
SQLCMD.EXE -d FCRS_STG -i D:\export.sql -o E:\result.txt -s"," -W -h-1 
```

export.sql 是一个简单的选择查询

```
SET NOCOUNT ON
SELECT * from dbo.VW_FDM_SALES_ADJUST where app ='CN' 
```

请帮我删除空行。

谢谢，拉维。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:21:03.537

这将删除最后一行：

```
@echo off &setlocal
for /f "tokens=1*delims=:" %%i in ('findstr /n "^" result.txt') do set /a count=%%i
for /f "tokens=1*delims=:" %%i in ('findstr /n "^" result.txt') do if %%i lss %count% >>newfile.txt echo.%%j
endlocal 
```

# iphone - 我的应用需要时间进行初始启动

> ID：15423487
> 
> 赞同：0
> 
> 时间：2013-03-15T02:01:18.533
> 
> 标签：iphone, ios

我有一个应用程序，初始启动需要大约一分钟。之后只需几秒钟。初始启动时间长的原因是它需要从雅虎下载财务数据，我认为我无权重新分发这些数据。

这会导致 App Store 出现问题吗？

我已经编写了该应用程序以完美运行，因此不存在崩溃或阻塞主线程的问题。我的问题是是否有人处理过提交需要时间才能启动的应用程序。我没有（便宜的）加速它的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:11:09.833

from the [Apple guidlines](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html):

> Apps are expected to launch and initialize themselves and start handling events in less than 5 seconds. If an app does not finish its launch cycle in a timely manner, the system kills it for being unresponsive. Thus, any tasks that might slow down your launch (such as accessing the network) should be executed asynchronously on a secondary thread.

just try to put this logic out of initial startup. show some message inside the application about this and run the download process async.

# c# - 如何检查是否输入了负数

> ID：15423488
> 
> 赞同：1
> 
> 时间：2013-03-15T02:01:25.243
> 
> 标签：c#

我需要帮助检查是否输入了负数，但每次我进行更改时都会出错。我知道我需要另一个`do/while`循环，但每次我放入一个并使`amount <= 0`编译器不会读取`amount`。这是我的工作应用程序代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            double cur1 = 0.85972;
            double cur2 = 1.16316;
            double cur3 = 1.30246;
            double cur4 = 0.76777;
            double cur5 = 0.66010;
            double cur6 = 1.51409;
            double amount;
            double total;

            int input = 1;

            Console.WriteLine("1\. Euro to Sterling");
            Console.WriteLine("2\. Sterling to Euro");
            Console.WriteLine("3\. Euro to Dollar");
            Console.WriteLine("4\. Dollar to Euro");
            Console.WriteLine("5\. Dollar to Sterling");
            Console.WriteLine("6\. Sterling to Dollar");
            Console.WriteLine("7\. Exit");

            do
            {

                if (input == 0 || input > 8)
                    Console.WriteLine("You have entered an invalid Option please choose again  " + input + " is not allowed");

                Console.WriteLine("Please Enter your selection 1-6 and 7 to quit:");
                input = int.Parse(Console.ReadLine());

                if (input == 1)
                {
                    Console.WriteLine("Please enter the amount in Euro you want converted into Sterling");
                    amount = double.Parse(Console.ReadLine());
                    total = amount * cur1;
                    Console.WriteLine("The amount of {0} Euros in Sterling at exchange rate {1} is = {2}", amount, cur1, total);
                    Console.WriteLine("Press return to go back to the Menu");
                    Console.ReadKey();
                }

                else if (input == 2)
                {
                    Console.WriteLine("Please enter the amount in Sterling you want converted into Euro");
                    amount = double.Parse(Console.ReadLine());
                    total = amount * cur2;
                    Console.WriteLine("The amount of {0} Sterling in Euros at exchange rate {1} is = {2}", amount, cur2, total);
                    Console.WriteLine("Press return to go back to the Menu");
                    Console.ReadKey();
                }

                else if (input == 3)
                {
                    Console.WriteLine("Please enter the amount in Euro you want converted into Dollar");
                    amount = double.Parse(Console.ReadLine());
                    total = amount * cur3;
                    Console.WriteLine("The amount of {0} Euros in Dollars at exchange rate {1} is = {2}", amount, cur3, total);
                    Console.WriteLine("Press return to go back to the Menu");
                    Console.ReadKey();
                }

                else if (input == 4)
                {
                    Console.WriteLine("Please enter the amount in Dollar you want converted into Euro");
                    amount = double.Parse(Console.ReadLine());
                    total = amount * cur4;
                    Console.WriteLine("The amount of {0} Dollars in Euro at exchange rate {1} is = {2}", amount, cur4, total);
                    Console.WriteLine("Press return to go back to the Menu");
                    Console.ReadKey();
                }

                else if (input == 5)
                {
                    Console.WriteLine("Please enter the amount in Dollar you want converted into Sterling");
                    amount = double.Parse(Console.ReadLine());
                    total = amount * cur5;
                    Console.WriteLine("The amount of {0} Dollars in Sterling at exhange rate  {1} is = {2}", amount, cur5, total);
                    Console.WriteLine("Press return to go back to the Menu");
                    Console.ReadKey();
                }

                else if (input == 6)
                {
                    Console.WriteLine("Please enter the amount in Sterling you want converted into Dollar");

amount = double.Parse(Console.ReadLine());
                    total = amount * cur6;

Console.WriteLine("The amount of {0} Sterling in Dollars at exhange rate {1} is = {2}", amount, cur6, total);
                    Console.WriteLine("Press return to go back to the Menu");
                    Console.ReadKey();
                }

            } while (input != 7);

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:08:02.233

您需要与 0.0 进行比较，而不是 0。

```
do
{
  Console.WriteLine("Please enter the amount in Euro you want converted into Sterling");
  amount = double.Parse(Console.ReadLine()); 
} while (amount <= 0.0);
total = amount * cur1;
Console.WriteLine("The amount of {0} Euros in Sterling at exchange rate {1} is = {2}", amount, cur1, total);
Console.WriteLine("Press return to go back to the Menu");
Console.ReadKey(); 
```

尽管您可以将针对每种情况的检查抽象为一种清理和减少代码的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:06:03.333

我认为您正在尝试比较 double 和 int

# content-management-system - 卡在 ez 发布设置向导上

> ID：15423491
> 
> 赞同：0
> 
> 时间：2013-03-15T02:01:40.967
> 
> 标签：content-management-system, ezpublish

我正在一台 linux 机器上安装 ez publish 5，但是当我进入基于 Web 的设置向导时，我卡在了第一页。单击`Next >`除了刷新页面之外什么也没做。
有没有人经历过这个？

附加信息：点击`Finetune`也不起作用，我已经下载了另一个版本的 ez publish 并且出现了同样的问题。 ![我被困在这里了！](../Images/c776e563c0a3413912a42fe8ba77e934.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T14:25:45.570

当前的解决方法是为您的 Web 服务器使用基于 VirtualHost 的设置。以Apache为例，你可以在这里找到一个现成的虚拟主机conf： [https ://confluence.ez.no/display/EZP/Virtual+host+setup](https://confluence.ez.no/display/EZP/Virtual+host+setup)

干杯，

# c# - 标签的明确价值

> ID：15423495
> 
> 赞同：0
> 
> 时间：2013-03-15T02:02:12.523
> 
> 标签：c#, asp.net, label

当按下按钮时，我调用了这段代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (DropDownList1.SelectedItem.ToString() =="ER00 - File Header")
    {
        using (SqlConnection con = 
                   new SqlConnection(ConfigurationSettings.AppSettings["DBcon"]))
        {
            if (String.IsNullOrEmpty(TextBox_ID.Text.ToString()))
            {
                lbl_NoBatchID.Text = "Please enter BatchID!";
            }
            else
            {
                try
                {
                    SqlCommand sqlCommand = new SqlCommand(
                        "Select * from tbl_WinApps_FileHeader Where BatchID =" +
                        TextBox_ID.Text.ToString());

                    sqlCommand.Connection = con;
                    con.Open();
                    SqlDataReader read = sqlCommand.ExecuteReader();

                    GridView1.DataSource = read;
                    GridView1.DataBind();
                }
                catch (Exception)
                {                           
                }
            }
        }
    }
} 
```

它是这样工作的：用户输入一个ID，然后当按下按钮时，它将在SQL中显示表格。

如果用户没有在文本框中输入任何内容，则会提示“请输入 BatchID！” 但在那之后，它就留在那儿，即使我已经输入了有效的身份证，它也不会清除。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:05:23.683

ASP.NET 页面有一个叫做 ViewState 的东西，它可以在请求之间维护控件的状态。您需要清除 GridView 的 DataSource 值并重新绑定它。

```
 if (String.IsNullOrEmpty(TextBox_ID.Text.ToString()))
            {
                lbl_NoBatchID.Text = "Please enter BatchID!";
                GridView1.DataSource=null;
                GridView1.DataBind();
            }
            else
            { 
```

如果查找成功，您还想清除错误：

```
catch(Exception e){
}
lbl_NoBatchID.Text = ""; 
```

我还应该注意，您的空`catch()`文件会吞下您可能遇到的任何数据库或查找错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:06:09.487

```
 protected void Button1_Click(object sender, EventArgs e)
{
   if (DropDownList1.SelectedItem.ToString() =="ER00 - File Header")
    {

        using (SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["DBcon"]))
        {
            if (String.IsNullOrEmpty(TextBox_ID.Text.ToString()))
            {
                lbl_NoBatchID.Text = "Please enter BatchID!";

            }
            else
            {
                try
                {

                    SqlCommand sqlCommand = new SqlCommand("Select * from tbl_WinApps_FileHeader Where BatchID =" + TextBox_ID.Text.ToString());
                    sqlCommand.Connection = con;
                    con.Open();
                    SqlDataReader read = sqlCommand.ExecuteReader();

                        GridView1.DataSource = read;
                        GridView1.DataBind();
                    lbl_NoBatchID.Text = "";
                }
                catch (Exception)
                {                           

                }

            }
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:07:40.497

在您的 Else 块中添加这行代码。

```
lbl_NoBatchID.Text = ""; 
```

# dependency-injection - 如何在 Google Guice 3.0 中注入转换字符串到类

> ID：15423497
> 
> 赞同：0
> 
> 时间：2013-03-15T02:02:23.513
> 
> 标签：dependency-injection, guice

我正在尝试使用 Google Guice3.0 进行轻量级 DI。我想读取属性并将其转换为 Class 类型并注入到一个类中。这是我的代码。

```
setting.properties
port = 31200
handler=com.mypackage.handler.MyHandler

Module
public class MyModule extends AbstractModule {

    @Override
    protected void configure() {
        Properties properties = new Properties();
        try {
            properties.load(getClass().getResourceAsStream("setting.properties"));
            Names.bindProperties(binder(), properties);

        } catch (IOException e) {
            e.printStackTrace();
        } 

    }

}

@Singleton
public class MyServer {

     @Inject @Name("port") int port;

     @Inject @Name("handler") Class<? extends BaseHandler> handlerClass; 
}

public interface BaseHanlder {
   //
}

public MyHandler implements BaseHandler {
  //
} 
```

我想将处理程序属性从属性转换为类并将其注入 MyServer。我怎样才能实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T13:34:41.463

就像@gontard 说的那样，这是因为 Guice 已经包含了类转换器。

它使用 Class.forName(fqn) 来获取类。

您可以使用 Pluggable Type Converters 添加其他自定义转换器，[请参阅 Binder#convertToTypes](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Binder.html#convertToTypes-com.google.inject.matcher.Matcher-com.google.inject.spi.TypeConverter-)。

默认情况下，您有所有原始类型、枚举和类的转换器。有关实施细节，您可以[在此处查看](https://github.com/google/guice/blob/master/core/src/com/google/inject/internal/TypeConverterBindingProcessor.java)。

# nginx - nginx 显示空白 PHP 页面

> ID：15423500
> 
> 赞同：180
> 
> 时间：2013-03-15T02:02:42.883
> 
> 标签：nginx, php

我已经用 php5-fpm 设置了一个 nginx 服务器。当我尝试加载网站时，我得到一个没有错误的空白页面。Html 页面服务很好，但不是 php。我尝试在 php.ini 中打开 display_errors 但没有运气。php5-fpm.log 没有产生任何错误，nginx 也没有。

**nginx.conf**

```
server {
    listen 80;
    root /home/mike/www/606club;
    index index.php index.html;
    server_name mikeglaz.com www.mikeglaz.com;
    error_log /var/log/nginx/error.log;
    location ~ \.php$ {
            #fastcgi_pass 127.0.0.1:9000;
            # With php5-fpm:
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            fastcgi_index index.php;
            include fastcgi_params;
    }
} 
```

**编辑**

这是我的 nginx 错误日志：

```
2013/03/15 03:52:55 [error] 1020#0: *55 open() "/home/mike/www/606club/robots.txt" failed (2: No such file or directory), client: 199.30.20.40, server: mikeglaz.com, request: "GET /robots.txt HTTP/1.1", host: "mikeglaz.com" 
```

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2013-06-02T21:03:13.913

代替

```
include fastcgi_params; 
```

和

```
include fastcgi.conf; 
```

并在 nginx.conf 中删除 fastcgi_param SCRIPT_FILENAME ...

* * *

## 回答 #2

> 赞同：263
> 
> 时间：2013-03-15T04:34:25.970

作为参考，我附上了我的`location`块以捕获具有`.php`扩展名的文件：

```
location ~ \.php$ {
    include /path/to/fastcgi_params;
    fastcgi_pass  127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root/$fastcgi_script_name;
} 
```

仔细检查`/path/to/fastcgi_params`，并确保 nginx 用户存在并且可以读取它。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2014-03-11T19:30:58.923

也有这个问题，终于在[这里](http://forum.nginx.org/read.php?3,197023,200719)找到了解决方案。简而言之，您需要将以下行添加到您的 nginx fastcgi 配置文件（Ubuntu 12.04 中的 /etc/nginx/fastcgi_params）

```
fastcgi_param PATH_TRANSLATED $document_root$fastcgi_script_name; 
```

* * *

## 回答 #4

> 赞同：54
> 
> 时间：2015-08-09T15:41:11.580

许多用户陷入此线程，希望找到在使用**nginx+php-fpm**时显示空白页面的解决方案，我就是其中之一。这是我在阅读了这里的许多答案以及我自己的调查（更新到 php7.2）后最终所做的事情的回顾：

1）打开`/etc/php/7.2/fpm/pool.d/www.conf`并检查参数的值`listen`。

```
listen = /var/run/php/php7.2-fpm.sock 
```

2) 参数`listen`应与`fastcgi_pass`站点配置文件中的参数匹配（即：）`/etc/nginx/sites-enabled/default`。

```
fastcgi_pass unix:/var/run/php/php7.2-fpm.sock; 
```

3）检查文件是否真的存在：

```
$ file /var/run/php/php7.2-fpm.sock 
/var/run/php/php7.2-fpm.sock: socket 
```

4）如果它不存在则意味着**php7.2-fpm**没有运行，所以你需要重新启动它：

```
$ sudo /etc/init.d/php7.2-fpm restart
[ ok ] Restarting php7.2-fpm (via systemctl): php7.2-fpm.service. 
```

关于中的`location`部分`/etc/nginx/sites-enabled/default`：

```
 # pass PHP scripts to FastCGI server
   #
   location ~ \.php$ {
      include snippets/fastcgi-php.conf;

      # With php-fpm (or other unix sockets):
      fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;
   } 
```

检查文件是否`snippets/fastcgi-php.conf`存在于位置`/etc/nginx/`：

```
$ file /etc/nginx/snippets/fastcgi-php.conf
/etc/nginx/snippets/fastcgi-php.conf: ASCII text 
```

此文件包含 php7.2-fpm 所需的变量定义列表。这些变量是直接定义的，或者通过包含一个单独的文件来定义。

```
 include fastcgi.conf; 
```

该文件位于，`/etc/nginx/fastcgi.conf`它看起来像：

```
fastcgi_param  QUERY_STRING       $query_string;
fastcgi_param  REQUEST_METHOD     $request_method;
...
fastcgi_param  REDIRECT_STATUS    200; 
```

**nginx**包括两个可能的参数文件：*fastcgi_params*和*fastcgi.conf*。两者的区别在于 variable 的定义`SCRIPT_FILENAME`：

```
$ diff fastcgi_params fastcgi.conf 
1a2
> fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name; 
```

长话短说，*fastcgi.conf*应该总是有效的。如果由于某种原因您设置使用*fastcgi_params*，您应该定义`SCRIPT_FILENAME`：

```
location ~ \.php$ {
  include snippets/fastcgi-php.conf;

  # With php-fpm (or other unix sockets):
  fastcgi_pass unix:/var/run/php/php7.2-fpm.sock;

  fastcgi_param  SCRIPT_FILENAME    $document_root$fastcgi_script_name;
} 
```

现在重新加载 nginx 配置：

```
$ sudo nginx -s reload 
```

并检查一个 php 文件是否正确显示。例如：

**/var/www/html/test.php**

```
<pre><?php var_export($_SERVER)?></pre> 
```

`/var/www/html`文档根目录的路径在哪里。

如果尽管如此，您仍然看到一个空白文件，请确保您`php.ini`已`short_open_tag`启用（如果您正在测试带有短标签的 PHP 页面）。

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-03-25T09:10:03.123

确保你在 /etc/nginx/fastcgi_params 中有这个

> fastcgi_param SCRIPT_FILENAME $request_filename;

谁知道为什么现在还没有？这必须集体浪费的时间！

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-10-29T23:49:28.873

我写了一个简短的 C 程序，它返回从 nginx 传递给 fastCGI 应用程序的环境变量。

```
#include <stdlib.h>
#include <fcgi_stdio.h>
extern char **environ;

int main(int argc, char **argv) {
    char *envvar;
    int i;

    int count = 0;
    while(FCGI_Accept() >= 0) {
        printf("Content-type: text/html\n\n"
               "<html><head><title>FastCGI Call Debug Tool</title></head>\n"
               "<body><h1>FastCGI Call Debugging Tool</h1>\n"
               "<p>Request number %d running on host <i>%s</i></p>\n"
               "<h2>Environment Variables</h2><p>\n",
              ++count, getenv("SERVER_NAME"));
        i = 0;
        envvar = environ[i];
        while (envvar != NULL) {
                printf("%s<br/>",envvar);
                envvar = environ[++i];
        }
        printf("</p></body></html>\n");
    }
    return 0;
} 
```

将此保存到文件中，例如`fcgi_debug.c`

要编译它，首先安装`gcc`and `libfcgi-dev`，然后运行：

```
gcc -o fcgi_debug fcgi_debug.c -lfcgi 
```

要运行它，请安装`spawn-fcgi`，然后运行：

```
spawn-fcgi -p 3000 -f /path/to/fcgi_debug 
```

然后，更改您的 nginx fcgi 配置以指向调试程序：

```
fastcgi_pass  127.0.0.1:3000; 
```

重启nginx，刷新页面，你应该会看到所有参数都出现在浏览器中供你调试！:-)

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-05-26T16:34:33.643

这些提示帮助我安装了 Ubuntu 14.04 LTS，

另外我需要`short_open_tag`打开`/etc/php5/fpm/php.ini`

```
$ sudo kate /etc/php5/fpm/php.ini

short_open_tag = On

$ sudo service php5-fpm restart
$ sudo service nginx reload 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-09-14T22:33:33.733

将其添加到`/etc/nginx/conf.d/default.conf`：

```
fastcgi_param PATH_TRANSLATED $document_root$fastcgi_script_name; 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-11-18T19:21:58.260

如果有人遇到这个问题，但以上答案都没有解决他们的问题，我遇到了同样的问题并且最难追踪它，因为我的配置文件是正确的，我的 ngnix 和 php-fpm 作业运行良好，并且没有通过任何错误日志出现错误。

愚蠢的错误，但我从未检查过我的 php.ini 文件中设置为`short_open_tag = Off`. 由于我的 php 文件使用`<?`而不是`<?php`，因此页面显示为空白。`On`在我的情况下，应该将短打开标签设置为。

希望这可以帮助某人。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-05-31T06:57:37.580

出现这个问题的原因是因为 nginx 中的 fastcgi 配置没有按要求运行，并且在适当的位置或处理中，它们以 html 数据响应。有两种可能的方法可以配置您的 nginx 以避免此问题。

1.  方法一：

    ```
     location ~ \.php$ {
                fastcgi_split_path_info ^(.+\.php)(/.+)$;
                # With php5-fpm:
                fastcgi_pass unix:/run/php5-fpm.sock;
                fastcgi_index index.php;
                include fastcgi.conf;
        } 
    ```

2.  方法二：

    ```
    location ~ \.php$ {
            fastcgi_split_path_info ^(.+\.php)(/.+)$;
            include snippets/fastcgi-php.conf;
            # With php5-fpm:
            fastcgi_pass unix:/var/run/php5-fpm.sock;
            include fastcgi_params;
    } 
    ```

这两种方法都可以正常工作，您可以继续使用其中任何一种。它们几乎执行相同的操作，差别很小。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-04-06T20:28:30.913

```
location ~ [^/]\.php(/|$) {
         fastcgi_pass unix:/PATH_TO_YOUR_PHPFPM_SOCKET_FILE/php7.0-fpm.sock;
         include fastcgi_params;
         fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
         fastcgi_param SCRIPT_NAME $fastcgi_script_name;
} 
```

祝你好运

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-12-17T15:32:01.530

这是我的 UBUNTU 18.04+apache+php7.2 的虚拟主机

```
server {
    listen 80;
    server_name test.test;
    root /var/www/html/{DIR_NAME}/public;
    location / {
        try_files $uri /index.php?$args;
    }
location ~ \.php$ {
    try_files $uri =404;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass unix:/run/php/php7.2-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
    fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
    }
} 
```

最后一行使它与其他答案不同。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-12-29T22:35:27.203

上面的答案都没有对我有用 - PHP 正确地呈现了除了依赖于 mysqli 的页面之外的所有内容，它正在发送一个带有 200 响应代码的空白页面并且没有抛出任何错误。当我在 OS X 上时，修复很简单

`sudo port install php56-mysql`

然后重新启动 PHP-FPM 和 nginx。

我正在从较旧的 Apache/PHP 设置迁移到 nginx，但没有注意到驱动程序中的版本不匹配`php-mysql`和`php-fpm`.

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-04-08T12:39:40.803

我有一个类似的问题，nginx 正在处理一个页面，然后停止。这里建议的解决方案都不适合我。我通过更改 nginx fastcgi 缓冲来修复它：

```
fastcgi_max_temp_file_size 0;

fastcgi_buffer_size 4K;
fastcgi_buffers 64 4k; 
```

更改后我的`location`块看起来像：

```
location ~ \.php$ {
    try_files $uri /index.php =404;
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    fastcgi_max_temp_file_size 0;
    fastcgi_buffer_size 4K;
    fastcgi_buffers 64 4k;
    include fastcgi_params;
} 
```

有关详细信息，请参阅[https://www.namhuy.net/3120/fix-nginx-upstream-response-buffered-temporary-file-error.html](https://www.namhuy.net/3120/fix-nginx-upstream-response-buffered-temporary-file-error.html)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-30T13:37:23.983

如果你得到一个空白屏幕，那可能是因为两个原因：

1.  浏览器阻止框架显示。在某些浏览器中，框架被认为是不安全的。为了克服这个问题，您可以通过以下方式启动 phpPgAdmin 的无框架版本

    `http://-your-domain-name-/intro.php`

2.  您已在 Nginx 中为**X-Frame-Options**启用了一项安全功能，请尝试禁用它。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-08-16T09:23:09.930

这解决了我的问题：

```
location ~ \.php$ {
    fastcgi_split_path_info ^(.+\.php)(/.+)$;
    include snippets/fastcgi-php.conf;
    # With php5-fpm:
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    include fastcgi_params;
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-10-04T20:11:45.087

我有一个类似的错误，但与 Nextcloud 结合使用。因此，如果这不起作用，请尝试：查看[Nginx 手册](https://docs.nextcloud.com/server/15/admin_manual/installation/nginx.html#nextcloud-in-a-subdir-of-nginx)。

# android - Android DatePicker 选择错误的日期

> ID：15423505
> 
> 赞同：1
> 
> 时间：2013-03-15T02:03:09.000
> 
> 标签：android

我在我的 android 应用程序中遇到了一些奇怪的问题，当我在 datepicker 中为 ex 选择日期时，15march2013 我得到 9october2007

这是来自魔法的片段

```
public static class DatePickerFragment extends DialogFragment {

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        // Use the current date as the default date in the picker
        final Calendar c = Calendar.getInstance();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);

        // Create a new instance of DatePickerDialog and return it
        return new DatePickerDialog(getActivity(), (OnDateSetListener)getActivity(), year, month, day);
    }

}

public void onDateSet(DatePicker view, int year, int month, int day) {
    d.setDate(day);
    d.setMonth(month);
    d.setYear(year);
    int flags = 0;
    flags |= DateUtils.FORMAT_SHOW_DATE;
    flags |= DateUtils.FORMAT_SHOW_YEAR;
    String str = DateUtils.formatDateTime(this, d.getTime(), flags);
    date.setText(str);
} 
```

实际上我不知道有什么问题请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:55:13.747

这些调用已被弃用：

```
 d.setDate(day);
  d.setMonth(month);
  d.setYear(year); 
```

并且没有按照你的设想去做。如果您跟踪并观察每次调用的 d 变化，您会惊讶地发现它只是将这些金额添加到自身中。

您应该改为执行以下操作：

```
Calendar c = Calendar.getInstance();
c.set(year, month, day);

SimpleDateFormat df = new SimpleDateFormat("d yyyy MMM");
String formattedDate = df.format(c.getTime());
date.setText(str); 
```

您可以在此处查看更多日期格式选项：

[http://developer.android.com/reference/java/text/SimpleDateFormat.html](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T03:05:28.170

我实现这一目标的方式：

```
 public class AddEditCourseActivity extends Activity {
              private Button classStartBT;
        private DatePickerDialog mDatePickerDialog;
        private Calendar classStartDate;
        private SimpleDateFormat mDateFormatter;
        @Override
        protected void onCreate(Bundle savedInstanceState) {

                classStartDate = new GregorianCalendar();

                /** Initialize the mTimeFormatter object */
                mTimeFormatter = new SimpleDateFormat("yyyy dd, MM");

                classStartBT = (Button) findViewById(R.id.courseClassStartBT);

    classStartBT.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

mDatePickerDialog = new DatePickerDialog(
                                MyActivity.this, mDateSetListener,
                                classStartDate.get(Calendar.YEAR),
                                classStartDate.get(Calendar.MONTH), 
                                classStartDate.get(Calendar.DAY_OF_WEEK));

                    mDatePickerDialog.show();

                } // end onClick
            });

        }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new OnDateSetListener() {

            @Override
            public void onDateSet(DatePicker view, int year, int monthOfYear,
int dayOfMonth) {

                    classStartTime.set(Calendar.HOUR_OF_DAY, hourOfDay);
                    classStartTime.set(Calendar.MINUTE, minute);

                    /**
                     * display the "class start time" on the buttons
                     */

    classStartBT.setText(mDateFormatter.format(classStartTime.getTime()));

            }
        };

    } // end activity 
```

# string - 一组字符串的 R 直方图和描述性统计

> ID：15423509
> 
> 赞同：1
> 
> 时间：2013-03-15T02:03:20.017
> 
> 标签：string, r, statistics

我有一个字符串向量，有 50 个条目，其中只有大约 7 个不同的字符串。我想在 X 轴上绘制不同的字符串，在 Y 轴上绘制它们的计数，并显示一些描述性统计数据。我希望这是一个直方图，但我从 R 中得到一个错误，说它不接受字符数据。

我可以使用哪些 R 方法来有效地做到这一点？我想我真正需要做的是对这 7 个不同的项目进行分组，然后对每个项目进行计数，但是我如何在 R 中进行分组？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T02:09:04.750

plot the output of `table` on the object. This will count the occurences of each unique value

```
 set.seed(1)
 d <- sample(letters[1:7], 50, replace = TRUE)
 plot(table(d))

 # or
 barplot(table(d)) 
```

# android - 如何在 ubuntu 中使用终端擦除模拟器中的用户数据？

> ID：15423510
> 
> 赞同：0
> 
> 时间：2013-03-15T02:03:28.207
> 
> 标签：android, ubuntu-12.04

我正在安装 apks 并在终端中启动我的模拟器。`Wipe user data`我的问题是 Idk在启动模拟器时如何做。我在 android 网站上阅读了一些内容以使用 -wipe-data 命令，但它没有给出如何使用它的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:07:58.637

```
emulator -avd yourEmulatorName -wipe-data 
```

试试这个

# f# - 为什么这些值会重置为 0？

> ID：15423513
> 
> 赞同：0
> 
> 时间：2013-03-15T02:03:49.807
> 
> 标签：f#

我正在尝试为没有参数的函数实现定期记忆。

```
let mutable superVersion = 1

type Memoize() =
    member this.m f =
        let cache = ref 0
        let version = ref 0
        let returnValue() =
            if !version = superVersion then
                !cache
            else
                System.Console.WriteLine(!cache)
                cache := f()
                System.Console.WriteLine(!cache)
                version := superVersion
                !cache
        returnValue()

let simpleFunction() = 10 + 5 // Could be some mutable data here
let aFunction() =
    let Mem = new Memoize()
    let myFunc() = simpleFunction() + 1
    Mem.m myFunc 
```

这个想法很简单。当数据进入这个程序时，superVersion 增加 1。这样所有函数都必须重新计算，但只有当新数据进入时。之后，许多后面的函数可以建立在早期的函数上，并且永远不会重新计算早期的函数。这样就不需要任何事件。

现在我对编程尤其是 F# 非常陌生。所以我不知道，在彼此之上构建大量这些函数会导致堆栈溢出或其他什么吗？

我要做的只是数据研究，而不必担心使用事件或其他东西以正确的顺序计算事物。有点像 excel，除了 excel 走得更远，只在链接中的前一个单元格（依赖项）发生变化时计算。

所以我希望能得到一些关于这个问题的信息。但是，现在进入主要问题：

然后当我调用 aFunction() 时，版本和缓存都会被计算出来，然后重置为 0。你可以看到我已经放置了 2 个控制台写行。第一个值为 0，第二个值为 16。再次调用 aFunction（不更改 superVersion），我得到完全相同的结果，而不是两者都得到 16。为什么缓存重置回0？

非常感谢。

**编辑：**就像我选择的答案让我知道，我真的忘记了函数的作用。他们在使用时会调用自己的身体。所以一切都在他们身上重置。我太专注于他们应该在哪里实现一个类。

我想要做的正确实现是这样的：

```
type Cell(f) =
    let mem = Memoize()
    let _Value() = mem.m f
    member this.Value = _Value() 
```

现在对于每个函数，或者我现在所说的，单元格。我只需创建一个新的单元格实例并传入我想要的计算（一个函数）。现在因为我在上课，所以 Memoize() 只被创建一次并且它的状态被保存了。使用在 John Palmer 的回答中看到的 Memoize的**新实现。**但是，我将最初选择的引用更改为可变引用。我认为这样更有效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:21:40.703

每次调用该函数时，变量都会被重置 - 您需要将它们移到函数之外，例如

```
type Memoize() =
    let cache = ref 0
    let version = ref 0
    member this.m f =

        let returnValue() =
            if !version = superVersion then
                !cache
            else
                System.Console.WriteLine(!cache)
                cache := f()
                System.Console.WriteLine(!cache)
                version := superVersion
                !cache
        returnValue() 
```

# jquery - 根据其他元素宽度即时更改元素宽度

> ID：15423517
> 
> 赞同：0
> 
> 时间：2013-03-15T02:04:49.463
> 
> 标签：jquery, css, width, modernizr

由于我在脚本方面不够好，我找不到正确的语法。

请看下面的图片。`div.dependable`我需要设置`width`为`X + 16px`，**即使在调整窗口大小时**。

![插图](../Images/96c495acd811fa1d56e4ff0123604948.png)

我有非常相似的例子，请看代码`http://demuri.lv`。尝试在那里调整窗口大小 - 蓝色块将始终位于水平和垂直中心。但我无法弄清楚正确的编码。

jQuery，Modernizr 已加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:46:23.847

您必须点击窗口调整大小事件并确保在 doc.ready 循环中使用

```
$(document).ready(function(){
    $(window).resize(function() {
        var x = ($(window).width() - $('div#mainwrap').width())/2;
        var targ_w = (x+16) + "px";
        $('div.dependable').css({'width': targ_w});
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:42:09.233

如果我理解正确，这意味着 X 是窗口宽度的值 - #main-wrap 宽度，然后将其除以 2 以获得每一边的宽度。您必须确保在加载 DOM 时以及每次调整窗口大小时调用此函数。

```
jQuery(document).ready(function($){
    calcDependable();
});

$(window).resize(calcDependable);

function calcDependable(){
    var x = ($(window).width() - $("#main-wrap").width())/2;
    x = (x < 0 ) ? 0 : x; // make sure value is always 0 or above
    $(".dependable").width(x+16);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:42:32.860

您必须首先挂钩`resize`事件，从左侧`window`找出包装器的 ，然后相应地修改元素的 ，如下所示：[`offset`](http://api.jquery.com/offset/)`width`

```
$(window).on('resize', function (){

    var leftOffset = $('#main-wrap').offset().left;
    $('.dependable').css('width', leftOffset + 16);

}); 
```

这将按照您的要求进行，但我还建议您首先添加相同的语句，以便在[`$(document).ready`](http://api.jquery.com/ready/).

```
jQuery(document).ready(function ($){

    var leftOffset = $('#main-wrap').offset().left;
    $('.dependable').css('width', leftOffset + 16);

}); 
```

`[Working demo](http://jsbin.com/uyoqil/1)`

为了坚持[**DRY 代码**](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的原则，您可能希望将代码包装在函数语句中；强烈建议这样做。也许像这样：

```
function offsetPlusX(targetElement, x){

    var leftOffset = $('#main-wrap').offset().left;
    targetElement.css('width', leftOffset + x);

} 
```

# javascript - 暂停执行 Javascript 程序

> ID：15423518
> 
> 赞同：-1
> 
> 时间：2013-03-14T19:48:58.333
> 
> 标签：javascript, mobile

什么是在 javascript 中“停止”（或“暂停”）代码片段执行并在外部事件发生时恢复执行（从暂停点开始）的干净方法？当用户做某事时必须传播外部事件，即当用户点击按钮、触摸屏幕等时触发的事件

Ps：我不是在寻找无限的while循环。那很脏，而且是CPU的拥护者。

在移动应用程序的上下文中，这可能对您有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:08:34.320

不，那里没有。如果你想要那种效果，你通常会连接一个事件的回调，然后触发你的代码作为响应。

例如，如果您使用 jQuery，并且想要在有人单击按钮时提醒“Hello World”，则不要这样做：

```
function alertHello() {
    alert('Hello World');
}
pause();
// some button gets clicked and you magically know to ...
alertHello(); 
```

你做：

```
function alertHello() {
    alert('Hello World');
}
$('#someButton').click(alertHello); 
```

# java - 关闭 Scanner 会抛出 java.util.NoSuchElementException

> ID：15423519
> 
> 赞同：8
> 
> 时间：2013-03-15T02:04:56.987
> 
> 标签：java, string, exception, element

我正在用 Java 从头开始​​编写一个 RPG 战斗系统，雄心勃勃，对吧？嗯，我遇到了一些麻烦。这是我的代码：

```
void turnChoice() {
    System.out.println("What will you do? Say (Fight) (Run) (Use Item)");
    Scanner turnChoice = new Scanner(System.in);
    switch (turnChoice.nextLine()) {
        case ("Fight"):
            Combat fighting = new Combat();
            fighting.fight();
        default:
    }

    turnChoice.close();
} 
```

当它在代码中达到这一点时，我得到：

> 你会怎么做？说（战斗）（运行）（使用项目）
> 线程“主”java.util.NoSuchElementException 中的异常： 在 Combat.turnChoice（Combat.java:23）
> 的 java.util.Scanner.nextLine（未知来源）处找不到行

这个类叫做 Combat，我只是想让它可以选择战斗或运行或使用物品，我先尝试战斗方法。请帮忙，我对Java有点陌生，所以如果可能的话，不要把事情弄得太复杂。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-15T03:09:09.797

当您使用`Scanner`from阅读时`System.in`，您不应该关闭任何`Scanner`实例，因为关闭一个实例将关闭`System.in`，并且当您执行以下操作时，`NoSuchElementException`将被抛出。

```
Scanner sc1 = new Scanner(System.in);
String str = sc1.nextLine();
...
sc1.close();
...
...
Scanner sc2 = new Scanner(System.in);
String newStr = sc2.nextLine();      // Exception! 
```

# c# - 具有多个子句的 NHibernate Linq 获取不需要的数据

> ID：15423527
> 
> 赞同：0
> 
> 时间：2013-03-15T02:06:11.213
> 
> 标签：c#, .net, sql, linq, nhibernate

使用最新的稳定 NHibernate，我有以下查询：

```
 private void Index(PromotionsRequest req)
    {
        PropertyBag["CurrentYear"] = DateTime.Today.Year;
        PropertyBag["CurrentManager"] = CurrentManager;
        IQueryable<Promotion> promotions;
        int totalPromotions;
        if (req.Commited)
            totalPromotions = NHibernateSession.Query<CommitedPromotion>().Where(p => p.IsHead == true).Count();
        else
            totalPromotions = NHibernateSession.Query<StagedPromotion>().Where(p => p.IsHead == true).Count();
        var totalPages = totalPromotions / maxpages;
        if (totalPages == 0)
            totalPages = 1;
        if (0 == totalPromotions % maxpages)
            totalPages++;
        var currentpage = req.Page;
        var numbers = new List<int>();
        for (int i = 1; i <= totalPages; i++)
            numbers.Add(i);
        var chunkednumbers = Chunk(numbers, maxpages);
        numbers = chunkednumbers.Single(p => p.Contains(currentpage)).ToList();
        if (req.Commited)
            promotions = NHibernateSession.Query<CommitedPromotion>().Where(p => p.IsHead == true).Cast<Promotion>();
        else
            promotions = NHibernateSession.Query<StagedPromotion>().Where(p => p.IsHead == true).Cast<Promotion>();
        //
        if (req.Status == Status.Active)
        {
            promotions = promotions.Where(p => p.From < DateTime.Now && p.To > DateTime.Now);
        }
        else
            if (req.Status == Status.Expired)
            {
                promotions = promotions.Where(p => p.To < DateTime.Now);
            }
            else
                if (req.Status == Status.Unstarted)
                {
                    promotions = promotions.Where(p => p.From > DateTime.Now);
                }
        //
        if (req.Commited)
        {
            if (req.Sort == Sort.Newest)
            {
                promotions = promotions.OrderBy(p => p.Created);
            }
            else
                if (req.Sort == Sort.Newest)
                {
                    promotions = promotions.OrderByDescending(p => p.Created);
                }
                else
                    if (req.Sort == Sort.Modified)
                    {
                        promotions = promotions.OrderBy(p => p.Modified);
                    }
        }
        //
        promotions = promotions
              .Skip(itemsperpage * (currentpage - 1))
              .Take(itemsperpage);
        var promotionsCreated = NHibernateSession.Query<Manager>().Select(p => p.PromotionsCreated).Sum();

        PropertyBag["PromotionsResponse"] = this.listbinder.GetListOfPromotionsFrom(promotions, currentpage, totalPages, totalPromotions, promotionsCreated, req.Sort, req.Status, numbers);
    } 
```

此查询根据 req.Commited 是否为真，获取 CommitedPromotion 类型或 StagedPromotion 类型的实例。基类 Promotion 有一个属性 IsHead，我用它来过滤它们。在这种情况下，我只想要具有 IsHead == true 的促销活动。问题？此查询甚至返回 IsHead == false 的查询。据我所知，这不应该发生。这发生在我开始按状态和排序枚举过滤的地方：

```
 if (req.Sort == Sort.Newest)
                {
                    promotions = promotions.OrderBy(p => p.Created);
                } 
```

如果我在这里调试，我会看到它使用 IsHead == false 进行促销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:40:04.700

`IsHead == true`仅针对未提交的促销进行过滤，因此已提交的促销可以具有`IsHead = false`

我看到的其他问题

*   第二个`if (req.Sort == Sort.Newest)`应该是 Sort.Oldes

# php - 投票系统 - 计算最大投票数

> ID：15423528
> 
> 赞同：-2
> 
> 时间：2013-03-15T02:06:11.747
> 
> 标签：php, mysql, sql, sum

我有这个.php，我必须从数据库中计算最大投票数

```
SELECT std.fname, std.lname, COUNT(v.cand_id)
FROM vote v, student std, candidate ca, position pos
WHERE v.cand_id = ca.stud_id AND ca.pos_id = 1 AND ca.stud_id = std.id 
```

问题是计数已关闭，它显示 70 票，而当我在数据库中计数时，它只有 11 票。我认为这是计算所有选票，而不是计算`COUNT(v.cand_id)`.

这张表是关于计算选票并显示获得选票的最高人。

$que1 = mysql_query ($sql1,$con);

```
 while($row1 = mysql_fetch_array($que1))
        { 

            echo "President: "; echo "".$row1['fname']; echo " ".$row1['lname']; echo " having ".$row1['v.cand_id']; echo " votes"; 

            echo "<br>";    
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:09:35.480

试试这个：

```
SELECT 
  std.fname, 
  std.lname, 
  COUNT(v.cand_id) TotalVotes
FROM vote            AS v
INNER JOIN candidate AS ca  ON v.cand_id  = ca.stud_id
INNER JOIN student   AS std ON ca.stud_id = std.id
INNER JOIN position  AS pos ON ca.pos_id  = pos.id
WHERE ca.pos_id = 1
GROUP BY std.fname, 
         std.lname; 
```

这将计算每个用户的选票。

要仅显示获得总票数最高的人，请尝试以下操作：

```
SELECT 
  std.fname, 
  std.lname, 
  COUNT(v.cand_id) TotalVotes
FROM vote            AS v
INNER JOIN candidate AS ca  ON v.cand_id  = ca.stud_id
INNER JOIN student   AS std ON ca.stud_id = std.id
INNER JOIN position  AS pos ON ca.pos_id  = pos.id
WHERE ca.pos_id = 1
GROUP BY std.fname, 
         std.lname
ORDER BY TotalVotes DESC
LIMIT 1; 
```

**注意事项：**

*   请尽量避免使用该`WHERE`子句的旧连接语法，并开始使用显式 ANSI-92 连接语法。在您发布的查询中，您正在连接`WHERE`子句中的表，但对于表`position pos`没有连接条件，这可能是您获得不正确数据的原因，因为在这种情况下它是交叉连接两个表。

*   此外，尽量避免将聚合函数与不在聚合函数中的列一起使用，而不像`GROUP BY`您那样使用子句，它适用于 MySQL，但这样做是一个好习惯。

# c# - ASP.NET 中的随用随保存模式

> ID：15423530
> 
> 赞同：-3
> 
> 时间：2013-03-15T02:06:21.107
> 
> 标签：c#, asp.net

我根据您使用 C#、Asp.Net SQL 2008/2012 完成以下任务的专家意见。

假设我有一个包含以下文本框的表单，它映射到数据库中的一个表。

*   ID : 身份
*   标题
*   姓名
*   姓
*   出生日期

假设我找到了新联系人并收到了表格。

如果我输入我的“姓名”并点击选项卡，我想立即创建一条记录。然后，如果我输入“姓氏”，那将是一个更新，依此类推。所以我想即时更新/提交

我希望我的所有表单都具有这种功能。

实现这一目标的出发点是什么。

我应该为 CRUDS 使用服务还是应该看什么模型？

更新：以下是更好理解的图片。

如果您有 Gmail/Google 帐户，请尝试创建一个新联系人，然后您就会明白我想要什么。

简而言之，我想实现这种功能。

![在此处输入图像描述](../Images/09ed53ad59e314a1039c5bbc7ea41ed5.png)

![在此处输入图像描述](../Images/afa3452076034e50c1a5f1d0bf96b1b3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:13:29.880

除了我认为这是一个`bad idea`事实之外，每个用户每个表单都会有多个请求，并且如果用户返回编辑他们拼写错误的字段，您将有额外的请求，所以它是很多浪费......除了我对此的看法之外，您可以从这里开始：

1.  考虑到您希望这发生在客户端（即用户的 Web 浏览器）上的用户交互中，每次用户从一个文本框移动到另一个文本框时，您都需要进行 AJAX 调用。

2.  由于您将要使用 AJAX，您应该查看[jQuery](http://api.jquery.com/)，它有一些不错的 Ajax 方法供您使用。

3.  用户可以通过按 Tab 或单击鼠标从文本框移动，因此您需要处理这两个事件。这里的关键字是`focus`，并且有一些与此相对应的事件被触发。使用 jQuery，您可以使用该`.Blur()`方法。

4.  现在，由于您可能不想在每个文本框上一遍又一遍地重写相同的代码，因此您可能需要考虑创建一个`custom class`派生自`TextBox`AutoUpdateTextBox 或类似的东西，它具有与之相关联的所需 jQuery 内置。不要让它打印一堆 JavaScript，因为您只需要一个 JavaScript 函数一次，您可以向它传递参数，例如 TextBoxID 和 Value。

5.  最后，您需要一些处理程序来接受此 AJAX 调用并更新您的数据库。有五千万种方法可以创建一个。如果您使用的是 ASP.net Web 窗体，则可以创建一个 ASHX 处理程序并将适当的数据库保存逻辑（或数据层访问逻辑，更恰当地说）添加到该处理程序。处理程序不是页面，它充当 URL，只接受一些参数并返回任何结果。它不执行 asp.net LifeCycle。

    或者，如果使用 ASP.net MVC，您可以设置路由并让控制器处理此问题，然后只返回一个真/假值作为整个响应流，或者可能是 Ankur Singhal 的回答中建议的 JSON。使用 Web 表单可能更容易。

    您甚至可以创建 Web 服务或 WCF 服务，但您真正需要的只是一个基本的处理程序。

好吧，我希望这足以让您入门，而无需为您提供完整的解决方案。我列出的组件，如果您开始一个一个地查看它们，作为一个完整的集合，将完成您想做的事情。

如果我可以建议的话，在用户每次进入新文本框时不更新的情况下想办法做到这一点可能会更明智、更高效。您可以在页面上保留一个 JavaScript 对象，该对象在某个事件之后（假设用户单击页面上的“下一步”按钮，或者您提供“稍后保存”按钮）然后使用整个值触发 AJAX 请求表单发送到您的处理程序或 Web 服务。

我在上面的大纲中的关键是，我希望它是有意义的，当你有一个像你提到的那样的需求时，你想把它分解成不同的组件。随着您进行更多的编程，“如何将我的项目或想法分解成更小的部分”将变得更加容易。

一旦您对部分进行了概述，您就可以开始构建每个部分，然后当您遇到困难并就您遇到的问题提出具体问题时，SO 上的人们会很乐意提供帮助。

正如他们所说，“你怎么吃大象？ - 一次一口！” （我不知道有谁真正用大象来测试过，但你明白了......）

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:15:11.023

您可以使用 Web 服务并使用 Javascript 使用它们。还要在两者之间使用 JSON。

# image - 我可以使用图像在 Bootstrap 中触发模态窗口吗？

> ID：15423532
> 
> 赞同：3
> 
> 时间：2013-03-15T02:06:32.203
> 
> 标签：image, twitter-bootstrap, modal-window

真的很简单的问题。我需要使用图像，而不是让按钮触发模式窗口。我无法弄清楚执行此操作的代码。有小费吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T04:56:14.687

是的，您只需将标签包裹在图像周围。

```
<a href="#myModal" role="button" data-toggle="modal">

<img src="http://placehold.it/150x150"></a> 
```

这是一个活生生的例子：

[通过图像引导模式触发](http://jsfiddle.net/cwGcR/1/)

# c++ - boost::edge 导致段错误

> ID：15423535
> 
> 赞同：6
> 
> 时间：2013-03-15T02:06:40.947
> 
> 标签：c++, boost, boost-graph

我正在尝试使用 boost 图形库，当我尝试使用 boost::edge() 时出现段错误。完整的代码可[在此处](https://github.com/bgschiller/ninja-assassin-wonder-wall/blob/master/cpp_implementation/implication.cpp)获得，但在这里我制作了一个具有相同问题的最小程序（我正在使用“g++ minimum.cpp”进行编译）：

```
#include<stdio.h>
#include<boost/graph/adjacency_list.hpp>

using namespace boost;
using namespace std;

typedef adjacency_list<> graph_t;
typedef graph_traits<graph_t>::edge_descriptor edge_descriptor;

int main(){
    graph_t G;
    //add_edge(1,3,G);
    //remove_edge(1,3,G);
    pair<edge_descriptor, bool> res = edge(1,3,G);
    printf("G does %shave an edge 1->3\n", res.second ? "" : "not ");
    return 0;
} 
```

如果我取消注释 add_edge、remove_edge 行，则不会发生段错误，并且程序会打印预期的

```
G does not have an edge 1->3 
```

但是有没有办法避免这种黑客行为？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T14:29:29.313

显然，`add_edge(1,3,G)`如果需要，调用会向图中添加顶点。你的第一个电话就是在这种情况下。然后它将从顶点 1 的边添加到顶点 3。请注意，在此调用之后，顶点的数量为 4，因为顶点随后从 0 索引到 3。

随后的调用`remove_edge(1,3,G)`删除刚刚添加的边，但保持顶点数不变。

另一方面，调用`edge(1,3,G)`不会向图中添加任何顶点，返回中的布尔值用于说明顶点 1 和 3 是否连接。存在访问冲突，`add_edge`因为索引 1 和 3 处的顶点不存在，所以您将其删除。

您可以使用所需的顶点数简单地初始化图形：

```
graph_t G(4); 
```

# ftp - 如何在notepad++中快速上传文件到ftp相关路径？

> ID：15423536
> 
> 赞同：0
> 
> 时间：2013-03-15T02:06:50.587
> 
> 标签：ftp, notepad++

例如：我的本地文件路径是

```
d:/www/zencart/includes/pages/checkout_shipping/header_php.php 
```

ftp文件路径是

```
./htdocs/includes/pages/checkout_shipping/header_php.php 
```

当我在我的电脑中修改我的文件时，我想用我的本地文件更新我的 ftp 中的文件，如何快速完成这项工作？不要用ftp软件在ftp中找到相关路径再上传文件，这种方法太慢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:14:47.367

在与所有标准插件一起安装的最新版本的 Notepad++ 中，有一个内置的 mini-FTP 客户端。你可以在`Plugins > NppFTP`

第二个选项是在 Windows 资源管理器中添加网络位置并将其保存在那里，就像您将其保存在本地计算机上一样。

# ruby-on-rails-3 - rails seed 列顺序不正确

> ID：15423539
> 
> 赞同：0
> 
> 时间：2013-03-15T02:07:02.653
> 
> 标签：ruby-on-rails-3, database-schema

我正在尝试从 csv 文件中播种一个名为国家的表。其他种子按我指定的顺序工作，但这个种子按字母顺序生成一个 INSERT 语句，该语句未正确映射到 csv 文件中的字段。表国家有一个主键约束，但没有顺序或默认值。我也调用了 rake db:schema:dump，以防模式出现故障而没有运气。有任何想法吗？

**模型**

```
class Country < ActiveRecord::Base
  attr_accessible :id, :name, :abbreviation, :area, :population, :internet_users, :last_updated
end 
```

**架构.rb**

```
create_table "countries", :id => false, :force => true do |t|
    t.integer  "id",                           :null => false
    t.string   "name",           :limit => 50, :null => false
    t.string   "abbreviation",   :limit => 5,  :null => false
    t.integer  "area"
    t.integer  "population"
    t.integer  "internet_users"
    t.datetime "last_updated"
  end 
```

**CSV 样本**

```
1,Afghanistan,AF,"645,807","30,419,928","1,520,996",6/12/2013
2,Albania,AL,"28,748","2,986,952","1,441,928",12/11/2013
3,Algeria,DZ,"2,381,741","34,586,184","4,700,000",6/10/2013
4,American Samoa,AS,197,"67,242","3,040",3/11/2013 
```

**种子.rb**

```
@seedfilepath = "#{Rails.root}/db/seedfiles/" 
Country.delete_all
open(@seedfilepath + "countries.csv") do |records|
  records.read.each_line do |record|
    id, name, abbreviation, area, population, internet_users, last_updated = record.chomp.split(',')
    @country = Country.create!(id: id, name: name, abbreviation: abbreviation, area: area, population: population, internet_users: internet_users, last_updated: last_updated)
  end
end 
```

**错误**

```
$ rake db:seed
rake aborted!
PG::Error: ERROR:  value too long for type character varying(5)
: INSERT INTO "countries" ("abbreviation", "area", "id", "internet_users", "last_updated", "name", "population") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"
C:/Users/mmoore/Documents/rubyapps/visitdays/db/seeds.rb:14:in `block (2 levels) in <top (required)>'
C:/Users/mmoore/Documents/rubyapps/visitdays/db/seeds.rb:12:in `each_line'
C:/Users/mmoore/Documents/rubyapps/visitdays/db/seeds.rb:12:in `block in <top (required)>'
C:/Users/mmoore/Documents/rubyapps/visitdays/db/seeds.rb:11:in `<top (required)>'
Tasks: TOP => db:seed
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:10:10.663

对我来说，这个问题让我的机器或 rails 实例处于非常糟糕的状态。我不得不重新启动整个机器，而不仅仅是 rails 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T03:09:04.887

我建议您注释掉国家对象的创建，并首先检查您获得的值是否正确。我使用了您的示例文件并使用与您类似的代码运行它。没有错误。但是由于您以不同的顺序获取值（例如，您可能获取的是名称而不是缩写 - 因此出现错误）。您甚至可以先编写一个简单的 ruby​​ 脚本来读取此文件并打印值。其次，您可以使用[csv 模块](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)，它是一个标准的 ruby​​ 模块，用于处理来自 csv 文件的数据。

# javascript - Java 脚本密码提示不适用于 Safari

> ID：15423543
> 
> 赞同：0
> 
> 时间：2013-03-15T02:07:22.017
> 
> 标签：javascript, safari

我有一个小（非常简单和非常常见的）javascript密码验证脚本，我已经放置在不同的网页上。它的作用是在用户访问该脚本所在的页面时提示用户输入访问密钥。

这在 Chrome、IE、Firefox 和 Opera 上完全可以正常工作..但不知何故不能在 Safari 浏览器上工作..有什么我遗漏的吗？

这是 Java 脚本片段：

```
var password;

var pass1="12345abc";

password=prompt('Please enter the key provided!',' ');

if (password==pass1)
 alert('Access Granted!');
else
 {
 window.location="denied.html";
 } 
```

在 Safari 中，即使提供了正确的密码，它总是将用户带到 denied.html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:53:18.107

改变

`password=prompt('Please enter the key provided!',' ');`

至

`password=prompt('Please enter the key provided!');`

# javascript - 保存本地 javascript 更改

> ID：15423544
> 
> 赞同：0
> 
> 时间：2013-03-15T02:07:24.893
> 
> 标签：javascript, html, local-storage, web-storage

我试图弄清楚它是否可能以及如何将使用 javascript 对页面所做的更改保存到浏览器。

例如：我有一个隐藏菜单的开关。所以我隐藏我的菜单并离开页面。当我再次访问此页面时，我希望该菜单保持隐藏状态。截至目前，一旦我离开会话或刷新，我使用 Javascript 所做的任何更改都会消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:09:49.403

Not like you are thinking, no. There is no "remember this page state" flag or anything.

However, there is a way to store *data*. On modern browsers, [you can use `localStorage`](http://www.html5rocks.com/en/features/storage) to persist some choice or data the user makes. Then when the page is loaded, your javascript can read that data and then configure the page around.

For example:

```
$('#hide-stuff-button').click(function() {
  $('#stuff').hide();
  localStorage.hidden = true;
});

if (localStorage.hidden) {
  $('#stuff').hide();
} 
```

That script does 2 things. It saves some preference when you click a button, and when the page loads, it reads the saved state and does something to the page.

# regex - mod_rewrite 中的正则表达式匹配

> ID：15423550
> 
> 赞同：-1
> 
> 时间：2013-03-15T02:08:17.777
> 
> 标签：regex, mod-rewrite

我有一个 mod_rewrite 规则如下：

```
RewriteRule tshirt[s]*$ /thsirt.php 
```

这个想法是`myurl.com/tshirt`并且`myurl.com/tshirts`应该都重定向到`tshirt.php`.

`myurl.com/tshirt`按预期重定向，但`myurl.com/tshirts`404s。我试过清除缓存，尝试在不同的计算机上使用不同的浏览器，相同的行为。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:49:10.193

试着做

```
RewriteRule tshirt(s?)*$ /thsirt.php 
```

# r - segfault from C stack overflow

> ID：15423558
> 
> 赞同：3
> 
> 时间：2013-03-15T02:09:17.340
> 
> 标签：r

I am working on dataframe transformations and was working Arun and Ricardo on a previous post

[Previous Post](https://stackoverflow.com/questions/15419870/r-data-transformations?noredirect=1#comment21805488_15419870)

Arun, suggested a brilliant solution ( matrix multiplication ) to achieve what i was trying to do.

That solution worked for a small data set like what i mentioned in the example, now i am running the same solution on a data frame which has the following sizes:

```
Total rows: 143345
Total Persons: 98461
Total Items :  30 
```

Now, when i run the following command

```
 A <- acast(Person~Item+BorS,data=df,fun.aggregate=length,drop=FALSE) 
```

I get this error..

```
Error: segfault from C stack overflow 
```

Is this because, i dont have enough processing/memory power. My machine has 4 GB RAM, 2.8 GHz i7 processor ( Macbook) ? How do we handle these type of cases ?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:46:47.653

一个`data.table`解决方案。这是通过首先聚合，然后创建新的 data.table 并通过引用填充来实现的

```
library(data.table)

# some sample data
DT <- data.table(Person = sample(98461, 144000, replace = TRUE), item = sample(c(letters,LETTERS[1:4]), 144000, replace = TRUE), BorS = sample(c('B','S'), 144000, replace = TRUE))
# aggregate to get the number of rows in each subgroup by list item and BorS 
# the `length` of each subgroup
DTl <- DT[,.N , by = list(Person, item, BorS)]
# the columns you want to create
newn <- sort(DT[, do.call(paste0,do.call(expand.grid,list(unique(item),unique(BorS) )))])
# create a column which has this id combination in DTl
DTl[, comnb := paste0(item, BorS)]
# set the key so we can join / subset easily
setkey(DTl, comnb)
# create a data.table that has 1 row for each person, and has  columns for all the combinations
# of item and BorS
DTb <- DTl[, list(Person)][, c(newn) := 0L]
# set the key so we can join / subset easily
setkey(DTb, Person)
# this bit could be far quicker, but I think
# would require a feature request to data.table
for(nn in newn){
  # for each of the cominations extract which persons have
  # this combination >0
  pp <- DTl[list(nn), list(Person,N)]
  # for the people who have N > 0
  # assign the correct numbers in the correct column in DTb
  DTb[list(pp[['Person']]), c(nn) := pp[['N']]]
} 
```

`DTb`要完成您的初始问题，您可以从矩阵中提取适当的列

```
A <- DTb[,-1,with = FALSE]

results <- crossprod(A) 
```

# jquery - jquery flip switch not working using jquery-toggles

> ID：15423559
> 
> 赞同：2
> 
> 时间：2013-03-15T02:09:19.863
> 
> 标签：jquery, css, toggle

I have created a simple example of using Simon Tabor's "jquery-toggles" plugin ([https://github.com/simontabor/jquery-toggles](https://github.com/simontabor/jquery-toggles)). And although it works, the graphics never show up. I confirmed the CSS and JS is loading fine, yet still no images. Can someone figure out why?

```
<html>
  <head>
    <link rel="stylesheet" href="/include/jquery-toggles-master/themes/toggles-light.css">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="/include/jquery-toggles-master/toggles.min.js"></script>
    <script>
      $(document).ready(function () {
        $('.toggle').toggles();
        });
    </script>
  </head>
  <body>
    <div class="toggle toggle-select" data-type="select"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T02:41:42.680

You need to wrap your toggle with the proper theme.

```
<div class="toggle-light">
  <div class="toggle toggle-select" data-type="select"></div>
</div> 
```

Example: [http://jsbin.com/okupof/2/edit](http://jsbin.com/okupof/2/edit)

If you view the source of [http://simontabor.com/labs/toggles/](http://simontabor.com/labs/toggles/) then you'll see more examples in `<div class="themes">`

# java - Java how to use an image within a jar file

> ID：15423560
> 
> 赞同：0
> 
> 时间：2013-03-15T02:09:30.297
> 
> 标签：java, embedded-resource

I was making a game using a JFrame that would load an image to be displayed. Then when I tried to run the program, it didn't find the image in the jar. So, how do you retrieve a file from within a jar? Is it `/img.png` or `img.png` or even `\\img.png`? I just don't know how paths in java work yet.

(Edit) Figured it out.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:20:23.227

/img.png 是正确的。你是如何尝试加载它的？您需要使用知道该 JAR 文件的类加载器来获取图像文件。

试试这个方法：

[http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String)](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream(java.lang.String))

尝试这样的事情，假设 JAR 文件在你的类路径中。

```
public class MyClass {
    public static void main(String[] args) {
        InputStream is = MyClass.class.getClassLoader().getResourceAsStream("/img.png");
        // read in the data stream
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:21:28.143

例如，这是jar文件结构

![Jar 文件结构](../Images/36e002a4b5e9ea1982bd048813b19802.png)

确保 jar 在类路径中，然后像这样编码

```
String file01="tom.txt";
String file02="com/paic/jerry.txt";  
InputStream tom=this.getClass().getClassLoader().getResourceAsStream(file01);
InputStream jerry=this.getClass().getClassLoader().getResourceAsStream(file02); 
```

# php - SQL Multiple columns

> ID：15423563
> 
> 赞同：0
> 
> 时间：2013-03-15T02:09:43.113
> 
> 标签：php, sql

I have this code:

```
<?php
          $get_news = $db->query("SELECT * FROM news WHERE category = 1 ORDER BY id DESC limit 5");
          $array = $db->assoc($get_news);
          $num = $db->num($get_news);

          if ($num == 0) {
              echo "<div class=\"title\">No news found!</div>";
              }

           while($row = mysql_fetch_array($get_news)){
          ?>

               <div class="blue box">
                 <div class="title"><?php echo $array['title'];?></div>
                   <div class="content">

                    <img src="panel/_news/<?php echo $array['image'];?>" style="max-width: 150px;max-height:150px;" alt=\"\" align="center">

            <div style="margin-top: 14px;">
               <div class="readmore">By <?php echo $array['poster'];?></div>
               <div class="date"><?php echo $array['date'];?></div>

              </div>
        </div>
    </div>
        <?php } ?> 
```

and basically, I'm trying to make it show 3 news posts, but it shows the same one, do you guys know what it is that I'm doing wrong in the SQL?

This is what it shows: [http://screencloud.net/v/5ENE](http://screencloud.net/v/5ENE)

I have more than 3 articles in the database, but it's showing the 1 3 times.. Can you guys help?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T02:11:19.793

You're mixing two different API's.

You need to reference `$row` not `$array`. Something like:

```
while ($row = $db->assoc($get_news)) {
?>
           <div class="blue box">
             <div class="title"><?php echo $row['title'];?></div>
<?php
} 
```

# constructor - 关于 BufferedReader 的一些问题

> ID：15423570
> 
> 赞同：1
> 
> 时间：2013-03-15T02:10:17.970
> 
> 标签：constructor, bufferedreader, filereader

```
 import java.io.*; 
```

公共类 BufferedReaders {

```
 public static void main(String args[]) {
    try {
      BufferedWriter bw = new BufferedWriter(new FileWriter("e:/test/exercise/BufferedWriter.txt"));
      java.io.BufferedReader bd = new BufferedReader(new FileReader("e:/test/exercise/BufferedWriter.txt"));    // The constructor BufferedReader(FileReader) is undefined.***Why?Thanks for your answers!!!***
      String s = null;
      for (int i = 0; i < 10; i++) {
        s = String.valueOf(Math.random());
        bw.write(s);
        bw.newLine();
      }
      bw.flush();
      while ((s = bd.readLine()) != null) {
        System.out.print(s);
      }
      bw.close();
      bd.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
  }                          
} 
```

构造函数 BufferedReader(FileReader) 未定义。但是我只是在我的书中找到了代码并进行了测试，我不知道为什么。感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:19:06.960

不，那个代码很好。`BufferedReader`需要 a `Reader`，其中`FileReader`是一个 - 它来自`InputStreamReader`，它来自`Reader`.

我将该代码输入到 Eclipse 中，它运行良好：

```
java.io.FileNotFoundException: e:/test/exercise/BufferedWriter.txt (No such file or directory)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:209)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:99)
    at java.io.FileWriter.<init>(FileWriter.java:63)
    at Test.main(Test.java:6) 
```

好吧，除了它无法打开文件（特别是因为`e:`我的 Debian 盒子上没有驱动器）之外，但这不是语法错误。

所以你有一个*不同*的问题。如果这不是整个代码，那么您可能有另一种`BufferedReader`类型干扰 Java 类型（无论多么不可能或邪恶） - 您也可以通过在之后使用完全限定类型来测试它`new`：

```
java.io.BufferedReader bd = new java.io.BufferedReader ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-10T18:14:00.107

我将您的代码复制到 Eclipse 中并编写了一些导入语句，它可以工作。

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;

public class BufferedReaders {    
public static void main(String args[]) {
    try {
      BufferedWriter bw = new BufferedWriter(new FileWriter("e:/test/exercise/BufferedWriter.txt"));
      java.io.BufferedReader bd = new BufferedReader(new FileReader("e:/test/exercise/BufferedWriter.txt"));  
      String s = null;
      for (int i = 0; i < 10; i++) {
        s = String.valueOf(Math.random());
        bw.write(s);
        bw.newLine();
      }
      bw.flush();
      while ((s = bd.readLine()) != null) {
        System.out.print(s);
      }
      bw.close();
      bd.close();
    } catch (IOException e) {
      e.printStackTrace();
    }
 }                          
} 
```

# css - @keyframes when hovering

> ID：15423571
> 
> 赞同：0
> 
> 时间：2013-03-15T02:10:18.120
> 
> 标签：css, css-transitions, css-animations

What I'm trying to do: I have links in a black box. I'm trying to make the background of the box turn from black to blue when hovering. I'm not sure how to do this. Here is my CSS (I have it set to 5s but I really want it to take effect when hovering)

```
@keyframes navBox
{
from {background: #000;}
to {background: #1821BC;}
}

@-moz-keyframes navBox /* Firefox */
{
from {background: #000;}
to {background: #1821BC;}
}

@-webkit-keyframes navBox /* Safari and Chrome */
{
from {background: #000;}
to {background: #1821BC;}
}

nav li
{
 animation: navBox 5s;
 -moz-animation: navBox 5s;
 -webkit-animation: navBox 5s;
} 
```

![]picture of link box[1](http://i.stack.imgur.com/H8KgK.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:14:00.860

If you just want to just animate one time from one color to another, you should use transitions instead of animations:

```
nav li {
    -webkit-transition: color 1s;
    transition: color 1s;
}
nav li:hover {
    color: blue;
} 
```

In action: [http://jsfiddle.net/ExplosionPIlls/bZXB8/](http://jsfiddle.net/ExplosionPIlls/bZXB8/)

# java - Creating simple collision detection

> ID：15423573
> 
> 赞同：1
> 
> 时间：2013-03-15T02:10:30.760
> 
> 标签：java, collision-detection

I've created a very simple program where I drew a maze using paint (the method `fillRect` was used to create the walls of the maze), and I've created a sprite that is moved using `keyListener`. I want to implement a simple (as I'm in my first year of commuter science) collision detection to keep the sprite from moving through the walls of the maze. Because the maze is drawn in almost 400 lines of code, I won't include it.

```
import java.awt.*;
import java.applet.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;

public class IndeProj extends Applet implements KeyListener {

    //KEY LISTENER INFO FOR MY SPRITE
    public int x = 10;
    public int y = 575;
    public boolean keyUp;  
    public boolean keyDown;  
    public boolean keyLeft;  
    public boolean keyRight;

    public void paint(Graphics g) {
        //drawMaze
        drawMazeHorizontalLines(g);
        drawMazeVerticalLines(g);

        //SPRITE STUFF
        addKeyListener(this);
        this.MoveRect(g,x,y);

    }

    public void drawMazeHorizontalLines(Graphics g)
    {
        //This method draws the horizontal lines of the maze using the method `fillRect(x,y,w,h)`
    }

    public void drawMazeVerticalLines (Graphics g)
    {
        //This method draws the vertical lines of the maze using `fillRect(x,y,w,h)`
    }

    public void MoveRect(Graphics g, int x, int y) //Draws Sprite   
    {
        g.setColor(Color.green);
        g.fillRect(x,y,20,20);
        g.setColor(Color.yellow); //Sprite body
        g.fillRect(x,y,20,20);
        g.setColor(Color.green); //Sprite eyes
        g.fillRect(x,y,7,7);
        g.fillRect((x+13),y,7,7);
        g.setColor(Color.blue); //Sprite pants
        g.fillRect(x,(y+13),20,7);
        g.setColor(Color.black); //Sprite mouth
        g.fillRect((x+6),(y+9),8,2);
    }

    public void keyPressed(KeyEvent e) //Moves Sprite
    {
        if (e.getKeyCode() == KeyEvent.VK_DOWN) {
            y+=1;
            y+=0;
        } if (e.getKeyCode() == KeyEvent.VK_UP) {
            y-=1;
            y-=0;
        } if (e.getKeyCode() == KeyEvent.VK_LEFT) {
            x-=1;
            x-=0;
        } if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
            x+=1;
            x+=0;
        }
        repaint();
    }
    public void keyReleased(KeyEvent e) //Stops Sprite  
    {   
         keyUp = keyDown = keyLeft = keyRight = false;
    }
} 
```

I want to make it so that the sprite stops when it hits a wall (using `x` and `y` coordinates), the sprite will stop moving.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:26:13.180

这是一种简单的碰撞检测方法，地图是一个整数网格，每个整数都有它包含的墙。如果你做错了，你会得到神奇的单向墙。

```
/* could use enums for this */
public static int WALL_LEFT = 1;
public static int WALL_RIGHT = 2;
public static int WALL_TOP = 4;
public static int WALL_BOTTOM = 8;

public int[][] createSimpleMap(){
    int[][] map = new int[2][2];
    map[0][0] = WALL_LEFT | WALL_RIGHT | WALL_TOP;
    map[0][1] = WALL_LEFT | WALL_RIGHT | WALL_TOP;
    map[1][0] = WALL_LEFT | WALL_BOTTOM;
    map[1][1] = WALL_RIGHT | WALL_BOTTOM;
    return map;
} 
```

要进行碰撞检测，只需检测墙壁是否存在。

```
public boolean canMoveUp(x,y){
    return (this.map[x][y] & WALL_TOP) ==0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:47:29.797

如果您的小程序是双缓冲的，那么您可以在它们移动之前执行以下操作：

```
Color c = new Color(buffer.getRGB(desiredPlayerX, desiredPlayerY));
if(c.equals(<Whatever color you used for the maze walls>)){
    // Don't allow the movement of the player
}else{
    x = desiredPlayerX;
    y = desiredPlayerY;
} 
```

这种方法确实看起来有点“hacky”，我确信有更好的方法来实现它，但这是一个可能的快速解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:41:52.880

我会这样做的方式是使用矩形碰撞盒。playerX 和 playerY 是玩家的坐标：

```
while(true) {
    while(!((playerX > 50 && playerX < 100) && (playerY > 50 && playerY < 100))){
        //Put code to let they players walk here, and boundaries will be enforced.
    }
} 
```

那将是一个矩形框，您不能进入其边界。

# android - Suppose I want to just run the android emulator *as a phone* on my desktop

> ID：15423576
> 
> 赞同：0
> 
> 时间：2013-03-15T02:11:05.250
> 
> 标签：android, macos

Suppose I have a MacBook Pro, but I don't have an Android phone and I just want to run Android apps in the emulator on my desktop; I don't want it to make phone calls, but I do want it to talk to the internet and install apps (so I can use them). Is there an easy way to do this without spending hours reading Android SDK docs? I used to run the Android SDK emulator while I was developing an app for it and now it seems much more complex.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:27:30.653

您在模拟器中有完整的互联网连接。但是要安装应用程序，您需要一些东西……</p>

*   您需要 APK 文件。[使用Android Debug Bridge](http://developer.android.com/tools/help/adb.html) ( )在 konsole/ 终端中安装 APK 很容易`adb`：

    ```
    $ cd /path-to-Android-SDK/platform-tools
    $ adb install /path-to-APK-file 
    ```

*   如果您想在 Google Play 上使用应用程序，则需要应用程序 Play Store。不幸的是，谷歌不为模拟器提供它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:36:25.867

要`Goolge Play`在桌面上运行应用程序，请使用运行 Android Gingerbread 2.3 的软件[Blue Stacks](http://www.bluestacks.com/)，并且运行良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:36:55.667

基本上，为了在您的模拟器中运行应用程序，它需要支持 Google Play 服务，并且目前在任何当前支持的模拟器版本中都不可用（无论您使用哪个系统映像）。

有一些技巧可以实现这一点，但你需要付出一些努力才能让它工作（它确实需要一些额外的步骤，我从来没有工作过）。

# c++ - Accepting a connection with ACE_SOCK_Acceptor

> ID：15423579
> 
> 赞同：0
> 
> 时间：2013-03-15T02:11:14.297
> 
> 标签：c++, network-programming, ace

I just started to learn ACE. I tried some of their simple examples and ran into a problem. This is my code:

```
int _tmain(int argc, _TCHAR* argv[])
{
    ACE_INET_Addr server_addr;
    ACE_SOCK_Acceptor acceptor;
    ACE_SOCK_Stream stream;

    if(server_addr.set(8888) == -1) return 1;
    if(acceptor.open(server_addr, 1) == -1) return 1;
    ....
} 
```

It always return -1 when I call `acceptor.open(...)`. I'm a bit new to network programming. There isn't anything wrong with the code as far as I can tell. I'm programming on a laptop with Wi-fi, does that make a difference? Also I have firewall turned on. (Tried turning it off, no difference).

This is the server side program. Do I have to configure my computer somehow?

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T22:55:26.173

仅供参考，这是[您可以在网上找到的教程](http://www.cs.wustl.edu/~schmidt/tutorials-ace.html)列表。我建议使用 Reactor 框架，示例在**$ACE_ROOT\examples\Reactor\TP_Reactor 下**

但是谈到你的问题，你不需要使用 set() 而只是使用构造函数：

```
#include <ace/ACE.h>
#include <ace/SOCK_Acceptor.h>
#include <ace/INET_Addr.h>
#include <ace/Log_Msg.h>

int main(int argc, char *argv[])
{
  ACE_SOCK_Acceptor acceptor;
  ACE_INET_Addr server_addr(8888);

  // open a port using the acceptor; reuse the address later
  if (acceptor.open(server_addr, 1) == -1)
  {
    ACE_ERROR_RETURN((LM_ERROR, ACE_TEXT("%N:%l: Failed to open ")
                      ACE_TEXT ("listening socket. (errno = %i: %m)\n"), ACE_ERRNO_GET), -1);
  }

  // ...

  return 0;
} 
```

# android - Error Trapping Error

> ID：15423580
> 
> 赞同：0
> 
> 时间：2013-03-15T02:11:14.437
> 
> 标签：android, error-handling

Trying to catch a null or 0 input. If a null input is made, the app crashes, if a 0 is input, it passes through the error and returns strange math!

```
case_cost = (EditText) findViewById(R.id.case_cost);
dilution = (EditText) findViewById(R.id.dilution);
answer =(TextView) findViewById(R.id.answer);
ounces_pc = (TextView) findViewById(R.id.ounces_pc);

Button finishBtn = (Button) findViewById(R.id.button3);
finishBtn.setOnClickListener (new View.OnClickListener() {
    @Override
        public void onClick(View v) {
        // TODO Method 
        if (((Float.valueOf(dilution.getText().toString())) == 0) ||   
                         (dilution.getText().equals(null)))   {

    String errMsg = "Missing Dilution";
        answer.setText(errMsg);

    }   else; 
```

Debug Info:

```
StringToReal.invalidReal(String, boolean) line: 63  
StringToReal.parseFloat(String) line: 289   
Float.parseFloat(String) line: 300  
Float.valueOf(String) line: 337 
UccActivity$1.onClick(View) line: 47    
Button(View).performClick() line: 4102  
View$PerformClick.run() line: 17063 
Handler.handleCallback(Message) line: 615   
ViewRootImpl$ViewRootHandler(Handler).dispatchMessage(Message) line: 92 
Looper.loop() line: 155 
ActivityThread.main(String[]) line: 5454    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not   
available [native method]   
Method.invoke(Object, Object...) line: 511  
ZygoteInit$MethodAndArgsCaller.run() line: 1029 
ZygoteInit.main(String[]) line: 796 
NativeStart.main(String[]) line: not available [native method]  
Thread [<10> Binder_2] (Running)    
Thread [<9> Binder_1] (Running)" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:26:33.170

您应该在检查值之前检查 Null。否则，当它检查 0 并且值为 Null 时，它将抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:33:58.527

这种方法将允许您输入无效的字符串（字母）并且不会崩溃（您将按原样进行）。此外，您的 0 检查不起作用，因为您将 int 与 float 进行比较..您应该使用 0f

```
String text = dilution.getText().toString();
if (TextUtils.isEmpty(text)) {
  answer.setText("Empty input");
  return;
}

try {
    Float value = Float.valueOf(text);

    if (value == null || value == 0f) {
        answer.setText("Zero");
    }
} catch (NumberFormatException e) {
    answer.setText("Invalid input");
} 
```

# .net - 区分日语数字格式

> ID：15423581
> 
> 赞同：4
> 
> 时间：2013-03-15T02:11:17.623
> 
> 标签：.net, string, string-comparison

在 .NET 中，我需要（如果可能）区分不同类型的日语数字字符串。

在日语中，数字字符串可以用不同的方式书写，例如，半角字符中`"1"`有`"1"`、`"ⅰ"`、`"Ⅰ"`、 。`"①"`

我需要比较和之类的字符串`"MyString1"`，`"MyString①"`并且由于明显的原因它们不相等。我想知道是否有一种方法可以自动将`"①"`类型字符更改为`"1"`自动？

编辑

我知道显而易见的答案是列出所有可能的“①”类型字符（这些字符的数量是有限的）并在目标字符串中替换它们。但在我看来，这不是一种非常“好”的方式，也不是很健壮......所以如果有一种通用的方式，我宁愿使用它。

编辑

抱歉，我之前写过那个机器人`"①"`并且`"1"`被认为是数字，但它们不是。IsNumeric`"①"`出现为假。所以我想除了使用直接替换之外，实际上可能根本没有办法从一个切换到另一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:40:37.423

[fileformat.info](http://fileformat.info/)告诉我，[带圆圈的数字](http://www.fileformat.info/info/unicode/char/2460/index.htm)可以分解为常规数字。[在 ideone](http://ideone.com/QhSupD)中对此进行研究表明，将在 .NET 中实现这一目标的[规范化形式](http://msdn.microsoft.com/en-us/library/system.text.normalizationform.aspx)是 KC 或 KD：

```
var one  = "①";
Console.WriteLine(one);

Console.WriteLine(one.Normalize(NormalizationForm.FormC)); // ①
Console.WriteLine(one.Normalize(NormalizationForm.FormD)); // ①

Console.WriteLine(one.Normalize(NormalizationForm.FormKC)); // 1
Console.WriteLine(one.Normalize(NormalizationForm.FormKD)); // 1 
```

也就是说，需要注意的是，规范化字符串也可能会破坏您希望保持原样的其他字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:37:00.857

好的，玩弄我发现我可以将“①”转换为它的数值（`"1"`）的东西`Char.GetNumericValue()`，这很有趣，因为`IsNumeric("①")`出现了`False`。

这似乎也适用于“ⅰ”和“Ⅰ”（不是字母，而是“1”的日语数字格式）

我希望我能更多地了解文化变化......

# jquery - 使用 jQuery 隐藏和显示列表菜单项

> ID：15423583
> 
> 赞同：0
> 
> 时间：2013-03-15T02:11:29.300
> 
> 标签：jquery, html, css, menu

我有使用如下列表元素的简单垂直菜单

```
<ul id="leftNav">
    <li id="home"><a href="/index.html">Home</a>
    </li>
    <li id="apples"><a href="/category/apples.html">Apples</a>

        <ul class="subMenu">
            <li><a href="/category/red-apples.html">Red Apples</a>
            </li>
            <li><a href="/category/green-apples.html">Green Apples</a> 
            </li>
            <li><a href="/category/golden-apples.html">Golden Apples</a>
            </li>
        </ul>
    </li>
    <li id="grapes"><a href="/category/grapes.html">Grapes</a>

        <ul class="subMenu">
            <li><a href="/category/red-grapes.html">Red Grapes</a>
            </li>
            <li><a href="/category/green-grapes.html">Green Grapes</a>
            </li>
            <li><a href="/category/black-grapes.html">Black Grapes</a>
            </li>
        </ul>
    </li>
    <li id="dry-fruits"><a href="/category/dry-fruits.html">Dry Fruits</a>

        <ul class="subMenu">
            <li id="subParent1"><a href="#">Fruits That Are Dried</a>

                <ul class="subMenu1">
                    <li><a href="/category/figs.html">Figs</a>
                    </li>
                    <li><a href="/category/dates.html">Dates</a>
                    </li>
                    <li><a href="/category/pineapples.html">Pine Apples</a>
                    </li>
                </ul>
            </li>
            <li id="subParent2"><a href="#">Nuts and Seeds</a>

                <ul class="subMenu1">
                    <li><a href="/category/chestnuts.html">Chestnuts</a>
                    </li>
                    <li><a href="/category/almonds.html">Almonds</a>
                    </li>
                    <li><a href="/category/walnuts.html">Walnuts</a>
                    </li>
                </ul>
            </li>
            <li id="subParent3"><a href="/category/bananas.html">Bananas</a>
            </li>
        </ul>
    </li>
    <li id="sale" class="expanded"><a href="/category/sale.html">Sale</a>

</ul> 
```

我想要做的是当点击苹果或其子项目时，我试图保持列表的这些部分展开等等，所以当点击葡萄或其子项目时，除了葡萄部分之外，所有其他都应该关闭。

我尝试使用下面的代码，但由于 Apples 和 Grapes 是呈现各自页面的链接，所以下面的代码不起作用。

```
$(document).ready(function() {
    $("#apples .subMenu").css("display", "block");
}); 
```

任何帮助或示例或建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:28:56.847

```
 <script type="text/javascript">
      $(document).ready(function() {
         $("#apples > a").on('click',function(e){
            $('#apples .subMenu ').toggle();
            return false;
         });
      }); 
   </script> 
```

[http://jsfiddle.net/makedone/WRcBa/](http://jsfiddle.net/makedone/WRcBa/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T23:47:33.613

您不断地重新加载页面 - 并且 javascript 也会重新加载。如果您想在请求之间保存菜单的状态，请使用 cookie。

或者这里是一个没有重新加载页面的版本——那么你必须使用 Ajax。

```
<script type="text/javascript">
$(document).ready(function() {

    $('#left-navigation a').click(function(){
     return false;
    });

    $(".parent-grapes > a, .parent-apples > a, .parent-dry-fruits > a").click(function () {
    var $block = $(this).parent().find(".sub-menu");
    $block.toggle();

    $.get($(this).attr('href'), function(data){
      $('#main-content').html($(data).find('#main-content').html());
    });
    return false;
    });
});
</script> 
```

菜单只需要这个 javascript（和 JQuery）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:39:47.610

试试这个。它对我有用..

谢谢！@leo。

```
 <script type="text/javascript">
      $(document).ready(function() {
            hideAll();

             $("#leftNav li a").click( function(e) {
               try {

                  var pid = $(this).parent('li').attr("id");
                  //alert(pid);
                  if(pid == undefined) {

                  } else {
                    hideAll();
                    $("#" + pid + " .submenu").show();
                    e.preventDefault();
                  }

               } catch(e) {
                alert("oops!");
               }
            });
        }); 

        function hideAll() { 
             $(".subMenu").hide();
        }

  </script> 
```

# google-plus - Google Plus API Moment.Insert

> ID：15423585
> 
> 赞同：3
> 
> 时间：2013-03-15T02:11:36.707
> 
> 标签：google-plus, google-api-dotnet-client

我正在尝试使用 google-api-dotnet-client 的 moment.insert 并且还在 oauth 请求中包含 request_visible_actions 和 access_type 但我总是遇到异常：

**字典中不存在给定的键。**

这是堆栈跟踪：

```
 at System.Collections.Generic.Dictionary`2.get_Item(TKey key)
   at Google.Apis.Discovery.BaseService.GetResource(IResource root, String fullResourceName) in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Discovery\Service.cs:line 279
   at Google.Apis.Discovery.BaseService.CreateRequest(String resource, String methodName) in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Discovery\Service.cs:line 186
   at Plus.v1.PlusService.CreateRequest(String resource, String method)
   at Google.Apis.Requests.ServiceRequest`1.BuildRequest() in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Requests\ServiceRequest.cs:line 134
   at Google.Apis.Requests.ServiceRequest`1.GetAsyncResponse(Action`1 responseHandler) in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Requests\ServiceRequest.cs:line 169
   at Google.Apis.Requests.ServiceRequest`1.GetResponse() in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Requests\ServiceRequest.cs:line 185
   at Google.Apis.Requests.ServiceRequest`1.Fetch() in c:\code.google.com\google-api-dotnet-client\default\Tools\BuildRelease\bin\Debug\12-20-2012\default\Src\GoogleApis\Apis\Requests\ServiceRequest.cs:line 211
   at VocalbeeWebApp.Controllers.HomeController.CheckGooglePlusAuthorization() in d:\Projects\VocalBee\VocalBeeSocialServer-T\VocalbeeWebApp\VocalbeeWebApp\Controllers\HomeController.cs:line 217 
```

以下是 moment.insert 的代码片段：

```
 Google.Apis.Plus.v1.Data.Moment body = new Google.Apis.Plus.v1.Data.Moment();
            Google.Apis.Plus.v1.Data.ItemScope target = new Google.Apis.Plus.v1.Data.ItemScope();

            target.Id = "target-id";
            target.Image = "http://www.vocalbee.com/Images/WebLogoNewSmall.png";
            target.Type = "http://schemas.google.com/AddActivity";
            target.Description = "The description for the activity";
            target.Name = "An example of add activity";

            body.Target = target;
            body.Type = "http://schemas.google.com/AddActivity";
            Google.Apis.Plus.v1.MomentsResource.InsertRequest insert =
                new Google.Apis.Plus.v1.MomentsResource.InsertRequest(
                    pw.plusService,
                    body,
                    me.Id,
                    Google.Apis.Plus.v1.MomentsResource.Collection.Vault);
            Google.Apis.Plus.v1.Data.Moment result = insert.Fetch(); 
```

有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T11:16:54.730

看起来您可能正在使用旧版本的库。最新版本可从此处获得：

*   [Google+ 下载](https://developers.google.com/+/downloads/)
*   [Google+ .NET 客户端库](https://developers.google.com/resources/api-libraries/download/plus/v1/csharp)

确保将所有较旧的客户端库依赖项替换为较新的依赖项。您至少应该替换以下现有版本：

*   Google.Apis.dll
*   Google.Apis.Plus.v1.dll

[Google+ 快速入门演示 (C#/.NET)](https://github.com/googleplus/gplus-quickstart-csharp/blob/master/gplus-quickstart-csharp/signin.ashx.cs)中提供了离线刷新令牌的示例

# objective-c - Attribute decoration and reflection in objective-c

> ID：15423589
> 
> 赞同：0
> 
> 时间：2013-03-15T02:13:06.427
> 
> 标签：objective-c

Is their anyway to add decoration to properties in objective-c, that can be discovered during run-time using reflection? I would like to define the following class

```
@interface ABC{}

@property (nonatomic, copy) NSString * s1;
@property (nonatomic, copy) NSString * s2;
@property (nonatomic, copy) NSString * s3; 
```

I would like to add some kind of attribute for the properties s1 and s2, so I can discover these properties during run-time and perform some operation, which is not applicable to s3. So something like

[Run-Time_Discover] @property (nonatomic, copy) NSString * s1;

I know that Tnterface builder, uses IBOutlet for discovering properties. Can I discover properties defined by some such macro during run-time?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:16:42.290

你可以检查一个对象是否实现了一个方法（记住，属性只是方法），如下所示：

`[theObject respondsToSelector:@selector(s3)];`

这里不需要注释。

# javascript - TypeError: events.replace 不是函数 JqueryWebcam 插件

> ID：15423592
> 
> 赞同：0
> 
> 时间：2013-03-15T02:13:15.043
> 
> 标签：javascript, jquery, jquery-webcam-plugin

![在此处输入图像描述](../Images/8c21cfbb5642061a8d0c26d6f9b4c775.png)出于某种奇怪的原因，我开始收到此错误**`TypeError: events.replace is not a function`**。我正在使用 Jquery 网络摄像头插件，我能够在片刻之前看到 flash 播放器摄像头，直到我重新编译了代码并得到了这个错误。下面是我导入的脚本：

**脚本**

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script> 

    <script src="<%=request.getContextPath()%>/resources/js/jQuery-webcam/jquery.webcam.js"></script>
    <script src="<%=request.getContextPath()%>/resources/js/citizen_registration.js"></script>

    <link href="<c:url value="/resources/css/forms.css" />" rel="stylesheet" type="text/css" media="screen" />
    <link href="<c:url value="/resources/css/citizen_registration.css" />" rel="stylesheet" type="text/css" media="screen" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:26:12.593

我将 jquery 插件更新为`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>`

# php - PHP XML Expat 解析器：如何只读取 XML 文档的一部分？

> ID：15423594
> 
> 赞同：4
> 
> 时间：2013-03-15T02:13:49.503
> 
> 标签：php, xml, expat-parser

我有一个具有以下结构的 XML 文档：

```
<posts>
<user id="1222334">
  <post>
    <message>hello</message>
    <client>client</client>
    <time>time</time>
  </post>
  <post>
    <message>hello client how can I help?</message>
    <client>operator</client>
    <time>time</time>
  </post>
</user>
<user id="2333343">
  <post>
    <message>good morning</message>
    <client>client</client>
    <time>time</time>
  </post>
  <post>
    <message>good morning how can I help?</message>
    <client>operator</client>
    <time>time</time>
  </post>
</user>
</posts> 
```

我能够创建解析器并打印出整个文档，但问题是我只想打印（用户）节点和具有特定属性（id）的子节点。

我的 PHP 代码是：

```
if( !empty($_GET['id']) ){
    $id = $_GET['id'];
    $parser=xml_parser_create();
    function start($parser,$element_name,$element_attrs)
      {
    switch($element_name)
        {
        case "USER": echo "-- User --<br>";
        break;
        case "CLIENT": echo "Name: ";
        break;
        case "MESSAGE": echo "Message: ";
        break;
        case "TIME": echo "Time: ";
        break;
        case "POST": echo "--Post<br> ";
        }
  }

function stop($parser,$element_name){  echo "<br>";  }
function char($parser,$data){ echo $data; }
xml_set_element_handler($parser,"start","stop");
xml_set_character_data_handler($parser,"char");

$file = "test.xml";
$fp = fopen($file, "r");
while ($data=fread($fp, filesize($file)))
  {
  xml_parse($parser,$data,feof($fp)) or 
  die (sprintf("XML Error: %s at line %d", 
  xml_error_string(xml_get_error_code($parser)),
  xml_get_current_line_number($parser)));
  }
xml_parser_free($parser);
} 
```

在`start()`函数中使用 this 可以选择正确的节点，但对读取过程没有任何影响：

```
 if(($element_name == "USER") && $element_attrs["ID"] && ($element_attrs["ID"] == "$id")) 
```

任何帮助，将不胜感激

**更新：** XMLReader 工作，但使用 if 语句时它停止工作：

```
foreach ($filteredUsers as $user) {
echo "<table border='1'>";
foreach ($user->getChildElements('post') as $index => $post) {

    if( $post->getChildElements('client') == "operator" ){
    printf("<tr><td class='blue'>%s</td><td class='grey'>%s</td></tr>", $post->getChildElements('message'), $post->getChildElements('time'));
    }else{
    printf("<tr><td class='green'>%s</td><td class='grey'>%s</td></tr>", $post->getChildElements('message'), $post->getChildElements('time'));

    }
}
echo "</table>";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T23:09:23.550

正如前面评论中所建议的，您也可以使用[`XMLReader`^(*Docs*)](http://php.net/XMLReader)。

> XMLReader 扩展是一个 XML Pull 解析器。阅读器充当文档流上的光标，并在途中的每个节点处停止。

`XMLReader`它是一个可以打开文件的类（同名：）。默认情况下，您用于`next()`移动到下一个节点。然后，您将检查当前位置是否在一个元素上，然后检查该元素是否具有您要查找的名称，然后您可以处理它，例如通过读取元素[`XMLReader::readOuterXml()`^(*Docs*)](http://php.net/XMLReader.readOuterXml)的外部 XML 。

与 Expat 解析器中的回调相比，这有点繁琐。为了获得更大的灵活性，`XMLReader`我通常会自己创建[能够处理`XMLReader`对象并提供所需步骤](https://gist.github.com/hakre/5147685)的迭代器。

它们允许直接用 迭代具体元素`foreach`。这是一个这样的例子：

```
require('xmlreader-iterators.php'); // https://gist.github.com/hakre/5147685

$xmlFile = '../data/posts.xml';

$ids = array(3, 8);

$reader = new XMLReader();
$reader->open($xmlFile);

/* @var $users XMLReaderNode[] - iterate over all <user> elements */
$users = new XMLElementIterator($reader, 'user');

/* @var $filteredUsers XMLReaderNode[] - iterate over elements with id="3" or id="8" */
$filteredUsers = new XMLAttributeFilter($users, 'id', $ids);

foreach ($filteredUsers as $user) {
    printf("---------------\nUser with ID %d:\n", $user->getAttribute('id'));
    echo $user->readOuterXml(), "\n";
} 
```

我创建了一个 XML 文件，其中包含更多的帖子，例如您的问题，在`id`属性中从 1 开始编号：

```
$xmlFile = '../data/posts.xml'; 
```

然后我创建了一个数组，其中包含感兴趣的用户的两个 ID 值：

```
$ids = array(3, 8); 
```

稍后将在过滤条件中使用。然后`XMLReader`创建并打开 XML 文件：

```
$reader = new XMLReader();
$reader->open($xmlFile); 
```

下一步在该阅读器的所有`<user>`元素上创建一个迭代器：

```
$users = new XMLElementIterator($reader, 'user'); 
```

`id`然后针对之前存储到数组中的属性值进行过滤：

```
$filteredUsers = new XMLAttributeFilter($users, 'id', $ids); 
```

其余的正在迭代，`foreach`因为所有条件都已制定：

```
foreach ($filteredUsers as $user) {
    printf("---------------\nUser with ID %d:\n", $user->getAttribute('id'));
    echo $user->readOuterXml(), "\n";
} 
```

这将返回 ID 为 3 和 8 的用户的 XML：

```
---------------
User with ID 3:
<user id="3">
        <post>
            <message>message</message>
            <client>client</client>
            <time>time</time>
        </post>
    </user>
---------------
User with ID 8:
<user id="8">
        <post>
            <message>message 8.1</message>
            <client>client</client>
            <time>time</time>
        </post>
        <post>
            <message>message 8.2</message>
            <client>client</client>
            <time>time</time>
        </post>
        <post>
            <message>message 8.3</message>
            <client>client</client>
            <time>time</time>
        </post>
    </user> 
```

[作为](https://gist.github.com/hakre/5147685)[*XMLReader 迭代器*](https://gist.github.com/hakre/5147685)`XMLReaderNode`的一部分的which还提供了一个[^(*Docs*)](http://php.net/SimpleXMLElement)，以防您想轻松地读取元素内部的值。[](https://gist.github.com/hakre/5147685)*[`SimpleXMLElement`](http://php.net/SimpleXMLElement)*`<user>`**

 **以下示例显示了如何获取`<post>`元素内的`<user>`元素计数：

```
foreach ($filteredUsers as $user) {
    printf("---------------\nUser with ID %d:\n", $user->getAttribute('id'));
    echo $user->readOuterXml(), "\n";
    echo "Number of posts: ", $user->asSimpleXML()->post->count(), "\n";
} 
```

然后，这将为`Number of posts: 1`用户 ID 3 和`Number of posts: 3`用户 ID 8 显示。

但是，如果该外部 XML 很大，您不想这样做并且您希望继续在该元素内部进行迭代：

```
// rewind
$reader->open($xmlFile);

foreach ($filteredUsers as $user) {
    printf("---------------\nUser with ID %d:\n", $user->getAttribute('id'));
    foreach ($user->getChildElements('post') as $index => $post) {
        printf(" * #%d: %s\n", ++$index, $post->getChildElements('message'));
    }
    echo "Number of posts: ", $index, "\n";
} 
```

产生以下输出：

```
---------------
User with ID 3:
 * #1: message 3
Number of posts: 1
---------------
User with ID 8:
 * #1: message 8.1
 * #2: message 8.2
 * #3: message 8.3
Number of posts: 3 
```

此示例显示：根据嵌套子项的大小，您可以使用可用的迭代器进一步遍历，`getChildElements()`或者您也可以使用常见的 XML 解析器`SimpleXML`，甚至`DOMDocument`在 XML 的子集上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:58:35.863

您可以使用 PHP SimpleDomHTML（用 PHP5+ 编写的 HTML DOM 解析器，让您以非常简单的方式操作 HTML！）您可以像使用 jQuery 一样查询数据。它支持 HTML，因此可以肯定它很好地支持 XML 文档。

您可以在此处下载和查看文档：http: [//simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)**

# javascript - 未定义的错误 jQuery ID 选择器

> ID：15423595
> 
> 赞同：-1
> 
> 时间：2013-03-15T02:13:50.147
> 
> 标签：javascript, jquery, html

我在使用 jQuery 的 ID 选择器时遇到问题。不知道为什么我在这么简单的事情上遇到问题，但任何建议都将不胜感激。

这是我的注册页面中的一段 html：

```
<div class="small-3 large-9 columns">
                    <input type="password" id="password" placeholder="**********">
                    <div "small-3 large-offset-6 colums">
                        <div class="passwordStrength">
                            <p>
                                <strong>Password strength:</strong>
                                <span id="passwordRating">Strong</span>
                            </p>
                            <div class="meter" id="passwordBar">
                                <span id="strengthBar" class="strong" style="width: 255px;"></span>
                            </div>
                        </div>
                    </div>
                </div> 
```

这是我的signUpValidation.js中的一段javascript

```
$(function(){
var form = $('#signUp'),
    email = $('#email'),
    password = $('#password'),
    address = $('#address');

if (password.value().length < 8) {
    updateBar(0);
} 
```

我在 javascript 控制台中收到以下错误：

```
TypeError: 'undefined' is not a function (evaluating 'password.value()') 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:15:23.567

它是 val() 而不是 value()。[查看 jQuery 文档](http://api.jquery.com/val/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:16:03.197

使用`.val()`, .value 不是 jQuery 方法。[在此处](http://api.jquery.com/val/)的 api 站点上查看更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T02:16:43.637

在 JavaScript 中我们使用`.value`属性，在 jQuery 中我们需要使用`.val()`方法：

JavaScript：

```
document.getElementById("password").value 
```

jQuery

```
$('#password').val() 
```

# ruby-on-rails - Is there a way to rename Strong Parameter keys?

> ID：15423597
> 
> 赞同：7
> 
> 时间：2013-03-15T02:13:57.263
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-4, strong-parameters

Lets say I had code in a controller that did not use Strong Parameters

```
Model.create name: params[:name], alias_id: params[:foreign_id] 
```

Is it possible for me to use Strong Parameters here?

I cannot do

```
Model.create params.require(:name, :foreign_id) 
```

Because foreign_id is not a param

I cannot do

```
Model.create params.require(:name, :alias_id) 
```

Because alias_id is not on the model.

Basically, I want to know if you can alias paramater keys when using Strong Parameters.

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-06-22T13:28:44.040

通常，如果我想以这种方式映射参数（通常是由于某些外部 API），我会`alias_attribute`使用`ActiveRecord`

所以如果我有参数来找我`{name: "bob", alias_id: 1234}`，理想情况下我会想要`{name: "bob", foreign_id: 1234}`

我在我的`ActiveRecord`模型中声明以下内容

```
class MyModel < ActiveRecord::Base
  alias_attribute :alias_id, :foreign_id
end 
```

现在，我的模型将始终识别`alias_id`为`foreign_id`在任何上下文中的映射，并且我可以推入`params.require(:name, :alias_id)`，我的模型将识别它并根据需要处理它，而无需循环控制器中的属性。

如果您也想在其他模型上执行此操作，这也更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T06:56:24.083

我通过以下代码获得了我想要的功能。我不认为强参数可以做我需要的，特别是因为 require() 不能接受多个参数。

通过把它放在我的 ApplicationController 或它继承的模块中

```
#
# Pass in a list of param keys to pull out of the params object
# Alias param keys to another key by specifiying a mapping with a Hash
# eg.  filter_params :foo, :bar, {:choo => :zoo}
#
def filter_params(*param_list)
  filtered_params = {}
  param_list.each do |param|
    if param.is_a? Hash
      param.each {|key, value| filtered_params[value] = params[key]}
    else
      filtered_params[param] = params[param]
    end
  end
  filtered_params
end 
```

我现在可以说

```
Model.create filter_params(:name, {foreign_id: :alias_id}) 
```

# android - Android livesdk how to getharedPreferences after LiveAuthClient

> ID：15423599
> 
> 赞同：0
> 
> 时间：2013-03-15T02:14:06.757
> 
> 标签：android, sharedpreferences, onedrive, live-sdk

I am using following source [https://github.com/liveservices/LiveSDK-for-Android](https://github.com/liveservices/LiveSDK-for-Android).

Do someone know how to get shared preferences after the LiveAuthClient process. I have to get REFRESH_TOKEN_KEY and COOKIE_DELIMITER from the sharedprefences file and clear it after saving it in a database. The aim is to save this to values in a database to login with multiple skydrive accounts.

Any ideas would be helpful. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:56:20.283

如果有人想知道使用：

```
/** Name of the preference file */
public static final String FILE_NAME = "com.microsoft.live";
public static final String COOKIES_KEY = "cookies";
public static final String REFRESH_TOKEN_KEY = "refresh_token";

SharedPreferences preferences = getSharedPreferences(SDriveConstants.FILE_NAME, Context.MODE_PRIVATE);
String refresh_tkn_key = preferences.getString(SDriveConstants.REFRESH_TOKEN_KEY, "");
String cookies_key = preferences.getString(SDriveConstants.COOKIES_KEY, ""); 
```

# ruby - Rails 文件存在吗？当文件存在时产生 false

> ID：15423605
> 
> 赞同：11
> 
> 时间：2013-03-15T02:15:04.933
> 
> 标签：ruby, ruby-on-rails-3

我在这里找到了一些关于 File.exists 的帖子？在 Rails 应用程序中，但尝试解决方案没有帮助，我相当新，所以我必须做一些愚蠢的事情。

我正在使用：

*   导轨 3.2.11
*   红宝石 1.9.3
*   下面提到的文件的回形针
*   ActiveAdmin 上传下面提到的文件
*   在开发环境中工作
*   未预编译的资产

我有一个模型“样式”，它有一个图像附件，我可以用

```
<%= image_tag(@style.style_image) %> 
```

它工作得很好。

简而言之，我想检查文件图像是否真的存在于它应该在的文件夹中 - 我不想使用**@style.style_image.present？**用于检查图像，因为那只是检查数据库记录。我想使用**File.exist？**看看是否真的有**@style.style_image**的文件。

所以在我的视图文件中，我有代码

```
<% if File.exist?(@style.style_image.url) %>
The image exists.
<% else %>
The image is not here.
<% end %> 
```

当我加载页面时，它总是打印“图像不在这里”。在正下方，我正在使用 image_tag 显示我的图像，所以我知道图像就在那里。

我也试过

```
<% if File.exist?(Rails.root + @style.style_image.url) %> 
```

没有运气。我还尝试使用 FileTest.exist?、FileTest.exists? 和 File.exists? 但是当图像肯定存在时，没有人会告诉我真实的。

有什么我想念的吗？任何指导将不胜感激。我只接触 Ruby 和 Rails 几个月，所以我可能遗漏了一些愚蠢的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-15T02:17:22.920

我想你想要`@style.style_image.path`而不是`.url`.

打印出来确定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T02:56:44.580

每当您处理磁盘上的 Web URL 和文件时，您都必须小心使用哪个“路径”，并且无论您是在告诉您的代码到哪里找到文件，还是告诉浏览器如何请求该文件，都必须保持直截了当同一个文件。

Web 服务器出于多种原因对用户/浏览器隐藏了操作系统的文件结构，安全性非常高。例如，URL 是相对于服务器的，而不是驱动器的根目录。

您遇到的情况非常普遍，并且每个从事网络编程工作的人都可能遇到或将遇到同样的事情，可能会遇到很多次。

# php - 在 div 或 iFrame 中显示 PDF 文件

> ID：15423608
> 
> 赞同：1
> 
> 时间：2013-03-15T02:15:20.787
> 
> 标签：php, pdf, html, iframe

有什么方法可以在 div 或 iFrame 中加载 PDF 文件（其内容）？

我在服务器上有一堆 PDF 文件，理想情况下，我需要在页面上有一个“显示文件”按钮，单击它将在 div(iFrame) 中加载所选文件的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T02:27:11.877

`iframe`您还可以在您的页面上使用 google pdf 视图：

```
<iframe src="http://docs.google.com/gview?url=http://infolab.stanford.edu/pub/papers/google.pdf&embedded=true" style="width:600px; height:500px;" frameborder="0"></iframe> 
```

而不是上面代码中的这个：

[http://infolab.stanford.edu/pub/papers/google.pdf](http://infolab.stanford.edu/pub/papers/google.pdf)

使用您自己的`PDF`文件路径。

你可以在`demo`这里查看。

[http://googlesystem.blogspot.in/2009/09/embeddable-google-document-viewer.html](http://googlesystem.blogspot.in/2009/09/embeddable-google-document-viewer.html)

这只是一个建议。请不要投反对票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-09T14:16:51.867

Google 的 gview 有时无响应并给出 204 状态。这是最好的免费选择。 [https://stackoverflow.com/a/66548544/2078462](https://stackoverflow.com/a/66548544/2078462)

# c# - 使用 ontextchange 事件更新数据库

> ID：15423612
> 
> 赞同：0
> 
> 时间：2013-03-15T02:15:42.813
> 
> 标签：c#, asp.net

我正在尝试使用 onTextChange 事件来更新文本框，然后我正在使用按钮在数据库中更新它。每次我尝试使用时，它都会将值设置为“”，我真的不知道我做错了什么还是做对了。如果有人可以请帮助，那就太好了。谢谢

ASP.NET 代码：

```
<asp:TextBox ID="tbPLName" runat="server" OnTextChanged="tbPLName_TextChanged" />
<asp:Button ID="btUpdate" runat="server" Text="Update Name" OnClick="btUpdate_Click"   /> 
```

C#代码：

```
string lastName;
protected void btUpdate_Click(object sender, EventArgs e)
    {
        tbCheck();
    }

    protected void tbPLName_TextChanged(object sender, EventArgs e)
    {
        lastName = tbPLName.Text;
    } 
```

另外，如果有更好的方法，请告诉我。我真的很想以最好的方式做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:10:29.097

您正在创建和分配一个仅存在于 TextChanged 函数中的变量。在您展示的代码中，您正在将输入文本分配给一个变量，然后关闭该函数（它摆脱了该变量）。

编辑：我可能应该提到，如果您使用更新按钮更新数据库，则不需要 text_changed 事件，该代码如下所示：

```
protected void btUpdate_Click(object sender, EventArgs e)
{
    UpdateDatabase(tbPLName.Text);
} 
```

EDIT2：您还说您想更新 TextChanged 上的数据库，但这不是您的代码所说的（尽可能少）。

如果您确实想这样做，请不要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T16:53:58.100

我已经弄清楚我错过了什么。我不需要使用 ontextchanged 事件。我只需要做：

```
if(!Page.IsPostBack)
{

    // code

} 
```

在页面加载的顶部，它工作正常。然后我可以调用改变数据库中文本的方法。

# jquery - 在插件结构中封装站点范围的 jquery 事件和方法有什么问题吗？

> ID：15423613
> 
> 赞同：0
> 
> 时间：2013-03-15T02:15:53.610
> 
> 标签：jquery

我对我的一个项目的 javascript 混乱不满意，所以我决定把所有东西都放在下面的插件结构中。请注意，我是一名 C# 开发人员，不会对 jQuery 做太多事情，但它看起来很有趣。

```
(function($) {

var methods = {
    init: function(options) {

        if (!cookiesEnabled()) {
            window.location = "http://www.mysite.com/error?msg=nocookies";
        }
        // autosize middle frame if right side has no content
        autosizeframes('#right-side');

        // EVENTS
        $(document).on('submit', '#signin_form', function (event) {
            event.preventDefault();
            postAjaxForm($(this));

        });

        $(document).on('submit', '#register_form', function (event) {
            event.preventDefault();
            postAjaxForm($(this));

        });

        $(document).on('click', '.user-settings', function (e) {
            var menu = $(this).parent().children('#menu');
            if ($(menu).is(':visible')) {
                $(menu).slideUp(500);
            } else {
                $(menu).slideDown(500);
            }
        });
    }

};
// METHODS Commonly Used
var postAjaxForm = function(form) {
    var updateElement = $(form).attr('UpdateElement');

    if (!$(updateElement).length) {
        alert('Unable to find update element');
        return false;
    }

    if ($(form).valid()) {
        $.ajax({
            type: $(form).attr('method'),
            url: $(form).attr('action'),
            data: $(form).serialize(),
            success: function(response) {
                $(updateElement).html(response);
                $.validator.unobtrusive.parse($(updateElement).find('form'));
            },
            error: function(xhr,stats,errorMessage) {

            }
        });
    }
    return true;
};

var checkLength = function(element) {
    if ($.trim(element).length) {
        return true;
    }
    return false;
};
var autosizeframes = function(element) {
    if (!$.trim($(element).len)) {
        $('#middle').width($('#middle').width() + $(element).width());
    }
};

var cookiesEnabled = function() {
    var enabled = (navigator.cookieEnabled) ? true : false;
    if (typeof navigator.enabled == "undefined" && !enabled) {
        document.cookie = "_test";
        enabled = (document.cookie.indexOf("_test") != -1) ? true : false;
    }
    return enabled;
};

$.fn.site = function(method) {
    if (methods[method]) {
        return methods[method].apply(this,Array.prototype.slice.call(arguments, 1));
    } else if (typeof method == 'object' || !method) {
        return methods.init.apply(this, arguments);
    } else {
        $.error('Method' + method + ' Does not exist');
    }
};
})(jQuery); 
```

输入赞赏和感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:27:52.157

恕我直言，只有当它们具有*通用*实用程序时，将它们转换为 jQuery 插件才有意义。

如果您的方法特定于某个站点，则最好将它们包装在它们自己的名称空间和/或对象中，而不是将它们放入 jQuery 的名称空间中。

`cookiesEnabled`因此，将您的功能添加到`$`(nb: not )可能是有意义的`$.fn`，但我认为您没有`$.fn.site`意义。

特别是，函数 in`$.fn`应该应用于元素*集合*，封装在现有的 jQuery 对象中，该对象作为`this`. 您`methods.init`通过 via 公开的功能`$.fn.site`不会执行任何操作。

# javascript - jQuery FadeIn 和 FadeOut 导致闪烁？

> ID：15423614
> 
> 赞同：2
> 
> 时间：2013-03-15T02:15:57.437
> 
> 标签：javascript, jquery, fadein, fadeout, flicker

我最初写了这个关于 jQuery 插件的问题。从那以后，我尝试了另一个仅使用 jQuery 的代码：

```
$('#action-alerts .rotate:gt(0)').hide();
 setInterval(function(){
    $('#action-alerts .rotate:first-child').fadeOut(600)
       .next('.rotate').delay(600).fadeIn(600)
       .end().appendTo('#action-alerts');}, 
  3000); 
```

此代码在 iOS 中仍然存在闪烁问题。我该如何解决这个问题？

以下是我原来的问题：

* * *

我正在使用一个名为[Quote Rotator](http://coryschires.com/jquery-quote-rotator-plugin/)的 jQuery 插件。它在浏览器中运行良好，但是在 iOS (v6) 中，当转换发生时它会闪烁。这很烦人，我不确定如何解决闪烁问题。我已经阅读过，`-webkit-backface-visibility`但我不相信是这种情况。首先，我的样式表中已经有了这段代码：

```
body {
   -webkit-backface-visibility: hidden;
} 
```

其次，这不只适用于 CSS 3 过渡吗？（或者我的理解不正确？）

我应该尝试什么来解决这个问题？

**HTML**

```
<div id="action-alerts">
  <ul>
    <li>
       <div class="quote-holder">
       <div class="grid_10">
       <h3 class="action-box-red"><span class="alert-icon">Text</span></h3>     
       </div>
       <div class="grid_2">
       <a target="_blank" href="#" class="default_button xlarge textcenter red">Read the <br> Report</a>
       </div>
       </div>
    </li>
    <li>
       <div class="quote-holder">
       <div class="grid_10">
       <h3 class="action-box-red"><span class="alert-icon">Text</span></h3>     
       </div>
       <div class="grid_2">
       <a target="_blank" href="#" class="default_button xlarge textcenter red">Take <br> Action</a>
       </div>
       </div>
    </li> 
  </ul>
</div> 
```

**JS：**

```
$(function() {
    $('#action-alerts').quote_rotator({
        rotation_speed: 9000
    }); 
}); 
```

注意：我的 HTML 比这里发布的要多。这是一个片段。我正在使用 jQuery 1.8.3。如果它可以工作，我不介意更改为另一个插件（这意味着它会在`<li>`元素之间创建一个简单的淡入淡出过渡。）我曾尝试在 Quote Rotator 之前使用[Quovolver ，但我遇到了](http://sebnitu.github.com/Quovolver/)[问题](https://stackoverflow.com/q/15287780/825757)，无法让它工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-17T07:06:36.900

`fadeOut`第二个想法，这个问题可能是由于导致元素`display:none`在其运行结束时具有 a的事实引起的。因此，当元素淡入时，首先需要显示它。这就是你描述的那种崎岖的“闪烁”。

```
$('#action-alerts .rotate:gt(0)').fadeTo(10,0);
setInterval(function(){
    $('#action-alerts .rotate:first-child').fadeTo(1000,0, function() { 
        $('#action-alerts .rotate:first-child').next('.rotate').delay(300).fadeTo(1000,1)
          .end().appendTo('#action-alerts');
    });
}, 
3000); 
```

**一个工作示例的 jsFiddle：**

[http://jsfiddle.net/Eznpg/12/](http://jsfiddle.net/Eznpg/12/)

# jquery - 在文件中的位置以及如何使用 Jquery 提交表单

> ID：15423617
> 
> 赞同：0
> 
> 时间：2013-03-15T02:16:24.647
> 
> 标签：jquery, html, forms, submit

我在网上购买了一个模板，我正在尝试开发一个网站，但我被困在联系表格上。我似乎无法让它提交。当我单击提交时，它仍然是静态的，但我想让它运行该操作 - 即转到 contactTq.php 页面。以下是我认为您需要的所有代码。但如果你想要整个 .js 文件，它就在这里： http: [//pastebin.com/1B1j9pkB](http://pastebin.com/1B1j9pkB)

```
,submitFu:function(){
_.validateFu(_.labels)                          
if(!_.form.has('.'+_.invalidCl).length)
    $.ajax({
        type: "POST",
        url:_.mailHandlerURL,
        data:{
            name:_.getValFromLabel($('.name',_.form)),
            email:_.getValFromLabel($('.email',_.form)),
            phone:_.getValFromLabel($('.phone',_.form)),
            //fax:_.getValFromLabel($('.fax',_.form)),
            //state:_.getValFromLabel($('.state',_.form)),
            message:_.getValFromLabel($('.message',_.form)),
            owner_email:_.ownerEmail,
            stripHTML:_.stripHTML
        },
        success: function(){
            _.showFu()
        }
    })          
},
showFu:function(){
_.success.slideDown(function(){
    setTimeout(function(){
        _.success.slideUp()
        _.form.trigger('reset')
    },_.successShow)
})
}, 
```

这是我使用的表格：

```
<form id="contact-form" action="contactTq.php" method="post">
<div class="success"> Contact form submitted! <strong>We will be in touch soon.</strong></div>
<fieldset>
    <label class="name">
        <input type="text" value="Enter Your Name:">
        <span class="error">*This is not a valid name.</span>
        <span class="empty">*This field is required.</span>
        <span class="clear"></span>
    </label>
    <label class="email">
        <input type="text" value="Enter Your E-mail:">
        <span class="error">*This is not a valid email address.</span>
        <span class="empty">*This field is required.</span>
        <span class="clear"></span>
    </label>
    <label class="phone">
        <input type="text" value="Enter Your Phone (optional):">
        <span class="error">*This is not a valid phone number.</span>
        <span class="clear"></span>
    </label>
    <label class="message">
        <textarea>Enter Your Message:</textarea>
        <span class="error">*The message is too short.</span>
        <span class="empty">*This field is required.</span>
        <span class="clear"></span>
    </label>
    <div class="buttons"><strong><a class="button" data-type="reset">Reset<span></span></a></strong><strong><a class="button" data-type="submit">Submit<span></span></a></strong></div>
</fieldset>
</form> 
```

如果您需要任何其他信息，请告诉我。将不胜感激任何帮助。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:11:41.923

我会将我的评论更改为答案。

您缺少结束 FORM 标记。如果不是这个原因，有时 FORM 标记中的 data-ajax="false" 会使用一些模板来解决问题。

# php - 从谷歌获取联系人

> ID：15423622
> 
> 赞同：1
> 
> 时间：2013-03-15T02:17:23.177
> 
> 标签：php, google-contacts-api

我使用 google api 来获取 google 帐户的联系人。我使用的代码是[http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/contacts/simple.php](http://code.google.com/p/google-api-php-client/source/browse/trunk/examples/contacts/simple.php)

但是当我通过应用我的凭据运行代码时，它给了我联系人，但只是他们的名字。我想要联系人的电子邮件地址。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:21:54.873

我总是用这个来`fetch gmail contacts`。

[http://contactsimporter.com/address-book-importer-demo.html](http://contactsimporter.com/address-book-importer-demo.html)

希望你也会喜欢这个。

它`authenticates`是我们自己的用户，不会发送用户对 gmail 进行身份验证。

试一试。

这是下载链接。

[http://svetlozar.net/downloads/import.zip](http://svetlozar.net/downloads/import.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:35:39.960

参考这个。

用于用户详细信息的带有 PHP 的 Google 身份验证 API 库

[http://www.technew.in/forum_thread_621_Google-Authentication-API-Library-with-PHP-for-User-Details.html](http://www.technew.in/forum_thread_621_Google-Authentication-API-Library-with-PHP-for-User-Details.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T15:20:58.193

[您可以在此链接](http://pastebin.com/kAYT5Jng)上找到如何获取电子邮件，问题出在示例代码上。这是链接中引用的代码的一部分。

```
 $req = new \apiHttpRequest("https://www.google.com/m8/feeds/contacts/default/full?max-results=9999");
    $val = $client->getIo()->authenticatedRequest($req);

    $xml = new \SimpleXMLElement($val->getResponseBody());
    $xml->registerXPathNamespace('gd', 'http://schemas.google.com/g/2005');
    $result = $xml->xpath('//gd:email');

    foreach($result as $title)
    {
            $emails[] = $title->attributes()->address;
    } 
```

# java - 抛出新异常

> ID：15423624
> 
> 赞同：1
> 
> 时间：2013-03-15T02:17:33.487
> 
> 标签：java

我的代码中有关于抛出新异常的问题。

在其中一个 JTextField 中，我输入了数字 0，但它不正确，此时单击“ENTER”按钮后，会抛出新的异常消息：

```
throw new Exception("Wrong number of express lanes range beginnig!! \n Please enter positive number!"); 
```

该框消息出现错误消息我只能单击“确定”。单击“确定”后，我希望程序停止，因为我想更正 JTextField 中的错误数据。我不能这样做，因为在我单击“确定”后，程序继续处理。我怎样才能停止程序并更正数据？这是我看到有问题的代码的重要部分。

```
 public class UILayer 
{

private JTextField text1, text2, text3, text4, text5, text6;

private void validateNumbers() throws Exception
{

    if(!text1.getText().equals("") && 
            Integer.parseInt(text1.getText()) <= 0 )
        throw new Exception("Wrong number of lanes!! \n Please enter positive number!");
    if(!text2.getText().equals("") && 
            Integer.parseInt(text2.getText()) <= 0 )
        throw new Exception("Wrong number of express lanes!! \n Please enter positive number!");

    if(!text3.getText().equals("") && 
            Integer.parseInt(text3.getText()) <= 0 )
        throw new Exception("Wrong number of express lanes range beginnig!! \n Please enter positive number!");

    if(!text4.getText().equals("") && 
            Integer.parseInt(text4.getText()) <= 0 )
        throw new Exception("Wrong number of express lanes range ending!! \n Please enter positive number!");
    if(!text5.getText().equals("") && 
            Integer.parseInt(text5.getText()) <= 0 )
        throw new Exception("Wrong number of customers!! \n Please enter positive number!");
    if(!text6.getText().equals("") && 
            Integer.parseInt(text6.getText()) <= 0 )
        throw new Exception("Wrong number of max items!! \n Please enter positive number!");

}

protected class EnterClickListener implements ActionListener
{
    private SimulationConfig info;

    EnterClickListener( )
    { 
        info = new SimulationConfig();
    }

    @Override
    public void actionPerformed( ActionEvent event ) 
    {   
        try
        {
            if(!(event.getActionCommand().equals(null )))
            {
                validateForm();
                validateNumbers();
            }   
        }
        catch(NumberFormatException e) 
        {
            JOptionPane.showMessageDialog( null, "Error.\nPlease enter number.", 
                     "Message", JOptionPane.INFORMATION_MESSAGE );
        } 
        catch (Exception e)
        {
            JOptionPane.showMessageDialog( null, "Error.\n" + e.getMessage() , 
                     "Message", JOptionPane.INFORMATION_MESSAGE );
        }
        info.setCustomerRestriction(Integer.parseInt(text5.getText()), Integer.parseInt(text6.getText()));
        info.setExpressRange(Integer.parseInt(text3.getText()), Integer.parseInt(text4.getText()));
        info.setLanesNum(Integer.parseInt(text1.getText()), Integer.parseInt(text2.getText()));
        showProgressBar();
        task = blayer.startSimulation(info);
        task.addPropertyChangeListener(new PropertyChangeListener());
        task.execute();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:20:12.243

把你的代码

```
info.setCustomerRestriction(Integer.parseInt(text5.getText())....
......
task.execute(); 
```

内试，后若。像这样：

```
@Override
public void actionPerformed( ActionEvent event ) 
{   
    try
    {
        if(!(event.getActionCommand().equals(null )))
        {
            validateForm();
            validateNumbers();

            info.setCustomerRestriction(Integer.parseInt(text5.getText()), Integer.parseInt(text6.getText()));
    info.setExpressRange(Integer.parseInt(text3.getText()), Integer.parseInt(text4.getText()));
    info.setLanesNum(Integer.parseInt(text1.getText()), Integer.parseInt(text2.getText()));
    showProgressBar();
    task = blayer.startSimulation(info);
    task.addPropertyChangeListener(new PropertyChangeListener());
    task.execute();
        }   
    }
    catch(NumberFormatException e) 
    {
        JOptionPane.showMessageDialog( null, "Error.\nPlease enter number.", 
                 "Message", JOptionPane.INFORMATION_MESSAGE );
    } 
    catch (Exception e)
    {
        JOptionPane.showMessageDialog( null, "Error.\n" + e.getMessage() , 
                 "Message", JOptionPane.INFORMATION_MESSAGE );
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:59:14.327

PC 提供的解决方案要好得多，另一种方法是编写一个用户定义的异常类，该类能够中止进一步的程序执行，因为您可以重用它，因此无需再次编写相同的代码（如果您要在多个地方或 java 类中处理相同的异常）。你需要做的是：

1.  根据您的要求，采用扩展为 RuntimeException、Exception 或 Throwable 的公共类
2.  采用带有 String 参数的公共构造函数
3.  调用 super(your_String_parameter_here); 在您的构造函数内部形成（因此，如果您跳过处理此异常并直接处理超类异常，则可以将适当的消息传递到那里）
4.  覆盖 toString() 方法为您的 Exception 类对象提供正确的字符串消息

现在，您可以在代码中的任何位置重用这个 Exception 类。

# jquery - jQuery重置动画

> ID：15423630
> 
> 赞同：0
> 
> 时间：2013-03-15T02:17:55.223
> 
> 标签：jquery, css, animation

我正在制作具有几种不同效果的幻灯片。这种特殊的效果会缩小图像并淡出。但问题是，我需要将图像重置为其原始状态，因此当用户单击返回该图像时，它仍然具有“0.2”的不透明度。无论如何，我可以在动画完成后重置动画吗？

```
if (currentEffect == "glimpse") {
 $("#next").click(function() {
   if (currentSlide == 0) {
    $("#slide1").animate({
     width: "0",
     opacity: 0.2,
     borderWidth: "10px"
    }, 1000 );
    $("#slide2").fadeIn(800);
   }
 });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:43:43.317

只需在动画完成后删除样式属性即可。

像上面的解决方案：

```
$("#slide1").animate({
 width: "0",
 opacity: 0.2,
 borderWidth: "10px"
}, 1000, function(){ 
  $('#slide1').removeAttr('style');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:28:01.920

`.animate()`完成时有一个回调：http: [//api.jquery.com/animate/](http://api.jquery.com/animate/)

只需使用它来重置它。

```
$("#slide1").animate({
     width: "0",
     opacity: 0.2,
     borderWidth: "10px"
    }, 1000, function(){ 
      //reset the image's opacity, width, etc.
    }); 
```

# c# - Distinct() 是如何工作的？

> ID：15423632
> 
> 赞同：4
> 
> 时间：2013-03-15T02:18:04.627
> 
> 标签：c#, .net, linq, distinct

可以说我有这个：

```
class Foo
{
    public Guid id;
    public string description;
}

var list = new List<Foo>();
list.Add(new Foo() { id = Guid.Empty, description = "empty" });
list.Add(new Foo() { id = Guid.Empty, description = "empty" });
list.Add(new Foo() { id = Guid.NewGuid(), description = "notempty" });
list.Add(new Foo() { id = Guid.NewGuid(), description = "notempty2" }); 
```

现在，当我这样做时：

```
list = list.Distinct().Tolist(); 
```

它显然返回 4 个元素。我想要一个方法，它比较我在类中的所有数据，并返回唯一元素，检查类的每个属性。我是否需要编写自己的比较器，或者是否有内置的东西可以这样工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T02:25:13.930

您必须重写`Foo.Equals`（并随后`Foo.GetHashCode`）以显式比较每个字段。否则它将使用默认实现，`Object.Equals`( `ReferenceEquals`)。

或者，您可以显式地将 an 传递`IEqualityComparer`给该`Distinct()`方法。

* * *

请注意，尽管使用*匿名类*确实会返回 3 个元素。根据您要使用的位置`Foo`以及需要多少编译时类型安全性，您可以执行以下操作：

```
var list = new List<dynamic>();
list.Add(new { id = Guid.Empty, description = "empty" });
list.Add(new { id = Guid.Empty, description = "empty" });
list.Add(new { id = Guid.NewGuid(), description = "notempty" });
list.Add(new { id = Guid.NewGuid(), description = "notempty2" });

list = list.Distinct().ToList(); //3 elements selected 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T02:19:42.040

[它使用EqualityComparer.Default](http://msdn.microsoft.com/en-us/library/ms224763.aspx)比较每两个项目，直到[指定](http://msdn.microsoft.com/en-us/library/bb338049.aspx)[IEqualityComparer](http://msdn.microsoft.com/en-us/library/ms132151.aspx)的另一个实现

# jakarta-ee - 使用 Google 的 OAuth 2.0 时出现 GoogleAuthorizationCodeTokenRequest 连接超时异常

> ID：15423634
> 
> 赞同：2
> 
> 时间：2013-03-15T02:18:35.017
> 
> 标签：jakarta-ee, google-api, access-token, google-oauth, connection-timeout

我可以在回调中从用户那里获得授权“代码”，授予我的网络应用程序访问 Google 日历的权限。但是，当我尝试使用以下方法获取访问令牌和刷新令牌时，我总是在以下代码块中的以下行中收到“java.net.SocketTimeoutException：连接超时”异常：

```
googleTokenResponse = googleAuthorizationCodeTokenRequest.execute(); 
```

令人沮丧的是，我可以在 vFabric tc Server 上运行的 Grails Web 应用程序中获取访问令牌和刷新令牌，但是我必须编写一个在 JBoss EAP 6 上运行的 Java EE Web 应用程序，这就是我得到的地方超时异常。

这是我用来获取访问令牌和刷新令牌的方法：

```
String accessToken = "";
String refreshToken = "";
GoogleTokenResponse googleTokenResponse = null;
try {
    GoogleAuthorizationCodeTokenRequest googleAuthorizationCodeTokenRequest = new GoogleAuthorizationCodeTokenRequest(new NetHttpTransport(), new JacksonFactory(), myClientId, myClientSecret, code, myRedirectURI);
    log.info("getTokensUsingGoogleAPI() :: googleAuthorizationCodeTokenRequest = " + googleAuthorizationCodeTokenRequest);
    googleTokenResponse = googleAuthorizationCodeTokenRequest.execute();
} catch (TokenResponseException e) {
 ...
}                 
if (googleTokenResponse != null) {
    accessToken = googleTokenResponse.getAccessToken();
    if (accessToken != null) {
        googleAuthenticationForCalendarId.setAccessToken(accessToken);
        log.info("getTokensUsingGoogleAPI() :: accessToken = " + accessToken);
    }
    refreshToken = googleTokenResponse.getRefreshToken();
    if (refreshToken != null) {
        log.info("getTokensUsingGoogleAPI() :: refreshToken = " + refreshToken);
        googleAuthenticationForCalendarId.setRefreshToken(refreshToken);
    }
} else {
    log.severe("getTokensUsingGoogleAPI() :: googleTokenResponse == null. Try again!!!");
} 
```

这是一个例外：

```
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4) java.net.SocketTimeoutException: connect timed out
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.TwoStacksPlainSocketImpl.socketConnect(Native Method)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:337)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:198)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:180)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:157)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.net.Socket.connect(Socket.java:579)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.security.ssl.SSLSocketImpl.connect(SSLSocketImpl.java:607)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.NetworkClient.doConnect(NetworkClient.java:175)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.http.HttpClient.openServer(HttpClient.java:388)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.http.HttpClient.openServer(HttpClient.java:483)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.https.HttpsClient.<init>(HttpsClient.java:278)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.https.HttpsClient.New(HttpsClient.java:335)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.getNewHttpClient(AbstractDelegateHttpsURLConnection.java:191)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:928)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect(AbstractDelegateHttpsURLConnection.java:177)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1087)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.net.www.protocol.https.HttpsURLConnectionImpl.getOutputStream(HttpsURLConnectionImpl.java:250)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at com.google.api.client.http.javanet.NetHttpRequest.execute(NetHttpRequest.java:84)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:991)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at com.google.api.client.auth.oauth2.TokenRequest.executeUnparsed(TokenRequest.java:299)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeTokenRequest.execute(GoogleAuthorizationCodeTokenRequest.java:175)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at au.edu.nsw.det.corpcomm.calendar.rest.GoogleAuthenticationResourceRESTService.getTokensUsingGoogleAPI(GoogleAuthenticationResourceRESTService.java:167)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at au.edu.nsw.det.corpcomm.calendar.rest.GoogleAuthenticationResourceRESTService.getValuesFromCallback(GoogleAuthenticationResourceRESTService.java:90)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.lang.reflect.Method.invoke(Method.java:601)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext$Invocation.proceed(InterceptorContext.java:374)
12:39:06,292 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.doMethodInterception(Jsr299BindingsInterceptor.java:129)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.weld.ejb.Jsr299BindingsInterceptor.processInvocation(Jsr299BindingsInterceptor.java:137)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.invocationmetrics.ExecutionTimeInterceptor.processInvocation(ExecutionTimeInterceptor.java:43)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.jpa.interceptor.SFSBInvocationInterceptor.processInvocation(SFSBInvocationInterceptor.java:58)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.stateful.StatefulSessionSynchronizationInterceptor.processInvocation(StatefulSessionSynchronizationInterceptor.java:156)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.weld.ejb.EjbRequestScopeActivationInterceptor.processInvocation(EjbRequestScopeActivationInterceptor.java:74)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.stateful.StatefulComponentInstanceInterceptor.processInvocation(StatefulComponentInstanceInterceptor.java:67)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:227)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:303)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:189)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.interceptors.ShutDownInterceptorFactory$1.processInvocation(ShutDownInterceptorFactory.java:42)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.interceptors.AdditionalSetupInterceptor.processInvocation(AdditionalSetupInterceptor.java:32)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.ViewDescription$1.processInvocation(ViewDescription.java:176)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ejb3.component.stateful.StatefulComponentIdInterceptor.processInvocation(StatefulComponentIdInterceptor.java:52)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.ee.component.ProxyInvocationHandler.invoke(ProxyInvocationHandler.java:72)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at au.edu.nsw.det.corpcomm.calendar.rest.GoogleAuthenticationResourceRESTService$$$view39.getValuesFromCallback(Unknown Source)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.lang.reflect.Method.invoke(Method.java:601)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:167)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at javax.servlet.http.HttpServlet.service(HttpServlet.java:847)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:679)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:931)
12:39:06,308 ERROR [stderr] (http-/0.0.0.0:8080-4)  at java.lang.Thread.run(Thread.java:722) 
```

我做了很多测试都没有成功。

我做了很多搜索，但在[https://groups.google.com/forum/?fromgroups=#!search/GoogleAuthorizationCodeTokenRequest](https://groups.google.com/forum/?fromgroups=#!search/GoogleAuthorizationCodeTokenRequest) $20connect$20timed$20out/oauth2-dev/OXo- Y5jBo3w/j8YiZ0_FwEoJ 但这并没有给出任何实际的解决方案。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T22:05:28.767

这是一个代理问题。必须在 JBoss EAP 6 安装中的 JBoss 配置中设置代理（请参阅[如何为 JBoss 实例设置代理](https://stackoverflow.com/questions/7799165/how-to-set-a-proxy-for-a-jboss-instance)- 第二个答案）。

我在之后添加了以下内容

```
</extensions> 
```

在 \jboss-eap-6.0\standalone\configuration\standalone.xml

```
<system-properties>
  <property name="http.proxyHost" value="our_proxy"/>
  <property name="http.proxyPort" value="our_proxy_port"/>
  <property name="http.nonProxyHosts" value="localhost"/>
  <property name="https.proxyHost" value="our_proxy"/>
  <property name="https.proxyPort" value="our_proxy_port"/>
  <property name="https.nonProxyHosts" value="localhost"/>
</system-properties> 
```

我希望这对其他人有帮助。

# html - rails link_to 格式不正确

> ID：15423635
> 
> 赞同：0
> 
> 时间：2013-03-15T02:18:48.177
> 
> 标签：html, ruby-on-rails-3

[从 rails API DOC](http://api.rubyonrails.org/)读取该`link_to`方法的工作原理如下

```
link_to "Visit Other Site", "http://www.rubyonrails.org/", :confirm => "Are you sure?"
<a href="http://www.rubyonrails.org/" data-confirm="Are you sure?"">Visit Other Site</a> 
```

出于某种原因，当我尝试类似

```
<div>I'm a <%= link_to "developer", "http://www.ffo.com", target: "_blank"%> </div> 
```

我得到的输出看起来是这样的

## 我是一名开发人员 ( [http://www.ffo.com](http://www.ffo.com) ")

好奇为什么 url 和括号会显示在显示屏上，因为如果我用纯 html 编写它

```
 <div> I'm a <a href='http://www.ffo.com'>developer</a> 
```

## 我是开发者

# operating-system - 基于标签的文件系统

> ID：15423636
> 
> 赞同：14
> 
> 时间：2013-03-15T02:18:49.280
> 
> 标签：operating-system, filesystems, hard-drive

现在存在的所有操作系统都可以在文件和文件夹中运行。我在想可能还有其他存储文件的方法。按标签存储文件是否是更好的方法，例如：

一个名为“music1”的文件可以有一个标签“2013”​​，如果音乐是在 2013 年制作的。同一个文件可以有另一个名为“Music”的标签，表示该文件是音乐，另一个名为“video1”的文件可能有“2013”​​标签，但也有“视频”标签而不是“音乐”标签。这将很有用，因为您可以搜索标签并为您拥有的所有文件生成漂亮的地图。

这是一个例子：

![在此处输入图像描述](../Images/5592f0fc47349a0465e04e82115fc067.png)

在此示例中，文件为绿色。每个文件都有一些标签（蓝色）和一些特殊标签（红色）。特殊标签包含用户（只有标签中的用户可以看到标记为 USER:Username 的文件）和文件类型（而不是文件扩展名）。黄色标记是不需要程序运行它们的系统文件类型（如 Windows 中的 .exe）

*   黑线将标签链接到文件
*   红线将特殊标签链接到文件
*   蓝线链接打开文件类型（或文件）的内容。例如，音乐是 ogg 文件。由OggViewer打开，是java打开的jar文件。Java由系统打开。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-24T12:01:54.313

据我所知，有一个很好的文件系统级解决方案可以满足您的需求，称为[NHFS](http://rffr.de/nhfs)或非分层文件系统。还提供了一个名为[TMSU](http://tmsu.org/)的基于 FUSE 的可挂载文件系统，它可能会让您满意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-15T03:11:13.813

它可能有优点，例如，我对我数以万计的音乐文件的文件名/路径完全不感兴趣；我只关心他们的艺术家、标题、专辑、年份等，这是我的音乐播放器 (quodlibet) 显示它们的方式。选择一组音乐放在另一台设备上或发送给某人就像选择专辑一样容易（而不是浏览到 /home/me/music/who/knows/what/someartist - somealbum）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-11T07:59:44.313

windows有[TagsForAll](http://akslab.com)。它是一个基于标签的文件管理器。标签可以有层次结构。用户界面非常简单但很好。免费版功能齐全并将标签保存在数据库中，专业版也将 NTFS 流中的标签保存到文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-15T02:34:27.297

[微软试图用WinFS](http://en.wikipedia.org/wiki/WinFS)做类似的事情， 但放弃了。如果他们能让它发挥作用，那就太好了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-25T11:36:35.013

还有一些其他（旧的，存档的）项目实现了这个想法：

*   [http://nascent.freeshell.org/programming/TagFS/](http://nascent.freeshell.org/programming/TagFS/)
*   [https://code.google.com/p/dhtfs/](https://code.google.com/p/dhtfs/)
*   [https://code.google.com/p/tagfilesystem/](https://code.google.com/p/tagfilesystem/)
*   [http://www.tagsistant.net/](http://www.tagsistant.net/)

只有最后一个似乎正在发布最新版本。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-15T00:05:08.127

我认为这个想法有未来。我以前也想过同样的想法。从根本上说，对于大多数内容，标签比文件夹更有效；但是，我想知道文件夹的层次结构实际上是否更适合文件。换句话说，虽然我喜欢在多个级别上使用标签的想法，但我想知道它是否真的会增加整体复杂性。例如，考虑如何成功地使用标签来管理版本化的软件库。恐怕我们不会知道答案，直到有人开始使用这个概念而不是整个操作系统的文件夹。看到/尝试会很有趣。

# sql - 如何更改父值，影响SQL中2个表之间的子值

> ID：15423637
> 
> 赞同：0
> 
> 时间：2013-03-15T02:18:50.033
> 
> 标签：sql, database-design

例如，如果有两个表：

```
Table 1: Company
which have a attribute : status

Table 2 : Employee
which have a attribute : status 
```

如果表1属性更改为1/0，则表2必须跟随，但是如果表2更改为1/0，则表1应该没有动作。如何构造？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:21:34.007

您可以在更新表 1 时创建数据库触发器。如果您使用 MySQL，您可以在此处阅读：http: [//dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

# sql-server-2008-r2 - CHECK CONSTRAINT 文本由 SQL Server 更改。我该如何避免或解决这个问题？

> ID：15423642
> 
> 赞同：2
> 
> 时间：2013-03-15T02:19:28.900
> 
> 标签：sql-server-2008-r2, constraints

当我`CHECK CONSTRAINT`在表上定义 a 时，我发现存储的条件子句可能与我输入的不同。
例子：

```
Alter table T1 add constraint C1 CHECK (field1 in (1,2,3)) 
```

查看存储的内容：

```
select cc.Definition from sys.check_constraints cc
inner join sys.objects o on o.object_id = cc.parent_object_id
where cc.type = 'C' and cc.name = 'T1'; 
```

我懂了：

```
([field1]=(3) OR [field1]=(2) OR [field1]=(1)) 
```

虽然这些是等价的，但它们不是相同的文本。（使用`BETWEEN`子句时会发生类似的行为）。

我希望这不会发生的原因是，我试图`CHECK`通过将用于定义约束的文本与存储的文本进行比较，以编程方式确保我的所有约束都是正确的`sys.check_constraints`——如果不同，则删除并重新创建约束。

但是，在这些情况下，它们总是不同的，因此程序总是认为它需要重新创建约束。

问题是：

1.  SQL Server 进行这种翻译有什么已知的原因吗？它只是删除了一些语法糖并以更简单的形式存储子句吗？
2.  有没有办法避免这种行为（除了以长格式编写我的约束子句以匹配 SQL Server 将其更改为的内容）？
3.  有没有另一种方法来判断我的检查约束是否“过时”并且需要重新创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T02:14:15.507

> SQL Server 进行这种翻译有什么已知的原因吗？它只是删除了一些语法糖并以更简单的形式存储子句吗？

我不知道联机丛书中或其他地方记录的任何原因。但是，我的猜测是它已针对 SQL Server 内部的某些目的进行了规范化。它可能允许 SQL Server 在定义表达式时稍微宽松一些（例如`Database`用于列名），但保证对于需要解析表达式的任何引擎（即`[Database]`），列名总是被适当地转义。

> 有没有办法避免这种行为（除了以长格式编写我的约束子句以匹配 SQL Server 将其更改为的内容）？

可能不是。但是，如果您的约束不是非常复杂，那么以长格式重写约束子句是个坏主意吗？

> 有没有另一种方法来判断我的检查约束是否“过时”并且需要重新创建？

在我直接回答这个问题之前，我要指出这里涉及到一些编程哲学。SQL Server 为 CHECK 约束的文本提供的 API 仅保证您将获得与原始表达式*等效的内容。*虽然您当然可以构建一些奇特的方法来尝试确保始终能够重现 SQL Server 的规范化版本的表达式，但不能保证 Microsoft 将来不会更改其规范化规则。事实上，可能无法保证两个等价的表达式总是相同地标准化！

因此，我首先建议您重新检查您的架构，看看您是否可以在不必依赖未记录的 API 行为的情况下完成相同的结果。

Having said that, there are a number of methods outlined in [this question](https://stackoverflow.com/questions/1206514/a-simple-way-to-generate-sql-servers-standard-form-of-an-expression) (and answer).

Another alternative, which is a bit more brute-force but perhaps acceptable, would be to *always assume that the expression is "out of date"* and simply drop/re-create the constraint every time you check. Unless you're expecting these constraints to *frequently* become out-of-date (or the tables are quite large), it seems this would be a decent solution. You could probably even run it in a transaction, so that if the new constraint is already violated, simply roll-back the transaction and report the error.

# php - MYSQL 查询同时从两个表中选择一个数据集只在一个表中可用

> ID：15423645
> 
> 赞同：0
> 
> 时间：2013-03-15T02:20:14.567
> 
> 标签：php, mysql, sql

我有两个表，**用户**和用户**字段**

我想从两个表中选择一些数据点，根据**用户**表中的用户名字段进行**搜索**。**user**表还包含一个**userid**，因此随后我想使用**userid**数据点从**userfield**表中提取一些数据点

 **这是数据的示例

***表：用户***

++ 用户 ++ 用户 ID ++ 头像

++ 标记 ++ 12345 ++ 15

++ 约翰 ++ 54321 ++ 25

***表：用户字段***

++用户ID ++位置++性别

++ 12345 ++ 美国 ++ 男性

++ 54321 ++ 加拿大 ++ 男性

是否可以**通过仅基于提供的用户名**的单个查询同时选择*用户、用户 ID 和位置*？

 **太棒了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T02:22:22.063

您正在寻找一个非常简单的 SQL 概念，称为 JOIN。您想在 userid 字段上加入两个表：

```
SELECT user, avatar, location, sex
FROM User JOIN Userfield USING (userid) 
```

这将从两个表中选择用户标识匹配的所有列。

要按特定用户名过滤，请使用`WHERE`子句：

```
WHERE user = 'Mark'
WHERE user IN ('Mark', 'John') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:22:15.827

这就是你要找的所有东西 - 一个基本的`INNER JOIN`：

```
SELECT *
FROM User U 
   INNER JOIN UserField UF ON U.UserId = UF.UserId
WHERE U.User = 'UserName' 
```****

# android - Android：图像/png的意图在列表中显示mp4视频

> ID：15423649
> 
> 赞同：1
> 
> 时间：2013-03-15T02:21:00.990
> 
> 标签：android, video, android-intent, android-image

我想将图像加载到我的应用程序中，并通过使用 intent.setType 方法为用户提供显示所有可用图像的意图：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);  
intent.setType("image/png"); 
```

尽管如此，mp4 视频仍然出现在列表中，即使有一个单独的视频类型（“video/mp4”）我不使用（曾经）。

有没有办法明确阻止视频显示在列表中？还是我唯一的赌注是事后检查用户没有选择视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T18:50:26.997

答案是将其添加到您的意图中。

```
i.setType("image/*"); 
```

# java - 在 .jsp 文件中使用 javascript

> ID：15423650
> 
> 赞同：1
> 
> 时间：2013-03-15T02:21:05.763
> 
> 标签：java, javascript, html, jsp

因此，在 Eclipse 中，当您生成 .jsp 文件时，它会自动包含以下顶行：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%> 
```

有没有办法也包含 javascript 代码，以便我可以有一些用 java 编写的文件和一些用 javascript 编写的文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:24:19.480

通常我在 JSP 中包含我的 JavaScript，如下所示：

```
<script type="text/javascript" src="js/script.js"></script> 
```

这样我可以最小化 js 代码，并且缓存它与 Tomcat 中的 JSP 文件不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:35:21.143

答案是可以的，可以在jsp中添加js。这也有好处。它可以帮助您使用存储在请求和会话中的值，因为包含 jsp 中的 jsp 内容的 js 代码将被编译，而 *.js 文件则不会。另外你应该记住，你最好将js代码放在.js文件中而不是jsp中，这样浏览器就不需要重复加载它，代码看起来更清晰，也有利于调试。另一个答案为您提供了导入 js 文件的示例代码，所以我忽略了它。

# java - JTextField 周围的 TitledBorder

> ID：15423653
> 
> 赞同：0
> 
> 时间：2013-03-15T02:21:15.123
> 
> 标签：java, swing

在 java 中，当我在 JTextField 周围使用 TitledBorder 时，JTextField 的一部分会在各个方向上溢出 TitledBorder。有没有办法防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T09:03:05.640

如果用 a 替换文本字段的`TitledBorder`边框，则会丢失该字段的自然边框。解决方案是创建一个与字段边界`CompoundBorder`相结合的：`TitledBorder`

```
JTextField field = new JTextField(10);
field.setBorder(new CompoundBorder(BorderFactory.createTitledBorder("Title"), field.getBorder())); 
```

但是 TitledBorder 仍然继承文本字段的背景颜色。

另一种解决方案是将文本字段嵌入 a`JPanel`并将其`TitledBorder`放在面板上：

```
JTextField field = new JTextField(10);

JPanel borderPanel = new JPanel();
borderPanel.setBorder(BorderFactory.createTitledBorder("Title"));
borderPanel.add(field); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:49:40.997

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class AA
{
    public static void main(String[] args)
    {
        FrameCreator Frame= new FrameCreator();
        Frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Frame.setVisible(true);
    }
}

class FrameCreator extends JFrame
{
    public FrameCreator()
    {
        int height=100;
        int width=300;
        setSize(width,height);
        setLocation(0,0);

        setTitle("TextField example");

        showPanel=new JPanel();
        textFieldPanel=new JPanel();

        label=new JLabel("Sentence");
        label.setFont(new Font("Serif",Font.PLAIN,12));

        showPanel.add(label);
        add(showPanel, BorderLayout.CENTER);

        textfield=new JTextField("Sentence", 20);
        textfield.setBorder(BorderFactory.createTitledBorder("Name"));
        textfield.addActionListener(
            new ActionListener()
            {
                public void actionPerformed(ActionEvent evento1)
                {

                    String sentence=textfield.getText();

                    label.setText(sentence);
                }
            });

        textFieldPanel.add(textfield);
        add(textFieldPanel, BorderLayout.SOUTH);
    }

    JLabel label;
    JPanel showPanel, textFieldPanel;
    String sentence;
    JTextField textfield;
} 
```

我用过 textfield.setBorder(BorderFactory.createTitledBorder("Name"));

# python - 单行注释的正则表达式

> ID：15423658
> 
> 赞同：3
> 
> 时间：2013-03-15T02:21:39.770
> 
> 标签：python, regex

什么是单行 java 注释的正则表达式：我正在尝试以下语法：

```
 def single_comment(t):
          r'\/\/.~(\n)'
          #r'//.*$'
          pass 
```

但是，我无法忽略单行注释我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:50:31.030

用于匹配单行注释的 Python 正则表达式（仅匹配以 // 开头的注释，而不是 /* */）。不幸的是，这个正则表达式非常难看，因为它必须考虑转义字符和 // 字符串。如果您在实际代码中需要这个，您应该找到一个更容易理解的解决方案。

```
import re
pattern = re.compile(r'^(?:[^"/\\]|\"(?:[^\"\\]|\\.)*\"|/(?:[^/"\\]|\\.)|/\"(?:[^\"\\]|\\.)*\"|\\.)*//(.*)$') 
```

这是一个针对该模式运行一堆测试字符串的小脚本。

```
import re

pattern = re.compile(r'^(?:[^"/\\]|\"(?:[^\"\\]|\\.)*\"|/(?:[^/"\\]|\\.)|/\"(?:[^\"\\]|\\.)*\"|\\.)*//(.*)$')

tests = [
    (r'// hello world', True),
    (r'     // hello world', True),
    (r'hello world', False),
    (r'System.out.println("Hello, World!\n"); // prints hello world', True),
    (r'String url = "http://www.example.com"', False),
    (r'// hello world', True),
    (r'//\\', True),
    (r'// "some comment"', True),
    (r'new URI("http://www.google.com")', False),
    (r'System.out.println("Escaped quote\""); // Comment', True)
]

tests_passed = 0

for test in tests:
    match = pattern.match(test[0])
    has_comment = match != None
    if has_comment == test[1]:
        tests_passed += 1

print "Passed {0}/{1} tests".format(tests_passed, len(tests)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T21:10:24.330

我认为这有效（使用[pyparsing](http://pyparsing.wikispaces.com/)）：

```
data = """
class HelloWorld {

    // method main(): ALWAYS the APPLICATION entry point
    public static void main (String[] args) {
        System.out.println("Hello World!"); // Nested //Print 'Hello World!'
        System.out.println("http://www.example.com"); // Another nested // Print a URL
        System.out.println("\"http://www.example.com"); // A nested escaped quote // Print another URL
    }
}"""

from pyparsing import *
from pprint import pprint
dbls = QuotedString('"', '\\', '"')
sgls = QuotedString("'", '\\', "'")
strings = dbls | sgls
pprint(dblSlashComment.ignore(strings).searchString(data).asList())

[['// method main(): ALWAYS the APPLICATION entry point'],
 ["// Nested //Print 'Hello World!'"],
 ['// Another nested // Print a URL'],
 ['// A nested escaped quote // Print another URL']] 
```

如果您有`/* ... */`样式注释，其中恰好有单行注释，并且实际上并不想要这些，那么您可以使用：

```
pprint(dblSlashComment.ignore(strings | cStyleComment).searchString(data).asList()) 
```

（*如[https://chat.stackoverflow.com/rooms/26267/discussion-between-nhahtdh-and-martega](https://chat.stackoverflow.com/rooms/26267/discussion-between-nhahtdh-and-martega)*中所述）

# pagination - Jekyll 将博客分页为子目录

> ID：15423665
> 
> 赞同：3
> 
> 时间：2013-03-15T02:22:23.560
> 
> 标签：pagination, blogs, jekyll, subdirectory

我将 Jekyll 用于静态站点，并尝试将博客生成为子目录/子文件夹：

```
http://example.com/blog 
```

在运行jekyll之前的目录结构中，这个是blog/index.html。

我尝试通过向 _config.yml 添加“paginate: 5”来添加分页，但生成的 url 的形式为：

```
http://example.com/page2/ 
```

即没有“/博客”。这是通过以下方式解决的：

分页路径：/blog/page/:num

在 _config.yml 中。

但生成的页面位于：

```
http://example.com/blog/page/2/ 
```

不要使用 blog/index.html 作为他们的布局。他们使用根 index.html。那么，即使有 paginate_path 选项又有什么意义呢？

如何使用 Jekyll 在 example.com/blog 上获取我的博客，并带有分页功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T14:39:16.323

使用`destination`_config.yml 文件中的键来设置要将输出发布到的基本路径。例如，

```
paginate: 5
destination: _site/blog 
```

请注意，假设您的站点设置为从“_site” jekyll 提供其根目录（例如“ [http://example.com/”），jekyll](http://example.com/)不会在该位置生成“index.html”页面。jekyll 构建的所有内容都将位于“blog”目录下，但这听起来像是您所追求的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-11T15:49:37.293

我通过这个[页面](http://patrick-mckinley.com/tech/jekyll-pagination.html)找到了一个修复程序基本上它涉及到一些技巧来确定你是否在博客的第 n 页上，然后包含一个文件来拉入你的博客部分。

在`_includes/custom/`名为`pagination`. 在那有你的分页代码

```
<!-- This loops through the paginated posts -->
{% for post in paginator.posts %}
  <h1><a href="{{ post.url }}">{{ post.title }}</a></h1>
  <p class="author">
    <span class="date">{{ post.date }}</span>
  </p>
  <div class="content">
    {{ post.content }}
  </div>
{% endfor %}

<!-- Pagination links -->
<div class="pagination">
  {% if paginator.previous_page %}
    <a href="/page{{ paginator.previous_page }}" class="previous">Previous</a>
  {% else %}
    <span class="previous">Previous</span>
  {% endif %}
  <span class="page_number ">Page: {{ paginator.page }} of {{ paginator.total_pages     }}</span>
  {% if paginator.next_page %}
    <a href="/page{{ paginator.next_page }}" class="next">Next</a>
  {% else %}
    <span class="next ">Next</span>
  {% endif %}
</div> 
```

现在在你的`_layout/index.html`添加

```
{% if paginator.page != 1 %}
{% include custom/pagination %}
{% else %}
The original content of index
{% endif %} 
```

# java - 如何使用 iciql 模型生成

> ID：15423667
> 
> 赞同：0
> 
> 时间：2013-03-15T02:22:25.530
> 
> 标签：java, mysql, database, orm

现在，我尝试使用[iciql](http://iciql.com/tools.html)的模型生成工具自动制作模型类。我使用Windows7。我在命令提示符下尝试了这个命令。

* * *

**>cd C:\Users\xxxx\iciql-1.1.0

> java -jar iciql-1.1.0.jar -url jdbc:mysql://localhost:3306/xxxx -user root -password xxxx**

* * *

并返回此错误消息。

**错误：找不到适合 jdbc:mysql://localhost:3306/xxxx 的驱动程序**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T06:01:00.007

实际上，消息说明了一切：类路径上没有 mysql jdbc 驱动程序。下载它并使用类似的东西

```
java -cp mysql-connector-java-5.1.15.jar -jar iciql-1.1.0.jar \
     -url jdbc:mysql://localhost:3306/xxxx -user root -password xxxx** 
```

# c# - sql命令不显示表

> ID：15423670
> 
> 赞同：-1
> 
> 时间：2013-03-15T02:22:58.307
> 
> 标签：c#, asp.net

我在按钮后面有这个代码，当按下按钮时，它会在 SQL 中显示表格。我似乎不知道为什么它不显示任何表格的问题？

我添加了这行代码来检查 BatchID 是否超出 sql 表中的范围

```
 if (read.Read())
    {
        GridView1.DataSource = read;
        GridView1.DataBind();
    }
    else
    {
        lbl_NoBatchID.Text = "BatchID out of range";
    }

   protected void Button1_Click(object sender, EventArgs e)
    {
       if (DropDownList1.SelectedItem.ToString() =="ER00 - File Header")
        {

            using (SqlConnection con = new SqlConnection(ConfigurationSettings.AppSettings["DBcon"]))
            {
                if (String.IsNullOrEmpty(TextBox_ID.Text.ToString()))
                {
                    lbl_NoBatchID.Text = "Please enter BatchID!";

                }
                else
                {
                    try
                    {
                        lbl_NoBatchID.Text = "";
                        SqlCommand sqlCommand = new SqlCommand("Select * from tbl_WinApps_FileHeader Where BatchID =" + TextBox_ID.Text.ToString());
                        sqlCommand.Connection = con;
                        con.Open();
                        SqlDataReader read = sqlCommand.ExecuteReader();
                        if (read.Read())
                        {
                            GridView1.DataSource = read;
                            GridView1.DataBind();
                        }
                        else
                        {
                            lbl_NoBatchID.Text = "BatchID out of range";
                        }
                    }
                    catch (Exception)
                    {                           

                    }

                }
            }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:51:29.073

确保你做两件事。

1.) 关闭`DataReader`后`Databind()`。

2.)`AutoGenerateColumns="True"`为您的`GridView`.

# php - Laravel 控制器中每个方法的动作过滤器

> ID：15423676
> 
> 赞同：5
> 
> 时间：2013-03-15T02:23:45.710
> 
> 标签：php, laravel

我正在为客户构建一个相当广泛的应用程序，我将不得不产生某种组权限控制。我决定选择 Cartalyst 和他们的**Sentry**套餐。
到目前为止，一切都很好！

现在我遇到的问题是，检测用户组权限的最佳方法是什么，因为不止一个，所以我不能只使用一个过滤器并完成它。

例如，我会做这样的事情：

对于需要管理员级别访问权限的页面

```
Route::group(array('before' => 'is_admin'), function()
{
       Route::get('admin', array('as'=>'admin', 'uses'=>'admin@index'));
       // Other methods that require admin-level access
}); 
```

对于需要更多级别访问的页面等等..

```
Route::group(array('before' => 'is_moderator'), function()

    {
           Route::get('orodja/plosca', array('as'=>'moderator', 'uses'=>'moderator@index'));
           // Other methods that require moderator-level access
    }); 
```

我在使用这种方法时遇到的问题是，我需要为每个控制器操作定义一个新路由，这对我来说确实不是最佳实践。

接下来，我考虑注册所有控制器`Controller::detect()`并使它们成为 REST-full，但我这里的问题是，我只能将过滤器应用于控制器的构造函数方法，而不是单个操作。如果我在一个控制器中有不同访问级别的方法怎么办..？

**所以我的问题是：**解决这个问题的最佳方法是什么，有没有办法将动作过滤器应用于单个控制器方法，而不是控制器构造函数。

谢谢和对不起我的英语！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T10:11:10.260

您可以将过滤器附加到以给定 URI 开头的所有请求（请参阅[有关过滤器的官方文档](http://three.laravel.com/docs/routing#filters)）

```
Route::filter('pattern: admin/*', 'auth'); 
```

或者您可以仅将过滤器附加到控制器中的某些操作：

```
$this->filter('before', 'auth')->only(array('index', 'list')); 
```

附带说明一下，您不必为您拥有的每个控制器操作创建路由。如果您注册控制器，`Route::controller('admin::home');`它将自动触发。

另一种选择是您只`auth`为所有角色定义一个过滤器，然后检查过滤器中的不同*角色*。

# ios - Objective C中具有相同函数名称的类别

> ID：15423677
> 
> 赞同：5
> 
> 时间：2013-03-15T02:23:48.500
> 
> 标签：ios, iphone, objective-c, ipad

如果一个 XCode 项目有两个类别：

```
@implementation NSData (test1)
- (void) testData {
     NSLog(@"test data 1");
} 
@end 
```

和

```
@implementation NSData (test2)
- (void) testData {
     NSLog(@"test data 2");
} 
@end 
```

这个的预期输出是什么：

```
NSData* testData = [[NSData alloc] init];
[testData testData]; 
```

我得到的输出总是

```
#import "NSData+test1.h" 
```

对此有何解释？有没有办法强制第一类？

这里的问题是，如果您要导入两个具有相同名称类别的静态库的 SDK，您如何解决这个问题。我假设唯一的方法是要求 SDK 创建者为方法名称使用前缀？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-15T02:30:26.887

该行为未定义，应避免。以下是[相关文档](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html)：

> ### 避免类别方法名称冲突
> 
> 因为在类别中声明的方法被添加到现有类中，所以您需要非常小心方法名称。
> 
> **如果在一个类别中声明的方法的名称与原始类中的方法相同，或者与同一类（甚至超类）上的另一个类别中的方法相同，则行为未定义至使用哪种方法实现运行时**。如果您将类别与您自己的类一起使用，这不太可能成为问题，但在使用类别向标准 Cocoa 或 Cocoa Touch 类添加方法时可能会导致问题。

# python-3.x - 在打印功能上需要帮助

> ID：15423679
> 
> 赞同：1
> 
> 时间：2013-03-15T02:24:05.570
> 
> 标签：python-3.x, printf

嘿，所以我想知道是否有办法在打印输出中的文本之前写出计算出的数字。我知道的唯一方法是将程序中的值放在这样的文本之后：

```
a=3+4
print("Your number is", a) 
```

我很好奇是否有办法将值放在首位，然后将文本放在打印中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T02:46:03.817

开头和结尾是特殊情况，你可以使用

```
print(a, "is your number.") 
```

或者

```
print("Your number is ", a) 
```

如果你需要在句末加上句号。你可以用这个

```
print("Your number is ", a, ".") 
```

但这样一来，就不清楚这些部分是如何组合在一起的。想象一下，如果有 10 个或更多部分！在一般情况下，最好使用该`format`方法，例如

```
print("Your number is {}.".format(a)) 
```

甚至

```
print("Your number is {a}.".format(a=a)) 
```

`format`还可以让您左/右/居中对齐，添加前导零，指定精度和许多其他手的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:42:19.357

做就是了`print(a, "is your number")`

# python - 如何使用 Python 从 Selenium 的下拉列表中选择未显示的选项

> ID：15423682
> 
> 赞同：1
> 
> 时间：2013-03-15T02:24:14.560
> 
> 标签：python, selenium, html-select

我正在尝试编写一个 Selenium 驱动程序来测试使用下拉（组合）检查列表的网页。以下代码显示了该问题。

```
#!/usr/bin/python

from selenium import webdriver
from selenium.webdriver.support.ui import Select

driver = webdriver.Firefox()

driver.get("http://dropdown-check-list.googlecode.com/svn/trunk/doc/ddcl-tests.html")

selector = driver.find_element_by_id("s1")

allOptions = selector.find_elements_by_tag_name("option")

for option in allOptions:
    print "Value is", option.get_attribute("value")
    option.click() 
```

当我运行它时，我得到以下输出：

```
Value is Low
Traceback (most recent call last):
  File "./ddcl-test.py", line 24, in <module>
option.click()
File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/webelement.py", line 51, in click
self._execute(Command.CLICK_ELEMENT)
File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/webelement.py", line 225, in _execute
return self._parent.execute(command, params)
File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/webdriver.py", line 160, in execute
self.error_handler.check_response(response)
File "/Library/Python/2.7/site-packages/selenium/webdriver/remote/errorhandler.py", line 149, in check_response
raise exception_class(message, screen, stacktrace)
selenium.common.exceptions.ElementNotVisibleException: Message: u'Element is not currently visible and so may not be interacted with' ; Stacktrace: Method fxdriver.preconditions.visible threw an error in file:///var/folders/d4/qbgb29wx7z7fpr15t___x24h0000gn/T/tmpBzUUcu/extensions/fxdriver@googlecode.com/components/command_processor.js 
```

它无法单击元素，因为它没有显示。

我该如何解决这个问题？或者这是 Selenium 中无法测试的案例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T16:20:59.310

问题是`<SELECT>`您尝试访问的内容被 jQuery 故意隐藏：

```
<select id="s1" class="s1" tabindex="8" multiple="" style="display: none;">
    <option>Low</option>
    <option>Medium</option>
    <option>High</option>
</select> 
```

WebDriver 不会点击隐藏的元素。时期。这是故意的，因为最终用户也无法单击它。WebDriver 不想让你做人类做不到的事情。

相反，您必须以与人类相同的方式与浏览器交互：通过单击 jQuery 向人类公开的任何元素。对于此示例，人类 UI 是：

```
<span id="ddcl-s1" class="ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget" style="display: inline-block; cursor: default; overflow: hidden;">
    <span class="ui-dropdownchecklist-selector ui-state-default" style="display: inline-block; overflow: hidden; white-space: nowrap; width: 85px;" tabindex="8">
        <span class="ui-dropdownchecklist-text" style="display: inline-block; white-space: nowrap; overflow: hidden; width: 81px;" title=" "> 
        </span>
    </span>
</span>
<div id="ddcl-s1-ddw" class="ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper ui-widget" style="position: absolute; left: -33000px; top: -33000px; height: 74px; width: 91px;">
    <div class="ui-dropdownchecklist-dropcontainer ui-widget-content" style="overflow-y: auto; height: 74px;">
        <div class="ui-dropdownchecklist-item ui-state-default" style="white-space: nowrap;">
            <input id="ddcl-s1-i0" class="active" type="checkbox" tabindex="8" disabled="" index="0" value="Low">
            <label class="ui-dropdownchecklist-text" for="ddcl-s1-i0" style="cursor: default;">Low</label>
        </div>
        <div class="ui-dropdownchecklist-item ui-state-default" style="white-space: nowrap;">
            <input id="ddcl-s1-i1" class="active" type="checkbox" tabindex="8" disabled="" index="1" value="Medium">
            <label class="ui-dropdownchecklist-text" for="ddcl-s1-i1" style="cursor: default;">Medium</label>
        </div>
        <div class="ui-dropdownchecklist-item ui-state-default" style="white-space: nowrap;">
            <input id="ddcl-s1-i2" class="active" type="checkbox" tabindex="8" disabled="" index="2" value="High">
            <label class="ui-dropdownchecklist-text" for="ddcl-s1-i2" style="cursor: default;">High</label>
        </div>
    </div>
</div> 
```

所以看起来要与之交互的东西是`<input id="ddcl-s1-i*" ...>`元素之一，但确实不容易确定。

这就是为什么我们中的一些人认为从 span 和 div 重构现有 HTML 功能的 JavaScript 框架是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:22:26.457

我已经尝试了无数次来单击不可见的元素，而这对 selenium 来说是不可行的，或者至少我还没有找到方法。看起来您并没有尝试先单击下拉按钮，因此我建议您先单击下拉菜单按钮以显示菜单，我认为这应该可以解决您的问题。

# soundcloud - 按时间倒序播放

> ID：15423686
> 
> 赞同：4
> 
> 时间：2013-03-15T02:24:27.883
> 
> 标签：soundcloud

**Soundcloud**令人难以置信。与所有其他以音乐为导向的网站相比，作为一名计算机科学专业的学生和一个铁杆音乐迷，我可以肯定地说，Soundcloud 是一个美丽的创作，无论是在目的上还是在设计上。关于我的（基本的和有点次要的）想法：

我觉得 Soundcloud 有一个允许反向播放的功能是有益的——不是反向播放歌曲文件本身，而是按时间倒序播放。包括这个选项只是一个可切换的（可能不是一个真实的词）`i--`与`i++`一个附加条件的问题。

这样做可以让用户按照从旧到新的顺序收听他们的最爱，了解艺术家随着时间的推移的发展等等。虽然这不一定重要，但我认为它非常实用，尤其是当 iTunes 等程序提供按添加/修改日期排序的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:42:16.603

就像 HeatherSpence 说的，你可以使用 API 来构建你自己的播放器（也许是 reverse-soundcloud.com ??），或者只是按照你喜欢的任何顺序制作一个播放列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:27:18.050

这可以通过使用 API 中 /tracks 资源的 created_at 时间戳来完成。

您的问题最好直接针对programmers.stackexchange.com，因为该站点更多地用于与特定代码相关的故障排除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-20T00:40:28.333

在这里回答一个旧帖子，但是，由于 Soundcloud 播放列表，包括喜欢的曲目播放列表，与今天的行为方式仍然相同（意味着收听从最旧的添加歌曲开始到最近添加的歌曲，无法切换），这在我看来，问题仍然是一个热门话题。

为此，我不久前创建了自己的播放器。你可以在这里试试：[https](https://alexandre.abrioux.fr/sc/) ://alexandre.abrioux.fr/sc/ ；并且代码是开源的：[https](https://github.com/alexandre-abrioux/soundcloud-reverse) ://github.com/alexandre-abrioux/soundcloud-reverse 。

我希望这可以帮助您，无论您只是想按时间倒序收听您喜欢的播放列表，还是创建自己的播放器。干杯

# python - 二叉树方法

> ID：15423688
> 
> 赞同：1
> 
> 时间：2013-03-15T02:24:58.793
> 
> 标签：python, tree, binary-tree

我正在尝试编写一个函数，该函数返回二叉树的叶节点列表和内部节点列表的元组。

所以我尝试这样做的方式是初始化两个列表（一个用于叶节点，另一个用于内部节点）。

我已经编写了我的代码，它应该可以正常工作，但只有一个问题。由于我必须递归地执行此操作，因此我必须调用该函数本身，这意味着列表的初始化将再次发生，并且只会重置列表。这不是我想要的。我想继续向这些列表中添加元素并最终返回它们......

编辑：对不起，我不能添加我的代码，但我可以给你一个粗略的想法：

```
list1=[]
list2=[]
if (leaf node reached):
            add leaf node to list1

else:
            add node to list2
            call the function on the left child
            call the function on the right child
return (leaves_data,internals_data) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:37:02.730

在某种程度上，您应该确保初始化只发生一次。有不同的方法可以做到这一点。

一种方法是在函数之外进行初始化，假设你有这样的东西（伪代码）：

```
function recursiveFunction():
    // Here you had your old init code, you don't need it here anymore
    // Here your function is the same as before
    // [ ... ]
    recursiveFunction()
    return; // Some return statement
end 

// Init stuff here (make sure these variables/list you init are globally defined, so they can be accessed from inside the function
// Then call your recursive function:
recursiveFunction() 
```

另一种简单（但不一定很漂亮）的方法是在初始化完成后将一些全局变量设置为 true，例如：

```
global variable init_is_done = false // Make sure this can be accessed inside your function

function recursiveFunction():
    // Check if init_is_done is true before doing init
    if not init_is_done:
        // Have your init code here
        init_is_done = true
    endif

    // Here your function is the same as before
    // [ ... ]
    recursiveFunction()
    return; // Some return statement
end 

// Now you can just call your function
recursiveFunction() 
```

根据您使用的语言，不同的方法可能会很好。我当然会尝试将 init 东西放在函数之外。希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:47:00.883

在每个递归步骤中，您最初都会创建一个空列表来仅存储来自该迭代的数据。然后调用递归函数，该函数有望返回具有更多内容的其他列表。您将返回的列表附加到您的列表中，并且您将在递归函数正在迭代的树的相关分支中获得正确的部分结果。最后，您从函数返回合并列表，允许树的上层再次追加结果并增长结果，直到它返回到根级别。

这称为递归步骤，只要递归的基础（即使递归停止的规则）正确，它就可以工作。

```
def get_nodes(l):
    # Recursion base
    if l is None: return ([], [])
    if l.children is None: return ([], [l])

    # Recursion step
    this = ([l], [])
    internal, leaf = get_nodes(l.children.left)
    this[0] += internal
    this[1] += leaf

    internal, leaf = get_nodes(l.children.right)
    this[0] += internal
    this[1] += leaf

    return this 
```

（注：未经测试的伪代码，只是一个例子）

上面的所有描述都是概念性的，应该被认为是微不足道的实现。但是，在实际实现中，您将避免多次创建和附加多个列表。您可以通过将列表移动到全局范围并使用 global 关键字将全局值绑定到局部变量来在代码中执行此操作。

# clojure - （使用 Leiningen 或选择 JVM）在 OS X 上

> ID：15423691
> 
> 赞同：0
> 
> 时间：2013-03-15T02:25:19.567
> 
> 标签：clojure, jvm, osx-lion, leiningen

我想尝试 Clojure，但我从[这里](https://github.com/functional-koans/clojure-koans)开始的第一步遇到了一些麻烦。它建议使用 Leiningen 来设置 Clojure 项目。

我下载并运行`lein`，我看到了这个：

```
Error: dl failure on line 732
Error: failed /Library/Java/JavaVirtualMachines/OpenJDK-1.7.0-20110203.jdk/Contents/Home/jre/lib/client/libjvm.dylib, because dlopen(/Library/Java/JavaVirtualMachines/OpenJDK-1.7.0-20110203.jdk/Contents/Home/jre/lib/client/libjvm.dylib, 10): no suitable image found.  Did find:
    /Library/Java/JavaVirtualMachines/OpenJDK-1.7.0-20110203.jdk/Contents/Home/jre/lib/client/libjvm.dylib: mach-o, but wrong architecture 
```

通过一些研究，我发现这个 libjvm.dylib 的副本是为 x86 构建的。我怀疑我需要一个为 x86_64 构建的。我已经下载并安装了一个新的 jvm。你可以在这里看到它们：

```
$ /usr/libexec/java_home -V
Matching Java Virtual Machines (7):
    1.7.0_b126+, x86_64:    "OpenJDK 7" /Library/Java/JavaVirtualMachines/OpenJDK-1.7.0-20110203.jdk/Contents/Home
    1.7.0_b126+, i386:  "OpenJDK 7" /Library/Java/JavaVirtualMachines/OpenJDK-1.7.0-20110203.jdk/Contents/Home
    1.7.0_12, x86_64:   "Java SE 7" /Library/Java/JavaVirtualMachines/jdk1.7.0_12.jdk/Contents/Home
    1.6.0_43-b01-447, x86_64:   "Java SE 6" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
    1.6.0_43-b01-447, i386: "Java SE 6" /System/Library/Java/JavaVirtualMachines/1.6.0.jdk/Contents/Home
    1.6.0_26-b03-383, x86_64:   "Java SE 6" /Library/Java/JavaVirtualMachines/1.6.0_26-b03-383.jdk/Contents/Home
    1.6.0_26-b03-383, i386: "Java SE 6" /Library/Java/JavaVirtualMachines/1.6.0_26-b03-383.jdk/Contents/Home 
```

我要使用的 libjvm.dylib 的副本在`/Library/Java/JavaVirtualMachines/jdk1.7.0_12.jdk/...`

但我不知道如何告诉 leiningen 使用它。我实际上不认为它是 leiningen，但无论该文件用于下载什么。无论这个东西坚持使用什么`/Library/Java/JavaVirtualMachines/OpenJDK-1.7.0-20110203.jdk/`，即使我更改 JAVA_HOME 或将此目录重命名为`/Library/Java/JavaVirtualMachines/jdk.old.foo`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:14:52.107

Mac 上的 Java 7 仍然很[糟糕](https://stackoverflow.com/questions/11553197/spurious-calls-to-setvalueat-with-jtables-in-java-7-on-os-x-lion)（至少就我的目的而言），即使在机器上安装它也会弄乱 Apple 提供的通常可以正常工作的 Java 6。删除所有 Java 7 安装（可能注销/重新启动），然后从命令行查看 Java 6 是否会运行（键入 java -version）。如果你看到这样的东西：

```
$ java -version
java version "1.6.0_43"
Java(TM) SE Runtime Environment (build 1.6.0_43-b01-447-11M4203)
Java HotSpot(TM) 64-Bit Server VM (build 20.14-b01-447, mixed mode) 
```

如果你这样做了，那么你很高兴。删除 JDK 7 后，我可以在我的 mac 上继续我的[Clojure 工作。](http://www.warscore.net)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-15T02:39:03.070

仔细检查以下步骤：

1.  将 lein 复制到 /usr/bin/lein
2.  chmod 755 /usr/bin/lein
3.  莱因雷普

# c# - MySQL将查询中的日文字符作为问号进行比较

> ID：15423692
> 
> 赞同：4
> 
> 时间：2013-03-15T02:25:30.253
> 
> 标签：c#, mysql, character-encoding, localization

我有一个 MySQL 数据库，其中包含一些可以包含拉丁字符或日语字符的 varchar 字段。有些条目包含日文字符，这不是问题。但是，从我的 C# 代码中，使用`MySqlConnection`，我无法在我的`WHERE`子句中使用日文字符获得正确的结果。似乎比较日文字符就好像它们是问号一样。例如，查询`WHERE series_title LIKE '%未来警%'`不返回`series_title`包含“未来警”的值，而是返回`series_title`包含“???”的所有条目。

一些细节：

*   `series_title`是一个`varchar(150)`with collat​​ion `utf8_general_ci`。
*   `ConnectionString`for`MySqlConnection`包括 kv对`CharSet=utf8_general_ci`
*   数据库确实包含日文字符，并且能够将它们返回给 C# 客户端 - 只有在向其发送日文字符时才会出现问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:31:36.780

尝试添加`charset=utf8`到您的连接字符串：

`server=server;uid=my_user;password=pass;database=db;charset=utf8;`

编辑：

连接后尝试执行此sql：

`SET NAMES utf8`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:14:12.080

我会确保您的数据使用[正确的编码](http://dev.mysql.com/doc/refman/5.0/en/charset-applications.html)存储。对于日语，您可能想尝试 eucjp，您可以在这里找到[比您想知道的更多的字符编码](http://www.bluebox.net/about/blog/2009/07/mysql_encoding/)。看起来您[可能还需要 BOM](http://www.webmasterworld.com/webmaster/4168927.htm)。祝你好运，让我知道你过得怎么样。

# c++ - 你能在 lambda 中捕获数组吗？

> ID：15423695
> 
> 赞同：16
> 
> 时间：2013-03-15T02:26:07.100
> 
> 标签：c++, c++11, lambda

我处于多线程环境中的情况，我有一个从套接字接收数据的线程，并且我想将该数据发送到消息传递队列中。

例如，像这样：

```
char buf[N];
size_t len = ::recv(buf, ...);
queue.send([buf,len] {
    //stuff
}); 
```

但这不起作用，因为`buf`可能超出范围，或者被 next 覆盖`::recv()`。现在我可以将它复制到/ / *whatever*并按值传递*那个*东西：`string``std::vector`

 *```
char buf[N];
size_t len = ::recv(buf, ...);
std::string my_data(buf, len);
queue.send([my_data](){ /* stuff */ }); 
```

但是我会产生额外的副本，对吗？有没有办法在没有额外开销的情况下获得相同的功能？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T02:30:08.967

是的你可以。该标准说（5.1.2p21）：

> 当计算 lambda 表达式时，复制捕获的实体用于直接初始化结果闭包对象的每个相应的非静态数据成员。（对于数组成员，数组元素按照下标升序直接初始化。）

这清楚地表明 lambda 可以通过复制捕获数组。*

# ios - UIPickerView 的 selectedRowInComponent 仅在旋转且未选中时返回随机行。怎么了？

> ID：15423699
> 
> 赞同：0
> 
> 时间：2013-03-15T02:26:16.403
> 
> 标签：ios, uiview, uipickerview

我有一个双选择器和两个 NSInteger 变量，它们更新选择器的每个组件所在的行。在 iPhone 模拟器中（我没有在实际的 iPhone 上测试过），如果我选择行（即单击下方或上方），数字很好，但是当我旋转时，我收到的行号通常与实际相差几个。这是我所拥有的：

```
- (UIView *)pickerView:(UIPickerView *)pickerView
        viewForRow:(NSInteger)row
      forComponent:(NSInteger)component reusingView:(UIView *)view {

if (component == kSuitComponent) {
    UIImage *image = self.suitImages[row];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
    [self theSuitRow];
    return imageView;
}
else {
    NSString *text = self.cardNumber[row];
    UILabel *label = [[UILabel alloc] init];
    [self getCardRow];
    label.text = text;
    return label;
}
}
 -(void) getCardRow {
    cardRow = [_doublePicker selectedRowInComponent:kCardNumberComponent];
}
-(void) theSuitRow {
suitRow = [_doublePicker selectedRowInComponent:kSuitComponent];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:32:54.483

应该：

```
- (UIView *)pickerView:(UIPickerView *)pickerView viewForRow:(NSInteger)row forComponent:(NSInteger)component reusingView:(UIView *)view {

    if (component == kSuitComponent) {
        UIImage *image = self.suitImages[row];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
        return imageView;
    }
    else {
        NSString *text = self.cardNumber[row];
        UILabel *label = [[UILabel alloc] init];
        label.text = text;
        return label;
    }
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
    if (component == kCardNumberComponent) {
        cardRow = row;
    } else {
        suitRow = row;
    }
} 
```

# c++ - 当有多个登录时检测多个应用实例的更改

> ID：15423700
> 
> 赞同：1
> 
> 时间：2013-03-15T02:26:22.957
> 
> 标签：c++, windows

假设我创建了一个由当前登录的两个用户运行的应用程序，`user1`处于非活动状态和`user2`活动状态，请参见下图（因此系统中同时存在两个进程），该应用程序将读/写一个物理文件，例如向该文件添加一些信息.

我的问题是，当`user2`向该文件添加一些数据时，切换回 后`user1`，如何`app inst1`知道更改？（我们当然可以重新启动`app inst1`，但这是不可取的）。

一种解决方案是让应用程序处理会话更改事件，在 Windows 中有一个`WTSRegisterSessionNotification`需要，`HWND`但我的应用程序是控制台应用程序。

有任何想法吗？

![插图](../Images/ea13e47ad759b47a0eed1875a3c833db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:31:53.263

您可以使用 Windows API 函数 FindFirstChangeNotification：

[http://msdn.microsoft.com/en-us/library/aa364417%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa364417%28VS.85%29.aspx)

您注册您希望收到通知的条件（在您的情况下，可能是上次更新时间）并获得一个句柄，然后您可以等待。我猜你会想把它放在一个单独的线程中，而不是阻塞你的主线程。

# php - 如何使用 xdebug 仅调试一台虚拟主机？

> ID：15423705
> 
> 赞同：10
> 
> 时间：2013-03-15T02:27:22.007
> 
> 标签：php, apache, profiling, xdebug

我已经安装了 xdebug，我可以在 phpinfo() 中看到它已安装（但它已关闭）。

但是，我不想为整个服务器/apache2 启用它，我只想为一个虚拟主机启用它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-16T00:59:55.183

`php.ini`您可以使用值设置 xdebug `off`：

```
zend_extension=/usr/lib/php/modules/xdebug.so
xdebug.remote_enable off
xdebug.remote_port 9000
xdebug.idekey PHP-XDEBUG 
```

`.htaccess`并仅使用指令打开：

```
php_flag   xdebug.remote_enable on 
```

# c# - 违反了多重性约束。关系 xxx 的角色 xxx 具有多重性 1 或 0..1

> ID：15423713
> 
> 赞同：2
> 
> 时间：2013-03-15T02:28:26.780
> 
> 标签：c#, entity-framework, data-binding

我见过这个问题问了几次，但恐怕我只是不理解答案。

简而言之，我有一个 Player，其中包含 PlayerBaseballStat 类型的属性。它是一对一的关系。PlayerBaseballStat 有一个`ICollection<BaseballStat>`属性。PlayerBaseballStat 和 BaseballStat 都有 PlayerId 加入关系。

```
 public class Player
    {
        public Player()
        {
            // initialize with empty shell
            PlayerBaseballStat = new PlayerBaseballStat();
        }
        public int PlayerId { get; set; }

//other properties removed for brevity

        public virtual PlayerBaseballStat PlayerBaseballStat { get; set; }

    }

public class PlayerBaseballStat 
    {
        [Required, Key, DatabaseGenerated(DatabaseGeneratedOption.None)]
        public int PlayerId { get; set; }
        public virtual Player Player { get; set; }

//other properties removed for brevity
       public virtual ICollection<BaseballStat> BaseballStats { get; set; }

    }
public class BaseballStat : EntityBase
    {
        public int PlayerId { get; set; }
        public virtual Player Player { get; set; }
        public int Year { get; set; }

        [MaxLength(25)]
        [Required]
        public string StatName { get; set; }
        [Required]
        public decimal StatValue { get; set; }

    } 
```

映射是：

```
 modelBuilder.Entity<Player>()
            .HasOptional(p => p.PlayerBaseballStat);

        modelBuilder.Entity<PlayerBaseballStat>()
          .HasRequired<Player>(x => x.Player);

        modelBuilder.Entity<PlayerBaseballStat>()
            .HasMany(p => p.BaseballStats);

        modelBuilder.Entity<BaseballStat>()
            .HasKey(x => new { x.PlayerId, x.Year, x.StatName });

        modelBuilder.Entity<BaseballStat>()
            .HasRequired(x => x.Player); 
```

数据访问层是一个模板存储库。多重性约束违反发生在读取操作上。

```
public T Get(Expression<Func<T, bool>> where)
    {
        return dbset.Where(where).FirstOrDefault<T>();
    } 
```

实际读取的是

```
_playerBaseballStatsRepository.Get(x => x.PlayerId == playerId); 
```

这转化为

```
dataContext.PlayerBaseballStats.FirstOrDefault(x => x.PlayerId == playerId); 
```

我知道我在映射中遗漏了一些东西，但我似乎无法弄清楚。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:08:21.647

具体是什么代码导致了这个问题？是在更新现有实体、插入新实体还是仅检索特定实体时？如果您也可以发布一些示例代码，这将有所帮助。我使用上面提供的模式（减去 BaseballStat 实体上的 EntityBase 继承）创建了一个小型演示应用程序，并完美地执行了以下操作：

```
var player = new Player()
    {
        PlayerBaseballStat = new PlayerBaseballStat()
        {
            BaseballStats = new Collection<BaseballStat>()
            {
                new BaseballStat()
                { 
                    StatName = "ERA", 
                    StatValue = 1.41M, 
                    Year = 2011
                }                                            
            }
        }
    };

    context.Players.Add(player);
    context.SaveChanges(); 
```

这可能是您初始化对象的方式。

# groovy - 如何在 Groovy 中定义 @CompileStatic 兼容闭包？

> ID：15423714
> 
> 赞同：4
> 
> 时间：2013-03-15T02:28:29.663
> 
> 标签：groovy, closures, groovy++

我有一个定义为闭包的类：

```
void everyPixel( closure ){
    for( def x : 0..width-1 )
        for( def y : 0..height-1 )
            closure( x, y )
} 
```

但是，如果我将`@CompileStatic`注释应用于它，它将无法编译（在我添加闭包之前它已经编译），并带有以下消息：

> Groovyc：[静态类型检查] - 找不到匹配的方法 java.lang.Object#call(java.lang.Integer, java.lang.Integer)。请检查声明的类型是否正确以及方法是否存在。

如何为此创建类型签名以便静态编译？到目前为止，我在谷歌上的所有点击都说*如何*传递一个闭包，而不是如何定义一个接受一个闭包的方法。：-/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:36:35.433

你只需要告诉它这`closure`是一个`Closure`：

```
void everyPixel( Closure closure ){
  for( x in 0..<width )
    for( y in 0..<height )
      closure( x, y )
} 
```

# php - 将 DateTime 类转换为字符串

> ID：15423721
> 
> 赞同：5
> 
> 时间：2013-03-15T02:29:48.633
> 
> 标签：php, sql, sql-server, string, date

目前我正在从 mssql 中检索数据类型为小日期时间的日期。

数据是：`2013-03-12 00:00:00`

我想将它存储在一个变量中，然后显示在一个文本框中。

而我想要显示的格式就`2013-03-12`在文本框上。

我得到的信息是：

> 可捕获的致命错误：无法将 DateTime 类的对象转换为字符串。

任何的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-15T02:53:58.327

在php中你可以简单地使用`date_format($date, 'Y-m-d')`

```
<?php
$date = date_create('2013-11-23 05:06:07');
echo date_format($date, 'Y-m-d');
?> 
```

返回 2013-11-23

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-15T02:36:03.507

以下代码将为您提供可用于 SQL 的日期：

```
$dateTime->format(\DateTime::ISO8601); 
```

**-编辑-**

实际上，我只是看到你想要反过来。在这种情况下：

```
$dateTime->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T02:32:36.590

使用[`CONVERT`](http://msdn.microsoft.com/en-us/library/ms187928.aspx)：

```
SELECT CONVERT(VARCHAR(10), datefield, 121)
FROM tablename; 
```

# javascript - 如何将现有数据库连接到 sequelize.js？

> ID：15423724
> 
> 赞同：0
> 
> 时间：2013-03-15T02:30:16.423
> 
> 标签：javascript, node.js, postgresql, sequelize.js

我有一个通过 postgres 生成的数据库。如何将它连接到 node.js 的续集？

我知道 sequelize 连接的基本语法，但是如何将它们连接在一起？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T02:34:00.947

在`node.js`通过安装`sequelize`和`pg`包之后，`npm`你可以这样做：

```
var sequelize = new Sequelize('your_database_name', 'user', 'password', {
  host: "localhost", //your server
  port: 12345 //server port
  dialect: 'postgres'
}); 
```

注意，为了将 Sequelize 与 Postgres 一起使用，您需要[postgres](https://github.com/brianc/node-postgres)包。Sequelize[主页](http://www.sequelizejs.com/)包含有关您可能需要进行更改以便一起使用它们的说明。

# python - 在 Python 中制作随机 3-D 形状

> ID：15423726
> 
> 赞同：3
> 
> 时间：2013-03-15T02:30:29.880
> 
> 标签：python, matplotlib, plot

如何使用 Python 在一个图中生成一堆球体和椭圆？理想情况下，它只需要设置每个对象的端点（或半径/轴）和颜色，就像您如何使用端点轻松生成矩形/圆一样。

我在想象使用 matplotlib 的 3-D 模块之类的东西，一旦输出，您就可以在其中旋转和播放绘图。不过，我愿意使用其他库！

我可以通过操纵和绘制一堆[椭球方程](http://en.wikipedia.org/wiki/Ellipsoid)来将方程绘制为曲面，但是有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:11:00.830

**[VPython](http://www.vpython.org/index.html)**可能是在屏幕上显示一些球体和椭球体的最快途径。此外，VPython 比 matplotlib 更具交互性（从某种意义上说，您可以旋转、缩放等），而且非常容易上手。最后，这取决于你在寻找什么。有很多方法可以在屏幕上显示球体和椭球体。

```
from visual import *
myell = ellipsoid(pos=(x0,y0,z0), length=L, height=H, width=W) 
```

![在此处输入图像描述](../Images/e4a73bce5f779a71755e56f77c9313e2.png)

```
ball = sphere(pos=(1,2,1), radius=0.5) 
```

![在此处输入图像描述](../Images/7409cc4d4d3ffb0283bd030d79cc52f7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:03:55.570

您是否正在寻找未包含在`matplotlib`'s[`mpl_toolkits.mplot3d`](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html)模块中的功能？来自[3D Surface 演示](http://matplotlib.org/examples/mplot3d/surface3d_demo2.html)：

```
from mpl_toolkits.mplot3d import Axes3D
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

u = np.linspace(0, 2 * np.pi, 100)
v = np.linspace(0, np.pi, 100)

x = 10 * np.outer(np.cos(u), np.sin(v))
y = 10 * np.outer(np.sin(u), np.sin(v))
z = 10 * np.outer(np.ones(np.size(u)), np.cos(v))
ax.plot_surface(x, y, z, rstride=4, cstride=4, color='b')

plt.show() 
```

我看不出有什么理由不能在同一字段中定义另一个形状：

```
from mpl_toolkits.mplot3d import Axes3D
from matplotlib import cm
import matplotlib.pyplot as plt
import numpy as np

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

u = np.linspace(0, 2 * np.pi, 100)
v = np.linspace(0, np.pi, 100)

x = 10 * np.outer(np.cos(u), np.sin(v))
y = 10 * np.outer(np.sin(u), np.sin(v))
z = 10 * np.outer(np.ones(np.size(u)), np.cos(v))
x1 = 7 + 10 * np.outer(np.cos(u), np.sin(v))
y1 = 7 + 10 * np.outer(np.sin(u), np.sin(v))
z1 = 7 + 10 * np.outer(np.ones(np.size(u)), np.cos(v))

ax.plot_surface(x, y, z, rstride=4, cstride=4, color='b')
ax.plot_surface(x1, y1, z1, rstride=4, cstride=4, cmap=cm.coolwarm)

plt.show() 
```

# javascript - 当 xmlhttp.status != 200 时如何抑制 javascript 错误

> ID：15423734
> 
> 赞同：2
> 
> 时间：2013-03-15T02:31:17.123
> 
> 标签：javascript, xmlhttprequest

在我的谷歌浏览器控制台中，当 xmlhttp 状态没有导致 200 时，我不断收到错误。例如，在某些情况下，我故意将我的 PHP 文件的标题设置为 500，因此在 javascript 中我可以显示错误并避免任何需要PHP 文件。由于我有自己的错误处理程序，是否有抑制默认错误的方法？

错误示例：

```
POST http://localhost/mama/cgi-bin/pages/Module-Install.php 500 (Internal server error) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-08T16:08:07.307

在自己处理错误时，似乎没有办法在谷歌浏览器中抑制这些警告。对于任何正在寻找替代解决方案的人，将错误代码嵌入到 json 对象中，并在 json 对象客户端解析任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T07:19:54.697

此错误是由服务器端发送的，不是浏览器，不是 js。你不能只是从控制台“隐藏”它。您可以在`onerror`事件中处理它：

```
request.onerror = function (e) {
   // do something to fix the results of server error...
}; 
```

换句话说，这是一个服务器错误，它可能会破坏您的代码执行，但是如果您在 xmlHttp 类可能出现异常后采取几个步骤来恢复工作，那么代码就可以了。

**升级版：**

只要你是纯粹的完美主义者，并且你关心完美的环境：

在*服务器端*，您必须在不触发除 200 之外的任何状态的情况下实现服务器应答。这不是一项超级难的工作。对于 ASP：[抑制 HTTP 500 响应代码](https://stackoverflow.com/questions/2235182/suppressing-http-500-response-codes)；对于 PHP： http: [//php.net/manual/en/function.http-response-code.php](http://php.net/manual/en/function.http-response-code.php)。

# css - 如何在 CSS 动画中获得重力效果？

> ID：15423736
> 
> 赞同：8
> 
> 时间：2013-03-15T02:31:33.550
> 
> 标签：css, physics

我想为一个元素设置动画，就好像你在俯视地球一样。元素跳向你，到达它的顶点，然后稍微往回落。轨迹的侧视图如下所示：

```
 _
   /   \
  /     |
 |
 | 
```

我无法通过关键帧动画获得逼真的效果。我的看起来像这样人工：

```
 /\
   /  \
  /
 /
/ 
```

**CSS**

```
@keyframes springIn {
    0% {
        transform: scale(0.0);
    }
    80% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1.0);
    }
}

.someElement {
    animation: springIn 1s linear 1s 1 forwards;
} 
```

如何在动画上加上抛物线函数来获得重力效果？我以为我可以使用[Bezier Curves](http://css3beziercurve.net/)，但 CSS 标准不允许 [0, 0] 之外的点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-02T14:03:50.007

`animation-timing-function` **在您的关键帧**中使用以使两个过渡（上升后下降）抛物线。

* * *

要正确执行此操作（即根据物理学），您首先需要确保“峰值”点比例和时间正确对应。您的动画从 0% 运行到 100%，抛物线的顶部（最大比例点）介于两者之间，我们称之为*m* %。比例从 0 开始（在 0% 处），在 1 处（在 100% 处）结束，并在假设*s*处达到峰值（在*m* % 处）。然后使用一些基本的数学，这两个变量之间的关系是：

```
m = 100 / (1 + sqrt(s-1)) 
```

或者

```
s = (100/m - 1)^2 + 1 
```

...所以要达到 80% 的峰值，您需要*s* = 17/16 = 1.0625

或者，对于 1.2 的最大比例*s*，您需要在*m* = 69.0983... %

* * *

现在，要使转换正确地为抛物线，您需要使用抛物线`animation-timing-function`设置。你想有效地使用*像* `ease-out`当你的对象射出时一样的东西，*就像* `ease-in`它开始回落时一样……但是与这两个关键字相关的三次贝塞尔曲线并不完全是抛物线。

相反，使用：

```
animation-timing-function: cubic-bezier(0.33333, 0.66667, 0.66667, 1) 
```

对于动画的“上升”部分，以及：

```
animation-timing-function: cubic-bezier(0.33333, 0, 0.66667, 0.33333) 
```

对于“下降”部分。这些*确实*给了你精确的抛物线。（请参阅[此处](https://math.stackexchange.com/questions/335226/convert-segment-of-parabola-to-quadratic-bezier-curve "这里")了解这些值的推导背后的数学；请注意，理想情况下，您将使用 1/3 而不是 0.33333 和 2/3 而不是 0.66667，但 CSS 不允许使用分数）。

把所有这些放在一起就可以得到这个 CSS：

```
.someElement { animation: springIn 1s linear 1s 1 none }

@keyframes springIn
{
  0% { transform: scale(0.0); animation-timing-function: cubic-bezier(0.33333, 0.66667, 0.66667, 1) }
  69.0983% { transform: scale(1.2); animation-timing-function: cubic-bezier(0.33333, 0, 0.66667, 0.33333) }
  100% { transform: scale(1.0) }
} 
```

...如果我的计算正确，那应该会给你一个完美的抛物线动画轨迹！

（注意：我将动画填充模式更改为“无”，因为动画结束后似乎没有必要继续执行`transform: scale(1.0)`。如果出于某种原因确实有必要，请将此值更改回“转发”）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-15T08:19:16.957

I think that you can do it using bezier curves.

in you case, it could be something like that:

```
-webkit-transition: all 500ms cubic-bezier(0.310, 0.440, 0.445, 1.650); 
-moz-transition: all 500ms cubic-bezier(0.310, 0.440, 0.445, 1.650); 
-ms-transition: all 500ms cubic-bezier(0.310, 0.440, 0.445, 1.650); 
-o-transition: all 500ms cubic-bezier(0.310, 0.440, 0.445, 1.650); 
transition: all 500ms cubic-bezier(0.310, 0.440, 0.445, 1.650); /* custom */

-webkit-transition-timing-function: cubic-bezier(0.310, 0.440, 0.445, 1.650); 
-moz-transition-timing-function: cubic-bezier(0.310, 0.440, 0.445, 1.650); 
-ms-transition-timing-function: cubic-bezier(0.310, 0.440, 0.445, 1.650); 
-o-transition-timing-function: cubic-bezier(0.310, 0.440, 0.445, 1.650); 
transition-timing-function: cubic-bezier(0.310, 0.440, 0.445, 1.650); /* custom */ 
```

I haven't done it by myself, check this link:

## [css easing animation tool](http://matthewlein.com/ceaser/)

I have made [an example in a JSFiddle](http://jsfiddle.net/yq9jpgzx/).

I put an outer div to make the hover stable:

```
<div class="container">
    <div class="moving"></div>
</div> 
```

and the CSS is as follows:

```
.moving {
    position: absolute; width: 200px; height: 150px; top: 50px;  left: 50px;
    background-color: green;
    -webkit-transition: all 5s cubic-bezier(0.310, 0.440, 0.445, 1.650); 
}

.container:hover .moving {
    zoom: 1.5;
} 
```

**Editing**

Just an image of what can you get with a bezier curve (from the ease animation tool page) to show that the object speed doesn't need to be constant (and can be almost parabolic)

![bezier curve](../Images/ad15e78f2ffd9eea2cb53c974241e449.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-24T20:47:18.323

Adobe 提供了一个很好的[例子](http://www.adobe.com/inspire/2013/04/animating-interactive-experiences-css.html)，它只使用标准的缓入/缓出计时功能。即使它可能不是完全“物理的”（即，不是抛物线的），它对于许多情况可能仍然足够好。如果您向下滚动到“**物理是您的朋友**”部分，页面上有一个演示。

```
div {
    width:140px;
    height:140px;
    border-radius: 70px;
    background:red;
    position:relative;
    animation: jump 1s infinite;
}

@keyframes jump {
    0% {top: 0;animation-timing-function: ease-in;}
    50% {top: 140px;height: 140px;animation-timing-function: ease-out;}
    55% {top: 160px; height: 120px;border-radius: 70px / 60px;animation-timing-function: ease-in;}
    65% {top: 120px; height: 140px;border-radius: 70px;animation-timing-function: ease-out;}
    95% {top: 0;animation-timing-function: ease-in;}
    100% {top: 0;animation-timing-function: ease-in;}
} 
```

资料来源： http: [//www.adobe.com/inspire/2013/04/animating-interactive-experiences-css.html](http://www.adobe.com/inspire/2013/04/animating-interactive-experiences-css.html)

# node.js - 为什么 Node.js 的版本这么低？

> ID：15423739
> 
> 赞同：0
> 
> 时间：2013-03-15T02:31:49.590
> 
> 标签：node.js, express

我一直在关注 Node.js 和 Express 等框架的开发。我终于找到了一些时间玩耍并享受它。

有谁知道为什么 Node 的当前版本只有 0.10.0？我知道这并不重要，但它使它看起来像是一个非常新且不稳定的项目，而实际上它似乎被相当多的使用，甚至被一些大玩家使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T02:37:22.590

嗯，它*是*新的，它自 2009 年以来才出现。

这对你们这些疯狂的人来说可能看起来很老，但我主要用 70 年代的语言编程，有时在 60 年代以来一直存在的机器上编程。

但说真的，它可能更多地与编号方案有关，而不是任何*实际*的不成熟。正如您[在此处](http://nodejs.org/dist/)看到的，实际上已经发布了很多版本。

如果您稍等片刻，则[发布计划](http://blog.nodejs.org/2013/03/11/node-v0-10-0-stable/#enterprise)会要求进行`0.12`（主要是代码清理），然后`1.0`根据评论将其作为“最终”产品（尽管由于预测不完美，仍然会有更多版本） . 许多项目从（糟糕的）开始`1.0`并改进它。node.js 的理念似乎是`1.0`作为完全抛光的最终产品。

# php - 图像渲染速度优化

> ID：15423749
> 
> 赞同：1
> 
> 时间：2013-03-15T02:33:00.897
> 
> 标签：php, html, image

我有一个我正在用 PHP 构建的应用程序，它根据给定植物物种的图像数量从数据库中调用照片。我让脚本将原本较大的照片调整为 100x100。这个过程真的需要一点页面加载时间，我的计算机的 CPU 达到 100% 并且工作非常努力。

我认为这是因为所有图像都在一次加载......有没有办法让它们只有在前一个完成时才加载？或者有没有更有效的方法来渲染这样的图像？这是加载它们的片段：

```
$imagesArray = explode(", ",$images);
unset($imagesArray[count($imagesArray)-1]); // get rid of the last array key which is blank.
echo '<tr><td>Images:</td><td>';
foreach ($imagesArray as $imgloc)
{
  echo '<a target="_blank" href="plant_images/'.$imgloc.'"><img src="plant_images/'.$imgloc.'" width="100" height="100" alt="'.$row[2].'" title="'.$row[2].'" /></a>&nbsp;';
} 
```

这是页面中部分加载的图像的屏幕截图（这比其他时候发生的要好得多！说真的，有些物种有 10-12 个图像，我的电脑需要大约 15 秒才能加载页面，很痛苦）

[http://www.captainscall.site11.com/temp_stuff/slow-img.png](http://www.captainscall.site11.com/temp_stuff/slow-img.png)

我已经发现[了这个](https://stackoverflow.com/questions/2176721/optimal-image-size-for-browser-rendering)，有点帮助。谢谢你， Khanahk

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:48:40.433

用户浏览器通常会缓存图片，这样用户在第一次访问页面时只会遇到加载缓慢的情况。

但是，您应该考虑拥有正在显示的所有图像的缩略图。您不需要自己制作这些缩略图，在 2013 年我们有电脑可以做到这一点。

一个快速的谷歌搜索可能会给你一些软件，可以立即为你的所有图片制作调整大小的副本，或者如果你知道一些编码，你可以为此编写自己的脚本。例如，您可以在 PHP 中使用 Imagick（参见[http://php.net/manual/en/imagick.scaleimage.php](http://php.net/manual/en/imagick.scaleimage.php)）。然后只需在您的服务器上存储两种尺寸的图像，一种用于缩略图，另一种具有更高的分辨率。

这样做的一个好处是您将减少从您的服务器传出的数据（如果您的服务器有很多独特的访问者，由于图像的大小将会有很多流量）。此外，您的用户将体验到更少的网站加载时间（正如您所说，等待图像加载很无聊）。

你可能可以用javascript告诉浏览器以什么顺序加载图像，但这不能解决你的问题，主要是你的图像太大了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T02:54:44.927

我想你应该：

*   服务端：已经生成的图片需要缓存，下次可以使用缓存版本。您可以创建一个物理图像文件以供下次使用。

*   客户端：您可以使用库来延迟加载图像

    *   [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)
    *   您可以实现一个 JavaScript 函数，在特定秒后加载图像。

# c# - 图像在 FTP 中损坏，打开二进制模式

> ID：15423750
> 
> 赞同：1
> 
> 时间：2013-03-15T02:33:01.710
> 
> 标签：c#, ftp

我在一月份发了一篇关于这个的帖子，但从来没有解决过。我一直在开发一个 ftp 到我的 Youtube Teams 网站的程序。出于某种奇怪的原因，生成的 HTML 代码可以正常工作并成功传输，但图像已损坏。我确保二进制模式设置为 true 并且权限都正确。似乎没有任何效果。

有人可以帮助我吗？

这是与我的问题相关的守则部分：

```
namespace TMNGP_FTP
{
    partial class Form1
    {
        // some functions and properties for the form
        UriBuilder ftpurl;
        String ftpurlstr = "ftp://tmngp.heliohost.org";
        static String ftpusername = "*******";
        static String ftppassword = "*******";

        public static string GenerateFileName(string context)
        {
            return context + DateTime.Now.ToString("yyyyMMddHHmmss") + ".html";
        }

        public void openpic_Click(object sender, System.EventArgs e)
        {
            //Wrap the creation of the OpenFileDialog instance in a using statement,
            //Rather than manually calling the dispose method to ensure proper disposal
            using (OpenFileDialog dlg = new OpenFileDialog())
            {
                dlg.Title = "Open Image";
                dlg.Filter = "png files (*.png)|*.png";

                if (dlg.ShowDialog() == DialogResult.OK)
                {

                    string folderName = @"c:\TMNGP_Web_Files";

                    string pathString = folderName + @"\htTemp";
                    pathString = pathString + @"\imgs";

                    if (!System.IO.Directory.Exists(pathString))
                    {
                        System.IO.Directory.CreateDirectory(pathString);
                    }

                    string destFileName = pathString + @"\" + dlg.SafeFileName.ToString();

                    System.IO.File.Copy(dlg.FileName, destFileName, true);
                    DisplImg.Image = new Bitmap(dlg.OpenFile());
                    DisplImg.ImageLocation = destFileName;
                }
            }

        }

        private FtpClient ftpnew = null;

        public void textgen_Click(object sender, System.EventArgs e)
        {

            string folderName = @"c:\TMNGP_Web_Files";

            string pathString = folderName + @"\htTemp";

            if (!System.IO.Directory.Exists(pathString))
            {
                System.IO.Directory.CreateDirectory(pathString);
            }

            string fileName = GenerateFileName("HT");

            pathString = pathString + @"\" + fileName;

            Console.WriteLine("Path to my file: {0}\n", pathString);

            if (!System.IO.File.Exists(pathString))
            {
                //System.IO.FileStream fs = System.IO.File.Create(pathString);
                using (System.IO.StreamWriter file = new System.IO.StreamWriter(pathString))
                {
                    file.WriteLine("<div class='simple_overlay' id='news_archive/" + DisplImg.ImageLocation.Substring(31) + "' style='display:none;'>");
                    file.WriteLine("<a class='close'></a>");
                    file.WriteLine("<img src='news_archive/" + DisplImg.ImageLocation.Substring(31) + "'/>");
                    file.WriteLine("<div class='details'>");
                    file.WriteLine("<h3> " + txtTitle.Text + " </h3>");
                    file.WriteLine("<h4> " + TxtInfo.Text + " </h4>");
                    file.WriteLine("<p>" + Desctext.Text + "</p>");
                    file.WriteLine("</div>");
                    file.WriteLine("</div>");
                }

                if(radioButton1.Checked)
                {
                    ftpurl = new UriBuilder("ftp", "tmngp.heliohost.org", 21, "NGP/news_archive/");
                    ftpurlstr = "/public_html/NGP/news_archive";
                }
                else
                {
                    ftpurl = new UriBuilder("ftp", "tmngp.heliohost.org", 21, "TM/news_archive/");
                    ftpurlstr = "/public_html/TM/news_archive";
                }

                try
                {
                    //string filenametwo = System.IO.Path.GetFullPath(@"c:\TMNGP_Web_Files\htTemp\"+fileName);
                    string filenamethree = System.IO.Path.GetFullPath(DisplImg.ImageLocation.ToString());
                    Console.WriteLine("{0}", filenamethree);
                    Console.WriteLine(pathString);
                    //string ftpfullpath = ftpurl;
                    FtpWebRequest ftp = (FtpWebRequest)FtpWebRequest.Create((@"ftp://tmngp.heliohost.org" + ftpurlstr + fileName).ToString());
                    Console.WriteLine("{0}", ftpurl + fileName);
                    ftp.Credentials = new NetworkCredential(ftpusername, ftppassword);
                    ftp.KeepAlive = true;
                    ftp.UseBinary = true;
                    ftp.Method = WebRequestMethods.Ftp.UploadFile;
                    StreamReader sourceStreamone = new StreamReader(@"c:\TMNGP_Web_Files\htTemp\" + fileName);
                    byte[] fileContentsone = Encoding.UTF8.GetBytes(sourceStreamone.ReadToEnd());
                    sourceStreamone.Close();
                    ftp.ContentLength = fileContentsone.Length;
                    Stream requestStreamone = ftp.GetRequestStream();
                    requestStreamone.Write(fileContentsone, 0, fileContentsone.Length);
                    requestStreamone.Close();
                    FtpWebResponse ftpresponseone = (FtpWebResponse)ftp.GetResponse();
                    Console.WriteLine("Upload File Complete, status {0}", ftpresponseone.StatusDescription);
                    ftpresponseone.Close();

                }
                catch (WebException ex)
                {
                    throw ex;
                }
                try
                {
                    string imgfile = DisplImg.ImageLocation.Substring(31);
                    FtpWebRequest ftp2 = (FtpWebRequest)FtpWebRequest.Create((@"ftp://tmngp.heliohost.org" + ftpurlstr + imgfile).ToString());
                    ftp2.Credentials = new NetworkCredential(ftpusername, ftppassword);
                    ftp2.KeepAlive = true;
                    ftp2.UseBinary = true;
                    ftp2.Method = WebRequestMethods.Ftp.UploadFile;
                    StreamReader sourceStreamtwo = new StreamReader(DisplImg.ImageLocation.ToString());
                    byte[] fileContentstwo = Encoding.UTF8.GetBytes(sourceStreamtwo.ReadToEnd());
                    sourceStreamtwo.Close();
                    ftp2.ContentLength = fileContentstwo.Length;
                    Stream requestStreamtwo = ftp2.GetRequestStream();
                    requestStreamtwo.Write(fileContentstwo, 0, fileContentstwo.Length);
                    requestStreamtwo.Close();
                    FtpWebResponse ftpresponsetwo = (FtpWebResponse)ftp2.GetResponse();
                    Console.WriteLine("Upload File Complete, status {0}", ftpresponsetwo.StatusDescription);
                    ftpresponsetwo.Close();
                }
                catch (Exception ex)
                {
                    throw ex;
                }

                MessageBox.Show("FTP Complete");
            }
            else
            {
                Console.WriteLine("File \"{0}\" already exists.", fileName);
                return;
            }
        }

        // a bunch of Windows Form Designer generated code ...

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:39:08.790

好的，这段代码很难阅读，但是，当您声明 Byte[] fileContentTwo 时，您似乎在图像（sourceStreamTwo）上使用了 Encoding.UTF8.GetBytes()。

**编辑**- 忘了提，你不需要 StreamReader - 使用 FileStream 代替：

```
FileStream sourceStreamtwo = new FileStream(DisplImg.ImageLocation.ToString(), FileMode.Open); 
```

将其更改为

```
Byte[] fileContentTwo;

using (BinaryReader br = new BinaryReader(sourceStreamtwo))
{
    fileContentsTwo = br.ReadBytes((int)sourceStreamtwo.Length);
    // rest of code that deals with sourceStreamTwo
} 
```

请注意，这假设您没有从可能没有整个流可用的网络读取，请参阅[从流中创建字节数组](https://stackoverflow.com/questions/221925/creating-a-byte-array-from-a-stream)

在 .net 4 或更高版本中，您可以使用`Stream.CopyTo()`更安全的方法，因为它可以处理流中的中断 - 请再次参阅上面的问题和答案以获取更多信息。

你应该很好。编码用于文本，图像是二进制的。

还请考虑一些不同的变量命名约定:)

# javascript - 如何从 iframe 调用主窗口中的函数？

> ID：15423752
> 
> 赞同：0
> 
> 时间：2013-03-15T02:33:37.380
> 
> 标签：javascript, html, function, iframe, frame

首先，我知道这个问题与其他问题重复。但是我尝试从stackoverflow中的许多问题中跟踪许多样本，但它没有用。我无法从 iframe 调用主窗口的功能，但如果我使用框架标签，它就可以工作。

我试过这样。

主窗口：

```
<body>
<iframe src='test.html'></iframe>
<script>            
    var alertFunc = function(){
        window.alert("work!");
    }   
</script>
</body> 
```

测试.html

```
<body>
    <input type="button" onclick="window.parent.alertFunc();" value="Test" />
</body> 
```

来自控制台的错误消息。

```
Unsafe JavaScript attempt to access frame with URL file:///C:/.../index.html from frame with URL file:///C:/.../test.html. Domains, protocols and ports must match.
 test.html:30
Uncaught TypeError: Cannot call method 'alertFunc' of undefined 
```

和许多类似的形式。

你有什么想法？还是我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:04:36.493

看起来您正在直接从文件系统访问文件，例如 c:.....\page.html。

由于[相同的源策略](http://www.w3.org/Security/wiki/Same_Origin_Policy)导致的错误，如果您将站点部署在 tomcat 或任何其他 Web 服务器中，而不是从本地文件系统访问它，它应该可以工作，假设这两个文件来自同一个域空间。

如果主页面（带有 iframe）和 iframe 页面在同一目录中，或者如果 iframe 页面是主页面目录的子目录，它将在[FireFox](https://developer.mozilla.org/en-US/docs/Same-origin_policy_for_file:_URIs)中工作。

以上内容在 chrome 中不起作用，您需要[使用 flag 启动 chrome](https://stackoverflow.com/questions/4409901/how-can-access-and-the-origin-policy-in-chrome-as-im-not-using-a-server) `--allow-file-access-from-files`

# extjs - 如何将 DirectJNgine 2.2 插入我的 pom.xml

> ID：15423754
> 
> 赞同：0
> 
> 时间：2013-03-15T02:33:57.633
> 
> 标签：extjs

我对行家有点陌生。

只是想知道如何将 DirectJNgine 2.2 插入 pom.xml 文件，以便我可以从某个地方下载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T14:14:33.723

您应该通过 maven 在本地存储库中安装人工制品：

```
> mvn install:install-file -DgroupId=com.softwarementors.extjs -DartifactId=directjngine -Dversion=2.2 -Dpackaging=jar -Dfile=./directjngine.jar

Then, in your pom.xml, add the dependencies for directjngine :

<!-- directjngine deps -->
    <dependency>
        <groupId>com.softwarementors.extjs</groupId>
        <artifactId>directjngine</artifactId>
        <version>2.2</version>
    </dependency>
    <dependency>
        <groupId>com.yahoo.platform.yui</groupId>
        <artifactId>yuicompressor</artifactId>
        <version>2.4.2</version>
    </dependency>
    <dependency>
        <groupId>rhino</groupId>
        <artifactId>js</artifactId>
        <version>1.6R7</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
    </dependency>
    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.3</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>2.2.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.4</version>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.1</version>
    </dependency>

Happy ext direct coding ;-) 
```

# eclipse - 如何在 Eclipse 的 Scala 插件中更改 REPL 中的背景颜色？

> ID：15423755
> 
> 赞同：1
> 
> 时间：2013-03-15T02:33:59.713
> 
> 标签：eclipse, scala, read-eval-print-loop

如何在 Eclipse 的 Scala 插件中更改 REPL 中的背景颜色？我的 Scala 语法着色方案配置为使用深色背景，目前无法使用 REPL 的白色背景。或者，我也可以在 REPL 中禁用句法着色（这样所有内容都会以黑色打印），但我不知道是否可以以这种方式配置插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-19T04:07:31.073

单击`window`菜单，然后选择`preferences`菜单项以打开`preferences`对话框。

在左侧面板中，导航到`General`/ `Appearance`/ `Colors and Fonts`。

在右侧面板中，展开`Scala`节点，选择`Interpreter background color`，按下`Edit`按钮，选择所需的颜色，按下`ok`，最后`Apply`按下按钮。

如果未反映更改，请**重新启动**Eclipse。至少 4.7.0 版本**需要重启**。

# charts - highcharts 无法渲染

> ID：15423757
> 
> 赞同：1
> 
> 时间：2013-03-15T02:34:07.460
> 
> 标签：charts, highcharts, render

我使用Ajax获取数据，当我用firebug调试时，结果显示highcharts选项的数据有数据。但图表无法正确呈现。图表背景渲染正确，但没有图表。

这是我的代码。

```
// @ author:wang
var chart;
var element;
var chart_type_element;

var y_title_1;
var y_title_2;
var y_title_3;
var date = new Date();
var y = date.getUTCFullYear();
var m = date.getUTCMonth();
var d = date.getUTCDate()-1;
var h = date.getUTCHours();
var minute = date.getUTCMinutes();

/**
 * 返回图表的类型
 * 
*/
function chart_type(element){
var type;
var wind = '风向风速';
    var t_h = '温湿度';

if ( element== 'wind' ){
    type = wind;
} else if ( element == 't_h') {
    type = t_h;
}
return type;
}

/**
*
*return y-axis title
*
*/
function y_title(element, serie){
var title;

if ( element== 'wind' ){
    switch (serie){
        case 1: title = '风速'; break;
        case 2: title = '阵风'; break;
        case 3: title = '风向'; break;
    }
} else if ( element == 't_h') {
    switch (serie){
        case 1: title = '温度'; break;
        case 2: title = '湿度'; break;
        default: title = '';
    }
}
return title;

}

function getLocTime(nS) {
        return new Date(parseInt(nS)).toLocaleString().replace(/年|月/g, "-").replace(/日/g, " ");
}

/**
*  气压配置选项
*/
var option_p = {
chart: {
        renderTo: 'station_curve',
        zoomType: 'x'
},
title:{
    text:'气压序列图'
},
subtitle: {
    text: '信科气象台'
},
xAxis: {
    type: 'datetime',
    maxZoom: 3600000, // one hour
    title: {
        text: null
    }
},
yAxis: {
            plotLines: [{
            value: 0,
            width: 1,
            color: '#808080'
        }],     
    min:980,
    max:1040
},
tooltip: {
    formatter: function() {
           return getLocTime(this.x) +': '+ this.y;
        }
},
legend: {
    layout: 'vertical',
    align: 'left',
    x: 220,
    verticalAlign: 'top',
    y: 30,
    floating: true,
    backgroundColor: '#FFFFFF'
},
series: [{
    name:  '海平面气压',
    color: '#4572A7',
    type: 'line',
    pointInterval: 60 * 1000,
    pointStart: Date.UTC(y,m,d,h,minute),   
    marker: {
        enabled: false
    }   
}, {
    name:  '甲板气压',
    type: 'line',
    color: '#AA4643',
    pointInterval: 60 * 1000,
    pointStart: Date.UTC(y,m,d,h,minute),   
    marker: {
        enabled: false
    }
}/*, {
    name:  '3',
    color: '#89A54E',
    pointInterval: 60 * 1000,
    pointStart: Date.UTC(y,m,d,h,minute),   
    type: 'spline', 
    marker: {
        enabled: false
    }
}*/]

};

function draw_curve(platformID,element){
        option.series[0].data = [];
        option.series[1].data = [];

        option_th.series[0].data = [];
        option_th.series[1].data = [];
        jQuery.getJSON('get_last_3d.php',{platformID:platformID,element:element}, function(data) {
            var serie=[];
            var serie1=[];

            if (element == 'wind_dir'){
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.wd);
                }); 

                option.series[0].data = serie.reverse();

            } else if (element == 'wind_speed'){
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.ws);
                    serie1[i]=parseInt(value.ws_max);
                });                     

                option_wind_speed.series[0].data = serie.reverse();
                option_wind_speed.series[1].data = serie1.reverse();

            } else if (element == 't_h') {
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.t);
                    serie1[i]=parseInt(value.h);                        
                }); 

                option_th.series[0].data = serie.reverse();
                option_th.series[1].data = serie1.reverse();

            } else if (element == 'p') {
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.sea_p);
                    serie1[i]=parseInt(value.deck_p);                       
                }); 

                option_p.series[0] = serie.reverse();
                option_p.series[1] = serie1.reverse();

            } else if (element == 'wave_height') {
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.wave_height);                                   
                }); 

                option.series[0].data = serie.reverse();

            } else if (element == 'visibility') {
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.visibility);                                    
                }); 

                option.series[0].data = serie.reverse();

            }  else if (element == 'cloudheight') {
                $.each(data,function(i,value){
                    serie[i]=parseInt(value.cloud_height);                                  
                });

                option.series[0].data = serie.reverse();        
            }               

            switch(element){
                case 'p' : 
                    chart = new Highcharts.Chart(option_p);
                    break;
                case 't_h':
                    chart = new Highcharts.Chart(option_th);
                    break;
                case 'wind_speed':
                    chart = new Highcharts.Chart(option_wind_speed);
                    break;
                default:
                chart = new Highcharts.Chart(option);
            }
            /*  old code, will be replaced with switch
            if (element == 'p') 
                chart = new Highcharts.Chart(option_p);
            else {
                chart = new Highcharts.Chart(option);
            }
            */
        });
}

$( function(){          
draw_curve(105,'t_h');          

})//end of jquery function

     ![the chart][1] 
```

谢谢你提前

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:28:46.093

它不起作用的原因是您没有为您的系列的属性提供`y`, `m`, `d`, `h`,`minute`的值。见工作：http: [//jsfiddle.net/LzfM3/](http://jsfiddle.net/LzfM3/)`Date.UTC(y,m,d,h,minute)``pointStart`

# jquery - 滑块中的最后一个图像处于活动状态时的 removeClass

> ID：15423759
> 
> 赞同：0
> 
> 时间：2013-03-15T02:34:27.023
> 
> 标签：jquery, jquery-ui

我使用**easySlider插件**来滑动图像，我想要实现的是，如果最后一个图像是`active`文本*“突出显示我”*改变颜色`red`我自己尝试但我没有得到正确答案的运气，我[在这里设置小提琴](http://jsfiddle.net/jhunlio/kKY5U/3/)

我当前的代码：

```
$(document).ready(function(){
            $(document).ready(function(){
            $("#slider > ul > li:last").addClass("selected");
          });
                if(".selected") {
                $("#selected").addClass("select");
            }

            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:55:36.087

想我也许能帮上忙。稍微修改了你的代码，让我知道你的想法：http: [//jsfiddle.net/kKY5U/5/](http://jsfiddle.net/kKY5U/5/)

基本上，为 prev 和 next 按钮添加了侦听器

```
var imgCount = 0;
$("#nextBtn").click(function() {
    imgCount++;
    $("#select").removeClass("select")

    if (imgCount == picArray.length - 1) {
        $("#select").addClass("select")
    }
});

$("#prevBtn").click(function() {
    imgCount--;
    $("#select").removeClass("select")

    if (imgCount == 0) {
        $("#select").addClass("select")
    }
}); 
```

此外，更改了一些 CSS，并将 h1 标签设置为样式跨度。

# javascript - 检查未定义

> ID：15423765
> 
> 赞同：2
> 
> 时间：2013-03-15T02:35:19.200
> 
> 标签：javascript

我完全糊涂了。我知道这已经被问了一百万次了。我看过以下问题：

[测试 JavaScript 中是否未定义某些内容](https://stackoverflow.com/questions/7041123/test-if-something-is-undefined-in-javascript)

现在的问题是，在进行检查时，我发现您可以做很多事情。

我需要检查一个对象是否是一个数组，为此我检查“长度”属性是否存在。现在我会用什么？

```
 if (obj.length) 
```

或者

```
 if (obj.length === undefined) 
```

或者

```
 if (typeof obj.length === "undefined") 
```

或者

```
if (obj.length == null) 
```

或者是其他东西？

我知道这`===`不会进行任何类型转换，并且 if 语句只是想要一个“真实”或“虚假”值，`obj.length`如果长度为 0，则意味着将返回 false，但这不是我们想要的。如果它被定义，我们现在想要。这就是我去类型测试的原因。但哪种方式最好？

这是我做的一些测试。2、3 和 4 工作。

![在此处输入图像描述](../Images/eae6443d319cfa381af9d7faf26ca71c.png)

对不起中间的东西。我在此页面的控制台中执行此操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:45:12.557

简短的回答：

```
if (obj instanceof Array) {
    // obj is an array
} 
```

或者，如果您不知道是否`obj`已定义：

```
if ((typeof obj !== "undefined") && (obj instanceof Array)) {
    // obj is an array
} 
```

讨论为什么你的不太正确：

`obj.anyProperty`将抛出一个`ReferenceError`if`obj`未定义。这会影响您放置的所有四样东西。

`if (obj.length)`将为空数组评估为 false，这不是您想要的。因为长度为 0（一个虚假值），所以它会错误地不准确。如果另一个对象具有`length`属性，这也可能会出现问题。

`if (obj.length === undefined)`*通常会*起作用，但由于`undefined`可以重新定义，因此不受欢迎。有人可能会通过编写`undefined = obj.length`. 这也可能产生假阴性；`obj`可能碰巧有一个名为“length”的属性，它会错误地将其称为数组。

`if (typeof obj.length === "undefined")`工作正常，但可以检测到与上述相同的假阴性。

`if (obj.length == null)`可以正常工作，但有与上述相同的错误。在双等号 ( `==`) 中，它匹配`null`和`undefined`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T02:42:35.483

我会做`

```
obj instanceof Array 
```

检查 obj 是否为数组

[http://jsfiddle.net/Tcjk4/](http://jsfiddle.net/Tcjk4/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-15T02:58:06.760

对于它的价值，以下是 jQuery 如何[检查某物是否为数组](https://github.com/jquery/jquery/blob/1.9.1/src/core.js#L428-430)：

```
isArray: Array.isArray || function( obj ) {
    return jQuery.type(obj) === "array";
}, 
```

如果可用，这将使用 ES5 [`Array.isArray`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/isArray)，或者在旧浏览器中使用自定义检查。jQuery 使这个函数可以作为[`$.isArray`](http://api.jquery.com/jQuery.isArray/).

[`jQuery.type`](https://github.com/jquery/jquery/blob/1.9.1/src/core.js#L440-447)基本上[是](http://api.jquery.com/jQuery.type/)一种增强功能`typeof`，可以解决 JavaScript 语言和浏览器错误的一些限制。而`typeof`返回`'object'`任何类似对象（`{}`, `[]`, even `null`），`$.type`返回对象的内部 JavaScript [*[[Class]]*](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6.2)属性。

事实上，这种确定类型[的方法实际上比`instanceof`](http://perfectionkills.com/instanceof-considered-harmful-or-how-to-write-a-robust-isarray/)：

> 两者看起来都非常无辜`instanceof`，`constructor`似乎是检查对象是否为数组的好方法。
> 
> 当涉及到多帧 DOM 环境中的脚本时，就会出现问题。简而言之，`Array`在一个 iframe 中创建的对象不会与在另一个 iframe 中创建的数组共享 [[Prototype]]。它们的构造函数是不同的对象，因此 `instanceof`和`constructor`检查都失败：
> 
> ```
> var iframe = document.createElement('iframe');
> document.body.appendChild(iframe);
> xArray = window.frames[window.frames.length-1].Array;
> var arr = new xArray(1,2,3); // [1,2,3]  
> 
> // Boom!
> arr instanceof Array; // false  
> 
> // Boom!
> arr.constructor === Array; // false 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T04:32:57.433

评论多于回答。

虽然类似的测试`object instanceof Array`在大多数情况下都可以工作（在涉及帧或窗口间通信的情况下可能会失败），但考虑您真正需要测试的内容并相应地设计测试是一个好主意。明确地测试一个对象是否是一个数组几乎总是不必要的。

在这种情况下，您似乎只想使用 length 属性来迭代对象的数字属性。

如果是这种情况，您需要做的就是读取长度属性的值并使用它。无论该属性是否丢失，或尚未分配值，或值为`undefined`or `0`，您都不想执行循环。幸运的是，您可以一次性完成所有这些测试（如果值为`Null`or `''`，也可以跳过处理，这似乎也很明智）：

```
if (obj.length) {
  // iterate over numeric properties of obj
} 
```

这将使该方法具有通用性，因此它可以应用于任何具有合适长度属性和一些数字属性的对象（例如，jQuery 对象或 HTMLCollection 对象）。

如果您需要数组的某些其他功能（例如 push 或 slice），您也可以测试这些功能。

如果您将测试用作逻辑分支（例如，如果它是一个数组做一件事，如果它是一个普通对象做另一件事），那么您应该考虑这样做是否明智。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T03:05:48.020

使用 underscore.js [http://underscorejs.org/#isObject](http://underscorejs.org/#isObject)

**_.isArray(object)** 如果 object 是一个数组，则返回 true。

```
(function(){ return _.isArray(arguments); })();
=> false
_.isArray([1,2,3]);
=> true 
```

**_.isObject(value)** 如果 value 是 Object，则返回 true。请注意，JavaScript 数组和函数是对象，而（普通）字符串和数字不是。

```
_.isObject({});
=> true
_.isObject(1);
=> false 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T02:55:13.903

```
var sizeArrayOrObject = function(obj) {
    var size = 0, key;
    for (key in obj) {
        if (typeof obj.key === 'undefined') size++;
    }
    return size;
};

sizeArrayOrObject([]);  // 0
sizeArrayOrObject([5,6]);  // 2

sizeArrayOrObject({});  // 0
sizeArrayOrObject({id:8});  // 1 
```

# android - DialogFragment 如何影响调用 Fragment 的生命周期？

> ID：15423768
> 
> 赞同：17
> 
> 时间：2013-03-15T02:35:34.490
> 
> 标签：android, android-fragments, android-dialogfragment

我有一个片段调用 DialogFragment。这是否会影响 Fragment 的生命周期（即它是否进入 onPause）？当 DialogFragment 被关闭时，调用 Fragment 是否会转到 onResume？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-10T14:54:30.923

这两个片段都将处于运行状态。onPause 不会在第一个片段上调用。

片段（和活动）的生命周期回调工作在活动级别，而不是片段级别。例如，如果您在第一个片段上显示一个主题为看起来像对话框的 Activity，则将在第一个片段上调用 ​​onPause。

片段不影响其他片段的生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T15:39:08.307

对话框片段将出现在带有片段的活动上方的对话框窗口中。Activity 和 Fragment 不会改变它们的状态。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-15T03:27:21.513

当然两者`Fragment`都有`DialogFragment`自己的生命周期。就像您可以在以下链接`Activity`上`DialogActivity`阅读有关它们的更多信息：

[片段生命周期](http://developer.android.com/reference/android/app/Fragment.html#Lifecycle)

[对话片段](http://developer.android.com/reference/android/app/DialogFragment.html#Lifecycle)

# assembly - 组装 - MIPS - 邻接表的未知大小，如何遍历

> ID：15423771
> 
> 赞同：1
> 
> 时间：2013-03-15T02:35:53.963
> 
> 标签：assembly, graph, mips, depth-first-search

所以我正在对未知长度的图进行深度优先搜索。图本身将被编码为“2D”数组邻接表。

前任：

```
 Graph: .word 0, 1, 1, 1, 0
        .word 1, 0, 1, 1, 1
        .word 1, 1, 0, 1, 1
        .word 1, 1, 1, 0, 1
        .word 1, 1, 0, 0, 0 
```

但是，这个图表可以是任意大小，当它被评分时，TA 可以在我的代码中放置任意大小的图表来测试。所以我不知道图表的大小。

当我想检查邻接表时，这会成为一个问题。我怎么知道我何时到达了行尾？如何前进到特定行？我知道如何按单词前进，但我不知道如何在不知道需要前进多少元素（因此字节）的情况下前进到下一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:28:10.480

如果您想在没有用户干预的情况下计算行大小，则需要在图形定义之后添加一个标记（在我的示例中，我使用 EndGraph 标签作为标记）。知道矩阵的第一个元素的地址和矩阵的结束位置允许您计算行大小，您只需要计算矩阵元素总数的平方根：

```
.data
 Graph: .word 0, 1, 1, 1, 0
        .word 1, 0, 1, 1, 1
        .word 1, 1, 0, 1, 1
        .word 1, 1, 1, 0, 1
        .word 1, 1, 0, 0, 0
EndGraph:
.text        
  la $t1, Graph
  la $t2, EndGraph
  sub $t2, $t2, $t1  # Get size of matrix
  srl $t2, $t2, 2    # Get the total number of items of the matrix
  move $t3, $zero
computeRowSize:
  mult $t3, $t3
  mflo $t4
  beq $t2, $t4, done
  addiu $t3, $t3, 1
  j computeRowSize
done:  
  sll $t3, $t3, 2    # compute the size of each row (number of row elements * size(element)
  # Here you have the RowSize in $t3 
```

# java - Java中的颜色缩放

> ID：15423772
> 
> 赞同：1
> 
> 时间：2013-03-15T02:35:55.550
> 
> 标签：java

我正在尝试缩放像素的颜色分量。为此，我正在创建一个新像素，其中每个颜色分量都是原始值 * 该颜色的缩放因子。结果像素的值必须在 范围内`0 <= color <= 255`。

这就是我到目前为止所做的

```
public class ColorScale implements Transformer {
    /* This part creates a transformer that scales the color in each pixel by the following factors
        parameter r0 = red factor
        parameter b0 = blue factor
        parameter g0 = green factor 
    */

    public ColorScale(double r0, double g0, double b0) {
       // need guidance as what to do here
    }

    public Pixel transformPixel(pixel p) {
        return p;
    }
} 
```

更多信息在这里：[http ://www.seas.upenn.edu/~cis120/current/hw/hw07/javadoc/ColorScale.html](http://www.seas.upenn.edu/~cis120/current/hw/hw07/javadoc/ColorScale.html)

我是 Java 新手，所以我只需要有关在 ColorScale 函数中做什么的指导。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:03:51.657

从您提供的 JavaDoc 中，`ColorScale`是`Transformer`实现之一。

从您的代码段：

```
public ColorScale(double r0, double g0, double b0) {
   // need guidance as what to do here
} 
```

这是构造函数。您正在创建`instance`一个 Pixel 的特定实现`Transformer`（在本例中为`ColorScale`）。

构造函数应该简单地设置 的内部状态`Transformer`，然后通过 contract 方法设置它来转换像素`transformPixel`。

换句话说，

```
public ColorScale(double r0, double g0, double b0) {
   // Set internal state fields. 
   this.r0 = r0;
   this.g0 = g0;
   this.b0 = b0;
} 
```

# javascript - nodejs 前置文件

> ID：15423774
> 
> 赞同：20
> 
> 时间：2013-03-15T02:36:25.710
> 
> 标签：javascript, node.js

对于 Node.js，以类似的方式添加到文件的最佳方式是什么？

```
fs.appendFile(path.join(__dirname, 'app.log'), 'appendme', 'utf8') 
```

就个人而言，最好的方法实际上是围绕异步解决方案创建一个日志，我基本上可以从顶部推送到文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2018-04-18T01:31:45.513

这个解决方案不是我的，我不知道它来自哪里，但它有效。

```
const data = fs.readFileSync('message.txt')
const fd = fs.openSync('message.txt', 'w+')
const insert = Buffer.from("text to prepend \n")
fs.writeSync(fd, insert, 0, insert.length, 0)
fs.writeSync(fd, data, 0, data.length, insert.length)
fs.close(fd, (err) => {
  if (err) throw err;
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-15T03:10:11.070

不可能添加到文件的开头。[请参阅此问题](https://stackoverflow.com/questions/4652436/c-file-streams-appending-at-the-beggining)以了解 C 中的类似问题或[此问题](https://stackoverflow.com/questions/1343044/c-prepending-to-beginning-of-a-file)以了解 C# 中的类似问题。

我建议您以常规方式进行日志记录（即，记录到文件末尾）。

否则，无法读取文件，将文本添加到开头并将其写回文件，这可能会很快变得非常昂贵。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-08-07T01:07:10.723

似乎确实可以使用[https://www.npmjs.com/package/prepend-file](https://www.npmjs.com/package/prepend-file)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-11T16:00:03.697

这是一个如何使用 gulp 和自定义构建函数将文本添加到文件的示例。

```
var through = require('through2');

gulp.src('somefile.js')
     .pipe(insert('text to prepend with'))
     .pipe(gulp.dest('Destination/Path/'))

function insert(text) {
    function prefixStream(prefixText) {
        var stream = through();
        stream.write(prefixText);
        return stream;
    }

    let prefixText = new Buffer(text + "\n\n"); // allocate ahead of time

    // creating a stream through which each file will pass
    var stream = through.obj(function (file, enc, cb) {
        //console.log(file.contents.toString());

        if (file.isBuffer()) {
            file.contents = new Buffer(prefixText.toString() + file.contents.toString());
        }

        if (file.isStream()) {
            throw new Error('stream files are not supported for insertion, they must be buffered');
        }

        // make sure the file goes through the next gulp plugin
        this.push(file);
        // tell the stream engine that we are done with this file
        cb();
    });

    // returning the file stream
    return stream;    
} 
```

资料来源：`[cole_gentry_github_dealingWithStreams][1]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-14T04:31:34.160

它可以通过使用`prepend-file`节点模块。请执行下列操作：

1.  `npm i prepend-file -S`
2.  `prepend-file module`在您各自的代码中导入。

例子：

```
let firstFile = 'first.txt';
let secondFile = 'second.txt';
prependFile(firstFile, secondFile, () => {
  console.log('file prepend successfully');
})
```

# javascript - 禁用超链接直到动画完成/禁用已单击元素上的超链接

> ID：15423788
> 
> 赞同：1
> 
> 时间：2013-03-15T02:38:29.720
> 
> 标签：javascript, jquery

我在 div 中有多张带有 .overlay 类的图片，当单击一张图片时，2 个变量的内容会填充 2 个其他元素。然而，还有两件事我需要解决。

1.  我希望所有 .overlay 元素在动画完成之前都无法点击。

2.  我希望被点击的 .overlay 保持不可点击，直到点击不同的 .overlay 。

代码：

```
$('.overlay').on("click",function(){
    var text = $(this).attr("title");
        $('#category').animate({'opacity': 0}, 1000, function () {
        $(this).text(text);
        }).animate({'opacity': 1}, 1000);
    var $clicked = $(this);
        $('#description').animate({'opacity': 0}, 1000, function () {
        $(this).text($clicked.data('text'));
        }).animate({'opacity': 1}, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:51:49.850

您可以设置一个互斥锁，以防止在动画期间单击并在动画完成后释放：

```
var mutex = false;
$('.overlay').on("click",function() {
    //flag to determine the last clicked overlay
    $(this).data('active', true);
    $('.overlay').not(this).data('active', false);
    if (!mutex && !$(this).data('active')) {
        mutex = true;

        /* snip */
        //animation is complete, so allow clicking all overlay again
        }).animate({'opacity': 1}, 1000, function () { mutex = false; });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:48:52.710

```
document.querySelector('.overlay').addEventListener('click', function(e) {
    e.preventDefault();

    // rest of code
}, false); 
```

# jquery - 防止 jquery .click 在列表中堆叠

> ID：15423791
> 
> 赞同：1
> 
> 时间：2013-03-15T02:39:19.967
> 
> 标签：jquery, events

我有一个我在 jQuery 中用作链接的 div 列表。单击一个将淡入内容面板。我想要完成的是让你不能一直点击每个导致面板堆叠和fadeIn 和fadeOut 串联。我希望所有其他点击都失败，直到当前操作完成。

HTML：

```
<div class="nav-row">
    <ul>
        <li><div class="btn-nav" pane="home">Home</div></li>
        <li><div class="btn-nav" pane="experience">Experience</div></li>
        <li><div class="btn-nav" pane="skills">Skills</div></li>
        <li><div class="btn-nav" pane="links">Links</div></li>
        <li><div class="btn-nav" pane="contact">Contact Me</div></div></li>
    </ul>
</div>

<div class="container home">
    Home
</div>
<div class="container experience">
    Experience
</div>
<div class="container skills">
    Skills
</div>
<div class="container links">
    Links
</div>
<div class="container contact">
    Contact
</div> 
```

jQuery：

```
$(".btn-nav").click(function(){
    var pane = $(this).attr("pane");
    $(".container").fadeOut(600);
    $(".container."+pane).delay(605).fadeIn(600);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:49:02.033

您可以使用 jQuery 的`:animated`选择器来选择在选择器运行时动画正在进行中的所有元素。使用它，您可以从点击处理程序返回。

试试这个。

```
$(".btn-nav").click(function(){
    if($(".container:animated").length > 0)
        return;

    var pane = $(this).attr("pane");
    $(".container").fadeOut(600);
    $(".container."+pane).delay(605).fadeIn(600);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:45:35.137

首先，如果您希望一个元素在前一个元素完成淡出之后淡入，最好将该代码放在回调中而不是使用`delay`. 至于您的实际问题，我建议使用简单的真/假锁来防止代码运行两次：

```
var locked = false;
$(".btn-nav").click(function(){
    if ( locked )
        return;
    locked = true;
    var pane = $(this).attr("pane");
    $(".container").fadeOut(600, function() {
        // Will run after the fade out has completed
        $(".container."+pane).fadeIn(600, function() {
            // Will run after the fade in has completed
            locked = false;
        });
    });
}); 
```

# c# - 实现冲突的接口

> ID：15423793
> 
> 赞同：3
> 
> 时间：2013-03-15T02:39:37.643
> 
> 标签：c#, .net

如果两个接口具有不同类型的相同属性，我如何使用实现它们的类。示例代码：

```
internal interface ITest
{
    string WhatEv { get; set; }
}

internal interface ITest2
{
    int WhatEv { get; set; }
}

internal interface ITest3 : ITest, ITest2
{
}

internal class Simple : ITest3
{
    string ITest.WhatEv { get; set; }

    int ITest2.WhatEv { get; set; }
}

internal class Program
{
    public static void Main(string[] args)
    {
        ITest3 foo = new Simple();
        foo.WhatEv = "asdf";
    }
} 
```

不明确引用错误的屏幕截图：

![VS 中的错误](../Images/386a82dcd02756a1ea547bc04e913c8f.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T02:43:45.240

您投射`foo`到`ITest`或`ITest2`。

```
ITest3 foo = new Simple();
((ITest)foo).WhatEv = "asdf"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:43:58.990

这很简单。因为它们的名称相同，并且具有相同的参数，所以编译器无法区分两者。这与拥有两个具有相同参数的函数相同，但返回一个 int 或 string。

```
int WhatEva(string hello)
{
    return 0;
}

string WhatEva(string hello)
{
    return "0";
} 
```

这会给出一个类似的错误信息—— `Already defines a member called 'WhatEva' with the same parameter types`。由于编译器无法区分两者。

因此，您需要为编译器提供一种区分两者的方法。在这种情况下，您需要抢先`WhatEv`转换为`ITest`.

# java - 在同一类的不同实现之间进行选择

> ID：15423795
> 
> 赞同：2
> 
> 时间：2013-03-15T02:40:05.020
> 
> 标签：java, android, android-asynctask, android-compatibility

我不确定这是否可能，或者我是否正确地考虑了这一点。

[在高效显示位图](http://developer.android.com/training/displaying-bitmaps/index.html)的 Android 开发人员培训中，使用了自定义版本的 ，`AsyncTask`以使代码与以下 android 版本兼容`HONEYCOMB`。

这个很好的[答案](https://stackoverflow.com/a/4072832/1386784)`AsyncTask`解释了pre 和 post 中的操作之间的区别`HONEYCOMB`。指南中提供自定义版本的原因是，如果快速滚动图像，pre `HONEYCOMB`（任务池）中的默认值很容易崩溃。对于这种情况，需要默认发布版本（在附加线程上串行执行）。`java.util.concurrent.RejectedExecutionException``GridView``HONEYCOMB`

我可以通过在我的项目中使用更新版本的 来轻松做到这一点`AsyncTask`（就像在开发人员培训示例中所做的那样），但这与未来的更改不太兼容。

**我想做的是以下几点：**

> 如果版本是`HONEYCOMB`或更高，请使用 `AsyncTask`框架中提供的实现，而如果版本更早，请使用`AsyncTask`我的应用程序中提供的实现。

这可能（以及如何）还是我应该以不同的方式思考它？

**编辑：** 我了解如何根据 running 提供条件`SDK_VERSION`。

我遇到的问题是这`AsyncTask`是一个抽象类，这意味着我必须提供一个实现。例如，我有一个`AsyncTask`调用`myTask`，其扩展`AsyncTask`如下：

```
public class myTask extends AsyncTask<Void, Void, Void> {
    // Implementations for the abstract functions (doInBackground)
} 
```

我如何决定`AsyncTask`扩展哪个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:48:07.923

您可以执行以下操作：

```
if(android.os.Build.VERSION.SDK_INT >= 11){ // Honeycomb
{
  AsyncTask taskObj = new DefaultAsyncTaskImpl();
  taskObj.execute();  
} else {
  AsyncTask taskObj = new CustomAsyncTaskImpl();
  taskObj.execute();
} 
```

并在您的代码中定义两个类，其中第一个扩展`AsyncTask`，第二个是您自己的实现

注意：`SDK_INT`在 API 4+ 中可用

**编辑：**

您可以`factory design pattern`根据 SDK 版本来决定创建哪个对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T02:48:50.030

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            // Use built in AysncTask
        } else {
            // Use your AsyncTask
        } 
```

您需要检查操作系统版本

# ios - 如何在 animateWithDuration 块期间利用 UIView 的变化值？

> ID：15423797
> 
> 赞同：2
> 
> 时间：2013-03-15T02:40:50.613
> 
> 标签：ios, objective-c, uiview, uislider

我正在使用 animateWithDuration 来更改 UISlider 的值：

```
[UIView animateWithDuration:1.0f
                      delay:0.0f
                    options:UIViewAnimationOptionCurveEaseInOut
                 animations:^{ [myUISlider setValue:10]; }
                 completion:^(BOOL finished){ }]; 
```

问题是，我需要能够在 UISlider*更改时*显示它的当前值。这甚至可以使用 animateWithDuration 吗？我尝试创建一个 UISlider 子类并覆盖 setValue 以希望在更改滑块时访问滑块的值：

```
-(void)setValue:(float)newValue
{
    [super setValue:newValue];

    NSLog(@"The new value is: %f",newValue);
} 
```

但是该代码仅在动画块的*最后被调用。*以一种非常有意义的方式，因为我真的只调用了一次 setValue。但我希望动画块会以某种方式在其内部机制中一遍又一遍地调用它，但似乎并非如此。

如果 UIView animateWithDuration 在这里是一个死胡同，我想知道是否有更好的方法来用其他东西实现同样的功能？也许我不知道 SDK 的另一个光滑的小块驱动部分允许动画不仅仅是 UIView 参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:01:57.623

我认为最好的处理方法是编写一个自定义代码，`Slide`您可以像进度条一样创建它，在 github 上有很多演示。

你也可以用`NSTimer`它来做，但我不认为这是一个很好的方法。

当您点击 时，您可以创建一个`timer`：

`_timer = [NSTimer scheduledTimerWithTimeInterval:.1 target:self selector:@selector(setValueAnimation) userInfo:nil repeats:YES];`

并设置一个 ivar：`_value = oldValue;`

在`setValueAnimation`方法中：

```
- (void)setValueAnimation
{
    if (_value >= newValue) {
        [_timer invalidate];
        _value = newValue;
        [self setVale:_value];
        return;
    }

    _value += .05;

    [self setVale:_value];

} 
```

**更新**

如何添加块：

第一个：您可以定义一个块处理程序：

```
typedef void (^CompleteHandler)(); 
```

第二：创建您的块并将其添加到 userInfo 中：

```
CompleteHandler block = ^(){
    NSLog(@"Complete");
};

NSDictionary *userInfo = [[NSDictionary alloc] initWithObjectsAndKeys:block,@"block", nil]; 
```

第三：制作`NSTimer`：

```
_timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(setValueAnimation:) userInfo:userInfo repeats:YES]; 
```

4th：实现你的计时器方法：

```
- (void)setValueAnimation:(NSTimer *)timer
{
    if (_value >= newValue) {
        [_timer invalidate];
        _value = newValue;
        [self setVale:_value];

        // also can use [_delegate complete];

        CompleteHandler block = [timer.userInfo objectForKey:@"block"];
        if (block) {

              block();

        }
        return;
    }

    _value += .05;

    [self setVale:_value];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:54:45.540

我不知道是否有任何通知可以“利用”来获取 UIView 动画“步骤”，但是您可以使用 NSTimer“手动”执行动画，这将允许您不断更新您的值.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-03T06:48:13.897

如果有使用 UIView 的开箱即用解决方案 - 我全神贯注。这个动画框架（只有 2 个类！） - PRTween [https://github.com/chris838/PRTween](https://github.com/chris838/PRTween)将让您访问方便的计时功能以及更改的值。

这是我的一个更新项目[https://github.com/jdp-global/KACircleProgressView/](https://github.com/jdp-global/KACircleProgressView/)

```
PRTweenPeriod *period = [PRTweenPeriod periodWithStartValue:0 endValue:10.0 duration:1.0];

PRTweenOperation *operation = [PRTweenOperation new];
operation.period = period;
operation.target = self;
operation.timingFunction = &PRTweenTimingFunctionLinear;
operation.updateSelector = @selector(update:)

[[PRTween sharedInstance] addTweenOperation:operation]

- (void)update:(PRTweenPeriod*)period {
  [myUISlider setValue:period.tweenedValue];
} 
```

# f# - F# 整数文件指令

> ID：15423798
> 
> 赞同：0
> 
> 时间：2013-03-15T02:40:57.557
> 
> 标签：f#, fsyacc, fslex, fsc

我一直在使用 fslex 和 fsyacc，并且 F# 源文件（`.fs`它们从 lexer ( `.fsl`) 和 parser ( `.fsp`) 规则生成）在所有地方都引用了原始文件`.fsl`（有时是同一个`.fs`源文件），并带有这样的语句（数字是行号）：

```
lex.fs
1      # 1 "/[PROJECT-PATH-HERE]/lex.fsp
...
16     # 16 "/PROJECT-PATH-HERE]/lex.fs
17     // This is the type of tokens accepted by the parser
18     type token =
19       | EOF
... 
```

此外，由`.fs`生成的文件`pars.fsp`做同样的事情，但额外引用了`.fsi`与它一起生成的 F# 签名文件 ( )。这些是什么/意味着什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:10:04.733

您在生成的代码中看到的注释是[F# 编译器指令](http://msdn.microsoft.com/en-us/library/dd233195.aspx)（特别是“line”指令）。

'line' 指令使得当 F# 编译器需要为生成的代码的某些部分发出警告/错误消息时，它可以确定*原始*文件的哪一部分对应于生成代码的那部分。换句话说，F# 编译器可以参考原始代码生成警告/错误消息，这是导致错误的生成代码的基础。

# jsf-2 - 未提交 JSF2 动态表单

> ID：15423801
> 
> 赞同：1
> 
> 时间：2013-03-15T02:41:18.110
> 
> 标签：jsf-2

我有一个在单独的 jsf 页面中定义的表单。当我单击一个链接时，它会包含在主页中。现在表单正在正确显示。但问题是提交按钮没有调用定义的动作函数。

包含页面的代​​码（正如这个问题中所建议的： [JSF2 Dynamically loading pages by ajax](https://stackoverflow.com/questions/15412704/jsf2-dynamically-loading-pages-by-ajax)

```
<h:panelGroup id="editdivparent" layout="block">
 <h:panelGroup id="editdiv" rendered="#{formsBean.edituserdiv}" layout="block">
     <h:form id="userform"  class="form-horizontal"> 
  <ui:include src="edituserdetails.xhtml">

   </ui:include>
 </h:form>
</h:panelGroup>
</h:panelGroup> 
```

包含的页面仅包含带有提交按钮的表单元素：

```
<h:commandButton action="#{userBean.register() }"  value="Update">

</h:commandButton> 
```

我没有收到任何错误。提交表单时，将重新显示当前页面。我在动作函数中放了一些打印语句。还有一个查询错误。它们都没有生成。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:45:12.447

该`commandButton` `action`属性已经需要一个方法表达式，所以只需去掉括号，如下所示：

```
<h:commandButton action="#{userBean.register}" value="Update" /> 
```

此外，确保在制作包含包含的模板时没有嵌套表单。

我希望它有所帮助。

# android - 如何通过代码打开内置文件管理器

> ID：15423802
> 
> 赞同：1
> 
> 时间：2013-03-15T02:41:29.887
> 
> 标签：android

我的手机中有一个内置的文件管理器。我如何通过我的应用程序中的代码调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T12:04:27.967

我编写了自己的文件管理器，如下所示。可能对大家有用。

如果我错了，试试这个并纠正我

```
public class FileManager extends Activity {

private String[] basePath = {Environment.getExternalStorageDirectory() + "", "/mnt/sdcard2"};

private ListView listView;

private ArrayList<String> pathList;
ArrayAdapter<String> adapter;
private ArrayList<String> fileList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_file_manager);

    listView = (ListView)findViewById(R.id.listView);

    fileList = new ArrayList<String>();
    pathList = new ArrayList<String>();

    adapter = new ArrayAdapter<String>(this,    android.R.layout.simple_list_item_1, fileList);
    loadBasedata();
    listView.setAdapter(adapter);

    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

            // Path is hardcoded
            if(pathList.size() == 0)
                pathList.add(basePath[0]);
            else
                pathList.add(pathList.get(pathList.size() - 1) + "/" + fileList.get(position));
            fileList.clear();
            // Add new files to list
            addFilesToList(pathList.get(pathList.size() - 1));
            adapter.notifyDataSetChanged();
        }
    }); 
}
private void loadBasedata() {
    fileList.clear();

    fileList.add("Internal sdcard");
    File file = new File(basePath[1]);
    if(file.exists())
    {
        fileList.add("External sdcard");
    }
    adapter.notifyDataSetChanged();
}   
@Override
public void onBackPressed() {

    if(pathList.isEmpty())
        finish();
    else if(pathList.size() == 1)
    {
        pathList.clear();
        loadBasedata();
    }
    else
    {
        fileList.clear();
        pathList.remove(pathList.size() - 1);
        addFilesToList(pathList.get(pathList.size() - 1));
        adapter.notifyDataSetChanged();
    }
}
private void addFilesToList(String path) {
    File parentDir = new File(path);

    if(parentDir.isDirectory())
    {
        File[] files = parentDir.listFiles();
        //this.adapter.add("Go Back");
        for(int i = 0; i < files.length; i++)
        {
            String filename=files[i].getName();
            fileList.add(filename);        
        }
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:55:26.540

尝试这个

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
intent.setType("file/*");
intent.setData(Uri.parse("file://"));

if (getPackageManager().resolveActivity(intent, 0) != null)
    startActivity(intent); 
```

部分安卓操作系统没有文件浏览器，需要进行以上验证。

# qt - QProcess 禁用标准输出重定向

> ID：15423804
> 
> 赞同：0
> 
> 时间：2013-03-15T02:41:36.967
> 
> 标签：qt

我想从 QT 应用程序启动一个进程并捕获它的终止事件。它使用 QProcess::start() 方法完成。但与 startDetached() 不同的是，进程的标准输出被重定向到缓冲区。我不想要那个。
我找不到如何禁用它。一个丑陋的解决方法是调用 setStandardOutputFile("/dev/stdout")

测试.h

```
#ifndef MY_TEST_H
#define MY_TEST_H

#include <QCoreApplication>

class MyApp : public QCoreApplication {
  Q_OBJECT  
  private Q_SLOTS:
    void subprocessStarted();
    void subprocessFinished(int);
  public:
    MyApp( int & argc, char ** argv );
};

#endif 
```

测试.cpp

```
#include "test.h"

#include <QProcess>
#include <QCoreApplication>
#include <stdio.h>

#define ENTRY printf("%s\n", __PRETTY_FUNCTION__)

MyApp::MyApp( int & argc, char ** argv ) : QCoreApplication(argc, argv) {
  ENTRY;

  QProcess *process = new QProcess();
  //process->setStandardOutputFile("/dev/stdout");
  process->start("/bin/echo aaa");
  bool b;
  b = connect(process, SIGNAL(started()), SLOT(subprocessStarted()));
  printf("connect started %d\n", b);
  b = connect(process, SIGNAL(finished(int)), SLOT(subprocessFinished(int)));
  printf("connect finished %d\n", b);
}
void MyApp::subprocessStarted() {
  ENTRY;
}
void MyApp::subprocessFinished(int ret) {
  ENTRY;
  printf("%d\n", ret);
}

int main(int argc, char *argv[]) {
  ENTRY;
  MyApp a(argc, argv);
  return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:58:47.793

[QProcess::closeReadChannel(ProcessChannel channel)](http://qt-project.org/doc/qt-5/qprocess.html#closeReadChannel)是否适合您？

> 关闭读取通道通道。调用此函数后，QProcess 将不再接收通道上的数据。任何已经接收到的数据仍然可供读取。如果您对进程的输出不感兴趣，请调用此函数以节省内存。

像这样-

```
QProcess *process = new QProcess();
process->start("/bin/echo aaa");
process->closeReadChannel(QProcess::StandardOutput);
process->closeReadChannel(QProcess::StandardError); 
```

# image - 图像无法在 ftp 中完美上传

> ID：15423809
> 
> 赞同：0
> 
> 时间：2013-03-15T02:42:10.087
> 
> 标签：image

您好我正在尝试在 ftp 中上传我的图片，但图片上传不完美。请帮助这是图像 [http://klineconstruction.com.au/images/designandconstruct-header.png](http://klineconstruction.com.au/images/designandconstruct-header.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:47:14.893

您是否在二进制模式下进行传输？（只需在连接上写“二进制”）

此外，请查看[此站点](http://www.cs.colostate.edu/helpdocs/ftp.html)的 FTP 基本命令列表。

# android - android v <= 2.2 的 android usb 连接

> ID：15423813
> 
> 赞同：1
> 
> 时间：2013-03-15T02:42:35.753
> 
> 标签：android, usb, linux-device-driver

我想使用 USB 数据线将我的安卓手机连接到我的电脑。

现在，我需要通过这个 USB 连接从我的 android 设备向 pc 发送一些消息，反之亦然。

我知道 USB 主机，但遗憾的是我使用的是 android 2.2。我的电脑有 linux，所以我可以开发基本的设备驱动程序。

我想知道，这样的任务还有其他 api 吗？如果不是，我应该如何使用设备驱动程序来处理它？我应该使用哪种通信协议？

PS：我不是在谈论连接其他 USB 设备。我只想使用手机随附的电缆进行通信。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:57:00.943

如果您在 PC 上安装了 sdk，您可以非常轻松地通过 adb 进行通信。

# php - Apache 模块 mpm_worker + php 问题

> ID：15423814
> 
> 赞同：1
> 
> 时间：2013-03-15T02:42:39.813
> 
> 标签：php, apache, apache2, preforking

我在 ubuntu 机器中使用 php 和 apache 并尝试多线程概念。Apache 带有默认的“prefork”模块。当我启用 mpm_worker 模块时，Php 停止工作..

在 apache 中启用 mpm_worker 时，我是否需要启用任何其他模块才能使 php 正常工作。

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:14:35.193

如果有人遇到同样的问题，请查看这篇文章：

```
1\. Install apache2-mpm-worker and the fastcgi apache module libapache-mod-fcid

Code:
# apt-get install apache2-mpm-worker  libapache2-mod-fcgid2\. Enable the Fastcgi apache module mod_fcgid

Code:
# sudo a2enmod fcgid3\. Install php5-cgi and the command-line version php5-cli

Code:
# sudo aptitude install php5-cgi php5-cli4\. Add the following to /etc/apache2/httpd.conf or place these basic configuration settings in a file under /etc/apache2/conf.d. For example, /etc/apache2/conf.d/00-myconf ("00-" will help insure it is read first before other /etc/apache2/conf.d files, which is necessary).    

Code:
<Directory /var/www>
AddHandler fcgid-script .php
FCGIWrapper /usr/lib/cgi-bin/php5 .php
Options +ExecCGI
</Directory>
# If you have Aliases provide php support for them (Here we provide php support for scripts in /usr/share's subdirectories)
Alias /aptitude /usr/share/doc/aptitude/html/en
Alias /apt /usr/share/doc/apt-doc

<Directory /usr/share>
AddHandler fcgid-script .php
FCGIWrapper /usr/lib/cgi-bin/php5 .php
Options ExecCGI FollowSymlinks Indexes
</Directory>5\. Then, for each virtual host configuration file you have in /etc/apache2/sites-available, add ExecCGI within a <Directoy /path-to-site> block (placed within your <VirtualHost> block). For example, 

# cat /etc/apache2/sites-availabe/yourdomain.com

Code:
<VirtualHost *:80>
ServerAdmin youremail@yourdomain.com
ServerName yoursite.tld
ServerAlias www.yourdomain.tld *.yourdomain.tld

DocumentRoot /var/www/yourdomain.com

ErrorLog        /var/log/apache2/yourdomain.tld-error.log
CustomLog       /var/log/apache2/yourdomain.tld-access.log combined

<Directory /var/www/yourdomain.com>
Options +ExecCGI 

AllowOverride All
Order Allow,Deny
allow from all
</Directory>
LogLevel warn
ServerSignature On
</VirtualHost>Note: ExecCGI was turned on in /etc/apache2/sites-available/default for /var/www and its subdirectories, so it is not strictly necessary within the <VirtualHost > block shown here. Using +ExecCGI adds fastcgi support to the Options in force. Options don't merge with prior options (they replace them) unless + is used. You can specify entirely different Options, but you must at a minmum have ExecCGI, if you want php support for your virtual host.

6\. For any other <Directory /some/other/path> blocks you have, say, for virtual hosts, which are not subdirectories of /var/www or /usr/share, add 

<Directory /some/other/path>
AddHandler fcgid-script .php
FCGIWrapper /usr/lib/cgi-bin/php5 .php
Options +ExecCGI 
# add other Options you might need, but ExecCGI is required
# . . .
</Directory>

7\. Enable your virtual host    

Code:
#sudo a2ensite yourdomain.com7\. And reload the apache configuration

Code:
# sudo /etc/init.d/apache2 force-reloador just restart apache2

Code:
# sudo /etc/init.d/apache2 restart 
```

# api - SoundCloud API - 按版本号获取我的曲目

> ID：15423815
> 
> 赞同：0
> 
> 时间：2013-03-15T02:42:50.293
> 
> 标签：api, filtering, soundcloud

我可以查询我的曲目并直接找到具有特定版本号的曲目吗？

或者我是否必须得到我所有的曲目，然后用类似的东西过滤它们`for each`

我知道如何做后者，但这需要一些时间。如果是前者，我会使用什么 GET 字符串？我试过这样的东西，但它不工作。

`http://api.soundcloud.com/users/12345?release=1071&client_id=myClientID`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:48:34.000

从文档看来，不支持按版本号获取。大多数 GET 非常广泛，必须进行过滤。

# android - 如何将菜单项从超类活动中包含到预先存在的菜单中？

> ID：15423816
> 
> 赞同：2
> 
> 时间：2013-03-15T02:42:55.580
> 
> 标签：android, menu

我有一个自定义 Activity，我将对其进行扩展，以引入一些我正在构建的众多应用程序中需要的默认功能。

我的目标是从超类中添加几个菜单项，这样子类活动就不必每个人都考虑它们。他们可以有自己的菜单行为，超类只会将其默认菜单项注入到整个菜单中。

我在这里查看文档：http: [//developer.android.com/guide/topics/ui/menus.html#intents](http://developer.android.com/guide/topics/ui/menus.html#intents)并且我觉得我需要知道其中的菜单组的 ID我希望添加这些项目，但我的目标是让超类不知道其他菜单项或其包装器的详细信息，而只是找到现有的菜单布局并添加内容。

这是可能的，还是我必须确保我的所有菜单布局在所有应用程序中都标准化，并为超类准备一个项目以将其菜单项注入？

# facebook - 如何在私人消息中获取与 facebook 网站大小相同的图片？

> ID：15423819
> 
> 赞同：2
> 
> 时间：2013-03-15T02:43:31.667
> 
> 标签：facebook, message, image

我可以在私信中获取图片链接。在大多数情况下，我可以通过“/s320x320/”重播链接中的“/v/”部分来缩小一个。但不是每张照片。

这是我的问题。我怎样才能获得与 Facebook 网站相同大小的图片？*在提要的情况下，他们会响应许多链接，但在私人消息的情况下不会。

希望得到您的帮助。我无法从日本的 Facebook 得到任何答复，也不希望得到答复。非常感谢。

# cmake - CMake：具有多个项目的静态库

> ID：15423821
> 
> 赞同：3
> 
> 时间：2013-03-15T02:43:39.093
> 
> 标签：cmake

我有两个使用 CMake 的项目。项目 A 构建一个静态库，然后链接到项目 B。问题是，当我从项目 A 更改源文件并构建两个项目时，项目 B 不会再次自动链接。如何将项目 A（静态库）的输出添加到项目 B？

**编辑：**这是我的问题的一个例子：

ProjectA CMakeLists.txt：

```
cmake_minimum_required (VERSION 2.6)
PROJECT(PROJECTA)

ADD_LIBRARY(projectA STATIC "src/foo.cpp") 
```

ProjectB CMakeLists.txt：

```
cmake_minimum_required (VERSION 2.6)
PROJECT(PROJECTB)

set(PROJECTA_DIR ${CMAKE_CURRENT_SOURCE_DIR}/../ProjectA)
include_directories(${PROJECTA_DIR}/include)

link_directories(${PROJECTA_DIR}/build)

ADD_EXECUTABLE(projectB "src/main.cpp")
target_link_libraries(projectB projectA) 
```

要重现问题：

1.  构建两个项目（需要先构建 ProjectA）。
2.  更改 ProjectA/src/foo.cpp
3.  构建 ProjectA（它将更新 libProject.a）
4.  构建 ProjectB（它*不会*将可执行文件与新的 libProject.a 链接，而是假定没有进行任何更改并且什么也不做）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T17:32:26.693

将我的评论变成答案。

通常，当 CMake 项目必须合作时，使用`add_subdirectory()`. 这样，CMake 可以跟踪其目标之间的依赖关系，自动解析对逻辑目标名称的引用等。

如果这不是您的选择，您至少应该删除`link_directories()`并使用`target_link_libraries()`. `link_directories()`通常不鼓励使用，已知它会导致问题。

# unicode - 当我重命名一个克隆站点的名称时出现 UnicodeDecodeError

> ID：15423826
> 
> 赞同：6
> 
> 时间：2013-03-15T02:44:10.647
> 
> 标签：unicode, plone

Plone 4.2.5从4.1.4升级，default_language为zh-cn，default_charset为utf-8（portal_properties/site_properties）。

当我尝试在 ip:8080/ 的根页面中重命名 Plone 站点的名称时，会显示站点错误：

```
An error was encountered while publishing this resource. 
Error Type: UnicodeDecodeError
Error Value: ('ascii', '\xe8\xa2\x81\xe4\xba\x88\xe6\xb9\x98', 0, 1, 'ordinal not in range(128)')

Traceback (innermost last):
  Module ZPublisher.Publish, line 126, in publish
  Module ZPublisher.mapply, line 77, in mapply
  Module ZPublisher.Publish, line 46, in call_object
  Module OFS.CopySupport, line 333, in manage_renameObjects
  Module OFS.CopySupport, line 369, in manage_renameObject
  Module zope.event, line 31, in notify
  Module zope.component.event, line 24, in dispatch
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module zope.component.event, line 32, in objectEventNotify
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 101, in dispatchObjectWillBeMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 101, in dispatchObjectWillBeMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 101, in dispatchObjectWillBeMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 101, in dispatchObjectWillBeMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module OFS.subscribers, line 101, in dispatchObjectWillBeMovedEvent
  Module zope.container.contained, line 153, in dispatchToSublocations
  Module zope.component._api, line 136, in subscribers
  Module zope.component.registry, line 321, in subscribers
  Module zope.interface.adapter, line 585, in subscribers
  Module Products.CMFCore.CMFCatalogAware, line 271, in handleContentishEvent
  Module Products.Archetypes.CatalogMultiplex, line 49, in unindexObject
  Module Products.CMFPlone.CatalogTool, line 393, in uncatalog_object
  Module Products.ZCatalog.ZCatalog, line 508, in uncatalog_object
  Module Products.ZCatalog.Catalog, line 369, in uncatalogObject
  Module Products.PluginIndexes.common.UnIndex, line 286, in unindex_object
  Module Products.PluginIndexes.common.UnIndex, line 157, in removeForwardIndexEntry
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe8 in position 0: ordinal not in range(128) 
```

当我尝试将一些文件夹导入新创建的 Plone 站点时，曾经发生过与 UnicodeDecodeError 相关的问题。

我成功地重命名了另一个 Plone 站点的名称。我不知道它们之间有什么区别。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T10:10:51.447

您的网站有时会将 unicode 内容编入目录索引，从而有效地破坏它们。这可能是由于旧的 Plone 错误，或者附加组件或自定义代码出错。

您可以尝试运行一个完整的重新索引，并将默认的 Python 编码设置为 UTF-8 来解决这个问题。**以下不是生产现场的推荐程序**；这只是解决您问题的临时“石膏”。

在您的 Python`site-packages`目录中，添加一个以`sitecustomize.py`内容命名的文件：

```
import sys

sys.setdefaultencoding('utf8') 
```

然后重新启动您的克隆站点并尝试重命名或首先执行完整的目录重新索引。

请记住再次*删除*该`sitecustomize.py`文件。在 Python 中设置默认编码只会掩盖未来的问题。

# python - 如何运行两个不同的 Python 程序来控制一个公共队列？

> ID：15423827
> 
> 赞同：0
> 
> 时间：2013-03-15T02:44:10.753
> 
> 标签：python, queue

以下是来源：

```
#one.py: 
from Queue import Queue 
req = Queue() 
```

* * *

```
#two.py: 
import one 
import time 
if __name__ == '__main__': 
    while True: 
    print "this is two.py and reqID is ",id(one.req) 
    print "Queue size is %s"%one.req.qsize() 
    time.sleep(5) 
```

* * *

```
#three.py: 
import one 
import time 
if __name__ == '__main__': 
    while True: 
    print "this is three.py and reqID is ",id(one.req) 
    print "Queue size is %s"%one.req.qsize() 
    one.req.put(2) 
    time.sleep(5) 
```

`one.py`有一个共同的队列。我想使用`two.py`和`three.py`控制`one.py`的公共队列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T02:51:58.607

根据您要执行的操作，可以想到一些选项：

*   您可以使用操作系统管道（FIFO，等等），并像文件一样从/向它读取/写入数据。这根本不会使用`Queue`系统。
*   你可以反过来组合这些程序。让 two.py 和 three.py 只定义它们各自的功能，然后`import two, three`从 one.py 中，并从 one.py 中分叉进程。`multiprocessing`大概用于这个。我不能 100% 确定它是否`Queue`能在完全分叉的进程中正常工作。该`multiprocessing`包也有自己的`Queue`类。
*   只需使用 python 线程。我的印象是这不适合您的应用程序，但我想我还是把它放在这里。

第二种选择可能是我会做的。two.py 和 three.py 中的函数需要将 a`Queue`作为参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:53:46.547

两个不同的程序不能直接访问彼此的数据。这在操作系统上下文中称为进程隔离：

[http://en.wikipedia.org/wiki/Process_isolation](http://en.wikipedia.org/wiki/Process_isolation)

您需要为此使用进程间通信。看：

[http://en.wikipedia.org/wiki/Inter-process_communication](http://en.wikipedia.org/wiki/Inter-process_communication)

python标准库中的IPC特性示例：

[http://docs.python.org/2/library/ipc.html](http://docs.python.org/2/library/ipc.html)

# c# - .NET Framework 4.0 是否支持用于 Websocket 通信的数据框架？

> ID：15423829
> 
> 赞同：2
> 
> 时间：2013-03-15T02:44:13.660
> 
> 标签：c#, .net, websocket

我只想知道 .NET Framework 4.0 是否支持通过 websocket 从 c#（Websocket 服务器）向 HTML5（客户端）发送数据的数据框架？

[https://www.google.com.ph/#hl=en&output=search&sclient=psy-ab&q=data+framing+support+in+.net+framework+4.0&oq=data+framing+support+in+.net+framework+ 4.0&gs_l=hp.3..33i29i30l2.9744.22482.0.22676.48.34.2.0.0.2.1006.13160.4-1j10j7j1.19.0.les%3B..0.0...1c.1.6.psy-ab.03DQYeQRUMw&pbx=1&bav= .2,or.r_cp.r_qf.&bvm=bv.43828540,d.Yms&fp=134c94d72e3b7e00&biw=1244&bih=899](https://www.google.com.ph/#hl=en&output=search&sclient=psy-ab&q=data+framing+support+in+.net+framework+4.0&oq=data+framing+support+in+.net+framework+4.0&gs_l=hp.3..33i29i30l2.9744.22482.0.22676.48.34.2.0.0.2.1006.13160.4-1j10j7j1.19.0.les%3B..0.0...1c.1.6.psy-ab.03DQYeQRUMw&pbx=1&bav=on.2,or.r_cp.r_qf.&bvm=bv.43828540,d.Yms&fp=134c94d72e3b7e00&biw=1244&bih=899)

我尝试使用该关键字进行谷歌搜索，但尚未找到任何有用的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:09:19.220

.NET 4.5 中添加了对 WebSockets 的 .NET 支持。有关详细信息，请参阅[System.Net.WebSockets.AspNetWebSocket](http://msdn.microsoft.com/en-gb/library/system.web.websockets.aspnetwebsocket.aspx)上的 MSDN 文档。

.NET 4.0 没有内置的 WebSocket 支持。假设迁移到 .NET 4.5 不是您的选择，您可以编写自己的服务器（我相信您一直在尝试）或使用第三方 .NET 服务器。存在许多自由许可的开源服务器；我没用过，但[Fleck](https://github.com/statianzo/Fleck)似乎很受好评。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:56:29.607

也许这个stackoverflow答案可以帮助你： [How to (de)construct data frames in WebSockets hybi 08+?](https://stackoverflow.com/questions/7040078/how-to-deconstruct-data-frames-in-websockets-hybi-08)

答案中提供的源代码示例是 JavaScript，但您也可以将其转换为 C#。

# delphi - 将 TSTringList Names 属性排序为整数而不是字符串

> ID：15423832
> 
> 赞同：0
> 
> 时间：2013-03-15T02:44:58.357
> 
> 标签：delphi

我有一个大的文本数据文件，每行看起来像这样

```
10005=08/18/09,No BS,25094,wrg1 
```

并且数据乱序（即等号前的数字）

我将此文件作为名称值对加载到 StringList 中。TStringList 排序函数当然不会，因为数字是字符串而不是整数。

在将它们加载到 TStringList 之前，我如何才能将它们整理好？

是否有一个快速函数可以让我执行文件，该函数返回一个我可以分配给 TStringList 的 TStrings？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T07:05:37.457

```
function StrCmpLogicalW(sz1, sz2: PWideChar): Integer; stdcall;
  external 'shlwapi.dll' name 'StrCmpLogicalW';

function MyCompare(List: TStringList; Index1, Index2: Integer): Integer;
begin
  Result := StrCmpLogicalW(PWideChar(List[Index1]), PWideChar(List[Index2]));
end; 
```

用法：

```
 StringList.CustomSort(MyCompare); 
```

# java - Robolectric 和 Dagger 测试

> ID：15423833
> 
> 赞同：3
> 
> 时间：2013-03-15T02:45:06.687
> 
> 标签：java, android, robolectric, dagger

我正在尝试使用 Robolectric (1.2) 和 Dagger 测试应用程序。

我的测试模块很简单：

```
@RunWith(RobolectricTestRunner.class)
public class XmlTests {
    // Injected
    @Inject XmlPullParser mParser;
    @Inject AlarmActionSpawner mActionSpawner;
    @Inject FileHelper mFileHelper;
    @Inject XmlSerializer mSerializer;
    @Inject ConcurrentObjectMonitor mObjMonitor;

    @Module(
        includes = ServicesModule.class,
        entryPoints = XmlTests.class,
        overrides = true
    )
    static class TestModule {
        public TestModule() { }
    }

    @Before
    public void setUp() throws Exception {
        Log.i("setUp() entering.");

        ObjectGraph og = ObjectGraph.create(new TestModule());
        og.validate();
        og.inject(this);
        ... 
```

包含的 ServiceModule 包括 XmlServiceModule：

```
@Module
public class XmlServiceModule {

    @Provides @Singleton XmlSerializer provideXmlSerializer() {
        return android.util.Xml.newSerializer();
    }

    @Provides @Singleton XmlPullParser provideXmlPullParser() {
        XmlPullParser pullParser = null;
        try {
            XmlPullParserFactory xppf = XmlPullParserFactory.newInstance();
            pullParser = xppf.newPullParser();
        } catch (XmlPullParserException e) {
            throw new RuntimeException(e.getMessage());
        }
        return pullParser;
    } 
```

一切都很好，我可以在 Eclipse 中调试，直到**XmlPullParserFactory.newInstance()**被命中。那时，我收到了可怕的消息：

```
java.lang.RuntimeException: Stub!
    at org.xmlpull.v1.XmlPullParserFactory.newInstance(XmlPullParserFactory.java:13)
    at ....
    at .... 
```

我对 Robolectric 和 Dagger 比较陌生，也许我在实施中做错了什么，我不认为在配置中。我应该检查什么以确保一切正常？你们在这段代码中看到任何明显的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:12:52.160

好的，在 GitHub 上等待答案以查看是否值得为 Robolectric 构建 XmlPullParser 和 XmlSerializer 的影子时，我以这种方式解决了我的问题。这正是我喜欢 Dagger 和 Dependency Injector 框架（当然还有 Maven）的原因。更改实际上花费了 10 分钟，比写这个答案还短，现在它就像一个魅力。

我在我的 pom 中添加了 Kxml 依赖项：

```
<dependency>
    <groupId>net.sf.kxml</groupId>
    <artifactId>kxml2</artifactId>
    <version>2.3.0</version>
    <scope>test</scope>
</dependency> 
```

然后我将我的测试模块更改为：

```
@Module(
    includes = ServicesModule.class,
    entryPoints = XmlTests.class,
    overrides = true
)
static class TestModule {
    public TestModule() { }

    @Provides @Singleton XmlSerializer provideXmlSerializer() {
        return new KXmlSerializer();
    }

    @Provides @Singleton XmlPullParser provideXmlPullParser() {
        return new KXmlParser();
    }
} 
```

请注意，`override = true`因为这两个方法将覆盖 in 中的一个`XmlServiceModule`，从而创建对象图的新分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:27:29.243

据我所知，Robolectric 不支持 XmlPullParser 及其工厂。

您可能想要添加一些新的影子类。了解如何[在这里](http://pivotal.github.com/robolectric/extending.html)。

# gruntjs - 默认情况下，如何使 grunt.js 不会因警告而崩溃？

> ID：15423851
> 
> 赞同：19
> 
> 时间：2013-03-15T02:47:43.400
> 
> 标签：gruntjs

我正在使用 Grunt 编译 CoffeeScript 和 Stylus 并执行监视任务。我还设置了我的编辑器（SublimeText），以在每次离开文件时保存文件（我讨厌失去工作）。

不幸的是，如果 Grunt 在它正在编译的任何文件中遇到语法错误，它会抛出一个警告并以`Aborted due to warnings`. 我可以通过传递来阻止它这样做`--force`。有什么方法可以不中止默认行为（或控制哪些任务的警告足够重要以退出 Grunt？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-16T10:41:21.860

注册您自己的任务，它将运行您想要的任务。然后你必须通过`force`选项：

```
grunt.registerTask('myTask', 'runs my tasks', function () {
    var tasks = ['task1', ..., 'watch'];

    // Use the force option for all tasks declared in the previous line
    grunt.option('force', true);
    grunt.task.run(tasks);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-18T09:38:57.887

我用[Adam Hutchinson的建议尝试](https://stackoverflow.com/questions/15423851/how-do-you-make-grunt-js-not-crash-on-warnings-by-default#comment36109339_15448265)[了 asgoth](https://stackoverflow.com/a/15448265/3188412)的解决方案，但发现 force 标志立即被设置为 false。阅读 grunt.task.run 的[grunt.task](http://gruntjs.com/api/grunt.task) API 文档，它指出

> taskList 中的每个指定任务将在当前任务完成后立即按照指定的顺序运行。

这意味着我不能在调用 grunt.task.run 后立即将 force 标志设置回 false。我找到的解决方案是让明确的任务在之后将 force 标志设置为 false：

```
grunt.registerTask('task-that-might-fail-wrapper','Runs the task that might fail wrapped around a force wrapper', function() {
    var tasks;
    if ( grunt.option('force') ) {
        tasks = ['task-that-might-fail'];
    } else {
        tasks = ['forceon', 'task-that-might-fail', 'forceoff'];
    }
    grunt.task.run(tasks);
});

grunt.registerTask('forceoff', 'Forces the force flag off', function() {
    grunt.option('force', false);
});

grunt.registerTask('forceon', 'Forces the force flag on', function() {
    grunt.option('force', true);
}); 
```

# c++ - C ++ getline（）在读取整个文件之前重新启动

> ID：15423852
> 
> 赞同：0
> 
> 时间：2013-03-15T02:47:51.880
> 
> 标签：c++, getline

我的问题的要点是我正在读取一个文件，其中的字段由 # 分隔，但行尾除外。当我查看正在读入书籍结构的字段的打印语句时（使用 for 循环遍历整个数据文件/书籍列表（理论上）），它们都具有相同的值。例如，有 200 个完全相同的 id 后跟 200 个完全相同的标题，而不是在数据文件上往下读。

确切的代码是：

```
void loadTable(book table[], int size){
    for (int i = 0; i < size; i++){
        book newBook;
        ifstream ifs("inventory.txt");
        string bit;
        getline(ifs, bit, '#');
        newBook.bookId = atoi(bit.c_str());
        cout << "BookID: " << newBook.bookId;
        getline(ifs, bit, '#');
        newBook.title = bit;
        cout << "Title: " << newBook.title;
        getline(ifs, bit, '#');
        newBook.author = bit;
        getline(ifs, bit, '#');
        newBook.cost = atof(bit.c_str());
        getline(ifs, bit, '#');
        newBook.price = atof(bit.c_str());
        getline(ifs, bit);
        newBook.quantity = atoi(bit.c_str());
        loadBook(table, newBook, size);
    }

} 
```

确切的结果：

```
tiesBookID: 116807Title: A Tale of Two CitiesBookID: 116807Title: A Tale of Two
CitiesBookID: 116807Title: A Tale of Two CitiesBookID: 116807Title: A Tale of Tw
o CitiesBookID: 116807Title: A Tale of Two CitiesBookID: 116807Title: A Tale of
Two CitiesBookID: 116807Title: A Tale of Two CitiesBookID: 116807Title: A Tale o
f Two CitiesBookID: 116807Title: A Tale of Two CitiesBookID: 116807Title: A Tale
 of Two CitiesBookID: 116807Title: A Tale of Two CitiesBookID: 116807Title: A Ta
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T02:53:41.847

为什么你总是在 for 循环中打开文件？您应该首先打开文件，然后遍历文件并将从文件中读取的内容放入结构中。在这种情况下，您总是在阅读前几行，其中包含有关第一本书的信息，因为您一次又一次地打开文件，同时您没有关闭文件，这不好。

# javascript - 用户事件后，Soundcloud 自定义播放器无法在移动 Safari 上播放

> ID：15423860
> 
> 赞同：2
> 
> 时间：2013-03-15T02:49:18.637
> 
> 标签：javascript, api, streaming, soundcloud

这可能是[这个问题](https://stackoverflow.com/questions/11103383/soundcloud-streaming-on-safari-mobile)的重复，但我需要一个如何使它工作的例子。以下适用于桌面浏览器，但不适用于移动 safari（我正在 iOS 6.1.2 中测试）。

我已经阅读了很多关于需要用户交互来播放声音的移动 safari，但这正是我在这里所拥有的：按钮单击触发功能来流式传输声音。

谁能指出我正确的方向？

```
<body>
  <div class="container" style="padding:20px">
    <div class="sixteen columns">
      <input type="button" href="#" id="stream" class="big button" value="Stream It Again, Sam" onclick="playTrack()"/>
      <div class="console"></div>
    </div>
  </div>

  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="//connect.soundcloud.com/sdk.js"></script>
  <script>
  SC.initialize({
    client_id: "MY-CLIENT-ID"
  });

  function playTrack(){
    SC.stream("/tracks/293", {
      useHTML5Audio: true,
      preferFlash: false
    }, function(sound) {
      sound.play();
      $('.console').text('button clicked');
    });

  }

  </script>
</body> 
```

这是一个[活生生的例子](http://alexweinstein.com/dev/oh-analog/default-skeleton/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T14:56:02.750

在您的情况下，用户操作和播放声音的调用发生在不同的调用堆栈中。

您需要将您的 JS 修改为以下内容：

```
SC.initialize({
  client_id: "YOUR_CLIENT_ID"
});

var soundToPlay; 
// first do async action
SC.stream("/tracks/293", {
  useHTML5Audio: true,
  preferFlash: false
}, function(sound) {
  soundToPlay = sound;
  document.querySelector('input').disabled = false;
});

function playTrack () {
  soundToPlay.play();
} 
```

这样声音在动作可能之前被加载（异步动作）（按钮默认禁用），然后你可以播放它并直接调用它。

这是一个工作示例 - <a href="http://jsbin.com/esadon/1/edit" rel="nofollow">http://jsbin.com/esadon/1/edit

# python - 如何从 django 的静态文件夹中包含我的模板

> ID：15423863
> 
> 赞同：0
> 
> 时间：2013-03-15T02:49:43.670
> 
> 标签：python, django

我有 djnago 应用程序结构，例如

`myproject/myapp`

`myproject/myapp/static/site/app/index.html`

我想像这样在我的文件中包含该模板

`url(r'^public$', TemplateView.as_view(template_name="/static/site/app/index.html")),`

但它说找不到模板

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:31:35.030

```
 import os
 import sys

 PORJECT_ROOT = os.path.join(os.path.dirname(__file__),'..')
 sys.path.insert(0, os.path.join(PROJECT_ROOT,'static')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:03:08.610

确保该文件夹包含在`TEMPLATE_DIRS`设置中（在 settings.py 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:12:08.070

通常（按照惯例）模板文件文件夹是 project_root_folder\templates 文件夹，在 settings.py 中更新 TEMPLATE_DIRS：

```
import os
PORJECT_ROOT = os.path.dirname(os.path.dirname(__file__))
TEMPLATE_DIRS = (
    os.path.join(PORJECT_ROOT, 'templates'),
) 
```

而静态存储仅 javascript/css/images 文件。

这将使未来的开发和部署更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T08:26:59.427

默认情况下，django 在 app/templates 目录中检查模板匹配，或者在 project_root/templates/ 中检查。正如其他人所说，您应该在 TEMPLATE_DIRS 设置中列出目录。

# java - 有人可以帮助我进一步了解这个 Galaga 游戏吗？

> ID：15423865
> 
> 赞同：-2
> 
> 时间：2013-03-15T02:50:04.440
> 
> 标签：java, arrays, variables, recursion, arraylist

不久前，我开始在学校进行计算机科学作业的这个 galaga 计划，但今天才开始努力工作，基本上我已经把所有东西都画下来了（是的，我要添加更多的敌舰，但其他的一切即使代码很乱（是的，我知道它不是最好的，但现在，它可以工作）设置。游戏的下一个问题是碰撞。我目前的想法是有几个数组，一个用于每艘敌舰，数组将包括 x 和 y 坐标，因此如果激光是数组中列出的点，则“Ship1Explosion”将变为真（从原来的假变为真），这将绘制 ship1 的爆炸（我知道怎么做）以及就像将 boolean Ship1 更改为 false，这样船就不会一遍又一遍地继续重绘。

**我得到的错误**：

```
 error: int cannot be dereferenced
   int h = Ship1area.charAt(l); 
```

如果有人可以帮助我，我很乐意帮助设置激光碰撞。如果我需要解释其他任何事情，请告诉我，谢谢。

代码：

```
import java.awt.*;
import java.applet.*;
import java.util.Iterator;
import java.util.ArrayList;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
public class Galaga extends Applet implements KeyListener
{   
public static int x1 = 500;
public static int y1 = 400;
public static int bx = x1+73;
public static int by = y1+45;
public static int bx1 = x1+73;
public static int by1 = y1+100;
public static int by2 = by-40;
public static int by3 = by-50;
public static int x = 200;
public static int y = 0;
public static int j = 262;
public static int p;
public static int h;
public static int Ship1area;
public boolean keyUp;
public boolean keyDown;
public boolean keyLeft;
public boolean keyRight;
public boolean keySpace;
public boolean Laser = false;
public boolean Ship1Explosion = false;
public boolean Ship1 = true;

public void paint(Graphics g)
{
    DrawBackground(g);
    addKeyListener(this);
    this.DrawGalaga(g,x1,y1);
    DrawShip1(g);
    DrawLaser(g);
    DrawShip1Explosion(g);
}
public void DrawBackground(Graphics g)
{
    g.setColor(Color.black);
    g.fillRect(1,2,3000,4000);
    DrawStars(g);
}
public void DrawGalaga(Graphics g, int x1, int y1)
{       
        {
        g.setColor(Color.red);
        g.drawLine(x1+42,y1+75,x1+42,y1+80); //Far Left Gun
        g.drawLine(x1+43,y1+75,x1+43,y1+80);
        g.drawLine(x1+44,y1+75,x1+44,y1+80);
        g.drawLine(x1+45,y1+75,x1+45,y1+80);

        g.setColor(Color.white);
        g.drawLine(x1+42,y1+80,x1+42,y1+100); //Far Left Piece
        g.drawLine(x1+43,y1+80,x1+43,y1+100);
        g.drawLine(x1+44,y1+80,x1+44,y1+100);
        g.drawLine(x1+45,y1+80,x1+45,y1+100);

        g.drawLine(x1+46,y1+83,x1+46,y1+96); //From Left, 1st one
        g.drawLine(x1+47,y1+83,x1+47,y1+96);
        g.drawLine(x1+48,y1+83,x1+48,y1+96);
        g.drawLine(x1+49,y1+83,x1+49,y1+96);

        g.drawLine(x1+50,y1+79,x1+50,y1+92); //From Left, 2nd one
        g.drawLine(x1+51,y1+79,x1+51,y1+92);
        g.drawLine(x1+52,y1+79,x1+52,y1+92);
        g.drawLine(x1+53,y1+79,x1+53,y1+92);    

        g.drawLine(x1+54,y1+65,x1+54,y1+89); //From Left, 3rd one
        g.drawLine(x1+55,y1+65,x1+55,y1+89);
        g.drawLine(x1+56,y1+65,x1+56,y1+89);
        g.drawLine(x1+57,y1+65,x1+57,y1+89);

        g.drawLine(x1+58,y1+75,x1+58,y1+89); //From Middle 3rd one
        g.drawLine(x1+59,y1+75,x1+59,y1+89);
        g.drawLine(x1+60,y1+75,x1+60,y1+89);
        g.drawLine(x1+61,y1+75,x1+61,y1+89);

        g.drawLine(x1+62,y1+70,x1+62,y1+85); //From Middle, 2nd Left one
        g.drawLine(x1+63,y1+70,x1+63,y1+85);
        g.drawLine(x1+64,y1+70,x1+64,y1+85);
        g.drawLine(x1+65,y1+70,x1+65,y1+85);
        g.drawLine(x1+66,y1+60,x1+66,y1+95); //From Middle, 1st Left one
        g.drawLine(x1+67,y1+60,x1+67,y1+95);
        g.drawLine(x1+68,y1+60,x1+68,y1+95);
        g.drawLine(x1+69,y1+60,x1+69,y1+95);

        g.drawLine(x1+70,y1+45,x1+70,y1+100); //Big Middle Piece
        g.drawLine(x1+71,y1+45,x1+71,y1+100);
        g.drawLine(x1+72,y1+45,x1+72,y1+100);
        g.drawLine(bx,by,bx1,by1);
        g.drawLine(x1+74,y1+45,x1+74,y1+100);
        g.drawLine(x1+75,y1+45,x1+75,y1+100);
        g.drawLine(x1+76,y1+45,x1+76,y1+100);

        g.drawLine(x1+77,y1+60,x1+77,y1+95); //From Middle, 1st Right one
        g.drawLine(x1+78,y1+60,x1+78,y1+95);
        g.drawLine(x1+79,y1+60,x1+79,y1+95);
        g.drawLine(x1+80,y1+60,x1+80,y1+95);

        g.drawLine(x1+81,y1+70,x1+81,y1+85); //From Middle, 2nd Right one
        g.drawLine(x1+82,y1+70,x1+82,y1+85);
        g.drawLine(x1+83,y1+70,x1+83,y1+85);
        g.drawLine(x1+84,y1+70,x1+84,y1+85);

        g.drawLine(x1+85,y1+75,x1+85,y1+89); //From Middle 3rd one
        g.drawLine(x1+86,y1+75,x1+86,y1+89);
        g.drawLine(x1+87,y1+75,x1+87,y1+89);
        g.drawLine(x1+88,y1+75,x1+88,y1+89);

        g.drawLine(x1+88,y1+65,x1+88,y1+89); //From Right, 3rd one
        g.drawLine(x1+89,y1+65,x1+89,y1+89);
        g.drawLine(x1+90,y1+65,x1+90,y1+89);
        g.drawLine(x1+91,y1+65,x1+91,y1+89);

        g.drawLine(x1+92,y1+79,x1+92,y1+92); //From Right, 2nd one
        g.drawLine(x1+93,y1+79,x1+93,y1+92);
        g.drawLine(x1+94,y1+79,x1+94,y1+92);
        g.drawLine(x1+95,y1+79,x1+95,y1+92);

        g.drawLine(x1+96,y1+83,x1+96,y1+96); //From Right, 1st one
        g.drawLine(x1+97,y1+83,x1+97,y1+96);
        g.drawLine(x1+98,y1+83,x1+98,y1+96);
        g.drawLine(x1+99,y1+83,x1+99,y1+96);

        g.drawLine(x1+100,y1+80,x1+100,y1+100); //Far Right Piece
        g.drawLine(x1+101,y1+80,x1+101,y1+100);
        g.drawLine(x1+102,y1+80,x1+102,y1+100);
        g.drawLine(x1+103,y1+80,x1+103,y1+100);

        g.setColor(Color.red);
        g.drawLine(x1+100,y1+75,x1+100,y1+80); //Far Right Gun
        g.drawLine(x1+101,y1+75,x1+101,y1+80);
        g.drawLine(x1+102,y1+75,x1+102,y1+80);
        g.drawLine(x1+103,y1+75,x1+103,y1+80);
    }
}
public void DrawShip1(Graphics g)
{
    int x = 0;
    int y = 0;
    if(Ship1)
    {
        g.setColor(Color.blue);
        Polygon Ship1 = new Polygon();
        Ship1.addPoint(x+268,y+190); //1
        Ship1.addPoint(x+270,y+190);
        Ship1.addPoint(x+270,y+185);
        Ship1.addPoint(x+275,y+185);
        Ship1.addPoint(x+275,y+155); //5
        Ship1.addPoint(x+278,y+155);
        Ship1.addPoint(x+278,y+150);
        Ship1.addPoint(x+285,y+150);
        Ship1.addPoint(x+285,y+165);
        Ship1.addPoint(x+293,y+165); //10
        Ship1.addPoint(x+293,y+150);
        Ship1.addPoint(x+301,y+150);
        Ship1.addPoint(x+301,y+165); 
        Ship1.addPoint(x+309,y+165);
        Ship1.addPoint(x+309,y+150); //15
        Ship1.addPoint(x+317,y+150);
        Ship1.addPoint(x+317,y+155);
        Ship1.addPoint(x+319,y+155);
        Ship1.addPoint(x+319,y+185);
        Ship1.addPoint(x+325,y+185); //20
        Ship1.addPoint(x+325,y+190);
        Ship1.addPoint(x+323,y+190);
        Ship1.addPoint(x+323,y+185);
        Ship1.addPoint(x+330,y+185);
        Ship1.addPoint(x+330,y+155); //25
        Ship1.addPoint(x+325,y+155);
        Ship1.addPoint(x+325,y+145);
        Ship1.addPoint(x+330,y+145);
        Ship1.addPoint(x+330,y+140);
        Ship1.addPoint(x+316,y+140); //30
        Ship1.addPoint(x+316,y+135);
        Ship1.addPoint(x+311,y+135);
        Ship1.addPoint(x+311,y+130);
        Ship1.addPoint(x+306,y+130);
        Ship1.addPoint(x+306,y+125); //35
        Ship1.addPoint(x+311,y+125);
        Ship1.addPoint(x+311,y+120);
        Ship1.addPoint(x+316,y+120);
        Ship1.addPoint(x+316,y+115);
        Ship1.addPoint(x+306,y+115); //40
        Ship1.addPoint(x+306,y+100);
        Ship1.addPoint(x+298,y+100);
        Ship1.addPoint(x+298,y+115);
        Ship1.addPoint(x+290,y+115);
        Ship1.addPoint(x+290,y+100); //45
        Ship1.addPoint(x+282,y+100);
        Ship1.addPoint(x+282,y+115);
        Ship1.addPoint(x+272,y+115);
        Ship1.addPoint(x+272,y+120);
        Ship1.addPoint(x+277,y+120); //50
        Ship1.addPoint(x+277,y+125);
        Ship1.addPoint(x+282,y+125);
        Ship1.addPoint(x+282,y+130);
        Ship1.addPoint(x+277,y+130);
        Ship1.addPoint(x+277,y+135); //55
        Ship1.addPoint(x+272,y+135);
        Ship1.addPoint(x+272,y+140);
        Ship1.addPoint(x+262,y+140);
        Ship1.addPoint(x+262,y+145);
        Ship1.addPoint(x+267,y+145); //60
        Ship1.addPoint(x+267,y+145);
        Ship1.addPoint(x+272,y+145);
        Ship1.addPoint(x+272,y+155);
        Ship1.addPoint(x+265,y+155);
        Ship1.addPoint(x+265,y+185); //61
        Ship1.addPoint(x+268,y+185);
        g.fillPolygon(Ship1);
        Polygon Ship1parts1 = new Polygon();
        g.setColor(Color.pink);
        Ship1parts1.addPoint(x+268,y+180);
        Ship1parts1.addPoint(x+272,y+180);
        Ship1parts1.addPoint(x+272,y+170);
        Ship1parts1.addPoint(x+270,y+170);
        Ship1parts1.addPoint(x+270,y+165);
        Ship1parts1.addPoint(x+268,y+165);
        Ship1parts1.addPoint(x+268,y+180);
        g.fillPolygon(Ship1parts1);
        Polygon Ship1parts2 = new Polygon();
        Ship1parts2.addPoint(x+330,y+180);
        Ship1parts2.addPoint(x+324,y+180);
        Ship1parts2.addPoint(x+324,y+170);
        Ship1parts2.addPoint(x+326,y+170);
        Ship1parts2.addPoint(x+326,y+165);
        Ship1parts2.addPoint(x+328,y+165);
        Ship1parts2.addPoint(x+328,y+180);
        g.fillPolygon(Ship1parts2);
        }
}
public void DrawStars(Graphics g)
{
    g.setColor(Color.yellow);
    int x, y;
    for (int s = 0; s < 2000; s++) 
        {
            x = (int)(Math.random()*2000);
            y = (int)(Math.random()*2000); 
            g.drawLine(x, y, x, y);
        }
}
public void keyPressed(KeyEvent e)
{
    if(e.getKeyCode() == KeyEvent.VK_LEFT)
    {
        x1--;
        bx--;
        bx1--;
    }
    if(e.getKeyCode() == KeyEvent.VK_RIGHT)
    {
        x1++;
        bx++;
        bx1++;
    }
    if(e.getKeyCode() == KeyEvent.VK_UP)
    {
        y1--;
        by--;
        by1--;
    }
    if(e.getKeyCode() == KeyEvent.VK_DOWN)
    {
        y1++;
        by++;
        by1++;
    }
    if(e.getKeyCode() == KeyEvent.VK_SPACE)
    {
        Laser = true;
    }
        repaint();
}
public void DrawLaser(Graphics g)
{
    if (Laser)
    {
        g.setColor(Color.yellow);
        outerloop:
            for(int i=0;i<=1000; i+=5)
            {
                for(int j=262;j<=330;j+=1)
                {
                    ArrayList Ship1area = new ArrayList();
                    Ship1area.add(j);
                }
                g.drawLine(bx,by2,bx,by3);
                delay(1);
                repaint();
                g.setColor(Color.black);
                g.drawLine(bx,by2,bx,by3);
                by2--;
                by3--;
                by2--;
                by3--;
                by2--;
                by3--;
                g.setColor(Color.yellow);
                g.drawLine(bx,by2,bx,by3);
                if(by2 <= 0)
                    break outerloop;
                for (int l=0;l<=p;l++)
                    {
                    int h = Ship1area.charAt(l);
                    if(h == bx)
                        {   
                            Ship1Explosion = true;
                        }
                    }
        }
        by2 = by-60;
        by3 = by-70;
    }
}
public void DrawShip1Explosion(Graphics g)
{
    if (Ship1Explosion)
        {
            g.setColor(Color.red);
            g.drawLine(100,100,200,200);
        }
}
public void keyReleased(KeyEvent e)
{   
    if(e.getKeyCode() == KeyEvent.VK_SPACE)
    {
        Laser = false;
    }
    keyUp = keyDown = keyLeft = keyRight = keySpace = false;
    repaint();
}
public void keyTyped(KeyEvent e)
{
}   
public void delay (int n)
{
    long startDelay = System.currentTimeMillis();
    long endDelay=0;
    while (endDelay - startDelay < n)
    endDelay = System.currentTimeMillis();
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:01:01.903

您所指的这一行：

```
int h = ship1area.charAt(l); 
```

是指`int`类级别的值。您可能想要方法中的循环中的`ArrayList`同名（！）。在这种情况下，您需要：`for``drawLaser`

```
int h = (int) ship1area.get(l); 
```

必须将`ArrayList`其移出`for`方法的范围才能可见。IE

```
public void drawLaser(Graphics g) {

   ArrayList<String> ship1area = new ArrayList<>();
   ... 
```

另外：给定 Java 命名约定，变量和方法名称通常以*小写*字母开头。

# ios - 如何让 UIView 动画更流畅？

> ID：15423868
> 
> 赞同：0
> 
> 时间：2013-03-15T02:50:43.373
> 
> 标签：ios, animation, uiview

我有几个手势识别器可以左右滑动图像或 vv，具体取决于滑动的方向。但我希望动画更流畅。到目前为止，这是我的代码：

```
-(void)swipeNext:(id)sender{
    //0 Get the currentview as referenced by pageControl
    UIImageView *oldView = [views objectAtIndex:currentViewIndex];
    //MOVE ON TO NEW VIEW
    currentViewIndex ++;
    NSLog(@"left swiped  - currentViewIndex:%d", currentViewIndex);
    UIImageView *newView = [views objectAtIndex:currentViewIndex];
    //NSLog(@"views objectAtIndex = %@",[views objectAtIndex:[self.pageControl currentPage]]);

    //1 Animate out the old view
    newView.frame = oldView.frame;
    newView.center = CGPointMake(oldView.center.x + CGRectGetWidth(oldView.frame), oldView.center.y);
    [oldView.superview addSubview: newView];

    [UIView animateWithDuration:1.0
                          delay: 0.0
                        options: UIViewAnimationOptionCurveEaseIn //UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse
                     animations:^{
                         newView.center = oldView.center;
                         oldView.center = CGPointMake(oldView.center.x - CGRectGetWidth(oldView.frame), oldView.center.y);

                     }
                     completion:nil];
} 
```

我想让它快一点。我已经发布了对我试图模仿的应用程序的引用，DunkinDonuts（[Dunkin Donuts 应用程序使用什么样的](https://stackoverflow.com/questions/15330361/what-kind-of-viewcontrollers-does-the-dunkin-donuts-app-use)视图控制器）并且他们似乎使用了 UIPageControl，我一开始尝试使用但无法确定滑动的方向（[如何使用 UIPageControl 从左到右为 UIImageView 设置动画？](https://stackoverflow.com/questions/15372190/how-do-i-animate-a-uiimageview-left-to-right-with-uipagecontrol)），所以我切换到了 Gestures。但是，如果您看到他们的应用程序，则滑动速度会更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:00:05.190

我发现要添加格式正确（可读）的代码块，我不能使用注释。有人建议我使用答案作为对原始问题的更新。所以就在这里。

更新

我像这样修改了我的代码。与往常一样，viewDidLoad 调用 createUIViews 来执行此操作：

```
-(void)createUIViews{
    UIImage *image1 = [UIImage imageNamed:@"GiftCard.png"];
    firstView = [[UIImageView alloc] initWithImage:image1];

    CGRect newFrame1 = firstView.frame;
    newFrame1.origin.x = 50;
    newFrame1.origin.y = 10;
    firstView.frame = newFrame1;

    UIImage *image2 = [UIImage imageNamed:@"MyCard.png"];
    secondView = [[UIImageView alloc] initWithImage:image2];

    CGRect newFrame2 = secondView.frame;
    newFrame2.origin.x = 350;//CGRectGetWidth(firstView.superview.frame)/2;
    newFrame2.origin.y = 10;
    secondView.frame = newFrame2;

    //Add all Views offscreen except #1
    [self.scrollView addSubview:firstView]; //added ONSCREEN
    [self.scrollView addSubview:secondView]; //added OFFSCREEN
} 
```

这会将屏幕上的 firstView 和右侧的 secondView 设置为关闭。

手势识别器也在 viewDidLoad 中设置。他们调用 swipeNext，如下所示：

```
-(void)swipeNext:(id)sender{
//0 Get the currentview as referenced by pageControl
oldView = [views objectAtIndex:currentViewIndex];
//MOVE ON TO NEW VIEW
currentViewIndex ++;
newView = [views objectAtIndex:currentViewIndex];

//1 Animate out the old view **(Aaron, youre right, dont need this anymore)**
//newView.frame = oldView.frame;
//newView.center = CGPointMake(oldView.center.x + CGRectGetWidth(oldView.frame), oldView.center.y);
//[oldView.superview addSubview: newView];

[UIView animateWithDuration:1.0
                      delay: 0.0
                    options: UIViewAnimationOptionCurveEaseIn 
                 animations:^{
                     newView.center = oldView.center;
                     oldView.center = CGPointMake(oldView.center.x - CGRectGetWidth(oldView.frame), oldView.center.y);

                 }
                 completion:nil]; 
```

我注释掉了 addSubview 因为我把它移到了 createUIViews 方法。它的工作原理是一样的，我认为这只是速度问题或我缺少的一些动画功能。我希望我可以添加一个视频。原始的 DD 应用程序看起来像 UIPageControl 一样可以更快地制作动画（我认为）这是一个视频链接。[缓慢的 iOS UIView 动画](http://www.youtube.com/watch?v=SwwRgR5lYeM)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T05:43:47.610

在启动同一视图的动画的同一轮事件循环期间将视图添加到视图层次结构是导致性能不佳和其他奇怪动画故障的秘诀。在您的代码中，您知道在调用 swipeNext 之前 newView 将是什么。是`[views objectAtIndex:currentViewIndex + 1]`。我建议您在当前视图完成动画就位后，将 newView（以及之前的视图）添加到视图层次结构中。例如，在视图层次结构中放置“nextView”和“previousView”的代码可以放在动画的完成块中。提前将 nextView 和 previousView 放入视图层次结构中，但不在屏幕上。然后在 swipeToNext 中，您可以只为中心设置动画，并避免在动画完成之前修改视图层次结构。

# jquery - 在文档准备好之前运行 jquery

> ID：15423869
> 
> 赞同：0
> 
> 时间：2013-03-15T02:50:47.203
> 
> 标签：jquery

我有以下脚本：

```
$(document).ready(function() {

$('*:lang(English)').hide();
$('*:lang(French)').hide();
}); 
```

我需要的是最初隐藏属性 lang="English" 或 lang="French" 的每个元素。

但现在当我加载我的网站时，它会出现故障。因为 html 在 $(document).ready 变得“就绪”之前开始呈现。因此，所有具有上述指定属性的元素都会在瞬间显示。

有没有办法`*:lang(English)`在文件准备好之前在每个文件上放置一个处理程序，这样我就不会再看到故障了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:56:28.773

您可能应该删除 jQuery 并使用 CSS 执行此操作：

```
*:lang(en), *:lang(fr) {
    display: none;
} 
```

然后，如果您只想显示一种语言，例如，*使用*jQuery 来实现。

```
$(document).ready(function() {
    $('*:lang(fr)').show();
}); 
```

# jquery - 单击 div 时查找下一个表

> ID：15423870
> 
> 赞同：1
> 
> 时间：2013-03-15T02:51:00.783
> 
> 标签：jquery, html-table, next

我需要从下一个表中获取 id 或类，例如，当我单击蓝色方块中的任何 div 时，从红色方块的表中获取 id 或类。

如果我使用这个：

```
$('div').click(function() {
    console.log($(this).next().find('table').attr('id));
}); 
```

但不起作用！ ![在此处输入图像描述](../Images/65bbef6797dd173f49ed582fee98c807.png)

**代码**

```
<div id="statusServ">
    Status ::
    <div id="todosTicket" class="colorstatus">Todos</div>
    <div id="pendiente" class="colorpendiente colorstatus">Pendiente</div>
    <div id="atencion" class="coloratencion  colorstatus">En Atención</div>
    <div id="concluido" class="colorconcluido colorstatus">Concluido</div>
    <div id="cerrado" class="colorcerrado colorstatus">Cerrado</div> | Acciones ::
</div>
<i>Para visualizar los detalles del ticket, presione sobre la fila deseada.</i>
<table cellspacing="1" id="rBuscarServicio" class="tableResultsSearch tSeguimiento" name="rBuscarServicio">
    <thead>
        <tr>
            <th>#TKMA</th>
            <th>CLIENTE</th>
            <th>EMPRESA</th>
            <th>ING. ASIGNADO</th>
            <th>FECHA CREACIÓN</th>
            <th>OBSERVACIONES</th>
            <th style="display:none;">STATUS</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:57:37.310

`next()`只会将您带到下一个兄弟姐妹，在这种情况下是下一个 blue `<div/>`。

您必须上树到`<div/>`与`<div/>`包含`<table/>`.

在您的示例中，以下内容应该有效。

## [小提琴](http://jsfiddle.net/AaronBlenkush/z3src/)

```
$('#statusServ').children().click(function(){
    console.log(
        $(this)             // div that was clicked
            .parent().parent()       // #statusServ
            .find('table')         // #rBuscarServicio_wrapper
            .prop('id')     // 'rBuscarServicio'
    );
}); 
```

**笔记：**

通常最好使用[prop()](http://api.jquery.com/prop/)而不是 attr()

[`prop()`对比`attr()`](https://stackoverflow.com/questions/5874652/prop-vs-attr)))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:09:46.620

```
$('div.colorstatus').click(function() {
  console.log($(this).closest('div.buscar').find('table').attr('id'));
}); 
```

编辑（在帖子底部提供的 HTML 的替代方案）：

```
$('div.colorstatus').click(function() {
  console.log($(this).parent('div').siblings('table').attr('id'));
}); 
```

# php - 一种使用 DOM 从外部 javascript 文件访问 php 会话数据的方法

> ID：15423876
> 
> 赞同：0
> 
> 时间：2013-03-15T02:51:54.050
> 
> 标签：php, javascript, ajax, xhtml

我正在创建一个模拟微博网站的基本 Web 应用程序。

当用户登录时，MySql 查询结果中的一些帐户信息存储在 session 变量中，以启用对用户的跟踪。所以 userID、userName、userEmail 等。

在用户点击提交的创建帖子页面上，一个外部链接的 javascript 文件开始工作，它有自己的事件处理程序，其余部分使用 AJAX，然后将结果输出到当前的“创建帖子网页”。

显然，在创建帖子时，我需要存储用户 ID，但我似乎无法将其传递给 AJAX。

我正在考虑的解决方案是创建一个隐藏输入字段，并将用户 ID（数字）放在占位符中，然后在 JS 文件中使用 DOM 并调用 doc.getelementby 来找出用户 ID 是什么，我可以为帖子标题和帖子内容做到这一点，但显然希望隐藏用户 ID，所以有没有办法可以在创建帖子页面上对用户隐藏它（它目前是一个 php 会话变量）和将它传递给 Ajax 函数来创建帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:21:48.767

也许您的 AJAX 脚本可以调用一个后端 PHP 文件，该文件通过 $_SESSION['userName']、$_SESSION['userEmail'] 等访问会话变量并执行您需要它做的任何事情（例如，代表用户）。

换句话说，PHP 作用于当前登录的用户（由用户无法访问的会话变量标识），并且 JavaScript 根据您发回给它的任何响应更新 UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:44:59.563

您可以使用隐藏的输入来完成您的想法，只需在隐藏字段中散列用户 ID。您可以通过 PHP 在服务器端对其进行散列，甚至在保存到数据库之前通过 PHP 发布散列值和解密。使用 jQuery，您可以通过以下方式获取隐藏字段的值：

```
val userID = $('#userID').val(); 
```

工作量比老式`document.getElementById`方法略少。

# wordpress - 在页面中上传 Wordpress 自定义文件

> ID：15423879
> 
> 赞同：3
> 
> 时间：2013-03-15T02:52:09.987
> 
> 标签：wordpress

我目前正在使用此代码进行 PHP 文件上传（直接在 wordpress 页面上找到）：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
Please choose a file: <input name="uploaded" type="file" /><br />
<input type="submit" value="Upload" />
</form> 
```

上传.php

```
 $allowedExts = array("jpg", "jpeg", "gif", "png");
    $extension = end(explode(".", $_FILES["file"]["name"]));
    if ((($_FILES["file"]["type"] == "image/gif")
         || ($_FILES["file"]["type"] == "image/jpeg")
         || ($_FILES["file"]["type"] == "image/png")
         || ($_FILES["file"]["type"] == "image/pjpeg"))
        && ($_FILES["file"]["size"] < 20000)
        && in_array($extension, $allowedExts))
    {
        if ($_FILES["file"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
        }
        else
        {
            echo "Upload: " . $_FILES["file"]["name"] . "<br>";
            echo "Type: " . $_FILES["file"]["type"] . "<br>";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

            if (file_exists("upload/" . $_FILES["file"]["name"]))
            {
                echo $_FILES["file"]["name"] . " already exists. ";
            }
            else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                                   "upload/" . $_FILES["file"]["name"]);
                echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
            }
        }
    }
    else
    {
        echo "Invalid file";
    } 
```

即使我知道 100% 它应该可以工作，它也总是返回“无效文件”。

我一直在网上四处寻找，我认为 WP 不能做 enctype="multipart/form-data" 所以这就是它不起作用的原因。

有没有人有解决方法或知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-23T18:26:19.950

我知道这篇文章有点旧，但希望能对其他人有所帮助。

我正在做一些非常相似的事情（自定义上传以显示在自定义页面上）并且还使用与`objectiveccoder001`. 我不断收到“无效文件”。和写权限错误。我最终选择了这个：

```
if ( ! function_exists( 'wp_handle_upload' ) ) require_once( ABSPATH . 'wp-admin/includes/file.php' );
$uploadedfile = $_FILES['file'];
$upload_overrides = array( 'test_form' => false );
$movefile = wp_handle_upload( $uploadedfile, $upload_overrides );
if ( $movefile ) {
    echo "File is valid, and was successfully uploaded.\n";
    //var_dump( $movefile);
} else {
    echo "Possible file upload attack!\n";
} 
```

如果您不希望使用 Wordpress 的媒体上传器并且只需要简单的文件上传，则效果很好。它仍然使用内置上传器等过时的文件结构上传它。然后你可以只使用`$movefile`数组来获取文件的数据。

参考：[http ://codex.wordpress.org/Function_Reference/wp_handle_upload](http://codex.wordpress.org/Function_Reference/wp_handle_upload)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-19T09:30:34.447

您可以使用此代码使用 wordpress 默认媒体文件上传器，只需在 jquery 中检索图像链接

```
<label for="upload_image">
        <input id="upload_image" type="text" size="36" name="ad_image" value="http://" /> 
        <input id="upload_image_button" class="button" type="button" value="Upload Image" />
        <br />Enter a URL or upload an image
    </label>

<?php
add_action('admin_enqueue_scripts', 'my_admin_scripts');

function my_admin_scripts() {
    if (isset($_GET['page']) && $_GET['page'] == 'my_plugin_page') {
        wp_enqueue_media();
        wp_register_script('my-admin-js', WP_PLUGIN_URL.'/my-plugin/my-admin.js', array('jquery'));
        wp_enqueue_script('my-admin-js');
    }
}

?>

<script>
    jQuery(document).ready(function($){

    var custom_uploader;

    $('#upload_image_button').click(function(e) {

        e.preventDefault();

        //If the uploader object has already been created, reopen the dialog
        if (custom_uploader) {
            custom_uploader.open();
            return;
        }

        //Extend the wp.media object
        custom_uploader = wp.media.frames.file_frame = wp.media({
            title: 'Choose Image',
            button: {
                text: 'Choose Image'
            },
            multiple: true
        });

        //When a file is selected, grab the URL and set it as the text field's value
        custom_uploader.on('select', function() {
            console.log(custom_uploader.state().get('selection').toJSON());
            attachment = custom_uploader.state().get('selection').first().toJSON();
            $('#upload_image').val(attachment.url);
        });

        //Open the uploader dialog
        custom_uploader.open();

    });

});
    </script> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-26T10:18:00.900

在新版本的 WordPress 中上传文件非常容易。只需一行代码：

```
$uploaded_file = wp_upload_bits( $_FILES['file']['name'], null, @file_get_contents( $_FILES['file']['tmp_name'] ) ); 
```

**$uploaded_file**是一个数组，它将返回所有信息，包括 url、文件类型等

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-01-17T15:34:15.903

**如何在 WORDPRESS 中将文件上传到自定义目录**

*此示例上传**wp-content/uploads/customDirectory**文件夹中的 PDF 文档*

```
<form action="" method="post" enctype="multipart/form-data">
<input type="file" name="fileToUpload" id="fileToUpload">
<input type="submit" value="Upload Image" name="submittheform">
</form>

global $wp_filesystem;
WP_Filesystem();

$content_directory = $wp_filesystem->wp_content_dir() . 'uploads/';
$wp_filesystem->mkdir( $content_directory . 'CustomDirectory' );

$target_dir_location = $content_directory . 'CustomDirectory/';

if(isset($_POST["submittheform"]) && isset($_FILES['fileToUpload'])) {

    $name_file = $_FILES['fileToUpload']['name'];
    $tmp_name = $_FILES['fileToUpload']['tmp_name'];

    if( move_uploaded_file( $tmp_name, $target_dir_location.$name_file ) ) {
        echo "File was successfully uploaded";
    } else {
        echo "The file was not uploaded";
    }

} 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2013-03-15T04:17:48.753

为什么不使用 WordPress 内置上传器来上传您的文件？
这是一个关于如何实现~~[WordPress Uploader的快速教程](http://webomnizz.com/blog/php/how-to-use-wordpress-uploader-into-your-theme/)~~

[WordPress 上传器](http://webomnizz.com/how-to-use-wordpress-uploader-into-your-theme/)

# sql - 列出从多个表中获取的相关搜索数据

> ID：15423881
> 
> 赞同：0
> 
> 时间：2013-03-15T02:52:25.113
> 
> 标签：sql

尝试将一些表连接在一起以查找某些预订组时遇到了一些问题。这是我创建的表：

```
create table Hotel  (
HNo char(4),
Name varchar(20)   not null,
Address varchar(50),
Constraint PK_Hotel Primary Key (HNo))
)

create table Room  (
RNo char(4),
HNo char(4),
Type char(6) not null,
Price decimal (7,2),
Constraint PK_Room Primary Key (HNo, RNo),
Constraint FK_Room Foreign Key (HNo)
references Hotel (HNo)
)

create table Guest  (
GNo char(4),
Name varchar(20) not null,
Address varchar(50),
Constraint PK_Guest Primary Key (GNo)

)

create table Booking   (
HNo char(4),
GNo char(4),
DateFrom date,
DateTo date,
RNo char(4),
Constraint PK_Booking Primary Key (HNo, GNo, DateFrom),
Constraint FK_Booking Foreign Key (GNo)
references Guest (GNo),
Constraint FK_Booking_room Foreign Key (HNo, RNo)
references Room (HNo, RNo),
Constraint FK_Booking_hotel Foreign Key (HNo)
references Hotel (HNo)
) 
```

我需要做的是列出房间号（RNo），酒店号（HNo）和所有类型为“家庭”的房间类型的价格，在酒店号升序中按价格降序排列。

我对如何加入表来执行此操作然后对查询的顺序进行排序有点困惑。任何启示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T02:56:57.430

这是你要找的吗？

```
SELECT R.RNo, H.HNo, R.Price
FROM Room R
   INNER JOIN Hotel H ON R.HNo = H.HNo 
WHERE R.Type='family'
ORDER BY R.Price DESC, H.Name ASC 
```

它使用 将 Room 表连接到 Hotel 表`INNER JOIN`，然后`ORDER BY`在 Room Price DESC 和 Hotel Name ASC 上应用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T02:56:51.490

```
SELECT  a.HNO, a.Name,
        b.RNo, b.Type, b.Price
FROM    Hotel a
        INNER JOIN Room b
            ON a.HNo = b.HNo
WHERE   b.Type = 'family'
ORDER   BY b.Price DESC, a.HNo 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# powershell - 在 PowerShell 中使用数组删除文件夹？

> ID：15423884
> 
> 赞同：1
> 
> 时间：2013-03-15T02:53:13.040
> 
> 标签：powershell, powershell-2.0, nuget, nuget-package

我是 PowerShell 的新手，并试图习惯奇怪的语法。我正在尝试删除一组文件夹路径。这就是我在 C# 中的做法：

```
string[] folders = { '~/MyFolder/Test123', '~/MyFolder/Test987', '~/MyFolder/Test333' };
foreach (string item in folders) {
  $_.Remove()
} 
```

我将如何在 PowerShell 中完成此任务？我找到了下面的脚本，但我不确定如何更改为使用预定义的数组。包含的参数实际上来自 NuGet：

```
param($installPath, $toolsPath, $package, $project)

$DTE.Solution.Projects|Select-Object -Expand ProjectItems|Where-Object{$_.Name -eq 'Controllers'}|ForEach-Object{$_.Remove()} 
```

我如何将一个字符串数组合并到这个而不是硬编码的“控制器”名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:32:53.857

有很多方法可以做到这一点，但这个很简单......

```
$folders = @("~/MyFolder/Test123", "~/MyFolder/Test987", "~/MyFolder/Test333")
$folders | Remove-Item 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:38:05.590

这是将字符串数组应用于该过滤器的一种方法：

```
$ProjectItems = 'Controllers','Robots','Weapons','Bacon'

$DTE.Solution.Projects|
Select-Object -Expand ProjectItems|
Where-Object{$ProjectItems -contains $_.Name}|
ForEach-Object{$_.Remove()} 
```

# sql - 如何在 SQL 中查看表的创建日期？

> ID：15423889
> 
> 赞同：0
> 
> 时间：2013-03-15T02:53:58.213
> 
> 标签：sql, oracle

问题是：

`DW1_ tables`来自`USER_OBJECTS`ISO 标准中的表名、创建日期和时间的列表。

这就是我到目前为止所拥有的，但它不起作用。

```
select table_name, to_char(create_date, 'yyyy-mm-dd') from all_tables 
where table_name like 'DW1%'
group by table_name; 
```

它说 create_date 是无效的标识符。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T03:09:15.210

这是你要找的吗？

```
select object_name, created 
from user_objects 
where object_name LIKE 'DW1%' 
    and object_type = 'TABLE'; 
```

[SQL 小提琴演示](http://sqlfiddle.com/#!4/8c9a3/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:45:11.597

```
select object_name, to_char(created, 'yyyy-mm-dd') AS created -- 'AS' is optional
  from user_objects 
 where object_name like 'EMP%' -- replace with your table
/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:07:56.990

尝试这个

```
SELECT object_name tablename, created FROM dba_objects
WHERE object_name like 'DW1%'
and object_type = 'TABLE' 
```

# sql-server - 远程连接到 SQL Server 2008 Express 时出错

> ID：15423892
> 
> 赞同：0
> 
> 时间：2013-03-15T02:54:12.917
> 
> 标签：sql-server, sql-server-2008-express

我的程序无法远程连接到 SQL Server 2008 Express，连接字符串是

```
Data Source=192.168.0.100\sqlexpress;Initial Catalog=xxx;
Persist Security Info=True;User ID=sa;Password=xxxx 
```

我检查了所有配置，启用了 RemoteConnection，启用了 TCP/IP，防火墙关闭，端口设置为 1433。我检查了`telnet 192.168.0.100,1433`，似乎连接成功。

但是当我`netstat -an`在服务器上检查时，只有`0,0,0,0:1433`，没有`192.168.0.100:1433`，也许它有问题。

我怎么解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T14:56:57.817

创建一个 udl 文件，如果它连接，那么问题出在应用程序上，如果它没有连接，那么它是你的防火墙、连接 sting、连接库等。这里重要的可能是连接字符串。执行以下操作：创建一个空文本文件并将其重命名为“myconnection.udl”。现在双击该文件，它将启动一个小程序。您可以配置与数据库的连接并对其进行测试。现在在记事本中打开 udl 文件，您将看到正确的连接字符串。将连接字符串复制到您的应用连接设置。UDL 文件通常被误解。它们只是一个保存连接设置的文本文件。然后他们调用连接 dll。如果 udl 文件有效，那么您有一个正确的连接字符串 100%

# jax-ws - Apache CXF Web 服务作为 Tapestry5 模块，用于与 .Net 客户端集成

> ID：15423896
> 
> 赞同：0
> 
> 时间：2013-03-15T02:54:52.907
> 
> 标签：jax-ws, cxf, tapestry

**环境：**

*   **Servlet 容器：** Apache Tomcat 7
*   **Java web\IoC 框架：** Apache Tapestry 5.3.6
*   **Web服务框架：** Apache CXF 2.7.3

**要求**

我需要为`.Net`客户（即`C#`）提供网络服务。这个 Web 服务应该能够利用`Tapestry`IoC 框架，以便能够使用它的 Registry 来自动初始化`Tapestry`配置的服务（即 Utility 服务）

**目前的进展**

我很陌生，`jax-ws`但是在阅读了一些`Apache CXF`文档之后，我试图模仿以下[示例](http://svn.apache.org/repos/asf/cxf/trunk/distribution/src/main/release/samples/java_first_jaxws/)。于是我开发了一个没有界面的简单服务，成功执行了如下命令：

```
java2ws -wsdl -server -verbose -o IpkWS.wsdl -databinding aegis -portname IxAccess -address http://localhost:8080/ipk-ws -servicename IpkWS -frontend jaxws -soap12 -s ws_build -d ws_resources com.sc.ipk.ws.services.Calculator 
```

其中创建了一个`wsdl`文件和`Endpoint`类。根据上面链接的示例，我仍然需要`CXFServlet`在我的`web.xml`文件中定义。并且仍然必须创建`cxf-servlet.xml`文件。

**问题**

1.  我知道如何编写一个`Tapestry`模块，但我应该如何使用 web-services 呢？
    *   是否可以在`CXFServlet`不将其永久保存在我的网络应用程序`web.xml`文件中的情况下进行配置？我应该可以不包含`CXFServlet`在我的`web.xml`文件中，因为我很可能不会为其他客户端部署此模块。
    *   我的网络服务运行所需的最低限度`Apache CXF`/库是什么？`JAX-WS``Apache Tomcat 7`
2.  我**需要**文件`cxf-servlet.xml`吗？它有什么用？
3.  是否有任何必要的配置使`.Net`客户端能够使用我的服务？如果是，这会影响\阻止其他客户端平台正确使用我的网络服务吗？
4.  `Endpoint`服务创建的类有什么目的`java2ws`？它是`main`由执行的方法`CXFServlet`吗？
5.  我必须返回一个复杂的对象集合是什么，对客户`Java`来说应该可以吗？`.Net`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T11:00:33.290

这可能有点离题，但 Tynamo 的团队在 Tapetry 中的 Jax-RS 集成方面做得很好：[http](http://docs.codehaus.org/display/TYNAMO/tapestry-resteasy+guide) : //docs.codehaus.org/display/TYNAMO/tapestry-resteasy+guide一个WSDL，它可以帮助你。

如果你肯定想使用 Jax-WS，这里有一些“想法”：[http ://tapestry.1045711.n5.nabble.com/Web-services-using-Tapestry-td4974432.html](http://tapestry.1045711.n5.nabble.com/Web-services-using-Tapestry-td4974432.html)

# mysql - insert into .. select from in stored proc errors out on dropped column

> ID：15423897
> 
> 赞同：0
> 
> 时间：2013-03-15T02:54:54.527
> 
> 标签：mysql, sql, stored-procedures

MySQL 版本 5.5.27

UPDATE2：很确定这是一个大问题，从头开始进行了相同行为的测试。在 MySQL 站点上打开错误并将更新结果。

更新：如果我从存储过程中的临时表中删除列，它工作正常。仅当我手动删除列时才会出现问题。

以下行在存储过程中失败，并出现错误：

```
mysql> insert into player_record_week select * from pr_temp;

mysql> call insert_agg_week('2013-02-26');
ERROR 1054 (42S22): Unknown column 'prod_gamestats.pr_temp.total_battles' in 'field list' 
```

如果我手动运行它，它可以工作。

```
mysql>  insert into player_record_week select * from pr_temp;
Query OK, 211708 rows affected (2.23 sec)
Records: 211708  Duplicates: 0  Warnings: 0 
```

如果我将 total_battles 列保留在临时表中，则会失败，并出现有关列计数不匹配的错误。表 pr_temp 是通过复制 player_record_week 表创建的。

```
| insert_agg_week |          | CREATE PROCEDURE     `insert_agg_week`(insert_week date)
begin
delete from player_record_week where stat_week = insert_week;
delete from player_tank_record_week where stat_week = insert_week;
delete from player_ratings_week_agg where stat_week = insert_week;
delete from player_ratings_week_per where stat_week = insert_week;
delete from global_week where stat_week = insert_week;
delete from global_tank_week where stat_week = insert_week;
insert into player_record_week select * from pr_temp;
insert into player_tank_record_week select * from ptr_temp;
insert into player_ratings_week_agg select * from pratings_temp_agg;
insert into player_ratings_week_per select * from pratings_temp_per;
insert into global_week select * from global_week_temp;
insert into global_tank_week select * from global_tank_week_temp;
end | utf8                 | utf8_general_ci      | latin1_swedish_ci  | 
```

如果我保留额外的列，则存储过程将因列数不匹配而出错。

如果我删除额外的列，存储过程会因引用我删除的列而出错：

```
mysql> call insert_agg_week('2013-02-26');
ERROR 1054 (42S22): Unknown column 'prod_gamestats.pr_temp.total_battles' in 'field list' 
```

如果我手动运行命令，它运行没有问题：

```
mysql> delete from player_record_week where stat_week = '2013-02-26';
Query OK, 0 rows affected (0.00 sec)

mysql> delete from player_tank_record_week where stat_week = '2013-02-26';
Query OK, 0 rows affected (0.00 sec)

mysql> delete from player_ratings_week_agg where stat_week = '2013-02-26';
Query OK, 0 rows affected (0.52 sec)

mysql> delete from player_ratings_week_per where stat_week = '2013-02-26';
Query OK, 0 rows affected (0.09 sec)

mysql> delete from global_week where stat_week = '2013-02-26';
Query OK, 0 rows affected (0.00 sec)

mysql> delete from global_tank_week where stat_week = '2013-02-26';
Query OK, 0 rows affected (0.00 sec)

mysql>  insert into player_record_week select * from pr_temp;
Query OK, 211708 rows affected (2.23 sec)
Records: 211708  Duplicates: 0  Warnings: 0

mysql>  insert into player_tank_record_week select * from ptr_temp;
Query OK, 1618240 rows affected (25.61 sec)
Records: 1618240  Duplicates: 0  Warnings: 0

mysql>  insert into player_ratings_week_agg select * from pratings_temp_agg;
Query OK, 211708 rows affected (1.86 sec)
Records: 211708  Duplicates: 0  Warnings: 0

mysql>  insert into player_ratings_week_per select * from pratings_temp_per;
Query OK, 41648 rows affected (0.39 sec)
Records: 41648  Duplicates: 0  Warnings: 0

mysql>  insert into global_week select * from global_week_temp;
Query OK, 21 rows affected (0.00 sec)
Records: 21  Duplicates: 0  Warnings: 0

mysql>  insert into global_tank_week select * from global_tank_week_temp;
Query OK, 257 rows affected (0.00 sec)
Records: 257  Duplicates: 0  Warnings: 0 
```

下面是两张表：

```
mysql> describe pr_temp;
+------------------------+-----------------------+------+-----+---------+-------+
| Field                  | Type                  | Null | Key | Default | Extra |
+------------------------+-----------------------+------+-----+---------+-------+
| player_id              | int(10) unsigned      | NO   | PRI | NULL    |       |
| stat_week              | date                  | NO   | PRI | NULL    |       |
| insert_date            | date                  | NO   |     | NULL    |       |
| tier_weight            | float                 | YES  |     | 0       |       |
| tier_weight_adj        | float                 | YES  |     | 0       |       |
| battles_count          | int(10) unsigned      | YES  |     | NULL    |       |
| wins                   | mediumint(8) unsigned | YES  |     | NULL    |       |
| losses                 | mediumint(8) unsigned | YES  |     | NULL    |       |
| survived_battles       | mediumint(8) unsigned | YES  |     | NULL    |       |
| spotted                | mediumint(8) unsigned | YES  |     | NULL    |       |
| hits_percents          | tinyint(3) unsigned   | YES  |     | NULL    |       |
| capture_points         | mediumint(8) unsigned | YES  |     | NULL    |       |
| damage_dealt           | int(10) unsigned      | YES  |     | NULL    |       |
| frags                  | mediumint(8) unsigned | YES  |     | NULL    |       |
| dropped_capture_points | mediumint(8) unsigned | YES  |     | NULL    |       |
| max_xp                 | smallint(5) unsigned  | YES  |     | NULL    |       |
| battle_avg_xp          | smallint(5) unsigned  | YES  |     | NULL    |       |
| xp                     | int(10) unsigned      | YES  |     | NULL    |       |
| integrated_rating      | smallint(5) unsigned  | YES  |     | NULL    |       |
| efficiency             | smallint(6)           | YES  |     | NULL    |       |
| efficiency_adj         | smallint(6)           | YES  |     | NULL    |       |
| wn7                    | smallint(6)           | YES  |     | NULL    |       |
| wn7_adj                | smallint(6)           | YES  |     | NULL    |       |
+------------------------+-----------------------+------+-----+---------+-------+
23 rows in set (0.00 sec)

mysql> describe player_record_week;
+------------------------+-----------------------+------+-----+---------+-------+
| Field                  | Type                  | Null | Key | Default | Extra |
+------------------------+-----------------------+------+-----+---------+-------+
| player_id              | int(10) unsigned      | NO   | PRI | NULL    |       |
| stat_week              | date                  | NO   | PRI | NULL    |       |
| insert_date            | date                  | NO   |     | NULL    |       |
| tier_weight            | float                 | YES  |     | 0       |       |
| tier_weight_adj        | float                 | YES  |     | 0       |       |
| battles_count          | int(10) unsigned      | YES  |     | NULL    |       |
| wins                   | mediumint(8) unsigned | YES  |     | NULL    |       |
| losses                 | mediumint(8) unsigned | YES  |     | NULL    |       |
| survived_battles       | mediumint(8) unsigned | YES  |     | NULL    |       |
| spotted                | mediumint(8) unsigned | YES  |     | NULL    |       |
| hits_percents          | tinyint(3) unsigned   | YES  |     | NULL    |       |
| capture_points         | mediumint(8) unsigned | YES  |     | NULL    |       |
| damage_dealt           | int(10) unsigned      | YES  |     | NULL    |       |
| frags                  | mediumint(8) unsigned | YES  |     | NULL    |       |
| dropped_capture_points | mediumint(8) unsigned | YES  |     | NULL    |       |
| max_xp                 | smallint(5) unsigned  | YES  |     | NULL    |       |
| battle_avg_xp          | smallint(5) unsigned  | YES  |     | NULL    |       |
| xp                     | int(10) unsigned      | YES  |     | NULL    |       | 
| integrated_rating      | smallint(5) unsigned  | YES  |     | NULL    |       |
| efficiency             | smallint(6)           | YES  |     | NULL    |       |
| efficiency_adj         | smallint(6)           | YES  |     | NULL    |       |
| wn7                    | smallint(6)           | YES  |     | NULL    |       |
| wn7_adj                | smallint(6)           | YES  |     | NULL    |       |
+------------------------+-----------------------+------+-----+---------+-------+
23 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:57:45.783

MySQL 中的错误，在 5.6.6 中修复；初始过程运行后元数据不会更新。

[http://bugs.mysql.com/bug.php?id=32868](http://bugs.mysql.com/bug.php?id=32868)

错误报告中的解决方法是刷新缓存：CREATE OR REPLACE VIEW `tmpview`AS SELECT 1;

# sql - 更新/编辑数据库时遇到问题

> ID：15423898
> 
> 赞同：1
> 
> 时间：2013-03-15T02:54:56.827
> 
> 标签：sql, vb.net, visual-studio-2010, exception, vb.net-2010

我想创建一个可以注册人员信息的应用程序。但我在更新/编辑网格视图中的数据时遇到问题。下面是我创建的一组代码。

```
Imports System.Data.SqlClient
Public Class Form1
Dim connectionString As String
Dim cnn As SqlConnection
Dim cmd As SqlCommand
Dim sql As String 
```

下面是我的 ADD 语句，它工作得很好

```
Private Sub btnADD_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnADD.Click

    connectionString = "Data Source=XXXX;Initial Catalog=XXXX;User ID=XXXX;Password=XXXX"
    cnn = New SqlConnection(connectionString)
    Try
        cnn.Open()
        cmd = New SqlCommand("INSERT INTO tbl_info (ID,Name) VALUES (@ID,@Name)")
        cmd.Connection = cnn
        With cmd.Parameters
            .AddWithValue("ID", txtID.Text)
            .AddWithValue("Name", txtName.Text)
        End With
        cmd.ExecuteNonQuery()
        MsgBox("has been inserted successfully")

    Catch ex As Exception
        MsgBox(ex.Message())
    End Try

    txtID.Clear()
    txtName.Clear()
End Sub 
```

下面是 gridview 女巫链接到我的数据库

```
 Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    'TODO: This line of code loads data into the 'TestDataSet.tbl_info' table. You can move, or remove it, as needed.
    Me.Tbl_infoTableAdapter.Fill(Me.TestDataSet.tbl_info)

End Sub 
```

以下是我的更新声明女巫我很难弄清楚出了什么问题。

```
 Private Sub btnEdit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEdit.Click
    cnn = New SqlConnection(connectionString)
    If Not cnn.State = ConnectionState.Open Then
        cnn.Open()
    End If

    Try
        cmd = New SqlCommand("Update tble_info set Name = @Name Where ID = @ID)")
        cmd.Connection = cnn
        With cmd.Parameters
            .AddWithValue("Name", txtName.Text)
            .AddWithValue("ID", txtID.Text)
        End With
        cmd.ExecuteNonQuery()
        MsgBox("has been update successfully")
    Catch ex As Exception
        MsgBox(ex.Message())
    End Try
   End Sub
End Class 
```

这是我执行程序时遇到的错误

```
InvalidOperationExeption was unhadled
The connectionString property has not been initialize 
```

它指向 cnn.open()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:26:06.513

我不确定到底出了什么问题，我只能想象当您尝试使用它时`connectionStringI`会以某种方式`Null`出现这种情况，但我认为每次使用完后关闭连接是一种很好的做法。

因此，当您获取数据而不是像现在这样保持连接打开时，请执行以下操作

```
With New SqlConnection(connectionString)
    Try
        .Open()
        ' Do Stuff
    Catch
        ' Handle your exception
    Finally
         .Close()
    End Try
End With 
```

这样，您的连接将始终关闭，您不必担心检查它是否已经打开。

更新

我冒昧地按照我的方式重写了你的代码。你能试试这个，看看它是否适合你/

您连接字符串属性：

```
Private ReadOnly Property connectionString As String
    Get
        Return "Data Source=XXXX;Initial Catalog=XXXX;User ID=XXXX;Password=XXXX"
    End Get
End Property 
```

插入数据的子：

```
Private Sub btnADD_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnADD.Click

    Dim transaction As SqlTransaction = Nothing

    With New SqlConnection(connectionString)
        Try
            Call .Open()
            transaction = .BeginTransaction()
            With .CreateCommand()
                .Transaction = transaction
                .CommandText = "INSERT INTO [tbl_info] ([ID], [Name]) VALUES (@ID,@Name);"
                With .Parameters
                    .AddWithValue("ID", txtID.Text)
                    .AddWithValue("Name", txtName.Text)
                End With
                Call .ExecuteNonQuery()
                Call transaction.Commit()
                Call MessageBox.Show("has been inserted successfully")
            End With
        Catch ex As Exception
            Call transaction.Rollback()
            Call MessageBox.Show(ex.Message, "Error")
        Finally
            Call .Close()
        End Try
    End With

    Call txtID.Clear()
    Call txtName.Clear()

End Sub 
```

更新数据的子：

```
Private Sub btnEdit_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnEdit.Click

    Dim transaction As SqlTransaction = Nothing

    With New SqlConnection(connectionString)
        Try
            Call .Open()
            transaction = .BeginTransaction()
            With .CreateCommand()
                .Transaction = transaction
                .CommandText = "UPDATE [tble_info] SET [Name]=@Name WHERE [ID]=@ID;"
                With .Parameters
                    .AddWithValue("Name", txtName.Text)
                    .AddWithValue("ID", txtID.Text)
                End With
                Call .ExecuteNonQuery()
                Call transaction.Commit()
                Call MessageBox.Show("has been update successfully")
            End With
        Catch ex As Exception
            Call transaction.Rollback()
            Call MessageBox.Show(ex.Message, "Error")
        Finally
            Call .Close()
        End Try
    End With

End Sub 
```

如果您将连接字符串设置为（只读）属性，假设它不会更改，那么您在使用它时不必担心它是否具有值。那么您所需要担心的就是确保连接字符串是正确的。

请注意，我尚未测试此代码，但它应该可以按我的想法工作。

# ios - 用户界面设计 TableView Like

> ID：15423904
> 
> 赞同：0
> 
> 时间：2013-03-15T02:55:41.380
> 
> 标签：ios, uibutton, uilabel, tableview, tableviewcell

我最近正在研究这个项目，如下所示。

![在此处输入图像描述](../Images/0d778c88a16e3f0b95ade72f9aeaa0b6.png)

我正在考虑使用 TableView 或使用 UIButton/UILabel 或其他一些 UI 元素来创建上面显示的界面。有没有人可以给我一些关于哪种方法是最好的方法的建议，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:11:10.810

`UITabBarController`有个`UINavigationController`

`UINavigationController.view`有个`UITableView`

`UITableViews`细胞是一个`CustomCell`

`CustomCell`您可以添加或`backgroundImage`添加一些子视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:00:07.233

您可以通过自定义 UITableView Cell 来实现。

你可以在这里找到一个很好的[视频教程](http://vivianaranha.com/iphoneipad-tutorial-lesson-15-custom-uitableviewcell/)

# c# - 根据文件名选择数千个文件

> ID：15423906
> 
> 赞同：1
> 
> 时间：2013-03-15T02:55:46.793
> 
> 标签：c#, java, python, windows

我有一个问题，我有一个包含 30k 文件名的文本文件，我需要从包含 100k 其他文件的 windows 文件夹中提取该文件。

这可能是一个非常简单的问题，但是，我在网上广泛搜索并找不到解决方案，也许我使用了错误的术语。

可以使用 Windows 批处理文件、c#、Java、Python 等等...

可能是将文件重命名为 xxfilename 这样的想法，以便我可以按文件名排序？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:20:28.497

使用批处理文件：

```
setlocal
set destination=c:\Temp\Destination

for /f %%f in (index.txt) do (
    copy "%%f" "%destination%"
)

endlocal 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:09:23.260

使用 C#：

```
foreach (var filePath in File.ReadAllLines(indexFile))
{
    if (File.Exists(filePath))
    {
        var destinationPath = Path.Combine(destinationRoot, Path.GetFileName(filePath));
        File.Copy(filePath, destinationPath);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T03:08:49.150

如果文件包含文件名列表，您可以将它们读出并将文件复制到您的目的地。

就像是：

```
string destination = "D:\\";
foreach (var filename in File.ReadAllLines("fileWithFilenames").Where(f => File.Exists(f)))
{
    File.Copy(filename, Path.Combine(destination, Path.GetFileName(filename)));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-15T03:10:37.787

这些方面的事情可能会做......

```
 BufferedReader reader = new BufferedReader(new FileReader("somefile"));
    String line;
    File file;

    File folder = new File("somefolder");
    List<String> files = Arrays.asList(folder.list());

    while((line = reader.readLine()) != null) {
        if(files.contains(line)) {
            file = new File(line);
            // do something with the file
        }
    } 
```

# sharepoint - 将 SharePoint 用户信息传递给 SSRS 报告

> ID：15423910
> 
> 赞同：2
> 
> 时间：2013-03-15T02:56:41.457
> 
> 标签：sharepoint, reporting-services

我们正在为使用集成了 SSRS 的 SharePoint 的客户创建一个外部网站。我们想为我们的客户开发一些报告。不知何故，我们需要从登录的人（用户属性？）中确定 customerid，并将其传递给 SSRS，以便它可以将其传递给存储过程。关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:01:25.090

使用`User!UserID.Value`查询参数的默认值并将其设置为此值。

# c# - 在 Where() 之前调用 OrderBy() 的区别，反之亦然

> ID：15423915
> 
> 赞同：3
> 
> 时间：2013-03-15T02:57:01.770
> 
> 标签：c#, linq, ado.net

我想知道......在我的应用程序中，我正在做这样的事情：

```
var threads = scykDb.Threads
                    .AsQueryable()
                    .Where(condition)
                    .OrderByDescending(t => t.DateCreated)
                    .Skip(threadsToSkip)
                    .Take(threadsPerPage)
                    .Select(t => t)
                    .ToList(); 
```

如果我在 Where() 之前执行 OrderBy() 会发生什么？重要吗，skip() 或 take() 怎么样，这些位置也重要吗？

```
var threads = scykDb.Threads
                    .AsQueryable()
                    .OrderByDescending(t => t.DateCreated)
                    .Where(condition)
                    .Skip(threadsToSkip)
                    .Take(threadsPerPage)
                    .Select(t => t)
                    .ToList(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T02:59:42.260

如果您的查询实际上是通过 Entity Framework、Linq-to-SQL 或其他此类提供程序针对数据库进行的，则示例中的调用顺序无关紧要。

如果这是针对内存中的集合发生的，则您在过滤之前进行排序，这比首先应用过滤器不太理想。例如，您正在订购可能只是丢弃的元素。（排序涉及相对大量的工作。过滤*首先*减少了这项工作。）

也就是说，即使反对数据库，我也会支持第二种形式，因为相同的代码对于内存查询*同样*有效，因此请养成以通常理想的方式编写代码的习惯。也有争议的是，您*希望*在订购之前看到过滤作为一个思考过程。

# flash - 如何逐像素跟踪图像到矢量？

> ID：15423916
> 
> 赞同：0
> 
> 时间：2013-03-15T02:57:03.020
> 
> 标签：flash, bitmap, vector-graphics, adobe-illustrator

我想跟踪按钮图像以在 Flash 中使用矢量。但我使用该`trace bitmap`工具，当像素颜色带有 alpha 时，它会是错误的颜色。

我尝试使用 Illustrator 来做到这一点，但 Illustrator 无法跟踪每个像素，我想在跟踪后，它看起来与缩放 100% 时的位图一样

还有其他工具可以做到这一点吗？

![捕获](../Images/8b802d84a352dfe7984ac8c0c79336ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T02:19:23.390

为此，您可以使用 Adob​​e Illustrator。
只需使用不同的选项进行跟踪。
就在“实时跟踪”，你有下拉菜单，在开始时使用“照片高保真”，如果这不起作用，那么去“跟踪选项”。这肯定会奏效。

# naudio - NAudio 正弦波

> ID：15423917
> 
> 赞同：-1
> 
> 时间：2013-03-15T02:57:03.047
> 
> 标签：naudio

使用博客上的示例，我输出了一个正弦波：

```
public class SineWaveProvider32 : WaveProvider32{

    int sample;

    public SineWaveProvider32()
    {
        Frequency = 1000;
        Amplitude = 0.25f; // let's not hurt our ears            
    }

    public float Frequency { get; set; }
    public float Amplitude { get; set; }

    public override int Read(float[] buffer, int offset, int sampleCount)
    {
        int sampleRate = WaveFormat.SampleRate;
        for (int n = 0; n < sampleCount; n++)
        {
            buffer[n+offset] = (float)(Amplitude * Math.Sin((2 * Math.PI * sample * Frequency) / sampleRate));
            sample++;
            if (sample >= sampleRate) sample = 0;
        }
        return sampleCount;
    }
} 
```

当我播放这个正弦波时，它是一个无限循环。想知道如何输出给定长度的声音？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T08:23:43.463

只要 Read 不返回 0，正弦波就会继续播放。Read 返回写入缓冲区的样本数（只要您还没有完成，就应该始终与 sampleCount 相同）。因此，请保持您退回的样品总数。一旦该数字等于采样率，您就播放了一秒钟的音频。

# android - Android：Activity和Fragments之间的OptionMenu

> ID：15423918
> 
> 赞同：7
> 
> 时间：2013-03-15T02:57:03.290
> 
> 标签：android, menu, android-fragments, optionmenu

在我的应用程序中，我有一个承载两个片段的活动。如果我将 MenuItem 添加到菜单中，我可以在我的片段中检索它吗？Activity 中的 OptionMenu 和他的子片段中的 OptionMenu 之间有什么联系？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T03:11:54.730

您必须使用传递给它的参数调用`setHasOptionsMenu();`，`true`然后您可以覆盖 onCreate 选项菜单。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Enable the option menu for the Fragment
    setHasOptionsMenu(true);
} 
```

如果您想为每个片段设置不同的 optionsMenu，您将定义两个不同的菜单 xml 文件并在`onCreateOptionsMenu`

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);

    inflater.inflate(R.menu.fragment1_menu, menu);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-16T21:38:30.710

我发现我可以`MenuItem`在 Activity中添加`onCreateOptionsMenu()`，然后`Fragment`通过它们的 id 在 s 中检索它们，如下所示：

活动：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
     itemId= 0;
     menu.add(0, itemId, 0, "item");
     return super.onCreateOptionsMenu(menu);
} 
```

分段：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    super.onCreateOptionsMenu(menu, inflater);
    itemId= 0
    MenuItem menuItem= menu.findItem(itemId);                         
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T04:03:23.373

您无法在子片段中捕获活动菜单的事件。相反，您可以让您的片段实现类似[`MenuItem.OnMenuItemClickListener`](http://developer.android.com/reference/android/view/MenuItem.OnMenuItemClickListener.html). 在您的活动[`onOptionsItemSelected(MenuItem item)`](http://developer.android.com/reference/android/app/Activity.html#onOptionsItemSelected%28android.view.MenuItem%29)方法中，您只需调用`YourFragment`. [`onMenuItemClick()`](http://developer.android.com/reference/android/view/MenuItem.OnMenuItemClickListener.html#onMenuItemClick%28android.view.MenuItem%29).

# macos - GLSL texcoords 在使用 OpenGL 3.2/GLSL 1.5 的 OSX 上插值不均匀

> ID：15423920
> 
> 赞同：0
> 
> 时间：2013-03-15T02:57:35.650
> 
> 标签：macos, opengl, glsl

我正在尝试在 OpenGL 3.2/GLSL 1.5 中实现双三次插值着色器。我已经在运行 OSX 10.7 的 2011 15" MBP 和运行 OSX 10.8 的 2013 27" iMac 上尝试过这个，两者都有类似的问题。

我的着色器程序工作得很好......除了当我的窗口处于特定大小时，某些行和/或像素列奇怪地关闭了。您可以查看此屏幕截图以了解我的意思：[http](http://angusforbes.com/texcoord_issue.png) ://angusforbes.com/texcoord_issue.png 。在此图像中，沿 y 轴的 texCoord.x 的值并不总是相同的。

那么，为什么 texcoords 不均匀？也就是说，例如，如果我在 x 轴上沿特定行从 0.0 插值到 1.0，我希望变化的 y 将完全相同。同样，如果沿 y 轴插值，变化的 x 应该是相同的。

但有时他们不是。

这是一些简化（但有效）的示例代码来解释我的意思：

```
#version 150

uniform sampler2D tex0; //some image I'm trying to do bicubic interpolation on
uniform int tWidth; //width of image;
uniform int tHeight; //height of image

in vec2 texCoord; //my interpolated texture coordinates, 0.0->1.0 in each direction                           
out vec4 outputFrag;

void main() {

  float a = fract( texCoord.x * tWidth ); 
  float b = fract( texCoord.y * tHeight );

  outputFrag = vec4( a, b, 0.0, 1.0 );

  /*    
  //it's a little easier to see the issue like this:

  if (a > 0.95) {
    outputFrag = vec4( a, b, 0.0, 1.0 );
  } else {
    outputFrag = vec4( 0.0 );
  }
  */
} 
```

我试过用以下方式替换fract函数：float a = texCoord.x * tWidth - floor(texCoord.x * tWidth); 只是想看看内置的 fract 方法是否有问题。但它给出了相同的结果。

重要的原因是，当我在特定位置计算的值（基于我的 texCoord）突然变为 0.01 而不是 0.99 或其他值时，它会弄乱我的着色器并导致奇怪的条纹。我试过设置“precision highp float;” 在片段着色器上，但它不能解决问题。我将 GL_NEAREST 用于最小和最大过滤器。

有任何想法吗？或者这是在着色器上插入 texcoords 时发生的正常浮点错误？

# performance - WP7沙子物理性能提升

> ID：15423925
> 
> 赞同：0
> 
> 时间：2013-03-15T02:58:23.210
> 
> 标签：performance, windows-phone-7, drawing, game-physics

我正在创建一个基于沙子的 windows phone 8 游戏，并且正在考虑提高性能的方法。

沙子从顶部落下并与东西碰撞，因此必须每帧计算一次。

当前的实现是这样工作的：

*   有一个带有像素信息的 short[,] 数组，就像这个像素充满了沙子/障碍物/线条
*   沙子算法真的很简单。如果那里有空间，我会随机左右移动每一粒谷物，如果下面有空间，让它掉下来
*   出于性能原因，我在关卡开始处创建了一个具有不变背景图像的 WriteableBitmap
*   当我绘制字段时，我复制了预先创建的 WriteableBitmap，通过 WriteableBitmap.Pixels[] 将更改的部分添加到其中，并通过 ImageBrush.ImageSource 将其设置为画布背景
*   我在每次更新时所做的是计算后台线程中的沙子运动，并让 UI 线程进行绘图。这意味着我遍历整个 short[,] 数组并查看像素 [] 是否为沙子，如果是，则计算颗粒运动。之后将其复制到背景图像等。

使用此设置，我在诺基亚 Lumia 820 的调试模式下获得大约 15 fps，这似乎很慢。

我当然可以进行一些小的优化，比如使用随机映射而不是 random.Next 或使用一个大的 short[] 而不是 short[,]，但是我注释掉了我的代码的不同部分，我似乎错过了在此设置中某处的主要性能下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:00:49.183

一个想法是将其下方/侧面完全阻塞的沙子设置为“非活动”。不活动的沙子不会在更新时检查，直到有东西在其侧面/下方移动（这会将现在释放的所有像素设置为“活动”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T11:55:59.453

我自己开始创建类似的东西 www.sandicle.com 那里有一个旧的测试视频，现在它有点快并且有更多的功能......（我总是喜欢掉一些熔岩:)......）希望能重新开始这个项目很快（现在有点忙:(

但基本上我通过减小分辨率得到 40-60fps

我还添加了一个编辑器，这样您就可以制作自己的粒子，并且可以在人们创建新元素包时下载它们 :)

# javascript - AngularJS：自动检测模型的变化

> ID：15423927
> 
> 赞同：103
> 
> 时间：2013-03-15T02:59:07.810
> 
> 标签：javascript, angularjs

假设我想做一些事情，比如每当模型的值发生变化时自动运行一些代码（比如将数据保存到服务器）。`ng-change`通过在每个可能改变模型的控件上设置类似的东西来做到这一点是唯一的方法吗？

即，对于视图，事情会随着模型的改变而改变，而无需显式地连接任何东西。有没有类似的方法可以运行保存到服务器的代码？就像是

```
myModel.on('change', function() {
  $.post("/my-url", ...);
}); 
```

就像你可能会看到骨干之类的东西。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-03-15T03:24:50.430

在使用和/或 ng-model 的视图中，Angular 会在幕后为您`{{}}`设置es。`$watch()`

默认情况下[`$watch`](http://docs.angularjs.org/api/ng/type/$rootScope.Scope#methods_$watch)按引用进行比较。如果您将第三个参数设置`$watch`为`true`，Angular 将改为“浅”地观察对象的变化。对于数组，这意味着比较数组项，对于对象映射，这意味着观察属性。所以这应该做你想要的：

```
$scope.$watch('myModel', function() { ... }, true); 
```

**更新**：Angular v1.2 为此添加了一个新方法，[`$watchCollection()](http://docs.angularjs.org/api/ng/type/$rootScope.Scope#methods_$watchcollection)：

```
$scope.$watchCollection('myModel', function() { ... }); 
```

请注意，“浅”一词用于描述比较而不是“深”，因为不遵循引用——例如，如果被监视的对象包含一个属性值，该属性值是对另一个对象的引用，则不遵循该引用来比较另一个对象。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-10-13T11:29:49.697

如果您需要根据表单元素的状态（已修改/未修改）动态设置表单元素的样式或测试某些值是否实际更改，您可以使用我自己开发的以下模块： [https ://github.com/betsol /角度输入修改](https://github.com/betsol/angular-input-modified)

它向表单及其子元素添加了额外的属性和方法。有了它，您可以测试某个元素是否包含新数据，甚至可以测试整个表单是否有新的未保存数据。

您可以设置以下监视：`$scope.$watch('myForm.modified', handler)`如果某些表单元素实际上包含新数据或者如果它反转到初始状态，则将调用您的处理程序。

此外，您可以使用`modified`单个表单元素的属性来实际减少通过 AJAX 调用发送到服务器的数据量。无需发送未更改的数据。

作为奖励，您可以通过调用表单的`reset()`方法将表单恢复为初始状态。

您可以在此处找到该模块的演示：http: [//plnkr.co/edit/g2MDXv81OOBuGo6ORvdt ?p=preview](http://plnkr.co/edit/g2MDXv81OOBuGo6ORvdt?p=preview)

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T14:02:30.733

检测单个模型中的变化

```
$scope.$watchCollection('model1', function () {
    //...
}, true); 
```

检测多个模型中的变化

```
$scope.$watchCollection('[model1, model2, model3]', function () {
    //...
}, true); 
```

# c++ - 调试 websocket++ broadcast_server.cpp（'owner_less' 不是 'std' 的成员）

> ID：15423931
> 
> 赞同：2
> 
> 时间：2013-03-15T02:59:39.163
> 
> 标签：c++, compiler-errors, std, member, websocket++

Zaphoyd`broadcast_server.cpp`看起来像是 websocket 服务器的完美主干，它可以快速接受和发送消息以及与线程的连接以进行实际操作，因此不会中断通信。 [https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp](https://github.com/zaphoyd/websocketpp/blob/experimental/examples/broadcast_server/broadcast_server.cpp)

他的简单`print_server.cpp`示例很容易编译；但是，我遇到了一些编译错误`broadcast_server.cpp`。

```
root@server:~# g++ -O3 broadcast_server.cpp -I ~/websocketpp-experimental/ -lboost_system
broadcast_server.cpp:126:37: error: 'owner_less' is not a member of 'std'
broadcast_server.cpp:126:37: error: 'owner_less' is not a member of 'std'
broadcast_server.cpp:126:70: error: 'con_list' was not declared in this scope
broadcast_server.cpp:126:70: error: template argument 2 is invalid
broadcast_server.cpp:126:18: warning: 'typedef' was ignored in this declaration [enabled by default]
broadcast_server.cpp:129:5: error: 'con_list' does not name a type
broadcast_server.cpp: In member function 'void broadcast_server::process_messages()':
broadcast_server.cpp:109:17: error: 'm_connections' was not declared in this scope
broadcast_server.cpp:112:17: error: 'm_connections' was not declared in this scope
broadcast_server.cpp:116:17: error: 'con_list' has not been declared
broadcast_server.cpp:116:36: error: expected ';' before 'it'
broadcast_server.cpp:117:22: error: 'it' was not declared in this scope
broadcast_server.cpp:117:27: error: 'm_connections' was not declared in this scope 
```

我是 C++ 新手，这些可能是简单的问题，但我找不到解决方法。

`'owner_less' is not a member of 'std'`? [http://en.cppreference.com/w/cpp/memory/owner_less](http://en.cppreference.com/w/cpp/memory/owner_less)

我猜`template argument 2` `error`当上述问题解决后，它就会消失。

`'con_list' was not declared in this scope`什么时候在里面`private:`？与`'m_connections'`？

我猜`'con_list' has not been declared`当上述错误发生时，它会消失。

我不知道它在说什么，也不知道为什么它前面`'it'`应该有一个。`;`

**版本**

Ubuntu 12.10

`gcc --version` `gcc (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2`

提升 1.53.0

**额外`#include`的**

```
#include <cstdlib>
#include <iostream>
#include <memory>
#include <set> 
```

依然没有

**`-std=c++11`**

```
In file included from /usr/include/c++/4.7/map:60:0,
                 from /usr/local/include/boost/date_time/gregorian/greg_month.hpp:18,
                 from /usr/local/include/boost/date_time/gregorian/greg_ymd.hpp:16,
                 from /usr/local/include/boost/date_time/gregorian/greg_calendar.hpp:16,
                 from /usr/local/include/boost/date_time/gregorian/gregorian_types.hpp:19,
                 from /usr/local/include/boost/date_time/posix_time/posix_time_config.hpp:18,
                 from /usr/local/include/boost/date_time/posix_time/posix_time_system.hpp:13,
                 from /usr/local/include/boost/date_time/posix_time/ptime.hpp:12,
                 from /usr/local/include/boost/date_time/posix_time/posix_time_types.hpp:12,
                 from /usr/local/include/boost/thread/thread_time.hpp:11,
                 from /usr/local/include/boost/thread/lock_types.hpp:18,
                 from /usr/local/include/boost/thread/pthread/thread_data.hpp:12,
                 from /usr/local/include/boost/thread/thread.hpp:17,
                 from /usr/local/include/boost/thread.hpp:13,
                 from /root/websocketpp-experimental/websocketpp/common/thread.hpp:41,
                 from /root/websocketpp-experimental/websocketpp/concurrency/basic.hpp:31,
                 from /root/websocketpp-experimental/websocketpp/config/core.hpp:35,
                 from /root/websocketpp-experimental/websocketpp/config/asio_no_tls.hpp:31,
                 from broadcast_server.cpp:1:
/usr/include/c++/4.7/bits/stl_tree.h: In instantiation of 'class std::_Rb_tree<boost::weak_ptr<void>, boost::weak_ptr<void>, std::_Identity<boost::weak_ptr<void> >, std::owner_less<boost::weak_ptr<void> >, std::allocator<boost::weak_ptr<void> > >':
/usr/include/c++/4.7/bits/stl_set.h:116:17:   required from 'class std::set<boost::weak_ptr<void>, std::owner_less<boost::weak_ptr<void> > >'
broadcast_server.cpp:132:14:   required from here
/usr/include/c++/4.7/bits/stl_tree.h:471:31: error: invalid use of incomplete type 'struct std::owner_less<boost::weak_ptr<void> >'
In file included from /usr/include/c++/4.7/bits/shared_ptr.h:52:0,
                 from /usr/include/c++/4.7/memory:87,
                 from /usr/local/include/boost/config/no_tr1/memory.hpp:21,
                 from /usr/local/include/boost/smart_ptr/shared_ptr.hpp:27,
                 from /usr/local/include/boost/shared_ptr.hpp:17,
                 from /usr/local/include/boost/date_time/time_clock.hpp:17,
                 from /usr/local/include/boost/thread/thread_time.hpp:9,
                 from /usr/local/include/boost/thread/lock_types.hpp:18,
                 from /usr/local/include/boost/thread/pthread/thread_data.hpp:12,
                 from /usr/local/include/boost/thread/thread.hpp:17,
                 from /usr/local/include/boost/thread.hpp:13,
                 from /root/websocketpp-experimental/websocketpp/common/thread.hpp:41,
                 from /root/websocketpp-experimental/websocketpp/concurrency/basic.hpp:31,
                 from /root/websocketpp-experimental/websocketpp/config/core.hpp:35,
                 from /root/websocketpp-experimental/websocketpp/config/asio_no_tls.hpp:31,
                 from broadcast_server.cpp:1:
/usr/include/c++/4.7/bits/shared_ptr_base.h:270:12: error: declaration of 'struct std::owner_less<boost::weak_ptr<void> >' 
```

**我是如何安装的（依赖项、实际程序等）**

[https://github.com/zaphoyd/websocketpp/wiki/Setup-0.3X-on-Ubuntu-12.10](https://github.com/zaphoyd/websocketpp/wiki/Setup-0.3X-on-Ubuntu-12.10)

**欢迎替代品**

如果有人有替代品`std::owner_less`，请张贴。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T03:26:18.157

std::owner_less 是一个 C++11 STL 功能，它允许您将 std::weak_ptr 放入 set 和 map 等关联容器中。最终，connection_hdl 是一个weak_ptr，这就是它需要自定义比较函数的原因。

WebSocket++ 0.3.x 可以通过预处理器定义配置为使用 C++03 + Boost 或 C++11。默认情况下，它使用 C++03 + Boost。Boost weak_ptr 的工作方式略有不同，不需要自定义比较函数。如果您使用列表、队列或向量，则也没有必要，因为这些容器不使用 connection_hdl 作为键。

0.3.x 手册中的大多数示例以及与库捆绑在一起的示例都使用 C++11，因为它更加简洁明了。要按原样编译和链接这些示例，您将需要一个 C++11 编译器并使用适当的 C++11 编译器标志和 WebSocket++ 定义。Scons 是我用来自动构建和运行所有示例和单元测试的构建系统。无需构建和运行单独的示例程序。任何其他构建系统都应该可以正常工作，在命令行上临时提供编译器参数也是如此。

我在手册中设置了一个页面，描述了启用/禁用 C++11 功能的各种选项。[http://www.zaphoyd.com/websocketpp/manual/reference/cpp11-support](http://www.zaphoyd.com/websocketpp/manual/reference/cpp11-support)。该手册页列出了我最常用于测试的操作系统和编译器的推荐编译器标志列表。

对于 Linux 上的 g++ 4.7，我建议：“-std=c++0x -D_WEBSOCKETPP_CPP11_STL_ -D_WEBSOCKETPP_NO_CPP11_REGEX_ -lboost_regex -lboost_system”。这启用了除库（损坏/错误）之外的所有 C++11 功能，并引入了 Boost 版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T14:35:12.307

阅读[文档](https://github.com/zaphoyd/websocketpp/wiki/Building-the-examples-and-unit-tests)后，我认为您需要`BOOST_ROOT_CPP11`在构建时定义。

> 类似于 BOOST_ROOT 但允许链接到针对 C++11 STL 编译的单独版本的 Boost

我基于以下[标题](https://github.com/zaphoyd/websocketpp/blob/experimental/websocketpp/common/memory.hpp)

```
#ifdef _WEBSOCKETPP_CPP11_MEMORY_
    using std::shared_ptr;
    using std::weak_ptr;
    using std::enable_shared_from_this;
    using std::static_pointer_cast;

    typedef std::unique_ptr<unsigned char[]> unique_ptr_uchar_array;
#else
    using boost::shared_ptr;
    using boost::weak_ptr;
    using boost::enable_shared_from_this;
    using boost::static_pointer_cast;

    typedef boost::scoped_array<unsigned char> unique_ptr_uchar_array;
#endif 
```

应该使用哪个`std::weak_ptr`而不是`boost::weak_ptr`

* * *

如果您想使用替代容器而不是`std::set`，请修改类似于此伪代码的示例

```
 if (a.type == SUBSCRIBE) {
                boost::unique_lock<boost::mutex> lock(m_connection_lock);
                m_connections.push_back(a.hdl);
            } else if (a.type == UNSUBSCRIBE) {
                boost::unique_lock<boost::mutex> lock(m_connection_lock);
                m_connections.erase(std::remove(m_connections.begin(), m_connections.end(), a.hdl));
            } else if (a.type == MESSAGE) {
                boost::unique_lock<boost::mutex> lock(m_connection_lock);

                con_list::iterator it;
                for (it = m_connections.begin(); it != m_connections.end(); ++it) {
                    m_server.send(*it,a.msg);
                }
            } else {
                // undefined.
            }
        }
    }
private:
    typedef std::deque<connection_hdl> con_list; 
```

哪个将使用`std::deque`而不是`std::set`. 将不会使用排序，但据我所知，在此示例中不需要。

# c++ - 为什么代码在某一行停止执行？

> ID：15423935
> 
> 赞同：0
> 
> 时间：2013-03-15T03:00:14.933
> 
> 标签：c++, windows, winforms, c++-cli

我有以下代码：

```
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Form1 ^ form = gcnew Form1;
    form->ShowDialog();

    //Starts the .jar file
    ServerProcess *aServer = new ServerProcess();
    aServer->NewServer();

    return 0;
} 
```

问题是程序打开了窗口 ( `Form1 ^ form = gcnew Form1; form->ShowDialog();`)，但在我关闭表单之前它不会运行其他代码行。

**为什么会这样？我怎样才能解决这个问题？**

任何帮助，将不胜感激。先感谢您。

**编辑：**

感谢“Cheers and hth.-Alf”，我现在知道，由于`ShowDialog()`之后的任何代码，在我关闭表单之前都不会执行。`Application::Run(gcnew Form1())`导致相同的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:05:26.787

[文档](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)说：

> 您可以使用此方法在应用程序中显示模式对话框。调用此方法时，它后面的代码要等到对话框关闭后才会执行。

如果您只是希望代码继续运行而不是阻塞直到弹出窗口关闭，请考虑使用[Form.Show](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.show.aspx)而不是[Form.ShowDialog](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:27:34.327

“调用此方法时，它后面的代码直到对话框关闭后才会执行。” 如果您不希望它阻塞您的后面代码，您需要在另一个线程中调用 ShowDialog。

# qt - 线程并使用 QLCDNumber 制作计时器

> ID：15423939
> 
> 赞同：1
> 
> 时间：2013-03-15T03:00:30.573
> 
> 标签：qt, pyqt, pyside

下面的代码只是做一个`QTimer`with `QLCDNumber`。我想在程序启动后 4 秒后显示一个消息对话框。但是，当消息对话框弹出时，时间`QLCDNumber`不会改变。即使弹出消息对话框，我应该怎么做才能使该程序保持计时？

```
import sys
from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MainWindow(QWidget):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)
        self.resize(800,600)

        self.lcdNumber = QLCDNumber()
        self.lcdNumber.setNumDigits(8)

        layout =  QVBoxLayout(self)
        layout.addWidget(self.lcdNumber)

        self.currentTime = QTime(0,0,0)
        self.lcdNumber.display(self.currentTime.toString('hh:mm:ss'))

        self.timer = QTimer(self)
        self.timer.timeout.connect(self.updateLcdNumberContent)
        self.timer.start(1000)

    def updateLcdNumberContent(self):

        self.currentTime = self.currentTime.addSecs(1)
        self.lcdNumber.display(self.currentTime.toString('hh:mm:ss'))

        if self.currentTime == QTime(0,0,4) :
            msgBox = QMessageBox()
            msgBox.setWindowTitle('iTimer')
            msgBox.setIcon (QMessageBox.Information)
            msgBox.setText("Time Out !!")

            stopButton = msgBox.addButton("Stop", QMessageBox.ActionRole)
            ignoreButton = msgBox.addButton(QMessageBox.Ignore)

            stopButton.clicked.connect(self.timer.stop)

            msgBox.show()
#            msgBox.exec_()

if __name__ == '__main__':
    app =QApplication(sys.argv)
    frame = MainWindow()
    frame.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T06:53:08.593

将您的代码更改为

```
msgBox = QMessageBox(self) 
```

创建一个非阻塞消息框。您可以删除 exec_() 方法。

# html - 如何在 html/css 中对齐“a”元素

> ID：15423943
> 
> 赞同：0
> 
> 时间：2013-03-15T03:00:51.267
> 
> 标签：html, css, alignment, center

我需要在中心对齐一个“a”元素

HTML 代码：

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css">
    <link href='http://fonts.googleapis.com/css?family=Cedarville+Cursive' rel='stylesheet' type='text/css'>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="script.js"></script>
</head>

<body>

    <h1>Olive</h1>
    <a href="page1.html">Enter</a>

</body>
</html> 
```

CSS 代码：

```
body {
background-color: olive;
}

h1 {
font-family: 'Cedarville Cursive', cursive;
font-size: 230px;
text-align: center;
}

a {
font-family: 'Cedarville Cursive', cursive;
color: white;
font-size: 100px;
text-decoration: none; 
```

}

我在 CSS 表的“a”元素中使用了“text-align”，但它没有改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:06:40.270

`text-align:center;`将文本居中放置在元素内，当您将其应用于 时`<a>`，您会将文本居中`<a>`放置在其中，但它`<a>`是内联元素，它不会拉伸，因此您需要将其放置在`div`.

```
<div> <a> Ha </a> </div>

div{
text-align:center;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:04:56.010

那是因为您不能像默认情况下`text-align`那样使用内联元素。`a`试试这个：

```
a {
    display: block;
    text-align: center;
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T03:06:15.267

您需要在**父级（正文）上使用 text-align 。**这将对齐内联子级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T04:42:36.517

因为它是一个内联元素，一个元素应该总是嵌套在一个块元素中，不管任何样式问题。

例如：

```
<p>
  <a><a href="page1.html">Enter</a>
</p> 
```

这样，您就可以使用类似于以下 CSS 规则的内容：

```
p > a { text-align: center; } 
```

# php - 如何识别（命名）不同的访问者以在目录中创建 1 个访问者 1 个文件夹？

> ID：15423944
> 
> 赞同：0
> 
> 时间：2013-03-15T03:01:01.523
> 
> 标签：php, javascript, store

我尝试使网页流程如下所示，并且有问题：
（2）中的Q1-，需要命名文件夹来识别不同的访问者，因为之前没有要求他们登录，所以我应该做一个功能检查访问者IP（坏主意）还是Mac 地址和使用值来命名 还是更好的主意？

流程
-（1）访问者上传文件（img）
（2）将img存储在服务器中添加名为的新文件夹？（1 访问者 1 目录中的文件夹）
（3）在页面上显示 img
（4）访问者可以在页面上编辑（旋转、调整大小或删除）img

（5-1）访问者完成编辑，确认发布（要求登录）
（6）移动服务器中的img文件夹，通过登录用户名给新名称

(5-2) 访客离开网站，(不继续登录)
(6) 删除服务器中的 img 文件夹。文件夹名称 ？

**[更新]
我使用会话仍然有同样的问题 - 如何命名不同的访问者？**

**现在我正在尝试通过计算 dir 和 中有多少个文件夹来命名`++`，但在这种情况下，如果在 (6) 之后，则一旦创建新文件夹，命名可能在 dir 中重复。**
示例：有 3 个访问者在线编辑和 3 个文件夹（在目录中命名为`v1`, `v2`, )。`v3`然后如果`v2`删除或移动。现在新访客来了如何避免命名v3？
还是更好的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:05:10.143

当有人访问该页面时生成并跟踪会话 cookie。使用 IP 或 mac 地址（如果你能得到它）并不理想，因为许多人可以使用 NAT（网络地址转换）等技术共享一个 IP 地址。

查看 PHP 会话文档以获取更多信息：

[http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

# javascript - Jquery“stopImmediatePropagation 不是函数”错误

> ID：15423948
> 
> 赞同：2
> 
> 时间：2013-03-15T03:01:07.030
> 
> 标签：javascript, jquery

我得到这个代码[http://www.technoread.net/webdesign/javascript-a-jquery/item/89-live-table-edit-delete-with-pagination-using-jquery](http://www.technoread.net/webdesign/javascript-a-jquery/item/89-live-table-edit-delete-with-pagination-using-jquery)并修改为：

代码运行良好，但萤火虫在这部分显示错误：

```
$("#four_"+ID).html(four_val);
$("#five_"+ID).html(five_val);

e.stopImmediatePropagation();

}
});
} 
```

![在此处输入图像描述](../Images/55ad4b28117b1bfb03b7b4ad63d7a427.png)

```
 $("#edit_td").focus(function(){
  $(this).width(1500)
  });

  $(document).ready(function()
  {
  $(".delete").live('click',function()
  {
  var id = $(this).attr('id');
  var b=$(this).parent().parent();
  var dataString = 'id='+ id;
  if(confirm("Estás seguro de que quieres borrar este proceso? se borrará  completamente"))
  {
  $.ajax({
  type: "POST",
  url: "delete_ajax.php",
  data: dataString,
  cache: false,
  success: function(e)
  {
  $(".tablasuperior").hide();
  $(".tablainferior").hide();
  $("#avisoborrado").show();
  e.stopImmediatePropagation();
  }
       });
return false;
  }
  });

  //editar  click en la tr

  $(".bote").live('click',function()
 //$(".edit_tr").live('dblclick',function()
  {
  var ID=$(this).attr('id');

 $("#four_"+ID).hide();
 $("#five_"+ID).hide();

 $("#four_input_"+ID).show();
 $("#five_input_"+ID).show();

 })

 $(".guardar").live('click',function()

 {
 var ID=$(this).attr('id');

 var one_val=$("#one_input_"+ID).val();
 var two_val=$("#two_input_"+ID).val();
 var three_val=$("#three_input_"+ID).val();
 var four_val=$("#four_input_"+ID).val();
 var five_val=$("#five_input_"+ID).val();

 var dataString = 'id='+ ID  +'&name='+one_val+'&category='+two_val+'&price='+three_val+'&discount='+four_val+'&discount 2='+five_val;;
 if(one_val.length>0&& two_val.length>0 && three_val.length>0 && four_val.length>0)
 {

 $.ajax({
 type: "POST",
 url: "live_edit_ajax.php",
 data: dataString,
 cache: false,
 success: function(e)
 {

 $("#one_"+ID).html(one_val);
 $("#two_"+ID).html(two_val);
 $("#three_"+ID).html(three_val);
 $("#four_"+ID).html(four_val);
 $("#five_"+ID).html(five_val);

 e.stopImmediatePropagation();

 }
 });
 }
else
{
alert('Ingresa algo');
}

});

$(".editbox").live("mouseup",function(e)
{
e.stopImmediatePropagation();
});

$(document).mouseup(function()
{
//si hay clic en el layout esconde la edit box y muestra la de texto
$(".editbox").hide();
$(".text").show();
});

//Pagination

function loading_show(){
$('#loading').html("<img src='images/loading.gif'/>").fadeIn('fast');
}
function loading_hide(){
$('#loading').fadeOut('fast');
$("#avisoborrado").hide();
}                
function loadData(page){
loading_show();                    
$.ajax
({
type: "POST",
url: "load_data.php",
data: "page="+page,
success: function(msg)
{
$("#container").ajaxComplete(function(event, request, settings)
{
loading_hide();
$("#container").html(msg);
});
}
});
}
loadData(1);  // For first time page load default results
$('#container .pagination li.active').live('click',function(){
var page = $(this).attr('p');
loadData(page);
});           
$('#go_btn').live('click',function(){
var page = parseInt($('.goto').val());
var no_of_pages = parseInt($('.total').attr('a'));
if(page != 0 && page <= no_of_pages){
loadData(page);
}else{
alert('Ingrese un proceso entre 1 y '+no_of_pages);
$('.goto').val("").focus();
return false;
}
});

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:06:13.520

`success`jquery函数的回调`ajax`没有事件作为其参数。它不是 DOM 事件，是异步执行的。

更新：

```
$(".guardar").live('click',function(e) {

  < your code here >

  if(one_val.length>0&& two_val.length>0 && three_val.length>0 && four_val.length>0)
  {
    e.stopImmediatePropagation();
    $.ajax({
      type: "POST",
      url: "live_edit_ajax.php",
      data: dataString,
      cache: false,
      success: function(data) {
        $("#one_"+ID).html(one_val);
        $("#two_"+ID).html(two_val);
        $("#three_"+ID).html(three_val);
        $("#four_"+ID).html(four_val);
        $("#five_"+ID).html(five_val);
      }
    });
  }
  else
  {
    alert('Ingresa algo');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:07:18.350

`e`在您的情况下，不是您认为的，它是从服务器接收到的数据，请查看 jQuery.ajax^([文档](http://api.jquery.com/jQuery.ajax/))。此外，您使用的`live`它基本上适用于使 DOM 冒泡的事件原理，以便将在动态元素上触发的事件委托给更高级别的元素。

不过，如果你想使用它，你可以喜欢

```
$(".delete").live('click',function(e)
  {
    e.stopPropagation();
    e.stopImmediatePropagation(); 
```

PS不要使用live或delegate，它们都已弃用，请`.on`改用

# sql - 在 vb.net 2003 中插入 SQL Server 存储过程作为命令

> ID：15423949
> 
> 赞同：0
> 
> 时间：2013-03-15T03:01:17.297
> 
> 标签：sql, sql-server, vb.net, stored-procedures, datagrid

我在 SQL Server 中有一个将数据插入表的存储过程。

关于如何在 vb.net 2003 中使用 datagrid 使其成为 SQL 命令的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:41:15.010

试试这个，

```
sqlConnection conn = new sqlConnection("Connection String");
conn.Open();

        sqlCommand command = new sqlCommand("Functionname", conn);
        command.CommandType = CommandType.StoredProcedure;
....
....
....
.... 
```

# fortran - (FORTRAN 90) I/O 读取/打印

> ID：15423950
> 
> 赞同：-1
> 
> 时间：2013-03-15T03:01:24.123
> 
> 标签：fortran

我有一个 .dat 文件，它有 2 列，列下列出了值。但是，条目之间存在随机间距。两列的长度相同（只是数据中的随机空行）。

我需要能够阅读这些然后显示它们。

谢谢你！对于任何建议/帮助乔

我试过只使用 OPEN 但只是得到一个 I/O 错误。

```
PROGRAM TEST1

OPEN( 2, FILE='grades.dat', ACCESS='DIRECT', FORM='FORMATTED')

READ( 2) X, Y 

END PROGRAM TEST1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:53:58.907

此代码逐行将文件读入字符串。如果字符串是非空白的，对应于包含两个数字的行而不是空白，它将它们读入下一个数组元素。假定数组已被声明为足够大。这回答了你的问题了吗？更好的设计是读取文件以确定数字的数量，倒回文件，并将数组分配到正确的大小，然后将文件读入数组。

编辑：实际上，Fortran 会自动跳过空白行，因此解决方案可以更简单：

```
program read_file

use, intrinsic :: iso_fortran_env

implicit none

integer :: i, j, ReadCode
real, dimension (100) :: x, y

open (unit=2, file="grades.dat", access="sequential", form="formatted", status="old", action="read" )

i = 1
ReadLoop: do

  read (2, *, iostat=ReadCode )   x (i), y (i)

   if ( ReadCode /= 0 ) then
      if ( ReadCode == iostat_end ) then
         exit ReadLoop
      else
         write ( *, '( / "Bad read: ", I0 )' )  ReadCode
         stop
      end if
   end if

   i = i + 1

end do ReadLoop

do j=1,i-1
   write (*, *) x(j), y(j)
end do

end program read_file 
```

# xcode - 在 .cg 文件中编写的 OpenGL 着色器代码与在 vsh/fsh 文件中编写的另一个有什么区别？

> ID：15423953
> 
> 赞同：1
> 
> 时间：2013-03-15T03:01:36.453
> 
> 标签：xcode, opengl-es, shader

我是**OpenGL ES 2.0**初学者，我不明白为什么**着色器有****不同类型**的代码。特别是和/之间的差异。**`.cg``.vsh``.fsh`**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T03:30:00.153

**Cg**是**NVIDIA**拥有和运营的着色语言。**GLSL**是**OpenGL**的着色语言。**Cg**通过编译成某种形式的**GLSL**工作，基于代表**GLSL**版本和着色器阶段类型的[“配置文件” 。](https://developer.nvidia.com/cg-profiles)

 **如果您使用的是**OpenGL ES**，则应该忽略**Cg**。您不能在**OpenGL ES中使用****Cg**，因为**ES**的**GLSL**版本具有**Cg**无法满足的要求。因此，如果您看到一些使用**Cg**的教程，请忽略它。

 ******扩展名完全不相关。使用您最清楚的任何扩展名；**OpenGL**不读取文件，因此您可以将着色器字符串提供给 glView。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:06:19.720

如果您使用**Nvidia的****CG 工具包**，通常使用文件扩展名， 但如果您使用**GLSL 着色器**，则可以使用、、或.**`.cg`
**`.vsh``.fsh``.frag``.vert``.glsl`**************

# angularjs - 为什么 ng-style 不适用于与自定义指令相同的元素？

> ID：15423955
> 
> 赞同：19
> 
> 时间：2013-03-15T03:01:43.363
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我正在尝试在自定义指令标签上应用 ng-style 属性，有点像这样：

```
<my-directive ng-style="myStyle"></my-directive> 
```

在控制器内部，我有：

```
$scope.myStyle = {
    "background": "red"
} 
```

这似乎不起作用。当我检查 HTML 'MyStyle' 时没有呈现。当我在常规 div 上应用相同的 ng 样式标签时，它会正确呈现。

为什么 ng-style 不适用于自定义指令标签？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-15T03:35:49.820

您的指令可能定义了一个隔离范围：`scope: { ... }`. 在这种情况下，在该元素上定义的所有指令都将使用隔离范围。因此，ng-style 将`myStyle`在不存在的隔离范围内查找属性。

![在此处输入图像描述](../Images/fca587dcf6fdb2a4386abfb0bf96e5a4.png)

上面，灰线显示 $parents，虚线显示原型继承。范围 004 是您的隔离范围。范围 003 是您的控制器范围。ng-style 会`myStyle`在 004 范围内寻找，没有找到，然后它会沿着虚线在 Scope 中寻找，也没有找到。

通常，您不希望在同一元素上使用创建隔离范围的指令以及其他指令。你有几个选择：

1.  在指令中使用`scope: true`而不是隔离范围。那么当 ng-style`myStyle`在 004 范围内查找，没有找到时，它会沿着虚线（下图中），在父范围内查找：
    ![在此处输入图像描述](../Images/d0f6a70894f9f11b27dca8ed11094c09.png)
2.  `ng-style="$parent.myStyle"`在您的 HTML 中使用以访问`myStyle`父范围内的属性（即，按照第一张图片中的灰线）。

# java - 从静态方法返回 EJB 远程服务引发异常：[Security:090398]Invalid Subject

> ID：15423957
> 
> 赞同：2
> 
> 时间：2013-03-15T03:02:02.507
> 
> 标签：java, web-applications, ejb, weblogic

我有几年的 Java 和 EJB 经验，但我仍然无法解释这个问题，尽管我已经知道修复...

拜托，谁能帮我解释一下为什么？非常感谢！

我的平台是 weblogic10.3.2 和 javaee5.0

好的，问题是当我以一种方法调用远程 EJB 时，这意味着有关 EJB 的所有内容都在一种方法中，然后就可以按预期进行。

但是当我只是从帮助类的静态方法中返回远程服务对象，并在 servlet 中调用服务时，我得到了

> java.lang.SecurityException: [Security:090398]Invalid Subject: principals=[sundan076]，其中“sundan076”是用户登录Web应用程序，“V_USERNAME”是访问远程EJB服务的用户名。

正确的方法，调用方法`directCall(param)`。
错误的方式，调用方法`staticToolCall(final Map param)`。

小服务程序：

```
public class EJBServletClient extends HttpServlet
{
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
    {
        this.doPost(request, response);
    }

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException,
        IOException
{

    Context context = null;
    try
    {
        Map<String, String> param = new HashMap<String, String>();
        param.put("CTS_CUSTOMER_ID", request.getParameter("CTS_CUSTOMER_ID"));
        param.put("CTS_TASK_ID", request.getParameter("CTS_TASK_ID"));
        param.put("SERIALNO", request.getParameter("SERIALNO"));
        param.put("CUSTOMER_SERVICE_UM", request.getParameter("CUSTOMER_SERVICE_UM"));

        Thread t=Thread.currentThread();
        System.out.println("thread:"+t);

        //Map result = this.staticToolCall(param);
        Map result = this.directCall(param);

        System.out.println(result);
    } catch (Exception e)
    {
        e.printStackTrace();
        throw new ServletException(e);
    }finally
    {
        if (context != null)
        {
            try
            {
                context.close();
            } catch (NamingException e)
            {
                e.printStackTrace();
            }
        }
    }

}

private Map directCall(Map param) throws Exception
{
    Context context = null;
    try
    {
        Properties p = new Properties();
        p.put(Context.PROVIDER_URL, "t3://10.25.32.13:31256");
        p.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
        p.put(Context.SECURITY_PRINCIPAL, "V_USERNAME");
        p.put(Context.SECURITY_CREDENTIALS, "V_PASSWORD");
        context = new InitialContext(p);
        BizApplyServiceHome home = (BizApplyServiceHome) PortableRemoteObject.narrow(
                context.lookup("ejb/rcs-css/BizApplyService"), BizApplyServiceHome.class);
        BizApplyService bizApplyService = home.create();
        return bizApplyService.modifyApplyCustomerInfo(param);
    } finally
    {
        if (context != null)
        {
            context.close();
        }
    }
}

private Map staticToolCall(final Map param) throws Exception
{
    BizApplyService bizApplyService = EJBTool.getBizApplyService();
    return bizApplyService.modifyApplyCustomerInfo(param);
}
} 
```

助手类

```
public class EJBTool

{

public static BizApplyService getBizApplyService() throws Exception
{
    Context context = null;
    try
    {
        Thread t=Thread.currentThread();
        System.out.println("thread:"+t);
        Properties p = new Properties();
        p.put(Context.PROVIDER_URL, "t3://10.25.32.13:31256");
        p.put(Context.INITIAL_CONTEXT_FACTORY, "weblogic.jndi.WLInitialContextFactory");
        p.put(Context.SECURITY_PRINCIPAL, "V_USERNAME");
        p.put(Context.SECURITY_CREDENTIALS, "V_PASSWORD");
        context = new InitialContext(p);
        BizApplyServiceHome home = (BizApplyServiceHome) PortableRemoteObject.narrow(
                context.lookup("ejb/rcs-css/BizApplyService"), BizApplyServiceHome.class);
        return home.create();
    } finally
    {
        if (context != null)
        {
            context.close();
        }
    }
}
} 
```

和例外：

```
java.lang.SecurityException: [Security:090398]Invalid Subject: principals=[sundan076]
at weblogic.rjvm.ResponseImpl.unmarshalReturn(ResponseImpl.java:234)
at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:348)
at weblogic.rmi.cluster.ClusterableRemoteRef.invoke(ClusterableRemoteRef.java:259)
at com.pingan.rcs.css.biz.service.remote.ejb.bizApplyService_u7jjbk_EOImpl_1032_WLStub.modifyApplyCustomerInfo(Unknown Source)
at com.pingan.pafax.web.EJBServletClient.staticToolCall(EJBServletClient.java:80)
at com.pingan.pafax.web.EJBServletClient.doPost(EJBServletClient.java:43)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:175)
at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3594)
at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2202)
at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2108)
at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1432)
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
at weblogic.work.ExecuteThread.run(ExecuteThread.java:173)
Caused by: java.lang.SecurityException: [Security:090398]Invalid Subject: principals=[sundan076]
at weblogic.security.service.SecurityServiceManager.seal(SecurityServiceManager.java:835)
at weblogic.security.service.SecurityServiceManager.getSealedSubjectFromWire(SecurityServiceManager.java:524)
at weblogic.rjvm.MsgAbbrevInputStream.getSubject(MsgAbbrevInputStream.java:315)
at weblogic.rmi.internal.BasicServerRef.acceptRequest(BasicServerRef.java:875)
at weblogic.rmi.internal.BasicServerRef.dispatch(BasicServerRef.java:310)
at weblogic.rmi.cluster.ClusterableServerRef.dispatch(ClusterableServerRef.java:242)
at weblogic.rjvm.RJVMImpl.dispatchRequest(RJVMImpl.java:1138)
at weblogic.rjvm.RJVMImpl.dispatch(RJVMImpl.java:1020)
at weblogic.rjvm.ConnectionManagerServer.handleRJVM(ConnectionManagerServer.java:240)
at weblogic.rjvm.ConnectionManager.dispatch(ConnectionManager.java:882)
at weblogic.rjvm.MsgAbbrevJVMConnection.dispatch(MsgAbbrevJVMConnection.java:453)
at weblogic.rjvm.t3.MuxableSocketT3.dispatch(MuxableSocketT3.java:322)
at weblogic.socket.BaseAbstractMuxableSocket.dispatch(BaseAbstractMuxableSocket.java:298)
at weblogic.socket.SocketMuxer.readReadySocketOnce(SocketMuxer.java:915)
at weblogic.socket.SocketMuxer.readReadySocket(SocketMuxer.java:854)
at weblogic.socket.EPollSocketMuxer.dataReceived(EPollSocketMuxer.java:215)
at weblogic.socket.EPollSocketMuxer.processSockets(EPollSocketMuxer.java:177)
at weblogic.socket.SocketReaderRequest.run(SocketReaderRequest.java:29)
at weblogic.socket.SocketReaderRequest.execute(SocketReaderRequest.java:42)
at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:145)
at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:117) 
```

# c# - 回发后获取控制值

> ID：15423958
> 
> 赞同：0
> 
> 时间：2013-03-15T03:02:25.763
> 
> 标签：c#, asp.net, user-controls, code-behind

我在页面中有一个动态控件。它是由代码隐藏添加到此页面的。

```
FileUpload fu = new FileUpload();
fu.ID = "fu";
fu.EnableViewState = true;
list.Add(fu);

Button btnFu = new Button();
btnFu.Text = "Upload";
btnFu.ID = "btnFu";
list.Add(btnFu); 
```

使用 postBack 后，我无法从此文件上传中获取值。

```
if (!IsPostBack) {

}
else {
      string str_btn = null;
      if (Request.Form.Keys[Request.Form.Keys.Count - 1] != null)
                    str_btn = Request.Form.Keys[Request.Form.Keys.Count - 1].ToString();
      if (!string.IsNullOrEmpty(str_btn)) 
                    handleClick(str_btn);

} 
```

有人有解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T04:39:04.963

我怀疑您添加控件的列表是一个内容容器，因此您必须首先获取对它的引用，然后调用该`FindControl("btnFu")`方法。

```
// var list = yourListControl
Button btnFu = list.FindControl("btnFu") as Button;
if(btnFu != null)
{
    // Operate on the button
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:41:29.800

我相信，您需要在回发时重新创建动态创建的控件。

```
public class YourPage : System.Web.UI.Page
{
      protected bool AreControlsCreated {
      {
          get{return (bool)ViewState["AreControlsCreated"];}
          set{ViewState["AreControlsCreated"] = value;}
      }

      private void Page_Load(object sender, System.EventArgs e)
      {
          if(!IsPostBack)
          {
              AreControlsCreated = false;
          }
          else if(AreControlsCreated)
          {
              CreateYourControls();
          }
      }

      private void CreateYourControls()
      {
        ...
        FileUpload fu = new FileUpload();
        fu.ID = "fu";
        fu.EnableViewState = true;
        list.Add(fu);

        Button btnFu = new Button();
        btnFu.Text = "Upload";
        btnFu.ID = "btnFu";
        list.Add(btnFu);

        AreControlsCreated = true;
      }

      protected void YourButton_Click(object sender, EventArgs e)
      {
          createYourControls();
      }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T03:21:01.667

我会尝试使用 Page.FindControl("fu") 搜索控件。此问题的答案中有一些有趣的选项，涵盖了使用母版页和用户控件时查找控件等问题。

[ASP.Net FindControl 不起作用 - 怎么会？](https://stackoverflow.com/questions/799655/asp-net-findcontrol-is-not-working-how-come)

# python - 使用 BeautifulSoup 解码 HTML 实体并存储在 SQL 中

> ID：15423959
> 
> 赞同：0
> 
> 时间：2013-03-15T03:02:45.003
> 
> 标签：python, sql, beautifulsoup

我有这个 HTML 代码：

```
<h2>
<a href="http://smittenkitchen.com/blog/2008/10/mollys-apple-tarte-tatin/" 
rel="bookmark" 
title="permanent link to molly&#8217;s apple tarte tatin">
molly&#8217;s apple tarte tatin</a>
</h2> 
```

正确的单引号 (’) 给我带来了各种各样的问题。我正在使用 BeautifulSoup 对其进行解析，但我似乎无法以可以在 SQL 数据库中使用的格式获取这些数据。我尝试从我的数据库中将其格式化为 JSON，但出现此错误：

json_encode()：参数中的 UTF-8 序列无效

为了清楚起见，我试图将标题存储在 SQL 中！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T03:27:18.710

鉴于：

```
content = '''\
<h2>
<a href="http://smittenkitchen.com/blog/2008/10/mollys-apple-tarte-tatin/" 
rel="bookmark" 
title="permanent link to molly&#8217;s apple tarte tatin">
molly&#8217;s apple tarte tatin</a>
</h2>''' 
```

使用 lxml：

```
import lxml.html as LH
root = LH.fromstring(content)
atag = root.find('a')
print(repr(atag.attrib['title'])) 
```

使用 bs4：

```
import bs4 as bs
soup = bs.BeautifulSoup(content)
atag = soup.find('a')
print(repr(atag.attrs['title'])) 
```

使用 BeautifulSoup（版本 3）：

```
import BeautifulSoup as bs
soup = bs.BeautifulSoup(content)
atag = soup.find('a')
print(repr(atag['title'])) 
```

每个版本打印

```
u'permanent link to molly\u2019s apple tarte tatin' 
```

这表明每个成功地将 HTML 标题解码为 un​​icode。

您的数据库适配器应该能够在数据库中存储 unicode 或 unicode 的编码形式。不需要 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T03:12:08.453

虽然没有完全回答您的问题，但似乎大多数人建议从美丽汤中转到 lxml，甚至是美丽汤的作者。我们在一个项目中使用了内部的漂亮汤，发现使用 lxml 可以让我们更好地控制我们正在执行的 HTML 解析，以及更少的奇怪问题。

查看[http://lxml.de/](http://lxml.de/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T04:10:41.000

我建议你尝试[实体转换](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html#Entity%20Conversion)

从文档中，根据需要进行更改：

```
from BeautifulSoup import BeautifulSoup
BeautifulSoup("Sacr&eacute; bl&#101;u!", 
               convertEntities=BeautifulStoneSoup.HTML_ENTITIES).contents[0]
# u'Sacr\xe9 bleu!' 
```

# ruby-on-rails - Rails，尝试运行资产：预编译返回“已经需要”

> ID：15423963
> 
> 赞同：2
> 
> 时间：2013-03-15T03:03:13.650
> 
> 标签：ruby-on-rails

当我第一次将我的应用程序转移到生产环境时，我发现了一些问题。我发现我应该在生产中使用预编译的资产，所以我尝试编译它们，但得到了这个错误：

```
rake aborted!
/var/www/tracker/app/assets/templates/snippets/comment.html.erb has already been required
  (in /var/www/tracker/app/assets/javascripts/angularjs/routes.coffee.erb) 
```

这里最令人困惑的是， routes.coffee.erb`comment.html.erb`中根本没有提到该文件，它只包含一些[angularjs](http://angularjs.org/)的路由：

```
angular.module('app', ['ui', 'app.services', 'app.directives', 'app.filters', 'ngCookies', 'ngSanitize', 'mwTable'])
  .config ['$routeProvider', ($routeProvider) ->

    $routeProvider.when '/',
      templateUrl: '<%= asset_path('announces/list.html') %>'
      controller: AnnouncesListCtrl

    $routeProvider.when '/announce/:fid',
      templateUrl: '<%= asset_path('announces/view.html') %>'
      controller: AnnouncesViewCtrl

    $routeProvider.when '/announce/:fid/edit',
      templateUrl: '<%= asset_path('announces/edit.html') %>'
      controller: AnnouncesEditCtrl

    $routeProvider.when '/registration',
      templateUrl: '<%= asset_path('users/edit.html') %>'
      controller: UsersEditCtrl

    $routeProvider.when '/registration_successful',
      templateUrl: '<%= asset_path('users/registration_successful.html') %>'
      controller: UsersEditCtrl

    $routeProvider.when '/users',
      templateUrl: '<%= asset_path('users/list.html') %>'
      controller: UsersListCtrl

    $routeProvider.otherwise({redirectTo: '/'})

  ] 
```

我唯一能想到的就是我用过`<%= asset_path('announces/view.html') %>`的，它又包含`<%= asset_path('snippets/comment.html')%>`. 如果这导致了问题，那么想到的唯一解决方案就是不使用`asset_path`. 但是这样做可以吗？

完整的错误信息在这里：[https](https://gist.github.com/SET/5167092) ://gist.github.com/SET/5167092 。尽管它的大小，它是 99% 无用的。

另外，由于我是 Rails 新手（来自 PHP），我不明白为什么已经需要某些东西如此重要？您需要它几次，但只加载一次；为什么这会导致问题？

**更新：** 我解决了将 <%= asset_path(template) %>` 替换为 '/assets/template' 的问题，但这不是一个丑陋的解决方案吗？

# string - 方案中的换行符（球拍）

> ID：15423969
> 
> 赞同：9
> 
> 时间：2013-03-15T03:03:56.483
> 
> 标签：string, scheme, racket

当您使用“显示”编写时，可能会有一个新行，例如

```
(display "exa \n mple") 
```

但问题是没有任何代码可以在字符串中换行？像：

```
"exa \n mple" 
```

预期->

```
exa
 mple 
```

是）我有的：

```
exa \n mple 
```

我在球拍文档或其他任何地方都找不到任何信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-02T19:51:46.940

就像是：

```
(display "line\nhola") 
```

应该这样做。

不知道为什么您需要上面发布的任何内容。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-15T03:08:39.320

如果您需要一种在字符串之间添加换行符的方法，那么这将起作用：

```
(define s (string-append "exa " "\n" " mple"))
s
=> "exa \n mple"

(display s)
=> exa
    mple 
```

在上面的代码片段中，我`string-append`将两个字符串连接在一起，中间有一个换行符。当您使用它时，生成的字符串`s`将在中间有一个换行符，例如通过显示它。

显然它会显示为`"exa \n mple"`，你不能期望字符串从一行跳到另一行，*除非*你显示它，打印它，显示它，写它等等。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-11-12T20:04:30.913

对于那些来这里寻找如何执行类似于 Java`println`或 Python 的`print`在行尾添加换行符的人来说，racket 有一个名为的函数`displayln`可以做到这一点。更复杂的类 C 格式打印可以在 Racket 中使用 来完成`fprintf`，其中看起来像 '~n' 被解释为换行符。

许多 Racket 的打印功能都记录在这里：[https ://docs.racket-lang.org/reference/Writing.html](https://docs.racket-lang.org/reference/Writing.html)

# visual-studio - 如何使用 VS2012 自带的 InstallShield LE 强制重启

> ID：15423976
> 
> 赞同：2
> 
> 时间：2013-03-15T03:05:16.500
> 
> 标签：visual-studio, setup-project, setup-deployment, installshield-le

如何在我的应用程序安装结束时强制重启？是的，我 100% 确定我有正当理由。但我似乎无法弄清楚如何让它重新启动。

我正在使用 Visual Studio 2012 附带的 IntallShield Limited Edition 产品。如果我转到自定义操作窗口，当我右键单击该项目以了解设置完成时，我尝试选择安排重启的选项，它是灰色的！

我认为这是因为我还没有支付 InstallShield 4500 美元？强制重启的最简单方法是什么（免费）。

谢谢，JP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:05:18.527

我还没有查看这是否是限量版，但在其他版本中，InstallShield 会限制`ScheduleReboot`属性的操作`ISSCHEDULEREBOOT`。如果您可以设置`ISSCHEDULEREBOOT`（例如通过自定义操作），那将是比直接这样做更好的重启机器的方法，因为它会询问用户并本机支持正常的 Windows Installer 重启相关属性。

# java - 如何使用 javassist 更改字段的初始值

> ID：15423981
> 
> 赞同：5
> 
> 时间：2013-03-15T03:05:48.637
> 
> 标签：java, javassist

我正在尝试在我的开发环境中模拟一些服务。serviceFactory 代码类似于：

```
public class ApiFacadeImpl implements ApiFacade {
private OneService oneService = null;
    public OneService getOneService(){
        if(oneService==null) {//some initialization steps }
        return oneService;
    }
} 
```

我知道这家工厂没有很好的编码和设计。但是我不能修改它的代码。我的想法是更改字节码，因此我可以将其重新定义为：

```
public class ApiFacadeImpl implements ApiFacade {
private OneService oneService = new MyMockOneService();
    ....
} 
```

**我的第一个问题是：这可能使用 javassist 吗？如何？**

由于我找不到使用 google 使用 javassist 重新初始化字段之类的东西，我尝试自己删除并重新创建它：

```
 CtField oneServiceField = cc.getDeclaredField("oneService");
    cc.removeField(oneServiceField);
    CtField f = CtField.make(String.format("private %s %s=new %s();",
            oneServiceField.getType().getName(), "oneService",
            mockClass.getCanonicalName()), cc);
    cc.addField(f);
    cc.toClass(); 
```

然后我得到了例外：

```
javassist.CannotCompileException: by java.lang.ClassFormatError: Invalid length 99 in LocalVariableTable in class file com/Test
at javassist.ClassPool.toClass(ClassPool.java:1051)
at javassist.ClassPool.toClass(ClassPool.java:994)
at javassist.ClassPool.toClass(ClassPool.java:952)
at javassist.CtClass.toClass(CtClass.java:1079) 
```

**我的第二个问题是为什么这个例外？哪一步违反了java类的定义？当我删除该字段时，javassist 是否有助于删除以下字段引用：**

```
public OneService getOneService(){
        if(oneService==null) {//some initialization steps }
        return oneService;
    } 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T06:34:20.857

对于问题 #1，是的，您可以通过 modify`ApiFacadeImpl`的构造函数来实现。记得使用`CtConstructor#insertAfter`追加赋值语句。

```
ClassPool pool = ClassPool.getDefault();
CtClass factoryClass = pool.getCtClass("ServiceFactory");
CtConstructor constructor = factoryClass.getDeclaredConstructor(null);
String setMockStatement = String.format("service = new %s();",
        MockServiceImpl.class.getCanonicalName());
constructor.insertAfter(setMockStatement);
factoryClass.toClass();
new ServiceFactory().getService().say(); 
```

我尝试了你提议的方式。但是，它没有用。经过一些调试，我发现如果我们删除一个字段，它不会删除该字段的初始化语句。如果我们用我们预期的初始化语句再次添加该字段，它将在原始初始化语句之前执行。因此，该`service`字段首先分配给`MockServiceImpl`，然后分配给`null`。请参考以下 javassist 错误。

[javassist-3.14.0-GA - 使用 removeField 和 addField、CtField.make 删除和创建类变量时，默认初始化程序中的问题](https://issues.jboss.org/browse/JASSIST-140)

对于问题 #2，我不确定为什么会发生这种情况。你的 javassist 版本是什么？你的 mockClass 是什么样子的？您能否参考以下 javassist 错误？

[Javassist 导致 java.lang.ClassFormatError: Invalid length 561 in LocalVariableTable in class file](https://issues.jboss.org/browse/JASSIST-99)

# .net - .NET Framework 的更高版本是否可以与针对早期版本的应用程序一起使用？

> ID：15423983
> 
> 赞同：0
> 
> 时间：2013-03-15T03:06:10.113
> 
> 标签：.net, windows, .net-4.0, .net-2.0

如果`.NET`应用程序是针对目标编译`.NET 2.0`的，仅`.NET 4.0`安装的 Windows 安装是否允许应用程序执行而没有任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:08:40.547

它们应该是向后兼容的，但存在某些可能导致问题的极端情况。除非你在挑战框架的极限，否则你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:16:49.067

我不会在这里简单地问这个问题，如果应用程序实际上对任何人都有意义，我会实际测试它。这是一个非常简单的测试，并且鉴于您没有提供有关应用程序的信息，任何答案都将类似于“可能，但这取决于”。

**更新：**

您是否通过配置文件强制使用（不存在的）2.0 运行时？

```
<configuration>
   <startup>
      <supportedRuntime version="v2.0.50727"/>
   </startup>
</configuration> 
```

# android - android上1080p资源的文件夹名称是什么？

> ID：15423993
> 
> 赞同：-3
> 
> 时间：2013-03-15T03:08:03.523
> 
> 标签：android

android上1080p资源的文件夹名称是什么？

我知道 mdpi 支持 320x480 hdpi 支持 480x800 xhdpi 支持 720p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:19:01.080

不幸的是，这并不容易。Mdpi、hdpi 和 xhdpi 都是根据屏幕密度选择的——基本上是像素的大小——而不是像素的数量。因此，如果您的 1080p 屏幕非常大，可以想象它是一个 mdpi 屏幕（是的，确实如此）。您可以选择使用 small、normal、large 和 xlarge 作为选择器，但这些选择器的定义并不严格。1080p 的屏幕应该是 xlarge，但 720p 的屏幕也应该是 xlarge。

[http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)上的文档很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:58:15.340

这是一个措辞不佳的问题，但您似乎正在尝试支持新`1080 x 1920`手机的问世。Android 支持的最大像素密度是`480 dpi`，称为`xxhdpi`.

一部手机（对角线 3 英寸 -5 英寸）`1080 x 1920`会落入`xxhdpi`密度，例如三星[Galaxy S4](http://thenextweb.com/mobile/2013/03/15/samsung-galaxy-s-iv-announced/)。`441 dpi`但是，平板电脑 (7"+)`1080 x 1920` **不会是 xxhdpi**，因此不要假设密度与分辨率相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-16T10:04:41.577

您可以清除android中的屏幕尺寸、密度像素。[我找到了 Android 设计师和开发人员](http://vinsol.com/blog/2014/11/20/tips-for-designers-from-a-developer/)教程提示

# web-services - Flex List 显示来自 Web 服务的键值对

> ID：15423994
> 
> 赞同：0
> 
> 时间：2013-03-15T03:08:13.750
> 
> 标签：web-services, apache-flex, wsdl, flex4.5

如何通过从 wsdl Web 服务获取键值对在 Flex 中显示数据列表？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T22:54:17.533

这取决于您的 Web 服务和它提供的数据类型。许多 Web 服务可以将响应作为对象列表返回给您。其他人给你一个结构化的字符串。

在我的示例中，我使用了一个简单的公共天气 Web 服务，它将其 XML 作为字符串返回。

这是一个服务描述：[http](http://www.webservicex.com/globalweather.asmx?wsdl) ://www.webservicex.com/globalweather.asmx?wsdl 这是一个测试页面：[http ://www.webservicex.com/globalweather.asmx?test](http://www.webservicex.com/globalweather.asmx?test)

我使用 GetCitiesByCountry 方法来获取此列表： ![在此处输入图像描述](../Images/e1f1800eacc5ad27141e3637c0aec4e3.png)

//源代码

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init()">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;
        import mx.rpc.CallResponder;
        import mx.rpc.events.FaultEvent;
        import mx.rpc.events.ResultEvent;
        import services.globalweather.Globalweather;

        private var ws:Globalweather = new Globalweather();
        private var getCitiesByCountryCR:CallResponder;

        private function init():void
        {
            getCitiesByCountryCR = new CallResponder();
            getCitiesByCountryCR.addEventListener(ResultEvent.RESULT, onResult);
            getCitiesByCountryCR.addEventListener(FaultEvent.FAULT, onFault);
        }

        private function onResult(evt:ResultEvent):void
        {
            var xml:XML = new XML(evt.result);
            var xmlList:XMLList = xml.Table.City;

            taCities.text = "";
            for each (var item:XML in xmlList)
            {
                taCities.text += item.toString() + String.fromCharCode(13);
            }
        }

        private function onFault(evt:FaultEvent):void
        {
            Alert.show("Fault!");
        }

        protected function getCities(event:MouseEvent):void
        {
            getCitiesByCountryCR.token = ws.GetCitiesByCountry(tiCountry.text);
        }

    ]]>
</fx:Script>

<s:VGroup x="20" y="20" width="330" height="200">
    <s:HGroup verticalAlign="bottom">
        <s:Label text="Enter country name:"/>
        <s:TextInput id="tiCountry" text="France"/>
        <s:Button x="202" y="10" label="Get cities!" click="getCities(event)"/>
    </s:HGroup>

    <s:TextArea id="taCities" height="100%" width="100%"/>
</s:VGroup>

</s:Application> 
```