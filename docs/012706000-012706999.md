# StackOverflow 问答 12706000-12706999

# javascript - 动态字段名称 - 应该怎么做？

> ID：12706011
> 
> 赞同：0
> 
> 时间：2012-10-03T09:53:46.160
> 
> 标签：javascript, html, forms, jquery

请参见下图，我想通过单击“添加更多产品”添加许多我想要的产品，然后将出现 2 个新元素（类别和项目下拉菜单）。这将通过 jQuery 完成，以复制上一个`<li>`并插入一个新的。

创建元素时，动态字段的名称应该是什么？数据将被添加到 $_POST 中，我可以插入到数据库中。

![在此处输入图像描述](../Images/3cd9ca75b71d11db627b8612ab322834.png)

下面的 HTML，请参见动态字段名称（例如：`name="items_2"`、、`name="items_2"`）：我还添加了`current_added_products`字段的隐藏输入。这告诉我当前添加了多少产品。不确定我是否需要这个？

```
<ul>
    <li>
        <label>Category</label>
        <select name="category_1"> 
            <option>CPU</option>
            <option>HDD</option>
        </select>
        <select name="items_1"> 
            <option>Item 1</option>
            <option>Item 2</option>
            <option>Item 3</option>
        </select>
    </li>
    <li>
        <label>Category</label>
        <select name="category_2"> 
            <option>CPU</option>
            <option>HDD</option>
        </select>
        <select name="items_2"> 
            <option>Item 1</option>
            <option>Item 2</option>
            <option>Item 3</option>
        </select>
    </li>
    <li>
        <label></label>
        <input type="hidden" name="current_added_products" value="2" />
        <input type="button" class="add_more_product" value ="Add More Product" />
    </li>
</ul> 
```

另外，在创建元素之前如何获取要添加的下一个数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:09:37.230

试试这个：

```
$('.add_more_product').click(function() {
    var $ul = $('ul:last');
    $ul.clone().find('select').attr('name', function(i, cur) {
        return cur.match(/\D+/g).join('') + (Number(cur.match(/\d+/g).join('')) + 1)
    }).end().insertAfter($ul)
})​ 
```

[http://jsfiddle.net/L7zwn/](http://jsfiddle.net/L7zwn/)

* * *

```
$('.add_more_product').click(function(e) {
    e.preventDefault();
    var $ul = $('ul:last');
    $ul.clone().insertAfter($ul)
}) 
```

[http://jsfiddle.net/U7Zeb/](http://jsfiddle.net/U7Zeb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:12:12.983

你可以给它们一个`name`and `category[]`，`items[]`然后当它们被发布时，你最终会得到一个数字索引的数组，这样你就不必担心在每个新创建的元素上附加一个数字。例如，选择`CPU`with`Item 1`和`HDD`with`Item 2`将导致以下内容一旦发布：-

```
array
  'category' => 
    array
      0 => string 'CPU' (length=3)
      1 => string 'HDD' (length=3)
  'items' => 
    array
      0 => string 'Item 1' (length=6)
      1 => string 'Item 2' (length=6) 
```

这将使添加新的表单元素变得更加容易：-

**html**

```
<ul>
    <li>
        <label>Category</label>
        <select name="category[]">
            <option>CPU</option>
            <option>HDD</option>
        </select>
        <select name="items[]">
            <option>Item 1</option>
            <option>Item 2</option>
            <option>Item 3</option>
        </select>
    </li>
</ul>

<input type="button" class="add_more_product" value ="Add More Product" /> 
```

**jQuery**

```
$(document).ready(function() {
    $('.add_more_product').on('click', function() {
        $('li:last').clone().appendTo('ul');
    });
}); 
```

[这是一个小提琴](http://jsfiddle.net/gyYkN/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:57:11.113

您可以使用`name="item[1]"`, `name="item[2]"`。这将在您的`$_POST['item']`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:17:30.770

您可以使用以下代码替换从副本中获得的 html

```
htmlCopy.replace(/category_[0-9]+/, function(a){
       return "category_"+ (current_added_products+1);
});
htmlCopy.replace(/items_[0-9]+/, function(a){
       return "items_"+ (current_added_products+1);
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-03T10:18:27.793

使用`name`上述答案中描述的 aray 。在数据库中添加更多使用代码，例如，

```
if (!$con){
   die('Could not connect: ' . mysql_error());
}

mysql_select_db($database, $con);

$authors = $_POST['Author'];
foreach($authors as $author) :
$sql="INSERT INTO savetest (type, number) VALUES ('{$_POST['type']}','{$author}')";

if (!mysql_query($sql,$con)){
   die('Error: ' . mysql_error());
}
endforeach; 
```

更多[这篇](https://stackoverflow.com/q/10235971/1564818)文章可以帮助你..

# php - 为 mysql php 格式化 $_GET

> ID：12706014
> 
> 赞同：0
> 
> 时间：2012-10-03T09:53:48.887
> 
> 标签：php, mysql, mysqli

这是我的 php 代码：

```
//Code for fetching content (view-me.php)
<?php
include('connect.php');
$head_title=$_GET['title'];
//echo $head_title;
$head_title=$mysqli->real_escape_string($head_title);
//echo $head_title;
$query="select title,content,pub_date from news where title='$head_title'";
$result=$mysqli->query($query);
if($result){
    while(list($title,$content,$date)=$result->fetch_row())
    {
        echo '<div id="post_my_head">';
        echo "<h1>".$title."</h1></div><br />";
        echo '<div id="posted_date_time">'.$date.'</div>';
        echo '<div id="post_my_content"><p>'.$content.'</p></div>';

    }

    $mysqli->close();
}
else
    {
        echo "Query failed";
    }

?>

//Code for printing content:(news.php)
function print_content()
{
    include('connect.php');
    $query="select title,content,url,pub_date from news order by pub_date desc";
    $result=$mysqli->query($query);
    while(list($title,$content,$url,$date)=$result->fetch_row())
    {
        echo '<div id="post_my_head">';
        echo "<h1><a href='view-me.php?title=".addslashes($title)."' id='my_post_link'>".$title."</a></h1></div><br />";
        //$new_title=str_replace(" ","-",$title);
        //echo "localhost/".$new_title."/";
        echo '<div id="posted_date_time">Published:'.$date.'</div><br /><br />';
        echo '<div id="post_my_content"><p>'.$content.'</p></div>';
    }
    $mysqli->close();
}
print_content(); 
```

它适用于大多数查询。当 $head_title 有单引号或双引号时它会失败。我尝试在 news.php 中使用添加斜杠，但它不起作用。

当 $head_title 类似于“America's Freedom”时，代码将失败。在这种情况下，$title 变为“America”，字符串的其余部分会自动截断。因此 url 变为类似于“localhost/?title=America”而不是“localhost?title=America's Freedom”。mysql 中使用的数据类型是文本。该代码适用于所有没有单引号或双引号的查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:56:22.883

你可以使用[urlencode()](http://php.net/manual/en/function.urlencode.php)和 urldecode 来解决这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:58:09.427

对于 URL，对值进行 URL 编码。为了将该编码的 URL 放入 HTML，HTML 将其转义到顶部：

```
printf('<h1><a href="view-me.php?title=%s" id="my_post_link">%s</a></h1>',
       htmlspecialchars(urlencode($title)),
       htmlspecialchars($title)); 
```

请参阅[伟大的逃避现实（或：使用文本中的文本需要知道的内容）](http://kunststube.net/escapism/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:55:52.387

```
<?php
$str = "Jane & 'Tarzan'";
echo htmlentities($str, ENT_COMPAT);
echo "<br />";
echo htmlentities($str, ENT_QUOTES);
echo "<br />";
echo htmlentities($str);
?> 
```

尝试 htmlentities

# knockout.js - 使用 Knockout foreach 绑定嵌套数组

> ID：12706015
> 
> 赞同：2
> 
> 时间：2012-10-03T09:53:49.210
> 
> 标签：knockout.js

我需要帮助来使用淘汰赛 foreach 绑定嵌套数组。

下面是代码，想知道如何获取 PatAppointments 数组中的元素。

```
 <script language="javascript" type="text/javascript">
 ko.applyBindings({
    "appointment": [{
        "Date": "01\/10\/2012",
        "PatAppointments": [{
            "EndTime": "11:15:00",
            "EventId": null,
            "Facility": "General Physician",
            "PatientID": 23,
            "PatientName": "Vicki"
        }],
        "PatAppointments": [{
            "EndTime": "11:15:00",
            "EventId": null,
            "Facility": "General Physician",
            "PatientID": 23,
            "PatientName": "Scott"
        }]
    }]
});

</script>

<table>
<tbody data-bind="foreach: appointment">
<tr>
    <td data-bind="text: Date">
    </td>
</tr>
<tr>
    <td>
         @*
        <tbody data-bind="foreach: appointment.PatAppointments">
        <tr>
            <td data-bind="text: PatAppointments.PatientName">
            </td>
            <td data-bind="text: PatAppointments.Facility">
            </td>
        </tr>
        </tbody>
        *@
    </td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T13:35:44.963

正如你目前设置的那样，没有 foreach 可以工作。要正确设置您的 PatAppointments，您的对象应如下所示

```
"appointment": [{
    "Date": "01\/10\/2012",
    "PatAppointments": [
    {
        "EndTime": "11:15:00",
        "EventId": null,
        "Facility": "General Physician",
        "PatientID": 23,
        "PatientName": "Vicki"
    },
    {
        "EndTime": "11:15:00",
        "EventId": null,
        "Facility": "General Physician",
        "PatientID": 23,
        "PatientName": "Scott"
    }]
}] 
```

然后正如 gbs 所说，您需要`foreach`在另一个`foreach`绑定中进行绑定：

```
<div data-bind="foreach: appointment">
    <div data-bind="foreach: PatAppointments">
        //Everything you want displayed from each PatAppointment here.
    </div>
</div> 
```

小例子见[小提琴](http://jsfiddle.net/Rynan/A7ppE/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-12T16:00:31.647

我正在使用嵌套数组，其中很难/无用地创建元素来绑定 foreach 语法。我喜欢这样的“无容器控制流语法”：

```
<!-- ko foreach: appointment -->
    <!-- ko foreach: PatAppointments -->
        <span data-bind="text: PatientName"></span>
    <!-- /ko -->
<!-- /ko --> 
```

请参阅它的文档，在“注 4”下 [http://knockoutjs.com/documentation/foreach-binding.html](http://knockoutjs.com/documentation/foreach-binding.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T10:30:02.897

由于您将一个数组嵌套在另一个数组中，因此您需要在 2 个嵌套的 html 元素（div、ul、tr、...）中定义 2 个*foreach*绑定，如下例所示：

```
<div data-bind="foreach: appointment">
    <div data-bind="foreach: PatAppointments">
        <span data-bind="text: PatientName"></span>
    </div>
</div> 
```

# wpf - WPF 从鼠标位置获得视觉效果

> ID：12706020
> 
> 赞同：0
> 
> 时间：2012-10-03T09:54:05.747
> 
> 标签：wpf, adorner

我有一个画布，其中绘制了一些 GraphNodes 并将它们作为 ContentControls 添加到画布中。所有图形节点都有一个装饰器，我用它来绘制从一个节点到另一个节点的连接线。装饰器有一个 OnMouseUp 方法：

```
protected override void OnMouseUp(System.Windows.Input.MouseButtonEventArgs e)
{
    var SourceNode = AdornedElement;
    Point pt = PointToScreen(Mouse.GetPosition(this));
    var DestinationNode = ???
} 
```

在这一点上，我有源节点，我开始在 AdornedElement 中画线，这是初始的 GraphNode。另外，我有释放鼠标的坐标。在这一点之下是另一个GraphNode。如何找到该点下的节点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T08:57:33.383

好的，经过多次研究，我找到了解决方案：

```
protected override void OnMouseUp(System.Windows.Input.MouseButtonEventArgs e)
{ 
   Point pt = PointToScreen(Mouse.GetPosition(this));
   UIElement canvas = LogicalTreeHelper.GetParent(AdornedElement) as UIElement;
   // This is important to get the mouse position relative to the canvas, otherwise it won't work
   pt = canvas.PointFromScreen(pt);
   VisualTreeHelper.HitTest(canvas, null, HitTestResultCallbackHandler, new PointHitTestParameters(pt));            
} 
```

然后用 HitTest 方法找到 GraphNode。请记住，GraphNode 是一个自定义对象。

```
public HitTestResultBehavior HitTestResultCallbackHandler(HitTestResult result)
{
   if (result != null)
   {
      // Search for elements that have GraphNode as parent
      DependencyObject dobj = VisualTreeHelper.GetParent(result.VisualHit);
      while (dobj != null && !(dobj is ContentControl))
      {
         dobj = VisualTreeHelper.GetParent(dobj);
      }
      ContentControl cc = dobj as ContentControl;   
      if (!ReferenceEquals(cc, null))
      {
         IEnumerable<DependencyObject> dependencyObjects = cc.GetSelfAndAncestors();
         if (dependencyObjects.Count() > 0)
            {
                IEnumerable<ContentControl> contentControls = dependencyObjects.Where(x => x.GetType() == typeof(ContentControl)).Cast<ContentControl>();
                if (contentControls.Count() > 0)
                    {
                       ContentControl cControl = contentControls.FirstOrDefault(x => x.Content.GetType() == typeof(GraphNode));
                        if (cControl != null)
                        {
                            var graphNode = cControl.Content as GraphNode;
                            if (!ReferenceEquals(graphNode, null))
                            {
                               // Keep the result in a local variable
                               m_DestinationNode = graphNode;
                               return HitTestResultBehavior.Stop;
                            }
                        }                           
                    }
                }
            }               
        }
    m_DestinationNode = null;
    return HitTestResultBehavior.Continue;
} 
```

# http - 是否值得为二进制通信实现服务器

> ID：12706025
> 
> 赞同：1
> 
> 时间：2012-10-03T09:54:22.180
> 
> 标签：http, tcp, binary

我需要实现两个远程模块/程序之间的通信。客户端发送一个图像，服务器用另一个图像响应。通信必须非常快，服务器必须可靠。多个客户端每秒应同时发送多个请求（图片）。

我想知道有根据的意见。现在，我的问题是：1* TCP 还是 HTTP？

2* 您会实现服务器（打开套接字池等），还是更好地依赖处理通信的良好且成熟的服务器（如 Tomcat），这样您就可以专注于部署的逻辑服务器？

我几乎下定决心要使用成熟的服务器和 HTTP，但我想阅读提示和可能的陷阱。

太感谢了。干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T15:13:59.377

专用服务器将更快并且使用更少的资源。但是，实施起来需要更长的时间。使用 HTTP 网络服务器意味着符合规范（TCP 只是原始数据），但您可以找到一个库。

除非我知道性能是一个紧迫的问题，否则我会选择现有的服务器/库解决方案。保持模块化，如果您确实需要提高性能，您可以随时更换通信模块。

# localization - Struts2 本地化重定向到当前页面

> ID：12706026
> 
> 赞同：1
> 
> 时间：2012-10-03T09:54:24.143
> 
> 标签：localization, struts

[我已经从Localization 1](http://www.tutorialspoint.com/struts_2/struts_localization.htm)和[Localization 2](http://www.mkyong.com/struts2/struts-2-i18n-or-localization-example/.)实现了 Struts2 本地化，但是这两个教程都只展示了如何重定向到与我的要求不同的 index.jsp。

我的要求是当用户单击 addCustomer.jsp 处的本地化链接时，用户将重定向到具有选定区域设置的 addCustomer.jsp，而不是默认页面 (index.jsp)。

如何做到这一点？

编辑

我的链接是这样的：

```
<s:url id="locale_en" action="locale" namespace="/">
    <s:param name="request_locale">en</s:param>
</s:url>
<s:url id="locale_ms" action="locale" namespace="/">
    <s:param name="request_locale">ms</s:param>
</s:url>

<s:a href="%{locale_en}">English</s:a>
<s:a href="%{locale_ms}">Malay</s:a> 
```

我有一个想法，比如将当前页面作为参数传递给 LocaleAction，LocaleAction 将重定向到相应的页面。如何从 Action 中获取参数？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:15:21.870

我已经使用上面的想法解决了这个问题，在每个 jsp 上使用静态映射并使用 LocaleAction 进行查找，然后根据参数返回适当的字符串结果。有更好的主意吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T08:23:39.043

试试下面的代码：

```
<s:url id="localeEN">
  <s:param name="request_locale" >en_US</s:param>
</s:url> 
```

Struts2 链接

```
<s:a href="%{localeEN}" >your text</s:a> 
```

# android - 如何指定在 Intent.createChooser 中显示的内容？

> ID：12706030
> 
> 赞同：0
> 
> 时间：2012-10-03T09:54:44.033
> 
> 标签：android, android-intent

我可以使用以下代码创建选择器：

```
Intent share = new Intent(Intent.ACTION_SEND);
                share.setType("text/plain");
                share.putExtra(Intent.EXTRA_TEXT, "hello");
                startActivity(Intent.createChooser(share, "my title")); 
```

我想发送（假设）这个“你好”，但我想指定应该出现在以这个呼叫开头的活动中`startActivity(Intent.createChooser(share, "my title"));`，它显示了我手机中安装的所有应用程序。我不能把它限制在几个应用程序上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:18:56.180

当您这样做时，所有可以接收您的意图的应用程序都会显示给用户，因此他可以选择他喜欢的应用程序来执行指定的操作。不，您不能将其仅限于少数应用程序。

但是，如果您知道它的活动名称，则可以直接调用某个应用程序。在这种情况下，忽略选择器并创建您自己的对话框，其中包含您想要的应用程序名称的列表视图。当用户选择其中之一时，然后仅向该特定应用程序触发意图。

确保您首先检查用户是否拥有该应用程序。您可以通过在包管理器中查询所有接收特定类型广播（例如：文本广播）的广播接收器来做到这一点。您可以使用以下方法执行此操作：

public abstract List queryBroadcastReceivers (Intent intent, int flags)

开发人员文档在这里： [https ://developer.android.com/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers%28android.content.Intent,%20int%29](https://developer.android.com/reference/android/content/pm/PackageManager.html#queryBroadcastReceivers%28android.content.Intent,%20int%29)

# winforms - 如何在 Windows 窗体中为 Entity Framework CF 创建配置文件？

> ID：12706033
> 
> 赞同：0
> 
> 时间：2012-10-03T09:54:57.697
> 
> 标签：winforms, entity-framework-4, configuration, code-first

如何在 Windows 窗体中创建配置文件并将连接字符串添加到实体框架？我正在使用代码优先方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:20:55.373

右键单击您的 Windows 窗体项目 -> 添加新项目 -> 应用程序配置文件 = `App.config`. 然后将连接字符串添加到文件中，例如对于 SQL Server：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="MyContext"
         connectionString="Server=MyServer; Database=MyDatabase;
                           Trusted_Connection=Yes;"
         providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

这`MyContext`是您的派生上下文类的名称（如果您将该名称传递给`DbContext`构造函数，您也可以将其命名为不同的名称）。`MyServer`是数据库服务器的位置，例如对于 SQL Server Express，它是`.\SQLEXPRESS`. 并且`MyDatabase`是您的数据库的名称。

# jquery - 使用 HotKeys 插件处理 specialKeys

> ID：12706037
> 
> 赞同：0
> 
> 时间：2012-10-03T09:55:18.047
> 
> 标签：jquery, jquery-events, hotkeys, keycode

我试图让[https://github.com/tzuryby/jquery.hotkeys](https://github.com/tzuryby/jquery.hotkeys)工作，但是：

```
$('#myInput').on({
    'keydown.space keydown.left keydown.right keydown.- keydown..' : function(e)
    {
        console.log( e.which );
    }
}); 
```

上面的代码片段响应`space`,`left`和`right`按钮。没有连字符，也没有一个点（靠近 的一个`ctrl`和小键盘一个）调用该事件。

因此，问题是，

**如何定位特殊键，如点 + 小键盘点、小键盘加 + 加、小键盘减 + 连字符、引号、冒号等？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:08:55.940

根据[this](https://github.com/tzuryby/jquery.hotkeys/issues/3)和[this](https://github.com/tzuryby/jquery.hotkeys/issues/7)，keypress 不会触发您正在使用的“热键”版本中的特殊字符。我建议切换到[这个](https://github.com/jeresig/jquery.hotkeys)类似的库，它实际上是 tzuryby 库的一个分支，由 John Resig 编写。

[您可以像这个 fiddle](http://jsfiddle.net/cMKLR/)一样捕获句点键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:14:44.720

要使用带有热键的句点，我添加到`190: "period"`然后我可以将“句点”用于 keydown 事件。我假设同样适用于连字符。`specialKeys``jquery.hotkeys.js`

# c - 在静态库中使用全局变量

> ID：12706039
> 
> 赞同：3
> 
> 时间：2012-10-03T09:55:30.637
> 
> 标签：c, memory-leaks, static-libraries

我正在用纯 C、RHEL 5.5 x64、gcc 版本 4.1.2 20080704 (Red Hat 4.1.2-48) 编写一些代码

我有一个使用 2 个静态库编译的可执行文件。他们每个人都使用一些全局（对于给定的库）数组变量（即在某些 .c 文件中我有一个 `char var1[VAR_SIZE1];`，然后在我使用的 lib 的其他 .c 文件中`extern char var1[VAR_SIZE1];`，以及与第二个 lib 相同的情况）。每个库都放置在它自己的可执行源目录的子目录中。我开始注意到一个库可以将其数据放在另一个库的内存中。为了发现发生了什么，我定义了一个指向第三个库中的一个变量的 void 指针（有问题的两个库都使用了库 3），为这个指针分配了一个 lib1 中的地址并查看了 lib2 中的地址。我现在看到的是：

```
char var1[1000]; /*please mind the length*/
extern void* ptr_to_var2;
printf("var1 addr is %p, var2 addr is %p\n", (void*)&var1, ptr_to_var2); 
```

此代码产生

var1 地址为 0xa11b00，var2 地址为 0xa11e00

如您所见，var1 应该在地址 0xa11ee8 结束，而 var2 的头部位于 VAR1 内存内部。我究竟做错了什么？在静态库中使用全局变量是否有任何限制？我不能将这些变量定义为静态的，因为它们在每个库中的许多文件中都使用，并且使这些变量动态化是一项艰巨的工作（有几十个这样的变量）。

PS当然是初始化了ptr_to_var2。到底发生了什么

```
<lib3>
void* ptr_to_var2;

<lib2>
#include "hdr_with_my_struct_name_definition.h"
my_struct_name var2[5];
extern void* ptr_to_var2;

int func2(){
   ptr_to_var2=(void*)&var2;
   var2[0].fld1=12345;
   return 1;
}

<lib 1>
#include "hdr_with_my_struct_name_definition.h"
char var1[1000];
extern void* ptr_to_var2;

int func1(){
   my_struct_name *temp_var_2=(my_struct_name*)ptr_to_var2;
   printf("%d", temp_var_2[0].fld1);
   memset(var1, '\0', sizeof(var1);
   printf("%d", temp_var_2[0].fld1);
   return 1;
}

<binary>

main(){
   func2();
   func1();
   return;
} 
```

所有这些都返回 12345 0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:07:17.917

```
printf("var1 addr is %p, var2 addr is %p\n", (void*)&var1, ptr_to_var2); 
```

在此，您尝试打印的值`ptr_to_var2`实际上不是它的地址。由于此变量尚未初始化，因此它的值是随机的，可以是任何值。

```
#include<stdio.h>

char v[1000];

void *p1;

int main() {

    printf ("var1 %p, var2 %p  &var2 %p\n", &v[0], p1, &p1);

    return 0;
} 
```

给出：

```
var1 0x601040, var2 (nil)  &var2 0x601428 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:22:15.803

使用该`extern`子句，您告诉编译器在链接时解析该符号。链接后，在二进制文件中将只有一个名为 的符号`ptr_to_var`。当然，您必须确保它在某处被初始化。在您粘贴的代码中，我们无法知道它是否已初始化。虽然看起来你没有。

顺便说一句，试着去`nm`图书馆。您将看到您指定为`extern`未定义（大写字母 u）的符号，除非在库或目标文件中确实定义了它（即，在没有`extern`子句的情况下声明）。

# mysql - ` vs ' mysql 查询 - 有什么区别

> ID：12706041
> 
> 赞同：0
> 
> 时间：2012-10-03T09:55:34.683
> 
> 标签：mysql, phpmyadmin

> **可能重复：**
> [在字段名称周围使用反引号](https://stackoverflow.com/questions/261455/using-backticks-around-field-names)
> [反引号和单引号有什么区别？我可以在上面的查询中使用 IF 语句吗？](https://stackoverflow.com/questions/2122721/what-are-the-differences-between-backtick-and-single-quote-can-i-use-if-stateme)

我只是花了很长时间弄清楚我有 qith 一个 sql 查询的问题，我想要更多信息，因为我似乎无法在其他地方找到有关该主题的任何信息。

我有一个查询

```
INSERT INTO prep_items ('id' ,'description' ,'price' ,'gst' ,'job' ,'stores' ,'item_number' ,'decimal') 
VALUES ('NULL', 'TESTPRODUCT', '22.99', '1', 'PK', 'AB', '666', '1'
); 
```

但是，这不断返回查询的语法错误。在绞尽脑汁将查询与 phpmyadmin 生成的插入数据库的查询进行比较后，我注意到字段名称中的撇号实际上是与 tilda (~) 相同的键上的符号。

这两个符号有什么区别？以及应该在哪里使用 ` 而不是 '（撇号）。

提前致谢。

（我还注意到，如果我将值列表中的 '' 更改为 `，我会收到一条错误消息，提示未知列 'valuename'，这让我相信它仅适用于列列表，但我在哪里可以找到更多信息？）

再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:56:41.223

反引号```引用[标识符](http://dev.mysql.com/doc/refman/5.6/en/identifiers.html)，例如表名和列名。引用标识符通常是可选的，但如果名称包含特殊字符（例如空格）或名称是保留字（例如`desc`），则它是必需的。

```
SELECT id, `desc` FROM yourtable 
```

单引号`'`分隔*字符串文字*。

```
SELECT * FROM yourtable WHERE name = 'Foo' 
```

# php - 弄清楚照片是用哪个设备拍摄的——有可能吗？

> ID：12706043
> 
> 赞同：2
> 
> 时间：2012-10-03T09:55:35.510
> 
> 标签：php, javascript, jquery

问这个问题可能有点奇怪，但我无法通过谷歌得到答案——可能是因为我没有使用正确的关键字，但有没有办法**找出**答案（通过 javascript、jQuery、PHP 或任何其他方式）**从什么设备拍摄照片**（例如：通过网络摄像头或电话或相机等）？

我不确定这是否是问这个问题的正确地方，但如果我在错误的地方，请原谅。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T09:57:39.433

您可以使用[exif_read_data](http://php.net/manual/en/function.exif-read-data.php)

```
$exif = exif_read_data('a.jpg');
var_dump($exif); 
```

*请注意，设备信息并不总是可用*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:01:22.607

> 您想读取 EXIF 数据。对于 PHP，使用[exif_read_data](http://www.php.net/manual/en/function.exif-read-data.php)。样本：
> 
> ```
> <?php
>    $exif = exif_read_data('a.jpg');
>    $model = $exif['Model'];
>    $iso = $exif['ISOSpeedRatings'];
>    $taken = $exif['DateTime'];
> ?> 
> ```

以上来自[Alexn](https://stackoverflow.com/users/41596/alexn)的以下[stackoverflow帖子](https://stackoverflow.com/questions/4485119/how-to-extract-camera-related-information-from-image)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T09:59:36.257

[http://nl3.php.net/manual/en/function.exif-read-data.php](http://nl3.php.net/manual/en/function.exif-read-data.php)

但根据文档，这仅适用于 JPEG 或 TIFF。

PS：Javascript 还是 JQuery？JQuery*是*Javascript（有点）。

# ruby - Ruby如何将32位整数转换为网络字节序？

> ID：12706052
> 
> 赞同：1
> 
> 时间：2012-10-03T09:55:56.787
> 
> 标签：ruby, sockets, endianness

> **可能重复：**
> [如何将 32 位整数转换为网络字节顺序？](https://stackoverflow.com/questions/12571715/how-to-convert-32-bit-integer-to-network-byte-order)

我已经问过“[如何将 32 位整数转换为网络字节顺序？](https://stackoverflow.com/questions/12571715/how-to-convert-32-bit-integer-to-network-byte-order) ”但我仍然不明白这个概念。

我需要以网络字节顺序将数据的长度写入套接字。

例如，如果数据的字节大小为 1024，那么我需要在 Ruby 中将其表示为网络字节顺序。

根据我之前的问题的答案，它将是：

```
[1,0,2,4].pack("NNNN") 
```

但是当我尝试这个时它也有效：

```
[10,24].pack("NN")
[4,2,0,1].pack("NNNN") 
```

正确的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T13:06:54.947

在 Ruby 中将 32 位整数转换为网络字节顺序的正确方法是

```
#[integer].pack("N")
[1024].pack("N") 
```

# db2 - 获取具有不同值的记录以及另一列的最大值

> ID：12706053
> 
> 赞同：1
> 
> 时间：2012-10-03T09:55:58.160
> 
> 标签：db2

我们有一个要求，例如通过过滤一列的不同值以及另一列的最大值来获取表的所有列。

例子：

```
Table A

id name qty
__ __ __

1 Dinesh 10
2 Ramesh 8
3 Dinesh 2
4 Ganesh 3
5 Ganesh 20 
```

在这里获取不同的名称以及 max(qty);

预期输出：

```
1 Dinesh 10
2 Ramesh 8
5 Ganesh 20 
```

谁能说如何在 DB2 查询中实现这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:07:41.283

您可以使用相关的子查询来执行此操作。

```
SELECT T.id, T.name, T.qty
FROM tableA T
WHERE T.qty = (
    SELECT MAX(qty)
    FROM tableA
    WHERE name = T.name
) 
```

但是，请注意，如果有另一条具有相同名称和最大数量的记录（例如`6 Dinesh 10`），则将返回两条记录。这可以通过稍微不同的方式编写查询来解决：

```
SELECT T.id, T.name, T.qty
FROM tableA T
WHERE NOT EXISTS (
    SELECT 1
    FROM tableA
    WHERE name = T.name
        AND qty > T.qty
        OR (id > T.id AND qty = T.qty)
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:16:27.190

//编辑：在acatt评论之后，我理解了要求......

另一种选择是：

```
SELECT t.id, t.name, t.qty
  FROM tableA t
 WHERE (t.name, t.qty) in (
    SELECT q.name, max(q.qty)
    FROM tableA q
    group by q.name
 ) 
```

还考虑到将返回所有具有相同名称和数量的行

# java - 为什么在包含 JXPanel 时 JScrollPane 不起作用？

> ID：12706055
> 
> 赞同：0
> 
> 时间：2012-10-03T09:56:03.543
> 
> 标签：java, swing, jpanel, jscrollpane, swingx

我做了一个非常简单的测试用例：

*   我有一个带有`BorderLayout`(panel1)的全局包含面板
*   这个全局面板包含一个`JScrollPane`(scroll1)
*   这`JScrollPane`包含一个面板，上面有一`BoxLayout`组`PAGE_AXIS`(panel2)

然后我有一小段代码将组件（`JLabel`'s）添加到*panel2*：

```
for (int i = 0; i < 150; i++) {
    panel2.add(new JLabel(String.valueOf(i)));
}
panel2.revalidate(); 
```

有用。现在我想使用我制作的自定义面板，它扩展了`JXPanel`SwingX。所以*panel2*在我的测试用例中看起来像：

```
public class Panel2 extends JXPanel {
} 
```

它不起作用了。滚动条不出现。为什么？`JXPanel`使用within时有什么特别的事情要做`JScrollPane`吗？

编辑：

使用`setScrollableHeightHint(ScrollableSizeHint.NONE);`on后`panel2`，`panel2`根据其中的组件数量调整自身大小，这不是我想要的行为，我希望滚动窗格保持其固定大小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:04:04.817

看看 JXPanel 的 scrollableHeightHint/scrollableWidthHint 属性：它的默认值为 FIT，更改为不适合的模式之一（填充视口）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:01:53.353

滚动条不显示可能是因为里面的`tracksScrollableHeight`or`tracksScrollableWidth`方法`JXPanel`默认返回 true。

请参阅 kleopatra 在[这个](https://stackoverflow.com/questions/12128743/irrelevant-change-of-button-size-in-right-to-left-orientation)问题中的回答。要记住的关键是`ScrollableSizeHint`为您的面板设置适当的值，在这种情况下，它可能是`ScrollableSizeHint.NONE`

# wpf - windows8中的WPF ComboBox自定义

> ID：12706056
> 
> 赞同：1
> 
> 时间：2012-10-03T09:56:04.400
> 
> 标签：wpf, windows, combobox, customization

我正在尝试在 windows8 上自定义 WPF ComboBox 控件。但是在win8上看起来这些自定义对组合框没有任何影响，组合框具有默认外观。

例如

`< ComboBox Height="20" HorizontalAlignment="Left" Background="Red" BorderThickness="1" Name="comboBox1" VerticalAlignment="Top" Width="200" />`

在这里，我为组合框分配了红色背景，但在 win8 上这没有任何效果。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:50:42.073

您可能希望“编辑附加模板”以完全控制组合框。可以通过右键单击 XAML 中的组合框（DesignView）（假设您使用 C# 和 XAML）并转到“编辑附加模板”然后转到“编辑生成的项目容器”然后转到“编辑副本”来完成。这将在“StandardStyles.xml”（默认情况下）中创建一个样式，然后您可以随意修改。为我工作。希望它也适合你。

在样式中，查找 Visual states 并像这样更改背景颜色

```
 <VisualState x:Name="Selected">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerGrid">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#333333"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxItemSelectedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedUnfocused">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerGrid">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#333333"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxItemSelectedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedDisabled">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerGrid">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#333333"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxItemSelectedDisabledForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedPointerOver">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerGrid">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#333333"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxItemSelectedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="SelectedPressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background" Storyboard.TargetName="InnerGrid">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="#333333"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground" Storyboard.TargetName="ContentPresenter">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource ListBoxItemSelectedForegroundThemeBrush}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState> 
```

`#333333`是我给它的值吗？您可以在此处指定“红色”。应该管用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T16:25:23.150

我遵循了 Suny 的建议，但仍然无法获得红色背景，因此我在 Popup 中将背景更改为红色，这有助于我获得红色。

# php - 如何在 PHP 中使用密码保护 pdf

> ID：12706061
> 
> 赞同：4
> 
> 时间：2012-10-03T09:56:14.493
> 
> 标签：php, security, password-protection

> **可能重复：**
> [如何在 PHP 中使用密码保护上传的 pdf](https://stackoverflow.com/questions/12700974/how-to-password-protect-an-uploaded-pdf-in-php)

我有一个网络应用程序，用户可以在其中上传 pdf 文档。是否有一个 php 库可用于对 pdf 文件进行密码保护？我需要该库来保留原始 pdf 的所有方面（即大小、字体、分辨率等）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T09:58:47.223

[下载使用的库：在 PHP 中保护 PDF](http://www.idsecuritysuite.com/blog/wp-content/uploads/fpdi.zip)

```
<?php

function pdfEncrypt ($origFile, $password, $destFile){
//include the FPDI protection http://www.setasign.de/products/pdf-php-solutions/fpdi-protection-128/
require_once('fpdi/FPDI_Protection.php');

$pdf =& new FPDI_Protection();
// set the format of the destinaton file, in our case 6×9 inch
$pdf->FPDF('P', 'in', array('6','9'));

//calculate the number of pages from the original document
$pagecount = $pdf->setSourceFile($origFile);

// copy all pages from the old unprotected pdf in the new one
for ($loop = 1; $loop <= $pagecount; $loop++) {
    $tplidx = $pdf->importPage($loop);
    $pdf->addPage();
    $pdf->useTemplate($tplidx);
}

// protect the new pdf file, and allow no printing, copy etc and leave only reading allowed
$pdf->SetProtection(array(),$password);
$pdf->Output($destFile, 'F');

return $destFile;
}

//password for the pdf file
$password = 'info@domain.com';

//name of the original file (unprotected)
$origFile = 'book.pdf';

//name of the destination file (password protected and printing rights removed)
$destFile ='book_protected.pdf';

//encrypt the book and create the protected file
pdfEncrypt($origFile, $password, $destFile );
?> 
```

# cakephp - 通过在 CakePHP 上使用 JavaScript 创建表单来避免 CSRF 攻击

> ID：12706062
> 
> 赞同：2
> 
> 时间：2012-10-03T09:56:15.980
> 
> 标签：cakephp, cakephp-2.0, csrf, cakephp-2.1, cakephp-2.2

[CakePHP 文档](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html)说要避免 CSRF 攻击，必须在控制器中包含**Security组件，此外，使用****FormHelper**创建表单。

就我而言，我需要使用 JavaScript (jQuery) 创建一些表单字段（例如 textarea），因此我不能为它们使用 FormHelper。

```
$('#body').html('<textarea name="data[post][body]" type="textarea" cols="30" rows="3">'+text+'</textarea>'); 
```

当然，它没有通过安全性并且表单无法提交。

无论如何，我可以创建一个安全的表单，使用 JavaScript 创建一些字段吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:43:41.467

好吧，您有一个选择是解锁这些字段，以便在安全检查中忽略它们。在你看来，写：

```
<?php $this->Form->unlockField('fieldname'); ?> 
```

另一种选择是使用表单助手在表单的隐藏区域中创建要动态添加的表单字段，并仅在需要时显示它们。

# concurrency - 操作系统在调度阻塞进程方面有多聪明？

> ID：12706068
> 
> 赞同：1
> 
> 时间：2012-10-03T09:56:37.310
> 
> 标签：concurrency, scheduling, process

让我们考虑由于信号量 S1 和 S2 而被阻塞的两个进程 P1 和 P2。当第三个进程到来并解除对信号量 S2 的阻塞时，操作系统会知道它应该调度 P2 运行，还是会随机调度一个进程，例如 S1，它不是最优的。它将再次看到 S1 被阻止并尝试安排其他事情

# javascript - 通过电子邮件发送 Div 的内容

> ID：12706071
> 
> 赞同：1
> 
> 时间：2012-10-03T09:56:43.393
> 
> 标签：javascript, email, html

我有一个 div，它的内容是由 JavaScript 生成的。我想知道是否可以通过电子邮件发送 div 的内容？也可以在 JavaScript 中完成还是必须在 PHP 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T09:58:57.193

您不能直接从浏览器中的 JavaScript 发送电子邮件。您需要将信息发送到服务器端（例如 PHP）文件。

您可以使用 来执行此操作`form`，但是您需要一个表单域。

如果是`div`，则应使用 JavaScript。您可以发送请求（使用 AJAX），或者，如果信息简短且不敏感，您可以导航到执行电子邮件发送的 PHP 页面并将信息添加到 URL 字符串。

这是一个非常快速的代码模型。实际上，您应该过滤输入并编写干净的代码等等。

Javascript：

```
window.location.href= "http://www.myDomain.com/email.php?data=" + theData ; 
```

其中*http://www.myDomain.com/email.php*是 php 文件的 url，而*theData*是包含 div 内容的变量。

PHP

```
<?php
  mail("me@myDomain.com", "Content of div", $_GET['data']);  // arguments are: to, subject, body
?> 
```

$_GET['data'] 是上面的 JavaScript 发送的内容。

我没有包含将 div 内容放入变量*theData的 JavaScript*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T09:59:14.007

创建一个带有单个文本区域的隐藏表单，将表单方法设置为 POST 并将操作设置为“mailto:;subject:”，然后提交。表单的内容，即文本区域中的DIV内容将作为正文的一部分作为电子邮件发送出去，并且机器上的默认电子邮件客户端将被打开以实际发送邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T09:59:22.120

这必须在 PHP 中完成，因为 JavaScript 无法发送电子邮件。

你可以用 JavaScript 做什么 - 获取 DIV 内容并将其发送到将发送电子邮件的 PHP 脚本。

如果你有这样的事情：

```
<form action="your_php_script.php" method="POST">
<textarea name="body"></textarea>
<input type="submit" value="Send" />
</form> 
```

然后它将在没有 AJAX 的情况下工作，并将您重定向到**your_php_script.php**传递 textarea 值。

但是如果你想通过 AJAX 发送，可以这样简单地完成并加上一些 JS 代码：

```
$('form').submit(function() {
   var body = $('input[name="body"]').val();
      $.ajax({
         type: 'POST',
         data: 'body='+body,
         success: function() {
            alert('Message was sent');
         },
         error: function(error) {
            alert('Error occured: ',error);
         }
      });
   return false;
}); 
```

在您的 PHP 脚本中，您可以通过以下方式获取值：

```
$body = $_POST['body']; 
```

# android - 在 androidmanifestfile 中更改 android 标签名称和重力

> ID：12706078
> 
> 赞同：0
> 
> 时间：2012-10-03T09:57:09.757
> 
> 标签：android, android-manifest

嗨，我必须开发一个示例应用程序。在这里我希望选择应用程序名称是管理员登录和重力是中心。在这里我必须运行应用程序意味着应用程序名称已成功显示。但重力不适用于我。这里我希望将应用名称对齐为中心。我该怎么做。请给我解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.androidlogin.ws"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AndroidLoginExampleActivity"
        android:label="Admin Login"  android:theme="@style/CustomTheme"   android:gravity="center">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
  </application>

  </manifest> 
```

**编辑：**

```
 <style name="CustomWindowTitleBackground"> 
    <item name="android:background">#093f7c</item> 
    <item name="android:gravity">center</item>
 </style> 
 <style name="CustomTheme" parent="android:Theme"> 
    <item name="android:windowTitleSize">35dip</item>
    <item name="android:windowTitleBackgroundStyle">@style/CustomWindowTitleBackground</item>
 </style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:36:54.323

我检查了你的风格。你在那里指定

```
<item name="android:gravity">center</item> 
```

为`CustomWindowTitleBackground`. 这是不可能的，因为设置重心意味着它将与其父级对齐。所以不可能将布局宽度赋予`fill_parent`.

所以我认为你必须使用自定义 xml 文件并对齐你的标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:01:22.517

定义自定义标题样式/主题。还检查 com.example.android.apis.app.CustomTitle。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:25:33.890

尝试在 AndroidLoginExampleActivity.xml 文件中设置重力

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"   
android:id="@+id/layout" 
android:layout_width="match_parent" 
android:layout_height="wrap_content"  
android:orientation="vertical"
android:gravity ="center" > 
```

或者如果你想在子布局中使用重力，那么在子布局中使用 layout_gravity。

# jquery - 调整大小会破坏我的 div 的位置

> ID：12706080
> 
> 赞同：15
> 
> 时间：2012-10-03T09:57:13.473
> 
> 标签：jquery, html, css

我只使用 div（无图像）创建了一个基本时钟，并且在调整时钟箭头时会中断并处于关闭位置，如下所示：

![在此处输入图像描述](../Images/38c893bca76f5d3e5a7d5d2d42f06962.png)                                     ![在此处输入图像描述](../Images/d29efaf1db4c1a1a37642dc01c4e9edd.png)

为什么会这样？有人可以为我解决这个问题吗？这是一个文件，没有外部文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:37:26.093

首先，哇，真的很棒！

我看到它发生在 Firefox 和 chrome 上。当我将三角形的顶部/底部/左侧/右侧更改为 28-29 像素时，它的位置更好。

我认为它与大小调整方法（或浏览器调整大小错误 - 尽管我不认为这在两种浏览器上都会发生）有关，您是否尝试将 'px' 转换为 'em'，因为 'em' 的意思更好地保持尺寸比例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:37:43.457

哇，印象深刻。我不确定这是否是一个真正的答案，但可以引导您朝着正确的方向前进......

你的意思是当你放大浏览器时？我曾经遇到过一个问题，原来是不同的浏览器如何渲染子像素。它不完全是你的问题，但我认为它非常相似。

此页面描述了该问题：[http](http://ejohn.org/blog/sub-pixel-problems-in-css/) ://ejohn.org/blog/sub-pixel-problems-in-css/ 。

我认为它相关的原因是，如果您进一步放大页面，问题就会消失，然后又会回来。这就是浏览器渲染元素的方式，这些元素从未被设计为以 100% 的比例查看。

你也会注意到，如果你缩小问题，问题是一样的。

**我的建议——别担心！**

# c# - 如何在完整图像上添加水印文字？

> ID：12706084
> 
> 赞同：1
> 
> 时间：2012-10-03T09:57:31.053
> 
> 标签：c#, asp.net

我在我的 Web 应用程序中使用 itextsharp。我必须添加一个水印，从上到下在整个图像上重复。如何在整个图像上添加水印，使用 itextsharp 进行水印是否很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:00:08.503

看到这个：

[http://codeglobe.blogspot.com.es/2009/01/watermarking-image-in-cnet.html](http://codeglobe.blogspot.com.es/2009/01/watermarking-image-in-cnet.html)

# c# - 如果包含 PK 的表被删除，则将 FK 更改为 Null 值

> ID：12706089
> 
> 赞同：0
> 
> 时间：2012-10-03T09:57:47.980
> 
> 标签：c#, sql-server, ado.net

我的数据库中有两个表

> Collection_ (#Id_Collection, Libelle_Collection, Id_Editeur_Editeur)
> 
> 编辑（#Id_Editeur，Libelle_Editeur）

当我想从表“Editeur”中删除一些记录时，它给了我这个错误：

> DELETE 语句与 REFERENCE 约束“FK_Collection_Id_Editeur_Editeur”冲突。冲突发生在数据库“Gestion_bib”、表“dbo.Collection_”、列“Id_Editeur_Editeur”中。该语句已终止。

我知道错误是因为 Collection_ 表中的外键是 Editeur 表中的 PK，我在另一个数据库中使用 Cascade 语句，但我遇到了问题，所以我不喜欢使用它，我也使用了另一个使用 ADO.Net 的方法：

```
for (int i = 0; i < myClass.ds.Tables["Collection_"].Rows.Count; i++)
                        if (valToDelete == myClass.ds.Tables["Collection_"].Rows[i][2].ToString())
                            myClass.ds.Tables["Collection_"].Rows[i][2] = DBNull.Value;
                    SqlCommandBuilder cmb = new SqlCommandBuilder(adapter);
                    adapter.Update(myClass.ds, "Editeur"); 
```

但是当我处理包含许多 FK 的表时，这种方法会变得复杂。

那么，如果我删除了包含 PK 的表，请问还有其他方法可以将 FK 更改为 Null 值吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:05:37.120

尝试使用 SQL 查询执行此操作：

```
Update Collection_ SET  Id_Editeur_Editeur = NULL WHERE  Id_Editeur_Editeur IN 
(CommaSeperatedValuesToDelete); 
```

然后，

```
Delete From Editeur  Where Id_Editeur IN (CommaSeperatedValuesToDelete); 
```

# jquery - 添加类/删除类

> ID：12706093
> 
> 赞同：1
> 
> 时间：2012-10-03T09:58:01.970
> 
> 标签：jquery

{我希望能够在正文中添加一个类，然后删除该类并在单击“a tag”html元素时将其替换为新类，据我所知，添加类，每个点击添加另一个类：

这可以通过检查所选类的链接而不是 .click 来完成

html:

```
<ul id="dates">
<li><a href="#" class="selected">link1</a></li>
<li><a href="#">link1</a></li>
<li><a href="#">link1</a></li>
<li><a href="#">link1</a></li>
</ul> 
```

jQuery：

```
$('ul#dates li a.selected').bind(function() }
            var htmlStr = $(this).html();
            $('body').attr('class', htmlStr);
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:00:41.590

每次只需完全替换类属性：

```
$('ul#dates li a').click(function() {
    var htmlStr = $(this).html();

    if( $(this).is('.selected') ) {
        $('body').attr('class', htmlStr);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:00:37.053

你想要 Jquery`toggleClass`方法

[http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

```
if ($(this).is(".foo"))
{
   $(this).toggleClass("foo", false);
   $(this).toggleClass("bar", true);
}
else
{
   $(this).toggleClass("foo", true);
   $(this).toggleClass("bar", false");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:00:37.027

您可以尝试`data-X`在您的身体上设置一个属性，而不是一个类，例如`$('body').attr('data-clicked-link-html-string', htmlStr);`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:01:32.673

请检查 ：

```
$(document).ready(function(){
    $('ul#dates li a').click(function() {
        var htmlStr = $(this).text();
        $('body').attr('class', '').addClass(htmlStr);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T10:03:35.883

jquery中的addclass方法，在你的css中使用一个预定义的类，只有类名是可以接受的，var htmlStr = $(this).html(); 这得到像 INNERHtml 属性的 html 抓取元素中的所有 html 内容。所以你最好声明一个这样的类：

```
.aClass {
float:left;
} 
```

在jQuery中做：

```
$('body').addClass('aClass'); 
```

# iphone - 核心数据：从多个实体或关系中获取结果

> ID：12706103
> 
> 赞同：5
> 
> 时间：2012-10-03T09:58:40.613
> 
> 标签：iphone, ios, cocoa-touch, cocoa, core-data

我有两个实体。`Employee`实体

```
@interface Employee : NSManagedObject

@property (nonatomic, retain) NSString * dept;
@property (nonatomic, retain) NSString * email;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) Department *deptEmp;

@end 
```

和`Department`实体

```
@interface Department : NSManagedObject

@property (nonatomic, retain) NSString * location;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) Employee *deptEmp1; 
```

我正在尝试使用以下谓词从两者中获取信息

```
NSMutableString *queryString = [NSMutableString stringWithFormat:@"(name = 'Apple') AND (deptEmp1.location like 'Cupertino')"];

NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Employee" inManagedObjectContext:self.managedObjectContext]; 
```

**并且获取请求是**

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
[request setResultType:NSDictionaryResultType]; // NSFetchRequestResultType - NSDictionaryResultType
[request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"Department",nil]];
[request setIncludesSubentities:YES]; 
```

**设置谓词**

```
if(![queryString isEqualToString:@""])
{
        [request setPredicate:[NSPredicate predicateWithFormat:queryString]];
}

NSError *error = nil;
NSArray *returnArray = nil; 
```

**获取结果**

```
@synchronized(self)
{
    returnArray = [self.managedObjectContext executeFetchRequest:request error:&error];
} 
```

但在这里我从来没有得到结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:22:27.587

我不确定您想要实现什么，但如果您想检索`Employee`在特定部门名称和特定位置工作的人员，我将使用以下代码：

```
NSMutableString *queryString = [NSMutableString stringWithFormat:@"deptEmp1.name == %@ AND deptEmp1.location == %@", @"Apple", @"Cupertino"]; 
NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Employee" inManagedObjectContext:self.managedObjectContext];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
[request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"Department",nil]];
[request setIncludesSubentities:YES];

NSArray* returnArray = [self.managedObjectContext executeFetchRequest:request error:&error];
if([returnArray count] > 0) {

   Employee* emp = [returnArray objectAtIndex:0];
   NSLog(@"%@ %@ %@", emp.name, emp.dept, emp.deptEmp.location);
} 
```

*几条笔记*

为什么对请求使用锁定？你设置了反向rel 吗？`Department`也许你需要在and之间建立一个一对多的关系`Employee`？

试着让我知道。

**编辑**

试试这个。我没有注意到您问题中的查询字符串。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"deptEmp1.name == %@ AND deptEmp1.location == %@", @"Apple", @"Cupertino"]; 
NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Employee" inManagedObjectContext:self.managedObjectContext];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
[request setPredicate:predicate];
[request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"Department",nil]];
[request setIncludesSubentities:YES];

NSArray* returnArray = [self.managedObjectContext executeFetchRequest:request error:&error];
if([returnArray count] > 0) {

   Employee* emp = [returnArray objectAtIndex:0];
   NSLog(@"%@ %@ %@", emp.name, emp.dept, emp.deptEmp.location);
} 
```

**编辑 2**

```
NSEntityDescription *entityDescription = [NSEntityDescription entityForName:@"Employee" inManagedObjectContext:self.managedObjectContext];

NSFetchRequest *request = [[NSFetchRequest alloc] init];
[request setEntity:entityDescription];
[request setRelationshipKeyPathsForPrefetching:[NSArray arrayWithObjects:@"Department",nil]];

NSArray* returnArray = [self.managedObjectContext executeFetchRequest:request error:&error];
for(Employee* emp in returnArray) {

   NSLog(@"%@", emp);
   NSLog(@"%@", emp.deptEmp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T13:24:41.430

您需要设置反向关系。您的 Department 对象需要如下所示：

```
@interface Department : NSManagedObject

@property (nonatomic, retain) NSString * location;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *deptEmp1; 
```

就像所有部门都有一个员工集合和一个员工在一个部门工作。

在您的谓词上，您需要将“deptEmp1.name”调整为“deptEmp.name”

# ios - 如何将 CFNetwork 错误转换为 NSURLErrorDomain？

> ID：12706106
> 
> 赞同：3
> 
> 时间：2012-10-03T09:58:47.337
> 
> 标签：ios, nsurlconnection, cfnetwork

NSURLConnection 有一些缺失的功能（和一些小错误！），所以我一直在通过 CFNetwork 重新实现它。我的目标是直接替换 - 相同的输入，相同的输出。

一切都很好，除了......我找不到从 CFNetwork 错误代码映射的方法（[http://developer.apple.com/library/ios/#documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/Networking/Reference/CFNetworkErrors/Reference/reference.html)）到 NSURLError 代码（[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Constants/Reference/reference.html)）

注意：*请*不要告诉我使用 ASIHttpRequest、AFNetworking 等 - 我喜欢它们，我经常使用它们，但是......对于这个特定的项目，除非 Apple 提供，否则*不可能*使用任何第三方代码。

# azure - 在 Azure 中托管 ISAPI DLL 和支持文件

> ID：12706109
> 
> 赞同：0
> 
> 时间：2012-10-03T09:58:52.397
> 
> 标签：azure

我正在尝试找出如何在 Azure 中托管 ISAPI DLL。除了 DLL，我还需要在子目录中部署支持文件（javascript 和 css 文件）。其中两个子目录可以通过 DLL 处理的请求更改其内容，因此我需要确保执行扩展的帐户对这些具有写权限。

似乎所有这一切的关键是使用启动任务调用 appcmd 以某种方式编写所有 IIS 更改的脚本，我认为我需要执行以下操作：-

*   使用我的 ASP.NET 网站部署我的 ISAPI DLL 和支持文件
*   创建一个启动任务，该任务将调用一个批处理文件，利用 appcmd.exe 执行以下操作：-
    *   创建一个专用应用程序池，将其托管管道模式设置为经典，并使用已知用户帐户
    *   创建一个指向我的 ISAPI dll 所在目录的 IIS 应用程序
    *   确保应用程序配置为允许未知 ISAPI 扩展
    *   更改所需子目录的权限，以便与应用程序池关联的用户帐户具有写入权限

我才刚刚开始探索 Azure，所以我对它的体验非常薄弱。我希望实现的目标真的可以实现吗？如果是这样，我在所需步骤方面是否走在正确的轨道上？如果我在习惯处理的传统 IIS 环境中设置此 ISAPI DLL，它们会模仿我需要做的事情，但如果 Azure 的规则不同，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:36:40.907

好吧，这里唯一困扰我的是您正在修改“部署驱动器”上的数据（E：就此而言）。你不应该这样做。

相反，请考虑其他解决方案。您可以创建一个 LocalResource 来保存您的 javascript 和 CSS 文件。然后，当你的角色开始时（Richard 有一个关于启动任务的有效观点），使用 ServerManager 类执行以下操作：

1.  注册[ISAPI](https://stackoverflow.com/questions/8729879/add-an-isapi-filter-to-an-existing-site-with-microsoft-web-administration) dll
2.  在 Azure 创建的网站下添加 2 个虚拟目录，并将它们指向 LocalResource。
3.  修改您的 ISAPI dll 的代码以修改 LocalResource 中的 JS/CSS 文件

在 Web/WorkerRoles 中开发时，您需要记住您应该只操作 LocalResource 中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:11:29.460

看起来顺序不错，但是，启动任务实际上是在 IIS 完全配置之前运行的。RoleEntryPoint 中的“OnStart”事件在 IIS 设置后调用，因此使用 Azure 为您创建的 IIS 应用程序并重新配置它以包含您的 ISAPI 内容可能更容易。

# android - Android：如何在我的列表视图中简单地添加类别/分隔符/部分标题？

> ID：12706120
> 
> 赞同：1
> 
> 时间：2012-10-03T09:59:34.630
> 
> 标签：android, listview, categories

我使用这种方式制作了一个列表视图：

```
String[] list = {"1","2","3","A","B","C"};

Widget_List_Adapter adapter = new Widget_List_Adapter(this, list);

//set the onItemClickListener as usual
getListView().setOnItemClickListener(this);

//set our custom list item listener for the extra functions
adapter.setListener(this);

setListAdapter(adapter); 
```

现在我怎样才能简单地添加一些类别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:10:28.017

根据您的要求，我认为实现可扩展列表视图更容易。检查教程： http: [//www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/](http://www.coderzheaven.com/2011/04/10/expandable-listview-in-android-using-simpleexpandablelistadapter-a-simple-example/)

希望这会有所帮助。干杯！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:03:37.640

您必须维护自定义适配器以将类别实现到您的列表视图中。看看这个[教程](http://w2davids.wordpress.com/android-sectioned-headers-in-listviews/)

# c++ - 如何获取YUV帧的分辨率

> ID：12706126
> 
> 赞同：-3
> 
> 时间：2012-10-03T09:59:57.020
> 
> 标签：c++, yuv

我有一个 .yuv 文件并想使用 C++ 读取它。问题是我不知道它的分辨率。那么，有什么方法可以从 yuv 文件中获取分辨率吗？

另外，我不知道帧数。因此，我不能使用 ftell() 并将其除以总帧数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T10:28:08.653

据我所知，没有`.yuv`文件格式。一些程序使用该扩展名来存储原始数据，但它不是一种格式。因此，除非您已经知道元数据，否则无法使用该文件。

您需要提前知道色度样本是否与亮度样本交错或单独存储，以及是否有任何位填充和/或任何行填充，以便能够从文件中读取数据。

然后，您还需要提前了解帧分辨率、色度二次采样和色彩空间，以便能够正确处理该数据。

# google-chrome - 谷歌浏览器图标渲染

> ID：12706129
> 
> 赞同：0
> 
> 时间：2012-10-03T10:00:07.240
> 
> 标签：google-chrome

在我的网站中，我在 Google Chrome 中正确呈现图标时遇到问题，如图所示。

![在此处输入图像描述](../Images/3c098cb7829362712936f141f4752989.png)

如您所见，图像的右侧和底部边缘似乎被切断了。但相同的图标在包括 IE、FF、Safari 在内的所有其他浏览器中都能正常呈现。

以下是相同的 Mozilla 屏幕截图。

![在此处输入图像描述](../Images/ed36aafda3446ea6c457c6552a98253d.png)

实际上图标的尺寸非常大，大约 1000 X 1000 像素，我在 100 X 100 像素的区域中显示。问题是我无法缩小图像，我只能使用这些图像。

在 chrome 中，当我放大或缩小我的网站时，它会暂时正确呈现，但过了一段时间又会呈现如上所示。

有什么可能的解决方案吗？

谢谢你的时间！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:51:08.500

我已经通过使用`image-rendering`css 属性自己解决了这个问题。

# php - 对流感到困惑

> ID：12706132
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:00:09.030
> 
> 标签：php, windows, batch-file, operating-system

我在 Windows 中运行一个命令，例如：

`command.exe > file.txt`

我在文件中得到一个文本，但是当我`command.exe`直接运行时，它不会在控制台上显示该文本。该命令应该输出到`stdout`，但它没有。有没有一种方法可以找出文本进入哪个流并使用`php`.

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:26:17.103

在 PHP 中运行 shell 命令就像调用[shell_exec()](http://php.net/manual/en/function.shell-exec.php)或那里的任何链接函数。该命令的输出转到文档所说的位置。

例如 passthru() 将输出直接发送到浏览器。

# ruby-on-rails-3 - Rails 3.1 一个路径的多个控制器

> ID：12706143
> 
> 赞同：0
> 
> 时间：2012-10-03T10:00:42.363
> 
> 标签：ruby-on-rails-3

我们有两个模型、区域和商店，我们希望它们运行在相同的路径上：www.mysite.com/the_name_of_the_thing_here

我们想要做的是通过区域表进行匹配以显示区域页面，如果没有匹配，则通过商店表并显示商店页面。我们不太确定将这个逻辑放在哪里（在区域控制器中？）以及如何切换控制器。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:17:23.747

我认为您可以为此使用控制器操作，例如

```
@area = Area.find_by_name(params[:name])
@store = Store.find_by_name(params[:name])
if @area
  redirect_to area_path(@area)
elsif @store
  redirect_to store_path(@store)
else
  redirect_to help_url
end 
```

如果您想更改内容，请仅使用您定义变量的其他控制器方法：

```
@thing = Area.find_by_name(params[:name]) || Store.find_by_name(params[:name]) 
```

并将其传递给查看

```
<%= thing.name %> 
```

# python - 如何在python中模拟const变量

> ID：12706145
> 
> 赞同：1
> 
> 时间：2012-10-03T10:00:57.940
> 
> 标签：python, python-3.x, constants

您好，我正在尝试使用[在 Python 中创建常量](https://stackoverflow.com/questions/2682745/creating-constant-in-python)（在链接的第一个答案中）中找到的这个示例在 python 中创建一个常量，并将实例用作模块。

第一个文件 const.py 有

```
# Put in const.py...:
class _const:
    class ConstError(TypeError): pass
    def __setattr__(self,name,value):
        if self.__dict__ in (name):
            raise self.ConstError("Can't rebind const(%s)"%name)
        self.__dict__[name]=value
import sys
sys.modules[__name__]=_const() 
```

其余的例如到 test.py。

```
# that's all -- now any client-code can
import const
# and bind an attribute ONCE:
const.magic = 23
# but NOT re-bind it:
const.magic = 88      # raises const.ConstError
# you may also want to add the obvious __delattr__ 
```

尽管我做了 2 处更改，因为我使用的是 python 3，但我仍然遇到错误

```
Traceback (most recent call last):
  File "E:\Const_in_python\test.py", line 4, in <module>
    const.magic = 23
  File "E:\Const_in_python\const.py", line 5, in __setattr__
    if self.__dict__ in (name):
TypeError: 'in <string>' requires string as left operand, not dict 
```

我不明白第 5 行错误是什么。谁能解释一下？纠正这个例子也很好。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:04:57.203

这看起来很奇怪（它是从哪里来的？）

```
if self.__dict__ in (name): 
```

不应该

```
if name in self.__dict__: 
```

这解决了你的例子

```
Python 3.2.3 (default, May  3 2012, 15:51:42)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import const
>>> const.magic = 23
>>> const.magic = 88
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "const.py", line 6, in __setattr__
    raise self.ConstError("Can't rebind const(%s)"%name)
const.ConstError: Can't rebind const(magic) 
```

你真的需要这个 const hack 吗？许多 Python 代码似乎在没有它的情况下也能正常工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T10:04:23.690

这一行：

```
 if self.__dict__ in (name): 
```

应该

```
 if name in self.__dict__: 
```

...您想知道属性是否在字典中，而不是字典是否在属性名称中（这不起作用，因为字符串包含字符串，而不是字典）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T11:10:51.047

也许[kkconst - pypi](https://pypi.python.org/pypi/kkconst)是您搜索的内容。

支持 str、int、float、datetime const 字段实例将保持其基本类型行为。与 orm 模型定义一样，BaseConst 是管理 const 字段的常量助手。

例如：

```
from __future__ import print_function
from kkconst import (
    BaseConst,
    ConstFloatField,
)

class MathConst(BaseConst):
    PI = ConstFloatField(3.1415926, verbose_name=u"Pi")
    E = ConstFloatField(2.7182818284, verbose_name=u"mathematical constant")  # Euler's number"
    GOLDEN_RATIO = ConstFloatField(0.6180339887, verbose_name=u"Golden Ratio")

magic_num = MathConst.GOLDEN_RATIO
assert isinstance(magic_num, ConstFloatField)
assert isinstance(magic_num, float)

print(magic_num)  # 0.6180339887
print(magic_num.verbose_name)  # Golden Ratio
# MathConst.GOLDEN_RATIO = 1024  # raise Error, because  assignment allow only once 
```

更多详细用法你可以阅读pypi url： [pypi](https://pypi.python.org/pypi/kkconst) or [github](https://github.com/kaka19ace/kkconst)

相同的答案：[在 Python 中创建常量](https://stackoverflow.com/questions/2682745/creating-constant-in-python/34433971#34433971)

# asp.net - 如何检查是否设置了 aspnet 配置文件变量？

> ID：12706150
> 
> 赞同：0
> 
> 时间：2012-10-03T10:01:13.813
> 
> 标签：asp.net, asp.net-profiles

我正在使用 asnet 会员资格。有一个名为 member 的角色。在根目录中有一个站点访问者页面，在页面加载的那个页面上，我想检查成员是否已登录，即配置文件变量是否已设置。我该如何检查？

我也在谷歌上搜索，但没有得到正确的答案。

我正在设置个人资料 -

```
 HttpContext.Current.Profile.SetPropertyValue("UserName", UserName); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:12:52.337

如果您需要按照您的指示查找已登录的用户，***我想检查成员是否已登录***

您可以使用[HttpContext.User 属性](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)

```
System.Web.HttpContext.Current.User 

if(User.Identity.IsAuthenticated) 
```

# delphi - XE2 中的搜索行为不一致？

> ID：12706153
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:01:20.677
> 
> 标签：delphi, delphi-xe2

在文件中查找（项目中的所有文件，无正则表达式）：“整数（”
（“”不是搜索词的一部分）选中“仅全词”返回以下 6 行：

```
PlanRoutines.BekijkRefplan( Integer( Items.Objects[ ItemIndex ] ));
PlanRoutines.BekijkRefplan( Integer( Items.Objects[ ItemIndex ] ));
Result := Integer( ComboBoxStatus.Properties.Items.Objects[ ComboBoxStatus.ItemIndex ] );
LNieuweStatus := Integer( ComboBoxNieuweStatus.Properties.Items.Objects[ ComboBoxNieuweStatus.ItemIndex ] );
LVanafStatus  := Integer( ComboBoxVanafStatus.Properties.Items.Objects[ ComboBoxVanafStatus.ItemIndex ] );
LTotStatus    := Integer( ComboBoxNieuweStatus.Properties.Items.Objects[ ComboBoxTotStatus.ItemIndex ] ); 
```

怎么来的？

我希望第一次搜索找不到*任何*结果（发生这种情况时我不小心检查了 WWO）

在未选中 WWO 的情况下，搜索“Integer(”（注意前面的多余空格）Delphi 会找到大约 100 行，包括上面提到的 6 行。

甚至搜索对话框本身也有奇怪的行为：如果我在搜索编辑中复制或键入“Integer(”，然后在前面插入一个空格，光标会跳到“Integer(”的末尾。
如果我键入另一个，则不会发生这种情况“Integer(”前面的字符，或者如果我在例如“string”、“string(”或“String(”)前面键入一个空格

任何人都可以确认吗？我的 Delphi XE2 Update 4 Hotfix 1 (16.0.4504.48759) 在做什么（Win7 64 位）？

没什么大不了的，就是好奇。

（最初的搜索结果是错误的，但我不会故意进行该搜索。WWO 仍然从以前的搜索中检查）。

令我惊讶的其他示例：打开 WWO，搜索“TMyEventHandlers”。-> 0 个结果，搜索 ":= true" -> 0 个结果，搜索 "true)" -> 大量结果，搜索 "(Sender:" -> 0 个结果。我不明白 Delphi 在这里的行为。我唯一的现在可以得出的结论是“最好确保在检查 WWO 时搜索字符串中只有字符/数字”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:29:02.627

> 然后在前面插入一个空格，光标跳到"Integer("

无法确认。奇迹般有效。win7 x64 / XE2 u4hf1 / Ide FixPack 5.0 / VersionCopntrol-Plus SVN

* * *

> 我希望第一次搜索找不到结果基本上没有什么实际意义。为什么要搜索找到零结果？测试IDE？

对我来说，我制定 WWO 行为相当简单 - 从模式的左右两边都应该是不同的单独术语。在括号内 - 有那些。

# c# - 在类定义中强制优先选择重载？

> ID：12706158
> 
> 赞同：3
> 
> 时间：2012-10-03T10:01:30.287
> 
> 标签：c#, overloading, optional-parameters, overload-resolution

我有一个通用类。它有 2 个构造函数。这些在我组织的代码库中被广泛使用。

```
class MyClass<T> {
  MyClass() { ... }
  MyClass(T defaultValue) { ... }
} 
```

我想添加一些功能但保持向后兼容。所以我想为每个构造函数引入一个新的布尔可选参数：

```
class MyClass<T> {
  MyClass(bool someFlag = false) { ... }
  MyClass(T defaultValue, bool someFlag = false) { ... }
} 
```

但是，我已经有一堆用法，其中 T 是布尔值并传递了一个默认值：

```
class Usage {
  MyClass<bool> Booly = new MyClass<bool>(false);
} 
```

现在，根据重载偏好法则 - 编译器将所有此类构造函数的用法与重载接受联系起来`someFlag`，因为类型化方法“知道得更好”。虽然在大多数情况下都非常合理，但这显然破坏了我的向后兼容性。

我的问题很简单：是否有可用的语言功能来*覆盖*默认的重载偏好法则，并将旧的通用重载定义为首选，这样我就不必更改所有这些用法？

当然，这种设计的一个缺点是，每当我想调用第一个重载（只有`someFlag`参数）时，我都必须按照 C# 4 规范指定一个命名参数。

也欢迎对其他设计提出建议，但请先尝试回答我的问题:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T15:02:47.007

一般来说？不。

一个特定的...“解决方法”...在您的情况下可能是可以接受的？使可选参数 a `bool?`，而不是 a `bool`。

`new MyClass<bool>(false)`会打电话给你的`defaultValue`超载。

`new MyClass<bool>(someFlag: false)`将调用另一个重载。

也就是说，如果您有任何现有的`new MyClass<bool?>(false)`呼叫，这将改变*它们*。

您可以通过创建一个专门用于使您的标志不是布尔值的类来克服*这个问题：*

```
public struct FakeBool
{
    private readonly bool val;
    private FakeBool(bool val) { this.val = val; }
    public static implicit operator bool(FakeBool f) { return f.val; }
    public static implicit operator FakeBool(bool f) { return new FakeBool(f); }
}

public MyClass(FakeBool someFlag = default(FakeBool)) { ... }
public MyClass(T defaultValue, FakeBool someFlag = default(FakeBool)) { ... }

var b2 = new MyClass<bool>(true);            // calls two-argument constructor
var b1 = new MyClass<bool>(someFlag: true); // calls one-argument constructor 
```

但这越来越愚蠢。（另外，我不知道如何获得默认值*true* - 任何想法，有人吗？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:54:49.097

假设您可以拥有一个`Initialize()`可以从每个构造函数调用的类型方法，那么最好的办法是拥有三个构造函数：

```
MyClass() { Initialize(null, false); }
MyClass(T default, bool someFlag = false) { Initialize(default, someFlag); }
MyClass(bool someFlag)
{
   if (typeof(T) == typeof(bool))  Initialize(someFlag, false);
   else Initialize(null, someFlag);
}

private Initialize(T default, bool someFlag)
{ 
   // Do whatever
} 
```

# linq - LINQ to Entities 无法识别方法 'Char get_Chars(Int32)' 方法，并且此方法无法转换为存储表达式

> ID：12706160
> 
> 赞同：0
> 
> 时间：2012-10-03T10:01:35.787
> 
> 标签：linq, linq-to-entities

我只想从字符串中选择具有字段“1”的记录`eventTriggers`（看起来像这样：“00100010”）

我已经尝试并成功完成了超过 1 个电话.. 但我怀疑它的效率。基本上我想要这样的东西......但显然LINQ不支持这个。
( `LINQ to Entities does not recognize the method 'Char get_Chars(Int32)' method, and this method cannot be translated into a store expression.`)

```
 using (var service = new dB.Business.Service.BaseBusinessService<memo>())
   {
      List<memo> result = service.Repository.GetQuery().Where(p => p.ID == ID && p.eventTriggers[index] == '1').ToList();
   } 
```

对正确解决方案的任何提示？谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-12-05T22:22:28.387

我有同样的问题并用子字符串解决了它。

```
ervice.Repository.GetQuery().Where(p => p.ID == ID && p.eventTriggers.Substring(index,1) == "1").ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:44:13.360

EF 无法将 char 数组操作转换为有效查询。怎么样

```
IEnumerable<Memo> memos
using (var service = new dB.Business.Service.BaseBusinessService<Memo>())
{
    memos = service.Repository.GetQuery()
                    .Where(p => p.ID == ID).AsEnumerable();
}

var result = memos.Where(m => m.eventTriggers[index] == '1').ToList(); 
```

这会在本地获取所有具有匹配 ID 的备忘录，然后在 eventTriggers 数组上进行过滤。

* * *

或者，您可以将 eventTriggers 转换为数值并使用位掩码，这可能是一个更快的查询。

Linq看起来像这样，

```
using (var service = new dB.Business.Service.BaseBusinessService<Memo>())
{
    result = service.Repository.GetQuery()
                 .Where(p => 
                         p.ID == ID
                     &&
                         m.eventTriggers & mask != 0).ToList();
} 
```

* * *

[更多例子在这里](https://stackoverflow.com/questions/4696169/c-sharp-ef-linq-bitwise-question)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-30T05:44:40.183

解决了：

```
using (var service = new dB.Business.Service.BaseBusinessService<memo>())
   {
      List<memo> result = service.Repository.GetQuery().Where(p => p.ID == ID && p.eventTriggers.Contains('1')).ToList();
   } 
```

# arrays - 在 TypeScript 中，如何声明一个接受字符串并返回字符串的函数数组？

> ID：12706161
> 
> 赞同：25
> 
> 时间：2012-10-03T10:01:38.973
> 
> 标签：arrays, function, typescript

**更新**- 这个问题的上下文是 TypeScript 1.4 之前的。从那个版本开始，我的第一个猜测就得到了语言的支持。请参阅答案的更新。

* * *

我可以声明`f`为一个接受字符串并返回字符串的函数：

```
var f : (string) => string 
```

我可以声明`g`为一个字符串数组：

```
var g : string[] 
```

如何声明`h`为“接受字符串并返回字符串的函数”的数组？

我的第一个猜测：

```
var h : ((string) => string)[] 
```

这似乎是一个语法错误。如果我去掉多余的括号，那么它就是一个从字符串到字符串数组的函数。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-03T11:00:23.407

我想到了。问题是`=>`for 函数类型文字本身只是语法糖，不想与`[]`.

正如规范所说：

> 形式的函数类型文字
> 
> ( 参数列表 ) => ReturnType
> 
> 完全等价于对象类型字面量
> 
> { ( 参数列表 ) : ReturnType }

所以我想要的是：

```
var h : { (s: string): string; }[] 
```

完整示例：

```
var f : (string) => string

f = x => '(' + x + ')';

var h : { (s: string): string; }[]

h = [];

h.push(f); 
```

**更新**：

从[这个变更集](https://github.com/Microsoft/TypeScript/pull/914)括号来看，1.4 中的类型声明中将允许使用括号，因此问题中的“第一次猜测”也是正确的：

```
var h: ((string) => string)[] 
```

**进一步更新**它在 1.4 中！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T09:19:54.260

根据你的研究，我写了一个小类 PlanetGreeter/SayHello：`

```
/* PlanetGreeter */

class PlanetGreeter {
    hello    : { () : void; } [] = [];
    planet_1 : string = "World";
    planet_2 : string = "Mars";
    planet_3 : string = "Venus";
    planet_4 : string = "Uranus";
    planet_5 : string = "Pluto";
    constructor() {
        this.hello.push( () => { this.greet(this.planet_1); } );
        this.hello.push( () => { this.greet(this.planet_2); } );
        this.hello.push( () => { this.greet(this.planet_3); } );
        this.hello.push( () => { this.greet(this.planet_4); } );
        this.hello.push( () => { this.greet(this.planet_5); } );
    } 
    greet(a: string): void { alert("Hello " + a); }
    greetRandomPlanet():void { 
        this.hello [ Math.floor( 5 * Math.random() ) ] (); 
    } 
} 
new PlanetGreeter().greetRandomPlanet(); 
```

# sql - 通过 SQL 自动删除某些类别中的旧 Wordpress 帖子

> ID：12706162
> 
> 赞同：1
> 
> 时间：2012-10-03T10:01:40.310
> 
> 标签：sql, wordpress, categories, posts

我在另一个线程中找到了以下 SQL 脚本：

```
DELETE FROM `wp_posts`
WHERE `post_type` = 'post'
AND DATEDIFF(NOW(), `post_date`) > 120 
```

此脚本将查找并删除所有超过 120 天的帖子。但是，我想知道这是否也可以仅在某些类别中完成。我想保留某些类别的所有旧帖子，但删除其他类别的所有旧帖子。

另外，如果是这样，有没有办法让这个脚本每天运行？

当涉及到这种事情时，我非常绿色，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:06:28.157

你最好使用 wp_delete_post ( [http://codex.wordpress.org/Function_Reference/wp_delete_post](http://codex.wordpress.org/Function_Reference/wp_delete_post) ) 函数来做你想做的事情，因为数据库中的帖子评论等有很多关系。=> [http://codex.wordpress.org/images/9/9e/WP3.0-ERD.png](http://codex.wordpress.org/images/9/9e/WP3.0-ERD.png)

要每天运行此脚本，您必须在服务器上进行 CRON 作业： [http ://www.thesitewizard.com/general/set-cron-job.shtml](http://www.thesitewizard.com/general/set-cron-job.shtml)

希望能帮助到你

# asp.net-mvc - 如何覆盖 ASP.Net MVC 的默认模型绑定器，以便绑定到不可空值类型的空值不会触发模型验证错误

> ID：12706163
> 
> 赞同：6
> 
> 时间：2012-10-03T10:01:43.380
> 
> 标签：asp.net-mvc, model-binding

我在 ASP.Net MVC 中发现非常令人沮丧的是，默认模型绑定器`Required`在将空（字符串或 null）值绑定到不可为空的值类型时隐式应用注释，而不是简单地将目标保留为默认值，或者至少提供一个选项以允许它成为默认行为。

考虑到将模型上的目标属性类型更改为可空值不方便的情况，我可以使用的最短代码量是多少，以允许默认模型绑定器简单地跳过将空值绑定到不可空值的尝试值类型？我假设我需要 subclass `DefaultModelBinder`，但我不确定我需要重写什么来实现所需的行为。

例子：

```
<input type="text" name="MyField"/> 
```

不带值提交：

```
public ActionResult MyAction(MyModel model)
{
    // do stuff
}

public class MyModel
{
    public int MyField { get; set; }
} 
```

`MyField`应该允许该属性保留其默认值，`0`因为从表单中发布了一个空值。

假设我不能简单地更改属性类型 a `Nullable<int>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T16:31:24.610

这样的事情怎么样？（**免责声明：**未经任何程度的置信测试）

```
public class NonRequiredModelBinder : DefaultModelBinder
{
    protected override object GetPropertyValue(ControllerContext controllerContext, ModelBindingContext bindingContext, PropertyDescriptor propertyDescriptor, IModelBinder propertyBinder)
    {
        var result = base.GetPropertyValue(controllerContext, bindingContext, propertyDescriptor, propertyBinder);
        if (result == null && propertyDescriptor.PropertyType.IsValueType)
            return Activator.CreateInstance(propertyDescriptor.PropertyType);

        return result;
    }
} 
```

这个想法 - 理论上 - 是确定`DefaultModelBinder`分配给属性的值，检查它是否为空值，然后将其分配给`ValueType`正在绑定的默认值。

这应该可以防止 binder 添加`ModelState`错误，并且仍然不会影响其他属性的验证，例如`[Range]`

我建议您更进一步并创建您自己的属性（即`NonRequiredAttribute`）。然后在您的自定义模型绑定器中，您可以检查该属性是否具有新属性，并**仅**在它有的情况下`NonRequired`执行此自定义代码。

# android - 如何在 Android 中不使用 XML 的情况下以编程方式动态应用 FontSize？

> ID：12706166
> 
> 赞同：1
> 
> 时间：2012-10-03T10:01:53.397
> 
> 标签：android, fonts, font-size

> **可能重复：**
> [如何以编程方式更改整个应用程序中的字体大小，Android？](https://stackoverflow.com/questions/12704216/how-to-change-the-font-size-in-a-whole-application-programmatically-android)

这是我的代码：我创建了带有 FontSize 选项列表的 Spinner。如果我单击 FontSize“26”，那么它应该能够更改特定的 FontSize。下面我有一个编辑框。因此，如果我单击字体大小为 40 并且使用比通常粗体的斜体样式。所以我应该能够使用这个选定的“字体”在 EditBox 内输入：FontSize“40”和斜体样式。

我如何在 Android 中以编程方式执行此操作？

```
font=new Spinner(con);
option= new String[] {"Select Font Size","8","10","12","14","16","18","20",
                      "22","24","26","28","30","32","34","36","38","40","50"};
ArrayAdapter<String> adapter= new ArrayAdapter<String>(con,android.R.layout.simple_spinner_dropdown_item,option);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

font.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long id) {
        option[1]="8";
       selectedItem= option[position];
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:09:03.313

改变

textSize 使用`editText.setTextSize(20)`

字体和样式使用`editText.setTypeface(yourTypeFace, Typeface.BOLD)`

**更新**

```
public class MyEditText extends EditText{

public MyEditText(Context context) {
    super(context);
    init();
}

public MyEditText(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}
public MyEditText(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}
void init() {
   this.setTextSize(20);
   this.setTypeface(yourTypeFace, Typeface.BOLD);
}

// method to change font settings
void setFont(TypeFace tf){
   this.setTypeFace(tf);
}
//add whatever method you want
} 
```

然后不要使用`EditText`你使用这个类，并且不要忘记在你的 XML 中使用

```
<yourpackage.MyEditText
     android:layout_height=".."
     android:layout_width=".."
     ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:15:20.907

可能的解决方案是您创建一个扩展 TextView 的基类，并将此文本视图类用作编辑文本。希望您在第一个屏幕上询问尺寸。在任何情况下，您都可以在基类中设置文本大小。这将解决您的问题。

就像你在包 com.example 中创建这个类，类名是 BaseTextView，然后在 xml 文件中而不是你会写

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:38:46.100

首先获取EditBox的id。然后选择项目的位置。据此，您可以制作这样的公式：

```
public void onItemSelected(AdapterView<?> arg0, View arg1,int position, long id) {
    int p=(8+(pos*2));

    editText.setTextSize(p);
} 
```

# requirejs - TypeScript 使用所需的定义编译 AMD 模块

> ID：12706167
> 
> 赞同：8
> 
> 时间：2012-10-03T10:01:57.143
> 
> 标签：requirejs, typescript

在 AMD（在 requirejs 中实现）中，可以定义要作为依赖项包含的模块，例如：

```
define(['require','exports'], function(require, exports) {
  var externalDep = require('path/to/depModule');

  // Use the module somewhere.
}); 
```

我已经尝试过 --module amd 并且它正确输出了 requirejs 可用的 AMD 模块。

是否可以在 TypeScript 源文件的源代码中定义依赖关系，转换为类似于上面示例的内容？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T16:37:41.443

您需要“导出”您的模块；

```
export module depModule { 
    export class A { 
    }
} 
```

这将转换为如下所示的 JavaScript 代码：

```
define(["require", "exports"], function(require, exports) {
    (function (depModule) {
        var A = (function () {
            function A() { }
            return A;
        })();
        depModule.A = A;
    })(exports.depModule || (exports.depModule = {}));
}) 
```

然后你使用“import”来消费它们：

```
module otherModule { 
    import  depModule = module('depModule');
    var a = new depModule.depModule.A();
} 
```

您需要使用 --module AMD 向编译器指定模块代码生成的类型。

# sed - 附加到文本文件 sed 中一行的中间

> ID：12706169
> 
> 赞同：4
> 
> 时间：2012-10-03T10:02:01.980
> 
> 标签：sed

我对 sed 脚本完全陌生。我一直在研究如何将文本添加到文件并设法将我想要添加到文件中正确行的文本但找不到将其添加到正确位置的方法！

所以我在文本文件中的行看起来像这样

```
 listen_addresses = 'localhost, 192.0.0.0' # what IP address(es) to listen on; 
```

我想添加一个 IP，所以该行如下所示：

```
 listen_addresses = 'localhost, 192.0.0.0, 192.0.0.0'  # what IP address(es) to listen on; 
```

通过反复试验，我只有：

```
 sed -i '/listen_addresses/ s/.*/&,192.0.0.0/' testfile 
```

这使：

```
 listen_addresses = 'localhost, 192.0.0.0' # what IP address(es) to listen on; 192.168.0.0 
```

我该如何将它添加到正确的位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T10:13:13.587

有很多方法。其中之一可能是搜索最后一个`'`并使用括号来保存匹配的数据。我将单引号更改为双引号，因为我想在正则表达式中匹配其中一个：

```
sed -i "/listen_addresses/ s/^\(.*\)\('\)/\1, 192.0.0.0\2/" testfile 
```

*   `^\(.*\)`：从行首到行尾匹配（贪婪）。
*   `\('\)`: 从结尾回溯到`'`. 所以它将匹配字符串中的最后一个。
*   `\1`: 保存在第一对括号之间的内容。
*   `, 192.0.0.0`: 字面量字符串。
*   `\2`：保存在第二对括号之间的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:13:34.353

只需替换该`' #`行的一部分：

```
sed -i "/listen_addresses/ s/' #/, 192.0.0.0' #/" testfile 
```

请注意，我使用了双引号，因此可以轻松插入单引号。

# c# - 设置日期创建文件的最佳方式，由文件流下载

> ID：12706171
> 
> 赞同：2
> 
> 时间：2012-10-03T10:02:22.033
> 
> 标签：c#, .net, file, io

我有部分代码使用 FileStream 类从 ftp 服务器下载文件：

```
FileStream outputStream = new FileStream(filePath +
                                        "\\" + fileName, FileMode.Create);

                reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" +
                                        ftpServerIP + "/" + fileName));
                reqFTP.Method = WebRequestMethods.Ftp.DownloadFile; 
```

当我下载这个文件时，我有 FileStream 对象，它有 SafeFileHandle 属性，可能通过这个属性我可以更改这个文件的创建日期，如果有这个操作的例子或一些链接，请写下答案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:05:58.977

您可以使用;

```
File.SetCreationTime(fileName, fileDateTime); 
```

将文件保存到目录后，您必须这样做

# java - 如何计算 XMl 项目中的项目数（节点列表）

> ID：12706172
> 
> 赞同：1
> 
> 时间：2012-10-03T10:02:24.030
> 
> 标签：java, android, xml-parsing

```
ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();
XMLParser parser = new XMLParser();
String xml = parser.getXmlFromUrl(url); // getting XML
int displayPerPage = 5; 
int TotalRows = xml.length();
Document doc = parser.getDomElement(xml); // getting DOM element
NodeList nl = doc.getElementsByTagName(KEY_ITEM);
// looping through all item nodes <item>

for (int i = 0; i < nl.getLength(); i++) {
   // creating new HashMap
     HashMap<String, String> map = new HashMap<String, String>();
     Element e = (Element) nl.item(i);
    // adding each child node to HashMap key => value
    map.put(KEY_NAME, parser.getValue(e, KEY_NAME));
    // adding HashList to ArrayList
    menuItems.add(map);
} 
```

这是我的代码我想计算节点数量我无法做到这一点请告诉我我将如何做[http://api.androidhive.info/pizza/?format=xml](http://api.androidhive.info/pizza/?format=xml)假设这是我的 xml contaion 10 项目或节点我将如何计算请给我发代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:09:33.097

只需使用`nl.getLength()`，它会返回每个标签中的项目数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:14:01.377

你可以使用类似的东西

```
NodeList list = doc.getElementsByTagName("item");
    System.out.println("Total of elements : " + list.getLength()); 
```

看看[这个教程](http://www.mkyong.com/java/how-to-count-xml-elements-in-java-dom-parser/)。

# php - PHP/Javascript 表单在页面进入或返回时重置

> ID：12706175
> 
> 赞同：0
> 
> 时间：2012-10-03T10:03:00.193
> 
> 标签：php, javascript

我有一个标准的 PHP 表单，其中包含一系列复选框、单选、选择和文本。该表单工作正常并进入搜索结果页面。我的问题是，当您在任何浏览器中单击后退浏览器时，搜索页面会显示以前的选择。如何确保后退按钮显示表单就像访问者第一次访问该页面一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:07:28.337

`window.onload`您可以在或 $(document).ready(for jQuery)上重置表单

```
function formReset()
{
       document.getElementById("formId").reset();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:07:49.630

你可以做一件事。

使用 jquery onReady 函数，您可以重置表单。

因此，每当用户按下浏览器页面的返回按钮时，都会重新加载和 onReady 功能，您的表单重置代码将起作用。

```
$(document).ready(function() {
    $('#myform').get(0).reset();

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:14:53.843

你不应该自动重置它。提供一个重置按钮。

后退按钮将用户返回到上一页，处于他离开它的状态。这包括任何形式的设置。我严重依赖此功能，无法计算此后退按钮使我免于失去在文本框中回答问题的努力的次数...

如果用户在您的结果页面上并单击将他**再次**带到搜索页面的链接，但不使用后退按钮，这是一个不同的游戏。

# window - 如何在待机模式或锁定屏幕模式下在 10 分钟后关闭屏幕的窗口上编写脚本

> ID：12706176
> 
> 赞同：1
> 
> 时间：2012-10-03T10:02:59.960
> 
> 标签：window

我计划在窗口上编写一个脚本文件，可以在待机模式或锁定屏幕模式下 10 分钟后关闭计算机屏幕，以节省学校用电。

现在这只是在想法阶段，我没有做任何深入的研究，因为不知道从哪里开始！所以我在这里放了一个新话题：D。希望我能得到你们的支持。

如果有人做过这样的任务，请给我一个建议，告诉我如何开始，应该使用哪种语言或哪些文件，参考看看！

谢谢

# c# - WPF 客户端和服务器之间的 WCF 同步最佳实践

> ID：12706184
> 
> 赞同：1
> 
> 时间：2012-10-03T10:03:36.600
> 
> 标签：c#, wpf, wcf, .net-4.0, sync

我是服务器和客户端之间同步数据的新手，所以我想请教您如何更好地实现它。（最佳实践）。

我创建了 WPF 应用程序，它将从 Web 服务器获取数据（通过 WCF）并将它们存储在本地数据库中。将来我会将新的或编辑的数据发送到服务器。

当我启动我的应用程序时，我需要获取我没有的新数据，但它在服务器上。但是每次获取所有数据都是多余的，所以我只需要获取新数据。服务器上的一些数据也可能发生了变化，所以我也需要获取这些数据。等等。

*问题*：您能否给我一个关于我应该如何做的指导或任何我可以阅读和了解的有用资源？我需要使用一些特定的框架吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:07:58.767

看看[SyncFramework](http://msdn.microsoft.com/en-us/sync/bb736753)。此外，[本](http://msdn.microsoft.com/en-us/library/bb726004.aspx)节将很有用。

# php - PHP中SQL的下拉列表值

> ID：12706185
> 
> 赞同：1
> 
> 时间：2012-10-03T10:03:39.537
> 
> 标签：php, javascript

我想在 php 中执行此功能。我有两个字段，一个是文本框，另一个是下拉列表。下拉列表包含来自 sql 的值。当从下拉列表中选择一个值时，我希望根据所选选项填充文本框。

以下是下拉列表代码，

```
<td>Test Group ID</td>
 <td><select id="testgroupid" name="testgroupid" style="column-width:35">
  <option value="<?php echo $testgroupid;?>"><?php echo $testgroupid;?></option>
   <?php 
   $x=new con();
   $x->connect();
   $retval = "select distinct(Id) from testgroupmaster";
   $sql1 = mysql_query($retval) or die (mysql_error());
   while($res=mysql_fetch_array($sql1, MYSQL_BOTH)){
    ?> 
<option value="<?=$res['Id'];?>"><?=$res['Id'];?></option>
<?
}
?>
  </select></td> 
```

根据id，我想填充文本框，我该怎么做？请帮助朋友。

```
<tr>
<td>Test Group Name</td>
<td><input type="text" name="testgroupname" id="zipsearch" value="<?php echo $testgroupname; ?> "></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:15:45.400

为此，您需要 JavaScript。使用 jQuery（或您最喜欢的库）并将事件侦听器绑定到组合框。

jQuery 示例：

```
$("#myCombo").change(function(e){
    $("myTextField").val( $("#myCombo").val() );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:16:09.853

我有一个涉及 jQuery 的建议。我不知道你是否在使用这个库，但无论如何我都会发布它:)

```
<script type="text/javascript">
     $(function() {
         $("#testgroupid").change(function{
            $("#zipsearch").text($(this option:selected).val();
         });
     });
</script> 
```

在下拉框上发生更改事件时，此函数将触发，并相应地设置 zipsearch-input。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:29:45.067

html

```
 <select id="testgroupid" name="testgroupid" 
style="column-width:35" onChange=filltext();> 
```

javascript

```
function filltext()
{
 var e = document.getElementById("testgroupid");
 var group = e.options[e.selectedIndex].text;
document.getElementById("zipsearch").value= group ;

} 
```

你的 php 代码在这里是错误的

```
<option value="<?=$res['Id'];?>"><?=`$res['Id']`;?></option> 
```

改成

```
<option value="<?=$res['Id'];?>"><?=$res['GROUP_NAME'];?></option> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:16:52.350

我不确定 $testgroupname 来自哪里，但我认为您希望在下拉列表中选择时获得该值。如果您在客户端上没有可用的值，则必须以某种方式从服务器检索它。

您不能使用 PHP 来填充文本框，因为在下拉列表中选择选项时您不会发送帖子。关于如何解决这个问题有很多选择。我会亲自使用 Ajax 来填充文本框而不发布到服务器。

开始的好地方：http: [//buffernow.com/2012/08/cascading-dropdown-ajax/](http://buffernow.com/2012/08/cascading-dropdown-ajax/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T10:18:47.437

像这样试试

```
<script>
    function selecteditem(selectedval)
    {
        jQuery.post("<?php echo JURI::root().'test.php'?>", { id: selectedval },
        function(data) {
            jQuery('.zipsearch').val(data);      
        });
    }
</script>

//test.php on the root
<?php 
    $val=$_POST['id'];

    //do what you want with $val 
    //and say final output is in variable $result than echo it

    echo $result;
?>

<!--html code here-->

<select id="testgroupid" name="testgroupid" style="column-width:35" onclick="selecteditem(this.value);">
    <option value="<?php echo $testgroupid;?>"><?php echo $testgroupid;?></option>
    <?php 
        $x=new con();
        $x->connect();
        $retval = "select distinct(Id) from testgroupmaster";
        $sql1 = mysql_query($retval) or die (mysql_error());
        while($res=mysql_fetch_array($sql1, MYSQL_BOTH))
        {
            ?> 
            <option value="<?=$res['Id'];?>"><?=$res['Id'];?></option>
            <?
        }
    ?>
</select>

<input type="text" name="testgroupname" id="zipsearch" class="zipsearch" value="<?php echo $testgroupname; ?> "> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T10:14:56.573

如果您希望在下拉选择更改后立即填充文本框，最简单的方法是使用 javascript：

```
<td><select id="testgroupid" name="testgroupid" style="column-width:35" 
   onchange='document.getElementsByName("testgroupname")[0].value =   
    document.getElementById("testgroupid").options[e.selectedIndex].value;'> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-04T21:02:34.910

```
<?php
// Assume $db is a PDO object

$dbh = new PDO('mysql:host=localhost;dbname=populatedropdown', "root", "");

$query = $dbh->query("select * from position"); // Run your query

echo '<form action="populate.php" method="get" name="send3">';
echo '<select name="populate">'; // Open your drop down box

// Loop through the query results, outputing the options one by one
while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
   echo '<option value="'.$row['name'].'">'.$row['name'].'</option>';
}

echo '</select>';// Close your drop down box

echo '</form>';

?>

<script language="JavaScript">
         function send_input1(){            
          document.send1.input4.value = document.send3.populate.value;
          }
</script>

<form name="send1" action=javascript:send_input1()>
<p><input type=submit value=Enter>
</p><input size=30 name="input4">
</form> 
```

# url-rewriting - 对 Geoserver 的 IIIS 7.5 URL 重写给出连接重置错误

> ID：12706186
> 
> 赞同：1
> 
> 时间：2012-10-03T10:03:54.353
> 
> 标签：url-rewriting, jetty, iis-7.5, geoserver

我在 Windows 2008 服务器上设置了 Geoserver，使用 Jetty 作为端口 8080 上的 Web 容器。如果浏览到 http://[servername]:8080/geoserver/www/test/test.html，我会得到一个返回为预期的。

然后，我在应用程序池级别使用 ARR 和 URL 重写设置了 IIS 7.5，以设置保留代理。因此 http://[servername]/geoserver.. 被重写为 http://[servername]:8080/geoserver... 我使用 match '.*' 作为 url 和 'geoserver/' 作为条件。

当浏览到“连接重置”IIS http 错误日志 (C:\Windows\System32\LogFiles\HTTPERR) 显示“Connection_Dropped DefaultAppPool”时，这会出现错误

如果我将 url 重写更改为重定向操作，html 页面将按预期显示，但显然 url 显示为重定向到端口 8080。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:07:04.980

通过将 URL 重写更改为使用 .* 作为 URL 匹配条件来解决此问题。

# java - 爪哇游戏。需要在不使用 break 语句或 system.exit 的情况下停止代码

> ID：12706187
> 
> 赞同：0
> 
> 时间：2012-10-03T10:03:55.410
> 
> 标签：java

对于以下代码，我需要通过键入单词“quit”来停止代码，但不使用“break”或“system.exit”语句。任何人都可以帮助我吗？我认为布尔值可以解决这个问题，但我不知道如何使用它。我将退出语句放在循环的前两行，但我不确定它是否属于那里。我在我的学习阶段，所以不要太严格:))

```
import java.util.*;

public class Game {

public static void main (String[]args){

    Game guessing = new Game();
    guessing.start();

}
public void start() {

    System.out.println("Welcome to guessing game!"); 
    System.out.println("Please enter the number between 1 and 1000");

    Scanner input = new Scanner(System.in);
    String playerName;
    String currentGuess;
    String quit = "quit";
boolean playGame = true;
int tries = 0;  //number of times player guessed

int guess = 0;  //number that player inputs

long startTime = System.currentTimeMillis();  //start timer after first guess

int randomNumber = (int) (Math.random() * 999 + 1); // generating random number
System.out.println(randomNumber);     // to be deleted after game is finished

currentGuess = input.nextLine();

do{

if (currentGuess.equalsIgnoreCase(quit)) {

        System.out.println("Thanx for playing");}

    if (currentGuess.matches("[0-9]+")) {
        int PlayerGuessInt = Integer.parseInt(currentGuess);
    }
    else {
    System.out.println("You have netered non-numeric value,please try again");
    currentGuess = input.nextLine();
    continue;
    }

    guess = Integer.parseInt(currentGuess);

    if(guess<1 || guess>1000 ){

        System.out.println("The number is out of range! Please try again");
        currentGuess = input.nextLine();
        continue;
    }

    if (guess>randomNumber){
        System.out.println("Oops,too high!");
        currentGuess = input.nextLine();
        tries++;
    }
    else if (guess<randomNumber){
        System.out.println("Sorry, to low!");
        currentGuess = input.nextLine();
        tries++;
    }

}

while (guess!=randomNumber);

    if (guess==randomNumber){
        tries++;
        long endTime = System.currentTimeMillis();
        long gameTime = endTime - startTime;
        System.out.println("Well done! You won the game in " + tries + " guesses " + "and " + gameTime/1000 +  " seconds!");
        System.out.println("Please enter your name: ");
        playerName = input.nextLine();

        }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:13:53.170

更改您的 while 循环，以便它检查当前猜测的值是否“退出”。这样，当给出退出命令时，它将停止循环，例如

```
while(guess!=randomNumber && !currentGuess.equalsIgnoreCase(quit)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:15:22.620

将 while 放入一个（或所有 if ）中

```
if (currentGuess.equals("quit") {
   playGame = false
} 
```

并将时间更改为：

```
while (guess!=randomNumber && playGame) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:29:43.700

答案是：全局布尔变量：

```
bool userWantsToQuit = false; 
```

所以如果有人输入 int quit （不应该是“退出”，因为它是字符串吗？）

```
if (currentGuess.equalsIgnoreCase(quit)) 
{
    userWantsToQuit = true; // we mark that someone wants to quit
    System.out.println("Thanx for playing"); // we output message
    continue; // skip execution of the rest (or you could use else if)
} 
```

如果 userWantToQuit 为真，则在底部更改 while 语句以停止游戏：

```
(guess!=randomNumber && !userWantsToQuit) 
```

很久没用java了，也没有测试过，但肯定是朝着好的方向发展。

# iphone - 在不丢失格式的情况下更改属性 UILabel 的文本？

> ID：12706188
> 
> 赞同：19
> 
> 时间：2012-10-03T10:03:58.593
> 
> 标签：iphone, ios, xcode, ios6

在情节提要中，我布置了一组带有各种格式选项的标签。

然后我做：

```
label.text = @"Set programmatically"; 
```

并且所有格式都丢失了！这在 iOS5 中运行良好。

一定有一种方法可以只更新文本字符串而不重新编码所有格式？！

```
label.attributedText.string 
```

是只读的。

提前致谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-06-17T00:37:26.093

您可以使用以下方法将属性提取为字典：

```
NSDictionary *attributes = [(NSAttributedString *)label.attributedText attributesAtIndex:0 effectiveRange:NULL]; 
```

然后将它们与新文本一起添加回来：

```
label.attributedText = [[NSAttributedString alloc] initWithString:@"Some text" attributes:attributes]; 
```

这假设标签中有文本，否则你会崩溃，所以你应该先对它进行检查：

```
if ([self.label.attributedText length]) {...} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T10:07:07.480

属性字符串包含其所有格式数据。标签对格式一无所知。

您可以将属性存储为单独的字典，然后在更改属性字符串时可以使用：

```
[[NSAttributedString alloc] initWithString:@"" attributes:attributes range:range]; 
```

唯一的其他选择是再次构建属性备份。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-20T12:58:53.017

虽然是 iOS 编程新手，但我很快就遇到了同样的问题。在 iOS 中，我的经验是

1.  Lewis42 的问题不断出现
2.  josef 关于提取和重新应用属性的建议不起作用：返回一个空属性字典。

环顾四周后，我遇到了[这篇文章](https://stackoverflow.com/questions/14488069/changing-uilabel-text-but-keeping-the-rest-of-the-attributes)并遵循了该建议，我最终使用了这个：

```
- (NSMutableAttributedString *)SetLabelAttributes:(NSString *)input col:(UIColor *)col size:(Size)size {

NSMutableAttributedString *labelAttributes = [[NSMutableAttributedString alloc] initWithString:input];

UIFont *font=[UIFont fontWithName:@"Helvetica Neue" size:size];

NSMutableParagraphStyle* style = [NSMutableParagraphStyle new];
style.alignment = NSTextAlignmentCenter;

[labelAttributes addAttribute:NSFontAttributeName value:font range:NSMakeRange(0, labelAttributes.length)];
[labelAttributes addAttribute:NSParagraphStyleAttributeName value:style range:NSMakeRange(0, labelAttributes.length)];
[labelAttributes addAttribute:NSForegroundColorAttributeName value:col range:NSMakeRange(0, labelAttributes.length)];

return labelAttributes; 
```

# php - PDO 请求只返回一个结果，而应该有更多

> ID：12706193
> 
> 赞同：0
> 
> 时间：2012-10-03T10:04:16.357
> 
> 标签：php, mysql, pdo

我创建了这个函数：

```
<?php

$pdo_db = new PDO( 'mysql:host=' . $db_host . ';dbname=' . $db_name, $db_user_name, $db_password );

function qlist_pdo( $fields, $tables, $where_fields='', $where_values='', $order='', $limit='' ) {

GLOBAL $pdo_db; // ignore this, it will be in class later. This is just for test purposes

if ( $order ) $order = ' ORDER BY ' . $order;
if ( $limit ) $limit = ' LIMIT ' . $limit; 

if ( is_array( $where_fields ) && is_array( $where_values ) && isset( $where_fields ) && isset( $where_values ) ) {

    if ( sizeof( $where_fields ) != sizeof( $where_values ) ) {
        die( "Query error: where <strong>field</strong> count doesn't match <strong>value</strong> count!" );
    } else {

        $where = ' WHERE ';
        foreach( $where_fields as $key => $value ) {
            $where .= $key . ' ' . $value . '=? ';
        }
        $where = substr( $where, 0, -1 );

        echo $query = "SELECT " . $fields . " FROM " . $tables . $where . $order . $limit;
        $qp = $pdo_db -> prepare( $query );

        foreach ( $where_values as $key => $val ) {
            $qp -> bindParam( $key+1, $val );
        }           

    }

} else {
    echo $query = "SELECT " . $fields . " FROM " . $tables . $order . $limit;
    $qp = $pdo_db -> prepare( $query );
}

$qp -> execute();
$result = $qp -> fetchAll();

return $result;

}

?> 
```

我这样称呼它：

```
$result = qlist_pdo( "*", "list", array( '' => 'id', 'OR' => 'id' ), array( '2', '8' ), 'id DESC' ); 
```

它工作正常，但是当我设置 where 参数时，结果只给了我 1 行（应该是 2 ）。如果我在没有像这样的参数的情况下调用它：

```
$result = qlist_pdo( "*", "list", '', '', 'id DESC' ); 
```

它返回所有行。为什么会这样，我做错了什么？

生成的查询：

```
SELECT * FROM list WHERE id=? OR id=? ORDER BY id DESC 
```

生成的参数：

```
1, 2
2, 8 
```

*[编辑]*看起来它只添加了第二个参数。如果我更改`OR`它`AND`仍然会给出一个结果，即使它根本不应该给出任何行（因为不能有 ID = 2 AND ID = 8 选项）。

*[EDIT2]*我设置了查询日志并得到了我的想法。实际查询是`SELECT * FROM list WHERE id='8' OR id='8' ORDER BY id DESC`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:47:49.070

您将参数作为字符串传递，但它们是整数。

我建议以不同的方式传递数组：

```
$result = 
   qlist_pdo( "*", "list", 
   array( '' => 'id', 'OR' => 'id' ), array( 2, 8 ), 'id DESC' ); 
```

您的函数应如下所示：

```
function qlist_pdo( $fields, $tables, $where_fields = '', $where_values = '', $order = '', $limit = '' )
{
  if ( $order )
    $order = ' ORDER BY ' . $order;
  if ( $limit )
    $limit = ' LIMIT ' . $limit;

  if ( is_array( $where_fields ) && is_array( $where_values ) && isset( $where_fields ) && isset( $where_values ) ) 
  {

    if ( sizeof( $where_fields ) != sizeof( $where_values ) ) {
      die( "Query error: where <strong>field</strong> count doesn't match <strong>value</strong> count!" );
    } 
    else {

      $where = ' WHERE ';
      $p = 0;
      foreach ( $where_fields as $key => $value ) {
        $where .= $key . ' ' . $value . '= :p' . $p . ' ';
        $p++;
      }
      $where = substr( $where, 0, -1 );

      echo $query = "SELECT " . $fields . " FROM " . $tables . $where . $order . $limit; // . '<br>';
      $qp = $pdo_db->prepare( $query );

      foreach ( $where_values as $key => $val ) {
        $qp -> bindParam( ":p$key", $val, PDO::PARAM_INT );
        //echo ":p$key" . '<br>';
      }

    }

  } 
  else {
    echo $query = "SELECT " . $fields . " FROM " . $tables . $order . $limit;
    $qp = $pdo_db->prepare( $query );
  }
} 
```

当删除输出的评论时，我得到了这个结果（对我来说似乎没问题）

```
SELECT * FROM list WHERE id= :p0 OR id= :p1 ORDER BY id DESC
:p0
:p1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T06:44:21.763

嗯，这很奇怪，但是绑定参数时似乎需要一个 ref。

代替：

```
foreach ( $where_values as $key => $val ) { 
```

我需要：

```
foreach ( $where_values as $key => &$val ) { 
```

不知道为什么，但是**&**是我唯一需要添加到我的代码中的东西。

# vb.net - 在 vb.net 中的 windows 窗体中级联组合框时出错

> ID：12706199
> 
> 赞同：0
> 
> 时间：2012-10-03T10:04:25.980
> 
> 标签：vb.net, winforms

我收到错误，例如用户代码未处理 FormateException。错误字符串的格式不正确。无法解决这个错误。有什么建议吗？?

我在这条线上遇到错误

```
Dim stateid As Integer = Convert.ToInt32(cmbState.SelectedValue.ToString()) 
```

这是我的完整代码

```
 Public Class Form1
            Private Sub FillState()
                Dim cn As SqlConnection = New SqlConnection("Data Source=192.168.0.7;Initial Catalog=TraineeDataBaseExamples;Persist Security Info=True;User ID=newtrainee;Password=newtrainee")
                cn.Open()
                Dim da As SqlDataAdapter = New SqlDataAdapter(" select * from KaiyumVbState ", cn)
                Dim ds As New DataSet
                da.Fill(ds)
                With cmbState
                    .DataSource = ds.Tables(0)
                    .DisplayMember = "StateName"
                    .ValueMember = "StateID"
                    .SelectedIndex = -1
                End With

            End Sub

            Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
                FillState()
            End Sub

            Private Sub cmbState_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmbState.SelectedIndexChanged
                If cmbState.SelectedValue.ToString() <> "" Then
                    Dim stateid As Integer = Convert.ToInt32(cmbState.SelectedValue.ToString())
                    FillCities(stateid)
                    cmbCity.SelectedIndex = -1
                End If
            End Sub
            Private Sub FillCities(ByVal stateid As Integer)
                Dim cn As SqlConnection = New SqlConnection("Data Source=192.168.0.7;Initial Catalog=TraineeDataBaseExamples;Persist Security Info=True;User ID=newtrainee;Password=newtrainee")
                Dim cmd As SqlCommand = New SqlCommand("select CityId,CityName from KaiyumVbCity where StateID = @Stateid ", cn)
                cmd.Parameters.AddWithValue("@StateId", stateid)
                Dim da As New SqlDataAdapter()
                da.SelectCommand = cmd
                Dim ds As New DataSet()
                cn.Open()
                da.Fill(ds)
                If ds.Tables(0).Rows.Count > 0 Then
                    With cmbCity
                        .DataSource = ds.Tables(0)
                        .DisplayMember = "CityName"
                        .ValueMember = "CityId"
                    End With
                End If
            End Sub
            Private Sub cmbState_AfterUpdate()

            End Sub
        End Class 
```

# sql - Oracle SQL 查询性能提升：减号 vs where not exists

> ID：12706207
> 
> 赞同：1
> 
> 时间：2012-10-03T10:04:40.547
> 
> 标签：sql, oracle, query-optimization

我需要提高这个查询的性能：

```
Select 
   t1.column1, t1.column2 
From
   table1 t1, table2 t2
Where 
   t1.id = t2.id and
   t1.some_column = t2.some_column
--------
minus
--------
Select 
   t1.column1, t1.column2 
From
   table1 t1, table2 t2, table3 t3
Where 
   t1.id = t2.id and
   t1.some_column = t2.some_column and
   t1.id = t3.id 
```

我正在尝试使用“不存在”而不是“减号”来重写此查询。有人可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:07:40.723

这个怎么样？

```
Select 
   t1.column1, t1.column2 
From
   table1 t1, table2 t2
Where 
   t1.id = t2.id
   and t1.some_column = t2.some_column
   and not exists (select 1 from table3 t3 where t1.id = t3.id) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-03T10:36:00.653

它取决于第一个查询和 table3 之间的比例大小/#-of-rows：

*   如果 table3 有*很多*行，我可能会使用@bpgergo 解决方案，因为它只需要运行*几次**except*查询并且应该很快（我假设 id 上有一个索引）；
**   如果 table3 的行*数很少*，我会使用以下解决方案，因为子查询可以一次运行并在内存缓存中进行匹配：*

 *```
SELECT t1.column1, t1.column2
FROM table1 t1, table2 t2
WHERE t1.id = t2.id
AND t1.some_column = t2.some_column
AND t1.id NOT IN (SELECT t3.id FROM table3 t3); 
```

任一解决方案都受益于每个表`id`列上的索引，如果是这种情况，则`id`用于过滤第一个查询的列上的附加索引（或包含 的复合索引）。*

# javascript - 居中自定义浮动面板 sencha touch 2

> ID：12706209
> 
> 赞同：0
> 
> 时间：2012-10-03T10:04:43.227
> 
> 标签：javascript, css, sencha-touch-2

此代码完美地工作面板浮动屏幕的中心，

```
 Ext.Viewport.add({
      xtype: 'panel',
      layout: 'vbox',
      flex: 1,
      modal: true,
      centered: true,
      floating: true,
      ...
 }); 
```

然后我尝试使这个代码成为一个易于重用的 sencha 对象。

```
 Ext.Viewport.add(Ext.create('Ext.Dialog')); 
```

这是我的对话框自定义代码。与上面的代码配置相同

```
 Ext.define('Ext.Dialog', {
      extend: 'Ext.Panel',
      ...
      config: {
          ...
          layout: 'vbox',
          flex: 1,
          modal: true,
          floating: true,
          centered: true,
          ...
      }
 }); 
```

自定义代码不在屏幕中央。我控制台变量“居中”标志仍然为假。

我想知道，是否可以添加到具有特定位置的视口？像按钮位置上的对话框显示。

我发现这可以通过在 sencha 代码之外设置样式来完成（使用 css）。但仍然想知道如何使用 sencha 进行配置

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:26:03.083

如果您想通过另一个组件显示一个组件，例如通过点击一个按钮来显示您的对话框，您可以使用 showBy 方法：

```
dialog.showBy(button); 
```

showBy 方法有两个参数，即您的组件和您希望组件对齐的特定位置。

[来自 Sencha 文档的更多信息](http://docs.sencha.com/touch/2-0/#!/api/Ext.Button-method-showBy)

# javascript - Dynamics CRM 2011 检索所有主题

> ID：12706210
> 
> 赞同：0
> 
> 时间：2012-10-03T10:04:45.243
> 
> 标签：javascript, dynamics-crm-2011

我目前正在学习 CRM 2011，同时使用它，我认为这可能是一个有用的例子。在 javascript 函数中，我需要检索所有主题实体记录并将它们缓存在客户端上。我还需要将它们缓存在它们的层次结构中。我认为最好的方法是返回每个主题记录及其 id 和父 id，这样我就可以在 javascript 中构建客户端结构。

有 CRM 经验的人对此查询应该如何编码有任何建议吗？我可以处理数据，只是不知道如何返回我需要的结果！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T13:08:54.683

我发现使用 OData 服务是在客户端 javascript 中返回所需信息的最佳方式：[CRM 2011，OData 入门](https://community.dynamics.com/product/crm/crmtechnical/b/crmbusiness/archive/2012/04/30/crm-2011-getting-started-with-odata.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T11:33:48.273

您的回答可能有效，但是对我来说点击次数太多了。

这就是我最终做到的方式。cacheSubjects 是主要功能：

```
var sgc_subjectCache = [];
var sgc_subjectCacheCount = 0;

function cacheSubjectsCallback(data) {
    // update subjects
    // loop through retrieved subjects and add to cache
    for( i=0; i < data.length; i++ )
    {
        var subject = data[i];
        subject.Root = subject.Title;
        // var subjectid = subject.SubjectId;
        sgc_subjectCache.push( subject );
        sgc_subjectCacheCount += 1;
    }
}    

function cacheSubjectsComplete() {
    // now update title with ancestors
    var done = false;
    while(done==false)
    {
        done = true;
        // outer loop
        var len = sgc_subjectCache.length;
        for( var i=0; i < len-1; i++ )
        {
            subject = sgc_subjectCache[ i ];
            // inner loop
            for( var j=0; j < len-1; j++ )
            {
                subject2 = sgc_subjectCache[ j ];
                if( subject.ParentSubject.Id === subject2.SubjectId )
                {
                    // found the parent
                    var newTitle = subject2.Title + ' : ' + subject.Title;
                    sgc_subjectCache[ i ].Title = newTitle;
                    sgc_subjectCache[ i ].Root = subject2.Root;
                    sgc_subjectCache[ i ].ParentSubject.Id = subject2.ParentSubject.Id;
                    done = false; // more to do
                }
            }
        }
    }

}

function cacheSubjects() {
    sgc_subjectCache = [];
    var options = "$select=Title,SubjectId,ParentSubject";
    SDK.REST.retrieveMultipleRecords("Subject", options, cacheSubjectsCallback, function(error) {
        alert( error );
    }, cacheSubjectsComplete);
} 
```

# jquery - 使用 JQuery 上传图像文件

> ID：12706214
> 
> 赞同：0
> 
> 时间：2012-10-03T10:05:01.653
> 
> 标签：jquery, html, file-upload

我正在尝试使用 JQuery 手动将图像发布到远程服务器。该文件类似于“c:\temp\1.jpg”，并且帖子在后台。

我尝试使用我在网上看到但不起作用的东西：

```
var data = new FormData();
data.append("file", "c:\\temp\\1.jpg");

$.ajax({
    type: "POST",
    url: "http://localhost:61602/home/FileUpload",
    contentType: false,
    processData: false,
    data: data,
    success: function (result) {
        alert("Success: " + result);
    },
    error: function () {
        alert("There was error uploading files!");
    }
}); 
```

这个想法是从 html 文件不可用的移动设备上传，但我让用户能够选择要上传的文件位置..

在此先感谢，阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T10:08:19.333

您必须像这样在 FormData 中发送上传控制数据

```
var form_data = new FormData();
var objFiles = $("input#fUpload").prop("files");
form_data.append("file", objFiles[position]); 
```

如果您的表单中有一个文件上传控件，则 postion 值为 0

```
postion = 0 
```

* * *

```
private void handlepostImage()
     {
         string guid = Guid.NewGuid().ToString();
         for (int i = 0; i < Request.Files.Count; i++)
         {
             HttpPostedFile objHttpPostedFile = (HttpPostedFile)Request.Files[i];
             string filename = Server.MapPath("../Uploads/Contents/" + guid + Path.GetExtension(objHttpPostedFile.FileName));
             objHttpPostedFile.SaveAs(filename);
         }
Response.Write("{\"fileGuid\":\"" + guid + "\"}");
} 
```

您可以将文件名返回给您的客户端

# sed - 从日志中提取特定文本

> ID：12706215
> 
> 赞同：1
> 
> 时间：2012-10-03T10:05:08.557
> 
> 标签：sed, grep

我试图弄清楚如何在 linux 中仅 grep 来自该日志的“SIG：”哈希部分：

```
20120927:10:57:23|89252871|3342|ESP individual score details for Message ID: <esp:msgid> -|<RBL:<0>  SHA:<0>  SHA_FLAGS:<0>  UHA:<12>  ISC:<0>  BAYES:<0>  SenderID:<0>  DKIM:<0>  TS:<-1>  SIG:<309875857436-4372-986476-327698-7436-984376-43276-98437643-8276-84327-6743-6874-986-86743-86732-867432-687432-687>  DSC:<0>  ('TRU_spam1', 47):<0> ('TRU_legal_spam', 31):<0> ('TRU_marketing_spam', 34):<0> ('TRU_profanity_spam', 39):<0> ('TRU_medical_spam', 35):<0> ('TRU_playsites', 46):<0> ('TRU_money_spam', 37):<0> ('TRU_stock_spam', 41):<0> ('TRU_embedded_image_spam', 27):<0> ('TRU_urllinks', 49):<0> ('TRU_watch_spam', 42):<0> ('TRU_phish_spam', 38):<0> ('TRU_spam2', 48):<0> ('TRU_misc_spam', 36):<0> ('TRU_LOREAL', 55):<0> ('TRU_freehosting', 45):<0> ('TRU_lotto_spam', 32):<0> ('TRU_ru_spamsubj', 56):<0> ('TRU_adult_spam', 18):<0> ('URL Real-Time Signatures', 9):<0> ('TRU_scam_spam', 40):<0>:89252871>| 
```

最终观点：

```
309875857436-4372-986476-327698-7436-984376-43276-98437643-8276-84327-6743-6874-986-86743-86732-867432-687432-687 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:20:26.030

使用 Perl 正则表达式（适用于 GNU grep）：

```
grep -oP '(?<=SIG:<)[^>]*(?=>)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:17:36.863

`grep`一个人在这里帮不了你太多。您可以添加`cut`到您的工具箱：

```
grep -o 'SIG:<[^>]\+' | cut -f2 -d\< 
```

首先，选择 SIG 及其后面的所有内容，直到`>`. 然后，只返回第一个之后的内容`<`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:16:22.647

```
sed 's/.*SIG:<\([^>]\+\)>.*/\1/g' INPUTFILE 
```

可能对你有用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T11:57:48.020

使用两个 grep，一个抓取正确的字段，一个清理：

```
<infile grep -o 'SIG:<[^>]*' | grep -o '[^<]*$' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T10:23:23.837

```
awk '{for(i=1;i<=NF;i++)if($i~/SIG:/){gsub("SIG:<","",$i);gsub(">","",$i);print $i;break}}' your_file 
```

# php - 无法将电子邮件插入 wordpress 数据库

> ID：12706216
> 
> 赞同：1
> 
> 时间：2012-10-03T10:05:11.013
> 
> 标签：php, mysql, database, wordpress, email

我正在尝试将电子邮件插入数据库。除电子邮件外的所有其他值都会发布。'0' 被插入数据库而不是电子邮件 ID。

```
$wpdb->bloodregistration = $wpdb->prefix.'bloodregistration';
$wpdb->insert( $wpdb->bloodregistration,array( 'name' => $_POST['myname'], 'myemail' =>         $mailid,'age' => $_POST['age'],'gender' => $_POST['gender'],'location' => $_POST['location']
    ,'address' => $_POST['address'],'phone_land' => $_POST['ph_land'],'phone_mob' =>     $_POST['ph_mobile'],'blood_group' => $_POST['blood_group']
    ,'dob' => $dob,'lastblooddate' => $doblood),array('%s','%d') ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:11:37.867

你用什么数据库？我的猜测是您忘记将序列/序列/自动增量分配给 ID 列。

编辑：

所以问题是这部分`'myemail' => $mailid`你在这个字段中插入了空变量或未设置变量，因此你在 DB 中得到了 0。

在 DB 中，将“myemail”列设置为自动递增、NOT NULL 和 INDEX PRIMARY。然后在 PHP 中添加新记录时只需跳过此字段，DB 将自动递增它。

尝试：

```
$wpdb->bloodregistration = $wpdb->prefix.'bloodregistration';
$wpdb->insert( $wpdb->bloodregistration,array( 'name' => $_POST['myname'],'age' => $_POST['age'],'gender' => $_POST['gender'],'location' => $_POST['location']
    ,'address' => $_POST['address'],'phone_land' => $_POST['ph_land'],'phone_mob' =>     $_POST['ph_mobile'],'blood_group' => $_POST['blood_group']
    ,'dob' => $dob,'lastblooddate' => $doblood),array('%s','%d') ); 
```

# html - 相对定位元素的 Z 索引？

> ID：12706218
> 
> 赞同：0
> 
> 时间：2012-10-03T10:05:15.430
> 
> 标签：html, css, z-index, css-position

我有一个元素，我试图将它放在另一个元素之上：

```
<div id="foo1"></div>
<div id="foo2"></div> 
```

这个CSS：

```
#foo1 {
  width: 600px;
  height: 300px;
  margin: 0;
}
#foo2 {
  width: 600px;
  height: 300px;
  margin-top: -300px;
} 
```

但现在`#foo2`正在往下走`#foo1`。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:08:50.973

使它们成为绝对而不是相对就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:07:51.917

```
#foo1 {
  width: 600px;
  height: 300px;
  margin: 0;
  position:absolute;
  z-index:100;
}
#foo2 {
  width: 600px;
  height: 300px;
  margin-top: -300px;
  position:absolute;
  z-index:1000;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:15:38.020

只需添加位置：相对；到每种样式，如此处所述：http: [//www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

（它们都可以有相对定位）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:09:38.243

你可以通过定位来做到这一点

```
#foo1 {
  width: 600px;
  height: 300px;
 background-color:red;position:relative
}
#foo2 {
  width: 600px;
  height: 300px;
 background-color:green; position:absolute; top:0; left:0
}​ 
```

在这里演示[http://jsfiddle.net/fckrA/1/](http://jsfiddle.net/fckrA/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T10:20:45.310

您可以将一个 div 放在另一个 div 中，然后将 position: relative to parent 和 position: absolute 应用于 child。子级将出现在父级上方并与左上角对齐。

# oop - 这是正常的实体框架行为吗

> ID：12706219
> 
> 赞同：2
> 
> 时间：2012-10-03T10:05:18.213
> 
> 标签：oop, entity-framework-4.1, one-to-many

我在以下类之间有两个一对多的关系

```
public class SiteMember
{
        public int SiteMemberID { get; set; }
        public virtual List<FriendshipInvitation> InvitationsSent { get; set; }
        public virtual List<FriendshipInvitation> InvitationsReceived { get; set; }
}

public class FriendshipInvitation
{
        public int InvitingUserID { get; set; }
        public SiteMember InvitingUser { get; set; }

        public int InvitedUserID { get; set; }
        public SiteMember InvitedUser{ get; set; }
} 
```

然后在控制器中，我有以下代码（从数据库加载一个 SiteMember）：

```
SiteMember sm = repoSiteMember.GetUserByName(User.Identity.Name); 
```

在此刻

```
sm.InvitationsReceived.InvitingUserId = 1;
sm.InvitationsReceived.InvitingUser = null 
```

然后我有以下行（从 db 加载所有 SiteMembers）：

```
IEnumerable<SiteMember> all = repoSiteMember.GetAll(); 
```

之后

```
sm.InvitationsReceived.InvitingUserId = 1 
sm.InvitationsReceived.InvitingUser = proxy to SiteMember object. 
```

我的问题是：这是正常行为吗？我很确定我可以用 include 语句“修复”空指针，但我发现从 db 加载所有元素实际上改变了对象的状态很奇怪。（空 => 代理）。代理应该从一开始就在那里吗？

**编辑：** 确认一下，include 语句确实解决了空引用的问题，但这不是这里的问题。

```
DataContext.Members
   .Include("InvitationsSent.InvitedUser")
   .Include("InvitationsReceived.InvitingUser")
   .FirstOrDefault(e => e.UserName == userName); 
```

**Edit2：**现在包括方法。

```
public SiteMember GetUserByName(string userName)
{
    return base.DataContext.Members.FirstOrDefault(e => e.UserName == userName);
}

public IEnumerable<SiteMember> GetAll()
{
    return base.DataContext.Members.ToList();
} 
```

**Edit3：**您可能需要它来重新创建模型。

```
 modelBuilder.Entity<FriendshipInvitation>()
        .HasRequired(e => e.InvitedUser)
        .WithMany(e => e.InvitationsReceived)
        .HasForeignKey(e => e.InvitedUserID)
        .WillCascadeOnDelete(false);

    modelBuilder.Entity<FriendshipInvitation>()
        .HasRequired(e => e.InvitingUser)
        .WithMany(e => e.InvitationsSent)
        .HasForeignKey(e => e.InvitingUserID);

    modelBuilder.Entity<FriendshipInvitation>()
        .HasKey(e => new { e.InvitingUserID, e.InvitedUserID, e.InvitationNo }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:09:45.583

是的，不同的行为是正常的，它是由于*关系修复*而发生的。

当您仅`SiteMember`使用`FirstOrDefault`两个集合加载一个`InvitationsSent`并且`InvitationsReceived`将在您访问它们时立即加载（或在调试器中检查它们），因为它们被标记为`virtual`并且将应用延迟加载。但是`FriendshipInvitation`这些集合中的 s 不会延迟加载`InvitingUser`或 ，`InvitedUser`因为这些导航属性*没有*标记为`virtual`.

比如说，`SiteMember`您加载的 1`FirstOrDefault`收到了来自`SiteMember`2 的邀请，但没有发送邀请。因此，`InvitationsReceived`将包含一个元素并且`InvitationsSent`为空。该元素 - 一个`FriendshipInvitation`实体 - 将具有`InvitingUser`2 和`InvitedUser`1。在这种情况下`InvitingUser`将是`null`因为它不能被延迟加载（因为它不是`virtual`）并且`SiteMember`2 尚未加载到上下文中。（`InvitedUser`但是将是 1 的动态代理，`SiteMember`因为您已经加载了`SiteMember`1，请参阅下一段。）

但是，如果您加载*所有* `SiteMember`带有 2 的 s ，`ToList()`也会`SiteMember`将其加载到由 执行的查询的上下文中`ToList()`。EF 会`InvitingUser`自动将 2 设置为已加载的实体，称为*关系修复*。*导航属性的延迟加载不会*加载它，`InvitingUser`因为 not 属性不支持延迟加载`virtual`。

为了保持一致的行为而不是单独依赖关系修复，我建议您也标记`InvitingUser`和`InvitedUser`导航属性`virtual`。

# java - Android 静态/动态微调器列表显示不同

> ID：12706220
> 
> 赞同：0
> 
> 时间：2012-10-03T10:05:19.120
> 
> 标签：java, android, android-spinner

我正在开发一个使用两个 Spinner 组件的 Android 应用程序。第一个在编译时使用 XML 分配其项目，第二个在运行时分配其项目。第一个 Spinner 的列表使用单选按钮和具有大量填充的行显示。第二个仅使用文本显示，填充最少。我已经使用 Android API 版本 7 和 9 对此进行了测试。

为什么它们的显示方式不同，我该如何防止？

**在此处**编辑解决方案：** [android.R.layout.simple_spinner_dropdown_item 和 android.R.layout.simple_spinner_item 之间的区别](https://stackoverflow.com/questions/10764918/difference-between-android-r-layout-simple-spinner-dropdown-item-and-android-r-l)**

 **原来我使用了两种不同的布局，因为 ArrayAdapter 默认使用与在 XML 中初始化时不同的布局。我通过添加这一行来解决它：
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);**

# ios - 如何从 UIPopoverController 呈现模态视图？

> ID：12706223
> 
> 赞同：0
> 
> 时间：2012-10-03T10:05:28.713
> 
> 标签：ios, uipopovercontroller, modalviewcontroller, presentmodalviewcontroller

我有这个：

![在此处输入图像描述](../Images/2d02bd25cdb6ad86e381db8f578520cc.png)

并且有这个，当模态呈现时：

![在此处输入图像描述](../Images/15f9ce0f16e0c686cb97bb8902a05f34.png)

呈现 webview 之前的一些代码 jsut：

```
webViewController.modalInPopover = YES;
webViewController.modalPresentationStyle = UIModalTransitionStyleCoverVertical; 
```

在 webViewController 的 viewDidLoad 模板中有这个：

```
self.contentSizeForViewInPopover = CGSizeMake(320.0, 436.0); 
```

我已经寻找了每个角色扮演视图的每一帧，但 frame.sizes 是正确的。有类似经验的人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:23:31.170

首先，我为演示风格分配了过渡风格。这就是全屏的枚举。

在 webViewController init 中有这个...

```
self.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
self.modalPresentationStyle = UIModalPresentationCurrentContext; 
```

...解决了问题。

我会尝试将其移至 -(void)awakeFromNib; 摆脱硬编码的大小。

# blackberry - 等待屏幕出现动画错误 - 黑莓

> ID：12706224
> 
> 赞同：0
> 
> 时间：2012-10-03T10:05:35.873
> 
> 标签：blackberry, blackberry-jde

![在此处输入图像描述](../Images/ffab48c4f3b9d616c83772aad77d16d1.png)

以上是我在使用显示等待屏幕时得到的屏幕截图`ActivityIndicatorView`。知道为什么我的微调器图像显示在窄条内吗？

我的代码是：

```
ActivityIndicatorView act = new ActivityIndicatorView(Field.FIELD_HCENTER);
Bitmap spinImage = Bitmap.getBitmapResource("img/spinner.jpg");
act.createActivityImageField(spinImage, 9,Field.FIELD_HCENTER );
LabelField label = new LabelField(message);
DialogFieldManager manager = new DialogFieldManager();
popup = new PopupScreen(manager);
manager.addCustomField(label);
manager.addCustomField(act); 
```

**编辑：**微调器图像
![在此处输入图像描述](../Images/ab1e9d166ed8c6baa6650c8ba091f507.png)
**编辑 2：**仅当帧数 = 1 且图像 = spinner.gif 时才能使用完整的微调器图像 ![在此处输入图像描述](../Images/d889d7ca6221be01c6e563fc0de27e45.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:07:28.490

你没有上传***`img/spinner.jpg`***，所以我假设图像只有一帧。换线试试

```
act.createActivityImageField(spinImage, 9,Field.FIELD_HCENTER ); 
```

用线

```
act.createActivityImageField(spinImage, 1, Field.FIELD_HCENTER); 
```

还要仔细检查[API 文档](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/component/progressindicator/ActivityIndicatorView.html#createActivityImageField%28net.rim.device.api.system.Bitmap,%20int,%20long%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T08:42:12.630

感谢内特和鲁帕克。
我把这个留给其他面临类似问题的人。
我只需要使用图像帧的宽度就是帧的宽度乘以帧的总数。参考[这里](http://docs.blackberry.com/en/developers/deliverables/17971/Indicate_activity_1210002_11.jsp)

我设置帧数 4 和图像：![在此处输入图像描述](../Images/5cfcd2d6939b56764b4bd5db3b70c158.png)

# jsp - 迭代器和jsp进退两难

> ID：12706225
> 
> 赞同：0
> 
> 时间：2012-10-03T10:05:36.217
> 
> 标签：jsp, struts2, iterator

我有这个迭代器的问题......它不会得到迭代器的索引，所以我可以输入一个“如果”......它直接进入其他......我想我没有得到正确索引，但我不知道如何...如果可以，请提供帮助

```
 <s:iterator  value="fileNames" status="idx">
   <s:set name="index" value="#idx.index"/> 
            <s:if test="%(#index)=4" >
        <div id="ngg-image-01"  class="ngg-gallery-thumbnail-box">
        <div class="ngg-gallery-thumbnail">
        <a id="1" rel="prettyPhoto[set_1]"                                                                      
                 href="${pageContext.request.contextPath}/userfiles/images/inside/7-  
                 days/prettyPhoto[set_1]/<s:property/>" alt="<s:property/>"><br />
                <img title="revederepensiune-vara-02"                                         
         src="userfiles/images/inside/7-days/prettyPhoto[set_1]/thmbs/<s:property/>" 
        alt="" width="89" height="66" /><br /></a></div>
                                </div> 
            </s:if>

              <s:else> 
                <div id="ngg-image-01" class="ngg-gallery-thumbnail-box">
        <div class="ngg-gallery-thumbnail">
        <a id="1" rel="prettyPhoto[set_1]" 
           href="${pageContext.request.contextPath}/userfiles/images/inside/7-
           days/prettyPhoto[set_1]/<s:property/>" alt="<s:property/>"><br /> 
      <img title="revederepensiune-vara-02"
     src="userfiles/images/inside/7-days/prettyPhoto[set_1]/thmbs/<s:property/>" 
     alt="" width="89" height="66" /><br /></a></div>
                                </div> 
              </s:else>              

     </s:iterator> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:41:27.263

`<s:if`您的标签语法错误。更改测试属性 - 括号应该是花括号，`=`应该是`==`，如下所示：

```
<s:if test="%{#index==4}" > 
```

# facebook-graph-api - 如何获得不会过期的页面访问令牌？

> ID：12706228
> 
> 赞同：11
> 
> 时间：2012-10-03T10:05:44.893
> 
> 标签：facebook-graph-api, facebook-access-token

我想知道是否有可能拥有一个永不过期的访问令牌以发布到我的页面

现在我得到了访问令牌：

```
https://graph.facebook.com/me/accounts 
```

我有`publish_stream`权限`manage_pages`，但使用[访问令牌调试器](https://developers.facebook.com/tools/debug)我看到令牌在大约 1 小时后过期。有没有永不过期的方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T10:20:48.827

见[脸书开发者](https://developers.facebook.com/roadmap/offline-access-removal/)：

> 通过使用长期用户访问令牌，查询 [User ID]/accounts 端点现在将为用户管理的页面提供**不会过期的页面访问令牌。**

因此，您必须通过服务器端调用将您的初始短期令牌交换为长期令牌：

```
https://graph.facebook.com/oauth/access_token?
client_id=APP_ID& client_secret=APP_SECRET& grant_type=fb_exchange_token& fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

然后使用该长期令牌查询我/帐户。绝对适合我们，即调试器显示：'Expires: Never'

* * *

**编辑 - 我们的流程**

所以，我们要做的是：

*   我们的应用程序的第一个[客户端身份验证](http://developers.facebook.com/docs/authentication/client-side/)，在用户接受请求的权限并将他的帐户与我们的应用程序连接后，我们得到一个“代码”

    [https://www.facebook.com/dialog/oauth](https://www.facebook.com/dialog/oauth)？client_id=YOUR_APP_ID &redirect_uri=YOUR_REDIRECT_URI &scope=COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES &response_type=code

*   现在在我们的服务器应用程序中，我们使用[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)来交换访问令牌的代码：

    [https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)？client_id=YOUR_APP_ID &redirect_uri=YOUR_REDIRECT_URI &client_secret=YOUR_APP_SECRET &code=CODE_GENERATED_BY_FACEBOOK

*   使用这个 access_token，我们如上所述进行服务器端交换

*   现在我们请求我/帐户，生成的 access_token 始终有效

希望有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-06T17:17:20.707

我稍微简化了皮特的回答，并添加了获取非过期页面访问令牌的步骤：

1.  访问以下 URL 并记下浏览器地址栏中返回的访问令牌：

    > [https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=REDIRECT_URI&scope=manage_pages,publish_stream&response_type=token](https://www.facebook.com/dialog/oauth?client_id=APP_ID&redirect_uri=REDIRECT_URI&scope=manage_pages,publish_stream&response_type=token)

2.  访问以下 URL 并在返回的数据中找到所需页面的名称并记下访问令牌：

    > [https://graph.facebook.com/me/accounts?access_token=ACCESS_TOKEN_RETURNED_FROM_STEP_1](https://graph.facebook.com/me/accounts?access_token=ACCESS_TOKEN_RETURNED_FROM_STEP_1)

3.  访问以下 URL 并记下返回的访问令牌：

    > [https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=PAGES_ACCESS_TOKEN_FROM_STEP_2](https://graph.facebook.com/oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=PAGES_ACCESS_TOKEN_FROM_STEP_2)

4.  使用[访问令牌调试器](https://developers.facebook.com/tools/debug)确保您的访问令牌的配置文件 ID 与所需页面的 ID 匹配并且永不过期

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-23T14:51:47.310

**从 2016 年开始，有一种更简单的方法可以做到这一点:)**

* * *

1.  **转到[https://developers.facebook.com/tools/explorer](https://developers.facebook.com/tools/explorer)**

2.  **从右上角**的下拉列表中选择您的应用****

***   **单击右侧应用程序下拉列表下方的**“获取访问令牌”按钮****

    ***   **在下拉列表中选择您想要获取访问令牌的页面**。如果您没有看到列出的页面，则需要确保您已设置该页面的管理员角色。此外，您可能需要单击下拉菜单中的“获取页面访问令牌”，之后您的页面将在您下次单击“获取访问令牌”按钮时显示在下拉列表中。

    *   **单击“访问令牌”输入字段中**的蓝色感叹号图标****

    ***   **单击弹出窗口右下角的**“在访问令牌工具中打开”按钮****

    ***   **点击“Extend Access Token”按钮**获取永不过期的token******** 

 ***** * *

本文的原始信息：[https ://www.rocketmarketinginc.com/blog/get-never-expiring-facebook-page-access-token/](https://www.rocketmarketinginc.com/blog/get-never-expiring-facebook-page-access-token/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T11:09:29.860

好的，所以花了大约一周的时间进行研究，但这是我的解决方案。在[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)中确保将 manage_page 作为 access_token 的一部分。之后将此代码与您的应用程序 ID、机密和重定向一起使用：

```
<?php
   app_id = "APP_ID";
   $app_secret = "APP_SECERET";
   $post_login_url = "REDIRECT_URL";

   $code = $_REQUEST['code'];

   //Obtain the access_token with publish_stream permission 
   if(empty($code)){ 
      $dialog_url= "http://www.facebook.com/dialog/oauth?"
       . "client_id=" .  $app_id 
       . "&redirect_uri=" . urlencode( $post_login_url)
       .  "&COMMA_SEPARATED_LIST_OF_PERMISSION_NAMES";
      echo("<script>top.location.href='" . $dialog_url 
      . "'</script>");
     }
    else {

      $token_url="https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id 
       . "&redirect_uri=". urlencode($post_login_url)
       . "&client_secret=" . $app_secret
       . "&code=" . $code;
      $response = file_get_contents($token_url);
      $params = null;
      parse_str($response, $params);
      $access_token = $params['access_token'];
      echo 'access token: ' . $access_token.'<br>';

        if($access_token){

          $token_url="https://graph.facebook.com/oauth/access_token?"
       . "client_id=" . $app_id 
       . "&redirect_uri=". urlencode($post_login_url)
       . "&client_secret=" . $app_secret
       .'&grant_type=fb_exchange_token'
       . "&fb_exchange_token=" . $access_token;
       $response = file_get_contents($token_url);
       $access_token = $params['access_token'];
       echo 'new access token: '.$access_token;

        }
    }*/

?> 
```

之后，复制“新访问令牌”并返回 [https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/) 当您通过新访问令牌进入访问令牌字段时。然后点击提交。之后在节点中，您将看到 + ***_* ___**单击此按钮并向下滚动到帐户并单击该按钮。找到您需要访问令牌的页面并将其复制并粘贴到访问密钥字段中。点击调试，你会看到它永远不会过期。保存该令牌，只要您不重置您的应用程序机密，它将保持有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-17T04:48:05.763

您可以使用来自 facebook 的以下 api 将令牌寿命刷新到 60 天，并且就在令牌即将到期时，在 60 天内再次调用相同的 api 以从该时间点将其寿命刷新回 60 天令牌过期是存在于 expires 参数中，其值以秒为单位

将 CLIENT_ID 和 CLIENT_SECRET 替换为其实际值

[https://graph.facebook.com/oauth/access_token?client_id=](https://graph.facebook.com/oauth/access_token?client_id=) &client_secret=&grant_type=fb_exchange_token&fb_exchange_token=

在 ACCESS_TOKEN 中，放入实际的令牌值而不附加“access_token=”****

# node.js - Watch remote file for file size changes

> ID：12706231
> 
> 赞同：1
> 
> 时间：2012-10-03T10:05:57.713
> 
> 标签：node.js

Is there a good way to use watchFile on a file which is located on other webserver without downloading it? If not, then how can I check the file size changes of a remote file without downloading it?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:14:36.367

Yes, you can do an HTTP HEAD request. A HEAD request is a GET that requests the HTTP Header only and not the body. Having the header, you could read the Content-Length or the Date attribute. (However Content-Length isn't always set correctly.)

Here is how to do HEAD requests with node.js: [Getting HTTP headers with node.js](https://stackoverflow.com/questions/5922842/getting-http-headers-with-node-js)

# android - 在 alertDialogue 中的按钮的 OnclickListner 上出现 NullPointerException

> ID：12706234
> 
> 赞同：1
> 
> 时间：2012-10-03T10:06:04.753
> 
> 标签：android, android-alertdialog, onclicklistener

我在 alertbuilder 中添加的布局有两个按钮。但我无法为此设置 onClickListner。这个异常正在发生。请看我的代码。自定义 alertDialogue 的 XML。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_common"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<EditText
    android:id="@+id/user_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_margin="7dp"
    android:singleLine="true" >

    <requestFocus />
</EditText>

 <LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/search"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Search" />

    <Button
        android:id="@+id/cancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Cancel" />
</LinearLayout> 
```

```
AlertDialog.Builder alert = new AlertDialog.Builder(Myclass.this);
    alert.setTitle("title");
    alert.setIcon(iconImage);
    LayoutInflater inflater =    (LayoutInflater)MyClass.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.search_dialogue, null, false);
    user_input= (EditText)view.findViewById(R.id.user_text);
    Button cancel = (Button) findViewById(R.id.cancel);
    cancel.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });

    if(content.equals("")) {
        user_input.setHint(hint);
    } else {
        user_input.setText(content);
    }
    alert.setView(view);
    searchAlert = alert.create();
    searchAlert.show(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:07:37.777

`view`你之前失踪了`findViewById`，排除`view`你指的是活动..：

```
Button cancel = (Button) view.findViewById(R.id.cancel); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:07:13.523

```
Button cancel = (Button) view.findViewById(R.id.cancel); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:09:18.540

在这里检查

```
user_input= (EditText)view.findViewById(R.id.user_text);//defined view for user_input
Button cancel = (Button) findViewById(R.id.cancel);//not defined view for button 
```

改成

```
Button cancel = (Button)view. findViewById(R.id.cancel); 
```

# asp.net - 在 Asp.net MVC 中限制对注册用户的访问

> ID：12706236
> 
> 赞同：3
> 
> 时间：2012-10-03T10:06:17.467
> 
> 标签：asp.net, asp.net-mvc-3

我有一个 asp.net mvc 应用程序。所有页面都可以在 asp.net mvc 应用程序中访问，只有在身份验证（授权属性）后才能访问，登录页面（匿名）除外。在登录页面中，我们有新用户的注册链接。如何将注册链接限制为仅供特定用户或特定角色访问。

我们不希望每个人都使用注册页面来创建用户名和密码。

ASP.NET MVC 授权如何实现这一点。我们在应用程序中使用标准的 SQL 成员资格和角色提供程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T03:03:05.100

**确保用户登录以访问视图**

完成此操作的最简单方法是使用控制器操作方法上方的 Authorize 属性。例如，我们只希望用户在已经登录网站的情况下更改他们的密码。为了防止非授权用户访问更改密码视图，我们可以像这样限制访问：

```
[Authorize]
public ActionResult ChangePassword()
{
    ViewData["PasswordLength"] = MembershipService.MinPasswordLength;
    return View();
} 
```

您也可以通过检查 User 对象来手动完成此操作，如下所示：

```
public ActionResult ChangePassword()

    {
        if (!User.Identity.IsAuthenticated)
            return RedirectToAction("LogOn", "Account");

        ViewData["PasswordLength"] = MembershipService.MinPasswordLength;
        return View();
    } 
```

**确保用户具有特定角色以获得对视图的访问权限**

您可能有一些视图应该只能由特定角色的用户访问。这也可以使用 Authorize 属性来完成，如下所示：

```
[Authorize(Roles = "Administrator")]
public ActionResult Index()
{
    return View();
} 
```

您也可以使用以下方法在代码中完成此操作：

```
public ActionResult Index()
{
    if (!User.IsInRole("Administrator"))
        return RedirectToAction("LogOn", "Account");

    return View();
} 
```

**参考：[使用我们的角色和成员资格提供者](http://www.brianlegg.com/post/2011/05/09/Implementing-your-own-RoleProvider-and-MembershipProvider-in-MVC-3.aspx)**

# jquery - 使用 jQuery 访问具有多个类的元素

> ID：12706240
> 
> 赞同：3
> 
> 时间：2012-10-03T10:06:39.353
> 
> 标签：jquery, class, jquery-selectors

有时我们定义了一些具有多个类的元素，例如：-

```
<div class="a b c"> Hi this is div with multiple classes </div> 
```

现在，我想使用 jQuery 选择器访问这个 div 所以我在尝试：-

```
var cls = "a b c"; 
$("." + cls); // Returns [] 
```

这是有道理的，因为它实际上是在尝试查找类名为“a”的所有元素，然后尝试在具有类“a”的元素内部进一步查找子元素“b”和“c”，这在语义上是错误的。所以我找到了一种方法来找到这样的元素：-

```
var a = "mk-search-contents boundary-top";
var all = $("div"); // Assuming I know the tagname if element i am interested in

for (var i=0; i<all.length; i++) {
    if (all.get(i).className == a) { console.log(all.get(i)); break; }
} 
```

它给了我正确的答案，但我不明白，为什么这是有效的，以及如何使用 jQuery 选择这些元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:08:23.417

只需使用此选择器：

```
$('.a.b.c') 
```

`className`为您提供用空格分隔的所有类名称（“ab c”）。但是对于 css 和 jquery 选择器，您不能使用“ab c”。

你所做的是

```
$('.a b c') 
```

这意味着“a 类元素中的 b 元素中的 c 元素”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:12:38.523

试试下面的选择器来匹配所有三个类

```
$('.a.b.c') 
```

如果你想匹配三个中的任何一个

```
$('.a,.b,.c') 
```

# ios - Monotouch：如何在启动时提示用户配置 iCloud？

> ID：12706241
> 
> 赞同：2
> 
> 时间：2012-10-03T10:06:59.087
> 
> 标签：ios, xamarin.ios, icloud

按照 Xamarin 网站上的 iCloud 示例，我在 Monotouch 应用程序中成功实现了 iCloud 支持：

[iCloud 简介](http://docs.xamarin.com/ios/tutorials/Introduction_to_iCloud)

但是阅读文档我发现我还需要询问用户是否要使用它，并且（如果他接受）我需要打开 iCloud 设置面板。

这是 Apple Docs 中的一句话：

> “如果未配置 iCloud，请询问用户是否要配置它（如果他们想配置 iCloud，最好将它们转移到启动设置）。”

第一次启动应用程序时询问用户是否要使用 iCloud 的最佳做法是什么？以及如何启动 iCloud 的 iPhone 设置面板？使用 iCloud 开/关开关向用户显示我的应用设置面板是否足够？

提前致谢。

# oauth - 在 Google 云端硬盘中对用户进行身份验证

> ID：12706242
> 
> 赞同：0
> 
> 时间：2012-10-03T10:07:05.420
> 
> 标签：oauth, oauth-2.0, google-drive-api

我正在为一个项目使用 Google Drive API。当通过 OAuth 2.0 实现获取访问令牌时，Google Drive 提供用户需要通过登录到他/她的帐户并允许访问我的应用程序来通过 Web 界面授予访问权限。无论如何我都可以获得访问令牌，而无需用户允许通过网页进行访问。

例如，是否可以通过直接提供用户的用户名和密码来获取访问令牌。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:16:35.720

谷歌等提供商使用 OAuth 的原因之一是用户永远不需要向第三方提供他的用户名和密码。他只需直接在提供商的网站上输入。

OAuth 2 标准本身甚至会提供这样一种方法，称为[*Resource Owner Password Credentials* grant](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-1.3.3)，但出于安全原因，Google 并未实施这种方法。

如果您只需要从您的 Web 服务器访问您自己的帐户，则可以使用[Service Accounts](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)。

# sql-server - sql server 修改权限

> ID：12706245
> 
> 赞同：0
> 
> 时间：2012-10-03T10:07:14.210
> 
> 标签：sql-server, sql-server-2008

专家

我正在尝试为我们的 IT 团队设置权限。我们所有的 IT 人员都是 IT 组的成员。对于有问题的数据库，IT 员工组是 db_reader、db_reader 的成员，并且可以执行所有 SP/Fun。我想授予一个特定用户修改对象的权限。

```
CREATE USER [S\Al] FOR LOGIN [S\Al] WITH DEFAULT_SCHEMA=[dbo] 
```

将他添加到 db_ddlAmin 角色

```
EXEC sp_addrolemember N'db_ddladmin', N'S\Al' 
```

我们数据库中的所有对象都属于 DBO 模式..所以我已经将 dbo 模式的更改权限授予用户

```
GRANT ALTER ON SCHEMA::[dbo] TO [S\Al] 
```

但是当这个用户试图修改 sp 或删除他得到的表时

无法更改过程“XX”，因为它不存在或您没有权限。无法删除表“XX”，因为它不存在或您没有权限。

该用户可以创建一个新表，但如果他尝试删除新创建的表，则会出现权限错误。

此用户是其他 4 个组的成员，其中该组是 db_owner 或 db_ddladmin 角色的成员，

我做错了什么，我该如何解决这个..

谢谢

VT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:38:43.560

该`db_ddladmin`角色的成员应该能够修改存储过程。

确保您已将用户添加到正确数据库中的角色：

```
use YourDatabase;
EXEC sp_addrolemember N'db_ddladmin', N'S\Al' 
```

如果没有明确的`use`，您可能会让他成为`master`数据库`db_dlladmin`角色的成员！

# oracle - 使用spring-jdbc在oracle中按rowid更新一行

> ID：12706260
> 
> 赞同：0
> 
> 时间：2012-10-03T10:08:13.573
> 
> 标签：oracle, spring-jdbc

我有一个奇怪的问题，使用 spring-jdbc 在 oracle 中按 rowid 更新一行。
问题是一切都很好，但是对于某些 rowid，更新将永远不会完成并且应用程序被冻结。我将 spring 日志级别更改为 DEBUG 以查看发生了什么，但没有什么奇怪的，spring log 与成功更新完全相同。

我尝试在plsql中执行相同的sql，更新执行成功。

spring 版本是 3.1.1.RELEASE oracle 版本是 11.1.0.6.0

dao 中更新方法的主体是：

String sql=
"UPDATE "+schema+".MSG m SET m.STATE="+state+" WHERE ROWID='"+msg.getRowId()+"'";
getJdbcTemplate().update(sql);

豆豆：

```
<bean id="messageDao" class="com.foo.dao.springjdbc.MessageDaoSpringJdbcImpl">
    <property name="jdbcTemplate" ref="jdbcTemplate"/>
</bean> 
```

jdbc模板：

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource"/>
</bean> 
```

数据源：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@${db.ip}:${db.port}:${db.sid}"/>
    <property name="username" value="${db.username}"/>
    <property name="password" value="${db.password}"/>
    <property name="validationQuery" value="select 1 from dual"/>
    <property name="testOnBorrow" value="true"/>
    <property name="testWhileIdle" value="true"/>
    <property name="timeBetweenEvictionRunsMillis" value="5000"/>
    <property name="numTestsPerEvictionRun" value="3"/>
    <property name="maxActive" value="1"/>
    <property name="maxIdle" value="3"/>
</bean> 
```

任何想法？

# jquery - div中的依赖边距

> ID：12706264
> 
> 赞同：2
> 
> 时间：2012-10-03T10:08:29.350
> 
> 标签：jquery, css, html

这是我第一次使用这个论坛，通常我总是在这里找到我的答案而无需自己询问。因此，如果我犯了任何错误，我深表歉意。我正在尝试做的是以下内容：我有一个通过 css 适合窗口大小（100%）的标题。（高度通过 jquery 改变，但我认为这与这个问题无关）。在这个标题中，我有一个图像，我希望它位于屏幕中间。像这样（我不允许在这个论坛上放图片）：

```
 <----------------image------------------>
 __________ ____________________ __________
|          |                    |          |
|  REST    |                    |   REST   |
|        IM|AGE  IMAGE IMAGE  IM|AGE       |
|__________|____________________|__________|
           |                    |
           |____________________|
             <-----screen------>

REST = not visible (outside the screen) 
```

所以如果屏幕更大，它会显示更多的图像，但它仍然会在中间完美对齐。到目前为止，我所做的一切都很顺利。

做了以下代码：

```
 <div id="header">
    <div id="header_bg"><img src="pics/headerbg.jpg" id="stretch"></div>
    <div id="logo">
            <div class="logo"><img src="pics/logo.png" width="401" height="174"></div>
    </div>
 </div> 
```

和jQuery代码：

```
if ( $("#stretch").width() > $(window).width()  ) {
            $screen = $(window).width();
            $pic = $("#stretch").width();
            $rest = $pic - $screen;
            $margin = $rest /2;
            $margin = $margin - $margin - $margin ;
            $('#stretch').css({'margin-left':($margin)+'px'});
        } 
```

如您所见，这很好用，但是当我第一次加载页面时，它隐藏了太多图像，因此我在右侧得到了空白空间。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T14:18:36.123

我不确定我是否真的理解你，但如果你只需要在屏幕中间有一张图片，你可以使用 Css 属性背景和中心位置。

```
<style>
   #header_bg { background: url('pics/headerbg.jpg') no-repeat center 0; }
</style>

 <div id="header">
    <div id="header_bg">&nbsp;</div>
    <div id="logo">
            <div class="logo"><img src="pics/logo.png" width="401" height="174"></div>
    </div>
 </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:55:08.683

我提出了以下代码，它基于之前提到的代码 David Slavik。再次感谢您的解决方案大卫。

```
<style>
  #header_bg { 
    background: url('../pics/headerbg.jpg') no-repeat center center;
    -webkit-background-size: cover; /*for webKit*/
    -moz-background-size: cover; /*Mozilla*/
    -o-background-size: cover; /*opera*/
    background-size: cover; /*generic*/ }
</style> 
```

此代码确保如果图像小于 div 的高度，它会稍微拉伸。谢谢大家的回答。对我来说，这个话题已经结束。

# java - 为什么我用 while( in.hasNext() ) 从键盘获取值

> ID：12706266
> 
> 赞同：0
> 
> 时间：2012-10-03T10:08:35.303
> 
> 标签：java, while-loop

我是一个java初学者，我对以下程序的困惑是，为什么它分配值，我从键盘输入`while( in.hasNext() )`变量`total`，并处理`total = in.intNext()`while条件的值？

**混乱**

```
 System.out.print("Enter an Integer value or ctrl+z to terminate: ");
  while ( in.hasNext()  ) // Check for New Vlaue 
   {    
    System.out.print("Enter an Integer value or ctrl+z to terminate: ");
    total += in.nextInt();  // Take input for Count
    count++;
   } 
```

我的困惑是 的条件检查`while loop`，它通常首先检查一个条件，然后继续执行语句，但是在这个程序中，当我在 处输入一个整数值时`while( in.hasNext() )`，它不仅使条件为真，而且将该值分配给`total`变量，所以我的问题，

为什么它分配值，而不是从我那里获取另一个值`total = in.nextInt()`？

因为我寻找`hasNext()`方法，只有在有值时才返回*True 。*

**完成程序**

```
import java.util.Scanner;

class Practice
{
 public static void main( String[] args )
 {
  int count=0; 
  int total = 0;
  Scanner in = new Scanner(System.in);

  System.out.print("Enter an Integer value or ctrl+z to terminate: ");
  while ( in.hasNext()  ) // Check for New Vlaue 
   {    
    System.out.print("Enter an Integer value or ctrl+z to terminate: ");
    total += in.nextInt();  // Take input for Count
    count++;
   }
  System.out.printf("\nTatal values are: %d\nToatl of count is : %d",count,total);
 } // end main
} // end class Practice 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:18:11.647

键盘上的值不是`while( in.hasNext() )`在行中读取，而是在 `count += in.nextInt();`语句中

# c# - 在整个 Windows 窗体应用程序生命周期中仅运行一次代码

> ID：12706267
> 
> 赞同：1
> 
> 时间：2012-10-03T10:08:40.163
> 
> 标签：c#, winforms, visual-studio-2010

我正在使用 Visual Studio 2010 IDE 开发 Windows 窗体应用程序。我的需要是我有某些代码块只需要在应用程序启动时运行一次，并且在整个生命周期内不再运行（生命周期我的意思是不再在同一个系统上运行，除非系统被重新配置）。我已经将该代码放在一个单独的`.cs`文件中，现在我手动运行它的 assembly( `.exe`) 以进行测试。但是出于部署目的，我该怎么做呢？`schtasks`它包含用于通过命令提示符使用命令创建计划任务的代码。我知道有相同的解决方法，但我需要坚持这种`schtasks`方法。我知道有类似的东西`Setup Projects`这有助于我们配置安装项目所需的所有文件，并最终创建一个安装文件，但是我可以在其中编写一些代码以确保它在安装期间运行一次，然后再执行我的应用程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:14:44.183

是的，您可以让安装和部署包在安装期间运行 exe。您必须在设置中创建一个自定义操作才能做到这一点。

# c++ - Visual Studio：静态库的静态链接

> ID：12706269
> 
> 赞同：1
> 
> 时间：2012-10-03T10:08:42.503
> 
> 标签：c++, mfc, linker, static-libraries

我在 Visual Studio 中创建了一个静态库（其中没有使用 mfc），并希望在静态链接的 mfc 项目（实际上是 com-dll）中与它链接。

链接时`mfc-lib`我收到一堆消息`symbol is already defined`。这是因为我将标准 C++ 库链接了两次（一次在静态库中，另一次在 mfc 项目中）。

我如何解决它？有一个解决方法`/FORCE:MULTIPLE`，但我认为这是一个糟糕的决定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T13:59:08.513

将静态库链接到 DLL 或 EXE 项目时，您需要注意所有项目都已编译为使用相同的运行时库。因此，请将所有项目设置为相同的“使用 MFC”以及相同的“运行时库”。如果您不这样做，则可能已编译一个项目以从标准 CRT 获取 fopen 函数，而另一项目可能已编译为从 MFC 获取 fopen 函数。混合这些对于链接器来说是一个问题，因为他不知道要使用哪个运行时（在示例中：哪个 fopen）。

将您的 DLL 或 EXE 项目与另一个 DLL 项目链接时，这不是问题。您可以拥有一个不使用 MFC 的 DLL，并将您的 MFC EXE 链接到该 DLL。

如果您有一个在不同项目中经常使用的 util 库，那么您可能会考虑设置不同的构建设置，以便您可以在 DEBUG 和 RELEASE 以及使用和不使用 MFC 的情况下构建您的库。然后在您的 EXE 项目中，您可以选择与您的项目设置匹配的库二进制文件。

# joystick - HUD 层中的操纵杆

> ID：12706270
> 
> 赞同：1
> 
> 时间：2012-10-03T10:08:46.817
> 
> 标签：joystick, hud

我想给图像一个 HUD 的操纵杆。

我拥有的HUD文件：  

```
myJoystick = [CCJoyStick initWithBallRadius: 25 MoveAreaRadius: 65 isFollowTouch: NO isCanVisible: YES isAutoHide: NO hasAnimation: YES];
         [myJoystick setBallTexture: @ "joystick_control.png"];
         [myJoystick setDockTexture: @ "joystick_lid.png"];
         [myJoystick setHitAreaWithRadius: 100];

         myJoystick.position = ccp (100,100);
         myJoystick.scale = 0.3;
         myJoystick.delegate = self;
         [self addChild: myJoystick of: 5]; 
```

在 HelloWorldLayer 中：

```
(Void) onCCJoyStickUpdate (CCNode *) sender Angle: (float) Angle Direction: (CGPoint) direction Power: (float) power {
     if (sender == myJoystick) {
         spider2.rotation =-angle;
         ... 
```

找不到我的操纵杆。我该如何解决？

这是我的代码： [链接](https://dl.dropbox.com/u/1497391/tile%203.zip)

# jquery - jquery在单击覆盖时阻止关闭对话框

> ID：12706273
> 
> 赞同：1
> 
> 时间：2012-10-03T10:08:55.263
> 
> 标签：jquery, jquery-ui, overlay, modal-dialog

我有一个带有一些模式对话框的应用程序。当我单击覆盖时，这些对话框会自动关闭。我想防止这种行为，并且只有在我单击特定按钮时才让它们关闭，该按钮可以正常工作。我该如何管理？

叠加层会自动在以下 div 中创建：

```
<div class="ui-widget-overlay" 
 style="height: 100%; width: 100%; position: fixed; 
 left: 0px; top: 0px; z-index: 2001; opacity: 0.3;">
</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:18:01.390

这个怎么样：

```
$('.ui-widget-overlay').click(function(e) {
    e.preventDefault();
    return false;
}); 
```

如果这应该失败，也许尝试：

```
window.onload = function() {
    $('.ui-widget-overlay').off('click');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-28T06:38:36.473

这是解决方案：

```
$("#yourmodal").dialog({
  closeOnEscape: false,
  /*This will disable keyboard*/
  resizable: false,
  modal: true,
  show: {
    effect: "fade",
    duration: 100
  },
  open: function() {
    $('.ui-widget-overlay').click(function(e) {
      /*This will disable click and close*/
      e.preventDefault();
      return false;
    });
  },
  close: function() {},
  position: {
    my: "center",
    at: "center",
    collision: "fit"
  }
});
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-11T13:00:03.117

```
$("#yourmodal").dialog({
  closeOnEscape: false,
  resizable: false,
  modal: true,
  open: function() {
    $('.ui-widget-overlay').css('pointer-events', 'none')
  },
  close: function() {}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-23T09:12:14.263

您不应该将 CSS 设置`pointer-events: none`为覆盖。它不会使您的叠加层取消“点击”事件。相反，它会使覆盖对所有事件“透明”，从而允许事件“[穿过](https://robertnyman.com/2010/03/22/css-pointer-events-to-allow-clicks-on-underlying-elements/)”覆盖。

如果那是你想要得到的，那就继续吧。`Event.stopImmediatePropagation`否则，使用下面的示例停止“单击”事件传播。

```
$("#yourmodal").dialog({
  closeOnEscape: false,
  open: function() {
            $(".ui-widget-overlay")
                .off("click").on("click", function(e) {
                    e.preventDefault();
                    e.stopImmediatePropagation(); // this line is the key. "e.stopPropagation()" wouldn't be enough.
                });
  },
  close: function() {}
}); 
```

# ipad - 如何在 iPad 中使用 safari 绘制画布元素？

> ID：12706276
> 
> 赞同：2
> 
> 时间：2012-10-03T10:09:02.550
> 
> 标签：ipad, html

我正在尝试实现一个画布元素以在 Safari/iPad 中进行触摸登录。我已经为具有 mousedown mouseup 和 mousemove 事件的桌面浏览器完成了它。我必须使用哪些事件在 iPad 上做同样的事情？touchstart，touchend和touchmove？

这是我的功能

```
var pizarra_canvas
var pizarra_context

function init(){

    alert('2')
    pizarra_canvas = document.getElementById("pizarra");
    pizarra_context = pizarra_canvas.getContext("2d");
    pizarra_context.strokeStyle = "#000";
    pizarra_canvas.addEventListener('touchstart',empezarPintar,false);
    pizarra_canvas.addEventListener('touchend',terminarPintar,false);
alert('1')
}

function empezarPintar(e){
pizarra_context.beginPath();
pizarra_context.moveTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-          pizarra_canvas.offsetTop);
pizarra_canvas.addEventListener('touchmove',pintar,false)
}

function terminarPintar(e){
pizarra_canvas.removeEventListener('touchmove',pintar,false);
}

function pintar(e) {
pizarra_context.lineTo(e.clientX-pizarra_canvas.offsetLeft,e.clientY-    pizarra_canvas.offsetTop);
pizarra_context.stroke();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:27:24.217

我建议你看看像[http://www.kineticjs.com/](http://www.kineticjs.com/)或[http://paperjs.org/](http://paperjs.org/)这样的框架，它们在处理触摸屏上的画布时很有帮助。

# c++ - MacTypes.h 中 UInt32 的 Typedef 重新定义，来自 CFBase.h 中的定义

> ID：12706281
> 
> 赞同：3
> 
> 时间：2012-10-03T10:09:28.547
> 
> 标签：c++, xcode, macos, typedef, macos-carbon

我在 MacTypes.h 的两行中收到 typedef 重新定义错误，在以下代码块中：

```
#if __LP64__
typedef unsigned int                    UInt32;
typedef signed int                      SInt32;
#else
typedef unsigned long                   UInt32; // error here
typedef signed long                     SInt32; // error here
#endif 
```

Clang 错误指向 CFBase.h（在 CoreFoundation.framework 中）中的以下先前定义：

```
#if !defined(__MACTYPES__)
#if !defined(_OS_OSTYPES_H)
typedef unsigned char           Boolean;
typedef unsigned char           UInt8;
typedef signed char             SInt8;
typedef unsigned short          UInt16;
typedef signed short            SInt16;
typedef unsigned int            UInt32; // previous definition is here
typedef signed int              SInt32; // previous definition is here
typedef uint64_t            UInt64;
typedef int64_t         SInt64;
typedef SInt32                  OSStatus;
#endif
... 
```

这很奇怪，因为`__LP64__`在 Mac 平台上显然总是如此，那么为什么还要评估 typedef 呢？为什么会有一条编译路径，其中两个操作系统提供的定义相互矛盾？

编辑：这是 Xcode 中错误的屏幕截图。

![Xcode 错误输出](../Images/02ea65c5c14269af6b2570109508f495.png)

我已经删除了包含文件的路径，`<Carbon/Carbon.h>`因为它包含我的客户端的名称（两个错误的文件相同）。下面的完整路径名如下（全部包含在 Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/System/Library/Frameworks 中）：

*   Carbon.framework/Headers/Carbon.h:20
*   CoreServices.framework/Headers/CoreServices.h:18
*   CoreServices.framework/Frameworks/AE.framework/Headers/AE.h:20
*   CoreServices.framework/Frameworks/CarbonCore.framework/Headers/CarbonCore.h:27
*   CoreServices.framework/Frameworks/CarbonCore.framework/Headers/MacTypes.h:27

更新：

在我自己的代码中，就在`#include <Carbon/Carbon.h>`我添加以下内容之前：

```
#if __LP64__
#error Has LP64
#else
#error Doesn't have LP64
#endif 
```

...而且我收到“没有 LP64”错误，所以这似乎是问题的根源。但是，当我在 Sublime Text 2（使用 SublimeClang）中编译以下内容时......

```
int main()
{
    #if __LP64__
    #error Has LP64
    #else
    #error Doesn't have LP64
    #endif
    return 0;
} 
```

...我得到“有 LP64”。进行项目文本搜索时，`#define __LP64__`我在我的项目中找不到任何东西，并且在搜索`__LP64__`它时只会出现`#if`s 和`#ifdef`s 的负载。有谁知道这个错误可能来自哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T11:30:31.533

最后发现这个问题是由于多次安装 Xcode 造成的：我最近安装了 Xcode 4.4（来自 App Store），但我仍然在某处安装了 Xcode 3。我通过运行`uninstall-devtools`which remove Xcode 3 以及 Library 和 Developer 文件夹中的所有各种路径来解决了这个问题。我不确定为什么 Xcode 的冲突安装会导致这样的问题，但删除 Xcode 3 解决了它。我希望这可以帮助遇到此类问题的任何人——这肯定不是我所期望的问题。

# html - 父 - 子 css 树

> ID：12706282
> 
> 赞同：2
> 
> 时间：2012-10-03T10:09:29.733
> 
> 标签：html, css

我正在使用 CSS 处理树结构层次结构，我需要一些帮助。我想让两个父一个子链接起来，如果我从内容元素中删除字符，我将无法查看`border-left`CSS 选择器中定义的内容。`::after``a`

这是我的[jsFiddle](http://jsfiddle.net/daneuchar/6jsJv/)。

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:16:41.417

一个hacky解决方案是更改`content:'a';`为`content:' ';`

[http://jsfiddle.net/6jsJv/3/](http://jsfiddle.net/6jsJv/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:01:07.307

```
content:''; 
```

只需尝试使用空参数`content:'';`而不是提及`content:'a';`. 该`content`属性与`:before`和`:after`伪元素一起使用，以插入生成的内容。

# asp.net-mvc - 如何在asp.net mvc4应用程序中向管理员显示注册用户列表

> ID：12706286
> 
> 赞同：7
> 
> 时间：2012-10-03T10:09:44.693
> 
> 标签：asp.net-mvc, membership-provider

我已经使用 razor 引擎创建了 asp.net mvc4 应用程序，我是这项技术的新手，并试图找出一种在管理员登录后向管理员显示注册用户列表的方法。会员资格正在使用 system.web.providers。任何人都可以告诉 - 首先如何为用户创建单独的角色，管理员使用实体框架其次如何获取并显示所有具有不同角色的注册用户的列表给管理员。

提前致谢。问候

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-03T12:15:33.257

```
[Authorize(Roles = "Admin")]
public ActionResult Index()
{
    using (var ctx = new UsersContext())
    {
        return View(ctx.UserProfiles.ToList());
    }
} 
```

在视图中：

```
@using MvcApplication1.Models
@model IEnumerable<UserProfile>
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <h2>Users list</h2>
    <table>
        <thead>
            <tr>
                <th>id</th>
                <th>name</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in Model)
            {
                <tr>
                    <td>@user.UserId</td>
                    <td>@user.UserName</td>
                </tr>
            }
        </tbody>
    </table>
</body>
</html> 
```

当然，为了能够访问`/users/index`控制器操作，您首先需要拥有用户和角色。只有管​​理员角色的用户才能调用它。

这里[`tutorial`](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)解释了如何使用迁移来为您的数据库添加一些帐户。

以下是示例迁移配置的样子：

```
internal sealed class Configuration : DbMigrationsConfiguration<UsersContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    }

    protected override void Seed(UsersContext context)
    {
        WebSecurity.InitializeDatabaseConnection(
            "DefaultConnection",
            "UserProfile",
            "UserId",
            "UserName", 
            autoCreateTables: true
        );

        if (!Roles.RoleExists("Admin"))
        {
            Roles.CreateRole("Admin");
        }

        if (!WebSecurity.UserExists("john"))
        {
            WebSecurity.CreateUserAndAccount("john", "secret");
        }

        if (!Roles.GetRolesForUser("john").Contains("Admin"))
        {
            Roles.AddUsersToRoles(new[] { "john" }, new[] { "Admin" });
        }
    }
} 
```

# sql-server - SQL Server varchar 相等性测试给出语法错误

> ID：12706287
> 
> 赞同：1
> 
> 时间：2012-10-03T10:09:48.540
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个在 SQL Server 2005 中运行的简单表，定义为

```
CREATE TABLE [dbo].[ap_purchases_tax_det](
[invoice_s] [int] NOT NULL,
[line_num] [smallint] NOT NULL,
[tax_code] [varchar](10) NOT NULL,
[tax_type] [varchar](2) NULL,
[tax_det_s] [int] IDENTITY(1,1) NOT NULL,
[old_entity] [varchar](14) NULL,
[old_cc_code] [varchar](5) NULL,
[old_vendor] [varchar](15) NULL,
[old_invoice] [varchar](20) NULL,
[citi] [varchar](1) NULL,
CONSTRAINT [aaaaaap_purchases_tax_det_PK] PRIMARY KEY NONCLUSTERED 
(
    [invoice_s] ASC,
    [line_num] ASC,
    [tax_code] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

tax_type 字段用“W”、“V”、“B”或“”填充（这个不为 NULL）。

如果tax_type 是'W'，我需要得到一个布尔标志，所以我有SQL：

```
select iif(tax_type = 'W',1,0) FROM dbo.ap_purchases_tax_det; 
```

当我运行它时，我得到“'='附近的语法不正确。”。即使是简单的`tax_type = 'W'`. 相等性测试似乎在 WHERE 子句中起作用，但我需要一个标志，这意味着我必须将 2 个选择联合起来。这实际上是连接的一部分，它是更大语句中的子查询，所以我不想这样做。我试过明确地投射`tax_type = cast('W' as varchar(2))`无济于事。如果我使用相同的结果`ISNULL(tax_type,'x')`。

我不知道为什么平等测试不起作用，有人可以提供指导吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:13:12.407

您不能`IIF`在 SQL 2005 中使用，因为[IIF](http://msdn.microsoft.com/en-us/library/hh213574.aspx)只是 SQL 2012 函数

你需要使用`CASE`

```
 SELECT CASE tax_type WHEN 'W' THEN 1 ELSE 0 END FROM dbo.ap_purchases_tax_det 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:24:31.203

通常，在 SQL Server 2012 之前这样编写 IIF

```
select case when tax_type = 'W' then 1 else 0 end
FROM dbo.ap_purchases_tax_det; 
```

CASE 语句有另一种形式，但这就像 C#/Java 中的 SWITCH 语句或 MS Access 中的 SELECT CASE，这并不是真正的一般条件。

[关于IIF (Transact-SQL) 的](http://msdn.microsoft.com/en-us/library/hh213574.aspx)两个重要说明

> > IIF 是编写 CASE 语句的简写方式。
> > IIF被翻译成CASE的事实......

所以当你写

```
IIF ( {condition} , {true} , {false} ) 
```

SQL Server 查询优化器从字面上看到

```
CASE WHEN {condition} THEN {true} ELSE {false} END 
```

* * *

仅供参考，您可以使用这个完全避免 CASE 语句

```
SELECT 1-sign(abs(ascii('W')-ascii(tax_type+'.'))) 
```

只是一个想法。

# javascript - 通过播放和暂停播放具有相应图像序列的音频

> ID：12706288
> 
> 赞同：1
> 
> 时间：2012-10-03T10:09:56.760
> 
> 标签：javascript, jquery, ajax, html

我正在尝试使用 HTML5 和 javascript（可能是 ajax 或 jquery）创建一系列带有背景音频的图像动画。我基本上是在尝试制作几个人（由图像描绘）和通过（音频）之间的简单对话的动画。

我有一个音频文件（mp3/ogg）和一系列图像。当我播放音频时，将相应地显示图像序列。

这是关键，如果我暂停或重播音频，图像序列也必须从头停止或重播。

所以图像序列必须与音频播放同步。

有什么想法或概念吗？现在我有一个可以播放/暂停的工作 jPlayer。也可以用jPlayer完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:39:55.810

只需根据`currentTime`您的音频做出决定。[例子](http://jsbin.com/ajihuh/2/)

```
var audio = document.querySelector('audio'),
    img = document.querySelector('img'),
    imgs = ['http://raptorsrepublic.com/wp-content/uploads/2012/08/meh_cat.jpg', 'http://2.bp.blogspot.com/_8tZf9lm-smo/R7hn7pNx-jI/AAAAAAAAALI/86DN7VedT_Q/s400/meh.jpg', 'http://2.bp.blogspot.com/-yWsoWNVX4jU/UAy5uJxD52I/AAAAAAAANSc/OTje6k_C5Q8/s1600/meh2.jpg'],
    duration, interval, currentImg;

(function callee(ready) {

    if (ready !== false) ready = true;

    if (!ready) {
        return audio.addEventListener('canplaythrough', callee);
    }

    if (!audio.playing) audio.play();

    if (!duration) {
        duration = audio.duration;
        interval = duration / imgs.length;
    }

    if (isNaN(duration)) return setTimeout(callee, 1000); 

    var currentTime = audio.currentTime;

    if (!currentImg) {
        img.src = currentImg = imgs[0];
    }

    var currentTimeImage = imgs[Math.floor(currentTime / interval)];

    if (currentTimeImage != currentImg) {
        img.src = currentImg = currentTimeImage;
    }

    setTimeout(callee, 1000);

})(false); 
```

# windows - 从 IE 启动桌面应用程序时删除 Win XP 中的“运行方式”弹出窗口

> ID：12706289
> 
> 赞同：1
> 
> 时间：2012-10-03T10:09:56.137
> 
> 标签：windows, popup, windows-xp, runas

我们开发了一个从 Web 应用程序启动桌面应用程序的 activex。它适用于 Windows 7。但在 Windows XP 中，每当我们尝试从 Web 应用程序启动桌面应用程序时，都会弹出“运行方式”窗口。

我已经尝试为这两个选项设置用户名，仍然是“运行方式”窗口弹出窗口。任何解决方法如何阻止此弹出窗口每次都出现？

问候

# typescript - 打字稿：在单独的文件中定义类及其方法

> ID：12706290
> 
> 赞同：10
> 
> 时间：2012-10-03T10:10:01.443
> 
> 标签：typescript

是否可以在一个文件中声明一个类并在单独的文件中定义其方法？

我有一些有**很多**方法的类，如果我能把它们展开一点就好了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-03T10:38:59.017

**简短回答：** Typescript 不支持将类定义拆分为多个文件。

**解决方法**：您可以定义一个包含该类成员的接口，以及实现该接口的两个不同的类。然后将一个类的属性混合到另一个类，以形成一个组合类。例如：

**大类.a.ts**

```
interface LargeClass {
   methodA(): string;
   methodB(): string;
}

class LargeA implements LargeClass {
   methodA: () => string; // not implemented, needed since otherwise we don't extend LargeClass
   methodB() {
     return "Hello world";
   }
} 
```

**大类.b.ts**

```
class LargeB implements LargeClass {
   methodA() {
     return "Foo";
   }
   methodB: () => string; // not implemented, needed since otherwise we don't extend LargeClass
} 
```

**用法.ts**

```
// Using underscore's extend to copy implementation from A to B
var c:LargeClass = _.extend(new LargeA(), new LargeB());

// Manually mixing in a to b
var a = new LargeA();
var b:LargeClass = new LargeB();
for (var prop in a) {
    b[prop]=a[prop];
} 
```

但是，如果您需要该类的构造函数，这将不起作用。确实它不是最理想的......解决方法仍然如此:)

哦，顺便说一句，这是因为打字稿不会为类发出统一的属性/字段类型声明——它只使用它们进行类型检查。

我也意识到你可以在没有接口的情况下做到这一点，而只是以更漂亮的方式构造类......我现在将如何做到这一点作为练习留给读者......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-10-19T00:57:25.597

您可以从类本身以外的其他文件导入函数

这是类文件的示例：

```
import {func1, func2, func3} from "./functions"

class MyClass {
   public foo: string = "bar"
   public func1 = func1.bind(this)
   public func2 = func2.bind(this)
   public func3 = func3.bind(this)
} 
```

以下是一个函数文件的示例：

```
import {MyClass} from "./MyClass"

export function func1(this: MyClass, param1: any, param2: any){
   console.log(this.foo)
   ...
} 
```

**重要提示：**确保每个导出的函数都不是箭头函数，因为您不能对箭头函数执行 bind(this)

# javascript - Rdio.com 界面 - 连续重组专辑数量

> ID：12706291
> 
> 赞同：1
> 
> 时间：2012-10-03T10:10:02.687
> 
> 标签：javascript, jquery, css, user-interface, responsive-design

[http://www.rdio.com](http://www.rdio.com)的用户界面给我留下了深刻的印象。（先登录）

我想知道他们如何重新组织中央 div 中按行填充的专辑封面数量，由屏幕尺寸决定。（尝试放大和缩小它）。

我意识到他们正在使用响应式样式表，但什么决定了每行中专辑数量的数量？这是某种javascript吗？还是它实际上是由响应式 CSS 样式表完成的？

是否有任何 jQuery 脚本/插件可以做类似的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T14:28:12.133

它是用 JavaScript 完成的，但我不知道任何特定的 jQuery 插件来实现这种确切的行为，除了[砌体](http://masonry.desandro.com)（注意它是否可以做到这一点）。

*但是，我可以解释并向您展示此类平铺视图*的基础知识。您需要为您的物品选择一个首选尺寸。在调整大小时，您计算可以放入容器的物品数量，然后将该值设置为上限，这将为您提供适合首选尺寸的物品的确切数量，或者适合容器的下一个更高数量的物品

```
itemsPerRow = ceil(containerWidth / preferedSize) 
```

既然您已经拥有适合或必须适合的项目数量，请计算可能的缩放尺寸，然后您可以将其应用于项目

```
scaledSize = containerWidth / itemsPerRow 
```

您还需要决定如何定位这些项目......您可以浮动它们：

[http://jsfiddle.net/Uuaht/](http://jsfiddle.net/Uuaht/)

但这可能有点不稳定，定位它们绝对看起来更好：

[http://jsfiddle.net/3wLZC/](http://jsfiddle.net/3wLZC/)

正如我所说，这只是基础知识，但它应该可以帮助您入门。

## jsfiddle 示例的代码：

### 漂浮的

*HTML*

```
<div id='grid'>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
    <div class='item'></div>
</div> 
```

*JS*

```
var grid = $('#grid');
var items = $('.item');

var preferedSize = 200;

function resize()
{
    var gridWidth = grid.width();
    var perRow = Math.ceil(gridWidth / preferedSize);
    var size = gridWidth / perRow;

    items.css({
        width: size + 'px',
        height: size + 'px'
    });
}

$(window).on('resize', resize);
resize(); 
```

*CSS*

```
.item {
    position: absolute;
    width: 200px;
    height: 200px;
    background-image: url('http://static.ddmcdn.com/gif/nasa.jpg');
    background-size: contain;
} 
```

### 绝对定位

*JS*

```
var grid = $('#grid');
var items = $('.item');

var preferedSize = 200;

function resize()
{
    var gridWidth = grid.width();
    var perRow = Math.ceil(gridWidth / preferedSize);
    var size = gridWidth / perRow;

    var row = 0;
    var col = 0;

    items.each(function(index, element)
    {
        var item = $(element);
        item.css({
            top: (row * size) + 'px',
            left: (col * size) + 'px',
            width: size + 'px',
            height: size + 'px'
        });

        col ++;
        if(index % perRow == perRow - 1)
        {
            row ++
            col = 0;
        }
    });
}

$(window).on('resize', resize);
resize(); 
```

*CSS*

```
.item {
    position: absolute;
    width: 200px;
    height: 200px;
    background-image: url('http://static.ddmcdn.com/gif/nasa.jpg');
    background-size: contain;
} 
```

# java - 如何在 Java 中进行奇异值分解 SVD

> ID：12706294
> 
> 赞同：1
> 
> 时间：2012-10-03T10:10:08.980
> 
> 标签：java, android, eclipse

如何在 Java 中找到 Matlab 的 svd。

在 Matlab 中可以这样做：

`[u,s,v]=svd(X); % X is a metric size kxk.`

我们如何在java中找到usv？

# java - 在android的onActivityResult中切换案例给出奇怪的响应

> ID：12706295
> 
> 赞同：-3
> 
> 时间：2012-10-03T10:10:10.800
> 
> 标签：java, android, android-activity, switch-statement, break

我有一个活动，我在其中打开相机、语音和视频的意图。我正在使用 onActivityResult。但是当 onActivityResult 被调用时，我观察到一些非常奇怪的事情，switch case 中的所有情况都被调用意味着它在所有情况下都是 gng 。

怎么可能。我有什么问题吗？.

下面是我的代码

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) 
     {
      super.onActivityResult(requestCode, resultCode, data); 

       if(resultCode == RESULT_OK){

          switch(requestCode) { 

             case 1:

                Uri selectedImage = data.getData();
                System.out.println("selectedimage"+selectedImage);
                String[] filePathColumn = {MediaStore.Images.Media.DATA};

                Cursor cursor = getContentResolver().query(selectedImage,       filePathColumn, null, null, null);
                cursor.moveToFirst();

                int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
                String filePath = cursor.getString(columnIndex);
                cursor.close();

                yourSelectedImage = BitmapFactory.decodeFile(filePath);
                /* Now you have choosen image in Bitmap format in object "yourSelectedImage". You can use it in
                 *  way you want! */

                btn_img.setImageBitmap(yourSelectedImage);

        case 0:
            try {
                yourSelectedImage = (Bitmap) data.getExtras().get("data");
                btn_img.setImageBitmap(yourSelectedImage);
                System.out.println("try for 0"+yourSelectedImage);
            } catch (Exception e) {
                // TODO: handle exception
            }

        case 2:
            try {

                    System.out.println("ooookkkkkk");

                        System.out.println("SELECT_AUDIO");
                        Uri selectedImageUri = data.getData();
                        selectedPath = getPath(selectedImageUri);
                        try {
                            System.out.println("try for 2"+yourSelectedImage);
                             btn_img.setImageBitmap(yourSelectedImage);
                        } catch (Exception e) {
                            System.out.println("catch"+yourSelectedImage);
                            // TODO: handle exception
                        }
                        System.out.println("SELECT_AUDIO Path : " + selectedPath);
                       // doFileUpload();

            } catch (Exception e) {
                // TODO: handle exception
            }

        case 3:
            try {

                        System.out.println("SELECT_AUDIO");
                        Uri selectedImageUri = data.getData();
                        selectedPath = getPath(selectedImageUri);
                        try {
                            System.out.println("try for 3"+yourSelectedImage);
                             btn_img.setImageBitmap(yourSelectedImage);
                        } catch (Exception e) {
                            System.out.println("catch"+yourSelectedImage);
                            // TODO: handle exception
                        }
                        System.out.println("SELECT_AUDIO Path : " + selectedPath);
                       // doFileUpload();

            } catch (Exception e) {
                // TODO: handle exception
            }

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-03T10:11:41.340

`break;`在每个案例的末尾添加并检查

```
switch(requestCode) { 
   case 1:
    //code
    break;
   case 2:
    //code
   break;
   .
   .
   default:

   break;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T10:13:18.333

在每个案例之后使用“break”语句。

前任：

```
 switch(value)
    {
    case 1:
    //code..
    break;

    case 2:
    //code
    break;
    } 
```

# javascript - 在对象中调用javascript动态方法

> ID：12706296
> 
> 赞同：2
> 
> 时间：2012-10-03T10:10:21.360
> 
> 标签：javascript, jquery

如果我使用以下两种方法创建一个类：

```
var Car = function() {}
Car.prototype = {
    run: function() {
        alert('run');
    },
    stop: function() {
        alert('stop');
    }
} 
```

并且当 DOM 准备好时会调用 test() 方法，
这个 test() 方法会创建一个 Car 的实例并调用 Car 的方法

```
$(document).ready(function() {
    test("run");
});
function test(method) {
    var instance = new Car();
    // call instance.run()
} 
```

我知道我必须使用 apply() 方法，
但我已经尝试了很多次但都失败了
那么，我该如何在 Object 中使用 apply() 方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:16:39.943

javascript中的对象是一个关联数组，因此您可以使用`[]`运算符通过字符串来寻址对象的任何成员，函数也是如此。

```
function test(method) {
    var instance = new Car();
    instance[method]();
} 
```

这将允许在对象 Car 上按名称调用函数。

[看到它在 JsFiddle 上工作](http://jsfiddle.net/cvJUq/)。

被调用方法中的上下文将正确地指向新创建的 Car 实例，而无需任何额外的努力，我猜这就是你想要的。当您需要将默认 ' ' 值更改为其他值时，通常使用`apply`or 。`call``this`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:13:20.113

> 我知道我必须使用 apply() 方法，

你没有。取消注释 instance.run() 代码，调用 test() 方法，它就可以工作了。

演示：http: [//jsfiddle.net/JkAnb/](http://jsfiddle.net/JkAnb/)

> 如何在 Object 中使用 apply() 方法

这取决于您想要达到的目标。[MDN 上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)有文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:17:38.677

也许你想打电话

> 实例.方法（）

动态调用，即基于传递的值运行/停止。你可以试试这个——

> 实例[方法].call(实例)

或者

> 实例[方法].apply(实例)

其中实例作为范围参数传递，这是要调用的函数的范围（函数内部“this”的值）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:32:44.990

为什么需要（基于对象的）函数式语言中的类？你的意图有点不清楚。您的测试函数中参数“方法”的隐含类型是什么？我假设它是一个方法名称。无论如何，下面的代码可能会有所帮助。

```
/* prefer this class pattern */
var Car = (function () {
    "use strict";
    Car.prototype = {
        name : undefined ,
        run: function () {
            return name_ + "::  run";
        },
        stop: function () {
            return name_ + "::  stop";
        }
    };
    /* constructor */
    function Car(name) {
        name_ = name;
    }
    return Car;
})();
function printer(msg_) {
   document.body.innerHTML += msg_ + "<br/>";
}
function test(car_, method_name_1, method_name_2) {
       printer(car_[method_name_1]());
       printer(car_[method_name_2]());
}
test( new Car("BMW"), "run", "stop");
test( new Car("Lada"), "run", "stop") 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-10-03T10:32:39.627

此外，您还可以使用以下`eval`功能：

```
var instance = new Car();
eval('instance.'+method+'();'); 
```

虽然 Felice Pollano 的方式在 imo 中要简洁得多。

[http://jsfiddle.net/VZdXb/](http://jsfiddle.net/VZdXb/)

# ruby-on-rails - SOA - 身份验证服务设计

> ID：12706299
> 
> 赞同：7
> 
> 时间：2012-10-03T10:10:30.020
> 
> 标签：ruby-on-rails, web-services, api, soa

我正在设计一个面向服务的体系结构，我还需要一个身份验证服务来识别客户端并允许他们访问资源。

实际上我找到了两种可能的解决方案：

*   使用 pubkey 和 privatekey 对每个请求进行签名
*   使用 pubkey 和 privatekey 的基于令牌的身份验证

我没有假设 oauth2 服务，因为它会为我的需要增加太多的系统设计开销，相反，我更喜欢采用更简单（但也很强大）的身份验证解决方案。

因此，我`AuthenticationService`的 .查看它是否匹配（检查用于生成 HMAC 的私钥是否有效）。

对于执行多项操作的最终开发人员来说，我可以看到最新的更简单，但它还需要更多检查来验证令牌并处理它的到期...

令牌解决方案会引发哪些单请求 HMAC 不会引发的潜在安全问题？你更喜欢什么，可能，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T19:16:25.330

最后我最终设计了一个基于相同亚马逊解决方案的身份验证服务。它要求用户使用私钥对每个请求进行签名。因此，请求将发送一个值为“PUBKEY:SIGNATURE”的 Authorization 标头，其中签名是由任何请求数据（可能是请求主体本身）加上时间戳组成的 HMAC，要在 Date 标头中传递。这个实现足够强大，可以避免 MITM 和重放攻击。

有关此解决方案的更多信息，[这里](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)是一个很好的解释，它帮助我理解了真正的实现。

希望这真的可以帮助世界上面临同样问题的其他人。

# java - 无法从 Java 桌面应用程序连接到服务器数据库

> ID：12706300
> 
> 赞同：2
> 
> 时间：2012-10-03T10:10:33.353
> 
> 标签：java

我创建了一个 java 桌面应用程序。我正在尝试将此应用程序连接到 mysql 服务器数据库。但它正在抛出套接字异常。我尝试了所有方法来解决这个问题，但没有一个对我有用。这个链接中提到了我遇到的问题[http://ubuntuforums.org/archive/index.php/t-849637.html](http://ubuntuforums.org/archive/index.php/t-849637.html)

![在此处输入图像描述](../Images/161729e4948b4a9ee3b3b40239653d38.png)

请在这方面帮助我。真的会很感谢。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-18T11:44:39.620

根据您在 2012 年 10 月 3 日 10:27 的回复，您已经发现这与 Java 无关。

修复您的网络问题：

*   确保 MySQL 真正运行
*   确保您使用正确的 IP/端口
*   确保没有防火墙阻止流量

# java - 如何将 JButton 添加到行的最后两列单元格？

> ID：12706306
> 
> 赞同：0
> 
> 时间：2012-10-03T10:10:41.613
> 
> 标签：java, swing, jtable, jscrollpane, jbutton

我想将 JButton 添加到行的最后两列单元格中..如何做到这一点....请帮助我...

```
String[] columnNames= {"EmployeeId","Name", "Designation", "JoiningDate", "DOB","ContactNo","MailId","Password","Edit","Remove"};
final DefaultTableModel model1 = new DefaultTableModel(rows, columnNames);
model1.addColumn("columnNames, data");
table3= new JTable(model1);
 table3.getColumn("Edit").setCellEditor(new ButtonEditor(new JCheckBox()));
table3.getColumn("Remove").setCellEditor(new ButtonEditor(new JCheckBox()));
table3.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
table3.setRowHeight( 32 );
JScrollPane pane= new JScrollPane(table3);
table3.setPreferredScrollableViewportSize(table3.getPreferredSize());
JTableHeader header = table3.getTableHeader();
header.setBackground(Color.CYAN );
pane.setBackground(Color.BLACK);
employeeFrame.add(pane) ; 
table3.getModel(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:32:36.763

您需要使用自定义单元格渲染器（我猜自定义编辑器来处理点击事件）。

[使用自定义渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#renderer)和[使用其他编辑](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editor)器结帐

您可能还想查看[CellEditor.isCellEditable](http://docs.oracle.com/javase/7/docs/api/javax/swing/CellEditor.html#isCellEditable%28java.util.EventObject%29)来设置激活按钮的点击次数

**更新**

```
public class MyTatbleEditor {

    public static void main(String[] args) {
        new MyTatbleEditor();
    }

    public MyTatbleEditor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {

                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setSize(200, 200);
                frame.setLocationRelativeTo(null);
                frame.setLayout(new BorderLayout());

                Vector rows = new Vector();
                for (int index = 0; index < 10; index++) {
                    Vector data = new Vector();
                    data.add(new Object());
                    rows.add(data);
                }
                Vector cols = new Vector();
                cols.add("One");
                DefaultTableModel model = new DefaultTableModel(rows, cols);

                JTable table = new JTable(model);

                table.getColumn("One").setCellEditor(new MyTableButtonEditor());
                table.getColumn("One").setCellRenderer(new MyTableButtonRenderer());

                frame.add(new JScrollPane(table));

                frame.setVisible(true);

            }
        });
    }

    protected class MyTableButtonEditor extends AbstractCellEditor implements TableCellEditor {

        private JButton button;
        private int column;
        private int row;

        public MyTableButtonEditor() {
            button = new JButton("Click me if you dare");
            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.invokeLater(new Runnable() {
                        @Override
                        public void run() {
                            JOptionPane.showMessageDialog(button, "How dare you :(", "Fancy that", JOptionPane.INFORMATION_MESSAGE);
                        }
                    });
                }
            });
        }

        @Override
        public boolean isCellEditable(EventObject e) {
            boolean isEditable = false;
            if (e instanceof MouseEvent) {
                MouseEvent me = (MouseEvent) e;
                if (me.getButton() == MouseEvent.BUTTON1 && me.getID() == MouseEvent.MOUSE_PRESSED) {
                    isEditable = true;
                }
            } else if (e instanceof KeyEvent) {
                KeyEvent ke = (KeyEvent) e;
                if (ke.getID() == KeyEvent.KEY_PRESSED && (ke.getKeyCode() == KeyEvent.VK_SPACE || ke.getKeyCode() == KeyEvent.VK_ENTER)) {
                    isEditable = true;
                }
            }
            return isEditable;
        }

        @Override
        public Object getCellEditorValue() {
            return new Object();
        }

        @Override
        public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
            if (isSelected) {
                button.requestFocus();
            }
            this.column = column;
            this.row = row;
            return button;
        }
    }

    protected class MyTableButtonRenderer implements TableCellRenderer {

        private JButton button;

        public MyTableButtonRenderer() {
            button = new JButton("Click me if you dare");
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
            return button;
        }

    }
} 
```

# p4merge - 如何在 p4merge 中将拆分器精确设置为窗口宽度的一半？

> ID：12706307
> 
> 赞同：1
> 
> 时间：2012-10-03T10:10:42.953
> 
> 标签：p4merge

我想知道是否有办法将 p4merge 窗口中的拆分器设置为 50% 的屏幕宽度。例如，在**Total Commander**中，您可以右键单击拆分器并从列表中选择，但在 p4merge 中没有类似的东西。

![p4merge 拆分器](../Images/ee133eda0e28fdd0584488cf6f4c2a8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:10:42.953

我使用Sysinternals 的[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)来跟踪 p4merge 写入设置的位置。似乎设置文件位于此处

> %USERPROFILE%\.p4merge\ApplicationSettings.xml

它看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--perforce-xml-version=1.0-->
<PropertyList varName="ApplicationSettings" IsManaged="TRUE">
 <String varName="CharSet">utf8-bom</String>
 <PropertyList varName="Connection" IsManaged="TRUE">
  <String varName="ApplicationLanguage">en</String>
 </PropertyList>
 <String varName="DiffOption">dl</String>
 <ByteArray varName="DiffSplitter">AAAA/wAAAAAAAAACAAAA8wAAAUMBAAAAMgEAAAAB</ByteArray>
 <Font varName="Font">
  <family>Courier</family>
  <pointSize>10</pointSize>
  <weight>Normal</weight>
  <italic>false</italic>
 </Font>
 <!--i cut it here for concise-->
</PropertyList> 
```

我的猜测是：

```
<ByteArray varName="DiffSplitter">AAAA/wAAAAAAAAACAAAA8wAAAUMBAAAAMgEAAAAB</ByteArray> 
```

是 p4merge 存储拆分器位置的地方。

我不想解密这个值，所以我只是删除了整个标签，拆分器移动到正好 50% 的窗口宽度。

# linq-to-sql - Linq选择不同的列合二为一

> ID：12706310
> 
> 赞同：1
> 
> 时间：2012-10-03T10:10:51.910
> 
> 标签：linq-to-sql

我有 3 张桌子

```
Person
--------
personname

student
-------
studentid
address
personid

teacher
--------
teacherid
address
personid 
```

我的 linq 查询是

```
var p=from p in db.person
    join s in db.student
    on p.personid equals s.personid
    join t in db.teacher
    on p.personid equals t.personid
    select {address=????}; 
```

如何在一个字段中同时选择学生和教师地址？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:13:27.287

```
select new { address = s.address + " " + t.address }; 
```

这应该可行 - 使用您喜欢的任何分隔符更改“”。

# perl - 相对比 在 perl 中使用正则表达式

> ID：12706311
> 
> 赞同：1
> 
> 时间：2012-10-03T10:10:55.903
> 
> 标签：perl

我从文件中逐行提取并拆分成单词。我想要除“<”和“>”之间的单词之外的所有单词。

```
 if($word =~ m/^(\<).*(\>)$/)
            {
                 print "Remove this word";
            } 
```

我尝试了上面的代码。但它不起作用。

这是我正在处理的文件：

```
#> main bcel_coverage.A    
#> <init> bcel_coverage.C
<# <init>
   ?? main
abc
<# main 
```

我不想`<init>`在上面的文件中打印。其他任何内容也可以包含在“<”和“>”中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:54:53.713

```
perl -ne '$_=~s/<[^>^<]*>//g; print' your_file 
```

测试如下：

```
> cat temp
#> main bcel_coverage.A    
#> <init> bcel_coverage.C
<# <init>
   ?? main
abc
<# main
> perl -ne '$_=~s/<[^>^<]*>//g; print' temp
#> main bcel_coverage.A    
#>  bcel_coverage.C
<# 
   ?? main
abc
<# main
> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:18:02.853

使用匹配包含在 . 中的单词的正则表达式拆分行`<...>`。

```
% perl -e 'use Data::Dumper; $line = "ss<a>s<da>fg"; @words = split(/<[^>]+>/, $line); print Data::Dumper::Dumper( @words );'

$VAR1 = 'ss';
$VAR2 = 's';
$VAR3 = 'fg'; 
```

正则表达式：

```
< :    Match starting <
[^>] : Anything that is not >
> :    Closing > 
```

# php - 使用php幻灯片图像

> ID：12706313
> 
> 赞同：0
> 
> 时间：2012-10-03T10:11:06.580
> 
> 标签：php, html, css

我正在尝试仅使用 php 来滑动图像。我尝试使用以下代码从数组中滑动图像。但它只在新窗口中显示一张全尺寸图像。代码是：我应该在标题中写什么以查看带有下一张图片的幻灯片。和 $images[$i]="uploads/".$img; 将带有文件夹路径“uplods”的图像名称存储到 $images 数组中是否正确。

```
i have refer this site for code:
http://www.sitepoint.com/picture-showcase-php-html/

<?php
          $sql="SELECT * FROM gallary WHERE aid='$aid'";
          $res=mysql_query($sql);
          $count=mysql_num_rows($res);                  

                    for($i=1;$i<$count;$i++)
                      {
                            $row=mysql_fetch_assoc($res);
                            $img=stripslashes($row['image']);                 
                            $images[$i]="uploads/".$img;
                      }//end of for
                         //print_r($images);
                         $total=count($images); 
                        $secondsFixed=10; // seconds to keep list the same <br>  
                        $seedValue=(int)(time()/$secondsFixed); 
                        srand($seedValue); 

                        for ($i=0;$i<$total;++$i) // shuffle list 'randomly' <br>  
                        { 

                                $r=rand(0,$total-1); 
                                $temp =$images[$i]; 
                                $images[$i]=$images[$r]; 
                                $images[$r]=$temp; 
                        }

                        $index=(int)($_GET['i']); // image index passed in <br>  
                        $i=$index%$total; // make sure index always in bounds <br>  
                        $file=$images[$i]; 
                        header("Location:"); // and pass file reference back <br>  
                        ?>  
                     </div>

            </div><!--End of right Container --> 
```

# web-applications - 从 Tomcat 6.0 迁移到 jboss-5.1

> ID：12706317
> 
> 赞同：1
> 
> 时间：2012-10-03T10:11:30.660
> 
> 标签：web-applications, tomcat6, jboss5.x, migrate

我一直使用 Apache Tomcat 6.0.32 开发我的 Web 应用程序（jsp-struts-hibernate）现在我需要让它在 JBOSS AS 5.1 中工作。

在 JBOSS 部署文件夹中部署 XYZ.war 文件时，出现如下错误：

org.jboss.profileservice.spi.NoSuchDeploymentException：无法在文件中找到部署：XYZ.war

15:19:33,287 警告 [AbstractManagedObjectPopulator] 无法从非简单属性创建字符串名称：ManagedProperty{JNDIName,JNDIName,metaType=SimpleMetaType:java.lang.String}，值 = null 15:20:17,322 错误 [AbstractKernelController] 安装错误解析：name=vfszip:/C:/AppServer/Experiments/jboss-5.1.0.GA/server/default/deploy/XYZ.war/ state=Not Installed mode=Manual requiredState=Parse org.jboss.deployers.spi .DeploymentException：为 vfszip 创建托管对象时出错：/C:/AppServer/Experiments/jboss-5.1.0.GA/server/default/deploy/XYZ.war/

部署错误：部署“vfszip:/C:/AppServer/Experiments/jboss-5.1.0.GA/server/default/deploy/XYZ.war/”由于以下原因而出错：java.net .ConnectException：连接超时：连接

谁能帮我解释一下我需要做些什么才能使它工作，因为我对 JBOSS 很陌生？

谢谢和问候， rishi

# objective-c - UITableView 每个按钮都有不同的视图

> ID：12706318
> 
> 赞同：1
> 
> 时间：2012-10-03T10:11:34.833
> 
> 标签：objective-c, ios, uitableview

我正在编写一个 iPhone 应用程序，它应该创建一个带有 5 个按钮的 TableView。每个按钮都应该打开一个不同的 TableView。

我正在为我的应用程序使用故事板，而故事板视图控制器仅显示一个按钮，那么如何将我的应用程序中的每个按钮链接到单独的 detailviewcontroller？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:49:02.723

如果您希望每个按钮触发不同的控制器，而不是必须使用不同的目标控制器创建 5 个序列，而不是点击按钮时，请使用以下功能显示不同的控制器。

```
– performSegueWithIdentifier:sender: 
```

给每个序列一个不同的标识符，并根据点击哪个按钮（可以使用按钮标签检查）执行不同的序列，从而显示不同的控制器......

在 viewController 之间传递数据是一项常见任务，我很惊讶您以前没有这样做过：转到此[链接](http://www.appcoda.com/storyboards-ios-tutorial-pass-data-between-view-controller-with-segue/)。

# vba - 如何使用vba查找上次使用的列的地址

> ID：12706325
> 
> 赞同：2
> 
> 时间：2012-10-03T10:11:56.713
> 
> 标签：vba, excel

> **可能重复：**
> [行中最后一个非空单元格；Excel VBA使用 VBA](https://stackoverflow.com/questions/4872512/last-not-empty-cell-in-row-excel-vba)
> [查找 Excel 工作表中非空白列的数量](https://stackoverflow.com/questions/6897347/finding-the-number-of-non-blank-columns-in-an-excel-sheet-using-vba)

您好，我已经编写了一个 vba 代码来获取选定单元格（活动单元格）的地址。但我想要最后使用的列地址的地址，这是我写的代码

```
Dim a As String
a = Split(ActiveCell.Address, "$")(1)
MsgBox a 
```

它工作正常，但我想要最后使用的列的地址。就像我有高达“AB”列的值一样，我想使用 vba 代码获取该地址。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:17:40.103

像这样？

```
Option Explicit

Sub Sample()
    Dim ws As Worksheet
    Dim a As String
    Dim LastCol As Long

    '~~> Set this to the relevant sheet
    Set ws = ThisWorkbook.Sheets("Sheet1")

    '~~> Get the last used Column
    LastCol = LastColumn(ws)

    '~~> Return Column Name from Column Number
    a = Split(ws.Cells(, LastCol).Address, "$")(1)

    MsgBox a
End Sub

Public Function LastColumn(Optional wks As Worksheet) As Long
    If wks Is Nothing Then Set wks = ActiveSheet
    LastColumn = wks.Cells.Find(What:="*", _
                After:=wks.Range("A1"), _
                Lookat:=xlPart, _
                LookIn:=xlFormulas, _
                SearchOrder:=xlByColumns, _
                SearchDirection:=xlPrevious, _
                MatchCase:=False).Column
End Function 
```

# android - “您请求的项目不可购买”android 应用内购买错误

> ID：12706326
> 
> 赞同：2
> 
> 时间：2012-10-03T10:12:00.270
> 
> 标签：android

我已经在我的应用程序中实现了应用内购买。

*   我上传了未发布但保存为草稿的 apk。
*   开发者邮箱和测试账号邮箱不一样。
*   我还阅读了此文档

    [http://developer.android.com/guide/google/play/billing/billing_overview.html](http://developer.android.com/guide/google/play/billing/billing_overview.html)和[http://developer.android.com/guide/google/play/billing/billing_integrate.html](http://developer.android.com/guide/google/play/billing/billing_integrate.html)。

但没有得到任何想法。有没有人有任何其他想法？

我到了我做错的地方。实际上我没有使用我的测试帐户。现在我正在使用测试帐户，但仍然存在同样的问题，所以我有两个问题。

1.  再次保存后，我应该等待 2-3 小时吗？

2.  我上传了版本 2 的 APK，所以这里需要更改吗？

    ```
    private static Bundle makeRequestBundle(String method) {
        Bundle request = new Bundle();
        request.putString("BILLING_REQUEST", method);
        request.putInt("API_VERSION", 1);
        request.putString("PACKAGE_NAME", mContext.getPackageName());
        return request;
    } 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T08:31:57.633

请确保应用程序不需要发布，但项目确实需要发布。请参阅此链接：http: [//developer.android.com/guide/google/play/billing/billing_testing.html#billing-testing-static](http://developer.android.com/guide/google/play/billing/billing_testing.html#billing-testing-static)

# c# - 无法从后面的代码访问 Metro XAML 自定义控件

> ID：12706327
> 
> 赞同：4
> 
> 时间：2012-10-03T10:12:11.847
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

尝试使用[这个](https://stackoverflow.com/questions/10490709/righttapped-not-fired-on-metro-listviewitem-if-listview-in-other-than-none-sel)问题的解决方案给我一个奇怪的问题。（为方便起见，在此复制）

这是解决`ListView`吞下右键单击事件并阻止 AppBar 打开的问题的解决方案 - 一个继承`ListView`并覆盖以下`OnRightTapped`事件的类`ListViewItem`：

```
public class MyListView : ListView
{
    protected override DependencyObject GetContainerForItemOverride()
    {
        return new MyListViewItem();
    }
}

public class MyListViewItem : ListViewItem
{
    protected override void OnRightTapped(Windows.UI.Xaml.Input.RightTappedRoutedEventArgs e)
    {
        base.OnRightTapped(e);
        e.Handled = false; // Stop 'swallowing' the event
    }
}

<CustomControls:MyListView
    x:Name="ItemsList"
    ...
    SelectionMode="Single"
    RightTapped="MyListView_RightTapped">
</CustomControls:MyListView> 
```

我已经按照描述在一个名为 CustomControls 的新命名空间中实现了指定的自定义控件。我已将该命名空间添加到 MainPage.xaml

```
xmlns:CustomControls="using:CustomControls" 
```

然后，当我尝试在后面的代码中引用“ItemsList”时，出现编译错误

```
The name 'ItemsList' does not exist in the current context 
```

我尝试过构建、重建、清理解决方案、关闭和重新打开解决方案、将类放在主项目命名空间下，但都无济于事。

**总而言之，MainPage.cs 在 MainPage.xaml 上看不到自定义控件**

更新 2：改写问题以删除不相关的问题。我还更改了标题以反映真正的问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T10:52:45.577

我正在使用`Name`但应该一直在使用`x:Name`. 显然自定义控件和用户控件需要使用`x:Name`而不是`Name`在后面的代码中看到。

有关此处差异的更多信息：

[在 WPF 中，x:Name 和 Name 属性有什么区别？](https://stackoverflow.com/questions/589874/in-wpf-what-are-the-differences-between-the-xname-and-name-attributes)

# jquery - 获取div中的文本

> ID：12706330
> 
> 赞同：2
> 
> 时间：2012-10-03T10:12:33.920
> 
> 标签：jquery

> **可能重复：**
> [jquery - 获取没有子文本的元素的文本](https://stackoverflow.com/questions/11362085/jquery-get-text-for-element-without-children-text)

我有一个 div，里面有文本，并且跨越了这样的文本：

```
<div>
text
<span>other text</span>
</div> 
```

我只想在 div 中获取文本，而不是在 span 中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:26:24.710

尝试这个

```
 var myText = $('#dd').clone()            
             .children()    //select all the children
             .remove()  //remove all the children
             .end() //again go back to selected element
             .text();   //get the text of element 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:15:36.617

```
var theText = "";
$('div').contents().each(function() {
    if(this.nodeType === 3) theText += $(this).text();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:24:40.537

您可以为此使用[**.clone()**](http://api.jquery.com/clone/)，如下所示：

```
b = $('div').clone();
b.children('span').remove();
alert( b.text() ); // alerts "text" 
```

使用`.clone()`我们可以复制 div，移除 span，然后获取文本，所有这些都不会影响页面上显示的原始 DOM 元素。

# iphone - 在iphone中，红色圆圈的名称是什么，其中包含未读消息的数量

> ID：12706333
> 
> 赞同：1
> 
> 时间：2012-10-03T10:12:51.840
> 
> 标签：iphone, naming-conventions

它是“工具提示”或“气泡”还是其他什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:16:16.547

它被称为应用程序图标徽章。可以通过设置`applicationIconBadgeNumber`共享`UIApplication`实例的属性来修改它。

你可以这样设置

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:99]; 
```

这样做会将数字 99 放在应用程序徽章上。将其设置为零会隐藏徽章。此属性的默认值为零。

来源：UIApplication 参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:25:40.053

[您在UITabBarItem](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarItem_Class/Reference/Reference.html)实例上也有徽章编号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:14:54.753

它是通过`applicationIconBadgeNumber`属性设置的`UIApplication`，应该是“徽章”或“徽章编号”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:46:02.153

```
int tabBarWithBadge = 2 ; //set which tab you want the red badge currently its 2
int badgeValue = 007;

 [[[[[[[UIApplication sharedApplication]delegate]  tabBarController] viewControllers] objectAtIndex:tabBarWithBadge] tabBarItem] setBadgeValue:badgeValue]; 
```

这里 tabBarController 是在 appDelegate 文件中设置的 UItabBarController

# sql - Doctrine 2 使用 LIKE 查询

> ID：12706337
> 
> 赞同：57
> 
> 时间：2012-10-03T10:13:06.477
> 
> 标签：sql, symfony, doctrine-orm

我有这个查询代码：

```
$repository = $em->getRepository('AcmeCrawlerBundle:Trainings');
       $query = $repository->createQueryBuilder('p')
               ->where('p.title LIKE :word')
               ->orWhere('p.discription LIKE :word')
               ->setParameter('word', $word)
               ->getQuery();
$trainings = $query->getResult(); 
```

问题是：即使存在匹配项，此查询也找不到它们。我用这段代码来查看完整的 sql：

```
print_r(array(
        'sql'        => $query->getSQL(),
        'parameters' => $query->getParameters(),
        )); 
```

我有什么：

```
FROM Trainings t0_ WHERE t0_.title LIKE ? OR t0_.discription LIKE ? [parameters] => Array ( [word] => Spoken ) 
```

（查询的最后一部分）请告诉我要改变什么？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-10-03T10:15:18.930

您忘记了`%`单词周围的标志：

```
->setParameter('word', '%'.$word.'%') 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2017-12-31T10:49:52.710

以下是您可以采取的一些额外步骤来进一步清理输入数据。

您应该转义在百分号之间插入的术语：

```
->setParameter('word', '%'.addcslashes($word, '%_').'%') 
```

百分号“%”和下划线符号“_”被解释为通配符`LIKE`。如果它们没有正确转义，攻击者可能会构建任意复杂的查询，从而导致拒绝服务攻击。此外，攻击者可能会获得他不应该获得的搜索结果。可以在此处找到攻击场景的更详细描述：[https ://stackoverflow.com/a/7893670/623685](https://stackoverflow.com/a/7893670/623685)

# php - 如何测试用户名是否是 posix 组的成员？

> ID：12706341
> 
> 赞同：0
> 
> 时间：2012-10-03T10:13:14.373
> 
> 标签：php

在我运行 PHP 的系统上，我有一个 username`foo`和一个 posix group `bar`。在我的 PHP 脚本中，如何测试用户名是否`foo`是 posix 组的成员`bar`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:11:07.607

试试下面的代码。

```
$user_name  = 'foo';
$group_name = 'bar';
$group_info  = posix_getgrnam($group_name);
if (in_array($user_name, $group_info['members'])) {
  echo "{$user_name} is a member of {$group_name}";
} 
```

# ios - 如何模拟iOS版本升级？

> ID：12706347
> 
> 赞同：31
> 
> 时间：2012-10-03T10:13:29.067
> 
> 标签：ios

我们需要在 iOS 升级的上下文中测试我们的应用程序（例如，5.1 -> 6.0）。不幸的是，Apple 不允许降级设备。我们想过在模拟器里做，但是不同版本的模拟器本身就是不同的环境。我认为我们可以将捆绑包从一个模拟器复制到另一个模拟器，但这不会迁移钥匙串（会吗？）。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-04-13T22:28:19.203

**要测试从一种状态（之前）到另一种（之后）的转换，您需要一种将应用程序置于之前状态的方法。**

*在更新操作系统时*，您的应用程序肯定不会运行，因此您真的只需要担心应用程序启动并发现操作系统已更新。有几个选项：

*   **将您应用程序的所有数据文件从运行“旧”iOS 版本（根据您的问题为 5.1）的设备复制到运行新（6.0）版本的设备。**Xcode 中的管理器可让您轻松地将应用程序的“容器”从设备复制到 Mac，反之亦然。

*   **让您的应用程序以“旧”格式写入数据。**应用程序根据环境具有以不同格式读取和写入数据的方法并不少见，因此让您的应用程序以旧格式写入数据通常比实际从旧设备复制更容易。

无论您选择哪种路径，请考虑您可能进行操作系统版本相关更改的任何其他位置（如用户默认值），并将其设置回与先前操作系统对应的值。这尤其适用于未存储在应用程序沙箱中的钥匙串项目。

单元测试框架（如 Apple 的 XCTest 框架）通常有一个设置机制，您可以使用它来将您的应用程序重置为*之前*的状态，包括复制文件、添加和删除钥匙串项、设置默认项等。然后您可以添加单元测试运行更新中可能涉及的任何代码并测试结果。通过一组易于重复的测试，您将能够更轻松地调试任何问题。

无论您采用何种方法，目标都是使应用程序处于与操作系统更新后首次运行时相同的状态。您不必担心模拟实际的操作系统更新，您只需让应用程序认为更新刚刚发生。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-13T21:20:26.237

目前，您仍然可以安装 iOS 8.2。发布新版本时，Apple 会在短时间内打开两个版本以供安装。当“签名窗口”打开时，您可以升级设备、测试，然后从旧版本的映像中恢复它。因此，您可以在窗口打开时进行一些密集测试，但这显然不是一个长期的解决方案（通常只持续几天）。

如果您有预算，您可以在设备上安装 8.2，在其上贴上“请勿升级”的大标签，并在相关的情况下将其保持在 8.2 上。在该设备上安装您的应用程序并进行备份（启用备份加密以便包含钥匙串条目），然后将该备份恢复到另一台 8.3 设备上 - 这与您在进行升级时将经历的过程基本相同/restore 通过 iTunes 所以它应该非常接近。当然，它与设备上的 OTA 更新并不完全相同，但为此，请参阅上面的选项 1（很快就会看到）。

# json - RestEasy Jettison/Jackson 定制

> ID：12706348
> 
> 赞同：1
> 
> 时间：2012-10-03T10:13:31.923
> 
> 标签：json, jboss, resteasy, jettison

我正在尝试将我的对象与 JAXB 注释一起用于我的 JAX-RS 资源的应用程序/json 输出。我正在使用 RestEasy（最新版本 - 7.1.1.Final 和 2.3.4.Final）在 JBoss AS7 上运行。问题是我想自定义我的 JSON 输出。我必须注意，我不在乎我会使用 Jettison 还是 Jackson，但我只能让 Jettison 正常工作（部署应用程序）而不会出错。如果可能的话，我也想只在我的对象上使用 JAXB 注释 - 但它不是必需的。

1）我想在 XmlAttribute 注释字段中省略“@”。我发现了属性如何使用 Jettison 进行操作，但我不知道如何在 JBoss AS7 上配置它。没有找到任何 ContextResolver 示例。

2）我想要“正常”的 JSON 数组，例如

```
@XmlRootElement(name = "root")
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    @XmlElementRef(type = Entry.class, required = false)
    // no difference with @XmlElement
    private Set<Entry> entries;
} 
```

序列化为

```
{"entries":
  {"entry":[{...},{...},{...}]}
} 
```

我希望

```
{"entries":
  [
   {"entry":{...}},
   {"entry":{...}},
   {"entry":{...}}      
  ]
} 
```

或只是（省略 XmlRootElement）

```
{"entries":
 [{...},{...},{...}]
} 
```

3）正如我所指出的，我不在乎我将使用哪个提供程序（Jettison/Jackson），但很难找到如何正确设置 maven 依赖项以使应用程序可以无错误地部署的工作示例。到目前为止，我正在使用：

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>${resteasyVersion}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <version>${resteasyVersion}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jettison-provider</artifactId>
        <version>${resteasyVersion}</version>
        <!--<scope>provided</scope>-->
        <exclusions>
            <exclusion>
                <groupId>javax.xml.bind</groupId>
                <artifactId>jaxb-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.xml.bind</groupId>
                <artifactId>jaxb-impl</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.xml.stream</groupId>
                <artifactId>stax-api</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

感谢所有答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:31:41.600

到目前为止，我设法让 Jackson 工作并使用其提供者特定的注释（@JsonProperty ...等等）解决了我的问题。我试图只找到 JAXB 解决方案，但我也可以接受这个。

顺便说一句我的依赖

```
 <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxrs</artifactId>
        <version>${resteasyVersion}</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jaxb-provider</artifactId>
        <version>${resteasyVersion}</version>
    </dependency>
    <dependency>
        <groupId>org.jboss.resteasy</groupId>
        <artifactId>resteasy-jackson-provider</artifactId>
        <version>${resteasyVersion}</version>
    </dependency> 
```

# c# - 在 MS 图表中绘制 y 轴上的时间和 x 轴上的时间

> ID：12706349
> 
> 赞同：0
> 
> 时间：2012-10-03T10:13:33.080
> 
> 标签：c#, mschart

我是 MS Chart 和图表世界的新手！！

我的要求如下

我们有考勤管理系统，可以记录员工的出入时间。

我的任务是创建图表，在 x 轴上绘制日期，在 y 轴上绘制时间。

例如，如果员工于 2012 年 9 月 15 日上午 9:00 到达，那么 9 月 15 日将显示在 x 轴上，y 值将是上午 9:00。

因此，在选择日期范围时，将绘制这样的图表。

我从数据库中获取日期时间格式的价值

请让我知道我该怎么做？

我正在使用 C#.Net 和 MS Chart

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:40:41.950

可能这个例子可以改善你的问题。[日期时间操作](http://www.dotnetperls.com/datetime-parse)

如果有帮助，请随时将其标记为答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:55:48.583

这是我能想到的最简单的解释。仔细看看 [WinForms 中的图表控件](http://www.dotnetperls.com/chart)

让我们知道它是否有帮助

# php - 如何按列值对子数组进行分组？

> ID：12706359
> 
> 赞同：90
> 
> 时间：2012-10-03T10:14:11.950
> 
> 标签：php, arrays, grouping

我有以下数组

```
Array
(
    [0] => Array
        (
            [id] => 96
            [shipping_no] => 212755-1
            [part_no] => reterty
            [description] => tyrfyt
            [packaging_type] => PC
        )

    [1] => Array
        (
            [id] => 96
            [shipping_no] => 212755-1
            [part_no] => dftgtryh
            [description] => dfhgfyh
            [packaging_type] => PC
        )

    [2] => Array
        (
            [id] => 97
            [shipping_no] => 212755-2
            [part_no] => ZeoDark
            [description] => s%c%s%c%s
            [packaging_type] => PC
        )

) 
```

如何将数组分组`id`？是否有任何本机 php 函数可用于执行此操作？

虽然这种方法有效，但我想使用 a 来执行此操作`foreach`，因为使用上述方法我会得到重复的项目，这是我试图避免的？

在上面的例子`id`中有 2 个项目，所以它需要在里面`id`

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-10-03T10:20:11.070

没有原生的，只是使用一个循环。

```
$result = array();
foreach ($data as $element) {
    $result[$element['id']][] = $element;
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-10-03T10:19:59.220

您可以尝试以下方法：

```
$group = array();

foreach ( $array as $value ) {
    $group[$value['id']][] = $value;
}

var_dump($group); 
```

输出：

```
array
  96 => 
    array
      0 => 
        array
          'id' => int 96
          'shipping_no' => string '212755-1' (length=8)
          'part_no' => string 'reterty' (length=7)
          'description' => string 'tyrfyt' (length=6)
          'packaging_type' => string 'PC' (length=2)
      1 => 
        array
          'id' => int 96
          'shipping_no' => string '212755-1' (length=8)
          'part_no' => string 'dftgtryh' (length=8)
          'description' => string 'dfhgfyh' (length=7)
          'packaging_type' => string 'PC' (length=2)
  97 => 
    array
      0 => 
        array
          'id' => int 97
          'shipping_no' => string '212755-2' (length=8)
          'part_no' => string 'ZeoDark' (length=7)
          'description' => string 's%c%s%c%s' (length=9)
          'packaging_type' => string 'PC' (length=2) 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-06-14T10:12:07.050

在更具功能性的编程风格中，您可以使用[`array_reduce`](https://www.php.net/manual/en/function.array-reduce.php)

```
$groupedById = array_reduce($data, function (array $accumulator, array $element) {
  $accumulator[$element['id']][] = $element;

  return $accumulator;
}, []); 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-03-14T17:29:47.343

受 .NET LINQ 的启发，我只是把它放在一起

```
<?php

// callable type hint may be "closure" type hint instead, depending on php version
function array_group_by(array $arr, callable $key_selector) {
  $result = array();
  foreach ($arr as $i) {
    $key = call_user_func($key_selector, $i);
    $result[$key][] = $i;
  }  
  return $result;
}

 $data = array(
        array(1, "Andy", "PHP"),
        array(1, "Andy", "C#"),
        array(2, "Josh", "C#"),
        array(2, "Josh", "ASP"),
        array(1, "Andy", "SQL"),
        array(3, "Steve", "SQL"),
    );

$grouped = array_group_by($data, function($i){  return $i[0]; });

var_dump($grouped);

?> 
```

瞧，你得到了

```
array(3) {
  [1]=>
  array(3) {
    [0]=>
    array(3) {
      [0]=>
      int(1)
      [1]=>
      string(4) "Andy"
      [2]=>
      string(3) "PHP"
    }
    [1]=>
    array(3) {
      [0]=>
      int(1)
      [1]=>
      string(4) "Andy"
      [2]=>
      string(2) "C#"
    }
    [2]=>
    array(3) {
      [0]=>
      int(1)
      [1]=>
      string(4) "Andy"
      [2]=>
      string(3) "SQL"
    }
  }
  [2]=>
  array(2) {
    [0]=>
    array(3) {
      [0]=>
      int(2)
      [1]=>
      string(4) "Josh"
      [2]=>
      string(2) "C#"
    }
    [1]=>
    array(3) {
      [0]=>
      int(2)
      [1]=>
      string(4) "Josh"
      [2]=>
      string(3) "ASP"
    }
  }
  [3]=>
  array(1) {
    [0]=>
    array(3) {
      [0]=>
      int(3)
      [1]=>
      string(5) "Steve"
      [2]=>
      string(3) "SQL"
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-08-29T13:58:53.237

使用并缓存要分组的列值，然后将剩余数据作为您在结果中创建的组的新子数组推送。

```
function array_group(array $data, $by_column)
{
    $result = [];
    foreach ($data as $item) {
        $column = $item[$by_column];
        unset($item[$by_column]);
        $result[$column][] = $item;
    }
    return $result;
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-08-30T06:15:22.420

如果您需要具有全套测试的 Composer 替代方案，[array_group_by](https://github.com/jakezatecky/array_group_by)函数可以满足您的需求。完全披露：我是该库的作者。

```
$grouped = array_group_by($arr, 'id'); 
```

它还支持多级分组，甚至通过使用自定义回调函数进行复杂分组：

```
// Multilevel grouping
$grouped = array_group_by($arr, 'id', 'part_no');

// Grouping by a callback/callable function
$grouped = array_group_by($records, function ($row) {
    return $row->city;
}); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-08-02T05:29:46.057

$arr = 数据阵列；

$fldName = 按列名分组；

```
function array_group_by( $arr, $fldName) {
    $groups = array();
    foreach ($arr as $rec) {
        $groups[$rec[$fldName]] = $rec;
    }
    return $groups;
}

function object_group_by( $obj, $fldName) {
    $groups = array();
    foreach ($obj as $rec) {
        $groups[$rec->$fldName] = $rec;
    }
    return $groups;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-03T10:16:50.153

```
$arr = array();

foreach($old_arr as $key => $item)
{
   $arr[$item['id']][$key] = $item;
}

ksort($arr, SORT_NUMERIC); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-10-03T10:23:07.337

```
for($i = 0 ; $i < count($arr)  ; $i++ )
{
    $tmpArr[$arr[$i]['id']] = $arr[$i]['id'];
}
$vmpArr = array_keys($tmpArr);
print_r($vmpArr); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-03T12:13:49.990

扩展@baba的答案，我喜欢，但创建了一个更复杂的三层深度多维（array（array（array）））：

```
$group = array();
 foreach ( $array as $value ) {
   $group[$value['id']][] = $value; 
 }

// output only data from id 96
foreach ($group as $key=>$value) { //outer loop
 foreach ($value as $k=>$v){ //inner loop
  if($key==96){ //if outer loop is equal to 96 (could be variable)
   for ($i=0;$i<count($k);$i++){ //iterate over the inner loop
        printf($key.' has a part no. of '.$v['part_no'].' and shipping no. of '.$v['shipping_no'].'<br>');
   }
 }
}
 } 
```

将输出：

96 有一个零件号。reterty 和运输编号 212755-1

96 有一个零件号。dftgtryh 和运输编号 212755-1

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-06-04T15:58:12.890

使用 LINQ 很简单，它在 PHP 中的几个库中实现，包括[YaLinqo](https://github.com/Athari/YaLinqo) *。它允许对数组和对象执行类似 SQL 的查询。该`groubBy`功能专为分组而设计，您只需指定要分组的字段：

```
$grouped_array = from($array)->groupBy('$v["id"]')->toArray(); 
```

Where`'$v["id"]'`是`function ($v) { return $v["id"]; }`该库支持的简写。

结果将与接受的答案完全相同，只是代码更少。

[* 由我开发]

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2016-05-23T14:00:57.980

**1.`GROUP BY`一键**

此函数适用`GROUP BY`于数组，但有一个重要限制：只有一个分组“列”( `$identifier`) 是可能的。

```
function arrayUniqueByIdentifier(array $array, string $identifier)
{
    $ids = array_column($array, $identifier);
    $ids = array_unique($ids);
    $array = array_filter($array,
        function ($key, $value) use($ids) {
            return in_array($value, array_keys($ids));
        }, ARRAY_FILTER_USE_BOTH);
    return $array;
} 
```

* * *

**2\. 检测表的唯一行（二维数组）**

此功能用于过滤“行”。如果我们说，一个二维数组是一个表，那么它的每个元素就是一行。因此，我们可以使用此功能删除重复的行。如果它们的所有列（第二维的元素）相等，则两行（第一维的元素）相等。适用于“列”值的比较：如果一个值是简单[类型](http://php.net/manual/en/language.types.php)，则该值本身将用于比较；否则将使用其类型 ( `array`, `object`, `resource`, `unknown type`)。

策略很简单：从原始数组中创建一个浅数组，其中元素是`implode`原始数组的 d 个“列”；然后申请`array_unique(...)`它; 最后使用检测到的 ID 过滤原始数组。

```
function arrayUniqueByRow(array $table = [], string $implodeSeparator)
{
    $elementStrings = [];
    foreach ($table as $row) {
        // To avoid notices like "Array to string conversion".
        $elementPreparedForImplode = array_map(
            function ($field) {
                $valueType = gettype($field);
                $simpleTypes = ['boolean', 'integer', 'double', 'float', 'string', 'NULL'];
                $field = in_array($valueType, $simpleTypes) ? $field : $valueType;
                return $field;
            }, $row
        );
        $elementStrings[] = implode($implodeSeparator, $elementPreparedForImplode);
    }
    $elementStringsUnique = array_unique($elementStrings);
    $table = array_intersect_key($table, $elementStringsUnique);
    return $table;
} 
```

也可以改进比较，检测“列”值的类，如果它的类型是`object`.

`$implodeSeparator`应该或多或少复杂，zB `spl_object_hash($this)`。

* * *

**3\. 检测表的唯一标识符列的行（二维数组）**

该解决方案依赖于第二个。现在完整的“行”不需要是唯一的。*如果一个“行”的所有相关*“字段”（第二个维度的元素）都等于相应的“字段”（具有相同键的元素），则两个“行”（第一个维度的元素）现在是相等的。

“相关”“字段”是“字段”（第二维的元素），其键等于传递的“标识符”的元素之一。

```
function arrayUniqueByMultipleIdentifiers(array $table, array $identifiers, string $implodeSeparator = null)
{
    $arrayForMakingUniqueByRow = $removeArrayColumns($table, $identifiers, true);
    $arrayUniqueByRow = $arrayUniqueByRow($arrayForMakingUniqueByRow, $implodeSeparator);
    $arrayUniqueByMultipleIdentifiers = array_intersect_key($table, $arrayUniqueByRow);
    return $arrayUniqueByMultipleIdentifiers;
}

function removeArrayColumns(array $table, array $columnNames, bool $isWhitelist = false)
{
    foreach ($table as $rowKey => $row) {
        if (is_array($row)) {
            if ($isWhitelist) {
                foreach ($row as $fieldName => $fieldValue) {
                    if (!in_array($fieldName, $columnNames)) {
                        unset($table[$rowKey][$fieldName]);
                    }
                }
            } else {
                foreach ($row as $fieldName => $fieldValue) {
                    if (in_array($fieldName, $columnNames)) {
                        unset($table[$rowKey][$fieldName]);
                    }
                }
            }
        }
    }
    return $table;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2015-09-08T17:48:05.063

这应该对关联数组 Ejm Group By Country 进行分组

```
function getGroupedArray($array, $keyFieldsToGroup) {   
    $newArray = array();

    foreach ($array as $record) 
        $newArray = getRecursiveArray($record, $keyFieldsToGroup, $newArray);

    return $newArray;
}
function getRecursiveArray($itemArray, $keys, $newArray) {
    if (count($keys) > 1) 
        $newArray[$itemArray[$keys[0]]] = getRecursiveArray($itemArray,    array_splice($keys, 1), $newArray[$itemArray[$keys[0]]]);
    else
        $newArray[$itemArray[$keys[0]]][] = $itemArray;

    return $newArray;
}

$countries = array(array('Country'=>'USA', 'State'=>'California'),
                   array('Country'=>'USA', 'State'=>'Alabama'),
                   array('Country'=>'BRA', 'State'=>'Sao Paulo'));

$grouped = getGroupedArray($countries, array('Country')); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-12-29T19:36:02.940

检查来自[Nspl的](https://github.com/ihor/Nspl)[索引](https://github.com/ihor/Nspl#indexedsequence-by-keeplast--true-transform--null)函数：

```
use function \nspl\a\indexed;
$grouped = indexed($data, 'id'); 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2016-06-01T04:03:48.833

```
function array_group_by($arr, array $keys) {

if (!is_array($arr)) {
    trigger_error('array_group_by(): The first argument should be an array', E_USER_ERROR);
}
if (count($keys)==0) {
    trigger_error('array_group_by(): The Second argument Array can not be empty', E_USER_ERROR);
}

// Load the new array, splitting by the target key
$grouped = [];
foreach ($arr as $value) {
    $grouped[$value[$keys[0]]][] = $value;
}

// Recursively build a nested grouping if more parameters are supplied
// Each grouped array value is grouped according to the next sequential key
if (count($keys) > 1) {
        foreach ($grouped as $key => $value) {
       $parms = array_merge([$value], [array_slice($keys, 1,count($keys))]);
       $grouped[$key] = call_user_func_array('array_group_by', $parms);

    }
}
return $grouped; 
```

}

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-02-01T15:35:15.210

```
function groupeByPHP($array,$indexUnique,$assoGroup,$keepInOne){
$retour = array();
$id = $array[0][$indexUnique];
foreach ($keepInOne as $keep){
    $retour[$id][$keep] = $array[0][$keep];
}
foreach ($assoGroup as $cle=>$arrayKey){
    $arrayGrouped = array();
        foreach ($array as $data){
            if($data[$indexUnique] != $id){
                $id = $data[$indexUnique];
                foreach ($keepInOne as $keep){
                    $retour[$id][$keep] = $data[$keep];
                }
            }
            foreach ($arrayKey as $val){
                $arrayGrouped[$val] = $data[$val];
            }
            $retour[$id][$cle][] = $arrayGrouped;
            $retour[$id][$cle] = array_unique($retour[$id][$cle],SORT_REGULAR);
        }
}
return  $retour;
} 
```

试试这个功能

```
groupeByPHP($yourArray,'id',array('desc'=>array('part_no','packaging_type')),array('id','shipping_no')) 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-12-13T08:31:13.177

> 递归函数按从第一个到最后一个键对二维数组进行分组
> 
> 输入：

```
$arr = array(
    '0' => array(
        'key0' => 'value0',
        'key1' => 'value1',
        'key2' => 'value02',
    ),
    '2' => array(
        'key0' => 'value0',
        'key1' => 'value1',
        'key2' => 'value12',
    ),
    '3' => array(
        'key0' => 'value0',
        'key1' => 'value3',
        'key2' => 'value22',
    ),
);
$keys = array('key0', 'key1', 'key2'); 
```

> 输出：

```
$arr = array(
    'value0' => array(
        'value1 => array(
            'value02' => null,
            'value12' => null,
        ),
        'value3' => 'value22',
    ),
); 
```

> 代码：

```
function array_group_by_keys(&$arr, $keys) {

    if (count($arr) < 2){
        $arr = array_shift($arr[0]);
        return;
    }

    foreach ($arr as $k => $item) {
        $fvalue = array_shift($item);
        $arr[$fvalue][] = $item;
        unset($arr[$k]);
    }

    array_shift($keys);
    foreach ($arr as &$sub_arr) {
        array_group_by_keys($sub_arr, $keys);
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-09-29T07:26:44.583

多级分组怎么样。

数据：

```
$rows = [
    ['country'=>'Japan',  'city'=>'Tokyo', 'surname'=>'Miyazaki', 'name'=>'Hayao'],
    ['country'=>'France', 'city'=>'Paris', 'surname'=>'Godard',   'name'=>'Jean-Luc'],
    ['country'=>'France', 'city'=>'Lyon',  'surname'=>'Godard',   'name'=>'Marguerite'],
    ['country'=>'Japan',  'city'=>'Tokyo', 'surname'=>'Miyazaki', 'name'=>'Akira'],
    ['country'=>'Japan',  'city'=>'Nara',  'surname'=>'Kurosawa', 'name'=>'Akira'],
    ['country'=>'France', 'city'=>'Paris', 'surname'=>'Duras',    'name'=>'Marguerite'],
];
$groups = groupBy($rows, 'country', 'city', 'surname'); 
```

代码：

```
 function groupBy($rows, ...$keys)
    {
        if ($key = array_shift($keys)) {
            $groups = array_reduce($rows, function ($groups, $row) use ($key) {
                $group = is_object($row) ? $row->{$key} : $row[$key]; // object is available too.
                $groups[$group][] = $row;
                return $groups;
            }, []);
            if ($keys) {
                foreach ($groups as $subKey=>$subRows) {
                    $groups[$subKey] = self::groupBy($subRows, ...$keys);
                }
            }
        }
        return $groups;
    } 
```

# javascript - 为什么最新的值会覆盖到 javascript 中的对象数组中？

> ID：12706360
> 
> 赞同：0
> 
> 时间：2012-10-03T10:14:19.233
> 
> 标签：javascript, arrays, object, overriding

```
<html>
    <head>

        <style type="text/css">
            #mycanvas{
                width:500px;
                height:450px;
                border:2px solid green;

                font-size:30px;
            }
        </style>

        <script>
            window.onload = function (){
                vcan = {};
                vcan.main = {}
                vcan.main.repNode = [];
                vcan.main.currentTransform = {'id':0, 'name':'myobj'}

                document.getElementById("mycanvas").addEventListener('mousemove', mymousemove);

                function mymousemove(){
                    var  currAdTime = new Date().getTime();
                    console.log(currAdTime);
                    var myObj = extend(vcan.main.currentTransform , {mdTime:currAdTime, func:'add'})
                    vcan.main.repNode.push(myObj);
                }

              function    extend (fobj, sobj){
                    if((typeof fobj == 'object') && (typeof sobj == 'object')){
                    for(var prop in sobj){
                        fobj[prop] = sobj[prop];
                    }
                        return fobj;
                    }else{
                        alert("it seems that the arguments you passed are not object");
                    }
                }   

                document.getElementById("test").onclick = function (){

                    var output = "";
                    for(var i=0; i< vcan.main.repNode.length; i++){
                        output +=   vcan.main.repNode[i].mdTime;    
                        output += "<br />";

                    }

                    document.getElementById("result").innerHTML = output;

                }

            }
        </script>
    </head>

    <body>
        <div id="mycanvas">
            Please move the mouse inside this box
            And click on Show Result
        </div>

        <button id="test">
            Show Result
        </button>

        <div id="result">

        </div>
    </body>

</html> 
```

为了解决问题，请将以上代码渲染到浏览器中。单击显示结果按钮后，将显示时间。我的问题是为什么所有时间都在显示。

时间的最新值覆盖到对象数组的不同元素中。

同时，如果我们看到控制台，那么时间会有所不同。

经过长时间的搜索，我无法解决这个问题。请大家帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:34:23.403

这是一个固定的解决方案[http://jsfiddle.net/WacV4/1/](http://jsfiddle.net/WacV4/1/)。JS 中的对象是通过引用而不是通过复制其值来分配的，因此`myObj`in`mymousemove`总是修改相同的值。您只需要`vcan.main.currentTransform`在扩展之前复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:37:47.767

只需用这个替换您的扩展功能

```
function extend(fobj, sobj) {
  if ((typeof fobj == 'object') && (typeof sobj == 'object')) {
    var newfobj = Object();
    for (var prop in fobj) {
      newfobj[prop] = fobj[prop];
    }
    for (var prop in sobj) {
      newfobj[prop] = sobj[prop];
    }
    return newfobj;
  } else {
    alert("it seems that the arguments you passed are not object");
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:38:51.590

扩展功能出现问题。我不确定建议的输出应该是什么，但从这个函数返回的对象总是有相同的时间。也许你应该返回 sobj 代替？它接缝循环可能没有做你想做的事。我`console.log(myObj);`在创建之后添加了一个，这表明每次都进入 myObj 的时间相同。如果您需要更多帮助，我建议您在文本中添加您希望的输出。

问候巴勃罗。

# c++ - C++ 32bit vs 64bit 浮动限制

> ID：12706368
> 
> 赞同：4
> 
> 时间：2012-10-03T10:14:43.137
> 
> 标签：c++, floating-point, mingw, limits

给定如下代码段，我只想知道

*   为什么 long double 的最大值在 64 位中小于 32 位？
*   为什么 64 位版本不能像 32 位版本那样扩展尽可能多的数字来填充“40”精度输出？
*   似乎 LDBL_MIN 和 LDBL_MAX 的值相等，这是一个错误吗？

我查看了机器中的 float.h 文件，但找不到这些宏常量的显式定义。

测试代码（平台= Win7-64bit）

```
#include <cfloat>
#include <iomanip>
cout<<"FLT_MAX   ="<< setprecision(40) << FLT_MAX  << endl;
cout<<"DBL_MAX   ="<< setprecision(40) << DBL_MAX  << endl;
cout<<"LDBL_MAX  ="<< setprecision(40) << LDBL_MAX << endl;
cout<<"FLT_MIN   ="<< setprecision(40) << FLT_MIN  << endl;
cout<<"DBL_MIN   ="<< setprecision(40) << DBL_MIN  << endl;
cout<<"LDBL_MIN  ="<< setprecision(40) << LDBL_MIN << endl; 
```

32 位结果 (MinGW-20120426)

```
FLT_MAX  =340282346638528859811704183484516925440
DBL_MAX  =1.797693134862315708145274237317043567981e+308
LDBL_MAX =1.189731495357231765021263853030970205169e+4932
FLT_MIN  =1.175494350822287507968736537222245677819e-038
DBL_MIN  =2.225073858507201383090232717332404064219e-308
LDBL_MIN =3.362103143112093506262677817321752602598e-4932 
```

64 位结果 (MinGW64-TDM 4.6)

```
FLT_MAX  =340282346638528860000000000000000000000
DBL_MAX  =1.7976931348623157e+308
LDBL_MAX =1.132619801677474e-317
FLT_MIN  =1.1754943508222875e-038
DBL_MIN  =2.2250738585072014e-308
LDBL_MIN =1.132619801677474e-317 
```

谢谢。

[编辑]：使用最新的 MinGW64-TGM 4.7.1，LDBL_MAX、LDBL_MIN 的“错误”似乎已删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:55:59.690

`LDBL_MAX =1.132619801677474e-317`听起来像是某个地方的错误。标准的要求是每个可以表示为 a 的值`double`也可以表示为 a `long double`，所以它是不允许的`LDBL_MAX < DBL_MAX`。鉴于您没有显示您的真实测试代码，我个人会在指责编译器之前检查一下。

如果两者之间确实存在（非错误）差异`long double`，那么差异的基础将是您的 32 位编译器使用较旧的 x87 浮点运算，它具有 80 位精度，因此允许 80位`long double`。

您的 64 位编译器使用 x64 中较新的 64 位浮点运算。没有 80 位精度，也不需要切换到 x87 指令来实现更大的`long double`.

可能比这更复杂。例如，并非所有 x86 编译器都必须具有 80 位`long double`. 他们如何做出决定取决于各种因素，可能包括 SSE2 具有 64 位浮点运算的事实。但可能性是`long double`与 大小相同`double`，或者更大。

> 为什么 64 位版本不能像 32 位版本那样扩展尽可能多的数字来填充“40”精度输出？

双精度只有大约 15 个十进制数字。超出此范围的数字有时会提供信息，但通常会产生误导。

我不记得标准是怎么说的`setprecision`，但是假设允许实现在停止生成数字的地方画一条线，那么 a 的精度`double`是画它的合理位置。至于为什么一个实现决定实际这样做而另一个没有——我不知道。由于它们是不同的发行版，它们可能使用完全不同的标准库。

同样的“虚假精度”是您在一种情况下看到`340282346638528859811704183484516925440`FLT_MAX 而在另一种情况下看到的原因`340282346638528860000000000000000000000`。一个编译器（或者更确切地说，一个库实现）已经麻烦地计算了很多数字。另一个早早放弃，四舍五入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:33:39.813

为了回答这个问题，我只做了几个假设：1）你只在 64 位机器上测试了这个 2）编译器是同一个子版本的不同位版本（也就是说，它们实际上是姐妹编译器）。

话虽如此：

> 来自“ISO/IEC 14882 国际标准第一版 1998-09-01”
> 
> 3.9.1 基本类型
> 
> 1.  有三种浮点类型：float、double 和 long double。double 类型提供的精度至少与 float 一样，long double 类型提供的精度至少与 double 一样。float 类型的值集是 double 类型的值集的子集；double 类型的值集是 long double 类型的值集的子集。浮点类型的值表示是实现定义的。整数和浮点类型统称为算术类型。标准模板 numeric_limits (18.2) 的特化应指定实现的每种算术类型的最大值和最小值。

此外，就更高级别数字的精度而言，不同的 CPU 将对最终结果产生不同的影响。编译器也是如此。VC++ 的编译器与 borland 不同，GCC/G++ 等也不同。

# javascript - 旋转css3动画后保留最终位置

> ID：12706375
> 
> 赞同：0
> 
> 时间：2012-10-03T10:15:04.090
> 
> 标签：javascript, css

有没有办法让这个 css3 javascript 动画流畅和精细请看链接[jsfiddle](http://jsfiddle.net/K8Tuy/38/)

我使用的CSS动画如下

```
.pageanim
{
    /* Safari and Chrome */
    -webkit-animation:nextpage 1s;
    -webkit-animation-timing-function:linear;
    -webkit-transform-origin: left;
    -webkit-transform-style: preserve-3d;

}
.hideface
{
    backface-visibility:hidden;
    -webkit-backface-visibility:hidden;

}
@-webkit-keyframes nextpage /*Safari and Chrome*/
{
from {-webkit-transform:rotatey(0deg); }
to {-webkit-transform:rotatey(-180deg);
}

}

.revpageanim
{
    /* Safari and Chrome */
    -webkit-animation:prepage 1s;
    -webkit-animation-timing-function:linear;
    -webkit-transform-origin: 100% 0% 0px;

}

@-webkit-keyframes prepage 
{
from {-webkit-transform:rotatey(0deg);}
to {-webkit-transform:rotatey(90deg);}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:44:13.603

通过添加 animation-fill-mode 属性，您可以选择是否应该在动画结束时保留动画的第一帧或最后一帧：

```
animation-fill-mode: forwards; 
```

[https://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode](https://developer.mozilla.org/en-US/docs/CSS/animation-fill-mode)

# vb.net - 使用 OpenXml 在 Powerpoint 上更改文本值不适合

> ID：12706389
> 
> 赞同：5
> 
> 时间：2012-10-03T10:15:37.240
> 
> 标签：vb.net, powerpoint, openxml

我使用 OpenXml 以这种方式创建自定义 powerpoint 演示文稿：我在演示文稿上放置了一个关键字，我在使用 OpenXml 的过程中找到了它并更改了文本值。一切正常，但 fit 选项起初不起作用。文本框有选项“自动调整：溢出时收缩文本；在形状中换行：打开”经过我的处理，新文本出现在正确的位置但自动调整没有完成，我需要点击文本框并制作一个输入以查看自动调整工作。我认为 PowerPoint 仅在修改后检查选项。

我想要的是在过程结束时调用 autofit 选项。谁能帮我？

我希望你明白我想做什么。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T20:02:48.830

仅使用 OpenXML 是不可能的。`<a:normAutofit/>`客户端应用程序（如 PowerPoint）使用该标记来根据需要放大或缩小文本。OpenXML 实际上并不渲染任何东西，所以在客户端渲染之前，它只会读取文本，就好像它不是自动适配的一样。

有几个选项可以考虑来控制这一点 - 但是它们都不是很好。一种是在 PowerPoint 中使用 VSTO 或 VBA 来检查 PPTX 打开的所有形状，如果它们有 AutoFit 标签，则重新渲染它们。第二种方法是根据形状的宽度和高度自己进行所有字体测量，然后将字体比例设置为适当的百分比。另一种方法是使文本框足够大以容纳您将插入的最大数量的文本，然后关闭自动调整。

抱歉，这并不能立即帮助您。我已经对这个特定主题进行了大量研究，但这都是坏消息。

# java - 使用可比较的 java 进行排序

> ID：12706393
> 
> 赞同：0
> 
> 时间：2012-10-03T10:15:46.040
> 
> 标签：java, sorting, comparable

我正在尝试对一组记录进行排序。但我收到“不是记录”错误。方法 getCt() 在不同的类中，程序编译并且数组是记录类型。我真的不知道这段代码有什么问题。

哈希表：

```
public class HashTable {
    private Record [] array;
    private int size;
    private int indexSize=0;
    private boolean updated,found;

    public HashTable(int m){
        array= new Record[m];
        size=0;
    }

    public void getCt() {
        Arrays.sort(array);
        // return array[0];
    } 
```

记录类：

```
import java.lang.Comparable;
import java.util.*;

public class Record implements Comparable {
    private Integer count;
    private DNSkey key;

    public Record(DNSkey key) {
        this.key = key;
        count = 1;
    }

    public void update() {
        count++;
    }

    public DNSkey getKey() {
        return key;
    }

    public Integer getCount() {
        return count;
    }

    public int compareTo(Object obj) {
        if (!(obj instanceof Record)) {
            throw new ClassCastException("Not a Record");
        }
        Record check = (Record) obj;
        return getCount().compareTo(check.getCount());
    }

    public String toString() {
        return getKey() + " " + getCount();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:25:40.530

我的猜测是数组中的空项。“null instanceof Class”将返回 false。

这将抛出异常：

```
Record[] array = new Record[] { new Record(...), null };
Arrays.sort(array); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T10:22:45.543

一种简单的方法是使用泛型：

```
public class Record implements Comparable<Record> { 
```

...

```
public int compareTo(Record check){
    return getCount().compareTo(check.getCount());
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-03T10:38:30.233

使用泛型！和一个@Override 注释。

# hibernate - Hibernate 事件监听器 - postFlush 等效项

> ID：12706394
> 
> 赞同：1
> 
> 时间：2012-10-03T10:15:51.200
> 
> 标签：hibernate

我正在使用休眠事件侦听器实现一个简单的审计日志功能。我想累积事务中所有实体的所有更改并处理审计。

通过使用休眠拦截器方法，我们使用 postFlush() 处理所有累积审计事件的审计。

事件监听器的等价物是什么？

我尝试使用“hibernate.ejb.event.flush”事件。但它调用生命周期的最开始，甚至在 onPostInsert、onPostUpdate 和 onPostDelete 事件之前。所以不能累积变化。

也尝试了自动刷新，它也没有工作。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:09:29.557

只是为了不误导其他人，我发现刷新事件侦听器确实有效。问题是默认休眠事件侦听器未注册。当我注册默认事件侦听器和自定义侦听器时，它开始正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:23:34.057

如果您正在使用 hibernate 实现审计，我建议您使用[Envers](http://www.jboss.org/envers)。使用 Envers 进行审计就像使用注解对实体进行`@Audited`注解一样简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T15:02:35.837

我以这种方式审核，但日期很难看..

持久性.xml

```
<property name="hibernate.ejb.interceptor" value="siapen.jpa.interceptor.MeuInterceptador" /> 
```

爪哇代码

```
import java.io.Serializable;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Iterator;

import org.apache.commons.lang3.ObjectUtils;
import org.hibernate.CallbackException;
import org.hibernate.EmptyInterceptor;
import org.hibernate.type.Type;

import siapen.model.BaseEntity;

public class MeuInterceptador extends EmptyInterceptor {

    private static final long serialVersionUID = 7853236444153436270L;

    private String strSQL = "";
    String acao;
    @SuppressWarnings("rawtypes")
    BaseEntity entity;
    String s = "";

    @SuppressWarnings("unchecked")
    // 1
    public boolean onSave(Object obj, Serializable id, Object[] valores, String[] propertyNames, Type[] types)
            throws CallbackException {
        if (obj instanceof BaseEntity) {
            entity = (BaseEntity) obj;
            for (int i = 0; i < valores.length; i++) {
                if (valores[i] != null && !valores[i].equals("")) {
                    s += propertyNames[i] + ":" + valores[i];
                    if (i != valores.length - 1) {
                        s += "___";
                    }
                }
            }
        }
        return false;
    }

    @SuppressWarnings("unchecked")
    // 1
    public boolean onFlushDirty(Object obj, Serializable id, Object[] valoresAtuais, Object[] valoresAnteriores,
            String[] propertyNames, Type[] types) throws CallbackException {
        if (obj instanceof BaseEntity) {
            entity = (BaseEntity) obj;

            for (int i = 0; i < valoresAtuais.length; i++) {

                if (!ObjectUtils.equals(valoresAtuais[i], valoresAnteriores[i])) {
                    if (!s.equals("")) {
                        s += "___";
                    }
                    s += propertyNames[i] + "-Anterior:" + valoresAnteriores[i] + ">>>Novo:" + valoresAtuais[i];
                }
            }
        }
        return false;

    }

    @SuppressWarnings("unchecked")
    // 1
    public void onDelete(Object obj, Serializable id, Object[] state, String[] propertyNames, Type[] types) {
        if (obj instanceof BaseEntity) {
            entity = (BaseEntity) obj;
        }
    }

    // CHAMADO ANTES DO COMMIT
    // 2
    @SuppressWarnings("rawtypes")
    public void preFlush(Iterator iterator) {
    }

    // 3
    public String onPrepareStatement(String sql) {
        acao = "";
        if (sql.startsWith("/* update")) {
            acao = "update";
        } else if (sql.startsWith("/* insert")) {
            acao = "insert";
        } else if (sql.startsWith("/* delete")) {
            acao = "delete";
        }
        if (acao != null) {
            strSQL = sql;
        }
        return sql;
    }

    // CHAMADO APÓS O COMMIT
    // 4
    @SuppressWarnings("rawtypes")
    public void postFlush(Iterator iterator) {
        if (acao != null) {
            try {
                if (acao.equals("insert")) {
                    AuditLogUtil audi = new AuditLogUtil();
                    audi.LogIt("Salvo", entity, s);
                }
                if (acao.equals("update")) {
                    AuditLogUtil audi = new AuditLogUtil();
                    audi.LogIt("Atualizado", entity, s);
                }
                if (acao.equals("delete")) {
                    AuditLogUtil audi = new AuditLogUtil();
                    audi.LogIt("Deletado", entity, "");
                }

            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                strSQL = "";
                s = "";
            }
        }
    }

} 
```

# awk - awk - 组合行变量并打印为列

> ID：12706397
> 
> 赞同：2
> 
> 时间：2012-10-03T10:15:52.290
> 
> 标签：awk

我确实有一个对我来说太难的问题，但相信它可以在 awk 中很容易地解决。
我的数据如下所示：

> 8377885 8384365 8385357 8385877 @ 8378246 8384786 8385450 8386102
> 66999065 66999928 67091529 @ 66999090 67000051 67091593

不同的行正好在它们中间有“@”。我想：
1.将用'@'分隔的行元素从头到尾组合起来；
2.将所有组合元素打印为列。
首选输出如下所示：

> 8377885 8378246
> 8384365 8384786
> 8385357 8385450 8385877
> 8386102 8390268
> 8390996 66999065
> 66999090
> 66999928 67000051
> 795091529 6

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:22:38.103

在这里，您有一个单行：

```
awk 'BEGIN { FS = "[@ ]+" } { for (i=1;i<=NF/2;i++) { printf "%s %s\n", $i, $(NF/2+i) } }' infile 
```

这会产生：

```
8377885 8378246
8384365 8384786
8385357 8385450
8385877 8386102
66999065 66999090
66999928 67000051
67091529 67091593 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T10:42:49.833

以下将起作用：

```
awk -F"@" '{n=split($1,a," ");split($2,b," ");for(i=1;i<=n;i++)print a[i],b[i]}' your_file 
```

测试如下：

```
> awk -F"@" '{n=split($1,a," ");split($2,b," ");for(i=1;i<=n;i++)print a[i],b[i]}' temp
8377885 8378246
8384365 8384786
8385357 8385450
8385877 8386102
66999065 66999090
66999928 67000051
67091529 67091593 
```

# asp.net-mvc-3 - ASP.NET MVC3 - 反 CSRF 和会话超时

> ID：12706415
> 
> 赞同：3
> 
> 时间：2012-10-03T10:17:05.737
> 
> 标签：asp.net-mvc-3, csrf

我正在实施防伪框架，如下所述：

[http://weblogs.asp.net/srkirkland/archive/2010/04/14/guarding-against-csrf-attacks-in-asp-net-mvc2.aspx](http://weblogs.asp.net/srkirkland/archive/2010/04/14/guarding-against-csrf-attacks-in-asp-net-mvc2.aspx)

另外，为了最大限度地减少编码工作，我在客户端处理*form.onsmit*和*ajaxsend*事件时做了令牌插入部分。一切正常——直到会话到期。

在我的应用程序中，当用户会话超时时，我会显示一个弹出窗口，用户可以重新登录并继续而不刷新当前页面，以便进行中的工作是安全的。但这并不适合 Anti-CSRF 逻辑。当用户在会话超时后尝试重新登录时，这会引发 CSRF 异常，因为 cookie ( `__RequestVerificationToken_Lw__`) 已经过期，并且所有未来的 POST 将在下一页刷新之前无效。

有没有办法将 cookie 结束时间设置为未来日期而不是“会话”？我试图编辑*Response.Cookie*但这使 cookie 无效。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:25:39.630

在用户会话结束时（显示弹出窗口时），您可以在服务器端设置过期的 httpcookie。

我从微软的防伪令牌实现中提取了一些代码。

```
internal static string GetAntiForgeryTokenName(string appPath)
        {
            if (string.IsNullOrEmpty(appPath))
            {
                return "__RequestVerificationToken";
            }
            return "__RequestVerificationToken_" + Base64EncodeForCookieName(appPath);
        }

    private static string Base64EncodeForCookieName(string s)
    {
        byte[] bytes = Encoding.UTF8.GetBytes(s);
        string text = Convert.ToBase64String(bytes);
        return text.Replace('+', '.').Replace('/', '-').Replace('=', '_');
    } 
```

下面的代码在服务器端设置cookie。

```
string antiForgeryTokenName = GetAntiForgeryTokenName(HttpContext.Request.ApplicationPath);
            HttpCookie httpCookie = HttpContext.Request.Cookies[antiForgeryTokenName];

            HttpCookie httpCookie2 = new HttpCookie(antiForgeryTokenName, httpCookie.Value)
            {
                HttpOnly = true
                //// your domain Domain = , 
                //// path Path = , 
                //// set path Expires = 
            };

            HttpContext.Response.Cookies.Set(httpCookie2); 
```

请注意，我尚未测试此代码，如果您没有其他选择，请尝试一下。

# iphone - 使用标准定位服务在前台/后台应用程序中跟踪行驶距离

> ID：12706416
> 
> 赞同：2
> 
> 时间：2012-10-03T10:17:07.517
> 
> 标签：iphone, ios5, gps, core-location, multitasking

我必须开发一种 GPS 导航应用程序，该应用程序需要不断跟踪正在开车的用户的位置。具体来说，我不必在地图上显示当前位置，只需以尽可能高的精度记录其位置，以便计算总行驶距离。

当然，如果用户切换到另一个应用程序、来电或类似情况，应用程序需要在后台继续工作……</p>

从我所做的测试以及从这篇[有用的帖子](https://stackoverflow.com/questions/3421242/behaviour-for-significant-change-location-api-when-terminated-suspended)（以及[文档](https://developer.apple.com/library/ios/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4)）中学到的东西，在我看来，在这种情况下最好的选择是**标准位置服务**，应用程序配置了**UIBackgroundModes = location** in .plist 文件。这样，即使在后台，它也将继续接收位置更新，并且永远不会被操作系统挂起（这实际上只有在调用 [locationManager startUpdatingLocation] 时才是真的）。这也被[这家伙证实了](https://stackoverflow.com/questions/6284504/ios-4-application-lifecycle-behavior-of-standard-location-service-running-in-bac). 我已经亲自验证了这是真的，只需通过使用 Instruments 和内存监视器模块运行应用程序，您可以在其中看到有关应用程序状态的各种标志，首先将应用程序置于后台，并将 UIBackgroundModes 设置为 location 并且 startUpdatingLocation 处于活动状态，然后没有它.

*   1）我现在想知道**当应用程序在跟踪位置时终止时该怎么办**。我不想丢失任何位置更新，所以只要有新的更新可用，我就需要再次唤醒它。文件说：

> 重要提示：如果您的应用当前处于挂起状态，则不会调用 applicationWillTerminate: 方法。

但是因为在我的情况下它永远不会被暂停（它将保持在后台但不会暂停），我的逻辑结论是 applicationWillTerminate 将始终被调用，因此我可以在此方法中注册重要的位置更新或区域监控以按顺序被唤醒，然后重新启动标准位置服务。 **applicationWillTerminate 是放置此代码的正确位置吗？**

*   2) 一个在后台工作但未挂起的应用程序可能会因为内存不足或我的应用程序没有正确响应内存警告而被操作系统终止？（用户也可以手动关闭它）。我担心 applicationWillTerminate 是否不会以某种方式被调用。

*   3) Apple 会不会批准一个在后台持续使用标准定位服务的应用程序，因为它的电池消耗很快？您是否曾经遇到过类似应用程序的审批问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:49:50.883

因为你问了很多你不应该在这里做的问题，所以我只给你其中一部分的答案。

如果应用程序被终止，那么您将无法再重新启动它。这通常是用户终止应用程序时的情况。
不用担心 Apple ( ios) 不会终止您的应用程序。您的应用程序不会使用太多内存，具有巨大位图图形的游戏更有可能被终止。

1.  evry gps 应用程序将耗尽蝙蝠。这不是不批准的理由。

2.  暂停意味着应用程序不处于后台模式，它正在休眠。您将不会收到 Gps，因此无需在终止时给您打电话。您必须先保存数据，请参阅有关后台模式和应用程序生命周期的苹果文档。

# tfs - TFS 2010 TF30065 An unhandled exception occurred

> ID：12706417
> 
> 赞同：0
> 
> 时间：2012-10-03T10:17:11.560
> 
> 标签：tfs, tfs-2010

I have Install new instance of sql server in the server and Now the TFS2010 not working with error :

> TF30065 An unhandled exception occurred

I can't found the real error to fix it, how I know the error detail or how I fix this ! there's many project in it and I have to fix it

edit: I found the error log of the error

> Message d'exception : Échec du chargement du fichier Msxmlsql.dll. L'instruction préparée avec le handle 0 est introuvable. sp_xml_removedocument : la valeur fournie pour le paramètre numéro 1 n'est pas valide. WIN-Server\SQLEXPRESS.Tfs_Configuration..prc_QueryCatalogNodes: Database Statement Failure - Error %error="8179";% executing INSERT statement for @pathSpec L'instruction a été arrêtée. (type SqlException)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:14:59.150

I have remove the second sql instance but the same error, then I have upgrade the first instnace from 10.0 to 10.50 the same of the new instance installed and it work now

# tomcat - Tomcat 集群在 2 个不同的机器上 2 pvt IP 在同一个子网上

> ID：12706418
> 
> 赞同：1
> 
> 时间：2012-10-03T10:17:11.700
> 
> 标签：tomcat, cluster-computing

我有两个 tomcat 实例在集群环境中运行到 2 台服务器中。

假设我们在两个实例中都有 test.jsp。

我想打一个真正的 IP，它将从 tomcat1 或 tomcat 2 获取服务。

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:26:16.110

如果您已经成功设置了集群，我想知道您为什么不采取下一步：在它之前放置一个负载均衡器，它将请求转发到 Tomcat 实例。这可以很容易地通过使用[mod_jk](https://stackoverflow.com/questions/12192636)或 - 现代方式 - [mod_proxy_ajp](https://httpd.apache.org/docs/2.2/mod/mod_proxy_ajp.html)设置 Apache 实例来完成。然后，Apache 可以使用该*单个真实 IP*地址来公开集群的服务。

# django - 在管理面板中显示来自另一个模型的数据

> ID：12706419
> 
> 赞同：0
> 
> 时间：2012-10-03T10:17:16.657
> 
> 标签：django, django-admin

如何显示`OrderAdmin`：`Basket`所有者、产品、产品数量？

我尝试内联：

管理员.py：

```
class BasketInline(admin.TabularInline):
    model = Basket

class OrderAdmin(admin.ModelAdmin):
    inlines = [
        BasketInline,
    ]
admin.site.register(Order, OrderAdmin) 
```

但它不起作用。

```
class Basket(models.Model):
    owner = models.ForeignKey(User, related_name='user_basket', verbose_name='Owner')
    name = models.CharField("Basket_Name", max_length=30)
    products = models.ManyToManyField('Product', through='BasketProduct', blank=True, null=True)

class BasketProduct(models.Model):
    product = models.ForeignKey('Product')
    basket = models.ForeignKey('Basket')
    quantity = models.IntegerField()

class Product(models.Model):
    name = models.CharField(max_length=50)
    slug = models.SlugField()
    unit_price = models.DecimalField(max_digits=5, decimal_places=2)
    desc = models.TextField()
    category = models.ManyToManyField(Category)

class ShippingOptions(models.Model):
    name = models.CharField(max_length=50)
    price = models.DecimalField(max_digits=5, decimal_places=2)
    time = models.CharField(max_length=150)

class Order(models.Model):
    bask = models.OneToOneField(Basket)
    shipp = models.OneToOneField(ShippingOptions) 
```

也许我需要一种不同的方式。请任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:38:18.683

`Order`您需要在模型中打开 foreignKey `Basket`：

```
class Basket(models.Model):
    owner = models.ForeignKey(User, related_name='user_basket', verbose_name='Owner')
    name = models.CharField("Basket_Name", max_length=30)
    products = models.ManyToManyField('Product', through='BasketProduct', blank=True, null=True)
    owner = models.ForeignKey(Owner, blank=True, verbose_name='Owner') 
```

或者您在第一个模型行中有错误：

```
owner = models.ForeignKey(Owner, related_name='user_basket', verbose_name='Owner') 
```

# ruby-on-rails - 使用 mongodb 作为数据库的 Rails 关联

> ID：12706429
> 
> 赞同：0
> 
> 时间：2012-10-03T10:17:48.123
> 
> 标签：ruby-on-rails, mongodb, associations, mongoid

我正在使用设计。它将当前用户标识为

```
current_user.id 
```

有很多用户。有一个控制器名称为 empsals_controller.rb

```
class EmpsalsController < ApplicationController

  def index
    @empsals = Empsal.all

  end

  def show
    @empsal = Empsal.find(params[:id])

  end

  def new
    @empsal = Empsal.new

  end

  def edit
    @empsal = Empsal.find(params[:id])
  end

  def create
    @empsal = Empsal.new(params[:empsal])

    respond_to do |format|
      if @empsal.save
        format.html { redirect_to @empsal, notice: 'Empsal was successfully created.' }
        format.json { render json: @empsal, status: :created, location: @empsal }
      else
        format.html { render action: "new" }
        format.json { render json: @empsal.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @empsal = Empsal.find(params[:id])

    respond_to do |format|
      if @empsal.update_attributes(params[:empsal])
        format.html { redirect_to @empsal, notice: 'Empsal was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @empsal.errors, status: :unprocessable_entity }
      end
    end
  end

  def destroy
    @empsal = Empsal.find(params[:id])
    @empsal.destroy

    respond_to do |format|
      format.html { redirect_to empsals_url }
      format.json { head :no_content }
    end
  end 
```

这个控制器的型号是

```
class Empsal
  include Mongoid::Document
   belongs_to :paygrade
  field :salary_component, type: String
  field :pay_frequency, type: String
  field :currency, type: String
  field :amount, type: String
  field :comments, type: String
 validates_presence_of :pay_frequency

end 
```

我想与具有模型 user.rb 的设备建立关联，以便相关用户可以查看他们的相关数据。

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps
devise :database_authenticatable, :registerable, #:confirmable,
         :recoverable, :rememberable, :trackable, :validatable, :timeoutable, :timeout_in => 2.minutes
   field :role
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:20:42.750

除了在 User 模型中设置反向关联之外，您拥有所需的一切：

```
class User
  include Mongoid::Document
  include Mongoid::Timestamps

  has_many :empsals # <<<<<<< added line

  devise :database_authenticatable, :registerable, #:confirmable,
         :recoverable, :rememberable, :trackable, :validatable, :timeoutable, :timeout_in => 2.minutes
   field :role
end 
```

[请参阅http://mongoid.org/en/mongoid/docs/relations.html#has_many](http://mongoid.org/en/mongoid/docs/relations.html#has_many)上的文档

有了这个，你可以做类似的事情

```
@user.empsals # it will be a list of Empsal instances 
```

# php - 如何显示和正确缩进单个节点的树结构？

> ID：12706430
> 
> 赞同：1
> 
> 时间：2012-10-03T10:17:53.367
> 
> 标签：php

DB结构如下：

```
 cat_ID| cat_name    | cat_nicename  | lft | rgt 
    _________________________________________________
    287   | Wallpapers  |  wallpapers   | 61  | 62
    1656  | Gadget      |  gadget       | 63  | 64
    1958  | Sms         |  sms          | 65  | 66
    2901  | fun         |  fun          | 67  | 68
    4419  | Joke        |  joke         | 69  | 70
    4775  | health      |  health       | 71  | 72
    5098  | Mobile      |  mobile       | 73  | 90
    5100  | TV          |  tv           | 91  | 92
    5101  | Main        |  main         | 93  | 94
    5102  | Nokia       |  nokia        | 76  | 83
    5103  | Samsung     |  samsung      | 84  | 87
    5104  | Micromax    |  micromax     | 88  | 89
    5105  | Nokia Sub 1 |  nokiasub1    | 77  | 78
    5106  | Nokia Sub 2 |  nokiasub2    | 79  | 82
    5107  | Nokia Sub 3 |  nokiasub3    | 80  | 81
    5109  | Galaxy      |  galaxy       | 85  | 86 
```

我用来获取一个类别及其所有子类别的以下查询：

```
$sql = "SELECT n.cat_ID,n.cat_name,n.cat_nicename, (COUNT(*)-1)
 AS depth FROM " .TBL_CATEGORIES. " AS n, " .TBL_CATEGORIES. " AS p
  WHERE p.cat_nicename='mobile'
 AND n.lft BETWEEN p.lft AND p.rgt
 GROUP BY n.lft ORDER BY n.lft;";

$result = mysql_query($sql);

$tree = array();
while ($row = mysql_fetch_assoc($result)) {
  $tree[] = $row;
}

function _tab($depth) {
    $tabs = '';
    while ($depth-- > 0) $tabs .= '&nbsp;&nbsp;&nbsp;&nbsp;';
    return $tabs;
}

// bootstrap loop
$result = '';
while (!empty($tree)) {
    $currNode = array_shift($tree);
    $result .= _tab($currNode['depth']) . $currNode['cat_name'] . $currNode['depth'].'<br />';
}

print $result; 
```

如果我不使用`p.cat_nicename='mobile'`，通过上面的代码，树结构显示完美，但是如果我想通过使用`p.cat_nicename='mobile'`我得到的所有深度来检索一个节点，`'0'`因此它不会放置任何`&nbsp;`并在下面显示扁平树`'mobile'`..如果我查询只是`"mobile"`它应该显示如下：

```
Mobile
    Nokia
        Nokia Sub 1
        Nokia Sub 2
            Nokia Sub 3
    Samsung
        Galaxy
    Micromax 
```

所以我的问题是：

1.  **如何显示特定节点的树？**
2.  **如何仅显示所有根类别？没有孩子没有子，通过使用单个 SQL 查询？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:19:36.507

1.  在查看表结构和查询之后，我认为没有额外的子查询来选择特定节点的树（我可能错了，但这是我可以让它工作的唯一方法测试时）。为此，我建议在`FROM`子句中添加一个子查询，就好像您从第三个表中进行选择一样。然后，在您的子句中添加一个额外的`BETWEEN`条件 来测试它。`WHERE`

    像这样的东西：

    ```
    SELECT
        n.cat_ID, n.cat_name, n.cat_nicename, COUNT(*)-1 AS depth
    FROM
        categories AS n,
        categories AS p,
        (SELECT lft, rgt FROM categories WHERE cat_nicename = 'mobile') AS q
    WHERE
        n.lft BETWEEN p.lft AND p.rgt
        AND p.lft BETWEEN q.lft AND q.rgt
    GROUP BY n.lft
    ORDER BY n.lft; 
    ```

    使用它，您需要在子查询中添加要为其获取树的所有逻辑处理“哪个”节点。前两个表 (`n`和`p`) 是正常选择的。这是获得正确`depth`值所必需的。*然后*，它比较`p`和`q`- 但`q`已经有限。因此，一旦您有了正确的`depth` 值，您就可以将其限制在您想要的类别中。

2.  仅显示所有根类别要容易得多。使用您的查询，“根类别”的定义是具有`depth = 0`. 如果你使用 MySQL 的[`HAVING`](http://dev.mysql.com/doc/refman/5.0/en/select.html)子句，你可以很容易地用`HAVING depth = 0`. 尝试以下操作：

    ```
    SELECT
        n.cat_ID, n.cat_name, n.cat_nicename, COUNT(*)-1 AS depth
    FROM
        categories AS n,
        categories AS p
    WHERE
        n.lft BETWEEN p.lft AND p.rgt
    GROUP BY n.lft
    HAVING depth = 0
    ORDER BY n.lft; 
    ```

# python - 如何在 Python 中检查 wget/urllib2 的结果？

> ID：12706437
> 
> 赞同：3
> 
> 时间：2012-10-03T10:18:18.093
> 
> 标签：python, urllib2, wget

我是 Python 的新手，正在尝试编写一个监视器来确定在`localhost`（由 Apache Tomcat 托管）上运行的 Java Web 应用程序（WAR 文件）是否正在运行。我之前设计了一个运行脚本：

```
ps -aef | grep myWebApp 
```

并检查结果`grep`以查看是否有任何进程 ID 在这些结果中返回。

但事实证明，主机操作系统只能看到 Tomcat 进程，而不是 Tomcat 托管的任何 Web 应用程序。接下来，我尝试查看 Tomcat 是否带有我可以从终端访问的任何类型的 CLI，看起来答案是否定的。

现在，我正在考虑使用`wget`甚至可能通过让它们命中并检查结果`urllib2`来确定我的网络应用程序是否正在运行。`http://localhost:8080/myWebApp`这是我最好的尝试`wget`：

```
wgetCmd = "wget http://localhost:8080/myWebApp"
wgetResults = subprocess.check_output([wgetCmd], shell=True, stderr=subprocess.STDOUT)

for line in wgetResults.strip().split('\n'):
    if 'failed' in line:
    print "\nError: myWebApp is not running."
    sys.exit() 
```

我的想法是，如果 Web 应用程序没有运行，则`wget`' 的输出应该始终在其中包含“失败”一词（至少，根据我的经验）。不幸的是，当我运行它时，我收到以下错误：

```
Traceback (most recent call last):
File "/home/myUser/mywebapp-mon.py", line 52, in <module>
main()
File "/home/myUser/mywebapp-mon.py", line 21, in main
wgetResults = subprocess.check_output([wgetCmd], shell=True, stderr=subprocess.STDOUT)
File "/usr/lib/python2.7/subprocess.py", line 544, in check_output
raise CalledProcessError(retcode, cmd, output=output)
subprocess.CalledProcessError: Command '['wget http://localhost:8080/myWebApp']' returned non-zero exit status 4 
```

关于这里发生了什么（错误是什么）的任何想法？另外，更重要的是，我是不是走错了路？提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T10:25:46.400

我建议你试试[Requests](http://docs.python-requests.org/en/latest/)模块。它比 wget 或 urllib 更加用户友好。尝试这样的事情：

```
import requests
r = requests.get('http://localhost:8080/myWebApp')
>>> r.status_code
200
>>> r.text
Some text of your webapp 
```

**编辑 **安装说明[http://docs.python-requests.org/en/latest/user/install/](http://docs.python-requests.org/en/latest/user/install/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:37:59.310

检查网址：

```
import urllib2

def check(url):
    try:
        urllib2.urlopen(url).read()
    except EnvironmentError:
        return False
    else:
        return True 
```

要调查发生了什么样的错误，您可以查看异常实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T12:10:21.583

您还可以使用 urllib2/requests 进行构建，并与 Tomcat 的管理器服务（如果已安装）进行交互。我使用[列表方法](http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html#List_Currently_Deployed_Applications)可以收到以下信息：

```
 OK - Listed applications for virtual host localhost
   /webdav:running:0
   /examples:running:0
   /manager:running:0
   /:running:0 
```

# ipad - ios6中的方向问题

> ID：12706440
> 
> 赞同：1
> 
> 时间：2012-10-03T10:18:39.100
> 
> 标签：ipad, uinavigationcontroller, ios6, presentmodalviewcontroller

我在我的应用程序中使用 UINavigationController 并且我的第一个控制器名为**A**，它仅限于 portrite 并且在我**的 A**控制器中有一个按钮。单击该按钮后，我正在为另一个名为**B**的视图控制器创建实例。在为 BI 创建实例后，我使用以下方法以模态方式呈现

```
[self presentViewController:BInstance animated:YES completion:^{
            NSLog(@"completed");
        }]; 
```

我的 B 控制器可以支持所有方向，这是预期的，直到 ios5.1 和更早版本。现在我正在尝试使用 Xcode4.5 在 ios6 上运行我的项目，它没有旋转我期待解决这个问题，我发现一些关于**shouldAutorotateToInterfaceOrientation:**方法的博客从最新的 ios6 中被弃用。我也使用了替代品

```
-(BOOL)shouldAutorotate{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations{
    return UIInterfaceOrientationMaskAll;
} 
```

但仍然没有太多预期的结果。

**问题：**是什么让我的**B**控制器适用于所有方向，即使我的父**A**仅适用于 portrite。

在此先感谢您的所有建议/建议对此有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:27:59.630

首先，在 AppDelegate 中，这样写。**这是非常重要的**

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
     return (UIInterfaceOrientationMaskAll);
} 
```

然后，对于只需要**PORTRAIT**模式的 UIViewControllers，编写这些函数

```
- (BOOL)shouldAutorotate
{
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskPortrait);
} 
```

对于也需要**LANDSCAPE**的 UIViewController，将遮罩更改为全部。

```
- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskAllButUpsideDown);
    //OR return (UIInterfaceOrientationMaskAll);
} 
```

现在，如果您想在方向更改时进行一些更改，请使用此功能。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

} 
```

# jquery - 如何查找 ID 与 json 键匹配的表 tr 并填充其他列

> ID：12706447
> 
> 赞同：4
> 
> 时间：2012-10-03T10:19:07.270
> 
> 标签：jquery, ajax, json, jsp

我是 JQuery 和 Json 的新手，我偶然发现了一些问题。如果有人可以为我提供帮助，将不胜感激。我的问题如下：

在我的 JSP 中，我有 ajax 调用，它将返回我的 json 对象。我想在我的 json 对象中获取键，在我的表中找到其 ID 与键匹配的那些 tr，并最终用我的 json 对象中的值填充该特定行中的其他列。

这是我的 jquery ajax 调用

```
 $.ajax({
....
....
success:function(data) {    
//Data is a Json Object. The value is for example :{"A":"1","B":"2","C":"3"}    
for(key in data) {
    $("#myTable tr").find(key).find("td").eq(1).html(data[key]); // not working!
}
}
}); 
```

，我有以下 html 块：

```
<table id = "myTable">
    <tr id = "A">
      <td>Descriptopn.</td>
 <td>...</td> // I want to set this value to be 1
    </tr>

    <tr id = "B">
 <td>Description</td>
 <td>...</td> // I want to set this value to be 2
    </tr>

     <tr id = "C">
  <td>Description</td>
       <td>...</td> // I want to set this value to be 3
</tr>   
 </table> 
```

我的问题是上述语法不起作用。有没有办法让这件事变得正确？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:24:00.727

[`.find()`](http://api.jquery.com/find/)在每个匹配元素中搜索与给定选择器匹配的后代。由于您要搜索表的后代，而不是行的后代，因此请去掉`tr`原始选择器中的 。然后，在 key 前面加上一个`'#'`标记，使其成为有效的 id 选择器，其余部分将按预期工作。

```
for(var key in data) {
    $("#myTable").find('#'+key).find("td").eq(1).html(data[key]); // working!
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:27:03.000

既然你有`id`（而且它应该是独一无二的！），你可以使用以下内容： -

```
$('#' + key).find('td:eq(1)').text(data[key]); 
```

[这是一个小提琴](http://jsfiddle.net/GpGTp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:24:29.550

```
$.each(data, function(i, val){

     $('#myTable tr#' + i).find('td:last').text(val);
 }); 
```

# c# - IDataContractSurrogate、NHibernate 和空代理对象

> ID：12706452
> 
> 赞同：2
> 
> 时间：2012-10-03T10:19:48.877
> 
> 标签：c#, wcf, nhibernate

当谈到 WCF 中的序列化和反序列化时，我面临着另一个“谜团”。让我带您了解详细信息；

*   我们有一个从 WCF 服务（由 TCP 托管）返回的预置对象 (NHibernate)。
*   我们有一个 DataContractSurrogate 它检查属性/集合是否是 NHibernate 代理，如果是，则执行以下操作之一：

    *   如果代理已初始化（以及序列化的正确类型），则返回对象
    *   如果代理未初始化，则返回 NULL

到目前为止一切顺利，DataContractSurrogate 完成了它的工作，序列化并将消息整齐地发送到客户端，在反序列化时我收到以下错误：

> 无法将“System.Object”类型的对象转换为“XXXXXXXXXX”类型

在这一点上，为什么它会投射一个 NULL 值？这是否意味着我不能将属性设为 NULL 这是什么疯狂？

所以我决定检查我的 DataContractSurrogate 处理 NULL 值而不是我们的代理的方式是否有任何区别。我基本上只是手动将前面提到的属性设置为 NULL，而不是让 DataContractSurrogate 为我执行此操作。

神奇的是，这行得通......这真的让我下巴掉了，所以我决定逐步了解 DataContractSurrogate 的不同方法，看看发生了什么，这就是我注意到的。

当我出于某种原因手动将属性设置为 NULL 时（很可能是因为顶部的某些层告诉它不要这样做）永远不会调用 GetObjectToSerialize。显然，当我不手动将属性设置为 NULL 时，会调用该方法并且我返回 NULL 而不是代理/初始化对象。

以下是我的 DataContractSurrogate 中的两种方法，以防任何人都感兴趣：

```
public Type GetDataContractType(Type type)
{
    // Serialize proxies as the base type
    if (typeof(INHibernateProxy).IsAssignableFrom(type))
    {
       type = type.GetType().BaseType;
    }

    // Serialize persistent collections as the collection interface type
    if (typeof(IPersistentCollection).IsAssignableFrom(type))
    {
        foreach (Type collInterface in type.GetInterfaces())
        {
            if (collInterface.IsGenericType)
            {
                type = collInterface;
                break;
            }
            else if (!collInterface.Equals(typeof(IPersistentCollection)))
            {
                type = collInterface;
            }
         }
     }

     return type;
 }

 public object GetObjectToSerialize(object obj, Type targetType)
 {
    // Serialize proxies as the base type
    if (obj is INHibernateProxy)
    {
        ILazyInitializer init = ((INHibernateProxy)obj).HibernateLazyInitializer;
        if (init.IsUninitialized)
        {
           obj = null;
        }
        else
        {
           obj = init.GetImplementation();    
        }
     }

     // Serialize persistent collections as the collection interface type
     if (obj is IPersistentCollection)
     {
         //return 
         if (!((IPersistentCollection)obj).WasInitialized)
         {
             Type type = typeof(Collection<>).MakeGenericType(obj.GetType().GetGenericArguments());
             obj = Activator.CreateInstance(type);
         }
      }

      return obj;
  } 
```

我想知道的是我怎样才能让它工作，我希望能够无意识地返回我的预置对象（是的，DTO 会解决这个问题，但我不想走那条路，那就需要更多的工作来维护让它发挥作用IMO）。

任何人都对如何让这个工作有任何想法（在客户端没有调用 GetObjectToSerialize，请求类型，然后 BAM 它爆炸了）？

编辑：

这是序列化后的消息：

```
<OnReceiveCall xmlns="http://tempuri.org/">
<call xmlns:b="http://schemas.datacontract.org/2004/07/TelephoneExchange.Entities" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<b:Begin>2012-10-03T14:57:20</b:Begin>
**<b:CallingTelephone i:type="c:anyType" xmlns:c="http://www.w3.org/2001/XMLSchema"></b:CallingTelephone>**
<b:End i:nil="true"></b:End>
<b:HasRecording>false</b:HasRecording>
<b:ID>149688</b:ID>
<b:Inputs></b:Inputs>
<b:LeftInQueue>false</b:LeftInQueue>
<b:RecipientTelephone>
<b:IsInternal>true</b:IsInternal>
<b:Name>604</b:Name>
<b:Number>604</b:Number>
</b:RecipientTelephone>
<b:TransUniqueID i:nil="true"></b:TransUniqueID>
</call>
</OnReceiveCall> 
```

** 和 ** 之间的位是感兴趣的属性。

当我手动使属性为空时，XML 如下所示：

```
<OnReceiveCall xmlns="http://tempuri.org/">
<call xmlns:d4p1="http://schemas.datacontract.org/2004/07/TelephoneExchange.Entities" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
<d4p1:Begin>2012-10-03T15:04:18</d4p1:Begin>
**<d4p1:CallingTelephone i:nil="true"></d4p1:CallingTelephone>**
<d4p1:End i:nil="true"></d4p1:End>
<d4p1:HasRecording>false</d4p1:HasRecording>
<d4p1:ID>149721</d4p1:ID>
<d4p1:Inputs></d4p1:Inputs>
<d4p1:LeftInQueue>false</d4p1:LeftInQueue>
<d4p1:RecipientTelephone>
<d4p1:IsInternal>true</d4p1:IsInternal>
<d4p1:Name>604</d4p1:Name>
<d4p1:Number>604</d4p1:Number>
</d4p1:RecipientTelephone>
<d4p1:TransUniqueID i:nil="true"></d4p1:TransUniqueID>
</call>
</OnReceiveCall> 
```

注意区别……现在的问题是……我到底是怎么做的:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:38:25.723

问题在这里：

```
// Serialize proxies as the base type 
if (typeof(INHibernateProxy).IsAssignableFrom(type)) 
{ 
   type = type.GetType().BaseType; 
} 
```

~~这是一个常见的错误。 `type`本身是一个对象，代表您的（可能是代理）对象的类型；的类型`type`是`System.Type`。因此，`type.GetType()`返回`typeof(System.Type)`，其基类型为`object`. 因此，您的代码会创建`object`代理基类型的实例而不是实例。~~

假设您确实想将代理序列化为基本类型，则需要：

```
// Serialize proxies as the base type 
if (typeof(INHibernateProxy).IsAssignableFrom(type)) 
{ 
   type = type.BaseType; 
} 
```

编辑：

Null 在这里可能是一个红鲱鱼。

首先，允许将 null 转换为任何引用类型；null 的类型不是`System.Object`，因此转换 null 不会导致将 System.Object 转换为另一种类型的异常。

其次，如果一个对象为空，则`obj is SomeType`计算结果为`false`。因此，如果 GetObjectToSerialize 的第一个参数为 null，则 GetObjectToSerialize 将返回 null。您没有显示 GetDataContractType 的调用站点，因此很难看出 null 属性值将如何影响它。

编辑2：

当然，上面是不正确的，因为`type.GetType()`返回`typeof(System.RuntimeType), not`typeof(System.Type)`。

下面是正确的分析：

这是一个常见的错误。 `type`本身是一个对象，代表您的（可能是代理）对象的类型；的静态类型`type`是`System.Type`；运行时类型最有可能`System.RuntimeType`。因此，`type.GetType()`返回`typeof(System.RuntimeType)`，其基类型为`System.Reflection.TypeInfo`. 因此，您的代码序列化空`System.Reflection.TypeInfo`引用而不是代理基类型的实例。

尝试在 GetDataContractType 末尾的 return 语句之前立即添加这一行，看看会发生什么：

```
if (typeof(System.Type).IsAssignableFrom(type))
    throw new Exception("oops"); 
```

# php - PHP：从字符串到数组：参数 => 参数

> ID：12706455
> 
> 赞同：1
> 
> 时间：2012-10-03T10:20:09.263
> 
> 标签：php, arrays

我有这样的字符串：

```
name="n e" content="12" icon="favicon.ico" 
```

将其解析为此类数组的最佳和最快方法是什么：

```
Array
(
    [name] => "n e"
    [content] => "12"
    [icon] => "favicon.ico"
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:22:21.470

这应该这样做，`preg_match_all()`用于获取所有组并`array_combine()`形成最终数组：

```
if (preg_match_all('/(\w+)="([^"]*)"/', $str, $matches)) {
    return array_combine($matches[1], $matches[2]);
} else {
    return array();
} 
```

**编辑**

当双引号之间有空格时，此替代方案会中断；否则它也可以：

```
parse_str(str_replace(array(' ', '"'), array('&', ''), $s), $a);
return $a; 
```

# arm - Gnu arm 在 UBFX 上给出错误，错误指令

> ID：12706460
> 
> 赞同：1
> 
> 时间：2012-10-03T10:20:15.860
> 
> 标签：arm, gnu-arm

我的手臂汇编代码是：

```
mov r1, #5
UBFX    r0, r1, #1, #1 
```

当我尝试使用`arm-elf-gcc file.s`它编译它时，会出现以下错误：

```
ass2_sample.s: Assembler messages:
ass2_sample.s:42: Error: bad instruction `ubfx r0,r1,#1,#1' 
```

我正在使用 GCC-3.4 工具链。我不明白错误在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:26:01.057

你编译的目标是什么？[该文档](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/Cjahjhee.html)指出：

> 这些 ARM 指令在 ARMv6T2 及更高版本中可用。
> 
> 这些 32 位 Thumb 指令在 ARMv6T2 及更高版本中可用。
> 
> 这些指令没有 16 位 Thumb 版本。

# r - 在多个相互依赖的包上运行测试

> ID：12706462
> 
> 赞同：0
> 
> 时间：2012-10-03T10:20:26.970
> 
> 标签：r, runit

我想知道测试多个包的最佳方法是什么。假设我们有两个本地包：

```
src/pkg1
src/pkg2 
```

包 pkg1 依赖于 pkg2。我在makefile中使用R CMD检查测试所有包：

```
for pkg in src/*; do \
    R CMD check $$pkg 
```

由于缺少依赖项而失败。例如，在 Java 中，您可以在路径中包含所有缺失的代码。我可以先安装所有 R src/pkgs，但这会在 R 中的测试结束时留下工件。

是否有任何推荐的方法在 R 中执行此类测试或安装所有软件包是唯一的解决方案？也许有一种方法可以仅使用特定文件夹进行测试，这样其他已安装的软件包不会受到影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:31:00.190

原来我可以同时使用“-l”标志

```
R CMD INSTALL -l /path 
```

与

```
R CMD check -l /path 
```

那应该可以解决问题，但不会真正涵盖具有更复杂的相互依赖关系的问题。

# localization - 如何在 Laravel 视图中找到当前语言？

> ID：12706463
> 
> 赞同：19
> 
> 时间：2012-10-03T10:20:34.250
> 
> 标签：localization, laravel

我正在使用 Laravel Lang 类来本地化我的网络应用程序。我已将两种语言添加到`application/config/application.php`. 这会将其用于本地化的默认语言更改为 URI 的第一部分所指示的任何语言（例如 bla.com/en/bla 和 bla.com/co/bla）。现在我需要能够检查我认为当前的默认语言是什么。但是，就我所知，Lang 类无法检查这一点，因为`Lang::$language`变量是受保护的。除了手动解析URI之外，还有什么方法可以检查吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-07-08T16:40:07.803

在 Laravel 中了解您网站当前语言的最简洁方法似乎是：

```
Lang::locale(); 
```

[https://laravel.com/api/5.8/Illuminate/Translation/Translator.html#method_locale](https://laravel.com/api/5.8/Illuminate/Translation/Translator.html#method_locale)

它与返回您网站的默认语言的命令不同：

```
Config::get('app.locale'); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2017-01-26T11:04:13.567

另一种更短的方法可能是使用这样的东西：

```
app()->getLocale() 
```

这样做的好处是 PHPStorm 等 IDE 可以识别此功能，可以帮助您更快地开发。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-21T14:28:58.853

BenjaminRH 的回答非常好，他建议的方法非常有效。我对片段进行了一些改进。现在它检测浏览器语言并根据应用程序的配置文件检查是否支持该语言。

这是一个快速破解，但它适用于我的应用程序。请注意，现在也设置了应用程序语言。随意使用矿石改进它。

```
Route::filter('before', function()
{
    // current uri language ($lang_uri)
    $lang_uri = URI::segment(1);

    // Set default session language if none is set
    if(!Session::has('language'))
    {
        // use lang in uri, if provided
        if(in_array($lang_uri, Config::get('application.languages')))
        {
            $lang = $lang_uri;  
        }
        // detect browser language
        elseif(isset(Request::server('http_accept_language')))
        {
            $headerlang = substr(Request::server('http_accept_language'), 0, 2);

            if(in_array($headerlang, Config::get('application.languages')))
            {
                // browser lang is supported, use it
                $lang = $headerlang;
            }
            // use default application lang
            else
            {
                $lang = Config::get('application.language');
            }
        }
        // no lang in uri nor in browser. use default
        else 
        {
                // use default application lang
                $lang = Config::get('application.language');            
        }

        // set application language for that user
        Session::put('language', $lang);
        Config::set('application.language',  $lang);
    }
    // session is available
    else
    {
        // set application to session lang
        Config::set('application.language', Session::get('language'));
    }

    // prefix is missing? add it
    if(!in_array($lang_uri, Config::get('application.languages'))) 
    {
        return Redirect::to(URI::current());
    }
    // a valid prefix is there, but not the correct lang? change app lang
    elseif(in_array($lang_uri, Config::get('application.languages')) AND $lang_uri != Config::get('application.language'))
    {
        Session::put('language', $lang_uri);
        Config::set('application.language',  $lang_uri);    
    }
}); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-09-02T18:35:12.407

在较新的 Laravel 版本中，您可以通过以下方式获取当前语言：

```
Config::get('app.locale'); 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-08-20T10:02:48.947

这会很好用

```
lang="{{ app()->getLocale() }}" 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-10-03T12:02:53.550

我已经找到了语言问题的解决方案（感谢 IRC 上的 nickstr 和对这个问题的公认答案）。它涉及将当前语言存储为会话变量，该变量会在语言 uri 段更改时更新。

```
Route::filter('before', function()
{
    // Do stuff before every request to your application...

    // Default language ($lang) & current uri language ($lang_uri)
    $lang = 'he';
    $lang_uri = URI::segment(1);

    // Set default session language if none is set
    if(!Session::has('language'))
    {
        Session::put('language', $lang);
    }

    // Route language path if needed
    if($lang_uri !== 'en' && $lang_uri !== 'he')
    {
        Return Redirect::to($lang.'/'.URI::current());
    }
    // Set session language to uri
    elseif($lang_uri !== Session::get('language'))
    {
        Session::put('language', $lang_uri);
    }
}); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-02-07T04:43:21.720

这可能会有所帮助。配置::get('application.language')

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-10-04T10:03:12.067

您可以使用

```
https://github.com/mcamara/laravel-localization 
```

Laravel 本地化使用为请求提供的 URL。为了达到这个目的，应该在 routes.php 文件中添加一个组。它将过滤所有必须本地化的页面。

```
 // app/routes.php

    Route::group(array('prefix' => LaravelLocalization::setLanguage()), function()
    {
        /** ADD ALL LOCALIZED ROUTES INSIDE THIS GROUP **/
        Route::get('/', function()
        {
            return View::make('hello');
        });

        Route::get('test',function(){
            return View::make('test');
        });
    });

    /** OTHER PAGES THAT SHOULD NOT BE LOCALIZED **/ 
```

将此组添加到路由文件后，用户可以访问添加到“languagesAllowed”中的所有语言（默认为“en”和“es”，查看配置部分以更改该选项）。例如，用户现在可以使用以下地址访问两种不同的语言：

[http://laravel.com/en](http://laravel.com/en)

[http://laravel.com/es](http://laravel.com/es)

[http://laravel.com](http://laravel.com)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-11-22T10:43:35.743

我使用`App::getLocale()`这可能是最受支持的方式，因为该`App::setLocale('EN')`方法在[文档](https://laravel.com/docs/5.0/localization)中使用。

您可以在任何地方使用此方法。如果它在某处发生错误，您可以使用`\App::...`它来使其工作。

我正在使用 Laravel 5.0。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-06-18T05:16:40.470

您可以通过以下方式在 laravel Blade 中获取当前语言：

> {{Lang::locale()}}

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-03T10:48:44.630

该`Lang`课程专门用于输出正确的语言，正如您所说，它在内部管理语言。

纵观 API，没有任何方法可以直接帮助您解决此问题，并且解析 URI 以获取语言似乎是适当的做法。

您总是可以这样做来检索 URI 中的语言字符串：

```
$language = URI::segment(1); 
```

[检查 Laravel 请求](http://laravel.com/docs/requests)

# excel - Excel VLOOKUP 基于命名数组中单元格的值

> ID：12706465
> 
> 赞同：0
> 
> 时间：2012-10-03T10:20:39.337
> 
> 标签：excel, excel-formula

我有一个`VLOOKUP`需要扩展的基础。
`=VLOOKUP(A2,DVD,8,FALSE)` 它目前按预期执行并从命名数组中获取数据。

*仅当 DVD 数组的第 6 列中的字符串/值是"IMG"*时，我才需要`VLOOKUP`返回值。如果不是，则不返回该值。

 *这可能吗？

提前感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:24:05.923

```
=IF(VLOOKUP(A2,DVD,6,FALSE) = "IMG", VLOOKUP(A2,DVD,8,FALSE), "") 
```

这将导致对 的两次搜索`A2`，因此您可能希望使用附加列来缓存其位置：

*   =匹配（A2，索引（DVD，，1），0）
*   =IF(INDEX(DVD,cache_cell,6) = "IMG", INDEX(DVD,cache_cell,8), "")*

# java - 用于内存管理的 Java 临时文件

> ID：12706469
> 
> 赞同：0
> 
> 时间：2012-10-03T10:20:52.757
> 
> 标签：java, caching, memory-management

我有大量数据必须显示在从数据库表中检索的页面中。该表会定期更新新数据，并且页面必须在刷新时显示最新数据。由于该页面加载了大量数据，因此加载需要时间（2-3 分钟），并且有时它只显示白页。

所以，我需要做的是在服务器中创建一个临时文件，该文件存储数据库中的数据，页面将从该文件中提取信息。该文件应在每 10-15 分钟内重新加载新数据，以便在 15 分钟之前页面显示旧数据，但 15 分钟后如果页面刷新，则显示新数据。

希望我的问题将通过上述想法得到解决，但我仅限于上述理论。请为我提供解决方案如何完成它以及比上述更好的想法。如果有任何 java 代码示例可以很好地解决我的问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:48:21.350

现在您可以使用轻量级网络服务器（根据您正在谈论加载白色页面的事实猜测）

但是，如果使用像 glassfish 这样的 java ee 应用程序服务器，您可以每 15 分钟运行一次计划任务，以加载数据并将其存储到文件中。

[http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)

也许 Quartz 是你的答案： [Web 应用程序中的计划任务？](https://stackoverflow.com/questions/4127434/scheduled-task-in-a-web-application)

或者，也许您根本没有使用网络服务器/应用程序服务器，而我的回答完全无效。

# objective-c - 将本地 HTML 加载到 iOS 上的 UIWebView 中，不显示本地图像或样式

> ID：12706470
> 
> 赞同：2
> 
> 时间：2012-10-03T10:20:56.043
> 
> 标签：objective-c, ios, uiwebview

我在将使用 iOS 5 的 iPad 应用程序上使用 UIWebView 在本地 HTML 页面上显示本地图像和 css 样式表时遇到问题。

HTML页面本身显示出来并且布局很好，这很棒。但问题是它在应该通过图像的地方有空白方块，并且文本或任何地方的样式也没有显示。

我在 SO 上遇到了非常相似的问题，人们说使用 baseURL 将 HTML 加载到视图中，然后我使用他们问题的答案进行了操作。但图像和风格仍然没有通过。

```
NSString *htmlFile = [[NSBundle mainBundle] pathForResource:@"index" ofType:@"htm" inDirectory:@"html_files"];
NSString* htmlString = [NSString stringWithContentsOfFile:htmlFile encoding:NSUTF8StringEncoding error:nil];
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[web loadHTMLString:htmlString baseURL:baseURL]; 
```

UIWebView 是使用 Interface Builder 放置的，我在 .h 文件中将其作为`@property(nonatomic, retain) IBOutlet UIWebView *web;`

在我的`html_files`文件夹中，我有：

*   索引.htm
*   图像（文件夹）
*   样式（文件夹）

使用以下代码，日志显示`"index.htm", img, style`它告诉我它保持目录相同，但我什至仍然尝试放置然后链接到根目录中的图像，`html_files`但仍然没有。

```
NSString *htmlPath = [path stringByAppendingPathComponent:@"html_files"];
NSArray *dirContents = [[NSFileManager defaultManager] directoryContentsAtPath:htmlPath];
NSLog(@"%@", dirContents); 
```

然后在 index.htm 我链接到像这样的图像`<img src="img/logo.jpg">`

任何想法将不胜感激，谢谢。

编辑：在此处添加了项目链接：[http](http://www.filedropper.com/localhtml) ://www.filedropper.com/localhtml （它实际上只是一个带有 HTML 文件的 UIWebView，所以没什么大不了的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:26:22.413

好的，这是你犯的错误，我说只在 img 标签中使用图像名称，你在哪里使用路径。

在 iOS 中，不管你有多少文件夹，无论你在哪里拥有资源，它只是将所有资源添加到一个包中。

![更改后的示例屏幕截图](../Images/454d985a058929907fa7fa5f453703ba.png)

这是[链接](http://dl.dropbox.com/u/58723521/Local%20HTML.zip)，请查看我仅在 index.htm 中进行了更改

# ruby-on-rails - 如何通过有序关联检索有序对象？

> ID：12706471
> 
> 赞同：1
> 
> 时间：2012-10-03T10:21:10.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sorting, associations

我正在使用 Ruby on Rails 3.2.2。我有以下关联：

```
class Article < ActiveRecord::Base
  has_many :category_associations,
    :class_name => 'CategoryAssociation'

  # Note: Same as :category_associations but gets records ordered by :position.
  has_many :positioned_category_associations,
    :class_name => 'CategoryAssociation',
    :order      => :position

  has_many :categories,
    :through    => :category_associations,
    :source     => :category

  # Note: Same as :categories but gets records ordered by :position.
  has_many :positioned_categories,
    :through    => :category_associations,
    :source     => :category,
    :order      => [:category_associations => :position]
end 
```

使用上面的代码，我可以调用`@article.positioned_categories`并获取按位置正确排序的类别。但是，*我想使用`:positioned_category_associations`来检索`:positioned_categories`*，但如果我陈述以下内容：

```
class Article < ActiveRecord::Base
  ...

  has_many :positioned_categories,
    :through    => :positioned_category_associations,
    :source     => :category

  # instead of
  #
  # has_many :positioned_categories,
  #   :through    => :category_associations,
  #   :source     => :category,
  #   :order      => [:category_associations => :position]
end 
```

似乎没有按预期工作：我*没有*订购类别。

如何通过 检索*有序*类别`:positioned_category_associations`？可能吗？

* * *

*奖励*：由于`:category_associations`和`:positioned_category_associations`具有几乎相同的语句（除了`:order => :position`），是否可以重构`:positioned_category_associations`语句以干燥（不要重复自己）代码？

# java - 将多个桌面应用程序连接到一个在线数据库

> ID：12706472
> 
> 赞同：0
> 
> 时间：2012-10-03T10:21:14.253
> 
> 标签：java, php, mysql, synchronizing

我正在开始一个新项目。它包括：

*   Java 桌面应用程序可通过客户端数据库从 Internet 下载。
*   互联网上的 PHP 网站，带有服务器数据库。

下载该应用程序的用户将使用它来离线添加项目（现在不重要）到本地数据库。当/如果他在线时，该项目将被添加到服务器数据库中，以便其他连接的用户（通过桌面应用程序或通过网站）可以看到它。我用谷歌搜索了这个问题，发现它比我想象的更复杂。解决方案之一是使用一些现成的工具，例如`SymmetricDS`并`Daffodil`在*安全性*、*性能*和*可扩展性方面获得收益。*，但是它们很难在客户端和服务器端配置和安装，并且需要访问命令提示符，这需要我传递给专用主机（嗯，这不是一个真正的问题）。此外，我想要的只是我所描述的，而不是这些工具实际提供的所有内容。

*   我可以在我的 Java 应用程序中自己实现这一点，或者在 Web 服务器 PHP 的帮助下实现吗？

我正在使用 MySQL 获取信息。

**编辑：**真正重要的是将项目发送到服务器数据库。例如，使用 RSS Feed 阅读可能会降低阅读难度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:36:31.350

基本上，您可以使用 HTTP/HTTPS API。当用户在线时，将项目发送到您的 php 文件并在本地数据库中将项目标记为“已发送”。但是您必须控制已编辑或已删除的状态。所以，是的，这很复杂，但却是一个解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:39:01.873

好吧，我想到的最简单的解决方案是为每个项目保存一个最后编辑日期（在服务器上以及在客户端上）。另外，您必须跟踪客户端从服务器获得最后一次更新的时间。

因此，每当客户端上线时，服务器都会向他发送所有更新。

但是为此您必须确保客户端和服务器上的时间相同，并且如果两个客户端编辑相同的项目会发生什么，这并不能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:49:28.457

CouchDB 很好地解决了分布式同步问题，但它是一个 NoSQL DB。根据您的应用程序应该做什么，使用它可以归结为在本地应用程序内部和中央服务器上使用 CouchDB 实例。

尽管如此，你还是必须处理冲突。CouchDB 将支持您的唯一一件事是更容易检测冲突，以及两个冲突编辑的数据，因此您的应用程序可以自动或在用户帮助下解决。

另一方面，在中央服务器上生成一个唯一的 id 就像将创建用户的 id 添加到每个项目 id 一样简单。

# php - 我应该从 MySQL 数据库中获取的最大记录是多少？

> ID：12706473
> 
> 赞同：2
> 
> 时间：2012-10-03T10:21:17.483
> 
> 标签：php, mysql

我的服务器运行缓慢，因为我试图从 MySQl 数据库中获取 200 条记录（使用 PHP）。它们是我需要显示的帖子，我知道这是我的错误，因为当我尝试获取 1 条记录时速度很快，而 200 则大大减慢了速度。

这是一个已知问题，获取太多条目会导致问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:34:15.950

您的 PHP 代码必须是一个复杂的函数，每次都为每条记录循环。所以它应该运行 200 次。这会减慢页面响应时间。在 MYSQL 中获取 200 条记录完全没有问题。如果您在 MySql 终端中运行，它将立即运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:42:42.823

有三种可能性可能会减慢您的服务器速度。

1.  您的数据库未优化。优化你的数据库可以给你带来巨大的性能提升
2.  您的查询做错了什么。我们需要查看您正在运行什么查询来获取 200 行。
3.  您正在为循环中的每一行运行单独的查询。

我建议的是将您的查询基于此，例如。

从表中选择字段 WHERE 条件 = 所需条件 LIMIT 200

此外，如果该查询运行缓慢，则进行解释以查看其使用的索引

EXPLAIN SELECT fields FROM table WHERE 条件 = 所需条件 LIMIT 200

因为要获得 200 行应该需要几毫秒

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:35:40.377

您可以在表中存储的记录数，您可以获取的记录数。

```
for unsigned int largest value is 4,294,967,295
for unsigned big int largest value is 18,446,744,073,709,551,615 
```

为了快速访问记录，您需要在查询中定义 LIMIT。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:45:57.870

您应该获取显示所需的记录，不多不少。不要为（简单）计算获取记录，因为这可以在查询中完成。

我会说显示 50 ~ 100 条记录是用户大脑可以扫描的最大值，获取记录中的所有信息。

我是个例外，当看到超过 15 条记录时，我的大脑会倾斜 :)

# c# - 在自动页面刷新 RadPanelBar 滚动上升

> ID：12706474
> 
> 赞同：5
> 
> 时间：2012-10-03T10:21:19.487
> 
> 标签：c#, asp.net, c#-4.0, telerik

我想保持滚动位置`RadPanelBar`。我`RadPanelBar`被放置在自动刷新的页面中。当我向下滚动条时，`RadPanelBar`它会在页面刷新时向上。它不应该。我正在尝试使用以下代码处理它，但它不起作用。我错过了什么吗？

这是我的 JavaScript

```
<script type="text/javascript">
function SetScrollPositionOnlineContacts() {

    //var pane = splitter.GetPaneById("RadPanelBarRoster");
    //document.getElementById("RadPanelBarRoster").scrollTop;

    var splitter =$find("RadSplitterBottomParent");
    var intY =  splitter.GetPaneById("RadPanelBarRoster").scrollTop;

    var date = new Date();
    date.setTime(date.getTime() + (1 * 60 * 60 * 1000));
    var expires = "; expires=" + date.toGMTString();
    document.cookie = "cookieDivOnlineContacts" 
                      + "=" 
                      + intY 
                      + expires + "; path=/";
    //document.title = intY;
}

function readCookieOnlineContacts(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}
    </script> 
```

这是我的`HTML`代码：

```
<telerik:RadSplitter ID="RadSplitterBottomParent" runat="server" Height="100%" 
    Width="100%" Orientation="Vertical" BackColor="#ECECFF" Skin="WebBlue" 
    LiveResize="True" SplitBarsSize="" HeightOffset="124" Visible="true" 
    BorderSize="0" PanesBorderSize="0">

    <!-- Start Left Roster Panel -->
    <telerik:RadPane ID="RadPaneRoster" runat="server" Width="220px" 
        Scrolling="None">
        <telerik:RadContextMenu ID="RadContextMenuRoster" runat="server" 
            OnClientItemClicked="onRosterContextMenuClick" 
            EnableShadows="True">
            <Items>
                <telerik:RadMenuItem runat="server" Text="View 
                    Conversation">
                </telerik:RadMenuItem>
                <telerik:RadMenuItem runat="server" Text="View Properties">
                </telerik:RadMenuItem>
                <telerik:RadMenuItem runat="server" Text="Add to Favourites" 
                    Enabled="False">
                </telerik:RadMenuItem>
            </Items>
        </telerik:RadContextMenu>
        <telerik:RadPanelBar ID="RadPanelBarRoster" runat="server" 
            Skin="Metro" 
            Width="100%" onscroll="SetScrollPositionOnlineContacts()"
            Height="3000px" OnClientItemClicked="onRosterClick" 
            OnClientContextMenu="onRosterContextMenu"
            PersistStateInCookie="True" Style="width: 100%; border-top: 0; 
            border-bottom: 0;
            z-index: 2" ExpandMode="FullExpandedItem" EnableViewState="True" 
            ViewStateMode="Inherit"
            OnItemClick="RadPanelBarRoster_ItemClick">
        </telerik:RadPanelBar>
    </telerik:RadPane>
</telerik:RadSplitter> 
```

这是我在页面后面的代码：

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!IsPostBack)
    {
        StringBuilder sbScript = new StringBuilder();
        sbScript.Append(
            "<script language='JavaScript' type='text/javascript'>");
        //For order Panel
        sbScript.Append(
        "document.cookie = cookieDivOnlineContacts + \"" + 
        "=\" + \"\" + -1 + \"; path=/\";");

        sbScript.Append("</script>");
        //// Make use ScriptManager to register the script
        ScriptManager.RegisterStartupScript(
            this, 
            this.GetType(), 
            "@@@@MyCallBackAlertScript", 
            sbScript.ToString(), 
            false);
    }

    StringBuilder sbScript1 = new StringBuilder();
    sbScript1.Append(
        "<script language='JavaScript' type='text/javascript'>");
    //For order Panel
    sbScript1.Append(
        "var strCookOnlineContacts = " + 
        "readCookieRfqOrder(\"cookieDivOnlineContacts\"); " + 
        "document.getElementById(\"RadPanelBarRoster\").scrollTop " + 
        "= strCookOnlineContacts;");

    sbScript1.Append("</script>");

    // Make use ScriptManager to register the script
    ScriptManager.RegisterStartupScript(
        this, 
        this.GetType(), 
        "@@@@MyCallBackAlertScript", 
        sbScript1.ToString(), 
        false);

} 
```

我是初学者，所以请给我适当的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T07:18:40.293

你正在尝试使用 cookie，这里还有一段代码试试这个，把这段代码放在 JavaScript 部分

这将在请求开始时保存滚动位置，并在页面完全呈现时存储回滚位置。

```
 function pageLoad()
        {
            $("your radID").scroll(function() {
            SaveScrollPosition();
            });
        }

    var yPos;
        function SaveScrollPosition(){
         yPos = $("your rad bar id").scrollTop(); 
        }

        function ReturnPos() {
        $("your radID").scrollTop(yPos);
        }

  function OnResponseEnd(sender ,eventArgs)
        {
            ReturnPos();
        }

  function OnRequestStart(sender ,eventArgs)
        {

            SaveScrollPosition();
        } 
```

这是你的 html

```
<telerik:RadAjaxManager ID="RadAjaxManager1" runat="server" OnAjaxRequest="RadAjaxManager1_AjaxRequest" ClientEvents-OnRequestStart="OnRequestStart" ClientEvents-OnResponseEnd="OnResponseEnd">
// you code here
</telerik:RadAjaxManager> 
```

我相信这会解决你的问题。谢谢 如果是解决方案，请将其标记为答案。

# php - 使用 PHP 和 AJAX 进行简单的蜜罐表单检查

> ID：12706478
> 
> 赞同：3
> 
> 时间：2012-10-03T10:21:46.750
> 
> 标签：php, ajax, forms, bots

我一直在浏览有关该主题的所有建议帖子，但似乎找不到适合我或我完全理解的解决方案。

我只是想做一个简单的蜜罐，它检查隐藏字段是否被机器人填充，如果是，则破坏表单。我的问题似乎是使用 AJAX 来查看 PHP 值是否已清除。希望这是有道理的，因为我不精通编码语言。

我最初的想法是禁用任何填写该字段的机器人的提交按钮。但是，由于该字段直接为空白，因此表单会加载提交按钮并且该点丢失了。

这是表单检查机器人的一部分：

```
<!-- THE HONEYPOT -->
<li id="artificial-detect">
       <label for="artificials">If you see this, leave this form 
       field blank and invest in CSS support.</label>
       <input name="artificials" type="text" value="">
</li>
<!-- /HONEYPOT -->

<?php 
$spam = $_POST['artificials']; // This is our Honeypot field
if($spam) {  // If the Honeypot field has been filled in
    die("No spamming allowed bitch!"); 
} else { ?>
<li class="last">
        <input class="submit" type="submit" name="submit">
</li>
<?php } ?> 
```

我不明白现在该怎么办：

```
jQuery.('#salesforce-crm-form .submit').click(function(){
     jQuery.ajax({
     // Get PHP function that determines whether the honeypot has been snatched.
     });
}); 
```

我正在为 action="" 使用外部 URL，所以我想也许只有当 PHP 返回干净的机器人时才能插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:32:48.070

你不能按照你想的顺序做事。

首先运行 PHP 以传递您的表单。

然后浏览器行动，向用户显示表单。他可能会输入数据并将其发回。

然后 PHP 再次打开，检查表单值。

您几乎拥有要检查蜜罐字段是否已填充的代码。您不应该尝试使用 AJAX，因为这种 PHP 检查只能在发送表单后进行。如果您检测到垃圾邮件，请不要执行表单的意图。

顺便说一句，机器人不按提交按钮。机器人基于解析表单发送请求，禁用所有 Javascript。

[编辑] 如果您的表单转到外部 URL，那么您将无法控制任何垃圾邮件检测。因为机器人不使用 Javascript，所以这个级别的任何东西都不会工作，但这就是你想要做的。

唯一可行的方法是不要将表单直接发送到外部 URL，而是发送到服务器上的 PHP 脚本，该脚本将检查垃圾邮件，然后将其发送到原始目的地。不知道这是否会搞砸其他任何事情，因为现在不是用户浏览器发送表单，而是您的服务器。如果在该端有任何检测和/或使用请求元数据，那么您就是在干扰这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:31:17.873

将默认值放入蜜罐输入中，并要求用户在发布前将其删除。禁用提交按钮也没有用处：) 机器人不能以这种方式工作，它们只会提交表单而不单击任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:36:36.630

如果将输入框的类型改为隐藏，并给它一个ID，像这样

`<input name="artificials" type="hidden" id="honeypot" value="">`

那么用户将无法看到输入，但机器人会填写它。

然后在你的javascript中，使用jquery你可以检查一个像这样的值

```
var honeypot = $('#honeypot').val();
if(honeypot == '' || honeypot == null) {
   // Call ajax function
} 
```

请注意，这尚未经过测试，只是一个示例。

# android - 画布中的旋转（）没有效果

> ID：12706486
> 
> 赞同：0
> 
> 时间：2012-10-03T10:22:39.010
> 
> 标签：android, android-animation, android-canvas

当我对画布对象使用旋转方法时，画布对象不会旋转。为什么会这样？这是我的代码

```
package com.example.hello;

    import android.app.Activity; import android.content.Context; import android.graphics.Canvas; import android.graphics.Color; import android.graphics.Paint; import android.os.Bundle; import android.view.View; import android.widget.LinearLayout;

    public class CanvasDrawExample extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    setContentView(R.layout.example);
    LinearLayout rl=(LinearLayout)findViewById(R.id.rl);
     rl.addView(new CircleView(this));
    }
public class CircleView extends View
{

    public CircleView(Context context) {
        super(context);
        // TODO Auto-generated constructor stub

    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub

        Paint p=new Paint(Paint.ANTI_ALIAS_FLAG);
        p.setStrokeWidth(100);
        p.setStyle(Paint.Style.STROKE);
        p.setColor(Color.BLUE);

        canvas.drawRect(200, 100, 200, 100, p);
        canvas.save();  
        canvas.rotate((float)145);

        canvas.restore();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:28:43.007

你保存你的画布，旋转它，然后在不做任何绘图的情况下恢复它。如果您尝试将 Rectangle 向右旋转 145º，请执行以下操作：

```
@Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub

        canvas.save();  
        canvas.rotate((float)-145,canvas.getWidth()/2,canvas.getHeight()/2);

        Paint p=new Paint(Paint.ANTI_ALIAS_FLAG);
        p.setStrokeWidth(100);
        p.setStyle(Paint.Style.STROKE);
        p.setColor(Color.BLUE);

        canvas.drawRect(200, 100, 200, 100, p);

        canvas.restore();
    } 
```

此外，不建议在 onDraw() 中实例化和定义 Paint。您应该在构造函数中声明和定义它，然后重用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T02:11:22.760

为了使它起作用，您需要注释 canvas.restore();

# c# - 无法转换为字符

> ID：12706490
> 
> 赞同：0
> 
> 时间：2012-10-03T10:22:48.163
> 
> 标签：c#

这只是一个简单的问题，我有点难过......

据我所见，我实际上并没有在任何地方使用 char，因为 model.children 是 a`IList<>`而 model.Name 是字符串，但是我的 foreach 循环给出了错误，即它无法将 char 转换为 catalogue.department，如果你需要任何更多信息，请随时询问。

```
 private void DisplayOnWebsiteChecked(Object sender, EventArgs e)
    {
        var departments = model.Name;
        var departmentChildren = model.Children;

        if (departmentChildren != null)
        {
            int zeroChildren = 0;

            if (departmentChildren.Count.Equals(zeroChildren));
            {
                foreach (Department Children in departments)
                {
                }
            }
        }
    } 
```

编辑：这个问题实际上已经修复，我将在下面发布固定代码，因为事实证明我实际上是通过将列表放在错误的位置来搞砸代码。

```
 private void DisplayOnWebsiteChecked(Object sender, EventArgs e)
    {
        var departments = model.Name;
        var departmentChildren = model.Children;

        if (departmentChildren != null)
        {
            int zeroChildren = 0;

            if (departmentChildren.Count.Equals(zeroChildren));
            {
                foreach (Department Child in departmentChildren)
                {
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:25:10.430

> model.Name 是一个字符串

您已分配：

```
var departments = model.Name; 
```

这里的部门是类型`string`和字符串实现`IEnumerable<char>`，这就是为什么当你使用它枚举它时，循环中`foreach`的项目是类型的。`foreach``char`

你正在使用

```
foreach (Department Children in departments)
    {
    } 
```

这里 Children 是类型，`char`因为部门是一个字符串，而您已将其指定为类型`Department`，这就是您收到此错误的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:25:28.037

`departments`是一个`string`任务：

```
 var departments = model.Name; 
```

这就是为什么你`Children`得到`char`

应该：

```
 foreach (Department Children in departmentChildren)
 {
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:26:14.297

问题在于这一行：

```
foreach (Department Children in departments) 
```

`departments`是一个字符串，而您正在尝试对其进行迭代，这会将字符串视为`IEnumerable<char>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:25:14.290

在您的代码中：

```
var departments = model.Name; 
```

我想 Name 是一个字符串，然后您正在枚举字符集合。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T10:31:04.137

**部门**是 a`string`并且您正试图将其`string`视为`IEnumerable<char>`

***作为`string`工具`IEnumerable<char>`***，这就是为什么 中的项目`foreach loop`是 type`char`。

**和**

```
int zeroChildren = 0;

if (departmentChildren.Count.Equals(zeroChildren));
{

} 
```

那么在这里，***如果collection是空的，loop******的含义是什么......？`foreach``departmentChildren`***

# iphone - MKMapView 旋转 iOS6 缩放

> ID：12706495
> 
> 赞同：1
> 
> 时间：2012-10-03T10:23:10.333
> 
> 标签：iphone, ios, mkmapview, ios6, ios6-maps

在 iOS6 之前，我使用 MKMapView 的子视图根据用户的 GPS 方向（非航向）旋转 MKMapView。一切都很完美，我将视图初始化如下：

```
mapView = [[MKMapView alloc] init];    
mapView.delegate = self;
mapView.clipsToBounds = FALSE;
mapView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight;        
self.view = mapView; 
```

旋转时，我做了以下事情：

```
UIView *innerMap = [mapView.subviews objectAtIndex:0];
if([innerMap isKindOfClass:[UIView class]])
{
    innerMap.transform = CGAffineTransformMakeRotation(degreesToRadians(-lastDegrees));
} 
```

正如我所说，一切都很完美。好消息是，当地图旋转时，它会自动缩放到视图的整个框架并填充旋转创建的黑色角落。

但是，新的 iOS6 地图不会缩放和填充角落！所以当它旋转时，一半的视图丢失了，另一半是黑色的（背景色）。我尝试了什么？

*   尝试新 MKMapview 的所有不同子视图（也将它们的调整掩码设置为与地图视图相同的值）
*   试图将 contentmode 设置为 scaleToFill （也在子视图中）
*   试图将自动调整子视图设置为 true
*   旋转后尝试重置框架

不幸的是，我所有的尝试都没有效果。不知何故，谷歌地图会自动缩放并填充黑色角落，而 iOS 地图则不会。那么我是否在这里遗漏了一些东西，我忘记了 UIView 的一些很棒的属性，或者这对于新的 iOS6 地图来说根本不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:53:23.087

如何让 MapView 比屏幕尺寸大得多，这样当它旋转时你就看不到它了？

# php - 我似乎无法让 AJAX/JS 重新加载 PHP 脚本并更新各种页面元素

> ID：12706501
> 
> 赞同：2
> 
> 时间：2012-10-03T10:23:30.287
> 
> 标签：php, ajax, streaming, reload

这就是这种情况。我正在构建一个页面来托管托管在 Icecast 服务器上的广播流。我让播放器工作得很好，并拼凑了一个 PHP 脚本来从服务器中提取和解析各种数据点。当前曲目、听众人数等信息。

这就是问题所在。首次打开页面时它加载正常，但我无法找到一种方法让这些变量每 5-10 秒左右更新一次，并在不完全重新加载页面的情况下使用新信息更新页面（这是毕竟广播电台，每 10 秒重新缓冲一次电台是不可行的。

在从代码中删除了各种尝试之后，这就是我到目前为止所拥有的。有任何想法吗？我已经看到它针对一两个变量完成了，但我在这里几乎有十几个......

```
 <div id="current_song"></div>

            <script language="javascript" src="http://code.jquery.com/jquery-1.8.2.min.js"></script> 
            <script language="javascript"> 
            {
              $.ajax({
                type: 'POST',
                url: 'script.php',
                data: 'getLatestInfo',
                dataType: 'json',
                cache: false,
              success : function(dp){
                $.getJSON('script.php', function(dp) {
            //'data' will be the json that is returned from the php file
                $.("#current_song").html("dp[9]");
            });
               getlatest();
              };
              });
            }
            </script> 
```

这是PHP解析器

```
<?php 
Function getLatestInfo() {

$SERVER = 'http://chillstep.info:1984'; 
$STATS_FILE = '/status.xsl?mount=/test.mp3'; 
$LASTFM_API= '27c480add2ca34385099693a96586bd2'; 

//create a new curl resource 
$ch = curl_init(); 

//set url 
curl_setopt($ch,CURLOPT_URL,$SERVER.$STATS_FILE); 

//return as a string 
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1); 

//$output = our stauts.xsl file 
$output = curl_exec($ch); 

//close curl resource to free up system resources 
curl_close($ch); 

//loop through $ouput and sort into our different arrays 
$dp = array(); 

$search_for = "<td\s[^>]*class=\"streamdata\">(.*)<\/td>"; 
$search_td = array('<td class="streamdata">','</td>'); 

if(preg_match_all("/$search_for/siU",$output,$matches)) { 
   foreach($matches[0] as $match) { 
      $to_push = str_replace($search_td,'',$match); 
      $to_push = trim($to_push); 
      array_push($dp,$to_push); 
   } 
} 
$x = explode(" - ",$dp[9]); 

echo json_encode($dp);
}
 ?> 
```

我知道它看起来还不漂亮，但这就是 CSS 的用途吗？

有任何想法吗？本质上，我需要 PHP 脚本重新运行、更新变量并重建文本输出，而无需触及音频标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:03:21.837

Javascript 是在客户端（在网站访问者机器上）执行的代码，而 PHP 是在服务器端执行的代码。在不重新加载整个页面的情况下将内容插入页面的方法是使用 Javascript 将代码注入 HTML。现在，例如，假设您的服务器上有一个名为 getLatest.php 的 PHP 文件，其中包含一个名为 getLatestVariables() 的函数，该函数找出所有变量的最新值并返回一个包含它们的数组。你可以做的是使用javascript从getLatest.php调用getLatestVariables()，当函数返回数组时，它会将它返回给javascript。一旦变量数组返回到 javascript，您就可以将变量插入 HTML div，而无需刷新整个页面。

调用 php 函数我建议使用 jquery 执行 ajax 调用也插入从 php 返回的数据，jquery 也是你最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:29:05.060

为此，您需要客户端 JavaScript。掌握基本的 ajax 书籍。您可以请求脚本每 5 秒更新一次数据并在页面上更新，这很复杂，需要一些 JavaScript 知识。该脚本也必须是新的，或者编辑此脚本以跟踪**请求类型**并相应地返回数据。

```
var url="http://script-address"
var req = new XMLHttpRequest(); // Begin a new request
req.open("GET", url); // An HTTP GET request for the url
req.send(null); 
```

这是您可以检查响应的方式

```
req.onreadystatechange = function() {
if (req.readyState == 4 && req.status == 200) {
//we got a complete valid HTTP response
var response = req.responseText; 
//code to handle response
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:35:16.733

php 是一种服务器端语言，因此在页面中重新运行 php 将始终导致整个页面刷新，但是如果您对不同的 php 文件使用 javascript ajax 调用（我建议使用 jquery），则可以执行该 php 文件服务器端而不影响您的页面。然后，您可以将此 php 文件中新找到的变量返回到 javascript，并将它们插入到 ajax 调用的回调中。

看到这个[问题的答案](https://stackoverflow.com/questions/2269307/using-jquery-ajax-to-call-a-php-function)

如果您需要更多详细信息，请告诉我...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T15:19:15.283

```
 $.getJSON('phpFileThatReturnsJSON.php', function(data) {
//'data' will be the json that is returned from the php file
$.("#idOfDivToInsertData").html("an item from the json array ie data['song']");
}); 
```

查看 ajax 调用的 JQuery 文档，如果你已经做到了这一点，你应该能够很快地完成它。也不要忘记在您的 html 标头中包含 jquery 库...

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script> 
```

# iphone - 如何在没有自动布局的情况下设置视图框架

> ID：12706504
> 
> 赞同：2
> 
> 时间：2012-10-03T10:23:49.243
> 
> 标签：iphone, objective-c, xcode, ios6

随着 iOS 6 的发布，我更改了我的应用程序故事板以使用新的自动布局功能。

我的问题是我在一个视图控制器中设置了一个 tableview 框架 - 但是当我使用自动布局功能时 table.frame = CGRectMake(..) 代码似乎被忽略了。

如果有 iAd 或没有 iAd，我的应用程序应该更改 tableview 框架。

![tableview 太高了——我们必须改变它。](../Images/e9fd79c1ed12bd7e9ae7246037b6f843.png)

我不知道我是否可以通过自动布局解决这个问题 - 也许你可以帮助我。

来自德国的问候 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T21:28:59.533

我知道这已经过时了，但是随着迁移到 iOS7，我觉得是时候为我自己的应用程序激活自动布局了。我遇到了这个问题，发现我可以简单地重新打开自动布局并将您的`table.frame = CGRectMake(..)`代码放入：

```
- (void) viewDidAppear:(BOOL)animated
{
table.frame = CGRectMake(..)
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T10:29:06.290

不要使用自动布局并删除xib 中的`UIViewAutoresizingFlexibleWidth`and `UIViewAutoresizingFlexibleheight`。如果你没有得到它，请告诉我。

并在代码中使用 set frame 属性。

# facebook - 如何在不征得用户许可的情况下在 facebook 中获取用户的公开信息？

> ID：12706506
> 
> 赞同：4
> 
> 时间：2012-10-03T10:23:53.960
> 
> 标签：facebook, facebook-graph-api

有没有办法在不征得用户许可的情况下获取用户的公开信息？在 facebook 中，我知道我们可以在不征得用户许可的情况下获取用户的基本信息，例如 id、姓名、图片、性别和他的地区（但不能获取他的其他公共信息）。看看这个链接：http: [//zesty.ca/facebook/](http://zesty.ca/facebook/) 我检查了源代码，发现他得到了访问令牌。这个链接是如何做到的。他是如何获得访问令牌并获得用户的公开信息的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:50:48.233

您可以仅使用 Facebook 应用在初始化后具有的应用令牌来查询公共数据，以访问以下内容：-

*   ID
*   姓名
*   名
*   中间名字
*   姓
*   性别
*   语言环境
*   [此处](https://developers.facebook.com/docs/reference/api/user/)列出的其他人没有访问令牌或应用程序访问令牌

为此，在初始化您的 Facebook 应用程序后，如

```
$facebook = new Facebook(array(
   'appId'  => 'APP-ID',
   'secret' => 'APP-SECRET',
)); 
```

您可以简单地查询 Graph api

```
$user_public_profile = $facebook->api('/user','GET'); 
```

并检索数据。

# ios - 使用设备上的仪器进行自动化测试

> ID：12706508
> 
> 赞同：4
> 
> 时间：2012-10-03T10:23:56.413
> 
> 标签：ios, xcode, automation, instruments, ios-ui-automation

我正在尝试按照[这篇文章](https://stackoverflow.com/questions/4191945/can-the-ui-automation-instrument-be-run-from-the-command-line)从命令行在 iOS 设备上运行 UIAutomation 脚本，但我无法使其工作。

这是我目前使用的命令：instruments -t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate /Users/X/Library/Developer /Xcode/DerivedData/TestiPhoneAutomation2-dyufpxsavtdqkybpagcoawdudzid/Build/Products/Debug-iphoneos/TestiPhoneAutomation2.app -e UIASCRIPT "/Users/X/Workspaces/TestiPhoneAutomation/test2.js" -e UIARESULTSPATH "/Users/X/Workspaces/TestiPhoneAutomation2/ " -w 80bf5b...UDID...dfb52543 -v

它在模拟器上运行良好（用 Debug-iphonesimulator 替换 Debug-iphoneos，在这种情况下它也忽略 -w），但是如果我使用为设备编译的应用程序启动它，它会崩溃（我尝试使用发布和调试，我得到结果相同）。

我得到的错误是：

> posix 生成失败；中止启动（二进制 == /Users/X/Library/Developer/Xcode/DerivedData/TestiPhoneAutomation2-dyufpxsavtdqkybpagcoawdudzid/Build/Products/Debug-iphoneos/TestiPhoneAutomation2.app/TestiPhoneAutomation2）。2012-10-03 12:10:36.609 仪器[76151:1603] 记录取消：至少一个目标未能发射；中止运行仪器跟踪错误：无法启动跟踪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T13:21:44.277

我遇到了同样的错误，但我没有运行多个 Instruments 副本。我通过将`-w UDID`参数放在应用程序之前并仅使用应用程序的名称（应用程序已部署到设备）来实现此功能。

我使用的命令行如下（使用 Xcode 4.6）：

> 仪器 -t /Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate -w <device_id> <app_name> -e UIASCRIPT <path_to_script> -e UIARESULTSPATH <path_to_results>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T17:21:13.400

对于其他遇到此问题的人，我将解释什么对我有用以及我如何解决这个问题。

我执行了`ps`命令来查看哪些进程正在运行。我发现仪器仍在运行。然后我做了`killall instruments`，这杀死了仪器进程。然后我做了我的仪器命令，之后它工作得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T03:59:01.993

请检查命令行中 UDID 的顺序，实际上所有参数也仅在构建的调试版本上运行。希望这有效，因为它对我有用。

# django - 在 django 中重定向后取消登录

> ID：12706509
> 
> 赞同：0
> 
> 时间：2012-10-03T10:23:57.670
> 
> 标签：django, django-views, django-authentication

我有 2 个 Django 项目：

*   `project_redirect`，在[http://localhost.com:8005上运行](http://localhost.com:8005)
*   `project_logged_in`，它在[http://localhost.com:8000](http://localhost.com:8000)上运行（我在这个中通过了身份验证）

当我尝试重定向`project_redirect`到需要在 my 中进行身份验证的视图时`project_logged_in`，我会取消登录（在视图的第一行中进行了`project_logged_in`检查）。`request.user.is_authenticated()`

我的重定向视图示例如下：

```
def test_redirect_view(request):
    return HttpResponseRedirect('http://localhost.com:8000/login_required_view/') 
```

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:31:29.643

您的会话 cookie 由两个项目共享，因为它们使用相同的域。

尝试[`SESSION_COOKIE_NAME`](https://docs.djangoproject.com/en/dev/topics/http/sessions/)在两个项目中设置独特的东西。

# content-management-system - Silverstripe 3 doPublish 在控制器中

> ID：12706515
> 
> 赞同：0
> 
> 时间：2012-10-03T10:24:14.140
> 
> 标签：content-management-system, silverstripe

在旧的 silverstripe 安装（2.4）中，我有一个小计数器功能，看起来基本上像这样：

```
class Page_Controller extends ContentController {
  public function countUp(){ 
    $this->Counter = $this->Counter+1;
    $this->writeToStage('Stage');
    $this->publish("Stage", "Live");
  }
} 
```

我想将其移至 SS 3。不知何故，它不再起作用了，计数器属性永远不会在数据库中更新。有人知道为什么吗？

亲切的问候，弗洛里安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T00:13:38.370

1 - 该方法应该在 Page 类（模型）上，而不是控制器上。然后你可以调用 $this->data()->countUp(); 来自 Page_Controller 类。

2 - 你需要这行 $this->write(); $this->writeToStage('Stage'); 之前

# php - PHP 浮点数，小数点后 2 位：.00

> ID：12706519
> 
> 赞同：63
> 
> 时间：2012-10-03T10:24:35.040
> 
> 标签：php

当我进行这种类型转换时：

```
(float) '0.00'; 
```

我明白了`0`。我如何获得`0.00`并且仍然将数据类型作为浮点数？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-03T10:25:42.627

浮点数没有`0`or `0.00`：它们是内部（[IEEE754 ）二进制格式的不同字符串](http://en.wikipedia.org/wiki/IEEE_floating_point)*表示*，但浮点数是相同的。

如果要将浮点数表示为“0.00”，则需要使用[number_format](http://php.net/manual/en/function.number-format.php)将其格式化为字符串：

```
$numberAsString = number_format($numberAsFloat, 2); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-25T14:52:51.057

据我所知，PHP 没有解决方案来解决这个问题。此线程中给出的所有其他（上方和下方）答案都是胡说八道。

number_format 函数返回一个字符串作为 PHP.net 自己的规范中所写的结果。

如果你给出的值是 3.00，那么像 floatval/doubleval 这样的函数会返回整数。

如果你做 typejuggling 那么你会得到一个整数作为结果。

如果你使用 round() 那么你会得到一个整数作为结果。

我能想到的唯一可能的解决方案是使用您的数据库将类型转换为浮点数。以 MySQL 为例：

```
SELECT CAST('3.00' AS DECIMAL) AS realFloatValue; 
```

使用返回浮点数而不是字符串的抽象层执行此操作，然后就可以了。

## JSON输出修改

如果您正在寻找一种解决方案来修复您的 JSON 输出以保留 2 位小数，那么您可能可以使用如下代码中的后格式化：

```
// PHP AJAX Controller

// some code here

// transform to json and then convert string to float with 2 decimals
$output = array('x' => 'y', 'price' => '0.00');
$json = json_encode($output);
$json = str_replace('"price":"'.$output['price'].'"', '"price":'.$output['price'].'', $json);

// output to browser / client
print $json;
exit(); 
```

返回客户端/浏览器：

```
{"x":"y","price":0.00} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-03T10:26:15.457

0.00 实际上是 0。如果您需要在回显时使用 0.00，只需这样使用[number_format](http://php.net/manual/en/function.number-format.php)：

```
number_format($number, 2); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-12T10:08:57.807

您可以显示浮点数

*   有一定数量的小数
*   具有特定格式（本地化）

IE

```
$myNonFormatedFloat = 5678.9

$myGermanNumber = number_format($myNonFormatedFloat, 2, ',', '.'); // -> 5.678,90

$myAngloSaxonianNumber = number_format($myNonFormatedFloat, 2, '.', ','); // -> 5,678.90 
```

请注意，

第一个参数是您要格式化的浮点数

第二个参数是小数位数

第三个参数是用于在视觉上分隔小数的字符

第 4 个参数是用于在视觉上分隔数千的字符

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-03T10:26:01.167

使用该`number_format()`功能更改数字的显示方式。它将返回 a `string`，原始变量的类型不受影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T10:27:57.633

你可以试试这个，它会为你工作

```
number_format(0.00, 2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-08T18:00:06.630

尝试这个

```
$nom="5695.5";
number_format((float)($nom), 2, '.', ','); // -> 5,695.50

$nom="5695.5215";
number_format((float)($nom), 2, '.', ','); // -> 5,695.52

$nom="5695.12";
number_format((float)($nom), 0, '.', ','); // -> 5,695 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-03T10:31:35.547

您可以使用`floatval()`

[浮点数（）](http://php.net/manual/en/function.floatval.php)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2019-07-23T06:02:37.580

**尝试这个**

```
$result = number_format($FloatNumber, 2); 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-03-18T17:39:52.800

您可以使用圆形功能

```
round("10.221",2); 
```

将返回 10.22

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2017-06-07T08:17:37.813

当我们格式化任何浮点值时，这意味着我们正在将其数据类型更改为字符串。因此，当我们对任何金额/浮点值应用格式时，它将设置所有可能的符号，如点、逗号等。例如

```
(float)0.00 => (string)'0.00',
(float)10000.56 => (string) '10,000.56'
(float)5000000.20=> (string) '5,000,000.20' 
```

因此，从逻辑上讲，格式化后不可能保留浮点数据类型。

* * *

## 回答 #12

> 赞同：-3
> 
> 时间：2018-06-25T08:26:22.693

您可以使用这个简单的功能。 **number_format ()**

```
 $num = 2214.56;

    // default english notation
    $english_format = number_format($num);
    // 2,215

    // French notation
    $format_francais = number_format($num, 2, ',', ' ');
    // 2 214,56

    $num1 = 2234.5688;

   // English notation with thousands separator
    $english_format_number = number_format($num1,2);
    // 2,234.57

    // english notation without thousands separator
    $english_format_number2 = number_format($num1, 2, '.', '');
    // 2234.57 
```

# android - PopupWindow 中的 ListView 问题

> ID：12706520
> 
> 赞同：3
> 
> 时间：2012-10-03T10:24:39.630
> 
> 标签：android, listview, popupwindow

我有`ListView`一个`PopupWindow`。`PopupWindow`是这样初始化的

```
 window.setContentView(root);
    window.setTouchable(true);
    window.setFocusable(true);
    window.setOutsideTouchable(true);
    window.setWidth(WindowManager.LayoutParams.WRAP_CONTENT);
    window.setHeight(WindowManager.LayoutParams.WRAP_CONTENT); 
```

然后`ListView`：

```
 fileList = (ListView) root.findViewById(R.id.explorer_list);
    fileList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    fileList.setSelector(android.R.drawable.screen_background_light_transparent);
    fileList.setOnItemClickListener(this);

    [...]

    @Override
    public void onItemClick(AdapterView<?> adapter, View v, int pos, long id) {
        selected = (File) fileList.getItemAtPosition(pos);      
    } 
```

像这样，一切正常，除了选择器在滚动之前不会显示在选择`ListView`中（在滚动列表之前，没有任何东西在视觉上显示为选中，尽管项目被正确选择）。

如果我设置了`PopupWindow`不可聚焦，那么视觉选择可以正常工作（单击时会在视觉上正确选择该项目）但`onItemClick()`永远不会被调用，因此我无法获得所选项目。

`ListView.getSelectedItem()`在这两种情况下总是返回`null`，即使有一个选定的项目。

关于如何解决这种情况的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T09:33:55.537

我最后使用了一个自定义适配器来存储选定的值并从那里使用它来标记它：

```
public class FileExplorerAdapter extends ArrayAdapter<File> {

    /** File names */
    private List<File> values = new ArrayList<File>();

    /** Currently selected position */
    private int selected = -1;

    public FileExplorerAdapter(Context context, List<File> values) {
        super(context, R.layout.explorer_row, values);
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        // I know that my layout is always a TextView
        TextView row = (TextView) convertView;
        if (row == null) {
            row = (TextView) ViewHelper.inflateViewById(getContext(),
                    R.layout.explorer_row);
        }

        // More code...

        // Set up the background for selected element
        if (selected == position) {
            row.setBackgroundColor(Color.LTGRAY);

        // Override background selector
        } else {
            row.setBackgroundColor(Color.TRANSPARENT);
        }

        // More code...

        return row;
    }

    /** This sets the selected position */
    public void setSelected(int position) {
        selected = position;
    }
} 
```

并且在实现`OnItemClickListener`关联的类上`ListView`，我在适配器中设置了当前选定的项目。

```
@Override
public void onItemClick(AdapterView<?> adapter, View v, int pos, long id) {
    FileExplorerAdapter fileadapter = (FileExplorerAdapter) fileList
            .getAdapter();
    fileadapter.setSelected(pos);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-13T13:22:43.773

我有类似的问题，但在我的情况下`PopupWindow.setFocusble(false)`是必需的（在我的情况下 using`ListPopupWindow`不是解决方案，因为项目中的很多东西已经使用了 base`PopupWindow`的功能，包括扩展）。

[如果有人处于同样的情况，这里](https://code.google.com/p/android/issues/detail?id=3414)有一种基于 bug 讨论的解决方法（post #9）

主要思想是，它`ListView`的层次结构仍然接收触摸事件，因此我们可以手动触发`onItemClick()`。

然而，这种方法与 real 的触摸处理并非 100% 相同`ListView`（就像在点击一行时没有选择发光一样），这对我来说目前做得很好。

如果有人对此问题有更精确的解决方案，请分享。

所以，这里是完整`Adapter`的代码，可以在`ListView`里面`PopupWindow`使用`setFocusable(false)`：

私有类 CustomAdapter 扩展 ArrayAdapter {

```
private LayoutInflater mInflater;
private ListView mOwningListView;

public CustomAdapter(Context context, List<String> objects, ListView listView) {
    super(context, android.R.layout.simple_list_item_1, objects);
    mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    mOwningListView = listView;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.font_pick_row, null);
    }
    // this is the key point of workaround
    convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            /*
             *  as every row is still receiving their touches
             *  we can use this to manually trigger onItemClick
             *  since it doesn't firing in popupWindow.setFocusable(false)  
             */
            mOwningListView.getOnItemClickListener().onItemClick(mOwningListView, v, position, getItemId(position));

        }
    });
    //... other stuff
    return convertView;
} 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T14:15:21.447

//设置listview可聚焦属性为false

安卓：可聚焦=“假”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:30:30.230

用这个

```
fileList.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int pos, long arg3) {
            selected = (File) fileList.getItemAtPosition(pos);    

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    } ); 
```

# c# - 如何对使用线程的方法进行单元测试？

> ID：12706525
> 
> 赞同：2
> 
> 时间：2012-10-03T10:25:02.643
> 
> 标签：c#, java, unit-testing, junit, nunit

如何为使用线程的方法编写单元测试。

在下面的示例中如何测试 someMethod 方法？

```
 public class SomeClass {

    private final SomeOtherClass someOtherClassInstance = IoC.getInstance(SomeOtherClass.class);

    private final ExecutorService executorService = Executors.newCachedThreadPool();

    public void someMethod() {
        executorService.execute(new Runnable() {
            @Override
            public void run() {
                someOtherClassInstance.someOtherMethod();
            }
        });
    }
} 
```

java和.net中有没有为此目的的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T10:36:09.983

您的问题是“什么是单元测试”（UT）。UT 只是自动化测试的一种形式。在这种情况下，您的问题意味着代码调用操作系统来启动线程，因此根据定义，测试它的测试不会是单元测试，但可能是集成测试。

为什么我用看起来像语义的东西来打扰你是因为理解测试的意图使得编写测试和构建代码变得如此容易。那里的工作代码量大于那里的可测试代码量。

那么，如何将这段代码更改为可单元测试（我将跳过“为什么要麻烦这些东西”）......

C# 中的单元测试测试单一类型（您的类）......重要的是（根据定义）没有别的。所以你的代码需要反映这一点。您要测试的是，当我调用 ABC 时，它会执行此操作。这些东西包括启动一个线程。因此，您要测试该方法以启动一个调用的线程。这里的基础是您的应用程序需要一个线程，这就是您的断言。

又怎样？为线程创建创建一个代理，也许还有一个工厂。然后您可以在单元测试中断言它被调用以及如何处理它。听起来很难，但是当你养成习惯时真的很容易。

顺便说一句，Resharper 为操作系统类型（例如线程）创建代理。在他们的帮助中查看委派成员的资料。如果您不使用 Resharper，您应该使用。

是的，我知道这不是您想要的答案，但请相信我，这是您需要的答案。

我发现考虑以下类别的测试很有用：

*   单元测试
*   集成测试（或者可能是子系统测试）
*   功能测试（例如 UI/应用程序/UAT 测试）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-16T16:27:04.817

jMock 团队在[“jMock Cookbook：测试多线程代码”](http://jmock.org/threads.html)中描述了一种出色的 Java 方法。在与测试相同的线程上执行“线程”功能的概念也可以应用于 C# 代码（请参阅[此博客文章](http://svengrand.blogspot.de/2013/12/unit-testing-c-code-which-starts-new.html)）。C# 测试如下所示：

```
[Test]
public void TestMultiThreadingCodeSynchronously()
{
    // Arrange
    SomeOtherClass someOtherClassMock = MockRepository.GenerateMock<SomeOtherClass>();
    DeterministicTaskScheduler taskScheduler = new DeterministicTaskScheduler();
    SomeClass systemUnderTest = new SomeClass(taskScheduler, someOtherClassMock);

    // Act
    systemUnderTest.SomeMethod();

    // Now execute the new task on
    // the current thread.
    taskScheduler.RunTasksUntilIdle();

    // Assert
    someOtherClassMock.AssertWasCalled(x=>x.SomeOtherMethod());
} 
```

您的“被测系统”如下所示：

```
public class SomeClass
{
    private readonly TaskScheduler taskScheduler;
    private readonly SomeOtherClass instance;

    public SomeClass(
        TaskScheduler taskScheduler, 
        SomeOtherClass instance)
    {
        this.taskScheduler = taskScheduler;
        this.instance = instance;
    }

    public void SomeMethod()
    {
        Task.Factory.StartNew(
          instance.SomeOtherMethod, 
          new CancellationToken(), 
          TaskCreationOptions.None, 
          taskScheduler);
    }
} 
```

[此博客文章](http://svengrand.blogspot.de/2013/12/unit-testing-c-code-which-starts-new.html)中详细描述了 C# 解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T11:18:50.387

如果有另一个线程，您必须等到该方法被调用。您必须决定在考虑未调用该方法之前应该等待多长时间，没有工具可以为您做到这一点。

当然，您可以模拟 ExecutorService 以在当前线程中运行并避免该问题。

# python - 如何计算多项式拟合的误差（斜率和截距）

> ID：12706528
> 
> 赞同：5
> 
> 时间：2012-10-03T10:25:11.940
> 
> 标签：python, numpy, statistics, scipy

嗨，我想计算由 scipy.polyfit 函数计算的斜率和截距误差。我对 ydata 有 (+/-) 不确定性，那么如何将其包含在斜率和截距中计算不确定性？我的代码是，

```
from scipy import polyfit
import pylab as plt
from numpy import *

data = loadtxt("data.txt")
xdata,ydata = data[:,0],data[:,1]

x_d,y_d = log10(xdata),log10(ydata)
polycoef = polyfit(x_d, y_d, 1)
yfit = 10**( polycoef[0]*x_d+polycoef[1] )

plt.subplot(111)
plt.loglog(xdata,ydata,'.k',xdata,yfit,'-r')
plt.show() 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:56:19.827

您可以使用[`scipy.optimize.curve_fit`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html)而不是`polyfit`. 它有一个`sigma`用于 ydata 错误的参数。如果您对序列中的每个 y 值都有错误`yerror`（因此`yerror`与您的序列具有相同的长度`y_d`），您可以执行以下操作：

```
polycoef, _ = scipy.optimize.curve_fit(lambda x, a, b: a*x+b, x_d, y_d, sigma=yerror) 
```

有关替代方法，请参阅[Scipy Cookbook中的](http://www.scipy.org/Cookbook/FittingData)*将幂律拟合到有错误*的数据的段落。

# php - 如果字段不存在，则 mongodb 更新

> ID：12706530
> 
> 赞同：1
> 
> 时间：2012-10-03T10:25:14.480
> 
> 标签：php, mongodb, updates

```
$db->akis->update(
array("h" => (string) $_SESSION["_id"], "m" => array('$exists' => false)),
array('$set' => array("k" => $name)),
array("multiple" => true)
); 
```

我在这里所做的是，如果有一个 m 字段，不要更新 k。我要补充的是，“如果 m 字段存在”更新 i 而不是 k 字段，我该如何管理？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:44:49.257

我认为您需要在这里进行两个单独的查询。这对于 MongoDB 查询解析器来说太有条件了。

因此，您需要将逻辑放入两个单独的查询中，第二个查询如下所示：

```
$db->akis->update(
array("h" => (string) $_SESSION["_id"], "m" => array('$exists' => true)),
array('$set' => array("i" => $name)),
array("multiple" => true)
); 
```

一个接一个地跑。

# openlaszlo - Openlaszlo dhtml 调试

> ID：12706538
> 
> 赞同：1
> 
> 时间：2012-10-03T10:25:36.857
> 
> 标签：openlaszlo, lzx

是否可以在 dhtml 运行时调试应用程序。我安装了萤火虫，然后我给了 debug = true 并启动了我的应用程序。但是我得到一个错误 **$reportException is not defined**后来我发现我没有包含 LFCdhtml-debug.js。

包含 js 后，出现了调试窗口，但窗口不可拖动，并且窗口看起来扭曲了任何想法为什么我需要包含更多资源？

# android - Android 片段向后兼容

> ID：12706544
> 
> 赞同：0
> 
> 时间：2012-10-03T10:25:45.600
> 
> 标签：android, android-fragments

我正在尝试做一个我们需要使用片段的android应用程序。在进行向后兼容性时，我正在遵守规则。即扩展 FragmentActivity 而不是 Activity，我也使用 getSupportFragmentManager()。相同的代码适用于 4.1 但不适用于 2.2 。

我使用

```
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;

String newTime = String.valueOf(System.currentTimeMillis());
DetailFragment fragment = (DetailFragment) getActivity().getSupportFragmentManager().findFragmentById(R.id.detailFragment);
if (fragment != null && fragment.isInLayout()) {
      fragment.setText(newTime);
    } else {
      Intent intent = new Intent(getActivity().getApplicationContext(),     DetailActivity.class);
      intent.putExtra("value", newTime);
      startActivity(intent); 
```

任何人都可以帮忙吗？我正在接近部队。无法启动活动组件信息。它在包含框架的 setContentView() 主要活动中显示错误。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <fragment
        android:id="@+id/listFragment"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="match_parent"
        android:layout_marginTop="?android:attr/actionBarSize"
        class="com.example.fragmentsample.MyListFragment" ></fragment>

    <fragment
        android:id="@+id/detailFragment"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="match_parent"
        class="com.example.fragmentsample.DetailFragment" >
        <!-- Preview: layout=@layout/details -->
    </fragment>

</LinearLayout> 
```

日志猫：

```
10-03 16:03:54.586: E/AndroidRuntime(649): FATAL EXCEPTION: main
10-03 16:03:54.586: E/AndroidRuntime(649): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragmentsample/com.example.fragmentsample.RssfeedActivity}: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.os.Looper.loop(Looper.java:123)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-03 16:03:54.586: E/AndroidRuntime(649):  at java.lang.reflect.Method.invokeNative(Native Method)
10-03 16:03:54.586: E/AndroidRuntime(649):  at java.lang.reflect.Method.invoke(Method.java:507)
10-03 16:03:54.586: E/AndroidRuntime(649):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-03 16:03:54.586: E/AndroidRuntime(649):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-03 16:03:54.586: E/AndroidRuntime(649):  at dalvik.system.NativeStart.main(Native Method)
10-03 16:03:54.586: E/AndroidRuntime(649): Caused by: java.lang.UnsupportedOperationException: Can't convert to dimension: type=0x2
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.content.res.TypedArray.getDimensionPixelSize(TypedArray.java:463)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.view.ViewGroup$MarginLayoutParams.<init>(ViewGroup.java:3692)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.widget.LinearLayout$LayoutParams.<init>(LinearLayout.java:1400)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:1326)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.widget.LinearLayout.generateLayoutParams(LinearLayout.java:47)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:625)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
10-03 16:03:54.586: E/AndroidRuntime(649):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.Activity.setContentView(Activity.java:1657)
10-03 16:03:54.586: E/AndroidRuntime(649):  at com.example.fragmentsample.RssfeedActivity.onCreate(RssfeedActivity.java:10)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-03 16:03:54.586: E/AndroidRuntime(649):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
10-03 16:03:54.586: E/AndroidRuntime(649):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:28:33.233

在您的 XML 文件中，您需要提供片段的完整路径：

```
<android.support.v4.app.Fragment
android:id="@+id/detailFragment"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="match_parent"
        class="com.example.fragmentsample.DetailFragment" >
        <!-- Preview: layout=@layout/details -->
    </android.support.v4.app.Fragment> 
```

# jquery - 验证日期并比较日期

> ID：12706548
> 
> 赞同：0
> 
> 时间：2012-10-03T10:25:51.480
> 
> 标签：jquery, asp.net

我正在使用 asp.net 4.0。我创建了一个用于日期验证的 Web 用户控件。我使用的日期格式是`dd-MMM-yyyy`. 该控件有两个文本框，每个文本框旁边都有日历扩展器（Ajax 控件），并且我正在为文本框使用水印扩展器。所以我想创建控件，这样用户要么不能在文本框中输入任何内容（启用 =“False”），要么如果用户输入日期，它应该验证日期，如果日期有效，我必须比较日期。

当我禁用文本框以防止用户输入文本时，我在控件中将文本框值设为“null”。当我允许用户输入文本时，我必须验证日期。这个问题我通过使用正则表达式在一定程度上解决了。但我面临的主要问题是比较两个日期。我使用了比较验证器，并且为此使用了尝试过的 Jquery。当我使用比较验证器时，它只比较日期中的天数而不是整个日期。当我使用 jquery 时，它对于不同的浏览器表现不同。

任何人都可以通过比较验证器或 Jquery 帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:28:04.070

[Datejs](http://www.datejs.com/)和[mement.js](http://momentjs.com/)将在这方面为您提供帮助。这些库为您提供了更多的灵活性，而不仅仅是比较值

# android - 增强现实 QualComm 虚拟按钮

> ID：12706550
> 
> 赞同：1
> 
> 时间：2012-10-03T10:25:54.070
> 
> 标签：android, augmented-reality

我是 android -ndk AR 的新手，所以在使用 Virtaul 按钮示例（来自 Vuforia）时需要一些帮助。

我可以将虚拟触摸变为物理触摸吗

就像我触摸屏幕上的红色按钮然后茶壶变成红色

如果触摸蓝色按钮茶壶变为蓝色茶壶？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T09:00:37.040

我自己想通了需要一个复杂的计算并使用以下公式来处理它

```
 QCAR::CameraDevice& cameraDevice = QCAR::CameraDevice::getInstance();
        const QCAR::CameraCalibration& cameraCalibration = cameraDevice.getCameraCalibration();
        /////////////////////////////////////////////////////////Tyre//////////////////////////////////////////
        QCAR::Vec2F cameraPoint = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -97.68, -15.93, 0.f ));
        QCAR::Vec2F cameraPoint1 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -28, -15.93, 0.f ));
        QCAR::Vec2F cameraPoint2 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -97.68, -50.52, 0.f));
        QCAR::Vec2F cameraPoint3 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -28.f, -50.52, 0.f));

        //////////////////////////////////////////////////HeadLight////////////////////////////////////////////////////////////
        QCAR::Vec2F cameraPoint4 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -52.28, 53, 0.f ));
        QCAR::Vec2F cameraPoint5 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -21.f, 53.f, 0.f ));
        QCAR::Vec2F cameraPoint6 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -53.f, -8.f, 0.f));
        QCAR::Vec2F cameraPoint7 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( -21.f, -8.f, 0.f));
        //////////////////////////////////////////////////////Indicator//////////////////////////////////////////////////////////////////////////////
        QCAR::Vec2F cameraPoint8 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F(-4.f, -94.f, 0.f ));
        QCAR::Vec2F cameraPoint9 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( 18, -94, 0.f ));
        QCAR::Vec2F cameraPoint10 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F(-4.f, -71.f, 0.f));
        QCAR::Vec2F cameraPoint11 = QCAR::Tool::projectPoint(cameraCalibration, trackable->getPose(), QCAR::Vec3F( 18.f, -71.f, 0.f));

        //////////////////////////////////////////////////////////////////////////////////////////////////////////////

        QCAR::Vec2F screenPoint=  cameraPointToScreenPoint(cameraPoint);
        QCAR::Vec2F screenPoint1=  cameraPointToScreenPoint(cameraPoint1);
        QCAR::Vec2F screenPoint2=  cameraPointToScreenPoint(cameraPoint2);
        QCAR::Vec2F screenPoint3=  cameraPointToScreenPoint(cameraPoint3);
        //////////////////////////////////////////////////////////////////
        QCAR::Vec2F screenPoint4=  cameraPointToScreenPoint(cameraPoint4);
        QCAR::Vec2F screenPoint5=  cameraPointToScreenPoint(cameraPoint5);
        QCAR::Vec2F screenPoint6=  cameraPointToScreenPoint(cameraPoint6);
        QCAR::Vec2F screenPoint7=  cameraPointToScreenPoint(cameraPoint7);
        //////////////////////////////////////////////////////////////////
        QCAR::Vec2F screenPoint8=  cameraPointToScreenPoint(cameraPoint8);
        QCAR::Vec2F screenPoint9=  cameraPointToScreenPoint(cameraPoint9);
        QCAR::Vec2F screenPoint10=  cameraPointToScreenPoint(cameraPoint10);
        QCAR::Vec2F screenPoint11=  cameraPointToScreenPoint(cameraPoint11);
        //////////////////////////////////////////////////////////////////
        blY_Tyre=screenPoint.data[0];
        blX_Tyre=screenPoint.data[1];
        brY_Tyre=screenPoint1.data[0];
        brX_Tyre=screenPoint1.data[1];
        tlY_Tyre=screenPoint2.data[0];
        tlX_Tyre=screenPoint2.data[1];
        trY_Tyre=screenPoint3.data[0];
        trX_Tyre=screenPoint3.data[1];
        //////////////////////////////
        blY_Lite=screenPoint4.data[0];
        blX_Lite=screenPoint4.data[1];
        brY_Lite=screenPoint5.data[0];
        brX_Lite=screenPoint5.data[1];
        tlY_Lite=screenPoint6.data[0];
        tlX_Lite=screenPoint6.data[1];
        trY_Lite=screenPoint7.data[0];
        trX_Lite=screenPoint7.data[1];
        //////////////////////////////
        blY_Miror=screenPoint8.data[0];
        blX_Miror=screenPoint8.data[1];
        brY_Miror=screenPoint9.data[0];
        brX_Miror=screenPoint9.data[1];
        tlY_Miror=screenPoint10.data[0];
        tlX_Miror=screenPoint10.data[1];
        trY_Miror=screenPoint11.data[0];
        trX_Miror=screenPoint11.data[1]; 
```

# java - 将一个文件从服务器传输到客户端后套接字关闭异常

> ID：12706552
> 
> 赞同：1
> 
> 时间：2012-10-03T10:25:56.667
> 
> 标签：java, sockets, file-transfer

我正在实施两个程序；客户端和服务器，客户端向服务器请求文件以下载到本地文件系统中。

下载一个文件后，如果客户端愿意，它应该能够下载另一个文件。

但是，在下载文件后，服​​务器给了我一个异常说

```
java.net.SocketException: Socket closed 
```

这是我的代码..

客户：

```
 byte[] aByte = new byte[0];
        int bytesRead;
        String msg;
        FileOutputStream fos = null;
        BufferedOutputStream bos = null;
        while (!(msg = input.readLine()).equals("end")) {

            String myFolderName = "ServerFolder";
            File folder=new File(myFolderName);   
            if (!folder.exists()){ 
                folder.mkdir();
            }
            System.out.println("file downloading");
            try {

                System.out.println("1");
                fos = new FileOutputStream("ServerFolder/"+fileToDownload);
                bos = new BufferedOutputStream(fos);

                System.out.println("MSG: "+msg);

                bytesRead = in.read(aByte, 0, aByte.length);

                System.out.println("2");

                do {
                    baos.write(aByte);
                    bytesRead = in.read(aByte);
                } while (bytesRead != -1);

                System.out.println("3");
                bos.write(baos.toByteArray());
                bos.flush();
            } catch (IOException ex) {
                System.err.println(ex.getMessage());
            }

        }
        bos.close();

    } catch (IOException ex) {
        System.err.println(ex);
    } 
```

服务器：

```
if (outToClient != null) {
                    System.out.println("2");
                    File myFile = new File(msg);
                    byte[] mybytearray = new byte[(int) myFile.length()];

                    try {
                        fis = new FileInputStream(myFile);
                    } catch (FileNotFoundException ex) {
                        // Do exception handling
                    }
                    System.out.println("3");
                    bis = new BufferedInputStream(fis);

                    try {
                        bis.read(mybytearray, 0, mybytearray.length);   

                        System.out.println("mybytearray.length: "+(int) myFile.length());
                        out.write((int) myFile.length()+"\r\n");    
                        out.write("end\r\n");
                        out.flush();

                        outToClient.write(mybytearray, 0, mybytearray.length);
                        outToClient.flush();

                        s.shutdownOutput();

                        outToClient.close();

                        System.out.println("4");

                    } catch (IOException ex) {
                        System.out.println("5");
                        System.err.println(ex);
                    } 
```

（所有连接的东西都在每个方法的开头完成）

我有

```
s.close(); 
```

在服务器中但我删除了它以防万一它导致错误但它不是..

我假设

```
outToClient.close(); 
```

也不是造成的？...

我也用谷歌搜索了这个问题，有些人建议在服务器发送文件之前告诉客户端文件的大小..但效果不佳..所以我也删除了那部分（或者我做错了..)

谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:38:57.733

> java.net.SocketException：套接字关闭

这只有一个意思。您关闭了套接字，然后继续使用它。可能您不知道关闭 Socket 的输入或输出流会关闭另一个流和套接字。

您的代码中还有许多其他错误：您忽略了 read() 返回的值；当您可以直接写入目标时，您正在使用不必要的 BytearrayOutputStreams；等等等等。实在是不胜枚举。在 Java 中复制流的规范方法如下：

```
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
} 
```

如果你想使用同一个连接来传输多个文件，你必须在文件之前发送文件的长度，以便对等方知道它何时读取了所有文件，使用上述循环的明显修改。`DataOutputStream.writeLong()`并`DataInputStream.readLong()`提供最明显的方法。

# php - 致命错误：无法在有效的代码中使用字符串偏移量作为数组

> ID：12706565
> 
> 赞同：0
> 
> 时间：2012-10-03T10:26:41.217
> 
> 标签：php

我们有一个系统在工作，它从 url 获取 ips 列表并输出这些 ips 的位置。我没有写它，写的那个人已经走了（我可以访问代码）。问题是我突然收到上述错误。我想知道，如果没有对代码过于具体（但我非常愿意），如果没有人接触代码，这怎么可能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:30:16.227

PHP 5.4 现在抛出与这些相关的错误。5.3 默默失败

# c# - 使用 Linq 搜索 Xml 文件，获取与子节点匹配的节点

> ID：12706566
> 
> 赞同：1
> 
> 时间：2012-10-03T10:26:49.210
> 
> 标签：c#, xml, linq

我有一个具有以下结构的 XML 文件：

```
<Packages>
    <Package>
        <Name>Package1</Name>
        <Dependencies>
            <Dependency>Package2 </Dependency>
        </Dependencies>
    </Package>
    <Package>
        <Name>Package2</Name>
        <Dependencies>
            <Dependency>Package3</Dependency>
        </Dependencies>
    </Package>
    <Package>
        <Name>Package3</Name>
        <Dependencies />
    </Package>
</Packages> 
```

我想解析 Xml 文件，并打印出依赖“流”。

例如：

```
Package1 -> 
  Package2 ->
    Package3
Package2 ->
  Package3
Package3 
```

目的是创建将安装应用程序的“序列”，命令应存储在 Xml 文件中。一个包可能有依赖关系。

我可以使用 Linq 来解决这个问题吗？

我不需要一个完整的解决方案，只需要一个正确方向的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T21:38:11.797

简单的答案是可以。也使用 XPath。

> 使用 System.Xml.XPath；

您可以像这样使用递归进行设置：

```
XElement root = XElement.Load(file); // or .Parse(xmlString);
foreach(XElement package in root.Descendants("Package"))
{
    DoPackage(package, 0);
}

void DoPackage(XElement package, int level)
{
    StringBuilder name = new StringBuilder();
    for(int i = 0; i < level; i++) name.Append("  ");
    name.Append(package.Element("Name").Value);
    var dependencies = package.Descendants("Dependency");
    if(dependencies.Count() > 0)
        name.Append(" ->");
    Console.WriteLine(name.ToString());
    foreach(XElement dependent in dependencies)
    {
        string dependentName = dependent.Value;
        XElement dependentElement = 
            package.XPathSelectElement("//Package[Name='"+dependentName+"']");
        DoPackage(dependentElement, level + 1);
    }
} 
```

对不起，我不能很好地写提示。我没有测试或编译这个，所以它可能需要一些调整。

没有捕获无限循环。如果任何子依赖引用了上线包，则将出现无限循环。

这也是非常低效的，如果每个包都记住它的依赖项等等会更快。为此，您必须为每个包创建一个类。如果您要解析的文件非常大，您应该采用这种方法。带有密钥名称的A`Dictionary<string, PackageClass>`可能会有所帮助。

# jquery-chosen - 使用 jQuery 选择插件动态添加数据以进行选择

> ID：12706571
> 
> 赞同：0
> 
> 时间：2012-10-03T10:27:08.287
> 
> 标签：jquery-chosen

我面临使用所选插件动态添加选项到多个选择的问题。

由于我在数据库中有数百万条记录，因此我无法在页面加载期间将所有记录都填充为选项。

所以现在我必须使用 ajax 从数据库中获取匹配记录（在 keyup 事件上）并动态填充选择框。有什么办法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T15:52:11.740

您可以按值手动选择所需的选项，如下所示：

```
$("#form_field").val('value_to_be_selected'); 
```

然后打电话

`$("#form_field").trigger("liszt:updated");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-16T07:27:48.490

我们可以使用以下选项轻松地将选项附加到选择中。

```
<select class=”chosen-select”&gt;
<option value=”101”&gt;Hyderabad</option>
<option value=”102”&gt;Banglore</option>
<option value=”103”&gt;Chennai</option>
</select>

$(".chosen-select").append('<option value="104”&gt;Delhi</option>');
$(".chosen-select").trigger("chosen:updated"); 
```

有关所选 jquery 下拉列表的更多信息，您可以单击此处[http://www.dotnetqueries.com/Article/151/how-to-implement-chosen-plugin-with-example](http://www.dotnetqueries.com/Article/151/how-to-implement-chosen-plugin-with-example)

# java - 如何在多行文档中查找字符的偏移量

> ID：12706573
> 
> 赞同：1
> 
> 时间：2012-10-03T10:27:14.297
> 
> 标签：java

我需要在 word 文档中搜索字符串，并返回第一个字符的“偏移量”。我不确定的是如何解释换行符。如果文件包括：

> 你好
> 
> 世界。

'W' 的偏移量是多少 - 是 2，因为 'i' 的偏移量是 1？还是 3，因为隐藏的 '\n' 可以被认为是一个字符？如果文档使用 '\r\n' 回车怎么办？有没有标准的方法来处理这个（Java）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:30:55.410

答案是标准化：

```
test.replaceAll("\r", "").indexOf('W')
3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:32:40.470

我认为首先你应该与最初定义任务的人协商这个问题：返回第一个字符的“偏移量”。因为这完全取决于您打算如何进一步使用偏移值。

另一方面，我会计算所有“特殊”字符，也就是说我也会计算 \r 和 \n 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:35:25.977

`\r`并且`\n`也是字符并且像其他字符一样增加索引，只有 在您想确保换行符在处理之前从文本中删除所有内容`W`时才`\n`使用偏移量为 3
`\r`

# android - Android：在哪里关闭我的启动画面

> ID：12706576
> 
> 赞同：0
> 
> 时间：2012-10-03T10:27:24.327
> 
> 标签：android, dialog, android-webview, splash-screen, long-polling

我的应用程序加载了一个 json 提要和一个 webview，webview 的 url 取自 webview。在这两个都加载之前，我无法显示任何内容，因此我使用的是启动画面。我的问题是我的 webview 使用 XHR-Long Polling 连接到 socket.io 服务器。因此，我的 webview 认为它仍在加载数据，并且从未触发 onPageFinished 事件，这是我之前在添加 socket.io 之前关闭对话框的地方。这意味着启动画面永远不会消失。

我可以将我的 .dismiss() 放在哪里，以便它只在所有内容加载后才关闭？我可以做些什么来让 webview 认为它已经加载了页面？我的问题基本上是，处理这个问题的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T16:06:08.933

你可以将你的Androiddismiss() 绑定到WebView 的Javascript 接口，然后从运行在WebView 中的Javascript 代码调用它（例如在你的XHR 回调中）。

看看这个：http: [//developer.android.com/guide/webapps/webview.html#UsingJavaScript](http://developer.android.com/guide/webapps/webview.html#UsingJavaScript)

问候，帕特里克。

# java - 将 json jar 添加到类路径 java

> ID：12706578
> 
> 赞同：2
> 
> 时间：2012-10-03T10:27:37.423
> 
> 标签：java, json, classpath

我对 Java 世界很陌生。我想添加 Json 库来编译我的程序。[我从这里](http://code.google.com/p/json-simple/downloads/list)下载了文件。

当我试图用

```
 javac -classpath json.jar MyClassName.java 
```

我收到错误：

```
Note: JsonSimpleExample.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

当我尝试运行时：

```
java MyClassName 
```

我越来越：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/json/simple/JSONObject
    at MyClassName.main(MyClassName.java:9)
Caused by: java.lang.ClassNotFoundException: org.json.simple.JSONObject
    at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
    ... 1 more 
```

我在哪里犯错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T10:30:03.880

你也必须`-classpath`在运行时使用`java`。

```
java -classpath json.jar MyClassName 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:32:05.523

你犯了两个错误：

1.  您从编译器获得的消息是注释，而不是编译错误。按照说明获取详细信息
2.  运行应用程序时忘记设置类路径：

    ```
    java -classpath json.jar;. MyClassName 
    ```

（假设您在 Windows 上，并且您在包含 的目录中`MyClassName.class`）。如果您使用的是 Unix，请将 替换`;`为`:`.

请注意，将类放在默认的根包中是不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:34:48.223

错误的原因是，该类在编译时存在，让我们的应用程序成功编译并成功链接，但在运行时不可用。

```
java -classpath json.jar MyClassName (or)

java -cp json.jar MyClassName 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:31:55.197

第一个输出是来自 Java 编译器的关于使用未经检查的代码（如原始集合）的警告。类文件将已成功生成。

如果要修复这些警告，则可以使用`-Xlint`命令行开关进行编译并修复/抑制未检查/不安全的警告。

# c# - SerialPort 不读取消息

> ID：12706581
> 
> 赞同：0
> 
> 时间：2012-10-03T10:27:44.687
> 
> 标签：c#, serial-port, serial-communication

我正在尝试使用 [SerialPort] 类运行串行通信。我制作了一个简单的控制台应用程序项目，在其中使用[HyperTerminal](http://en.wikipedia.org/wiki/HyperTerminal)测试这个类。

这是我的程序：

```
class Program
{
    private static bool _continue = true;
    private static SerialPort port;

    static void Main(string[] args)
    {
        try
        {
            port = new SerialPort("COM4", 9600, Parity.None, 8, StopBits.One);
            port.ReadTimeout = port.WriteTimeout = 5000;
            port.Open();

            Thread thread = new Thread(Read);
            thread.Start();

            while (_continue)
            {
                string message = Console.ReadLine();

                if (message.Equals("quit"))
                    _continue = false;
                else
                    port.Write(message);
            }

            thread.Join();
            port.Close();
        }
        catch (Exception ex)
        { }
    }

    private static void Read()
    {
        while (_continue)
        {
            try
            {
                string message = port.ReadLine();
                Console.WriteLine(message);
            }
            catch (TimeoutException) { }
        }
    }
} 
```

`The problem is`以下内容：当我写一行（在控制台中）时，a 可以在 HyperTerminal GUI 中看到我写的内容，但是当我使用 HyperTerminal 写一行时，我的程序没有读取任何消息，该消息总是触发 a `TimeoutException`.

为什么？
我怎么解决这个问题？
谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:18:30.310

如何利用 SerialPort.DataRecieved 事件？

[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.datareceived.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:48:18.420

尝试 Port.Read 以防 Port.ReadLine 正在等待新行！

# deployment - Heroku / Rake 覆盖 RAILS_ENV

> ID：12706586
> 
> 赞同：0
> 
> 时间：2012-10-03T10:28:21.197
> 
> 标签：deployment, heroku, rake, staging

> **可能重复：**
> [Heroku 在每次部署时自动将 RAILS_ENV 和 RACK_ENV 变量更改为“生产”](https://stackoverflow.com/questions/12702140/heroku-automatically-changing-rails-env-and-rack-env-variables-to-production-o)

我目前正在尝试编写一个 Rake 脚本，该脚本将运行部署到我的登台应用程序所需的命令，该脚本将使用 assets_sync 将我的资产复制到我的 cdn。

```
namespace :deploy do
 desc 'Deploy the app'
 task :staging do
  app = "app-name"
  remote = "git@heroku.com:#{app}.git"

  system "git push #{remote} master"
  system "heroku run rake assets:precompile --app #{app}"
end 
```

结尾

但是，当我运行这个 Heroku 时，它会将我的 RAILS_ENV（以及其他）覆盖回生产环境。

运行 Heroku 之后发布

```
v143  Deploy 2b3aa3f                              10m ago
v142  Add RAILS_ENV, RACK_ENV, PATH, LANG, G..    10m ago 
```

任何想法为什么它可能会这样做？

非常感谢

菲尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:46:45.397

另一位用户[遇到了同样的问题](https://stackoverflow.com/questions/12702140/heroku-automatically-changing-rails-env-and-rack-env-variables-to-production-o)。鉴于您配置了变量，可能是 Heroku 错误。

尝试在 Heroku 开票。

如果您尚未[配置变量](https://devcenter.heroku.com/articles/config-vars)，请确保将[Ruby 环境](https://devcenter.heroku.com/articles/ruby-support) 更改`RAILS_ENV`为.`RACK_ENV``staging`

```
$ heroku config:add RAILS_ENV=staging
$ heroku config:add RACK_ENV=staging 
```

# ios - iPhone 5 显示器支持 * 是应用提交所必需的* 吗？

> ID：12706588
> 
> 赞同：5
> 
> 时间：2012-10-03T10:28:32.203
> 
> 标签：ios, appstore-approval, submission, iphone-5

*快速提问*：现在提交的新应用程序是否需要为 iPhone 5 显示屏定制 UI？

*详细信息*：我正在寻找一个**明确**的资源/文章，其中提到现在提交的新 iPhone 应用程序（即在 iPhone 5 发布之后）是否绝对必须具有新 iPhone 5 屏幕尺寸的全屏自定义 UI。

我基本上有一个 iPhone 应用程序，我已经研究了一段时间（iPhone 5 之前），现在才完成。显然它没有为 iPhone 5 量身定制的自定义 UI，但当然可以在“信箱”格式下运行良好。现在更改整个 UI 以完全支持 iPhone 5 屏幕会花费太多的精力和成本，所以想知道按原样提交应用程序是否会有任何问题，也许稍后会添加对 iPhone 5 的支持更新。

我已经浏览了官方的应用程序提交指南，没有看到任何特别提到这个事实，并且在 SO 上遇到了几个类似的问题，但没有一个直接回答这个问题。欢迎任何帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-11T09:11:09.897

事实证明，从 2013 年 5 月 1 日开始，根据 Apple 开发者新闻： [https ://developer.apple.com/news/?id=3212013b](https://developer.apple.com/news/?id=3212013b)

> 从 5 月 1 日开始，必须为配备 Retina 显示屏的 iOS 设备构建提交到 App Store 的新应用和应用更新，并且 iPhone 应用还必须支持 iPhone 5 上的 4 英寸显示屏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:59:32.137

不，它根本***不需要****** 。***Apple 依赖于我们来设置我们想要支持的版本的开发，同样`Target`的. 然而，对我们的开发人员来说，为我们的应用程序提供支持以吸引更多受众是有好处的。`iOS``Device``iPhone5`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T07:33:16.550

好吧，看起来没有任何确凿的证据可以挖掘这个问题。从我所能收集到的，

*   Apple 仍然接受不支持新 iPhone 5 分辨率的应用程序
*   新应用程序，认为他们可能不支持新资源，至少必须有 iPhone 5 大小的屏幕截图

我发现一些有用的链接，

1.  [在 GameSalad 论坛上](http://forums.gamesalad.com/discussion/49185/is-apple-still-accepting-non-4-5-sdkios6-apps-without-iphone5-res-support)
2.  [在 Apple 开发论坛](https://devforums.apple.com/thread/168227?tstart=0)上：使用基本 SDK iOS5.1 支持 iPhone 5
3.  [在 Apple 开发者论坛上](https://devforums.apple.com/thread/169446?tstart=0)：我的问题*

# android - FragmentPagerAdapter 中的 Fragment / ViewPager 未更新其视图

> ID：12706590
> 
> 赞同：0
> 
> 时间：2012-10-03T10:28:34.327
> 
> 标签：android, view

我有一个包含几个片段的 FragmentPagerAdapter。这些 Fragment 的内容发生了变化，但我没有在我的更新函数中获得要更新的 Fragment。我已经尝试了这些建议，但没有运气：

[ViewPager PagerAdapter 不更新视图](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)

[Android强制Fragment重建View](https://stackoverflow.com/questions/7796952/android-force-fragment-to-rebuild-view)

这是我的代码的截图：

```
private void updateNavigation() {
//update code to redraw the fragment
//not workind
//mNavigationViewPager.getAdapter().notifyDataSetChanged();
        FragmentManager fragmentManager = getFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();
        Bundle args = new Bundle();
        AFragment newFragment = new AFragment();
        args.putString("test");
        newFragment.setArguments(args);

        FragmentTransaction transaction = getFragmentManager().beginTransaction();
        transaction.replace(R.id.navigation_pager, newFragment);
        transaction.addToBackStack(null);
        transaction.commit(); 
```

这是片段：

```
public static class AFragment extends Fragment {
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Inflate the layout for this fragment, draw layout dynamically
            MyLinearLayout fl = new MyLinearLayout(getActivity());
                    Button btn = new Button(getActivity());
                    btn.setText(String.valueOf(cnt++));   
                    btn.setGravity(Gravity.LEFT);
                    btn.setPadding(28, 7, 0, 0);
                    fl.addView(btn, new MyLinearLayout.LayoutParams(7, 5, 70, 50));
                    fl.setPadding(5, 5, 5, 5);
            }
            return fl;
        }
    } 
```

创建活动：（..）

```
 mNavigationViewPager = new ViewPager(this);
            mNavigationViewPager.setId(R.id.navigation_pager);
            mTabsAdapter = new TabsAdapter(this, mNavigationViewPager);
    mTabsAdapter.addTab(actionBar.newTab().setText("text1"),
                    fragmentNr1, null);
 actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

当我打电话

```
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_STANDARD); 
```

一个选项菜单交互，然后做

```
actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS); 
```

在另一个选项菜单中，片段得到正确更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T12:35:54.227

它正在工作，我只是打错了。

# html - 将 html 5 canvas 元素用作弹出窗口的交叉点会不会不正确？

> ID：12706592
> 
> 赞同：0
> 
> 时间：2012-10-03T10:28:48.473
> 
> 标签：html, canvas, element

当我说不正确时，显然事情会起作用 - 但是以这种方式使用它有什么非法、错误或无效的吗？

说只是一个（x）按钮来关闭一个窗口？（显然在 CSS 中声明的图像和元素中没有内容）。

我知道可以使用的元素有很多选择`<button>`，`<div>`,`<span>`等。但是这是完全错误的还是可以的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:40:43.510

IE8 及更低版本不支持该元素，因此如果要支持 IE8，[`canvas`](http://www.w3schools.com/html/html5_canvas.asp)则不能依赖 a 。`canvas`

另外，我的猜测是画布解决方案的性能可能不如简单图像。

# asp.net - 有没有类似 ELMAH axd for log4net 来监控日志的东西？

> ID：12706598
> 
> 赞同：5
> 
> 时间：2012-10-03T10:29:05.473
> 
> 标签：asp.net, log4net, elmah

是否有任何可用于**log4net的组件或诸如****ELMAH axd**文件之类的东西？

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:39:12.903

我不认为 log4net 提供 UI。

但是您可以使用各种 log4net 查看器，例如：

**1 个** [用于 Log4Net 的 LogViewer](http://yourlog4netviewer.codeplex.com/)

LogViewer 是一个 WPF 应用程序，允许查看 Log4Net 日志文件。日志必须采用 Xml 格式（只需在应用程序配置文件中添加几行即可将其配置为使用此格式）。已支持搜索、日志合并、过滤，但该项目已开放以进行新的增强。

**2** [亚尔夫！](http://yalv.codeplex.com/)

雅乐！是 Log4Net 的日志查看器，允许同时比较多个日志文件；包括合并、过滤、打开最近使用的文件、项目排序等功能。

**3** [LOG4VIEW](http://www.log4view.com/home/)

LOG4VIEW 是用于 log4net、NLog 和 log4j 的强大日志查看器**

# php - Magento：在 jQuery 中使用 php

> ID：12706600
> 
> 赞同：0
> 
> 时间：2012-10-03T10:29:06.043
> 
> 标签：php, jquery, magento

我正在尝试使用此请求：

```
$this->helper('catalog/image')->init($_product, 'image'); 
```

在这段 jquery 代码中：

```
jQuery('#image1').attr('src',   /*Php code goes here*/  ); 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:32:33.637

只能这样写

```
jQuery('#image1').attr('src', <?php  /*Php code goes here*/ ?> ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:33:12.380

假设 PHP 代码输出一个字符串。

将您的评论替换为：

```
<?php echo json_encode( $this->helper('catalog/image')->init($_product, 'image') ); ?> 
```

`json_encode`应该让它 JavaScript 安全（即使你给它一些不能变成真正的 JSON 的东西，比如字符串）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:17:55.110

您需要将 javascript 放在模板文件中，以便在加载页面时，从 Magento 为 javascript 提供正确的数据。javascript 将最终出现在页面本身的源代码中，它与标记的其余部分一起呈现，从而使您能够将服务器端数据传递给客户端功能。目前这是唯一没有通过 AJAX 与 Magento 通信的技术。

看起来您正在对产品图片做一些事情，所以添加 javascript`/app/design/frontend/[theme]/[package]/template/catalog/product/view/media.phtml`并使用 Magento 函数来获取您需要的图片，即：

```
jQuery('#image1').attr('src', <?php echo $this->helper('catalog/image')->init($_product, 'image') ?>); 
```

*（这可能适用于您的模板，也可能不适用，在知道您将在哪里放置代码以及那里有什么代码之前无法判断。但是它应该让您走上正确的道路！）*

# c# - BeginAcceptTcpClient 不等待

> ID：12706602
> 
> 赞同：0
> 
> 时间：2012-10-03T10:29:08.257
> 
> 标签：c#, multithreading, sockets

我正在做一些套接字编程，最终将进入 Windows 服务。出于测试目的，我使用控制台应用程序。我有点困惑，因为 BeginAcceptTcpClient 或 Task.WaitAll 没有等待，控制台应用程序刚刚结束。如果我在 main 末尾添加一个 Console.ReadLine ，一切正常。在 Main 中进行了一些细微的修改，当我将它作为服务运行时它也可以工作。为什么 Task.WaitAll 不等到控制台应用程序中的所有任务都完成，为什么 BeginAcceptTcpClient 不停止并等待控制台中的连接，但是当我在服务中运行它时工作正常。

```
static void Main(string[] args)
        {
            listener = new TcpListener(IP_ADDRESS, Port);
            listener.Start();

            var tasks = new List<Task>();

             Task task = Task.Factory.StartNew(() => AcceptClient(listener),TaskCreationOptions.LongRunning);
                tasks.Add(task);

            Task.WaitAll(tasks.ToArray());

        }

        private static void AcceptClient(TcpListener tcpListener)
        {
            Task<TcpClient> acceptTcpClientTask = Task.Factory.FromAsync<TcpClient>(tcpListener.BeginAcceptTcpClient, tcpListener.EndAcceptTcpClient, tcpListener);

              acceptTcpClientTask.ContinueWith(task => { OnAcceptConnection(task.Result); AcceptClient(tcpListener); }, TaskContinuationOptions.OnlyOnRanToCompletion);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:33:54.487

这是异步编程的基础。使用 AccesptTcpClient 等待结果。Begin* 函数立即返回。您可以指定结果到达时要调用的回调。

# iphone - 在 USplitView iOS 5.1 中加载和隐藏主视图

> ID：12706606
> 
> 赞同：0
> 
> 时间：2012-10-03T10:29:36.633
> 
> 标签：iphone, ios, uisplitview

我在谷歌上搜索了很长时间，但没有得到解决方案，在 iOS 5.1 主视图中出现右滑动，左滑动消失。

我想在详细视图的按钮单击上加载主视图，这怎么可能？

下面的代码对我有用，主视图隐藏，但主视图的黑屏尺寸仍然代替主视图。

```
- (void)hideMaster:(BOOL)hide {

  AppDelegate *appDelegate=(AppDelegate *)[[UIApplication sharedApplication] delegate];
 UISplitViewController* spv = appDelegate.splitViewController;
 spv.delegate=self;
 self.hiddenMaster= hide;
 [spv willRotateToInterfaceOrientation:self.interfaceOrientation duration:0];
 [spv.view setNeedsLayout];     
 }

- (BOOL)splitViewController:(UISplitViewController*)svc shouldHideViewController: (UIViewController *)vc inOrientation:(UIInterfaceOrientation)orientation {

NSLog(@"Spv: I do %@show the master", (self.hiddenMaster?@"not ":@""));

return self.hiddenMaster;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:53:21.940

据我了解，执行此操作的标准方法是：

1.  在您的应用委托文件中，您需要将初始视图控制器之一设置为 UISplitViewControllerDelegate。如果您不在这里执行此操作，如果您以纵向启动应用程序，您将不会获得第一个按钮。例如：

    ```
    UINavigationController *masterNavigationController = [self.splitViewController.viewControllers objectAtIndex:0];
    MyMasterVC *master = [self.masterNavigationController.viewControllers objectAtIndex:0];
    self.splitViewController.delegate = master; 
    ```

2.  在 MyMasterVC.h 中`<UISplitViewControllerDelegate>`通过修改接口声明自己为，如：

    `@interface MyMasterVC : UIViewController <UISplitViewControllerDelegate>`

3.  在 MyMasterVC.m 中，您需要实现[Apple 文档中描述的 UISplitViewControllerDelegate 的各种方法](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISplitViewControllerDelegate_protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40009454)

隐藏和显示视图控制器的方法为您提供了一个 UIBarButtonItem，然后您必须将其添加到您的详细视图控制器（例如，在 UIToolBar 或 UINavigationBar 中）或从中删除。

如果您在处理这个问题时遇到问题，可以在斯坦福大学优秀的 Paul Hegarty（2010 年秋季或 2011 年秋季 - 不记得）的 iTunesU 讲座中很好地介绍它。你真的应该看看。iOS5.1 改变了 MasterVC 的呈现方式，从课程中严格的“popover”方式呈现，但我认为描述的方法仍然有效。课程还很早，可能是第 5 课、第 6 课或第 7 课之类的。我认为它被称为拆分视图或 iPad 拆分视图或类似名称。

**编辑：** 这是第 7 课，它被称为：“UIToolbar 和 iPad 应用程序”

# python - 查看哪个 Python 类正在使用我的 100% CPU？

> ID：12706607
> 
> 赞同：3
> 
> 时间：2012-10-03T10:29:37.903
> 
> 标签：python, performance, pymongo, tweepy

我正在运行一个带有一些导入类（如 Tweepy 和 PyMongo）的 python 脚本。我遇到了性能问题（也就是 100% 的 CPU 堵塞）。我想知道我的哪些 Python 类是可靠的！

那可能吗？

[（在这里](https://stackoverflow.com/questions/12698949/efficiency-when-inserting-into-mongodb-pymongo)详细描述我的问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:32:38.077

很可能通过[profiler](http://en.wikipedia.org/wiki/Profiling_%28computer_programming%29)来完成。

分析器基本上运行您的代码并在执行此操作时保存有关它的统计信息。例如，哪些函数调用了哪些函数以及每个调用需要多长时间等。

查看[此答案](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)以获取更多信息。

# android - 任何模拟器上都没有互联网连接

> ID：12706619
> 
> 赞同：3
> 
> 时间：2012-10-03T10:30:17.850
> 
> 标签：android, android-emulator

我没有在 android 模拟器中获得互联网连接。我已经尝试了以下链接中的所有解决方案， [Link1](https://stackoverflow.com/questions/4376553/upgraded-to-sdk-2-3-now-no-emulators-have-connectivity)， [Link2](https://stackoverflow.com/questions/2437366/android-emulator-internet-access)， [Link3](https://stackoverflow.com/questions/5801204/android-emulator-no-internet-connectivity) 但我仍然没有在模拟器中获得互联网连接。我的机器上没有代理设置。Windows 防火墙已关闭。如何解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:33:21.750

即使按 F8，您的互联网连接也无法正常工作。只要确保当你启动你的模拟器你的机器已经连接到互联网上。如果您先启动模拟器然后连接到互联网，它将无法在您的模拟器中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T07:17:05.687

试试这个它对我有用。

运行 -> 运行配置 -> 目标 -> 网络延迟 -> EDGE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:33:46.877

尝试以下一种：

杀死 adb : kill-adb server

比启动 adb : start-adb server

比输入以下命令：C:\ProgramFiles\Android\android-sdk\platform-tools\emulator -avd -dns-server 8.8.8.8

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T07:17:45.990

尝试这个：

运行 -> 运行配置 -> 选择目标选项卡 -> 选择您的目标仿真器设备，然后在**附加仿真器命令行选项**字段中键入**-dns-server xxxx**（xxxx 是您的 DNS 服务器的 IP 地址）。重新启动模拟器并玩得开心:-)

# javascript - Regex split by word or tag

> ID：12706622
> 
> 赞同：2
> 
> 时间：2012-10-03T10:30:25.400
> 
> 标签：javascript, regex

How can I use regular expressions in Javascript in order to split a text by words (utf8) or tags? For example, given the following:

```
Lorem ipsum dolor <b>sid</b> amet et <a href="asdasd">amet et</a> fugit 
```

I'd like to have it splitted like this:

```
Lorem 
ipsum 
dolor 
<b>
sid
</b> 
amet 
et 
<a href="asdasd">
amet
et
</a>
fugit 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:34:36.550

use this regex `<.+?>|\S+(?=<)|\S+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:36:54.897

This should do it:

```
myString.match(/<[^>]*>|[^\s<]+/g) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:36:01.780

Looks like this

```
(?s)(?:<.+?>)|(?:\S+) 
```

You will get a list of matches.

Edited:

```
(?s)(?:<.+?>)|(?:\S+(?=<))|(?:\S+) 
```

# c# - 使用 AutoMapper 的默认映射

> ID：12706623
> 
> 赞同：3
> 
> 时间：2012-10-03T10:30:27.587
> 
> 标签：c#, automapper

我`AutoMapper`用来映射一组`Models`to `ViewModels`。一切正常，但我必须为我创建的每个模型/视图模型一遍又一遍地做一件事。我必须将某个属性从（例如）映射`String`到`Int`.

所以我的映射现在看起来像这样：

```
Mapper.CreateMap<ModelOne, ModelOneViewModel>()
    .ForMember (d => d.SomeProperty, opt => opt.ResolveUsing(t => Convert.ToString(t.SomeProperty)));

Mapper.CreateMap<ModelOneViewModel, ModelOne>()
    .ForMember (d => d.SomeProperty, opt => opt.ResolveUsing(t => Convert.ToInt32(t.SomeProperty)));

Mapper.CreateMap<ModelTwo, ModelTwoViewModel>()
    .ForMember (d => d.SomeProperty, opt => opt.ResolveUsing(t => Convert.ToString(t.SomeProperty)));

// ... etc 
```

有没有办法告诉 automapper当它从我的班级映射到我的班级时，它应该始终映射`SomeProperty`到 a ？`String``Models``ViewModels`

反之亦然，那么是否可以告诉 automapper 始终将属性映射`SomeProperty`回`Int32`当它从`ViewModels`back 映射到时`Models`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:38:33.987

根据您的评论请求，[自定义类型转换器](http://docs.automapper.org/en/stable/Custom-type-converters.html)可能会在您的情况下派上用场。

我现在没有任何额外的信息，好在提到的文章看起来很好地解释了事情。

# database - 从报告创建标签

> ID：12706627
> 
> 赞同：1
> 
> 时间：2012-10-03T10:30:43.763
> 
> 标签：database, ms-access, report

我正在使用这种编码 -

=Trim([Customer Order ref] & [Description] & [Product Code] & [Quantity] & [Order No] & [Delivery Date])

它有效，并为我提供了我需要的所有信息，但是我无法在给定的细节之间找到空格……知道如何获得空格吗？

在此先感谢多米尼克布伦南

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:35:00.293

只需包括它们：

```
=Trim([Customer Order ref] & " " & [Description] ... 
```

# ruby-on-rails - 在 ruby on rails 中将表单渲染到不同文件夹中的两个部分？

> ID：12706628
> 
> 赞同：1
> 
> 时间：2012-10-03T10:30:51.797
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个`_form`部分`surv_rdsap_xrefs`控制器。

我想保留从两个不同文件夹中渲染的`error`方法。一个是，另一个是。`form``fields``condtion/rdsap_xrefs/_surv_rdsap_xrefs``section/condition/_question`

## _形式：

```
<%= form_for(@enr_rds_surv_rdsap_xref) do |f| %>
        <% if @enr_rds_surv_rdsap_xref.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@enr_rds_surv_rdsap_xref.errors.count, "error") %>:</h2>
            <ul>
              <% @enr_rds_surv_rdsap_xref.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
              <% end %>
            </ul>
          </div>
        <% end %>

        <div class="left">
          <%= render 'section/condition/_question' %>
        </div>

        <div class="right">
          <%= render 'condition/rdsap_xref/surv_rdsap_xref' %>
        </div>
      <% end %> 
```

现在，我得到了部分中未定义方法的错误`f`。如何将这两个部分用于相同的形式。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:38:33.560

尝试这个

```
<div class="left">
      <%= render 'section/condition/_question', f: f %>
    </div>

    <div class="right">
      <%= render 'condition/rdsap_xref/surv_rdsap_xref', f: f %>
    </div>
<% end %> 
```

与部分一样，必须有一个变量`f`，您必须为其分配一些值。这就是为什么我将`f`of分配给`form_for`部分变量`f`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:48:07.000

对于您的错误，您必须通过局部变量 f 以便

写这个，对于**部分/条件/_question**

```
<%= render 'section/condition/_question', f: f %> 
```

对于**条件/rdsap_xref/surv_rdsap_xref**这个

```
<%= render 'condition/rdsap_xref/surv_rdsap_xref', f: f %> 
```

# c++ - X11，更改分辨率并使窗口全屏

> ID：12706631
> 
> 赞同：3
> 
> 时间：2012-10-03T10:30:56.493
> 
> 标签：c++, linux, fullscreen, x11, xlib

我用这个把头发拉出来。

我正在使用以下程序以编程方式更改屏幕的分辨率：

```
int FindBestVideoMode(int screen, unsigned int &width, unsigned int &height)
{
    int modeCount;
    XF86VidModeModeInfo** modes;

    if (XF86VidModeGetAllModeLines(display, screen, &modeCount, &modes))
    {
        int bestMode  = -1;
        int bestMatch = INT_MAX;
        for(int i = 0; i < modeCount; i ++)
        {
            int match = (width  - modes[i]->hdisplay) *
                        (width  - modes[i]->hdisplay) +
                        (height - modes[i]->vdisplay) *
                        (height - modes[i]->vdisplay);

            if(match < bestMatch)
            {
                bestMatch = match;
                bestMode  = i;
            }
        }

        width  = modes[bestMode]->hdisplay;
        height = modes[bestMode]->vdisplay;

        XFree(modes);

        return bestMode;
    }

    return -1;
}

void SwitchVideoMode(int screen, int mode)
{
    if (mode >= 0)
    {
        int modeCount;
        XF86VidModeModeInfo** modes;

        if (XF86VidModeGetAllModeLines(display, screen, &modeCount, &modes))
        {
            if (mode < modeCount)
            {
                XF86VidModeSwitchToMode(display, screen, modes[mode]);
                XF86VidModeSetViewPort(display, screen, 0, 0);

                XFlush(display);
            }

            XFree(modes);
        }
    }
}

void SwitchToBestVideoMode(int screen, unsigned int &width, unsigned int &height)
{
    SwitchVideoMode(screen, FindBestVideoMode(screen, width, height));
}

void RestoreVideoMode(int screen)
{
    auto iVideoMode = DefaultVideoModes.Find(screen);
    if (iVideoMode != nullptr)
    {
        XF86VidModeSwitchToMode(display, screen, &iVideoMode->value);
        XF86VidModeSetViewPort(display, screen, 0, 0);

        XFlush(display);
    }
} 
```

这工作正常。然后我将窗口置于全屏模式，如下所示：

```
XEvent e;
e.xclient.type         = ClientMessage;
e.xclient.window       = window;
e.xclient.message_type = _NET_WM_STATE;
e.xclient.format = 32;
e.xclient.data.l[0] = 2;    // _NET_WM_STATE_TOGGLE
e.xclient.data.l[1] = XInternAtom(display, "_NET_WM_STATE_FULLSCREEN", True);
e.xclient.data.l[2] = 0;    // no second property to toggle
e.xclient.data.l[3] = 1;
e.xclient.data.l[4] = 0;

XSendEvent(display, DefaultRootWindow(display), False, SubstructureRedirectMask | SubstructureNotifyMask, &e);
XMoveResizeWindow(display, window, 0, 0, width, height); 
```

现在的问题是，在进行编程分辨率更改时，窗口的大小是桌面分辨率，而不是新的分辨率设置。我所期待的，实际上是我所追求的，是将窗口的大小调整为新分辨率的大小。

我希望我只是在这里误解了一些简单的东西，但是对此的任何想法都非常感谢。我不想在这里使用外部库，比如 SDL。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T13:30:06.957

您遇到的问题是，您依靠窗口管理器来正确放置窗口。不幸的是，并非所有 WM 都关心 XF86VidMode 或 RandR。在视频模式更改后创建全屏窗口的规范解决方案是将窗口创建为无边框并“覆盖重定向”，这样它就不会由 WM 管理，然后显式定位它以覆盖从 (0, 0) 到 (vidmode 宽度，vidmode 高度)。

# sml - 如何定义我自己的 mymod 函数？

> ID：12706636
> 
> 赞同：0
> 
> 时间：2012-10-03T10:31:16.407
> 
> 标签：sml, smlnj

我正在尝试定义我自己的 mymod 函数，其中 mod 通常是 3 mod 2 =1 函数。我不知道从哪里开始。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T14:46:40.570

由于您不知道从哪里开始，这里有一些提示：

1)`mymod`应该是一个中缀函数。正确的语法是

```
infix mymod;
fun x mymod y = ... 
```

2) 您应该了解如何`mymod`使用`-`,`*`和来实现`\`。我建议您在编写函数之前手动尝试一些示例。

3) 由你来处理*除以零的*情况。

# sql - SQL对两个表使用Between

> ID：12706638
> 
> 赞同：1
> 
> 时间：2012-10-03T10:31:17.563
> 
> 标签：sql, db2, between

嗨，我想根据位于另一个表的两列之间的值从表中获取数据，下面的 SQL 应该解释我的目的：

```
SELECT * FROM TABLE 1 WHERE 1.FIELD1 BETWEEN 
(SELECT 2.RANGE_FROM FROM TABLE 2) AND (SELECT 2.RANGE_TO FROM TABLE 2) 
```

这不起作用，因为我收到错误：

```
Error: SQL0811N  The result of a scalar fullselect, SELECT INTO statement, or VALUES INTO statement is more than one row.  SQLSTATE=21000
 (State:21000, Native Code: FFFFFCD5) 
```

这很明显，因为两个子查询都返回多行。所以我想编写一个 SQL 来执行上述功能而不会出错。该平台是`IBM DB2`.

**编辑**：

好的，我想我通过使用条件加入 2 个表来解决这个问题：

```
SELECT * FROM TABLE1 A, TABLE2 B WHERE A.FIELD1 BETWEEN B.RANGE_FROM AND B.RANGE_TO 
```

不过还需要更多的测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:45:26.543

我怀疑您想检查 table1 列值是否在 table2 的（某行）的 2 列之间：

```
SELECT a.* 
FROM TABLE1 AS a 
WHERE EXISTS 
      ( SELECT 1
        FROM TABLE2 AS b 
        WHERE a.FIELD1 BETWEEN b.RANGE_FROM AND b.RANGE_TO
      ) ; 
```

这样，您将没有来自 的重复项`table1`，因此不需要`DISTINCT`.

还要注意条件：

```
a.FIELD1 BETWEEN b.RANGE_FROM AND b.RANGE_TO 
```

相当于：

```
b.RANGE_FROM <= a.FIELD1  AND  a.FIELD1 <= b.RANGE_TO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:39:13.903

between 子句中使用的值应该是标量值。由于您的子查询返回多行，因此查询失败。尝试优化您的子查询以仅返回一个结果。为此，首先确定 table2 中的 range_from 和 range_to 的值应该介于两者之间。尝试 range_from 的 min 和 range_to 的 max，或者根据您的要求在子查询中应用 where caluse。

# haskell - 将 monad 用于诸如列表操作之类的琐碎任务？

> ID：12706640
> 
> 赞同：7
> 
> 时间：2012-10-03T10:31:31.023
> 
> 标签：haskell, monads

每当我阅读 Monad 示例时，他们总是将 IO 作为案例研究。

有没有人可以提出的单子进行列表操作的例子？我认为这可能有点矫枉过正，但如果 monad 能够比常规列表操作技术更具优势，我很感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:41:54.007

Haskell 中 list monad 的一大秘密是，列表推导是*do 块的语法糖*。任何时候你写一个列表推导式，你都可以用一个 do 块来代替它，它使用 list monad 实例。

## 一个简单的例子

假设您要获取两个列表，并返回它们的笛卡尔积（即第一个列表和第二个列表`(x,y)`的每个组合的列表）。`x``y`

您可以通过列表理解来做到这一点：

```
ghci> [(x,y) | x <- [1,2], y <- [3,4]] -- [(1,3),(1,4),(2,3),(2,4)] 
```

列表理解是这个 do 块的语法糖：

```
zs = do x <- [1,2]
        y <- [3,4]
        return (x,y) 
```

这反过来又是语法糖

```
zs = [1,2] >>= \x -> [3,4] >>= \y -> return (x,y) 
```

## 一个更复杂的例子

但是，该示例并没有真正展示 monad 的强大功能，因为您可以轻松编写它，而无需依赖列表具有 Monad 实例的事实。例如，如果我们只使用 Applicative 实例：

```
ghci> import Control.Applicative
ghci> (,) <$> [1,2] <*> [3,4] -- [(1,3),(1,4),(2,3),(2,4)] 
```

现在假设您获取正整数列表中的每个元素，并将其复制多次（例如`f [1,2,3] = [1,2,2,3,3,3]`，例如）。谁知道你为什么要这样做，但这很容易：

```
ghci> let f xs = [ y | x <- xs, y <- replicate x x ]
ghci> f [1,2,3] -- [1,2,2,3,3,3] 
```

这只是语法糖：

```
f xs = do x <- xs
          y <- replicate x x
          return y 
```

这反过来又是语法糖

```
f xs = xs >>= \x -> replicate x x >>= \y -> return y 
```

这次我们*不能*只使用应用程序实例来编写它。关键区别在于我们从第一个绑定 ( `x`) 中获取输出，并使块的其余部分依赖于它 ( `y <- replicate x x`)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-03T16:54:17.177

使用 list monad 巧妙地编写“简单”列表实用函数的经典示例是：

```
import Control.Monad (filterM)

-- | Compute all subsets of the elements of a list.
powerSet :: [a] -> [[a]]
powerSet = filterM (\x -> [True, False]) 
```

的类型`filterM`是`Monad m => (a -> m Bool) -> [a] -> m [a]`。在 list monad 的上下文中，这是一个*非确定性列表过滤器*：一个过滤器操作，它采用一个返回*替代*答案列表的*非确定性*谓词。的结果又是替代可能结果的列表。*`filterM`*

 *或者用更简单的语言，`filterM (\x -> [True, False])`意味着：对于列表的每个元素，我都希望保留它并丢弃它。 `filterM`找出对每个列表元素执行此操作的所有可能组合。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-03T15:51:20.153

这是为给定整数查找除数对的一种非常愚蠢的方法：

```
divisors:: Int -> [(Int,Int)]
divisors n = do
  x <- [1 .. n]
  y <- [1 .. n]
  if x*y == n then return (x, y) else [] 
```

这个片段的意思应该是相当直截了当的。显然，这是解决这个特定问题的愚蠢方法。（在这种情况下可能有更有效的方法。）但是现在想象一些更复杂的问题，其中这个搜索非常复杂。这种用于搜索的成语可能非常有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-04T00:09:17.273

另一个例子是从它的素数分解构造一个数字的所有除数（尽管是无序的）：

```
divs n = map product 
           . mapM (\(p,n)-> map (p^) [0..n]) 
           . primeFactorization $ n

-- mapM f = sequence . map f

-- primeFactorization 12  ==>  [(2,2),(3,1)]  -- 12 == 2^2 * 3^1 
```

函数`f`in`mapM f == sequence . map f`为输入列表中的每个条目生成一个因子的幂列表；然后`sequence`形成通过列表的所有路径，一次从每个列表中选择一个数字；然后将所有可能组合的列表提供给`map product`它计算除数：

```
12                                      -- primeFactorization:
[(2,2),(3,1)]                           -- map (\(p,n)-> ...):
[ [1,2,4], [1,3] ]                      -- sequence:
[[1,1],[1,3],[2,1],[2,3],[4,1],[4,3]]   -- map product:
[1,3,2,6,4,12]                          --   the divisors of 12 
```

[Luis Casillas 的回答](https://stackoverflow.com/a/12713201/849891)中给出的精彩描述也适用于这里：

> 在 list monad 的上下文中，`mapM :: (Monad m) => (a -> m b) -> [a] -> m [b]`是一个*nondeterministic list map*：映射一个*非确定性*函数的映射操作 - 这样产生一个*替代*结果的列表 - 在一个列表上，创建所有替代的可能结果列表。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T12:41:21.477

列表操作的一个很好的例子是查询 HTML/XML 文档，*例如*jQuery。jQuery 是一个[单子](http://en.wikipedia.org/wiki/Monad_%28functional_programming%29)。让我们看一个例子：

```
$(doc).find('> body')
      .find('> *')
      .is('table')
      .is('.bar')
      .find('> caption')
      .text() 
```

这为您提供了所有具有 CSS 类的顶级表的标题`bar`。这是使用 jQuery 的一种不同寻常的方式（通常您只需这样做`body > table.bar > caption`），但那是因为我想展示这些步骤。

在`xml-conduit`你做同样的事情：

```
child cursor >>= element "body" >>= child
        >>= element "table" >=> attributeIs "class" "bar"
        >>= child >>= element "caption"
        >>= descendants >>= content 
```

list monad 所做的是结合这些步骤。monad 本身对 HTML/XML 一无所知。

在`HXT`您以几乎相同的方式进行操作。较新`HXT`的版本使用所谓的箭头而不是单子，但基本原理是相同的。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-07T20:42:45.153

[`guard`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Control-Monad.html#v%3aguard)当与of`MonadPlus`或者另一个 monad结合使用时，Monad 和列表操作会更加有趣。举个例子，让我们解决经典的[口头算术](https://en.wikipedia.org/wiki/Verbal_arithmetic)难题：`SEND + MORE = MONEY`. 每个字母必须代表一个唯一的数字，并且前导数字不能为零。

为此，我们将从`StateT`and构造一个 monad 堆栈`[]`：

```
import Control.Monad
import Control.Monad.List
import Control.Monad.State

-- Verbal Arithmetic monad
type VA a = StateT [Int] [] a 
```

单子列表允许我们分支计算以搜索所有可能的方式，状态是可供选择的数字列表。我们可以通过给它所有可能的数字来运行这个 monad：

```
runVA :: VA a -> [a]
runVA k = evalStateT k [0..9] 
```

我们需要一个辅助函数，它通过选择所有可用的数字来分支计算，并用剩余的数字更新状态：

```
pick :: VA Int
pick = do
    -- Get available digits:
    digits <- get
    -- Pick one and update the state with what's left.
    (d, ds) <- lift $ split digits
    put ds
    -- Return the picked one.
    return d
  where
    -- List all possible ways how to remove an element from a list.
    split :: [a] -> [(a, [a])]
    split = split' []
    split' _ []      = []
    split' ls (x:rs) = (x, ls ++ rs) : split' (x : ls) rs 
```

此外，我们经常需要选择一个非零数字：

```
pickNZ :: VA Int
pickNZ = do
    d <- pick
    guard (d /= 0)
    return d 
```

现在解决这个难题很容易：我们可以简单地逐位实现加法，并检查`guard`结果的位数是否等于总和：

```
--   SEND
-- + MORE
-- ------
--  MONEY
money :: [(Int,Int,Int)]
money = runVA $ do
    d <- pick
    e <- pick
    let (d1, r1) = (d + e) `divMod` 10
    y <- pick
    guard $ y == r1
    n <- pick
    r <- pick
    let (d2, r2) = (n + r + d1) `divMod` 10
    guard $ e == r2
    o <- pick
    let (d3, r3) = (e + o + d2) `divMod` 10
    guard $ n == r3
    s <- pickNZ
    m <- pickNZ -- Actually M must be 1, but let's pretend we don't know it.
    let (d4, r4) = (s + m + d3) `divMod` 10
    guard $ r4 == o
    guard $ d4 == m
    return (ds [s,e,n,d], ds [m,o,r,e], ds [m,o,n,e,y])
  where
    -- Convert a list of digits into a number.
    ds = foldl (\x y -> x * 10 + y) 0 
```

这个谜题只有一个结果：`(9567,1085,10652)`。（当然代码可以进一步优化，但我希望它是简单的。）

[更多谜题可以在这里找到：http: [//www.primepuzzle.com/leeslatest/alphameticpuzzles.html](http://www.primepuzzle.com/leeslatest/alphameticpuzzles.html)]。*

# java - Java 未按预期输出到终端（出现新行）

> ID：12706642
> 
> 赞同：1
> 
> 时间：2012-10-03T10:31:36.890
> 
> 标签：java, bluej

我的代码如下。我期待它吐出类似的东西：

> SN=12345678 EX= 73 CW= 73 标记 = 73.0
> 
> SN=87654321 EX= 50 CW= 70 标记 = 60.0

但我得到：

> .
> 
> .
> 
> .
> 
> SN=12345678 EX= 73 CW= 73 标记 = 73.0
> 
> .
> 
> .
> 
> SN=87654321 EX= 50 CW= 70 标记 = 60.0

（带有大量额外的换行符（由句点显示））

我真的不知道这些是从哪里来的。

请指出我正确的方向！

```
class Main
{
    public static void main( String args[] )
    { 
        int sN = 1;
        int cwMark;
        int exMark;
        double Mark;
        while ( sN != 0 )
        {
            sN = CIO.getInt();
            cwMark = CIO.getInt();
            exMark = CIO.getInt();
            Mark = ((double)(exMark + cwMark)/2);
            System.out.print("SN=");
            System.out.print( (int) sN );
            System.out.print(" EX=  ");
            System.out.print( (int) exMark );
            System.out.print(" CW=  ");
            System.out.print( (int) cwMark );
            System.out.print(" Mark =  ");
            System.out.print(Mark);
        }
    }
} 
```

getInt 定义为：

```
public static int getInt()
  {
    String res = getLine();                          
    int value = 0;                                 
    try
    {
      value = Integer.parseInt( res.trim() );
    }
    catch ( NumberFormatException ex ) 
    {                                                 
    }
    return value;                                   
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:37:48.423

我不确定是什么`CIO`。你到底从哪里得到输入？我可以推测您正在从控制台获取整数，这将解释您所看到的：您正在从控制台获取输入，并打印到同一个控制台。要输入一个整数，必须有人在某处打一个换行符，并且该换行符被回显到控制台。

我可能在抽烟，但我认为这与`CIO`.

**编辑**：当您确认 CIO 与控制台交互时，现在很清楚了。当您调用 时`getInt`，您最终会解析*除*换行符之外的输入。由于控制台被定义为回显它所获得的每个击键，因此必须在某处输出换行符（既用作输入分隔符*又*用作换行符/换行符）……这正是您在您的计算机中看到换行符的原因输出。

例如，如果您在`getInt`某处添加另一个，您将在输出中看到 4 个换行符，而不是 3 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:36:37.867

您发布的代码根本不会产生任何新行（甚至在单独的值集之间也不会）。你是如何运行代码的？您确定您发布的代码与正在执行的版本相同吗？

另外，有几点：

*   您不需要强制转换`sN`和整数`exMark`，`cwMark`它们已经被声明为这样。
*   您应该将`Mark`变量的名称更改为`mark`- 以大写字母开头的名称通常仅用于类和接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:37:12.753

不确定 CIO 是什么（一些标准输入？），但它是负责任的：

```
sN = CIO.getInt();
cwMark = CIO.getInt();
exMark = CIO.getInt(); 
```

# javascript - Chrome 扩展：browserAction.onClicked.addListener() 未被调用

> ID：12706649
> 
> 赞同：3
> 
> 时间：2012-10-03T10:32:06.700
> 
> 标签：javascript, google-chrome-extension

我正在尝试编写一个非常简单的 Chrome 扩展程序。此时只有一个弹出的 html 文件，当点击浏览器操作图标时，它会尝试显示警报。我显然做错了什么，因为警报没有触发。

清单.json

```
{
  "name": "Simple",
  "description": "Simple",
  "version": "1.0",
  "browser_action": {
    "default_title": "Simple",
    "default_icon": "images/icon.png",
    "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

popup.html

```
<html>
<head>
    <script>
        //Executed when the extension's icon is clicked
        chrome.browserAction.onClicked.addListener(function(tab) 
        { 
            alert("gah");
        });
    </script>
</head>

<body>
    Hello World!
</body>
</html> 
```

我也试过：

```
<html>
<head>
    <script>

        function onPageLoad()
        {
            //Executed when the extension's icon is clicked
            chrome.browserAction.onClicked.addListener(function(tab) 
            { 
                alert("gah");
            });
        }

    </script>
</head>

<body onload="onPageLoad()">
    Hello World!
</body>
</html> 
```

**基于响应的更新** 感谢您的响应。我进行了以下更改，但仍未被调用 browser.Action.onClicked() （您可以看到，我正在使用 console.log() 而不是警报。（显示全局范围的日志，内部的日志）回调不是）。

清单.json

```
{
  "name": "Simple",
  "description": "Simple",
  "version": "1.0",
  "permissions": ["tabs", "http://*/*", "https://*/*"],
  "background": {
    "persistent": false,
    "scripts": ["popup.js"]
  }, 
  "browser_action": {
    "default_title": "Simple",
    "default_icon": "images/icon.png",
    "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

popup.html

```
<html>
<head>
    <script type="text/javascript" src="popup.js"></script>
</head>

<body>
    <div style="white-space: nowrap">
        Hello World!
    </div>
</body>
</html> 
```

popup.js

```
console.log("Running at global scope")

//Executed when the extension's icon is clicked
chrome.browserAction.onClicked.addListener(function(tab) 
{ 
    console.log("Running insode of addListener()");
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T11:53:44.320

`chrome.browserAction.onClicked`不能在弹出窗口中使用。这没有多大意义——你开始监听浏览器操作图标在被点击后被点击。可以再次单击它，但随后弹出窗口将关闭，并且侦听器将在发生任何事情之前终止。 `chrome.browserAction.onClicked`应该在后台页面上使用，并且仅在不使用浏览器操作的弹出窗口时使用：

> 如果浏览器操作有弹出窗口，则不会触发此事件。

[来源](http://developer.chrome.com/extensions/browserAction.html#event-onClicked)

您可能应该只写：

```
<script>
        alert("gah");
</script> 
```

但我不确定警报是否在弹出窗口中起作用。最好尝试类似的东西：

```
<script>
        document.getElementsByTagName('body')[0].innerHTML = "gah";
</script> 
```

**编辑**

在您的扩展程序中还有一件事需要修复。正如@Cody 在他的回答中所建议的那样，您不应该使用内联脚本。出于安全原因，它被阻止。将我上面建议的代码放入一个单独的 javascript 文件中，然后将其包含在`popup.html`head 中：

```
<script src='script.js' type='text/javascript'></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:58:37.333

根据修订后的 Chrome 安全策略，Chrome 扩展程序将不再能够在您的 popup.html [http://developer.chrome.com/extensions/contentSecurityPolicy.html#jsexecution中使用内联 javascript](http://developer.chrome.com/extensions/contentSecurityPolicy.html#jsexecution)

您必须创建一个 JS 文件并在 Manifest.json 中说明它的存在，如下所示：

**清单.json**

```
{
  "name": "Simple",
  "description": "Simple",
  "version": "1.0",
  "background": {    
    "scripts": ["bg.js"] //Here you can name the JS file that you have created
  },
  "browser_action": {
    "default_title": "Simple",
    "default_icon": "images/icon.png",
    "default_popup": "popup.html"
  },
  "manifest_version": 2
} 
```

**popup.html**

```
<html>
<head>
    <script>
        //Executed when the extension's icon is clicked         
            alert("gah");
    </script>
</head>

<body>
    Hello World!
</body>
</html> 
```

您可以在 Manifest 版本 2 之后开始构建 Chrome 扩展，参考[http://developer.chrome.com/extensions/overview.html](http://developer.chrome.com/extensions/overview.html)和[http://developer.chrome.com/extensions/getstarted.html](http://developer.chrome.com/extensions/getstarted.html)

# c# - 后台工作人员在 WPF 中无法正常工作

> ID：12706651
> 
> 赞同：0
> 
> 时间：2012-10-03T10:32:20.203
> 
> 标签：c#, .net, wpf, desktop

我想在数据网格中显示临时文件，因此这是我在 C# .net WPF 应用程序中使用后台工作人员的长期过程。

我的代码是

```
 private System.ComponentModel.BackgroundWorker _background = new System.ComponentModel.BackgroundWorker();

   private void button1_Click(object sender, RoutedEventArgs e)
        {
          _background.RunWorkerAsync();
        }

    public MainWindow()
       {
           InitializeComponent();
           this._background.DoWork += new DoWorkEventHandler(_background_DoWork);
           this._background.RunWorkerCompleted += new       
           RunWorkerCompletedEventHandler(_background_RunWorkerCompleted);
           this._background.WorkerReportsProgress = true;
           _background.WorkerSupportsCancellation = true;

       }

void _background_DoWork(object sender, DoWorkEventArgs e)

{

this.Dispatcher.Invoke((Action)(() =>
    {
        try
        {
            FileInfo[] files = new   
            DirectoryInfo(System.IO.Path.GetTempPath()).GetFiles();

            foreach (FileInfo fi in files)
            {
                if (fi != null)              
                 {                 
                    dataGrid1.Items.Add(fi);           

                }
            }           
        }
        catch { }
    }));
}

void _background_RunWorkerCompleted(object sen, RunWorkerCompletedEventArgs e)
      {

          if (e.Cancelled)
          {
             MessageBox.Show("Cancelled");
          }
          else if (e.Error != null)
          {
               MessageBox.Show("Exception Thrown");
          }

     } 
```

所有代码都在运行，但在加载数据网格时挂起，这意味着我的 UI 在程序运行时没有响应。

在上述情况下，需要什么修改才能顺利运行后台工作者？

除此之外，如果我想添加一个与此应用程序一起进行的 ProgressBar，那么我必须做什么？

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:52:52.200

通过使用`this.Dispatcher.Invoke`，您可以有效地将工作编组回 UI 线程。这是没有意义的：在执行此操作时，您正在阻塞 UI 线程。

将工作分为两部分：

*   缓慢的部分，正在检索文件，应该在外部完成`Dispatcher.Invoke`
*   UI 更新，必须在事件处理程序`Dispatcher.Invoke`中或（更好）中完成。`RunWorkerCompleted`

后台工作组件是完全制作的，因此您无需使用调度程序手动调度 UI 工作。例如，您可以将文件存储在您填写`DoWork`方法的字段中，并用于在`RunWorkerCompleted`事件中填充数据网格：

```
FileInfo[] files;

void _background_DoWork(object sender, DoWorkEventArgs e)
{
    files = new DirectoryInfo(System.IO.Path.GetTempPath()).GetFiles();
}

void _background_RunWorkerCompleted(object sen, RunWorkerCompletedEventArgs e)
{
    if (e.Cancelled)
    {
        MessageBox.Show("Cancelled");
    }
    else if (e.Error != null)
    {
        MessageBox.Show("Exception Thrown");
    }
    else 
    { 
         foreach (FileInfo fi in files)
         {
              dataGrid1.Items.Add(fi);           
         }
    }
} 
```

注意：如果您使用的是 C# 5，您现在有一个更简单的方法，即使用该`async/await`功能。所有你需要的是这样的：

```
 private async void button1_Click(object sender, EventArgs e)
    {
        button1.Enabled = false;
        try
        {
            var files = await Task.Run(() => 
                new DirectoryInfo(System.IO.Path.GetTempPath()).GetFiles()
            );
            foreach (var f in files)
                this.dataGrid1.Items.Add(f.Name);
        }
        catch (Exception e)
        {
            MessageBox.Show("Exception thrown!"); // do proper error handling here...
        }
        finally
        {
            button1.Enabled = true;
        }
    } 
```

编译器会处理所有其余的琐事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:36:46.913

使用[DirectoryInfo.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd383574.aspx)。

这一行：

```
this.Dispatcher.Invoke 
```

`BackgroudWorker`在主线程同步执行代码，因此使用这种方式没有任何好处，因为`DirectoryInfo.GetFiles`只有在枚举目录中的所有文件时才返回。

另一方面`DirectoryInfo.EnumerateFiles`是懒惰。你可以这样写：

```
void _background_DoWork(object sender, DoWorkEventArgs e)
{
    var info = new DirectoryInfo(System.IO.Path.GetTempPath());

    // now enumeration happens in background
    foreach (var fi in info.EnumerateFiles())
    {
        // main thread in used only when there is next enumeration result available
        Dispatcher.Invoke((Action)(() => dataGrid1.Items.Add(fi)));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:41:13.563

尝试从 Dispatcher 中取消此操作：

```
FileInfo[] files = new DirectoryInfo(System.IO.Path.GetTempPath()).GetFiles(); 
```

它应该只执行涉及 UI 访问或修改的小而快的操作。请参阅此链接：http: [//msdn.microsoft.com/en-us/magazine/cc163328.aspx](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)

您的繁重工作可以由 BackgroundWorker 完成，并使用 Dispatcher 更新 dataGrid.Items 集合。

尝试使用 Dispatcher：

```
Dispatcher.BeginInvoke() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T14:28:28.823

您应该在 RunWorkerComplete 或 ProgressChanged 事件处理程序中更新 UI。

尝试这样的事情：

```
 public Program()
    {
        w = new BackgroundWorker();
        w.DoWork += new DoWorkEventHandler(w_DoWork);
        w.ProgressChanged += new ProgressChangedEventHandler(w_ProgressChanged);
        w.RunWorkerCompleted += new RunWorkerCompletedEventHandler(w_RunWorkerCompleted);
        w.WorkerReportsProgress = true;
        w.WorkerSupportsCancellation = true;

        w.RunWorkerAsync();
    }

    void w_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        FileInfo[] files = e.Result as FileInfo[];
        foreach (FileInfo fi in files)
        {
            //dataGrid1.Items.Add(fi);  
        }
    }

    void w_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        FileInfo fi = e.UserState as FileInfo;
        //dataGrid1.Items.Add(fi);  
    }

    void w_DoWork(object sender, DoWorkEventArgs e)
    {
        var w = sender as BackgroundWorker;

        FileInfo[] files = new DirectoryInfo(
            Path.GetTempPath()).GetFiles();

        // Using ProgressChanged
        foreach (FileInfo fi in files)
        {
            w.ReportProgress(0, fi);
        }

        // Using RunWorkerCompleted
        e.Result = files;
    } 
```

此外，dowork 中不需要 try/catch，异常会被自动捕获并在 runworkercomplete 事件中报告为错误。

# c - Xcode 4.5 - C 编程 - 内置控制台不允许两位数输入，但运行内置 exec 将

> ID：12706660
> 
> 赞同：0
> 
> 时间：2012-10-03T10:32:53.240
> 
> 标签：c, xcode

当我输入那个标题时，我越来越清楚它是令人困惑的。

好的，我正在使用 Xcode 为学校编写 C 程序。当我在 Xcode 中构建/运行它时，它不允许我输入两位整数作为输入，我不知道为什么。如果我运行存储在我的项目的“产品”文件夹中的构建可执行文件，它会在自己的终端实例中打开，并且会正确接受我的输入。为什么内置环境不允许这样做？（这就是它的技术名称吗？）

这是我正在谈论的代码的片段：

```
void getScores()
{
    int score1;
    int score2;
    int score3;
    char grade;
    printf("\nEnter three test scores 0-100 with a <space> in between then press enter :
    ");
    scanf("%d %d %d", &score1, &score2, &score3);
    grade = getGrade(score1, score2, score3);
    printResults(grade);
    return;
}//getScores 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T09:05:52.703

遇到了同样的问题。苹果似乎正在为此努力。在终端中
运行文件是运行程序的最简单方法。`exec`但是，可以在内置控制台中显示您的输入。您必须输入您的数字（仅显示第一个数字），然后在下拉菜单中选择另一个输出并再次选择“目标输出”。

希望它会尽快解决。

# text - AutoHotKey：即时文本替换

> ID：12706661
> 
> 赞同：8
> 
> 时间：2012-10-03T10:32:56.143
> 
> 标签：text, replace, autohotkey, instant

我的 AutoHotKey 脚本的一部分替换`@@`为我的电子邮件地址。目前，我这样做是这样的：

```
::@@::
SendInput, example@domain.com
return 
```

很简单，它工作得相当好，但你需要在替换之前推动空格/逗号/句点/等。有没有办法在没有任何进一步交互的情况下立即替换它 - 只要条件匹配，它就会被替换？

按照[AutoHotKey 文档](http://www.autohotkey.com/docs/commands/StringReplace.htm)，我尝试过：

```
StringReplace, var_Email, var_Email, @@, example@domain.com, All 
```

但它只是清除`@@`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-03T16:08:57.450

您正在寻找热字串中的 * 选项。此选项在没有额外密钥的情况下在检测到字符串时立即替换它。

```
:*:@@::example@domain.com 
```

将实现您正在寻找的东西。

选项的文档位于此处：[http ://www.autohotkey.com/docs/Hotstrings.htm](http://www.autohotkey.com/docs/Hotstrings.htm)

# ruby - 解释为局部变量会覆盖方法名称吗？

> ID：12706664
> 
> 赞同：5
> 
> 时间：2012-10-03T10:33:15.357
> 
> 标签：ruby, local-variables, self-reference

在[这个问题](https://stackoverflow.com/questions/8908050)中，当在其自己的赋值中使用未定义的局部变量时，它被评估为`nil`。

```
x = x # => nil 
```

但是当局部变量的名称与现有的方法名称冲突时，就比较棘手了。为什么下面的最后一个示例返回`nil`？

```
{}.instance_eval{a = keys} # => []
{}.instance_eval{keys = self.keys} # => []
{}.instance_eval{keys = keys} # => nil 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-03T12:31:33.527

在 Ruby 中，因为可以在没有显式接收者和括号的情况下调用方法，所以在局部变量引用和无接收者无参数方法调用之间存在语法歧义：

```
foo 
```

可能意味着“不带参数调用方法*”*`foo`或`self`“取消引用局部变量`foo`”。

如果`foo`范围内存在局部变量，则*始终*将其解释为局部变量取消引用，而*不是*方法调用。

那么，局部变量“在范围内”意味着什么？这是在*解析时在**语法*上确定的，*而不是*在运行时在语义上确定的。这个非常重要！局部变量是在解析时定义的：如果解析器看到对局部变量的赋值，则从那时起，局部变量就在范围内。但是，它仅在*运行时**初始化*，没有对代码进行编译时评估：

 ***```
if false
  foo = 42 # from this point on, the local variable foo is in scope
end

foo # evaluates to nil, since it is declared but not initialized 
```

为什么局部变量对“影子”方法有意义，而不是反过来？好吧，如果方法确实隐藏了局部变量，那么将不再有取消引用这些局部变量的方法。但是，如果局部变量隐藏方法，那么仍然有一种方法可以调用这些方法：请记住，歧义仅存在于无接收者无参数方法调用中，如果添加显式接收器或显式参数列表，您仍然可以调用该方法：

```
def bar; 'Hello from method' end; public :bar

bar # => 'Hello from method'

bar = 'You will never see this' if false

bar # => nil

bar = 'Hello from local variable'

bar      # => 'Hello from local variable'
bar()    # => 'Hello from method'
self.bar # => 'Hello from method' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:37:02.993

简短的回答是，因为 Matz 是这样定义的。这种行为是我不喜欢 Ruby 的少数几件事之一。它甚至变得更好：

```
a = b if a
=> nil
a
=> nil 
```

`a`即使理论上 a = b 语句在任何情况下都不应该被执行，变量也会被初始化为 nil。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-03T10:40:38.407

我认为在您的情况下，这是因为这是预期的：P

```
1.9.3-p194 :001 > {}.instance_eval{a=1}
 => 1 
1.9.3-p194 :002 > {}.instance_eval{a}     
NameError: undefined local variable or method `a' for {}:Hash
    from (irb):2:in `block in irb_binding'
    from (irb):2:in `instance_eval'
    from (irb):2
    from /Users/rafael/.rvm/rubies/ruby-1.9.3-p194/bin/irb:16:in `<main>' 
```

Instance eval 在实例级别评估代码，因此您声明的每个哈希都是不同的。如果您想返回密钥，则此方法有效

```
1.9.3-p194 :003 > {}.instance_eval{keys = self.keys
1.9.3-p194 :004?>   keys = keys}
 => [] 
```***

# objective-c - 折叠动画与滑动动画不对齐

> ID：12706666
> 
> 赞同：4
> 
> 时间：2012-10-03T10:33:21.320
> 
> 标签：objective-c, ios, core-animation

我正在尝试创建一个像这样的折叠菜单动画：http: [//vimeo.com/41495357](http://vimeo.com/41495357)

此时，当您在屏幕上拖动手指时，动画会起作用，但是当我尝试将菜单从打开到关闭或关闭到直接打开时，正在滑开的主视图与视图的右侧不对齐这正在展开。它们在动画结束时对齐，而不是在动画结束时对齐。此外，正在展开的视图边缘似乎在动画期间消失在视图边界之外。

层的实际展开是在 layoutSublayers 中完成的，因此当层的宽度发生变化时，会计算其子层上的变换。我在这个项目中找到了计算转换的数学：[https ://github.com/MassiveHealth/O​​paque](https://github.com/MassiveHealth/Opaque)

```
// Configure the layer bounds and midpoints
CGRect halfRect = CGRectMake(0, 0, self.fullWidth / 2, self.bounds.size.height);
self.rightImageLayer.bounds = halfRect;
self.leftImageLayer.bounds = halfRect;
CGPoint midPoint = CGPointMake(0.5 * self.bounds.size.width, 0.5 * self.bounds.size.height);
self.rightImageLayer.position = midPoint;
self.leftImageLayer.position = midPoint;

// Calculate transforms
CGFloat l = 0.5 * self.fullWidth;
CGFloat y = 0.5 * self.bounds.size.width;
CGFloat theta = acosf(y/l);
CGFloat z = l * sinf(theta);
CGFloat topAngle = theta * -1;
CGFloat bottomAngle = theta;

CATransform3D transform = CATransform3DMakeTranslation(0.0, 0.0, -z);
self.rightImageLayer.transform = CATransform3DRotate(transform, topAngle, 0.0, 1.0, 0.0);
self.leftImageLayer.transform = CATransform3DRotate(transform, bottomAngle, 0.0, 1.0, 0.0); 
```

这是负责启动展开动画的代码。（现在菜单展开到屏幕的整个宽度）

```
self.foldingLayer.frame = self.view.bounds;
self.slidingLayer.frame = CGRectMake(self.view.frame.size.width, 0, self.slidingLayer.frame.size.width, self.slidingLayer.frame.size.height); 
```

为什么这些动画不排队？也许数学不正确？我查看了来自[https://github.com/honcheng/PaperFold-for-iOS](https://github.com/honcheng/PaperFold-for-iOS)和[https://github.com/xyfeng/XYOrigami](https://github.com/xyfeng/XYOrigami)等项目的示例代码，但我无法弄清楚。

### 更新

根据 Till 的回答，我为滑动层创建了这个关键帧动画。动画仍然没有对齐，所以我的关键帧计算一定是错误的？

```
CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position.x"];

NSUInteger steps = 100;
CGFloat totalFoldViewWidth = self.view.bounds.size.width;
NSMutableArray *values = [NSMutableArray arrayWithCapacity:steps];

for(NSUInteger i = 0; i < steps; i++) {
    CGFloat fraction = (CGFloat)i / steps;
    CGFloat foldViewWidth = fraction * totalFoldViewWidth;
    CGFloat l = 0.5 * totalFoldViewWidth;
    CGFloat y = 0.5 * foldViewWidth;
    CGFloat angle = acosf(y/l);
    CGFloat projectionWidth = cosf(angle) * totalFoldViewWidth;
    [values addObject:[NSNumber numberWithFloat:projectionWidth]];
}
animation.calculationMode = kCAAnimationLinear;
[animation setValues:values];
[animation setDuration:3.0];

[self.slidingLayer addAnimation:animation forKey:@"slideAnimation"]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T16:01:53.653

我认为您是从错误的方向解决问题。您想从距离计算角度，反之亦然。如果要计算折叠动画每一侧的角度，请使用基本的勾股算术。显然，我们知道打开距离的大小，也知道斜边的大小（完全打开时视图大小的一半）。

在代码中：

```
CGFloat otherSide = 0.5 * openingWidth; // halve because we have two sides
CGFloat hypotenuse = 0.5 * unfoldedViewTotalWidth; // halve because we have to sides
CGFloat angle = asinf(otherSide / hypotenuse);
CGFloat rightAngle = -1 * (M_PI_2 - angle);
CGFloat leftAngle = M_PI_2 - angle; 
```

您可以使用这些角度来设置折叠视图左侧和右侧的旋转。

请注意将左侧的锚点设置为 (0.0, 0,5)，将右侧的锚点设置为 (1.0, 0.5)，并为右侧的平移设置动画！

希望这可以帮助！干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:19:11.740

这确实是你的数学问题。该视图的距离取决于*折叠*视图的投影宽度。根据角度，该宽度不是严格线性的；

`projectionWidth = cos(angle) * foldViewWidth`

换句话说，40 度的结果与 20 度完全不同，这种关系不是线性的，而是基于该角度的余弦。

因此线性动画是行不通的。*您需要根据折叠*视图的投影宽度创建帧动画，以匹配平移和旋转。

# latex - 可以将“抽象”参数传递给 pandoc 以创建乳胶文件吗？

> ID：12706668
> 
> 赞同：4
> 
> 时间：2012-10-03T10:33:28.633
> 
> 标签：latex, pandoc

类似于`$title$`,`$author$`和`$date$`, 是否有一个`$abstract$`参数可以从标题栏传递给乳胶文件？例子：

```
\begin{abstract}
    $abstract$
\end{abstract} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T22:47:13.300

`$`是的，这很好用（但不，除非您的摘要出于某种原因是在线数学，否则您不需要）

```
\begin{abstract}
    This paper proposes a new method of blah blah blah
\end{abstract 
```

大概使用某些 LaTeX 模板它不会工作，但 pandoc 足够聪明，可以让大多数 TeX 标记不受阻碍地通过。

# c# - 从 SQL Server 的表中选择数据时出错

> ID：12706669
> 
> 赞同：0
> 
> 时间：2012-10-03T10:33:31.073
> 
> 标签：c#, sql, sql-server, sql-server-2008

我使用此代码从 SQL Server 2008 中的表中进行选择：

```
sqlcomm.CommandText = "select [objId] from [tablename] where href = @href" 
```

`href`我表中的类型是`ntext`，我使用此代码选择：

```
 sqlcomm.Parameters.Add("@href", SqlDbType.NVarChar);
 sqlcomm.Parameters["@href"].Value = 'somestring';
 IDataReader reader = sqlcomm.ExecuteReader(); 
```

但它错误：

> *数据类型 ntext 和 varchar 在等于运算符中不兼容*

当我使用`SqlDbType.NText`它有同样的错误。我无法更改`href`表格中的列类型。当我使用`like @href`它时，它可以工作，但我不能使用`LIKE`，因为我想精确匹配。

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:34:53.953

错误就是它所说的。您不能将 NTEXT 列与 NVarchar 参数进行比较。

```
sqlcomm.CommandText="select [objId] from [tablename] where cast(href as nvarchar(max))=@href" 
```

[ntext、text 和 image (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms187993.aspx)已经被弃用了一段时间。尽快将它们转换为 n/varchar(max) 和 varbinary(max)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:39:17.097

您不能在 SQL 的 where 子句中使用 ntext 列。如果您无法更改现有的列类型 egCAST(href AS nvarchar(max))，我建议转换 SQL 语句中的列。

# php - 注意：未定义的变量

> ID：12706670
> 
> 赞同：0
> 
> 时间：2012-10-03T10:33:36.900
> 
> 标签：php, mysql, html, css

希望那里的每个人都很好:)

实际上我得到了未定义变量的多个错误，但代码似乎完全没问题。我在我的脚本中一次又一次地遇到这个问题，我真的受够了。它耽误了我的工作。

请检查代码并发送任何解决方案。任何形式的帮助将不胜感激。提前致谢

这是我的 *manage-learning-material.php代码*

```
<?php include("../includes/config.php"); ?>
<?php

if ($_SESSION["isteacher"])
{

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);
$courseid=$_GET["id"];
$result = mysql_query("SELECT * FROM courses WHERE (id='".$courseid."')");

while($row = mysql_fetch_array($result))
{
   $id=$row['id'];
   $title = $row['title'];
   $des = $row['description'];
   $subjectid = $row['subjectsid'];
}
mysql_close($con);
?>
<!DOCTYPE HTML>
<html>
<head>
<title>Manage Learning Material</title>
</head>
<body>
<h2 class="alt">COURSE VIEW </h2>
<?php
if (isset($_GET["status"]))
{
if($_GET["status"]==1)
{
?>
<div class="success">
<?php
echo("<strong>Material has been added in Course Successfully!</strong>");
?>
</div>
<?php
}

if($_GET["status"]==2)
{
?>
<div class="success">
<?php
echo("<strong>Learning Material has been Edited Successfully!</strong>");
?>
</div>
<?php
}
}
?>
<form id="form" method="post" action="manage-learning-material-action.php">
 <input type="hidden" value="<?php echo $courseid; ?>" name="id" />
 <label>Course Name:</label><input type="text" name="title" id="title" class="text" value="<?php    echo $title; ?>" /><br /><br />
<label>Choose Subject:</label>
<?php

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }

mysql_select_db($dbname, $con);

$result = mysql_query("SELECT * FROM subjects");

echo "<select name='subjectsid'>\n";
while($row = mysql_fetch_array($result))
{
echo "<option value='".$row['id'] . "'";
if ($subjectid==$row['id'])
echo 'selected="selected"';
echo " >" . $row['subjectname'] . "</option>\n";
}
echo "</select>\n";
mysql_close($con);
?>
<br /><br />
<label>Description:</label><br /><textarea name="description" id="description"><?php echo $des; ?  ></textarea><br /> <br />
</form>
</div>
</div>
<?php include("../includes/footer.php"); ?>
</div>
</body>

</html>
<?php
 }
 else
 {
    header("Location: ".$fullpath."login/unauthorized.php");

 }
?> 
```

*管理学习材料action.php*

```
<?php include("../includes/config.php");?>
<?php
$id=$_POST["id"];
$title=$_POST["title"];
$des=$_POST["description"];
$subjectid=$_POST["subjectsid"];

$con=mysql_connect($dbserver,$dbusername,$dbpassword);
if (!$con) { die('Could not connect: ' . mysql_error()); }
mysql_select_db("ombts", $con);
$query=("UPDATE courses SET title='".$title."', description='".$des."', subjectsid='".$subjectid."'      WHERE (id='".$id."')");
$result=mysql_query($query);
if($result){
echo header("Location:manage-courses.php?status=2");
}
mysql_close($con);
?> 
```

错误/警告是：

```
 Notice: Undefined index: id in C:\xampp\htdocs\project\teacher\manage-learning-material.php on   line 11

<br /><b>Notice</b>:  Undefined variable: title in <b>C:\xampp\htdocs\project\teacher\manage-learning-material.php</b> on line <b>86</b><br />
 <b>Notice</b>:  Undefined variable: subjectid in <b>C:\xampp\htdocs\project\teacher\manage-  learning-material.php</b> on line <b>102</b><br />
>Literature7</option>
<option value='3'<br />
<b>Notice</b>:  Undefined variable: subjectid in <b>C:\xampp\htdocs\project\teacher\manage-learning-  material.php</b> on line <b>102</b><br />
>Management</option>
<option value='7'<br />
<b>Notice</b>:  Undefined variable: subjectid in <b>C:\xampp\htdocs\project\teacher\manage-learning-  material.php</b> on line <b>102</b><br />
>Marketing</option>
<option value='5'<br />
<b>Notice</b>:  Undefined variable: subjectid in <b>C:\xampp\htdocs\project\teacher\manage-learning-   material.php</b> on line <b>102</b><br />
 >Science</option>
<option value='6'<br />
<b>Notice</b>:  Undefined variable: subjectid in <b>C:\xampp\htdocs\project\teacher\manage-learning-  material.php</b> on line <b>102</b><br />
>Science2</option>
<option value='4'<br />
<b>Notice</b>:  Undefined variable: subjectid in <b>C:\xampp\htdocs\project\teacher\manage-learning-  material.php</b> on line <b>102</b><br />

<b>Notice</b>:  Undefined variable: des in <b>C:\xampp\htdocs\project\teacher\manage-learning-   material.php</b> on line <b>110</b><br /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:37:52.363

你没有得到错误，你得到通知......在这种情况下，当 $title 尚未定义时，你正在回显 $title 的值...... PHP 仍然可以运行，但它让你知道这是你应该解决的问题......

代替

```
echo $title; 
```

利用

```
echo (isset($title)) ? $title : ''; 
```

或在尝试从数据库中读取之前为您被警告的这些变量定义默认值

并了解如何执行不会让您受到 SQL 注入攻击的数据库查询

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T00:38:22.557

如果数据库中的值为空，则字段将为空。看下一个代码：

```
$result = mysql_query("SELECT * FROM `courses` WHERE `id` = '".$courseid."'");
if(!$result||mysql_num_rows($result)<1){echo 'empty result';}
else{
while($row = mysql_fetch_array($result))
{
echo (isset($row['id'])&&!empty($row['id'])) ? $row['id'] : '';
echo'<br>';
echo (isset($row['title'])&&!empty($row['title'])) ? $row['title'] : '';
echo'<br>';
echo (isset($row['description'])&&!empty($row['description'])) ? $row['description'] : '';
echo'<br>';
echo (isset($row['subjectsid'])&&!empty($row['subjectsid'])) ? $row['subjectsid'] : '';
}
} 
```

测试这段代码并享受=）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T10:38:29.523

不知道从哪里开始你的代码......

您的变量在此处定义

```
while($row = mysql_fetch_array($result))
{
   $id=$row['id'];
   $title = $row['title'];
   $des = $row['description'];
   $subjectid = $row['subjectsid'];
} 
```

您需要先在 while 循环之外定义它们

```
$id = "";
$title = "";
$des = "";
$subjectid = "";

while ( $row = mysql_fetch_array($result) ) {
    // .. bala bla bla
} 
```

其次，以下行是错误的

```
<textarea name="description" id="description"><?php echo $des; ?  ></textarea><br /> <br /> 
```

它应该是

```
 <textarea name="description" id="description"><?php echo $des; ?></textarea><br /> <br /> 
```

最后

从 PHP 文档开始`mysql_***`

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-03T10:51:23.200

或这个：

```
if (isset($row['title'])&&!empty($row['title'])){$title=$row['title'];}else{$title='';}
<textarea name="description" id="description"><?php echo $title; ?></textarea> 
```

或者

```
<textarea name="description" id="description"><?php echo (isset($row['title'])&&!empty($row['title'])) ? $row['title'] : ''; ?></textarea> 
```

或者

```
<textarea name="description" id="description"><?php echo (isset($title)&&!empty($title)) ? $title : ''; ?></textarea> 
```

享受=）

# jquery - jquery函数未定义

> ID：12706672
> 
> 赞同：-5
> 
> 时间：2012-10-03T10:33:43.000
> 
> 标签：jquery

```
<html>
<head><script scr="http://code.jquery.com/jquery-1.8.2.min.js" ></script> </head>
<div id="cont1">
<select id="sel1" name="sel1" multiple>
<option value="First">First</option>
<option value="Second">Second</option>
<option value="Third">Third</option>
</select>
</div>
<script>
$(function() {
$('#sel1 option').on('click', function(e){
if($(this).is(':selected')){
$('<input value="'+$(this).val()+'" />').appendTo('#cont1');
}
});
});
</script>
<html>
</body>
<html> 
```

为什么这个功能不起作用？它给出了错误“未定义功能”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:36:40.673

正确的属性名称是`src`：

```
 v-------------- correct the attribute name
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script> 
```

您还应该检查您的标记，因为正确的标记必须包含`<body>`标记和正确放置的一对`<html></html>`标记。

此外，考虑使用[`change`](http://api.jquery.com/change/)event for `<select>`element 而不是`click`for `<option>`，因为它更“跨浏览器”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:40:26.770

你必须写 src，顺便说一句 $(document).ready(function() { 更好。

```
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js" ></script>
    <script>
    $(document).ready(function() {
        $('#sel1 option').on('click', function(e){
            if($(this).is(':selected')){
                $('<input value="'+$(this).val()+'" />').appendTo('#cont1');
            }
        });
    });
    </script>
</head>
<body>
    <div id="cont1">
        <select id="sel1" name="sel1" multiple>
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:43:22.490

提示：格式化代码永远不会受到伤害。

此外，请检查[HTML 参考](http://www.w3schools.com/tags/default.asp)以改进您的代码。**scr**，许多**正文**标签等

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script type="text/javascript">
    $(function() {
        $('#sel1 option').on('click', function(e){
            if ($(this).is(':selected')) {
                $('<input value="'+$(this).val()+'" />').appendTo('#cont1');
            }
        });
    });
    </script>
</head>
<body>
    <div id="cont1">
        <select id="sel1" name="sel1" multiple="multiple">
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </div>
</body>
</html> 
```

# wso2esb - 如何从 ServiceClient 客户端将文件导出到 wso2 ESB vfs 代理？

> ID：12706673
> 
> 赞同：0
> 
> 时间：2012-10-03T10:33:44.677
> 
> 标签：wso2esb

WSO2 ESB 可以通过 VFS 传输下载远程文件，但是客户端如何在没有 FTP 服务器或任何文件上传 WS API 的情况下将文件导出到 WSO2 ESB VFS 服务器？WSO2 ESB 是否支持 VFS 服务器？

如果我已经创建了一个 vfs 代理，我可以通过这个代理从 ServiceClient 客户端导出文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:53:44.733

我同意 Ratha 的说法，但您还需要启用 VFS 传输才能在 WSO2 ESB 下创建的代理服务中使用 VFS。

您可以通过转到WSO2 ESB 仪表板左侧的**配置菜单选项卡，选择****传输**并点击 VFS 传输下的 Lister 和 Sender 上的启用来做到这一点（取决于您将在代理中使用哪一个 - 虽然两者都启用是安全的） . 希望能帮助到你。

以下代理服务正在侦听*在SFTP 位置调用的文件夹，并在**复制*的文件夹中复制回 SFTP ：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="SFTPtry" transports="vfs" statistics="disable" trace="disable" startOnLoad="true">
 <target>
  <inSequence>
     <log level="full" />
     <property name="OUT_ONLY" value="true" />
     <send>
        <endpoint>
           <address uri="vfs:sftp://user:password@your.ftp.site.com:22/copied" />
        </endpoint>
     </send>
  </inSequence>
</target>
<parameter name="transport.PollInterval">10</parameter>
<parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
<parameter name="transport.vfs.FileURI">vfs:sftp://user:password@your.ftp.site.com:22/in</parameter>
<parameter name="transport.vfs.MoveAfterProcess">vfs:sftp://user:password@your.ftp.site.com:22/out</parameter>
<parameter name="transport.vfs.MoveAfterFailure">vfs:sftp://user:password@your.ftp.site.com:22/fail</parameter>
<parameter name="transport.vfs.FileNamePattern">.*.txt</parameter>
<parameter name="transport.vfs.ContentType">text/plain</parameter>
<parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
</proxy> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:46:49.767

使用 vfs 端点定义端点并发送消息..

编辑：你可以这样尝试；

```
 <proxy name="StockQuoteProxy" transports="vfs" startOnLoad="true">
        <target>
            <inSequence>
                <property name="OUT_ONLY" value="true"/>
                <send>
                    <endpoint>
                        <address uri="vfs:ftp://test@localhost/out?vfs.passive=true"/>
                    </endpoint>
                </send>
                <drop/>
            </inSequence>
        </target>
</proxy> 
```

# xcode - 核心数据关系

> ID：12706674
> 
> 赞同：1
> 
> 时间：2012-10-03T10:33:45.347
> 
> 标签：xcode, core-data, ios6

我正在为我的应用程序使用 Core Data，但我目前遇到了这个问题。

我的应用程序在 Core Data 模型 2 实体上运行良好

`UserDetails`和`SiteLocation`

![在此处输入图像描述](../Images/8c202b49e7466c95170c03dec9c8f506.png),

因此，我将数据提取到`UserDetails`并从用户“UserProject”添加到使用中`NSPredicate`创建，这工作正常。我得到了所有项目的列表。`SiteLocations``UITableView``fetchController`

现在我想将 UserDetails`postcode`属性添加到`SiteLocation`实体 - 对于 Attribute `sitePostCode`，我可以`Sitelocation`在地图上显示所有内容。

如何获取实体的第二个`postcode`属性`SiteLocation`？

```
@implementation SiteLocation (Create)

 +(SiteLocation *)siteLocationWithName:(NSString *)sitename inManagedObjectContext:(NSManagedObjectContext *)context
 {
 SiteLocation *projectName = nil;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"SiteLocation"];
request.predicate = [NSPredicate predicateWithFormat:@"siteName = %@",sitename];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"siteName" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

NSError *error = nil;
NSArray *siteLocations = [context executeFetchRequest:request error:&error];

if (!siteLocations || ([siteLocations count] > 1)) {
    // handle error
    NSLog(@"site = 0");

} else if (![siteLocations count]) {
    projectName = [NSEntityDescription insertNewObjectForEntityForName:@"SiteLocation"
                                                 inManagedObjectContext:context];
    projectName.siteName = sitename;
    //projectName.sitePostCode = sitePostCode;

} else {
    projectName = [siteLocations lastObject];
}

NSLog(@"project name = %@", projectName);
return projectName;

} 
```

创建`UserDetails`代码

```
 +(UserDetails*)userWithJsonInfo:(NSDictionary*)jsonInfo inManagedObjectContext:(NSManagedObjectContext *)context;
 {
 UserDetails *userdetail = nil;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"UserDetails"];
request.predicate = [NSPredicate predicateWithFormat:@"userName = %@", [jsonInfo objectForKey:Employee_Name]]; // update Employee_Number
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"userName" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

NSError *error = nil;

NSArray *matches = [context executeFetchRequest:request error:&error];

if (!matches || ([matches count] > 1)) {
    //error handler
} else if ([matches count] == 0){
    userdetail = [NSEntityDescription insertNewObjectForEntityForName:@"UserDetails" inManagedObjectContext:context];
    userdetail.userID = [jsonInfo objectForKey:ID];
    userdetail.userName = [jsonInfo objectForKey:Employee_Name];
    userdetail.userEmail = [jsonInfo objectForKey:Email_Address];
    userdetail.userMobile = [jsonInfo objectForKey:Phone_Handheld_No];
    userdetail.userPhoto = [jsonInfo objectForKey:PhotoURL];
    userdetail.postcode = [jsonInfo objectForKey:Project_Postcode];
    userdetail.userProject = [jsonInfo objectForKey:Project_Description];
    userdetail.projectUsers = [SiteLocation siteLocationWithName:[jsonInfo     objectForKey:Project_Description]inManagedObjectContext:context];

    //NSLog(@"user detail = %@", userdetail.userName);

} else {
    userdetail = [matches lastObject];
}

return userdetail;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:57:49.430

也许我没有很好地理解你的问题，但你为什么不改变方法

```
+(SiteLocation *)siteLocationWithName:(NSString *)sitename inManagedObjectContext:(NSManagedObjectContext *)context 
```

至

```
+(SiteLocation *)siteLocationWithName:(NSString *)sitename postCode:(NSString*)code inManagedObjectContext:(NSManagedObjectContext *)context 
```

因此，当您创建`UserDetails`通行证时，您还感兴趣的代码：

```
userdetail.projectUsers = [SiteLocation siteLocationWithName:[jsonInfo objectForKey:Project_Description] postCode:[jsonInfo objectForKey:Project_Postcode] inManagedObjectContext:context]; 
```

`SiteLocation`类别内

```
request.predicate = [NSPredicate predicateWithFormat:@"siteName = %@ AND postCode = %@", sitename, code];

// other code here...

projectName.siteName = sitename;
projectName.sitePostCode = code; 
```

这适合你吗？

# php - 我在使用模板时遇到问题

> ID：12706676
> 
> 赞同：0
> 
> 时间：2012-10-03T10:33:52.373
> 
> 标签：php, javascript, html, web

我无法弄清楚某些网站模板的设计方式。具体来说，渐变部分。以这个网站为例：

[渐变示例网站](http://forums.lotro.com/)

如果您右键单击此网站上的任何渐变并查看该元素的背景，您会注意到背景为渐变灰度。但是当页面加载时，它会显示一个蓝色渐变。为什么背景不像页面显示那样以蓝色渐变显示？（我觉得我问起来像个菜鸟，但我必须知道。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:47:02.080

它使用2层。

1.  带有彩色背景的主包装。
2.  带有 50% alpha 通道图像的内部包装器，带有灰色渐变。

[在此处查看示例](http://jsfiddle.net/IorgaMihai/r4Unz/2/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-03T10:39:05.653

它可能有一个 alpha 通道集和一个彩色背景。

提示：使用像 Firebug（[https://addons.mozilla.org/nl/firefox/addon/firebug/](https://addons.mozilla.org/nl/firefox/addon/firebug/)）这样的工具来计算出这样的东西（我就是这样做的 ;-)）。

# asp.net - 如何在网格面板的编辑时设置 ext:SpinnerField 的 maxValue

> ID：12706678
> 
> 赞同：2
> 
> 时间：2012-10-03T10:33:54.997
> 
> 标签：asp.net, spinner, ext.net, gridpanel

我正在使用 Ext.Net 1.5

我想在编辑时验证 ext:SpinnerField。**我想在运行时设置 ext:SpinnerField maxValue。**

```
 <ext:GroupingSummaryColumn Width="100" ColumnID="Qty" Header="Qty"
        Sortable="true" DataIndex="qty" Align="Right">
     <Editor>
        <ext:SpinnerField ID="txtQty" runat="server" AllowBlank="false" MinValue="1">
 <Listeners><BeforeShow Handler="txtQty.setMaxValue(record.data.qtydata);" /> </Listeners>
 </ext:SpinnerField>
    </Editor>
     </ext:GroupingSummaryColumn> 
```

`<BeforeShow Handler="txtQty.setMaxValue(record.data.qtydata);">` **将设置我必须设置的我的 spinnerField 的最大值**。

**示例：** 在下图中，它们是 1 个 qty 列和 1 个列（没有标题）用于设置 sppinner 的最大值。

我正在编辑第一行它将设置 maxvalue=1 然后编辑第二行它将设置 maxvalue=3

![在此处输入图像描述](../Images/fa44b1f2f32edaf4f05f1a6cac3e1a6f.png)

但是当我再次编辑第一行时，它将 maxvalue=3 但这是错误的，第一行的最大值应该是 1。 ![在此处输入图像描述](../Images/b91d86994b639354d0b6d155907742ba.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T17:28:24.627

您必须将侦听器添加到 GridPanel 的 BeforeEdit 事件。尝试这个：

```
<ext:GridPanel>
...
<Listeners>
            <BeforeEdit Handler="
                 if (e.field == 'qty') 
                    txtQty.setMaxValue(e.record.data.qtydata);"></BeforeEdit>
        </Listeners>
</ext:GridPanel> 
```

你可以在这里看到完整的例子：http: [//pastebin.com/WAgDJjQd](http://pastebin.com/WAgDJjQd)

# c# - 转换 IEnumerable 对象[,] C#

> ID：12706680
> 
> 赞同：3
> 
> 时间：2012-10-03T10:34:02.757
> 
> 标签：c#, generics, reflection

我正在尝试构建一个通用方法，它将任何 IEnumerable 转换为对象 [，]。这样做的目的是通过 ExcelDNA 插入 excel，理想情况下需要二维对象数组。

我是反思的新手，需要一些认真的帮助来填补这里的空白。下面发布的代码是我到目前为止所拥有的，我需要的是在外部循环中 DataSource 的索引 i 处获取 T 的属性。然后在内部循环中依次获取每个属性的值并插入到 object[,] 中。

任何帮助表示赞赏。谢谢理查德

```
 public object[,] ConvertListToObject<T>(IEnumerable<T> DataSource)
    {
        int rows = DataSource.Count();

        //Get array of properties of the type T
        PropertyInfo[] propertyInfos;
        propertyInfos = typeof(T).GetProperties(BindingFlags.Public);

        int cols = propertyInfos.Count();   //Cols for array is the number of public properties

        //Create object array with rows/cols
        object[,] excelarray = new object[rows, cols];

        for (int i = 0; i < rows; i++) //Outer loop
        {
            for(int j = 0; j < cols; j++) //Inner loop
            {
                object[i,j] =             //Need to insert each property val into j index
            }
        }
        return excelarray;
       }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:52:52.113

你很接近。几点建议：

*   外部循环需要是一个`foreach`循环，因为您通常无法有效地访问`IEnumerable`按索引。
*   [`GetProperties`](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)需要或者`BindingFlags.Static`为了`.Instance`返回任何东西。
*   您可以通过调用来获取实际值[`propertyInfos[j].GetValue`](http://www.google.co.uk/url?q=http://msdn.microsoft.com/en-us/library/b05d59ty.aspx&sa=U&ei=dBhsUMC_Ooek0QXKs4HICA&ved=0CBUQFjAA&usg=AFQjCNHbXNOOgl7GdLGriwCCRontn673JQ)，传入`T`要从中获取它的 -instance 以及索引器值数组 - 对于常规属性为 null，但如果您的对象可能具有索引属性，则您需要找出要传递的内容在这里或处理可能以其他方式抛出的异常。

我得到这样的东西：

```
public object[,] ConvertListToObject<T>(IEnumerable<T> DataSource)
{
    int rows = DataSource.Count();
    //Get array of properties of the type T
    PropertyInfo[] propertyInfos;
    propertyInfos = typeof(T).GetProperties(
        BindingFlags.Public |
        BindingFlags.Instance); // or .Static
    int cols = propertyInfos.Length;
    //Create object array with rows/cols
    object[,] excelarray = new object[rows, cols];
    int i = 0;
    foreach (T data in DataSource) //Outer loop
    {
        for (int j = 0; j < cols; j++) //Inner loop
        {
            excelarray[i, j] = propertyInfos[j].GetValue(data, null);
        }
        i++;
    }
    return excelarray;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:54:31.673

由于您不能对可枚举进行索引，因此您应该在递增计数器时在 foreach 循环中枚举它，而不是使用 for 循环。

```
int i = 0;
foreach (var row in DataSource)
{
    for (int j = 0; j < cols; j++)
        excelarray[i,j] = propertyInfos[j].GetValue(row, null);
    i++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T11:00:48.817

```
 public object[,] ConvertListToObject<T>(IEnumerable<T> dataSource)
    {
        if (dataSource != null)
        {
            var rows = dataSource.Count();
            var propertyInfos = typeof (T).GetProperties(BindingFlags.Public);
            var cols = propertyInfos.Length;
            var excelarray = new object[rows,cols];
            var i = 0;
            foreach (var data in dataSource)
            {
                for (var j = 0; j < cols; j++)
                {
                    excelarray[i, j] = propertyInfos[j].GetValue(data, null);
                }
                i++;
            }
            return excelarray;
        }
        return new object[,] {};
    } 
```

# jquery - 为什么文本框的值在回发时变为空？

> ID：12706684
> 
> 赞同：1
> 
> 时间：2012-10-03T10:34:18.117
> 
> 标签：jquery, asp.net, button, textbox, popup

我有一个 div，我在 jquery 模态弹出窗口中显示它。我里面有一个文本框和一个按钮。单击该按钮后，我将在后面的代码上发送请求。现在，当我尝试获取文本框的值时，每次都会出现“”。下面是我的html。

```
<div id="divDelete" runat="server" style="display: none;">
        <div>
            <div>
                <h2>
                    Are you sure you want to delete your wishisdone account?</h2>
                <p>
                    Is there anything that can make you reconsider? Contact our support, if you have
                    any problems and we will help you.</p>
                <p>
                    If you wish to continue, and delete your account, be aware that we will only keep
                    your files for 30 days and then they will be permanently deleted. You can reactivate
                    your account at any time within 30 days by logging back in.
                </p>
                <p>
                    Please, let us know the reason for your decision, so we can make our services more
                    convenient to use.</p>
                <br />
                <label class="blackLabel">
                    Password&nbsp;<span class="mandatory">*</span></label>
                <p>
                    <asp:TextBox ID="txtPassword" CssClass="greyInputLarge" runat="server"></asp:TextBox>
                    <br clear="all" />
                    <span class="error" id="spPassword" runat="server"></span>
                </p>
                <label class="blackLabel">
                    Why are you leaving?&nbsp;</label>
                <p>
                    <asp:DropDownList ID="drpReasonOfDelete" CssClass="greySelectLarge" runat="server">
                        <asp:ListItem Text="I have another WishIsDone account" Value="1"></asp:ListItem>
                        <asp:ListItem Text="I haven't registered this account" Value="2"></asp:ListItem>
                        <asp:ListItem Text="No need in service anymore" Value="3"></asp:ListItem>
                        <asp:ListItem Text="Technical problems" Value="4"></asp:ListItem>
                        <asp:ListItem Text="WishIsDone is too slow for me" Value="5"></asp:ListItem>
                        <asp:ListItem Text="Some features do not work" Value="6"></asp:ListItem>
                        <asp:ListItem Text="I don't understand how to use WishIsDone" Value="7"></asp:ListItem>
                        <asp:ListItem Text="Other" Value="8"></asp:ListItem>
                    </asp:DropDownList>
                </p>
                <label class="blackLabel">
                    Please, explain further&nbsp;</label>
                <p>
                    <asp:TextBox ID="txtReason" CssClass="greyInputLargeForMultiline" runat="server"
                        TextMode="MultiLine"></asp:TextBox>
                </p>
                <asp:HiddenField ID="hdfPassword" runat="server" />
                <br clear="all" />
            </div>
        </div>
    </div> 
```

我的jQuery文件是

```
$(document).ready(function () {
var $Error1 = $('[id$=divDelete]').dialog({
    autoOpen: false,
    resizable: false,
    modal: true,
    height: 'auto',
    width: 580,
    title: "Deactivate Account",
    buttons: {
        "Close": function () {
            $Error1.dialog('close');
        },
        "Delete my account": function () {
            if ($('[id$=txtPassword]').val() == '') {
                $('[id$=txtPassword]').css('border', '1px solid red');
                $('[id$=spPassword]').text("You can't leave this empty.");
                return false;
            } else {
                var password = $('[id$=txtPassword]').val();

                $('[id$=hdfPassword]').val(password);
                alert($('[id$=hdfPassword]').val());
                $('[id$=Button1]').click();
            }
        }
    },
    close: function (event, ui) {
    },
    open: function () {
    }
});

$('[id$=btnOpenPopUp]').live('click', function (e) {
    e.preventDefault();
    openPopUp();
});

function openPopUp() {
    $Error1.dialog('open');
}

var querystring = GetQueryStringParams('delete');
if (querystring == '1') {
    openPopUp();
}
});
function GetQueryStringParams(sParam) {
var sPageURL = window.location.search.substring(1);
var sURLVariables = sPageURL.split('&');
for (var i = 0; i < sURLVariables.length; i++) {
    var sParameterName = sURLVariables[i].split('=');
    if (sParameterName[0] == sParam) {
        return sParameterName[1];
    }
} 
```

}

代码背后的代码是

```
protected void Button1_Click(object sender, EventArgs e)
{
    if (!string.IsNullOrEmpty(Request.QueryString["delete"]) && !string.IsNullOrEmpty(Request.QueryString["u"]))
    {
        try
        {
            Guid userId = new Guid(Convert.ToString(Request.QueryString["u"].ToString()));
            objUsers.Id = userId;
            objUsers.Status = "T";
            objUsers.ModifiedOn = DateTime.UtcNow;
            string password = txtPassword.Text;
            string newass = hdfPassword.Value;
                       }
        catch
        {
            Response.Write("There is some error while deleting the account.");
        }

    }
} 
```

请帮助我，当我尝试通过 alert() 获取它时，它会在文本框中返回输入的值。但在它背后的代码中是**""**。我很困惑为什么会这样？请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T11:01:31.237

从我的脑海中，我认为这是因为在使用 jQuery UI Dialog 时，它实际上会获取 的内容，`<div>`然后将其附加`body`到`html`.

因此，`<input>`标签现在位于`<form>`标签之外。

所以关于`PostBack`控件的内容实际上并没有贴在请求内容内。

以下是该问题的一些解决方案。

[未发送 Jquery UI 对话框中的输入？](https://stackoverflow.com/questions/1611687/input-inside-jquery-ui-dialog-not-being-sent)

[带有 ASP.NET 按钮回发的 jQuery UI 对话框](https://stackoverflow.com/questions/757232/jquery-ui-dialog-with-asp-net-button-postback)

# iphone - 同一个地方的不同坐标

> ID：12706685
> 
> 赞同：0
> 
> 时间：2012-10-03T10:34:19.253
> 
> 标签：iphone, ios, gps, cllocationmanager

我尝试使用 CLLocationmanager 获取用户的 GOS 坐标我的问题是，当我多次运行应用程序时，我得到不同的结果

示例：第一次 (48.839780, 2.322400) 第二次 (48.836476, 2.324006)

我可以做点什么来提高精度吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:39:10.857

这仅归结于精细精度数据中的噪声和不准确性。

您可以通过使用平滑数据变化的降噪算法来稍微改善这一点。

看看[这个 Wiki](http://en.wikipedia.org/wiki/Low-pass_filter)。我做了类似的事情来尽量减少我在设备方向读数中得到的波动。

# sql - SQL 格式截至四舍五入去除小数

> ID：12706689
> 
> 赞同：8
> 
> 时间：2012-10-03T10:34:40.493
> 
> 标签：sql, sql-server-2008, decimal

我在内部查询中有一个计算字段“MySum”，计算后的值为 58。

我需要得到这个值的 20%。

如果我给：

```
MySum * 20 /100, I get 11 
```

如果我给：

```
((20 * CAST(MySum as decimal(6,2)))/100) , I get 11.60000 
```

如果我给

```
Round(((20 * CAST(MySum as decimal(6,2)))/100), 2), I still get 11.60000 
```

我要那个，

如果结果为 11.6，则应显示 12，如果结果为 11.4，则应显示 11。

我想四舍五入值。有什么功能吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-03T10:39:27.077

在 sql server 中使用 ROUND() [（参见示例）函数](http://www.mssqltips.com/sqlservertip/1589/sql-server-rounding-functions/)

```
select round(11.6,0) 
```

结果：

```
12.0 
```

例 2：

```
select round(11.4,0) 
```

结果：

```
11.0 
```

如果你不想要小数部分，你可以做

```
select cast(round(11.6,0) as int) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:39:01.013

```
CAST(Round(MySum * 20.0 /100, 0) AS INT) 
```

供参考

> > MySum * 20 /100，我得到 11

这是因为当所有 3 个操作数都是 INT 时，SQL Server 会从左到右执行整数数学运算，截断所有中间结果。

```
58 * 20 / 100 => 1160 / 100 => 11 (truncated from 11.6) 
```

同样对于记录**ROUND(m,n)**将结果返回到 n 个小数位，**而不是**n 个有效数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:43:02.760

检查[round](http://msdn.microsoft.com/pt-br/library/ms175003%28v=sql.100%29.aspx)函数以及参数如何`length`工作。它控制结果精度的行为

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-04-01T11:26:07.960

```
SELECT CONVERT(INT, 11.4) 
```

结果：11

```
SELECT CONVERT(INT, 11.6) 
```

结果：11

# c# - C# 在调试器中与正常执行的奇怪行为导致了 Heisenbug

> ID：12706695
> 
> 赞同：9
> 
> 时间：2012-10-03T10:34:54.990
> 
> 标签：c#, memory, marshalling, access-violation

我刚刚花了最后一个小时来解决 C# 中非托管内存的一个奇怪问题。

首先，一点上下文。我有一个 C# DLL，它导出一些本机方法（通过[这个很棒的项目模板](https://sites.google.com/site/robertgiesecke/Home/uploads/unmanagedexports)），然后由 Delphi 应用程序调用。这些 C# 方法之一必须将结构传回给 Delphi，然后将其转换为记录。我已经可以告诉你感到恶心，所以我不会详细说明。是的，它很丑陋，但另一种选择是 COM ......不，谢谢。

这是有问题的代码的简化：

```
IntPtr AllocBlock(int bufferSize)
{
    IntPtr ptrToMem = Marshal.AllocHGlobal(bufferSize);

    // zero memory
    for(int i = 0; i < bufferSize; i++)
       Marshal.WriteInt16(ptrToMem, i, 0);

    return ptrToMem;
} 
```

实际上，这里还有一些其他的东西，与本地资源跟踪有关，但基本上就是这样。如果您已经发现了这个错误，那就太好了。

本质上，问题在于我使用`WriteInt16`了而不是`WriteByte`，由于 IntelliSense 辅助的错字，导致最终迭代在缓冲区末尾写入一个字节。很容易犯错，我猜。

然而，让调试变得如此痛苦的原因是它在调试器中*默默地失败*了，而应用程序的其余部分继续工作。内存已经分配，​​除了最后一个字节之外的所有字节都被归零，所以它工作正常。当在调试器之外启动时，它会导致应用程序因访问冲突而崩溃。一个典型的 Heisenbug 情况 - 当您尝试分析它时，该错误消失了。请注意，此崩溃*不是*托管异常，而是真正的 CPU 级访问冲突。

现在，这让我感到困惑有两个原因：

1.  附加任何调试器时不会引发异常 - 我尝试了 Visual Studio、CodeGear Delphi 2009 和 OllyDbg。附加后，该程序运行良好。未附加时，程序崩溃。我对所有尝试都使用了完全相同的可执行文件。我的理解是调试不应该改变应用程序的行为，但它显然做到了。

2.  通常我希望这个操作会`AccessViolationException`在我的托管代码中导致一个错误，但它会在`ntdll.dll`.

现在，很公平，我的案例可能是 C# 历史上最晦涩（并且可能被误导）的极端案例之一，但我不知道附加任何调试器如何防止崩溃。我对它在 OllyDbg 下工作感到特别惊讶，它不会像 Visual Studio 那样干扰该过程。

那么，这里到底发生了什么？为什么在调试期间异常被吞没（或没有引发），但在调试器之外却没有？当我尝试`Marshal.WriteInt16`在分配的内存块之外调用时，为什么没有抛出托管访问冲突异常，正如文档所说的那样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T17:18:19.430

您只需将一些堆内存设置为零。这不会失败，因为没有检查您从何处获得此地址。这会在以后的堆管理（在 ntdll 中）中产生问题。此[页面](http://blogs.msdn.com/b/jiangyue/archive/2010/03/16/windows-heap-overrun-monitoring.aspx)显示了为什么稍后才检测到溢出。

由于类似的原因，您没有使用附加的调试器失败。当 Windows 检测到附加了调试器时，将使用不同的堆管理器。调试堆管理器添加了一个用于检测溢出的后缀，它不会禁用堆管理器，但会在释放块时显示损坏。有关更多详细信息，请参见上面的页面。

我不知道堆管理器是如何切换到操作系统级别的，但我在 stackoverflow 上找到了相关答案： [Visual C++: Difference between Start with/without debugging in Release mode](https://stackoverflow.com/questions/3360900/visual-c-difference-between-start-with-without-debugging-in-release-mode/4375879#4375879)

据我了解堆管理器切换，如果您从桌面/控制台以发布模式启动进程并稍后附加调试器，则调试器应在使用标准堆管理器时停止堆损坏。这可以用来检验我的假设。

# c# - Windows Phone 7 访问 Azure 移动服务（远程服务器返回错误：未找到）

> ID：12706698
> 
> 赞同：0
> 
> 时间：2012-10-03T10:35:02.980
> 
> 标签：c#, windows-phone-7, azure-sql-database, azure-mobile-services

我尝试从 Azure 创建一个新的移动服务，并且数据已被 Json 正确公开。

[https://lifehope.azure-mobile.net/tables/USERPF](https://lifehope.azure-mobile.net/tables/USERPF)

USERPF 是一个示例表。

为了简化问题，我只是将权限修改为“所有人”。

问题是下面列出的代码不起作用。错误消息是：**远程服务器返回错误：** 当我点击插入按钮在 USERPF 中插入新记录时未找到...

```
 private void butInsert_Click(object sender, RoutedEventArgs e)
    {
        USERPF item = new USERPF();
        item.Column1 = 789;
        item.Column2 = 789;

        WebClient wc = new WebClient();
        wc.Headers["Content-Type"] = "application/x-www-form-urlencoded";
        //wc.Headers["X-ZUMO-APPLICATION"] = "";
        wc.UploadStringCompleted += (ss, arg) =>
        {
            if (arg.Error == null)
            {
                MessageBox.Show("OK");
            }
            else
            {
                MessageBox.Show(arg.Error.Message);
            }
        };

        wc.UploadStringAsync(
            new Uri("https://lifehope.azure-mobile.net/tables/USERPF/"),
            "POST", JsonHelper.ObjectToJson(item, typeof(USERPF)));
    } 
```

//USERPF.cs

```
public class USERPF
{
    [System.Runtime.Serialization.IgnoreDataMember()]
    public int id { get; set; }
    [System.Runtime.Serialization.DataMember()]
    public int Column1 { get; set; }
    [System.Runtime.Serialization.DataMember()]
    public int Column2 { get; set; }
} 
```

//JsonHelper.cs

```
 public static string ObjectToJson(object obj, Type type)
    {
        try
        {
            //Create a stream to serialize the object to.
            MemoryStream ms = new MemoryStream();

            // Serializer the User object to the stream.
            DataContractJsonSerializer ser = new DataContractJsonSerializer(type);
            ser.WriteObject(ms, obj);
            byte[] json = ms.ToArray();
            ms.Close();
            return Encoding.UTF8.GetString(json, 0, json.Length);
        }
        catch (Exception ex)
        {
           MessageBox.Show(ex.Message);
            return string.Empty;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T03:30:49.860

您正在发送 JSON 数据，但您说它是不同的内容类型：

```
wc.Headers["Content-Type"] = "application/x-www-form-urlencoded"; 
```

在请求中设置正确的内容类型：

```
wc.Headers["Content-Type"] = "application/json"; 
```

不相关的东西：如果你的类型没有用 装饰`[DataContract]`，你不需要用 Column1 和 Column2 装饰属性`[DataMember]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:59:27.637

尝试将`arg.Erro`r 转换为`WebException`，并检查 Statuce 代码。可能是 401（未经授权）

```
 var webException = arg.Error as WebException;
 if(webException == null) return;

   if (webException.Response != null)
   { 
     var response = (HttpWebResponse)webException.Response; 
     var status  = response.StatusCode; //press F9 here
   } 
```

# meta-tags - Facebook 调试器未正确解析 url。解析 http://url.com 而不是 http://url.com?param=value

> ID：12706700
> 
> 赞同：4
> 
> 时间：2012-10-03T10:35:07.727
> 
> 标签：meta-tags, facebook-opengraph

我正在尝试将 opengraph 集成到这个网站[http://www.lsenow.com](http://www.lsenow.com)中。

编写主题的人使用硬编码的 mysql 而不是 WordPress 已经提供的功能从数据库中提取数据。我不知道这是否相关。我只是还没有看到这样做，特别是因为它是不必要的。

将此网址 (http://www.lsenow.com/?event=campus-tours-2) 通过调试器时，我收到此消息：

> URL '‎http://www.lsenow.com/‎' 类型为 '‎events‎' 的对象无效，因为无法解析属性 '‎og:image:url‎' 的给定值 '‎‎' >作为类型“url”。

facebook 调试器给了我这个关于 url 的信息：

```
Scrape Information
    Response Code‎: 200
    Fetched URL‎:   http://www.lsenow.com/?event=campus-tours-2
    Canonical URL‎: http://www.lsenow.com/

Redirect Path
    Original‎:  http://www.lsenow.com/?event=campus-tours-2
    301‎:   http://www.lsenow.com/ 
```

我尝试了很多东西，我尝试过：

*   < meta property="og:url" content="< ? php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; echo $url; ?>" /> '
*   < 元属性="og:url" 内容="< ?php the_permalink() ?>
*   添加 <link rel="canonical" href="< ? php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; echo $url; ?>"/>
*   <meta property="og:url" content="http://www.lsenow.com/?event=< ?php echo $_GET['event'];?>" />

有没有人有这个问题的解决方案。我觉得我已经添加了所有正确的代码。

这是我所拥有的：

```
<!-------------------------- Open Graph ---------------------------->
<link rel="canonical" href="<?php $url="http://".$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; echo $url; ?>"/>
<meta property="og:url" content="http://www.lsenow.com/?event=<?php echo $_GET['event'];?>" />
<meta property="og:title" content="<?php the_title(); ?>" />
<meta property="og:type" content="events"/>
<meta property="og:image" content="http://placehold.it/300x300"/>
<meta property="og:site_name" content="<?php bloginfo('name');?>"/>
<meta property="og:description" content="<?php the_excerpt();?>"/>
<meta property="fb:app_id" content="151709234971178" />
<!--------------------------End of Open Graph ----------------------------> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:28:22.420

看起来 Facebook 不喜欢您标签`placehold.it`中的网址。`og:image`由于您的 URL 中有一个查询字符串，因此 Facebook 正在重定向到您的主 URL。

尝试用您网站上的静态图像替换它，看看它是否会解析。

您可能还想查看您的`.htaccess`文件和代码，以查看其中是否有可能重定向 Facebook 抓取工具的内容。

# php - 来自现有数据库的随机图像

> ID：12706702
> 
> 赞同：0
> 
> 时间：2012-10-03T10:35:13.600
> 
> 标签：php, mysql

我有 4 个不同的数据库视频、壁纸、图片、游戏，我想在外部页面上显示随机项目，即主页不同的视频壁纸图片和游戏每当页面刷新时我想在 php 的帮助下随机获取缩略图和内容

例如：-我有存储缩略图和 swf 文件的游戏数据库，这些文件在我的主页上随机获取，当用户单击该文件时，它会将用户发送到该游戏页面

可以用 id 获取内容吗？我认为它会为我希望显示缩略图的 150x150px div 造成问题。

这是数据库的示例

```
[games][1]
[pictures][2]
[wallpapers][4]
please help me guys 

  [1]: http://pzy.be/v/3/game.jpg
  [2]: http://pzy.be/v/2/pictures.jpg
  [3]: http://pzy.be/v/2/video.jpg
  [4]: http://pzy.be/v/4/wall.jpg 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:41:40.320

要从数据库中获取随机数据，您必须像此示例一样编写查询

```
select column_name from table_name where condition RAND() 
```

每当执行此查询时，您的数据将是随机的。

# c# - 使用实体框架获取特定类型的实体返回错误 - LINQ to Entities 无法识别方法“System.Type GetType()”

> ID：12706703
> 
> 赞同：1
> 
> 时间：2012-10-03T10:35:13.550
> 
> 标签：c#, entity-framework, asp.net-mvc-3, linq-to-entities, gettype

我正在尝试过滤掉某种类型的实体。我正在使用实体框架，我有一个父实体，以及从父实体继承的各种子实体。我正在尝试过滤掉其中一个孩子。

例如，我有以下结构：

*   地址：实体
    *   邮编：地址
    *   街道地址

用户实体具有对一个地址的引用。如何获取与 PostCode 类型的地址关联的用户列表？

即我试过：

```
 var query = from User p in context.Users
                        where p.Address.GetType() == typeof(PostCode)
                        select p; 
```

但我得到：

> LINQ to Entities 无法识别方法“System.Type GetType()”方法，并且此方法无法转换为存储表达式。

我见过一些解决方案，首先是获取用户列表，然后选择特定类型的用户列表。该方案的问题是查询首先获取所有用户；我希望我的查询包含过滤器，因为我有很多用户。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-03T10:37:26.950

尝试使用 is 运算符。

```
 var query = from User p in context.Users
                    where p.Address is PostCode
                    select p; 
```

# google-maps-api-3 - Google maps API pan up onload

> ID：12706708
> 
> 赞同：0
> 
> 时间：2012-10-03T10:35:26.623
> 
> 标签：google-maps-api-3

不敢相信没有一个简单的答案，需要这张地图自动平移或以其他方式阻止信息窗口从地图顶部消失......

[http://www.triangledesign.biz/contact-dev.php](http://www.triangledesign.biz/contact-dev.php)

代码...

```
 var mapOptions = {
      center: new google.maps.LatLng(51.539104, -2.400264),
      zoom: 16,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

    var image = 'cup-sm.png';
    var myLatLng = new google.maps.LatLng(51.539104, -2.400264);
    var contentString = '<div id = "info-window">';
        contentString += '<div class = "float-left"><h1>Get in touch</h1></div>';
        contentString += '<div class ="divider4"><!--div--></div>';
        contentString += '<div class = "float-left">';
            contentString += 'Riverside House,<br>Quarry Road,<br>Chipping Sodbury,<br>Bristol BS37 6AX,<br>United Kingdom';
        contentString += '</div>';
        contentString += '<div class ="divider4"><!--div--></div>';
        contentString += '<div class = "float-left">';
            contentString += '<span class = "grey">t&nbsp;+44 (0)1454 311 220</span><br><a href ="mailto:info@triangledesign.biz" class = "grey">info@triangledesign.biz</a>';
        contentString += '</div>';
    contentString += '</div>';

    var image = new google.maps.MarkerImage("cup-sm.png",
    // This marker is 20 pixels wide by 32 pixels tall.
    null, 
    // The origin for this image is 0,0.
    new google.maps.Point(0,0)
    // The anchor for this image is the base of the flagpole at 0,32.

);

    var marker = new google.maps.Marker({
          position: myLatLng,
          map: map,
          title:"Get In Touch",
          icon: image
      });

    var infowindow = new google.maps.InfoWindow({
        content: contentString
    });

    $(document).ready(function(){
      infowindow.open(map,marker);
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:58:59.053

好吧，只需更改`center`变量**myOptions**属性中的纬度。

将中心设置在南侧。

我认为没有其他解决方案，因为信息窗口大于地图的一半。

# html - 阻止 div 在调整大小时垂直移动

> ID：12706713
> 
> 赞同：1
> 
> 时间：2012-10-03T10:35:43.653
> 
> 标签：html, css

我只是在尝试 Xara Web Designer，并创建了一个页面：http: [//goo.gl/SFSmn](http://goo.gl/SFSmn)

当页面放大或缩小时，主要的位置`div.xr_ap`上下移动，我尝试了许多修复，如自动边距对齐、绝对定位、制表，但似乎都没有给出理想的结果！:-(

如果可能的话，有人知道如何使用 CSS 在所有缩放级别上保持 div 就位吗？（类似于上面的滑块的行为！）

谢谢，所有回复都非常感谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:54:27.693

这是因为`div#wrapper`它会根据页面宽度改变它的高度，但是当它应该与它的底部对齐时，它会与`div.xr_ap`顶部对齐。`div#wrapper`

移除`div.xr_ap` `top`（所以它被定位在前一个元素' 之后`div#wrapper`）并向上移动它的元素（或者绝对放弃绝对定位，从左到右，从上到下排列图像并通过移除它们的位置属性让它们流动）。

如果设计器只支持绝对定位，你必须给 设置一个固定的宽度，`div#wrapper`以防止它调整大小。

我对网页设计师没有经验，所以如果我提出设计师不允许的建议，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:05:16.320

只需从此处删除 margin-top`div.xr_ap`

```
div.xr_ap {
    margin-top: 45px;
} 
```

用下面提到的css替换上面的这个类

**CSS**

```
div.xr_ap {
    position: relative;
    top: -535px;
} 
```

# java - 如何从 Facebook 图表中获取信息

> ID：12706714
> 
> 赞同：0
> 
> 时间：2012-10-03T10:35:54.927
> 
> 标签：java, android, facebook-graph-api

我是 java 新手，试图找到一种从 facebook graph api 获取信息的方法，例如：

我有以下图表页面 [https://graph.facebook.com/226949532466/albums](https://graph.facebook.com/226949532466/albums)

首先我会得到页面并阅读它

```
URL url = new URL("https://graph.facebook.com/226949532466/albums");
URLConnection conn = url.openConnection();
BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream())); 
```

但在那之后我想知道是否有一种简单的方法可以使用（同时）只获取每个组的“名称”并将它们收集在一个 ArrayList 中

顺便说一句，我在 android 上这样做，如果这有所作为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:40:14.900

用于`URL url = new URL("https://graph.facebook.com/226949532466/albums?fields=name");`仅获取名称。

建议：请正确阅读 Facebook Graph API 文档。这些都是非常基本的问题，不需要在这里问。只需花 30 分钟浏览文档就会对您有很大帮助。

# c# - 将信息从数据库列拆分为文本和数字

> ID：12706716
> 
> 赞同：0
> 
> 时间：2012-10-03T10:36:00.783
> 
> 标签：c#, sql, linq, split

我从下拉列表中显示的数据库中检索数据。下拉列表显示街道名称以及房屋编号。我的数据中的一个例子是：**"Streetname 44"**。现在，当数据被检索并显示在下拉列表中时，我想将数据保存到数据库中的另一个表中，但这次我希望“街道**名称”**位于“街道列”上，而**“44”**存储在“数字列”。我使用 LINQ 来存储我的数据，到目前为止我有这个：

```
 using (DB_Entities tt = new DB_Entities())
        {
            Address va = new Address();
            va.Street = ListItemStreet.SelectedItem; // I only want the Strings from the itemlist
            va.HouseNo = ListItemStreet.SelectedItem; // I only want the number from the itemlist

            tt.ValidateAddress.AddObject(va);
            tt.SaveChanges();

            if (tt != null)
            {
                AddError.Text = "Saved!";
            }
            else
            {
                AddError.Text = "Error";
            }
    } 
```

**编辑：**它不是一个文本框，而是一个项目列表，如果街道被检索到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:46:58.743

你可以这样解析：

```
string address = "Streetname 44";

var index = address.LastIndexOf(' ');

var houseNo = address.Substring(index + 1);
var streetName = address.Remove(index); 
```

# git - 为 Windows 创建用户和访问规则 Github

> ID：12706719
> 
> 赞同：0
> 
> 时间：2012-10-03T10:36:09.393
> 
> 标签：git, version-control, github, git-svn

我刚刚使用[http://windows.github.com/安装了 Git](http://windows.github.com/)

它似乎安装正确，但我无法创建新用户和访问控制设置来访问存储库。我试图查看文档，但不包含类似的内容。我不确定 Github for windows 是否有这些。

你建议用什么来解决这种情况。我需要用用户管理和至少非常基本的存储库访问控制来设置 Git），是否可以使用 Git？

我对命令提示符管理控制台很好。请给个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:53:42.093

[GitHub for Windows](http://windows.github.com/)是 Windows 的 GitHub 客户端，它不是 Windows 的 Git 安装程序。

您安装了一个客户端，可帮助您管理、提交、推送和拉取 GitHub 托管的 Git 存储库。

如果你想在你的机器上安装 Git，请转到[git-scm](http://git-scm.com/)。如果你想安装一个 git 存储库托管，事情会变得有点复杂，因为你想在 Windows 上这样做。我认为没有任何现有项目旨在在 Windows 上运行。

如果您可以使用不同的操作系统，那么[Gitolite](http://sitaramc.github.com/gitolite/)是最著名的项目之一。

如果您更喜欢托管解决方案，有多种替代方案，例如[GitHub](http://github.com)、[BitBucket](http://bitbucket.com)、[CodeBase](http://www.codebasehq.com/)等等。

# episerver - 获取登录用户的所有权限，EPiServer

> ID：12706720
> 
> 赞同：1
> 
> 时间：2012-10-03T10:36:10.737
> 
> 标签：episerver

我有一个自定义属性，我想根据用户权限以不同方式呈现它。我的问题是我不太清楚如何获取登录用户的权限。并且如前所述，我的“上下文”不在页面内，它在自定义属性中..

我如何获得当前用户的权限？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T19:53:53.017

如果您不是在寻找特定页面的权限，您可以使用以下内容：

```
EPiServer.Security.PrincipalInfo.HasAdminAccess 
```

但是，这是针对整个 CMS，而不是针对特定页面。

此外，即使您处于静态上下文中，也始终可以获取当前页面：[http ://world.episerver.com/Blogs/Mari-Jorgensen/Dates/2008/4/Accessing-CurrentPage-from-a-static -语境/](http://world.episerver.com/Blogs/Mari-Jorgensen/Dates/2008/4/Accessing-CurrentPage-from-a-static-context/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:43:57.870

查看[访问控制列表](http://sdk.episerver.com/library/cms6/html/T_EPiServer_Security_AccessControlList.htm)类。

```
if (CurrentPage.ACL.QueryDistinctAccess(EPiServer.Security.AccessLevel.Create))
{
    // Checks whether the currently logged-on user has
    // Create permission for the current page.
} 
```

# wcf - WCF 服务接受任何旧证书

> ID：12706721
> 
> 赞同：1
> 
> 时间：2012-10-03T10:36:11.840
> 
> 标签：wcf, wcf-security

我正在尝试将此 WCF 服务设置为仅在客户端提供“Test 01”证书时接受请求。问题是它似乎接受来自同一机构的任何证书，例如“Test 04”。

**如何拒绝所有未使用“Test 01”证书发送的请求？**

```
 <basicHttpBinding>
    <binding
      name="TestSecureBinding"
      maxReceivedMessageSize="5242880">
      <security mode="Transport">
        <transport
          clientCredentialType="Certificate"></transport>
      </security>
    </binding>
  </basicHttpBinding>

    <behavior name="TestCertificateBehavior">
      <serviceCredentials>
        <clientCertificate>
          <certificate
            storeLocation="LocalMachine"
            x509FindType="FindBySubjectName"
            findValue="Test 01"/>
          <authentication
            certificateValidationMode="PeerTrust"
            trustedStoreLocation="LocalMachine"
            revocationMode="NoCheck"/>
        </clientCertificate>
      </serviceCredentials>
    </behavior>
  <service
    name="IService"
    behaviorConfiguration="TestCertificateBehavior">
    <endpoint
      name="MyHttps"
      address="https://localhost:443"
      contract="IService"
      binding="basicHttpBinding"
      bindingConfiguration="TestSecureBinding">
    </endpoint>
    <host>
      <baseAddresses>
        <add baseAddress="https://localhost:443"/>
      </baseAddresses>
    </host>
  </service> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:35:03.550

没有办法在普通的 WCF 配置中进行配置——你必须自己动手。

```
public class CertificateValidator : X509CertificateValidator
{
    private string _expectedSubjectName;

    public CertificateValidator(string expectedSubjectName)
    {
        _expectedSubjectName = expectedSubjectName;
    }

    public override void Validate(System.Security.Cryptography.X509Certificates.X509Certificate2 certificate)
    {
        if (certificate == null)
        {
            throw new ArgumentNullException("certificate");
        }

        if (certificate.SubjectName.Name != _expectedSubjectName)
        {
            throw new SecurityTokenValidationException("Invalid certificate");
        }
    }
} 
```

然后将其附加到您的服务主机：

```
serviceHost.Credentials.ClientCertificate.Authentication.CertificateValidationMode = 
                X509CertificateValidationMode.Custom;
serviceHost.Credentials.ClientCertificate.Authentication.CustomCertificateValidator =
                new CertificateValidator(expectedCertificateName); 
```

取自：[创建使用自定义证书验证器的服务](http://msdn.microsoft.com/en-us/library/ms733806.aspx)。

# lambda - 如何编写谓词双重列表（L，R）？

> ID：12706726
> 
> 赞同：1
> 
> 时间：2012-10-03T10:36:23.387
> 
> 标签：lambda, prolog

如何编写谓词 doublelist(L, R) ，其中 L 是数字列表，R 也是一个列表，长度与 L 相同，每个元素都加倍。

例子：

```
?- doublelist([-1, 0, 3], L).  
L = [-2, 0, 6]. 
```

我是序言初学者，我自己写一个很困惑。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:54:06.330

```
 maplist(\I^D^(D is 2*I), Is, Ds). 
```

[这使用了library(lambda)](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)[`maplist/3`](http://www.complang.tuwien.ac.at/ulrich/iso-prolog/prologue#maplist)中定义的高阶谓词和 lambda 表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:13:14.593

首先写下您的示例：

```
double_list([-1,0,3],[-2,0,6]). 
```

这是一个完全有效的 Prolog。您可以在各种方向使用它：

```
?- double_list([-1,0,3],L).
L = [-2,0,6].

?- double_list([-1,0,3],[-2,0,6]).
Yes. 
```

所以，现在你需要让它更通用。第一步，写下它的含义：

```
double_list([-1,0,3],[-2,0,6]):-
    (-2) is 2*(-1),
    0    is 2*???,
    6    is ?????. 
```

下一步，用变量替换数字：

```
double_list([-1,0,3],[-2,0,6]):-
    A1 is (-1), B1 is (-2), B1 is 2*A1,
    A2 ????,    B2 ????,    B2 is 2*??,
    A3 ????,    B3 ????,    B3 ???????. 
```

你能从这里继续吗？你看到图案了吗？

```
double_list([X1,X2,X3],[Y1,Y2,Y3]):-
    ...... 
```

现在您有了一个适用于所有长度为 3 的列表的谓词。然后，

```
double_list([X1 | T1], [Y1 | Z1]):-
    ......

double_list( [], ZN) :- ZN = ???? . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T07:12:52.967

或者干脆使用

```
double_list(Is,Ds) :- findall(D,(member(I,Is),D is 2*I),Ds). 
```

对于那些对 maplist 感到不舒服的人。

# iphone - 自定义 UISearchBar 键盘

> ID：12706731
> 
> 赞同：0
> 
> 时间：2012-10-03T10:36:38.437
> 
> 标签：iphone, objective-c, ios, uikeyboard

如何在 iOS 中自定义我的搜索栏键盘？例如，在键盘上添加带有个性化按钮的工具栏（我需要数学符号 ->、∞、∑）。感谢您的任何建议！垫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T12:19:00.667

我认为U只能更改**“返回”**键。据我所知，苹果不允许进行更多更改……所以这是我的教程：

事实上，所有其他键盘类型（除了非常相似的）确实提供了通过设置相应实现`UIKeyboardTypePhonePad`者的 returnKeyType 属性来消除的可能性。`UITextInputTraits`那么如何用数字键盘达到同样的效果呢？我们找到了解决方法！

查看数字键盘时，您会注意到其左下角有一个未使用的空间。这就是我们要插入**自定义**“返回”键的地方。你可以在这里看到：

![第一的](../Images/e18897acb698abbf5b75876889dacdac.png)

简而言之：截屏，剪下整个退格键，水平翻转，在 Photoshop 中清除退格符号，并在“返回”键上覆盖我们想要的文本。我们选择将其标记为“完成”。现在我们有了自定义按钮的图像`UIControlStateNormal`。重复整个过程（在截屏时触摸退格键）以获得我们按钮的第二张图像`UIControlStateHighlighted`。结果如下：

![第二](../Images/bf75ac05f9078e4a0cc50f9b427e33d6.png)

![第三](../Images/e16f9253a802814259373a0f503da7d3.png)

现在回到编码。首先，我们需要知道数字键盘何时会在屏幕上向上滑动，以便在此之前插入**自定义按钮**。幸运的是，有一个专门用于此目的的通知，注册它就像这样简单：

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(keyboardWillShow:) 
                                             name:UIKeyboardWillShowNotification 
                                           object:nil]; 
```

完成整个操作后，不要忘记**将观察者**从通知中心的适当位置删除：

```
[[NSNotificationCenter defaultCenter] removeObserver:self]; 
```

现在我们要进入它的核心。在该方法中，我们所要做的`keyboardWillShow`就是找到键盘视图并将我们的按钮添加到其中。`UIWindow`正如其他人已经发现的那样，键盘视图是我们应用程序的第二部分（参见这个线程）。所以我们引用那个窗口（在大多数情况下它将是第二个窗口，所以`objectAtIndex:1`在下面的代码中很好），遍历它的视图层次结构，直到我们找到键盘并将按钮添加到它的左下角：

```
- (void)keyboardWillShow:(NSNotification *)note {  
    // create custom button
    UIButton *doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
    doneButton.frame = CGRectMake(0, 163, 106, 53);
    doneButton.adjustsImageWhenHighlighted = NO;
    [doneButton setImage:[UIImage imageNamed:@"DoneUp.png"] forState:UIControlStateNormal];
    [doneButton setImage:[UIImage imageNamed:@"DoneDown.png"] forState:UIControlStateHighlighted];
    [doneButton addTarget:self action:@selector(doneButton:) forControlEvents:UIControlEventTouchUpInside];

    // locate keyboard view
    UIWindow* tempWindow = [[[UIApplication sharedApplication] windows] objectAtIndex:1];
    UIView* keyboard;
    for(int i=0; i<[tempWindow.subviews count]; i++) {
        keyboard = [tempWindow.subviews objectAtIndex:i];
        // keyboard view found; add the custom button to it
        if([[keyboard description] hasPrefix:@"UIKeyboard"] == YES)
            [keyboard addSubview:doneButton];
    }
} 
```

**瞧**，就是这样！我们按钮的空白区域从坐标**(0, 163)**开始，尺寸为**(106, 53)**。当然现在必须编写 doneButton 方法，但这已经不难了。只需确保调用`resignFirstResponder`正在编辑的文本字段以使键盘向下滑动。

![最后一个](../Images/02e0ee7f1431e2b4753df46550842a22.png)

在这里你可以找到最终的项目......puhhh这是很多工作......希望它有所帮助......

这里是项目的链接：

[项目](http://files.neoos.ch/KeyboardExtension_2010.zip)

# javascript - 样式化 jQuery UI 手风琴

> ID：12706743
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:37:10.780
> 
> 标签：javascript, jquery, css

谁能告诉我如何获得这样的 css：http: [//jqueryui.com/demos/accordion/#mouseover](http://jqueryui.com/demos/accordion/#mouseover)以下代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="robots" content="all" />
<title>jQuery Vertical Accordion Menu Plugin v 2.6</title>
<link href="css/dcaccordion.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type='text/javascript' src='js/jquery.cookie.js'></script>
<script type='text/javascript' src='js/jquery.hoverIntent.minified.js'></script>
<script type='text/javascript' src='js/jquery.dcjqaccordion.2.7.min.js'></script>
<script type="text/javascript">
$(document).ready(function($){

                        $('.accordion-6').dcAccordion({
                        eventType: 'hover',
                        autoClose: true,
                        saveState: true,
                        disableLink: true,
                        menuClose: false,
                        speed: 'medium',
                        showCount: true,

                        autoExpand: true,
                        cookie  : 'dcjq-accordion-1',
                        classExpand  : 'dcjq-current-parent',

                        menuClose: false    
                    });

});
</script>
<link href="css/skins/blue.css" rel="stylesheet" type="text/css" />
<link href="css/skins/graphite.css" rel="stylesheet" type="text/css" />
<link href="css/skins/grey.css" rel="stylesheet" type="text/css" />
</head>
<body>

<div class="wrap">
    <div class="graphite demo-container">

            <ul class="accordion accordion-6">
                <li><a href="#">Home</a></li>
                <li><a href="#">Products</a>
                    <ul class="accordion"  id="accordion-6">
                        <li><a href="#">Mobile Phones &#038; Accessories</a> </li>
                        <li><a href="#">Desktop</a> </li>
                    </ul>
                </li>
            <li><a href="#">About Us</a>
                <ul class="accordion"  id="accordion-6">
                    <li><a href="#">About Page 1</a></li>
                    <li><a href="#">About Page 2</a></li>            
                </ul>
            </li>
            <li><a href="#">Services</a></li>
            <li><a href="#">Contact us</a></li>
            </ul>

    </div>
</div>

</body>
</html> 
```

我是这个 CSS 的新手，所以请谁能告诉我如何实现它..？

我正在考虑让我的 CSS 像这个网站一样：

```
http://bag-saver.com/uk/shop/black-handbags/ 
```

任何人都可以请..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:18:20.457

为什么不使用完整的现成包... [http://dhtmlx.com/docs/products/dhtmlxAccordion/index.shtml](http://dhtmlx.com/docs/products/dhtmlxAccordion/index.shtml) ...只需下载...按照步骤操作即可。

这是一个简单的内联 css 开始......它使用谷歌手风琴 API......

```
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css"
rel="stylesheet" type="text/css" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">        </script>

<script type="text/javascript" language="javascript">
$(document).ready(function () {
$("#accordion").accordion({ active: false,
    collapsible: true
});
});
</script>
</head>
<body>
 <div id="accordion">
<h3>
<a href="#" style="background-color: Blue; height: 25px; color: White; text-decoration: none;">
    Start Service</a></h3>
<div style="height: 40px;">
<span>Start or Stop Servcice </span>
<asp:Panel ID="Panel1" runat="server" BorderStyle="Solid" BorderWidth="1px">
    <p>
        some text
    </p>
</asp:Panel>
</div>
<h3>
<a href="#" style="background-color: Blue; height: 25px; color: White; text-decoration: none;">
    Customer Service</a></h3>
<div>
<b>Contact Us</b>
<asp:Panel ID="pnlSrvc" runat="server" BorderStyle="Solid" BorderWidth="1px">
    <p>some text<p>
</asp:Panel>
</div>
<h3>
<a href="#" style="background-color: Blue; height: 25px; color: White; text-decoration: none;">
   some text</a></h3>
<div style="height: 40px;">
<span>some text </span>
<asp:Panel ID="Panel2" runat="server" BorderStyle="Solid" BorderWidth="1px">
    <p>
        some text
    </p>
</asp:Panel>

</div>
 <h3>
some text
</h3>
</body>
</html> 
```

# c# - 如何连接 SelectList 中的两个字段？

> ID：12706745
> 
> 赞同：2
> 
> 时间：2012-10-03T10:37:21.903
> 
> 标签：c#, asp.net-mvc, selectlist

所以下面的代码给了我一个下拉框，其中包含来自驱动程序的名称列表，但它只是名字，我也有姓氏，我该怎么做。我的代码是...

```
@Html.DropDownListFor(model => model.DriverId, new SelectList(Model.Drivers, "Id", "FirstName", Model.DriverId), "<Select Driver>")
@Html.ValidationMessageFor(model => model.DriverId) 
```

这选择了名字，所以说“约翰”，我希望它是“约翰史密斯”，所以它也包括姓氏。任何人都可以帮忙吗？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:40:58.617

你可以在你的`Drivers`模型中创建一个属性：

```
public string FullName
{
  get
  {
  return firstName + " " + LastName;
  }
} 
```

然后在您看来，只需将“FirstName”更改为“FullName”，如下所示：

```
@Html.DropDownListFor(model => model.DriverId, new SelectList(Model.Drivers, "Id", "FullName", Model.DriverId), "<Select Driver>") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T10:40:26.160

您可以通过连接 FirstName 和 Surname 从模型中执行此操作，并在下拉列表中使用它

```
public class DriverViewModel
{
   public string FirstName { get; set; }
   public string Surname { get; set; }
   public string FullName
   {
      get 
      {
         return Surname+" "+FirstName; //String.Format("{0} {1}", Surname, FirstName);
      }
   }
} 
```

# android - 安卓文件托管

> ID：12706752
> 
> 赞同：0
> 
> 时间：2012-10-03T10:37:36.767
> 
> 标签：android, packaging

我必须制作一个具有多种分辨率的特定图形资源文件的 android 应用程序。我根据屏幕分辨率管理 3 类设备：

*   宽度 <480 像素
*   宽度在 480px 和 600px 之间
*   宽度 >600 像素

我不想在我的 apk 中包含这些资产（~150MB），并且只下载设备所需的那些。我阅读了有关“多 APK 支持”的文档，但我的类别不符合取决于屏幕尺寸的屏幕尺寸标准。

除了制作我自己的下载服务器之外，还有其他解决方案吗？

# iphone - NSInternalInconsistencyException 表格视图中的节号错误？

> ID：12706753
> 
> 赞同：0
> 
> 时间：2012-10-03T10:37:40.767
> 
> 标签：iphone, ios, uitableview, uiview

我的 UIView 中有一个 UITableView，它具有可变数量的部分，具体取决于某些条件。我收到以下异常。

> 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效更新：无效的节数。更新后表视图中包含的节数（1）必须等于更新前表视图中包含的节数（2），加上或减去插入或删除的节数（1插入，0已删除）。

从错误看来，我在数据源中有不同数量的部分？？？我该如何解决问题？

这是我的界面：

```
@interface bookDetailView :  SomeView <UITableViewDelegate,UITableViewDataSource> 
{
    UITableView *bookDetailTableView;
        ....
} 
```

这是我的视图初始化

```
UIView *view = [[[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame] autorelease];
view.autoresizingMask = UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth;
self.view = view;

UITableView *tableView = [[[UITableView alloc] initWithFrame:view.bounds style:UITableViewStyleGrouped] autorelease];
tableView.autoresizingMask = (UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight);
tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
tableView.delegate = self;
tableView.dataSource = self;
tableView.sectionIndexMinimumDisplayRowCount = 20;

bookDetailTableView = tableView;
[self.view addSubview:bookDetailTableView]; 
```

代码在 insertSections 崩溃 ....

```
if (![book method1])
{
    [bookDetailTableView insertSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(1,1)] withRowAnimation:UITableViewRowAnimationFade];
}
else
{
     [bookDetailTableView insertSections:[NSIndexSet indexSetWithIndexesInRange:NSMakeRange(2,1)] withRowAnimation:UITableViewRowAnimationFade];
} 
```

numberOfSectionsInTableView

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView  
{
    if (editMode)
    {

        if(newbookFlag || listBook )
        {
            return 1;
        }
        else 
        {
            if(![book preferable])
            {
                return 2;
            }
            else
            {
                return 3;
            }
        }
    }

} 
```

任何的想法？我尝试了 beginUpdates 和 endUpdates ，问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:46:00.427

如果您在 UITableView 中插入一个部分，则应确保此更改反映在您的数据源中。在这种情况下，您的 numberOfSectionsInTableView: 方法应该在插入新部分时返回一个额外的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T18:21:33.200

由于轻微的红鲱鱼，我实际上收到了这个错误。我有一个表格部分和表格单元格的模型，我用它来管理内存中的单元格，然后再将它们呈现在屏幕上。在我的特殊情况下，我试图使用 [NSArray indexOfObject:cell] 方法查找已删除单元格的索引。由于单元格当然已经从集合中删除，而不是抛出异常，objective-c 向我返回了 int 最大值，这导致了这个问题中出现的异常，因为我随后从返回的值创建了一个 NSIndexPath无效的。

# jquery - jquery-ajax-json / 成功数据参数为空

> ID：12706755
> 
> 赞同：1
> 
> 时间：2012-10-03T10:37:42.353
> 
> 标签：jquery, ajax, json

我尝试通过 jQuery.ajax 发送文件，并且发布效果很好。文件保存完成后，我尝试发回数据库信息的 JSON 对象，如下所示：

```
header("Content-Type: application/json; charset=utf-8");                
echo json_encode($DatabaseEntity);
die(); 
```

但是客户端的 ajax 成功回调的“data”参数为 null，而不是 JSON 对象。

jQuery.ajax 是这样设置的：

```
$.ajax({
    url: /* url */,
    type: "POST",
    data: postingData, // it's a FormData object
    dataType: "json",
    cache: false,
    contentType: false, // it's because the FormData, if I set "multipart/form-data", then the data not sended
    processData: false,                                
    success: function(data) {
        alert(data); // => this is NULL, and I don't know why!
    }
}); 
```

Firefox FireBug 显示结果：这是一个格式良好的 JSON 字符串

有任何想法为什么“数据”为空？

**更新**

$DatabaseEntity 包含类似的内容：

```
object(DatabaseEntity)#15 (9) {
   ["Label"]=>
   string(5) "somethinglabel"
   ["Description"]=>
   string(3) "somethingdesc"
   ["Link"]=>
   string(6) "somethinglink"
   ["FileID"]=>
   string(4) "1761"
   ["Order"]=>
   string(1) "1"
   ["Visible"]=>
   string(1) "1"
   ["ID"]=>
   string(1) "1"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:43:19.520

如果您只返回一个字符串，请使用 .d 属性

```
 alert(data.d) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:40:04.210

```
echo json_encode("Values"=>$DatabaseEntity);

alert(data.Values); 
```

# javascript - 脸书上好看的日期

> ID：12706764
> 
> 赞同：0
> 
> 时间：2012-10-03T10:38:16.083
> 
> 标签：javascript, facebook-graph-api, datetime, momentjs

我想以一种很好的方式显示来自 fb 事件的日期。

我从 fb 获取事件字符串，然后我这样做：

```
var eventDate = eventToDisplay.start_date;

var temp = eventDate.split("T");

eventDate = temp[0].split("-");
eventDate = eventDate[1] + "/" + eventDate[2] + " " + eventDate[0];

var eventTime = temp[1].split("+");

var dateStringStart = "  " + eventDate + "    " + eventTime[0];

var start = moment(dateStringStart).format('LLL');

    var time = Ti.UI.createLabel({
    font:{
        fontSize : 16,
        fontWeight : 'bold'
        },
    color : '#eee',
    left : "40dp",
    top : "35dp",
    height : 'auto',
    width : 'auto',
    text : start
});
   Win.add(time); 
```

通过 moment.js 运行它，我得到显示为的日期：

2012 年 11 月 9 日晚上 8:00

这很好！

但我想放弃 2012

所以如果我尝试删除 eventDate[0]

它显示为：

11月9日 00-1 8:00 PM

那么我该如何松开 00-1 呢？

我只希望它显示为：

11 月 9 日晚上 8:00

我正在 Appcelerator Titanium 中构建它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:26:23.747

如果您使用的是 facebook graph api（您已经用 facebook-graph-api 标记了它，所以我认为是这种情况）您可以在 api 调用中指定日期格式。

来自 [ [https://developers.facebook.com/docs/reference/api/]：1](https://developers.facebook.com/docs/reference/api/)

> 您可以选择通过指定“date_format”查询参数来覆盖日期格式。接受的格式字符串与 php date 函数接受的格式字符串相同。例如， [https:](https://graph.facebook.com/platform/feed?date_format=U) //graph.facebook.com/platform/feed?date_format=U 返回平台页面的提要，带有 unixtime 格式的日期。

所以要获得 11 月 9 日晚上 8 点，您可以致电[https://graph.facebook.com/platform/feed?date_format=F](https://graph.facebook.com/platform/feed?date_format=F) jg:HA

# javascript - 如何开始使用 xampp 的 d3js 示例？

> ID：12706766
> 
> 赞同：3
> 
> 时间：2012-10-03T10:38:24.713
> 
> 标签：javascript, installation, xampp, d3.js

现代 javascript 库（如 protovis 和 d3js）可能提供的所有很酷的东西给我留下了深刻的印象。作为一名生态学家，我拥有大量非常适合这些高级可视化技术的数据。可悲的是，下载 d3js 库后我已经迷路了。:(

[我在http://d3js.org](http://d3js.org)上读到必须设置一个本地主机才能运行示例。我在 Windows 7 系统上安装了 xampp 系统。localhost/xampp 告诉我一切都很好，但我仍然无法运行大多数示例。例如，“albers”只显示一个灰色框。示例“bar”确实可以正常运行（我想）。

谁能给我一个提示如何在 Windows 7 上正确启动？非常感谢教程的链接。如果我找到正确的方法，我将为世界制作我自己的教程。

我知道我的问题听起来很无聊和不愉快，因为它绝对是初学者的问题，对此我感到非常抱歉，但我真的很想使用 d3js，因为我有很多好的（？）想法。

谢谢你！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-03T13:20:31.500

d3.js 是一个**客户端**JavaScript 库，因此您不需要任何后台服务器。开始使用静态文件。这是一个简短的例子：

索引.html：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My first d3.js</title>
    <link href="style.css" rel="stylesheet">
  </head>

  <body>
    <div id="mySVG"></div>
    <script src="http://d3js.org/d3.v2.js"></script>
    <script>
      var svg = d3.select("#mySVG")
        .append("svg")
        .attr("width", 200)
        .attr("height", 200)

      svg.append("text")
        .attr("x", 50)
        .attr("y", 50)
        .attr("class", "text")
        .text("d3.js is awesome")
    </script>
  </body> 
```

和 style.css 用于样式：

```
.text {
  fill: blue;
} 
```

在浏览器中打开`index.html`，您应该会看到一个蓝色文本，上面写着“d3.js is awesome”。更有用的教程是：

*   [http://alignedleft.com/tutorials/d3/](http://alignedleft.com/tutorials/d3/)
*   [http://christopheviau.com/d3_tutorial/](http://christopheviau.com/d3_tutorial/)
*   [http://www.recursion.org/d3-for-mere-mortals/](http://www.recursion.org/d3-for-mere-mortals/)
*   [http://www.janwillemtulp.com/2011/03/20/tutorial-introduction-to-d3/](http://www.janwillemtulp.com/2011/03/20/tutorial-introduction-to-d3/)

而且当然

*   [https://github.com/mbostock/d3/wiki/Tutorials](https://github.com/mbostock/d3/wiki/Tutorials)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T06:38:22.357

当您尝试在本地运行静态文件时，d3 示例库中的某些示例可能会在某些浏览器中产生错误。Mike 建议您在浏览示例时运行 python 的 simplehttpserver。

请参阅此处的说明： [https ://github.com/mbostock/d3/wiki](https://github.com/mbostock/d3/wiki)

```
python -m SimpleHTTPServer 8888 
```

# internet-explorer - selectivizr 不适用于 IE7 和 IE8 中的 nth-child(2)

> ID：12706777
> 
> 赞同：2
> 
> 时间：2012-10-03T10:39:04.137
> 
> 标签：internet-explorer, selectivizr

在 IE 开发人员工具中查看生成的 CSS 一个简单的规则，例如

```
.filter-dates .date-picker:nth-child(2)
{
    margin-left:200px;
} 
```

在 IE 中显示为

```
UNKNOWN
   margin-left:200px; 
```

我们使用最新的 JQuery 库并根据 Selectivizr 站点支持 nth-child。

有人知道我要去哪里错了吗？

谢谢， 雅克

# ssis - 无法在 SSIS 2012 中显示 Visual Studio Tools for Application 编辑器

> ID：12706780
> 
> 赞同：13
> 
> 时间：2012-10-03T10:39:11.247
> 
> 标签：ssis, sql-server-2012, vsta

当我单击 SSIS 2012 包中脚本任务的编辑脚本按钮时，

它不会打开脚本编辑器，而是显示：

> “无法显示应用程序编辑器的 Visual Studio 工具”
> 
> 无法加载文件或程序集“Microsoft.visualstudio.tools.applications.core version=10.0.0.0 ....”系统找不到指定的文件程序集。

我尝试了以下链接中提供的解决方案：

[http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/e5337b0c-7f70-4603-859e-fbc7d0cf1c37](http://social.msdn.microsoft.com/Forums/en-US/sqlintegrationservices/thread/e5337b0c-7f70-4603-859e-fbc7d0cf1c37)

[SSIS 脚本编辑器引发异常](https://stackoverflow.com/questions/10433791/ssis-script-editor-throws-an-exception)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T12:26:03.547

首先转到程序和功能并检查您是否安装了“Microsoft Visual Studio Tools for Applications x86 Runtime 3.0”。您很可能会在“Microsoft Visual Studio Tools for Applications x64 Runtime 3.0”下面看到这个

如果未安装，那么您遇到的问题与我相同。为了解决这个错误，我放入了我的 SQL Server 安装盘。然后去 redist->VSTA->runtime->x86 然后运行 ​​VSTA_RT30.msi

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T18:21:09.887

此链接中提到的解决方法解决了我的问题： [https ://connect.microsoft.com/SQLServer/feedback/details/776248/could-not-load-file-or-assembly-microsoft-visualstudio-tools-applications-core](https://connect.microsoft.com/SQLServer/feedback/details/776248/could-not-load-file-or-assembly-microsoft-visualstudio-tools-applications-core)

> x86 和 x64 运行时都必须安装，目前可能缺少一个或两个运行时，具体取决于 SQL Server 2012 安装的顺序。作为一种解决方法，检查控制面板 - 程序并确定缺少哪个组件（它应列为 Microsoft Visual Studio Tools for Applications x86 或 x64 Runtime 3.0）。您可以从安装盘手动安装组件，也可以从 \redist\VSTA\runtime\ 文件夹下载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-13T15:50:02.770

现在是 2021 年，搜索错误时，这是​​最热门的。对我使用 Visual Studio 2019 的解决方案是下载并安装“Visual Studio Tools for Applications 2019”

链接： [https ://www.microsoft.com/en-us/download/details.aspx?id=58317&WT.mc_id=DX_MVP4025064](https://www.microsoft.com/en-us/download/details.aspx?id=58317&WT.mc_id=DX_MVP4025064)

有趣的是，这在 Visual Studio 安装程序中没有作为选项提供。以上需要手动下载安装。

[![在此处输入图像描述](../Images/022bbc3d4b8b0184732bc277c5d6bb3f.png)](https://i.stack.imgur.com/wK0H2.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-09T14:54:01.913

到目前为止，SQL Server 2012 Service Pack 1 已经发布。尝试更新您的版本，然后，您甚至可以考虑将累积更新 1 放在它之上。

有关 CU1 的更多信息：http: [//blogs.msdn.com/b/sqlreleaseservices/archive/2012/11/21/cumulative-update-1-for-sql-server-2012-service-pack-1.aspx](http://blogs.msdn.com/b/sqlreleaseservices/archive/2012/11/21/cumulative-update-1-for-sql-server-2012-service-pack-1.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-07T17:09:09.077

转到 SQL Server 安装程序文件夹并安装这些 msi 文件

redist/VSTA/designtime/VSTA_DT30msi redist/VSTA/runtime/x64/VSTA_RT30.msi redist/VSTA/runtime/x86/VSTA_RT30.msi

# jquery - 带有描述的完整日历

> ID：12706786
> 
> 赞同：1
> 
> 时间：2012-10-03T10:39:22.870
> 
> 标签：jquery, jquery-plugins

我有一个 Fullcalender 的代码。我使用[了 Adam shaw 的完整日历插件](http://arshaw.com/fullcalendar/)。在那我只想为每个事件添加一些描述。但是当我使用[qtip](http://craigsworks.com/projects/qtip/)时。它给了我描述，但它只在悬停上。

我的代码是

```
 $(document).ready(function() {
  var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
       var y = date.getFullYear();
        $('#calendar').fullCalendar({
            header: {
                left: 'month, basicWeek, basicDay',
                center: 'title',
                right: 'today,prev, next',
            },
            //events: "Calendar.asmx/EventList",
            //defaultView: 'dayView',
            events: [
            {
                title: 'DIWALI',
                start: new Date(2012,09,2),
                description: 'Today\'s Diwali',
                id: 1
            },
            {
                title: 'Long Event',
                start: new Date(y, m, d - 5),
                end: new Date(y, m, 1),
                description: 'long description3',
                id: 2
            }],
            eventRender: function(event, element) {
                element.qtip({
                    content: event.description + '<br />' + event.start,
                    style: {
                        background: 'black',
                        color: '#FFFFFF'
                    },
                    position: {
                        corner: {
                            target: 'center',
                            tooltip: 'bottomMiddle'
                        }
                    }
                });
            }
        });
        }); 
```

我只想在显示页面上有描述。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T06:01:13.067

此[答案](https://stackoverflow.com/questions/5060955/automatically-show-qtip-jquery-plugin-tooltip-after-page-load)将帮助您获得问题的解决方案。

请参阅下面的答案。

# c# - WCF SSL 客户端证书错误

> ID：12706787
> 
> 赞同：0
> 
> 时间：2012-10-03T10:39:24.913
> 
> 标签：c#, wcf, ssl, windows-8

在我们当前的项目中，我们使用来自 .NET 4.0/MVC/WCF 客户端的 Tibco/Java Web 服务。我们正在使用两种方式的身份验证。我们的证书以正确的方式发送，Tibco 服务器发回他们的证书。

现在这个 al 在 Windows 2008 R2 中工作，使用 Visual Studio 2010/IIsExpress 运行 Web 应用程序。但是当在 Windows 8/Visual Studio 2012 上使用完全相同的代码时，我们会得到很多：

> 无法为具有权限的 SSL/TLS 安全通道建立信任关系

它曾经在 Windows 2012 中也能正常工作，但在没有触及我们的集成 (WCF) 代码的情况下，这首先发生在我的同事身上，然后也发生在我的机器上。

证书安装在与 Windows 2008 R2 机器相同的存储中，我们还看到证书正在被使用。

为了能够继续前进，我们将求助于我们的 B 计划，即重新使用 Visual Studio 2010/Windows 2008 R2。所以我希望其他人遇到同样的问题并解决它。所以问题是，可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:05:11.717

可能是您为您使用的 aspnet/networkservice/whatever 用户 AppPool 没有读取证书存储的权限？

[检查这篇文章](http://support.microsoft.com/default.aspx?scid=kb;EN-US;901183)

特别是“安装客户端证书并授予用户帐户访问权限”部分。

# javascript - 动画边框

> ID：12706790
> 
> 赞同：1
> 
> 时间：2012-10-03T10:39:51.823
> 
> 标签：javascript, jquery, html, css

我有这个 jquery 代码。

```
//this is the main javascript

$(document).ready(function(){

    $('nav.menu a').hover(
        function () {
            $('nav.menu').find(".current_item").removeClass("current_item");
            $(this).addClass("current_item");

        }, 
        function () {
            $(this).removeClass("current_item");
            $('nav.menu').find(".damenu").addClass("current_item")
        }
);

}); 
```

和这个 html 结构

```
<nav class="menu">
    <a href="home.html" class="current_item damenu">Home</a>
    <a href="gallery.html">Gallery</a>
    <a href="home.html">Portfolio</a>
    <a href="home.html">About</a>
    <a href="home.html">Contact</a>
</nav> 
```

这个CSS

```
.menu
{
background: 1px solid #00ffff;
width: 100%;
padding: 0px 0px 0px 10px;
}
.menu a
{
padding: 8px;
color: #0099ff;
font: bold 20px Archivo Narrow, Arial Rounded MT, Tahoma, Calibri, Asap, Arial,     Verdana, sans-serif;
text-decoration: none;
float: left;
margin-right: 8px;
text-shadow: 2px 1px 1px #ffffff;
border-top: 3px solid transparent;
border-bottom: 3px solid transparent;
}
.current_item /*, .menu a:hover*/
{
color: #C5F700 !important;
border-top: 3px solid #C5F700 !important;
border-bottom: 3px solid #C5F700 !important;
} 
```

如您所见，例程是这样的，当前菜单有一个类，每当用户将鼠标悬停在其中一个菜单上时，当前菜单的类就会被删除，并且“current_item”类会添加到当前悬停菜单中，并且在 mouseout 事件中，“current_item”类从当前悬停元素中删除，“current_item”类被添加回当前菜单，该菜单也有“damenu”类，您可以看到“current_item”类的工作“是添加顶部和底部边框，效果很好，但我想在鼠标悬停或鼠标悬停时在边框或“current_item”类中添加一些动画。

准确地说，我想在鼠标悬停或鼠标悬停事件中为边框或“current_item”类设置动画，而且，无论如何我可以将导航设置为中心吗？

我是开放的，想法，建议和建议。希望这里有人可以帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:47:43.637

你不能只[添加以下内容](http://jsbin.com/omijec/1/)吗`.current_item`？

```
-webkit-transition: .5s border-color, color ease;
-moz-transition: .5s border-color, color ease;
-ms-transition: .5s border-color, color ease;
-o-transition: .5s border-color, color ease;
transition: .5s border-color, color, ease; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:48:21.993

获取 JQuery 颜色动画插件，然后：

```
 $('#currentitem').hover(function(){
        (this).animate({borderColor:'#fff'});
    }, function(){
       (this).animate({borderColor:'#000'});
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:42:00.437

**您可以仅通过 css 为边框设置动画**

```
.menu
{
background: 1px solid #00ffff;
width: 100%;
padding: 0px 0px 0px 10px;
}
.menu a
{
padding: 8px;
color: #0099ff;
font: bold 20px Archivo Narrow, Arial Rounded MT, Tahoma, Calibri, Asap, Arial,     Verdana, sans-serif;
text-decoration: none;
float: left;
margin-right: 8px;
text-shadow: 2px 1px 1px #ffffff;
border-top: 3px solid transparent;
border-bottom: 3px solid transparent;
-webkit-transition: 1s all ease;
-moz-transition: 1s all ease;
-ms-transition: 1s all ease;
-o-transition: 1s all ease;
transition: 1s all ease;
}
.menu a.current_item, .menu a:hover
{
color: #C5F700 !important;
border-top: 3px solid #C5F700 ;
border-bottom: 3px solid #C5F700 ;
} 
```

# google-maps - 如何在 Jquery Mobile Gmap 插件中打开自定义 URL

> ID：12706791
> 
> 赞同：0
> 
> 时间：2012-10-03T10:39:51.637
> 
> 标签：google-maps, jquery-mobile, jquery-gmap3

我正在尝试为我们的城市创建一个免费的应用程序来显示公共交通路线信息。我市已将所有路线放在以下网址。

[https://maps.google.com/maps?q=http://www.myciti.org.za/IRT_services.kmz&hl=en&sll=-33.88029,18.50333&sspn=0.231158,0.308647&t=m&z=12](https://maps.google.com/maps?q=http://www.myciti.org.za/IRT_services.kmz&hl=en&sll=-33.88029,18.50333&sspn=0.231158,0.308647&t=m&z=12)

如何创建 Gmap 实例以显示此 URL 的内容？

当前，以下代码用于显示在特定标记上放大的地图：

 `````
 $('#map_canvas').gmap({ 'center': vars['lat'] + ',' + vars['lon'], 'zoom': 16, 'streetViewControl': false, 'mapTypeControl': false }).bind('init', function() {
        $('#map_canvas').gmap('addMarker', { 'foo': 'bar', 'position': vars['lat'] + ',' + vars['lon'] });
    }); 
````  `谢谢您的帮助！

问候

德文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:49:57.630

您是指每个城市的信息窗口吗？如果是这样，请尝试扩展使用（第 4 个选项）[http://gmap.nurtext.de/examples.html](http://gmap.nurtext.de/examples.html)``

# php - 尝试使用 php 在状态更新中标记朋友

> ID：12706801
> 
> 赞同：1
> 
> 时间：2012-10-03T10:40:25.610
> 
> 标签：php, facebook, facebook-graph-api

如果您在 Facebook 上发布状态更新或分享链接，则可以选择将您的朋友标记为“与您同在”。这与使用 @ 符号标记它们不同。

我首先获取好友列表，然后尝试添加“with”参数。使用 chrome web 开发者工具并没有提供太多关于 facebook 如何做到这一点的信息。

```
shuffle($friends);

        $with = array();

        for($i = 0; $i < 2; $i++)
        {
            if($i < count($friends))
                array_push($with, array("tag_uid" => $friends[$i]));
        }

        $fields = array('name'          => $status['title'],
                        'message'       => $status['message'],
                        'caption'       => $status['caption'],
                        'with' => json_encode($with)),
                        'description'   => $status['desc'],
                        'link'          => $url,
                        'picture'       => $status['img']);

        $result = HTTP_POST("https://graph.facebook.com/" . $account->id . "/feed?access_token=$access_token",  // full URL to query 
```

# php - 除了我列出的之外，还有哪些其他技术可以防止 SQL 注入和 XSS 攻击？

> ID：12706808
> 
> 赞同：0
> 
> 时间：2012-10-03T10:41:04.113
> 
> 标签：php, xss, sql-injection

> **可能重复：**
> [在 PHP 中防止 SQL 注入的最佳方法？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

我正在创建一个新闻站点，并且我已经写下了实现安全所需的清单。

用户+站点交互

1.  使用 html-entities 和 mysql_real_escape_string 清理所有 POST/GET 函数
2.  如果网站即将上线，请关闭、错误报告或自定义
3.  我不使用 cookie，只使用会话（因为会话不太容易受到攻击）
4.  关闭目录列表
5.  制作robot.txt 以防止索引不需要的文件
6.  对于密码，使用 salt + Md5
7.  仅通过获取 ip 和浏览信息使 ADMIN 站点可以从一台 PC 和一个浏览器访问，否则会引发 404 错误。

我已经在我的网站中实现了所有这些。我知道你们大多数人会说使用 PDO / Msqli 来清理，但我是 PHP 的初学者，我很难学习 PDO / Mysqli 或 OOP

所以，你能提供的任何其他东西都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:54:25.010

--> 使用 html-entities 和 mysql_real_escape_string 清理所有 POST/GET 函数

为什么选择 html 实体？您只需要它们以html 格式*显示*信息。不要在接收和存储信息时使用它。

另外： mysql_real_escape_string 仅适用于文本。如果您想接收一个整数，请执行以下操作：

```
$myInt = (int)$_POST["whatever"]; 
```

--> 如果网站即将上线，关闭，报错或自定义

是的，使用日志文件来存储它们并定期查看。

--> 我不使用 cookie，只使用会话（因为会话不太容易受到攻击）

您如何在没有 cookie 的情况下中继 PHPSESSID？我希望不在网址中。我猜你的意思是：我只使用 cookie 来存储 PHPSESSID。

安全性改进：为每个请求创建一个新的 sessionid。

--> 关闭目录列表

好的。

--> 制作robot.txt 以防止索引不需要的文件

好的，但敏感文件不应该在 webroot 中（例如，数据库凭据）

--> 对于密码，使用 salt + Md5

md5很弱。您可能想研究其他方式进行单向加密。

--> 只能通过获取 ip 和浏览信息使 ADMIN 站点可以从一台 PC 和一个浏览器访问，否则会抛出 404 错误。

那是一个好主意。

还有很多要补充的。大多数与您的逻辑有关。

例如：如果您的用户具有用户 ID，并且帖子具有发布 ID。您想将帖子存储在 tblpostings 中，同时存储用户 ID，这样您就知道是谁写的了。现在，如果您启用删除帖子，您必须以某种方式检查删除帖子的人是否也是所有者。这些事情很难适应简单的一般规则。编写代码时请注意。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:50:15.867

我会小心 robots.txt 文件，因为虽然它们应该阻止机器人索引某些位，但它们也会告诉人们您不希望他们查看的站点的部分。

不严格，PHP 和 XSS，但如果服务器在 linux 上，请禁用 root ssh 帐户并使用另一个。拥有特定于数据库的用户，因此如果一个用户受到威胁，其他数据库则不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:59:26.990

“对于密码，使用 salt + Md5”

比明文更好，但目前最著名的算法是 bcrypt，并在此处描述：

[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T05:39:15.430

SQLInjection 停止使用 mysql_real_escape_string 并开始使用准备好的语句/参数化查询。现在学习 PDO，它并不难，而且会帮助你从一开始就做好。

XSS 查看输出时的上下文转义。请参阅 OWASP XSS 预防备忘单。

在登录时发出一个新会话。不要通过 http 泄漏该会话。对登录用户使用 https 并在会话 cookie 上设置安全和 httpOnly 标志。

使用 bcrypt、scrypt 或 pbkdf2 进行密码散列。

正如其他人所说，不要将敏感文件放在不受保护的服务器上。Robots.txt 是黑客入门的好地方。

# asp.net-mvc - 服务层的单元测试方法

> ID：12706809
> 
> 赞同：1
> 
> 时间：2012-10-03T10:41:06.327
> 
> 标签：asp.net-mvc, unit-testing, moq, repository-pattern

我已经开始考虑在我的项目中围绕一些业务逻辑添加一些单元测试。

我想测试的第一个方法是我的服务层中的一个方法，它返回给定节点的子节点列表。

该方法如下所示：

```
public List<Guid> GetSubGroupNodes(string rootNode)
{
    List<Tree> tree = ssdsContext.Trees.ToList();
    Tree root = ssdsContext.Trees.Where(x => x.UserId == new Guid(rootNode)).FirstOrDefault();
    return GetChildNodeIds(root, tree);
} 

private List<Tree> GetChildNodes(Tree rootNode, List<Tree> tree)
{
    kids.Add(rootNode);
    foreach (Tree t in FindChilden(rootNode, tree))
    {
        GetChildNodes(t, tree);
    }
     return kids;
} 
```

我对这样的东西进行成像测试的方式是提供一个假的树结构，然后测试提供一个节点是否返回正确的子节点。

`ssdsContext`是一个`ObjectContext`。

我已经看到它可以为`ObjectContext` [如何在实体框架中模拟 ObjectContext 或 ObjectQuery<T> 进行提取和接口？](https://stackoverflow.com/questions/415432/how-to-mock-objectcontext-or-objectqueryt-in-entity-framework)但我也读过嘲笑 a`DBContext`是浪费时间[Unit Testing DbContext](https://stackoverflow.com/questions/6766478/unit-testing-dbcontext)。

我还读到，因为实体框架是存储库模式和工作单元的实现，这里是：[Generic Repository With EF 4.1 what is the point](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point)。

这让我有点困惑......是测试这样的方法来创建存储库层的唯一真正方法吗？甚至值得对这种方法进行单元测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:55:40.583

将 ObjectContext 类包装在一个 wrapperclass 中——为了好玩，我们称它为 ContextWrapper——它只公开你需要的东西。然后，您可以使用您的方法将这个（IContextWrapper）的接口注入到您的类中。包装器可以在没有附加到外部世界的钩子的情况下进行模拟。正如您所说，树结构很容易创建，并且可以从您的模拟对象中获取。从而使您的测试成为真正的单元测试，而不是一种集成测试。

# tomcat - 部署 Struts2 项目

> ID：12706813
> 
> 赞同：0
> 
> 时间：2012-10-03T10:41:24.830
> 
> 标签：tomcat, deployment, struts2

如何在 tomcat 中部署 struts2 Web 应用程序？我想避免 eclipse
部署环境。

我的项目是用 Eclipse IDE 创建的，我使用的是 MySQL 数据库和 Tomcat 服务器。
它可以从该环境成功部署。

我的意思是如何使用 apache tomcat 7 在 Web 服务器中托管 struts2 应用程序。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:58:00.100

您在 Eclipse 中创建了一个应用程序，并给出了**Run as -> Run on Server**。它工作正常。

现在您不想给**Run as-> Run on Server**，而是要单独运行 tomcat 并使用外部浏览器访问应用程序。

如果这是情景。解决方案可能是

1.  右键单击 Eclipse 中的项目
2.  导出 -> 战争文件
3.  将创建的 WAR 文件移动到 tomcat 部署文件夹（通常是 web 应用程序文件夹）。

如果您正在使用任何 JAR 文件，您可以通过两种方式包含它们。

1.  右键单击 -> 构建部件 -> 订购和导出：然后选择要与 WAR 文件捆绑的 JAR。所以，你的 WAR 可以在任何服务器上工作。

2.  双击服务器控制台中的服务器。**打开启动配置 -> 类路径 -> 添加外部 JAR**。现在您的服务器正在携带使您的 WAR 文件完全依赖于服务器的库

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T22:32:31.953

到目前为止发布的答案是正确的：您应该导出一个 War 文件并将其放在 Tomcat 的 webapps 文件夹中。然而，这个手动过程可能不是最好的解决方案，特别是如果你正在开发，所以我通常使用[Ant](http://ant.apache.org/)来自动化它。

# ruby - maven工件正则表达式

> ID：12706814
> 
> 赞同：3
> 
> 时间：2012-10-03T10:41:25.583
> 
> 标签：ruby, regex

我正在为我的项目创建一个 bom (http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html)。我的项目有很多依赖项......所以我创建了一个小红宝石脚本，它会为我生成 xml。但是当涉及到决定 artifactId 的正则表达式时，我做得不够好。假设我有以下 3 条路径：

*   /Users/buddy/Downloads/jboss-esb/client/hibernate-commons-annotations.jar
*   /Users/buddy/Downloads/jboss-esb/client/ejb3-persistence.jar
*   /Users/buddy/Downloads/jboss-esb/server/default/deploy/spring.esb/spring-core-3.0.6.RELEASE.jar

我正在尝试找到一个正则表达式，它只会返回我

*   hibernate-commons-注解
*   ejb3-持久性
*   弹簧芯

前面提到的路径在变量文件名中，我有这个正则表达式来确定版本和 artifactId（显然我有一些默认版本，以防文件名中没有版本）

```
@version = version
if temp_version = filename[/-([\d+{1,3}\.A-Z]+).jar/,1]
  @version = temp_version
end
@artifactId = filename[/.*\/([\w\d]+\-?[^\d^\-]*)\-?[\d+\.A-Z]*.jar/,1] 
```

但它不会在所有情况下都有效。

任何帮助使正则表达式在所有情况下都能正常工作，并且非常感谢简化版本的正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:53:14.507

这个正则表达式有效

```
.+\/(.+?)(-\d|.jar) 
```

[在此处](http://rubular.com/r/2C5lBPxQu2)进行测试，在组（第一个，可通过 访问`$1`）中查找您要查找的字符串。

编辑：

我假设任何版本都是文件名的一部分，并以减号和数字开头，因此如果正则表达式找到`-3` `-0`，文件字符串将终止，依此类推。

# android - 更新AndroidManifest.xml时ActivityThread.handleBindApplication崩溃，回滚还是崩溃

> ID：12706815
> 
> 赞同：0
> 
> 时间：2012-10-03T10:41:30.563
> 
> 标签：android, eclipse, crash

我在我的 AndroidManifest.xml 中收到关于此接收器的警告*导出接收器不需要权限：*

```
<receiver android:name="org.thieftracker.SmsReceiver" android:enabled="true">
    <intent-filter>
        <action android:name="android.provider.Telephony.SMS_RECEIVED" />               
         <action android:name="android.intent.action.ACTION_BATTERY_LOW"/>
         <action android:name="android.intent.action.ACTION_BATTERY_OKAY"/>                  
    </intent-filter>
</receiver> 
```

我理解这个问题，我通过改变第一行来解决它：

```
<receiver android:name="org.thieftracker.SmsReceiver" android:enabled="true" android:exported="false"> 
```

但它在调试启动时崩溃。我通过删除回滚`android:exported="false"` 但它仍然崩溃： `ActivityThread.handleBindApplication(ActivityThread$AppBindData) line: 4070`

我试图清理项目，它仍然崩溃。我唯一的解决方案是删除我的整个工作区并复制备份！
我猜它来自 Eclipse IDE。
任何想法 ？

**更新：**
找到了！
我忘记在我的 AndroidManifest (WAKE_LOCK) 中添加权限。我仍然不明白为什么在缺少权限时它曾经工作过。我猜它来自 AndroidManifest.xml 上的一些缓存/更新内容，
我也浪费了很多时间，因为我不知道如何使用 LogCat 和 DDMS 视图。关于这一点，我仍然不知道在哪里可以找到堆栈跟踪！
我把 bug 放回去了，我还在和 IDE 斗争，用魔法再次找到堆栈跟踪

```
java.lang.RuntimeException: Unable to create application org.thieftracker.ThiefTracker: java.lang.SecurityException: Neither user 10029 nor current process has android.permission.WAKE_LOCK 
```

我到底从哪里弄来的？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:47:55.943

我不确定试试这个：`<receiver android:name="org.thieftracker.SmsReceiver" android:enabled="true" android:exported="false">`

# mongodb - 在单个查询中阅读类别和文章数量

> ID：12706817
> 
> 赞同：1
> 
> 时间：2012-10-03T10:41:39.693
> 
> 标签：mongodb, mongoose, count, grouping

我在 MongoDb 中有一个数据库，其中包含两个集合：“类别”和“文章”。我在 NodeJs 上使用 Mongoose 连接到数据库并读取类别。我想在不发出额外请求/查询的情况下计算一个类别的文章数量，所以如果我能在数据库级别解决这个问题就完美了。

“类别”集合中的项目如下所示：

```
{
'_id' : ObjectId("..."),
'feed_id' : 1,
'name': 'Blog posts'
} 
```

“文章”集合中的项目如下所示：

```
{
'_id' : ObjectId("..."),
'feed_id' : 1,
'title': 'Article title',
'published' : '12/09/2012',
...
} 
```

因此类别和文章使用“feed_id”字段链接。

我想导出所有类别以及相应数量的文章：

```
{
'_id' : ObjectId("..."),
'feed_id' : 1,
'name': 'Blog posts',
'no_articles': 4
} 
```

我不确定我应该如何做到这一点：

1）**在类别集合中创建一个“no_articles”字段？**如果是，我希望在从文章集合中插入或删除文档时自动更新。

2)**阅读分类时将文章总结为'no_articles'？**

我读了一些关于 MapReduce 和 group 的东西，但不太明白是否可以将它们用于这个特定的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:49:48.113

这是传统关系数据库真正大放异彩的用例之一。

在 mongodb 中使用一个查询是不可能做到这一点的。您提到的“`no_articles`领域”是要走的路。这种方法的通用名称（无论如何，在 Rails 人中）是：**`Counter Cache Column`**. 我对 Mongoose 不是很熟悉，所以我不知道它是否会为您保留该字段。MongoDB 本身当然不会这样做。但是自己维护它并不是很多工作，你只需要准确。

我建议不要在阅读类别时计算文章。这是一个典型的[`N+1 query`](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)问题示例，计数器缓存列可以防止它发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T21:34:36.500

为什么不直接将类别存储在 post 文档中？由于您似乎正在为每个使用该类别的帖子创建新的类别文档（如使用 feed_id 的一对多链接所证明的那样），因此在帖子文档中存储一个类别数组可能是有意义的。

```
{
'_id' : ObjectId("..."),
'feed_id' : 1,
'title': 'Article title',
'published' : '12/09/2012',
...
categories : [ 'Blog Posts', 'Category 2' ]
} 
```

然后你可以做一个

```
db.articles.find({categories : 'Blog Posts' }) 
```

要查找具有特定类别的所有文章，您可以添加一个 .count() 来获取计数

使用这些 feed_ids 加入是 MongoDB 的诅咒。您不能跨集合加入，因此您必须非规范化或将所有内容放在一个大集合中。Mongo 的设计目的是让您对所有内容进行非规范化。

如果这似乎不是解决问题的正确方法，那么您可能更适合使用 RDBMS。

# jquery - 通过 JQUERY 显示 AJAX JSON 结果 - 单独的字段？

> ID：12706824
> 
> 赞同：0
> 
> 时间：2012-10-03T10:42:55.673
> 
> 标签：jquery, mysql, json

我使用 JQUERY 从 MYSQL 中提取 JSON 结果。然后我在循环中显示结果以填充 UL 列表。

```
var auto_refresh = setInterval(
function ()
{
url='<?php echo base_url(); ?>index.php/chat/comments/';

$.getJSON(url , function(data) {
var tbl_body = "";
$.each(data, function() {
    var tbl_row = "";
    $.each(this, function(k , v) {
        tbl_row += ""+v+"";
    })
    tbl_body += "<li>"+tbl_row+"</li>";                 
})
$("#table1").html(tbl_body);
});

}, 1000); 
```

这将结果显示为

```
CommentName 
```

我想要斜体的名称和纯文本的注释，例如

评论 -*名称*

我将如何将名称与评论分开，以便将其设为斜体？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:46:55.317

您可能可以这样做：

```
$.each(data, function() {
    tbl_body += data[0] + ' <i>' + data[1] + '</i>';                 
}) 
```

或者

```
$.each(data, function() {
    tbl_body += data.comment + ' <i>' + data.name + '</i>';                 
}) 
```

但是如果没有 JSON 结构就很难猜测（可能是一个数组而不是一个对象，因为使用普通对象会有迭代顺序的风险）。

# python - Python xml 编组

> ID：12706829
> 
> 赞同：6
> 
> 时间：2012-10-03T10:43:22.737
> 
> 标签：python, xml, serialization, marshalling

我正在学习 Python，我的背景是 Java EE。我以前使用过 JAXB，基本上可以在其中定义一个常规类，在其中添加一些注释，然后使用 JAXB 将对象编组为 xml。这意味着我不关心创建根元素、节点等，而只是编写 Java 类并在这里和那里注释它。Python有这样的东西吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-03T10:59:37.150

这里有几个：

*   [lxml.objectify](http://lxml.de/objectify.html)

*   [gnosis.xml.objecity](http://pypi.python.org/pypi/Gnosis%20Utilities)

*   [pyxser](https://github.com/dmw/pyxser)看起来很酷

*   [Pickle to XML](http://code.activestate.com/recipes/355487/) - 使用 Python 的 pickle 和 xml.dom.minidom

*   [pyxml](http://pyxml.sourceforge.net/topics/) - `from xml import marshal`（可能有问题）

*   [阿马拉](http://wiki.xml3k.org/Amara)可能值得研究。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T11:57:39.693

[PyXB](http://pyxb.sourceforge.net/)似乎是最接近 JAXB 的东西，虽然我还没有使用它。我目前使用 lxml 并发现它运行良好。阿马拉很有希望，但似乎停滞不前。

# java - 当我尝试将休眠与检票口一起使用时出错

> ID：12706830
> 
> 赞同：0
> 
> 时间：2012-10-03T10:43:24.227
> 
> 标签：java, hibernate, wicket

我正在使用有关简单休眠实现的[本教程](http://mkyong.com/hibernate/maven-3-hibernate-3-6-oracle-11g-example-xml-mapping/)，并且仅从控制台就可以正常工作，但是当我尝试通过单击 Web 按钮将这个示例与 wicket 一起使用时，我遇到了错误

```
WicketMessage: Can't instantiate page using constructor public com.mycompany.app.StartPage(org.apache.wicket.PageParameters) and argument 

Root cause:

java.lang.NoSuchMethodError: org.slf4j.helpers.MessageFormatter.format(Ljava/lang/String;Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/String;
     at org.slf4j.impl.Log4jLoggerAdapter.debug(Log4jLoggerAdapter.java:246)
     at org.hibernate.type.BasicTypeRegistry.register(BasicTypeRegistry.java:147)
     at org.hibernate.type.BasicTypeRegistry.<init>(BasicTypeRegistry.java:50)
     at org.hibernate.type.TypeResolver.<init>(TypeResolver.java:59)
     at org.hibernate.cfg.Configuration.<init>(Configuration.java:250)
     at org.hibernate.cfg.Configuration.<init>(Configuration.java:302)
     at com.mycompany.util.HibernateUtil.buildSessionFactory(HibernateUtil.java:13)
     at com.mycompany.util.HibernateUtil.<clinit>(HibernateUtil.java:8)
     at com.mycompany.app.StartPage$3.<init>(StartPage.java:132)
     at com.mycompany.app.StartPage.<init>(StartPage.java:131)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:188)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:65)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:298)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1250)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1329)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1436)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)
     at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:319)
     at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
     at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
     at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
     at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
     at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
     at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
     at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
     at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
     at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
     at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
     at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
     at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
     at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
     at java.lang.Thread.run(Thread.java:680)

Complete stack:

org.apache.wicket.WicketRuntimeException: Can't instantiate page using constructor public com.mycompany.app.StartPage(org.apache.wicket.PageParameters) and argument 
     at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:212)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:65)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:298)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1250)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1329)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1436)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)

java.lang.reflect.InvocationTargetException
     at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
     at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:188)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:65)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:298)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1250)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1329)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1436)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486)

java.lang.ExceptionInInitializerError
     at com.mycompany.util.HibernateUtil.buildSessionFactory(HibernateUtil.java:17)
     at com.mycompany.util.HibernateUtil.<clinit>(HibernateUtil.java:8)
     at com.mycompany.app.StartPage$3.<init>(StartPage.java:132)
     at com.mycompany.app.StartPage.<init>(StartPage.java:131)
     at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
     at org.apache.wicket.session.DefaultPageFactory.createPage(DefaultPageFactory.java:188)
     at org.apache.wicket.session.DefaultPageFactory.newPage(DefaultPageFactory.java:65)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.newPage(BookmarkablePageRequestTarget.java:298)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.getPage(BookmarkablePageRequestTarget.java:320)
     at org.apache.wicket.request.target.component.BookmarkablePageRequestTarget.processEvents(BookmarkablePageRequestTarget.java:234)
     at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:92)
     at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1250)
     at org.apache.wicket.RequestCycle.step(RequestCycle.java:1329)
     at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1436)
     at org.apache.wicket.RequestCycle.request(RequestCycle.java:545)
     at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:486) 
```

这是我的 StartPage.html

```
<html>
<head>
    <title>Start Page</title>
</head>
<body>
    <form wicket:id="form">
        <p>
            <input class="button" type="submit" value="load from DB" />
        </p>
    </form>
</body>
</html> 
```

起始页.java

```
Form<?> form = new Form<Void>("form") {
    @Override
    protected void onSubmit() {
        SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();
        Session session = sessionFactory.openSession();
    }
};
add(form); 
```

休眠.cfg.xml

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-configuration PUBLIC
"-//Hibernate/Hibernate Configuration DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="hibernate.connection.driver_class">org.postgresql.Driver</property>
        <property name="hibernate.connection.url">jdbc:postgresql://localhost:5432/test_db</property>
        <property name="hibernate.connection.username">postgres</property>
        <property name="hibernate.connection.password">pass</property>
        <property name="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</property>
        <property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property>
        <property name="show_sql">true</property>
        <property name="current_session_context_class">thread</property>
        <mapping resource="com/mycompany/app/DBUser.hbm.xml"></mapping>
    </session-factory>
</hibernate-configuration> 
```

添加此内容时发生错误 `SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:47:43.513

有什么例外？我注意到的第一件事是您在每个表单提交请求上都创建了 SessionFactory。会话工厂应该只在应用程序初始化时创建一次，并且在每次请求时您都应该只获取休眠会话。

查看教程中的 HibernateUtil 类。它为 SessionFactory 创建单例类。

# wpf - 如果内容已折叠，则折叠 ContentControl

> ID：12706831
> 
> 赞同：1
> 
> 时间：2012-10-03T10:43:30.700
> 
> 标签：wpf, xaml, binding, datatemplate

我有一个 ContentControl，它的样式包含边框和其他视觉装饰。我希望这些装饰在内容折叠时消失，所以我想在这种情况下我必须将 ContentControl 的可见性设置为折叠。我的 ContentControl 装饰采用了这种风格：

```
<Style x:Key="DecoratedItem1" TargetType="{x:Type c:DecoratedItem}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type c:DecoratedItem}">
                <StackPanel Orientation="Horizontal">
                    <Border BorderBrush="Black" BorderThickness="2" CornerRadius="2">
                        <StackPanel Orientation="Horizontal">
                            <Image Source="/Images/file.png"/>
                            <ContentPresenter Name="wContent"/>
                        </StackPanel>
                    </Border>
                </StackPanel>
                <ControlTemplate.Triggers>
                    <DataTrigger Binding="{Binding ElementName=wContent, Path=Content.Visibility}" Value="Collapsed">
                        <DataTrigger.Setters>
                            <Setter Property="Visibility" Value="Collapsed"/>
                        </DataTrigger.Setters>
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

DecoratedItem 类只是 ContentControl 的子类，带有与此问题无关的附加 DependencyProperties，我只想指出，我已经有一个子类，如果需要，我可以向其中添加代码。

这在 ContentControl 的内容是 UIElement 时有效，但是如果内容是由 DataTemplate 生成的，它会抱怨无法找到 Visibility 属性。

```
<!-- works -->
<c:DecoratedItem Style="{StaticResource DecoratedItem1}">
    <TextBlock Text="ABC" Visibility="Collapsed"/>
</c:DecoratedItem>

<!-- doesn't work -->
<c:DecoratedItem Style="{StaticResource DecoratedItem1}" Content="ABC">
    <c:DecoratedItem.Resources>
        <DataTemplate DataType="{x:Type clr:String}">
            <TextBlock Text="{Binding}" Visibility="Collapsed"/>
        </DataTemplate>
    </c:DecoratedItem.Resources>
</c:DecoratedItem> 
```

调试输出窗口中显示的第二种情况的错误是：

```
System.Windows.Data Error: 40 : BindingExpression path error:
'Visibility' property not found on 'object' ''String' (HashCode=-885832486)'.
BindingExpression:Path=Content.Visibility;
DataItem='ContentPresenter' (Name='wContent');
target element is 'DecoratedItem' (Name='');
target property is 'NoTarget' (type 'Object') 
```

我理解为什么会发生这种情况，但不知道如何修复我的风格以按照我的意愿工作。如有必要，我不介意将帮助代码添加到 DecoratedItem 子类。知道如何解决这个问题吗？

**[编辑 1]**

关于提议的答案的更多解释：

我不能强制 Content 始终是 UIElement。毕竟这是一个模型视图设计，当然我简化了很多例子。在实际项目中，内容是从 DataContext 中选择的一个模型，它可以是几种不同的类型，DataTemplate 为该模型构建一个表示。一些 DataTemplates 决定（取决于模型状态）没有任何东西可以呈现并将 Visibility 切换为 Collapsed。我想将该信息传播到装饰容器。上面的例子真的只是提出了问题而不是动机，对不起。

**[编辑 2]**

不知道更多地了解该模型将如何帮助解决问题，但我们开始吧。Content 字段中的数据没有太多共同点，因为它可以是很多东西，这个 DecoratedItem 应该是可重用的，以便为某些表单上显示的项目提供通用的视觉样式。内容可以是工作项之类的东西，如果它们被禁用，则 DataTemplate 会折叠它们；其他类型的内容可能不完整并被折叠。当然，其他种类永远不会崩溃。

但是请注意，数据模型与问题并没有太大关系，这仍然是如何绑定扩展内容元素的可见性（在可能以可绑定方式通过子类公开它之后）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:03:00.710

有几种方法可以描述问题所在。在第一个工作示例中：

```
<c:DecoratedItem Style="{StaticResource DecoratedItem1}">
    <TextBlock Text="ABC" Visibility="Collapsed"/>
</c:DecoratedItem> 
```

ContentControl 的 Content 属性设置为 TextBlock，它是具有 Visibility 属性的 UIElement。（这假设您没有将派生类 DecoratedItem 的 ContentPropertyAttribute 更改为 Content 以外的内容）。因此，您的 DataTrigger 绑定可以正确评估：

```
 <DataTrigger Binding="{Binding ElementName=wContent, Path=Content.Visibility}" Value="Collapsed"> 
```

将工作案例与失败案例进行对比：

```
<c:DecoratedItem Style="{StaticResource DecoratedItem1}" Content="ABC"> 
```

其中 Content 属性设置为 String 的实例，该实例没有 Visibility 属性。

描述问题的另一种方法是注意，即使您为 Content 是 String 的情况提供 DataTemplate，Content 仍然是 String 并且仍然没有 Visibility 属性。换句话说，Content由 DataTemplate*生成*的说法是不正确的——您的 DataTemplate 只是告诉控件如何显示 String 类型的 Content。

您的问题的一般答案是，如果您希望 DecoratedItem1 中的 DataTrigger 与 Content.Visibility 的路径绑定，您需要确保放入其中的内容始终是 UIElement。相反，如果您希望能够将任何类型的内容放入控件中，则需要触发其他内容。

严格来说，您的问题的具体答案取决于您更广泛的意图（特别是如何设置/修改控件内容的可见性）。几种可能性：

*   如果您真的想要表单的 DataTrigger 绑定“Content.Visibility”，请确保 Content 始终是 UIElement。例如，使用样式的工作形式，然后将 TextBlock 的 Text 绑定到适当的东西。但是，这不太适合将派生控件作为 ContentControl 的想法，所以...

*   您的 DataTrigger 可能会绑定到其他东西。从问题的形成方式来看，似乎还有一些其他属性或代码隐藏将控制各种内容实体是否可见。

*   最后，您可以向 TextBlock 添加一个额外的 DataTrigger。此 DataTrigger 将根据其自身的可见性设置其父级的可见性。然后，将样式 DecoratedItem1 中的 DataTrigger 与路径“Visibility”而不是“Content.Visibility”绑定，本质上是手动将 Visibilities 链接在一起。

**编辑**

根据您对如何使用它的描述，听起来您需要考虑[可视化树](http://msdn.microsoft.com/en-us/library/ms753391.aspx#two_trees)。您可以将 DecoratedItem 控件扩充为具有以下功能：如果其所有作为 UIElments 的可视子项都具有 Collapsed 的可见性（或者如果它没有可视子项），那么它也是 Collapsed（或者，任何对所需功能有意义的逻辑就其视觉子项的可见性而言）。您需要从代码中使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper.aspx)类——特别是 GetChildrenCount 和 GetChild 方法。您还可以在 DecoratedItem 类中覆盖 OnVisualChildrenChanged（同时仍调用基类方法），以便您可以获取可见子项的 UIElement.IsVisibleChanged 事件。

# ruby-on-rails - Rails where 两个表的子句

> ID：12706834
> 
> 赞同：13
> 
> 时间：2012-10-03T10:43:40.450
> 
> 标签：ruby-on-rails, ruby, where-clause

我在rails应用程序中有以下模型

```
category => company => store 
```

店铺有`belongs_to`公司，公司有`belongs_to`品类关系。现在我想在商店对象上使用 where 方法来检索同一类别中的所有商店。

我想要这样的东西

```
@stores.nearbys(5).where("stores.company.category_id = xxx") 
```

有人可以给我一个提示吗

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-03T11:14:01.560

尝试使用连接表上的 where 连接：

```
@stores.nearbys(5).joins(:company).where("companies.category_id = xxx") 
```

**编辑：**

要获取商店的类别，您首先必须将类别方法委托给其公司：

```
class Store < ActiveRecord::Base
 belongs_to :company

 delegate :category, :to => :company
end 
```

现在只需在查询中调用该方法：

```
@stores.nearbys(5).joins(:company).where("companies.category_id = ?", self.company.id) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-03T10:48:39.393

`where`支持嵌套哈希。

```
@stores.nearbys(5).where(:company => { :category_id => @category.id }, joins: company) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-03T11:05:04.243

你可以试试这个

```
 @category = Category.find xxx

 @store = @category.company.stores 
```

# sql-server - SQL Server 安装命令行

> ID：12706837
> 
> 赞同：0
> 
> 时间：2012-10-03T10:44:09.553
> 
> 标签：sql-server, visual-studio, deployment, setup-deployment

我正在尝试制作一个安装项目，该项目使用密码安装 SQL 实例。我的要求是我希望以静默模式完全安装，但实例名称除外。有什么方法可以在我的命令行中提供任何命令，允许用户输入他自己的实例名称？我尝试了 2005 年的 /qn、/qb 和 2008 年的 /qs，但它们显示了所有对话框。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-16T16:19:06.760

在没有 SQL Server 安装窗口的情况下安装的参数`/Q`是`/QS`. 请参阅[此处的 Microsoft 文档。](https://docs.microsoft.com/en-us/sql/database-engine/install-windows/install-sql-server-from-the-command-prompt?view=sql-server-ver15)

要提供实例名称，您需要该`/INSTANCENAME`参数。下面是一个如何在没有 SQL Server 窗口的情况下通过命令提示符安装 SQL Server 的示例：

```
SETUP.exe /Q /IACCEPTSQLSERVERLICENSETERMS /ACTION=install /FEATURES=SQL /INSTANCENAME=YourInstanceNameHere /SECURITYMODE=SQL /SAPWD="SQL Admin Password Here" /SQLSYSADMINACCOUNTS=""NT Authority\System"" /ADDCURRENTUSERASSQLADMIN=False 
```

SETUP.exe = SQL Server 安装文件

/Q = 安静安装

/IACCEPTSQLSERVERLICENSETERMS = 需要安静安装

/ACTION = 告诉安装程序安装 SQL

/FEATURES = 告诉安装程序要安装哪些功能

/INSTANCENAME = 您希望 SQL Server 实例的名称

/SECURITYMODE = 告诉 SQL 使用 SQL Server 身份验证而不是 Windows 身份验证

/SAPWD = 创建 SQL Server 登录密码

/SQLSYSADMINACCOUNTS = 使用指定的管理员用户安装 SQL

/ADDCURRENTUSERASSQLADMIN = 自我解释

这是一个从应用程序运行进程的 C# 示例，注意：像命令提示符一样，您的应用程序需要以管理员身份运行：

```
 System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
        startInfo.CreateNoWindow = true;
        startInfo.UseShellExecute = false;
        startInfo.RedirectStandardError = true;
        startInfo.RedirectStandardOutput = true;
        startInfo.FileName = "path to SETUP.exe file";
        startInfo.Arguments = "the above mentioned arguments";

        System.Diagnostics.Process processObj = new System.Diagnostics.Process();
        processObj.StartInfo = startInfo;
        processObj.Start();                

        do
        {
            //refresh the process
            processObj.Refresh();

        } while (!processObj.WaitForExit(1000)); 
```

在 SQL Server 2019 和 Visual Studio 2013 上测试。

# android - Android（Phonegap）在旋转时崩溃

> ID：12706840
> 
> 赞同：2
> 
> 时间：2012-10-03T10:44:16.850
> 
> 标签：android, cordova

我用谷歌搜索了一个活动元素需要`android:configChanges="orientation|screenSize|keyboardHidden"`PhoneGap 的值来刷新屏幕尺寸。但随后 Eclipse 吐出有一个错误：`error: Error: String types not allowed (at 'configChanges' with value 'orientation|screenSize|keyboardHidden').`. 那么我的清单配置有什么问题？这是我的整个 Android 清单配置：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.agilitus"
    android:versionCode="1"
    android:versionName="1.0" android:installLocation="internalOnly">

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
    />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:debuggable="true" android:testOnly="false">
        <activity
            android:name=".IndexActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:configChanges="orientation|screenSize|keyboardHidden">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如您所见，我安装了 3.2 以上的所有版本 ![我的 Android SDK 管理器窗口](../Images/38a5ab8e7d2bdfc50e9a7d90e3cc0c2b.png)

仍然出现错误`As you can see I installed all versions above 3.2` ![我的清单文件](../Images/1b09d33c457304069527e0ca7ece95f5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:11:35.320

试试这个，只需复制粘贴此代码。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.agilitus"
    android:versionCode="1"
    android:versionName="1.0" android:installLocation="internalOnly">

    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
    />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" android:debuggable="true" android:testOnly="false">
        <activity
            android:name=".IndexActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden" 
            android:screenOrientation="portrait">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:00:14.043

尝试反转 screenSize 和 keyboardHidden。

[在 SDK](http://developer.android.com/guide/topics/manifest/activity-element.html#config)版本 13中添加了 screenSize 。如果您尝试在 Android 3.1 或更低版本上启动您的应用程序，它将无法工作，因为 SDK 找不到 screenSize 值。

顺便说一句，[Phonegap 入门指南](http://docs.phonegap.com/en/2.1.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)建议 configChanges 使用此值：

```
android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" 
```

# db2 - IBM DB2 9.7，如何在 SQL 中显式定义当前模式

> ID：12706843
> 
> 赞同：1
> 
> 时间：2012-10-03T10:44:30.070
> 
> 标签：db2, schema

我想强制当前模式与当前用户相同。似乎可以使用以下语句在 DB2 9.7 中设置当前模式：SET SCHEMA '...'

如果要将架构设置为与用户相同，那么是：SET SCHEMA USER？

然后在调用存储过程时如何引用该模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:41:36.177

您可以设置架构...

```
 .-CURRENT-.          .-=-.
>>-SET--+---------+--SCHEMA--+---+--+-schema-name-----+--------><
                                    +-USER------------+
                                    +-SESSION_USER----+
                                    +-SYSTEM_USER-----+
                                    +-CURRENT_USER----+
                                    +-host-variable---+
                                    '-string-constant-' 
```

[http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001016.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001016.htm)

但是对于 SP，您必须使用 SET PATH ...

```
 .-CURRENT-.          .-=-.
>>-SET--+-+---------+--PATH-+--+---+---------------------------->
        '-CURRENT_PATH------'

   .-,------------------------.
   V                          |
>----+-schema-name----------+-+--------------------------------><
     +-SYSTEM PATH----------+
     +-USER-----------------+
     +-+-CURRENT PATH-+-----+
     | '-CURRENT_PATH-'     |
     +-CURRENT PACKAGE PATH-+
     +-host-variable--------+
     '-string-constant------' 
```

[http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001014.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/admin/r0001014.htm)

# php - 从 MYSQL 查询填充文本框

> ID：12706844
> 
> 赞同：0
> 
> 时间：2012-10-03T10:44:33.243
> 
> 标签：php, mysql

我需要查询一个数据库，然后用结果填充一个文本框输入。

我正在努力

致电日期：

```
 <td>
      <?php 
         $selectedSPK=$_POST['SPKSelect'];
        $assigned = $_POST['Sales_Exec'];
        $date = $_POST['DateSelect'];

if ($selectedSPK)

{
    $Call1query = "SELECT  Call1 FROM Data WHERE SPKCustNo  = '$selectedSPK' ";

$Call1result = mysql_query($Call1query);

 while( $row = mysql_fetch_array($Call1result) ){
    $Call1 = $row["$Call1Result"];

    }

}
?>
    <input type="text" name="Call1" id="Call1" value="<?php echo( htmlspecialchars( $Call1) ); ?>"/></td> 
```

但是什么也没说，我哪里出错了，文本输入似乎很难填充！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:47:32.563

改为使用

```
$Call1 = $row["Call1"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:47:08.237

代替

```
$Call1 = $row["$Call1"]; 
```

和

```
$Call1 = $row["Call1"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:48:46.087

问题在这里改变

```
$Call1 = $row["$Call1Result"]; 
```

到

```
$Call1 = $row['Call1'];   //here column name comes not variable name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T11:00:00.893

试试这样

```
<td>
  <?php 
     $selectedSPK=$_POST['SPKSelect'];
    $assigned = $_POST['Sales_Exec'];
    $date = $_POST['DateSelect'];

if ($selectedSPK)

{
 $Call1query = "SELECT  Call1 FROM Data WHERE SPKCustNo  = '$selectedSPK' ";

$Call1result = mysql_query($Call1query);

 while( $row = mysql_fetch_array($Call1result) ){
$Call1 = $row["Call1"];

}

}?>

<input type="text" name="Call1" id="Call1" value="<?php echo( htmlspecialchars( $Call1) ); ?>"/></td> 
```

# ruby - 在 Ruby PageObject 中获取对象计数

> ID：12706845
> 
> 赞同：0
> 
> 时间：2012-10-03T10:44:34.873
> 
> 标签：ruby, webdriver, page-object-gem

我有一个页面，它是其他几个元素的列表。我想为此页面创建页面对象，并能够计算这些列表对象并通过它的计数器对对象执行一些操作。

所以现在我有一个类，看起来像这样

```
class Feed
  attr_accessor :instance
  include PageObject

  link(:all_feed_items, :xpath => "//*[@id='newsList']/div/div/div[1]/a")
end 
```

因此，例如，第一个提要项具有类似 xpath

```
//*[@id='newsList']/div/div/div[1]/a[1] 
```

第二：

```
//*[@id='newsList']/div/div/div[1]/a[2] 
```

ETC

如何通过 Page-object 中的编号获取具有相似 xpath 的项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:01:53.023

也许这样的事情会起作用：

```
class Feed
  attr_accessor :instance
  include PageObject

  select_list(:news_list, :id => 'newsList')
  link_elements(:all_feed_items) do | page |
    news_list_element.div_element.div_element.div_element.link_elements
  end
end 
```

这将生成一个方法，该方法将返回数组中的所有链接。

# android - 缩放图库中的图像

> ID：12706848
> 
> 赞同：0
> 
> 时间：2012-10-03T10:44:48.867
> 
> 标签：android, gallery, zooming

我正在开发我在画廊中显示所有图像的应用程序。现在我想为**画廊中当前显示的图像提供缩放效果**。现在我正在使用延迟适配器进行延迟加载，因为图像来自 Web 服务。我正在使用**惰性适配器和 Imageloader**从[这里](https://github.com/thest1/LazyList/tree/master/src/com/fedorvlasov/lazylist)在图库中显示图像 请帮助。我这两天头疼。提前致谢。

我已经实现了 TouchImageView.Java，但是这段代码只提供了缩放效果，但不能滑动图库。

```
public class TouchImageView extends ImageView {
Matrix matrix = new Matrix();

// We can be in one of these 3 states
static final int NONE = 0;
static final int DRAG = 1;
static final int ZOOM = 2;
int mode = NONE;

// Remember some things for zooming
PointF last = new PointF();
PointF start = new PointF();
float minScale = 1f;
float maxScale = 3f;
float[] m;

float redundantXSpace, redundantYSpace;

float width, height;
static final int CLICK = 3;
float saveScale = 1f;
float right, bottom, origWidth, origHeight, bmWidth, bmHeight;

ScaleGestureDetector mScaleDetector;

Context context;

public TouchImageView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}
public TouchImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
    sharedConstructing(context);
}

private void sharedConstructing(Context context) {
    super.setClickable(true);
    this.context = context;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    matrix.setTranslate(1f, 1f);
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);

    setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
              mScaleDetector.onTouchEvent(event);

                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                PointF curr = new PointF(event.getX(), event.getY());

                switch (event.getAction()) {
                    case MotionEvent.ACTION_DOWN:
                        last.set(event.getX(), event.getY());
                        start.set(last);
                        mode = DRAG;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if (mode == DRAG) {
                            float deltaX = curr.x - last.x;
                            float deltaY = curr.y - last.y;
                            float scaleWidth = Math.round(origWidth * saveScale);
                            float scaleHeight = Math.round(origHeight * saveScale);
                            if (scaleWidth < width) {
                                deltaX = 0;
                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom); 
                            } else if (scaleHeight < height) {
                                deltaY = 0;
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);
                            } else {
                                if (x + deltaX > 0)
                                    deltaX = -x;
                                else if (x + deltaX < -right)
                                    deltaX = -(x + right);

                                if (y + deltaY > 0)
                                    deltaY = -y;
                                else if (y + deltaY < -bottom)
                                    deltaY = -(y + bottom);
                            }
                            matrix.postTranslate(deltaX, deltaY);
                            last.set(curr.x, curr.y);
                        }
                        break;

                    case MotionEvent.ACTION_UP:
                        mode = NONE;
                        int xDiff = (int) Math.abs(curr.x - start.x);
                        int yDiff = (int) Math.abs(curr.y - start.y);
                        if (xDiff < CLICK && yDiff < CLICK)
                            performClick();
                        break;

                    case MotionEvent.ACTION_POINTER_UP:
                        mode = NONE;
                        break;
                }
                setImageMatrix(matrix);
                invalidate();
                return true; // indicate event was handled
        }

    });
}

@Override
public void setImageBitmap(Bitmap bm) { 
    super.setImageBitmap(bm);
    if(bm != null) {
        bmWidth = bm.getWidth();
        bmHeight = bm.getHeight();
    }
}

public void setMaxZoom(float x)
{
    maxScale = x;
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScaleBegin(ScaleGestureDetector detector) {
        mode = ZOOM;
        return true;
    }

    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        float mScaleFactor = (float)Math.min(Math.max(.95f, detector.getScaleFactor()), 1.05);
        float origScale = saveScale;
        saveScale *= mScaleFactor;
        if (saveScale > maxScale) {
            saveScale = maxScale;
            mScaleFactor = maxScale / origScale;
        } else if (saveScale < minScale) {
            saveScale = minScale;
            mScaleFactor = minScale / origScale;
        }
        right = width * saveScale - width - (2 * redundantXSpace * saveScale);
        bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
        if (origWidth * saveScale <= width || origHeight * saveScale <= height) {
            matrix.postScale(mScaleFactor, mScaleFactor, width / 2, height / 2);
            if (mScaleFactor < 1) {
                matrix.getValues(m);
                float x = m[Matrix.MTRANS_X];
                float y = m[Matrix.MTRANS_Y];
                if (mScaleFactor < 1) {
                    if (Math.round(origWidth * saveScale) < width) {
                        if (y < -bottom)
                            matrix.postTranslate(0, -(y + bottom));
                        else if (y > 0)
                            matrix.postTranslate(0, -y);
                    } else {
                        if (x < -right) 
                            matrix.postTranslate(-(x + right), 0);
                        else if (x > 0) 
                            matrix.postTranslate(-x, 0);
                    }
                }
            }
        } else {
            matrix.postScale(mScaleFactor, mScaleFactor, detector.getFocusX(), detector.getFocusY());
            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            if (mScaleFactor < 1) {
                if (x < -right) 
                    matrix.postTranslate(-(x + right), 0);
                else if (x > 0) 
                    matrix.postTranslate(-x, 0);
                if (y < -bottom)
                    matrix.postTranslate(0, -(y + bottom));
                else if (y > 0)
                    matrix.postTranslate(0, -y);
            }
        }
        return true;

    }
}

@Override
protected void onMeasure (int widthMeasureSpec, int heightMeasureSpec)
{
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    width = MeasureSpec.getSize(widthMeasureSpec);
    height = MeasureSpec.getSize(heightMeasureSpec);
    //Fit to screen.
    float scale;
    float scaleX =  (float)width / (float)bmWidth;
    float scaleY = (float)height / (float)bmHeight;
    scale = Math.min(scaleX, scaleY);
    matrix.setScale(scale, scale);
    setImageMatrix(matrix);
    saveScale = 1f;

    // Center the image
    redundantYSpace = (float)height - (scale * (float)bmHeight) ;
    redundantXSpace = (float)width - (scale * (float)bmWidth);
    redundantYSpace /= (float)2;
    redundantXSpace /= (float)2;

    matrix.postTranslate(redundantXSpace, redundantYSpace);

    origWidth = width - 2 * redundantXSpace;
    origHeight = height - 2 * redundantYSpace;
    right = width * saveScale - width - (2 * redundantXSpace * saveScale);
    bottom = height * saveScale - height - (2 * redundantYSpace * saveScale);
    setImageMatrix(matrix);
} 
```

这是一个用于显示画廊图像的图像视图

```
<com.util.TouchImageView
    android:id="@+id/image"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:padding="10dip"
    android:scaleType="center"
    android:src="@drawable/popupimage"
    android:contentDescription="@string/image_desc" /> 
```

有了这个，我将缩放图像并且滑动效果仅在画廊的剩余部分发生。如果图像很大，那么画廊没有空白空间并且它不会滑动画廊。

我怎样才能检测到滑动效果？另一件事是如何将 src 设置为自定义 TouchImageView。因为我在惰性 ImageLoader 中使用了这个 imageview。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:57:02.570

使用 View 。如果你得到图像然后使用**Path**，**Matrix**你可以通过使用 getX 和 getY 值并相应地编码来增加它的 X 和 Y 。所以也[检查](https://stackoverflow.com/questions/6069592/how-to-zoom-selected-image-in-gallery-in-android://)这个链接希望它应该工作但 View 是你可以使用的最佳选择

# html - 如何让负边距正常工作？

> ID：12706849
> 
> 赞同：0
> 
> 时间：2012-10-03T10:45:01.290
> 
> 标签：html, css

这是我的[网站](http://speakingwithpictures.com/about)。

我试图让黑色 div 脱离父 div 并跨越浏览器的宽度。

我正在尝试以负边距来做到这一点。

像这样

```
.aboutTop {
    background-color: black;
    width: 100%;
    height: 600px;
    position: relative;
    margin-left: -100px;
    margin-right: -100px;
} 
```

注意：我已经尝试`margin-left: -100%;`使用上面的内容来查看出现了什么问题。

但是，margin-right 不起作用。

它只是将框向左移动 100 像素。

为什么是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:49:23.963

使用 margin-right 属性很有趣，当您左对齐时，它会在右侧创建空间而不是向右移动。在回答了您之前的相关问题后，我必须说，只需增加宽度以适应屏幕，而不是添加负右边距。您将框放在左角，现在增加宽度，并使其适合页面。

这是你必须做的。拿起整个分区并将其移出包含其宽度 USE 的父级：

```
#yourdiv{
position:absolute;
top:200px;
left:0;
background:black;
width:100%;
height:200px;

} 
```

用最简单的方法做...而不是乱来。把它从那个该死的父 div 中拿出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:56:18.197

*   您将宽度设置为 100%（所以这是父级的 100%）
*   你说要在两边突破父宽度！
    **这是相互矛盾的**

左边距正在按预期工作，而右边距不是因为达到了 100% 的限制！

删除宽度：100%；你可以走了！

[编辑]
上面没有解决浏览器问题的 100% 宽度
Mayby 那可能用一些 javascript 吗？

```
var screenwidth = (window.innerWidth > 0) ? window.innerWidth : screen.width; 
```

然后像

```
document.getElementById('aboutTop').style.width = screenwidth; 
```

这需要您将 class='aboutTop' 更改为 id='aboutTop'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:01:52.840

删除`margin-right`并调整它`margin-left`。

# javascript - 视口参数键“最大比例：1.0”无法识别和忽略

> ID：12706850
> 
> 赞同：0
> 
> 时间：2012-10-03T10:45:08.940
> 
> 标签：javascript, ruby-on-rails, iframe

我在 haml 视图中有一个 iframe。我只想根据内容的高度调整它的大小。

在 index.html.haml 的顶部，我有：

```
:javascript
   $(document).ready(function(){
      document.getElementById('doc').style.height =     
      document.getElementById('doc').contentWindow.document.body.scrollHeight + "px";
   })

%iframe{id: "doc", src: "https://docs.google.com/document/d/10Kc15lbqAcbIgkN5SsqZCXTIY2UZvbDS1DrwhzOdT1Y/edit", align: "middle"} 
```

当页面加载时，我有以下错误：

```
Viewport argument key "minimum-scale:1.0" not recognized and ignored. 
Viewport argument key "maximum-scale:1.0" not recognized and ignored. 
```

这个

```
document.getElementById('doc').style.height 
```

返回 150 像素

这个

```
document.getElementById('doc').contentWindow.document.body.scrollHeight + "px" 
```

返回

```
Unnsafe JavaScript attempt to access frame with URL https://docs.google.com/document/d/10Kc15lbqAcbIgkN5SsqZCXTIY2UZvbDS1DrwhzOdT1Y/edit from frame with URL http://localhost:3000/projects/1/specifications/4\. Domains, protocols and ports must match.
TypeError: Cannot read property 'body' of undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:45:12.570

我只是使用了一个用于移动设备的 javascript 包含来处理设置页面高度。您可以包含 js/css 以根据横向/纵向视图更改高度

```
 :javascript
  var viewport = $('meta[name=viewport]').attr("your selector");
  $(window).bind( 'orientationchange', function(e){
    if ($.event.special.orientationchange.orientation() == "portrait") {
      $(this).setAttribute("your selector", "height=device-height, initial-scale=1.0");
    } else {
      //Do Whatever in landscape mode
      $(this).setAttribute("your selector", "width=device-width, initial-scale=1.0, maximum-scale=1.0");
    }
  }); 
```

# ios - 相机预览不填满屏幕

> ID：12706851
> 
> 赞同：2
> 
> 时间：2012-10-03T10:45:14.610
> 
> 标签：ios, ipad, avfoundation, ios6

这就是我在 iPad3 中以横向模式设置相机预览的方式

```
- (void)viewDidAppear:(BOOL)animated 
```

{

```
AVCaptureSession *session = [[AVCaptureSession alloc] init];
session.sessionPreset = AVCaptureSessionPreset640x480;

CALayer *viewLayer = self.vImagePreview.layer;

NSLog(@"viewLayer = %@", viewLayer);

AVCaptureVideoPreviewLayer *captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];

captureVideoPreviewLayer.frame = self.vImagePreview.bounds;
[self.vImagePreview.layer addSublayer:captureVideoPreviewLayer];

AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];

NSError *error = nil;
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error];
if (!input) {
    // Handle the error appropriately.
    NSLog(@"ERROR: trying to open camera: %@", error);
}
[session addInput:input];

stillImageOutput = [[AVCaptureStillImageOutput alloc] init];
NSDictionary *outputSettings = [[NSDictionary alloc] initWithObjectsAndKeys: AVVideoCodecJPEG, AVVideoCodecKey, nil];
[stillImageOutput setOutputSettings:outputSettings];

[session addOutput:stillImageOutput];

[session startRunning]; 
```

}

在情节提要中，我将视图设置为填满整个屏幕，但最终看起来像这样：

![在此处输入图像描述](../Images/edaf2c0d2612ca856aaf2227208926ed.png)

此外，图像也旋转了 90º 度。如何更改此设置，以便让相机预览充满整个屏幕？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T14:18:18.447

旋转图层：

```
 switch (self.interfaceOrientation)
    {
     case UIInterfaceOrientationLandscapeRight:
       [captureVideoPreviewLayer setAffineTransform:CGAffineTransformMakeRotation(-M_PI / 2)];
       break;
     case UIInterfaceOrientationLandscapeLeft:
       [captureVideoPreviewLayer setAffineTransform:CGAffineTransformMakeRotation(M_PI / 2)];
       break;
    }

[self.vImagePreview.layer addSublayer:captureVideoPreviewLayer]; 
```

# xamarin.android - 在 Mono 中使用 JNI 访问 Java 库

> ID：12706852
> 
> 赞同：0
> 
> 时间：2012-10-03T10:45:26.030
> 
> 标签：xamarin.android, urbanairship.com, jnienv

我正在为 Android 开发一个使用 mono 的应用程序，并且一直在努力让推送通知正常工作，我正在使用 Urban Airship。

到目前为止，我已经能够调用 TakeOff() 和 EnablePush() 并且我的应用程序已成功注册，请参见以下代码：

```
 //_____________________________
 // Get the airship config class
    IntPtr ip_airshipConfigOptions = JNIEnv.FindClass("com/urbanairship/AirshipConfigOptions");

   if (ip_airshipConfigOptions == IntPtr.Zero)
   {
         throw new InvalidOperationException("Counldn't find java class !");
   }

                //__________________________________________________
                // Get the loadDefaults method from the config class
                IntPtr methodId = JNIEnv.GetStaticMethodID(ip_airshipConfigOptions, "loadDefaultOptions", "(Landroid/content/Context;)Lcom/urbanairship/AirshipConfigOptions;");

                if (methodId == IntPtr.Zero)
                {
                    throw new InvalidOperationException("Couldn't find java class !");
                }

                //________________________________________________________________
                // Call the loadDefaultOptions method passing in this app instance
                var methodPtr = JNIEnv.CallStaticObjectMethod(ip_airshipConfigOptions, methodId, new JValue(this));

                //________________________
                // Get the UAirship class
                IntPtr ip_uairship = JNIEnv.FindClass("com/urbanairship/UAirship");

                if (ip_uairship == IntPtr.Zero)
                {
                    throw new InvalidOperationException("Couldn't find java class !");
                }

                //___________________________________________
                // Get takeOff method with configoption param
                IntPtr methodId2 = JNIEnv.GetStaticMethodID(ip_uairship, "takeOff", "(Landroid/app/Application;Lcom/urbanairship/AirshipConfigOptions;)V");

                //______________________________________________
                // Get takeOff method without configoption param
                //IntPtr methodId3 = JNIEnv.GetStaticMethodID(ip_uairship, "takeOff", "(Landroid/app/Application;)V");

                //___________________________________________________________________________________________
                // Call UAirship.takeOff(this, options). Not sure if these parameters are specified correctly 
                JNIEnv.CallStaticVoidMethod(ip_uairship, methodId2, new JValue(this), new JValue(methodPtr));

                //________________________________________
                // Enable Push in Urban Airship Pushmanager     
                IntPtr ip_pushmanager = JNIEnv.FindClass("com/urbanairship/push/PushManager");
                IntPtr ip_enablePush = JNIEnv.GetStaticMethodID(ip_pushmanager, "enablePush", "()V");
                JNIEnv.CallStaticVoidMethod(ip_pushmanager, ip_enablePush); 
```

我现在需要调用 PushManager.shared().setIntentReciever(myClass) 但我似乎无法访问 shared() 类或 setIntentReciever 方法。我尝试了各种组合来尝试访问该方法，但不断收到类/方法未找到异常。

```
//IntPtr ip_setReciver = JNIEnv.GetStaticMethodID(ip_PushManager, "shared().setIntentReceiver", "(Landroid/app/Class)V"); 
```

对此的任何帮助表示赞赏！我确信它可以用一行来解决，我想我只是在语法上遗漏了一些东西。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:01:57.107

解决了这个问题，通过 JNI 调用 setIntentReceiver 见下面的代码：

```
//__________________________
// Get the PushManager class
IntPtr ip_Test = JNIEnv.FindClass("com/urbanairship/push/PushManager");

//_____________________
// Get the class object
IntPtr ip_class = JNIEnv.GetObjectClass(ip_Test);

//_________________________________
// Get the setIntentReciever method
IntPtr ip_setIntent = JNIEnv.GetMethodID(ip_Test, "setIntentReceiver", "(Ljava/lang/Class;)V");

//_________________________________________________
// Create a new jValue from the IntentRecieverClass
JValue val = new JValue(reciever.Class);

                //______________________________________________________________________________________
// Set the intent reciever by calling the setIntentReciever method passing in the jValue
JNIEnv.CallStaticVoidMethod(ip_class, ip_setIntent, val); 
```

# spring - Spring - 用一个抛出异常的类实例化一个 bean

> ID：12706857
> 
> 赞同：3
> 
> 时间：2012-10-03T10:45:34.647
> 
> 标签：spring

我试图实例化一个构造函数可以抛出异常的bean。我不能修改这个类（由外部团队提供）。

```
<bean id="myClass" class="myClass" /> 
```

myClass 构造函数抛出异常。

我一直在考虑用单例模式扩展这个类，这是我想要的行为（确保只实例化 MyClass 的一个实例）。

错误信息 ：

> 嵌套异常是 org.springframework.beans.factory.BeanCreationException：在类路径资源 [.../spring_applicationContext.xml] 中定义名称为“myClass”的 bean 创建时出错：bean 的实例化失败；嵌套异常是 org.springframework.beans.BeanInstantiationException：无法实例化 bean 类 [myClass]：构造函数抛出异常；嵌套异常是 java.lang.ExceptionInInitializerError

提前感谢您的回答

我认为问题来自于我的构造函数抛出异常的事实。

**我的问题是：使用 Spring，是否可以使用可能引发异常的构造函数来实例化 bean？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:00:15.277

如果 bean 配置文件中没有指定 bean 范围，则默认为单例。你的 bean`myClass`是一个单例，你不需要做更多的事情。
[春季文档](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s04.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:00:10.357

Spring bean 默认是单例的。

您应该提供更多的堆栈跟踪 - 您所显示的表明问题不是 myClass ，而是`ClassPathXmlApplicationContext`引发异常的构造函数 - 原因通常在堆栈跟踪的后面出现。

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-06T06:24:45.113

根据堆栈跟踪，在创建类“myClass”的对象时，静态块或变量中似乎存在意外错误。

# git - 访问远程 Git 存储库的 URL

> ID：12706858
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:45:42.057
> 
> 标签：git, version-control

我刚刚在我们的服务器上使用[http://windows.github.com/安装了 Git。](http://windows.github.com/)

它似乎安装正确。我想知道我是否可以通过某个 url 访问服务器的 Git？虽然我安装的那个没有给我任何 URL，但它只是为存储库创建了一个文件夹，没有别的。

我想从网络中的其他 PC 访问它。我还需要在客户端系统上安装 Git 吗？它是如何工作的？

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:55:49.340

GitHub for Windows 是访问 GitHub 存储库的客户端，而不是服务器。有几个可用的应用程序充当服务器，例如 Gerrit、GitBlit 等，它们也应该在 Windows 上工作，因为它们是基于 Java 的（我敢肯定 GitBlit，因为我在 Windows 上使用过它）。他们还提供用户管理等。

但是，您也可以只使用 Windows 共享来访问服务器上的存储库，但如果您有多个用户或想要对存储库应用访问限制，我不建议您这样做。

当然，您还必须在客户端系统中安装 Git。根据您的需要和操作系统等，有可用的命令行客户端 (http://msysgit.github.com/) 或一些 Gui 客户端，如 GitExtensions 或 SmartGit（商业）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:54:41.983

[和你的其他问题](https://stackoverflow.com/questions/12706719/create-user-access-rules-github-for-windows/)一样。

[GitHub for Windows](http://windows.github.com/)是 Windows 的 GitHub 客户端，它不是 Windows 的 Git 安装程序。

您安装了一个客户端，可帮助您管理、提交、推送和拉取 GitHub 托管的 Git 存储库。

如果你想在你的机器上安装 Git，请转到[git-scm](http://git-scm.com/)。如果你想安装一个 git 存储库托管，事情会变得有点复杂，因为你想在 Windows 上这样做。我认为没有任何现有项目旨在在 Windows 上运行。

如果您可以使用不同的操作系统，那么[Gitolite](http://sitaramc.github.com/gitolite/)是最著名的项目之一。

如果您更喜欢托管解决方案，有多种替代方案，例如[GitHub](http://github.com)、[BitBucket](http://bitbucket.com)、[CodeBase](http://www.codebasehq.com/)等等。

# internet-explorer - dojo1.7 Enhancedgrid在IE中分配新存储时不刷新

> ID：12706859
> 
> 赞同：0
> 
> 时间：2012-10-03T10:45:44.217
> 
> 标签：internet-explorer, dojo, grid, refresh, store

我正在做dojo1.7。我有一个 EnhancedGrid，需要用最新数据刷新。

> > var gridStore = new dojo.data.ItemFileWriteStore({ url:'', data:result, urlPreventCache: false });

```
 grid.store=gridStore;
                grid._refresh(); 
```

我正在以所需格式获取一些数据

var result = { "identifier": "id",
"items": [] //jsonobject };

上面的代码在 Firefox 上运行良好，但是在 IE 上我得到一个错误'null is null or not an object'。我不确定 IE 出了什么问题。dojo1.7有没有其他方法可以改变store？
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:12:37.727

看起来像 JSON 格式问题。您能否发布从服务器发送的完整 JSON 数据或检查 JSON 中的任何错误。

您可以尝试刷新或更改商店 URL 的另一种方法是：

1）最初将空商店分配给网格

2）在运行时，执行`dijit.byId('grid').store.url= 'someurl';`

3) 执行`dijit.byId('grid').store.save();dijit.byId('grid').store.fetch({query:{id: '*'}});`

希望有帮助。

# c# - 编程图像比较

> ID：12706865
> 
> 赞同：0
> 
> 时间：2012-10-03T10:46:20.063
> 
> 标签：c#, gdi+, gdi

我尝试比较 2 张图像。为此，我使用 2 个 PreentScreens 一个接一个地做（它是相同的）。当我使用像素比较来比较这个屏幕时：

```
public static CompareResult Compare(Bitmap bmp1, Bitmap bmp2)
{
    CompareResult cr = CompareResult.ciCompareOk;

    if (bmp1.Size != bmp2.Size)
    {
        cr = CompareResult.ciSizeMismatch;
    }
    else
    {
        for (int x = 0; x < bmp1.Width 
             && cr == CompareResult.ciCompareOk; x++)
        {
            for (int y = 0; y < bmp1.Height 
                         && cr == CompareResult.ciCompareOk; y++)
            {
                if (bmp1.GetPixel(x, y) != bmp2.GetPixel(x, y))
                    cr = CompareResult.ciPixelMismatch;
            }
        }
    }
    return cr;
} 
```

我得到正确的结果 - 比较是相同的，但它需要很多时间，当我尝试散列这个位图并比较它的值时 - 我得到错误的结果。当我将图像与自身进行比较时 - 一切正常。有什么问题？这是哈希比较的代码：

```
public enum CompareResult
        {
            ciCompareOk,
            ciPixelMismatch,
            ciSizeMismatch
        };

        public static CompareResult Compare(Bitmap bmp1, Bitmap bmp2)
        {
            CompareResult cr = CompareResult.ciCompareOk;

            //Test to see if we have the same size of image
            if (bmp1.Size != bmp2.Size)
            {
                cr = CompareResult.ciSizeMismatch;
            }
            else
            {
                //Convert each image to a byte array
                System.Drawing.ImageConverter ic = 
                       new System.Drawing.ImageConverter();
                byte[] btImage1 = new byte[1];
                btImage1 = (byte[])ic.ConvertTo(bmp1, btImage1.GetType());
                byte[] btImage2 = new byte[1];
                btImage2 = (byte[])ic.ConvertTo(bmp2, btImage2.GetType());

                //Compute a hash for each image
                SHA256Managed shaM = new SHA256Managed();
                byte[] hash1 = shaM.ComputeHash(btImage1);
                byte[] hash2 = shaM.ComputeHash(btImage2);

                //Compare the hash values
                for (int i = 0; i < hash1.Length && i < hash2.Length 
                                  && cr == CompareResult.ciCompareOk; i++)
                {
                    if (hash1[i] != hash2[i])
                        cr = CompareResult.ciPixelMismatch;
                }
            }
            return cr;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:56:19.633

[如何将图像对象与 C# .NET 进行比较](https://stackoverflow.com/questions/3384967/how-to-compare-image-objects-with-c-sharp-net)的可能重复项？其中包含示例代码。

另一个有用的链接是Dominic Green 的[这篇](http://blogs.msdn.com/b/domgreen/archive/2009/09/06/comparing-two-images-in-c.aspx)博文。代码稍微小一些，使用 Base64 散列而不是 SHA256 散列。这明显更快，但您应该知道比较图像不是一项轻松的操作。

但回到问题本身，你有多确定这两个图像是平等的？两个图像之间可能存在细微差别吗？您的鼠标光标移动了，时钟显示更新了，...

# iphone - for循环内的延迟 - iPhone

> ID：12706866
> 
> 赞同：0
> 
> 时间：2012-10-03T10:46:25.117
> 
> 标签：iphone

我正在尝试在 iphone 应用程序的 for 循环中设置延迟。基本上我会有一个带有几个动作的 for 循环，我希望每个动作之间有 1 秒的延迟：

for循环{动作1，延迟1秒，动作2，延迟1秒，动作3，延迟1秒}

我将如何编码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:51:07.630

```
for (loop) {

    [self action1];
    [self performSelector:@selector(action2) withObject:nil afterDelay:1.0];
    [self performSelector:@selector(action3) withObject:nil afterDelay:1.0];
} 
```

希望这就是你要找的！！

**编辑**

试试这个..它将完成运行当前方法并移动到下一个。

```
for (loop) {

    [self performSelectorOnMainThread:@selector(action1) withObject:nil waitUntilDone:YES];
    [self performSelectorOnMainThread:@selector(action2) withObject:nil waitUntilDone:YES];
    [self performSelectorOnMainThread:@selector(action3) withObject:nil waitUntilDone:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:51:48.303

这不涉及 for 循环，但会采用一系列操作并以增加的延迟执行它们。

```
NSArray *selectorStrings = @[ @"action1", @"action2", @"action3" ];
[selectorStrings enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    SEL selector = NSSelectorFromString((NSString *)obj);
    NSTimeInterval delay = (NSTimeInterval)idx;
    [self performSelector:selector withObjet:nil afterDelay:delay];
}]; 
```

希望这可以帮助！如果您有任何问题，请告诉我。

# php - 在 php 中将 .pdf 转换为 xml

> ID：12706867
> 
> 赞同：0
> 
> 时间：2012-10-03T10:46:29.360
> 
> 标签：php

在谷歌搜索了很多时间后，我仍然找不到合适的答案如何在 php 中将 .pdf 转换为 xml。有人可以用一些代码或库帮助我做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:41:32.390

也许base64_encode它并放入XML发送到你想要的任何地方？请注意，base64 编码的数据比原始数据多占用大约 33% 的空间。

[http://php.net/manual/en/function.base64-encode.php](http://php.net/manual/en/function.base64-encode.php)

# html - Z 索引不适用，位置已经是相对/绝对的

> ID：12706868
> 
> 赞同：0
> 
> 时间：2012-10-03T10:46:31.390
> 
> 标签：html, css, z-index, css-position

我有一个工具提示，它基本上不起作用。我做了一些搜索，通常的反应是你没有添加你的职位，但是我有这些，我真的很难过。

问题是在下面的现场演示中，左侧图标的工具提示不会在右侧内容的顶部，所以我看不到它。

代码主要在这里；

```
a.icon {
    position: relative;
    text-decoration: none;

    }

a.icon .tooltip {
    -webkit-transition: opacity 0.5s ease 0.2s, left 0.5s ease 0.2s;
    -moz-transition: opacity 0.5 ease 0.2s, left 0.5s ease 0.2s;
    -o-transition: opacity 0.5 ease 0.2s, left 0.5s ease 0.2s;
    transition: opacity 0.5 ease 0.2s, left 0.5s ease 0.2s;
    opacity: 0;
    font-size: 11px;
    color: #FFFFFF;
    background:url('../images/tooltip.png') no-repeat bottom center;
    position:absolute;
    height: 40px;
    line-height: 50px;
    left: 100px;
    text-align:center;
    padding-left:10px;
    width: 110px;
    display: block;
    top: 24px;
    z-index: 1000;
    }

a.icon:hover .tooltip {
    opacity: 1.0;
top:24px;

    } 
```

这是删除了 lorem 的 HTML；

```
<div id="icons">
<a href="info page" class="icon" id="info"><span class="tooltip">About Me</span>
<a href="portfolio page" class="icon" id="portfolio"><span                                            class="tooltip">Portfolio</span></a>
<a href="mailto:" class="icon" id="email"><span    class="tooltip">Mail</span></a>
<a href="?userinfo" class="icon" id="skype"><span     class="tooltip">Skype</span> </a>
<a href="" class="icon" id="twitter"><span class="tooltip">Twitter</span></a><!-- Holds the icons for the site -->
</div>
<div id="content">
raesent at quam velit,
</div> 
```

有跨度类引用工具提示，但这个文本框不会让我将它们添加为代码。

简而言之，它不起作用。我确实有这个例子：

抱歉，如果浏览代码很痛苦，我是新手，刚开始我的第一个投资组合，我还没有组织或评论太多。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:49:52.507

……………………………………………………………………………………………………………………………………

您好，现在定义您的`#content` **职位**和`z-index`

像这样

```
#content{
position:relative;
z-index:-1;
} 
```

## **或**第二个选项

```
#icons{
position: relative;
    z-index: 2;
} 
```

* * *

**用于不透明度**

**写这个 CSS**

```
#info:hover, #portfolio:hover, #email:hover, #skype:hover, #twitter:hover{
opacity:1;
} 
```

# c# - 使用自定义属性 XAML WPF 动态设置内容属性

> ID：12706869
> 
> 赞同：2
> 
> 时间：2012-10-03T10:46:32.447
> 
> 标签：c#, wpf, xaml

我正在为触摸屏应用程序创建一个屏幕键盘，其中 shift 切换整个键盘上的大写和小写按钮。

c# 中的代码正在工作，但我不知道如何根据我的自定义属性更改按钮的内容值和命令参数，该自定义属性在 xaml 中更改为 bool 值。

```
<local:KeyboardButton Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Command="{Binding AddText}" Content ="{Binding local:KeyboardButton.SelectedKey}" LowerCaseKey="`" UpperCasekey="¬"/> 
```

这是我目前为 XAML 中的每个按钮所拥有的（忽略内容，因为我在这里一直在抓住稻草），想法是 shift 键将在 LowerCaseKey 和 UpperCaseKey 属性之间切换 Content 和 CommandParameter。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:39:08.247

也许您可以通过样式和触发器来实现您的目标：

```
 <Button Grid.Row="0" Grid.Column="2" Grid.ColumnSpan="2" Command="{Binding AddText}" x:Name="AButton">
        <Button.Resources>
            <Style TargetType="Button">
                <Setter Property="Content" Value="{Binding Path=LowerCaseKey, ElementName=AButton}" />
                <Setter Property="CommandParameter" Value="{Binding Path=LowerCaseKey, ElementName=AButton}" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding IsUpperCase}" Value="true">
                        <Setter Property="Content" Value="{Binding Path=UpperCasekey, ElementName=AButton}" />
                        <Setter Property="CommandParameter" Value="{Binding Path=UpperCasekey, ElementName=AButton}" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Button.Resources>
    </Button> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:07:17.070

自定义控件：

```
using System.Windows;
using System.Windows.Controls;

namespace Test
{
    public class KeyboardButton : Button
    {
        public static readonly DependencyProperty SelectedKeyProperty = DependencyProperty.Register("SelectedKey", typeof(string),
            typeof(KeyboardButton), new FrameworkPropertyMetadata(string.Empty, FrameworkPropertyMetadataOptions.AffectsArrange));

        public static readonly DependencyProperty IsUpperCaseProperty = DependencyProperty.Register("IsUpperCase", typeof(bool),
            typeof(KeyboardButton), new FrameworkPropertyMetadata(false));

        static KeyboardButton()
        {
            DefaultStyleKeyProperty.OverrideMetadata(typeof(KeyboardButton), new FrameworkPropertyMetadata(typeof(KeyboardButton)));
        }

        public string SelectedKey
        {
            get { return (string)GetValue(SelectedKeyProperty); }
            set { SetValue(SelectedKeyProperty, value); }
        }

        public string LowerCaseKey
        {
            get;
            set;
        }

        public string UpperCaseKey
        {
            get;
            set;
        }

        public bool IsUpperCase
        {
            get { return (bool)GetValue(IsUpperCaseProperty); }
            set { SetValue(IsUpperCaseProperty, value); }
        }
    }
} 
```

Themes\Generic.xaml（主题文件夹中的文件 Generic.xaml）

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Test">

    <Style TargetType="{x:Type local:KeyboardButton}" BasedOn="{StaticResource {x:Type Button}}"> 
        <Setter Property="Content" Value="{Binding LowerCaseKey, Mode=OneTime, RelativeSource={RelativeSource Self}}"/>
        <Style.Triggers>
            <Trigger Property="IsUpperCase" Value="true">
                <Setter Property="Content" Value="{Binding UpperCaseKey, Mode=OneTime, RelativeSource={RelativeSource Self}}"/>
            </Trigger>
        </Style.Triggers>
    </Style>
</ResourceDictionary> 
```

不要在 AssemblyInfo.cs 中忘记这一点：

```
[assembly: ThemeInfo(
    ResourceDictionaryLocation.None, //where theme specific resource dictionaries are located
    //(used if a resource is not found in the page, 
    // or application resource dictionaries)
    ResourceDictionaryLocation.SourceAssembly //where the generic resource dictionary is located
    //(used if a resource is not found in the page, 
    // app, or any theme specific resource dictionaries)
)] 
```

# android - 如何在Android中更改开关的文本颜色

> ID：12706874
> 
> 赞同：18
> 
> 时间：2012-10-03T10:46:50.183
> 
> 标签：android, switch-statement, android-4.0-ice-cream-sandwich

我正在创建一个使用 Android 4.0 的应用程序。我想知道是否可以更改开关中文本的文本颜色。

我试过设置文本颜色，但它不起作用。

有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-29T09:26:05.340

您必须使用`android:switchTextAppearance`属性，例如：

```
android:switchTextAppearance="@style/SwitchTextAppearance" 
```

和风格：

```
<style name="SwitchTextAppearance" parent="@android:style/TextAppearance.Holo.Small">
    <item name="android:textColor">@color/my_switch_color</item>
</style> 
```

您也可以在代码中执行此操作，也可以使用上述样式：

```
mySwitch.setSwitchTextAppearance(getActivity(), R.style.SwitchTextAppearance); 
```

* * *

...对于`setTextColor`and `Switch`- 如果您的`SwitchTextAppearance`样式不提供`textColor`

你可以在`Switch`源代码中检查它`setSwitchTextAppearance`：

```
 ColorStateList colors;
    int ts;

    colors = appearance.getColorStateList(com.android.internal.R.styleable.
            TextAppearance_textColor);
    if (colors != null) {
        mTextColors = colors;
    } else {
        // If no color set in TextAppearance, default to the view's textColor
        mTextColors = getTextColors();
    }

    ts = appearance.getDimensionPixelSize(com.android.internal.R.styleable.
            TextAppearance_textSize, 0);
    if (ts != 0) {
        if (ts != mTextPaint.getTextSize()) {
            mTextPaint.setTextSize(ts);
            requestLayout();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T12:44:02.563

我认为您必须查看您用于应用程序的主题。因为开关的颜色是主题的责任，afaik。所以我建议你看看如何更改主题的设置。或者您可以使用新颜色创建自定义主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:53:44.017

TextView.setTextColor() 采用一个 int 表示颜色（例如 0xFFF5DC49），而不是 xml 文件中的资源 ID。在活动中，您可以执行以下操作：

`textView1.setTextColor(getResources().getColor(R.color.mycolor))`

在活动之外，您需要一个上下文，例如。

`textView1.setTextColor(context.getResources().getColor(R.color.mycolor))`

有关更多信息，请参阅[此](http://developer.android.com/reference/android/widget/TextView.html#setTextColor%28int%29)

# javascript - asp.net mvc 3 在 javascript 中访问 DateTime 模型属性

> ID：12706875
> 
> 赞同：3
> 
> 时间：2012-10-03T10:46:54.077
> 
> 标签：javascript, jquery, asp.net-mvc, asp.net-mvc-3

在 Asp.Net MVC 中，我有一个包含类型属性的模型`DateTime`。

如何在 JavaScript 中访问它？

使用`@(Model.PrimitiveTypeProperty)`效果很好，但对于`DateTime`.

问题更复杂，但我至少需要改变这个值。
可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:52:39.830

你可以把它隐藏起来，例如：

```
 @Html.HiddenFor(model => model.YourDate) 
```

然后从 javascript 访问它。修改它的值后，在提交时，您应该将值更新回控制器。

并且不要忘记输入如下形式：

```
@using (Html.BeginForm()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:50:40.860

从您的模型中，您应该具有 DateTime 属性。

```
public class YourModel {

   public DateTime YourDateField { get; set; }

} 
```

然后在你的`View`你可以做：

```
@Html.LabelFor(m => m.YourDateField); 
```

使用以下方式访问它`JavaScript/jQuery`：

```
$(document).ready(function() {
   var d = $("#YourDateField").val(); 
   alert(d);

  $("#YourDateField").val = "01/01/2000"; // sets the date which will then be posted back to the model on the form submit. 
}); 
```

这将提醒您模型的日期值。

```
 $("#YourDateField").val = "01/01/2000"; 
```

更改日期客户端。如果你的视图有一个`Form`元素，当它被提交回服务器时，传回的值将反映更改（01/01/2000）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T10:52:40.797

如果您希望基本上将您的`DateTime`属性转换为 JS `Date`，您可以尝试以下操作：

```
var jsDate = Date.parse('@Model.EndDate.ToUniversalTime().ToString("r")'); 
```

# android - 滑块按钮小部件（如在 Iphone 锁定屏幕中）

> ID：12706885
> 
> 赞同：1
> 
> 时间：2012-10-03T10:47:25.400
> 
> 标签：android, button, android-activity, slider, listener

我需要在 android 的 iphone（按钮滑块）中创建一个类似于锁屏的活动，以便当用户输入用户名/pswd 并将按钮滑动到下一个屏幕时...是否有人在这样的场景中工作过或者如果不知道如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:28:46.977

您可能必须编写自己的视图。从 developer.android.com 查看以下链接

[http://developer.android.com/training/custom-views/index.html](http://developer.android.com/training/custom-views/index.html)

[http://developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

# php - 计算重复 WHERE id=?

> ID：12706886
> 
> 赞同：0
> 
> 时间：2012-10-03T10:47:28.693
> 
> 标签：php, mysql

我希望能够`SELECT opponents id from a db table WHERE id=$currplayer`。

我的数据库表是这样的： **fk_player fk_opponent**

如果我这样做：

```
SELECT fk_opponent
     , COUNT(fk_opponent) AS oplay 
FROM nf_newversus 
     GROUP BY fk_opponent 
```

它做对了，但我希望能够对此进行排序，所以它只是那些 fk_player = $currplayer... 我试图插入 a`WHERE fk_player = $currplayer`但这是不对的...

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:59:16.820

根据您的描述，这应该是正确的：

```
SELECT fk_opponent, COUNT(*) AS oplay
FROM nf_newversus 
WHERE fk_player='$currplayer'
GROUP BY fk_opponent 
```

如果您的表允许多个`player1 vs player2`（即没有`UNIQUE(fk_player, fk_opponent)`索引），那应该可以正常工作，但**假设您以两种方式存储匹配项**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:54:48.500

```
SELECT fk_opponent
     , COUNT(fk_opponent) AS oplay
FROM nf_newversus 
WHERE fk_player = '$currplayer'
GROUP BY fk_opponent 
```

# objective-c - SDWebImage caching works only in Simulator

> ID：12706888
> 
> 赞同：2
> 
> 时间：2012-10-03T10:47:33.403
> 
> 标签：objective-c, sdwebimage

I'm using SDWebImagePrefetcher to prefetch a list of images off my plist (about 100, max size 600kb) in order to save them (on disk possibily) for later use.

Point is that on simulator this is working fine, while on device, it's loading and caching only some of them and I honestly don't get why.

I know this because after prefetching them, i turn off WiFi connection and see if the images have been loaded correctly in the imageView (on detailView), and surprisingly there are only 1\5 of the images prefetched, even if the consoloe said it prefetched them all.

I tried to put in SDWebImagePrefetcher.m in method `startPrefetchingAtIndex:` this line of code

```
- (void)startPrefetchingAtIndex:(NSUInteger)index withManager:(SDWebImageManager *)imageManager
{
    if (index >= [self.prefetchURLs count]) return;
    _requestedCount++;

    [imageManager downloadWithURL:[self.prefetchURLs objectAtIndex:index] delegate:self options:self.options];
    [cache storeImage:[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:[self.prefetchURLs objectAtIndex:index]]]] forKey:[self.prefetchURLs objectAtIndex:index] toDisk:YES];

} 
```

and then in my imageView class:

```
SDImageCache* cache = [SDImageCache sharedImageCache];
    UIImage* cachedImage = [cache imageFromKey:aString fromDisk:YES];

    if (cachedImage) {
        [imageView setImage:cachedImage];
    }
    else{
    [imageView setImageWithURL:[NSURL URLWithString:anUrl]
              placeholderImage:nil options:SDWebImageProgressiveDownload
                       success:^(UIImage *image) { [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }
                       failure:^(NSError *error) {  [activityIndicator stopAnimating];[activityIndicator removeFromSuperview]; }];

    [imageView addSubview:activityIndicator];
    } 
```

With no concrete results. Always working on simulator, not on device. Am I missing something here? Should I put some caching method in SDWebImagePrefetcher to store them on disk or what? I've being trying to make it work but failing every time.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:07:52.873

Seems like i found the issue.

I shouldn't set the option to cache ( `[prefetcher setOptions:SDWebImageMemoryCacheOnly];` ) ,but I had to leave it in low priority, so now everything works perfectly!

# c# - How can I load data in combo item property when another changed, in propertygrid c#?

> ID：12706892
> 
> 赞同：3
> 
> 时间：2012-10-03T10:48:01.407
> 
> 标签：c#, propertygrid

I have two property in my class: **MyCountry** & **MyCity**. I set this class to sourceobject of a property grid. I want load cities i combo when select a country. for example I have 2 Country data:

```
Country1
Country2 
```

And For Country1, I have (city data)

```
City11
City12
City13 
```

And For Country2, I have (city data)

```
city21
City22
City23 
```

When I change select country item in propertygrid, I want load cities of it in city item. this mean, when select **Country1**, display **City11,City12,City13** in City item and when select **Country2** Display **City21,Cityy22,City23** in City Item.

How can I It ?

my class is :

```
public class KeywordProperties
{
    [TypeConverter(typeof(CountryLocationConvertor))]
    public string MyCountry { get; set; }
    [TypeConverter(typeof(CityLocationConvertor))]
    public string MyCity { get; set; }
} 
```

and I use below class for load countries data for display in combo :

```
public override StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
    {            
        HumanRoles Db = new HumanRoles();
        List<LocationsFieldSet> Items = new List<LocationsFieldSet>();
        Items = Db.LoadLocations(0);
        string[] LocationItems = new string[Items.Count];
        int count = 0;
        foreach (LocationsFieldSet Item in Items)
        {
            LocationItems[count] = Item.Title;
            count++;
        }
        return new StandardValuesCollection(LocationItems);
    }

    public override bool GetStandardValuesExclusive(ITypeDescriptorContext context)
    {
        return true;        
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:23:51.313

The `ITypeDescriptorContext` interface provides a property called `Instance` which lets you access the object to which the type descriptor request is connected.

You can use this property to determine the current value of the `MyCountry` property the user selected. Depending on the value you can load the cities for this country.

Furthermore, in the setter of the `MyCountry` property I check whether or not the new value is different from the old one and if this is the case I reset the `MyCity` property (to not get an invalid combination of country and city).

Here is a small code sample. For the sake of simplicity I only use one type converter for both properties.

```
public class KeywordProperties
{    
  public KeywordProperties()
  {
    MyCountry = "Country1";
  }

  private string myCountry;
  [TypeConverter(typeof(ObjectNameConverter))]
  public string MyCountry
  {
    get { return myCountry; }
    set 
    {
      if (value != myCountry)
        MyCity = "";

      myCountry = value; 
    }
  }

  private string myCity;
  [TypeConverter(typeof(ObjectNameConverter))]
  public string MyCity
  {
    get { return myCity; }
    set { myCity = value; }
  }   
}

public class ObjectNameConverter : StringConverter
{
  public override bool GetStandardValuesSupported(ITypeDescriptorContext context)
  {
    return true;
  }

  public override TypeConverter.StandardValuesCollection GetStandardValues(ITypeDescriptorContext context)
  {
    KeywordProperties myKeywordProps = context.Instance as KeywordProperties;

    if (context.PropertyDescriptor.Name == "MyCountry")
    {
      List<string> listOfCountries = new List<string>();
      listOfCountries.Add("Country1");
      listOfCountries.Add("Country2");        

      return new StandardValuesCollection(listOfCountries);
    }      

    List<string> listOfCities = new List<string>();
    if (myKeywordProps.MyCountry == "Country1")
    {
      listOfCities.Add("City11");
      listOfCities.Add("City12");
      listOfCities.Add("City13");
    }
    else
    {
      listOfCities.Add("City21");
      listOfCities.Add("City22");
      listOfCities.Add("City23");
    }

    return new StandardValuesCollection(listOfCities);
  }
} 
```

In the example above there is one side effect I do not like. Setting the `MyCountry` property leads to settting also the `MyCity` property.

To workaround this side effect you could also use the `PropertyValueChanged` event of the `PropertyGrid` to handle invalid country/city selections.

```
private void propertyGrid1_PropertyValueChanged(object s, PropertyValueChangedEventArgs e)
{
  if (e.ChangedItem.Label == "MyCountry")
  {
    if(e.ChangedItem.Value != e.OldValue)
      m.MyCity = "";
  }
} 
```

If you use this event, just repalce the code in the setter of the `MyCountry` property with:

```
myCountry = value; 
```

# vb.net - 如何从 vb.net 中的richtextbox 中逐字检索

> ID：12706895
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:48:14.747
> 
> 标签：vb.net, richtextbox

我正在尝试使用 vb.net 中的富文本框创建一个编程编辑器。它应该根据该文本更改文本的颜色。例如，关键字应显示为红色，数字显示为蓝色。我找不到如何从富文本框中逐字检索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:54:12.743

您可以使用正则表达式来查找单词，并使用另一种来查找数字。试试这个网站，它可以帮助您创建所需的正则表达式[http://regexpal.com/](http://regexpal.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T13:21:36.193

我只会采用富文本框文本字段并按空格分割字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T13:25:57.897

如果您不必自己动手，SharpDevelop 的编辑器很容易扩展。

SharpDevelop3 使用[SharpTextEditor](https://github.com/icsharpcode/SharpDevelop/wiki/Syntax-highlighting) (WinForms)。SharpDevelop4 使用[AvalonEdit](https://github.com/icsharpcode/SharpDevelop/wiki/AvalonEdit) (WPF)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-19T17:48:16.713

我会做以下事情：

```
Dim txt as String = RichTextBox1.Text
Dim arr as String() = txt.Split(" "c) REM split along the whitespace character
For Each i In arr
    If IsNumeric(i) Then 
        REM change the color of the number to blue
Next i 
```

# jquery - 基于元素类（不包括某些元素）创建一个带有“.on”的点击事件

> ID：12706897
> 
> 赞同：3
> 
> 时间：2012-10-03T10:48:20.457
> 
> 标签：jquery

我需要将单击事件绑定到具有类“.rows”的元素，但我想排除其中一个带有 id '#unsigned' 的元素。

我正在使用这样的 ON 命令：

```
$('.container').on('click', '.rows', (a_function_to_run)); 
```

我期待这个：

```
$('.container').on('click', '.rows',':not(#unsigned)', (a_function_to_run)); 
```

或这个

```
$('.container').on('click', '.rows', (a_function_to_run)).not('#unsigned'); 
```

去工作。

什么是正确的语法？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:49:03.857

您可以[`:not()`](http://api.jquery.com/not-selector/)在选择器中添加：

```
$('.container').on('click', '.rows:not(#unsigned)', function() { ... }); 
```

# android - 如何在FrameLayout（android）的mapview下设置按钮？

> ID：12706900
> 
> 赞同：3
> 
> 时间：2012-10-03T10:48:22.077
> 
> 标签：android, android-layout

我在它的中心有带有和图像的地图视图 - 一切都在 FrameLayout 内。是全屏。现在我想在这个地图视图下有一些按钮/按钮，我不知道如何在它下面设置它。

另外我希望图像视图留在地图视图的中心。

如何重建它？

main.xml 的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">

<com.google.android.maps.MapView
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:apiKey="---key---"
    android:clickable="true" >
</com.google.android.maps.MapView>

    <ImageView
        android:id="@+id/test_image"
        android:layout_width="50px"
        android:layout_height="50px"
        android:layout_gravity="center"
        android:src="@drawable/srodek" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</FrameLayout> 
```

![在此处输入图像描述](../Images/46fb6cc706ee73db9a3ca7cf90741dc3.png) 我希望这个透明按钮成为我的地图视图下的普通按钮 :) 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:06:04.937

> 现在我想在这个地图视图下有一些按钮/按钮，我不知道如何在它下面设置它。

您不能使用 a `FrameLayout`，因为它不允许子项相对于彼此放置（它只允许它们相对于父项的边缘放置），而是使用 a `RelativeLayout`：

```
<RelativeLayout fill_parent/fill_parent>

   <Button android:id="@+id/btn" wrap_conntent/wrap_content   
       android:layout_alignParentBottom="true" />

   <FrameLayout height="wrap_content" width="fill_parent" 
       android:above="@id/btn" android:alignParentTop="true">
         <MapView  fill_parent/fill_parent/>
         <ImageView wrap_content/wrap_content android:layout_gravity="center"/>
   </FrameLayout>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:09:32.467

您可以将当前框架布局插入另一个相对布局中。

```
<?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <View
        android:id="@+id/d1"
        android:layout_width="40dp"
        android:layout_height="10dp"
        android:layout_gravity="left|center_vertical|center_horizontal"
        android:padding="3dp" 
        />
    <FrameLayout
        android:id="@+id/flayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/button1"
        android:layout_below="@id/d1"
        android:orientation="vertical" >
        <com.google.android.maps.MapView
            android:id="@+id/mapview"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:apiKey="--key--"
            android:clickable="true" >
        </com.google.android.maps.MapView>
        <ImageView
            android:id="@+id/test_image"
            android:layout_width="50px"
            android:layout_height="50px"
            android:layout_gravity="center"
            android:src="@drawable/ic_launcher" />
    </FrameLayout>
    <Button
        android:id="@id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" 
        android:layout_alignParentBottom="true"/>
</RelativeLayout> 
```

# c# - 无法检索调用我的 TCPListener 服务的主机名

> ID：12706901
> 
> 赞同：0
> 
> 时间：2012-10-03T10:48:29.487
> 
> 标签：c#, windows-services, tcplistener

我正在使用 TcpListener 编写一个简单的 FTP 服务，并且想找出传入呼叫使用的主机名（具有多个子域的域）。

这可能吗？

```
//Barebone TCPListener example
System.Net.Sockets.TcpListener listener;
listener = new TcpListener(IPAddress.Any, 21)

listener.Start();

TcpClient client = listener.AcceptTcpClient();

//Great, incoming... what domain are they using to call my service?

//This only gives me the local and remote IP..
//IPEndPoint LocalEndPoint = (IPEndPoint)client.Client.LocalEndPoint;
//IPEndPoint RemoteEndPoint = (IPEndPoint)client.Client.RemoteEndPoint; 
```

任何指针都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:50:14.277

我认为 TCP 基本上*没有*这些信息。这就是 HTTP 具有“Host”标头以便客户端可以指定它的原因。

本质上，与主机名建立 TCP 连接相当于将主机名解析为地址，然后就好像从未*有*过名称一样建立连接。

# maven - 工件命名约定

> ID：12706902
> 
> 赞同：1
> 
> 时间：2012-10-03T10:48:36.803
> 
> 标签：maven, naming-conventions, osgi, artifact

我们正在做一个关于 OSGi 的大项目并添加一些公共模块。有一些关于命名工件的讨论。

因此，命名模块时的一种可能性是：

`cmns-definitions`（对于*常见的定义*），另一个是`cmns-definition`，还有一个是`cmns-def`。这对包名也有一些影响。现在是 `xx.xxx.xxx.xxx.xxx.commons.definitions`，如果更改`cmns-def`为`xx.xxx.xxx.xxx.xxx.commons.def`。

在这个包中将有像枚举这样的类和其他在整个系统中使用的定义。

我个人倾向于，`cmns-definitions`因为包内不仅有 1 个定义。其他人指出，`java.util`例如，那里不仅有 1 个实用程序。不过，对我来说`java.util`是一个**缩写**。它可以表示*java 实用程序*或*java 实用程序*。同样的事情发生在`commons-lang`.

**你会如何命名这个包？为什么会选择这个名字？**

1.  `cmns-definitions`
2.  `cmns-definition`
3.  `cmns-def`

额外的问题：如何命名类似的东西`cmns-exceptions`？我就是这样命名的。你会命名`cmns-xcpt`吗？

编辑：

我对此提出自己的想法，希望得到证实或反驳。如果可以，请做。

根据我的想法，您命名某事物的背景原因是为了更容易理解其中的内容。或者，根据 Peter Kriens 的说法，让记忆变得容易，并能够通过模式自动化流程。两者都是有效的论据。

在模式方面，我的推理如下：

1）当一个实体出现并且在行业中众所周知时，请按照您的命名。
例如：“功能”就是一个例子。我们有一个名为 cmns-features 的模块。这是否意味着我们在这个模块上有很多功能？不，它的意思是“实现 Apache karaf 的“功能”文件的模块”。
“commons”是“commons”的一种实体化，在业界广为接受。这并不意味着“许多常见”。它的意思是“通用代码”。

例如，如果我将 extr-commons 视为模块名称，我知道它包含用于 extr 的公共代码（在本例中为提取）。

2）当模块内的多个类相互协作，为整体赋予一个独特的“一个和一个”含义时，使用单数形式命名。

大多数模块都包含在此处。如果我将某个东西命名为 cmns-persistence-jpa，我的意思是内部的任何类都相互协作以提供 cmns-persistence-api 的 jpa 实现。我不希望它里面有 2 个实现，但实际上有无数的类共同构成一个实现。对我来说一清二楚。不？

3) 当一组类的唯一目的是通过亲和力聚集类，但这些类没有毫无目的地合作时，使用复数。

这是 cmns-definitions （整个系统使用的枚举）的示例。

或者，使用缩写可以规避问题，例如 cmns-def 也可以由人类读者“解释为扩展”为 cmns-definition。许多人还使用“xxxx-util”，意思是 xxxx-utilities。

还有第三种选择可用于将事物打包在一起，使用本身就意味着复数的名称。想到了“api”这个词，但是任何将某物复数的词都可以，比如“pack”。

对这些情况 (3) 的支持是众所周知的模块，例如 commons-collections（使用复数）或 commons-dbcp（使用缩写）或 commons-lang（再次缩写）以及任何使用 api 通过亲和力将类打包在一起的模块。

来自 apache：
commons-collections -> 许多强大的数据结构可加速最重要的 Java 应用程序的开发
commons-lang -> java.lang API 的大量帮助实用程序
commons-dbcp -> 几个数据库连接池的包

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T07:26:35.863

> “这只是一个名字……”

在我漫长的职业生涯中，我发现这些名字可以极大地提高生产力。我认为，如果您使用*定义*、*定义*或*定义*，只要您保持一致并在名称中使用易于记忆且可用于自动化流程的模式，我认为这不会有什么不同。基于一致命名方案的构建比使用临时且没有可识别模式的“漂亮的人类显示”名称的构建更容易使用。

如果您使用模式，名称往往会变短。现在，使用这些名字的人通常会花很多时间在他们身上。所以它们的可读性并不像它们的助记符那么重要。事实证明，3 或 4 个字符的缩写令人惊讶地强大。原因之一是它们运作良好，因为只有一种可能的缩写，而如果你走得更久，就会有很多候选者。

无论如何，最重要的部分是整体一致性。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:48:13.417

`definitions`(or `def`or `definition`) 是一个坏名字，因为它对读者没有任何语义。你在一个面向对象的世界（我想）——试着遵循它的约定和原则。Maven 中的模块应该以它们包含的最大“抽象”命名。“定义”是一种形式，而不是一种意义。

您的问题类似于：“哪个类名更好`FileUtilities`或`FileUtils`”。答：没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T06:15:16.067

基本上你对定义和异常所做的就是为你的其他模块提供一种 API。所以我建议结合定义、异常并为其添加接口。然后将其全部称为 cmns-api 是有意义的。我通常更喜欢单数名称，因为它们更短，但您可以自由决定，因为它只是一个名称。

# javascript - 在javascript中打开目录-路径问题

> ID：12706915
> 
> 赞同：0
> 
> 时间：2012-10-03T10:49:17.310
> 
> 标签：javascript, path, directory

我正在尝试在我的项目中创建一个 js 函数，当它执行时它做了一件非常简单的事情：它在浏览器中打开一个目录，标准用法是这样的：_window.open('\myComputerName\c:\myPath')

不幸的是，在调用 open 函数时，它实际上会尝试打开以下路径：

http:// LocalHost:8080 /MYAPP/pages/default/\myComputerName\c:\myPath 这当然不起作用

任何想法如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:52:53.910

如果您尝试使用一些本地映射的资源，则需要通过虚拟目录使它们可访问。如果您尝试在任何客户端计算机上打开某个文件，那么您将无法这样做。浏览器无权访问文件系统。

因此，如果您想在虚拟目录中映射本地资源，*请*打开 IIS，然后创建一个虚拟目录并通过 localhost 访问它。例如映射`c:\myPath`到 myPath 虚拟目录。然后 myPath 可以通过`http://localhost[:port]/myPath`

# iphone - 在 ios6 设备中将图像保存到照片库时面临问题

> ID：12706916
> 
> 赞同：1
> 
> 时间：2012-10-03T10:49:23.077
> 
> 标签：iphone, uiimagepickercontroller, ios6, photo-gallery, photolibrary

我在将 UIImage 保存到 iOS 6 设备中的照片库时遇到问题。我可以将图像保存在模拟器中但不能保存在设备中。我已经更改了设备中照片的隐私设置。但我仍然无法保存图像. 下面是我用来保存图像的代码

```
UIImage *snap = [sharedSingleton getCopyOfMorphedImage];

    NSData* imageData =  UIImagePNGRepresentation(snap);

    UIImage* pngImage = [UIImage imageWithData:imageData];

   UIImageWriteToSavedPhotosAlbum(pngImage, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    if (error != nil) {
        NSLog(@"Couldn't save image");
    } else {
        NSLog(@"Saved image");
    }
} 
```

我用上面的代码在照片库中保存了一张黑色图像

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:32:01.073

请尝试**记录错误消息。**它会解决你的问题

```
- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    if (error != nil) {

        NSLog(@"%@",[error localizedDescription]);        

    } else {

        NSLog(@"Saved image");
    }
} 
```

# ibatis - 是否可以在一个地方编写通用条件并重用它（在 MyBatis 中）？

> ID：12706924
> 
> 赞同：1
> 
> 时间：2012-10-03T10:49:50.493
> 
> 标签：ibatis, mybatis

我有一些查询，里面`mapper.xml`的条件几乎相同。是否可以将公共部分写在一个地方并重复使用？

例如：

```
 select count(*) from table1 t1 inner join table2 t2 where t1.id = t2.id; 
```

同样，我还有另一个查询：

```
 select id, name from table1 t1 inner join table2 t2 where t1.id = t2.id; 
```

我想放在`table1 t1 inner join table2 t2 where t1.id = t2.id;`一个地方并在两个查询中重用它。

另外我有类似的东西：

```
<if test="id != 0">
    AND id = #{id,jdbcType=INTEGER}
</if>
<if test="assignTo != 0">
    AND assign_to = #{assignTo,jdbcType=INTEGER}
</if>
<if test="status != 0">
    AND status = #{status,jdbcType=INTEGER}
</if> 
```

这在 2 个查询中也很常见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T16:29:30.317

**您可以使用[SQL 片段](http://www.mybatis.org/core/sqlmap-xml.html#sql)。**

例如，您可以拥有：

```
<sql id="yourFragmentId1">
  table1 t1 inner join table2 t2 where t1.id = t2.id;
</sql> 
```

或者

```
<sql id="yourFragmentId2">
  <if test="id != 0">
    AND id = #{id,jdbcType=INTEGER}
  </if>
  <if test="assignTo != 0">
    AND assign_to = #{assignTo,jdbcType=INTEGER}
  </if>
  <if test="status != 0">
    AND status = #{status,jdbcType=INTEGER}
  </if>
</sql> 
```

然后，在您的查询中，分别用`<include refid="yourFragmentId1" />`和引用它们`<include refid="yourFragmentId2" />`。

# php - 将 SQL 查询字符串转换为数组格式

> ID：12706926
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:49:56.430
> 
> 标签：php, regex, string, multidimensional-array

```
<?php 
$str = "INSERT INTO `f_part` (lname,fname,email)  VALUES ('tha','thia','thia@gmail.com')";
?> 
```

任何人都可以帮助我将此字符串转换为数组

```
$result = array('table'=>'f_part',
                'data'=>array('lname=>'tha','fname=>'thia','email'=>'thia@gmail.com')

            ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:59:33.457

您需要通过查找不同的 MySQL 关键字来分析查询，例如 INSERT、SELECT、INTO、VALUES、FROM、WHERE 等。但是，这可能会变得棘手和困难，因为您必须注意单引号、转义字符、等等

我建议您只使用[http://code.google.com/p/php-sql-parser/](http://code.google.com/p/php-sql-parser/)。该课程已经完成了棘手的部分。它与您想要的输出并不完全相同，但它会为您提供类似的东西，甚至更多。

这是一个示例查询：

```
SELECT STRAIGHT_JOIN a,b,c 
  from some_table an_alias
 WHERE d > 5; 
```

和示例输出：

```
Array
( 
    [OPTIONS] => Array
        (
            [0] => STRAIGHT_JOIN
        )       

    [SELECT] => Array
        (
            [0] => Array
                (
                    [expr_type] => colref
                    [base_expr] => a
                    [sub_tree] => 
                    [alias] => `a`
                )

            [1] => Array
                (
                    [expr_type] => colref
                    [base_expr] => b
                    [sub_tree] => 
                    [alias] => `b`
                )

            [2] => Array
                (
                    [expr_type] => colref
                    [base_expr] => c
                    [sub_tree] => 
                    [alias] => `c`
                )

        )

    [FROM] => Array
        (
            [0] => Array
                (
                    [table] => some_table
                    [alias] => an_alias
                    [join_type] => JOIN
                    [ref_type] => 
                    [ref_clause] => 
                    [base_expr] => 
                    [sub_tree] => 
                )

        )

    [WHERE] => Array
        (
            [0] => Array
                (
                    [expr_type] => colref
                    [base_expr] => d
                    [sub_tree] => 
                )

            [1] => Array
                (
                    [expr_type] => operator
                    [base_expr] => >
                    [sub_tree] => 
                )

            [2] => Array
                (
                    [expr_type] => const
                    [base_expr] => 5
                    [sub_tree] => 
                )

        )

) 
```

# java - 在java中处理这个的首选方法是什么

> ID：12706927
> 
> 赞同：2
> 
> 时间：2012-10-03T10:50:06.000
> 
> 标签：java, oop, polymorphism

假设我有以下课程：

```
public interface X {
...
}

public class A implements X {
...
}

public class B implements X {
...
} 
```

现在假设我在某处有一个方法，它接受一个 X 类型的对象，并且必须以不同的方式处理 X 的每个实现。天真的方法是：

```
public void doSomething(X x) {
  if(x instanceof A)
    doSomethingA((A) x);
  else if(x instanceof B)
    doSomethingB((B) x);
} 
```

...但这似乎特别难看，而且不是多态的。一般来说，处理这种情况的干净方法是什么？

编辑：当然，如果我可以将 doSomething() 的实现推送到 A 类和 B 类，那会很容易，但是在没有意义的情况下呢？即 doSomething() 是在 C 类上定义的，其实现高度依赖于 C 的内部状态。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T10:54:04.053

这简单：

```
public interface X {
  int doSomething();
}

public class A implements X {
  public int doSomething() {
    // implementation in A
  }  
}

public class B implements X {
  public int doSomething() {
    // implementation in B
  }  

} 
```

**更新：**好的，看来我们在 C 中有一些算法，它取决于 C 的状态以及 A/B 差异。然后我会尝试拆分该算法，以便 C 类只有 A 和 B 的通用实现，并且依赖于 A-/B 的部分应该转到适当的类作为在 C 中调用的同一方法的特定实现. 如果可能，C 的状态可以部分传递给 A 和 B 的 doSomething

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T10:53:54.320

您应该推送`doSomethingA`to class`A`和`doSomethingB`to的实现，在接口`classB`中定义并调用（在[double-dispatch](http://en.wikipedia.org/wiki/Double_dispatch)行中的内容）。`doSomething``X``x.doSomething()`

考虑到有关处理对`X`类型`A`or的依赖性的问题的最新编辑`B`，`instanceof`肯定不应该使用运算符，因为它建立了对底层实现类的硬依赖，并且当`X x`传递给`C.doSomething()`修饰时，代码将惨遭失败实例。

AFAIK， 的实现`C.doSomething()`将归结为您必须使用来自`A`or的信息，`B`并且在该点运行的步骤应该抽象为 and 中的方法`A`，`B`在 interface 中声明`X`。这将确保任何新的实现`X`也实现这个`C`依赖的方法，从而使代码更易于维护。HTH。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T10:54:19.633

正确的方法是[访问者模式](http://java-x.blogspot.com.es/2007/01/implementing-visitor-pattern-in-java.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:55:15.900

首先我会实现一个接口而不是扩展:) 我的第一个任务就是这样

```
 class Parent {
      public Parent() {

      }
    }

    class Child extends Parent {
      public Child() {
        super();
      }
    }

    public class MainClass {
      public static void main(String[] a) {

        Child child = new Child();
        if (child instanceof Parent) {
          System.out.println("true");
        }

      }

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T10:55:40.077

```
 public interface X {
     doSomeThing();
    }

public class A implement X {
  doSomeThing(){}
}

public class B implement X {
   doSomeThing() {}
} 
```

现在你可以使用

```
 X a = new A();
  a.doSomeThing(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T10:55:45.260

你能把 do something() 移到接口 X 中吗？然后只需调用 x.do something() 而无需强制转换或使用实例。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T11:00:25.403

这更像是一个设计问题。如果 doSomething() 的 A 和 B 实现严重依赖于 C 对象状态，则可以将其作为参数传递：x.doSomething(C c)

* * *

在接口 X 中创建 doSomething() ：

```
public interface X {
   doSomething(C c);
}

public class A extends X {
   doSomething(C c) {
    ...
   }
}

public class B extends X {
   doSomething(C c) {
    ...
   }
} 
```

然后，您的初始方法变为：

```
public void doSomething(X x) {
  x.doSomething(C c);
} 
```

# django - Django 不会在整数十进制字段上存储 .00

> ID：12706931
> 
> 赞同：0
> 
> 时间：2012-10-03T10:50:28.893
> 
> 标签：django, model, save, rounding

我试图强制 Django 始终存储小数点后 2 位的数字，但如果数字是整数，那么它不会存储 .00

```
def clean_myfield(self):
    data = self.cleaned_data['myfield']
    self.cleandecimal(data)
    return data

def cleandecimal(self, data):
    data = Decimal(data).quantize(Decimal('.01'), rounding=ROUND_DOWN)
    print 'data ', data
    return data 
```

我的打印始终按预期显示，例如 4.00 但存储为 4

如何覆盖 save 方法来存储值而不四舍五入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:38:10.033

它是一个代表问题。十进制数存储数字，而不是它们的表示。数学`1.00`上等于`1`。因此，您的数据库后端可能存储最小的截断十进制而不是全零 - 所以它可能不是 Django，而是 db。如果你想强制 Django 总是返回带两位小数的小数，你可以覆盖 DecimalField：

```
class MyDecimalField(models.DecimalField):
    __metaclass__ = models.SubfieldBase

    def __init__(self, *args, **kwargs):
        super(self.__class__, self).__init__(*args, **kwargs)
        places = kwargs.get('decimal_places', 2)
        self.q = Decimal(10) ** -places

    def to_python(self, value):
        value = super(self.__class__, self).to_python(value)

        if isinstance(value, Decimal):
            return value.quantize(self.q)

        else:
            return value 
```

这将始终返回`decimal_places`指定的数字。您可以像平常一样使用它`DecimalField`，例如：

```
class FooModle(models.Model)
    number = MyDecimalField(decimal_places=2, max_digits=10) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:59:34.423

用于`models.DecimalField(max_digits = 6, decimal_places = 2)`存储两位小数的数字。

# android - android在BroadcastReceiver中获取进程名称

> ID：12706935
> 
> 赞同：5
> 
> 时间：2012-10-03T10:50:41.467
> 
> 标签：android, process, broadcastreceiver

我陷入了这个麻烦，我无法弄清楚。我google了很多，但没有给我答案。

我解释一下：
我有一个在不同进程中运行的 BroadCastReceiver ( `android:process=":anotherProcess"`)

我想在我的 BroadcastReceiver 中获取这个进程名称。

**例如**，在这种情况下，它可能是：`com.my.package:anotherProcess`

是否可以？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-09T16:43:17.357

我找到了办法。对于任何需要这个的人：

```
 int id = Process.myPid();
     String myProcessName =context.getPackageName();

     ActivityManager actvityManager = (ActivityManager)context.getSystemService( context.ACTIVITY_SERVICE );
     List<RunningAppProcessInfo> procInfos = actvityManager.getRunningAppProcesses();

     for(RunningAppProcessInfo procInfo : procInfos) {
         if (id == procInfo.pid)
         {
             myProcessName = procInfo.processName;
         }
     } 
```

# php - PHPExcel行/字段自定义元数据？

> ID：12706936
> 
> 赞同：0
> 
> 时间：2012-10-03T10:50:42.990
> 
> 标签：php, xml, excel, metadata, openxml

我使用[PHPExcel](https://github.com/PHPOffice/PHPExcel)从 mysql 导出数据并`$workbook->getProperties()->setCustomProperty()`存储表名。

但我也想存储一个 *primary_key* 字段以供导入，而没有可见的列。它应该坚持行，以便编辑者可以删除行。

PHPExcel 缺乏文档，所以我目前没有找到任何东西。

甚至可能吗？尚未深入`OfficeOpenXML`研究文档 - 寻找现有解决方案。

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:05:04.863

为什么不将主键存储在工作表的 A 列中，然后将 A 列设置为“隐藏”？

您可以通过阅读第 4.6.29 节了解如何执行此操作。在（不存在的）开发人员文档中，标题为“显示/隐藏列”

# actionscript-3 - Flash-逗号和句号。按键不会触发按键按下

> ID：12706938
> 
> 赞同：1
> 
> 时间：2012-10-03T10:50:55.337
> 
> 标签：actionscript-3, flash, keyboard

我在 Flash CS5.5 中遇到了一个相当奇怪的错误：

```
import flash.events.KeyboardEvent;
import flash.events.Event;

stage.addEventListener(KeyboardEvent.KEY_DOWN,onKeyDwn);

function onKeyDwn(e:KeyboardEvent){
    trace("Key down!");
} 
```

标准美式键盘上的按键命令和句点不会触发我的按键事件。但是，如果我添加一个文本框并输入它，它就可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:26:16.850

您需要在 Flash 播放器中禁用键盘快捷键。在 Flash CS5.5 中选择 Test Movie，当 flash 播放器窗口出现时，确保在菜单中选中 Control -> Disable Keyboard Shortcuts。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:41:24.783

尝试手动设置焦点：

```
stage.focus = stage; 
```

以下代码在 cs5.5 中为我工作：

```
import flash.events.KeyboardEvent;
import flash.events.Event;

stage.focus = stage;
stage.addEventListener(KeyboardEvent.KEY_DOWN,onKeyDwn);

function onKeyDwn(e:KeyboardEvent){
    trace("Key down!");
} 
```

# asp.net - asp.net RESX 文件

> ID：12706945
> 
> 赞同：1
> 
> 时间：2012-10-03T10:51:20.073
> 
> 标签：asp.net

嗨，我是资源文件的新手，我的问题出在我的网络上，我想从 aspx 文件中的资源文件中打印一个段落，我正在为 asp 控件的 resx 编写下面的代码。但我不知道如何在多行中编写资源以及如何使用段落从我的网页访问该数据

标签

```
 <tr>
                    <td colspan="3" style="text-align: center">
                        <asp:Label ID="Label1" runat="server" Font-Size="20pt" 
                            style="text-align: center" Text="<%$ Resources:Resource1, Headerlabel %>"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td class="style2">
                        <asp:Label ID="Label2" runat="server" Text="<%$Resources:Resource1,usernamelabel %>"></asp:Label>
                    </td>
                    <td class="style4">
                        <asp:TextBox ID="TextBox1" runat="server" ToolTip="<%$Resources:Resource1,Usertooltip %>"></asp:TextBox>
                    </td>
                    <td>
                        <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                            ErrorMessage="<%$Resources:Resource1,userreq %>" 
                            ControlToValidate="TextBox1"></asp:RequiredFieldValidator>
                    </td>
                </tr>
                <tr> 
```

请告诉我如何在多行中编写资源

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:59:47.583

```
<asp:TextBox 
ID="txtReturn" 
runat="server" 
Rows="5" 
TextMode="MultiLine" 
Width="490px"
ToolTip="<%$Resources:Resource1,Usertooltip %>"
Text="<%$Resources:Resource1,usernamelabel %>
></asp:TextBox> 
```

# mysql - mysql从具有2列或更多列的表中删除行

> ID：12706948
> 
> 赞同：1
> 
> 时间：2012-10-03T10:51:27.050
> 
> 标签：mysql, sql

我需要从有 2 列或更多列的表中删除行。例如。假设我需要删除最后两列相同的行。

1 1 2 3

2 2 2 2

3 2 3 3

4 7 3 3

5 4 2 2

第一列是索引。

我需要删除 4 7 3 3 和 5 4 2 2 （因为已经有 2 2 2 2 和 3 2 3 3 ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:54:01.390

```
DELETE FROM tableName
WHERE col1 NOT IN
(
    SELECT minID
    FROM 
    (
        SELECT MIN(ID) minID
        FROM tableName
        GROUP BY col2, col3
    ) a
) 
```

# [请参阅 SQLFiddle 演示](http://sqlfiddle.com/#!2/84f3d/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:12:57.307

经过一番研究，我发现了这个（我认为它也在堆栈的某个地方，但不记得那个帖子了）

```
 SELECT * FROM tb AS t1
  WHERE EXISTS (
    SELECT 1 FROM tb AS t2 
    WHERE t2.c0= t1.c0
    AND t2.c1= t1.c1
    AND t2.c2= t1.c2
    AND t2.id> t1.id ) 
```

# java - 将 ArrayList 限制为仅具有 DISTINCT 条目的哪种方法更昂贵？

> ID：12706949
> 
> 赞同：0
> 
> 时间：2012-10-03T10:51:29.550
> 
> 标签：java, android, arraylist, hashset

我有正在添加到数组列表中的联系人，现在一些联系人在其他应用程序中很常见，因此重复的条目也保存在其中。

我知道解决这种情况的两种方法，我不确定我应该遵循哪种方法？

第一的：

```
String name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
ArrayList<String> temp = new ArrayList<String>();
                temp.add(name);

                if (!contactList.contains(name)) {
                    contactList.add(name);} 
```

第二：

将其添加到 hashset，因为它不允许重复条目，然后将其添加回 arraylist-

```
 String name = getStrin(...);
        contactList.add(name);

// after the loop has completed adding all elements
    HashSet hs = new HashSet();
        hs.addAll(contactList);
        contactList.clear();
        contactList.addAll(hs); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T10:53:52.667

您应该遵循第二种方式，因为它更好，并且针对不同的值进行了优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:58:55.787

即使您将其添加到 HashSet 中，HashSet 也会执行操作以检查条目是否存在，并且必须重新组织自身以适应新条目，尽管是以更优化的方式。因此，我认为采用第二种方法不会获得任何重大优势。另外，您正在方法 2 中执行 addAll() 和 clear() 操作，因此使用 HashSet 获得的任何优化都可能被这些抵消。

我建议您使用第一种方法本身，但是您应该测试这两种方法并测量哪种方法更适合您的特定测试用例和应用程序要求。

# java - 比较java中的两个字符串

> ID：12706951
> 
> 赞同：0
> 
> 时间：2012-10-03T10:51:33.513
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我写了一些比较两个字符串“abc”和“de”的代码。字符串 abc 被解析并返回“doc”到 ext，然后进行比较。尽管似乎 if 条件为真，但 else 部分仍在执行。我没有得到请帮助我....非常感谢。

```
public class xyz{

    String abc="doc2.doc";
    String de="doc";

    public static void main(String arg[]){

    xyz c=new xyz();

    String ext = null;
    String s =c.abc;
        String d =c.de;
    int i = s.lastIndexOf('.');

    if (i > 0 && i < s.length() - 1){
    ext = s.substring(i+1).toLowerCase();
    }
    System.out.println(ext);
    if(ext==d){

    System.out.println("true");
    }
    else{
    System.out.println("false");
    }

    }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T10:52:35.167

您不能将字符串与`==`运算符进行比较。

你将不得不使用`String.equals()`

在你的情况下，它会是

```
if (ext.equals(d)) {
    System.out.println("true");
} else {
    System.out.println("false");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T10:53:43.823

`==`测试参考相等。

`.equals()`测试值相等。

因此，如果你真的想测试两个字符串是否具有相同的值，你应该使用 .equals()

```
// These two have the same value
new String("test").equals("test") ==> true 

// ... but they are not the same object
new String("test") == "test" ==> false 

// ... neither are these
new String("test") == new String("test") ==> false 
```

在这种情况下

```
if(ext.equals(d)) {
    System.out.println("true");
}
else {
    System.out.println("false");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:54:41.633

使用`equals`运算符比较字符串：

```
ext.equals(d) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T10:56:25.420

你可以用 .equals()..

```
private String a = "lol";

public boolean isEqual(String test){
  return this.a.equals(test);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T10:59:27.257

您不能将字符串与 == 进行比较，因为它们是不同的对象。内容可能相同，但这不是 == 所看到的。对其中一个字符串使用 equals 方法将其与另一个字符串进行比较。

在您的代码中，使用：

```
if(d.equals(ext)){ 
```

如果您需要比较两个字符串，而其中只有一个是变量，我建议采用以下方法：

```
"foo".equals(variableString) 
```

这样您就可以确定不会在 Null 对象上调用 equals。

另一种可能性是使用 compareTo 方法而不是在其他一些 Java 类中也可以找到的 equals 方法。当字符串匹配时 compareTo 方法返回 0。

[您可以在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29%29)找到有关 Java 中字符串的更多信息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-03T11:02:22.500

你应该写

```
if(ext.equals(d))

instead of 

if(ext==d) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-03T11:17:35.313

```
String str1, str2, str; // References to instances of String or null

str1 = "hello"; // The reference str1 points to an instance of "hello" string
str2 = "hello"; // The reference str2 points to another instance of "hello" string
str3 = str2;    // The reference str3 points to the same instance which str2 does.

assert str1.equals( str2 ); // Both string instances are identical.
assert str1 != str2;        // Both references point to independent instances of string.
assert str2 == str3;        // Both references point to the same instance of string. 
```

# junit - 如何使用带有@Rule 而不是@RunWith 的JExample

> ID：12706953
> 
> 赞同：1
> 
> 时间：2012-10-03T10:51:37.670
> 
> 标签：junit, junit4

我需要在使用 @RunWith(SpringJUnit4ClassRunner.class) 运行测试的行为测试方法之间添加依赖关系。

我使用以下方法将 Mockito 添加到混合中：

```
@Rule
public MockitoRule mockitoRule = new MockitoRule(); 
```

MockitoRule 是一个实现 MethodRule 应用 Mokito 行为的短类，我设法找到了某个地方。

现在的问题是：任何人都知道我将如何归档与 JExample 类似的东西，即：使用@Rule 而不是使用@RunWith(JExample.class) 来应用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:30:29.770

查看[Sourceforge](http://sourceforge.net/projects/jexample/)和[github](https://github.com/akuhn/jexample)，在过去几年中 JExample 似乎没有太大的发展，所以可能没有`@Rule`JExample 的。我会联系原作者，看看添加`TestRule`.

乍一看，似乎需要对[JExample 的工作](http://scg.unibe.ch/research/jexample)方式稍作改动，因为实际使用了测试的返回值，而 JUnit 的基本运行器假定方法是 void 返回值。

# javascript - 如何使用 Javascript 从 Firefox Scratchpad 控制其他窗口，即使它重新加载？

> ID：12706955
> 
> 赞同：2
> 
> 时间：2012-10-03T10:51:45.257
> 
> 标签：javascript, firefox, reload, persistent, scratchpad

我想将我的电子邮件从一个有点不可靠的提供商（比如说 X）转移到 Gmail。不幸的是，电子邮件提供商不允许文件夹导出或直接 IMAP 链接。

我唯一能做的就是通过 POP3 将 Gmail 连接到 X，以便将 X 收件箱中的任何内容复制到 Gmail。

这是我设置的，它可以工作，但当然 POP3 只扫描收件箱。

我在收件箱以外的其他文件夹中有数千封电子邮件，所以我需要先将它们移动到收件箱。但是，我只能通过 X 的 Web GUI 移动消息，每轮只能移动一页消息。

所以我必须打开已保存的邮件文件夹，点击“全选”，选择“收件箱”并点击“移动”，然后页面将重新加载，我需要再次这样做......数百次。

我制作了一个 Javascript 函数（假设 MoveToInbox()）来模拟这些操作，然后在 Firefox 中打开页面并启动 Firefox Scratchpad。所以，我可以在 Scratchpad 中一直按 Ctrl+R，然后等待页面重新加载，然后再按一次，这样可以节省大约 50% 的时间。

但是，我想知道，如果我能以某种方式使 Scratchpad 与该选项卡一起工作，以便它等待页面重新加载，然后执行脚本然后再次等待，从而消除所有手动重复任务。

我想我可以用 window.addEventListener 以某种方式做到这一点，但是这个对象似乎在页面重新加载时被清除了，所以有什么我可以使用的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T06:39:13.857

我自己的快速回答是仅使用诸如[GreaseMonkey](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)之类的 Firefox 插件。

当然，解决方案在不同的情况下会有所不同，但我自己的是这个 GreaseMonkey Javascript：

```
// the function to select all messages and programmatically click on 
// move button:
function moveToInbox()
{
    selectAllCheckbox=document.getElementById("messagesForm")[0]; 
    mailboxSelector=document.getElementsByName('targetMailbox')[0];
    selectAllCheckbox.click(); // click on "select all" checkbox
    mailboxSelector.selectedIndex=1; //specify that we are moving to inbox
    inx.mail.mailbox.mailboxTransfer(); // execute provider's function for moving mail.
}

// This gets executed on any page that matches URL specified in Greasemonkey script properties
// I have put this to execute, if the URL is for the folder I want to move messages from.

messageList=document.getElementById("messagesForm")[0];
// in my case, if there are no more messages to move, the form is not created at all, so 
// I can check for its existance, to determine if I need to execute moving.
if (messageList == null)
{
    return;
}
else
{
    moveToInbox();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-08T12:35:49.687

## 使用 iFrame

第一个问题是重新加载后变量和函数会丢失： -
使用`<iframe>`with`src = "X"`
现在跨域策略正在引起麻烦：
- 使`<iframe>`与在同一网站上`src`

然后，您可以轻松访问和操作网站`iframeId.contentDocument`

## 一个例子：

导航到[google.com](https://www.google.com "谷歌")，使用 Inspect Element 添加 iframe：
`<iframe src="https://www.google.ae" id="someID"> </iframe>`
然后，您可以使用 JavaScript 对 iframe 执行任何操作：
`someID.contentDocument.location.reload(); setTimeout('someID.contentDocument.getElementById('lst-ib').value="iframes rock"',1000); //You should use something better than setTimeout to wait for the website to load.`

# sql-server - 有没有办法在给定起始ID的情况下复制相邻列表层次结构的一部分？

> ID：12706956
> 
> 赞同：1
> 
> 时间：2012-10-03T10:51:51.687
> 
> 标签：sql-server, tsql

我有一个构成主题结构的相邻列表层次结构模型

```
 ID   Parent_Id Topic_Name
   1    Null      Topic 1
   2    Null      Topic 2
   3    2            Topic 3
   4    3               Topic 4
   5    2            Topic 5
   6    Null      Topic 6 
```

这构成了我无法更改的应用程序的一部分-不幸的是，主题没有多个父级，我无法移至嵌套集-尽管如果这是该过程中的临时步骤-只要返回就可以了到相邻列表层次模型

我想指定一个主题 id，然后将其复制到一个新的主题 id 并保留下面的级别/结构

所以在我的例子中，我可以指定主题 topic_id 2 并且它会创建

```
 ID   Parent_Id Topic_Name
   7    Null      Topic 2
   8    7            Topic 3
   9    8               Topic 4
   10   7            Topic 5 
```

ID 会自动编号，因此无需构造它，但显然需要保留父 ID

我怎样才能实现上述目标？我需要展平数据并在每次插入后进行 3 次单独的插入记录 id 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:53:28.293

您可以使用递归 CTE 来获取要插入的行。如果您使用`merge`添加行，您可以使用`output`来捕获[生成的 ID 和旧 ID 之间的映射，该映射](https://stackoverflow.com/questions/5365629/using-merge-output-to-get-mapping-between-source-id-and-target-id)可用于更新`Parent_ID`插入行的列。

```
-- ID for topic to copy 
declare @ID int;
set @ID = 2;

-- Table to hold the inserted rows
declare @T table
(
  New_ID int,
  Old_ID int,
  Old_ParentID int
);

-- Add rows from recursive CTE using merge
with C as
(
  select T.ID, T.Parent_Id, T.Topic_Name
  from YourTable as T
  where T.ID = @ID
  union all
  select T.ID, T.Parent_Id, T.Topic_Name
  from YourTable as T
    inner join C 
      on C.ID = T.Parent_Id
)
merge YourTable
using C
on 0 = 1
when not matched then
  insert (Topic_Name) values (C.Topic_Name)
output inserted.ID,
       C.ID,
       C.Parent_Id
  into @T(New_ID, Old_ID, Old_ParentID);

-- Update Parent_Id for the new rows
update Y set
  Parent_Id = T2.New_ID
from @T as T1
  inner join @T as T2
    on T1.Old_ParentID = T2.Old_ID
  inner join YourTable as Y
    on T1.New_ID = Y.ID; 
```

[SE-数据](https://data.stackexchange.com/stackoverflow/query/81624)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T11:09:52.613

工作示例。理论上可行，但对于高事务量可能不够健壮，或者对于大表来说不够快。

```
--- sample table
create table tbl (
  id int identity primary key,
  parent_id int references tbl(id),
  topic_name varchar(100));
insert tbl values
(       Null,  'Topic 1'),
(       1,  '   Topic 2'),
(       2   ,  '       Topic 3'),
(       3   ,  '          Topic 4'),
(       2   ,  '       Topic 5'),
(       Null,  '    Topic 6'),
(       4,  '    Topic 4-3'),
(       7,  '    Topic 5-4')
;

--- script to duplicate a hierarchy branch
declare @inserttbl table (
  id int,
  parent_id int,
  topic_name varchar(100));
;with cte as (
  select id, parent_id, topic_name
  from tbl
  where id=2 -- or parameter
  union all
  select t.id, t.parent_id, t.topic_name
  from tbl t
  join cte c on t.parent_id=c.id
), cte2 as (
  select *,rn=row_number() over (order by id)
  from cte
), cte3 as (
  select rec.*, par.rn as parent_rn
  from cte2 rec
  left join cte2 par on par.id=rec.parent_id
)
insert @inserttbl
select cte3.rn,
       case when cte3.rn=1 then cte3.parent_id
            else cte3.parent_rn end,
       topic_name
from cte3;

insert tbl(topic_name)
select topic_name from @inserttbl order by id;

declare @delta int=scope_identity()-@@rowcount;

update t
set parent_id = i.parent_id + case when i.id=1 then 0
                              else @delta end
from tbl t
join @inserttbl i on t.id - @delta = i.id;

--- check results
select * from tbl; 
```

# zend-form - zf2 验证表单：如何验证依赖字段？

> ID：12706957
> 
> 赞同：5
> 
> 时间：2012-10-03T10:52:01.733
> 
> 标签：zend-form, zend-framework2

我有 5 个文本表单

```
$number1 = new Text('number-1');
$number2 = new Text('number-2');
$number3 = new Text('number-3');
.... 
```

使用相关过滤器

```
foreach(...)
   $input = new Input($elementName);
   $validator = new ValidatorChain();
   $validator->addByName('Int')
       ->addByName('Between', array(
          'min'=>0,
          'max'=>$this->maxAllowedTicket,
          'inclusive'=>true));
   $filter = new FilterChain();
   $filter->attachByName('Int');

   $input->setValidatorChain($validator);
   $input->setFilterChain($filter); 
```

我希望这 3 种形式中只有一种可以包含不同于 0 的值。然后有两个可能的错误。

太多的数字

```
 $data['number1'] = 5;
 $data['number2'] = 5;
 $data['number3'] = 0;
 $data['number4'] = 5;
 $data['number5'] = 0; 
```

没有号码

```
 $data['number1'] = 0;
 $data['number2'] = 0;
 $data['number3'] = 0;
 $data['number4'] = 0;
 $data['number5'] = 0; 
```

如何同时验证这多个字段？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T14:09:24.480

你需要编写自己的`Validator`类来做到这一点。`isValid()`您的新验证类的方法还接收`$context`包含整个表单的值的方法。这样，您可以根据其他字段验证每个字段的值。

```
namespace My\Validator;
use Zend\Validator\AbstractValidator;

class CustomValidator extends AbstractValidator
{
    public function isValid($value, $context = null)
    {
        // put your logic here and call
        // $this->error(); if required
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T09:20:31.893

使用回调验证器制作您自己的解决方案。

示例在这里：[http ://packages.zendframework.com/docs/latest/manual/en/modules/zend.validator.set.html#callback](http://packages.zendframework.com/docs/latest/manual/en/modules/zend.validator.set.html#callback)

# c - 嵌套开关盒不起作用

> ID：12706959
> 
> 赞同：-2
> 
> 时间：2012-10-03T10:52:15.553
> 
> 标签：c, embedded, avr

我正在尝试使用 USART 通信执行一些命令并使用 ATmega32-A 读取一些值。看看我的代码。我的问题是我正在尝试添加一些案例（嵌套开关案例），但我没有得到我想要的。我希望我能提供解决我的问题所需的所有信息。

```
void uniCom(void) {
switch (Command) {
/* ... */
case (muxsel):
  printf(muxselection);
  switch (c) {
    case 1:
      printf("this is mux chaneel1");
      DDRB = 0b10111111;
      PORTB = 0b00000000;
      printf("adc Value", ReadAdc());
      Command = 0;
      break;
    case 2:
      /*-------------------*/
      break;
  }
  Command = 0;
break;
/* ... */
default:
    Command = 0;
    break;
} 
```

问题是未定义的 c。而且我没有看到任何 muxselection 声明，可能缺少 "" ？现在是第二种方法。

```
void selcase(void) {
unsigned char c;
printf("muxselection");
while (rx_counter0) {
 c = getchar();
switch (c) {
  case 1:
    printf("this is mux chaneel1");
    DDRB = 0b10111111;
    PORTB = 0b00000000;
    printf("adc Value", ReadAdc());
    Command = 0;
    break;
  case 2:
    /*-------------------*/
    break;
}
}
}
void uniCom(void) {
switch (Command) {
/* ... */
case (muxsel):
  printf(muxselection);
  selcase();
  Command = 0;
  break;
/* ... */
default:
    Command = 0;
    break;
}
} 
```

我的问题是我正在执行我声明的所有命令，但我想在主开关案例命令“muxsel”之一中选择更多案例。为此，我编写了嵌套开关盒。如果我在超级终端上选择“muxsel”命令，那么它会像“muxselection”一样打印，然后如果我在第二个开关中输入 1 以选择“case '1'”，则不会打印任何内容。它正在打印“找不到命令”。问题是什么。我想执行嵌套开关，但我无法使用上面的代码来做到这一点，我也试过这样。

```
void selcase(void) {
         unsigned char c;
         printf("muxselection");
         while (rx_counter0) {
         c = getchar();

         switch (c) {
                  case '1':
                    printf("this is mux chaneel1");
                    DDRB = 0b10111111;
                    PORTB = 0b00000000;
                    printf("adc Value", ReadAdc());
                    c= 0;
                    break;
                  case '2':
                  /*-------------------*/
                  break;
                 default;
                  break;
               }
            }
          } 
```

为嵌套开关盒创建一个函数并在主开关盒中调用，如下所示。

```
 void uniCom(void) {
      switch (Command) {
                 /* ... */
                   case (muxsel):
                          printf(muxselection);
                          selcase();
                          Command = 0;
                          break;
                     /* ... */
                     default:
                       Command = 0;
                       break;
         }
       } 
```

这种方式也不起作用请建议我如何克服这个问题。我想在主开关案例中选择一个命令，例如“muxsel”，然后我使用案例语句选择多路复用通道。任何帮助表示赞赏。

提前致谢。

我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:45:38.377

好的......代码不是很清楚，但我**想**我看到了你的问题。您尝试像这样修改代码：

```
case (muxsel):
 printf(muxselection);
  switch (c) {
     case 1:
         printf("this is mux chaneel1");
         DDRB = 0b10111111;
         PORTB = 0b00000000;
         printf("adc Value", ReadAdc());
         Command = 0;
         break;
     case 2: 
```

首先，您没有在函数`c`范围内声明。`uniCom()`所以那不会编译。因为您没有提供完整的代码，所以我*假设*您知道这一点并且可能确实做了这样的事情：

```
void uniCom(void) {

    unsigned char c;
    c = getchar();  

    switch (Command) {
      case (no_com):
          Command = 0;
    ....
      case (muxsel):
          printf("muxselection\n"); //Need quotes here and maybe a \n?
          switch (c) {
             case 1:
              ... 
```

这导致了下一个问题。您要的是 char`c`但您的案例是建立在`int`. 例如，如果用户输入 3，你得到的是字符 '3' 或 int 51。检查[ASCII 表](http://www.asciitable.com/)

因此，您的案例现在适用于标题开头 (SOH)、文本开头 (STX) 等……这不会按照您想要的方式工作。您需要这样做：

```
 switch (c) {
             case 51:     // This is ASCII '1'
              ...
              break;
             case 52:     // This is ASCII '2' 
```

或者这样做：

```
 switch (c) {
             case '1':
              ...
              break;
             case '2': 
```

由于您没有提供输入或 c 的定义方式，因此我可能是错的……但我敢打赌那是您的问题。顺便说一句，请确保您的`default`案例末尾带有“错误输入”之类的消息，它使这类事情更容易被抓住。

**编辑：**
修改代码如下并分享结果：

```
void runCom(void){
      unsigned char c;
      c = getchar();
      printf("%c %d\n", c, c);   //<-- add this line here
      switch(Command){ 
```

和

```
void selcase(void) {
    unsigned char c;
    printf("muxselection");
    while (rx_counter0) {
        c = getchar();
        printf("%c %d\n", c, c); //<-- and this line here
        switch (c) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:57:22.703

我将其写为答案，因为评论中没有它的位置。虽然它绝对不是最终令人满意的一次，但它可能会帮助你到达那里。

现在我看到两个问题。你说你试图改变`case(muxsel)`. 在我看来，您的代码甚至无法编译。该函数的代码应如下所示：

```
void uniCom(void) {
  switch (Command) {
    /* ... */
    case (muxsel):
      printf(muxselection);
      switch (c) {
        case 1:
          printf("this is mux chaneel1");
          DDRB = 0b10111111;
          PORTB = 0b00000000;
          printf("adc Value", ReadAdc());
          Command = 0;
          break;
        case 2:
          /*-------------------*/
          break;
      }
      Command = 0;
    break;
    /* ... */
    default:
        Command = 0;
        break;
  }
} 
```

问题是未定义的`c`。而且我没有看到任何声明`muxselection`，也许丢失了`""`？现在是第二种方法。

```
void selcase(void) {
  unsigned char c;
  printf("muxselection");
  while (rx_counter0) {
    c = getchar();
    switch (c) {
      case 1:
        printf("this is mux chaneel1");
        DDRB = 0b10111111;
        PORTB = 0b00000000;
        printf("adc Value", ReadAdc());
        Command = 0;
        break;
      case 2:
        /*-------------------*/
        break;
    }
  }
}
void uniCom(void) {
  switch (Command) {
    /* ... */
    case (muxsel):
      printf(muxselection);
      selcase();
      Command = 0;
      break;
    /* ... */
    default:
        Command = 0;
        break;
  }
} 
```

第二种情况可能会编译。我不明白的是，为什么在第二种情况下你要手动阅读`c`。而在前者你不？它是否应该在`uniCom`例程中加载？它肯定在`getCom()`. 也许您不应该从级别`uniCom`或以下级别弄乱缓冲区。你也确定`while(rxcounter0)`会停止吗？如果`getchar()`要从人类用户在键盘上键入的标准输入中读取字符，则可能很难从他那里读取 1 或 2，因为这些 ASCII 码不存在于那里。

# ruby-on-rails - 扩展 rails simpleform 功能

> ID：12706962
> 
> 赞同：2
> 
> 时间：2012-10-03T10:52:18.520
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap

我有一个带有“simpleform”和“bootstrap-datepicker-rails”宝石的rails应用程序。

我尝试使视图代码更具可读性，如下所示：

```
f.input :birthday, :mydatefield, :options => {:icon => "calendar", :data-date => "21.12.2012", :data-format => "dd-mm-yyyy"} 
```

此刻我写下：

```
<div class="input-append date" id="user_birthday" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
    <%= f.input_field :birthday, :disabled => true %>
    <span class="add-on">
        <i class="icon-calendar"></i>
    </span>
</div> 
```

或这个

```
<%= f.input :birthday, :wrapper => :datepicker, :wrapper_html=> {id: "user-birthday", class: "date"} do %>
    <%= f.input_field :birthday, :disabled => true %>
    <%= content_tag :span, :class => "add-on" do %>
        <%= content_tag :i, :style => "color:grey", :class => "icon-calendar" do
        end %>
    <% end %>
<% end %> 
```

得到我的结果：

![带有引导图标和日期选择器的 Simpleform](../Images/554b5d0f50ac7dbb4827f1acd53409e2.png)

以上两者都产生了这个结果，效果很好：

```
<div class="control-group string required date" id="user-birthday">
    <label class="string required control-label" for="user_birthday"><abbr title="required">*</abbr> Birthday</label>
    <div class="controls">
        <div class="input-append">
            <input class="string required disabled" disabled="disabled" id="user_birthday" name="user[birthday]" size="50" type="text" />
            <span class="add-on">
                <i class="icon-calendar" style="color:grey"></i>
            </span>
        </div>
    </div>
</div> 
```

当我尝试将变量解析到包装器时

```
:wrapper_html=> => {:data-date => "21-12-2012"} 
```

它抛出错误......

我必须做什么？我对扩展宝石很陌生。

我必须写什么才能让它工作？

*   SimpleForm 包装器？
*   应用程序/输入/datepickerInput.rb？
*   初始化程序/datepicker.rb？
*   辅助方法？

一个例子将非常有帮助！

提前谢谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:04:09.670

我已经切换回 rails 实现的表单。对我（作为初学者）simple_form 似乎不够清楚。

对于我上面的解决方案，我创建了一个 FormBuilder：

```
class BootstrapFormBuilder < ActionView::Helpers::FormBuilder

  def birthday_field_with_hint_and_icons (name, *args)
    options = args.extract_options!
    birthday_field_icons(name) + hint(options[:hint])
  end

  def birthday_field_icons(name, *args)
    dd = 'data-date'
    ddf = 'data-date-format'
    content_tag :div, class: "input-append date", dd => 18.years.ago.strftime("%d-%m-%Y"), ddf => "dd-mm-yyyy", id: "user_birthday" do
      text_field(name, :disabled => 'disabled') + icon("icon-calendar")
    end
  end

  private

  def icon(icon)
    content_tag :span, class: "add-on" do
      content_tag :i, style: "color: grey;", class: icon do
      end
    end
  end

  def hint(hint)
    content_tag :span, class: "help-block" do
      hint
    end
  end
end 
```

谢谢你的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:48:38.247

您可以创建自定义字段。按照[本教程](https://github.com/plataformatec/simple_form/wiki/Adding-custom-input-components)执行此操作。

# ruby - Ash pidfile showing wrong process id

> ID：12706968
> 
> 赞同：0
> 
> 时间：2012-10-03T10:52:47.473
> 
> 标签：ruby, bash, monit, openwrt, ash

I've got a really simple wrapper script to start a ruby program that monitors a network connection. The script's on router - hence we're using ash, not bash.

Since we're using monit to monitor the status, I need a PID file. The problem is, the process id set by the wrapper is one less than the ruby program.

Monit therefore spans hundreds of processes. How can I get the wrapper to start the ruby program and create the correct pidfile?

My wrapper looks like this:

```
#!/bin/sh /etc/rc.common
  start(){
    echo $$ > /var/run/ping.pid
    ruby /etc/scripts/ping.rb & > /dev/null 2>&1
  }
  stop(){
    kill `cat /var/run/ping.pid`
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T11:18:18.797

I think you'll have to do:

```
#!/bin/sh /etc/rc.common
  start(){
    ruby /etc/scripts/ping.rb & > /dev/null 2>&1
    echo $! > /var/run/ping.pid
  }
  stop(){
    kill `cat /var/run/ping.pid`
} 
```

In POSIX shells (like `sh`), the `$$` contains the current process ID of the shell, while `$!` contains the process ID of the most recently spawned asynchronous sub-process. In this case, `$!` contains ruby's PID.

# javascript - 使用 jquery 或纯 javascript 保留子字符串模式

> ID：12706977
> 
> 赞同：-1
> 
> 时间：2012-10-03T10:53:16.130
> 
> 标签：javascript, jquery, html

文本框具有存储具有电话号码或邮政编码类型的字符串的属性。

用户开始键入按键的位置和时间应以电话/邮政编码格式填充文本框。例如 -

第一种模式是 234-23432，

第二个模式是 (234)24234-324。

因此，当用户键入某些键时，应相应地排列字符。解决方案是使用纯 JavaScript 还是 jQquery 都没有关系

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:03:25.913

从[页面](http://snipplr.com/view/11578/)。您可以使用以下代码。你可以在[jsfiddle上测试它](http://jsfiddle.net/PSkSK/)

```
 $(function() {
    $("input[name='phone']").keyup(function() {
        var curchr = this.value.length;
        var curval = $(this).val();
        if (curchr == 3) {
            $(this).val("(" + curval + ")" + "-");
        } else if (curchr == 9) {
            $(this).val(curval + "-");
        }
    });
});​ 
```

# winforms - Application.Run(new Form1) 方法和使用列表丢失

> ID：12706978
> 
> 赞同：1
> 
> 时间：2012-10-03T10:53:32.420
> 
> 标签：winforms, visual-studio-2010

我正在使用 VB 2010 express 创建一个简单的表单应用程序，运行它时没问题，但为什么我不必像过去那样键入 Application.Run() 方法来让它工作，为什么是这个失踪？

我已经检查了解决方案资源管理器中的显示所有文件。

此外，我的表单代码也没有在代码顶部列出通常使用的命名空间！

# c# - 在 C# 中执行 SSIS 包中的任务的顺序

> ID：12706980
> 
> 赞同：1
> 
> 时间：2012-10-03T10:53:37.480
> 
> 标签：c#, .net, sql-server, ssis

我正在编写一个应用程序来编辑 SSIS 包。在我的应用程序中，所有任务都显示在 DataGridView 中，用户可以在其中更改名称、描述、连接等。

当我遍历包中的所有可执行文件时，似乎迭代按字母顺序工作。我希望迭代使用包中任务的排列顺序。有没有办法找出通过 C# 执行任务的顺序？如果 DataGridView 中的任务在执行时按顺序排列，则更容易理解包的流程。

是否有我缺少的财产或其他东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T11:39:23.653

在可执行文件上，您需要检查[PrecedenceConstraints](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.precedenceconstraints.aspx)集合。如果您知道您从不使用表达式并且您的[PrecedenceConstraint](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.precedenceconstraint.aspx)总是成功，那么您可以跳过查看大多数属性，否则您将考虑 EvalOp、Expression 和 Value。

这个[演示](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dts.runtime.precedenceconstraint.precedenceexecutable.aspx)可能会让您更好地了解如何枚举和挑选碎片。

# sql - 根据列值对表进行条件连接

> ID：12706981
> 
> 赞同：0
> 
> 时间：2012-10-03T10:53:40.350
> 
> 标签：sql, join, sql-server-2008-r2

我们有下表，其中包含`deviceId`和`customerPrefix`列。

```
tblDeviceInfo: 
deviceId       customerPrefix
1             ABC
2             XYZ 
```

基于客户前缀，我们也有设备表，我在下面只列出了 2 个，但是我们有太多的，上面的 tblDeviceInfo 表可以包含许多不同的客户前缀，我知道这是一个不好的做法，但这就是我们在时刻，我们必须暂时使用它。

```
tblDeviceABC
deviceId           deviceName
1              NameABC1
2              NameABC2

tblDeviceXYZ
deviceid           deviceName
1             NameXYZ1
2             NameXYZ2 
```

当我查询 tblDeviceInfo （可以包含很多行）时，我希望能够获得以下信息：

```
deviceId, deviceName, customerPrefix
1            NameABC1          ABC
2            NameXYZ1          XYZ 
```

目前我们从 tblDeviceInfo 表中获取所有内容，开始循环（在 C# 应用程序中）并根据客户前缀从相关表中获取设备详细信息，我想知道是否有一种基于列值加入表的方法和用一个这样的 sql 用动态 sql 取回所有东西

```
 @sql = 'Select deviceId, customerPrefix From tblDeviceInfo i
  INNER JOIN tblDevice' + d.customerPrefix + ' d ON d.deviceId = i.deviceId' 
```

这不太正确，但无论如何可以通过动态 sql 或任何其他方式实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T11:02:31.203

这不仅是不好的做法，而且很糟糕。

但是，您也许可以像这样解决查询：

```
Select deviceId, customerPrefix From tblDeviceInfo i
LEFT OUTER JOIN tblDeviceABC dABC ON dABC.deviceId = i.deviceId
...
LEFT OUTER JOIN tblDeviceXYZ dXYZ ON dXYZ.deviceId = i.deviceId 
```

将对结果进行大量空值检查，但您应该能够在一个（昂贵的）查询中进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T11:05:24.390

您可以在子查询中将`union`所有`tblDEVICE`内容与 infor 表连接起来，

```
SELECT  b.*, a.customerPrefix
FROM    tblDeviceInfo a
        INNER JOIN
        (
            SELECT deviceID, deviceName From tblDeviceABC
            UNION
            SELECT deviceID, deviceName From tblDeviceXYZ
        ) b ON a.deviceID = b.deviceID 
```

# node.js - Node.js & Mongoose：异步函数逻辑

> ID：12706993
> 
> 赞同：0
> 
> 时间：2012-10-03T10:54:10.787
> 
> 标签：node.js, mongodb, asynchronous, mongoose

我正在为一个项目编写 API，最近我们将技术堆栈转移到了 Node.js 和 MongoDB。但是我无法解决与 Node 和 Mongo 相关的一些方面。

我通过查看臭名昭著的 Node Beginner 教程开始编写 Node 代码，其中高度提到遵循**非阻塞**逻辑。也就是说，如果我理解正确，不是等待一个函数完成，而是继续前进，然后“神奇地”得到你继续前进的那个函数的结果。

但是有一件事让我感到困惑，如果非阻塞是Node的本质，我在查询数据库时是否应该遵循它，因为我必须保证并返回连接结果为成功或错误. 我的代码会更好地解释 tl;dr's; （顺便说一句，我使用**Mongoose**作为 mongoDB ODM。

```
db.on('error', function(err){
        if(err)
            console.log("There is an error");
        response.write("Terrible Error!");
        response.end();
    }); 
```

**我已经写了在'db.on（）'错误代码之后**数据库连接成功时该怎么做，但是经过第二次思考我认为最好写**在**'function（err）'中，因为发生错误它会直接取消操作，结束响应。**但这是否违背了 Node.js 的非阻塞逻辑？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:02:02.930

您问题的本质是在哪里放置回调代码？[推荐的模式是使用文档](https://github.com/mongodb/node-mongodb-native#find)中描述的那种模式。这将任何文档逻辑包装在回调中以避免阻塞操作。

# mysql - SQL LEFT JOIN 仅最新的右列条目？

> ID：12706995
> 
> 赞同：0
> 
> 时间：2012-10-03T10:54:16.117
> 
> 标签：mysql, sql

所以我有两个这样的表：

```
create table A
{
    id int;
    ...
}

create table B
{
    id int;
    a_id int;
    t timestamp;
    ...
} 
```

A 与 B 是一对多的

我想要：

```
SELECT * FROM A LEFT JOIN B ON A.id = B.a_id ??? 
```

但是我想为 A 中的每个条目准确返回一行，其中 B 具有最新的 t 字段（如果没有 B 条目，则 Bs 字段为空）。

那不是返回所有 AB 对，我只想选择关于 A 的最新一对（如果没有 B 条目，则选择 A-null ）。

有什么方法可以在 SQL 中表达这一点吗？（我使用的是 MySQL 5.5）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T11:00:01.127

`LEFT JOIN`只关心确保返回 in 中的每一行*，*`A`即使 in 中没有相应的连接行`B`。

需要`just one row`需要另一个条件。MySQL 的选项有限，但可以是：

```
SELECT
  *
FROM
  A
LEFT JOIN
  B
    ON  B.id = A.id
    AND B.t = (SELECT MAX(lookup.t) FROM B AS lookup WHERE lookup.id = A.id) 
```

另一个可能是...

```
SELECT
  *
FROM
  A
LEFT JOIN
(
  SELECT id, MAX(t) AS t FROM B GROUP BY id
)
  AS lookup
    ON lookup.id = A.id
LEFT JOIN
  B
    ON  B.id = lookup.id
    AND B.t  = lookup.t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T10:58:59.870

您可以执行以下操作：

```
SELECT A.*, B.*
FROM 
    A
    LEFT JOIN 
    (SELECT B.a_id, MAX(t) as t FROM B GROUP BY B.a_id) BMax
    ON A.id = BMax.a_id
    JOIN B
    ON B.a_id = BMax.a_id AND B.t = BMax.t 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T10:59:01.440

您首先需要`t`从`tableB`子查询中获取最新信息，然后将其与 tableA 和 tableB 连接。

```
SELECT  a.*, c.*
FROM    tableA a
        LEFT JOIN
        (
            SELECT a_ID, max(t) maxT
            FROM tableB
            GROUP BY a_ID
        ) b on a.a_id = b.a_ID
        LEFT JOIN tableB c
            ON b.a_ID = c.a_ID AND
                b.maxT = c.t 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T11:00:01.880

试试这个：

```
SELECT * 
FROM tableA A LEFT JOIN 
     (select a_id ,max(t) as max_t
      from tableB
      group by a_id )b
on  A.id = b.a_id
and A.t=b.max_t 
```