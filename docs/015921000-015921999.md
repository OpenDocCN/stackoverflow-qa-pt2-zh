# StackOverflow 问答 15921000-15921999

# c# - 如何同时为 x86 和 x64 配置 VS2012 解决方案

> ID：15921006
> 
> 赞同：7
> 
> 时间：2013-04-10T08:42:48.960
> 
> 标签：c#, visual-studio, msbuild

我们有一个 VS2012 .NET 4 产品，它有 2 个不同的 SKU 的 A 和 B，我们目前只为 x86 构建。我们也有通常的配置`Debug`，`Release`这意味着我们目前有 4 种配置。

*   调试A
*   调试B
*   发布A
*   版本B

查看其中一个 .csproj 文件，它看起来像这样

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'DebugA|x86' ">
    <OutputPath>..\bin\DebugA\</OutputPath>
</PropertyGroup> 
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'ReleaseA|x86' ">
    <OutputPath>..\bin\ReleaseA\</OutputPath>
</PropertyGroup> 
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'DebugB|x86' ">
    <OutputPath>..\bin\DebugB\</OutputPath>
</PropertyGroup> 
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'ReleaseB|x86' ">
    <OutputPath>..\bin\ReleaseB\</OutputPath>
</PropertyGroup> 
```

显然，添加 x64 会使这从 4 到 8 个不同的组合翻倍，而且 VS 似乎也随时添加 AnyCPU 平台配置。确保 30 多个项目中所有 8 个都正确配置需要在 VS 中大量点击，而且很容易出错。

我已经阅读了其他一些解决多目标问题的 SO 问题，以及在参考路径中使用 ${Platform} 涉及的不同平台包含不同参考的建议之一。我想我可以为我的项目配置做类似的事情，所以我在尝试做多平台时尝试了这个：

```
<PropertyGroup Condition=" '$(Configuration)' == 'DebugA' Or '$(Configuration)' == 'DebugB' ">
     <OutputPath>..\bin\${Platform}\${Configuration}\</OutputPath>
</PropertyGroup> 
<PropertyGroup Condition=" '$(Configuration)' == 'ReleaseA' Or '$(Configuration)' == 'ReleaseB' ">
     <OutputPath>..\bin\${Platform}\${Configuration}\</OutputPath>
</PropertyGroup> 
```

从理论上讲，这应该可以为我提供所有 8 种不同组合所需的东西，只需两个块。但是现在查看 VS，我看不到 neitehr x86 或 x64 作为该项目的可用构建平台。看起来 VS 实际存储构建平台的唯一方法是将它们编码为属性组上的异常条件？说是不是这样...

有没有办法制作一个看起来“漂亮”的多平台 .csproj 可以很好地与 VS 配合使用？

我是否可以创建 .csprojs 然后决定不在 VS 中编辑它们，相信 msbuild 将使用正确的平台，即使 VS 无法在单个项目的属性窗口中显示任何平台？

**编辑：**

似乎这个问题有点令人困惑：明确地说，我想知道如何设置、维护和概述项目的配置，以及我的解决方案的构建配置，当有很多项目和 config|platform 的八种组合时. 我知道如何手动执行此操作，但并非没有失去理智或在 200 多个属性页之一上犯错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-12T20:55:57.410

如果您不介意必须手动更改项目文件一次，那么您可以将所有共享配置放在一个配置文件中并从每个项目中引用它。为此，您需要首先创建配置文件。该文件只是一个普通的 MsBuild 文件，其中包含您希望在所有项目之间共享的所有信息（如构建配置）。该文件大致如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="3.5"
         DefaultTargets="Build"
         xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <!-- VS information -->
        <ProductVersion>9.0.30729</ProductVersion>
        <SchemaVersion>2.0</SchemaVersion>

        <!-- Default configuration -->
        <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
        <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
        <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
        <FileAlignment>512</FileAlignment>

        <!-- Project directories -->
        <AppDesignerFolder>Properties</AppDesignerFolder>
        <OutputPath>$(SolutionDir)\..\build\bin\$(Platform)\$(Configuration)\</OutputPath>
        <IntermediateOutputPath>$(SolutionDir)\..\build\temp\bin\obj\$(AssemblyName)\$(Platform)\$(Configuration)\</IntermediateOutputPath>

        <!-- Build configuration -->
        <ErrorReport>prompt</ErrorReport>
        <WarningLevel>4</WarningLevel>
        <TreatWarningsAsErrors>true</TreatWarningsAsErrors>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
        <DebugSymbols>true</DebugSymbols>
        <DebugType>full</DebugType>
        <Optimize>false</Optimize>
        <DefineConstants>TRACE;DEBUG;CODE_ANALYSIS</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
        <DefineConstants>TRACE;CODE_ANALYSIS</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
        <DebugSymbols>true</DebugSymbols>
        <DebugType>full</DebugType>
        <Optimize>false</Optimize>
        <DefineConstants>TRACE;DEBUG;CODE_ANALYSIS</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
        <DefineConstants>TRACE;CODE_ANALYSIS</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x64' ">
        <DebugSymbols>true</DebugSymbols>
        <DebugType>full</DebugType>
        <Optimize>false</Optimize>
        <DefineConstants>TRACE;DEBUG;CODE_ANALYSIS</DefineConstants>
    </PropertyGroup>
    <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x64' ">
        <DebugType>pdbonly</DebugType>
        <Optimize>true</Optimize>
        <DefineConstants>TRACE;CODE_ANALYSIS</DefineConstants>
    </PropertyGroup>
    <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
</Project> 
```

*   第一个`PropertyGroup`定义了整体常量，即所有项目用于所有构建配置的常量。正如您所看到的，`OutputPath`您可以使用构建变量，例如`$(Platform)`和`$(Configuration)`来确定二进制文件的位置等。
*   第一个`PropertyGroup`还有一堆通常由 Visual Studio 定义的设置，例如`ProductVersion`. 从技术上讲，您不必移动它们，但如果您关心的话，移动它们确实会减少项目文件中的混乱。
*   以下部分定义了不同构建配置的不同设置。

一旦你定义了配置文件，比如说它被称为`BaseConfigurations.targets`，那么你必须编辑你的项目文件。不幸的是，您必须浏览所有项目文件，但您只需执行一次。链接配置文件后，您可以通过更改配置文件来更改所有共享配置。

一个普通的项目文件大致如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProjectGuid>{33017F71-5A1C-4113-9041-4DD3F58921D0}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>MyProject</RootNamespace>
    <AssemblyName>MyProject</AssemblyName>
    <TargetFrameworkVersion>v4.5</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Class1.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

为了链接配置文件，您需要：

*   从第一个删除`PropertyGroup`已在您的配置文件中定义的
*   添加行`<SolutionDir Condition="'$(SolutionDir)' == '' or '$(SolutionDir)' == '*undefined*'">$(MSBuildProjectDirectory)\..</SolutionDir>`。如果您仅从 Visual Studio 构建（因为 Visual Studio 自动定义`SolutionDir`变量），则这不是必需的，但如果您还想通过 MsBuild 构建项目，则这是必需的。这一行还假设每个项目都在它自己的子目录中，并且解决方案文件是每个项目文件的一个目录，即您的结构类似于：

    ```
    source
        MyProject
            MyProject.csproj
        MySolution.sln 
    ```

*   在第一个下方`PropertyGroup`添加以下行`<Import Project="$(SolutionDir)\BaseConfiguration.targets" />`。这向 MsBuild（以及 Visual Studio）表明您要导入配置文件。

*   删除构建配置
*   在文件末尾删除行`<Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />`。这是在您的配置文件中定义的，因此不再需要。

毕竟，您的项目文件应如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props" Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" />
  <PropertyGroup>
    <SolutionDir Condition="'$(SolutionDir)' == '' or '$(SolutionDir)' == '*undefined*'">$(MSBuildProjectDirectory)\..</SolutionDir>
    <ProjectGuid>{33017F71-5A1C-4113-9041-4DD3F58921D0}</ProjectGuid>
    <OutputType>Library</OutputType>
    <RootNamespace>MyProject</RootNamespace>
    <AssemblyName>MyProject</AssemblyName>
  </PropertyGroup>
  <Import Project="$(SolutionDir)\BaseConfiguration.targets" />
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="Microsoft.CSharp" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Class1.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

笔记：

*   如果您遵循这种方法，Visual Studio 应该能够识别所有不同的构建配置并允许您选择正确的配置。请注意，您可能需要进入解决方案的“配置管理器”，以便在特定解决方案配置中包含或排除项目。
*   如果您采用这种方法，则不再可能通过项目的属性页更改任何全局定义的属性。您必须在配置文件中进行更改，然后将反映在每个项目的属性中。
*   如果您使用的是 Visual Studio 2010 或更早版本，那么如果您对配置文件进行更改，则需要重新加载解决方案（如果已打开），因为 Visual Studio 2010 不会检测到包含文件的更改。Visual Studio 2012 应该能够检测到包含文件的更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T04:07:27.183

您需要批量构建，您可以在其中选择要运行的不同构建。

![在此处输入图像描述](https://i.stack.imgur.com/jOvEI.png)

您可以使用 Tools -> Options -> Keyboard 将其映射到键盘快捷键，然后搜索 Build.BatchBuild

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T18:34:59.327

在我看来，在配置名称中结合平台和 SKU 是不明智的。在您的情况下，我建议仅坚持使用 Debug 和 Release 项目配置。您的解决方案应该有一个用于 SKU A 的项目和一个用于 SKU B 的单独项目（共享任何公共文件）。除了两个构建配置之外，每个项目还可以针对 x86 和 x64 平台。然后，您可以根据需要添加任意数量的解决方案配置，而不会使单个项目配置变得更加复杂。

# c# - 从 C# 执行 Python 脚本

> ID：15921007
> 
> 赞同：4
> 
> 时间：2013-04-10T08:42:49.277
> 
> 标签：c#, python

我正在尝试通过以下方式从 C# 执行 python 脚本：

```
int ExitCode;
ProcessStartInfo ProcessInfo;
Process Process;

ProcessInfo = new ProcessStartInfo();
ProcessInfo.FileName = "C:\Python27\python.exe";
ProcessInfo.Arguments = "C:\generate.py book1.pdf";
ProcessInfo.CreateNoWindow = true;
ProcessInfo.UseShellExecute = false;
ProcessInfo.RedirectStandardOutput = true;

Process = Process.Start(ProcessInfo);
Process.WaitForExit();
ExitCode = Process.ExitCode;
Process.Close(); 
```

当我在服务器上执行此操作时，我将 ExitCode 设为 1。但相同的代码在本地运行良好。

此外，当我从 cmd 提示符运行此命令时，python 脚本执行时没有任何问题。

这个 python 脚本实际上用于将 PDF 页面转换为 SWF 文件，从页面中提取文本并使用各种开源创建 pdg 页面的缩略图。

谁能帮我理解上面的 C# 代码可能是什么问题，或者我需要在服务器上设置任何权限吗？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T20:50:13.340

从[这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)错误代码 2 代表`ERROR_FILE_NOT_FOUND`，因此您应该对路径/文件权限有一些问题。

首先，你可以从 python 进程中读取 stdout 和 stderr ，看看你是否从那里得到一些信息：

```
 ProcessInfo.RedirectStandardOutput = true;
    ProcessInfo.RedirectStandardError = true;
    // (...)
    Process.WaitForExit();
    string stderr = Process.StandardError.ReadToEnd();
    string stdout = Process.StandardOutput.ReadToEnd();
    Console.WriteLine("STDERR: " + stderr);
    Console.WriteLine("STDOUT: " + stdout); 
```

可能 WriteLine 不是呈现信息的最佳方式，因此请对其进行调整以更好地满足您的需求（记录该信息，将其写入临时文件等）。

我也几乎不知道如何用 C# 编程，但是当我尝试编写一个类似于你的程序时，它给了我一个错误，因为路径没有被转义。所以你也可以尝试将\替换为\\：

```
ProcessInfo.FileName = "C:\\Python27\\python.exe";
ProcessInfo.Arguments = "C:\\generate.py book1.pdf"; 
```

祝你好运。

### 编辑

我刚刚注意到我在评论中将您的错误代码 (1) 与其他人混淆了 (2)，但这些提示可能仍然对您有所帮助。

# c# - 检查 SMS 消息是否在标准 GSM 字母表中

> ID：15921013
> 
> 赞同：3
> 
> 时间：2013-04-10T08:43:11.803
> 
> 标签：c#, unicode, sms

我正在使用 API 发送 SMS，我需要计算消息中的 SMS 数量。

如果消息仅使用[GSM 字母字符](http://en.wikipedia.org/wiki/GSM_03.38)，则长度最多为 160 个字符，但如果消息包含此字母表之外的任何字符，它将被编码为 Unicode (UCS-2)，然后最多只能有 70 个字符一条短信中的字符。当发送连接的，即多部分消息时，每个部分的长度分别最多只能为 153 或 67 个字符。

我正在使用 C# 发送消息，如何检查消息是否仅包含 GSM 字母字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-19T11:54:10.397

你可以用一个非常可怕的正则表达式来做到这一点。这是一个扩展方法。

```
public static bool IsUnicodeSms(this string message)
{
    var strMap = new Regex(@"^[@£$¥èéùìòÇØøÅå_ÆæßÉ!""#%&'()*+,-./0123456789:;<=>? ¡ABCDEFGHIJKLMNOPQRSTUVWXYZÄÖÑÜ§¿abcdefghijklmnopqrstuvwxyzäöñüà^{}\[~]|€]+$");
    return !strMap.IsMatch(message);
} 
```

享受

# php - 以正确的方式输出数组

> ID：15921016
> 
> 赞同：1
> 
> 时间：2013-04-10T08:43:21.493
> 
> 标签：php, mysql, zend-framework, zend-db

我使用 ZF1，如果出现以下情况，我需要添加标题：

```
title="<?php echo isset($this->region['klu']) ? $this->region['klu'] : 'region name for  klu'?>" 
```

其中 klu - 是我表中 r_alias 行中的数据

所以，在我的控制器中，我做了这样的事情：

```
$region = Map_Model_Map_Factory::getFetchAll();
        $this->view->assign('region', $region); 
```

什么是 getFetchAll()：

```
static function getFetchAll()
    {
        $table = new Map_Model_Map_Table();
        $select = $table->select()
                        ->order('r_alias ASC');
        return $table->fetchAll($select);
    } 
```

但是这里出了点问题，我需要有我的回声区域，而不是我有空页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:47:00.287

你试过这样

```
$data['region'] = Map_Model_Map_Factory::getFetchAll();
//echo '<pre>';
//print_r($data['region']); // only for testing
$this->view->assign('region', $data); 
```

在视图中回显它

```
echo $region['klu']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:47:08.277

请尝试以下代码

```
static function getFetchAll()
    {
        $table = new Map_Model_Map_Table();
        $select = $table->select()
                        ->order('r_alias ASC');
        return $table->fetchAll($select).toArray();
    } 
```

将第一行更改为以下

```
title="<?php echo (isset($this->region['r_alias']) && $this->region['r_alias']=='klu') ? $this->region['r_alias'] : 'region name for  klu'?>" 
```

# jsf - p:fileDownload bean 方法被调用但文件下载不显示

> ID：15921023
> 
> 赞同：4
> 
> 时间：2013-04-10T08:43:42.353
> 
> 标签：jsf, primefaces, download

您好，我正在使用 JSF 和 Primefaces 进行文件上传和下载相同的文件操作。

我正在使用来自不同论坛和博客的技术（BelusC 的博客和 Primefaces Showcase）。

> 这个操作的主要思想是让用户上传一个文件，并为上传的文件生成一个下载链接，以便他可以在提交之前下载并看到它。

这是我的代码：

索引.xhtml

```
<h:form>
    <p:fileUpload showButtons="false" label="Attach Refrral" 
        auto="true" fileUploadListener="#{fileBean.uploadListener}"/>
</h:form>

<h:form >
   <p:commandLink>
      See Uploaded File
      <p:fileDownload value="#{fileBean.refrralFile}"/>
   </p:commandLink>
</h:form> 
```

FileBean.java

```
private StreamedContent refrralFile;

    public void uploadListener(FileUploadEvent evt)throws Exception
    {
        UploadedFile fx = evt.getFile();

        File mainDir = new File("C:/","fileStorage");
        if(!mainDir.exists())
        {
            mainDir.mkdir();
        }
        File subDir = new File(mainDir,"AttachedRefrrals");
        if(!subDir.exists())
        {
            subDir.mkdir();
        }
        String fileName = fx.getFileName();

        File f = new File(subDir,fileName);
        FileOutputStream fos = new FileOutputStream(f);
        IOUtils.copy(fx.getInputstream(), fos);

        InputStream is = ((ServletContext)FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream(f.getAbsolutePath());
        refrralFile  = new DefaultStreamedContent(is, new MimetypesFileTypeMap().getContentType(f), fileName);

    }

    public StreamedContent getRefrralFile() {
        return refrralFile;
    } 
```

使用上面的代码文件上传成功但是如果我点击文件下载链接ths抛出异常：

```
java.lang.IllegalStateException: getOutputStream() has already been called for this response 
```

我使用了**FacesContext#responseComplete()**，因为它被建议很多地方，现在下载链接根本不起作用。

如果我的技术或代码有误，请纠正我，如果您知道，请提出更好的方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T12:10:21.743

默认情况下`<p:commandLink>`会触发一个 ajax 请求。您无法通过 ajax 下载文件。负责处理 ajax 请求的 JavaScript 不知道如何处理与预期的 XML 响应完全不同的检索到的二进制文件。由于明显的安全原因，JavaScript 没有任何工具来触发与任意内容的*另存为*对话。

因此，要解决您的具体问题，请使用

```
<p:commandLink ajax="false"> 
```

要不就

```
<h:commandLink> 
```

### 也可以看看：

*   [如何从 JSF 支持 bean 提供文件下载？](https://stackoverflow.com/questions/9391838/how-to-stream-a-file-download-in-a-jsf-backing-bean/9394237#9394237)
*   [PrimeFaces`<p:fileDownload>`展示页面](http://www.primefaces.org/showcase/ui/fileDownload.jsf)- 这也明确显示`ajax="false"`

# asp.net - 测试本地化网站

> ID：15921024
> 
> 赞同：0
> 
> 时间：2013-04-10T08:43:43.577
> 
> 标签：asp.net, testing, localization

我正在开发一个页面，根据用户访问网站的国家/地区将用户重定向到适当的页面。有没有办法让网站或浏览器误以为我来自不同的国家？

谢谢

编辑---- 位置基于 IP 地址。我在 Visual Studio 2010 中开发，理想情况下需要能够在调试时测试位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:45:28.703

如果您使用代理，那么 yes 。您可以欺骗您来自其他国家/地区的网站。

# java - 在 Sip/VoIP 或常规通话期间收听 DTMF 音

> ID：15921028
> 
> 赞同：0
> 
> 时间：2013-04-10T08:43:53.457
> 
> 标签：java, android, sip, voip, dtmf

我读过一些关于 Android 中 DTMF 的文章。我想不可能通过流式传输 .wav 文件（或其他格式）进行自动电话呼叫并检测其他人（呼叫接收者）的输入。

我想制作一个应用程序来呼叫我/或其他人并等待输入以执行某些操作。Android中的VoIP可以实现这种情况吗？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:07:55.143

您可以使用[Tropo](https://www.tropo.com/home.jsp)和[Prophecy](http://evolution.voxeo.com/)等基于云的电话服务来实现此要求。这些服务允许您拨打外线电话并收听 DTMF 或语音输入。他们还流式传输 .wav 文件供电话中的人收听。您可以通过向服务 API 发出 HTTP 请求从任何应用程序触发这些调用，因此它可以是发起调用的 Android 应用程序。此解决方案独立于电话设备（任何移动电话、VoIP 电话或固定电话），它适用于 VoIP 和 PSTN。

# c# - 用户需要的Gridview数据

> ID：15921029
> 
> 赞同：0
> 
> 时间：2013-04-10T08:43:59.090
> 
> 标签：c#, asp.net, sql-server-2005

我有一个用于显示数据的网格视图，**数据包含视频文件名和 url**。

表“video”包含两列“Videoname”和“VideoUrl”。

当我当时将数据与gridview绑定时，视频文件fatch form url并且此视频绑定在gridview中。分页和页面大小为2。

我在这个表中有 1000 多个数据。

现在的问题是在 gridview 中加载数据的速度。

所以请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:59:54.603

视频文件加载不是让一切变慢吗？

如果我很好理解，当您在表格中渲染时，视频会加载对吗？如果是，我认为这是视频加载真正的问题。如果可以，请关闭播放器自动播放并按用户要求播放。

# java - 子树结构的 JPA 合并

> ID：15921034
> 
> 赞同：1
> 
> 时间：2013-04-10T08:44:14.560
> 
> 标签：java, jpa

我有一个实体，其中包含与其他实体的许多 OneToMany 关系。其中一个实体实际上是一个树结构（具有三个级别）。

当我更新我的对象（在 servlet 调用中）时，我会更新所有对象字段，包括树结构，但仅在根级别（第一级）。更新后，我会合并对象。

它工作正常，虽然有点慢。我设置 JPA 日志以查看正在执行的实际 sql 事务，并注意到树结构总是在数据库中完全重新生成（即删除和插入所有对象）。其他字段并非如此，即仅更新已更改的字段。就好像 eclipselink（我使用 eclipselink）每次都将树结构视为新的。

这是正常行为吗？我需要在合并之前扫描树并更新每个树节点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:43:03.523

树结构的 id 是什么（包括代码）？

您是分配一个新的 id，还是在每次合并之前使 id 为空？

你在使用 orphanRemoval 吗？

您如何合并更改（包括代码）是最重要的问题。

# java - 是否有像 NGen 这样的 JVM 预编译器解决方案？

> ID：15921043
> 
> 赞同：2
> 
> 时间：2013-04-10T08:44:28.963
> 
> 标签：java, jvm, jit

我最近在比较 JVM 和 CLR 平台并讨论 JIT 编译的影响。我的讨论导致.NET 能够使用 NGen 工具预编译代码，这将消除对 JIT 编译的需要。Java平台中是否有等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T10:43:20.333

我听得最多的本机编译器是 Excelsior JET - Java 虚拟机和本机编译器。有关详细信息，请参阅[http://www.excelsior-usa.com/jet.html 。](http://www.excelsior-usa.com/jet.html)基本上，您可以将您的项目变成一个单一的可执行文件，而无需通常的 Java 打包的麻烦。

他们已经存在了很长时间（当我在 2001 年加入 Java 行列时他们就在这里，现在他们就在这里。一周前我刚刚听说一家公司如何使用他们的解决方案并且对此感到满意。

大约几年前，在 JavaONE，我还遇到了一个或两个该产品的开发人员，他们告诉我，他们很活跃，踢得很好，做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T10:30:48.107

我个人不知道（您可以查看诸如launch4j、jexe等选项，它们只是包装器，不像NGen），我不确定它有多可行......这个答案问题涉及编译为本机代码的一些细节：[Java和.Net之间的JIT差异](https://stackoverflow.com/questions/2506969/what-are-the-differences-in-jit-between-java-and-net)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-13T18:08:58.943

是的。从 Java 9 开始，您可以。您正在寻找的功能称为**提前 (AOT)**编译。

目前使用的主要 JVM 有两种：

*   HotSpot（及其变体），它是 Oracle 的主要 JVM。
*   OpenJ9，最初来自 IBM。

**开放J9**

在 OpenJ9 中，只需使用该`-Xshareclasses:persistent`选项运行 Java 虚拟机。这会导致 VM 将编译后的二进制文件存储到缓存中，该缓存会在系统启动时持续存在。它并不强制 Java VM 在所有情况下都使用预编译代码，因为在许多情况下，即时 (JIT) 代码可以更快地执行。JVM 将根据具体情况选择是否使用缓存的二进制文件。当一个缓存的 AOT 方法运行时，它也可能被 Just-In-Time (JIT) 编译器进一步优化。

完整的详细信息可在以下网址获得：

*   [https://www.eclipse.org/openj9/docs/aot/](https://www.eclipse.org/openj9/docs/aot/)
*   [https://www.eclipse.org/openj9/docs/xshareclasses](https://www.eclipse.org/openj9/docs/xshareclasses)

**热点 (OpenJDK)**

HotSpot (OpenJDK) 构建现在包括一个实验性 VM，可以完全预编译所有内容，称为 GraalVM。您可以使用可执行文件手动创建本机二进制`jaotc`文件。 *注意：这目前仅适用于 Linux（可能还有 Mac）系统。*

有关如何使用 jaotc 编译器的详细信息位于：

*   [https://docs.oracle.com/javase/10/vm/java-hotspot-virtual-machine-performance-enhancements.htm#JSJVM-GUID-F33D8BD0-5C4A-4CE8-8259-FD9D73C7C7C6](https://docs.oracle.com/javase/10/vm/java-hotspot-virtual-machine-performance-enhancements.htm#JSJVM-GUID-F33D8BD0-5C4A-4CE8-8259-FD9D73C7C7C6)
*   [https://openjdk.java.net/jeps/295](https://openjdk.java.net/jeps/295)（这包括您为 java.base 模块生成和使用 AOT 库的示例）。

注意： jaotc 不像 OpenJ9 共享类标志那样简单易用。

# java - 来自鼠标 JAVA 的平均 X 和 Y 坐标

> ID：15921045
> 
> 赞同：0
> 
> 时间：2013-04-10T08:44:32.657
> 
> 标签：java, coordinates, average

如何计算从 JAVA 中的鼠标 IR 事件接收到的 12 个坐标的平均值？

我的意思是：每个动作都以 X 和 Y 坐标发送给我。将这些坐标缓存在12个坐标中计算这12个坐标的平均值

我知道如何获得数组的平均值，但是当 X 是坐标时它是如何工作的？X 尚未定义，因为它会改变，所以我该怎么做呢？

像这样的东西可以完成这项工作：

```
 int count = 0;
     double buffer = 0;
     while(true){ // loop waarin inputs binnen komen
     if(true){ // stel dat je een input binnenkrijgt
           count++;
           buffer += oX;
              if( count == 12 ){ // als je er 12 gekregen hebt
                 //send_output( buffer/12 ); // verzend
                 // reset buffer en count
                 System.out.println(buffer/12);
                         buffer = 0;
                     count = 0;

                  }
            }
        } 
```

@edit 也许为了更好地理解它：

```
public void onIrEvent(IREvent arg0) {       
    int oX;
    int oY;

    oX = arg0.getAx()/10;
    oY = arg0.getAy()/10; 
```

oX 和 oY 必须放在可以有 12 个坐标的缓冲区中。然后计算它们的平均值。

提前致谢

亲切的问候

帕斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:59:14.270

make`bufferX`和`bufferY`两个变量 public ；并在此方法中设置它们

```
int i =0;
public void onIrEvent(IREvent arg0) {       
    int oX;
    int oY;

    oX = arg0.getAx()/10;
    oY = arg0.getAy()/10;

/////////////here set the buffer
  if(i<12){
     bufferX += oX;
     bufferY +=oY;
 }
 i++;
} 
```

试试这个例子：

```
public class MouseMotionEventDemo extends JPanel implements MouseMotionListener {

private int mX, mY;
int bufferX = 0;
int bufferY = 0;
int count = 0;

public MouseMotionEventDemo() {
    addMouseMotionListener(this);
    setVisible(true);
}

public void mouseMoved(MouseEvent me) {
    mX = (int) me.getPoint().getX();
    mY = (int) me.getPoint().getY();
    bufferX += mX;
    bufferY += mY;
    System.out.println("X: "+mX+"  Y:"+mY);
    count++;
    if (count == 12) { 
        System.out.println("X average =" +bufferX / 12);
        System.out.println("Y average =" +bufferY / 12);
        count = 0;

    }
}

public void mouseDragged(MouseEvent me) {
     }

public static void main(String[] args) {
    JFrame f = new JFrame();
    f.getContentPane().add(new MouseMotionEventDemo());
    f.setSize(200, 200);
    f.show();

} 
```

}

# android - Android动画在第一次运行时不起作用

> ID：15921046
> 
> 赞同：2
> 
> 时间：2013-04-10T08:44:35.827
> 
> 标签：android, animation

所以这就是问题所在。
第一次运行动画不起作用，我不知道为什么。
起初我使用 xml 来制作动画，但这样动画只在第一次尝试时才起作用，再也不会，所以我改变并用 java 代码制作一切。
但现在，除了第一次尝试外，它总是运行。

必须澄清我必须使用 2.2 (froyo) 版本。

```
public class HomePage extends Activity {
protected View menu;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home_page_portrait);
    ImageButton plus = (ImageButton) findViewById(R.id.button1);
    menu = (View) findViewById(R.id.layoutmenu);
    plus.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            //menu.clearAnimation();
            Animation animation = new TranslateAnimation(0,-menu.getWidth(),0,0);
            menu.clearAnimation();
            if(menu.isShown()) {
                animation.setDuration(500);
                animation.setFillAfter(true);
                menu.setAnimation(animation);
                menu.setVisibility(View.GONE);      
            }
            else {
                animation.reset();
                animation = new TranslateAnimation(-menu.getWidth(),0,0,0);
                animation.setDuration(500);
                animation.setFillAfter(true);
                menu.setVisibility(View.VISIBLE);
                menu.setAnimation(animation);
            }
        }
    });
}
} 
```

有什么线索吗？

**编辑**
所以我改变了我的代码，但现在根本不起作用。

```
 public void onClick(View v) {
            //menu.clearAnimation();
            Animation animation;
            menu.clearAnimation();
            if(menu.isShown()) {
                //animation.reset();
                animation = new TranslateAnimation(0,-menu.getWidth(),0,0);
                animation.setDuration(500);
                animation.setFillAfter(true);
                animation.setAnimationListener(new Animation.AnimationListener() {

                    @Override
                    public void onAnimationStart(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        // TODO Auto-generated method stub
                        menu.setVisibility(View.GONE);
                    }

                });
                menu.setAnimation(animation);
                menu.setVisibility(View.GONE);      
            }
            else {
                //animation.reset();
                animation = new TranslateAnimation(-menu.getWidth(),0,0,0);
                animation.setDuration(500);
                animation.setFillAfter(true);
                animation.setAnimationListener(new Animation.AnimationListener() {

                    @Override
                    public void onAnimationStart(Animation animation) {
                        // TODO Auto-generated method stub
                        menu.setVisibility(View.VISIBLE);
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        // TODO Auto-generated method stub
                        menu.setVisibility(View.VISIBLE);
                    }

                });
                menu.setAnimation(animation);
                //menu.setVisibility(View.VISIBLE);
            }
            animation.reset();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:02:41.477

删除下面的行。

```
menu.setVisibility(View.GONE); 
```

与其在此处使 GONE 可见，不如在侦听器中添加一个**`AnimationListener`**to **`animation`**and in the listener，`onAnimationEnd(Animation animation)`方法使您的视图对 GONE 可见。

这将注意在整个动画完成后将视图的可见性更改为 GONE。

# c++ - 使用递归以正确的顺序打印整数的数字

> ID：15921047
> 
> 赞同：0
> 
> 时间：2013-04-10T08:44:38.403
> 
> 标签：c++

如何使用单个递归函数以正确的顺序打印未知长度的整数的数字？

```
int digit(int n)
{       
    if (n==0)
    {
    }
    else
    {
        cout << n%10 << endl;
        return digit(n/10);
    }
}
//the above function prints it in reverse 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:54:41.283

这会奏效；

[**编辑：**代码适用于输入，即 +ve、0、-ve 整数；它只打印数字，而不是 -ve 符号]

```
void digit(int n) //no need to return a value
{   
    if (n < 0)
        n = -1*n;
    if (n/10 > 0) //no need have else blocks
    {
        //for the correct order, make the recursive call first
        digit(n/10);            
    }
    //print when you reach the most significant digit
    cout << n%10 << endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:52:15.053

您必须考虑在单个函数调用中采取什么步骤以及将什么委托给下一个函数调用。打印一个数字似乎是一个不错的选择。取最不重要（最右边）的数字很容易：它是整数除以 10 的余数。

由于您想最后输出最低有效数字，因此您必须首先委托给您的函数：

```
digit( n / 10 );
std::cout << n % 10; 
```

# php - 将摘录文本设置为与博客文章不同

> ID：15921052
> 
> 赞同：0
> 
> 时间：2013-04-10T08:44:46.910
> 
> 标签：php, wordpress

我希望能够为每篇博客文章编写自己的摘录，而不是摘录博客文章的前几行。我已经搜索了 WordPress 文档，但还没有找到一种方法来做到这一点。

```
function html5wp_index($length) 
{
  return 50;
} 
```

这是我用来调用摘录的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:05:11.480

摘录已启用，但默认情况下对帖子隐藏。要使它们可见，请打开任何帖子。然后，您可以通过单击右上角的屏幕选项并选中“摘录”选项来显示“摘录”字段。

![在此处输入图像描述](https://i.stack.imgur.com/mcE3R.png)

如果您想为页面（或任何其他自定义帖子类型）做同样的事情，您可以将此代码添加到您的 functions.php 文件中：

```
add_post_type_support( 'page', 'excerpt' ); 
```

# visual-studio - 从 MFC exe 中查找构建 exe 的 Visual Studio 版本

> ID：15921053
> 
> 赞同：0
> 
> 时间：2013-04-10T08:44:49.403
> 
> 标签：visual-studio, mfc

我有一个用 MFC 制作的 exe。我想知道 exe 是在哪个 Visual Studio 版本上构建的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:34:13.543

[从http://www.ntcore.com/](http://www.ntcore.com/)尝试 CFFExplorer 。这个小程序告诉你很多关于windows可执行文件的有趣的事情，并且很好地猜测了开发环境被用来创建它。

# android - 设备管理员密码

> ID：15921056
> 
> 赞同：0
> 
> 时间：2013-04-10T08:44:55.450
> 
> 标签：android

当用户尝试在**Settings** -> **Security** -> **Device Administrators**下以管理员身份取消选中应用程序时，是否可以要求输入密码？

这将增加一个障碍，不允许用户轻松卸载应用程序，因为他们首先需要从应用程序中删除管理员权限（他们需要使用密码进行身份验证），然后才能卸载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:00:24.267

***这是不可能的 AFIK。这是用户的权利。***

您可以显示一个对话框以确认设备管理员的 DE 激活[，](http://developer.android.com/guide/topics/admin/device-admin.html)但[默认设备管理员 API](http://developer.android.com/guide/topics/admin/device-admin.html)都没有为您提供在 DE 激活设备管理员时显示密码对话框的方法，EDM API 也没有给您权限。

尽管 EDM API 提供了一种方法，您可以阻止设备管理员的 DE 激活。因此用户不能取消选中特定的设备管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-29T17:48:25.440

* * *

这是可能的，但你必须采用一些非常粗略的技术来实现这一点。例如，[Cerberus](https://www.cerberusapp.com/ "地狱犬")有一个名为“保护设备管理员”的选项，它会在您点击“停用此设备管理员”时立即锁定您的屏幕并要求输入登录名和密码。

我不建议您这样做，因为它被认为是恶意行为。您应该改用公司政策。AFAIK 它们已在较新版本的 Android 中实施，并且与特定制造商无关。

# python - 可以用ia64系统安装EPD吗？

> ID：15921060
> 
> 赞同：0
> 
> 时间：2013-04-10T08:45:15.517
> 
> 标签：python, enthought

我想在服务器上安装 EPD_free。但是 32 位版本和 64 位版本的 EPD 都无法安装成功。

当我运行 epd_free-7.3-2-rh5-x86.sh（32 位版本）时，我得到这个：

```
Installing to XXX/epd_free-7.3-2-rh5-x86 ... please wait
epd_free-7.3-2-rh5-x86.sh: line 313: 31657 Floating point exception$ENPLACE -h >/dev/null
ERROR: failed to run: XXX/epd_free-7.3-2-rh5-x86/lib/python2.7/custom_tools/enplace -h

One reason for this error could be that you are trying to execute a 32-bit
binary on a 64-bit system, which does not have 32-bit shared libraries
installed.
For example, 64-bit Ubuntu 10 or higher, does not contain any 32-bit shared
libraries by default, to install them type: sudo aptitude install ia32-libs 
```

XXX 代表目录。

当我运行 epd_free-7.3-2-rh5-x86_64.sh（64 位版本）时，我得到这个：

```
Installing to XXX/epd_free-7.3-2-rh5-x86_64 ... please wait
epd_free-7.3-2-rh5-x86_64.sh: line 317: /home/lizz/share/epd_free-7.3-2-rh5-x86_64/lib/python2.7/custom_tools/enplace: cannot execute binary file
ERROR: failed to run: XXX/epd_free-7.3-2-rh5-x86_64/lib/python2.7/custom_tools/enplace -h

One reason for this error could be that you are trying to execute a 64-bit
binary on a 32-bit system. 
```

服务器的基本信息如下图所示：

```
$ uname -a
Linux servername 2.6.16.46-0.12-default #1 SMP Thu May 17 14:00:09 UTC 2007 ia64 ia64 ia64 GNU/Linux 
```

[这里](http://comments.gmane.org/gmane.comp.python.epd.user/391)说 *64 位 EPD 仅支持 x86_64（也称为 AMD64）架构，不支持 IA-64（Intel Itanium 架构）。*

那么，任何人都可以告诉如何在 ia64 系统上安装 EPD？

也许我可以先安装 ia32-libs，然后安装 32 位版本？但是我没有root权限。我会在等待帮助时尝试。

非常感谢。

* * *

编辑 2014.4.10

我提出了错误的问题。

最初的目的是在服务器上安装一些科学的python包（例如numpy、scipy、matplotlib）。

依赖问题非常痛苦，所以我认为 epd 可能会更容易。但是，epd 不支持 ia64。

现在，对于我的问题，这似乎[是](http://yt-project.org/)一个很好的解决方案。它包含 ipython、numpy 等所需的所有包。

我会学会问正确的问题。谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:14:41.950

EPD 不支持 Intel Itanium。

短期内没有为 IA64 制定 EPD 的计划。这主要是由于维护 EPD 上的整套软件包所需的工作量与要求它的一小部分用户相比。

# jquery - 如何将 osx modelbox 插件添加到所有 div 中 - jquery

> ID：15921063
> 
> 赞同：0
> 
> 时间：2013-04-10T08:45:20.827
> 
> 标签：jquery, html, plugins

下面是代码

更多的 ”

Lorem ipsum dolor sit amet, Integer varius

关

jQuery(function ($) { var OSX = { container: null, init: function () { $("a.more-replay1").click(function (e) { e.preventDefault();

```
 $(".osx-modal-content1").modal({
                overlayId: 'osx-overlay',
                containerId: 'osx-container',
                closeHTML: null,
                minHeight: 80,
                opacity: 65, 
                position: ['0',],
                overlayClose: true,
                onOpen: OSX.open,
                autoPosition: true,
                onClose: OSX.close

            });
        });
    },
    open: function (d) {
        var self = this;
        self.container = d.container[0];
        d.overlay.fadeIn('slow', function () {
            $(".osx-modal-content1", self.container).show();
            var title = $(".osx-modal-title", self.container);
            title.show();
            d.container.slideDown('slow', function () {
                setTimeout(function () {
                    var h = $(".osx-modal-data1", self.container).height()
                        + title.height()
                        + 80; // padding
                    d.container.animate(
                        {height: h}, 
                        200,
                        function () {
                            $("div.close", self.container).show();
                            $(".osx-modal-data1", self.container).show();
                        }
                    );
                }, 300);
            });
        })
    },
    close: function (d) {
        var self = this; // this = SimpleModal object
        d.container.animate(
            {top:"-" + (d.container.height() + 90)},
            500,
            function () {
                self.close(); // or $.modal.close();
            }
        );
    }
};

OSX.init(); 
```

});

对于一个有内容的 div 来说它工作正常，我想为 n 个 div 使用相同的 js ......

# android - 应用程序强制停止

> ID：15921065
> 
> 赞同：0
> 
> 时间：2013-04-10T08:45:28.193
> 
> 标签：android, json, exception, nullpointerexception

我有一个活动，我正在尝试对 url 进行 Web 服务调用并将 json 响应显示到活动中，但是一旦我进行该活动，我的应用程序就会强制停止。

我的 RedemptionActivity 是这样的：

```
 public class RedemptionActivity extends Activity {

ListView redemptionListView;
RedemptionListAdapter adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.redemption);
    redemptionListView = (ListView) findViewById(R.id.redemptionListView);

    if (SnapDineCommon.getInstance(this).isNetworkAvailable()) {

            new RedemptionResultAsyncTask(this).execute();

    } else
        Toast.makeText(this, getString(R.string.check_network),
                Toast.LENGTH_SHORT).show();
}

public class RedemptionResultAsyncTask extends
        AsyncTask<String, Void, Boolean> {

    Context context;
    ProgressDialog progressDialog;

    RedemptionResultResponse redemptionResultResponse;

    public RedemptionResultAsyncTask(Context context) {
        this.context = context;

    }

    protected void onPreExecute() {
        progressDialog = new ProgressDialog(context);
        progressDialog.setMessage("Loading...");
        progressDialog.setIndeterminate(true);
        progressDialog.setCancelable(false);
        progressDialog.show();
    }

    @Override
    protected Boolean doInBackground(String... params) {
        // TODO Auto-generated method stub
        try {
            Gson gson = new Gson();
            RestWebServiceClient client = new RestWebServiceClient(
                    SnapDineCommon.getInstance(this.context).SiteUrl
                            + "getRedemptionData", this.context);
            client.AddParam("mobile_number",
                    SnapDineCommon.getInstance(context)
                            .getLoggedinMobileNumber());
            client.Execute(RequestMethod.GET);
            String response = client.getResponse();
            if (response == null)
                return false;
            else {
                redemptionResultResponse = gson.fromJson(response,
                        RedemptionResultResponse.class);
                if (redemptionResultResponse == null)
                    return false;
                else
                    return true;
            }
        } catch (Exception e) {
            return false;
        }
    }

    @Override
    protected void onPostExecute(Boolean result) {
        progressDialog.dismiss();
        progressDialog = null;
        if (result) {
            if (redemptionResultResponse.Success) {
                if (redemptionResultResponse.getSearchResult().size() > 0) {         //throwing null pointer exception
                    adapter = new RedemptionListAdapter(context,
                            R.layout.searchresult_row,
                            redemptionResultResponse.getSearchResult());
                    redemptionListView.setAdapter(adapter);
                } else {

                    Intent intent = new Intent(context,
                            GenericOkDialogActivity.class);
                    startActivity(intent);

                }
            } else {
                Toast.makeText(context, redemptionResultResponse.errorMessage,
                        Toast.LENGTH_SHORT).show();
            }
        } else {
            Toast.makeText(context, "An error occured. Please try later.",
                    Toast.LENGTH_SHORT).show();
        }

    }
}

} 
```

和 logcat 显示以下错误：

```
 04-10 14:04:21.545: E/AndroidRuntime(6798): FATAL EXCEPTION: main
 04-10 14:04:21.545: E/AndroidRuntime(6798): java.lang.NullPointerException
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at com.JustDine.GUI.RedemptionActivity$RedemptionResultAsyncTask.onPostExecute(RedemptionActivity.java:101)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at com.JustDine.GUI.RedemptionActivity$RedemptionResultAsyncTask.onPostExecute(RedemptionActivity.java:1)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at android.os.AsyncTask.finish(AsyncTask.java:417)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at android.os.Handler.dispatchMessage(Handler.java:99)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at android.os.Looper.loop(Looper.java:123)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at android.app.ActivityThread.main(ActivityThread.java:4627)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at java.lang.reflect.Method.invokeNative(Native Method)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at java.lang.reflect.Method.invoke(Method.java:521)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:876)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:634)
 04-10 14:04:21.545: E/AndroidRuntime(6798):    at dalvik.system.NativeStart.main(Native Method)
 04-10 14:04:21.555: W/ActivityManager(124):   Force finishing activity com.JustDine.GUI/.RedemptionActivity
 04-10 14:04:21.555: W/AppErrorDialog(124): xjzb001 AppErrorDialog setLongMsg=java.lang.NullPointerException 
```

我无法弄清楚为什么它会意外关闭。请帮忙，为什么`"redemptionResultResponse.getSearchResult().size()"`为空，我已经确认 redemptionResultResponse 不为空..??????

**更新：这是我在 RedemptionResultResponse 中的内容：**

```
 @SerializedName("Success")
public boolean Success;

@SerializedName("GetSearchResult")
private List<SearchResult> getSearchResult;

@SerializedName("errorMessage")
public String errorMessage;

@SerializedName("Tag")
public String Tag;

public List<SearchResult> getSearchResult() {
    return getSearchResult;
}

public void setSearchResult(List<SearchResult> getSearchResult) {
    this.getSearchResult = getSearchResult;
} 
```

**更新的 XML**

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/LoginScreen"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#f0f0f0"
android:orientation="vertical" >

<RelativeLayout
    android:id="@+id/realtiveLayout1"
    android:layout_width="fill_parent"
    android:layout_height="44dp"
    android:background="#ffffff" >

    <ImageButton
        android:id="@+id/ibSearchResultsBack"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerInParent="true"
        android:layout_marginLeft="5dip"
        android:background="@drawable/backbtn" />

    <TextView
        android:id="@+id/Title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="Search Result"
        android:textColor="#FF0000"
        android:textSize="22sp"
        android:textStyle="bold" />

    <LinearLayout
        android:id="@+id/settingLayout"
        android:layout_width="40dp"
        android:layout_height="fill_parent"
        android:layout_alignParentRight="true"
        android:gravity="center" >

        <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:background="@drawable/settingicon" />
    </LinearLayout>
</RelativeLayout>

<TextView
    android:layout_width="fill_parent"
    android:layout_height="5dp"
    android:background="@drawable/light_red_gradient" />

<EditText
    android:id="@+id/editText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="Search.."
    android:singleLine="true" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="8" >

    <ListView
        android:id="@+id/redemptionListView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >
    </ListView>
</LinearLayout>

<TextView
    android:layout_width="fill_parent"
    android:layout_height="15dp"
    android:background="@drawable/light_red_gradient" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:25:59.933

我已经发现了错误。错误是响应类中的 json，我没有正确解析 json 数据，这引发了异常。

参考[这里](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)。

谢谢大家的回复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:31:17.750

向我们展示您的 XML 文件...由于您的 Xml 文件包含一些错误，将发生这种错误..空指针异常显示您请求的 URL 没有返回任何内容..请参阅[此处](http://codehenge.net/blog/2011/05/android-programming-tutorial-a-simple-twitter-feed-reader/)..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:52:12.400

当您调用`dismiss()`时`progressDialog`，您基本上是使用 将其从内存中删除`GC`，您不需要调用`progressDialog = null;`

如果 `if (redemptionResultResponse.getSearchResult().size() > 0)`由于崩溃而崩溃，`NullPointerException`那么我的猜测是`getSearchResult()`返回`NULL`。

# c# - AppFabric 缓存 - 非常慢或配置错误？

> ID：15921071
> 
> 赞同：3
> 
> 时间：2013-04-10T08:45:36.617
> 
> 标签：c#, appfabric

一些细节；我在与 IIS 相同的机器上运行 AppFabric 1.1 的开箱即用普通配置。我没有启用 AppFabrics 的本地缓存，因为我对此本地缓存边界之外的性能感兴趣。

现在很明显，像 httpruntime 缓存这样的进程内缓存将会非常快。事实上，它能够在不到 10 毫秒的时间内检索一个正在测试的数据集，其中包含大约 14,000 条记录（序列化时大约为 25MB）。

但是，从应用程序结构中检索相同数量的数据大约需要 9 秒。显然，这是一个巨大的差异，因为我永远无法将其用作任何替代品（我暗地里希望我能做到）。

这个表演听起来对吗？配置中是否有任何明显的陷阱我错过了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T19:37:44.897

我会努力回答的......

首先，您不是在比较同一件事：当您从 HttpRuntime 缓存中获取某些内容时，您将获得对内存中初始项目的引用。如果某些代码修改了此项，所有其他用户/线程将看到更改。这就是为什么有时建议克隆您放入本地缓存的所有内容的原因。

因为 AppFabric 缓存是为 Web 场设计的，所以您不能这样做，因为需要通过网络发送对象（即使主机在同一台机器上）。因此，数据项使用 NetDataContractSerializer 进行序列化。

AppFabric 并不比 HttpRuntime 快，仅仅是因为它不是为此而设计的。它专为 WebFarms 和大量数据而设计，可引导应用程序获得更好的可靠性、可扩展性和性能。

举个例子，在我的公司，几年前我们只使用了 HttpRuntime Cache。现在这完全不可能，因为我们有 30 多台服务器并且数据库过载：AppFabric 是减少数据库负载和提高 Web 应用程序性能（来自缓存集群而不是从数据库加载的项目）的完美解决方案。

如果您只有一台服务器，那么可以肯定我们使用 AppFabric 不会有任何优势。还建议有专用的缓存主机。

最后，我确信您的对象还有一些事情要做，因为 14 000 的数据集不是最佳的！

# neo4j - 使用 neo4j 插件：线程太多

> ID：15921073
> 
> 赞同：0
> 
> 时间：2013-04-10T08:45:41.133
> 
> 标签：neo4j

我将我的插件用于 Neo4j。它每小时执行一百多个。之后比我看到一百多个线程。我可以关闭这个线程吗？我必须从插件中关闭每个线程？

TIA。

UPD。我禁用了所有并发，但它没有帮助。对 neo4j 的 15 次查询提供了 50 多个线程。每个下一个成功查询都会将线程数增加 3-4。如果查询结果为空，则线程数不会增加。错误在哪里？在我的插件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T06:13:52.893

statsd 线程错误。麻烦您了。

# wix - Wix 工具集：在根盘（系统盘或 c:\）中创建目录并在其中复制文件

> ID：15921078
> 
> 赞同：18
> 
> 时间：2013-04-10T08:45:52.413
> 
> 标签：wix, windows-installer

我知道stackoverflow中有类似的问题：

[WIX：WixUI_InstallDir 中的默认目录](https://stackoverflow.com/questions/3296277/wixdefault-directory-in-wixui-installdir)，

[WIX 安装程序根目录和版本控制](https://stackoverflow.com/questions/9390001/wix-installer-root-directory-and-versioning)，

[是否可以在 WIX 中有两个根目录](https://stackoverflow.com/questions/5269990/is-it-possible-to-have-two-root-directories-in-wix)，

[将文件复制到另一个分区中的自定义目录](https://stackoverflow.com/questions/9902980/wix-copy-file-to-custom-dir-in-another-partition)，

[如何在wix中创建目录？](https://stackoverflow.com/questions/10860731/how-to-create-a-directory-in-wix)

但是，它们都没有显示一个简单而直接的代码来在 C:\ 文件夹中创建一个文件夹（不是硬编码的，但应该是根磁盘或系统磁盘或任何你称之为包含 Windows 文件夹的磁盘）并复制文件在里面。

换句话说，Wix 如何创建 C:\MynewDir\example.jar 文件夹？

这是我尝试过的：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- WiX installer MyProgram by Mark Seuffert -->
<?define ProductVersion = "13.1.2.3"?>
<?define ProductUpgradeCode = "12345678-1234-1234-1234-111111111112"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*" UpgradeCode="$(var.ProductUpgradeCode)" Name="MyProgram" Version="$(var.ProductVersion)" Manufacturer="COMPANY" Language="1033">
        <Package InstallerVersion="200" Compressed="yes" Comments="Windows Installer Package" />
        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />

        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="INSTALLDIR" Name="MyProgram">
                    <Component Id="ApplicationFiles" Guid="12345678-1234-1234-1234-222222222222">
                        <File Id="ApplicationFile1" Source="C:\Users\user\Desktop\myprogram.exe" />
                    </Component>
                </Directory>
            </Directory>

            <Directory Id="ANOTHERLOCATION" FileSource="C:\MynewDir">
            </Directory> 
        </Directory>

        <DirectoryRef Id="ANOTHERLOCATION" FileSource="C:\MynewDir">
          <Component Id="ApplicationFiles2" Guid="12345678-1234-1234-1235-111111111111">
                    <File Id="ApplicationFile2" Source="C:\Users\user\Desktop\InstallerFiles_13_4_9_3\myprogramLauncher.jar" />
                    <CreateFolder />
            </Component>
        </DirectoryRef>

        <InstallExecuteSequence>
            <RemoveExistingProducts After="InstallValidate" />
        </InstallExecuteSequence>
        <Feature Id="DefaultFeature" Level="1">
            <ComponentRef Id="ApplicationFiles2" />
            <ComponentRef Id="ApplicationFiles" />
        </Feature>
    </Product>
</Wix> 
```

**编辑 1：** Yan Sklyarenko 刚刚找到了我正在寻找的东西，那就是 WindowsVolume（我不知道我是如何在[http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v中错过它的=vs.85%29.aspx#system_folder_properties](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx#system_folder_properties)微软文档）。

但是如何将 FileSource="C:\MynewDir" 替换为 FileSource="[WindowsVolume]MynewDir" ？？？因为显然即使使用 WINDOWSVOLUME 选择的结果卷在我的计算机中始终是 D:\ ，它有更多可用空间:(

**编辑 2**我使用 Yan Sklyarenko 的第二个示例更新了我的代码（@@@@newpart@@@@ 标识代码不同的部分），但是行为仍然相同，安装程序选择具有更多可用空间的磁盘（我的 D:\ case) 而不是 C:\ windows 所在的位置..

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- WiX installer MyProgram by Mark Seuffert -->
<?define ProductVersion = "13.1.2.3"?>
<?define ProductUpgradeCode = "12345678-1234-1234-1234-111111111112"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
    <Product Id="*" UpgradeCode="$(var.ProductUpgradeCode)" Name="MyProgram" Version="$(var.ProductVersion)" Manufacturer="COMPANY" Language="1033">
        <Package InstallerVersion="200" Compressed="yes" Comments="Windows Installer Package" />
        <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />

        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFilesFolder">
                <Directory Id="INSTALLDIR" Name="MyProgram">
                    <Component Id="ApplicationFiles" Guid="12345678-1234-1234-1234-222222222222">
                        <File Id="ApplicationFile1" Source="C:\Users\user\Desktop\myprogram.exe" />
                    </Component>
                </Directory>
            </Directory>

            <Directory Id="ANOTHERLOCATION" FileSource="C:\MynewDir">
             @@@@newpart@@@@<Component Id="ApplicationFiles2" Guid="12345678-1234-1234-1235-111111111111">
                    <File Id="ApplicationFile2" Source="C:\Users\user\Desktop\InstallerFiles_13_4_9_3\myprogramLauncher.jar" />
                    <CreateFolder />
               </Component>
            </Directory> 
        </Directory>

        @@@@newpart@@@@<SetDirectory Id="ANOTHERLOCATION" Value="[WINDOWSVOLUME]" />

        <InstallExecuteSequence>
            <RemoveExistingProducts After="InstallValidate" />
        </InstallExecuteSequence>
        <Feature Id="DefaultFeature" Level="1">
            <ComponentRef Id="ApplicationFiles2" />
            <ComponentRef Id="ApplicationFiles" />
        </Feature>
    </Product>
</Wix> 
```

**编辑 3**上面的最后一个代码片段应该可以工作，但是按照建议将 WINDOWSVOLUME 的大小写更改为 WindowsVolume。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T14:07:26.320

这是一个基于简化代码的完整工作解决方案（请注意代码中的注释）：

```
<?define ProductVersion = "13.1.2.3"?>
<?define ProductUpgradeCode = "12345678-1234-1234-1234-111111111112"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">
<Product Id="*" UpgradeCode="$(var.ProductUpgradeCode)" Name="MyProgram"
         Version="$(var.ProductVersion)" Manufacturer="COMPANY" Language="1033">
    <Package InstallerVersion="200" Compressed="yes" />
    <Media Id="1" Cabinet="product.cab" EmbedCab="yes" />

    <Directory Id="TARGETDIR" Name="SourceDir">
        <Directory Id="ProgramFilesFolder">
            <Directory Id="INSTALLDIR" Name="MyProgram" />
            <Directory Id="ANOTHERLOCATION" />
        </Directory>
    </Directory>

    <!-- The casing of 'ANOTHERLOCATION' and 'WindowsVolume' is very important here.
         Replace 'MyNewDir' with the correct name of the folder you want on
         WindowsVolume.
    -->
    <SetDirectory Id="ANOTHERLOCATION" Value="[WindowsVolume]MyNewDir" />

    <Feature Id="DefaultFeature" Level="1">
      <Component Directory="INSTALLDIR">
        <File Id="ApplicationFile1" Source="C:\Users\user\Desktop\myprogram.exe" />
      </Component>
      <Component Directory="ANOTHERLOCATION">
        <File Id="ApplicationFile2" Source="C:\Users\user\Desktop\InstallerFiles_13_4_9_3\myprogramLauncher.jar" />
      </Component>
    </Feature>
</Product>
</Wix> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T11:23:27.617

好的，您可以执行以下操作：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="WindowsVolume">
    <Directory Id="MyNewDirId" Name="MyNewDir">
      <Component Id="SampleComponent" Guid="...">
        <File Id="SampleFile" Source="..." KeyPath="yes" />
      </Component>
    </Directory>
  </Directory>
</Directory> 
```

这会将文件安装到 Windows 驱动器上的 MyNewDir 文件夹（在我的情况下为 C：）。但是，它会抱怨`WindowsVolume`以这种方式使用可能会产生意想不到的副作用。

为了满足该验证，您可以将示例更改为：

```
<Directory Id="TARGETDIR" Name="SourceDir">
  <Directory Id="MyNewDirId" Name="MyNewDir">
    <Component Id="SampleComponent" Guid="...">
      <File Id="SampleFile" Source="..." KeyPath="yes" />
    </Component>
  </Directory>
</Directory>

<SetDirectory Id="MyNewDirId" Value="[WindowsVolume]MyNewDir" /> 
```

这看起来更像是一个 hack，但结果是一样的。老实说，我不明白那些“意想不到的副作用”可能是什么。也许，Windows Installer 专家可以对此有所了解。

希望这可以帮助。

# html - GWT HTML5 离线 Web 应用程序动态清单

> ID：15921082
> 
> 赞同：1
> 
> 时间：2013-04-10T08:46:08.597
> 
> 标签：html, gwt, offline-caching, offline-mode

我最近将一个 GWT Web 应用程序转换为能够在 HTML5 离线模式下工作。到目前为止似乎工作正常，但我想知道`cache.manifest`为不同的浏览器提供不同的版本是否是个好主意？

正如我们所知，GWT 只需要一个目标浏览器的一种排列（如果是一种语言，让我们让它变得简单）。很明显，我们只需要`XXXXXX.cach.html`为一个目标浏览器下载一个。

我看到有可能在服务器端我可以检查`User-Agent`HTTP 标头并返回我的 cache.manifest 的适当版本的内容，相应地设置所有标头，以免破坏离线状态检查行为。其余资源将在没有自定义过滤的情况下提供。

以这种方式优化它是个好主意吗？有什么我可能会丢失的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T11:46:33.807

偶然，我遇到了以下项目：[Mobile GWT](https://code.google.com/p/mgwt/)。快速文档 ( [HTML5 Manifest](https://code.google.com/p/mgwt/wiki/HTML5Manifest) ) 和代码 ( [HTML5ManifestServletBase](https://code.google.com/p/mgwt/source/browse/src/main/java/com/googlecode/mgwt/linker/server/Html5ManifestServletBase.java) ) 审查表明，清单是根据每个客户端准备的，因此只有需要的资源通过网络发送。可惜，-我正要制作自己的开源解决方案...

# android - Android：打开自定义文件

> ID：15921083
> 
> 赞同：0
> 
> 时间：2013-04-10T08:46:08.620
> 
> 标签：android, android-intent, android-activity

如果我想打开一个无法处理 Android 的文件，例如 .pm3（而不是 .mp3），我会收到运行时错误。

运行时错误：

```
E/AndroidRuntime(24095): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///mnt/sdcard/download/ttt.pm3 } 
```

这是我的代码：

```
public void executeFile(FileItem fileItem) {
    Intent intent = new Intent();
    intent.setAction(android.content.Intent.ACTION_VIEW);
    File file = new File(fileItem.getFilePath());

    MimeTypeMap mime = MimeTypeMap.getSingleton();
    String ext = fileItem.getFileExtension();
    String type = mime.getMimeTypeFromExtension(ext);

    intent.setDataAndType(Uri.fromFile(file), type);

    this.fileManagerActivity.startActivity(intent);
} 
```

我认为我应该在 this.fileManagerActivity.startActivity(intent); 之前放一个 if 线。但我不知道我该如何检查。

所以我的问题是，我怎样才能避免这个运行时错误？

谢谢你的回答：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:48:50.600

尝试这个

```
 public void executeFile(FileItem fileItem) {

    try{
        Intent intent = new Intent();
        intent.setAction(android.content.Intent.ACTION_VIEW);
        File file = new File(fileItem.getFilePath());

        MimeTypeMap mime = MimeTypeMap.getSingleton();
        String ext = fileItem.getFileExtension();
        String type = mime.getMimeTypeFromExtension(ext);

        intent.setDataAndType(Uri.fromFile(file), type);

        this.fileManagerActivity.startActivity(intent);
    }
    catch(ActivityNotFoundException e)
    {
    //Do your fallback
    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:56:42.573

检查文件名是否以 .mp3 结尾

```
String patterncheck= ".mp3";
File file = new File(fileItem.getFilePath());
{
if(file.getName().endsWith(patterncheck))

} 
```

使用上面的 t 检查文件名是否以 .mp3 结尾，然后相应地使用意图

```
public void executeFile(FileItem fileItem) {

String patterncheck= ".mp3";

File file = new File(fileItem.getFilePath());
{
if(file.getName().endsWith(patterncheck))
 {
 Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);

MimeTypeMap mime = MimeTypeMap.getSingleton();
String ext = fileItem.getFileExtension();
String type = mime.getMimeTypeFromExtension(ext);

intent.setDataAndType(Uri.fromFile(file), type);

this.fileManagerActivity.startActivity(intent);
}
else
{
       Toast.maketext(MainActivity.this,"Not an mp3",1000).show();
}
} 
```

# multithreading - perl 线程退出时的串行端口处理程序错误

> ID：15921085
> 
> 赞同：1
> 
> 时间：2013-04-10T08:46:12.653
> 
> 标签：multithreading, perl, asynchronous, serial-port

我在 perl (5.12 ActiveState) 中使用线程来允许在 Windows 上的两个不同 COM 端口上进行并行和异步写入。这就是我的代码的样子：

```
#!/usr/bin/perl

use warnings;
use strict;
use Win32::SerialPort;
use threads;

my $ComPortObj = new Win32::SerialPort ("COM10") or die ("This is the bitter end...");
[... omit port settings ...]

my $ComPortObj2 = new Win32::SerialPort ("COM6") or die ("This is the bitter end...");
[... omit port settings ...]    

my $s_read = "";

my $HangupThr = async 
{
    # printf("THREAD - Wait 3 seconds\n");
    # sleep(3);
    print("THREAD - write on COM10: AT\n");
    $ComPortObj->write("AT\r") || die ("Unable to send command\n");
    printf("THREAD - Wait 1 second\n");
    sleep(1);
    $s_read = $ComPortObj2->input;
    # $s_read =~ s/\n/N/g;
    # $s_read =~ s/\r/R/g;
    print("THREAD - read from COM6: $s_read\n");
    return 1;

};
$HangupThr->detach();

# printf("MAIN - Wait 4 seconds\n");
# sleep(4);
print("MAIN - write on COM6: AT\n");
$ComPortObj2->write("AT\r") || die ("Unable to send command\n");
printf("MAIN - Wait 1 second\n");
sleep(1);
$s_read = $ComPortObj->input;
# $s_read =~ s/\n/N/g;
# $s_read =~ s/\r/R/g;
print("MAIN - read from COM10: $s_read\n");

$ComPortObj->close();
$ComPortObj2->close(); 
```

我得到的是程序退出时的错误。完整的输出：

```
MAIN - write on COM6: AT
THREAD - write on COM10: AT
MAIN - Wait 1 second
THREAD - Wait 1 second
MAIN - read from COM10: AT
OK

THREAD - read from COM6: AT
OK

Error in PurgeComm at C:\userdata\Perl scripts\src\handler_error.pl line 0 thread 1
The operation completed successfully.
Error in GetCommTimeouts at C:\userdata\Perl scripts\src\handler_error.pl line 0 thread 1
Error Closing handle 184 for \\.\COM6
The handle is invalid.
Error closing Read Event handle 188 for \\.\COM6
The handle is invalid.
Error closing Write Event handle 192 for \\.\COM6
The handle is invalid.
Error in PurgeComm at C:\userdata\Perl scripts\src\handler_error.pl line 0 thread 1
The handle is invalid.
Error in GetCommTimeouts at C:\userdata\Perl scripts\src\handler_error.pl line 0 thread 1
Error Closing handle 144 for \\.\COM10
The handle is invalid.
Error closing Read Event handle 148 for \\.\COM10
The handle is invalid.
Error closing Write Event handle 180 for \\.\COM10
The handle is invalid. 
```

这与串行端口处理程序清除有关，我不知道 perl 如何在线程中重复。我在线程中尝试了各种密切尝试，主要......但没有成功。此外，我必须在主程序和线程中使用相同的端口。有什么建议可以防止这些错误吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:45:30.860

您正在处理串行端口，并且在任何时候只有一个进程可以控制串行端口（某些终端交换机提供多次登录，但您的情况并非如此）在 Windows 中，当一个进程连接到 COM 时，它会自动断开其他进程。您可以通过尝试从 Windows 机器两次登录到相同的 COM 端口来尝试此操作，并且另一个端口应该断开连接，这会导致您看到的无效句柄错误。

您可以尝试的其他事情

1.  **在线程内**创建 Com 对象，使用它并在其他线程上访问它之前销毁该对象

# arrays - R，在数组的每个点上积分

> ID：15921090
> 
> 赞同：0
> 
> 时间：2013-04-10T08:46:25.650
> 
> 标签：arrays, r, convolution, integrate

我一直在计算数组每个点的积分。这个想法首先是创建一个函数（“Integrand”）。然后，创建计算必要积分的第二个函数（“MyConvolve”）。

这是我到目前为止所做的：

```
Integrand = function(s,x)
{ 1/4*(abs(x-s)<=1)*(abs(s)<=1) }

MyConvolve = function(func,data)
{ return( integrate(func, lower=-Inf, upper=Inf, data) ) } 
```

现在，使用一些数组运行代码，我收到一条错误消息：

```
SomeMatrix = replicate(10, rnorm(10))
MyConvolve(Integrand, SomeMatrix) 
```

最终出现以下错误消息：

```
Error in integrate(func, lower = -Inf, upper = Inf, data) :
evaluation of function gave a result of wrong length 
```

我已经尝试过对该函数进行矢量化，但最终还是得到了错误消息。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:46:08.543

I am not sure I understand what you are trying to compute, but if you want to evaluate `MyConvolve(Integrand,s)`, where `s` takes all the values in `SomeMatrix`, then `apply` is sufficient.

```
sapply( SomeMatrix, function(s) MyConvolve( Integrand, s )$value ) 
```

However, the dimensions of the matrix are lost. You can recover them as follows:

```
result <- SomeMatrix
result[] <- sapply( SomeMatrix, function(s) MyConvolve( Integrand, s )$value ) 
```

# sql-server - SSIS 包在运行时挂起

> ID：15921093
> 
> 赞同：2
> 
> 时间：2013-04-10T08:46:39.967
> 
> 标签：sql-server, ssis

正如标题所暗示的，我在数据导入期间遇到了 SSIS 包的问题。我将尽力描述我能做到的最好的需求、采取的方法、问题以及我到目前为止所做的尝试。

需求：将
数据从 Excel 2007 文件（1.000.000 行）导入 SQL 表。
文件是在 UI 的帮助下上传的，因此包必须接收文件路径作为参数
导入不能阻塞 UI
在 SQL 级别应用的额外业务验证
知道包是否失败
的可能性 失败时回滚的可能性

方法：
我创建了一个 SSIS 包并在 BIDS 中成功测试它
创建了一个存储过程并在 xp_cmdshell 的帮助下调用 dtexec
创建了一个不阻塞 UI 的作业（并且还能够识别是否导入/业务需要仍在运行
填充了一个表来存储包的参数（在我所做的研究中，我发现我无法将参数直接传递给作业或作业步骤）

构建对 dtexec 的调用的代码如下所示

```
DECLARE @SSIS NVARCHAR(4000) = '';
DECLARE @Params NVARCHAR(4000) = '/set \package.variables[FileName].Value;"\"' + @FileName + '\"" /set \package.variables[ConnectionString].Value;"\"' + @ConnectionString + '\""';
DECLARE @ExePath NVARCHAR(4000) = 'C:\"Program Files (x86)"\"Microsoft SQL Server"\100\DTS\Binn\'

SET @SSIS = @ExePath + 'dtexec /f "' + @PackageName + '" '
SET @SSIS = @SSIS + @Params

DECLARE @ReturnCode int
EXEC @ReturnCode = master..xp_cmdshell @SSIS 
```

以及结果并由 xp_cmdshell 运行的行

```
C:\"Program Files (x86)"\"Microsoft SQL Server"\100\DTS\Binn\dtexec /f "C:\inetpub\wwwroot\pwc\\Import.dtsx" /set \package.variables[FileName].Value;"\"\\<server_name>\upload\Import.xlsx\"" /set \package.variables[ConnectionString].Value;"\"<connection_string>\"" 
```

问题：
在占用内存（在任务管理器中查看进程）的情况下，在长时间运行（1h+）后，程序包似乎挂起并且什么也不做，尽管它应该需要大约 25 分钟。
所以，我的问题是：
1\. 什么可能导致包挂起并且无法完成
2\. 为什么当文件为 220mb 时 dtexec 占用约 2GB 内存（这是出于好奇；我可以忍受内存问题）

我是什么尝试过：
在cmd中运行该行。该包成功运行，这让我认为这是 xp_cmdshell 的问题
我已经读到 xp_cmdshell 的权限可能存在问题，所以我目前正在以 SQL 管理员身份运行该作业
我发现了一些可以解释正在发生的事情，但它与从应用程序运行包有关；如果这是问题，我会感谢一些有关 SQL 语法的帮助

非常感谢您帮助解决这个问题

**更新**
虽然手头的问题仍未解决，但我设法找到了解决需求的不同方法。
在我之前的声明中，我说过我不知道如何将参数传递给作业步骤。与此同时，我找到了一种方法。这不是一个真正的直接问题，但它确实解决了我的问题。使用更新[所需的](http://msdn.microsoft.com/en-us/library/ms188283.aspx)[作业步骤更新](http://msdn.microsoft.com/en-us/library/ms189827.aspx)和权限，我设法修改了作业步骤的注释字段

```
EXEC msdb.dbo.sp_update_jobstep
@job_name = N'StartImportFlow',
@step_id = 1,
@command  = <my command> ; 
```

由于能够修改作业步骤，我将对包的调用从存储过程移至作业步骤。
需要提醒一件事：要执行从服务器代理打包的 DTS，该步骤必须在 sysadmin 帐户下运行，或者需要代理才能允许执行。

我很感激有关如何处理当前问题的一些提示：我应该将其标记为已回答还是应该让它这样回答最初的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:03:29.530

## 根本原因

xp_cmdshell存在一个[已知问题](http://support.microsoft.com/kb/266224)，它只允许处理一组双引号参数。

## 解析度

1.  您可以走工作步骤路线。这种方法的缺点是您只能运行一个实例。我不知道 UI 是如何实现的，但并发上传可能很难看。

2.  创建一个运行包的批处理文件。它将采用文件名和连接参数，这可能会让您只传入一组双引号参数。

3.  我对不阻止 UI 的要求感到困惑，但它需要了解包失败。一种选择是让您的 UI 将所有启动参数写入一个表。然后有一个计划的进程每隔 N 个间隔运行一次，它使用所述参数启动这些包，并将结果写回该表或另一个表。您也可以直接从 UI 启动包。虽然您可以使用 dtexec，但此时您正在编写自定义代码，只需使用对象模型即可。

伪代码大约

```
using Microsoft.SqlServer.Dts;

string fileName = @"\\network\path\file.dtsx";
Application app = new Application();
Package p = app.LoadPackage(fileName, null);
p.Variables["FileName"].Value = @"\\network\path\file.xlsx";
p.Variables["ConnectionString"].Value = @"whatever works";
DTSExecResult results = currentPackage.Execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T17:08:47.507

如果您在 64 位计算机上运行此程序包，使用 32 位版本的 dtexec.exe 将导致程序包挂起。使用 C:\Program Files，而不是 C:\Program Files (x86) 来获取 64 位版本。或者只是从 SQL 代理作业步骤执行包（使用 64 位版本。另外，不要在 64 位机器上使用执行包实用程序。它使用名为 dtexecUI 的 32 位 exe。

# svn - SVN 配置文件版本控制的最佳实践

> ID：15921094
> 
> 赞同：2
> 
> 时间：2013-04-10T08:46:48.437
> 
> 标签：svn, deployment, version-control, configuration-files, configuration-management

我必须对一个由四个应用程序组成的项目进行版本控制，每个应用程序都有自己的配置文件。该项目必须部署到多个客户，通过修改配置文件为每个客户定制它。

对不同客户的配置文件进行版本化的最佳实践是什么？

每个客户的整个项目的分支或标签（每个都有自己修改过的配置文件）或只是项目的主干（最终带有分支和标签，出于其他原因创建）和客户的配置文件分开管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:55:39.417

我会选择你最后的选择，

项目的主干（最终带有分支和标签，出于其他原因创建）和客户的配置文件分开管理

这样，开发人员将始终拥有代码库和必要的设置，并且只需要从 SVN 获取适当的配置文件即可为特定客户端工作。

为整个项目拥有单独的分支或标签将使其难以维护并使其与最新的更改、合并和代码冲突保持更新。也没有。随着您添加更多客户，分支或标签的数量将会增加。

# ravendb - RavenDB：静态索引转换和排序问题

> ID：15921096
> 
> 赞同：0
> 
> 时间：2013-04-10T08:46:57.773
> 
> 标签：ravendb

我对 RavenDB 索引有疑问。

简单查询如下所示：

```
 var values =
            myCollection.Query.Where(w =>
                w.MyId == MyId &&
                w.IsReady == false &&
                w.IsDeleted &&
                w.Rate > 0) 
```

在执行期间，Raven 创建动态索引：

```
from doc in docs.MyCollection
select new { Rate = doc.Rate, IsReady = doc.IsReady, IsDeleted = doc.IsDeleted, MyId = doc.MyId } 
```

带有额外选项：字段 -> 速率；存储 -> 否；索引-> 默认；排序->双；

字段**速率**具有**十进制**类型。

**问题：**

我想添加静态索引，但是当我像这样指定索引时：

```
public class MyIndex : AbstractIndexCreationTask<MyCollection> {
    public MyIndex () {
        Map = d => d.Select(s => new { Rate = s.Rate, IsReady = s.IsReady, IsDeleted = s.IsDeleted, MyId = s.MyId });
        Sort(x => x.Rate, SortOptions.Double);
    }
} 
```

Raven 创建的索引略有不同：

```
from doc in docs.MyCollection
select new { Rate = (decimal)doc.Rate, IsReady = doc.IsReady, IsDeleted =    doc.IsDeleted, MyId = doc.MyId } 
```

带有额外选项：字段 -> 速率；存储 -> 否；索引-> 默认；排序->双；

唯一的区别是我在静态索引中进行了强制转换，因为我的字段类型是**十进制**并且我使用的是**双**排序选项。

因此，Raven 没有使用我的静态索引，而是在每次执行查询时创建动态索引。

我尝试在 Sort() 中进行一些转换，但是根本没有创建索引。解决此问题的一种方法是在创建后从管理控制台手动修改静态索引，但这不是一个好的解决方案。

任何想法如何处理？谢谢。

编辑：另一个例子：

字段**DateTime**的类型并使用**DateTime**值作为谓词进行查询（大于/小于）。Raven 在动态索引创建中选择**String**作为 SortOption，当我尝试准备静态索引时，我遇到了强制转换问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:03:32.283

您可以使用`IDocumentSession.Query(string indexName, [bool isMapReduce])`或`IDocumentSession.Query<TResult, TIndexCreator>()`重载来显式指定静态索引。所以在你的具体情况下，要么`IDocumentSession.Query<MyCollection, MyIndex>()`要么`IDocumentSession.Query("MyIndex")`。

# java - 等效于套接字连接的 SerialPortEvent

> ID：15921101
> 
> 赞同：1
> 
> 时间：2013-04-10T08:47:04.277
> 
> 标签：java, sockets, events, serial-port

我正在编写一个连接到测量设备的应用程序。该设备可以通过串行和网络连接进行连接。我完成的串行端并捕获使用`SerialPortEvent`.

现在我正在尝试使用`socket`. 我的连接正常，我可以从设备发送/接收数据。问题是我强制 Thread.sleep 等待所有数据准备好。但现在我想像使用`SerialPortEvent`.

这是一个两部分的问题：

1.  a 有类似的事件`socket`吗？还是在这种情况下更可取的自定义解决方案？如果是这样，请添加说明。
2.  如何完成`DATA_AVAILABLE`一个套接字

下面是 的代码片段（仅是必要的捕获部分）`SerialEventPort`，作为我也想用套接字完成的参考：

```
@Override
public void serialEvent(SerialPortEvent event)
{

if (event.getEventType() == SerialPortEvent.DATA_AVAILABLE)
{
  try
  {
    int available = inputStream.available();
    byte[] readBuffer = new byte[available];

    if (available > 0)
    {
      inputStream.read(readBuffer);
    }

  } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T16:08:47.240

在这个[SO 答案](http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/channels/SocketChannel.html)中，Sorrow 声明如下：

> 我推荐使用与 Selector 和 SelectionKey 连接的 java.nio.channels.SocketChannel。这个解决方案有点基于事件，但比普通的套接字更复杂。

如果您决定采用该解决方案，您将在链接答案中找到代码示例。

但是，如果你在谈论[`java.net.Socket`](http://docs.oracle.com/javase/6/docs/api/index.html?java/net/Socket.html)那时，不，没有事件。我喜欢[JTeagle](https://stackoverflow.com/a/9637615/679982)对类似问题的回答：

> 这通常是通过为客户端生成一个单独的线程来完成的，该线程不断地从流中对 read() 进行阻塞调用——这样，一旦数据可用，read() 调用就会解除阻塞并可以对其接收到的内容进行操作（“事件触发'），然后它返回阻塞等待下一个事件。

而且根据我的经验，这主要是在 Java 中处理套接字的方式。我写了一个基于事件的套接字的实现。由于读取是可阻塞的，因此很可能不需要线程来阻止您的主程序：

```
public class ObservableSocket extends Thread {
    private final Socket socket;
    private final ArrayList<ObservableSocketListener> listeners;
    private volatile boolean isReading;
    private int BUFFER_SIZE = 1024;

    public ObservableSocket(String host, int port) throws UnknownHostException, IOException {
        this.socket = new Socket(host, port);
        this.listeners = new ArrayList<ObservableSocketListener>(1);
        isReading = true;
        this.start();
    }

    public void addListener(ObservableSocketListener l) {
        if (!listeners.contains(l)) {
            listeners.add(l);
        }
    }

    public void removeListener(ObservableSocketListener l) {
        if (!listeners.contains(l)) {
            listeners.remove(l);
        }
    }

    public void die() {
        isReading = false;
        try {
            this.join();
        } catch (InterruptedException ex) {
            ex.printStackTrace();
        }
    }

    public void write(byte[] data) throws IOException {
        socket.getOutputStream().write(data);
        socket.getOutputStream().flush();
    }

    private byte[] getData(byte[] buffer, int red) {
        byte[] redData = new byte[red];
        System.arraycopy(buffer, 0, redData, 0, red);
        return redData;
    }

    @Override
    public void run() {
        byte[] buffer = new byte[BUFFER_SIZE];
        int red;
        ObservableSocketEvent event;
        try {
            while (isReading && (red = socket.getInputStream().read(buffer)) > -1) {
                event = new ObservableSocketEvent(this, getData(buffer, red));
                for (ObservableSocketListener l : listeners) {
                    l.dataAvailable(event);
                }
            }
        } 
        catch (Exception exception) {
            event = new ObservableSocketEvent(this, exception);
            for (ObservableSocketListener l : listeners) {
                l.errorOccured(event);
            }
        } 
        finally {
            if (socket != null) {
                try {
                    socket.close();
                    for (ObservableSocketListener l : listeners) {
                        l.closed(new ObservableSocketEvent(this));
                    }
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        }
    }   
} 
```

这是您需要实现的侦听器类：

```
public interface ObservableSocketListener extends EventListener {
    public void dataAvailable(ObservableSocketEvent event);
    public void errorOccured(ObservableSocketEvent event);
    public void closed(ObservableSocketEvent event);
} 
```

和事件类：

```
public class ObservableSocketEvent extends EventObject {
    private final byte[] data;
    private final Exception exception;

    public ObservableSocketEvent(Object source) {
        super(source);
        this.data = null;
        this.exception = null;
    }

    public ObservableSocketEvent(Object source, byte[] data) {
        super(source);
        this.data = data;
        this.exception = null;
    }

    public ObservableSocketEvent(Object source, Exception exception) {
        super(source);
        this.data = null;
        this.exception = exception;
    }

    public byte[] getData() {
        return data;
    }

    public Exception getException() {
        return exception;
    }      
} 
```

我制作了一个服务器来生成一些随机数据来测试这段代码，这就是我在客户端的类主方法中使用它的方式：

```
 ObservableSocket observableSocket = new ObservableSocket("localhost", 3339);
    observableSocket.addListener(new ObservableSocketListener() {

        @Override
        public void dataAvailable(ObservableSocketEvent event) {
            System.out.println("data received: "+new String(event.getData()));
        }

        @Override
        public void closed(ObservableSocketEvent event) {
            System.out.println("closing socket");
        }

        @Override
        public void errorOccured(ObservableSocketEvent event) {
            System.out.println("error occured");
            event.getException().printStackTrace();
        }

    });
    Thread.currentThread().sleep(10000);
    observableSocket.die(); 
```

它输出：

```
data received: data 0
data received: data 1
data received: data 2
data received: data 3
data received: data 4                        
closing socket                              // thread is alive here
BUILD SUCCESSFUL (total time: 10 seconds)  // thread dies here 
```

就我的测试而言，`sleep`需要 in 客户端，因为该`die`方法：

*   退出阅读循环（通过设置为 false 的标志）
*   并等待线程死亡（[Thread.join](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join())）

没有睡眠，测试客户端立即完成（die 方法有效）。如果没有 die 方法，ObservableSocket 线程在测试结束后仍然存在。

使用此代码时，您应该注意两件事：

*   实例化后`ObservableSocket`立即`[Socket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/Socket.html#Socket(java.net.InetAddress,%20int))`连接并`[Thread](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start())`启动 a。
*   您必须`die`从不是`ObservableSocket`线程的线程调用该方法（例如，不要从该类中调用该方法）

# ios - 多个 UIImageView 上的 TapGesture 识别器不起作用

> ID：15921107
> 
> 赞同：2
> 
> 时间：2013-04-10T08:47:09.337
> 
> 标签：ios, objective-c, uiimageview, uitapgesturerecognizer

多个 UIImageView 上的 TapGesture 识别器不起作用，而它检测到最后添加的图像视图手势.. 我已经这样做了，

```
 UITapGestureRecognizer *tapped = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(myFunction:)];
tapped.numberOfTapsRequired = 1;
tapped.delegate = self;

UIImageView *sample_book1= [[UIImageView alloc]initWithFrame:CGRectMake(70, 135, 100,125) ];
sample_book1.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"mathematics.png"]];
sample_book1.userInteractionEnabled = YES;
sample_book1.tag = 0;
[sample_book1 addGestureRecognizer:tapped];
[self.view addSubview:sample_book1];

UIImageView *sample_book2= [[UIImageView alloc]initWithFrame:CGRectMake(220, 135, 100,125) ];
sample_book2.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"biology.png"]];
sample_book2.userInteractionEnabled = YES;
sample_book2.tag = 1;
[sample_book2 addGestureRecognizer:tapped];
[self.view addSubview:sample_book2];

UIImageView *sample_book3= [[UIImageView alloc]initWithFrame:CGRectMake(370, 135, 100,125) ];
sample_book3.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"chemistry.png"]];
sample_book3.userInteractionEnabled = YES;
sample_book3.tag = 2;
 [sample_book3 addGestureRecognizer:tapped];
[self.view addSubview:sample_book3]; 
```

轻按手势在 sample_book1、sample_book2 中不起作用……它仅在 sample_book3 中起作用……我做错了什么……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T08:50:30.523

你做错了什么是试图以不应该使用的方式使用手势。手势只能附加到*一个*视图。您需要为每个视图创建一个新视图。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T09:00:11.367

正如 borrrden 所说，在尝试跟踪手势时，每个视图都必须有自己的手势识别器。对于您的每个 sample_books，您应该使用

```
[sample_bookX addGestureRecognizer:[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(myFunction:)]]; 
```

而不是尝试多次添加相同的 GR

myFunction: 收到的参数将是正确的 tapGR 并且您可以通过调用 sender.view 来访问被点击的 imageView （提供您的 myFunction 签名看起来像

```
- (void) myFunction:(UIGestureRecognizer *)sender 
```

干杯，

# django - Django：/customerList/ 元组索引处的 IndexError 超出范围

> ID：15921109
> 
> 赞同：1
> 
> 时间：2013-04-10T08:47:12.230
> 
> 标签：django, django-forms, django-templates, django-views

谁能帮我这个。我不明白这个错误

> /customerList/ 元组索引处的 IndexError 超出范围

它来自这段代码

`self.Customer = get_object_or_404(customer, name__iexact=self.args[0])`

我希望能够从 customerForm（F_NAME，L_NAME）和 buildingForm（B_USE，B_TYPE）的两个表单中执行 ListView 一些字段。任何帮助都非常非常非常感谢。感谢你。

```
Traceback:
File "c:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args,  **callback_kwargs)
File "c:\Python27\lib\site-packages\django\views\generic\base.py" in view
  48\.             return self.dispatch(request, *args, **kwargs)
File "c:\Python27\lib\site-packages\django\views\generic\base.py" in dispatch
  69\.         return handler(request, *args, **kwargs)
File "c:\Python27\lib\site-packages\django\views\generic\list.py" in get
  114\.         self.object_list = self.get_queryset()
File "f:\iqgit\amon\amonsolution\solution\views.py" in get_queryset
  59\.         self.Customer = get_object_or_404(customer, name__iexact=self.args[0])

Exception Type: IndexError at /customerList/
Exception Value: tuple index out of range 
```

视图.py

```
class customerListView(ListView):
    template_name = "customerList.html",
    model = customer
    context_object_name = "customer_list"

def get_queryset(self):
    self.Customer = get_object_or_404(customer, name__iexact=self.args[0])
    return building.objects.filter(Customer=self.Customer) 

def get_context_data(self, **kwargs):
    context = super(customerListView, self).get_context_data(**kwargs)
    context['building_list'] = building.objects.all()

    return context 
```

表格.py

```
class customerForm(forms.ModelForm):
    F_NAME = forms.CharField(widget=forms.TextInput()
    L_NAME = forms.CharField(widget=forms.TextInput()  
    EMAIL  = forms.CharField(widget=forms.TextInput()  
    ADD    = forms.CharField(widget=forms.TextInput()
    class Meta:
        model = customer

class buildingForm(forms.ModelForm):
    CUSTOMER     = forms.CharField(widget=forms.TextInput()
    B_FLOORSPACE = forms.CharField(widget=forms.TextInput()
    B_YEAR       = forms.CharField(widget=forms.TextInput() 
    B_USE        = forms.ChoiceField(widget=forms.RadioSelect(), choices=c.Use)
    B_TYPE       = forms.ChoiceField(widget=forms.RadioSelect(), choices=c.Type)
    class Meta:
        model = building
        exclude = ('CUSTOMER',) 
```

网址.py

```
url(r'^customerList/',customerListView.as_view(), name= "customerList_view"), 
```

客户列表.html

```
...some of code...

{% for customer in customer_list %}
<tr class = {% cycle "row_even" "row_odd" %}>
<td>{{ customer.id }}</td>
<td class ="name"> <a href=" {% url customer_view customer.id %}">{{ customer.F_NAME }}&nbsp;{{ customer.L_NAME }}</a></td>
<td class ="b_use"> <a href=" {% url customer_view customer.id %}">{{ building.B_USE }}{{ building.B_TYPE }}</a></td>

...some of code... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:06:25.843

您正在尝试调用`self.args[0]`从 URL conf 传递的位置参数 ( )，但您尚未将任何位置参数添加到您的实际 url。如果您查看[请求的处理方式](https://docs.djangoproject.com/en/1.2/topics/http/urls/#how-django-processes-a-request)，您会注意到：

> 4\. 一旦其中一个 [url] 正则表达式匹配，Django 就会导入并调用给定的视图，这是一个简单的 Python 函数。视图被传递一个 HttpRequest 作为它的第一个参数，并且在正则表达式中捕获的任何值作为剩余参数。

您没有将任何参数（无论是位置参数还是命名参数）传递给您的视图，因此`self.args`or中没有任何内容`self.kwargs`。您需要将 URL 更改为以下内容：

```
url(r'^customerList/(\w+)/',customerListView.as_view(), name= "customerList_view"), 
```

或者理想情况下使用[命名参数](https://docs.djangoproject.com/en/1.2/topics/http/urls/#named-groups)，例如：

```
url(r'^customerList/(?P<name>\w+)/',customerListView.as_view(), name= "customerList_view"), 
```

这样您就可以改用`self.kwargs.get("name", None)`

# mysql - 从多列中查询分组值

> ID：15921110
> 
> 赞同：0
> 
> 时间：2013-04-10T08:47:14.117
> 
> 标签：mysql, sql

我有一张像这样的桌子：

```
ID key familyname  street     pin
1   1    xxx          abc      11
2   1    xxx          acf      13
3   1    xxx1         acf      13
4   1    xxx1         bcf      12
5   2    yyy          abc      11
6   2    yyy          abc      11
7   2    yyy1         bcj      13
8   2    yyy1         bck      14
9   2    yyy2         btj      15
10  2    yyy2         byj      16 
```

现在我想根据每个单独的键的列“familyname”对街道和引脚进行分组。例如，我希望上表的输出为

```
ID key familyname  street     pin
1   1    xxx        abc,acf    11,13

3   1    xxx1       acf,bcf    13,12

5   2    yyy        abc,abc    11,11

7   2    yyy1       bcj,bck    13,14

9   2    yyy2       btj,byj    15,16 
```

如果我能得到一些关于分组查询设计的建议，这将有很大的帮助，这可以给我如上所示的结果

多谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:49:24.520

MySQL 具有内置功能，可以为每个名为`GROUP_CONCAT()`.

```
SELECT  MIN(ID) ID,
        `key`,
        familyName,
        GROUP_CONCAT(street) street,
        GROUP_CONCAT(pin) pin
FROM    TableName
GROUP   BY `key`, familyName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/397ca/1)
*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

输出

```
╔════╦═════╦════════════╦═════════╦═══════╗
║ ID ║ KEY ║ FAMILYNAME ║ STREET  ║  PIN  ║
╠════╬═════╬════════════╬═════════╬═══════╣
║  1 ║   1 ║ xxx        ║ abc,acf ║ 11,13 ║
║  3 ║   1 ║ xxx1       ║ acf,bcf ║ 13,12 ║
║  5 ║   2 ║ yyy        ║ abc,abc ║ 11,11 ║
║  7 ║   2 ║ yyy1       ║ bcj,bck ║ 13,14 ║
║  9 ║   2 ║ yyy2       ║ btj,byj ║ 15,16 ║
╚════╩═════╩════════════╩═════════╩═══════╝ 
```

# c#-4.0 - 如何转换/转换集合 收藏

> ID：15921117
> 
> 赞同：0
> 
> 时间：2013-04-10T08:47:35.397
> 
> 标签：c#-4.0, generics, collections, type-conversion

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:49:00.837

您可以为此使用 LINQ 选择：

```
var enumerableOfU = collectionOfT.Select(t => new U(t)); 
```

如果要枚举多次，`enumerableOfU`则应在.`.ToList()``.ToArray()``Select`

请注意，这在*内部*仍然使用循环，但您不必自己编写。

# c++ - 使用 dbfcmd 和 dbrpcsend 从 C++ 调用 SQL Server 存储过程

> ID：15921125
> 
> 赞同：0
> 
> 时间：2013-04-10T08:48:07.550
> 
> 标签：c++, sql-server, stored-procedures

我正在阅读一个用 C++ 编写的应用程序，从远程 sql server 2005 db 调用存储过程。

我发现它使用两种不同的方法进行远程 SP 调用。

1.  使用 dbfcmd

    ```
    int ProcessMsg1(PDBPROCESS dbproc){
       dbfcmd(dbproc,"exec message1_proc '%s'",blk->msgtype);
       dbsqlexec(dbproc);
       if (dbretstatus(dbproc)==-1)
         printf("dbsqlexec failed.\n");
    } 
    ```

2.  使用 dbrpcinit、dbrpcparam、dbrpcsend

    ```
    int ProcessMsg2(PDBPROCESS dbproc){
       dbrpcinit(dbproc, "message2_proc", (DBSMALLINT)0);
       dbrpcparam(dbproc, "@MType", 0, SQLCHAR, 4, 4, blk->msgtype);
       if ((dbrpcsend(dbproc) == FAIL))
         printf("dbrpcsend failed.\n");
    } 
    ```

我找不到谷歌的两种方法的比较。任何人都可以解释两种方法的区别以及何时必须使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:53:10.097

第一个是使用字符串连接，这是[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)灾难、计划缓存膨胀、过多的服务器端解析等的秘诀，尽管在这种情况下，当调用存储过程时，这些影响会降低。

第二个使用[Prepared Statement](http://en.wikipedia.org/wiki/Prepared_statement)，即正确的方法。

# actionscript-3 - 旋转几度时，火花 DataGrid 内容变得不可见

> ID：15921129
> 
> 赞同：0
> 
> 时间：2013-04-10T08:48:18.857
> 
> 标签：actionscript-3, air, flex-spark

我有一个在 Adob​​e Air 上运行的 android 应用程序。简单地说，我在视图中有一个 Spark DataGrid。当我旋转我的设备（平板电脑或手机）几度（4-5）时，数据网格内容变得**不可见**并且

- 如果我继续到下一个位置（从纵向到横向），则返回可见。

- 如果我不继续到下一个位置，就不会回到可见状态。

我已经用 spark DataGrid、Item 渲染器和 Skin 类的默认属性对此进行了测试，但是这个问题又出现了。这可能是一个错误吗？

很高兴听到您对此问题的评论。

# sql - 如何对报表中的计算字段进行排序？(MS-Access 2010)

> ID：15921135
> 
> 赞同：1
> 
> 时间：2013-04-10T08:48:30.343
> 
> 标签：sql, database, ms-access

我创建了一个基于此查询的报告：

```
SELECT sum(IIF(foo=True, 1, 0)), sum(IIF(bar=True, 1, 0)) from xy; 
```

所以我得到以下结果：

```
+---------+---------+----------+
|   Foo   |   Bar   |   ...    |
+---------+---------+----------+
| Value 1 | Value 2 | ...      |
+---------+---------+----------+ 
```

然后我从该结果生成报告：

![在此处输入图像描述](https://i.stack.imgur.com/uh8oK.png)

我的问题是；如何按升序或降序对值进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:04:12.977

人们通常不会对报表中的*字段进行“排序”（即更改顺序）。*控件绑定到字段，并且控件（通常）在报表布局中具有固定位置。

我*认为*你想做更多这样的事情：

创建一个查询，将总和放入行而不是列...

```
SELECT "foo" AS Item, SUM(IIf(foo = True, 1, 0)) AS Total FROM xy
UNION ALL
SELECT "bar" AS Item, SUM(IIf(bar = True, 1, 0)) AS Total FROM xy 
```

...然后使用结果*行*...

```
Item  Total
----  -----
foo      12
bar       8 
```

……在一份报告中。您可以按通常的方式对行进行排序，即通过“设计”选项卡上的“分组和排序”按钮。

# c++ - 在 C++ 代码中使用 K&R 风格的 C 函数

> ID：15921141
> 
> 赞同：3
> 
> 时间：2013-04-10T08:48:56.867
> 
> 标签：c++, c, visual-studio-2010, visual-c++

我正在尝试在 VS2010 的 VC++ 项目中使用[oncrpc-windows项目。](http://sourceforge.net/projects/oncrpc-windows/)[oncrpc 在svc.h](http://oncrpc-windows.svn.sourceforge.net/viewvc/oncrpc-windows/win32/include/rpc/svc.h?revision=1&content-type=text/plain)文件中导出函数，不带任何参数，但实际上函数有参数。比如头文件导出

```
#define DllExport   __declspec( dllexport ) 
...
DllExport SVCXPRT *svcudp_create(); 
```

但[实现文件](http://oncrpc-windows.svn.sourceforge.net/viewvc/oncrpc-windows/win32/librpc/Svc_udp.c?revision=1&content-type=text/plain)包含

```
SVCXPRT * svcudp_create(sock)
    int sock;
{

    return(svcudp_bufcreate(sock, UDPMSGSIZE, UDPMSGSIZE));
} 
```

如果我尝试创建使用导出函数的 C 文件，那么一切正常，代码编译成功。问题是我不能在我的 CPP 代码中使用导出的函数，编译器停止并显示以下消息

> 错误 C2660：“svcudp_create”：函数不接受 1 个参数

我尝试使用`extern "C"`，但它没有帮助。我想知道如何在我的 VC++ 项目中使用导出的函数？真的需要用正确的签名编写自己的头文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-16T03:34:14.683

在编译 .cc 或 .cpp 文件之前，您需要将任何使用 K&R 样式语法的 .c 文件编译为对象文件。这应该在 MakeFile 中完成。

例子：

```
PNAME = "ProjectName"
PROGRAM_FILES = program.cpp program.h

svc.o: svc.c svc.h
    gcc -c $< -o $@
program.o: $(PROGRAM_FILES)
    gcc -c $< -o $@
all: svc.o program.o
    gcc $< -o $(PNAME)
clean:
    -rm -f *.o $(PNAME) 
```

# javascript - 为什么phonegap点击事件会触发两次？

> ID：15921143
> 
> 赞同：4
> 
> 时间：2013-04-10T08:48:58.817
> 
> 标签：javascript, android, cordova

我正在使用 phonegap 1.5.0 开发 android 应用程序

应用程序将数据存储在本地数据库中并使用 Web 服务进行同步。我正在使用一键单击来调用同步数据 JavaScript 功能。我发现的是：

此同步按钮的点击事件触发两次。单条记录被上传两次，服务器数据库中的上传时间相同。

如何避免这种情况？

谢谢

**编辑：**

大家好，抱歉回复晚了；有点忙于一些优先工作。

单击按钮调用**SyncData()函数。**

这是代码：

```
document.addEventListener("DOMContentLoaded", onDeviceReady, false);
var db;
var maxrecords = 0;
var recordsprocessed = 0;
var urlstart = "http://www.mywebsite.com/";

function onDeviceReady() {
    db = window.openDatabase("LocalDB", "1.0", "PhoneGap Demo", 50 * 1024 * 1024);
}

function SyncData() {
    maxrecords = 0;
    recordsprocessed = 0;
    db.transaction(queryDB, errorCB, successCB);
}

function queryDB(tx) {
    var entriestoupload = 0;
    var profimagetoupload = 0;

    //check how many entries are to be synchronized
    tx.executeSql('SELECT count(*) as cnt FROM tblEntries WHERE IsUploaded=0', [], function(tx, results) {
        entriestoupload = parseInt(results.rows.item(0)['cnt']);
        //check how many profile images are to be uploaded
        tx.executeSql('SELECT count(*) as cnt FROM tblEntries WHERE IsProfileImageUploaded=0', [], function(tx, results) {
            profimagetoupload = parseInt(results.rows.item(0)['cnt']);

            //synch proceeds if there is any record which is not sychronised
            if (entriestoupload > 0 || profimagetoupload > 0) {
                var dataMsg = '';
                var porofimgMsg = '';
                if (entriestoupload > 0) dataMsg = entriestoupload + ' entry, ';
                if (profimagetoupload > 0) porofimgMsg = profimagetoupload + ' profile image ';

                // give user exact info about what will be synchronized 
                if (confirm(dataMsg + porofimgMsg + ' are not synchronized.\n Do you want to start synchronisation? \n Please wait till synch successfull message appears.')) {

                    //start synchronisation
                    tx.executeSql('SELECT * FROM tblEntries ORDER BY DateOfRegistration DESC', [], uploadData, errorCB);
                }
            } else {
                alert('All records are already Synchronized.');
            }
        }, errorCB);
    }, errorCB);
}

function uploadData(tx, results) {
    var len = results.rows.length;
    maxrecords = len;
    var Synched = 0;
    if (len > 0) {
        for (var i = 0; i < len; i++) {
            var row = results.rows.item(i);
            var LocalId = row['LocalId'];
            var DateOfRegistration = getDateTimeformatMySql(String(row['DateOfRegistration']));
            var DateOption = getDateTimeformatMySql(String(row['DateOption']));
            var VolunteerId = row['VolunteerId'];
            var IsUploaded = row['IsUploaded'];
            var LiveId = row['LiveId'];
            var ProfileImagePath = row['ProfileImagePath'];
            var IsProfileImageUploaded = parseInt(row['IsProfileImageUploaded']);
            var params = null;
            var weburl = null;

            if (IsUploaded == 0) {

                //set parameters for web service
                params = "LocalId=" + LocalId + "&OrganizationName=" + row['OrganizationName'] + "&FirstName=" + row['FirstName'] + "&LastName=" + row['LastName'] + "&EmailAddress=" + row['EmailAddress'] + "&MobileNumber=" + row['MobileNumber'] + "&Country=" + row['Country'] + "&State=" + row['State'] + "&City=" + row['City'] + "&Lattitude=" + row['Lattitude'] + "&Longitude=" + row['Longitude'] + "&Website=" + row['Website'] + "&DateOption=" + DateOption + "&TimeOption=" + row['TimeOption'] + "&NumberOption=" + row['NumberOption'] + +"&RadioOption=" + row['RadioOption'] + "&Details=" + row['Details'] + "&CheckBoxoption=" + row['CheckBoxoption'] + "&DropDownOption=" + row['DropDownOption'] + "&DateOfRegistration=" + DateOfRegistration + "&VolunteerId=" + VolunteerId;

                //web service url
                weburl = urlstart + "mywebserviceurl";

                try {
                    $.ajax({
                        async: false,
                        type: "POST",
                        url: weburl,
                        data: params,
                        dataType: "json",
                        success: function(data, textStatus, jqXHR) {
                            if (data.Success == "0") {
                                alert('web services error:\n' + data.Message);
                            }
                            if (data.Success == "1") {
                                try {
                                    LiveId = parseInt(String(data.LiveId));
                                    IsUploaded = 1;

                                    //Update local database to set IsUploaded and LiveId
                                    tx.executeSql("UPDATE tblEntries SET LiveId= " + LiveId + " ,IsUploaded=1 WHERE LocalId= " + LocalId, [], function(tx, results) {
                                        Synched = Synched + 1; /*alert(LiveId);*/
                                    }, errorCB);
                                    //check if profile image exists or not
                                    if (ProfileImagePath != undefined) {
                                        uploadImage(LiveId, LocalId, ProfileImagePath, '1', '');
                                    }

                                } catch (e) {
                                }
                            }
                        },
                        error: function() {
                            alert("There was an error loading the feed");
                        }
                    });
                } catch (e) {
                }
            } else {
                //check if data is uploaded and image is not uploaded
                if (IsProfileImageUploaded == 0 && ProfileImagePath != undefined) {
                    uploadImage(LiveId, ShopId, ProfileImagePath, '1', '');
                }
            }
        }
    }
} // end of querySucess function

//function to upload image

function uploadImage(LiveId, LocalId, ImagePath, UploadType, CreationDate) {
    try {

        var options = new FileUploadOptions();
        options.fileKey = "file";
        options.fileName = ImagePath;
        options.mimeType = "image/jpg";

        var params = new Object();
        params.LiveId = LiveId;
        params.LocalId = LocalId;
        params.UploadType = UploadType;
        params.CreationDate = CreationDate;
        options.params = params;
        options.chunkedMode = false;
        var ft = new FileTransfer();
        var url = urlstart + "mywebservice_url_to_uploadimage";

        ft.upload(ImagePath, url, win, fail, options, false);

    } catch (e) {
        console.error("Survey App Err :" + e.message);
    }
}

function win(r) {
    var jsonresponse = r.response.substring(r.response.indexOf('{'), r.response.indexOf('}') + 1);
    var obj = $.parseJSON(jsonresponse);

    if (obj.Success == "1") {

        var LocalId = parseInt(obj.LocalId);
        var UploadType = parseInt(obj.UploadType);
        if (UploadType == 1) {
            db.transaction(function(tx) {
                tx.executeSql("UPDATE tblEntries SET IsProfileImageUploaded=1 WHERE LocalId=?", [LocalId], function(tx, results) {
                }, errorCB);
            }, errorCB, successCB);
        }
    }
}

function fail(error) {
    alert("There was an error uploading image");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T11:01:34.610

我找到的唯一解决方案是使用点击而不是点击，它将解决问题。

# nsis - 按下返回按钮后返回几页

> ID：15921148
> 
> 赞同：0
> 
> 时间：2013-04-10T08:49:05.923
> 
> 标签：nsis

几天来我一直试图弄清楚如何做到这一点，但没有运气。在安装过程中按下后退按钮时，我正在尝试返回几页。

我想在页面的创建者过程中做到这一点。

```
Page custom printerPage1 verifyPrinterFunc1 ": 1\. Printer Bilgileri" 
```

通常我可以在安装过程中通过`RelGotoPage`Function 跳过页面。

```
Function RelGotoPage
  IntCmp $R9 0 0 Move Move
  StrCmp $R9 "X" 0 Move
  StrCpy $R9 "3"
Move:
  SendMessage $HWNDPARENT "0x408" "$R9" ""
FunctionEnd 
```

但我不能在后退按钮按下事件（Ex `${NSD_OnBack}`）中做到这一点

我被困住了，需要有经验的人的帮助。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:39:56.430

```
!include nsDialogs.nsh
Licensedata "${__FILE__}"
InstallDir $temp
Page directory
Page components
Page license
Page custom printerPage1 verifyPrinterFunc1 ": 1\. Printer Bilgileri"

Function onBack
; Go back two pages to the components page
System::Call 'USER32::PostMessage(i$HWNDPARENT,i0x408,i-2,i0)'
Abort
FunctionEnd

Function printerPage1
nsDialogs::Create 1018
Pop $0
${NSD_OnBack} onBack
nsDialogs::Show
FunctionEnd

Function verifyPrinterFunc1
FunctionEnd 
```

# java - Java 元素图标 SWT ECLIPSE

> ID：15921149
> 
> 赞同：0
> 
> 时间：2013-04-10T08:49:11.507
> 
> 标签：java, eclipse, swt

如何在 SWT 的 Tree 控件中添加 java 元素图标（如包资源管理器中的类、方法、包等）？

例如，我有以下树结构： somePackage

```
--> somePackage
       |
       |--> someClass
                |
                |--> someMethod 
```

这里`-->`代表折叠图标。我想保持这个完整，但另外我想为相应的 java 元素设置适当的图标（因为它在包资源管理器中可见）。我正在使用 SWT Tree 来构建树视图。以下是构造它的代码：

```
final Tree tree = new Tree (composite, SWT.BORDER);
    for (int i=0; i<4; i++) {
                    // Package
        TreeItem iItem = new TreeItem (tree, 0);
        iItem.setText ("TreeItem (0) -" + i);
        for (int j=0; j<4; j++) {
                            // Class
            TreeItem jItem = new TreeItem (iItem, 0);
            jItem.setText ("TreeItem (1) -" + j);
            for (int k=0; k<4; k++) {
                                    // Method or Fields
                TreeItem kItem = new TreeItem (jItem, 0);
                kItem.setText ("TreeItem (2) -" + k);
            }
        }
    }
    tree.setBounds(25, 50, 580, 200); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:49:54.043

您可以将依赖项添加`org.eclipse.jdt.ui`到您的项目中以访问 JDT 项目的共享图像。以下代码适用于 Eclipse 3.x。对于普通的 SWT 应用程序（没有 Eclipse 插件），您需要添加一堆 eclipse 插件（包括 org.eclipse.jdt.ui）才能在您的项目中获得此功能。

```
import org.eclipse.jdt.ui.ISharedImages;
import org.eclipse.jdt.ui.JavaUI;
...

ISharedImages images = (ISharedImages) JavaUI.getSharedImages();
Image image = images.getImage(ISharedImages.IMG_OBJS_CLASS); // class file icon 
```

![在此处输入图像描述](https://i.stack.imgur.com/Jrv93.png)

**编辑：**
如果你不想仅仅因为你想使用一些 eclipse 图像而包含所有库：[我在 web 中找到了所有 eclipse 共享图像的列表](http://shinych.blogspot.de/2007/05/eclipse-shared-images.html)。（基于 Eclipse 3.4）

**来源：**
[接口 org.eclipse.jdt.ui.ISharedImages](http://publib.boulder.ibm.com/infocenter/iadthelp/v6r0/topic/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/ui/ISharedImages.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:28:07.800

不做[`TreeItem.setImage(Image)`](http://help.eclipse.org/helios/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/TreeItem.html#setImage%28org.eclipse.swt.graphics.Image%29)你想做的事？

```
public static void main(String[] a)
{
    Display display = new Display();
    Shell shell = new Shell(display);

    shell.setText("StackOverflow");
    shell.setLayout(new FillLayout());
    Tree tree = new Tree(shell, SWT.SINGLE | SWT.BORDER);
    TreeItem child1 = new TreeItem(tree, SWT.NONE);
    child1.setText("1");
    child1.setImage(display.getSystemImage(SWT.ICON_INFORMATION));

    TreeItem child11 = new TreeItem(child1, SWT.NONE);
    child11.setText("1_1");

    TreeItem child2 = new TreeItem(tree, SWT.NONE);
    child2.setText("2");
    child2.setImage(display.getSystemImage(SWT.ICON_ERROR));

    TreeItem child22 = new TreeItem(child2, SWT.NONE);
    child22.setText("2_2");

    shell.open();
    while (!shell.isDisposed())
    {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

* * *

如果您只是在寻找 Eclipse 图标，您可以在[此处](http://eclipse-icons.i24.cc/)找到它们。

# jquery - 'on' 事件中有多个 ':not()'

> ID：15921154
> 
> 赞同：0
> 
> 时间：2013-04-10T08:49:15.847
> 
> 标签：jquery

在我的文档`on('click')`事件中，我希望单击处理程序附加到文档中的所有内容，除了动态插入的 div`('#controlElement')`及其所有子项。我努力了

```
$(document).on("click", "*:not(#controlElement):not(#controlElement *)", function(e) {} 
```

和

```
$(document).on("click", "*:not(#controlElement, #controlElement *)", function(e) {} 
```

两者似乎都不起作用。什么是正确的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:05:32.950

正如@drquicksilver 正确指出的那样，您所看到的是事件在 DOM 树上的传播。如果您想在单击您的 taget 元素时停止此行为并且不传播，您需要稍微反转您的处理程序以调用[`Event.stopPropagation`](http://api.jquery.com/event.stopPropagation/)：

```
$(document).on("click", "*", 
           function(e) { 
               if($(this).is(':not(#controlElement):not(#controlElement *)')){
                   alert('clicked, on '+this.tagName); 
               }
               else{
                   e.stopPropagation();
               }
           }); 
```

现场示例：http: [//jsfiddle.net/6Zrg6/1/](http://jsfiddle.net/6Zrg6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:56:20.717

它确实有效，但也许你误解了你所看到的？

您确实不会在#controlElement 或其任何子项上获得点击事件，但您仍然会在其父项上获得点击事件，一直到 BODY 和 HTML。

使用类似这样的代码，您可以看到点击事件通过哪些元素传播：

```
$(document).on("click", "*:not(#controlElement):not(#controlElement *)", 
    function(e) { alert('clicked, on '+this.tagName); }); 
```

我在小提琴中做了一个简单的例子：http: [//jsfiddle.net/6Zrg6/](http://jsfiddle.net/6Zrg6/)

# winapi - InvalidateRect 调用过于频繁会阻止其他窗口重绘

> ID：15921156
> 
> 赞同：1
> 
> 时间：2013-04-10T08:49:28.993
> 
> 标签：winapi, invalidation, wm-paint

我开发音频插件，这些插件在它们的主机内运行并实时工作。每个插件都有自己的带有控件的窗口，它通常包含某种分析窗格，一个非常大的矩形，可以重复绘制（例如每秒 20-50 倍）。这一切都运作良好。

当用户调整参数时，麻烦就来了——插件使用 WM_MOUSEMOVE 来跟踪鼠标移动，并在每次更改时调用 ::InvalidateRect 以重绘窗口的相关部分。如果你移动得足够快，窗口真的很快就会重新绘制，但是似乎没有时间重新绘制主机和其他窗口，而且这些通常也会执行某种分析反馈，所以它真的很不理想。

没有我的问题：1）假设主机和其他窗口也使用 ::InvalidateRect ，为什么我的优先？2）如何使 ::InvalidateRect 不优先，这意味着窗口需要失效，但可能会更晚，系统的其余部分也必须有时间进行重绘。

提前致谢！

# java - JTable 列名称

> ID：15921165
> 
> 赞同：0
> 
> 时间：2013-04-10T08:49:53.213
> 
> 标签：java, xml, swing, jtable

移动后如何获取列名并将其写入 XML？`TableModel`通过 XML 文件设置列名（重写 onClose 表）。我想将我最后修改的表用 XML 编写。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:53:08.677

请参阅[*如何使用表格：创建表格模型*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。您的实现`getColumnName()`可以返回所需的`String`. 如果您将模型设为[JavaBean](http://docs.oracle.com/javase/tutorial/javabeans/)，则可以使用[`XMLEncoder`](https://stackoverflow.com/tags/xmlencoder/info)将您的模型转换`TableModel`为 XML 文本。

# javascript - 如何使用 javascript 保护用户可自定义的公共样式表

> ID：15921166
> 
> 赞同：0
> 
> 时间：2013-04-10T08:49:57.787
> 
> 标签：javascript, css, xss

我想让网站的用户能够使用 css 为他们的页面设置主题。但是，在阅读[了样式表中 xss 的这段摘录](https://stackoverflow.com/questions/476276/using-javascript-in-css#answer-482088)后，我试图找到一种完全防止这种情况发生的方法。我应该如何从输入中检测和阻止任何 javascript 或减少样式以外的任何影响？谢谢。

# php - 使用 Symfony2 进行实时搜索

> ID：15921167
> 
> 赞同：0
> 
> 时间：2013-04-10T08:49:59.943
> 
> 标签：php, jquery, mysql, symfony, jquery-autocomplete

我正在创建一个 symfony2 项目，其中有一个 User 表。我必须创建一个搜索框，在用户输入名称时显示建议。并且用户应该只能从建议中进行选择...... [Jquery Autocomplete](http://api.jqueryui.com/autocomplete/)是实现这一目标的最佳方式......还有其他有效的方法可以做到这一点吗？我使用的是 MySQL 数据库 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:58:19.503

我认为最好的方法是使用我最近将它用于相同目的的[GenemuFormBundle](https://github.com/genemu/GenemuFormBundle) ，它运行良好且易于集成。

# php - 如何在openshift应用程序中连接到数据库

> ID：15921169
> 
> 赞同：13
> 
> 时间：2013-04-10T08:50:03.043
> 
> 标签：php, pdo, cloud, openshift

我做了如下

添加了 MySQL 5.1 数据库。请记下这些凭据：

```
 Root User: xxxxxxx
    Root Password: xxxxxxx
    Database Name: php

 Connection URL: mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/ 
```

您还可以通过嵌入 phpmyadmin-3.4 来管理新的 MySQL 数据库。phpmyadmin 用户名和密码将与上面的 MySQL 凭据相同。

添加了 phpMyAdmin 3.4。请再次记下这些 MySQL 凭据：

```
 Root User: xxxxxxx
    Root Password: xxxxxxx

    URL: https://php-doers.rhcloud.com/phpmyadmin/ 
```

我尝试使用波纹管 PDO 代码连接数据库。但它不起作用

```
$dbh = new PDO('mysql:host=mysql://$OPENSHIFT_MYSQL_DB_HOST:$OPENSHIFT_MYSQL_DB_PORT/;dbname=php', "xxxxxx, "xxxxxx"); 
```

我不知道连接 URL 是什么意思？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-10T17:22:17.063

您的连接字符串中有错误，加上 $OPENSHIFT_MYSQL_DB_* 是环境变量，需要通过 getenv php 函数获取。

所以尝试以下方法：

```
define('DB_HOST', getenv('OPENSHIFT_MYSQL_DB_HOST'));
define('DB_PORT',getenv('OPENSHIFT_MYSQL_DB_PORT')); 
define('DB_USER',getenv('OPENSHIFT_MYSQL_DB_USERNAME'));
define('DB_PASS',getenv('OPENSHIFT_MYSQL_DB_PASSWORD'));
define('DB_NAME',getenv('OPENSHIFT_GEAR_NAME'));

$dsn = 'mysql:dbname='.DB_NAME.';host='.DB_HOST.';port='.DB_PORT;
$dbh = new PDO($dsn, DB_USER, DB_PASS); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-27T14:33:24.350

从 webconsole 打开 php myadmin ，在左上角你会得到一些 Ip

这就像 xx.xx.xx.xx:3306 ，所以你的主机名是 xx.xx.xx.xx

IP 地址可以工作，我已经尝试过并为我工作过

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-18T10:03:48.973

下面的代码对我有用，试试这个它可能对你有帮助

```
var mysql = require('mysql');

var mysql = require('mysql');
exports.pool = mysql.createPool({
    host: process.env.OPENSHIFT_MYSQL_DB_HOST || 'localhost',
      port: process.env.OPENSHIFT_MYSQL_DB_PORT || '3306',
      user: process.env.OPENSHIFT_MYSQL_DB_USERNAME || 'root',
      password: process.env.OPENSHIFT_MYSQL_DB_PASSWORD ||  '',
      database: 'chichat' || 'chichat',
      multipleStatements : true,
      charset: 'utf8'
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T16:42:01.397

我想添加一些信息以供将来参考。今天我正在尝试将 Drupal 安装部署到 Open Shift (OS) 并尝试配置 MySql。我通过 SSH (rhc ssh) 连接到操作系统，转到 app-root/data/sites/default。跟随 cat settings.php 看看操作系统如何配置数据库。这里是：

```
// When run from Drush, only $_ENV is available.  Might be a bug
if (array_key_exists('OPENSHIFT_APP_NAME', $_SERVER)) {
  $src = $_SERVER;
} else {
  $src = $_ENV;
}
$databases = array (
  'default' => 
  array (
    'default' => 
    array (
      'database' => $src['OPENSHIFT_APP_NAME'],
      'username' => $src['OPENSHIFT_MYSQL_DB_USERNAME'],
      'password' => $src['OPENSHIFT_MYSQL_DB_PASSWORD'],
      'host' => $src['OPENSHIFT_MYSQL_DB_HOST'],
      'port' => $src['OPENSHIFT_MYSQL_DB_PORT'],
      'driver' => 'mysql',
      'prefix' => '',
    ),
  ),
);
$conf['file_private_path'] = $src['OPENSHIFT_DATA_DIR'] . 'private/';
$conf['file_temporary_path'] = $src['OPENSHIFT_TMP_DIR'] . 'drupal/'; 
```

因此，我在 git 存储库中创建了一个 php 文件夹（请参阅有关 Drupal 的操作系统文档），将干净的 Drupal 安装复制到其中并将上面的代码粘贴到 settings.php。推送到 git 后，重新启动操作系统应用程序并工作！

# c - C 编译器无意义的错误？

> ID：15921180
> 
> 赞同：1
> 
> 时间：2013-04-10T08:50:52.493
> 
> 标签：c, struct, compiler-errors, strcpy

我有以下用 C 编写的代码：

```
n.    struct UDSData {
        char *name;
        char *address;
      };

n.    char UDS1[16] = "fill up sixteen", UDS2[16] = "fill up sixteen";

n.    while (something) {
       ...

108\.   char UDS1Temp[16], UDS2Temp[16];
109\.   strcpy(UDS1Temp, UDS1);
110\.   strcpy(UDS2Temp, UDS2);
111\.   
112\.   struct UDSData item = {UDS1Temp, UDS2Temp};
113\.   UDSCodes[UDSTotal++] = item;
     } 
```

知道为什么代码编译会给出这些错误：

```
1><file>(112): error C2143: syntax error : missing ';' before 'type'
1><file>(113): error C2065: 'item' : undeclared identifier
1><file(113): error C2440: '=' : cannot convert from 'int' to 'UDSData' 
```

删除并直接`strcpy()`输入到结构中。`UDS1``UDS2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:13:34.473

您几乎可以肯定使用的是早期的编译器标准，例如 C89，它不允许混合声明和代码。您需要`item`在代码块的开头附近声明。像这样的东西：

```
char UDS1Temp[16], UDS2Temp[16];
struct UDSData item = {UDS1Temp, UDS2Temp};

strcpy(UDS1Temp, UDS1);
strcpy(UDS2Temp, UDS2);
UDSCodes[UDSTotal++] = item 
```

由于您只是将指针放入结构中，因此可以在`strcpy`. 但是你必须在两个 char 数组`UDSData` *之后声明。*

# c# - 无法连接到 PayPal Sandbox 以验证 IPN 侦听器收到的消息

> ID：15921181
> 
> 赞同：1
> 
> 时间：2013-04-10T08:50:59.343
> 
> 标签：c#, asp.net, paypal, paypal-sandbox, paypal-ipn

我正在使用 IPN 模拟器测试我的 IPN 侦听器。在 IPN 模拟器上发送 IPN 后，我的日志显示我的 IPN 侦听器收到了 IPN，但是当它发送回添加了 cmd=_notify-validate 的消息时，沙箱没有响应。IPN 模拟器上显示的错误是“IPN 传递失败：500 内部服务器错误”。我的监听器向沙箱发送消息后遇到以下错误：“连接尝试失败，因为连接方在一段时间后没有正确响应，或者建立连接失败，因为连接的主机未能响应 173.0.82.77:443 ”。

当我使用实时 PayPal URL 测试我的监听器时，它会以“INVALID”消息响应 - 这表明我的监听器工作正常。

在与我的网络托管公司核实后，他们建议 PayPal 沙箱 IP 没有被阻止，问题应该出在 PayPal 沙箱上。请告知 PayPal 是否有可能阻止了源 IP，因此没有响应。如果是这样，我该如何解除对源 IP 的阻止？任何帮助表示赞赏。谢谢。

我正在使用 PayPal 为我的 IPN 侦听器提供的示例 ASP.NET C# 代码，并且我的日志在“向 PayPal 发送请求...”处停止。

```
SSLogger.logger.Info("IPN Invoked");

//Post back to either sandbox or live
string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
string strLive = "https://www.paypal.com/cgi-bin/webscr";
HttpWebRequest req = (HttpWebRequest)WebRequest.Create(strSandbox);

//Set values for the request back
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
byte[] param = Request.BinaryRead(Request.ContentLength);   //get request values
string strRequest = "cmd=_notify-validate&" + Encoding.ASCII.GetString(param);

//set request values
req.ContentLength = strRequest.Length;
SSLogger.logger.Info("sb: " + Encoding.ASCII.GetString(param));
SSLogger.logger.Info("strRequest: " + strRequest);

//Send the request to PayPal and get the response
SSLogger.logger.Info("Sending request to PayPal...");
StreamWriter streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
streamOut.Write(strRequest);
streamOut.Close();
SSLogger.logger.Info("Request sent out to PayPal.");
StreamReader streamIn = new StreamReader(req.GetResponse().GetResponseStream());
string strResponse = streamIn.ReadToEnd();
streamIn.Close();
SSLogger.logger.Info("Response from PayPal received.");

SSLogger.logger.Info(strResponse); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T04:26:39.803

试试这个：

```
req.Method = "POST";
req.ContentType = "application/x-www-form-urlencoded";
byte[] param = Request.BinaryRead(HttpContext.Current.Request.ContentLength);
string strRequest = Encoding.ASCII.GetString(param);
strRequest += "&cmd=_notify-validate";
req.ContentLength = strRequest.Length; 
```

# javascript - 如何通过 ajax 获取 json 数据

> ID：15921183
> 
> 赞同：0
> 
> 时间：2013-04-10T08:51:15.080
> 
> 标签：javascript, ajax, asp.net-mvc

我正在尝试创建一个基于 fltr2 每 5 秒更新一次的图表页面。但是我在从服务器返回时遇到了一些问题，我明白了

```
[object, Object],[object, Object],[object, Object],[object, Object],[object, Object],[object, Object],[object, Object] 
```

javascript看起来像：

```
 function updateFunc() {

        new Ajax.Request('http://localhost:53083/Home/Data', {
            method: 'get',
            onSuccess: function (transport) {
                var json = transport.responseText.evalJSON();
                alert(json);
            }
        });
    }

    updateFunc(); 
```

而 asp.net/c# 看起来像：

```
 //
        // GET: /Home/Data

        public string Data()
        {
            dt.Rows.RemoveAt(0);

            dt.Rows.Add(rand.Next(1, 50));

            return JsonConvert.SerializeObject(dt);
        } 
```

dt 只是一个静态数据表，我删除了第一个数据表并添加了一个新数据表，从而营造出一种持续更新的感觉。

怎么了？正如发布的那样，我得到的只是`[object, Object]`警报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T08:56:59.780

1.  您需要将响应的媒体类型更改为 JSON，以便客户端正确解释它：

    ```
    Response.ContentType = "application/json"; 
    ```

    （有关正确类型的参考，请参见[此处。）](https://stackoverflow.com/q/477816/67392)

2.  似乎`JsonConvert`不知道如何序列化`dt`. 要么更改为它可以序列化的类型，要么告诉它如何序列化该类型：请参阅[JSON.Net 文档](http://james.newtonking.com/projects/json/help/index.aspx)。

# gwt - GWT 仿真问题（休眠验证器）

> ID：15921185
> 
> 赞同：1
> 
> 时间：2013-04-10T08:51:17.340
> 
> 标签：gwt, gwt-2.5

我正在尝试使用超级源来模拟类 GWT 无法访问源代码。这首先运行良好。但是，当我在通过 Bean Validation (JSR 303) 验证的类中使用这些类时，出现错误：[java] com.google.gwt.dev.jjs.InternalCompilerException: Unexpected error during visit。... ... [java] 引起：java.lang.NoClassDefFoundError: somepath/myClass

恕我直言，这看起来我不能在“共享”包中使用仿真，而只能在“客户端”中使用。

这里有什么经验吗？

TIA乌吉比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:57:03.333

在`GWT`：

客户端包编译为`javascript`.

共享包同时编译为`java byte code`和`javascript`.

最有可能在编译为 java 代码时不会引发任何问题。但在编译为 java 脚本时，您可能会遇到此问题。

```
IMHO  This looks like I cannot use Emulations in 
                                     'shared' packages but only in the 'client'. 
```

是的，不幸的是，这是**真的**。

共享包中的代码必须对编译器友好。即它应该效仿。

# java - 如何将单个字符串转换为自定义对象数组

> ID：15921186
> 
> 赞同：0
> 
> 时间：2013-04-10T08:51:17.793
> 
> 标签：java, apache-commons-beanutils

我有一个带有键/值对的映射和一个 JavaBean，它应该填充这样的值：

`BeanUtils.populate(bean, map)`

效果很好。但是地图中有一个属性包含一个 JSON 字符串，我需要对其进行解析并转换为数组对象。

bean 中的属性如下所示：

```
private MyCustomClass[] customObjects;
...
public setCustomObjects(MyCustomClass[] customObjects){
 this.customObjects = customObjects;
} 
```

所以我需要一个自定义转换器，它从地图中获取单个字符串并将其转换为数组。但不幸的是，我可以找到一种方法来做到这一点。

# javascript - 选择所选元素旁边的元素

> ID：15921189
> 
> 赞同：1
> 
> 时间：2013-04-10T08:51:24.283
> 
> 标签：javascript, jquery, html, selector

我有下一个代码：

```
<tr>
  <td>
    <select class="select_big" name="additional_field" id="<?=$field['id'];?>" required>
      <option value="0">Выберите значение</option>
      ...
  </td>
</tr>
<tr>
  <td>
    <select class="select_big" name="additional_field" id="<?=$field['id'];?>" required>
      <option value="0">Выберите значение</option>
      ...
  </td>
</tr>
<tr>
  <td>
    <select class="select_big" name="additional_field" id="<?=$field['id'];?>" required>
      <option value="0">Выберите значение</option>
      ...
  </td>
</tr>
<tr>
  <td>
    <select class="select_big" name="additional_field" id="<?=$field['id'];?>" required>
      <option value="0">Выберите значение</option>
      ...
  </td>
</tr> 
```

当我选择第二个“选择”元素时，我需要禁用所有下一个元素。如果我选择 1 需要禁用 3 和 4，如果我选择 2 我只需要禁用 4。元素计数可能不同。

如何获取选择旁边的所有元素？

我接下来尝试：

```
<script type="text/javascript">
  $("[name=additional_field]").change(function(e) {
    field_data = '#' this.id.replace(/[* .]/g, "\\$&");
      $(field_data).parent().parent().nextAll().each(function(i) {
        console.log($(this)('[name=additional_field]'));
      });
  });
</script> 
```

但我收到下一个错误：Uncaught TypeError: object is not a function

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:05:19.140

我认为您可以更简单地进行操作，而不会混淆父节点的遍历：

```
var $sel = $('.select_big').change(function() {
    $sel.filter(':gt(' + $sel.index(this) + ')').prop('disabled', +$(this).val());
}); 
```

演示：http: [//jsfiddle.net/VFcF9/](http://jsfiddle.net/VFcF9/)

如果您选择默认选项，它也会重新启用选择框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:08:56.643

你得到的错误是因为这一行：

```
$(this)('[name=additional_field]') 
```

第一部分，`$(this)`返回一个 jQuery 对象，并且该对象不是一个函数，所以你不能在它后面加上更多的括号。

至于您禁用以下所有选择元素的要求，也许是：

```
$("[name=additional_field]").change(function(e) {
  $(this).closest("tr").nextAll("tr").find("[name=additional_field]").prop("disabled", true);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:54:54.280

[这应该这样做](http://jsfiddle.net/ckSQJ/)

```
$("[name=additional_field]").change(function(e) {

  var f = $(this).closest('tr')             //find the closest parent tr
                 .nextAll('tr')             //find all tr that follows
                 .find('select.select_big') //from them, get all select

  //f should be all the selects the follow what changed

}); 
```

# sql-server - 使用 Microsoft SQL 的表和视图之间的关系

> ID：15921199
> 
> 赞同：1
> 
> 时间：2013-04-10T08:51:48.973
> 
> 标签：sql-server, foreign-key-relationship

是否有一个自然的选择来建立表和视图之间的关系，或者我应该使用触发器作为一种解决方法来检查数据的一致性？

我有一个查找视图（出于某种原因，我需要它是视图而不是表格）。我想将记录插入到另一个表中。我要插入的记录的值之一必须是查找视图中的 id 之一。

例如：

ViewCities (CityId, CityName) -- 这是查找视图。位于不同数据库上的视图后面的表。现在我想向 tblUsers 插入新行。其中一个行列是 CityId。我希望没有人能够向 tblUsers 插入包含 ViewCities 上不存在的 cityid 的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:24:52.673

我知道您有两个选项可以保持参照完整性。您不能使用外键约束，因为您说这些表位于两个单独的数据库中。选项是： 1\. 使用触发器，正如您所提到的。2\. 使用一个检查约束，它引用一个用户定义的函数来进行检查。

例如：

假设我有一个名为 test 的数据库，另一个数据库是 Northwind 数据库。在我的测试数据库中，我想创建一个记录用户名的表。我要强制执行的检查是用户名必须是 Northwind 数据库中用户的姓氏之一。我首先像这样创建一个UDF：

```
create function chk_name (@name varchar(50))
returns bit
as
begin
declare @name_found bit=0
if exists(select * from Northwind..Employees where LastName=@name)
    begin
        set @name_found=1
    end

return @name_found 
end 
```

然后，我使用如下检查约束创建表：

```
create table tst
(name varchar(50) check ( dbo.chk_name(name)=1   )
) 
```

现在，如果您尝试在 tst 表中插入一行，则它必须是 Northwind 数据库中员工表的姓氏之一。

# git - git send-pack：协议错误：带坏 #50

> ID：15921202
> 
> 赞同：0
> 
> 时间：2013-04-10T08:51:57.953
> 
> 标签：git, git-remote

我正在尝试使用 git push 将一些文件推送到服务器。我已将服务器配置为推送文件：

```
git remote set-url test ssh://user@location.com:2200/fullpath/ 
```

但我收到以下错误：

```
git send-pack: protocol error: bad band #50
fatal: The remote end hung up unexpectedly 
```

似乎远程端出现了故障，但我找不到对此协议错误的任何引用。

有谁知道如何解决这个错误？或者我应该搜索哪些日志以更好地理解问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:05:13.677

首先提供有关您的设置的*完整*信息：双方运行的软件版本以及双方操作系统的风格/版本。这是必需的，因为有不止一个 Git 实现（客户端和服务器端），所以至少任何即将猜测问题原因的人都应该从那里开始。

此外，这个问题（对我而言）似乎足够硬核，足以保证发布到主要的 Git 列表（针对开发人员）——有关更多信息，请参阅[此内容。](https://gist.github.com/tfnico/4441562)

作为旁注，如果您在双方都有标准的香草 Git，我会怀疑其他东西（不是 Git）在服务器端与您交谈，因此您的 Git 客户端看到的不是 Git 协议，而是试图解释它，并失败。所以你至少可以试着做

```
 ssh -p 2200 user@location.com 'git --version' 
```

看看你能不能拿回一些明智的东西？

# python - 如何使用python创建系统托盘弹出消息？（视窗）

> ID：15921203
> 
> 赞同：44
> 
> 时间：2013-04-10T08:51:59.393
> 
> 标签：python, notifications, popup, system-tray

我想知道如何使用 python 创建系统托盘弹出消息。我已经在很多软件中看到了这些，但很难找到资源来轻松使用任何语言进行操作。任何人都知道一些在 Python 中执行此操作的库？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-10T09:10:44.647

在[`pywin32`库的帮助下，您可以使用我在](https://sourceforge.net/projects/pywin32/)[此处](https://gist.github.com/BoppreH/4000505)找到的以下示例代码：

```
from win32api import *
from win32gui import *
import win32con
import sys, os
import struct
import time

class WindowsBalloonTip:
    def __init__(self, title, msg):
        message_map = {
                win32con.WM_DESTROY: self.OnDestroy,
        }
        # Register the Window class.
        wc = WNDCLASS()
        hinst = wc.hInstance = GetModuleHandle(None)
        wc.lpszClassName = "PythonTaskbar"
        wc.lpfnWndProc = message_map # could also specify a wndproc.
        classAtom = RegisterClass(wc)
        # Create the Window.
        style = win32con.WS_OVERLAPPED | win32con.WS_SYSMENU
        self.hwnd = CreateWindow( classAtom, "Taskbar", style, \
                0, 0, win32con.CW_USEDEFAULT, win32con.CW_USEDEFAULT, \
                0, 0, hinst, None)
        UpdateWindow(self.hwnd)
        iconPathName = os.path.abspath(os.path.join( sys.path[0], "balloontip.ico" ))
        icon_flags = win32con.LR_LOADFROMFILE | win32con.LR_DEFAULTSIZE
        try:
           hicon = LoadImage(hinst, iconPathName, \
                    win32con.IMAGE_ICON, 0, 0, icon_flags)
        except:
          hicon = LoadIcon(0, win32con.IDI_APPLICATION)
        flags = NIF_ICON | NIF_MESSAGE | NIF_TIP
        nid = (self.hwnd, 0, flags, win32con.WM_USER+20, hicon, "tooltip")
        Shell_NotifyIcon(NIM_ADD, nid)
        Shell_NotifyIcon(NIM_MODIFY, \
                         (self.hwnd, 0, NIF_INFO, win32con.WM_USER+20,\
                          hicon, "Balloon  tooltip",msg,200,title))
        # self.show_balloon(title, msg)
        time.sleep(10)
        DestroyWindow(self.hwnd)
    def OnDestroy(self, hwnd, msg, wparam, lparam):
        nid = (self.hwnd, 0)
        Shell_NotifyIcon(NIM_DELETE, nid)
        PostQuitMessage(0) # Terminate the app.

def balloon_tip(title, msg):
    w=WindowsBalloonTip(title, msg)

if __name__ == '__main__':
    balloon_tip("Title for popup", "This is the popup's message") 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2017-02-07T08:54:38.177

我最近使用[Plyer](https://plyer.readthedocs.io/en/latest/)包创建了跨平台通知，使用[`Notification`](https://plyer.readthedocs.io/en/latest/#plyer.facades.Notification)外观（它还有许多其他有趣的东西值得一看）。

很容易使用：

```
from plyer.utils import platform
from plyer import notification

notification.notify(
    title='Here is the title',
    message='Here is the message',
    app_name='Here is the application name',
    app_icon='path/to/the/icon.' + ('ico' if platform == 'win' else 'png')
) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-04-18T06:35:56.770

这是使用 python 在 Windows 10 上显示通知的简单方法：模块**win10toast**。

**要求**：

*   pypiwin32
*   安装工具

**安装**：

```
>> pip install win10toast 
```

**示例**：

```
from win10toast import ToastNotifier
toaster = ToastNotifier()
toaster.show_toast("Demo notification",
                   "Hello world",
                   duration=10) 
```

[![代码的结果](https://i.stack.imgur.com/UchKy.png)](https://i.stack.imgur.com/UchKy.png)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-10T09:20:31.330

您将需要使用第 3 方 python GUI 库或 pywin32 库。TkInter，与 python 捆绑的 GUI 工具包不支持系统托盘弹出窗口。

支持使用系统托盘的多格式中性库：

*   wxPython
*   PyGTK
*   PyQT

支持使用系统托盘的 Windows 特定库：

*   pywin32

在 Windows 上使用 wxpython 弹出系统托盘的信息/示例：

*   [无法正确使用 wx.NotificationMessage 与 wxPython](https://stackoverflow.com/questions/7523511/unable-to-use-wx-notificationmessage-properly-with-wxpython)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-05-17T14:02:41.410

在 Linux 系统中，您可以使用内置命令`notify-send`。

`ntfy` 库可用于发送推送通知。

[单击此处获取 ntfy 文档](https://pypi.python.org/pypi/ntfy)

安装：

```
sudo pip install ntfy 
```

例子：

```
ntfy send "your message!"
ntfy -t "your custom title" send "your message" 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-08-10T21:41:02.990

**视窗**

[现在有一种使用Python/Winrt](https://github.com/Microsoft/xlang/tree/master/src/package/pywinrt/projection)实现这一目标的官方方法，github 解释了如何将 UWP API 映射到 python 的。

通过遵循[官方 UWP 文档](https://docs.microsoft.com/fr-fr/windows/uwp/design/shell/tiles-and-notifications/send-local-toast)，我设法显示了一个小通知，该通知也出现在 Windows 通知中心：

```
import winrt.windows.ui.notifications as notifications
import winrt.windows.data.xml.dom as dom

#create notifier
nManager = notifications.ToastNotificationManager
notifier = nManager.create_toast_notifier();

#define your notification as string
tString = """
<toast>
    <visual>
        <binding template='ToastGeneric'>
            <text>Sample toast</text>
            <text>Sample content</text>
        </binding>
    </visual>
</toast>
"""

#convert notification to an XmlDocument
xDoc = dom.XmlDocument()
xDoc.load_xml(tString)

#display notification
notifier.show(notifications.ToastNotification(xDoc)) 
```

设置仅限于库的安装

```
pip install winrt 
```

**要求**

Windows 10，2018 年 10 月更新或更高版本

适用于 Windows 的 Python，版本 3.7 或更高版本

pip，版本 19 或更高版本

**奖金 macOS**

我还找到了一种使用 AppleScript 在 macOS 中执行此操作的方法，以下代码的目标是构建将通过 python 执行的 AppleScript 代码`os.system`

```
import os

def displayNotification(message,title=None,subtitle=None,soundname=None):
    """
        Display an OSX notification with message title an subtitle
        sounds are located in /System/Library/Sounds or ~/Library/Sounds
    """
    titlePart = ''
    if(not title is None):
        titlePart = 'with title "{0}"'.format(title)
    subtitlePart = ''
    if(not subtitle is None):
        subtitlePart = 'subtitle "{0}"'.format(subtitle)
    soundnamePart = ''
    if(not soundname is None):
        soundnamePart = 'sound name "{0}"'.format(soundname)

    appleScriptNotification = 'display notification "{0}" {1} {2} {3}'.format(message,titlePart,subtitlePart,soundnamePart)
    os.system("osascript -e '{0}'".format(appleScriptNotification)) 
```

使用 asis ：

```
displayNotification("message","title","subtitle","Pop") 
```

**最后的笔记**

我已经在两个要点中总结了所有以前的代码

[视窗](https://gist.github.com/MarcAlx/443358d5e7167864679ffa1b7d51cd06)

[苹果系统](https://gist.github.com/MarcAlx/f7a51a245c7c0450dbd4f4203b9916e0)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-10-05T06:49:48.627

最简单的方法是使用`win10toast`

这是代码：

```
from win10toast import ToastNotifier

Notifi = ToastNotifier()  
Notifi.show_toast("Title", "Description") 
```

这可能会对您有所帮助！

# jquery - jquery将图像拖到表并更新数据库

> ID：15921204
> 
> 赞同：0
> 
> 时间：2013-04-10T08:51:59.840
> 
> 标签：jquery, mysql, drag-and-drop

我有一张有 4 张图片的桌子和**N**个 4x4 桌子。我需要做的是在这些表中移动这 4 个图像，并使用已添加的图像以及稍后在哪个位置使用它来更新数据库以将其发回。

我不太了解 jquery 和 ajax 能做什么；所以我需要知道是否可以只使用表格，或者我需要为此使用表格。考虑到我会有**N**个表，我需要知道如何在 db 中构造它们（添加 N 列听起来不对）。从我到目前为止搜索的内容中，我了解到使用 jquery ui 和 ajax 是可能的。我需要的是一个想法，如果可能的话，一个起点会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:55:42.043

你想在数据库中保存什么？作为图像或只是图像细节，如名称？您可以查看 Jquery 文档 [在此处查找可拖动](http://jqueryui.com/draggable/)

[对于可丢弃](http://jqueryui.com/droppable/)

# bash - 检查 bash 命令是否指定了修饰符

> ID：15921206
> 
> 赞同：0
> 
> 时间：2013-04-10T08:52:02.643
> 
> 标签：bash

在项目配置期间，需要为和目录`Symfony 2`设置适当的权限。`cache``log`

文档说以两种方式进行。其中之一是`setfacl`使用修饰符调用命令`-m`。然而，并非每个版本都包含此修改器。是否可以检查此命令或任何其他命令是否允许设置一些修改器？

例如使用以下伪代码：

```
if [ checkmods --command=setfacl --modificator=-m ]
  setfacl -m ....
else
  chmod ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:04:56.910

`setfacl --help`您可以通过运行并检查是否包含修饰符来解析使用信息。例如：

```
if setfacl --help | grep -q -- -m,
then
    echo "setfacl -m supported"
else
    echo "setfacl -m not supported"
fi 
```

如果您想对任何具有该`--help`选项的命令执行此操作，请`_parse_help`查看 bash-completion 文件中可用的功能。

[http://anonscm.debian.org/gitweb/?p=bash-completion/bash-completion.git;a=blob;f=bash_completion](http://anonscm.debian.org/gitweb/?p=bash-completion/bash-completion.git;a=blob;f=bash_completion)

```
# Parse GNU style help output of the given command.
# @param $1  command; if "-", read from stdin and ignore rest of args
# @param $2  command options (default: --help)
#
_parse_help()
{
    eval local cmd=$( quote "$1" )
    local line
    { case $cmd in
        -) cat ;;
        *) LC_ALL=C "$( dequote "$cmd" )" ${2:---help} 2>&1 ;;
      esac } \
    | while read -r line; do

        [[ $line == *([ $'\t'])-* ]] || continue
        # transform "-f FOO, --foo=FOO" to "-f , --foo=FOO" etc
        while [[ $line =~ \
            ((^|[^-])-[A-Za-z0-9?][[:space:]]+)\[?[A-Z0-9]+\]? ]]; do
            line=${line/"${BASH_REMATCH[0]}"/"${BASH_REMATCH[1]}"}
        done
        __parse_options "${line// or /, }"

    done
} 
```

# c# - Xamarin：使用 Swig 创建 C# 包装器，用于 Xamarin.Android 项目

> ID：15921207
> 
> 赞同：5
> 
> 时间：2013-04-10T08:52:05.217
> 
> 标签：c#, c, wrapper, swig, xamarin

我正在尝试使用 SWIG 为 C 创建一个 C# 包装器，以便在 Xamarin.Android 项目中使用。我有一个 .so 库（在 Eclipse Android 项目中使用 NDK 构建，如此[处所示](http://mobilepearls.com/labs/ndk-builder-in-eclipse/)）和头文件。

在不使用 swig 的情况下，我可以使用[这里](https://stackoverflow.com/questions/15896650/xamarin-use-ndk-built-so)的功能。使用这种方法，我可以手动使用简单的函数设置和返回字符串和 int。但是如果库由使用结构、指针和其他的函数组成，我不知道如何做这些东西。因此，我想如果 SWIG 可以通过自动创建包装器来帮助我感觉更好，我不必担心手动完成所有可能出现在其他第三方库中的复杂工作。

现在，我下载了 SWIG（在 Windows 操作系统上）并设置了环境变量路径，我可以在我的命令提示符上看到所有可用的 SWIG 命令（使用 swig --help 在[这里](https://stackoverflow.com/questions/7443112/how-to-install-swig)）。

**我的问题是：**

*   如何使用 SWIG 来使用 Xamarin.Android 项目中 .so 库中可用的函数（利用结构和指针）？如何仅使用头文件和 .so 库来使用 SWIG 创建包装器并直接使用 Xamarin.Android 项目中的函数？

谢谢！

# java - 使用 SimpleXML 反序列化的 Android 速度问题

> ID：15921213
> 
> 赞同：4
> 
> 时间：2013-04-10T08:52:12.813
> 
> 标签：java, android, performance, deserialization, simple-framework

提出赏金作为唯一的答案并没有为 Android 提供良好的实现。是否有更快的实现与 Android 兼容？还是 SimpleXML 是我将获得的最佳性能？

我对 Java 和 Android 开发相当陌生，所以不知道将 xml 字符串反序列化为对象的正确过程。我找到了一种适用于的方法：

```
public static Object deserializeXMLToObject(String xmlFile,Object objClass)  throws Exception 
{ 
    try
    {
            InputStream stream = new ByteArrayInputStream(xmlFile.getBytes("UTF-8"));

            Serializer serializer = new Persister();
            objClass = serializer.read(objClass, stream);
            return objClass;
    }
    catch (Exception e) 
    {
        return e;
    }
} 
```

`xmlFile`（错误命名的）xml 字符串在哪里，并且`objClass`是我要反序列化到的类的空类。这通常是其他对象的列表。

示例类：

```
@Root(name="DepartmentList")
public class DepartmentList {
    @ElementList(entry="Department", inline=true)
    public List<Department> DepartmentList =new ArrayList<Department>();
    public boolean FinishedPopulating = false;
} 
```

部门类：

```
public class Department {

    @Element(name="DeptID")
    private String _DeptID ="";
    public String DeptID()
    {
        return _DeptID;
    }
    public void DeptID(String Value)
    {
        _DeptID = Value;
    }

    @Element(name="DeptDescription")
    private String _DeptDescription ="";
    public String DeptDescription()
    {
        return _DeptDescription;
    }
    public void DeptDescription(String Value)
    {
        _DeptDescription = Value;
    }
} 
```

示例 XML：

```
<DepartmentList>
  <Department>
    <DeptID>525</DeptID>
    <DeptDescription>Dept 1</DeptDescription>
  </Department>
  <Department>
    <DeptID>382</DeptID>
    <DeptDescription>Dept 2</DeptDescription>
  </Department>
</DepartmentList> 
```

这在整个应用程序中运行良好，但我已经到了需要反序列化列表中 >300 个对象的地步。这仅需要大约 5 秒，或者在调试时接近一分钟，但用户对这种性能并不满意，并且在不需要调试时浪费了时间。有什么办法可以加快这个速度吗？还是我应该这样做的另一种方式？最好只通过改变`deserializeXMLToObject`方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-02T11:36:17.040

我相信有人会指出那里有一个更好的库，但是根据[一个详细的答案](https://stackoverflow.com/questions/7224318/how-to-solve-the-xml-parsing-performance-issue-on-android)，它们在 Android 上都很慢。

所以这是我的快速破解（是的，我知道它不是很容易维护，并且对于没有完全按照指定的 XML 形成很脆弱）和一些结果：

```
private void doTest()
{
    Thread t = new Thread()
    {
        public void run()
        {
            runOne(2000);
            runOne(300);
            runOne(20000);
        }

        private void runOne(int num)
        {
            String start = "<DepartmentList>";
            String mid1 =  "<Department>\n" +
                            "<DeptID>";
            String mid2 = "</DeptID>\n" +
                            "<DeptDescription>Dept ";
            String mid3 = "</DeptDescription></Department>";
            String fin = "</DepartmentList>";

            StringBuffer sb = new StringBuffer();
            sb.append(start);
            for (int i=0; i< num; i++)
            {
                sb.append(mid1);
                sb.append(""+i);
                sb.append(mid2);
                sb.append(""+i);
                sb.append(mid3);
            }
            sb.append(fin);

            Pattern p = Pattern.compile(
            "<Department\\s*>\\s*<DeptID\\s*>([^<]*)</DeptID>\\s*<DeptDescription\\s*>([^<]*)</DeptDescription>\\s*</Department>");

            long startN = System.currentTimeMillis();

            DepartmentList d = new DepartmentList();
            List<Department> departments = d.DepartmentList;

            Matcher m = p.matcher(sb);
            while (m.find())
            {
                Department department = new Department();
                department.DeptID(m.group(1));
                department.DeptDescription(m.group(2));
                departments.add(department);
            }

            long endN = System.currentTimeMillis();

            Log.d("Departments", "parsed: " + departments.size() + " in " + (endN-startN) + " millis");
            Log.d("Departments", "lastone: " + departments.get(departments.size() -1)._DeptID + " desc: " + departments.get(departments.size() -1)._DeptDescription);

        }
    };
    t.start();
}

public class DepartmentList {
    public List<Department> DepartmentList =new ArrayList<Department>();
    public boolean FinishedPopulating = false;
}

public class Department {

    private String _DeptID ="";
    public String DeptID()
    {
        return _DeptID;
    }
    public void DeptID(String Value)
    {
        _DeptID = Value;
    }

    private String _DeptDescription ="";
    public String DeptDescription()
    {
        return _DeptDescription;
    }
    public void DeptDescription(String Value)
    {
        _DeptDescription = Value;
    }
} 
```

我将它粘贴到一个 Android 项目中，并从 onCreate() 方法中调用它。结果如下：

```
Platform        num=300    num=2000     num=20000 
=================================================
Nexus 7         5          38           355
Galaxy Y        29         430          1173
HTC Desire HD   19         189          539
Galaxy Nexus    14         75           379 
```

所有时间都以毫秒为单位。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-07T23:25:49.253

对于我的研究，这是优化的最佳方法：

“Simple 将动态构建您的对象图，这意味着它将需要加载尚未加载的类，并使用反射基于其注释为每个类构建一个模式。因此，第一次使用将永远是迄今为止最昂贵的. 重复使用同一个持久化实例会快很多倍。所以尽量避免使用多个持久化实例，尽可能只使用一个。

因此，重构您的代码以使用相同的 Persister 应该可以提高您的性能。

我从这个[**问题**](https://stackoverflow.com/questions/6074353/xml-with-simplexml-library-performance-on-android)中得到的这个和其他提示。在那种情况下，这种重构提高了性能，正如作者所说（从 15s 到 3-5s）。

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T13:51:00.420

您可以通过直接序列化为 XML 并直接从 XML 反序列化（例如使用[JAXB](http://jaxb.java.net/)或[XStream](http://xstream.codehaus.org/) ）来消除中间（反）序列化步骤。

您还可以通过多线程加快速度。我假设您要反序列化的所有 XML 字符串都在[ConcurrentLinkedQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)中；或者，您可以同步访问您正在使用的任何非线程安全集合。使用类似[ThreadPoolExecutor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html)的东西来最小化线程创建开销。

```
public class DeserializeXML implements Runnable {
    private final String xml;
    private final ConcurrentLinkedQueue<Object> deserializedObjects;

    public DeserializeXML(String xml, ConcurrentLinkedQueue deserializedObjects) {
        this.xml = xml;
        this.deserializedObjects = deserializedObjects;
    }

    public void run() {
        deserializedObjects.offer(deserializeXMLToObject(xml, Object.class));
    }
}

// ***

ConcurrentLinkedQueue<String> serializedObjects;
ConcurrentLinkedQueue<Object> deserializedObjects;
ThreadPoolExecutor executor = new ThreadPoolExecutor;
while(!serializedObjects.isEmpty()) {
    executor.execute(new DeserializeXML(serializedObjects.poll(), deserializedObjects));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-08T07:51:57.827

很久以前就有一个与 SOAP Web 服务类似的问题。最后我改变了 XML 的格式，转换了属性中的节点。

例子：

```
<node>
  <attr1>value1</attr1>
  <attr2>value2</attr2>
  <attr3>value3</attr3>
  <attr4>value4</attr4>
</node> 
```

被转化为

```
<node attr1='value1'attr2='value2' attr3='value3' attr4='value4' /> 
```

从理论上讲，也许不是最好的解决方案，但性能改进确实很好。Ofc 如果您的 XML 有点复杂（不同级别或多级列表的可重复节点），事情可能会有点复杂。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-06T21:33:54.537

使用服务器代理并将您的 XML 转换为 JSON

# android - 使用 OnItemLongClick 事件从图库中删除图像

> ID：15921218
> 
> 赞同：0
> 
> 时间：2013-04-10T08:52:39.060
> 
> 标签：android, android-gallery, android-image, android-file

我想知道如何使用 OnItemLongClickListener 事件从图库中删除图像？

我不知道如何从该事件中找到有关图像的 url 或其他详细信息以将其删除。

这是我到目前为止所做的（* 我已经有一个里面有图片的画廊）：首先我将画廊连接到事件：

```
gallery.setOnItemLongClickListener(OnLongClickGallery); 
```

然后我想问用户是否确定要删除图像并同时保存所选项目的数据：

```
private OnItemLongClickListener OnLongClickGallery = new OnItemLongClickListener() {

    @Override
    public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
            int arg2, long arg3) {
        //How I get the desired data here?
        showPopupMenu(arg1);// Show pop up list 
        return false;
    }
}; 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:00:33.180

我想你可以从

*   如何获取图像并实现点击监听器

[http://androidsamples.blogspot.in/2009/06/how-to-display-thumbnails-of-images.html](http://androidsamples.blogspot.in/2009/06/how-to-display-thumbnails-of-images.html)

*   如何从内容提供者中删除图像

[拍摄相机意图照片后删除图库图像](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken)

```
ContentResolver cr = getContentResolver();
                     cr.delete(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, 
                        BaseColumns._ID + "=" + c.getString(3), null); 
```

编辑：从内容提供者那里获取路径

```
image_path_index = cursor.getColumnIndex(MediaStore.Images.Media.DATA)
path[i] = cursor.getString(image_path_index); 
```

# asp.net - 当输入控件放置在 asp GridView 中时，页面加载未触发

> ID：15921219
> 
> 赞同：0
> 
> 时间：2013-04-10T08:52:40.143
> 
> 标签：asp.net, gridview

我有一个 gridview，它在我的网站的索引页面上为用户显示产品信息。我想扩展它以允许用户在他们审查过产品时勾选复选框。

但是，在将复选框列添加到我的 gridview 模板后，当我尝试多次搜索时，我的索引页面的 Page_Load 事件停止触发，这会导致问题，因为执行树下方的一些事件需要初始化的对象在页面加载。

问题似乎是在 gridview 中放置任何 asp 输入控件会以某种方式阻止 Page_Load 在 DataSources OnSelecting 和 OnSelected 以及 Grids OnRowDataBound 事件之前触发，但我不明白为什么。

这是我的示例代码，我看不出我在这里做错了什么。

索引.aspx.cs

```
private ProductSearch productSearch

protected void Page_Load(object sender, EventArgs e)
{
    productSearch = new ProductSearch(GetSearchParameters());
    productSearch.PageLoad()
}

protected void ProductsSelecting(object sender, ObjectDataSourceSelectingEventArgs e)
{
    e.InputParameters["searchParams"] = productSearch.GetSearchParams();
}

protected void ProductsSelected(object sender, ObjectDataSourceStatusEventArgs e)
{
    productSearch.SetExportToCsvButton();
}

protected void ProductsPageIndexChanging(object sender, GridViewPageEventArgs e)
{
    dgProducts.PageIndex = e.NewPageIndex;
}

protected void ProductsOnRowDataBound(object sender, GridViewRowEventArgs e)
{
    productSearch.ProductsRowDataBound(e.Row);
} 
```

索引.aspx

```
<%@ Page Language="C#" MasterPageFile="~/Admin/AdminMaster.master" AutoEventWireup="true" CodeBehind="Index.aspx.cs" Inherits="Web.Admin.Index" %>
<asp:Content ContentPlaceHolderID="DataFrame" runat="server">
    <asp:GridView ID="dgProducts" runat="server" AllowPaging="True" AllowSorting="True" EnableViewState="False"
            AutoGenerateColumns="False" DataSourceID="dsProducts" PagerSettings-Position="TopAndBottom" DataKeyNames="ProductNo, KitID"
            OnPageIndexChanging="ProductsPageIndexChanging" OnRowDataBound="ProductsOnRowDataBound"
            EmptyDataText="There are no products matching your search." meta:resourcekey="dgProducts" onrowcreated="ProductsRowCreated">
        <HeaderStyle Font-Size="Small" />
        <Columns>
            <asp:TemplateField HeaderText="Reviewed">
                <ItemTemplate>                        
                    <asp:CheckBox runat="server" ID="chkReviewed" class="reviewedCheckbox" Checked="False" />                        
                </ItemTemplate>
            </asp:TemplateField>
        </Columns
    </asp:GridView>
    <asp:ObjectDataSource ID="dsProducts" runat="server" EnablePaging="True" SelectMethod="ProductAndKitSearchByParams"
            TypeName="ProductSearchController.ProductSearch" onselecting="ProductsSelecting" SortParameterName="SortParameter"
            SelectCountMethod="SelectVirtualCount" OnSelected="ProductsSelected">
        <SelectParameters>
            <asp:Parameter ConvertEmptyStringToNull="true" DefaultValue="" Name="searchParams" Type="Object" />
        </SelectParameters>
    </asp:ObjectDataSource>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:04:09.173

检查您的母版页 contentplaceholderid 并在内容页面中提供它，如下所示：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server"></asp:Content> 
```

并检查您的内容页面代码隐藏文件名是否应与页面指令中提及的相同。

# asp.net - 使用 WebForms 的 SimpleMembership

> ID：15921221
> 
> 赞同：4
> 
> 时间：2013-04-10T08:52:48.550
> 
> 标签：asp.net, webforms, simplemembership

是否可以将 SimpleMembership 与 ASP.NET WebForms 一起使用？

John Galloway 的文章似乎表明 WebForms“在 ASP.NET Membership 之上实现了 OAuth”。

我发现的所有其他文章（在 StackOverflow 和其他地方）都在 MVC 或 WebMatrix 的上下文中讨论了 SimpleMembership。

NuGet 上与 SimpleMembership 相关的任何内容都适用于 MVC。

有可能吗，有没有关于如何做到这一点的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T08:51:41.450

是的，您可以将它与 WebForms 一起使用。参考以下2篇文章： http: [//blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages) [http://blogs.msmvps.com/luisabreu/blog/2012/ 09/24/adding-the-simplemembership-provider-to-an-asp-net-web-forms-app/](http://blogs.msmvps.com/luisabreu/blog/2012/09/24/adding-the-simplemembership-provider-to-an-asp-net-web-forms-app/)

# c# - 如何传递查询字符串值？

> ID：15921225
> 
> 赞同：0
> 
> 时间：2013-04-10T08:52:56.637
> 
> 标签：c#, asp.net

在我的 Web 应用程序中，我们展示了一些我们开发的产品演示，并且我已将产品详细信息存储在数据库中，例如

```
tblProduct{Id,ProductName,ProductDescription} 
```

现在假设用户单击产品 A 的下载链接，因此该页面的超链接我已经传递了类似演示下载的查询字符串，因此它将重定向到 ProductName 为 A 的查询表单，并且我已经使用代码检索了该查询页面上的查询字符串值

```
 string productName = Request.QueryString["ProductName"] as string;
 objInquiry.InquiryFor = productName; 
```

现在，无论何时用户按下提交按钮在该查询表单上，一个链接都应该发送到他的电子邮件 ID，该链接适用于特定的 ProductOnly....现在在提交按钮的代码上，我已经像 `mail.Body += "<a href=\"http://www.abc.co.in/test.aspx?period=" + DateTime.Now + "&ProductName=[]\">Download Demo Software</a>";`现在一样制作了查询字符串，我的问题是如何通过这个产品名称意味着 ProductName 是 A 所以我怎么能通过这个以及如何在 test.aspx 页面上检索这个..???请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:03:42.673

我不太明白这个问题，但在我看来，你有 3 页。

*   第 1 页，您有下载产品 A 的超链接
*   第 2 页有一个提交按钮（我想还有一个表格）。在这个页面代码后面你有：`string productName = Request.QueryString["ProductName"] as string;`。因此，您可以在表单中创建一个隐藏字段并添加 ProductName。
*   第 3 页，您现在可以使用 ProductName 访问`Request.Form["ProductName"] as string;`并将值添加到电子邮件正文。

**正如我在评论中提到的，我建议您使用 ID，而不是 ProductName。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:05:10.467

您可以像这样传递产品名称：

```
mail.Body += string.Format("<a href=\"http:\//www.abc.co.in/test.aspx?period={0}&ProductName={1}\">Download Demo Software</a>", DateTime.Now, productName); 
```

正常检索它`test.aspx`：

```
string productName = Request.QueryString["ProductName"] as string; 
```

关于您对文件下载的评论，假设您的产品具有与之关联的文件名字段：-

```
string productName = Request.QueryString["ProductName"];
Product product = GetProductFromDB(productName);//I don't know what your DB access code looks like

//Build download link in markup:
<asp:HyperLink ID="lnkFileDownload" runat="server" />

//Link code
lnkFile.NavigateUrl = string.Format("/FILE DOWNLOAD LOCATION/{0}/", product.FileName)
lnkFile.Text = "Download Demo Software"; 
```

# c# - MSTEST 中的 DataTestMethod 和 DataRow 属性

> ID：15921226
> 
> 赞同：53
> 
> 时间：2013-04-10T08:53:05.757
> 
> 标签：c#, unit-testing, mstest

我在 Microsoft 视频中看到了有关这些属性的 Visual Studio 更新 2。但是，我找不到关于它们的任何其他信息，也无法使用它们构建项目。

有谁知道这些属性或如何让它们工作？

```
[DataTestMethod]
[DataRow("a", "b")]
[DataRow(" ", "a")]
public void TestMethod1(string value1, string value2)
{
    Assert.AreEqual(value1 + value2, string.Concat(value1, value2));
} 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2017-09-18T12:42:02.580

最初在[https://blogs.msmvps.com/bsonnino/2017/03/18/parametrized-tests-with-ms-test](https://web.archive.org/web/20191119163446/https://blogs.msmvps.com/bsonnino/2017/03/18/parametrized-tests-with-ms-test/)上发布了一个很好的演练（链接现在通过回程机器存档）。

简而言之，您将需要安装`MSTest.TestFramework`and`MSTest.TestAdapter`并删除对`Microsoft.VisualStudio.QualityTools.UnitTestFramework`. 然后，您可以使用该属性指示参数化测试，并可以根据您的示例`[DataTestMethod]`使用该属性添加您的参数。`[DataRow]`属性中的值`[DataRow]`将按照指定的顺序传递给测试方法。

请注意，`[DataRow]`属性中的值必须是基元，因此您不能使用`DateTime`或`decimal`例如。如果你想要它们，你将不得不解决这个限制（例如`DateTime`，你可以用三个整数参数来表示年、月和日，而不是用一个参数来表示日期，并`DateTime`在测试主体内创建）。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-11-23T14:17:53.927

最后，已添加此功能（仍处于预发布阶段） [https://blogs.msdn.microsoft.com/visualstudioalm/2016/06/17/taking-the-mstest-framework-forward-with-mstest-v2/](https://blogs.msdn.microsoft.com/visualstudioalm/2016/06/17/taking-the-mstest-framework-forward-with-mstest-v2/)

基本上，一个人必须做两件事：

1）安装两个NuGet包（版本并不重要，但这就是我所拥有的）

```
 <package id="MSTest.TestAdapter" version="1.1.5-preview" targetFramework="net452" />
  <package id="MSTest.TestFramework" version="1.0.6-preview" targetFramework="net452" /> 
```

2) 删除对旧测试库的引用，因为它具有在相同命名空间中定义的相同属性 - 这样做是为了实现向后兼容性

```
Microsoft.VisualStudio.QualityTools.UnitTestFramework 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-10T09:36:56.097

看来这仅在 WinRT/Metro 的单元测试项目中可用，现在在更新 2、Windows Phone 8 中可用。这对我来说是一个谜，为什么它不适用于 mstest 的所有测试。

# json - 获取 Facebook 事件到 RSS 提要

> ID：15921227
> 
> 赞同：5
> 
> 时间：2013-04-10T08:53:09.287
> 
> 标签：json, facebook, events, rss

如何从 Facebook 获取用户的所有事件作为 Rss。我尝试了下面的链接，但它只提供一个事件而不是全部。

```
https://developers.facebook.com/tools/explorer/?method=GET&path=643795265635061 
```

我找不到任何链接来获取用户的所有事件。有没有办法以 RSS 或 Json 格式获取所有事件。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-05-28T12:06:37.423

多亏了 Facebook 的优秀员工，您再也无法做到这一点：

> 新开发者将不再使用事件、群组、页面和 Instagram API
> 
> 当前访问事件和组 API 的应用程序今天将失去访问权限

[https://developers.facebook.com/blog/post/2018/04/04/facebook-api-platform-product-changes](https://developers.facebook.com/blog/post/2018/04/04/facebook-api-platform-product-changes)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-18T15:51:58.487

事件可以以流行的日历格式（Apple iCal、Microsoft Outlook、Google 日历）[导出](https://www.facebook.com/help/152652248136178/ "如何将我的活动导出到另一个日历？")，但遗憾的是没有公共提要！要将事件提要作为 JSON 检索，您需要有一个[access_token](https://developers.facebook.com/tools/access_token/ "访问令牌工具")。[您可以通过Facebook 的 Graph Explorer](https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=taakeofficial/events/ "Facebook 事件示例")轻松测试它：

`https://developers.facebook.com/tools/explorer/145634995501895/?method=GET&path=taakeofficial%2Fevents%2F`

当以编程方式实现它（或提供您自己的最新提要）时，您需要使用其中一个[Facebook SDK](https://developers.facebook.com/docs/sdks/ "Facebook 的官方 SDK")（PHP，用于服务器）并将您的 access_token 添加到查询中：

`https://graph.facebook.com/taakeofficial/events?access_token=ABC123`

# nuget - 是否可以重命名 Nuget 中的文件夹

> ID：15921229
> 
> 赞同：0
> 
> 时间：2013-04-10T08:53:14.863
> 
> 标签：nuget, nuget-package

我正在创建一个`nuget`包来将一些`ascx`文件安装到解决方案中。我希望存储 ascx 文件的文件夹会因项目而异。IE 文件夹名称将与项目名称相同。

是否可以弹出来捕获文本，以便我可以在安装过程中重命名 nuget 包的内容部分中的文件夹。那么是否可以将此文件夹名称添加到文件夹内文件的命名空间中？

我知道可以添加`$rootnamespace$`a`.pp extension`以用正确的根名称空间替换密钥，但你也可以附加到这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:27:36.650

您应该查看[在包安装和删除期间自动运行 PowerShell 脚本](http://docs.nuget.org/docs/creating-packages/creating-and-publishing-a-package#Automatically_Running_PowerShell_Scripts_During_Package_Installation_and_Removal)的选项。

# ios - 错误 - 由于未声明协议 [名称]，打开会话失败

> ID：15921230
> 
> 赞同：0
> 
> 时间：2013-04-10T08:53:25.550
> 
> 标签：ios, xcode, xcode4.5

我正在尝试通过蓝牙连接心率监测器。我有设备的 SDK。当我实例化一个类型的对象时`HRMonitor`- 它是委托打印`connectionChanged`

可能已连接并且工作正常。

但在那之后我得到以下输出：

> 2013-04-10 11:36:00.409 TestHRMonitor[601:907] connectionChanged
> 
> 2013-04-10 11:36:00.415 TestHRMonitor [601:907] 错误 - 由于协议 com.ssiamerica.ipulse 未在 Info.plist 中声明，因此打开会话失败
> 
> 2013-04-10 11:36:00.417 TestHRMonitor[601:907] 错误 - /SourceCache/ExternalAccessory/ExternalAccessory-213.3/EASession.m:-[EASession dealloc] - 137 无法关闭 _accessory=0x1fd26e70 和 sessionID=65536 的会话

我只有*.h、* .a 文件。

抱歉，我知道这是一个新手的问​​题，但是：

谁能解释更多关于这个错误的信息，以及如何在 Info.plist 中声明这个协议？

[已编辑]我已经解决了这个问题。

我需要做的就是： 1\. 打开 info.Plist 2\. 添加一个键“支持的外部附件协议。3\. 将错误描述中说明的值 [name] 添加到键中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:13:16.863

我已经解决了这个问题。

我需要做的就是：

1.  打开 info.plist
2.  添加一个键“支持的外部附件协议。
3.  将错误描述中声明的值 [name] 添加到键中。

# autohotkey - Autohotkey 是否有“测试我的脚本”功能？

> ID：15921232
> 
> 赞同：5
> 
> 时间：2013-04-10T08:53:26.833
> 
> 标签：autohotkey

我问了一个关于我用于 emacs（在 Cygwin 中）重新映射 Ctrl 和 Alt 键的 Autohotkey 脚本的问题。这是问题：[https](https://stackoverflow.com/q/15899963/1243435) ://stackoverflow.com/q/15899963/1243435 。

我一直在测试我的脚本的一种方法是打开 emacs 并使用`C-h k`显示键序列文档的功能。它可以让我确认 Autohotkey 是否符合我的预期。

然而，似乎有一些复杂性，例如可能是 Cygwin 终端不允许序列`C-M-SPC`“通过”到 emacs，因此 emacs 实际上只接收`C-SPC`。

因此，我的问题是：Autohotkey 是否有自己的测试工具，当您按下键盘上的几个组合键时，它会向您显示 Autohotkey 接收和发送的内容？如果是，我将能够确认我的脚本是否工作正常，然后确定是否是其他问题导致我在将关键序列通过 emacs 时遇到问题。

**根据 Armin 建议的答案进行更新**

根据 Armin 的建议，以下是我在执行以下操作后在 AHK 视图屏幕中看到的内容：

1.  在 Cygwin 窗口中单击鼠标以激活它（我已经在其中运行了 emacs），
2.  按`LeftAlt`+`h`然后`k`我知道 AHK 将转换为`C-h k`，这是 emacs 中的“告诉我下一个键盘序列是什么意思”，
3.  在 emacs 帮助提示下按`Left Win`+ `Left Alt`+ `SPACE`,
4.  看到emacs向我展示了文档`C-M-@`（顺便说一下，它也绑定到了键序列`C-M-SPC`），
5.  在 AHK 视图窗口中单击鼠标返回并使用 刷新`F5`。

这是 AHK 窗口中输出的相关部分（以缩短较长的行为模以在此处停止自动换行）：

```
VK  SC  Type    Up/Dn   Elapsed Key     Window
----------------------------------------------------------
A4  038 h   d   4.18    LAlt            /cygdrive/c/...
A4  038 i   u   0.00    LAlt            
A2  01D i   d   0.00    LControl        
48  023     d   0.09    H               
48  023     u   0.09    H               
A4  038 h   u   0.05    LAlt            
A2  01D i   u   0.00    LControl        
4B  025     d   1.22    K               
4B  025     u   0.06    K               
A4  038 h   d   1.12    LAlt            
A4  038 i   u   0.00    LAlt            
A2  01D i   d   0.00    LControl        
5B  15B h   d   0.02    LWin            
A4  038 i   d   0.00    LAlt            
20  039     d   0.19    Space           
20  039     u   0.06    Space           
5B  15B h   u   0.16    LWin            
A4  038 i   u   0.00    LAlt            
A4  038 h   u   0.00    LAlt            
A2  01D i   u   0.01    LControl        
74  03F     d   1.90    F5                  C:\...\AutoHotkey.ahk ... 
```

它显示了很多正在发生的事情。

我的理解是，这证明 AHK 正确地将我的`Left Alt`++`Left Win`转换`SPACE`为`C-M-SPC`.

下面解释一下为什么我认为证明已经完成。

这是我按下`LAlt`，它被转换为`LCtrl`：

```
A4  038 h   d   4.18    LAlt            /cygdrive/c/...
A4  038 i   u   0.00    LAlt            
A2  01D i   d   0.00    LControl 
```

（但我不确定中间的那个是什么`u`——AHK`LAlt`解释说'i=Ignored，因为它是由 AHK 脚本生成的'）。

接下来是我按下和释放`h`：

```
48  023     d   0.09    H               
48  023     u   0.09    H 
```

所以此时emacs已经收到了`C-h`。

接下来我松开`LAlt`，然后按下并松开`k`。

```
A4  038 h   u   0.05    LAlt            
A2  01D i   u   0.00    LControl        
4B  025     d   1.22    K               
4B  025     u   0.06    K 
```

Emacs 现在进入“描述键序列”的帮助提示。

然后我接下来按下`LAlt` ，我们看到 AHK 发送`d`信号（第二行再次出现我没想到的`LCtrl`“忽略” ），然后我按下，AHK 发送一个of然后我按下：`u``LAlt``LWin``d``LAlt``SPACE`

```
A4  038 h   d   1.12    LAlt            
A4  038 i   u   0.00    LAlt            
A2  01D i   d   0.00    LControl        
5B  15B h   d   0.02    LWin            
A4  038 i   d   0.00    LAlt            
20  039     d   0.19    Space 
```

最后是我释放所有这些`LAlt`++的序列，我们看到 AHK为and`LWin`和and发送信号：`SPACE``u``Space``LAlt``LCtrl`

```
20  039     u   0.06    Space           
5B  15B h   u   0.16    LWin            
A4  038 i   u   0.00    LAlt            
A4  038 h   u   0.00    LAlt            
A2  01D i   u   0.01    LControl 
```

最后是当我在 AHK 视图窗口中单击鼠标激活它后刷新数据时：

```
74  03F     d   1.90    F5                  C:\...\AutoHotkey.ahk ... 
```

这似乎证明了我的 AHK 脚本已经达到了我的预期。

唯一剩下的问题是出现两次`u`的神秘。`LAlt`

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T10:08:11.047

您可以尝试使用“[密钥历史记录”](https://autohotkey.com/docs/commands/KeyHistory.htm)窗口

*   运行你的热键脚本
*   右键单击托盘图标并选择**打开**
*   单击**查看**菜单并选择**密钥历史记录和脚本信息**。

[![按键历史屏幕](https://i.stack.imgur.com/2TCFS.jpg)](https://i.stack.imgur.com/2TCFS.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T19:05:27.340

您的问题的标题是，“Autohotkey 是否具有测试我的脚本功能” - 好吧，为了回答这个问题，我建议使用 QuickAHK，它旨在做到这一点！它有一个沙盒和许多其他功能。我一直用它来测试代码片段（我只是一个普通用户 - 根本与该程序没有任何关系）。

这是[当前线程](https://autohotkey.com/boards/viewtopic.php?t=12390)的链接，因为[旧论坛已不存在](http://www.autohotkey.com/board/topic/33125-quickahk-v22/)。和[当前的下载链接](https://www.dropbox.com/s/d548c6q8zn8hqtw/QuickAHK.zip?dl=1)。

> 如果您进行大量快速而肮脏的脚本开发或测试，您可能会使用允许您即时运行脚本的工具。这些工具包括许多文本编辑器、AutoHotkey 论坛上发布的工具之一，或者您已经编写了自己的工具。QuickAHK 是这些工具中的另一种……有一些不同之处：

*   沙盒
*   恢复和还原
*   停止脚本

但是，也有[QuickCodeTester](https://github.com/G33kDude/CodeQuickTester)，它是最新的并得到维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-15T15:37:33.443

我使用列表行，然后在关键点暂停最新的 ahk 还支持使用调试语句 OutputDebug，Text

# c# - 将余数保存在变量中

> ID：15921233
> 
> 赞同：0
> 
> 时间：2013-04-10T08:53:38.060
> 
> 标签：c#

我想如何将总和的剩余部分保存在变量中。

**示例**：计算秒到小时：

**用户输入**：（`524000`秒）

**答案**： `14H 33M 20S`

我会做这样的事情：

```
console.writeline("Enter seconds")
int seconds = int.parse(console.readline());
int hours = seconds / 3600;
console.writeline("Seconds calculated in hours = {0}",hours); 
```

余数是 2000 秒除以 60 = 33，余数为 20。
但是我怎样才能将这个余数保存在另一个变量中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:01:05.920

使用模运算符 (%) 但对于这个问题，使用 TimeSpan 不是更容易吗？

```
TimeSpan span = TimeSpan.FromSeconds(5400); 
```

然后当然显示答案。*（提示：String.Format()）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:00:56.733

使用 iVisions 实现，但如果您必须计算其他值的剩余部分，请使用模数

```
 int remainder = seconds % 3600 
```

[http://www.dotnetperls.com/modulo](http://www.dotnetperls.com/modulo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T08:57:40.910

你可以这样计算：

```
2000 / 60 = 33  ==> (2000 - (33*60) = 20) 
```

或者使用[模](http://msdn.microsoft.com/de-de/library/0w4e0fzs%28v=vs.80%29.aspx)运算符：

```
2000 % 60 = 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:06:21.650

除了`TimeSpan.FromSeconds`and`%`运算符，还可以使用[`Math.DivRem`](http://msdn.microsoft.com/en-us/library/system.math.divrem.aspx)方法：

```
int hours = Math.DivRem(seconds, 3600, out seconds);
int minutes = Math.DivRem(seconds, 60, out seconds); 
```

# c# - 使用 perforce 更改命令

> ID：15921235
> 
> 赞同：0
> 
> 时间：2013-04-10T08:53:43.857
> 
> 标签：c#, perforce, p4api.net

为了获得特定时期的变化列表，我们使用命令 change

```
p4 changes @2001/04/01,@now 
```

我正在使用 p4api.net 获取此更改列表，因此我必须使用：

```
 P4Command cm1 = new P4Command(ps, "changes", true, String.Format("{0}", deppath1)); 
```

但问题是如何指定这两个选项，我试过了，但它不起作用请帮助我，以获得更多帮助，了解我在寻找什么
[如何查找上周为使用 Perforce 的特定用户提交的更改列表？](https://stackoverflow.com/questions/911739/how-to-find-changelists-submitted-in-the-last-week-for-a-particular-user-using-p?answertab=active#tab-top)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T09:09:03.690

当我们使用 p4api.net 时，p4 更改在这种情况下不起作用：

```
p4 changes file.c@2010/05/01,2010/06/01 
```

错过 file.c 和 @ 之间的空白，因此 cm1.addArg 在这种情况下不起作用，因为它添加了一个空格并且不会执行

# virtualization - QEMU - 将guestOS引导重定向到主机

> ID：15921236
> 
> 赞同：0
> 
> 时间：2013-04-10T08:53:44.557
> 
> 标签：virtualization, virtual-machine, qemu

我使用 QEMU 带来了 CentOS.img（在某个地方下载）。我发现 CentOS.img 的启动屏幕接管了当前终端的控制台会话，我可以看到 CentOS 启动过程并提示我进入 guestVM CentOS 的登录屏幕。当我从远程控制台机器运行 QEMU 实例时，这对我真的很有帮助。

现在，我使用 iso 创建了一个新的 RHEL.img，当我尝试启动它时；除了 (Y) 的一些符号之外，我在屏幕上看不到任何东西 :(

```
 $>/usr/libexec/qemu-kvm  -hda ./RHEL.img  -bios bios.bin  -nographic  -net nic,model=e1000,macaddr=00:AD:BE:EF:4F:BD -net tap,script=./qemu-ifup -m 1024 -smp 2
 ...Y 
```

在调查中，我发现我们可以通过使用将 RHEL 引导重定向到控制台来做到这一点

```
 # virt-edit RHEL_VM /boot/grub/grub.conf
   ...
   title rhel (2.6.38.6-26.rc1.fc15.x86_64)
   root (hd0,0)
   kernel /vmlinuz ro [...] console=ttyS0
   ... 
```

但没有任何结果。我试图将 rhel VM 会话带到我从远程终端调用 qemu-kvm 的同一个控制台。提前致谢。

注意：我没有在物理主机上启用 GUI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T21:05:48.383

您可以尝试添加一个串行端口并将输出发送到该端口。尽管您必须能够至少启动一次才能执行这些步骤...

如果你只是在 qemu 命令行中添加一个串行端口，然后 telnet 到那个，你可能会很幸运；希望linux检测到这一点并在那里发送输出

> ```
> edit /etc/init/ttyS0.conf and add
> 
>   respawn
>   console none
> 
>   start on (local-filesystems)
>   stop on [!12345]
> 
>   script
>   exec start ttyS0
>   end script
> 
> then
> 
>     ln -s /etc/init/ttyS0.conf /etc/rc2.d/S99ttyS0.conf
>     ln -s /etc/init/ttyS0.conf /etc/rc0.d/S99ttyS0.conf
>     ln -s /etc/init/ttyS0.conf /etc/rc6.d/S99ttyS0.conf
> 
> then do this to enable grub
> 
>  Edit /etc/default/grub
> 
>  1\. Edit the GRUB_CMDLINE_DEFAULT="" line to start the console on /dev/ttyS0
>  GRUB_CMDLINE_LINUX_DEFAULT="console=tty0 console=ttyS0,38400n8"
> 
>  2\. Add a serial console section
>  # Serial console
>  GRUB_TERMINAL=serial
>  GRUB_SERIAL_COMMAND="serial --speed=38400 --unit=0 --word=8 --parity=no --stop=1"
> 
>  3\. Rebuild the grub.cfg file
>  sudo sh
>  grub-mkconfig > /boot/grub/grub.cfg 
> ```

# ios - IOS键盘默认按钮翻译

> ID：15921238
> 
> 赞同：10
> 
> 时间：2013-04-10T08:53:45.590
> 
> 标签：ios, button, keyboard, translation

实际上，我只需要将小数点键盘上的“完成”/“首选项”/“下一步”按钮翻译成俄语或其他语言。顺便说一句，俄语应用程序的本地化。此外，当我更改本地化语言时，其他控件中的所有其他按钮（如“取消”）都会自动翻译。但不是这个。可以不定制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-07T12:42:44.387

它会帮助你。

[iPhone：以编程方式更改键盘语言](https://stackoverflow.com/questions/12595970/iphone-change-keyboard-language-programmatically)。

不，这是不可能的 - 用户只能在设置中更改他们的语言。

但是，如果您选择（或询问他们的偏好），您可以给用户一个“英文”键盘

你这样做使用： UIKeyboardTypeASCIICapable

您可以通过按底行的“地球图标”直接在键盘上更改键盘。

首先，您必须在“设置”中启用这些语言进行输入。然后按下键盘上的地球按钮将在这些语言之间切换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-11T12:09:10.050

我找到了解决方案：您必须在 xCode 项目中创建一个 infoPlist.strings，并添加以下代码：

```
 /* 
  InfoPlist.strings
*/
"Done" = "OK"; 
```

然后，在您的项目-> 信息中，添加您的语言（在我的情况下为西班牙语）。

稍后，返回到您的 infoPlist 文件，并在“本地化”选项卡下的右侧菜单中定位“西班牙语”。

在“编辑方案”中，单击“停止应用程序”按钮旁边，单击运行->选项，然后在“应用程序语言”中选择“系统语言”。

对应用程序的所有语言重复此操作。

成功！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T11:25:04.123

在他的以下[回答](https://stackoverflow.com/a/2275714/3655437)中，[Oscar](https://stackoverflow.com/users/135683/oscar-gomez)描述了如何创建自定义按钮并将其作为子视图添加到 UIKeyboard。

您可以使用上面的方法创建所需的按钮以及所需的自定义文本和选择器，然后将其添加到 UIKeyboard 中。

# xml - 并发程序执行 DBMS_XSLPROCESSOR.clob2file 失败

> ID：15921239
> 
> 赞同：1
> 
> 时间：2013-04-10T08:53:46.633
> 
> 标签：xml, oracle

Oracle 应用程序自定义并发程序在 DBMS_XSLPROCESSOR.clob2files 语句处挂起，并在一段时间后出错。

我们正在使用该程序生成一个 XML 文件。代码将如下所示。（[ORA-22806：不是对象或 REF：生成 XML 输出时出错](https://stackoverflow.com/questions/15228526/ora-22806-not-an-object-or-ref-error-while-generating-xml-output)）

以下语句未执行 DBMS_XSLPROCESSOR.clob2file (lc_xml_clob, gfilelocation, gfilename, 0)；

谁能帮帮我吗 。

# c# - 数据绑定到列表框

> ID：15921240
> 
> 赞同：3
> 
> 时间：2013-04-10T08:53:54.063
> 
> 标签：c#, json, data-binding

“a.text”是从我的 JSON 响应中提取的。我正在尝试在列表框中显示“a.text”。

```
List<Feature> features = App.dResult.directions[0].features;
        foreach (Feature f in features)
        {
            Attributes a = f.attributes;
            MessageBox.Show(a.text);
            directionListBox.ItemsSource = a.text;

        } 
```

我尝试使用将“a.text”绑定到列表框，但没有显示。

```
<ListBox x:Name="directionListBox" ItemsSource="{Binding a.text}" >
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical">
                        <TextBlock Text="{Binding a.text}" Style="{StaticResource PhoneTextTitle2Style}" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

谁能给我一些关于如何将“a.text”绑定到列表框的想法？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:22:39.813

ListBox 的 ItemsSource 属性不应指向字符串，如 a.text，而是指向 ObservableCollection。

尝试这样的事情：

第一个：从 INotifyPropertyChanged 派生该代码类。

第二：您可以从[此处](http://www.codekeep.net/snippets/132415f7-a33a-40bc-b3e0-57af0b498f7b.aspx)获取 ObservableList或使用 ObservableCollection 代替。

第三：然后使用此代码（未经测试，但可能有效）：

```
ObservableList<String> featList = new ObservableCollection<String>();
public event PropertyChangedEventHandler PropertyChanged;

public void InvokePropertyChanged(string propertyName)
{
    PropertyChangedEventHandler handler = PropertyChanged;
    if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
}
public ObservableList<String> FeatList
{
    get { return featList; }
    set
    {
        featList = value;
        InvokePropertyChanged("FeatList");
    }
}
List<Feature> features = App.dResult.directions[0].features;
foreach (Feature f in features)
{
    Attributes a = f.attributes;
    //MessageBox.Show(a.text);
    FeatList.add(a.text);
} 
```

第四：在字段的顶部，您必须使用“使用”语句来导入 ObservableList。

然后，将列表框的 ItemSource 绑定到这个列表，并使 TextBlock 的 Binding 只绑定到默认的 DataContext，这将是列表中的字符串：

```
<ListBox x:Name="directionListBox" ItemsSource="{Binding FeatList}" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Vertical">
                    <TextBlock Text="{Binding}" Style="{StaticResource PhoneTextTitle2Style}" />
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

# c# - asp.NET MVC C# 的 FastReport 演示无法正常工作

> ID：15921243
> 
> 赞同：2
> 
> 时间：2013-04-10T08:54:14.660
> 
> 标签：c#, asp.net-mvc, fastreport

FastReport 发布了一个新版本，支持 MVC razor 视图中的 wokring。

我从他们的网站获得了演示，并认为我会试一试。但我无法让演示应用程序工作。还尝试按照以下步骤创建一个新项目：

fast-report.com/en/blog/37/show/

我错过了什么吗？网络表单演示运行良好..

我得到的错误：

> “FastReport.Web.WebReport”不包含“GetHtml”的定义

这些在 _Layout.cshtml 中也无法识别：

```
@WebReportGlobals.Scripts()
@WebReportGlobals.Styles() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T09:41:43.540

卸载，重新安装，重新启动，通过从 VS2012 打开它来启动演示（在我的机器上识别为 VS2010）。通过 NuGet 添加缺少的 DLL 以获得 MVC4 支持，将 FastReport DLL 复制到 bin 目录并让它运行！

![WebReportGlobals 仍然丢失](https://i.stack.imgur.com/KMfCc.png)

WebReportGlobals 仍被标记为缺失。无论如何它有效！

# php - LEFT JOIN SQL 语句对性能的影响

> ID：15921245
> 
> 赞同：1
> 
> 时间：2013-04-10T08:54:26.407
> 
> 标签：php, mysql, sql, left-join

正如我们所知，LEFT JOIN SQL 语句给出了 LEFT 表中的所有值，并通过右表中的 id（外键）给出了联合值。例如，我有下表

```
comments
    comment_id
    parent_id
    comment_body 
```

该表有以下数据

```
-----------|-----------|-------------------|
comment_id | parent_id | comment_body      |
-----------|-----------|-------------------|
1          | NULL      | parent comment    | 
-----------|-----------|-------------------|
2          | 1         | child comment     | 
-----------|-----------|-------------------|
3          | NULL      | parent comment    | 
-----------|-----------|-------------------|
4          | 1         | child comment     | 
-----------|-----------|-------------------|
5          | 3         | child comment     | 
-----------|-----------|-------------------|
6          | 1         | parent comment    | 
-----------|-----------|-------------------|
7          | NULL      | parent comment    | 
-----------|-----------|-------------------|
8          | 1         | child comment     | 
-----------|-----------|-------------------|
9          | 7         | child comment     | 
-----------|-----------|-------------------|
10         | 3         | child comment     | 
-----------|-----------|-------------------| 
```

例如，我在上表中运行以下查询

```
SELECT c1 . * , c2 . * 
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL 
```

它将给出以下输出

```
-----------|-----------|---------------|------------|-----------|---------------|
comment_id | parent_id | comment_body  | comment_id | parent_id | comment_body  |
-----------|-----------|---------------|------------|-----------|---------------|
1          | NULL      |parent comment | 1          | 1         | child comment |
-----------|-----------|---------------|------------|-----------|---------------|
1          | NULL      |parent comment | 4          | 1         | child comment |
-----------|-----------|---------------|------------|-----------|---------------|
1          | NULL      |parent comment | 6          | 1         | child comment |
-----------|-----------|---------------|------------|-----------|---------------|
1          | NULL      |parent comment | 8          | 1         | child comment |
-----------|-----------|---------------|------------|-----------|---------------|
3          | NULL      |parent comment | 5          | 3         | child comment |
-----------|-----------|---------------|------------|-----------|---------------|
3          | NULL      |parent comment | 10         | 3         | child comment |
-----------|-----------|---------------|------------|-----------|---------------|
7          | NULL      |parent comment | 9          | 7         | child comment |
-----------|-----------|---------------|------------|-----------|---------------| 
```

在这里，我强调了价值观，这是额外的，我不需要它们。

![在此处输入图像描述](https://i.stack.imgur.com/PePFp.gif)

在我看来，这些额外的值可能会提高性能。我可以得到以下格式的输出吗

![在此处输入图像描述](https://i.stack.imgur.com/AFp0d.gif)

如果不可能，请指导我上述查询的优缺点是什么？我应该使用它还是不使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:04:13.227

你不能做这个。但这里有一个替代品

```
SELECT 
    c1 . * , 
    GROUP_CONCAT(c2.comment_id) AS comment_ids,
    GROUP_CONCAT(c2.parent_id) AS parent_ids,
    GROUP_CONCAT(c2.comment_body) AS comment_bodies
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
WHERE c1.parent_id IS NULL 
```

这将为您提供这种形式的输出

```
-----------|-----------|---------------|------------|-----------|-----------------------------------------------------------|
comment_id | parent_id | comment_body  | comment_id | parent_id | comment_body                                              |
-----------|-----------|---------------|------------|-----------|-----------------------------------------------------------|
1          | NULL      |parent comment | 1,4,6,8    | 1,1,1,1   | child comment , child comment ,child comment,child comment|
-----------|-----------|---------------|------------|-----------|-----------------------------------------------------------|
3          | NULL      |parent comment | 5,10       | 3,3       | child comment ,child comment                              |
-----------|-----------|---------------|------------|-----------|-----------------------------------------------------------|
7          | NULL      |parent comment | 9          | 7         | child comment                                             |
-----------|-----------|---------------|------------|-----------|-----------------------------------------------------------| 
```

您可以使用 php explode 函数分解列，以将逗号分隔值转换为数组。

[MySQL GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T09:12:33.907

您还可以使用更多子查询示例：

```
SELECT 
    IF(c2.comment_id = c4.first_child, c1.comment_id, NULL) AS comment_id,
    IF(c2.comment_id = c4.first_child, c1.parent_id, NULL) AS parent_id,
    IF(c2.comment_id = c4.first_child, c1.comment_body, NULL) AS comment_body,
   c2.*
FROM comments c1
LEFT JOIN comments c2 ON c2.parent_id = c1.comment_id
LEFT JOIN ( select c3.parent_id, MIN(c3.comment_id) AS first_child from comments as c3 WHERE c3.parent_id IS NOT NULL GROUP BY c3.parent_id ) as c4 ON (c4.parent_id = c2.parent_id)
WHERE c1.parent_id IS NULL; 
```

示例输出：

```
comment_id | parent_id | comment_body   | comment_id | parent_id | comment_body
1          | NULL      | Parent Comment | 2          | 1         | Child Comment
NULL       | NULL      | NULL           | 4          | 1         | Child Comment
NULL       | NULL      | NULL           | 6          | 1         | Child Comment
NULL       | NULL      | NULL           | 8          | 1         | Child Comment
3          | NULL      | Parent Comment | 5          | 3         | Child Comment
NULL       | NULL      | NULL           | 10         | 3         | Child Comment
7          | NULL      | Parent Comment | 9          | 7         | Child Comment 
```

当然，如果你想要性能，那么这些东西对你没有帮助。它不会使您的查询更快。

因为您也标记了标记 PHP，并且希望以低 cpu/内存使用率运行快速查询，并且使用较少的带宽（如果 mysql 服务器不在本地主机中）。那么可能最明智的做法是进行几个查询，如果表更大，只询问你真正需要从 mysql 得到什么。可能您不想一次获得所有父母和孩子的评论。当您的孩子评论也是其他评论的父母时，您会怎么做；-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:06:19.503

我认为您可能需要查看以下链接以供参考。它可能会帮助你..

[如何在 SQL 中抑制或隐藏重复值？](https://stackoverflow.com/questions/9320149/how-do-you-suppress-or-hide-duplicate-values-in-sql)

# permissions - 运行 cts -c android.permission2.cts.ProtectedBroadcastsTest

> ID：15921247
> 
> 赞同：0
> 
> 时间：2013-04-10T08:54:31.950
> 
> 标签：permissions, cts

```
run cts -c android.permission2.cts.ProtectedBroadcastsTest 
```

测试失败。

日志：

```
 android.permission2.cts.ProtectedBroadcastsTest#testSendProtectedBroadcasts FAIL 
junit.framework.AssertionFailedError: expected security exception broadcasting action: com.android.server.WifiManager.action.START_SCAN
at android.permission2.cts.ProtectedBroadcastsTest.testSendProtectedBroadcasts(ProtectedBroadcastsTest.java:94)
at java.lang.reflect.Method.invokeNative(Native Method)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:190)
at android.test.AndroidTestRunner.runTest(AndroidTestRunner.java:175)
at android.test.InstrumentationTestRunner.onStart(InstrumentationTestRunner.java:555)
at android.app.Instrumentation$InstrumentationThread.run(Instrumentation.java:1584) 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T11:27:48.177

请检查此提交。

[https://android.googlesource.com/platform/frameworks/base/+/b8da0376f2d50fdb2ee58deacc6d2041689e36d1%5E!/](https://android.googlesource.com/platform/frameworks/base/+/b8da0376f2d50fdb2ee58deacc6d2041689e36d1%5E!/)

这是框架行为的改变。

# android - Android 4.0 上的异常`android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode)`

> ID：15921252
> 
> 赞同：2
> 
> 时间：2013-04-10T08:54:42.273
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-networking

当我在 Android 2.3.6 上运行这段代码时，它运行良好。在 4.0 上，我得到一个 StrictMode 异常。从一些关于 SO 的问题来看，您似乎无法在 UI 线程上进行网络操作。但我没有在 UI 线程上做任何 UI 操作。

我直接调用doBackground而不执行，因为我需要检查doBackground的返回值。我想下面应该有效。

我在这里想念什么？

```
handler.postDelayed(new Runnable() {
@Override
public void run() {
    God.identityHash = (String) new SwitchServer((IActionBar) splashScreen,
                God.mCruiseOnServer, nameText, phoneNumberText)
                .doInBackground(null);

    if (!mIsBackButtonPressed && God.identityHash != null) {
        FlurryAgent.logEvent(God.TCACCEPTED_AND_REGISTERED);
        Intent intent = new Intent(SplashScreen.this, HomeScreen.class);
        SplashScreen.this.startActivity(intent);
        finish();
    } else {
        Toast.makeText(splashScreen,
            "Unable to save your details. Please try again.",
            Toast.LENGTH_LONG).show();
        God.setTermsAndConditions(splashScreen, false);
    }
}
}, SPLASH_DURATION); 
```

编辑：手机上未启用严格模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:57:37.250

首先，[`StrictMode`](https://developer.android.com/reference/android/os/StrictMode.html)是你从代码中显式打开的东西，它只是一个调试辅助，不应该留在生产代码中。

其次，手动调用`.doInBackground`意味着在 UI 线程上运行。如果[`AsyncTask`](https://developer.android.com/reference/android/os/AsyncTask.html)按预期使用，则将其返回值作为`.onPostExecute`.

# javascript - 捕获在外部 jquery ui 模式中进行的点击

> ID：15921254
> 
> 赞同：2
> 
> 时间：2013-04-10T08:54:43.310
> 
> 标签：javascript, jquery, jquery-ui

我正在加载一个 jQuery UI 对话框窗口，其中包含一些缩略图。单击图像时，我想返回所选图像的 id。

我想我可以很容易地使用数据属性来实现这一点。我遇到的问题是，由于缩略图是从外部页面加载的，由于 DOM 已经加载，我无法捕获点击（.image-select）。我认为无论如何都是这样。如我错了请纠正我。

这是当前的代码：

```
(function($) {

    $('#opener').click(function(e) {
        e.preventDefault();
        $('#dialog').dialog('open');
    });

    $('#dialog').load('/account/images/thumbnails/').dialog({
        autoOpen: false,
        height: 560,
        width: 670
    });

    $('.image-select').click(function(e) {
        e.preventDefault();
        console.log($(this).data('id'));
    });

})(jQuery); 
```

任何实现此目的的技巧或替代方法都将受到赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:58:02.520

将`on()`单击事件委托给文档或文档中最近的静态父级，或在`load()`.

```
 $(document).on('click','.image-select',function(e) {
    e.preventDefault();
    console.log($(this).data('id'));
 }); 
```

阅读更多关于`on`代表的[链接](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:58:17.780

该`load`函数接受在加载后执行的回调。

```
(function($) {

$('#opener').click(function(e) {
    e.preventDefault();
    $('#dialog').dialog('open');
});

$('#dialog').load('/account/images/thumbnails/', function(){
   $('.image-select').click(function(e) {
    e.preventDefault();
    console.log($(this).data('id'));
   }); //function added in callback
}).dialog({
    autoOpen: false,
    height: 560,
    width: 670
});

})(jQuery); 
```

# c# - 发布构建 C# 应用程序后，CommandPrompt 命令不运行

> ID：15921258
> 
> 赞同：0
> 
> 时间：2013-04-10T08:54:47.550
> 
> 标签：c#, cmd

我在我的应用程序中使用命令提示符的命令。当我在调试时使用 Visual Studio 运行我的应用程序时，应用程序能够运行和执行命令提示符的命令，但是当我获取应用程序的可执行文件 (.exe) 并保存在我的电脑驱动器中然后运行该文件时，它会跳过命令提示符命令。我研究了这个主题并得到了这个： [CMD 命令没有在控制台中运行](https://stackoverflow.com/questions/8268273/cmd-command-not-running-in-console) 但没有成功。

我的代码：

```
Process process = new Process();
process.StartInfo.FileName = @"cmd.exe";
process.StartInfo.WorkingDirectory = sentencesList;    
process.StartInfo.Arguments = "/C findstr /V /I \"" + ListOfSomeWords + "\" " + sentencesList+ ">" + filteredList;
process.Start();
process.WaitForExit();
process.Close();
process.Dispose(); 
```

命令从包含单词（ListOfSomeWords）的文本文件（sentenceList）中删除句子/行，并制作另一个文本文件（filteredList），其中仅包含那些不包含ListOfSomeWords中指定的任何单词的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:17:52.017

你没有`filteredList`用引号转义。如果它包含空格，则 cmd.exe 无法正确解释它。

还要确保将 WorkingDirectory 设置为现有目录路径（变量名 file_path 看起来很可疑）。

# javascript - 是否可以在智能手机上触发共享菜单（通过 HTML/JS）？

> ID：15921262
> 
> 赞同：67
> 
> 时间：2013-04-10T08:55:00.017
> 
> 标签：javascript, android, html, ios, share

是否有可能通过 HTML 或 JavaScript 在智能手机上的本地浏览器中触发共享功能？

当然，有很多服务都提供了分享按钮。但是当我想在 facebook 上分享一个网站时，我需要在我当前使用的浏览器中登录到 facebook。

几乎所有的浏览器都内置了自己的共享功能，它会触发一个系统菜单来选择您要用来共享的应用程序：

![android 操作系统中的系统共享菜单](https://i.stack.imgur.com/DdR2p.png)

这个问题是关于：如何触发这个菜单？

我知道可以在链接的 href 属性中触发具有指定前缀的电话，例如`tel:`or `callto:`。也许这个共享菜单的快捷方式也存在？或者一些javascript代码？或者完全不同的方式如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2017-02-07T03:21:15.950

有可能*大获全胜*。目前仅适用于 Android 版 Chrome、Samsung Internet 和 Safari（桌面版和移动版）。桌面版 Edge 和 Chrome 即将获得支持[http://caniuse.com/#feat=web-share](http://caniuse.com/#feat=web-share)

```
if (navigator.share) {
  navigator.share({
    title: document.title,
    text: "Hello World",
    url: window.location.href
  })
  .then(() => console.log('Successful share'))
  .catch(error => console.log('Error sharing:', error));
} 
```

[https://developers.google.com/web/updates/2016/10/navigator-share](https://developers.google.com/web/updates/2016/10/navigator-share)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-07-16T16:08:14.213

> 我添加了这个，因为到 2018 年 7 月 16 日，所有答案似乎都已过时。

有可能，但仅在少数浏览器（[MDN 参考](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share)）中，通过一种方法 API 实现`navigator`：

```
navigator
    .share({
        title: document.title,
        text: 'Hello World',
        url: window.location.href
    })
    .then(() => console.log('Successful share! '))
    .catch(err => console.error(err)); 
```

谷歌参考：[https ://developers.google.com/web/updates/2016/10/navigator-share](https://developers.google.com/web/updates/2016/10/navigator-share)

此外，还有一个叫做**Web Intends**的东西，它是一个死项目，你应该`navigator.share`改用它。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-10T09:17:54.087

**2013 年 4 月 10 日回答**

据我所知，移动操作系统上的当前浏览器中没有这样的实现。由于这个问题让我感兴趣 - 谷歌搜索显示有朝这个方向进行的工作：

*   [https://dvcs.w3.org/hg/web-intents/raw-file/tip/spec/Overview.html](https://dvcs.w3.org/hg/web-intents/raw-file/tip/spec/Overview.html)
*   [http://webintents.org/](http://webintents.org/)

抱歉 - 我不知道解决方法。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-05-15T20:35:43.530

现在可以使用[Web 共享 API](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/share)！

但是，它尚未得到广泛支持。目前，它仅在 Safari（移动和桌面）和 Android 版 Chrome 中可用。有关详细信息，请参阅[我可以使用](https://caniuse.com/#feat=web-share)。

根据[Introducing the Web Share API](https://developers.google.com/web/updates/2016/09/navigator-share) on Google Developers，有几点需要牢记：

*   您的页面需要通过 HTTPS 提供
*   您只能调用`navigator.share(…)`以响应用户操作，例如单击（即，您不能在页面加载时调用它）
*   您应该对它进行功能检测，以防它在您的用户平台上不可用（例如，通过`navigator.share !== undefined`）

Google Developers 文章还指出，与 Share API 共享的 URL 不必位于您自己的域中——您可以共享任何 URL。

^(将所有这些放在一起，您可以使用类似这样的东西，如果它可用，则使用 Share API，如果它不是*)则回退到发送电子邮件：

```
function createShareButton() {
  const btn = document.createElement("button");

  const title = document.title;
  const text = "Check this out!";
  const url = window.location.href;

  btn.innerText = "share" in navigator ? "Share" : "Share via e-mail";

  btn.onclick = () => {
    if (navigator.share !== undefined) {
      navigator
        .share({
          title,
          text,
          url
        })
        .then(() => console.log("Shared!"))
        .catch(err => console.error(err));
    } else {
      window.location = `mailto:?subject=${title}&body=${text}%0A${url}`;
    }
  };

  return btn;
}

document.title = "Demo";
document.body.appendChild(createShareButton());
```

[*：请根据您的用例考虑使用更合适的后备方案（例如社交分享）。]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-02-20T02:12:18.740

这是可能的，我编写了一个函数来分享和观察异步副作用：

```
const shareContact = async (title, content) => {
  const text = `${title}

${content}`;

  try {
    await navigator.share({
      text,
    });
  } catch (e) {
    console.log(e);
  }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T10:54:21.603

您可以使用 Android 的[WebView.addJavascriptInterface()](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)方法。

首先，您需要编写一个类来触发打开共享菜单的意图（[看看这里](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)），然后使用 addJavascriptInterface() 调用实现该类。之后，您需要做的就是从您的 Javascript 中调用该方法。

# java - 从另一个类为 JTable 传递 LinkedList。自动更新表

> ID：15921264
> 
> 赞同：0
> 
> 时间：2013-04-10T08:55:02.103
> 
> 标签：java, swing, linked-list, jtable, abstracttablemodel

所以，我目前正在为我的程序构建 GUI。我正在使用带有自定义 AbstractTableModel 的 JTable 来用我的不同 LinkedLists 的内容填充它们。但是，如果我将 JTable 添加到我的 GUI 类，并在那里初始化 LinkedList 类，那么这不是我需要的 LinkedList。我需要存储在我的数据库类中的 LinkedList Studentlist。我怎么告诉桌子？我不能真正显示任何 GUI 代码，因为它仍在制作中，我现在只是在测试。

我的另一个问题是，这是我的 AbstractTableModel：

```
public class StudentTableModel extends AbstractTableModel {

public static final String[] columnNames = { "ID", "First Name",
        "Last Name" };
private LinkedList<Student> data;

public StudentTableModel(LinkedList<Student> data) {
    this.data = data;
}

@Override
public int getColumnCount() {
    return columnNames.length;
}

@Override
public String getColumnName(int column) {
    return columnNames[column];
}

@Override
public int getRowCount() {
    return data.size();
}

@Override
public Object getValueAt(int rowIndex, int columnIndex) {
    Student student = data.get(rowIndex);
    if (student == null) {
        return null;
    }
    switch (columnIndex) {
    case 0:
        return student.getID();
    case 1:
        return student.getFirstname();
    case 2:
        return student.getLastname();
    default:
        return null;
    }
} 
```

}

当学生添加到列表中时，我是否需要在代码中添加任何内容以使表格自动更新？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:08:39.423

> 当学生添加到列表中时，我是否需要在代码中添加任何内容以使表格自动更新？

创建一个方法，`TableModel`以便在添加 Student 时将 Student 对象传递给列表并将其添加到列表中。由于您正在使用，因此`AbstractTableModel`您需要在数据更改后触发适当的事件。

```
private void addStudent(Student student) {
    data.add(student);
    fireTableDataChanged();
} 
```

> 如果我将 JTable 添加到我的 GUI 类，并在那里初始化 LinkedList 类，那么这不是我需要的 LinkedList。我需要存储在我的数据库类中的 LinkedList Studentlist。

在创建表模型时，查询 StudentList 并将该列表发送到表模型构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:59:58.843

最低限度，

*   [如此处](https://stackoverflow.com/a/11113865/230513)所示，您的实现`setValueAt()`必须触发*适合*您的更新的事件。

*   如果您将公共方法公开给 mutate `data`，它也必须触发*适当*的事件。

在这种情况下，*适当*的意思是`fireXxx()`继承自的方法之一[`AbstractTableModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/AbstractTableModel.html)。

# jquery - 使用 jQuery Validate 未命中远程操作方法

> ID：15921265
> 
> 赞同：0
> 
> 时间：2013-04-10T08:55:04.103
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, jquery-validate

我正在使用`ASP.NET MVC4`和。`jQuery Validate``jQuery Validate unobtrusive`

我的表单上有各种元素，但我只需要验证一个元素。其他元素**不需要**验证。基本上发生的事情是我有一个接受数字的文本框和一个按钮（**不**提交表单），该按钮接受此文本框中的数字并进行远程调用以检查该数字是否存在，如果不存在则它必须显示错误信息。

我的观点代码：

```
<td class="edit-label">Change Control ID/Incident Number: <span class="required">**</span></td>
<td>
     @Html.TextBoxFor(x => x.ChangeIncidentNumber)
     <button id="verifyButton" type="button">Verify</button>
     @Html.ValidationMessageFor(x => x.ChangeIncidentNumber)
</td> 
```

我的视图模型：

```
public class SearchServerViewModel
{
     // Partial view model

     public string ChangeIncidentNumber { get; set; }
} 
```

我的文本框的 HTML 输出：

```
<td class="edit-label">Change Control ID/Incident Number: <span class="required">**</span></td>
<td>
     <input data-val="true" data-val-required="Required" id="ChangeIncidentNumber" name="ChangeIncidentNumber" type="text" value="792952" />
     <button id="verifyButton" type="button">Verify</button>
     <span class="field-validation-valid" data-valmsg-for="ChangeIncidentNumber" data-valmsg-replace="true"></span>
</td> 
```

我的 jQuery 代码：

```
<script src="/Assets/JavaScripts/jquery-validate/jquery.validate.min.js"></script>
<script src="/Assets/JavaScripts/jquery-validate/jquery.validate.unobtrusive.min.js"></script>

<script>

     $(document).ready(function () {
          $("#ChangeIncidentNumber").validate({
               rules: {
                    ChangeIncidentNumber: {
                         required: true,
                         remote: '/Server/ValidateChangeIncidentNumber'
                    }
                },
                messages: {
                     ChangeIncidentNumber: {
                          required: "Required",
                          remote: "custom message:"
                     }
                }
          });

          $('#verifyButton').click(function () {
               var isValid = $('#ChangeIncidentNumber').valid();
          });
     });

</script> 
```

我的操作方法：

```
public ActionResult ValidateChangeIncidentNumber(string ChangeIncidentNumber)
{
     // Do whatever needs to be done

     return Json("Test error text", JsonRequestBehavior.AllowGet);
} 
```

在我的 web.config 中：

```
<add key="ClientValidationEnabled" value="true" />
<add key="UnobtrusiveJavaScriptEnabled" value="true" /> 
```

必需的部分有效，如果文本框为空，它会显示必需的消息。但是，如果有一个值，它就不会达到我的操作方法。不知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:11:00.480

> 我的表单上有各种元素，但我只需要验证一个元素。其他元素不需要验证

然后仅为那些需要验证的字段设置必需或自定义属性。

**HTML**

```
<div id="formContainer" 
     data-url="@Url.Action("Action Name", "Controller Name", 
     new { area = "Area Name" })"></div>

<input id="BTN" type="button" value="Button" /> 
```

**JQuery（下面的请求可以有get /post /getJSON。所以相应地改变它）**

```
$('#BTN').click(function () {
    var $formContainer = $('#formContainer');
    var url = $formContainer.attr('data-url');
    $formContainer.load(url, function () {
        var $form = $('#myForm');
        $.validator.unobtrusive.parse($form);
        $form.submit(function () { //Here modification can be buton click                
            var $form = $(this);
            if ($form.valid()) {
                $.post(this.action, $(this).serialize(), function (data) {
                    $form.html(data);
                    $form.removeData('validator');
                    $form.removeData('unobtrusiveValidation');
                    $.validator.unobtrusive.parse($form);
                });
            }
            return false;
        });
    });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:04:27.167

在包含不显眼的插件脚本后调用 validate() 什么都不做，它只是返回由不显眼的插件创建的验证器实例。所需规则起作用的唯一原因是您在**ChangeIncidentNumber**字段上有一个 [Required] 属性。您可以通过呈现的文本框中的**data-val-required="Required"看到这一点。**

是否有 [Remote] 数据注释属性？我认为您需要对此进行调查。

# java - 将孩子的价值作为字符串

> ID：15921267
> 
> 赞同：4
> 
> 时间：2013-04-10T08:55:12.880
> 
> 标签：java, xml, parsing, xml-parsing

解释自己的最佳方式是向您展示一段代码：

这是我正在解析的 XML 文件：

```
<module>
    <name>name1</name>
    <type>type</type>
    <content>
        <p>This is some piece of code that should be treated as a full string, even that 'p' tag, because I want to use all content inside p tag for a webview in android.
        </p>
        <h1>This is a big classy title in html</h1>
    </content>
</module> 
```

正如您在`p`标签中看到的那样，基本上我想获取`<content>`标签的内容并将其保存到要处理的字符串中。所以最后，我想初始化一个字符串，如下所示：

`String content = "<p> This is some piece.......</p> <h1>This is....</h1>";`

这是我用来获取值`<name>`的代码：`<type>`

```
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(contingut);
doc.getDocumentElement().normalize();
NodeList nodes = doc.getElementsByTagName("module");
for (int i = 0; i < nodes.getLength(); i++) {
    Node node = nodes.item(i);
    Element element = (Element) node;
    if(element.getNodeType() == Element.ELEMENT_NODE){
        System.out.println(getValue("name",element));
        System.out.println(getContent("content",element));
    }
}
private static String getValue(String tag, Element element) {
    String value="";
    try {
        NodeList nodes = element.getElementsByTagName(tag).item(0).getChildNodes();
        Node node = (Node) nodes.item(0);
        value=node.getNodeValue();
    } catch (Exception e){
        value=null;
    }
    return value;
} 
```

因此，例如，在解析时，名称打印正确`name1`，但`content`返回空白。

知道如何将`<content>`内容作为字符串获取吗？

谢谢你。

**编辑**

```
private static String getContent(String tag, Element element) {
    String value="";
    try {
        Node nodes = element.getElementsByTagName(tag).item(0);
        value = nodes.getTextContent();
    } catch (Exception e){
        value=null;
    }
    return value;
}

Log.d("debugging",getContent("content",element)); 
```

这是打印这个： `%20%20%20%20%20This%20some%20piece ....`

似乎它没有返回 string `<p>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:22:53.847

使用**getTextContent** () 代替**getValue** () 函数。以下是一个示例（与您的 getValue 函数相同）。

```
private static String getContent(String tag, Element element) {
    String value="";
    try {
        NodeList nodes = element.getElementsByTagName(tag).item(0).getChildNodes();
        Node node = (Node) nodes.item(0);
        value=node.getTextContent(); // notice getTextContent()
    } catch (Exception e){
        value=null;
    }
    return value;
} 
```

它将与格式良好的 xml 一起使用

```
<module>
    <name>name1</name>
    <type>type</type>
    <content>
        <p>This is some piece of code that should be treated as a full string, even that 'p' tag, because I want to use all content inside p tag for a webview in android.
        </p>
        <h1>This is a big classy title in html</h1>
     </content>
</module> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:04:12.557

由于[getTextContent](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html#getTextContent%28%29)不返回任何标记，我认为使用任何节点方法都不可能。

我看到的唯一方法（如果您想使用 DocumentBuilder）是，您**编写一些代码来从节点列表中重建字符串**（遍历节点和节点属性）。

作为我的意思的一个小草图：（只有javalike伪代码）

```
string rebuild(NodeList nodeList) {
    string result = "";
    for (Node n : nodeList) {
        result += "<" + node.getNodeName() + " ";
        NamedNodeMap aMap = node.getAttributes();
        if (aMap != null) {
            int aMapLength = aMap.getLength();
            for (int i=0; i<aMapLength; ++i) {
                Node a = aMap.item(i);
                result += a.getNodeName() + "=" + a.getValue() + " ";
            }
        }
        NodeList nList = node.getChildNodes();
        if (nList == null) {
            result += "/>";
        } else {
            result += ">";
            result += rebuild(nList);
            result += "</" + node.getNodeName() + ">";
        }
    }
    return result;
} 
```

您还可以创建一个 xsd 文件并使用 xjc (JAXB) 创建 Java 类。有很多关于如何做到这一点的好教程（取决于您的 IDE）。然后，您可以根据需要让 JAXB 编组/解组所有内容。

另一种方法是您实现自己的[SaxHandler](http://docs.oracle.com/javase/1.4.2/docs/api/org/xml/sax/helpers/DefaultHandler.html)并使用 SAXParser 和 SAXParserFactory，这将是相当多的工作。

# ios - 即使用户已登录，FBSession.activeSession.isOpen 也会返回 NO

> ID：15921269
> 
> 赞同：7
> 
> 时间：2013-04-10T08:55:13.880
> 
> 标签：ios, objective-c, facebook, facebook-ios-sdk

我在我的一款 iOS 游戏中实现了整个 iOS Facebook 登录过程。在应用程序中，您可以使用电子邮件帐户或通过 Facebook 登录。如果用户使用电子邮件登录，我偶尔会展示一个视图，邀请用户将他的帐户与 Facebook 同步。

这是我用来确定是否应该向用户显示此视图的代码：

```
if (FBSession.activeSession.isOpen) {
    // Present the view
} else {
    // Go somewhere else
} 
```

起初它似乎工作得很好，但事实证明，即使用户使用 FB 登录，FBSession.activeSession.isOpen 在某些时候也会返回 NO。

我的第一个猜测是 accessToken 过期了。我不确定这是否是一个好线索，因为我在我的应用程序中执行以下操作：didFinishLaunchingWithOptions: 方法（就像 Facebook 推荐的那样）：

```
if (FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded) {
    // Yes, so just open the session (this won't display any UX).
    [self openSessionWithCompletionBlock:^{}];
} 
```

所以现在我不知道如何重现或解决这个问题，知道吗？应用程序启动后令牌是否可能过期？就像用户在后台长时间保持应用程序一样？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-18T18:13:42.237

这只是 Facebook 的行为，每次启动应用程序时都需要“重新打开”会话，你的猜测是正确的，这是因为令牌状态，一个简单的解决方案是检查 [FBSession activeSession].isOpen 状态和如果它返回 NO 调用 openActiveSessionWithAllowLoginUI << Yes 相同的 facebook 方法，但检查它返回的所有状态。

如果会话先前已打开，则它使用存储的令牌重新打开会话，您不必担心登录 UI，因为它不会再次显示，因为会话先前已打开。

```
if (![FBSession activeSession].isOpen) {
   [self connectWithFacebook];
}

- (void) connectWithFacebook { 
       // The user has initiated a login, so call the openSession method
       // and show the login UI if necessary << Only if user has never 
       // logged in or ir requesting new permissions.
       PPAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
       [appDelegate openSessionWithAllowLoginUI:YES];
} 
```

在应用程序委托中

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI
{
    NSArray *permissions = @[@"any_READ_permision_you_may_need"];

    return [FBSession openActiveSessionWithReadPermissions:permissions
                                              allowLoginUI:allowLoginUI
                                         completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                              if (error) {
                                                  NSLog (@"Handle error %@", error.localizedDescription);
                                              } else {
                                                  [self checkSessionState:state];
                                              }
                                         }];
}

- (void) checkSessionState:(FBState)state {
    switch (state) {
        case FBSessionStateOpen:
            break;
        case FBSessionStateCreated:
            break;
        case FBSessionStateCreatedOpening:
            break;
        case FBSessionStateCreatedTokenLoaded:
            break;
        case FBSessionStateOpenTokenExtended:
            // I think this is the state that is calling
            break;
        case FBSessionStateClosed:
            break;
        case FBSessionStateClosedLoginFailed:
            break;
        default:
            break;
    }
} 
```

这是一个快速修复并且有效，您也可以通过关闭会话来重现它，但无需使用清除令牌缓存`[[FBSession activeSession] close]`您甚至可以更改令牌缓存策略，如此处所述[http://developers.facebook.com/docs/howtos/令牌缓存-ios-sdk/](http://developers.facebook.com/docs/howtos/token-caching-ios-sdk/)

# c# - Asp.net mvc 密码检查：弱、正常、强

> ID：15921277
> 
> 赞同：2
> 
> 时间：2013-04-10T08:55:30.483
> 
> 标签：c#, asp.net, asp.net-mvc

我想为我为学校建立的网上商店进行密码检查。这用颜色警报表示：红色表示弱，橙色表示正常，绿色表示良好。最好的方法是什么？

这是用户需要输入密码的一小部分：

```
 password
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Klant.password)
        @Html.ValidationMessageFor(model => model.Klant.password)
    </div> 
```

这是一项家庭作业，我们被告知不允许使用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:33:14.070

最好的方法肯定是使用 javascript 在客户端上执行此操作。我为您编写了一个[jQuery](http://jquery.com/download/)函数，它执行以下操作：

1.  每次在密码文本框中发生按键时执行
2.  评估文本长度
3.  根据密码长度更改 div 的背景颜色

**注意：**只需下载 jQuery（如果您在 Scripts 文件夹中还没有它）并在您的视图中添加对它的引用，并确保密码文本框的 id 正确（我已将我的“密码”称为“密码”）

```
<script src="../../Scripts/jquery-1.7.1.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        //"Password" is the id of the password textbox
        //yours may be different so make sure to change this if necessary
        $("#Password").keyup(function () {
            var length = $("#Password").val().length;
            var colour = "";

            if (length <= 4)
                colour = "red";
            else if (length <= 7)
                colour = "orange";
            else
                colour = "green";

            $("#strength").css("background-color", colour);
        });
    });
</script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <div class="editor-label">
        @Html.LabelFor(model => model.UserName)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.UserName)
        @Html.ValidationMessageFor(model => model.UserName)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.Password)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Password)
        @Html.ValidationMessageFor(model => model.Password)
        <div id="strength" style="width:100px;height:20px;">
        </div>
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
} 
```

如果您不正确，我已经创建了一个示例项目并将其上传到[Google 驱动器](https://docs.google.com/file/d/0B0iPiW5jXDdPd3BFbVJTamhkbWs/edit?usp=sharing)。只需单击文件->下载以获取 .zip 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:03:46.400

您可以使用以下 javascript 代码来检查强度：

```
function pwdStrength(password)
{
        var desc = new Array();
        desc[0] = "Very Weak";
        desc[1] = "Weak";
        desc[2] = "Better";
        desc[3] = "Medium";
        desc[4] = "Strong";
        desc[5] = "Strongest";
        var score   = 0;
        //if password bigger than 6 give 1 point
        if (password.length > 6) score++;
        //if password has both lower and uppercase characters give 1 point      
        if ( ( password.match(/[a-z]/) ) && ( password.match(/[A-Z]/) ) ) score++;
        //if password has at least one number give 1 point
        if (password.match(/\d+/)) score++;
        //if password has at least one special caracther give 1 point
        if ( password.match(/.[!,@,#,$,%,^,&,*,?,_,~,-,(,)]/) ) score++;
        //if password bigger than 12 give another 1 point
        if (password.length > 12) score++;
         document.getElementById("pwdDescription").innerHTML = desc[score];
         document.getElementById("pwdStrength").className = "strength" + score;
} 
```

除此之外，您可以参考以下链接：

[http://passwordadvisor.com/CodeAspNet.aspx](http://passwordadvisor.com/CodeAspNet.aspx)

[http://www.c-sharpcorner.com/uploadfile/f9935e/password-policystrength-Asp-Net-mvc-validator/](http://www.c-sharpcorner.com/uploadfile/f9935e/password-policystrength-Asp-Net-mvc-validator/)

# assembly - 如何在没有“ADD”指令的情况下将两个寄存器相加

> ID：15921279
> 
> 赞同：3
> 
> 时间：2013-04-10T08:55:35.040
> 
> 标签：assembly, x86, add

首先，不要为*“您使用 AT&T 还是 Intel 组件？”而烦恼。*或类似的事情。

我想知道是否可以在**不使用`ADD`or`ADC`**指令的情况下将两个寄存器的内容相加，比如 AX 和 BX。我想只使用这组指令来做到这一点：

```
MOV
CMP
JMP
JE
JNE 
```

我想看一个简单的例子，即使它只是没有任何实际代码的**算法**，或者是一个很好的教程。

如果您想知道我为什么要问这个问题，那是因为我正在创建一台非常基本的计算机，目前仅提供这些指令，并且我想知道它是否已经能够将两个寄存器添加在一起。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:19:19.407

理论上，是的。可以使用您的指令集来表达以下庞大的程序，并将执行加法：

```
if ax = 0 and bx = 0:
  result = 0
else if ax = 0 and bx = 1:
  result = 1
...
else if ax = 42 and bx = 24:
  result = 66
... 
```

在任何实际意义上，您的问题的答案都是“不”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T22:47:52.377

**编辑：**任何加法或减法都可以使用**258 字节查找表**并仅使用`mov`,`cmp`和`jne`. 完全不需要**巨大**的查找表。低 8 位和高 8 位使用相同的查找表分别更新。

这是总结`ax`并`bx`仅使用一个 258 字节查找表并且仅`mov`,`cmp`和的代码`jne`：

```
[位 64]

; 有效指令：mov、cmp、jmp、je、jne
; 使用指令：mov、cmp、jne

部分 .text
全局_start

; 这段代码总结了 ax & bx

_开始：

; 定义要求和的值（在 ax 和 bx 中）。

        移动斧头，12853；示例总和 1。
        mov bx,33276 ; 示例总和 2。

; 求和很容易：只需递减每个求和，直到它变为零，
; 并且对于每次递减，增加总和（以 ax 为单位）。

        cmp bx,0
        jne start_summing ; 通常这将是 je 准备好并且
                                ; 接下来的 2 条指令将被删除。

                cmp bx,1 ; 这表明 jne 就足够了。
                准备好了；这个条件跳转总是分支。

开始求和：
        移动 ecx,0

求和循环：
        mov cl,bl
        mov bl,[rcx+(number_line-1)] ; 减少bl。
        CMP BL,255
        jne bl_not_carry

                mov cl,bh
                mov bh,[rcx+(number_line-1)] ; 减少 bh。

bl_not_carry：
        mov cl,al
        移动,[rcx+(number_line+1)]; 增加的。
        cmp al,0
        jne al_not_carry

                mov cl,ah
                mov 啊,[rcx+(number_line+1)] ; 增量啊。

al_not_carry：
        cmp bx,0
        jne summing_loop

准备好：

; sum 现在在 eax 中。

节 .data

最大值等于 255
max_value_plus_1 equ (max_value + 1)

数据库最大值；0 - 1 = 255

number_line:

%分配我的价值 0

%rep max_value_plus_1
        数据库 myValue
        %assign myValue (myValue + 1)
%endrep

分贝 0

```

**编辑：**答案的其余部分涉及需要更多内存的其他解决方案。

**编辑：**一维 128 KiB 查找表足以用于 16 位操作数的任何加法或减法。不需要巨大的查找表。 **编辑：**修复了导致通常设置进位标志的添加产生错误结果的错误。

这是 x86-64 汇编中的代码，用 YASM 组装，也可能用 NASM 组装。实现`add ax,bx`，仅使用`mov`，`cmp`& `jne`。

```
[位 64]

; 有效命令：mov、cmp、jmp、je、jne
; 使用的命令：mov、cmp、jne

部分 .text
全局_start

; 这段代码总结了 ax & bx

_开始：

; 定义要求和的值（在 ax 和 bx 中）。

        移动斧头，12853；示例总和 1。
        mov bx,33276 ; 示例总和 2。

; 求和很容易：只需递减每个求和，直到它变为零，
; 并且对于每次递减，增加总和（以 ax 为单位）。

        移动 edx,0
        mov dx,ax
        移动 eax,edx ; eax = 斧头

        移动 ecx,0
        mov cx,bx ; ecx = bx

求和循环：
        mov cx,[2*rcx+(number_line-2)] ; 递减 ecx。
        mov ax,[2*rax+(number_line+2)] ; 增加eax。
        cmp ecx,0
        jne summing_loop

; sum 现在在 eax 中。

节 .data

最大值等于 65535

dw 最大值；0 - 1 = 65535

number_line:

%分配我的价值 0

%rep 最大值
        dw 我的价值
        %assign myValue (myValue + 1)
%endrep

0

```

**编辑：**答案的其余部分涉及我首先提出的一个更有限的解决方案。

它可以通过**二维查找表**来完成。

对于 8 位寄存器，例如`al`& `bl`，这很容易。对于 16 位寄存器，可以这样做，但是查找表会很大（几乎 1 tebibyte），原因见下文。查找表的每个单元格都包含相应 X 和 Y 坐标的总和（X 和 Y 坐标是和数）。

对于**8 位求和**，查找表**（256 * 256 矩阵）**如下所示：

```
db   0,   1,   2, ... , 253, 254, 255
db   1,   2,   3, ... , 254, 255,   0
db   2,   3,   4, ... , 255,   0,   1
     .    .    .  .       .    .    .
     .    .    .   .      .    .    .
     .    .    .    .     .    .    .
db 253, 254, 255, ... , 250, 251, 252
db 254, 255,   0, ... , 251, 252, 253
db 255,   0,   1, ... , 252, 253, 254 
```

在 x86 和 x86-64**`mov`中可用于乘以 256^n**，即：256, 65536, 16777216, ...

乘以 256`mov`很容易计算`ax = 256 * bl`：

```
mov ax,0
mov ah,bl 
```

添加例如。`al`& `bl`，我们需要得到正确的偏移量，它是`256 * al + bl`，或者`256 * bl + al`（因为查找表是一个对称矩阵，它是对称的，因为加法是一个交换操作）。

仅在 x86/x86-64 中使用乘以 65536 和更大的数字`mov`需要使用内存，因为无法直接寻址 32 位通用寄存器（例如 eax）的高 16 位或 64- 的高 32 位位通用寄存器（如 rax）。

`eax = 65536 * bx`仅使用计算`mov`：

```
mov [temp], dword 0
mov [temp+2], bx
mov eax, [temp]

...

temp dd 0 
```

但是 16 位值的真正问题是，在 x86/x86-64 中，内存是使用字节偏移量来寻址的，而不是使用 word/dword/qword 偏移量，我们只能乘以**256^n**。但是，让我们首先看看如果我们没有乘法和字节偏移寻址的问题，查找表会是什么样子。查找表可能是这样的：

```
dw     0,     1,     2, ... , 65533, 65534, 65535
dw     1,     2,     3, ... , 65534, 65535,     0
dw     2,     3,     4, ... , 65535,     0,     1
       .      .      .  .         .      .      .
       .      .      .   .        .      .      .
       .      .      .    .       .      .      .
dw 65533, 65534, 65535, ... , 65530, 65531, 65532
dw 65534, 65535,     0, ... , 65531, 65532, 65533
dw 65535,     0,     1, ... , 65532, 65533, 65534 
```

这里，每一行有 65536 个单元，每个是 dword，所以每一行占用 2 * 65536 字节 = 131072 字节。有 65536 行，所以它是一个**65536 * 65536 矩阵**。

字大小的单元格对于 X （水平索引，任一和数）都不是问题，因为 x86 程序集允许**比例因子为 1、2、4 和 8**。

**编辑：**更正了数组大小的文本，它实际上比 1 TiB 小一点。

`mov`这里的问题是，仅使用 是不可能将 Y（垂直索引，另一个和）乘以 131072 因此，查找表的每一行必须重复 32768 次，或者更准确地说，在任何实际数据行之间必须有 32767 个未使用的填充行。为什么是 32767？**因为`mov`只能用于乘以 256、65536、16777216 ... 所以我们需要将 Y（垂直索引，另一个被加数）乘以 16777216。**由于每行占用 131072 字节，因此要使新数据行每隔 16777216 字节开始，每个数据行之后必须有 32767 个未使用的填充行（每个占用 131072 个字节）。在最后一个数据行填充行之后不需要，因此数组大小总计为：

**65535 * 16777216 + 131072 = 10.99 * 10^12 字节 = 几乎 1 TB (1 TiB)**。

不幸的是，我的计算机中没有那么多内存，但在 x86-64 中是可能的。

这是仅使用 8 位加法`mov`和**256 * 256 查找表**的代码（使用 YASM 测试，也应使用 NASM 组装）：

```
[位 64]

; 有效指令：mov、cmp、jmp、je、jne
; 使用说明：mov

部分 .text
全局_start

; al & bl 必须保留

; 这段代码总结了 al 和 bl

_开始：

; 定义要求和的值（在 al 和 bl 中）。

        移动,47; 示例第一个加法
        mov bl,55 ; 第二个加法示例

; 求和代码从这里开始。

        移动 ecx,0
        移动 cl,al ; ecx = 人
        mov ch,bl ; ecx = 256 * bl + al
        移动，[rcx+sum_look_up_table] ; 从查找表中获取总和。
                                           ; 对于 32 位代码，rcx -> ecx
; 总和现在是 al。

节 .data

y_time 等于 256
x_times equ 256

sum_look_up_table：

% 分配我的 0

%rep y_times
        %分配我的X 0

        %rep x_times
                %assign myValue (myX + myY)
                %rep y_times
                        %if myValue >= 256
                                %assign myValue (myValue - 256)
                        ％万一
                %endrep
                数据库 myValue
                %assign myX (myX + 1)
        %endrep

        %assign myY (myY + 1)
%endrep

```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-03T01:01:25.943

> 因为我正在创建一台非常基本的计算机，目前只提供这些指令，我想知道它是否已经能够将两个寄存器加在一起。

在这种情况下，您应该阅读[什么是任何汇编语言被认为有用所需的最低指令集？](https://stackoverflow.com/q/9439001/995714)

简而言之，最小可能的架构[只有一条指令](https://en.wikipedia.org/wiki/One_instruction_set_computer)。然而，为了更有**用**，一*台非常基本的计算机*应该至少有一个位操作指令。只需一个`NAND`or`NOR`就足以完成[所有逻辑计算](https://en.wikipedia.org/wiki/Functional_completeness)。有了它，您也可以进行算术运算，但不如单独的 ADD/SUB 高效。此外，您还需要另一个条件跳转。总共有 3 条指令。但是，如果您可以有 5 条这样的指令，那么您可以在另一个问题上阅读许多更好的指令选择

也就是说，仅`MOV`在 x86 和许多其他架构（如[8051](https://timodenk.com/blog/mov-is-turing-complete-8051-experiment/) ）中就可以做任何事情，因为它已[被证明是图灵完备的](https://www.cl.cam.ac.uk/~sd601/papers/mov.pdf)。甚至还有一个编译器可以将有效的 C 代码编译成只有 MOV（或只有 XOR、SUB、ADD、XADD、ADC、SBB、AND/OR、PUSH/POP、1 位移位或 CMPXCHG/XCHG 之一）的程序命名为[movfuscator](https://github.com/xoreaxeaxeax/movfuscator)。[Break Me00 The MoVfuscator Turning mov into a soul crushing RE nightmare Christopher Domas](https://youtu.be/R7EEoWg6Ekk)中解释了编译器如何工作的详细信息，或者如果您没有时间，请[阅读幻灯片。](https://github.com/xoreaxeaxeax/movfuscator/blob/master/slides/domas_2015_the_movfuscator.pdf)基本上它为大多数目的使用查找表。这是一个关于如何实现8[位加法的示例](https://github.com/xoreaxeaxeax/movfuscator/blob/00eb2f91dee4751fe60a270f7525c9840c58f6cd/movfuscator/movfuscator.c#L1166)

```
static void alu_add8(char* s, char* x, char* y, char* c, int off)
{
    /* requires dword carry initialized */
    print("# alu_add8\n");
    debug_id();
    print("movl $0, %%eax\n");
    print("movl $0, %%ebx\n");
    print("movl $0, %%ecx\n");
    print("movl $0, %%edx\n");
    print("movb (%s+%d), %%al\n", x, off);
    print("movb (%s+%d), %%cl\n", y, off);
    print("movl (%s), %%ebx\n", c);
    print("movb alu_add8l(%%eax,%%ecx), %%dl\n");
    print("movb alu_add8h(%%eax,%%ecx), %%dh\n");
    print("movb alu_add8l(%%edx,%%ebx), %%al\n");
    print("movb %%al, (%s+%d)\n", s, off);
    print("movb alu_add8h(%%edx,%%ebx), %%al\n");
    print("movb %%al, (%s)\n", c);
    print("# end alu_add8\n");
} 
```

进一步阅读

*   [构建图灵完备处理器所需的绝对最少指令集是多少](https://softwareengineering.stackexchange.com/q/230538/98103)
*   [MOV 是图灵完备的：4 位加法器实现](https://timodenk.com/blog/mov-is-turing-complete-8051-experiment/)
*   [MOV 是图灵完备的](https://www.reddit.com/r/programming/comments/1nft0x/mov_is_turingcomplete/)
*   [X86 mov 图灵完成：mov-only 编译器](https://news.ycombinator.com/item?id=9751312)

# extjs - 煎茶触摸中的拆分视图

> ID：15921284
> 
> 赞同：0
> 
> 时间：2013-04-10T08:55:39.533
> 
> 标签：extjs, sencha-touch-2, ipad

我正在申请 IPAD，我需要在那里显示拆分视图。

我对此有什么要求：

我将在左侧面板中显示一个列表（数据不会用于嵌套。我只有 1 个级别）

当我单击列表的任何项目时，它将在右侧面板中加载另一个列表。

在右侧面板中，如果我单击任何项​​目，它将在同一视图中显示详细信息页面。

任何人都可以给我一个工作的例子吗？

# maven - 使用 Jenkins 构建管道 - M2 发布 -> 部署到 JBoss AS

> ID：15921285
> 
> 赞同：0
> 
> 时间：2013-04-10T08:55:44.150
> 
> 标签：maven, jenkins, continuous-integration, jboss7.x, continuous-deployment

我使用 Jenkins 作为 CI 环境，我希望能够将构建工件直接部署到 JBoss AS 7.1.1 服务器。为了发布 Maven 工件，我使用了 Jenkins M2 Release Plugin。

出现问题的项目的项目结构如下：

*   神器-父-pom
    *   webapp-模块
    *   主题模块

maven 目标 jboss-as:deploy 只能在 webapp-module 上调用。

为了在每次构建时将 webapp-module 部署到 JBoss 服务器，我添加了一个构建后步骤调用

> mvn jboss-as:deploy

在子模块上。这适用于标准 SNAPSHOT 构建，但不适用于发布构建。

使用 Jenkins M2 Release Plugin 发布新的工件版本时，在执行 post-build 步骤时，版本号已经更新到下一个 SNAPSHOT-version。我尝试在发布步骤直接部署发布版本，但这不起作用，因此无法在父 pom 上调用目标 jboss-as:deploy。

我发现的所有 Jeknins 插件都只支持旧版本的 JBoss，比如

*   部署到容器插件
*   JBoss 管理插件

有没有一种简单的方法可以让这个工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:04:13.107

我找到了一种解决方法。我做了两种配置，一种用于 SNAPSHOTS，一种用于 RELEASE 构建。在 RELEASE 构建中，我添加了两个调用目标版本的后期步骤：在父 pom 上设置但具有不同的属性。这将导致以下后期步骤：

*   mvn newVersion=${MVN_RELEASE_VERSION}
*   mvn jboss-as:deploy
*   mvn newVersion=${MVN_DEV_VERSION}

# c++ - 这个使用 boost::mismatch 的例子是什么意思？

> ID：15921287
> 
> 赞同：2
> 
> 时间：2013-04-10T08:55:51.893
> 
> 标签：c++, templates, boost, syntax, mismatch

我尝试理解[此处](http://www.boost.org/doc/libs/1_50_0_beta1/libs/range/doc/html/range/reference/algorithms/non_mutating/mismatch.html)给出的以下示例：

```
template<class SinglePassRange1, class SinglePassRange2>
std::pair <
    typename range_iterator<SinglePassRange1>::type,
    typename range_iterator<const SinglePassRange2>::type
>
mismatch(SinglePassRange1& rng1, const SinglePassRange2& rng2); 
```

这是描述：

> mismatch 找到两个范围 rng1 和 rng2 中对应元素不相等的第一个位置。

在上面的例子中，我主要不清楚的是：**什么是输入，什么是 mismatch 函数的输出？**

`rng1`和`rng2`分别是类`SinglePassRange1`和的对象`SinglePassRange2`。但是这些类是什么？它们在哪里定义？它们应该是“范围”，但什么是“范围”？

我也不清楚在调用`mismatch`函数之前所有这些行是做什么的。第一行看起来我们要定义一个类模板，但我们稍后不会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:17:41.650

范围是在同一容器上运行的一对迭代器。A`SinglePassRange` 是这样一个范围，其中迭代器是单遍迭代器，即。可比较且可递增的迭代器。通过`mismatch`函数的重载，参数也可以是支持该类型范围迭代器的容器，在这种情况下使用容器的`begin()`和`end()`迭代器。

返回的值是第一对迭代器——每个范围中的一个——不满足等式谓词。这对是模板参数声明后的前几行所描述的。

```
std::pair <
    typename range_iterator<SinglePassRange1>::type,
    typename range_iterator<const SinglePassRange2>::type
> 
```

如您所见，每个参数都是每个范围类型的范围迭代器的类型。

*参数之前的关键字`typename`是必要的，因为两者实际上都是[依赖名称](https://stackoverflow.com/questions/1527849/how-do-you-understand-dependent-names-in-c)，即。在其他类型中定义的类型，它们本身依赖于外部模板参数（`SinglePassRange1`和 2）。*

该`mismatch`函数可能类似于以下（省略类型）：

```
 auto mismatch(auto &rng1, auto &rng2){
     auto it1 = rng1.first, it2 = rng2.first;
     while (it1 != rng1.second && it2 != rng2.second)
          if (it1 != it2)
              break;
          else { ++it1; ++it2; }
     return make_pair(it1, it2);  
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:17:09.990

> 我也不清楚调用 mismatch 函数之前所有这些行的作用。第一行看起来我们要定义一个类模板，但我们稍后不会这样做。

这不是一个例子。它是一个*函数*模板的声明，它是 boost range 库的一部分。

> 在上面的例子中，我主要不清楚的是：什么是输入，什么是 mismatch 函数的输出？

正如您链接的页面上进一步记录的那样，输入的类型必须是单程范围概念的模型。

有关提升范围的更多信息，请访问[http://www.boost.org/doc/libs/1_50_0_beta1/libs/range/doc/html/range/introduction.html](http://www.boost.org/doc/libs/1_50_0_beta1/libs/range/doc/html/range/introduction.html)

如上所述，最常见的用途是传入标准容器。内置数组也可以。并`boost::iterator_range`允许您使用形成范围的任何一对（前向）迭代器。

所以你可以有

```
vector<string> vec { ... };
list<string> lis { ... };

auto result = mismatch(vec, lis); 
```

这里`result`会有类型`pair<boost::range_iterator<vector<string>>::type, boost::range_iterator<list<string>>::type>`

# mysql - 计算几个日期的最大值的数量

> ID：15921292
> 
> 赞同：1
> 
> 时间：2013-04-10T08:56:02.097
> 
> 标签：mysql, sql, count

对于给定的用户，我想做一个 SQL 查询，返回用户每天获得最佳值的次数。
我使用 MySQL。

```
-----------------------------
| User |    Date    | Value |
-----------------------------
| John | 2013-04-03 | 57    |
| John | 2013-04-04 | 13    |
| John | 2013-04-05 | 102   |
| John | 2013-04-06 | 64    |
| Bob  | 2013-04-03 | 8     |
| Bob  | 2013-04-04 | 83    |
| Bob  | 2013-04-05 | 44    |
| Bob  | 2013-04-06 | 101   |
| Paul | 2013-04-03 | 22    |
| Paul | 2013-04-04 | 72    |
| Paul | 2013-04-05 | 50    |
| Paul | 2013-04-06 | 15    |
----------------------------- 
```

**示例：**
约翰：2 次（2013 年 4 月 3 日和 2013 年 4 月 5 日）
鲍勃：2 次（2013 年 4 月 4 日和 2013 年 4 月 6 日）
保罗：0 次

我不知道我必须使用哪些函数（*COUNT(*)* ? *SUM(*)* ? *MAX(Value)* ? *GROUP BY* ?）。
如何为每个日期创建一个循环并求和？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:02:17.533

由于您没有提到您正在使用的 RDBMS，因此这里有一个适用于*几乎所有*RDBMS 的查询：

```
SELECT  aa.User, COUNT(bb.User ) TotalCount
FROM    (SELECT DISTINCT User FROM TableName) aa
        LEFT JOIN
        (
            SELECT  a.User
            FROM    TableName a
                    INNER JOIN
                    (
                        SELECT  Date, MAX(Value) max_val
                        FROM    TableName
                        GROUP   BY Date
                    ) b ON  a.Date = b.Date AND
                            a.Value = b.max_val
        ) bb ON aa.User = bb.User 
GROUP   BY aa.User 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/a7ea6/2)

输出

```
╔══════╦════════════╗
║ USER ║ TOTALCOUNT ║
╠══════╬════════════╣
║ Bob  ║          2 ║
║ John ║          2 ║
║ Paul ║          0 ║
╚══════╩════════════╝ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:11:53.300

您可以尝试以下查询来实现这一点 -

```
WITH T AS (SELECT USER,COUNT(*) 
             FROM TABLE_NAME WHERE (DATE,VALUE) IN (SELECT DATE, MAX(VALUE) 
                                                      FROM TABLE_NAME 
                                                  GROUP BY DATE)
          GROUP BY USER)

SELECT * FROM T 
UNION SELECT USER,0 
        FROM TABLE_NAME 
       WHERE USER NOT IN (SELECT USER FROM T) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:43:13.833

我想出了以下

```
 select
   u.user, count(*) as top_performer
  from 
    my_table u
    join (
      select valdate, max(value) as value 
      from my_table 
      group by valdate
    ) mv on
      mv.valdate = u.valdate and
      mv.value = u.value
  group by
    u.user 
```

JW 的答案可能更完整，因为它列出了 Paul 的零分 - 另一方面，我的答案假设您将`left join`访问另一个用户表。

[http://sqlfiddle.com/#!2/409ca/11](http://sqlfiddle.com/#!2/409ca/11)

# java - java和数据库之间共享常量

> ID：15921293
> 
> 赞同：0
> 
> 时间：2013-04-10T08:56:07.707
> 
> 标签：java, sql, database

假设您有一个 STORE 表，其中包含一个接受值 (OPEN,CLOSED) 的 varchar 列 STATUS

在java方面，特别是在你的sqls中，我发现自己在写这样的查询

```
select * from store where status='OPEN' 
```

现在这不是书面合同，并且存在许多错误。

我想管理在 db 端添加新状态或重命名现有状态并在 java 端处理它的情况。例如，如果在 STORE 表上，如果所有带有 OPEN 的状态都更改为 OP，我的 sql 代码将失败。

PS：这个问题实际上与编程语言和数据库服务器无关，但我用java标记它，因为我处理它更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:43:58.013

你的需求有点奇怪。通常事情不会只是在数据库中“发生”，而且您不必处理它。相反，您决定更改应用程序中的内容，同时更改代码和迁移数据。

话虽如此，如果您想确保您的数据与一组众所周知的值一致，您可以创建库表。在你的情况下：

```
create table STORE (status varchar(32))  -- your table
create table LIB_STORE_STATUS (status varchar(32) unique)  -- a lib table for statuses
alter table STORE add constraint FK_STORE_STATUS foreign key (status) references LIB_STORE_STATUS(status)  -- constraints the values in your STORE table 
```

然后：

```
insert into STORE values ('A') -- fails
insert into LIB_STORE_STATUS values ('A')
insert into STORE values ('A') -- passes 
```

有了这个，您只需要确保您的 lib 表始终与您的代码同步（即使用 JPA`@Enumerated(EnumType.STRING)`映射策略时的枚举名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:49:19.687

使用枚举，可以直接映射到枚举实例名（不需要转换为int序号）

但在这种情况下，我会有一个名为 open 的布尔/位列，它的可能值是真或假。

（布尔值在大多数数据库中为 0/1 位）

# ios - 从代码中实例化视图控制器 - viewDidLoad 何时调用 iOS

> ID：15921295
> 
> 赞同：0
> 
> 时间：2013-04-10T08:56:13.480
> 
> 标签：ios, uiviewcontroller

我正在使用类似的东西：
`VC = [[SettingsViewController alloc] initWithNibName:nil bundle:nil];`

viewDidLoad 尚未调用。
但是当我这样做时：
`VC.view.frame = CGRectMake(...);`

此时 viewDidLoad 被调用。

但问题是，我在上述代码语句中传递的视图尺寸并未在该`viewDidLoad`方法中使用。
我认为它看到正在使用视图，所以是时候加载视图了，加载视图后，它必须将框架尺寸分配给视图。但是，如果我希望在`viewDidLoad`调用之前设置视图尺寸，以便我可以在`viewDidLoad`方法中使用这些尺寸..
像`initWithFrame..`

另外，我在视图控制器中没有视图尺寸。我必须从 VC 外部分配视图尺寸。
所以可能在调用`initWithNibName:bundle:`方法之后，我可以将视图框架尺寸保存在某个变量中。但这看起来不像是一个干净的解决方案，是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:00:23.403

`viewDidLoad`在视图加载时调用。（惊喜）

所以在你调用的时候`VC.view`，在它返回之前，`viewDidLoaded`将执行然后返回视图，并设置框架。

所以从你目前的方法来看，这是不可能的

无论如何，为什么你需要视图框架`viewDidLoad`？也许您可以将该部分移动到`viewWillAppear`/`viewDidAppear`仅在视图即将呈现时才被调用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:04:53.987

你可以这样做：

在界面中

```
@interface SettingsViewController : ... {
    CGRect _initialFrame;
}

...

- (id)initWithFrame:(CGRect)frame;

@end 
```

在实施中

```
- (id)initWithFrame:(CGRect)frame 
{
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        _initialFrame = frame;
    }

    return self;
}

- (void)viewDidLoad
{
    self.view.frame = _initialFrame;

    [super viewDidLoad];
} 
```

然后从你使用这些控制器的类中：

```
VC = [[SettingsViewController alloc] initWithFrame:CGRectMake(...)]; 
```

# javascript - javascript Amcharts 添加监听器

> ID：15921296
> 
> 赞同：5
> 
> 时间：2013-04-10T08:56:17.677
> 
> 标签：javascript, amcharts

我有两个这样的功能：

```
 function zoomChart() {
        chart.zoomToIndexes(0, 20000);
    }

    function zoomAtStartToLast90() {
        var dataLength = am_chartData.length;
        chart.zoomToIndexes(dataLength - 90, dataLength - 1);
    } 
```

当我开始绘制图表时，我想查看最后 90 条记录。所以我需要调用`zoomAtStartToLast90()`函数，但是当我对图表进行更新时，我想查看所有 20k 条记录，所以我会调用`zoomChart()`.

在里面 `AmCharts.ready(function () {`我称之为：`chart.addListener("dataUpdated", zoomChart);`

但是我在哪里可以调用`zoomAtStartToLast90()`函数？如果我将它添加到 addListener，图表会缩放到最后 90 条记录。是否可以在创建图表后调用某些函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:31:07.337

to trigger a function just after creating chat you can use init event..

REF: [AMcharts Docs](http://docs.amcharts.com/javascriptcharts/AmChart#init)

# templates - sharepoint 隐藏非管理员的管理员标头

> ID：15921301
> 
> 赞同：0
> 
> 时间：2013-04-10T08:56:23.440
> 
> 标签：templates, sharepoint, permissions

我是 Sharepoint 的新手，我尝试创建应用程序页面（通过 Visual Studio）。

我想看看没有管理员标题和左栏的页面设计。我只想查看页面，没有其他要总结的内容。当然，我尝试使用只读用户登录，但我不知道如何为非管理员删除这些用户。

是权限设置吗？还是模板设置？或者是其他东西？

对不起，如果这个问题很愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T16:52:22.943

不确定这是否是最佳解决方案，但我创建了一个带有代码隐藏的自定义母版页，以根据权限显示/隐藏不需要的部分。

也许其他一些解决方案会更快，但无论如何出于设计原因我不得不创建一个母版页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:54:22.773

对于标题，我之前通过在页面上放置一个控件来检查当前用户是否是管理员，如果他们不是管理员，则将以下 CSS 添加到页面中

div#s4-ribbonrow { 显示：无；}

# c++ - 在什么情况下，虚拟基析构函数仍然可以未被调用导致内存泄漏？

> ID：15921304
> 
> 赞同：0
> 
> 时间：2013-04-10T08:56:27.193
> 
> 标签：c++, memory-leaks, free

带有一个基类`Heap`和两个派生类`MinHeap`和`MaxHeap`- 如下所示：

我创建了一个派生类对象：

```
MinHeap* myminheap = new MinHeap(); 
```

但使用删除它

```
delete myminheap; 
```

有/没有`virtual ~Heap() {}`给我 glibc 内存泄漏错误！症结是什么？我已经浏览了很多关于这个的帖子......

[在派生类中重写运算符 new/delete](https://stackoverflow.com/questions/6435052/overriding-operator-new-delete-in-derived-class)

[为什么在删除派生类对象时调用基类析构函数（虚拟）？](https://stackoverflow.com/questions/3261694/why-base-class-destructor-virtual-is-called-when-a-derived-class-object-is-del)

[使用基类指针删除派生类时的内存泄漏](https://stackoverflow.com/questions/5186815/memory-leak-when-deleting-derived-class-with-base-class-pointer)

....但我无法弄清楚为什么设置基本析构函数 virtual 仍然会导致内存错误？

```
Heap* h_ptr = myminheap;
delete h_ptr; 
```

附言。做 ^ 事情是不可能的，我无法将派生类对象指针类型转换为基指针，因为弹出以下错误

```
‘class Heap’ has no member named ‘insert’
‘class Heap’ has no member named ‘pop_min' 
```

`Heap`我可以通过在课堂上介绍他们来照顾

后来，我意识到`delete h_ptr;`如果我打电话而不是打电话，`free(h_ptr);`我不会受到内存泄漏的影响.. 万岁！但我需要对这种行为有所了解！

堆.h

```
#include <cstdlib>
#include <vector>
#include <iterator>

using namespace std;

class Heap
{
  public:
    Heap() {}
    ~Heap() {}

    vector <int> heap;
    int left(int parent);
    int right(int parent);
    int parent(int child);
    int size()                  {return heap.size();}
    virtual void insert(int element) {}
    virtual int pop_min() {}
    virtual int pop_max() {}
    void print();
};

class MinHeap : public Heap
{
  private:
    void heapify_up(int index);
    void heapify_down(int index);

  public:
    MinHeap() {}
    ~MinHeap() {}

    int pop_min();
    void insert(int element);
};

class MaxHeap : public Heap
{
  private:
    void heapify_up(int index);
    void heapify_down(int index);

  public:
    MaxHeap() {}
    ~MaxHeap() {}

    int pop_max();
    void insert(int element);
}; 
```

堆.cc

```
#include <cstdlib>
#include <iostream>
#include <vector>
#include <iterator>

using namespace std;

#include "heap.h"

//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int Heap::left(int parent)
{
    int i = (parent << 1) + 1;  //2 * parent + 1    read more on bit shifts
    return (i < heap.size()) ? i : -1;
}

int Heap::right(int parent)
{
    int i = (parent << 1) + 2;
    return (i < heap.size()) ? i : -1;
}

int Heap::parent(int child)
{
    if(child){
        int i = (child >> 1) - 1;
        return i;
    }
    else return -1;
}

void Heap::print()
{
    vector<int>::iterator i = heap.begin();
    cout << "Heap = ";
    while(i != heap.end()){
        cout << *i << " ";
        i++;
    }
    cout << endl;
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int MinHeap::pop_min()
{
    int min = heap.front();
    heap[0] = heap[heap.size() - 1];
    heap.pop_back();
    heapify_down(0);
    return min;
}

void MinHeap::insert(int element)
{
    heap.push_back(element);
    heapify_up(heap.size() - 1);
}

void MinHeap::heapify_up(int index)
{
    while(index > 0 && parent(index) >= 0 && heap[parent(index)] > heap[index]){
        int temp = heap[index];
        heap[index] = heap[parent(index)];
        heap[parent(index)] = temp;
        index = parent(index);
    }
}

void MinHeap::heapify_down(int index)
{
    int child = left(index);

    if(child > 0 && right(index) > 0 && heap[child] > heap[right(index)])
        child = right(index);

    if(heap[index] > heap[child]){
        int temp = heap[child];
        heap[child] = heap[index];
        heap[index] = temp;
        heapify_down(child);
    }
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int MaxHeap::pop_max()
{
    int max = heap.front();
    heap[0] = heap[heap.size() - 1];
    heap.pop_back();
    heapify_down(0);
    return max;
}

void MaxHeap::insert(int element)
{
    heap.push_back(element);
    heapify_up(heap.size() - 1);
}

void MaxHeap::heapify_up(int index)
{
    while(index > 0 && parent(index) >= 0 && heap[parent(index)] < heap[index]){
        int temp = heap[index];
        heap[index] = heap[parent(index)];
        heap[parent(index)] = temp;
        index = parent(index);
    }
}

void MaxHeap::heapify_down(int index)
{
    int child = left(index);

    if(child > 0 && right(index) > 0 && child < right(index))
        child = right(index);

    if(heap[index] < heap[child]){
        int temp = heap[child];
        heap[child] = heap[index];
        heap[child] = temp;
        heapify_down(child);
    }
}
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
//              test program
//~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
int main(){
    // Create the heap
    MinHeap* myminheap = new MinHeap();
    myminheap->insert(700);
    myminheap->print();
    myminheap->insert(500);
    myminheap->print();
    myminheap->insert(100);
    myminheap->print();
    myminheap->insert(800);
    myminheap->print();
    myminheap->insert(200);
    myminheap->print();
    myminheap->insert(400);
    myminheap->print();
    myminheap->insert(900);
    myminheap->print();
    myminheap->insert(1000);
    myminheap->print();
    myminheap->insert(300);
    myminheap->print();
    myminheap->insert(600);
    myminheap->print();

    // Get priority element from the heap
    int heapSize = myminheap->size();
    for ( int i = 0; i < heapSize; i++ )
        cout << "Get min element = " << myminheap->pop_min() << endl;

    // Cleanup
    delete myminheap;

    return 1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:17:13.053

如果您新建了一个 MinHeap，则不能通过在堆类型上调用 free 来删除它。您的问题是您正在存储指向该对象的指针并说它是另一回事，因此删除例程不知道您正在尝试删除 MinHeap，并且只删除了 Heap 部分（大致）。

您可以直接在 myminheap 对象上调用 delete ，这应该可以工作。

更好的解决方案是根本不在堆上创建 MinHeap，在堆栈上创建它并在没有任何指针的情况下使用它。如果您出于某种原因需要在堆上创建它，请改为在智能指针类中创建它，例如使用 shared_ptr<> 这将极大地帮助您。

# c# - SetEnvironmentVariable 有什么作用

> ID：15921308
> 
> 赞同：-9
> 
> 时间：2013-04-10T08:56:35.257
> 
> 标签：c#

在我从其他人那里接管的网站上 - 在将水晶报表加载到报表查看器之前出现此行

```
System.Environment.SetEnvironmentVariable("TMP", @"C:\Temp"); 
```

它不再被提及 - 除了页面下方的错误消息似乎只是报告“TMP”等于 C:\Temp

那条线实际上是做什么的？

这是完整的代码：

```
ReportDocument ViewReport = new ReportDocument();
protected void Page_Load(object sender, EventArgs e)
{
}
protected void Page_Init(object sender, EventArgs e)
{
    try
    {
        string ReportPath = Server.UrlDecode(Request["Path"]);
        System.Environment.SetEnvironmentVariable("TMP", @"C:\Temp");
        ViewReport.Load(@ReportPath);
        ViewReport.SetDatabaseLogon(ConfigurationManager.AppSettings["ReportsUser"], ConfigurationManager.AppSettings["ReportsPassword"]);
        CrystalReportViewer1.Height = 640;
        CrystalReportViewer1.Width = 1100;
        CrystalReportViewer1.BestFitPage = false;
        CrystalReportViewer1.PrintMode = CrystalDecisions.Web.PrintMode.ActiveX;
        CrystalReportViewer1.ReportSource = ViewReport;
        CrystalReportViewer1.RefreshReport();
    }
    catch (Exception err)
    {
        string Err = "Error :-" + err.Message;
        Err = Err + "Source :-" + err.Source;
        Err = Err + "Inner Error :-" + err.InnerException.Message.Replace("\r", "");
        Err = Err + "Path not found :-" + Server.UrlDecode(Request["Path"]);
        Err = Err + " TMP=" + System.Environment.GetEnvironmentVariable("TMP");
        string Message = "<script> alert(' " + Err + "');</script>";
        Response.Write(Message);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:20:57.070

环境变量是计算机上所有进程的全局变量。我会大胆猜测并说您的报表查看器将需要存储临时文件。它将向操作系统询问存储它们的位置。操作系统将查找它的变量，在本例中是一个名为“TMP”的变量，并将其值返回给报表查看器。然后，报表查看器将愉快地将其临时文件存储在那里。

该行告诉操作系统有一个变量名 TMP，其值为 C:\Temp。

报告查看器可能会要求操作系统提供 TMP 的值以继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T06:54:07.287

> **环境变量**

环境变量是一组动态命名值，可以影响正在运行的进程在计算机上的行为方式。

它们在某种意义上可以说是创建了一个进程运行的操作环境。例如，具有标准名称的环境变量可以存储特定计算机系统用于存储临时文件的位置——这可能因计算机系统而异。通过（标准）名称调用环境变量的进程可以确保它将临时信息存储在一个存在的目录中，并且预期有足够的空间。 [1] 在几乎所有操作系统中，每个进程都有自己的一组私有环境变量。默认情况下，创建进程时，它会继承其父进程的重复环境，但父进程在创建子进程时所做的显式更改除外。运行程序可以访问环境变量的值以进行配置。

**环境变量的示例包括：**

路径 - 列出 shell 搜索的目录，以查找用户可以键入的命令，而无需提供完整路径。

Temp - 进程可以存储临时文件的位置

UserProfile - 指示用户的主目录在文件系统中的位置。

AppData{DeveloperName\AppName} - 用于存储应用程序设置。

> Windows 环境变量列表

AllUsersProfile

应用程序数据

光盘

客户名称

CmdCmdLine

CmdExtVersion

通信规范

通用程序文件

计算机名

日期

错误级别

家庭驱动器

主页路径

本地应用数据

登录服务器

处理器数量

操作系统

小路

路径扩展

处理器架构

处理器标识符

处理器级别

处理器版本

程序文件

迅速的

随机的

会话名称

系统驱动器

系统根

温度

时间

温度

用户域名

用户域

用户名

用户资料

目录

> 全局我的意思是 - 通过在 Crystal Report Viewer 中显示 Crystal Report 的页面上将“TMP”EnvironmentVariable 设置为“C:\Temp”，在另一个页面上，当调用 Web 服务时，asp。 net 将临时序列化程序集保存在“C:\Temp”而不是 asp.net 目录中？

临时文件夹将仅存储与流程相关的数据，不会存储程序集和其他内容。

更多信息请访问[http://environmentvariables.org/](http://environmentvariables.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:01:06.240

环境变量是应用程序在不明确知道这些目录的情况下确定例如某个目录的路径的一种方式。
例如，如果您有一个程序需要解压缩临时文件来执行安装例程，它可以向系统询问环境变量`TMP`并从系统获取路径。这使得应用程序独立于实际系统，因为有人可能`TMP`调用了 -directoy `C:\Temp`，而其他人可能在`D:\Temp`.

来自[维基百科](http://en.wikipedia.org/wiki/Environment_variable)

```
Environment variables are a set of dynamic named values that can affect the way 
running processes will behave on a computer 
```

# visual-studio-2012 - 如何删除 TFS 2012 中的工作项？

> ID：15921309
> 
> 赞同：8
> 
> 时间：2013-04-10T08:56:37.210
> 
> 标签：visual-studio-2012, tfs, tfs-workitem, tfs-power-tools

以前有人问过这个问题，但我正在努力寻找一种方法来删除 Team Foundation Server 中的工作项。这看起来很有希望： [http](http://devmatter.blogspot.co.uk/2009/04/deleting-work-items-in-tfs-ui.html) ://devmatter.blogspot.co.uk/2009/04/deleting-work-items-in-tfs-ui.html 。但到目前为止还没有运气。

首先尝试了以下命令：

`witadmin destroywi /collection:"https://<<my TFS collection>>" /id:1223`

它回来了`Unable to destroy work item(s) 1223\. TF237090: Does not exist or access is denied.`

不幸的是，由于工作的互联网限制，我无法下载文章中提到的“删除工作项”实用程序，因为它位于 Skydrive 上。还尝试了“TEK workitem”扩展（在底部的评论中提到），但这也不会让我因为我不是项目集合管理员。

我注定要永远被这个工作项目困住还是有其他方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-13T00:57:55.460

是的，这有点烦人。将项目状态设置为“已删除”至少会将其隐藏起来。

# annotations - 如何利用 Mule 生命周期

> ID：15921310
> 
> 赞同：0
> 
> 时间：2013-04-10T08:56:41.223
> 
> 标签：annotations, mule, mule-studio

我正在锻炼骡子我[在这里读到](http://www.mulesoft.org/documentation/display/current/Taking+Advantage+of+Mule+Lifecycle)

我想尝试这个示例，然后我创建了一个项目并在 Mule Studio 中创建了一个 java 类，之后我复制了这段代码：

```
package org.mule.module.twilio;   
import org.mule.api.annotations.Configurable; 
import org.mule.api.annotations.Module;
import org.mule.api.annotations.Processor; 
import org.mule.api.annotations.lifecycle.Start; 
import org.mule.api.annotations.param.Optional; 
import org.mule.api.callback.HttpCallback;  
 @Module(name = "twilio") 
public class TwilioConnector {

    /**
     * The account sid to be used to connect to Twilio.
      */
     @Configurable
     private String accountSid;
     /**
      * The authentication token to be used to connect to Twilio
      */
     @Configurable
    private String authToken;

    private TwilioClient twilioClient;

     @Start
     public void createTwilioClient() {
         twilioClient = new TwilioClient(accountSid, authToken);
     } 
   } 
```

但我有很多错误：所有

```
The import org.mule.api.annotations.Configurable cannot be resolved
The import org.mule.api.annotations.Module cannot be resolved
The import org.mule.api.annotations.Processor cannot be resolved
The import org.mule.api.annotations.lifecycle cannot be resolved
The import org.mule.api.annotations.param.Optional cannot be resolved
The import org.mule.api.callback cannot be resolved 
```

附近所有注释都不知道所有 clsaa 导入是：Configurable cannot be resolve to a type ![在此处输入图像描述](https://i.stack.imgur.com/RGbah.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:10:11.860

您是否将[mule devkit 注释 jar](https://repository.mulesoft.org/nexus/content/repositories/releases/org/mule/tools/devkit/mule-devkit-annotations/3.3.0/)添加到您的类路径中？

一旦您构建了您的云连接器，您可以按照[此处提供的说明将其添加到工作室](http://www.mulesoft.org/documentation/display/current/Your+First+Cloud+Connector)

# magento - Magento - 促销不适用于可下载文件的价格

> ID：15921320
> 
> 赞同：4
> 
> 时间：2013-04-10T08:57:14.573
> 
> 标签：magento, magento-1.7

**初始状态：**

*   已安装 Magento 1.7（未尝试使用以前的版本）
*   一种（可下载）产品，带有多个可下载文件，价格已添加到默认产品中（假设产品价格**为 50 美元**+ 2 个可下载文件，一个免费，另一个额外**50 美元**）
*   适用于所有产品的新促销（*目录价格规则*）（比如说**-20%**）

*有关促销的更多信息：*

适用于所有产品、所有组、处于活动状态且已应用，“按原价的百分比”应用，为子产品启用折扣 -> 是，停止进一步处理规则 -> 否

**预期结果：**

带有 50 美元文件的产品价格：**80 美元**（100 美元的 80%）

**实际结果：**

带有 50 美元文件的产品价格：**90 美元**（最初 50 美元的 80%，以及可下载文件的全价）。

**结论：**

促销不适用于可下载文件的额外价格。

**问题）：**

*   这是可下载文件的理想行为吗？或者这是一个错误？
*   关于如何修改代码（最终创建一个模块）以使其按预期工作的任何提示？*（只是提示，即扩展什么）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T20:40:57.210

链接/可下载文件不是产品实体（因此它没有 price_index 表并且不被视为产品）

在产品中应用促销有两种方法

1.  目录价格规则

2.  购物车价格规则

正如您的问题所述，您使用了目录价格规则，我已经使用目录价格规则解决了您的问题。

创建模块并重写模型

```
Mage_Downloadable_Model_Product_Type 
```

======

```
<global>
    <models>
        <downloadable>
            <rewrite>
                <product_type>Web_Eproduct_Model_Downloadable_Product_Type</product_type>
            </rewrite>
        </downloadable>
    </models>
</global> 
```

和下面的代码即时计算每个链接的价格（即使您对同一产品应用了多个规则）

```
class Namespace_Modulename_Model_Downloadable_Product_Type extends Mage_Downloadable_Model_Product_Type {
    public function getLinks($product = null)
    {
        $product = $this->getProduct($product);
        $wId = Mage::app()->getWebsite()->getId();
        $gId = Mage::getSingleton('customer/session')->getCustomerGroupId();
        $catalogRules = Mage::getSingleton('catalogrule/resource_rule')->getRulesFromProduct('',$wId,$gId,$product->getId());

        /* @var Mage_Catalog_Model_Product $product */
        if (is_null($product->getDownloadableLinks())) {
            $_linkCollection = Mage::getModel('downloadable/link')->getCollection()
                ->addProductToFilter($product->getId())
                ->addTitleToResult($product->getStoreId())
                ->addPriceToResult($product->getStore()->getWebsiteId());
            $linksCollectionById = array();
            foreach ($_linkCollection as $link) {
                /* @var Mage_Downloadable_Model_Link $link */

                $link->setProduct($product);

                $link->setPrice($this->calcLinkPrice($catalogRules,$link->getPrice()));
                $linksCollectionById[$link->getId()] = $link;
            }
            $product->setDownloadableLinks($linksCollectionById);
        }
        return $product->getDownloadableLinks();
    }
    public function calcLinkPrice(array $rules = array(),$productPrice = 0 )
    {
        foreach($rules as $ruleData)
        {
            $productPrice = Mage::helper('catalogrule')->calcPriceRule(
                $ruleData['action_operator'],
                $ruleData['action_amount'],
                $productPrice);
        }
        return $productPrice;
    }
} 
```

我已经对其进行了测试并确认它可以按您的预期工作:)

试试看，让我知道你的想法：）

如果您将使用购物车价格规则，还有另一种方法可以实现这一点，我稍后会发布。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-18T06:42:19.330

Magento 中有 2 种价格规则，目录和购物车价格规则。商品加入购物车前会制定目录规则，而购物车价格规则则应用于购物车。

您应该将此促销设置为**购物车价格规则**。

# activiti - Activiti 为计时器事件创建新作业

> ID：15921322
> 
> 赞同：0
> 
> 时间：2013-04-10T08:57:23.920
> 
> 标签：activiti

我们正在使用**activiti 5.10**，我们注意到 activiti 定时任务的一个非常奇怪的行为：

我们有一个定时任务，每 30 秒唤醒一次，检查是否需要完成“工作”，如果需要，它会完成这项工作并自行完成。如果没有工作要做，它会自己完成。

这一切都没有任何例外或“打嗝”。

**我们遇到的问题是，activiti 偶尔会创建这个定时事件的新实例。这意味着在表“act_ru_job”中为该流程定义创建了另一个条目。因此，我们现在有两个，而不是一个定时任务来完成这项工作。一个月后，我们已经有超过 100 个。**

这不会每次都发生，有时有两个星期什么都没有发生。没有例外，任务表 (act_ru_task) 显示没有等待完成的任务。

我知道这确实是一个奇怪的错误，并且很难在没有任何例外的情况下解决它，但也许这里有人遇到过同样的情况，或者可以引导我找到官方的错误描述。

此致，

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T21:01:30.370

我无法从您的描述中真正看出，但我认为您的流程实例已完成，因此当另一个流程启动时，您会在“act_ru_job”表中看到另一个作业但链接到新实例是正常的。

# php - PHP 检测是否非英语

> ID：15921327
> 
> 赞同：8
> 
> 时间：2013-04-10T08:57:36.570
> 
> 标签：php

我正在使用这些代码来检查字符串是否为英文。

```
<?php
    $string="で書くタッチイベント (フ";

    if(!preg_match('/[^\W_ ] /',$string)) {
        echo "Please enter English words only:(";
    } else {
        echo "OK, English Detected!";
    }
?> 
```

它不能提供完美的结果，因为这样的字符串`"some english text で書くタッチイベント (フ"`也被检测为英语，知道吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-10T09:06:24.297

试试这个（请注意您需要安装 mbstring php 模块）：

```
<?php
    $string="で書くタッチイベント (フ";

    if(strlen($string) != mb_strlen($string, 'utf-8'))
    { 
        echo "Please enter English words only:(";
    }
    else {
        echo "OK, English Detected!";
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:10:39.490

```
if(!preg_match('/[^\w ]/u',$string)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:00:45.243

您无法从字符类型中检测到语言。并且没有万无一失的方法可以做到这一点。

使用任何方法，您都只是在进行有根据的猜测。来自：[从 PHP 中的字符串中检测语言](https://stackoverflow.com/questions/1441562/detect-language-from-string-in-php)

尽管下面的一些文章可能会派上用场，以防万一。

[http://papermashup.com/php-language-detection/](http://papermashup.com/php-language-detection/)

[https://github.com/BruceJillis/PHP-Language-Detection](https://github.com/BruceJillis/PHP-Language-Detection)

[http://phpir.com/language-detection-with-n-grams/](http://phpir.com/language-detection-with-n-grams/)

希望能帮助到你..

# javascript - 脚本属性未设置为 javascript 函数值

> ID：15921329
> 
> 赞同：0
> 
> 时间：2013-04-10T08:57:38.577
> 
> 标签：javascript, asp.net, html

我正在尝试为信息词云设置脚本标签的属性，如下所示：

```
<head>
  function getParameterByName(name)
  {
  ...
  }
</head>
<body>
<script type="text/javascript" 
async data-infomous-id="javascript:getParameterByName('wcid');" 
id="embed" 
src="http://www.infomous.com/client2/?width=800&height=600&maxWords=40">
</script>
</body> 
```

但是javascript函数永远不会执行。如何动态设置**data-infomous-id**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:00:45.693

这应该做到这一点：

[jsFiddle](http://jsfiddle.net/Tyriar/egLnM/1/)

```
var elem = document.getElementById('embed');
elem.setAttribute('data-infomous-id', getParameterByName('wcid')); 
```

# java - 检查字符串是否为 Java 中 ISO 语言的 ISO 国家/地区的更简洁方法

> ID：15921332
> 
> 赞同：18
> 
> 时间：2013-04-10T08:57:41.627
> 
> 标签：java, validation, guava, apache-commons, iso

假设有两个字符`String`，应该代表**ISO 639**国家或语言名称。

你知道，[`Locale`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.htm)class 有两个函数[`getISOLanguages`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#getISOLanguages%28%29)，它们分别返回一个包含所有 ISO 语言和 ISO 国家[`getISOCountries`](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html#getISOCountries%28%29)的数组。`String`

要检查特定`String`对象是否是有效的 ISO 语言或 ISO 国家/地区，我应该在该数组中查找匹配的`String`. 好的，我可以通过使用二进制搜索（例如[`Arrays.binarySearch`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#binarySearch%28T%5B%5D,%20T,%20java.util.Comparator%29)ApacheCommons [`ArrayUtils.contains`](http://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/ArrayUtils.html#contains%28java.lang.Object%5B%5D,%20java.lang.Object%29)）来做到这一点。

问题是：是否**存在任何提供更简洁方式的实用程序**（例如来自*Guava*或*Apache Commons*库）**，例如返回 a`boolean`以验证 a`String`作为有效 ISO 639 语言或 ISO 639 Country**的函数？

例如：

```
public static boolean isValidISOLanguage(String s)
public static boolean isValidISOCountry(String s) 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-10T09:01:00.387

我不会费心使用二进制搜索或任何第三方库 -`HashSet`这很好：

```
public final class IsoUtil {
    private static final Set<String> ISO_LANGUAGES = Set.of(Locale.getISOLanguages());
    private static final Set<String> ISO_COUNTRIES = Set.of(Locale.getISOCountries());

    private IsoUtil() {}

    public static boolean isValidISOLanguage(String s) {
        return ISO_LANGUAGES.contains(s);
    }

    public static boolean isValidISOCountry(String s) {
        return ISO_COUNTRIES.contains(s);
    }
} 
```

您*可以*先检查字符串长度，但我不确定我是否会打扰 - 至少不会，除非您想保护自己免受性能攻击，因为您会收到大量字符串，这些字符串需要很长时间才能散列。

编辑：如果您*确实*想使用 3rd 方库，[ICU4J](http://icu-project.org/)是最有可能的竞争者 - 但它的列表可能比支持的列表更新`Locale`，因此您希望在任何地方都使用 ICU4J，大概。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-14T14:05:48.570

据我所知，任何库中都没有这样的方法，但至少你可以自己声明它：

```
import static java.util.Arrays.binarySearch;
import java.util.Locale;

/**
 * Validator of country code.
 * Uses binary search over array of sorted country codes.
 * Country code has two ASCII letters so we need at least two bytes to represent the code.
 * Two bytes are represented in Java by short type. This is useful for us because we can use Arrays.binarySearch(short[] a, short needle)
 * Each country code is converted to short via countryCodeNeedle() function.
 *
 * Average speed of the method is 246.058 ops/ms which is twice slower than lookup over HashSet (523.678 ops/ms).
 * Complexity is O(log(N)) instead of O(1) for HashSet.
 * But it consumes only 520 bytes of RAM to keep the list of country codes instead of 22064 (> 21 Kb) to hold HashSet of country codes.
 */
public class CountryValidator {
  /** Sorted array of country codes converted to short */
  private static final short[] COUNTRIES_SHORT = initShortArray(Locale.getISOCountries());

  public static boolean isValidCountryCode(String countryCode) {
    if (countryCode == null || countryCode.length() != 2 || countryCodeIsNotAlphaUppercase(countryCode)) {
      return false;
    }
    short needle = countryCodeNeedle(countryCode);
    return binarySearch(COUNTRIES_SHORT, needle) >= 0;
  }

  private static boolean countryCodeIsNotAlphaUppercase(String countryCode) {
    char c1 = countryCode.charAt(0);
    if (c1 < 'A' || c1 > 'Z') {
      return true;
    }
    char c2 = countryCode.charAt(1);
    return c2 < 'A' || c2 > 'Z';
  }

  /**
   * Country code has two ASCII letters so we need at least two bytes to represent the code.
   * Two bytes are represented in Java by short type. So we should convert two bytes of country code to short.
   * We can use something like:
   * short val = (short)((hi << 8) | lo);
   * But in fact very similar logic is done inside of String.hashCode() function.
   * And what is even more important is that each string object already has cached hash code.
   * So for us the conversion of two letter country code to short can be immediately.
   * We can relay on String's hash code because it's specified in JLS
   **/
  private static short countryCodeNeedle(String countryCode) {
    return (short) countryCode.hashCode();
  }

  private static short[] initShortArray(String[] isoCountries) {
    short[] countriesShortArray = new short[isoCountries.length];
    for (int i = 0; i < isoCountries.length; i++) {
      String isoCountry = isoCountries[i];
      countriesShortArray[i] = countryCodeNeedle(isoCountry);
    }
    return countriesShortArray;
  }
} 
```

将`Locale.getISOCountries()`始终创建一个新数组，因此我们应该将其存储到静态字段中以避免不必要的分配。同时`HashSet`或`TreeSet`消耗大量内存，因此此验证器将对数组使用二进制搜索。这是速度和内存之间的权衡。

# xml - 使用 jersey 将 POJO 序列化到 JSON 或从 JSON 序列化：奇怪的元素嵌套

> ID：15921333
> 
> 赞同：1
> 
> 时间：2013-04-10T08:57:50.770
> 
> 标签：xml, json, jaxb, jersey, jax-rs

我的课程结构如下：

```
@XmlRootElement(name="rootClass")
@XmlAccessorType(XmlAccessType.FIELD)
public class rootClass {

    @XmlElementWrapper(name="children")
    @XmlElement(name="child", type=childClass.class)
    private List<childClass> children;

    // Constructor, Getters, Setters    
}

public class childClass {
    private String name;
} 
```

如果实例绑定到 xml，它看起来像这样，完全符合预期：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<rootClass>
    <children>
        <child>
            <name>Peter</name>
        </child>
        <child>
            <name>Griffin</name>
        </child>
    </children>
</rootClass> 
```

但在 JSON 中，它看起来像这样：

```
{
    "children": {
        "child": [
            {
                "name": "Peter"
            },
            {
                "name": "Griffin"
            }
        ]
    }
} 
```

虽然我希望它看起来像这样：

```
{
    "children": [
        {
            "name": "Peter"
        },
        {
            "name": "Griffin"
        }
    ]
} 
```

这种行为是由错误的注释引起的还是由于缺少注释参数的结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T11:17:24.743

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

下面是如何通过利用 MOXy 作为 JSON 绑定提供程序来获得此行为`wrapperAsArrayName`：

```
import java.util.*;
import javax.ws.rs.core.Application;
import org.eclipse.persistence.jaxb.rs.MOXyJsonProvider;

public class MyApplication  extends Application {

    @Override
    public Set<Class<?>> getClasses() {
        HashSet<Class<?>> set = new HashSet<Class<?>>(1);
        set.add(MyService.class);
        return set;
    }

    @Override
    public Set<Object> getSingletons() {
        MOXyJsonProvider moxyJsonProvider = new MOXyJsonProvider();
        moxyJsonProvider.setWrapperAsArrayName(true);

        HashSet<Object> set = new HashSet<Object>(1);
        set.add(moxyJsonProvider);
        return set;
    }

} 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2013/03/binding-to-json-xml-handling-collections.html](http://blog.bdoughan.com/2013/03/binding-to-json-xml-handling-collections.html)

# java - Java 循环结构和 OCAJ7 学习指南

> ID：15921346
> 
> 赞同：0
> 
> 时间：2013-04-10T08:58:24.363
> 
> 标签：java, oracle, for-loop, foreach

我正准备参加 Oracle Java SE7 助理考试，我对学习指南中的这个示例问题感到困惑：

* * *

给定以下数组声明，哪个语句将显示数组的每个元素？

`int arr[] = {1,2,3,4,5};`

一个。`for(int n : arr[]) { System.out.println(n); }`

湾。`for(int n : arr) { System.out.println(n); }`

C。`for(int n=1; n < 6; n++) { System.out.println(arr[n]);}`

d。`for(int n=1; n <= 5; n++) { System.out.println(arr[n]);}`

* * *

答案键给出 b、c 和 d 作为正确答案。但是，在我看来，只有 b 应该是正确的，因为 c 和 d 都将从 arr[1] 而不是 arr[0] 开始索引数组。

这是答案键中的错误吗？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:03:27.443

B是唯一一个我觉得合适的人。

C & D 都从 1（不是 0）开始，如果我的计数是正确的，就会抛出和索引越界异常。

我认为这是答案中的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-20T19:44:45.957

想来想去，和考试的作者一样，C&D至少会显示数组中的4个元素，然后就会出现异常。所以他们仍然不能满足要求。

# java - 在 JSP 中向 Struts2 输入日期

> ID：15921347
> 
> 赞同：1
> 
> 时间：2013-04-10T08:58:26.887
> 
> 标签：java, struts2

我正在使用带有 Hibernate ORM 的 Struts2。我在[这个](https://stackoverflow.com/questions/2397498/how-to-input-date-to-a-struts2-action-from-a-jsp)问题中发现我必须创建一个转换器并`Date`使用该转换器注册我的 bean 属性。我尝试过其他类似的方法：

```
private Date myDate;
private SimpleDateConverter format = new SimpleDateConverter("MM/dd/yyyy");

public String getMyDate()
{
    return myDate.toString();
}

public setMyDate(String myDate)
{
    try{
        this.myDate = format.parse(myDate);
    } Catch(Exception e) {
        e.printStackTrace();
    }
} 
```

但它不起作用。有人可以解释我为什么吗？由于我上面的代码可以很好地进行转换

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:00:43.897

代码`getter`使用默认实现返回类中的类，`toString`它应该使用格式化程序进行格式化。

```
public String getMyDate()
{
    return format.format(myDate);
} 
```

这部分代码还有一个大小写问题：

```
public setMyDate(String myDate)
{
    try{
        this.MyDate = format.parse(myDate); //should be this.myDate = ...
    } Catch(Exception e) {
        e.printStackTrace();
    }
} 
```

# wordpress - 如何为页面添加描述标签

> ID：15921352
> 
> 赞同：2
> 
> 时间：2013-04-10T08:58:45.287
> 
> 标签：wordpress

如何为我的自托管 wordpress 博客添加描述标签。即使我使用的是 SEO Yoast，但我找不到这个选项。为该页面添加描述时遇到问题，例如，

```
http://sitename/author/authname/page/10/
http://sitename/author/tag/tagname/page/1 
```

我不知道如何以及在哪里为这个页面添加描述，因为没有这样的页面。但是我的 SEO 插件说这些页面中缺少描述 [不仅仅是所有相似页面中的这些。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T13:46:18.597

也许这个描述真的意味着**Meta description**。检查您的页面/帖子是否包含此信息。

在 SEO Yoast 中，编辑帖子、页面时，元描述位于一般元框中。

查看WordPress 插件页面的[ScreenShots 选项卡](http://wordpress.org/extend/plugins/wordpress-seo/screenshots/)中的第一张图片。

**更新：**

使用 SEO Yoast，您还可以为主页设置元描述。您可以通过转到**Dashboard > SEO > Titles & Metas**并选择**Home tab**来做到这一点。在那里你会找到**元描述模板：** .

# c# - xsd 类具有重复的属性

> ID：15921353
> 
> 赞同：1
> 
> 时间：2013-04-10T08:58:46.943
> 
> 标签：c#, asp.net, xml, winforms, xsd.exe

我有一个`xml`文件，我用这个文件转换为一个`.xsd`文件，然后我用这个命令`xsd.exe file.xml /classes`创建了一个文件，首先我只在一个 Windows 窗体应用程序中导入并正常工作，我注意到它在其中自动添加了，但是当我尝试在尝试将正确的名称空间添加到文件中上传相同的内容，例如：但是我在我的项目中看不到我的，如果我用 namsepace 包围我会收到此错误：`.cs``xsd.exe file.xsd /classes /enableLinqDataSet``file.xsd``file.cs``namespace TEST{}``file.designer.cs` `namespace TEST{//code//}``file.xsd``ClassLibrary``namespace TEST.ClassLibrary{}``namespace TEST.ClassLibrary{//code//}``file.cs``file.cs`

```
Error   8   Duplicate 'global::System.Xml.Serialization.XmlRootAttribute' attribute 23  6   Nop.Plugin.Misc.DobaImport
Error   6   Duplicate 'global::System.Serializable' attribute 19    6   Nop.Plugin.Misc.DobaImport
Error   7   Duplicate 'global::System.ComponentModel.DesignerCategoryAttribute' attribute Nop.Plugin.Misc.DobaImport 
```

如果我评论那些属性它构建正确但是当我运行它时我得到这个消息：

```
Only XmlRoot attribute may be specified for the type Nop.Plugin.Misc.DobaImport.XmlHelpers.lists. Please use XmlSchemaProviderAttribute to specify schema type. 
```

# r - 如何在R中的对数图中画一个圆圈？

> ID：15921359
> 
> 赞同：4
> 
> 时间：2013-04-10T08:59:10.670
> 
> 标签：r, plot, drawing, logarithm, plotrix

我有一个带有两个对数轴的图。我想在情节的某个位置添加一个圆圈。我尝试使用`plotrix`，但这没有提供“log-radius”选项。

```
# data to plot
x = 10^(-1 * c(5:0))
y = x ^-1.5

#install.packages("plotrix", dependencies=T)
# use require() within functions
library("plotrix")

plot (x, y, log="xy", type="o")
draw.circle(x=1e-2, y=1e2, radius=1e1, col=2) 
```

如何在我的对数图中添加一个圆圈？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-13T07:50:19.683

正如 krlmlr 建议的那样，最简单的解决方案是稍微修改`plotrix::draw.circle()`. 对数坐标系会扭曲以线性刻度给出的圆的坐标；为了抵消这种情况，您只需对计算出的坐标进行取幂，正如我在`## <-`下面代码中标记的行中所做的那样：

```
library("plotrix")

draw.circle.loglog <- 
function (x, y, radius, nv = 100, border = NULL, col = NA, lty = 1,
    lwd = 1)
{
    xylim <- par("usr")
    plotdim <- par("pin")
    ymult <- (xylim[4] - xylim[3])/(xylim[2] - xylim[1]) * plotdim[1]/plotdim[2]
    angle.inc <- 2 * pi/nv
    angles <- seq(0, 2 * pi - angle.inc, by = angle.inc)
    if (length(col) < length(radius))
        col <- rep(col, length.out = length(radius))
    for (circle in 1:length(radius)) {
        xv <- exp(cos(angles) * log(radius[circle])) * x[circle]         ## <-
        yv <- exp(sin(angles) * ymult * log(radius[circle])) * y[circle] ## <-
        polygon(xv, yv, border = border, col = col[circle], lty = lty,
            lwd = lwd)
    }
    invisible(list(x = xv, y = yv))
}

# Try it out 
x = 10^(-1 * c(5:0))
y = x ^-1.5

plot (x, y, log="xy", type="o")
draw.circle.loglog(x = c(1e-2, 1e-3, 1e-4), y = c(1e2, 1e6, 1e2),
                   radius = c(2,4,8), col = 1:3) 
```

![在此处输入图像描述](https://i.stack.imgur.com/imCjG.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T09:10:57.833

一种解决方法是`log10`明确应用。

```
plot (log10(x), log10(y), type="o")
draw.circle(x=log10(1e-2), y=log10(1e2), radius=log10(1e1), col=2) 
```

*编辑（使用`symbols`）：*

```
plot (x, y, log="xy", type="o",xlim=c(1e-5,1), ylim=c(1,1e8))
par(new=T)
symbols(x=1e-2, y=1e2, circles=1e1, xlim=c(1e-5,1), ylim=c(1,1e8), 
        xaxt='n', yaxt='n', ann=F, log="xy") 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T09:27:36.173

包中的功能`draw.circle`在`plotrix`我的系统上看起来像这样：

```
> draw.circle
function (x, y, radius, nv = 100, border = NULL, col = NA, lty = 1, 
    lwd = 1) 
{
    xylim <- par("usr")
    plotdim <- par("pin")
    ymult <- (xylim[4] - xylim[3])/(xylim[2] - xylim[1]) * plotdim[1]/plotdim[2]
    angle.inc <- 2 * pi/nv
    angles <- seq(0, 2 * pi - angle.inc, by = angle.inc)
    if (length(col) < length(radius)) 
        col <- rep(col, length.out = length(radius))
    for (circle in 1:length(radius)) {
        xv <- cos(angles) * radius[circle] + x
        yv <- sin(angles) * radius[circle] * ymult + y
        polygon(xv, yv, border = border, col = col[circle], lty = lty, 
            lwd = lwd)
    }
    invisible(list(x = xv, y = yv))
}
<environment: namespace:plotrix> 
```

这里发生的事情本质上是圆由 100 个顶点（参数`nv`）的多边形近似。您可以执行以下任一操作：

*   创建您自己的版本`draw.circle`，执行必要的坐标转换以“撤消”轴的对数转换。

*   该函数不可见地返回用于绘图的坐标列表。（如果将向量作为 传递`radius`，则仅返回最后一个圆的坐标。）您可以对这些坐标应用变换并调用`polygon`结果。`border`为、`col`和`lty`/或传递适当的值`lwd`以隐藏由函数本身绘制的多边形。

第一个版本对我来说听起来更容易。~~只需将循环内的`+ x`a替换为`* x`相同的 for ，就完成了。等效地，对于第二个版本，您减去然后乘以每个坐标，对于.`y``for``x``x``y`~~ **编辑**：这些转换略有错误，请参阅 Josh 的正确答案。

# android - 当用户隐藏软键盘时需要从编辑文本中移除焦点

> ID：15921360
> 
> 赞同：2
> 
> 时间：2013-04-10T08:59:12.547
> 
> 标签：android, android-edittext, android-softkeyboard, soft-keyboard

我的应用程序出现问题，用户在最小化软键盘后无法点击返回文本框。用户经常会错过拼写搜索词，并且无法单击返回编辑文本框以调出软键盘，因为它已经具有焦点（应用程序为他们提供了突出显示光标）。

有没有办法捕捉键盘隐藏事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:03:39.780

您可以使用它来捕获键盘隐藏事件

```
 @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        final int proposedheight = MeasureSpec.getSize(heightMeasureSpec);
        final int actualHeight = getHeight();

        if (actualHeight > proposedheight){
            // Keyboard is shown
        } else {
            // Keyboard is hidden
        }

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);
    } 
```

您也可以调用`requestFocus()`其他视图来从 EditText 中移除焦点。

# eclipse-plugin - 使用 Xtext 2.3 制作的插件可以部署在 Eclipse 3.7 或更早版本上吗？

> ID：15921363
> 
> 赞同：0
> 
> 时间：2013-04-10T08:59:17.690
> 
> 标签：eclipse-plugin, xtext

Xtext 2.0 与 Eclipse Indigo (3.7) 一起发布。
Xtext 2.3 随 Eclipse Juno (3.8/4.2) 一起发布。

我用 Xtext 2.3 开发了一个插件。我尝试在 3.7 上安装它，但它安装 Xtext 2.0.1 作为依赖项，然后编辑器似乎不起作用。如果我使用 Xtext 2.3 是否意味着我的客户必须使用 Juno 或更高版本，还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:48:45.827

Xtext 2.3 也可以使用更新站点[http://download.eclipse.org/modeling/tmf/xtext/updates/composite/releases/](http://download.eclipse.org/modeling/tmf/xtext/updates/composite/releases/)在 Indigo 上安装，只需在 Add new software 对话框中添加它，然后您就可以安装它。

另一方面，如果您希望您的代码与 Xtext 2.0 一起使用，那么您还必须使用 Xtext 2.0 修改（和测试）您的代码，至少您必须更新 manifest.mf 文件中的依赖项，并且还可能需要使用 Xtext 2.0 重新生成编辑器，并且可能需要修改一些您手动编写的代码。

# c++ - MI的C++虚拟表布局（多重继承）

> ID：15921372
> 
> 赞同：25
> 
> 时间：2013-04-10T09:00:08.643
> 
> 标签：c++, oop

看下面的 C++ 代码

```
class Base1 {  
public:  
    Base1();  
    virtual ~Base1();  
    virtual void speakClearly();  
    virtual Base1 *clone() const;  
protected:  
    float data_Base1;  
};  

class Base2 {  
public:  
    Base2();  
    virtual ~Base2();  
    virtual void mumble();  
    virtual Base2 *clone() const;  
protected:  
    float data_Base2;  
};  

class Derived : public Base1, public Base2 {  
public:  
    Derived();  
    virtual ~Derived();  
    virtual Derived *clone() const;  
protected:  
    float data_Derived;  
}; 
```

《C++对象模型内幕》4.2说Base1、Base2和Derived类的虚表布局是这样的： ![在此处输入图像描述](https://i.stack.imgur.com/rK5xx.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/TJ1k6.jpg)

我的问题是：

Derived类的Base1子对象的虚拟表包含`Base2::mumble`。为什么？我知道Derived类与Base1共享这个虚拟表，所以我认为Base2的功能不应该出现在这里。有人可以告诉我为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:06:14.860

好吧，首先，我要提醒大家，实现多态性的解决方案的设计是标准之外的 ABI 决策。例如，MSVC 和 Itanium ABI（其次是 gcc、clang、icc 等）有不同的实现方式。

顺便说一句，我认为这是对查找的优化。

每当您拥有一个`Derived`对象（或其后代之一）并查找该`mumble`成员时，您不需要实际找出`Base2`子对象，而是可以直接从`Base1`子对象（其地址与子对象重合`Derived`，因此不涉及算术）进行操作。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-13T13:40:47.777

在运行时当你得到：

```
 Base2 b2;
    Base1* b1_ptr = (Base1*)&b2;
    b1_ptr->mumble();    // will call Base2::mumble(), this is the reason. 
```

然后需要调用 Base2::mumble() ！注意 mumble() 是唯一在层次结构中被覆盖的虚拟方法。（甚至，您可能认为 clone() 也被覆盖，但是在类之间返回不同的类型，然后它是另一个签名）。

# c++ - 如何在构建结束时从 Visual Studio 项目生成 Qt .pri 文件？

> ID：15921380
> 
> 赞同：1
> 
> 时间：2013-04-10T09:00:26.067
> 
> 标签：c++, visual-studio-2010, qt, build

我可以在 Visual Studio 中设置我的解决方案以在构建结束时自动生成 .pri 文件吗？我想也许写一个批处理文件来调用命令来生成 .pri 文件，是否可以从命令行生成 .pri 文件？

我正在 Visual Studio 中开发一个由 9 个子项目组成的 Qt C++ 应用程序。我还使用 Qt Visual Studio 插件创建了基于 QMake 的相同应用程序的构建，以生成 .pro 和 .pri 文件。

设置运行良好，应用程序在 Windows（使用 VS2010）和 Mac OS X（Qt 创建者）上成功编译。问题是每次我在 Visual Studio 中更改项目时（例如通过添加或删除源文件），我必须手动重新生成项目的 .pri 文件，以便它被 qmake 拾取。

我正在使用 v1.1.11 中的 Qt Visual Studio 添加。视觉工作室 2010，Qt 4.7.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T20:57:18.707

我创建了一个小的 Python 脚本来从 Visual Studio .vcxproj.filter 文件生成 .pri 文件，我已将它添加到在 Visual Studio 构建结束时运行的构建后脚本中，它似乎工作得很好。如果其他人想要它，你可以在这里找到它：

[https://github.com/JamesSmaldon/prigen.git](https://github.com/JamesSmaldon/prigen.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T15:49:21.463

要知道，Visual Studio 是独立于 Qt 环境的。做你想做的事情的唯一机会是使用一些 VS 插件，但我从未在任何地方真正看到过这样的选项。

至于我，当我将一些文件添加到 VS 解决方案时，我将其手动附加到 *.pro 文件中。

# java - PreparedStatement java

> ID：15921383
> 
> 赞同：0
> 
> 时间：2013-04-10T09:00:31.543
> 
> 标签：java

我想寻找与枚举匹配的东西： Divisions:U6,U7,U8... 当我这样做时它会起作用。

```
public ArrayList<Training> zoekTrainingen(Ploegen p) throws
        ApplicationException {

    ArrayList<Training> tr = new ArrayList<>();
    Connection conn = ConnectionManager.getConnection(driver,
            dburl, login, paswoord);
    try (PreparedStatement stmt = conn.prepareStatement(
            "select * from trainingen");) {
        stmt.execute();
        ResultSet r = stmt.getResultSet();

        while (r.next()) {
        ---

        }
    } catch (SQLException sqlEx) {
        throw new ApplicationException("");
    }
    finally {
        return tr;
    }
}

    } 
```

但是当我这样做时：

```
try (PreparedStatement stmt = conn.prepareStatement(
            "select * from trainingen where Divsion = ?");) {
            stmt.setString(1, p.getDivision()); 
```

我什么都得不到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:03:17.097

该代码正在尝试`String`使用`Enum`. 它应该获取`String`Enum 的值并传递给`setString`方法。

```
try (PreparedStatement stmt = conn.prepareStatement(
            "select * from trainingen where Divsion = ?");) {
            stmt.setString(1, p.getDivision().toString()); 
```

# php - PHP图像转换没有做我期望它做的事情

> ID：15921385
> 
> 赞同：1
> 
> 时间：2013-04-10T09:00:33.390
> 
> 标签：php, image, syntax, gd, rgb

以下 php 代码块应该[将此图像](http://quicksnaildesign.com/input.png)作为输入并生成[此图像](http://quicksnaildesign.com/output.png)作为输出（将黑色转换为黄色，将浅蓝色转换为黑色）：

但是，我[将此图像](http://quicksnaildesign.com/error.png)作为输出。

任何人都可以看到我的代码的问题吗？

```
$im = imagecreatefrompng("./input.png");
$width = imagesx($im);
$height = imagesy($im);
$new = imagecreate($width, $height);
imagecopy($new, $im, 0, 0, 0, 0, $width, $height);
imagecolorset($new, imagecolorexact($new, 0, 0, 0), 255, 255, 0);

for($i = 0; $i < $width; $i++) {
    for($j = 0; $j < $height; $j++) {
        $index = imagecolorat($new, $i, $j);
        $rgb = imagecolorsforindex($new, $index);
        if($rgb['red'] != 255 && $rgb['green'] != 255 && $rgb['blue'] != 0) {
            echo '(' . $i . ', ' . $j . ')' . 'color => (' . (255 - $rgb['blue']) . ', ' . (255 - $rgb['blue']) . ', 0)<br />';
            $color = imagecolorallocate($new, 255 - $rgb['blue'], 255 - $rgb['blue'], 0);
            imagesetpixel($new,  $i, $j, $color);
        }
        unset($index);
        unset($rgb);
    }
}
imagepng($new, 'tesst.png');
imagedestroy($im);
imagedestroy($new); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:04:51.107

我相信这里问题的根源在于，当使用基于调色板的图像时，例如您通过调用创建的图像，`imagecreate()`可以在调色板中的多个索引处声明相同的颜色。

这意味着，因为您`imagecolorallocate()`在每次迭代时都在调用，所以调色板最终会变满并`imagecolorallocate()`开始返回（如果您在调用之前`false`可以看到这一点）。转换为整数时计算为零 - 因此当调色板填满时，所有剩余像素都有效地转换为背景颜色。`var_dump($color);``imagesetpixel()``false`

对此您可以做两件事，第一件事可能也是最简单的就是使用真彩色图像，这只是更改`imagecreate($width, $height);`为`imagecreatetruecolor($width, $height);`.

如果您想坚持使用基于调色板的图像（例如，出于输出图像数据大小的原因 - 对于包含如此少颜色的图像，基于调色板的图像会小得多），您将需要手动缓存分配的颜色所以你可以重复使用它们，像这样：

```
// ...

$colors = array();

for ($x = 0; $x < $width; $x++) { // iterate x axis
    for ($y = 0; $y < $height; $y++) { // iterate y axis
        // Get the color at this index
        $index = imagecolorat($new, $x, $y);

        // Only allocate a new color if not already done
        if (!isset($colors[$index])) {
            $rgb = imagecolorsforindex($new, $index);
            if ($rgb['red'] != 255 || $rgb['green'] != 255 || $rgb['blue'] != 0) {
                // If it's not the background color allocate a new color
                $r = $g = 255 - $rgb['blue'];
                $b = 0;

                $colors[$index] = imagecolorallocate($new, $r, $g, $b);
            } else {
                // Otherwise set the index to false, we can ignore it
                $colors[$index] = false;
            }
        }

        // If there's something to do, do it
        if ($colors[$index] !== false) {
            imagesetpixel($new, $x, $y, $colors[$index]);
        }
    }
}

// ... 
```

您可能还希望跟踪图像中使用的颜色，以便之后可以“清理调色板”（即，取消分配图像中不再使用的任何颜色，这将进一步有助于减少数据大小）。尽管可以说最好从一个干净的调色板开始并检查旧图像资源以获取像素细节，而不是将原始图像复制到新图像资源中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:10:29.523

是的，你的

```
$color = imagecolorallocate($new, 255 - $rgb['blue'], 255 - $rgb['blue'], 0); 
```

把一切都搞砸了。。

如果您想要相同的输出...只需将行粘贴到 for 循环之外，如果您想要特定图像，这将解决您的问题：

```
$color = imagecolorallocate($new, 35, 35, 0); //got from debugging 
```

它会得到你想要的输出。

丁斯

# android - 如何让我的活动不停止工作

> ID：15921386
> 
> 赞同：0
> 
> 时间：2013-04-10T09:00:35.037
> 
> 标签：android

```
import android.app.Activity;

public class LocationTracking extends Activity {

    Button btnShowLocation;
    Button refresh;

    GPSTracker gps;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_location_tracking);

        btnShowLocation = (Button) findViewById(R.id.btnShowLocation);
        refresh = (Button) findViewById(R.id.refresh);

        // show location button click event
        btnShowLocation.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {        
                // create class object
                gps = new GPSTracker(LocationTracking.this);

                // check if GPS enabled     
                if(gps.canGetLocation()){

                    double latitude = gps.getLatitude();
                    double longitude = gps.getLongitude();

                    // \n is for new line

                      ((TextView)findViewById(R.id.latitude)).setText(Double.toString(latitude));
                      ((TextView)findViewById(R.id.longitude)).setText(Double.toString(longitude));

                }else{
                    // can't get location
                    // GPS or Network is not enabled
                    // Ask user to enable GPS/network in settings
                    gps.showSettingsAlert();
                }

            }
        });
        refresh.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                ((TextView)findViewById(R.id.latitude)).setText("");
                ((TextView)findViewById(R.id.longitude)).setText("");
            }
        });
        }
   }

import android.app.AlertDialog;
import android.app.Service;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;
import android.util.Log;

public class GPSTracker extends Service implements LocationListener {

    private final Context mContext;

    // flag for GPS status
    boolean isGPSEnabled = false;

    // flag for network status
    boolean isNetworkEnabled = false;

    // flag for GPS status
    boolean canGetLocation = false;

    Location location; // location
    double latitude; // latitude
    double longitude; // longitude

    // The minimum distance to change Updates in meters
    private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

    // The minimum time between updates in milliseconds
    private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

    // Declaring a Location Manager
    protected LocationManager locationManager;

    public GPSTracker(Context context) {
        this.mContext = context;
        getLocation();
    }

    public Location getLocation() {
        try {
            locationManager = (LocationManager) mContext
                    .getSystemService(LOCATION_SERVICE);

            // getting GPS status
            isGPSEnabled = locationManager
                    .isProviderEnabled(LocationManager.GPS_PROVIDER);

            // getting network status
            isNetworkEnabled = locationManager
                    .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled) {
                // no network provider is enabled
            } else {
                this.canGetLocation = true;
                if (isNetworkEnabled) {
                    locationManager.requestLocationUpdates(
                            LocationManager.NETWORK_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("Network", "Network");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
                // if GPS Enabled get lat/long using GPS Services
                if (isGPSEnabled) {
                    if (location == null) {
                        locationManager.requestLocationUpdates(
                                LocationManager.GPS_PROVIDER,
                                MIN_TIME_BW_UPDATES,
                                MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                        Log.d("GPS Enabled", "GPS Enabled");
                        if (locationManager != null) {
                            location = locationManager
                                    .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                            if (location != null) {
                                latitude = location.getLatitude();
                                longitude = location.getLongitude();
                            }
                        }
                    }
                }
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return location;
    }

    /**
     * Stop using GPS listener
     * Calling this function will stop using GPS in your app
     * */
    public void stopUsingGPS(){
        if(locationManager != null){
            locationManager.removeUpdates(GPSTracker.this);
        }       
    }

    /**
     * Function to get latitude
     * */
    public double getLatitude(){
        if(location != null){
            latitude = location.getLatitude();
        }

        // return latitude
        return latitude;
    }

    /**
     * Function to get longitude
     * */
    public double getLongitude(){
        if(location != null){
            longitude = location.getLongitude();
        }

        // return longitude
        return longitude;
    }

    /**
     * Function to check GPS/wifi enabled
     * @return boolean
     * */
    public boolean canGetLocation() {
        return this.canGetLocation;
    }

    /**
     * Function to show settings alert dialog
     * On pressing Settings button will lauch Settings Options
     * */
    public void showSettingsAlert(){
        AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

        // Setting Dialog Title
        alertDialog.setTitle("GPS is settings");

        // Setting Dialog Message
        alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

        // On pressing Settings button
        alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                mContext.startActivity(intent);
            }
        });

        // on pressing cancel button
        alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
            }
        });

        // Showing Alert Message
        alertDialog.show();
    }

    @Override
    public void onLocationChanged(Location location) {
    }

    @Override
    public void onProviderDisabled(String provider) {
    }

    @Override
    public void onProviderEnabled(String provider) {
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

} 
```

我在网上发现了这个 gps 跟踪活动，我已经尝试过了，它工作得很好，但后来我遇到了一个问题。当我开始一个新的活动时，它停止运行我想要做的是即使我开始它也不会停止我的新活动示例，如果有人打电话或发短信，gps 跟踪仍将跟踪我的位置，我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:21:57.057

`onchangeLocation()`使用此代码，在方法中注册 LocationManager 。

```
public class NewLocationListener implements android.location.LocationListener {

    private final static String TAG = "LocationListener";
    private Context context = null;
    private LocationManager locationManager = null;

    private double latitude = 0.0;
    private double longitude = 0.0;
    /*public String newlatitude=null;
    public String newlongitude=null;*/
    private Location gpslocation=null;

    public void setDefault() {
        Log.v(TAG + ".setDefault", "GPS Co-ordinates initialised");

        latitude = 0.0;
        longitude = 0.0;

    }

    public NewLocationListener(Context ctx) {
        Log.v(TAG + ".LocationListener", "LocationListener constructor called");
        context = ctx;
        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

    }

    public void onProviderDisabled(String provider) {
        Log.v(TAG + ".onProviderDisabled", "onProviderDisabled method called");

    }

    public void onProviderEnabled(String provider) {
        Log.v(TAG + ".onProviderEnabled", "onProviderEnabled method called");

    }

    public void onLocationChanged(Location location) {

        gpslocation=location;
        Log.v(TAG + ".onLocationChanged", "onLocationChanged method called");
        //Toast.makeText(context, "onLocationChanged called", Toast.LENGTH_SHORT).show();

        locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

        if (gpslocation != null) {
            setLocationCoordinates(gpslocation);

        } else {
            Log.v(TAG + ".onLocationChanged", "couldn't get gps using onLocationChange");

            getLastKnownLocation();

        }

    }

    public void setLocationCoordinates(Location location) {
        try {

            double latNew = (location.getLatitude());
            double lonNew = (location.getLongitude());

            if (latNew != 0.0 && lonNew != 0.0) {

                Log.v(TAG + ".onLocationChanged", "New location co-ordinates are not 0");

            /*  setLatitude(latNew);
                setLongitude(lonNew);*/
                /*
                 * latitude = latNew; longitude = lonNew;
                 */

                String newlatitude=Double.toString(latNew);
                String newlongitude=Double.toString(lonNew);

                Log.v(TAG, "new latitude is" + newlatitude+" new longitude is" + newlongitude);
                //Toast.makeText(context, "lat: " + newlatitude+" lon: " + newlongitude, Toast.LENGTH_SHORT).show();

            } else {

                //Toast.makeText(context, "we got 0.0 value ", Toast.LENGTH_SHORT).show();
                Log.v(TAG + ".onLocationChanged", "we got 0.0 value ");
            }

        } catch (Exception e) {
            Log.v(TAG + ".onLocationChanged.Exception", "Exception is " + e);

        }
    }

    public void getLastKnownLocation() {
        Location location = locationManager.getLastKnownLocation(getBestProvider());

        gpslocation=location;
        if (gpslocation != null) {
            //Toast.makeText(context, "LastKnownLocation called", Toast.LENGTH_SHORT).show();
            setLocationCoordinates(gpslocation);

        } else {
            //Toast.makeText(context, "couldn't get LastKnownLocation", Toast.LENGTH_SHORT).show();
            Log.v(TAG + ".onLocationChanged","couldn't get gps using lastKnownLocation");
        }
    }

    public String getBestProvider() {
         locationManager = (LocationManager)context.getSystemService(Context.LOCATION_SERVICE);
         Criteria criteria = new Criteria();
         criteria.setPowerRequirement(Criteria.NO_REQUIREMENT);
         criteria.setAccuracy(Criteria.NO_REQUIREMENT);
         String bestProvider = locationManager.getBestProvider(criteria, true);

        return bestProvider;
    }

    public void onStatusChanged(String provider, int status, Bundle extras) {
        Log.v(TAG + ".onStatusChanged", "onStatusChanged method called");

    }

    public double getLatitude() {

        if (gpslocation != null) {
            latitude = gpslocation.getLatitude();
        }   
        return latitude;
    }   
    public double getLongitude() {

        if (gpslocation != null) {
            longitude = gpslocation.getLongitude();
        }   
        return longitude;
    } 
```

# python - virtualenv : 已安装的包在环境之外不可用

> ID：15921389
> 
> 赞同：-2
> 
> 时间：2013-04-10T09:00:44.387
> 
> 标签：python

我有 2 个版本的 python 2.7 和 3.3。我安装了 virtualenv，希望我可以使用两个不同的 python 版本。

我创建了我的第一个项目环境：

```
/usr/local/bin/virtualenv -p /usr/local/bin/python2.7 first 
```

并安装了仅适用于该环境的 pymysql 包。

现在我希望相同的包在全球范围内可用 - 我该怎么做？

当我在没有设置环境的情况下运行 pip install 时，它实际上安装在 3.3 版本的站点包中，由于它与 2.7 兼容，最终会失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:02:35.503

要使软件包在全球范围内可用，您必须在全球范围内安装它们。`virtualenv`专门用于进行单独的软件包安装。它不提供任何其他功能，所以我不知道您为什么要使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:53:06.550

你不需要使用 virtualenv 来安装两个 Python 版本。事实上，virtualenv 根本没有帮助。Virtualenv 是安装多个*相同*Python 版本的安装。

因此，要安装两个不同版本的 Python，您只需安装两个不同版本的 Python。就是这么简单。

[http://regebro.wordpress.com/2011/02/02/newbie-hint-on-installing-python-and-its-modules-and-packages/](http://regebro.wordpress.com/2011/02/02/newbie-hint-on-installing-python-and-its-modules-and-packages/)

# c# - 实体错误：由于对象的当前状态，操作无效

> ID：15921396
> 
> 赞同：0
> 
> 时间：2013-04-10T09:00:57.443
> 
> 标签：c#, model-view-controller, entity

我不可能将实体添加到我的解决方案中。我不断收到错误消息“***由于对象的当前状态，操作无效。*** ”即使在相同解决方案下的新项目或使用空 EDMX 的新项目中，我也会收到错误消息。有人知道导致错误的原因吗？

谢谢

# java - JNI 一些方法抛出 UnsatisfiedLinkError

> ID：15921397
> 
> 赞同：0
> 
> 时间：2013-04-10T09:00:58.617
> 
> 标签：java, java-native-interface

你有没有遇到过这样的事情？我有一个来自公司的 JNI 类和 dll，形成了一些硬件编程，我用它来开发硬件的应用程序接口。我测试部署应用程序，然后从某些方法中得到 UnsatisfiedLinkError。从本质上讲，该应用程序只工作了一半。从 JNI 类调用的某些方法可以正常工作，而其他方法则不能。但请记住，该 dll 可能会链接到其他 dll，因为设置硬件需要其他几个 dll，但只有一个需要 loadlibrary()。UnsatisfiedLinkError 可能来自哪里的任何想法？

# highcharts - Highcharts 3 不能在一个系列中渲染超过 1000 个点

> ID：15921399
> 
> 赞同：29
> 
> 时间：2013-04-10T09:01:02.383
> 
> 标签：highcharts

将 Highcharts 2.1.9 升级到 3.0.0 后，我们发现在一个系列中渲染超过 1000 个点似乎是不可能的。

如果您将 1000 个点添加到一个系列中，它会呈现正常。

如果将 1001 个点添加到系列中，则它根本不会渲染。如果您之后查询该系列，则该系列上的“数据”数组为空。

但是，您可以使用 1000 个点渲染多个系列 - 因此每个图表的总点数似乎没有限制。

这是一个说明这一点的 jsFiddle：http: [//jsfiddle.net/YWVHx/47/](http://jsfiddle.net/YWVHx/47/)

```
$(function () {

    var series1Data = [];
    for (var i = 0; i < 1000; i++) {
        series1Data.push({
            x: (new Date()).getTime() + i * 10000,
            y: Math.random() * 100
        });
    }

    var series2Data = [];
        // If you change this back to 1000 the series gets rendered
        for (var i = 0; i < 1001; i++) { 
            series2Data.push({
                x: (new Date()).getTime() + i * 10000,
                y: Math.random() * 100 + 100
            });
    }

    $('#container').highcharts({
        chart: {
            type: 'line'
        },
        title: {
            text: 'Foo'
        },
        xAxis: {
            type: 'datetime'
        },
        yAxis: {
            title: {
            text: null
            }
        },
        tooltip: {
            crosshairs: true,
            shared: true,
            valueSuffix: '°C'
        },
        legend: {
            enabled: true
        },
        series: [{
            name: '1000 Points - I work ;-)',
            data: series1Data
        }, {
            name: '1001 Points - I dont work :-(',
            data: series2Data
        }]
    });
}); 
```

这是故意施加的限制还是 v3 的问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-10T09:30:29.783

你应该设置更大的涡轮阈值：http: [//api.highcharts.com/highcharts#plotOptions.series.turboThreshold](http://api.highcharts.com/highcharts#plotOptions.series.turboThreshold)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-13T03:58:40.810

为了其他用户的方便，这是一个可以复制和粘贴的补充示例：

```
 plotOptions:{
            series:{
                turboThreshold:5000//set it to a larger threshold, it is by default to 1000
            }
        } 
```

检查[http://jsfiddle.net/YWVHx/339/](http://jsfiddle.net/YWVHx/339/)这里的结果

# c# - 转换列表 列出 >

> ID：15921404
> 
> 赞同：5
> 
> 时间：2013-04-10T09:01:09.647
> 
> 标签：c#, .net, list, collections

我`List<int>`可以 `List<List<int>>`在c#中转换吗？当我使用这种结构时

```
List<int>element=new List<int>();
List<List<int>>superElement= new List<List<int>>(element); 
```

我有错，但我可以用另一种方式做到这一点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T09:02:54.667

你可以这样做：

```
List<List<int>> superElement = new List<List<int>>();
superElement.Add(element); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T09:02:31.767

```
List<int>element=new List<int>();
List<List<int>>superElement= new List<List<int>> { element }; 
```

那会奏效的。您不能在构造函数中传递列表。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-10T09:02:31.953

尝试这个 ：

```
var element = new List<int>();
var superElement = new List< List<int> >(){ element }; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-10T09:03:43.757

是的。您可以使用集合初始化程序

```
List<int> element = new List<int>();
List<List<int>> superElement = new List<List<int>> { element }; 
```

[http://msdn.microsoft.com/en-gb/library/vstudio/bb384062.aspx](http://msdn.microsoft.com/en-gb/library/vstudio/bb384062.aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-10T09:03:39.077

如果您只想初始化列表，那么

```
List<List<int>>superElement= new List<List<int>>(); 
```

作品; 如果您希望它最初包含一个（空）元素，那么

```
List<List<int>>superElement= new List<List<int>>{element}; 
```

会做的。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-10T09:30:31.263

由于我不相信其他答案真的付出了太多努力来提供帮助，因此我将发布我认为更完整和更有用的答案。

首先，为了完整起见，我将展示如何实现实际尝试完成的目标。要创建列表列表，您可以执行以下操作：

```
List<int> element = new List<int>();
List<List<int>> superElement = new List<List<int>>();
superElement.Add(element); 
```

但就目前而言，您为什么要这样做并没有多大意义，并且经过一些评论调查（希望它没有受到伤害）我们发现您想要将 ID 与 List 配对整数。我建议对此采取不同的方法。

就个人而言，我会创建一个类来保存我的数据，然后为这些项目创建一个列表，如下所示：

```
public class MyData
{
    public int ID {get; set;}
    public List<int> MyValues {get;set;}

    public MyData()
    {
        MyValues = new List<int>();
    }
} 
```

然后你可以这样做：

```
List<int> element = new List<int>();
MyData data = new MyData();
data.ID = 1;
data.MyValues = element;

List<MyData> superElement = new List<MyData>();
superElement.Add(data); 
```

这将允许像这样查询：

```
MyData data1 = superElement.SingleOrDeafult(x => x.ID == 1);
List<int> element = data1.MyValues; 
```

假设您有可用的 Linq。

* * *

另一种方法可能是使用字典，如下所示：

```
Dictionary<int, List<int>> superElement = new Dictionary<int, List<int>>();
superElement.Add(1, element); 
```

ID在哪里`1`，您可以像这样调用它：

```
List<int> element = superElement[1]; 
```

# iphone - 为什么 EKEventEditViewController 需要约 3 秒才能加载

> ID：15921405
> 
> 赞同：0
> 
> 时间：2013-04-10T09:01:09.583
> 
> 标签：iphone, ios, performance, delay, eventkit

我有一个`EKEventEditViewController`我初始化并像这样呈现的：

```
EKEventEditViewController *addController = [[[EKEventEditViewController alloc] initWithNibName: nil bundle: nil] autorelease];

[self presentModalViewController: addController animated: NO]; 
```

我注意到在装有 iOS 6.1.3 的 iPhone 5 上，modalView 出现大约需要 3 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T15:24:56.417

确保从主胎面调用它

# html - 舍入宽度又名均匀分布 div

> ID：15921406
> 
> 赞同：2
> 
> 时间：2013-04-10T09:01:10.290
> 
> 标签：html, css

我正在努力在可调整大小的 div 中均匀地分布五个 div。我看过[如何均匀地（水平地）分布元素？](https://stackoverflow.com/questions/4108726/how-to-spread-html-evenly-over-a-line)但不能让它工作:-(

问题似乎是即使我的 div 宽度设置为 20%，如果周围的 div 宽度不能被 5 整除，最后一个元素也会被包裹到下一行。

我的CSS是这个

```
#exposureSummaryContainer > div { width: 20%;display: inline-block;} 
```

和我的html：

```
<div id="exposureSummaryContainer">
    <div>1.000.000</div>
    <div>1.000.000</div>
    <div>1.000.000</div>
    <div>1.000.000</div>
    <div>1.000.000</div>
</div> 
```

如何确保所有五个元素保持在同一行？

我做了这个[http://jsfiddle.net/GTwFb/](http://jsfiddle.net/GTwFb/)来说明我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:03:50.413

添加`float:left;`

```
#exposureSummaryContainer > div { width: 20%;display: inline-block; float:left; background:red} 
```

**[演示](http://jsfiddle.net/GTwFb/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:06:23.927

有一个你看不到的空格，如果你删除它，

<`div id="exposureSummaryContainer"><div>1.000.000</div><div>1.000.000</div><div>1.000.000</div><div>1.000.000</div><div>1.000.000</div></div>`

它会起作用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:14:50.493

好吧，我会给你桌子的把戏：

```
<table style="width:whateveryouwant">
<tr>
<td style="width:20%"><div>1.000.000</div></td>
<td style="width:20%"><div>1.000.000</div></td>
<td style="width:20%"><div>1.000.000</div></td>
<td style="width:20%"><div>1.000.000</div></td>
<td style="width:20%"><div>1.000.000</div></td>
</tr>
</table> 
```

这一直对我有用^_^

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:05:55.507

这可能不是最好看的方式..但它的工作原理

```
#exposureSummaryContainer { width: 100%; display: table; }
#exposureSummaryContainer > div { width: 20%;display: table-cell;} 
```

您可以将其编辑`width`为特定大小

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:06:52.783

问题是当 div 元素的显示为 时，标记上的物理空间`inline-block`，因此解决方法如下：

```
#exposureSummaryContainer {
    white-space: nowrap;
    word-spacing: -3px;
    letter-spacing: -3px;
}

#exposureSummaryContainer > div { 
    width: 20%;
    display: inline-block;
    white-space: normal;
    word-spacing: normal;
    letter-spacing: normal;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T09:09:01.500

我会使用该`float: left;`物业

这对我有用：http: [//jsfiddle.net/GTwFb/2/](http://jsfiddle.net/GTwFb/2/)

# java - 不支持 Applet 的归档属性？

> ID：15921415
> 
> 赞同：0
> 
> 时间：2013-04-10T09:01:47.540
> 
> 标签：java, html, applet

在调查一些 404 统计时，我发现了对直接 jar 类的请求。

我只以 .jar 文件的形式交付我的所有小程序。

> 请注意，某些浏览器不支持 ARCHIVE 属性，因此所有必要的文件也应该在未归档的情况下可用。 [>> 来源](http://www.htmlhelp.com/reference/html40/special/applet.html)

我的 awstats 说有些课程要求未归档。

谁能告诉我哪些浏览器不支持存档属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:24:27.553

众所周知，您的消息来源不可靠。忽略信息。

当然，该`applet`元素在 HTML 4.01 中已被弃用，现在最好使用[Deployment Toolkit 脚本](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/deployment_advice.html#deplToolkit)编写最适合浏览器的任何元素。

至于查找松散的类文件，请指定[`codebase-lookup`](http://docs.oracle.com/javase/6/docs/technotes/guides/plugin/developer_guide/special_attributes.html#specialattributes)as`false`以将搜索限制为档案。

# java - 创建自己的词性标注器

> ID：15921417
> 
> 赞同：6
> 
> 时间：2013-04-10T09:01:50.557
> 
> 标签：java, python, c, nlp, stanford-nlp

我发现[Stanford POS Tagger](http://nlp.stanford.edu/software/tagger.shtml)相当不错，但不知何故我发现自己需要创建自己的 POS 标记器。

在过去的两周里，我到处闲逛，是否从解析树开始，或者一旦我们有了一个 pos 标记器就可以解析树，使用丑陋的 CFG 和 NFA，以便它们可以帮助我创建一个 POS 标记器什么不是。

我在这里结束这个问题，询问前辈，从哪里开始 POS 标记。（选择的语言是 Python，但 C 和 JAVA 不会受到伤害）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-13T01:24:19.987

这取决于你的最终目标是什么。

**如果目标是执行语法分析，**即确定主语、谓词、它的参数、它的修饰符等，然后甚至可能执行语义分析，那么你不应该担心词性标注器。相反，您应该首先查看用于句法分析的各种方法 - 特别是基于短语结构的方法、概率方法和有限状态方法 - 并确定您想要使用的工具。该决定将取决于您的速度和准确性要求，您将有多少时间进行长期改进和维护，以及其他因素。一旦您为此决定了正确的工具（或实施策略），您可能最终不再需要标记器。原因是许多语法分析策略从根本上不需要标注器：它们只执行字典查找，它为每个单词返回，一个或多个可能的 POS 标签；消歧（即决定哪些标签实际上是正确的）由语法分析器隐式执行。*一些*语法分析器可能希望您在查找字典后应用 POS 标记器，但它们也会告诉您使用哪一个，因此您的问题的答案会很自然地遵循。

**另一方面，如果您的目标不需要完整的语法分析，**而只需要词性标记，我建议您在决定自己制作之前先查看现有的替代方案。可能的选择包括但不限于：

*   [斯坦福塔格](http://nlp.stanford.edu/software/tagger.shtml)
*   [木槌简单标记器](http://mallet.cs.umass.edu/sequences.php)
*   [ANNIE 标注器](http://gate.ac.uk/sale/tao/splitch6.html#chap%3aannie)（这是一个嵌入到更大 NLP 框架中的 Brill 风格标注器）
*   [树标记器](http://www.ims.uni-stuttgart.de/forschung/ressourcen/werkzeuge/treetagger.html)
*   [布里尔标记器](http://en.wikipedia.org/wiki/Brill_tagger)
*   [塞纳标记器](http://ml.nec-labs.com/senna/)

哪一个适合您的需求取决于许多因素，不一定按此优先顺序：

1.  **不透明性：**您是否打算进行更正以改进结果，可能通过维护例外列表和更正后规则，可能在很长一段时间内？在这种情况下，您可能需要一个标记器，它不仅是开源的，而且使用一种方法，可以手动修改它使用的消歧策略。这在基于规则或 TBL 的标注器（如 Brill 标注器）中更容易，在某种程度上基于决策树学习的标注器（如 TreeTagger）；在基于 Hidden-Markov-Model (HMM) 的标注器和基于条件随机场 (CRF) 的标注器（例如 Mallet Simple Tagger）中，它更加困难并且可能性更加有限，并且非常困难（纯后校正例外除外列表）在基于神经网络（如 SENNA）的标记器中。

2.  **目标语言：**您是否只需要英语或其他语言？TreeTagger 对许多欧洲语言提供了开箱即用的支持，但上面列表中的其他语言不支持。添加对语言的支持总是需要字典，通常需要带注释的训练语料库（这可能很昂贵），并且有时需要您编写或修改数百个初始规则（例如，如果 Brill-tagger 方法是用过的）。

3.  **框架和编程语言：** Mallet 和 Stanford 用于 Java，TreeTagger 是 C 语言（但不是开源的；有 Python 和 Java 包装器，但它们可能会导致显着减速和其他问题^((‡))），SENNA 是在 C 和开源中，ANNIE 是在 Java 中并为 GATE 框架制作的，等等。这些标记器所需的环境存在差异，将它们移出自然栖息地可能会很痛苦。NLTK (Python) 对其中一些有包装器，但它们通常不涉及将源代码实际嵌入到 Python 中；相反，他们只是对您要标记的每条文本执行系统调用。这具有严重的性能影响。

4.  **速度：**如果你每秒只处理几句话，任何标注器都可以处理。但是，如果您正在处理 TB 级数据或需要应对使用中的极端峰值，则需要执行正确类型的压力测试作为评估和决策的一部分。我从个人经验中知道，TreeTagger 和 SENNA 非常快，Stanford 比较慢，而 NLTK-wrappers 通常要慢几个数量级。无论如何，您需要进行测试。请注意，POS 标记可以通过将输入划分为多个分区并并行运行多个标记过程以直接的方式进行并行化。内存占用通常不是标记器本身的问题（但如果标记器是完全加载到内存中的通用 NLP 框架的一部分，则可能会出现问题）。

最后，如果现有的标注器都不能满足您的需求，而您真的决定创建自己的标注器，您仍然需要做出与上述类似的决定：正确的方法取决于准确性、速度、维护和多语言相关因素。POS 标记的主要方法在上面的示例列表中得到了很好的体现，即 Rule/TBL-style (Brill)、HMM/CRF (Mallet)、entropy-based (Stanford)、决策树学习 (TreeTagger)、神经网络（SENNA）。即使您决定自己制作，最好研究一些现有的，以了解它们的运作方式以及问题所在。

作为多语言的最后一句话：像上面这样的经典 POS 标记器要求您在应用标记器之前对输入进行标记（或者它们隐式地执行简单的标记化）。这不适用于无法使用标点符号和空格作为标记边界的语言，即中文、日文、泰文，在某种程度上是韩文和其他一些语言。对于这些，您需要使用专门的分词器，这些分词器通常在一个步骤中执行分词*和*POS 标记。

* * *

^((‡))我不了解[Java 包装器](https://code.google.com/p/tt4j/)，但我上次检查时（大约 1 年前） [Python 包装器](http://perso.limsi.fr/pointal/dev%3atreetaggerwrapper)有几个问题：它只适用于 Python 2，它以相当复杂的方式使用系统调用，这是确保 Tree Tagger 在处理每个输入后刷新其缓冲区所必需的。后者有两个后果：处理速度比直接使用 Tree Tagger 时要慢，并且某些语言不能使用完整的命令行工具管道，因为缓冲区刷新太复杂了。

# sonarqube - 迁移到新的 2.0 ant 任务声纳时缺少强制属性

> ID：15921418
> 
> 赞同：0
> 
> 时间：2013-04-10T09:01:56.750
> 
> 标签：sonarqube

我在 Sonar 中定义了一个多模块项目（包含**许多**子模块），它运行良好，直到我将声纳升级到较新版本。

我之前的设置是：

1.  一个包含所有通用项目属性（如 jdbc 连接等）的单亲`build.xml`。它还包含`<sonar:sonar />`运行 Sonar 的任务。这个父项目不包含任何源/二进制文件，只是构建子模块的指令。
2.  许多`build.xml`仅包含子模块特定属性的子模块文件，例如`sonar.projectKey`，`sonar.sources`和`sonar.binaries`

现在在新的 Sonar ant 任务中，我需要在 parent 中定义所有内容`buid.xml`。我已经通过以下方式定义了它（我在这里只展示了一个子模块，我假设如果我以后添加更多模块它应该工作相同）：

```
<target name="sonar">
  <taskdef uri="antlib:org.sonar.ant" resource="org/sonar/ant/antlib.xml">
    <classpath path="build-utils/lib/sonar-ant-task-2.0.jar" />
  </taskdef>
  <!-- list of Sonar database related properties -->
  <property name="sonar.jdbc.url" value="jdbc:oracle:thin:@localhost/DB11g" />
  <property name="sonar.jdbc.driverClassName" value="oracle.jdbc.driver.OracleDriver" />
  <!-- for security reasons, pass these parameters from outside -->
  <property name="sonar.jdbc.username" value="" />
  <property name="sonar.jdbc.password" value="" />
  <property name="sonar.host.url" value="http://localhost:9000" />
  <!-- list of Sonar project related properties -->
  <property name="sonar.projectName" value="My Project" />
  <property name="sonar.projectKey" value="com.my.project" />
  <property name="sonar.projectVersion" value="7.3" />
  <property name="sonar.language" value="java" />
  <property name="sonar.libraries" value="server/third-party-jars"/>

  <property name="sonar.modules" value="admin-api" />
  <!-- all of the sub-modules -->
  <property name="admin-api.sonar.projectName" value="admin-api" />
  <property name="admin-api.sonar.projectBaseDir" location="server/admin/admin-api"/>
  <property name="admin-api.sonar.sources" value="src" />
  <property name="admin-api.sonar.binaries" value="build" />
  <sonar:sonar xmlns:sonar="antlib:org.sonar.ant" />
</target> 
```

当我运行目标时，出现以下错误：

```
You must define the following mandatory properties for 'com.orca.rightv': sonar.sources 
```

另一个问题，有没有办法`build.xml`像我在以前的版本中那样保留每个模块中子模块的具体定义？那会为我节省很多工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:45:30.823

当前版本的 Ant Task 存在一个 bug，与嵌入的 Sonar Runner API 的版本有关。这将在下一个版本中修复：http: [//jira.codehaus.org/browse/SONARPLUGINS-2818](http://jira.codehaus.org/browse/SONARPLUGINS-2818)

同时，您可以在顶部定义“sonar.sources”，它的值将被继承到模块中（显然您仍然可以在模块中覆盖它）。

至于模块级别的属性定义，您可以在放在模块根目录的“sonar-project.properties”文件中定义这些属性，例如：

```
sonar.projectName=My Project
# following needed only to override the values defined in top build.xml
sonar.sources=src
sonar.binaries=build 
```

，然后将“admin-api.sonar.projectBaseDir”属性（就像您所做的那样）留在顶部的 build.xml 文件中。

# updatepanel - asp.net 更新面板

> ID：15921419
> 
> 赞同：0
> 
> 时间：2013-04-10T09:01:56.970
> 
> 标签：updatepanel, modalpopupextender, scriptmanager

我在模态弹出扩展器中有更新面板，并且在母版页中有脚本管理器，但是当我运行网站时，出现以下错误：[InvalidOperationException：ID 为“udpOutterUpdatePanel”的控件需要 S

```
criptManager on the page. The ScriptManager must appear before any controls that need it.]
   System.Web.UI.UpdatePanel.get_ScriptManager() +303
   System.Web.UI.UpdatePanel.RegisterPanel() +170
   System.Web.UI.UpdatePanel.RegisterPanel() +132
   System.Web.UI.UpdatePanel.OnInit(EventArgs e) +53
   System.Web.UI.Control.InitRecursive(Control namingContainer) +605
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Control.InitRecursive(Control namingContainer) +323
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2241 
```

当我在我的页面中添加 scriptmanager 时，它给出的错误是“只允许一个实例”。请帮我解决这个问题。我正在使用 Windows 7，vs2010

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:16:10.923

您还可以在内容页面中添加**ScriptManagerProxy**，当父元素中已经定义了 ScriptManager 控件时，这使得内容页面等嵌套组件能够将脚本添加到页面中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:08:04.087

您确定您的“模式弹出扩展器”使用“ContentPlaceHolderID”链接到母版页，其中包含母版页中的“ScriptManager”吗？以便它可以加载“ScriptManager”！

```
<%@ ... MasterPageFile="~/MasterFile.master" .... %>

<asp:Content ID="myContent" ContentPlaceHolderID="ContentScriptManager" Runat="Server">
</asp:Content> 
```

# javascript - 滚动时使导航栏保持位置

> ID：15921424
> 
> 赞同：1
> 
> 时间：2013-04-10T09:02:15.480
> 
> 标签：javascript, html, css

我知道以前有人问过这个问题，但我很确定在检查它们之后，没有一个导航栏是这样建造的。

在滚动过去其原始位置后，我基本上无法将导航栏“无缝”切换到屏幕顶部的固定位置，然后再返回。

我已经包含了代码，这里有一个例子：http: [//jsfiddle.net/r2a6U/](http://jsfiddle.net/r2a6U/)

这是使 div 切换到固定位置模式的实际功能：

```
var navPos = $('#navContainer').offset().top;

$(window).scroll(function(){

  var fixIT = $(this).scrollTop() >= navPos;

  var setPos = fixIT ? 'fixed' : 'relative' ;
  var setTop = fixIT ? '0' : '600' ;

  $('#navContainer').css({position: setPos});
  $('#navContainer').css({'top': setTop});

}); 
```

任何帮助将非常感激。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:08:57.100

您可以解决问题以删除样式，而不是将它们设置为`relative`and `600px`。我建议您在 JavaScript 中添加/删除一个类，然后应用固定的 CSS。你最终会得到更好更干净的 JavaScript。

还要确保`#navContainer`在固定后正确居中。

[jsFiddle](http://jsfiddle.net/Tyriar/RKzVD/1/)

**CSS**

```
#navContainer.fixIT {
    position:fixed;
    top:0;

    /* these will ensure it is centered so it doesn't jump to the side*/
    left:0;
    right:0;
    text-align:center;
} 
```

**JS**

```
var navPos = $('#navContainer').offset().top;
$(window).scroll(function(){
    var fixIT = $(this).scrollTop() >= navPos;

    if (fixIT)
        $('#navContainer').addClass('fixIT');
    else
        $('#navContainer').removeClass('fixIT');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:17:01.607

在这里修复它：[jsFiddle](http://jsfiddle.net/r2a6U/1/)

只有一个小脚本更新：

> var navPos = $('#navContainer').offset().top;
> 
> $(window).scroll(function(){ var navContainer = $('#navContainer');
> 
> ```
>  if( $(this).scrollTop() >= navPos ) {
>         // make it fixed to the top
>         $('#navContainer').css({ 'position': 'fixed', 'top': 0 });
>     } else {
>         // restore to orignal position
>         $('#navContainer').css({ 'position': 'relative', 'top': 600 });
>     }
> }); 
> ```

# c# - Webclient 总是返回登录页面

> ID：15921428
> 
> 赞同：0
> 
> 时间：2013-04-10T09:02:22.003
> 
> 标签：c#, asp.net, login, webclient

我正在使用 Webclient 来获取响应文本：

```
 String strPathAndQuery = HttpContext.Current.Request.Url.PathAndQuery;
  String strUrl = HttpContext.Current.Request.Url.AbsoluteUri.Replace(strPathAndQuery, "/");

  WebClient client = new WebClient();
  myresponse = client.DownloadString(strUrl + "/handles/x.ashx"); 
```

但是，即使我已登录，响应也是登录页面。

我怎样才能解决这个问题？

# c# - FileUpload.SaveAs 问题

> ID：15921433
> 
> 赞同：0
> 
> 时间：2013-04-10T09:02:28.370
> 
> 标签：c#, asp.net, file-upload

我正在使用文件上传控制和`.SaveAs`方法将文件保存（上传）到 FTP 服务器。但是在第一次回发后会话值丢失。不知道为什么以及任何解决此问题的方法。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (Session["TheUser"] != null)
    {
        aUser = (clsUser)Session["TheUser"];
    }
}

protected void Button1_Click(object sender, EventArgs e)
{
    if (FileUpload1.HasFile)//continue only if the file control has the file
    {
        if (Get_and_Show_FileInformation())//if the file information was retrived and loaded into the textboxes
        {
            //continue with the execution
        }
        else
        {
            //error message displyed
        }
    }
}

protected bool Get_and_Show_FileInformation()
{
   if (FileUpload1.HasFile)
    {
        string fName = FileUpload1.PostedFile.FileName;
        string extension = Path.GetExtension(fName);
        string FileName = fName.Substring(0, fName.Length - extension.Length);
        string dir = uname;
        string appPath = Server.MapPath("Uploads/") + dir;
        FileInfo MyFileInfo = new FileInfo(appPath);
        DirectoryInfo newDirectoryInfo = new DirectoryInfo(appPath);
        if (!Directory.Exists(appPath))//if user is uploading to FTP_Upload first time, create a new directory for him/her
        {
            try
            {
                FileUpload1.SaveAs(Server.MapPath("~/Uploads/" + dir + "/" + FileName));  // ERROR here, call to this .SaveAs method causes loss of session values (Session["TheUser"])
                Image2.ImageUrl = "~/Uploads/" + dir + "/" + FileName;
                return true;
            }
            catch (Exception ex)
            {
                lbl_Err.Text = "<br/>Error: Error creating and saving into your space!(Error Code:XF05)";
                return false;
            }
        }
        else
        {
            //same code but don't create the directory
        }
    }
} 
```

# asp.net - 上传到 Web 服务器时，asp.net Web 应用程序是否仍在运行？

> ID：15921444
> 
> 赞同：0
> 
> 时间：2013-04-10T09:02:42.393
> 
> 标签：asp.net, vb.net

我试图弄清楚我的应用程序在 Web 服务器中时是否仍在运行。现在我们从 Visual Studio 了解到，您可以在 localhost 上运行该应用程序并且可以停止它。

`Global.asax`情况是，在我的应用程序中，我`Application Start`定义了一个`Timer`2 分钟的位置，然后执行一个`Sub`发送电子邮件的位置。

我的问题是，如果用户请求`Main.aspx`然后`Global.asax`被启动，`Global.asax`每次用户请求时都会重新启动`Main.aspx`吗？或者它是否保持2分钟的间隔，无论`Main.aspx`是被调用还是空闲？以其他方式，根据这篇文章的标题，当用户离开 Web 应用程序时，是否`Main.aspx`按照 Visual Studio 按钮停止？`stop`如果是这样，是否`Global.asax`会受到影响或停止？

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:45:03.103

除了@GJKH 的回答：

如果您运行的是 IIS 7.5 或 8，则可以在 config 中打开 Always On 选项`applicationhost.config`。

在启动模式的应用程序池设置中的 IIS 中，将其设置为始终运行。

![在此处输入图像描述](https://i.stack.imgur.com/IygpF.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T01:46:57.790

据我所知，默认情况下，如果超过 20 分钟未访问该站点，IIS 将关闭（回收）该站点所连接的工作池。此设置可以更改，并且有一些工具可以帮助保持网站“活跃”。

global.asax 文件中 Application_Start 中的代码只会在应用程序启动并加载到池中时触发一次。访问网站上的任何页面都不会再次触发它。当池被回收并请求一个页面时，应用程序将再次启动并且 Application_start 将被触发。

我不确定您设置的计时器是否会使应用程序保持活动状态。我的猜测是不会。

**编辑：**

计时器不会让网站保持活力，这可能会有所帮助（来自[http://www.west-wind.com/weblog/posts/2007/May/10/Forcing-an-ASPNET-Application-to-stay -活着](http://www.west-wind.com/weblog/posts/2007/May/10/Forcing-an-ASPNET-Application-to-stay-alive)）

```
 public void PingServer()
    {
        try
        {
            WebClient http = new WebClient();
            string Result = http.DownloadString(App.Configuration.PingUrl);
        }
        catch (Exception ex)
        {
            string Message = ex.Message;
        }
    } 
```

并在应用程序退出调用

```
void Application_End(object sender, EventArgs e)
{

    // Force the App to be restarted immediately
    new YourClassName().PingServer();
} 
```

这种方法的问题是计时器不会准确，因为它会在池尝试回收然后重新启动时被丢弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T01:51:40.883

一般来说，在 Web 应用程序中使用计时器是个坏主意。原因是您永远不知道 IIS 何时决定回收应用程序池工作线程。此外，计时器可能是全局的，而不是特定于用户的，因此您不能使用诸如 Session 或其他用户特定数据之类的东西。

如果您需要运行一项任务，那么您应该创建一个执行该任务的 Windows 服务。

# java - Android项目中带有2个字符串的ListView / ListAdapter

> ID：15921446
> 
> 赞同：0
> 
> 时间：2013-04-10T09:02:59.770
> 
> 标签：java, android, listview

我正在开发 Android 项目。我遵循[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)的教程，但我坚持了一些事情。教程展示了如何使用带有 1 个字符串对象的类。我正在使用 2 个字符串对象。所以我改变了一些东西（将新字符串添加到我的类中，将 layout.simple_list_item_1 更改为 android.R.layout.simple_list_item_2 等）现在的问题是 - 如何制作一些东西来获取 Stoliki 类对象（覆盖 toString() 给了我只有 1 件，所以没用）。

# 斯托利基级

```
public class Stoliki {
      private long id;
      private String numer;
      private String opis;

      public long getId() {
        return id;
      }

      public void setId(long id) {
        this.id = id;
      }

      public String getNumer() {
        return numer;
      }

      public void setNumer(String numer) {
        this.numer = numer;
      }

      public String getOpis() {
            return opis;
        }

      public void setOpis(String opis) {
            this.opis = opis;
        }

    } 
```

# 活动

```
import android.app.ListActivity;
import android.os.Bundle;
import java.util.List;
import java.util.Random;
import android.view.View;
import android.widget.ArrayAdapter;

public class FirstGridPage extends ListActivity {
      private StolikiDataSource datasource;

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_view_list_stoliki);

    datasource = new StolikiDataSource(this);
    datasource.open();

    List<Stoliki> values = datasource.getAllStoliki();

    // Use the SimpleCursorAdapter to show the
    // elements in a ListView
    ArrayAdapter<Stoliki> adapter = new ArrayAdapter<Stoliki>(this,
        android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
  }

  // Will be called via the onClick attribute
  // of the buttons in main.xml
  public void onClick(View view) {
    @SuppressWarnings("unchecked")
    ArrayAdapter<Stoliki> adapter = (ArrayAdapter<Stoliki>) getListAdapter();
    Stoliki stolik = null;
    switch (view.getId()) {
    case R.id.add:
      String[] stoliki_numer = new String[] { "1", "2", "3" };
      String[] stoliki_opis = new String[] { "Czerwony", "Niebieski", "Zielony" };
      int nextInt = new Random().nextInt(3);
      // Save the new comment to the database
      stolik = datasource.createStolik(stoliki_numer[nextInt], stoliki_opis[nextInt]);
      adapter.add(stolik);
      break;
    case R.id.delete:
      if (getListAdapter().getCount() > 0) {
          stolik = (Stoliki) getListAdapter().getItem(0);
        datasource.deleteStolik(stolik);
        adapter.remove(stolik);
      }
      break;
    }
    adapter.notifyDataSetChanged();
  }

  @Override
  protected void onResume() {
    datasource.open();
    super.onResume();
  }

  @Override
  protected void onPause() {
    datasource.close();
    super.onPause();
  }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:18:47.897

[http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)。Romain guy（谷歌的 android 开发人员）的 Listview 演讲。

主.xml

```
<ListView android:id="@+id/list"
android:layout_width="fill_parent"
android:layout_height="0dip"
android:focusableInTouchMode="false"
 android:listSelector="@android:color/transparent"
 android:layout_weight="2"
 android:headerDividersEnabled="false"
 android:footerDividersEnabled="false"
 android:dividerHeight="8dp" 
 android:divider="#000000"   
 android:cacheColorHint="#000000" 
 android:drawSelectorOnTop="false">
 </ListView>
 </LinearLayout> 
```

自定义行。行.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
   android:orientation="horizontal"
   android:background="#ffffff"
  >

 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" 
    android:background="@drawable/itembkg"
    />

 <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dp"
    android:text="TextView" />

 </LinearLayout>

public class CustomListView extends Activity {
/** Called when the activity is first created. */

 ListView lv1;
 Customlistadapter cus;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
   // Button b= (Button) findViewById(R.id.remove);
    lv1 = (ListView) findViewById(R.id.list);
    cus= new Customlistadapter(this);
    lv1.setAdapter(cus);

}        
   } 
```

自定义列表适配器。为每一行膨胀自定义布局。

```
 public class Customlistadapter extends ArrayAdapter {

private LayoutInflater mInflater;
    Context c;

public Customlistadapter(CustomListView customListView) {
    super(customListView, 0);
    // TODO Auto-generated constructor stub
    this.mInflater = LayoutInflater.from(customListView);  
    c=customListView;
}
public int getCount() {
    return 20; // number of listview rows.
}

public Object getItem(int arg0) {
    return arg0;
}

public long getItemId(int arg0) {
return arg0;
}

public View getView(final int arg0, View arg1, ViewGroup arg2) {
    final ViewHolder vh;
    vh= new ViewHolder();

    if(arg1==null )
     {
        arg1=mInflater.inflate(R.layout.row, arg2,false);
        vh.tv1= (TextView)arg1.findViewById(R.id.textView1);
        vh.tv2= (TextView)arg1.findViewById(R.id.textView2);
     }
    else
    {
     arg1.setTag(vh);
    }
        vh.tv1.setText("hello");    
        vh.tv2.setText("hello");

    return arg1;
}

  static class ViewHolder //use a viewholder for smooth scrolling and performance.
  {
TextView tv1,tv2;

 }
 } 
```

编辑：

您的活动将有一个列表视图。这是在 oncreate setContentView(R.layout.activity_main); 中设置的。主布局将有一个列表视图。您将 listview 的适配器设置为 listview.setAdapter(youradapter);

然后listview 将有自定义布局，即row.xml 为每个行项目膨胀。listview 的自定义适配器是 row.xml 膨胀的地方。您定义了扩展 ArrayAdapter 的类 CustomAdapter。您覆盖了一组方法。

```
 getCount() ---  size of listview.
   getItem(int position) -- returns the position 
   getView(int position, View convertView, ViewGroup parent) 
   // position is the position in the listview.
   //convertview - view that is tobe inflated
   // you will return the view that is infated. 
```

您将不得不使用视图支架来实现平滑滚动和性能。想象一下 1000 行是带有图像的 lstview，它可能会导致内存异常。摆脱这种情况的一种方法是回收视图。可见视图（行）不会被回收。顶部链接中的视频对该主题进行了详细说明

activity_main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
 LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical" 
 android:background="#0095FF">

 <ListView android:id="@+id/list"
  android:layout_width="fill_parent"
  android:layout_height="0dip"
  android:focusableInTouchMode="false"
  android:listSelector="@android:color/transparent"
  android:layout_weight="2"
  android:headerDividersEnabled="false"
  android:footerDividersEnabled="false"
  android:dividerHeight="8dp" 
  android:divider="#000000" 
  android:cacheColorHint="#000000"
  android:drawSelectorOnTop="false">
  </ListView>
 </LinearLayout> 
```

row.xml（每个列表视图行的布局膨胀）

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:orientation="horizontal" >

 <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Header" />

 <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="80dp"
    android:layout_gravity="center"
    android:text="TextView" />

</LinearLayout> 
```

主要活动

```
 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    ListView ll = (ListView) findViewById(R.id.list);
    CustomAdapter cus = new CustomAdapter();
    ll.setAdapter(cus);

}

class CustomAdapter extends BaseAdapter
{
    LayoutInflater mInflater;

    public CustomAdapter()
    {
        mInflater = (LayoutInflater) MainActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }
    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 30;
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        final ViewHolder vh;
        vh= new ViewHolder();

        if(convertView==null )
         {
            convertView=mInflater.inflate(R.layout.row, parent,false);

            vh.tv2= (TextView)convertView.findViewById(R.id.textView2);
            vh.tv1= (TextView)convertView.findViewById(R.id.textView2);

         }
        else
        {
         convertView.setTag(vh);
        }
            vh.tv1.setText("my text");
            vh.tv2.setText("Postion = "+position);  
        return convertView;
    }

 class ViewHolder
 {
    TextView tv1,tv2;
 }  
 }
} 
```

![在此处输入图像描述](https://i.stack.imgur.com/bN5BS.png)

# asp.net - Asp.Net Web Forms 在 iPad 上出现票证错误

> ID：15921451
> 
> 赞同：2
> 
> 时间：2013-04-10T09:03:08.880
> 
> 标签：asp.net, ipad, webforms

我们有一个现有的 ASP.Net Web Forms 应用程序，它安装在每个客户自己的服务器上。这已经被他们所有人使用了一段时间并且从来没有真正遇到过问题，我们现在有些人在通过 iPad 登录时遇到错误：

```
invalid value for encrypted ticket parameter 
```

我们这里有 iPad 进行测试，但我们没有收到错误，尽管让它们确保 cookie 在 Safari 设置中被接受，甚至要求他们在 iPad 上试用 Chrome 也没有什么区别。无法复制它使得诊断变得非常困难，所以我希望有人以前可能遇到过这个问题。

它使用带有自定义 MembershipProvider 的表单身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-19T06:09:11.530

您必须检查 HttpCookie 的 null 以及它的值，如下所示。

```
HttpCookie authCookie = System.Web.HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
    if (authCookie != null)
    {
        //Extract the forms authentication cookie
        if (!string.IsNullOrEmpty(authCookie.Value))
        {
            FormsAuthenticationTicket authTicket = FormsAuthentication.Decrypt(authCookie.Value);

            string email = authTicket.UserData;

            // and now process your code as per your condition

        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-10T22:41:16.947

如果您将无效字符串传递给`System.Web.Security.FormsAuthentication.Decrypt`. 最常见的是它试图通过`cookieName`而不是`cookieValue`.

下面是获取ASPXAUTH cookie值+信息的方法：

```
string authCookieValue = HttpContext.Request.Cookies[FormsAuthentication.FormsCookieName].Value;
var cookieInfo = System.Web.Security.FormsAuthentication.Decrypt(authCookieValue); 
```

# sql - 如何立即终止/停止长 SQL 查询？

> ID：15921458
> 
> 赞同：115
> 
> 时间：2013-04-10T09:03:39.067
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 SQL Server 2008 及其管理工作室。我执行了一个产生许多行的查询。我试图通过红色的取消按钮取消它，但它在过去 10 分钟内没有停止。它通常会在 3 分钟内停止。

可能是什么原因，我该如何立即停止它？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-04-10T09:12:38.303

```
sp_who2 'active' 
```

检查**CPUTime**和**DiskIO**下的值。注意具有较大值的进程的 SPID。

```
kill {SPID value} 
```

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-04-10T09:19:12.880

> 可能是什么原因

只要您的[注意力](http://msdn.microsoft.com/en-us/library/dd341449.aspx)可以到达服务器并得到处理，查询就会立即取消。查询必须处于可取消状态，这几乎总是正确的，除非您执行某些操作，例如从 SQLCLR 调用 Web 服务。如果您的注意力无法到达服务器，通常是由于[调度程序](http://msdn.microsoft.com/en-us/library/ms177526.aspx)过载。

但是，如果您的查询是必须回滚的事务的一部分，则回滚不能被中断。如果需要 10 分钟，则需要 10 分钟，而您对此无能为力。即使重新启动服务器也无济于事，它只会使启动时间更长，因为恢复必须完成回滚。

要回答适用于您的案例*的*具体原因，您需要自行调查。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2013-04-10T09:08:53.870

首先执行以下命令：

```
sp_who2 
```

之后使用 SPID 执行以下命令，您从上面的命令中获得：

```
KILL {SPID value} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-07-25T08:49:44.937

这是一个愚蠢的答案，但至少在我的情况下它可以可靠地工作：在管理工作室中，当“取消执行查询”没有停止查询时，我只需单击以关闭当前的 sql 文档。它问我是否要取消查询，我说是，然后你瞧，几秒钟后它就停止执行了。之后它会询问我是否要在关闭之前保存文档。此时我可以单击取消以保持文档打开并继续工作。不知道幕后发生了什么，但它似乎有效。

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2017-06-09T00:15:47.893

如果您取消并看到该运行

```
 sp_who2 'active' 
```

（活动监视器在旧的 sql server 2000 FYI 上不可用）

**找出你想杀死的 SPID，例如 81**

```
Kill 81 
```

再次运行 `sp_who2 'active'` ，您可能会注意到它正在睡觉......回滚

要获得 STATUS 再次运行 KILL

```
Kill 81 
```

然后你会收到这样的消息

```
 SPID 81: transaction rollback in progress. Estimated rollback completion: 63%. Estimated time remaining: 992 seconds. 
```

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2020-01-28T07:11:32.920

1.  首先，您需要使用以下查询显示/检查所有正在运行的查询-

    ```
    SELECT text, GETDATE(), *
    FROM sys.dm_exec_requests
    CROSS APPLY sys.dm_exec_sql_text(sql_handle) 
    ```

2.  查找`Session-Id`并`Description`针对所有正在运行的查询，然后复制您要立即终止/停止的特定查询的 Session-Id。

3.  使用以下查询使用 Session-Id 终止/停止特定查询：

    ```
    Kill Session-id 
    ```

    例子：

    ```
    kill 125 --125 is my Session-Id 
    ```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2016-03-18T06:24:28.947

您可以使用键盘快捷键`ALT`+`Break`来停止查询执行。但是，这可能不会在所有情况下都成功。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-12-18T14:25:30.483

很长一段时间以来，我一直在遭受同样的痛苦。当您连接到远程服务器（可能很慢）或网络连接不佳时，它会特别发生。我怀疑微软是否知道正确的答案是什么。

但是因为我试图找到解决方案。只有一种外行方法有效

*   单击您正在遭受的查询选项卡上的关闭按钮。过了一会儿（如果微软对你不苛刻！！！）你可能会看到一个窗口问这个

**“查询当前正在执行，您要取消查询吗？”**

*   点击“是”

*   过了一会儿它会问你是否要保存这个查询？

*   点击“取消”

然后发布，可能是您的工作室再次稳定执行您的查询。

它在后台所做的是将您的查询窗口与连接断开。因此，为了再次运行查询，再次连接远程服务器需要一些时间。但相信我，这种权衡比看到那个永远运行的计时器的痛苦要好得多。

**PS：**这对我有用，如果对你也有用，那就赞一下。！！！

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-10-02T19:14:47.817

显然在 sql server 2008 r2 64bit 上，从 IIS 长时间运行查询，kill spid 似乎不起作用，查询只是一次又一次地重新启动。它似乎在重用 spid。该查询导致 sql server 不断占用 35% 的 cpu 并挂起网站。我猜 bc/ 它无法响应其他登录查询

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-10-27T20:22:44.797

一个简单的答案是，如果红色的“停止”框不起作用，请尝试按键盘上的“Ctrl + Break”按钮。

如果您在 Linux 上运行 SQL Server，则可以将一个名为“killall”的应用程序添加到系统托盘中，只需单击“killall”按钮，然后单击陷入循环的程序，它将终止程序。希望有帮助。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-10-22T10:04:26.147

就我而言，当我在无休止地运行时试图关闭它时，我的 sql 挂断了。所以我所做的是我打开我的任务管理器并结束我的 sql 查询任务。这停止了​​我的 sql 并重新启动它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-06-10T15:40:38.360

如果使用***[VSCode mssql 扩展](https://marketplace.visualstudio.com/items?itemName=ms-mssql.mssql)***，请单击**F1**，在提示中输入 mssql，然后选择“取消查询”，如[有关扩展的线程](https://github.com/microsoft/vscode-mssql/issues/879#issuecomment-584499620)中所示。

# node.js - Node.js Express 框架生成损坏的 app.js？

> ID：15921461
> 
> 赞同：2
> 
> 时间：2013-04-10T09:03:40.173
> 
> 标签：node.js, express, ejs

我是 Node.js 的新手，想用 Express 创建一个简单的应用程序。

```
npm install -g express
npm install -g ejs

express test -t ejs
cd test/
npm install 
```

现在我有一个应用程序框架。但它坏了。例如我的 app.js 内容是

```
,/**, * Module dependencies., */,,var express = require('express'),  , routes = require('./routes'),  , user = require('./routes/user'),  , http = require('http'),  , path = require('path');,,var app = express();,,// all environments,app.set('port', process.env.PORT || 3000);,app.set('views', __dirname + '/views');,app.set('view engine', 'jade');,app.use(express.favicon());,app.use(express.logger('dev'));,app.use(express.bodyParser());,app.use(express.methodOverride());,app.use(app.router);,app.use(express.static(path.join(__dirname, 'public')));,,// development only,if ('development' == app.get('env')) {,  app.use(express.errorHandler());,},,app.get('/', routes.index);,app.get('/users', user.list);,,http.createServer(app).listen(app.get('port'), function(){,  console.log('Express server listening on port ' + app.get('port'));,});, 
```

在“节点应用程序”之后，它抛出

```
C:\Users\saxon\Downloads\123\test\app.js:1
,/**, * Module d
^

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
SyntaxError: Unexpected token ,
    at Module._compile (module.js:429:25)
    at Object..js (module.js:459:10)
    at Module.load (module.js:348:31)
    at Function._load (module.js:308:12)
    at Array.0 (module.js:479:10)
at EventEmitter._tickCallback (node.js:192:40) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:06:53.603

问题解决：我安装的版本是0.6.xxx，现在是0.10.xxx重新安装所有包（ejs，express，connect，request）

# datetime - SSRS 2008 中的日期过滤器

> ID：15921465
> 
> 赞同：0
> 
> 时间：2013-04-10T09:03:46.500
> 
> 标签：datetime, dataset, ssrs-2008, filtering

我正在使用 SSRS 2008。我的报告中有一个包含日期/时间列 (DOB) 的表格。我也有一个日期/时间参数（MyDate）。我正在尝试在我的数据集上设置一个过滤器，例如

```
FormatDateTime(Fields!DOB.Value,2)<=FormatDateTime(Parameters!MyDate.Value,2) 
```

它没有正确过滤我的表格。但是如果我删除 FormatDateTime 函数，那么它工作正常。我想了解这里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:16:02.180

`FormatDateTime`将返回一个字符串，因此您不再比较日期，而是比较它们的字符串表示形式。

比较日期`02-Feb-2012`和`10-Oct-2012`将给出与比较字符串`2/2/2012`和不同的结果`10/10/2012`。

如评论中所述，您似乎只是想从日期中删除时间部分？

像这样的东西应该可以工作，即将字符串转换回日期。

```
CDate(FormatDateTime(Fields!DOB.Value,2)) <= CDate(FormatDateTime(Parameters!MyDate.Value,2)) 
```

但这只是一个建议，有很多方法可以做到这一点。

# javascript - 导航栏菜单无法在 Microsoft Internet 浏览器中使用，但可以在 Firefox、Chrome 和 Opera 中使用

> ID：15921469
> 
> 赞同：0
> 
> 时间：2013-04-10T09:03:56.797
> 
> 标签：javascript, css, navigation

我有以下代码来说明可以浮动的导航菜单栏。

不幸的是，它不能在 Microsoft IE (IE 8, 9) 中运行，但它

```
<html lang="en">
<head>

  <title></title>

  <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js'></script>

  <style type="text/css">
      body {
          background-color: #333;  
          color: #999;
          font: 12px/1.4em Arial,sans-serif;
      }
      #wrap {
          margin: 10px auto;        
          background: #666;
          padding: 10px;
          width: 700px;
      }
      #header {
          background-color: #666;
          color: #FFF;
      }
      #logo {
          font-size: 30px;  
          line-height: 40px;    
          padding: 5px;
      }
      #navWrap {
          height: 30px;
      }
      #nav {
          padding: 5px;
          //background: #999;    
      }
      #nav ul {
          margin: 0;
          padding: 0;    
      }
      #nav li {
          float: right;
          padding: 3px 8px;
          background-color: #FFF;
          margin: 0 10px 0 0;
          color: #F00;
          list-style-type: none;
      }
      #nav li a {
          color: #F00;  
          text-decoration: none;    
      }
      #nav li a:hover {
          text-decoration: underline;   
      }
      br.clearLeft {
          clear: left;        
      }
      .bigNum {
          font-size: 20px;
          color: #000;
          background: #FFF;
          padding: 2px;    
      }
      #eduHomeBackLink {
          position: fixed;
          right: 20px;
          bottom: 20px;
          background-color: #333;
          background-color: rgba(0,0,0,0.85);
          -webkit-border-radius: 3px;
          -moz-border-radius: 3px;
          border-radius: 3px;
          font-size: 14px;
          font-family: Lato,'Lucida Grande',sans-serif;
      }
      #eduHomeBackLink a {
          padding: 10px;
          border: none;
      }
      #eduHomeBackLink a:hover {
          color: #FFF;
      }
</style>

<script type='text/javascript'>
//<![CDATA[ 

$(function() {
    // Stick the #nav to the top of the window
    var nav = $('#nav');
    var navHomeY = nav.offset().top;
    var isFixed = false;
    var $w = $(window);
    $w.scroll(function() {
        var scrollTop = $w.scrollTop();
        var shouldBeFixed = scrollTop > navHomeY;
        if (shouldBeFixed && !isFixed) {
            nav.css({
                position: 'fixed',
                top: 0,
                left: nav.offset().left,
                width: nav.width()
            });
            isFixed = true;
        }
        else if (!shouldBeFixed && isFixed)
        {
            nav.css({
                position: 'static'
            });
            isFixed = false;
        }
    });
});

//]]>  
</script>

</head>

<body>
<div id="wrap">
<div id="header">
    <div id="logo">Start Slowly Scrolling Down<br /> This Page!</div>
    <div id="navWrap">

</div>
</div>
<p><a name="1"></a>
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed porta justo in tellus porttitor non placerat dui pulvinar. Aliquam erat volutpat. Morbi ullamcorper libero sit amet tortor porta iaculis. Duis sit amet diam dolor. Mauris bibendum pharetra justo, sed ornare arcu scelerisque vitae. Integer molestie dignissim lacinia. Etiam sagittis consectetur iaculis. Pellentesque fringilla nulla at tortor dictum lobortis.
</p>

<div id="eduHomeBackLink"><a href="/education/">&laquo; Back to Education Center Home</a></div>

<p>
    <span class="bigNum">1.</span> Aliquam erat volutpat. Integer pulvinar dignissim lacus eu lacinia. Sed vitae orci eget nisl ultricies feugiat quis ut velit. Sed urna mauris, viverra volutpat pulvinar et, tempus vel odio. Aenean at posuere massa. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam quis augue nisi, quis ornare nisl. Nulla sagittis neque at massa venenatis tincidunt. Morbi sed nibh magna, vel consectetur nisi. Nullam tortor augue, scelerisque et consequat eu, fermentum at eros. Donec scelerisque ullamcorper tincidunt.
</p>

    <div id="nav">
        <ul>
            <li><a href="#1" class="smoothScroll">Item 1</a></li>
            <li><a href="#2" class="smoothScroll">Item 2</a></li>
            <li><a href="#3" class="smoothScroll">Item 3</a></li>
                <li><a href="#4" class="smoothScroll">Item 4</a></li>
        </ul>    
        <br class="clearLeft" />
    </div>

<p>
Pellentesque ut nulla dolor. Sed non diam odio, ac luctus mauris. Nunc erat turpis, imperdiet vel laoreet laoreet, scelerisque vel dui. Sed nec nisl nulla, ut gravida neque. Mauris augue nibh, accumsan id viverra et, pellentesque a orci. Integer venenatis congue urna a ornare. Fusce in facilisis tortor. In lobortis est non lacus cursus venenatis. Donec a metus erat, id rhoncus turpis. Quisque vitae venenatis tellus. Donec quis risus erat, in luctus justo. Nulla ultrices, urna quis faucibus vehicula, lorem nibh tristique magna, nec tristique augue massa sit amet arcu. Donec malesuada, erat iaculis pretium ultricies, lorem nisl lacinia tellus, vel luctus augue nunc eget metus. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Quisque dignissim, orci ut ultrices aliquet, enim nisl auctor magna, nec feugiat eros lorem vehicula ipsum.
</p>
<p>
Maecenas vitae mauris enim, vel pretium turpis. Sed pharetra accumsan tellus. Maecenas pulvinar ipsum viverra sapien volutpat blandit. Vivamus vel massa velit. Pellentesque condimentum tincidunt aliquam. Vivamus mattis auctor diam, eu commodo massa laoreet ut. Sed congue faucibus arcu, quis hendrerit nisl pellentesque non. Nunc sagittis condimentum lacus. Cras tincidunt sem quis lorem tempor eget porta magna pulvinar. Donec molestie diam sagittis sem tristique in iaculis ligula aliquet. Aenean rutrum eleifend metus nec tempus. Integer nisi ligula, pretium in porta vel, euismod non lectus. Aliquam erat volutpat. Praesent sit amet massa purus.
</p>
<p><a name="2"></a>
Ut pellentesque, lectus ut porttitor ullamcorper, velit nulla dignissim tellus, eu luctus nibh mauris non arcu. Mauris viverra purus et leo condimentum adipiscing. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam condimentum facilisis lacus, quis rutrum purus tristique non. Nam vestibulum mauris eu sem porttitor accumsan. Phasellus at eleifend neque. Nam interdum ultrices commodo. Nunc dignissim aliquet dui. Nunc id nisl congue dolor pharetra pulvinar vel ac lectus. Nunc mi justo, semper id sollicitudin et, luctus eget quam. Ut condimentum porta consectetur. Donec nunc turpis, molestie ac semper ut, aliquet id nulla. Vestibulum id ipsum purus, sed tempor lacus. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
</p>
<p>
    <span class="bigNum">2.</span> Aliquam erat volutpat. Duis euismod porta eros. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Pellentesque porta tincidunt gravida. Praesent sed mi nisl, non pretium mi. Suspendisse nibh orci, mollis eget adipiscing id, malesuada quis enim. Nullam facilisis elit ut magna facilisis ac eleifend diam tempor. Curabitur et justo est, a sagittis velit. Proin mollis, libero ac luctus faucibus, ipsum risus consequat dolor, viverra sagittis felis lorem non quam. Nam risus nisl, congue a semper eu, dapibus ac nunc. Maecenas tortor nisl, pellentesque eu luctus at, viverra ut libero. Nullam quis egestas massa. Donec dapibus rhoncus risus nec tincidunt. Suspendisse condimentum ante sit amet odio consequat id suscipit ante tempus. Aenean purus leo, blandit a iaculis non, tristique ullamcorper ante.
</p>
<p>
Phasellus consectetur, ante nec pretium hendrerit, arcu nunc ullamcorper lectus, non pulvinar sapien nibh ac sem. Nullam dignissim erat sit amet sapien convallis ornare. In hac habitasse platea dictumst. Fusce et ante ut turpis condimentum dictum. Mauris elit justo, laoreet eget consectetur sed, suscipit ut augue. Phasellus id sollicitudin enim. Aenean et justo magna, in ultricies lectus. Nunc blandit quam rhoncus quam pretium tempor. Aenean nec fermentum nibh. Donec ornare magna nec leo tempus ac varius tortor hendrerit. Ut vel erat purus. Maecenas volutpat convallis est a sagittis.
</p>
<p>
Duis mattis orci at justo molestie blandit. Nunc blandit tortor vitae ipsum congue ut pharetra nibh accumsan. Phasellus dapibus risus sed purus laoreet mattis. Ut placerat imperdiet diam, ut blandit dolor auctor vel. Nunc in odio quis eros fringilla consectetur. Ut porttitor imperdiet arcu nec ultrices. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis hendrerit felis id mauris pulvinar faucibus sodales magna dictum.
</p>
<p>
Mauris in tincidunt ante. Donec fermentum varius interdum. Nulla consectetur faucibus purus, eu interdum nulla aliquet eu. Cras id lectus lacus, eleifend rhoncus lorem. Integer malesuada tristique lobortis. Phasellus a dolor non turpis euismod euismod vel a enim. Duis eu augue a elit commodo pellentesque. Ut dolor odio, ornare ac faucibus sed, tincidunt vel ipsum. Nunc et nibh eros, ut vehicula massa. Donec tempus, augue vel consequat adipiscing, nibh lacus mollis nunc, egestas commodo nisi quam sed orci.
</p>
<p>
Maecenas sit amet tortor nunc. Donec nec tempor augue. Mauris mi dolor, dictum et dictum a, tincidunt sit amet sapien. Nunc dapibus nunc nec arcu tristique sit amet consectetur libero eleifend. Suspendisse dignissim massa eu neque lacinia tincidunt. Vivamus vel nisl eu nulla convallis pretium. Nunc ante justo, hendrerit a malesuada vitae, semper a risus. Nunc viverra purus quis lorem cursus quis ultrices mauris ullamcorper. Pellentesque luctus, nibh vel elementum facilisis, nisi turpis aliquet augue, et feugiat nisi massa sed risus. Aenean dui velit, molestie placerat euismod vel, sodales at mauris. Donec leo felis, eleifend nec placerat sed, placerat vulputate libero.
</p>
<p>
Nullam in mauris eleifend lorem mollis facilisis dapibus vel felis. Morbi pharetra euismod semper. Vivamus mollis gravida imperdiet. Proin mattis, nulla sed lobortis tincidunt, mauris dui suscipit dolor, sed fermentum nisi orci eget neque. Ut mattis leo eu dolor fringilla eu auctor tortor blandit. Mauris eleifend risus nec felis elementum mattis. Nulla rhoncus ante quam, eu eleifend leo. Aliquam euismod felis in nunc suscipit congue. Sed facilisis sapien a erat posuere ac facilisis lectus cursus. Praesent nulla felis, placerat nec lacinia sit amet, laoreet eget odio. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Praesent non urna mattis dui porttitor egestas at sed tellus. Integer id commodo quam. Nullam fermentum, velit nec sagittis placerat, magna nibh posuere dolor, vel dictum mi tortor et dui. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aenean iaculis, orci eu pulvinar pulvinar, tellus nisl luctus lectus, ac scelerisque leo purus non eros.
</p>
<p>
Cras est sem, rutrum non malesuada ac, fringilla et risus. Mauris sit amet quam eget orci varius mattis quis eu augue. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Aliquam at ipsum eros. Pellentesque porta vestibulum mi, a pulvinar est condimentum scelerisque. Duis vitae metus a metus euismod tempor. Nunc augue mi, aliquam at commodo sed, condimentum a lorem. Proin rhoncus faucibus congue. Quisque diam ante, lacinia non fermentum at, dapibus nec lacus. Nunc suscipit vestibulum sem, a euismod mauris imperdiet et. Quisque gravida nulla sit amet magna posuere vel fringilla urna porta. Praesent rhoncus congue quam a gravida. Curabitur nisl erat, mattis non pharetra vel, tincidunt sit amet lorem. Donec tristique lacus luctus augue dapibus a semper eros suscipit.
</p>
<p>
Fusce interdum tincidunt felis, id ullamcorper urna gravida ac. Ut ut mi quam. Vestibulum ultricies consequat porta. Donec orci felis, viverra non sodales a, gravida id enim. Duis vulputate lacus et nunc fermentum eu elementum erat pharetra. Aliquam et quam tortor, in ultrices eros. Integer elit ipsum, cursus at varius sed, molestie a tellus.
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:09:22.033

该页面处于怪癖模式，这就是它无法正常工作的原因。请添加合适的文档类型，然后它将起作用。

示例：将此添加到页面顶部，然后尝试。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd"> 
```

# file - 为什么 4k 被认为是文件系统的标准

> ID：15921475
> 
> 赞同：0
> 
> 时间：2013-04-10T09:04:10.823
> 
> 标签：file, operating-system, block

在操作系统中，4k 是块的默认大小。当硬盘有越来越多的容量来存储数据时；搜索速度提高了......，为什么这个标准没有改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:30:06.520

并非总是如此，它曾经是 512 字节/扇区。高级格式是一种用于在扇区大小大于 512B 的 HDD 上存储数据的格式。

请阅读[这里](http://support.microsoft.com/kb/2510009?wa=wsignin1.0)和[这里](http://en.wikipedia.org/wiki/Advanced_Format)

# android - 手指在 ListView 项目上向右滑动

> ID：15921476
> 
> 赞同：0
> 
> 时间：2013-04-10T09:04:11.317
> 
> 标签：android, android-listview

我正在尝试创建一个 ListView，其中手指在列表项上向右滑动打开项的内层，用户可以在其中向 EditText 输入文本。喜欢这个视频（[1 分 10 秒](http://youtu.be/U9FEVmkSHBo?t=1m5s)）。

任何想法如何做到这一点。谢谢

# java - EAR lib 的类为 WAR 成员抛出 ClassNotFoundException（不同）

> ID：15921480
> 
> 赞同：3
> 
> 时间：2013-04-10T09:04:17.563
> 
> 标签：java, jar, glassfish, war, ear

我的 EAR 结构如下：

```
lib/ 
  helper.jar (Helper classes used both by war1.war and war2.war)
war1.war
    WEB-INF/
        lib/
            entities1.jar
war2.war
    WEB-INF/
        lib/
            entities2.jar 
```

当 war1 在 helper.jar 中调用一个本身调用 Class.forName("a class in war1") 的类时，它会抛出一个**ClassNotFoundException**。

请注意，当战争类加载 ear/lib 类时，人们通常会遇到 ClassNotFoundException。**我的情况是相反的情况。**

我的 EAR 部署在 Glassfish 3.1.2 中。

我见过类似的情况，但在 JBoss 中，“ [EAR lib 的类为 WAR 成员抛出 ClassNotFoundException](https://stackoverflow.com/questions/13387250/ear-libs-class-throwing-a-classnotfoundexception-for-a-war-member) ”，但答案说这是一个“循环依赖”问题。但是，我在这里看不到任何“循环依赖”问题。在java中，任何ClassX都可以引用ClassY，即使ClassY引用ClassX....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:28:15.507

在`helper.jar`你不能简单地加载一个位于你`war1.war`using中的类`Class.forName`。

限制来自该 `Class.forName`方法使用的默认类加载器，它是企业应用程序的类加载器（加载的类加载器`helper.jar`），它只知道它的父级，而不知道它的子级（`war1.war`和`war2.war`类加载器）。

您的问题的解决方案是明确使用**上下文**类加载器，它按顺序扫描：

战争->耳朵->系统->扩展->引导

这可以使用以下方法完成：

```
Class.forName("war1Class.class",true,Thread.currentThread().getContextClassLoader()) 
```

# java - 如何有意义地检测低规格的移动设备？

> ID：15921481
> 
> 赞同：22
> 
> 时间：2013-04-10T09:04:20.723
> 
> 标签：java, javascript, html, mobile

现在我只知道 Scientiamobile 的 WURFL 和其他一些。这些库或数据库告诉你很多关于设备的信息，但它们都不能清楚地表明你不应该使用 CSS 过渡或其他类型的动画，因为即使设备支持它，与这些功能完全不同的故事将顺利运行，这是我在构建移动 Web 应用程序时最关心的问题。

使用“WURF”数据库在这个方向上“分类”设备在技术上是否可行？以及我应该使用哪些设备功能将设备“分组”为“快速”的图形功能？

最后，我只需要从 1 到 5 对设备进行评分，以确定我可以使用哪些 gfx 操作。

好吧，欢迎任何想法。事实证明这是真正的脑筋急转弯，除了大量有关设备上限的数据外，互联网上的研究并没有带来任何有用的信息。

**Update-1**：我刚收到 ScientiaMobile 的回复：“我们一直在尝试某种形式的 Javascript 性能指数（可能基于现有基准之一）的想法，这可能会给出一些指示，但我们仍然还没有。问题很复杂。”

**Update-2**：我们在移动网络应用中发现的最大瓶颈

1.  动画力量
2.  PNG透明度
3.  文本和框阴影
4.  图像大小调整

对我们来说，确定我们需要禁用这些功能就足够了，因为它们会使任何应用程序瘫痪。可能还有其他方法。

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-14T20:44:43.113

不幸的是，对于一般情况，我不相信今天这是可能的。

如果您只对有限数量的设备感兴趣，当然您可以测试每个设备，并通过用户代理或基于 JavaScript 的检测专门针对这些设备。

[**在厚应用程序的上下文中（例如，您使用Apache Cordova**](http://cordova.apache.org/)之类的“包装”您的网站），可以提供对某些设备内部的 JavaScript 访问（例如，总内存量、可用内存量，处理器速度），但除此之外，此信息不可从浏览器获得。正如您所暗示的那样，访问此类设备信息可能仍然不够（例如，看似“高规格”的设备性能不佳）。

[**像Modernizr**](http://modernizr.com/)这样的JavaScript 特征检测库可以回答用户当前的浏览器是否*支持*诸如 box-shadow 和 text-shadow 之类的东西，但不提供有关渲染支持的特征的*效果*或*速度的信息。*

同样，来自[**Browserscope**](http://www.browserscope.org/)和相关项目[**ringmark**](http://rng.io/)的数据集（有点类似于 WURFL 的 JavaScript）通过众包基准测试（例如，iPhone 是否支持 CSS3 转换？）在每个浏览器版本的基础上回答这些浏览器*支持*问题，以及一般情况下，这是必要的。您需要针对有问题的各种功能运行基准测试并评估实时性能。然而，即使这样也有其局限性：

*   由于移动用户四处走动、接听电话、更改硬件设置、启动后台应用程序等，速度的必要条件（可用内存、处理器、电池、网络连接等）不断变化，因此基准测试的结果是可能不可靠/不可重复。
*   基准测试需要时间，并且总是会增加（希望不引人注意的）延迟。
*   根据功能，基准测试可能不实用。
*   功能在组合（例如，为带有阴影的透明 PNG 动画）或按比例（例如，页面上的每个图像都在动画）时的行为可能与基准测试中的单独行为不同。
*   如果您依赖基准数据集而不是执行自己的实时基准测试，那么数据集的样本大小、范围和年龄会极大地限制其有用性。

最后一点是，我什至没有提到性能是相当*主观*的事实。假设以某种方式可以评估/预测动画的速度。如果动画将以 15 fps 运行，用户是否应该看到该动画？5帧呢？谁将成为最终的仲裁者来决定给定功能是否表现*得足够好*？

我今天能提供的最好建议是暂时减少（或消除）您对麻烦功能的依赖。建议回到使用带有预合成阴影的图像或在没有 CSS3 的情况下制作背景渐变的“旧方式”似乎很糟糕，但归根结底，用户体验应该优先于使用闪亮的新技术。许多移动设备根本不存在，检测方法也不存在。如果您必须使用这些功能，或许可以考虑一种简单但不显眼的方式让用户选择加入/选择退出，例如 Gmail 的“标准”与“基本 HTML”视图选项，或者考虑自动选择已知良好的浏览器.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T13:14:43.593

除了已经说过的“user113215”之外，我不能再添加太多了。它也不是对实际问题的回答，而是对实际问题的回答：

我对一些用户进行了实验，我们使用了一个简单的欢迎弹出菜单，要求用户关闭阴影和动画等特殊效果。大多数测试用户确实很欣赏这种选择，并且清楚地理解了这种菜单的方式。我们现在确实将其集成得更高级，并与用于自动预选 GFX 效果的隐藏基准相结合。

谢谢你。G

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T08:01:26.627

简而言之，没有。我们如何定义动画和图形的平滑度完全取决于 FPS（每秒帧数）。在这个问题中，我们谈论的是“web-app”，它们在客户端使用 HTML 和 JS。由于没有一个客户端提供程序通过HTML或JS获取FPS的接口，因此无法判断客户端是否流畅。

但是，如果你真的想要一个关于 web 应用程序性能的基准。您可以使用[stats.js](https://github.com/mrdoob/stats.js)来监控 stat 的变化，并为您提供一个基准来建议您的客户端在运行时激活或禁用任何类型的效果。这种方法甚至可以与大多数 FX 的 Javascript 库（如 jquery）一起使用。但这需要一些时间才能让您在应用更改之前获得足够的数据，并且统计数据可能与设备的状态不同，例如内存使用情况、并发应用程序等。

# objective-c - 如何获得正确的 XPath 结果

> ID：15921485
> 
> 赞同：1
> 
> 时间：2013-04-10T09:04:36.003
> 
> 标签：objective-c, xpath

当我使用 XPath 时，我使用以下代码：

```
NSArray *version = [doc nodesForXPath:@"/app/version[1]" error:nil]; 
```

如果我打印数组，我会得到：

```
"GDataXMLElement 0x80d5030: {type:1 name:version xml:\"<version>0.6</version>\"}" 
```

但是如何从版本中获取“0.6”？我对阵列做错了吗？

**编辑：**

我找到了解决方案：

```
for (GDataXMLElement *version in versions) {

    GDataXMLElement *versxml = (GDataXMLElement *) [versions objectAtIndex:0];
    NSLog(@"%@", versxml.stringValue);

} 
```

# c# - 计算ip范围

> ID：15921487
> 
> 赞同：2
> 
> 时间：2013-04-10T09:04:37.010
> 
> 标签：c#, ip-address, subnet, addrange

如果你可以这样称呼它，我遇到了一个轻微的“问题”。我正在尝试学习子网并制作子网计算器。一切正常，但是当您获得像 255.255.0.0 这样的网络掩码时，问题就出现了，它为您提供了可能的 ~65k ish 地址。

我以编程方式检索我的 IP 和网络掩码，并从中计算出第一个和最后一个可能的 IP 地址。之后，我将它们分成两个单独的列表。在此之后，我使用两个这样的 for 循环：

```
 //Third octet
        else if (firstIpList[2].ToString() != lastIpList[2].ToString())
        {
            for (int i = Convert.ToInt32(firstIpList[2]); i < Convert.ToInt32(lastIpList[2]); i++)
            {
                for (int x = Convert.ToInt32(firstIpList[3]); x < Convert.ToInt32(lastIpList[3]); x++)
                {
                    ipRange.Add(firstIpList[0].ToString() + "." + firstIpList[1].ToString() + "." + i.ToString() + "." + x.ToString());
                }
            }
        } 
```

这只是检查列表中的第三个条目，即第三个八位位组，由于地址数量少，第四个八位位组的要求并不高，而第二个要求更高的则不太常见，因此我以第三个为例。

这样做是循环让我们说 10.23.0 -> 255。对于每一个，另一个 0 -> 255。

是的，我有广播和 ID，但这不是重点，重点是这是一个运行 65025 次的循环，您可能猜到这非常耗时。有没有办法让这更有效？

我一开始在考虑 addrange，因为第三个八位字节中的 0-255 我也想在第四个中添加 0-255，所以我可以制作另一个列表，其中包含第四个八位位组范围的副本和第三个八位位组中的 foreach 数字添加我的第四个八位字节列表。但这会给我留下一个看起来像 10.23.0 -> 255 的项目列表，并且每个项目都有 0->255 作为子项目，对吗？

# string - x86 汇编程序在给定文本中搜索单词

> ID：15921488
> 
> 赞同：0
> 
> 时间：2013-04-10T09:04:43.790
> 
> 标签：string, search, assembly, x86, text-search

我正在尝试使用 x86 程序集编写一个可以在文本中搜索单词的程序。当文本中出现单词时，程序将通知用户。我在比较字符串时仍然遇到问题。有什么建议吗？

```
.model small

.stack 200h

.data

message1 db "Enter your text here: $"
text db 150,151 dup(0)
message2 db 10,13,"Enter the word that you want to find: $"
find db 20,21 dup(0)
yesmessage db 10,13,"The word is in the text$"
nomessage db 10,13,"Sorry the word is not in the text$"

.code
Start:

;Display message and key in strings
mov ax,seg message1
mov ds,ax

mov si,offset text
mov di,offset find

mov dx,offset message1
mov ah,09h
int 21h

mov dx,si
mov ah,0Ah
int 21h

mov ax,seg message2
mov ds,ax

mov dx,offset message2
mov ah,09h
int 21h

mov dx,di
mov ah,0Ah
int 21h

;compare strings
mov bx,00

mov bl,text+1
mov bh,find+1

cmp bl,bh
jne L1

add si,2
add di,2

L2:mov bl,byte ptr[si]
cmp byte ptr[di],bl
jne L1
inc si
inc di
cmp byte ptr[di],"$"
jne L2
mov ah,09h
mov dx,offset yesmessage
int 21h
L1:mov ah,09h
mov dx,offset nomessage
int 21H

mov ax,4c00h
int 21h
end start 
```

预期的结果应该是：

示例 1：

```
在此处输入您的文字：他老了

输入您要查找的单词：old

这个词在文本中

```

示例 2：

```
在此处输入您的文字：他老了

输入您要查找的单词：年轻

对不起，这个词不在文本中

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:18:46.460

我可以在您的代码中看到几个明显的问题。请参阅下面的评论：

```
mov bx,00   ; this instruction is redundant

mov bl,text+1
mov bh,find+1

cmp bl,bh
jne L1   ; it's quite likely that the strings won't have the same length,
         ; i.e. that find will be shorter than text. this condition is 
         ; therefore incorrect. it would make more sense to use jl, i.e.
         ; jumping to the negative print if text is shorter than find. 
```

```
mov ah,09h
mov dx,offset yesmessage
int 21h
L1:mov ah,09h 
mov dx,offset nomessage  ; you'll be printing both messages in cases where
int 21H                  ; the substring is found, because you don't have
                         ; any jump that skips past it. 
```

# javascript - 阻止用户界面不起作用

> ID：15921489
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:04:44.083
> 
> 标签：javascript, asp.net, web, blockui

为什么这段代码不起作用？我在将文件下载到 fileDownloadToken 时设置了 cookie。如果不为空，请检查它，然后执行完成下载...

```
 <script type="text/javascript">
    var fileDownloadCheckTimer;
    function blockUIForDownload() {
        if (IsCookiesEnable()) {
            var token = new Date().getTime(); //use the current timestamp as the token value
            $('#token').val(token);
            $.blockUI{ message: '', fadeIn: 0 };);
            fileDownloadCheckTimer = window.setInterval(function () {
                var cookieValue = $.cookie('fileDownloadToken');
               // alert(cookieValue);
                if (cookieValue != null)
                    finishDownload();
            }, 1000);
        }
    }

    function IsCookiesEnable() {
        var cookieEnabled = (navigator.cookieEnabled) ? true : false;

        if (typeof navigator.cookieEnabled == "undefined" && !cookieEnabled) {
            document.cookie = "testcookie";
            cookieEnabled = (document.cookie.indexOf("testcookie") != -1) ? true : false;
        }
        return (cookieEnabled);
    }

    function finishDownload() {
        //window.clearInterval(fileDownloadCheckTimer);
        $.cookie('fileDownloadToken', null);
        $.unblockUI();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:09:39.277

改变

```
$.blockUI{ message: '', fadeIn: 0 };); 
```

至

```
$.blockUI({ message: '', fadeIn: 0}); 
```

# code-metrics - 如何找出一个方法是长方法？

> ID：15921490
> 
> 赞同：0
> 
> 时间：2013-04-10T09:04:46.410
> 
> 标签：code-metrics

我怎样才能知道一个方法是否被认为是一个长方法。因为，它可能包含 3 行代码，也可能包含 300 行代码。如果它包含 3 行代码，那么它不是一个长方法，但如果它包含 300 行代码，那么它肯定是一个长方法。我的问题是如何才能知道它是否是一个长方法。有什么算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:10:41.390

Bob 大叔建议一个方法不超过 4 行。只有在极少数情况下，您才能无视这条规则。

[功能](http://cleancoders.com/codecast/clean-code-episode-3/show)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:36:45.693

有许多现有的度量方法包可以测量方法的大小（例如，[Eclipse Metrics 插件](http://metrics2.sourceforge.net/)）。构成“长”方法的行数因语言和不同作者的观点而异（例如，请参阅这[本](https://rads.stackoverflow.com/amzn/click/com/3540244298)关于 OO 度量的书）。

# c - 使用（显然）空 C 函数

> ID：15921495
> 
> 赞同：2
> 
> 时间：2013-04-10T09:05:08.457
> 
> 标签：c, void

任何人都可以评论以下功能的观点，这似乎不是很多：

```
// Returns stored values
int getDetails(const int param1[],
               int* param2,
               int* param3,
               int* param4)
{
    (void)param1;
    (void)param2;
    (void)param3;
    (void)param4;
    return 0;
} 
```

注释实际上与代码一起存在。我想它一定是某种奇怪的存根，但它被调用了，我绞尽脑汁想想象我错过了什么。

到目前为止，我最好的预感是该函数已被弃用但未删除，这`(void)param`是为了避免编译器对未使用的变量发出警告。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T09:07:43.077

像这样的语句`(void)param1;`通常用于抑制有关未使用的函数参数的警告。（顺便说一句，在 C++ 中，您还可以注释掉或删除参数名称。）

您是正确的，该功能什么都不做。如果其他代码没有创建指向它的指针，您可以安全地删除它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T09:12:59.627

这是一个空函数。强制转换以`void`抑制有关未使用参数的警告。

当必须无条件调用函数或必须提供有效的函数指针时，通常会使用此类函数，但实际上与函数无关。

我的编译器的代码生成器中有一些这样的函数。实际上有两个代码生成器，一个用于 x86，另一个用于 MIPS。我编译和链接一个或另一个，从不同时两者。

代码生成器内部不同，但具有相同的外部 API。因此，特定于一个 CPU 的某些功能有一些工作要做，而另一个 CPU 的相同功能则无关紧要。从逻辑上讲，其中一些是空的，因为无事可做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T09:11:16.150

我的猜测（意见 - 对不起！）它可能是你所说的存根。如果您有一个函数需要一个或多个函数指针来实现某事，并且它不允许 NULL（不要为此烦恼），那么您必须提供一些东西供它调用。

演员表可能是为了避免“未使用的参数”警告。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T09:07:10.567

你是对的，这没有意义。

它所做的只是通过评估参数并将结果转换为 来明确忽略参数`(void)`，然后返回 0。

返回值是否在调用上下文中使用？最好的方法当然是删除调用并在使用返回值时将其替换为 0，然后测试程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T09:12:07.567

当您不使用传递给它的参数时，一些编译器会显示错误/警告，以避免在您的代码中提及它。如果函数没有在任何地方调用或没有分配给任何函数指针，您可以删除它，因为它没有做任何特定的事情

# iphone - 使用自定义方案启动应用程序，在 ios 的 Safari 中显示错误

> ID：15921500
> 
> 赞同：0
> 
> 时间：2013-04-10T09:05:23.670
> 
> 标签：iphone, ios

我尝试使用自定义方案（如`myapp://`.
这在安装应用程序时工作正常，但是当卸载应用程序时，safari 显示：
`page cannot found`popup。
我的要求是我需要重定向到某个页面，比如说苹果商店。
这个怎么做？
有什么建议么？

有这方面的更新吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:10:48.297

你不能，因为处理自定义 URL 方案的应用程序不再可用 iOS 不再知道如何处理自定义 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:23:58.100

我遇到了同样的问题，最后附加一个问号（？）似乎可以解决它。它在 ios5 之前工作正常，但从 ioss 6 开始需要这个问号。在尝试启动时，你应该说 myapp://?parameter1=xyz

希望这可以帮助。

# ios - 如何使用多纹理作为一个纹理？

> ID：15921501
> 
> 赞同：0
> 
> 时间：2013-04-10T09:05:31.277
> 
> 标签：ios, opengl-es

我想用胶水（函数如下）来绘制球体，它只支持一个纹理。而且我必须在 iphone4 上使用大纹理（8096X4096）。我将大纹理分成几个小纹理（512X512）。如何使用多纹理将这些小纹理组合成一个大纹理以传递给 gluSphere 使用？？？？

先感谢您！

```
 //glues draw sphere function
GLAPI void APIENTRY gluSphere(GLUquadric* qobj, GLfloat radius, GLint slices, GLint stacks)
            {
               GLint i, j;
               GLfloat sinCache1a[CACHE_SIZE];
               GLfloat cosCache1a[CACHE_SIZE];
               GLfloat sinCache2a[CACHE_SIZE];
               GLfloat cosCache2a[CACHE_SIZE];
               GLfloat sinCache3a[CACHE_SIZE];
               GLfloat cosCache3a[CACHE_SIZE];
               GLfloat sinCache1b[CACHE_SIZE];
               GLfloat cosCache1b[CACHE_SIZE];
               GLfloat sinCache2b[CACHE_SIZE];
               GLfloat cosCache2b[CACHE_SIZE];
               GLfloat sinCache3b[CACHE_SIZE];
               GLfloat cosCache3b[CACHE_SIZE];
               GLfloat angle;
               GLfloat zLow, zHigh;
               GLfloat sintemp1 = 0.0, sintemp2 = 0.0, sintemp3 = 0.0, sintemp4 = 0.0;
               GLfloat costemp1 = 0.0, costemp2 = 0.0, costemp3 = 0.0, costemp4 = 0.0;
               GLfloat vertices[(CACHE_SIZE+1)*2][3];
               GLfloat texcoords[(CACHE_SIZE+1)*2][2];
               GLfloat normals[(CACHE_SIZE+1)*2][3];
               GLboolean needCache2, needCache3;
               GLint start, finish;
               GLboolean texcoord_enabled;
               GLboolean normal_enabled;
               GLboolean vertex_enabled;
               GLboolean color_enabled;

               if (slices>=CACHE_SIZE)
               {
                  slices=CACHE_SIZE-1;
               }

               if (stacks>=CACHE_SIZE)
               {
                  stacks=CACHE_SIZE-1;
               }

               if (slices<2 || stacks<1 || radius<0.0)
               {
                  gluQuadricError(qobj, GLU_INVALID_VALUE);
                  return;
               }

               /* Cache is the vertex locations cache */
               /* Cache2 is the various normals at the vertices themselves */
               /* Cache3 is the various normals for the faces */
               needCache2=needCache3=GL_FALSE;

               if (qobj->normals==GLU_SMOOTH)
               {
                  needCache2=GL_TRUE;
               }

               if (qobj->normals==GLU_FLAT)
               {
                  if (qobj->drawStyle!=GLU_POINT)
                  {
                     needCache3=GL_TRUE;
                  }
                  if (qobj->drawStyle==GLU_LINE)
                  {
                     needCache2=GL_TRUE;
                  }
               }

               for (i=0; i<slices; i++)
               {
                  angle=2.0f*PI*i/slices;
                  sinCache1a[i]=(GLfloat)sin(angle);
                  cosCache1a[i]=(GLfloat)cos(angle);
                  if (needCache2)
                  {
                     sinCache2a[i] = sinCache1a[i];
                     cosCache2a[i] = cosCache1a[i];
                  }
               }

               for (j=0; j<=stacks; j++)
               {
                  angle=PI*j/stacks;
                  if (needCache2)
                  {
                     if (qobj->orientation==GLU_OUTSIDE)
                     {
                        sinCache2b[j]=(GLfloat)sin(angle);
                        cosCache2b[j]=(GLfloat)cos(angle);
                     }
                     else
                     {
                        sinCache2b[j]=(GLfloat)-sin(angle);
                        cosCache2b[j]=(GLfloat)-cos(angle);
                     }
                  }

                  sinCache1b[j]=(GLfloat)(radius*sin(angle));
                  cosCache1b[j]=(GLfloat)(radius*cos(angle));
               }

               /* Make sure it comes to a point */
               sinCache1b[0]=0;
               sinCache1b[stacks]=0;

               if (needCache3)
               {
                  for (i=0; i<slices; i++)
                  {
                     angle=2.0f*PI*(i-0.5f)/slices;
                     sinCache3a[i]=(GLfloat)sin(angle);
                     cosCache3a[i]=(GLfloat)cos(angle);
                  }
                  for (j=0; j<=stacks; j++)
                  {
                     angle=PI*(j-0.5f)/stacks;
                     if (qobj->orientation==GLU_OUTSIDE)
                     {
                        sinCache3b[j]=(GLfloat)sin(angle);
                        cosCache3b[j]=(GLfloat)cos(angle);
                     }
                     else
                     {
                        sinCache3b[j]=(GLfloat)-sin(angle);
                        cosCache3b[j]=(GLfloat)-cos(angle);
                     }
                  }
               }

               sinCache1a[slices]=sinCache1a[0];
               cosCache1a[slices]=cosCache1a[0];
               if (needCache2)
               {
                  sinCache2a[slices]=sinCache2a[0];
                  cosCache2a[slices]=cosCache2a[0];
               }
               if (needCache3)
               {
                  sinCache3a[slices]=sinCache3a[0];
                  cosCache3a[slices]=cosCache3a[0];
               }

               /* Store status of enabled arrays */
               texcoord_enabled=GL_FALSE; //glIsEnabled(GL_TEXTURE_COORD_ARRAY);
               normal_enabled=GL_FALSE; //glIsEnabled(GL_NORMAL_ARRAY);
               vertex_enabled=GL_FALSE; //glIsEnabled(GL_VERTEX_ARRAY);
               color_enabled=GL_FALSE; //glIsEnabled(GL_COLOR_ARRAY);

               /* Enable arrays */
               glEnableClientState(GL_VERTEX_ARRAY);
               glVertexPointer(3, GL_FLOAT, 0, vertices);
               if (qobj->textureCoords)
               {
                  glEnableClientState(GL_TEXTURE_COORD_ARRAY);
                  glTexCoordPointer(2, GL_FLOAT, 0, texcoords);
               }
               else
               {
                  glDisableClientState(GL_TEXTURE_COORD_ARRAY);
               }
               if (qobj->normals!=GLU_NONE)
               {
                  glEnableClientState(GL_NORMAL_ARRAY);
                  glNormalPointer(GL_FLOAT, 0, normals);
               }
               else
               {
                  glDisableClientState(GL_NORMAL_ARRAY);
               }
               glDisableClientState(GL_COLOR_ARRAY);

               switch (qobj->drawStyle)
               {
                  case GLU_FILL:
                       if (!(qobj->textureCoords))
                       {
                          start=1;
                          finish=stacks-1;

                          /* Low end first (j == 0 iteration) */
                          sintemp2=sinCache1b[1];
                          zHigh=cosCache1b[1];

                          switch(qobj->normals)
                          {
                             case GLU_FLAT:
                                  sintemp3=sinCache3b[1];
                                  costemp3=cosCache3b[1];
                                  normals[0][0]=sinCache3a[0]*sinCache3b[0];
                                  normals[0][1]=cosCache3a[0]*sinCache3b[0];
                                  normals[0][2]=cosCache3b[0];
                                  break;
                             case GLU_SMOOTH:
                                  sintemp3=sinCache2b[1];
                                  costemp3=cosCache2b[1];
                                  normals[0][0]=sinCache2a[0]*sinCache2b[0];
                                  normals[0][1]=cosCache2a[0]*sinCache2b[0];
                                  normals[0][2]=cosCache2b[0];
                                  break;
                             default:
                                  break;
                          }

                          vertices[0][0]=0.0f;
                          vertices[0][1]=0.0f;
                          vertices[0][2]=radius;

                          if (qobj->orientation==GLU_OUTSIDE)
                          {
                             for (i=slices; i>=0; i--)
                             {
                                switch(qobj->normals)
                                {
                                   case GLU_SMOOTH:
                                        normals[slices-i+1][0]=sinCache2a[i]*sintemp3;
                                        normals[slices-i+1][1]=cosCache2a[i]*sintemp3;
                                        normals[slices-i+1][2]=costemp3;
                                        break;
                                   case GLU_FLAT:
                                        if (i!=slices)
                                        {
                                           normals[slices-i+1][0]=sinCache3a[i+1]*sintemp3;
                                           normals[slices-i+1][1]=cosCache3a[i+1]*sintemp3;
                                           normals[slices-i+1][2]=costemp3;
                                        }
                                        else
                                        {
                                           /* We must add any normal here */
                                           normals[slices-i+1][0]=sinCache3a[i]*sintemp3;
                                           normals[slices-i+1][1]=cosCache3a[i]*sintemp3;
                                           normals[slices-i+1][2]=costemp3;
                                        }
                                        break;
                                   case GLU_NONE:
                                   default:
                                        break;
                                }
                                vertices[slices-i+1][0]=sintemp2*sinCache1a[i];
                                vertices[slices-i+1][1]=sintemp2*cosCache1a[i];
                                vertices[slices-i+1][2]=zHigh;
                             }
                          }
                          else
                          {
                             for (i=0; i<=slices; i++)
                             {
                                switch(qobj->normals)
                                {
                                   case GLU_SMOOTH:
                                        normals[i+1][0]=sinCache2a[i]*sintemp3;
                                        normals[i+1][1]=cosCache2a[i]*sintemp3;
                                        normals[i+1][2]=costemp3;
                                        break;
                                   case GLU_FLAT:
                                        normals[i+1][0]=sinCache3a[i]*sintemp3;
                                        normals[i+1][1]=cosCache3a[i]*sintemp3;
                                        normals[i+1][2]=costemp3;
                                        break;
                                   case GLU_NONE:
                                   default:
                                        break;
                                }
                                vertices[i+1][0]=sintemp2*sinCache1a[i];
                                vertices[i+1][1]=sintemp2*cosCache1a[i];
                                vertices[i+1][2]=zHigh;
                             }
                          }
                          glDrawArrays(GL_TRIANGLE_FAN, 0, (slices+2));

                          /* High end next (j==stacks-1 iteration) */
                          sintemp2=sinCache1b[stacks-1];
                          zHigh=cosCache1b[stacks-1];
                          switch(qobj->normals)
                          {
                             case GLU_FLAT:
                                  sintemp3=sinCache3b[stacks];
                                  costemp3=cosCache3b[stacks];
                                  normals[0][0]=sinCache3a[stacks]*sinCache3b[stacks];
                                  normals[0][1]=cosCache3a[stacks]*sinCache3b[stacks];
                                  normals[0][2]=cosCache3b[stacks];
                                  break;
                             case GLU_SMOOTH:
                                  sintemp3=sinCache2b[stacks-1];
                                  costemp3=cosCache2b[stacks-1];
                                  normals[0][0]=sinCache2a[stacks]*sinCache2b[stacks];
                                  normals[0][1]=cosCache2a[stacks]*sinCache2b[stacks];
                                  normals[0][2]=cosCache2b[stacks];
                                  break;
                             default:
                                  break;
                          }

                          vertices[0][0]=0.0f;
                          vertices[0][1]=0.0f;
                          vertices[0][2]=-radius;

                          if (qobj->orientation==GLU_OUTSIDE)
                          {
                             for (i=0; i<=slices; i++)
                             {
                                switch(qobj->normals)
                                {
                                   case GLU_SMOOTH:
                                        normals[i+1][0]=sinCache2a[i]*sintemp3;
                                        normals[i+1][1]=cosCache2a[i]*sintemp3;
                                        normals[i+1][2]=costemp3;
                                        break;
                                   case GLU_FLAT:
                                        normals[i+1][0]=sinCache3a[i]*sintemp3;
                                        normals[i+1][1]=cosCache3a[i]*sintemp3;
                                        normals[i+1][2]=costemp3;
                                        break;
                                   case GLU_NONE:
                                   default:
                                        break;
                                }
                                vertices[i+1][0]=sintemp2*sinCache1a[i];
                                vertices[i+1][1]=sintemp2*cosCache1a[i];
                                vertices[i+1][2]=zHigh;
                             }
                          }
                          else
                          {
                             for (i=slices; i>=0; i--)
                             {
                                switch(qobj->normals)
                                {
                                   case GLU_SMOOTH:
                                        normals[slices-i+1][0]=sinCache2a[i]*sintemp3;
                                        normals[slices-i+1][1]=cosCache2a[i]*sintemp3;
                                        normals[slices-i+1][2]=costemp3;
                                        break;
                                   case GLU_FLAT:
                                        if (i!=slices)
                                        {
                                           normals[slices-i+1][0]=sinCache3a[i+1]*sintemp3;
                                           normals[slices-i+1][1]=cosCache3a[i+1]*sintemp3;
                                           normals[slices-i+1][2]=costemp3;
                                        }
                                        else
                                        {
                                           normals[slices-i+1][0]=sinCache3a[i]*sintemp3;
                                           normals[slices-i+1][1]=cosCache3a[i]*sintemp3;
                                           normals[slices-i+1][2]=costemp3;
                                        }
                                        break;
                                   case GLU_NONE:
                                   default:
                                        break;
                                }
                                vertices[slices-i+1][0]=sintemp2*sinCache1a[i];
                                vertices[slices-i+1][1]=sintemp2*cosCache1a[i];
                                vertices[slices-i+1][2]=zHigh;
                             }
                          }
                          glDrawArrays(GL_TRIANGLE_FAN, 0, (slices+2));
                       }
                       else
                       {
                          start=0;
                          finish=stacks;
                       }

                       for (j=start; j<finish; j++)
                       {
                          zLow=cosCache1b[j];
                          zHigh=cosCache1b[j+1];
                          sintemp1=sinCache1b[j];
                          sintemp2=sinCache1b[j+1];
                          switch(qobj->normals)
                          {
                             case GLU_FLAT:
                                  sintemp4=sinCache3b[j+1];
                                  costemp4=cosCache3b[j+1];
                                  break;
                             case GLU_SMOOTH:
                                  if (qobj->orientation==GLU_OUTSIDE)
                                  {
                                     sintemp3=sinCache2b[j+1];
                                     costemp3=cosCache2b[j+1];
                                     sintemp4=sinCache2b[j];
                                     costemp4=cosCache2b[j];
                                  }
                                  else
                                  {
                                     sintemp3=sinCache2b[j];
                                     costemp3=cosCache2b[j];
                                     sintemp4=sinCache2b[j+1];
                                     costemp4=cosCache2b[j+1];
                                  }
                                  break;
                             default:
                                  break;
                          }
                          for (i=0; i<=slices; i++)
                          {
                             switch(qobj->normals)
                             {
                                case GLU_SMOOTH:
                                     normals[i*2][0]=sinCache2a[i]*sintemp3;
                                     normals[i*2][1]=cosCache2a[i]*sintemp3;
                                     normals[i*2][2]=costemp3;
                                     break;
                                case GLU_FLAT:
                                     normals[i*2][0]=sinCache3a[i]*sintemp4;
                                     normals[i*2][1]=cosCache3a[i]*sintemp4;
                                     normals[i*2][2]=costemp4;
                                     break;
                                case GLU_NONE:
                                default:
                                     break;
                             }
                             if (qobj->orientation==GLU_OUTSIDE)
                             {
                                if (qobj->textureCoords)
                                {
                                   texcoords[i*2][0]=1-(GLfloat)i/slices;
                                   texcoords[i*2][1]=1-(GLfloat)(j+1)/stacks;
                                }
                                vertices[i*2][0]=sintemp2*sinCache1a[i];
                                vertices[i*2][1]=sintemp2*cosCache1a[i];
                                vertices[i*2][2]=zHigh;
                             }
                             else
                             {
                                if (qobj->textureCoords)
                                {
                                   texcoords[i*2][0]=1-(GLfloat)i/slices;
                                   texcoords[i*2][1]=1-(GLfloat)j/stacks;
                                }
                                vertices[i*2][0]=sintemp1*sinCache1a[i];
                                vertices[i*2][1]=sintemp1*cosCache1a[i];
                                vertices[i*2][2]=zLow;
                             }
                             switch(qobj->normals)
                             {
                                case GLU_SMOOTH:
                                     normals[i*2+1][0]=sinCache2a[i]*sintemp4;
                                     normals[i*2+1][1]=cosCache2a[i]*sintemp4;
                                     normals[i*2+1][2]=costemp4;
                                     break;
                                case GLU_FLAT:
                                     normals[i*2+1][0]=sinCache3a[i]*sintemp4;
                                     normals[i*2+1][1]=cosCache3a[i]*sintemp4;
                                     normals[i*2+1][2]=costemp4;
                                     break;
                                case GLU_NONE:
                                default:
                                     break;
                             }
                             if (qobj->orientation==GLU_OUTSIDE)
                             {
                                if (qobj->textureCoords)
                                {
                                   texcoords[i*2+1][0]=1-(GLfloat)i/slices;
                                   texcoords[i*2+1][1]=1-(GLfloat)j/stacks;
                                }
                                vertices[i*2+1][0]=sintemp1*sinCache1a[i];
                                vertices[i*2+1][1]=sintemp1*cosCache1a[i];
                                vertices[i*2+1][2]=zLow;
                             }
                             else
                             {
                                if (qobj->textureCoords)
                                {
                                   texcoords[i*2+1][0]=1-(GLfloat)i/slices;
                                   texcoords[i*2+1][1]=1-(GLfloat)(j+1)/stacks;
                                }
                                vertices[i*2+1][0]=sintemp2*sinCache1a[i];
                                vertices[i*2+1][1]=sintemp2*cosCache1a[i];
                                vertices[i*2+1][2]=zHigh;
                             }
                          }
                          glDrawArrays(GL_TRIANGLE_STRIP, 0, (slices+1)*2);
                       }
                       break;
                  case GLU_POINT:
                       for (j=0; j<=stacks; j++)
                       {
                          sintemp1=sinCache1b[j];
                          costemp1=cosCache1b[j];
                          switch(qobj->normals)
                          {
                             case GLU_FLAT:
                             case GLU_SMOOTH:
                                  sintemp2=sinCache2b[j];
                                  costemp2=cosCache2b[j];
                                  break;
                             default:
                                  break;
                          }

                          for (i=0; i<slices; i++)
                          {
                             switch(qobj->normals)
                             {
                                case GLU_FLAT:
                                case GLU_SMOOTH:
                                     normals[i][0]=sinCache2a[i]*sintemp2;
                                     normals[i][1]=cosCache2a[i]*sintemp2;
                                     normals[i][2]=costemp2;
                                     break;
                                case GLU_NONE:
                                default:
                                     break;
                             }
                             zLow=j*radius/stacks;
                             if (qobj->textureCoords)
                             {
                                texcoords[i][0]=1-(GLfloat)i/slices;
                                texcoords[i][1]=1-(GLfloat)j/stacks;
                             }
                             vertices[i][0]=sintemp1*sinCache1a[i];
                             vertices[i][1]=sintemp1*cosCache1a[i];
                             vertices[i][2]=costemp1;
                          }
                          glDrawArrays(GL_POINTS, 0, slices);
                       }
                       break;
                  case GLU_LINE:
                  case GLU_SILHOUETTE:
                       for (j=1; j<stacks; j++)
                       {
                          sintemp1=sinCache1b[j];
                          costemp1=cosCache1b[j];
                          switch(qobj->normals)
                          {
                             case GLU_FLAT:
                             case GLU_SMOOTH:
                                  sintemp2=sinCache2b[j];
                                  costemp2=cosCache2b[j];
                                  break;
                             default:
                                  break;
                          }

                          for (i=0; i<=slices; i++)
                          {
                             switch(qobj->normals)
                             {
                                case GLU_FLAT:
                                     normals[i][0]=sinCache3a[i]*sintemp2;
                                     normals[i][1]=cosCache3a[i]*sintemp2;
                                     normals[i][2]=costemp2;
                                     break;
                                case GLU_SMOOTH:
                                     normals[i][0]=sinCache2a[i]*sintemp2;
                                     normals[i][1]=cosCache2a[i]*sintemp2;
                                     normals[i][2]=costemp2;
                                     break;
                                case GLU_NONE:
                                default:
                                     break;
                             }
                             if (qobj->textureCoords)
                             {
                                texcoords[i][0]=1-(GLfloat)i/slices;
                                texcoords[i][1]=1-(GLfloat)j/stacks;
                             }
                             vertices[i][0]=sintemp1*sinCache1a[i];
                             vertices[i][1]=sintemp1*cosCache1a[i];
                             vertices[i][2]=costemp1;
                          }
                          glDrawArrays(GL_LINE_STRIP, 0, slices+1);
                       }

                       for (i=0; i<slices; i++)
                       {
                          sintemp1=sinCache1a[i];
                          costemp1=cosCache1a[i];
                          switch(qobj->normals)
                          {
                             case GLU_FLAT:
                             case GLU_SMOOTH:
                                  sintemp2=sinCache2a[i];
                                  costemp2=cosCache2a[i];
                                  break;
                             default:
                                  break;
                          }

                          for (j=0; j<=stacks; j++)
                          {
                             switch(qobj->normals)
                             {
                                case GLU_FLAT:
                                     normals[j][0]=sintemp2*sinCache3b[j];
                                     normals[j][1]=costemp2*sinCache3b[j];
                                     normals[j][2]=cosCache3b[j];
                                     break;
                                case GLU_SMOOTH:
                                     normals[j][0]=sintemp2*sinCache2b[j];
                                     normals[j][1]=costemp2*sinCache2b[j];
                                     normals[j][2]=cosCache2b[j];
                                     break;
                                case GLU_NONE:
                                default:
                                     break;
                             }

                             if (qobj->textureCoords)
                             {
                                texcoords[j][0]=1-(GLfloat)i/slices;
                                texcoords[j][1]=1-(GLfloat)j/stacks;
                             }
                             vertices[j][0]=sintemp1*sinCache1b[j];
                             vertices[j][1]=costemp1*sinCache1b[j];
                             vertices[j][2]=cosCache1b[j];
                          }
                          glDrawArrays(GL_LINE_STRIP, 0, stacks+1);
                       }
                       break;
                  default:
                       break;
                }

               /* Disable or re-enable arrays */
               if (vertex_enabled)
               {
                  /* Re-enable vertex array */
                  glEnableClientState(GL_VERTEX_ARRAY);
               }
               else
               {
                  glDisableClientState(GL_VERTEX_ARRAY);
               }

               if (texcoord_enabled)
               {
                  glEnableClientState(GL_TEXTURE_COORD_ARRAY);
               }
               else
               {
                  glDisableClientState(GL_TEXTURE_COORD_ARRAY);
               }

               if (normal_enabled)
               {
                  glEnableClientState(GL_NORMAL_ARRAY);
               }
               else
               {
                  glDisableClientState(GL_NORMAL_ARRAY);
               }

               if (color_enabled)
               {
                  glEnableClientState(GL_COLOR_ARRAY);
               }
               else
               {
                  glDisableClientState(GL_COLOR_ARRAY);
               }
            } 
```

/*结束*/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:10:18.573

首先回答这个问题，如果您使用的是 ES2，您可以尝试加载所有 16x8 纹理，但我想说其中 32 个目前在 iOS 上是最大的（从活动纹理的枚举来看）。如果您成功拥有所有纹理，则需要从片段着色器中的纹理坐标计算要使用的纹理：

```
int verticalTextureCount, horizontalTextureCount; //input tile count
float texCoordX, texCoordY; //input texture coordinates
int textureX = (int)(texCoordX*horizontalTextureCount); //texture to use
int textureY = (int)(texCoordY*verticalTextureCount); //texture to use
texCoordX -= (1.0/horizontalTextureCount)*textureX; //decreas offset
texCoordY -= (1.0/verticalTextureCount)*textureY; //decreas offset
texCoordX *= horizontalTextureCount; //rescale
texCoordY *= verticalTextureCount; //rescale 
```

此时，您可以编写verticalTextureCount*horizo​​ntalTextureCount “if statements”，使用textureX 和textureY 来确定要使用的纹理和texCoors 来获取纹素。那或多或少是这样的。

其次，关于讨论，不，不要那样做。如果纹理太大，那就太大了。如果我敢猜测，我会说您正在尝试制作一个具有某种行星的应用程序，您希望在该行星上具有一些极端的缩放功能，并且为此您需要一些详细的纹理。如果是这种情况或类似情况，请创建多个将用作纹理的图像，例如：有 1 个图像在其上放置一个完整的球体，4 个图像，每个图像有四分之一的球体，16 个图像......以及所有这些图像大小相同，如 2048*2048。

现在是最好的部分，您需要一个动态系统来根据您的需要加载和卸载图像。如果球体被缩小，您只需要 1 个完整的图像并像以前一样绘制。如果放大很多，则需要检查最适合的纹理级别并检查球体的哪些部分可见，以便仅加载所需的纹理并仅绘制可见的球体部分。这不是一件容易的事，但它与许多可以在 3D 中看到我们的星球的应用程序中的原理或多或少相同。它会在运行时检查您正在查看行星的哪个部分以及查看哪些细节，如果需要，通常会向服务器发送请求以接收详细图像，并创建要显示的详细纹理。

# c# - 如何实现不简单封装字段的数组属性？

> ID：15921503
> 
> 赞同：3
> 
> 时间：2013-04-10T09:05:44.703
> 
> 标签：c#, arrays, properties

我想实现一个属性，该属性根据它接收到的索引返回一个值。我*不*只是封装一个私有数组。事实上，我将返回的数据没有存储在任何数组中，而是存储在成员对象中。此数组属性将只是一种以索引方式访问此数据的方式，而无需以索引方式存储它。

根据[这篇](http://msdn.microsoft.com/en-us/library/aa288464%28v=vs.71%29.aspx)文章，以下应该有效：

```
public double Angles[int i] 
{
    get { // return a value based on i; }
} 
```

但是，我收到以下错误：

```
The type or namespace 'i' could not be found (are you missing a using directive or an assembly reference?)
Invalid token ']' in class, struct or interface member declaration
Invalid expression term 'int'
Bad array declarator: To declarate a managed array the rank specifier precedes the variable's identifier. To declare a fixed size buffer field, use the fixed keyword before the field type.
Array size cannot be specified in a variable declaration (try initializing with a 'new' expression) 
```

从这些错误中，我认为编译器似乎认为我正在尝试创建一个数组成员。显然我的语法在这里是错误的。谁能告诉我这样做的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:07:44.040

C# 中不存在命名索引器。但是，您可以添加为*具有*`Angles`索引器的某种类型的对象，即

 *```
public class Foo {
    public Angles Angles { get { return angles; } }
    ...
}

...

public class Angles {
    public double this[int index] { get { ... } }
    ...
} 
```

或者，如果您希望在一个类中实现：

```
public class Foo : IAngles {
    public IAngles Angles { get { return this; } }
    double IAngles.this[int index] { get { ... } }
}

public interface IAngles {
    double this[int index] { get;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:08:55.003

该方法必须如下所示：

```
public double this[int i] 
{
    get { // return a value based on i; }
} 
```*

# php - 循环遍历 2 个不同的数组以检查值是否存在

> ID：15921506
> 
> 赞同：0
> 
> 时间：2013-04-10T09:05:49.773
> 
> 标签：php, arrays, codeigniter, multidimensional-array

好吧，我有这个由 3 个对象数组组成的数组，所以它看起来像

```
$invoice
$invoice->foo
$invoice->foo->bars
$invoice->bars
$invoice->foobars 
```

我将所有的 foo 条都显示在表格中，例如

```
<?php foreach($invoice->foo->bars as $bar) { ?>
<tr>
    <td>
        <?php echo $bar->some_field;
    </td>
    <td>
        <?php echo $bar->another_field;
    </td>
</tr> 
```

我有一个下拉按钮，看起来像

```
 <ul>
    <li><a href="some_url/edit/$bar->id">edit</a></li>
    <li><a href="some_url/delete/$bar->id">Delete</a></li>
    <li><a href="some_url/add_foobar/$bar->id">Add foobar</a></li>
</ul> 
```

我目前是否正在通过这样做来检查酒吧是否有 foobar

```
for ($i=0; $i < count($invoice->foobars); $i++) { 
    $foobar_bars[] = $invoice->foobars[$i]->foobar_bar_id;
} 
```

在 $invoice->foo->bars 循环中，我检查以显示按钮

```
<ul>
    <li><a href="some_url/edit/$bar->id">edit</a></li>
    <li><a href="some_url/delete/$bar->id">Delete</a></li>
<?php if(!in_array($bar->dd_id, $companion_bars)){ ?>
    <li><a href="some_url/add_foobar/$bar->id">Add Foobar</a></li>
<?php } ?>
</ul> 
```

我想知道这是否是最有效的方法，还是他们检查酒吧是否有 foobar 的更好方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:21:44.437

我认为最有效的方法是实际使用一种方法来告诉您是否是这种情况：

```
if ($bar->hasCompanionBar()) {
    // the condition is TRUE
} 
```

这样，您可以将最有效的决定推迟到以后。这将允许您在代码库的整个生命周期内创建最有效的代码。

# php - 从 Codeigniter 中的视图调用身份验证方法是否可以？

> ID：15921509
> 
> 赞同：0
> 
> 时间：2013-04-10T09:05:55.857
> 
> 标签：php, codeigniter, authentication, tankauth

我正在使用带有 Codeigniter 的 TankAuth，我想知道从视图调用库特定方法是否可以，而不是从控制器传递它们？例如，

```
$this->tank_auth->is_logged_in() 
```

从视图调用输出动态 HTML 比从控制器传递变量方便得多。然而，它安全吗？这是可接受的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:10:54.953

没有理由你不能这样做，但它违反了 MVC 概念。你可以在扩展控制器的构造函数中设置这些东西，这样你就可以在所有控制器中使用像 $is_logged_in 这样的变量，以使其更容易。

# api - google plus 活动搜索查询格式

> ID：15921512
> 
> 赞同：4
> 
> 时间：2013-04-10T09:06:05.180
> 
> 标签：api, google-plus

你知道activity中查询的格式是什么吗：search api方法。我可以多使用一些析取词、连词或短语吗？

# iphone - 如何修改/本地化“此应用无权访问..”隐私消息

> ID：15921513
> 
> 赞同：8
> 
> 时间：2013-04-10T09:06:10.267
> 
> 标签：iphone, ios, localization, plist

如果我撤销应用程序对我的照片的访问权限，我会得到这个，即使我的设备语言不是英语：

![在此处输入图像描述](https://i.stack.imgur.com/QgMQD.png)
有没有办法本地化这条消息？我还没有找到适合在 plist 文件中设置的密钥。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T09:34:39.660

该消息由系统自动本地化。你没有办法本地化它。

您的应用必须具有您希望以该语言显示消息的语言的本地化。

如果您的应用程序具有法语本地化，并且您的系统设置为法语，则该消息将以法语显示。但是，如果您的应用未本地化为法语，则尽管系统语言设置为法语，该消息仍会以应用的基本语言（通常为英语）显示。

![在此处输入图像描述](https://i.stack.imgur.com/NNHAH.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:30:33.523

这是操作系统视图，取决于您设备选择的语言

# android - 如何将多个图像上传到网络服务？

> ID：15921522
> 
> 赞同：1
> 
> 时间：2013-04-10T09:06:47.223
> 
> 标签：android, web-services

我已经使用以下方法将单个图像上传到 Web 服务：

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.setOutputSoapObject(request);
envelope.dotNet = true;
HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
androidHttpTransport.call(SOAP_ACTION, envelope); 
```

Web 服务接受 base64 编码的字符串作为参数。我想将多张图片上传到网络服务。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:09:56.543

> 我想将多张图片上传到网络服务

=> 很简单，当您完成将单个图像上传到网络时，您可以尝试循环上传多个图像。

但是在这里，您只需要创建一个单独的 Web 服务来逐个捕获图像并将响应发送到 Android 客户端。上传完所有图像后，使用图像 ID 调用主 Web 服务。

否则，不可能在一次调用中发送多张图像，如果您这样做了，那么请为`OutOfMemoryError`异常做好准备。

# azure - 大学生的 Azure 配置

> ID：15921525
> 
> 赞同：1
> 
> 时间：2013-04-10T09:06:54.777
> 
> 标签：azure

希望我的问题在这里正确的论坛。我刚刚检查了 windows azure 的定价模型并检查了不同的配置选项： http: ![在此处输入图像描述](https://i.stack.imgur.com/fYLDN.png) [//www.windowsazure.com/de-de/pricing/calculator/](http://www.windowsazure.com/de-de/pricing/calculator/)

我作为一名开发人员已经工作了将近两年，并且在 IIS 和 WPF 技术方面做了很多工作。作为一个小型私人项目，我使用 MVC4 Web API 检查了 HTML 5 和 JS，并想知道我需要什么 azure 配置来托管 MVC 4 Web API 项目。它是虚拟机还是完整的计算器？什么好处比另一个授予？

我马上就要开始学习了，所以我想要我能买到的最便宜的。我不会大量使用它（主要是出于测试原因），我认为也不会有太多流量。虚拟机是否也包括使用 IIS 的可能性？

我还可以用 VM/完整计算器以外的东西运行 MVC 项目吗？

如果由于某种原因我的流量突然爆炸，会发生什么？在我增加机器的功率之前，我的服务会被关闭吗？还是我会收到巨额账单并感到非常惊讶？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:14:51.220

使用网站。您可以从 10 个完全免费的网站开始！所以这是最便宜的。它当然支持 MVC4 Web API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:16:45.063

对于初学者，您可以获得[3 个月的试用期](http://www.windowsazure.com/en-us/pricing/free-trial/)，并获得足够的积分。默认情况下，您的帐户会有支出限制。这意味着如果您开始获得过多的流量，您的服务将关闭，您无需支付任何额外费用。我认为您可以配置愿意支付的金额，但我从未尝试过，它仍然是默认值，即 0$。

如果您需要纵向扩展或横向扩展，您应该从共享网站开始，稍后再转到预留实例、VM 或 Web 角色。

# node.js - node.js 中的对象存储

> ID：15921532
> 
> 赞同：1
> 
> 时间：2013-04-10T09:07:18.020
> 
> 标签：node.js

如何在 node.js 中创建可重复使用的空白对象？例如 ： `In file1 :`

```
var Result = {
error :false,
errorReport :[]
}
exports.Result = Result; 
```

`In file 2 :`

```
var result = require('../file1');
exports.doSomething  = function(){
var output = result.Result;
output.error = true;
output.errorReport = some_error_array;
} 
```

现在，每次我调用 doSomething() 时，很明显最后一个`result`会被缓存。但是，每次我调用 doSomething() 时，我都想要一个新的对象，因为它是在`Result`没有任何额外编程的情况下声明的（我不想每次对`Result`对象做一些事情时都重置属性。我在这里遗漏了任何小细节吗？请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:16:19.440

你可以把它变成一个类：

```
exports.Result = function() {
  this.error = false;
  this.errorReport = [];
};

// later on:
var output = new result.Result();
... 
```

或者甚至让它花哨，以便您可以传递参数：

```
exports.Result = function(error, errorReport) {
  this.error = error === undefined ? false : error;
  this.errorReport = errorReport === undefined ? [] : errorReport;
};

// later
var output = new result.Result(true, some_error_array); 
```

# node.js - 如何显示弹出窗口而不是重定向到 Facebook？

> ID：15921539
> 
> 赞同：1
> 
> 时间：2013-04-10T09:07:45.660
> 
> 标签：node.js, facebook, express, passport.js, facebook-authentication

我使用[本教程](http://passportjs.org/guide/facebook/)通过 facebook 对用户进行身份验证。但我需要显示弹出窗口而不是重定向到 facebook 网站。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:16:12.670

我认为，这是不可能的，在 facebook 登录后，它会重定向到我们在创建应用程序时提供的重定向 url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T13:05:13.263

我已经设法将一个使用 Node.js、PassportJS 和 Facebook、MongoDB、REquireJS 和 Backbone.js 的项目组合在一起

[https://github.com/rafaelfaria/PassportJS-Facebook-Client-Auth](https://github.com/rafaelfaria/PassportJS-Facebook-Client-Auth)

一探究竟。我希望这就是你要找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-18T12:06:25.867

您可以在使用身份验证时定义 display:"popup" 属性，以下是代码片段 -

```
app.get('/auth/facebook', passport.authenticate('facebook', { display: 'popup' })); 
```

# java - HTTP 状态 500 - 实例化 servlet 类 pkg.coreServlet 时出错

> ID：15921540
> 
> 赞同：11
> 
> 时间：2013-04-10T09:08:00.127
> 
> 标签：java, tomcat, servlets, classnotfoundexception

我正在创建简单的 servlet 并将其部署在 tomcat 服务器中，但出现以下错误：

> HTTP 状态 500 - 实例化 servlet 类 pkg.coreServlet 时出错

Tomcat服务器上的文件结构：

```
webapps     
| 
- aarya
  |
  - WEB-INF
    |
     -web.xml
     -src(folder)
       |
       -pkg
         |
         -coreServlet.class 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee 
    http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<servlet>
    <servlet-name>aaryaservlet</servlet-name>
    <servlet-class>pkg.coreServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>aaryaservlet</servlet-name>
        <url-pattern>/coreServlet</url-pattern>
    </servlet-mapping>
</web-app> 
```

coreServlet.java：

```
package pkg;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*; 

public class coreServlet extends HttpServlet
{
    /**
     * 
     */
    private static final long serialVersionUID = 1L;

public void doGet(HttpServletRequest req,HttpServletResponse res)
 throws ServletException,IOException

   {
        PrintWriter out = res.getWriter();
        res.setContentType("text/html");
        out.println("this is First servlet Example ");
    }
} 
```

我给出的 url 是`http://localhost:8080/aarya/coreServlet` 我尝试重新启动 tomcat，但我得到了同样的错误。我在哪里做错了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T09:11:02.883

不要把src文件夹放在WEB-INF目录下！！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-09T10:21:49.253

更改

```
private static final long serialVersionUID = 1L; 
```

到任何其他值，例如

```
private static final long serialVersionUID = 102831973239L; 
```

你也可以在eclipse中自动生成它。

这是因为应用程序中的每个 servlet 都有一个唯一的 id。而 tomcat 会导致两个具有相同 id 的 servlet 出现问题......

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-29T06:21:42.290

在我的情况下，缺少`private static final long serialVersionUID = 1L;`行导致了同样的错误。我添加了这条线，它起作用了！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-10T09:15:43.140

您是否关闭了 web.xml 中的 < web-app > 标签？从您发布的内容来看，结束标签似乎丢失了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-04-10T09:17:45.937

servlet 类应该在 WEB-INF/classes 而不是 WEB-INF/src。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-05T17:54:11.747

**在servlet 启动/请求**期间，可能会出现上述错误。希望您检查服务器日志的**完整堆栈跟踪**，如果您有 tomcat，您还可以在 500 Internal Server Error 页面的 html 预览中查看**确切原因** 。

奇怪的是，如果你再次尝试点击请求 url，你会得到 404 Not Found 页面。

您还可以通过在所有类构造函数初始化块上放置断点来调试此问题，其对象是在 servlet 启动/请求期间创建的。

就我而言，我没有为 Weld CDI 注入工作加载 javaassist jar。它显示 NoClassDefFound 错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-14T18:28:54.820

我遇到了 Servlet 实例化的问题。我清理了这个项目，它对我有用。在 Eclipse 菜单中，转到 Project->Clean。它应该工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-06T06:22:14.380

> **尝试这个：）**

**前：-**

```
<servlet>
    <servlet-name>TestServlet</servlet-name>
    <servlet-class>TestServlet</servlet-class>  
</servlet> 
```

**后：-**

```
 <servlet>
    <servlet-name>TestServlet</servlet-name>
    <servlet-class>operation.TestServlet</servlet-class>
 </servlet> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-27T18:38:52.307

确保以下内容：

1.  正确的“战争”文件结构，即 WEB-INF 和 META-INF
2.  “web.xml”文件设置正确。
3.  最后也是重要的：`private static final long serialVersionUID = 1L;`应该在你的课堂上（`<servlet-class>MyClass</servlet-class>`）。

# hadoop - Hadoop Hive 集成 INSERT 查询

> ID：15921541
> 
> 赞同：1
> 
> 时间：2013-04-10T09:08:00.163
> 
> 标签：hadoop, hbase, hive

我是 hadoop 新手，我正在尝试本教程： [https ://cwiki.apache.org/confluence/display/Hive/HBaseIntegration](https://cwiki.apache.org/confluence/display/Hive/HBaseIntegration)

1.使用参数成功启动hive：hive --auxpath /cygdrive/c/Hadoop/hive-0.9.0/lib/hive-hbase-handler-0.9.0.jar,/cygdrive/c/javaHBase/hbase -0.94.6/hbase-0.94.6.jar,/cygdrive/c/Hadoop/hive-0.9.0/lib/zookeeper-3.4.3.jar,/cygdrive/c/Hadoop/hive-0.9.0/lib /guava-r09.jar -hiveconf hbase.master=localhost:60010

2.启动hbase成功。

3.“CREATE TABLE hbase_table_1”成功完成

4.我用命令列表和显示表验证，一切正常

这是我的问题“INSERT OVERWRITE TABLE hbase_table_1 SELECT * FROM pokes WHERE foo=98;”

我在“htp://localhost:50060/tasklog?attemptid...”中搜索时收到此错误消息

```
java.lang.ClassNotFoundException: org/apache/hadoop/hive/hbase/HBaseSerDe
Continuing ...
java.lang.ClassNotFoundException:
org/apache/hadoop/hive/hbase/HiveHBaseTableInputFormat
Continuing ...
java.lang.ClassNotFoundException:
org/apache/hadoop/hive/hbase/HiveHBaseTableOutputFormat
Continuing ...
java.lang.NullPointerException
Continuing ...
java.lang.NullPointerException
 at
org.apache.hadoop.hive.ql.exec.FileSinkOperator.initializeOp(FileSinkOperator.java:280)
at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:357)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:433)
    at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:389)
    at org.apache.hadoop.hive.ql.exec.SelectOperator.initializeOp(SelectOperator.java:62)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:357)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:433)
    at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:389)
    at org.apache.hadoop.hive.ql.exec.FilterOperator.initializeOp(FilterOperator.java:78)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:357)
    at org.apache.hadoop.hive.ql.exec.Operator.initialize(Operator.java:433)
    at org.apache.hadoop.hive.ql.exec.Operator.initializeChildren(Operator.java:389)
... 
```

我试图将 hive jar 复制到 hbase install 和副 vesa...注意：我使用 hive 命令添加了必要的 JARS：ADD JAR C:...\hive-hbase-handler-0.9.0.jar 等。

hbase 版本：0.94.6 配置单元版本：0.9.0

任何额外的出口？还是配置？我需要帮助！非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:16:27.417

尝试通过在 hive CLI 中运行以下命令将这些 jar 添加到分布式缓存中，或者将这些行包含在`$HOME/.hiverc`文件中。那应该解决`ClassNotFoundException`.

```
ADD JAR ...../hive-0.9.0/lib/hive-hbase-handler-0.9.0.jar;
ADD JAR ...../hbase-0.94.1/hbase-0.94.6.jar;
ADD JAR ...../hbase-0.94.1/lib/zookeeper-3.4.3.jar;
ADD JAR ...../hbase-0.94.1/lib/guava-11.0.2.jar;
ADD JAR ...../hbase-0.94.1/lib/protobuf-java-2.4.0a.jar; 
```

在 mapred 模式（非本地）下运行 hive 查询时，这是必需的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-29T09:47:19.850

兄弟做以下事情。你的问题将得到解决。（根据您的版本更改）

将这些文件复制到 hadoop lib 目录 $HIVE_HOME/lib/hive-hbase-handler-0.8.1.jar,$HIVE_HOME/lib/hbase-0.90.0.jar,$HIVE_HOME/lib/zookeeper-3.3.1.jar, $HIVE_HOME/lib/guava-r06.jar 和 hive-serde jar

# jsf - 如何在 PrimeFaces 中动态显示日志文件的最后一部分

> ID：15921542
> 
> 赞同：0
> 
> 时间：2013-04-10T09:08:03.267
> 
> 标签：jsf, primefaces

我有 3 个日志文件和一个 selectone 菜单。根据选择，任何一个日志文件的最后一部分都需要动态显示。哪个 PrimeFace 组件将执行此操作以及如何执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:04:25.877

在 primefaces 中没有独立的组件，您应该使用一些基本原理。

1.  阅读日志文件的最后几行，你可能会看到这个问题[Java IO implementation of unix/linux "tail -f"](https://stackoverflow.com/questions/557844/java-io-implementation-of-unix-linux-tail-f)
2.  读取文件时，您应该将读取的行存储到托管 bean 中的字符串集合中
3.  在选择您的 selectOneMenu 时，您应该再次在同一个托管 bean 上更改文件名并重新生成您的集合。
4.  在您的 selectOneMenu（“更新”属性）的 ajax 完成事件上，您应该更新链接到您的集合的 jsf 显示组件。

# silverlight - Silverlight XAP 文件与临时 Internet 文件一起删除

> ID：15921545
> 
> 赞同：0
> 
> 时间：2013-04-10T09:08:14.103
> 
> 标签：silverlight, internet-explorer, xap

这个问题几乎与那些想要强制刷新 XAP 文件的问题相反。

我们有一个使用 Silverlight 4 的应用程序。虽然每次用户关闭 IE 时都会删除临时 Internet 文件，但有一个策略到位。不幸的是，所有的 xap 文件也都被删除了，下次用户打开 Internet Explorer 以再次访问该应用程序时需要下载这些文件。

在速度较慢的站点上，下载这 20 MB 的文件可能需要一些时间。

是否可以将 XAP 文件下载/存储在用户计算机的其他位置，而不是临时 Internet 文件目录？这可以编程到 Silverlight 应用程序中还是 Internet Explorer 问题。

我们真正需要做的是在不影响临时 Internet 文件目录的清理的情况下尽量减少下载限制。

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:28:43.623

Out of Browser 当然是要走的路。

XAP 文件独立于浏览器进行处理，您甚至可以使用脚本推送安装。

# javascript - 可访问的 jQuery 切换奇怪的行为

> ID：15921546
> 
> 赞同：0
> 
> 时间：2013-04-10T09:08:16.530
> 
> 标签：javascript, jquery

我正在设置一个可重用的 jQuery 切换功能（为我的雇主）以启用显示/隐藏内容（例如常见问题解答），以提高现有内联 onClick 绑定的可访问性。

在 JSFiddle 中，一切都快速而流畅，但是当我转移到预览服务器时，一个奇怪的行为变得明显。单击按钮可以正常工作，但是在单击按钮的链接文本时，在任何事情发生之前都会有明显的延迟。

脚本中是否有任何可能导致延迟的内容？或者任何明显可能引发某种冲突的东西？

无论如何，这是代码（基于[Mike Raynham 的可访问切换](http://www.mikeraynham.co.uk/articles/accessible-jquery-toggles)）：

[http://jsfiddle.net/internet_man/9yKKM/2/](http://jsfiddle.net/internet_man/9yKKM/2/)

html:

```
<div class="buttons"> 
    <ul> 
        <li><strong class="_toggle type noscript">This is the first toggle</strong> 
            <ul class="_toggle-this show-hide"> 
                <li><a href="#"><strong>Option One</strong></a></li> 
                <li><a href="#"><strong>Option Two</strong></a></li> 
                <li><a href="#"><strong>Option Three</strong></a></li> 
            </ul> 
        </li> 
        <li class="bad-break"><strong class="_toggle type noscript">This is the second toggle (a bit longer than the first)</strong> 
            <ul class="_toggle-this show-hide"> 
                <li><a href="#"><strong>Option One</strong></a></li> 
                <li><a href="#"><strong>Option Two</strong></a></li> 
            </ul> 
        </li> 
        <li class="bad-break"><strong class="_toggle type noscript">This is the third toggle (also somewhat longer)</strong> 
            <ul class="_toggle-this show-hide"> 
                <li><a href="#"><strong>Option One</strong></a></li> 
                <li><a href="#"><strong>Option Two</strong></a></li> 
            </ul> 
        </li> 
    </ul> 
</div> 
```

脚本：

```
var create_name = function(text) {
    var name = text.toLowerCase();
    name = name.replace(/^\s+|\s+jQuery|[^a-z0-9&\s-]/g, ''); 
    name = name.replace(/&/g, 'and'); 
    name = name.replace(/\s/g, '-'); 
    name = name.replace(/(-)+\1/g, "jQuery1"); 
    return name; 
}; 

var add_link = function() {
    var name = create_name(jQuery(this).text()); 
    jQuery(this).next('.toggle-this').attr('name', name); 
    jQuery(this).html('<a href="#' + name + '" title="Show content">' + jQuery(this).html() + '</a>'); 
}; 
var toggle = function(event) { 
    event.preventDefault(); 
    jQuery(this).toggleClass('expanded').nextAll('.toggle-this').slideToggle(100);
    jQuery('.toggle-this').not(jQuery(this).siblings()).slideUp(100);
    jQuery('.toggle').not(jQuery(this)).removeClass('expanded'); 
}; 

var remove_focus = function() { 
    jQuery(this).blur(); 
}; 

jQuery(function (){ 
    jQuery('._toggle').removeClass('_toggle, noscript').addClass('toggle'); 
    jQuery('._toggle-this').removeClass('_toggle-this').addClass('toggle-this');
    jQuery('._expanded').removeClass('_expanded').addClass('expanded'); 
    jQuery('.toggle:not(.expanded)').nextAll('.toggle-this').hide(); 
    jQuery('.toggle').each(add_link); 
    jQuery('.toggle').click(toggle); 
    jQuery('.toggle a').mouseup(remove_focus); 
}); 
```

CSS：

```
body
{
    font-size:62.5%;
    color:#666;
    font-family:arial,Helvetica,sans-serif;
}

a
{
    color:#462170;
}

ul
{
    list-style-type:none;
    margin-left:0;
    padding-left:0;
}

strong
{
    font-weight:normal;
}

div.buttons
{
    width:462px;
    line-height:2.2em;
    margin:1.5em 0;
}

.buttons li > strong
{
    font-size:1.9em;
}

.toggle, .buttons .type.noscript
{
    display:block;
    font-size:1.9em;
    height:65px;
    background:url(http://oi48.tinypic.com/dy6xf.jpg) 0 -85px no-repeat;
    padding:20px 0 0 90px;
    text-decoration:none;
    color:#462170;
    cursor:pointer;
    cursor:hand;
}

.toggle a
{
    text-decoration:none;
}

.toggle strong
{
    display:block;
    height:65px;
    border:1px dotted red;
}

.toggle:hover, .toggle:focus
{
    background-position:0 0;
}

.buttons .show-hide 
{
    border-bottom:6px solid white;
}

.buttons .show-hide li      
{
    margin-left:12px;
    border-bottom: 2px solid white;
    border-top:2px solid white;
    font-size:1em;
}

.buttons .show-hide a       
{
    display:block;
    height:15px;
    text-decoration:none;
    color:#462170;
    background:#f1f1f1 url(http://oi46.tinypic.com/6iedtw.jpg) 5px 14px no-repeat;
    padding:12px 0 15px 58px;
}

.buttons .show-hide a:hover, .connection-buttons .show-hide a:focus 
{
    text-decoration:underline;
    color:black;
    background-color:#ece8f0;
    background-position:5px -41px;
}

li.bad-break a
{
    padding-right:30%;
} 
```

笔记：

上的脚本 -- ._toggle 变成 .toggle，._toggle-this 变成 .toggle-this，.noscript 被删除，并且在（在这种情况下）类切换的强元素周围插入一个链接，指向下一个 '.toggle-这个'元素。

关闭脚本——没有创建切换，但它的样式就像手风琴展开了一样。

# sql - 在查询中使用 group by 有什么区别吗？

> ID：15921550
> 
> 赞同：0
> 
> 时间：2013-04-10T09:08:35.110
> 
> 标签：sql, group-by

我有一个查询

```
SELECT bk_publisher, bk_price FROM books
GROUP BY bk_price, bk_publisher 
```

和

```
SELECT bk_publisher ,bk_price FROM books 
```

两者都返回相同的结果。意味着我的表中有 12 条记录，两个查询都返回 12 条记录。有什么区别 ？虽然我使用的是 group by，它与聚合函数一起使用。但我想知道这里有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:10:43.813

```
SELECT bk_publisher, bk_price FROM books
GROUP BY bk_price, bk_publisher 
```

即使您的表包含重复数据，也会产生不同的（出版商、价格）对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:11:39.120

[SQL group by](http://www.w3schools.com/sql/sql_groupby.asp)帮助您按某个相同的值对不同的结果进行分组（对其他值使用聚合函数）

在您的情况下，它没有任何意义，但是当您想要基于相同字段聚合值时，您可以使用 group by。

例如，如果您想获得发布商的最高价格：

```
SELECT bk_publisher, max(bk_price) FROM books
GROUP BY bk_publisher 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:12:46.783

GROUP BY 语句用于按一个或多个列对结果集进行分组。当您有重复数据并且希望每个条目有一条记录时，使用分组依据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:12:49.167

当您使用时，它会挤压在输出中作为单行`GROUP BY`列出的具有相同列的多行。`GROUP BY`

这也意味着通常，`SELECT`列表中提到的所有其他列都必须包装在聚合函数中，如`sum()`, `avg()`,`count()`等。

一些 SQL 引擎（如 MySQL）允许不使用聚合，但许多人认为这是一个错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:15:51.707

**GROUP BY**子句显然没有效果，因为没有重复的`bk_price, bk_publisher`值组合。

# cordova - IBM Worklight - Worklight Console 的 MBS 中的文件 API 模拟

> ID：15921561
> 
> 赞同：0
> 
> 时间：2013-04-10T09:09:02.577
> 
> 标签：cordova, ibm-mobilefirst, worklight-mbs

有没有办法在工作灯项目的浏览器模拟器上模拟文件 API？我正在使用 Mozilla firefox 19.0.2

![在此处输入图像描述](https://i.stack.imgur.com/7C2ew.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:10:14.150

是的，您需要做的就是确保您的浏览器已正确配置以加载小程序。从逻辑上讲，安装 Java 运行时环境应该设置您的 Firefox Java 插件。也许这个插件在你的 Firefox 中被禁用，在工具 > 附加组件（然后插件选项卡）中检查它。如果您在 Windows 上运行，您还应该检查控制面板中的 Java 设置。

您还有另一种选择，即尝试使用其他浏览器，例如 Chrome 或 Safari。

# ajax - 迭代 Jquery var 列表

> ID：15921568
> 
> 赞同：1
> 
> 时间：2013-04-10T09:09:48.253
> 
> 标签：ajax, json, jquery

items 是我在下面的函数中使用的变量... items 值是

`[{"daLevel":"DA0","daName":"Da Name 0"},{"daLevel":"DA1","daName":"Da Name 1"},{"daLevel":"DA2","daName":"Da Name 2"},{"daLevel":"DA3","daName":"Da Name 3"},{"daLevel":"DA4","daName":"Da Name 4"},{"daLevel":"DA5","daName":"Da Name 5"},{"daLevel":"DA6","daName":"Da Name 6"},{"daLevel":"DA7","daName":"Da Name 7"},{"daLevel":"DA8","daName":"Da Name 8"},{"daLevel":"DA9","daName":"Da Name 9"},{"daLevel":"DA10","daName":"Da Name 10"}]`

我需要在选择框中显示 daName 值作为下拉列表。我无法从 items var 中获取 daName 值。任何建议都会对 gr8 有所帮助。提前致谢

```
function notifyDa(excessId) {
alert("notified");
var html = "<table><tr><td align='center' colspan='2'> Excess Notification </td></tr><tr><td>Select DA Holder</td><td><select id='daList'>";
    var ctx = '${contextPath}';
    var queryUrl = ctx + "/excessList.htm?getDaList=true";
    $.ajax({
        url : queryUrl,
        type : "POST",
        dataType : "text",
        success : function(result) {
            alert(result);
            **var items = result;
            alert("items *** "+items);
            alert("items[0] *** "+items.daName[0]);**

            $('#notifyDiv').empty();
            $('#notifyDiv').html(html);

            $("#pop").click(function() {
                $("#notifyDiv").fadeIn(1000);
                if (!$("#notifyDiv").is(':visible')) {
                    return;
                }
            });

            $("#notifyDiv").css({
                left : ($(window).width() - $('#notifyDiv').width()) / 2,
                top : ($(window).width() - $('#notifyDiv').width()) / 7,
                position : 'absolute'
            });

        },
        error : function() {

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:12:59.490

你可以试试这个

```
result = jQuery.parseJSON(result);  // as dataType is Text

items[0].daName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:15:48.543

您需要将**Datatype**更改为**JSON**，然后您可以使用 jQuery .each() 函数来解析您得到的 JSON。像这样的东西：

```
$(items).each(function(index,element){
    alert(element.daName); 
}); 
```

这将遍历所有对象并为您提供所需的字段。

# android - 无法在真实设备 android 中运行 IBM worklight 应用程序

> ID：15921574
> 
> 赞同：2
> 
> 时间：2013-04-10T09:10:11.157
> 
> 标签：android, ibm-mobilefirst, hybrid-mobile-app

我构建了一个工作灯应用程序。创建android应用程序并用本地机器测试这个应用程序，它在模拟器上工作正常。但是当我尝试用android平板电脑测试这个应用程序时，它通过错误“应用程序连接到服务失败”。

我尝试找到 application-descriptor.xml 并将 localhost 修复到`192.168.1.1:8080` 我的 ip 本地机器，但它不起作用。在我的平板电脑中，我无法去`192.168.1.1:8080/console/index.html`

任何人都可以帮助我解决这个问题。我如何在我的 worklight android 应用程序中修复这个并在我的 android 平板电脑上运行它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:45:08.570

需要检查的一些事项：
- 您的平板电脑和 Worklight 开发机器是否在同一个无线网络上？（他们需要！）
- 您的计算机上是否有防火墙，可能需要配置以让流量通过。作为测试，您可以暂时禁用防火墙，然后查看您是否可以访问（受禁用防火墙所涉及风险的免责声明）。不禁用防火墙的测试是尝试从同一子网上的另一台台式机/笔记本电脑访问 192.168.1.1:8080。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T21:51:16.690

1.  检查本地机器 ipconfig 中的 ip（字段 Adaptador de Ethernet）
2.  在字段主机名配置服务器中设置此 IP。

3.  重建

4.  另一项测试是在同一网络中的其他机器中检查方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T10:25:10.067

How about adding "192.168.181.1:8080" in application-descriptor.xml?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T04:19:05.117

在命令窗口中，运行`ipconfig`并复制 IPv4 地址。这是您需要作为值放置`worklightServerRootURL`在文件 application-descriptor.xml 中的 IP 地址。

您现在使用的 IP 地址在我看来不像您需要使用的正确（公共）IP 地址。试试我上面的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T17:47:38.367

我建议以下调试步骤：

a) 转到您的设备浏览器并浏览到 http://xx.xx.xx.xx:8080/console

-> 如果这不起作用，您有一个明显的 IP 地址问题。然后你必须弄清楚为什么，也许你有一个赛门铁克的东西可以阻止任何传入你桌面的流量 - 他们确实这样做了。你应该做一个明确的允许。

b) 如果 a) 有效，那么您需要检查您的代码以确保您的应用程序在启动时确实尝试连接到服务器。否则应用程序只会在调用适配器时尝试连接。

现在，转到您的代码。打开 initOptions.js 文件。我通常会将 connectOnStartup 设置为 true，但也会启用 onConnectionFailure 以便它在没有连接时脱机运行。

var wlInitOptions = {

```
// # Should application automatically attempt to connect to Worklight Server on application start up
// # The default value is true, we are overriding it to false here.
connectOnStartup : true,

// # The callback function to invoke in case application fails to connect to Worklight Server
onConnectionFailure: function (){wlCommonInit();},

// # Worklight server connection timeout
timeout: 2000, 
```

};

3) 确保您在 application-descriptor.xml 中有正确的 URL

<worklightServerRootURL> [http://xx.xx.xx.xx:8080](http://xx.xx.xx.xx:8080) </worklightServerRootURL>

如果您使用的是消费者版（实际购买的 WL），您的 URL 将是。<worklightServerRootURL> [http://xx.xx.xx.xx:9080/worklight](http://xx.xx.xx.xx:9080/worklight) </worklightServerRootURL>

（注意这些 URL 之间没有空格 - 只是这个网站在有换行符时放了一个空格）

将您的代码重新部署到 WL 服务器并创建一个新的 APK 文件。使用新的 APK 文件更新您的设备。

4）再次使用控制台进行测试，您应该看到控制台。单击预览应用程序链接，它应该可以工作。

5) 现在您已经更新了服务器上的代码和 APK 文件。在设备上再次打开它。

您仍然看到错误消息吗？

如果事情还是不行。

6) 进入应用程序设置，因为您启用了离线模式，它将允许您访问应用程序设置（它是 Android 中的第 4 个按钮）进入**Worklight 设置**。选择**服务器地址**-> 将工作灯 URL 添加到服务器 URL。当您返回应用程序时，这将自动从您的 WL 服务器重新加载内容。

# jquery - jQuery DOMNodeInserted：查找特定元素

> ID：15921575
> 
> 赞同：0
> 
> 时间：2013-04-10T09:10:11.420
> 
> 标签：jquery, mutation-events

我想知道在添加特定元素时如何监听 DOM，然后对其采取行动。

在最初加载 DOM 之后，会在很久之后加载一个 div(.myElement) ：

```
<div class="container">.
   ...
   ...
   ...
   <div class="myElement"></div>
</div>

 $("div.container").bind("DOMNodeInserted",function(){
        alert("div.myElement has just been appended");
    }); 
```

现在是元素：

```
<div class="myElement"></div> 
```

被添加到父 div（容器）中，我想运行一个函数。我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:13:05.380

你不能。[DOmNodeInserted](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)已被删除，没有其他选择。

提供类似行为的解决方案是

*   拉动，即`setInterval`添加测试。那会降低性能。
*   更改插入元素的代码。

# c - 将 Char 数组附加到 Char 指针

> ID：15921577
> 
> 赞同：0
> 
> 时间：2013-04-10T09:10:14.890
> 
> 标签：c, arrays, pointers, copy, char

我在这方面已经有一段时间了，我似乎没有弄清楚。

我有这个代码：

```
 unsigned char *src;
    int length = (parameterArray[i].sizeInBits/8) + 1; // check how long array should be
    unsigned char tmp[length]; // declare array

    memcpy(tmp, (char*)&parameterArray[i].valueU8, length); // in this case copy char to array
    src = realloc(src, strlen(src) + strlen(tmp)); // reallocate space for total string
    strncat(src, tmp, strlen(tmp)); // merge 
```

每次代码在重新分配部分崩溃时。

我几乎尝试了所有方法，但没有任何效果。请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:24:40.753

`src`是一个未初始化的指针，将保存一个随机内存地址。状态的先决条件[`realloc()`](http://en.cppreference.com/w/c/memory/realloc)。从链接的参考页面：

> 重新分配给定的内存区域。**它必须事先由 malloc()、calloc() 或 realloc() 分配，并且尚未用 free() 释放，否则，结果是未定义的。**

当使用`realloc()`将结果存储到临时变量时，以避免在失败时发生内存泄漏。

此外，调用也会导致未定义的行为`strlen()`。[正如mani](https://stackoverflow.com/users/2223390/mani)`src`首先指出的那样，必须以空值终止才能正常工作。中计算的空间必须增加一来为终止空字符分配额外的空间。 `tmp``strlen()``strcpy()``realloc()``char`

示例代码修复：

```
unsigned char tmp[length + 1];
memcpy(tmp, parameterArray[i].valueU8, length);
tmp[length] = 0;

unsigned char* src = NULL;
unsigned char* src_tmp = realloc(src, (src ? strlen(src) : 0) + strlen(tmp) + 1);
if (src_tmp)
{
    if (!src) *src_tmp = 0; /* Ensure null character present before strcat(). */
    src = src_tmp;
    strcat(src, tmp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:29:32.273

根据您的这一行代码，`memcpy(tmp, (char*)&parameterArray[i].valueU8, length);`您尝试复制`valueU8`必须分配有 Null 终止符的代码。否则会在这一行崩溃`src = realloc(src, strlen(src) + strlen(tmp));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:28:59.680

来自 realloc 的手册页

> 除非 ptr 为 NULL，否则它一定是由先前对 malloc()、calloc() 或 realloc() 的调用返回的。

你的 src 是一个未初始化的指针

# java - DRMAA 和 shared.library.path

> ID：15921578
> 
> 赞同：0
> 
> 时间：2013-04-10T09:10:16.113
> 
> 标签：java, api, unsatisfiedlinkerror, sungridengine, drmaa

我尝试按照以下网址的教程使用带有 DRMAA api 的 sun Grid 引擎：http: [//gridscheduler.sourceforge.net/howto/drmaa_java.html](http://gridscheduler.sourceforge.net/howto/drmaa_java.html)。为此，我需要加载位于 /srv/sge/lib/lx24-amd64/drmaa.so 中的 c 库。现在我使用以下代码执行我的命令：java -jar scriptName.jar -Dshared.library.path=/srv/sge/lib/lx24-amd64/ 如[https://blogs.oracle.com/templedf/entry/中所述drmaa_and_the_shared_library](https://blogs.oracle.com/templedf/entry/drmaa_and_the_shared_library)。但我仍然得到这个例外：

> 线程“主”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 drmaa

尝试检索会话时会引发此异常：

`session = SessionFactory.getFactory().getSession();`

操作系统是 linux 64 位，java 是 64 位，SGE 是 64 位，所以这都是兼容的。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T09:03:00.147

这种情况似乎是在某些发行版中 libdrmaa.so 有一个库版本号 libdrmaa.so.1.0 而没有版本号的 libdrmaa.so 丢失了。drmaa.jar 似乎只是在寻找没有的那个。您可以使用以下命令检查系统中可用的 libdrmaa.so 库

```
# ldconfig -p | grep libdrmaa 
```

哪个（在我的情况下）要么说

```
libdrmaa.so.1.0 (libc6,x86-64) => /lib64/libdrmaa.so.1.0 
```

或者

```
libdrmaa.so.1.0 (libc6,x86-64) => /lib64/libdrmaa.so.1.0
libdrmaa.so (libc6,x86-64) => /lib64/libdrmaa.so 
```

第二种情况很好！

对于 Fedora 发行版，我将其报告为一个错误，似乎他们很快会在 F18 和 F19 中修复它。[https://bugzilla.redhat.com/show_bug.cgi?id=671880](https://bugzilla.redhat.com/show_bug.cgi?id=671880)

在 Fedora 中很容易修复，只需安装包含此软链接的包“gridengine-devel”。

如果没有版本号的 libdrmaa.so 不存在并且您在另一个发行版上，您可以通过键入以系统管理员身份手动修复它

```
# cd /usr/lib64
# sudo ln -sf libdrmaa.so.1.0 libdrmaa.so
# sudo ldconfig 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T00:06:23.160

您将要更改`shared.library.path`为`java.library.path`（我认为这是您引用的博客文章中的错误。

此外，将开关放在命令中的`-D`开关之前`-jar`，否则它将被解释为 jar 文件中主函数的参数，而不是 JVM 的参数。

因此，您的示例命令现在应该如下所示：

```
java -Djava.library.path=/srv/sge/lib/lx24-amd64/ -jar scriptName.jar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T11:54:31.173

以前的答案都不适合我。我已经设法解决了这个问题，在我的环境中定义了以下变量

```
export LD_LIBRARY_PATH=<path to the drmaa lib> 
```

# php - 使用 PHP 和 SQL 将日期记录为时间戳

> ID：15921582
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:10:33.880
> 
> 标签：php, timestamp, unix-timestamp

第一次在这里发问题所以请多多包涵。以下是我正在制作的页面的代码：

```
<?php require_once('Connections/reps.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {

  mysql_select_db($database_reps, $reps);
  $query_bonusset = "SELECT bonus FROM staff WHERE id = '".$_POST['staffMember']."'";
  $bonusset = mysql_query($query_bonusset, $reps) or die(mysql_error());
  $row_bonusset = mysql_fetch_assoc($bonusset);
  $totalRows_bonusset = mysql_num_rows($bonusset);

  mysql_select_db($database_reps, $reps);
  $query_listprice = "SELECT Price FROM products WHERE id = '".$_POST['product']."'";
  $listprice = mysql_query($query_listprice, $reps) or die(mysql_error());
  $row_listprice = mysql_fetch_assoc($listprice);
  $totalRows_listprice = mysql_num_rows($listprice);

  $insertSQL = sprintf("INSERT INTO orders (ID, customerName, staffMember, SalesPrice, Price, AgeOfPayment, product, Quantity, orderDate, bonus) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s)",
                       GetSQLValueString($_POST['ID'], "int"),
                       GetSQLValueString($_POST['customerName'], "text"),
                       GetSQLValueString($_POST['staffMember'], "text"),
                       GetSQLValueString($_POST['SalesPrice'], "int"),
                       GetSQLValueString($row_listprice['Price'], "int"),
                       GetSQLValueString($_POST['AgeOfPayment'], "int"),
                       GetSQLValueString($_POST['product'], "text"),
                       GetSQLValueString($_POST['Quantity'], "int"),
                       GetSQLValueString($_POST['orderDate'], "int"),
                       GetSQLValueString($row_bonusset['bonus'], "int"));

  mysql_select_db($database_reps, $reps);
  $Result1 = mysql_query($insertSQL, $reps) or die(mysql_error());

  $insertGoTo = "vieworders.php";
  if (isset($_SERVER['QUERY_STRING'])) {
    $insertGoTo .= (strpos($insertGoTo, '?')) ? "&" : "?";
    $insertGoTo .= $_SERVER['QUERY_STRING'];
  }
  header(sprintf("Location: %s", $insertGoTo));
}

mysql_select_db($database_reps, $reps);
$query_customers = "SELECT * FROM customers WHERE Status = 'Active'";
$customers = mysql_query($query_customers, $reps) or die(mysql_error());
$row_customers = mysql_fetch_assoc($customers);
$totalRows_customers = mysql_num_rows($customers);

mysql_select_db($database_reps, $reps);
$query_products = "SELECT * FROM products";
$products = mysql_query($query_products, $reps) or die(mysql_error());
$row_products = mysql_fetch_assoc($products);
$totalRows_products = mysql_num_rows($products);

mysql_select_db($database_reps, $reps);
$query_staff = "SELECT * FROM staff";
$staff = mysql_query($query_staff, $reps) or die(mysql_error());
$row_staff = mysql_fetch_assoc($staff);
$totalRows_staff = mysql_num_rows($staff);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Site Title</title>
<?php

require_once("models/config.php");
if (!securePage($_SERVER['PHP_SELF'])){die();}
require_once("models/header.php");

?>

</head>

<body>

<div id='wrapper'>
<div id='top'><div id='logo'></div></div>
<div id='content'>
<h1>Site Name</h1>
<h2>Change This</h2>
<div id='left-nav'>

<?php include("left-nav.php"); ?>

</div>
<div id='main'>

<div id ="prodtable">
<form action="<?php echo $editFormAction; ?>" method="post" name="form1" id="form1">
  <table align="center">
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Customer Name:</td>
      <td><select name="customerName">
        <?php 
do {  
?>
        <option value="<?php echo $row_customers['ID']?>" ><?php echo $row_customers['Name']?></option>
        <?php
} while ($row_customers = mysql_fetch_assoc($customers));
?>
      </select></td>
    </tr>
    <tr> </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Sold by: </td>
      <td><select name="staffMember">
        <?php 
do {  
?>
        <option value="<?php echo $row_staff['ID']?>" ><?php echo $row_staff['StaffName']?></option>
        <?php
} while ($row_staff = mysql_fetch_assoc($staff));
?>
      </select></td>
    </tr>
    <tr> </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Sales Price (€): </td>
      <td><input type="text" name="SalesPrice" value="" size="32" /></td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Product:</td>
      <td><select name="product">
        <?php 
do {  
?>
        <option value="<?php echo $row_products['ID']?>" ><?php echo $row_products['ProductName']?></option>
        <?php
} while ($row_products = mysql_fetch_assoc($products));
?>
      </select></td>
    </tr>
    <tr> </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Quantity:</td>
      <td><input type="text" name="Quantity" value="" size="32" /></td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">Order Date:</td>
      <td><input type="text" name="orderDate" value="" size="32" /></td>
    </tr>
    <tr valign="baseline">
      <td nowrap="nowrap" align="right">&nbsp;</td>
      <td><input type="submit" value="Insert record" /></td>
    </tr>
  </table>
  <input type="hidden" name="ID" value="" />
  <!-- Removed list price as it was declared above -->
  <input type="hidden" name="AgeOfPayment" value="" />
  <!-- Removed bonus as it was decalred above -->
  <input type="hidden" name="MM_insert" value="form1" />
</form>
</div>
<p>&nbsp;</p>
</div>
<div id='bottom'></div>
</div>

</body>
</html><?php
mysql_free_result($customers);

mysql_free_result($products);

mysql_free_result($staff);
?> 
```

我希望做的是，一旦我提交表单，它将采用输入的日期并将其转换为 SQL 数据库上的 Unix 时间戳。

任何朝着正确方向的帮助或刺激都会很棒。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:21:40.890

1.  **无法**从任意格式转换数据。没有魔法。即使有人告诉你有。所以，首先你必须先确定日期格式。
2.  将日期转换为 unix 时间戳是**没有意义的。**日期的时间戳会模棱两可且使用起来很麻烦。那又何苦呢？为什么不使用 `DATE`字段类型来存储日期。听起来很明智，嗯？

您真正需要的是验证输入的日期并将其转换为`2013-04-10`格式然后插入。

我会建议什么。

*   使用您可以在谷歌上找到的任何日期选择器来填写表格。
*   `explode()`使用+`checkdate()`或验证输入的值`strtotime()`。
*   将值作为字符串插入 DATE 类型的字段

顺便说一句，有一种更好的方法来构建查询，无需 GetSQLValueString 函数。

首先，您可以使用 sprintf 本身的强大功能：

```
paraQuery("INSERT INTO orders VALUES (%d,%s,%s,%d,%d,%d,%s,%d,%d,%d",
           $_POST['ID'], 
           $_POST['customerName'], 
           $_POST['staffMember'],
           $_POST['SalesPrice'], 
           $row_listprice['Price'], 
           $_POST['AgeOfPayment'], 
           $_POST['product'], 
           $_POST['Quantity'],
           $_POST['orderDate'], 
           $row_bonusset['bonus']
           ); 
```

（paraQuery 是[这个答案](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php/14112684#14112684)的一个函数）

接下来，对于长插入，最好使用辅助函数而不是手动编写它们：

```
$fields = explode(",","ID,customerName,staffMember,SalesPrice,Price,AgeOfPayment,product,Quantity,orderDate,bonus");
$query  = "INSERT INTO orders SET ".dbSet($fields); 
```

（dbSet 是[这个问题](https://stackoverflow.com/questions/3773406/insert-update-helper-function-using-pdo)的一个函数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:14:28.113

我认为 strtotime() 可以在这里帮助你：

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T09:17:43.750

使用 date_parse_from_format() 将您发布的日期转换为数组... [参见 php.net](http://php.net/manual/en/function.date-parse-from-format.php)

然后使用 mktime() 生成 unix 时间戳 [见 php.net](http://be1.php.net/manual/en/function.mktime.php)

# c# - 在 IIS 中托管后，ASP.NET 应用程序中的 Windows 身份验证无法正常工作

> ID：15921586
> 
> 赞同：2
> 
> 时间：2013-04-10T09:10:41.927
> 
> 标签：c#, asp.net, .net, authentication, web

NET 应用程序使用 Windows 身份验证该应用程序在我的本地解决方案中运行良好。但是当托管在 IIS 中时，它要求用户访问托管服务器。它没有从客户端机器获取用户凭据。

下面是我的 WEB.Config

```
<authentication mode="Windows">
        <!--<forms loginUrl="~/Account/Login.aspx" timeout="2880" />-->
</authentication>
<identity impersonate="false" />
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership>

<profile>
  <providers>
    <clear/>
    <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
  </providers>
</profile>

<roleManager enabled="false">
  <providers>
    <clear/>
    <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
  </providers>
</roleManager>

<httpRuntime maxRequestLength="102400" /> 
```

获取用户名的ASP代码如下

```
string currentUser = HttpContext.Current.User.Identity.Name.ToLower();
                currentUser = currentUser.Replace("kmhp\\", "");
                SessionManager.Session.Current.LoggedInUserName = currentUser;
                dsValidateLogin = _grantAccessHandler.ValidateLogin(currentUser); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:24:04.443

这可能是客户端配置问题。使用 Internet Explorer，您必须确保客户端将 IIS 服务器识别为您的 Intranet 区域的一部分。默认情况下，只有 Intranet 区域允许转发用户凭据。IE 有一些自动检测机制，但这并不总是有效。对于 Firefox，您需要将 IIS 服务器主机名添加到 about:config 中的配置值“network.automatic-ntlm-auth.trusted-uris”。否则，Firefox 也不会将凭据转发到您的服务器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T09:23:17.620

您很可能需要拥有客户凭证。看看下面

```
<wsHttpBinding>
<binding name="TransportSecurity">
<security mode="Transport" />
   <transport clientCredentialType = "Windows" />
</security> 
```

供参考：[HttpBinding](http://msdn.microsoft.com/en-us/library/ms731884.aspx)

# ruby-on-rails - 添加具有相似值的字段

> ID：15921597
> 
> 赞同：0
> 
> 时间：2013-04-10T09:11:03.520
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个交易模型，它有 2 个字段，number_of_share 和 price_per_share。

我想在饼图中展示它，为此我必须找到与用户关联的所有交易对象，然后添加所有具有相同 price_per_share 的交易对象并添加它们的 number_of_shared。

例子 ：-

```
trading id: 1, price_per_share: 10, number_of_shares: 20
trading id: 2, price_per_share: 10, number_of_shares: 12
trading id: 3, price_per_share: 12, number_of_shares: 10 
```

现在我想添加所有具有相似值的 price_per_share（在本例中为 10）。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:27:53.793

这应该有效：

```
Trading.group(:price_per_share).sum(:number_of_shares)
# => {10=>32, 12=>10} 
```

SQL 将类似于：

```
SELECT SUM(`tradings`.`number_of_shares`) AS sum_number_of_shares, price_per_share AS price_per_share FROM `tradings` GROUP BY `tradings`.`price_per_share` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:14:38.623

希望我理解正确，但是：

```
Trading.where(:price_per_share => 10).sum(:number_of_shares) 
```

应该给你你正在寻找的结果。

# javascript - 如何检索局部变量（地理位置 HTML5 和 Google Maps API）？

> ID：15921598
> 
> 赞同：0
> 
> 时间：2013-04-10T09:11:04.380
> 
> 标签：javascript, jquery, google-maps-api-3

我被这个问题困住了：我想检索由地理位置定义的位置，以便在我的 calcRoute 函数中使用它作为起点，例如，这里是代码：

```
function calcRoute(){
   var pos;

    navigator.geolocation.getCurrentPosition
    (
        function(position) 
        {
            pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        }
    );

    var start = pos;
    alert(start); // pb here : start is undefined, how could I get the pos value ?
    //...
} 
```

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:14:35.787

您定义的函数是一个回调函数，一旦检索到该位置就会被调用。

它会失败有两个原因：

*   您根本不知道回调函数是否会被调用，更不用说在其余部分之前`calcRoute`（这实际上是极不可能的，因为它是异步的）
*   即使它是在结束之前调用的`calcRoute`，`pos`它也在不同的范围内，所以你不能以这种方式改变它。

您可能很想诉诸全局变量来解决第二个问题，但您将无法解决第一个问题。为什么不将其余代码放在回调函数中？

```
function calcRoute(){
  navigator.geolocation.getCurrentPosition
  (
      function(position) 
      {
          var pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
          var start = pos;
          alert(start);
      }
  ); 
```

}

编辑：更详细的答案来解释为什么走这条路

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:20:37.363

因为它是一个回调，它将在稍后执行。但是你可以定义你的代码并让它执行。

```
function calcRoute(){

    navigator.geolocation.getCurrentPosition
    (
        function(position) 
        {
           var pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
           furtherCode(pos);
        }
    );

    }

function furtherCode(position){
    var start = pos;
    alert(start); 
    //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:15:58.693

```
function calcRoute(){
var pos;

navigator.geolocation.getCurrentPosition
(
    function(position) 
    {
        pos = new google.maps.LatLng(position.coords.latitude,position.coords.longitude);
        var start = pos;
        alert(start);
    }
);

//...
} 
```

# openssl - 基于引擎为EVP生成密钥对

> ID：15921601
> 
> 赞同：1
> 
> 时间：2013-04-10T09:11:08.967
> 
> 标签：openssl, rsa

到目前为止，我做了以下事情：

```
 rsa=RSA_generate_key(2048,RSA_F4,NULL,NULL);
    if (rsa == NULL){
        fprintf(stderr, "Could not generate keypair \r\n");
        return EXIT_FAILURE;
    }     
    if ((pk=EVP_PKEY_new()) == NULL){ 
        fprintf(stderr, "Could not instantiate new evp key storage\r\n");
        return EXIT_FAILURE;
    }    

    if (!EVP_PKEY_assign_RSA(pk,rsa)){
        fprintf(stderr, "Could not assign keypair to evp key storage\r\n");
        return EXIT_FAILURE;
    } 
```

但是，现在我希望能够使用我的自定义 openssl 引擎。你能告诉我这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:11:38.383

您必须先加载引擎。我认为最好的方法是动态加载它（否则你需要将它与 openssl 一起编译）：

```
ENGINE_load_dynamic();
ENGINE *your_engine = ENGINE_by_id("dynamic");

...

if (!ENGINE_ctrl_cmd_string(your_engine, "SO_PATH", "path to your engine here (*.so or *.dll), 0))
{
    // your error handler   
}
if (!ENGINE_ctrl_cmd_string(your_engine, "LIST_ADD", "1", 0))
{
 // your error handler  
}
if (!ENGINE_ctrl_cmd_string(your_engine, "LOAD", NULL, 0))
{
    // your error handler       
}
if (!ENGINE_init(your_engine))
{   
    // your error handler   
}

// You can load your private keys this way:
if (!(pk = ENGINE_load_private_key(your_engine, "probably your password...", NULL, NULL))) 
{

}

// You need to tell OpenSSL that you want to use your Engine, for RSA stuff, for example you may do like this
ENGINE_set_default_RSA(your_engine);

... 
```

但是，要生成密钥，我不知道是否可以仅使用 OpenSSL 本机接口。对于我的项目，我创建了一个自定义命令。因此，在引擎内部的 ENGINE_CMD_DEFN 中，我添加了以下内容：

```
static const ENGINE_CMD_DEFN md_defns[] = {
    ...    
    {CMD_GEN_KEYPAIR, "CMD_GEN_KEYPAIR", "Used to generate a key pair", ENGINE_CMD_FLAG_STRING}
    ...
}; 
```

然后，您必须在重载的 ctrl_function （您使用`ENGINE_set_ctrl_function(...)`.

要从您的应用程序调用此命令，请使用`ENGINE_ctrl_cmd("CMD_GEN_KEYPAIR", 1, (void *)(&adittionalInfo));`，在附加信息中输入足够的信息以生成您的密钥。在我的例子中，我创建了一个类似于 C 结构的钩子，我的应用程序和我的引擎都知道它，以便我的引擎可以盲目地将它转换为正确的类型。

生成密钥后，使用`ENGINE_load_private_key`.

我不知道这是否是“最佳”方式，但适合我的需要。

# mysql - MySQL 查询非常慢

> ID：15921603
> 
> 赞同：1
> 
> 时间：2013-04-10T08:35:18.277
> 
> 标签：mysql, innodb, optimization

您好我正在寻找优化 mysql 查询的方法，基本上我正在为属于 category_id = 25 和 source_id 的用户获取文章，而不是在我存储用户已取消订阅的源 ID 的表中。

```
select
  a.article_id,
  a.article_title,
  a.source_id,
  a.article_publish_date,
  a.article_details,
  n.source_name
from sources n
  INNER JOIN articles a
    ON (a.source_id = n.source_id)
WHERE n.category_id = 25
    AND n.source_id NOT IN(select
                 source_id
               from news_sources_deselected
               WHERE user_id = 5)
ORDER BY a.article_publish_date DESC 
```

**文章表的架构**

```
CREATE TABLE IF NOT EXISTS `articles` (<br>
  `article_id` int(255) NOT NULL auto_increment,<br>
  `article_title` varchar(255) NOT NULL,<br>
  `source_id` int(255) NOT NULL,<br>
  `article_publish_date` bigint(255) NOT NULL,<br>
  `article_details` text NOT NULL,<br>
  PRIMARY KEY  (`article_id`),<br>
  KEY `source_id` (`source_id`),<br>
  KEY `article_publish_date` (`article_publish_date`)<br>
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='Contains articles.'; 
```

**Sources 表的结构**

```
CREATE TABLE IF NOT EXISTS `sources` (<br>
  `source_id` int(255) NOT NULL auto_increment,<br>
  `category_id` int(255) NOT NULL,<br>
  `source_name` varchar(255) character set latin1 NOT NULL,<br>
  `user_id` int(255) NOT NULL,<br>
  PRIMARY KEY  (`source_id`),<br>
  KEY `category_id` (`category_id`),<br>
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COMMENT='News Sources.' 
```

文章表有大约 30 万条记录，来源表包含大约 1000 条记录，执行查询大约需要 180 秒。

任何帮助将不胜感激。

![在此处输入图像描述](https://i.stack.imgur.com/wfNGm.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:16:46.650

尝试使用带有 IS NULL 条件的派生查询。你解释说有一个依赖子查询。忽略使用它并使用派生查询来解决您的问题。这将提高性能

```
select
  a.article_id,
  a.article_title,
  a.source_id,
  a.article_publish_date,
  a.article_details,
  n.source_name
from sources n
  INNER JOIN articles a
    ON (a.source_id = n.source_id)
  LEFT JOIN (SELECT *
         FROM news_sources_deselected
         WHERE user_id = 5) AS nsd
    ON nsd.source_id = n.source_id
WHERE n.category_id = 25
    AND nsd.source_id IS NULL
ORDER BY a.article_publish_date DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T08:51:56.790

在查询前使用 EXPLAIN 并分析结果。

[在这里](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)您可以找到如何开始您的优化工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:03:55.493

我发现您可以检查的问题很少。

*   尽管使用了 InnoDB 引擎，但您没有使用关系。
*   您正在选择没有索引的字段。
*   您正在一次选择所有行。

你需要一次所有这些行吗？也许考虑将此查询拆分为多个分片（分页）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:26:52.590

试试这个查询

```
select
 a.article_id,
 a.article_title,
 a.source_id,
 a.article_publish_date,
 a.article_details,
 n.source_name
from 
 sources n
INNER JOIN 
 articles a
ON 
 n.category_id = 25 AND 
 a.source_id = n.source_id     
INNER JOIN 
 news_sources_deselected nsd
ON
 nsd.user_id <> 5 AND n.source_id = nsd.source_id
ORDER BY 
 a.article_publish_date DESC 
```

我已经删除了额外的查询，并`news_sources_deselected`通过接受除 id 以外的所有内容添加到 join`source_id`中。`user_id``5`

或者我们可以只使用用户 raheelshan 提到的加入所需的记录

```
select
 a.article_id,
 a.article_title,
 a.source_id,
 a.article_publish_date,
 a.article_details,
 n.source_name
from 
 (select 
   * 
 from 
   sources 
 where 
   category_id = 25) n 
INNER JOIN 
 articles a
ON 
 a.source_id = n.source_id     
INNER JOIN 
 (select 
   * 
 from 
   news_sources_deselected 
 where 
   user_id <> 5) nsd
ON
 n.source_id = nsd.source_id
ORDER BY 
 a.article_publish_date DESC 
```

希望这可以帮助..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T05:37:43.393

我通过分区表解决了这个问题，但我仍然愿意接受建议。

# windows - 如何从绝对路径列表中回显文件大小

> ID：15921607
> 
> 赞同：0
> 
> 时间：2013-04-10T09:11:27.837
> 
> 标签：windows, for-loop, batch-file, cmd, directory

我有一个文件“file_list.txt”，其中包含文件列表的绝对路径。每行以分号结尾。文件看起来像这样。

```
"C:\Users\ab cd\AK\AK_PPF.pdf";
"C:\Users\ab cd\AK\AK_PPF.jpg";
"C:\Users\ab cd\AK\DL PAGE 1.jpg";
"C:\Users\ab cd\AK\dl pAGE 2.jpg";
"C:\Users\ab cd\AK\dl pAGE 3.jpg"; 
```

我编写了以下代码来回显每个文件的文件大小。

```
@echo off
setlocal
set v_file_list="file_list.txt"
FOR /F "delim=; tokens=1 usebackq" %%A IN (%v_file_list%) DO @echo %%~zA 
```

当我运行批处理文件时，它说**“delim =; tokens = 1 usebackq”此时是意外的**
请告诉我在这里做错了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:27:36.907

您应该使用`delims`而不是`delim`. 这也处于领先地位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T10:47:25.267

Endoro 识别出您的语法错误 - 拼写错误的`DELIMS=;`选项。

您还有另一个潜在问题：`;`是一个可以出现在文件或路径名中的有效字符。`;`在一个名字中很少见，但它确实不时出现。您`DELIMS=;`将破坏（截断）任何包含`;`.

您应该使用另一种技术来消除不需要的尾随`;`。

您可以使用扩展子字符串操作来删除最后一个字符，但这需要在同一个循环中设置和扩展变量，这需要调用或延迟扩展。`%%A`CALL 代价高昂（缓慢），如果包含`!`（另一个罕见但有效的文件名字符），延迟扩展将破坏扩展。所以延迟扩展必须适当地打开和关闭。

有一个更简单的解决方案，它依赖于您的文件路径用引号括起来的事实，并且在引号`;`之外。您可以使用附加的 FOR 语句来删除尾随`;`，因为`;`它是简单 FOR 语句的标记分隔符（没有 /F 选项）。

```
for /f "usebackq delims=" %%A in (%v_file_list%) do for %%F in (%%A) do @echo %%~zF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:06:14.120

至少这个领域的人在很大程度上是建设性的 - 围绕而不是系统地投票反对/删除/关闭不喜欢的问题和答案。

这是我的贡献，FWIW：

原始问题，尾随分号：

```
@echo off
SETLOCAL
ECHO.== file_list.txt ==========
TYPE file_list.txt
set v_file_list="file_list.txt"
ECHO.== batch run ==========
FOR /F "usebackqdelims=" %%A IN (%v_file_list%) DO (
SET filename=%%A
SETLOCAL ENABLEDELAYEDEXPANSION
FOR %%s IN (!filename!) DO (endlocal&ECHO %%s %%~zs)
)
ECHO.== actual DIR list ==========
DIR /a-d "u:\users\ab cd\ak" 
```

运行结果：

```
== file_list.txt ==========
"u:\users\ab cd\ak\ak_ppf.pdf";
"u:\users\ab cd\ak\ak_ppf.jpg";
"u:\users\ab cd\ak\dl page 1.jpg";
"u:\users\ab cd\ak\dl page 2.jpg";
"u:\users\ab cd\ak\dl page 3.jpg";
"u:\users\ab cd\ak\dl page;4.jpg;";
"u:\users\ab cd\ak\dl page;4.jpg";
"u:\users\ab cd\ak\dl!page;4.jpg;";
"u:\users\ab cd\ak\dl%page%;4.jpg;";
"u:\users\ab cd\ak\dl!pag!e;4.jpg;";
== batch run ==========
"u:\users\ab cd\ak\ak_ppf.pdf" 21031
"u:\users\ab cd\ak\ak_ppf.jpg" 428
"u:\users\ab cd\ak\dl page 1.jpg" 54338
"u:\users\ab cd\ak\dl page 2.jpg" 83344
"u:\users\ab cd\ak\dl page 3.jpg" 14036
"u:\users\ab cd\ak\dl page;4.jpg;" 22498
"u:\users\ab cd\ak\dl page;4.jpg" 55506
"u:\users\ab cd\ak\dl!page;4.jpg;" 4007
"u:\users\ab cd\ak\dl%page%;4.jpg;" 5310
"u:\users\ab cd\ak\dl!pag!e;4.jpg;" 4693
== actual DIR list ==========
 Volume in drive U has no label.
 Volume Serial Number is 0466-0000

 Directory of u:\users\ab cd\ak

10/04/2013  20:25            21,031 ak_ppf.pdf
10/04/2013  20:25               428 ak_ppf.jpg
10/04/2013  20:25            54,338 dl page 1.jpg
10/04/2013  20:26            83,344 dl page 2.jpg
10/04/2013  20:26            14,036 dl page 3.jpg
10/04/2013  20:41            22,498 dl page;4.jpg;
10/04/2013  20:40            55,506 dl page;4.jpg
10/04/2013  20:49             4,007 dl!page;4.jpg;
10/04/2013  20:50             5,310 dl%page%;4.jpg;
10/04/2013  21:31             4,693 dl!pag!e;4.jpg;
              10 File(s)        265,191 bytes
               0 Dir(s)   2,146,500,608 bytes free 
```

一般示例，文本文件仅是文件名：

```
@echo off
SETLOCAL
ECHO.== file_list_raw.txt ==========
TYPE file_list_raw.txt
set v_file_list="file_list_raw.txt"
ECHO.== batch run ==========
FOR /F "usebackqdelims=" %%A IN (%v_file_list%) DO (
SET filename="%%~A"
SETLOCAL ENABLEDELAYEDEXPANSION
FOR %%s IN (!filename!) DO (endlocal&ECHO %%s %%~zs)
)
ECHO.== actual DIR list ==========
DIR /a-d "u:\users\ab cd\ak" 
```

运行结果：

```
== file_list_raw.txt ==========
U:\users\ab cd\ak\ak_ppf.pdf
U:\users\ab cd\ak\ak_ppf.jpg
U:\users\ab cd\ak\dl page 1.jpg
U:\users\ab cd\ak\dl page 2.jpg
U:\users\ab cd\ak\dl page 3.jpg
U:\users\ab cd\ak\dl page;4.jpg;
U:\users\ab cd\ak\dl page;4.jpg
U:\users\ab cd\ak\dl!page;4.jpg;
U:\users\ab cd\ak\dl%page%;4.jpg;
U:\users\ab cd\ak\dl!pag!e;4.jpg;
"U:\users\ab cd\ak\ak_ppf.pdf"
"U:\users\ab cd\ak\ak_ppf.jpg"
"U:\users\ab cd\ak\dl page 1.jpg"
"U:\users\ab cd\ak\dl page 2.jpg"
"U:\users\ab cd\ak\dl page 3.jpg"
"U:\users\ab cd\ak\dl page;4.jpg;"
"U:\users\ab cd\ak\dl page;4.jpg"
"U:\users\ab cd\ak\dl!page;4.jpg;"
"U:\users\ab cd\ak\dl%page%;4.jpg;"
"U:\users\ab cd\ak\dl!pag!e;4.jpg;"
== batch run ==========
"U:\users\ab cd\ak\ak_ppf.pdf" 21031
"U:\users\ab cd\ak\ak_ppf.jpg" 428
"U:\users\ab cd\ak\dl page 1.jpg" 54338
"U:\users\ab cd\ak\dl page 2.jpg" 83344
"U:\users\ab cd\ak\dl page 3.jpg" 14036
"U:\users\ab cd\ak\dl page;4.jpg;" 22498
"U:\users\ab cd\ak\dl page;4.jpg" 55506
"U:\users\ab cd\ak\dl!page;4.jpg;" 4007
"U:\users\ab cd\ak\dl%page%;4.jpg;" 5310
"U:\users\ab cd\ak\dl!pag!e;4.jpg;" 4693
"U:\users\ab cd\ak\ak_ppf.pdf" 21031
"U:\users\ab cd\ak\ak_ppf.jpg" 428
"U:\users\ab cd\ak\dl page 1.jpg" 54338
"U:\users\ab cd\ak\dl page 2.jpg" 83344
"U:\users\ab cd\ak\dl page 3.jpg" 14036
"U:\users\ab cd\ak\dl page;4.jpg;" 22498
"U:\users\ab cd\ak\dl page;4.jpg" 55506
"U:\users\ab cd\ak\dl!page;4.jpg;" 4007
"U:\users\ab cd\ak\dl%page%;4.jpg;" 5310
"U:\users\ab cd\ak\dl!pag!e;4.jpg;" 4693
== actual DIR list ==========
 Volume in drive U has no label.
 Volume Serial Number is 0466-0000

 Directory of u:\users\ab cd\ak

10/04/2013  20:25            21,031 ak_ppf.pdf
10/04/2013  20:25               428 ak_ppf.jpg
10/04/2013  20:25            54,338 dl page 1.jpg
10/04/2013  20:26            83,344 dl page 2.jpg
10/04/2013  20:26            14,036 dl page 3.jpg
10/04/2013  20:41            22,498 dl page;4.jpg;
10/04/2013  20:40            55,506 dl page;4.jpg
10/04/2013  20:49             4,007 dl!page;4.jpg;
10/04/2013  20:50             5,310 dl%page%;4.jpg;
10/04/2013  21:31             4,693 dl!pag!e;4.jpg;
              10 File(s)        265,191 bytes
               0 Dir(s)   2,146,500,608 bytes free 
```

该代码实际上与已经发布的代码和那些帖子中的评论没有太大区别。

# c# - 通过反射获取 MemberInfo 的类型

> ID：15921608
> 
> 赞同：27
> 
> 时间：2013-04-10T09:11:37.473
> 
> 标签：c#, .net, reflection, attributes, custom-attributes

我正在使用反射来加载具有项目类结构的树视图。类中的每个成员都有一个分配给他们的自定义属性。

使用获取类的属性没有问题，`MemberInfo.GetCustomAttributes()`但是我需要一种方法来确定类成员是否是自定义类，然后需要解析自身以返回自定义属性。

到目前为止，我的代码是：

```
MemberInfo[] membersInfo = typeof(Project).GetProperties();

foreach (MemberInfo memberInfo in membersInfo)
{
    foreach (object attribute in memberInfo.GetCustomAttributes(true))
    {
        // Get the custom attribute of the class and store on the treeview
        if (attribute is ReportAttribute)
        {
            if (((ReportAttribute)attribute).FriendlyName.Length > 0)
            {
               treeItem.Items.Add(new TreeViewItem() { Header = ((ReportAttribute)attribute).FriendlyName });
            }
        }
        // PROBLEM HERE : I need to work out if the object is a specific type
        //                and then use reflection to get the structure and attributes.
    }
} 
```

有没有一种简单的方法来获取 MemberInfo 实例的目标类型，以便我可以适当地处理它？我觉得我错过了一些明显的东西，但我现在正在转圈。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-16T17:39:54.017

我认为如果您采用这种扩展方法，您可以获得更好的性能：

```
public static Type GetUnderlyingType(this MemberInfo member)
{
    switch (member.MemberType)
    {
        case MemberTypes.Event:
            return ((EventInfo)member).EventHandlerType;
        case MemberTypes.Field:
            return ((FieldInfo)member).FieldType;
        case MemberTypes.Method:
            return ((MethodInfo)member).ReturnType;
        case MemberTypes.Property:
            return ((PropertyInfo)member).PropertyType;
        default:
            throw new ArgumentException
            (
             "Input MemberInfo must be if type EventInfo, FieldInfo, MethodInfo, or PropertyInfo"
            );
    }
} 
```

应该为任何人工作`MemberInfo`，而不仅仅是`PropertyInfo`。您可以避免`MethodInfo`使用该列表，因为它本身不属于类型（而是返回类型）。

在你的情况下：

```
foreach (MemberInfo memberInfo in membersInfo)
{
    foreach (object attribute in memberInfo.GetCustomAttributes(true))
    {
        if (attribute is ReportAttribute)
        {
            if (((ReportAttribute)attribute).FriendlyName.Length > 0)
            {
               treeItem.Items.Add(new TreeViewItem() { Header = ((ReportAttribute)attribute).FriendlyName });
            }
        }

        //if memberInfo.GetUnderlyingType() == specificType ? proceed...
    }
} 
```

我想知道为什么默认情况下这不是 BCL 的一部分。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-10T09:14:15.647

`GetProperties`返回一个数组，`PropertyInfo`所以你应该使用它。
那么这只是使用该[`PropertyType`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.propertytype.aspx)属性的问题。

```
PropertyInfo[] propertyInfos = typeof(Project).GetProperties();

foreach (PropertyInfo propertyInfo in propertyInfos)
{
    // ...
    if(propertyInfo.PropertyType == typeof(MyCustomClass))
        // ...
} 
```

# android - 在应用内结算版本 3 android 中恢复交易

> ID：15921611
> 
> 赞同：1
> 
> 时间：2013-04-10T09:11:43.413
> 
> 标签：android, in-app-billing

我正在为 android 使用 In-app v3，除了恢复事务之外，所有的东西都可以正常工作。

例如： - 我已经从市场下载了应用程序并进行了应用程序内购买，现在假设我已经从设备上卸载了该应用程序，并在 2 天后再次下载，然后再次完全购买。

我如何在这里管理恢复交易请帮助我。

# python - 如何从一个类中调用另一个类中的方法

> ID：15921613
> 
> 赞同：1
> 
> 时间：2013-04-10T09:11:53.083
> 
> 标签：python, oop, class, pyqt4

我在一个文件中有两个类。

主类将具有更新该类中的 UI 元素的方法。它创建另一个类的实例。

我想从另一个实例化的类更新主类中的 UI。

```
class Add(QtGui.QMainWindow,Ui_AddShotDetails):

    def __init__(self):

        super(Add,self).__init__()
        self.setupUi(self)

    def addDetails(self):

        #Do some stuff and call method in Manager class
        Manager.EpiChange() # I get the error at this line

class Manager(QtGui.QMainWindow,Ui_ShotManager):

    def __init__(self):

        super(Manager,self).__init__()
        self.setupUi(self)
        self.AddWindow = Add()

    def EpiChange(self):

        Manager.EpiCode = str(self.cmb_Epi.currentText())
        # Update ui elements

    def addShot(self):

        self.AddWindow.show()

if __name__ == '__main__':

    app = QtGui.QApplication(sys.argv)
    win = Manager()
    win.show()
    sys.exit(app.exec_()) 
```

我得到以下回溯

```
Traceback (most recent call last):
  File "D:\Manager.py", line 18, in addDetails
    Manager.EpiChange()
TypeError: unbound method EpiChange() must be called with Manager instance as first argument (got nothing instead) 
```

我尝试将此方法作为类方法使用`@classmethod`，如果我使用它，我会得到以下回溯

```
Traceback (most recent call last):
  File "D:\Manager.py", line 27, in EpiChange
    Manager.EpiCode = str(self.cmb_Epi.currentText())
AttributeError: type object 'Manager' has no attribute 'cmb_Epi' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:47:31.580

```
def EpiChange(self) 
```

这个签名意味着，你的方法是一个实例方法，实际上等待一个实例对象作为第一个参数。

如果你的方法不对类实例做任何事情，但需要类本身，它将被称为“类方法”并且应该等待类本身作为第一个参数。

最后，如果您的方法不需要这两者（并且您的方法签名中没有这些 self），但您仍然希望将其放置在某个类中 - 它在 Python 中称为“静态方法”。

看看[classmethod](http://docs.python.org/library/functions.html#classmethod)和[staticmethod](http://docs.python.org/library/functions.html#staticmethod)内置函数（可以用作（并且通常用作）装饰器）。

关于您的代码：看起来您的 Add 类需要以某种方式传递给它的 Manager 实例，例如：

```
class Add(QtGui.QMainWindow,Ui_AddShotDetails):

    def __init__(self, manager):
        super(Add,self).__init__()
        self.manager = manager
        self.setupUi(self)

    def addDetails(self):
        #Do some stuff and call method in Manager class
        self.manager.EpiChange() # I get the error at this line 
```

然后以这种方式创建添加实例：

```
self.AddWindow = Add(self) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T09:21:48.397

您正在调用一个类的函数而不创建它的实例。理论上，你必须创建一个`Manager`类的实例，然后调用它的方法。就像是：

```
manager_object = Manager()
manager_object.EpicChange() 
```

# c++ - 提高累加器内存使用率和效率

> ID：15921620
> 
> 赞同：1
> 
> 时间：2013-04-10T09:12:20.287
> 
> 标签：c++, memory-management, boost, accumulator

我正在使用 boost 累加器从 C++ 中的双精度向量中获取统计信息。每次我需要一个新的统计数据时，我都会调用一个自定义方法，通过创建累加器来获取它，用向量值加载它，最后使用 boost statistic 函数，例如。

```
double Entity::min(void) {
    accumulator_set< double, features< tag::min > > acc;
    // Now load the vector into the accumulator.
    acc = std::for_each( samples.begin(), samples.end(), acc );
    // Specify namespace to avoid name clash of this min method
    this->_min =  boost::accumulators::min(acc);
    return this->_min;
}
// etc. more methods for StdDev, mean, max etc. 
```

我的问题是：每次以不同方法创建累加器是否都会重复（加上）向量内存要求？我知道我可以编写一个“getStatstics”方法来一次获取它们，但我特别想知道每次创建和加载累加器时是否使用至少与原始向量一样多的内存。

多谢你们

皮特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:38:03.380

您使用的算法适用于`samples`集合，它是 class 的一个属性`Entity`。该集合是矢量模板的一个实例。

该`std::for_each`实例仅适用于集合的迭代器，这些迭代器在构造时传递 :`samples.begin()`和`samples.end()`.

标准迭代器专门设计用于抽象集合上的游标或指针的概念。它们不会以任何方式复制集合，因此您在使用它们时不必担心内存分配问题。

这里使用的具体`accumulator_set`也不会产生任何集合的副本。它只是访问迭代器，在当前最小候选和集合的当前指向值之间进行比较，并为下一次迭代保留两者的最佳值。

就目前而言，您使用的标准部件都不会复制该系列。

# php - PHP Excel - 在Linux中不起作用

> ID：15921624
> 
> 赞同：0
> 
> 时间：2013-04-10T09:12:24.713
> 
> 标签：php, linux, excel

PHP excel下载它在windows环境下完美运行。

从数据库中获取的数据是正确的。

PHP excel的要求就在那里。

我认为 setcellvalue 不起作用

请建议我如何进一步进行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:30:07.677

改用`setCellValueByColumnAndRow`这个函数，将数组添加到 excel 文件，它必须工作

```
function ADDFExcel($FileName,$Array){//add Date
          if(!is_file($FileName)){
            fclose(fopen($FileName,"a+"));  
          }
          $objPHPExcel = PHPExcel_IOFactory::load($FileName);
          $objWorksheet = $objPHPExcel->getActiveSheet();
          foreach($Array as $Record)
          {
              $num_rows = $objPHPExcel->getActiveSheet()->getHighestRow();
              $i=0;
              foreach($Record as $Fild){
                  $objWorksheet->setCellValueByColumnAndRow($i,$num_rows+1,$Fild,PHPExcel_Style_NumberFormat::FORMAT_TEXT );
                  $i++;
              }  
          }
          $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');
          $objWriter->save($FileName);
}

$arr=array(
        array("we","gs","423"),
        array("dg","asd","45345")
 );
 ADDFExcel("1.xlsx",$arr); 
```

# javascript - 区分 JAVA 是否被禁用或未使用 Javascript 安装

> ID：15921628
> 
> 赞同：1
> 
> 时间：2013-04-10T09:12:39.007
> 
> 标签：javascript, java

如何在浏览器中使用 Javascript 测试区分以下场景？

1.  Java 已安装但已禁用
2.  根本没有安装Java

我已经检查过`deployJava.js`，`navigator.javaEnabled()`但如果我在 Windows 中使用 JAVA 控制面板禁用 JAVA，它们似乎`false`在这两种情况下都会返回。

`deployJava.versionCheck("1.5+") //false`

`navigator.javaEnabled() //false`

谢谢你的帮助。

PS我检查了类似的答案，但它们都与检测到其他版本的JAVA有关。我只需要知道上面提到的哪个状态发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:52:03.527

从浏览器中，无法区分您提到的两种情况。当您使用控制面板禁用 java 时，它不会加载到浏览器中，因此浏览器无法告诉您它是否已安装。

如果其他插件有这种形式的开关，你会遇到类似的问题。

# ember.js - Ember.js 获取当前路由

> ID：15921629
> 
> 赞同：6
> 
> 时间：2013-04-10T09:12:45.053
> 
> 标签：ember.js, ember-router

我正在切换到新的 ember 路由器，但有一个非常简单的问题 - 我如何确定我当前所在的路由？在你可以做类似的事情之前`App.router.get('currentState')`，但这似乎不再起作用，因为路由器不再继承自`StateManager`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T10:00:28.237

看看这个[问题](https://stackoverflow.com/questions/15019212/ember-app-router-router-currentstate-undefined/15020704#15020704)。

摘要：`currentState`现在存储在`currentPath`ApplicationController 的属性中。公认的解决方案是观察此属性以将其写入全局属性：

```
App = Em.Application.create({
    currentPath: ''
});
ApplicationController : Ember.Controller.extend({
    updateCurrentPath: function() {
        App.set('currentPath', this.get('currentPath'));
    }.observes('currentPath')
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-13T01:57:45.347

我可能会为此受到抨击，但在对此感到非常沮丧之后，我决定实施一个非常丑陋的解决方法。

我的用例试图获取当前帖子的 ID，因为我正在回复它。为我们当前的路线考虑这样的事情：

“...#/post/12345”

我的解决方法（有史以来最丑陋的代码）：

```
var currentId = window.location.hash.split('/')[2];
 App.Message.createRecord({
      content: message,
      inReplyTo: currentId
    }).get('transaction').commit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-03T21:07:45.733

在控制器中，我可以使用下面的代码获取当前路由名称。祝你好运

this.get("currentRouteName")

# hibernate - java.lang.NoClassDefFoundError: org/springframework/beans/factory/NoUniqueBeanDefinitionException

> ID：15921641
> 
> 赞同：16
> 
> 时间：2013-04-10T09:13:07.840
> 
> 标签：hibernate, maven, spring-mvc, jpa, noclassdeffounderror

我正在尝试使用 Spring MVC+JPA Hibernate+maven 创建一个简单的项目。我的 web.xml 如下

```
<servlet>
    <servlet-name>ContactManager</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value></param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/contact-servlet.xml</param-value>
</context-param> 
```

而我的contact-servlet.xml如下

```
<?xml  version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:aop="http://www.springframework.org/schema/aop"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:lang="http://www.springframework.org/schema/lang"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
 <context:annotation-config />
<context:component-scan base-package="com.corasent.contacts.controllers" />

<bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

<!-- Drives transactions using local JPA APIs -->
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="mySQLDataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter" />
    </property>
    <property name="jpaProperties">
        <value>
            hibernate.session_factory_name=mySessionFactory
        </value>
    </property>

</bean>

<bean id="mySQLDataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">

<property name="driverClassName" value="com.mysql.jdbc.Driver" />
<property name="url" value="jdbc:mysql://localhost:3306/ContactManager" />
<property name="username" value="****" />
<property name="password" value="****" />

</bean>

</beans> 
```

我的 pom.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.corasent</groupId>
    <artifactId>contacts</artifactId>
    <name>ContactManager</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>   

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>   

        <!-- Database, JPA -->
        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>1.8.0.10</version>
            <scope>runtime</scope>
        </dependency>

        <!-- MySQL database driver -->
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.22</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>3.5.0-Final</version>
        </dependency>

        <dependency>
            <groupId>javax</groupId>
            <artifactId>javaee-api</artifactId>
            <version>6.0</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>3.2.2.RELEASE</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>        
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我正在打印 stackTrace：

```
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330             javax.inject.Named' annotation found and supported for component scanning
ERROR: org.springframework.web.context.ContextLoader - Context initialization failed
java.lang.NoClassDefFoundError:      org/springframework/beans/factory/NoUniqueBeanDefinitionException
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Class.java:2454)
at java.lang.Class.getDeclaredMethods(Class.java:1810)
at     org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotat    ionMetadata.java:159)
at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:106)
at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:87)
at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:233)
at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:203)
at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650)
at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1146)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.ClassNotFoundException: org.springframework.beans.factory.NoUniqueBeanDefinitionException
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
... 27 more 
```

是依赖关系的问题吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-10T10:10:56.470

您的参考资料中似乎缺少 spring bean 工件。将以下内容添加到 pom 依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-beans</artifactId>
    <version>${spring-version-for-your-project}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-11-06T14:09:44.250

如果您有版本冲突，也会发生此错误。例如，您可以在版本 3.2.3.RELEASE 中使用 spring-context，它依赖于 spring-beans 3.2.3.RELEASE，并且在同一程序中使用 spring-batch 2.2.2.RELEASE，它依赖于 spring-beans 3.2.0。 RELEASE（注意版本号的不同。）在这种情况下，您将不得不分析依赖关系（例如，使用 Eclipses pom 编辑器）并排除有问题的版本。在我的情况下，这意味着添加：

```
<dependency>
    <groupId>org.springframework.batch</groupId>
    <artifactId>spring-batch-core</artifactId>
    <version>2.2.2.RELEASE</version>
    <exclusions>
        <exclusion>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

# python - 使用 python 的 ElementTree 合并 xml 文件

> ID：15921642
> 
> 赞同：11
> 
> 时间：2013-04-10T09:13:10.230
> 
> 标签：python, xml, merge

我需要在 xml 的第三个块上合并两个 xml 文件。因此，文件 A.xml 和 B.xml 如下所示：

一个.xml

```
<sample id="1">
<workflow value="x" version="1"/>
  <results>
   <result type="T">
      <result_data type="value" value="19"/>
      <result_data type="value" value="15"/>
      <result_data type="value" value="14"/>
      <result_data type="value" value="13"/>
      <result_data type="value" value="12"/>
    </result>
  </results>
</sample> 
```

B.xml

```
<sample id="1">
<workflow value="x" version="1"/>
  <results>
   <result type="Q">
      <result_data type="value" value="11"/>
      <result_data type="value" value="21"/>
      <result_data type="value" value="13"/>
      <result_data type="value" value="12"/>
      <result_data type="value" value="15"/>
    </result>
  </results>
</sample> 
```

我需要合并“结果”

```
<sample id="1">
<workflow value="x" version="1"/>
  <results>
   <result type="T">
      <result_data type="value" value="19"/>
      <result_data type="value" value="15"/>
      <result_data type="value" value="14"/>
      <result_data type="value" value="13"/>
      <result_data type="value" value="12"/>
   </result>
   <result type="Q">
      <result_data type="value" value="11"/>
      <result_data type="value" value="21"/>
      <result_data type="value" value="13"/>
      <result_data type="value" value="12"/>
      <result_data type="value" value="15"/>
   </result>
  </results>
</sample> 
```

到目前为止我所做的是：

```
import os, os.path, sys
import glob
from xml.etree import ElementTree

def run(files):
    xml_files = glob.glob(files +"/*.xml")
    xml_element_tree = None
    for xml_file in xml_files:
        # get root
        data = ElementTree.parse(xml_file).getroot()
        # print ElementTree.tostring(data)
        for result in data.iter('result'):
            if xml_element_tree is None:
                xml_element_tree = data 
            else:
                xml_element_tree.extend(result) 
    if xml_element_tree is not None:
        print ElementTree.tostring(xml_element_tree) 
```

如您所见，我将初始 xml_element_tree 分配给具有标题等的数据，然后使用“结果”进行扩展。然而，这给了我这个：

```
<sample id="1">
<workflow value="x" version="1"/>
  <results>
   <result type="T">
      <result_data type="value" value="19"/>
      <result_data type="value" value="15"/>
      <result_data type="value" value="14"/>
      <result_data type="value" value="13"/>
      <result_data type="value" value="12"/>
   </result>
  </results>
   <result_data type="value" value="11"/>
      <result_data type="value" value="21"/>
      <result_data type="value" value="13"/>
      <result_data type="value" value="12"/>
      <result_data type="value" value="15"/>
   </result>
</sample> 
```

结果需要在底部。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T09:43:40.160

虽然这主要是重复的，答案可以在[这里](https://stackoverflow.com/questions/14878706/merge-xml-files-with-nested-elements-without-external-libraries)找到，我已经这样做了，所以我可以分享这个 python 代码：

```
import os, os.path, sys
import glob
from xml.etree import ElementTree

def run(files):
    xml_files = glob.glob(files +"/*.xml")
    xml_element_tree = None
    for xml_file in xml_files:
        data = ElementTree.parse(xml_file).getroot()
        # print ElementTree.tostring(data)
        for result in data.iter('results'):
            if xml_element_tree is None:
                xml_element_tree = data 
                insertion_point = xml_element_tree.findall("./results")[0]
            else:
                insertion_point.extend(result) 
    if xml_element_tree is not None:
        print ElementTree.tostring(xml_element_tree) 
```

但是，这个问题包含另一个帖子中没有的另一个问题。示例 XML 文件不是有效的 XML，因此不可能有 XML 标记：

```
<sample="1">
    ...
</sample> 
```

不可能更改为：

```
<sample id="1">
    ...
</sample> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-24T10:16:08.710

你可以试试这个解决方案：

```
import glob
from xml.etree import ElementTree

def newRunRun(folder):
    xml_files = glob.glob(folder+"/*.xml")
    node = None
    for xmlFile in xml_files:      
        tree = ElementTree.parse(xmlFile)
        root = tree.getroot()
        if node is None:
            node = root
        else:
            elements = root.find("./results")           
            for element in elements._children:
                node[1].append(element)                
    print ElementTree.tostring(node)

folder = "resources"
newRunRun(folder) 
```

如您所见，我使用第一个文档作为容器，在其中插入其他文档的元素...这是生成的输出：

```
<sample id="1">
<workflow value="x" version="1" />
  <results>
   <result type="Q">
      <result_data type="value" value="11" />
      <result_data type="value" value="21" />
      <result_data type="value" value="13" />
      <result_data type="value" value="12" />
      <result_data type="value" value="15" />
    </result>
  <result type="T">
      <result_data type="value" value="19" />
      <result_data type="value" value="15" />
      <result_data type="value" value="14" />
      <result_data type="value" value="13" />
      <result_data type="value" value="12" />
    </result>
  </results>
</sample> 
```

使用版本：**Python 2.7.15**

# jsp - Spring 属性连接属性值，后跟逗号

> ID：15921649
> 
> 赞同：2
> 
> 时间：2013-04-10T09:13:32.810
> 
> 标签：jsp, spring-mvc

在下面的代码中，我正在获取列表并正确查看，但是在更新时我只面对连接的第一个字段 rsoCode 例如，如果我的 rsoCode 是**NH43**，那么它将作为**NH43,NH43**进入控制器。在更新表单中它显示正确，但是当涉及到

在调试时，我观察到 getRsoCode() 在更新屏幕时调用了两次（我们可以在其中更改值）。

这是JSP代码

```
<%@ taglib uri="http://www.springframework.org/tags" prefix="spring"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<form:form action="" method="POST" commandName="updateRso">
<table>
    <tr>
        <td style="font-weight: bold; font-variant: small-caps;">RSO Code:</td>
        <td><form:input path="rsoCode" value="${updateRso.rsoCode}" disabled="disabled"/></td></tr>

    <tr><td style="font-weight: bold; font-variant: small-caps;">RSO Description:</td>
        <td><form:input path="rsoDescriprion" value="${updateRso.rsoDescriprion}"/></td>
    </tr>
    <tr>
        <td style="font-weight: bold; font-variant: small-caps;">Region Code:</td>
        <td><form:input path="regionCode" value="${updateRso.regionCode}"/></td></tr>
        <tr><td style="font-weight: bold; font-variant: small-caps;">Region Description:</td>
        <td><form:input path="regiondescription" value="${updateRso.regiondescription}"/></td>
    </tr>
    <tr>
        <td colspan="10" align="center">&nbsp;&nbsp;&nbsp;<input type="submit" value="Submit"/> </td>
    </tr>
    </table>
    </form:form> 
```

**控制器代码**

```
@Controller
public class ListRsoController {

    private static final Logger logger = LoggerFactory.getLogger(ListRsoController.class);

    @ModelAttribute("updateRso")
    public ListRso getListRso()
    {

        ListRso updateRso = new ListRso();

        return updateRso;
    }

    @RequestMapping(value="listrso")
    public String listAllRso(ModelMap model) throws Exception{

        ListRsoDao listDao = new ListRsoDao();

        model.addAttribute("rsos", listDao.getList());

        return "listrso/view";
    }

    @RequestMapping(value="getRsoDetails")
    public String getRso(@RequestParam("rsoCode")String rsoCode, ModelMap model,HttpServletRequest req) throws Exception{

        ListRsoDao lstdto = new ListRsoDao();

        Object obj = lstdto.getRsoCode(rsoCode);

        model.addAttribute("savedClass", obj);

        return "listrso/viewdetails";
    }
    @RequestMapping(value="updateRsoDetails", method=RequestMethod.GET)
    public String updateRso(@RequestParam("rsoCode")String rsoCode, ModelMap model,HttpServletRequest req) throws Exception{

        ListRsoDao lstdto = new ListRsoDao();

        Object obj = lstdto.getRsoCode(rsoCode);

        model.addAttribute("updateRso", obj);

        return "listrso/updatedetails";

    }

    @RequestMapping(value="deleteRsoDetails")
    public String deleteRso(@RequestParam("rsoCode")ListRso rsoCode, ModelMap model,HttpServletRequest req) throws Exception{

        ListRsoDao lstdto = new ListRsoDao();

        lstdto.deleteRso(rsoCode);

        //model.addAttribute("savedClass", obj);

        return "listrso/deleteSuccess";
    }

    @RequestMapping(method = RequestMethod.POST, value="updateRsoDetails")
    protected String onSubmit( @ModelAttribute("updateRso") ListRso rsoCommand,  ModelMap model ) throws Exception
    {
        model.clear();
        new  ListRsoDao().updateRso(rsoCommand);
        model.addAttribute("savedClass", rsoCommand);
        return "listrso/view";
    }

} 
```

爪哇豆

```
public class ListRso {

    private String rsoCode;
    private String rsoDescriprion;
    private String regionCode;
    private String regiondescription;

    public ListRso(String rsoCode, String rsoDescriprion, String regionCode,
            String regiondescription) {
        super();
        this.rsoCode = rsoCode;
        this.rsoDescriprion = rsoDescriprion;
        this.regionCode = regionCode;
        this.regiondescription = regiondescription;
    }

    public ListRso(String rsoCode)
    {
        this.rsoCode = rsoCode;
    }
    public ListRso() {
        // TODO Auto-generated constructor stub
    }
    public String getRsoCode() {
        return rsoCode;
    }
    public void setRsoCode(String rsoCode) {
        this.rsoCode = rsoCode;
    }
    public String getRsoDescriprion() {
        return rsoDescriprion;
    }
    public void setRsoDescriprion(String rsoDescriprion) {
        this.rsoDescriprion = rsoDescriprion;
    }
    public String getRegionCode() {
        return regionCode;
    }
    public void setRegionCode(String regionCode) {
        this.regionCode = regionCode;
    }
    public String getRegiondescription() {
        return regiondescription;
    }
    public void setRegiondescription(String regiondescription) {
        this.regiondescription = regiondescription;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:18:14.527

您的表单没有任何操作，这会导致弹簧标签[做奇怪的事情](http://blog.andrewbeacock.com/2009/02/springs-form-tags-make-sure-you-set.html)。和这个 ：

```
<form:form action="" method="POST" commandName="updateRso"> 
```

意味着您只需要这样做（删除 value 属性，输入是从路径填充的）

```
<table>
    <tr>
        <td style="font-weight: bold; font-variant: small-caps;">RSO Code:</td>
        <td><form:input path="rsoCode" disabled="disabled"/></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-16T00:25:51.810

最近我遇到了类似的问题问题的根本原因是我定义了两次相同的路径变量，一个在屏幕上可见，另一个被隐藏。在提交表单时，commqnd 将值与相同的路径/名称连接起来。要解决此问题，您已删除隐藏的。

希望这些信息有帮助

# c++ - Cmake 没有找到 boost 1.51 (windows 8)

> ID：15921656
> 
> 赞同：3
> 
> 时间：2013-04-10T09:14:01.823
> 
> 标签：c++, windows, boost, cmake

我正在尝试编译需要 boost的 mlpack ( [http://www.mlpack.org/ )。](http://www.mlpack.org/)首先我安装了 boostpro 1.51 ( [http://www.boostpro.com/download/](http://www.boostpro.com/download/) ) 并且 boost 现在安装在 C:\Program Files\boost\boost_1_51

然后我使用 cmake 和 mingw32-make 编译并安装了犰狳（mlpack 的另一个依赖项）。Boost也是犰狳的依赖。遵循一些建议（[Cmake 没有找到 Boost](https://stackoverflow.com/questions/3808775/cmake-doesnt-find-boost)），我添加到 CMakeLists 文件中：

```
SET(CMAKE_INCLUDE_PATH ${CMAKE_INCLUDE_PATH} "C:\\Program Files\\boost\\boost_1_51")
SET(CMAKE_LIBRARY_PATH ${CMAKE_LIBRARY_PATH} "C:\\Program Files\\boost\\boost_1_51\\lib") 
```

事情进展得很顺利。

现在我正在尝试在 mlpack 上运行 CMake，但收到此错误：

> C:/Program Files (x86)/CMake 2.8/share/cmake-2.8/Modules/FindBoos t.cmake:1192 处的 CMake 错误（消息）：无法找到请求的 Boost 库。
> 
> 增强版：1.51.0
> 
> Boost 包含路径：C:/Program Files/boost/boost_1_51
> 
> 找不到以下 Boost 库：
> 
> ```
>  boost_program_options
>      boost_unit_test_framework 
> ```
> 
> 没有找到 Boost 库。您可能需要将 BOOST_LIBRARYDIR 设置为包含 Boost 库的目录或将 BOOST_ROOT 设置为 Boost 的位置。调用堆栈（最近的调用优先）：CMakeLists.txt:192 (find_package)

我尝试添加（至于犰狳），但没有改善：

```
SET(CMAKE_INCLUDE_PATH ${CMAKE_INCLUDE_PATH} "C:\\Program Files\\boost\\boost_1_51")
SET(CMAKE_LIBRARY_PATH ${CMAKE_LIBRARY_PATH} "C:\\Program Files\\boost\\boost_1_51\\lib") 
```

然后我也尝试添加：

```
set(BOOST_ROOT "C:\\Program Files\\boost\\boost_1_51")
set(BOOST_INCLUDEDIR "C:\\Program Files\\boost\\boost_1_51")
set(BOOST_LIBRARYDIR "C:\\Program Files\\boost\\boost_1_51\\lib") 
```

对于 BOOST_INCLUDEDIR，我真的不知道我应该指向哪个文件夹。boost_1_51 包含：bin、boost、dist、doc、lib、libs 等

我也试过这个（[cmake 使用了错误的 cboost 库](https://stackoverflow.com/questions/4443931/cmake-is-using-the-wrong-cboost-libs)），但没有成功。

我也有点困惑，因为犰狳似乎编译没有问题（或者我错过了什么？）

非常感谢

注意：cmakelists 文件的内容：

```
#Unfortunately this configuration variable is necessary and will need to be
#updated as time goes on and new versions are released.
set(Boost_ADDITIONAL_VERSIONS "1.41" "1.41.0" "1.42" "1.42.0" "1.43" "1.43.0" "1.44" "1.44.0" "1.45.0" "1.46.0" "1.46.1" "1.47.0" "1.48.0" "1.49.0" "1.51.0")
find_package(Boost
    COMPONENTS
      program_options
      unit_test_framework
    REQUIRED
)
include_directories(${Boost_INCLUDE_DIRS}) 
```

我自己添加了 1.51.0。

* * *

根据我从另一篇文章（[CMake 未找到 Boost](https://stackoverflow.com/questions/13280823/cmake-not-finding-boost?rq=1)）中了解到的情况，这可能与未找到名称正确的库有关。在我的 lib 文件夹中，我有（dll 和 lib 文件）：

```
boost_program_options-vc80-mt-1_51.dll
boost_program_options-vc80-mt-gd-1_51.dll
boost_program_options-vc100-mt-1_51.dll
boost_program_options-vc100-mt-gd-1_51.dll 
```

不知何故，我应该玩类似的命令

```
set(Boost_USE_MULTITHREADED ON) 
```

这样它就会寻找具有预期名称的库？？？？

# java - Jung2：如何禁用节点自循环

> ID：15921658
> 
> 赞同：0
> 
> 时间：2013-04-10T09:14:06.387
> 
> 标签：java, graph, jung

我想制作一个简单的图，它是一个没有节点自循环的图。在在线可用的教程中，据说我应该使用 SimpleGraph 接口，但是它不起作用，因为它在任何 jar 中都找不到。我可以做些什么来禁用自循环，或者我应该只是为了前。在每次释放鼠标键时检查是否正在添加任何自循环并删除这样的边缘，这将是非常低效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:45:05.643

正如上面所说的没有。3 你的代码应该是这样的：

```
public class UndirectedSimpleGraph<V,E> extends UndirectedSparseGraph<V,E> {

public UndirectedSimpleGraph(){
    super();
}

public boolean addEdge(E edge, Pair<? extends V> endpoints, EdgeType edgeType){
    Pair<V> new_endpoints = getValidatedEndpoints(edge, endpoints);
    if (new_endpoints == null)
        return false;

    V v1 = new_endpoints.getFirst();
    V v2 = new_endpoints.getSecond();

    if(v1.equals(v2))
        return false;
    else
        return super.addEdge(edge,endpoints,edgeType);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:22:45.723

我不知道那是什么教程，但是 JUNG 没有“SimpleGraph”界面。

但是，您可以通过以下机制之一自己轻松完成此操作：

1.  正如您所建议的：确定添加的边缘是自循环并将其删除
2.  一旦目标顶点已知，仅在 source != destination 时调用 addEdge()
3.  创建一个覆盖 addEdge() 并拒绝自循环的首选图形类型的子类。

我不明白你为什么认为这是低效的；这些检查中的任何一个都是 O(1)。

# java - Maven 和可选的运行时依赖项

> ID：15921659
> 
> 赞同：5
> 
> 时间：2013-04-10T09:14:09.977
> 
> 标签：java, maven

我开始修复一个使用 maven 的 java 项目，虽然我已经构建了项目，但在运行时它因缺少依赖项而失败。我看过了，错误缺少包含的编译时依赖项的可选依赖项。我可以通过并添加这些，但在我看来，我可以让所有东西都构建和运行得很好，只是因为我错过了使用缺少的依赖项的一些代码，整个事情就崩溃了。

我真正想知道的是是否有一种自动方法来查找我选择不包含的可选依赖项。我已经使用过`mvn dependency:tree`，但这仅显示了我拥有的依赖项（不确定它检查的范围）并且我已经尝试过`mvn dependency:analyze`，但这似乎显示了它认为我不使用的依赖项以及那些已被间接删除的依赖项。我看不到的是如何查看我不包括的选项列表。

目前我解决这个问题的方法是阅读 pom 并尝试从那里解决它，但我不认为这特别健壮。

作为参考，我对 maven 风格的依赖管理还很陌生，而且表面上很喜欢它，但是这个可选的东西对我来说有点绊脚石。我知道可选选项阻止我拉下我不会使用的依赖项，但它并没有让我知道如何锻炼可用的选项以及我确实需要的选项。

我正在使用 Eclipse Juno、m2Eclipse（也有 maven 3.0.5 cli）、java 6/7。

任何人都知道如何更好地做到这一点，或者我完全忽略了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-16T09:34:21.830

不，事情是——有点——就是这样。Maven 不进行依赖管理，它允许您通过提供使用和分析它们的工具来进行依赖管理。所以工作仍然在开发人员方面。人们经常把它混为一谈。

这主要是由于项目通常具有不同的部署目标。结果，有时他们会收集一堆 jar 文件，这些文件会被复制一次到 tomcat 中，而另一组文件则用于 weblogic。因此，您的项目中可能有一个自述文件，其中说明了在部署 Maven 工件之前要复制的内容。或者它是隐含的知识——那你就完蛋了。

dependency:analyze 作用于字节码而不是源。因此它看不到 maven 知道什么。

也许`mvn help:effective-pom`为分析整个事情提供了更好的基础？或者您可以尝试修改依赖插件以显示该信息。Maven 插件并不难使用。

我不知道显示所有可选传递依赖项的插件。但是由于依赖项的 pom.xml 文件已下载到本地 maven 存储库中，因此您可以在那里进行文本搜索。

前段时间也有关于可选依赖项的讨论：[处理可选依赖项的最佳策略](https://stackoverflow.com/questions/9967390/best-strategy-for-dealing-with-optional-dependencies)- 它也可能会有所帮助。

# android - 如何在进度对话框中显示动画以消除其标题和消息空间？

> ID：15921664
> 
> 赞同：1
> 
> 时间：2013-04-10T09:14:31.430
> 
> 标签：android, animation, progressdialog

我试图制作一个显示动画序列的进度对话框，我实现了这一点，但我无法在运行时消除对话框中显示的空白空间。我希望只有加载圈显示为对话框。下面是显示我的进度对话框的代码。 ***mytital***是我的动画 xml 文件。

```
private void showDialog() {
        ProgressDialog dialog = new ProgressDialog(ctx);    
         dialog.setCancelable(true);    
         dialog.getWindow().setLayout(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
         dialog.setIndeterminate(true);
         dialog.setIndeterminateDrawable(ctx.getResources().getDrawable(R.drawable.mytital));
         dialog.show();

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:24:37.893

希望这会有所帮助，如果您使用的是 AsynTask ...

onPreExecute()

```
 LinearLayout  progressLayout = new LinearLayout(getApplicationContext());
    progressLayout.setGravity(Gravity.CENTER);
    addContentView(progressLayout,new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    progressbar = new ProgressBar(getApplicationContext());
    progressbar.getIndeterminateDrawable().setColorFilter(Color.BLUE, android.graphics.PorterDuff.Mode.MULTIPLY);
    progressLayout.addView(progressbar); 
```

和 onPostExecute()

```
progressLayout.removeView(progressbar);
progressLayout.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:07:57.143

比你可以使用这个.. :)

```
ProgressDialog dialog = new ProgressDialog(ClassName.this);
 dialog.setMessage("Please wait...");
 dialog.setCancelable(false);
 dialog.show(); 
```

要驳...

```
dialog.dismiss(); 
```

如果可行，请接受答案:)

# api - node.js 的 API 框架

> ID：15921665
> 
> 赞同：0
> 
> 时间：2013-04-10T09:14:33.637
> 
> 标签：api, node.js, frameworks

哪个节点 js 的 API 框架最适合移动应用程序（本机或 HTML5）或客户端 HTML5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:21:37.977

虽然有很多框架（[https://github.com/joyent/node/wiki/Modules#wiki-web-frameworks-full](https://github.com/joyent/node/wiki/Modules#wiki-web-frameworks-full)），比如restify、express，但我认为hapi 是为您的需求而构建的。它的重点是您的业务逻辑，并倾向于配置以实现简单快速的部署。

[您可以在https://npmjs.org/package/hapi](https://npmjs.org/package/hapi)和[https://github.com/spumko/hapi](https://github.com/spumko/hapi)中找到该包

它看起来很有希望。[在https://www.youtube.com/watch?v=Recv7vR8ZlA](https://www.youtube.com/watch?v=Recv7vR8ZlA)中有一个关于框架的讨论，主要贡献者讨论了是什么让 API 框架打勾。

它支持缓存、验证、插件等（观看视频）。

# asp.net - modalpopupextender 取消按钮就像在回发一样工作

> ID：15921668
> 
> 赞同：4
> 
> 时间：2013-04-10T09:14:40.767
> 
> 标签：asp.net, ajax

我已经为 ModalPopUpExtender 的取消按钮（我正在使用 javascript）实现了我的 owm 功能，而不是为 ModalPopUpExtender 编写“cancelcontrolid”属性。它工作正常，但有一个问题是这个取消按钮的行为就像它正在回发一样。必须具有此功能，因为当我编写“cancelcontrolid”属性时，它不会使用默认值重置 ModalPopUpExtender。请帮忙..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:54:21.820

由于您使用按钮仅执行**客户端**代码，为什么要使用`<asp:Button`您应该使用简单的 HTML `<input type="button"`：

```
<form id="form1" runat="server">
<asp:Button ID="btnShow" runat="server" Text="Show" />
<asp:ToolkitScriptManager ID="scripManager" runat="server" />
<asp:ModalPopupExtender ID="modal" BackgroundCssClass="modalStyle" PopupControlID="popup"
    TargetControlID="btnShow" runat="server" BehaviorID="modalBehavior" />
<asp:Panel runat="server" ID="popup" CssClass="panelStyle">
    <input type="button" id="btnCancel" onclick="Hide()" value="Cancel" />
</asp:Panel>
</form>

<script type="text/javascript">
    function Hide() {
        $find("modalBehavior").hide();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T09:33:21.830

尝试这个......

```
<asp:button runat="server".... OnClientClick="myfunction(); return false;" /> 
```

# android - Google Drive 实施到 Android 应用程序并从 Google Drive 下载文件

> ID：15921672
> 
> 赞同：8
> 
> 时间：2013-04-10T09:14:50.080
> 
> 标签：android, google-drive-api

Drive 快速启动应用示例仅适用于将文件从 Android 设备上传到用户帐户。我想将文件从 Gdrive 下载到 Android 应用程序。任何帮助将不胜感激。

我想要这个演示示例的完全相反的过程[https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)（从 Gdrive 下载）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T09:56:50.383

从云端硬盘下载文件内容有两个步骤。首先，检索文件的元数据和文件的 downloadUrl：

```
// retrieve metadata
File file = drive.files().get(fileId).execute(); 
```

并且，向 downloadUrl 发出经过身份验证的请求：

```
// download contents a
GenericUrl url = new GenericUrl(file.getDownloadUrl());
HttpResponse response = drive.getRequestFactory().buildGetRequest(url).execute();
String contents = new Scanner(response.getContent()).useDelimiter("\\A").next(); 
```

# java - JAVA 中的 SELECT 语句

> ID：15921676
> 
> 赞同：9
> 
> 时间：2013-04-10T09:14:57.830
> 
> 标签：java, swing, sql-server-2005, select, jtable

```
 public void search() throws Exception{
            Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
                String url = "jdbc:odbc:******";
                String user = "*****";
                String pass = "*****";
                Connection con =  DriverManager.getConnection(url, user, pass);
                Statement state = con.createStatement();
                ResultSet rs = state.executeQuery("");
                ResultSetMetaData rsmetadata = rs.getMetaData();
                int columns = rsmetadata.getColumnCount();
                DefaultTableModel dtm = new DefaultTableModel();
                Vector column_name = new Vector();
                Vector data_rows = new Vector();

                for (int i=1; i<columns;i++){
                    column_name.addElement(rsmetadata.getColumnName(i));
                }
                dtm.setColumnIdentifiers(column_name);

                while(rs.next()){
                    data_rows = new Vector();
                    for (int j=1; j<columns; j++){
                    data_rows.addElement(rs.getString(j));
                    }
                    dtm.addRow(data_rows);
                }
                tblPatient.setModel(dtm);
        } 
```

在我的`ResultSet rs = state.executeQuery()`我用这个`SQL`

```
 "SELECT "
                            + "pIDNo AS 'Patient ID',"
                            + "pLName AS 'Last Name'," 
                            + "pFName AS 'First Name',"
                            + "pMI AS 'M.I.',"
                            + "pSex AS 'Sex',"
                            + "pStatus AS 'Status',"
                            + "pTelNo AS 'Contact No.',"
                            + "pDocID AS 'Doctor ID',"
                            + "pAddr AS 'St. No.',"
                            + "pStreet AS 'St. Name',"
                            + "pBarangay AS 'Barangay',"
                            + "pCity AS 'City',"
                            + " pProvince AS 'Province',"
                            + " pLNameKIN AS 'Last Name',"
                            + "pFNameKIN AS 'First Name',"
                            + "pMIKIN AS 'M.I.',"
                            + "pRelationKIN AS 'Relation',"
                            + "pTotalDue AS 'Total Due'"
                            + " FROM dbo.Patients"); 
```

首先我运行这一行（pTotalDue 没有出现在 jTable 中。）

在我第二次尝试显示它时，我这样做：

```
"SELECT pTotalDue AS 'Total Due' FROM dbo.Patients" 
```

现在我尝试了这个，我认为我的代码确实有问题。顺便说一句，此列具有 MONEY DATA TYPE

为什么它没有显示给我`JTable`？谁能告诉我我的代码有什么问题？

（给我的答案中的问题） public class QueryOnWorkerThread extends SwingWorker{ private final JTable tableToUpdate;

```
 public QueryOnWorkerThread( JTable aTableToUpdate ) {
    tableToUpdate = aTableToUpdate;
  }

  @Override
  protected TableModel doInBackground() throws Exception {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String url = "jdbc:odbc:OJT_dsn";
    String user = "sa";
    String pass = "";
    Connection con =  DriverManager.getConnection( url, user, pass );
    Statement state = con.createStatement();
    ResultSet rs = state.executeQuery("");
    ResultSetMetaData rsmetadata = rs.getMetaData();
    int columns = rsmetadata.getColumnCount();
    DefaultTableModel dtm = new DefaultTableModel();
    Vector column_name = new Vector();
    Vector data_rows;

    //note the <= check iso the < check (as the count starts at index 1)
    for (int i=1; i<=columns;i++){
      column_name.addElement(rsmetadata.getColumnName(i));
    }
    dtm.setColumnIdentifiers(column_name);

    while(rs.next()){
      data_rows = new Vector();
      //note the <= check iso the < check (as the count starts at index 1)
      for (int j=1; j<=columns; j++){
        data_rows.addElement(rs.getString(j));
      }
      dtm.addRow(data_rows);
    }
    return dtm;
  }

        `@Override <<<<<<<<<<<<<<<<<<<<< I have a problem here it says : done() in javaapplication25.SearchPatient.QueryWorkerThread cannot override done() in javax.swing.SwingWorker overriden method does not throw java.lang.Exception , what does it mean sir?` 
  protected void done() throws Exception{
    //this method runs on the EDT, so it is safe to update our table here
    try {
      tableToUpdate.setModel( get() );
    } catch ( InterruptedException e ) {
      throw new RuntimeException( e );
    } catch ( ExecutionException e ) {
      throw new RuntimeException( e );
    }
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T09:23:26.107

尝试这个

```
DefaultTableModel dtm=(DefaultTableModel)table.getModel();
for (int i = dtm.getRowCount() - 1; i > -1; i--) {
dtm.removeRow(i);
}

Connection con =  DriverManager.getConnection(url, user, pass);
Statement state = con.createStatement();
ResultSet rs = state.executeQuery("Your SQL Query");

while(rs.next())
{
String str1=rs.getString(1);
String str2=rs.getString(2);
String str3=rs.getString(3);
String str4=rs.getString(4);
String str5=rs.getString(5);
:
:
:
dtm.addRow(new Object[]{str1,str2,str3,str4,str5});
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T09:21:32.447

在你的循环中，你的退出条件是

```
j<columns 
```

这意味着永远不会恢复最后一列。试试这个：

```
for (int j=1; j<=columns; j++) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-12T11:03:20.660

正如@Joan 已经指出的那样，您最后一列没有出现的事实可能与您的循环语句有关。

但是，此代码存在更多问题。您应该只在 Event Dispatch Thread 上更新 Swing 组件，并且不应在该线程上执行长时间运行的操作。简而言之，混合 SQL 查询和更新`JTable`不应该发生在同一个线程上。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/)指南。

使用 a`SwingWorker`可以解决这个问题：

```
public class QueryOnWorkerThread extends SwingWorker<TableModel, Void>{
  private final JTable tableToUpdate;

  public QueryOnWorkerThread( JTable aTableToUpdate ) {
    tableToUpdate = aTableToUpdate;
  }

  @Override
  protected TableModel doInBackground() throws Exception {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    String url = "jdbc:odbc:******";
    String user = "*****";
    String pass = "*****";
    Connection con =  DriverManager.getConnection( url, user, pass );
    Statement state = con.createStatement();
    ResultSet rs = state.executeQuery("");
    ResultSetMetaData rsmetadata = rs.getMetaData();
    int columns = rsmetadata.getColumnCount();
    DefaultTableModel dtm = new DefaultTableModel();
    Vector column_name = new Vector();
    Vector data_rows;

    //note the <= check iso the < check (as the count starts at index 1)
    for (int i=1; i<=columns;i++){
      column_name.addElement(rsmetadata.getColumnName(i));
    }
    dtm.setColumnIdentifiers(column_name);

    while(rs.next()){
      data_rows = new Vector();
      //note the <= check iso the < check (as the count starts at index 1)
      for (int j=1; j<=columns; j++){
        data_rows.addElement(rs.getString(j));
      }
      dtm.addRow(data_rows);
    }
    return dtm;
  }

  @Override
  protected void done() {
    //this method runs on the EDT, so it is safe to update our table here
    try {
      tableToUpdate.setModel( get() );
    } catch ( InterruptedException e ) {
      throw new RuntimeException( e );
    } catch ( ExecutionException e ) {
      throw new RuntimeException( e );
    }
  }
} 
```

`SwingWorker`可以通过调用启动

```
QueryOnWorkerThread worker = new QueryOnWorkerThread( tblPatient );
worker.execute(); 
```

请注意我如何更改代码中的循环

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-12T12:05:37.530

`ResultSet.getBigDecimal()`尝试通过而不是通过获取该列`ResultSet.getString()`。然后把你检索`BigDecimal.toPlainString()`到你的表格单元格。

*例子：*

```
data_rows.addElement(rs.getBigDecimal("pTotalDue").toPlainString());//Assuming your select returns a pTotalDue Column (e.g. SELECT pTotalDue,... FROM ...) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-18T09:04:41.610

尝试使用 TableCellRenderer。

实现渲染器并以您希望的形式呈现具有货币类型的列。

问候， HL

# tomcat7 - maven tomcat7：关机

> ID：15921678
> 
> 赞同：1
> 
> 时间：2013-04-10T09:15:06.170
> 
> 标签：tomcat7, maven-tomcat-plugin, embedded-tomcat-7

我使用 mvn tomcat7:run 启动我的应用程序及其工作，但是当我使用 mvn tomcat7:shutdown 停止它时，它显示构建成功但嵌入式 tomcat 没有关闭我得到这个结果

```
[INFO] Scanning for projects...
[WARNING]
[WARNING] Some problems were encountered while building the effective model for
com.xxx.yy.ci:ci:war:1.0.0
[WARNING] 'build.plugins.plugin.(groupId:artifactId)' must be unique but found d
uplicate declaration of plugin org.apache.maven.plugins:maven-dependency-plugin
@ line 95, column 12
[WARNING]
[WARNING] It is highly recommended to fix these problems because they threaten t
he stability of your build.
[WARNING]
[WARNING] For this reason, future Maven versions might no longer support buildin
g such malformed projects.
[WARNING]
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building CI Web Application 1.0.0
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- tomcat7-maven-plugin:2.0:shutdown (default-cli) @ ci ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 6.391s
[INFO] Finished at: Wed Apr 10 14:32:04 IST 2013
[INFO] Final Memory: 6M/15M
[INFO] ------------------------------------------------------------------------ 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T12:57:21.677

mvn tomcat7:run 需要使用 ctrl+c 来关闭，因为它附加到当前的 maven 运行。所以你不需要使用关机目标。也许我错过了什么？

# c# - 让 Outlook 搜索与特定电子邮件的所有对话

> ID：15921679
> 
> 赞同：1
> 
> 时间：2013-04-10T09:15:07.160
> 
> 标签：c#, outlook-2007

我希望我的应用程序在 Outlook 中搜索与某个人的所有邮件通信。我正在尝试使用 Microsoft.Office.Interop.Outlook API，但我在弄清楚如何执行此搜索时遇到问题，或者即使我尝试做的事情是可能的。

所以我不想从 Outlook 中提取数据，我想远程控制 Outlook 在那里执行搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-12T08:30:45.683

这可以通过对话来完成。

```
 MailItem mi = ....
    Conversation c = mi.GetConversation();
    c.GetRootItems() -->  thats the whole correspondence 
```

# spring - Spring 的 DefaultMessageListenerContainer 中 taskExecutor 属性的用途

> ID：15921684
> 
> 赞同：10
> 
> 时间：2013-04-10T09:15:18.967
> 
> 标签：spring, spring-jms

Spring 的[DefaultMessageListenerContainer](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html) (DMLC) 具有[concurrentConsumer](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#getConcurrentConsumers%28%29)和[taskExecutor](http://static.springsource.org/spring/docs/3.0.5.RELEASE/api/org/springframework/jms/listener/DefaultMessageListenerContainer.html#setTaskExecutor%28java.util.concurrent.Executor%29)属性。taskExecutor bean 可以被赋予[corePoolSize](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/concurrent/ThreadPoolTaskExecutor.html#getCorePoolSize%28%29)属性。那么指定 concurrentConsumer 和 corePoolSize 有什么区别？定义 concurrentConsumer 属性时，意味着 Spring 将创建指定数量的消费者/消息侦听器来处理消息。corePoolSize 什么时候出现？

代码片段

```
<bean id="myMessageListener"
    class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="connectionFactory" />
    <property name="destination" ref="myQueue" />
    <property name="messageListener" ref="myListener" />
    <property name="cacheLevelName" value="CACHE_CONSUMER"/>
    <property name="maxConcurrentConsumers" value="10"/>
    <property name="concurrentConsumers" value="3"/>
    <property name="taskExecutor" ref="myTaskExecutor"/>
</bean>

 <bean id="myTaskExecutor" class="org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor" >
    <property name="corePoolSize" value="100"/>
    <property name="maxPoolSize" value="100"/>
    <property name="keepAliveSeconds" value="30"/>
     <property name="threadNamePrefix" value="myTaskExecutor"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-22T15:36:56.983

# TaskExecutor 属性的用途

> 设置 Spring TaskExecutor 以用于运行侦听器线程。默认是一个 SimpleAsyncTaskExecutor，根据指定的并发消费者数量启动多个新线程。

指定一个替代 TaskExecutor 以与现有线程池集成。

以上来自`[Spring Official Documentation][1]`

当您指定替代任务执行器时，侦听器线程将使用定义的任务执行器，而不是使用 asyncTaskExcutor。

当我们用相同的 containerFactory 定义两个 jmsListener 时，这很容易说明。当你指定并发时，并发应该支持taskExecutor corePoolSize和maxPoolSize。

如果您将并发设置为 5-20 并且您有两个侦听器，那么您应该将核心 poolSize 设置为大于 10 并且将 maxPoolSize 设置为大于 40。然后侦听器可以相应地获取线程的并发限制。

在这种情况下，如果您将 maxPoolsize 设置为小于 10，那么侦听器容器将不会在 10 上。从春天开始，您也会收到以下警告

```
The number of scheduled consumers has dropped below concurrent consumers limit, probably due to tasks having been rejected. Check your thread pool configuration! Automatic recovery to be triggered by remaining consumers.

basically, the listener threads will act based on the taskExecutor property. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T12:28:52.813

根据 4.3.6 版本，`taskExecutor`包含`AsyncMessageListenerInvoker`负责消息处理的实例。`corePoolSize`是定义池中的物理线程数，`concurrentConsumer`而是该池中的任务数。我猜这个抽象是为了更灵活的控制而设计的。

# django - 从 foreach django 中排除第一个值

> ID：15921690
> 
> 赞同：0
> 
> 时间：2013-04-10T09:15:52.813
> 
> 标签：django, foreach

嗨，我有一个由 django 提供支持的购物车网站，我使用以下代码获得了产品的缩略图

```
{% for image in images %}
    <li>
        <a  rel="zoom-id:zoom;" rev="{{ MEDIA_URL }}{% thumbnail image.file 510 700 %}"  class="MagicThumb-swap"  href="{{ MEDIA_URL}}{% thumbnail image.file 2500 3500 %}">
            <img alt="{{ image.description }}" src="{{ MEDIA_URL }}{% thumbnail image.file 75 100 %}">
        </a>
    </li>
{% endfor %} 
```

其中有多个图像

```
image1.jpg
image2.jpg
image3.jpg 
```

我需要显示来自 foreach 的第一个图像或值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:29:58.447

据我了解，您只想显示图像中的第一张图像。

所以你可以使用[`slice`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/#slice)过滤器将你的列表分成1个项目并使用它，比如

```
 {% for image in images|slice:"1" %}

    {# your code #}

 {% endfor %} 
```

或者您可以使用`forloop.first`并拥有该代码，例如

```
 {% for image in images %}
    {% if forloop.first %}

        {# your code #}

    {% endif %}
 {% endfor %} 
```

更新：

首先排除并显示剩余

```
 {% for image in images %}
    {% if forloop.first %} {# Do nothing #}
    {% else %}

        {# your code #}

    {% endif %}
 {% endfor %} 
```

# openssl - 获取代码签名证书的步骤

> ID：15921694
> 
> 赞同：4
> 
> 时间：2013-04-10T09:15:59.517
> 
> 标签：openssl, certificate, keystore, keytool, pfx

我们使用证书在我们的产品中签署 ActiveX。
通常客户会向我发送 spc 和 pvk 文件以及私钥的密码。
我使用 spc 和 pvk 文件生成 pfx 文件并使用此 pfx 文件签署 ActiveX。

以前的证书即将过期，客户向我发送了新证书。
但现在他向我发送了带有 BASE64 格式证书的**密钥库**文件和电子邮件。
电子邮件中有以下条目：

```
Below is your Code Signing certificate:
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----

Below is the intermediate CA certificate:
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE-----

Below is your certificate in pkcs7 format:
-----BEGIN CERTIFICATE-----
...
-----END CERTIFICATE----- 
```

我做了接下来的步骤来创建 pfx 文件：

```
1\. Put certificate in pkcs7 format from email to file certificate.p7b.

2\. Export certificate in pkcs7 format into certificate.cer file.
openssl.exe pkcs7 -print_certs -in certificate.p7b -out certificate.cer

3\. Generate certificate.spc file from certificate.cer.
cert2Spc.exe certificate.cer certificate.spc

4\. Export private key from keystore into PKCS#12 (.p12) file.
keytool -importkeystore -srckeystore keystore -destkeystore new-store.p12 -deststoretype PKCS12

5\. Extract private key from PKCS#12 to PEM.
openssl.exe pkcs12 -in new-store.p12 -nodes -out private.rsa.pem

6\. Create PVK file from PEM.
openssl rsa -in private.rsa.pem -outform PVK -pvk-strong -out FILENAME.pvk

7\. Create PFX file from SPC and PVK files.
pvk2pfx.exe -pvk FILENAME.pvk -pi <password> -spc certificate.spc -pfx myproject.pfx -po <password> 
```

这是正确的方法吗？
对我来说很多步骤。
生成 pfx 文件是否有很多最短路径？

我应该如何处理电子邮件中的“代码签名证书”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T15:11:23.263

This is the correct path, especially if you have to export the certificate from a Java keystore.

I had a similar problem, having to convert a Java certificate to pfx and have found great inspiration from your question.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T10:42:33.267

如果您想缩短流程，可以跳过第 3 步，因为 pvk2pfx 接受 .cer 格式作为 .spc 的替代格式。

# java - 覆盖对象方法良好的编程习惯？

> ID：15921695
> 
> 赞同：0
> 
> 时间：2013-04-10T09:16:03.327
> 
> 标签：java, overriding

对于一个编程项目，我们制作了大约两打我们需要的类。即使我们没有使用它们，从 Object覆盖`equals()`和函数是一种好的编程习惯吗？`hashcode()`我们认为这可能会很好，以防我们将来需要它们，但我们不确定。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T09:17:48.930

除非您需要与 提供的`equals`和不同的实现，否则不要覆盖它们。如[JavaDoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)中所述，版本...`hashCode``Object``Object`

> ...在对象上实现最有区别的可能等价关系；也就是说，对于任何非`null`引用值`x`and ，当且仅当and引用同一个对象（具有值）`y`时，此方法才返回。`true``x``y``x == y``true`

如果您需要不同的含义`equals`（例如，`String`确实如此），您只会覆盖它们。（而且你说得很对，如果你覆盖一个，你几乎总是需要覆盖另一个。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:17:39.477

并不真地。仅在需要时才这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T09:21:50.367

编写一些你知道你不需要的东西是没有意义的。

OTOH、equals 和 hashCode 对覆盖非常有用，您可能很容易在没有意识到的情况下使用它们，例如

*   将对象放入一个`HashMap`
*   间接测试相等性，例如使用单元测试`assertEquals`
*   测试对象是否存在于集合中

基本上，如果您的对象具有值语义，以某种方式用作“数据”并且不是单例，那么由于上述一个或多个原因，您最终可能不得不覆盖 equals。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T09:17:08.487

我会犹豫是否仅仅因为您“可能”需要它们而重写某些方法。让需求出现，然后解决问题。提供了这些方法的默认实现，并且可以使用集合开箱即用，添加您自己的实现可能会产生问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-10T09:18:39.450

`equals`即使您不直接调用它，某些方法也会使用。

只有当你**真的**需要它时，你才应该这样做。（如果`Object.equals()`并且`Object.hashcode()`没有为您的班级做它需要做的事情）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-10T09:19:16.043

你应该覆盖`equals()`，`hashCode()`当你需要时，你应该总是覆盖`toString()`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T09:20:41.100

除非你真的需要它，否则不要覆盖它。当您尝试将这些对象用作`HashMap`.

# javascript - 如何在html中获取任何对象的id名称

> ID：15921699
> 
> 赞同：0
> 
> 时间：2013-04-10T09:16:16.580
> 
> 标签：javascript, html, function

我在 img 上调用方法 onClick 函数，我希望该图像 ID 可以进一步使用，因此如何访问该图像 ID

```
 con.innerHTML += '<table id="results" width="915" border="1" style="margin:-46px 0 0 -2px;"><tr><td><input id="chkbox'+j+'" type="checkbox" name="click_1" value="">&nbsp;'
        + str
        + '</td><td colspan="4" align="right"><a href="javascript:presenter.command(\'viewPdf\',{\'path\': \'/images/pdf/animal/Beef/'+j+'.pdf\'});"><img src="images/view.png" style="margin-left:250px;"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/email.png" id="'+j+'" onClick=mytest()></td></tr>'+ break_line +'<img src="images/line.png" style="margin-bottom:-47px;"></table>'; 
```

这是我要存储图像的 id 的函数，它是 j

```
 function mytest(){

     var ab=document.getElementById('j');

     alert("ali this is wokring fine");

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:18:52.393

如果您坚持使用内联事件属性，只需执行以下操作：

```
onClick='mytest(this)' 
```

...它将对单击元素的引用传递给您的函数：

```
function mytest(clickedElement) {
    var theId = clickedElement.id;
} 
```

然后，您可以访问相关元素的任何属性。我已经展示了如何获取`id`，但您可能不需要`id`，因为如果您已经引用了该元素，那么您显然可以直接使用它 - 鉴于它是一个 img，例如，您可以更改它`src`：

```
clickedElement.src = "someotherimg.jpg"; 
```

请注意，您根本不需要`getElementById()`。

更新：回答“如果？” 在评论中，您可以设置`mytest()`接收 id：

```
function mytest(elId) {
    var ab = document.getElementById(elId);
    // etc
} 
```

然后你可以从一个`onclick`处理程序中调用它：

```
onclick='mytest(this.id);' 
```

...如果 id 已知，则直接在您的代码中：

```
mytest('1');
mytest('2');
var someId = '3';
mytest(someId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:24:21.950

你可以做的是：

```
<img id="some_id" src="images/email.png" onclick="mytest(this)">

function mytest (img) {
  alert(img.id);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:19:36.997

在 mytest 中传递 j

```
+ '</td><td colspan="4" align="right"><a href="javascript:presenter.command(\'viewPdf\',{\'path\': \'/images/pdf/animal/Beef/'+j+'.pdf\'});"><img src="images/view.png" style="margin-left:250px;"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="images/email.png" id="'+j+'" onClick="mytest('+j+');"></td></tr>'+ break_line +'<img src="images/line.png" style="margin-bottom:-47px;"></table>'; 
```

JS：

```
function mytest(id){

     var ab=document.getElementById(id);

     alert("ali this is wokring fine");

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:21:41.373

在 Image 标签中调用如下`Mytest()`函数

```
onClick='mytest(this);' 
```

**Javascript：**

```
function mytest(imgEle) {
   var ab=imgEle.id;
   alert("ali this is wokring fine");
} 
```

# node.js - Mongoose 嵌套对象数组中的唯一值

> ID：15921700
> 
> 赞同：52
> 
> 时间：2013-04-10T09:16:17.487
> 
> 标签：node.js, mongodb, mongoose

对于我的项目，我想为组织组保留一个猫鼬文档，如下所示：

```
var groupSchema = Schema({
  name : { type : String },
  org : { type : Schema.Types.ObjectId, ref : 'Organization' },
  ...
  users : [{
    uid : { type : Schema.Types.ObjectId, ref : 'User' },
    ...
  }]
}); 
```

我想防止同一个用户在同一个组中两次。为此，我需要强制 users.uid 在 users 数组中是唯一的。我尝试为 uid 声明“唯一：真”，但这没有用。有没有办法用 mongoose 或 mongoDB 做到这一点而无需额外的查询或拆分模式？

编辑：我将 uid 的先前值更改为 uid : { type : Schema.Types.ObjectId, ref : 'User', index: {unique: true, dropDups: true} } 但这似乎仍然不起作用。

编辑：假设没有简单的方法来实现这一点，我添加了一个额外的查询，检查用户是否已经在组中。这在我看来是最简单的方法。

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-04-10T12:36:11.650

数组字段上的唯一索引强制相同的值不能出现在集合中多个*文档*的数组中，但不会阻止相同的值在单个文档的数组中出现多次。因此，当您向数组添加元素时，您需要确保唯一性。

仅当值不存在时，才使用[`$addToSet`](http://docs.mongodb.org/manual/reference/operator/addToSet/#op._S_addToSet)运算符向数组添加值。

```
Group.updateOne({name: 'admin'}, {$addToSet: {users: userOid}}, ... 
```

但是，如果`users`数组包含具有多个属性的对象，并且您希望确保其中一个的唯一性（`uid`在这种情况下），那么您需要采取另一种方法：

```
var user = { uid: userOid, ... };
Group.updateOne(
    {name: 'admin', 'users.uid': {$ne: user.uid}}, 
    {$push: {users: user}},
    function(err, numAffected) { ... }); 
```

这样做是限定`$push`更新仅在`user.uid`不存在于`uid`任何元素的字段中时发生`users`。所以它模仿`$addToSet`行为，但只是为了`uid`.

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-09-20T20:12:57.353

好吧，这可能是个老问题，但是对于 mongoose > v4.1，您可以使用`$addToSet`运算符。

> $addToSet 运算符向数组添加一个值，除非该值已经存在，在这种情况下 $addToSet 对该数组不做任何事情。

例子：

```
MyModal.update(
   { _id: 1 },
   { $addToSet: {letters: [ "c", "d" ] } }
) 
```

# drop-down-menu - 淘汰赛下拉选择更改

> ID：15921703
> 
> 赞同：0
> 
> 时间：2013-04-10T09:16:20.660
> 
> 标签：drop-down-menu, knockout.js, razor-2

嗨朋友们，我正在尝试在 mvc razor 中的一个网页上使用 knockoutjs。从以下 ViewModel 我正在实现“添加更多”功能。但我的问题是我们如何实现以下功能：

(1) 当“烟草类型”的下拉菜单选择为“选择...”时，第二个下拉菜单应该是不可见的

(2)当我们选择一些其他值（除了“选择”）时，第二个下拉列表应该包含值 1 到 10....

（3）当我们选择“其他”而不是下拉时，应该会出现一个文本框

*这是我的尝试：*

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/knockout-2.1.0.js")" type="text/javascript"></script>

<script type="text/html" id="ddlSelection">
<div><select></select> yrs.</div>
<div><input type="text" data-bind=""></input></div>
</script>

<div id="container">
  @*<div data-bind="template:{name:'smoker'}"></div>*@
  <table cellpadding="3" cellspacing="4">
    <tbody data-bind="foreach: seats">
        <tr>
            <td>
                Type of Tobacco/Nicotine consumed :
            </td>
            <td>
                <select data-bind="options: $root.availabledrugs, value: Drug, optionsText: 'DrugName'"></select> 
            </td>
            <td><select></select></td>
        </tr>
        <tr>
            <td>
                Quantity : <input data-bind="value: Name" /> 
            </td>
            <td>
                Frequency : <select data-bind="options: $root.availablefrequency, value: Frequency, optionsText: 'frequency'"></select>
            </td>
            <td data-bind="text: FormatPrice"></td>
        </tr>
    </tbody>
</table>
<button data-bind="click:AddConsumption">Add New One</button>
</div> 

<script type="text/javascript">
    function setconsumption(name, initdrug,initfrequency) {
        var self = this;
        self.Name = name;
        self.Drug = ko.observable(initdrug);
        self.Frequency = ko.observable(initfrequency);
        self.FormatPrice = ko.computed(function () {
            return self.Drug().Price ? "$" + self.Drug().Price.toFixed(2) : "none";
        });
    }

    function ConsumptionViewModel() {
        var self = this;
        self.availabledrugs = [{ "DrugName": "Choose...", "Price": 0 },
                               { "DrugName": "Cigarettes", "Price": 10 },
                               { "DrugName": "Cigar", "Price": 20 },
                               { "DrugName": "Others", "Price": 30}];

        self.availablefrequency = [{ "frequency": "Choose..." }, { "frequency": "freq1" }, { "frequency": "freq2"}];

        self.seats = ko.observableArray(
                                        [new setconsumption("", self.availabledrugs[0], self.availablefrequency[0])]);

        self.AddConsumption = function () {
            self.seats.push(new setconsumption("", self.availabledrugs[0], self.availablefrequency[0]));
        };
    }

    ko.applyBindings(new ConsumptionViewModel());
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:51:30.870

我很难猜出你想要达到的目标。但我认为您正在寻找淘汰赛中的[可见绑定](http://knockoutjs.com/documentation/visible-binding.html)。

> 根据您传递给绑定的值，可见绑定会导致关联的 DOM 元素变为隐藏或可见。

第二个想法应该是`optionsCaption`选项[绑定](http://knockoutjs.com/documentation/options-binding.html)。

> 如果您将 optionsCaption 与选项绑定一起使用，则 ko 将在选择列表中添加一个额外的选项，默认情况下将选择该选项并包含未定义的值。

通过使用这两者，我已经根据您的要求创建了一个小提琴。检查这个：

[演示小提琴](http://jsbin.com/egacil/2/edit)

希望这就是你要找的！

# html - 奇怪的 5px 边距

> ID：15921704
> 
> 赞同：1
> 
> 时间：2013-04-10T09:16:23.093
> 
> 标签：html, css, slider, margin, padding

我在这里建立一个网站：[argit.bounde.co.uk](http://www.argit.bounde.co.uk)

我一直在寻找几个小时来尝试找到解决方案。我正在尝试构建自己的滑块，该滑块将是流体宽度，因此我无法在可能的情况下定义高度/宽度。我已经让大部分滑块与库存图像一起使用，但是当我将元素放在它下面时，它们比它们本来的要低 5px。这发生在除我测试过的 IE 之外的所有浏览器中。我想给我的滑块下方的横幅一个负的上边距，以便它显示在滑块上，但直到我能弄清楚是什么导致这个 5px 边距我不能。

html在这里：

```
<div id="slider">
  <div id="sliderwidth">
    <ul>
      <li><img src="imgs/slider/img1.jpg" alt="image 1"></img></li>
      <li><img src="imgs/slider/img2.jpg" alt="image 2"></img></li>
      <li><img src="imgs/slider/img3.jpg" alt="image 3"></img></li>
      <li><img src="imgs/slider/img4.jpg" alt="image 4"></img></li>
    </ul>                           
  </div>                        
</div>  

<div id="sliderborder"> 
```

我尝试过的事情：

删除所有 jQuery：**没用**。
删除所有 CSS 样式的滑块：**没用**。
将 img 高度设置为 300px：**没用**。
将 li 高度设置为 300px：**worded**。
用 300px 高的 div 替换 imgs：**工作**。
为滑块中的每个元素设置填充 0、边距 0：**没用**。
检查验证错误：**完全验证**。
检查的图像高 300 像素：**它们是**.
检查开发工具中的每个元素以检查任何流氓边距/填充：**未找到**。

我真的没有想法，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:21:49.280

没有什么奇怪的......只需添加`display:block`到您的图像中。

默认情况下，所有图像都是`inline-elements`（内联或内联块）并作为一行文本处理。这个空间是一个`y`或`g`将去的悬挂部分。这解释得很糟糕，但你明白了。

```
div#slider ul li img {
    width: 100%;
    display: block;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:17:45.963

试试看

```
div#slider ul img {
    display: block;
    width: 100%;
} 
```

或者

```
div#slider ul img {
    vertical-align: top;
    width: 100%;
} 
```

因为，默认情况下，图像是内联块元素，因此它们可能需要适当的垂直对齐设置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:21:29.867

您所要做的就是`vertical-align: bottom;`像这样添加：

```
div#slider ul li img {
    width: 100%;
    vertical-align: bottom;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-16T17:26:46.003

出于某种原因，我的网站顶部和左侧只有 5 像素的边距。我无法摆脱它......直到我将 body 元素的边距设置为 0。问题解决了。希望这可以帮助遇到这个烦人问题的任何人。:)

# java - 当应用程序遇到一个长名称文件时，进程终止

> ID：15921705
> 
> 赞同：2
> 
> 时间：2013-04-10T09:16:25.283
> 
> 标签：java, android, linux

代码如下：

```
android.util.Log.i("QRDFileExplorer","loadDir().before=feaffdsafdsf");
String[] names=f.list();
android.util.Log.i("QRDFileExplorer","loadDir().string names="); 
```

代码大部分时间都很好，但是如果目录下有一个文件名很长（超过90个汉字，大约180个字节）的文件，那么当涉及到时`f.list()`，整个过程就死了抛出任何异常。

日志猫：

```
04-10 16:46:49.129: I/QRDFileExplorer(16413): loadDir().before=feaffdsafdsf
04-10 16:46:49.129: A//system/bin/app_process(16413): stack corruption detected: aborted
04-10 16:46:49.149: E/COREDUMP(16500): /sdcard1/coredump Read-only file system
04-10 16:46:49.159: I/WindowState(586): WIN DEATH: Window{41920440 com.android.qrdfileexplorer/com.android.qrdfileexplorer.QRDFileExplorer paused=false}
04-10 16:46:49.159: I/ActivityManager(586): Process com.android.qrdfileexplorer (pid 16413) has died.
04-10 16:46:49.169: W/ActivityManager(586): Force removing ActivityRecord{416bd738 com.android.qrdfileexplorer/.QRDFileExplorer}: app died, no saved state
04-10 16:46:49.239: W/InputMethodManagerService(586): Got RemoteException sending setActive(false) notification to pid 16413 uid 10017 
```

日志没有打印，`android.util.Log.i("QRDFileExplorer","loadDir().string names=");`所以一定是问题`String[] names=f.list();`，我相信代码是正确的，我们都是这样列出文件的，所以是电话平台的问题吧？这是关于记忆的东西。任何对此了解更多以及如何解决此问题的人至少可以向用户发出警告，而不是突然关闭。

# javascript - jQuery ajax 上的 Qunit 单元测试错误

> ID：15921707
> 
> 赞同：3
> 
> 时间：2013-04-10T09:16:37.990
> 
> 标签：javascript, jquery, qunit

我已经为起诉 Qunit 的 ajax 编写了单元测试，但是出现了类似的错误

```
Error: assertion outside test context, was .success@http://test.loc/assets/test/widget-add-or-edit-test.js:227 
b.Callbacks/c@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:3 
b.Callbacks/p.fireWith@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:3
k@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:5 .send/r@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:5
Source:     

http://code.jquery.com/qunit/qunit-1.11.0.js:899 
```

我的测试代码是

```
test( "Widget.updateAxisTypeAjax x", function() {

        stop();

        Widget.updateAxisTypeAjax( {   
                axis   : 'x' ,

                x_id   : 179,
                y_id   : 175
            }  ,{
            success : function( response ){

                ok( true, "updateAxisTypeAjax Success PASS!");
                equal( typeof response , 
                       "object" , 
                       "updateAxisTypeAjax response is json valid object !"
                );

                equal( typeof response == "object" && 
                       ( "average" in response  ) && 
                       ("is_datetime" in response) , 
                        true , 
                       "updateAxisTypeAjax average check PASS !"
                );

            } ,
            complete : function(){
                ok(true, "updateAxisTypeAjax completed PASS!");
                start();
            }
        });

}); 
```

并且`Widget.updateAxisTypeAjax`是

```
Widget.updateAxisTypeAjax = function( data_obj, callbacks ){

        data_obj = jQuery.extend( data_obj ,{
            action : 'update_axis'
        });

        Widget.ajax( 5 )
              .data( data_obj  )
              .callbacks( callbacks )
              .fire();

} 
```

并且`Widget.ajax`是：

```
var Widget = Widget || {} ;

function _WidgetAjax( type  ){

        var loader      = $('#series_loader');

        this.ajaxUrl = '/dashboard/charts/ajax/' + ( type || 1 ) ;

        this.ajaxSettings = {

            url: this.ajaxUrl ,
            type:"GET",
            data :{} ,
            complete : function(){ // always
                  loader.hide();
            }
        };

        // show ajax loading
        loader.show();

        this.data = function( data ){

                jQuery.extend( this.ajaxSettings, { data: data }  );
                return this;
        }

        this.callbacks = function( callbacks ){

                jQuery.extend( this.ajaxSettings, callbacks || {}  );

                return this;
        }

        this.success = function( func ){

                if ( jQuery.isFunction( func ) ){
                     jQuery.extend( this.ajaxSettings, { success: func }  );
                }

                return this;
        };

        this.fire = function(){

                return $.ajax( this.ajaxSettings );
        };

};

Widget.ajax = function( type ){ 

        return new _WidgetAjax( type );        
}; 
```

请帮我修复这个单元测试错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:22:54.453

您正在测试一个异步函数，因此您需要使用 QUnit 中的异步功能。

而不是`test`你应该使用`asyncTest`

这是[文档](http://qunitjs.com/cookbook/#asynchronous-callbacks)。

请注意，您必须告诉 QUnit 在进行异步测试时需要多少断言。

```
asyncTest( "Widget.updateAxisTypeAjax x", 4, function() {

        stop();

        Widget.updateAxisTypeAjax( {   
                axis   : 'x' ,

                x_id   : 179,
                y_id   : 175
            }  ,{
            success : function( response ){

                ok( true, "updateAxisTypeAjax Success PASS!");
                equal( typeof response , 
                       "object" , 
                       "updateAxisTypeAjax response is json valid object !"
                );

                equal( typeof response == "object" && 
                       ( "average" in response  ) && 
                       ("is_datetime" in response) , 
                        true , 
                       "updateAxisTypeAjax average check PASS !"
                );

            } ,
            complete : function(){
                ok(true, "updateAxisTypeAjax completed PASS!");
                start();
            }
        });

}); 
```

应该可以工作。这不应该太难解决！

# blackberry - 如何从 PEM 格式获取 RSA 公钥

> ID：15921708
> 
> 赞同：1
> 
> 时间：2013-04-10T09:16:43.290
> 
> 标签：blackberry, java-me, rsa, asn.1, pem

我正在尝试从 PEM 编码的公钥文件中获取 RSAPublicKey 对象。该文件采用下面给出的格式

```
-----BEGIN PUBLIC KEY-----
M67sdjFDSSTRWE%$HGF£$"F£$$£%$ etc...
-----END PUBLIC KEY-----enter code here 
```

我想通过阅读这个文件来获得模数和指数。我试图做base64解码并使用以下

```
RSAPublicKey rsakey = (RSAPublicKey)PublicKeyDecoder.decode(decoded, "X509"); 
```

但它抛出一个`InvalidKeyEncodingException`.

有什么方法可以从 PEM 编码的公钥文件中获取 RSAPublicKey 对象？

# php - Action Message Format vs downloading XML files?

> ID：15921709
> 
> 赞同：0
> 
> 时间：2013-04-10T09:16:46.210
> 
> 标签：php, actionscript-3, apache-flex, amf, zend-amf

As we are about to start downloading big data from the server, we have two options to work with:

1.  Downloading compressed XML file each 10 seconds, where we will store data to be consumed at the client site.

2.  Calling Zend AMF Server each 10 seconds, and listening to methods callback results, it will return data that we will be consuming at client side. ( inspired by [Zend AMF – AS3 and PHP](http://www.sgermain.net/tutorials/amf-pt1/) )

Which approach will be faster? and which approach will save us bandwidth? Any recommendation?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:19:57.477

AMF Hands down [http://census2.jamesward.com/](http://census2.jamesward.com/)

Always best to test but I would put my money on AMF

# android - Android在xml中禁用单选组

> ID：15921711
> 
> 赞同：5
> 
> 时间：2013-04-10T09:16:50.437
> 
> 标签：android, android-layout, radio-button, android-xml, radio-group

在我的 android 应用程序中，我需要在 xml 布局中禁用单选组。我搜索过，但我只是通过编程而不是在 xml 布局中找到。

我的代码在这里

```
<RadioGroup
        android:id="@+id/menu1"
        android:layout_width="80dp"
        android:layout_height="wrap_content"
        android:layout_x="170dp"
        android:layout_y="100dp" >

        <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Yes" />

        <RadioButton
            android:id="@+id/radioButton2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="No" />
</RadioGroup> 
```

我试过 android:enabled="false" 但 Radio Group 不支持它。但它在 RadioButton 中作为

```
 <RadioButton
            android:id="@+id/radioButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:enabled="false"
            android:text="Yes" /> 
```

现在我的问题是，如果我的 RadioGroup 包含 10 个 RadioButton，我只想为 RadioGroup 设置 enable=false，而不是为每个单独的 RadioButton 设置。那么如何禁用整个 RadioGroup 而不是禁用 RadioButtons？

我只需要 xml 布局。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T12:37:02.277

使用以下属性

```
android:clickable="false" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T09:50:59.203

你是绝对正确的，没有为无线电组提供禁用它的属性。

[您在此开发者网站LINK](http://developer.android.com/reference/android/widget/RadioGroup.html)中找不到任何类似的方法

> 现在我的问题是，如果我的 RadioGroup 包含 10 个 RadioButton，我只想为 RadioGroup 设置 enable=false，而不是为每个单独的 RadioButton 设置。那么如何禁用整个 RadioGroup 而不是禁用 RadioButtons？

要禁用它，您所能做的就是在活动的 java 代码中。

```
for (int i = 0; i <group.getChildCount(); i++) 
{
    group.getChildAt(i).setEnabled(false);      
} 
```

# parameters - Dapper，参数列表，可能的内存问题

> ID：15921713
> 
> 赞同：1
> 
> 时间：2013-04-10T09:16:59.513
> 
> 标签：parameters, dapper

我正在使用 dapper 和 solr。从 solr 获得 id 后，我正在像这样查询 db：

```
var dbResults = await dbConnection.QueryAsync<Product>(@"SELECT  p.[ProductId] as Id]
                                                                        ,p.[Product] as [Name]
                                                                        ,p.[Price]
                                                                        ,p.[SeoLink]                                                                            
                                                                        ,p.[CategoryId]                                   
                                                            FROM [dbo].[Products] p with(nolock)                                                                
                                                            WHERE p.[ProductId] in @productsIds", new {productsIds = toGet}, commandTimeout: 2); 
```

ids 的数量从 1 变为 200。我会因为每个查询都被单独缓存而出现内存问题吗？任何想法如何优化它？（我正在使用带有 sql azure 的 azure 网站，并且不时出现 500 个内部服务器错误，没有任何原因，日志中没有任何内容。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T06:09:56.323

好吧，在 .NET 方面，我们只对每个文本/连接字符串对缓存一次，这里的“文本”是在任何 voodoo 之前的固定 TSQL 查询。为该场景生成的*IL*`PackListParameters`包括一个调用（**在**所有缓存步骤等之后 - 就在 exec 之前），它添加了多个参数并更改了 TSQL。

# php - jQuery ajax 很慢

> ID：15921716
> 
> 赞同：6
> 
> 时间：2013-04-10T09:17:03.923
> 
> 标签：php, ajax

我已经建立了一个 ajax 帖子，我正在通过它向另一个 php 文件发送一些数据，最后进行实时搜索......但问题是它有点慢，当我在框中输入一些东西时，ajax 需要 1 -2 秒触发....我希望搜索类似于 youtube 的搜索或 facebook 搜索，非常快，当我在那里输入内容时，它会立即显示建议...有什么想法可以解决这个问题吗？

这是代码：

```
$("#search").keyup(function(){
            var value = $(this).val();
            var categ = $("#categ").val();
                if (value.length >= 1)
                {
                    $.ajax({
                       type: "POST",
                       url: "../core/search.php",
                       data: { string : value , categ : categ },
                       success: function(result){ 
                            $(".each_movie").hide();
                            $(".search_movie").remove();
                            $("#movies").append(result);
                       }
                    });
                }
                else
                {
                        $(".each_movie").show();
                        $(".search_movie").remove();
                }
    }); 
```

和 PHP

```
$src = $_POST['string'];
$categ = $_POST['categ'];

$sql = mysql_query("SELECT * FROM movies WHERE `$categ` LIKE '%".$src."%' ") or die(mysql_error());
while ($sql_grab = mysql_fetch_assoc($sql))
{
    ?>
        <div class="search_movie">
         <p style="margin-bottom:5px;font-family:'Lucida Sans Unicode', 'Lucida Grande', sans-serif;color:rgba(255,255,255,0.3);font-size:12px;">Din: <?php echo $sql_grab['airdate']; ?> in cinematografe.</p>
        <table>
            <tr>
                <td rowspan="2" valign="top"><img class="main_pic" src="<?php echo $sql_grab['mainpic']; ?>" width="180px" /></td>
                <td><p class="name"><?php echo $sql_grab['name']; ?></p></td>
            </tr>
            <tr>
                <td><div class="desc_wrapper" id="<?php echo $id; ?>" style="display:inline-block;"><p class="desc"><?php echo mysql_real_escape_string($sql_grab['description']); ?></p></div><p nr="<?php echo $id; ?>" id="more<?php echo $id; ?>" class="more" style="position:absolute;margin:30px 2px;color:rgba(255,255,255,0.2);cursor:pointer;display:inline-block">...citeşte</p></td>
            </tr>
        </table>
        </div><!--each movie end-->
    <?php   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:21:04.490

使用 JSON 来加快 Ajax 脚本与服务器之间的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:22:03.993

您可以使用 JSONP 来提高 ajax 的速度，您将从 [http://www.jquery4u.com/json/jsonp-examples/获得更多详细信息](http://www.jquery4u.com/json/jsonp-examples/)

# php - 基于值的php数组排序器

> ID：15921723
> 
> 赞同：5
> 
> 时间：2013-04-10T09:17:16.997
> 
> 标签：php, arrays, ranking

我正在搜索如何基于值构建数组排序器。

我有一个数组输出，如：

```
key => 0 | id => 16103 | Thumbs => 0 
key => 1 | id => 23019 | Thumbs => 0 
key => 2 | id => 49797 | Thumbs => 5 <- key 2 needs to switch with key 1 
key => 3 | id => 51297 | Thumbs => 0 
key => 4 | id => 58106 | Thumbs => 0 
key => 5 | id => 59927 | Thumbs => 4 <- will be stay at this position 
key => 6 | id => 61182 | Thumbs => 0
key => 7 | id => 68592 | Thumbs => 0 
key => 8 | id => 70238 | Thumbs => 10 <- key 8 needs to switch with key 6 
key => 9 | id => 71815 | Thumbs => 0 
key => 10 | id => 78588 | Thumbs => 0 
etc.. 
```

我想编写一个函数来重现上面的数组输出，如下所示。当一个记录有 5 个拇指时，它需要在输出中移动“一个”，当它有 10 个拇指时，它需要高 2 个，依此类推。

我想我应该首先复制数组来为每个输出设置键（prio），比如 100,200,300，这样我们就有足够的空间来设置一行？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:38:36.507

我想在你的例子中你最好使用数组数组。（如果你还没有，从问题中不清楚。）像这样。

```
$array = array();
$array[0] = array('id'=>16103, 'Thumbs'=>0);
$array[1] = array('id'=>16103, 'Thumbs'=>0);
... 
```

然后，首先编写一个交换函数。

```
function swap (&$arr,$key1,$key2) {
    $temp=$arr[$key1];
    $arr[$key1]=$arr[$key2];
    $arr[$key2]=$temp;
    // the & before the $arr parameter makes sure the array is passed as a reference. So no need to return the new array at the end.
} 
```

现在为您的排名功能：

```
function rank(&$arr) {
    for ($i = 0; $i < count($arr); $i++) {
        if ($arr[$i] < 5) continue;
        $places_to_move = $arr[i]['Thumbs'] / 5; // get number of places to promote the entry
        $places_to_move = max($places_to_move, $i); // make sure we don't move it out of the array bounds
        swap($arr, $i, $i - $places_to_move);
    }
} 
```

然后只需为未排序的数组调用 rank 函数

```
rank($array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T18:44:11.963

所以，如果我理解正确，你有一个数组数组：

```
$array = array(
    array('key' => 0, 'id' => 16103, 'Thumbs' => 0), 
    array('key' => 1, 'id' => 23019, 'Thumbs' => 0), 
    array('key' => 2, 'id' => 49797, 'Thumbs' => 5), //<- key 2 needs to switch with key 1 
    array('key' => 3, 'id' => 51297, 'Thumbs' => 0), 
    array('key' => 4, 'id' => 58106, 'Thumbs' => 0), 
    array('key' => 5, 'id' => 59927, 'Thumbs' => 4), //<- will be stay at this position 
    array('key' => 6, 'id' => 61182, 'Thumbs' => 0),
    array('key' => 7, 'id' => 68592, 'Thumbs' => 0), 
    array('key' => 8, 'id' => 70238, 'Thumbs' => 10), //<- key 8 needs to switch with key 6 
    array('key' => 9, 'id' => 71815, 'Thumbs' => 0), 
    array('key' => 10, 'id' => 78588, 'Thumbs' => 0) 
); 
```

在这种情况下，您可以使用`usort()`：

```
usort($array, function($a, $b){
    $a_thumbs_val = floor($a['Thumbs']/5);
    $a_val = $a_thumbs_val ? $a['key'] - $a_thumbs_val - 0.5 : $a['key'];

    $b_thumbs_val = floor($b['Thumbs']/5);
    $b_val = $b_thumbs_val ? $b['key'] - $b_thumbs_val - 0.5 : $b['key'];
    return ($a_val > $b_val) ? 1 : -1;
});

var_dump($array); 
```

会产生：

```
array (size=11)
  0 => 
    array (size=3)
      'key' => int 0
      'id' => int 16103
      'Thumbs' => int 0
  1 => 
    array (size=3)
      'key' => int 2
      'id' => int 49797
      'Thumbs' => int 5
  2 => 
    array (size=3)
      'key' => int 1
      'id' => int 23019
      'Thumbs' => int 0
  3 => 
    array (size=3)
      'key' => int 3
      'id' => int 51297
      'Thumbs' => int 0
  4 => 
    array (size=3)
      'key' => int 4
      'id' => int 58106
      'Thumbs' => int 0
  5 => 
    array (size=3)
      'key' => int 5
      'id' => int 59927
      'Thumbs' => int 4
  6 => 
    array (size=3)
      'key' => int 8
      'id' => int 70238
      'Thumbs' => int 10
  7 => 
    array (size=3)
      'key' => int 6
      'id' => int 61182
      'Thumbs' => int 0
  8 => 
    array (size=3)
      'key' => int 7
      'id' => int 68592
      'Thumbs' => int 0
  9 => 
    array (size=3)
      'key' => int 9
      'id' => int 71815
      'Thumbs' => int 0
  10 => 
    array (size=3)
      'key' => int 10
      'id' => int 78588
      'Thumbs' => int 0 
```

注意：应该在同一位置的 2 个条目可能会左右两边，因为 usort 会进行不稳定的排序。您可以通过增强 usort 中的闭包来实现这一点，并添加一些更复杂的比较。

# accessibility - ARIA 具有里程碑意义的角色，其中 aria-hidden 设置为 true

> ID：15921724
> 
> 赞同：4
> 
> 时间：2013-04-10T09:17:28.880
> 
> 标签：accessibility, wai-aria

当用户列出地标区域时，也会显示 aria-hidden 设置为 true 的 ARIA 地标角色。（使用 JAWS 时：`Jaws key`++ `CTRL`）`;`

例子：

```
<div role="region" aria-label="tools menu" aria-hidden="true">....</div> 
```

仅在单击“工具菜单”按钮时显示

我的问题是，

1.  当用户列出具有里程碑意义的角色时，有没有办法不显示？
2.  当我使用地标角色进入特定区域时，Jaws 并没有宣布隐藏特定区域。可能出了什么问题？我正在使用 Jaws 12.0
3.  它是否按预期工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:05:34.190

我对您在这里尝试做的事情感到困惑。[ARIA Landmark](http://www.w3.org/WAI/GL/wiki/Using_ARIA_landmarks_to_identify_regions_of_a_page#Description)允许使用辅助技术的人跳转到页面的某些部分，因此他们无需通读页面即可找到特定区域。例如侧边栏，您可以添加`role="complementary"`或使用 HTML5`<aside>`标记。[有关 HTML5 和 PGB 角色的更多信息](http://blog.paciellogroup.com/2013/02/using-wai-aria-landmarks-2013/)。

该`aria-hidden`属性有点违反直觉。所以如果我们有：

```
<p aria-hidden="true">My cool text</p> 
```

在代码中。浏览器将呈现：

> 我的酷文字

如果我们用辅助技术查看同一块文本，结果会像

```
 <p></p> 
```

由于您将地标和属性组合在一起，因此 JAWS 不确定该怎么做。由于地标具有更多的权力/权威/无论如何，你说给我所有的地标，它会看到它，并允许你导航到那里。但是，一旦您*进入*其中，它就会看到`<div></div>`.

# c# - 我可以在分析时进行调试吗？

> ID：15921725
> 
> 赞同：1
> 
> 时间：2013-04-10T09:17:29.430
> 
> 标签：c#, wpf, debugging, visual-studio-2012, profiling

我有一个 VS2012 解决方案和 WPF 应用程序，在发布和调试模式下无异常运行，但是如果我尝试分析它，当我执行一些 UI 操作（打开 VM、它们的视图控件等）时应用程序崩溃

当应用程序在分析模式下运行时，是否有调试异常的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:55:12.410

您始终可以将调试器附加到进程。只需打开调试->附加到进程。如果您想中断任何异常，只需按 Ctrl+Alt+E 并选择正确的选项。如果您的代码中没有发生异常，您可以尝试为选定的 dll 加载 pdb。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:06:06.197

不会。应用程序只有在被分析时才会失败的原因并不多。这通常很简单，例如工作目录不同，因此当您的应用程序执行一些不明智的操作（例如尝试打开具有相对路径名的文件）时，您的应用程序将会崩溃。并且没有尝试/捕获来处理丢失的文件问题。

您需要关注的是当您的应用程序在用户的机器上运行并像这样崩溃时会发生什么。没有分析器，但同样的问题是不知道它为什么崩溃。您需要花一些时间编写报告未处理异常的代码。为 AppDomain.CurrentDomain.UnhandledException 事件编写事件处理程序。记录或显示 e.ExceptionObject.ToString() 的值。现在您已经收到了一条很好的异常消息和Holy Stack Trace，它准确地向您展示了您的程序最终是如何崩溃的。几乎总是足以找出代码中的微小变化以防止崩溃。或者更好的方法来帮助用户的 IT 人员解决问题。

# tomcat - WebappClassLoader 中的 NullPointerException

> ID：15921727
> 
> 赞同：0
> 
> 时间：2013-04-10T09:17:31.963
> 
> 标签：tomcat, nullpointerexception

我在我的`catalina.out`

```
mmap failed for CEN and END part of zip file
java.lang.NullPointerException
    at org.apache.catalina.loader.WebappClassLoader.findResourceInternal(WebappClassLoader.java:3059)
    at org.apache.catalina.loader.WebappClassLoader.findResource(WebappClassLoader.java:1254)
    at org.apache.catalina.loader.WebappClassLoader.getResourceAsStream(WebappClassLoader.java:1504) 
```

这不会一直发生，只发生在 32 位机器上。知道是什么原因造成的吗？

# java - 具有可配置删除策略的并发固定大小收集

> ID：15921728
> 
> 赞同：0
> 
> 时间：2013-04-10T09:17:35.603
> 
> 标签：java, collections, concurrency

目前我正在解决一个需要

1.  要固定的元素数量。
2.  如果超过固定大小，则删除前一个元素。移除政策目前是固定的
3.  `LinkedHashMap`是一种选择，但我需要收集是并发的。
4.  应该支持类似的功能，`BoundedQueue`但是永远不应该阻塞它的线程，而是应该删除旧元素并插入新元素。
5.  `PriorityBlockingQueue`with`drainTo`方法是有效的选项，但我每次在插入元素之前都必须调用它。

你能建议我一个解决方案吗？不需要源代码。我只想知道解决问题的最佳方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:44:05.437

收容宝贝。

```
public class MyCollection {

  private LinkedBlockingQueue<MyData> lbq = new LinkedBlockingQueue<MyData>();
  public static final int MAX_SIZE = 5;

  public void add(MyData input) {
    lbq.put(input);
    if(lbq > MAX_SIZE) lbq.poll();
  }

  ... any other methods you need. 
} 
```

这可能不完全符合您的需求，但这应该让您朝着正确的方向开始。您可以使用现有的数据结构，用一些自定义代码包装它（包括使其成为线程安全的），您就可以得到您所需要的。

我认为从 Effective C++ 中学到的设计中的一个基本概念是包含优于继承。在这种情况下，它是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:13:08.010

最简单的起点是查看 JDK 的 LinkedBlockingQueue 并创建一个替代实现，该实现在处理过度填充的 put 和 offer 方面有所不同。由于这发生在持有私有锁时，您不能覆盖子类中的行为。

# c# - 与 Process 一起打印输出

> ID：15921730
> 
> 赞同：2
> 
> 时间：2013-04-10T09:17:38.943
> 
> 标签：c#, .net, process

我发现了一些这样的代码。它运行一个进程，然后将它写入的内容打印到标准输出。问题是，在进程退出之前它不会打印*任何东西*，这可能需要很长时间（或根本不需要）。因此，我宁愿按原样打印输出。我怎样才能做到这一点？

```
var startInfo = new ProcessStartInfo("cmd", "/c sleepy.bat")
    {RedirectStandardOutput = true, UseShellExecute = false, CreateNoWindow = true };
var p = new Process(){StartInfo = startInfo};
p.Start();
string output = p.StandardOutput.ReadToEnd();
Console.WriteLine(output); 
```

`sleepy.bat`可能在哪里

```
echo "About to execute really slow query.."
sleep 20
echo "Finished!" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:21:48.740

尝试使用`p.StandardOutput.BeginOutputReadLine()`. 您将收到来自`OutputDataReceived`事件进程的输出。

有关扩展示例，请查看[MSDN 文章](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.outputdatareceived.aspx)。

# c# - if else if else 树的替代解决方案？

> ID：15921731
> 
> 赞同：0
> 
> 时间：2013-04-10T09:17:39.133
> 
> 标签：c#, razor

我有一个问题，我需要考虑 4 个布尔值的可能选项的每种组合。例如

我有 4 个布尔值，useFeatured、groupBy、orderBy 和升序。可能的组合是..

```
featured.
featured & orderby.
featured & orderby & groupby.
featured & orderby & groupby & ascending.

featured & groupby.
featured & groupby & ascending.

featured & ascending
featured & ascedning & orderby

orderby
orderby & groupby
orderby & groupby & ascending

groupby
groupby & ascending

ascending
ascending & orderby 
```

目前，对于这些选项，我有一个巨大的 if else if else 树，我发现很难相信这是唯一的解决方案，但我想不出其他任何东西。

这是 if else 树的链接。

```
if(featured){
if(orderby){
    if(groupby){
            if(ascedning){
                    //featured orderby groupby ascending
            }else{
                    //featured orderby groupby
            }
    }else{
            //featured orderby
    }
}else if(groupby){
    if(ascedning){
            //featured groupby ascending
    }else{
            //featured groupby
    }
}else if(ascending){
    if(orderby){
            //featured ascending orderby
    }else{
            //featured ascending
    }
}else{
    //featured
}
 }else if(orderby){
    if(groupby){
            if(ascending){
                    //orderby groupby ascending
            }else{
                    //orderby groupby
            }
    }
}else if(groupby){
    if(ascending){
            //groupby ascending
    }else{
            //groupvy
    }
 }else if(ascending){
    if(orderby){
            //ascending & orderby
    }else{
            //ascending
    }
 }else{
    //orderby
 } 
```

Pastebin 如果格式混乱。[http://pastebin.com/ECgASU3C](http://pastebin.com/ECgASU3C)

有人有更好的解决方案我可以采用吗？请救救我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:24:37.207

您可以为此使用**开关盒...但****如果**是更好的选择

# css - 无法制作 Css 菜单

> ID：15921736
> 
> 赞同：-6
> 
> 时间：2013-04-10T09:17:44.740
> 
> 标签：css, menu

如何在 CSS 中制作导航菜单？我想要一个带有 4 个菜单按钮的菜单！一直在搜索谷歌并询问朋友，但一直无法弄清楚！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:23:27.303

首先，请在再次发布之前阅读有关此问题的第一个答案。它将帮助您了解 SO 的用途： [https ://meta.stackexchange.com/questions/125997/something-on-my-web-site-doesnt-work-can-i-just-paste-a-link对它](https://meta.stackexchange.com/questions/125997/something-on-my-web-site-doesnt-work-can-i-just-paste-a-link-to-it)

工作示例：http: [//jsfiddle.net/k3AbH/1/](http://jsfiddle.net/k3AbH/1/)

HTML：

```
<ul>
    <li><a href="http://www.google.com">Item 1</a></li>
    <li><a href="http://www.google.com">Item 2</a></li>
    <li><a href="http://www.google.com">Item 3</a></li>
    <li><a href="http://www.google.com">Item 4</a></li>
</ul> 
```

CSS：

```
ul li {
    float:left;
    list-style:none;
}

ul li a {
    padding:6px 10px;
    border-right:1px solic #C0C0C0;
    font-size:13px;
    color:#FFF;
    background-color:#A1A1A1;
    display:block;
}

ul li a:hover {
    background-color:#C0C0C0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:20:17.273

```
<ul>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
        </ul>
    </li>
</ul>

ul li > ul { display: none; }
ul li:hover > ul { display: block; } 
```

# javascript - 如何使用 MediaElement.js 创建两个播放器

> ID：15921748
> 
> 赞同：0
> 
> 时间：2013-04-10T09:18:09.070
> 
> 标签：javascript, jquery, media-player

我是 Javascript 和 jQuery 的新手。我想使用 MediaElement.js 创建两个播放器。一个播放器将播放音频，另一个播放器将播放视频。任何人都请帮我这样做。我曾尝试同时使用 jQuery 和 Javascript 代码来运行它们，但我发现一次只有一个在工作。

如果可能，还请提供任何示例代码。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:21:22.687

我找到了解决我的问题的方法。我发现这个问题对我的问题 [mediaelement.js 有用吗？ 同一页面上有多个视频？](https://stackoverflow.com/questions/8971874/mediaelement-js-multiple-videos-on-same-page) . 关键是 **设置 *pauseOtherPlayers: false***，同时创建播放器实例。当其他玩家开始时，这不会暂停任何其他玩家。

我创建了两个播放器并通过以下代码同时播放它们。

```
Player-1:  
if (this.MEplayer != undefined && this.MEplayer) {
            this.setvideosize();
            this.video.play();
            return;
        }

    this.MEplayer = new MediaElementPlayer('#overlayplayer', {
        pluginPath: '../js/me281/',
        flashName: 'flashmediaelement.swf',
        silverlightName: 'silverlightmediaelement.xap',
                pauseOtherPlayers: false,
        defaultVideoWidth: $.viewer.player_width, 
        defaultVideoHeight: $.viewer.player_height,
        videoWidth: $.viewer.player_width, 
        videoHeight: $.viewer.player_height,
        enableAutosize: false,
        debug: false, 
        features: ['playpause', 'progress', 'current', 'duration', 'fullscreen'],
        success: function (me, domobj) {
            console.log('player initiated successfully');
            self.video = me;

            self.state = true;
            self.isTSinitialized = false;
            .....
                    } 
```

通过更改其他玩家的变量名称重复相同的操作。

# java - 如何在转换后的模板中在 JXLS API 中动态合并单元格

> ID：15921752
> 
> 赞同：11
> 
> 时间：2013-04-10T09:18:22.540
> 
> 标签：java, excel, jxl, jxls

我正在使用[Jxls API](http://jxls.sourceforge.net/index.html)

我现在可以创建，将数据列表传递给根据需要创建 excel 输出表的模板

但现在我必须合并具有相同值的列单元格

这是我用于重复单元格的每个标签

```
<jx:forEach items="${dummyData}" var="dummy" groupBy="col1">
<jx:forEach items="${group.items}" var="myList123">
${myList123.col1} ${myList123.col2} ${myList123.col3} ${myList123.col4} ${myList123.col5} ${myList123.col6} ${myList123.col7}
</jx:forEach>
</jx:forEach> 
```

![我有的](https://i.stack.imgur.com/4oRkx.png)

![我想要的是](https://i.stack.imgur.com/GDiS0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-05-19T21:37:23.667

我不确定这是否会有所帮助。但这是我的想法

1.  像上面显示的那样生成文件，然后保存文件
2.  使用 apache POI 重新加载文件，然后实现您的逻辑以合并所需的单元格。POI具有我使用过的以下功能

您可以`sheet.addMergedRegion(rowFrom,rowTo,colFrom,colTo);`从 POI 库中使用

我从来没有在 Jxlx 上工作过，但看起来他们没有这个功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-01T08:59:14.443

我做了一个自定义`jx:each-merge`命令来做自动合并的事情。但需要注意的是，我使用的是`org.jxls:jxls:2.4.2`，`org.jxls:jxls-poi:1.0.13`并且有一个主子数据结构（意味着数据已经被分组了）。您可以从下面的图片中看到模板和渲染结果： [![在此处输入图像描述](https://i.stack.imgur.com/s2kHG.png)](https://i.stack.imgur.com/s2kHG.png)

代码示例：

```
public void xls() throws Exception {
  // from template
  InputStream template = getClass().getClassLoader().getResourceAsStream("templates/each-merge.xls");

  // output to
  File out = new File("target/each-merge-result.xls");
  if (out.exists()) out.delete();
  OutputStream output = new FileOutputStream(out);

  // template data
  Map<String, Object> data = generateData();

  // render
  JxlsUtils.renderTemplate(template, data, output);

  // verify
  assertThat(out.exists(), is(true));
  assertThat(out.getTotalSpace() > 0, is(true));
} 
```

您可以从 github 项目[simter-jxls-ext](https://github.com/simter/simter-jxls-ext)获取源代码。测试类是[EachMergeCommandTest.java](https://github.com/simter/simter-jxls-ext/blob/master/src/test/java/tech/simter/jxls/ext/EachMergeCommandTest.java)。

数据结构为：

```
[
  {
    sn: 1, 
    name: 'row1',
    subs: [
      {sn: '1-1', name: 'row1sub1'},
      ...
    ]
  },
  ...
] 
```

希望这会有所帮助。

# maven - gwt-maven-plugin 中的附加类路径条目

> ID：15921759
> 
> 赞同：0
> 
> 时间：2013-04-10T09:18:38.837
> 
> 标签：maven, gwt, classpath

执行 gwt:test 时我需要设置一些额外的类路径条目。它们主要包含属性文件，仅在运行时需要。

我必须在我的 pom 中设置哪个配置参数才能获得额外的类路径条目？

我当前的 gwt-maven-plugin 配置看起来像（pom 的片段）：

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>gwt-maven-plugin</artifactId>
    <version>${gwtVersion}</version>
    <executions>
      <execution>
        <goals>
          <goal>compile</goal>
          <goal>test</goal>
          <goal>i18n</goal>
          <goal>generateAsync</goal>
        </goals>
        <configuration>
          <extraJvmArgs>-Xmx1024M -Xss512M</extraJvmArgs>
        </configuration>
      </execution>
    </executions>
    <!-- Plugin configuration. There are many available options, see gwt-maven-plugin 
         documentation at codehaus.org -->
    <configuration>
      <mode>htmlunit</mode>
      <runTarget>Myproject.html</runTarget>
      <out>${webappDirectory}</out>
      <hostedWebapp>
        ${project.build.directory}/${project.build.finalName}
      </hostedWebapp>
      <i18nMessagesBundle>myproject.web.client.Messages</i18nMessagesBundle>
    </configuration>
  </plugin> 
```

我正在使用 gwt 2.5.1。我在这个小问题上花费的时间已经超出了我的预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:19:47.790

`gwt:test`将使用标准的 Maven 测试类路径，包括 -for resources- 与`<scope>test</scope>`和`testResources`目录的依赖关系。

假设您的属性文件是 Maven 模块的本地文件，那么只需将它们放入`src/test/resources`，或将适当的父文件夹添加为`testResource`：

```
<build>
  <testResources>
    <testResource>
      <directory>${basedir}/src/test/resources</directory>
    </testResource>
    <testResource>
      <directory>${basedir}/src/test-properties-files</directory>
    </testResource>
  </testResources> 
```

# c# - SqlCommand 错误

> ID：15921765
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:18:54.370
> 
> 标签：c#, database, sql-server-2008

目前我正在尝试使用我通过 C# 程序硬编码的 3 个值填充我的 SQL Server 数据库。

我的数据库有 4 列，如下所示：

*   `RowID`（这应该由我的数据库自动更新）
*   `Name`（存储为字符串）
*   `Score`（整数）
*   `Accuracy`（漂浮）

在我的代码中，我尝试使用以下代码行填写这些内容：

```
 using (SqlConnection connection = new SqlConnection(DBConnection))
 {
            string name = "John";
            int score = 123;
            float Accuracy = 20.0f;

            SqlCommand command = new SqlCommand("INSERT INTO HighScoreTable(Name, Score, Accuracy) VALUES("  + name + " , " + score + " , " + Accuracy + ")", connection);
            command.Connection.Open();
            command.ExecuteNonQuery();
        } 
```

但是当我运行我的程序时，Visual Studio 会突出显示

```
command.ExecuteNonQuery() 
```

声明“约翰”不是有效的列。

我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:24:23.720

（仅在我看来）正确的方法是：

```
using (SqlConnection connection = new SqlConnection(DBConnection))
{
    string name = "John";
    int score = 123;
    float Accuracy = 20.0f;

    using (SqlCommand command = new SqlCommand("INSERT INTO HighScoreTable(Name, Score, Accuracy) VALUES(@name, @score, @accuracy)", connection);
    {
        command.Parameters.AddWithValue("@name", name);
        command.Parameters.AddWithValue("@score", score);
        command.Parameters.AddWithValue("@accuracy", accuracy);

        command.Connection.Open();
        command.ExecuteNonQuery();
    }
} 
```

* * *

请注意，使用参数化查询时，您*不需要介意单引号！！*字符串参数没有用单引号括起来——这一切都是由框架为您完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:23:09.897

这里大错特错。

1.  如果你想像这样插入，你需要在你的值周围添加“'”。
2.  您需要在值之间使用逗号。
3.  这对于 SQL 注入来说已经成熟了
4.  对性能不利，因为每个查询都不同。

您实际上想要添加参数 (AddParameterWithValue)

看这里：

[INSERT 上的 SQL 注入](https://stackoverflow.com/questions/681583/sql-injection-on-insert)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T09:24:55.880

对此类问题使用参数化查询：

```
using (SqlConnection connection = new SqlConnection(DBConnection))
        {
            string name = "John";
            int score = 123;
            float Accuracy = 20.0f;

            SqlCommand command = new SqlCommand("INSERT INTO HighScoreTable(Name, Score, Accuracy) VALUES(@name,@score,@accuracy)", connection);

               SqlParameter name= new SqlParameter("@name", name);
                name.Value = name;
                command.Parameters.Add(name);
               .
               . 
               .
            command.Connection.Open();
            command.ExecuteNonQuery();
        } 
```

通过这种方式，您可以添加参数，以避免列的混淆。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T09:20:42.730

由于 John 是一个字符串，因此您必须通过在 John 的任一侧添加 ' 来让您的数据库知道这一点。

所以`...VALUES(" + name + " , "...`改为`...VALUES('" + name + "' , "...`

如果你只写 John 没有 ' 在任何一边，那么数据库会认为你是指一个列，并且正如你的错误消息显示的那样：数据库对名为 的列一无所知`John`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T09:20:50.987

只是这样做才能正常工作

```
SqlCommand command = new SqlCommand("INSERT INTO 
      HighScoreTable(Name, Score, Accuracy) 
               VALUES('"  + name + "' , " + score + " , " + Accuracy + ")", connection); 
```

因为名称是字符串值，所以只需`'`像这样装饰它，`'" + name + "'`因为在 sql server 中，如果字符串没有用它装饰，`'`则会给你一个错误

现在字符串值被转换为以下 sql 查询 shich 无效

```
 INSERT INTO 
      HighScoreTable(Name, Score, Accuracy) 
               VALUES(John , 123 , 20.0f) 
```

**为避免此错误，请使用 SQLParameter 即参数化查询**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T09:22:19.953

我怀疑你没有逃脱文本。

```
SqlCommand command = new SqlCommand("INSERT INTO HighScoreTable(Name, Score, Accuracy) VALUES("'" + name + "' , " + score + " , " + Accuracy + ")" 
```

更好的方法是使用正确的命令参数：

[添加 SqlCommand 参数时应该何时使用“SqlDbType”和“size”？](https://stackoverflow.com/questions/4624811/different-ways-of-passing-sqlcommand-parameters)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-10T09:23:20.310

首先，我强烈建议您采用不同的方法 - 参数化查询，尽快。它将防止 SQL 注入并使您的生活更轻松，因为您不必每次都考虑格式化您的 SQL 查询。一段时间后想知道所有引号应该放在哪里会变得非常乏味，而且很痛苦在维护期间修改此类代码...

其次，您的 SQL 转换为如下所示：

```
SqlCommand command = new SqlCommand("INSERT INTO HighScoreTable(Name, Score, Accuracy) VALUES(John , 10 , ..)", connection); 
```

SQL 认为您的值实际上是列名！您需要将值用单引号括起来

```
INSERT INTO HighScoreTable(Name, Score, Accuracy) VALUES('John' , 10 , '..') 
```

# netbeans - PHP-Netbeans：如何更改多条件 if 语句的格式

> ID：15921766
> 
> 赞同：5
> 
> 时间：2013-04-10T09:18:56.130
> 
> 标签：netbeans, code-formatting, netbeans-7.3

我有以下代码：

```
if(
    condition1
    && condition2
    && condition3
) {
    // do something
} 
```

在让netbeans重新格式化它之后，我得到了

```
if(
    condition1 && condition2 && condition3
) {
    // do something
} 
```

这不是我想要的。

我已经尝试更改 Editor>Formatting>PHP>Wrapping>If Statement - 但我什至无法弄清楚这个选项的作用，但至少它似乎没有解决我的问题。

如何根据我的喜好制作netbeans格式的多条件ifs（或保持原样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:44:22.407

Netbeans 稍微改变了语法。您需要在 AND 运算符的末尾而不是之前进行换行，它将在格式后保留换行符。

```
if(
    condition1 &&
    condition2 &&
    condition3
) {
    // do something
} 
```

# sql-server - TSQL 翻译 CRM 2011 中的 ChangeData 字段

> ID：15921770
> 
> 赞同：2
> 
> 时间：2013-04-10T09:19:15.503
> 
> 标签：sql-server, database, tsql, crm, csv

我有一个分隔字符串，它充当目标分隔字符串的键。我需要知道 2 个值在键序列中的位置，然后只从我的目标字符串中提取这些位置。

示例 1
键：,15,90,104,73,95,13,​​14，
目标：Medium~Male~28~Green~Right~No~10/04/2013

示例 2
Key : ,14,73,104,95,15,13,​​90,
Target : 12/03/2013~Green~28~Right~Medium~No~Male~

我只关心目标中的性别和日期值，键中的相应条目将始终为 14 和 90

一旦我知道这些值的顺序位置（示例 1 中的位置 2 和 7），我需要提取目标字符串的相同部分，以便最终在它们自己的变量中得到性别和日期值

我已更改要查找的数据类型，以使问题更易于理解

我希望这是有道理的

谢谢

马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:35:41.983

您可以拆分这两个字符串（请参阅此处：[Split function equivalent in T-SQL?](https://stackoverflow.com/questions/697519/split-function-equivalent-in-tsql)）。

然后，当您在两个表对象中拆分字符串时，访问两者中的第 N 条记录（例如使用 TOP 关键字），您可以获得结果。

给定两个字符串和一个 int，您可以编写一个函数来获取两个耦合值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:54:47.837

作为快速跟进，我在应用上述解决方案时遇到了麻烦（可能是由于我缺乏知识）所以我创建了以下功能并且他们完成了工作

获取序列值 ------------------------------------------------------------ ----------------------

```
DECLARE @Attributemask varchar(max) = '[PASS IN KEY STRING]' 
DECLARE @Required varchar(10) = '[PASS IN VALUE TO LOOK FOR FOLLOWED BY A COMMA]'
DECLARE @AttPosition int
DECLARE @TempString varchar(max)
DECLARE @Result as int

SET @AttPosition = CHARINDEX(@Required, @Attributemask)
SET @TempString = LEFT(@Attributemask, @AttPosition)
SET @Result = len(@TempString)-len(replace(@TempString,',',''))
SELECT @Result 
```

获取数据------------------------------------------------ ----------------------------------

```
DECLARE @ChangeData varchar(max) = '[PASS IN TARGET STRING]'
DECLARE @AttPos int = [PASS IN RESULT FROM PREVIOUS FUNCTION] 
DECLARE @Count int = 1
DECLARE @NotNeeded varchar(100)
Declare @Result varchar(max)

SET @ChangeData = '~'+@ChangeData

WHILE @Count < (@AttPos +1)
BEGIN
    SET @NotNeeded = CHARINDEX('~', @ChangeData)
    SET @ChangeData = right(@ChangeData,len(@ChangeData) - @NotNeeded)
    IF len(@ChangeData) = 0 BREAK
    SET @Count = @Count +1
END

SET @Result = LEFT(@ChangeData, (CHARINDEX('~', @ChangeData)))
SET @Result = LEFT(@Result, (LEN(@Result)-1))
Select @Result 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T10:24:59.253

试试这个解决方案 -

```
DECLARE @temp TABLE
(
      id INT IDENTITY(1,1)
    , k NVARCHAR(100)
    , t NVARCHAR(500)
)

INSERT INTO @temp (k, t)
VALUES 
    (',15,90,104,73,95,13,14,', 'Medium~Male~28~Green~Right~No~10/04/2013'),
    (',14,73,104,95,15,13,90,', '12/03/2013~Green~28~Right~Medium~No~Male~')

SELECT 
      data.id
    , data.p
    , data.r 
FROM (
    SELECT 
          p = p.value('(.)[1]', 'NVARCHAR(50)')
        , po = p.value('for $i in . return count(../*[. << $i])', 'int')
        , r = r.value('(.)[1]', 'NVARCHAR(50)')
        , ro = r.value('for $i in . return count(../*[. << $i])', 'int')
        , d.id
    FROM (
        SELECT 
              t.id
            , txml = CAST('<r><s>' + REPLACE(t.k + ',', ',', '</s>' + '<s>') + '</s></r>' AS XML)
            , kxml = CAST('<r><s>' + REPLACE(t.t + '~', '~', '</s>' + '<s>') + '</s></r>' AS XML)  
        FROM @temp t
    ) d
    CROSS APPLY kxml.nodes('/r/s') t(p)
    CROSS APPLY txml.nodes('/r/s') k(r)
) data
WHERE data.po = data.ro - 1
    AND data.r IN ('14', '90')
    --AND r + data.p != ''
ORDER BY data.id 
```

# git - 无法使用 SmartGit 连接到 BitBucket

> ID：15921775
> 
> 赞同：0
> 
> 时间：2013-04-10T09:19:23.173
> 
> 标签：git, bitbucket, smartgit

我试图设置连接到 BitBucket 托管服务提供商的 smartgit。

我输入与登录网站相同的用户名（电子邮件）和密码，但它显示连接超时。

我想知道它与防火墙问题或其他事情有关。在使用智能 git 之前是否需要配置 git。我正在将 msysgit 用于窗口。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T06:10:17.483

我正在使用 git 命令行将代码推送到 bitbucket。

# actionscript-3 - AS3 将子级删除到非公共变量

> ID：15921777
> 
> 赞同：0
> 
> 时间：2013-04-10T09:19:29.163
> 
> 标签：actionscript-3

我正在制作一个小游戏，在这个游戏中我会在一段时间后改变关卡。它是一个跑步者，所以我每 100px 创建一个平台部分，在每个平台上都有机会制作横幅、硬币或跳过的障碍物。这些是在 for 循环中创建的。我的问题是当我切换级别时，如果舞台上有障碍物我想删除 Child，但由于 var 仅存在于 if 语句中，我无法运行 _obstacle.removeCild() 只是因为它不存在于我的更改级别功能。下面的代码：

```
//Go through all the sections and add obstacles or banners or coins based on a chance value. If an obstacle is created in a section, a coin can't be created in the same section
for ( _indexA = 0 ; _indexA < _indexB ; _indexA++ )
{
    if ( Math.random() < _bannerChance && _bannerDelay == 0 )
    {
//Create banner
        var _banner:MC_banner = new MC_banner();
        _platformArray[_platformArray.length - 1].addChild(_banner);
        _banner.x = _platformArray[_platformArray.length - 1].getChildAt(_indexA).x + _platformArray[_platformArray.length - 1].getChildAt(_indexA).width * 0.5;
        _banner.gotoAndStop(Math.ceil(Math.random() * _banner.totalFrames));
        _banner.rotation = int( Math.random() * 4 + 0.5) - 2;
        _banner.cacheAsBitmap = true;
        _bannerDelay = 100;
    }
    else if ( Math.random() < _obstacleChance )
    {
        var _obstacle:MC_obstacle = new MC_obstacle();
        var _obstacle2:MC_obstacle2 = new MC_obstacle2();
//CUSTOM LEVEL CHANGE
            if (_currentLevel == 1){
                _platformArray[_platformArray.length - 1].addChild(_obstacle);
                _obstacle.x = _platformArray[_platformArray.length - 1].getChildAt(_indexA).x + _platformArray[_platformArray.length - 1].getChildAt(_indexA).width * 0.5;
                _obstacle.gotoAndStop(Math.ceil(Math.random() * _obstacle.totalFrames));
                _obstacle._state = 0;

            }

            if (_currentLevel == 2){
                _platformArray[_platformArray.length - 1].addChild(_obstacle2);
                _obstacle2.x = _platformArray[_platformArray.length - 1].getChildAt(_indexA).x + _platformArray[_platformArray.length - 1].getChildAt(_indexA).width * 0.5;
                _obstacle2.gotoAndStop(Math.ceil(Math.random() * _obstacle2.totalFrames));
                _obstacle2._state = 0;
            }
    }
    else if ( Math.random() < _coinChance )
    {
//Create coin
        var _coin:MC_coin = new MC_coin();
        _platformArray[_platformArray.length - 1].addChild(_coin);
        _coin.x = _platformArray[_platformArray.length - 1].getChildAt(_indexA).x + _platformArray[_platformArray.length - 1].getChildAt(_indexA).width * 0.5;          
        _coinArray.push(_coin);
    }
} 
```

我怎样才能删除这些孩子？var _obstacle:MC_obstacle = new MC_obstacle(); ? 任何帮助都会很棒！！！提前致谢

注意：如果我使用这个 var _obstacle:MC_obstacle = new MC_obstacle(); 在 for 循环之外，我得到障碍物图像消失和双重堆叠障碍物

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:29:56.190

```
_platformArray[_platformArray.length - 1].removeChildAt(0) 
```

或者

```
for(var a:int = 0;a<_platformArray[_platformArray.length - 1].numChildren;a++){
_platformArray[_platformArray.length - 1].removeChildAt(a)
} 
```

或者如果你使用 fp 11+

```
_platformArray[_platformArray.length - 1].removeChildren() 
```

# c++ - 由于标头中的 unsigned int 初始化，调试模式链接失败

> ID：15921780
> 
> 赞同：0
> 
> 时间：2013-04-10T09:19:38.747
> 
> 标签：c++, linker, linker-errors

据我所知，所有整数类型都可以在头文件中初始化。这就是为什么我觉得这种声明在我的一个标题中是正确的（我们称之为 foo.h）：

```
class Foo {
public:
  static const unsigned int DEFAULT = 0xffffffff;
  ...
}; 
```

在发布模式下编译和链接时，它起作用了。但是，当我在调试模式下编译代码时，出现以下错误：

```
undefined reference to `Bar::Foo::DEFAULT'
collect2: ld returned 1 exit status 
```

当我将初始化移动到 foo.cpp 时，问题就解决了：

```
const unsigned int Foo::DEFAULT = 0xffffffff; 
```

但我不明白为什么。有人能猜到吗？

（我在 Ubuntu 上使用 gcc 4.2.4）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:24:14.210

您已经**初始化**了成员，但**没有定义**它。您仍然需要`const unsigned int Foo::DEFAULT;`在单个实现文件中。

在发布版本中，对成员的引用可能已被优化掉（即用值替换为内联值，因为您告诉编译器它不会被更改），因此不会查找任何符号。调试不是那么宽松 - 编译器现在想知道您的成员已定义并驻留在内存中的某个位置。

# node.js - 使用 express-persona 登录后如何执行操作？

> ID：15921781
> 
> 赞同：0
> 
> 时间：2013-04-10T09:19:52.093
> 
> 标签：node.js, express

我已经使用 express-persona 在我的 Node.js/Express 服务上实现了 Mozilla Persona 登录。但是，我无法弄清楚用户登录后如何进行操作。具体来说，一旦 express-persona 设置了 req.session.email，我想查找并设置 req.session.username 和 req.session。真正的名字。

根据我有限的理解，如果我编辑 express-persona 来调用，这似乎是最简单的`next();`？

# ruby-on-rails - 有条件的轨道中 ActiveRecord 的多个连接

> ID：15921782
> 
> 赞同：0
> 
> 时间：2013-04-10T09:19:52.807
> 
> 标签：ruby-on-rails, activerecord, join, conditional-statements

我的活跃记录如下：

```
 class TemplateItem < ActiveRecord::Base
     attr_accessible :TemplateGroup_id, :name, :object_type
     belongs_to :TemplateGroup
    end

    class TemplateGroup < ActiveRecord::Base 
     attr_accessible :name, :style, :Widget_id
     belongs_to :Widget
     has_many :TemplateItem
    end

    class Widget < ActiveRecord::Base
      attr_accessible :name, :style
      has_many :TemplateGroup
    end 
```

我的查询如下：

```
templateItems=TemplateItem.joins(:TemplateGroup => :Widget).where(:Widget => {:id => w.id}) 
```

但它显示错误。

请帮助我如何编写基于小部件 ID 检索数据的条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:40:02.927

如果我明白了，你想通过一些“通过”来获得`template_items`属于某个特定的所有东西吗？`Widget``w.id``TemplateGroups`

```
@templateItems=TemplateItem.joins(:templateGroups)
                           .where("templateGroups.widget_id = ?", w.id) 
```

# python - 子进程popen，如何获得访问权限？

> ID：15921783
> 
> 赞同：0
> 
> 时间：2013-04-10T09:19:56.827
> 
> 标签：python, subprocess

我正在尝试编写一个启动子进程并写入子进程的标准输入的 python 脚本。
在这里我可以写并得到一个结果：

```
def get_band():
    print "band" 
    p = subprocess.Popen(["/path/to/program","-c","-"], stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE)
    ran_stdout = p.communicate(input='show status')[0]
    print(ran_stdout) 
```

但是打印语句给出：

```
Unable to connect at 127.0.0.1, Connection refused. 
```

如果我这样做，将显示相同的结果：

```
p = subprocess.Popen(["/path/to/program","-c","-"], stdout=subprocess.PIPE, stdin=subprocess.PIPE, stderr=subprocess.PIPE).communicate()
print p[0] 
```

如果我从终端运行这个命令，它工作正常，我可以得到结果。

给定的参数有什么问题？ `["/path/to/program","-c","-"]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:49:31.097

这出于某种原因，在同一行中传递了命令。

```
 p = subprocess.Popen(["/path/to/program", '-c', '-', cmd_here],
  stdout=subprocess.PIPE) 
  proc_stdout, proc_stderr = proc.communicate()
  proc.wait() 
```

# kettle - libformulaErrorValue 错误代码 504

> ID：15921787
> 
> 赞同：1
> 
> 时间：2013-04-10T09:20:15.523
> 
> 标签：kettle

我正在使用步骤构建公式，我想在 char 列中搜索字符串 IF(FIND("PUC";UPPER([DSC_LONGDESC])>0);"PUC";"OTHERS") 但我当我运行转换 libformulaErrorValue 错误代码 504 未找到错误消息时收到此错误

任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T07:29:23.033

也许你可以试试这个：

```
IF(ISBLANK([DSC_LONGDESC]);"OTHER";
IF(ISERROR(FIND("PUC";UPPER([DSC_LONGDESC])));"OTHER";
IF(FIND("PUC";UPPER([DSC_LONGDESC])>0);"PUC";"OTHERS"))) 
```

# android - 将更新/数据从一个线程发送到 Android 中的 UI 线程

> ID：15921789
> 
> 赞同：2
> 
> 时间：2013-04-10T09:20:19.943
> 
> 标签：android, multithreading, user-interface

基于按钮单击，我必须进行一些需要一些时间的处理。所以我决定在与主 UI 线程不同的线程中执行此操作。

现在，基于单独线程中的计算，我调用 UI 线程的主类中的一个函数，从该线程中创建了这个新线程。在这个函数中，我更新了 UI。有人告诉我这不起作用，因为我需要调用主 UI 线程。

有人可以帮我吗？

```
@Override
public void onListItemClicked(int index, Map<String, Object> data) {

    new Thread(new Runnable() {
        @Override
        public void run() {
            // Issue command() on a separate thread
            wasCommandSuccess(command());
        }
    }).start();
}

private void wasCommandSuccess(boolean result){
    if (result == false){
        getUI(BasicUI.class).showAlert("Command failed!", "Unable to access");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:29:02.297

您应该在 runOnUiThread(); 中调用函数 wasCommandSuccess；所以你应该有这样的代码：

```
@Override
public void onListItemClicked(int index, Map<String, Object> data) {

    new Thread(new Runnable() {
        @Override
        public void run() {
            // Issue command() on a separate thread
            final boolean result = command();
            // you need to pass your context (any of Activity/Service/Application) here before this
            context.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    wasCommandSuccess(result);
                }
            });
        }
    }).start();
}

private void wasCommandSuccess(boolean result){
    if (result == false){
        getUI(BasicUI.class).showAlert("Command failed!", "Unable to access");
    }
} 
```

# javascript - 从 html 标签获取自定义属性

> ID：15921793
> 
> 赞同：2
> 
> 时间：2013-04-10T09:20:37.360
> 
> 标签：javascript, jquery, html, bpopup

这是我的代码：

```
<span class="button small pop1" data-bpopup='{"transition":"slideDown","speed":850,"easing":"easeOutBack"}'>Pop it up</span> 
```

如何使用 jQuery 获取 data-bopopup 属性？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:21:38.413

使用 jQuery.data

```
var bpopup = $(".button.small.pop1").data("bpopup"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:21:54.100

要获得全部内容：

```
$('.button').data('bpopup') 
```

要获取`transition`值，您可以执行以下操作：

```
$('.button').data('bpopup').transition; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:23:22.537

尝试这个

```
var bpopup = $(".button.small.pop1").data("bpopup");
alert(bpopup); 
```

# asp.net - Paypal : 如何在取消和成功购买产品的情况下获取用户的电子邮件 ID 和地址详细信息？

> ID：15921797
> 
> 赞同：2
> 
> 时间：2013-04-10T09:20:44.330
> 
> 标签：asp.net, paypal, payment-gateway

在我的 asp.net 应用程序中，我使用 PayPal Payment 获取方式集成。

在直接付款的情况下（无需任何登录和注册）我们可以从 PayPal 获取用户电子邮件 ID 和地址详细信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:47:17.810

如果您使用的是网站付款 pro DoDirectPayment 方法，则买家在输入信息时会出现在您的网站/页面上。您只会让您的页面提示您输入此信息。如果它被传递给 PayPal，这将在交易详细信息以及 IPN 中列出。

# makefile - 在子目录中使用顶级 makefile

> ID：15921798
> 
> 赞同：0
> 
> 时间：2013-04-10T09:20:47.460
> 
> 标签：makefile, subdirectory

我有一个目录结构如下的项目：

```
╷ /
├ Makefile
├┐ dir1/
│├ foo.in
│└ foo.out
├┐ dir2/
┊┊ 
```

Makefile 包含项目中所有文件的规则，例如

```
dir1/%.out: dir1/%.in
    gen_out $< $@ 
```

如果我在顶级目录中，我可以运行`make dir1/foo.out`得很好。

`make foo.out`问题是：内部调用`dir1`具有相同效果的最优雅的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T11:40:41.487

你的选择是有限的。您可以`-f ../Makefile`在命令行上使用该标志`make`，也许通过编写一个包装脚本来`make`确定当前位置并根据您所在的位置使用适当的标志调用它。

您可以将`MAKEFILES`环境变量设置为包含 makefile 的完全限定路径名。

`$(MAKE)`您可以在每个目录中创建一个小的 mini-makefile，它除了使用适当的顶级 makefile重新调用之外什么都不做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T21:16:15.863

您可以使用[makepp](http://makepp.sourceforge.net/)轻松做到这一点。只需将您的 Makefile 重命名为 RootMakeppfile。这将首先加载您在树中的任何位置。

与传统的 make 不同，makepp 不需要进行递归构建。所以你也可以在每个目录下放一个 Makefile，makepp 会把你需要的全部加载到一个进程中。这样，它对您的整个项目有一个一致的视图，并且可以检测和跟踪所有依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T10:05:49.333

尝试这个：

```
cd dir1 && make -f ../Makefile foo.out
```

# r - 在 geom_tile 中的特定区域周围画线

> ID：15921799
> 
> 赞同：2
> 
> 时间：2013-04-10T09:20:50.883
> 
> 标签：r, ggplot2

我有以下数据框 `(df1)`，我从中生成了一个`geom_tile`图。

```
X Y Z
1 1 0.343
5 4 0.134
10 6 0.564
20 8 0.532
40 9 0.235
46 12 0.425 
```

我有另一个数据框，我想用它来画线`(df2)`：

```
a b c     d
1 1 0.05 good
5 4 0.01 better
10 6 0.03 middle
20 8 0.1  bad
40 9 0.2  bad
46 12 0.22 bad 
```

所以这个想法是`a`和`X`是相同的 和`b`是`Y`相同的值。

我想做的是`geom_tile`根据 in 的值在区域`d`周围画一些线`df2`。所以在每个不同的区域都会有不同的颜色线，例如（好的是红色，更好的是蓝色，......）

我尝试使用`geom_contour`，但问题是它以一种非常难看的方式绘制线条，我无法以一种好的方式指定坐标..

***笔记***

*   某些区域可能不在直线上
*   数据框更大，这是一个测试数据来解释这个想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:35:15.997

我建议首先将两个数据框合并在一起，因为它们在两列中具有相同的值。

```
 df.new<-merge(df1,df2,by.x=c("X","Y"),by.y=c("a","b"))
 df.new
   X  Y     Z    c      d
1  1  1 0.343 0.05   good
2 10  6 0.564 0.03 middle
3 20  8 0.532 0.10    bad
4 40  9 0.235 0.20    bad
5 46 12 0.425 0.22    bad
6  5  4 0.134 0.01 better 
```

然后`aes()`设置`fill=`为 Z（如果需要）和`color=d`。`size=2`in`geom_tile()`将确保瓷砖周围的线条更清晰可见。

```
 ggplot(df.new,aes(X,Y,fill=Z,color=d))+geom_tile(size=2) 
```

在不合并数据框的情况下也可以实现类似的结果 - 您应该使用两个`geom_tile()`调用（每个数据框一个），然后在第二个`geom_tile()`（设置颜色的地方）添加`fill=NA`outside `aes()`。

```
ggplot()+geom_tile(data=df1,aes(X,Y,fill=Z))+
         geom_tile(data=df2,aes(a,b,color=d),size=2,fill=NA) 
```

![在此处输入图像描述](https://i.stack.imgur.com/BlB2y.png)

# java - 在'when'子句中获取规则名称：Drools

> ID：15921809
> 
> 赞同：3
> 
> 时间：2013-04-10T09:21:21.827
> 
> 标签：java, drools

如何在 Drools 的 when/Lhs 子句中获取规则名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:30:06.333

不要将 id 附加到规则的名称上，使用一个将所有感兴趣的规则 id 定义为常量的类并使用这些常量，这样您还可以非常轻松地跟踪引用所有这些 id 的位置。

```
rule "MyRule"
    when
        eval((com.test.Rules.RULE1_ID) == 123)
    then
        ...
end 
```

或者，如果您只有几条规则，您可以使用 flags 部分`User`来指示是否已为相应用户执行规则，然后您的检查将如下所示`User(!myRuleHasRun)`。

# java - 未调用重绘（）

> ID：15921810
> 
> 赞同：0
> 
> 时间：2013-04-10T09:21:22.200
> 
> 标签：java, swing, jpanel, repaint

我正在为一个学校项目开发一个游戏，一个类似炸弹人的游戏。

我正在使用 swing，我正在使用 Canvas 绘制图形，但 KeyListener 不起作用，所以我退出使用`Canvas`并开始使用`paintComponent(Graphics g)`. `repaint()`KeyListener 现在正在响应，但是当我的 while 循环调用这些方法时，我的图形不会刷新。

我的代码：

```
 dispose();

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                board b = new board();
                b.setSize(630, 650);
                b.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                b.setVisible(true);
                direction dessin = new direction();
                b.add(dessin);
                b.setVisible(true);
                dessin.setBackground(Color.BLACK);

            }
        }); 
```

然后：

```
package Bm;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Toolkit;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.image.BufferStrategy;

import javax.swing.JComponent;
import javax.swing.JPanel;

@SuppressWarnings("serial")
public class direction extends JPanel implements Runnable {

static float bmx = 35;
static float bmy = 35;
static float ex = 520;
static float ey = 520;
static float v = 0.03f;

static boolean gauche;
static boolean droite;
static boolean haut;
static boolean bas;

static void movEnnemi() {

    int r = 1 + (int) (Math.random() * ((4 - 1) + 1));
    Ennemi.droite = false;
    Ennemi.gauche = false;
    Ennemi.bas = false;
    Ennemi.haut = false;

    switch (r) {
    case 1:
        Ennemi.droite = true;
        break;
    case 2:
        Ennemi.gauche = true;
        break;
    case 3:
        Ennemi.bas = true;
        break;
    case 4:
        Ennemi.haut = true;
        break;
    }

    try {
        Thread.sleep(5);
    } catch (Exception e) {
    }
    ;

}

public direction() {
    super();
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);

    for (int ligne = 0; ligne < board.gridHauteur; ligne++) {
        for (int colonne = 0; colonne < board.gridLargeur; colonne++) {

            switch (board.plateau1[ligne][colonne]) {
            case 0:
                g.setColor(Color.lightGray);
                g.fillRect(30 * ligne, 30 * colonne, 30, 30);
                break;
            case 1:
                g.setColor(Color.black);
                g.fillRect(30 * ligne, 30 * colonne, 30, 30);
                board.plateau1[ligne][colonne] = board.BLOCKED;
                break;
            case 2:
                g.setColor(Color.darkGray);
                g.fillRect(30 * ligne, 30 * colonne, 30, 30);
                board.plateau1[ligne][colonne] = board.BLOCKED;
                break;
            }
        }
    }
    g.setColor(Color.blue);
    g.fillRect((int) ex, (int) ey, 20, 20);
    g.setColor(Color.red);
    g.fillRect((int) bmx, (int) bmy, 21, 21);
    g.dispose();
}

public void run() {

    long dernierTempsLoop = System.currentTimeMillis();

    while (true) {

        long delta = (System.currentTimeMillis() - dernierTempsLoop);
        dernierTempsLoop = System.currentTimeMillis();
        movEnnemi();

        for (int i = 0; i < delta / 5; i++) {
            logic(5);
            Ennemi.logic(5);
        }
        if ((delta % 5) != 0) {
            logic(delta % 5);
            Ennemi.logic(delta % 5);
        }

        System.out.println((int) (bmx / 30) + " - " + (int) (bmy / 30));

        try {
            Thread.sleep(20);
        } catch (Exception e) {
        }
        ;
        repaint(); // <== HERE
    }
}

public static void logic(long delta) {

    float dx = 0;
    float dy = 0;
    if (gauche) {
        dx--;
    }
    if (droite) {
        dx++;
    }
    if (haut) {
        dy--;
    }
    if (bas) {
        dy++;
    }
    if ((dx != 0) || (dy != 0)) {
        joueur.mouvement(dx * delta * v, dy * delta * v);
        if (joueur.mouvement((dx * delta * v), (dy * delta * v)) == false) {
            if (joueur.mouvement(0, dy * delta * v)) {
                joueur.mouvement(0, dy * delta * v);
            }
            if (joueur.mouvement(dx * delta * v, 0)) {

                joueur.mouvement(dx * delta * v, 0);
            }
        }
    }
}
} 
```

和 ：

```
package Bm;

import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.util.Timer;

import javax.swing.*;

@SuppressWarnings("serial")
class board extends JFrame implements KeyListener {

static JPanel p;
public Timer fpstimer;
public direction g;
static final int BLOCKED = 1;
static int gridLargeur = 21;
static int gridHauteur = 21;
int fenLargeur = 630;
int fenHauteur = 650;
public static int plateau1[][] = {
        { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 2, 0, 1 },
        { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
        { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1 } };

public board() {
    super("Bomberman");
    g = new direction();
    addKeyListener(this);
    threadLoop p = new threadLoop("loop");
    p.start();
}

public static boolean blocked(double d, double e) {

    return plateau1[(int) d][(int) e] == BLOCKED;

}

public void keyPressed(KeyEvent e) {

    if (e.getKeyCode() == KeyEvent.VK_LEFT) {
        direction.gauche = true;
    }
    if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
        direction.droite = true;
    }
    if (e.getKeyCode() == KeyEvent.VK_DOWN) {
        direction.bas = true;
    }
    if (e.getKeyCode() == KeyEvent.VK_UP) {
        direction.haut = true;
    }
    if (e.getKeyCode() == KeyEvent.VK_ESCAPE) {
        System.exit(0);
    }
}

public void keyReleased(KeyEvent e) {
    if (e.getKeyCode() == KeyEvent.VK_LEFT) {
        direction.gauche = false;
    }
    if (e.getKeyCode() == KeyEvent.VK_RIGHT) {
        direction.droite = false;
    }
    if (e.getKeyCode() == KeyEvent.VK_DOWN) {
        direction.bas = false;
    }
    if (e.getKeyCode() == KeyEvent.VK_UP) {
        direction.haut = false;
    }
}

public void keyTyped(KeyEvent e) {
}
}

class threadLoop extends Thread {

public direction g;

threadLoop(String name) {
    super(name);
}

public void run() {
    g = new direction();
    g.run();

}

}

public class Jouer {
} 
```

我希望你能理解我的问题，并能帮助我，谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T10:09:00.897

1.  您正在创建类的不同实例`direction`，因此您看到的问题
2.  你不应该这样使用`static`。它违背了良好的面向对象编程
3.  使用 Swing 键绑定而不是使用 KeyListener
4.  遵循 java 命名约定（你的代码现在真的很难阅读）：类以大写字母开头，方法和变量以小写字母开头。使用 CamelCase 连接单词。
5.  不需要`extend`时不要（`JFrame`,`Thread`等...）
6.  尝试将程序的各种概念分开（一部分应该负责显示（显示棋盘、敌人、玩家），另一部分负责对用户输入做出反应（左键按下、右键按下等）。 ..) 和第三个来处理游戏的逻辑（玩家位置、敌人位置、棋盘等...））。

这是一个非常蹩脚的尝试来解释这些不同的建议：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.Random;

import javax.swing.AbstractAction;
import javax.swing.ImageIcon;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.SwingUtilities;

public class Game {

    private static final String ICON_URL = "http://images2.wikia.nocookie.net/__cb20100515002803/fanon/images/a/a2/Bomberman_sprite.png";

    private static final int GRID_SIZE = 24;
    private static final int SQUARE_SIZE = 30;

    private JFrame frame;

    private Board board;

    private static class Board extends JPanel {

        private int[][] grid;

        private int playerX;
        private int playerY;

        private ImageIcon playerIcon;

        public Board() throws MalformedURLException {
            // Some code to generate a random pseudo-board
            Random random = new Random();
            grid = new int[GRID_SIZE][];
            for (int i = 0; i < GRID_SIZE; i++) {
                grid[i] = new int[GRID_SIZE];
                for (int j = 0; j < GRID_SIZE; j++) {
                    int r = random.nextInt(10);
                    grid[i][j] = r > 8 ? 2 : r > 6 ? 1 : 0;
                }
            }
            playerIcon = new ImageIcon(new URL(ICON_URL));
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(GRID_SIZE * SQUARE_SIZE, GRID_SIZE * SQUARE_SIZE);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            // pseudo-board painting
            for (int i = 0; i < grid.length; i++) {
                for (int j = 0; j < grid[i].length; j++) {
                    switch (grid[i][j]) {
                    case 1:
                        g.setColor(Color.GREEN);
                        g.fillRect(i * SQUARE_SIZE, j * SQUARE_SIZE, SQUARE_SIZE, SQUARE_SIZE);
                        break;
                    case 2:
                        g.setColor(Color.RED);
                        g.fillRect(i * SQUARE_SIZE, j * SQUARE_SIZE, SQUARE_SIZE, SQUARE_SIZE);
                        break;

                    default:
                        break;
                    }
                }
            }
            // Player painting
            int x = playerX * SQUARE_SIZE + (SQUARE_SIZE - playerIcon.getIconWidth()) / 2;
            int y = playerY * SQUARE_SIZE + (SQUARE_SIZE - playerIcon.getIconHeight()) / 2;
            g.drawImage(playerIcon.getImage(), x, y, this);
        }

        public int getPlayerX() {
            return playerX;
        }

        public int getPlayerY() {
            return playerY;
        }

        public void setPlayerX(int playerX) {
            if (playerX >= 0 && playerX < GRID_SIZE && grid[playerX][playerY] == 0) {
                this.playerX = playerX;
                repaint();
            }
        }

        public void setPlayerY(int playerY) {
            if (playerY >= 0 && playerY < GRID_SIZE && grid[playerX][playerY] == 0) {
                this.playerY = playerY;
                repaint();
            }
        }
    }

    private class MoveLeftAction extends AbstractAction {

        @Override
        public void actionPerformed(ActionEvent e) {
            board.setPlayerX(board.getPlayerX() - 1);
        }

    }

    private class MoveRightAction extends AbstractAction {

        @Override
        public void actionPerformed(ActionEvent e) {
            board.setPlayerX(board.getPlayerX() + 1);
        }

    }

    private class MoveUpAction extends AbstractAction {

        @Override
        public void actionPerformed(ActionEvent e) {
            board.setPlayerY(board.getPlayerY() - 1);
        }

    }

    private class MoveDownAction extends AbstractAction {

        @Override
        public void actionPerformed(ActionEvent e) {
            board.setPlayerY(board.getPlayerY() + 1);
        }

    }

    private class ExitAction extends AbstractAction {

        @Override
        public void actionPerformed(ActionEvent e) {
            int i = JOptionPane.showConfirmDialog(board, "Are you sure you want to exit?");
            if (i == JOptionPane.YES_OPTION) {
                System.exit(0);
            }
        }

    }

    protected void initUI() throws MalformedURLException {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setResizable(false);
        board = new Board();
        board.setBackground(Color.BLACK);
        board.registerKeyboardAction(new MoveLeftAction(), KeyStroke.getKeyStroke(KeyEvent.VK_LEFT, 0), JComponent.WHEN_FOCUSED);
        board.registerKeyboardAction(new MoveRightAction(), KeyStroke.getKeyStroke(KeyEvent.VK_RIGHT, 0), JComponent.WHEN_FOCUSED);
        board.registerKeyboardAction(new MoveUpAction(), KeyStroke.getKeyStroke(KeyEvent.VK_UP, 0), JComponent.WHEN_FOCUSED);
        board.registerKeyboardAction(new MoveDownAction(), KeyStroke.getKeyStroke(KeyEvent.VK_DOWN, 0), JComponent.WHEN_FOCUSED);
        board.registerKeyboardAction(new ExitAction(), KeyStroke.getKeyStroke(KeyEvent.VK_ESCAPE, 0), JComponent.WHEN_IN_FOCUSED_WINDOW);
        frame.add(board);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new Game().initUI();
                } catch (MalformedURLException e) {
                    e.printStackTrace();
                    JOptionPane.showMessageDialog(null, "Could not load icon from Internet", "Unable to start", JOptionPane.ERROR_MESSAGE);
                }
            }
        });

    }

} 
```

请注意，游戏的显示和逻辑在这里完全交织在一起，所以我不太听从建议 nr 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:27:23.180

`direction`您分配给框架 /与`board`您尝试绘制的不同。您在主循环中创建一个新引用

我还建议您在键侦听器上使用[键绑定](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

**更新**

您构造一个首字母`direction`，然后将其添加到屏幕上。这实际上是要渲染的。

```
direction dessin = new direction();
b.add(dessin); 
```

但是在`threadLoop`你创建一个新的（断开的）`direction`并开始尝试更新它......

```
public void run() {
    g = new direction();
    g.run();
} 
```

...这永远不会绘画，因为它与屏幕没有任何联系。

`board`您还可以在...中创建第三个参考

```
g = new direction(); 
```

所有这些不连贯`direction`的班级都没有人可以绘画或交流，而且都是不必要的。

我将在 中创建一个引用`board`，将其添加到框架中并将该引用传递给`threadLoop`

**更新**

你可以看看[这个](https://stackoverflow.com/questions/15897947/problems-with-javas-paint-method-ridiculous-refresh-velocity/15900205#15900205)。这是一个基本示例，展示了一个简单的线程动画引擎和用于游戏资产移动的键绑定

# shell - 如何将二进制文件的显示输出分隔在 2 个不同的文件中？

> ID：15921813
> 
> 赞同：0
> 
> 时间：2013-04-10T09:21:30.523
> 
> 标签：shell, unix

我有一个无限执行几个二进制文件的 Shell 脚本。我的任务是将这些二进制文件显示的输出重定向到带有时间戳（YY-MM-DD）的日志文件中。这个任务很简单，但是当一天改变时就会出现问题。这是我的问题——如果一个特定的二进制文件正在执行过程中（尚未完成）并且日期发生变化，则应显示的输出应记录在具有不同时间戳的 2 个不同文件中。例如：-

```
 while true; do
      if (current_date = new_date); then
        execute binary >> log.out_$current_date
    // If binary is still in the process of execution how to redirect in 2 files ???
      else 
        execute binary >> log.out_$new_date
      fi
    done 
```

必需的输出是 :: current_date 的文件输出要记录在当前日志文件中，并且文件在新日期的输出要记录在新文件中.....请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:49:30.633

只需创建一个从二进制文件中读取的进一步脚本，`stdout`并在读取每一行后检查日期

```
(source of outputdatescript.sh)

#!/bin/bash

while read line; do

    # example made with unix data, replace it with your date string generator
    date=$(date "+%s")

    echo $line >> file.$date

done; 
```

那么你的主脚本中的命令必须是 subst from

```
execute binary >> log.out_$current_date 
```

至

```
execute binary | outputdatescript.sh 
```

# c++ - 如何在收到的包中获取有关 ICMP 的信息？

> ID：15921816
> 
> 赞同：1
> 
> 时间：2013-04-10T09:21:33.617
> 
> 标签：c++, sockets, icmp

我正在编写一个程序来发送和接收包裹。我通过 ICMP 协议发送数据没有问题，但是在获取主机 IP 或 ICMP 代码等信息时存在问题。

我通过我的程序使用代码 8（'Echo Request'）发送包（它有效），我的计算机收到代码 0（'Echo Reply'）或代码 11（'Time Exceeded'）。我在 Wireshark 中检查了它。

我不知道如何在收到的包中获取有关 ICMP 的信息。我的程序的一部分：

```
socklen_t addrlen = sizeof(connection);
if (recvfrom(sockfd, buffer, sizeof(struct iphdr) + sizeof(struct icmphdr), 0, (struct sockaddr *)&connection, &addrlen) == -1) {
    perror("recv");
} else {
    ip_reply = (struct iphdr*) buffer;
    printf("ID: %d\n", ntohs(ip_reply->id));
    printf("TTL: %d\n", ip_reply->ttl);
} 
```

我想了解有关接收主机的 IP 和 ICMP 代码的信息。

我知道“iphdr”结构中有名为“saddr”和“daddr”的字段。但是有'_be32'类型。我不知道如何将其转换为 'char*'。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:35:01.893

```
#include <netinet/ip_icmp.h>

...
...
...
your recvfrom
...

// first, verify the ip packet contains a ICMP
if (ip_reply->protocol == 1)
{
    // ok, it contains ICMP data
    printf("Received ICMP message from IP: %s\n", inet_ntoa(connection.sin_addr));

    // make the icmphdr struct point to the right offset
    struct icmphdr *icmp = (struct icmphdr *)((uint32_t *)ip_reply + ip_reply->ihl);

    // print what you want
    printf("ICMP type: %u\n", icmp->type);
    printf("ICMP code: %u\n", icmp->code);
} 
```

# c# - 错误：已经有一个打开的 DataReader 与此命令关联，必须先关闭

> ID：15921821
> 
> 赞同：3
> 
> 时间：2013-04-10T09:21:40.680
> 
> 标签：c#, asp.net, sql

我正在使用 sql 连接来访问我的数据库中的不同表。但是代码返回了以下错误。

错误：***“已经有一个打开的 DataReader 与此命令关联，必须先关闭”***：

```
MyContext conn = new MyContext()

protected void ChangeName(int id)
{
    User user = conn.MyOtherTable.First(x => x.id == id);

    var elements = conn.MyTable.Where(x => x.id == id && x.name == name).OrderBy(x => x.id).OrderBy(x => x.name).
                    .Select(t => new { t.id, t.name, }).GroupBy(t => new { t.id, t.name, });

                foreach (var item in elements)
                {
                    foreach (var row in item)
                    {
                        for (int j = 1; j <= 5; j++)
                        {
                            if (row.name == "name")
                            {
                                user.name1 = row.name;
                                conn.SaveChanges();
                            }
                            if (row.name == "name2")
                            {
                                user.name2 = row.name;
                                conn.SaveChanges();
                            }
                         }
                     }
            }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:23:15.240

LINQ（与数据库通信时）通常是非缓冲假脱机 API。做你想做的事，要么：

*   启用多个活动结果集 (MARS)
*   先缓存数据

我更喜欢第二种选择；它只涉及添加`.ToList()`到您的第一行：

```
var elements = conn.MyTable.Where(x => x.id == id && x.name == name)
        .OrderBy(x => x.id).OrderBy(x => x.name).
        .Select(t => new { t.id, t.name, }).GroupBy(t => new { t.id, t.name, })
        .ToList(); 
```

*现在*在这条线运行之后，我们知道我们已经在内存中拥有了所有数据并且阅读器已经关闭；以前它可能仍然在谈论来自阅读器的行输入。

为了完整[起见，此处讨论了启用 MARS](http://msdn.microsoft.com/en-us/library/h32h3abf.aspx) - 不过，这不是我的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-11T08:20:23.167

我算了一个错误，但是我启用了多个活动结果集（MARS），最后我只是将 IDateReader 变量方法从 close() 更改为 dispose() ，然后问题就消失了

# html - 是否有任何浏览器同时支持不同的背景图像？

> ID：15921831
> 
> 赞同：0
> 
> 时间：2013-04-10T09:21:51.310
> 
> 标签：html, css, cross-browser

如果我尝试将背景图像设置为`<html>`居中和顶部以及`<body>`居中和底部，则它不起作用并且只`<html>`显示背景。

每个浏览器都这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:28:39.223

您可以使用 CSS3 使用多个背景来实现此目的。就像是：

```
body {
  background-image: url(bg1.png), url(bg2.png);
  background-position: center top, center bottom;
} 
```

如果不是，请**确保**您的`body`和`html`是 100% 的高度，或者至少有 100% 的高度`min-height`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:24:02.883

该`<html>`标签是文档根目录，并不是真正的可见或应用了 CSS 属性。CSS 规范 2.1 确实定义了`<html>`一个盒子模型，但我仍然不会依赖它。

您可以[使用 CSS3 设置多个背景](http://www.css3.info/preview/multiple-backgrounds/)，或者创建一个额外的（绝对的或固定的）`<div>`，如下所示：

**HTML**

```
<body>
    <div id="container">
         <!-- your usual content -->
    </div>
    <div id="bg"></div>
</body> 
```

**CSS**

```
body { background-image: url(...); }

#bg {
    background-image: url(...);
    float: left; /* body overflow fix */
    left: 0;
    position: absolute;
    top: 0;
    height: 100px; /* height of your background */
    width: 100%;
    z-index: -1000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:25:44.037

为两者使用不同的图像并添加`height:100%`

```
html{
    background:url(https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcTNxe5UjGfVsd1EpdEtrrlGDhjEO2VMFoIY9SGRCuBd4qAr9XhcCQ) top center no-repeat;
    height:100%
}
body{
    background:url(https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcRqQ6g5bisPWccunUGGItC09wa1kgcc5X-rEEGGdEoWEwqUCnuZ) bottom center no-repeat;
        height:100%
} 
```

**[演示](http://jsfiddle.net/YfEde/1/)**

# java - 刷新一个复选框，Selenium 2

> ID：15921832
> 
> 赞同：0
> 
> 时间：2013-04-10T09:21:51.833
> 
> 标签：java, selenium-webdriver

我需要选中一个复选框以在输入字段中键入值。

当我选中该框时，该字段出现。所以我尝试了：

```
WebElement box = driver.findElement(By.id("Checkbox_input"));
box.click();
sleep(5);
// the input can't be detected
// so it throw a noSuchElement.
WebElement input = driver.findElement(By.id("PaymentAmount_input"));
input.sendKeys("12345"); 
```

我已经使用 isSelected() （在 之后`click()`）来验证它是否被选中。

```
Assert.assertTrue(box.isSelected()); 
```

我发现了一些奇怪的东西。我在`ePrepayment.click()`;之后写了

```
box.submit(); 
```

它之所以有效，是因为`submit()`看起来像刷新，所以我的输入出现了，但它不会删除其他输入中的所有值。

**眼镜**

*`sleep()`方法*

```
protected void sleep(int i) {
    driver.manage().timeouts().implicitlyWait(i, TimeUnit.SECONDS);
} 
```

**问题 ：**

有没有更好的方法来代替`submit()`复选框？

谢谢你，马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:54:52.123

您的`sleep()`方法没有意义，因为这是对隐式等待的错误使用。更正确的方法是使用显式等待：

```
WebElement box = driver.findElement(By.id("Checkbox_input"));
box.click();
wait.until(ExpectedConditions.visibilityOfElemementLocated(By.id("PaymentAmount_input")));
WebElement input = driver.findElement(By.id("PaymentAmount_input"));
input.sendKeys("12345"); 
```

假设`wait`已经在某个地方正确启动，例如：

```
WebDriverWait wait = new WebDriverWait(driver, 5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:00:14.700

如果可能，共享您的元素 HTML。可能有类似`onsubmit`显示输入字段而不是`onclick`事件的东西。

# highcharts - highcharts 3 addPoint 点顺序

> ID：15921835
> 
> 赞同：1
> 
> 时间：2013-04-10T09:22:00.323
> 
> 标签：highcharts

在 Highcharts 2 中，很容易使用该点`series.addPoint(p)`的 x 值落在两个现有点的 x 值之间的位置添加一个点。

示例：假设您想创建一个包含两个点的系列的图表：

```
var p1 = {x: 100, y: 50};
var p2 = {x: 200, y: 40};

var data = [];
data.push(p1);
data.push(p1);

var c = new Highcharts.Chart({
  ...//code omitted
  type: 'line',
  data: data,
  ...//code omitted

}); 
```

在第二版中，您可以通过以下方式调用在这两者之间添加一个点：

```
var p3 = {x: 150, y: 60};

c.series[0].addPoint(p3, true); 
```

对于“折线”图表，highcharts 2 将自动确定 p3 的 x 值介于 p1 和 p2 的 x 值之间，因此该线将按以下顺序通过点绘制：p1、p3、p2。

我们发现在 highcharts 3 中，这条线以 p1、p2、p3 的顺序通过点绘制——这意味着它“转回自身”。

我准备了以下 jsFiddle 示例，这些示例将 50 点添加到具有随机 x 和 y 值的现有系列：

Highcharts 2.1.9：http: [//jsfiddle.net/HdNh2/4/](http://jsfiddle.net/HdNh2/4/)

Highcharts 3.0.0：http: [//jsfiddle.net/HdNh2/5/](http://jsfiddle.net/HdNh2/5/)

这是可以解决的问题还是我们需要尝试规避这个问题？

提前致谢...

H

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:11:39.277

所以只是为了结束这个问题：Highcharts 已经确认自 2.2.x 以来逻辑发生了变化。

在我们的例子中，重新渲染整个图表很简单，但我怀疑`series.setData()`这也是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T03:03:02.610

这是一种解决方法。这将在手动添加点时对它们的 x 值进行排序。此*事件*对象位于*图表*对象选项块中。

```
events: {
    click: function(e) {
        // find the clicked values and the series
        var series = this.series[DIA.currentSeriesIndex],
            x = parseFloat(e.xAxis[0].value),
            y = parseFloat(e.yAxis[0].value);

        // Add it
        series.addPoint([x, y]);

        if ( series.data.length > 1) {
            // grab last point object in array
            var point = series.data[series.data.length-1];
            // sort the point objects on their x values
            series.data.sort(function (a, b)
            {
                //Compare "a" and "b" and return -1, 0, or 1
                return (a.x - b.x);
            });
            // force a redraw
            point.update();
        }
    }
} 
```

# android - 通货膨胀期间应用程序崩溃

> ID：15921838
> 
> 赞同：2
> 
> 时间：2013-04-10T09:22:04.477
> 
> 标签：android, android-layout

我正在尝试通过一本书及其示例来学习 Android。我在实现一个涉及片段的应用程序时遇到了困难。这个应用程序应该作为一个 Todo 列表工作，其中包含一个 EditText 来插入新项目和一个 List 来显示它们。

当我启动应用程序时，我在主 Activity 中的 setContentView() 上遇到问题，并且收到消息“不幸的是，TodoList2 已停止”。我尝试使用支持库并为 API 级别 11 或更高级别进行编译，但我得到了同样的错误。

下面是我在崩溃后看到的 logcat：

```
E/AndroidRuntime(4185): FATAL EXCEPTION: main
E/AndroidRuntime(4185): java.lang.RuntimeException: Unable to start activity        ComponentInfo{it.aledev.todolist2/it.aledev.todolist2.MainActivity}: android.view.InflateException: Binary XML file line #13: Error inflating class fragment
E/AndroidRuntime(4185):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
E/AndroidRuntime(4185):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
E/AndroidRuntime(4185):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
E/AndroidRuntime(4185):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
E/AndroidRuntime(4185):     at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(4185):     at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(4185):     at android.app.ActivityThread.main(ActivityThread.java:5041)
E/AndroidRuntime(4185):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(4185):     at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(4185):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
E/AndroidRuntime(4185):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
E/AndroidRuntime(4185):     at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime(4185): Caused by: android.view.InflateException: Binary XML file line #13: Error inflating class fragment
E/AndroidRuntime(4185):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
E/AndroidRuntime(4185):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
E/AndroidRuntime(4185):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
E/AndroidRuntime(4185):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
E/AndroidRuntime(4185):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
E/AndroidRuntime(4185):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
E/AndroidRuntime(4185):     at android.app.Activity.setContentView(Activity.java:1881)
E/AndroidRuntime(4185):     at it.aledev.todolist2.MainActivity.onCreate(MainActivity.java:18)
E/AndroidRuntime(4185):     at android.app.Activity.performCreate(Activity.java:5104)
E/AndroidRuntime(4185):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
E/AndroidRuntime(4185):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
E/AndroidRuntime(4185):     ... 11 more
E/AndroidRuntime(4185): Caused by: java.lang.NullPointerException
E/AndroidRuntime(4185):     at it.aledev.todolist2.NewItemFragment.onCreateView(NewItemFragment.java:19)
E/AndroidRuntime(4185):     at android.app.Fragment.performCreateView(Fragment.java:1695)
E/AndroidRuntime(4185):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:861)
E/AndroidRuntime(4185):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
E/AndroidRuntime(4185):     at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1137)
E/AndroidRuntime(4185):     at android.app.Activity.onCreateView(Activity.java:4717)
E/AndroidRuntime(4185):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
E/AndroidRuntime(4185):     ... 21 more 
```

这是我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.aledev.todolist2"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="it.aledev.todolist2.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的主要活动 xml (activity_main.xml)：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity"
    android:orientation="vertical"
    >

    <fragment
        android:name="it.aledev.todolist2.NewItemFragment"
        android:id="@+id/new_item_fragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        />

    <fragment
        android:name="it.aledev.todolist2.ToDoListFragment"
        android:id="@+id/todo_list_fragment"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"        
        />

</LinearLayout> 
```

这是我的包含 EditText 的片段的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<EditText xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:contentDescription="@string/add_item_content_decription"
    >

</EditText> 
```

它包含一个警告，因为未指定提示属性，但放置它并不能解决我遇到的问题。

这是 MainActivity 代码：

```
package it.aledev.todolist2;

import java.util.ArrayList;

import android.app.Activity;
import android.app.FragmentManager;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ArrayAdapter;

public class MainActivity extends Activity implements NewItemFragment.OnNewItemAddedListener{
    private ArrayAdapter<String> aa;
    private ArrayList<String> todoItems;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Get references to the fragment manager
        FragmentManager fm=getFragmentManager();
        ToDoListFragment todoListFragment=(ToDoListFragment)fm.findFragmentById(R.id.todo_list_fragment);

        // Create the array list of to do items
        todoItems=new ArrayList<String>();

        // Create the array adapter to bind the array to the ListView
        aa=new ArrayAdapter<String>(this,android.R.id.list,todoItems);

        // Bind the ArrayAdapter to the ListView
        todoListFragment.setListAdapter(aa);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    @Override
    public void onNewItemAdded(String newItem) {
        // TODO Auto-generated method stub
        todoItems.add(newItem);
        aa.notifyDataSetChanged();

    }

} 
```

我可以在 onCreate() 中调用 setContentView()，但执行永远不会到达下一行代码。

这里有与NewFragmentItem相关的代码：

```
package it.aledev.todolist2;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;

public class NewItemFragment extends Fragment {
    private OnNewItemAddedListener onNewItemAddedListener;
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        super.onCreateView(inflater, container, savedInstanceState);
        View view=inflater.inflate(R.layout.new_item_fragment, container, false);
        final EditText myEditText=(EditText)getActivity().findViewById(R.id.myEditText);
        myEditText.setOnKeyListener(new View.OnKeyListener(){

            @Override
            public boolean onKey(View v, int keyCode, KeyEvent event) {
                // TODO Auto-generated method stub
                if(event.getAction()==KeyEvent.ACTION_DOWN){
                    if((keyCode==KeyEvent.KEYCODE_DPAD_CENTER)||
                            (keyCode==KeyEvent.KEYCODE_ENTER)){
                        String newItem=myEditText.getText().toString();
                        onNewItemAddedListener.onNewItemAdded(newItem);
                        myEditText.setText("");
                        return true;
                    }
                }
                return false;
            }

        });

        return view;
    }

    @Override
    public void onAttach(Activity activity){
        super.onAttach(activity);

        try{
            onNewItemAddedListener=(OnNewItemAddedListener)activity;
        }
        catch(ClassCastException e){
            throw new ClassCastException(activity.toString()+" must implement OnNewItemAddedListener");
        }
    }

    public interface OnNewItemAddedListener{
        public void onNewItemAdded(String newItem);
    }
} 
```

我在涉及谷歌地图的应用程序中发现了类似的问题，但我不使用地图。所有问题似乎都来自不连贯性，例如不使用支持库或在模拟器/设备上使用错误的 API。我正在为 API 级别 11 或更高级别进行编译，目标 SDK 设置为 17。我为模拟器设置了 API 级别 17。

我真的不明白我的错误在哪里。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T09:26:07.970

改变

```
final EditText myEditText=(EditText)getActivity().findViewById(R.id.myEditText); 
```

至

```
final EditText myEditText=(EditText)view.findViewById(R.id.myEditText); 
```

你得到那个edittext的空指针异常。您需要使用`view`那里而不是 getActivity()，因为您正在使用`view`. 并确保您在可绘制文件夹中有 ic_launcher 图像。而且它不会被错误地删除。希望能帮助到你。

# glassfish - 有没有办法以编程方式配置 MDB？

> ID：15921839
> 
> 赞同：5
> 
> 时间：2013-04-10T09:22:05.930
> 
> 标签：glassfish, ejb, jms, ejb-3.1

我目前正在研究一个在 GlassFish 上运行的基于 EJB 3.1 的项目，该项目使用自定义构建的框架来配置任何 SessionBeans 的功能。使用它，我们可以在运行时启用、禁用和重新配置大多数服务。不幸的是，我们不能扩展它来支持 MDB 的配置。我想根据配置信息设置 MDB 正在使用的选择器，并在设置更改时重新配置它。

不幸的是，我只能想出一个 SessionBean，它根据配置在 JMS 会话上本地创建 MessageConsumers，并让 JMS 消息由 MessageListeners 处理，但有人告诉我这样我们将失去并发性和 EJB 系统的事务处理，因为我们将不再以这种方式使用 MDB。

那么有什么方法可以使用 MDB 来做我正在寻找的事情吗？有人告诉我在新的 EJB 和 JMS 规范草案中有一些计划扩展，但我找不到指向那个特定主题的指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-10T07:53:52.190

不，MDB 由 Deployer 在部署时配置。

此处回答了类似的问题：[动态配置消息驱动 Bean 中的 MappedName 注释](https://stackoverflow.com/questions/16033568/configuring-mappedname-annotation-in-message-driven-bean-dynamically/26294397#26294397)

# c# - 如何在asp.net中使用itext在pdf中添加图像文件

> ID：15921844
> 
> 赞同：2
> 
> 时间：2013-04-10T09:22:30.883
> 
> 标签：c#, asp.net, itextsharp

如何在 asp.net C# 中使用 itextSharp 添加图像文件。以及需要哪个命名空间

```
Image jpg** = Image.GetInstance(new Uri(URL)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:29:34.150

您可以`iTextSharp.text.Image`用于添加图像。像这样的东西：

```
iTextSharp.text.Image pic = iTextSharp.text.Image.GetInstance(image, System.Drawing.Imaging.ImageFormat.Jpeg);
myDocument.Add(pic); 
```

其中**myDocument**是`Document`itextsharp 类的对象

在这里，如果有一篇详细的文章讨论在 itextsharp 中处理图像

[http://www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images](http://www.mikesdotnetting.com/Article/87/iTextSharp-Working-with-images)

并且您可能也有兴趣浏览文档，所以这里是链接：

[http://sourceforge.net/projects/itextsharp/](http://sourceforge.net/projects/itextsharp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:53:13.090

你可以试试这个

using(Stream ImageStream = new FileStream(imageUrl, FileMode.Open, FileAccess.Read, FileShare.Read))

图像图像 = Image.GetInstance(ImageStream);

# iphone - 如何在 cocos2d 中停止预定的 runAction

> ID：15921845
> 
> 赞同：1
> 
> 时间：2013-04-10T09:22:32.980
> 
> 标签：iphone, ios, cocos2d-iphone, ccsprite

我正在使用下面的代码添加每 1.5 秒后创建的精灵，如下所示

```
[self schedule:@selector(addTraget:) interval:1.5];

-(void)addTraget:(ccTime)dt{
CCSprite *target = [CCSprite spriteWithFile:@"img1.png" rect:CGRectMake(0, 0, 80, 36)];

target.position = ccp(-target.contentSize.width/2, 100);
[self addChild:target];
target.tag = 1;

id actionMove = [CCMoveTo actionWithDuration:actualDuration*2.5 position:ccp(winSize.width + (target.contentSize.width/2), actualY)];
id actionMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
id sequece = [CCSequence actions:delayTime1, calFun1, delayTime2, calFun2,actionMove, actionMoveDone, nil];
id repeate = [CCRepeatForever actionWithAction:sequece];

[target runAction:repeate];
} 
```

由于 addTarget 方法已安排，那么在满足条件一段时间后如何停止此预定操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:36:42.907

```
[self unscheduleAllSelectors]; //For all selectors 
```

或者，

```
[self unschedule:@selector(YOURSELECTOR)]; //For specific selector 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T09:48:58.977

只有取消调度特定的调度程序然后使用这个：

```
[self unschedule:@selector(addTraget:)]; 
```

# visual-studio-2010 - 如何在 Visual Studio 参考管理器中并排安装 .NET4.0、.NET4.5、x86、AnyCPU DLL

> ID：15921846
> 
> 赞同：0
> 
> 时间：2013-04-10T09:22:33.607
> 
> 标签：visual-studio-2010, dll, deployment, visual-studio-2012

[与此处的此问题](https://stackoverflow.com/questions/15905782/how-to-install-deploy-net-dll-so-it-appears-in-visual-studio-add-references)相关，我正在尝试创建一个安装程序，该安装程序在目标用户的 PC 上安装 DLL 并使它们可用于 Visual Studio 参考管理器（项目 > 添加参考）

我发现要使 .NET4.0 参考管理器可以看到程序集，我需要添加此注册表项

```
Key: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319\AssemblyFoldersEx\MyAsm
Value: <Directory on target PC of .NET4.0 assembly> 
```

对于.NET4.5，我需要这个密钥

```
Key: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.5.50709\AssemblyFoldersEx\MyAsm
Value: <Directory on target PC of .NET4.5 assembly> 
```

但是我现在有一个问题。当我去 Add-References 时，我看到类似这样的东西

![在此处输入图像描述](https://i.stack.imgur.com/HK2gn.png)

所以我的问题是，将多个 DLL 编译到不同的 .NET 框架（例如 .NET4.0、.NET4.0 客户端配置文件、.NET4.5）并针对不同的机器（x86、x64、AnyCPU）的最佳实践是什么) 以便在添加引用中只显示一个版本或以便可以在添加引用对话框中区分版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:36:51.897

一般来说，最好的做法是不要弄乱用户的注册表。请注意，程序员不会期望在框架列表中找到非 Microsoft 程序集，因此可能永远不会去那里查看。增加的便利性相当小，用户可以简单地使用浏览按钮来选择您复制到他机器上的参考程序集。尽管您确实需要向他提供有关查看位置的提示。当您使用标准的 c:\program files\company\product 命名策略时，问题不大。

避免重复很容易。如果您的程序集与 .NET 4.0 兼容，则只需修改 v4.0.30319 密钥。以 4.5 为目标的项目将在列表中包含 4.0 程序集。如果您出于某种原因需要 4.5，请修改 v4.5.50709 密钥。

# networking - Fiddler 显示 DNS 查找失败

> ID：15921849
> 
> 赞同：4
> 
> 时间：2013-04-10T09:22:41.887
> 
> 标签：networking, dns, fiddler

在我的桌面上，我运行 Visual Studio Web 服务器 cassini 和 fiddler 作为代理，然后我使用通过无线连接的 iPad 连接到在 Cassini 中运行的网站。

自从我安装并卸载了 Visual Studio 的 MVC 包以来，这一直有效。

现在我从提琴手那里得到这条消息（它被发送到 iPad）：

```
[Fiddler] DNS Lookup for "http://175.33.22.116" failed. The requested name is valid, but no data of the requested type was found 
```

此消息有类似的帖子，但没有一个与我的设置有关。

你能建议检查什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:15:32.097

这表明来自您的 IPAD 客户端的流量格式不正确。您是否在 Fiddler 中使用任何东西（例如 Tools > HOSTS）来更改流量？如果不是，则错误在客户端；例如，某些东西试图连接到`http://http://175.33.22.116`不合法的东西（由于字符串中的双 http://）。

# java - 我如何使下一个按钮转到下一个框架？图形用户界面

> ID：15921854
> 
> 赞同：-2
> 
> 时间：2013-04-10T09:23:00.040
> 
> 标签：java, user-interface

如何使下一个按钮转到此 GUI 中的下一个框架？我需要它，我可以单击下一步以显示 20 更多详细信息：

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class FilledFrameViewer
{
   public static void main(String[] args)
   {
      JFrame frame = new JFrame();

      /*JButton button = new JButton*/
      JButton nextButton = new JButton("NEXT");
      JLabel label = new JLabel("Frame 1.");

      JPanel panel = new JPanel();
      panel.add(nextButton);
      panel.add(label);
      frame.add(panel);

      final int FRAME_WIDTH = 300;
      final int FRAME_HEIGHT = 100;
      frame.setSize(FRAME_WIDTH, FRAME_HEIGHT);
      frame.setTitle("A frame with two components");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

      frame.setVisible(true);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:37:53.257

有点不清楚。您想将*JButton*移动到另一个*JFrame*吗？我认为如果没有动态编程之类的东西（我猜？），你就无法做到这一点。

您应该阅读 Oracle [http://docs.oracle.com/javase/tutorial/uiswing/的 Swing 组件教程](http://docs.oracle.com/javase/tutorial/uiswing/)

并查看您的评论。我同意拥有多个*JFrame*是一个坏习惯。

**编辑**

使用 eventlistner （请参阅其他答案）并使其遵循 switch 案例？然后在那里你可以让它像一个对话框一样显示或在你的*JFrame中更改一个**JLable*？

 *对话教程在这里：[http](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html) ://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html 。我认为您应该使用标签并更改其文本。

```
JButton nextButton = new JButton("Next");
nextButton.addActionListener(new ActionListner(

private int counter = 0;

public void actionPerformed(ActionEvent e) { 

    counter++;

    switch(counter){

        case 1: somelable.setText("Your text here");

    };

})); 
```

我随意写了这个，但我想这样的东西会起作用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T03:05:03.703

您必须在下一帧中编辑代码... NextFrame 的示例，

```
public class NextFrame
   public static void main(String[] args)
   {
      private static FilledFrameViewer parentFrame; //ADD THIS FOR CONNECTION TO FIRST FRAME

        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    NextFrame frame = new NextFrame(null); //CHANGES MADE HERE
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }

      public NextFrame(FilledFrameViewer f) { //CHANGES MADE HERE
      this.parentFrame = f; //CHANGES MADE HERE
        setTitle("Personal Assistant");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(100, 100, 450, 300);
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:33:29.810

如果要隐藏或显示框架，可以这样使用

JFrame f1 = new JFrame("Frame 1"); JFrame f2 = new JFrame("Frame 2");

要隐藏 f1，请调用 f1.setVisible(false)；要显示 f2，请调用 f2.setVisible(true)；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-24T03:11:19.513

啊，是的...而且您还必须在“下一步”按钮中添加一些内容...

例子：

```
 btnNext = new JButton();
    btnNext.addItemListener(new ItemListener() {
        public void itemStateChanged(ItemEvent e) {
            goNext();
            {
                private void goNext(){
                                    NextFrame nextframe= new NextFrame(null);
                                    nextframe.setVisible(true);
            }
            }

    }); 
```*

# jquery - 标签导航问题

> ID：15921859
> 
> 赞同：0
> 
> 时间：2013-04-10T09:23:22.483
> 
> 标签：jquery, html, jquery-tabs

当我向下滚动到选项卡并选择其中一个选项卡时，我的页面末尾有选项卡，它会将我带到页面顶部，选项卡工作正常，但我想在单击时留在页面的同一部分我不想每次都上到顶部的选项卡。这是我的 jquery 选项卡代码：

```
<div id="wrapper">
 <ul class="tabs">
   <li id="fixtures_tab"><a href="#fixtures"><?php echo ALL;?></a></li>
   <li id="live_tab"><a href="#live"><?php echo LIVE;?></a></li>
   <li id="finished_tab"><a href="#finished"><?php echo FINISHED;?></a></li>
   <li id="program_tab"><a href="#program"><?php echo PROGRAM;?></a></li>
   <li id="postpond_tab"><a href="#postpond"><?php echo POSTPOND;?></a></li>
   <li id="selected_tab"><a onclick="stripe_Color();" id='f' href="#fav"><?php echo SELECTED;?> (0)</a></li>
 </ul>
 <div class="tab-container">
 <div id="fixtures" class="tab-content">
     <script type="text/javascript">get_All_Today_Matches();</script>
 </div>
 <div id="live" class="tab-content"><script type="text/javascript"></script></div>
 <div id="finished" class="tab-content"><script type="text/javascript"></script></div>
 <div id="program" class="tab-content"><script type="text/javascript"></script></div>
 <div id="postpond" class="tab-content"><script type="text/javascript"></script></div>
 <div id="fav" class="tab-content"><script type="text/javascript"></script></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:25:17.880

跳转是由锚标签默认操作引起的。您可以使用 jquery 绑定到`<a/>`标签并防止在单击时执行默认操作。这是通过将事件传递给事件处理程序并`preventDefault`从处理程序内调用事件的函数来完成的。

```
$(document).ready(function(){
    $(".tabs a").click(function(e){
       e.preventDefault();
    });
}); 
```

**工作示例** [http://jsfiddle.net/pDcHg/](http://jsfiddle.net/pDcHg/)

[防止默认文档](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:26:37.447

使用 `preventDefault()`..

它防止`<a>`标签的默认行为

```
$(".tabs li a").click(function(e){
  e.preventDefault();
}); 
```

# puppet - Puppet：定义自定义资源类型包装 exec 资源并使用可选的“除非”

> ID：15921861
> 
> 赞同：0
> 
> 时间：2013-04-10T09:23:24.340
> 
> 标签：puppet

以下代码示例纯粹是学术性的，但它很好地说明了我的问题。

```
define touch($file=$title, $unless='/bin/false') {
    exec { "/bin/touch ${file}": unless => $unless }
} 
```

如果我定义了自己的资源类型来包装另一个*exec*资源，并且我想**添加一个可选的“除非”条件**，我 - 如果设置 - 传递给*exec*的可选“除非”条件- 我是否必须使用 '/垃圾箱/假'？

我的理解是，对于每个目录运行和此自定义资源类型的所有使用，此资源的除非检查将生成一个运行 '/bin/false' 的 bash 进程，如果 "touch" 的除非字段尚未设置。

如果该字段尚未设置，我实际上打算不做任何“除非”检查 - 包括调用“/bin/false”。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:28:59.633

使用 undef 而不是 '/bin/false'，除非只有在设置时才会运行：

```
define touch($file=$title, $unless=undef) {
    exec { "/bin/touch ${file}": unless => $unless }
} 
```

# asp.net-mvc-4 - 视图mvc中的多个循环

> ID：15921862
> 
> 赞同：0
> 
> 时间：2013-04-10T09:23:26.003
> 
> 标签：asp.net-mvc-4

如果我有以下代码，是否可以在一个视图上拥有两个视图数据？我将如何做这件事提前谢谢

```
public ActionResult Index(long id = 0)
        {
            var contentPage = (from c in db.Tble_content
                               where c.id == id
                               select c);
            var contentlist = (from c in db.Tble_content
                                       where c.EN_TopPageID == id
                                       select c);
            return View();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:29:41.757

多一点代码会有所帮助。但假设你`Tble_content`的结构是这样的：

```
public class Tble_content {
    public int Id {get;set;}
    public string Content{get;set;}
} 
```

你可以有一个像这样的视图模型：

```
public class ContentViewModel {
    public string ContentPage {get;set;}
    public string ContentList {get;set;}
} 
```

然后你将它传递给这样的视图：

```
public ActionResult Index(long id = 0)
{
    var contentPage = (from c in db.Tble_content
                        where c.id == id
                        select c);
    var contentlist = (from c in db.Tble_content
                                where c.EN_TopPageID == id
                                select c);

    return View(new ContentViewModel {
       ContentPage = contentPage,
       ContentList = contentlist
    });
} 
```

# html - 根据 HTML 中的值对行进行分组

> ID：15921870
> 
> 赞同：1
> 
> 时间：2013-04-10T09:23:36.030
> 
> 标签：html, jsp

我有一个带有以下for循环的jsp页面：

```
<c:forEach var="myItem" items="${itemsList}">

<table border="0" class="table_class">

        <tr>

            <td colspan="1" valign="bottom">Item #${myItem.item_number}
            </td>

            <td colspan="2" align="left"><b>Item Name : ${myItem.item_name}</b> 
            </td>

        </tr>

        <tr>
            <td class="gridcolumnclass">${myItem.item_desc}
            </td>

        </tr>

</table>

</c:forEach> 
```

很明显，对于每个项目，都会发布两行，第一行有两列包含 ITEM_NUMBER 和 ITEM_NAME，而第二行包含 ITEM_DESCRIPTION。

例如，我有以下一组项目

```
1, banana, some_desc
2, banana, some_desc
3, apple, some_desc
4, banana, some_desc
5, banana, some_desc
6, apple, some_desc
7, apple, some_desc
8, banana, some_desc
9, apple, some_desc
10, apple, some_desc
11, banana, some_desc 
```

如果将上面的列表传递给 for 循环，在显示屏上，将有两个香蕉，然后是一个苹果，然后是两个香蕉，然后是两个苹果，然后是一个香蕉，然后是两个苹果，最后是一个香蕉。

但是，我怎么能把苹果和香蕉放在一起呢？

我的显示器应该首先显示所有香蕉，然后是苹果。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:41:25.817

我猜这组项目是一个对象（或数组）。Javascript 有 .sort() 函数，它可以接受一个函数。

```
function compare(a,b) {
    if (a.item_name < b.item_name)
        return -1;
    if (a.item_name > b.item_name)
        return 1;
    return 0;
}

myItem.sort(compare); 
```

如果您想更进一步并使比较功能动态化。（所以你可以按另一个“字段”名称排序）[这](https://stackoverflow.com/a/4760279/1397220)是一个好的开始；）

如果您不能使用 Javascript 进行排序。[这](https://stackoverflow.com/a/10214234/1397220)是一个基于Java的解决方案。不过，它需要一些修改才能在您的情况下使用它。

希望这可以帮助。

# wso2 - wso2：如何获得服务的 SLA/响应时间

> ID：15921874
> 
> 赞同：0
> 
> 时间：2013-04-10T09:23:38.967
> 
> 标签：wso2, esb, response-time

**如何使用类调解器获取 ESB 中每个服务的响应时间？**

我在 ESB 中创建了一个 DiscoveryProxy，并希望访问已部署在应用程序服务器中的服务的 QoS（响应时间）。

如何访问 ESB 中服务的 SLA/响应时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:28:39.290

您可以在监视器-->系统统计页面中找到服务统计详细信息。如果您需要有关服务的更细粒度的详细信息，则可能需要将 BAM 与 AS 集成。

# javascript - 将两个正则表达式合二为一

> ID：15921877
> 
> 赞同：0
> 
> 时间：2013-04-10T09:23:44.257
> 
> 标签：javascript, regex

我有两个正则表达式。如何将它们转换为一个：

```
str = str.replace(/(\s\(\d+\)|exception\s*\:*)/gi, "<br /><br />$1");
str = str.replace(/(exception\s+No\.\s*\d\:)/gi,"<br /><br />$1"); 
```

我想将它们转换成一个正则表达式。我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:10:24.880

可能不是优化的正则表达式，但一个非常简单的解决方案是将您的正则表达式与`|`：

```
str = str.replace(/((?:\s\(\d+\)|exception\s*\:*)|exception\s+No\.\s*\d\:)/gi, "<br /><br />$1"); 
```

# c - C: 使用 for(;;) 有什么好处吗？

> ID：15921879
> 
> 赞同：1
> 
> 时间：2013-04-10T09:23:46.390
> 
> 标签：c

我找到了这个实现`char * strchr (const char *string, int c);`：

```
for (;;) 
  if (*string == c)
    return (char *) string;
  else if (*string == '\0')
    return NULL;
  else
    string++; 
```

不过，对我来说，这相当于执行以下操作，这将更容易阅读：

```
while (*string != c && *string != '\0')
  string++;

return (*string == c) ? ((char *) string) : (NULL); 
```

我认为 libc 实现第一个是有原因的。但是任何人都知道它背后的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:25:20.300

是的，Visual Studio 不喜欢`while(1)`将警告级别提高到最大值（特别是如果您要求它将警告视为错误），但可以使用`for(;;)`.

# c - C/Linux 中的线程执行时间

> ID：15921880
> 
> 赞同：1
> 
> 时间：2013-04-10T09:23:47.123
> 
> 标签：c, linux, multithreading, linux-kernel, pthreads

如果我可以测量特定线程所占用的实际时间或 cpu 滴答声，我会徘徊。

```
pthreadcreate(.........);
//
//
pthreadjoin(.......); 
```

我正在运行 3 个线程。

一个主线程正在调用其余两个线程。我想测量被调用线程的执行时间。

我应该在linux环境中使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:36:43.070

你可以做一件事

在启动时的线程函数中使用 printk 创建日志。您可以使用它 thread_t 变量或线程索引将其与不同的线程打印分开

并在该线程函数的末尾放置另一个类似的日志。

所以在`dmesg`

将显示日志`timestamp`

因此您可以区分结束日志时间和开始日志时间。

我知道这不是更实用的方法，但只是为了调试目的，你可以毫不费力地做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:34:52.080

如果您想获得更准确的结果，可以使用刻度计数器：

```
#ifndef TIMING_H
#define TIMING_H

/*
 * -- Init timing library with timing_init();
 * -- get timestamp :
 *  tick_t t;
 *  GET_TICK(t);
 * -- get delay between two timestamps in microseconds :
 *  TIMING_DELAY(t1, t2);
 */

#include <sys/time.h>
#include <unistd.h>
#include <stdint.h>

#ifndef min
#define min(a,b) \
    ({__typeof__ ((a)) _a = (a); \
      __typeof__ ((b)) _b = (b); \
      _a < _b ? _a : _b; })
#endif

typedef union u_tick
{
  uint64_t tick;

  struct
  {
    uint32_t low;
    uint32_t high;
  }
  sub;
} tick_t;

static double scale_time = 0.0;
static unsigned long long residual = 0;

#if defined(__i386__) || defined(__pentium__) || defined(__pentiumpro__) || defined(__i586__) || defined(__i686__) || defined(__k6__) || defined(__k7__) || defined(__x86_64__)
#  define GET_TICK(t) __asm__ volatile("rdtsc" : "=a" ((t).sub.low), "=d" ((t).sub.high))
#else
#  error "Unsupported processor"
#endif

#define TICK_RAW_DIFF(t1, t2) ((t2).tick - (t1).tick)
#define TICK_DIFF(t1, t2) (TICK_RAW_DIFF(t1, t2) - residual)
#define TIMING_DELAY(t1, t2) tick2usec(TICK_DIFF(t1, t2))

void timing_init(void)
{
  static tick_t t1, t2;
  int i;

  residual = (unsigned long long)1 << 63;

  for(i = 0; i < 20; i++)
    {
      GET_TICK(t1);
      GET_TICK(t2);
      residual = min(residual, TICK_RAW_DIFF(t1, t2));
    }

  {
    struct timeval tv1,tv2;

    GET_TICK(t1);
    gettimeofday(&tv1,0);
    usleep(500000);
    GET_TICK(t2);
    gettimeofday(&tv2,0);
    scale_time = ((tv2.tv_sec*1e6 + tv2.tv_usec) -
         (tv1.tv_sec*1e6 + tv1.tv_usec)) / 
      (double)(TICK_DIFF(t1, t2));
  }
}

double tick2usec(long long t)
{
  return (double)(t)*scale_time;
}

#endif /* TIMING_H */ 
```

# ms-office - 在文档打开时对其文本进行操作

> ID：15921882
> 
> 赞同：0
> 
> 时间：2013-04-10T09:23:56.070
> 
> 标签：ms-office, openxml, office-interop, openxml-sdk, openoffice-writer

当用户输入文字时，是否可以在 Office 中提取、修改或简单地阅读文本？可以通过 OpenXML SDK 和 InterOp 库吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:57:27.983

我在几个项目中使用了 Microsoft Office Interop API for Word，当然，您可以访问文档的内容，即使用户正在编辑它。

我建议你看一些教程来帮助你入门，如果你遇到一些问题，你可以随时返回并询问。

但请注意 - 如果您希望每次在文档中输入新字符或单词时都能阅读内容，您可能会感到失望，因为目前没有发生这种情况时引发的事件。有关详细信息，请参阅此相关问题/答案：[Capturing keydown event of MS Word using C#](https://stackoverflow.com/questions/13000645/capturing-keydown-event-of-ms-word-using-c-sharp)

# dojo - dojo 内化 html 模板

> ID：15921885
> 
> 赞同：0
> 
> 时间：2013-04-10T09:24:01.540
> 
> 标签：dojo

为 EnhancedGrid 使用过滤器和分页插件时，相同的 HTML 模板从 dojox\grid\enhanced\templates 加载。

有什么方法可以通过使它们成为增强网格的内联 javascript 的一部分来避免服务器对这些 HTML 文件的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:12:25.167

您应该创建一个自定义的 dojo 构建，从而创建一个 js 文件。按照之前 QA 的说明进行操作：

[给定依赖项列表，如何将 Dojo 构建到单个文件中？](https://stackoverflow.com/questions/13853876/how-to-build-dojo-into-a-single-file-given-a-list-of-dependencies)

**编辑：**

构建应该内联添加这些 html 文件，但没有。我用谷歌搜索了一下，发现这个链接与你的问题有关：

[http://grokbase.com/t/dojo/dojo-interest/121e536t64/enhancedgrid-filter-problem](http://grokbase.com/t/dojo/dojo-interest/121e536t64/enhancedgrid-filter-problem)

它建议使用此链接进行修复

[http://dojo-toolkit.33424.n3.nabble.com/Custom-build-including-CSS-and-HTML-files-td3536573.html](http://dojo-toolkit.33424.n3.nabble.com/Custom-build-including-CSS-and-HTML-files-td3536573.html)

**引文：**

* * *

如果您使用的是 AMD 样式的模块定义，那么您可以像这样指定文本依赖项：

```
define(["dojo/text!some/file.html", "other/module"],
function(template, otherModule){
    ...
    // to use the contents of the html file, treat template as if it were a normal string
    someNode.innerHTML = template;
    ...
}); 
```

构建系统应自动将文本依赖项转换为内联字符串文字。大多数 Dojo 文件已经格式化为使用此功能，但我无法解释 dojox 模块。我不确定 dojo.require/dojo.provide 依赖声明系统是否可以实现类似的功能。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T08:49:06.937

我有解决办法。那些在这个问题上苦苦挣扎的人请。请注意，Dojo 1.7.1 存在错误，我们需要使用 Dojo 1.8.3 并在 build 命令中使用 internStrings 选项。您应该会在构建报告中看到 HTML 文件。

# excel - Excel错误地将范围转换为日期，如何避免？

> ID：15921886
> 
> 赞同：4
> 
> 时间：2013-04-10T09:24:02.697
> 
> 标签：excel, date, implicit-conversion, tsv

我有一个 .tsv 文件，其中一些字段的范围是`1 - 4`. 我想阅读这些字段，因为它们是文字编写的。但是，在打开文件时，excel 会自动将这些范围字段转换为日期。例如`1 - 4`转换为`4-Jan`. 如果我尝试将单元格重新格式化为另一种类型，则值已经更改，我只能得到一个无用的数字 (39816)。即使范围字段在双引号内，仍然会发生错误的日​​期转换。如何避免这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T11:18:56.567

我认为您最好使用 excel 中的导入工具，但您可能必须手动将文件扩展名更改为**csv**。

导入时，请务必为具有这些值的所有列选择文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T13:09:13.197

我的问题实际上至少是重复的：

1)[阻止 Excel 自动将某些文本值转换为日期](https://stackoverflow.com/questions/165042/stop-excel-from-automatically-converting-certain-text-values-to-dates?rq=1)

2) [Excel：打开 .csv 文件时默认为 TEXT 而不是 GENERAL](https://stackoverflow.com/questions/1752218/excel-default-to-text-rather-than-general-when-opening-a-csv-file?rq=1)

Excel 的可能解决方案是 1) 使用特殊双引号写入字段，如`"May 16, 2011"`as`"=""May 16, 2011"""`或 2) 使用外部数据向导导入 csv/tsv 文件，然后手动选择要读取为 TEXT 而不是 GENERAL 的列（其中可以将字段转换为日期）

至于我的用例，我只是使用 Excel 来删除一些列。没有一个解决方案对我有吸引力，因为我不想用特殊引号重写 tsv 文件，而且我有数百列，我不想手动选择每一列以作为 TEXT 读取。

因此，我编写了一个 scala 脚本来按列名过滤 tsv 文件：

```
package com.jmcejuela.ml

import java.io.InputStream
import java.io.Writer

import scala.io.Codec
import scala.io.Source

import Table._

/**
 * Class to represent tables with a fixed size of columns. All rows have the same columns.
 */
class Table(val rows: Seq[Row]) {
  lazy val numDiffColumns = rows.foldLeft(Set[Int]())((set, row) => set + row.size)

  def toTSV(out: Writer) {
    if (rows.isEmpty) out.write(TableEmpty.toString)
    else {
      out.write(writeLineTSV(rows.head.map(_.name))) //header
      rows.foreach(r => out.write(writeLineTSV(r.map(_.value))))
      out.close
    }
  }

  /**
   * Get a Table with only the given columns.
   */
  def filterColumnsByName(columnNames: Set[String]): Table = {
    val existingNames = rows.head.map(_.name).toSet
    assert(columnNames.forall(n => existingNames.contains(n)), "You want to include column names that do not exist")
    new Table(rows.map { row => row.filter(col => columnNames.contains(col.name)) })
  }

}

object TableEmpty extends Table(Seq.empty) {
  override def toString = "Table(Empty)"
}

object Table {
  def apply(rows: Row*) = new Table(rows)

  type Row = Array[Column]

  /**
   * Column representation. Note that each column has a name and a value. Since the class Table
   * is a sequence of rows which are a size-fixed array of columns, the name field is redundant
   * for Table. However, this column representation could be used in the future to support
   * schemata-less tables.
   */
  case class Column(name: String, value: String)

  private def parseLineTSV(line: String) = line.split("\t")
  private def writeLineTSV(line: Seq[String]) = line.mkString("", "\t", "\n")

  /**
   * It is assumed that the first row gives the names to the columns
   */
  def fromTSV(in: InputStream)(implicit encoding: Codec = Codec.UTF8): Table = {
    val linesIt = Source.fromInputStream(in).getLines
    if (linesIt.isEmpty) TableEmpty
    else {
      val columnNames = parseLineTSV(linesIt.next)
      val padding = {
        //add padding of empty columns-fields to lines that do not include last fields because they are empty
        def infinite[A](x: A): Stream[A] = x #:: infinite(x)
        infinite("")
      }
      val rows = linesIt.map { line =>
        ((0 until columnNames.size).zip(parseLineTSV(line) ++: padding).map { case (index, field) => Column(columnNames(index), field) }).toArray
      }.toStream
      new Table(rows)
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-27T14:41:24.373

我在excel中有一个“文本”格式的单元格，其中填充了一个值为“8013-07-8”的化学casn，该值被重新格式化为日期格式。为了解决这个问题，我将单引号连接到值的开头，并在查看结果时正确呈现。当您单击单元格时，您会看到带前缀的单引号，但至少我不再将其视为日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-01T07:51:27.380

就我而言，当我在我的 D2 excel 单元格中输入 5-14 时，日期为 5 月 14 日。在某人的帮助下，我能够使用以下方法将日期格式更改为数字范围（5-14），并希望与您分享。（我将以我的案例为例）。

1.  在 excel 中使用单元格格式，我将 D2（5 月 14 日）中的日期格式转换为数字优先（在我的情况下它给了我 43599）。
2.  然后在excel中使用下面的公式将其转换为5-14。=IF（精确（D2，43599），“5-14”，D2）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-03T16:45:27.517

在excel中写01-04而不是1-4..

# magento - 如何在magento中的cms模板上显示父/根类别

> ID：15921889
> 
> 赞同：1
> 
> 时间：2013-04-10T09:24:04.610
> 
> 标签：magento, magento-1.7

我有一个类别结构，如下图所示，

![在此处输入图像描述](https://i.stack.imgur.com/t7Jik.png)

我想在我的主页模板上显示所有主题父类别并带有指向它们的链接，那么我该如何实现呢？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:35:20.593

您不能显示默认类别，您必须添加如下类别！[在此处输入图像描述][1]

默认类别 (12) 所有类别 (12) 手机 (10) 熔岩 (1) 三星 (8) 索尼 (1) 笔记本电脑 (2)

这里所有类别都是根类别并显示，在导航中选择包含到是。

# java - Java 更新的累积 MSI 条目？

> ID：15921891
> 
> 赞同：0
> 
> 时间：2013-04-10T09:24:10.883
> 
> 标签：java, registry, windows-installer

我正在我的域中通过本地更新发布者/WSUS 部署 Java 更新 7.17。因为部署无法通过“命令行错误”处理提取的 MSI 文件，所以我不得不使用 *.exe 文件并手动在“已安装/可安装”规则中添加包的 MSI 代码。现在工作正常。

我现在的问题是关于未来的 Java 更新。我即将以同样的方式部署它们。因此，当我使用新的 MSI 代码部署新版本时，旧条目（从 7.17 开始）是否会保留在注册表中？因为更新程序会卸载以前的版本。如果不是这种情况，我需要在包的所有未来“安装/可安装”规则中涉及 7.17 MSI 代码（和更新的代码）。我希望 java 的 MSI 注册表项是累积的，并且在更新的情况下不会被删除 - 这样我就不必使“旧”更新脱机。否则他们会一遍又一遍地相互卸载/安装。

有人可以批准这个或相反吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:09:38.890

这取决于 Java Update MSI 进行更新的方式。如果他们使用重大升级（这很可能），那么 MSI`ProductCode`将随着每个版本而改变。如果他们使用较小的升级（不太可能），那么 MSI`ProductCode`将保持不变。

# php - 编辑 PHP 网格的 CSS

> ID：15921897
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:24:29.367
> 
> 标签：php

我有一个可编辑的网格，我想在其中编辑 CSS，以便 textarea 显示最大宽度，但不知何故我无法增加文本区域的宽度。

我的数据库有三列：

1.  ID
2.  姓名
3.  闲话

我正在检索所有内容并将其显示在使用 PHP 的可编辑网格中。

**index.php 代码**

```
<?php
$db = new mysqli('localhost', 'root', '', 'bollywood');
$db->set_charset('utf8');
if ($db->connect_errno) {
    die('Check the database connection again!');
}

$userQuery = 'SELECT Id,Name,Gossip FROM bollywood';
$stmt = $db->query($userQuery);
?>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="stylesheet" type="text/css" href="style.css" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                var textBefore = '';
                $('#grid').find('td input').hover(function() {
                    textBefore = $(this).val();
                    $(this).focus();
                }, function() {
                    var $field = $(this),
                        text = $field.val();
                    $(this).blur();
                    // Set back previous value if empty
                    if (text.length <= 0) {
                        $field.html(textBefore);
                    } else if (textBefore !== text) {
                        // Text has been changed make query
                        var value = {
                            'row': parseInt(getRowData($field)),
                            'column': parseInt($field.closest('tr').children().find(':input').index(this)),
                            'text': text
                        };
                        $.post('user.php', value)
                        .error(function() {
                            $('#message')
                                .html('Make sure you inserted correct data')
                                .fadeOut(3000)
                                .html('&nbsp');
                            $field.val(textBefore);
                        })
                        .success(function() {
                            $field.val(text);
                        });
                    } else {
                        $field.val(text);
                    }

                });

                // Get the id number from row
                function getRowData($td) {
                    return $td.closest('tr').prop('class').match(/\d+/)[0];
                }
            });
        </script>
        <title></title>
    </head>
    <body>
    <?php if ($stmt): ?>
    <div id="grid">
    <p id="message">Click on the field to Edit Data</p>
    <table>
        <thead>
            <tr>
                <th>Id</th>
                <th>Name</th>
                <th>Gossip</th>
            </tr>
        </thead>
        <tbody>
        <?php while ($row = $stmt->fetch_assoc()): ?>
            <tr class="<?php echo $row['Id']; ?>">
                <td><input type="text" value="<?php echo $row['Id']; ?>" /> </td>
                <td><input type="text" value="<?php echo $row['Name']; ?>" /></td>
                <td ><input type="textarea" cols="500" rows="100" value="<?php echo $row['Gossip']; ?>" /></td>

            </tr>
        <?php endwhile; ?>
        </tbody>
    </table>
    </div>
    <?php else: ?>
        <p>No actors added yet</p>
    <?php endif; ?>
    </body>
</html> 
```

**user.php 代码**

```
 <?php
// Detect if there was XHR request
if (!empty($_SERVER['HTTP_X_REQUESTED_WITH']) &&
    strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
    $fields = array('row', 'column', 'text');
    $sqlFields = array('Id', 'Name', 'Gossip');

    foreach ($fields as $field) {
        if (!isset($_POST[$field]) || strlen($_POST[$field]) <= 0) {
            sendError('No correct data');
            exit();
        }
    }

    $db = new mysqli('localhost', 'root', '', 'bollywood');
    $db->set_charset('utf8');
    if ($db->connect_errno) {
        sendError('Connect error');
        exit();
    }

    $userQuery = sprintf("UPDATE bollywood SET %s='%s' WHERE Id=%d",
            $sqlFields[intval($_POST['column'])],
            $db->real_escape_string($_POST['text']),
            $db->real_escape_string(intval($_POST['row'])));
    $stmt = $db->query($userQuery);
    if (!$stmt) {
        sendError('Update failed');
        exit();
    }

}
header('Location: index.php');
function sendError($message) {
    header($_SERVER['SERVER_PROTOCOL'] .' 320 '. $message);
} 
```

**style.css 代码**

```
body {
    font: normal 14px Comic Sans, Comic Sans MS, cursive;
}

table {
width: 500px;
}

td, th {
    border: 1px solid #d8d8bf;
}

th {
    padding: 5px;
    font: bold 14px Verdana, Arial, sans-serif;
}

td {
    padding: 10px;
    width: 200px;
}

td input {
    margin: 0;
    padding: 0;
   // width:200px;
    font: normal 14px sans-serif;
    /** Less flicker when :focus adds the underline **/
    border: 1px solid #fff;
}

td input:focus {
    outline: 0;
    border-bottom: 1px dashed #ddd !important;
}

#grid input {
   // width: 200%;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-10T09:37:05.803

textarea 是 html 标签名称，但不是输入类型。所以改变这个。

```
<td ><input type="textarea" cols="500" rows="100" value="<?php echo $row['Gossip']; ?>" /></td> 
```

至

```
<td ><textarea cols="500" rows="100"><?php echo $row['Gossip']; ?></textarea> 
```

还要添加这个 css。

```
<style>
 textarea {
  resize: both;
  width:700px;
 }
</style> 
```

你也确定你可以使用它来获取内容。

```
<?php echo $row['Gossip']; ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T09:30:15.217

你做错了

```
<td ><input type="textarea" cols="500" rows="100" value="<?php echo $row['Gossip']; ?>" /></td> 
```

应该：

```
<td ><textarea cols="500" rows="100"><?php echo $row['Gossip']; ?></textarea> 
```

# pentaho - Pentaho 数据集成是否在转换中有 Excel 2007 (.xlsx) 输出？

> ID：15921906
> 
> 赞同：0
> 
> 时间：2013-04-10T09:24:48.773
> 
> 标签：pentaho, kettle

Pentaho 数据集成是否在转换中有 Excel 2007 (.xlsx) 输出？我正在使用 PDI 4.1.0 稳定版

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T04:59:44.773

使用**Microsoft Excel Writer**步骤。它可以生成 xls 或 xlsx 扩展名的 xls 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:03:44.903

如果您找不到执行此操作的步骤，则没有。但是你可以做 Excel 可以轻松读取的 csv。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-03T11:17:26.467

if you want to generate excel 2007 output then use the below hops

1)Microsoft Excel Writer Step. It can generate xls file in xls or xlsx extension

2)Microsoft Excel Output Step. It Can generate XLS or XLSX ext

# c# - 如何从 C# 中的可用 XML 数据创建电子表格？

> ID：15921912
> 
> 赞同：-2
> 
> 时间：2013-04-10T09:25:08.927
> 
> 标签：c#

我将 XML 格式的 XML 数据转换为字符串变量。我想将字符串变量中的 XML 数据保存到电子表格中，并发送该生成的电子表格的电子邮件附件。

请建议我实现这一目标的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:30:05.770

您将需要知道如何将潜在的树结构展平为电子表格。这取决于您的 XML 格式和电子表格布局以及电子表格软件。没有这些信息，我们将无法为您提供帮助。

然后，您可以使用[邮件客户端类](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)发送带有[附件的](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.attachments.aspx)[邮件消息](http://msdn.microsoft.com/en-us/library/system.net.mail.mailmessage.aspx)。

# wcf - 如何在客户端扩展 WCF 数据服务上下文类？

> ID：15921914
> 
> 赞同：0
> 
> 时间：2013-04-10T09:25:13.047
> 
> 标签：wcf, wcf-data-services, odata

我正在使用以下代码在客户端使用 FullName 扩展我的服务上下文：

```
public partial class Customer {
    public string FullName
    {
        get
        {
            return string.Concat(LastName, (FirstName == "" ? "" : ", "), FirstName);
        }
    }
} 
```

这很好，直到我需要使用 AddOBject 方法将新对象添加到上下文中。它抛出一个异常。当我删除 FullName 扩展时，AddObject 方法将新对象保存到数据库中。扩展我的上下文并使其仍可更新和可插入的最佳方法是什么？

**编辑：** DataServiceRequest 异常：

```
System.Data.Services.Client.DataServiceRequestException was not handled by user code.
  HResult=-2146233079
  Message=Fehler beim Verarbeiten dieser Anforderung.
  Source=Microsoft.Data.Services.Client.WindowsStore
  StackTrace:
       at System.Data.Services.Client.SaveResult.HandleResponse()
       at System.Data.Services.Client.BaseSaveResult.EndRequest()
       at System.Data.Services.Client.DataServiceContext.EndSaveChanges(IAsyncResult asyncResult)
       at Pointsale.Client.Service.PointsaleEntities.<SaveChanges>b__0(IAsyncResult asResult) in c:\Users\Jan\Desktop\pointsale_worksapce\pointsale.client\Helper\TenantHelper.cs:line 98
       at System.Threading.Tasks.TaskFactory`1.FromAsyncCoreLogic(IAsyncResult iar, Func`2 endFunction, Action`1 endAction, Task`1 promise, Boolean requiresSynchronization)
  InnerException: System.Data.Services.Client.DataServiceClientException
       HResult=-2146233079
       Message=<?xml version="1.0" encoding="utf-8"?><m:error xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"><m:code /><m:message xml:lang="de-DE">Error occurred while processing this request.</m:message></m:error>
       StatusCode=400
       InnerException: 
```

SaveChanges 方法覆盖以使其异步：

```
public async Task<DataServiceResponse> SaveChanges()
{
    var queryTask = Task.Factory.FromAsync(this.BeginSaveChanges(null, null), asResult =>
    {

        var result = this.EndSaveChanges(asResult);
        return result;

    });
    return await queryTask;
} 
```

在 EndSaveChanges 发生错误。

# python - 在 python 程序中调用的 Sudo 不起作用

> ID：15921915
> 
> 赞同：0
> 
> 时间：2013-04-10T09:25:13.893
> 
> 标签：python, bash, chown, sudoers

这是一个非常具体的问题。在我的程序中，我使用一个特定的文件来运行一个 sudo 命令，我称之为 CHOWN.sh ：

```
#!/bin/bash
if [ "$1" = "usb"] #first argument is usb
then 
    chown eng:eng /mnt/usb
else
    ... 
```

当我使用参数“usb”调用命令/path/to/the/file/CHOWN.sh 时，它会更改我作为/mnt/usb 安装的usb-key 的所有权。但是，此文件应以 root 身份运行。这就是我在 /etc/sudoers 中输入这一行的原因：

```
%hmis ALL=NOPASSWD: /path/to/the/file/CHOWN.sh 
```

这样，我可以使用“sudo”命令运行它。

假设 /mnt/usb 的所有权是 root:root：

```
$ ls -als /mnt/usb
4 drwxr-xr-x 2 root root 4096 Feb 13 10:50 .
4 drwxr-xr-x 4 root root 4096 Mar 15 2012 .. 
```

当我使用 sudo 运行命令时，我得到：

```
$ whoami
user
$ sudo /path/to/the/file/CHOWN.sh usb
$ ls -als /mnt/usb
4 drwxr-xr-x 2 eng eng 4096 Feb 13 10:50 .
4 drwxr-xr-x 4 root root 4096 Mar 15 2012 . 
```

所以命令按预期工作。请注意，用户 'user' 是组 'hmis' 的一部分。但是，当我在 python 文件中使用此命令时，它将不起作用：

```
#!/usr/bin/python
...
subprocess.call(["whoami"])
subprocess.call(["sudo","/path/to/the/file/CHOWN.sh","usb"])
... 
```

在程序的 stdout-stderr 中，我得到：

```
user
chown: changing ownership of '/mnt/usb' : Operation not permitted 
```

有谁知道问题出在哪里？

谢谢，

莎拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:39:01.700

你需要给你的 python 脚本更多的权限。

在控制台上，用命令打开它`sudo myProgram.py`，然后它应该可以工作了。

# linux - 在 Aur 的帮助下安装守护进程服务将在哪里安装文件以及哪些文件

> ID：15921916
> 
> 赞同：0
> 
> 时间：2013-04-10T09:25:16.067
> 
> 标签：linux, archlinux

如果我们在 Arch Linux 中安装守护程序服务，如何获取文件的位置和名称。以及获取安装添加的文件列表的命令是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:40:46.903

要获取已安装包中包含的文件列表（无论是否来自 AUR），只需执行以下操作：

```
pacman -Ql package_name 
```

如果您只想要每行一个路径（在脚本中使用），请使用：

```
pacman -Qql package_name 
```

# javascript - OpenERP移动客户端页面刷新问题

> ID：15921921
> 
> 赞同：0
> 
> 时间：2013-04-10T09:25:25.510
> 
> 标签：javascript, openerp

我必须在 OpenERP Mobile Client 上做一些定制工作。问题是它适用于#tag Url

```
http://localhost:8069/web_mobile/static/src/web_mobile.html#oe_menu or 
http://localhost:8069/web_mobile/static/src/web_mobile.html#oe_sec_menu_21 
```

问题是我在任何页面上并且出于任何原因如果我刷新内容永远不会再次加载。它只是给了我一个空白页。如果我复制 URL 并粘贴到不同的浏览器窗口中，那么什么也没有。我无法找出代码中的问题或它是如何工作的。移动客户端的文档太差。
我从上周开始就在这里敲我的头，我需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:58:56.537

是的，没有用于研发目的的特定移动控制台。所以它的核心问题来自移动客户端。但其他选择是使用后退按钮单击事件来导航显示在页面顶部的页面，而不是浏览器后退按钮。

您可以使用主页按钮和返回按钮来刷新目的。

# magento - Magmi产品选择所有网站

> ID：15921922
> 
> 赞同：1
> 
> 时间：2013-04-10T09:25:29.667
> 
> 标签：magento, magmi

我正在为 Magento 使用 MAGMI 导入器。我有一个包含以下网站的多店网站：base、store 1、store 2、store 3、store 4 等。

我在我的 CSV 文件中使用此规则

```
"websites"
"base, store 1, store 2" 
```

不幸的是，导入后，所有网站都被选中（所以商店 3 和商店 4 也是如此）。有谁知道解决方案？我正在使用 MAGMI 版本 v0.7.18

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T23:00:06.027

“网站”已过时，仅使用“商店”

# iphone - 从按钮中检索值

> ID：15921923
> 
> 赞同：0
> 
> 时间：2013-04-10T09:25:30.273
> 
> 标签：iphone

我有一些按钮，我想在每个按钮中放置单个字母，在所有按钮中放置所有字母后，我必须形成一个单词并检查数据库。我应该如何从按钮中获取值并像单词一样形成。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:30:18.300

您可以使用以下代码获取按钮的标题..

```
NSString *strButtonTitle = yourButton.titleLabel.text; 
```

并且您还可以使用以下代码将标题设置为 Button..

```
[yourButton setTitle:@"A" forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:53:49.603

最可重用的解决方案是：

*   将所有按钮添加到数组中（您可以在界面生成器中执行此操作）

    ```
    @property (nonatomic, strong) IBOutletCollection(UIButton) NSArray *buttons; 
    ```

*   当您在按钮上设置图像时，在另一个数组中设置相应的文本值

    ```
    NSMutableArray *values = [NSMutableArray array];

    [imageNames enumerateObjectsUsingBlock:^(NSString *name, NSUInteger idx, BOOL *stop) {
      [self.buttons[idx] setImage:[UIImage imageNamed:name] forState:UIControlStateNormal];
      [values addObject:name];
    }];

    self.values = [values copy]; 
    ```

现在当用户点击一个按钮时，您可以使用该按钮在`buttons`数组中的位置来确定相应的文本值；

```
 - (IBAction)buttonTapped:(UIButton *)button
    {
      NSInteger index = [self.buttons indexOfObject:button];
      NSLog(@"textValue: %@", self.values[index]); // I don't know how you are mapping imageName to values but this will give you the image name
    } 
```

# c# - COM 的要求聚合了我的自定义 IRibbonExtensibility 实现？

> ID：15921925
> 
> 赞同：2
> 
> 时间：2013-04-10T09:25:33.350
> 
> 标签：c#, com, aggregation, shared-addin

我们有一个精简的 Connect 类，它从另一个程序集中实例化插件的核心。我们的架构设计是让 UI 和业务逻辑与加载模块（= Connect 类）分离，但是共享 Addin 的限制给我们带来了麻烦。

我们在 Connect.cs 中做了什么：

```
[GuidAttribute("XYZ"), ProgId("XYZ")]
public class Connect : Object, IDTExtensibility2, ICustomQueryInterface
{
    ...
    CustomQueryInterfaceResult ICustomQueryInterface.GetInterface(ref Guid iid, 
                                                                  out IntPtr ppv)
    {           
        if (iid.Equals(new Guid("000C0396-0000-0000-C000-000000000046")))
        {
            ppv = Marshal.GetComInterfaceForObject(
                          UIObject,  
                          typeof(IRibbonExtensibility),
                          CustomQueryInterfaceMode.Ignore);
            return CustomQueryInterfaceResult.Handled;
        }

        ppv = IntPtr.Zero;
        return CustomQueryInterfaceResult.NotHandled;            
    }
 } 
```

RibbonUI 的外观如何：

```
public interface IOfficeFluentUI :  IRibbonExtensibility
{
    ...
}

public class OfficeFluentUI : OfficeUIBase, IOfficeFluentUI
{
    ...
    public string GetCustomUI(string RibbonID)
    { 
       ...
    }    
} 
```

GetInterface 函数有效，它获取 com 接口，但不幸的是 GetCustomUI 函数永远不会被调用。我们做错了什么？非常感谢您的帮助。

[编辑] 我们已经知道“[托管 COM 聚合](https://stackoverflow.com/questions/1981013/managed-com-aggregation?rq=1)”和“ [ICustomQueryInterface](http://blogs.msdn.com/b/jmstall/archive/2009/07/09/icustomqueryinterface-and-clr-v4.aspx) ”文章。不幸的是，他们并没有真正提供帮助。

# android - 如何在 Android 地图上的标记 InfoWindow 上显示 EditText

> ID：15921930
> 
> 赞同：1
> 
> 时间：2013-04-10T09:25:46.763
> 
> 标签：android, google-maps, android-edittext, google-maps-markers, infowindow

我正在尝试显示 EditText（从用户那里获取输入并执行一些操作）。

![在此处输入图像描述](https://i.stack.imgur.com/mfJoo.png)

在上图中，我希望 EditText 控件显示在 Hello world 信息窗口中。请建议我任何想法，如何做到这一点。是否可以在信息窗口上插入 UI 控件。

请帮忙！！任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:30:23.293

您可以将任何布局放入 infoWindow。请按照本[教程](http://wptrafficanalyzer.in/blog/customizing-infowindow-contents-in-google-map-android-api-v2-using-infowindowadapter/)

# facebook - 发布带有适当图片的互联网链接

> ID：15921933
> 
> 赞同：0
> 
> 时间：2013-04-10T09:25:55.320
> 
> 标签：facebook, facebook-sharer

我想在 facebook 上分享我们网站上的一篇文章，但我们面临两个问题：

1/ 几乎所有时候，建议的图片都是来自网站的图片，而是来自其他页面的图片，而不是来自我要分享的文章。（且图片与文章主题有直接关系）

2/ 这种类型的链接[http://www.kacileo.fr/blogs/4/1wblmb-la-face-cach%C3%A9e](http://www.kacileo.fr/blogs/4/1wblmb-la-face-cach%C3%A9e-de-nos-faiblesses) ​​-de-nos- faiblesses 不能在 facebook 上分享，因为我们没有任何适当的标题和图片。自己试试就知道了！但是这个链接适用于linkeIn，Viadeo ...

那么，你有什么答案吗？有没有人有同样的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:59:11.837

Facebook在显示链接预览时使用[Open Graph Protocol 。](http://ogp.me/)告诉 OGP 显示什么的最好方法是`<head>`在页面中添加一些元标记。

```
<meta property="og:title" content="Example Title" /> 
<meta property="og:image" content="http://example.com/exampleimage.jpg" /> 
<meta property="og:description" content="Example description" /> 
<meta property="og:url" content="http://example.com"> 
```

[更多信息请访问 Facebook 网站](https://developers.facebook.com/docs/opengraph/tutorial/)

# android - 使图像从listview android中的选定行可见

> ID：15921936
> 
> 赞同：0
> 
> 时间：2013-04-10T09:26:07.617
> 
> 标签：android

在我的应用程序中，我试图让 holder.image 在我的 ListView 中的选定行上可见。我的列表视图适配器如下：

在我的 onCreate() 活动中调用，但我无法将 holder.image 设置为从 onCreate() 活动可见。说实话，我不知道该怎么做。有人已经这样做了吗？请与我分享你的知识。提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:08:03.403

SetTag on imageview 和 onItemClick 您将获得视图并使用标签找到 imageview 并应用可见性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:49:53.007

在 getView() 中使用此代码

holder.image.setVisibility(vi.VISIBLE);

# javascript - Javascript - 按键搜索对象

> ID：15921940
> 
> 赞同：1
> 
> 时间：2013-04-10T09:26:22.057
> 
> 标签：javascript, json, search, loops, optimization

我知道对此有很多答案，并且大多数人建议循环遍历对象，返回您需要的内容，无论如何，我不确定这是最好的方法。

我所拥有的是通过`entries`引用另一个数组`people`(with `id`and `name`)`person_id`和`projects`(with `id`and `name`) by的数组`project_id`。

我需要的是能够访问具有特定`id`内部循环的项目和人员 on `entries`，这样我就可以获得他们的名字。做其他人建议的事情，我会在 的每个刺激中循环`people`，这似乎是非常多的循环。`projects``entries`

所以我想我会在 init`people`和`projects`init 上做一些我称之为“哈希表”的东西，这意味着几乎要创建一个新对象`people_hashtable`，`projects_hashtable`其中键是 id

所以

```
[
  {
    "id": "8",
    "name": "John Doe"
  }
] 
```

会变成

```
{
    "8": {
        "name": "John Doe"
    }
} 
```

这样我就可以轻松访问名称而无需一直循环，同时仍保持旧数组的原始顺序（这就是为什么我不直接从服务器以这种方式输出它，你不能完全订购一个对象和我同时使用`people`和`projects`在一个选择框中，需要按名称排序）。

我做对了吗？有没有更好的办法？或者我应该完全忘记这一点并按照其他问题的建议坚持搜索循环？

我试图在服务器端和客户端都尽可能高效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:39:41.183

您基本上将所有对象加倍只是为了避免循环。所以，除非你有一些糟糕的性能问题，否则我会避免这种情况。如果您真的非常需要一种哈希图，我宁愿存储数组的索引而不是对象的另一个副本：

```
// array
var arr = [
  {
    "id": "8",
     "name": "John Doe"
  }
];

// lookup table
var lookup = {
  "8": 0
} 
```

当然，这样做意味着您不能在不重建哈希图的情况下修改数组。

生成它非常简单：

```
var lookup = arr.reduce(function(lookup, item, index) {
  lookup[item.id] = index;
  return lookup;
}, {}); 
```

您还可以使用它来生成您提到的问题的对象：

```
var lookup = arr.reduce(function(lookup, item) {
  lookup[item.id] = {name: item.name};
  return lookup;
}, {}); 
```

但正如我所说，这是我会避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:29:32.243

以下代码可能会对您有所帮助。[JSFIDDLE](http://jsfiddle.net/KrnYT/)

```
var arr = [
  {
    "id": "8",
    "name": "John Doe"
  }
];

var obj = {};
for(var i=0; i< arr.length; i++){
   obj[arr[i].id] = {name: arr[i].name};
}

console.log(obj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-19T13:19:17.197

```
var articles= {
    "item1":{
         "id":"155",
         "name":"First Item",
         "value":-5199.6
    },
    "item2":{
         "id":"255",
         "name":"Second Item",
         "value":-424.91
    }
}

var ids = [];
for(var item in articles) {
    ids.push(articles[item]['id']);
}

console.log(ids); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-06-19T09:13:49.293

这个库[https://github.com/paularmstrong/normalizr](https://github.com/paularmstrong/normalizr)使它很容易做到。规范化和非规范化。

可以转这个

```
{
  "id": "123",
  "author": {
    "id": "1",
    "name": "Paul"
  },
  "title": "My awesome blog post",
  "comments": [
    {
      "id": "324",
      "commenter": {
        "id": "2",
        "name": "Nicole"
      }
    }
  ]
} 
```

进入这个

```
{
  result: "123",
  entities: {
    "articles": { 
      "123": { 
        id: "123",
        author: "1",
        title: "My awesome blog post",
        comments: [ "324" ]
      }
    },
    "users": {
      "1": { "id": "1", "name": "Paul" },
      "2": { "id": "2", "name": "Nicole" }
    },
    "comments": {
      "324": { id: "324", "commenter": "2" }
    }
  }
} 
```

反之亦然。

# python - 如何将成员函数名称评估为函数对象？

> ID：15921941
> 
> 赞同：-1
> 
> 时间：2013-04-10T09:26:27.637
> 
> 标签：python, eval

我在 A 类中定义了一些函数

而且在 A 类中，我有一个函数可以用它们的名字调用另一个函数

但是当我使用`eval('funcname')`时，它说功能是`not defined`

如何将成员函数名称评估为函数对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:33:44.360

您的问题并不完全清楚，但听起来您在问如何从该类中的另一个方法按名称调用该类中的一个方法。

由于所有实例方法都有`self`参数，您可以通过以下方式简单地查找所需的方法`getattr`：

```
def call_by_name(self, method_name):
    method = getattr(self, method_name)
    method() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:34:32.103

跟随作品，但你为什么要这样做？

```
class A(object):
    def __init__(self):
        pass

    def fa(self):
        print('Hello')
    def fb(self):
#        self.fa()
        eval('self.fa()')

a = A()
a.fb() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:35:08.877

希望有用，

如果你想调用一个实例方法这里是方式

```
class A:
def foo(self):
         print " ok"
         return "ok"
 def bar(self):
         #i = A()
         #print eval('i.foo()')
          print eval('self.foo()')
 a = A()
 a.bar() 
```

方法是实例属性而不是类属性，所以我们只能通过实例调用方法。

# ruby-on-rails-3 - 我无法在 Rails 中迁移生成模型

> ID：15921943
> 
> 赞同：1
> 
> 时间：2013-04-10T09:26:33.640
> 
> 标签：ruby-on-rails-3, migration, activeadmin

我有一个 rails 项目，我想添加一个新表并在项目中已经存在的一个表中进行更改。从终端和现有 rails 项目的文件夹中，我写了这个：

```
Mini-1:arbinet anna$ rails generate model PriceRate profitable_routes_id:int normalized_rate:float normalized_payout:float margin:float old_rate:float old_payout:float old_margin:float 
```

这也适用于迁移：

```
Mini-1:arbinet anna$ rails generate migration ChangeColumnsFromProfitableRoutes 
```

但对于两者，我都会收到以下信息：

```
 Usage:
  rails new APP_PATH [options]

Options:
  -r, [--ruby=PATH]              # Path to the Ruby binary of your choice
                                 # Default: /Users/anna/.rvm/rubies/ruby-1.9.3-p286/bin/ruby
  -b, [--builder=BUILDER]        # Path to a application builder (can be a filesystem path or URL)
  -m, [--template=TEMPLATE]      # Path to an application template (can be a filesystem path or URL)
      [--skip-gemfile]           # Don't create a Gemfile
      [--skip-bundle]            # Don't run bundle install
  -G, [--skip-git]               # Skip Git ignores and keeps
  -O, [--skip-active-record]     # Skip Active Record files
  -S, [--skip-sprockets]         # Skip Sprockets files
  -d, [--database=DATABASE]      # Preconfigure for selected database (options: mysql/oracle/postgresql/sqlite3/frontbase/ibm_db/sqlserver/jdbcmysql/jdbcsqlite3/jdbcpostgresql/jdbc)
                                 # Default: sqlite3
  -j, [--javascript=JAVASCRIPT]  # Preconfigure for selected JavaScript library
                                 # Default: jquery
  -J, [--skip-javascript]        # Skip JavaScript files
      [--dev]                    # Setup the application with Gemfile pointing to your Rails checkout
      [--edge]                   # Setup the application with Gemfile pointing to Rails repository
  -T, [--skip-test-unit]         # Skip Test::Unit files
      [--old-style-hash]         # Force using old style hash (:foo => 'bar') on Ruby >= 1.9

Runtime options:
  -f, [--force]    # Overwrite files that already exist
  -p, [--pretend]  # Run but do not make any changes
  -q, [--quiet]    # Suppress status output
  -s, [--skip]     # Skip files that already exist

Rails options:
  -h, [--help]     # Show this help message and quit
  -v, [--version]  # Show Rails version number and quit

Description:
    The 'rails new' command creates a new Rails application with a default
    directory structure and configuration at the path you specify.

    You can specify extra command-line arguments to be used every time
    'rails new' runs in the .railsrc configuration file in your home directory.

    Note that the arguments specified in the .railsrc file don't affect the
    defaults values shown above in this help message.

Example:
    rails new ~/Code/Ruby/weblog

    This generates a skeletal Rails installation in ~/Code/Ruby/weblog.
    See the README in the newly created application to get going. 
```

而且我不知道为什么，但是当我创建其他表时它正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:28:07.687

您应该从应用程序的正确 docroot（文件夹）中调用“rails”命令。

因此，如果您的应用程序存在，`/pub/www/mycoolapp/`您应该这样做：`cd /pub/www/mycoolapp/`并从那里运行 rails 命令

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-03T12:32:24.677

稍晚一点，但也许这是你们任何人都可能遇到的问题。

在您的应用程序根文件夹中运行此命令

```
bundle exec rake rails:update:bin 
```

并享受编码！

# javascript - 如何从外部 JSON 文件设置正确的日期？

> ID：15921950
> 
> 赞同：1
> 
> 时间：2013-04-10T09:27:01.633
> 
> 标签：javascript, d3.js, nvd3.js

我正在使用 nvd3，我对日期格式和显示有疑问。你可以在下面找到我的例子。

```
d3.json('jsonData.json', function(data) {

nv.addGraph(function() {    
    var chart = nv.models.lineChart()
        .margin({top: 30, right: 60, bottom: 50, left: 90})
        .color(d3.scale.category10().range());

    chart.xAxis.tickFormat(function(d) {
            var dx = data[0].values[d] && data[0].values[d].x || 0;
            return dx ? d3.time.format('%Y-%m-%e %X')(new Date(dx)) : '';
        });

    chart.yAxis
        .tickFormat(d3.format(',.1f')(d));

    d3.select('#chart1 svg')
        .datum(data)
        .transition().duration(500)
        .call(chart);

    //TODO: Figure out a good way to do this automatically
        nv.utils.windowResize(chart.update);
    //nv.utils.windowResize(function() { d3.select('#chart1 svg').call(chart) });

        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart;
  });
}); 
```

JSON 文件 jsonData 是这样构建的：

```
 [{ 
       "key":"Consumption", 
       "values":[ [2012-06-27 00:00:00 , 153580] , [2012-06-27 02:00:00 , 153590] , [...] , [...] , ... , [...] ]
    }] 
```

日期格式如下：“年-月-日时：分：秒”

问题是我无法显示任何内容...我知道在 Y 轴上显示消耗量在 X 轴上显示日期的图表缺少一些东西，但我找不到什么...

我尝试了很多方法来做到这一点，灵感来自 nvd3.org 的一些示例，但没有任何效果：/

感谢您的回答！

- - - - - - - - - - - - - - - - - - - - - - - - 编辑 - ----------------------------------

感谢 Andrew 和 George，感谢 nvd3.org 上提供的示例，我解决了我的问题。

我使用 PHP 脚本以时间戳（以毫秒为单位）正确格式化我的日期，并重新使用了示例“linePlusBarChart”。

毕竟，我的代码和我的 JSON 文件看起来像这样：

```
d3.json('jsonData.json', function(data) {

data.map(function(series) {
series.values = series.values.map(function(d) { return {x: d[0], y: d[1] } });
return series;
});

nv.addGraph(function() {    
    var chart = nv.models.lineChart()
        .margin({top: 30, right: 60, bottom: 50, left: 90})
        .x(function(d,i) { return i })
        .color(d3.scale.category10().range());

        chart.xAxis.tickFormat(function(d) {
            var dx = data[0].values[d] && data[0].values[d].x || 0;
            return dx ? d3.time.format('%X')(new Date(dx)) : '';
        });

    chart.yAxis
        .tickFormat(d3.format(',.1f'));

    d3.select('#chart1 svg')
        .datum(data)
        .transition().duration(500)
        .call(chart);

        nv.utils.windowResize(chart.update);

        chart.dispatch.on('stateChange', function(e) { nv.log('New State:', JSON.stringify(e)); });

    return chart;
   });
}); 
```

和 JSON 文件：

```
 [{
      "key":"Consommation", 
      "values":[[1340755200000 , 153580] , [1340762400000 , 153590] , 
                [1340769600000 , 153610] , [1340776800000 , 153650] , 
                [1340784000000 , 153680] , [1340791200000 , 153720] , 
                [1340798400000 , 153780] , [1340805600000 , 153830] , 
                [1340812800000 , 153880] , [1340820000000 , 153900] , 
                [1340827200000 , 153920] , [1340834400000 , 153930] , 
                [1343347200000 , 153940] 
               ]
     }] 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:49:14.080

考虑使用长毫秒在 JSON 中传递参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:45:11.130

使用D3 内置的[时间解析函数。](https://github.com/mbostock/d3/wiki/Time-Formatting#wiki-parse)

对于一个工作示例，看看 parseDate 变量是如何声明的，然后在[此图表中使用](http://bl.ocks.org/mbostock/3884955)

# php - PHP中的日期范围为月份

> ID：15921953
> 
> 赞同：0
> 
> 时间：2013-04-10T09:27:08.363
> 
> 标签：php, if-statement, operators

如果 MySQL 的日期 = 2013-12-25 & $daydiff = "anything"，我试图将我的输出设置为“未确认的日期”，如果 MySQL date = "NULL" & 和 $daydiff，则输出“不可用” =“任何东西”

我下面的代码似乎不起作用，有什么建议或替代方案吗？

```
$ArrivalDate == $variants_data['ArrivalDate'];

$daydiff=floor((abs(strtotime(date("Y-m-d")) - strtotime($ArrivalDate))/(60*60*24)));

if ( $daydiff == '%wildcard%' && $ArrivalDate == '2013-12-25') {
    $ETA ='Date Not Confirmed';
} 

elseif ( $daydiff == '%wildcard%' && $ArrivalDate == 'NULL') {
    $ETA ='Not available';
}

elseif ( $daydiff > 30 && $daydiff < 60 ) { // anything between 31 and 59 days is 1 month
    $ETA ='1 Month';
}

elseif ( $daydiff > 60 &&  $daydiff < 90  )  { // anything between 61 and 89 days is 2 months
    $ETA ='2 Months';
}

else
{
    $ETA ='';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:30:16.403

好吧，您在 if 子句中分配变量...单个“=”正在分配。我假设你想检查所以你需要 "==" :)

```
if (!empty($daydiff) &&  $ArrivalDate == '2013-12-25') {
   $ETA ='Date Not Confirmed';
} 

elseif (is_null($ArrivalDate) || $ArrivalDate == 'NULL') {
   $ETA ='Not available';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:30:57.777

你的输出是什么？总是“日期未确认”？

我猜是这样，因为“=”不比较字符串：

```
if ( $daydiff = '%wildcard%' && $ArrivalDate = '2013-12-25') {
    $ETA ='Date Not Confirmed';
} 
```

将会

```
if ( $daydiff == '%wildcard%' && $ArrivalDate == '2013-12-25') {
    $ETA ='Date Not Confirmed';
} 
```

但是，'%wildcard%' 不是什么东西，PHP 用'anything' 代替。那么，您的确切错误是什么？如果没关系， $daydiff 是什么，只需将其排除在您的条件之外。

# sql-server - SQL中CLR函数的性能和使用

> ID：15921956
> 
> 赞同：2
> 
> 时间：2013-04-10T09:27:22.640
> 
> 标签：sql-server, stored-procedures, user-defined-functions, sqlclr

SQL Server 允许您创建 CLR 函数、存储过程、用户类型和其他对象，以便在 SQL 中完成非常复杂的目的。

但是，有人可以在性能、优势等方面比较这两个东西：TSQL 对象和 CLR 对象。

使用 CLR 对象的真实情况是什么？

他们的使用是否有任何最佳实践建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T06:13:14.483

> > 使用 CLR 对象的真实情况是什么？

SQL Server 缺少聚合字符串连接函数。这种奇怪的疏忽导致了各种复杂的变通方法。

创建和使用自定义 CLR 聚合函数是解决此问题的一个干净的解决方案，实际上是 MSDN 文章中关于自定义聚合函数主题的参考示例：

[http://msdn.microsoft.com/en-us/library/ms131056.aspx](http://msdn.microsoft.com/en-us/library/ms131056.aspx)

> > 表现

有一篇 MSDN 文章至少提供了一个理论（无指标）概述：

[http://msdn.microsoft.com/en-us/library/ms131075.aspx](http://msdn.microsoft.com/en-us/library/ms131075.aspx)

这是来自 AboutSqlServer.com 的更实用的帖子（带有指标）：

[http://aboutsqlserver.com/2013/07/22/clr-vs-t-sql-performance-considerations/](http://aboutsqlserver.com/2013/07/22/clr-vs-t-sql-performance-considerations/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-16T19:21:38.843

这里有两个问题需要单独解决。

1.  在功能和好处方面，我写了一篇文章（关于 SQLCLR 主题的系列文章的一部分），该文章着眼于 SQLCLR 的哪些用途是“合适的”，主要是通过查看它可以做哪些其他方式无法做到的事情，或者不几乎一样容易。那篇文章是“ [Stairway to SQLCLR Level 1: What is SQLCLR?](http://www.sqlservercentral.com/articles/SQLCLR/104406/) ”（需要免费注册），它总结在对问题的评论中链接的问题的答案中，[SQL SERVER CLR 的优势](https://stackoverflow.com/questions/439859/advantage-of-sql-server-clr/24745564#24745564)。

2.  在性能方面，我在几年前（2011 年 7 月）发表了一项研究，详细介绍了各种场景并测试了原始 SQL、T-SQL 函数中的 SQL 以及基于 CLR 的函数中的算法。我测试了标量函数和表值函数。那篇文章是“ [CLR 性能测试](https://www.simple-talk.com/sql/t-sql-programming/clr-performance-testing/)”（无需注册）。请记住，测试是在 SQL Server 2008 上完成的，并且在 SQL Server 2012 中对基于 CLR 的确定性标量函数进行了性能改进。这意味着，如果不是更新版本，至少在 SQL Server 2012 上重新运行这些测试，CLR 函数的性能结果会更好。但是结论，即使在 SQL Server 2008 上*没有*有这些改进，是它取决于许多因素，有时 CLR 更快，有时 T-SQL 更快。但是，大多数情况下，可以用简单到适度的 T-SQL 作为查询的一部分表达的公式，而不是抽象为任一类型的函数，是迄今为止最快的。

# extjs - 使用 extjs 撕掉

> ID：15921959
> 
> 赞同：1
> 
> 时间：2013-04-10T09:27:31.953
> 
> 标签：extjs

我在我的项目中使用 ExtJs 4.2，但我遇到了一个要求。实际上，我们想要的是打开一个新窗口，它将从请求的位置复制小部件。我们可以使用 window.open() 打开它，但请建议我如何保持相同状态，例如父窗口小部件中存在的各种组件中的各种值等。此外，这个子窗口应该独立于应用程序。有什么办法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:50:35.373

看看[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.CookieProvider](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.state.CookieProvider) 和浏览器状态管理示例：[http ://docs.sencha.com/ext- js/4-1/#!/example/state/state.html](http://docs.sencha.com/ext-js/4-1/#!/example/state/state.html)

# php - ssh2_exec 不执行简单命令

> ID：15921960
> 
> 赞同：5
> 
> 时间：2013-04-10T09:27:35.830
> 
> 标签：php, windows, libssh2

我在`ssh_exec()`拒绝在 Windows 中执行命令时遇到了噩梦。
这是我的代码：

```
<?php       
$connection = ssh2_connect('localhost', 22);
ssh2_auth_none($connection, 'root');

$stream = ssh2_exec($connection, 'C:\Program Files\CCleaner\CCleaner.exe',FALSE);       
?> 
```

它向我显示以下警告：`Unable to request a channel from remote host in`. 如果您有任何提示，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-07T09:27:27.810

首先，您不太可能使用 连接到 Windows 服务器`ssh2_connect`，因为 SSH 不是通常用于连接到 Windows 的协议，也不是任何 Windows 安装中的可用项目。其次，确保您已经在 Windows 服务器上创建了用户“root”，因为默认情况下它不存在。

**或者** ，如果您实际上是*从*Windows 机器连接到 Unix/Linux 服务器，那么您尝试在其上运行 Windows 命令（'C:\Program Files\CCleaner\CCleaner.exe'）的事实将失败。您只能在存在的远程服务器上执行命令，任何以“C:\”开头的命令显然都会失败，因为 Linux 具有与 Windows 完全不同的文件系统结构。

因此，从上面的代码看来，您可能正在尝试使用用户名“root”连接到 Linux 服务器而没有密码（根据 PHP.net 手册（[ssh2_auth_none](http://php.net/manual/en/function.ssh2-auth-none.php)：

> 尝试通常会（并且应该）失败的“无”身份验证。

但是正如您所说，您正在尝试在 Windows 中执行命令，并且您正在使用主机名“localhost”连接到服务器 - 也许您实际上是在 Windows 上运行它，并且只是尝试使用 SSH 连接到 Windows 服务器- 这是没有意义的，因为上面显示的 PHP 代码已经在 Windows 服务器上执行，这使得 SSH 连接完全多余，除非尝试以提升的权限（作为“root”）执行命令。

如果您尝试以**管理员用户身份**使用 PHP 远程执行命令，这可能是个坏主意，那么您可以考虑将该[`function.exec.php`](http://php.net/manual/en/function.exec.php)命令与 Windows [runas 命令](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/runas.mspx?mfr=true)结合使用。或者您可以只以管理员身份运行您的 Web 服务器，这既容易做到又**对安全性非常不利**。

[通过在 Windows 上安装 SSH 服务器（Windows有哪些好的 SSH 服务器？](https://stackoverflow.com/questions/18292/what-are-some-good-ssh-servers-for-windows) ） ，您基本上可以实现上述目标- 之后您必须使用现有用户登录服务器，并使用该用户的密码（或创建用户“root”并使用它）。根据您的 SSH 服务器安装，运行该命令`C:\Program Files\CCleaner\CCleaner.exe`可以按照上述方式运行。

*   [Windows 是否有任何“sudo”命令？](https://superuser.com/questions/42537/is-there-any-sudo-command-for-windows)
*   [如何以管理员身份运行 PHP](http://forum.wampserver.com/read.php?2,119011,119088)

在 Linux 中有更多的例子来说明如何做到这一点，不同的方法有不同的优点和缺点。

*   [通过 PHP 执行 root 命令](https://stackoverflow.com/questions/8532304/execute-root-commands-via-php)
*   [如何以 root 身份运行 PHP exec()？](https://stackoverflow.com/questions/1598231/how-to-run-php-exec-as-root)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-28T01:11:38.930

```
<?php       
$connection = ssh2_connect('localhost', 22);
ssh2_auth_none($connection, 'root');

$stream = ssh2_exec($connection, 'C:\Program Files\CCleaner\CCleaner.exe', false);
stream_set_blocking ($stream, true); 
```

# jpa - 本机查询是否使用命名策略来解析给定 SQL 查询的“from”子句中的表名？

> ID：15921962
> 
> 赞同：0
> 
> 时间：2013-04-10T09:27:42.703
> 
> 标签：jpa

我有一个自定义命名策略，我在表名中添加前缀。我的问题是：当我创建本机查询（使用 EntityManager.createNativeQuery）时，我应该在查询的 FROM 子句中使用表的前缀名称还是应该使用非前缀名称（如在 JPQL 查询中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:30:09.270

原生查询是 SQL 查询，因此如果您直接通过 JDBC 输入数据存储区中将执行的内容，您可以输入该查询。与实体无关

# c# - 使用 Session 传递变量抛出异常

> ID：15921963
> 
> 赞同：0
> 
> 时间：2013-04-10T09:27:47.180
> 
> 标签：c#, asp.net, session

我有一张表格供客户填写，因此我决定将其制作为数字表格。我有三个页面subscriber_details、Package_Selection 和Bank_Details。当用户在第一个字段中填写了所有字段并单击下一步时，页面会进入下一个页面，直到所有三个字段都已填写完毕，当所有三个字段都填写完毕后，他们会直接进入最后一页，最后一次将所有详细信息呈现给他们，以便他们可以确保其正确...在我的subscriber_details.aspx 我有以下代码将他们的详细信息存储到会话中

```
protected void btnNext_Click(object sender, EventArgs e)
{
    Session["FullName"] = txtFullName.Text;

    if (txtCompanyName.Text == String.Empty)
        Session["CompanyName"] = "N/A";
    else
    Session["CompanyName"] = txtCompanyName.Text;

    if (txtVAT.Text == String.Empty)
        Session["VAT"] = "N/A";
    else
    Session["VAT"] = txtVAT.Text;

    Session["ContactNumber"] = txtContactNumber.Text;
    if (txtFax.Text == String.Empty)
        Session["Fax"] = "N/A";
    else
        Session["Fax"] = txtFax.Text;

    if (txtDistrict.Text == String.Empty)
        Session["District"] = "N/A";
    else
        Session["District"] = txtDistrict.Text;

    Session["City"] = txtCity.Text;
    Session["Street"] = txtStreet.Text;
    Session["Code"] = txtPostal.Text;

    if (txtTrading.Text == String.Empty)
        Session["Trading"] = "N/A";
    else
    Session["Trading"] = txtTrading.Text;

    Session["ID"] = txtID.Text;
    Session["ContactPerson"] = txtContactPerson.Text;

    if (txtEmail.Text == String.Empty)
        Session["Email"] = "N/A";
    else
    Session["Email"] = txtEmail.Text;
} 
```

然后在我的 final.aspx 上，我有以下代码来使用会话并替换标签中的文本

```
protected void Page_Load(object sender, EventArgs e)
{
    lblFullName.Text = Session["FullName"].ToString();
    lblCompanyName.Text = Session["CompanyName"].ToString();
    lblVat.Text = Session["VAT"].ToString();
    lblContactNumber.Text = Session["ContactNumber"].ToString();
    lblFax.Text = Session["Fax"].ToString();
    lblDistrict.Text = Session["District"].ToString();
    lblStreet.Text = Session["Street"].ToString();
    lblCity.Text = Session["City"].ToString();
    lblCode.Text = Session["Code"].ToString();
    lblTrading.Text = Session["Trading"].ToString();
    lblID.Text = Session["ID"].ToString();
    lblContactPerson.Text = Session["ContactPerson"].ToString();
    lblMail.Text = Session["Email"].ToString();

} 
```

出于某种原因，我收到“对象引用错误”，是因为我的 final.aspx 页面不是我的下一页，因为我必须先通过我的 package.aspx 和 bank_details.aspx？

我在没有 if 语句的会话上需要字段验证器，因此文本不会为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:30:05.370

您没有设置所有 Session 变量。例如，您没有设置`Session["Email"]`所以调用`lblMail.Text = Session["Email"].ToString();`将引发异常。

您应该填充所有要使用的 Session 变量，并在执行之前检查它们是否为空`.ToString()`。这应该更优雅地捕捉它。

# c# - SQL Server 使用 datetime2 查询今天的日期

> ID：15921964
> 
> 赞同：2
> 
> 时间：2013-04-10T09:27:49.413
> 
> 标签：c#, asp.net, sql, sql-server-2008, datetime2

我有一个 SQL Server 数据库，当我在屏幕上打开它时，我希望它只显示今天添加的记录。

我将日期存储在一个名为 DateAdded 的字段中，它是 DateTime2 数据类型。

我试过这个

```
string dateAdded = today.ToShortDateString();

string query = "SELECT CustomerID, Title, FirstName, LastName, AppStatus 
FROM Customer     
WHERE DateAdded ='" + dateAdded + "'"; 
```

这不会显示我认为的任何记录，因为它具有与日期一起存储的时间属性。

我在网上搜索试图找到答案，但似乎没有一个特定于今天添加的记录。

我还需要根据用户输入搜索日期范围，它可以在任何范围内，例如从 09/01/2013 到 18/03/2013 的查看记录。

为此编写sql查询的最佳方法是什么？

编辑 - 我的回答

卡尔给出的答案有效，但我不明白如何更改这些值，所以我可以有不同的日期范围。我虽然应该在这里发布我的最终结果，这是我根据收到的答案发布的，所以它可能会对其他人有所帮助。:)

```
using (SqlConnection conn = new SqlConnection(connectionString))
        {
            int year = date1.Year;
            int month = date1.Month;
            int day = date1.Day;

            string dateAdded = year + "-" + month + "-" + day + " ";

            int year2 = date2.Year;
            int month2 = date2.Month;
            int day2 = date2.Day;

            string dateAdded2 = year2 + "-" + month2 + "-" + day2 + " ";

            string query = "SELECT CustomerID, Title, FirstName, LastName, AppStatus, DateAdded FROM Customer WHERE DateAdded >= @date1 AND DateAdded <= @date2";

            using (SqlCommand cmd = new SqlCommand(query, conn))
            {
                cmd.Parameters.AddWithValue("date1", dateAdded + "00:00:00");
                cmd.Parameters.AddWithValue("date2", dateAdded2 + "23:59:59");
                SqlDataAdapter da = new SqlDataAdapter(cmd);
                da.Fill(holder);
            }
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T09:29:22.983

从 OP 的回复中，将 SQL 更改为

```
DECLARE @StartDate DATETIME2, @EndDate DATETIME2

SET @StartDate = DATEADD(day, DATEDIFF(day, 0, GETDATE()), 0)
SET @EndDate = DATEADD(day, DATEDIFF(day, 0, GETDATE()+1), 0)

SELECT CustomerID, Title, FirstName, LastName, AppStatus 
    FROM Customer     
    WHERE DateAdded >= @StartDate AND DateAdded < @EndDate 
```

这将获得当前日期的任何内容（您可以将 Getdate() 替换为您选择的日期以实现可重用性）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:34:24.597

这个怎么样：

```
var sqlCommand = new SqlCommand();
sqlCommand.CommandText = "SELECT CustomerID, Title, FirstName, LastName, AppStatus FROM Customer WHERE DateAdded >= @DateAdded";
sqlCommand.Parameters.AddWithValue("@DateAdded", DateTime.Today); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T09:45:21.430

试试你的 SQL 查询，如下所示。

**询问：**

```
string query = "SELECT CustomerID, Title, FirstName, LastName, AppStatus FROM Customer
WHERE CONVERT(VARCHAR(10), dateAdded, 101) = CONVERT(VARCHAR(10), @DateAdded, 101)"; 
```

**参数化命令：**

```
string dateAdded = today.ToShortDateString();
SqlCommand cmd = new SqlCommand();
cmd.CommandText = query ;
cmd.Parameters.AddWithValue("@DateAdded", dateAdded); 
```

# extjs4 - 如何将选项卡访问 [tabindex] 功能添加到 extjs4 的 tpl

> ID：15921965
> 
> 赞同：0
> 
> 时间：2013-04-10T09:27:49.737
> 
> 标签：extjs4, tabindex

我在 extjs4 工作。我有用于显示问题和多个选项的 tpl 视图 -

```
Ext.define('Balaee.view.qb.qbqns.QbqnsReview', {
    extend: 'Ext.view.View',
    id: 'qbqnsViewId',
    alias: 'widget.QbqnsReviewView',
    height: 500,
    store: 'qb.QbqnsStore',
    autoScroll: true,
    config: {
        tpl: '<tpl for=".">' +
            '<div id="main">' +
            '</br>' +

            '<h1 id="q">Question :-</h1> {question}</br>' +

            '<tpl for="options">' +
            '<tpl if="parent.Correctoption==optionId">' +
            '<p style="color:Green"><input type="radio" name="{option}">{option}</p>' +
            '<tpl elseif="parent.UsersOption==optionId">' +
            '<p style="color:Red"><input type="radio" name="{option}">{option}</p>' +
            '<tpl else>' +
            '<p><input type="radio" name="{optionId}" value="{option}">&nbsp{option}</p>' +
            '</tpl>' +
            '</tpl>' +
            '<p>---------------------------------------------------------</p>' +
            '</div>' +

            '</tpl>',
        itemSelector: 'div.main'
    }
}); 
```

它工作正常。它正确显示 20 个问题及其相关选项。我想给它添加 tabindex 属性。即，如果用户解决了问题并按下选项卡按钮，那么焦点应该转到下一个问题。那么如何在 extjs4 中向 tpl 添加选项卡访问功能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:22:37.997

您应该能够在模板中的元素上添加 tabindex 属性：http: [//www.w3schools.com/tags/att_global_tabindex.asp](http://www.w3schools.com/tags/att_global_tabindex.asp)

# django - django模板：访问项目根路径

> ID：15921966
> 
> 赞同：0
> 
> 时间：2013-04-10T09:27:52.850
> 
> 标签：django, templates, path, root

我想访问我的模板中的根路径变量，我该怎么做？到目前为止，我有：

```
{% if user.username == "" and request.path != "/login/" and request.path != "/"  %}
     <meta http-equiv="REFRESH" content="0;url=/login/">
{% else %} 
```

我想写这样的东西：

```
{% if user.username == "" and request.path != projectRoot+"/login/" and request.path != projectRoot  %}
     <meta http-equiv="REFRESH" content="0;url=projectRoot+/login/">
{% else %} 
```

我应该从我的视图中创建并发送这个 projectRoot 变量，还是已经有一个变量？

提前谢谢了，

罗曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:37:20.343

您可以使用获取 URl 的完整路径[`request.full_path`](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.get_full_path)并编写模板标记来检查它是否包含字符串，但这是尝试做您想做的事情的一种非常糟糕的方式（未经授权时重定向）。

相反，您[应该使用以下方式装饰您的视图`@login_required`](https://docs.djangoproject.com/en/dev/topics/auth/default/#the-login-required-decorator)：

```
from django.contrib.auth.decorators import login_required

@login_required
def my_view(request):
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:36:44.157

尽管我同意 Timmy 的观点，即您不应该尝试在模板中进行这种重定向，但请注意，有一种简单的方法可以获取视图的完整 URL：那就是使用`{% url %}`标记。该标签（以及`reverse`视图中的函数）知道您网站的完整路径，它从 WSGI 环境中获取，因此无需传递额外的变量。由于无论如何您都不应该对 URL 路径进行硬编码，因此使用它是一个全面的胜利。

# asp.net-mvc - MVC Razor 无会话身份验证和自定义用户

> ID：15921969
> 
> 赞同：0
> 
> 时间：2013-04-10T09:28:05.097
> 
> 标签：asp.net-mvc, razor, azure, forms-authentication

我一直在学习 MVC，并且正在研究无会话身份验证（以减少服务器压力/可扩展性，并且因为 AppFabric 缓存在 Azure 网站上托管会话的成本很高）。

我的用户信息存储在 SQL 中，每个用户都有一个部门、等级、角色和权限（角色/部门也有权限）。我在想我真正需要存储的只是他们在安全 cookie 中的 userId，如果它没有过期，请在 global.asax 中的每个请求中获取他们的其余信息。我会使用诸如[http://eversystems.eu/Document/15/Sessionless_Authentication_with_Encrypted_Tokens之类的方法来保护它](http://eversystems.eu/Document/15/Sessionless_Authentication_with_Encrypted_Tokens)

我最终想要的是在我的 ViewModel 中使用自定义字段注释它们的能力

```
[Authorize(Roles="Admin")] [Authorize(Dept="IT")] [Authorize(Rank="Manager")] 
```

或者在 Html 中说

```
@if(User.IsInDept("IT") 
```

或者

```
@if(User.HasRank("Manager")) 
```

我查看了扩展`FormsAthenticationTicket`等`Membership Provider / Roles`，`IPricipal`但`IIdentity`很难理解我将如何修改它们以实现我所追求的。我见过的例子有很多我不想要的额外膨胀，但我发现的最好的例子是@Ahmad Abu Raddad 在这里[ASP.NET MVC - Set custom IIdentity or IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)

如果有人能指出我是否朝着正确的方向前进或可能提出替代方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T18:28:49.000

只是想分享我是如何最终解决这个问题的。我最终只是简单地创建了一个自定义 IPrincipal 并公开了我的内部数据库类。

```
 interface ICustomPrincipal : IPrincipal
{
    //I pass the whole model across so if we update/modify in the future it will automatically populate the new items for the cookie
    user d { get; set; }
   //some other variables
} 
```

我在用户类中设置了大量方法，如 IsInRole()、isInDept()、HasRank()、HasPermission 等，它们在查询数据库后返回一个布尔值，这给了我所需的视图/控制器中的逻辑。

我创建了一个 BaseController 可以检索这个新的 CustomPrincipal

```
public class BaseController : Controller
{
    protected virtual new CustomPrincipal User
    {
        get { return HttpContext.User as CustomPrincipal; }
    }
} 
```

我还需要更新我的 WebViewPage，以便我可以在视图中检索我的新 CustomPrincipal。

```
public abstract class BaseViewPage : WebViewPage
{
    public virtual new CustomPrincipal User
    {
        get { return base.User as CustomPrincipal; }
    }

} 
```

并修改我的意见 web.config

```
<system.web.webPages.razor>
<host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
<pages pageBaseType="MyNameSpace.BaseViewPage">
  <namespaces>
    <add namespace="System.Web.Mvc" /> ..... 
```

如果有人觉得这很有用但需要更多信息，请私信我

# yii - 将附加参数传递给分页 url

> ID：15921970
> 
> 赞同：4
> 
> 时间：2013-04-10T09:28:05.347
> 
> 标签：yii

我使用 CArrayDataProvider 进行分页。现在只有页码在 url 中传递。我想传递更多的附加属性。我怎么做？这是我的数据提供者。

```
$dataProvider = new CArrayDataProvider($arrayData,  array(
                                'keyField'=>'entity_id',
                                'sort'=>array(
                                        'attributes'=>array('entity_id'),
                                        'defaultOrder'=>array('entity_id' => false),
                                ),
                                'pagination'=>array(
                                        'pageSize'=>20,
                                ),
        )); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T09:29:51.723

CPagination 需要参数。尝试添加`'params' => array('foo' => 'bar')`. `pagination`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-16T21:03:56.713

问题是如何传递“附加”参数。

接受答案的代码将覆盖您现有的 $_GET 参数：

```
 'params'  => array('foo' => 'bar') 
```

要添加“附加”参数，首先将它们添加到现有的 $_GET 参数中：

```
 $pagerparams = $_GET; 
    $pagerparams['foo'] = 'bar';

    $dataProvider = new CActiveDataProvider($this, array(
        'pagination'=>array(
            'params'  => $pagerparams,
        ),
        ...
    )); 
```

# c - 从文件中读取 IP 地址的最有效方法

> ID：15921971
> 
> 赞同：0
> 
> 时间：2013-04-10T09:28:05.863
> 
> 标签：c, linux, ip

我有许多（数百万）IP4 和 IP6 地址的文本文件。我需要尽快阅读所有这些。

我知道`inet_pton`但我不知道地址是 IP4 还是 IP6，所以我需要在尝试 IP4 的地方执行“尝试和错误”方法，如果失败，请尝试 IP6。但我不喜欢这个解决方案，因为当它是 IP6 时，我会不必要地解析 IP4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:36:04.413

我认为您需要做的就是解析当前行中的字符，直到您遇到非十进制数字（因为 IPv6 使用十六进制，而如果我们可以假设点分十进制，IPv4 通常不会）或冒号。

如果你点击一个点，你就知道该行是一个 IPv4 地址，否则它是 IPv6。

最多四个字节的额外解析应该*非常*快。

这是实现此分类功能的尝试：

```
int get_af(const char *address)
{
  while(isdigit((unsigned int) *address))
    ++address;
  if(*address == '.')
    return AF_INET;
  if(*address == ':' || isxdigit((unsigned int) *address))
    return AF_INET6;
  return -1;
} 
```

以上假设既不是`AF_INET`也不`AF_INET6`是-1，因为它用于错误报告。这可能需要调整。

# objective-c - 如何在 WebView（OSX 项目）中启动时加载 URL？

> ID：15921974
> 
> 赞同：6
> 
> 时间：2013-04-10T09:28:08.080
> 
> 标签：objective-c, macos, webview

我刚刚开始开发 Mac 应用程序，我希望在应用程序启动时 WebView 是一个 URL。这是我的代码：

**AppDelegate.h**

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> {
     WebView *myWebView;
    //other instance variables
}

@property

(retain, nonatomic) IBOutlet WebView *myWebView;

//other properties and methods

@end 
```

**AppDelegate.m**：

```
 #import "AppDelegate.h"
#import <WebKit/WebKit.h>

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    NSString *urlText = @"http://google.com";
    [[self.myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]];
    return;
    // Insert code here to initialize your application
}

@end 
```

如何在 WebView（OSX 项目）中启动时加载 URL？

我认为代码可以工作，但是当我尝试将代码与 Interface Builder 中的 WebView 连接时，我在插座列表中找不到“网络视图”。谢谢我在上一篇文章之后更新了我的代码，但仍然无法正常工作。再次感谢您的回复。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T09:41:09.493

您需要添加 WebKit 框架。![在此处输入图像描述](https://i.stack.imgur.com/FboCA.png)

```
#import <WebKit/WebKit.h> 
```

![在此处输入图像描述](https://i.stack.imgur.com/bowwk.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T10:22:05.603

很难确定这里的问题是什么，所以猜测......

您在 IB 中以哪种方式拖动连接？

要连接您想要从 Inspector 中显示的插座拖动到 Web 视图的插座：

![建立联系](https://i.stack.imgur.com/qDZVJ.png)

如果您以另一种方式拖动，从 web 视图到大纲中的 App Delegate，您正在尝试连接一个动作。

您的代码中也有问题，您的实例变量：

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
   WebView *myWebView;
   //other instance variables
} 
```

您的财产不会使用：

```
@property (retain, nonatomic) IBOutlet WebView *myWebView; 
```

由于您的属性是自动合成的，因此将创建一个实例变量`_myWebView`。您应该会看到一个编译器警告。

这反过来意味着声明：

```
[[myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]]; 
```

不会做你所期望的，因为`myWebView`将`nil`不会参考你的`WebView`. 您应该将该属性称为`self.myWebView`：

```
[[self.myWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlText]]]; 
```

通过这些更改，您应该会在 Web 视图中看到 Google。

高温高压

# threadpool - 复制到列表、池、线程集 (1:n) / 每个线程本地存储

> ID：15921976
> 
> 赞同：0
> 
> 时间：2013-04-10T09:28:15.490
> 
> 标签：threadpool, boost-thread

我目前正在探索 boost::thread/threadpool 和线程本地存储，基本上是为了实现一个数据报的副本到线程池的作业队列。

当前设置使用 1:1 设置使用自定义通知队列将松散耦合的一个数据报从一个线程复制到另一个线程。该队列确实支持多个阅读器线程，但每个阅读器都会使用该消息。

我目前正在探索通过 thread_local_storage 变体扩展队列，以将每个数据报复制到池中每个线程的作业队列中。

但我想知道 boost 是否已经支持这种操作，尽管我找不到任何东西。开箱即用的 boost 是否支持将单个副本复制到池中每个线程的本地存储？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:35:46.427

为什么要为每个线程提供一份数据副本？我能想到的唯一原因是，因为线程正在对其他线程不可见的数据进行更改。如果没有进行任何更改，只需将数据的引用（也称为指针）传递给每个线程。如果必须进行更改，也将引用传递给每个线程并让线程复制数据。如果需要释放数据，当不再使用时，使用共享指针。

线程本地存储主要用于模拟旧式静态变量。

# mysql - 如果我有多个答案，如何找到最大值

> ID：15921977
> 
> 赞同：0
> 
> 时间：2013-04-10T09:28:17.953
> 
> 标签：mysql, sql

我有一张桌子：

```
ID CLUSTERID
1     56
1     24
1     24
1      35
2      13
2      24 
```

现在，我想得到以下信息：我想计算每个 id，哪个集群 id 大部分时间重复。例如，在 ID=1 中，CLUSTERID=24 大部分时间重复在 ID=2 中，我有 2 个重复相同的 CLUSTER ID。所以在输出中我会有：

```
ID CLUSTERID
1   24
2   13
2  24 
```

我写（和工作）TT 的答案
是我的原始表，它有 2 列：ID 和 CLUSTER ID

SELECT t3.ID,t3.ClusterID,t3.ListingAmount
FROM
(SELECT ID, ClusterID, COUNT( *) AS ListingAmount
FROM tt
GROUP BY ID, ClusterID) AS t3 LEFT JOIN
(SELECT ID, MAX(ListingAmount) AS amount
FROM
(SELECT ID , ClusterID, COUNT(* ) AS ListingAmount
FROM tt
GROUP BY ID, ClusterID) AS t2
GROUP BY ID) AS BB ON BB.id=t3.id
WHERE BB.amount=t3.ListingAmount

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:58:22.437

现在想不出更优雅的解决方案（我敢肯定有），但它似乎可以完成这项工作：

```
select t1.id, 
       t1.clusterid,
       t1.cnt
from (
    select id, 
           clusterid, 
           count(*) as cnt
    from foo
    group by id, clusterid
) t1 
  join (select id, 
                max(cnt) as max_count
        from (       
            select id, 
                   clusterid, 
                   count(*) as cnt
            from foo
            group by id, clusterid
        ) tm
        group by id
  ) t2 on t1.id = t2.id 
      and t1.cnt = t2.max_count
order by t1.id, t1.cnt; 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!2/2cacc/3](http://sqlfiddle.com/#!2/2cacc/3)

# c# - IIS 配置：使用 SautinSoft.PdfVision 将页面转换为 PDF 时取消导航到网页

> ID：15921978
> 
> 赞同：1
> 
> 时间：2013-04-10T09:28:26.603
> 
> 标签：c#, asp.net, iis-7, pdf-generation

尝试使用 SautinSoft.PdfVision 将 ASP .Net 页面转换为 PDF 时遇到问题。使用这个库非常简单，您需要做的就是提供要转换的页面的 URL 和 PDF 目标路径。

SautinSoft.PdfVision v = new SautinSoft.PdfVision(); v.ConvertHtmlFileToPDFFile(url, pdfFilePath);

我没有将我要求的页面呈现为 PDF，而是总是说“导航到网页已取消”，好像 IIS（版本 7.5.7600.16385）正在系统地重定向我的请求。在我的开发环境（Visual Studio Express 2012 for web，版本 11.0.50727.1 RTMREL）中，我完全没有这个问题。Visual Studio 使用其自己的本地 Web 服务器，其配置是默认配置的，它的工作方式就像一个魅力。我在要转换的页面的 Page_Load 事件中添加了一些日志，并且可以肯定的是，在我的 prod 环境中，这个事件永远不会触发，因为我没有得到任何日志，这意味着页面永远不会被加载。在我的开发环境中，我的日志确实确认正在加载页面。

我已经阅读了很多关于这个“导航网页被取消”的问题，但我能找到的所有答案都是关于客户端配置、IE 中的信任级别。我正在使用 Chrome，无论我是在调试还是访问 prod 服务器，它的设置都是相同的。所以我的直觉告诉我服务器端出了点问题。

那么你们中的任何人都知道一些可以解决我的问题的 IIS 配置吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T10:26:27.783

我在使用 sautinsoft PDFVision 时也遇到了类似的问题

解决方案：

> 在 iis 中选择您的网站---> 转到 ssl 设置 --> 客户端证书 --> 忽略

这对我有用

如果上述方法无效，其他机会：

> 转到应用程序池--> 高级设置--> loaduserprofile=true

# google-maps - 谷歌地图 - 使用网站上的地址显示地图

> ID：15921983
> 
> 赞同：0
> 
> 时间：2013-04-10T09:28:42.400
> 
> 标签：google-maps, geo

我有非工作谷歌地图。可能是什么问题？

获取地理坐标的代码：

```
$gmap = file_get_contents ("http://maps.google.com/maps/geo?q=". urlencode($row['gps']));
$json = json_decode ($gmap);
$suradnice = $json->Placemark[0]->Point->coordinates;
$gps = $s[1] .",". $s[0]; 
```

嵌入代码：

```
<iframe width='295' height='360' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='http://maps.google.com/?q={$gps}&amp;ie=UTF8&amp;t=h&amp;z=12&amp;vpsrc=0&amp;ll={$gps}&amp;output=embed'></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T18:47:55.913

我相信您想使用此版本的 Google API 作为 $file_get_contents 的参数，其中 $lat 和 $lng 是纬度和经度。

" [http://maps.googleapis.com/maps/api/geocode/json?latlng=](http://maps.googleapis.com/maps/api/geocode/json?latlng=) $lat,$lng&sensor=false"

如果您使用的是地址，请执行以下操作：

“ [http://maps.googleapis.com/maps/api/geocode/json?address=](http://maps.googleapis.com/maps/api/geocode/json?address=) $addr&sensor=false”

您可以在此处找到文档： [https ://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:51:32.283

这个过程称为“地理编码”。[这是谷歌的API](https://developers.google.com/maps/documentation/javascript/v2/services#Geocoding)

# watir - 如何在使用 WATIR 时检查以下事项 1] 处理时 Internet 连接失败 2] 网站页面无法访问

> ID：15921985
> 
> 赞同：0
> 
> 时间：2013-04-10T09:28:48.120
> 
> 标签：watir

如何在使用 WATIR 时检查以下事项 1] 处理时 Internet 连接失败 2] 网站页面无法访问

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:03:27.743

Watir 驱动网络浏览器，浏览器本身实际上无法知道系统是否有正确的网络连接，或者即使有，也无法知道该网络是否连接到互联网。OTOH 它确实倾向于知道它是否找不到请求的网页

你能做的最好的事情是使用像 chrome 这样的浏览器，它往往会有响应，你可以在 dom 中查找表明浏览器找不到站点的特定文本。如果在尝试连接到 google.com 等知名的高可用性站点时发生这种情况，那么很可能您没有有效的网络连接

另一种选择可能是使用 HTTPARTY 或 REST-Client 之类的库，它可以让您构造一个 http 请求，然后检查结果以查看结果代码是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:20:29.497

```
require 'open-uri'

def internet_connection_check
  begin
    true if open("http://www.facebook.com/")
  rescue
    false
  end
end 
```

试一试会奏效

# spring - 具有字节范围参数/ MessageContext 的 Apache CXF REST 服务

> ID：15921989
> 
> 赞同：1
> 
> 时间：2013-04-10T09:29:06.407
> 
> 标签：spring, rest, cxf

好吧，不知何故我觉得很愚蠢，一定有一些明显的东西我错过了......

我正在将 Apache CXF (2.7.x) 用于包含检索一些视频数据的方法的宁静服务。一些客户端需要能够处理字节范围的请求。我需要知道的第一件事是客户端实际请求的字节范围，所以我想我会看看 http 标头。据我了解，我需要做的就是将 MessageContext 作为资源放在我的服务类中：

```
@Resource
MessageContext ctx; 
```

问题是，这失败了，因为没有这样的 bean：

```
Injection of resource dependencies failed; nested exception is
org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No matching bean of type [org.apache.cxf.jaxrs.ext.MessageContext] found for dependency 
```

在我的春季配置中，我有这些包括：

```
<import resource="classpath:META-INF/cxf/cxf.xml"/>
<import resource="classpath:META-INF/cxf/cxf-servlet.xml"/> 
```

在某处我读到不再需要 cxf-extension-jaxrs-binding.xml ，据我所知，这个文件甚至不存在于我的依赖项中的任何地方。

那么我在这里错过了什么？还是有另一种支持字节范围请求的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:50:29.280

好的，解决了

```
MessageContext ctx = new MessageContextImpl(PhaseInterceptorChain.getCurrentMessage()); 
```

我不确定这是否是一个好的解决方案，但它确实有效。

# java - 如何生成许可证文件

> ID：15921991
> 
> 赞同：1
> 
> 时间：2013-04-10T09:29:10.663
> 
> 标签：java, security, cryptography

我们正在制作一个用 Java 编写的产品。我们需要生成一个许可证来阻止客户在多台计算机上使用它。

我的问题很简单：我需要为产品生成一个许可文件。我想知道文件应该是怎样的，它是 MAC 地址、主机 ID 的组合还是应该怎样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:52:46.443

其他人，尤其是链接的 QA，给出了很好的答案。我要补充的是，许多版权执法团体正在转向在其内容中添加可追溯的“水印”，并简单地起诉侵权团体。如果操作正确，这种方法的优点是不会惹恼合法用户。他们甚至没有注意到你在做什么。

但是，这只是惩罚盗窃或收回成本的一种方式：您不会阻止坚定的软件盗版者使用软件技巧窃取您的东西。您必须在专用的防篡改设备上运行该软件。我怀疑很多用户会为此付费。;)

# php - PHP strpos() 只查找单个字符，而不是整个字符串

> ID：15921994
> 
> 赞同：1
> 
> 时间：2013-04-10T09:29:12.673
> 
> 标签：php, strpos

我有一个奇怪的问题...

我想在日志文件中搜索。

```
$lines = file($file);

$sampleName = "T3173sGas";

foreach ($lines as &$line) {

if (strpos($line, $sampleName) !== false) {
echo "yes";
  }
} 
```

此代码不起作用，`$sampleName`是`100%`在日志文件中。搜索仅适用于单个字符；例如`"T"`or`"3"`但不是 for `"T3"`。

你知道为什么它不起作用吗？日志文件的编码是否错误？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:31:32.080

如果您只能找到单个字符，我会假设您的日志文件位于一些多字节字符集中，例如 UTF-16。正如您已经假设的类似，下一步是参考您尝试操作的日志文件的文档/规范，了解字符编码。

然后，您可以使用字符编码特定的字符串函数，该包称为[http://php.net/mbstring](http://php.net/mbstring)。

```
$encoding = ... ; // encoding of logfile

if (mb_strpos($line, $sampleName, 0, $encoding) !== false) {
    echo "yes";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:39:01.350

这可能有效，它搜索整个字符串

```
<?php
$filename = 'test.php';
$file = file_get_contents($filename);
$sampleName = "T3173sGas";
if(strlen(strstr($file,$sampleName))>0)
{
echo "yes"; 
}
?> 
```

# ember.js - Ember-Router：如何在 Ember 1.0-rc2 的运行时添加路由？

> ID：15921997
> 
> 赞同：5
> 
> 时间：2013-04-10T09:29:19.853
> 
> 标签：ember.js, ember-router

在Ember 1.0-rc2 附带的*新版本中，是否可以在运行时添加路由？* `Ember.Router`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T21:00:03.780

目前没有支持的方法来执行此操作。该`App.Router.map`调用由此代码的第 235-247 行处理：[https ://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/system/router.js](https://github.com/emberjs/ember.js/blob/master/packages/ember-routing/lib/system/router.js)

```
Ember.Router.reopenClass({
    map: function(callback) {
        var router = this.router = new Router();

        var dsl = Ember.RouterDSL.map(function() {
          this.resource('application', { path: "/" }, function() {
             callback.call(this);
          }) 
        });

        router.map(dsl.generate());
        return router;
    } 
```

每次调用时，地图都会被覆盖，因为上一次调用`Router.map`的回调`Router.map`不会持久化。

**编辑** 无论好坏，我都有一个拉取请求来改变行为以允许多次调用`App.Router.map`. 我们会看看会发生什么。你可以关注这里[https://github.com/emberjs/ember.js/pull/2485](https://github.com/emberjs/ember.js/pull/2485)

**另一个编辑**

我已经写了一个要点来完成我的拉取请求在用户空间中所做的事情。这将允许您在运行时映射路线。只需添加此代码，然后将您的调用替换为`App.Router.map`我定义的方法

[https://gist.github.com/grep-awesome/5406461](https://gist.github.com/grep-awesome/5406461)

**答案更改编辑**

从这个拉取请求开始，您现在可以`map`多次调用。[https://github.com/emberjs/ember.js/pull/2892](https://github.com/emberjs/ember.js/pull/2892)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T16:11:53.460

I see that wmarbut's answer hasn't been accepted, but it is a good one (for me). It seems that his patch is on its way into the Ember release, but until then this is some code that uses his patch. (Don't accept my answer, I'm just happy to have found this.) I'm planning to use it as part of a solution to let content drive navigation. Good question, user1517325 and **thanks, wmarbut!**

```
 // was an all-in-one router map as Ember likes it
  // App.Router.map(function() {
  //   this.resource("foods", function(){
  //     this.route("index", {path: "/"});
  //   });
  //   this.route("fourOhFour", { path: "*:"});
  // });

  //wmarbut's workaround until his patch is applied
  App.map_routes = [];

  App.MapRoutes = function(routes) {
      App.map_routes.push(routes);
      return App.Router.map(function() {
        var route_lamda, _i, _len, _ref;
        _ref = App.map_routes;
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          route_lamda = _ref[_i];
          route_lamda.call(this);
        }
        return true;
      });
  };

  //partial mapping
  App.MapRoutes(function() {
    this.resource("foods", function(){
    });
  });

  //some more mapping
  App.MapRoutes(function() {
    this.resource("foods", function(){
      this.route("index", {path: "/"});
    });
  });

  //even more mapping
  App.MapRoutes(function() {
    this.route("fourOhFour", { path: "*:"});
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T21:04:59.453

在最新版本的 ember.js **rc7 中**，它被添加`Router.map`到允许多次调用它而不覆盖地图的功能。这将允许在运行时添加路由。

希望能帮助到你。