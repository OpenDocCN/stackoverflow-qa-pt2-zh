# StackOverflow 问答 14786000-14786999

# opencl - 函数 clbuildprogram 中的错误...（它返回 -11）

> ID：14786000
> 
> 赞同：0
> 
> 时间：2013-02-09T07:37:42.357
> 
> 标签：opencl

我创建了一个冒泡排序代码。用户函数 createProgram 中的 clbuildprogram 出现错误我的内核如下所示：

```
__kernel void sort_kernel(__global const float *a, __global const float *b)
{
    const int n=100;
    int j;
    float temp;
    int gid = get_global_id(0);
    b[gid]=a[gid];

    for(j=0; j < n-gid; j++)
    {
        if(b[j+1]<b[j])
        {
            temp=b[j];
            b[j]=b[j+1];
            b[j+1]=temp;
        }
    }
} 
```

clbuildprogram 根据运行时错误给出错误。

> ***内核错误：：1：1：错误：未知类型名称'_kernel'
> 
> _kernel void sort_kernel(__global const float *a, __global const float *b) //, ^
> 
> :1:9: 错误：预期标识符或 '(' _kernel void sort_kernel(__global const float *a, __global const float *b) //, ^
> 
> :21:3: 错误：预期的外部声明 } ^
> 
> :23:1: 错误：预期的外部声明 } ^
> 
> :23:1: 错误：预期的外部声明***

请告诉我错误是什么，我该如何纠正它......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:56:06.763

You missed a `_` in your program. The error is obvious.I dont think the code pasted here is the same as you run. Correct your `_kernel` to `__kernel` in your program.

# asp.net - 如何创建与stackoverflow相同的论坛的标签功能？

> ID：14786004
> 
> 赞同：1
> 
> 时间：2013-02-09T07:38:33.943
> 
> 标签：asp.net, ajax, jquery

我正在从草图在 asp.net 中创建一个论坛。每件事都以正确的方式完成，但我陷入了论坛的“标签”功能。我已经完成了“标签”功能的数据库内容。我只想要与 StackOverflow 使用的功能相同的功能。当我们在 stackoverflow 中询问任何问题时，它会询问“标签”，当我们在此文本框中键入时，它会从数据库中获取查找标签。我想知道他们在文本框中使用哪个控件来删除标记功能（十字或“x”符号）、标记列表、逗号和空格分隔符。我认为这将是一些 ajax 控件或 Jquery，但我不确定. 我想再次重申，我对数据库表的事情都很清楚。

请用你的知识指导我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T07:49:42.533

希望这会有所帮助：

`**[LIVE DEMO - CREATE TAGS](http://jsbin.com/iyomus/6/edit)**`
`**[LIVE DEMO - CREATED TAGS ANIMATIONS](http://jsbin.com/ihuhip/1/edit)**`

*在这里看看我的答案：*
[如何制作标签文本框](https://stackoverflow.com/questions/13383634/how-to-make-tag-text-box)
[StackOverflow 为标签弹出使用什么类型的动画？](https://stackoverflow.com/questions/14200320/what-type-of-animation-does-stackoverflow-use-for-tag-popup)

# php - htaccess 本地主机上错误文档的不同路径

> ID：14786007
> 
> 赞同：2
> 
> 时间：2013-02-09T07:38:55.827
> 
> 标签：php, .htaccess, errordocument

我在为自定义错误页面编辑 .htaccess 文件时遇到问题。

在实时服务器上，这工作正常。

```
ErrorDocument 400 /error.php?e=400
ErrorDocument 401 /error.php?e=401
ErrorDocument 403 /error.php?e=403
ErrorDocument 404 /error.php?e=404
ErrorDocument 500 /error.php?e=500 
```

但是在我的本地主机（WAMP）上，我的站点位于 www 目录下名为 sms 的文件夹中。所以我必须修改代码

```
ErrorDocument 400 /sms/error.php?e=400
ErrorDocument 401 /sms/error.php?e=401
....and so on for all files 
```

有没有一种简单的方法来处理这种情况，这样我就不必每次都编辑这些行...谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-31T20:22:58.163

当天可能有点晚，但我遇到了类似的问题并解决了它。

罪魁祸首是`DocumentRoot`设置（在 Apache 配置中）。它必须指向您的站点驻留在本地和远程计算机上的文件夹。显然在你的情况下它不是。

*如果（例如）您的站点位于本地和远程计算机上的sms*目录中，并且在这两种情况下，目录本身都位于默认文档根目录中，您可能会收到此类错误。导致错误的原因是，在配置虚拟主机时，默认根目录通常会在服务器上被覆盖。

它可能看起来像这样：

```
<VirtualHost *:80>
  ServerName yourdomain.com
  DocumentRoot /var/www/html/sms
</VirtualHost> 
```

在这种情况下，默认文档根目录已从默认*/var/www/html*更改为*/var/www/html/sms*，而在您的本地计算机`DocumentRoot`上仍设置为默认值（无论它在 WAMP 中是什么）。

作为一种解决方案，您可以在本地计算机上创建一个具有自定义文档根目录（指向*sms*目录）的虚拟主机。这可以通过编辑*httpd-vhosts.conf*文件来完成（在这种情况下，您还应该编辑您机器上的*hosts*文件）。但是，如果您只有一个站点，则更改*httpd.conf*`DocumentRoot`中的默认设置使其指向*sms*目录会更简单。

# c++ - 函数模板特化和 Abrahams/Dimov 示例

> ID：14786008
> 
> 赞同：6
> 
> 时间：2013-02-09T07:39:00.553
> 
> 标签：c++, template-specialization, function-templates

（我假设了解此问题中的[Abrahams/Dimov 示例](http://www.gotw.ca/publications/mill17.htm)。）

假设在这样的标头中有一些第 3 方代码，您无法修改：

```
template<class T> void f(T);    // (1) base template 1
template<class T> void f(T *);  // (2) base template 2
template<> void f<>(int *);     // (3) specialization of (2) 
```

问题是：

如果我已按原样获得上述声明，我现在*是否可以*`T = int *`针对（例如）的情况专门化基本模板 1 ？

或者仅仅声明基本模板 2 是否意味着基本模板 1 不能再被专门化（至少对于指针而言）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-27T07:16:13.570

您可以通过在函数名称后的尖括号中显式指定模板参数来重载 (1)（参见 C++11-Standard 14.7.3）

```
#include <iostream>
using namespace std;
template<class T> void f(T)    // (1) base template 1
{
    cout << "template<class T> void f(T)" << endl;
}

template<class T> void f(T *)  // (2) base template 2
{
    cout << "template<class T> void f(T *)" << endl;
}
//template<> void f<>(int *);     // (3) specialization of (2)

template<> void f<int*>(int *)     // (4) specialization of (1)
{
    cout << "f<int*>(int *)" << endl;
}

int main() {
    int i;
    f(&i); // calls (2) since only base-templates take part in overload resolution
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T07:44:36.427

您可以随时尝试然后来找我们。但我不明白为什么它不起作用。如果`T = int*`它会按您的意愿工作。因此没有 2 将是`int* *`

# java - 以字节数组形式从 JPEG 获取元数据

> ID：14786010
> 
> 赞同：1
> 
> 时间：2013-02-09T07:39:09.993
> 
> 标签：java, image, metadata, byte, jpeg

我有一个字节数组形式的 jpeg 图像。如何以可以剥离元数据的注释节点的形式获取字节数组？

```
byte[] myimagedata = ...

ImageWriter writer = ImageIO.getImageWritersBySuffix("jpeg").next();
ImageReader reader = ImageIO.getImageReader(writer);

//Looking for file here but have byte array
reader.setInput(new FileImageInputStream(new File(Byte array cant go here)));

IIOMetadata imageMetadata = reader.getImageMetadata(0);
Element tree = (Element)   imageMetadata.getAsTree("javax_imageio_jpeg_image_1.0");
NodeList comNL = tree.getElementsByTagName("com");
IIOMetadataNode comNode;
if (comNL.getLength() == 0) {
    comNode = new IIOMetadataNode("com");
    Node markerSequenceNode = tree.getElementsByTagName("markerSequence").item(0);
    markerSequenceNode.insertBefore(comNode,markerSequenceNode.getFirstChild());
} else {
    comNode = (IIOMetadataNode) comNL.item(0);          
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T09:43:06.737

您似乎（只是）询问如何创建[`ImageInputStream`](http://docs.oracle.com/javase/7/docs/api/javax/imageio/stream/ImageInputStream.html)从字节数组读取的。通过阅读 javadocs，我认为这应该有效：

```
new MemoryCacheImageInputStream(new ByteArrayInputStream(myimagedata)) 
```

该类`FileImageInputStream`没有允许您从文件系统中的文件以外的任何内容读取的构造函数。

这`FileCacheImageInputStream`也是一种选择，但它涉及在文件系统中提供一个目录以用于临时缓存......在这种情况下这似乎是不可取的。

# php - HTML 错误：显示内联块，而不是内联？

> ID：14786012
> 
> 赞同：0
> 
> 时间：2013-02-09T07:39:34.707
> 
> 标签：php, javascript, jquery, html, css

我正在尝试为我的学校制作一个网站，并且我正在努力获得一个有内容区域和侧边栏的区域。正如您在此处看到的：lrch.harrisonbh.com，我希望“Header 1”的顶部与“Sidebar”的顶部相匹配。我在这里把css放在一个jsFiddle上：http: [//jsfiddle.net/GHpux/](http://jsfiddle.net/GHpux/)

我在这里使用css代码：

```
div.body{
    width: 1047px;
    margin-top: 210px;
    margin-left: auto;
    margin-right: auto;
    z-index: 1;
}

div.content{
    background-color: #dbdbdb;
    width: 750px;
    max-width: 750px;
    float: left;
    padding: 15px;
    margin-right: 15px;
    z-index: 1;

    display: inline-block;
}

div.sidebar{
    background-color: #dbdbdb;
    width: 215px;
    float: right;
    position: absolute;
    padding: 15px;
    display: inline-block;

} 
```

但是正如您在 jsFiddle 或我的网站上看到的那样，我得到了 div 不匹配的不良影响。我想知道这有什么问题？谢谢。我已经尝试了很多东西。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T07:42:33.393

不错的网站，顺便说一句。抱歉，我没有看到问题。修复方法是：

您需要删除`<br />`.`.sidebar`

请参阅屏幕截图。

![前](../Images/7cae6dd078b8b4ec7502d4fbf30c4545.png)

删除它使它看起来像这样：

![后](../Images/359e9388ac031c9b4a213ec591444ecc.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T07:46:25.443

删除`<br>`之前的侧边栏，从侧边栏中删除`position:absolute`和`float:right`添加`vertical-align:top`到侧边栏和内容。

[http://jsfiddle.net/GHpux/1/](http://jsfiddle.net/GHpux/1/)

# java - 为什么Java中Integer类的2个对象不能相等

> ID：14786014
> 
> 赞同：6
> 
> 时间：2013-02-09T07:39:59.057
> 
> 标签：java, class, object, integer, increment

我的代码是：

```
public class Box
{
  public static void main(String[] args)
  {
     Integer z = new Integer(43);
     z++;

     Integer h = new Integer(44);

     System.out.println("z == h -> " + (h == z ));
  }
} 
```

输出：-

```
z == h -> false 
```

为什么当两个对象的值相等时输出为假？

有没有其他方法可以使对象相等？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T07:41:42.160

否。使用`h.equals(z)`而不是`h == z`获得您期望的平等行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T07:48:41.877

`h == z`仅当您通过自动装箱（即`Integer a = 43`）分配值并且该值介于 -128 和 127（缓存值）之间时才有效，即：

```
 Integer a = 44;
 Integer b = 44;

 System.out.println("a == b -> " + (a == b)); 
```

**输出：**

```
a == b -> true 
```

* * *

如果值超出范围`[-128, 127]`，则返回`false`

```
 Integer a = 1000;
 Integer b = 1000;

 System.out.println("a == b -> " + (a == b)); 
```

**输出：**

```
a == b -> false 
```

* * *

但是，比较两个对象的正确方法是使用`Integer.equals()`方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T07:41:19.460

`Integer`是对象不是原始的（int）并且对象相等性与`equals`方法进行比较。

当您这样做时，除非它检查两个引用（z & h）是否引用相同的引用，否则它`z == h`不会将其拆箱。`int``Integer`

正如它在[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#equals%28java.lang.Object%29)中得出的那样-

> 当且仅当参数不为 null 并且是包含与此对象相同的 int 值的 Integer 对象时，结果才为真。

```
System.out.println("z == h -> " + h.equals( z)); 
```

它将打印`true`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T07:45:24.380

整数是一个对象，而不是一个基元。如果 z & h 是原语， == 就可以了。在处理对象时，== 运算符不检查相等性；它检查两个引用是否指向同一个对象。

因此，使用`z.equals(h);`或`h.equals(z);`这些应该返回 true。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T08:03:38.807

您正在尝试比较两个不同的对象而不是它们的值。z 和 h 指向两个不同的 Integer 对象，它们具有相同的值。

```
z == h 
```

将检查两个对象是否相等。所以它会返回false。

如果要比较 Integer 对象使用`equals`方法存储的值。

* * *

```
Integer z = new Integer(43);   // Object1  is created with value as 43.
z++;                           // Now object1 holds 44.

Integer h = new Integer(44); // Object2 is created with value as 44. 
```

所以最后我们有两个不同的整数对象，即object1和object2，值为44。现在

```
z = h 
```

这将检查 z 和 h 指向的对象是否相同。即`object1 == object2` 这是错误的。如果你这样做

```
Integer z = new Integer(43);   // Object1  is created with value as 43.
z++;                           // Now object1 holds 44\. Z pointing to Object1

Integer h = z;                 // Now h is pointing to same object as z. 
```

现在

```
z == h 
```

将返回真。

这可能会有所帮助[http://www.programmerinterview.com/index.php/java-questions/java-whats-the-difference-between-equals-and/](http://www.programmerinterview.com/index.php/java-questions/java-whats-the-difference-between-equals-and/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-09T08:09:00.570

阅读：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)

整数是对象，您比较对象的地址/引用/指针而不是值。

```
Integer a = Integer(1);
Integer b = Integer(1);

a == b; // false
a.compareTo(b); // true 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-09T07:43:44.050

检查以确保您可以在 Integer 对象上使用 z++。

# jasper-reports - JasperServer 的实时警报

> ID：14786022
> 
> 赞同：0
> 
> 时间：2013-02-09T07:41:18.213
> 
> 标签：jasper-reports, real-time, jasperserver

我有两个日期输入如下，并想为此设置警报

![在此处输入图像描述](../Images/eb647c63a26683e225803e753b783399.png)

警报：- 如果 StartDate 和 EndDate 之间的差异超过 6 个月，它必须生成警报/提示面板，显示文本“月期间超过 6”，

& 报告不应继续进行，直到 & 除非用户选择六个月之间的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:38:29.180

据我所知，您无法在 JaperReports Server 中按原样配置它，您需要围绕导入控件验证实现一些逻辑，考虑到输入控件呈现基于单个模板和大量配置的事实，这可能相当复杂。

但是，您可以在报告本身中轻松实现所需的验证：

*   创建另一个参数`datediff`，其中包含作为默认表达式的以月为单位的日期差异的计算（该参数需要在 2 个日期参数下方指定）

现在使用此信息的方式取决于您的特定报告设计，这里是一个示例：

*   使用 where 子句扩展您的报告查询`and 6>=$P{datediff}`。如果日期差异小于或等于 6 个月，这只会返回结果
*   将`no data`乐队添加到您的报告中并在那里添加所需的错误消息。
*   将您的报告配置修改为`when no data`to `no data section`。
*   将您的报告重新部署到 JasperReports 服务器。

现在可以使用所需的行为。

# multithreading - 在 MVC 4 异步 ApiController 中使用 Task.Factory.StartNew？

> ID：14786036
> 
> 赞同：5
> 
> 时间：2013-02-09T07:42:52.707
> 
> 标签：multithreading, c#-4.0, asynchronous, asp.net-mvc-4, asp.net-web-api

我正在使用 MVC4 ApiController 将数据上传到 Azure Blob。这是示例代码：

```
public Task PostAsync(int id)
{
    return Task.Factory.StartNew(() => 
    {
        // CloudBlob.UploadFromStream(stream);
    });
} 
```

这段代码是否有意义？我认为 ASP.NET 已经在工作线程中处理请求，因此在另一个线程中运行 UploadFromStream 似乎没有意义，因为它现在使用两个线程来运行此方法（我假设原始工作线程正在等待这个 UploadFromStream完成？）

所以我的理解是，只有当我们使用一些内置的异步方法（例如 HttpClient.GetAsync 或 SqlCommand.ExecuteReaderAsync）时，异步 ApiController 才有意义。这些方法可能在内部使用 I/O 完成端口，因此它可以在执行实际工作时释放线程。所以我应该把代码改成这个？

```
public Task PostAsync(int id)
{
    // only to show it's using the proper async version of the method.
    return TaskFactory.FromAsync(BeginUploadFromStream, EndUploadFromStream...)
} 
```

另一方面，如果 Post 方法中的所有工作都是 CPU/内存密集型的，那么异步版本 PostAsync 将无助于请求的吞吐量。使用常规的“public void Post(int id)”方法可能会更好，对吧？

我知道这是很多问题。希望它能阐明我对 ASP.NET MVC 中异步使用的理解。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:04:26.970

是的，你说的大部分是正确的。甚至包括完成端口等细节。

这是一个小错误：

> 我假设原来的工作线程正在等待这个 UploadFromStream 完成？

只有您的任务线程正在运行。毕竟，您正在使用异步管道。它不等待任务完成，它只是连接一个延续。（就像 HttpClient.GetAsync 一样）。

# html - 文本输入/文本框填充

> ID：14786037
> 
> 赞同：0
> 
> 时间：2013-02-09T07:43:10.640
> 
> 标签：html, css, textbox, internet-explorer-9, padding

```
<!DOCTYPE html>
<html>
<style>
.txtinput
{
    padding-top: 0px;
    padding-right: 50px;
    padding-bottom: 0px;
    padding-left: 5px;
}
</style>
<body>
First name: <input type="text" name="FirstName" value="Mickey" class='txtinput'><br>
</body>
</html> 
```

当我在 IE9 的文本框中继续输入文本时，它会一直到最后并根据 padding-right 重新调整。我怎样才能让它停止到最后，就在填充之前停止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:43:56.750

您是否试图限制可以在文本框中添加多少个字符？如果是这样，那么您需要设置 maxLength 属性。如果您只关心希望框在屏幕上显示多大，那么您需要设置 size 属性。就像说您希望该框显示 50 个字符，最大输入为 100 个字符，那么您只需在输入标签中设置这些属性，如下所示：

```
First name: <input type="text" size="50" maxLength="100" name="FirstName" value="Mickey" class="txtinput"> 
```

如果您将 maxLength 设置为小于大小，您将拥有一个只能填充到一定数量（maxLength）的文本框，我认为这可能是您正在寻找的。像这样的东西：

```
First name: <input type="text" size="50" maxLength="25" name="FirstName" value="Mickey" class="txtinput"> 
```

# c# - 在excel第二张表中创建图表

> ID：14786039
> 
> 赞同：1
> 
> 时间：2013-02-09T07:44:10.520
> 
> 标签：c#, .net, excel, office-interop

我正在编写一个 C# 互操作代码以在 excel 中创建报告，并在第二张表中使用图表。我可以创建图表，但它出现在第一张表中。请帮助在第二张纸中获得相同的信息。我的代码在这里。

```
Range chartRange;
Object misValue = System.Reflection.Missing.Value;
ChartObjects xlCharts = (ChartObjects)sheet0.ChartObjects(Type.Missing);
ChartObject myChart = (ChartObject)xlCharts.Add(10, 70, 250, 250);
Chart chartPage = myChart.Chart;
chartRange = sheet0.get_Range("G1", "H1");
chartPage.SetSourceData(chartRange, XlRowCol.xlColumns);
chartPage.ChartType = XlChartType.xl3DLine; 
```

# java - ExtJs 中的 Atom 提要阅读器

> ID：14786040
> 
> 赞同：1
> 
> 时间：2013-02-09T07:44:29.083
> 
> 标签：java, extjs, extjs4, extjs3

如何从`ATOM Feed`ExtJs Grid 中读取一些数据并在其中显示数据？

# c# - 从 ASP.NET 页面启动/停止窗口服务时出错

> ID：14786041
> 
> 赞同：0
> 
> 时间：2013-02-09T07:44:28.557
> 
> 标签：c#, asp.net, windows, windows-services, authorization

我在 C# 中创建了一个 Windows 服务，它执行得很好。我有一个 ASP.NET 应用程序，我正在尝试访问（启动/停止）它。它在我的本地机器上工作正常，当我将它部署到我的服务器上时它不工作。当我单击按钮开始停止服务时出现错误：

> 访问被拒绝错误消息'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:46:50.803

在具有足够权限的用户下运行托管/运行 ASP.NET 应用程序的应用程序池。

请注意，这是一个潜在的安全漏洞！

相反，我会添加一个仅在本地可用的 web 服务之类的层来委派此类任务。

# c# - 如何使用c#读写文件

> ID：14786043
> 
> 赞同：-2
> 
> 时间：2013-02-09T07:45:22.270
> 
> 标签：c#

我想从本地系统读取文件，我想再次写入文件。我正在编写如下代码：

```
 byte[] destination = new byte[file.ContentLength];
   FileInfo fil = new FileInfo(@"d:\\Projects\\file");
     if (!fil.Exists)
       {
         using (Stream sw = fil.OpenWrite())
            {
              sw.Write(destination, 0, file.ContentLength);
              sw.Close();
            }
      } 
```

我可以下载该文件，但我无法读取下载的文件。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:59:07.773

> comppath + file.FileName

首先，尽量避免创建这样的文件路径。请改用 System.IO.Path.Combine(comppath,file.FileName) 。

现在调试您的应用程序并检查下载文件的保存位置。检查您的保存和读取路径是否相同。如果您可以在某处写入文件，那么您也可以从同一位置读取文件，除非未应用一些为您提供只写访问权限的奇怪规则。

# c++ - C++中的object和object()有什么区别

> ID：14786046
> 
> 赞同：-2
> 
> 时间：2013-02-09T07:45:31.143
> 
> 标签：c++, constructor, instantiation, most-vexing-parse

```
class A {
  public:
    A() { cout << "Constructor\n"; }  // (1) default constructor
};

A obj;                                // (2) instantiating obj

A obj();                              // (3) 
```

实例化`obj`和 和有什么不一样`obj()`？`obj`调用上面提到的默认构造函数（1）。哪个构造函数会`obj()`调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T07:47:01.573

`A obj();`声明一个被调用的函数`obj`，它不接受任何参数并且返回一个`A`. 它根本不声明`A`对象。

由于`A obj();`不声明`A`对象，因此不会导致任何构造函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T07:48:04.190

第二个被声明为函数。函数的名称是 obj。它不需要任何论据。它返回类型 A 的对象。

# javascript - 跨多个页面使用一个元素

> ID：14786052
> 
> 赞同：0
> 
> 时间：2013-02-09T07:46:25.917
> 
> 标签：javascript, html, css

假设我有一个导航栏，我想在所有页面上使用它，这样我就可以轻松地编辑一次并在所有页面上更新它，而不是单独更改每个页面。我怎么能这样做？

我会在另一个 html 文档中创建它并将元素链接到每个页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:52:46.850

您可以使用`<?php include ('filename.php') ?>`在多个页面上包含相同的代码块。

# javascript - 添加 CSS 类和子项数量的性能

> ID：14786056
> 
> 赞同：0
> 
> 时间：2013-02-09T07:47:14.887
> 
> 标签：javascript, jquery, css, performance

我需要动态地对元素应用一些样式`.child-1`并`.child-2`添加 CSS 类。

我应该将它们添加一次`#parent`还是添加到每个`.child-`？如果我添加它`#parent`会`#large-container`影响性能吗？

```
<div id="parent">
    <div class="child-1"></div>
    <div class="child-2"></div>
    <div id="large-container">
       <!-- a bunch of content here - p tags, images... -->
    </div>
</div> 
```

（`.child-1`并且`.child-2`是#large-container 之上的绝对定位元素）

```
$('#parent').addClass('myClass1 myClass2');
vs
$('.child-1, .child2').addClass('myClass1 myClass2'); 
```

与 CSS 相同：

```
.myClass1 .child-1,
.myClass2 .child-2 {
  color: red;
}
/* vs */
.myClass1.child-1,
.myClass2.child-2 {
  color: blue;
} 
```

`myClass1 myClass2`仅将样式应用于`#child-1`和 2，它们不会将任何样式添加到`#large-container`.

谢谢你的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:41:54.127

虽然我认为我的答案无法通过分析器验证（在呈现页面等方面是否有任何 css/html 分析工具？）我会根据我的经验陈述它：

```
$('#parent').addClass('myClass1 myClass2'); 
```

比

```
$('#child-1, #child2').addClass('myClass1 myClass2'); 
```

仅仅因为您遍历 dom 树一次而不是两次，即 `$('#child-1, #child2').addClass('myClass1 myClass2');`与

```
$('#child-1).addClass('myClass1 myClass2');
$('#child-1).addClass('myClass1 myClass2'); 
```

理论上证明最后一点想象你的 html 代码看起来像这样：

```
<div id="parent">
    <div id="child-1"></div>       

    ... lots and lots of html nodes 

    <div id="child-2"></div>

</div> 
```

然后寻找`#child-1`是一个完全独立的操作，而不是寻找`#child-2`.. 当涉及到 css/html 优化.. 最昂贵的操作之一是 DOM 树遍历。

在`$('#parent').addClass('myClass1 myClass2');`您遍历 DOM 树一次的情况下（即找到`#parent`然后使用 css 级联应用到缩小的DOM 子树中的元素*的位置*`#parent`

为了解决@tMagwell 提出的关于重绘的问题，`#large-container`这是另一种应用 css 的优化方式：

```
// store the child-1 node in a variable.. ie whenever you 
// refer to it in the future.. you won't have to traverse the entire DOM again
var child1element = $('#child-1');  
$('#child-1).addClass('myClass1 myClass2');
// referring to child1element costs you nothing big, it's already stored in a variable
child1element.siblings().addClass('myClass1 myClass2'); 
```

这段代码当然假设只有*child-1*和*child-2* .. 如果你有*child-3*，*child-4* .. *child-n*并且只想将它应用到*child-n* .. 那么你可以使用 `child1element.siblings()[n]` // 其中 n 是您要定位的孩子的索引，因为[兄弟姐妹（）](http://api.jquery.com/siblings/)返回一个数组

希望这可以帮助！

**更新：**

为了解决您在评论中提出的这一具体问题：

*当我向#parent 添加类时，#large-container 的存在是否会减慢某些速度？*

答案是肯定的。让我给你一个肯定会发生的场景：

CSS：

```
#parent .class1 .class2
{
  font-size:10pt;
} 
```

html:

```
<div id="parent">
    <div id="child-1"></div>       
    <div id="child-2"></div>
    <div id="large-container">
      <!-- images etc -->
      <p>hello world!<p>
       <!-- many more p tags that has a lot of text and stuff -->
    </div>
</div> 
```

所以在这个例子中..`font-size:10pt`放置在下面`#parent .class1 .class2`肯定会影响`#large-container`..的内容并且操作会花费一些东西..我无法量化它有多昂贵（这将取决于浏览器渲染引擎等）..但足够了说有一些成本 x 高于如果您不只是将 class1 和 class2 添加到父 div。

# authentication - 为什么 Yii 强制认证只适用于主页/静态页面？

> ID：14786058
> 
> 赞同：0
> 
> 时间：2013-02-09T07:47:18.540
> 
> 标签：authentication, yii

我需要在 YII 应用程序的所有页面上强制执行身份验证。为此，我`SiteController`使用从[http://www.heirbaut.nl/2010/02/23/forcing-a-yii-application-to-authenticate/](http://www.heirbaut.nl/2010/02/23/forcing-a-yii-application-to-authenticate/)获得的以下代码扩展了该类：

```
/**
 * @return array action filters
 */
public function filters(){
    return array(
        'accessControl', // perform access control for CRUD operations
    );
}

/**
 * Specifies the access control rules.
 * This method is used by the 'accessControl' filter.
 * @return array access control rules
 */
public function accessRules(){
    return array(
        array('allow',  // allow all users to perform 'login'
            'actions'=>array('login'),
            'users'=>array('*'),
        ),
        array('allow', // allow authenticated user to perform any action
            'users'=>array('@'),
        ),
        array('deny',  // deny all users
            'users'=>array('*'),
        ),
    );
} 
```

这只做了它应该做的事情，将未经身份验证的用户的所有请求重定向到登录表单，用于`index.php`url。但是`index.php?r=person`，因此，应用程序的主菜单绕过了这个限制，无论身份验证如何都会显示出来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:27:57.687

每个控制器都需要引用该代码。一个选项是创建您自己的控制器，扩展`CController`并将其放置在您的`protected/components`文件夹中

```
class MyController extends CController{
    /**
     * @return array action filters
     */
    public function filters(){
        return array(
            'accessControl', // perform access control for CRUD operations
        );
    }

    /**
     * Specifies the access control rules.
     * This method is used by the 'accessControl' filter.
     * @return array access control rules
     */
    public function accessRules(){
        return array(
            array('allow', // allow authenticated user to perform any action
                'users'=>array('@'),
            ),
            array('deny',  // deny all users
                'users'=>array('*'),
            ),
        );
    }
} 
```

然后在您的控制器类中，您需要扩展`MyController`和覆盖`accessRules()`以添加任何其他规则

```
public class SiteController extends MyController{

    ...

    public function accessRules(){
        $rules=parent::accessRules();
        array_unshift($rules,array(
            'allow',  // allow all users to perform 'login'
            'actions'=>array('login'),
            'users'=>array('*'),
        ));
        return $rules;
    }

    ...
} 
```

# javascript - 有没有办法防止元素在 JavaScript/jQuery 中失去焦点？

> ID：14786060
> 
> 赞同：3
> 
> 时间：2013-02-09T07:47:26.513
> 
> 标签：javascript, jquery, dom-events

只有在元素失去焦点后才会触发 focusout/blur 事件......顺便说一下，我更喜欢不使用插件来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T07:51:53.487

是的。你可以使用这个：

```
<input type="text" onblur="this.focus();" /> 
```

或者在 jQuery 中：

```
$(element).blur(function(){
    $(this).focus();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-03T20:05:44.933

是的。

当您单击可聚焦的 DOM 元素（默认情况下可聚焦，或通过向其添加`tabIndex`属性使其可聚焦）时，它将首先收到一个`"focus"`事件，让您知道它即将获得焦点。

然而，在此之前，任何有焦点的东西都会收到一个`"focusout"`类型为 的事件`FocusEvent`。假设您的事件变量是`e`. 该`e.relatedTarget`属性将填充即将获得焦点的元素。如果您`"focusout"`通过将焦点设置回失去焦点的事物来处理事件`e.target`，那么它将立即重新接收焦点以及一个`"focus"`和`"focusin"`事件，而将要接收焦点的对象既不会接收焦点，也不会接收焦点任何焦点事件。

因此，处理`"focusout"`事件是防止对象*失去*焦点的最佳方法。从技术上讲，因为事件不是`cancelable`，你无法阻止它失去焦点，但你可以强制它立即重新接收焦点，从而防止焦点转移到另一个元素。

同时，如果你的意图是阻止一个对象*接收*焦点，那么你最好的办法是`"focus"`通过调用`blur`元素来处理它的事件，这样它就不会接收焦点也不会接收`"focusin"`事件。

# macos - 有没有办法在 mach_inject 之后卸载捆绑包

> ID：14786070
> 
> 赞同：2
> 
> 时间：2013-02-09T07:48:36.263
> 
> 标签：macos, mach

我想将较新版本的包加载到目标进程，但这是不可能的，因为已经加载了同名的包。更改`CFBundleVersion`或`CFBundleShortVersionString`捆绑包不起作用。最简单的方法是简单地杀死目标进程并重新启动它。但我认为这不是最好的方法。那么还有另一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:12:32.800

mach_inject 我也面临同样的问题。如果不修改 mach_inject，我看不到直接的解决方案。

我的解决方案是创建两个捆绑包。将第一个捆绑包视为真正插件的插件管理器。插件管理器非常简单，希望永远不需要升级，它加载和卸载原始包并添加了清理代码。

我正在使用 Apple 的 NSBundle 类来加载和卸载插件。在卸载之前，我调用原始插件中的主体类来清理它。

卸载用目标 C 编写的包是危险的。2 & 4 大体上是对的。

1.  mach_override 不可撤销，但可以在插件管理器中调用，在真实插件中调用代码。
2.  在要卸载的插件中使用类别和协议是不安全的。
3.  你需要取消调配你调配的东西，记住你不能删除方法，所以当你重新加载插件时，你需要替换（而不是添加）旧的悬空方法。您将需要检查您的调酒代码。
4.  您需要使安装的计时器无效，删除观察者，并删除添加到运行循环中的任何其他内容。

# python - 保留密钥

> ID：14786072
> 
> 赞同：29
> 
> 时间：2013-02-09T07:49:04.497
> 
> 标签：python, django, settings

local_settings.py 反模式的原因之一是将 SECRET_KEY、AWS 密钥等值放入设置文件有问题：

*   秘密通常应该是这样的：秘密！将它们保留在版本控制中意味着拥有存储库访问权限的每个人都可以访问它们。

我的问题是如何将所有密钥保密？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T09:12:50.527

将您的`local_settings.py`数据存储在使用 GPG 加密的文件中 - 最好严格按照`key=value`您解析并分配给 dict 的行（另一种有吸引力的方法是将其作为可执行的 python，但配置文件中的可执行代码让我颤抖）。

有一个 python gpg 模块，所以这不是问题。从您的钥匙圈中获取您的钥匙，并使用 GPG 钥匙圈管理工具，这样您就不必一直输入您的钥匙串密码。确保您直接从加密文件中读取数据，而不仅仅是创建您读取的解密临时文件。这是失败的秘诀。

这只是一个大纲，您必须自己构建它。

这样，秘密数据仅保留在进程内存空间中，而不是文件或环境变量中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-17T20:18:15.767

我使用 Windows 7 和 Powershell 做我的 Django 项目，所以对我来说设置环境变量略有不同。设置完成后，我只是在`settings.py`文件中执行了以下操作：

```
import os
SECRET_KEY = os.environ["SOME_SECRET_KEY"] 
```

要使用 PowerShell 在 Windows 中设置环境变量，请按照以下链接中的说明进行操作：

[http://technet.microsoft.com/en-us/library/ff730964.aspx](http://technet.microsoft.com/en-us/library/ff730964.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-09T07:57:46.200

理想情况下，`local_settings.py`不应为生产/部署的服务器签入。您可以将备份副本保存在其他地方，但不能保存在源代码管理中。

`local_settings.py`为了方便，可以用开发配置签入，以便每个开发人员都需要更改它。

这能解决你的问题吗？

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-06T17:34:57.987

最初的问题是关于如何在环境变量中保密。[这在《 Django 的两勺](https://www.twoscoopspress.com/products/two-scoops-of-django-1-11)》一书中进行了广泛的讨论。下面是他们所说的摘要，然后是关于使用这种技术的警告。

从 1.11 版的第 48 页（第 5.3 节）开始：

> Django（和 Python）支持的每个操作系统都提供了创建环境变量的简单功能。
> 
> 以下是使用环境变量作为密钥的好处：
> 
> *   对设置保密可以让您毫不犹豫地将每个设置文件存储在版本控制中。你所有的 Python 代码真的应该存储在版本控制中，包括你的设置。
> *   不是每个开发人员都维护自己的复制粘贴版本的 local_settings.py.example 用于开发，而是每个人都共享相同的版本控制 settings/local.py 。
> *   系统管理员可以快速部署项目，而无需修改包含 Python 代码的文件。
> *   大多数平台即服务建议使用环境变量进行配置，并具有用于设置和管理它们的内置功能。

在下一页，本书继续：

> 在开始设置环境变量之前，您应该具备以下条件：
> 
> *   一种管理您要存储的秘密信息的方法。
> *   很好地理解 bash 设置如何在服务器上工作，或者愿意让您的项目由平台即服务托管。

他们描述了如何在本地和生产环境中设置环境变量（以 Heroku 为例——您需要检查您是否使用不同的主机，这只是一种可能性）：

> **如何在本地设置环境变量**
> export SOME_SECRET_KEY=1c3-cr3am-15-yummy
> 
> **如何在生产中设置环境变量**
> heroku config:set SOME_SECRET_KEY=1c3-cr3am-15-yummy

最后，在第 52 页，他们给出了如何访问密钥的说明。例如，您可以将下面的前两行放在设置文件中，以替换默认放置在那里的原始密钥字符串：

> ```
> >>> import os
> >>> os.environ['SOME_SECRET_KEY'] 
> '1c3-cr3am-15-yummy' 
> ```
> 
> 此代码片段只是从操作系统获取 SOME_SECRET_KEY 环境变量的值，并将其保存到名为 SOME_SECRET_KEY 的 Python 变量中。
> 
> 遵循这种模式意味着所有代码都可以保留在版本控制中，并且所有机密都保持安全。

请注意，这在某些情况下不起作用，例如，如果您使用的是 Apache 服务器。要处理这种模式不起作用的情况，您应该查看他们书中的第 5.4 节（“当您无法使用环境变量时”）。在这种情况下，他们建议使用秘密文件。

截至 2017 年底，这种在环境变量中存储机密的技术是两勺和十二因素应用程序设计模式中推荐的最佳实践。在 Django 文档中也推荐它。但是，存在一些安全风险：如果某些开发人员或某些代码可以访问您的系统，他们将可以访问您的环境变量，并且可能会无意（或有意）将它们公开。Michael Reinsch 在这里提出了这一点：http:
[//movingfast.io/articles/environment-variables-considered-harmful/](http://movingfast.io/articles/environment-variables-considered-harmful/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-06T05:58:08.940

我写了一个 getcreds() 函数，它从文件中获取密钥。我将文件保存在 www-data 可以访问的位置，因此无论我在 settings.py 中需要凭据的任何地方，我都只需调用 getcreds() 并将文件名作为参数传递。它返回文件中所有行的列表，宾果游戏我有隐藏的秘密。这是代码...

```
from __future__ import unicode_literals, absolute_import
import os

def getcreds(fname, project, credsroot='/var/www/creds', credsdir=None):
    """ return a list of userid and password and perhaps other data """
    if credsdir is None:
        credsdir = os.path.join(credsroot, project)
    creds = list()
    fname = os.path.join(credsdir, fname).replace("\\", "/")
    with open(fname, 'r') as f:
        for line in f:
            # remove leading/trailing whitespace and append to list
            creds.append(line.strip())
    assert creds, "The list of credentials is empty"
    return creds 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-12-16T00:49:14.333

这是一种与 Heroku 上的部署兼容的方法：

1.  创建一个名为 gitignored 的文件`.env`，其中包含：

    `export DJANGO_SECRET_KEY = 'replace-this-with-the-secret-key'`

2.  然后编辑`settings.py`以删除实际`SECRET_KEY`并添加它：

    `SECRET_KEY = os.environ['DJANGO_SECRET_KEY']`

3.  然后当你想在本地运行开发服务器时，使用：

    `source .env`
    `python manage.py runserver`

4.  当您最终部署到 Heroku 时，转到您的应用程序设置选项卡并将 DJANGO_SECRET_KEY 添加到 Config Vars。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-13T17:21:26.193

您可能需要使用 os.environ。**得到**（“SOME_SECRET_KEY”）

# image-processing - 使用颜色结构描述符

> ID：14786075
> 
> 赞同：0
> 
> 时间：2013-02-09T07:49:41.490
> 
> 标签：image-processing, colors, mpeg

根据颜色结构描述符 (CSD) 的定义，CSD 可用于使用 HMMD 颜色空间来表达图像中的颜色结构。但是怎么做？既然它给出了颜色出现的次数，我们如何从中得出位置？

如果不可能，我该怎么做才能提取图像中的颜色结构。

（基本上我想要一个输出来表达一些类似的东西。**示例**：顶部为蓝色，中间部分为绿色，底部为棕色。）

# android - 如何将纬度和经度转换为邮政地址

> ID：14786080
> 
> 赞同：0
> 
> 时间：2013-02-09T07:50:21.310
> 
> 标签：android, android-layout, android-intent

*如何将纬度和经度转换为邮政地址。我无法使用 mapview 获取地理点。我想在不使用 mapview 的情况下转换地址中的纬度和经度*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:22:05.647

Android有[`GeoCoder`](http://developer.android.com/reference/android/location/Geocoder.html)这个类：

```
public String getAddress(double latitude, double longitude){

   if (Geocoder.isPresent()) {
       try {
          Geocoder geocoder = new Geocoder(mContext, Locale.getDefault());
          List<Address> addresses = geocoder.getFromLocation(latitude,longitude,1);

          if(addresses != null && addresses.size() > 0) {
            Address first = addresses.get(0);
            StringBuilder sb = new StringBuilder();

            if(first.getMaxAddressLineIndex() > 0){
              sb.append(first.getAddressLine(0) + ", ");
            }

            sb.append(first.getLocality() + ", ");
            sb.append(first.getCountryName());

            return sb.toString();

        } catch (Exception e) {
          Log.e("MyAPP", "Reverse geo lookup failed", e);
          return "Unavailable"
        }
    } else {
      return "unavailable";
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:45:15.530

这就是所谓`Reverse Geocoding`的，您可以使用许多服务，包括[Google](https://developers.google.com/maps/documentation/geocoding/)、[Yahoo](http://developer.yahoo.com/boss/geo/)和[Bing](http://www.microsoft.com/maps/developers/web.aspx)

[请参阅本文](http://blog.programmableweb.com/2012/06/21/7-free-geocoding-apis-google-bing-yahoo-and-mapquest/)以获取免费的地理编码服务

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T06:47:22.220

转到项目属性 > Android > 将项目构建目标设置为 Google

# javascript - Javascript：获取 ID 的正文

> ID：14786086
> 
> 赞同：0
> 
> 时间：2013-02-09T07:52:25.453
> 
> 标签：javascript, jquery, iframe

我正在尝试`iframe`使用 Javascript 或 jQuery 获取正文内容。我尝试了几种方法来解决这个问题，但没有一个对我有用。

我尝试的解决方案如下所示：

```
document.getElementById('iframe').document.innerHTML;

$("#content").contents().find("body").html(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:08:33.750

```
document.getElementById("iframe").contentWindow.document.body.innerHTML 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T07:56:03.563

如果 iframe 来自同一个域，您可以`$.ajax`对 iframe src url 的 URL 进行请求吗？

# c++ - Eclipse CDT 包含路径

> ID：14786091
> 
> 赞同：2
> 
> 时间：2013-02-09T07:53:05.290
> 
> 标签：c++, c, gcc, g++, eclipse-cdt

关于 Ecplise 让我烦恼的一件事是，我似乎需要明确添加一个路径来包含共享库的文件，这些共享库是“内置”到我的发行版中的。没有其他地方我需要一整页的包含路径来在 Linux 上使用 gcc 或 g++ 进行编译。例如：

```
#include <gtk/gtk.h> 
```

将需要一个指向 /usr/include/gtk-2.0 的显式路径以及指向标头中每个包含的显式路径。但是，我可以使用简单的 gcc 命令编译代码，无需 -l 开关和 pkgconfig 设置来查找二进制文件...

在网上搜索后，我注意到每个人似乎都有这个问题并且没有解决方案。但我觉得我必须做错事才能在我的 gcc 命令中明确添加所有这些路径......

我想当我重新阅读 gcc 的手册页时，我会在这里获取更多信息......

# android - 可绘制文件夹中图像的数量和大小

> ID：14786092
> 
> 赞同：3
> 
> 时间：2013-02-09T07:53:22.450
> 
> 标签：android, android-image, android-drawable

我正在编写一个关于婴儿字母的程序，我正在使用 28 张图片。这是一个抽认卡程序，运行正常，直到我达到 20 张图像。

它在打开前强制关闭。我仍处于该计划的早期阶段。我把我的图像放在 drawable-mdpi 中。在处理此错误 2 天后，我发现当我在 drawable-mdpi 和 drawable-hdpi 之间拆分图像时效果很好，但是 hdpi 文件夹中的图像更小，尽管它们的大小相同。

我想知道，为什么分割图像时会起作用？每个文件夹的图像数量有限制吗？另外，为什么 hdpi 文件夹中的图像在应用程序中变小了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-13T05:50:06.553

每个文件夹的图像数量没有限制。我有一个应用程序，在文件夹 drawable-mdpi（真的）中有超过 360 张图片，总大小为 32Mb，效果很好。

如果您在 mdpi 屏幕 (160dpi) 上测试您的应用程序，并且您有 hdpi 图像（对于 240dpi），那么应用程序会在运行时通过将它们的大小乘以因子 160/240 = 0.66 来自动缩小它们，这就解释了它们出现的原因更小。

有关更多信息，请参阅[Android 的多屏幕支持。](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-12T14:58:11.467

这`dpi`就是“每英寸点数”，Android 允许一种简单的方法来确保运行应用程序的设备将加载最好的可用资源，对于它的“桶”，`dpi`它使用的类别。

您可以通过创建另一个可绘制文件夹（例如`res\drawable-nodpi`）来禁用此行为，并将位图放在那里，然后加载，并根据需要进行任何更改。

# javascript - 移动地图然后显示对话框

> ID：14786093
> 
> 赞同：0
> 
> 时间：2013-02-09T07:53:48.953
> 
> 标签：javascript, google-maps

我需要移动地图，然后需要显示对话框。以下代码显示对话框，然后地图移动，这是完全相反的行为。

```
function showDetails(property_id)
{
    map.panBy(300,0);           
    sleep(3000);            
    window.showModalDialog("<?php echo base_url();?>index.php/admin/add_property_from_map/"+18+"/"+73);
}

function sleep(ms)
{
    var dt = new Date();
    dt.setTime(dt.getTime() + ms);
    while (new Date().getTime() < dt.getTime());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:59:44.970

只要浏览器正在运行，您的睡眠功能就会阻止浏览器（甚至地图的平移也会被阻止）。用于`window.setTimeout()`完成平移和对话框之间的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T12:52:19.210

正如莫勒博士指出的那样。您的 sleep() 函数正在阻止对正在运行的任何其他代码的所有访问。使用[setTimeout](https://developer.mozilla.org/en/docs/DOM/window.setTimeout)函数。像这样的东西：

```
function showDetails(property_id)
{
    map.panBy(300,0);           
    window.setTimeout(function()
    {
        window.showModalDialog("<?php echo base_url();?>index.php/admin/add_property_from_map/"+18+"/"+73);
    }, 3000);
} 
```

# mysql - 跨多个表的 SQL 条件求和

> ID：14786097
> 
> 赞同：0
> 
> 时间：2013-02-09T07:54:22.337
> 
> 标签：mysql, sql, count, sum

我有以下三个表

**1.产品大师（下午）**

*   产品代码
*   产品名称
*   Product_Category（书籍、文具、期刊、杂志）

**2.订单大师（om）**

*   Order_ID
*   订单号
*   订购日期

**3.订单行（ol）**

*   Order_Line_ID
*   Order_ID
*   产品代码
*   数量
*   数量

现在我需要记录集中的以下列：

> om.order_no, om.order_date, sum(ol.qty) for Books, sum(ol.amount) for Books, sum(ol.qty) for Stationary, sum(ol.amount) for Stationary, sum(ol.qty)用于期刊，sum(ol.amount) 用于期刊，sum(ol.qty) 用于杂志，sum(ol.amount) 用于杂志。

请帮助编写条件总和。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T07:59:53.840

试试这个，

```
SELECT  a.Order_NO,
        a.Order_Date,
        SUM(CASE WHEN c.Product_Category = 'Books' THEN b.Qty ELSE 0 END) totalBooks,
        SUM(CASE WHEN c.Product_Category = 'Books' THEN b.Amount ELSE 0 END) totalBooks_Amount,
        SUM(CASE WHEN c.Product_Category = 'Stationary' THEN b.Qty ELSE 0 END) totalStationary,
        SUM(CASE WHEN c.Product_Category = 'Stationary' THEN b.Qty ELSE 0 END) totalStationary_Amount,
        SUM(CASE WHEN c.Product_Category = 'Journals' THEN b.Qty ELSE 0 END) totalJournals,
        SUM(CASE WHEN c.Product_Category = 'Journals' THEN b.Qty ELSE 0 END) totalJournals_Amount,
        SUM(CASE WHEN c.Product_Category = 'Magazines' THEN b.Qty ELSE 0 END) totalMagazines,
        SUM(CASE WHEN c.Product_Category = 'Magazines' THEN b.Qty ELSE 0 END) totalMagazines_Amount
FROM    OrderMaster a
        INNER JOIN OrderLines b 
            ON a.Order_ID = b.Order_ID
        INNER JOIN ProductMaster c
            ON b.Product_Code = c.Product_Code
GROUP   BY a.Order_NO, a.Order_Date 
```

# java - 如何将数据库中的所有行元素添加到 JSON 对象

> ID：14786098
> 
> 赞同：0
> 
> 时间：2013-02-09T07:54:33.007
> 
> 标签：java, json, jakarta-ee, object

我正在尝试检索数据库中的所有元素并显示在网页中。但是使用我的代码它只能检索一个行元素。问题是，它检索所有元素，但将最后一行元素添加到对象中。我认为首先检索到的所有元素都被覆盖，因为它显示最后一行元素。谁能告诉我如何将所有行元素添加到 JSON 对象。请帮我。

代码 ：

```
 while(rs.next()){
                ImageFile.setName(rs.getString("imagename").trim());
                ImageFile.setDisc(rs.getString("imagedisc").trim());
                ImageFile.setImageid(rs.getInt("imageid"));
                ImageFile.setalbumid(rs.getInt("albumid"));

                byte imageData[] = rs.getBytes("imagethumb");
                String encoded = DatatypeConverter.printBase64Binary(imageData);
                ImageFile.setThumb(encoded);

                byte image1Data[] = rs.getBytes("imagethumb");
                String encoded1 = DatatypeConverter.printBase64Binary(image1Data);

                ImageFile.setFull(encoded1);
            } 
```

**完整的源代码在[这个](https://stackoverflow.com/questions/14777159/retrieving-images-using-jquery-and-servlet-produces-http-status-500-error)问题中**

请帮助我............谢谢......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T07:59:20.623

使用列表`Collection`来保留所有`row-values`db，例如 -`List<ImageFileInfo>`表示 List 包含`ImageFileInfo`Objects 。然后将列表序列化为`json String`.

```
List<ImageFileInfo> imageFileList = new ArrayList<ImageFileInfo>();
while(rs.next()){
    ImageFileInfo info = new ImageFileInfo();
    info..setName(rs.getString("imagename").trim());
    ...
    imageFileList.add(info);
} 
```

Json 序列化 -

```
Type typeOfList= new TypeToken<List<ImageFileInfo>>(){}.getType();
String s = gson.toJson(imageFileList , typeOfList); 
```

# ios - Google Places API：iOS 密钥：请求被拒绝

> ID：14786101
> 
> 赞同：0
> 
> 时间：2013-02-09T07:54:53.060
> 
> 标签：ios, google-places-api

我正在尝试从 iOS 应用程序查询 google places api。在 google api 控制台中，我在服务部分启用了 Places API，并在 API 访问部分为我创建的默认浏览器密钥之外创建了一个 iOS 密钥。我已将我的应用程序的捆绑标识符分配给 iOS 密钥，并在我的 info.plist 中对捆绑标识符进行硬编码，以确认它与我在 Google API 控制台中注册的内容相匹配。

我正在尝试从我的应用程序（参考 Ray Wenderlich 教程）运行测试查询并收到拒绝的请求。我已经通过我的网络浏览器运行了完全相同的查询（唯一的区别是我使用的密钥 - 浏览器的浏览器密钥，应用程序的 iOS 密钥）并且查询成功返回结果。

在这一点上，我假设问题出在我的 iOS 密钥或我的应用程序包标识符的设置上。除了直接通过应用程序来找出请求被拒绝的原因之外，还有其他方法可以调试 iOS 应用程序密钥 + 包标识符吗？

任何反馈表示赞赏。

谢谢 - 马特

# asp.net - 无法从项目构建项目输出组内容文件

> ID：14786103
> 
> 赞同：0
> 
> 时间：2013-02-09T07:55:20.587
> 
> 标签：asp.net, web-applications, web-setup-project

我有一个用于 ASP.NET Web 应用程序的 Web 设置项目。在我的项目输出组中，选择了 Primary output 和 Content Files。错误：当我构建项目时，

```
Unable to build project ouput group 'Content files from myproject(Active)' 
```

根据[http://support.microsoft.com/kb/835458](http://support.microsoft.com/kb/835458)，没有多余的文件要删除。但是我的项目中有很多图像文件，js文件和一些xml，还有一个txt文件。有什么问题构建失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:29:50.760

护目镜一段时间后，这个链接解决了我的问题。 [http://www.hanselman.com/blog/VisualStudioMSIProblemsUnableToBuildProjectOutputGroupContentFilesFromSOMEWEBActive.aspx](http://www.hanselman.com/blog/VisualStudioMSIProblemsUnableToBuildProjectOutputGroupContentFilesFromSOMEWEBActive.aspx)

# c# - 使用 OpenNLP 库在 C# 中创建 POSModel 对象

> ID：14786104
> 
> 赞同：1
> 
> 时间：2013-02-09T07:55:45.907
> 
> 标签：c#, .net, ikvm, opennlp

我正在使用 IKVM 工具在 .NET 中使用 C# 中的 OpenNLP 库。当我尝试创建一个对象时

```
string pos = "\\en-pos-maxent.bin";
modelInpStream = new java.io.FileInputStream("D:\\models"+ pos);
opennlp.tools.postag.POSModel pOSModel = new pennlp.tools.postag.POSModel(modelInpStream); 
```

它抛出这个错误：

> 无效格式异常
> 
> 配置文件数据流的格式无效！

谁能告诉我上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T08:41:52.640

我找到了解决方案。实际上问题出在`en-pos-maxent.bin`zip文件中。

我已经下载了 1.5 个模型，其中每个模型只有 2 个内容。但是`en-pos-maxent.bin`有3个内容，所以只需删除`tags.tagdict`文件表单`zip`文件我的问题就解决了。

# python - IO 错误：[Errno 13] 权限被拒绝：我有权限吗？

> ID：14786112
> 
> 赞同：1
> 
> 时间：2013-02-09T07:56:25.913
> 
> 标签：python, file, permissions, copy

我想要做的是从文件夹中的文件夹中获取 .mp3 文件。多次。
一切都很完美，除了当我尝试将文件复制到一个新文件夹（已经存在）时，它给出：[Errno 13] Permission denied：

```
import os, shutil

def startup():  
    os.system("cls")  
    print "\n osu! Extractor."  
    print "\n Press ENTER to begin."  
    raw_input()  
    for basename in os.listdir('C:\Program Files (x86)\osu!\Songs'):  
        basename2 = ('C:\Program Files (x86)\osu!\Songs\\' + basename)  
        for song in os.listdir(basename2):  
            if song.endswith('.mp3'):  
                print song  
                raw_input()  
                shutil.copy(basename2, 'C:\Program Files (x86)\osu!\Extracted_Songs')  

if __name__ == '__main__':  
    startup() 
```

我知道我可以手动复制它，而且我是计算机上的管理员，所以我不知道为什么会这样。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T07:58:31.720

默认情况下，程序无权写入`Program Files`和`Program Files (x86)`。将文件保存在其他地方或授予您的程序权限（例如，以管理员身份运行它）。

*（向大须大喊！）*

# asp.net - 如何迭代 IDataReader 或其他控件

> ID：14786118
> 
> 赞同：0
> 
> 时间：2013-02-09T07:58:52.407
> 
> 标签：asp.net, dataset, idatareader

我知道我不能将 IDataReader 迭代到最后并回到开头并再次迭代它。那么我应该怎么做才能多次迭代数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:22:35.167

取决于许多因素。您可以关闭并重新打开 DataReader，使用数据适配器将其读入数据集，或创建自己的集合，将其读入并处理该集合。

# javascript - div 继承宽度和高度并滚动

> ID：14786119
> 
> 赞同：0
> 
> 时间：2013-02-09T07:58:55.277
> 
> 标签：javascript, html, css

如何让 DIV 在没有固定定义的高度和宽度的情况下从其容器继承其宽度和高度，默认情况下覆盖容器内的整个区域并滚动而不是增加其高度或宽度。例如

```
<td style="width:400px; ">
<div style="overflow:scroll; ">
</div>
</td> 
```

这个 DIV 应该覆盖 400px，当内容超过这个宽度时，它应该滚动。容器可以是 TD 或 SPAN。一种方法可能是拥有一个仅定义宽度的 CSS 类并应用于容器和 div，但是，我不知道该 DIV 还会在哪里使用以及它的容器的宽度是多少。

**编辑 1** 通过将 max-width 设置为 100px，我得到了我想要的，否则它会增加容器的宽度。这可能是因为容器的宽度以 % 为单位。看起来我需要找到容器的初始宽度，然后设置 DIV 的最大宽度。是吗？

**编辑 2** 这个 Div 里面有一个网格。当在 DIV 的样式中定义最大宽度时，它反映了我在通过 JS 设置时需要的行为，页面加载时宽度正常，但是当单击链接以加载网格内的数据时，它会丢失最大宽度财产。

```
<script type="text/javascript">
    var w = document.getElementById("divgrid").style.maxWidth;
    if (w == null || w == NaN || w <= 0 || w.toString() == '')
    w = document.getElementById("divgrid").offsetWidth;
    document.getElementById('divgrid').style.maxWidth = w + 'px';
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:56:32.917

您选择了两个有趣的容器元素，因为 span 的默认`display`值为 ，`inline`而表的默认值为`table`。两者都不尊重该`overflow`属性，因此要在 div 元素周围创建滚动条，您需要将它们设置为`display:block`. 使用上面的示例：

HTML

```
<table>
    <tr>
        <td>
            <div>...lots of text here...</div>
        </td>
   </tr>
</table> 
```

CSS

```
table{
    height:100px;
    width:100px;
    display:block; 
    overflow:scroll;
} 
```

Aand这是一个**[jsFiddle](http://jsfiddle.net/TS6wM/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:03:58.827

```
width:100%; height:100%; overflow:scroll; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T09:14:17.667

用于或`overflow-x:scroll`_`table``td`

例如

```
<table style="width:400px; overflow-x:scroll;">
   <tr>
     <td><div>content</div></td>
   </tr>

</table> 
```

# php - getJSON 不起作用

> ID：14786120
> 
> 赞同：2
> 
> 时间：2013-02-09T07:58:59.123
> 
> 标签：php, jquery, getjson

我在 main.php 中的代码是这样的：

```
 $(document).ready(function(){
        $.getJSON('abc.php?valueOne=value1&valueTwo=value2', function(data){
            alert(data);
        }
      }); 
```

在 abc.php 中有文本值和数字作为我想在 main.php 中显示的结果

问题是如果它是一个数字，那么它会显示在警报 alert(data) 中，否则如果有文本则没有任何效果。

我对此完全感到困惑。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:10:46.747

`$.getJSON`需要一个 JSON 响应，所以你应该有这种 PHP 代码：

```
header('Content-Type: application/json');
echo json_encode(array(
    'one' => "1234",
    'two' => "Abcd",
)); 
```

然后，在 JavaScript 内部：

```
function(data) {
    alert(data.one);
    alert(data.two);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T08:17:08.070

代替

```
$.getJSON('abc.php?valueOne=value1&valueTwo=value2', function(data){
        alert(data);
    } 
```

和

```
$.getJSON('abc.php?valueOne=value1&valueTwo=value2', function(data){
        alert(data);
    }); 
```

有失踪`);`

# r - 无法为 R 包中的全局变量赋值

> ID：14786127
> 
> 赞同：1
> 
> 时间：2013-02-09T07:59:43.377
> 
> 标签：r, variables, package, assign

我正在构建一个具有全局变量的包，代码如下：

```
at <- NA 
get.at <- function() {
  if (is.na(at)) {
    at <<- 1
  }
  at
} 
```

但是当我打电话时`get.at()`，它会引发一个错误：

`Error in get.at() : cannot change value of locked binding for 'at'`

我怎么解决这个问题？

编辑：

1.  `at`无法更改，因为加载包后环境是密封的。但是可以调用`get.at()`自定义函数`.onLoad`或`.onAttach`成功调用。

2.  正如@daniel 所说，另一个解决方案是创建一个属于内部环境的变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:18:40.613

试试看`?unlockBinding`，也许你必须先打开包中的绑定，然后才能更改值。这是 R 中帮助文件的一部分，可能会对您有所帮助：

```
e <- new.env()
assign("x", 1, envir = e)
get("x", envir = e)
lockBinding("x", e)
try(assign("x", 2, envir = e)) # error
unlockBinding("x", e)
assign("x", 2, envir = e)
get("x", envir = e) 
```

编辑：我不确定这是否真的会在一个包中正常工作。一种可能的解决方案是创建另一个 R 源文件`zzz.R`并在那里创建变量所在的环境并在那里分配默认值。 `zzz.R`：

```
.PkgEnv <- new.env()
assign("at",NA, envir = .PkgEnv) 
```

然后你可以改变你的代码，你总是从你感兴趣的环境中访问变量：

```
get.at <- function(){
  if(is.na(get("at",envir=.PkgEnv))){
    assign("at",1,envir=.PkgEnv)
  }
  get("at",envir=.PkgEnv)
} 
```

我只是在一个测试包中对其进行了测试，它成功了，尽管我不确定这是否是“R 核心团队的推荐方式”。

# php - Mysql：比较无法正常工作

> ID：14786132
> 
> 赞同：2
> 
> 时间：2013-02-09T08:00:35.787
> 
> 标签：php, mysql

我有一个在 php 中运行的 mysql 查询。

```
$result = mysql_query("SELECT status,initiated_by,create_timestamp,extension_id,
    product_code,prospect_name,prospect_email1,prospect_phone1,prospect_title,
    prospect_company,prospect_message,track_id  
    FROM prospect_requests 
    WHERE subscriber_id = '$subscriberid' 
      AND create_timestamp >='$start_date' 
      AND create_timestamp <= '$end_date'"); 
```

有两个属性名称`$start_date` 和`$end_date`

我的问题是为什么上面的查询没有返回`$end_date`

这是场景。

我选择`$start_date` 了 01-02-2013 和`$end_date` 09-2-2013 。

但是上面的查询没有返回 9 Feburary 的详细信息。

请帮帮我。

**更新**

当我将日期设置为 2 月 10 日时，它会返回我 2 月 9 日的详细信息

表结构

```
CREATE TABLE `prospect_requests` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `customer_id` varchar(255) NOT NULL,
  `subscriber_id` varchar(255) NOT NULL,
  `extension_id` varchar(255) DEFAULT NULL,
  `vendor_number` varchar(255) DEFAULT NULL,
  `product_code` varchar(255) DEFAULT NULL,
  `prospect_email1` varchar(255) DEFAULT NULL,
  `prospect_phone1` varchar(255) DEFAULT NULL,
  `prospect_email2` varchar(255) DEFAULT NULL,
  `prospect_phone2` varchar(255) DEFAULT NULL,
  `prospect_title` varchar(255) DEFAULT NULL,
  `prospect_company` varchar(255) DEFAULT NULL,
  `prospect_name` varchar(255) DEFAULT NULL,
  `prospect_message` text,
  `create_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_timestamp` datetime DEFAULT NULL,
  `status` int(11) DEFAULT '0',
  `track_id` varchar(255) NOT NULL,
  `initiated_by` varchar(255) DEFAULT NULL,
  `subscriber_email` varchar(255) DEFAULT NULL,
  `vendor_email` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=142 DEFAULT CHARSET=latin1; 
```

输入：$start_time = 2013-02-01

```
 $end_time  = 2013-02-09 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:33:24.833

条件`<= '$end_date'`基本相同`<= '$end_date 00:00:00'`。

如果您需要当天本身，您可以这样查询：

```
... create_timestamp <= '$end_date 23:59:59' 
```

*`create_timestamp BETWEEN '$start_date' AND '$end_date 23:59:59'`*也可以。

**选择**

以编程方式添加一天并使用`<`：

```
$end_date = date('Y-m-d', strtotime("$end_date +1 day"));

... create_timestamp < '$end_date' 
```

**更新**

您还可以先将时间戳转换为日期：

```
DATE(create_timestamp) BETWEEN '$start_date' AND '$end_date' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:05:06.497

日期应该是格式`YYYY-MM-DD`。

此外，您可以将`WHERE create_timestamp BETWEEN '...' AND '...'`其用作限制值的更有效条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T08:08:26.910

对于比较日期，您应该`BETWEEN`在 mysql 查询中使用您的运算符，如下所示

```
$result = mysql_query("SELECT 
status,initiated_by,create_timestamp,extension_id,product_code,prospect_name,
prospect_email1,prospect_phone1,prospect_title,prospect_company,prospect_message,
track_id  from prospect_requests WHERE subscriber_id = '$subscriberid' AND  
create_timestamp BETWEEN '$start_date' AND '$end_date'"); 
```

请在[w2school的操作员之间进行完整的描述](http://www.w3schools.com/sql/sql_between.asp)

如果仍然无法正常工作，请使用表格结构更新您的问题

我看到您正在使用`timestamp`导致问题的字段类型的更新问题请参阅以下链接，这可能会有所帮助[比较时间戳与日期变量（MySQL 和 PHP）](https://stackoverflow.com/questions/6024938/comparing-timestamp-with-date-variable-mysql-and-php)

# mysql - 选择并等待 where 子句为真

> ID：14786134
> 
> 赞同：0
> 
> 时间：2013-02-09T08:01:04.180
> 
> 标签：mysql, user-defined-functions

我想做一个像“select * from table where state=1”这样的mysql选择，它不应该等到where条件结果为真。投票是不可接受的。我尝试了一些带有 udf 函数和套接字的东西，但它更复杂，所以我想问一下是否有一个已经在运行的解决方案

干杯

# php - 在php中上传视频文件时出错

> ID：14786142
> 
> 赞同：0
> 
> 时间：2013-02-09T08:02:53.900
> 
> 标签：php, upload

我想使用php和html表单上传视频文件，php代码和错误如下。

除了视频（.mp4、.flv、.avi）之外，我几乎可以上传任何其他文件类型（图像、zip、文本等），除非是视频（.mp4、.flv、.avi）。

更新：我已将表格作为图片上传： ![在此处输入图像描述](../Images/a13ed7eb446aaf9ef5642c30fafdb228.png)

```
 <form enctype="multipart/form-data" action="saveVideo.php" method="post" >
 <input type="text" name="txtCardNo" size="6" maxlength="6"autofocus required/>
 <input type="file" name="video" required/>
 <input type="hidden" name="MAX_FILE_SIZE" value="26214400" />
 <input type="submit" value="Submit" class="ok"/> 
```

**保存视频.php：**

```
require_once('config.php');

// get info from the form 
$card = trim($_POST['txtCardNo']);     //7th line (error 1)

// directory where Videos will be saved 
$target = "videos/"; 
$target = $target . basename($card . ".mp4"); //rename the video
$video = $card . ".mp4"; //name saved in the db

echo $_FILES["video"]["type"];   //14th line (error 2)

if ($_FILES["video"]["type"] == "video/mp4"){ //check for .mp4
    if ($_FILES['video']['size'] > $_POST['MAX_FILE_SIZE']){ //check file size
        $_SESSION['error'] = "Video size should be less than 25MB.!";
    }else{
    $check = mysql_query("SELECT SN FROM Videos WHERE CardNo = '$card'");  //check for existing image

if (mysql_num_rows($check) < 1){
            $sql_query = "INSERT INTO Videos (CardNo, Video, Date) VALUES ('$card', '$video', NOW())";
}else{
            $sql_query = "UPDATE Videos SET CardNo ='$card', Video = '$video', Date = NOW() WHERE CardNo = '$card' LIMIT 1";}
    if(mysql_query($sql_query, $dbLink) or die(mysql_error())){
            if(move_uploaded_file($_FILES['video']['tmp_name'], $target)){ //move video to videos folder
                $_SESSION['error'] =  "The file ". basename( $_FILES['video']['name']). " uploaded successfully.!"; 
            }else {
                $_SESSION['error'] = "Error moving record.!";   }
        }else{
            $_SESSION['error'] = "Error updating record.!"; }}  
}else{
        $_SESSION['error'] = "Invalid file type. Allowed only .mp4, video format.!";
}  etc.. 
```

**错误：**

```
Notice: Undefined index: txtCardNo in C:\xampp\htdocs\video\saveVideo.php on line 7
Notice: Undefined index: video in C:\xampp\htdocs\video\saveVideo.php on line 14 
```

我使用相同的代码（带有图像属性）进行图像上传，并且效果很好。但是在上传视频时，这给了我很多错误，其中一些已得到纠正。现在我无法将表单中的帖子数据输入到 saveVideo.php 中（我检查了第 7 行和第 14 行但没有成功）。

谢谢指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:44:35.007

您尝试上传的文件大小。PHP 有一定的文件上传大小限制。如果上传的文件超过这个限制，将给出 $_FILES 数组中的空白数据。检查您的 php.ini 文件上传部分的大小限制，同时检查 post max size 。默认大小为 2 MB，您可以增加并重新启动服务器。

试试这个

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T20:43:47.077

对于我的生活，我真的无法弄清楚这里出了什么问题。不过我确实有一个建议，那就是将您安装的 XAMPP 升级到最新版本。通常升级修复之前安装中存在的任何错误。我自己目前在 1.8.1 上运行，并且无法重现您的错误，所以也许如果您升级，它会解决任何问题。

# android - 识别设备是否为 Kindle

> ID：14786144
> 
> 赞同：7
> 
> 时间：2013-02-09T08:03:16.297
> 
> 标签：android, kindle

我想在亚马逊的 AppStore 上提供一个 Android 应用程序。我的应用有一些基于位置的功能和相机功能，如果用户的设备是 Kindle，我需要禁用这些功能。有没有办法以编程方式检测用户的设备是否是 Kindle？我知道我可以为 Kindle 和非 Kindle 构建不同的版本，但我想我首先要问是否有办法在代码中检测到这一点。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-09T08:08:04.407

要检查设备是否具有特定功能，您`PackageManager.hasSystemFeature(String name)`的情况应该足够了。

要检查位置和相机，您可以使用`FEATURE_LOCATION`和`FEATURE_CAMERA`作为参数`hasSystemFeature`

如果您仍然需要了解设备的硬件，可以查看 `android.os.Build.MANUFACTURER` `android.os.Build.BRAND` `android.os.Build.BOARD` `android.os.Build.DEVICE`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-09T08:15:03.347

如果您想检测 Kindle，请使用 Build.MANUFACTURER 检查制造商（亚马逊）并使用[Build.MODEL](http://developer.android.com/reference/android/os/Build.html#MANUFACTURER)进行[建模](http://developer.android.com/reference/android/os/Build.html#MODEL)。Kindle 的型号值会有所不同，可以是 KFTT、KFOT、Kindle Fire 等[。型号见这里。](https://developer.amazon.com/sdk/fire/specifications.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-08-04T11:42:56.410

您可以使用此方法识别 Kindle 设备

```
public static boolean isKindle(){
        final String AMAZON = "Amazon";
        final String KINDLE_FIRE = "Kindle Fire";

        return (Build.MANUFACTURER.equals(AMAZON) && Build.MODEL.equals(KINDLE_FIRE) ) || Build.MODEL.startsWith("KF");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-15T23:32:45.437

我知道这篇文章很旧，但解决这个问题的方法是错误的。如果您对 Kindles 的关注与硬件相关，即 Kindles 没有摄像头或摄像头支持，那么您需要检查摄像头支持而不是设备类型。如果其他设备不提供相机支持怎么办？而不是建议的答案，试试这个

```
public static boolean isCameraAvailable(Context context) {
    PackageManager packageManager=context.getPackageManager();
    if (packageManager.hasSystemFeature(PackageManager.FEATURE_CAMERA_ANY)) {
        // this device has a camera 
        return true; 
    } else { 
        // no camera on this device 
        return false; 
    } 
} 
```

这比检测设备是否是kindle要好得多，否则为kindle做另一个构建。

# c# - 如何优化 RavenDB 查询以检索所有文档？

> ID：14786145
> 
> 赞同：4
> 
> 时间：2013-02-09T08:03:31.040
> 
> 标签：c#, ravendb, document-database

我正在尝试学习如何使用 RavenDB，为此我创建了一个基本示例。似乎初始化存储和查询需要花费大量时间！

```
static void Main( string[] args )
{
    const bool createNewEntities = true;

    var sw = new Stopwatch();
    using( var store = new EmbeddableDocumentStore {DataDirectory = "~\\Data"} )
    {
        sw.Start();
        store.Initialize();
        sw.Stop();
        Console.WriteLine( "Initialized in {0} ms.", sw.ElapsedMilliseconds );

        if (createNewEntities)
        {
            sw.Reset();
            sw.Start();
            using( var session = store.OpenSession() )
            {
                sw.Stop();
                Console.WriteLine();
                Console.WriteLine( "Opened session in {0} ms.", sw.ElapsedMilliseconds );

                for( var i = 0; i < 10; i++ )
                {
                    var entity = new EntityA( "Entity A " + DateTime.Now.ToLongTimeString() );

                    sw.Reset();
                    sw.Start();
                    session.Store( entity );
                    sw.Stop();

                    if (i < 3)
                        Console.WriteLine( "Stored '{0}' in {1} ms.", entity.Name, sw.ElapsedMilliseconds );
                }

                sw.Reset();
                sw.Start();
                session.SaveChanges();
                sw.Stop();
                Console.WriteLine( "Saved changes in {0} ms.", sw.ElapsedMilliseconds );
            }
        }

        sw.Reset();
        sw.Start();
        using( var session = store.OpenSession() )
        {
            sw.Stop();
            Console.WriteLine();
            Console.WriteLine( "Opened EntityA session in {0} ms.", sw.ElapsedMilliseconds );

            sw.Reset();
            sw.Start();
            var entities = session.Query<EntityA>().ToArray();
            sw.Stop();
            Console.WriteLine("Queried for all {0} EntityA in {1} ms.", entities.Length, sw.ElapsedMilliseconds);
        }

        sw.Reset();
        sw.Start();
        using( var session = store.OpenSession() )
        {
            sw.Stop();
            Console.WriteLine();
            Console.WriteLine( "Opened EntityA session (again) in {0} ms.", sw.ElapsedMilliseconds );

            sw.Reset();
            sw.Start();
            var entities2 = session.Query<EntityA>().ToArray();
            sw.Stop();
            Console.WriteLine( "Queried (again) for all {0} EntityA in {1} ms.", entities2.Length, sw.ElapsedMilliseconds );
        }
    }

    Console.WriteLine();
    Console.WriteLine();
    Console.WriteLine( "Press ENTER to exit..." );
    Console.ReadLine();
} 
```

这会产生以下输出：

```
在 6132 毫秒内初始化。

在 3 毫秒内打开会话。
在 129 毫秒内存储了“实体 A 08:50:14”。
在 0 毫秒内存储了“实体 A 08:50:15”。
在 0 毫秒内存储了“实体 A 08:50:15”。
在 29 毫秒内保存更改。

在 0 毫秒内打开 EntityA 会话。
在 463 毫秒内查询所有 10 个 EntityA。

在 0 毫秒内（再次）打开 EntityA 会话。
在 1 毫秒内（再次）查询所有 10 个 EntityA。

```

从这个粗略的例子中，我可以看到：

*   初始化商店需要大量时间！
*   存储第一个实体（十个）需要相当长的时间。
*   第一次查询所有实体需要很多时间，但第二次则完全没有时间。

如何正确查询数据库中特定类型（EntityA）的所有文档？当然，RavenDB 不可能每个查询都需要索引吗？特别是对于没有任何标准的查询？

（注意：我打算使用嵌入在桌面应用程序中的 DB，其中列出所有文档用于显示 DB 的内容。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T02:04:29.537

以下是三个延迟的原因：

***初始化延迟***
初始化文档存储确实是最昂贵的操作之一。由于您正在运行 RavenDB 的嵌入式模式，它不仅要建立与数据库的连接，而且实际上还必须启动数据库运行。在我的机器（一台 2.3Ghz i5 笔记本电脑）上，初始化需要 2516 毫秒。

如果您正在运行完整的 RavenDB 服务器（未嵌入） - 大部分延迟将是在启动服务器本身时。初始化客户端会明显更快。

这是合理的行为，考虑到`IDocumentStore`（无论是嵌入的还是正常的）都应该作为单例来保存。在你的应用程序中应该只有一个这样的实例，它应该在启动时创建并在关闭时处理。

***第一次存储延迟***
因为您没有提供`Id`自己的，Raven 使用它的[HiLo 生成算法](http://ravendb.net/docs/client-api/basic-operations/saving-new-document#document-ids)为您自动生成一个。这涉及从数据库中分配一个可分配的 id 块，这确实需要很少的时间。后续调用会更快，因为在块用完之前它们不必访问数据库。

如果您提供自己的`Id`属性并用有效标识符填充它，例如`entities/1`,`entities/2`等 - 那么它会快得多，因为您将跳过密钥生成。

***查询延迟***
未指定静态索引时 的第一次调用`.Query<T>()`将尝试创建与查询表达式匹配的动态索引。即使在获取“所有”实体时也是如此，因为它仍然必须使用`Raven-Entity-Name`元数据按实体类型进行过滤。 [RavenDB](http://ravendb.net/docs/theory/ravendb-collections)中的集合是一个虚拟的东西，由元数据决定。这些文档实际上是一起存在的——因此除了通过元数据查询和过滤之外，没有其他方法可以获取“集合”中的所有项目。

您看到的部分延迟是正在构建的动态索引。然后对要索引的项目有延迟。请注意，如果您添加了更多项目（例如几百个），您仍然会得到大致相同的延迟，但您不会取回所有项目。该索引会因为刚刚创建而过时，Raven 只会返回其中的一小部分。在像您这样的测试中，您可能希望明确地等待[非陈旧的结果](http://ravendb.net/docs/client-api/querying/stale-indexes)。在实际应用程序中，您可能希望改为预定义[静态索引](http://ravendb.net/docs/2.0/client-api/querying/static-indexes)。实际上，您可以通过反对静态索引来加快查询速度。延迟将移至索引创建时间而不是查询时间。

如果您想完全避免使用索引，还有另一种方法：

```
session.Advanced.LoadStartingWith<EntityA>("EntityAs/"); 
```

此方法不使用元数据进行过滤 - 它使用键名本身。它直接与文档存储相冲突，无需查询 - 因此速度要快得多。您将需要[分页](http://ravendb.net/docs/client-api/querying/paging)以获得大量结果 - 但无论如何您对查询有同样的担忧。但是使用这种方法，默认页面大小要小得多（25） - 所以你肯定会迟早遇到这个问题。

我希望这能回答你的担忧。如果您还有其他人，请在评论中告诉我。

# javascript - 用html加载html代码

> ID：14786146
> 
> 赞同：0
> 
> 时间：2013-02-09T08:03:30.773
> 
> 标签：javascript, html, embed, loader

我希望 javascript 加载一个 html 代码，以便它可以嵌入到页面中，我得到的只是未经编译的原始 html 代码。

```
<script>
document.write('http://www.example.com/index.php?title=Media:Object4&action=raw&ctype=html')
</script> 
```

它包含里面的 html 编码，我希望它嵌入到页面中，以便我可以与其他网站共享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:08:19.460

您是否尝试从该 URL 获取 HTML 并将其嵌入到页面中？出于安全原因，JavaScript 不能这样做，但如果您使用的是 PHP 服务器端，则可以使用：

```
echo file_get_contents("http://.........."); 
```

或者您可以使用 iframe：

```
<iframe src="http://........" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T08:16:44.243

document.write - 将文本添加到文档中 - 它**不会**从 Web 获取文档。

但是，您可以使用[object 标签](http://www.w3schools.com/tags/tag_object.asp)。

它应该看起来像这样：

```
<object type="text/html" data="http://www.example.com/index.php?title=Media:Object4&action=raw&ctype=html" style="width:100%; height:100%"></object> 
```

此外，如果您要获取的页面在同一个域中，您可以使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)来获取它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T08:18:52.637

完成这项工作的最简单方法是使用`<iframe`>：

```
<iframe src="http://www.example.com/index.php?title=Media:Object4&action=raw&ctype=html"></iframe> 
```

如果要将其加载到特定容器中，则必须使用 JavaScript 执行 Web 请求；jQuery 示例：

```
<div id="container"></div>
<script>
    $('#container').load('http://www.example.com/index.php?title=Media:Object4&action=raw&ctype=html');
</script> 
```

如果远程 URL 不在同一个域中，则需要使用代理：

```
<script>
    $('#container').load('/path/to/myproxy.php', {
        url: 'http://www.example.com/index.php?title=Media:Object4&action=raw&ctype=html'
    });
</script> 
```

然后您的 PHP 代码可能如下所示：

```
<?php

if (parse_url($_POST['url'], PHP_URL_HOST) === 'www.example.com') {
    echo file_get_contents($_POST['url']);
} 
```

# linux - 如果 Netfilter 钩子都指定 NF_IP_PRI_LAST 或 NF_IP_PRI_FIRST，它们的顺序是什么？

> ID：14786148
> 
> 赞同：10
> 
> 时间：2013-02-08T21:19:49.520
> 
> 标签：linux, linux-kernel, netfilter

如果我编写了几个内核模块，并且在所有模块中都指定它们应该是第一个（或最后一个）调用的 netfilter 钩子，那么它们实际上会以什么顺序被调用？

```
netfilter_ops_out.hook     = hook_func_out;
netfilter_ops_out.pf       = PF_INET;
netfilter_ops_out.hooknum  = NF_IP_LOCAL_OUT;
netfilter_ops_out.priority = NF_IP_PRI_FIRST;

ret = nf_register_hook(&netfilter_ops_out);
if (0 > ret) {
    printk("Error registering netfilter hook: %d\n", ret);
    return ret;
}    

netfilter_ops_in.hook      = hook_func_in;
netfilter_ops_in.pf        = PF_INET;
netfilter_ops_in.hooknum   = NF_IP_LOCAL_IN;
netfilter_ops_in.priority  = NF_IP_PRI_LAST;

ret = nf_register_hook(&netfilter_ops_in);
if (0 > ret) {
    printk("Error registering netfilter hook: %d\n", ret);
    return ret;
} 
```

实验性地，我制作了两个模块，`insmod`以两种不同的顺序编辑它们——但它们给出了相同的结果，这意味着存在一些不只是“先到先得”的子顺序。（它也不是按字母顺序排列的......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T09:40:33.350

从nf_register_hook()代码中我们可以知道，如果两个hook属于同一个nf_hooks[reg->pf][reg->hooknum]，那么hook的执行顺序是由优先级决定的。如果优先级也相同，则顺序为“先到先得”。请参阅以下代码：

```
int nf_register_hook(struct nf_hook_ops *reg)
{
    struct nf_hook_ops *elem;
    int err;

    err = mutex_lock_interruptible(&nf_hook_mutex);
    if (err < 0)
        return err;
    list_for_each_entry(elem, &nf_hooks[reg->pf][reg->hooknum], list) {
        if (reg->priority < elem->priority)
            break;
    }
    list_add_rcu(&reg->list, elem->list.prev);
    mutex_unlock(&nf_hook_mutex);
#if defined(CONFIG_JUMP_LABEL)
    static_key_slow_inc(&nf_hooks_needed[reg->pf][reg->hooknum]);
#endif
    return 0;
} 
```

# javascript - Mongojs 从两个集合中获取数据并合并结果

> ID：14786152
> 
> 赞同：1
> 
> 时间：2013-02-09T08:04:47.853
> 
> 标签：javascript, node.js, mongodb, mongojs

我是一个 mongodb 新手，非常感谢您对下面描述的这个问题的帮助。

我有两个集合“用户”和“包”。用户集合方案有 {username, firstname, lastname}，包集合模式有 {username, bagname, bagimage}。

在获取用户包时，我还想显示名字和姓氏。我的问题是我似乎无法正确构建查询。我正在使用 nodejs 和[mongojs](https://github.com/gett/mongojs)驱动程序。以下是我获取所有行李的查询

```
 thmConfig.db.bags.find({status: "1"}).sort({$natural:-1}, function(err, data) 
{
        var bagList = '{"bags":[';

     if( err || !data) res.send('[{"status": "0"}]');
        else data.forEach( function(innerData) {
            console.log(innerData.username);
            bagList += JSON.stringify(innerData)+",";

                 /*
                   This is where I would lke to also append the firstname from the 
                users collection

                   */

        });

    console.log(bagList.slice(0,1));
    res.write(magList.slice(0,-1));
    res.end(']}');
}); 
```

我将不胜感激有关此的任何帮助或指示。我没有关于更改驱动程序的选择，所以我现在特别想使用 mongojs 来实现它。

谢谢和问候， 蒂塔什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:28:14.710

除了从用户集合中读取并以编程方式执行此“加入”操作之外，我认为您没有太多选择。您可以读取每个包的用户文档（在循环内），或者提前将整个用户集合读入一个对象，并通过用户名进行查找

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T14:04:28.067

您可以为此使用`$in`运算符。

伪代码（ish）：

```
// get an array of bags matching your query
db.bags.find({status: "1"}).sort({$natural:-1}, function(err, bags) {
  // get a list of usernames from the bags:
  var usernames = bags.map(function(bag) { return bag.username; });

  // perform query on user table: find all users for which we have a bag
  db.users.find({ username : { $in : usernames } }, function(err, users) {
    // create a mapping of username -> first name for easy lookup
    var usernames = {};
    users.forEach(function(user) {
      usernames[user.username] = user.firstname;
    });

    // map first names to bags
    bags.forEach(function(bag) {
      bag.firstname = usernames[bag.username];
    });

    // done: return it as JSON (no need to build a JSON string ourselves)
    res.send({ bags : bags });
  });
}); 
```

# jquery - JQuery 和 Ajax 不工作

> ID：14786156
> 
> 赞同：0
> 
> 时间：2013-02-09T08:05:27.327
> 
> 标签：jquery, ajax

我的选择标签会给我玩家的名字，然后查询将在后面运行，然后显示结果。我已经完成了一些教程，但找不到答案。我在这里添加我的 html 和 php 文件代码。

```
//html and script player.html file
    <script>
    <script type="text/javascript" src="jque`enter code here`ry.js">
    $(document).ready(function() {

        $('#player').on('change', function() {
           var qString = '{name: ' + $('#player option:selected').text() + '}';
           $.post('getplayer.php', qString, processResponse);
           // $('#resultsGoHere').html(qString);
        });

        function processResponse(data) {
            $('#resultsGoHere').html(data);
        }

    });
    </script>

    <form id="myForm">
    <select id="player" name="player" onchange="showPlayer(this.value)">
    <option value = "None">Choose One</option>
    <option value = "Zidane">Zidane</option>
    <option value = "Messi">Messi</option>
    <option value = "Cristiano Ronaldo">Cristiano Ronaldo</option>
    <option value = "Bergkemp">Bergkemp</option>
    </select></br></br>
    <!--<input type="submit" name="submit" value="Submit" />-->
    </form>

    //php part getplayer.php file
    <?php

        $name = $_POST['theDropdown'];  
        echo "$name";

        /*
        $db = mysql_connect("localhost","root","root");

        mysql_select_db("football");

        $select = "SELECT * FROM players";

        $result = mysql_query($select) or die(mysql_error());

        echo "<table border='1'>
        <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Position</th>
        <th>Club</th>
        <th>Nationality</th>
        <th>Date of birth</th>
        </tr>";

        while($row = mysql_fetch_array($result)){
            echo "<tr>";
            echo "<th>" . $row['id'] . "</td>";
            echo "<th>" . $row['name'] . "</td>";
            echo "<th>" . $row['pos'] . "</td>";
            echo "<th>" . $row['club'] . "</td>";
            echo "<th>" . $row['nationality'] . "</td>";
            echo "<th>" . $row['dob'] . "</td>";
            echo "</tr>";
        }   
            echo "</table>";

        mysql_close($db);
        */  
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:08:24.347

您的请求变量是`name`，但您访问`theDropdown`.

```
// this data object will give you a $_POST['name'] value, not $_POST['theDropdown']
var qString = '{name: ' + $('#player option:selected').text() + '}'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:15:26.387

你可以做这样的事情

```
$(document).ready(function(){
  $("#player").change(function(){
    var dataStr = $(this).val();
    $.ajax({
      type='POST',
      data = 'name='+dataStr,
      url:'process.php',
      success:function(data) {
        alert(data);
      }
    });
  });
}); 
```

所以在 process.php 页面

```
echo $_POST['name'];
// Do Whatever You Want 
```

# c# - 如何将另一个应用程序中突出显示的文本复制到剪贴板？请帮助解释第二个答案

> ID：14786158
> 
> 赞同：0
> 
> 时间：2013-02-09T08:06:09.633
> 
> 标签：c#, clipboard, global

```
SendKeys.Send("^c"); //does not work.
SendKeys.Send("^{BREAK}"); //Also does not work.
SetClipboardData(13 or 7, hWnd); //Also does not work.
SendMessage(GetForegroundWindow(), WM_COPY, IntPtr.Zero, IntPtr.Zero); (const int WM_COPY = 0x0300;)
SendCtrlC(GetForegroundWindow()); //from http://stackoverflow.com/a/273163/1386831 fails 
```

所有这些都失败了..

`Clipboard.GetData()`当您尝试复制的内容在当前应用程序之外时，有什么替代方法可以调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T06:14:17.837

找到目标控件的窗口句柄并向其发布 WM_COPY 消息。

# json - 黑莓编写 JSON

> ID：14786159
> 
> 赞同：0
> 
> 时间：2013-02-09T08:06:46.087
> 
> 标签：json, blackberry

我正在尝试在 J2me Blackberry 中制作这个 JSON。我已经尝试过，但我不知道该怎么做。这是我正在处理的代码。

```
JSONObject jArray= new JSONObject();
JSONObject jObjectData = new JSONObject();

    try { 
          jObjectData.put("name", name);
          jObjectData.put("scaleItems", 2); 
          jArray.accumulate("friends",jObjectData);
        } 
       catch (JSONException e) {
                    // TODO Auto-generated catch block
                       e.printStackTrace();
                      } 
```

下面是我想要实现的 Json。

```
 {
        "newScale": {
            "name": "scaleName",
            "scaleitems": [
                {
                    "name": "option 1"
                },
                {
                    "name": "option 2"
                },
                {
                    "name": "option 3"
                },
                {
                    "name": "option 4"
                },
                {
                    "name": "option 5"
                },
                {
                    "name": "option 6"
                }
            ]
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T12:05:43.807

好吧，我只是将它附加到字符串缓冲区。

```
String Buffer rjson = new StringBuffer("{ \"groupid\": \"" + groupId
                                + "\",");
                        rjson.append("\"question\": \"" + questionArea.getText()
                                + "\",");
                        rjson.append("\"hasComment\": \""
                                + checkBoxComments.getChecked() + "\",");
                        rjson.append("\"endDate\": \"" + fromTo.getText() + "\",");
                        rjson.append("\"newScale\":{");
                        rjson.append("\"name\": \"customName\",");
                        rjson.append("\"scaleItems\": [");

                        rjson.append("{");
                        rjson.append("\"name\": \"" + Option1.getText() + "\" ");
                        rjson.append("},");

                        rjson.append("{");
                        rjson.append("\"name\": \"" + Option2.getText() + "\" ");
                        rjson.append("},");

                        rjson.append("{");
                        rjson.append("\"name\": \"" + Option3.getText() + "\" ");
                        rjson.append("},");

                        rjson.append("{");
                        rjson.append("\"name\": \"" + Option4.getText() + "\" ");
                        rjson.append("},");

                        rjson.append("{");
                        rjson.append("\"name\": \"" + Option5.getText() + "\" ");
                        rjson.append("},");

                        rjson.append("{");
                        rjson.append("\"name\": \"" + Option6.getText() + "\" ");
                        rjson.append("}");

                        rjson.append("]}}"); 
```

# java - scanner.nextInt()，避免超出范围？

> ID：14786162
> 
> 赞同：0
> 
> 时间：2013-02-09T08:07:18.247
> 
> 标签：java, int, range, java.util.scanner, out

我已经完成了一个将十进制数转换为二进制数的简单程序`(32bit)`。`2147483647`如果用户输入溢出数字（任何超过），我想实现某种类型的错误消息。我尝试了一个`if_else , loop`，但很快发现我什至无法做到这一点。所以我把输入作为一个字符串搞砸了，然后使用了诸如此类的东西`.valueOF()`，但似乎仍然无法解决这个问题。

`a >2147483648`如果我不能首先存储值，我看不出如何比较任何值。

这是我对该`getDecimal()`方法的裸代码：

`numberIn = scan.nextInt();`

编辑:: 尝试 try/catch 方法后，遇到编译错误

`"non-static method nextInt() cannot be referenced from a static context"`.

我的代码如下。

```
public void getDec()
{
    System.out.println("\nPlease enter the number to wish to convert: ");

    try{
        numberIn = Scanner.nextInt(); 
    }
        catch (InputMismatchException e){ 
        System.out.println("Invalid Input for a Decimal Value");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:11:46.127

如果下一个标记无法转换为 ，您可以使用[`Scanner.hasNextInt()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextInt%28%29)返回 的方法。然后在块中，您可以将输入读取为字符串，并使用适当的错误消息将其打印出来。就个人而言，我更喜欢这种方法：`false``int``else`[`Scanner.nextLine()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)

```
if (scanner.hasNextInt()) {
    a = scanner.nextInt();
} else {
    // Can't read the input as int. 
    // Read it rather as String, and display the error message
    String str = scanner.nextLine();
    System.out.println(String.format("Invalid input: %s cannot be converted to an int.", str));
} 
```

* * *

实现这一点的另一种方法当然是使用`try-catch`块。[`Scanner#nextInt()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)当方法`InputMismatchException`无法将给定的输入转换为`integer`. 所以，你只需要处理`InputMismatchException`： -

```
try {
    int a = scan.nextInt();
} catch (InputMismatchException e) {
    System.out.println("Invalid argument for an int");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T08:11:42.867

我建议你用 try/catch 块包围该语句`NumberFormatException`。

像这样：

```
try {
  numberIn = Integer.valueOf(scan.next());
}catch(NumberFormatException ex) {
  System.out.println("Could not parse integer or integer out of range!");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T08:12:06.467

使用`exceptions`.. 每当输入的数字超过其存储容量时，就会引发异常

请参阅 docs.oracle.com/javase/tutorial/essential/exceptions/

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T08:12:25.217

您可以使用 hasNextInt() 方法来确保有一个整数可供读取。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T08:13:29.670

尝试这个 ：

```
long num=(long)scan.nextLong();
    if (num > Integer.MAX_VALUE){
    print error.
    }
else
int x=(int)num; 
```

或尝试捕捉：

```
try{
    int number=scan.nextInt()
    }
}catch(Exception ex){
    print the error
    } 
```

# extjs - Sencha touch Animation 的 after 处理程序不使用函数

> ID：14786163
> 
> 赞同：0
> 
> 时间：2013-02-09T08:07:22.130
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我正在使用 Sencha touch 2.0.1.1。在视图中，我在容器的 dragend 函数中做一些动画，在这个动画结束时我想执行更多的事情，但是`after`处理程序没有将函数作为处理程序。这是代码

```
 Ext.Animator.run({
                    element: dataview.element,
                    duration: 500,
                    autoClear : true,
                    easing: 'ease-in',
                    preserveEndState: true,
                    to: {
                        height: to_h
                    },
                    from: {
                        height: dataview.element.getHeight()
                    },
                    after: function() {
                        console.log ("After run");
                    }     
                }); 
```

这是我得到的错误：

```
Uncaught Error: [ERROR][Ext.fx.animation.Abstract#applyAfter] Invalid config, must be a valid config object Console.js:17 
```

但如果我这样做，这会以某种方式起作用：

```
 Ext.Animator.run({
                    element: dataview.element,
                    duration: 500,
                    autoClear : true,
                    easing: 'ease-in',
                    preserveEndState: true,
                    to: {
                        height: to_h
                    },
                    from: {
                        height: dataview.element.getHeight()
                    },
                    after: {
                        fn : console.log (this)
                    }
                }); 
```

由于我想做除了 console.log 之外的很多事情，所以有人可以建议我正确的方法来使用这个处理程序来执行一个就地或视图中编写的函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:44:17.297

尝试 'onEnd:' 而不是 'after:'

# oracle - 触发器中的字符到数字转换错误

> ID：14786164
> 
> 赞同：0
> 
> 时间：2013-02-09T08:07:38.293
> 
> 标签：oracle, if-statement, plsql, triggers, to-char

触发器将如何在两个时间之间插入？插入时出现条件`character to number conversion`错误。`if`下面是我的触发器。

```
create or replace trigger TRI_INSERT
  after insert on stud_details  
  referencing old as old new as new
  for each row
declare
        strTime varchar2(20) := :new.time_stamp;   -- (eg: '02/08/2013 11:09:42 PM')
  begin
        if (to_char(strTime, 'hh24:mi:ss') between '22:00:00' and '23:59:59') then
             insert into stud_clas_details
              (id,
               v-id,
               w-id,
               al_id,
               time,
               Time_Stamp)
             values
               (seq_ve_id.nextval,
                :new.vehicle_id,
                 :new.way_id,
                 'xxxx',
                 strTime,
                 sysdate);
         end if;
 end TRI_INSERT; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:54:52.903

您不能`to_char()` 使用日期格式的 varchar2 并期望它能够工作。

相反，您应该这样做

```
 if (to_char(:new.time_stamp, 'hh24:mi:ss') between '22:00:00' and '23:59:59') then 
```

另外，如果您想以特定格式将时间插入表中，请使用

```
to_char(:new.time_stamp, 'hh24:mi:ss') 
```

与

```
strTime varchar2(20) := :new.time_stamp; 
```

您只需在该会话的默认 NLS_DATE_FORMAT 中插入日期（每个会话可能有所不同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T18:08:22.337

如何改为使用：

```
if extract(hour from :new.time_stamp) in (22,23) then ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-23T07:24:08.873

if 条件中的问题.. 现在它工作正常.. 谢谢大家。

创建或替换触发器 TRI_INSERT

```
 after insert on stud_details  

  referencing old as old new as new

  for each row 
```

宣布

```
 strTime varchar2(20) := :new.time_stamp;   -- (eg: '02/08/2013 11:09:42 PM')
    strFromTime varchar2(20):= '22:00:00'
    strToTime varchar2(20):= '23:59:59' 
```

开始

```
 if ((to_char(strTime, 'hh24:mi:ss') > strFromTime) and (to_char(strTime,           
         'hh24:mi:ss') < strToTime)) then
         insert into stud_clas_details
          (id,
           v-id,
           w-id,
           al_id,
           time,
           Time_Stamp)
         values
           (seq_ve_id.nextval,
            :new.vehicle_id,
             :new.way_id,
             'xxxx',
             strTime,
             sysdate);
     end if; 
```

结束 TRI_INSERT；

# javascript - 尝试使用此 JS 代码回答 Project Euler 5 时，不断收到“RangeError：超出最大调用堆栈大小”？

> ID：14786174
> 
> 赞同：-1
> 
> 时间：2013-02-09T08:09:16.293
> 
> 标签：javascript

问题 5：2520 是可以除以 1 到 10 的每个数字而没有任何余数的最小数字。

能被 1 到 20 的所有数整除的最小正数是多少？

我尝试解决方案的代码：

```
var x = 2520;
var div = 20;
var smallest = function(){
    while (div > 0){
        if (x%div ===0){
            div = div - 1;
            smallest();
        }
        else{
            x = x+1;
            div = 20;
            smallest()
        }
    };
    return x;
};
console.log(smallest()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:21:10.877

答案是**232792560** - 需要太多的递归才能得到这个结果。在这种情况下，堆栈溢出是不可避免的。如果迭代解决方案足够好，您可以使用：

```
var smallest = function(_max) {
    var result = _max;
    for(var i = 1; i <= _max; i++) {
        if(result % i !== 0) {
            result++;
            i = 0;
        }
    }
    return result;
};

smallest(10); // => 2520
smallest(20); // => 232792560 
```

# ruby-on-rails - 使用 authlogic 和 omniauth-facebook 登录 Facebook

> ID：14786177
> 
> 赞同：0
> 
> 时间：2013-02-09T08:09:50.210
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我有 user_session_controller。在这里，我使用了 authlogic gem 和 'omniauth-facebook' gem。我希望该用户可以在我的网站上使用 facebook 登录。我是全新的。请指导我如何修改此代码以使用 facebook 登录。

```
def create
    @user_session = UserSession.new(params[:user_session],true)
    if @user_session.save
        flash[:notice] = "Login successful!"
        unless cookies[:last_visited].nil?
            set_last_visited
        end

        cookies.permanent[:last_visited] = Time.now
        if params[:remember_me]
            user = @user_session.user
        user.update_attributes(:remember_token => create_remember_token)
            cookies[:remember_token] = { :value => user.remember_token, :expires => 24.weeks.from_now }
        end
        redirect_back_or_default users_url(@current_user)
    else
        flash[:error]="invalid login and password"
        render :action => :new
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:58:44.023

请看我的回复：

[设计、Omniauth 和 Facebook 集成会话错误](https://stackoverflow.com/questions/11093120/devise-omniauth-and-facebook-integration-session-error/11097308#11097308)

你可以找到更多的教程：

[https://github.com/plataformatec/devise/wiki/OmniAuth:-概述](https://github.com/plataformatec/devise/wiki/OmniAuth:-Overview)

# python - 如何使用 opencv2 将 1 通道图像转换为 3 通道？

> ID：14786179
> 
> 赞同：24
> 
> 时间：2013-02-09T08:10:18.807
> 
> 标签：python, arrays, opencv

我真的被这个难住了。我的代码中有一个*[BGR2GRAY]*的图像，现在我需要在其中添加彩色圆圈等。当然这不能在 1 通道矩阵中完成，而且我似乎无法将这该死的东西变回 3。

`numpy.dstack()`崩溃一切

opencv2 中不存在 GRAY2BGR

`cv.merge(src1, src2, src3, dst)`已经变成了`cv2.merge(mv)`mv =“矩阵向量”，无论这意味着什么。

有任何想法吗？

[Opencv2.4.3参考手册](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDcQFjAB&url=http%3A%2F%2Ffossies.org%2Funix%2Fmisc%2FOpenCV-2.4.3.tar.gz%3Aa%2FOpenCV-2.4.3%2Fdoc%2Fopencv2refman.pdf&ei=awUWUfnbJ4Ly0wGmuoC4Cw&usg=AFQjCNHZZKb8aioAVevF3gpQQeuRT7SxyQhttps://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDcQFjAB&url=http%3A%2F%2Ffossies.org%2Funix%2Fmisc%2FOpenCV-2.4.3.tar.gz%3Aa%2FOpenCV-2.4.3%2Fdoc%2Fopencv2refman.pdf&ei=awUWUfnbJ4Ly0wGmuoC4Cw&usg=AFQjCNHZZKb8aioAVevF3gpQQeuRT7SxyQ)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-06-21T09:43:34.620

它是 python 的等价物： imgray 是一个包含 1 通道图像的 numpy 数组。

```
img2 = cv2.merge((imgray,imgray,imgray)) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-09T10:09:06.713

这是在 Python 中执行此操作的一种方法：

```
img = cv2.imread("D:\\img.jpg")
gray = cv2.cvtColor(img, cv.CV_BGR2GRAY)

img2 = np.zeros_like(img)
img2[:,:,0] = gray
img2[:,:,1] = gray
img2[:,:,2] = gray

cv2.circle(img2, (10,10), 5, (255,255,0))
cv2.imshow("colour again", img2)
cv2.waitKey() 
```

这是 OpenCV3 的完整代码：

```
import cv2
import numpy as np
img = cv2.imread('10524.jpg')
gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)
img2 = np.zeros_like(img)
img2[:,:,0] = gray
img2[:,:,1] = gray
img2[:,:,2] = gray
cv2.imwrite('10524.jpg', img2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-30T08:48:33.187

下面我假设您没有正确形状的 3 通道图像，因此 zeros_like 函数（在上面的答案中使用）将没有用。

```
img2 = np.zeros( ( np.array(img).shape[0], np.array(img).shape[1], 3 ) )
img2[:,:,0] = img # same value in each channel
img2[:,:,1] = img
img2[:,:,2] = img 
```

如果 img 是 numpy 数组，那么它可以从 缩短`np.array(img).shape`为`img.shape`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-30T12:23:38.940

当我需要这个时，我正在使用 tensorflow。这是我的解决方案：

```
image = tf.expand_dims(image, -1)
x1 = image.shape[0]
x2 = image.shape[1]
image = tf.reshape(tf.broadcast_to(image, (x1, x2, 3)),  (x1, x2, 3)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-09T08:43:37.947

我不能说python，但我可以告诉你C++接口......

```
gray_image //you have it already
Mat im_coloured = Mat::zeros(gray_image.rows,gray_image.cols,CV_8UC3);

vector<Mat> planes;

for(int i=0;i<3;i++)
    planes.push_back(gray_image);

merge(planes,im_coloured); 
```

# android - 当在 android 手机中检测到呼入/呼出时，我想向我的父母号码发送一条短信

> ID：14786180
> 
> 赞同：1
> 
> 时间：2013-02-09T08:10:19.793
> 
> 标签：android, android-intent

我正在尝试使用广播接收器开发一个 android 应用程序，我的应用程序意味着，首先我想在我的第一个活动中定义一个父号码并将其存储到数据库中，当我们安装应用程序时，这个活动将启动并将父号码保存到数据库，然后广播接收器想要激活并监听呼叫状态的变化，如果通过该电话拨打任何电话我想向父号码发送消息......？？......在这里我如何使用广播接收器...有可能...我在下面提到我的代码......我希望你能帮我解决这个问题。我尝试了很多方法，但我无法得到结果。首先我创建了我的第一个我访问我的数据库值并尝试激活广播接收器的活动。

```
 public class PARENT_CALLActivity extends Activity 
{

    String PARENT=null;
    EditText edparent;
    Button submit;
    String parent_number;
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        edparent=(EditText)findViewById(R.id.editText1);
        submit=(Button)findViewById(R.id.btnsubmit);

        submit.setOnClickListener(new OnClickListener() 
        {

            @Override
            public void onClick(View v) 
            {
                // TODO Auto-generated method stub

                PARENT=edparent.getText().toString();   

                MyDabasehandler db=new MyDabasehandler(getApplicationContext());

                if(db.getContact().equals(null))
                {
                    db.addContact(new Contacts(PARENT));

                }
                else
                {
                    db.editContact();
                }
             Intent reciver=new Intent(getApplicationContext(),myBroadcast.class);
             startActivity(reciver);
            }

        });       
    }
} 
```

**我的广播接收器....**

```
 public class myBroadcast extends BroadcastReceiver
{

    String out_number;
    String myparent;
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        // TODO Auto-generated method stub

     out_number=intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);

    MyDabasehandler db=new MyDabasehandler(context);

    myparent=db.getContact().toString();

        //Toast.makeText(context, out_number+"number", Toast.LENGTH_LONG).show();

        SmsManager sm=SmsManager.getDefault();
          sm.sendTextMessage(myparent, "5554", "calling..to"+out_number, null, null);//5554 is my emulator number to check its in emulator
        Toast.makeText(context, "send"+out_number, Toast.LENGTH_SHORT).show();

    }

} 
```

**我的清单是..**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="sha.pcall"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />
  <uses-permission android:name="android.permission.SEND_SMS"/> 
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS"/>

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".PARENT_CALLActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>
        <activity android:name=".MyDabasehandler"
        android:label="@string/app_name">       
        </activity>

        <activity android:name=".Contacts"
        android:label="@string/app_name">
        </activity>

        <receiver android:name=".myBroadcast"
                  android:label="@string/app_name">
            <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL"/>
                <action android:name="android.intent.action.PHONE_STATE" />                
            </intent-filter>
        </receiver> 

    </application>
/manifest> 
```

**当我按下提交按钮时，我被迫关闭。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:20:54.743

您应该放置显示异常 StackTrace 的 LogCat 输出。

我可以在代码中发现您似乎遗漏了什么

`<uses-permission android:name="android.permission.READ_PHONE_STATE" >`

# java - 单线程使用不同的连接参数写入不同的数据库

> ID：14786183
> 
> 赞同：4
> 
> 时间：2013-02-09T08:10:29.153
> 
> 标签：java, database, jdbc, performance

我正在开发一个项目，其中我在具有不同模式的不同数据库中拥有三个表。所以这意味着我为这三个表使用 JDBC 连接了三个不同的连接参数-

让我们假设——

**对于表 1-**

```
Username:- A
Password:- B
URL:       C

Columns-
ID1         String
Account1    String 
```

**对于表 2-**

```
Username:- P
Password:- Q
URL:-      R

Columns-
ID2         String
Account2    String 
```

**对于表 3-**

```
Username:- T
Password:- U
URL:-      V

Columns-
ID3         String
Account3    String 
```

我应该使用 JDBC 插入所有三个表或其中任何一个表。

以下是我拥有的三个用例-

> 1.  如果假设我只传递 Table1 从命令提示符，那么我假设通过连接到 Table1 仅在 Table1 列中插入。
> 2.  如果我从命令提示符传递 Table1、Table2，那么我想通过连接到 Table1 和 Table2 来插入 Table1 和 Table2 列。
> 3.  如果我传递 Table1、Table2 和 Table3，那么我假设使用各自的连接参数输入所有三个表

我无法理解如何以更简洁的方式为上述特定场景编写代码，以便如果我想出四个表，它也可以在不久的将来扩展。我可以有一个常量文件，它可以存储需要为三个表中的任何一个执行的 SQL 以及其他一些常量。

```
public static void main(String[] args) {

}

 class Task implements Runnable {

    private Connection dbConnection = null;
    private PreparedStatement preparedStatement = null;

    public Task() {

    }

    @Override
    public void run() {

    dbConnection = getDbConnection();

    //prepare the statement and execute it

    }
  }

    private Connection getDBConnection() {

    Connection dbConnection = null;

          Class.forName(Constants.DRIVER_NAME);
      dbConnection = DriverManager.getConnection( , , );

      return dbConnection;
    } 
```

任何人都可以提供一些想法，我应该如何继续前进？

**笔记：-**

每个表中的列会有很大的不同。就像在某些表中，列可以是 10，而在其他一些表中，列可以是 20。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:24:12.450

创建`databases.properties`具有如下内容的文件：

```
# Table 1
table1.url: jdbc:mysql://localhost:3306/garden
table1.user: gardener
table1.password: shavel
table1.table: fruits
table1.column.id: fruitID
table1.column.color: fruitColor
table1.column.weight: fruitWeight
# ... More fruit columns here ...

# Table 2
table2.url: jdbc:mysql://otherhost:3306/forest
table2.user: forester
table2.password: axe
table2.table: trees
table2.column.id: treeID
table2.column.height: treeHeight
# ... More tree columns here ...

# ... More tables here ... 
```

然后做这样的事情：

```
public static void main (String [] args)
{
    Properties databasesProperties = new Properties ();
    databasesProperties.load ("databases.properties");

    for (String arg: args)
    {
        String url = databasesProperties.get (arg + ".url");
        String user = databasesProperties.get (arg + ".user");
        String password= databasesProperties.get (arg + ".password");
        String table = databasesProperties.get (arg + ".table");

        String columnPrefix = arg + ".column."
        Map <String, String> columns = new HashMap <String, String> ();
        for (String key: databasesProperties.stringPropertyNames ())
        {
            if (key.startsWith (columnPrefix))
                columns.put (
                    key.substring (columnPrefix.length ()), 
                    databasesProperties.get (key));
        }

        doInsert (url, user, password, table, columns);
    }
} 
```

以后您可以随时将更多表添加到您的`databases.properties`文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T14:04:14.183

将您的数据库属性保存在类文件`DBPropery.java`中。

```
final class DBProperty
{
    static String[]  urls = {
                        "C",
                        "R",
                        "V"
                    }; //You can add more URLs here.
    static String[] driver= {
                        "Driver1",
                        "Driver2",
                        "Driver3"
                    };//You can add more drivers string
    static String[]  table = {
                        "Table1",
                        "Table2",
                        "Table3"
                    };//You can add more table names here According to URLs mentioned in urls array.
    static String[]  user = {
                        "A",
                        "P",
                        "T"
                    };//You can add more user names here according to URls mentioned in urls array.
    static String[]  pwd = {
                        "B",
                        "Q",
                        "U"
                    };//You can add more Password here according to URls mentioned in urls array.
    static String[] queries = {
                        "Query for Table1",
                        "Query for Table2",
                        "Query for Table3",
                    };//You can add more queries here for more tables according to URls mentioned in urls array.
    static int[]  columns ={
                        2,
                        2,
                        2
                    };//You can change the column numbers according to need . 0th index belongs to Table1 , 1 to table2....so on. 
                      //If you add more tables , add corresponding columns count to next index.
    static String[] columnValues ={
                                "1^John",
                                "34^Vicky",
                                "65^Ethen"
                            };//String at each index represents a row in corresponding table in table[] array. each column is seperated by delimiter "^".
} 
```

`DBProperty.java`在文件中进行所有更改。
然后继续下面的类文件

```
import java.sql.*;
import java.util.*;
class MultiTableInsert implements Runnable
{
    Map<String,Integer> columnsInTable;
    Map<String,String>  tableDriver;
    Map<String,String>  rowForTable;
    Map<String,String>  queryForTable;
    Map<String,String>  urlForTable;
    Map<String,String>  userForTable;
    Map<String,String>  pwdForTable;
    String[]                tables ;
    public MultiTableInsert(String... tables)//Loading all Database Settings here..
    {
        this.tables = tables;
        columnsInTable  = new LinkedHashMap<String,Integer>();
        rowForTable = new LinkedHashMap<String,String>();
        tableDriver = new LinkedHashMap<String,String>();
        urlForTable = new LinkedHashMap<String,String>();
        userForTable= new LinkedHashMap<String,String>();
        pwdForTable = new LinkedHashMap<String,String>(); 
        for (int i = 0 ; i < DBProperty.urls.length ; i++ )
        {
            try
            {
                tableDriver.put(DBProperty.table[i],DBProperty.driver[i]);
                queryForTable.put(DBProperty.table[i],DBProperty.queries[i]);
                columnsInTable.put(DBProperty.table[i],DBProperty.columns[i]);
                rowForTable.put(DBProperty.table[i],DBProperty.columnValues[i]);
                urlForTable.put(DBProperty.table[i],DBProperty.urls[i]);
                userForTable.put(DBProperty.table[i],DBProperty.user[i]);
                pwdForTable.put(DBProperty.table[i],DBProperty.pwd[i]);
            }
            catch (Exception ex)
            {
                ex.printStackTrace();
            }
        }
    }
    @Override
    public void run()
    {
        insertIntoTable(tables);
    }
    private void insertIntoTable(String... tables)
    {
        for (String tble : tables )
        {
            Connection con = null;
            PreparedStatement pStmt = null;
            try
            {
                Class.forName(tableDriver.get(tble));
                con = DriverManager.getConnection(urlForTable.get(tble),userForTable.get(tble),pwdForTable.get(tble)); 
                pStmt = con.prepareStatement(queryForTable.get(tble));
                int columns = columnsInTable.get(tble);
                String sRow = rowForTable.get(tble);
                StringTokenizer tokenizer = new StringTokenizer(sRow,"^");
                for (int i = 0; i < columns ; i++)
                {
                    pStmt.setString(i+1,(String)tokenizer.nextElement());
                }
                pStmt.execute();
            }
            catch (Exception ex)
            {
                ex.printStackTrace();
            }
            finally
            {
                try
                {
                    con.close();
                }catch (Exception ex){}
                try
                {
                    pStmt.close();
                }catch (Exception ex){}
            }
        }
    }
    public static void main(String[] args) 
    {
        int length = args.length;
        int THREAD_COUNTS = 10;//Number of threads you want to start.
        switch (length)
        {
            case 0: 
                    System.out.println("Usage: javac MultiTableInsert Table1/Table2/Table3 <Table1/Table2/Table3> <Table1/Table2/Table3>");
                    System.exit(0);
            case 1:
                    for (int i = 0 ; i < THREAD_COUNTS ; i++)
                    {
                        MultiTableInsert mti = new MultiTableInsert(args[0]);
                        Thread th = new Thread(mti,"Thread"+i);//Create New Thread
                        th.start();                             //Start Thread
                    }
                    break;
            case 2:
                    for (int i = 0 ; i < THREAD_COUNTS ; i++)
                    {
                        MultiTableInsert mti = new MultiTableInsert(args[0],args[1]);//Create New Thread 
                        Thread th = new Thread(mti,"Thread"+i);                      //Start Thread     
                        th.start();
                    }
                    break;
            default:
                    for (int i = 0 ; i < THREAD_COUNTS ; i++)
                    {
                        MultiTableInsert mti = new MultiTableInsert(args[0],args[1],args[2]);//Create New Thread 
                        Thread th = new Thread(mti,"Thread"+i);                              //Start Thread     
                        th.start();
                    }
                    break;
        }
    }
} 
```

# ruby-on-rails - 如何正确使用模拟？

> ID：14786185
> 
> 赞同：3
> 
> 时间：2013-02-09T08:11:01.253
> 
> 标签：ruby-on-rails, ruby, testing, rspec, mocking

我有这堂课：

```
class EnablePost

  def initialize(post_klass, id)
    raise "oops" if post_klass.blank?
    @post_klass = post_klass 
    @id = id
  end

  def perform
    post = @post_klass.find_by_id(@id)
    return unless post
    post.update_attribute :enabled, true
  end

end 
```

我必须编写的规范来测试上述内容：

```
describe EnablePost do
  it "should enable a post" do
    post = mock
    post.should_receive(:blank?).and_return(false)
    post.should_receive(:find_by_id).with(22).and_return(post)
    post.should_receive(:update_attribute).with(:enabled, true)
    result = EnablePost.new(Post, 22).perform
    result.should be_true
  end
end 
```

但我真正想做的是把`EnablePost`它当作一个黑匣子。我不想嘲笑`:blank?`,`:find_by_id`或`:update_attribute`. 也就是说，我希望我的规范看起来像：

```
describe EnablePost do
  it "should enable a post" do
    post = mock
    result = EnablePost.new(post, 22).perform
    result.should be_true
  end
end 
```

我在这里想念什么？我是否错误地使用了模拟？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:06:38.277

是的，你混淆了模拟和存根。

一个很好的模拟解释：http: [//jamesmead.org/talks/2007-07-09-introduction-to-mock-objects-in-ruby-at-lrug/](http://jamesmead.org/talks/2007-07-09-introduction-to-mock-objects-in-ruby-at-lrug/)

模拟：

*   不同的人给不同的东西
*   模棱两可的术语
*   与 Rails 的“模拟”混淆</li>

模拟对象：

*   预先设置的预期方法调用
*   验证实际调用与预期调用匹配

另请查看[http://martinfowler.com/articles/mocksArentStubs.html](http://martinfowler.com/articles/mocksArentStubs.html) [感谢评论中的用户 Zombies]

如果您使用的是 RSpec，它的别名是 double、mock 和 stub。RSpec 希望您选择使您的代码最清晰的方法名称。

您的第一段测试代码正确使用了“模拟”一词。您正在设置您希望提前调用的方法调用，然后执行它们。

但是，您正在测试代码的两个不同区域：第一个区域是初始化方法，第二个区域是 #perform 方法。

如果您编写较小的方法，您可能会发现更容易模拟和存根：

```
# What you want to test here is the raise and the member variables.
# You will stub the post_klass.
def initialize(post_klass, post_id)  # post_id is a better name
  raise "oops" if post_klass.blank?
  @post_klass = post_klass 
  @post_id = post_id  # because we don't want to mask Object#id
end

attr_accessor :post_id  
attr_accessor :post_klass

# What you want to test here is the post_klass calls #find_by_id with post_id.
# See we've changed from using instance variables to methods.
def post
  post_klass.find_by_id(post_id)
end

# What you want to test here is if the update happens.
# To test this, stub the #post method.
def perform
  p = post
  return unless p
  p.update_attribute :enabled, true
end 
```

当您以这种方式编写代码时，您可以轻松地存根 #post 方法。

请参阅此 RSpec 示例源代码，显示模拟和存根之间的区别：

[http://blog.firsthand.ca/2011/12/example-using-rspec-double-mock-and.html](http://blog.firsthand.ca/2011/12/example-using-rspec-double-mock-and.html)

# python - 如何从 bash shell 执行 .py 脚本

> ID：14786186
> 
> 赞同：2
> 
> 时间：2013-02-09T08:11:09.460
> 
> 标签：python, bash, shell

我打开一个终端并 cd 进入我的文档，其中有一个名为 trianglearea.py 的 .py 文件，这是一个我正在尝试执行的非常基本的程序。我在 shell 中输入 /Documents$ python trianglearea.py 并没有任何反应；bash 提示我输入另一个命令，就好像我刚才提示的内容不存在一样。我尝试 ./trianglearea.py 但我收到语法错误，因为我没有输入交互式 python 并且 bash 不理解我的 python 脚本。如果我转到文件 gui 样式并双击并说在终端中运行，一个窗口会闪烁并消失，但这不是我想要的。我想让我的小程序在交互式 python 中运行，这样我就可以输入内容并实际使用我的函数。这就是我在 .py 文件中的全部内容

```
def area(base,height):
    ''' (number, number) - number
    Return area of a triangle with dimensions base * height

    >>>>area(10,5)
    25.0
    '''
    return base*height/2 
```

我知道这不应该那么难，但它难倒了我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T08:14:58.220

什么也没发生的原因是因为你没有在你的脚本中调用你的方法，所以文件只是定义了方法然后退出。这是一个快速修复：

```
def area(base,height):
    ''' (number, number) - number
    Return area of a triangle with dimensions base * height

    >>>>area(10,5)
    25.0
    '''
    return base*height/2

print area(10,5) # calling the method 
```

解决此问题的正确方法是添加此检查：

```
if __name__ == '__main__':
    print area(10,5) 
```

从命令行运行 Python 脚本时，特殊变量`__name__`设置为字符串`'__main__'`（有关更多信息，请参阅[此答案](https://stackoverflow.com/questions/419163/what-does-if-name-main-do)）。该 if 语句本质上是说，*“如果我从命令行运行，请使用参数 10 和 5 执行方法区域并打印结果。”*

最后，为了确保您的脚本可以像这样从提示符运行`./myscript.py`，您需要告诉您的 shell 如何执行它。这是通过在文件顶部添加[shebang 行来完成的。](http://en.wikipedia.org/wiki/Shebang_(Unix))

结合所有这些，您的文件如下所示：

```
#!/usr/bin/python

def area(base,height):
        ''' (number, number) - number
        Return area of a triangle with dimensions base * height

        >>>>area(10,5)
        25.0
        '''
        return base*height/2

if __name__ == '__main__':
    print area(10,5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T08:19:37.907

假设如果您的脚本文件名是，`mycode.py`那么您可以使用`python -i mycode.py`：

```
$ python -i mycode.py
>>> area(10, 5) 
```

`-i` 当脚本作为第一个参数传递或使用 -c 选项时，在执行脚本或命令后进入交互模式。[**参考**](http://www.python.org/doc/QuickRef.html)

# c - 在 C 代码中静态链接 libclang

> ID：14786189
> 
> 赞同：4
> 
> 时间：2013-02-09T08:11:24.483
> 
> 标签：c, libclang

我正在尝试使用 libclang 中可用的前端为 C 代码编写一个简单的语法检查器。由于部署问题，我需要能够静态链接 libclang 中的所有库，而不是传递包含所有库的 .so 文件。

我正在从源代码构建 clang/llvm，并且在 llvm/Release+Asserts/lib 中我有一堆 .a 文件，我认为我应该能够使用它们，但它似乎从来没有工作过（链接器喷出数千有关缺少符号的错误）。但是，当我使用 libclang.so 编译它时，该目录中也存在如下：

```
clang main.c -o bin/dlc -I../llvm/tools/clang/include -L../llvm/Release+Asserts/lib/ -lclang 
```

一切似乎都运作良好。

为了使这项工作，我需要包含最少的 .a 文件集是多少？我已经尝试在构建输出目录中包含绝对所有的 .a 文件，并以不同的顺序将它们提供给 clang/gcc，但没有任何成功。我只需要 libclang 的 Index.h 中提到的函数，但似乎没有任何资源或文档说明各种 libclang*.a 文件的用途。了解 libclang.so 引入了哪些文件会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T20:54:05.557

只要整个项目具有所有静态库（我在我的 Release/lib 目录中计算了 116 个），以下应该可以工作。

clang main.c -o bin/dlc -I../llvm/tools/clang/include ../llvm/Release/lib/*.a

[编辑：clang main.c -o bin/dlc -I../llvm/tools/clang/include ../llvm/Release/lib/libclang.a ../llvm/Release/lib/*.a]

请注意，输出二进制文件不是静态的，因此如果您使用此语法，则不需要任何 gcc 或 ld 的 -static 标志。

如果这不起作用，您可能需要按顺序列出库：如果某个库需要另一个库中可用的函数，则可能需要首先在命令行中列出它。请参阅有关链接顺序的评论：http: [//gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Link-Options.html#Link-Options](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Link-Options.html#Link-Options)

# linux - malloc_stats 和 /proc/pid/stat 之间的相关性

> ID：14786190
> 
> 赞同：0
> 
> 时间：2013-02-09T08:11:26.763
> 
> 标签：linux, memory-leaks, embedded, malloc

我正在研究嵌入式 linux 系统。我了解[malloc_stats](http://man7.org/linux/man-pages/man3/malloc_stats.3.html)和[/proc/pid/stats](http://www.kernel.org/doc/man-pages/online/pages/man5/proc.5.html)提供的信息。我想知道 malloc_stats 打印的信息与 /proc/stats 提供的内存使用信息有什么关系。背景是我想检测我的应用程序中的每个线程以检查内存泄漏。Malloc_stats 打印有用的信息，但不能以编程方式使用。/proc//task/ 有有用的信息，但我无法将其与使用的堆内存相关联当前线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:29:14.550

您是否忽略了[`mallinfo()`](http://man7.org/linux/man-pages/man3/mallinfo.3.html)库功能？它是`malloc_stats()`从中获取信息的地方。

直接回答这个问题： 中的数据`/proc`将反映进程的总内存使用情况，包括内存分配和空闲内存之间的松弛空间，以及根本没有分配的正在使用的内存`malloc()`（例如，堆栈，全局/静态变量等）。`malloc_stats()`将其分解为实际分配的内容和未分配的内容。

# ruby-on-rails - 如何在 Rails 中生成这个选择标签？

> ID：14786199
> 
> 赞同：0
> 
> 时间：2013-02-09T08:13:03.470
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试生成这个：

```
<select class="input-small">
   <option value="1">1+ bd</option>
   <option value="2">2+ bd</option>
   <option value="3">3+ bd</option>
   <option value ="4">4+ bd</option>
   <option value ="5">PH</option>
</select> 
```

我试过这个：

```
<%= f.collection_select :num_bedrooms, ["1+ br", "2+ br", "3+ br", "4+ br", "PH"], [1, 2, 3, 4, 5], {}, {:class => "input-small"} %> 
```

但这给了我这个：

```
TypeError at /    
Message {} is not a symbol 
```

如何使用集合选择生成该选择标签？

谢谢。

**编辑1：**

这是@shrimpsushi 的答案产生的输出：

```
<select id="search_num_bedrooms" name="search[num_bedrooms]"><option value="<option value="1">1+ bd</option>
<option value="2">2+ bd</option>
<option value="3">3+ bd</option>
<option value="4">4+ bd</option>">collection</option>
<option value="input_html" class="input-small">input_html</option></select> 
```

`"> collection</option>`注意第四个选项之后的奇怪标签。更不用说`input_html`应用了类的选项值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:14:10.460

```
<%= f.select :num_bedrooms, options_for_select({"1+ br" => 1, "2+ br" => 2}), {}, class: 'input-small' %> 
```

# android - android如何在返回时发送多标签数据

> ID：14786202
> 
> 赞同：0
> 
> 时间：2013-02-09T08:13:26.353
> 
> 标签：android, android-activity

对不起，我的英语不好

我想当用户点击按钮时，一个新的活动将开始并返回数据，我做这个

### 第一项活动

```
b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivityForResult(new Intent(EditCustomerProfile.this, Address.class), 1);
            }
        });
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);
        String s = data.getData().toString();
        EditText et = (EditText)findViewById(R.id.et_edit_customer_profile_address);
        et.setText(s);
    } 
```

### 第二次活动

```
Intent resultsIntent = new Intent();
        String data = "adsfasd";
        resultsIntent.setData(Uri.parse(data));
        setResult(RESULT_OK, resultsIntent);
        finish(); 
```

它工作得很好，我想不只是发送一个字符串，我想发送 3 个字符串，如“city”、“street”、“home”，有没有办法返回标记数据，如

```
intent.setdata("city", "roma");
intent.setdata("street", "colicano"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:16:10.160

是的，你当然可以。只需通过使用将键/值放在意图中`putExtra()`

例子：

```
Intent resultsIntent = new Intent();
resultsIntent .putExtra("city", "Ahmedabad");
resultsIntent .putExtra("street", "Ahmedabad");
resultsIntent .putExtra("home", "India");
setResult(RESULT_OK, resultsIntent);
finish(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T08:17:44.777

改用这个

```
intent.putExtra("city", "roma");
intent.putExtra("street", "colicano"); 
```

# c# - 在 asp.NET 中设计一个文件中心

> ID：14786208
> 
> 赞同：0
> 
> 时间：2013-02-09T08:14:06.277
> 
> 标签：c#, asp.net, sql, dreamweaver

我的大学项目是设计一个文件中心（它应该类似于 4shared.com）`asp.net(c#)`和`SQL server`. 在我开始设计之前，我有一些问题，请帮助我。

1.  是使用`Dream weaver`还是更好`visual studio`？我不熟悉，`Dream weaver`但我们的老师说这对我们有帮助。你的想法是什么？学习`Dream weaver`还是`visual studio`够了？

2.  我的网站，根据用户的行为。应该向他们建议，例如有人正在尝试下载`xx.mp3`，我的网站应该建议其他下载的`xx.mp3`也下载`yy.mp3` `ff.mp3`等等。现在我不知道应该如何保存用户行为。我应该将这些信息保存在我的数据库表中还是其他地方？请告诉我如何实现这一点。

3.  另一个问题是关于我的桌子。您对我的站点表有什么想法？他们应该有什么重要的专栏？当然，我应该如何保存文件？将它们保存在数据库中还是仅将它们的路径保存在表中并将它们保存在站点文件夹中更好？

4.  最后一个问题-我在`asp.net`and方面并不专业`c#`。我可以设计这个网站还是应该告诉我的老师我不能这样做？

如果您有任何关于设计文件中心或关于我的问题的教程，请把它放在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:31:16.213

你的问题是主观的个人意见。这是我的：

1.  我会推荐使用 Visual Studio 来使用 C# 和 ASP.NET。
2.  是的，您应该将用户行为保存在数据库中。您可以通过用户会话跟踪用户行为，并保存与用户会话相关的每次下载。
3.  任何数据库表都应该有`Id`, `CreationDate`,`CreatedBy`和.`LastModificationDate``LastModifiedBy`
4.  在告诉自己可以做某事之前，您应该尝试并重试。如果你在大学，你应该学会克服障碍和挑战。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:23:16.197

我将遵循鲁本的公式：您的问题是主观的个人意见。这是我的：

1.  继续使用Visual Studio，它可以很好地编辑网页，所以你真的不需要Dream Weaver，它还可以帮助你编写代码和测试你的应用程序。Dream weaver 可以帮助做一些事情，比如创建菜单和其他东西……我说你应该在没有 Dream weaver 的情况下学习这些东西，但这取决于你。

2.  用户行为并不重要。当然，为了方便建议，您始终可以选择跟踪用户的活动，但此功能需要一段时间才能实现，如果我们计算出很大一部分用户更愿意关闭它，我说您不应该优先考虑项目的这一部分（除非你的项目就是这样）。

3.  如果有疑问，请始终使用`Id`. 鲁本斯建议的列对听觉有好处，所以也要考虑一下。我想告诉你，安全是最重要的。从登录到注销、更改密码等所有流程看似简单，但需要特别注意。我将在这里自我推销一下，从[我对通过电子邮件恢复/重置丢失的密码选项的回答](https://stackoverflow.com/a/13330223/402022)开始。

4.  你可以做到的，真的。问题是它需要多长时间（会及时完成吗？），我的意思是......任何事情都涉及到一些学习。有两件事你必须知道：

    *   假装你知道未来是荒谬的。在软件开发中，如果您过去做过某事，那么您很可能可以重用代码……如果您确定不能重用旧代码，那是因为：a）您还没有完成或 b）你做得不够好。所以，每次你在做一个项目时，都会有一些你没有做的事情，那些将是需要更多时间的部分（因为对于另一个，你只是重复使用），而且很难说出多长时间他们会接受吗？所以，不。我不能告诉你你是否会及时完成，而且一直都是这样，无论如何我们都会完成工作。

    *   你可以永远是平庸的......不好的建议？是的有一点。但事实上，如果你必须在截止日期前展示一些东西，任何东西......而你不知道该做什么，你总是可以使用你已经知道的东西。这样你会更容易通过，而且你会习惯不强迫自己（ergo，平庸）。所以，决定什么对你很重要：取得好成绩*，还是学习新事物？[是的，你可以两者都做]。

*：这只是一个二分法，如果我们假设坏老师，好老师不会给一个没有尝试任何新东西的做得好的项目打好分数，而是会鼓励一个创新但几乎没有效果的项目（或者这就是理论）。

记得看看来历，是4Shared，还有Google Drive、Microsoft SkyDrive、Dropbox、Mega...

您的网站是人们备份个人媒体的地方，还是人们与他人共享文件的地方？每个人都可以访问上传的文件吗？避免重复文件有意义吗？加密文件是否有意义（使用个人密钥？）？不要回答我，只是考虑他们。

最后，教程？不，对不起。不过，您可以研究这些部分，例如：访问控制、文件上传、重定向、会话管理等。真的不需要教程，把这个想法从你的系统中拿出来，它会阻止你做没有教程的事情（也许写一个？）。

无论如何，我想建议您阅读[Wikipedia 上的 Post/Redirect/Get](https://en.wikipedia.org/wiki/Post/Redirect/Get)以及[这个网站](https://stackoverflow.com/questions/5381162/post-redirect-get-with-asp-net)。而且我也想建议大家不要犹豫，问问题（啊，是的，先搜索，站在巨人的肩膀上）。

# java - 在自定义el函数中注入spring bean

> ID：14786213
> 
> 赞同：0
> 
> 时间：2013-02-09T08:15:06.230
> 
> 标签：java, spring, spring-el

我想创建一个自定义 el 函数以快速从 dao 中选择选项。我正在使用 Spring，我想在我的自定义 el 函数类中注入 spring bean dao。

在 el 函数类中，我使用静态方法，并且无法访问应用程序上下文。我以这种方式使用了 ApplicationContextAware 的实现

```
public class AppContextUtil implements ApplicationContextAware
{

    private ApplicationContext applicationContext;

    private static final AppContextUtil instance=new AppContextUtil();

    private AppContextUtil()
    {
    }

    public static AppContextUtil getInstance()
    {
        return instance;
    }

    public <T> T getBean(Class<T> clazz)
    {
        return applicationContext.getBean(clazz);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException
    {
        this.applicationContext = applicationContext;
    }

} 
```

但 applicationContext 为空。

访问 applicationContext 的唯一方法是 belove

```
WebApplicationContext appCtx =
WebApplicationContextUtils.getWebApplicationContext(context.getServletContext());
MyDAO myDAO = appCtx.getBean(MyDAO.class); 
```

但是这样我需要在 el 函数参数中传递 PageContext。

我如何创建一个支持 Spring bean 的 el 函数类？我如何以静态方式访问 applicationContext？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:44:36.207

将 bean 或应用程序上下文“注入”到静态字段的肮脏解决方案：

```
@Component
public class AppContextUtil  {

    private static ApplicationContext applicationContext;

    @Autowire
    private set ApplicationContext(ApplicationContext applicationContext) {
       AppContextUtil.applicationContext = applicationContext;
    }
} 
```

# php - 在 Facebook 墙上发布消息不起作用

> ID：14786217
> 
> 赞同：0
> 
> 时间：2013-02-09T08:15:39.350
> 
> 标签：php, facebook-graph-api

我想从我们的网站在 facebook 墙上发布一条消息。首先我收到错误

> Uncaught OAuthException: (#200)，当试图在墙上发帖时

现在我没有收到错误，但代码不起作用。

```
$facebook = new Facebook(array(
  'appId' => APP_ID,
  'secret' => APP_SECRET,
  'cookie' => true,
  'req_perms' => 'email,read_stream,read_friendlists,publish_stream,offline_access,manage_pages',
));
$user = $facebook->getUser();
$token = $facebook->getAccessToken();
if ($user) {
  try {
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  } 
}
if (!empty($user_profile )) {
  $username = $user_profile['name'];
  $uid = $user_profile['id'];
  try {
    $post=$facebook->api("/".$uid."/feed", "post", array(
      'access_token' => $token,
      'message' => 'test',
    ));
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

但是没有消息来怎么办？创建应用程序时有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:53:43.590

这是我的疯狂猜测，因为我们的评论问答不会很好地工作。

如果您使用一组权限授权您的应用程序，然后更改您的应用程序请求的权限（在应用程序管理页面），您现有的授权不会更新以包含新权限。您的应用仍可运行，但需要新权限的操作将失败。

您可以通过简单地从您的个人帐户应用设置页面中删除该应用并使用新权限重新批准该应用来测试这是否会导致您的错误。如果您的问题消失了，那么恭喜您。如果没有，您将需要做更多的侦探工作。您的代码似乎很好。

# c# - 如何将 WebGrid 列的 int 值转换为字符串？

> ID：14786218
> 
> 赞同：1
> 
> 时间：2013-02-09T08:15:42.033
> 
> 标签：c#, asp.net-mvc, lambda, webgrid

我`WebGrid`用来显示来自模型的数据。我希望那个 ID 列应该是超链接。因此，当任何人点击 ID 时，都会打开相应的页面。我尝试了以下代码，但出现错误： `Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Cannot convert type 'int' to 'string'`

**代码：**

```
grid.Column(columnName: "ID", header: "ID", canSort: true, format: item => Html.ActionLink((string)item.ID, "../CRM/DetailsRequest", new { ID = item.ID })),.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T08:19:37.910

看起来 ID 属性是一个整数，因此您不能将其转换为字符串。尝试先将其转换为整数：

```
grid.Column(
    columnName: "ID", 
    header: "ID", 
    canSort: true, 
    format: item => Html.ActionLink(
        ((int)item.ID).ToString(), 
        "DetailsRequest", 
        "CRM", 
        new { ID = item.ID }, 
        null
    )
) 
```

或者，如果在您的视图模型中有另一个字符串属性，您想将其用作锚文本：

```
grid.Column(
    columnName: "ID", 
    header: "ID", 
    canSort: true, 
    format: item => Html.ActionLink(
        (string)item.Name, 
        "DetailsRequest", 
        "CRM", 
        new { ID = item.ID }, 
        null
    )
) 
```

# python - 写入文件并在空闲时显示结果

> ID：14786223
> 
> 赞同：0
> 
> 时间：2013-02-09T08:16:44.290
> 
> 标签：python, python-3.x

试图处理文本文件并希望看到空闲的输出以及重定向到文本文件。由于文本格式，我需要在打印函数中保留语句（end = ''）。我正在寻找一种将“end = ''”和“file = output_file”与打印功能同时使用的方法。

```
import re
input_file = open ('E:\input.txt','r')
output_file = open ('E:\output.txt','w')

for line in input_file:
        if re.match('ab|cd', line):
                print ('line with ab or cd: ', end = '',file=output_file )
                print (line, end = '',file=output_file)
                print ('  --------', file=output_file)
                print ('  --------',file=output_file)
                print ('!',file=output_file)
        else:
                print (line,file=output_file) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:38:11.447

要使用单个 写入多个位置`print()`，您可以定义一个类似文件的对象：

```
class TeeFile(object):
    def __init__(self, *files):
        self.files = files
    def write(self, data):
        for f in self.files:
            f.write(data)
    def flush(self):
        for f in self.files:
            f.flush() 
```

例子：

```
import sys

file = TeeFile(sys.stderr, output_file)
print("abc", end="", file=file)
file.flush() 
```

# javascript - Twitter Bootstrap 和 Javascript 警报问题？

> ID：14786227
> 
> 赞同：0
> 
> 时间：2013-02-09T08:17:14.030
> 
> 标签：javascript, jquery, html, twitter-bootstrap

我想在浏览器中检查 mozGetUsermedia，如果不存在则返回警报。

我正在使用 Twitter bootstrap Alert JS 来获得效果，并使用 JS 代码来检查条件。但我的 DOM 似乎已损坏，即使条件为假，也会显示消息。

HTML 代码

```
 <div id="gum" >
     <div class="alert alert-block alert-error fade in">
       <button type="button" class="close" data-dismiss="alert">&times</button>
       <h4 class="alert-heading">mozGetUserMedia is missing</h4>
       <p>Do you have the latest<a href="http://nightly.mozilla.org/">Nightly</a> and set
          <i>media.navigator.enabled</i> to true?
       </p>
     </div>
   </div> 
```

JS代码

```
 if (!navigator.mozGetUserMedia) {
    document.getElementById("gum").style.display = "block";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:19:38.093

你需要默认隐藏它

```
<div id="gum" class="hide"> 
```

由于您使用的是 jQuery

```
$(function(){
    if (!navigator.mozGetUserMedia) {
        $("#gum").show();
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nKsMv/1/)

# php - MYSQLi 真正的转义函数显示新行和回车

> ID：14786232
> 
> 赞同：3
> 
> 时间：2013-02-09T08:18:37.383
> 
> 标签：php, mysqli

我有一个文本区域，当我尝试通过 MYSQLi 的 real_escape 函数和 nl2br 进行转义和清理时，简单地输出给了我奇怪的结果。

我的PHP代码：

```
 <?php
 $db = new mysqli('localhost', 'user', 'pass', 'demo');

 if($db->connect_errno > 0){
 die('Unable to connect to database [' . $db->connect_error . ']');
 }

 $postText = nl2br($db->escape_string($_POST['posting']));
  ?> 
```

**奇数**输出是：

```
 i love this\r\n\r\nand this is gonna be funn., 
```

奇怪的是，当我只使用`nl2br`without时`real_escape`，输出很好，显然无法继续前进，因为我无法信任用户的输入。

请帮忙解决这个..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:26:19.450

当输出将用于 SQL 查询时，您应该只应用 SQL 转义。

*   如果您需要将值输出到页面上，请使用`htmlspecialchars()`or `htmlentities()`。

*   如果要在 JavaScript 文字中使用，请使用`json_encode()`.

*   等等。

简而言之，每个上下文都有自己的转义；不要把它们混在一起。

`nl2br()`另外，写入数据库时​​不要使用；而是在从数据库中获取它之后应用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:21:22.867

是的，它确实。
此函数的输出不打算打印出来。但仅格式化 SQL 字符串文字。
请注意，**此功能也不打算“清理”任何输入**。详情请[参考这里](https://stackoverflow.com/a/8061617/285587)

所以，你不应该同时使用这两个函数。

*   使用 escape_string 格式化您要动态放入查询的 SQL 字符串。
*   仅在将文本打印到 HTML 页面时使用 nl2br

根据您在评论中提出的问题，您不必立即将字符串打印回来。
因为在每次 POST 请求之后，您的 PHP 都应该响应`Location:`标头来告诉浏览器重新加载页面。重新加载后，您可以从数据库中读取您的数据并打印出来。

# tortoisehg - 如何在 TortoiseHg 中过滤以“assets”开头的文件名

> ID：14786234
> 
> 赞同：0
> 
> 时间：2013-02-09T08:18:45.183
> 
> 标签：tortoisehg

在提交控制台中，如何过滤所有由 开始的文件`assets`？所以`assets/*`会过滤，`protected/assets/*`不会。

我试过`^assets`过滤所有文件。

![在 TortoiseHg 中过滤文本](../Images/c6dc4b6c74d4f984e3ff8c45732bc82e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:58:03.083

怎么样`^assets/*`？这将告诉 Mercurial 忽略下面的任何内容，`assets`但要跟踪`nbproject/protected/assets`or下的文件`protected/assets`。您的屏幕截图表明 Mercurial`assets`之前一直在跟踪文件；如果您不想再让 Mercurial 跟踪它们，但想保留本地副本，请运行`hg forget`

# c++ - 类方法中的 C++“this”shared_pointer 安全性

> ID：14786237
> 
> 赞同：0
> 
> 时间：2013-02-09T08:19:07.040
> 
> 标签：c++, c++11, shared-ptr

我有一个派生自 std::enable_shared_from_this 的类。所有类对象都由共享指针管理，因此当没有更多共享指针指向它们时，它们会自动销毁。

我有一个类方法，它从程序的数据结构中删除了一些共享指针，并且存在删除所有指向“this”的共享指针的风险，即调用类方法的对象。

问题是，如果真的所有指针都被删除了，是否有可能在方法运行时对象被销毁，并且“this”指针变得无效？如果我想确保它不会发生，我可以信任系统还是必须在方法内部创建一个 shared_ptr 到“this”，以保持对象处于活动状态，直到我完成它？（然后如果没有更多的指针，一旦方法执行结束就可以将其销毁）

例子：

```
class SharedObj : public std::enable_shared_from_this<SharedObj>
{
   /* ... */
    void do_something(SharedObj& a, SharedObj& b);
    std::shared_ptr<SharedObj> child;
};

void SharedObj::do_something(SharedObj& a, SharedObj &b)
{
   /* ... */
   a.remove_child();
   b.remove_child();
} 
```

如果只有 a 和 b 有一个 shared_ptr 指向“this”，那么在两个 remove_child() 行之后，就没有指向“this”的共享指针，所以它应该被自动销毁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T08:48:22.610

你当然可以通过做你正在做的事情从一个方法中破坏你的实例。但是这种情况并不特定于`enable_shared_from_this`，您总是可以在方法中调用一些可能导致您自己的类被破坏的东西。如果您在班级被销毁后尝试服从，这实际上只是一个*错误。*`this`如果您继续使用不修改或访问类实例的常规代码，那么您是安全的。

如果您需要实例在整个函数执行期间保持不变，那么您的建议（在执行`shared_ptr`期间将 a 保存到您自己的实例）是一个好主意。`do_something`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T13:21:25.107

作为 Dave 答案的替代方案或补充，如果您始终使用共享指针来管理生命周期，那么无论如何您都应该只通过共享指针调用对象，以便指针在函数返回之前使对象保持活动状态。如果您存储指向共享指针托管对象的非拥有指针，那么您应该存储一个弱指针并在使用它之前锁定它。通过锁定创建的共享指针将再次使对象保持活动状态。

# ios - iOS，存档分发时图标不可见

> ID：14786238
> 
> 赞同：0
> 
> 时间：2013-02-09T08:19:34.597
> 
> 标签：ios, icons, distribution, archive

归档分发时未显示该图标。但是，它是在设备上测试时显示的。

我没有遇到任何错误，过程很顺利，应用程序已成功上传到应用商店。

我一直在阅读有关（图标未显示在档案中）的问题，但我不明白为什么这样的事情很重要，这导致了我的问题。

那么，问题来了：用户下载应用程序时会显示图标吗？如果是，我为什么要在存档时关心图标是否显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:28:28.030

你不应该真正关心它，它会在从应用商店下载时显示给用户

# java - java：剪辑线不起作用

> ID：14786244
> 
> 赞同：1
> 
> 时间：2013-02-09T08:20:52.970
> 
> 标签：java, clip

这是我正在使用的代码。我使用 Clip 类播放剪辑。程序已编译没有任何错误并且运行正常，但我听不到声音。

```
import java.io.File;

import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineEvent;
import javax.sound.sampled.LineListener;

public class ClipTest {

public static void main(String[] args) throws Exception {

File soundFile = new File("./1.wav");
AudioInputStream sound = AudioSystem.getAudioInputStream(soundFile);

DataLine.Info info = new DataLine.Info(Clip.class, sound.getFormat());
Clip clip = (Clip) AudioSystem.getLine(info);
clip.open(sound);

clip.addLineListener(new LineListener() {
  public void update(LineEvent event) {
    if (event.getType() == LineEvent.Type.STOP) {
      event.getLine().close();
      System.exit(0);
    }
  }
});

clip.start();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:48:58.230

我只是试试你的代码。我认为您的错误是您的文件为空或未正确加载

我只是更换

```
File soundFile = new File("./1.wav");
AudioInputStream sound = AudioSystem.getAudioInputStream(soundFile); 
```

和

```
InputStream inRequest = this.getClass().getResourceAsStream("1.wav");
AudioInputStream sound = AudioSystem.getAudioInputStream(inRequest); 
```

这是新课程

```
public class ClipTest {

    public void run() throws UnsupportedAudioFileException, IOException, LineUnavailableException {
        InputStream inRequest = this.getClass().getResourceAsStream("batR.wav");
        AudioInputStream sound = AudioSystem.getAudioInputStream(inRequest);

        DataLine.Info info = new DataLine.Info(Clip.class, sound.getFormat());
        Clip clip = (Clip) AudioSystem.getLine(info);
        clip.open(sound);

        clip.addLineListener(new LineListener() {

            public void update(LineEvent event) {
                if(event.getType() == LineEvent.Type.STOP) {
                    event.getLine().close();
                    System.exit(0);
                }
            }
        });

        clip.start();

    }

    public static void main(String[] args) throws Exception {
        ClipTest clipTest = new ClipTest();
        clipTest.run();

    }
} 
```

# algorithm - 计算大 O 运行时间

> ID：14786247
> 
> 赞同：2
> 
> 时间：2013-02-09T08:21:08.157
> 
> 标签：algorithm, big-o

您好，我很难找到该算法的运行时间，假设 s = O(logN) 并且 Random_Integer 的运行时间是常数时间：

```
 1  express N-1 as 2^t * u where u is odd:
  2  for i <-- to s do
  3    a <-- Random_Integer(2, N-2);
  4    if EuclidGCD(a, N) not equal to 1 then
  5         return false;
  6    x sub 0 <-- a^u mod N;
  7    for j <-- 1 to t do
  8        x sub j <-- x^2 sub j-1 mod N;
  9    if x sub j = 1 and x sub j-1 not equal to 1 and x sub j-1 not equal to N -1 then
  10        return false;
  11   if x sub t not equal to one then
  12        return false;
  13 return true; 
```

从内部循环开始，指数模运算需要 n^3 时间，循环运行 n 次迭代，总共 n^4。然后按照我的方式进行外循环，我们有另一个指数模运算，它再次需要 n^3 时间，然后 EuclidGCD 也需要 n^3 时间。最后，外循环也运行 n 次迭代。我相信这些值是正确的，但是我对如何获得总运行时间感到困惑。我也很困惑这两个嵌套循环的运行时间是否应该相乘，以及外部循环中对 ExtendedEuclid 的方法调用是否应该与外部循环的运行时间相乘。我希望这很清楚，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:34:56.600

内循环是 n^4（外循环内最慢的部分），外循环每次迭代运行一次，即 EDIT: logn 次，所以 n^4logn。

然而...

根据`return false`提前到达的频率，在最坏的情况下可能只有 n^5，例如，如果几乎所有时间你在第一次迭代中返回 false，那么你只花了 n^3-n^4 的工作，所以你会有一个平均 O(n^3) 或 O(n^4) （取决于`return false`它是）。

# c# - 如何将数据添加到 GridView？

> ID：14786252
> 
> 赞同：0
> 
> 时间：2013-02-09T08:21:33.313
> 
> 标签：c#, asp.net, gridview

我正在尝试通过以下代码添加数据：

```
protected  void gridview1_RowCreated(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
  {
    if (Session["BranchingCode"] != null)
    {
      List<CourseDetail> studentList = Course_Detail.GetStudentListOfBranch(Session["BranchingCode"].ToString(), Session["CurrentSession"].ToString());
      if (studentList != null)
      {
        for (int i = 0; i < studentList.Count(); i++)
        {
           e.Row.Cells[0].Text = studentList[i].UserNameRoll;
           e.Row.Cells[1].Text = studentList[i].StudentName;
        }
      }
    }
    GridView1.DataBind();
  }
} 
```

但由于没有`datasource`附加到 Gridview，因此不会触发此事件。请告诉我该怎么办？无论如何要强行触发此事件或做其他事情并在其他地方输入数据..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:34:47.407

您滥用此事件，如果强行调用，则不应调用。

首先在 page_load 事件的某处加载您的数据并将其绑定到网格：

```
if (Session["BranchingCode"] != null)
{
   List<CourseDetail> studentList = Course_Detail.GetStudentListOfBranch(Session["BranchingCode"].ToString(), Session["CurrentSession"].ToString());
   if (studentList != null)
   {  
       GridView1.DataSource = studentList;
       GridView1.DataBind();
   }
} 
```

这会将您的学生列表绑定到网格。现在我们必须处理在网格上显示数据，有不止一种方法可以做到这一点，但这对你来说应该足够了：

在您声明 GridView 的 html、xxx.aspx 页面中，执行以下操作：

```
<asp:GridView ID="GridView1" runat="server" ...... >
   <Columns>
      <asp:BoundField HeaderText="User Name Roll" DataField="UserNameRoll" />
      <asp:BoundField HeaderText="Student Name" DataField="StudentName" />
   </Columns>
</asp:GridView> 
```

# django - 继承主要要求

> ID：14786253
> 
> 赞同：8
> 
> 时间：2013-02-09T08:21:50.923
> 
> 标签：django, pip

如果我对我的 django 应用程序有 2 个要求，例如：

main.txt --> Django1.5, PIL, ....
local.txt --> debug_toolbar, ....

如何在我的 local.text 中继承 main.txt 要求？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T08:24:11.250

**本地.txt**

```
-r main.txt

#list of requirements 
```

# java - Java 中使用 SimpleDateFormat 的日期

> ID：14786257
> 
> 赞同：3
> 
> 时间：2013-02-09T08:23:56.597
> 
> 标签：java, validation, date, simpledateformat

以下代码尝试解析`31-Feb-2013 13:02:23`具有给定格式的日期。

```
DateFormat dateFormat=new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss");
System.out.println(dateFormat.parse("31-Feb-2013 13:02:23")); 
```

它返回`Sun Mar 03 13:02:23 IST 2013`。

我需要使此类日期无效，指示*无效日期*。这个（等等）日期不应该被解析（或者应该以任何其他方式无效）。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T08:25:44.417

使用[`DateFormat.setLenient(boolean)`](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)带`false`参数的方法：

```
DateFormat dateFormat=new SimpleDateFormat("dd-MMM-yyyy HH:mm:ss");
dateFormat.setLenient(false);
System.out.println(dateFormat.parse("31-Feb-2013 13:02:23")); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T08:26:02.450

Java 日期计算是宽松的。通过宽松的解析，解析器可以使用启发式方法来解释不精确匹配该对象格式的输入。

您必须将 false 传递给 lenient 以转换为**Strict 模式**的 dateformat 。使用严格的解析，输入必须匹配这个对象的格式。

```
DateFormat dateFormat=new SimpleDateFormat("...");
dateFormat.setLenient(false); // turn on Strict mode
dateFormat.parse("31-Feb-2013 13:02:23");// throws java.text.ParseException 
```

# javascript - html web paga在不同浏览器中的变化

> ID：14786258
> 
> 赞同：0
> 
> 时间：2013-02-09T08:24:06.427
> 
> 标签：javascript, html, css, windows

我为我的学校项目创建了一个 html 网页。我看到一件奇怪的事情发生了。在 IE 中查看的网页与在 Chrome 中查看的网页不同。该网页在 IE 中查看时与在 Chrome 中查看时不同。我还没有尝试过火狐。请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:26:46.090

您的网页是否包含`<!DOCTYPE>`? 这是 IE 和其他浏览器之间主要差异的第一大可能原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T08:28:12.683

网页使用的一些 CSS 样式非常特定于浏览器。您尝试查看的网页可能有这些，因此在不同的浏览器中显示不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-23T14:35:44.203

那么只需尝试在更高级的网络浏览器上使用您的网页。我希望喜欢 chrome ,

# ios - 如何在 iOS 和 webviewdifinishload 上禁用超链接和复制/粘贴菜单未调用

> ID：14786263
> 
> 赞同：2
> 
> 时间：2013-02-09T08:25:10.640
> 
> 标签：ios, uiwebviewdelegate

我正在尝试禁用 iOS UIwebview 上的超链接和复制/粘贴菜单，所以我用谷歌搜索了很多答案。然后我遇到了另一个问题“未调用 webviewdidfinishload”，所以我添加了我的代码来寻求您的帮助。（我确定我正确连接了 IBOutlet）

另外，我仍然没有想到将 mainWebView.delegate = self 而不是 self.mainWebView.delegate = self 任何人都可以解释其中的区别吗？所以我不确定我的其他功能，例如 [[[mainWebView subviews] lastObject] setScrollEnabled:YES] [[[mainWebView subviews] lastObject] setScrollsToTop:NO]
mainWebView.scalesPageToFit = YES 这些是否有效。

它应该适用于 ios5 到 ios6.1 谢谢

在 .h 文件中

```
@interface HRViewController : UIViewController <UIWebViewDelegate>
{
    UIWebView *mainWebView;
}
@property (strong, nonatomic) IBOutlet UIWebView *mainWebView;

@end 
```

* * *

在 .m 文件中

```
@interface HRViewController ()

@end

@implementation HRViewController

@synthesize mainWebView;

- (void)viewDidLoad
{
    [self startWebView];
    [super viewDidLoad];
}

- (void)startWebView
{
    mainWebView.delegate = self;

    [[[mainWebView subviews] lastObject] setScrollEnabled:YES];
    [[[mainWebView subviews] lastObject] setScrollsToTop:NO]; 
    mainWebView.scalesPageToFit = YES;

    mainWebView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    mainWebView.scalesPageToFit = YES;
    [self.view addSubview:self.mainWebView];

    NSURL *url = [NSURL URLWithString:/" @"http://www.mysite.com" "/];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];

    [mainWebView loadRequest:request];
}

- (void)webViewDidFinishLoad:(UIWebView *)WebView {
    NSLog(@"finish");

    [WebView stringByEvaluatingJavaScriptFromString: @"document.documentElement.style.webkitUserSelect='none';"];
    [WebView stringByEvaluatingJavaScriptFromString: @"document.documentElement.style.webkitTouchCallout='none';"];
}

- (void)webViewDidStartLoad:(UIWebView *)mainWebView {
    NSLog(@"start");
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {
    NSLog(@"Error for WEBVIEW: %@", [error description]);
} 
```

EDIED 我使用了下面的代码，但仍然不起作用......这些都不起作用！！！！！！！

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    NSLog(@"canPerformAction: %@",NSStringFromSelector(action));
    if (action == @selector(copy:) ||
        action == @selector(paste:)||
        action == @selector(cut:)) {
        return NO;
    }
    return NO;
} 
```

还有这个

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    UIMenuController *menuController = [UIMenuController sharedMenuController];
    if (menuController) {
        [UIMenuController sharedMenuController].menuVisible = NO;
    }
    return NO;
} 
```

即使这样 - (void)viewDidLoad { mainWebView.delegate = self; }

```
- (void)webViewDidFinishLoad:(UIWebView *)webView {
    NSLog(@"finish");
    // Disable user selection
    [webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.style.webkitUserSelect='none';"];
    // Disable callout
    [webView stringByEvaluatingJavaScriptFromString:@"document.documentElement.style.webkitTouchCallout='none';"];
} 
```

还有这个 - (void)viewDidLoad { [self longPress:self.mainWebView]; }

```
- (void)longPress:(UIView *)webView {
    UILongPressGestureRecognizer* longPress = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress)];

    longPress.allowableMovement=100;
    longPress.minimumPressDuration=0.3;
    longPress.delaysTouchesBegan=YES;
    longPress.cancelsTouchesInView=YES; 
    [webView addGestureRecognizer:longPress]; 
}

// I just need this for the selector in the gesture recognizer.
- (void)handleLongPress {

} 
```

请帮帮我..这让我疯了一个星期..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-09T08:27:03.230

**要隐藏复制/粘贴菜单：**

重写`canPerformAction:withSender:`方法以返回`NO`您不想允许的操作：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(paste:))
        return NO;

    if (action == @selector(select:))   
        return NO;

    if (action == @selector(selectAll:))   
        return NO;

    return [super canPerformAction:action withSender:sender];
} 
```

其他方式：

```
- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    UIMenuController *menuController = [UIMenuController sharedMenuController];
    if (menuController) {
        [UIMenuController sharedMenuController].menuVisible = NO;
    }
    return NO;
} 
```

还要检查[这个链接](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIResponder_Class/Reference/Reference.html)

**要禁用超链接：**

[你可以从这个网站](http://www.macoscoders.com/tag/webkittouchcallout/)得到这个问题的答案。

**关于`UIWebView`：**

如果你使用 ARC，那么只写，

```
@property (strong, nonatomic) IBOutlet UIWebView *mainWebView; 
```

不需要`@synthesize`财产，否则，

```
@interface HRViewController : UIViewController <UIWebViewDelegate>
{
    UIWebView *mainWebView;
}

@property (nonatomic,retain) IBOutlet UIWebView *mainWebView;

@end

// .m file

- (void)viewDidLoad
{
    mainWebView = [[UIWebView alloc] initWithFrame:self.view.bounds];
    mainWebView.scalesPageToFit = YES;
    mainWebView.delegate = self;

    [[[mainWebView subviews] lastObject] setScrollEnabled:YES];
    [[[mainWebView subviews] lastObject] setScrollsToTop:NO];
    mainWebView.scalesPageToFit = YES;

    [self.view addSubview:self.mainWebView];

    NSURL *url = [NSURL URLWithString:@"http://www.mysite.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [mainWebView loadRequest:request];
} 
```

这可能对您有帮助。

# visual-studio-2010 - 将 Datagridviewcombocell 值设置为任何字符串或 textbox.text

> ID：14786268
> 
> 赞同：-2
> 
> 时间：2013-02-09T08:26:19.487
> 
> 标签：visual-studio-2010

我被一个问题困住了，我希望解决方案可能会很简单，但无法解决。在通过各种论坛搜索并将我的头脑投入到exhuation之后，我在这里寻求我的答案。

好的，我的问题是我有一个文本框 tb116 ，

作为 tv1 的 datagridview 有 5 列（带有 column(1)）作为 datagridviewcomboboxcolumn

作为 dt 绑定到数据表，定义了 valuemember 和 displaymember

和一个列表为 t1

在我的表格上。Now when tb116 gets focus t1 is shown , when t1 is selected or clicked i get text for tb116 and same needs to be shown in column(1) ..further i also want to set text in column(1) from a string or another文本框.....

请帮助它非常紧急

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T04:41:19.983

对于在此主题上需要帮助的任何人

参考我的另一个帖子

“将 Datagridviewcombocell 值设置为任何字符串或 textbox.text”

[http://social.msdn.microsoft.com/Forums/en-US/visualstudiogeneral/thread/477caf5f-09c3-4590-a06e-b3d91f58a87d](http://social.msdn.microsoft.com/Forums/en-US/visualstudiogeneral/thread/477caf5f-09c3-4590-a06e-b3d91f58a87d)

或者您可以在此线程上回复您的电子邮件。

# html - 绝对定位元素和 CSS 过渡的问题

> ID：14786269
> 
> 赞同：1
> 
> 时间：2013-02-09T08:26:20.390
> 
> 标签：html, css, css-transitions

我正在制作一个包含许多绝对定位元素的网站。我将它们包含在以页面为中心的“页面包装”中。它是相对定位的，因此包含的元素相对于它进行布局。页面上的某些元素是其他页面的锚点，在 :hover 时，这些元素会转换到另一种状态，使用缩放变换和增加的框阴影使它们看起来像是从页面上抬起来的。

但是，当我将鼠标悬停在一个这样的元素上时，标记中所有跟随它的元素都会表现出奇怪的行为，例如在过渡期间位置略有移动。如果它们不包含在页面换行中或者如果页面换行不再设置为相对定位（在这种情况下从布局角度来看基本上相同），则不会发生此问题。

在我看来，页面换行使这些元素居中，然后相对于它进行布局这一事实在某种程度上影响了过渡的呈现，但我完全被卡住了。我已经尝试了我能想到的一切，现在正在寻求帮助。另外我应该说我只在 Webkit 浏览器上对此进行了测试，因此其他浏览器上可能不会出现此问题。

这是一些精简的代码：

HTML：

```
<body>
    <div id="page-wrap">

        <a class="card" href="text.html"><div class="vert"><div class="card-content">
            Here is<br/>some text
        </div></div></a>

        <a class="card" href="somemore.html"><div class="vert"><div class="card-content">
            Here is<br/>some more text
        </div></div></a>

        <a class="card" href="evenmore.html"><div class="vert"><div class="card-content">
            Here is<br/>even more text
        </div></div></a>

    </div>
</body> 
```

CSS：

```
body {
    background: hsl(60, 80%, 90%);
}

#page-wrap {
    margin: 0 auto;
    position: relative;
    width: 800px;
}

.card {
    background: hsl(80, 0%, 97%);
    box-shadow: 0 1px 7px hsla(0,0%,0%,.2);
    display: table;
    height: 150px;
    margin: 0px;
    position: absolute;
    width: 300px;
    -webkit-transition: all 0.2s linear;
}

.vert {
    display: table-cell;
    margin 0px;
    padding: 0px;
    vertical-align: middle;
    width: 100%;
}

.card-content {
    font: 40px 'Annie Use Your Telescope', cursive;
    margin: 0px;
    text-align: center;
    width: 100%;
}

a.card {
    background: hsl(120, 90%, 35%);
    color: hsl(60, 80%, 90%);
    text-decoration: none;
    text-shadow: -2px 2px hsl(60, 80%, 35%);
    z-index: 3;
}

a:hover {
    box-shadow: 0 0 40px 15px hsla(0,0%,0%,.3);
    -webkit-transform: scale(1.2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T20:13:13.100

添加`-webkit-backface-visibility: hidden;`到*.card*。

[已经在这里](https://stackoverflow.com/questions/3461441/prevent-flicker-on-webkit-transition-of-webkit-transform)回答了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T20:54:09.140

我在[CodePen](http://codepen.io/ByScripts/pen/igdGF)上“按原样”复制了您的代码。

我看不出有什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:29:13.520

Wasn't able to reproduce the problem you seem to be having. Maybe a jsfiddle.net example would be good?

When using your html & css, the divs are stacked on top of each other, removed the `position: absolute;` from *.card* and made them `float:left`. Didn't see any problem there, then reverted and tried adding `top:` and `left:` values to the divs and the only issue I had there was that all the divs after were above, added `z-index:999` to the *.card:hover* and everything seemed to work just fine.

Try posting a jsfiddle.net link and I'll try to have another look at it.

# java - 用于视频会议的 JAVA 库以及如何使用 libjitsi？

> ID：14786273
> 
> 赞同：6
> 
> 时间：2013-02-09T08:27:07.473
> 
> 标签：java, eclipse-plugin, osgi, equinox, video-conferencing

在项目的情况下，我们需要在 Linux 下与两台 PC 建立视频会议通信。我们在 JAVA 中搜索一个库来执行此操作。我们找到了基于 Jitsi 软件的 libJitsi，使用 XMPP /Jingle 进行女巫传输。我不会来运行他们的示例，其中包含这两个类：

[http://bluejimp.com/jitsi/libjitsi/javadoc/org/jitsi/examples/AVTransmit2.html](http://bluejimp.com/jitsi/libjitsi/javadoc/org/jitsi/examples/AVTransmit2.html)

[http://bluejimp.com/jitsi/libjitsi/javadoc/org/jitsi/examples/AVReceive2.html](http://bluejimp.com/jitsi/libjitsi/javadoc/org/jitsi/examples/AVReceive2.html)

文档很少，看起来有点模糊。有人知道这个图书馆吗？那么或者知道 JAVA 中视频会议的替代方案吗？

谢谢你。

我使用了 Netbeans 或 Eclipse Java EE。开发工具包 1.7

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-13T06:29:06.543

我使用这两个文件在java中完成了一个视频会议项目-

```
AVTransmit2.java
AVReceive2.java 
```

我的理解是，通过这两个文件，您可以与 java **jmf**插件进行通信。

**AVTransmit2.java**用作您自己的网络摄像头的数据捕获器，并将数据传输到对等方的 IP 地址。

**AVReceive2.java**用作来自远程对等方的数据接收器，并通过 java jmf 插件播放数据。

为了更多的理解和简单的实现，你可以看看这个**开源**项目 [http://matrixsust.blogspot.com/2013/07/video-conferencing-project-in-java.html](http://matrixsust.blogspot.com/2013/07/video-conferencing-project-in-java.html)

# doh - 在后台在 java 程序中运行 DOH 机器人测试

> ID：14786275
> 
> 赞同：0
> 
> 时间：2013-02-09T08:27:43.690
> 
> 标签：doh, doh-robot

我想嵌入 dojo/robot 测试是 java 应用程序。

Java 应用程序将使用 java-webengine 来加载网页并将 dojo 脚本嵌入这些页面。Java-webengine 提供了运行 java 脚本的可能性。

我了解，DOH 使用系统鼠标和键盘事件。我的应用程序的用户看不到 Web 浏览器页面（浏览器在后台由 webengine 运行）。

我有几个问题：
1\. 在 DOH 测试执行期间鼠标指针会发生什么？
2\. 可以在我的应用程序内部（在后台）运行 DOH 测试吗？
3\. 如果用户在测试执行过程中敲击键盘或移动鼠标会怎样？（例如，用户可以切换到其他应用程序，例如 Microsoft Word。）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T18:16:56.117

一些东西 -

Dojo 测试可以使用 node.js 或 Rhino 从命令行运行。

我*创建*了一个由 Java Web 服务器支持的 DOH 测试套件，并且运行良好，但是......

澄清一下，并非所有 DOH 机器人都使用系统鼠标和键盘事件，只有 1 个特定机器人（robotx）模拟实际用户输入。使用robotx 时，鼠标和键的行为与测试的指示相同。如果您将鼠标移开浏览器，测试将被中止（出现警报通知您）。因此，robotx 不能在后台运行，因为它实际上是在与浏览器交互。

使用与 node.js 或 Rhino 结合使用的其他机器人可能会有一些运气。关键概念是您应该寻找一些“无头”浏览器测试场景，这通常是 Rhino 处理的（我相信 Node 也可以这样做），同时避免使用 robotx。

基本上，只要您不使用robotx（实际控制UI的那个），您就应该能够开始测试并最小化浏览器或使用无头浏览器引擎。

# matlab - 如何定位在不同光照条件下拍摄的图像的白色标记

> ID：14786279
> 
> 赞同：0
> 
> 时间：2013-02-09T08:28:31.993
> 
> 标签：matlab, image-processing

我有两张在不同光线条件下拍摄的同一条道路的照片，如下所示

![在此处输入图像描述](../Images/247405e12af214a6c39df720c7f45f50.png) 第一张是晚上拍的，第二张是白天拍的。我必须编写一个通用代码来确定两个灯光场景中道路的白色车道标记。我尝试过诸如 sobel 边缘检测、连接组件之类的方法，并且还尝试通过对白色像素值应用条件来找到白色车道标记。但是适用于第一张图片的算法不适用于第二张图片。请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T13:53:45.917

这肯定会失败，因为可以在许多不同的条件下拍摄这些照片，但这里有一些适用于这些照片的步骤。它们与其他技术一起使用可能更有用，这些技术完全取决于您正在执行的任务。

从比平常更厚的形态梯度开始（例如，使用 5x5 平面结构元素）使用`max(R, G, B)`（这相当于将您的输入转换为 HSB 颜色空间并在`B`那里选择通道）。这假设标记是白色的，就像问题的标题所暗示的那样，这一步很可能会突出显示。

以低阈值对当前图像进行二值化，因为标记在输入中并不那么重要，然后是形态关闭和细化。在这里，这种闭合操作起到了廉价元件闭合以及每个元件填充孔的作用。细化将有助于区分你可能追求的线条和你肯定没有的线条。

现在您可以测量组件以尝试选择您想要的组件。像像素数和涉及凸包的测量很有趣。从后者您可以提取平均卡尺直径，对于线段，这将给出更接近像素数的值。

以下是个人结果以及最终结果：

![在此处输入图像描述](../Images/091ce5567f3aa4563936711a4320c3bf.png) ![在此处输入图像描述](../Images/578588b64b209b70631aaa739edce984.png)

![在此处输入图像描述](../Images/475bdc2d000924579effa505648d98fe.png) ![在此处输入图像描述](../Images/e319d101bfe37ea6c877ea624f39dc35.png)

错误的线段可以通过考虑它的“非白色”程度以及使用更多针对问题的信息（例如这些线段的预期角度）来消除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:45:44.963

车道检测是一个经过充分研究的主题。我会给你一些论文的名字开始，但这绝不是一个完整的列表。你应该做更多的文献调查。如果你是为课程项目做这件事，那么只需了解核心思想并尝试实施，否则，你必须完全理解论文。

1.  在具有挑战性的场景中进行强大的车道检测和跟踪
2.  城市街道车道标记的实时检测
3.  使用车辆定位改进基于视觉的车道跟踪器性能使用车辆定位改进基于视觉的车道跟踪器性能

也可以使用 3 的代码，但除非并且直到您理解没有 practcig 文件的代码。

# android - Android 类扩展列表视图错误

> ID：14786284
> 
> 赞同：0
> 
> 时间：2013-02-09T08:30:25.363
> 
> 标签：android, listview, android-listview

我正在使用一项活动，在该活动中我正在添加视图。

例如创建一个类扩展列表视图， **mycode：**

```
 public class ListViewExample extends ListView{
        Context context;
        ListView list;

        public ListViewExample(Context context,String[] ListItems) {
            super(context, null);
            // TODO Auto-generated constructor stub
            this.context=context;
            this.ListItems=ListItems;

            LayoutInflater layoutInflater = 
                    (LayoutInflater)context.getSystemService   
                    (Context.LAYOUT_INFLATER_SERVICE);
            View view = layoutInflater.inflate(R.layout.list, this);
        }
    } 
```

在这一行出现错误， **View view = layoutInflater.inflate(R.layout.list, this);**

**logcat 中的错误：**

```
02-09 14:03:09.520: E/AndroidRuntime(11180): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.f1live.homepage/com.f1live.homepage.HomePage}: java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.os.Looper.loop(Looper.java:123)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at java.lang.reflect.Method.invokeNative(Native Method)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at java.lang.reflect.Method.invoke(Method.java:521)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at dalvik.system.NativeStart.main(Native Method)
02-09 14:03:09.520: E/AndroidRuntime(11180): Caused by: java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.widget.AdapterView.addView(AdapterView.java:461)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.view.LayoutInflater.inflate(LayoutInflater.java:415)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at com.f1live.homepage.NewsListView.<init>(NewsListView.java:20)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at com.f1live.homepage.HomePage.onCreate(HomePage.java:25)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-09 14:03:09.520: E/AndroidRuntime(11180):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我很困惑为什么我会收到这个错误。告诉我这样做的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:38:41.157

```
View view = layoutInflater.inflate(R.layout.list, null); 
```

试试这样。该参数在那里没有上下文，它需要一个可选的父`ViewGroup`根。`null`如果您不想使用它，请通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T08:43:50.630

```
LayoutInflater inflater = activity.getLayoutInflater();
view = inflater.inflate(R.layout.your_layout, null); 
```

通过扩展使用

```
public class yourclass extends BaseAdapter 
```

这可能会帮助你..

# javascript - 这个二维数组可以工作吗？

> ID：14786290
> 
> 赞同：0
> 
> 时间：2013-02-09T08:31:06.383
> 
> 标签：javascript, arrays, multidimensional-array

到目前为止，我得到了：

```
var Items = new Array(5); // this array contains the items
BodyPaint = new Array(1, 0, 1, 0, 0, 0, 0, 0, 0);  // this array gives stats for the item
WolfFur = new Array(3, 0, 1, 0, 0, 0, 0, 0, 0);       // ^^
BearFur = new Array(4, 0, 1, 0, 0, 0, 0, 0, 0);       // ^^
WolfSkin = new Array(6, 0, 0, 0, 0, 0, 0, 0, 0);     // ^^
BearSkin = new Array(7, 1, 0, 0, 0, 0, 0, 0, 0);     // ^^ 
```

这个数组可以工作吗？我对编程相对较新，我的朋友建议我应该这样做，但我环顾四周，其他任何地方都推荐一种更复杂的方法，如果他们解释它可能是有意义的。如果这个数组可以工作，请告诉我到目前为止我将如何访问第二个数组中的值以访问 wolf fur 的第一个统计数据 我得到了这个：

```
var example = Items.2.1 
```

这（^^）会起作用吗？

如果它不起作用，请告诉我如何使用示例中的上述名称来执行此操作，并解释您为什么要做所有您所做的事情以及它做了什么。谢谢。

我现在使用一个对象，我得到了：

```
var Items = {
    BodyPaint : new Array(1, 0, 1, 0, 0, 0, 0, 0, 0),
    FurCloak : new Array(3, 0, 1, 0, 0, 0, 0, 0, 0),
    WolfSkin : new Array(5, 0, 0, 0, 0, 0, 0, 0, 0)}; 
```

还有更多数组，但我在此处结束以节省空间我收到以下错误：未知标识符：BodyPaint 未知标识符：FurCloak 未知标识符：WolfSkin 以及对于我所有其他数组，如果我用数字替换名称，则会出现错误但它对代码不好，我真的不希望我的项目在这里被称为数字，我不能 2 知道哪个是哪个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:38:52.747

不，这不是从数组中获取值的方式。

`Items[2][1]`如果您的阵列是这样的，它将起作用；

```
var BodyPaint = new Array(1, 0, 1, 0, 0, 0, 0, 0, 0);  // this array gives stats for the item
var WolfFur   = new Array(3, 0, 1, 0, 0, 0, 0, 0, 0);       // ^^
var BearFur   = new Array(4, 0, 1, 0, 0, 0, 0, 0, 0);       // ^^
var WolfSkin  = new Array(6, 0, 0, 0, 0, 0, 0, 0, 0);     // ^^
var BearSkin  = new Array(7, 1, 0, 0, 0, 0, 0, 0, 0);     // ^^
Items = [BodyPaint, WolfFur, BearFur, WolfSkin, BearSkin]; 
```

`Items[2][1]`将返回 0。

* * *

**编辑**：您可能也对使用对象感兴趣。

```
var Items = {
     BodyPaint: new Array(1, 0, 1, 0, 0, 0, 0, 0, 0),
     WolfFur:   new Array(3, 0, 1, 0, 0, 0, 0, 0, 0),
     BearFur:   new Array(4, 0, 1, 0, 0, 0, 0, 0, 0),
     WolfSkin:  new Array(6, 0, 0, 0, 0, 0, 0, 0, 0),
     BearSkin:  new Array(7, 1, 0, 0, 0, 0, 0, 0, 0)
} 
```

这将允许您编写如下代码：

`Items.BearFur[1]`将返回 0 并且与`Items[2][1]`上面相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:38:08.543

您只有多个 1D 数组，您应该将它们组合成 2D，例如：

```
var Items = new Array
BodyPaint = new Array(1, 0, 1, 0, 0, 0, 0, 0, 0);
WolfFur = new Array(3, 0, 1, 0, 0, 0, 0, 0, 0);
BearFur = new Array(4, 0, 1, 0, 0, 0, 0, 0, 0);
WolfSkin = new Array(6, 0, 0, 0, 0, 0, 0, 0, 0);
BearSkin = new Array(7, 1, 0, 0, 0, 0, 0, 0, 0);

Items[0] = BodyPaint;

alert(Items[0][2]); 
```

在这种情况下，您有 2D，并且通过警报示例，您可以访问项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T08:41:37.480

它不起作用，因为您没有以任何方式将 Items 链接到任何其他数组。你必须写：

```
var BodyPaint = new Array(1, 0, 1, 0, 0, 0, 0, 0, 0);
var WolfFur = new Array(3, 0, 1, 0, 0, 0, 0, 0, 0);
var BearFur = new Array(4, 0, 1, 0, 0, 0, 0, 0, 0);
var WolfSkin = new Array(6, 0, 0, 0, 0, 0, 0, 0, 0);
var BearSkin = new Array(7, 1, 0, 0, 0, 0, 0, 0, 0);
var Items = new Array(BodyPaint, WolfFur, BearFur, WolfSkin, BearSkin); 
```

那么这将起作用：

```
var example = Items[2][1]; 
```

我建议您使用 JavaScript 对象而不是数组。在 JSON 中，这将是：

```
var Items = {
   BodyPaint : Array(1, 0, 1, 0, 0, 0, 0, 0, 0),
   WolfFur : new Array(3, 0, 1, 0, 0, 0, 0, 0, 0),
   BearFur : new Array(4, 0, 1, 0, 0, 0, 0, 0, 0),
   WolfSkin : new Array(6, 0, 0, 0, 0, 0, 0, 0, 0),
   BearSkin : new Array(7, 1, 0, 0, 0, 0, 0, 0, 0)}; 
```

然后，您可以像这样添加新项目：

```
Items.AnotherItem = new Array(8, 0, 0, 0, 0, 0, 0, 0, 0); 
```

或者：

```
Items['AnotherItem'] = new Array(8, 0, 0, 0, 0, 0, 0, 0, 0); 
```

并获得如下属性：

```
var example = Items.WolfSkin[5]; 
```

JavaScript 对象非常灵活，我建议您花一些时间真正了解它们。

# htmlunit - 404 Not Found when using HtmlUnit

> ID：14786295
> 
> 赞同：2
> 
> 时间：2013-02-09T08:32:01.663
> 
> 标签：htmlunit

I have the following code:

```
WebClient webClient = new WebClient();
HtmlPage page = webClient.getPage("http://www.myland.co.il/%D7%9E%D7%97%D7%A9%D7%91-%D7%94%D7%A9%D7%A7%D7%99%D7%94"); 
```

The code fails with com.gargoylesoftware.htmlunit.FailingHttpStatusCodeException: 404 Not Found for [http://www.myland.co.il/Scripts/swfobject_modified.js](http://www.myland.co.il/Scripts/swfobject_modified.js)

I do see in the console output the HTML page I am interested in. Is there a way to supress the exception and get an Html page after all? The page does load correctly in a real browser.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T08:39:57.283

Yes, you can use [setThrowExceptionOnFailingStatusCode](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/WebClientOptions.html#setThrowExceptionOnFailingStatusCode(boolean)) to ignore failing status codes, something like;

```
WebClient webClient = new WebClient();
webClient.getOptions().setThrowExceptionOnFailingStatusCode(false);
HtmlPage page = webClient.getPage("http://www.myland.co.il/%D7%9E%D7%97%D7%A9%D7%91-%D7%94%D7%A9%D7%A7%D7%99%D7%94"); 
```

The default is normally true, which gives the error you're describing.

EDIT: Just in case you're running an old version, with versions of HtmlUnit earlier than 2.11, `setThrowExceptionOnFailingStatusCode` can be called on the WebClient itself instead of the options returned by `getOptions()`. In 2.11 or later, you should use `getOptions()` as above.

# c# - 在运行时设置 appbar 按钮的图像

> ID：14786296
> 
> 赞同：3
> 
> 时间：2013-02-09T08:32:11.103
> 
> 标签：c#, windows-8, windows-runtime

我已经使用以下代码为普通按钮设置图像，但它不适用于 appbar 按钮。

```
ImageBrush brush = new ImageBrush();
brush.ImageSource = new BitmapImage(new Uri("ms-appx:///Assets/logo.png"));
button.Background = brush; 
```

我也尝试将属性更改`Background`为`Content`属性，但它仍然无法正常工作。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:24:23.533

使用`Image`类而不是 appbar 按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T17:07:03.683

您不能将背景属性设置为按钮，该按钮的样式设置为 AppBarButtonStyle。（在所有 Metro Store 应用程序的 StandardStyles.xaml 中定义的资源）。由于背景属性没有模板绑定到根网格的背景，就像在按钮的默认样式中所做的那样。

因此，要实现这一点，您可以将图像设置为按钮的内容。

# objective-c - 从类或方法访问对象

> ID：14786297
> 
> 赞同：1
> 
> 时间：2013-02-09T08:32:14.943
> 
> 标签：objective-c, cocoa

我的 Cocoa 项目（Xcode）中有 2 个类。第一个是 AppDelegate 类，第二个是 Book 类。

在我的 Book 类中，我在 @interface 中设置了一个整数属性，这是本书的章节。在其@implementation 中，我创建了对象（例如 Book *firstBook = [[Book alloc]init]）并设置它们的属性（在 Book.m 文件中）。这些是我的数据，不会改变。

在我的应用程序委托中，我有一个方法可以获取用户从界面项目中选择的内容，获取所选项目的标题，其名称将与 Book.m 中的名称相同。然后将运行一个 for 循环来为 popUpButton 创建菜单项，以便用户可以选择要跳转到的章节。

我现在看到的问题是，当我尝试运行 for 循环来创建菜单项时，我需要限制循环的数量。该限制量基于 selectedObjectByUser 的章节属性（在 Book.m 中列出）。我如何访问它。

如果我可以将这两者连接在一起，我相信它会起作用，因为它在此方法内（在 AppDelegate.h 下）创建对象时起作用，但问题是它太占用空间并且经常更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:16:36.370

我不完全确定这里的情况，但让我们先看一些示例代码。

```
//// Book.h
@interface Book : NSObject

@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *author;
@property (nonatomic, assign) NSInteger numberOfPages;

- (id)initWithTitle:(NSString *)aTitle andAuthor:(NSString *)anAuthor;

@end

//// Book.m
@implementation Book

- (id)initWithTitle:(NSString *)aTitle andAuthor:(NSString *)anAuthor {
    if ( self = [super init] ) {
        self.title = aTitle;
        self.author = anAuthor;
    }
    return self;
}

- (void)dealloc {
    self.title = nil;
    self.author = nil;
    [super dealloc];
}

@end 
```

因此，在此我们建立一个类并为其提供 3 个属性，title 和 author（它们都是 NSString 的）和 numberOfPages（它是一个整数）。在类中，我们可以通过调用诸如`self.propertyName = value`.

这一切都很好，但实际上发生了什么？好吧，让我们再更新一下标题：

```
//// Book.h
@interface Book : NSObject {
@private
    NSString *_title;
    NSString *_author;
    NSInteger _numberOfPages;
}

@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *author;
@property (nonatomic, assign) NSInteger numberOfPages;

- (id)initWithTitle:(NSString *)aTitle andAuthor:(NSString *)anAuthor;

@end 
```

在此，我们刚刚明确定义了编译器通常会通过`@property`构造推断的内容。这些新添加的内容就是我们所说的*实例变量*或 ivars，并且是您分配给属性的值的实际存储位置。

**但是**，如果您还不能 100% 适应内存管理，那么操作 ivars 可能会很危险。即使您使用的是 ARC，您仍然应该了解该管理是如何工作的。

所以我们现在已经公开了这些属性实际存储数据的位置，但是那个`@private`工作呢？这到底是怎么回事？`@private`是一系列关键字的一部分，这些关键字有助于表示某物的“可访问性范围”。该系列中的其他两个关键字是`@protected`and `@public`，但后两个关键字的使用很少，如果不是不常见的话。这些关键字负责说明允许您访问事物的位置。这是它们的快速定义。

*   **@public**可以从任何地方自由访问，甚至在对象本身之外。然而，在 Cocoa 开发世界中，直接从其自己的类外部访问实例变量通常被认为是非常糟糕的做法，因此您几乎找不到如何去做。

*   **@protected**在类和它自己的子类中可以自由访问。不能在类/对象之外访问。

*   **@private**在课堂内可自由访问，但不能在其他任何地方访问。无法在类/对象之外甚至在其子类中访问。

因此，既然我们已经介绍了实际驱动属性背后的存储的原因，让我们看看在`Book`应用程序的另一部分中使用我们的对象，例如`AppDelegate`.

```
//// AppDelegate.m
@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    Book *myBook = [[Book alloc] initWithTitle:@"pending title" andAuthor:@"Foo Bar"];

    myBook.title = @"My Cool Book";

    NSLog(@"%@ by %@", myBook.title, myBook.author);

    [myBook release];
}

@end 
```

在此我们创建了一个新的 Book 对象，用更专业的术语来说，我们定义了一个名为`myBook`of的变量`Book`并实例化它。在这里，我们使用`-initWithTitle:andAuthor:`我们之前创建的方法来告诉 Book 对象它应该有一个初始标题和作者。

沿着这条线，我们会得到一些更奇怪的东西。`myBook.title = @"My Cool Book";`您可能还记得我们在 Book.m 中有类似的东西，`self.title = aTitle`. 那么这里发生了什么？为什么我们现在使用 myBook 而不是 self ，就像我们以前那样？原因是因为自我实际上是什么。

`self`是 Objective-C 运行时提供的关键字，指的是您所在的当前对象。因此，如果我们在 Book.m 中编写代码，self 将引用当前的 Book 对象。如果我们在 AppDelegate.m 中使用 self，它将引用 AppDelegate。所以在我们之前的代码中，self 指的是当前的 Book 对象，就像我们的 myBook 对象现在指的是特定的 Book 对象一样。它们本质上是相等的（不完全是，但那是另一个讨论领域）。

这意味着可以通过 myBook 变量访问 Book 中的任何属性或方法，就像您在 Book.m 中使用 self 一样。所以我们也可以做

```
myBook.title = @"My Book";
myBook.author = @"Baz Quux";
myBook.numberOfPages = 100; 
```

希望这会有所帮助（并回答了您的问题，如果没有，那么它可以作为希望了解更多有关属性和实例变量的人们的参考）

# c# - 突出显示方法的退出点

> ID：14786299
> 
> 赞同：1
> 
> 时间：2013-02-09T08:32:21.087
> 
> 标签：c#, visual-studio-2012

是否有任何工具/扩展或其他方式突出显示方法可能退出的所有位置：

*   抛出的异常（至少是当前方法抛出的，并且没有被它捕获的）
*   返回语句
*   void 方法的最后一行

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T08:36:09.943

尝试 ReSharper 的[Navigate to function exits](http://www.jetbrains.com/resharper/webhelp/Navigation_and_Search__Navigate_from_Here__Function_Exits.html)。

# javascript - 随机类事件，将所有类更改为同名

> ID：14786300
> 
> 赞同：0
> 
> 时间：2013-02-09T08:32:23.883
> 
> 标签：javascript

我有一个带有滚动功能的骰子应用程序，滚动功能假设在应用程序内滚动骰子，该函数正在滚动它们，但它打印出所有骰子都是一样的。像这样的东西。如果我有 4 个有价值的骰子

1-4-7-3，当我掷骰子时，答案将是随机的 nr，比如说 6，然后所有 6 个骰子输出 6-6-6-6。

尖端 ？

```
 function rollEvent(){ 
        var rollDices = "roll"; 
        var addClass= document.getElementsByClassName(rollDices); 
        addClass=addClass[addClass.length-1]; 
        addClass.addEventListener("click", rollDice, true); 
        var diceArray = Array=[ 
        "dice dice-side-one", 
        "dice dice-side-two", 
        "dice dice-side-three", 
        "dice dice-side-four", 
        "dice dice-side-five", 
        "dice dice-side-six"]; 
        function rollDice(e) { 
            var name = diceArray[Math.floor(Math.random() * diceArray.length)]; 
            var obj=e.target; 
            var elementToRemove = " dice-window-wrapper "; 
            while((" "+obj.className+" ").indexOf(elementToRemove)==-1){ 
                obj=obj.parentNode; 
            } 

            var allDiceInWindow=obj.getElementsByClassName("dice"); 

             for(var i = 0; i<allDiceInWindow.length; i++){

                  allDiceInWindow[i].className = name;

            }

        } 
    }
    rollEvent(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:57:07.503

您只调用`Math.random()`一次该方法，然后将结果应用于所有骰子。试试这个`rollDice`方法：

```
function rollDice(e) { 
    var obj=e.target; 
    var elementToRemove = " dice-window-wrapper "; 
    while((" "+obj.className+" ").indexOf(elementToRemove)==-1){ 
        obj=obj.parentNode; 
    }
    var allDiceInWindow=obj.getElementsByClassName("dice"); 

    for(var i = 0; i<allDiceInWindow.length; i++){
        // set the name individually for each die
        var name = diceArray[Math.floor(Math.random() * diceArray.length)]; 
        allDiceInWindow[i].className = name;
    }
} 
```

# android - IntelliJ Idea 12 使用 ui builder android 渲染错误

> ID：14786301
> 
> 赞同：0
> 
> 时间：2013-02-09T08:32:41.680
> 
> 标签：android, intellij-idea

IntelliJ Idea 12 的 android UI 构建器每次我将 a 拖放`Switch`到. 时都会出现渲染错误。所有`Layout`其他小部件都工作正常。这是一个错误。如果是，有什么解决方法吗？

![在此处输入图像描述](../Images/2f17243ae0dfb580c8cd90d6a7edd60b.png)

更新：这是错误图像的链接 - [https://www.dropbox.com/s/d09xfm8c0l6omlb/Untitled.png](https://www.dropbox.com/s/d09xfm8c0l6omlb/Untitled.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:43:20.277

发生此错误是因为您没有选择 a`Theme`并且不是 IDEA 特有的。我很确定你会在使用 eclipse ADT 时遇到同样的错误。

*解决方法*：选择一个主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:04:38.763

只需像截图一样选择主题，它就会正确呈现

![在此处输入图像描述](../Images/30b476ddb51a98c37842bf9994f919cf.png)

# php - 使用 $_GET 获取页面信息时如何选择 2 个表

> ID：14786302
> 
> 赞同：0
> 
> 时间：2013-02-09T08:32:43.117
> 
> 标签：php, mysql, select

我有 2 页 maincontent.php 和 showcontent.php。当有人访问 maincontent.php 时，他们会看到 2 个可以单击的图像。如果他们单击图像 1，则 showcontent.php 将获取有关该图像的更多信息并显示。这工作正常，但我希望能够从 2 个表中获取数据，而不仅仅是一个。

这是 maincontent.php

```
<?php include('includes/connect.php');?>

<div id="maincontent_holder">
<div id="newest_shows">

<?php
$query = "SELECT * FROM tv_shows ORDER BY id DESC LIMIT 6";

$result = mysql_query($query);    

while($row = mysql_fetch_assoc($result)) {
    echo "<div id='lastest'>";

    echo "<a href='show.php?show_name=$row[show_name]'><img src='$row[show_cover]' width='110' height='160' alt='$row[show_name]'> </a>";

    echo "</div>";
}
?>
</div>

</div> 
```

这是showcontent.php

```
<?php
include('includes/connect.php');
?>
<div id="maincontent_holder">
<?php

$show_name= $_GET['show_name'];

$sql1="SELECT * FROM tv_shows WHERE show_name = '$show_name'
       UNION
       SELECT * FROM show_episodes WHERE show_name = '$show_name'";

    $result1=mysql_query($sql1);    

while($row1 = mysql_fetch_assoc($result1)) {

echo "<div id='cover_img'>";
echo "<img src='$row1[show_cover]' width='110' height='160' alt='$row1[show_name]'>";
echo "</div>";

echo "<div id='show_title'>";
echo $row1['show_name'];
echo "</div>";

echo "<div id='show_info'>";
echo $row1['show_info'];
echo "</div>";

echo "<div id='show_airs'>";
echo $row1['show_airs'];
echo "</div>";

echo "<div id='show_status'>";
echo $row1['show_status'];
echo "</div>";

echo "<div id='show_top_adzone'>";

echo "</div>";

echo "<div id='show_desc'>";
echo $row1['show_desc'];
echo "</div>";
//end of show desc
echo "<div id='episode_list'>";

echo "<a href='blaa'>$row1[episode_name]</a>";
echo "</div>";

}
?>
</div> 
```

这是我从 showcontent.php 得到的错误

> 警告：mysql_fetch_assoc() 期望参数 1 是资源，布尔值在第 15 行的 C:\xampp\htdocs\includes\layout\showcontent.php 中给出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:40:31.180

您应该在 SQL 查询`LIKE '%{$show_name}%'`之前使用 ,`mysql_real_escape_string($show_name)`来排除 SQL 注入。`tv_shows`但是，您应该确定和的柱状结构`show_episodes`。我认为它没有用`join`：

```
SELECT s.*, e.* FROM tv_shows AS s JOIN show_episodes e ON e.show_id = s.id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:45:41.833

将您的查询更改为这样的内容

```
$sql1="SELECT tv_shows.*, show_episodes.* FROM tv_shows, show_episodes
       WHERE tv_shows.show_name = '$show_name' and show_episodes.show_name = '$show_name'
       and tv_shows.show_name = show_episodes.show_name"; 
```

这会成功的

# javascript - 如何通过 getJson 调用发送自定义用户代理和推荐人？

> ID：14786304
> 
> 赞同：0
> 
> 时间：2013-02-09T08:32:47.907
> 
> 标签：javascript, html, ajax, getjson

从 IOS 使用 getJson 时，我想接收桌面版本的页面。有没有办法在进行 getJson 调用时发送定制的用户代理和定制的推荐人？如果答案是肯定的怎么办？

```
 <script>
$.getJSON('http://anyorigin.com/get?url=http://www.somesite.com/page3.php&callback=?', function(data){
    //$('#output').html(data.contents);

 var siteContents = data.contents;    

//writes to textarea 
document.myform.outputtext.value = siteContents ;

</script> 
```

# jquery - 使用 jquery 更改不透明度和文本颜色

> ID：14786305
> 
> 赞同：0
> 
> 时间：2013-02-09T08:32:47.860
> 
> 标签：jquery, opacity

希望这个问题不会太傻……我还是个初学者！

我现在正在尝试建立我的投资组合网站，可以在[hellothisis.cc上看到](http://www.hellothisis.cc)

我的目标是让版权符号在几秒钟内完全不透明度，然后降低到 0.1 的不透明度，我相信我成功地做到了。代码可能是贫民窟，但它有效吗？我还希望它有一个悬停属性，当悬停时将版权符号更改为完全不透明的红色，然后在您移动鼠标时返回淡出的灰色。

到目前为止，这是我的代码，包括版权符号具有的隐藏和单击功能。

```
<script type="text/javascript">

    $(document).ready(function() {
      $(".name").delay(1000).fadeTo('slow', 0.1, function() {
         $(".name").hover(function() {
             $(this).animate({ opacity: 1 });
             });
      });
    });

    $('.bio').hide();
    $('.name').click(function(){
        $('.bio').fadeToggle(1000);
    });
</script> 
```

我现在的问题是，将鼠标悬停在褪色的灰色上后，即使您将鼠标移开，它仍然保持完全不透明？任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:38:05.407

直接绑定，您无需等待延迟+淡入淡出完成（+如果在淡入淡出期间有人将鼠标悬停，它将回到不透明度 1，这在 imo 中更合乎逻辑

```
 $(".name").on({
          mouseover : function(e) {
                   $(this).stop().animate({ opacity: 1 });
         },
          mouseout : function(e) {
                   $(this).stop().animate({ opacity: 0.1 });
          }
 }).delay(1000).fadeTo('slow', 0.1); 
```

编辑：按顺序排列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T08:38:21.390

您可以使用：

```
$(".name").hover(function() {
  $(this).animate({ opacity: 1 });
}, function(){
  $(this).animate({ opacity: .1 });
}); 
```

第一个函数在`mouseenter`事件触发时使用，第二个函数在`mouseleave`事件被调用时使用。

但是我建议将来考虑[事件委托](http://api.jquery.com/on/)，因为它会更好地为您服务。

# jquery - 无法访问主干视图中模板的 DOM 元素

> ID：14786307
> 
> 赞同：1
> 
> 时间：2013-02-09T08:33:10.510
> 
> 标签：jquery, backbone.js

我有这样的看法：

```
var InvoiceForm = Backbone.View.extend({
    template: _.template(addform),
    initialize: function () {
        this.$("#buyer").val("test");
    }
}); 
```

我有包含买家 id 元素的模板 addform。这不是设置值。我知道我在这里做一些愚蠢的事情:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:54:40.920

视图中的主干模板不会自动呈现。事实上，在[Backbone 文档](http://backbonejs.org/)中，有一些示例可以做到这一点。

如果您在视图中使用模板，它应该在初始化时呈现，您可以这样编写代码：

```
var InvoiceForm = Backbone.View.extend({
    template: _.template(addform),
    render: function() {
        this.$el.html(this.template());
        return this;
    },
    initialize: function () {
        this.render(); // Rendering your template in your this.el element
        this.$("#buyer").val("test"); // Setting the value of #buyer in your template
    }
}); 
```

您稍后可以像这样使用此视图：

```
var form = new InvoiceForm({ el: $("#wrapper_for_invoiceform") }); 
```

检查这个小提琴中的演示：http: [//jsfiddle.net/hsn7J/](http://jsfiddle.net/hsn7J/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:01:54.103

如果您尝试在点击事件上执行此操作 - 更改为“测试”值，您可以使用以下操作

```
initialize: function(){
            this.model.on('change', this.render, this);         
        },

    render: function() {
            this.$el.html( this.template(this.model.toJSON()) );
            this.input = this.$('#buyer');
            return this;
        },

    events: {
     'click #buyer' : 'editValue',
    },

    editValue: function(){
        this.input.val("test");
    } 
```

# python - 如何通过检查获取类静态方法的类名

> ID：14786314
> 
> 赞同：1
> 
> 时间：2013-02-09T08:34:15.347
> 
> 标签：python, inspection

我发现了同样的类似问题，但我的问题不同

```
def trace ():
   ?

class A():
  @staticmethod
  def Aha():
     trace ()
     ... 
```

我想要跟踪输出

> A.Aha() 被称为

我已经知道如何通过检查获取函数名，并获取 的类名`instance.method`，例如：

```
self_argument = frame.f_code.co_varnames[0]  # This *should* be 'self'.
instance = frame.f_locals[self_argument]
class_name = instance.__class__.__name__ 
```

但是类静态方法没有自变量，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:58:13.620

您可以尝试为`Aha`. 如果你不知道装饰器是什么，我建议你阅读[这个](https://stackoverflow.com/a/1594484/1860757)和[这个。](http://simeonfranklin.com/blog/2012/jul/1/python-decorators-in-12-steps/)

类似下面的内容应该打印出函数名，然后调用该函数。

```
def wrapper(func):
    def inner(*args, **kwargs):
        print("function {0} has been called".format(func.__name__))
        return func(*args, **kwargs)
    return inner

@wrapper
def f():
   print "I'm in the function 
```

返回

```
In [16]: f()
function f has been called
in the function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T08:40:43.630

这就是静态方法的定义：在没有类参数（如在类方法中）和没有实例参数（如在实例方法中）的情况下调用它。在模块范围内声明的函数和静态方法之间唯一真正的区别是方法名称是在类的命名空间中定义的，而不是在模块的命名空间中。

换句话说，您不能直接访问类对象。您可以通过检查堆栈来获取函数名称（尽管我不确定它有多大用处）：

```
>>> import sys
>>> import traceback
>>> class A(object):
        @staticmethod
        def a():
            trace()
>>> def trace():
        print traceback.extract_stack(sys._getframe())[-3][3]
>>> A.a()
A.a() 
```

给定名称，您可以通过从名称中提取并在模块的命名空间中查找它来获取类对象......

以供参考：

框架@-1：调用traceback.extract_stack()
框架@-2：调用trace()
框架@-3：调用Aa()

# java - 制作截图

> ID：14786319
> 
> 赞同：0
> 
> 时间：2013-02-09T08:35:47.030
> 
> 标签：java, swing, screenshot, bufferedimage, awtrobot

我想制作我创建的面板的屏幕截图，代码如下所示。任何人都可以告诉我为什么我没有得到。谢谢

```
 public static final void makeScreenshot(JFrame argFrame) 
    {
      Rectangle rec = argFrame.getBounds();
      BufferedImage bufferedImage = new BufferedImage(rec.width, rec.height, BufferedImage.TYPE_INT_ARGB);
      argFrame.paint(bufferedImage.getGraphics());

    try 
   {
        // Create temp file.
        File temp = File.createTempFile("C:\\Documents and Settings\\SriHari\\My Documents\\NetBeansProjects\\test\\src\\testscreenshot", ".jpg");

        // Use the ImageIO API to write the bufferedImage to a temporary file
        ImageIO.write(bufferedImage, "jpg", temp);

        //temp.deleteOnExit();
    } 

   catch (IOException ioe) {} 
  } // 
        public static void main(String args[])
        {
           TimeTableGraphicsRunner ts= new TimeTableGraphicsRunner();
           for(long i=1;i<1000000000;i++);
           ts.makeScreenshot(jf);
            System.out.println("hi");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:00:00.107

你可以尝试使用类似的东西`Robot#createScreenCapture`

![在此处输入图像描述](../Images/f8befc589538785cc74a2be3610d92b7.png)

如果您不想捕获整个屏幕，您可以使用[`Component#getLocationOnScreen`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)查找组件在屏幕上的位置来代替...

```
public class CaptureScreen {

    public static void main(String[] args) {
        new CaptureScreen();
    }

    public CaptureScreen() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridwidth = GridBagConstraints.REMAINDER;

                frame.add(new JLabel("Smile :D"), gbc);

                JButton capture = new JButton("Click");
                capture.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        try {
                            Robot robot = new Robot();
                            Rectangle bounds = frame.getBounds();
                            bounds.x -= 1;
                            bounds.y -= 1;
                            bounds.width += 2;
                            bounds.height += 2;
                            BufferedImage snapShot = robot.createScreenCapture(bounds);
                            ImageIO.write(snapShot, "png", new File("Snapshot.png"));
                        } catch (Exception ex) {
                            ex.printStackTrace();
                        }
                    }
                });

                frame.add(capture, gbc);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

} 
```

**使用示例`Component#getLocationOnScreen`**

![在此处输入图像描述](../Images/77ac95afcbaac33403aa58607f6db454.png)

```
public class CaptureScreen {

    public static void main(String[] args) {
        new CaptureScreen();
    }

    public CaptureScreen() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridwidth = GridBagConstraints.REMAINDER;

                frame.add(new JLabel("Smile :D"), gbc);

                JButton capture = new JButton("Click");
                capture.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        try {
                            Robot robot = new Robot();
                            Container panel = frame.getContentPane();
                            Point pos = panel.getLocationOnScreen();
                            Rectangle bounds = panel.getBounds();
                            bounds.x = pos.x;
                            bounds.y = pos.y;
                            bounds.x -= 1;
                            bounds.y -= 1;
                            bounds.width += 2;
                            bounds.height += 2;
                            BufferedImage snapShot = robot.createScreenCapture(bounds);
                            ImageIO.write(snapShot, "png", new File("Snapshot.png"));
                        } catch (Exception ex) {
                            ex.printStackTrace();
                        }
                    }
                });

                frame.add(capture, gbc);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

} 
```

**另一个例子展示`Component#getLocationOnScreen`**

![在此处输入图像描述](../Images/7b85ff5ff700fe4737a5d98bdce983f4.png)![在此处输入图像描述](../Images/22574712397f31a3ebdf9320c3242b6f.png)![在此处输入图像描述](../Images/fec97ee65c3ba6e8bb3b7f547b294b89.png)![在此处输入图像描述](../Images/c648fcab39d812f763757f8d786891ff.png)![在此处输入图像描述](../Images/4ecde27311e762e78fba97a415df25fa.png)![在此处输入图像描述](../Images/891bf85750f8863be4c7e4afadd3caa4.png)

图像的主要原因 3 相同，是因为示例转储了根窗格、分层窗格和内容窗格......

```
public class CaptureScreen {

    public static void main(String[] args) {
        new CaptureScreen();
    }

    public void save(Component comp, File file) {
        if (comp.isVisible()) {
            try {
                System.out.println(comp);
                Robot robot = new Robot();
                Rectangle bounds = new Rectangle(comp.getLocationOnScreen(), comp.getSize());
                bounds.x -= 1;
                bounds.y -= 1;
                bounds.width += 2;
                bounds.height += 2;
                BufferedImage snapShot = robot.createScreenCapture(bounds);
                ImageIO.write(snapShot, "png", file);
            } catch (Exception ex) {
                ex.printStackTrace();
            }
        }
    }

    private int layer;

    public void capture(Container container) {
        layer = 1;
        captureLayers(container);
    }

    public void captureLayers(Container container) {
        save(container, new File("SnapShot-" + layer + "-0.png"));
        int thisLayer = layer;
        int count = 1;
        for (Component comp : container.getComponents()) {
            if (comp instanceof Container) {
                layer++;
                captureLayers((Container) comp);
            } else {
                save(comp, new File("SnapShot-" + thisLayer + "-" + count + ".png"));
                count++;
            }
        }
    }

    public CaptureScreen() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                final JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridBagLayout());

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridwidth = GridBagConstraints.REMAINDER;

                frame.add(new JLabel("Smile :D"), gbc);

                JButton capture = new JButton("Click");
                capture.addActionListener(new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        capture(frame);
                    }

                });

                frame.add(capture, gbc);

                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }

        });
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T08:41:55.173

以下对我有用：

```
public static void main (String [] args)
{
    final JFrame frame = new JFrame ();

    JButton button = new JButton (new AbstractAction ("Make Screenshot!")
    {
        @Override
        public void actionPerformed (ActionEvent e)
        {
            Dimension size = frame.getSize ();
            BufferedImage img = new BufferedImage (size.width, size.height, BufferedImage.TYPE_3BYTE_BGR);
            Graphics g = img.getGraphics ();
            frame.paint (g);
            g.dispose ();
            try
            {
                ImageIO.write (img, "png", new File ("screenshot.png"));
            }
            catch (IOException ex)
            {
                ex.printStackTrace ();
            }
        }
    });

    frame.setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);
    frame.getContentPane ().setLayout (new BorderLayout ());
    frame.getContentPane ().add (button, BorderLayout.CENTER);
    frame.pack ();
    frame.setVisible (true);
} 
```

它不呈现窗口标题和边框，因为这是由操作系统而不是 Swing 处理的。

# javascript - modernizr.load() 中的两个 Modernizr 测试？

> ID：14786323
> 
> 赞同：3
> 
> 时间：2013-02-09T08:36:51.773
> 
> 标签：javascript, modernizr

在使用 yep/nope/modernizr.load() 加载资源之前，我需要检查对两项的支持。怎么做呢？

在通过两项测试后，不是其中一项，而是两项。

一个是我已经添加的自定义测试，另一个是现有测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T15:42:55.173

[Modernizr 文档](http://modernizr.com/docs/)为您提供了答案：

取自文档...

> Modernizr.load 小而简单，但它可以为您完成相当多的繁重工作。当您的脚本依赖多个 Modernizr 功能测试时，这里有一个稍微复杂一点的使用 Modernizr.load 的示例。一个好的技术是将多个 polyfill 脚本包装成一个“oldbrowser”类型的脚本，这样你就不会一次加载太多的脚本。以下是可能的工作方式：

```
Modernizr.load([
  {
    test : Modernizr.fontface && Modernizr.canvas && Modernizr.cssgradients,
    nope : ['presentational-polyfill.js', 'presentational.css']
  }
]); 
```

如您所见，答案就是将您需要的所有测试放在一个布尔表达式中。

我已经简化了文档中的示例，实际上文档中给出的示例更加详细，因此请务必阅读它们，因为它可能会为您提供更好的方式来做您所追求的事情。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-23T17:04:47.437

@Spudley 的答案很棒，但在某些情况下可能更有帮助

```
Modernizr.load([
    {
      test:  Modernizr.input.autofocus || Modernizr.cssanimations,
    nope: 'jquery.js'
   },
   {
    test: Modernizr.input.autofocus,
    nope: 'autofocus.js'
   },
   {
     test: Modernizr.cssanimations,
     nope: 'animations.js'
   }
   ]); 
```

# asp.net-mvc - 使用条形码和条形码扫描仪自动填写网络表格

> ID：14786324
> 
> 赞同：0
> 
> 时间：2013-02-09T08:37:07.867
> 
> 标签：asp.net-mvc, barcode

我正在使用 asp.net MVC4 开发一个电子商务网站，它需要填写产品表单（例如产品名称、价格等）并保存到数据库，我知道我们可以使用条形码扫描仪来做这些事情（扫描条形码，表格将以编程方式填写）。我应该谷歌的关键词是什么？有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-29T10:03:03.467

步骤可能是：

*   在网络浏览器中调用网络摄像头
*   扫描和解码条形码
*   分析结果。也许你可以制作一个像 {"name":xx, "price":xx, etc} 这样的数据结构。从结果中提取数据并将其填写到产品表格中。

# java - 如何将特定元素添加到arraylist的数组

> ID：14786326
> 
> 赞同：0
> 
> 时间：2013-02-09T08:37:17.093
> 
> 标签：java

```
ArrayList<int[]> arl = new ArrayList<int[]>();
int a1[] = {1, 2, 3};
arl.add(0, a1); 
```

`ar1[0][2]=5` 如果我们想将值 3 重置为其他值，如何像在 2d 数组中那样在特定位置设置元素值，就像在这段代码中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T08:38:07.100

定义你`arl`为

```
ArrayList <int []> arl = new ArrayList <int []> ();
arl.add (0, new int [] {1, 2, 3}); 
```

并这样做：

```
arl.get (0) [2] = 5; 
```

# javascript - 游戏精灵动画

> ID：14786327
> 
> 赞同：0
> 
> 时间：2013-02-09T08:37:37.343
> 
> 标签：javascript, animation, sprite, frames, sprite-sheet

我正在制作一个游戏，我想为我的角色设置动画（攻击、行走等），但我不知道该怎么做。我知道这不是 for 循环，因为如果是，动画将立即播放，您将看不到它。我已经下载了一个示例精灵表，一旦我学会了如何做，我将对其进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:11:59.890

您可以在支持的情况下使用[CSS3 的 steps() 函数](https://developer.mozilla.org/en-US/docs/CSS/timing-function)获取精灵动画。或者使用计时器（`setTimeout`，`setInterval`）的普通 javascript 方法。

这是两者的简单示例： http: [//codepen.io/anon/pen/hCeuG](http://codepen.io/anon/pen/hCeuG)

但是对于 JS 部分，如果您有一个更新动画的游戏循环会更好，这只是一个示例。您可以在此处找到有关 javascript 游戏循环的非常深入的解释：http: [//nokarma.org/2011/02/02/javascript-game-development-the-game-loop/index.html](http://nokarma.org/2011/02/02/javascript-game-development-the-game-loop/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:25:48.300

有一些基于 JS 的游戏库可用，其唯一目的是让游戏更容易。你应该使用其中之一。
我已经研究过其中的一些，我喜欢[CreateJS](http://www.createjs.com/)，它对声音和 spritesheets 有广泛的支持。事实上，您可以使用动画动态创建精灵表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T09:21:28.740

您可以使用免费精灵或尝试使用 Photoshop（如果您是专业人士！）或[Sprite Maker](http://www.spriteland.com/sprites/sprite-maker.htm) （对于基本用户！）

对于 3D 模型，您可以使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T06:22:15.247

我也是这样的情况。

[CreateJS](http://www.createjs.com/)对我很有帮助。

这个库有关于处理精灵表和位图动画的非常好的文档。

EaselJS 提供了带有源代码的示例，以展示如何在游戏中使用精灵表。

另一个对精灵表操作很有帮助的博客是[David Rousset：HTML5 Gaming: 在 Canvas 中使用 EaselJS 动画精灵](http://blogs.msdn.com/b/davrous/archive/2011/07/21/html5-gaming-animating-sprites-in-canvas-with-easeljs.aspx)

我认为这些可能对你有帮助

# debian - 无法连接到视频设备 (/dev/video0)

> ID：14786337
> 
> 赞同：-1
> 
> 时间：2013-02-09T08:38:31.943
> 
> 标签：debian

我检查了我的 ls -la /dev/v* 但没有 /dev/video0 文件，如何在 debian OS 中连接 video0 文件

> crw------- 1 root root 7, 0 Feb 8 16:21 /dev/vcs crw------- 1 root root 7, 1 Feb 8 16:21 /dev/vcs1 crw--- ---- 1 root root 7，2 月 2 日 16:21 /dev/vcs2 crw------- 1 root root 7，2 月 3 日 16:21 /dev/vcs3 crw------- 1 根根 7，2 月 4 日 16:21 /dev/vcs4 crw------- 1 根根 7，2 月 5 日 16:21 /dev/vcs5 crw------- 1 根根 7 , 8 月 6 日 16:21 /dev/vcs6 crw------- 1 根根 7, 2 月 63 日 8 17:34 /dev/vcs63 crw------- 1 根根 7, 8 月 7 日16:21 /dev/vcs7 crw------- 1 root root 7, 128 Feb 8 16:21 /dev/vcsa crw------- 1 root root 7, 129 Feb 8 16:21 / dev/vcsa1 crw------- 1 root root 7, 130 Feb 8 16:21 /dev/vcsa2 crw------- 1 root root 7, 131 Feb 8 16:21 /dev/vcsa3 crw ------- 1 根 7, 132 2 月 8 日 16:21 /dev/vcsa4 crw------- 1 根 7, 133 2 月 8 日 16:21 /dev/vcsa5 crw------- 1 根 7、134 2 月 8 日 16:21 /dev/vcsa6 crw------- 1 根 7、191 2 月 8 日 17:34 /dev/ vcsa63 crw------- 1 root root 7, 135 Feb 8 16:21 /dev/vcsa7 crw------- 1 root root 10, 63 Feb 8 16:21 /dev/vga_arbiter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T06:23:07.910

我已经在 Debian 中更新了最新的内核。这个问题已经解决了。

# .htaccess - 使用 .htaccess 为多个参数重写 URL

> ID：14786340
> 
> 赞同：14
> 
> 时间：2013-02-09T08:38:56.197
> 
> 标签：.htaccess

这个问题可能是重复的。但我没有找到任何适合我的解决方案。我想重写 URL，我有一级和二级参数。第一个参数是`p`，第二个是`sp`

`www.domain.com/home`应该指向`www.domain.com/index.php?p=home` 并且 `www.domain.com/projects/99`应该指向`www.domain.com/index.php?p=projects&sp=99`

我如何在 .htaccess 中进行操作？

目前我的htaccess如下，

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?p=$1
RewriteRule ^([^/]*)/([^/]*)\$ index.php?p=$1&sp=$2 [L] 
```

这个 htaccess 的问题在于它正确地指向了一级 url。即，www.domain.com/home。但不是两级网址。IE。www.domain.com/projects/99

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-09T09:06:45.123

您必须分别对待规则。规则之前的所有条件仅适用于单个规则。后续规则及其条件不涉及后续规则。您试图“链接”两条规则。第二条规则永远无法匹配，因为第一条规则是一个包罗万象的规则，它改变了语法。除此之外，您必须确保第一条规则不会捕获不需要的请求。还要考虑是否要在模式中使用`*`or`+`运算符。我建议您使用`+`运算符，以便在为“页面”或“子页面”请求空值时获得清晰的错误消息。

所以这可能更接近你正在寻找的东西：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)$ index.php?p=$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/([^/]+)$ index.php?p=$1&sp=$2 [L] 
```

# image-processing - 如何在 HTML5 画布上依次实现旋转和裁剪？

> ID：14786342
> 
> 赞同：0
> 
> 时间：2013-02-09T08:39:06.273
> 
> 标签：image-processing, html5-canvas

场景是这样的。我正在应用`crop`到画布上的图像，效果很好。现在我也想申请`rotate`它。我尝试使用基于浏览器的 css 旋转，但是当所选像素以一定的角位移移开时，它会弄乱裁剪坐标选择。最后，当需要保存应用旋转的最终图像时，我最终将不得不放弃这种方法。

目前我正在使用一个堆栈来存储我裁剪的阶段，我使用它`undo`来恢复到以前的阶段。我只应用序列中的最后一个作物，这会产生与应用所有作物相同的结果。

通过旋转，顺序可以是随机的。我可以：

```
rotate
crop
crop
rotate
rotate
crop 
```

我如何应用这个序列？只需按发生顺序应用所有这些？这意味着我必须应用所有的作物和所有的轮作，这似乎有点低效。旋转也只是角度的最新值，还是我必须将增加的角度与裁剪序列一起应用？

我真的需要一个专业的建议！

注意：很抱歉，但我无法粘贴任何代码示例，因为它是一个非常庞大的代码（2000 多行）！请不要向我推荐任何像 Pixastic 或 jCrop 这样的库，因为将它们与许多自定义功能一起使用是非常危险的！我更喜欢编写自己的代码。

# asp.net - asp.net 数据阅读器

> ID：14786345
> 
> 赞同：0
> 
> 时间：2013-02-09T08:39:37.427
> 
> 标签：asp.net, dataset, dataadapter

我需要将 DataSet 和 DataAdapter 与以下代码一起使用，但我无法集成它。请您帮我添加数据集和数据适配器。

```
DbCommand dbCommand10;
dbCommand10 = db.GetStoredProcCommand("Select_Post_Comment");
db.AddInParameter(dbCommand10, "PostId", DbType.Guid, Post_ID);
//IDataReader dr10 = db.ExecuteReader(dbCommand10); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:03:03.463

```
// 1\. setup command

// 2\. add parameters

// 3\. pass instance of command to data adapter
var da = new SqlDataAdapter( command );

// 4\. create and fill a dataset (executes the command passed to the adapter)
var ds = new DataSet();
da.Fill( ds );

// 5\. be sure to dispose command/connection 
```

*   API 参考（尽管有一个相当糟糕的例子）：http: [//msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx)
*   [从 DataAdapter 填充 DataSet 的其他方法](http://msdn.microsoft.com/en-us/library/bh8kx08z.aspx)

# ios - 可可绑定核心数据中的延迟获取是什么？

> ID：14786348
> 
> 赞同：2
> 
> 时间：2013-02-09T08:39:54.907
> 
> 标签：ios, macos, core-data, cocoa-bindings

我观看了有关 CoreData 的视频教程。我看到了一个选项

*   使用延迟获取

使用数组控制器映射对象模型。

但是不明白什么是 Lazy fetching？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T13:46:19.647

这意味着数据实际上（自动）不是在请求的时间被获取，而是在控制器请求数据的时间。例如，考虑具有数千行的大型 tableview - 在执行请求时不会同时获取它们，而是在用户滚动 tableview 时由小部分动态获取它们。

# ruby-on-rails - 带有 Resque 的 Jobs 在 Heroku 上给出“不知道如何构建任务‘jobs:work’”

> ID：14786351
> 
> 赞同：7
> 
> 时间：2013-02-09T08:40:16.033
> 
> 标签：ruby-on-rails, ruby, heroku, rake, resque

我按照[https://devcenter.heroku.com/articles/queuing-ruby-resque](https://devcenter.heroku.com/articles/queuing-ruby-resque)上的教程在 Rails 应用程序中排队和运行后台作业。排队作业后，它似乎没有运行任何作业，因为在控制台中我可以看到作业尚未处理

```
>Resque.info
=> {:pending=>1, :processed=>0, :queues=>1, :workers=>0, :working=>0, :failed=>0, :servers=>["redis://dory.redistogo.com:9826/0"], :environment=>"production"} 
```

如果我尝试做（本地）

```
bundle exec rake jobs:work 
```

我明白了

```
rake aborted!
Don't know how to build task 'jobs:work' 
```

在heroku上，如果我尝试

```
heroku run rake jobs:work 
```

我再次得到`不知道如何构建任务'

在我的 Rakefile 中有`require 'resque/tasks'`，在我的 Procfile 中有

```
resque: env TERM_CHILD=1 bundle exec rake jobs:work
resque: env TERM_CHILD=1 bundle exec rake jobs:work 
```

我的 Gemfile 中有 Resque 和 redis gem，但没有延迟作业。

**更新：** 这是我的 Rakefile：

```
#!/usr/bin/env rake
require File.expand_path('../config/application', __FILE__)
Guard::Application.load_tasks 
```

`/lib/tasks`是空的。我在控制器中排队的应用程序/工作人员中有一个工作人员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T14:51:57.470

如果它在本地不起作用，这似乎与 Heroku 没有任何关系。您必须透露一些来源以帮助人们帮助您。例如，你的 Rakefile 是什么样的？那篇文章中的演示应用程序[定义了一个带有 Rake 任务](https://github.com/trineo/resque-example/blob/master/Rakefile)的任务。您是否定义了您的 rake 任务并添加了适当的 gem 引用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:33:32.950

尝试`resque:work`代替，`jobs:work`看看这是否是预期的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-14T23:29:20.927

您只需要添加`require 'resque/tasks'`您的`Rakefile`, 然后在命令行中：

```
QUEUE=file_serve rake environment resque:work 
```

你的工作名称在哪里`file_serve`（班级应该是`FileServeJob`）。

[请参阅此处](https://github.com/resque/resque#workers)的文档- 我发现它们有点令人困惑，因为设置和运行信息是在作业类创建之后出现的。

# c - 我的进程正在映射到 PCI 内存孔，为什么？

> ID：14786356
> 
> 赞同：2
> 
> 时间：2013-02-09T08:40:53.830
> 
> 标签：c, memory, ubuntu, kernel, pci

我修改了我的内核并自己遍历页表以获取一个进程代码段的物理地址。我`(current->mm)->start_code`作为参数传递给我的函数。上述功能的代码如下：

```
 unsigned long user_va_to_pa(unsigned long v) {

 pgd_t *pgd = pgd_offset(current->mm, v);
 printk("process id is %d\n",current->pid); 

 if (!pgd_none(*pgd)) {
    pud_t *pud = pud_offset(pgd, v);
    if (!pud_none(*pud)) {
        pmd_t *pmd = pmd_offset(pud, v);
        if (!pmd_none(*pmd)) {
            pte_t *pte;
            pte = pte_offset_map(pmd, v);
            if (pte_present(*pte)){
               unsigned long pa=pte_val(*pte) & PTE_PFN_MASK;
               printk(KERN_ALERT "pte value is (in vatopa) %lx\n", pte_val(*pte));
               pte_unmap(pte);
               return pa;   //return the real physical address(page aligned)           
            }
            else {
                printk(KERN_ALERT "cannot find pte\n");
            }

        }
        else{
            printk(KERN_ALERT "cannot find pmd\n");

        }
    }
    else {

        printk(KERN_ALERT "cannot find pud\n");
    }
 }
 else {
    printk(KERN_ALERT "cannot find PGD\n");         
 }
return 1;
} 
```

但是，物理地址似乎经常位于 PCI 内存孔中。我从用户应用程序调用我的函数作为系统调用。请注意，我的函数可以像这样打印出地址：

```
pte value is (in vatopa) efe2d025 
```

然后**我**通过`$ cat /proc/iomem`.

我可以看到（显示部分）：

```
 20000000-201fffff : reserved
20200000-40003fff : System RAM
40004000-40004fff : reserved
40005000-ced2ffff : System RAM
ced30000-dae9efff : reserved
dae9f000-daf9efff : ACPI Non-volatile Storage
daf9f000-daffefff : ACPI Tables
dafff000-df9fffff : reserved
dfa00000-febfffff : PCI Bus 0000:00
  e0000000-efffffff : 0000:00:02.0
  f0000000-f03fffff : 0000:00:02.0
  f0400000-f0bfffff : PCI Bus 0000:02
  f0c00000-f13fffff : PCI Bus 0000:04
  f1400000-f1bfffff : PCI Bus 0000:04
  f1c00000-f1cfffff : PCI Bus 0000:03
    f1c00000-f1c01fff : 0000:03:00.0 
```

您可以看到地址`efxxxxxx`完全在 PCI 内存孔中。但是，它应该驻留在系统 RAM 中，对吧？

这使我无法为该页面保留页面属性，因为它位于具有另一个属性的内存孔中。这很奇怪。

至于我的系统，我在具有 8GB 内存的 Intel i5 Core 机器上使用 32 位 12.04 Ubuntu 内核。

# coronasdk - 科罗纳的可步行和不可步行瓷砖地图

> ID：14786358
> 
> 赞同：0
> 
> 时间：2013-02-09T08:41:24.957
> 
> 标签：coronasdk

我可以使用平铺地图编辑器（[http://www.mapeditor.org/ ）创建地图，并使用此库（](http://www.mapeditor.org/) [http://developer.coronalabs.com/code/gridmap](http://developer.coronalabs.com/code/gridmap) ）将其加载到电晕中。我在平铺地图编辑器中创建了一个迷宫地图，但我不知道如何将墙设置为不可步行。任何帮助、想法、链接将不胜感激。感谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T01:29:13.503

我已经完成了您尝试使用网格图和平铺进行的操作。

在 Tiled 中，在单独的图层中创建不可行走的部分，然后在图层面板中右键单击该图层。选择“图层属性”。在名称标题下，输入 Physics:existent。在值标题下，键入 true。保存并导出为 lua 文件并包含在您的项目中，您就完成了！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T21:26:59.483

我不确定 Tiled 是如何工作的，或者你的地图有多大……或者你是否仍然遇到这个问题。然而，最近我正在开发一个应用程序，我需要一个物体与墙壁碰撞（在房间/建筑物中）。我所做的是在 Photoshop 中在整个房间（墙壁和所有）上创建图像。然后我将它设置为背景，并使用矩形 (display.newRect) 来创建显示在我的房间图像下方的隐形墙。如果您仍在寻找想法，您可以尝试类似的方法。

例如：

```
wall1 = display.newRect(x, y, w, h)
wall2 = display.newRect(x, y, w, h)
wall3 = display.newRect(x, y, w, h)
wall4 = display.newRect(x, y, w, h)

background = display.newImage("", x, y)

physics.addBody(wall1, "static")
...
...
... 
```

在这种风格中，我能够用实际的矩形绘制图像中的墙壁并将它们添加到物理中，这样我就可以与它们发生碰撞，而用户一直认为它们正在与我图像中的墙壁发生碰撞。

# google-drive-api - 使用多个帐户登录时如何避免changes.list缩略图上的404？

> ID：14786367
> 
> 赞同：3
> 
> 时间：2013-02-09T08:42:14.157
> 
> 标签：google-drive-api

当我在多个帐户上登录并为 changes.list 进行 API 调用时，我得到 404 的图像缩略图。

重现该问题的完整步骤如下所述：

1.  使用两个帐户登录，一个是个人 gmail 帐户，一个是 Google Apps 帐户，分别是 User_gmail 和 User_gapps

2.  进行 API 调用以获取 URL，以获取驱动器中的更改列表。

3.  加载图像的缩略图。

预期行为：

缩略图图像工作。

实际行为：

*   当我使用 User_gmail 和 User_gapps 登录并在身份验证流程中选择 User_gmail 时，我可以看到所有已修改文档的缩略图。

*   当我仅使用 User_gapps 或 User_gmail 登录时，我可以正确看到缩略图。

*   但是，当以两个用户的身份登录并在身份验证流程中选择 User_gapps 作为用户时，我看到了损坏的缩略图。

**更新：**重现此问题的最简单方法是登录多个帐户，一个个人帐户和一个应用程序帐户，然后使用此 api。如果您使用您的工作帐户授权 API，并执行请求，然后单击“thumbnailLink”URL，您可以看到 404。

[https://developers.google.com/apis-explorer/#p/drive/v2/drive.changes.list?includeDeleted=false](https://developers.google.com/apis-explorer/#p/drive/v2/drive.changes.list?includeDeleted=false)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T23:29:18.220

有两种方法可以查看 Google 文档的缩略图。通过 Google Drive API 获取缩略图的 URL 后，可以使用“Cookie”授权或 OAuth 2.0 授权查看此 URL。

您似乎正在使用“Cookie”授权（即用户当前已登录浏览器）。发生的情况是浏览器默认使用这两个帐户之一，不幸的是它可能没有使用正确的帐户。在该特定情况下，您可以附加`&authuser=0`或附加`&authuser=1`到缩略图的 URL，这将强制使用帐户或另一个，这两个值之一将起作用。

问题是您不知道哪个值会起作用（`1`或`0`），因此您必须使用 Javascript 以编程方式测试这两个 URL 以查看哪个起作用或失败。

加载缩略图的另一种方法是使用 OAuth 2 auth。这更健壮。您可以通过附加`&access_token=<Your_OAuth_2_access_token>`. 确保使用您在 API 请求中使用的相同 OAuth 访问令牌（以前称为 Bearer 令牌）。这样您就可以确定图像会加载。如果用户退出了他的 Google 帐户，这甚至可以工作。您将需要访问实际文件的数据。`drive.readonly.metadata`因此，例如，如果您已授权范围，这将不起作用。您需要授权以下范围之一：

*   `https://www.googleapis.com/auth/drive.file`
*   `https://www.googleapis.com/auth/drive`
*   `https://www.googleapis.com/auth/drive.readonly`

请注意：访问令牌仅在 1 小时内有效。

# database - select * from here where THIS IS CHECKED

> ID：14786368
> 
> 赞同：0
> 
> 时间：2013-02-09T08:42:24.113
> 
> 标签：database, datagrid, checkbox, vb6

我正在寻找一种将我的数据库中已检查（1）的数据显示到 DataGrid 的方法，不包括那些未检查（0）的数据。

**样本数据库：**

**水果？**
苹果 - 1
鼠标 - 0
葡萄 - 1
铅笔 - 0
橙色 - 1

**Button_Click**

... 在 DataGrid 显示上仅选中数据/行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:55:44.250

这将帮助您在网格中添加复选框列，然后根据您的数据库为选中和取消选中代码。同样的方式，您可以获取有关已检查行单元格值的 WHERE 条件的数据...

```
 DataGridViewCheckBoxColumn checkColumn = new DataGridViewCheckBoxColumn();
    checkColumn.Name = "X";
    checkColumn.HeaderText = "X";
    checkColumn.Width = 50;
    checkColumn.ReadOnly = false;
    checkColumn.FillWeight = 10; 
    //if the datagridview is resized (on form resize) the checkbox won't take up too much; value is relative to the other columns' fill values
    dataGridView1.Columns.Add(checkColumn); 
```

# bash - bashscript 没有通过 crontab 在当前 shell 中被调用

> ID：14786369
> 
> 赞同：0
> 
> 时间：2013-02-09T08:42:33.313
> 
> 标签：bash, crontab, .bash-profile

在 linuxmint 中以 root 用户身份工作。我的 bashscript 可以完美地作为单个脚本运行并生成日志文件，但它没有通过 crontab 在我当前的 shell 中被调用。

bashscript 的路径：/root/Documents/mybashscript.sh

crontab 行：

```
0.9 * * * * root /root/Documents/mybashscript.sh > /root/Documents/crontab.log 
```

mybashscript.sh 里面的命令如下：

```
#!/bin/bash
source /root/.profile
echo -n "Please enter your name: "
read name
TIME=‘date +%H‘
case $TIME in
0[6-9] | 1[01] ) echo -n "Good morning";;
12 ) echo -n "Good Noon";;
1[2-6] ) echo -n "Good Afternoon";;
1[7-9] ) echo -n "Good Evening";;
*) echo -n "Good Night";;
esac
echo " $name, Nice to meet you!" 
```

谁能告诉我如何解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:46:03.293

首先，我不相信这`0.9`是一个有效的分钟指标。我认为您可能想要`0-9`（当然取决于您希望它何时运行）。

其次，您的条目中似乎有一个无关紧要`root`的`cron`条目（最后一个之后的第一个`*`）。

第三，`cron`工作对于交互式输入来说并不是那么好，例如：

```
read name 
```

所以我不确定你想在那里实现什么。

# excel - Dynamics Ax(R2) Excel 插件：如何使用数组？

> ID：14786370
> 
> 赞同：1
> 
> 时间：2013-02-09T08:42:33.127
> 
> 标签：excel, add-in, axapta, ax

在以前的版本中，Dynamics Ax Excel 加载项在处理包含数组的表时返回错误（名为“名称”的列已属于此数据表）。这似乎已经在 R2 中得到了一定程度的修复，因为现在可以直接使用这些表而不会出错。

但是，数组字段不会出现在 Excel 加载项中。我正在开发一个项目，我需要能够访问加载项中的这些字段。我曾尝试直接使用查询并制作文档服务并添加为数据，但都没有奏效。

具有数组的表的示例是 ProjTable 和 ProjectWorkerSetup。

有没有人想出一种让数组在 Dynamics Ax Excel 加载项中工作的简单方法？对于数组中的每个索引，数组是否被展平为一列，或者是否只出现一列，然后在更新时将其插入到数组的开头，这并不重要。

任何帮助将非常感激

# mysql - 使用 MySQL 从另一个表更新一个表时如何处理 NULL

> ID：14786372
> 
> 赞同：1
> 
> 时间：2013-02-09T08:42:54.703
> 
> 标签：mysql, sql-update

我有以下代码，但它会更新 中的所有行`table_1`，即使条件不成立（即 where`table_1.data_1`中根本不存在`table_2.data_1`）。如何调整以下更新语句，以便仅更新`table_1`与其中的值匹配的值`table_2`？

我正在尝试将所有值设置`table_1.data_2`为 NULL，其中`data_1`两个表中的值相同。

```
UPDATE table_1.data_1, table_2.data_1
SET table_1.data_2 = NULL
WHERE table_1.data_1 = table_2.data_1 
```

这是我原帖的更新。

```
UPDATE table_1.data_2
SET table_1.data_2 = NULL
WHERE table_1.data_1 IN
(SELECT table_2.data_1 FROM table_2 WHERE table_1.data_1 = table_2.data_1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:57:47.717

我没有对此进行测试，但认为这样的事情会起作用：

```
UPDATE table_1 SET data_2 = NULL 
  WHERE data_1 IN(SELECT table_1.data_1 
  FROM table_1, table_2 
  WHERE table_1.data_1 = table_2.data_1) 
```

当我需要关于如何处理某事的不同想法时， 我**喜欢这个资源：** [http ://www.artfulsoftware.com/infotree/queries.php](http://www.artfulsoftware.com/infotree/queries.php)

**更新：**

```
UPDATE table_1
LEFT JOIN table_2 
ON table_1.data_1 = table_2.data_1 AND table_1.data_1 IS NOT NULL
SET table_1.data_2 = NULL; 
```

# javascript - D3.JS 获取对被点击对象的绑定数据的引用

> ID：14786373
> 
> 赞同：17
> 
> 时间：2013-02-09T08:43:13.067
> 
> 标签：javascript, d3.js, force-layout

我是 javascript 和 D3.js 的新手

我正在使用[https://gist.github.com/4062045上的 Force Directed Graph 示例](https://gist.github.com/4062045)

我需要获取对单击的圆形元素的绑定数据的引用，以便我可以添加一个链接。

我在圆圈的点击处理程序中有以下代码行：

```
d3.select(this).each(function(d){console.log(d)}); 
```

我可以将对象打印到控制台，但我不知道如何获取对该对象的引用，以便可以将其推送到链接对象中，例如：

```
{source: <reference to node should go here>, target: some_other_node} 
```

感谢你们的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T08:47:18.450

```
circles.on('click', datum => {
  console.log(datum); // the datum for the clicked circle
}); 
```

[#](https://github.com/d3/d3-selection/blob/master/README.md#selection_on) *选择*。**on** ( *typenames* [, *listener* [, *capture* ]])

> 当在选定节点上调度指定事件时，将为每个选定元素评估指定的侦听器，并传递当前数据 (d)、当前索引 (i) 和当前组 (节点)，并将 this 作为当前的 DOM 元素。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-09T09:06:24.143

为了其他新手的利益，这就是我解决这个问题的方法：

```
//Register the event handler with you selection
myselection.on("click", click);

//Obtain reference to data of currently clicked element by obtaining the first argument of      the event handler function

function click(element){ 
    console.log(element); 
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-12-18T15:56:22.817

这是我的解决方案：

```
/* CSS used in Javascript snippet */
.source { 
  stroke-width: 3px !important;
  stroke-opacity: 1;
  stroke: #0f0;
}

.target { 
  stroke-width: 3px !important;
  stroke-opacity: 1;
  stroke: #f00;
}

// this goes inside the d3.json call
node.on("mouseover", function() {
  idx = this.__data__.index
  for (i = 0; i < graph.links.length; i++) {
    if (graph.links[i].source.index == idx) {
      link[0][i].classList.add("source");
    }
    else if (graph.links[i].target.index == idx) {
      link[0][i].classList.add("target");
    }
    else {
      link[0][i].classList.remove("source");
      link[0][i].classList.remove("target");
    }
  }
}); 
```

这个想法是，在触发给定事件时，您将查看链接列表，并突出显示（添加一个类）到其源或目标与给定节点数据中找到的索引匹配的每个链接。它可能没有做 d3 能够做的所有事情，但它不需要额外的库，而且我正在快速突出显示我的源/目标链接。

# c# - ASP.NET MVC Ajax 中的 500 内部错误

> ID：14786377
> 
> 赞同：2
> 
> 时间：2013-02-09T08:43:35.157
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-ajax

我正在为我的 Web 应用程序使用 Visual Studio 2010 和 MVC 4。这是我的控制器代码：

> 公共 ActionResult MyController()
> 
> ```
>  {
>         if (Request.IsAjaxRequest())
>         {
>             using (MyContainer context = new MyContainer())
>             {
>                 try
>                 {
>                     var result = Some Query;
> 
>                     return PartialView("_MyView", result);
>                 }
>                 catch (Exception ex)
>                 {
>                     
>                 }
>             }
>         }
>         if (User.Identity.IsAuthenticated)
>         {
>             return RedirectToAction("Index", "Home", new { area = "User" });
>         }
>         else
>         {
>             return Redirect("/");
>         }
>     } 
> ```

此方法将成功完成，但我的 ajax 容器没有显示任何内容。在萤火虫这个错误提出：

`NetworkError: 500 Internal Server Error + http://localhost....?X-Requested-With=XMLHttpRequest`

为什么会出现这个错误？
我该怎么做才能解决这个问题？
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T23:57:34.550

500 Internal Server Error 消息可能会以多种方式出现，因为服务器上的某些内容未正确处理。在您的情况下，作为推荐，您的`MyContainer`类型没有实现`IDisposable`接口，因此，您不能在`using(){ }`块上使用此类型。当您在**using**块上使用类型时，此类型必须实现 IDIsposable 因为当它结束时，.Net Framework 将从堆和引用中删除实例。我在不使用块的情况下对您的代码进行了一些更改。看一看：

```
public ActionResult ActionName()
{
    if (Request.IsAjaxRequest())
    {
        try
        {
            MyContainer context = new MyContainer();

            var result = Some Query;
            return PartialView("_MyView", result);      
        }
        catch (Exception ex)
        {
            // return some partial error that shows some message error
            return PartialView("_Error");
        }
    }

    if (User.Identity.IsAuthenticated)
    {
        return RedirectToAction("Index", "Home", new { area = "User" });
    }

    return Redirect("/");
} 
```

# c++ - 在数组中查找数字

> ID：14786385
> 
> 赞同：2
> 
> 时间：2013-02-09T08:44:38.040
> 
> 标签：c++, algorithm, search

我有一个包含 20 个数字（64 位整数）的数组，例如 10、25、36,43....、118、121（排序后的数字）。

现在，我必须输入数百万个数字（比如 17、30）。

我必须作为输出给出的是：

```
for Input 17:

17 is < 25 and > 10\. So, output will be index 0.

for Input 30:

30 is < 36 and > 25\. So, output will be index 1. 
```

现在，我可以使用线性搜索、二元搜索来做到这一点。有什么方法可以更快地做到这一点吗？输入数字是随机的（高斯）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T08:48:48.480

如果您知道分布，您可以**以更智能的方式指导您的搜索**。

这是这种二分搜索变体的粗略想法：

假设您的数据预计将均匀分布在 0 到 100 上。

如果观察到值 0，则从头开始。如果你的值是 37，你从你拥有的数组的 37% 开始。**这是二分搜索的关键区别：您并不总是从 50% 开始，而是尝试从预期的“最佳”位置开始。**

如果您知道参数，这也适用于高斯分布数据（如果您不知道它们，您仍然可以从观察到的数据中轻松估计它们）。您将计算高斯 CDF，这会产生开始搜索的位置。

现在，对于下一步，您需要优化您的搜索。在你看到的位置，有一个不同的值。您可以使用它来重新估计位置以继续搜索。

现在**，即使您不知道分布，**这也可以很好地工作。因此，您从二分搜索开始，已经查看了 50% 和 25% 的对象。如果您的查询值非常接近 50% 条目，那么您*可以*做一个更好的猜测，而不是下一步去 37.5% 。除非您的数据集非常“笨拙”（并且您的查询与数据不相关），否则这仍然应该优于始终在中间分裂的“幼稚”二进制搜索。

[http://en.wikipedia.org/wiki/Interpolation_search](http://en.wikipedia.org/wiki/Interpolation_search)

来自维基百科的预期平均运行时间显然是`O(log(log(n))`。

**更新**：因为有人抱怨只有 20 个数字，情况就不一样了。是的，他们是。**使用 20 个数字进行*线性*搜索可能是最好**的。因为 CPU 缓存。通过少量内存（适合 CPU 缓存）进行线性扫描可以非常快。特别是*展开循环*。但是，恕我直言，这种情况非常可悲且无趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T08:47:32.720

没有什么比`binary search`您的数组已排序更好的了。

线性搜索是`O(n)`，而二分搜索是`O(log n)`

**编辑：**

插值搜索做了一个额外的假设（元素必须是均匀分布的）并且每次迭代进行更多的比较。

您可以同时尝试并根据经验衡量哪个更适合您的情况

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T08:54:06.977

我相信对您来说最好的选择是使用[upper_bound](http://en.cppreference.com/w/cpp/algorithm/upper_bound) - 它会发现数组中的第一个值大于您正在搜索的值。

仍然取决于您尝试解决的问题，也许[lower_bound](http://en.cppreference.com/w/cpp/algorithm/lower_bound)或[binary_search](http://en.cppreference.com/w/cpp/algorithm/binary_search)可能是您需要的。

所有这些算法都具有对数复杂度。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-09T12:00:05.523

事实上，这个问题很有趣，因为它是一个信息论框架的重铸。

给定 20 个数字，您最终将得到 21 个 bin（包括 < 第一个和 > 最后一个）。

对于每个传入号码，您将映射到这 21 个垃圾箱之一。这种映射是通过比较完成的。每次比较都会为您提供 1 位信息（< 或 >= -- 两种状态）。

所以假设传入的数字需要5次比较才能确定它属于哪个bin，那么就相当于用5位来表示那个数字。

我们的目标是尽量减少比较次数！我们有 100 万个数字，每个数字属于 21 个有序的代码字。我们如何做到这一点？

这正是熵压缩问题。

让 a[1],.. a[20] 成为你的 20 个数字。

设 p(n) = pr { 传入号码 < n }。

构建决策树如下。

```
Step 1.

   let i = argmin |p(a[i]) - 0.5|

   define p0(n) = p(n) / (sum(p(j), j=0...a[i-1])), and p0(n)=0 for n >= a[i].
   define p1(n) = p(n) / (sum(p(j), j=a[i]...a[20])), and p1(n)=0 for n < a[i].

Step 2.

   let i0 = argmin |p0(a[i0]) - 0.5|
   let i1 = argmin |p1(a[i1]) - 0.5| 
```

等等...

当我们完成时，我们最终得到：

```
i, i0, i1, i00, i01, i10, i11, etc. 
```

这些 i 中的每一个都为我们提供了比较位置。

所以现在我们的算法如下：

让 u = 输入数字。

```
if (u < a[i]) {
   if (u < a[i0]) {
      if (u < a[i00]) {
      } else {
      }
   } else {
      if (u < a[i01]) {
      } else {
      }
   }
} else {
   similarly...
} 
```

所以我定义了一棵树，而 if 语句正在遍历树。我们也可以把它放到一个循环中，但是用一堆 if 来说明会更容易。

例如，如果您知道您的数据均匀分布在 0 到 2^63 之间，并且您的 20 数字是

```
0,1,2,3,...19 
```

然后

```
i      = 20  (notice that there is no i1)
i0     = 10
i00    = 5
i01    = 15
i000   = 3
i001   = 7
i010   = 13
i011   = 17
i0000  = 2     
i0001  = 4     
i0010  = 6     
i0011  = 9
i00110 = 8
i0100  = 12
i01000 = 11
i0110  = 16
i0111  = 19
i01110 = 18 
```

好的，基本上，比较如下：

```
if (u < a[20]) {
  if (u < a[10]) {
     if (u < a[5]) {
     } else {
         ...
     }
  } else {
     ...
  }
} else {
  return 21
} 
```

所以请注意，我不是在做二进制搜索！我首先检查终点。为什么？

它有 100*((2^63)-20)/(2^63)% 的机会大于 a[20]。这基本上是 99.999999999999999783159565502899% 的机会！

因此，对于具有上述属性的数据集，该算法的预期比较次数为 1！（这比日志日志更好：p）

请注意我在这里所做的是，我基本上使用较少的比较来查找更可能的数字，并使用更多的比较来查找不太可能的数字。例如，数字 18 需要 6 次比较（比二分查找多 1 次）；但是，数字 20 到 2^63 只需要 1 次比较。同样的原理也用于无损（熵）数据压缩——使用更少的比特来编码经常出现的代码字。

构建树是一个一次性的过程，您可以在 100 万次之后使用该树。

问题是......这个决策树什么时候变成二分搜索？作业练习！:p 答案很简单。这类似于您无法再压缩文件时。

好的，所以我没有把这个从我的背后拉出来......基础在这里：

[http://en.wikipedia.org/wiki/Arithmetic_coding](http://en.wikipedia.org/wiki/Arithmetic_coding)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T08:49:39.317

[您可以使用std::lower_bound](http://en.cppreference.com/w/cpp/algorithm/lower_bound)和[std::upper_bound](http://en.cppreference.com/w/cpp/algorithm/upper_bound)执行二进制搜索。这些为您提供了迭代器，因此您可以使用它`std::distance`来获取索引。

# c - 如何在C中为char**动态分配内存

> ID：14786387
> 
> 赞同：2
> 
> 时间：2013-02-09T08:45:00.473
> 
> 标签：c, arrays, c-strings, dynamic-allocation

我将如何在此函数中为 char** 列表动态分配内存？

基本上这个程序的想法是我必须从文件中读取单词列表。我不能假设最大字符串或最大字符串长度。

我必须用 C-strings 做其他事情，但我应该没问题。

谢谢！

```
void readFileAndReplace(int argc, char** argv)
{
    FILE *myFile;
    char** list;
    char c;
    int wordLine = 0, counter = 0, i;
    int maxNumberOfChars = 0, numberOfLines = 0, numberOfChars = 0;

    myFile = fopen(argv[1], "r");

    if(!myFile)
    {
        printf("No such file or directory\n");
        exit(EXIT_FAILURE);
    }

    while((c = fgetc(myFile)) !=EOF)
    {
        numberOfChars++;
        if(c == '\n')
        {
            if(maxNumberOfChars < numberOfChars)
                maxNumberOfChars += numberOfChars + 1;

            numberOfLines++;
        }
    }

    list = malloc(sizeof(char*)*numberOfLines);

    for(i = 0; i < wordLine ; i++)
        list[i] = malloc(sizeof(char)*maxNumberOfChars);

    while((c = fgetc(myFile)) != EOF)
    {
        if(c == '\n' && counter > 0)
        {
            list[wordLine][counter] = '\0';
            wordLine++;
            counter = 0;
        }
        else if(c != '\n')
        {
            list[wordLine][counter] = c;
            counter++;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T08:48:18.217

这样做：

```
char** list; 

list = malloc(sizeof(char*)*number_of_row);
for(i=0;i<number_of_row; i++) 
  list[i] = malloc(sizeof(char)*number_of_col); 
```

此外，如果您正在动态分配内存。您将在完成工作后释放它：

```
for(i=0;i<number_of_row; i++) 
  free(list[i] );
free(list); 
```

**编辑**

在您修改后的问题中：

```
 int wordLine = 0, counter = 0, i; 
```

`wordLine`并且`counter`是`0`

在这段代码之前：

```
list = malloc(sizeof(char*)*wordLine+1);
for(i = 0;i < wordLine ; i++)
   list[i] = malloc(sizeof(char)*counter); 
```

你必须给`wordLine`和`counter`变量赋值

内存分配也应该在以下循环之前（外部）：

```
 while((c = fgetc(myFile)) != EOF){
  :
  :
 } 
```

**编辑**：

新的问题的第三个版本。您正在读取文件两次。所以你需要在第二个循环开始之前 [**fseek(), rewind()到第一个字符。**](http://beej.us/guide/bgc/output/html/multipage/fseek.html)

尝试：

```
fseek(fp, 0, SEEK_SET); // same as rewind()
rewind(fp);             // same as fseek(fp, 0, SEEK_SET) 
```

[我也怀疑你计算`numberOfLines`和的逻辑`maxNumberOfChars`。请检查一下]

**编辑**

我认为你的计算`maxNumberOfChars = 0, numberOfLines = 0`是错误的，试试这样：

```
maxNumberOfChars = 0, numberOfLines = 0, numberOfChars = 0;
while((c = fgetc(myFile)) !=EOF){
     if(c == '\n'){
         numberOfLines++; 
         if(maxNumberOfChars < numberOfChars)
             maxNumberOfChars = numberOfChars;
         numberOfChars=0
     }
     numberOfChars++;
} 
```

`maxNumberOfChars`是一行中的最大字符数。

还要更改代码：

```
malloc(sizeof(char)*(maxNumberOfChars + 1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:16:30.510

如果我是你，我会使用 将文件映射到私有内存，`mmap`然后迭代文件，将单词的开头存储在一个数组中`char**`，你可以使用 来增加`realloc`，并用 0 替换换行符。

这样，您将单词作为连续块保存在内存中，您不必关心文件 I/O，因为您将整个文本文件保存在内存中`char*`，并且您不必 malloc 数组数组.

有关这些功能的信息，请参阅相应的手册页，或给我留言 :)

编辑：如果你还不知道 mmap，看看这个：[http ://www.jimscode.ca/index.php/component/content/article/13-c/45-c-simple-mmap-example](http://www.jimscode.ca/index.php/component/content/article/13-c/45-c-simple-mmap-example)

今天大多数 C 程序员仍然尝试使用`fopen`和朋友将文件读入内存，但这是完全没有必要的，并且引入了额外的复杂性级别。（缓冲，不断增长的数组，...）并且`mmap`是一个很好的选择，可以将所有讨厌的工作转移到操作系统

# sencha-touch - sencha touch 2 dataview 位于顶部的复选框字段和底部的按钮之间

> ID：14786388
> 
> 赞同：0
> 
> 时间：2013-02-09T08:45:05.967
> 
> 标签：sencha-touch, sencha-touch-2, dataview

我有这样的要求，即为用户提供订阅某些类别的服务。要设计的布局具有 -

1.  复选框 => 在顶部切换自动订阅设置。
2.  dataview => 在中间，有订阅列表和复选框字段。
3.  按钮 => 允许用户更新订阅列表。

我已经正确设置了数据视图。数据视图被添加为休闲 -

```
 xtype: 'dataview',
 itemTpl:'<div style="color:#fff;margin-left: 20px;background: transparent;" class="x-field-checkbox x-field">' +
           '<span style="float:left">{name}</span>' +
           '<span style="float:right">' +
               '<input type="checkbox" class="x-input-el x-input-checkbox" style="display: inline;top:10px">'+
           '</span>'+
         '</div>',
 fields:['name'],
 data:[
    {
      name :'A'
    },
    {
      name :'B'
    },
    {
      name :'C'
    } 
```

当我尝试添加 1 号和 3 号组件（上面指定的问题）时，没有显示数据视图。我只得到复选框和按钮。当我检查呈现的 html 时，我意识到 dataview 甚至没有填充`data`配置。我用来添加这三个组件的代码是休闲 -

```
Ext.define("PApp.view.home.Subscription", {
    extend:'Ext.Container',
    xtype:'subscription',
    config: {
        layout:'fit',
        fullscreen:true,
        scrollable:false,
        items: [
            {
                xtype:'container',
                fullscreen:true,
                items:[
                    {
                        xtype:'checkboxfield',
                        name : 'subscriber-setting',
                        label: 'Subscriber',
                        value: 'yes',
                        checked: true
                    },
                   {
                        xtype: 'dataview',
                        itemTpl:'<div style="color:#fff;margin-left: 20px;background: transparent;" class="x-field-checkbox x-field">' +
                                    '<span style="float:left">{name}</span>' +
                                    '<span style="float:right">' +
                                          '<input type="checkbox" class="x-input-el x-input-checkbox"         style="display: inline;top:10px">'+
                                   '</span>'+
                               '</div>',
                        fields:['name'],
                        data:[
                           {
                              name :'A'
                           },
                           {
                              name :'B'
                           },
                           {
                              name :'C'
                           }
                   },
                   {
                              xtype:'button',
                              text:'Update',
                              ui:'action'
                   }
       }
   ]    
   }
}); 
```

我无法弄清楚为什么没有显示数据视图（甚至没有填充数据）。当复选框和按钮之间没有添加数据视图时，它会按预期呈现。 ![数据视图预览](../Images/91c2fdb0e675b9e812a91851b0078603.png) 当数据视图被面包屑时，它看起来像这样 -![复选框字段和按钮之间的数据视图](../Images/552149090aad6ab9b50b47e68f992765.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:31:06.167

`hbox`请尝试在模板或数据视图配置的 css 中使用容器布局给出一些高度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:42:30.300

尝试了几件事并设法解决了这个问题。大多数情况下，列表或数据视图用于显示全屏内容。但就我而言，我需要在其他两个组件之间使用它。

为了使这项工作，我将以下配置添加到父容器 -

```
 layout: {
                type: 'vbox',
                align : 'stretch'
            }, 
```

但这还不够。需要`flex`在每个组件中添加配置。如果没有此配置，则看不到 dataview。我错了数据确实没有填充（因为 html 嵌套很深，第一次错过了它）。这是它的外观预览。

![在此处输入图像描述](../Images/cec1a0d30e68190be45a4ba99f044f1f.png)

# java - 如何从 Java 中的列表/菜单将值插入 MySQL 表？

> ID：14786392
> 
> 赞同：0
> 
> 时间：2013-02-09T08:45:24.207
> 
> 标签：java

如何从 Java 中的列表/菜单将值插入 MySQL 表？我收到一个错误...

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''',,'','o1','','a1','','q1','')' 附近使用正确的语法

我的查询是

```
s="insert into customer values('"+s1+"','"+s2+"','"+s3+"','"+s4+"',"+s5+",'"+s6+
  "','"+s7+"','"+s8+"',"+s9+",'"+s10+"',"+s11+",'"+s12+"','"+s13+"','"+s14+
  "','"+s15+"','"+s16+"','"+s18+"','"+s19+"')"; 
```

我的列表是 s13、s15 和 s18。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:47:52.503

你忘了一个`'`at `s5`, `s9`, s`s11`

将查询更改为：

```
s="insert into customer values('"+s1+"','"+s2+"','"+s3+"','"+s4+"','"+s5+"','"+s6+"','"+s7+"','"+s8+"','"+s9+"','"+s10+"','"+s11+"','"+s12+"','"+s13+"','"+s14+"','"+s15+"','"+s16+"','"+s18+"','"+s19+"')"; 
```

编辑：

由于您的 SQL 列是 VARCHAR，因此您必须将值转换为字符串。

不能确定到底该怎么做，因为我不知道你的对象的类别，但假设你的列表是`java.util.List`你做这样的事情：

```
s13 = Arrays.toString(o1.toArray())
s15 = Arrays.toString(a1.toArray())
s18 = Arrays.toString(q1.toArray()) 
```

# html - 如何阻止水平滚动条出现在 IE9 文本区域中？

> ID：14786399
> 
> 赞同：0
> 
> 时间：2013-02-09T08:46:50.963
> 
> 标签：html, internet-explorer

在 IE 9 中，在 textarea 框中，当我输入到行尾时（就在激活水平滚动条之前），我按 Enter 插入新行以避免滚动条，但它仍然出现在光标之后移动到新行。如何防止这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T08:54:18.940

设置 wrap virtual like

```
<textarea cols=80 rows=12 wrap="virtual"> 
```

或使用 CSS 之类的

```
overflow-y: scroll;
overflow-x: hidden; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:35:44.603

默认情况下，IE 9`textarea`会在需要使文本水平适应时将文本换行，甚至打破内部单词，并且不会出现水平滚动条。所以你的代码中必须有一些东西来防止这种情况，可能是属性`wrap=off`。在这种情况下，水平滚动条确实出现在所描述的情况中。为了防止这种情况，添加

```
textarea { overflow-x: hidden } 
```

但请注意，这意味着当输入的文本超过该区域的大小时，它会静默滚动，从而隐藏行首。从可用性的角度来看，这似乎比修复的问题更严重。

# android - 在 64 位 Linux 机器上编译 Firefox for Android 时出错

> ID：14786400
> 
> 赞同：1
> 
> 时间：2013-02-09T08:46:51.583
> 
> 标签：android, linux, firefox, x86

当我最终得到这个时，我试图编译 Fennec (Firefox for Android)：http: [//pastebin.mozilla.org/2126890](http://pastebin.mozilla.org/2126890)

几乎在我开始的时候。

然后，我知道这是 Linux 上 ia32-libs 多架构的问题。由于构建工具使用 32 位 Android NDK 通过 64 位机器（我正在运行的机器）编译代码，因此它依赖于 ia32-libs。很快，我就别无选择继续构建，因为 Ubuntu/Debian 下的 ia32-libs 最近经历了很多变化，并且支持中断（这就是我所知道的）。

谁能告诉我我是否仍然可以进行构建，因为许多其他具有类似规格的机器（如下所述）都能够做到。

32 位 NDK 的任何替代方案（如 64 位）..？

我正在运行 Ubuntu 12.10 64 位，全部更新为 3GB RAM。

# python - (Python) Pygame：使用特殊字符渲染文本（× ÷ π 等）

> ID：14786403
> 
> 赞同：1
> 
> 时间：2013-02-09T08:47:05.867
> 
> 标签：python, special-characters, pygame

这可能是一个非常无聊的问题（或者可能不是），但就是这样。我想使用pygame在屏幕上显示特殊字符（特别是乘法符号'×'）。

代码是这样工作的：

```
label = helvetica.render("text here", 1, (r, g, b))
window.blit(label, (x, y)) 
```

为了使它起作用，我必须在“文本此处”输入什么？或者还有其他方法可以解决这个问题吗？

我曾尝试使用 UTF-8 等来处理文本编码……但我对此几乎一无所知，也没有取得任何成功。

首先十分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:41:47.550

`u'×'`应该足够了。如果不是，请为 UTF-8 添加[编码定义](http://www.python.org/dev/peps/pep-0263/)并将文件按原样保存（没有 BOM！）如果仍然不是，这可能是 PyGame 问题。

# nullpointerexception - spring batch null job runner 空指针异常

> ID：14786406
> 
> 赞同：0
> 
> 时间：2013-02-09T08:47:13.897
> 
> 标签：nullpointerexception, jobs, spring-batch, runner

嗨，我在执行示例 Spring 批处理作业时遇到空指针异常。作业启动器抛出异常。这是我的工作启动器代码。提前致谢。

```
public class NewJobRunner {
public static Job job;
public static JobLauncher jobLauncher;
public static JobRepository jobRepository;

public static void main(String args[]) {
    try {
        AbstractApplicationContext applicationContext = new ClassPathXmlApplicationContext("/resources/job-context.xml");
        jobLauncher.run(job, new JobParametersBuilder()
                    .toJobParameters()
        );
    }catch(Exception e) {
        e.printStackTrace();
    }

}

public void setJobLauncher(JobLauncher jobLauncher) {
    this.jobLauncher = jobLauncher;
}

public void setJobRepository(JobRepository jobRepository) {
    this.jobRepository = jobRepository;
}

public void setJob(Job job) {
    this.job = job;
} 
```

# c# - 在 IIS 7 中运行网站应用程序时的身份验证问题

> ID：14786407
> 
> 赞同：1
> 
> 时间：2013-02-09T08:47:14.673
> 
> 标签：c#, asp.net, wcf

我是 .Net 框架的新手。我正在使用 Visual Studio 2012 express。实际上我必须公开一个 Web 服务并托管到 IIS7 中。所以我创建了新网站并在 Visual Studio 中选择了 WCF Web 服务并编写了合同。我是使用 Rassoc.Samples.BasicAuthenticationModule 进行身份验证。在 IIS 管理器中，我禁用了匿名身份验证。现在，当我浏览该网站时，它会询问我凭据（凭据存储在 user.xml 中）。当我提供相同的信息时，它很好。但是当我单击 Service.svc 时，它给了我以下错误：-

**> [NotSupportedException：此服务的安全设置需要“匿名”身份验证，但托管此服务的 IIS 应用程序未启用。]**

当我在 IIS 管理器中启用匿名时，一切正常。单击 Service.svc 时，它会提供 WSDL。

我不知道该怎么做才能得到这个 wsdl。我无法在 IIS 管理器中启用 ananaymous。

请建议我解决方案...（如何为此服务启用身份验证。可能在 web.config 中）

提前致谢。

# maven - 带有 Java 1.7.0_11 的 Windows 7 上的 Maven 3.0.4 无法连接到存储库

> ID：14786410
> 
> 赞同：2
> 
> 时间：2013-02-09T08:47:24.040
> 
> 标签：maven, windows-7, java-7

当我这样做时，我在我的 java 开发项目中收到以下错误消息

```
mvn clean install 
```

错误是：

```
Error injecting: org.apache.maven.wagon.providers.http.LightweightHttpWagon 
```

并且 maven 停止继续构建。我已经清理了本地 maven 存储库，但没有帮助。我再次下载了 Maven，我进行了清理，并且我也重新启动了 Windows。没有任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:47:24.040

我也在这里环顾网络，发现java 7可能对此负责。我也尝试过建议的强制 IPv4 堆栈参数

```
mvn -Djava.net.preferIPv4Stack=true clean install 
```

但这对我没有帮助。

所以我改变了jdk版本，我先选择了java 1.6 update 39。我成功了。然后我下载了最新的 jdk 1.7 更新 13 并再次尝试。我之前做了完整的本地 maven 存储库清理（删除我的主目录中的 .m2 文件夹）。

使用最新的 java 7 update 13，maven 构建也再次成功。所以我又回到了java7。

# ajax - 在自动完成jsf中没有调用函数

> ID：14786411
> 
> 赞同：0
> 
> 时间：2013-02-09T08:47:24.987
> 
> 标签：ajax, jsf, jsf-2, autocomplete, richfaces

我是 jsf 的新手，正在尝试实现自动完成框。

所以这就是我所做的。

主页.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:a4j="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich">
     <h:form>
        <rich:autocomplete mode="ajax"  layout="table" autocompleteMethod="#{searchCity.searchCityByMatchChar}" autocompleteList="#{searchCity.listOfCity}" 
            var="city" fetchValue="#{city.cityName}">
            <rich:column>
                #{city.cityName} 
            </rich:column>
        </rich:autocomplete>
    </h:form>
</ui:composition> 
```

SearchCity.java

```
package com.cheapesto.cheapbilly.model;

import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;

import com.cheapesto.cheapbilly.dto.City;

@ManagedBean(name = "searchCity")
@SessionScoped
public class SearchCity {
    private List<City> listOfCity;
    public List<City> getListOfCity() {
        return listOfCity;
    }

    public void setListOfCity(List<City> listOfCity) {
        this.listOfCity = listOfCity;
    }

    public List<City> searchCityByMatchCharforauto() {
        City city1 = new City();
        city1.setCityId(1l);
        city1.setCityName("New York");

        City city2 = new City();
        city2.setCityId(1l);
        city2.setCityName("New Jesrsey");

        City city3 = new City();
        city3.setCityId(1l);
        city3.setCityName("Seattle");

        List<City> listOfCity = new ArrayList<City>();
        listOfCity.add(city1);
        listOfCity.add(city2);
        listOfCity.add(city3);

        return listOfCity;
     }
} 
```

面孔-config.xml

```
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

</faces-config> 
```

我收到错误消息：

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/MyFirstFaces] threw exception [/faces/home.xhtml: Property 'searchCityByMatchChar' not found on type com.cheapesto.cheapbilly.model.SearchCity] with root cause
javax.el.ELException: /faces/home.xhtml: Property 'searchCityByMatchChar' not found on type com.cheapesto.cheapbilly.model.SearchCity
    at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:91)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:78)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:179)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:164) 
```

我不明白为什么它将方法视为一种属性。有人可以帮助我进行正确的更改和解释。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:03:22.890

RichFaces 未正确安装。您的 RichFaces 标记基本上被解释为纯文本，可以`UIInstructions`在堆栈跟踪中识别：

```
at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:78) 
```

这基本上与你会做的问题相同

```
<p>#{searchCity.searchCityByMatchChar}</p> 
```

模板文本中的 EL 默认被解析为属性值表达式，需要一个 getter 方法。

验证您是否正确安装了 RichFaces。它是 7 个 JAR 文件`/WEB-INF/lib`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:26:04.677

您的 bean 上没有方法`searchCityByMatchChar`。它被称为`searchCityByMatchCharforauto`。这可能是您的错误的根本原因。

# django - 添加索引 (db_index=True)

> ID：14786413
> 
> 赞同：83
> 
> 时间：2013-02-09T08:47:29.350
> 
> 标签：django, django-models, django-database

我正在阅读一本关于 Django 编码风格的书，他们讨论的一件事是`db_index=True`. 自从我开始使用 Django 以来，我从未使用过此功能，因为我不确定它的作用。

所以我的问题是，何时考虑添加索引？

* * *

## 回答 #1

> 赞同：164
> 
> 时间：2013-02-09T08:52:03.090

这不是真正的 django 特定的；更多地与数据库有关。当您想加快对该列的搜索时，您可以在该列上添加索引。

通常，只有主键被数据库索引。这意味着使用主键的查找得到了优化。

如果您对辅助列进行大量查找，请考虑向该列添加索引以加快速度。

请记住，与大多数规模问题一样，这些问题仅适用于统计上大量的行（10,000 不算大）。

此外，每次插入时，都需要更新索引。所以要小心添加索引的列。

与往常一样，您只能优化您可以测量的内容 - 因此使用`EXPLAIN`语句和数据库日志（尤其是任何慢查询日志）来找出索引在哪里有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-01T09:48:37.660

上面的答案是正确的，但在某些情况下，搜索是在只有 varchar 数据类型（如`email`. 在那里你需要添加一个索引。

以下是这样做的方法：

```
Index(name='covering_index', fields=['headline'], include=['pub_date']) 
```

来自[https://docs.djangoproject.com/en/3.2/ref/models/indexes/的参考](https://docs.djangoproject.com/en/3.2/ref/models/indexes/)

# sql-server - 如何检索多个详细记录和主记录作为单行？

> ID：14786414
> 
> 赞同：2
> 
> 时间：2013-02-09T08:47:30.103
> 
> 标签：sql-server, pivot, crosstab

我有两个结构类似于此的表：

人：

```
ID   Name   Age
 1   Jack    25
 2   Jill    23 
```

测试：

```
ID  PersonID  TestID  Result
 1         1       1     125
 2         1       2     120
 3         1       3      75
 4         2       1      90
 5         2       2      95
 6         2       3     7.2 
```

有没有办法用一条语句检索该数据，使主表中的每条记录都显示在一行中？像这样的东西：

```
PersonID  Name  Age  Test1  Test2  Test3
       1  Jack   25    125    120     75
       2  Jill   23     90     95    7.2 
```

到目前为止，我想出的唯一方法是创建一个迭代详细记录并填充临时表的函数。不是很优雅。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:21:37.330

为了得到这个结果，你需要使用这个[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数。这会将数据从多行转换为列。

如果您提前知道这些值，或者您的`TestId`值数量有限，那么您可以对查询进行硬编码，使查询成为静态的。

```
SELECT Name,
  Age,
  [1] AS Test1,
  [2] AS Test2,
  [3] AS Test3 
FROM
( 
  SELECT P.Name, P.Age, t.TestID, t.Result 
  FROM tests t
  INNER JOIN person P 
  ON p.ID = t.PersonID
) T 
PIVOT
(
  sum(Result) 
  FOR TestID IN ([1], [2], [3])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/bf74c/7)。

但是，如果您有未知数量的`TestId`值，那么您将需要使用动态 SQL 在运行时生成列列表。您的代码将是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colNames AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(testId) 
                    from tests
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colNames = STUFF((SELECT distinct ',' + QUOTENAME(testId) +' as Test'+cast(testId as varchar(10))
                    from tests
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Name, age, ' + @colnames + ' from 
             (
                select P.Name, P.Age, t.TestID, t.Result 
                from tests t
                inner join person P 
                  on p.ID = t.PersonID
            ) x
            pivot 
            (
                sum(Result)
                for TestID in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/bf74c/6)。

它们都将产生相同的结果，不同之处在于如果测试 id 的数量发生变化，动态的将增加/减少列：

```
| NAME | AGE | TEST1 | TEST2 | TEST3 |
--------------------------------------
| Jack |  25 |   125 |   120 |    75 |
| Jill |  23 |    90 |    95 |   7.2 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:02:24.220

您可以在 TestID 上进行数据透视

给你......它有点乱，但你可以改进它:)

```
SELECT Name,Age,SUM([1]) AS Test1,SUM([2]) AS Test2,SUM([3]) AS Test3
FROM(
SELECT P.Name,P.Age,Te.ID, TestID,Result
FROM Test Te
INNER JOIN dbo.Person P ON P.ID=Te.PersonID) T
PIVOT(MAX(T.Result) FOR TestID IN([1],[2],[3])) AS pvt
GROUP BY Name,Age 
```

这是一些链接

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx) [http://www.codeproject.com/Questions/393632/How-to-use-Pivot-in- SQL](http://www.codeproject.com/Questions/393632/How-to-use-Pivot-in-SQL) [http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/](http://blog.sqlauthority.com/2008/06/07/sql-server-pivot-and-unpivot-table-examples/)

# java - NetBeans 中的命令行参数

> ID：14786419
> 
> 赞同：0
> 
> 时间：2013-02-09T08:48:00.927
> 
> 标签：java, netbeans

我在`NetBeans`使用命令行参数时遇到问题，运行此代码时显示

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0 
```

注意我在命令行中为 NetBeans 放置了一个参数

```
public class NewEmpty1
{
  public static void main(String arg[]){
   System.out.println(arg[0]);
  }
} 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T15:23:22.840

转到 Project-Property-Run 在这里你会看到选项主类参数

现在确保您访问的是正确的主类....在此选项之后，您有浏览类路径的按钮。选择它然后选择参数最后你应该能够运行程序......干杯！

阿什什

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T11:45:09.773

```
public class NewMain {
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        int argslen=args.length;
        int argsValue[] = new int[argslen];
        for (String i:args) {
           int d = 0;
           argsValue[d]=Integer.parseInt(i);
           System.out.print(argsValue[d]+"\t"+"\n");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T08:58:03.170

```
subscript the string beyond its index is undefined. 
```

这是你的情况。`args[]`是空的。

检查这个[如何传递命令行参数](http://netbeanside61.blogspot.in/2009/02/using-command-line-arguments-in.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T08:50:15.733

你还没有通过任何参数..

如果您传递了参数，那么可能是因为您正在调用同一个包中的另一个类**主方法**

* * *

最好的方法是迭代..

```
for(string s:arg)
     System.out.println(s); 
```

**或者**

```
for(int i=0;i<arg.length();i++)
    System.out.println(arg[i]); 
```

# android - 为 iphone 和 android 创建本地 Web 应用程序

> ID：14786424
> 
> 赞同：0
> 
> 时间：2013-02-09T08:48:39.493
> 
> 标签：android, iphone, mobile

我想使用移动 jquery 开发一个本地 Web 应用程序。在 iphone 和 android 中使用图标打开应用程序的方法是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:00:15.390

它实际上取决于您的项目深度。在复杂性方面的深度。它总是建议为每个平台单独开发。仔细评估您的需求。

如果应用程序足够简单，那么您可以选择第三方 API ， [PhoneGap](http://phonegap.com/)和[Sencha Touch](http://www.sencha.com/apps)是不错的选择。但是，如果您将来需要添加新功能，您仍然可能会发现自己受到第三方 API 的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:25:14.363

What i understand from your question is you want to create a iOS and Android app using html, jQuery etc. There are tools such as `PhoneGap`, `Titanium` and Sencha touch. Using this tools you can create a mobile applications with help you HTML, jQuery. However, this apps won't have same user experience as it'll have with the native apps. Also, just think about future releases of your application. If Apple or Android adds new features to there OS it'll be definitely take sometime for above third party API to implement them

Also, apple clearly rejects app which acts like a website. So, you'll have to be careful with this. I'd suggest you to go for native app development. It'll provide you flexibility.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T09:00:44.333

据我所知，如果没有 Apple Developer 帐户，您将无法在 iOS 上获得任何东西。至于 Android，您可以查看[PhoneGap](http://phonegap.com/)。它也有 iOS，但如果没有有效的苹果开发帐户，它就无法构建。这似乎是你要找的东西吗？

# ios - 如何在uibutton中发送字符串值

> ID：14786428
> 
> 赞同：0
> 
> 时间：2013-02-09T08:49:10.980
> 
> 标签：ios, objective-c

我在谷歌地图中有一些注释，我必须将按钮选择器上的纬度和经度值发送到另一个方法，我试图在“标签”中设置，但它返回空值，知道为什么

```
NSString *str = [NSString stringWithFormat:@"%f, %f", annotation.coordinate.latitude, annotation.coordinate.longitude];

       // NSLog(@"%@",str);

        UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeCustom];
        rightButton.frame = CGRectMake(30, 0, 32, 32);
        [rightButton setImage:[UIImage imageNamed:@"getdirections.png"] forState:UIControlStateNormal];
        [rightButton setTitle:annotation.title forState:UIControlStateNormal];

        [rightButton addTarget:self action:@selector(showDetails:) forControlEvents:UIControlEventTouchUpInside];
        annotationView.rightCalloutAccessoryView = rightButton;
        return annotationView; 
```

提前致谢

# php - CakePHP：在外部 php 文件中调用控制器函数

> ID：14786430
> 
> 赞同：0
> 
> 时间：2013-02-09T08:49:25.853
> 
> 标签：php, cakephp, redirect, header, cakephp-1.2

这是我的情况：

```
1) a simple_php.php file in webroot folder
2) the users_controller.php in the app/controllers
3) the follow function in the users_controller.php : 
```

```
function login_flat($user_id){

    $user_data = $this->User->find('first', array(
                                   'conditions' => array('User.id'=>$user_id)));

    if($this->Auth->login($user_data)){

      $this->Cookie->write('User.id', $this->Auth->user('id'), true, '+2 hour');

      $this->Session->setFlash(__('Welcome back !', true));

      $this->redirect(array('controller'=>'posts', 'action'=>'index'));   
      exit();
    }
    else{
      echo 'ERROR!!';
      exit();
    }
} 
```

（登录用户的简单功能。注意：我知道它不安全，但仅用于测试）

现在，如果我通过浏览器调用该功能（例如`www.mysite.com/users/login_flat/13`）它可以工作！但是......我需要通过另一个文件调用它，simple_php.php 位于我的域的 webroot 中。

我尝试使用 php“标题”功能。它“调用”（重定向）到 login_flat 函数，但登录不起作用！！！:(

有什么建议吗？提前谢谢。

PS我正在使用cakephp 1.2.6

- - - - - - - 编辑 - - - - - - - - -

我解决了阅读这个问题：-->[解决方案](https://stackoverflow.com/questions/3762714/not-logged-in-after-manual-login-in-cakephp-if-redirected-logged-in-if-no-redir)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:48:20.977

来自 OP：
这是我在 simple_php 文件中用于重定向的代码：

```
header("Location:http://".$subdomain_locale.".".$site_subdomain.".com/users/login_via_app/".$user‌​_id.""); 
```

哪个将重定向到

```
/users/login_via_app/13 
```

哪个是错误的网址，因为它*应该*重定向到

```
/users/login_flat/13 
```

还要确保输入'exit();' 在发送标头并检查在此之前没有输出任何其他内容之后，否则您的重定向将不起作用

并且，请检查 $sudomain_locale 和 $site_subdomain 变量是否包含正确的值，或者使用它来调试整个 URL，而不是执行重定向；

```
echo "this is the URL that will be redirected to:<br>";
print_r("Location:http://".$subdomain_locale.".".$site_subdomain.".com/users/login_via_app/".$user‌​_id."");
exit(); 
```

# java - 如何通过 CommPortIdentifier 查找 COM 端口

> ID：14786432
> 
> 赞同：1
> 
> 时间：2013-02-09T08:49:39.370
> 
> 标签：java, serial-port, modbus

我是整个 modbus 和串行通信概念的新手，所以即使这是一个真正的菜鸟问题，请多多包涵！

好的，所以我正在尝试使用 modbus 协议和 RS 232 端口读取存储在寄存器上的值。我已经写了这段代码，但它没有找到串口`"COM 4"`。我究竟做错了什么？

```
String wantedPortName = "COM 4" ;

Enumeration portIdentifiers = CommPortIdentifier.getPortIdentifiers();

CommPortIdentifier portId = null;  
while (portIdentifiers.hasMoreElements()) {
    CommPortIdentifier pid = (CommPortIdentifier) portIdentifiers.nextElement();
    if (pid.getPortType() == CommPortIdentifier.PORT_SERIAL
            && pid.getName().equals(wantedPortName)) {
        portId = pid;
        break;
    }
}
if (portId == null) {
    System.err.println("Could not find serial port " + wantedPortName);
    System.exit(1);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:10:40.923

看起来不错，尝试在 WantedPortName 中不留空白：

```
String wantedPortName = "COM4" ; 
```

[编辑]

你可以试试这个：

```
final CommPortIdentifier portId = CommPortIdentifier.getPortIdentifier("COM1");
System.err.println(portId.getName()); 
```

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T20:25:25.380

在这种情况下，“equals()”只会在引用相同的情况下返回 true。由于您正在测试两个不同的字符串对象，它总是会失败。您必须改用“compareTo()”：

```
if (pid.getPortType() == CommPortIdentifier.PORT_SERIAL
        && (pid.getName().compareTO(wantedPortName)==0) ) {
    portId = pid;
    break;
} 
```

# database - 数据库第三范式

> ID：14786434
> 
> 赞同：0
> 
> 时间：2013-02-09T08:49:44.793
> 
> 标签：database, forms, normalization, third-normal-form

有人可以确保我的数据库处于第三范式，如果不是，请解释为什么不？我需要数据库只有 3 个表。所以这里是：

```
Customer No. (PK)     Store No. (PK)     Sale No. (PK)
Name                  Location           Customer No. (FK)
Telephone             Revenue            Store No. (FK)
Address                                  Total
Purchases($)                             Paid
Store No. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:36:43.607

以下是您的三个表应该是什么： 表 1：**客户**

```
Customer No. (PK)
Name
Telephone
Address 
```

然后表 2：**存储**

```
Store no. (PK)
Location 
```

然后 表 3：**销售**

```
Sale No. (PK)
Customer No (FK)
Store No (FK)
Total
Paid_yes_no 
```

如果您试图通过该`Paid`列跟踪部分付款等，那么它将是一个单独的表（以及一个更复杂的数据库）。但是，如果您的`Paid`栏目仅表明账单是否已支付，则上述内容应该有效。

也许你也需要一个`Date`领域？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:27:56.817

有一些问题，其中一些可能是因为规范是针对家庭作业而不是现实世界的。

*   `Store No.`在客户中是一个重复的列 有多个商店的企业有使用多个商店的客户是合理的 - 除非您的规范另有说明并且在这种情况下应该扩展分类（命名），您可以考虑*First Store No.*或*Home*改为*商店编号。*如果要保留，也应将其标记为外键。
*   `Purchases($)`在客户表中依赖于其他会改变的数据。由于它来自其他信息，因此您不应存储它。
*   `Address`不是一列 - 它有多个部分，如街道、城市、州、国家和邮政编码，可能反过来需要额外的表格详细信息才能完全满足第二范式。同样`Telephone`不可能只有一个数字。

你需要知道的每一件事都应该只出现一次。如果你可以从其他东西计算它，你应该这样做而不是存储答案。在现实世界中，您有时可能会将某些信息缓存在表中或批处理以提高性能，但这些信息将在以后应用，并且仅在必要时应用。

数据库规范化的简要概述位于[http://databases.about.com/od/specificproducts/a/normalization.htm](http://databases.about.com/od/specificproducts/a/normalization.htm)，您可能应该在重新设计项目之前查看它。

# android - 找不到类“java.sql.SQLFeatureNotSupportedException”

> ID：14786435
> 
> 赞同：0
> 
> 时间：2013-02-09T08:49:48.030
> 
> 标签：android, sql-server, eclipse

**说明** 在调试模式和使用 Eclipse 时，此 Android 代码处理行： con = DriverManager.getConnection(connectionUrl); 它会在 Logcat 中产生错误，例如：

**错误**

```
Could not find class 'java.sql.SQLFeatureNotSupportedException', referenced from method com.microsoft.sqlserver.jdbc.SQLServerConnection.createArrayOf
02-09 08:15:46.325: W/dalvikvm(367): VFY: unable to resolve new-instance 828 (Ljava/sql/SQLFeatureNotSupportedException;) in Lcom/microsoft/sqlserver/jdbc/SQLServerConnection;
02-09 08:15:46.325: D/dalvikvm(367): VFY: replacing opcode 0x22 at 0x0003
02-09 08:15:46.325: D/dalvikvm(367): VFY: dead code 0x0005-000e in Lcom/microsoft/sqlserver/jdbc/SQLServerConnection;.createArrayOf (Ljava/lang/String;[Ljava/lang/Object;)Ljava/sql/Array;
02-09 08:15:46.385: I/dalvikvm(367): Failed resolving Lcom/microsoft/sqlserver/jdbc/SQLServerNClob; interface 818 'Ljava/sql/NClob;'
02-09 08:15:46.385: W/dalvikvm(367): Link of class 'Lcom/microsoft/sqlserver/jdbc/SQLServerNClob;' failed
02-09 08:15:46.395: E/dalvikvm(367): Could not find class 'com.microsoft.sqlserver.jdbc.SQLServerNClob', referenced from method com.microsoft.sqlserver.jdbc.SQLServerConnection.createNClob
02-09 08:15:46.395: W/dalvikvm(367): VFY: unable to resolve new-instance 563 (Lcom/microsoft/sqlserver/jdbc/SQLServerNClob;) in Lcom/microsoft/sqlserver/jdbc/SQLServerConnection; 
```

**代码** 这只是这个类的一部分：

```
import java.sql.*;

public class ConnectURL {

    public static void main() {

        // Create a variable for the connection string.
        String connectionUrl = "jdbc:sqlserver://192.168.1.20:1433;" +
            "databaseName=BD;user=sa;password=pass1;integratedSecurity=true;";

        // Declare the JDBC objects.
        Connection con = null;
        Statement stmt = null;
        ResultSet rs = null;

            try {
                // Establish the connection.
                Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
                con = DriverManager.getConnection(connectionUrl);
.... 
```

注意我已经在一个文件夹中下载了 Microsoft sqlserver jdbc 4.0，并且在这个项目中有一个带有这个路由的 Java 构建路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:15:57.930

[`java.sql.SQLFeatureNotSupportedException`](http://developer.android.com/reference/java/sql/SQLFeatureNotSupportedException.html)仅从 API 级别 9 开始可用。

我猜您的目标是较低的 API 级别。

# python - Mayavi (Python) 中的 TVTK 错误

> ID：14786437
> 
> 赞同：14
> 
> 时间：2013-02-09T08:50:11.990
> 
> 标签：python, vtk, mayavi

我正在运行 Fedora 17 (x64) 机器，我尝试通过安装 Mayavi for python

```
yum install mayavi 
```

效果很好，除了每次我编写调用 mayavi 模块（如 mlab）的代码时：

```
from enthought.mayavi import mlab 
```

它因错误而大喊大叫

```
********************************************************************************
WARNING: Imported VTK version (5.8) does not match the one used
     to build the TVTK classes (5.6). This may cause problems.
     Please rebuild TVTK.
******************************************************************************** 
```

我用谷歌搜索过，但我不知道如何重建 TVTK 以匹配 VTK 的版本。我怀疑这会导致异常行为，但我不能确定。你如何重建 TVTK？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-12T14:04:40.927

看起来您机器上的可视化工具包 ( [http://www.vtk.org/](http://www.vtk.org/) ) 比用于构建打包在 mayavi 中的类的工具包更新。您需要重建/安装可视化工具包 5.6 ( [http://vtk.org/VTK/resources/software.html](http://vtk.org/VTK/resources/software.html) ) 或者您是否尝试过 Mayavi2 ( [http://docs.enthought.com/mayavi/mayavi/installation。 html](http://docs.enthought.com/mayavi/mayavi/installation.html) ) - 这可能是最新的，可视化工具包当前版本为 5.10。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-22T03:49:42.580

从 4.3.1 开始，还不支持 VTK 6.x。目前正在master上进行这项工作，但尚未完成。

[https://github.com/enthought/mayavi/issues/124](https://github.com/enthought/mayavi/issues/124)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T22:40:31.780

我猜你使用了 yum update 但没有成功。您还可以通过执行 yum info 并查看它显示的版本号来检查存储库中的版本。如果那不满足您的要求，恐怕您将不得不“使用源代码”...希望这会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T08:52:05.007

我遇到了同样的问题，对 mayavi2 的简单更新就成功了：

```
pip install mayavi2 -U 
```

# ios - 一个代表和多个发送者的协议？

> ID：14786439
> 
> 赞同：0
> 
> 时间：2013-02-09T08:50:35.110
> 
> 标签：ios, objective-c, delegates, protocols

我的应用程序有以下情况。四个子 VC 需要有一个数据源委托，它们的根 VC（它们都共享一个根 VC）必须实现。

我的问题是——我是在每个子 VC 中声明一个协议并在根 VC 中单独实现每个协议，还是有更好的方法？不知何故只定义一次协议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:16:25.383

让每个从声明您需要的协议的控制器继承的孩子怎么样？

```
@protocol VCChildDelegate <NSObject>
 -(void) yourMethod;
@end

@interface WCChildAbstract : UIViewController
@property (nonatomic,assign> id<VCChildDelegate> delegate
@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:23:52.123

无需在 4 个子 VC 中声明 4 个协议。

就像@elio.d 所说的那样，只采用一种协议，并在您的 Root VC 中实现该协议方法。

# network-programming - 在远程计算机之间建立局域网连接

> ID：14786441
> 
> 赞同：0
> 
> 时间：2013-02-09T08:51:03.607
> 
> 标签：network-programming

我想创建一个应用程序，使局域网中的一些计算机相互连接（计算机不在本地网络中），但它们都连接到互联网

我正在寻找 C++ 或 VB.NET 的功能来做到这一点
我的目标是让他们在彼此的局域网中，所以如果他们中的一个人在游戏中创建一个主机，其他人会看到他的主机，他们可以加入他并玩

如果有人给我一个起点，那将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:02:04.913

您只想与客户端联网，然后使用互联网——它是最大的“局域网”。创建每个客户端签入的目录服务。在这个目录服务中，每个想要托管游戏的玩家都将自己宣传为服务器；客户端可以直接连接玩游戏。

# vim - vimrc/vimperatorrc 重用和重新分配现有的快捷方式

> ID：14786442
> 
> 赞同：0
> 
> 时间：2013-02-09T08:51:17.277
> 
> 标签：vim, vimperator

我正在使用 Firefox 插件 vimperator。vimerator 的配置文件（vimperatorrc），跟 vim 类似的配置。我想将现有快捷键重新分配给新键，并将另一个键用于我重新分配的快捷键。例如。

```
map x b
map b gT 
```

1.  将 x 映射到 b（缓冲区）
2.  将 b 映射到 gT（上一个选项卡）

在此之后，x 也被映射到 b。我知道它会解析完整的文件并决定映射。

但是，有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:02:08.753

试试`noremap x b`吧。（认为​​这就是它的工作原理。）

# c# - 填充下拉列表

> ID：14786443
> 
> 赞同：2
> 
> 时间：2013-02-09T08:51:19.270
> 
> 标签：c#, asp.net, user-interface, webforms

我想每次都用一个链接按钮（编辑）填充一个下拉列表，如下所示： ![在此处输入图像描述](../Images/fde21b71e3065d7173f8ccb635cfa181.png)

我用这段代码来填充它：

```
sqlcmd1 = new SqlCommand(@"SELECT country FROM Authors  
                           WHERE AuthorID=@AuthorID 
                           AND AuthorUserName=@AuthorUserName", sqlconn);
sqlcmd1.Parameters.AddWithValue("@AuthorUserName", AuthorUserName);
sqlcmd1.Parameters.AddWithValue("@AuthorID", AuthorID);

dd_country.Text= ((string)sqlcmd.ExecuteScalar()).ToString(); 
```

但它会用一个数字填充下拉列表！

如果我将代码更改为以下内容，则会发生其他情况：

```
dd_country.SelectedItem.Text= ((string)sqlcmd.ExecuteScalar()).ToString(); 
```

它导致将下拉列表项更改为选定项；比如它把加拿大改成了布隆迪！事实上，这些项目只是暂时改变了，然后我在下拉列表中有两个加拿大项目！

![在此处输入图像描述](../Images/a325513993df764b0d5159fb17613ffc.png)

如何在没有这些问题的情况下通过编辑按钮填充下拉列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:08:24.770

You must set the `Value` of the drop-down list to the number, and the `Text` to the country name.

Then you can do this to set it as selected -> `dropdownlist.SelectedValue=1` and it will select the country appropriately.

Avoid this problem using Data-Source like so:

![enter image description here](../Images/224e3854c704ae2fe7879491f1619734.png)

A dialog box pops up that looks like this:

![enter image description here](../Images/4dd4f0d7b773877895d3c0a9489d10b2.png)

And you can follow on :-) from there

# ios - iOS OpenGL ES - 在应用程序退出时将屏幕渲染到 FBO 以便稍后重绘

> ID：14786445
> 
> 赞同：0
> 
> 时间：2013-02-09T08:51:40.943
> 
> 标签：ios, opengl-es

我想将我的屏幕渲染为纹理，这样当我再次回到应用程序时，我就可以将纹理“粘贴”到屏幕上。目前在我的应用程序中，我正在绘制一个将 kEAGLDrawablePropertyRetainedBacking 设置为 TRUE 的波形。它可以工作，但是在我从我的应用程序中退出并再次回来后，屏幕被清除了。kEAGLDrawablePropertyRetainedBacking 的这种正常行为是否为 TRUE？当我回到我的应用程序时，我负担不起重新绘制所有内容的 fps。

我已经偶然发现了这一点：[如何在 OpenGL ES 中保存和重绘屏幕内容，](https://stackoverflow.com/questions/4985962/how-to-save-and-redraw-screen-content-in-opengl-es)并试图将答案应用于我的需求，但我仍然遇到问题。

参考另一个问题的答案，这就是我尝试做的方式。

```
@property (nonatomic) GLuint framebuffer;
@property (nonatomic) GLuint texture; 
```

在 glkviewcontroller 中加载的代码。

```
- (void)viewDidLoad  {

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillResignActive) name:UIApplicationWillResignActiveNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(appWillTerminate) name:UIApplicationWillTerminateNotification object:nil];

    glGenFramebuffers(1, &_framebuffer);
    glBindFramebuffer(GL_FRAMEBUFFER_OES, _framebuffer);

    glGenTextures(1, &_texture);

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, _texture);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 768, 1024, 0, GL_RGBA, GL_UNSIGNED_BYTE, NULL);

    glBindTexture(GL_TEXTURE_2D, 0);
    glDisable(GL_TEXTURE_2D);
..... 
```

当通知此 viewController 应用程序正在辞职时，我使用此功能：

```
 -(void)appWillResignActive
{
    glFramebufferTexture2DOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_TEXTURE_2D, _texture, 0);
    if(glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES) != GL_FRAMEBUFFER_COMPLETE_OES)
        NSLog(@"Error!");
} 
```

检查上述状态后，我仍然收到错误消息。这里可能是什么问题？我对 OpenGL ES 很陌生，如果这是一个新手问题，请原谅我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T15:54:46.770

没关系，我在上下文初始化之前尝试了上面的纹理和帧缓冲区绑定。

```
 // Create an OpenGL ES 2.0 context and provide it to the
    // view
    view.context = [[AGLKContext alloc]
                    initWithAPI:kEAGLRenderingAPIOpenGLES2];
    view.delegate = self;

   // Make the new context current
   [AGLKContext setCurrentContext:view.context]; 
```

在此之后放置代码允许检查通过。

# objective-c - 如何在方法中声明 2 个矩阵接收器变量？

> ID：14786449
> 
> 赞同：-2
> 
> 时间：2013-02-09T08:52:34.253
> 
> 标签：objective-c

我需要将使用以下代码的矩阵相乘：

```
- (NSNumber *)matrixsender
{
    double matrix[4][2] = {};
    double vectorsend[4] = {};
    [self matrix_multiply:matrix[4][2]:vectorsend[4]];
}

-(NSNumber *)matrix_multiply:(double) mat:(double)vector
{
    double vector_result[] = vector.Length;
    for (int i = 0; i < vector.Length; i++) {
        for (int j = 0; j < mat.GetLength(1); j++) {
            vector_result[i] += mat[i][j]*vector[j];
        }
    }

    return [NSNumber numberWithDouble:vector_result[]];
} 
```

实际上，它来自 c# 代码，但我无法将其转换为 Objective-C，然后我在 Objective-C 中构建矩阵代码，但它不起作用。

我怎样才能正确构建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:36:35.923

```
double **matrix_mult(double *a, double *b, int nr1, int nc1, int nc2) {
  double **c;
  int i, j, k;
  c = malloc(sizeof(double *) * nr1);
  for (i = 0; i < nr1; i++) {
    c[i] = malloc(sizeof(double) * nc2);
    for (k = 0; k < nc2; k++){
        c[i][k] = 0.0;
        for (j = 0; j < nc1; j++) c[i][k] += (a[i][j]) * (b[j][k]);
    }
  }
  return c;
}

double *c = matrix_mult(a,b,4,4,4) 
```

# mysql - Msql Join 查询的行结果

> ID：14786455
> 
> 赞同：1
> 
> 时间：2013-02-09T08:53:48.257
> 
> 标签：mysql, select, join

请帮助解决以下问题

我有一张桌子：人

```
Id   Leader Name1   Name2   StartDate  EndDate
123  1      Person1         2013-02-11 2013-02-17
123  0              Person2 2013-02-13 2013-02-13
123  0              Person3 2013-02-13 2013-02-13 
```

我有一个问题1

```
(SELECT t1.Id, t1.Name1, t1.Name2
FROM `dbo`.`people` t1
WHERE t1.StartDate >= '2013-02-11'
AND t1.Leader = 1)

UNION 

(SELECT t2.Id, t2.Name1, t1.Name2
FROM `dbo`.`people` t2
WHERE t2.StartDate >= '2013-02-11'
AND t2.Leader = 0) 
```

这返回

```
Id   Name1   Name2
123, Person1 
```

我有一个查询2

```
(SELECT t1.Id, t1.Name1, t1.Name2
FROM `dbo`.`people` t1
WHERE t1.StartDate >= '2013-02-13'
AND t1.Leader = 1)

UNION 

(SELECT t2.Id, t2.Name1, t1.Name2
FROM `dbo`.`people` t2
WHERE t2.StartDate >= '2013-02-13'
AND t2.Leader = 0) 
```

这返回

```
Id   Name1   Name2
123, Person1 
123,         Person2
123,         Person3 
```

我需要 2012-02-11 的结果来显示

```
Id   Name1   Name2
123, Person1 null 
```

并为 2012-02-13 显示

```
Id   Name1   Name2
123, Person1 Person2
123, Person1 Person3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:21:11.743

这是一个满足您期望结果的查询

```
(SELECT 
  id,
  name1,
  IFNULL(name2, 'No one available') AS name2,
  startdate AS `date` 
FROM
  person 
WHERE startdate = '2013-02-11') 
UNION
ALL 
(SELECT 
  p.id,
  IFNULL(p.name1, pl.name1) AS name1,
  IFNULL(p.name2, 'Noone available') AS name2,
  p.startdate AS `DATE` 
FROM
  person AS p 
  LEFT JOIN person AS pl 
    ON pl.leader = p.id 
WHERE p.startdate = '2013-02-13') 
```

输出

```
id  name1       name2               date
---------------------------------------------------
1   Person1     No one available    2013-02-11
1   Person1     Person2             2013-02-13
1   Person1     Person3             2013-02-13 
```

点击[这里](http://www.sqlfiddle.com/#!2/32f868/1)进行演示

这是您的查询，稍作修改

```
(SELECT 
  t1.Id,
  t1.Name1,
  IFNULL(t1.Name2, 'Null') AS Name2 
FROM
  `dbo`.`people` t1 
WHERE t1.StartDate >= '2013-02-13' 
  AND t1.Leader = 1) 
UNION
(SELECT 
  t2.Id,
  IFNULL(t2.Name1, p.leader) AS Name1,
  t1.Name2 
FROM
  `dbo`.`people` t2 
  LEFT JOIN people AS p 
    ON p.leader = t2.id 
WHERE t2.StartDate >= '2013-02-13' 
  AND t2.Leader = 0) 
```

编辑

另一种选择是使用子查询

```
(SELECT 
  t1.Id,
  t1.Name1,
  IFNULL(t1.Name2, 'Null') AS Name2 
FROM
  `dbo`.`people` t1 
WHERE t1.StartDate >= '2013-02-13' 
  AND t1.Leader = 1) 
UNION
(SELECT 
  t2.Id,
  IFNULL(t2.Name1, (SELECT name1 FROM people WHERE t2.StartDate = '2013-02-13')) AS Name1,
  t2.Name2 
FROM
  `dbo`.`people` t2 
WHERE t2.StartDate >= '2013-02-13' 
  AND t2.Leader = 0) 
```

删除连接并使用子查询，同时在联合的第二部分中选择 ifnull 进入 name1。此查询从表 IFNULL 中获取结果，检查 Name1 字段是否为空。如果这是空的，则执行 IFNULL 的第二个参数，它是一个子查询并将获取一个名称。如果您需要更多帮助，请在 google 上进行一些研究。

# c# - 将图像从图像控件存储到 StorageFile

> ID：14786460
> 
> 赞同：0
> 
> 时间：2013-02-09T08:54:20.953
> 
> 标签：c#, xaml, windows-8, windows-store-apps, c#-5.0

如何将图像从 Windows 商店应用程序中的图像控件存储到 StorageFile？我正在使用以下链接，但这对我没有用

```
StorageFile file = await StorageFile.CreateStreamedFileFromUriAsync(" ", new Uri(user.ProfilePicUrl), new RandomAccessStream()); 
```

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfileasync.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.storagefile.createstreamedfileasync.aspx)

我需要明确的解决方案来解决我的问题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T06:05:18.610

您可以使用以下方法将图像从 url 保存到文件中`LocalFolder`：

```
public async Task<string> DownloadFileAsync(Uri uri, string filename)
{
    using (var fileStream = await ApplicationData.Current.LocalFolder.OpenStreamForWriteAsync(filename, CreationCollisionOption.ReplaceExisting))
    {
        var webStream = await new HttpClient().GetStreamAsync(uri);
        await webStream.CopyToAsync(fileStream);
        webStream.Dispose();
    }
    return (await ApplicationData.Current.LocalFolder.GetFileAsync(filename)).Path;
} 
```

# php - Mysql结果为数组

> ID：14786465
> 
> 赞同：0
> 
> 时间：2013-02-09T08:55:05.360
> 
> 标签：php, mysql, arrays

如果条件是 fulfield，我有一个 php 函数可以查询表并获取列中的所有字段。所以该函数返回一个元素的集合。问题是我希望这个函数返回一个我可以解析和显示的数组。下面的代码：

```
function get_approved_pictures(){
    $con = mysql_connect("localhost","valentinesapp","fBsKAd8RXrfQvBcn");
    if (!$con)
    { 
      echo 'eroare de conexiune';
      die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("mynameisbrand_valentineapp", $con);

    $all = (mysql_query("SELECT picture FROM users WHERE approved = 1")); 

    $row=mysql_fetch_assoc($all);
     //  mysql_close($con);

    return $row['picture']; 
  } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:00:04.557

您需要使用循环遍历查询获取的所有数据：

```
$pictures=array();
while($row=mysql_fetch_assoc($all))
{
    $pictures[]=$row['picture']; 
}
return $pictures; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:03:34.677

像这样做

```
$all = mysql_query("SELECT picture FROM users WHERE approved = 1"); 
$arr = array(); // Array to hold the datas
while($row = mysql_fetch_array($all)) {
  $data = $row['picture'];
  array_push($arr,$data);
}
return $arr; 
```

您现在可以将其插入函数并返回值。

注意：mysql_* 函数正在折旧。尽量避免它们。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-09T09:28:45.747

为了多样性并让您了解如何使用[PDO](http://php.net/manual/en/book.pdo.php)而不是 deprecated `mysql_*`，您的函数可能如下所示：

```
function get_approved_pictures(){
    $db = new PDO('mysql:host=localhost;dbname=mynameisbrand_valentineapp;charset=UTF-8',
                  'valentinesapp', 'password');
    $query = $db->prepare("SELECT picture FROM users WHERE approved = 1");
    $query->execute();
    $pictures = $query->fetchAll(PDO::FETCH_ASSOC);
    $db = null;
    return $pictures;
} 
```

*免责声明：为简洁起见，有意省略所有错误处理*

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-09T09:41:09.610

为了多样性并让您了解事情必须如何而不是不方便和冗长的 PDO，您的函数可能看起来像这样：

```
function get_approved_pictures(){
    global $db;
    return $db->getCol("SELECT picture FROM users WHERE approved = 1");
} 
```

*免责声明：所有错误处理都已启动并运行，但有意封装到私有方法中以实现不可见。*

# ms-access - 项目数据库设计

> ID：14786466
> 
> 赞同：0
> 
> 时间：2013-02-09T08:55:06.473
> 
> 标签：ms-access, database-design

我有一个带有 2 个表的旧数据库：

table1=标准项目

表 2=所有项目

该数据库最初设计为单个项目的工具。

我喜欢有一个单一的数据库来处理所有项目，但这需要一种新的设计——当需要数据库来执行此操作时，最好的设计是什么：

1.  制作标准项目的副本
    a. 大约 50 个标准项目和项目经理 (PM) 经常需要制作 2-3 个相同项目的副本。
2.  对第 1 步中的新项目进行更改
3.  仅对步骤 1 中的新项目进行查询
4.  几个项目经理可以在步骤 1-3 上工作
5.  在项目期间可能会发生新项目的更改（步骤 1）
6.  当项目完成时，需要将新项目与所有项目一起存储在表中

在这方面需要帮助：当我需要复制项目（有时是几个相同的项目）时，最佳做法是什么？我如何在 PM 之间分离新项目 c. 我如何将所有项目放在 table2 中

我真的需要有关此最佳实践的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T13:23:14.873

不需要两个表，您可以用标志和日期指示项目在工作方面的位置。考虑下面的草图。

项目

```
ProjectID
Contact -- fk to PM id. This is just the lead, all other contacts are
           in the PersonsProject tables
Etc 
```

项目 -- 全部

```
ID -- pk
ProjectID - fk to Project
AssignedTo - fk, but it all depend on whether a person is in charge of an item
Stage and / or status -- fk to list
Description
Notes
Created date
Completed date
Deleted date
Deleted reason
Created by
Deleted by 
```

人

```
ID
Etc 
```

PersonsItems 或 PersonsProject

```
PersonID
ProjectID
Notes
etc 
```

可能是分配项目表

```
PersonID
ProjectID
ItemID 
```

此外，如果您有一个有限的可能项目列表，您可能需要一个项目列表表，在这种情况下，ItemListID 将进入 Items 表，而 Description 将出现。

# android - 永远的媒体记录

> ID：14786467
> 
> 赞同：1
> 
> 时间：2013-02-09T08:55:12.480
> 
> 标签：android, activerecord, media-player, android-mediaplayer, android-mediarecorder

我正在开发一个用于录音的应用程序......问题是我不知道如何让它在后台工作。我的意思是即使用户关闭应用程序，记录器也会继续工作..如果达到最大值..它会删除文件并再次记录..

用户只需按下按钮一次，应用程序应该永远工作，直到用户卸载程序。

我的代码如下：

```
public class MainActivity extends Activity {
private MediaRecorder recorder ;

Button B ;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    recorder = new MediaRecorder();

    B = (Button)findViewById(R.id.button1) ;

      B.setOnClickListener(new View.OnClickListener() {

           public void onClick(View v) {

               Thread startThread = new Thread ( new startRe (recorder));
               startThread.start() ; 
               B.setEnabled(false); 

           }
      }
      );

}
} 
```

录音类：

```
public class startRe implements Runnable {
private MediaRecorder recorder;

startRe( MediaRecorder r ) {

    this.recorder = r ; 
}
public void run() {
    // TODO Auto-generated method stub
    startRecording();
}

public void startRecording() {
    //recorder = new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    recorder.setOutputFile(getFilePath());
    try{
        recorder.prepare();
        recorder.start();
    }catch (Exception e){
        e.printStackTrace();
    }

}

private String getFilePath() {
    String filePath = Environment.getExternalStorageDirectory().getPath();
    File file = new File(filePath, "MediaRecorderSample");

    if(!file.exists())
        file.mkdirs();

    return (file.getAbsolutePath() + "/" + System.currentTimeMillis() + ".mp4");
} 
```

}

现在的问题是如何让它永远存在以及如何在它达到最大大小时将其删除。另外，使用此代码我不知道它是否真的在录制，因为我找不到输出文件..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T18:37:37.853

您可以通过在 Service 中开始录制并调用 startService() 来做到这一点。这样，即使启动的名为 startService() 的 Activity 已关闭，录制也会继续进行。

# javascript - 将 onlick 事件的外部处理程序添加到 SVG 元素

> ID：14786476
> 
> 赞同：0
> 
> 时间：2013-02-09T08:57:42.917
> 
> 标签：javascript, html, svg

我试图将 JS 处理程序添加到我的一些 SVG 的孩子。我在 SVG 中使用以下代码：

```
 <script type="text/javascript" id="script3079">
    addClickEvents();

    function addClickEvents() {
        var keys = document.getElementsByTagName('path');
        for (var i=0; i &lt; keys.length; i++){
            keys[i].addEventListener('click', keyClicked);
        }
    }

    function keyClicked(e) {
        var node = e.target;
        alert(node.id);
    }
  </script> 
```

它工作正常。但现在我想从外部 javascript 文件中调用函数：

```
//myfile.js
function keyClickedExternal(e) {
  alert('keyClickedExternal');
} 
```

当然，它是通过`script`标签附加到我的 HTML 的。

我尝试了以下绑定：

```
keys[i].addEventListener('click', keyClickedExternal); //keyClickedExternal undefined
keys[i].addEventListener('click', parent.keyClickedExternal); //keyClickedExternal undefined
keys[i].addEventListener('click', top.keyClickedExternal); //keyClickedExternal undefined
keys[i].addEventListener('click', parent.keyClickedExternal); //keyClickedExternal undefined 
```

我检查了 DOM：

```
parent.window.document //access violation
window.document //refers to SVG document
document //the same as previous 
```

最后，我不明白如何将外部处理程序绑定到 SVG 子项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T12:06:07.890

正如@Robert Longson 所说，问题与 Chrome 的安全性有关——它将其他本地文件视为不同的域。使用网络服务器，Luk。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-16T00:55:32.557

您应该`document.domain = 'Your_domain_name';` 在每个 JavaScript 文件的开始行添加，我还建议阅读有关从不同域名运行脚本的 crossdomain.xml 文件（例如：statics.yourdomain.com，包括静态 css、js、img 文件）

PS：抱歉回复晚了，我在找别的东西，看到你的问题仍然没有回复

# android - 从 Streaming URL 获取 ID3 标签

> ID：14786481
> 
> 赞同：0
> 
> 时间：2013-02-09T08:58:33.067
> 
> 标签：android, stream, mp3, dropbox-api

我正在尝试制作一个流音乐播放器应用程序，您可以通过流媒体播放您的 Dropbox 帐户中的 mp3。但是 DropboxAPI 不会给你 ID3 信息作为元数据。所以我需要找到一种方法来获取 ID3 信息，如艺术家和歌曲名称，以便我可以在屏幕上列出文件。

我尝试了 MediaMetadataRetriever 类，但它总是给 URI 的 Illegel 参数异常，我也尝试了来自不同网站的不同 URL，结果仍然相同。

那么您能否建议一种从流 URL 获取 Mp3 文件的 ID3 标记的替代方法。

预先感谢您的帮助

# javascript - 更改 JS 中的 alert 宝箱的标题

> ID：14786482
> 
> 赞同：0
> 
> 时间：2013-02-09T08:58:41.757
> 
> 标签：javascript, html, css

如何更改 java Script 中警报框的标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:02:09.180

您在寻找对话框吗？试试[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:02:19.243

由于安全原因，这是不可能的。

如果您希望自定义标题消息框，请尝试使用 jQuery UI ( [http://jqueryui.com](http://jqueryui.com) )

（类似问题：[如何编辑 JavaScript 警告框标题？](https://stackoverflow.com/questions/1905289/how-to-edit-a-javascript-alert-box-title)）

# css - 调整大小时浮动在页面中的粘性页脚

> ID：14786483
> 
> 赞同：0
> 
> 时间：2013-02-09T08:58:49.287
> 
> 标签：css, sticky-footer

我试图让我的页脚粘在页面底部。我网站的页面不在同一高度。我在网上尝试了所有东西，但在放大\缩小或调整浏览器窗口大小时没有任何效果，它与浏览器一起出现并漂浮在我的 div 、表格、..etc 的中间这是原始的页脚 css：

```
#footer
{
    width:100%;
    height:20px;
    vertical-align:middle;
    font-size:10px; 
    font-weight:bold;
}
#footer ul
{
    margin-top:10px;
    margin-right:10px;
    margin-left:30px;
    color: #797979;
    line-height:11px;

}
#footer ul li
{
    float:left;
    border-right:1px solid #797979;
    list-style:none;
    margin:0 5px 5px 0;
    padding-right: 5px;
}
#footer ul li a
{
    color: #797979;
    text-decoration:none;
}
#footer ul li a:hover
{
    text-decoration:underline;
}
#footer .copyright
{
        margin-top:5px;
    float:none;
        text-align:center;
} 
```

和 html 看起来像：

```
<div id='main'>
<div id='header'>
</div>
   <form id='myform'>
     <div id='form_div'>
     </div>
   </form>
  <div id='footer'>
  </div>
</div> 
```

这是我尝试过的所有方法：

[http://www.lwis.net/journal/2008/02/08/pure-css-sticky-footer/](http://www.lwis.net/journal/2008/02/08/pure-css-sticky-footer/)

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

[http://alistapart.com/article/footers](http://alistapart.com/article/footers)

[http://blog.softlayer.com/2012/tips-and-tricks-pure-css-sticky-footers/](http://blog.softlayer.com/2012/tips-and-tricks-pure-css-sticky-footers/)

和许多其他人......

我试着说：

```
#footer 
{ 
bottom:0;
position: fixed
} 
```

它坚持这一点，但当然，在调整浏览器大小时，css ps 中似乎没有问题：我不是写它的人，我只是在使用它并试图修复它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:29:51.027

试试 Ryan Fait 的**[粘性页脚](http://ryanfait.com/sticky-footer/)**。它非常简单且跨浏览器兼容。

# c - mmap 替代 malloc

> ID：14786484
> 
> 赞同：0
> 
> 时间：2013-02-09T08:59:01.367
> 
> 标签：c, assembly, x86, malloc, mmap

我需要找到一种使用 mmap 而不是 malloc 的方法。这怎么可能？（我不只使用 libc 系统调用）是的 brk() 是可能的。我使用了 sbrk() 但意识到它不是系统调用...（x86 内联汇编）

我一直在环顾四周，看到了这个：[如何使用 mmap 在堆中分配内存？](https://stackoverflow.com/questions/4779188/how-to-use-mmap-to-allocate-a-memory-in-heap)但这对我没有帮助，因为我有一个段错误。

基本上，我只想创建 3 块内存来存储字符。

说，

```
char * x = malloc(1000);
char * y = malloc(2000);
char * z = malloc(3000); 
```

mmap 怎么可能，以后如何用 munmap 释放它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-09T09:07:51.977

您是否仔细阅读了[mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html)手册页？我建议多读几遍。

请注意，您只能要求内核 [thru `mmap`etc...] 管理与通常为 4096 字节的页面大小对齐的内存和倍数`sysconf(_SC_PAGE_SIZE)` （我假设在我的回答中）。

然后你可能会这样做：

```
 size_t page_size =  sysconf(_SC_PAGE_SIZE);
  assert (page_size == 4096); // otherwise this code is wrong

  // 1000 bytes fit into 1*4096
  char *x = mmap (NULL, page_size, PROT_READ|PROT_WRITE, 
                  MAP_ANONYMOUS, -1, (off_t)0);
  if (x == MMAP_FAILED) perror("mmap x"), exit (EXIT_FAILURE);

  // 2000 bytes fit into 1*4096
  char *y = mmap (NULL, page_size, PROT_READ|PROT_WRITE, 
                  MAP_ANONYMOUS, -1, (off_t)0);
  if (y == MMAP_FAILED) perror("mmap y"), exit (EXIT_FAILURE); 
```

稍后释放内存，使用

```
 if (munmap(x, page_size))
     perror("munmap x"), exit(EXIT_FAILURE); 
```

ETC

如果要分配 5Kbytes，则需要两页（因为 5Kbytes < 2*4096 和 5Kbytes > 1*4096）即`mmap(NULL, 2*page_size,`...

实际上，您所有的`x`, `y`,`z`仅占用 8000 个字节，并且可以放入两页而不是三页...但是您只能`munmap`将这些内存放在一起。

请注意，这`mmap`是一个可能非常昂贵的系统调用。`malloc`实现注意避免过于频繁地调用它，这就是为什么他们管理以前的`free`-d 区域以在以后（在进一步的`malloc`-s 中）重用它们而无需任何系统调用。在实践中，大多数`malloc`实现管理不同的大分配（例如超过一兆字节），这些分配通常是`mmap`-ed at`malloc`和`munmap`-ed at `free`time.... 你可以研究一些`malloc`. 来自[MUSL Libc](http://musl-libc.org/)的那个可能比 Glibc 更容易阅读`malloc`。

顺便说一句，该文件`/proc/1234/maps`向您显示 pid 1234 进程的内存映射。也可以在终端中尝试`cat /proc/self/maps`，它显示该`cat`进程的内存映射。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-09T09:39:58.350

您可以调用`mmap`以在 x86 asm 中进行匿名映射，例如：

```
 mov eax, 192    ; mmap
    xor ebx, ebx    ; addr   = NULL
    mov ecx, 4096   ; len    = 4096
    mov edx, $7     ; prot   = PROT_READ|PROT_WRITE|PROT_EXEC
    mov esi, $22    ; flags  = MAP_PRIVATE|MAP_ANONYMOUS
    mov edi, -1     ; fd     = -1 (Ignored for MAP_ANONYMOUS)
    xor ebp, ebp    ; offset = 0 (4096*0) (Ignored for MAP_ANONYMOUS)
    int $80         ; make call (There are other ways to do this too) 
```

# sql-server - 文本框 vb 窗体应用程序上的 SQL Server 结果

> ID：14786489
> 
> 赞同：0
> 
> 时间：2013-02-09T09:00:16.870
> 
> 标签：sql-server, visual-studio-2010, textbox, max

我有一个`SELECT`声明，`ListView`即使`ListBox`唯一`DataGrid`的问题是我无法向我显示`TextBox`我只想使用的结果：

> MAX() 函数

我想使用`MAX()`它，因为它说它将返回所选列的大值，因为我习惯`INCREMENT`了我的 ID`MAX()`函数是我这样做的一种方法。

我使用此代码生成 ID：

```
 Dim p1num As Integer = 0
        p1num += 1
txtPNumber.Text = p1num.ToString("D4") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T03:21:05.633

我试图理解你的问题，我认为你应该使用这个：

尝试：

```
 Dim querystring As String = "SELECT MAX(pIDNo) FROM (Name of your Table)"
            Using connection As New SqlConnection("Data Source=(local);Initial Catalog=(Name of your DB);Persist Security Info=True;User ID=(Your User);Password=(Your Pass)")
                Dim command As New SqlCommand(querystring, connection)
                connection.Open()
                Dim reader As SqlDataReader = command.ExecuteReader
                Dim value = String.Empty
                While reader.Read
                    value = reader.GetString(0)
                End While
                txtPNumber.Text = Today.Year.ToString().Substring(2, 2) & Today.Month.ToString().PadLeft(2, "0") & (Integer.Parse(value.Substring(4, value.Length - 4)) + 1).ToString("D4")
            End Using
        Catch ex As Exception
            txtPNumber.Text = Today.Year.ToString().Substring(2, 2) & Today.Month.ToString().PadLeft(2, "0") & num.ToString("D4")
        End Try 
```

如果您想在程序运行后显示它，请尝试使用它制作一个 Private Sub 并将其用于 Form Load，如果您希望触发器显示您想要的 ID，请尝试使用按钮。

# wpf - 使用 RenderTargetBitmap 的 WPF 内存泄漏？

> ID：14786490
> 
> 赞同：4
> 
> 时间：2013-02-09T09:00:18.120
> 
> 标签：wpf, memory-leaks, rendertargetbitmap

我对我的 WPF 代码中的内存泄漏感到有点困惑。我将一些 3D 几何图形渲染到几个 RenderTargetBitmap，然后将每个渲染到一个大型的主 RenderTargetBitmap。但是当我这样做时，我得到一个内存泄漏，使我的应用程序在一两分钟后崩溃。

我在以下简化的代码中重现了该错误。

```
 private void timer1_Tick(object sender, EventArgs e) {
       // if first time, create final stitch bitmap and set UI image source
       if (stitch == null) {
           stitch = new RenderTargetBitmap(1280, 480, 96, 96, PixelFormats.Pbgra32);
           myImage.Source = stitch;
       }

       // create visual and render to img1
       Rect rect = new Rect(new Point(160, 100), new Size(320, 80));
       DrawingVisual dvis = new DrawingVisual();
       using (DrawingContext dc = dvis.RenderOpen()) {
           dc.DrawRectangle(System.Windows.Media.Brushes.LightBlue, (System.Windows.Media.Pen)null, rect); 
       }
       RenderTargetBitmap img1 = new RenderTargetBitmap(640, 480, 96, 96, PixelFormats.Pbgra32);
       img1.Render(dvis);

       // create visual and render to final stitch
       DrawingVisual vis = new DrawingVisual();
       using (DrawingContext dc = vis.RenderOpen()) {
           dc.DrawImage(img1, new Rect(0, 0, 640, 480));
       }

       stitch.Clear();
       stitch.Render(vis);
   } 
```

任何人都可以在这里看到任何明显的问题吗？为什么这段代码会有严重的内存泄漏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-21T20:36:00.497

如果你`RenderTargetBitmap`使用**Resource Monitor 监控**类的行为，你可以看到每次调用这个类，你会损失 500KB 的内存。我对您的问题的回答是：不要`RenderTargetBitmap`多次使用课程

你甚至不能释放 RenderTargetBitmap 的已用内存。

如果您真的需要使用`RenderTargetBitmap`类，只需在代码末尾添加这些行。

```
GC.Collect()
GC.WaitForPendingFinalizers()
GC.Collect() 
```

这也许可以解决您的问题：

```
private void timer1_Tick(object sender, EventArgs e) {
       // if first time, create final stitch bitmap and set UI image source
       if (stitch == null) {
           stitch = new RenderTargetBitmap(1280, 480, 96, 96, PixelFormats.Pbgra32);
           myImage.Source = stitch;
       }

       // create visual and render to img1
       Rect rect = new Rect(new Point(160, 100), new Size(320, 80));
       DrawingVisual dvis = new DrawingVisual();
       using (DrawingContext dc = dvis.RenderOpen()) {
           dc.DrawRectangle(System.Windows.Media.Brushes.LightBlue, (System.Windows.Media.Pen)null, rect); 
       }
       RenderTargetBitmap img1 = new RenderTargetBitmap(640, 480, 96, 96, PixelFormats.Pbgra32);
       img1.Render(dvis);

       // create visual and render to final stitch
       DrawingVisual vis = new DrawingVisual();
       using (DrawingContext dc = vis.RenderOpen()) {
           dc.DrawImage(img1, new Rect(0, 0, 640, 480));
       }

        GC.Collect();
        GC.WaitForPendingFinalizers();
        GC.Collect();
       stitch.Clear();
       stitch.Render(vis);
} 
```

# wordpress - »虚拟模板«挂钩到页面模板选择

> ID：14786495
> 
> 赞同：0
> 
> 时间：2013-02-09T09:01:46.477
> 
> 标签：wordpress, wordpress-theming

我即将创建一个 Wordpress 主题，我想知道是否可以挂钩到页面模板选择的创建，以便我可以在那里添加条目。

详细说明：如果在模板目录中创建一个`*.php`文件并添加如下注释：

```
<?php
/*
 * Template Name: somename
 */
?> 
```

然后出现页面模板选择下拉列表中的条目。这需要为每个所需条目提供一个带有此类注释的文件。所以这里是我的问题：

当这个下拉列表被创建、曾经被创建或将被创建以在其中添加条目时，我可以挂钩该过程吗？

问候菲利普

# java - 该文件永远不会在 JavaMail 中发送

> ID：14786497
> 
> 赞同：0
> 
> 时间：2013-02-09T09:02:00.733
> 
> 标签：java, smtp, jakarta-mail

我正在尝试使用 JavaMail API 发送附件，但它似乎不起作用。你能告诉我我犯的错误吗，文件 ABC.pdf 在项目的同一个文件中。我确实在第一个 sysout 中的“s”中得到了正确的路径。该程序永远不会到达第二个系统输出。我在电子邮件 ID 中将 ID 替换为“试用”。请帮忙

```
Message message = new MimeMessage(session);
        message.setSubject("Trial Messages");
        message.setFrom(new InternetAddress("trial@gmail.com"));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("trial@yahoo.co.in"));

        MimeBodyPart body = new MimeBodyPart();
        body.setText(content);;
        Multipart part = new MimeMultipart();

        part.addBodyPart(body);

        File f = new File("ABC.pdf");
        String s = f.getAbsolutePath();

        System.out.printf(s);

        DataSource source = new FileDataSource(s);
        body.setDataHandler(new DataHandler(source));
        body.setFileName("ABC Bill");
        part.addBodyPart(body);

        System.out.printf(s);
        Transport.send(message);

        System.out.printf(s); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:15:41.970

尝试更换

```
body.setFileName("ABC Bill"); 
```

和

```
body.setFileName(source.getName()); 
```

您可以在此处尝试将 source.getName() 传递给 sysout 以查看是否一切正确（正确的文件名）添加也

// 将 Multipart 添加到消息中

```
message.setContent(part); 
```

删除`part.addBodyPart(body);`，因为您添加了两次

```
Message message = new MimeMessage(session);
        message.setSubject("Trial Messages");
        message.setFrom(new InternetAddress("trial@gmail.com"));
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("trial@yahoo.co.in"));

        MimeBodyPart body = new MimeBodyPart();
        body.setText(content);;
        Multipart part = new MimeMultipart();

        File f = new File("ABC.pdf");
        String s = f.getAbsolutePath();

        System.out.printf(s);

        DataSource source = new FileDataSource(s);
        body.setDataHandler(new DataHandler(source));
        body.setFileName("ABC Bill");
        part.addBodyPart(body);

        message.setContent(part);
        System.out.printf(s);
        Transport.send(message);

        System.out.printf(s); 
```

# ruby-on-rails - gem 原始 pg 错误失败

> ID：14786506
> 
> 赞同：1
> 
> 时间：2013-02-09T09:02:27.987
> 
> 标签：ruby-on-rails, gem, rvm

```
$ gem pristine pg --version 0.14.1 pg --version 0.12.2
Restoring gems to pristine condition...
Building native extensions.  This could take a while...
ERROR:  While executing gem ... (Gem::Installer::ExtensionBuildError)
ERROR: Failed to build gem native extension.

    /Users/macbook/.rvm/rubies/ruby-1.9.3-p374/bin/ruby extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/macbook/.rvm/rubies/ruby-1.9.3-p374/bin/ruby
--with-pg
--without-pg
--with-pg-dir
--without-pg-dir
--with-pg-include
--without-pg-include=${pg-dir}/include
--with-pg-lib
--without-pg-lib=${pg-dir}/lib
--with-pg-config
--without-pg-config
--with-pg_config
--without-pg_config

Gem files will remain installed in /Users/macbook/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.12.2 for inspection.
Results logged to /Users/macbook/.rvm/gems/ruby-1.9.3-p374/gems/pg-0.12.2/ext/gem_make.out 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:02:27.987

```
$ gem pristine pg --version 0.14.1 pg --version 0.12.2 -- --with-pg-config=/Library/PostgreSQL/9.1/bin/pg_config
Restoring gems to pristine condition...
Building native extensions.  This could take a while...
Restored pg-0.12.2
Building native extensions.  This could take a while...
Restored pg-0.12.2 
```

# python - 如何更改 tkinter 文本小部件中某些单词的颜色？

> ID：14786507
> 
> 赞同：22
> 
> 时间：2013-02-09T09:02:27.723
> 
> 标签：python, python-3.x, tkinter

我有一个程序，我想像 Python shell 一样，在输入某些单词时改变它们的颜色。有什么帮助吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2015-05-20T01:54:00.683

主要思想是将*标签*应用于要自定义的文本部分。您可以使用该方法创建[`tag_configure`](http://effbot.org/tkinterbook/text.htm#Tkinter.Text.tag_config-method)具有特定样式的标签，然后只需将此标签应用于您要使用该方法更改的文本部分[`tag_add`](http://effbot.org/tkinterbook/text.htm#Tkinter.Text.tag_add-method)。您也可以使用 方法删除标签[`tag_remove`](http://effbot.org/tkinterbook/text.htm#Tkinter.Text.tag_remove-method)。

以下是使用`tag_configure`,`tag_add`和`tag_remove`方法的示例。

```
#!/usr/bin/env python3

import tkinter as tk
from tkinter.font import Font

class Pad(tk.Frame):

    def __init__(self, parent, *args, **kwargs):
        tk.Frame.__init__(self, parent, *args, **kwargs)

        self.toolbar = tk.Frame(self, bg="#eee")
        self.toolbar.pack(side="top", fill="x")

        self.bold_btn = tk.Button(self.toolbar, text="Bold", command=self.make_bold)
        self.bold_btn.pack(side="left")

        self.clear_btn = tk.Button(self.toolbar, text="Clear", command=self.clear)
        self.clear_btn.pack(side="left")

        # Creates a bold font
        self.bold_font = Font(family="Helvetica", size=14, weight="bold")

        self.text = tk.Text(self)
        self.text.insert("end", "Select part of text and then click 'Bold'...")
        self.text.focus()
        self.text.pack(fill="both", expand=True)

        # configuring a tag called BOLD
        self.text.tag_configure("BOLD", font=self.bold_font)

    def make_bold(self):
        # tk.TclError exception is raised if not text is selected
        try:
            self.text.tag_add("BOLD", "sel.first", "sel.last")        
        except tk.TclError:
            pass

    def clear(self):
        self.text.tag_remove("BOLD",  "1.0", 'end')

def demo():
    root = tk.Tk()
    Pad(root).pack(expand=1, fill="both")
    root.mainloop()

if __name__ == "__main__":
    demo() 
```

如果您不知道什么`sel.first`和`sel.last`是，请查看[此帖子](https://stackoverflow.com/a/4073512/3924118)或[此](http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/text-index.html)参考。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-10T23:54:22.350

我做了一个聊天客户端。我使用自定义的非常易于使用的小部件突出显示对话的某些部分，该`Text`小部件允许您使用正则表达式应用标签。它基于以下帖子：[如何在 tkinter 文本小部件中突出显示文本](https://stackoverflow.com/questions/3781670/tkinter-text-highlighting-in-python)。

这里有一个使用示例：

```
# "text" is a Tkinter Text

# configuring a tag with a certain style (font color)
text.tag_configure("red", foreground="red")

# apply the tag "red" 
text.highlight_pattern("word", "red") 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-09T09:12:02.167

看看这个例子：

```
from tkinter import *

root = Tk()

text = Text(root)
text.insert(INSERT, "Hello, world!\n")
text.insert(END, "This is a phrase.\n")
text.insert(END, "Bye bye...")
text.pack(expand=1, fill=BOTH)

# adding a tag to a part of text specifying the indices
text.tag_add("start", "1.8", "1.13")
text.tag_config("start", background="black", foreground="yellow")

root.mainloop() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-20T15:56:48.230

我能够使用自定义 tkinter 小部件 Text 更改每个匹配正则表达式的文本颜色，以获取类似于“text_changed”的事件：

```
import tkinter as tk

class CustomText(tk.Text):

def __init__(self, *args, **kwargs):
    """A text widget that report on internal widget commands"""
    tk.Text.__init__(self, *args, **kwargs)

    # create a proxy for the underlying widget
    self._orig = self._w + "_orig"
    self.tk.call("rename", self._w, self._orig)
    self.tk.createcommand(self._w, self._proxy)

def _proxy(self, command, *args):
    cmd = (self._orig, command) + args
    result = self.tk.call(cmd)
    if command in ("insert", "delete", "replace"):
        self.event_generate("<<TextModified>>")
    return result 
```

然后，像这样使用它：

```
scr = CustomText(w)
scr.tag_configure('red', foreground = 'red')
scr.tag_configure('purple', foreground = '#a820a1')
scr.bind('<<TextModified>>', self.__textchanged__)

def __textchanged__(self, evt):
    for tag in evt.widget.tag_names():
        evt.widget.tag_remove(tag, '1.0', 'end')
    lines = evt.widget.get('1.0', 'end-1c').split('\n')
    for i, line in enumerate(lines):
        self.__applytag__(i, line, 'red', 'while|if', evt,widget) # your tags here
        self.__applytag__(i, line, 'purple', 'True', evt.widget)  # with a regex

@staticmethod
def __applytag__ (line, text, tag, regex, widget):
    indexes = [(m.start(), m.end()) for m in re.finditer(regex, text)]
    for x in indexes:
        widget.tag_add(tag, f'{line+1}.{x[0]}', f'{line+1}.{x[1]}') 
```

# extjs - 显示选项卡而不明确单击选项卡图标

> ID：14786518
> 
> 赞同：-1
> 
> 时间：2013-02-09T09:04:23.710
> 
> 标签：extjs, sencha-touch

我目前正在使用 Sencha Touch 1 开发一个应用程序。我的 TabPanel 中有 2 个项目。搜索和报警。

单击“搜索”选项卡会显示 4 的列表。当用户单击列表中的第 4 个项目时，他应该自动被定向到警报选项卡，而无需手动单击该选项卡。

有没有我可以使用的功能。

我是 Sencha touch 的初学者。欢迎提出建议。

这是我的 app.js

```
ToolbarDemo=new Ext.Application({
name:'ToolbarDemo',

launch:function(){

ToolbarDemo.views.Viewport=new Ext.TabPanel({
    fullscreen:true,

    defaults:
    {
        html:'',
        styleHtmlContent:true,

    } ,

    tabBar:
    {
        dock:'bottom',
        layout:{
            pack:'center'
        }

    },

    items:[
                    /*
                    {
                    xtype:'homecard'
                    },
                    */
                    {
                    xtype:'searchcard'
                    },
                    /*
                    {
                    xtype:'actioncard'
                    },
                    */                      {
                    xtype:'settingscard'

                    },

                    {
                     xtype:'morecard'

                    },

          ] ,

       });

}
}); 
```

并且 searchcard 有以下代码（searchcard.js）

```
 Ext.regModel('Contact',{

                      fields:['firstName','lastName']
                  });

                   //create a store
                  var liststore = new Ext.data.Store({

                   model:'Contact',
                   getGroupString:function(record){
                               return record.get('firstName')[0];

                               },

                  data:[
                                       {firstName:'Network Summary'},
                                       {firstName: 'Alarms and Alerts'},

                       ]

                  });

                detailpanel=new Ext.Panel({
                                                layout:'fit',
                                                id:'detailpanel',
                                                html:'HELLO ',
                                            });

                listpanel =new Ext.List({

                         id:'indexlist',
                         store:liststore,    //take data from store created above
                         itemTpl:'{firstName}',

                         indexBar:true ,    //property of list
                         onItemDisclosure:function(record)

                                                    {

                                                             mainpanel.setActiveItem('detailpanel');

                                                    }
                        });
                 mainpanel=new Ext.Panel({

                                                                id:'mainpanel',
                                                                layout:'card',

                                                                items:[
                                                                listpanel,detailpanel
                                                                ],

                                                            });

ToolbarDemo.views.Searchcard= Ext.extend(Ext.Panel,{
    title:'Search',
    iconCls:'search',
    badgeText:'1',
    layout:'fit',
    //items:[listpanel],

    initComponent: function() {
            Ext.apply(this, {
                items:[mainpanel],
            });
            ToolbarDemo.views.Searchcard.superclass.initComponent.apply(this, arguments);
        }

})  ;

Ext.reg('searchcard',ToolbarDemo.views.Searchcard); 
```

我的警报选项卡有以下代码（morecard.js）

```
 Ext.regModel('Contact',{

                                      fields:['firstName','lastName']
                                  });
                    var liststore = new Ext.data.Store({

                                      model:'Contact',
                                      getGroupString:function(record){
                                                  return record.get('firstName')[0];

                                                  },

                                     data:[
                                                          {firstName:'Critical Alarms'},
                                                          {firstName: 'Major alarms'},
                                                          {firstName: 'Minor alarms'},
                                                          {firstName: 'Alerts'},
                                          ]

                                     });

                         detailpanel=new Ext.Panel({

                                                                        id:'detailpanel',
                                                                        tpl:'HELLO ',
                                                                    });

                        listpanel_my =new Ext.List({

                                                id:'indexlist',
                                                store:liststore,    //take data from store created above
                                                itemTpl:'{firstName}',

                                                indexBar:true ,    //property of list
                                                onItemDisclosure:function(record)

                                                                           {

                                                                                  //   ToolbarDemo.views.Viewport.setActiveItem('detailpanel');

                                                                           }
                                               });

            ToolbarDemo.views.Morecard = Ext.extend(Ext.Panel, {
                title: "Alarms",
                iconCls: "more",
                cardSwitchAnimation: 'slide',
                initComponent: function() {
                    Ext.apply(this, {
                      items:[listpanel_my] ,
                    });
                    ToolbarDemo.views.Morecard.superclass.initComponent.apply(this, arguments);
                }
            });

            Ext.reg('morecard', ToolbarDemo.views.Morecard); 
```

我特别希望当我在搜索选项卡（searchard.js）中单击名为警报和警报的列表项之后，我自动希望我的警报选项卡处于活动状态并显示其项目（主要警报、次要警报等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T21:09:07.523

您的 TabPanel 有一个名为`setActiveItem(item)`where `item`is a number 的方法。

[另请参阅有关此方法](http://docs.sencha.com/touch/2-0/#!/api/Ext.Container-method-setActiveItem "关于这个方法")的 Sencha Touch Docs 。`Container`是 的超类`TabPanel`。

# xml - XML Schema：如何声明具有同名属性或子项的 complexType

> ID：14786521
> 
> 赞同：3
> 
> 时间：2013-02-09T09:04:40.090
> 
> 标签：xml, xsd

使用我的 XSD 模式，我希望元素具有可以在元素的属性或其子元素中指定的必需附加值。

示例：应允许以下元素：

```
<flower color="red" /> 
```

或者：

```
<flower><color>red</color></flower> 
```

但以下元素不应该是有效的：

```
<flower /> 
```

和：

```
<flower></flower> 
```

和：

```
<flower color="red"><color>blue</color></flower> 
```

我完全不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T19:37:40.180

在 XSD 1.0 中，您唯一的选择是以散文形式记录约束。（例如，在模式的模式中所做的那样，它对元素声明有类似的约束。）

在 XSD 1.1 中，您可以使用断言来记录和强制执行约束。稍微修改一下 Petru Gardea 建议的模式文档，我们有：

```
<xs:schema targetNamespace="http://example.com/colors" 
       xmlns:tns="http://example.com/colors" 
       elementFormDefault="qualified" 
       xmlns:xs="http://www.w3.org/2001/XMLSchema">

  <xs:simpleType name="flowerColor">
    <xs:restriction base="xs:normalizedString">
      <xs:minLength value="1"/>
    </xs:restriction>
  </xs:simpleType>

  <xs:complexType name="flowerVariantC">
    <xs:sequence>
      <xs:element name="color" 
                  type="tns:flowerColor" 
                  minOccurs="0"/>
    </xs:sequence>  
    <xs:attribute name="color" 
                  type="tns:flowerColor" 
                  use="optional"/>
    <xs:assert test="(./tns:color or ./@color)
        and not(./tns:color and ./@color)"/>
  </xs:complexType>

  <xs:element name="flower" type="tns:flowerVariantC"/>    
  <xs:element name="test"/>

</xs:schema> 
```

鉴于刚刚显示的模式文档和以下实例，Saxon 拒绝第一和第四朵花元素为无效。

```
<test xmlns="http://example.com/colors"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://example.com/colors colors.xsd">
  <flower/>
  <flower color="red"/>
  <flower><color>blue</color></flower>
  <flower color="blue"><color>blue</color></flower>
</test> 
```

（也就是说，我的直觉是反对这种设计过于复杂：选择将颜色作为属性，或者选择将其设为子元素。每个都是合理的设计这一事实*并不*意味着允许它在文档中变化是一个合理的设计。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T13:36:50.290

假设 XSD 1.0，下面的示例是一个起点：

```
<?xml version="1.0" encoding="utf-8" ?>
<!-- XML Schema generated by QTAssistant/XSD Module (http://www.paschidev.com) -->
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" xmlns="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:simpleType name="flowerColor">
        <xsd:restriction base="xsd:normalizedString">
            <xsd:minLength value="1"/>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="flowerVariantA">
        <xsd:attribute name="color" type="flowerColor" use="required"/>
    </xsd:complexType>

    <xsd:complexType name="flowerVariantB">
        <xsd:sequence>
            <xsd:element name="color" type="flowerColor"/>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:element name="flower" type="flowerVariantA"/>
</xsd:schema> 
```

VariantA 和 B 是互斥的，并且匹配您的示例 XML 中的一个或另一个。如果您的意图是同时允许两者，那么 XSD 1.0 不允许“选择”将属性与元素混合的内容。

此外，您无法控制 XML 元素的自动关闭；这意味着对于 VariantA，以下内容是有效的：

```
<flower color="red"></flower> 
```

# ajax - focusout 中的方法执行一次

> ID：14786526
> 
> 赞同：1
> 
> 时间：2013-02-09T09:06:21.913
> 
> 标签：ajax, jquery

嗨，我有一个 jquery 函数，它有 ajax 方法，当焦点离开文本框函数时必须触发。我在 ajaxpanel 中有一个服务器端按钮，但是当我按下按钮并且按钮操作正确时，永远不会执行焦点

```
 jQuery("#drpProvider").focusout(function () {
        var x;

        var customer = 1;
        $.ajax({ type: "POST",
            url: "request.aspx/branchsafed",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({

                customer: customer

            }),
            dataType: "json",
            success: function (ret) {
                var specification = ret.d;

                if (ret.d == "no") {

                }
                else {

                    var temp = ret.d;
                    $("#blocklable").text(temp);

                }

            }
        });

    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-05T14:05:51.577

```
<input id="title"> 
```

javascript:

```
$('#title').focusout(function() {
if( $(this).val() ) {
    alert('!!');
    $(this).unbind('focusout');
} 
}); 
```

# javascript - 如何将附加的 html 保存到文档中？

> ID：14786529
> 
> 赞同：0
> 
> 时间：2013-02-09T09:06:33.023
> 
> 标签：javascript, jquery, html, css

假设我通过 jquery 将 html 附加到一个元素。我怎样才能使它保存，以便每次加载页面时，新附加到元素的 html 仍然适用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:29:45.893

这取决于它是什么类型的网站，但如果对 DOM 所做的更改是永久性的，并且仅允许注册用户进行更改，我可能会将 HTML 片段写入文件，并保留跟踪数据库中的更改。然后在每次请求页面时呈现 HTML 片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:19:05.537

通过 localStorage 快速完成（这意味着您将需要一个[现代浏览器](http://caniuse.com/namevalue-storage)）

**保存 HTML**

```
window.onunload = function() { 
    localStorage.setItem(
        "page_"+window.location.pathname,
        document.body.innerHTML
    ); 
}; 
```

**加载 HTML**

```
window.onload = function() { 
    document.body.innerHTML = localStorage.getItem("page_"+window.location.pathname);
}; 
```

这并不能保证 100% 的一致性，例如，如果您`iframes`指向外部域，那么它们的`src`属性将不会被复制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T09:11:13.977

您在这里要问的是在页面重新加载时保持状态，

您可以通过多种方式执行此操作
1\. 使用 Localstorage 保存附加的 html，然后在 $(function(){}) 中检索 html 并再次附加它。
2.每次附加 HTML 时，都会以编程方式更改文档的哈希值，因此无论何时再次访问该页面，您都可以读取哈希值并发送新的 AJAX 请求以检索 html 内容，然后附加它

# xcode - 如何将界面生成器中的文本字段连接到 xcode 3.2 中的代码？

> ID：14786535
> 
> 赞同：0
> 
> 时间：2013-02-09T09:07:24.113
> 
> 标签：xcode, interface-builder, applescript, textfield

如何将 interface builder 中的 textField 连接到 xcode 3.2 中的 applescript 代码？

我在**Xcode 3.2中使用****applescript**。

 **谢谢

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:20:31.510

你的意思是在applescript中创建一个文本字段框吗？如果是这样，那么复制这个

```
set answer to text returned of (display dialog "Enter the Secret Code:" with title "TextField" default answer "" buttons {"Cancel", "Enter"} default button 2 with hidden answer) 
```**

# jquery - 在 Jquery 中循环使用 .each 延迟

> ID：14786537
> 
> 赞同：1
> 
> 时间：2013-02-09T09:07:44.457
> 
> 标签：jquery, settimeout, each, jquery-isotope

我不擅长 jQuery，所以我不确定我的假设是否正确。

我正在使用同位素插件，我想用它一个一个地插入元素（而不是一次插入所有元素），并稍有延迟，所以它看起来也像它（对于人眼）

插入一个我用同位素的项目

```
$('#container').isotope( 'insert', $item); 
```

所以为了一一插入我正在做

```
$("#items_are_here").find('.item').each(function( index ) {
     setTimeout(function() {
            $('#container').isotope( 'insert', $(this));
         },3000);
    }); 
```

然而，这似乎浏览器等待某些东西，然后一次显示它们

如果我做

```
 setTimeout(function() {
   $("#items_are_here").find('.item').each(function( index ) {
          $('#container').isotope( 'insert', $(this));

        }); },3000); 
```

一切正常，但不是一个接一个..

这是正确的方法吗？还是我过于复杂了？

这是[小提琴](http://jsfiddle.net/fqM6Z/3/)。在其中，有 2 个按钮 - 全部插入 - 找到所有`.item`并插入它们。并逐一插入，以延迟执行建议的方式。如您所见，没有延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:42:35.917

因为`.each()`每个条目的运行都是即时的，所以您最终会遇到一堆或多或少相同的超时。所以大约 3 秒后，所有超时都会过期并添加项目。

为了防止这种情况，您将根据项目的索引设置超时。所以项目 0 将在 3 秒后插入，项目 1 将在 6 秒后插入，依此类推。

```
$("#items_are_here").find('.item').each(function( index ) {
  var item = $(this);
  setTimeout(function() {
    $('#container').isotope('insert', item);
  },3000 * (index + 1));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:10:35.583

```
$("#items_are_here").find('.item').each(function( index ) {
     setTimeout(function() {
            $('#container').isotope( 'insert', $(this));
         },3000);
    }); 
```

在上面的上下文中，`$(this)`是`window`对象，因为它在里面`setTimeout`。

修改您的代码并尝试：

```
$("#items_are_here").find('.item').each(function( index ) {
     var item = $(this);
     setTimeout(function(index) {
            $("#container").isotope( 'insert', $(this))
     },index*3000);
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T09:23:40.330

```
 var $items=$("#items_are_here").find('.item');
    var i=-1;
    var delayed=setinterval(function() {
            if (++i<$items.length) $('#container').isotope( 'insert', $items.eq(i));
            else clearInterval(delayed); 
             },3000); 
```

未测试。或者

```
 var $container=$('#container');     
    $.fn.extend({
      onebyone :function ($ctnr,i) {
           if (!i) i = 0;
           var $o=$(this);
           setTimeOut(function() {
                 $ctnr.isotope( 'insert', $o.eq(i)); 
                 if (++i<$o.length) $o.onebyone(i); 
               },3000);
           return this; 
      }
    $("#items_are_here").find('.item').onebyone($container); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T09:13:12.880

```
$("#items_are_here").find('.item').each(function( index ) {
     var item = $(this);
     setTimeout(function(i) {
            $('#container').isotope( 'insert', i );
         },3000);
    }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-05T14:12:16.430

有点晚了，但我的解决方法是：将类硬编码为 to_animate 之类的项目

的CSS：

`.item.to_animate { opacity:0; display:block; } @keyframes TransitionClass{ 0% { opacity: 0;transform: scale(1.2); } 100% { opacity: 1;transform: scale(1); } } .animatefinish.TransitionClass{ animation-name: umScaleIn; animation-timing-function: cubic-bezier(0.19,1,.22,1); } .animatefinish.TransitionClass{ animation-duration: .8s; }`

同位素截断

```
 `$('#container').isotope( 'appended', $(el) ).after(function() {

      $('.item.to_animate').each(function(i) {
      var el = $(this);

              setTimeout(function() {

              el.addClass('TransitionClass animatefinish');

                  el.removeClass('to_animate')

              }, i * 200);

      });

    });` 
```

# java - 带有 Rowspan 和 Colspan 的 HTML 表格

> ID：14786539
> 
> 赞同：0
> 
> 时间：2013-02-09T09:08:03.177
> 
> 标签：java, swing, user-interface, jtable

![我的jsp视图](../Images/3d83728bdfa28c03356c769fbb55ec6a.png)

我想显示来自我的服务器的数据以像上图一样查看。在 java 中，我如何安排我的服务器中的数据结构以像这样查看？java中是否有任何特定的数据结构可以这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:17:00.003

```
Object [][] structure = new Object [5][];
structure [0] = new Object [] {c1_d1, c1_d1, c1_d1, c1_d1}; // col1
structure [1] = new Object [] {c2_d1, c2_d2, c2_d2, c2_d2}; // col2
structure [2] = new Object [] {c3_d1, c3_d2, c3_d2, c3_d3}; // col3
structure [3] = new Object [] {c4_d1, c4_d2, c4_d3, c4_d4}; // col4
structure [4] = new Object [] {c5_d1, c5_d2, c5_d3, c5_d4}; // col5 
```

每列由一个数组表示，合并单元格由存储对同一对象的引用的数组元素范围表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:14:11.850

看看[Guava](http://guava-libraries.googlecode.com/svn/tags/release09/javadoc/com/google/common/collect/Table.html)`Table`的数据结构

# android - 异常编号和字符串

> ID：14786542
> 
> 赞同：0
> 
> 时间：2013-02-09T09:08:15.090
> 
> 标签：android, exception

有没有办法获得异常编号来更好地控制发生的事情？

例如：

```
 try
    { Do some work
    }
    catch(Exception e)
    {  if(e.**ExceptionNumber** == Value)
          Toast("Show message");
       else
          Toast("Error doing some work: " + e.toString());        
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:16:02.217

如果您想以不同方式处理它们，请捕获不同的异常。

```
try{

}catch(IOException e1){
  //-- if io error--
}catch(FormatException e2){
  //--if format error--
}catch(Exception e3){
  //--any thing else --
} 
```

大多数 Java API 异常**没有**特殊的整数，它们有类型、消息和原因。

但是，您也可以创建自己的异常类型：

```
public class MyIntegerException extends Exception{
  private int num;

  public int getInteger(){
    return num;
  }

  public MyIntegerException(int n, String msg){
    super(msg);
    this.num = n;
  }
} 
```

扔 ：

```
throw new MyIntegerException(1024,"This is a 1024 error"); 
```

抓住：

```
catch(MyIntegerException e){
  int num = e.getInteger();
  //--do something with integer--
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:24:37.880

如果您知道可能出现的问题，您可以抛出自己的异常并将自定义文本添加到其中：

```
try{
  //code to execute
  //in case of an error
  throw new Exception("Your message here");
}
catch (Exception e){
e.printStackTrace();
} 
```

您还可以定义自己的异常类型，就像上面所说的那样，您可以根据发生的异常类型抛出不同的消息。

# ios - NSFetchedResultsController 在插入时覆盖最后一个单元格

> ID：14786543
> 
> 赞同：0
> 
> 时间：2013-02-09T09:08:54.823
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我有一个使用`NSFetchedResultsController`附加到`UITableView`.

我遇到了一个非常奇怪的问题，当在数据库中插入一个应该出现在表格底部的新项目时，最后一个项目的单元格被新插入的项目替换 - 所以屏幕现在显示我刚刚插入的项目，但之前的项目丢失了。进一步的插入表现出相同的行为，表不会增长，并且最后一项被任何新项替换。

当应用程序重新启动时，完整的数据表会按原样显示（换句话说，被覆盖的单元格在数据库中仍然有数据）。获取结果控制器似乎忘记了新项目应该去哪里。

之前和之后的示例：

![前](../Images/4c7d88bf04207cc2af18c3a6bfd33172.png)

![后](../Images/255965b7b88cd4f78c86de08950fa0a4.png)

添加：

现有的代码`controller:didChangeObject:atIndexPath:forChangeType:newIndexPath:`

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {
    UITableView *fetchTableView = [self tableViewForFetchedResultsController:controller];
    switch(type) {
        case NSFetchedResultsChangeInsert:
            [fetchTableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
               break;
///....
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:09:39.277

这种现象似乎表明在有问题的更新代码中，您正在更新最后一个单元格，而不是插入一个单元格。

使用
`insertRowsAtIndexPaths:withRowAnimation:`而不是
`reloadRowsAtIndexPaths:withRowAnimation:`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:12:36.063

我猜您在方法中使用了错误的参数：

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath 
```

插入行时要小心使用`newIndexPath`参数，而不是：`indexPath`

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {
    switch (type) {
        case NSFetchedResultsChangeInsert:
            [self.tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
            break;
        default:
            break;
    }
} 
```

# macos - 如何在受保护的媒体上截屏？

> ID：14786544
> 
> 赞同：-3
> 
> 时间：2013-02-09T09:09:11.093
> 
> 标签：macos, screenshot

我在 DVD 上看到了这部很棒的电影，想截屏，但是当我这样做时，它是透明的。我只能看到我的桌面被拍摄，但看不到电影。是否有特定的程序或黑客可以让我截取该内容的屏幕截图？我尝试了每个屏幕截图软件，但仍然保持透明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:14:23.913

尝试 VLC 播放器，在 Menu->Video 下，您应该会看到“Take Snapshot”。据我记得，当我遇到同样的问题时它对我有用（尽管在 Windows 上）。

这是下载链接： http: [//www.videolan.org/vlc/#download](http://www.videolan.org/vlc/#download)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T21:47:47.367

使用适当的播放器，例如 KMPlayer。在那里您可以执行 PrintScreen 或选择多种选项：

![在此处输入图像描述](../Images/84fe3f0435f75e9532d841274e2fe0e1.png)

# scala - 从 Play 2.0.4 迁移到 2.1：Tika 不再找到我的班级

> ID：14786551
> 
> 赞同：2
> 
> 时间：2013-02-09T09:09:59.170
> 
> 标签：scala, playframework, classpath, apache-tika, playframework-2.1

我将一个 Web 应用程序从 Play Framework 2.0.4 迁移到 2.1。

该应用程序使用[Apache Tika (V. 1.3) 和自定义解析器](http://tika.apache.org/)[，](http://tika.apache.org/1.3/parser_guide.html)如Tika-Homepage 上所述。

一个文件`myPlayProject/conf/META-INF/services/org.apache.tika.parser.Parser`包含自定义解析器类的名称，如下所示：

```
# Add here all custom parsers for Apache Tika.

com.test.CustomTikaParser 
```

自定义解析器将在 Play 2.0.4 中被检测到，但在 Play 2.1 中不再检测到。我已经用两个新的 2.0.4vs2.1-projects 进行了尝试，并在 V. 2.1 中遇到了同样的问题。

**这些 Play 版本之间的类路径是否发生了变化？**

`META-INF/services/org.apache.tika.parser.Parser`（我可以在类路径下使用 Play 2.0.4 和 Play 2.1读取文件。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T13:15:29.090

也许尝试一个简单的命令：

play clean-all update reload compile,

它将清理您的 .target 进行更新并重新加载您的应用程序，然后进行编译...

# django - 姜戈：allauth facebook

> ID：14786552
> 
> 赞同：0
> 
> 时间：2013-02-09T09:10:07.713
> 
> 标签：django, facebook, django-socialauth, django-allauth

我的网站上有一个登录按钮，它在新窗口中打开 facebook 登录，要求用户登录获取必要的信息并立即注销该用户并关闭该临时窗口。当下一个用户再次单击登录按钮新窗口打开并且它不要求登录信息时出现问题，默认情况下假定以前的用户已经登录...如何为不同的用户覆盖这些 Facebook 登录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:55:36.357

Facebook 支持重新认证：[https ://developers.facebook.com/docs/howtos/login/client-side-re-auth/](https://developers.facebook.com/docs/howtos/login/client-side-re-auth/)

这迫使用户重新输入他的密码。但是，此时用户无法决定以其他用户身份登录。

对重新认证的支持刚刚添加到以下的主开发分支中`django-allauth`：

[https://github.com/pennersr/django-allauth/commit/8a8f9902b4c7a1f5d079d1422be2976b51e5b7b9](https://github.com/pennersr/django-allauth/commit/8a8f9902b4c7a1f5d079d1422be2976b51e5b7b9)

如果您更喜欢使用 0.9.0（尚不包含对此的支持），您可以轻松地覆盖“facebook/fbconnect.html”模板并将`auth_type`参数传递`FB.login`给自己的 API 调用。

# python - 使用 super 的 python oop 出错

> ID：14786553
> 
> 赞同：0
> 
> 时间：2013-02-09T09:10:10.260
> 
> 标签：python, oop

我正在尝试这个

```
In [1]: class Parent:
   ...:     def __init__(self):
   ...:         self.a =10
   ...:         self.b =20
   ...:

In [3]: class NewParent(Parent):
    def __init__self():
        super(NewParent,self).__init__()
        self.c =30
   ...: 
```

当我这样做时

```
In [4]: c = NewParent()

In [5]: c
Out[5]: <__main__.NewParent instance at 0x2c98878>

In [6]: c.a
Out[6]: 10

In [7]: c.b
Out[7]: 20

In [8]: c.c 
```

* * *

() ----> 1 cc 中的 AttributeError Traceback (最近一次调用最后一次)

AttributeError：NewParent 实例没有属性“c”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:11:50.247

你搞砸了`NewParent`.

```
def __init__(self): 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:14:26.593

```
class NewParent(Parent):
    def __init__self():
        super(NewParent,self).__init__()
        self.c =30 
```

应该

```
class NewParent(Parent):
    def __init__(self):
        #Your code here 
```

# iphone - 在项目中使用带有核心数据的 txt 文件或 sqlite？

> ID：14786558
> 
> 赞同：0
> 
> 时间：2013-02-09T09:11:10.613
> 
> 标签：iphone, ios, objective-c, xcode, core-data

我正在为当前在线运行的 Web 应用程序开发 iPhone 应用程序。当前的 Web 应用程序庞大而复杂，并且使用 SQL 来存储重要信息，例如成员详细信息、登录凭据等。其他内容，例如有关几个部分、组、子组的信息以及与每个部分相关的其他信息，都保存在 txt 中。当前系统使用自己的标准将数据保存在文件中，并且还制定了自定义算法来读取和写入数据。每个 txt 文件的大小低于 1 mb。有很多数据操作正在进行。创建的自定义算法只是读取这些文件并将所有数据作为记录放入缓存中（与核心数据 managedobjectcontext 中相同），并且每当数据发生变化时，整个文件都会被覆盖。

那么在实现相同的同时我想为 iPhone 应用程序选择什么？在苹果网站上，他们说'SQLite 非常适合低级关系数据库工作' [https://developer.apple.com/technologies/ios/data-management.html](https://developer.apple.com/technologies/ios/data-management.html)但在我的情况下它是高级别的。

所以请帮我做决定。我想使用核心数据管理文件或 sqlite 数据库中的数据吗？我还想知道是否可以将当前在 webserver 中的那些类和算法导入 iOS，所以我不想为 iOS 重写相同的算法？当前的服务器代码是 C#

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:32:05.297

在极少数情况下，您需要执行低级关系数据库工作，请使用 SQLite。在 99% 的其他情况下，使用 Core Data。永远不要将关系内容存储到 txt 文件中。只会很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:18:42.300

您的用例听起来很适合 Core Data。

经常被误解的是，Core Data 是碰巧使用 sqlite 进行持久化的对象存储。您无需操作它下面的 sqlite，Core Data 会为您管理 sqlite。你不会写 SQL。.NET 中与它最接近的匹配是 EDM 和 ADO.NET 中的实体框架。

假设您要在网络服务器中导入的类和算法是 C#，遗憾的是那些需要移植到 Obj-C。

# c# - 如何为每个子类继承具有唯一值的静态属性？

> ID：14786562
> 
> 赞同：4
> 
> 时间：2013-02-09T09:11:23.233
> 
> 标签：c#, inheritance

我有一系列对象，我们称它们为建筑物，每个对象都共享某些对该建筑物而言是静态的属性，但对于每个建筑物而言却不同，例如价格。我认为实现这一点的最佳方法是创建一个具有共享价格属性的抽象超类并在每个子类中设置值，但我不知道如何让它工作。这是我尝试过的一个例子：

```
using System;
public abstract class Buildings
{
   internal static int price;
   internal static int turnsToMake;
} 
```

```
using System;
public class Walls : Buildings
{
    public Walls()
    {
        price = 200;
        turnsToMake = 5;
    }
} 
```

这适用于建筑，但如果我想在创建价格之前检查价格（检查玩家是否有足够的钱），那么它只会返回一个空值。我确信这是一个超级简单的修复，但我无法弄清楚。有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-29T18:39:22.017

有一个“不完整”但简单的解决方案值得考虑。如果您将基类定义为通用类，并且在派生类中将 T 设置为类本身，它将起作用。

发生这种情况是因为 .NET 为每个新定义静态定义了一个新类型。

例如：

```
class Base<T>
{
    public static int Counter { get; set; }

    public Base()
    {
    }
}

class DerivedA : Base<DerivedA>
{
    public DerivedA()
    {
    }
}

class DerivedB : Base<DerivedB>
{
    public DerivedB()
    {
    }
}

class Program
{
    static void Main(string[] args)
    {

        DerivedA.Counter = 4;
        DerivedB.Counter = 7;

        Console.WriteLine(DerivedA.Counter.ToString()); // Prints 4
        Console.WriteLine(DerivedB.Counter.ToString()); // Prints 7

        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T09:16:37.413

不要使用`static`. 静态表示 Building 的所有实例都具有相同的值。派生类不会继承它自己的静态副本；但总是会修改基类静态。在您的设计中，价格和turnToMake 只有一个值。

这应该适合你：

```
public abstract class Buildings
{
  internal int price;
  internal int turnsToMake;
} 
```

但是，现在大多数人都不喜欢使用字段，而是更喜欢属性。

```
public abstract class Buildings
{
  internal int Price { get; set; }
  internal int TurnsToMake { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T09:17:57.720

> *我想在创建它之前检查价格 […]*

我想这就是您进入静态字段的方式；但是，静态行为和虚拟行为不能结合使用。也就是说，您必须为每个子类重新声明静态字段。否则，您的所有子类共享完全相同的字段并覆盖彼此的值。

另一种解决方案是使用.NET（4 或更高版本）框架类库中的[**`Lazy<T, TMetadata>`**类型：](http://msdn.microsoft.com/en-us/library/dd986615.aspx)

```
public class Cost
{
    public int Price { get; set; }
    public int TurnsToMake { get; set; }
}

var lazyBuildings = new Lazy<Buildings, Cost>(
        valueFactory: () => new Walls(),
        metadata: new Cost { Price = 200, TurnsToMake = 5 });

if (lazyBuildings.Metadata.Price < …)
{
    var buildings = lazyBuildings.Value;
} 
```

也就是说，元数据 ( `.Metadata`) 现在位于实际类型 ( `Buildings`, `Walls`) 之外，可用于决定您是否真的要构建它的实例 ( `.Value`)。

（由于多态性，您可以拥有这样的“惰性工厂”的完整集合，并根据每个工厂的元数据找到要实例化的建筑类型。）

# python - Python中的嵌套循环

> ID：14786564
> 
> 赞同：0
> 
> 时间：2013-02-09T09:11:34.617
> 
> 标签：python

我试图找到最大的回文数，它是两个 3 位数的乘积。我的客人是回文将有形式`abccba`，所以我将遍历每个数字并停在两个 3 位数字乘积的最大数字处。

这段代码

```
def hasLargeDivisors(n):
    """
    Function to determine if a number has two divisors
    greater than 99
    """
    d = 999
    while n / d > 99 and n / d < 999 and d > 99:
        if n % d is 0:
            return True
        d-=1

    return False

def compisitePalindrome():
    """
    Function to find the largest palindrome 
    that is the product of 2 three-digit numbers
    """ 
    for a in reversed(xrange(1, 9)):
        for b in reversed(xrange(0, 9)):
            for c in reversed(xrange(0, 9)):
                num = a*100001 + b*10010 + c*1100
                if hasLargeDivisors(num):
                    return num

    return 0 
```

产生 888888 = 962 * 924，这是不正确的。

* * *

这段代码

```
def hasLargeDivisors(n):
    """
    Function to determine if a number has two divisors
    greater than 99
    """
    d = 999
    while n / d > 99 and n / d < 999 and d > 99:
        if n % d is 0:
            return True
        d-=1

    return False

def compisitePalindrome():
    """
    Function to find the largest palindrome 
    that is the product of 2 three-digit numbers
    """ 
    a = 9
    for b in reversed(xrange(0, 9)):
        for c in reversed(xrange(0, 9)):
            num = a*100001 + b*10010 + c*1100
            if hasLargeDivisors(num):
                return num

    return 0 
```

产生 906609 = 993 * 913，这是正确的。

我不知道我哪里错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T09:13:17.773

```
xrange(1, 9) == (1, 2, 3, 4, 5, 6, 7, 8) 
```

`xrange(start, stop, step)`生成从`start`to (但不包括)`stop`的所有数字，步长为`step`.

```
xrange(5) == (0, 1, 2, 3, 4)
xrange(1, 5) == (1, 2, 3, 4)
xrange(1, 5, 2) == (1, 3) 
```

您也可以将`xrange(1, 10)`其包含`9`在范围内。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:47:16.993

只有（大约）50 万对 3 位数字，因此对它们进行测试更快更简单。

```
def palindrome_3products():
    for i in xrange(100, 1000):
        for j in xrange(i, 1000):
            if str(i * j) == str(i * j)[::-1]:
                yield i * j, i, j

print max(palindrome_3products()) 
```

# node.js - 即使目录可写，全局安装时也会出现 NPM 错误

> ID：14786565
> 
> 赞同：13
> 
> 时间：2013-02-09T09:11:37.190
> 
> 标签：node.js, npm

尝试使用此命令安装咖啡脚本时出现此错误：

```
npm install -g --verbose coffee-script opal 
```

这些是错误消息：

```
npm ERR! Error: EACCES, symlink '../lib/node_modules/coffee-script/bin/coffee'
npm ERR!  { [Error: EACCES, symlink '../lib/node_modules/coffee-script/bin/coffee']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '../lib/node_modules/coffee-script/bin/coffee' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator.

npm info postuninstall opal@0.3.2
npm ERR! Error: EACCES, symlink '../lib/node_modules/opal/bin/opal-node'
npm ERR!  { [Error: EACCES, symlink '../lib/node_modules/opal/bin/opal-node']
npm ERR!   errno: 3,
npm ERR!   code: 'EACCES',
npm ERR!   path: '../lib/node_modules/opal/bin/opal-node' }
npm ERR! 
npm ERR! Please try running this command again as root/Administrator. 
```

文件夹 /usr/local/bin 和 /usr/local/lib/node_modules 由当前用户拥有和可写，我不想使用 root 运行该 npm 命令，如何知道 npm 尝试创建的文件夹符号链接到？

我正在使用 npm 1.2.9-1chl1~quantal1 和 nodejs 0.8.19-1chl1~quantal1

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-09T10:44:07.530

您的节点安装使用系统目录。使用 -g 时使用 sudo

```
sudo npm install -g --verbose coffee-script opal 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-07-08T23:34:26.943

您可以使用此方法对您的用户名进行`chown`NPM`bin`以解决此问题：

```
$ chown -R `whoami` `npm -g bin` 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-09T09:15:35.737

啊，使用这个命令：

```
npm -g bin 
```

它会输出如下内容：

```
/usr/bin # this is the folder nodejs wanted to write.. 
```

然后你可以`chmod`或者`chown`它，所以它可以被写来安装。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-14T06:17:20.620

我在[NPM modules won't global install without sudo](https://stackoverflow.com/questions/19352976/npm-modules-wont-install-globally-without-sudo/19354387)遇到了类似的问题，问题是**当我安装节点时，我通过 chris/lea ppa repo 使用 sudo 完成了它**。

我的解决方案是卸载节点，然后以这种方式安装：

从 nodejs.org #in my case node-v0.10.20.tar.gz 下载最新的稳定节点源

> tar -zxf node-v0.10.20.tar.gz #解压缩源
> 
> cd node-v0.10.20 #进入解压文件夹
> 
> sudo chown $USER -R /usr/local
> 
> ./configure --prefix=/usr/local && make && make install

PD：**如果您不想更改 /usr/local 文件夹的所有权**，您可以将它安装在您已经拥有的地方。这种方法的问题是您必须将安装文件夹与 bash 命令行绑定，以便我们稍后可以使用 node 命令

> mkdir ~/opt
> 
> ./configure --prefix=~/opt && make && make install
> 
> echo 'export PATH=~/opt/bin:${PATH}' >> ~/.bashrc #or ~/.profile or ~/.bash_profile or ~/.zshenv 取决于当前的操作系统

使用其中任何一种方法，您都可以在不使用 sudo 的情况下执行以下操作

> npm install -g --verbose 咖啡脚本蛋白石

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-11T10:08:25.223

有类似的问题。原来我在`project/node_modules`用`sudo`. 就我而言，它是一些依赖项 AND ALSO`.bin`目录。我删除了这些坏目录，然后`npm install`再次运行，它成功了。我确实也重新安装了全局量角器和 phantomjs，但不确定是否需要。我确信这是`.bin`导致此问题的错误（即根拥有的）目录。

# mysql - 计算规范化表中的记录

> ID：14786574
> 
> 赞同：0
> 
> 时间：2013-02-09T09:12:10.700
> 
> 标签：mysql, count, normalize

## 看到的老问题

*   [计算一个表的记录以匹配另一个表的记录](https://stackoverflow.com/q/5745686/1190388 "计算一个表的记录以匹配另一个表的记录")
*   [MySQL Count 来自多个表的匹配记录](https://stackoverflow.com/q/13271843/1190388 "MySQL Count 来自多个表的匹配记录")
*   [计算按一个字段分组的两个表中的记录](https://stackoverflow.com/q/12429347/1190388 "计算按一个字段分组的两个表中的记录")

## 表架构

**`entries`**包含数据的表`2005-01-25`

```
CREATE TABLE `entries` (
    `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `ctg` VARCHAR(15) NOT NULL,
    `msg` VARCHAR(200) NOT NULL,
    `nick` VARCHAR(30) NOT NULL,
    `date` DATETIME NOT NULL,
    PRIMARY KEY (`id`),
    INDEX `msg` (`msg`),
    INDEX `date` (`date`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

**`magnets`**具有*常规*数据的子表`2011-11-08`（之前可能有一些条目）

```
CREATE TABLE `magnets` (
    `id` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
    `eid` INT(10) UNSIGNED NOT NULL,
    `tth` CHAR(39) NOT NULL,
    `size` BIGINT(20) UNSIGNED NOT NULL DEFAULT '0',
    `nick` VARCHAR(30) NOT NULL DEFAULT 'hjpotter92',
    `date` DATETIME NOT NULL,
    PRIMARY KEY (`id`),
    UNIQUE INDEX `eid_tth` (`eid`, `tth`),
    INDEX `entriedID` (`eid`),
    INDEX `tth_size` (`tth`, `size`)
)
COLLATE='utf8_general_ci'
ENGINE=MyISAM; 
```

## 问题

`nick`我想获取在任一表中输入的任何特定（或用户）的条目总数。

中的一个条目`entries`同时填充，`magnets`并且后续条目`magnets`可以来自相同`nick`或不同。

## 我的代码

*   试试 1

    ```
    SELECT `e`.id, COUNT(1), `e`.nick, `m`.nick
    FROM `entries` `e`
    INNER JOIN `magnets` `m`
        ON `m`.`eid` = `e`.id
    GROUP BY `e`.nick 
    ```

*   试试 2

    ```
    SELECT `e`.id, COUNT(1), `e`.nick
    FROM `entries` `e`
    GROUP BY `e`.nick
    UNION ALL
    SELECT `m`.eid, COUNT(1), `m`.nick
    FROM `magnets` `m`
    GROUP BY `m`.nick 
    ```

第二次尝试是生成一些相关的输出，但它包含`nick`两个表中出现的所有输出的双重条目。

此外，我不想计算两次，即插入第一个查询中的那些条目/磁铁。这就是第二个`UNION`语句正在做的事情。它从两个表中获取所有值。

## SQL 小提琴链接

[这](http://sqlfiddle.com/#!2/c3540/1)是指向 SQL Fiddle 的链接以及随机填充的条目。

我真的希望有人能指导我完成这个。如果有任何帮助，我将使用 PHP 来最终显示数据。所以，我最后的手段是在 PHP 中嵌套循环以进行计数（我目前正在这样做）。

## 期望的输出

应该在小提琴上生成的输出应该是：

```
************************************************
**        Nick        |||        Count        **
************************************************
**        Nick1       |||         10          **
**        Nick2       |||          9          **
**        Nick3       |||          6          **
**        Nick4       |||         10          **
************************************************ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:47:50.850

可能有一种更有效的方法，但如果我理解正确，这将有效：

```
SELECT SUM(cnt), nick FROM
(SELECT count(*) cnt, e.nick FROM entries e 
  LEFT JOIN magnets m ON (e.id=m.eid AND e.nick=m.nick) 
  WHERE eid IS NULL GROUP BY e.nick
UNION ALL
  SELECT count(*) cnt, nick FROM magnets m GROUP BY nick) u 
GROUP BY nick 
```

# php - 如何在 MYSQL 中制作用户隐私表

> ID：14786576
> 
> 赞同：0
> 
> 时间：2013-02-09T09:12:53.630
> 
> 标签：php, mysql, sql

我正在一个社交网站上工作，我想在其中创建群组、活动和朋友列表。我想要他的朋友的用户隐私，如下所示：

**1.用户可以选择可以查看个人信息或不能查看个人信息的好友。2.用户可以管理谁可以看到他的事件和组，谁不能。**

我已经为我在下面粘贴的相同设计了一个表结构：

1.  用户位置 ID
2.  用户身份
3.  Allow_friends（以逗号分隔的 ID）
4.  Deny_friends（以逗号分隔的 ID）
5.  Allow_groups（以逗号分隔的 ID）
6.  Deny_groups（以逗号分隔的 ID）
7.  Allow_search（州章、市）
8.  朋友（对某些人可见，对某些人隐藏）（如果为 0，则我从 allow_friends 获取朋友 ID，否则为 Deny_friends）
9.  组（对某些人可见，对某些人隐藏）（如果为 0，则我正在从 allow_groups 获取朋友 ID，否则为 Deny_groups）
10.  Privacy_for_type
11.  Privacy_for_name

是否应该有任何其他有效的结构，并且可以最大限度地减少数据库命中并且不会使数据库变得密集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:58:34.470

如果你要设计数据库表，你可能想阅读规范化： [http ://en.wikipedia.org/wiki/Database_normalization](http://en.wikipedia.org/wiki/Database_normalization)

存储用逗号分隔的 id 使得更新这些记录和防止重复变得困难。我建议您将允许和拒绝列拆分为单独的相关表。这不会使数据库变得更加密集，因为您仍然只需要一个查询，这只是意味着您可能必须有一个带有连接的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:04:14.803

我建议使用两个（或三个）表，将用户 + 组和权限分开。

用户/组表可以包含用户/组的特定（和隔离）信息（因此用户的 # 1 和 2），然后您可以为“类型”或“类别”添加一个字段，说明它是否是用户或组。如果您为用户和组存储的信息足够不同，您可以为每个单独的表。

权限表可以包含任何权限，包括列表中的#'s 4-9（我真的不知道 10/11 的上下文。）该表还可以用于管理组成员身份。以下是如何构建权限表的示例：

*   **permid** : 任意唯一主键 auto_increm 列
*   **asset_cat**：资产所属的类别（或表名）
*   **asset_id** : 权限描述的用户标识、组标识等
*   **uid** : 正在寻求许可的用户
*   **许可**: uid 为asset_id 寻求的许可
*   **value**：该权限的值

一些示例条目：

```
//Same as listing 1338 in user 1337's Allow_Friends Field
1002, 'user', '1337', '1338', 'Allow_Friends', 'True'

//Lists 1337 as a member in group # 43
1003, 'group', '43', '1337', 'Member', 'True' 
```

这些只是帮助您入门的一些示例。让我知道这是否有帮助，或者如果您需要我澄清任何事情:)

# java - 如何在java中显示数组中的元素

> ID：14786580
> 
> 赞同：0
> 
> 时间：2013-02-09T09:13:22.613
> 
> 标签：java

以下是我尝试过的代码

```
import java.lang.String.*;
import java.io.*;

public class Main {
public static void main(String[] args) {
String [][] array1 = new String[][] {
    {"One"},
    {"One", "Two", "Three"},
    {"One"," Four"," Five"},
    {"One"," Four", "Six"," Seven"},
    {"Seven", "Eight"," One"},
    {"One"},
    {"One"," Nine"},
    {"One", "Nine"," Seven"},
    {"One"," Nine"}
};
for (int row1=0;row1<=array1.length;row1++){
for  ( int cols=1 ;cols<array1[row1].length ;cols++){
System.out.println(array1[0][0] +" "+ array1[row1][cols]);
}
}
}
} 
```

我想将元素显示为

```
One
One Two
One Three
One Four
One Five
One Four
One Six
One Seven
Seven Eight
Seven One
One
One Nine and so on till the end of the array. 
```

输出是：

```
One Two
One Three
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 9
One  Four
One  Five
One  Four
        at javaapplication12.Main.main(Main.java:45)
One Six
One  Seven
One Eight
One  One
One  Nine
One Nine
One  Seven
One  Nine
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

请建议我应该怎么做才能获得首选输出..任何帮助将不胜感激...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:23:05.480

试试下面的代码

```
for (String[] tmpArray: array1) {
        if(tmpArray.length == 1)
        { 
            System.out.println(tmpArray[0]);
            continue;
        }
        for (int i = 1; i < tmpArray.length; i++)  {
            System.out.println(tmpArray[0] + " " + tmpArray[i]);
        }
    } 
```

# mysql - 按带有索引的文本字段排序 - 使用文件排序

> ID：14786590
> 
> 赞同：-1
> 
> 时间：2013-02-09T09:14:27.857
> 
> 标签：mysql

我正在尝试按索引排序并使用索引，但它似乎仍在使用文件排序

桌子

```
CREATE TABLE `teachers` (
`id` int(10) unsigned NOT NULL,
`name` VARCHAR(10) NOT NULL,
`lastName` tinytext NOT NULL,
KEY `lastName` (lastName(10))
) 
```

询问

```
mysql> EXPLAIN SELECT name,lastName FROM teachers ORDER BY lastName DESC;
+----+-------------+----------+------+---------------+------+---------+------+------+----------------+
| id | select_type | table    | type | possible_keys | key  | key_len | ref  | rows | Extra          |
+----+-------------+----------+------+---------------+------+---------+------+------+----------------+
|  1 | SIMPLE      | teachers | ALL  | NULL          | NULL | NULL    | NULL | 1546 | Using filesort |
+----+-------------+----------+------+---------------+------+---------+------+------+----------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:46:47.417

您需要创建一个覆盖索引`last name, name`

```
CREATE TABLE `teachers` (
  `id` int(10) unsigned NOT NULL,
  `name` varchar(10) NOT NULL,
  `lastName` varchar(255) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `last_first` (`lastName`,`name`)
) 
```

现在那个查询

```
EXPLAIN SELECT `name`, lastName FROM teachers ORDER BY lastName DESC; 
```

产生以下结果

```
+----+-------------+----------+-------+---------------+------------+---------+------+------+-------------+
| id | select_type | table    | type  | possible_keys | key        | key_len | ref  | rows | Extra       |
+----+-------------+----------+-------+---------------+------------+---------+------+------+-------------+
|  1 | SIMPLE      | teachers | index | NULL          | last_first | 269     | NULL |    1 | Using index |
+----+-------------+----------+-------+---------------+------------+---------+------+------+-------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-23T11:38:12.610

您的问题在于键定义：**KEY `lastName`(lastName(10))**

特别是您在这里定义了一个 KEY 长度

您只索引在 ORDER BY 子句中命名**的列的前缀。**在这种情况下，索引不能用于完全解析排序顺序。例如，如果您有一个 CHAR(20) 列，但仅索引前 10 个字节，则索引无法区分超过第 10 个字节的值，**因此需要**进行文件排序。

[证明链接](http://dev.mysql.com/doc/refman/5.7/en/order-by-optimization.html)

您可以编写**KEY `lastName`(lastName)**，它会根据您的需要工作。

# iphone - 如何制作自定义 UIButton，使其具有不规则的曲线，如岩石、石头、树木……等？

> ID：14786591
> 
> 赞同：0
> 
> 时间：2013-02-09T09:14:33.363
> 
> 标签：iphone, ios, ipad, uibutton, custom-controls

我想制作一个按钮，使其具有石头/火箭的形状（即不规则形状不是矩形，正方形......等），我想让它也突出显示/以相同的形状加边框，我尝试了`UIButtonTypeCustom`但是它没有给我我想要的东西..所以任何人都有任何帮助或想法，不要吝啬。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:34:52.643

使用`UIButtonTypeCustom`但也为按钮的外观添加您的自定义资产。通常，您会将 UIButton 的背景图像设置为按钮的每种状态（正常、突出显示、禁用……）所需的图像（岩石、火箭等）。

只需在 Xcode 项目中添加图像，然后直接在 XIB 中设置 UIButton 的每个状态的背景图像（使用右侧的 Object Inspector 面板），或通过代码使用该`setBackgroundImage:forState:`方法。

# java - 在 JComboBOX 中选择项目时无法将文本设置为 JLabel

> ID：14786598
> 
> 赞同：2
> 
> 时间：2013-02-09T09:15:47.773
> 
> 标签：java, swing, events, user-interface

此代码向我显示语法错误（“{”除外），但我认为还有其他问题。

```
 public class CircleController extends JPanel {
   private JComboBox product1=new JComboBox(Application.listArray);
   private JLabel jlb1=new JLabel();
   //..........some fields more
   // constructor....
 public CircleController() {

  // Panel to group labels
JPanel panel1 = new JPanel();
//..........some labels....
//another panel
JPanel panel2 = new JPanel();
panel2.setLayout(new GridLayout(4,4,20,20 ));
panel2.add(product1);
panel2.add(jlb1); 
```

和部分代码有错误

```
 //product1 is combobox, jlbt is label wich I want to set when I selected item from  combobox

    product1.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent e)  { // in this line shows me an error

        (Product name:Application.manu) {
             if ((String)product1.getSelectedItem()==name.getName()){
                 String price1=Double.toString(name.getPrice());
                jlb1.setText(price1);
             }
        }

    if (model != null){
        model.setProduct((String)product1.getSelectedItem());}}

}); 
```

程序在这段代码上运行良好

```
 product1.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent e) { 

    if (model != null){
        model.setProduct((String)product1.getSelectedItem());}}

}); 
```

但是当我添加这个语句时（这个语句被选中并且很好）

```
 (Product name:Application.manu) {
             if ((String)product1.getSelectedItem()==name.getName()){
                 String price1=Double.toString(name.getPrice());
                jlb1.setText(price1);
             }
        } 
```

内部`product1.addItemListener(new ItemListener() {....`程序显示错误

我必须添加另一个`ItemListener`来设置标签吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:23:20.570

编译错误实际上与这一行有关：

```
(Product name:Application.manu) { 
```

它看起来像一个 foreach，所以它应该是：

```
for (Product name:Application.manu) { 
```

# ruby - 为什么 `rescue` 默认不能捕获 `StandardError` 以外的异常类？

> ID：14786602
> 
> 赞同：2
> 
> 时间：2013-02-09T09:16:17.470
> 
> 标签：ruby, exception

为什么 Ruby 被设计为只`StandardError`隐式处理异常`rescue`？对于其他异常，为什么我们需要明确地将它们与`rescue`?

```
begin
  #codes here which may generates exceptions
rescue
  #codes to handle some thing which really needed to be done when exceptions there
end 
```

谁能帮我理解它的核心？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:23:11.703

[我从这里](http://rubylearning.com/satishtalim/ruby_exceptions.html)引用：

> 上图显示大多数子类扩展了一个称为 StandardError 的类。这些是典型的 Ruby 程序试图处理的“正常”异常。其他异常代表较低级别、更严重或不太可恢复的情况，普通的 Ruby 程序通常不会尝试处理它们。

希望这能回答你的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:28:12.227

当您没有明确给出类型时，默认行为的原因`rescue StandardError`是您通常不想在程序中处理非标准错误，至少在没有明确提及它们的情况下不会。几个典型的非标准错误异常是：

```
LoadError
NotImplementedError
SyntaxError 
```

通常，您想了解程序中缺少的脚本文件、代码中未实现的方法和语法错误，而不是在异常代码中意外处理/忽略它们。

您还可以（不推荐）使用替代语法捕获*任何异常*

```
rescue Exception => e 
```

# php - iOS - PHP 匹配 UTF-8 编码

> ID：14786611
> 
> 赞同：1
> 
> 时间：2013-02-09T09:17:03.670
> 
> 标签：php, ios, objective-c, encoding, hash

我正在玩 iPhone 上的请求签名。我有一个简单的 PHP 脚本正在运行，它将根据标头中的签名验证传入的 JSON 数据（总而言之，它与两条腿的 OAuth 非常相似）。

以下 Obj-C 代码生成签名：

```
const char *cKey = [kConsumerSecret cStringUsingEncoding:NSUTF8StringEncoding];
const char *cData = [payload cStringUsingEncoding:NSUTF8StringEncoding];

NSLog(@"Payload: %s", cData);

unsigned char cHMAC[CC_SHA256_DIGEST_LENGTH];

CCHmac(kCCHmacAlgSHA256, cKey, strlen(cKey), cData, strlen(cData), cHMAC);
NSData *hmac = [[NSData alloc] initWithBytes:cHMAC length:sizeof(cHMAC)];
NSString *signature = [hmac base64EncodedString]; 
```

验证 PHP 代码如下所示：

```
$originalPayload = '{"name":"Ben’s iPhone"}'; // The message received from iOS
$hash = hash_hmac("sha256", $originalPayload, "Secret Key", TRUE);
$signature = strtr(base64_encode($hash), array('=' => '', '+' => '-', '/' => '_')); 
```

使用 ASCII 字符时，这些函数可以正常工作。但是当它们包含 UTF-8 字符时，iOS 会根据以下内容计算签名：

```
Ben‚Äôs iPhone 
```

虽然 PHP 计算它基于：

```
Ben\u2019s iPhone 
```

使签名无效。我尝试了多种方法，但都没有产生任何结果。有谁知道如何解决这个问题？

备注：是的，我可以简单地使用 OAuth，但我只是对如何自己实现它感到好奇。

**更新：**我已将问题追踪到代码中的一部分，该部分修改了 PHP 代码中已解析的 JSON 数组。为了散列但不包含在正文中，我添加了包含 UTC 时间戳的临时索引“时间”。对原始数组的修改使 PHP 改变了字符表示（转义 UTF-8 字符）。只需附加时间戳即可。

尽管如此，这些功能应该产生相同的结果，不是吗？

# ruby-on-rails - 定义自定义命名路由

> ID：14786615
> 
> 赞同：0
> 
> 时间：2013-02-09T09:17:33.530
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何定义路由，以获得以下结果：

```
 new_ad GET    /ads/new/:type(.:format)        ads#new
    ads POST   /ads(.:format)                  ads#create
edit_ad GET    /ads/:id/edit(.:format)         ads#edit
     ad GET    /ads/:id(.:format)              ads#show
        PUT    /ads/:id(.:format)              ads#update
        DELETE /ads/:id(.:format)              ads#destroy 
```

一般来说，我需要在新路径中指定类型参数，并且能够像这样使用路径助手：

```
new_ad_path("somytype") # -> ads/new/somytype -> ads#new -> params[:type] = "somytype" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:55:14.930

要传入参数，您将执行以下操作：

```
new_ad_path(type: "sometype") 
```

这将导致：

```
/ads/new?type=sometype 
```

然后在控制器中，您可以检查参数类型并使用它做任何需要的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T11:41:58.617

在你的 routes.rb

`get '/ads/new/:type' => 'ads#new', as: :new_ad`

@mind.blank 的解决方案也可以正常工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T11:46:57.123

您可以使用以下方法定义这些路由：

```
resources :ads, except: [:index, :new] do
  get '/ads/new/:type', on: :collection, as: :new_ad
end 
```

# android - 如何解析 textview 字体中的字符串值？

> ID：14786616
> 
> 赞同：0
> 
> 时间：2013-02-09T09:17:42.203
> 
> 标签：android, textview, typeface

我创建了简单的文本视图应用程序。它工作正常，我需要在文本视图中解析字符串值。因为我有一个 XML 文件，如果我读取该空标签，我的 XML 文件包含一些空标签我需要在我的文本视图中使用粗体视图 例如：这是我的标签`<Strong> </Strong>`如果我读到此标签，我希望在我的文本视图中添加粗体视图，所以我正在尝试在我的文本视图中添加粗体视图。

xml文件：

```
 <text>
<![CDATA[<p style="text-align: center;">
<span style="color:#FFFFFF;">
<strong>
<span style="font-size:30px;">
<span style="font-family:georgia,serif;">
<span style="color: rgb(0, 128, 128);">
welcome </span>
</span>
</span>

</strong>
</span></p>
]]>
                </text> 
```

代码 ：

```
 NodeList Bold_value = tt.getElementsByTagName("strong");

            if (Bold_value.getLength() > 0) {
                //Style();
                bod = "Typeface.BOLD";
} 
```

尝试在文本视图中添加粗体视图：

```
TextView txt = (TextView)findViewById(R.id.sample);

        txt.setBackgroundColor(Color.parseColor(color));

        txt.setTypeface(null, bod); 
```

此行正在尝试解析该值：

```
txt.setTypeface(null, bod); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:28:07.297

`setTypeFace`需要一个`int`as 参数（不是字符串）。

所以你可以这样做：

```
txt.setTypeFace(txt.getTypeface(),Typeface.BOLD); 
```

或者，作为替代方案：

```
int bod = Typeface.NORMAL;
if (Bold_value.getLength() > 0) {
            //Style();
            bod = Typeface.BOLD;
}
txt.setTypeFace(txt.getTypeface(),bod); 
```

（并保留当前字体而不是传递 null）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:28:20.620

您的数据看起来很像 html，您可以使用：

```
myTextView.setText(Html.fromHtml(<html string>)) 
```

# ios - 如何为 AVWriter 写入设置 CMSampleBuffer 的时间戳

> ID：14786619
> 
> 赞同：10
> 
> 时间：2013-02-09T09:18:05.443
> 
> 标签：ios, avfoundation, audio-recording, cmsamplebufferref, core-media

我正在使用 AVFoundation 来捕获和录制音频。有些问题我不是很明白。

基本上我想从 AVCaptureSession 捕获音频并使用 AVWriter 编写它，但是我需要对从 AVCaptureSession 获得的 CMSampleBuffer 的时间戳进行一些转换。我阅读了 CMSampleBuffer 的文档，我看到了两个不同的时间戳术语：“演示时间戳”和“输出演示时间戳”。两者有什么不同？

假设我从 AVCaptureSession 获得了一个 CMSampleBuffer（用于音频）实例，并且我想使用 AVWriter 将其写入文件，我应该使用什么函数将 CMTime“注入”到缓冲区以便设置它的呈现时间戳结果文件？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-02T06:06:17.803

来自此处的示例代码块：[http](http://www.gdcl.co.uk/2013/02/20/iPhone-Pause.html) : //www.gdcl.co.uk/2013/02/20/iPhone-Pause.html CMSampleBufferRef 示例 - 是您的 sampleBuffer，CMSampleBufferRef 是您的输出。NewTimeStamp 是您的时间戳。

```
CMItemCount count;
CMTime newTimeStamp = CMTimeMake(YOURTIME_GOES_HERE);
CMSampleBufferGetSampleTimingInfoArray(sample, 0, nil, &count);
CMSampleTimingInfo* pInfo = malloc(sizeof(CMSampleTimingInfo) * count);
CMSampleBufferGetSampleTimingInfoArray(sample, count, pInfo, &count);
for (CMItemCount i = 0; i < count; i++)
{
    pInfo[i].decodeTimeStamp = newTimeStamp; // kCMTimeInvalid if in sequence
    pInfo[i].presentationTimeStamp = newTimeStamp;

}
CMSampleBufferRef sout;
CMSampleBufferCreateCopyWithNewTiming(kCFAllocatorDefault, sample, count, pInfo, &sout);
free(pInfo); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-09T17:08:13.923

使用 CMSampleBufferGetPresentationTimeStamp，即缓冲区被捕获的时间，应在回放时“呈现”以保持同步。引用 WWDC 2012 的第 520 场会议：“演示时间是麦克风拾取缓冲区中第一个样本的时间”。

如果你启动 AVWriter

```
[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:CMSampleBufferGetPresentationTimeStamp(sampleBuffer)]; 
```

然后附加样本

```
if(videoWriterInput.readyForMoreMediaData) [videoWriterInput appendSampleBuffer:sampleBuffer]; 
```

完成视频中的帧将与 CMSampleBufferGetPresentationTimeStamp 一致（我已经检查过）。如果要修改添加样本的时间，则必须使用 AVAssetWriterInputPixelBufferAdaptor

# batch-file - 使用 %1 进行拖放的批处理文件复制

> ID：14786623
> 
> 赞同：22
> 
> 时间：2013-02-09T09:18:53.663
> 
> 标签：batch-file, parameters, path, drag-and-drop, copy

我试图制作一个拖放批处理文件。

我有一个文件存在但批处理文件找不到它的问题...

我想将`.png`文件（如`pict_2013020808172137243.png`）复制到另一个文件夹并重命名它。

路径中有符号`_`和空格，我也不知道如何进行多次拖放以实现相同的功能（重命名并添加到`.zip`）。

我试过这个但没有结果:(

```
@ECHO OFF
ECHO %1
COPY "%1" "%CD%\test\" /Y /S 
REN "%CD%\mob\*.png" "%CD%\test\test.png"
7za u -tzip "%appdata%\.virto\pack.zip" "test" -r 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-02-09T11:29:44.367

批处理文件的拖放操作很糟糕。
如果存在空格，则引用名称，但如果找到特殊字符则不引用，例如`&,;^`

对于仅文件名中的空格，您只需稍微更改代码即可。

```
@ECHO OFF
ECHO "%~1"
COPY "%~1" "%CD%\test\" /Y /S 
MOVE "%CD%\mob\*.png" "%CD%\test\test.png"
7za u -tzip "%appdata%\.virto\pack.zip" "test" -r 
```

`%~1`始终扩展为未引用的版本，因此始终可以以安全的方式引用它们。

```
"c:\Docs and sets" -> %~1 -> c:\Docs and sets -> "%~1" -> "c:\Docs and sets"
c:\Programs -> %~1 -> c:\Programs -> "%~1" -> "c:\Programs" 
```

有关更多详细信息，请阅读[多个文件的拖放批处理文件？](https://stackoverflow.com/a/5192427/463115)

# ruby-on-rails - 捆绑更新失败：封送数据太短

> ID：14786630
> 
> 赞同：9
> 
> 时间：2013-02-09T09:19:45.347
> 
> 标签：ruby-on-rails, rubygems

```
$ bundle update
Fetching gem metadata from http://rubygems.org/..Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/fetcher.rb:168:in `load': marshal data too short (ArgumentError)
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/fetcher.rb:168:in `fetch_dependency_remote_specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/fetcher.rb:125:in `fetch_remote_specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/fetcher.rb:128:in `fetch_remote_specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/fetcher.rb:73:in `specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/source.rb:234:in `block in remote_specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/source.rb:232:in `each'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/source.rb:232:in `remote_specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/source.rb:165:in `fetch_specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/source.rb:70:in `specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:191:in `block (2 levels) in index'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:188:in `each'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:188:in `block in index'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/index.rb:9:in `build'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:184:in `index'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:178:in `resolve'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:113:in `specs'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/definition.rb:108:in `resolve_remotely!'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/installer.rb:81:in `run'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/installer.rb:14:in `install'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/cli.rb:291:in `update'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/task.rb:27:in `run'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/invocation.rb:120:in `invoke_task'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/vendor/thor.rb:275:in `dispatch'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/vendor/thor/base.rb:408:in `start'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/bin/bundle:14:in `block in <top (required)>'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/lib/bundler/friendly_errors.rb:4:in `with_friendly_errors'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/gems/bundler-1.2.3/bin/bundle:14:in `<top (required)>'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/bin/bundle:19:in `load'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/bin/bundle:19:in `<main>'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/macbook/.rvm/gems/ruby-1.9.3-p374@global/bin/ruby_noexec_wrapper:14:in `<main>' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-01T21:59:41.850

尝试在 Gemfile 中从 HTTP 更改为 HTTPS：

改变：

```
source 'http://rubygems.org' 
```

到：

```
source 'https://rubygems.org' 
```

根据 Hacker News 的这篇文章，[Rubygems.org 遭到入侵](https://news.ycombinator.com/item?id=5139583)。更多信息： [Gemfile 中 ruby​​gems.org 的](https://github.com/scholarslab/prism/issues/137)[Marshal data too short 错误](https://github.com/carlhuda/bundler/issues/2015)和https？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T09:19:45.347

```
$ gem list

*** LOCAL GEMS ***

bundler (1.2.3)
....
$ sudo gem install bundler
Password:
Fetching: bundler-1.2.3.gem (100%)
Successfully installed bundler-1.2.3
1 gem installed
$ bundle update
Fetching gem metadata from http://rubygems.org/.........
Installing.....
.... .... .....
Your bundle is updated! 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-30T18:52:41.317

我有同样的错误（在rvm下）。之后它消失了：

```
rvm repair all 
```

希望这可以帮助。

# objective-c - 如何更改 UITextView 内的文本位置

> ID：14786632
> 
> 赞同：1
> 
> 时间：2013-02-09T09:20:13.820
> 
> 标签：objective-c, xcode

是否可以更改 UITextView 中显示文本的位置。例如，我需要文本出现在 UITextView 的底部附近。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:58:32.800

我不知道我是对还是错？？？但是你需要使用类的`contentOffset`属性`UITextView`来完成这个

要获取更多信息，[请参阅此文档。](http://imagineric.ericd.net/2011/03/10/ios-vertical-aligning-text-in-a-uitextview/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:00:58.337

为什么不使用其他视图并将 UITextView 放在上面呢？所以你可以决定把它放在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T11:08:49.160

也许改变界限，让文本显示在底部:)

# php - 将应用程序/游戏分数存储在 facebook 等数据库中

> ID：14786639
> 
> 赞同：0
> 
> 时间：2013-02-09T09:21:25.367
> 
> 标签：php, mysql, facebook

我只是在 facebook 上玩直升机游戏，我意识到他们正在将所有分数存储在数据库中，并且他们在邀请其他朋友参加该游戏方面做得很好。他们会在你的个人资料上发布，它会说用户 xyz 刚刚越过 userabc 再次挑战他，它会显示整个 facebook 的最高分。

这是我在facebook上玩的链接

```
 https://apps.facebook.com/mg-copter 
```

同样的游戏也可以在数百个网站上使用，但它们无法将任何分数存储到数据库中。我已将直升机游戏集成到我的网站，并有兴趣存储所有分数等，以便以后我可以像 facebook 一样对这些分数进行 n 次操作。如果有人知道如何将这些分数存储在我的 php-mysql 网站中这将是一个很大的帮助..

同一个游戏在其他网站

```
 http://dagobah.net/flash/copter.swf 
```

# c# - 在gridview更新编码我得到以下错误？

> ID：14786642
> 
> 赞同：0
> 
> 时间：2013-02-09T09:21:34.143
> 
> 标签：c#, asp.net

这是我的更新事件代码：

```
protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    if (con.State == ConnectionState.Closed)
    {
        con.Open();
    }

    GridViewRow row = (GridViewRow)GridView1.Rows[e.RowIndex];
    int Label11 =Convert.ToInt32(((Label)row.FindControl("Label11")).Text);// this is the line m getting error in
    int Label12 = Convert.ToInt32(((Label)row.FindControl("Label12")).Text);
    int Label13 = Convert.ToInt32(((Label)row.FindControl("Label13")).Text);
    TextBox TextBox4 = (TextBox)row.FindControl("TextBox4");
    TextBox TextBox5 = (TextBox)row.FindControl("TextBox5");
    TextBox TextBox6 = (TextBox)row.FindControl("TextBox6");
    TextBox TextBox7 = (TextBox)row.FindControl("TextBox7");
    TextBox TextBox8 = (TextBox)row.FindControl("TextBox8");
    TextBox TextBox9 = (TextBox)row.FindControl("TextBox9");
    TextBox TextBox10 = (TextBox)row.FindControl("TextBox10");
    GridView1.EditIndex = -1;
    SqlCommand cmd = new SqlCommand("update monthly set date='" + TextBox4.Text + "',salary='" + TextBox5.Text + "',ta='" + TextBox6.Text + "',contigency='" + TextBox7.Text + "',nrc='" + TextBox8.Text + "',institcharges='" + TextBox9.Text + "',others='" + TextBox10.Text + "' where autoid='" + Label12 + "'", con);
    cmd.ExecuteNonQuery();
    cmd.Dispose();
    con.Close();
    grid_show(); 
```

我得到的错误是 FormatException 未处理 bu 用户代码输入字符串的格式不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:47:31.890

使用适用于 Primitive 数据类型的 TryParse 方法。解释 SQL 注入和 ORM 框架超出了这个答案的范围。

[http://social.msdn.microsoft.com/Search/en-US?query=TryParse&ac=8](http://social.msdn.microsoft.com/Search/en-US?query=TryParse&ac=8)

```
void Main()
{
    //TryParse function signature
    //bool TryParse(String, Int32) 
    //Above method is for Integer. There are similar methods for all primitive data types

    //TryParse takes String value as an input and parameter as reference

    //Integer example
    int result;
    bool success = int.TryParse("10", out result);
    if(success) Console.WriteLine("Good value {0}", result);

    //DateTime example
    DateTime dtResult;
    success = DateTime.TryParse("01/10/2013", out dtResult);
    if(success) Console.WriteLine("Good date {0}", dtResult);
} 
```

# c# - 从列表框中填充gridview，使前几行成为gridview中的列

> ID：14786644
> 
> 赞同：0
> 
> 时间：2013-02-09T09:21:50.817
> 
> 标签：c#, asp.net, sql, oledb

```
protected void Button1_Click(object sender, EventArgs e)
{
    string sqlstring;
    OleDbConnection connection = new OleDbConnection("Provider=MSDAORA;Data Source=solaris;Password=medical;User ID=medical");
    sqlstring = "select emp_name,decode(sex,null,null,'Self')rel,decode(dob,null,'Ad',floor(months_between(sysdate,dob)/12))age,decode(f_elg,'Y',f_name,null) f_name,decode(f_elg,'Y','Father',null) f_rel,decode(f_dob,null,'Ad',floor(months_between(sysdate,f_dob)/12)) f_age,decode(m_elg,'Y',m_name,null) m_name,decode(m_elg,'Y','Mother',null) m_rel,decode(m_dob,null,'Ad',floor(months_between(sysdate,m_dob)/12)) m_age,decode(s_elg,'Y',s_name,null) s_name,decode(s_elg,'Y',decode(s_sex,'M','Husband','F','Wife'),null) s_rel,decode(s_dob,null,'Ad',floor(months_between(sysdate,s_dob)/12)) s_age,decode(dep_elg1,'Y',dep_name1,null) dep_name1,decode(dep_sex1,'M','Son','F','Daughter',null) dep_rel1,decode(dep_dob1,null,null,floor(months_between(sysdate,dep_dob1)/12)) dep_age1,decode(dep_elg2,'Y',dep_name2,null) dep_name2,decode(dep_sex2,'M','Son','F','Daughter',null) dep_rel2,decode(dep_dob2,null,null,floor(months_between(sysdate,dep_dob2)/12)) dep_age2,decode(dep_elg3,'Y',dep_name3,null) dep_name3,decode(dep_sex3,'M','Son','F','Daughter',null) dep_rel3,decode(dep_dob3,null,null,floor(months_between(sysdate,dep_dob3)/12)) dep_age3,decode(dep_elg4,'Y',dep_name4,null) dep_name4,decode(dep_sex4,'M','Son','F','Daughter',null) dep_rel4,decode(dep_dob4,null,null,floor(months_between(sysdate,dep_dob4)/12)) dep_age4,decode(dep_elg5,'Y',dep_name5,null) dep_name5,decode(dep_sex5,'M','Son','F','Daughter',null) dep_rel5,decode(dep_dob5,null,null,floor(months_between(sysdate,dep_dob5)/12)) dep_age5,decode(dep_elg6,'Y',dep_name6,null) dep_name6,decode(dep_sex6,'M','Son','F','Daughter',null) dep_rel6,decode(dep_dob6,null,null,floor(months_between(sysdate,dep_dob6)/12)) dep_age6 from employee_mas where emp_no='" + TextBox1.Text + "'";
    //sqlstring = "select COALESCE(emp_name,'') + ' ' + COALESCE(sex,'')as empinfo from employee_mas where emp_no='" + TextBox1.Text + "'";

    OleDbCommand comm = new OleDbCommand(sqlstring, connection);

    OleDbDataReader reader;

    connection.Open();

    reader = comm.ExecuteReader();
    if (reader.Read())
    {
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("emp_name")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("age")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("rel")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("f_name")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("f_age")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("f_rel")));

    } 

} 
```

这是我用来填充列表框的代码

现在我想要我的 gridview 有 3 列，例如：

```
Name     Age      Rel 
```

所以前 3 个值被插入到 gridview 的第一行，第二个 3 被插入到第二个中，依此类推。

帮助会很大。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T13:07:53.730

您可以使用 DataTable 来存储行，然后在读取所有记录后，将其绑定到 GridView：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string sqlstring;
    OleDbConnection connection = new OleDbConnection("Provider=MSDAORA;Data Source=solaris;Password=medical;User ID=medical");
    sqlstring = "select emp_name,decode(sex,null,null,'Self')rel,decode(dob,null,'Ad',floor(months_between(sysdate,dob)/12))age,decode(f_elg,'Y',f_name,null) f_name,decode(f_elg,'Y','Father',null) f_rel,decode(f_dob,null,'Ad',floor(months_between(sysdate,f_dob)/12)) f_age,decode(m_elg,'Y',m_name,null) m_name,decode(m_elg,'Y','Mother',null) m_rel,decode(m_dob,null,'Ad',floor(months_between(sysdate,m_dob)/12)) m_age,decode(s_elg,'Y',s_name,null) s_name,decode(s_elg,'Y',decode(s_sex,'M','Husband','F','Wife'),null) s_rel,decode(s_dob,null,'Ad',floor(months_between(sysdate,s_dob)/12)) s_age,decode(dep_elg1,'Y',dep_name1,null) dep_name1,decode(dep_sex1,'M','Son','F','Daughter',null) dep_rel1,decode(dep_dob1,null,null,floor(months_between(sysdate,dep_dob1)/12)) dep_age1,decode(dep_elg2,'Y',dep_name2,null) dep_name2,decode(dep_sex2,'M','Son','F','Daughter',null) dep_rel2,decode(dep_dob2,null,null,floor(months_between(sysdate,dep_dob2)/12)) dep_age2,decode(dep_elg3,'Y',dep_name3,null) dep_name3,decode(dep_sex3,'M','Son','F','Daughter',null) dep_rel3,decode(dep_dob3,null,null,floor(months_between(sysdate,dep_dob3)/12)) dep_age3,decode(dep_elg4,'Y',dep_name4,null) dep_name4,decode(dep_sex4,'M','Son','F','Daughter',null) dep_rel4,decode(dep_dob4,null,null,floor(months_between(sysdate,dep_dob4)/12)) dep_age4,decode(dep_elg5,'Y',dep_name5,null) dep_name5,decode(dep_sex5,'M','Son','F','Daughter',null) dep_rel5,decode(dep_dob5,null,null,floor(months_between(sysdate,dep_dob5)/12)) dep_age5,decode(dep_elg6,'Y',dep_name6,null) dep_name6,decode(dep_sex6,'M','Son','F','Daughter',null) dep_rel6,decode(dep_dob6,null,null,floor(months_between(sysdate,dep_dob6)/12)) dep_age6 from employee_mas where emp_no='" + TextBox1.Text + "'";
    //sqlstring = "select COALESCE(emp_name,'') + ' ' + COALESCE(sex,'')as empinfo from employee_mas where emp_no='" + TextBox1.Text + "'";

    OleDbCommand comm = new OleDbCommand(sqlstring, connection);

    OleDbDataReader reader;

    connection.Open();

    DataTable table = new DataTable();
    table.Columns.Add("Name");
    table.Columns.Add("Age");
    table.Columns.Add("Rel");

    reader = comm.ExecuteReader();
    if (reader.Read())
    {
        string name = reader.GetString(reader.GetOrdinal("emp_name"));
        string age = reader.GetString(reader.GetOrdinal("age"));
        string rel = reader.GetString(reader.GetOrdinal("rel"));

        ListBox1.Items.Add(name);
        ListBox1.Items.Add(age);
        ListBox1.Items.Add(rel);
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("f_name")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("f_age")));
        ListBox1.Items.Add(reader.GetString(reader.GetOrdinal("f_rel")));

        table.Rows.Add(name, age, rel);
    }

    GridView.DataSource = table;
    GridView.DataBind();
} 
```

# jquery - jquery队列动态添加动画

> ID：14786646
> 
> 赞同：0
> 
> 时间：2013-02-09T09:22:01.343
> 
> 标签：jquery, queue

这是我的标记

```
<div class="container">
  <div class="eachFloor">
    <input type="checkbox" />
    <div class="floor"></div>
  </div>
  <div class="eachFloor">
    <input type="checkbox" />
    <div class="floor"></div>
  </div>
  <div class="eachFloor">
    <input type="checkbox" />
    <div class="floor"></div>
  </div>
  <div class="eachFloor">
    <input type="checkbox" />
    <div class="floor"></div>
  </div>
  <div class="eachFloor">
    <input type="checkbox" />
    <div class="floor"></div>
  </div>
  <div class="elevator"></div>
</div> 
```

这是我的CSS

```
.container
{
width: 500px;
margin-left: 100px;
position:relative;
}

.floor
{
width: 400px;
background: #eee;
border-bottom: 1px solid black;
height: 110px;
}

.elevator
{
background: #000;
position: absolute;
bottom: 20px;
left: 20px;
right: 20px;
width: 360px;
height: 75px;
}

input[type="checkbox"]
{
float:right;
margin-left: 100px;
margin-top: 50px;
} 
```

所以如上所示，当我单击其中一个复选框时，我有一系列复选框，我应该设置动画（动画：顶部属性），并且 div.elevator 应该转到复选框所在的楼层，当我单击其中一个复选框时在动画运行时，我应该能够检查电梯是否已经通过当前楼层，如果它没有通过当前楼层，我应该在该特定楼层停止电梯大约一两秒钟，然后继续之前的动画。

假设电梯在五楼（底层），假设我点击 1 楼，然后当动画运行时，我点击 3 楼，如果电梯没有通过 3 楼（假设它在4 楼，当我单击复选框时）我应该能够在三楼停止动画：顶部大约一两秒钟，然后继续上一个动画到一楼（从三楼到电梯的当前位置）。

如果我像这样发出动画调用

```
$(".container").on("click", "input:checkbox", function (event) {
  $(".elevator").animate({
    top: $(this).parent().offset().top
  }, {
    duration: 6000
  });
}); 
```

那么到 3 楼的动画只会在它到达一楼后才会发生，所以它不会在中间停止（原因是动画在元素上排队）。但是重点来了，如果我正确地维护 fx 队列，就像单击 1 层复选框时我有动画：从顶部到 1 层然后单击 3 层时，我需要以某种方式神奇地移动级别3楼动画首先在队列中（如果楼层没有通过，然后将电梯停在那里大约一两秒），然后从3楼运行1楼动画。

我如何在 jquery 队列、clearQueue 和其他 jquery 方法中执行此操作？如果我也需要使用插件来暂停/恢复我的动画，我很好....任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:37:22.880

这就是你需要的

```
$(function(){
     $(".container").on("click","input:checkbox",function(event){
         var pos = $(this).next().position().top;
         var elPos =  $(".elevator").position().top;
         $(".elevator").animate({marginTop: pos-elPos },6000);
    });
}); 
```

[http://jsfiddle.net/vadXa/](http://jsfiddle.net/vadXa/)

# phpunit - 如何在phpUnit中的所有测试中传播setUp和tearDown？

> ID：14786649
> 
> 赞同：3
> 
> 时间：2013-02-09T09:22:20.250
> 
> 标签：phpunit

我有以下测试/文件夹：

```
测试/
    ClassOne.test.php
    ClassTwo.test.php
    ClassThree.test.php

```

我必须将以下内容`setUp()`和`tearDown()`方法复制到每个文件中：

```
    公共函数设置（）
    {
        $this->dbTestData();
    }

    公共函数拆解（）
    {
        $this->dbClear();
    }

    私有函数 dbTestData() {
        // 用一些条目填充数据库
        实体\AutocompleteValue::create(array('field_name' => 'testing1', 'entry_value' => 'Aisforapple'));
        实体\AutocompleteValue::create(array('field_name' => 'testing2', 'entry_value' => 'Bisforball'));
        实体\AutocompleteValue::create(array('field_name' => 'testing3', 'entry_value' => 'Cisforcat'));
        实体\AutocompleteValue::create(array('field_name' => 'testing4', 'entry_value' => 'Disfordog'));
    }

    私有函数 dbClear() {
        DB::table('autocomplete_values')->delete();
    }

```

我考虑编写一个单独的类，其中包含这些方法、`require()`每个测试文件中的该文件，并从该类扩展*而*不是`PHPUnit_Framework_Testcase`. 有没有更简单的解决方案？

我无法轻松访问`phpunit.xml`，因为我的编码框架的 CLI 工具（Laravel，artisan）处理它的创建。因此，如果有不涉及该文件的解决方案会更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:10:41.533

让步并创建基类。这是这种情况下的标准解决方案。它带来了其他优势，例如保存`static`您创建的断言扩展的好地方。

我什至都在努力想出一种替代方法，更不用说一种更容易的方法了。我所能建议的就是使用一个脚本来扫描每个测试文件并插入`setUp`，`tearDown`如果没有找到它们的话。但是（恕我直言）这是一个更复杂的解决方案，没有显着的好处。

# algorithm - 从一个数字数组生成一个新数组

> ID：14786650
> 
> 赞同：4
> 
> 时间：2013-02-09T09:22:41.927
> 
> 标签：algorithm

[我在Glassdoor](http://www.glassdoor.com/Interview/Generate-a-new-array-from-an-array-of-numbers-Start-from-the-beginning-Put-the-number-of-some-number-first-and-then-that-QTN_192467.htm)上发现了这个问题：

> 从一个数字数组生成一个新数组。从头开始。先输入某个数字的数字，然后再输入那个数字。例如，从数组 1, 1, 2, 3, 3, 1 你应该得到 2, 1, 1, 2, 2, 3, 1, 1 写一个程序来解决这个问题。

我不确定我是否明白，1、1、2、3、3、1 怎么会变成 2、1、1、2、2、3、1、1？我首先认为它们是数字的出现次数，然后是数字本身。但是从给定的示例中，似乎还需要其他东西。

这种转变是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:26:34.050

> 我首先认为它们是数字的出现次数，然后是数字本身。

你的第一个想法是正确的。

将第一个数组分解为：

```
1, 1, 
2, 
3, 3, 
1 
```

第二个是：

```
2, 1,
1, 2,
2, 3,
1, 1 
```

那么它应该更有意义。

示例实现：

```
#!/usr/bin/env python

import sys

array = map(int, sys.argv[1:])
print array

count = 0
current = array[0]
index = 1
output = []
for number in array:
    if current != number:
        output.append(count)
        output.append(current)
        current = number
        count = 0
    count += 1
output.append(count)
output.append(current)

print output 
```

演示：

```
> ./arrays.py 1 1 2 3 3 1   
[1, 1, 2, 3, 3, 1]
[2, 1, 1, 2, 2, 3, 1, 1] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T15:52:40.523

Haskell 版本……是的，就是这样。

```
import Data.List
countArray list = concat [[length l, fromIntegral (head l)] | l <- group list] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T09:31:21.987

你认为是正确的。它是不同元素出现的次数，然后是元素本身。

* * *

这是伪代码：

```
array1 = given input array
array2 = output array

int previous = array1[0];
int currentCount = 0;

for each entry x in array1 {
     if(x == previous) {   
           currentCount++;
      }
     else {
          array2.add(currentCount);
          array2.add(x);   
          //reset global variables for next elements       
          previous = x;
          currentCount = 0;
     }
} 
```

# java - 如何在 Eclipse RCP 中获得按钮按下效果？

> ID：14786652
> 
> 赞同：2
> 
> 时间：2013-02-09T09:22:43.377
> 
> 标签：java, eclipse-rcp

我想在 SWT 操作上实现这种效果（按下最右边的 2 个按钮），如 eclipse 控制台中所示：

![在此处输入图像描述](../Images/d552e6e9a903eb13b49336bc231c5e8b.png)

我有一个扩展类`org.eclipse.jface.action.Action`。它被添加到`org.eclipse.jface.action.IToolBarManager`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T11:02:14.950

我认为您需要使用[`IAction.AS_CHECK_BOX`](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/jface/action/IAction.html)样式：

> 动作样式常量（值 2）指示动作是复选框（或切换按钮）。

所以

```
class MyAction extends Action {
    public MyAction() {
        super(NAME, IAction.AS_CHECK_BOX);
    }

    ...
} 
```

# ruby-on-rails - Rails 如何在两列中显示数据

> ID：14786666
> 
> 赞同：0
> 
> 时间：2013-02-09T09:24:42.277
> 
> 标签：ruby-on-rails

我是 Ruby on Rails 的新手。如何在两列中显示产品？

当我写以下内容时，右列会显示相同的产品，但我想在左列显示一些，在右列显示一些。

```
#main_container  
.left_col

%div{"data-hook" => "___homepage_featured_products"}

%h3

   Featured Activities
 - @featured.each do |pr|
   - @product = pr
   %a.box{:href=>url_for(@product), :title=>"#{@product.name} | #{@product.location}"}
     - if @product.images[0]
       .img{:style=>"background-image: url('#{@product.images[0].attachment.url(:original)}')"}
       .details
         %h3
           = @product.name.truncate 20
         %p.infos
           = image_tag @product.activity_type.icon, :class=>"pictogram" rescue ''
           %span= @product.activity_type.name.titleize rescue ''
           \/
           %span.price= number_to_currency @product.price rescue ''
           \/
           = @product.location
           \/
           = @product.level
         %p
           = @product.description.truncate(120) rescue ''

.right_col 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:49:07.300

您可以将每个产品放入自己的 div 中，然后使用 CSS 将它们浮动到左侧，这样最多 2 个框会水平相邻出现。这将产生 2 列布局的效果。举个例子：

```
#main_container { width: 900px; }
.featured_product { width: 450px; float: left; } 
```

根据需要添加填充等。

或者，您可以在从数据库中检索数组后拆分数组并运行代码两次，一次在左列，一次在右列：

```
@left, @right = @featured.in_groups_of((@featured.count / 2.0).ceil, false) 
```

# c# - 自动完成框验证

> ID：14786668
> 
> 赞同：0
> 
> 时间：2013-02-09T09:25:03.963
> 
> 标签：c#, silverlight

我在 Silverlight 中有一个自动完成框，它绑定到一个集合。它工作正常。我只是想要它，以便用户不能输入任何不在集合中的值。

例如： Collection 包含一个值“Head”。如果用户输入 Headx 或其他内容，则应触发验证。

这个怎么做？

问候

阿伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T12:00:30.253

试试这个

```
<Sdk:AutoCompleteBox Grid.Column="3" Grid.Row="3" Height="18" Width="150" 
     IsTextCompletionEnabled="True" TabIndex="9" HorizontalAlignment="Left"

     Text="{Binding ElementName=ResEdit,Path=DataContext.SelectedDemoText,Mode=TwoWay}"
     ItemsSource="{Binding ElementName=ResEdit,Path=DataContext.DemoList,Mode=OneWay}"
     ItemTemplate="{StaticResource DemoTemplate}"
     ValueMemberPath="DemoCode" 
     LostFocus="AutoCompleteBox_LostFocus"
     Margin="0,0,21,0" Padding="0">
  </Sdk:AutoCompleteBox> 
```

您不应在自动完成中同时使用 SelectedText 和 SelectedItem 函数。这是 AutoCompleteBox 的一个错误.....更好的方法是在 GotFocus 和 LossFocus 上设置文本框和 AutoCompleteBox 的可见性。这种方式你会挑衅地解决你的问题

```
 private void DemoAutoComplete_LostFocus(object sender, RoutedEventArgs e)
            {
                DemoTextBox.Visibility = Visibility.Visible;
                DemoAutoComplete.Visibility = Visibility.Collapsed;
                DemoTextBox.Text = OCRAutoComplete.Text;

                ((DemoVM)this.DataContext).SelectedDemoText = DemoAutoComplete.Text;
            }

private void DemoTextBox_GotFocus(object sender, RoutedEventArgs e)
    {
        DemoAutoComplete.Text = OctTextBox.Text;
        DemoTextBox.Visibility = Visibility.Collapsed;
        DemoAutoComplete.Visibility = Visibility.Visible;
        DemoAutoComplete.Focus();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T05:41:34.093

我最近在这方面工作。我的问题是通过检查自动完成框的丢失焦点事件上的选定项属性来解决的。

```
private void autoCompleteBox1_LostFocus(object sender, RoutedEventArgs e)     
{     
     if (autoCompleteBox1.SelectedItem == null && !string.IsNullOrEmpty(autoCompleteBox1.Text))
      {
       MessageBox.Show("Please fill in the right value");
       autoCompleteBox1.Text = "";
       autoCompleteBox1.Focus();
        }
} 
```

问候

普里亚

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T14:13:59.623

你应该能够改变你的绑定来实现这一点。

默认情况下，文本属性通常会在控件失去焦点时更新绑定源。通过设置 Binding 以更新 PropertyChanged 上的源，您可以实现每次击键的验证。

您对 Text 属性的绑定看起来像这样

```
Text="{Binding MyProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
```

在您的属性设置器中，您可以在认为合适时抛出[ValidationException ，或者您可以实现其中一个验证接口（](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationexception%28v=vs.95%29.aspx) [INotifyDataErrorInfo](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifydataerrorinfo%28v=vs.95%29.aspx)或[IDataErrorInfo](http://msdn.microsoft.com/en-gb/library/system.componentmodel.idataerrorinfo%28v=vs.95%29.aspx)）并以这种方式处理它。

[本文是有关数据绑定复杂性的一个很好的信息来源](http://msdn.microsoft.com/en-us/library/cc278072%28v=vs.95%29.aspx)

# c++ - 重新定义派生类继承的内部函数以对基类产生影响

> ID：14786671
> 
> 赞同：2
> 
> 时间：2013-02-09T09:25:14.087
> 
> 标签：c++, inheritance

请看这段代码。它只是反映了我想做的基本概念：

```
#include <iostream>
using namespace std;

class Base
{
public:
    Base() 
    {
        /* Some code I want to reuse */
        Redefined(); 
    }
    virtual ~Base() {}
    void Redefined() { val = 10; }
    int val;
};

class Derived : public Base
{
public:
    Derived() : Base() {}
    ~Derived() {}
    void Redefined() { val = 25; }
};

int main()
{
    Base* check = new Derived();

    cout << check->val << endl;

    system("pause");
    return 0;
} 
```

我希望对象的`val`属性`check`是 25 而不是 10。

如您所见，我有两个课程。`Base`类构造函数具有一些复杂的功能，我希望`Derived`类也具有它的构造函数。如何更改派生函数`Redefined`，以便不必`Derived`完全重写构造函数（实际上只是复制粘贴整个基类构造函数代码并替换一行代码 -`Redefined`函数的更新版本）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:42:49.810

您不能以这种方式真正覆盖函数。通常你可以使用虚函数，但这在构造函数中不能按照你想要的方式工作。

更好的方法是将所需的值传递给`Base`构造函数：

```
class Base
{
public:
    Base(int init_val = 10) 
    {
        /* Some code I want to reuse */

        val = init_val;
    }
    virtual ~Base() {}

    int val;
};

class Derived : public Base
{
public:
    Derived() : Base(25) {}
    ~Derived() {}

}; 
```

这样，任何派生类都可以将其选择的值传递给基类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T13:48:54.373

基于以上评论：

我实际上认为正确的解决方案是拥有一个“接口”类型的基类（即具有纯虚函数的基类，而派生类实际上实现了正确的行为），然后让每个类处理构建自己的 DirectX缓冲区。您可能会发现您需要 2-3 个不同的派生类，它们以不同的方式构造缓冲区，然后从那些实际执行实际工作的类派生。我希望这是有道理的。

或者，您将向基类传递足够的参数，以便可以构造缓冲区。但我认为第一个建议是更好的选择。

# c++ - 为什么不通过文件读取简单字符？

> ID：14786673
> 
> 赞同：0
> 
> 时间：2013-02-09T09:25:44.450
> 
> 标签：c++, unicode, character

我正在从文件“☼”中读取一个字符，这个字符是通过按（ALT+15）在记事本中输入的，现在我必须在控制台上打印这个字符和值 15（这个字符的相应 ASCII 值）。问题是我得到一个 ASCII 值为 -2 的方框字符。为什么这不是财产工作？

```
#include <iostream>
#include <fstream>

using namespace std;
int main()
{
    ifstream myFile;
    myFile.open("input.txt");
    char inputA;
    myFile>>inputA;
    cout<<inputA<<endl;
    cout<<(int)inputA;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:37:17.483

☼ 是一个 unicode 字符。Unicode 字符有多种不同的编码，例如 UTF-8、UTF-16 和 UTF-32。然而，所有编码都需要一个以上的字节来表示字符☼。实际上，表示是：

```
UTF-8   0xE2 0x98 0xBC
UTF-16  0x263C
UTF-32  0x0000263C 
```

UTF-16 和 UTF-32 中的字节顺序取决于系统的字节顺序。

您正在尝试将字符读入单个`char`. 这只会提取字符的单个字节。我不知道你的 -2 是从哪里来的，但是当我在 UTF-8 编码的☼上尝试它时，我得到的值是 -30。这是因为有符号`char`的表示`0xE2`是-30。

如何正确读取字符也取决于编码。对于 UTF-8，您需要`char`为该字符读取一个 3 的数组。对于 UTF-16，可以`char16_t`用来读取一个字符。对于 UTF-32，有`char32_t`.

# ruby-on-rails - 不确定我的 rails 应用程序是否为 posrtgres db 正确配置

> ID：14786677
> 
> 赞同：0
> 
> 时间：2013-02-09T09:26:28.353
> 
> 标签：ruby-on-rails, database, postgresql, ruby-on-rails-3.2

**我的问题**：我已经设置了 Rails 应用程序的开发、测试环境以使用 postgresql 数据库。现在我如何验证它是否正常？

注意：我是 Rails 的初学者并使用数据库

**我做了什么来验证**

1.  我跟着[railcast](http://railscasts.com/episodes/342-migrating-to-postgresql)从默认 sqlite3 迁移到 postgresql。
2.  我启动了 rails 控制台并使用创建了一个用户

    User.create（名称：“Anil Bande”，电子邮件：“anil@gmail.com”，密码：“foobar”，password_confirmation：“foobar”）

3.  从输出来看，用户似乎已创建。为了验证我`$ User.all`在 rails 控制台上运行并且输出显示了我在步骤 (2) 中创建的对象

4.  现在我想从 postgresql 提示符中看到这一点。所以我做了`$psql sample_app_development`，出现了 psql 提示符。

5.  我`psql>> \d`在 psql 上做了一个列出数据库中所有表的操作。确实如此，并且我感兴趣的“用户”表也出现了。

6.  现在我做了一个`psql>> select * from users`，但没有结果。提示刚刚返回。

现在这是我的困惑。步骤（6）什么都没有显示。但在 Rails 控制台中，看起来用户已创建并保存在数据库中。(a) 为什么会这样？(b) 如何验证我为设置开发和测试环境所做的一切是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:36:08.897

我无法评论 Rails 部分，但为此：

> 现在我做了一个 psql>> select * from users ，但没有结果。提示刚刚返回。

你忘了用 a 结束语句`;`

当你完成一个语句的输入时，你需要告诉 psql，因为它允许一个语句跨越多行。请注意提示如何从`psql=>`变为`psql->`以指示 psql 正在等待更多。

所以如果你输入

```
psql=> select * from users; 
```

你应该没事。

（要明确一点：*psql*作为提示的一部分只是一个示例。真正的提示将包含您连接到的数据库的名称。要查找的重要内容是`=>`and `->`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:30:34.047

您是否已在控制台中在数据库上运行迁移？

```
rake db:migrate 
```

如果是这样，还要确保您的数据库配置 yml 文件具有正确的信息 ->

为您的数据库列出的用户、密码、本地主机等，例如

```
development:
  adapter: postgresql
  encoding: unicode
  database: pg2_development
  pool: 5
  username: postgres
  password: root
  host: localhost 
```

--> 运行 rails server ，然后转到 localhost:3000/user 来检查结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T04:39:38.550

如果您刚刚开始使用 postgres，您可能会发现使用[pgadmin 之类的 GUI 界面可以更好地为您的普通管理员提供服务](http://Www.pgadmin.org)

例如，它会告诉你结尾 ';' 失踪。它仍然允许您直接进入 psgl 命令行。

# iphone - 通过触摸移动图像不起作用

> ID：14786679
> 
> 赞同：0
> 
> 时间：2013-02-09T09:26:39.467
> 
> 标签：iphone, ios, objective-c, ipad

我在我的 iPad 应用程序中使用了两个名为“ATrackThumb”和“BTrackThumb”的图像，通过用户的触摸来移动。为此，我正在使用一些方法。但是图像移动不起作用。方法是：

```
#pragma mark responding to touch events

- (void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event{
   for (UITouch *touch in touches) {
     CGPoint t = [touch locationInView:touch.view];
     if(t.x > (ATrackThumb.center.x-25) && t.x < (ATrackThumb.center.x+25) && t.y > (ATrackThumb.center.y-25) && t.y < (ATrackThumb.center.y+25)){
        ASliderLastTouch = touch;
     }
     if(t.x>(BTrackThumb.center.x-25) && t.x < (BTrackThumb.center.x+25) && t.y > (BTrackThumb.center.y-25) && t.y < (BTrackThumb.center.y+25)){
        BSliderLastTouch = touch;
     }
   }
}

- (void)touchesMoved:(NSSet*)touches withEvent:(UIEvent*)event{
   for (UITouch *touch in touches) {
      CGPoint t = [touch locationInView:touch.view];
      //Check Slider for Contact
      if(touch==ASliderLastTouch){
        if(t.x>205)
           [ATrackThumb setCenter:CGPointMake(205,ATrackThumb.center.y)];
        else if(t.x<24)
           [ATrackThumb setCenter:CGPointMake(24,ATrackThumb.center.y)];
        else 
           [ATrackThumb setCenter:CGPointMake(t.x,ATrackThumb.center.y)];

        hourSlider.value=(ATrackThumb.center.x-24)/15;
        [self updateHour];
      }
      if(touch==BSliderLastTouch){
        if(t.x>205)
          [BTrackThumb setCenter:CGPointMake(205,BTrackThumb.center.y)];
        else if(t.x<24)
          [BTrackThumb setCenter:CGPointMake(24,BTrackThumb.center.y)];
        else 
          [BTrackThumb setCenter:CGPointMake(t.x,BTrackThumb.center.y)];

        minutesSlider.value=(BTrackThumb.center.x-24)/3.0;
        [self updateMinute];
      }
   }
}
- (void)touchesEnded:(NSSet*)touches withEvent:(UIEvent*)event{
  for (UITouch *touch in touches) {
     if(touch==ASliderLastTouch)ASliderLastTouch=nil;
     if(touch==BSliderLastTouch)BSliderLastTouch=nil;
  }
} 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:46:18.657

**以下代码用于在您触摸时移动图像**

```
AppDelegate Classes

**// .h File**

#import <UIKit/UIKit.h>

@class UITouchTutorialViewController;

@interface UITouchTutorialAppDelegate : NSObject <UIApplicationDelegate> {
    UIWindow *window;
    UITouchTutorialViewController *viewController;
}

@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UITouchTutorialViewController *viewController;

@end

//////////////////////////////////////////////////////////////////////////////////

// .m File

#import "UITouchTutorialAppDelegate.h"
#import "UITouchTutorialViewController.h"

@implementation UITouchTutorialAppDelegate

@synthesize window;
@synthesize viewController;

- (void)applicationDidFinishLaunching:(UIApplication *)application {    

    // Override point for customization after app launch    
    [window addSubview:viewController.view];
    [window makeKeyAndVisible];
}

- (void)dealloc {
    [viewController release];
    [window release];
    [super dealloc];
}

@end
//////////////////////////////////////////////////////////////////////////////

UIViewController Classes

// .h file

#import <UIKit/UIKit.h>

@interface UITouchTutorialViewController : UIViewController {
    IBOutlet UIImageView *cloud;
}

@end

// .m File

#import "UITouchTutorialViewController.h"

@implementation UITouchTutorialViewController

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    UITouch *touch = [[event allTouches] anyObject];
    CGPoint location = [touch locationInView:touch.view];
    cloud.center = location;
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    [self touchesBegan:touches withEvent:event];
}

/*
// Override initWithNibName:bundle: to load the view using a nib file then perform additional customization that is not appropriate for viewDidLoad.
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    }
    return self;
}
*/

/*
// Implement loadView to create a view hierarchy programmatically.
- (void)loadView {
}
*/

/*
// Implement viewDidLoad to do additional setup after loading the view.
- (void)viewDidLoad {
    [super viewDidLoad];
}
*/

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

# ios - 应用程序进入后台时如何停止更新位置（ios6）

> ID：14786681
> 
> 赞同：0
> 
> 时间：2013-02-09T09:27:01.610
> 
> 标签：ios

我已经在我的许多视图控制器中实例化了 locationManager。为了节省电池，我想阻止 locationmanager 更新位置，所以我想在我的 VC 中调用 viewDidUnload 内的 stopUpdatingLocation，但在 ios6 中不推荐使用 viewDidUnload。有没有一种干净的方法可以让我停止所有更新位置？

谢谢！强

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:35:00.767

您可以使用 UIApplicationDelegate 方法：

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

在此方法中，您可以调用 stopUpdatingLocation。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:53:19.447

停止更新位置

```
 - (void)applicationDidEnterBackground:(UIApplication *)application
   {
    //stop updating Location

      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-12T06:43:11.623

较早的答案建议`stopUpdatingLocation`从`applicationWillResignActive`. 更好的解决方案是改为拨打电话`applicationDidEnterBackground`。

我发现调用`stopUpdatingLocation`from`applicationWillResignActive`会导致询问用户是否允许使用该位置的警报在用户可以点击任何内容之前立即消失。

这是因为`applicationWillResignActive`在出现权限对话框时调用。这将`stopUpdatingLocation`在 之后立即调用`startUpdatingLocation`，导致对话框立即消失。

# c++ - 接口/抽象类应该只包含纯虚方法吗？

> ID：14786682
> 
> 赞同：2
> 
> 时间：2013-02-09T09:27:17.423
> 
> 标签：c++

我在设计方面有点弱，我想知道在接口中有简单的虚拟方法（不仅仅是纯虚拟）是否是一个好的设计？我有一个类是某种接口：

```
class IModel {
    void initialize(...);
    void render(...);

    int getVertexCount() const;
    int getAnotherField() const;
}; 
```

初始化和渲染方法肯定需要重新实现，因此它们是纯虚拟方法的良好候选者。但是，最后两种方法非常简单，并且几乎总是具有相同的实现（只是返回一些字段）。我可以将它们保留为具有默认实现的虚拟方法，还是让它需要重新实现的纯虚拟更好，因为它是一个接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:39:06.693

我们必须指出一些不同之处：

没有“某种接口”之类的东西，这个类应该是接口还是抽象类？

如果它应该是一个接口，那么答案是：它的所有方法都必须是**纯虚拟**的（没有实现）并且它**不能**包含字段，甚至不能包含字段。就像 jaunchopanza 说的那样，您最多可以（实际上必须）做的是，给虚拟析构函数一个空的主体，从而允许相应地析构派生类。

相反，如果它应该是一个抽象类，那么您可以随意添加字段`m_vertexCount`和`m_anotherField`（我想）并实现`getVertexCount()`和՝getAnotherField()՝。但是，您不应**将**其命名为`IModel`，因为该`I`前缀应仅用于接口。

编辑：我认为我是 Bo Persson 所说的那些“信徒”之一 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:41:15.023

您面临着代码重复和可读性之间的权衡。您的代码的读者将从每个纯接口和每个非覆盖方法中获得很好的帮助。但是，每个子类都会复制默认实现。您是否应该提供默认实现取决于默认实现将更改的可能性，然后需要在整个地方进行更改。

在不了解这些细节的情况下，无法给出一个艰难的是或否的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-22T02:48:22.813

您可以做的一件事是制作`IModel`一个接口并提供基类，例如`ModelBase`实现通用/重复功能。

```
class IModel
{
    virtual void initialize(...) = 0;
    virtual void render(...) = 0

    virtual int getVertexCount() const = 0;
    virtual int getAnotherField() const = 0;
};

class ModelBase : public IModel
{
    // common functions
    virtual int getVertexCount() const override { return vertexCount_; }
    virtual int getAnotherField() const override { return anotherField_; }

protected:
    int vertexCount_ = 0, anotherField_ = 0;
};

class MyModel : public ModelBase
{
    virtual void initialize(...) override { ... }
    virtual void render(...) override { ... }
}; 
```

这种方法的一个缺点是，由于额外的虚函数和编译器优化的损失，会有一些（可能可以忽略不计）性能损失。

# stringbuffer - StringBuffer 中的赋值运算符不起作用

> ID：14786698
> 
> 赞同：2
> 
> 时间：2013-02-09T09:28:54.120
> 
> 标签：stringbuffer

```
public class Test
{
    static void operate(StringBuffer x, StringBuffer y)
    {
        x.append(y);
        y=x;
    }

    public static void main(String args[])
    {
        StringBuffer x=new StringBuffer("Sun");
        StringBuffer y=new StringBuffer("Java");

        operate(x,y);
        System.out.println(x+","+y);
    }
} 
```

他的版画：SunJava,Java

谁能解释一下为什么它会这样打印而不是 SunJava,SunJava ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:14:42.807

您将对 y 中的 StringBuffer 的引用传递给您的操作函数。然后在操作中，您更改引用，但不更改对象。在调用操作之后，您的 main 函数仍然具有对它最初分配的 StringBuffer 的引用。

# javascript - jQuery slideToggle 菜单在打开/关闭之前折叠同级菜单

> ID：14786699
> 
> 赞同：5
> 
> 时间：2013-02-09T09:29:05.637
> 
> 标签：javascript, jquery, algorithm

这是我正在处理的粗略示例：http: [//jsfiddle.net/dX2ux/1/](http://jsfiddle.net/dX2ux/1/)

客户内部开发的 CMS 使用这种 HTML 结构动态创建菜单。它还附带示例中显示的 jQuery 脚本。

我想编辑脚本，以便在它自己打开之前关闭它的兄弟打开的菜单。该类`show`也必须切换。

到目前为止，我想出了这个：http: [//jsfiddle.net/dX2ux/2/](http://jsfiddle.net/dX2ux/2/)

但是，如果您使用它，当您单击其中一个子菜单时，它会搞砸。

任何人都可以阐明我如何实现我的目标行为吗？另外，这是最好的方法吗？这是我想太多了吗？

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:57:27.627

不确定这本身是否是“最佳”方式，但有了这种标记，这个解决方案应该可以工作：

```
$('.toggle-menu').on('click',function(e){
    e.preventDefault();
    $(this).parent().siblings().children('.toggle-menu').removeClass('show').next().slideUp();
    $(this).toggleClass('show').next().slideToggle();
}); 
```

编辑您的小提琴以显示效果：http: [//jsfiddle.net/dX2ux/3/](http://jsfiddle.net/dX2ux/3/)

# java - Hibernate 的恶作剧——我只想要一个非托管副本

> ID：14786700
> 
> 赞同：2
> 
> 时间：2013-02-09T09:29:26.897
> 
> 标签：java, spring, hibernate, jpa

我有一个使用 Spring 的 Java 应用程序，以及使用 JPA 2.0 规范的 Hibernate。

我试图在 for 循环中保留 100 个“节点”。当我通过 for 循环取得进展时，我坚持每个节点，有时我会得到一些我已经坚持的节点，看看我是否希望我的新节点成为其中一个节点的浅层克隆，除了它的坐标。（基本上我正在制作地图，有时我希望我的方格彼此相同。）

不过，我一直遇到问题，并不是所有我想要坚持的问题都被坚持下去，而且它的休眠/JPA 把我搞砸了。

整个事情发生在一次交易中。

```
int startingX = sn.getxCoor() * 10;
int startingY = sn.getyCoor() * 10;
for (int nodeX = startingX; nodeX < startingX + 10; nodeX++) {
    for (int nodeY = startingY; nodeY < startingY + 10; nodeY++) {
        ns.persistNodeIfNotExistent(this.generateNode(nodeX, nodeY, sn));
    }
}

public void persistNodeIfNotExistent(Node toPersist) {
    if (nd.getNode(toPersist.getxCoor(), toPersist.getyCoor()) == null) {
        nd.merge(toPersist);
    }
}

public Node generateNode(int nodeX, int nodeY, SuperNode sn) {
    Node newNode = nodeIsDuplicate(nodeX, nodeY);
    if (newNode == null) {
        newNode = new Node();
        [bunch of irrelevant stuff gets set]
    }
    newNode.setxCoor(nodeX);
    newNode.setyCoor(nodeY);
    return newNode;
}

public Node nodeIsDuplicate(int nodeX, int nodeY) {
    Node nodeToReturn = null;
    List<Node> adjacentNodes = ns.getAdjacentNodes(nodeX, nodeY);
    int chanceItsDuplicate = 20 * adjacentNodes.size();
    if (randomizer.randomInt99() < chanceItsDuplicate) {
        Node adjNode = adjacentNodes
                .get(randomizer.getRandom().nextInt(adjacentNodes.size()));
        ns.detach(adjNode);
        nodeToReturn = new Node();
        BeanUtils.copyProperties(adjNode, nodeToReturn);
    }
    return nodeToReturn;
} 
```

我解决这整个混乱的第一个策略是使用 Spring 的 BeanUtils 来复制属性，我认为这会给我一个非托管副本，但它们并不会全部持久化，所以它一定不会。然后我通过我的 entityManager 添加了分离以尝试确保它已分离，但在服务层我仍然可以看到“getNode”方法出现了一堆结果，即使数据库被清除干净。

是否有任何简单而理智的方法来复制我的实体而不会让 Hibernate 每次都阻止我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T22:22:51.863

Turns out my issue was that they had their primarykey, their Id, set to the primary key of the original node. When I manually set the Id of the copies to 0, it worked. I'm using MySQL, so not sure if that would work with other databases, but considering a java "int" always has a default value of 0, it should.

# cpu - 确定数据流中的关键路径

> ID：14786706
> 
> 赞同：9
> 
> 时间：2013-02-09T09:30:16.867
> 
> 标签：cpu, computer-architecture, cpu-cycles

在*Computer Systems: A Programmer's Perspective*一书中，练习 5.5 显示了一段代码来计算多项式的值

```
double poly(double a[], double x, int degree)
{
    long int i;
    double result = a[0];
    double xpwr = x;
    for (i = 1; i <= degree; i++) {
        result += a[i] * xpwr;
        xpwr = x * xpwr;
    }
    return result;
} 
```

练习假设双精度浮点加法和乘法所需的时钟周期分别为 3 和 5。读者被要求解释**为什么测量的 CPE（每个元素的循环数）值为 5。**

根据练习答案，在每次迭代中，我们需要更新变量`xpwr`和最终的 CPE 为 5。`result``result``xpwr`

但我认为数据流应该是这样的：

```
xpwr               result
  |                  |
  +-----+ +--[load]  |
  |     | |          |
[mul]  [mul]         |
  |      |           |
  |      +---+ +-----+
  |          | |
  |         [add]
  |           |
  |           +------+
  |                  |
xpwr               result 
```

所以最长的路径是从 的前一个值`xpwr`到 的新值`result`，经过执行单元`[mul]`和`[add]`。因此最长的时间应该是8个周期。

我想问一下

1.  关键路径的确切含义是什么？以及如何确定？
2.  哪个答案（我的和书）更合理？

任何关于 CPU、架构、执行单元、流水线、浮点单元的解释都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-19T04:10:57.720

我知道我参加聚会有点晚了，但这本书是绝对正确的。您可以通过计时代码自己验证，CPE确实是5，所以第二个答案是错误的。

但是第一个也是错误的。它说必须同时执行 MUL，这在 Nehalem 架构中根本不可能（我怀疑，大多数现代处理器）。请记住，只有一个 FP MUL 单元和一个不同的 FP ADD 单元（如书中所示，ed. 2011 及更高版本）

相反，会发生这样的事情：

（假设负载始终存在，如果在缓存中则只有 1 个周期）

首先我们`xpwr *= x`输入 MUL。之后我们立即喂食`xpwr*a[i]`（记住管道！）

...在 5 个周期后，我们将获得 的新值`xpwr`，在 6 个周期后，我们将获得 的结果`xpwr*a[i]`。那时，新的计算`xpwr *= x`将在 MUL 的阶段 1。因此，如果我们不想受到它们的限制，我们只有 4 个多周期来执行其余的操作。

当然，这很容易，因为我们只需要 3 个周期让 FP ADD 获得新的`result`.

因此，很明显限制因素是 的计算`xpwr`。这意味着在寻找关键路径（无论是什么）时，我们必须特别关注从旧值到新值的路径。在这种情况下，路径`result`仅包含一个 FP ADD！（这也是起初让我失望的原因）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T09:09:59.507

关键路径确实是8个周期，但是问题要求CPE，这就像时间平均的时间来输出一个多周期的循环。

除了第一个和最后一个循环之外，处理器可以同时从循环的前一次迭代和当前的乘法进行加法，因为操作数不相互依赖。循环的第一次迭代需要完整的 8 个周期，但之后的所有迭代，循环只需要运行 5 个周期，使得实际的 CPE 为 5 个周期。

PS我确实同意这本书呈现关键路径的方式令人困惑。他们对关键路径的定义不仅仅是采用最长路径的路径，而且路径还必须具有操作数依赖于先前操作的操作，因此必须按顺序排列。这个定义使得寻找关键路径变得相当不直观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-23T00:01:29.563

A1：关键路径是书上数据流图中最长的一条，必须在一条直线上，对单个寄存器有影响，而不是'mul'和'add'相加，其结果是仅用于下一个操作的中间操作数。

关于这个问题，如果继续阅读其余部分，您将完成所有工作。尤其是比较 combine7 的数据流图和 combine5 的数据流图会很有帮助。

A2：如果A1理解了，问题2就清楚了，书上的答案是合理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T23:13:26.260

关键路径是图中最长的路径，在本例中为 8 个时钟。这就是[龙书](http://en.wikipedia.org/wiki/Compilers%3a_Principles,_Techniques,_and_Tools)对关键路径（10.3.3 优先拓扑顺序）所说的：

> 在没有资源限制的情况下，最短的时间表由关键路径给出，即通过数据依赖图的最长路径。可用作优先级函数的度量是节点的高度，它是图中源自节点的最长路径的长度。

我想你在书中发现了一个错误。您应该考虑联系作者，以便他们在以后的印刷中进行更正。

# r - 用 NA 替换数据框中的星号

> ID：14786710
> 
> 赞同：1
> 
> 时间：2013-02-09T09:30:42.590
> 
> 标签：r

这是我的数据框 df

我正在努力：

```
df=data.frame(rbind(c(1,"*","*"),c("*",3,"*"))
df2=as.data.frame(sapply(df,sub,pattern="*",replacement="NA")) 
```

由于星号，它不起作用，但我很生气试图替换它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-09T09:36:37.793

如果你只是有`*`（意思是它不像`ab*de`）你的`data.frame`，那么，你可以在没有的情况下做到这一点`regex`：

```
df[df == "*"] <- NA 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-09T09:41:30.390

这里的两种解决方案都针对您工作场所中已有的对象。如果可能（或至少在将来），您可以`na.strings`使用`read.table`. 请注意，它是*复数*“字符串”，因此您应该能够指定多个字符作为`NA`值处理。

这是一个示例：这只是将一个名为“readmein.txt”的文件写入您当前的工作目录并验证它是否存在。

```
cat("V1 V2 V3 V4 V5 V6 V7\n
2 * * * * * 2\n
1 2 * * * * 1\n", file = "readmein.txt")
list.files(pattern = "readme")
# [1] "readmein.txt" 
```

这是`read.table`实际的`na.strings`论点。

```
read.table("readmein.txt", na.strings="*", header = TRUE)
#   V1 V2 V3 V4 V5 V6 V7
# 1  2 NA NA NA NA NA  2
# 2  1  2 NA NA NA NA  1 
```

## 更新：您的工作场所中已有物品

我看到其他两个答案的另一个问题：它们都导致字符（或更确切地说是因子）变量，即使该列可能应该是数字。

这是一个例子。首先，我们创建一个示例数据集。为了好玩，我添加了另一个字符被视为`NA`：“。”。

```
temp <- data.frame(
  V1 = c(1:3),
  V2 = c(1, "*", 3),
  V3 = c("a", "*", "c"),
  V4 = c(".", "*", "3"))
temp
#   V1 V2 V3 V4
# 1  1  1  a  .
# 2  2  *  *  *
# 3  3  3  c  3
str(temp)
# 'data.frame':  3 obs. of  4 variables:
#  $ V1: int  1 2 3
#  $ V2: Factor w/ 3 levels "*","1","3": 2 1 3
#  $ V3: Factor w/ 3 levels "*","a","c": 2 1 3
#  $ V4: Factor w/ 3 levels ".","*","3": 1 2 3 
```

让我们复制一份，然后以我认为最明显的“R”方式解决这个问题：

```
temp1 <- temp
temp1[temp1 == "*"|temp1 == "."] <- NA 
```

*看起来不错*...

```
temp1
#   V1   V2   V3   V4
# 1  1    1    a <NA>
# 2  2 <NA> <NA> <NA>
# 3  3    3    c    3 
```

...但我认为 V2 和 V4 应该是数字的....

```
str(temp1)
# 'data.frame':  3 obs. of  4 variables:
#  $ V1: int  1 2 3
#  $ V2: Factor w/ 3 levels "*","1","3": 2 NA 3
#  $ V3: Factor w/ 3 levels "*","a","c": 2 NA 3
#  $ V4: Factor w/ 3 levels ".","*","3": 1 NA 3 
```

这是一个解决方法：

```
temp2 <- read.table(text = capture.output(temp), na.strings = c("*", "."))
temp2
#   V1 V2   V3 V4
# 1  1  1    a NA
# 2  2 NA <NA> NA
# 3  3  3    c  3
str(temp2)
# 'data.frame':  3 obs. of  4 variables:
#  $ V1: int  1 2 3
#  $ V2: int  1 NA 3
#  $ V3: Factor w/ 2 levels "a","c": 1 NA 2
#  $ V4: int  NA NA 3 
```

## 更新 2：（又一个）替代方案

使用在其帮助页面上`type.convert`被描述为“帮助函数”的函数可能更合适。`read.table`我还没有计时，但我的猜测是它会比我上面提到的解决方法更快，并且有所有的好处。

```
data.frame(
  lapply(temp, function(x) type.convert(
    as.character(x), na.strings = c("*", ".")))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-09T09:34:35.997

你应该提出一个完整的可重复的例子，当你让他们变得容易时，人们会更愿意提供帮助。随便...

```
dat <- data.frame(a=c(1,2,'*',3,4), b=c('*',2,3,4,'*'))
> dat
  a b
1 1 *
2 2 2
3 * 3
4 3 4
5 4 *
> as.data.frame(sapply(dat,sub,pattern='\\*',replacement=NA))
     a    b
1    1 <NA>
2    2    2
3 <NA>    3
4    3    4
5    4 <NA> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T22:48:24.487

这可以工作（它非常灵活），但已经有其他很棒的解决方案了。Arun 的解决方案是我的典型方法，但它是`replacer`为新的 R（命令行经验很少）用户创建的。我不会向`replacer`任何有一点经验的人推荐。

```
library(qdap)
replacer(dat, "*", NA) 
```

# gwt - 在 GWT+phonegap 应用程序中重用服务器代码，避免 RPC

> ID：14786713
> 
> 赞同：2
> 
> 时间：2013-02-09T09:31:10.723
> 
> 标签：gwt, cordova, gwt-rpc, objectify, mgwt

我们即将创建网页的移动版本。在那个页面中，我们以服务方式使用了 RPC 服务，**而不是完全面向实体**。因此，我们将有两个客户端（Web 和移动）调用一台服务器。

现在我们想要重用支持多个客户端版本的所有服务器代码，并避免**RPC 调用所具有的所有“dto 版本地狱”。**

我已经看到我们需要创建一个包装器，即服务器中的另一层，用于向移动版本（GWT+phonegap 以及未来：IOS、Android ......）公开方法。稍后这一层将重用所有服务器代码（模型、存储库......等），在服务器中，对 BigTable 的访问是通过 Objectify 完成的。

您会为这个新层使用哪种技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:48:12.577

对于移动应用程序，我喜欢在客户端和 AutoBeans 和 Restful API 上使用 AutoBeans + RequestBuilder，后者（也）在服务器端生成 JSON。

使用 AutoBeans，您可以使用 Java 接口定义数据结构。（这为您提供了一些编程依据）并且 AutoBeans 在服务器和客户端为您处理从 Object 到 JSON 以及从 JSON 到 Object 的转换。

结合起来，您可以构建一个非常快速且良好的架构 RPC。RequestFactory 使用 AutoBeans 作为序列化的默认机制。

如果您决定支持其他平台，您仍然可以使用 JSON 并在那里解析它。如果您决定支持原生 android 应用程序，AutoBean 机制应该在 android vm 上运行良好。

AutoBeans 的一个很好的例子可以在这里找到：[http ://code.google.com/p/google-web-toolkit/wiki/AutoBean](http://code.google.com/p/google-web-toolkit/wiki/AutoBean)

# html - 使用css将文本居中对齐

> ID：14786718
> 
> 赞同：4
> 
> 时间：2013-02-09T09:31:39.920
> 
> 标签：html, css, image, web

我将以下代码用于简单的图片库（在[http://w3schools.com](http://w3schools.com)中找到的实际代码，它运行良好）。编辑 css 后，文本的对齐方式已更改。我想将文本居中对齐。任何人都知道答案请帮助我。

我的 HTML 代码：

```
<html>
<body>
<div id="d">
<div class="img">
<a target="_blank" href="klematis_big.htm">
<img src="a.jpg">
</a>
<div class="desc">
Add a description of the image here </div>
</div>
<div class="img">
<a target="_blank" href="klematis2_big.htm">
<img src="a.jpg">
</a>
<div class="desc">
<p>
Add a description of the image here</p>
</div>
</div>
<div class="img">
<a target="_blank" href="klematis3_big.htm">
<img src="a.jpg">
</a>
<div class="desc">
Add a description of the image here</div>
</div>
<div class="img">
<a target="_blank" href="klematis4_big.htm">
<img src="a.jpg">
</a>
<div class="desc">
<p>
Add a description of the image here</P>
</div>
</div>
<div class="img">
<a target="_blank" href="klematis_big.htm">
<img src="a.jpg">
</a>
<div class="desc">
Add a description of the image here</div>
</div>
<div class="img">
<a target="_blank" href="klematis2_big.htm">
<img src="a.jpg">
</a>
<div class="desc">
Add a description of the image here</div>
</div>
</div>
</body>
</html> 
```

我的 CSS 代码：

```
#d
{
width : 660;
border:1px;
}
.img
{
margin:3px;
border:1px solid #0000ff;
height:200;
width:200;
float:left;
text-align:center;
}
.img img
{
display:inline;
margin:3px;
border:1px solid #ffffff;
width:100;
height : auto;
}
.img a:hover img
{
border:2px solid #0000ff;
}
.desc
{
text-align:center;
font-weight:normal;
width:120px;
margin:2px;
} 
```

截屏： ![在此处输入图像描述](../Images/c35cef12c1c2f4eba0cf9955a5244f91.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T09:42:58.677

删除 div 的宽度。

```
.desc {
  text-align: center;
  font-weight: normal;
  margin: 2px;
} 
```

并将其更改为[text-align](http://developer.mozilla.org/en-US/docs/CSS/text-align)。属性对齐不存在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:42:41.343

试试这个：

```
.desc{
margin: 0 auto;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-09T09:55:07.590

您必须修改 margin 属性的值：

```
.desc
{
text-align:center;
font-weight:normal;
width:120px;
margin:2px auto;
} 
```

这部分也缺少井号：

```
<style>

d
{
width : 660;
border:1px;
} 
```

它必须像这样修改：

```
<style>

#d {
   width : 660;
   border:1px;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T09:34:35.067

将 CSS 更改为

```
.desc
{
text-align:center;
font-weight:normal;
width:120px;
margin:2px;
} 
```

更改`align:center;`为`text-align:center;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-03T07:24:03.633

.detail
{
文本对齐：居中；
字体粗细：正常；
边距：0 自动；
}

# php - 多文本输入 Codeigniter 的表单验证

> ID：14786722
> 
> 赞同：0
> 
> 时间：2013-02-09T09:32:14.060
> 
> 标签：php, codeigniter, validation

表单中的数组值始终是 CI 中表单验证的问题。现在我必须输入多个值，这些数组值将存储在 DB 中。现在**用户可以错误地将一些字段保留为空白，**如下所示的链接：

[输入值。](http://my.jetscreenshot.com/18510/20130209-nlpu-38kb)

[提交时数组中的值。](http://my.jetscreenshot.com/18510/20130209-y3zr-36kb)

我使用[本](http://www.shotdev.com/php/php-form/php-input-multiple-textbox/)教程在**+**按钮单击时添加输入框。提交时，空白值将被截断，然后非空数组值将添加到数据库中。我使用原生 PHP 中的示例程序进行了尝试，但无法在 CI 中实现。

我在原生 PHP 中使用以下代码在 DB 中插入值，截断空值：

```
<?php
    include 'sql_connect.php';
    $str = array();
    for($i=0;$i<count($_POST["txtSiteName"]);$i++)
    {
        $str[] = $_POST["txtSiteName"][$i];
    }
    $str = array_filter($str, function($item) {if(!is_null($item)) return $item;});
    foreach($str as $loop_str)
    {
        $arr_str[] = $loop_str;
    }
    for($k = 0; $k<count($arr_str);$k++)
    {
        mysql_query("INSERT INTO sitename (name) VALUES ('".$arr_str[$k]."')") or die(mysql_error());
    }
    print_r($arr_str);
?> 
```

我怎样才能在 CI 中实现这一点？我尝试使用回调函数，但数组值没有传递给回调函数。

**编辑：**

下面的代码显示了我的回调函数：

在输入 3 个 url 时，它被调用 3 次。这正常吗？我的 array_walk 的回调函数也不起作用。在另一个回调函数中调用回调函数是不可能的？

```
public function null_check()
{
    $urls = $this->input->post('link_name');
    array_walk($urls, 'prepurl');
    var_dump($urls);
} 
```

preurl 函数：

```
public function prepurl($item, $key)
{
    $item = "http://".$item;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:01:00.663

您的问题对我来说并不清楚，但因为您提到要验证多个文本框。所以如果你的文本框是这样的

```
<input type="text" name="txtSiteName[]" />
<input type="text" name="txtSiteName[]" /> 
```

那么你可以简单地使用

```
$this->form_validation->set_rules('txtSiteName[]', 'Site Name', 'required|xss_clean'); 
```

验证所有文本框是否为空或空。

**更新**（将参数传递给回调）

```
$this->form_validation->set_rules('txtSiteName[]', 'Site Name', 'callback_sitename_check[' . $this->input->post('txtSiteName') . ']');

function sitename_check($str, $sitenames) {
    // $sitenames will be your textboxe's array
} 
```

`CodeIgniter`默认情况下使用第一个参数，因此第二个参数是您的参数。另请查看[insert_batch()](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)以插入多条记录。

你也可以这样做

```
$this->form_validation->set_rules('txtSiteName[]', 'Site Name', 'callback_sitename_check');

function sitename_check() {
    $sitenames =  $this->input->post('txtSiteName');
} 
```

**更新：（**对于array_walk）

```
array_walk($urls, array($this, 'prepurl')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:19:25.800

这是一个简单的过程

像这样设置消息

```
$this->form_validation->set_rules('txtSiteName[]', 'Site Name', 'required|xss_clean|callback_check_array'); 
```

这是回调

```
function check_array()
{
    $txtSiteName    =   $this->input->post('txtSiteName');
    $error = 0;
    foreach($txtSiteName as $key => $value)
    {
        if(!empty($value)){
            $error = $error + 1;
        }
    }       
    if($error == 0){
        return TRUE;
    }else{
        $this->form_validation->set_message('check_array', 'All fields are empty. Please provide at leaset 1');
        return FALSE;
    }
} 
```

验证成功后运行此代码或根据您的要求进行修改

```
if ($this->form_validation->run() == FALSE)
{
    $this->load->view('myform');
}
else
{
    $txtSiteName    =   $this->input->post('txtSiteName');
    foreach($txtSiteName as $key => $value)
    {
        if(!empty($value)){
            $data['name']   =   $value;
            $this->mymodel->insert($data);
        }
    }
} 
```

模型方法

```
function insert($data)
{
    $this-db->insert('table_name',$data);
} 
```

# java - 关于使用 ThreadLocals 包装可变单例对象的建议

> ID：14786723
> 
> 赞同：7
> 
> 时间：2013-02-09T09:32:32.813
> 
> 标签：java, multithreading, thread-local

来自[Java Concurrency in practice](https://rads.stackoverflow.com/amzn/click/com/0321349601)第 3.3.3 章。**线程本地**

> 线程局部变量通常用于防止在基于可变单例或全局变量的设计中共享。

如果我们将可变的 Singleton 人包装在 ThreadLocal 中，每个线程都会有自己的 Singleton 副本？那么它将如何保持单身呢？这是作者的意思还是我在这里遗漏了一些非常明显的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:09:12.720

> 如果我们将可变的 Singleton 家伙包装在 ThreadLocal 中

AFAIK 你没有用 ThreadLocal 包装单例类，而是包含在单例中的对象是**可变**的或非线程安全的。正如该示例正确讨论的那样，**JDBC 连接**不是线程安全的，需要额外的保护，这反过来又增加了争用。

因此，在单例仅用于共享目的的情况下，将这些东西替换为 ThreadLocal 是一个好主意，因为所有线程都有自己的连接，不需要额外的保护。

ThreadLocal 用例的另一个很好的例子是**随机**生成，如果有一个`Random`对象，那么线程内就会争用**“种子”**，所以如果每个线程都有自己的 Random 对象，那么就不再有争用了，这是有道理的.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:08:08.343

如果您将单例（作为设计模式）包装在 ThreadLocal 中，它将保持为单例。ThreadLocal 没有什么大魔法，如果您检查一下刚刚看到的 ThreadLocal 的来源。它使用 Map 并使用当前线程作为键。所以在 ThreadLocal 中放置一个 Singleton（一个实现良好的）是非常没用的。因为您只能以各种方式获得相同的 Singleton。

我想作者的意思是，如果您的设计大量使用单例和/或全局变量，如果您需要每个线程唯一的东西，并且不想一直向下传递调用层次结构，那么 ThreadLocal 是一个不错的选择。但这东西与 Singleton 不同。当然你可以在你的 Singleton 中封装一个 ThreadLocal ，这样它就会有一些线程特定的状态（但我不会再调用 Singleton 了）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:51:26.923

我对这一行的理解是，当应用程序的设计方式是 Singleton 类具有可变状态且被许多线程读取和写入时，将需要线程安全，因此您需要序列化对该状态的所有访问。您可以考虑在该可变单例上创建一个 ThreadLocal 。（摘自本书：-）例如，单线程应用程序可能会维护一个在启动时初始化的全局数据库连接，以避免必须将 Connection 传递给每个方法。由于 JDBC 连接可能不是线程安全的，因此使用全局连接而没有额外协调的多线程应用程序也不是线程安全的。通过使用 ThreadLocal 来存储 JDBC 连接，如清单 3.10 中的 ConnectionHolder，每个线程都有自己的连接。

```
private static ThreadLocal<Connection> connectionHolder= new ThreadLocal<Connection>() {
      public Connection initialValue() {
  return DriverManager.getConnection(DB_URL);
  }
 };
   public static Connection getConnection() {
     return connectionHolder.get();
     } 
```

# mysql - 如何在jsp中显示来自mysql的多个图像和数据

> ID：14786724
> 
> 赞同：0
> 
> 时间：2013-02-09T09:32:42.477
> 
> 标签：mysql, jsp

我在这些代码中使用 jsp 和 mysql。我一次只得到一张图像，但检索到所有数据......你能告诉我如何在这段代码中显示多张图像吗？我的数据：imagename varchar()、description varchar()、imageid varchar()、category varchar image blob()。index.jsp：

```
 <%@page import="java.io.InputStream"%>
  <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <%@page import="java.io.OutputStream"%>``
    <%@ page import="java.sql.*" %>
   <!DOCTYPE html>
      <html>
           <head>
          <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>JSP Page</title>
        </head>
         <body>
      <%
     Class.forName("com.mysql.jdbc.Driver");
     Connection con=DriverManager.
                     getConnection("jdbc:mysql://localhost:3306/rich","root",""); 
      Statement stmt = con.createStatement();
     ResultSet rs=stmt.executeQuery("select *from publishers");
         while(rs.next())
         {
      String imgLen=rs.getString(5);

      int len = imgLen.length();
     byte [] rb = new byte[len];
     InputStream readImg = rs.getBinaryStream(5);
       int index=readImg.read(rb, 0, len);
        System.out.println("index"+index);
         stmt.close();
       response.reset();
      response.setContentType("image/jpg");
      response.getOutputStream().write(rb,0,len);
       response.getOutputStream().flush();
          }

       %>
            </body>
         </html>

     **basic.jsp:**

        <%@page contentType="text/html" pageEncoding="UTF-8"%>
        <%@page import="java.io.OutputStream"%>
        <%@ page import="java.sql.*" %>
     <!DOCTYPE html>
         <html>
      <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
     <title>JSP Page</title>
           </head>
        <body>
       <   form action="index.jsp" method="post">
        <% 

          Class.forName("com.mysql.jdbc.Driver");
          Connection con=DriverManager.getConnection("jdbc:mysql://localhost:3306/rich","root","");
     Statement stmt = con.createStatement();
        ResultSet rs=stmt.executeQuery("select *from publishers");
       while(rs.next())
               {
      %>
      <table border="1">
          <tr> <td>
          <img src="index.jsp?" /> </td> </tr>
      <tr>
          <td> <%=rs.getString(1)%> </td>
          <td> <%=rs.getString(2)%> </td>
          <td> <%=rs.getString(3)%> </td>
          <td> <%=rs.getString(4)%> </td>
      </tr>
      </table>
      <%
       }
          %>
         </form>
          </body>
      </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-27T12:40:10.513

其实并不难。我们将使用两个`jsps`文件首先显示图像，此页面用于获取图像。

```
<%@ Page import="java.sql.*" %>
    <%@ Page import="java.io.*" %>

    <html>
    <%
    byte[] imgData = null;
    try 
    {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con =  
        DriverManager.getConnection("jdbc:mysql://localhost/try","root","root");
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery("select photo from employee where employee_id=" + request.getParameter("empId"));
        while (rs.next()) 
        {
            Blob image = rs.getBlob(1);
            imgData = image.getBytes(1,(int)image.length());
        }
        response.setContentType("image/png");
        OutputStream o = response.getOutputStream();
        o.flush();
        o.close();
        rs.close();
        stmt.close();
        con.close();
    } 
    catch (Exception e) 
    {
        out.println("Unable To Display image");
        out.println("Image Display Error=" + e.getMessage());
        return;
    } 
    %>
    </html>

and here i getting all ids to get all images

 <%@ page import="java.sql.*"%>
    <%@ page import="java.io.*"%>
    <html>
    <%
    try 
    {
        String EmpFirstName;
        String EmpSurname;
        String EmpId;
        Class.forName("com.mysql.jdbc.Driver");
        Connection con =  DriverManager.getConnection("jdbc:mysql://localhost/try","root","root");
        Statement stmt = con.createStatement();
        ResultSet rs = stmt.executeQuery("select employee_id,first_name,surname from employee");
        while (rs.next()) 
        {
            EmpFirstName = rs.getString("first_name");
            EmpSurname = rs.getString("surname");
            EmpId = rs.getString("EmpId");
            <DIV><%=EmpFirstName5> <%=Surname%> </DIV>
            <img src="http://localhost/GetImage.jsp?empId=<%=EmpId%>" />
        }
        rs.close();
        stmt.close();
        con.close();
    } 
    catch (Exception e) 
    {
        out.println(e.Message);
        return;
    } 
    %>
    </html>

the code and its explanation  taken from 
http://stackoverflow.com/users/535152/tom%c3%a1s
thank you very much 
```

# iphone - 如何在一个游戏中心应用程序中支持多个游戏

> ID：14786725
> 
> 赞同：1
> 
> 时间：2013-02-09T09:32:45.197
> 
> 标签：iphone, ios, game-center

我正在实现一个包含多个游戏的捆绑应用程序。我想通过 gamecenter 为每款游戏添加多人游戏支持，现在我开始为其中一款实现多人游戏，进展顺利。但是每次我向朋友或自动匹配发送请求时，它都会与另一台使用相同应用程序的设备配对，而不必在我的应用程序中使用相同的游戏。类似的事情应该适用于具有不同多人模式（死亡竞赛，目标运行等）的应用程序，所以我想这是可能的。如何区分游戏中心用户的多人游戏请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:38:07.230

您可以使用[GKMatchRequest 的 playerGroup 属性](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKMatchRequest_Ref/Reference/Reference.html#//apple_ref/occ/instp/GKMatchRequest/playerGroup)仅与使用相同游戏模式（在您的情况下为游戏）的玩家匹配。

> 如果您的游戏设置了 playerGroup 属性，则只有请求共享相同 playerGroup 值的玩家才会由 Game Center 自动处理。

# javascript - jquery 提交

> ID：14786727
> 
> 赞同：0
> 
> 时间：2013-02-09T09:33:18.377
> 
> 标签：javascript, jquery

我有小问题

在表单提交

```
e.preventDefault(); 
```

不工作

代码：

```
$(function(){

    $("#contact-form").submit(function(e){
        Validation.init({
            name : $("#contact-form").find("input[name='name']").val(),
            phone : $("#contact-form").find("input[name='mobile']").val(),
            mail : $("#contact-form").find("input[name='email']").val(),
            text : $("#contact-form").find("textarea").val()
        });
        e.preventDefault();
    });
}); 
```

提交页面重新加载后:(

HTML

```
 <form id = "contact-form" action = "" method = "post">
        <input type = "text" name = "name" placeholder="სახელი">
        <input type = "text" name = "mobile" placeholder="მობილურის ნომერი">
        <input type = "text" name = "email" placeholder="ემაილი">
        <textarea name = "text" placeholder = "ტექსტი" ></textarea>
        <input type = "submit" name = "submit" value = "გაგზავნა">
     </form> 
```

我认为问题是

```
 Validation.init({
            name : $("#contact-form").find("input[name='name']").val(),
            phone : $("#contact-form").find("input[name='mobile']").val(),
            mail : $("#contact-form").find("input[name='email']").val(),
            text : $("#contact-form").find("textarea").val()
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:37:15.867

问题：`Validation`未定义，因此您的代码在到达`preventDefault()`.

验证前调用`preventDefault()`。

```
$("#contact-form").submit(function(e){
    e.preventDefault();
    Validation.init({
        name : $("#contact-form").find("input[name='name']").val(),
        phone : $("#contact-form").find("input[name='mobile']").val(),
        mail : $("#contact-form").find("input[name='email']").val(),
        text : $("#contact-form").find("textarea").val()
    });
}); 
```

现在，您将收到一条错误消息，调试错误以解决您的问题。

# c++ - c++ 数组排序与一些规范

> ID：14786731
> 
> 赞同：1
> 
> 时间：2013-02-09T09:34:45.983
> 
> 标签：c++, arrays, algorithm, sorting

我正在使用 C++。允许使用 STL 中的排序。

我有一个**int**数组，如下所示：

```
1 4 1 5 145 345 14 4 
```

这些数字存储在**char***中（我从二进制文件中读取它们，每个数字 4 个字节）

我想用这个数组做两件事：

1.  将每个数字与之后的数字交换

    4 1 5 1 345 145 4 14

2.  按 2 组排序

    4 1 4 14 5 1 345 145

* * *

我可以逐步编写代码，但效率不高。我正在寻找的是速度。O(n log n) 会很棒。

此外，这个数组可以大于 500MB，所以内存使用是个问题。

* * *

我的第一个想法是从末尾开始对数组进行排序（将数字 2 替换为 2）并将其视为**long***（强制排序每次取 2 个 int）。但是我无法对其进行编码，我什至不确定它是否会起作用。

我希望我足够清楚，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:37:48.760

这是我能想到的最节省内存的布局。显然，我正在使用的向量将被您正在使用的数据 blob 替换，假设 endian-ness 都处理得很好。下面代码的前提很简单。

1.  成对生成 1024 个随机值，每对包含 1 到 500 之间的第一个数字，1 到 50 之间的第二个数字。

2.  迭代整个列表，将所有偶数索引值及其以下奇数索引兄弟翻转。

3.  将整个事物发送到`std::qsort`，项目宽度为**两**(2) 个`int32_t`值，计数为原始向量的一半。

4.  比较器函数首先对立即值进行排序，如果第一个值相等，则对第二个值进行排序。

下面的示例对 1024 个项目执行此操作。我已经对 134217728 个项目（恰好 536870912 字节）进行了无输出测试，结果对于一台微不足道的 macbook air 笔记本电脑来说非常令人印象深刻，大约 15 秒，实际排序中只有大约 10 秒。理想情况下最重要的是**除了数据向量之外不需要额外的内存分配。**是的，对于纯粹主义者来说，我确实使用了调用堆栈空间，但这只是因为 q-sort 使用了。

我希望你能从中有所收获。

注意：我只显示输出的第一部分，但我希望它显示您正在寻找的内容。

```
#include <iostream>
#include <fstream>
#include <algorithm>
#include <iterator>
#include <cstdint>

// a most-wacked-out random generator. every other call will
//  pull from a rand modulo either the first, or second template
//  parameter, in alternation.
template<int N,int M>
struct randN
{
    int i = 0;
    int32_t operator ()()
    {
        i = (i+1)%2;
        return (i ? rand() % N : rand() % M) + 1;
    }
};

// compare to integer values by address.
int pair_cmp(const void* arg1, const void* arg2)
{
    const int32_t *left = (const int32_t*)arg1;
    const int32_t *right = (const int32_t *)arg2;
    return (left[0] == right[0]) ? left[1] - right[1] : left[0] - right[0];
}

int main(int argc, char *argv[])
{
    // a crapload of int values
    static const size_t N = 1024;

    // seed rand()
    srand((unsigned)time(0));

    // get a huge array of random crap from 1..50
    vector<int32_t> data;
    data.reserve(N);
    std::generate_n(back_inserter(data), N, randN<500,50>());

    // flip all the values
    for (size_t i=0;i<data.size();i+=2)
    {
        int32_t tmp = data[i];
        data[i] = data[i+1];
        data[i+1] = tmp;
    }

    // now sort in pairs. using qsort only because it lends itself
    //  *very* nicely to performing block-based sorting.
    std::qsort(&data[0], data.size()/2, sizeof(data[0])*2, pair_cmp);
    cout << "After sorting..." << endl;
    std::copy(data.begin(), data.end(), ostream_iterator<int32_t>(cout,"\n"));
    cout << endl << endl;

    return EXIT_SUCCESS;
} 
```

**输出**

```
After sorting...
1
69
1
83
1
198
1
343
1
367
2
12
2
30
2
135
2
169
2
185
2
284
2
323
2
325
2
347
2
367
2
373
2
382
2
422
2
492
3
286
3
321
3
364
3
377
3
400
3
418
3
441
4
24
4
97
4
153
4
210
4
224
4
250
4
354
4
356
4
386
4
430
5
14
5
26
5
95
5
145
5
302
5
379
5
435
5
436
5
499
6
67
6
104
6
135
6
164
6
179
6
310
6
321
6
399
6
409
6
425
6
467
6
496
7
18
7
65
7
71
7
84
7
116
7
201
7
242
7
251
7
256
7
324
7
325
7
485
8
52
8
93
8
156
8
193
8
285
8
307
8
410
8
456
8
471
9
27
9
116
9
137
9
143
9
190
9
190
9
293
9
419
9
453 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:38:54.407

由于您的输入和平台都有一些额外的限制，您可能可以使用您正在考虑的方法。这些限制将包括

*   您的输入仅包含正数（即可以视为无符号数）
*   您的平台提供`uint8_t`并`uint64_t`在`<cstdint>`
*   您处理具有已知字节顺序的单个平台。

在这种情况下，您可以将输入分成 8 个字节的组，进行一些字节洗牌以将每个组排列为一个`uint64_t`，将输入中的“第一个”数字放在较低值的一半中，并`std::sort`在结果数组上运行。根据字节顺序，您可能需要进行更多字节混洗，以按预期顺序将每个已排序的 8 字节组重新排列为一对 uint32_t。

如果您*不能自己编写代码*，我强烈建议您不要采用这种方法。

一种更好且更便携的方法（通过从未明确指定的二进制文件格式开始，您具有一些固有的不可移植性），将是：

```
std::vector<int> swap_and_sort_int_pairs(const unsigned char buffer[], size_t buflen) {
   const size_t intsz = sizeof(int);
   // We have to assume that the binary format in buffer is compatible with our int representation
   // we also require an even number of integers
   assert(buflen % (2*intsz) == 0);

   // load pairwise
   std::vector< std::pair<int,int> > pairs;
   pairs.reserve(buflen/(2*intsz));
   for (const unsigned char* bufp=buffer; bufp<buffer+buflen; bufp+= 2*intsz) {
      // It would be better to have a more portable binary -> int conversion
      int first_value = *reinterpret_cast<int*>(bufp);
      int second_value = *reinterpret_cast<int*>(bufp + intsz);
      // swap each pair here
      pairs.emplace_back( second_value, firstvalue );
   }
   // less<pair<..>> does lexicographical ordering, which is what you are looking ofr
   std::sort(pairs.begin(), pairs.end());

   // convert back to linear vector 
   std::vector<int> result;
   result.reserve(2*pairs.size());
   for (auto& entry : pairs) {
      result.push_back(entry.first);
      result.push_back(entry.second);
   }
   return result;
} 
```

初始解析/交换通道（无论如何您都需要）和最终转换都是 O(N)，因此总复杂度仍然是 (O(N log(N))。

如果您可以继续使用对，则可以保存最终转换。保存该转换的另一种方法是使用具有两个整数步长和两个整数交换的手动编码排序：更多的工作 - 并且可能仍然很难像经过良好调整的库排序一样高效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:15:59.610

一次做一件事。首先，给你的数据一些*结构*结构。好像每8个字节构成一个单元的形式

```
struct unit {
    int key;
    int value;
} 
```

如果字节顺序正确，您可以在 O(1) 中使用 reinterpret_cast 执行此操作。如果不是，您将不得不忍受 O(n) 转换工作。与 O(n log n) 搜索工作相比，两者都消失了。

当您拥有这些单元的数组时，您可以使用 std::sort ，例如：

```
bool compare_units(const unit& a, const unit& b) {
    return a.key < b.key;
}

std::sort(array, length, compare_units); 
```

此解决方案的关键是您先进行“交换”和字节解释，然后再进行排序。

# sql-server - 如何隐藏 SQL 中仅一个字段的查询中的重复项？

> ID：14786733
> 
> 赞同：0
> 
> 时间：2013-02-09T09:34:55.260
> 
> 标签：sql-server, sql-server-2008-r2

我是这个主题的新手，需要帮助...如何在 SQL 中仅一个字段的查询中隐藏重复项？例如，我有一张桌子

*   1、122、123、6
*   2、122、156、7
*   3、122、188、6
*   4、101、186、8

我想得到桌子

*   122、123、6
*   空,156, 7
*   空,188, 6
*   101、186、8

“Emty”意味着这个单元格应该是空的。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:00:36.517

这是一种可能的方法：

```
DECLARE @t TABLE (col1 INT, col2 INT, col3 INT, col4 INT)
INSERT @t VALUES 
(1, 122, 123, 69),
(2, 122, 156, 7),
(3, 122, 188, 6),
(4, 101, 186, 8)

SELECT  CASE WHEN ROW_NUMBER() OVER (PARTITION BY col2 ORDER BY col1) = 1 THEN col2 END col2_New
        , col3
        , col4
FROM    @t
ORDER BY
        col1 
```

只有第一次出现的 a`col2`将其值写入结果集中（值按`col1`升序排序），否则该值为 NULL（在数据库术语中表示未定义值）。它使用 TSQL函数，你可以**[在这里](http://msdn.microsoft.com/en-us/library/ms186734.aspx)**`ROW_NUMBER`阅读它。对函数的调用包含在条件表达式中，如果它是某个值的第一次出现，则可以只写出值。`ROW_NUMBER``CASE ... WHEN ... THEN ... END``col2`

# jquery - 在 jQuery 中转换 UNIX 时间戳

> ID：14786736
> 
> 赞同：5
> 
> 时间：2013-02-09T09:35:13.043
> 
> 标签：jquery, getjson

好吧，我使用带有 getJSON 的 php 页面从我的表中获取时间戳。这是结构。

main.php --> 使用 getJSON (abc.php) --> 我表中的值

有没有办法将此 UNIX 时间戳转换为这种格式：

> dd-mm-yyyy 在 hh:mm am

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T09:44:44.900

Unix 时间戳是自 1970 年（纪元）以来经过的秒数。您需要将其转换为 JS 中的日期对象：

```
var date = new Date(unixTimestamp*1000); // *1000 because of date takes milliseconds 
```

拥有日期对象后，您可以使用以下文章中提到的任何技术： [如何格式化 JavaScript 日期](https://stackoverflow.com/questions/3552461/how-to-format-a-javascript-date)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-24T10:17:22.857

```
var dt=eval(unixtimestamp*1000);
var myDate = new Date(dt);
return(myDate.toLocaleString()); 
```

这将给出如下输出：`10/27/2014, 12:58:45 PM`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-09T11:41:22.630

用于将 UNIX 时间戳转换为给定格式`dd-mm-yyyy at hh:mm am`；您必须首先构造一个 JavaScript Date 对象，然后使用本机 JavaScript Date 方法或 date.format jQuery 库。

## 第 1 步：构造日期对象

```
var timestampInMilliSeconds = unixTimeStamp*1000; //as JavaScript uses milliseconds; convert the UNIX timestamp(which is in seconds) to milliseconds.
var date = new Date(timestampInMilliSeconds); //create the date object 
```

## 第 2 步：转换为给定格式

**选项 #1 - 使用原生 JavaScript 日期方法**

```
var day = (date.getDate() < 10 ? '0' : '') + date.getDate(); //adding leading 0 if date less than 10 for the required dd format
var month = (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1); //adding leading 0 if month less than 10 for mm format. Used less than 9 because javascriptmonths are 0 based.
var year = date.getFullYear(); //full year in yyyy format

var hours = ((date.getHours() % 12 || 12) < 10 ? '0' : '') + (date.getHours() % 12 || 12); //converting 24h to 12h and using 12 instead of 0\. also appending 0 if hour less than 10 for the required hh format
var minutes = (date.getMinutes() < 10 ? '0' : '') + date.getMinutes(); //adding 0 if minute less than 10 for the required mm format
var meridiem = (date.getHours() >= 12) ? 'pm' : 'am'; //setting meridiem if hours24 greater than 12

var formattedDate = day + '-' + month + '-' + year + ' at ' + hours + ':' + minutes + ' ' + meridiem; 
```

**注意：**显示的日期将基于客户端时区。如果您需要基于 UTC 的时间；使用JavaScript 日期对象的**getUTCDate()**、**getUTCMonth()**、**getUTCFullYear()**、**getUTCHours()**、**getUTCMinutes()**和**getUTCHours()**方法，而不是提供的。

**选项 #2 - 使用 date.format jQuery 库**

*   **下载 date.format.js**

    [https://raw.githubusercontent.com/jacwright/date.format/master/date.format.js](https://raw.githubusercontent.com/jacwright/date.format/master/date.format.js)

*   **在 HTML 文件中包含 date.format.js**

    `<script src="/script dir/date.format.js"></script> //substitute "script dir" with the directory where date.format.js reside`

*   **格式化日期对象**

    您可以以与 PHP 类似的方式使用格式字符串

    `var formattedDate = date.format('d-m-Y \\a\\t h:i a');`

## 例子

**选项1**

```
var unixTimeStamp = 983112343;
var timestampInMilliSeconds = unixTimeStamp*1000;
var date = new Date(timestampInMilliSeconds);

var day = (date.getDate() < 10 ? '0' : '') + date.getDate();
var month = (date.getMonth() < 9 ? '0' : '') + (date.getMonth() + 1);
var year = date.getFullYear();

var hours = ((date.getHours() % 12 || 12) < 10 ? '0' : '') + (date.getHours() % 12 || 12);
var minutes = (date.getMinutes() < 10 ? '0' : '') + date.getMinutes();
var meridiem = (date.getHours() >= 12) ? 'pm' : 'am';

var formattedDate = day + '-' + month + '-' + year + ' at ' + hours + ':' + minutes + ' ' + meridiem;

alert(formattedDate);
```

**选项 #2**

```
var unixTimeStamp = 983112343;
var timestampInMilliSeconds = unixTimeStamp*1000;
var date = new Date(timestampInMilliSeconds);

var formattedDate = date.format('d-m-Y \\a\\t h:i a');
alert(formattedDate);
```

```
<script src="https://raw.githubusercontent.com/jacwright/date.format/master/date.format.js"></script>
```

**注意：**还有像 moment.js 这样的其他库，它们的功能也类似。

# python - ./mange.py syncdb 在 django 项目中获得权限被拒绝

> ID：14786737
> 
> 赞同：0
> 
> 时间：2013-02-09T09:35:18.047
> 
> 标签：python, mysql, django, permission-denied, django-syncdb

```
root@domU-xx-xx-39-04-x5-36:/opt/sana# ./manage.py syncdb
-bash: ./manage.py: Permission denied 
```

我都试过了`django.db.backends.mysql`，`mysql`对于“ENGINE”，我可以使用

```
mysql -u root -p 
```

我的 settings.py 文件正确 我的 Django 版本在 EC2 的 Ubuntu LTS 10.04 上是 1.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:37:21.577

检查`manage.py`具有执行权限。如果不给它

```
# chmod +x manage.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T12:27:30.383

**列出权限：**

```
ls -l 
```

**如果它对前 3 个字符“--x”有 x 权限：**

```
./manage.py syncdb 
```

**此外，您可以使用 python 执行它，只需读取权限“r--”：**

```
python manage.py syncdb 
```

# php - 在 PHP 脚本 MySQL 查询返回 NULL 列

> ID：14786742
> 
> 赞同：2
> 
> 时间：2013-02-09T09:35:46.273
> 
> 标签：php, mysql, null

我有这个 sql 查询：

```
SELECT * 
FROM products p, products_description pd, products_to_categories c left 
     join  products_sex ps on (c.products_id = ps.products_id), 
     categories cc 
WHERE p.products_id = pd.products_id 
      and p.products_id = c.products_id 
      and cc.categories_id = c.categories_id 
      and p.products_status = 1 
      and p.products_price >= 15.8333333333 
      and p.products_price <= 40 
      and p.products_quantity > 0 
      and (ps.products_sex = "U" or ps.products_sex is null) 
      and (c.categories_id = 77 or cc.parent_id = 77) 
ORDER BY products_sort_order, p.products_date_added desc, pd.products_name ASC 
LIMIT 0, 40 
```

如果我在 MySQL 客户端（命令行或 Navicat）执行它，我会得到以下结果：

```
products_id  |  dodavatelia_id  ...
2153         |  67              ... 
```

但是，如果我通过 PHP 脚本（使用 mysql_query 和 mysql_fetch_assoc）获取产品，我会得到：

```
array ( 
    'products_id' => NULL,  
    'dodavatelia_id' => '67', 
    ...
); 
```

**为什么我的 products_id 为 NULL？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:39:34.950

这可能是因为您要连接多个包含具有相同名称的列的表，`products_id`因此您在此处检索具有此名称的最后一列的值，该名称可能是`NULL`.

您应该为要检索的列设置别名：

```
SELECT p.products_id AS pPropId, p.* FROM products p, ... 
```

然后在您的 PHP 结果中，您可以像这样访问您的列：

```
$result['pPropId'] 
```

有关 SQL 别名功能的更多信息，请[点击此处](http://beginner-sql-tutorial.com/sql-aliases.htm)。

编辑：*为什么它在命令行中工作而不是在这里？*

SQL 查询工作正常，将返回name 的**每一**列`products_id`。问题是您使用`mysql_fetch_assoc()`它根据您的结果返回一个关联数组。而且你不能为数组中的同一个键有多个值。

因此，它可能在内部进行设置`$result['products_id'] = p.products_id`，但随后它对具有相同名称的下一列执行相同的操作以擦除先前的值。您可以使用没有此问题的[mysql_fetch_row() 。](http://www.php.net/manual/en/function.mysql-fetch-row.php)

一个好的做法是在 SELECT 中列出您真正想要检索的列，而不仅仅是`SELECT *`. 然后，具有相同名称的两个列需要不同的别名就变得合乎逻辑了。

# spring - 无法使用 Spring Java 邮件向外部电子邮件地址发送电子邮件

> ID：14786751
> 
> 赞同：0
> 
> 时间：2013-02-09T09:37:00.680
> 
> 标签：spring, smtp, jakarta-mail, mail-server

我在我的项目中开发了一个 Spring Java Mail 应用程序。我在`Spring.xml`文件中配置了我公司的邮件服务器名称。我正在使用`JavaMailSenderImpl`.

我的 spring.xml

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl"> 
 <property name="host" value="smtp.mycomp.com"/> 
</bean> 
```

在我的 java 类中

```
public class ServiceEmail {

           public JavaMailSender getMailSender() {
            return mailSender;
        }

        @Autowired
        @Required
        public void setMailSender(JavaMailSender mailSender) {
            this.mailSender = mailSender;

             message.setTo("example@gmail.com");
         message.setFrom(fromEmailAddress);

             try{
                this.mailSender.send(preparator);
               }catch(MailException e){

                   e.printstacktrac();

}
}

} 
```

但是，当我使用它时，我无法将任何邮件发送到 gmail 或任何其他邮件客户端，但`relaying denied exception`. 但它与我的内部服务器运行良好。是我的邮件服务器问题还是我需要为每个电子邮件客户端配置。如何配置它以工作所有邮件客户端。我可以在 XML 文件中配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T19:10:14.627

这个[JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#norelay)应该会有所帮助。

# node.js - app.post() 不适用于 Express

> ID：14786756
> 
> 赞同：8
> 
> 时间：2013-02-09T09:37:31.983
> 
> 标签：node.js, post, get, express

我遇到了 Express 问题，我尝试使用 app.post() 函数，但它不起作用，我不知道为什么......

虽然我包括了 bodyParser()...

问题：页面加载没有响应，没有错误消息。我没有看到 console.log()...

应用程序.js：

```
var express = require('express')
    , routes = require('./routes')
    , user = require('./routes/user')
    , postProvider = require('./postProvider.js')
    , http = require('http')
    , path = require('path')
    , compass = require('node-compass')
    , hash = require('./auth').hash;

var app = express();

app.configure(function () {
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(compass());
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
    app.use(express.cookieParser('dsqdq edsds'));
    app.use(express.session());
});

app.configure('development', function () {
    app.use(express.errorHandler());
});

app.get('/admin', function(req, res){
    res.redirect('login');
});

app.get('/login', function(req, res){
    res.render('login');
});

app.post('/login', function(req, res){
    console.log('test');
});

app.get('/', routes.index);

http.createServer(app).listen(app.get('port'), function () {
    console.log("Express server listening on port " + app.get('port'));
}); 
```

登录名玉：

```
extends layout

block content
  h1 Login
  h3 "tj" and "foobar"
  form(method="post", action="/login")
    input(type="text", placeholder="Username", autofocus="true", name="username")
    br
    input(type="password", placeholder="Password", name="password")
    br
    input(type="submit", value="login") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T09:59:13.860

我没有发现 app.post 代码有任何问题！

```
app.post('/login', function(req, res){
    console.log('test');
    res.end(); // end the response
}); 
```

一个建议是您应该结束发送给客户端的每个响应，否则您的服务器将变得无响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:49:28.063

您的 post 请求被发送到`/test`（因为您使用`action`了表单的属性），而您的 express listener 正在监听任何 post 请求`/login`。

您的代码应如下所示：

```
block content
  h1 Login
  h3 "tj" and "foobar"
  form(method="post", action="/login") 
```

如果你想让这个工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-27T17:17:12.090

虽然我没有仔细阅读这里提到的整个代码，但我发现了一个类似的问题并且能够对其进行调试。

我会分享我哪里出错了，也许这可能会对某人有所帮助。

下面的代码是 HTML 出错的部分：

```
<form action="/" method="**post**">

    <select name="crypto">
        <option value="BTC">Bitcoin</option>
        <option value="ETC">Ethereum</option>
        <option value="LTC">Litecoin</option>
    </select>

    <select name="fiat">
        <option value="USD">US Dollors</option>
        <option value="GBP">GB Pounds</option>
        <option value="EUR">EU Euros</option>
    </select>

</form> 
```

**查看**

此代码中的错误是，虽然（类型）是“提交”，但它并未包含在标签内。现在当您使用“app.post”方法获取数据或尝试“console.log(value)”的需求时，它无法访问。

我能够通过在表单中​​包含按钮标签来进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-18T08:42:36.293

我将 'router.post()...' 复制到另一个 js 文件，并在 app.js 中更改路由，它起作用了！但 'router.post()' 方法仍然是一个警告。有时它似乎是 webstorm 中的一个警告，但它实际上可以工作！

# python - Python ioerror errno 2 没有这样的文件或目录 pilutil

> ID：14786757
> 
> 赞同：1
> 
> 时间：2013-02-09T09:37:32.717
> 
> 标签：python, ioerror

我在 lubuntu 12.10 上使用 python 2.7.3 运行 python 脚本时遇到问题，它通过英特尔处理器的旧 mac 书（2009 年夏季，可能是 5,2 型）上的虚拟盒运行。

该脚本似乎检测到我通过命令行指定的视频文件，但我不确定出了什么问题。这是追溯以及导致错误的代码和代码。

1

```
src_dir = sys.argv[1]
out_dir = sys.argv[2]
bb_dir = sys.argv[3]
vid_name = sys.argv[4]

vid_src_name = src_dir + vid_name
vid_dest_name = out_dir + vid_name
vid_bb_name = bb_dir + vid_name

vid=video.asvideo(vid_src_name,down_factor) 
```

2

```
if hasattr(video_source, 'shape') and hasattr(video_source, 'dtype'):
    if len(video_source.shape) == 3:
        video_source.shape = video_source.shape + (1,)

    vshape = video_source.shape
    vdtype = video_source.dtype
    vid = Video(frames=vshape[0], rows=vshape[1], columns=vshape[2], bands=vshape[3], dtype=vdtype, initialise=False)
    vid.V = video_source
    return vid

if not os.path.exists(video_source):
    raise IOError(video_source + ' not found')

    (unusedfh,sample_filename) = tempfile.mkstemp()
 cmd = 'ffmpeg -i "' + video_source + '" -vframes 1 ' + sample_filename+'    %d' + image_ext + ' 2> /dev/null > /dev/null'
 sample_filename = sample_filename + '1' + image_ext
 subp.call(cmd, shell = True)
 sample_img = sp.misc.imread(sample_filename) 
```

3.

```
 im = Image.open(name) 
```

4.

```
 if mode != "r":
     raise ValueError("bad mode")

 if isStringType(fp):
     import __builtin__
     filename = fp
     fp = __builtin__.open(fp, "rb") 
```

输出：

```
cody@cody-VirtualBox:~/Dropbox/annotation/Template_Extractor$ python        template_extract_new.py "/home/cody/Work/annotate/UCF50/video/PushUps"     "/home/cody/Dropbox/annotation/template/Pushups" "/home/cody/Dropbox/annotation/bb/PushUps" "/v_PushUps_g01_c01.avi"
Traceback (most recent call last):
  File "template_extract_new.py", line 192, in <module>
    vid=video.asvideo(vid_src_name,down_factor)
  File "/home/cody/Dropbox/annotation/Template_Extractor/istare/video.py", line 135, in   asvideo
    sample_img = sp.misc.imread(sample_filename)
  File "/usr/lib/python2.7/dist-packages/scipy/misc/pilutil.py", line 102, in imread
    im = Image.open(name)
  File "/usr/lib/python2.7/dist-packages/PIL/Image.py", line 1952, in open
    fp = __builtin__.open(fp, "rb")
IOError: [Errno 2] No such file or directory: '/tmp/tmpklcTe61.bmp' 
```

错误中指示的文件每次都会更改，并且在运行之前不存在，但在运行命令后存在。

我试过从 uterm、uxterm 和 lxterminal 运行（知道它不会做任何事情，但无论如何都要尝试，而且在 uterm 中没有复制和粘贴）。

# jquery - 通过网站将来自网络摄像头的视频保存在用户的计算机上

> ID：14786758
> 
> 赞同：4
> 
> 时间：2013-02-09T09:37:39.103
> 
> 标签：jquery, html, flash, webcam

这是一个静态网页，我希望用户能够在浏览页面时录制自己的视频。因此无需将视频发送到服务器或流式传输给其他任何人。

页面的其余部分是 html，所以我希望找到一个简单的 API 或一段代码来完成这项工作。

[这](http://www.xarg.org/project/jquery-webcam-plugin/)是我能找到的，但比我需要的要多。它需要一个服务器...

注意：这将仅在少数计算机站上运行以进行某些数据收集。所以它不必在不同的系统上运行/没有存储限制/等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T04:56:43.283

**拍摄视频。**

我建议检查允许在 Chrome 和 Firefox 浏览器中访问视频和音频流的 WebRTC API：[https ://github.com/addyosmani/getUserMedia.js](https://github.com/addyosmani/getUserMedia.js)

**在客户端保存大文件**

文件系统 API 允许您在客户端大小上存储大文件，仅受可用磁盘空间量的限制。查看[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

# qt-jambi - 如何编译 qtjambi 示例

> ID：14786760
> 
> 赞同：1
> 
> 时间：2013-02-09T09:37:56.277
> 
> 标签：qt-jambi

我想用 qtjambi 做点什么。我安装了 4.6.3 版。我可以运行这些示例，但是当我想编译例如 ArthurFrame 时，我得到： ArthurFrame.java:47: com.trolltech.qt.core 包不存在

在寻求帮助时，看起来一切都已经死了。邮件列表不再存在，在#qtjambi 上也没有回复。我应该不从 qtjambi 开始，还是有其他地方可以寻求帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:13:39.023

我认为您在#qtjambi freenode IRC 频道上获得了更好的支持。当使用 IRC 获得支持时，您应该准备好提出问题并等待答案，至少 12 个月，但有时需要几天，在此期间您应该保持联系并“闲置”。

从那里发现您正在使用一个 Linux 发行版，该发行版已经自动构建了最近的 QtJambi。

Ubuntu：[https ://launchpad.net/~qtjambi-community/+archive/libqtjambi-snapshots](https://launchpad.net/~qtjambi-community/+archive/libqtjambi-snapshots)

*   页面上的说明如何安装。

openSuSE、SuSE、Fedora、RHEL、CentOS：[https ://build.opensuse.org/package/show?package=qtjambi-snapshots&project=home%3Adlmiles%3Aqtjambi-community](https://build.opensuse.org/package/show?package=qtjambi-snapshots&project=home%3Adlmiles%3Aqtjambi-community)

*   单击您正在使用的 Liunux disto 名称的链接（例如“openSuSE_12.2”）。
*   单击显示“转到下载存储库”的链接。
*   单击文件 *.repo 下载并保存在本地系统上。如“home:dlmiles:qtjambi-community.repo”
*   将此文件作为“root”安装到 /etc/yup.repos.d/home:dlmiles:qtjambi-community.repo
*   编辑文件以设置 'enabled=1' 或在使用 yum 安装时手动添加 --enablerepo=home:dlmiles:qtjambi-community。
*   跑：`yum install --enablerepo=home:dlmiles:qtjambi-community qtjambi-snapshot-all`

这些回购已在过去 18 个月中得到维护，并且应该在未来继续存在，同时各自的发行所有者以这种方式提供它们。

以这种方式安装后，您将在更新作为正常系统包管理的一部分发布时获得更新。历史上大约每 3 个月发生一次。

# twitter-bootstrap - “#grid > .core 未定义”当 lessc 编译引导程序时

> ID：14786761
> 
> 赞同：3
> 
> 时间：2013-02-09T09:37:56.680
> 
> 标签：twitter-bootstrap, less

我运行时出现以下错误`lessc bootstrap.less`

```
at less.Parser.parser.parse.i (/Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/js/lib/less/parser.js:385:31): #grid > .core is undefined (Less::ParseError)
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/parser.rb:61:in `block in to_css'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script/v8_context.rb:90:in `block in do_lock'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script/v8_context.rb:88:in `call'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script/v8_context.rb:88:in `Locker'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script/v8_context.rb:88:in `do_lock'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script/v8_context.rb:60:in `lock'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script/v8_context.rb:30:in `exec'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/java_script.rb:26:in `exec'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/parser.rb:61:in `to_css'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/bin/lessc:99:in `<top (required)>'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/bin/lessc:19:in `load'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/bin/lessc:19:in `<main>'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我发现[了这个问题](https://github.com/twitter/bootstrap/issues/2620)。但我已经将我的lessc 升级到1.3。

这是版本：

```
lessc -v 
```

lessc 1.3.0 (LESS 编译器) [Ruby] 2.2.2

引导源文件是从 github 克隆的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-12T08:51:46.473

我们需要**升级 less 到 1.3.3 版本**。

示例（如果您在 node.js 中运行**较少）**

```
sudo npm install -g less 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T16:39:59.810

我找到了解决办法！

1.  转到[less.js 存储库](https://github.com/cloudhead/less.js/tree/v1.3.3)并将存储库下载为 zip 文件
2.  转到[less.rb repo 的这个分支并将 repo](https://github.com/populr/less.rb/tree/v2.2.2-less1.3.3)下载为 zip 文件
3.  将 /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/loader.rb 替换为步骤 2 中存储库中该文件的版本（lib/less /loader.rb)
4.  将 /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/lib/less/js/ 的内容替换为步骤 1 中 repo 的内容

应该这样做！有两点需要注意：

1.  当我实现这个解决方案时，我使用的是 ruby​​ 1.9.3-p385
2.  将 /Users/ftiasch/.rvm/gems/ruby-1.9.3-p374/gems/less-2.2.2/ 的内容替换为步骤 2 中的 repo 的内容对我不起作用。要是真的就好了...

# sql - T-SQL，如何按查询进行分组？

> ID：14786764
> 
> 赞同：2
> 
> 时间：2013-02-09T09:38:13.907
> 
> 标签：sql, sql-server, sqlite, tsql

我对此信息有一个看法：

> **表 A（ IDTableA**、IDTableB、IDTableC、活动、日期、...）

对于 in 中的每个寄存器`TableA`和 in 中的每个寄存器`tableC`，我希望该寄存器`tableB`具有最大日期并且处于活动状态。

```
select IDTableA, IDtableC, IDTableB, Date, Active
from myView
where Active = 1
group by IDTableA, IDTableC
Having Max(Date)
order by IDTableA; 
```

此查询适用于`SQLite`，但如果我在其中尝试此查询，则会`SQL Server`收到一个错误，指出`IDTableB`in`select`不包含在`group`子句中。

我知道理论上 SQLite 中的第一个查询不应该工作，但要这样做。

如何在 SQL Server 中执行此查询？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:49:51.313

根据 SQL 92，如果使用`GROUP BY`子句，则在`SELECT`输出表达式列表中，您只能使用列表中提到的`GROUP BY`列，或任何其他列，但它们必须包装在聚合函数中，如`count()`, `sum()`, `avg()`,等[。](http://msdn.microsoft.com/en-us/library/ms138031.aspx)`max()``min()`

一些服务器，如 MSSQL、Postgres 对此规则非常严格，但例如 MySQL 和 SQLite 则非常宽松和宽容——这就是它让你感到惊讶的原因。

长话短说 - 如果您希望它在 MSSQL 中工作，请遵守 SQL92 要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:44:53.147

SQLServer 中的此查询

```
select IDTableA, IDtableC, IDTableB, Date, Active
from myView v1
where Active = 1
  AND EXISTS (
              SELECT 1
              FROM myView v2
              group by v2.IDTableA, v2.IDTableC
              Having Max(v2.Date) = v1.Date
              )
order by v1.IDTableA; 
```

或者

同样在 SQLServer2005+ 中，您可以将 CTE 与 ROW_NUMBER 一起使用

```
;WITH cte AS
 (              
  select IDTableA, IDtableC, IDTableB, [Date], Active,
         ROW_NUMBER() OVER(PARTITION BY IDTableA, IDTableC ORDER BY [Date] DESC) AS rn
  from myView v1
  where Active = 1
  )
  SELECT *
  FROM cte
  WHERE rn = 1
  ORDER BY IDTableA 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T09:49:39.120

试试这个，

```
select * from table1 b
where active = 1
and date = (select max(date) from table1
            where idtablea = b.idtablea
            and idtablec = b.idtablec
            and active = 1); 
```

**[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!6/0bdae/3/0)**

# c# - 如果没有安装 Visual Studio，程序将无法启动？

> ID：14786770
> 
> 赞同：6
> 
> 时间：2013-02-09T09:39:32.670
> 
> 标签：c#, entity-framework, publish

我们一直在为一家公司开发预订系统。当我们第一次尝试在他们的计算机上运行它时，它说我们需要下载 .NET Framework 4.0。所以我们这样做了（或者更确切地说，我们下载了 4.5 版，因为 4.0 的链接不起作用）。现在，当我们尝试运行它时，什么也没有发生。

我们已经使用实体框架在 C# 中构建了该程序 - 如果缩小范围，则代码优先。

发布时我们是否遗漏了设置中的某些内容？我们已经尝试在发布和发布向导中编译它，但都不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:16:22.073

这很可能是由于缺少程序集。在您的开发配置中，您拥有运行程序的所有库，并且在部署中，缺少/缺少 dll。

您可以尝试控制开发机器的 GAC，并尝试定位您正在使用的任何库（除了 .net 库）是否安装在 GAC 中。然后，您可能一直在引用 GAC 中的 dll，而在部署中，GAC 中可能缺少此库。我以前在一个共享点项目中看到过这一点。

此外，检查 Windows 事件日志也很有用。您可以找到实际的异常。

ps如果这是一个asp.net项目，别忘了`regiis.exe`在框架部署后运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:29:22.020

If your application has a GUI and it doesn't show means, that your application fails in the constructor. The best thing you can do is to log every step from constructor with something like this:

```
public void log(string msg)
{
  StreamWriter file2 = new StreamWriter(@"c:\file.txt", true);
  file2.WriteLine(msg);
  file2.Close();
} 
```

and than call it after every line in constructor like

```
log("InitializeComponent"); 
```

If you use FormLoad events, you should also do it there. Also check your code for empty try catches.

# actionscript-3 - 我将如何修改绘图功能以适应扩展的形状数组？

> ID：14786772
> 
> 赞同：0
> 
> 时间：2013-02-09T09:39:42.950
> 
> 标签：actionscript-3

我将源代码复制并粘贴到我的代码中，然后扩展了 tetrominoes 数组以包含另外 5 个形状。它们被正确绘制，但 DrawNext 函数在容纳它们时遇到问题。对函数进行编码以便使用扩展数组的最佳方法是什么？

我的代码：

```
private function DrawNext():void {
    if (getChildByName("next")!=null) {
        removeChild(getChildByName("next"));
    }
    var next_t:Sprite=new Sprite();
    next_t.x=352;
    next_t.name="next";
    addChild(next_t);
    next_t.graphics.lineStyle(0,0xFFFFFF);
    //The problem is here! Everything in the Output windows points to either it or this method
    //i and j check to see if a piece in the grid is empty (0) or full (1).
    for (var i:int=0; i<tetrominoes[nextTetromino][0].length; i++) {
        for (var j:int=0; j<tetrominoes[nextTetromino][0][i].length; j++) {
                //When it encounters a 1, it draws a new sprite of a particular color
                //The color is determined by the piece that is being drawn.
            if (tetrominoes[nextTetromino][0][i][j]==1) {
                next_t.graphics.beginFill(colors[nextTetromino]);
                next_t.graphics.drawRect(tileSize*j,tileSize*i,tileSize,tileSize);
                next_t.graphics.endFill();
            }
        }
    }
}
private function BuildTetrominoes():void {
    // I
    tetrominoes[0]=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],
        [[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]];
    colors[0]=0x00FFFF; //Cyan
    // T
    tetrominoes[1]=[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],
         [[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],
         [[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
         [[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]];
    colors[1]=0xAA00FF; //Purple
    // L
    tetrominoes[2]=[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],
         [[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],
         [[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
         [[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]];
    colors[2]=0xFFA500; //Orange
    // J
    tetrominoes[3]=[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
         [[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],
         [[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],
         [[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]];
    colors[3]=0x0000FF; //Blue
    // Z
    tetrominoes[4]=[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],
         [[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]];
    colors[4]=0xFF0000; //Red
    // S
    tetrominoes[5]=[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],
         [[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]];
    colors[5]=0x00FF00; //Green
    // O
    tetrominoes[6]=[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]];
    colors[6]=0xFFFF00; //Yellow
    //X
    tetrominoes[7] = [[[0,1,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]]];
    colors[7] = 0x00FF80;
    //U
    tetrominoes[8] = [[[1,1,1,0],[1,0,1,0],[0,0,0,0],[0,0,0,0]],
        [[1,1,0,0],[1,0,0,0],[1,1,0,0],[0,0,0,0]],
        [[1,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
        [[0,0,1,1],[0,0,0,1],[0,0,1,1],[0,0,0,0]]];
    colors[8] = 0xFF007F;
    //V
    tetrominoes[9] = [[[1,1,0,0],[1,0,0,0],[0,0,0,0],[0,0,0,0]],
        [[0,0,1,1],[0,0,0,1],[0,0,0,0],[0,0,0,0]],
        [[0,0,0,0],[0,0,0,0],[0,0,0,1],[0,0,1,1]],
        [[0,0,0,0],[0,0,0,0],[1,0,0,0],[1,1,0,0]]];
    colors[9] = 0xFF00FF;
    //Colon
    tetrominoes[10] = [[[1,1,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]
        [[1,0,0,0],[1,0,0,0],[0,0,0,0],[0,0,0,0]]];
    colors[10] = 0x0080FF;
    //Dot
    tetrominoes[11] = [[[1,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]];
    colors[11] = 0xFF4000;
} 
```

源代码几乎相同，除了 BuildTetrominoes() 函数中的形状 7-11。

# html - 如何将我的 HTML 代码放入已发布的网站

> ID：14786773
> 
> 赞同：-1
> 
> 时间：2013-02-09T09:39:52.687
> 
> 标签：html, http-status-code-404, webpage, web-publishing

我觉得这是一个足够简单的问题，应该已经提出并回答了，但我在搜索中没有看到任何内容。

我正在为我在学校的俱乐部创建一个网站，并且需要发布/使其实时/公开，无论您想怎么称呼它。到目前为止，它只是一个简单的 HMTL 文档，但是一旦我启动并运行它，我将使用 CSS 和 Javascript 对其进行扩展（当我学习它们时，哈哈）。那么如何将这个 HTML 文件变成一个真实的网站呢？以下是一些关键信息：

*   HMTL 代码位于我桌面上的一个文件 (blablabla.html)
*   我有学校为我分配的服务器空间。无需查找域。
*   我熟悉使用 ssh 访问所述服务器，并且我已经连续使用 scp 将我的 html 文件上传到服务器地址，但是当我通过 Chrome 导航到网页时，我得到一个 Object Not Found/404 错误。
*   我现在想用老式的方式来做这件事，但是如果有任何关于 Ubuntu 上的网络发布套件的建议，欢迎他们。

那么我到底需要做些什么才能使它成为一个工作网页呢？我需要放置 .html 文件的特定位置，它必须具有的特定名称吗？我错过了什么？

PS 一旦我让它工作，我如何获取/上传一些 MIDI 音乐，让我的网站有 90 年代早期的老式感觉？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:08:18.863

是的，如果该文件是您的主页，请尝试将其重命名为*index.html 。*您试图通过哪个 URL 访问您的网站？[http://example.com/mysite/](http://example.com/mysite/)？？？或者也许[http://example.com/mysite/blahblah.html](http://example.com/mysite/blahblah.html) ??

# dart - 为什么 MouseEvent.toElement 返回节点？

> ID：14786778
> 
> 赞同：2
> 
> 时间：2013-02-09T09:40:58.957
> 
> 标签：dart

为什么[MouseEvent.toElement](http://api.dartlang.org/docs/bleeding_edge/dart_html/MouseEvent.html#toElement)返回[Node](http://api.dartlang.org/docs/bleeding_edge/dart_html/Node.html)？

我假设它应该返回[Element](http://api.dartlang.org/docs/bleeding_edge/dart_html/Element.html)，或者该方法应该重命名为 toNode。

就目前而言，当我编写以下内容时，让飞镖编辑器警告我访问样式属性并不理想：

```
event.toElement.style.textDecoration = "line-through"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T15:30:59.147

我相信调用它是`toElement()`为了使其与我们在 DOM/JavaScript 领域中已有的内容保持一致。它很早以前就被微软命名了，现在已经被多个浏览器所采用。所以，我认为在 Dart 中我们希望保持相同的名称。

但是，我们是否应该将其注释为 return`Node`或`Element`，这是一个很好的问题。我相信在几乎所有（如果不是全部）情况下，返回的对象确实是一个`Element`，如果它被键入返回一个会更好`Element`。但是，可能存在实际返回 a 的极端情况`Node`（请记住，元素扩展节点）。通过快速测试，我找不到任何这样的案例。也许与手动事件触发。

也许这个选择背后的 Dart 工程师可以给我们一些启示。

# php - 即时生成和打印培训文档

> ID：14786782
> 
> 赞同：0
> 
> 时间：2013-02-09T09:41:16.280
> 
> 标签：php

我手头有一些任务，我必须即时生成和打印培训证书。待打印证书的人将上传他的图像​​，添加他的姓名和名称，点击打印命令后，证书将生成并打印。该模块将使用 PHP 在 localhost 上运行。如何进行 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:46:24.383

[mPDF](http://www.mpdf1.com/mpdf/index.php)或[TCPDF](http://www.tcpdf.org/)。使用用户提供的数据管理 html 并动态解析。
当然，您可以使用上述库自由输出常规 html 文档，而不是 pdf。
如果您要问如何构建一个表单来接收来自用户的数据-您应该从阅读基础知识开始-可用的变体种类繁多...

# java - 一些奇怪的 getString 错误

> ID：14786790
> 
> 赞同：-2
> 
> 时间：2013-02-09T09:41:56.803
> 
> 标签：java, file-io

我有一个类设置为返回一个字符串，如下所示：

```
package TextRPG;

public class File {

    static String file;

    public static void setFile(String fileLocation) {
        file = fileLocation;
    }

    public static String getFile(){
        return file;
    }
} 
```

但是当我尝试这样称呼它时： `PrintWriter save = new PrintWriter(File.getFile());` 我得到一个错误。我究竟做错了什么？编辑，netbeans 错误是：找不到符号符号：方法 getFile() 位置：类文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:51:11.073

因为您忽略了 Java 命名约定，所以您已经中了自己的脚。

变量名应以小写字母开头。因此：

```
package textrpg;

public class File {
    static String file;

    public static void setFile(String fileLocation) {
        file = fileLocation;
    }

    public static String getFile(){
        return file;
    }
} 
```

java 编译器不关心这个......但是你的脚发生了，因为你在一个名为`File`的类中声明了一个名为的字段`File`，而 Java 消除名称冲突的歧义规则给出了一个奇怪的答案。

（如果您包含编译器错误消息，则更容易解释......）

* * *

这个类还有其他几个问题：

*   这是非常非 OO 的代码。你有一个静态字段和静态方法来获取和设置它。这种事情有点“恶心”......如果您需要在另一个上下文中重用代码，或者实现单元测试等，将会导致问题。

*   您正在使用与众所周知的标准类 ( `java.io.File`) 相同的名称。如果您的应用程序中的某些其他类需要同时使用`java.io.File`和 ，这可能会导致以后出现问题`textrpg.File`。

*   您还忽略了有关如何形成旨在避免包名称冲突的包名称的约定。

* * *

在编写更多代码之前，我强烈建议您阅读[Sun Java Coding Conventions](http://www.oracle.com/technetwork/java/codeconv-138413.html)。除非你有一个*非常*好的理由不这样做，否则请跟随他们。（“我不能被打扰”不是一个很好的理由，IMO。）

* * *

啊。所以编译错误是这样的：

```
PrintWriter save = new PrintWriter(File.getFile()); 
```

它是说它找不到调用`getFile()`in的方法`File`。

没有看到那节课的其余部分，我无法确定。但是，我*怀疑*您正在导入`java.io.*`... 这意味着`File`代码片段中的 将引用`java.io.File`... 它没有`getFile()`方法！

# android - Android后台调用登录页面

> ID：14786796
> 
> 赞同：0
> 
> 时间：2013-02-09T09:43:02.060
> 
> 标签：android

我正在开发该应用程序中的某个应用程序，我需要从后台通过 Web 服务登录到页面，并且 Web 服务响应将出现在 UI 屏幕上。请给我一些指导。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:48:36.937

您应该使用 android 提供的用于后台操作的 asynctask 类。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - 实例化引用新教员的 Employee 变量

> ID：14786804
> 
> 赞同：0
> 
> 时间：2013-02-09T09:44:40.623
> 
> 标签：java

实例化一个引用新教员的 Employee 变量。这是什么意思？我对此感到困惑。

这是班级的历史。

```
interface Rules 
Employee implements Rules
Faculty extends Employee 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T09:48:43.963

类层次结构错误。教师不是雇员，因此不应该有继承层次结构。

这句话没有多大意义，因为实例化一个变量没有任何意义。我认为这意味着：创建 Employee 类的新实例。员工应引用 Faculty 的实例。所以它应该有一个类型为 Faculty 的字段。

编辑：

根据完整的说明，类层次结构是正确的。但是Faculty类的名字非常糟糕。它应该被命名为“FacultyMember”或“Professor”（因为它就是这样）。

措辞也不是很好选择。在这种情况下，“实例化引用新教员的员工变量”的含义是：

```
Employee employee = new Faculty(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:47:41.920

胡乱猜测：

```
Employee employee = new Employee();
employee.faculty = new Faculty(); 
```

# c - 编写一个 C 函数来解析十六进制字符串并将其转换为十进制？

> ID：14786806
> 
> 赞同：-2
> 
> 时间：2013-02-09T09:45:05.447
> 
> 标签：c

我只是在学习 C，在我的课堂上这是我们第一个程序的一部分。

我正在尝试实现的功能的完整描述：

如果那是tl; dr，关键是我不允许使用其他库中的函数（因此`srtol`排除了类似的东西）。

> `int parseHexString(char *hexString, int *integerRead);` 第一个参数是一个以空结尾的 C 字符串，它表示一个十六进制整数。这个函数解析这个字符串，累加它代表的整数值。这个整数值被放置在第二个参数 integerRead 指向的位置。如果遇到错误的十六进制字符，即无效的十六进制值，此函数将停止查看字符串中的其他字符并返回 -1。如果解析了一个好的十六进制值，则返回 0。
> 
> 实现此函数的正确方法是首先查看字符串中的第一个字符，并且不使用堆栈来完成解析。您的第一个汇编语言程序将需要实现这个函数完成的任务，因此您可以通过正确的方式实现这个函数来节省时间。
> 
> 对于这个函数，不要调用任何库中的任何函数；作为一个例外，仅出于调试目的，您可以使用`printf()`. 如果您在提交作业之前删除调试代码，这将有助于我们的评分。

我不只是在寻找这个功能的完整实现，只是一些提示或提示让我开始。

我觉得好像有一些直观的方法可以做到这一点，但现在我正在空白。我关心我应该如何从字符串的第一个字符开始，然后从那里继续将其转换为十进制。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:51:24.537

怎么样：

*   获取字符串的长度
*   从左到右走线
*   对于每个字符：
    *   检查它是否是有效的十六进制字符
    *   加上它的十进制值乘以 16^x，其中 x 是左边的字符数

# php - 如何使用 PHP 制作一个自动重启的倒数计时器

> ID：14786807
> 
> 赞同：0
> 
> 时间：2013-02-09T09:45:08.593
> 
> 标签：php, javascript, jquery, countdowntimer

我需要制作一个倒计时计时器，该计时器在时间过去后自动重新启动。

例如，我需要从英国时间下午 3 点或 15:00 开始倒计时，并在时间到时重新开始计数。

我一直在尝试使用一些 jQuery，但这会显示浏览器时间而不是服务器时间。如果有人能够分享解决方案，请告诉我。

提前致谢！

下面的代码是一个完美的工作示例：[https ://gist.github.com/Majestik/3964527](https://gist.github.com/Majestik/3964527)

```
if (document.getElementById('countdownTimer')) {
    pad = function(n, len) { // leading 0's
        var s = n.toString();
        return (new Array( (len - s.length + 1) ).join('0')) + s;
    };
    function countDown() {
        var now = new Date();
        if ( (now.getDay() >= 1) && (now.getDay() <= 5) ) { // Monday to Friday only
            var target = 15; // 15:00hrs is the cut-off point
            if (now.getHours() < target) { // don't do anything if we're past the cut-off point
                var hrs = (target - 1) - now.getHours();
                if (hrs < 0) hrs = 0;
                var mins = 59 - now.getMinutes();
                if (mins < 0) mins = 0;
                var secs = 59 - now.getSeconds();
                if (secs < 0) secs = 0;
                var str = pad(hrs, 2) + ':' + pad(mins, 2) + '.<small>' + pad(secs, 2) + '</small>';
                document.getElementById('countdownTimer').innerHTML = str;
            }
        }
    }
    var timerRunning = setInterval('countDown()', 1000);
}

 Time remaining: <span id="countdownTimer"><span>00:00.<small>00</small></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:51:06.110

在您的 PHP 代码中，当您编写包含此 javascript 文件的 HTML 时，只需在此处设置变量，而不是在加载后让 javascript 执行此操作，这样您使用的是服务器时间而不是浏览器时间。

# jquery - jquery - 如何防止executeSql的延迟执行？

> ID：14786810
> 
> 赞同：0
> 
> 时间：2013-02-09T09:45:20.093
> 
> 标签：jquery, html, mobile

我是 jquery mobile 的新手。

我的问题是首先，我必须从数据库中获取一个值（对于使用 fn toGetQuestionNumber 的 QnNumber），然后在 xmlParser 函数中使用该值。

如果以正确的顺序执行 - 警报应按顺序显示 - 第一、第二、第三。

但是显示的是警报以第二、第三、第一的形式出现。（意味着 db 函数 toGetQuestionNumber 仅在最后执行！）

如何让 toGetQuestionNumber 首先执行 - 所以我得到 QnNumber 的值 - 然后执行 xmlParser？

/////////////////////////////////////////

```
$('#alpha').live('pageshow', function(event) {
    var day         = getUrlVars()["day"];
    var module      = getUrlVars()["module"];

    var QnNumber=1;

        var db = openDatabase("Exam", "1.0", "The Exam", 200`enter code here`000);
        var dataset;
        var selectAllStatement = "SELECT  TotQn, TotAnswd FROM QuizScore where DayID=" + day + " and ModuleID=" + module ;

        function toGetQuestionNumber() {

            db.transaction(function(tx) 
            {
              tx.executeSql(selectAllStatement, [], function(tx, result) 
              {
                dataset = result.rows;
                for (var i = 0, item = null; i < dataset.length; i++) 
                {
                  item = dataset.item(i);
                  //if(item['TotAnswd']>0)
                  //{
                     QnNumber = item['TotAnswd'];
                     alert('First=' +QnNumber); ////// First Alert
                  //}
                }
              });
            });
      }

    toGetQuestionNumber();
      alert('Second' + QnNumber);  ////// Second Alert

    var xml;
    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "data/quiz.xml",
            dataType: "xml",
            success: xmlParser
        });
    });

         //loading XML file and parsing to .main div.
       function xmlParser(data) 
        {
            xml = data;
            $('#list').empty();

             alert('Third' + QnNumber); ////// Third Alert
        }

    $('#list').trigger('create');

    }); 
```

///////////////////////////////////////// //////

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:54:59.710

javascript永远不会停止

toGetQuestionNumber(); 将直接返回，它不会等待您的 tx.executeSql

所以，alert('Second' + QnNumber); 被首先调用

其次，在页面就绪回调中，您执行 ajax 请求，但这不是放置此就绪回调的地方

而不是做

```
.live
  .ready 
```

做

```
.ready
  .live 
```

请记住 javascript 是异步的，操作后有一些回调，例如 $.ajax 和 tx.executeSql

如果您想要在第一个操作之后调用第二个操作，请在第一个操作的结束回调时启动第二个操作

尝试这样的事情：

```
$(document).ready(function(){
$('#alpha').live('pageshow', function(event) {
    var day         = getUrlVars()["day"];
    var module      = getUrlVars()["module"];

    var QnNumber=1;

    var db = openDatabase("Exam", "1.0", "The Exam", 200`enter code here`000);
    var dataset;
    var selectAllStatement = "SELECT  TotQn, TotAnswd FROM QuizScore where DayID=" + day + " and ModuleID=" + module ;
    var xml;

    //loading XML file and parsing to .main div.
    function xmlParser(data) 
    {   // if here ajax request is end
        xml = data;
        $('#list').empty();
        alert('Third' + QnNumber); ////// Third Alert

        $('#list').trigger('create');
    }

    function toGetQuestionNumber() {
        db.transaction(function(tx) 
        {
            tx.executeSql(selectAllStatement, [], function(tx, result) 
            {
                dataset = result.rows;
                for (var i = 0, item = null; i < dataset.length; i++) 
                {
                  item = dataset.item(i);
                  //if(item['TotAnswd']>0)
                  //{
                      QnNumber = item['TotAnswd'];
                      alert('First=' +QnNumber); ////// First Alert

                      // if here, db request is end !

                      alert('Second' + QnNumber);  ////// Second Alert

                      // call ajax request

                      $.ajax({
                      type: "GET",
                      url: "data/quiz.xml",
                      dataType: "xml",
                      success: xmlParser
                      });
                  //}
                }
            });
        });
    }

    // start all
    toGetQuestionNumber();

});
}); 
```

# javascript - Backbone 集合和 Backbone 模型事件

> ID：14786815
> 
> 赞同：0
> 
> 时间：2013-02-09T09:46:24.677
> 
> 标签：javascript, backbone.js

我有两个视图在我的集合中监听不同的事件。

```
this.cartCollection.on('quantityAdded', this.QuantityAdded, this);          
this.cartCollection.on('quantitySubtracted', this.QuantitySubtracted, this);
this.cartCollection.on('salesPriceRateUpdated', this.UpdateCartItemPrice, this);
this.cartCollection.on('unitMeasureUpdated', this.ChangeItemPriceOnUnitMeasure, this);
this.cartCollection.on('warehouseCodeUpdated',this.ChangeItemPriceOnWarehouseCode,this)
this.cartCollection.on('quantityOrderedUpdated', this.UpdateCartItem, this);
this.cartCollection.on('quantityDefectiveUpdated', this.UpdateCartItem, this);
this.cartCollection.on('discountUpdated', this.UpdateCartItem, this);       
this.cartCollection.on('discountAppliedToAll', this.ApplyDiscountToAll, this);

this.cartCollection.on('clearedTransaction', this.VoidTransactionWithValidation, this) 
```

在 maintemplate.js 我有这个

```
this.collection.bind("add", this.ModelAdded, this);         
this.collection.bind("change", this.ModelChanged, this);
this.collection.bind("viewDetails", this.ShowItemDetails, this);
this.collection.bind("viewFreeStock", this.ShowFreeStock, this);
this.collection.bind("viewAccessory", this.ShowAccessory, this);
this.collection.bind("viewSubstitute", this.ShowSubstitute, this);
this.collection.bind("itemRemoved", this.RemoveItem, this);
this.collection.bind("reset", this.ReinitializeCart, this); 
```

但是在我的模板上，这些事件来自我的模型，该模型链接到我的收藏。触发后`this.cartCollection.on('salesPriceRateUpdated', this.UpdateCartItemPrice, this);`

当我触发this.UpdateCartItemPrice' 不再捕获任何事件时，我正在更新集合，`this.cartCollection.reset`然后在此之后传递更新的模型。我什至尝试添加相同的结果。`this.cartCollection.add(data)``salesPriceRateUpdated maintemplate``{merge:true}`

关于如何正确保留事件绑定的任何想法？谢谢

# ruby-on-rails - Sidekiq 未在数据库中找到元素

> ID：14786818
> 
> 赞同：0
> 
> 时间：2013-02-09T09:46:43.583
> 
> 标签：ruby-on-rails, ruby, sidekiq

我的应用程序中有一个 Sidekiq 工作者，它的工作原理基本上是这样的：

```
class SetResultsWorker
  include Sidekiq::Worker

  def perform
    ResultSetter.new.set_results!
  end
end

class ResultSetter
  def set_results!
    events = Event.started.without_results
    do_something if events.any?
  end
end 
```

问题是这个events.any？在不应该返回的`false`时候返回。范围没有问题，因为当同步执行工作程序时（`SetResultsWorker.new.perform`），一切正常。有任何想法吗？

编辑：更多信息。该工作程序由守护程序定期执行。第一次执行没问题，但随后它停止工作。

# symfony - Symfony FOSUser Bundle - 为密码更改设置 failure_path

> ID：14786824
> 
> 赞同：0
> 
> 时间：2013-02-09T09:47:35.917
> 
> 标签：symfony, fosuserbundle

我知道我们可以为 form_login 设置失败路径；

```
form_login:
            provider:       fos_userbundle
            failure_path:   /register
            default_target_path: /home 
```

如何为配置文件编辑和密码更改设置相同的结构。（个人资料/编辑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:40:21.617

AFAIK，不，这是不可能的。

[form_login](http://symfony.com/doc/2.0/book/security.html#book-security-form-login)由 symfony2 而非 fos_userbundle 处理

> 通过指定 form_login，您已经告诉 Symfony2 框架，每当向此防火墙发出请求导致用户需要验证自己的身份时，用户将被重定向到能够输入其凭据的表单。毫无疑问，您已将我们之前声明的用户提供程序服务指定为防火墙的提供程序，以用作身份验证过程的一部分。

由于 symfony2 负责安全上下文令牌的填充，如果已经让位于其他人来设置故障路径。

> 但是对于您的情况，它完全由您控制，那么为什么需要该设置？

我建议您阅读有关[安全性的更多信息](http://symfony.com/doc/2.0/book/security.html)

# github - github分支和合并

> ID：14786829
> 
> 赞同：0
> 
> 时间：2013-02-09T09:48:26.617
> 
> 标签：github, merge, branch

我对 github 比较陌生（我已经将我的 rails 应用程序推送到了一个仓库，并且我会定期推送它以保持更新，并带有“提交”消息，这对于查看我的位置非常方便），我只是想要检查我即将正确地完成下一个阶段，而不会把它搞砸。

一些历史：几个月前，一家软件开发公司给我发了项目的源代码，我委托他们去做。它被称为 Project_v_1。几个月来，我一直在更改 css/javascript/html - 模型和控制器还不适合我！

但是我已经完成了大量的工作，并且正如我所说的，我会定期更新它。Project_v_1 是 master 分支（实际上是 repo 中唯一的分支）

现在我即将从软件公司收到 Project_v_2。我想将我对 Project_v_1 所做的最好的更改放入 Project_v_2。我是否必须手动查找我所做的文件中的更改并将它们复制/粘贴到 P_v_2 中？

或者我可以做类似的事情：

*   在我的仓库中创建一个新分支：P_v_2
*   将 P_v_2 放入该分支。
*   合并 P_v_2 和我的主人 (P_v_1)。

我被打脸了吗？认为我的问题有一个简单的解决方案似乎有点神奇。

谢谢， C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T09:57:03.027

`git merge`将每个提交合并`v1`到`v2`. 我建议您使用`cherry-pick`它对在分支之间应用相同的提交很有用：

1.  结帐`v2`分支和`git cherry-pick <your-best-commit-id>`

# xcode - 忽略perl中的空行？

> ID：14786833
> 
> 赞同：0
> 
> 时间：2013-02-09T09:48:42.100
> 
> 标签：xcode, perl, automator

我正在尝试为 Xcode 编写一个 Automator shell 脚本，以使我的导入列表独一无二。诀窍是，我不希望它们排序。所以我发现这个 perl 魔法几乎可以完美运行：

```
# Print all unique lines
perl -ne 'print unless $a{$_}++' 
```

唯一的问题是它删除了我的#imports 之间的所有空格。我喜欢按功能对导入进行分组...

```
//Model  
#import This.h
#import That.h

// ViewControllers
#import ThisView.h
#import ThatView.h 
```

...所以我想保留这些空间。

上述咒语是否有一些变化会忽略空格？如果没有，还有其他方法可以影响这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T10:02:41.130

像这样的东西：

```
perl -ne 'print unless /\S/ && $a{$_}++' 
```

“打印，除非该行包含非空白字符并且已存在于您的哈希中”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-09T10:39:26.500

如果您只想影响导入，也许最简单的解决方案是将重复数据删除限制为以 . 开头的行`#`。

```
perl -ne 'print unless /^\s*#/ && $a{$_}++' 
```

# android - android phonegap 上的 Css3 过渡

> ID：14786835
> 
> 赞同：1
> 
> 时间：2013-02-09T09:48:47.753
> 
> 标签：android, html, css, css-animations

我想用phonegap制作一个android应用程序。阅读文章[http://daneden.me/2011/12/putting-up-with-androids-bullshit/](http://daneden.me/2011/12/putting-up-with-androids-bullshit/)后，我发现 CSS 动画只有在你将每个角色都放在自己的关键帧 decleration 中时才有效。现在我的导航动画效果很好，但标签与内容的过渡效果不佳。在这里你可以看到它：http: [//jsfiddle.net/XVqtm/](http://jsfiddle.net/XVqtm/)

```
'<a> .tabs input.tab-selector-1:checked ~ .content .content-1, 
```

我感谢每一个答案！

来自德国的美好问候

# entity-framework - 关闭导航属性

> ID：14786838
> 
> 赞同：1
> 
> 时间：2013-02-09T09:49:02.530
> 
> 标签：entity-framework, visual-studio-2012, entity-framework-5, ef-database-first

使用 VS 2012、Entity Framework 5 和 SQL Server Express 2012。

我有一个 SQL Server 数据库来为应用程序提供服务`Web API`；因为它主要用于移动设备，所以我想最小化数据传输，所以我想禁用导航属性。我已将`ProxyCreationEnabled`and设置`LazyLoadingEnabled`为 false，这意味着相关数据不会被序列化，这有很大帮助，但它们仍然在调用返回的数据中显示为空数组，这意味着我必须在调用`Web API`中以某种方式处理它们`AJAX`.

有什么方法可以完全关闭它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:21:58.937

我认为格特的回答有点简洁，所以我最初忽略了它。事实上，他是100%正确的。我现在意识到，如果您想对您带来的数据进行任何精细控制，那么 DTO（数据传输对象）就是您要走的路。

起初我以为在创建 DTO 时会有很多重复的工作，但后来我发现了[Automapper](http://automapper.org/) :)

# jquery - jQuery Pop up 在点击时不会打开

> ID：14786840
> 
> 赞同：1
> 
> 时间：2013-02-09T09:49:07.987
> 
> 标签：jquery, asp.net

我已经实现了一个 jquery 弹出窗口

作为

```
<script type="text/javascript">
        $(document).ready(function () {
            $("input[id$=btnclick]").click(function () {
                if ($("#content").html() != "") {
                    AlertDialog($("#content").html());
                }
            });
        });

        function AlertDialog(msg) {
            $.modaldialog.success(msg, {
                width: 400,
                height: 100
            });
        }
//        $(document).ready(function () {
//            if ($("#content").html() != "") {
//                AlertDialog($("#content").html());
//            }
//        });
    </script>

<asp:Button ID="btnclick" runat="server" Text="click me"   /> 
```

在 document.getready 上，弹出窗口正确打开，但单击时弹出窗口未打开。感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:57:15.740

我看到您将点击放在输入上，输入会回发，可能您需要使用`e.preventDefault();`as 来防止这种情况：

```
 $(document).ready(function () {
        $("input[id$=btnclick]").click(function (e) 
        {
            if ($("#content").html() != "") {
                // here prevent from post back
                e.preventDefault();

                AlertDialog($("#content").html());
            }
        });
    }); 
```

和一个测试：http: [//jsfiddle.net/TwFX5/2/](http://jsfiddle.net/TwFX5/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T09:58:31.757

在您的属性选择器中：

```
$("input[id$=btnclick]") 
```

您缺少内部引号：

```
$("input[id$='btnclick']")
             ^        ^ 
```

* * *

你的 JavaScript 很好：[http://jsfiddle.net/pf9PW/1/](http://jsfiddle.net/pf9PW/1/)，[有](http://jsfiddle.net/pf9PW/)或没有内引号（虽然）你*应该*有它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:22:04.630

我想说的一件事是，如果您有 id，请直接使用它，不要在所有输入中查找 id。它只会增加浏览器的开销。所以而不是使用

```
$("input[id$=btnclick]").click(function () {
    if ($("#content").html() != "") {
        AlertDialog($("#content").html());
    }
}); 
```

采用

```
$("#btnclick").click(function () {
    if ($("#content").html() != "") {
        AlertDialog($("#content").html());
    }
}); 
```

对于您的问题，除非我们看到全貌，否则无法解决。并尽量避免在函数中多次调用相同的调用。而不是做

```
if ($("#content").html() != "") {
    AlertDialog($("#content").html());
} 
```

做

```
var markup = $("#content").html();
if (markup != "") {
    AlertDialog(markup);
} 
```

优化的代码是安全和更快的应用程序的关键。

# sas - 在 PROC MODEL 和 SUR 下报告 Rsquare 和 Standard Error SAS

> ID：14786841
> 
> 赞同：0
> 
> 时间：2013-02-09T09:49:14.540
> 
> 标签：sas, stat, proc

如果我`proc reg`在 SAS 中运行一个简单的，我可以毫无问题地报告标准错误和 rsquare。但是，为什么我在报告此`PROC MODEL`设置下的截距和系数的 Rsquare 和标准误差时遇到了一些困难？

```
proc model data=have;
var r1-3;
parms a1-a10 b1-b10;
r1=a1+b1*A+b4*B+b7*C; 
r2=a2+b2*A+b5*B+b8*C;
r3=a3+b3*A+b6*B+b9*C; 
fit r1-r3/sur outs=want outest=est;
test a1, a2, a3,/wald;
run; 
```

我可以在哪里输入`OUTSEB`，`RSQUARE`以便可以在`est`数据集中报告结果？我试过输入`OUTSEB`和`RSQUARE`之后`OUTEST`或之后`proc model data=have`等等......没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T08:27:56.533

`FSRSQ`给你R2。`PROC MODEL`它可以在and语句中用作选项`FIT`（如果在前者中使用它，它将成为所有后续`FIT`语句的默认值）。

```
proc model fsrsq ... 
```

# php - 上传前设置专辑名称

> ID：14786842
> 
> 赞同：1
> 
> 时间：2013-02-09T09:49:18.877
> 
> 标签：php, mysql, plupload

我只知道 upload.php 文件将为每个上传的文件运行。那么当有 5 个文件时，upload.php 会运行 5 次，对吗？

我需要在 mysql 'album' 表中插入一条记录，以便我可以将albumid 插入到 'photos' 表中。

我的想法是在上传开始之前运行一个脚本。

plupload怎么可能？或者有什么不同的想法吗？

或者根本问题，有没有办法为上传的照片指定相册？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T14:36:33.527

我想你可以：

1.  有一个客户端变量`albumId`，默认为空
2.  绑定到`BeforeUpload`上传者事件
3.  在`BeforeUpload`处理程序中，查看是否`AlbumId`已设置。如果没有，执行一个**同步**的ajax调用来创建一个相册并检索它的albumId，你将放入变量`albumId`
4.  仍在 BeforeUplad 处理程序中，`albumId`在 queryParameters 中添加：`upldr.settings.url = upldr.settings.url + '&albumId=' + albumId`

我想它应该可以工作，而不必在albumId上使用任何类型的锁定机制。

希望这会有所帮助。

# php - 如何跟踪 php 在 linux 上解析的文件？

> ID：14786848
> 
> 赞同：1
> 
> 时间：2013-02-09T09:49:52.667
> 
> 标签：php, webserver, server-administration

我们一直在我工作的公司遇到负载问题。某些脚本的执行时间很长，我们无法跟踪哪些脚本。我们使用 LAMP 堆栈。我的问题是，有没有办法查看 php 当前正在解析哪些文件？这些服务器因 Ubuntu、Gentoo 和 Cent OS 不同，所以一般可以在 linux 上运行的东西会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:16:39.230

我会将[NewRelic](http://newrelic.com/)安装到您的服务器上，并使用它来分析正在运行的脚本以及耗时最长的脚本。基本版本是免费的，但可能值得“专业”一个月，并深入了解（通过深入研究）性能图表中的“峰值”。

如果您特别知道哪个脚本/执行路径导致了问题，那么 Xdebug 非常棒。NewRelic 将帮助您识别它，然后您可以使用[xdebug 分析](http://www.xdebug.org/docs/profiler)与[webcachegrind](http://code.google.com/p/webgrind/)结合来解析分析结果并识别问题。

# javascript - 如何在jQuery中检索从servlet发送的项目的JSON数组

> ID：14786853
> 
> 赞同：2
> 
> 时间：2013-02-09T09:50:22.743
> 
> 标签：javascript, jquery, json

我正在尝试检索数据库中的所有图像并显示在网页中。servlet 发送一个项目数组。当我运行我的 servlet 程序时，它显示

```
{"success":true,"imageInfo":[]} 
```

但在网页中 jQuery 返回`undefined`.

我是 jQuery 的新手 - 请任何人帮我解决这个问题。

Javascript：

```
$(window).load(function() 
            {
            $.ajax({
               type: "GET",
                url: "RetriveIm",
                dataType: "json",
                success: function( data, textStatus, jqXHR) 
                {
                    if(data.success)  
                      {

                        alert(console.log(data.imageInfo.name));
                        var items = [];
                        $.each(data, function(i, item) 
                        {
                          items.push('<li><a href="#"><img src=data:image/png;base64,'+ item.thumbarray +' data-large=data:image/png;base64,' + item.imageInfo.fullarray + ' data-description=' + item.imageInfo.disc + ' alt=' + item.imageInfo.name + ' data-id='+ item.imageInfo.imageid +'/></a></li>');  // close each()
                          $('ul.es-carousel').append( items.join('') );
                         });
                       };
                  },
             error: function(jqXHR, textStatus, errorThrown)
              {
                 alert("error");
                 console.log("Something really bad happened " + textStatus);
              },
              });       
             }); 
```

我的服务器端程序在[这个](https://stackoverflow.com/questions/14777159/retrieving-images-using-jquery-and-servlet-produces-http-status-500-error)问题中。

我没有数据中有什么错误请帮助我.....谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:01:51.857

```
$.getJSON("url",function(json){
         console.log(json)
         //your set of images check object structure
         $.each(json.imageInfo, function(i, item) {//... if i understood well the json you are sending
         }); 
```

应该足以满足您的需求。

并确保`header('Content-Type: application/json');`在回应您的回复之前发送。

您还需要搬出`$('ul.es-carousel').append( items.join('') );`$.each

# javascript - jQuery动画回调+主干：无法调用未定义的方法“删除”

> ID：14786855
> 
> 赞同：2
> 
> 时间：2013-02-09T09:50:25.927
> 
> 标签：javascript, jquery, backbone.js, callback, closures

我不是 JavaScript 的新手，但我经常发现它的灵活方式（比如将匿名函数定义为回调及其作用域）非常令人困惑。我仍在努力解决的一件事是闭包和作用域。

以这个例子（来自 Backbone 模型）为例：

```
'handleRemove': function() {
    var thisModel = this;
    this.view.$el.slideUp(400, function() { thisModel.view.remove(); });
}, 
```

在模型被移除/删除后，这将为其视图设置动画并最终将其从 DOM 中移除。这工作得很好 - 但最初我尝试了以下代码：

```
'handleRemove': function() {
    var thisModel = this;
    this.view.$el.slideUp(400, thisModel.view.remove );
}, 
```

这基本相同，但没有`function() {}`remove() 调用的包装器。

有人可以解释为什么后面的代码不起作用吗？我得到以下异常/回溯：

```
Uncaught TypeError: Cannot call method 'remove' of undefined backbone-min.js:1272
_.extend.remove backbone-min.js:1272
jQuery.speed.opt.complete jquery-1.8.3.js:9154
jQuery.Callbacks.fire jquery-1.8.3.js:974
jQuery.Callbacks.self.fireWith jquery-1.8.3.js:1084
tick jquery-1.8.3.js:8653
jQuery.fx.tick 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:12:19.157

这是因为`this`回调函数的上下文（ ）更改为被 jQuery 动画化的元素。

```
var obj = { fn: function() {         // Used as below, the following will print:
                alert(this === obj); // false
                alert(this.tagName); // "DIV"
          }};
$('<div>').slideUp(400, obj.fn); 
```

此外，Backbone 的 view.remove 函数看起来像这样（[源代码](https://github.com/documentcloud/backbone/blob/0.9.10/backbone.js#L1269-L1275)）：

```
remove: function() {
  this.$el.remove();
  this.stopListening();
  return this;
}, 
```

因为`this`不再是Backbone 视图对象，`$el`所以没有定义。因此，您会收到“无法调用未定义的方法'删除'”错误。

避免错误的另一种方法是使用下划线的[`_.bind`](http://underscorejs.org/#bind)方法：

```
this.view.$el.slideUp(400, _.bind(thisModel.view.remove, this) ); 
```

# java - Jsp标签中的数据类型

> ID：14786865
> 
> 赞同：1
> 
> 时间：2013-02-09T09:51:52.010
> 
> 标签：java, jsp, collections, tags, type-conversion

**自定义标签**

```
<%@attribute name="setValue" required="true"  rtexprvalue="true" %>
<%@attribute name="setColection" required="true"  rtexprvalue="true" %> 
```

我们可以用数据类型或集合来限制名称吗？即**setName**仅采用**int**和**setCollection**仅采用**Collection**即 List 或**ArrayList**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T09:57:11.480

是的你可以。使用类型属性：

```
<%@attribute name="setValue" required="true"  rtexprvalue="true" type="java.lang.Integer" %>
<%@attribute name="setColection" required="true"  rtexprvalue="true" type="java.util.List" %> 
```

我还将属性重命名为`value`and `collection`or `items`。

# django - 模型继承

> ID：14786873
> 
> 赞同：0
> 
> 时间：2013-02-09T09:52:44.473
> 
> 标签：django, django-models

在所有模型继承中哪个更好用，为什么？我对此一无所知，所以我想知道哪个更好或更有用，以便我知道我将在该特定场景中使用哪个。

*   抽象基类
*   多表继承
*   代理模型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:08:30.050

这些技术中的每一种都提供不同的好处。这真的取决于你需要做什么。

最好的起点是阅读[模型继承文档](https://docs.djangoproject.com/en/1.4/topics/db/models/#model-inheritance)。

**抽象基类**

如果您只是想减少编写的代码量，请使用这些。如果您知道多个模型中出现多个字段，则编写一个基类并继承它。

**多表继承**

如果您想要一个可以查询和操作的具体基类，这很有用 - 例如`Base.objects.all()`有点像在同一个查询集中看到`Child1.objects.all()`和。`Child2.objects.all()`

**代理模型**

如果每个模型的所有字段都相同，则使用代理模型。您为每个对象获得一个 db 元组，但该 db 元组可用于表示父级或代理。这是非常强大的，如果您的字段相同，几乎可以肯定要走的路。

# php - 有没有办法在 PHP 中编码错误消息

> ID：14786877
> 
> 赞同：2
> 
> 时间：2013-02-09T09:53:18.483
> 
> 标签：php, error-handling

我注意到当 youtube 页面崩溃时，它会发出一种编码消息，可以将其发送给 Youtube 的开发人员，而无需客户了解有关 Youtube 基础设施和使用的程序的知识。

这个想法是否适用于您自己的网站？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:11:20.590

如今，大多数框架都能够将不同的应用程序设置用于生产和开发用途。

在生产模式下（当网站被客户使用时），出于安全和设计原因，不应看到任何错误。因此，您经常打开 log_errors 并关闭 display_errors。当出现不可恢复的错误时，会向用户显示类似“出现问题，我们将立即派出最好的人员处理”之类的信息。向用户显示一些奇怪的数字是没有意义的，例如“错误代码 823”。使用 cron worker 向您发送错误日志，或者只是手动检查日志，并确保错误消息足够详细，以便您跟踪错误。

在开发模式下（当您在开发过程中在本地运行站点时）您可能希望在错误出现时立即查看它们。因此，您打开 display_errors。如果设计中断，您可能不会介意，希望您了解发生了什么。

错误消息是程序员最好的朋友，但您的用户永远不必体验它们。如果发生这种情况，请确保给用户一些合理的反馈，而不仅仅是空白页或随机错误代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T09:55:20.370

PHP 不需要它。
与 Flash 不同，PHP 在服务器端运行。因此，只需让 PHP 记录任何错误消息。
在 php.ini 文件中设置这些选项

```
log_errors = On
display_errors = Off 
```

并且您不需要志愿者用户来查看它们
，而只需要您的网络服务器的错误日志即可查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:20:27.523

只是想像创建一个自定义错误处理程序，使用一些**基本**的编码/解码功能，这取决于你来扩展这个想法：

```
// Set error handler
set_error_handler("customError");

// The error function handler
function customError($error, $errorMessage, $errorFile, $errorLine){
   echo(encodeError("<b>Error</b> [$error]: $errorMessage, on line $errorLine in $errorFile ."));
}

function encodeError($string){
  $array = str_split($string,1);
  $results = array();
  foreach ($array as $value) {
    $results[] = ord($value);
  }
  return(base64_encode(implode(".", $results)));
}

function decodeError($string){
  $array = explode(".", base64_decode($string));
  $results = array();
  foreach ($array as $value) {
    $results[] = chr($value);
  }
  return (implode("", $results));
}

 // Trigger error
 echo(3/0);

// We the developers decode it with the decode function
echo('<br><hr>'.decodeError('NjAuOTguNjIuNjkuMTE0LjExNC4xMTEuMTE0LjYwLjQ3Ljk4LjYyLjMyLjkxLjUwLjkzLjU4LjMyLjY4LjEwNS4xMTguMTA1LjExNS4xMDUuMTExLjExMC4zMi45OC4xMjEuMzIuMTIyLjEwMS4xMTQuMTExLjQ0LjMyLjExMS4xMTAuMzIuMTA4LjEwNS4xMTAuMTAxLjMyLjU2LjUzLjMyLjEwNS4xMTAuMzIuNjcuNTguOTIuMTE5Ljk3LjEwOS4xMTIuOTIuMTE5LjExOS4xMTkuOTIuMTAxLjEyMC4xMTIuMTA4LjQ4LjEwNS4xMTYuOTIuMTIyLjEwMS4xMTQuMTExLjQ5LjQ2LjExMi4xMDQuMTEyLjMyLjQ2')); 
```

# knockout.js - 脚本在底部？

> ID：14786880
> 
> 赞同：3
> 
> 时间：2013-02-09T09:54:15.887
> 
> 标签：knockout.js

我在页面底部包含了我的视图模型脚本并且有问题。问题是直到`applyBindings`被调用（也在底部）用户可以看到显示裸模板的**未绑定**页面一秒钟。解决方案之一是将脚本放在顶部并换行`applyBindings`或`$()`“准备好文档”。但我真的拒绝接受没有办法解决问题并将脚本保留在底部。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T20:32:25.767

我总是使用这样的东西：

```
<div data-bind="visible:true" style="display:none">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:00:57.260

您可以使用 CSS 隐藏有问题的元素并在之后显示它们`applyBindings`

**CSS**

```
.hide-while-loading { display: none } 
```

**JS**

```
var elements = document.getElementsByClassName('hide-while-loading ');
for (var i = 0; i < elements.length; ++i) {
    // remove class:
    elements[i].className = elements[i].className.replace('/\bhide-while-loading\b/','');
} 
```

实际上，代码删除了`hide-while-loading`类而不是仅仅使元素可见，因此*应该*隐藏的元素保持隐藏状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T12:23:34.317

您可以使用 css 绑定来切换未绑定元素的可见性。

可能在包含元素上，执行以下操作：

```
<div data-binding="css: { notready: !isReady()}" class="notready">
  Other children with bindings
</div> 
```

添加一个 CSS 类：

```
.notready { display : none; } 
```

然后，在视图模型中添加一个新的 observable：

```
isReady : ko.observable(true) 
```

当评估为时，代码切换/删除`notready`CSS 类。`isReady``true`

# apache2 - Apache重启导致DocumentRoot必须是一个目录，即使它是一个目录并且似乎没有权限问题

> ID：14786881
> 
> 赞同：26
> 
> 时间：2013-02-09T09:54:23.300
> 
> 标签：apache2, apache

我有一个几乎可以肯定是新手的问题。我希望在写这个问题时找到问题，但我仍然卡住了。

我想更改 apache 的 DocumentRoot，但我不断收到错误消息“DocumentRoot 必须是一个目录”。

**情况：**

*   该代码在虚拟 VMWare 机器 4.0.4 build-744019 中运行
*   linux 的版本是 Scientific Linux release 6.4 (Carbon)
*   apache 的版本是 Apache/2.2.15 (Unix)（这是一个 yum 安装，没什么特别的）

**在 httpd.conf**

```
DocumentRoot "/home/stave/www" 
```

当我重新启动时，我收到消息

```
Starting httpd: Syntax error on line 292 of /etc/httpd/conf/httpd.conf:
DocumentRoot must be a directory 
```

**到目前为止采取的步骤：**

我确保该目录存在：

```
ls -asl /home/stave
4 drwxrwxrwx.  2 stave stave    4096 Feb  9 09:08 www
It even has a file in it "index.html", so I am very sure that the directory exists 
```

我认为这可能是一个特权问题，所以（这是一个与互联网隔离的虚拟开发机器，我正在排除故障，所以我不太担心安全性），如您所见，我将特权设置为 777。

我什至更改了运行 apache 的用户（并确认该更改与 ps 一起使用）以确保特权不应该成为问题。

**堆栈溢出**

有一些堆栈溢出答案，但大多数都说“阅读错误消息。它说该目录实际上并不存在”。其他人暗示最后可能会有一个斜杠，这会很糟糕。

**其他网站**

我发现最有用的是[这个](http://board.issociate.de/thread/188159/I_have_an_error_message_%22DocumentRoot_must_be_a_directory%22.html)建议

由于 SELinux 扩展，您可能会收到“Doc​​umentRoot must be a directory”错误，即使它实际上是一个目录。运行 system-config-securitylevel（或 redhat-c​​onfig-securitylevel）为 httpd 禁用 SELinux 或授予该目录的 SELinux 权限：chcon -R -h -t httpd_sys_content_t /path/to/directory*

我的 linux 版本不是 Security Enhanced Linux，所以在不理解的情况下我还是尝试了它：没有效果。

**现在的情况**

我已经没有尝试的想法了，所以任何诊断问题或建议将不胜感激

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-11T10:22:14.680

您在“其他网站”下发布的链接突出显示了问题的根本原因，即 Selinux。

除非服务器是超级安全环境的一部分，否则我只会禁用 Selinux。

在 RedHat / CentOS / Scientific Linux 上，这可以通过编辑 /etc/sysconfig/selinux 轻松完成 - 找到参数“selinux”并将选项“enforcing”更改为“disabled”，如下所示：

```
# SELINUX= can take one of these three values:
#       enforcing - SELinux security policy is enforced.
#       permissive - SELinux prints warnings instead of enforcing.
#       disabled - No SELinux policy is loaded.
SELINUX=disabled 
```

进行此更改后重新启动服务器可能是明智之举。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-02-12T01:05:48.663

您不应该只禁用 SELinux。

您需要将 httpd_enable_homedirs 设置为 on。

```
yum -y install policycoreutils-python
setsebool -P httpd_enable_homedirs on 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-26T15:13:51.667

我今天也遇到了这个问题，这是因为我将 DocumentRoot 从 /var/www/html 移动到 /srv/www/html。作为我们安全策略的一部分，我们不能只选择禁用 SELinux。

因此，正如我发现的那样，我的解决方法是更改​​ /srv 的 SELinux 文件上下文以匹配 /var。妥协是的，但仍然比完全禁用它好。除此之外......我确保 /srv/www 和所有子文件夹都有 httpd_sys_content_t 以匹配 /var/www 下的文件夹，现在一切都很好。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-09-07T01:45:00.483

这与大卫的答案基本相同，但更清楚一点，http 服务目录设置了错误的 SELinux 安全上下文。

解决这个问题的完整解释在这里，[http://mybroadband.co.za/vb/showthread.php/588183-Fix-403-Forbidden-on-newly-configured-CentOS-6-5-httpd-server-(或-13-10-Ubuntu-LAMP）](http://mybroadband.co.za/vb/showthread.php/588183-Fix-403-Forbidden-on-newly-configured-CentOS-6-5-httpd-server-(or-13-10-Ubuntu-LAMP))

我的问题是我将我的网站存放在与 /var/www/ 的 documentroot 路径不同的目录中，因此我必须按照上面链接中的第三个选项进行更正。我将 /websites/ 目录的相同文件上下文设置为匹配 /var/www/ 的文件上下文。奇怪的是 CentOS 5.5 的早期版本一定没有安装/启用 SELinux，因为我的其他服务器对此没有任何问题，并且在命令提示符下运行 ls -Z 时，这些文件夹显示为“未标记”。

我从官方市场最小安装在 AWS 上运行 CentOS 6.5。因此，当我在我的文件夹上运行 ls -Z 命令时，我确切地看到了上面链接显示的可能问题。

运行 chcon 命令解决了我的问题！

只需将 html/ 替换为您要使用的目录即可！

chcon -Rv --type=httpd_sys_content_t html/

chcon -Rv --user=system_u html/

附带说明一下，我还必须禁用 iptables 才能使路由正常工作，默认设置是提供空白页。

服务 iptables 停止

希望对遇到同样问题的人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-10T12:46:24.957

环境：Linux - SSD 上的根文件系统 DocumentRoot 在 HDD 上并通过 fstab 挂载 引导后重新启动 apache2 - 没问题 似乎是在 fstab 挂载完成之前启动 apache 的时间问题。

解决方法：使用正确的所有者、组和权限在根文件系统上定义 DocumentRoot 目录。该目录可能为空。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-03T16:50:50.390

首先，完全没有理由关闭 selinux 来解决这个问题，只需更改 selinux 文件上下文即可。

其次，在更改 selinux 文件上下文时，您应该为该路径设置一个**永久**规则，这样当新文件被复制和/或替换现有文件时，`restorecon`实际上解决了问题，而不是破坏它，就像当你只使用`chcon`.

因此，对于符号链接的 DocumentRoot（在此示例中，我们将目录的实际完整路径指定为“/media/myDoc”），运行以下两个命令：

`semanage fcontext -a -t httpd_sys_content_t "/media/myDoc(/.*)?"`

`restorecon -R /media/myDoc`

请注意，以这种方式使用 semanage 时需要完整路径。`restorecon`您不仅会解决问题，而且将来运行（或自动重新标记）时它不会再次中断。

# php - PHP DOM遍历另一个元素内的元素

> ID：14786883
> 
> 赞同：0
> 
> 时间：2013-02-09T09:54:34.810
> 
> 标签：php, dom, web

我必须从网站收集一些数据。我的数据被包装为 div s。每个 div 内部都有一个标题标签。我需要获取这些标题标签内的文本。如何做到这一点。我已经编写了以下代码。我必须申请什么修改才能完成任务

```
<?php
$str = '';
$page =  file_get_contents('http://www.sarkari-naukri.in/');
$dom = new DOMDocument();
$dom->loadHTML($page);
$divs = $dom->getElementsByTagName('div');
$i = 0;
$len = $divs->length;
while($i<$len) {
    $div = $divs->item($i++);
    $id = $div->getAttribute('id');
    if(strpos($id,'post-') !== false ) {
           // i need to get text inside title tag inside this div
        $title ='';//title should be stored here
        $str = $str.$title;
    }
}
echo $str; 
```

示例 HTML

```
<body>
    <div id = 'post-1'>
         <title>title 1</title>
    </div>
    <div id = 'post-2'>
         <title>title 2</title>
    </div>
    <div id = 'post-3'>
         <title>title 3</title>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:22:21.923

以下 PHP DOMDO 文档代码：

```
$id = $div->getAttribute('id');
if (strpos($id,'post-') !== false) { 
```

可以用Xpath[字符串函数](http://www.w3.org/TR/xpath/#section-String-Functions)[^(*Docs*)](http://www.w3.org/TR/xpath/#section-String-Functions)[在Xpath 1.0](http://www.w3.org/TR/xpath/)中表示：[](http://www.w3.org/TR/xpath/#section-String-Functions)

 *```
//div[contains(@id, 'post-')] 
```

阅读：任何`div`具有`id`包含字符串的属性的元素`post-`。通过 Xpath 的规则，您可以进一步扩展表达式，例如选择所有这些的标题子项：

```
//div[contains(@id, 'post-')]/title 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:04:18.990

您可以使用 xpath 查询来检索标题信息：

```
$xml = "<body>
    <div id = 'post-1'>
         <title>title 1</title>
    </div>
    <div id = 'post-2'>
         <title>title 2</title>
    </div>
    <div id = 'post-3'>
         <title>title 3</title>
    </div>
</body>";

$str = '';

$doc = new DOMDocument;
$doc->loadHTML($xml);

$xpath = new DOMXPath($doc);

$entries = $xpath->query('//body/div/title');
foreach ($entries as $entry) {
    $str .= $entry->nodeValue;
}

var_dump($str); 
```

[现场演示](http://codepad.viper-7.com/xYReZY)。*

# php - 特定时间后触发事件

> ID：14786884
> 
> 赞同：2
> 
> 时间：2013-02-09T09:54:36.353
> 
> 标签：php, mysql

在特定时间后如何触发事件或函数？

例如，有人在网上订购了一些东西，它的付款到期日是 2 月 13 日上午 7:45。如果客户在此日期之前没有支付任何费用，他的订单将被自动取消。

我不知道如何开始编码这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:00:11.160

通常，将使用 cron 作业来管理这样的任务；虽然 MySQL 确实有自己的[定时事件调度器](https://dev.mysql.com/doc/refman/5.7/en/event-scheduler.html)

# google-drive-api - 有没有办法按时间倒序获取具有 maxResults 限制的 changes.list？

> ID：14786887
> 
> 赞同：2
> 
> 时间：2013-02-09T09:54:57.377
> 
> 标签：google-drive-api

我有兴趣查看最近的更改，但如果您指定上限，您会首先获得最旧的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:46:39.250

`startChangeId`如果您只想获取最新更改的子集，则应设置查询参数： [https ://developers.google.com/drive/v2/reference/changes/list](https://developers.google.com/drive/v2/reference/changes/list)

# c - NULL 指针作为数组结束的标记

> ID：14786888
> 
> 赞同：1
> 
> 时间：2013-02-09T09:55:01.063
> 
> 标签：c, c89

我阅读了 Kernigan & Ritchie 的“C 编程语言”第二版的第 6.3 段。

一些结构：

```
struct key {
    char *word;
    int count;
} keytab[NKEYS] {
    { "auto", 0 },
    { "break", 0 },
    { "case", 0 },
    { "char", 0 },
    { "const", 0 },
    { "continue", 0 }
  }; 
```

作者写道：

> 数量 NKEYS 是 keytab 中关键字的数量。虽然我们可以手动计算，但用机器计算要容易得多，也更安全，尤其是在列表可能发生变化的情况下。*一种可能性是使用空指针终止初始化器列表，然后沿着 keytab 循环直到找到结尾。*

如果枚举仅包含指针，一切都会很清楚：

```
struct key {
    char *word;
    char *description;
} keytab[NKEYS] {
    { "auto", "" },
    { "break", "" },
    { "case", "" },
    { "char", "" },
    { "const", "" },
    { "continue", "" }
    { NULL, NULL}
  }; 
```

但是每条记录不仅有指针，而且`int`也有。如果我对作者的理解正确，那么最后一条记录必须如下所示：

```
{ NULL, ? } 
```

没有指针怎么办？

对于不包含指针的枚举，我该如何解决？例如：

```
 enum myEnum {
        int index;
        inr count;
        double value;
    } myVariable[] {
          {0,0,0},
          {0,0,0},
          {0,0,0},
          {0,0,0},
          {?,?,?}
      }; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T09:59:07.843

关键是，通过将最后一条记录设置为 NULL，您可以在遍历数组时轻松识别数组的结尾。

在您没有指针的情况下，您仍然可以认为一些“特殊”值来指示结束，也许`count`并且`index`永远不会在您的应用程序中为负数，因此看到小于 0 的值可能是您可以使用的标记可靠地找到终点。结束标记的另一个常见选择可能是`~0`（即全 1）。

或者，您可以只`size_t`使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T09:59:25.660

您可以发明特殊的枚举值（例如`-1`），将其用作最后一个条目的标记。

# android - 缺少工作区和 android-sdk 文件夹

> ID：14786894
> 
> 赞同：1
> 
> 时间：2013-02-09T09:56:19.727
> 
> 标签：android, windows, eclipse

我最近在一个单独的分区上安装了 Windows 8。我启动了 Eclipse，但出现错误工作区不可用。我不记得我的工作区的确切位置，也找不到它。除此之外，我也找不到我的 android-sdk 文件夹。我无法访问其他分区上的其他操作系统，因为我删除了它。我注意到很多文件丢失了。我确定我没有删除它们。我只删除了windows文件夹。如果我真的删除了我的工作区和 android-sdk，我该怎么办？谁能推荐一下文件恢复软件。很抱歉我不得不发布这个，但我从这里得到了最好的答案！

# maven - netbeans Maven 插件不更新远程仓库索引

> ID：14786895
> 
> 赞同：0
> 
> 时间：2013-02-09T09:56:29.503
> 
> 标签：maven, netbeans

我从一个项目开始，我想使用最新版本的休眠和休眠空间扩展。因此，我决定从一个 maven 项目开始来管理所有依赖项。我不得不说，我在使用 maven 和 maven netbeans 插件方面都非常缺乏经验，但我认为这是满足我要求的最佳选择。我正在使用 Netbeans 7.2.1。

有一个简短的描述如何将休眠空间的远程存储库添加到 maven ( [http://www.hibernatespatial.org/mavenquick.html](http://www.hibernatespatial.org/mavenquick.html) )。

我在 netbeans - services - maven 存储库中添加了这些 repo。然后我点击“更新索引”但没有任何反应。

我还尝试在我的浏览器中打开 repo Url，我得到了它应该提供的所有文件。

为什么 Netbeans 不更新索引？是否有可能在 Maven 命令行上对远程仓库进行索引，以便我能够绕过 netbeans 并可能获得有关正在发生的事情的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T11:59:15.790

我建议您将所需的 repo 添加到您的*{home}/.m2/settings.xml*文件中（或者您的项目中的 pom 文件）。这就是您的**Maven**安装首先从那里获取配置的地方。因此，您可以避免使用**NetBeans**来执行此操作，并且您将确保 Maven 将使用该存储库，无论您以何种方式调用它（NetBeans 嵌入式、命令行...）。

将此存储库添加到您的文件中：

```
<repository>
    <id>OSGEO GeoTools repo</id>
    <url>http://download.osgeo.org/webdav/geotools</url>
</repository>
<repository>
    <id>Hibernate Spatial repo</id>
    <url>http://www.hibernatespatial.org/repository</url>
</repository> 
```

您可能会发现[来自 Maven 官方网站的本指南](http://maven.apache.org/settings.html#Repositories)很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T06:27:26.030

> 我在 netbeans - services - maven 存储库中添加了这些 repo。然后我点击“更新索引”但没有任何反应。

1.  Services/Maven 存储库节点仅处理有助于某些 IDE 搜索功能的索引。它不会以任何方式影响构建。如果要更改构建，请以通常的 maven 方式将其添加到 pom.xml 或 settings.xml。请注意，此类活动存储库最终应有效地显示在您的服务节点中。

2.  更新索引操作尝试从远程位置下载索引。这里有多个故障点。存储库可能不提供索引，或者您的 maven 代理设置不允许您连接（我们使用明确的 maven 设置，而不是 IDE 代理设置），您在 settings.xml 中定义的镜像镜像此存储库但不提供内容为了它。

3.  即使下载并处理了索引（您可以浏览服务节点中的内容），索引中也可能会丢失各个工件，因为服务器端作业只是偶尔更新。

4.  无论如何，当没有索引时，您不受任何限制。如果您知道坐标，您仍然可以将依赖项添加到项目中。通过 UI 或编辑 pom.xml 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-23T15:36:15.733

使用 Netbeans 版本 11，我可以通过删除缓存 ([].netbeans.cache\11\mavenarchetypes) 来强制从远程仓库下载最后一个 archetype-catalog.xml。

# spring - 将异常记录到数据库中 - Java Spring

> ID：14786897
> 
> 赞同：1
> 
> 时间：2013-02-09T09:56:40.437
> 
> 标签：spring

您好我正在尝试将异常记录到数据库中

```
public void a(){
        try{

              String c = b();
           }catch (Throwable ex){
                   com.log.Logger.log(ex);
                   throw new UserDefinedException(ex);
           }
        }

public String b(){
               throw new NullPointerException("Transaction Logger")
} 
```

我有一个 LoggerImpl 类，它将异常的详细信息记录到数据库中。只有 UserDefinedException 被记录，而 Null 指针异常没有被记录。任何人都可以帮助我。

日志入口.java

```
private long id;
private String desc;

// getters and setters 
```

记录器.java

```
public long log(Throwble ex){

    LogEntry entry = new LogEntry();
    entry.setDesc(ex.getMessage());
    LoggerImpl log = new LoggerImpl();
    log.insertLog(entry);
    return entry.getId();
} 
```

LoggerImpl.java

```
@Transactional(propogation = PROPOGATION.REQUIRES_NEW)
public void insertLog(LogEntry log){
    insert.update(//fields);
} 
```

Id 是使用序列增量器生成的

我正在使用 JTA 事务管理器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T12:32:33.103

您得到了这样的结果，因为在您的情况下 LoggerImplementation 类不是由 Spring 容器管理的，并且容器不会为 insertLog(..) 方法启动新事务（正如它应该的那样）。要管理此类，您应该将其注入到您的 bean 中。我建议你进行这样的重构。这将起作用。

而不是让 Logger 和 LoggerImpl 类创建 Logger 接口和实现该接口的 LoggerImpl 类。

```
public interface Logger {

    long log(Throwable ex);

}

@Transactional
@Component
public final class LoggerImpl implements Logger {

    @PersistenceContext
    private EntityManager entityManager;

    @Transactional(propagation = Propagation.REQUIRES_NEW)
    public long log(Throwable ex) {
        LogEntry entry = new LogEntry();
        entry.setDescription(ex.getMessage());

        entityManager.persist(entry);

        return entry.getId();
    }

} 
```

然后只需将您的异常记录器注入必要的服务类。例如：

```
@Transactional(rollbackFor=Exception.class)
@Service
public class TestService {

    @Autowired
    private Logger logger;

    public void a() throws UserDefinedException {
        try {

            b();
        } catch (Throwable ex) {
            logger.log(ex);
            throw new UserDefinedException(ex);
        }
    }

    public String b() {
        throw new NullPointerException("Transaction Logger");
    }
} 
```

现在外部事务将被回滚，但内部新事务将数据写入数据库。

**注意****TestService 类的***@Transactional*****注释中的*****rollbackFor*****属性。**这是必要的，因为默认情况下 Spring 不会回滚事务处理异常。这描述了你得到的行为。在您的情况下，仅针对运行时异常回滚外部事务。这就是为什么当您尝试记录 NullPointerException 时，整个事务会回滚并且您的日志记录不会添加到数据库中。但是，当您尝试记录 UserDefinedException 事务时，尽管已引发错误并且您的日志记录已写入数据库，但仍成功提交了事务。**

# algorithm - Haskell 的快速排序 - 它到底是什么？

> ID：14786904
> 
> 赞同：7
> 
> 时间：2013-02-09T09:57:43.097
> 
> 标签：algorithm, haskell, quicksort

正如他们所说，[“真正的快速排序就地排序”](http://www.haskell.org/haskellwiki/Introduction#Quicksort_in_C)。所以快速排序的标准[短](http://en.wikipedia.org/wiki/Quicksort)Haskell[代码](http://www.haskell.org/haskellwiki/Introduction#Quicksort_in_Haskell)，

```
quicksort :: Ord a => [a] -> [a]
quicksort []     = []
quicksort (p:xs) = (quicksort lesser) ++ [p] ++ (quicksort greater)
  where
    lesser  = filter (< p) xs
    greater = filter (>= p) xs 
```

毕竟，它描述***的是***什么算法/计算过程？

这肯定不是[Tony Hoare 设计](http://books.google.com/books?id=NLngYyWFl_YC&pg=PA160&lpg=PA160&dq=Hoare+partition&source=bl&ots=BxTmEA2mE5&sig=zQNbUb5jLURNaFmNwdyKvyskMU4&hl=en&sa=X&ei=MmsWUaSsJOfX0QXBmIHACQ&ved=0CGcQ6AEwCA)的，因为它缺乏最明确的特征，即就地分区算法。

（答案可能是众所周知的，但还没有在这里）。

* * *

更正：这个问题实际上是重复的：答案毕竟***是已知的：cf。***[伪快速排序时间复杂度](https://stackoverflow.com/questions/11355621/pseudo-quicksort-time-complexity)。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-09T10:10:23.207

## 它是链表的快速排序。

是的，这是快速排序，只是不是就地。它匹配快速排序的高级算法，同时更改低级实现以匹配链表的数据结构。这就是为什么它是链表的快速排序。

我更愿意说“快速排序最初是为就地工作而开发的”，而不是“真正的快速排序是就地完成的”。快速排序有许多变体，包括随机选择枢轴以避免更坏的情况等。这是对链表快速排序的明智、清晰的定义。

这个定义完全符合我们在英国教 16 岁数学学生快速排序的方式。（我们教的是算法，而不是编程。）就地非常模糊了目的和设计，这就是为什么我们不教那些细节，尽管距离教函数式编程或链表有一百万英里。（这并没有改变当你有破坏性的更新数组时，对交换技巧就地算法是最好的事实。）

此定义存在时间损失，因为它为两个子列表遍历列表两次。当然可以将其重写为分区而不是过滤，但我断言这是优化而不是改变这里的基本算法，快速排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:11:34.707

所有就地算法都需要在 Haskell 中进行一些“仪式”，其中可变状态隐藏在 monad 后面。上面的算法**是**快速排序，只是不是就地排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T14:39:25.110

预期的答案（从[这里](http://www.reddit.com/r/programming/comments/2h0j2/real_quicksort_in_haskell)）是这“真的是砍伐森林的树种”。[事实证明， haskellwiki](http://www.haskell.org/haskellwiki/Introduction/Direct_Translation)上也提到了它。

# hibernate - hibernate-JPA、ManyToOne 和 TablePerClass 或 Joined：创建错误的外键

> ID：14786906
> 
> 赞同：1
> 
> 时间：2013-02-09T09:58:04.953
> 
> 标签：hibernate, generics, jpa, foreign-keys

我有这两个抽象类：

```
@Entity
@Inheritance(strategy = InheritanceType.JOINED)
@Table(name="compound")
public abstract class Compound<T extends Containable {

    @OneToMany(fetch = FetchType.EAGER, mappedBy="compound",
        targetEntity=Containable.class, cascade = CascadeType.ALL)      
    private Set<T> containables = new HashSet<>();
}

@Entity 
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
@Table(name="containable")
public abstract class Containable<T extends Compound> {     

    @ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    private T compound;
} 
```

在我的测试中，我有两个实现，TestCompound 和 TestContainable 作为一对，RegistrationCompound 和 Batch 作为另一对。（例如`public class TesCompound extends Compound<TestContainable>`和`public class RegistrationCompound extends Compound<Batch>`）。

两个层次结构的 TABLE_PER_CLASS

我面临的问题是hibernate创建了一个从test_containable表到registration_compound而不是test_compound的外键约束。它似乎没有得到一般的关系。

加入了两个层次结构（在我的情况下忽略缺点）

这里要求 Compound 和 Containable 是具体的类（不是抽象的）否则类似的问题。hibernate 从可包含 -> 复合（预期）创建外键约束，但也从可包含 -> 注册复合（意外）创建外键约束。我不知道为什么要创建它？更令人困惑的是，containable -> test_compound 没有这样的约束

总而言之非常混乱。将尝试 single_table 但这是最​​不希望的选择...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T09:04:59.893

这是由错误的映射引起的。

```
@ManyToOne(optional=true, fetch = FetchType.EAGER, cascade = CascadeType.ALL,
    targetEntity = Compound.class)
private T compound; 
```

targetEntity 丢失了，由于某种原因，hibernate 只是假设实现的 1 是目标。有点烦人...

# asp.net - 通过 ID 访问自定义控件子控件

> ID：14786917
> 
> 赞同：0
> 
> 时间：2013-02-09T09:59:11.677
> 
> 标签：asp.net

我是第一次构建自定义控件，它仍在制作中，但基本上它是一个包含一堆下拉菜单和按钮的复合自定义控件。提前考虑，我遇到了一个问题，我需要通过 ID 访问其中一些子控件，但是我怎么知道它们的 ID？我无法在设计时设置它们，因为会有很多重复的 ID，那么我该如何设置/获取它们？

感谢您的任何意见，狮子座

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:02:46.597

您可以在自定义控件中为它们声明 getter 属性，如下所示：

```
public string InnerControlID 
{
  get
  {
    return innerControl.ID;
  }
} 
```

创建此控件时可以设置 ID。

# python - 一侧有填充的两个三维数组的卷积太慢

> ID：14786920
> 
> 赞同：12
> 
> 时间：2013-02-09T09:59:40.757
> 
> 标签：python, numpy

在我当前的项目中，我需要以一种稍微不寻常的方式“**卷积**”两个三维数组：

假设我们有两个三维数组 A 和 B，维度为 dimA 和 dimB（每个轴都相同）。现在我们要创建第三个数组 C，每个轴的维度为 dimA+dimB。

C 的条目计算如下：

```
c_{x1+x2,y1+y2,z1+z2} += a_{x1,y1,z1} * b_{x2,y2,z2} 
```

我当前的版本很简单：

```
dimA = A.shape[0]
dimB = B.shape[0]
dimC = dimA+dimB

C = np.zeros((dimC,dimC,dimC))
for x1 in range(dimA):
    for x2 in range(dimB):
        for y1 in range(dimA):
            for y2 in range(dimB):
                for z1 in range(dimA):
                    for z2 in range(dimB):
                        x = x1+x2
                        y = y1+y2
                        z = z1+z2
                        C[x,y,z] += A[x1,y1,z1] * B[x2,y2,z2] 
```

不幸的是，这个版本真的很慢而且不可用。

我的第二个版本是：

```
C = scipy.signal.fftconvolve(A,B,mode="full") 
```

但这仅计算元素`max(dimA,dimB)`

有没有人有更好的主意？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T12:39:54.537

您是否尝试过使用[Numba](https://github.com/numba/numba)？它是一个包，可让您包装使用 JIT 编译器通常很慢的 Python 代码。我使用 Numba 快速解决了您的问题，并获得了显着的加速。使用 IPython 的魔法`timeit`魔法函数，该`custom_convolution`函数耗时约 18 秒，而 Numba 的优化函数耗时 10.4 毫秒。那是**超过 1700 的加速**。

以下是 Numba 的实现方式。

```
import numpy as np
from numba import jit, double

s = 15
array_a = np.random.rand(s ** 3).reshape(s, s, s)
array_b = np.random.rand(s ** 3).reshape(s, s, s)

# Original code
def custom_convolution(A, B):

    dimA = A.shape[0]
    dimB = B.shape[0]
    dimC = dimA + dimB

    C = np.zeros((dimC, dimC, dimC))
    for x1 in range(dimA):
        for x2 in range(dimB):
            for y1 in range(dimA):
                for y2 in range(dimB):
                    for z1 in range(dimA):
                        for z2 in range(dimB):
                            x = x1 + x2
                            y = y1 + y2
                            z = z1 + z2
                            C[x, y, z] += A[x1, y1, z1] * B[x2, y2, z2]
    return C

# Numba'ing the function with the JIT compiler
fast_convolution = jit(double[:, :, :](double[:, :, :],
                        double[:, :, :]))(custom_convolution) 
```

如果您计算两个函数的结果之间的残差，您将得到零。这意味着 JIT 实现可以正常工作。

```
slow_result = custom_convolution(array_a, array_b) 
fast_result = fast_convolution(array_a, array_b)

print np.max(np.abs(slow_result - fast_result)) 
```

我得到的输出是`0.0`.

您可以将 Numba 安装到当前的 Python 设置中，也可以使用 continuum.io 的[AnacondaCE](http://continuum.io/downloads.html)包快速尝试。

最后但同样重要的是，Numba 的功能比该`scipy.signal.fftconvolve`功能快几倍。

注意：我使用的是 Anaconda 而不是 AnacondaCE。对于 Numba 的性能，两个包之间存在一些差异，但我认为差异不会太大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T19:45:33.853

一般规则是对作业使用正确的算法，除非卷积核与数据相比很短，否则它是基于 FFT 的卷积（短大致意味着小于 log2(n)，其中 n 是数据的长度） .

在您的情况下，由于您要对两个大小相等的数据集进行卷积，因此您可能需要考虑基于 FFT 的卷积。

显然，`scipy.signal.fftconvolve`在这方面存在缺陷。使用更快的 FFT 算法，您可以通过滚动自己的卷积例程来做得更好（fftconvolve 将变换大小强制为 2 的幂没有帮助，否则可能会被猴子修补）。

以下代码使用[pyfftw](https://github.com/hgomersall/pyFFTW)，我对[FFTW](http://www.fftw.org)的包装器并创建了一个自定义卷积类`CustomFFTConvolution`：

```
class CustomFFTConvolution(object):

    def __init__(self, A, B, threads=1):

        shape = (np.array(A.shape) + np.array(B.shape))-1

        if np.iscomplexobj(A) and np.iscomplexobj(B):
            self.fft_A_obj = pyfftw.builders.fftn(
                    A, s=shape, threads=threads)
            self.fft_B_obj = pyfftw.builders.fftn(
                    B, s=shape, threads=threads)
            self.ifft_obj = pyfftw.builders.ifftn(
                    self.fft_A_obj.get_output_array(), s=shape,
                    threads=threads)

        else:
            self.fft_A_obj = pyfftw.builders.rfftn(
                    A, s=shape, threads=threads)
            self.fft_B_obj = pyfftw.builders.rfftn(
                    B, s=shape, threads=threads)
            self.ifft_obj = pyfftw.builders.irfftn(
                    self.fft_A_obj.get_output_array(), s=shape,
                    threads=threads)

    def __call__(self, A, B):

        fft_padded_A = self.fft_A_obj(A)
        fft_padded_B = self.fft_B_obj(B)

        return self.ifft_obj(fft_padded_A * fft_padded_B) 
```

这用作：

```
custom_fft_conv = CustomFFTConvolution(A, B)
C = custom_fft_conv(A, B) # This can contain different values to during construction 
```

`threads`构造类时带有可选参数。创建类的目的是利用 FFTW 提前规划变换的能力。

下面的完整演示代码只是扩展了[@Kelsey](https://stackoverflow.com/a/15075511/709852)对时间等的回答。

与 numba 解决方案和 vanilla fftconvolve 解决方案相比，加速效果显着。对于 n = 33，它比两者都快 40-45 倍。

```
from timeit import Timer
import numpy as np
import matplotlib.pyplot as plt
from scipy.signal import fftconvolve
from numba import jit, double
import pyfftw

# Original code
def custom_convolution(A, B):

    dimA = A.shape[0]
    dimB = B.shape[0]
    dimC = dimA + dimB

    C = np.zeros((dimC, dimC, dimC))
    for x1 in range(dimA):
        for x2 in range(dimB):
            for y1 in range(dimA):
                for y2 in range(dimB):
                    for z1 in range(dimA):
                        for z2 in range(dimB):
                            x = x1 + x2
                            y = y1 + y2
                            z = z1 + z2
                            C[x, y, z] += A[x1, y1, z1] * B[x2, y2, z2]
    return C

# Numba'ing the function with the JIT compiler
numba_convolution = jit(double[:, :, :](double[:, :, :],
                        double[:, :, :]))(custom_convolution)

def fft_convolution(A, B):
    return fftconvolve(A, B, mode='full')

class CustomFFTConvolution(object):

    def __init__(self, A, B, threads=1):

        shape = (np.array(A.shape) + np.array(B.shape))-1

        if np.iscomplexobj(A) and np.iscomplexobj(B):
            self.fft_A_obj = pyfftw.builders.fftn(
                    A, s=shape, threads=threads)
            self.fft_B_obj = pyfftw.builders.fftn(
                    B, s=shape, threads=threads)
            self.ifft_obj = pyfftw.builders.ifftn(
                    self.fft_A_obj.get_output_array(), s=shape,
                    threads=threads)

        else:
            self.fft_A_obj = pyfftw.builders.rfftn(
                    A, s=shape, threads=threads)
            self.fft_B_obj = pyfftw.builders.rfftn(
                    B, s=shape, threads=threads)
            self.ifft_obj = pyfftw.builders.irfftn(
                    self.fft_A_obj.get_output_array(), s=shape,
                    threads=threads)

    def __call__(self, A, B):

        fft_padded_A = self.fft_A_obj(A)
        fft_padded_B = self.fft_B_obj(B)

        return self.ifft_obj(fft_padded_A * fft_padded_B)

def run_test():
    reps = 10
    nt, ft, cft, cft2 = [], [], [], []
    x = range(2, 34)

    for N in x:
        print N
        A = np.random.rand(N, N, N)
        B = np.random.rand(N, N, N)

        custom_fft_conv = CustomFFTConvolution(A, B)
        custom_fft_conv_nthreads = CustomFFTConvolution(A, B, threads=2)

        C1 = numba_convolution(A, B)
        C2 = fft_convolution(A, B)
        C3 = custom_fft_conv(A, B)
        C4 = custom_fft_conv_nthreads(A, B)

        assert np.allclose(C1[:-1, :-1, :-1], C2)
        assert np.allclose(C1[:-1, :-1, :-1], C3)
        assert np.allclose(C1[:-1, :-1, :-1], C4)

        t = Timer(lambda: numba_convolution(A, B))
        nt.append(t.timeit(number=reps))
        t = Timer(lambda: fft_convolution(A, B))
        ft.append(t.timeit(number=reps))
        t = Timer(lambda: custom_fft_conv(A, B))
        cft.append(t.timeit(number=reps))
        t = Timer(lambda: custom_fft_conv_nthreads(A, B))
        cft2.append(t.timeit(number=reps))

    plt.plot(x, ft, label='scipy.signal.fftconvolve')
    plt.plot(x, nt, label='custom numba convolve')
    plt.plot(x, cft, label='custom pyfftw convolve')
    plt.plot(x, cft2, label='custom pyfftw convolve with threading')        
    plt.legend()
    plt.show()

if __name__ == '__main__':
    run_test() 
```

**编辑：** [最近的 scipy 在不总是填充到 2 长度的幂方面做得更好，](https://github.com/scipy/scipy/pull/3144)因此输出更接近 pyFFTW 案例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T20:06:54.637

上面的 Numba 方法是一个巧妙的技巧，但只会对相对较小的 N 有利*。O(N^6)*算法每次都会杀死你，不管它的实现速度有多快。在我的测试中，该`fftconvolve`方法在 N=20 附近越过越快，而 N=32 的速度是 10 倍。省略上面的定义`custom_convolution`：

```
from timeit import Timer
import numpy as np
import matplotlib.pyplot as plt
from scipy.signal import fftconvolve
from numba import jit, double

# Numba'ing the function with the JIT compiler
numba_convolution = jit(double[:, :, :](double[:, :, :],
                        double[:, :, :]))(custom_convolution)

def fft_convolution(A, B):
    return fftconvolve(A, B, mode='full')

if __name__ == '__main__':
    reps = 3
    nt, ft = [], []
    x = range(2, 34)
    for N in x:
        print N
        A = np.random.rand(N, N, N)
        B = np.random.rand(N, N, N)
        C1 = numba_convolution(A, B)
        C2 = fft_convolution(A, B)
        assert np.allclose(C1[:-1, :-1, :-1], C2)
        t = Timer(lambda: numba_convolution(A, B))
        nt.append(t.timeit(number=reps))
        t = Timer(lambda: fft_convolution(A, B))
        ft.append(t.timeit(number=reps))
    plt.plot(x, ft, x, nt)
    plt.show() 
```

它也非常依赖于 N，因为对于 2 的幂，FFT 会快得多。对于 N=17 到 N=32，FFT 版本的时间基本上是恒定的，并且在 N=33 时仍然更快，其中它又开始迅速发散。

您可以尝试在 Numba 中包装 FFT 实现，但不能直接使用 scipy 版本执行此操作。

（抱歉创建一个新答案，但我没有直接回复的积分。）

# php - 将零填充到价格

> ID：14786928
> 
> 赞同：3
> 
> 时间：2013-02-09T10:00:34.157
> 
> 标签：php

```
$price = 10.00;
list($dollars, $cents) = explode('.', $price);
echo $dollars . '.' . $cents; 
```

...除了省略零之外几乎可以工作。`10.00`成为`10`和`10.10`成为`10.1`

我看到有一个字符串填充函数，但是数字或浮点数有什么？

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-09T10:19:37.580

您可以使用[number_format](http://php.net/manual/en/function.number-format.php)：

```
echo number_format($price, 2); // Would print 10.00 
```

您可以为小数点指定一个分隔符，为千位指定另一个分隔符：

```
echo number_format(1234.56, 2, ',', ' '); // Would print 1 234,56 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:03:52.480

使用 Sprintf

```
$digit = sprintf("%02d", $digit); 
```

有关详细信息，请参阅[sprintf](http://php.net/sprintf)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T10:05:46.383

number_format 是你想要的：http: [//php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T10:14:18.670

虽然我会推荐[number_format](http://php.net/manual/en/function.number-format.php)，但你可以使用

```
sprintf('%02.2f', $price) 
```

如果你想依赖字符串函数。

# c# - 为什么 C# 编译器在 XML 文档中包含非公共成员？

> ID：14786930
> 
> 赞同：3
> 
> 时间：2013-02-09T10:00:46.840
> 
> 标签：c#, compiler-construction, documentation, documentation-generation, xml-documentation

使用 编译源代码`csc.exe`时，可以使用[/doc](http://msdn.microsoft.com/en-us/library/3260k4x7.aspx "/doc（C# 编译器选项）|  MSDN")选项将源文件中的 xml 文档注释保存到外部 xml 文件中。

我想知道的是为什么编译器在该文件中包含我的代码的非公共成员的 xml 注释。由于我已经拥有源代码中的文档，因此在处理该项目时我不需要 xml 文档文件中的任何内容。

如果我将 dll 用于另一个项目，我无论如何都不能使用非公共成员。那么为什么它包含所有私人和内部成员的文档呢？

我也想知道是否有办法防止这种情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T10:05:30.280

我可以理解正在记录的内部成员 - 这样可以更轻松地*浏览*文档以查找您在同一程序集中编写的代码。（当然，总是有 InternalsVisibleTo。）对于私人会员，我认为它有点难以证明。

如果您使用 Sandcastle 生成离线文档，您可以要求它生成一个新的 XML 文件，其中只有公共成员 - 并且只有摘要部分。我不记得它在 SHFB 中的样子，但在我们的 Noda Time 项目文件中，我相信这是相关部分：

```
 <ComponentConfig id="IntelliSense Component" enabled="True">
    <component id="IntelliSense Component" 
               type="SandcastleBuilder.Components.IntelliSenseComponent" 
               assembly="{@SHFBFolder}SandcastleBuilder.Components.dll">
      <output includeNamespaces="false" namespacesFile="Namespaces" 
              folder="{@OutputFolder}\..\PublicApi" />
    </component>
  </ComponentConfig> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-20T15:42:33.470

这是我过滤 xml 文档的 VBScript。

将 strInputFile、strOutputFile 更改为您的输入和输出 XML 文档文件。此外，更改“arrWhiteList = Array ...”行，列出您想要为其提供文档的所有类型。

```
option explicit

const strInputFile = "C:\Temp\YourModule.XML"
const strOutputFile = "C:\Temp\YourModule.filtered.XML"

Dim arrWhiteList
arrWhiteList = Array( "MyNamespace.Type1", "MyNamespace.Type2", "MyNamespace.Type3" )

Function isNameOk( strName )
    Dim className, i

    for each className in arrWhiteList
        i = InStr(strName, className)
        if i = 3 Then
            isNameOk = True
            exit function
        end if
    Next
    isNameOk = false
end function

Sub Main()
    Dim objXml, dicToRemove
    Set objXml = CreateObject("Msxml2.DOMDocument.6.0")
    objXml.Load strInputFile

    Set dicToRemove = CreateObject( "Scripting.Dictionary" )

    Dim node, strName
    for each node in objXml.documentElement.SelectNodes( "//member" )
        strName = node.getAttribute( "name" )
        if not isNameOk( strName ) then
            dicToRemove.add node, ""
        end if
    Next

    Dim nodeMembers, arrKeys
    Set nodeMembers = objXml.documentElement.SelectSingleNode( "//members" )
    arrKeys = dicToRemove.Keys

    for each node in arrKeys
        nodeMembers.removeChild node
    next

    objXml.save strOutputFile
End Sub

Call Main() 
```

# html - 去除页面顶部的边框

> ID：14786936
> 
> 赞同：1
> 
> 时间：2013-02-09T10:01:42.440
> 
> 标签：html, css

所以基本上我不能删除页面的顶部。它只是空白，无论我如何更改我的 css，我似乎都无法更改任何内容。我希望我的导航栏位于页面顶部，没有填充或边框或任何东西。这是我的代码，我知道这可能是最简单的事情，只是我目前找不到它。

HTML

```
<!DOCTYPE html>

<html>

<head>
    <meta name="Description" content="This is a test website!"/>
    <meta name="author" content="Me!"/>
    <title>test | Home</title>
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
</head>

<body>

    <div id="wrapper">
        <nav id="navmenu">
            <ul>
                <li>Home</a>
                <li>About</li>
                <li>Tutorials</li>
                <li>Services</li>
                <li>Contact Us</li>
            </ul>

        <aside id="sidenews">

        </aside>

        <div id="center">

            <section id="mainsection">
                <article>
                    <header>
                        <hgroup>
                            <h1>This is a test</h1>
                            <h2>I like tests!</h2>
                        </hgroup>
                    </header>
                    <section>
                        <p>This is the main section of my section (sectception)</p>
                    </section>
                    <footer>
                        <p>Time and date</p>
                    </footer>
                </article>
            </section>

        </div>

        <footer id="cright">
            <p>This is the copyright section. All rights reserved.</p>
        </footer>
</body>

</html> 
```

CSS

```
*{
margin: 0;
padding: 0;
}

header, section, footer, aside, nav, article, hgroup{
    display: block;
}

a{
    text-decoration: none;
    color: #FFF;
}

a:hover{
    color: #333399;
}

#wrapper{
    width: 1000px;
    margin: 20px auto;
    text-align: left;
    background-color: #FFF;
}

#navmenu{
    background: #3366CC;
    color: #eee;
    text-align: center;
    height: 100px;
    padding: 0;
    margin:0;
    float: top;
    width: 100%;
}

#navmenu li{
    display: inline-block;
    list-style: none;
    padding: 20px;

}

#navmenu li:hover{
    color: #FFF;
    background: #3399FF;
    border-radius: 15px;
    -moz-border-radius: 5px;
}

#mainsection{
    float:left;
    width: 630px;
    margin:30px;
    margin-top: 2
    background-color:#FFF;
    color: #222;
    text-align: left;

}

#cright{
    text-align: center;
    background-color: #AAA;

    clear: both;
}

#center{
    width: 1000px;
    height: 1000px;
    background-color:#FFF;
}

#sidenews{
    float:right;
    width: 250px;
    height: 940px;
    margin: 0px 0px;
    padding: 30px;
    background-color:#FFF;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-09T10:04:50.637

将包装器的边距更改为 0 ？

```
#wrapper{
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:07:03.727

您的#wrapper 元素的上边距为 20 像素 - 是吗？

```
#wrapper{
  width: 1000px;
  margin: 0 auto;
  text-align: left;
  background-color: #FFF;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T10:07:04.300

在包装器上将边距设置为 0

```
#wrapper {
    background-color: #FFFFFF;
    margin: auto;
    text-align: left;
    width: 1000px;
} 
```

# php - 如何使用具有比较标准的 findBy 方法

> ID：14786937
> 
> 赞同：85
> 
> 时间：2013-02-09T10:01:49.320
> 
> 标签：php, doctrine-orm

我需要使用比较标准（不仅是精确标准）使用“魔术查找器”findBy 方法。换句话说，我需要做这样的事情：

```
$result = $purchases_repository->findBy(array("prize" => ">200")); 
```

这样我就能得到所有奖金超过 200 的购买。

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2013-02-09T16:20:15.490

该类[`Doctrine\ORM\EntityRepository`](https://github.com/doctrine/doctrine2/blob/2.3.2/lib/Doctrine/ORM/EntityRepository.php)实现[`Doctrine\Common\Collections\Selectable`](https://github.com/doctrine/collections/blob/v1.0/lib/Doctrine/Common/Collections/Selectable.php)API。

该`Selectable`界面非常灵活且非常新，但它允许您在存储库和单个项目集合上轻松处理比较和更复杂的标准，无论是在 ORM 或 ODM 中还是完全独立的问题。

这将是您刚刚在 Doctrine ORM 中要求的比较标准`2.3.2`：

```
$criteria = new \Doctrine\Common\Collections\Criteria();
$criteria->where(\Doctrine\Common\Collections\Criteria::expr()->gt('prize', 200));

$result = $entityRepository->matching($criteria); 
```

这个 API 的主要优点是你在这里实现了某种策略模式，它适用于存储库、集合、惰性集合以及`Selectable`实现 API 的任何地方。

这使您可以摆脱为存储库编写的数十种特殊方法（例如`findOneBySomethingWithParticularRule`），而专注于编写自己的标准类，每个标准类都代表这些特定过滤器之一。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-09T12:58:43.843

这是一个使用[Expr() 类](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html#the-expr-class)的示例- 几天前我也需要这个，我花了一些时间来找出确切的语法和使用方式：

```
/**
 * fetches Products that are more expansive than the given price
 * 
 * @param int $price
 * @return array
 */
public function findProductsExpensiveThan($price)
{
  $em = $this->getEntityManager();
  $qb = $em->createQueryBuilder();

  $q  = $qb->select(array('p'))
           ->from('YourProductBundle:Product', 'p')
           ->where(
             $qb->expr()->gt('p.price', $price)
           )
           ->orderBy('p.price', 'DESC')
           ->getQuery();

  return $q->getResult();
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-09T10:18:58.167

您必须使用[DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html)或[QueryBuilder](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html)。例如，在您的 Purchase [-EntityRepository](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-objects.html#custom-repositories)中，您可以执行以下操作：

```
$q = $this->createQueryBuilder('p')
          ->where('p.prize > :purchasePrize')
          ->setParameter('purchasePrize', 200)
          ->getQuery();

$q->getResult(); 
```

对于更复杂的场景，请查看[Expr() 类](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/query-builder.html#the-expr-class)。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-10-03T13:23:39.033

```
$criteria = new \Doctrine\Common\Collections\Criteria();
    $criteria->where($criteria->expr()->gt('id', 'id'))
        ->setMaxResults(1)
        ->orderBy(array("id" => $criteria::DESC));

$results = $articlesRepo->matching($criteria); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-18T16:33:11.060

Symfony 文档现在明确地展示了如何做到这一点：

```
$em = $this->getDoctrine()->getManager();
$query = $em->createQuery(
    'SELECT p
    FROM AppBundle:Product p
    WHERE p.price > :price
    ORDER BY p.price ASC'
)->setParameter('price', '19.99');    
$products = $query->getResult(); 
```

来自[http://symfony.com/doc/2.8/book/doctrine.html#querying-for-objects-with-dql](http://symfony.com/doc/2.8/book/doctrine.html#querying-for-objects-with-dql)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-18T14:20:26.453

复制 findBy 查询并对其进行修改以返回您的预期结果是一种好方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-20T10:13:34.363

我喜欢使用这样的静态方法：

```
$result = $purchases_repository->matching(
    Criteria::create()->where(
        Criteria::expr()->gt('prize', 200)
    )
); 
```

当然，当条件为1的时候可以push逻辑，但是当条件比较多的时候最好还是分片，配置后传给方法：

```
$expr = Criteria::expr();

$criteria = Criteria::create();
$criteria->where($expr->gt('prize', 200));
$criteria->orderBy(['prize' => Criteria::DESC]);

$result = $purchases_repository->matching($criteria); 
```

# algorithm - 填充2个背包的最佳方式？

> ID：14786941
> 
> 赞同：17
> 
> 时间：2013-02-09T10:02:13.950
> 
> 标签：algorithm, dynamic-programming, graph-algorithm, knapsack-problem

最佳填充背包的动态规划算法在一个背包的情况下运行良好。但是是否有一种有效的已知算法可以最佳地填充 2 个背包（容量可能不相等）？

我尝试了以下两种方法，但它们都不正确。

1.  首先使用原始的 DP 算法填充第一个背包，填充一个背包，然后填充另一个背包。
2.  首先填充一个大小为 W1 + W2 的背包，然后将溶液分成两个溶液（其中 W1 和 W2 是两个背包的容量）。

问题陈述（另见Wikipedia 上的[背包问题）：](http://en.wikipedia.org/wiki/Knapsack_problem)

1.  我们必须用一组物品（每个物品都有一个重量和一个值）填充背包，以便在总重量小于或等于背包大小的情况下最大化我们可以从这些物品中获得的价值。

2.  我们不能多次使用一个项目。

3.  我们不能使用项目的一部分。我们不能拿走一件物品的一小部分。（每个项目都必须完全包含或不包含）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-09T12:57:42.473

我将假设每个`n`项目只能使用一次，并且您必须最大化您的利润。

原来的背包是`dp[i] = best profit you can obtain for weight i`

```
for i = 1 to n do
  for w = maxW down to a[i].weight do
    if dp[w] < dp[w - a[i].weight] + a[i].gain
      dp[w] = dp[w - a[i].weight] + a[i].gain 
```

现在，既然我们有两个背包，我们可以使用`dp[i, j] = best profit you can obtain for weight i in knapsack 1 and j in knapsack 2`

```
for i = 1 to n do
  for w1 = maxW1 down to a[i].weight do
    for w2 = maxW2 down to a[i].weight do
      dp[w1, w2] = max
                   {
                       dp[w1, w2], <- we already have the best choice for this pair
                       dp[w1 - a[i].weight, w2] + a[i].gain <- put in knapsack 1
                       dp[w1, w2 - a[i].weight] + a[i].gain <- put in knapsack 2
                   } 
```

时间复杂度是`O(n * maxW1 * maxW2)`，`maxW`背包可以承载的最大重量在哪里。请注意，如果容量很大，这不是很有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:29:37.623

原始 DP 假设您在 dp 数组中标记了您可以在背包中获得的值，然后通过考虑元素来完成更新。
如果有 2 个背包，您可以使用二维动态数组，因此**dp[ i ][ j ] = 1**当您可以将重量**i**放在第一个背包上，将重量**j**放在第二个背包上时。更新类似于原始 DP 案例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-20T15:30:58.763

递归公式是任何人都在寻找：

给定 n 个项目，使得项目 i 具有权重 wi 和值 pi。两个背包具有 W1 和 W2 的容量。

对于每一个 0<=i<=n, 0<=a<=W1, 0<=b<=W2，表示 M[i,a,b] 的最大值。

对于 a<0 或 b<0 - M[i,a,b] = -∞ 对于 i=0 或 a,b=0 - M[i,a,b] = 0

公式：M[i,a,b] = max{M[i-1,a,b], M[i-1,a-wi,b] + pi, M[i-1,a,b- wi] + pi}

i 项问题的每个解决方案要么在背包 1 中，要么在背包 2 中，要么在其中没有第 i 项。

# c - 在 ATtiny2313 上初始化堆栈指针

> ID：14786942
> 
> 赞同：0
> 
> 时间：2013-02-09T10:02:17.063
> 
> 标签：c, gcc, assembly, avrdude

我正在使用 avrdude 和 makefile 对 ATtiny2313 进行编程。我相信堆栈指针没有正确初始化，因为当我调用一个函数时，程序似乎冻结了。我找到了以下汇编代码：

```
.include "tn2313def.inc"
ldi r16, low(RAMEND)   ; Main program start 
out SPL,r16      ;Set Stack Pointer to top of RAM 
```

我认为这可能有效，但我不知道如何将它合并到我创建的 c 代码中。IE。我需要包含一个特殊的头文件还是以某种方式表示它是汇编而不是c。我对编程比较陌生，我将不胜感激有关如何正确实现此代码或使我当前的 c 代码初始化堆栈指针的另一种方法的任何帮助。

先感谢您。

斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:49:24.020

这实际上取决于您如何配置您的makefile，以确定堆栈指针是否会被初始化。如果您正在使用`gcc`正常的编译和链接选项，链接器会确保一些启动代码`crtX.o`也包含在您的可执行文件中。链接器会自动`crtX.o`为您的处理器和编译选项选择正确的文件。

除此之外，`crtX.o`文件中的代码将按照 C 标准的要求将 bss 段清除为全零，配置您的堆栈指针并在正确的位置为那些未被覆盖的中断向量提供中断向量。

请记住，ATTiny2313 只有 128 字节的 SRAM。该区域必须足够大，以容纳程序和堆栈中的任何初始化数据。只是调用一个简单函数的过程会在调用函数之前使用相当多的 RAM 字节来保存堆栈上的寄存器。

所以，我建议做这些事情：

*   如果您的编译器提供了标准makefile，则使用标准makefile，它将确保包含标准启动代码并且在`main()`调用之前正确设置堆栈/RAM。
*   打开链接器映射和符号文件输出，并验证您确实有一些可用空间可用于堆栈。
*   Atmel IDE 有一个合理的模拟器，因此请尝试在模拟器中运行您的代码。当您调用函数和定位任何奇怪的行为时，您将能够观察堆栈使用情况。
*   您可能只是碰巧发生了堆栈溢出（这就是您来到[stackoverflow.com](http://stackoverflow.com)的原因，对吧？

# android - Adobe AIR for Android - 如何在 air 应用程序中使用 APK 扩展文件？

> ID：14786950
> 
> 赞同：3
> 
> 时间：2013-02-09T10:03:30.630
> 
> 标签：android, air, apk, apk-expansion-files

我已经为 Android 创建了一个 AIR 应用程序，我即将提交给 Google Play。我的 APK 的总文件大小约为 250 MB，因为我嵌入了许多应用程序运行所需的视频内容。我无法从服务器下载视频，因为我们的客户端不希望用户在点击每个视频后等待。我刚刚发现 Google Play 商店允许的最大 APK 文件大小为 50 MB，超过该大小您将不得不使用称为 APK 扩展文件的东西。我以前从未在 AIR 应用程序中使用过这些，我搜索了很多论坛，但找不到这个问题的任何答案。

我只是因为这个 APK 大小限制而被卡住了。任何帮助将不胜感激。

谢谢

# asp.net - 从过去 2 天开始，我的 mvc 项目在重新启动后调试两次以上时抛出此错误..

> ID：14786951
> 
> 赞同：0
> 
> 时间：2013-02-09T10:03:42.200
> 
> 标签：asp.net, sql-server, asp.net-mvc, database, asp.net-mvc-4

我正在使用vs2012开发一个mvc 4项目。它以前是正常的，但从最近2天开始，当我重新启动后调试它两次以上时，它会出现这个错误......

**建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）**

我的系统上没有安装 sql server management studio，我认为这可能是一个原因，我正在使用我使用 vs 创建的 sql db。谁能帮帮我！！！提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:46:01.183

使用[SQL Server 2012 Express](http://msdn.microsoft.com/en-us/evalcenter/hh230763.aspx)免费下载，优于 LocalDb (VS2012)

或者

在 vs2012 中打开您的服务器资源管理器选项卡，刷新数据连接。您的 LocalDb 被代码中的另一个模块锁定。

# ember.js - 如何从另一个控制器内容获取条目并在丢失时调用自我控制器

> ID：14786956
> 
> 赞同：0
> 
> 时间：2013-02-09T10:03:53.950
> 
> 标签：ember.js

这是代码说明：http: [//jsbin.com/uzapuy/1/edit](http://jsbin.com/uzapuy/1/edit)

我希望能够通过 URL访问*测试，如下所示：http:* [//jsbin.com/uzapuy/1#/test/2](http://jsbin.com/uzapuy/1#/test/2) 因为条目可能已经存在于客户端，我想首先检查它，并且只有当它缺少 fetch从服务器端。如果没有 DS.Store，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:40:03.767

In your `TestRoute`, can you not do something like:

```
App.TestRoute = Ember.Route.extend({

    model: function(params) {

        // Find your controller that has the "fetch" method.
        var testController = this.controllerFor('test');

        // Check if there's an existing model with this ID.
        var existingModel  = testController.find('id', params.id);

        // Determine if we found a model or not.
        if (existingModel) {

            // If we found an existing model, then we can set this as the model.
            return existingModel;

        }

        // Otherwise we'll fetch it from the server.
        return testController.fetch(params.id);
    }

}); 
```

Also, bear it in mind that in your code, the `test` variable is `undefined`:

```
var tests = App.Test.create({id: id, name: 'fetched ' + id});
self.set('content', test); 
```

You're after `tests`, I assume.

# java - 如何在新行中打印 JSTL 迭代值

> ID：14786957
> 
> 赞同：0
> 
> 时间：2013-02-09T10:04:10.800
> 
> 标签：java, spring, hibernate, jsp, jstl

我有一个如下的字符串：

字符串 emps="date1,date2,date3,date4";

我的要求是使用 JSTL 标签在 jsp 页面上打印如下：

```
OutPut Should be: 
```

日期1

日期2

日期3

日期4

我在我的jsp中使用了以下代码：

```
<c:set var="string2" value="${fn:split(emps,',')}" />
<c:forEach items="${string2}" var="emps1">
<td><c:out value="${emps1}"/></td>

</c:forEach> 
```

但是我的代码正在删除“，”并在一行中打印如下：

```
date1 date2 date3 date4 
```

谁能给我一个解决方案，如何使用jstl标签在jsp中逐行打印日期值？

谢谢

**更新：**

```
<c:when test="${requestScope.size!=0}">
        <table border="1">
            <tr>
                <th>Employee Code</th>

                <th>EmployeeName</th>
                <th>EmployeeDepartment</th>
                <th>AbsentDate</th>
                <th>TotalNOOfAbsentDates</th>
            </tr>

            <c:forEach items="${requestScope.set1}" var="emps">
                <tr>
                    <td><c:out value="${emps[0]}" /></td>

                    <td><c:out value="${emps[1]}" /></td>
                    <td><c:out value="${emps[2]}" /></td>

                    <td><c:out value="${emps[4]}" /></td>
                    <c:set var="string2" value="${fn:split(emps[3],',')}" />
                    <c:forEach items="${string2}" var="emps1">
                    <td>
                        <p><c:out value="${emps1}"/></p>

                        </td>

                    </c:forEach>

                    </tr>
            </c:forEach> 
```

**注意：** 我要打印

这个（迭代）数据逐行使用 `<td>`标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:10:38.863

我会将其拆分`String`为`List`您的 .jsp 之外，然后将其`List`放入请求中。根据您周围的标记，您可以使用多种方法将项目放在新行上，例如`<br/>`,`<div>`或`<p>`.

**爪哇**

```
String emps="date1,date2,date3,date4";
List<String> empList = new ArrayList<String>(Arrays.asList(emps.split(",")));
request.setAttribute("empList", empList); 
```

**JSTL**

```
<c:forEach items="${empList}" var="emp">
   <div><c:out value="${emp}"/></div>
</c:forEach> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:23:23.657

你的要求看起来有点奇怪，但如果你想用表格输出它......

```
<table>
    <c:set var="string2" value="${fn:split(emps,',')}" />
    <c:forEach items="${string2}" var="emps1">
        <tr>
            <td><c:out value="${emps1}"/></td>
        </tr>
    </c:forEach>
</table> 
```

我希望我正确地回答了你的问题

* * *

**更新：**

尝试运行下一个代码：

```
<table>
    <c:set var="sourceString" value="${fn:split('q,w,e,r,t,y',',')}" />
    <c:forEach items="${sourceString}" var="element">
        <tr>
            <td><c:out value="${element}"/></td>
        </tr>
    </c:forEach>
</table> 
```

它对我来说很好（它在新行中输出每个字母），我相信它对你有用。检查您的 html 代码并尝试运行此代码以确保它有效。

* * *

**更新2：**

最后，您的代码将如下所示：

```
<table border="1">
    <tr>
        <th>Employee Code</th>

        <th>EmployeeName</th>
        <th>EmployeeDepartment</th>
        <th>AbsentDate</th>
        <th>TotalNOOfAbsentDates</th>
    </tr>

    <c:forEach items="${requestScope.set1}" var="emps">
        <tr>
            <c:set var="string2" value="${fn:split(emps[3],',')}" />
            <c:forEach items="${string2}" var="emps1">

                <td><c:out value="${emps[0]}" /></td>
                <td><c:out value="${emps[1]}" /></td>
                <td><c:out value="${emps[2]}" /></td>
                <td><c:out value="${emps1}"/></td>
                <td><c:out value="${emps[4]}" /></td>

            </c:forEach>
        </tr>
    </c:forEach>
</table> 
```

你的错误是混合`<tr>`标签智慧`<td>`。此代码将为每个缺席日期生成行，这实际上是您想要的吗？

* * *

**upd3：** 如果您只想在单元格中输出所有这些日期（看起来有点难看），请使用它：

```
<table border="1">
    <tr>
        <th>Employee Code</th>

        <th>EmployeeName</th>
        <th>EmployeeDepartment</th>
        <th>AbsentDate</th>
        <th>TotalNOOfAbsentDates</th>
    </tr>

    <c:forEach items="${requestScope.set1}" var="emps">
        <tr>
            <td><c:out value="${emps[0]}" /></td>
            <td><c:out value="${emps[1]}" /></td>
            <td><c:out value="${emps[2]}" /></td>
            <td>
                <c:set var="string2" value="${fn:split(emps[3],',')}" />
                <c:forEach items="${string2}" var="emps1">
                    <p>
                        <c:out value="${emps1}"/>
                    </p>
                </c:forEach>
            </td>
            <td><c:out value="${emps[4]}" /></td>
        </tr>
    </c:forEach>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T12:04:55.987

就像 Kevin Bowersox 指出的那样，`<div>`我`<p>`会`<br />`在`<TD>`

# javascript - Leaflet.js 缩放到单击的特征，然后向右平移

> ID：14786959
> 
> 赞同：4
> 
> 时间：2013-02-09T10:04:18.193
> 
> 标签：javascript, maps, leaflet

我希望能够在您单击某个功能时将其拟合到某个功能，但是当它放大时，我希望它考虑到一个控制层，该控制层一旦放大就会出现，并且放大但只有大约 150px 到左。目前我可以使用以下代码完成此操作，但不幸的是它不是平滑缩放，因为我当前的方法将使用 fitBounds 进行缩放，然后一旦缩放它使用 panBy 向左平移 150px。如果平移是平稳的，这可能不会那么糟糕，也许在等待 250 毫秒之后。理想情况下，我希望能够对传递给 fitBounds 方法的边界进行一些数学运算，以简单地考虑向左移动 150px。

这是我目前正在工作的一个[例子。](http://uberbuilder.github.com/choropleth/tests/2013/02/08/hunger-coalition-version-0.1.7/)

这是我正在使用的代码的简化版本：（您可以单击[此处](http://uberbuilder.github.com/choropleth/tests/2013/02/08/hunger-coalition-version-0.1.7/)获取包含所有源代码的完整工作版本）

**当你点击**

```
function clickFeature(e) {
  var layer = e.target;

  map.fitBounds(layer.getBounds());
} 
```

**zoomEnd 上的地图：**

```
map.on({
  zoomend: function() {
    map.panBy([150, 0]);
  }
}); 
```

所以，我已经实现了预期的功能，但它并不顺利。

有没有一种方法可以对我们为单击功能获得的边界进行一些数学运算，以便在缩放时放大到已经修改的坐标，从而消除两步动画过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T07:01:47.973

首先，您可以使用平移选项控制动画。这可以帮助您使过渡更顺畅。[你可以在这里](http://leafletjs.com/reference.html#map-panoptions)看到那些。

其次，您可以使用转换函数计算所需的偏移量。这些可以在[这里](http://leafletjs.com/reference.html#map-conversion-methods)看到。

例如，您可以执行类似的操作（在我的脑海中）使用 getBoundsZoom 作为多边形边界上的地图对象来计算您未来的缩放，然后在项目函数中使用该缩放与多边形并创建一个新的 LatLngBound from稍微偏移的多边形边界。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T16:54:08.340

我有同样的问题，如果比我想象的更容易！您可以在 fitBounds 方法上设置填充（以及所有的平移/缩放方法）

[http://leafletjs.com/reference.html#map-fitboundsoptions](http://leafletjs.com/reference.html#map-fitboundsoptions)

所以：

```
map.fitBounds(layer.getBounds(),{paddingBottomRight:[150,0]}); 
```

# text - 如何将表格中的文本向左对齐？

> ID：14786963
> 
> 赞同：7
> 
> 时间：2013-02-09T10:04:40.503
> 
> 标签：text, twitter-bootstrap, alignment, caption

再会。

代码：

```
<table class="table table-hover table-bordered">
<caption class="pull-right">Pays</caption>
<thead> 
```

bootstrap.css 中的哪个类将文本`<caption>`向左对齐？

如果可以给我完整描述格式文本的链接`<caption>`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-09T13:17:03.403

从 2 月 7 日发布的 Bootstrap 2.3 开始，现在有一个内置类可以执行此操作：请参阅[http://jsfiddle.net/panchroma/PjZqE/](http://jsfiddle.net/panchroma/PjZqE/)

HTML

```
<table class="table table-hover table-bordered">
<caption class="text-left">Caption Left</caption> 
```

有关所有新功能的完整详细信息，请参阅[http://blog.getbootstrap.com/2013/02/07/bootstrap-2-3-released/](http://blog.getbootstrap.com/2013/02/07/bootstrap-2-3-released/)

# debugging - 使用bochs调试时如何跨步和单步返回

> ID：14786968
> 
> 赞同：1
> 
> 时间：2013-02-09T10:05:11.707
> 
> 标签：debugging, assembly, bochs

例如，现在我正在调试该行：

```
[0x000000000009048a] 0008:0009048a (unk. ctxt): call .-225 (0x000903ae)   ; e81fffffff 
```

我不想进入这个功能。也就是说，我想跨过去，直接去地址：0008:0009048f。博克斯能做到吗？如果我已经步入函数，我怎么能直接返回呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T17:41:58.380

是的，bochs 支持跳过子程序调用：

```
n|next|p - execute instruction stepping over subroutines 
```

不，bochs 不支持运行退出帧。您可以通过设置断点来解决此限制（但对于递归函数来说很乏味）。

# python - 何时调用 C tp_as_mapping (et al.) 方法？

> ID：14786970
> 
> 赞同：3
> 
> 时间：2013-02-09T10:05:26.587
> 
> 标签：python, python-c-api, python-extensions

C PyObject 结构包含字段`tp_as_number`和。在什么情况下会调用这些？任何人都可以提供一些示例 Python 代码来调用这些 C 方法吗？`tp_as_sequence``tp_as_mapping`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T12:59:20.803

这些方法相当于 python 的[特殊方法](http://docs.python.org/2/reference/datamodel.html#specialnames)，并且在相同的情况下被调用。例如`tp_as_number->nb_add`在执行时调用`a + b`，`a`是扩展类型。它相当于`__add__`。`inplace_*`函数是方法的等价物`__i*__`。

请注意，这些`__r*__`方法的实现只是将参数交换到普通函数，因此`5 + a`扩展`a`类型将首先尝试调用 的数字版本，在`nb_add`此失败后它尝试`nb_add`将其作为第一个参数和第二个参数。`a``5``a`

`tp_as_mapping`和`tp_as_sequence`结构也是如此。和函数由内置函数 调用`mp_length`，等效于。从理论上讲，您可以为and实现不同的功能，在这种情况下具有优先权（这可以从源代码中看到，即使我不知道是否记录了这种行为）。`sq_length``len``__len__``mp_length``sq_length``sq_length`

还要注意，例如，`+`运算符可以在不同的功能中实现。在`sq_concat`尝试之后调用`nb_add`，因此扩展类型可以支持`+`运算符而无需`nb_add`设置函数。

# wso2 - 发布到 session-validate.jsp 不使用 WSO2 ELB

> ID：14786973
> 
> 赞同：0
> 
> 时间：2013-02-09T10:05:56.707
> 
> 标签：wso2

我在尝试浏览注册表时遇到了使用 WSO2 Stratos 1.6.0 的问题。单击资源 > 浏览时，浏览器会挂起。查看网络流量后，我看到对 /carbon/admin/jsp/session-validate.jsp 的 HTTP POST 请求未完成。

然后我开始调试 WSO2ELB (2.0.2) 中的 org.apache.synapse.transport.passthru.ServerWorker (2.1.1-wsov1)。我发现将 ACK 写入响应输出流的代码被跳过了。这似乎只在发布到 /carbon/admin/jsp/session-validate.jsp 时发生，当我破解 /carbon/admin/js/main.js 以执行 GET 时，一切正常。

所以我的问题是……这是 main.js 中的错误吗？它是 WSO2ELB 中的 ServerWorker 中的错误吗？main.js 中的 sessionAwareFunction 使用 POST 而不是 GET 是否有特殊原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T13:00:53.223

这是 ELB 使用的传输中的一个错误。请使用最新版本的 ELB [http://wso2.com/products/elastic-load-balancer/](http://wso2.com/products/elastic-load-balancer/)

# apache - htaccess 文件重定向非 www 和 https 请求，并重写 URL

> ID：14786974
> 
> 赞同：0
> 
> 时间：2013-02-09T10:06:10.237
> 
> 标签：apache, .htaccess, url, redirect, rewrite

我正在尝试创建我的第一个 .htaccess 来进行 URL 重写和其他事情，但是我浪费了两天时间搜索信息并试图让它工作但没有成功。

我想要达到的目标如下：

**1）将所有非www URL重定向到www URL**（这似乎是seo的最佳实践？）

```
domain.com   -->  www.domain.com 
```

**2）将所有https请求重定向到http请求：**

```
https://www.domain.com  -->  http://www.domain.com
https://domain.com      -->  http://www.domain.com 
```

**3) 将我的 URL 重写为对 SEO 友好，并最终去掉地址末尾的任何尾随斜杠：**

```
www.domain.com/abc    -->  www.domain.com/index.php?page=abc
www.domain.com/abc/   -->  www.domain.com/abc 
```

到目前为止，我所拥有的是三个单独工作的片段：

```
# 1) This should be correct, I hope!
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

```
# 2) This seems to work 100% right
RewriteEngine On
RewriteCond %{HTTPS} =on
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI} [R,L] 
```

```
#3) Major issues here
RewriteEngine On
RewriteRule ^([^/\.]+)/?$ index.php?page=$1 [L] 
```

这部分有效：它可以满足我的要求，但是当我在 SEO 友好 URL 之后放置一个斜杠时，我会破坏所有相对路径：

```
www.domain.com/abc      OK
www.domain.com/abc/     page gets displayed but all relative URL for css and images are broken 
```

我什至不知道如何在单个 htaccess 文件中组合不同的规则以使它们正确交互。

抱歉，解释太长了，这个问题让我感到非常沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:27:56.727

css 文件或图像的相对路径的问题当然位于尾部斜杠中。浏览器认为他在子文件夹中，并将 css 文件的相对路径附加到您当前的位置，这将导致

```
www.domain.com/abc/styles/style.css 
```

代替

```
www.domain.com/styles/style.css 
```

有两种方法可以解决此问题：

1.  我首选的解决方案是将 html 中的所有路径设为绝对路径。
2.  重定向到不带斜杠的相同路径。由于您似乎忽略了斜杠，因此这应该没有副作用。匹配规则如下所示

    ```
    RewriteRule ^([^/\.]+)/?$ http://%{HTTP_HOST}$1 [R=301,L] 
    ```

您完整的 htaccess 文件将是这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{HTTPS} =on
RewriteRule .* http://%{SERVER_NAME}%{REQUEST_URI} [R,L]

RewriteRule ^([^/\.]+)/$ http://%{HTTP_HOST}$1 [R=301,L]
RewriteRule ^([^/\.]+)$ index.php?page=$1 [L] 
```

# ruby-on-rails - 读取cookie时字符串的未定义方法“拒绝”

> ID：14786976
> 
> 赞同：2
> 
> 时间：2013-02-09T10:06:51.367
> 
> 标签：ruby-on-rails, ruby

我有以下代码，基本上我想在一个人第一次提交表单时保存一个 cookie，下次从 cookie 中读取以填充表单。

```
 def new
    @detail = Detail.new(cookies[:detail])
 end 
```

并且create方法有

```
 def create
    @detail = Detail.new(params[:detail])

    if @detail.save
      cookies[:detail] = {
        value: params[:detail],
        expires: 30.days.from_now
      }
      redirect_to confirmation_path
    else
      render 'new'
    end
  end 
```

我得到错误：

```
undefined method `reject' for #<String:0x007fbf5486ac48> 
```

# c# - 使用动态创建的 TextBox 中的文本

> ID：14786978
> 
> 赞同：1
> 
> 时间：2013-02-09T10:06:58.850
> 
> 标签：c#, user-interface, textbox

我有一个关于 C# 中的文本框的问题。我制作了一个按钮，单击时将创建文本框：

```
 private void helloButton_Click(object sender, EventArgs e)
    {
        TextBox txtRun = new TextBox();
        TextBox txtRun2 = new TextBox();
        txtRun2.Name = "txtDynamic2" + c++;
        txtRun.Name = "txtDynamic" + c++;
        txtRun.Location = new System.Drawing.Point(40, 50 + (20 * c));
        txtRun2.Location = new System.Drawing.Point(250, 50 + (20 * c));
        txtRun2.ReadOnly = true;

        txtRun.Size = new System.Drawing.Size(200, 25);
        txtRun2.Size = new System.Drawing.Size(200, 25);
        this.Controls.Add(txtRun);
        this.Controls.Add(txtRun2);
    } 
```

如何将用户键入的文本拉入这些新生成的文本框中，以将其用作不同函数的参数（将由不同的按钮调用）？我对此很陌生，可以使用帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T10:56:38.607

```
var text = (TextBox)this.Controls.Find("txtDynamic2", true)[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:25:24.817

```
var matches = this.Controls.Find("txtDynamic2", true);
TextBox tx2 = matches[0] as TextBox;            
string yourtext = tx2.Text; 
```

This will return an array of controls by the name txtDynamic2, in your case the first one would be the control you are looking for unless you create more controls having the same name. This will allow you to fully access the textbox if you found it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:38:15.317

你可以很容易地做到这一点：

```
//get the text from a control named "txtDynamic"
string text = this.Controls["txtDynamic"].Text; 
```

请记住确保您的控件具有**唯一** `Name`属性，否则您将从找到的第一个具有指定名称的控件中获取文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-09T10:14:56.843

如果您想在其他方法中使用实例化的文本框，那么您可以通过将它们传递给方法或将它们存储为类的成员来实现。

将它们存储在下面的类中的示例。

```
public class YourForm
{
    private TextBox txtRun;
    private TextBox txtRun2;

    private void helloButton_Click(object sender, EventArgs e)
    {
        txtRun = new TextBox();
        txtRun2 = new TextBox();

        // removed less interesting initialization for readability

        this.Controls.Add(txtRun);
        this.Controls.Add(txtRun2);
    }

    public void DoStuffWithTextBoxes()
    {
        if (txtRun != null && txtRun2 != null)
        {
            // Retrieve text value and pass the values to another method
            SomeOtherMagicMethod(txtRun.Text, txtRun2.Text);
        }
    }

    private void SomeOtherMagicMethod(string txtRunText, string txtRun2Text)
    {
        // Do more magic
    }
} 
```

# javascript - 如何将创建的标签发送回服务器

> ID：14786979
> 
> 赞同：0
> 
> 时间：2013-02-09T10:06:59.537
> 
> 标签：javascript, jquery, ajax, asp.net-mvc, jquery-select2

我使用[Select2](http://ivaynberg.github.com/select2/) jquery 插件为我的 ASP.NET MVC 网站上的帖子添加/创建标签。我使用的功能是“加载远程数据”和“标记支持”，如下所示：

```
 <script type="text/javascript">

        function tagResultList(tag) {
            var counter = 'ny tagg';

            var markup = "<table class='movie-result'><tr>";
            markup += "<td class='movie-info'><div class='movie-title'>" + tag.text

            if (typeof tag.count != 'undefined') {
                counter = tag.count;
            }

            markup += "(" + counter + ")</div>";
            markup += "</td></tr></table>"
            return markup;
        }

        function tagResultSelectionName(tag) {
            return tag.text;
        }

        $("#txtTagBox").select2({
            multiple: true,
            createSearchChoice:
                function (term, data) {
                    if ($(data).filter(function () { return this.text.localeCompare(term) === 0; }).length === 0) {
                        return { id: 0, text: term };
                    }
                },
            placeholder: "Sök efter en tagg",
            minimumInputLength: 3,
            maximumInputLength: 30,
            maximumSelectionSize: 5,
            ajax: { // instead of writing the function to execute the request we use Select2's convenient helper
                url: _tagsUrl,
                dataType: 'json',
                quietMillis: 100,
                data: function (term, page) {
                    return {
                        q: term, // search term
                        page: page
                    };
                },
                results: function (data, page) { // parse the results into the format expected by Select2.
                    // since we are using custom formatting functions we do not need to alter remote JSON data
                    return { results: data.Tags, more: data.MorePages };
                }
            },
            formatResult: tagResultList, // omitted for brevity, see the source of this page
            formatSelection: tagResultSelectionName,  // omitted for brevity, see the source of this page
            dropdownCssClass: "bigdrop" // apply css that makes the dropdown taller
        });
    </script> 
```

我可以键入并选择一个新标签（创建新标签），但问题是提交文本框时会将 Id 0 转发到服务器，并且无法知道创建的标签的名称。

那么如何让它将字符串而不是 id 发送到服务呢？或者是否存在混合模式，例如现有的 id 和创建的字符串？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T10:21:48.810

尝试

```
 function (term, page) {
                return {
                    q: term, // search term
                    page: page
                    ,newtag : 'created tag' //replace by var or jquery chain that'll return the string 
                } 
```

它将在 get 数组中发送到带有索引 newtag 的 _tagsurl

# makefile - Make：编译规则的.c文件

> ID：14786983
> 
> 赞同：0
> 
> 时间：2013-02-09T10:07:19.740
> 
> 标签：makefile

假设我的 Makefile 中有以下规则：

```
foo: foo1.c foo2.c head1.h head2.h
    gcc -o $@ foo1.c foo2.c 
```

正如您所看到的，在这种情况下 - 在大多数情况下 - 规则中的 .c 文件对应于您传递给 gcc 的 .c 文件。我的问题是，是否有一个可以传递给 Makefile 的变量来评估“规则中的所有 .c 文件”？

就个人而言，我使用以下内容：

```
CFILES=$(filter %.c,$^)                                                        

foo: foo1.c foo2.c head1.h head2.h
    gcc -o $@ $(CFILES) 
```

但我不确定这是否是正确的方法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T11:12:40.197

我猜你的过滤器很好，但我宁愿单独定义`.c`和`.h`文件的列表，并在适当的地方使用这些列表：

```
CFILES=foo1.c foo2.c
HFILES=head1.h head2.h

foo: $(CFILES) $(HFILES)
        gcc -o $@ $(CFILES) 
```

如果您一开始不混合`.c`，`.h`则无需将它们分开。

# bash - 在 Bash 中解析命令行参数的最佳方法？

> ID：14786984
> 
> 赞同：16
> 
> 时间：2013-02-09T10:07:40.703
> 
> 标签：bash, command-line, getopts

经过几天的[研究](http://wiki.bash-hackers.org/scripting/posparams)，我仍然无法找出在 .sh 脚本中解析 cmdline args 的最佳方法。根据我的参考资料，getopts cmd 是可行的方法，因为它“*在不干扰位置参数变量的情况下提取和检查开关。意外开关或缺少参数的开关被识别并报告为错误。* ”

位置参数（例如 2 - $@、$# 等）在涉及空格时显然不能很好地工作，但可以识别常规参数和长参数（-p 和 --longparam）。我注意到在传递带有嵌套引号的参数时，这两种方法都失败了（“this is an Ex. of ""quotes""."）。这三个代码示例中的哪一个最能说明处理 cmdline args 的方式？大师不推荐使用**getopt**功能，所以我试图避免它！

**示例 1：**

```
#!/bin/bash
for i in "$@"
do
case $i in
    -p=*|--prefix=*)
    PREFIX=`echo $i | sed 's/[-a-zA-Z0-9]*=//'`

    ;;
    -s=*|--searchpath=*)
    SEARCHPATH=`echo $i | sed 's/[-a-zA-Z0-9]*=//'`
    ;;
    -l=*|--lib=*)
    DIR=`echo $i | sed 's/[-a-zA-Z0-9]*=//'`
    ;;
    --default)
    DEFAULT=YES
    ;;
    *)
            # unknown option
    ;;
esac
done
exit 0 
```

**示例 2：**

```
#!/bin/bash
echo ‘number of arguments’
echo "\$#: $#"
echo ”

echo ‘using $num’
echo "\$0: $0"
if [ $# -ge 1 ];then echo "\$1: $1"; fi
if [ $# -ge 2 ];then echo "\$2: $2"; fi
if [ $# -ge 3 ];then echo "\$3: $3"; fi
if [ $# -ge 4 ];then echo "\$4: $4"; fi
if [ $# -ge 5 ];then echo "\$5: $5"; fi
echo ”

echo ‘using $@’
let i=1
for x in $@; do
echo "$i: $x"
let i=$i+1
done
echo ”

echo ‘using $*’
let i=1
for x in $*; do
echo "$i: $x"
let i=$i+1
done
echo ”

let i=1
echo ‘using shift’
while [ $# -gt 0 ]
do
echo "$i: $1"
let i=$i+1
shift
done

[/bash]

output:

bash> commandLineArguments.bash
number of arguments
$#: 0

using $num
$0: ./commandLineArguments.bash

using $@

using $*

using shift
#bash> commandLineArguments.bash  "abc def" g h i j* 
```

**示例 3：**

```
#!/bin/bash

while getopts ":a:" opt; do
  case $opt in
    a)
      echo "-a was triggered, Parameter: $OPTARG" >&2
      ;;
    \?)
      echo "Invalid option: -$OPTARG" >&2
      exit 1
      ;;
    :)
      echo "Option -$OPTARG requires an argument." >&2
      exit 1
      ;;
  esac
done

exit 0 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-09T10:34:40.840

我发现使用`getopt`是最简单的。它提供了对参数的正确处理，否则会很棘手。例如，`getopt`将知道如何处理在命令行上指定为`--arg=option`或的长选项的参数`--arg option`。

在解析传递给 shell 脚本的任何输入时有用的是`"$@"`变量的使用。请参阅 bash 手册页了解这与`$@`. 它确保您可以处理包含空格的参数。

这是我如何编写脚本来解析一些简单的命令行参数的示例：

```
#!/bin/bash

args=$(getopt -l "searchpath:" -o "s:h" -- "$@")

eval set -- "$args"

while [ $# -ge 1 ]; do
        case "$1" in
                --)
                    # No more options left.
                    shift
                    break
                   ;;
                -s|--searchpath)
                        searchpath="$2"
                        shift
                        ;;
                -h)
                        echo "Display some help"
                        exit 0
                        ;;
        esac

        shift
done

echo "searchpath: $searchpath"
echo "remaining args: $*" 
```

并像这样使用来表明保留了空格和引号：

```
user@machine:~/bin$ ./getopt_test --searchpath "File with spaces and \"quotes\"."
searchpath: File with spaces and "quotes".
remaining args: other args 
```

关于使用的一些基本信息`getopt`可以在[这里找到](http://tldp.org/LDP/abs/html/extmisc.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-11-16T21:50:57.177

如果你想避免使用`getopt`你可以使用这个很好的快速方法：

*   将所有选项的帮助定义为`##`注释（根据需要自定义）。
*   为每个选项定义一个具有相同名称的函数。
*   将此脚本的最后五行复制到您的脚本中（魔术）。

## 示例脚本：`log.sh`

```
#!/bin/sh
## $PROG 1.0 - Print logs [2017-10-01]
## Compatible with bash and dash/POSIX
## 
## Usage: $PROG [OPTION...] [COMMAND]...
## Options:
##   -i, --log-info         Set log level to info (default)
##   -q, --log-quiet        Set log level to quiet
##   -l, --log MESSAGE      Log a message
## Commands:
##   -h, --help             Displays this help and exists
##   -v, --version          Displays output version and exists
## Examples:
##   $PROG -i myscrip-simple.sh > myscript-full.sh
##   $PROG -r myscrip-full.sh   > myscript-simple.sh
PROG=${0##*/}
LOG=info
die() { echo $@ >&2; exit 2; }

log_info() {
  LOG=info
}
log_quiet() {
  LOG=quiet
}
log() {
  [ $LOG = info ] && echo "$1"; return 1 ## number of args used
}
help() {
  grep "^##" "$0" | sed -e "s/^...//" -e "s/\$PROG/$PROG/g"; exit 0
}
version() {
  help | head -1
}

[ $# = 0 ] && help
while [ $# -gt 0 ]; do
  CMD=$(grep -m 1 -Po "^## *$1, --\K[^= ]*|^##.* --\K${1#--}(?:[= ])" log.sh | sed -e "s/-/_/g")
  if [ -z "$CMD" ]; then echo "ERROR: Command '$1' not supported"; exit 1; fi
  shift; eval "$CMD" $@ || shift $? 2> /dev/null
done 
```

### 测试

运行此命令：

```
./log.sh --log yep --log-quiet -l nop -i -l yes 
```

产生这个输出：

```
yep
yes 
```

***顺便说一句：***它与[posix](/questions/tagged/posix "显示标记为“posix”的问题")兼容！

# php - 我使用服务器发送事件（和 Javascript/PHP）的连接会立即断开

> ID：14786985
> 
> 赞同：4
> 
> 时间：2013-02-09T10:07:44.043
> 
> 标签：php, javascript, server-sent-events

昨天我深入研究了服务器发送事件，因为它们是为我正在创建的在线游戏创建新闻源的好方法。我有一个可以订阅我的提要的工作脚本，以及一个可以在几分钟内从 MySql 数据库中提取新闻提要的脚本，但由于某种原因，它每次都会断开连接......（并且每 3 秒重新连接一次，什么都没有例如，比仅使用具有特定时间间隔的 AJAX 更好）

我正在使用的javascript：

```
var source = new EventSource('http://theobg.itselementary.site50.net/gamefeed.php');
source.onmessage = function(e) {
    $("#gamefeed").html(e.data);
} 
```

我正在使用的 PHP：

```
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');
header('Connection: keep-alive');

function sendMsg($id, $msg) {
  echo "id: $id" . PHP_EOL;
  echo "data: $msg" . PHP_EOL;
  echo PHP_EOL;
  ob_flush();
  flush();
}

//The file for connecting to my database here...
$gameid = 1;

$serverTime = time();
//Some mysql query to get the gamefeed from the database here..., gamefeed is structured like this: NEWS&OTHERNEWS&OLDERNEWS&EVENOLDERNEWS

sendMsg($serverTime, $gamefeed);

?> 
```

我已经查看了整个互联网，但一切似乎对我来说都很好，除了连接没有“保持活跃”，我不知道为什么会这样......有人可以帮助我吗？

在此先感谢，达利奥佐

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T10:15:27.533

您需要检查数据并使用循环发送。

```
<?php
while(true){
    //check for updates here
    if($updates){
        sendMsg($id,$data);
    }
    sleep(1);//loosen it up
} 
```

此外，为了更容易编码，您可以尝试我的服务器发送事件的 php 库。[这里](https://github.com/licson0729/libSSE-php)

# c# - 是否可以在 WPF 图像控件中更改图像插值的质量？

> ID：14786986
> 
> 赞同：3
> 
> 时间：2013-02-09T10:07:45.980
> 
> 标签：c#, wpf, image, interpolation, viewbox

图像控件 - 放置在 Viewbox 中。用于在窗口大小更改时自动缩放。一切都很完美。

在我的情况下是否可以更改插值类型？例如选择双三次或双线性。或者对于自动缩放这样的选择不可用？

```
BitmapImage bmp=new BitmapImage(new Uri("c:/temp/1.jpg"));
ImageSource pic = bmp;
Viewbox vb = new Viewbox();
vb.Stretch = Stretch.UniformToFill;
vb.StretchDirection = StretchDirection.DownOnly;

Image img=new Image();
img.Source = pic;

vb.Child = img; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T10:31:31.940

据我所知，您无法在 WPF 中为位图指定双三次或双线性插值（默认为线性），但您可以设置`RenderOptions.BitmapScalingMode`选项以更好地控制缩放位图的显示质量。例如：

`RenderOptions.BitmapScalingMode="NearestNeighbor"`或者`RenderOptions.BitmapScalingMode="HighQuality"`

[在 MSDN http://msdn.microsoft.com/en-us/library/system.windows.media.bitmapscalingmode](http://msdn.microsoft.com/en-us/library/system.windows.media.bitmapscalingmode)上有关于每种缩放模式的更多信息

如果您仍然有模糊图形的问题，请尝试`UseLayoutRounding="True"`在您的根元素中进行设置。这将禁用可能导致 WPF 应用程序中出现锯齿线的元素的子像素定位

# mysql - 小计和总计保留详细信息

> ID：14786990
> 
> 赞同：9
> 
> 时间：2013-02-09T10:08:35.800
> 
> 标签：mysql

我有一张发票表：

```
invoice_num, customer_ID, usd
1              A          15.2
2              B           3.6
3              A         105.1
4              C           6.0 
```

我需要一份显示所有记录（发票）并为每个客户添加小计的报告。如果我只显示每个客户的总数（使用 GROUP BY customer_ID 和 WITH ROLLUP），我知道该怎么做，但我需要保留详细信息，因此我无法对行进行分组。所需的输出是：

```
invoice_num  customer_ID   usd
1              A          15.2
3              A         105.1
Total customer A         120.3
2              B           3.6
Total customer B           3.6
4              C           6.0
Total customer C           6.0
Total customers          129.9 
```

谢谢，

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-09T10:12:31.403

还分组`invoice_num`：

```
SELECT   invoice_num, customer_ID, SUM(usd)
FROM     my_table
GROUP BY customer_ID, invoice_num WITH ROLLUP 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ace9b1/1/0)上查看。

# java - Java 中的时间：我不想看到秒数

> ID：14786992
> 
> 赞同：-1
> 
> 时间：2013-02-09T10:08:58.843
> 
> 标签：java, time

我有一个名为`Lezione`type`time`的类`Time`。这个属性填充了我的数据库（mysql）中表 Lezione 的属性 time 的值。此外，数据库中的属性时间是类型`TIME`。

现在：我对数据库进行查询：

```
 select * from lezione as l 
```

然后我创建了一个 Lezione 类型的对象并设置了所有属性。在我这样做的时候：

```
l.settime(rs2.getTime(3)); 
```

这有效。

当我尝试使用 l.gettime() 打印值时，我得到了值 (fe)`13:00:00`

我想要的是`13:00`

我试过表达

```
l.gettime().getHours()+":"+l.gettime().getMinutes() 
```

（使用*折旧*的方法）但它会打印`13:0`（我猜如果我想打印`09:02`它会打印`9:2`）

那么我能做什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T10:16:03.723

使用简单日期格式化程序。

```
DateFormat formatter = new SimpleDateFormat("H:mm");
formatter.format( time ) ); // 13:00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-09T10:14:35.910

我也会去`DateFormat`。

但是您可以添加前导零

```
String.format("%02d", yournumber); 
```

因此，在您的情况下，它会：

```
l.gettime().getHours()+":"+String.format("%02d", l.gettime().getMinutes()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T10:10:47.617

要格式化日期/时间，您应该使用（简单）日期格式，例如：

```
DateFormat dateFormat = new SimpleDateFormat("HH:mm:ss");
dateFormat.format(new Date()); 
```

这以 24 小时格式 (HH) 以秒打印当前时间。要不打印秒，只需将格式更改为“HH:mm”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-09T10:16:57.517

如果您只对从 打印字符串感兴趣`getTime`，那么您可以这样做：

```
String str = rs2.getTime(3);
str = str.substring(0, str.length() - 3);
System.out.println(str); 
```

虽然，这可能有点丑陋。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-09T10:18:07.953

正如您在答案中看到的那样，有很多方法可以做到这一点。这是显示小时和分钟的另一种方式（以及来自 的其他详细信息`Calendar`）：

```
GregorianCalendar date = new GregorianCalendar();
int  minutes = date.get(Calendar.MINUTE);
int  hours = date.get(Calendar.HOUR_OF_DAY); //HOUR_OF_DAY for the 24-hour clock
System.out.println("The time is: "+ hours+ ":" +minutes); 
```

# jquery - 单击页面上的任意位置时如何隐藏切换 div？

> ID：14786993
> 
> 赞同：1
> 
> 时间：2013-02-09T10:09:00.763
> 
> 标签：jquery, asp.net, visibility

我用 .toggle() 隐藏/显示元素

```
 <div style="position: absolute; top: 0; right: 250px;z-index:7">
   <div  class="Search" style="display: none;" >
    <table width="100%" style="border: 1px solid #fff; border-radius:5px;padding:15px">
      <tr>
      <td>
      <asp:DropDownList ID="CategoryDropDownList" runat="server" />
      </td>
      </tr>
      </table>
   </div>
   <div id="showSreachDiv">
   <a style="cursor: pointer">
    <img src="images/btnSearch.png" /></a>
   </div>
 </div> 
```

用jQuery

```
 $(document).ready(function () {
         $("#showSreachDiv").click(function () { $(".Search").toggle("slow"); });
     }); 
```

当我单击我的 div 时，显示切换 div。

但我想，在单击页面上的任意位置时隐藏切换 div。

我使用此代码

```
 $(function () {

         // body click
         $("body").click(function () {

             // element to toggle
             var $el = $(".Search");

             // toggle div
             if ($el.is(":visible")) {
                 // fade out
                 $el.fadeOut(200);
             } else {
                 // fade in
                 $el.fadeIn(200);
             }

         });
     }); 
```

但是当我单击我的 div 时，它会显示和隐藏togle div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T10:29:20.153

您必须停止事件冒泡到文档`e.stopPropagation()`：

[**结帐小提琴**](http://jsfiddle.net/WxcLV/)

```
$(document).ready(function () {
  $("#showSreachDiv").click(function (e) { //<--------pass here
      e.stopPropagation(); // <--------------stop here
      $(".Search").toggle("slow");
  });
  $(document).click(function () { // you don't need the else part to fadeout
      var $el = $(".Search");
      if ($el.is(":visible")) {
          $el.fadeOut(200);
      }
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:19:22.790

作为修补程序，请检查目标元素是否不是您要隐藏的元素：

```
$("body").click(function (event) {

    // element to toggle
    var $el = $(".Search");

    if( event.target == $el[0])
        return;

    ...

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T10:43:49.843

试试这个。单击“showSr​​eachDiv”后，您需要停止事件传播

```
$(document).ready(function () {
    $('#showSreachDiv').click(function(evt) {
        $(".Search").toggle("slow");
        evt.stopPropagation();
    });

    $(document).click(function(){
        $(".Search").toggle("slow");
    });
}); 
```

# c - 在 C 中，如何从 MacOSX 应用程序包写入文件

> ID：14786994
> 
> 赞同：4
> 
> 时间：2013-02-09T10:09:01.637
> 
> 标签：c, macos, file-io, core-foundation

我想通过将文本转储到文件中来调试我的应用程序中的一些东西，如下所示：

```
FILE *file; 
file = fopen("/tmp/file.txt","a+");
fprintf(file,"%s\n", "silly debug message"); 
fclose(file); 
```

当我将文件作为 ./myapplication 运行时，这有效。但是当我将它捆绑为一个应用程序包（使用[gtk-osx-application](https://live.gnome.org/GTK+/OSX/Integration)和[gtk-mac-bundler](https://github.com/jralls/gtk-mac-bundler)）并运行应用程序包时，不会创建该文件。它静默失败并继续执行。

任何想法为什么？是否正在进行一些沙盒操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T10:18:08.443

是的，您的应用程序包是沙盒化的，因此您无法写入文件系统中的任意位置（如`/tmp`）。要访问特定于您的应用程序的临时目录，请改用[NSTemporaryDirectory](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Miscellaneous/Foundation_Functions/Reference/reference.html#//apple_ref/c/func/NSTemporaryDirectory)；

```
import <NSPathUtilities.h>

NSString* tempPath = NSTemporaryDirectory(); 
```

[在此处](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AppSandboxInDepth/AppSandboxInDepth.html#//apple_ref/doc/uid/TP40011183-CH3-SW15)查看有关文件系统访问的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:22:17.017

当我使用沙盒创建测试应用程序并添加额外的错误检查时：

```
FILE *file = fopen("/tmp/file.txt","a+");
if (file != NULL)
{
    fprintf(file,"%s\n", "silly debug message");
    fclose(file);
}
else
{
    NSLog(@"Failed to create file: %d", errno);
} 
```

我得到：

```
2013-02-09 10:19:43.680 WriteTest[11988:303] Failed to create file: 1 
```

从命令行：

```
$ perror 1 
1       : Operation not permitted 
```

因此，您不得`/tmp`在应用程序沙箱中写入。您需要遵循[App Sandbox Design Guide](http://developer.apple.com/library/mac/#documentation/Security/Conceptual/AppSandboxDesignGuide/AboutAppSandbox/AboutAppSandbox.html)来确定可以在哪里写入文件，可能使用 Core Foundation 和函数，例如`CFCopyHomeDirectoryURL()`获取可以在沙盒环境中写入的文件的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T19:35:04.697

好吧，这不再是一个真正的问题了。问题是，除了我认为我正在 /Application 中测试的应用程序之外，我在根文件夹 / 中还有一个额外的 MyApp.app。使用“open -a MyApp”时，使用的是根文件夹中的旧应用程序版本。

那是我生命中永远不会回来的几个小时。那好吧。感谢您的反馈，人们。我现在对 NSLog()、CFShow()、CFString 和 syslog() 有了更多的了解，尽管如此，这还是非常有帮助的。

# javascript - 不会转换温度

> ID：14786996
> 
> 赞同：1
> 
> 时间：2013-02-09T10:09:11.157
> 
> 标签：javascript

我正在研究一个从摄氏度到华氏度以及从华氏度到摄氏度的简单转换表格。我不知道为什么它没有转换。

HTML

```
<head>
    <script type="text/javascript" src="script.js"></script>
</head>

<body>
    <form name="tempForm">
        <label for="temp">Temperature:</label>
        <input type="text" id="temp"><br>

        <input type="radio" name="choice" value="fahrenheit" checked />Convert to Fahrenheit <br>
        <input type="radio" name="choice" value="celsius">Convert to Celsius  <br>

        <label for="resultField">Result: </label>
        <input type="text" id="resultField"><br>

        <input type="button" value="Convert" onclick="processForm()">
    </form>

</body> 
```

Javascript 函数 processForm() {

```
var temperature = Number(document.tempForm.temp.value);
var tempType;
var result;

for (var i=0; i < document.tempForm.choice.length; i++) {

    if (document.tempForm.choice[i].checked) {
        tempType = document.tempForm.choice[i].value;
    }
}

if (tempType == 'fahrenheit') {
    result = temperature * 9/5 + 32;
}

else {
    result = (temperature -  32)  *  5/9;
}

// Assign the result field value here
result = document.tempForm.resultField.value;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T10:11:43.040

您在最后分配了错误的结果。您必须将分配的目标放在 assingment 的左侧，因此您的结果字段和右侧是您要分配给它的值，如下所示：

```
document.tempForm.resultField.value = result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-09T10:16:55.763

您的转换正在工作，但您`resultField`以错误的方式分配结果。

像这样转换作业（最后一个）

```
document.tempForm.resultField.value  = result; 
```

# layout - primefaces facelets 布局呈现空白页

> ID：14786998
> 
> 赞同：0
> 
> 时间：2013-02-09T10:09:24.833
> 
> 标签：layout, primefaces, facelets

我在使用 PrimeFaces 3.4 和 Facelets 时遇到问题我创建了一个 Facelets 模板，其中包含以下内容：

```
<?xml version='1.0' encoding='UTF-8' ?> 
```

```
<h:head>
    <h:outputStylesheet library="css" name="styles.css"></h:outputStylesheet>
</h:head>

<h:body>
    <p:layout fullPage="true">
        <p:layoutUnit position="north" size="200px" collapsible="true">
            <ui:include src="header.xhtml"></ui:include>
        </p:layoutUnit>
        <p:layoutUnit position="south" size="50px" collapsible="true">
            Sul
        </p:layoutUnit>
        <p:layoutUnit id="contentView" position="center">
            <ui:insert name="content"></ui:insert>
        </p:layoutUnit>        
    </p:layout>
</h:body> 
```

我的 index.xhtml：

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition template="./maintemplate.xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets">
    <ui:define id="contentView" name="content">
        <ui:include src="#{userController.currentPage}"></ui:include>
    </ui:define>
</ui:composition> 
```

因此，userController.currentPage 一开始就包含一个使用 primeFaces 组件的登录页面。当我单击 header.xhtml 中可用的菜单时，我有以下内容：

```
<p:menuitem value="Tickets" actionListener="#{userController.setCurrentPage('tickets.xhtml')}" update=":contentView" ajax="false"></p:menuitem> 
```

单击中心布局后变为空白。我没有看到任何错误或有问题的信息。我可以毫无问题地渲染页面tickets.xhtml。

非常感谢任何帮助。

我正在使用 Netbeans 7.3 RC1 - Apache Tomcat 7.0.34.0 / PrimaFaces 3.4 / JSF 2.1

**编辑：**将 ajax="false" 放在菜单中有效，但它刷新了所有页面。知道如何在不刷新整个页面的情况下完成这项工作，我只想刷新中心页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T12:27:55.130

终于设法做到了。在这里找到以下内容：

[如何通过导航菜单 ajax-refresh 动态包含内容？(JSF SPA)](https://stackoverflow.com/questions/7108668/how-to-ajax-refresh-the-main-content-part-by-navigation-menu)

基于上述答案，我执行了以下操作： 1.将 ajax 标签和菜单放入其中。2\. 这也是我的错误，将 ajax 渲染从 更改`<ui:layoutUnit>`为`<h:form>` 3\. 从子 xhtml 中删除所有 h:form 标签，因为它现在包含在模板文件中。

在此之后，它可以正常工作。