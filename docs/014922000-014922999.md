# StackOverflow 问答 14922000-14922999

# c - 奇怪的行为 snprintf c

> ID：14922004
> 
> 赞同：-3
> 
> 时间：2013-02-17T14:17:55.373
> 
> 标签：c, undefined-behavior

在玩了几个星期 C 之后，我现在讨厌它。

我现在正在尝试使用 execl 将参数传递给另一个程序，并且参数的格式会做一些奇怪的事情：

```
int select[2], result[2];
char str_w,str_r;

snprintf(&str_w, 2, "%d", select[1]);
snprintf(&str_r, 2, "%d", result[0]);
printf("%d %d %s %s\n", select[1], result[0], &str_w, &str_r);

execl("./recive.x","./recive.x",&str_w,&str_r,(char *)NULL); 
```

这里重要的是 snprintf：我正在尝试将向量中的数字转换为字符串。该数字将小于 10。当我执行此操作时，显示的 printf 的结果是：

```
5 6  6 
```

这意味着 select[1] 中有一个数字 (5)，result[0] 中有一个数字 (6)，并且 result[0] 被正确转换为字符串，但 select[1] 没有。

这到底是什么行为！！

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:24:22.440

对 sprintf 的调用必须为打印数据提供一个缓冲区，足以容纳整个输出。您正在传递一个指向单个字符的指针，因此输出显然不适合。

```
char str_w[2];
snprintf(str_w, 2, "%d", select[0]); 
```

将一位数转换为字符串的更好方法如下：

```
char res[2];
res[0]=num+'0';
res[1]=0; 
```

注意第一个零周围的单引号：想法是将零字符的代码添加到一位数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:16:18.553

> 在玩了几个星期 C 之后，我现在讨厌它。

这种反应并不少见。我的 CS 入门课程中有三分之一的人*改变了专业*，理由是 C 语言有困难（这是一种可怕的教学语言）。我花了几年的时间才充分理解它，但一旦我做到了，我就开始欣赏它。

```
char str_w,str_r;

snprintf(&str_w, 2, "%d", select[1]);
snprintf(&str_r, 2, "%d", result[0]); 
```

这是您的主要问题；`str_w`并且`str_r`仅大到足以容纳单个`char`值，而不是字符串（*至少*需要2 个字符）。相反，您需要将`str_w`and声明`str_r`为 的*数组*，`char`足够大以容纳`int`您所期望的最大字符串表示形式，加上符号空间（如果值为负数），再加上 0 终止符。例如，如果您没有限制`select`or的值`result`：

```
#define MAX_DIGITS 20 // max decimal digits for 64-bit integer
#define SIZE MAX_DIGITS+2 // 2 extra for sign and 0 terminator

char str_w[SIZE], str_r[SIZE]; 

sprintf(str_w, "%d", select[1]);
sprintf(str_r, "%d", result[0]); 
```

通过使您的目标数组足够大以容纳任何可能的输入，您不必担心溢出。是的，您会遭受一些内部碎片，并且取决于您的应用程序，这可能是也可能不是问题。但我只是喜欢保持简单。

如果您*知道*您的`select`和`result`数组永远不会保存 0..10 范围之外的值，那么您可以将 SIZE 设置为 3（最多 2 位数字加上 0 终止符）。

> 这意味着 select[1] 中有一个数字 (5)，result[0] 中有一个数字 (6)，并且 result[0] 被正确转换为字符串，但 select[1] 没有。
> 
> 这到底是什么行为！！

由于您将地址传递给不足以容纳结果的缓冲区，因此行为是*undefined*，这意味着编译器没有义务警告您您正在做一些危险的事情。

这是*最有可能*发生的事情（由于行为未定义，*任何*事件序列都是可能的，但我认为这是对结果的合理解释）。首先，假设您的变量在内存中的布局如下：

```
Item        Address        Value
----        -------        -----
str_r       0xffec1230     ??
str_w       0xffec1231     ??
            0xffec1232     ?? 
```

`str_w`并`str_r`分配给连续的字节，它们的初始值是不确定的。在第一个`snprintf`to之后`str_w`，你的记忆现在看起来像这样：

```
Item        Address        Value
----        -------        -----
str_r       0xffec1230     ??
str_w       0xffec1231     '5'
            0xffec1232     0 
```

`snprintf`将尾随的 0 终止符写入缓冲区；在这种情况下，它将终止符写入后面的字节`str_w`。在第二次`sprintf`调用之后，内存现在看起来像这样：

```
Item        Address        Value
----        -------        -----
str_r       0xffec1230     '6'
str_w       0xffec1231     0
            0xffec1232     0 
```

第二次`snprintf`调用将 0 终止符写入后面的字节`str_r`，恰好是`str_w`; 你最终破坏了之前写入它的值。这就是为什么您看到`str_r`字符串但看不到字符串的原因`str_w`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:21:00.077

与`char`您一起定义唯一的一个字节变量。它必须是一个 s 数组`char`。

# perl - PERL：重复行

> ID：14922005
> 
> 赞同：1
> 
> 时间：2013-02-17T14:17:55.260
> 
> 标签：perl

如果在文件中找到重复的行，我正在编写一个打印按摩/发送邮件的 perl 代码。到目前为止我的代码：

```
#!/usr/bin/perl 
use strict;
my %prv_line;
open(FILE, "somefile") || die "$!";
while(<FILE>){
    if($prv_line{$_}){
         $prv_line{$_}++;
     }
    #my problem: print  I saw this line X times
    }
close FILE 
```

我的问题：如何生成带有输出的静态消息：打印“我看到这条线 X 次”而不打印脚本输出 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:30:49.103

可能，这就是你想要的：

```
#!/usr/bin/perl
use strict;
use warnings;

my %lines;

while(<DATA>) {
    chomp;
    $lines{$_}++; 
}

while (my($key, $value) = each %lines) {
    print "I saw the line '$key' $value times\n";
}

__DATA__
abc
def
def
def
abc
blabla

avaddv

bla
abc 
```

当然，它可以改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:25:36.027

您的原始代码非常接近。做得好`use strict`并放入字符串`$!`。`die`您还应该始终`use warnings`使用 的三参数形式`open`，并使用词法文件句柄。

这个程序应该可以帮助你。

```
use strict;
use warnings;

my %prv_line;
open (my $FILE, '<', 'somefile') || die $!;
while (<$FILE>) {
  if ( $prv_line{$_} ) {
    print "I saw this line $prv_line{$_} times\n";
  }
  $prv_line{$_}++;
} 
```

# linux - Xorg下如何输入希腊字母alpha？

> ID：14922007
> 
> 赞同：15
> 
> 时间：2013-02-17T14:18:02.517
> 
> 标签：linux, localization, keyboard, x11, xorg

我想在 Xorg 下输入希腊字母。在系统 xcompose (/usr/share/X11/locale/en_US.UTF-8/Compose) 中有一行：

```
<dead_greek> <a> : "α" U03B1  # GREEK SMALL LETTER ALPHA 
```

如何用美式键盘输入？我的语言环境是`en_US.UTF-8`. 这把钥匙是什么`<dead_greek>`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T15:25:59.697

我只是抬头看，`/usr/share/X11/locale/en_US.UTF-8/Compose`没有`dead_greek`字符。只有`dead_acute`, `dead_iota`, 等与 alpha 结合。此文件中没有纯希腊字母。

如果您使用 gnome，请查看此答案[如何将字符映射到组合键？](https://askubuntu.com/a/2326)在[http://askubuntu.com](http://askubuntu.com)上。在你的[情况下](http://graphemica.com/%CE%B1)，这将是

`Ctrl-Shift-u``03b1``space`

如果您的 xmodmap 输出中没有`dead_greek`键，您可以自己添加一个。搜索您要用于该目的的键，例如右 Windows 键或右超级键。然后你可以用 dead_greek 替换这个键的定义

```
keycode 133 = dead_greek NoSymbol SuperR 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-05T15:05:35.847

你可以把它放在 X 中设置键盘后运行的地方：

```
xmodmap -pke | awk '/keycode[ \t]+65[ =]/ { $5="dead_greek"; print $0; }' | xmodmap - 
```

我的键盘将移位空间映射到 dead_greek。

需要一点时间来适应。

# php - 在 sql 中查找配置文件

> ID：14922009
> 
> 赞同：0
> 
> 时间：2013-02-17T14:18:06.200
> 
> 标签：php, mysql, profile

我正在尝试制作个人资料页面。我只是通过从 url 框中获取配置文件名称并获取有关此用户的信息来进行测试，但我只是获取有关我数据库中所有用户的信息。例如，如果我键入 user1，它会为我提供数据库中所有用户的所有信息。如果我特别想找到这个用户 1 并且只有他的信息，我该怎么做？

```
<?php $fname=$_GET["fname"] ?>
<html>
<head>
<title> <? echo $fname ?> 
</title>
</head>
<body>
<BR><BR>
<h3>
<?php if (false === $registerOrLoginNeeded):?>
<? echo "User - ".$fname." <BR> ";
?>

<?php 
 mysql_connect(DB_HOST, DB_USER, DB_PASS) or die(mysql_error()); 
 mysql_select_db(DB_NAME) or die(mysql_error()); 
 $data = mysql_query("SELECT * FROM users") 
 or die(mysql_error()); 
 while($info = mysql_fetch_array( $data )) 
 {
 echo "Real Name - ".$info['name'] . " <BR>";
 echo "Email - ".$info['email'] . " <br> " ;
 echo "Location - ".$info['location'] . " <br> " ;
 echo "Gender - ".$info['gender'] . " <br> " ;

 } 
 ?>
 <? else: endif ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:20:33.323

假设您的用户名字段`username`只是将您的查询更改为：

```
$data = mysql_query("SELECT * FROM users WHERE `username` = '$fname' LIMIT 1"); 
```

您需要告诉您的数据库您只需要该用户的**一条记录。**这就是我们添加`WHERE`子句的原因。我们的查询变成*SELECT EVERYTHING FROM TABLE USERS WHERE USER'S USERNAME IS EQUAL TO THE PASSED VARIABLE FROM URI*。

如何检查是否找到用户

```
if(mysql_num_rows($data) > 0)
{
//DISPLAY USER INFO
}
else
{
//NO USER FOUND
} 
```

# c++ - 向量上的上限 >

> ID：14922012
> 
> 赞同：5
> 
> 时间：2013-02-17T14:18:27.593
> 
> 标签：c++, stl

我正在尝试`upper_bound`在 a 上使用`vector<pair<int,int>>`，如下所示：

```
vector<pair<int,int>> data;
auto up = upper_bound(data.begin(), data.end(), 0); 
```

VS2012 给我以下错误：

```
error C2784: 'bool std::operator <(const std::vector<_Ty,_Alloc> &,const std::vector<_Ty,_Alloc> &)' : could not deduce template argument for 'const std::vector<_Ty,_Alloc> &' from 'const int' 
```

为什么要尝试将 a`const int`与 a进行比较`pair<int,int>`？

我尝试编写自己的比较函数，但它并没有改变任何东西。如果我这样做，编译器会尝试将 a 转换`pair<int,int>`为 a 。`const int`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T14:22:53.343

您正在将一对与数字进行比较，没有预定义的比较运算符。你可能想把它改成这样：

```
auto up = upper_bound(data.begin(), data.end(), make_pair(0, 0)); 
```

或者，如果您的应用程序中有用于将一对与单个数字进行比较的特定逻辑，您可以提供自己的比较函数：

```
bool cmp(int n, pair<int, int> const& p)
{
    // For instance...
    return ((p.first < n) && (p.second < n));
}

int main()
{
    vector<pair<int,int>> data;
    auto up = upper_bound(data.begin(), data.end(), 0, cmp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:27:25.700

> 为什么要尝试将 const int 与 pair 进行比较？

因为你告诉它。您的比较值是`0`，但您的元素类型是`pair<int,int>`。

啧啧！

也许您正在寻找：

```
auto up = upper_bound(data.begin(), data.end(), make_pair(0, 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:24:08.873

to的第三个参数`std::upper_bound`是返回的迭代器指向的元素应该大于的值。你将如何确定一个`std::pair<int,int>`是否大于`0`或不？

你通过的几乎可以肯定是`std::pair<int,int>`：

```
auto up = upper_bound(data.begin(), data.end(), std::make_pair(first, second)); 
```

但是，`first`取决于`second`您要解决的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:31:57.477

如果您正在搜索不兼容的类型，则需要特别注意比较功能。引用[cppreference.com](http://en.cppreference.com/w/cpp/algorithm/upper_bound)：

> 比较函数的签名应该等同于以下内容：
> 
> ```
> bool cmp(const Type1 &a, const Type2 &b); 
> ```
> 
> […] 类型`Type1`必须是类型对象`T`可以隐式转换为`Type1`. 类型`Type2`必须是`ForwardIt`可以取消引用类型的对象，然后隐式转换为`Type2`。​</p>

– 在您的情况下，`Type1`=`int`和`Type2`= `std::pair<int, int>`。这应该够了吧。

# java - 对于该算法，Python 与 Java 相比非常慢

> ID：14922014
> 
> 赞同：7
> 
> 时间：2013-02-17T14:18:38.927
> 
> 标签：java, python, performance

我正在研究算法并决定将 Java 程序从教科书移植到 Python，因为我不喜欢 Java 开销，特别是对于小程序，并且作为练习。

该算法本身非常简单，它只是以某种蛮力的方式从数组中取出所有三元组，并计算有多少三元组总和为零（例如：[-2,7,-5]）

```
 public static int count(int[] a) {
        int N = a.length;
        int cnt = 0;
        for (int i = 0; i < N; i++) {
            for (int j = i+1; j < N; j++) {
                for (int k = j+1; k < N; k++) {
                    if (a[i] + a[j] + a[k] == 0) {
                        cnt++;
                    }
                }
            }
        }
        return cnt;
    } 
```

我将其移植到：

```
def count(a):
    cnt = 0
    ln = len(a)
    for i in xrange(0,ln): 
        for j in xrange(i + 1,ln):
            for k in xrange(j + 1,ln): 
                if a[i] + a[j] + a[k] == 0:
                    cnt+=1
    return cnt 
```

现在测量这些功能正在采取：

```
java :   array of 2000 elements --> 3 seconds 
python : array of 2000 elements --> 2 minutes, 19 seconds

UPDATE 
python (pypy) : array of 2000 elements --> 4 seconds ( :-) ) 
```

当然，这不是一个好的算法，它只是在这里和教科书中展示。我以前用 Java 和 Python 都做过一些编程，但没有意识到这种巨大的差异。

问题归结为：如何克服这个问题？进一步来说 ：

1.  这段代码是一个好的端口，还是我错过了一些微不足道的东西？
2.  例如，切换到另一个运行时 Jython 是一种解决方案吗？将我的代码库保存在 Eclipse 中并添加解释器（编译器？）是否容易？或者切换到另一个解释器/编译器只会让事情变得更好？

现在我在 Windows 7 上使用 python 2.7.3 和 Java 1.7 32ibts。

我知道关于 java/python 性能的 SO 上存在类似的问题，但是目前诸如 python 有不同的运行时环境之类的答案对我没有帮助。

我想知道的是，其中一些运行时是否可以缩小这个巨大的差距并且值得探索？

更新 ：

我安装了pypy，现在差异很大......

更新 2：

我注意到一些非常有趣的事情：答案中的 islice 方法在“常规”python 上更快，但在 pypy 上慢得多。即便如此，无论在这个算法中使用常规循环还是 islice，pypy 仍然使用起来快得多

正如 Bakuriu 在备注中指出的那样，运行时环境可能很重要，但是对于这个算法来说更快的运行时环境并不一定对任何算法都更快......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T14:24:03.920

尝试使用 PyPy 而不是 CPython 运行它。它很可能会更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T16:00:39.953

我也在 C 和 PHP 中实现了这个函数。结果如下：

**PHP**：23.977946043015 秒
**Python**：19.31 秒

**C** : 0.4 秒
**Java** : 0.42 秒

我们正在研究具有不同类型系统的语言。PHP 和 Python 是动态类型的，而 C 和 Java 是静态类型的。

因此，PHP 和 Python 解释器会花费大量时间来猜测所使用变量的类型，因此运行速度非常慢。而在 C 和 Java 中，变量的类型（和数组的元素）是静态的，即整数，因此节省了猜测时间。显然，从上面的数字可以看出，这个猜测时间太长了。

使用 PyPY，猜测时间大大减少，因为 PyPY 使用即时（JIT）编译。这种方法非常擅长猜测使用的变量的类型，因此您会获得性能提升。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T15:09:52.500

正如您在开始帖子的评论中已经说过的那样，没有什么好方法可以使这个速度更快（除了 PyPy）。你可以试试 islice，它会迭代“a”而不是创建新的列表或范围，这应该会快一点。

```
from itertools import islice

def count(a):
    cnt = 0
    for x, i in enumerate(islice(a,0, None)): 
        for y, j in enumerate(islice(a, x + 1, None)):
            for k in islice(a, y + x + 2, None):
                if i + j + k == 0:
                   cnt+=1
    return cnt 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-04T20:05:00.667

对于 Python 在标准库中使用 itertools 组合，它会将 for 循环移动到 C。

# mysql - 从表中选择所有重复项

> ID：14922016
> 
> 赞同：0
> 
> 时间：2013-02-17T14:18:43.030
> 
> 标签：mysql, sql, select

我有一个包含这样列的表：

```
serial_id   season  ep_id
1           1       1   < duplicate
1           1       2
3           1       1
...
1           1       1   < duplicate 
```

我想选择在 serial_id、season 和 ep_id 中具有重复值的所有行，我应该使用什么查询？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:20:18.867

**“..serial_id、season 和 ep_id 中的重复值。”**

```
SELECT  serial_id, ep_id, season
FROM    tableName
GROUP   BY serial_id, ep_id, season
HAVING  COUNT(*) > 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e20a5/5)

但是如果您想获取行内的所有列（*假设您有除 serial_id、ep_id、season 之外的其他列*）

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  serial_id, ep_id, season
            FROM    tableName
            GROUP   BY serial_id, ep_id, season
            HAVING  COUNT(*) > 1
        ) b ON  a.serial_id = b.serial_id AND
                a.ep_id = b.ep_id AND
                a.season = b.season 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e20a5/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T14:20:34.017

像这样的东西：

```
select serial_id, season, ep_id, count(*) records
from yourtable
group by serial_id, season, ep_id
having count(*) > 1 
```

# signalr - SignalR 的 WebTest 可能吗？

> ID：14922017
> 
> 赞同：6
> 
> 时间：2013-02-17T14:18:47.513
> 
> 标签：signalr, webtest

如果我发送一个请求，并且我希望通过 SignalR 得到响应，是否可以在 Visual Studio 中使用 LoadTest 或 PerformanceTest 进行测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-25T16:44:28.470

简短的回答：是的

我已经在 CodedWebTests 中完成了几次，但也可以在声明性 WebTest 中完成。您可以使用自定义 PreWebTest 事件处理程序来创建您的 signalR 客户端并连接到您的 SignalR 集线器。您选择对 signalR 通知做什么取决于您，但我喜欢将其保存到 WebTestContext 并使用 AddCommentToResult 方法将其显示在测试结果屏幕上。

下面的方法创建一个 hubConnection 调用集线器上的“addToGroup”函数，然后告诉客户端在收到消息时要做什么。

```
using Microsoft.AspNet.SignalR.Client;

public class SignalRPlugin : WebtTestPlugin
{
    public override void PreWebTest(object sender, PreWebTestEventArgs e)
    {
        var hubConnection = new HubConnection("yourSignalRUrl");
        var hubProxy = hubConnection.CreateHubProxy("notifications");

        hubConnection.Start().Wait();
        hubProxy.Invoke("addToGroup", "me");

        hubProxy.On<string>("message", s =>
        {
            e.Webtest.AddCommentToResult(s);
            e.Webtest.Context.Add("signalRMessages", s);
        });
    }
} 
```

通过在测试构造函数中附加事件处理程序来使用它。

```
public MyWebTest()
{
    PreWebTest += new SignalRPlugin().PreWebTest;
} 
```

然后，一旦您有了 signalR 消息，您就可以使用自定义验证规则来验证是否收到了响应。只需有一个 while 循环检查“signalRMessages”键的 WebTestContext。我强烈建议确保添加超时功能，这样如果消息永远不会进来，你就不会永远等待。

如果您正在编写 CodedWebTests，另一个选项是创建一个 WaitForNotifications 方法，该方法基本上与验证规则执行相同的操作。这样做的好处是您可以使用提取规则从最后一个响应中获取数据，然后使用该数据验证您的 signalR 消息。如果您仍然需要在 WaitForNotification 方法中使测试失败，请使用 WebTest.InternalSetOutcome(Outcome.Fail);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:11:26.013

加载测试 SignalR 应用程序的最佳方法是在源中包含的[曲柄项目上进行构建。](https://github.com/SignalR/SignalR/tree/master/src/Microsoft.AspNet.SignalR.Crank)

这是一个使用 .Net 客户端构建的简单加速解决方案，但相对容易修改以调用所需的任何集线器方法并分析响应。

如果需要，您始终可以将 Visual Studio 分析器附加到您的 iis express 实例以获取详细的分析数据。

# asp.net-mvc - 在asp.net mvc中将持久cookie到期设置为会话？

> ID：14922020
> 
> 赞同：6
> 
> 时间：2013-02-17T14:19:02.507
> 
> 标签：asp.net-mvc, cookies, forms-authentication, httpcookie

我正在使用 ASP.NET MVC，并且希望能够在某人返回该站点时自动登录（以与该站点完全相同的方式）。

当用户首次注册或登录时，我将 cookie 设置如下：

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
    1,
    "playerid",
    DateTime.Now, 
    DateTime.Now.AddMinutes(1), //This will be set to a longer period in live...
    true, 
    Username + "|" + item.PlayerID.ToString(), 
    FormsAuthentication.FormsCookiePath);

string encTicket = FormsAuthentication.Encrypt(ticket);
Response.Cookies.Add(new HttpCookie(FormsAuthentication.FormsCookieName, encTicket)); 
```

如果我通过以用户身份登录来对此进行测试，然后查看其中的`Cookies`选项卡，`Firebug`则过期设置为`Session`. 如果我关闭浏览器然后返回我的站点，我将不再登录。这是我所期望的，因为当浏览器关闭时会话结束（但这不是我想要发生的事情！）。

但是，如果我登录并浏览该站点，那么一分钟后过期不再显示为实际日期戳，`Session`而是显示为实际日期戳。如果我然后关闭浏览器并返回我的网站，我将自动登录。

总而言之，似乎我的到期时间设置为`Session`直到我规定的实际到期日期通过（在这种情况下为 t + 1 分钟）并且我一直活跃在网站上（我使用的是滑动到期）。

有什么想法可以将我的过期设置为我在 FormsAuthentication 票证中声明的内容（而不是显示为`Session`）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T14:28:50.973

您应该通过设置属性来创建一个[`persistent cookie`](http://en.wikipedia.org/wiki/HTTP_cookie#Persistent_cookie)存储在客户端硬盘上的：[`Expires`](http://msdn.microsoft.com/en-us/library/system.web.httpcookie.expires.aspx)

```
var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encTicket)
{
    // setting the Expires property to the same value in the future
    // as the forms authentication ticket validity
    Expires = ticket.Expiration
};
Response.Cookies.Add(cookie); 
```

确保您为 cookie 和表单身份验证票证指定了相同的过期超时。现在，当您查看 FireBug 时，您会看到发出 cookie 时会`Expires`在将来设置该属性，这将使 cookie 持久化并在浏览器重新启动时继续存在：

```
Set-Cookie: ASPXAUTH=...; Expires=Tue, 15-Jan-2014 21:47:38 GMT; Path=/; HttpOnly 
```

# c - 需要弄清楚以下内联汇编代码的含义

> ID：14922022
> 
> 赞同：1
> 
> 时间：2013-02-17T14:19:09.550
> 
> 标签：c, assembly, x86, inline-assembly

```
static int func_name (const uint8_t * address)
{
    int result;
    asm ("movl $1f, %0; movzbl %1, %0; 1:"
   : "=&a" (result) : "m" (*address));

    return result;
} 
```

我已经通过互联网浏览了内联汇编参考。但我无法弄清楚这段代码在做什么，例如。什么是 $1f ？“m”是什么意思？使用 "=r" 和 "r" 的正常内联约定不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T14:40:54.203

`$1f`是`1`标签的地址。`f`指定查找以`1`正向命名的第一个标签。`"m"`是内存中的输入操作数。`"=&a"`是使用`eax`寄存器的输出操作数。`a`指定要使用的寄存器，`=`使其成为输出操作数，并`&`保证其他操作数不会共享同一个寄存器。

在这里，`%0`将被第一个操作数（`eax`寄存器）和`%1`第二个操作数（指向的地址）替换`address`。

所有这些以及更多内容都在关于[Inline assembly](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)和[asm 约束](http://gcc.gnu.org/onlinedocs/gcc/Constraints.html#Constraints)的 GCC 文档中进行了解释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T10:29:01.083

该代码在功能上与`return *address`此 wrt 相同，但并不绝对等效。到生成的二进制/目标文件。

在 ELF 中，使用*前向引用*（即`mov $1f, ...`检索程序集本地标签的地址）会导致创建所谓的*重定位*。*重定位是对链接器*的指令（在可执行文件创建时或稍后在可执行文件/库加载时向动态链接器）*插入*仅在链接/加载时才知道的值。在目标代码中，这看起来像：

```
部分.text的反汇编：

0000000000000000 :
   0: b8 00 00 00 00 移动 $0x0,%eax
   5: 0f b6 07 movzbl (%rdi),%eax
   8：c3 retq

```

请注意，此处的值（在该部分的偏移量 1 处`.text`）为零，即使这实际上不正确 - 这取决于函数在运行代码中的最终位置。只有（动态）链接器才能最终知道这一点，而这块内存在加载时需要更新的信息实际上是放在目标文件中的：

```
$ readelf -a xqf.o
精灵头：
[ ... ]
部分标题：
  [Nr] 名称类型地址偏移量
       大小 EntSize 标志链接信息对齐
  [0]空0000000000000000 00000000
       0000000000000000 0000000000000000 0 0 0
  [1] .text PROGBITS 0000000000000000 00000040
       0000000000000009 0000000000000000 AX 0 0 16
  [2] .rela.text RELA 0000000000000000 000004e0
       0000000000000018 0000000000000018 10 1 8
[ ... ]
偏移 0x4e0 处的重定位节“.rela.text”包含 1 个条目：
  偏移信息类型 Sym。价值符号。姓名+加号
000000000001 00020000000a R_X86_64_32 0000000000000000 .text + 8
[ ... ]

```

这个 ELF 部分条目说：

*   查看`1`该`.text`部分的偏移量
*   有一个 32 位的值将被符号扩展为 64 位 ( `R_X86_64_32`)
*   您（作为链接器）需要放置的值是`.text + 8`（必须在链接/加载时计算）

此条目是根据`mov $1f, %0`说明创建的。如果你把它排除在外（或只是写`return *address`），它就不会在那里。

我通过删除`static`限定符来强制生成上述代码；如果不这样做，一个简单的编译实际上根本不会创建*任何代码*（`static`如果不使用，代码会被删除，并且很多时候，如果使用，则内联）。

如上所述，由于函数是`static`，因此编译器通常会在调用站点内联它。因此，使用它的信息通常会丢失，调试器检测它的能力也会丢失。但是这里展示的技巧可以（间接地）恢复这一点，因为每次使用该函数都会创建*一个重定位条目。*除此之外，像这样的方法可用于在二进制文件中建立*检测点；*在可通过目标文件格式恢复的位置插入众所周知/严格定义但在功能上无意义的小汇编语句，然后让调试器/跟踪实用程序在需要时用“更有用”的东西替换它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T14:51:09.340

这段代码（除了由于两个拼写错误而无法编译）几乎没有用处。

这就是它变成的（使用`-S`开关）：

```
_func_name:
        movl 4(%esp), %edx ; edx = the "address" parameter
        movl $1f, %eax ; eax = the address of the "1" label
        movzbl (%edx), %eax; eax = byte from address in edx, IOW, "*address"
     1:
        ret 
```

所以整个函数体可以替换为

```
return *address; 
```

# python - 将字符列表转换为数字列表

> ID：14922024
> 
> 赞同：-5
> 
> 时间：2013-02-17T14:19:23.683
> 
> 标签：python, list

如何将此列表转换`['c','c','c','c','c','h','h','h','h','h','e','e','e','e','e']` 为此`[0,0,0,0,0,1,1,1,1,1,2,2,2,2,2]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:27:38.503

有点不清楚，这是你想要的吗？

```
In [2]: conv={'c':0,'h':1,'e':2}

In [3]: a=['c','c','c','c','c','h','h','h','h','h','e','e','e','e','e']

In [4]: [conv[i] for i in a]
Out[4]: [0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T14:40:42.537

你也可以使用 string.maketrans 和 string.translate 来做类似的事情：

```
>>> import string
>>> t = string.maketrans("che", "012")
>>> test_str = "ccccchhhhheeeee"
>>> string.translate(test_str, t)
'000001111122222' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:22:19.523

问题非常不清楚。假设您想对原始文件进行一些操作以获得输出，那么最好是 map。你可以传入任何你想要的函数，它会根据你的喜好以某种方式转换它

```
>>> a = ["a", "b", "c"]
>>> converted = map(lambda x: ord(x), a)
>>> print converted
[97, 98, 99] 
```

基本思想是您将一个函数传递给映射，该函数将作用于原始列表中的每个元素并进行转换。例如，要获取每个字母的字母值，我们可以将 lambda 函数写为`lambda x : ord(char.lower()) - 96`

例如：

```
>>> a = ["a", "b", "c"]  
>>> converted = map(lambda x : ord(x.lower()) - 96 , a)
>>> print converted
[1, 2, 3] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:30:02.513

您的问题非常未明确，但如果我的疯狂猜测碰巧降落，那么可能是这样的：

```
>>> s = ['c','c','c','c','c','h','h','h','h','h','e','e','e','e','e']
>>> from itertools import groupby, chain
>>> counted = enumerate(len(list(g)) for k,g in groupby(s))
>>> list(chain.from_iterable([i]*c for i,c in counted))
[0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2] 
```

会给你你想要的吗？这用于`groupby`收集相邻的连续术语：

```
>>> [(k, list(g)) for k,g in groupby(s)]
[('c', ['c', 'c', 'c', 'c', 'c']), ('h', ['h', 'h', 'h', 'h', 'h']), ('e', ['e', 'e', 'e', 'e', 'e'])]
>>> [len(list(g)) for k,g in groupby(s)]
[5, 5, 5] 
```

并`enumerate`计算它们：

```
>>> list(enumerate(len(list(g)) for k,g in groupby(s)))
[(0, 5), (1, 5), (2, 5)] 
```

最后`chain`以扁平形式重新组合它们：

```
>>> [[i]*c for i, c in enumerate(len(list(g)) for k,g in groupby(s))]
[[0, 0, 0, 0, 0], [1, 1, 1, 1, 1], [2, 2, 2, 2, 2]]
>>> list(chain.from_iterable([[i]*c for i, c in enumerate(len(list(g)) for k,g in groupby(s))]))
[0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2] 
```

# java - 启动时反向地理编码 getPostalCode

> ID：14922025
> 
> 赞同：0
> 
> 时间：2013-02-17T14:19:28.920
> 
> 标签：java, android

我是一位经验丰富的 AS3 开发人员，我已经为我的后端使用 Java 做了很多事情，但我是 Native Android 开发的新手，所以我在第一个项目的一些基本任务方面遇到了麻烦。

所以希望你们中的一个裂缝可以在这里帮助我或指出我正确的方向，这将不胜感激，我会报答在 AS3 部分提供帮助。简要介绍一下我，因为这是我的第一篇文章。;)

手头的任务是在应用程序启动时获取用户的邮政编码。我一直在使用 AsyncTask 进行反向地理编码，它通常似乎可以工作。但只有当我在单击按钮时调用 ReverseGeocodingTask 并在我这样做之前给它几秒钟。如果我立即按下它，它有时会起作用，有时不会，所以很明显，当我在 onCreate 方法中调用它时，应用程序也会崩溃。当我在手机上关闭互联网时，它也会崩溃。我认为网络提供商的位置应该足够了，不需要 GPS 精度和额外的权限。

如果用户关闭了 INet，它应该只显示一条消息，指出找不到邮政编码，并让用户可以选择手动输入。

我认为尚未找到要传递给地理编码的 currentLocation 并且正在抛出 NullPointerException，因此我试图通过在调用之前对其进行检查来防止这种情况发生。但这并没有真正的帮助，也不是最终版本的解决方案。

由于总是最好显示代码，所以你们知道发生了什么，这里是：

```
package com.adix.DroidTest;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.location.*;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

import java.io.IOException;
import java.util.List;
import java.util.Locale;
import java.util.concurrent.atomic.AtomicReference;

import static java.util.Locale.getDefault;

public class MyActivity extends Activity implements View.OnClickListener {

    Button getPostCode, confirm;
    TextView tvPostcode;
    LocationManager locationManager;
    Location currentLocation;
    double currentLatitude;
    double currentLongitude;
    private Handler mHandler;
    private static final int UPDATE_ADDRESS = 1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        init();

        locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

        AtomicReference<LocationListener> locationListener = new AtomicReference<LocationListener>(new LocationListener() {
            public void onLocationChanged(Location location) {
                updateLocation(location);
            }

            private void updateLocation(Location location) {
                currentLocation = location;
                currentLatitude = currentLocation.getLatitude();
                currentLongitude = currentLocation.getLongitude();
            }

            public void onStatusChanged(
                    String provider, int status, Bundle extras) {
            }

            public void onProviderEnabled(String provider) {
            }

            public void onProviderDisabled(String provider) {
            }
        });
       locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener.get());
        //getAddress();

        mHandler = new Handler() {
            public void handleMessage(Message msg) {
                switch (msg.what) {
                    case UPDATE_ADDRESS:
                        tvPostcode.setText((String) msg.obj);
                        break;
                }
            }
        };
    }

    private void init() {
        getPostCode = (Button)findViewById(R.id.bGetPostCode);
        confirm = (Button)findViewById(R.id.bConfirm);
        tvPostcode = (TextView)findViewById(R.id.tvPostcode);

        getPostCode.setOnClickListener(this);
        confirm.setOnClickListener(this);
    }

    @Override
    public void onClick(View view) {

        switch (view.getId()){
            case R.id.bGetPostCode:

                currentLocation = locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                if(currentLocation != null) {
                    Log.d("TRACE",currentLocation.toString());
                    Toast.makeText(this, "Suche Postleitzahl", Toast.LENGTH_LONG).show();
                    (new ReverseGeocodingTask(this)).execute(new Location[]{currentLocation});
                }

                break;
            case R.id.bConfirm:
                Intent i = new Intent(MyActivity.this, MainMenu.class);
                startActivity(i);
                finish();

        }

    }

    private class ReverseGeocodingTask extends AsyncTask<Location, Void, Void> {

        Context mContext;

        public ReverseGeocodingTask(Context context) {
            super();
            mContext = context;
        }
        @Override
        protected Void doInBackground(Location... locations) {

            try{

                Geocoder gcd = new Geocoder(mContext, Locale.getDefault());
                List<Address> addresses = gcd.getFromLocation(currentLatitude, currentLongitude,100);
                Address address =  addresses.get(0);
                StringBuilder result = new StringBuilder();
                result.append(address.getPostalCode());
               // tvPostcode.setText(result.toString());
                Message.obtain(mHandler, UPDATE_ADDRESS, result.toString()).sendToTarget();
            }
            catch(IOException ex){
                tvPostcode.setText(ex.getMessage().toString());
                Message.obtain(mHandler, UPDATE_ADDRESS, ex.getMessage().toString()).sendToTarget();
            }
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T17:31:44.337

自从这篇文章以来，我休息了一下，看看是否有人看到我的错误。由于我没有得到答案，我今天再试一次。幸运的是，最后很快找到了答案。显然我需要在updateLocation之后在onLocationChanged方法中执行ReverseGeocodingTask。

# iphone - 如何检查用户是否在IOS6中安装了谷歌地图？

> ID：14922028
> 
> 赞同：4
> 
> 时间：2013-02-17T14:19:49.927
> 
> 标签：iphone, google-maps, ios6, ios6-maps

我努力寻找，但无济于事。在我的应用程序中，它也在 IOS6 设备上运行，我有一个需要谷歌地图的 MAP 模块。现在在 IOS6 中可以有具有 iOS6 地图而不是谷歌地图的设备。所以我的程序必须检查设备是否有谷歌地图，应用程序。如果没有，它会将用户链接到 appStore 以下载 GoogleMaps 应用程序。请指导..某人.. :(谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T14:32:31.783

“您可以使用 comgooglemaps URL 方案来启动 iPhone 版 Google Maps 应用程序并执行搜索、方向请求和显示地图视图。当您启动 Google Maps 时，您的捆绑标识符会作为请求的一部分自动发送。”

“在您向应用程序中的用户提供这些 URL 之一之前，您应该首先验证应用程序是否已安装。您的应用程序可以使用以下代码检查 URL 方案是否可用：

> [[UIApplication sharedApplication] canOpenURL: [NSURL URLWithString:@"comgooglemaps://"]];

"

[https://developers.google.com/maps/documentation/ios/urlscheme](https://developers.google.com/maps/documentation/ios/urlscheme)

# php - www-data 的 SOCK_RAW 权限

> ID：14922033
> 
> 赞同：1
> 
> 时间：2013-02-17T14:20:17.887
> 
> 标签：php, ubuntu, permissions, raw-sockets

有人知道如何为 www-data 用户授予 SOCK_RAW 权限吗？

因为这是来自 php 端的 ICMP 请求所必需的！因为没有这些权限，此代码`$socket = socket_create(AF_INET, SOCK_RAW, 1);`将无法工作！

谢谢你 。

# php - 请求侦听器中捕获的 RuntimeException -> Twig 错误模板

> ID：14922039
> 
> 赞同：0
> 
> 时间：2013-02-17T14:20:37.683
> 
> 标签：php, symfony, twig

我有一个绑定到一个事件的内核监听器，在某些情况下`kernel.request`它可以抛出一个 PHP 。`\RuntimeException`而在开发环境中，Symfony 捕获异常并向我显示“致命错误”的 Twig 错误页面，而在生产环境中，我只是不断得到一个空页面。这是一个`200 OK`HTTP 响应，但它没有内容。

我想要实现的是显示一个定制的错误页面 - 即“错误的应用程序配置”，这实际上对最终用户试图访问该页面有任何用处。这是一个致命的错误，但是——好吧——它最终会发生。

我尝试在我的异常侦听器中捕获它，该侦听器在`kernel.exception`事件中执行，但它似乎没有捕获“致命错误”异常。

**这是我到目前为止尝试过的**

*   kernel.exception 事件监听器
*   抛出一个“正常” `\Exception`（认为可能是这样）。似乎从侦听器中抛出的异常也不会触发 kernel.exception 事件......

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:35:13.730

好的，我似乎找到了答案。

问题是服务定义的顺序。当您标记服务以将其方法之一绑定到`kernel.exception`事件时，它需要 - 当然 - 在您的服务配置中声明，然后在任何其他侦听器中引发异常。或者任何其他地方，事实上。

# javascript - 如何在不丢失查询参数的情况下查找和编辑元素的 href 值？

> ID：14922047
> 
> 赞同：2
> 
> 时间：2013-02-17T14:21:02.307
> 
> 标签：javascript, jquery, html

如何`<a>`在页面中找到包含 href attr 的任何元素`/dailyTickets/front/user.form.php`，然后将其更改为`/dailyTickets/front/contacts.form.php`?

请注意，我希望将 URL 查询参数 (id) 保留在路径 (user.form.php) 之后。例如，改变这个：

```
<a id="User_648_648" href="/dailyTickets/front/user.form.php?id=648">ConseillerUser</a> 
```

对此：

```
<a id="User_648_648"href="/dailyTickets/front/contacts.form.php?id=648">ConseillerUser</a> 
```

我从这个开始，但我不知道如何结束它：

```
$('a[href*="dailyTickets/front/user.form.php"]').each(function () { 
    if ($(this).children().length == 0) { 
        ...........
    } 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:25:23.783

不需要循环，jQuery 会自动为您执行此操作，只需直接使用选择器即可更改所有匹配的元素：

```
$('a[href*="dailyTickets/front/user.form.php"]').attr('href', function(i,href) {
    return href.replace('user.form.php', 'contacts.form.php');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T14:26:24.953

这将解决问题并保留所有 GET 参数：

```
$('a[href*="dailyTickets/front/user.form.php"]').attr('href', function() { 
    var search  = '/dailyTickets/front/user.form.php',     // 'user.form.php'
        replace = '/dailyTickets/front/contacts.form.php'; // 'contacts.form.php'
    return this.href.replace(search, replace);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T14:29:47.697

您可以使用[`pathname`Anchor 的属性](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement)来不更改主机、查询或哈希。

```
$('a[href*="dailyTickets/front/user.form.php"]').each(function() {
    this.pathname = "dailyTickets/front/contacts.form.php"; // don't assign to href
});
// or just
$('a[href*="dailyTickets/front/user.form.php"]').prop("pathname", "dailyTickets/front/contacts.form.php"); 
```

# iphone - 如何更改 UIActionsheet 按钮颜色？

> ID：14922048
> 
> 赞同：0
> 
> 时间：2013-02-17T14:21:07.797
> 
> 标签：iphone, xcode, uibutton, uiactionsheet, uicolor

我想更改 UIActionSheet 按钮的背景颜色。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:26:37.070

`UIActionSheet`除了添加一个创建红色选项的破坏性按钮之外，没有其他方法可以更改按钮颜色。如果您真的想要自定义按钮颜色，请尝试`UIActionSheet`像这样进行自定义：[custom-uiactionsheet-using-core-animation](http://blog.corywiles.com/custom-uiactionsheet-using-core-animation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T08:48:48.983

我有同样的问题，只点击了一个基本的解决方案。

核心动画方法更好，但可能更简单

[https://github.com/Daij-Djan/DDUtils/tree/master/ui/M42ActionSheet%20%5Bios%5D](https://github.com/Daij-Djan/DDUtils/tree/master/ui/M42ActionSheet%20%5Bios%5D)

免责声明：我的；）也不是自 2010 年以来最酷的代码，但它应该可以正常工作

# domain-driven-design - CQRS/ES - 改变两个聚合

> ID：14922051
> 
> 赞同：0
> 
> 时间：2013-02-17T14:21:24.217
> 
> 标签：domain-driven-design, cqrs, event-sourcing

我的 DDD 有问题。我刚开始使用它，所以我没有很多经验。有两个有界上下文：维护和客户端。每个客户都有一个引擎部件的列表。维修中存储了从事维修工作的公司。客户可以为每个部分选择首选公司。
管理员可以暂停公司。两个聚合有变化。首先，它会改变公司状态，并且应该从喜欢它的客户中删除下一家公司。处理它的最佳模式是什么？我可以在聚合中创建两个处理程序，但是当其中一个处理程序抛出异常时，我如何回滚更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:01:26.787

看起来您需要修改聚合中的一致性边界。

但是如果在修改之后您仍然需要在一个事务中更改两个聚合，您可以考虑最终一致的系统并使用域事件（但是在 CQRS 中您已经这样做了，不是吗？）。

Vaughn Vernon 在他的“实施领域驱动设计”一书中提出了下一种实现最终一致性的方法：聚合发布领域事件，该事件被交付给一个或多个订阅者。每个订阅者都在其自己的事务中执行（因此您仍然在事务中更改一个聚合）。如果事务失败（订阅者在超时时间内未确认成功）再次聚合发送消息或执行一些回滚例程。

由于您使用的是事件溯源，您可以将“失败”事件标记为已拒绝并使用[Fowler 的追溯事件机制](http://martinfowler.com/eaaDev/RetroactiveEvent.html "Martin 的 Fowler 追溯事件模式")。

# c# - 从数据库中读取大量数据的最快方法

> ID：14922058
> 
> 赞同：0
> 
> 时间：2013-02-17T14:22:22.907
> 
> 标签：c#, ado.net

我有一个包含大约 5 亿条记录的表。我正在从表中读取数据并将其存储在字典中。

编辑：我正在将数据加载到字典中，因为这些数据需要与来自索引服务器的另一量数据进行比较。

我的代码如下：

```
public static void GetDetailsFromDB()
{
    string sqlStr = "SELECT ID, Name ,Age, email ,DOB ,Address ,Affiliation ,Interest ,Homepage FROM Author WITH (NOLOCK) ORDER BY ID";
    SqlCommand cmd = new SqlCommand(sqlStr, _con);
    cmd.CommandTimeout = 0;

    using (SqlDataReader reader = cmd.ExecuteReader())
    {
        while (reader.Read())
        {
            //Author Class
            Author author = new Author();

            author.id = Convert.ToInt32(reader["ID"].ToString());
            author.Name = reader["Name"].ToString().Trim();
            author.age = Convert.ToInt32(reader["Age"].ToString());
            author.email = reader["email"].ToString().Trim();
            author.DOB = reader["DOB"].ToString().Trim();
            author.Address = reader["Address"].ToString().Trim();
            author.Affiliation = reader["Affiliation"].ToString().Trim();
            author.Homepage = reader["Homepage"].ToString().Trim();

            string interests = reader["Interest"].ToString().Trim();
            author.interest = interests.Split(new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries).Select(p => p.Trim()).ToList();

            if (!AuthorDict.ContainsKey(author.id))
            {
                AuthorDict.Add(author.id, author);
            }

            if (AuthorDict.Count % 1000000 == 0)
            {
                Console.WriteLine("{0}M author loaded.", AuthorDict.Count / 1000000);
            }
        }
    }
} 
```

这个过程需要很长时间才能从数据库中读取和存储所有 5 亿条记录。此外，RAM 使用率非常高。

这可以优化吗？另外，可以减少运行时间吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:21:57.663

如果我捏住鼻子，我可以提出以下优化：

1.  将字段的顺序位置存储在局部变量中，并`reader`使用这些顺序变量引用字段。

2.  不要调用`ToString`读者并转换 - 只需以正确的类型获取值。

3.  获得 id 后立即检查作者 id 是否存在`AuthorDict`。`Author`如果不需要，甚至不要创建实例。

    ```
    using (SqlDataReader reader = cmd.ExecuteReader())
    {
        var idOrdinal = reader.GetOrdinal("ID");
        //extract other ordinal positions and store here

        while (reader.Read())
        {
            var id = reader.GetInt32(idOrdinal);

            if (!AuthorDict.ContainsKey(id))
            {
                Author author = new Author();
                author.id = reader.GetInt32(idOrdinal);
                ...
            }
        }
    } 
    ```

# c++ - 字符串结束字符会破坏内存吗？缓冲区[大小]='\0';

> ID：14922060
> 
> 赞同：0
> 
> 时间：2013-02-17T14:22:35.833
> 
> 标签：c++

```
char * buffer = new char[SIZE];
memcpy(buffer , somedata , SIZE);

buffer[SIZE]='\0'; 
```

最后一行是否会破坏内存？ `buffer`是 SIZE 长度，我们将一些数据放在这个范围之外。谁能为我解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:23:18.147

是的，这是未定义的行为。你的写作超出了法律范围。

数组在 C++ 中是从 0 开始的，这意味着索引 0 到 SIZE-1 是有效的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T14:32:05.700

> 最后一行是否会破坏内存？

是的。

> 缓冲区是 SIZE 长度，我们将一些数据放在这个范围之外。

正确的。

> 谁能为我解释一下吗？

缓冲区是 SIZE 长度，我们将一些数据放在这个范围之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T14:24:38.293

如果您想在 SIZE 索引处为 '\0' 字符留出空间，请创建一个大小为 SIZE+1 的缓冲区。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T14:25:52.080

是的，它破坏了内存。如果数据不是以零结尾并且您想自己附加一个 0，则数组大小必须比数据大一。索引也是从零开始的，因此要设置缓冲区[SIZE]，字符数必须为 SIZE+1。

```
char* buffer = new char[SIZE+1];
//                          ^^ 
memcpy( buffer, somedata, SIZE );
buffer[SIZE]='\0'; 
```

# ruby-on-rails-3 - 在不发送电子邮件的情况下访问邮件方法

> ID：14922063
> 
> 赞同：0
> 
> 时间：2013-02-17T14:22:54.903
> 
> 标签：ruby-on-rails-3, actionmailer, delayed-job

我在 Rails 3 中有一个工作邮件。

我想在邮件方法中有一些逻辑来决定是否通过电子邮件发送它。我不能在邮件之外有这个逻辑，因为我使用`Delayed_job`延迟。我将电子邮件延迟了一个小时。如果条件不满足，我会发送电子邮件。

**1.有没有办法进入mailer方法，不完成发送（优雅）**

**2.有没有更好的方法来实现我正在尝试的东西？**

**代码示例**

这是邮件

```
class MessagesMailer < ActionMailer::Base
  def message_notification(user, message)
    @user = user
    @msg = message
    mail(to: @user.email, from: "#{@msg.sender.name} <me@myapp.com>", subject: "You have recieved a new message from #{@msg.sender.name}")
  end
end 
```

`MessagesMailer.delay(:run_at => 5.minutes.from_now).message_notification(@user, @message)`在整个应用程序中被调用，特别是从`MessagesController`

我想检查是否`@user`已经阅读了该消息。如果是这样，请不要发送电子邮件。 `Delay_job`将`message_notification`在 5 分钟内执行，但是一旦该方法完成，无论其中发生什么，都会发送电子邮件。

有没有办法在有条件的情况下取消交货（`@user`阅读消息）？

# ruby-on-rails - Rails 3 验证 URL 或 IP 地址

> ID：14922064
> 
> 赞同：1
> 
> 时间：2013-02-17T14:22:57.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, url

我正在寻找一种方法来验证 Rails 模型中正确 URL 或 IP 地址的字段。我玩过`validates :url, :format => URI::regexp(%w(http https))`, 和其他 URL 验证。但是如何使用 URL 或 IP 地址验证该字段？也许有一个宝石。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:11:20.513

不确定是否有这样的 gem，但是可以相对简单地实现自定义验证（[`ipaddress`](https://github.com/bluemonk/ipaddress)在 Gemfile 中使用 gem）。尝试类似的东西

```
require 'uri'
validate :valid_url_or_ip
...
private
def valid_url_or_ip
  unless valid_url?(url) || IPAddress.valid?(url)
    errors.add(:url, "Not an URL or IP address")
  end
end

def valid_url?
  uri = URI.parse(url)
  uri.kind_of?(URI::HTTP) || uri.kind_of?(URI::HTTPS)
rescue URI::InvalidURIError
  false
end 
```

# haskell - Haskell：使用 Data.Text.replace 仅替换第一次出现的文本值

> ID：14922070
> 
> 赞同：5
> 
> 时间：2013-02-17T14:23:23.730
> 
> 标签：haskell

如何以最有效的方式仅替换 Haskell 中 Text 值中第一次出现的“子字符串”（实际上是 Data.Text.Text）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T14:29:23.787

你可以[`breakOn`](http://hackage.haskell.org/packages/archive/text/0.11.2.3/doc/html/Data-Text.html#v:breakOn)子字符串，

```
breakOn :: Text -> Text -> (Text, Text) 
```

在模式的第一次出现时将其`Text`分成两部分，然后在第二个组件的开头替换子字符串：

```
replaceOne :: Text -> Text -> Text -> Text
replaceOne pattern substitution text
  | T.null back = text    -- pattern doesn't occur
  | otherwise = T.concat [front, substitution, T.drop (T.length pattern) back] 
    where
      (front, back) = breakOn pattern text 
```

# javascript - 如何避免测试是否存在要在 Javascript 中的大循环中添加到字符串的元素？

> ID：14922071
> 
> 赞同：0
> 
> 时间：2013-02-17T14:23:23.843
> 
> 标签：javascript, jquery, string, if-statement, undefined

我正在从 json 输入和模板构建 HTML 字符串。

JSON 将如下所示：

```
...
"count": "5",
"items": {
   "classes":[],
   "href": ["index.html","search.html","brands.html","users.html","orders.html"],
   ...
} 
```

我正在像这样在Javascript中查看：

```
for (i = 0; i < dyn.list.count; i += 1) {
   elem = util.getTemplate('tmp_navbar_element', temps)
     .replace('class_abc"','class_abc '+dyn.list.items.classes[i]+'"')
     .replace("href='","href='"+dyn.list.items.href[i])
    ...
} 
```

一切正常，但我不确定处理未在 JSON 配置中传递的元素的最佳方式。

例如，如果`classes = []`，现在我将 undefined 添加到每个`elem`，因为用户没有指定一个类。

**问题**：
是通过检查来避免“未定义”条目的唯一方法，`if classes[i] !== undefined ...`还是有一种更简单的方法来“仅添加一个类”？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:26:20.473

有几种方法，这是最简单的方法之一：

```
.replace('class_abc"','class_abc ' + (dyn.list.items.classes[i] || "") + '"') 
```

这使用了[奇怪强大的`||`运算符](http://blog.niftysnippets.org/2008/02/javascripts-curiously-powerful-or.html)来使用`""`if `dyn.list.items.classes[i]`is `undefined`(or `null`, or `0`, or `false`, or [amusingly] `""`)。

当然，这意味着你仍然在做一个`replace`你可能会避免的事情。一个更平淡的版本是：

```
var cls;
for (i = 0; i < dyn.list.count; i += 1) {
   elem = util.getTemplate('tmp_navbar_element', temps);
   cls = dyn.list.items.classes[i];
   if (cls) {
     elem = elem.replace('class_abc"','class_abc '+cls+'"');
   }
   elem = elem.replace("href='","href='"+dyn.list.items.href[i]);
   // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T14:32:48.007

尝试：

```
for (i = 0; i < dyn.list.count; i += 1) {
   elem = util.getTemplate('tmp_navbar_element', temps)
     .replace('tmp_gridcount"','tmp_gridcount '+(dyn.list.items.classes[i] || "")+'"')
     .replace("tmp_gridcount",abc[i])
    ...
} 
```

修改说：“如果 dyn.list.items.classes[i] 是*falsy*，则插入一个空字符串”。

# regex - Perl RegExp：打印与特定时间戳匹配的行

> ID：14922072
> 
> 赞同：1
> 
> 时间：2013-02-17T14:23:33.343
> 
> 标签：regex, perl

我有一个问题，我不知道如何解决。我有一个包含大约 250k 行的巨大日志文件，每行信息间隔一分钟（即 09:00:00、09:01:00 等），而不是在电子表格中提取我需要的每一行，我想通过脚本来做。虽然我在脚本方面还没有那么丰富的经验，但我正在努力学习 Perl。

我想要做的是：提取与时间戳匹配的每一行（09:03:00、09:18:00、09:33:00、09:48:00）并将其打印到新文件中。

这是我实现这一目标的可怕错误尝试

```
#!/usr/bin/perl
use warnings;
use strict;
use diagnostics;

my @expression = ( '09:03:00', '09:18:00', '09:33:00', '09:48:00' );
open FILE, "logfile.txt" or die $!;
if (FILE =~ @expression) {
print "$_\n";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:32:29.650

您并没有真正在代码中使用正则表达式。你想要的表达方式是

```
my $expression = /09:(03|18|33|48):00/ 
```

用于扫描文件的代码也可能不起作用。更标准的方法是

```
while(<FILE>)
{
  if(/$expression/) { print; }
} 
```

或者

```
while(<FILE>)
{
  if($_ =~ $expression)
  {
    print "$_\n";
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:41:21.860

像这样：

```
open FILE, "logfile.txt" or die $!;
print grep /09:(03|18|33|48):00/, <FILE>;
close FILE or warn $!; 
```

但是不需要perl，即：

```
grep '09:\(03\|18\|33\|48\):00' logfile.txt > output.txt 
```

# python - Jinja2：如何在任何循环之前识别 var 类型

> ID：14922074
> 
> 赞同：0
> 
> 时间：2013-02-17T14:23:50.410
> 
> 标签：python, jinja2

使用 Jinja2，有没有办法在循环`PARSER`之前识别使用的变量？`for`

```
 Context = """
   {% macro LopyLoop(PARSER) %}
      {% for items in PARSER -%}
         {{ items }}{% if not loop.last %},{% endif %}
      {%- endfor %}
   {% endmacro %}

   {% set Mainlist =  ['ABC','XYZ']  %}

   {{ LopyLoop(Mainlist) }}
   {{ LopyLoop(Mainlist[0]) }}

 )
  """
 Output = Template(Context)
 print Output.render() 
```

以上是有效的，使用时有效`["ABC","XYZ"]`但使用字符串时无效`Mainlist[0]`

我找不到解决这个问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:40:04.130

环顾四周，我发现这个链接 [Looping over subset in Jinja](https://stackoverflow.com/questions/9610393/looping-over-subset-in-jinja)

答案是 {{ LopyLoop(Mainlist[0:1]) }}

# iphone - 从 4.3.5 -> 5.0 升级 iPhone 3GS 会起作用吗？

> ID：14922085
> 
> 赞同：1
> 
> 时间：2013-02-17T14:24:42.303
> 
> 标签：iphone, ios5, ios6, ios4, upgrade

我正在考虑将我的开发 iPhone 3GS 从 iOS4.3.5 升级到 iOS5。现在 Apple 甚至拒绝使用旧版 SDK 并包含 iPhone 5 启动图像的应用程序，我认为没有必要将我的 iPhone 3GS 保留在 iOS4 上。

即使iPhone 3GS 的最新s/w 是iOS6，升级到iOS5 是否会通过服务器验证成功。我问是因为我以前尝试在不同的设备（和不同的 iOS 版本）上以类似的情况恢复，但它不允许我，所以我不得不升级到最新的 iOS 兼容版本。

成功/失败的故事将不胜感激。

谢谢，詹姆斯

PS。这可能不是一个技术性问题，但作为一个开发者社区，这似乎是最好的提问地方！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:31:18.330

Apple 不再签署 iOS5，这意味着您无法恢复到 iOS5，除非您之前在 Cydia 中或使用[TinyUmbrella](http://thefirmwareumbrella.blogspot.nl/)等工具保存了 SHSH blob 。

见解释：[SHSH Blob](http://blog.secretss.com/iphone-stuff/explained-shsh-blobs/)

# java - Hadoop：LongWritable 不能转换为 org.apache.hadoop.io.IntWritable

> ID：14922087
> 
> 赞同：6
> 
> 时间：2013-02-17T14:24:44.893
> 
> 标签：java, hadoop

我想取输入文件中给出的温度的平均值，我的 Mapper 和 Reducer 语法对我来说似乎很好，但我仍然收到以下错误：

```
 Unable to load realm info from SCDynamicStore
    13/02/17 08:03:28 INFO mapred.JobClient: Task Id : attempt_201302170552_0009_m_000000_1, Status : FAILED
    java.lang.ClassCastException: org.apache.hadoop.io.LongWritable cannot be cast to org.apache.hadoop.io.IntWritable
        at org.apache.hadoop.examples.TempMeasurement$TempMapper.map(TempMeasurement.java:26)
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:764)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
        at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

我的映射器功能是这样的：

```
public static class TempMapper extends Mapper<IntWritable, Text, IntWritable, FloatWritable>{

@Override
protected void map(IntWritable key, Text value, Context context)
                throws IOException, InterruptedException {

    //code for getting date and temperature

    String temp = columns.get(3);
    context.write(new IntWritable(year), new FloatWritable(Float.valueOf(temp)));
}
} 
```

而减少是：

```
 public static class IntSumReducer
       extends Reducer<IntWritable, FloatWritable, IntWritable ,FloatWritable> {
    private FloatWritable result = new FloatWritable();

    public void reduce(IntWritable key, Iterable<FloatWritable> values,
                       Context context
                       ) throws IOException, InterruptedException {

      //code for making calculations    

      context.write(key, result);
    }
  } 
```

输入文件如下：

```
11111 , 0,19900101, 44.04 ,
11112, 0, 19900102, 50.00,
11113, 3, 19910203, 30.00, 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T14:54:19.863

映射文本文件的映射器的关键类总是`LongWritable`. 那是因为它包含当前行的字节偏移量，这很容易溢出整数。

基本上，您需要将代码更改为：

```
public static class TempMapper extends Mapper<LongWritable, Text, IntWritable, FloatWritable>{

  @Override
  protected void map(LongWritable key, Text value, Context context)
                throws IOException, InterruptedException {
       //code for getting date and temperature
       String temp = columns.get(3);
       context.write(new IntWritable(year), new FloatWritable(Float.valueOf(temp)));
  }
} 
```

# python - 使 Python 多处理。两个函数之间的管道

> ID：14922089
> 
> 赞同：1
> 
> 时间：2013-02-17T14:24:52.830
> 
> 标签：python, multiprocessing, pipe

我使用 OneWire 传感器 (ds18b20) 读取温度并在 PI 算法中使用它来控制 SSR 继电器。我想在两个函数之间使用管道来发送温度并使“Reg”函数尽可能快地运行。如果我不使用管道，那么 Reg 函数会等待温度函数（使用 0.75 秒）并且输出会出错......谁能告诉我如何使用管道函数。？？

编码：

```
import time
import RPi.GPIO as GPIO
import os

GPIO.setwarnings(False)
GPIO.setmode(GPIO.BCM)
GPIO.setup(22, GPIO.OUT)

def temperatur(self):
 while True:

    tfile = open("/sys/bus/w1/devices/28-00000433f810/w1_slave")
    text = tfile.read()
    tfile.close()
    secondline = text.split("\n")[1]
    temperaturedata = secondline.split(" ")[9]
    temp2 = float(temperaturedata[2:])
    self.temp = temp2 / 1000
    print self.temp

def reg(self):

  while True:

    ek = self.ref - self.temp
    P_del = self.Kp * ek
    I_del = ((self.Kp * self.Syklustid) / self.Ti) * ek
    Paadrag = P_del + I_del
    if Paadrag > 100:
        Paadrag = 100
    if Paadrag < 0:
        Paadrag = 0    
    print "Paadrag: ", Paadrag, "  Temperatur: ", self.temp
    duty = Paadrag / 100.0
    on_time = self.Syklustid * (duty)
    off_time = self.Syklustid * (1.0-duty)
    print "On_time: ", on_time, "  Off_time: ", off_time
    GPIO.output(22, GPIO.HIGH)
    time.sleep(on_time)
    GPIO.output(22, GPIO.LOW)
    time.sleep(off_time

if __name__ == '__main__': 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:08:34.387

这直接来自 python 文档： [http ://docs.python.org/2/library/multiprocessing.html](http://docs.python.org/2/library/multiprocessing.html)

```
from multiprocessing import Process, Pipe

def f(conn):
    conn.send([42, None, 'hello'])
    conn.close()

if __name__ == '__main__':
    parent_conn, child_conn = Pipe()
    p = Process(target=f, args=(child_conn,))
    p.start()
    print parent_conn.recv()   # prints "[42, None, 'hello']"
    p.join() 
```

使用共享状态我得到了更好的结果。特别是对于像温度这样的简单数据（我假设一个数字 - 不是复杂的自定义对象或其他）这是一个小例子（同样你会在 python 文档中找到更多）

```
#import stuff
from multiprocessing import Process, Manager

# Create a shared dictionary of paremeters for both processes to use 
manager = Manager()
global_props = manager.dict()
# SuperImportant - initialise all parameters first!!
global_props.update({'temp': 21.3})

def functionOne(global_props):
    # Do some stuff read temperature
    global_props['temp'] = newVal

def functionTwo(global_props):
    temp = global_props['temp']
    # Do some stuff with the new value

# assign listeners to the two processes, passing in the properties dictionary

handlerOne = functionOne  # This can also be a class in which case it calls __init__()
handlerTwo = functionTwo
processOne = Process(target=handlerOne, 
    args=(global_props))
processTwo = Process(target=handlerTwo, 
    args=(global_props))

# Start the processes running...
processOne.start()
processTwo.start()
processOne.join() 
processTwo.join() 
```

# android - 如何检查android中是否启用了互联网访问？

> ID：14922098
> 
> 赞同：2
> 
> 时间：2013-02-17T14:25:34.840
> 
> 标签：android, application-settings

我正在尝试创建一个连接到网络服务器并检索数据的应用程序，我想做一些功能

1.  当我点击我的应用程序时，首先它检查是否启用了互联网访问？如果启用它会启动应用程序，否则打开互联网访问设置..之后它会重定向到我的应用程序....
2.  当应用程序连接到 web 服务器时，如果连接不成功，则在特定时间后连接超时。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-17T14:41:13.380

在我的一个应用程序中，我有一个这样定义的类：

```
 public class ConnectionDetector {

        private Context _context;

        public ConnectionDetector(Context context){
            this._context = context;
        }

        /**
         * Checking for all possible internet providers
         * **/
        public boolean isConnectingToInternet(){
            ConnectivityManager connectivity = (ConnectivityManager) _context.getSystemService(Context.CONNECTIVITY_SERVICE);
              if (connectivity != null)
              {
                  NetworkInfo[] info = connectivity.getAllNetworkInfo();
                  if (info != null)
                      for (int i = 0; i < info.length; i++)
                          if (info[i].getState() == NetworkInfo.State.CONNECTED)
                          {
                              return true;
                          }

              }
              return false;
        }
    } 
```

在我需要检查连接状态的活动中，我使用这个：

```
 // DEFINE THIS AS A GLOBAL VARIABLE
    AlertDialogManager alert = new AlertDialogManager(); 
```

在`onCreate()`：

```
 ConnectionDetector cd = new ConnectionDetector(getApplicationContext());
    // Check if Internet present
    if (!cd.isConnectingToInternet()) {
        // Internet Connection is not present
        alert.showAlertDialog(MainActivity.this, "Internet Connection Error",
            "Please connect to working Internet connection", false);
        // stop executing code by return
        return;
    } 
```

哦。差点忘了。如果您还需要将用户重定向到设置面板以激活 Internet，则可以使用这样的 Intent：

您可以在 AlertDialog 中提示用户并让他们选择是否愿意。如果是，请运行这段代码。

```
Intent intent = new Intent(Settings.ACTION_WIFI_SETTINGS);
startActivity(intent); 
```

**编辑：**

我错过了明显的（*Commonsware 在他的评论中指出了这一点*）。

您需要将**ACCESS_NETWORK_STATE**权限添加到您的清单文件。

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T14:41:50.333

您可以使用此方法：

```
public boolean isConn() {
        ConnectivityManager connectivity = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity.getActiveNetworkInfo() != null) {
            if (connectivity.getActiveNetworkInfo().isConnected())
                return true;
        }
        return false;
    } 
```

并将此权限添加到清单文件：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T14:38:39.930

这是我用来检查互联网连接的功能

```
// Checks Internet Status
public boolean isOnline() {
    if(cm == null)
        return false;

    final NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if (activeNetwork != null && activeNetwork.getState() == NetworkInfo.State.CONNECTED) 
        return true;

    return false;
} 
```

还要将此权限添加到您的清单文件

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

要将用户发送到 WiFi 设置页面，请使用

```
startActivity(new Intent(android.provider.Settings.ACTION_WIRELESS_SETTINGS)); 
```

# javascript - javascript测试方法没有按预期工作

> ID：14922104
> 
> 赞同：0
> 
> 时间：2013-02-17T14:26:41.537
> 
> 标签：javascript

我有一个基于`OS`版本号的条件逻辑。在浏览器`useragent`字符串中。

这是我尝试过的代码。

```
var useragent = "Linux; U; Android 2.2.1; en-gb; HTC_DesireZ_A7272 Build/FRG83D";

if((/2.3/).test(useragent)){
   alert("2");
}
else if((/3./).test(useragent)){
   alert("3");
}
else if((/4./).test(useragent)){
   alert("4");
}
else {
   alert("5");
} 
```

我总是收到警报`3`。

我尝试用替换`test`方法，`indexOf`并用`5`.

有人可以解释为什么`(/3./).test(useragent)`返回 true 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:27:40.870

你总是得到这个，因为你的正则表达式`/3./`意味着 - 匹配 3 和它后面的任何符号。你必须逃避`.`.

例如尝试`/3\./`, 并分别为其他人: `/2\.3/`, `/4\./`.

您的代码应如下所示：

```
var useragent = "Linux; U; Android 2.2.1; en-gb; HTC_DesireZ_A7272 Build/FRG83D";

if ((/Android 2\./).test(useragent)){
   alert("2");
} else if((/Android 3\./).test(useragent)){
   alert("3");
} else if((/Android 4\./).test(useragent)){
   alert("4");
} else {
   alert("5");
} 
```

# php - 评论功能结束

> ID：14922105
> 
> 赞同：0
> 
> 时间：2013-02-17T14:26:50.867
> 
> 标签：php, comments

在 PHP 中，在右大括号旁边注释函数的结尾是否是一种好习惯？

例如

```
} // end display_items 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:32:01.263

好的做法是始终正确缩进，然后通常不需要这样的注释

# java - 如何访问我自己的相机活动拍摄的照片的 Uri？

> ID：14922110
> 
> 赞同：0
> 
> 时间：2013-02-17T14:27:35.513
> 
> 标签：java, android

我编写了一个相机活动，它可以拍摄一张照片并将其保存到内存中，我如何访问已保存照片的 Uri ？

这是我的相机活动的一些代码：

```
 public void onPictureTaken(byte[] data, Camera camera) {

        File pictureFile = getOutputMediaFile(MEDIA_TYPE_IMAGE);
        if (pictureFile == null){
            Log.d("Errore Doorbin", "Error creating media file, check storage permissions: ");
            return;
        }

        try {
            FileOutputStream fos = new FileOutputStream(pictureFile);
            fos.write(data);
            fos.close();
            // these lines are for the gallery to scan the SDCard manually
            File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                    Environment.DIRECTORY_PICTURES), "MyCameraApp");
                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, 
                    Uri.parse("file://"+ mediaStorageDir)));
           /* MediaScannerConnection.scanFile(CameraActivity.this,
                    new String[] { fos.toString() }, null,
                    new MediaScannerConnection.OnScanCompletedListener() {
                public void onScanCompleted(String path, Uri uri) {
                    // code to execute when scanning is complete
                }
           });*/
           // fos.close();
        } catch (FileNotFoundException e) {
            Log.d("Errore Doorbin", "File not found: " + e.getMessage());
        } catch (IOException e) {
            Log.d("Errore Doorbin", "Error accessing file: " + e.getMessage());
        }
        catch (Exception e)
        {
            Log.d("Errore Doorbin", "errore Kolli dade!" + e.getMessage()) ;
        }
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T12:40:57.370

此活动获取的文件是`pictureFile`，因此要访问它的 Uri，您应该使用 Uri 的函数`fromFile()`，如下所示：

`Uri photoUri = Uri.fromFile(pictureFile);`

# java - 获取数据库连接时在eclipse中调试问题

> ID：14922114
> 
> 赞同：2
> 
> 时间：2013-02-17T14:28:08.413
> 
> 标签：java, eclipse, debugging

我在获得连接时调试java程序时遇到问题，但程序成功执行并获得所需的输出。

下面是我获取连接对象的代码。

```
public class CRMConnection
{
private static String url = "jdbc:oracle:thin:@hostname:1521:dbname";
private static String username = "crmuser";
private static String password = "crmuser";
public static Connection getConnection()
{
Connection conn=null;
try
{
Class.forName("oracle.jdbc.driver.OracleDriver");
conn=DriverManager.getConnection(url,username,password);
}
catch(SQLException e)
{
    System.out.println("exception1:"+e)
}
catch(ClassNotFoundException e)
{
    System.out.println("exception2:"+e)
}
return conn;
} 
```

下面我从另一个类调用 getConnection() 方法。

```
Connection conn = CRMConnection.getConnection(); 
```

如果我在 Eclipse 中以正常模式运行程序，我不会遇到任何问题。我得到了想要的输出。但是如果我在调试模式下运行程序，我在执行 CRMConnection.getConnection() 时会低于方法调用堆栈，但是如果我继续按 F8，程序会成功执行。

我不知道为什么 eclipse 在执行 getConnection() 时显示在调用堆栈下方。是我的代码有问题还是 Eclipse 调试问题？

我在方法调用堆栈中进入 Eclipse 调试窗口。

```
FileInputStream.open(String) line: not available [native method]
OracleDriver.<clinit>() line: 313
Class<T>.forName0(String,boolean,ClassLoader) line: not available
CRMConnection.getConnection() line : 19 
```

需要java高手指教。

# jquery - 验证重复的单选按钮

> ID：14922116
> 
> 赞同：-1
> 
> 时间：2013-02-17T14:28:29.427
> 
> 标签：jquery, jquery-validate

我正在尝试使用 jquery validate 插件来验证表单。我设法使它与输入数组一起工作。例如：

```
<div class="row">
    <div class="row-holder">
        <input class="text" name="childFirstName[]" type="text" />
        <label>שם הילד/ה:</label>
    </div>
</div> 
```

假设我有未知数量的输入，所以我必须使用这种方法。

我设法制作插件来检查所有输入。我也有 2 个单选按钮。

```
<div class="row row-alt">
    <div class="row-holder">
        <div class="col-checkbox">
            <label>נקבה</label>
            <input class="radio" value="1" name="childGender[]" type="radio" />
        </div>
        <div class="col-checkbox">
            <label>זכר</label>
            <input class="radio" value="0" name="childGender[]" type="radio" />
        </div>
        <strong>מין:</strong>
    </div>
</div> 
```

正如你可能猜到的那样。它们都在同一个块内。所以当我复制它并制作很多时......他们首先表现得像一个（如果我选择 1 它会影响表单中的所有无线电），验证器似乎也没有验证它。

这是一个链接：http: [//jwtdigital.co.il/MyMaterna/form.php](http://jwtdigital.co.il/MyMaterna/form.php)

希望你能帮助我。对不起我糟糕的英语:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:35:15.320

你的代码...

```
<input class="radio" value="1" name="childGender[]" type="radio" />
<input class="radio" value="0" name="childGender[]" type="radio" /> 
```

我不能确定，因为您没有发布足够的代码并且您的演示页面链接现在已经失效，但也许您忽略了正确处理`radio` `name`.

[http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29](http://docs.jquery.com/Plugins/Validation/Reference#Fields_with_complex_names_.28brackets.2C_dots.29)

包含括号的名称，当在...中声明时，`[]` **必须**用引号引起来`rules``.validate()`

```
$(document).ready(function () {

    $('#myform').validate({ // initialize the plugin
        rules: {
            //other rules,
            'childGender[]': {
                required: true
            }
        }
    });

}); 
```

**工作演示：http: [//jsfiddle.net/RNHDy/](http://jsfiddle.net/RNHDy/)**

# php - 如何在 Cakephp 中查询准备好的语句

> ID：14922119
> 
> 赞同：0
> 
> 时间：2013-02-17T14:29:00.817
> 
> 标签：php, cakephp, find

我有一个准备好的语句，需要在 cakephp 1.3 中使用 find() 来查询它。我该怎么做。我尝试了不同的条件，但没有成功。这是我准备好的声明

```
"select v.id from vehicles as v left join trips t on (v.id=t.vehicle_id) where t.departure_date between '2012-10-31 10:41:30' AND '2012-11-06 10:41:38' and t.id is null" 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:39:57.130

我认为这个 sql 语句永远不会返回任何结果，因为您在某些值之间说 t.departure_date 然后说 t.id IS NULL （除非 t.id 在表中实际上可以为 NULL）。大概，你想要这样的东西：

```
select v.id 
from vehicles as v 
    left join trips t on v.id=t.vehicle_id 
        AND t.departure_date between '2012-10-31 10:41:30'
            AND '2012-11-06 10:41:38' 
WHERE t.id is null 
```

这将返回那些出发日期的行程表中不存在的任何车辆 ID。就 php 方面而言，不确定我是否可以提供帮助。

希望这可以帮助。

# iphone - TableView单元格中TextView的可变高度

> ID：14922123
> 
> 赞同：2
> 
> 时间：2013-02-17T14:29:26.313
> 
> 标签：iphone, ios, objective-c, uitableview

我有一个基本`UITableView`的，我在网上填写了一个网络服务，但是我找不到根据我的高度来设置我的单元格高度（动态单元格数）的方法`textView`。

这是我填充单元格的方式：

```
UITextView *textView = (UITextView *)[cell viewWithTag:106];
textView.text = [[stories objectAtIndex:indexPath.row] objectForKey:@"texte"]; 
```

在我的`cellForRow`方法中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

我试过这个但得到一个错误`EXC_BAD_ACCESS`

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"PerleCell"];
    UITextView *textView = (UITextView *)[cell viewWithTag:106];
    textView.text = [[stories objectAtIndex:indexPath.row] objectForKey:@"texte"];
    CGFloat *heightCell =  (CGFloat*)textView.text.length;
    return *heightCell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:42:56.127

在以下方法中，您可以根据 textView 更改单元格的高度。

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    // Here check length of your textView
    // and after getting length return that length;
    NSString *myString = [[stories objectAtIndex:indexPath.row] objectForKey:@"texte"];
    CGSize maximumSize = CGSizeMake(300, 9999);
    UIFont *myFont = [UIFont fontWithName:@"Helvetica" size:14];
    CGSize myStringSize = [myString sizeWithFont:myFont constrainedToSize:maximumSize lineBreakMode:UILineBreakModeWordWrap];
    return size.height;
} 
```

同样在 cellForRowAtIndexPath 方法中以相同的方式计算字符串的宽度，然后相应地给出 yourtextView 的宽度框架。之后在单元格的 contentView 上添加您的 textview。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
     // Create cell here by using any style and for this you can google some what that how to create cell in UITableView
     // Here check length of your textView
     // and after getting length return that length;
     NSString *myString = [[stories objectAtIndex:indexPath.row] objectForKey:@"texte"];
     CGSize maximumSize = CGSizeMake(300, 9999);
     UIFont *myFont = [UIFont fontWithName:@"Helvetica" size:14];
     CGSize myStringSize = [myString sizeWithFont:myFont constrainedToSize:maximumSize lineBreakMode:UILineBreakModeWordWrap];
     UITextView *textView = [[UITextView alloc]initWithFrame:CGRectMake(0,0,300,size.height)];
     textView.text = myString;
     [cell.contentView addSubView:textView];
     return cell;
} 
```

# jpa - 单向 JPA

> ID：14922129
> 
> 赞同：2
> 
> 时间：2013-02-17T14:30:23.890
> 
> 标签：jpa, one-to-many

我有一个数据库（JPA 2 Eclipselink），其中有订单和项目，每个订单可以有很多项目，每个项目只能分配给一个订单。这是单向关系。

**订单实体：**

```
@Entity
public class Order implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
} 
```

**项目实体具有：**

```
@Entity
public class Item implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @ManyToOne
    Order o;
} 
```

但是如何设置如果从数据库中删除订单，所有引用它的项目都将被删除？是否有可能在单向关系中，或者我必须创建双向并将 @OneToMany(cascade=remove) 放在订单实体类中？还是保持单向，但拥有方将是订单并从项目实体中删除对订单的任何引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:38:34.380

要么按照您在问题中的建议进行双向关联并添加级联，要么明确删除链接到订单的所有项目（使用 JPQL 删除查询，或通过搜索然后删除它们），然后删除命令。

在这种情况下，双向关联是有意义的，您可能会在代码中的其他几个地方从中受益。

# security - 当用户输入错误的密码时，哪个错误消息更好？

> ID：14922130
> 
> 赞同：23
> 
> 时间：2013-02-17T14:30:25.820
> 
> 标签：security, authentication, passwords

当用户输入错误密码时，从安全角度来看，以下两条错误消息有什么区别？

> 错误的用户名或密码。
> 
> 密码错误。

例如，当您在 上输入错误的密码时`Gmail.com`，它会告诉您“您输入的用户名或密码不正确”。

出于安全原因是否有任何考虑？我认为错误消息：“您输入的密码不正确”对用户来说更清楚，而且，检查用户名是否存在非常容易`Gmail.com`：只需单击“无法访问您的帐户？” 并输入用户名。如果用户名不存在，它会告诉你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-17T14:33:03.987

这个想法是不给黑客额外的信息。如果您输入错误的密码，您就告诉黑客他们有正确的用户名，反之亦然。尽管您说的是真的，但在某些网站上，可以确定您是否通过其他方式猜到了用户名。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-18T12:45:02.897

最简单和最常用的短语是：

“您输入了无效的用户名或密码”

这背后的原因是为了防止有人试图通过“猜测”密码来暴力破解您的帐户。如果攻击者收到详细说明密码不正确的错误，那么他们可以尝试不同的密码，直到正确为止。

但是，如果您提供类似上述的通用消息，则攻击者不知道用户、密码或两者的组合是否正确。

法比奥@fcerullo

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-26T12:35:39.767

只是添加一些额外的信息。OWASP 指南为您提供有关此问题的建议

[https://owasp.org/www-project-cheat-sheets/cheatsheets/Authentication_Cheat_Sheet.html#Authentication_and_Error_Messages](https://owasp.org/www-project-cheat-sheets/cheatsheets/Authentication_Cheat_Sheet.html#Authentication_and_Error_Messages)

> 无论用户 ID 或密码是否不正确，应用程序都应以一般错误消息进行响应。它也不应指示现有帐户的状态。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-08-21T16:01:42.883

好吧，从不同的角度来看，安全方面，这两条消息并没有太大的不同。至少对于允许注册的网站。黑客可以随时进入注册页面并尝试使用上述详细信息进行注册。当然，您的网站最初是由模糊性保护的，它会立即大喊“该用户名已被占用！” 或“该电子邮件已注册！” 看起来那时安全性是一个神话。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-02-17T22:30:14.503

*怎么样*

> ## **无效证件。请再试一次。**

 ** * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-17T14:34:00.470

在某些情况下，您不希望攻击者能够猜测帐户的存在。因此，您将始终返回一般错误消息，以便攻击者无法猜测此帐户是否存在。

在 GMAIL 上下文中，可能是 gmail 不希望人们挖掘现有的电子邮件地址以供垃圾邮件机器人使用。

您自己可以决定在您的应用程序中是否需要强制执行安全性，或者您是否可以提供更多用户友好的错误消息。*

# javascript - 将数据作为序列化与 json 发送

> ID：14922137
> 
> 赞同：2
> 
> 时间：2013-02-17T14:30:52.673
> 
> 标签：javascript, jquery, json

我正在通过 JavaScript 将数据发送到服务器以获取 REST API（这将在 PhoneGap 应用程序内，因此使用 jQuery 而不是任何服务器代码）。我正在构建自己的 API，所以我有灵活的选择，但我想知道是否有一种首选的方式来处理 POST 数据。我将 JSON 用于 GET，那么我应该将它用于 POST 吗？

发送它的更好方法是什么？

1）使用序列化方法，然后将其作为数据发送，*例如*：

```
$('form').submit(function(e){

    e.preventDefault();

    var form = $(this);

    $.ajax({
        type: 'POST',
        url: form.attr('action'),
        data: form.serialize(),
        success: function(response){
            // handle response
        },
        error: function(a,b,c) {
            // handle error
        }   
    });

}); 
```

或 2) 将其作为 JSON 对象发送，例如：

```
$.fn.serializeObject = function()
{
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
};

$('form').submit(function(e){

    e.preventDefault();

    var form = $(this);

    $.ajax({
        type: 'POST',
        url: form.attr('action'),
        data: JSON.stringify(form.serializeObject()),
        success: function(response){
            // handle response
        },
        error: function(a,b,c) {
            // handle error
        }   
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:33:55.010

你的第二个例子在内部做了很多事情，`$.ajax`并且`.serialize()`POST 数据总是作为字符串发送，所以它不应该以一种或另一种方式真正重要。第一个例子看起来更简洁，更容易阅读，所以这是一个优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:45:22.323

创建一个空数组，继续将各个表单字段推送到数组，JSON.stringify 数组，并通过 POST 发送。

```
var formData = [];
//Push individual form elements to this aray, preferably in a "key" : "value" format.
var payload = JSON.stringify(formData);
//Then just send it to the server. 
```

JSON 对象的好处是您可以毫不费力地从各种服务器端语言中读取它。

此外，您甚至可以在 JSON 对象中使用 'key' : 'value' 对来手动获取服务器上每个字段的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T14:41:23.687

在您的问题中，您没有具体说明“更好的方式”是什么意思，所以也许您应该编辑您的问题以澄清这一点。例如，您是否特别关注性能、内存使用*等*？

然而，在一个非常普遍的意义上，我会说做这种事情的更好方法是使用你觉得更容易阅读的方法，因为这种方法在课程中更容易调试、扩展和修改的时间。仅查看客户端代码，您的第一种方法似乎更易于阅读，但如果您负责服务器端，您也应该考虑这一点。*采用您认为整体*上更易于维护的方法。

最后，您没有在问题中说明您是否要发布 REST API 以供其他人使用，但如果您是，那么最重要的因素实际上是阅读和理解 API 的难易程度。通过这种方式，您可能应该在 GET 和 POST 中都使用 JSON。

# php - 为什么我需要使用许多刷新函数来刷新输出缓冲区（使用 wamp、PHP）

> ID：14922141
> 
> 赞同：0
> 
> 时间：2013-02-17T14:31:38.433
> 
> 标签：php, buffer, output-buffering

在 wamp 服务器中，除非我使用以下功能，否则我无法刷新输出缓冲区：

```
ob_end_flush();
ob_flush();
flush();
ob_start(); 
```

为什么我需要使用所有这些功能？为什么简单`ob_flush()`不起作用？我的代码：

```
<?php    
ob_start();
    header( 'Content-type: text/html; charset=utf-8' );
    echo 'Begin ...<br />';
    for( $i = 0 ; $i < 6 ; $i++ )
    {
        echo $i . '<br />';
        sleep(1);
        ob_end_flush();
        ob_flush();
        flush();
        ob_start();
    }
    echo 'End ...<br />';
    ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:41:02.097

因为你有默认参数[output_buffering](http://php.net/output-buffering) = on

转到**C:\wamp\bin\php\php5.4.3\php.ini**

并找到线

**output_buffering = 开**

并将其更改为

**;output_buffering = 开启**

# c# - aspx 内的 C# 代码填充 gridview

> ID：14922142
> 
> 赞同：0
> 
> 时间：2013-02-17T14:31:42.170
> 
> 标签：c#, asp.net, gridview

我有 GridView。

```
 <asp:GridView ID="GridView1" runat="server"  
                        AutoGenerateColumns="False">
                        <Columns>                           
                           <asp:BoundField DataField="status" HeaderText="status" ItemStyle-Width="100px" > <ItemStyle Width="100px"></ItemStyle>
                          </asp:BoundField>

                        </Columns> 
</asp:GridView> 
```

在代码后面

```
GridView1.DataSource = DataTable1;
GridView1.DataBind(); 
```

在 aspx 文件中，我想编写一些 c# 代码。例如下面的 if status == 0 then set column value等于'zero'；如果 status == 1 则设置列值等于“一”；

如何改变

```
<asp:BoundField DataField="status" HeaderText="status" ItemStyle-Width="100px" > <ItemStyle Width="100px"></ItemStyle>
</asp:BoundField> 
```

所以上面写的算法有效吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:38:16.220

使用模板字段，例如：

```
<asp:TemplateField HeaderText="Status">
            <ItemTemplate>
                <%# ReturnText(Eval("Status")) %>
            </ItemTemplate>
</asp:TemplateField> 
```

在 C# 代码隐藏中

```
protected string ReturnText(object val)
{
   if(val!=null)
   {

      if(val.ToString().Equals("1")) {return "one"; }
      else if(val.ToString().Equals("0")) {return "zero";}
   }
   return "";
} 
```

另一种选择是从 SQL 查询返回文本：

```
SELECT STATUS, 
CASE STATUS WHEN 1 THEN 'One' WHEN 0 THEN 'Zero' END As Status_Text
FROM YourTable 
```

然后您可以将列 status_text 绑定到 boundfield。

# iphone - MP3 文件的简单直接的 FFT

> ID：14922146
> 
> 赞同：1
> 
> 时间：2013-02-17T14:32:04.303
> 
> 标签：iphone, ios, objective-c, audio, fft

我有一个 MP3 文件，需要不断检测并显示这个正在播放的 MP3 文件的 Hz 值。一些谷歌搜索表明我有 2 个机会：使用 FFT 或使用 Apple Accelerate 框架。不幸的是，我还没有找到任何易于使用的样本。所有样本，如 AurioTouch 等，都需要大量代码来获取样本缓冲区的简单数字。是否有任何简单的 iOS 音高检测示例？

例如，我找到了[https://github.com/clindsey/pkmFFT](https://github.com/clindsey/pkmFFT)，但它缺少一些作者已删除的文件。有这样的工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:38:58.773

恐怕不是。处理声音通常很困难，Core Audio 也不例外。现在谈谈手头的事情。

FFT 是一种将输入从时域转换到频域的算法。不一定与声音处理有关，您也可以将其用于声音以外的其他事情。

Accelerate 是 Apple 提供的框架，除其他外，它还提供 FFT 实现。因此，您实际上没有两种选择，只有一种及其实现。

现在，取决于您想要做什么（例如，如果您更喜欢速度而不是准确性、稳健性而不是简单等）以及您拥有的波形类型（简单、复杂、人类语音、音乐），FFT 本身可能还不够，或者甚至不是您任务的正确选择。还有其他选项，自相关、过零、倒谱分析、最大似然等等。但没有一个是微不足道的，除了过零，它也会给你最差的结果，并且无法处理复杂的波形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:54:50.277

这是一个很好的起点：

[http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html](http://blog.bjornroche.com/2012/07/frequency-detection-using-fft-aka-pitch.html)

关于SO还有其他问题。

但是，正如其他答案所示，这不是可以“神奇”地完成的事情。即使您从某人那里获得了代码许可（例如，iZotope 和 z-plane 都为您想要做的事情提供了出色的代码），您仍然需要了解如何将数据输入和输出他们的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T18:13:59.803

如果您需要快速音高检测，请使用[http://www.schmittmachine.com/dywapitchtrack.html](http://www.schmittmachine.com/dywapitchtrack.html)

你会在里面找到一个 IOS 示例代码。

如果你需要 FFT，你应该使用 Apple Accelerate 框架。

希望这有帮助

# javascript - 什么方法会提醒浏览器图像已更改？

> ID：14922148
> 
> 赞同：0
> 
> 时间：2013-02-17T14:32:15.557
> 
> 标签：javascript

我通过简单地附加一个

```
?time=current_time_stamp 
```

发出请求时到我的图片网址。

但是，我只需要在用户更新他们的照片后立即中断缓存。

我可以为用户照片的每个图像请求添加时间戳，但这似乎有点过头了。

有没有办法告诉浏览器，图片已经更新，请刷新缓存。

否则，我需要为所有动态图像附加时间戳或类似内容，以捕捉图像中的任何变化。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:39:14.163

最好的方法是在图像更改时修改服务器上图像的文件名，以便当图像更改时，浏览器 HTML 包含对新文件名的引用，因此浏览器请求新文件名（这不是在缓存中）。文件名可以包含一个版本号，您可以在文件被修改时增加该版本号，或者您可以只使用时间戳作为文件名的一部分。

这为您提供了两全其美的体验。当图像没有更改时，您会在浏览器中获得最大的缓存，但当图像更改时，您也会立即获得更新。

同样相关的是，服务器可以控制每个单独元素上的缓存指令，以指示浏览器是否可以缓存或缓存多长时间。

# .net - Visual Basic 删除然后插入数据

> ID：14922150
> 
> 赞同：0
> 
> 时间：2013-02-17T14:32:24.240
> 
> 标签：.net, vb.net, datagridview

这是删除按钮上的代码

```
 Dim res As Integer
        res = MsgBox("Are you sure you want to delete?", MsgBoxStyle.YesNo)
        If res = vbYes Then

            If staffDB.SelectedRows.Count > -1 Then

                staffDB.Rows.RemoveAt(Me.staffDB.CurrentRow.Index)
                Me.Validate()
                Me.TblStaffLoginBindingSource.EndEdit()
                Me.TblStaffLoginTableAdapter.Update(Me.SampleDataSet)

                userArchive.DataGridView1.Rows.Insert(Me.staffDB.CurrentRow.Index)
                Me.Validate()
                userArchive.TblArchiveUserBindingSource.EndEdit()
                userArchive.TblArchiveUserTableAdapter.Update(userArchive.SampleDataSet)

            Else
                MessageBox.Show("You must select a row")
            End If
        End If 
```

我有 2 个表格。命名为 userAccounts 和 userArchive。在 userAccounts 表单上有一个删除按钮和 datagridview（名为 staffDB），其中包含数据。现在，当我单击 datagridview 上的数据，然后单击删除按钮时，它将删除选定的数据，但之后我想在 userArchive 上添加已删除的数据。用户存档有一个名为 Datagridview1 的数据网格视图，我想在那里插入我在用户帐户上删除的数据。

简而言之，我需要将已删除的数据添加到存档中。但我不知道怎么做:(我真的很感谢一些帮助。

如果您需要有关该问题的更多信息，请发布我的程序的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:43:48.223

您已经删除了选定的行。因此，当您插入 DGV1 时，您会收到错误消息。

尝试这个 ：

```
 TblArchiveUserTableAdapter.tables(0).rows.add(1) 'no_of_rows_selected) <--
                userArchiv.Datagridview1.dataSource=TblArchiveUserBindingSource.Tables(0)    <--
                userArchive.DataGridView1.Rows.Insert(Me.staffDB.CurrentRow.Index)  <--- this line reordered. 
                staffDB.Rows.RemoveAt(Me.staffDB.CurrentRow.Index)
                Me.Validate()
                Me.TblStaffLoginBindingSource.EndEdit()
                Me.TblStaffLoginTableAdapter.Update(Me.SampleDataSet)
                userArchive.TblArchiveUserBindingSource.EndEdit()
                userArchive.TblArchiveUserTableAdapter.Update(userArchive.SampleDataSet) 
```

# php - 困难的 XML 解析器

> ID：14922155
> 
> 赞同：-1
> 
> 时间：2013-02-17T14:32:34.307
> 
> 标签：php, xml, xml-parsing

我实际上在 PHP 中使用 XML 文件。我将 simpleXML 用于我的基本 xml 文件。但现在我有一个不同的 xml 文件，而 SimpleXML 还不够好。从我的 xml 我需要从 zbozi **kod**和**počet 获取**。你有什么解决办法吗？

```
<?xml version="1.0" encoding="utf-8"?>
<DataSet xmlns="http://www.atcomp.cz/webservices">
  <xs:schema id="StavySkladu" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
    <xs:element name="StavySkladu" msdata:IsDataSet="true" msdata:Locale="cs-CZ">
      <xs:complexType>
        <xs:choice maxOccurs="unbounded">
          <xs:element name="Zbozi">
            <xs:complexType>
              <xs:attribute name="kod" type="xs:string" />
              <xs:attribute name="pocet" type="xs:int" />
            </xs:complexType>
          </xs:element>
        </xs:choice>
      </xs:complexType>
    </xs:element>
  </xs:schema>
  <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
    <StavySkladu xmlns="">
      <Zbozi diffgr:id="Zbozi1" msdata:rowOrder="0" kod="C5709A" pocet="0"/>
      <Zbozi diffgr:id="Zbozi2" msdata:rowOrder="1" kod="C5708A" pocet="0"/>
      <Zbozi diffgr:id="Zbozi3" msdata:rowOrder="2" kod="C5718A" pocet="45"/>
      <Zbozi diffgr:id="Zbozi4" msdata:rowOrder="3" kod="EC13S050088" pocet="2"/>
      <Zbozi diffgr:id="Zbozi5" msdata:rowOrder="4" kod="EC376123GB" pocet="3"/>
      <Zbozi diffgr:id="Zbozi6" msdata:rowOrder="5" kod="EC800302" pocet="0"/>
      <Zbozi diffgr:id="Zbozi7" msdata:rowOrder="6" kod="EC806392" pocet="2"/>
      <Zbozi diffgr:id="Zbozi8" msdata:rowOrder="7" kod="EC800202" pocet="1"/>
      <Zbozi diffgr:id="Zbozi9" msdata:rowOrder="8" kod="EC806872" pocet="1"/>
      <Zbozi diffgr:id="Zbozi10" msdata:rowOrder="9" kod="EPC163071" pocet="16"/>
      <Zbozi diffgr:id="Zbozi11" msdata:rowOrder="10" kod="EMD157021" pocet="0"/>
      <Zbozi diffgr:id="Zbozi12" msdata:rowOrder="11" kod="EPC834031" pocet="0"/>
      <Zbozi diffgr:id="Zbozi13" msdata:rowOrder="12" kod="EPC825341" pocet="17"/>
    </StavySkladu>
  </diffgr:diffgram>
</DataSet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:10:43.210

```
<?php
$xml = new SimpleXMLElement($xmlstr);
$xml->registerXPathNamespace('xs', 'http://www.w3.org/2001/XMLSchema');
$path =' xs:schema/xs:element/xs:complexType/xs:choice/xs:element/xs:complexType/xs:attribute';

foreach($xml->xpath($path) as $child)
{
    $attributes = $child->attributes();
    echo "{$attributes['name']}\n";
}
?> 
```

# joomla - 带有自定义页面显示选项的 Joomla 菜单

> ID：14922159
> 
> 赞同：0
> 
> 时间：2013-02-17T14:32:50.673
> 
> 标签：joomla

我的网站布局在大多数页面的右侧都有图像。我想配置要在菜单项设置中显示的图像。

似乎配置图像的正确位置是菜单项的页面显示选项。我不想使用 Page Class 选项，因为这需要更改每个新图像的模板。

有没有办法可以添加自定义页面显示选项（用于图像 url）并从模板中读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:41:10.690

我假设图像正在模块中显示。如果是这样，有几种方法可以做到 -

1.  使用菜单分配来打开或关闭您希望它显示的每个页面的模块。这将需要每个不同图像的模块。

2.  在模块中将图像作为背景，然后使用页面类后缀，使用 CSS 更改将哪个图像用作背景。这将需要您要使用的每个图像的一行 CSS。

3.  您还可以编写自定义模块或模块覆盖，使用页面类后缀为图像的 SRC 创建动态 URL。

# bash - 更优雅地使用 find 传递按目录分组的文件？

> ID：14922169
> 
> 赞同：0
> 
> 时间：2013-02-17T14:34:03.840
> 
> 标签：bash, grep, find, flac

这个脚本花了我太长时间（！！）来编译，但我终于有了一个相当不错的脚本，它可以满足我的需求：

```
find "$@" -type d -print0 | while IFS= read -r -d $'\0' dir; do
    find "$dir" -iname '*.flac' -maxdepth 1 ! -exec bash -c '
        metaflac --list --block-type=VORBIS_COMMENT "$0" 2>/dev/null | grep -i "REPLAYGAIN_ALBUM_PEAK" &>/dev/null
        exit $?
    ' {} ';' -exec bash -c '
        echo Adding ReplayGain tags to "$0"/\*.flac...
        metaflac --add-replay-gain "${@:1}"
    ' "$dir" {} '+'
done 
```

目的是在文件树中搜索包含 FLAC 文件的目录，测试是否缺少`REPLAYGAIN_ALBUM_PEAK`标签，并扫描该目录中的所有文件以查找 ReplayGain（如果缺少）。

最大的障碍是给定专辑的所有 FLAC 文件必须作为一个命令传递给 metaflac，否则 metaflac 不知道它们都是一张专辑。如您所见，我已经使用`find ... -exec ... +`.

我想知道是否有更优雅的方式来做到这一点。特别是，我怎样才能跳过`while`循环？当然这应该是不必要的，因为`find`已经在遍历目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:37:40.093

您可能可以使用*xargs*来实现它。

例如，如果您在所有文件中查找文本*foo*，您将拥有类似

```
find . type f | xargs grep foo 
```

*xargs*将每个结果从左端表达式 ( *find* ) 传递到右端调用的命令。

然后，如果不存在命令来实现您想要做的事情，您可以随时创建一个函数，并将 if 传递给*xargs*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:57:03.417

我不能评论 flac 命令本身，但至于其余的：

```
find . -name '*.flac' \
 ! -exec bash -c 'metaflac --list --block-type=VORBIS_COMMENT "$1" | grep -qi "REPLAYGAIN_ALBUM_PEAK"' -- {} \; \
  -execdir bash -c 'metaflac --add-replay-gain *.flac' \; 
```

您只需找到相关文件，然后处理它所在的目录。

# php - 以每分钟一次以上的频率运行 cron

> ID：14922173
> 
> 赞同：0
> 
> 时间：2013-02-17T14:35:34.323
> 
> 标签：php, shell, cron

这是 fastcron.php 的内容，我正在尝试将频率加快到每 10 秒一次，而不是默认的每分钟一次。

```
<?php

system("(sleep 10 && php -f /home/thanksfo/public_html/_aweber/admin/cron/cron.php) &
(sleep 20 && php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 30 && php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 40 && php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 50 && php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 60 && php -f /home/big/public_html/_aweber/admin/cron/cron.php) &");

?> 
```

代码是否正确，如果我运行它，我如何确保我的系统不会崩溃？我在 VPS 上。

# actionscript-3 - Facebook Insights 和 AS3

> ID：14922174
> 
> 赞同：1
> 
> 时间：2013-02-17T14:35:34.223
> 
> 标签：actionscript-3, facebook-insights, facebook-as3-api

有没有办法让我直接从 Facebook Insights 提取数据并将它们加载到我的 Flash 应用程序中，而不是在我的粉丝页面中手动下载提供的 Excel 表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:54:25.207

是的，您可以从 Graph API 中提取 JSON 格式的数据。

查看提供的[文档](https://developers.facebook.com/docs/reference/api/insights/)。

至于使它们在您的 Flash 应用程序中有用，该任务取决于您。

# ios - 如何将制造的事件发布到 UIButton

> ID：14922175
> 
> 赞同：1
> 
> 时间：2013-02-17T14:36:04.447
> 
> 标签：ios, uibutton

我正在编写一个简单的 iOS 6.1 游戏。游戏涉及按下按钮（好吧，这是一个tictactoe板，单元格是UIButtons）。允许玩家选择是先走还是电脑先走。如果玩家告诉计算机先走，我想设置一些值，然后像用户按下它一样触发 UIButton。

如何发布事件，或以其他方式模拟按下按钮的动作，让框架的其余部分完成处理按钮按下的工作？

如果有更好的设计方法，我不必假装电脑按下了按钮，我愿意听听。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:43:05.457

您的按钮将连接到一个操作方法，通常在您的视图控制器中。只需自己调用该方法，将按钮作为发送者传递。

您的方法将类似于：

```
-(IBAction)buttonPressed:(UIButton*)sender
{
    // Respond to your button press...
} 
```

你可以这样称呼它：

```
[self buttonPressed:self.whicheverButtonYouLike]; 
```

您需要将按钮定义为插座才能正常工作。

# django - GeoDjango：将地理数据保存在 DMS（度分秒）而不是十进制度

> ID：14922177
> 
> 赞同：0
> 
> 时间：2013-02-17T14:36:17.893
> 
> 标签：django, geospatial, geodjango

TL;DR：**如何制作 geodjango 以将我的数据保存为 DMS 格式**？

* * *

我正在构建一个简单的 django（实际上是 GeoDjango）应用程序，它加载一些包含 DMS 格式坐标的外部数据源。

目前，在加载该文件时，我将 DMS 转换为 DD，以便将该数据作为 POLYGON 字段存储在 django 模型中。

但是，对于输出（导出到文件），我需要**将其转换回 DMS**。这会导致输出的坐标与输入的坐标略有不同。我相信这是由于浮点数不准确...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:23:29.093

只需维护度数、分钟数、秒数信息，并在具有属性装饰器的方法中进行点操作的单向转换为十进制度数。

```
from django.db import models

class PolygonPoint(models.Model):
    parent_poly = models.ForeignKey(PolyModel)
    degrees = models.IntegerField()
    minutes = models.IntegerField()
    seconds = models.IntegerField()

    @property
    def point(self):
        """
        Do conversion to point here
        """
        ...
        p = Point(x, y, srid=a)
        return p 
```

或者，只需将数据保存在 JSON blob 中。

```
class SomeModel(models.Model):
    ...
    dms_points_json = models.TextArea(help_text=u"JSON list of dms polygon points")
    poly = models.PolygonField()

    def populate_poly(self):
        """
        Perform steps to update/populate the PolygonField using 
        dms_points_json blob
        """
        ... 
```

# ruby - 如何在 Ruby on Rails 中检索相关记录？

> ID：14922183
> 
> 赞同：0
> 
> 时间：2013-02-17T14:36:47.490
> 
> 标签：ruby, ruby-on-rails-3, activerecord

我试图找到一个`user`过期的`invoices`：

```
class User < ActiveRecord::Base
  def overdue_invoices
    invoices.where("overdue = ?", true)
  end
end

class Invoice < ActiveRecord::Base
  def overdue
    balance > 0 && Date.today > due_date
  end
end 
```

问题似乎是模型`overdue`上的方法`Invoice`，而不是数据库列。

无论如何，我怎样才能检索这些记录？这是否有意义，或者将这些`true`和`false`值存储在数据库中会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:16:26.003

您应该为on创建等效的类方法或[范围](http://guides.rubyonrails.org/active_record_querying.html#scopes)：`overdue``Invoice`

```
class Invoice < ActiveRecord::Base
  def self.overdue
    where('balance > 0').where('? > due_date', Date.today)
  end
end 
```

然后您可以调用`overdue`Invoice 关系：

```
class User < ActiveRecord::Base
  def overdue_invoices
    invoices.overdue
  end
end 
```

请注意，我假设`due_date`它是一个数据库列，如果不是，则不能使用此方法 - 但是，您可以将其替换为 SQL 以根据列中的数据计算到期日期。

# javascript - Fancybox 对话框在 iPad 上不起作用

> ID：14922184
> 
> 赞同：1
> 
> 时间：2013-02-17T14:36:59.603
> 
> 标签：javascript, jquery, ipad, fancybox

参考网址： http: [//www.doneupsalon.com](http://www.doneupsalon.com)

Fancybox 2 在 Safari 和其他现代浏览器上运行良好。但是，当在 iPad 上查看并单击菜单链接（即服务）时，会出现叠加层（屏幕变暗），但不会出现对话框。我错过了配置设置吗？在此先感谢您的帮助。

# java - 三维整数向量的数组列表

> ID：14922185
> 
> 赞同：1
> 
> 时间：2013-02-17T14:37:10.963
> 
> 标签：java

我有这个名为bands的三维数组。我需要做 4 个副本，这样我就可以与所有这些副本并行工作。

```
int bands[][][] = new int[param][][]; 
```

我需要数组保持为一个三维数组，因为它是某些需要的方法的输入`int [][][]`

我怎么能做这样的副本？我正在考虑使用这样的arrayList：

```
List<Integer[][][]> bandsList = new ArrayList<Integer[][][]>();

bandsList.add(bands); 
```

但我在最后一行收到此错误：`add(Integer[][][])`类型`List<Integer[][][]>`中的方法不适用于参数`(int[][][])`

所以我该怎么做？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:58:07.527

错误是因为`int[][][]`不一样`Integer[][][]`。

`int[][][]`是一个**原始的 3D 数组** `int`。

`Integer[][][]`是**object 的 3D 数组** `Integer`，它是 的包装类`int`。

嗯，从技术上讲，3D 数组是指向 2D 数组的指针数组，2D 数组是指向 1D 数组的指针数组，1D 数组是基元数组或指向对象的指针。

改为使用`List<int[][][]> bandsList = new ArrayList<int[][][]>();`。

另请注意

```
bandsList.add(bands);
bandsList.add(bands); 
```

只需将 2 个**指针**添加到同一个数组，更改一个也会更改另一个。

您需要手动复制它们：

```
int[][][] getCopy(int[][][] bands)
{
  int[][][] newBands = new int[bands.length][][];
  for (int i = 0; i < bands.length; i++)
  {
    newBands[i] = new int[bands[i].length];
    for (int j = 0; j < bands[i].length; j++)
    {
      newBands[i][j] = new int[bands[i][j].length];
      System.arraycopy(bands, 0, newBands, 0, bands[i][j].length))
    }
  }
  return newBands;
}

// to add
bandsList.add(getCopy(bands)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:06:42.203

这样你就不会复制数组，你必须这样做 4 次：

```
 int cloneList[][][] = new int[param][..][..];
    for(int i = 0; i<bands.length; i++) {
       int arr1[][] = bands[i];
       for(int j = 0; j<arr1.length; j++) {
           int arr2[] = arr1[j];
           for(int k = 0; k<arr2.length; k++) {
               int x = arr2[k];
               cloneList[i][j][k] = x;
           }
       }
    } 
```

# database - 我可以使用八度访问 sqlite3 吗？

> ID：14922186
> 
> 赞同：3
> 
> 时间：2013-02-17T14:37:16.657
> 
> 标签：database, sqlite, odbc, octave

有没有办法从八度读取和写入 sqlite3？

我正在考虑 RODBC 中的 RODBC 或 python 中的 sqlite3 包，但对于八度音程。

我看了八度锻造[http://octave.sourceforge.net/packages.php](http://octave.sourceforge.net/packages.php)

但只能找到只支持postgresql的'database'包。

细节：

*   操作系统：Ubuntu 12.04
*   八度：3.6.2
*   sqlite：3.7.9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-01-30T13:15:09.613

我意识到这是一个老问题，但这里的大多数答案似乎都没有抓住重点，关注是否存在提供正式接口的定制 octave 包，而不是首先是否可以从 octave 中执行 sqlite3 查询地方。

因此，我想我会为任何试图通过 octave*访问sqlite3 的人提供一个实用的答案；*这样做实际上是微不足道的，我自己已经这样做了很多次。

只需对命令进行适当的系统调用`sqlite3`（显然这意味着您的系统上安装了 sqlite3 客户端）。我发现最方便的方法是使用

> sqlite3 database.sqlite < FileContainingQuery > OutputToFile

调用 sqlite3 的语法。

任何修改输出的 sqlite3 命令都可以与查询一起传递，以获得所需格式的输出。

例如，这是一个从表格中绘制频率图表的玩具示例，该图表以 csv 格式返回适当的分数和计数（从输出中删除标题和运行时统计信息）。

```
 pkg load io   % required for csv2cell (used to collect results)

% Define database and Query
  Database = '/absolute/path/to/database.sqlite';

  Query = strcat(
  % Options to sqlite3 modifying output format:
    ".timer off            \n",   % Prevents runtime stats printed at end of query
    ".headers off          \n",   % If you just want the output without headers
    ".mode csv             \n",   % Export as csv; use csv2cell to collect results
  % actual query
    "SELECT Scores, Counts \n",
    "FROM Data;            \n"    % (Don't forget the semicolon!)
  );   

% Create temporary files to hold query and results
  QueryFile   = tempname()  ;   QueryFId = fopen( QueryFile, 'w' );
  fprintf( QueryFId, Query );   fclose(  QueryFId);
  ResultsFile = tempname();

% Run query
  Cmd = sprintf( 'sqlite3 "%s" < "%s" > "%s"',  Database, QueryFile, ResultsFile );
  [Status, Output] = system( Cmd );

% Confirm query succeeded and if so collect Results
% in a cell array and clean up temp files.
  if Status != 0,     delete( QueryFile, ResultsFile ); error("Query Failed");
  else,   Results = csv2cell( ResultsFile ); delete( QueryFile, ResultsFile );
  end

% Process Results
  Results  = cell2mat( Results );
  Scores   = Results(:, 1);   Counts  = Results(:, 2);
  BarChart = bar( Scores, Counts, 0.7 ); % ... etc 
```

等等，瞧

![](../Images/8c445ab619d02f5d3e1b57306479914f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:35:55.670

正如你已经发现的，新版本的数据库包（2.0.0）只支持postgreSQL。然而，旧版本的包也支持 MySQL 和 SQLite（最后一个版本是[1.0.4 版](http://sourceforge.net/projects/octave/files/Octave%20Forge%20Packages/R2009-06-07/database-1.0.4.tar.gz/download)）。

它的问题是旧的数据库包不适用于新的 Octave 和 SWIG 版本（我认为数据库包工作的 Octave 的最后一个版本是 3.2.4）。除了缺乏维护者（包被放弃了近 4 年），它对 SWIG 的使用正成为一个问题，因为它使其他开发人员更难介入。不过，一些用户试图修复它，并且已经完成了一些修复（但从未发布）。有关使其与 Octave 3.6.2 中的 SQLite 一起使用的一些报告，请参阅数据库包上的[错误 #38098](https://savannah.gnu.org/bugs/?38098)和[Octave 的 wiki 页面。](http://wiki.octave.org/Database_package)

新版本的包是对包的完全重启。如果您可以为 SQLite 绑定的开发做出贡献，那就太好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T16:55:23.297

查看此链接[http://octave.1599824.n4.nabble.com/Octave-and-databases-td2402806.html](http://octave.1599824.n4.nabble.com/Octave-and-databases-td2402806.html)，它对 MySQL 提出了同样的问题。

特别是 Martin Helm 的这个回复指出了使用 JDBC 连接到任何支持 JDBC 的数据库的方法——“看看 octave java 包 (octave-forge) 中的 java 绑定，它得到了维护并且可以工作。Java 非常强大并且易于数据库处理. 使用它和 mysql 的 jdbc 驱动程序连接到 mysql (或使用适当的 jdbc friver 你可以想象的一切). 这就是我在使用八度音程的 db 查询时所做的. 比调用更容易和更少间接脚本和解析数据库查询的输出。

据我所知，数据库包不知何故坏了（至少我永远无法使用它）。"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T14:57:57.893

根据[Octave-Forge](http://octave.sourceforge.net/database/index.html)的说法，答案是否定的。

> SQL 数据库的接口，目前只有使用 libpq 的 postgresql。

但是您可以使用 Octave C++ API 和 SQLite C API 编写自己的数据库包

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-03T17:17:43.687

我知道这个线程已经很老了，但是对于其他正在寻找类似解决方案的人来说，这个项目似乎提供了它。

[https://github.com/markuman/go-sqlite](https://github.com/markuman/go-sqlite)

# php - 如果未在管理面板上登录，需要有关如何重定向用户的指导

> ID：14922187
> 
> 赞同：0
> 
> 时间：2013-02-17T14:37:26.030
> 
> 标签：php, session, login, sessionid, login-script

目前我有一个非常基本的管理员登录系统。我可以通过我的 admin_login.php 页面登录，该页面有一个来自我的 login.php 页面的脚本，我可以从 admin_control_panel.php 更新记录。我主要担心的是任何人都可以直接在地址栏中输入这些 URL 并绕过登录过程。

目前我的代码不是基于安全性的（我只是想让我的所有基本功能和特性启动并运行，然后我将专注于安全性）。

我知道我必须使用会话来跟踪用户是否登录，但我对我将在哪里实现这些会话感到有点困惑。

我的问题是：我在哪些页面中包含代码？，我在页面的哪个位置包含这些会话？我在这些文件中包含什么？

我想要的是能够在用户未登录的情况下将用户重定向回登录页面。

admin_login.php

```
<?php 

$dbhost = 'x';
$dbuser = 'x';
$dbpass = 'x';

$con = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $con )
{
  die('Could not connect: ' . mysql_error());
}
mysql_select_db('x');

?>

<html>

<head>
<link rel="stylesheet" type="text/css" href="css/master.css">
</head>

<body>

<form method="post" action="login.php">

User:<input name="username" type="text">
Pass:<input name="password" type="password">

<input name="submit" type="submit" value="Submit">

</form>

</body>

</html> 
```

登录.php

```
<?php

$dbhost = 'x';
$dbuser = 'x';
$dbpass = 'x';

$con = mysql_connect($dbhost, $dbuser, $dbpass);
if(! $con )
{
  die('Could not connect: ' . mysql_error());
}
mysql_select_db('x', $con);

$query = "SELECT username FROM members ".
         "WHERE username=\"$_POST[username]\" ".
         "AND password = \"$_POST[password]\"";

$result = mysql_query($query, $con);         

mysql_data_seek($result, 0);

if (mysql_num_rows($result) == 0)
    header("Location: admin_login.php");
 else   
    header("Location: admin_control_panel.php");
?> 
```

admin_control_panel.php

```
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 3</title>
</head>

<body>

<?php

include('./upload.html');

?>

</body>

</html> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:02:18.663

最好的方法是使用`sessions`. 在 login.php 中做这样的事情

```
if (mysql_num_rows($result) == 0) {
    header("Location: admin_login.php");
} else   {
    header("Location: admin_control_panel.php");
    session_start();
    $_SESSION['user'] = $_POST['username'];
} 
```

现在在文件顶部的 admin_control_panel.php 中，只需添加此 php 代码以检查 $_SESSION['user'] 是否存在。

```
<?php
if (! isset($_SESSION['user'])) {
  header("Location: admin_login.php");
}
?> 
```

基本上，如果登录正确，您将使用此代码创建与用户数据的会话。如果不是，他将默认被重定向到登录页面。现在当有人试图访问 admin_control_panel 页面时，我们将首先检查是否设置了会话。如果是真的，他可以访问该页面，如果不是，他将被重定向到登录。

有关会话的更多信息： [PHP.net 会话手册](http://php.net/manual/en/features.sessions.php)和[w3schools.com 会话手册](http://www.w3schools.com/php/php_sessions.asp)

*笔记。要注销，您必须销毁会话，才能使用该`session_destroy();`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:45:56.907

包括`session_start();`在你的脚本的顶部，然后你会做这样的事情：

```
if (mysql_num_rows($result) == 0){
    header("Location: admin_login.php");
} else {
    $_SESSION['permission'] = 'admin';   
    header("Location: admin_control_panel.php");
} 
```

然后，您需要实现一个功能来检查管理员是否已登录。

```
function verifyAdmin() {
   if(!isset($_SESSION['permission']) || $_SESSION['permission'] != 'admin'){
        header("Location: admin_login.php");
    }
} 
```

现在，在每个管理页面的顶部添加`verifyAdmin();`. 请记住将`session_start();`使用会话添加到任何页面的顶部。

# plone - 我的 Plone 默认页面未指向我的域

> ID：14922195
> 
> 赞同：2
> 
> 时间：2013-02-17T14:37:50.640
> 
> 标签：plone

我刚刚安装了 Plone，但无法理解如何让我的 Plone 站点默认为我在 Ubuntu 中的索引页面。我曾尝试使用 VMI 和 virtual_hosting 怪物，但它令人困惑。

谁能解释最简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T14:42:40.590

使用[rewriterule 女巫生成](http://betabug.ch/zope/witch)Apache 重写规则配置。

设置您的[Apache 服务器](https://help.ubuntu.com/12.10/serverguide/httpd.html)以使用这样的重写规则来指向您的后端 Plone 服务器。

有关详细信息，请参阅Plone.org 上的[Apache 知识库文章 Plone 和 Zope 。](http://plone.org/documentation/kb/plone-apache)

# android - 带有操作栏夏洛克的底部 ContextMenu

> ID：14922205
> 
> 赞同：2
> 
> 时间：2013-02-17T14:38:50.890
> 
> 标签：android, android-layout

我在我的项目中使用 ActionBar Sherlock + 滑动菜单。在一项活动中，我有一个 ListView。我希望 listItem 上下文菜单在选择项目时出现在底部，就像在 gmail 应用程序中一样。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:08:46.897

你是说这里的4号？

![在此处输入图像描述](../Images/d112f496467043f72f884f59984fab19.png)

那是一个拆分操作栏。

> 要启用拆分操作栏，只需添加 `uiOptions="splitActionBarWhenNarrow"`到您的`<activity>`或 `<application>`清单元素。

（来自[文档](http://developer.android.com/guide/topics/ui/actionbar.html#SplitBar)）

![](../Images/34c6120fefbc0ab831426aaeee83e051.png)

要了解这一点，请访问developer.android.com 上的开发者指南上的[上下文操作模式部分](http://developer.android.com/guide/topics/ui/menus.html#CAB)

**编辑：**

`splitActionBarWhenNarrow`已被[弃用](http://commonsware.com/blog/2014/11/18/android-5p0-deprecation-splitactionbarwhennarrow.html)。

# php - 我可以将 VARCHAR(32) 用于 md5() 值吗？

> ID：14922208
> 
> 赞同：19
> 
> 时间：2013-02-17T14:39:04.117
> 
> 标签：php, mysql, md5

我可以在 MySQL 数据库中使用长度为 32 且类型为 VARCHAR 的字段来获取 md5() 值吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-17T14:39:43.703

由于 md5 总是产生固定长度的结果，最好使用 CHAR(32)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T02:40:03.693

最好`CHAR(32)`与`latin1`字符集一起使用，或者`BINARY(16)`如果您想节省更多空间。

```
CREATE TABLE ... (
    ...
    md5 CHAR(32) CHARACTER SET 'latin1' NOT NULL
    ... 
```

MySQL`utf8mb4`从 5.7 开始用作默认字符集，并且`CHAR(32)`需要`utf8mb4`128 个字节，比`VARCHAR(32)`.

# c# - 向左更改c#表单应用程序宽度

> ID：14922209
> 
> 赞同：2
> 
> 时间：2013-02-17T14:39:04.440
> 
> 标签：c#, winforms

所以我想通过单击按钮来更改表单大小，还希望它看起来像一个小动画，所以这段代码可以帮助我

```
while (desiredWidht < this.Width)
{
    this.Width += 5;                    
    Thread.Sleep(4);
} 
```

但有一个问题。此代码以正确的方向扩展表单。我怎么能在左方向做同样的事情..我尝试扩展表单然后将其向左移动并将所有控件向右移动但问题是在表单达到某些宽度后控件由于某种原因消失了并且当扩展方法完成时他们又出现了。我无法弄清楚是什么问题。我这样做的正确方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:20:19.407

```
const int MAX_STEP = 5;

while (Width < desiredWidth)
{
    int step = Math.Min(MAX_STEP, desiredWidth - Width);
    SetBounds(Left - step, Top, Width + step, Height);
    Refresh();
    Application.DoEvents();
    Thread.Sleep(4);
} 
```

在这里，我做了几件事，首先是定义最大步长并设置步长，以便您获得所需的确切宽度。与过度回答相比，这里的最大变化是 SetBounds 它将自动设置所有属性，我的示例程序中没有其他任何事情发生，所以我看到右侧的 gitter 回来并在我设置宽度时形成左边（以前在测试解决方案时）。您可能在其他一些过程中遇到了这个问题，因此您需要引发事件 Application.DoEvents()，就像@banana 提到的那样，您可以执行 Refresh()，这应该会被自动调用，但再次调用它应该不会有什么坏处. 另外，我在desiredWidth 中正确拼写了Width，这让我发疯了！“this.Property”或“this.Method”是“this”的冗余限定符

**注意，查看 ClientSize.Width 因为它通常是人们想要的，您可能还想查看 SetDesktopBounds

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:15:51.747

尝试 -

```
this.Refresh(); 
```

移动控件后。

# php - php 的包含选项是否会进行部分页面刷新？

> ID：14922212
> 
> 赞同：-2
> 
> 时间：2013-02-17T14:39:30.197
> 
> 标签：php, ajax, include

我已经开始在本地使用 PHP，并注意到如果我在主`index.php`文件中使用包含文件，当我单击将包含新/更新的包含文件的按钮/链接时，整个页面不会刷新。我的问题是，php 的 include 选项是否像 ajax 并且只刷新部分页面？如果是这样，我最好只使用普通的 php 还是应该坚持使用 ajax？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:43:06.437

PHP 代码是在服务器端解释的，因此它不像客户端 JavaScript 那样使用 AJAX。单击链接将请求一个新页面，PHP 将解释请求的文件并返回输出。您可能不会遇到刷新时间，因为您在本地工作。如果您查看 Chrome 开发人员工具的网络选项卡，您会看到发生了刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:44:07.170

不，只有 AJAX 进行部分页面刷新。因为您在 localhost 中编程并且在多个页面中包含相同的文件，所以您不会注意到加载时间，并且看起来没有任何变化（在浏览器上）。

包含函数只是在调用它的地方包含一个 php 文件的内容，所有 PHP 代码都在服务器端完成，因此内容包含在服务器端并将其全部发送到客户端（无 ajax）。

因此，坚持使用 ajax，因为它是进行部分刷新的唯一方法。

# android - Android Sqlite 数据库设置问题

> ID：14922213
> 
> 赞同：1
> 
> 时间：2013-02-17T14:39:36.093
> 
> 标签：android, eclipse, android-sqlite

嘿伙计们正在制作一个简单的应用程序，其中将两个帐户手动插入表中以进行登录身份验证，然后根据帐户类型进行一些工作。在设置 Sqlite 函数时遇到问题。我有一个包 com.example.emp_management，其中有 2 个类 MainActivity.java 和 Database_Wrap.java。Database_Wrap.java 的代码如下：

```
package com.example.emp_management;

import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class Database_Wrap            //hotornot
{
public static final String Database_name = "Employee_Managament_System";
public Sql_Lite_Work OurHelper;
public  final Context OurContext;
public SQLiteDatabase ourDatabase;

public static class Sql_Lite_Work extends SQLiteOpenHelper
{   //dbhelper = sql_lite_work

    public Sql_Lite_Work(Context context) 
    {
        super(context,Database_name , null, 1);
        // TODO Auto-generated constructor stub
    }
    @Override
    public void onCreate(SQLiteDatabase db)
    {
        // TODO Auto-generated method stub

        db.execSQL("CREATE TABLE" + "Login_Authentication"+ "(" +
               "ID" + "INTEGER PRIMARY KEY AUTOINCREMENT, " +
                "UserName" + "TEXT NOT NULL," +
               "Password" + "TEXT NOT NULL);"                   
                );

    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
        // TODO Auto-generated method stub

        db.execSQL("DROP TABLE IF EXISTS " + "Login_Authentication");
        onCreate(db);
    }

}
public Database_Wrap(Context c)
{
    OurContext = c;
}
public Database_Wrap Open()
{
    OurHelper = new Sql_Lite_Work(OurContext);
    ourDatabase = OurHelper.getWritableDatabase();
    return this;
}
public void close()
{
    OurHelper.close();
}
} 
```

现在我想做的下一件事是在我的主要活动中我想做类似的事情：

```
Database_Wrap entry= new Database_Wrap(MainActivity.this); 
```

然后访问 Database_Wrap 中编写的函数以打开数据库并将值写入表中以供管理员和其他用户使用：

```
entry.Open(); 
```

但在 Eclipse 中，我无法在进入时访问打开功能。我不知道这里有什么问题。我是初学者。可能是我忘记了什么。请看一下谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:25:26.910

Java 区分大小写。尝试：

```
Database_Wrap entry= new Database_Wrap(MainActivity.this); 
```

你的两个`w`s`Wrap`都是小写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:12:29.337

我只是将您的代码放入一个小型测试项目中。它编译得很好。然后我在同一个项目的一个活动中添加了这段代码：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Database_Wrap entry= new Database_Wrap(MainActivity.this);
    entry.Open();
} 
```

那也很好用。

从代码的外观来看（完全没有问题，只是这种风格让经验丰富的 Java 开发人员畏缩），你是 Java 新手；也可能日食。Eclipse 很奇怪，并且一直在做一些时髦的事情。也许您刚刚遇到了一些短期异常。

# java - Android：切换到片段内的新片段？

> ID：14922216
> 
> 赞同：0
> 
> 时间：2013-02-17T14:39:54.237
> 
> 标签：java, android, android-fragments, android-activity

我有一个带有 a 的 Android 应用程序，`MainActivity`我这样做是为了在以下位置创建导航选项卡`onCreate`：

```
ActionBar myActionBar = getActionBar();
myActionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
Tab tab = myActionBar.newTab().setText("FirstTab").setIcon(R.drawable.first_tab)
    .setTabListener(new TabListener<FirstTabFragment>(this, "FirstTab", 
    FirstTabFragment.class));
... more tabs ... 
```

，`TabListener`我从 developer.android.com 使用这个： [http://developer.android.com/reference/android/app/ActionBar.html#newTab()](http://developer.android.com/reference/android/app/ActionBar.html#newTab())：

```
public static class TabListener<T extends Fragment> implements ActionBar.TabListener {
    ...
    public TabListener(Activity activity, String tag, Class<T> clz) { ... }
} 
```

因此，如果用户单击第一个选项卡，我的片段`FirstTabFragment`将被调用并执行 `onCreateView`。

我的问题是，如果用户现在单击一个按钮，我会执行以下操作，但我不知道如何切换到下一个片段：

```
private OnClickListener firstTabListener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        if (v == button1) {
            Intent intent = new Intent(???, MyDetailsFragment.class);
            startActivity(intent);
        } else if (...) {
            ...
        }
    }
}; 
```

应该显示所选项目的`MyDetailsFragment`详细信息（单击按钮），因此我想深入了解详细信息片段并希望为新片段提供一些额外的数据，以便详细信息片段知道它应该显示哪个所选项目的哪些详细信息。选定的选项卡不应更改，并且后退按钮应返回到 FirstTabFragment 页面。

我想我应该开始一个新的片段，但这是不可能的，方法的名称`startActivity`告诉我我开始一个新的活动而不是片段。那么，我必须使用`MainActivity`并将新片段放入其中吗？（我不使用 android-support-v4.jar 库，因为我只针对 Android 4 设备）

我怎么解决这个问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:41:22.097

从片段中，调用宿主活动的方法，告诉它按钮单击事件。然后该活动可以做任何适当的事情。

就个人而言，我认为在绝大多数情况下完全替换选项卡的内容是不合适的，但当然欢迎您这样做。

# c# - 单列中的多行

> ID：14922218
> 
> 赞同：2
> 
> 时间：2013-02-17T14:39:59.947
> 
> 标签：c#, sql, postgresql

我使用 POSTGRESQL 9.1.3 作为后端，使用 VS2010 c# 作为前端。我有两个表如下：

**财产**

```
Property_id   Property_details
------------------------------
1             abc
2             xyz 
```

**索赔人**

```
Claimer_ID  First_name  Last_Name Property_id
---------------------------------------------
1           aaaa        bbbbb       1
2           cccc        ddddd       2
3           eeee        fffff       1
4           gggg        hhhhh       2 
```

我想要以下输出

```
Property_id   Claimers
------------------------------------
1             aaa bbbb,eeee ffff
2             ccc dddd,gggg hhhh
3             (may be more than 2 claimers) 
```

这里的 claimer 是一个单列，它可能包含 1 个或多个（最多 50 个）claimer 名称

我该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:45:11.463

```
SELECT  a."Property_id",
        array_agg(b."First_name" || ' ' || b."Last_Name") AS "Claimers"
FROM    Property a
        INNER JOIN Claimers b
            ON a."Property_id" = b."Property_id"
GROUP BY a."Property_id" 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!1/e7375/5)
*   [array_agg](http://www.postgresql.org/docs/9.1/static/functions-aggregate.html)

# jquery - jQuery：如何让 DIV 滑出屏幕而另一个滑入？

> ID：14922221
> 
> 赞同：2
> 
> 时间：2013-02-17T14:40:09.720
> 
> 标签：jquery, css, jquery-mobile, slide, css-animations

我已经构建了一个 Web 应用程序，它使用 CSS @media 查询缩小到适合移动设备的版本。

我想要一个按钮来在显示 DIV 的两个主要内容之间切换。

当页面加载时，使用@media 查询，另一个通过隐藏`display: none;`

单击按钮时，我希望它显示并隐藏可见的按钮，我目前已经这样做了。

但我想为这个过程制作动画，我希望它可以在移动设备上顺利运行。

但我无法弄清楚**jquerymobile**是如何做到这一点的，它工作得很好。

我需要做什么才能让一个面板（div）从左侧滑出，另一个从右侧滑入，就像使用非移动 jquery 的 mobilejquery 一样？

示例： http: [//m.stanford.edu/](http://m.stanford.edu/) 这里当一个列表项被点击时，它会滑出而另一个滑入。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T19:22:17.160

可以帮助您使用 HTML5/css/javascript 进行硬件加速动画的主要功能是[-webkit-transform: translate3d](https://www.webkit.org/blog/386/3d-transforms/) *css*规则，该规则将幻灯片的水平 (x) 位置向左或向右转换：

**translate3d(x, y, z), translateZ(z)**

*在 x、y 和 z 中移动元素，只在 z 中移动元素。正 z 朝向观察者。与 x 和 y 不同，z 值不能是百分比。*

按照这个优秀的[教程](http://mobile.smashingmagazine.com/2012/06/21/play-with-hardware-accelerated-css/)，向您展示如何使用上述功能和 javascript 在任何移动设备中滑动全屏 div。

有关使用 html5 进行硬件加速的进一步讨论，请参阅[本文](http://www.html5rocks.com/en/tutorials/speed/html5/)。

# android - 多个活动通用的选项菜单项

> ID：14922228
> 
> 赞同：3
> 
> 时间：2013-02-17T14:41:13.193
> 
> 标签：android, android-optionsmenu

Android[设计指南](http://developer.android.com/design/patterns/help.html)说，Help 应该始终放在溢出菜单的最后一项（它不应该出现在 ActionBar 中），并且应该出现在每个 Activity 中，这样用户就不必寻找它。类似的方法也被推荐用于设置。

但是，我想知道确保我的应用程序中的所有活动都处理这些项目而没有大量代码重复的最佳方法是什么？将这些常用项手动放入每个 XML 菜单文件中，然后在每个活动类中手动处理对它们中的每一个的点击只是无稽之谈。

由于我已经从一个公共基类（它提供了一些方便的方法）扩展了我的所有活动，我想出了这种方法：在类中，我定义了一个子类可以覆盖`BaseActivity`的空方法（*模板方法模式*样式）将他们的特定项目添加到菜单中。此方法在开始时调用，然后基类在菜单末尾添加常用项（设置和帮助）。`initOptionsMenu()`*`onCreateOptionsMenu()`*

 *该`onOptionsItemSelected()`方法遵循标准模式 - 它打开项目 ID，在默认情况下，它将处理传递给超类。同样，基类处理设置和帮助案例。

```
public class BaseActivity extends Activity {

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        initOptionsMenu(menu);
        menu.add(Menu.NONE, R.id.menu_settings, Menu.NONE, R.string.menu_help);
        menu.add(Menu.NONE, R.id.menu_help, Menu.NONE, R.string.menu_help);
        return true;
    }

    protected void initOptionsMenu(Menu menu) {}

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case R.id.menu_settings:
                startActivity(new Intent(this, SettingsActivity.class));
                return true;
            case R.id.menu_help:
                startActivity(new Intent(this, HelpActivity.class));
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

现在，每当我创建一个新活动时，我都会扩展`BaseActivity`. 如果派生活动为选项菜单提供了更多项目，我不会覆盖标准`onOptionsItemSelected()`，而是覆盖自定义 initOptionsMenu() 方法并在那里填充菜单。在`onOptionsItemSelected()`中，我只需要处理特定于此活动的项目的案例，常见的将由`super`调用处理。

```
public class FooActivity extends BaseActivity {

    @Override
    protected void initOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.foo, menu);
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            // cases for items in R.menu.foo

            default:
                return super.onOptionsItemSelected(item);
        }
    }
} 
```

**这种模式合理吗？你能想出更好的方法吗？请分享你的想法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:57:42.337

我可能不会使用`initOptionsMenu`方法。我会`super.onCreateOptionsMenu()`在从具体实现中添加我的菜单后调用。我`BaseActivity`将在以下位置添加设置和帮助菜单`BaseActivity`：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, R.id.menu_settings, Menu.NONE, R.string.menu_help);
    menu.add(Menu.NONE, R.id.menu_help, Menu.NONE, R.string.menu_help);
    return true;
} 
```

并在`MainActivity`扩展中`BaseActivity`：

```
 @Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add(Menu.NONE, R.id.menu_create_dummy, Menu.NONE, R.string.menu_dummy);
    menu.add(Menu.NONE, R.id.menu_delete_dummy, Menu.NONE, R.string.menu_dummy);
    return super.onCreateOptionMenu(menu);
} 
```*

# c# - 将 Moles 用于具有 const 成员的类时出现 MissingFieldException

> ID：14922234
> 
> 赞同：2
> 
> 时间：2013-02-17T14:41:36.440
> 
> 标签：c#, unit-testing, moles

我们正在使用 Moles 将新单位与我们无法修改的旧机制隔离开来。当此类遗留类包含 const 成员时，每个 const 成员都会收到一长串 MissingFieldException。

是什么原因造成的？如何在调试会话期间跳过这些？（即使清除所有异常类型“中断”，我也会得到它）

# bnf - 如何将 BNF 转换为 EBNF

> ID：14922242
> 
> 赞同：7
> 
> 时间：2013-02-17T14:42:43.483
> 
> 标签：bnf, ebnf

如何将此 BNF 转换为 EBNF？

```
<vardec> ::= var <vardeclist>;
<vardeclist> ::= <varandtype> {;<varandtype>}
<varandtype> ::= <ident> {,<ident>} : <typespec>
<ident> ::= <letter> {<idchar>}
<idchar> ::= <letter> | <digit> | _ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-17T15:43:29.843

EBNF 或[Extended Backus-Naur Form](http://en.wikipedia.org/wiki/Extended_Backus%E2%80%93Naur_Form)是[ISO 14977:1996](http://www.iso.ch/cate/d26153.html)，可从 ISO 免费获得 PDF ^*。它没有被计算机语言标准广泛使用。还有[一篇论文](http://www.cl.cam.ac.uk/~mgk25/iso-14977-paper.pdf)对其进行了描述，该论文包含这张总结 EBNF 表示法的表格。

```
 Table 1: Extended BNF
Extended BNF    Operator  Meaning
-------------------------------------------------------------
unquoted words            Non-terminal symbol
" ... "                   Terminal symbol
' ... '                   Terminal symbol
( ... )                   Brackets
[ ... ]                   Optional symbols
{ ... }                   Symbols repeated zero or more times
{ ... }-                  Symbols repeated one or more times†
=               in        Defining symbol
;               post      Rule terminator
|               in        Alternative
,               in        Concatenation
-               in        Except
*               in        Occurrences of
(* ... *)                 Comment
? ... ?                   Special sequence 
```

运算符与前面的`*`（无符号）整数一起使用；它似乎不允许可变数量的重复 - 例如在初始字符后 1-15 个字符使标识符最长为 16 个字符。这个列表

在标准中，左括号`(`称为*开始组符号*，右括号`)`称为*结束组符号*；左方括号`[`是*开始选项符号*，右方括号是*结束选项符号*；左大括号`{`是*开始重复符号*，右大括号`}`是*结束重复符号*。单引号`'`称为*第一个引号*，双引号称为第二`"`个*引号*。

^(* 是的，免费——尽管如果您愿意，您也可以支付 74 瑞士法郎。查看包含收费项目的框下的注释。)

* * *

该问题旨在将此“BNF”转换为EBNF：

```
<vardec> ::= var <vardeclist>;
<vardeclist> ::= <varandtype> {;<varandtype>}
<varandtype> ::= <ident> {,<ident>} : <typespec>
<ident> ::= <letter> {<idchar>}
<idchar> ::= <letter> | <digit> | _ 
```

BNF 没有正式定义，因此我们必须对它的含义进行一些（简单的）猜测。翻译是常规的（如果 BNF 被正式定义，它可能是机械的）：

```
vardec     = 'var', vardeclist, ';';
vardeclist = varandtype, { ';', varandtype };
varandtype = ident, { ',', ident }, ':', typespec;
ident      = letter, { idchar };
idchar     = letter | digit | '_'; 
```

必须去除非端子周围的尖括号；定义符号`::=`替换为`=`; 终端如`;`和`_`用引号括起来；连接用`,`;明确标记 并且每条规则都以`;`. 原始中的分组和替代操作恰好与标准符号一致。请注意，与逗号的显式连接意味着多词非终结符是明确的。

* * *

^(†</sup> 对标准本身的随意研究表明，`{...}-`符号不是标准的一部分，只是论文的一部分。但是，正如[jmmut](https://stackoverflow.com/users/2375586/jmmut)在[评论](https://stackoverflow.com/questions/14922242/how-to-convert-bnf-to-ebnf/14922839?noredirect=1#comment77293269_14922839)中指出的那样，该标准确实定义了以下含义`{…}-`：)

> §5.8 句法术语
> 
> …</p>
> 
> 当一个句法项是一个句法因子后跟一个除符号后跟一个句法异常时，它表示满足这两个条件的任何符号序列：
> 
> a) 它是由句法因子表示的符号序列，
> 
> b) 它不是句法异常表示的符号序列。
> 
> …</p>
> 
> 注意 -`{ "A" } -`表示一个或多个 A 的序列，因为它是一个带有空句法异常的句法项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:46:54.070

删除尖括号并将所有终端放在引号中：

```
vardec ::= "var" vardeclist;
vardeclist ::= varandtype { ";" varandtype }
varandtype ::= ident { "," ident } ":" typespec
ident ::= letter { idchar }
idchar ::= letter | digit | "_" 
```

# javascript - 如何使用纯 CSS 在 HTML 中获取树

> ID：14922247
> 
> 赞同：15
> 
> 时间：2013-02-17T14:43:28.903
> 
> 标签：javascript, html, css, tree

我正在尝试遵循本[教程](http://odyniec.net/articles/turning-lists-into-trees/)，这是[我](https://github.com/gurjeet/CSSTree)到目前为止的代码。

本教程的结尾显示分支中的最后一个节点后面不会有任何竖线。但我无法让它以这种方式工作！如果我做错了什么，或者教程可能遗漏了什么，有什么想法！

我什至尝试了教程中所示的 :last-child 伪类，但得到了相同的结果。

![错误的 CSS 树](../Images/569aacf23d8120822cec7213ef6e2ce8.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T15:11:42.023

这是仅使用伪元素和边框的尝试：

```
ul, li{     
    position: relative;    
}

/* chop off overflowing lines */
ul{
    overflow: hidden;
}

li::before, li::after{
    content: '';
    position: absolute;
    left: 0;
}

/* horizontal line on inner list items */
li::before{
    border-top: 1px solid #333;
    top: 10px;
    width: 10px;
    height: 0;
}

/* vertical line on list items */    
li::after{
    border-left: 1px solid #333;
    height: 100%;
    width: 0px;
    top: -10px;
}

/* lower line on list items from the first level 
   because they don't have parents */
.tree > li::after{
    top: 10px;
}

/* hide line from the last of the first level list items */
.tree > li:last-child::after{
    display:none;
} 
```

[演示](http://dabblet.com/gist/4972250)（已编辑）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T14:57:08.713

> 遗憾的是，伪类是在即将到来的 CSS3 规范中定义的，目前很少有 Web 浏览器支持它。

它写在教程的最后。也许这就是它不起作用的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T15:06:11.663

我相信我已经修复了它：[https ://github.com/gurjeet/CSSTree/pull/1](https://github.com/gurjeet/CSSTree/pull/1)

我修改了 CSS 以删除背景并将边距更改为填充。

```
ul.tree, ul.tree ul {
    list-style-type: none;
    margin:0;
    padding:0;
}

ul.tree ul {
    padding-left: 1em;
    background:  url(vline.png) repeat-y;
}

ul.tree li {
    margin:0;
    padding: 0 1.2em;
    line-height: 20px;
    background: url(node.png) no-repeat;
    color: #369;
    font-weight: bold;
}

/* The #fff color background is to hide the previous background image*/
ul.tree li.last {
    background: #fff url(lastnode.png) no-repeat;
}

ul.tree ul:last-child {
    background: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-17T20:10:49.893

谢谢你们，有用的答案让我阅读了更多内容，最后我阅读 [了这篇文章](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)并删除了对 JavaScript 的所有依赖，并使用`nth-last-of-type`伪选择器将特殊背景应用于列表中的最后 li 项目（忽略 ul出现在最后一个 li 之后）。

最终代码在[这里](https://github.com/gurjeet/CSSTree/blob/281c2c17c44e4803cf68d5f7c8b7bc7c762e11d5/CSSTree.html)。我将接受我自己的答案，除非有人指出它有问题。（我认为现阶段与旧浏览器的兼容性对我来说并不重要。）

感谢@Aram 的回答。@OneTrickPony，你的回答超出了这个菜鸟的头脑:) 我相信它做的是对的，但对我来说有点太复杂了。

```
<style type="text/css">
/* ul[class=tree] and every ul under it loses all alignment, and bullet
 * style.
 */
ul.tree, ul.tree ul {
    list-style-type: none;
    margin:0;
    padding:0;
}

/* Every ul under ul[class=tree] gets an indent of 1em, and a background
 * image (vertical line) applied to all nodes under it (repeat-y)
 */
ul.tree ul {
    padding-left: 1em;
    background:  url(vline.png) repeat-y;
}

/* ... except the last ul child in every ul; so no vertical lines for
 * the children of the last ul
  */
ul.tree ul:last-child {
    background: none;
}

/* Every li under ul[class=tree]
 *  - gets styling to make it bold and blue, and indented.
 *  - gets a background image (tilted T), to denote that its a node
 *  - sets height to match the height of background image
 */
ul.tree li {
    margin:0;
    padding: 0 1.2em;
    background: url(node.png) no-repeat;
    line-height: 20px;
    color: #369;
    font-weight: bold;
}

/*  The last li gets a different background image to denote it as the
 *  end of branch
 */
ul.tree li:nth-last-of-type(1) {
    background: url(lastnode.png) no-repeat;
} 
```

# jquery - 使用带有边框属性的jQuery动画

> ID：14922248
> 
> 赞同：0
> 
> 时间：2013-02-17T14:43:28.840
> 
> 标签：jquery

```
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!--<SCRIPT type="text/javascript" src="jquery-1.8.3.min.js"></SCRIPT>-->
        <SCRIPT type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></SCRIPT>
        <style type="text/css">
            #content {
                border:0px solid #ff9999;
                width:0px;
                height:0px;
                padding:3px;
            }
        </style>
    </head>

    <body>
        <input id="btn" type="button" value="Animate"/>
        <div id="content"></div>
    </body>
    <script>
        $(document).ready(function(){
            $('#btn').click(function(){
                $('#content')
                .animate({
                    "borderLeftWidth":"1px",
                    "height":"400px"

                },1000)
                .animate({
                    "borderBottomWidth":"1px",
                    "width":"400px"
                },1000)
                .animate({"borderRightWidth":"1px"
                },1000)
                .animate({"borderTopWidth":"1px"
                },1000)
            });
        });
    </script>
</html> 
```

我正在尝试通过使用 jQuery 的动画功能来做一些有用的事情。因此，如果您运行我的代码，您会看到border-left 和border-bottom 是连续生成的，因为我也在增加宽度和高度。但是在那个border-right和border-top之后就会弹出。我希望它们动画为左边框和下边框。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:46:28.577

您正在制作从零像素到一像素的动画，并且要获得动画，必须介于两者之间。当从无像素变为 1 像素时，您如何期望屏幕显示 0.3 像素？这就是为什么边框刚刚出现的原因，从零到一只是一步，你不能真正为它设置动画！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-02T11:03:52.610

认为我已经为您找到了解决方案。制作相对位置的框，然后将四个 div 放在“绝对”中，如下所示：

**html:**

```
<div id="my_contents">
    <div id="border_top"></div>
    <div id="border_right"></div>
    <div id="border_bottom"></div>
    <div id="border_left"></div>
</div> 
```

* * *

**CSS：**

```
#my_contents {
    position: relative;
    width: 200px
    height: 200px
}

#border_top {
    position: absolute;
    top: 0;
    left: 0;
    width: 0;
    height: 1px;
    border-top: 1px solid #000;
}

#border_right {
    position: absolute;
    top: 0;
    right: 0;
    width: 1px;
    height: 0;
    border-right: 1px solid #000;
}

#border_bottom {
    position: absolute;
    bottom: 0px;
    left: 200px;
    width: 200px;
    height: 1px;
    border-bottom: 1px solid #000;
}

#border_left {
    position: absolute;
    left: 0px;
    top: 200px;
    width: 1px;
    height: 200px;
    border-left: 1px solid #000;
} 
```

**查询：**

```
$('#border_top').animate({'width':'200px'}, 1200);
$('#border_right').delay(1200).animate({'height':'200px'}, 1200);
$('#border_bottom').delay(1800).animate({'left':'0'}, 1200);
$('#border_left').delay(2400).animate({'top':'0'}, 1200); 
```

希望这就是你的意思:)

# objective-c - NSWindowController 和 ARC 的奇怪问题

> ID：14922249
> 
> 赞同：1
> 
> 时间：2013-02-17T14:43:33.293
> 
> 标签：objective-c, cocoa, automatic-ref-counting, nswindow, nswindowcontroller

**好的，这是我面临的一个奇怪的情况：**

*   我有一个`NSWindowController`子类，一个窗口`myMainWindow.xib`和这样的`AppDelegate.m`调用`NSWindowController`：

    ```
    myWindowController* controller = [[myWindowController alloc] initWithWindowNibName:@"myMainWindow"];
    [controller showWindow:self]; 
    ```

**现在是：**

*   当 ARC 设置为 时`NO`，应用程序运行良好，窗口也显示正常。
*   当我将 ARC 设置为`YES`- 设置后立即（并且仅运行 1 次） - 它显示一堆错误：

> 2 月 17 日 16:35:45 DrKameleons-iMac.local MyApp[16903]：kCGErrorIllegalArgument：_CGSFindSharedWindow：WID 2409 2 月 17 日 16:35:45 DrKameleons-iMac.local MyApp[16903]：kCGErrorFailure：设置断点@CGErrorBreakpoint() 到在记录错误时捕获错误。2 月 17 日 16:35:45 DrKameleons-iMac.local MyApp[16903]：kCGErrorIllegalArgument：CGSOrderFrontConditionally：无效窗口

并且窗口不*显示*。

现在，如果我尝试重新运行应用程序（不进行任何更改，ARC 仍处于打开状态），窗口仍然不会出现。但根本没有错误。:S

到底是怎么回事？关于如何解决这个问题（并使窗口出现）的任何想法？

* * *

**提示：**

*   在 Mac OS X 10.7.5 上运行
*   Xcode 版本：4.5.1

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:16:37.673

当 ARC 开启时，LOCAL 控制器在其 showWindow 调用后立即释放！但是由于窗口被推迟，窗口甚至还没有存在——即使是这样，它也将是“无控制器”
**的，窗口不会保留它的控制器:) 反之亦然**

解决方法是记住对控制器的引用直到您的 appDelegate 被释放/直到您退出

```
@implementation AppDelegate {
    myWindowController* _controller;
}

...
_controller = [[myWindowController alloc] initWithWindowNibName:@"myMainWindow"];
[_controller showWindow:self]; 
```

* * *

您的代码在没有弧的情况下工作，因为没有释放控制器并且它只是泄漏！ARC确实添加了一个发布调用（因为它正确地看到控制器不再使用）

# google-chrome - 在 Chrome 中大量使用 css3transform 会导致部分页面无法呈现：是否有任何解决方法？

> ID：14922254
> 
> 赞同：1
> 
> 时间：2013-02-17T14:44:12.233
> 
> 标签：google-chrome, css, webkit

Webkit 错误跟踪器：[https ://bugs.webkit.org/show_bug.cgi?id=110056](https://bugs.webkit.org/show_bug.cgi?id=110056)

相关问题：[Chrome CSS3 3D Transform bug](https://stackoverflow.com/questions/10601359/chrome-css3-3d-transform-bug)

在 chrome 中，当在具有大宽度/高度值的元素上使用 css 时，一旦达到大小和/或元素数量的阈值，屏幕的某些部分就不再被绘制。

请查看以下测试页面：http: [//jsfiddle.net/AxkEj/35/](http://jsfiddle.net/AxkEj/35/)

注意：橙色容器上有变换比例，导致它看起来比实际像素大小小得多。如果将宽度（按照页面上的说明）增加到 7000 像素左右（取决于屏幕尺寸等各种因素。

代码示例（遵守 SO 规则）：

```
 body {
   background: red; 
```

} 身体，div { 填充：0；边距：0；} h1 { 字体大小：20px; 边距：10px；} .wrapper { 宽度：5000px; 高度：5000px；-webkit 变换：比例（0.125）；-webkit-transform-origin：0 0 0；-moz 变换：比例（0.125）；-moz 变换原点：0 0 0；背景：橙色；}

.wrapper div { 浮动：左；身高：46%；宽度：46%；保证金：2%；} .wrapper:hover > div { -webkit-transform: rotateX(45deg); -moz变换：旋转X（45度）；}

.rz { 背景：紫罗兰色；}

.wrapper:hover .rz { -webkit-transform: rotateZ(45deg); -moz变换：旋转Z（45度）；}

# objective-c-blocks - 在 iOS 上使用 Parse，如何在后台将两个 PFFiles 保存到一个 PFObject

> ID：14922262
> 
> 赞同：5
> 
> 时间：2013-02-17T14:45:25.803
> 
> 标签：objective-c-blocks, parse-platform

我的应用程序为每个用户创建一个对象 (PFUSER)，并为他们参与的每个事件创建一个 (PF) 对象。这很好用。然后我有两个与该事件关联的文件。我将第一个文件保存到 PFFile，然后将其关联到事件 pfobject。当我使用块并在后台执行此操作时，如何确保控制继续对第二个文件执行相同操作？

我是块的新手，所以也许我会更清楚为什么它不使用回调，但似乎块在另一个线程中运行保存，并且在采取下一步之前放弃当前的。

当然，我想将这两项都作为“最终保存”以允许离线使用。

任何指导/示例，您都可以指出我非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T19:44:13.347

saveEventually 还不支持 PFFiles；它需要更多的智慧来处理重新启动之间的恢复上传。然而，一个已经可用的技巧是 PFObject 知道如何保存它的孩子，包括 PFFiles。你可以说：

```
PFUser *user = PFUser.currentUser;
user[@"icon"] = [PFFile fileWithData:iconData];
user[@"iconThumb"] = [PFFile fileWithData:iconThumbData];
[user saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {
    // user will automatically save its files & only call this once the
    // entire operation succeeds.
}]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T03:18:30.887

我不是 100% 你的意思，因为你没有发布任何代码，但我想如果你想将多个 PFFile 关联到 PFObject 这就是你所要做的：

```
PFObject *object = [PFQuery getObjectOfClass:@"MyFile" objectId:id];
[object addObject:profilePicture forKey:@"Photo"];
[object addObject:coverPicture forKey:@"PhotoCover"];
[object saveEventually]; 
```

从[Parse 的文档](https://parse.com/docs/ios/api/Classes/PFObject.html#//api/name/saveInBackground)看来`saveEventually`，你想要什么：

> 在未来某个未指定的时间将此对象保存到服务器，即使 Parse 当前不可访问。当您可能没有可靠的网络连接并且不需要知道保存何时完成时，请使用此选项。如果对象存在无法保存的问题，它将被静默丢弃。如果在对象仍在内存中时保存成功完成，则将调用回调。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T16:25:09.803

由于目前既不支持 saveEvetually 也不支持保存到本地数据存储，下面是我用来至少离线保存可以保存或返回错误的 PFObject 类别：

```
 - (void) dr_saveWithCompletionHandler: (void(^)(NSError* error)) completionBlock {

__block BOOL canSaveEventually = YES;

[[self allKeys] enumerateObjectsUsingBlock:^(NSString* key, NSUInteger idx, BOOL *stop) {
    id object = self[key];

    if ([object isKindOfClass:[PFFile class]]) {
        PFFile* file = (PFFile*) object;

        if (!file.url || file.isDirty) {
            canSaveEventually = NO;
        }
    }
}];

void (^localCompletionHandler) (BOOL, NSError*) = ^(BOOL succeeded, NSError *error) {

    if (succeeded) {
        if (completionBlock) completionBlock(nil);

    } else {
        if (completionBlock) completionBlock(error);
    }
};

if (canSaveEventually) {
    [self saveEventually:localCompletionHandler];
} else {
    [self saveInBackgroundWithBlock:localCompletionHandler];
} 
```

}

# c++ - 这个程序如何实现抽象的概念？

> ID：14922264
> 
> 赞同：-1
> 
> 时间：2013-02-17T14:46:02.033
> 
> 标签：c++, abstraction

今天，我在搜索抽象，我得到了这个例子......这个程序如何实现抽象的概念，还请详细说明什么是c ++中的抽象

```
 #include <iostream>
using namespace std;

class Adder{
   public:
      // constructor
      Adder(int i = 0)
  {
    total = i;
  }
  // interface to outside world
  void addNum(int number)
  {
      total += number;
  }
  // interface to outside world
  int getTotal()
  {
      return total;
  };
  private:
  // hidden data from outside world
  int total;
};
int main( )
{
Adder a;

a.addNum(10);
a.addNum(20);
a.addNum(30);

cout << "Total " << a.getTotal() <<endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:50:28.570

它应该被称为[数据抽象](http://en.wikipedia.org/wiki/Abstraction_%28computer_science%29#Data_abstraction)，它是OOP（不限于C++）的关键来源。

引用自维基百科：

> 数据抽象强制将数据类型的抽象属性与其实现的具体细节明确分离。

在您的示例中，`Adder`是加法器的数据抽象，它有两个接口：`addNum`和`getTotal`. 这种抽象隐藏（或封装）私有数据（`total`在这种情况下），只暴露其内核行为：添加一个数字并返回当前总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:03:49.793

只考虑构造函数和函数原型：

```
class Adder {
  Adder(int i);
  void AddNum(int num);
  int getTotal();
}; 
```

实现是隐藏的、抽象的，只剩下原型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T14:51:59.727

您正在访问`public`执行任务的方法，但不知道它们是如何`private members`受到影响的。这不过是`abstraction`。

你在移动你的手，却不知道你的思想如何指示它移动。

`Data Abstraction`: 隐藏不必要的细节。在您的情况下，您隐藏`total`计算方式。您只需调用该函数，您的任务就完成了。

`Data Encapsulation`:绑定`data`。`object`在你的情况下，你绑定了`total`with `object a`。所以`a`未经许可是不能访问的。

# matlab - 尝试从结构字段中删除元素时出错

> ID：14922265
> 
> 赞同：-1
> 
> 时间：2013-02-17T14:46:06.313
> 
> 标签：matlab, struct, runtime-error

我有以下代码`matlab`并尝试从结构中删除一个元素：

```
function test()
    C = struct;
    C.(sprintf('Ck')) = [1 6 8 9; 8 6 9 7; 7 6 67 6; 65 7 8 7];
    ck_length = length(C.(sprintf('Ck')));
    for i=1:ck_length
        if C.(sprintf('Ck'))(i)> 10
           cleared = rmfield(C.(sprintf('Ck')), C.(sprintf('Ck'))(i));
        end
    end
end 
```

但是，当我运行程序时，出现如下所示的错误：

```
>> test
??? Error using ==> rmfield at 19
S must be a structure array.

Error in ==> test at 89
   cleared = rmfield(C.(sprintf('Ck')), C.(sprintf('Ck'))(i)); 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:52:47.980

要从数组中删除一个元素，您只需将其分配给一个空数组 ( `[]`)：

```
C.Ck(ii) = []; % removed the ii-th element of C.Ck. 
```

## 几点评论：

1.  仅当您需要**动态**字段名称时才使用[动态字段名称](http://www.mathworks.com/help/matlab/matlab_prog/generate-field-names-from-variables.html)。如果字段名称始终是访问它比访问它要好得多。**`Ck``C.Ck``C.(sprintf('Ck'))`**

***   尽量不要在 matlab[中使用`i`and`j`作为变量名](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)。

    *   如果您将其用作循环内部`ii`的索引，则更改循环内部的大小有点冒险。（参见例如[这个问题](https://stackoverflow.com/questions/2832020/change-for-loop-index-variable-inside-the-loop)）。`C.Ck``for``C.Ck`

    *   如果您只想丢弃`C.Ck`大于 10 的元素，您只需要

    ```
    C.Ck( C.Ck > 10 ) = []; 
    ```

    或者

    ```
    cleared = C.Ck( C.Ck <= 10 ); 
    ```**

# jquery - 使用 Javascript 处理“Enter”键的跨浏览器

> ID：14922266
> 
> 赞同：1
> 
> 时间：2013-02-17T14:46:07.237
> 
> 标签：jquery, event-handling, cross-browser, keyboard-events, jquery-events

我有以下示例，可以轻松检测到“Enter”键按下并正确处理。这里是：

```
<!DOCTYPE html>
<html>
<head>
    <title>keyCode example</title>
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            $("#search-input").keyup(function (event) {
                event = event || window.event;
                if (event.keyCode == 13 || event.which == 13) {
                    $("#search-button").click();
                }
            });

            $("#search-button").click(function () {
                var theUrl = "http://www.yahoo.com/"
                window.location = theUrl;
            });
        });
    </script>
</head>

<body>
    <input id="search-input" name="search" type="text"/>
    <button id="search-button" type="button" alt="Search">Search</button>
</body>
</html> 
```

这在每个流行的浏览器中都非常适合我。问题是这段代码在我的生产环境中除了 Firefox 之外的任何浏览器都不起作用。在我的生产环境中，脚本也内置在`$(document).ready`函数中并位于单独的“main.js”文件中。调试模式显示，当我在文本字段中输入字母或数字时，脚本运行正常。当我按“Enter”键时，程序甚至没有进入`$("#search-input").keyup(function (event){`部分。但是文本从文本字段中消失，似乎页面重新加载。我再重复一次，该问题只能在生产站点上重现。在我上面显示的单独的本地页面上，一切正常。

有谁知道是什么问题？

**更新**：除 Enter 外，所有键均正常处理。当我按 Enter 时，`$("#search-input").keyup(function (event){`不会运行，就像没有发生任何事件一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T12:01:43.487

使用以下代码来处理按“Enter”键可以解决该问题：

```
$("#search-button").on('click', function () {
    var theUrl = "/search.aspx?search=" + $('#search-input').val();
    window.location = theUrl;
});
$('#search-input').on('keyup', function (e) {
    if (e.which == 13)
        $("#search-button").trigger('click');
}); 
```

此代码内置于`$(document).ready`函数中。

# java - GAE 升级数据存储不工作

> ID：14922267
> 
> 赞同：3
> 
> 时间：2013-02-17T14:46:22.023
> 
> 标签：java, google-app-engine, upgrade, google-cloud-datastore

我只是将 GAE 1.7.4 升级到 1.7.5 并在访问数据存储时遇到以下问题：

```
com.google.appengine.repackaged.com.google.io.protocol.ProtocolMessage; local class incompatible 
```

在我删除 exiting 后`local_db.bin`，它工作正常。

这非常麻烦，因为每次升级都需要重新创建新`local_db.bin`的，这意味着我所有的现有数据都消失了。有没有办法将数据存储升级到新版本并重用现有数据？

这个问题在最新的 1.8 版本中仍然存在，这里是错误堆栈跟踪

```
INFO: Local Datastore initialized: 
    Type: High Replication
    Storage: D:\Workspaces\GoogleAppEng\cea-AppEngine\war\WEB-INF\appengine-generated\local_db.bin
13/05/2013 12:18:17 PM com.google.appengine.api.datastore.dev.LocalDatastoreService load
INFO: Failed to load from the backing store, D:\Workspaces\GoogleAppEng\cea-AppEngine\war\WEB-INF\appengine-generated\local_db.bin
java.io.InvalidClassException: com.google.appengine.repackaged.com.google.io.protocol.ProtocolMessage; local class incompatible: stream classdesc serialVersionUID = -6214581437134474035, local class serialVersionUID = -5740281364528697394
    at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
    at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1583)
    at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1496)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1732)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1029)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at java.util.HashMap.readObject(HashMap.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:974)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1849)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1947)
    at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1871)
    at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1753)
    at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1329)
    at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
    at com.google.appengine.api.datastore.dev.LocalDatastoreService.load(LocalDatastoreService.java:1552)
    at com.google.appengine.api.datastore.dev.LocalDatastoreService.startInternal(LocalDatastoreService.java:554)
    at com.google.appengine.api.datastore.dev.LocalDatastoreService.access$300(LocalDatastoreService.java:135)
    at com.google.appengine.api.datastore.dev.LocalDatastoreService$2.run(LocalDatastoreService.java:547)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.api.datastore.dev.LocalDatastoreService.start(LocalDatastoreService.java:544)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.startServices(ApiProxyLocalImpl.java:599)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.access$700(ApiProxyLocalImpl.java:46)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$2.run(ApiProxyLocalImpl.java:584)
    at com.google.appengine.tools.development.ApiProxyLocalImpl$2.run(ApiProxyLocalImpl.java:581)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.ApiProxyLocalImpl.getService(ApiProxyLocalImpl.java:580)
    at com.google.apphosting.utils.servlet.DatastoreViewerServlet.init(DatastoreViewerServlet.java:126)
    at javax.servlet.GenericServlet.init(GenericServlet.java:212)
    at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
    at org.mortbay.jetty.servlet.ServletHolder.getServlet(ServletHolder.java:339)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at temp.HttpIfModifiedSinceFix.doFilter(HttpIfModifiedSinceFix.java:53)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:63)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectRequest(DevAppServerServersFilter.java:369)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doDirectServerRequest(DevAppServerServersFilter.java:352)
    at com.google.appengine.tools.development.DevAppServerServersFilter.doFilter(DevAppServerServersFilter.java:115)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:97)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:438)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582) 
```

# java - 在java中创建mysql restore cmd时出错

> ID：14922268
> 
> 赞同：0
> 
> 时间：2013-02-17T14:46:22.883
> 
> 标签：java, mysql, swing

我正在尝试使用 java 恢复一个 mysql sql 文件，但我不知道它为什么不起作用。代码如下。

```
/*NOTE: Getting path to the Jar file being executed*/
            CodeSource codeSource = DBmanager.class.getProtectionDomain().getCodeSource();
            File jarFile = new File(codeSource.getLocation().toURI().getPath());
            String jarDir = jarFile.getParentFile().getPath();

            /*NOTE: Creating Database Constraints*/
            String dbName = "dth";
            String dbUser = "root";
            String dbPass = "root";

            String restorePath ="\""+ jarDir + "\\backup" + "\\" + s+"\"";

            /*NOTE: Used to create a DOS command*/
            String executeCmd = "";
            executeCmd = "C:\\xampp\\mysql\\bin\\mysql -u" + dbUser + " -p" + dbPass + " --database " + dbName + " < " + restorePath;

            System.out.println(executeCmd);

            Process runtimeProcess = Runtime.getRuntime().exec(executeCmd);
            int processComplete = runtimeProcess.waitFor();

            if (processComplete == 0) {
                JOptionPane.showMessageDialog(null, "Successfully restored from SQL : " + s);
            } else {
                JOptionPane.showMessageDialog(null, "Error at restoring");
            } 
```

代码执行，但 java swing 卡在运行时命令上。System.out.println 输出的行是这样的。

> C:\xampp\mysql\bin\mysql -uroot -proot --database dth < "F:\Final Year Project\Final\build\backup\0_Harish_2013-02-17-20-05-12.sql"

如果我将其复制并粘贴到命令行中，该行将完美运行。不知道为什么 java swing 接口卡在等待状态。（相同的查询在 cmd 上需要 2 秒，在 java 上我已经等了 5 分钟）。

**编辑：** 我运行了 streamgobbler 仍然没有任何好处，它仍然给出 Exit Value: 1 这显然是问题 IllegalThreadStateException 我该如何解决这个问题？

**编辑2：**

狼吞虎咽无济于事，因为挂起仍然存在，这是狼吞虎咽的输出

```
OUTPUT>C:\xampp\mysql\bin\mysql  Ver 14.14 Distrib 5.5.27, for Win32 (x86)
OUTPUT>Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.
OUTPUT>
OUTPUT>Oracle is a registered trademark of Oracle Corporation and/or its
OUTPUT>affiliates. Other names may be trademarks of their respective
OUTPUT>owners.
OUTPUT>
OUTPUT>Usage: C:\xampp\mysql\bin\mysql [OPTIONS] [database]
OUTPUT>  -?, --help          Display this help and exit.
OUTPUT>  -I, --help          Synonym for -?
OUTPUT>  --auto-rehash       Enable automatic rehashing. One doesn't need to use
OUTPUT>                      'rehash' to get table and field completion, but startup
OUTPUT>       and reconnecting may take a longer time. Disable with
OUTPUT>         --disable-auto-rehash.
OUTPUT>                      (Defaults to on; use --skip-auto-rehash to disable.)
OUTPUT>  -A, --no-auto-rehash 
OUTPUT>                      No automatic rehashing. One has to use 'rehash' to get
OUTPUT>                      table and field completion. This gives a quicker start of
OUTPUT>                      mysql and disables rehashing on reconnect.
OUTPUT> --auto-vertical-output 
OUTPUT>                      Automatically switch to vertical output mode if the
OUTPUT>                      result is wider than the terminal width.
OUTPUT>  -B, --batch         Don't use history file. Disable interactive behavior.
OUTPUT>         (Enables --silent.)
OUTPUT>  --character-sets-dir=name 
OUTPUT>       Directory for character set files.
OUTPUT>  --column-type-info  Display column type information.
OUTPUT>  -c, --comments      Preserve comments. Send comments to the server. The
OUTPUT>                      default is --skip-comments (discard comments), enable
OUTPUT> 
```

（其余使用信息省略）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:37:16.123

我能够通过将字符串命令转换为字符串数组命令来解决问题。这使得 Gobbler 的使用变得多余。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T15:07:51.507

这很可能是由于您没有从输出流中读取 - 当它们的缓冲区已满时它们会阻塞。请阅读[此](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html)。
您可能想要使用[Commons Exec 之](http://commons.apache.org/exec/tutorial.html)类的东西。
您还有一个问题是您不想使用管道（`<`），这是一个 bash 构造，**将无法正常工作**！
您需要`FileInputStream`在 java 中从您的文件创建一个并将其设置为`InputStream`您的代码中的。看看[这个](https://stackoverflow.com/questions/4695664/how-to-pipe-a-string-argument-to-an-executable-launched-with-apache-commons-exec)例子。

# java - 这怎么违法

> ID：14922270
> 
> 赞同：0
> 
> 时间：2013-02-17T14:46:32.087
> 
> 标签：java, arrays

```
a) int i[] = new int[2]{1,2};
b) int[] i = new int[]{1,2,3}{4,5,6}; 
```

我知道我们不能在声明时给出数组的大小。但是在语句（a）中，我们在初始化时给出了大小。那么声明（a）如何非法而声明（b）在java中是合法的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:50:06.270

```
int i1[] = new int[]{1,2};
int[][] i2 = new int[][]{{1,2,3},{4,5,6}}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T14:50:44.053

```
int i1 [] = new int [2] {1, 2}; // Invalid
int i2 [] = new int [] {1, 2}; // Valid
int [] i3 = new int [][] {1, 2, 3} {4, 5, 6}; // Invalid
int [][] i4 = new int [][] {new int [] {1, 2, 3}, new int [] {4, 5, 6}}; // Valid 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T14:50:58.180

为什么不参考 Java 语言规范？

JLS 15.10 - 数组创建表达式

```
ArrayCreationExpression:
new PrimitiveType DimExprs Dimsopt
new ClassOrInterfaceType DimExprs Dimsopt
new PrimitiveType Dims ArrayInitializer
new ClassOrInterfaceType Dims ArrayInitializer

DimExprs:
DimExpr
DimExprs DimExpr

DimExpr:
[ Expression ]

Dims:
[ ]
Dims [ ] 
```

请注意，这意味着带有初始值设定项的数组创建表达式只能有空括号。

数组初始值设定项在 10.6 中定义

```
ArrayInitializer:
{ VariableInitializersopt ,opt }

VariableInitializers:
VariableInitializer
VariableInitializers , VariableInitializer

The following is repeated from §8.3 to make the presentation here clearer:
VariableInitializer:
Expression
ArrayInitializer 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T14:52:44.923

两者都是违法的！

a) 您可以指定大小或内容。法律将是：

```
int i[] = new int[2];
i[0] = 1;
i[1] = 2; 
```

或者

```
int i[] = new int[]{1,2}; 
```

b) 二维数组是包含数组的数组。所以，你必须写：

```
int[] i = new int[][]{{1,2,3}, {4,5,6}};
                     ^       ^        ^ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T14:52:48.470

a) 提供数组初始值设定项时无法定义维度表达式 int i[] = new int[2]; b) 标记的语法错误，错误的构造 int[] j = new int[]{1,2,3};

# javascript - 具有相同类的多个链接

> ID：14922271
> 
> 赞同：-1
> 
> 时间：2013-02-17T14:46:34.287
> 
> 标签：javascript, hyperlink, jquery

我的页面上有多个使用同一类的链接：

```
<a class="tweetAnswer" rel="link1" href="">Answer</a> 
```

当有人单击这些链接之一时，我正在尝试使用 jQuery 显示警报。不幸的是，它在 Firefox 上没有显示任何内容...

```
$('a.tweetAnswer').live("click", function(){
    event.preventDefault();
    alert($(this).attr('rel'));
}); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:50:08.100

[live](http://api.jquery.com/live/)自 1.7 起已被弃用，并在 1.9 版中被删除。尝试：

```
$('a.tweetAnswer').on("click", function(event){
    event.preventDefault();
    alert($(this).attr('rel'));
}); 
```

编辑：adeno 很好地抓住了缺少事件参数。

这是一个工作的[jsfiddle](http://jsfiddle.net/BjGYn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:50:14.817

首先，没有事件参数：

```
$('a.tweetAnswer').live("click", function(event){
    event.preventDefault();
    alert( $(this).attr('rel') );
}); 
```

其次，您应该在 jQuery 1.7 或更新版本中使用 on() ：

```
$(document).on('click', 'a.tweetAnswer', function(event){
    event.preventDefault();
    alert( $(this).attr('rel') );
}); 
```

# perl - Perl - while (<>) 文件处理

> ID：14922272
> 
> 赞同：18
> 
> 时间：2013-02-17T14:46:38.797
> 
> 标签：perl, while-loop, cycle, filehandle

一个简单的程序，`while( <> )`处理文件作为参数 ( `./program 1.file 2.file 3.file`) 和 Unix 系统的标准输入。

我认为它将它们连接在一个文件中，并且逐行工作。问题是，我怎么知道我正在使用第一个文件？然后是第二个。

举个简单的例子，我想在一行中打印文件的内容。

```
while( <> ){
    print "\n" if (it's the second file already);
    print $_;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-17T15:24:58.977

菱形运算符不连接文件，它只是打开并连续读取它们。你如何控制它取决于你需要如何控制它。检查我们何时读取文件的最后一行的一种简单方法是使用`eof`：

```
while (<>) {
    chomp;             # remove newline
    print;             # print the line
    print "\n" if eof; # at end of file, print a newline
} 
```

您还可以考虑使用计数器来跟踪您正在处理的文件

```
$counter++ if eof; 
```

请注意，此计数将在文件的*最后一行*增加一，因此不要过早使用它。

如果要跟踪`$.`当前文件句柄中的行号，可以`close`通过 ARGV 文件句柄重置此计数器：

```
while (<>) {
    print "line $. : ", $_;
    close ARGV if eof;
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-02-17T15:08:41.950

这`<>`是 readline 运算符的一个特例。它通常需要一个文件句柄：`<$fh>`.

如果忽略文件句柄，则`ARGV`使用魔术文件句柄。

如果没有给出命令行参数，那么`ARGV`is `STDIN`。如果给出了命令行参数，则将依次`ARGV`传递`open`给每个参数。这类似于

```
# Pseudocode
while ($ARGV = shift @ARGV) {
  open ARGV, $ARGV or do{
    warn "Can't open $ARGV: $!";
    next;
  };
  while (<ARGV>) {
    ...; # your code
  }
} 
```

该`$ARGV`变量是真实的，并保存当前打开的文件的文件名。

请注意，两个参数的形式`open`（可能在幕后使用）是非常不安全的。文件名`rm -rf * |`可能不符合您的要求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T15:08:58.447

当前文件的名称`<>`包含在特殊`$ARGV` [变量](http://perldoc.perl.org/perlvar.html)中。

您可以将参数数组中的文件列表与当前文件名交叉匹配，`@ARGV`以获取文件在列表中的位置。假设您期望的唯一参数是文件名，您可以简单地执行以下操作：

```
my %filename_positions = map { ( $ARGV[$_] => $_ ) } 0..$#ARGV;

while (<>) {
    my $file_number = $filename_positions{$ARGV};
    #... if ($file_number == 0) { #first file     
} 
```

# javascript - 如何从回调函数更改javascript函数的参数

> ID：14922274
> 
> 赞同：1
> 
> 时间：2013-02-17T14:46:52.633
> 
> 标签：javascript

我有一个由服务器生成的 HTML 输入元素，它看起来像这样：

***这是服务器端***

```
"<input id='" + cRoadList.getRoadListNumber() + ",start_km' style='' type=\"text\" value='"+ cRoadList.getStartKm() + "' onkeypress='handleRoadListDataUpdate(\""+cRoadList.getStartKm()+"\")' 
```

如您所见，输入元素的属性是动态生成的，但事实并非如此，所以让我们通过放置一些静态数据来简化它，如下所示：

```
"<input id='myID' style='' type=\"text\" value='100' onkeypress='handleRoadListDataUpdate(\"100\")' 
```

这个 HTML 输入元素最重要的部分是调用函数**handleRoadListDataUpdate的****onkeypress**事件

 *****这是客户部分***

```
function handleRoadListDataUpdate(oValue) // The function accpets the old value of the *input* element
{
   var event = handleRoadListDataUpdate.caller.arguments[0] || window.event ;

   var keyPressed = event.keyCode;
   if(keyPressed == 13)
   {
        var roadListNumber = event.target.id.split(",")[0];
        var inputId        = event.target.id.split(",")[1];
        var nValue         = event.target.value;

        if(nValue != oValue)
        {
               var userAction = confirm("Are you sure you want to change this value?\nPrevious value:   " + oValue + "\nNew value: " + nValue);
               if(userAction == true)
               {   
                    var url = "/GBS/RoadListController";
                    var params = "type=updateRoadList&roadListNumber=" + roadListNumber + "&updateData="+inputId + "&newValue="+ nValue;
                    dhtmlxAjax.post(url,params,function(loader) 
                    {
                            var xmlDoc = loader.xmlDoc.responseXML;

                            var sqlResponse = xmlDoc.documentElement.getElementsByTagName("response");
                            var result      = sqlResponse[0].getAttribute("value");

                            if(result == "sql_error")
                            {
                                alert("The operation could not be completed because of an network error!");
                                event.target.value = oValue;
                            }
                            else if(result == "sql_success")
                            {
                                alert("The operation completed successfully!");
                                //Change the parameter oValue of the parent function
                            }  
                    });
               }
               else
               {
                   event.target.value = oValue;
               }
        }     
   }    
} 
```

*基本上，此功能是关于使用用户在input*元素中输入的新值更新（使用 ajax）数据库，然后按*Enter 键*。**如果参数 oValue 与输入元素中的参数不同，则会发出 ajax 请求，以便可以使用新值更新数据库。**

当操作完成时，我们在*输入*元素（由用户输入）中有新值，**但问题是，如果他再次按 Enter，函数会再次执行，因为它的参数 oValue 不会随新值更改。**

所以我的问题是：

如何更改 handleRoadListDataUpdate() 函数的参数**oValue使其与****nValue**相同，以便如果用户不小心按 Enter 函数不会再次执行 ajax 部分？

附言

请不要使用 jQuery 代码！只有纯 JavaScript！**

# php - jQuery更改模糊事件仅适用于列表中的第一个元素

> ID：14922277
> 
> 赞同：0
> 
> 时间：2013-02-17T14:47:08.717
> 
> 标签：php, jquery

我遇到了问题 - 我的 jQuery 更改模糊事件仅适用于动态创建的列表中的第一个元素。我该如何解决这个问题？

我创建的元素（以及一个淡化的版本）可以在这里找到：http: [//jsfiddle.net/kfm5b/2/](http://jsfiddle.net/kfm5b/2/)

jQuery

```
$('.roomFac').on("change blur", function () {
    var park = $("#park2").val();
    var lecturestyle = $("#lecture_style2").val();
    var roomstructure = $("#room_structure2").val();
    var groupsize = $("#groupSize2").val();
    var facilities = "";
    $('select[name*=roomFac]').each(function () {
        facilities += $(this).val();
        facilities += ",";
    });
    var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
        'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
        'facilities=' + facilities;
    $.ajax({
        type: "POST",
        url: "process_timetableMon2.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#mon').html(html);
        }
    });
}); 
```

**process_timetableMon2.php**

```
$array = explode(",", $_POST["facilities"]);

for($i = 0; $i < count($array); $i++){
    echo $array[$i].'<br>';
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:52:41.053

由于选择下拉列表是动态添加的，因此您需要一个委托事件处理程序：

```
$(document).on('change blur', '.roomFac', function () {
    //Your function here
}); 
```

# javascript - Javascript 闭包 vs Object.createProperty

> ID：14922279
> 
> 赞同：3
> 
> 时间：2013-02-17T14:47:29.017
> 
> 标签：javascript, closures

我的问题如下： 在我阅读的关于闭包的大多数或所有教程中，它们的首要资产被描述为它们能够定义私有成员。例如，来自神话般的 nettuts 网站：[http](http://net.tutsplus.com/tutorials/javascript-ajax/digging-into-design-patterns-in-javascript/) ://net.tutsplus.com/tutorials/javascript-ajax/digging-into-design-patterns-in-javascript/ 。我的问题如下 - 当您可以使用 Object.definteProperty 时，为什么您会选择使用闭包创建对象，但语法有些不自然？例如

```
var o = {}; // Creates a new object

 // Example of an object property added with defineProperty with a data property descriptor
Object.defineProperty(o, "a", {value : 37,
                           writable : false,
                           enumerable : true,
                           configurable : true});
 // 'a' property exists in the o object and its value is 37 
```

我必须承认这两种方式都比传统的 OOP 语言长得多，但第二种方式不是更自然吗？那么为什么闭包如此受欢迎，它们还有哪些其他资产以及使用闭包或我刚才描述的方式创建对象之间有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:53:33.850

[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)仍然定义*公共*属性，而闭包允许隐私（你不应该谈论私有“成员”，它只是局部变量）。

您的示例，`defineProperty`用于定义可枚举、可写和可配置的数据属性可以（并且应该）由默认属性分配缩写（也适用于旧浏览器）：

```
o.a = 37; 
```

并非所有对象都需要使用闭包创建（在您的示例中，我想不出任何应用程序），但您可能想了解[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T14:53:24.967

这是语法偏好和浏览器兼容性的问题。一个大问题是，如果您想要浏览器兼容的代码，该`defineProperty`方法仅在 IE 9+ 中适用于非 dom 对象。

就语法而言，您可以看到在使用`defineProperty`.

每种方式都有自己的好处，但都缺乏更直接支持隐私的语言的简单性。

**笔记：**

*   我假设私人是指您将可写属性设置为false。

**参考**

*   [MDN：定义属性](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)

# python - 使用 numpy 从均匀分布中绘制具有 [0, 1] 的浮点数

> ID：14922280
> 
> 赞同：10
> 
> 时间：2013-02-17T14:47:28.720
> 
> 标签：python, numpy, uniform

我目前正在尝试从均匀分布中提取浮点数。

Numpy 提供了 numpy.random.uniform。

```
import numpy as np
sample = np.random.uniform (0, 1, size = (N,) + (2,) + (2,) * K) 
```

但是，此模块在半开区间 [0, 1) 上生成值。

如何从均匀分布中绘制带有 [0, 1] 的浮点数？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T14:56:31.620

无论您是从 (0,1) 还是 [0,1] 或 [0,1) 或 (0,1] 绘制均匀分布的数字都没有关系。因为得到 0 或 1 的概率为零。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T16:26:56.937

[random_integers](http://docs.scipy.org/doc/numpy/reference/generated/numpy.random.random_integers.html#numpy.random.random_integers)在闭合区间上生成整数。因此，如果您可以将您的实际问题改写为使用整数，那么您就大功告成了。否则，您可以考虑 1./MAX_INT 的粒度是否足以解决您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T16:08:42.250

来自标准 Python [random.uniform 文档](http://docs.python.org/2/library/random.html#random.uniform)：

> 取决于等式 a + (ba) * random() 中的浮点舍入，端点值 b 可能包含在范围内，也可能不包含在范围内。

所以基本上，端点的包含严格基于所使用的浮点舍入方案。因此，要包含 1.0，您需要定义操作所需的精度并相应地舍入随机数。如果您的问题没有定义的精度，您可以使用[numpy.nextafter](http://docs.scipy.org/doc/numpy/reference/c-api.coremath.html#npy_nextafter)。[先前的答案](https://stackoverflow.com/a/9406985/873106)涵盖了它的用法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T20:20:23.917

如果您的软件依赖于两者之间的差异`[0,1)`，`[0,1]`那么您可能应该推出自己的随机数生成器，可能[是这里提到](https://stackoverflow.com/questions/4720822/best-pseudo-random-number-generator)的那个，以确保它满足这些严格的要求。

# c# - C# 获取、设置属性

> ID：14922286
> 
> 赞同：-3
> 
> 时间：2013-02-17T14:48:43.407
> 
> 标签：c#, properties, get, set

我有以下代码：

```
 private void button1_Click(object sender, EventArgs e)
    {
        Class1 myClass = new Class1("ttt");
        myClass.Name = "xxx";
        MessageBox.Show(myClass.Name);
    } 
```

和

```
class Class1
{
    string str = "";

    public Class1(string name)   
    {
        str = name;
    }

    public string Name
    {
        get { return str; }
        set;

    }
} 
```

最初我设置：

```
 myClass.Name = "ccc"; 
```

但后来改为：

```
 myClass.Name = "xxx"; 
```

并且还改变了：

```
 set {str = value;} 
```

至：

```
 set; 
```

为什么当我运行它时我得到 "ccc" 而不是 "xxx" ？

在我当前的代码中有“ccc”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T14:50:50.063

```
public string Name
{
    get { return str; }
    set;

} 
```

应该

```
public string Name
{
    get { return str; }
    set { str = value; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:50:41.430

`Name`按如下方式更改您的属性：

```
public string Name
{
    get { return str; }
    set { str = value; }
} 
```

要**回答**你的问题，你得到“ccc”而不是“xxx”的原因是你有编译错误。当您运行应用程序时，它会询问您是否要运行最新的已知工作配置。上次你的程序编译时，你使用“ccc”作为文字，这就是仍在运行的东西。

修复编译错误，再次运行，就会出现“xxx”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-25T10:52:46.480

图案

```
public string Name {get;set;} 
```

就是所谓的“自动实现的属性”。

编译器创建一个私有的、匿名的支持字段，只能通过属性的 get 和 set 访问器访问。

您的原始代码似乎在做的是获取您定义的字段，但在匿名支持字段上设置。因此构建错误...

# jquery - jQuery Masonry 定位问题

> ID：14922288
> 
> 赞同：0
> 
> 时间：2013-02-17T14:49:03.630
> 
> 标签：jquery, jquery-plugins

我第一次使用 jQuery Masonry。只是在我的电脑上让我的头撞到它显示给我的东西。

我有如下的jQuery：

```
$("#box-container").masonry({
    itemSelector: ".box",
    columnWidth: 100
}); 
```

CSS：

```
#content #left-content #box-container .box {
   width:280px;
   height:auto;
   margin:18px 0 0 18px;
   background:#fafafa;
   position:relative;
   min-width:230px;
   float:left;
} 
```

HTML，我认为不需要。

**问题：**

我应用了所有这些东西。包括 jQuery Masonry。一切都很好，但是当我刷新我的文档时。我所看到的？

所有的`div`s 都在彼此之上。但我认为控制台中可能会出现错误，指示错误类型。所以，我可以修复它。

当我单击“检查元素”时，我惊讶地发现所有`div`s 都按要求设置了。但是为什么它在页面加载时不起作用？我正在制作基本的多列布局。有任何风格干扰吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T12:30:18.717

setTimeout 函数可能适用于某些情况，但最好的解决方案是在调用 Masonry 之前等待图像加载，如下所示：

```
$(window).load(function(){
  // Call Masonry here
}); 
```

所以它会等待窗口上的所有内容加载，然后再计算每个项目的位置。SetTimeout 现在可能工作，但如果您的内容加载时间超过 1 秒，您肯定会遇到同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:57:24.590

我只是通过添加`setTimeout`功能让它工作。

```
setTimeout( function() {
  $("#box-container").masonry({
      itemSelector: ".box",
      columnWidth: 100
  });
}, 1000); 
```

# ios - 在 iOS 上在后台加载 8MP 照片

> ID：14922291
> 
> 赞同：1
> 
> 时间：2013-02-17T14:49:47.440
> 
> 标签：ios, objective-c

我正在自定义一个类似于 iOS 中的照片应用程序的画廊。我希望能够在我的自定义画廊中的单张照片之间滚动。我还在预加载可能很快会显示的图像（如果我向右滚动，我会预加载，即右侧的 2 个下一个图像）

但是，图像加载似乎非常消耗 CPU，以至于干扰了滚动。使滚动暂停一秒钟。

有没有更好的方法来做到这一点？（我考虑过保留与屏幕分辨率匹配的每个图像的较小版本）

基本上我在后台线程中调用它：

```
UIImage *img = [UIImage imageWithContentsOfFile:path]; 
```

然后我在主线程上执行一个选择器，它只用加载的图像初始化现有的 ImageView。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:15:50.267

我以某种方式想通了。

我需要在后台线程上将图像渲染到屏幕外，以确保它已加载。否则它不会真正加载，直到我决定在主线程中渲染它。这导致主线程在加载时阻塞。

# java - 如何为 JFrame 上的所有 JPanel 设置 Visible

> ID：14922294
> 
> 赞同：3
> 
> 时间：2013-02-17T14:50:06.737
> 
> 标签：java, swing, jpanel

如何为 JFrame 上的所有 JPanel 设置可见性？我知道我可以为每个面板使用 JFrame.JPanel.setVisible，但我想为所有人使用它。

这非常有用，因为我不知道女巫面板是否可见。所以我想在操作后隐藏所有面板并显示 1 或 2 个面板。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:24:07.433

**简单的解决方案**：

将所有面板存储为实例或列表

**通用解决方案**：

迭代小部件树

```
private void setAllChildPanelsVisible(Container parent) {
    Component[] components = parent.getComponents();

    if (components.length > 0) {
        for (Component component : components) {
            if (component instanceof JPanel) {
                ((JPanel) component).setVisible(true);
            }
            if (component instanceof Container) {
                setAllChildPanelsVisible((Container) component);
            }
        }
    }
} 
```

如何使用它：

```
@Test
public void testSetAllChildPanelsVisible() {
    JFrame frame = new JFrame();

    JPanel panel1 = new JPanel();
    frame.getContentPane().add(panel1);

    JPanel panel2 = new JPanel();
    panel1.add(panel2);

    panel1.setVisible(false);
    panel2.setVisible(false);

    assertFalse(panel1.isVisible());
    assertFalse(panel2.isVisible());

    setAllChildPanelsVisible(frame.getContentPane());

    assertTrue(panel1.isVisible());
    assertTrue(panel2.isVisible());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:30:00.593

这是执行此操作的通用方法。它递归地遍历容器层次结构中的所有组件，找到与特定组件类匹配的组件，并设置它们的可见属性：

```
static void setComponentVisibility(Container container,
        Class<? extends Component> componentClass, boolean visible) {
    for (Component c : container.getComponents()) {
        if (componentClass.isAssignableFrom(c.getClass())) {
            c.setVisible(visible);
        } else if (c instanceof Container) {
            setComponentVisibility((Container)c, componentClass, visible);
        }
    }
} 
```

像这样使用它：

```
setComponentVisibility(frame, JPanel.class, false); 
```

# playframework - 播放测试空点异常

> ID：14922296
> 
> 赞同：1
> 
> 时间：2013-02-17T14:50:13.033
> 
> 标签：playframework, playframework-1.x

我在终端运行 play(1.2.5) 测试并访问 该页面显示的
localhost/@tests

```
 Oops: NullPointerException
An unexpected error occured caused by exception NullPointerException:
null 
```

然后在终端中打印以下错误堆栈

```
Internal Server Error (500) for request GET /@tests

Oops: NullPointerException
An unexpected error occured caused by exception NullPointerException: null

play.exceptions.UnexpectedException: Unexpected Error
    at play.Play.start(Play.java:556)
    at play.Play.detectChanges(Play.java:642)
    at play.Invoker$Invocation.init(Invoker.java:198)
    at Invocation.HTTP Request(Play!)
Caused by: java.lang.NullPointerException
    at play.classloading.ApplicationCompiler$2.acceptResult(ApplicationCompiler.java:266)
    at org.eclipse.jdt.internal.compiler.Compiler.compile(Compiler.java:478)
    at play.classloading.ApplicationCompiler.compile(ApplicationCompiler.java:282)
    at play.classloading.ApplicationClassloader.getAllClasses(ApplicationClassloader.java:426)
    at play.Play.start(Play.java:516)
    ... 3 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:24:15.133

最后我找到了如何解决这个异常。因为我有一个包含两个类的文件。就像

Foo.java：

```
public class Foo {}
class Bar{} 
```

然后我把Bar类改写成嵌套类，一切正常！Thoung 我不知道为什么，似乎是由于 eclipse java 编译器的一些错误

# android - 一旦手指被移除，android路径就会移动

> ID：14922297
> 
> 赞同：1
> 
> 时间：2013-02-17T14:50:13.540
> 
> 标签：android, canvas, path, bitmap

我正在开发一个绘图应用程序，并允许用户导入图像以进一步绘制它。大于绘图区域的图像将被缩小，以满足最大屏幕宽度或屏幕高度。

导入的图像将放置在绘图视图的中心，使用 `canvas.drawBitmap(bitmap, x_adjustment, y_adjustment, paintScreen);`

这样，导入图像的左、右或上、下就会有空格。调整将从 (0,0) 开始计算

`x_adjustment`和`y_adjustment`

# 编码：

**绘制**

```
 @Override
   protected void onDraw(Canvas canvas)   
   {
       canvas.drawBitmap(bitmap, x_adjustment, y_adjustment, paintScreen); 

      for (Integer key : pathMap.keySet()) 
         canvas.drawPath(pathMap.get(key), paintLine); // draw line
   } 
```

**触摸开始：**

```
 private void touchStarted(float x, float y, int lineID) 
   {      
      Path path; // used to store the path for the given touch id
      Point point; // used to store the last point in path

         path = new Path(); // create a new Path
         pathMap.put(lineID, path); // add the Path to Map
         point = new Point();
         previousPointMap.put(lineID, point);

      path.moveTo(x, y);
      point.x = (int) x;  
      point.y = (int) y;         
   } 
```

**触摸移动：**

```
 // called when the user drags along the screen
   private void touchMoved(MotionEvent event) 
   {
      // for each of the pointers in the given MotionEvent
      for (int i = 0; i < event.getPointerCount(); i++) 
      {
         // get the pointer ID and pointer index
         int pointerID = event.getPointerId(i);
         int pointerIndex = event.findPointerIndex(pointerID);

         if (pathMap.containsKey(pointerID)) 
         {
            // get the new coordinates for the pointer
            float newX = event.getX(pointerIndex);
            float newY = event.getY(pointerIndex);

            // get the Path and previous Point associated with this pointer
            Path path = pathMap.get(pointerID);
            Point point = previousPointMap.get(pointerID);

            float deltaX = Math.abs(newX - point.x);
            float deltaY = Math.abs(newY - point.y);

            if (deltaX >= TOUCH_TOLERANCE || deltaY >= TOUCH_TOLERANCE) 
            {
               path.quadTo(point.x, point.y, ((newX + point.x)/2),((newY + point.y)/2));

               // store the new coordinates
               point.x = (int) newX ;
               point.y = (int) newY ;                   
            }
         } 
      }          
   } 
```

**触摸结束：**

```
 private void touchEnded(int lineID)
   {
      Path path = pathMap.get(lineID); 
      bitmapCanvas.drawPath(path, paintLine); 
      path.reset();               
   } 
```

## 问题：

由于导入的图像放置在中心而不是（0,0），因此对于绘制的每条线，虽然在绘制和触摸屏幕时正确显示，当用户移开手指时，即触摸结束，最终线将被 x_adjustment 和 y_adjustment 移动。

例如，如果缩放后​​的图像宽度<屏幕宽度，左右有空白，画线时显示**正确**，但当手指移开时，线会立即**错误地**向右移动`x_adjustment`；

我知道这是因为导致错误的调整。我知道这是通过 ax,y shift 来保存路径的坐标。但我不知道如何修改代码，我试图添加对路径的调整但仍然失败。有人可以帮忙给我一些指导吗？非常感谢！

# wordpress - foreach 仅一次

> ID：14922299
> 
> 赞同：0
> 
> 时间：2013-02-17T14:50:16.870
> 
> 标签：wordpress, foreach

我正在为 wordpress 使用 metabox 插件，有一个 php 命令：

```
<?php

$images = rwmb_meta( 'pw_project_photos', array('type'=>'plupload_image','size'=>'thumbnail') );
foreach ( $images as $image )
{
    echo "<img src='{$image['url']}' alt='{$image['alt']}' />";
}

?> 
```

我想做的只是回声一次，可能吗？

例如，我将两张图片上传到一个帖子，但我只想显示第一张图片，而不是两张图片。

请帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:54:17.600

如果您只想回显一个项目，您真的不需要遍历数组。

只需这样做：

```
<?php
if ( isset( $images[0] ) ) {
   $image = $images[0];
   echo "<img src='{$image['url']}' alt='{$image['alt']}' />";
} 
?> 
```

# file - 如何在 COBOL 中区别对待文件的第一行？

> ID：14922300
> 
> 赞同：0
> 
> 时间：2013-02-17T14:50:26.020
> 
> 标签：file, cobol, sequential

在 COBOL 中，我想读取一个行顺序文件。第一行出现一次。第二行和第三行可以重复多次（未知）。我真的不知道该怎么做。

我认为文件描述是这样的：

```
01 DBGEGEVENS            PIC X(200).
01 PROJECT. (occurs unknown times)
   03 PROJECTCODE        PIC X(10).
   03 CSVPAD             PIC X(200). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T01:00:07.253

这取决于文件格式

你想要VB文件格式吗？？？然后

```
 FILE-CONTROL.
       SELECT In-File ASSIGN .....
   DATA             DIVISION.
   FILE             SECTION.
   FD  Comp-File.
    01  DBGEGEVENS            PIC X(200).
    01  PROJECT. 
        03 PROJECTCODE        PIC X(10).
        03 CSVPAD             PIC X(200). 
```

和

```
 Read In-File
    Read In-File
    Read In-File 
```

您可以将 DBGEGEVENS 用于第一条记录，将项目用于第二条或后续记录

对于固定宽度文件格式

```
 FILE-CONTROL.
       SELECT Comp-File ASSIGN .....
   DATA             DIVISION.
   FILE             SECTION.
   FD  Comp-File.
   01  input-record.

   WORKING-STORAGE  SECTION.
    01  DBGEGEVENS            PIC X(200).
    01  PROJECT. 
        03 PROJECTCODE        PIC X(10).
        03 CSVPAD             PIC X(200). 
```

和

```
 Read In-File into DBGEGEVENS
    Read In-File into PROJECT.
    Read In-File into PROJECT. 
```

两者都应该有效，具体取决于您使用的文件格式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T01:05:05.643

给出的代码表示一个 VB 文件 - 记录一个是 200 字节，而其他记录是 210 字节。记录上应该有一个指标来描述它们是什么以及它们的目的。最终，最好将它们读入 WORKING-STORAGE 中，我会问向你传递文件的人有哪些可用的指标。但是，如果您知道记录 1 是文件中唯一的 200 字节记录，那将被视为一个标头读取 - 在其定义中读取一次 - 而其余 210 字节记录（我想强调提供的定义描述了 210 个字节）将被读入适合其定义的 WORKING-STORAGE 区域。

# php - 根据 PHP 中的 SSHA256 哈希验证密码

> ID：14922302
> 
> 赞同：2
> 
> 时间：2013-02-17T14:50:36.440
> 
> 标签：php, validation, passwords, salt

对于 Dovecot 的身份验证，我使用 SSHA256 哈希，但我不知道如何根据现有哈希验证给定密码。以下 PHP 函数（在 Web 中找到）用于创建 SSHA256 哈希：

```
function ssha256($pw) {
        $salt = make_salt();
        return "{SSHA256}" . base64_encode( hash('sha256', $pw . $salt, true ) . $salt );
}

function make_salt() {
        $len   = 4;
        $bytes = array();
        for ($i = 0; $i < $len; $i++ ) {
                $bytes[] = rand(1,255);
        }
        $salt_str = '';
        foreach ($bytes as $b) {
                $salt_str .= pack('C', $b);
        }
        return $salt_str;
} 
```

示例输出：`{SSHA256}lGq49JTKmBC49AUrk7wLyQVmeZ7cGl/V13A9QbY4RVKchckL`

我必须提取盐，但是如何提取？我完全迷失了解决问题的方法，有人暗示吗？

感谢大家的帮助！

哦，对不起，我必须使用 SSHA256，因为 Dovecot 1.2.15 只支持这些方案： `CRYPT MD5 MD5-CRYPT SHA SHA1 SHA256 SMD5 SSHA SSHA256 PLAIN CLEARTEXT CRAM-MD5 HMAC-MD5 DIGEST-MD5 PLAIN-MD4 PLAIN-MD5 LDAP-MD5 LANMAN NTLM OTP SKEY RPA`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T14:52:45.517

您需要将盐与散列值一起存储。

当您需要验证密码时，您只需使用用户输入的密码 + 存储的盐值再次计算哈希值。如果哈希匹配，则用户输入了正确的密码。

对于您的格式，`base64_decode`首先使用，结果的最后 4 个字节将是盐。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:00:06.700

您不应该将 SHA 系列用于密码散列。它们**速度很快**，专为*高速散列文件*而设计。你需要密码散列是***昂贵的***。使用 bcrypt、PHPass 或只使用我自己推出的这个类（但直到你学会在其中挑选漏洞）：

```
class PassHash {
    public static function rand_str($length) {
        $total = $length % 2;
        $output = "";
        if ($total !== 0) {
            $count = floor($length / 2);
            $output .= ".";
        } else $count = $length / 2;

        $bytes = openssl_random_pseudo_bytes($count);
        $output .= bin2hex($bytes);

        // warning: prepending with a dot if the length is odd.
        // this can be very dangerous. no clue why you'd want your
        // bcrypt salt to do this, but /shrug

        return $output;
    }
    // 2y is an exploit fix, and an improvement over 2a. Only available in 5.4.0+
    public static function hash($input) {
        return crypt($input, "$2y$13$" . self::rand_str(22));

    }

    // legacy support, add exception handling and fall back to <= 5.3.0
    public static function hash_weak($input) {
        return crypt($input, "$2a$13$" . self::rand_str(22));
    }

    public static function compare($input, $hash) {
        return (crypt($input, $hash) === $hash);
    }
} 
```

您必须对给定的明文进行哈希处理，并将该哈希值与您存储的哈希值进行比较。盐存储在哈希中，并且应该是随机的。如果你喜欢，加一个胡椒粉。您还应该使工作率可变，以便您可以在需要时随时更改工作率并且仍然让系统正常工作。

* * *

如果像您说的那样，您无法实现此功能，则可以按如下方式解压缩散列：

```
function unpack_hash($hash) {
        $hash = base64_decode($hash);
        $split = str_split($hash, 64);
        return array("salt" => $split[1], "hash" => $split[0]); 
```

这是因为 SHA256 是 256 位或 64 个十六进制字符。您总是可以假设前 64 个字符是哈希

# c# - 带有文本框的网格视图

> ID：14922307
> 
> 赞同：0
> 
> 时间：2013-02-17T14:50:52.183
> 
> 标签：c#, asp.net, .net, visual-studio-2010, gridview

我有一个带有 TextBoxes 作为模板的 GridView。现在我可以插入数据库了。我在gridview中有一个复选框作为模板，所以当我选中复选框时，相应行中的值将被插入到数据库中，现在我想在同一个GridView中显示数据库值以进行更新。我做不到，任何人都可以帮助我

这是我的 C# 代码

```
SqlCommand search2 = new SqlCommand("select * from OtherCostData", con);
SqlDataAdapter da = new SqlDataAdapter(search2);
DataSet ds = new DataSet();
da.Fill(ds);
GridView1.DataSource = ds;
GridView1.DataBind(); 
```

我只检索客户名称，其余为空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T13:36:34.380

如果我理解你，你需要做的是填充你的gridview的文本框：

```
<TemplateField>
  <ItemTemplate>
    <asp:TextBox runat="server" id="txtGrid1" Text='<%#DataBinder.Eval(Container.DataItem, "YourColumnName")%>'/>
  </ItemTemplate>
</TemplateField> 
```

我不明白您是否能够将文本框信息保存在数据库中。如果你不是，请告诉我，所以我会尽力帮助你。

此致。

# mysql - 在另一列中找到一列的单词并替换？

> ID：14922309
> 
> 赞同：0
> 
> 时间：2013-02-17T14:50:58.820
> 
> 标签：mysql

这是我第一次在这里发帖！希望能得到好的答复。

我有两个表，根据我需要找到的路径，将 table2 的名称替换为 table1 的名称。

```
table1
+---------------+----------+
| name          | path     |
+---------------+----------+
| John Smith    | 12345    |
+---------------+----------+
| John Smith    | 54321    |
+---------------+----------+
| JohnSmith     | 12345    |
+---------------+----------+

table2
+---------------+----------+
| name          | path     |
+---------------+----------+
| John          | 12345    |
+---------------+----------+
| Smith         | 54321    |
+---------------+----------+

the final result would be like
+---------------+----------+
| name          | path     |
+---------------+----------+
| Smith         | 12345    |
+---------------+----------+
| John          | 54321    |
+---------------+----------+
| JohnSmith     | 12345    |
+---------------+----------+ 
```

如您所见，我只需要替换完全匹配的内容。所以在 JohnSmith 中我不会删除 John。

问题也是，我是否只使用 mysql 查询？或者类似的东西也需要一些php？

先感谢您。

* * *

两个查询都很接近，但没有给出我需要的输出。

例如第一个生产

```
NAME        PATH
Smith       12345
John        54321
Smith       12345 
```

这里最后一行，不应该改动。因为我们没有任何精确匹配。并且行应该保持不变“JohnSmith”

在第二个中，输出是

```
NAME        PATH
Smith       12345
John Smith  54321
JohnSmith   12345 
```

这里第二行似乎是错误的，因为它应该删除“Smith”

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:57:39.253

这很接近，但我承认我不明白你的最后一个条件——不应该是 Smith/12345 吗？这使用`REPLACE`：

```
SELECT REPLACE(t1.Name, t2.Name, '') Name, t1.Path
FROM Table1 t1
  LEFT JOIN Table2 t2 ON t1.path = t2.path 
```

这是[SQL Fiddle](http://www.sqlfiddle.com/#!2/c6cba0/1)。

**- 编辑 -**

这是使用 CASE 语句的尝试。它在中间、开头或结尾检查：

```
SELECT 
  CASE 
    WHEN t1.Name Like CONCAT('% ',IFNULL(t2.Name,''),' %')
    THEN REPLACE(t1.Name, CONCAT(' ',IFNULL(t2.Name,''),' '), ' ') 

    WHEN t1.Name Like CONCAT(IFNULL(t2.Name,''),' %')
    THEN REPLACE(t1.Name, CONCAT(IFNULL(t2.Name,''),' '), '') 

    WHEN t1.Name Like CONCAT('% ',IFNULL(t2.Name,''))
    THEN REPLACE(t1.Name, CONCAT(' ',IFNULL(t2.Name,''),' '), '') 

    ELSE
       t1.Name

END Name, t1.Path
FROM Table1 t1
  LEFT JOIN Table2 t2 ON t1.path = t2.path 
```

还有更多[小提琴](http://www.sqlfiddle.com/#!2/c6cba0/9)。

产生以下结果：

```
NAME        PATH
Smith       12345
John Smith  54321
JohnSmith   12345 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:32:17.623

这将完成这项工作：

```
SELECT 
    REPLACE(CONCAT(' ',t1.Name,' '), 
    CONCAT(' ',t2.Name,' '), '') Name, 
    t1.Path
FROM 
    Table1 t1
LEFT JOIN 
    Table2 t2 ON t1.path = t2.path 
```

# node.js - 猫鼬更新嵌入文档不起作用

> ID：14922311
> 
> 赞同：2
> 
> 时间：2013-02-17T14:51:10.900
> 
> 标签：node.js, mongoose

问候大家，

我定义了一个深度嵌入的猫鼬模型“Person”，其中包含一个“Contact”字段，“Contact”有一个用于此人工作、家庭、送货等地址的“Address”数组。

当我想更新地址并使用模型的“保存”功能时，更改并未反映在数据库中。

```
 console.log(person.Contact.Address[i].City = 'Chicago');
            person.save(function (err) {
                if (!err) {
                   console.log(person.Contact.Address[i].City); 
```

console.log 表明字段 City 已更新为新值，但 mongodb 的值保持不变。

你能帮我解决这个问题吗？

谢谢！加里

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T13:30:45.417

该问题已通过使用解决[`markModified`](http://mongoosejs.com/docs/api.html#document_Document-markModified)：

```
person.markModified('Contact.Address');
person.save() 
```

仍然不确定何时需要使用 `markModified`，因为在大多数其他情况下，更改反映在 mongodb 中而不使用它。

# objective-c - 变量声明方式的区别

> ID：14922312
> 
> 赞同：4
> 
> 时间：2013-02-17T14:51:28.983
> 
> 标签：objective-c

我是 Objective-C 的新手，我不明白 MyClass.h 中变量（firstString、secondString 和 thirdString）的声明有什么区别：

```
@interface MyClass {
    NSString *firstString;
}
@end 
```

在 MyClass.m 中：

```
@interface MyClass() {
    NSString *secondString;
}
@end

@implementation MyClass

NSString *thirdString;

@end 
```

我猜第一种和第二种情况是一样的，但是在什么情况下使用比较好呢？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T14:57:48.003

`firstString`在头文件中声明，该文件`#import`由其他类编辑。它暴露给其他类，因此可以被子类访问，并且由于该符号在头文件中可用，因此外部对象通过[键值编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Overview.html#//apple_ref/doc/uid/20001838-SW1)进行更改会更简单。

`secondString`在您的实现文件中声明。`()`in`@interface MyClass ()`表示这是一个类[扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW3)。`secondString`不会暴露给外部类（尽管与 Objective-C 中的所有内容一样，您不能认为它是真正私有的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T14:53:57.627

第一个和第二个变量将是实例变量，而第三个将是文件范围的全局变量。通常，您应该使用实例变量并避免使用全局变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T14:59:02.423

三者在功能上没有区别，主要是可见性控制。

1.  第一个是在类的公共头文件中声明的，这意味着您希望程序员了解该变量。如果对该属性的访问受到限制（例如`@private`），它不应再出现在公共标头中，您应该使用第二个或第四个选项。

2.  第二个是在类延续中声明的，这意味着只有实现才需要它。

3.  第三个是全局变量，你应该只在特殊情况下使用它。

4.  缺少另一个选项

```
@implementation MyClass {
    NSString *thirdString; 
}

@end 
```

（最新的 Apple 编译器允许）与 2 相同，无需创建类延续。

# symfony - TWIG，显示 GROUPED BY 查询结果

> ID：14922316
> 
> 赞同：1
> 
> 时间：2013-02-17T14:51:38.930
> 
> 标签：symfony, doctrine-orm, twig

我的项目中有 Book、User 和 Cart 实体。我需要从购物车实体中获取 3 种最受欢迎​​的书籍。我在存储库中有以下查询：

```
query = $this->getEntityManager()
->createQuery
("SELECT c, (COUNT(c.book)) AS total
  FROM ValinorBookStoreBundle:Cart c
  JOIN c.book b
  GROUP BY c.book
  ORDER BY total DESC")
->setMaxResults(3); 
```

此查询返回以下数组（如 var_dump 所示）：

```
array (size=4)
  0 => 
    array (size=2)
      0 => 
        object(Valinor\BookStoreBundle\Entity\Cart)[1021]
          private 'id' => int 14
          protected 'book' => 
            object(Valinor\BookStoreBundle\Entity\Book)[894]
              ...
          protected 'user' => 
            object(Proxies\__CG__\Valinor\BookStoreBundle\Entity\User)[1104]
              ...
          protected 'datum' => 
            object(DateTime)[1041]
              ...
          protected 'billNumber' => int 1
      'total' => string '3' (length=1)
  1 => 
    array (size=2)
      0 => 
        object(Valinor\BookStoreBundle\Entity\Cart)[1100]
          private 'id' => int 13
          protected 'book' => 
            object(Valinor\BookStoreBundle\Entity\Book)[1002]
              ...
          protected 'user' => 
            object(Proxies\__CG__\Valinor\BookStoreBundle\Entity\User)[1104]
              ...
          protected 'datum' => 
            object(DateTime)[1101]
              ...
          protected 'billNumber' => int 1
      'total' => string '2' (length=1)
  2 => 
    array (size=2)
      0 => 
        object(Valinor\BookStoreBundle\Entity\Cart)[1098]
          private 'id' => int 15
          protected 'book' => 
            object(Valinor\BookStoreBundle\Entity\Book)[930]
              ...
          protected 'user' => 
            object(Proxies\__CG__\Valinor\BookStoreBundle\Entity\User)[1104]
              ...
          protected 'datum' => 
            object(DateTime)[1099]
              ...
          protected 'billNumber' => int 1
      'total' => string '1' (length=1)
  3 => 
    array (size=2)
      0 => 
        object(Valinor\BookStoreBundle\Entity\Cart)[1096]
          private 'id' => int 16
          protected 'book' => 
            object(Valinor\BookStoreBundle\Entity\Book)[948]
              ...
          protected 'user' => 
            object(Proxies\__CG__\Valinor\BookStoreBundle\Entity\User)[1095]
              ...
          protected 'datum' => 
            object(DateTime)[1097]
              ...
          protected 'billNumber' => int 2
      'total' => string '1' (length=1) 
```

我的问题是如何在 TWIG 中显示书籍属性？

这是购物车实体：

```
<?php

namespace Valinor\BookStoreBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Cart
 *
 * @ORM\Table(name="cart")
 * @ORM\Entity(repositoryClass="Valinor\BookStoreBundle\Entity\CartRepository")
 */
class Cart
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @ORM\ManyToOne(targetEntity="Book", inversedBy="cart")
     **/
    protected $book;

    /**
     * @ORM\ManyToOne(targetEntity="User", inversedBy="carts")
     **/
    protected $user;

    /**
     * @var datetime $datum
     *
     * @ORM\Column(name="datum", type="datetime", unique=false, nullable=true)
     * 
     */
    protected $datum;

    /**
     * @var integer $billNumber
     *
     * @ORM\Column(name="billNumber", type="integer", unique=false, nullable=false)
     * 
     */
    protected $billNumber;

    public function __construct() 
    {
        $this->datum = new \DateTime();
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set datum
     *
     * @param \DateTime $datum
     * @return Cart
     */
    public function setDatum($datum)
    {
        $this->datum = $datum;

        return $this;
    }

    /**
     * Get datum
     *
     * @return \DateTime 
     */
    public function getDatum()
    {
        return $this->datum;
    }

    /**
     * Set billNumber
     *
     * @param integer $billNumber
     * @return Cart
     */
    public function setBillNumber($billNumber)
    {
        $this->billNumber = $billNumber;

        return $this;
    }

    /**
     * Get billNumber
     *
     * @return integer 
     */
    public function getBillNumber()
    {
        return $this->billNumber;
    }

    /**
     * Set book
     *
     * @param \Valinor\BookStoreBundle\Entity\Book $book
     * @return Cart
     */
    public function setBook(\Valinor\BookStoreBundle\Entity\Book $book = null)
    {
        $this->book = $book;

        return $this;
    }

    /**
     * Get book
     *
     * @return \Valinor\BookStoreBundle\Entity\Book 
     */
    public function getBook()
    {
        return $this->book;
    }

    /**
     * Set user
     *
     * @param \Valinor\BookStoreBundle\Entity\User $user
     * @return Cart
     */
    public function setUser(\Valinor\BookStoreBundle\Entity\User $user = null)
    {
        $this->user = $user;

        return $this;
    }

    /**
     * Get user
     *
     * @return \Valinor\BookStoreBundle\Entity\User 
     */
    public function getUser()
    {
        return $this->user;
    }
} 
```

已解决：这是查询：

```
//most popular books
        $popularBooks = $this->getDoctrine()
                           ->getRepository('ValinorBookStoreBundle:Cart')
                           ->findMostPopularBooks();

        $results = array();
        foreach($popularBooks as $key=>$el)
        {
            $results[] = $el['0'];
        } 
```

这就是你在 Twig 中使用它的方式：

```
{% for result in results %}
        <table>
            <tr>
                <td>
                    <img class="cover" src="/Symfony2/web/bundles/valinorbookstore/images/{{result.book.isbn}}.jpg"/>
                </td>
            </tr>
            <tr>
                <td>
                    {% for author in result.book.authors %}
                        {{author}}
                        <br />
                    {% endfor%}
                </td>
            </tr>
            <tr>
                <td>
                    <a href="{{ path('showBook', { 'id': result.book.id }) }}" style="text-decoration: none">
                        ,, {{result.book.name}} ,,
                    </a>
                </td>
            </tr>
        </table>
        <hr />
    {% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:23:33.437

将您的集合传递给 twig 模板后，假设变量名称为 results，并且您的 Cart 实体有一个 getBook 方法或 book 属性是公共的：

```
{% for result in results %}
    {{ result.book.foo }}
{% endfor %} 
```

[http://twig.sensiolabs.org/doc/templates.html](http://twig.sensiolabs.org/doc/templates.html)

# android - 从 android 接收 GPS 数据到 cakephp - 支持 cakePHP 中的 gps 位置

> ID：14922317
> 
> 赞同：0
> 
> 时间：2013-02-17T14:51:43.663
> 
> 标签：android, cakephp, geolocation, gps

我想将我的位置 GPS 数据从我的 android 手机发送到 cakePHP 网站。我浏览了我的 sql 并找到了`POINT`可用于存储位置信息的类型。但我不知道如何使用 cakePHP 样式代码插入这些信息。我希望能够在以后获得靠近我的位置。所以我的问题是：

1 - cakePHP 是否支持存储 GPS 数据和准备函数来获取给定经度和纬度对象的附近位置。

2 - 如果没有，如何在 cakePHP 中将接收到的经度和纬度插入到我的模型中，以及最好的数据类型是什么，因为我将在此之后查询附近的位置。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T03:40:20.697

我找到了如下解决方案：

在给定构造数组的情况下，要将数据插入到 cakePHP 中的模型中，我们使用：

```
$db = $this->Service->getDataSource();  
$serv = array(
                'name'=>$data['name'],
                'loc_point' => $db->expression('POINT('.$dataJson['long'].','.$dataJson['lat'].')')
            );
$this->Service->save($serv)); 
```

这条线是我在 cakePHP 中的问题： **`'loc_point' => $db->expression('POINT('.$data['lng'].','.$data['lat'].')')`**

解决插入问题后，我从谷歌找到了一个获取附近位置的教程。它使用 lng 和 lat 作为十进制值，我更改了代码以遵循它。链接[在这里](https://developers.google.com/maps/articles/phpsqlsearch_v3#findnearsql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T02:06:11.943

要将坐标存储为（纬度，经度）对，您可以将其存储为

```
float latitude,
float longitude 
```

或作为

```
double latitdue,
double longitude 
```

（这在磁盘上浮动没有优势，但在代码中更兼容）

或者您甚至可以将其存储为整数

```
 int latitude = (int) round(latDegrees * 1E7);
   int longitude = (int) round(lonDegrees * 1E7); 
```

因此，您还可以将其存储到具有 (x,y) 的任何 Point 结构中，
使用 x 表示经度，使用 y 表示纬度。

# alfresco - CMIS 能否用于从 Alfresco 检索节点内容？

> ID：14922318
> 
> 赞同：3
> 
> 时间：2013-02-17T14:51:56.710
> 
> 标签：alfresco, cmis

CMIS 协议旨在为上传/检索**文档**和**文件夹**提供方便的访问。

CMIS 协议能否用于检索Alfresco 中的**节点内容？**例如，以下查询是否有效？这会尝试从存储库中检索所有任务，该存储库不是文件夹或文档。

```
SELECT * FROM bpm:task 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:04:54.260

是的，它是 CMIS 中的有效查询，并且会检索您在 Alfresco 中查找的内容。

内容管理互操作性服务协议不是为在文档和文件夹上运行而设计的：正如它的名字所述，它完全是关于*Content*的。在 CMS 的世界中，内容通常（并且一般地）被标识为一个信息单元，并附有类型和元数据。从这个意义上说，`bpm:task`Alfresco 中的 a 成为 CMIS 中的内容项。

文档和文件夹恰好也是内容，并且作为某种特殊类型的内容，它们在 CMIS 中除了通用的 API 之外还有专用的 API。

# authentication - 识别移动应用

> ID：14922321
> 
> 赞同：2
> 
> 时间：2013-02-17T14:52:02.653
> 
> 标签：authentication, mobile

是否可以识别（验证）移动应用程序 HTTP 请求？例如，来自网络服务器的请求可以通过域或 IP 来识别，假设我知道它应该来自哪里，我可以接受请求，如果它来自意外的来源，则可以拒绝。

doe 的移动应用程序有某种独特的 id（无法模仿）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:26:59.213

如果您需要从移动应用程序（本机编译的应用程序）进行安全的 HTTP 调用（webservice API），您可以尝试以下方法：

**编辑：**这种方法假设您不能依赖用户操作应用程序来进行身份验证（因为您可以简单地要求用户在应用程序中输入安全密码）。

1.  假设您正在实现应用程序，请在代码中保存某种 API 密钥。

2.  当应用程序通过 HTTP 进行 API 调用时，它将始终使用 HTTPS 完成（因此所有内容都是加密的）。

3.  应用程序将 API 密钥作为 URL 参数发送。

4.  服务器将通过检查密钥是否正确来进行身份验证。

嗅探应用程序流量不会泄露密钥（因为 HTTPS）。

您最容易受到有人对您的应用程序进行逆向工程以发现其中的密钥。这可以通过使用各种混淆和反调试技术变得困难，但不能做到真正不可能。只要您使用的是编译语言（例如 Objective-C，而不是用于 Web 应用的 JS），如果没有任何特殊的游戏，这已经很困难了。如果您避免按原样放置 API 密钥字符串并在应用程序中使用一些短代码来计算它，那么您发现它的难度增加了大约 1000 倍。

在不了解您的具体问题的情况下，很难提出替代方法。如果您正在寻找不同的东西，请提供更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-05T09:36:35.973

实际使用的方法有两种。HTTP 基本身份验证（对于移动应用程序不太安全）和 OAuth2（与 HTTP 基本身份验证相比更安全）。

*   **HTTP 基本身份验证：**对于 API 服务的技术编写者和使用它们的开发人员来说，该过程都很简单：

开发人员会获得一个 API 密钥（通常是 ID 和 Secret）。此 API 密钥通常如下所示：3bb743bbd45d4eb8ae31e16b9f83c9ba:ffb7d6369eb84580ad2e52ca3fc06c9d。

他负责将 API 密钥存储在其服务器上的安全位置，以便任何人都无法访问它。他通过在 HTTP Authorization 标头中提供 API 密钥以及单词“Basic”（API 服务器使用它来正确解码授权凭证）向 API 服务发出 API 请求。密钥也是 Base64 编码的。

例如键可以是：3bb743bbd45d4eb8ae31e16b9f83c9ba:ffb7d6369eb84580ad2e52ca3fc06c9d

以 base64 编码：M2JiNzQzYmJkNDVkNGViOGFlMzFlMTZiOWY4M2M5YmE6ZmZiN2Q2MzY5ZWI4NDU4MGFkMmU1MmNhM2ZjMDZjOWQ=。

API 服务器反转此过程。当它找到 HTTP Authorization 标头时，它将解码 base64 结果，读取 API 密钥 ID 和 Secret，并在允许处理请求之前验证这些令牌。

HTTP 基本身份验证很简单，但对于移动应用程序来说，保护 API 密钥是一个主要问题。HTTP 基本身份验证需要通过网络为每个请求发送原始 API 密钥，从而增加了长期滥用的机会。这也是不切实际的，因为您不能安全地将 API 密钥嵌入到分发给许多用户的移动应用程序中。

例如，如果您构建了一个嵌入了 API 密钥的移动应用程序，那么用户可能会对您的应用程序进行反向工程，从而暴露此 API 密钥并滥用您的服务。

因此 HTTP 基本身份验证在开放环境中存在风险，例如 Web 浏览器和移动应用程序。

注意：与所有身份验证协议一样，HTTP 基本身份验证必须始终通过 SSL 使用。

*   **移动 API 安全的 OAuth2：**

     OAuth2 是一种出色的协议，用于保护开放设备中的 API 服务，并提供了一种通过令牌身份验证对移动用户进行身份验证的更好方法。

OAuth2 令牌身份验证从用户角度工作（OAuth2 将其命名为密码授予流程）：

当用户启动移动应用程序时，系统会提示他输入用户名或电子邮件和密码。开发人员将包含登录数据的 POST 请求从应用程序发送到 API 服务（通过 SSL）。然后验证用户凭据，并为在一定时间后过期的用户创建访问令牌。此访问令牌可以存储在移动设备上，将其视为允许访问 API 服务的 API 密钥。当访问令牌过期时，再次提示用户输入登录详细信息。

OAuth2 生成的访问令牌可以临时存储在开放环境中并且是安全的。它是安全的，因为访问令牌是为临时目的而生成的，它减少了潜在的损坏。

令牌根据使用的移动平台进行存储。对于 Android 应用，访问令牌可以存储在 Shared Preferences 中，对于 iOS 应用，可以存储在 Keychain 中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T14:57:27.210

这取决于您如何定义“移动应用程序”。在移动设备上运行的任何应用程序？在移动设备上运行网页浏览？对你来说什么是移动设备？

无论如何，一般简短的回答是，您可以使用在 HTTP 标头中发送的 User-Agent 检测设备类型。所有流行的移动浏览器都会发送这个。但请注意，这：

*   它可以被欺骗（很容易）
*   某些应用程序（即 iPhone 或 Android 应用程序和类似应用程序）可以这样编写，即它们不会发送带有 HTTP 请求的用户代理。最佳实践要求发送用户代理。

我不知道有更可靠的方法来做到这一点。并且只要事情发生在 HTTP 上，通常就没有任何方法可以肯定地了解客户端的任何信息。对于大多数用例，您可以查看 User-Agent。

您可以购买对包含各种设备数据的用户代理数据库的访问权，如果适用，其中两个是[WURFL](http://wurfl.sourceforge.net/)或[DeviceAtlas](https://deviceatlas.com/)。

# java - 使用 JSP 的 MVC 中的吊人游戏

> ID：14922323
> 
> 赞同：1
> 
> 时间：2013-02-17T14:52:12.720
> 
> 标签：java, jsp, servlets

我想创建 Hang man 游戏，但我需要保存会话和用户名，但我在传递用户名时遇到问题。我编写了 JSP、servlet 和 Javabean，但是在我的用户登录后，在下一个视图中我只有 Welcome + NULL。请帮帮我。谢谢您的帮助。

我不知道如何将名称传递给下一个视图。

```
enter code here 
```

* * *

这是 JavaBean（**Userdata.java**）：

```
public class Userdata {

String userName;

public Userdata() {
}

public Userdata(String userName) {
    this.userName = userName;
}

public String getUserName() {
    return userName;
}

public void setUserName(String userName) {
    this.userName = userName;
}
} 
```

* * *

这是 servlet，在这段代码中我需要使用一个会话，但我想这样做，在用户登录的所有时间里，都可以看到他/她的名字

**登录Servlet.java**

```
public class loginServlet extends HttpServlet {

@Override
protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws     
ServletException, IOException {
    doPost(req, resp);
}

@Override
protected void doPost(HttpServletRequest request, HttpServletResponse resp) throws  
ServletException, IOException {
    HttpSession session = request.getSession();

    Userdata = new Userdata(usuari);

    if(request.getParameter("username")!=null &&
           !request.getParameter("username").trim().equals("") ){
       usuari = new Userdata(request.getParameter("username"));
    }

    if(request.getParameter("logout")!=null){
        session.invalidate();
    }   

    request.setAttribute("username", username);
    RequestDispatcher view = request.getRequestDispatcher("juego.jsp");
    view.forward(request, resp);
}
} 
```

* * *

最后是 JSP 中的视图，第一个视图是登录

*Nom de

jugador：Contrasenya：* 

这是 servlet -> juego.jsp 的响应

 **```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>

<!DOCTYPE html>
<html>
   <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Penjat</title>    

   </head>

    <h2>Benvingut</h2> 

   <%=request.getAttribute("usuari")%>

<div align="center">
    <h1>Joc del Penjat</h1>
</div>

<div align="center">
    <!--Delaració d'imatges-->
    <img src="Imatges/p_JEE_3.png">
</div>

<div align="center">    
    <!--Declaració de les lletres-->
    Lletra:
    <input type="text" name="lletra" size="1" maxlength="1">
    <br/>
   <p>
       <input type="hidden" name="id" value=""/>
       <input type="hidden" name="vegades_jugades" value=""/>
       <input type="hidden" name="pistes" value=""/>          
       <input type="submit" name="boto_jugar" value="Jugar">
   </p>
</div> 
```*  ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:16:25.493

感谢您的帮助，现在我明白了，我修改了，现在我可以获取用户名了。

*@Override protected void doPost(HttpServletRequest request, HttpServletResponse resp) throws
ServletException, IOException { HttpSession session = request.getSession();*

 *```
 Userdata usuari = new Userdata();

    if(request.getParameter("username")!=null &&
           !request.getParameter("username").trim().equals("") ){
       usuari = new Userdata(request.getParameter("username"));
    }

    if(request.getParameter("logout")!=null){
        session.invalidate();
    }   

    request.setAttribute("username", usuari);
    RequestDispatcher view = request.getRequestDispatcher("juegoOriginal.jsp");
    view.forward(request, resp);
} 
```*  ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:08:22.403

首先，您必须将用户名放入请求中，在您的 servlet 中按以下方式使用 request.setAttribute

```
request.setAttribute("username", value); 
```

其中 value 恰好是您稍后要读取的对象。

稍后在不同的 servlet/jsp 中使用 request.getAttribute 作为

```
String value = (String)request.getAttribute("username") 
```

或者

```
<%= request.getAttribute("username")> 
```***

# java - 使用递归选择数组的奇数/偶数元素

> ID：14922324
> 
> 赞同：0
> 
> 时间：2013-02-17T14:52:26.337
> 
> 标签：java, recursion

我正在做一些编程作业，有点迷茫。该项目是选择列表数组的偶数/奇数元素并存储在另一个数组中。它不是每个元素中的偶数，而是元素本身，因此如果数组具有值“1,2,5,7,9”并返回偶数元素，它将给出“1,5,9”。还必须使用递归。谁能给我一个起点或一些建议。虽然关于从 2 个元素开始并获取第 2 个元素，然后从中构建，但不知道它将如何添加到第 2 遍

```
 public static ArrayList<Integer> even(ArrayList<Integer> list)
 ArrayList<Integer> evenlist = ListMethods.deepClone(tList);//make copy of list
 if (evenlist.size()<=1)    // The list is empty or has one element
 {
//        return null;// Return the list as is
 }

if 
(evenlist.size()==2)
{
 //return right element
 //call method again
 //add to list
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:00:47.823

伪代码

```
int[] evens,odds;

 function categorize(List<Integer> in,int idx)
   if(idx>=in.length)
         return
   int cur = in[idx]
   if(even), add to evens
   else add to odds
    categorize(in,idx+1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T14:54:12.463

您可以使用这样的简单`for`循环：

```
for (int i = 0; i < list.size(); i += 2) {
    System.out.println(list.get(i));
} 
```

如果您必须使用递归，这里是您可能采取的步骤的概要。（我不会告诉你具体该怎么做，因为你什么都没试过，这就像家庭作业。）

1.  获取第一个元素并存储它
2.  从列表中删除（新）第一个元素
3.  打电话给自己

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T15:44:22.157

这听起来和我刚刚完成的作业很相似，所以如果是（而且你在我班！），我不会告诉你使用我们没有涵盖的任何术语，因为我知道尝试发现可能会令人生畏一些新的实践（超出我们必须做的）。

首先，设置退出条件。正如您已经说过的，您必须从现有的 ArrayList 中创建一个新的。您将从现有的 ArrayList 中删除项目，存储偶数（或奇数）索引处的整数，直到列表为空。

所以你的退出条件是：

```
if (evenList is Empty)
    return evenList; 
```

然后，逐步完成这些步骤。我建议确定您开始的数组是否有奇数步数，如下所示：

```
if (evenList has Even Elements)
    int holderForIntsAtEvenElements = last evenList EVEN element 
```

请注意，我们从最后一个元素开始，因此当您退出递归方法时，这将是添加到新 ArrayList 中的最后一个元素，因此它将按数字顺序排列。你可能会觉得这篇文章很有趣：[这个布尔返回是什么意思？](https://stackoverflow.com/questions/14905643/what-does-this-boolean-return-mean)

然后我们想从列表中删除最后一个元素并再次递归调用该方法。

最后，当我们达到退出条件并开始出现时，我们想要将我们一直存储的整数添加到它们中，例如：

```
evenList.add(holderForIntsAtEvenElements);
return evenList; 
```

这并不能解决一个问题，如果列表没有偶数个元素，那么如何处理第一个元素 - 但是，我会让你尝试解决这个问题！这是代码和伪代码的良好组合，有望帮助您走上正轨。

# php - 带有 Wordpress XMLRPC 的 PHP 应用程序 - 如何开始？

> ID：14922325
> 
> 赞同：0
> 
> 时间：2013-02-17T14:52:33.567
> 
> 标签：php, xml-rpc

我需要用支持 Wordpress XML-RPC 的 PHP 编写应用程序，并允许使用 XML-RPC 从该 PHP 应用程序（其他网站）添加帖子。

1.  在哪里可以找到一些针对新手的 PHP 中 XML-RPC 的教程或示例？

2.  我应该使用来自[http://phpxmlrpc.sourceforge.net/](http://phpxmlrpc.sourceforge.net/)的 XMLRPCPHP吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:14:37.860

简而言之，xmlrpc是远程过程调用的方法，其中调用信息是xml编码的。

xmlrpc 服务器公开了一组带有输入参数和返回类型的远程方法。

xmlrpc 支持以下参数类型：

*   int 整数值
*   double 双精度浮点值
*   boolean 布尔值
*   字符串字符串值
*   dateTime 日期/时间值
*   base64 base64 编码的二进制数据
*   数组值数组
*   struct 结构，其中每个成员都有名称和值（类似于关联数组）

[通过 xmlrpc 暴露的 Wordpress 方法的描述](http://codex.wordpress.org/XML-RPC_WordPress_API)

要添加帖子，您需要使用参数调用 wp.newPost：博客 ID、用户名、密码和结构，表示帖子内容。

XMLRPCPHP 是一个不错的选择。

# php - 更新一列中的完整数组值

> ID：14922328
> 
> 赞同：0
> 
> 时间：2013-02-17T14:52:42.287
> 
> 标签：php, mysql, arrays, for-loop

我有一个包含博客列的表，我想从数组中添加值，我的问题是我需要在一列中插入一个完整的数组值。这是我正在尝试的...

```
foreach($title1->find('tr') as $song){
    $name_a[] = $song->plaintext.'<br>';

    } 
```

并尝试在列中输入此数组

```
for($i=0, $count = count($name_a);$i<$count;$i++) { 
$lyrics = array_push($name_a[$i]);  

$songs_data_update   = array( 
                'lyrics'     => $lyrics,
                'songs'      => $song_name

                );
        try {
                $STH = songs_data_update();
                $STH->execute($songs_data_update);
                }catch (PDOException $DBH){
                die($DBH->getMessage());
                }
} 
```

我知道这是错误的......而且它不起作用......我想在每一行的末尾添加“<br>”，这就是我为此制作数组的原因。那么我该怎么做...完整的数组在一列中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:15:11.817

使用[内爆](http://php.net/manual/en/function.implode.php)。例如

```
$lyrics = join('', $lyrics); 
```

将 Array`$lyrics`转换为由所有元素连接而成的字符串。

# mysql - MySQL5 查询帮助查找连接的非验证行

> ID：14922329
> 
> 赞同：0
> 
> 时间：2013-02-17T14:52:43.540
> 
> 标签：mysql, sql, join

在测试表下方找到：

```
SELECT * FROM tbl_emp; // There must be few employee with no dept id (did)
+------+-------+------+
| eid  | ename | did  |
+------+-------+------+
|    1 | SCOTT |    2 |
|    2 | JAMES |    4 |
|    3 | BOND  |    1 |
|    4 | TIGER |    5 |
|    5 | CHIP  |    0 |
|    6 | DALE  |    0 |
|    7 | MARY  |    0 |
+------+-------+------+

SELECT * FROM tbl_dept;// There must be few depts which have no employee.
+-------+-------------+
| dptid | dname       |
+-------+-------------+
|     1 | HR          |
|     2 | IT          |
|     3 | ADMIN       |
|     4 | TRAVEL      |
|     5 | SALES       |
|     6 | FINANCE     |
|     7 | ENGINEERING |
+-------+-------------+ 
```

我想以以下方式在 SINGLE QUERY 中列出 tbl_emp 中没有部门的所有员工姓名和 tbl_dept 中没有员工的所有员工姓名：

```
DESIRED RESULTSET:
-------------------
ename  dname
CHIP    
DALE
MARY
       ADMIN
       FINANCE
       ENGINEERING
------------------- 
```

我能做的就是：

```
SELECT ename FROM tbl_emp WHERE did NOT IN (SELECT dptid FROM tbl_dept); 
```

和

```
SELECT dname FROM tbl_dept WHERE dptid NOT IN (SELECT did FROM tbl_emp); 
```

请帮助选择 dname 和 ename 以及在单个查询中也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T14:55:04.290

您可以使用`UNION`

```
SELECT ename, NULL dname 
FROM tbl_emp 
WHERE did NOT IN (SELECT dptid FROM tbl_dept)
UNION
SELECT NULL ename, dname 
FROM tbl_dept 
WHERE dptid NOT IN (SELECT did FROM tbl_emp); 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b6247a/1)

**更新 1**

您也可以使用`LEFT JOIN`而不是使用`NOT IN`（*我宁愿使用这个*）

```
SELECT  a.ename, b.dname 
FROM    tbl_emp a 
        LEFT JOIN tbl_dept b
            ON a.did = b.dptid
WHERE   b.dptid IS NULL
UNION
SELECT  c.ename, d.dname 
FROM    tbl_dept d 
        LEFT JOIN tbl_emp c
            ON d.dptid = c.did
WHERE   c.did IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b6247a/4)

# upload - 使用 wget 命令行将文件上传到服务器

> ID：14922335
> 
> 赞同：0
> 
> 时间：2013-02-17T14:53:22.070
> 
> 标签：upload, wget, vtiger

我有一个带有“选择文件”按钮的网页，可以在服务器上上传文件。

我正在尝试使用 wget 命令行将文件上传到服务器。就像我们在 web 中使用“选择文件”按钮一样。我这样做：

```
wget --load-cookies=cookies.txt --post-file '/root/vTiger/Organization.csv' http://vtiger.mydomain.com/link.php 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T22:12:33.610

如果该“上传”操作是提交到多部分 formpost HTML 表单，那么严酷的事实是 wget 不支持它。curl 使用它的[-F](http://curl.haxx.se/docs/manpage.html#-F)选项。

# mysql - Delphi SQL 日期读取问题

> ID：14922339
> 
> 赞同：1
> 
> 时间：2013-02-17T14:53:34.617
> 
> 标签：mysql, sql, database, delphi, date

我目前正在创建一个集成了 SQL 连接的 Delphi 应用程序。
SQL 以 YYYY-MM-DD 格式存储其日期值，但是，当我在 Delphi 应用程序中读取这些值时，它们以 MM-DD-YYYY 格式读取。

我目前已经编写了代码来从我的数据库中读取日期的值，但是我在处理没有 2 个月整数或 2 天整数的值时遇到了问题。例如，日期 2013 年 2 月 17 日将读作“2/17/2013”

我当前的代码将日期分为日、月和年。它适用于完整日期（MM/DD/YYYY），因为它使用 Delphi 中的“复制”命令读取文本中的相应值。当它读取格式为 M/D/YYYY 的日期时，它不会从字符串中复制正确的值。

在我运行我的分离代码之前有什么方法可以编辑字符串，以便它强制字符串转换为 MM/DD/YYYY 的格式。我的想法是编写代码来检查字符串的格式，然后添加任何缺少的零：即将 2/17/2013 更改为 02/17/2013

我知道我可能正在做一些事情让自己变得更难，但这是我目前的代码，所以任何通过添加到我当前的代码来解决我的问题的帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T17:20:17.257

作为一般规则，不要将 TDateTime 值视为字符串，而是将其视为日期和时间。

不要使用 AsString 方法获取日期/时间字段的值，请使用 AsDateTime 方法并将其分配给 TDateTime 变量。

如果您想知道日期部分，请使用提供的功能。例如[DateUtils](http://docwiki.embarcadero.com/Libraries/XE2/en/System.DateUtils)单元中可用的那些。SysUtils单元还包含一些与日期/时间相关的功能[。](http://docwiki.embarcadero.com/Libraries/XE2/en/System.SysUtils)

```
uses
  DateUtils, SysUtils;

var
  MyDate: TDateTime;
  MyDay, MyMonth, MyYear: Word;
begin
  MyDate := MyQuery.Fields[3].AsDateTime;  //not AsString
  MyDay := DayOf(MyDate);
  MyMonth := MonthOf(MyDate);
  MyYear := YearOf(MyDate);
  ShowMessage(Format('Day: %d, Month: %d, Year: %d', [MyDay, MyMonth, MyYear]);

  //or also
  MyDate := EndOfTheMonth(MyDate);
  DecodeDate(MyDate, MyYear, MyMonth, MyDay);
  ShowMessage(Format('Day: %d, Month: %d, Year: %d', [MyDay, MyMonth, MyYear]); 
```

这同样适用于将值存储到数据库中，而不是使用固定的日期格式，而是使用参数，如下所示：

```
uses
  DateUtils, SysUtils;

var
  MyDate: TDateTime;
  MyDay, MyMonth, MyYear: Word;
begin
  MyDate := EncodeDate(2013, 2, 17);
  MyQuery.SQL.Text := 'insert into myTable (MyDate) values (:MyDate)';
  MyQuery.Params.ParamByName('MyDate').AsDateTime := MyDate;
  MyQuery.ExecSQL(); 
```

它适用于我所知道的所有可用的数据库访问层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:02:06.713

我不熟悉Delphi，但如果是.net、ColdFusion、php 或任何其他应用程序技术，原理都是一样的。

首先，由于您的数据库中有一个 datetime 数据类型，唯一重要的时间格式是您显示它的时间。日期是数字，而不是字符串。

接下来，出于各种原因，查询参数是您的朋友。如果能在Delphi中创建一个datetime变量，作为参数传给MySql，生活会很美好。

# java - 带有空格的busybox mv静默失败

> ID：14922349
> 
> 赞同：0
> 
> 时间：2013-02-17T14:54:43.680
> 
> 标签：java, android, busybox

我正在使用busybox 运行设备。没有空格的文件夹或文件正确移动，但似乎有空格的文件夹没有正确移动

```
public static boolean mv(File source, File target) {
    if (!source.exists() || !target.exists()) {
        return false;
    }
    try {
        StringBuilder command = new StringBuilder("mv -v ");
        command.append('\"');
        command.append(source.getCanonicalPath());
        command.append('\"');
        command.append(' ');
        command.append('\"');
        command.append(target.getCanonicalPath());
        command.append('\"');
        System.out.println(command.toString());
        Process process = Runtime.getRuntime().exec(command.toString());
        StringBuilder output = new StringBuilder();
        BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line;
        while ((line = in.readLine()) != null) {
            output.append(line);
        }
        System.out.println(output.toString());
        return process.waitFor() == 0;
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

输出是

```
mv -v "/storage/sdcard0/media/music/Progressive Death Metal" "/storage/sdcard0/Music" 
```

没有 mv 输出，方法只返回“false”（非零退出代码）。

我必须使用规范路径，还是可以使用绝对路径并将其留给外壳？

**编辑**

我还提出如果文件名有引号，则参数将是错误的，所以我做了一个添加转义字符的方法

```
private static String getCommandLineString(String input) {
    return input.replace("\\", "\\\\")
            .replace("\"", "\\\"")
            .replace("\'", "\\\'")
            .replace("`", "\\`")
            .replace(" ", "\\ ");
} 
```

现在 mv 看起来像这样

```
public static boolean mv(File source, File target) {
    if (!source.exists() || !target.exists()) {
        return false;
    }
    try {
        StringBuilder command = new StringBuilder("mv -v ");
        command.append(getCommandLineString(source.getAbsolutePath()));
        command.append(' ');
        command.append(getCommandLineString(target.getAbsolutePath()));
        System.out.println(command.toString());
        Process process = Runtime.getRuntime().exec(command.toString());
        StringBuilder output = new StringBuilder();
        BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));
        String line;
        while ((line = in.readLine()) != null) {
            output.append(line);
        }
        System.out.println(output.toString());
        return process.waitFor() == 0;
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

我得到的是

```
mv -v /sdcard/media/music/Progressive\ Death\ Metal /sdcard/Music 
```

但我仍然得到无声的非零退出代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:47:51.573

终于让它工作了。Exec 应该请求 shell，而 OutputStream 应该编写命令。

```
private static boolean execute(boolean superuser, String command) {
    DataOutputStream os = null;
    try {
        Process process = Runtime.getRuntime().exec(superuser ? "su" : "sh");
        os = new DataOutputStream(process.getOutputStream());
        os.writeBytes(command + "\n");
        os.flush();

        os.writeBytes("exit\n"); 
        os.flush();

        return process.waitFor() == 0;
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        if (os != null) { try { os.close(); } catch (Exception e) {} }
    }
    return false;
}

public static boolean mv(File source, File target) {
    if (!source.exists() || !target.exists()) {
        return false;
    }
    try {
        StringBuilder command = new StringBuilder("mv ");
        command.append(getCommandLineString(source.getAbsolutePath()));
        command.append(' ');
        command.append(getCommandLineString(target.getAbsolutePath()));
        return execute(false, command.toString());
    } catch (Exception e) {
        e.printStackTrace();
        return false;
    }
} 
```

# c# - 拖动时在光标下绘制图像

> ID：14922354
> 
> 赞同：0
> 
> 时间：2013-02-17T14:55:05.567
> 
> 标签：c#, windows-8, drag-and-drop, microsoft-metro, winrt-xaml

在进行拖放（C＃，WinRT）时在光标下显示拖动项目（图像）的最简单方法是什么？

在 WPF 中使用 Adorner 很容易，但此功能在 WinRT 应用程序中不可用。

效果应该与在 Firefox 浏览器中拖动图像时相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T20:56:14.813

使用弹出窗口并将您想要的任何内容放入 WPF 中的 AdornerLayer - 在弹出窗口中。或者，将面板放在工作区顶部的某个位置，然后将内容放在那里。在您的自定义装饰层上设置 IsHitTestVisible 也很有意义。

# jboss - Hyperic 5.0 在 JBoss 中导出自定义 MBean

> ID：14922356
> 
> 赞同：0
> 
> 时间：2013-02-17T14:55:29.327
> 
> 标签：jboss, export, jmx, hyperic

1.  我们正在使用 JBoss AS 7.1.1 和 Spring Integration。
2.  我们通过 JBoss 原生 MBeanServer 导出 Spring Integration JMX MBean
3.  在我们公司，我们使用 Hyperic 5.0 Enterprise 进行资源监控

在尝试将 JBoss MBeanServer 连接到 Hyperic 时，使用以下 JMX 连接配置

```
<config><option name="jmx.url" description="JMX URL to MBeanServer" default="service:jmx:remoting-jmx://localhost:9999" /> <option name="jmx.username" description="JMX username" optional="true" /> <option name="jmx.password" description="JMX password" optional="true" type="secret" /></config> 
```

我在 Hyperic 代理中收到 NullPointerException

```
java.lang.NullPointerException
 at org.hyperic.hq.product.jmx.MxUtil$JMXConnectorKey.hashCode(MxUtil.java:495)
 at java.util.HashMap.get(Unknown Source)
 at org.hyperic.hq.product.jmx.MxUtil.getCachedMBeanConnector(MxUtil.java:435)
 at org.hyperic.hq.product.jmx.MxUtil.getValue(MxUtil.java:654)
 at org.hyperic.hq.product.jmx.MxUtil.getValue(MxUtil.java:313)
 at org.hyperic.hq.product.jmx.MxMeasurementPlugin.getValue(MxMeasurementPlugin.java:58)
 at org.hyperic.hq.product.MeasurementPluginManager.getPluginValue(MeasurementPluginManager.java:171)
 at org.hyperic.hq.product.MeasurementPluginManager.getValue(MeasurementPluginManager.java:269)
 at org.hyperic.hq.product.MeasurementPluginManager.getValue(MeasurementPluginManager.java:130)
 at org.hyperic.hq.product.MeasurementPluginManager.getValue(MeasurementPluginManager.java:122)
 at org.hyperic.hq.measurement.agent.server.MeasurementCommandsService.getMeasurements(MeasurementCommandsService.java:212)
 at org.hyperic.hq.measurement.agent.server.MeasurementCommandsServer.dispatchCommand(MeasurementCommandsServer.java:174)
 at org.hyperic.hq.agent.server.CommandDispatcher.processRequest(CommandDispatcher.java:113)
 at org.hyperic.hq.agent.server.CommandListener.handleConn(CommandListener.java:216)
 at org.hyperic.hq.agent.server.CommandListener.access$100(CommandListener.java:57)
 at org.hyperic.hq.agent.server.CommandListener$AgentDispatchTask.run(CommandListener.java:200)
 at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
 at java.lang.Thread.run(Unknown Source) 
```

1.  我在哪里可以找到 Hyperic 代理的源代码？
2.  如何导出这个权利？我看到了一些旧的参考资料，但它们似乎已经过时，针对 JBoss 5.0，不适合我。这个任务有更全面的描述吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:59:07.417

您可以在此处找到所有 Hyperic（服务器和代理）源 - [http://git.springsource.org/hq/hq/trees/master](http://git.springsource.org/hq/hq/trees/master)

我不确定您所说的“出口”是什么意思。如果你能描述你到底想要做什么，也许我可以帮忙（我之前写过一些自定义插件）。

# javascript - 在 jQuery Flip 插件中使用 javascript variavl

> ID：14922359
> 
> 赞同：1
> 
> 时间：2013-02-17T14:56:00.087
> 
> 标签：javascript, jquery, html, web

我有这个代码。在“内容”部分，我希望显示一个变量 - currentCard。

这是代码。任何帮助深表感谢！

```
 $("#middle").flip({
    direction:'rl',
    content:'currentCard',
    color:'#fff'
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:02:41.953

奇怪的是，没有引号不适合你，试试这个代码：

```
var currentCard = "card123";
console.log(currentCard);

$("#middle").flip({
    direction:'rl',
    content:currentCard,
    color:'#fff'
}) 
```

要查看控制台输出，请使用浏览器或 Firebug 的开发人员工具。

如果此代码适用于“cart123”，请删除定义 currentCard 的行并保留控制台打印以确保此变量的值是您认为的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:02:51.923

你的代码不应该说：

```
$("#content").flip({  //changed to 'content' from 'middle'
direction:'rl',
content:currentCard, //remove the quotes, because with the quotes, it'll anyway never get the value of the variable.
color:'#fff'
}); 
```

# c# - 将文本文件中的数据插入到 C# 中的表中

> ID：14922360
> 
> 赞同：-4
> 
> 时间：2013-02-17T14:56:11.397
> 
> 标签：c#, database, winforms, sql-server-2008

我有看起来像的文本文件

```
word
love
book
...
... 
```

我的 SQL Server 中有一个表。该表有一列`column1`。

如何`column1`从 C# winform 的文本文件中插入数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:02:13.060

起初我会开始逐行读取文件并将行值插入到`List<string>`.

这可以通过`StreamReader`. 它是`System.IO`- 命名空间的一部分。

```
List<string> myValues = new List<string>();
string line;    
// Read the file and display it line by line.
System.IO.StreamReader file = 
   new System.IO.StreamReader("c:\\test.txt");
while((line = file.ReadLine()) != null)
{
   myValues.Add(line);
} 
```

[然后通过OleDB](http://msdn.microsoft.com/de-de/library/aa288452%28v=vs.71%29.aspx)打开到您的数据库的 DB-Connection 。

`INSERT INTO`并通过语句 将值插入数据库。

例如：

```
private void InsertMyValue(string myValue){
     dbconnection.Open();
     string setValues = "INSERT INTO YourTable(myColumn) VALUES ('" + myValue+ "');";
     OleDbCommand cmd = new OleDbCommand(setValues, dbconnection);
     cmd.ExecuteNonQuery();
     dbconnection.Close();
} 
```

`foreach`然后在- 子句中调用该方法：

```
foreach(string myLine in myValues){ //Go through the List with all the Lines
       dbconnection.InsertMyValue(myLine); //Get every item in the List and call the Insert-Method
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:00:12.327

这将起作用：

```
var a = StreamReader("file.txt");
List<String> words = new List<String>();
While(String line = a.ReadLine())
{
    context.someTable.Add(new someTable(){column1=line});
}
context.SaveChanges(); 
```

# ios - UIButton 偶尔部分/不可见

> ID：14922368
> 
> 赞同：0
> 
> 时间：2013-02-17T14:57:13.747
> 
> 标签：ios, objective-c, uibutton, interface-builder

我有一个用 Interface Builder 构建的视图，它有一个按钮网格（像这样）：
XX
XX

底部的一对是引起问题的一对。按钮根本没有以编程方式发生任何事情（它们甚至没有连接到代码，它们只是调用选择器）。我已将两者的按钮图像设置为两个不同的图像。在为每个设置图像之前，它们都显示为按钮，但是一旦我设置图像，它们的行为就很奇怪。

有时（很少）他们表现得很好。其他时候，图像被挤压到一侧，填充不到按钮区域的一半。大多数时候，它们根本不会出现。每个按钮都是独立的，因此两个按钮的行为永远不会相同。它们设置为自定义按钮样式（不是圆形矩形按钮）。我没有得到的是顶部的一对按钮设置相同（实际上，它们被复制和粘贴）并且它们总是显示得很好。我已经比较了每个的属性，它们在这方面是相同的。

# android - 列表视图中的文本视图与另一个列表视图没有得到椭圆

> ID：14922372
> 
> 赞同：0
> 
> 时间：2013-02-17T14:57:28.040
> 
> 标签：android, android-listview, textview, ellipsis

我有这个问题，textView 中的文本最后没有变椭圆。当水平并排有两个列表视图时，文本视图位于服装列表视图内。左侧列表视图中的 textView 变椭圆，但右侧列表视图中的 textView 没有变椭圆。![在此处输入图像描述](../Images/490497dd7a7f0d82c34f85117b6f1492.png)

黄色圈出的文本（即左侧列表视图）很好，但蓝色圈出的文本不好（即右侧列表视图）。在每个列表视图中都有一个 imageView（箭头）、textView（分钟）、另一个 textView（有问题的名称）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:13:55.607

终于在这个线程中找到了解决方案：[两个TextViews并排，只有一个椭圆？](https://stackoverflow.com/questions/3785221/two-textviews-side-by-side-only-one-to-ellipsize)

添加属性：

```
enter code here android:layout_weight="1" android:ellipsize="end" android:inputType="text" 
```

# html - 图像未出现在 Firefox/Chrome 中；好的在 IE

> ID：14922377
> 
> 赞同：2
> 
> 时间：2013-02-17T14:57:55.610
> 
> 标签：html, google-chrome, firefox, image

我在这个页面上有一些 jpeg 图像，由于某种原因，它们在 Firefox 或 Chrome 中都没有显示，但在 IE 8 和 9 中很好。如果我单击 Firefox 浏览器源中的图像 URL，它显示得很好。

[http://www.chemoutsourcing.com/banners.php](http://www.chemoutsourcing.com/banners.php)

路径是正确的，使用完整和相对 url 的混合，并且正确使用了 IMG 标记。我对这种简单性感到非常困惑。

```
<div style="margin:5px 0;">
                        600px by 160px<br />
                        <img src="http://www.chemoutsourcing.com/images/banner_ads/mainheader_2013_600x160.jpg" border="1" width="600" height="160" alt="" />
                    </div>
                    <div style="margin:5px 0;">
                        600px by 160px<br />
                        <img src="images/banner_ads/mainheader_Pharma_600x160.jpg" border="1" width="600" height="160" alt="" />
                    </div>
                    <div style="margin:5px 0;">
                        160px by 600px<br />
                        <img src="images/banner_ads/mainheader_2013_160x600.jpg" border="1" width="160" height="600" alt="" />
                    </div>
                    <div style="margin:5px 0;">
                        160px by 600px<br />
                        <img src="images/banner_ads/mainheader_Pharma_160x600.jpg" border="1" width="160" height="600" alt="" />
                    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:16:37.190

我在 chrome 上使用了 inspect 元素，它显示了以下所有 img 元素的内联样式：

```
display: none !important; 
visibility: hidden !important;
opacity: 0 !important;
background-position: 600px 160px; 
```

这不可能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T15:49:27.510

最好的解决方案是偶然出现的。

我尝试在 Chrome Private 模式下查看此页面，它们看起来很好。所以这意味着...

浏览器扩展 AdBlock 正在读取源中图像的子文件夹“banner_ads”，并将它们视为要阻止的第 3 方内容。

重命名文件夹后，问题应该会自行消失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-21T10:09:51.437

有同样的问题。发现未正确显示的图片被命名为.JPG，而其他图片被命名为.jpg。重命名显然为我解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T06:15:43.680

更改目录名称以确保不存在“广告”一词。例如：如果图像源是 src=images/ **ads** /your_pic.png 则将文件夹“ads”重命名为除“ads”以外的任何名称。例如 - src=images/ **visitor_image** /your_pic.png

这应该有效，如果不是那么它与浏览器无关，它与您的重定向有关。ps 忽略这里提到的语法，使用你自己的。

干杯

# javascript - 如何在 javascript 中使用预加载的 CSS spritesheet？

> ID：14922379
> 
> 赞同：2
> 
> 时间：2013-02-17T14:58:00.157
> 
> 标签：javascript, css, background-image, image-preloader

我正在使用 HTML5 画布制作游戏。我有一个大精灵表，其中包含我在游戏中需要的每个精灵。我已经阅读了一些关于什么可能是最好的预加载资产技术，但我还没有找到任何具体的东西。

所以，我决定只选择一种技术：CSS spritesheets。我使用了[http://www.spritecow.com/](http://www.spritecow.com/)加载 spritesheet.gif 文件并生成 CSS 代码的地方。问题是我找不到任何关于如何在 javascript 和 canvas 元素中实际使用单个精灵的教程！

有人可以帮帮我吗？如果您知道任何其他更好的预加载技术或库（如果可能，可以预加载图像和声音）。

编辑：使用 jQuery 的解决方案也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:13:53.443

***预加载：***

> 精灵表只是一个图像，所以像任何其他图像一样预加载。也就是说，“jQuery 方式”将是：`var $mySprite = $("<img>").attr("src", "myURL");`

（来源：[使用 Jquery 预加载 spritesheet](https://stackoverflow.com/questions/11842611/preload-a-spritesheet-using-jquery)）

***应用于元素：***

无需使用 javascript，因为这可以通过简单的 css 完成。

1 -`sprite`为每个使用 spritesheet 的元素添加一个类：

**html:** `<div class="sprite">`

**CSS：** `.sprite { background-image:url("your spritesheet url here") }`

`background-position`2 -根据特定元素图像在 spritesheet 上的位置，为您的元素添加 id，然后匹配 css规则。例如

**html:** `<div class="sprite" id="fire"></div>`

**CSS：**

```
#fire {
  background-position: -100px -50px;
  height: 20px;
  width:  40px;
} 
```

# c# - 使用 HTTPWebRequest 的实时数据

> ID：14922383
> 
> 赞同：0
> 
> 时间：2013-02-17T14:58:29.177
> 
> 标签：c#, windows-phone-8

如何在 C# 中从服务器获取实时（连续）数据？

我打开 HTTPWebRequest 但服务器没有完成该请求，服务器每 20 秒发送一些文本数据，我想在服务器完成请求 10 分钟后处理文本数据并显示给用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:03:09.113

HTTP 不是会话协议。它本来是这样工作的

1.  打开连接
2.  发送请求
3.  收到回复
4.  关闭连接

您可以做的基本上是使用`TCPClient / Socket`替代，它将您移动到低于 HTTP 的层并允许您创建持久连接。

有多种框架可以让您的生活更轻松。

此外，您可能想看看[Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:03:54.357

您可以使用 WebClient 的流式传输 API：

```
var client = new WebClient();
client.OpenReadCompleted += (sender, args) =>
{
    using (var reader = new StreamReader(args.Result))
    {
        while (!reader.EndOfStream)
        {
            string line = reader.ReadLine();
            // do something with the result
            // don't forget that this callback
            // is not invoked on the main UI thread so make
            // sure you marshal any calls to the UI thread if you 
            // intend to update your UI here.

        }
    }
};
client.OpenReadAsync(new Uri("http://example.com")); 
```

下面是 Twitter 流 API 的完整示例：

```
using System;
using System.IO;
using System.Net;

class Program
{
    static void Main()
    {
        var client = new WebClient();
        client.Credentials = new NetworkCredential("username", "secret");
        client.OpenReadCompleted += (sender, args) =>
        {
            using (var reader = new StreamReader(args.Result))
            {
                while (!reader.EndOfStream)
                {
                    Console.WriteLine(reader.ReadLine());
                }
            }
        };
        client.OpenReadAsync(new Uri("https://stream.twitter.com/1.1/statuses/sample.json"));
        Console.ReadLine();
    }
} 
```

# mysql - mysql / java executeUpdate如何返回匹配的行和更新的行

> ID：14922385
> 
> 赞同：0
> 
> 时间：2013-02-17T14:58:55.487
> 
> 标签：mysql, hibernate, sql-update

我需要使用 Java 驱动程序对条件 C 的给定表执行更新。

如果没有符合条件 C 的行，我需要在表中插入一个新实体。如果该行存在，那么更新就足够了。

为此，是否可以从更新查询中返回以下两个信息：

```
-Matched rows count
-Updated rows count 
```

我相信 executeUpdate 只返回更新的行数。问题是，如果更新查询不更新任何内容，它可能为零，所以我无法知道 0 是否意味着不匹配（并且我需要执行插入）或不更新。

注意：解决方法可能是插入一个随机字段（或日期），每次都会更新，但我更喜欢更好的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:45:26.777

更新和匹配的行数相同。即使该行已经具有更新中传递的值，它也会被计为更新的行：

```
id   name
1    foo

update mytable set name = 'foo' where id = 1;

--> 1 row updated 
```

# html - 对多个 PHP 文件使用相同的 HTML id 属性

> ID：14922389
> 
> 赞同：2
> 
> 时间：2013-02-17T14:59:24.760
> 
> 标签：html

我知道 id 选择器用于指定单个元素的样式。我的问题是，如果我有一个项目并且它有多个 php 文件，这些 php 文件可以包含具有相同 id 的元素吗？
这是示例：
php文件1：

```
...
<body>
<h1 id="test">header1</h1>
</body>
... 
```

php文件2：

```
 ...
<body>
<h3 id="test">header3</h3>
</body>
... 
```

css 文件：

```
#test
{
color:red;
} 
```

这种用法正确与否？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:00:53.000

如果它们都呈现在浏览器的同一个 HTML 页面中，这是不正确的，因为 ID 在单个页面上应该是唯一的。如果只渲染一个，那么它会是好的。

如果您希望您的网页验证为 XHTML 或 HTML，那么您应该在您的页面上使用唯一的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:01:33.660

对，那是正确的。事实上，这是个好主意。如果这样做，您可以在两个页面上使用相同的样式表。只要您不合并文件，这是一个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T15:03:09.010

你正在做的很好，但看起来课堂更适合你想做的事情。您通常使用 ID 来指定特定页面上的特定元素，并使用类将样式应用于相同或不同页面上的不同元素。

在多个页面上使用相同的 ID 会起作用，但 imo 类是更适合使用的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T15:06:11.367

每个 (HTML) 文档的每个元素的 id 应该是唯一的。

因此，除非您将 PHP 文件的输出合并到一个 HTML 文件中，否则没有问题。在 page1 你的一个 h1 标题将是红色的，在 page2 你的一个 h3 标题将被读取，等等。

就个人而言，我更喜欢 CSS 类的外观和 DOM ID 的功能，但它们可以混合使用。

# ios - 如何将图像名称添加到数组中？

> ID：14922391
> 
> 赞同：-2
> 
> 时间：2013-02-17T14:59:39.467
> 
> 标签：ios, cocoa-touch

在我的应用程序中，我在内存问题上有一个小问题。
我的编码技能还不够完善。
我的代码使用了我真正需要的四次内存。
我怎样才能改变我的编码？

我的代码是

```
-(void)viewDidAppear:(BOOL)animated
{ 
UIScrollView * ScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height-88)];// 44(UpperNavigtionBar),-88(Upper+Lower)
ScrollView.pagingEnabled = YES;

// Create a UIImage to hold Info.png
UIImage *image1 = [UIImage imageNamed:@"Image-001.jpg"];
UIImage *image2 = [UIImage imageNamed:@"Image-002.jpg"];
UIImage *image3 = [UIImage imageNamed:@"Image-003.jpg"];
UIImage *image4 = [UIImage imageNamed:@"Image-004.jpg"];
UIImage *image5 = [UIImage imageNamed:@"Image-005.jpg"];
UIImage *image6 = [UIImage imageNamed:@"Image-006.jpg"];
UIImage *image7 = [UIImage imageNamed:@"Image-007.jpg"];
UIImage *image8 = [UIImage imageNamed:@"Image-008.jpg"];
UIImage *image9 = [UIImage imageNamed:@"Image-009.jpg"];
UIImage *image10 = [UIImage imageNamed:@"Image-010.jpg"];
UIImage *image11 = [UIImage imageNamed:@"Image-011.jpg"];
UIImage *image12 = [UIImage imageNamed:@"Image-012.jpg"];
UIImage *image13 = [UIImage imageNamed:@"Image-013.jpg"];

NSArray *images = [[NSArray alloc] initWithObjects:image1,image2,image3,image4,image5,image6,image7,image8,image9,image10,image11,image12,image13,nil];

NSInteger numberOfViews = 13;
for (int i = 0; i < numberOfViews; i++)
{
    CGFloat xOrigin = i * self.view.frame.size.width;

    UIImageView * ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height-88)]; // -88(Upper+Lower)
    [ImageView setImage:[images objectAtIndex:i]];

    [ScrollView addSubview:ImageView];
}    
ScrollView.contentSize = CGSizeMake(self.view.frame.size.width*numberOfViews, self.view.frame.size.height-88); // -88(for adding Image View as subview)
[self.view addSubview:ScrollView];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:00:17.383

你可以做几件事来限制你的内存使用。首先，您应该用图像的名称填充数组，而不是图像本身。鉴于您的图像命名方式，您应该能够在循环中执行此操作。其次，当您加载图像时，使用 imageWithContentsOfFile: 而不是 imageNamed:。后一种方法缓存图像，而前者没有。如果您使用 imageNamed：由于缓存，内存使用量将随着您滚动图像（即使使用延迟加载）而继续增长 - 在某些时候系统应该清除缓存，这应该可以防止您的应用程序崩溃，但我不'认为它不会保留系统以关闭设备后台的其他程序。

# ios - 没有看到 UIScrollView 上的 UITextField 时 resignFirstResponder

> ID：14922393
> 
> 赞同：2
> 
> 时间：2013-02-17T14:59:51.157
> 
> 标签：ios, cocoa-touch, uiscrollview

当我加载`UITextField`. 在它上面，我有一个并且我想在我将*它滚动*到我的视野之外时调用它。`becomeFirstResponder``ViewController``UIScrollView``resignFirstResponder``textField`

 *的位置`UITextField`可能会改变，但行为应该保持不变。关于如何实现这种事情的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:35:19.300

我会看看观察你`scrollView`的`contentOffset`财产的变化。有了`scrollView`'s`bounds`和`contentOffset`, 和`textField`'s 的知识，`frame`你可以计算出是否`textField`可见。像下面这样的东西应该可以工作：

```
CGRect scrollViewVisibleBounds = CGRectOffset(scrollView.bounds, scrollView.contentsOffset.x, scrollView.contentsOffset.y);
BOOL textFieldIsVisible = CGRectIntersectsRect(textField.frame, scrollViewVisibleBounds); 
```

您现在遇到的问题是如何观察`contentOffset`. 持续观察（即通过 KVO）实际上并不可行，因为您将在例如减速动画期间每秒收到多个更新。我会考虑将您设置`viewController`为 a并通过和 之类的回调[`UIScrollViewDelegate`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html)更新您的可见性。`textField``scrollViewDidEndDragging:``scrollViewDidEndDecelerating`*

# git - Git post-receive 钩子在推送后未运行

> ID：14922396
> 
> 赞同：3
> 
> 时间：2013-02-17T15:00:10.863
> 
> 标签：git, amazon-ec2

我有一个托管在 Amazon EC2 实例（运行 Ubuntu 12.04）上的网站。我希望能够使用 git 将更改推送到服务器，然后使用 post-receive 挂钩在工作目录中结帐。因此，在 hooks 目录中的服务器上，我有一个名为 post-receive 的文件，其中包含：

```
#!/bin/sh
GIT_WORK_TREE=/home/ubuntu/beta git checkout -f 
```

该文件具有权限：-rwxrwxr-x（即它是可执行的）。

在我的本地机器上，当我推送到服务器上的 git repo 时，推送成功并且 git repo 已更新。但是，不会运行 post-receive 挂钩。如果我手动运行钩子，它运行良好并更新工作目录。

git push 是通过 SSH 执行的，并且使用相同的用户，就像我手动运行钩子一样。

任何想法为什么钩子不会自动运行？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T19:00:47.520

我已经设置了一个本地相同的测试（即我从本地文件夹克隆）并且它工作正常。

为了查看脚本是否被执行，我添加了一个简单的触摸来查看它是否修改了任何文件

我的后接收看起来像这样

```
#!/bin/sh

touch /Users/raven/git_tests/live/.git/hooks/i_ve_been_run
GIT_WORK_TREE=/Users/raven/git_tests/live git checkout -f 
```

确保您的钩子名称准确`post-receive`，否则它将不起作用。

# windows-phone-7 - 迁移到 WP8 后 GeoCoordinateWatcher 无法正常工作

> ID：14922406
> 
> 赞同：0
> 
> 时间：2013-02-17T15:01:19.483
> 
> 标签：windows-phone-7, geolocation, windows-phone-8

我为 windows phone 7.1 开发了一个导航应用程序。那里运行良好。更新到 8.0 后，我的 GeoCoordinateWatcher 不再工作。我知道我可以改用 Geolocator，但我拒绝这样做，因为没有时间。

对于我的应用程序，我读取了观察者的当前位置，以将其存储为具有位置信息的对象实例。当我保存对象实例时，经度和纬度为 0.0。即使我在模拟器中更改位置仍然是 0.0。同样的问题出现在我使用 GeoCoordinateWatcher 的其他页面上。它不起作用。正如我已经说过的，在 WP 7.1 - 7.8 上它运行良好。

```
 public Map()
    {
        InitializeComponent();

        watcher = new GeoCoordinateWatcher();
        watcher.MovementThreshold = 20;
        watcher.StatusChanged += new EventHandler<GeoPositionStatusChangedEventArgs>(watcher_StatusChanged);
        watcher.PositionChanged += new EventHandler<GeoPositionChangedEventArgs<GeoCoordinate>>(watcher_PositionChanged);
    }

    void watcher_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
    {
        if (e.Position.Location.IsUnknown)
        {
            MessageBox.Show("Please wait while your prosition is determined.");
            return;
        }

        geo.Latitude = e.Position.Location.Latitude;
        geo.Longitude = e.Position.Location.Longitude;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-08T20:46:57.690

试试这个代码：

```
 GeoCoordinateWatcher watch;
public GeoCoordinate loc = null;
public MainPage()
{
    InitializeComponent();
    if (watch == null)
    {
        watch = new GeoCoordinateWatcher(GeoPositionAccuracy.High)
        {
            MovementThreshold=10
        };
        watch.Start();
        watch.PositionChanged += watch_PositionChanged;
    }
}
void watch_PositionChanged(object sender, GeoPositionChangedEventArgs<GeoCoordinate> e)
{
    //throw new NotImplementedException();
    Dispatcher.BeginInvoke(()=>LocUpdate(e));
}

void LocUpdate(GeoPositionChangedEventArgs<GeoCoordinate> e)
{
    try
    {
        location = new GeoCoordinate(e.Position.Location.Latitude, e.Position.Location.Longitude);

    }
    catch
    {
        MessageBox.Show("Error");
    }
} 
```

# php - php过滤搜索结果

> ID：14922409
> 
> 赞同：0
> 
> 时间：2013-02-17T15:01:29.367
> 
> 标签：php, mysql, search, filtering

你好我用php开发了一个搜索表单，它工作得很好，但是我想按字母顺序过滤，所以我在我的html文档A中定义了一些锚点| 乙| ……

在我的 php 文档中，我添加了：

```
 $search=$_POST['query']//query is the name of input in a form,on the same html doc
        $letter=$_GET['by']; 
```

从我的 sql 查询，

```
 $sql=SELECT Title FROM table where Title LIKE %search%; 
```

我补充说：

```
 if(isset($letter)){
             $sql .="AND Name LIKE '$letter' ";
           } 
```

我的问题是，例如，当我单击链接“A”时，它总是显示与名称以字母“A”开头的所有标题相对应的所有条目。（我的表有 2 列，标题和名称）所以我想当我进行搜索以过滤结果（当我单击名称以“A”开头的“A”标题时获取，并且仅在搜索结果中返回那些）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:02:45.640

我希望你在 AND 之前有一个空格；但你需要通配符 LIKE

```
$sql .=" AND Name LIKE '$letter%' "; 
```

# java - 如何使用 JList 中的元素搜索 LinkedList，并打印到 JEditorPane

> ID：14922412
> 
> 赞同：1
> 
> 时间：2013-02-17T15:01:49.260
> 
> 标签：java, jlist, jeditorpane, listselectionlistener

我需要知道如何检索 JList 中的元素，我可以使用它来搜索 LinkedList，然后将该数据添加到 JEditorPane。

我一直在尝试使用 ListSelectionListener，但无法返回列表中的元素。

干杯。

# jquery - 根据多个输入的验证禁用提交按钮

> ID：14922415
> 
> 赞同：1
> 
> 时间：2013-02-17T15:02:14.823
> 
> 标签：jquery, submit, attr

我已经使用 keyup 检查了每个输入或使用不同的 js 文件更改事件。因此，用户可以在错误发生时看到他/她的错误。现在我想收集输入的所有验证信息并使点击事件提交按钮以启用或禁用提交。

我尝试为所有输入创建一个名为“isvalid”的自定义属性，并根据验证结果集“isvalid”为“true”或“false”。我的计划是检查所有 isvalid 值并禁用或启用提交按钮。但是我只能在同一个事件中获得更改的属性值，而不是在不同的 js 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:07:46.527

您可以为每个输入指定一个特定的类名以表明它需要验证，并在您提交表单时循环它们：

```
$('.submit_button').click(function(event) {
   $('.required').each(function() {
      if (!this.value) {
         event.preventDefault();
         alert('Please fill in all required fields');
      }
   });
}); 
```

# python - 方法都需要缩进一级以表明它们是python中类的方法

> ID：14922417
> 
> 赞同：0
> 
> 时间：2013-02-17T15:02:40.520
> 
> 标签：python, encryption, rsa

我正在关注 Wiki 中的 RSA 算法：[http://en.wikipedia.org/wiki/RSA_(algorithm)](http://en.wikipedia.org/wiki/RSA_(algorithm))

我正在使用 Python 3.3.0，并且正在尝试进行 RSA 加密，但遇到了两个我不知道该怎么做的问题。

在 Encryptions 类中，我的方法都需要缩进一级以表明它们是类的方法而不是全局函数。

当主脚本最后要求输入时，如果我只是按回车键，则会引发 Python 到达意外 EOF 的异常。

我怎样才能做到这一点 ？

到目前为止我的代码：

模块化.py

```
def _base_b_convert(n, b):
   if b < 1 or n < 0:
      raise ValueError("Invalid Argument")

   q = n
   a = []
   while q != 0:
      value = int(q % b)
      a.append(value)
      q =int(q / b)
   return a

def mod_exp(base, n, mod):
    if base < 0 or n < 0 or mod < 0:
    raise ValueError("Invalid Argument")
    a = (_base_b_convert(n, 2))
    x = 1
    pow = base % mod
    for i in range(0, len(a)):
    if a[i] == 1:
        x = (x * pow) % mod
    pow = pow**2 % mod
    return x 
```

主文件

```
from encryptions import Encryptions

def main():
    enc = Encryptions()
    message = enc.encrypt(message)
    print(message)
    print()
    print("Decrypting message:")
    message = enc.decrypt(message)
    print(message)

    input("--Press any key to end--")

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:12:34.097

您的缩进已关闭。有时你有 3 个空格，有时 4 个，有时 5 个。

另一个例子是here

```
def mod_exp(base, n, mod):
    if base < 0 or n < 0 or mod < 0:
    raise ValueError("Invalid Argument")
    a = (_base_b_convert(n, 2))
    x = 1
    pow = base % mod
    for i in range(0, len(a)):
    if a[i] == 1:
        x = (x * pow) % mod
    pow = pow**2 % mod
    return x 
```

它应该看起来更像

```
def mod_exp(base, n, mod):
    if base < 0 or n < 0 or mod < 0:
        raise ValueError("Invalid Argument")
    a = (_base_b_convert(n, 2))
    x = 1
    pow = base % mod
    for i in range(0, len(a)):
        if a[i] == 1:
            x = (x * pow) % mod
        pow = pow**2 % mod
    return x 
```

每当您使用 if、while、for 等时，您都需要缩进一层。

（这些问题可能只是因为它被错误地复制到了stackoverflow中？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:07:45.937

`input()`在 Python 2 中不是你想的那样——相反，它评估作为 Python 代码输入的字符串，这不是你想要的。相反，使用`raw_input`.

至于你的缩进问题，那只是 Python 语法。你无能为力。

# android - 如何在android中实现周视图日历？

> ID：14922421
> 
> 赞同：0
> 
> 时间：2013-02-17T15:02:54.200
> 
> 标签：android, android-layout, android-widget

我想实现如下所示的周视图日历。另一个例子可能是 ICS Google 日历。事件将来自数据库。到目前为止，我不知道从哪里开始。任何想法我如何做到这一点？代码和布局将不胜感激。

* * *

![在此处输入图像描述](../Images/9ea43c3ba55b7346c086f5587c49fad2.png) ![在此处输入图像描述](../Images/01559fe09b4884e339a8a182ed853f36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-24T06:30:19.937

Android 周视图。你能在这里使用这个[源代码吗](https://github.com/AnilMH/Android-WeekView-Demo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-23T17:00:47.000

stock android 附带的日历应用程序是开源的。您可以在[此处查看源代码](https://github.com/android/platform_packages_apps_calendar)。了解此应用程序布局可能是一个不错的起点。

也许您会想重用其中的一些代码。

# wpf - 认证错误：XNA 游戏中的背景音乐

> ID：14922422
> 
> 赞同：0
> 
> 时间：2013-02-17T15:03:06.980
> 
> 标签：wpf, windows-phone-7.1, xna-4.0

由于背景音乐错误，我的申请未能通过认证。拒绝的理由如下

1.  应用音乐在播放音乐的同时播放

2.  应用程序没有允许用户配置背景音乐的设置。

请建议我“允许用户配置背景音乐”所指的内容。请问我需要公开什么设置/代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:10:57.997

您是否真的阅读过 Microsoft 的认证要求？

> **6.5.1 – 初始启动功能**
> 
> 当应用启动时用户已经在手机上播放音乐时，应用不得通过调用 Microsoft.Xna.Framework.Media.MediaPlayer 类暂停、恢复或停止手机 MediaQueue 中的活动音乐。
> 
> 如果应用程序播放自己的背景音乐或调整背景音乐音量，它必须征得用户同意停止播放/调整背景音乐（例如消息对话框或设置菜单）。每次启动应用程序时都必须出现此提示，除非向用户提供了选择加入设置并且用户已使用此设置选择加入。
> 
> **6.5.2 - 可配置的功能**
> 
> 如果应用程序播放背景音乐，则应用程序必须为用户提供背景音乐和背景音乐音量的可配置设置。

听起来您的应用程序不执行其中任何一项。

# python - 在 Windows 7 上导入 bottle.py 时出现 Python 错误

> ID：14922426
> 
> 赞同：2
> 
> 时间：2013-02-17T15:03:09.317
> 
> 标签：python, windows, web-services, bottle

我已经在 Windows 7 机器上安装了 Python 3.3。我想尝试使用 Bottle 微型 Web 框架。我下载了bottle.py（他们网站上的最新版本）并将它放在我的应用程序文件夹中。

当我在教程中执行第一行“从瓶子导入路线，运行，模板”时，我收到了以下错误消息：

```
*C:\Dev>python
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:57:17) [MSC v.1600 64 bit (AM
D64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from bottle import route,run,template
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File ".\bottle.py", line 564
    raise exc_info[0], exc_info[1], exc_info[2]
                     ^
SyntaxError: invalid syntax
>>>* 
```

有什么建议可以解决这个问题并继续吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:08:20.940

您需要按照[瓶子安装说明](http://bottlepy.org/docs/dev/tutorial.html#installation)进行操作。

最新[版本已发布到 PyPI](http://pypi.python.org/pypi/bottle)，您仍然有旧版本的代码，它与 Python 3*不*兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:05:01.913

这是 5 天前引入的错误，今天已修复。只需再次下载bottle.py。或者使用 Martijn Pieters 建议的稳定版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:10:55.750

格式

```
raise Exception, args 
```

在 Python 3+ 中不再存在。

这就是该语句引发语法错误的原因：

```
raise exc_info[0], exc_info[1], exc_info[2] 
```

# javascript - jQuery UI 可拖动随机停止工作？

> ID：14922427
> 
> 赞同：1
> 
> 时间：2013-02-17T15:03:11.970
> 
> 标签：javascript, jquery, jquery-ui

我在页面上有很多 div（接近 20 个），它们都是 jQuery-UI 可调整大小和可拖动的。还有一些基于 css 的更改会在每个`div`. 在玩弄这些 div 的过程中，有时，其中一个只是“卡住”，即不能再被拖动。使用 Firebug 和控制台，我看到它确实有两个类：`ui-draggable`但`ui-resizable`它仍然只是“卡住”。页面上的 div 过多时通常会发生这种情况吗？只是 jQuery-UI 会这样卡住吗？大多数情况下，一切都按预期进行，有时任何`div`s 突然无法移动。

我使东西可拖动的代码很简单。对于每个 div，我都有一个可以自行运行的插件，它的部分代码是：

```
 $this.draggable({
            cursor: 'move'
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-05T12:18:52.520

我最近遇到了这个问题......我不知道原因是什么。据我所知，这可能是由鼠标处理程序周围发生的事情引起的——可能意外地重新绑定了`draggable`正在使用的东西，但我看不到任何迹象。无论哪种方式，draggable 都在默默地失败，并且在它发生时恢复我正在处理的更改并没有帮助 - 在一天开始时工作的代码现在也失败了。

对我来说，这表明我的浏览器和开发服务器的交互方式有些奇怪，因为该代码之前工作过，现在它已经停止了。我的解决方案是停止服务器，关闭浏览器，在我的项目上运行`git clean -fdx`-*小心*存在其他源代码控制系统 - 然后重新启动服务器和客户端。嘿，我的旧东西很快就起作用了——新代码也起作用了，一旦我从我的 git stash 中弹出它。

# stream - 从相机捕获 RAW8 视频流

> ID：14922428
> 
> 赞同：0
> 
> 时间：2013-02-17T15:03:23.980
> 
> 标签：stream, directshow, video-capture, image-formats

我有一台具有 RAW8 流的相机，拜耳模式：

```
 B  Gr B  Gr...
                                  Gr R  Gr R... 
```

我可以使用 DirectShow Sample Grabber Filter 捕获流吗？如果没有，我可以使用任何其他 API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:36:17.403

如果相机与 DirectShow 兼容，则可以。在这种情况下，您将能够在 GraphEdit 中的视频捕获设备下将其视为一个选项，并且您还可以检查相机宣传的媒体类型。

# html - 如果窗口太小，则在固定的 div 上滚动

> ID：14922430
> 
> 赞同：2
> 
> 时间：2013-02-17T15:03:40.890
> 
> 标签：html, css, menu, fixed

我有一个仅用 css 和 html 编码的菜单栏，该栏固定在顶部，但是当屏幕调整大小并且您尝试在 x 轴上滚动页面时，该栏停留在左上角，您可以滚动小窗口，但不能滚动页面。

这是我的代码：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <link rel="stylesheet" href="StyleSheets/StyleSheet.css" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>TeraShare</title>
        <script type="text/javascript" src="JQuery/JQuery.js"></script>
        <script type="text/javascript" src="Scripts/JavaScript.js"></script>
    </head>

    <body>
        <div id="Wrapper">
            <div id="Menu">
                <div id="Logo"><a href=""><img src="Pictures/Logo.png" /></a></div>
                <div id="Buttons">
                    <a href="LogIn/"><div class="Button" title="LogIn">LogIn</div></a>
                    <a href="Register/"><div class="Button" title="Register">Register</div></a>
                    <div class="Button" title="Menu">Menu&nbsp;<span class="Triangle"></span></div>
                </div>
            </div>
            <div id="Content">
                <div id="Fix"></div>
            </div>
        </div>
    </body>
</html> 
```

CSS：

```
 #Menu
{
    position:fixed;
    top:0px;
    width:100%;
    min-width:965px;
    height:49px;
    border-bottom:rgba(82,82,82,1);
    box-shadow:0 2px 3px rgba(182, 182, 182, 0.75);
    background-color:rgb(68, 68, 68);
    z-index:100;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:45:04.803

将固定 div 的更改`left`为窗口滚动时的 scrollLeft 值。

```
$(window).on('scroll', function () {
    $("#Menu").css('left', '-' + $(this).scrollLeft() + 'px');
}); 
```

[http://jsfiddle.net/ebeBw/1/](http://jsfiddle.net/ebeBw/1/)

# javascript - 给 selector.method 作为参数，调用它

> ID：14922434
> 
> 赞同：1
> 
> 时间：2013-02-17T15:04:20.773
> 
> 标签：javascript, jquery, callback, function-pointers

我有一个函数`$.doSomething()`可以做一些事情，然后应该以`$('selector').function()`. 我不想`$.doSomething()`知道它在叫什么，这应该由用户决定。

我在 JSBin 上创建了一个小例子：http: [//jsbin.com/umonub/11/edit](http://jsbin.com/umonub/11/edit)

是否可以将调用存储`$('#foo').doStuff();`在函数对象中并将其作为参数提供给然后调用它的函数？

这是示例代码（以防有人无法访问 JSBin 或它在那里被删除）：

**脚本.js**

```
$(document).ready( function() {
  var callback = $('#foo').doStuff();
  $.doSomething(callback);
});

$.extend({
  doSomething: function(callback) {
    //do some stuff
    //call the callback
  }
});

$.fn.doStuff = function() {
  $(this).text("Stuff Done");
}; 
```

**索引.html**

```
<html>
<head>
  <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="script.js"></script>
</head>
<body>
  <p id="foo"></p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:06:03.357

当然，只需放入`$('#foo').doStuff()`一个函数中：

```
var callback = function() {
    $('#foo').doStuff();
}; 
```

# android - 如何在拖动之前获取标记位置？

> ID：14922435
> 
> 赞同：12
> 
> 时间：2013-02-17T15:04:23.917
> 
> 标签：android, google-maps, google-maps-markers

在 Google Maps API v2 中，我想在拖动标记之前存储上一个位置，但是，当我开始拖动标记时，它总是会跳转到某个较高的位置，所以在回调中`onMarkerDragStart`，我无法获得最后一个位置。

这是一个错误，还是可以解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-06-05T11:56:05.857

标记“跳跃”的事实是因为否则您由于手指在其上方而看不到标记。为了获得标记位置，您应该在开始拖动之前保存它。文档很清楚：

> 当标记开始被拖动时调用。可以通过 getPosition() 访问标记的位置；此位置可能与开始拖动之前的位置不同，因为标记在触摸点上方弹出。

所以想法是保持位置“缓存”并在拖动开始时从这个缓存的变量中获取它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T10:54:11.323

一个可以解决你问题的例子

```
function makeMarker(iPos) {
    var marker = new google.maps.Marker({
        position: iPos,
        draggable: true,
        map: map,
        zIndex: 1001 
    });
    google.maps.event.addListener(marker, 'dragstart', function() {
        iPos = marker.getPosition();
    });         
    google.maps.event.addListener(marker, 'dragend', function(event) {    
        console.log("Position after dragging: ", event.latLng.toUrlValue(6));
        console.log("Position before dragging: ", iPos.toUrlValue(6));
    });     
} 
```

# c# - .NET Monitor 究竟何时进入内核模式？

> ID：14922437
> 
> 赞同：9
> 
> 时间：2013-02-17T15:04:39.907
> 
> 标签：c#, .net, multithreading, .net-4.0, .net-4.5

我想编译一个列表，列出所有可能的条件，使 Monitor 进入内核模式或使用内核同步对象。

同步块有一个引用内核对象的字段。因此，我推断`lock`有时会进入内核模式。

我发现了这个：*[Lock (Monitor) internal implementation in .NET](https://stackoverflow.com/questions/5111779/lock-monitor-internal-implementation-in-net)*

但是它有太多问题需要回答，唯一有用的信息是 OP 通过简单地说明`lock`有时会进入内核模式来回答他自己的问题。也没有任何链接可以支持该答案。

究竟什么时候会`lock`进入内核模式（不是如果而不是为什么 - 什么时候）？

如果与旧版本有任何区别，我更有兴趣了解 .NET 4 和 4.5。

来自 Richter 的书：*“同步块包含内核对象的字段、拥有线程的 ID、递归计数和等待线程计数。”*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-17T17:09:31.747

大多数这类问题都可以通过查看[SSCLI20 发行版](http://www.microsoft.com/en-us/download/details.aspx?id=4917)中提供的 CLR 源代码来回答。它现在已经过时了。它是 .NET 2.0 的经典版本，但许多核心 CLR 功能并没有太大变化。

您要查看的源代码文件是 clr/src/vm/syncblk.cpp。三个类在这里发挥作用。AwareLock 是负责获取锁的低级锁实现，SyncBlock 是实现等待进入锁的线程队列的类，CLREvent 是操作系统同步对象的包装器，您就是询问。

这是 C++ 代码，抽象级别相当高。此代码与垃圾收集器进行大量交互，并且包含大量测试代码。因此，我将简要介绍该过程。

SyncBlock 具有存储 AwareLock 实例的 m_Monitor 成员。SyncBlock::Enter() 直接调用 AwareLock::Enter()。它首先尝试尽可能便宜地获取锁。首先检查线程是否已经拥有锁，如果是这样，就增加锁计数。接下来使用 FastInterlockCompareExchange()，这是一个与 Interlocked.CompareExchange() 非常相似的内部函数。如果锁没有被争用，那么这会很快成功并且 Monitor.Enter() 返回。如果不是，则另一个线程已经拥有该锁，并使用 AwareLock::EnterEpilog。需要让操作系统的线程调度程序参与进来，因此使用 CLREvent。如果需要，它会动态创建，并调用其 WaitOne() 方法。这将涉及内核转换。

因此，足以回答您的问题：当锁被争用并且线程必须等待时，Monitor 类进入内核模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T16:37:30.160

当锁被严重争用时。

如果锁被轻微争用，则有一个快速的 CPU 自旋锁来等待锁再次被释放，但如果等待时间不够长，锁被释放，线程将阻塞等待互斥体，这涉及暂停线程和其他此类管理的内核模式调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:27:50.227

在其 spinwait 步骤之后，可能存在额外的智能，例如在单核机器上跳过 spinwait，因为竞争锁只能在释放线程后释放。

# android - 如何在android的viewflipper视图中获取有关按钮的特定信息？

> ID：14922441
> 
> 赞同：0
> 
> 时间：2013-02-17T15:05:01.193
> 
> 标签：android, button, viewflipper, onclicklistener

我尝试制作一个使用 viewFlipper 来翻转一些文本的应用程序。内容从光标填充，视图以编程方式添加。

每个视图都基于相同的 xml 布局文件，每个视图包含 2 个按钮。

当我按下一个按钮时，我会触发 onClick 事件，但是如何将自定义变量传递给 onclick 事件？

我有一个 var **id**女巫，我需要对每个视图都不同，并且我需要在按下按钮时获得这个值。

这是我的代码：

```
Cursor cur = db.rawQuery(
                "SELECT * FROM items WHERE id_cat = " + id_cat + "", null);

        TextView t = new TextView(this);

        int total_items = cur.getCount();
        if (cur.moveToFirst()) {
            do {
                String data = cur.getString(cur.getColumnIndex("item_text"));
                String item_id= cur.getString(cur.getColumnIndex("_id"));

                int current = cur.getPosition()+1;

                // load xml template
                 LayoutInflater inflater = LayoutInflater.from(this);
                 View v = inflater.inflate(R.layout.item_flip, null, false);
                     ToggleButton btnf=(ToggleButton)v.findViewById(R.id.favorite);
                 btnf.setOnClickListener(new OnClickListener() { 

                        public void onClick(View v) {
                            switch(v.getId()){
                             case R.id.favorit:
                                // switch  favorite
                                SQLiteDatabase db = dbAdapter.openDataBase();
                                if(status==1) {
                       //// HERE I NEED THE ITEM_ID DISTINCT FOR EACH VIEW
                                    db.execSQL("UPDATE items SET favorite = 0 WHERE items._id = " + item_id);

                                 } else {
                                db.execSQL("UPDATE items SET favorite = 1 WHERE items._id = " + item_id);

                                 }

                                System.out.println("Switch");
                                db.close();
                             break;

                            }       
                        }
                      });

                 vf.addView(v);

            } while (cur.moveToNext()); 
```

该按钮工作正常，但未传递项目 ID。

如果我的 viewflipper 中有 5 个项目，item_id 将变为 1，然后是 2，然后是 3，然后......然后是 5，并且我按下 item_id 的按钮中没有任何一个将是最后一个视图的 id。

如果您有任何解决方案，请提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:24:22.527

我的天啊，

这是我第三次在这里发布问题，在接下来的 10 分钟内，我自己解决了问题 :)

如果有人需要类似的东西，他就是解决方案：

在我的 XML 中，我添加了一个标签：

```
 <ToggleButton
        android:id="@+id/favorite"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/share"
        android:layout_marginTop="6dip"
        android:textOn="Favorit"
        android:textOff="Favorit"
        android:text="Favorit"
        android:tag="999" /> 
```

然后当我构建指定的视图时，我用我的 item_id 修改每个分离视图上的标签：

```
 ToggleButton swc_favorite = (ToggleButton) v.findViewById(R.id.favorite);

             if(status==1) {
                 swc_favorit.setChecked(true);
             } else {
                 swc_favorit.setChecked(false);
             }
             // set favorit tag
             swc_favorit.setTag(item_id); 
```

接下来在 clicklistener 中，我从点击的视图中获取该标签：

```
 final ToggleButton btnf=(ToggleButton)v.findViewById(R.id.favorite);
             btnf.setOnClickListener(new OnClickListener() {  
 public void onClick(View v) {
    String item_id_clicked = (String) btnf.getTag();
 ........ 
```

需要将 ToggleButton btnf 设置为 final 才能工作。

谢谢，希望对你们中的一些人有所帮助。

# java - java swing中的HTML渲染

> ID：14922442
> 
> 赞同：2
> 
> 时间：2013-02-17T15:05:13.343
> 
> 标签：java, html, swing, html-rendering

我现在正在使用 JEditorPane 来显示 HTML，但它只支持 HTML4 和 CSS1，并且它在 UTF-8 编码方面存在问题。有什么更好的渲染 HTML 吗？由于它的大小，我不想将 webkit 导入我的项目。你能给我推荐一些东西吗？如果我不需要导入任何库，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T12:20:18.583

[SwingBox](http://cssbox.sourceforge.net/swingbox/)是一个用于显示 HTML 文档的 Swing 组件。它基于纯 Java 的 CSSBox 库 - 您不需要链接 Webkit 或其他本机库。软件包中包含一个演示。这个问题已经在这里被问过好几次了，例如[这个问题](https://stackoverflow.com/questions/12530820/browse-html-file-in-swing-form)，更多的参考资料。

# django - 如何在django中将数据插入到1对1关系表中

> ID：14922445
> 
> 赞同：0
> 
> 时间：2013-02-17T15:05:27.180
> 
> 标签：django, model

我是 Django 的新手。我使用 django User 和 2 个扩展表（profile_table、more_table），每个表都与 User 具有一对一的关系。所以在models.py下，我有2个类（一个用于profile_table，另一个用于more_table）。当我创建一个新用户时，我会将基本数据插入到 auth_user 表中，并将其他信息插入到 profile_talbe 和 more_table 中。如何以及在何处构建此插入方法？我应该使用班级管理器吗？或覆盖保存功能？或者在 profile_table 类下创建一个类方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:09:39.583

如果您从配置文件模型创建新实例，您应该在配置文件模型类中编写静态方法。例子：

```
class Profile(models.Model):
   name = models.CharField(max_length=100)

   @staticmethod
   def create_profile(name=name):
        profile = Profile(name=name)
        profile.save()

        return profile 
```

# php - CodeIgniter form_validation 未显示错误

> ID：14922446
> 
> 赞同：3
> 
> 时间：2013-02-17T15:05:29.743
> 
> 标签：php, html, forms, codeigniter, validation

我的表单验证错误停止工作，昨天还在工作，我一定做错了什么，但似乎找不到。

当我填写用户名和电子邮件地址时，它会发送电子邮件并回显“电子邮件已发送！”。

当我只是单击注册而不填写任何信息时，它只会重定向到加载视图的用户/注册。

**控制器/user.php：**

```
public function signup_validation() {
    $this -> load -> library('form_validation');

    $this -> form_validation -> set_rules('username', 'Username', 'trim|required|alpha|min_length[3]|max_length[25]');
    $this -> form_validation -> set_rules('email', 'Email', 'required|trim|valid_email|is_unique[users.email]');
    $this -> form_validation -> set_rules('password', 'Password', 'required|trim');
    $this -> form_validation -> set_rules('cpassword', 'Retype', 'required|trim|matches[password]');

    if ($this -> form_validation -> run()) {
        $key = md5(uniqid());

        $this -> load -> library('email', array('mailtype' => 'html'));
        $this -> load -> model('users');
        $this -> email -> from('', "");
        $this -> email -> to($this -> input -> post('email'));
        $this -> email -> subject('Confirm your account.');
        $message = "<p>Thank you for signing up!</p>";
        $message = "<p><a href='" . base_url() . "user/activate/$key'>Click here</a> to confirm your account.</p>";
        $this -> email -> message($message);
        if ($this -> users -> add_temp_user($key)) {
            if ($this -> email -> send()) {
                echo "The email has been sent!";
            } else {
                echo "Could not send the email.";
            }
        } else {
            echo "Problem adding user to database.";
        }
    } else {
        redirect('user/signup');
    }
} 
```

**意见/signup.php**

```
<form class="form-horizontal" action="<?php echo base_url() . 'user/signup_validation'; ?>" method="post" accept-charset="UTF-8">
    <?php echo validation_errors(); ?>
    <div class="control-group">
        <label class="control-label" for="inputEmail">Username</label>
        <div class="controls">
            <input name="username" type="text" id="inputUsername" placeholder="username" value="<?php echo $this -> input -> post('username'); ?>"/>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputEmail">Email</label>
        <div class="controls">
            <input name="email" type="email" id="inputEmail" placeholder="email" value="<?php echo $this -> input -> post('email'); ?>"/>
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputPassword">Password</label>
        <div class="controls">
            <input name="password" type="password" id="inputPassword" placeholder="password" />
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputRetype">Retype</label>
        <div class="controls">
            <input name="cpassword" type="password" id="inputRetype" placeholder="retype" />
        </div>
    </div>
    <div class="form-actions">
        <input name="signup_submit" type="submit" class="btn" value="Sign up" />
    </div>
</form> 
```

**我自动加载助手：**

`$autoload['helper'] = array('url', 'form');`

**.ht 访问：**

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-17T15:20:22.817

把`$this->load->view('sign_up');`代替 `redirect('user/signup');`

当您加载视图并且不将其重定向到加载该页面的控制器方法时，会显示验证错误。

# ruby-on-rails - 在显示页面上嵌套 Rails 表单

> ID：14922448
> 
> 赞同：1
> 
> 时间：2013-02-17T15:05:57.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, has-many-through

我的用户和车辆之间有很多直接的关系。

```
User has many Ownerships
User has many vehicles through Ownerships.

Ownerships belongs to User and Vehicle

Vehicle has many Ownerships
Vehicle has many Users through Ownerships 
```

在车辆展示页面上，我想制作一个允许创建新用户并同时建立车辆和用户之间的关联的表单，即在所有权模型中添加一个条目，该条目填充当前正在查看的车辆的车辆 ID以及新创建的用户的用户 ID。

理想情况下，该页面将重定向回同一车辆展示页面。

我自己尝试过这样做，并且能够自己创建关联（并正确重定向回），但不能同时创建。

当我尝试从车辆显示页面添加用户时，我无法将当前车辆 ID 作为隐藏字段传递，而不会出现诸如未知属性车辆 ID 之类的错误。

如果我打算在车辆展示和 /user/new 上创建一个表格，我的 user_controller 也会有所不同。现在我正在尝试在创建方法中读取当前车辆页面。每次从用户新页面开始都会失败。

# mysql - 寻找 MySQL 帮助加入两个基于变量的表

> ID：14922449
> 
> 赞同：0
> 
> 时间：2013-02-17T15:06:00.007
> 
> 标签：mysql

我知道这有点复杂，我可以使用其他方法来完成，但请多多包涵。

我正在尝试将一个充满日期的表格与一个充满事件的表格连接起来，这样我就可以显示没有事件的日期。我写了一个可以很好地处理这个问题的查询，但是如果我在特定日期有多个事件，我似乎无法加入多个记录。我已经尝试了所有的连接变体。

请[在这里查看我的问题](http://sqlfiddle.com/#!2/d7cbf/2/0)

## SQL 代码

```
SELECT @RowNumber := @RowNumber + 1 AS DayNumber, D.Date, L.LessonID, L.Title 
FROM dates D 
JOIN (SELECT @RowNumber:= 0) R 
LEFT JOIN lessons L ON L.DayNumber = (@RowNumber+1) 
WHERE D.Date IN ('2012-01-01','2012-01-03','2012-01-05','2012-01-10') 
ORDER BY DayNumber ASC LIMIT 0, 50 
```

## 表架构

```
CREATE TABLE IF NOT EXISTS `dates` (
  `DateID` int(11) NOT NULL AUTO_INCREMENT,
  `Date` date NOT NULL,
  `TimeStamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`DateID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

INSERT INTO `dates` (`DateID`, `Date`, `TimeStamp`) VALUES
(1, '2012-01-01', '2013-02-16 17:38:07'),
(2, '2012-01-02', '2013-02-16 17:38:07'),
(3, '2012-01-03', '2013-02-16 17:38:07'),
(4, '2012-01-04', '2013-02-16 17:38:07'),
(5, '2012-01-05', '2013-02-16 17:38:07'),
(6, '2012-01-06', '2013-02-16 17:38:07'),
(7, '2012-01-07', '2013-02-16 17:38:07'),
(8, '2012-01-08', '2013-02-16 17:38:07'),
(9, '2012-01-09', '2013-02-16 17:38:07'),
(10, '2012-01-10', '2013-02-16 17:38:07');

CREATE TABLE IF NOT EXISTS `lessons` (
  `LessonID` int(11) NOT NULL AUTO_INCREMENT,
  `DayNumber` int(11) NOT NULL DEFAULT '0',
  `Title` varchar(1024) NOT NULL,
  `TimeStamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`LessonID`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

INSERT INTO `lessons` (`LessonID`, `DayNumber`, `Title`, `TimeStamp`) VALUES
(1, 1, 'asdfasdf', '2012-01-01 18:03:21'),
(2, 1, 'qwerqwer', '2012-01-05 18:03:21'),
(3, 3, '12341234', '2012-01-05 18:03:34'); 
```

## 结果

现在这会返回：

```
DAYNUMBER DATE  LESSONID    TITLE
1   January, 01 2012 00:00:00+0000  1   asdfasdf
2   January, 03 2012 00:00:00+0000  (null)  (null)
3   January, 05 2012 00:00:00+0000  3   12341234
4   January, 10 2012 00:00:00+0000  (null)  (null) 
```

但我希望它返回这个（注意第 1 天的第二行，标题为“qwerqwer”）：

```
DAYNUMBER   DATE    LESSONID    TITLE
1   January, 01 2012 00:00:00+0000  1   asdfasdf
1   January, 01 2012 00:00:00+0000  1   qwerqwer
2   January, 03 2012 00:00:00+0000  (null)  (null)
3   January, 05 2012 00:00:00+0000  3   12341234
4   January, 10 2012 00:00:00+0000  (null)  (null) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:21:02.340

如果我正确理解您的问题，您可以执行以下操作：

```
SELECT T.DayNumber,
  T.Date,
  L.LessonId,
  L.Title
FROM (
  SELECT @RowNumber := @RowNumber + 1 AS DayNumber, 
    D.Date
  FROM dates D 
     JOIN (SELECT @RowNumber:= 0) R 
  WHERE D.Date IN ('2012-01-01','2012-01-03','2012-01-05','2012-01-10') 
) T LEFT JOIN Lessons L ON 
    T.DayNumber = L.DayNumber 
ORDER BY T.DayNumber ASC LIMIT 0, 50 
```

这是更新的[Fiddle](http://www.sqlfiddle.com/#!2/bd22b/3)。

结果如下：

```
DAYNUMBER   DATE                                LESSONID     TITLE
1           January, 01 2012 00:00:00+0000      1            asdfasdf
1           January, 01 2012 00:00:00+0000      2            qwerqwer
2           January, 03 2012 00:00:00+0000      (null)       (null)
3           January, 05 2012 00:00:00+0000      3            12341234
4           January, 10 2012 00:00:00+0000      (null)       (null) 
```

顺便说一句——在你上面的结果中，你的第二个结果有第 1 课——我假设你的意思是上面的结果中的第 2 课。

# expert-system - 无法检索剪辑中的事实

> ID：14922453
> 
> 赞同：1
> 
> 时间：2013-02-17T15:06:15.633
> 
> 标签：expert-system, clips

我希望通过使用函数来获取朋友列表。

```
(deffunction get-freinds-list (?age)

  (bind ?facts (find-all-facts ((?f userdata))
                               (and (eq ?f:name userdata)
                                    (>= ?f:age ?age))))

return ?facts)

(defrule getfriends
   (wantlist yes) 
=> 
   (printout t "under what age you want list for?" crlf)
   (bind ?age (read))
   (printout t "list is=" (get-freinds-list ?age ) crlf)) 

(defrule main-control
(initial-fact)
=>
(assert(wantlist yes))
)

(deffacts userfact 
(userdata(name "pranay" )(likes tea cricket badminton table farewell)(age 12)(location pakistan)(employer Oracle))
(userdata(name "rohan" )(likes lunch kabaddi tt khoko farewell)(age 10)(location china)(employer TCS))
(userdata(name "srinath" )(likes dinner kabaddi cricket farewell)(age 15)(location china)(employer TCS))
(userdata(name "prateek" )(likes dinner kabaddi cricket farewell drinks)(age 15)(location china)(employer TCS))
(userdata(name "sachin" )(likes drinks kabaddi cricket)(age 15)(location china)(employer TCS))
)

(deftemplate userdata "Knoweledge base"

(slot name)
(multislot likes)
(slot age)
(slot location)
(slot employer)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:22:53.123

```
CLIPS> 
(deftemplate userdata "Knowledge base"
   (slot name)
   (multislot likes)
   (slot age)
   (slot location)
   (slot employer))
CLIPS>    
(deffunction get-friends-list (?age)
  (bind ?list (create$))
  (do-for-all-facts ((?f userdata)) (>= ?f:age ?age)
     (bind ?list (create$ ?list ?f:name)))
  return ?list)
CLIPS> 
(defrule getfriends
   (wantlist yes) 
   => 
   (printout t "under what age you want list for? ")
   (bind ?age (read))
   (printout t "list is " (implode$ (get-friends-list ?age)) crlf)) 
CLIPS> 
(deffacts main-control
   (wantlist yes))
CLIPS> 
(deffacts userfact 
   (userdata (name "pranay") (likes tea cricket badminton table farewell) (age 12) (location pakistan) (employer Oracle))
   (userdata (name "rohan") (likes lunch kabaddi tt khoko farewell) (age 10) (location china) (employer TCS))
   (userdata (name "srinath") (likes dinner kabaddi cricket farewell) (age 15)(location china) (employer TCS))
   (userdata (name "prateek") (likes dinner kabaddi cricket farewell drinks) (age 15) (location china)(employer TCS))
   (userdata (name "sachin") (likes drinks kabaddi cricket) (age 15) (location china) (employer TCS)))
CLIPS> (reset)
CLIPS> (run)
under what age you want list for? 13
list is "srinath" "prateek" "sachin"
CLIPS> (reset)
CLIPS> (run)
under what age you want list for? 9
list is "pranay" "rohan" "srinath" "prateek" "sachin"
CLIPS> 
```

# java - 如何找到给定字符串中的第一个字符，它只出现一次

> ID：14922454
> 
> 赞同：2
> 
> 时间：2013-02-17T15:06:17.793
> 
> 标签：java, string, algorithm

这是一道面试题。找到给定字符串中的第一个字符，它只出现一次（我想解决方案应该是 Java）。

例如：

```
"babcbcd" -> 'a' // 'a' 和 'd' 都只出现一次，但 'a' 出现在 'd' 之前

```

简单的解决方案是

*   构建*地图*（例如`HashMap`）：char -> 它在字符串中出现的次数；
*   针对*映射*扫描字符串并测试字符串字符，直到字符的*值为*1。

是否有意义？最好的*地图*实现是什么？有没有更好、更有效的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T20:14:55.900

这是 Haskell 中的一个版本。

```
import Data.List (elemIndices)
firstSingle str = take 1 [a | a <- str, length (elemIndices a str) == 1] 
```

*Main Data.List> firstSingle "babcbcd"
"a"

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T15:10:48.737

在 Java 中，您可以使用 a[`LinkedHashMap<Character,Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)来计算每个字符在字符串中出现的次数。由于`LinkedHashMap`保留了插入顺序，因此您可以遍历其条目以找到恰好出现一次的第一个字符。

在合理的假设下，这将给出一个`O(n)`解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T17:04:16.037

如果我在面试，我会希望（虽然不一定期待）这样的事情：

```
def string = 'babcbcd'
def singles = string.toList().groupBy{ it }.findAll{ it.value.size() == 1 }.collect{ it.key }
println "First char that appears once: " + string.find{ singles.contains it } 
```

关键是中线。它将字符串作为字符列表，按字符[对列表进行分组，](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#groupBy%28groovy.lang.Closure%29)这样您就可以过滤掉没有恰好出现一次的任何内容，最后生成出现过一次的字符列表。然后我们只需在字符串中搜索该列表中的第一个字符。

它之所以是 Groovy，是因为在 Java 中不可能如此优雅。也许一旦 JDK 8 终于成功了……

**更新：**一个更简洁的版本，灵感来自[@groovy 的 Haskell 解决方案](https://stackoverflow.com/a/14925583/839646)。我现在几乎为我的第一个笨拙而尴尬:)

```
def firstUnique(seq) { seq.findAll{ seq.count(it) == 1 }.first() } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-17T15:59:59.333

所有上述解决方案都需要 O(n) 内存。为了在 O(1) 内存中执行此操作，您可以为所有字符运行 for 循环（在 ASCII 中有 128 个）并计算出现次数和第一次出现，然后找到第一个非重复字符。时间复杂度 O(128|s|)。

```
int min=Integer.MAX_VALUE;
char ans=' '; //any initialization 
for ( i=0; i<128;i++){
    int count=0,first=-1;
    for(j=0;j<s.length();j++){
         if(s.charAt(j)==(char)(i)) count++;
         if(count==1) first=j;
         if(count>1) break;
    }
    if(count==1 && min>first){
         first=min;ans=s.charAt(first);
    }
}
if(min!=Integer.MAX_VALUE) System.out.println(ans);
else System.out.println("No such char found"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-17T16:27:28.000

假设`String`仅由 az 个字符组成，您可以对目前看到的字符使用队列并保持计数。

```
public static String findFirstLetterThatAppearsOnceInString(String str) {
    int[] seenCount = new int[26];
    int[] queue = new int[26];
    int queueSize = 0;
    for (char c : str.toCharArray()) { // Iterate over the input characters
        int i = c-'a';
        if (seenCount[i]<2) {
            seenCount[i]++;
            // If seen for the first time, store it in queue
            if (seenCount[i]==1) queue[queueSize++]=i;
        }
    }
    for (int qi=0;qi<queueSize;qi++) if (seenCount[queue[qi]]==1) return (char)(queue[qi]+'a')+"";
    return null;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-17T20:54:56.447

简单的非地图解决方案，假设没有 unicode：

```
public String firstLonelyChar(String input)
{
    while(input.length() > 0)
    {
        int curLength = input.length();
        String first = String.valueOf(input.charAt(0));
        input = input.replaceAll(first, "");
        if(input.length() == curLength - 1)
            return first;
    }
    return null;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-17T15:13:12.793

您可以在原始字符串的一次传递中完成：制作一个链接的哈希映射，存储您到目前为止找到的字符的计数。然后浏览地图条目（它将按插入顺序排列，因为它是一个链接地图）并在看到计数为 1 时停止。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-17T15:37:38.717

您已经找到了一个很好的解决方案，但如果您愿意，我建议采用不同的方法：

```
final String abc = "abcdefg....z";
boolean scanned[] = new boolean[abc.lenght()];
//set all to false ...
for(int i = 0; i<yourString.lenght(); i++){
    char c = yourString.charAt(i);
    if(!scanned[abc.indexOf(c)]){
        for(int j=i+1; j<yourString.lenght(); j++)
            if(yourString.charAt(i) == c){ // founded another
                scanned[abc.indexOf(c)] = true;
                break;
            }
        if(!scanned[abc.indexOf(c)])
            return c;
    }
} 
```

# javascript - 无法从区域下拉列表中获取相关下拉列表值

> ID：14922457
> 
> 赞同：0
> 
> 时间：2013-02-17T15:06:53.887
> 
> 标签：javascript, json, opencart

我想在注册帐户步骤中将地理区域显示为下拉菜单，就像区域（区域）一样。但是地理区域的价值取​​决于客户在区域（区域）中选择的内容。

## 图片

在这个过程中，我已经对控制器、视图、包括控制器做了一些修改。就像在下面的图片中一样： ![Kotamadya/Kabupaten 是地带领域](../Images/e1fe985ef135c0af03ef511c36fdeaf1.png)

地理区域场是 Kotamadya/Kabupaten。但是当我选择区域 Aceh 时，geozone 字段不会刷新。

## 错误信息

我收到如下错误消息：

```
SyntaxError: Unexpected token <

OK

<br />
<b>Fatal error</b>: Call to a member function
getGeozonesByZoneId() on a non-object in <b>
/home/........../catalog/controller/account/register.php
</b> on line <b>513</b><br /> 
```

## 编码

在 ../controller/account/register.php 中，我添加了一些修改如下：

```
public function zone() {
    $json = array();

    $this->load->model('localisation/zone');

    $geozone_info = $this->model_localisation_zone->getZone($this->request->get['zone_id']);

    if($geozone_info)
    {
        $this->load->model('localisation/geo_zone');

        $json = array(
            'country_id'        => $geozone_info['country_id'],
            'name'              => $geozone_info['name'],
            'code'              => $geozone_info['code'],
            'zone'          => $geozone_info['zone_id'],
            'geozone'           => $this->model_localisation_geozone->getGeozonesByZoneId($this->request->get['zone_id']),
            'status'            => $geozone_info['status']      
        );
    }
$this->response->setOutput(json_encode($json));
} 
```

第 513 行是：

```
'geozone'           => $this->model_localisation_geozone->getGeozonesByZoneId($this->request->get['zone_id']) 
```

我不知道 getGeozonesByZoneId 函数有什么问题，因为我认为我已经在 ../model/localisation/geo_zone.php 中正确编写了该函数，如下所示：

```
 <?php
class ModelLocalisationGeozone extends Model {
    public function getGeozone($zone_id) {
        $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "geo_zone WHERE geo_zone_id = '" . (int)$geo_zone_id . "'");

        return $query->row;
    }       

    public function getGeozonesByZoneId($zone_id) {
        $geozone_data = $this->cache->get('geozone.' . (int)$zone_id);

        if (!$geozone_data) {
            $query = $this->db->query("SELECT * FROM " . DB_PREFIX . "zone_to_geo_zone WHERE zone_id = '" . (int)$zone_id . "'");

            $geozone_data = $query->rows;

            $this->cache->set('geozone.' . (int)$zone_id, $geozone_data);
        }

        return $geozone_data;
    }
}
?> 
```

我已经在 register.tpl 中添加了 javascript，如下所示：

```
$('select[name=\'zone_id\']').bind('change', function(event, first_time) {
          $.ajax({
              url: 'index.php?route=account/register/zone&zone_id=' + this.value,
              dataType: 'json',
              beforeSend: function() {
                  $('select[name=\'zone_id\']').after('<span class="wait">&nbsp;<img src="catalog/view/theme/default/image/loading.gif" alt="" /></span>');
              },
              complete: function() {
                  $('.wait').remove();
              },
              success: function(json) {

                  var html = '<option value=""><?php echo $text_select; ?></option>';
                  var selected = false;
                  if (json['geozone'] && json['geozone'] != '') {
                      for (i = 0; i < json['geozone'].length; i++) {
                          html += '<option value="' + json['geozone'][i]['geo_zone_id'] + '"';

                          if (json['geozone'][i]['geo_zone_id'] == '<?php echo $geo_zone_id; ?>') {
                              html += ' selected="selected"';
                              selected = true;
                          }

                          html += '>' + json['geozone'][i]['name'] + '</option>';
                      }
                  } else {
                      html += '<option value="0" selected="selected"><?php echo $text_none; ?></option>';
                  }

                  $('select[name=\'geo_zone_id\']').html(html);
                  if(typeof first_time === "undefined" && selected) {
                    $("#register_details_form").validate().element('#register_details_form select[name="geo_zone_id"]');
                  }
              },
              error: function(xhr, ajaxOptions, thrownError) {
                  alert(thrownError + "\r\n" + xhr.statusText + "\r\n" + xhr.responseText);
              }
          });
      });

      $('select[name=\'zone_id\']').trigger('change', ['first_time']); 
```

谁能帮我解决这个问题？或者也许与我有相同的经历并愿意与我分享您的解决方案？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:25:28.870

使用`model_localisation_zone`(defined variable) 而不是`model_localisation_geozone`(not defined)，或确保后者已定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T19:14:03.003

如果我没记错你忘记`Geozone`在`register.php`控制器文件中加载模型添加这一行

```
$this->load->model('localisation/geozone'); 
```

至`register.php`

在调用函数之前

```
$this->model_localisation_geozone->getGeozonesByZoneId($this->request->get['zone_id']) 
```

# php - CURL 命令的 PHP 等效项

> ID：14922461
> 
> 赞同：0
> 
> 时间：2013-02-17T15:07:24.873
> 
> 标签：php, http, curl

以下 CURL 命令的 PHP 等效项是什么？

`curl -X POST -d "html=<html><body><h1 style="color: red;">Hello World!</h1>" http://example.com/post"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:12:29.623

尝试这样的事情：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://example.com/post');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_POST, true);
$data = array('html' => '<html><body><h1 style="color: red;">Hello World!</h1>'); 
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
$output = curl_exec($ch);
curl_close($ch); 
```

为了将来参考，在提出此类问题之前阅读[PHP 的文档](http://www.php.net/manual/en/book.curl.php)并寻找[其他示例](http://www.jonasjohn.de/snippets/php/curl-example.htm)会很有用。

# javascript - 三个 js - 你可以克隆从 collada 文件加载的动画吗？

> ID：14922462
> 
> 赞同：4
> 
> 时间：2013-02-17T15:07:30.110
> 
> 标签：javascript, animation, three.js, collada

我基本上问的问题与此处找到的问题相同 - [https://github.com/mrdoob/three.js/issues/1883](https://github.com/mrdoob/three.js/issues/1883) - 使用三个 js，我可以导入带有基本关键帧动画的 collada 场景并播放这些动画很容易，但想将动画数据从一个场景对象复制到另一个场景对象。

那可能吗？

在运行时，我注意到 collada.animations 对象包含一个 - collada.animations[n].node - 这似乎是一个 THREEJS.Mesh 对象，我一直试图在运行时替换它（无济于事）。我还注意到 collada.animations[n].hierarchy[n] 对象还包含如下所示的节点属性：

```
cameras: Array[0]
channels: Array[9]
controllers: Array[0]
endTime: 2.5
geometries: Array[1]
id: "name_of_exported_object"
keys: Array[2]
matrix: THREE.Matrix4
name: "name_of_exported_object"
nodes: Array[0]
sid: null
sids: Array[9]
startTime: 0
transforms: Array[5]
type: "NODE" 
```

该对象通过 .name 和 .id 出现，与我使用 3D 包（Blender）创建的“name_of_exported_object”相关联......我不太清楚这个节点对象的用途。如何更改 collada.animation[n] 对象以在动态创建的场景对象上使用相同的动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-07T06:36:51.697

由于这个问题是几年前写的，所以改写了three.js动画系统。您不再需要“克隆”动画，只需使用不同的混合器将它们应用到其他对象。例子：

```
var clip; // some THREE.AnimationClip instance.

var mixer1 = new THREE.AnimationMixer( object1 );
var mixer2 = new THREE.AnimationMixer( object2 );

var action1 = mixer1.clipAction( clip );
var action2 = mixer2.clipAction( clip );

action1.play();
action2.play(); 
```

这不是 COLLADA 独有的，它适用于 FBX、glTF 和 three.js 支持动画的任何其他格式。

# susy-compass - SUSY 组织文件？

> ID：14922470
> 
> 赞同：0
> 
> 时间：2013-02-17T15:08:12.187
> 
> 标签：susy-compass

我首先使用方法移动或响应式网站，然后使用 susy。如何为移动设备（默认）和断点（平板电脑、桌面）组织文件 _forms _typo _layout、_mixins 等并拥有输出文件：

```
mobile.css
tablet.css
desktop.css 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:54:28.607

Sass/Compass+Susy 将为您的源目录中没有下划线的每个文件创建一个文件。

因此，只需将您想要为这些样式表生成的代码放在位于源目录中的文件中，使用您自己的部分文件（文件前面有下划线）或您项目中包含的任何扩展名（例如 susy )

一个关于构建项目的好文档在这里：[http ://compass-style.org/help/tutorials/extensions/](http://compass-style.org/help/tutorials/extensions/)

其他要看的东西：[http ://compass-style.org/help/tutorials/best_practices/](http://compass-style.org/help/tutorials/best_practices/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T08:29:02.020

太好了，我了解未生成“_”文件的技术，但我使用 susy 搜索示例组织文件或响应网站。

如果我将多个文件用于布局标题等...（包括或每个断点），则 css 文件结果包含 miltiple 声明@media ....而不是分组。

# python - 从模块调用未定义的方法

> ID：14922476
> 
> 赞同：2
> 
> 时间：2013-02-17T15:08:47.477
> 
> 标签：python

我有一个模块，我想调用该模块中未定义的方法。是否可以？

```
#module
def foo():
    print bar()

#main
from foo import foo

def bar():
    return "Foo bar"

def main():
    foo.foo() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:12:59.910

你不能。Python 在定义函数的同一模块中查找未定义的名称。

您必须改为传递函数引用：

```
def foo(func):
    print func() 
```

然后主要：

```
def main():
    foo.foo(bar) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:13:28.577

您可以将函数从一个模块添加到另一个模块，但将其作为回调传递可能更简洁。这取决于实际情况。

```
#module
def foo(bar):
    print bar()

#main
from foo import foo

def bar():
    return "Foo bar"

def main():
    foo(bar) 
```

# c++ - C++11 右值参考题

> ID：14922480
> 
> 赞同：3
> 
> 时间：2013-02-17T15:09:30.190
> 
> 标签：c++, c++11, reference, rvalue-reference

我正在尝试了解 C++11 的新功能，并且我有两个关于右值引用的问题。

1.  我还没有看到函数返回右值引用（除了`std::move`）的例子。是否存在这样做有意义的情况？例如，`int&& foo(...)`.

2.  在声明局部变量或作为函数参数时，是否存在对 const 的右值引用有意义的情况？例如，`foo(int const&& i)`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:21:22.020

> 1）我没有看到函数返回右值引用（除了`std::move`）的例子。是否存在这样做有意义的情况？

除了将其参数转换为右值引用（例如`std::move`and，在适当的时候，`std::forward`返回该参数）并返回该参数的库函数之外，我认为您不会经常遇到这种情况。

> 2) 是否存在对 rvalue 的引用有意义的情况`const`？

不太多。实际上几乎没有。当您想要绑定到最终要从中*移动*的对象时使用右值引用，并且由于您无法从`const`对象中移动（因为移动会改变您从中移动的对象的状态，并且`const`承诺相反），所以它没有什么意义具有对 的右值引用`const`。还要注意，*左值*引用也`const`可以绑定到右值。不过，有[一些用例](https://stackoverflow.com/questions/4938875/do-rvalue-references-to-const-have-any-use)。

# r - 尝试使用 RCurl 获取产品价格

> ID：14922482
> 
> 赞同：0
> 
> 时间：2013-02-17T15:09:41.973
> 
> 标签：r, web-scraping, rcurl

我从网站上取消了一些产品的价格。在 Python 中，我使用 urllib2 没有问题，但是当我尝试在 RI 中使用 RCurl 时，无法下载源代码。

我必须将源代码与产品代码一起粘贴，然后我才能知道价格。产品的路径是：[http://www.americanas.com.br/produto/code_of_product](http://www.americanas.com.br/produto/code_of_product)。

实际上，我无法使用 RCurl 下载产品的源代码。当我尝试例如 getURL(' [http://www.americanas.com.br/produto/111467594](http://www.americanas.com.br/produto/111467594) ') 它返回“”。

我尝试使用 getURL('.../produtos/111467594') 并且可以下载源代码，但是这样我无法获得价格。:(

有谁知道我怎么能得到产品的价格？

谢谢。

Ps.：对不起我的英语不好。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:11:46.783

欢迎来到 StackOverflow。

对我来说很难说为什么它不起作用，你能`verbose=TRUE`在`getURL`? 另外，我注意到您链接的网页上有不同的价格。你想要全部还是第一个？如何获得“Por 价格”：

```
library("stringr")

productwebpage<-readLines("http://www.americanas.com.br/produto/111467594")
pricerow<-productwebpage[grep("p class=\"sale price\"",productwebpage)] 
price<-str_extract_all(pricerow,"\\(?[0-9,.]+\\)?")[[1]] 
```

您也可以将 替换`grep("p class=\"sale price\"",productwebpage)`为`grep("<p><span class=\"regular price\">",productwebpage)`（以获得“de price”/旧价格）或`grep("<span class=\"p-v interest\">",productwebpage)`（这将为您提供“sem jouros”价格/每月付款）。对于最后一个示例，您将首先获得月份和之后的付款，因此它将是：

```
> price
[1] "12"    "83,25" 
```

希望这也适用于其他产品（刚刚尝试了 5 种，似乎对所有产品都有效）。

# javascript - Ext.Ux.Printer 打印图像不起作用

> ID：14922489
> 
> 赞同：1
> 
> 时间：2013-02-17T15:10:34.637
> 
> 标签：javascript, ajax, extjs, printing, extjs4

我已经下载了[https://github.com/edspencer/Ext.ux.Printer](https://github.com/edspencer/Ext.ux.Printer)并
导入了 Printer.js 和 Base.js

## 在 Base.Js 我添加了图像渲染代码：

```
 Ext.ux.Printer.imageRenderer = Ext.extend(Ext.ux.Printer.BaseRenderer, {
 generateBody: function(image) {
   return String.format("<div class='image-print'>{0}</div>", image.body.dom.innerHTML);
 }
}); 
```

Ext.ux.Printer.registerRenderer('image', Ext.ux.Printer.imageRenderer);

## 这是显示带有 id 的图像的地方`displayimage`

```
items: [Printtoolbar,{
xtype : 'image',
id : 'displayimage',
style: {
'display': 'block',
'margin': 'auto'
},
width: 320,
height: 240,
}] 
```

## 按下打印按钮时打印图像

```
var PrintImgBtn = Ext.getCmp('btnPrint');
    PrintImgBtn.on('click', function(){
        printImg = Ext.getCmp('displayimage');  
        Ext.ux.Printer.print(printImg); 
```

## 不幸的是，当我按下打印按钮时，没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:04:10.000

您可以打开一个窗口并打印它。在您的按钮处理程序中：

```
...
handler: function() {
    var img = Ext.getCmp('displayimage');
    if(img) {
        var html = img.container.dom.innerHTML;
        var win = window.open();
        win.document.write(html);
        win.print();
        win.close();
    }
}
... 
```

打印示例：http: [//jsfiddle.net/wXfFN/3/](http://jsfiddle.net/wXfFN/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T05:04:24.213

如果您使用的是 Iframe 'Ext.ux.iFrame'，那么您可以使用类似这样的东西

```
var iframe = this.down('iframe');
iframe.getFrame().contentWindow.print(); 
```

如果您想在 iframe 内容中添加一些其他内容

```
 var iframe = this.down('iframe');
 var contentWindow = iframe.getFrame().contentWindow;
 var iFrameNewContent = "<div>This will be helpfull</div>" + contentWindow.document.body.innerHTML;

// set iFrameNewContent to content window
contentWindow.document.body.innerHTML = iFrameNewContent;
contentWindow.print(); 
```

优点是应用到 iframe 内容的所有样式，您可以在打印文档中看到

还要检查此链接是否有用 [https://druckit.wordpress.com/2014/02/15/ext-js-4-printing-the-contents-of-an-ext-panel/](https://druckit.wordpress.com/2014/02/15/ext-js-4-printing-the-contents-of-an-ext-panel/)

# android - Android中的语言翻译应用程序

> ID：14922493
> 
> 赞同：-4
> 
> 时间：2013-02-17T15:10:43.450
> 
> 标签：android

如果您有任何想法或一些参考来制作允许语言翻译的应用程序，就像谷歌翻译一样，但在这里我想将自己限制为只有 2 种语言。输入语言和输出语言。

请分享你的想法。

谢谢，拉克什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:03:42.940

好吧，您可以使用[Google Translate API](https://developers.google.com/translate/?hl=de)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:10:09.853

> 创建 strings.xml 文件的过程如下：
> 
> 将 strings.xml 文件翻译成每种语言。在 res 下新建三个文件夹——values-it、values-fr 和 values-ru（原来的 values 文件夹已经存在）。将翻译后的 strings.xml 文件放在相应的文件夹中。

资料来源：[iCanLocalize](http://www.icanlocalize.com/site/tutorials/android-application-localization-tutorial/)。

另外，请查看有关[Android Localization](http://developer.android.com/guide/topics/resources/localization.html)的文档。

这是[**另一个教程**](http://www.grammaticalframework.org/android/tutorial/)，更适合您的需求！

# java - 如何在java中暂停线程？

> ID：14922497
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:11:03.280
> 
> 标签：java

那么暂停线程的最佳方法是什么？到目前为止，我有这样的事情：在线程的主循环中，第一行是：

```
while (paused == true) {
   Thread.sleep(refreshRate);
} 
```

它工作得很好。我可以按 P 键更改暂停状态。但我正在寻找更好、更专业的解决方案。我知道可重入锁和条件。所以我可以在线程上使用它们。然后按下 P 将释放 singalAll() 方法。但由于我在这个线程中并不真正需要同步，它会大大降低我的应用程序的速度。那么解决这个问题的最好、最有效的方法是什么？也许使用同步块？

```
synchronized (new Object()) {

} 
```

然后只同步部分代码。或者也许我应该使用信号量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:21:34.953

您应该使用等待/通知方案，例如：

1.  在要暂停的线程中创建一个原子布尔标志。
2.  设置标志后，线程应在锁定对象上调用 wait()
3.  当您想取消暂停线程时，重置标志并在锁定对象上调用 notify()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:09:04.243

使用像我不久前发布的[PauseableThread](https://stackoverflow.com/a/10669623/823393)来回答一个很像你的问题。

它使用`ReadWriteLock`s 来实现，因此您没有同步的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:32:17.783

使用 wait() 和 notify()

```
Object waitLock = new Object();

//...

// waiter Thread
synchronized (waitLock) {
   waitLock.wait();
}

// wake up with

waitLock.notify(); 
```

# java - 按钮元素在单击时调用 java 方法

> ID：14922498
> 
> 赞同：0
> 
> 时间：2013-02-17T15:11:11.883
> 
> 标签：java, javascript, html, jsp, onclick

我想在我的 jsp 页面中创建一个按钮，单击它会`CancelJob(jobId)`在文件中调用 Java 中的方法`A.java`。我`foo()`在同一个文件中调用的 java 方法中创建按钮`A.java`，

```
String foo(){

String jobId;  
...
StringBuilder sb = new StringBuilder();
sb.append("<input type='button' value='Cancel'>");
...
}

CancelJob(jobId){
...
} 
```

应该如何构建按钮的元素？请添加解释，因为我是这个主题的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:54:41.410

你不能只用 JSP 做这样的事情。[需要](http://javaserverfaces.java.net/)JSF或[GWT](https://developers.google.com/web-toolkit/overview)。好吧，您也可以在客户端使用 applet 和 JavaScript 进行纯粹的操作，但此时最好不要这样做。

# jquery - jQuery hashchange 函数不起作用

> ID：14922502
> 
> 赞同：1
> 
> 时间：2013-02-17T15:11:21.093
> 
> 标签：jquery, html, menu, fadein, hashchange

我无法让 jQuery hashchange 函数工作，这不是我以前用过的东西，我不知道为什么它也不能像我想要的那样工作。
我有一个包含 6 个部分的“关于”页面，每个部分都通过子菜单显示/隐藏，因此一次只显示一个部分。但我想将哈希附加到这些页面上，以便可以从其他页面链接到它们。这是我的代码，我将解释我遇到的问题：

jQuery：

```
$(document).ready(function(){
$('.about').hide();
$('#section01').show();

$(function(){
$(window).on('hashchange', function(){
        var hash = window.location.hash;
     $('.sub-menu').each(function(){
           $('.about').hide();
           $('#section'+$(this).attr('hook')).fadeIn();
           return false;
    });  

});
});
$(window).hashchange();
}); 
```

HTML：

```
<div id="content-wrap"> 

    <div id="sub-menu">
        <li id="sub-menu-01" class="sub-menu" hook="01"><a href="#about01">SECTION01</a></li>
        <li id="sub-menu-02" class="sub-menu" hook="02"><a href="#about02">SECTION02</a></li>
        <li id="sub-menu-03" class="sub-menu" hook="03"><a href="#about03">SECTION03</a></li>
        <li id="sub-menu-04" class="sub-menu" hook="04"><a href="#about04">SECTION04</a></li>
        <li id="sub-menu-05" class="sub-menu" hook="05"><a href="#about05">SECTION05</a></li>
        <li id="sub-menu-06" class="sub-menu" hook="06"><a href="#about06">SECTION06</a></li>
    </div>

        <div id="section01" class="about">
CONTENT GOES HERE
        </div>

        <div id="section02" class="about">
CONTENT GOES HERE
        </div>

        <div id="section03" class="about">
CONTENT GOES HERE
        </div>              

        <div id="section04" class="about">
CONTENT GOES HERE
        </div>

        <div id="section05" class="about">
CONTENT GOES HERE
        </div>

        <div id="section06" class="about">
CONTENT GOES HERE
        </div>

</div> 
```

所以点击`.sub-menu`成功添加了哈希`#about01` `#about02`等。但是相关部分并没有淡入，它只是不断淡入，`#section01`我不明白为什么。
在我介绍 hashchange 之前，我的这个函数运行良好，但现在相关部分没有显示，只是总是`#section01`不管`.sub-menu`你点击哪个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:32:10.493

而不是使用`.attr hook`我会使用`data-hook`and `.data`。那不是问题。

您从未真正比较过“钩子”值是否与哈希匹配。

```
if ($(this).attr('hook') === hash.replace('#about', '')) { 
```

如果哈希为空（我想），您还需要显示第一部分，但我相信您可以弄清楚。

[http://jsfiddle.net/wkHj2/](http://jsfiddle.net/wkHj2/)

# asp.net - 在会话中追加数据

> ID：14922503
> 
> 赞同：0
> 
> 时间：2013-02-17T15:11:24.740
> 
> 标签：asp.net, session

我需要帮助在会话变量中附加数据。

我在做什么如下..

```
Session["subContractors"]  = CallNodesSelector(objSubContractorOptions, Convert.ToInt16(item)); 
```

我有弹出窗口，并且在弹出窗口的某些操作上，我的 CallNodeSelector 方法返回对象并将其存储到会话变量中。但是下次当我打开弹出窗口并进行一些操作时，它会添加方法返回的新数据，而我在会话中的旧数据丢失了。简而言之，每次方法返回其数据时，会话都会被覆盖。

谁能帮我在会话中附加数据。像这样的东西......

```
Session["subContractors"]  += CallNodesSelector(objSubContractorOptions, Convert.ToInt16(item)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:15:54.427

假设`CallNodesSelector(objSubContractorOptions, Convert.ToInt16(item))`返回一个int，你为什么不试试这个？

```
Session["subContractors"] = (int)(Session["subContractors"] ?? 0) + CallNodesSelector(objSubContractorOptions, Convert.ToInt16(item)); 
```

# hibernate - org.hibernate.TransientObjectException，如何修改方法将实例设置为持久状态

> ID：14922507
> 
> 赞同：0
> 
> 时间：2013-02-17T15:11:58.640
> 
> 标签：hibernate

我需要从我的一个控制器类中修改一个方法，以摆脱关于空标识符的休眠异常并更新 DAO 类，如下所示：

```
public void updateDealerName(String name){    

      DealerListView dealer = new DealerListView();

  if(dealer.getDealerId() == getSelectedDealerId()) {

    DealerData dealDat = new DealerData();
    dealDat.setName(name);
    BeanFactory.getHotelDAOService(DealerData.class).update(dealDat); } 
```

selectedDealerId 或他的 getter getSelectedDealerId() - 存储了经销商列表中的经销商 ID

DealerData = 是一个 DAO

DealerListView - 用于投影属性以创建从休眠中知道的分离条件

如何修改此方法以使空标识符异常消失并使瞬态实例“dealDat”持续存在，是否需要以某种方式将选定的经销商ID分配给实例？有人可以在这里发表建议吗？如果是的话，我将非常感谢。

# python - Django 反向查询最后创建的对象

> ID：14922508
> 
> 赞同：2
> 
> 时间：2013-02-17T15:12:07.473
> 
> 标签：python, django, postgresql, django-queryset

我有两个模型：

```
class SomeActivity(models.Model):
    name = models.ChartField(max_length=100)

class SomeStatus(models.Model):
    name = models.CharField(max_length=100)
    status = models.IntegerField(choises=STATUS_CHOISES)
    some_activity = models.ForeignKey(SomeActivity, related_name='statuses') 
```

活动的最后创建状态是当前状态。为了得到它，我使用以下代码：

```
try:
    last_status = some_activity.statuses.latest('id')
except:
    last_status = None 
```

但问题是当我想进行一个返回所有`Activities`匹配`last_status`的查询时`status__in=[1, 2]`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:56:57.033

这个解决方案有点扭曲，但我认为它会起作用：

```
from django.db.models import Max

max_status_ids = SomeActivity.objects.filter(statuses__isnull=False).annotate(
              last_status_id=Max('statuses__id')
              ).values_list('last_status_id', flat=True)
status_satisfied_ids = SomeStatus.objects.filter(id__in=list(max_status_ids),
              status__in=[1, 2]).values_list('id', flat=True)
activities = SomeActivity.objects.filter(statuses__id__in=list(
              status_satisfied_ids)) 
```

我希望有更好的解决方案。

* * *

*更新*

尝试

```
max_status_ids = SomeActivity.objects.annotate(last_status_id=Max('statuses')
                                    ).values('last_status_id')
activities = SomeActivity.objects.filter(statuses__in=max_status_ids,
                                         statuses__status__in=(1,2)) 
```

1.  Django 自动生成子查询时`qs`，`qs.values()`或查找`qs.values_list()`后使用`__in`。因此，无需使用 w/ 包装查询集`list()`（这也引入了不必要的评估，从而引入了不必要的中间 SQL）或在`flat=True`内部编写`qs.values_list()`
2.  `statuses__id__in`内部查找`activities`已经引入了表连接，因此最好`status__in`从`status_satisfied_ids`进入`activities`到利用连接。否则，`status_satisfied_ids`会引入额外的选择。

或者您可以使用[PostgreSQL 的 Window 函数](http://www.postgresql.org/docs/9.2/static/tutorial-window.html)直接按排名位置进行过滤。

# php - 动态从数组中删除元素

> ID：14922513
> 
> 赞同：0
> 
> 时间：2013-02-17T15:12:48.133
> 
> 标签：php, jquery

所以我已经学会了如何动态地将元素添加到数组中——删除它们怎么样？

**jQuery**

```
$(document).on('change blur', '.roomFac', function () {
        var park = $("#park2").val();
        var lecturestyle = $("#lecture_style2").val();
        var roomstructure = $("#room_structure2").val();
        var groupsize = $("#groupSize2").val();
        var facilities = "";
        $('select[name*=roomFac]').each(function () {
            facilities += $(this).val();
            facilities += ",";
        });
        var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
            'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
            'facilities=' + facilities;
        $.ajax({
            type: "POST",
            url: "process_timetableMon2.php",
            data: dataString,
            cache: false,
            success: function (html) {
                $('#mon').html(html);
            }
        });
    }); 
```

**process_timetableMon2.php**

```
$array = explode(",", $_POST["facilities"]);

for($i = 0; $i < count($array)-2; $i++){
    echo $array[$i].'<br>';
} 
```

我在这里上传了一些代码：http: [//jsfiddle.net/kfm5b/3/](http://jsfiddle.net/kfm5b/3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:50:23.967

我建议您与其动态创建更多下拉菜单，不如保持简单并坚持使用该`multiple="multiple"`属性的一个下拉菜单。

```
<select class="roomFac" name="roomFac" id="roomFac" multiple="multiple">
  <option selected="selected" value="">Any</option>
  <option value="opt1">Opt 1</option>
  <option value="opt2">Opt 2</option>
</select> 
```

在 JavaScript 中，您不再需要遍历所有下拉菜单及其所选项目值。为简单起见，我保留了您的大部分结构，但我建议您将值存储在对象中，而不是手动构建数据字符串。这样更优雅，也更容易传递数组，就好像一个字符串必须使用多个`array[]=...`字符串一样。

```
$(document).on('change blur', '.roomFac', function () {
    var park = $("#park2").val();
    var lecturestyle = $("#lecture_style2").val();
    var roomstructure = $("#room_structure2").val();
    var groupsize = $("#groupSize2").val();
    var facilities = $('#roomFac').val().join( ',' );
    var dataString = 'park=' + park + '&' + 'lecturestyle=' + lecturestyle + '&' +
        'roomstructure=' + roomstructure + '&' + 'groupsize=' + groupsize + '&' +
        'facilities=' + facilities;
    $.ajax({
        type: "POST",
        url: "process_timetableMon2.php",
        data: dataString,
        cache: false,
        success: function (html) {
            $('#mon').html(html);
        }
    });
}); 
```

# jquery - jquery中的颜色过渡动画

> ID：14922514
> 
> 赞同：0
> 
> 时间：2013-02-17T15:12:48.440
> 
> 标签：jquery, html, css

如何使用 jQuery 在颜色之间制作动画，即淡出一种颜色并淡入另一种颜色。

我知道这可以用 CSS3 关键帧来完成，但是这在 w3schools 提到的 Internet Explorer 中不起作用。我想要一个可以在所有浏览器中工作的标准方法。

在 stackoverflow 中搜索时，它提到需要一个 jQuery 颜色插件。有谁知道任何更简单的方法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-17T15:21:14.997

你可以试试这个：[**现场演示**](http://jsfiddle.net/nJKbE/)

**CSS**

```
#content {
    width: 100%; 
    background: #eff6f4;
    transition: background 4s linear;
    -webkit-transition: background 4s linear;
    -moz-transition: background 4s linear;
} 
```

**jQuery**

```
$('#content').css('background', '#C89CBD'); 
```

这将在 4 秒内改变背景颜色。

**更新**

如果你需要 IE，那么你可以有这样的东西：

```
$('#content').fadeOut(500, function(){
    $(this).css('background', bg).fadeIn(2000);
}); 
```

它不会那么好，但有效。[现场演示](http://jsfiddle.net/nJKbE/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:33:34.163

[颜色插件](https://github.com/jquery/jquery-color/)非常简单，我不确定你想象的更简单。您需要做的就是包含另一个脚本：

```
<script src="jquery.color.min.js"></script> 
```

然后为颜色设置动画：

```
 $(foo).animate({
      backgroundColor: "#00FF00"
  }, 1000 ); 
```

# attributes - 为 UML 类的属性指定自定义类型

> ID：14922516
> 
> 赞同：1
> 
> 时间：2013-02-17T15:12:55.880
> 
> 标签：attributes, arguments, uml, class-diagram

*我有一个名为间隔属性的类，我喜欢给这个属性一个最小值和最大值来限制这个间隔，*

***这怎么能代表？这可能吗？***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T18:07:19.937

为复合类型创建一个值类型 - 一个具有*“数据类型”*构造型的分类器，然后将其用作属性的类型。

例如，这表示*ClassA*有一个名为*interval*类型的公共属性*Interval*，而*Interval*是一个值类型，它具有*double类型的公共**min*和*max*属性：

 *```
 +----------------+
+-----------------------+       |   «data type»  |
|        ClassA         |       |    Interval    |
+-----------------------+       +----------------+
| + interval : Interval |       | + min : double |
+-----------------------+       | + max : double |
                                +----------------+ 
```

由于*Interval*是一种值类型，它的标识并不重要，因此它将由*ClassA*中的值保存，并且可能由结构实现（如果目标语言支持值和结构；Java 中不能有值类型例如，构造型将按照约定实现，就像 Java 中的 String 一样，因此您必须记住不要在字符串上使用 == ，因为它们的身份无关紧要）。

您可以将一个*«uses»*依赖项从*ClassA*放到*Interval*，但它是属性类型中隐含的，因此通常省略它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T20:09:09.987

我大多同意@Pete Kirkham 我会使用数据类型而不是带有 <> 刻板印象的分类器，但如果我是对的，它是部分响应。@Pete Kirkham 真正回应了模型属性如何具有最小和最大界限，我猜@Chriss 仍然想知道如何指定值。为此，您有几种方法（取决于您的意思），您可以：

1.  为您的属性指定默认值。
2.  制作了一个对象图，实例化了您的属性，然后指定了值。

希望对您有所帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T23:28:02.207

如果您的意思是要限制某个值，另一种选择是在您的属性上指定一个[OCL](http://en.wikipedia.org/wiki/Object_Constraint_Language)约束，以限制其可能的值。

context ClassA inv: self.attributeA >= 1 and self.attributeA <= 10*

# android - Android 地图 API v2 向后兼容性

> ID：14922518
> 
> 赞同：0
> 
> 时间：2013-02-17T15:13:08.783
> 
> 标签：android, android-maps-v2

据我了解，带有新地图 SDK v2 的应用程序只能安装在带有 Google Play 服务 APK 的设备上。
并且 v1 密钥在 3/2013 之后将不可用，这是否意味着我今天无法构建在大多数 Android 设备上运行的地图应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:26:41.490

> 据我了解，带有新地图 SDK v2 的应用程序只能安装在带有 Google Play 服务 APK 的设备上。

该应用程序可以安装在您想要的任何设备上。Maps V2 仅*适用*于具有 Play Services Framework APK 的设备。这应该已经存在于大多数 Android 3.0+ 设备上，并且应该可以下载到许多 Android 2.2/2.3 设备上。

> 那么这是否意味着我今天无法构建在大多数 Android 设备上运行的地图应用程序？

首先，地图 V1 适用于大多数 Android 设备。从 2013 年 3 月 3 日起您无法获得*新的*API 密钥这一事实并不意味着您无法使用 Maps V1。只需确保您有一个长期存在的调试密钥库，您拥有该密钥库和您的生产密钥库的 Maps V1 API 密钥，并且您有一个体面的备份方案。

其次，Maps V2 应该可以在“大多数 Android 设备”上运行，尽管处理目前没有 Play Services Framework（但可以从 Play Store 下载）的设备有点烦人。

第三，还有其他可用的地图解决方案，例如带有 OSMDroid 的 OpenStreetMap，几乎可以在任何东西上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:23:20.603

Android 2.2 安装在 97.6% 的设备上，是 Google Play 服务的主要要求。

来源：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

听起来像是“大多数Android设备”，我认为..

# java - 套接字上的对象 ArrayList

> ID：14922523
> 
> 赞同：1
> 
> 时间：2013-02-17T15:13:22.933
> 
> 标签：java, sockets, object, arraylist

我必须通过网络通过 tcp 套接字（服务器 > 客户端）传递一个 ArrayList。当我传递和 Arraylist of Strings 时，它工作正常，客户端能够接受 ArrayList 并打印。但是当 ArrayList 关闭对象时，我有很多异常并且它不起作用。请看下面。

**服务器**

```
 ArrayList<Database> List = new ArrayList<>(); //Database is a seperate class
    Database item1 = new Database();
            item1.code = "1568";
    item1.name = "Round Table";
    item1.details = "Ikeas best Seller";
    item1.inStock = "17";
    List.add(item1); 
```

...

```
ObjectOutputStream oout = new ObjectOutputStream(socket.getOutputStream());
oout.writeObject(List); 
```

**客户**

```
ObjectInputStream iin =  new ObjectInputStream(socket.getInputStream());
Object items = iin.readObject(); 
```

使用此代码，我抛出了许多异常。如果我用字符串类型的数组替换数组，就像`ArrayList<String> Items = new ArrayList<>();`它会正常工作。有任何想法吗？我在这里真的很累。谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:15:15.887

您放入列表并发送的对象必须实现 Serializable 接口。这也意味着该类中的字段也必须是可序列化的。

# javascript - 创建 jQuery 插件 - 设置失败

> ID：14922526
> 
> 赞同：0
> 
> 时间：2013-02-17T15:13:34.673
> 
> 标签：javascript, jquery, jquery-plugins

我正在创建我想用于我的项目的第一个 jQuery 插件。但是，我所掌握的知识可能还不够。不过，我还想继续创作……

所以我的小插件中有这个部分：

> **jQuery 插件 - 默认设置：**

```
;(function($) {

var defaults = {

    title               : 'miniBox - Title Spot!',
    description         : 'miniBox Description Spot. Write a short article or leave it blank!',

    buttons: {
        switcher        : true,
        nameButton_1    : 'Continue',
        nameButton_2    : 'Discard',
    }
}; 
```

现在下面我们有这部分：

```
$.fn.miniBox = function(customs) {
    var config = $.extend({}, defaults, customs);
    var $first = this.first();

    $first.init = function() {
        $('body').append( // -->
            '<div class="miniBox-wrap">'
        +       '<div class="miniBox-frame">'
        +           '<div class="miniBox-title"></div>'
        +           '<div class="miniBox-content">'
        +               '<div class="miniBox-description"></div>'
        +               '<div class="miniBox-buttons"></div>'
        +               '<div class="miniBox-counter"></div>'
        +           '</div>'
        +       '</div>'
        +       '<div class="miniBox-overlay"></div>'
        +   '</div>' // <--
        );

        var mB_buttonOne    = config.buttons.nameButton_1,
            mB_buttonTwo    = config.buttons.nameButton_2,
            mB_title        = config.title,
            mB_description  = config.description;

        // --> Confirmation Buttons - Settings OPEN //
        if(config.buttons.switcher === true) {
            $('.miniBox-buttons').append( // -->
                '<input type="button" id="agree" value=' + mB_buttonOne + '>'
            +   '<input type="button" id="disagree" value=' + mB_buttonTwo + '>'
            // <--
            );
        } else {
            $('.miniBox-buttons').remove();
        }
        // <-- Confirmation Buttons - Settings CLOSE //
        };
            $first.init();
    };

})(jQuery); 
```

这让我有点困惑，我想这是第一次......

**问题：**

标题导致设置失败，所以这是另一个问题。

如果我设置默认标题和描述，然后创建自定义标题或/和描述，我的设置似乎正在工作......它有效，它将覆盖默认值。

但是，您可以阅读按钮的简短 if 语句......如果我的按钮切换器在默认值或自定义中设置为 false 或 true，它仍然有效并覆盖默认设置......但是，如果默认值和自定义都说：true 或 false。 ..按钮值变为“未定义”。

我不知道如何说总是只读取自定义设置，如果它们被定义并且忘记了默认值......或者类似的东西。我希望你们能理解我，希望我能找到答案。

问候，内纳德。

**编辑：**

似乎我需要在海关中完全定义一个按钮配置，以免得到“未定义”......我该如何解决这个问题？

默认值示例：

```
var defaults = {
    buttons: {
        switcher        : false,
        nameButton_1    : 'Continue',
        nameButton_2    : 'Discard',
    }
}; 
```

海关示例：

```
$(function() {
$().miniBox({
    title: 'Works flawlessly!',
    buttons: {
        switcher: true
    }
});

}); 
```

如果未在自定义设置中定义按钮名称，我如何仍使用默认按钮设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:26:45.577

[`.first`](http://api.jquery.com/first/)只是一个jQuery方法。它从集合中选择第一个元素。

该`init`方法是一个已定义的函数，然后立即调用（在这种情况下有点没有意义），尽管您可以稍后在插件代码之外调用它（也没有意义）。

至于你问题的第二部分，你没有递归`.extend`ing 对象，所以嵌套对象值没有得到扩展。用作使其深入`true`的第一个参数： [http](http://jsfiddle.net/ntdLu/1/) : //jsfiddle.net/ntdLu/1/[`.extend`](http://api.jquery.com/jQuery.extend/)

# c++ - 如何从屏幕上捕获图像并将它们与 C++ 中的已知图像进行比较？

> ID：14922528
> 
> 赞同：0
> 
> 时间：2013-02-17T15:13:52.643
> 
> 标签：c++, image-processing, captcha

为了查看是否可以轻松破解非常简单的验证码，我正在尝试编写一个程序（尽可能简单和小）。我希望用 C++ 编写的这个程序应该执行以下操作：

1.  制作屏幕已知区域的部分屏幕截图。（假设 CAPTCHA 始终位于完全相同的位置 - 例如：像素 500-600 x，像素 300-400 y）。

2.  自动将 CAPTCHA 分解为单个字母。（我将为测试创建的验证码都只有几个白色字母，总是在黑色背景上，间隔很好，让我更容易。）

3.  然后，程序将“剪切”的字母与一组“已知”的字母图像（看起来类似于 CAPTCHA 中使用的字母）进行比较，其中包含 26 个元素，每个元素都包含一个英文字母的图像。

4.  该程序将字母与比较映射到的图像相关联，并将该键发送到控制台（通过 std::cout）

我的问题是：是否有一个易于使用的库（我只是编程的初学者），可以处理任务 1-3（4\. 相当简单）？特别是第三点是我几乎没有发现任何值得的东西。理想的情况是，如果这个库有一个“评分”功能，使用浮点数来指示图像的相似程度。然后，得分最高的就是最好的命中。（即：100.0 表示图像相同，29.56 表示它们非常不同，等等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:09:03.427

这项工作的一个很好的库是 OpenCV。[http://opencv.org](http://opencv.org)

OpenCV 拥有所有必要的低级图像处理工具来分割验证码的不同元素。然后你可以使用它的模板匹配模块。

您甚至可以尝试在不进行预处理的情况下直接检测字母。它会更慢，但验证码图像通常很小，几乎不重要。请参阅： [http ://docs.opencv.org/modules/imgproc/doc/object_detection.html#cv2.matchTemplate](http://docs.opencv.org/modules/imgproc/doc/object_detection.html#cv2.matchTemplate)

有关进入图书馆的一些教程，请参阅： [http ://docs.opencv.org/doc/tutorials/tutorials.html](http://docs.opencv.org/doc/tutorials/tutorials.html)

# java - Java 程序可以在 Windows 7 上运行，但不能在 Windows 8 上运行？

> ID：14922532
> 
> 赞同：1
> 
> 时间：2013-02-17T15:14:04.627
> 
> 标签：java, windows, jakarta-mail

你们让我有自我意识。我会努力让这个变得更好。

好的，据我所知，这个程序（不要杀了我..我下载了它）仅适用于 Windows 7 和 Ubuntu。当您在 Windows 8 上打开它时，它会显示“Java 异常错误”。

我认为这与`catch(messagingException ex)`文件末尾有关。我承认，我对 java 知之甚少，但你必须从某个地方开始......不是吗？我知道java适用于所有平台！

我还用多个文件和多个 Gmail 帐户尝试过这个程序……我什至用我的 Comcast 电子邮件地址尝试过。
我将“JavaMailAPI”（[http://www.oracle.com/technetwork/java/javamail/index.html](http://www.oracle.com/technetwork/java/javamail/index.html)）用于实际的邮件部分。

当我在 Windows 8 的终端上打开它时，它给了我这个：

```
Exception in thread "Main" java.lang.noclassdeffounderror: java/mail/mailexception
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.langf.Class.privateGetDdecLaredMethods(Unkown source)
at java.lang.Class.getMethod(unknown source)
at sun.launcher.LauncherHelper.getMainMethod(Unknown source)
caused by: java.lang.classnotfoundexception: java.mail.messagingException
at java.net.URLCLassLoader$1.run(unknown source)
at java.net.URLClassLoader$1.run(Unknown source)
at java.security.AccessController.doPrivaleged(native Method)
at java.net.URLClassLoader.findClass(Unknown source)
at java.lang.ClassLoader.findClass(Unkown source)
at jaa.lang.CLassLoader.loadClass(Unknown source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown source)
at java.lang.ClassLoader.loadClass(Unknown source)
... 6 more 
```

**这是代码：**

```
package testing;

import java.util.Properties;
import javax.activation.DataHandler;
import javax.activation.DataSource;
import javax.activation.FileDataSource;
import javax.mail.BodyPart;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.mail.Multipart;
import javax.mail.PasswordAuthentication;
import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeBodyPart;
import javax.mail.internet.MimeMessage;
import javax.mail.internet.MimeMultipart;
import java.util.logging.Level;
import java.util.logging.Logger;

public class Testing{
    public static void main(String[] args) {
        Properties props = new Properties();
        props.put("mail.smtp.host", "smtp.gmail.com");
        props.put("mail.smtp.socketFactory.port", "465");
        props.put("mail.smtp.socketFactory.class",
                "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.port", "465");

        Session session = Session.getDefaultInstance(props,
            new javax.mail.Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication("Email","Password");
                }
            });

        try {
                        BodyPart messageBodyPart = new MimeBodyPart();
                        Multipart multipart = new MimeMultipart();
            Message message = new MimeMessage(session);
            message.setFrom(new InternetAddress("Email Address"));
            message.setRecipients(Message.RecipientType.TO,
                    InternetAddress.parse("Email Address to send "));
            message.setSubject("Subject");
            message.setText("Message");
                         String filename = "attachment location";
         DataSource source = new FileDataSource(filename);
         message.setDataHandler(new DataHandler(source));
         message.setFileName(filename);
         multipart.addBodyPart(messageBodyPart);
            Transport.send(message);
            System.out.println("Done");
                } catch (MessagingException ex) {
                Logger.getLogger(Testing.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
} 
```

如果您需要有关该程序的任何其他信息，请询问！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:49:06.920

[您必须下载 Java 邮件](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-eeplat-419426.html#javamail-1.4.6-oth-JPR)

如果此应用程序需要 JavaMail，您应该构建一个安装程序以将所需的 JAR 打包并安装为 JavaMail。

# python - 如何将行附加到 Gtk.ListStore？

> ID：14922533
> 
> 赞同：1
> 
> 时间：2013-02-17T15:14:04.880
> 
> 标签：python, pygtk, gtk3, pygobject

我试图将我的应用程序从 python2.7 pyGTK 切换到 Python3 和 pyGObject 并且很难将行附加到我的 Gtk.ListStore ：/

这段代码：

```
#!/usr/bin/env python3

from gi.repository import Gtk

listStore = Gtk.ListStore(str)
itr = Gtk.TreeIter()
listStore.append(itr)
listStore.set_value(itr, 0, 'Its working') 
```

总是给我错误：

```
Traceback (most recent call last):
  File "./test.py", line 7, in <module>
    listStore.append(itr)
  File "/usr/lib/python3/dist-packages/gi/overrides/Gtk.py", line 1017, in append
    return self._do_insert(-1, row)
  File "/usr/lib/python3/dist-packages/gi/overrides/Gtk.py", line 1008, in _do_insert
    row, columns = self._convert_row(row)
  File "/usr/lib/python3/dist-packages/gi/overrides/Gtk.py", line 850, in _convert_row
    if len(row) != n_columns:
TypeError: object of type 'TreeIter' has no len() 
```

到底是怎么回事？如何将新行追加到 Gtk.ListStore？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:51:01.337

只需使用以下命令：

```
itr = store.append(['Its working', ]) 
```

[您可以在The Python GTK+ 3 Tutorial](http://python-gtk-3-tutorial.readthedocs.org/en/latest/treeview.html#the-model)中找到更多示例。

# php - 为什么包含“sandbox.paypal.com”的电子邮件无法发送给 gmail 收件人？

> ID：14922535
> 
> 赞同：1
> 
> 时间：2013-02-17T15:14:21.880
> 
> 标签：php, security, email, html-email, paypal-sandbox

我遇到了一些非常奇怪的事情。如果我尝试使用 PHP 的邮件功能发送和包含字符串“ [https://www.sandbox.paypal.com/](https://www.sandbox.paypal.com/) ”的电子邮件，它永远不会被发送，**这发生在我尝试过的所有网络主机上以及我的测试 vm（无论发送方法如何：我的 vm 上的 msmtp 和 gmail smth，服务器上的 sendmail 或 postfix mta ...），并且无论此字符串周围的上下文如何，标头（纯文本邮件，html 邮件）收件人，发件人**。

这是全球实施的某种安全措施还是什么？顺便说一句，字符串“ [https://www.paypal.com/](https://www.paypal.com/) ”不会导致这种行为。

注意：没有错误并且`mail(...)`函数返回`true`，只是电子邮件永远不会到达目的地。

* * *

更新：这似乎是一个 gmail 特定的问题，我尝试发送到非 gmail 托管帐户，它工作正常。在 gmail 帐户上，*一些*测试电子邮件会到达，但会延迟 30 分钟！（也许 gmail 垃圾邮件过滤器会阻止一些邮件）

# verilog - verilog 数组引用

> ID：14922537
> 
> 赞同：0
> 
> 时间：2013-02-17T15:14:38.750
> 
> 标签：verilog

我有这个模块。问题是`gameArray[0][x][y-1]`行不通。执行这种操作的正确方法是什么？基本上它类似于 C++ 语法，但不能让它工作。

```
module write_init_copy(
  input clk,
  input gameArray [1:0][63:0][127:0], writecell, processedcell,
  input [5:0] x,
  input [6:0] y,
  input initialize, copyover,
  output reg done_initialize, done_copy, done_writecell);

always@(posedge clk)
begin
    if(writecell == 1)
    begin
        gameArray[1][x][y] <= processedcell;
        done_writecell <= 1;
    end
    else if(initialize == 1)
    begin

    end
end

endmodule 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T20:36:03.097

gameArray 被声明为输入，因此您不能分配给它。如果您想修改它，请声明一个单独的“输入”和“输出”版本，其中 out <= f(in); IE

```
gameArray_out <= gameArray_in;
gameArray_out[1][x][y] <= procesedcell; 
```

# iphone - modalPresentationStyle 设置为 UIModalPresentationCurrentContext 时没有动画

> ID：14922539
> 
> 赞同：12
> 
> 时间：2013-02-17T15:14:49.520
> 
> 标签：iphone, ios, objective-c, xcode, presentmodalviewcontroller

当我将我的`UIViewController`with设置为时，没有滑入。没有使用过渡。`modalPresentationStyle``UINavigationController``UIModalPresentationCurrentContext``UIViewController`

这是我的代码：

```
UIViewController *viewController = [[UIViewController alloc] init];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
navController.navigationBarHidden = YES;

self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext;

[self presentViewController:navController animated:YES completion:nil]; 
```

当我不设置时`modalPresenttionStyle`，一切正常。但我需要这种风格，因为我想要`UIViewController`礼物作为叠加。

顺便说一句：当`ViewController`被解雇时，动画效果很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T10:19:33.280

根据`UIViewController.h`标题定义：-

/* 定义当视图控制器以模态方式呈现时将用于此视图控制器的转换样式。在要呈现的视图控制器上设置此属性，而不是在演示者上。默认为 `UIModalTransitionStyleCoverVertical`. */

因此，您应该将其应用于以下内容`presentingViewController`：-

```
UIViewController *viewController = [[UIViewController alloc] init];

 UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
 navController.navigationBarHidden = YES;

//Here is the change
 navController.modalPresentationStyle = UIModalPresentationCurrentContext;

[self presentViewController:navController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-18T15:47:45.897

如果您希望将`UIViewController`其呈现为不正确的方法，因为当您这样做时： `[self presentViewController:navController animated:YES completion:nil];` 您正在执行模态演示，并且您的父视图控制器不会低于当前视图控制器。相反，您将拥有`UIWindow`，因此那里可能是黑色的，这不是您想要的。

所以为了做你想做的事，你需要将你的控制器呈现为 childViewController 并将它的视图添加到你的父控制器视图中，如下所示：

```
UIViewController *viewController = [[UIViewController alloc] init];

[self addChildViewController:viewController];
[self viewWillDisappear:animated];
[self.view addSubview:viewController.view];
[self.view bringSubviewToFront:viewController.view];
[viewController didMoveToParentViewController:parentController];
[self viewDidDisappear:animated]; 
```

并删除`UIViewController`：

```
[controller.view removeFromSuperview];
[controller willMoveToParentViewController:nil];
[controller.parentViewController viewDidAppear:animated];
[controller removeFromParentViewController]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-24T07:48:29.143

```
UIViewController *viewController = [self.storyboard instantiateViewControllerWithIdentifier:@"MyViewController"];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
navController.navigationBarHidden = YES;

navController.modalPresentationStyle = UIModalPresentationCurrentContext;

[self presentViewController:navController animated:YES completion:nil]; 
```

使用故事板标识符启动 viewController，它可能会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-06T20:53:40.143

如果你想添加一个覆盖，你需要做的第一件事是确保你使用的是 iOS 7 的新 ViewController 转换 API。这里有一个快速教程[Objc.io 视图控制器转换](http://www.objc.io/issue-5/view-controller-transitions.html)

完成后，您应该有一个动画器和一个符合 UIViewControllerTransitioningDelegate 协议的视图控制器。

然后，当您想要展示您的控制器时，您需要将模态展示样式设置为 UIModalPresentationStyleCustom 而不是 CurrentContext。自然，您的动画师将需要配置所呈现控制器的框架，以便您仍然可以看到下面的内容。

这是另一个可能有帮助的教程 -[自定义演示文稿](http://www.teehanlax.com/blog/custom-uiviewcontroller-transitions/)

最后但并非最不重要的一点是，您将不得不处理任何方向的演示场景，如果不这样做，您会在旋转时看到奇怪的行为，因为过渡的容器仍然是纵向的。在这里查看我的答案 -[任何方向的过渡](https://stackoverflow.com/a/24800369/1652402)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-26T01:36:56.997

让我知道这是否有帮助，当前视图控制器将被解除以启动动画。

```
UIViewController *viewController = [[UIViewController alloc] init];

UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:viewController];
navController.navigationBarHidden = YES;

self.navigationController.modalPresentationStyle = UIModalPresentationCurrentContext;

[self dismissViewControllerAnimated:YES completion:^{
  [self presentViewController:navController animated:YES completion:nil];
}]; 
```

# ios - UITableView + 核心数据

> ID：14922540
> 
> 赞同：0
> 
> 时间：2013-02-17T15:14:51.560
> 
> 标签：ios, objective-c, uitableview, core-data

我开始工作（学习）来处理一个`UITableView`+核心数据，我开始阅读一些关于它的东西，在我开始编写一个小示例应用程序之后，我可以在其中按下一个按钮，然后数据将显示在`tableView`.

我的问题是我已经正确地对其进行了编程，我认为，Xcode 没有向我显示任何警告或错误等。但它不起作用。

谁能告诉我为什么这段代码不起作用？

项目： [http ://www.sendspace.com/file/ohc1kn](http://www.sendspace.com/file/ohc1kn)

编辑：如果你不设置：`self.fetchedResultsController.delegate = nil;`

显示以下错误：

> 2013-02-17 16:45:05.480 tableView+Coredata[1533:207] ***断言失败 -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1912.3/UITableView.m:6072 2013-02-17 16：45：05.481 tableView + Coredata [1533：207] CoreData：错误：严重的应用程序错误。在调用 -controllerDidChangeContent: 期间，从 NSFetchedResultsController 的委托中捕获了一个异常。UITableView dataSource 必须从 tableView:cellForRowAtIndexPath: 中返回一个单元格，带有 userInfo (null)

* * *

代码用于将 NewObject 插入到数据库和 TableView 中，如果我执行该操作，则会出现上述错误。

```
// Create a new instance of the entity managed by the fetched results controller.
NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];
// If appropriate, configure the new managed object.
// Normally you should use accessor methods, but using KVC here avoids the need to add a custom class to the template.
[newManagedObject setValue:[NSDate date] forKey:@"timeStamp"];
// Save the context.
NSError *error = nil;
if (![context save:&error]) {
    /*
     Replace this implementation with code to handle the error appropriately.

     abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
     */
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];
    return [sectionInfo numberOfObjects];
}

- (UITableViewCell *)tableView: cellForRowAtIndexPath:(NSIndexPath *)indexPath

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:39:31.827

1个错误是缺少tableView参数：`- (UITableViewCell *)tableView: cellForRowAtIndexPath:(NSIndexPath *)indexPath`

解决这个问题，然后告诉我们究竟什么不起作用/你希望你的应用做什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:16:16.767

您应该在此处提供其他详细信息。很难理解发生了什么，但同时我也没有什么考虑。

首先，你用的是`registerClass:forCellReuseIdentifier:`方法吗？如果不是，你应该`alloc-init`在方法中使用一个单元格`tableView:cellForRowAtIndexPath:`。

然后，以正确的方式覆盖，`tableView:cellForRowAtIndexPath:`如下所示

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // your code here...
    return cell;
} 
```

# jquery - 如何在jQuery中具有不同功能的两种不同模式之间正确切换？

> ID：14922542
> 
> 赞同：1
> 
> 时间：2013-02-17T15:15:10.410
> 
> 标签：jquery, refactoring, coffeescript

我有一个带有 Rails 的网络应用程序。我使用 jQuery 来操作文本选择。

我已经实现了两个 modi：

**阅读模式：** 用户只能阅读文本。亮点和修改被隐藏。

**审阅模式：** 用户可以编辑和修改文本。

对于阅读模式，我想阻止触发文本修改的所有功能。

现在我有一个变量`inReviewMode`。它的布尔值，我在用户单击按钮时触发该值。在代码中，我实现了如下开关：

（CoffeeScript 符号）

```
jQuery ->
  $(document).on 'contextmenu', 'article#content', (e) ->
    if inReviewMode
      e.preventDefault()
      # and so on... 

  $(document).on 'click', 'article#content', (e) ->
    if inReviewMode
      # something to do 
```

有没有更好的方法，比如将 if 语句包装在所有函数周围，然后在 else 块中实现“阅读模式函数”？

我希望你能理解我的问题。感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:56:22.990

我认为有几件事可以解决这个问题：

1.  用于`stopImmediatePropagation`取消对兄弟事件处理程序的通知。
2.  对您想要取消的所有“编辑”事件使用一个事件处理程序。

换句话说，是这样的：

```
$ ->
    isReviewMode = false;

    $('#review-yes').change () ->
        isReviewMode = this.checked;

    $(document).on 'click contextmenu', '#content', (e) ->
        if isReviewMode
            e.preventDefault()
            e.stopImmediatePropagation()

    $(document).on 'click', '#content', (e) ->
        alert 'edit mode!' 
```

**示例：http:** [//jsfiddle.net/6zAN7/8/](http://jsfiddle.net/6zAN7/8/)

从示例中可以看出，两者`click`都`contextmenu`不会出现在审阅模式中。

您可以扩展这个想法并提供一个常量变量`EditModeEvents`，其中包含您要在编辑模式下取消的所有事件：

```
$ ->
    isReviewMode = false;
    EditModeEvents = ['click', 'contextmenu'];

    $('#review-yes').change () ->
        isReviewMode = this.checked;

    $(document).on EditModeEvents.join(' '), '#content', (e) ->
        if isReviewMode
            e.preventDefault()
            e.stopImmediatePropagation()

    $(document).on 'click', '#content', (e) ->
            alert 'edit mode!' 
```

这样，代码就更清楚了它正在完成的工作，添加新事件所需要做的就是将事件名称添加到`EditModeEvents`.

此策略假定您在查看模式下对每个事件要做的就是阻止事件发生。如果您需要根据事件执行不同的操作，那么这将无法正常工作——但是您可以使用单独的事件处理程序执行类似的操作。

# php - Kohana：Kohana 3.2 中的身份验证哈希密钥问题

> ID：14922544
> 
> 赞同：0
> 
> 时间：2013-02-17T15:15:15.480
> 
> 标签：php, authentication, hash, kohana

Kohana：当我使用 Auth 模块时，出现下面提到的错误：必须在您的 auth 配置中设置有效的哈希键。

被调用的代码是：

```
public function hash($str) 
{       
if ( ! $this->_config['hash_method'])           return $str;        
if ( ! $this->_config['hash_key'])          
throw new Kohana_Exception('A valid hash key must be set in your auth config.');        
return hash_hmac($this->_config['hash_method'], $str, $this->_config['hash_key']);
} 
```

在这里我可以看到 hash_key 没有正确出现，当我删除这个检查时一切正常。你能帮助理解是什么问题吗？

我正在使用 Auth::instance()->login("userid", "password");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:56:03.873

在你的 auth 配置文件中（如果你没有，把它放在这里`./application/config/auth.php`），你需要定义一个哈希键。使用随机字符串。例子：

```
<?php defined('SYSPATH') or die('No direct access allowed.');

return array(

    'driver'       => 'ORM',
   'hash_method'  => 'sha256',

    // This is the important line
    'hash_key'     => 'seilrrskj34sljusd',
    'lifetime'     => 1209600,
    'session_type' => Session::$default,
    'session_key'  => 'auth_user',

    // Username/password combinations for the Auth File driver
    'users' => array()

); 
```

# javascript - ASP.NET 使用浏览器下载文件并同时重定向到另一个页面

> ID：14922548
> 
> 赞同：0
> 
> 时间：2013-02-17T15:15:30.597
> 
> 标签：javascript, asp.net, redirect

前段时间我在授权例程中有以下代码：

```
 protected void Login1_LoggedIn(object sender, EventArgs e)
        {
            string returnUrl = Request.QueryString["ReturnUrl"];   
            if (!string.IsNullOrEmpty(returnUrl))
            {
                // download file from server

                Response.Redirect(returnUrl);
            }
        } 
```

`returnUrl`是服务器上文件的完整路径，所以我曾经通过这种方式通过浏览器下载标准对话框下载文件。但是现在我需要在授权后立即将用户重定向到另一个页面，同时在下载文件时。所以现在我需要类似的东西

```
{
    // download file from server
    Response.Redirect(returnUrl);
    Response.Redirect("/");
} 
```

我找不到正确的方法。我尝试了很多方法，但没有任何帮助。重要的注意事项是我不能使用像 download.aspx 这样的中间页面，它只用于下载然后重定向到必要的页面。所以，我使用的方法：

1.

```
Response.Redirect(returnUrl, false);
Response.Redirect("/"); 
```

结果：文件没有下载，立即重定向发生。

2.

```
Response.Redirect(returnUrl, false);
Response.Redirect("/", false); 
```

结果：什么都没有发生。

3.

```
Response.Clear();
Response.ClearHeaders();
Response.ClearContent();
Response.ContentType = "application/octet-stream";
Response.AddHeader("Content-Disposition", "attachment; filename=" + returnUrl);
Response.TransmitFile(Server.MapPath("~" + returnUrl));
Response.End();
Response.Redirect("/"); 
```

结果：文件已下载，但没有重定向。当删除`Response.End();`重定向发生时，但文件未加载。

1.  先前的变体具有以下更改： 添加：Response.AddHeader("Refresh", "3; URL=/home.aspx");

移除：Response.Redirect("/");

结果：文件正在下载，但没有刷新/重定向发生。

1.  使用 javascript 下载文件：

Response.Write("language='javascript'>window.location.assign('returnUrl','download', '');"); Response.Redirect("/");

结果：文件未加载，发生重定向。`Response.Write`将参数替换为`"<script>alert('test');</script>"`. 没有警报出现，重定向发生。

你知道，有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T11:57:06.387

我在 asp.net 论坛上得到了帮助，就[在这里](http://forums.asp.net/p/1883533/5305880.aspx/1?Download%20file%20via%20browser%20and%20redirect)。我在必须重定向授权用户的页面上放置了以下代码：

```
<%--We use iframe and script below for downloading files by not authorized users via direct links--%>
<script runat="server">
    protected void Page_Load(object sender, EventArgs e)
    {
        iframeFile.Attributes["src"] = Request.QueryString["file"];
    }
</script>

 <asp:Content ContentPlaceHolderID="masterContent" runat="server">

    <div>
        <iframe id="iframeFile" runat="server" style="display: none;"></iframe>
    </div> 
```

在登录页面的代码隐藏中，我编写了以下用于下载文件的片段：

```
string returnUrl = Request.QueryString["ReturnUrl"];
if (!string.IsNullOrEmpty(returnUrl))
{
    Response.Redirect("/?file=" + Server.UrlEncode(returnUrl));
} 
```

现在问题解决了。

# php - Cron：没有指定输入文件

> ID：14922551
> 
> 赞同：0
> 
> 时间：2013-02-17T15:15:47.470
> 
> 标签：php, cron

我在我的 cron 选项卡中运行了以下命令：

```
/home/thanksfo/php -f /home/thanksfo/fastcron.php 
```

fastcron.php 的内容是：

```
system("(sleep 10 && /home/thanksfo/php -f /home/thanksfo/public_html/_aweber/admin/cron/cron.php) &
(sleep 20 && /home/thanksfo/php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 30 && /home/thanksfo/php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 40 && /home/thanksfo/php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 50 && /home/thanksfo/php -f /home/big/public_html/_aweber/admin/cron/cron.php) &
(sleep 60 && /home/thanksfo/php -f /home/big/public_html/_aweber/admin/cron/cron.php)"); 
```

我可以改变什么让它工作？它一直没有返回日志文件中指定的输入文件。

我对代码进行了一些更改并收到以下错误：

```
/bin/sh: /home/thanksfo/php: is a directory 
```

# unit-testing - 如何用 PHPUnit 模拟这些方法？

> ID：14922556
> 
> 赞同：0
> 
> 时间：2013-02-17T15:16:02.890
> 
> 标签：unit-testing, testing, mocking, phpunit

我有这个示例类

```
class Class
{
    public function getStuff()
    {
        $data = $this->getData('Here');

        $data2 = $this->getData('There');

        return $data . ' ' . $data2;
    }

    public function getData( $string )
    {
        return $string;
    }
} 
```

我希望能够测试 getStuff 方法并模拟 getData 方法。

模拟这种方法的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:23:57.433

我认为该`getData`方法应该是不同类的一部分，将数据与逻辑分开。然后，您可以将该类的模拟`TestClass`作为依赖项传递给实例：

```
class TestClass
{
  protected $repository;

  public function __construct(TestRepository $repository) {
    $this->repository = $repository;
  }

  public function getStuff()
  {
    $data  = $this->repository->getData('Here');
    $data2 = $this->repository->getData('There');

    return $data . ' ' . $data2;
  }
}

$repository = new TestRepositoryMock();
$testclass  = new TestClass($repository); 
```

模拟必须实现一个`TestRepository`接口。这称为依赖注入。例如：

```
interface TestRepository {
  public function getData($whatever);
}

class TestRepositoryMock implements TestRepository {
  public function getData($whatever) {
    return "foo";
  }
} 
```

使用接口并在`TestClass`构造函数方法中强制执行它的优点是接口保证了您定义的某些方法的存在，就像`getData()`上面一样 - 无论实现是什么，方法都必须存在。

# matrix - 奇异值分解

> ID：14922557
> 
> 赞同：3
> 
> 时间：2013-02-17T15:16:05.277
> 
> 标签：matrix, camera-calibration

我开始学习有关相机矩阵及其解决方法的知识。在其中的许多方法中，我看到了使用矩阵的奇异值分解的一些方法，但我不明白使用它的目的是什么，有人可以给出一些提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:23:04.277

SVD 用于将矩阵分解为三个矩阵，它们以一种方式相乘将得到原始矩阵，如果以相反的顺序相乘将得到倒置矩阵。

例如，在尝试求解具有 n 个未知数的 n 个方程的方程组时，这非常有用。

在相机校准的情况下，我假设未知数是校准参数。

我将尝试为您找到一个描述这两个过程的好链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-04T05:21:04.743

SVD是一种在n维空间中寻找方向的方法，可以解释数据的最大方差。观察下图，在这张图中，我们选择的方向[红点之间的线]不是一个好的方向。由于数据点不位于所选方向。这就是为什么数据点在该线上的投影误差之和最大的原因。

[使用不适当方向时的数据点投影](https://i.stack.imgur.com/Hyubw.jpg)

但是看第二张图，在这个方向上我们选择[**红点之间的线**]是不错的选择。因为它与数据点分布一致。这就是为什么数据点在该线上的投影误差之和最小的原因。

[使用适当方向时的数据点投影](https://i.stack.imgur.com/iYmWS.jpg)

**SVD 做什么？**

SVD 将数据集分解为三个组件，您可以决定要使用哪个方向进行数据分析。当数据科学家可以通过查看下面给出的原始数据分布来弄清楚时，这对数据科学家非常有帮助。

[原始数据分布](https://i.stack.imgur.com/1OOVs.jpg)

使用 SVD 时，数据会以您可以找到清晰模式的方式进行转换。在下图中，主成分 1 和 2 是投影误差较小的方向。

[使用这些主成分绘制数据](https://i.stack.imgur.com/503nz.jpg)

了解更多详情

# cakephp - Cakephp 错误：在非对象上调用成员函数 find()

> ID：14922558
> 
> 赞同：0
> 
> 时间：2013-02-17T15:16:05.223
> 
> 标签：cakephp, associations, alias, cakephp-bake

我有以下模型：

```
class Adjustment extends AppModel {
   var $name = 'Adjustment';       
    var $belongsTo = array(
    'Source_Budget'=>array('className'=>'Budget','foreignKey'=>'s_budget_id'),
    'Target_Budget'=>array('className'=>'Budget','foreignKey'=>'t_budget_id'),
    'Source_Project'=>array('className'=>'Project','foreignKey'=>'s_project_id'),
    'Target_Project'=>array('className'=>'Project','foreignKey'=>'t_project_id')

  ); 
```

模型预算和项目如下

```
class Budget extends AppModel {
var $name='Budget';
var $belongsTo = array('Year');
var $hasMany=array('Project','Payment','Revenue',
'AdjustmentFrom'=>array('className'=>'Adjustment','foreignKey'=>'s_budget_id'),
'AdjustmentTo'=>array('className'=>'Adjustment','foreignKey'=>'t_budget_id'),
'TransferFrom'=>array('className'=>'Transfer','foreignKey'=>'s_budget_id'),
'TransferTo'=>array('className'=>'Transfer','foreignKey'=>'t_budget_id')
 );

class Project extends AppModel {
   var $name = 'Project';
   var $belongsTo = array('Budget','Year');

    var $hasMany=array('Payment','Revenue',
'AdjustmentFrom'=>array('className'=>'Adjustment','foreignKey'=>'s_project_id'),
'AdjustmentTo'=>array('className'=>'Adjustment','foreignKey'=>'t_project_id'),
'TransferFrom'=>array('className'=>'Transfer','foreignKey'=>'s_project_id'),
'TransferTo'=>array('className'=>'Transfer','foreignKey'=>'t_project_id')
  ); 
```

我已经成功地创建了一个带有脚手架的控制器，它添加/删除/更新调整，但是当我烘焙代码时，当我尝试添加调整时，我收到消息“错误：调用非对象上的成员函数 find()”。

错误在以下行：

```
$sourceBudgets = $this->Adjustment->SourceBudget->find('list');
$targetBudgets = $this->Adjustment->TargetBudget->find('list');
$sourceProjects = $this->Adjustment->SourceProject->find('list');
$targetProjects = $this->Adjustment->TargetProject->find('list');
$this->set(compact('sBudgets', 'tBudgets', 'sProjects', 'tProjects')); 
```

场外没有模型 SBudget、TBudget、SProject、TProject 所以我编辑了如下代码：

```
 $sourceBudgets = $this->Adjustment->Budget->find('list');
   $targetBudgets = $this->Adjustment->Budget->find('list');
   $sourceProjects = $this->Adjustment->Project->find('list');
   $targetProjects = $this->Adjustment->Project->find('list');
   $this->set(compact('sBudgets', 'tBudgets', 'sProjects', 'tProjects')); 
```

我添加了行 public $uses = array('Budget', 'Project');

在调整控制器类中。不幸的是，问题仍然存在，我总是收到“错误：在非对象上调用成员函数 find()”消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:39:51.010

您在第一个代码块中的 belongsTo 关联中使用的别名是错误的。而不是`Source_Budget`应该是`SourceBudget`. 同样，对于其他别名，请去掉下划线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:43:34.540

我找到了 ！！！

问题是在控制器中生成并通过 set 传递给视图的变量没有被视图正确使用。让我解释：

bake 产生了一个变量

$sourceBudgets = $this->Adjustment->Budget->find('list'); 并将其传递给添加视图。然而，添加视图使用了一个名为 s_budget_id 的变量。与模型中声明的外键字段相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T16:40:50.923

尽量保持模型中的名称一致，例如。代替：

> ' **SourceBudget** '=>array('className'=>'Budget','foreignKey'=>' **s_budget_id** '),

写：

> ' **SBudget** '=>array('className'=>'Budget','foreignKey'=>' **s_budget_id** '),

或（您将需要更新您的数据库）：

> ' **SourceBudget** '=>array('className'=>'Budget','foreignKey'=>' **source_budget_id** '),

因此，懒惰的人可以简单地说：

> ' **SBudget** '=>array('className'=>'Budget'),

或者：

> ' **SourceBudget** '=>array('className'=>'Budget'),

好吧，我花了几个小时才意识到这一点。CakePHP 的家伙“是约定优于配置的忠实拥护者”；-)

# c# - XNA 4.0 添加剂混合

> ID：14922560
> 
> 赞同：1
> 
> 时间：2013-02-17T15:16:14.453
> 
> 标签：c#, xna, xna-4.0

我在 XNA 4.0 中让 Additive blending 工作有点困难。有人告诉我，XNA 4.0 中添加剂混合的工作方式与以前在 3.1 中的工作方式不同——这可能是导致我遇到这些困难的原因。

我正在尝试获得相加效果，如果我有红色平面、绿色平面和蓝色平面，彼此重叠并面向用户 - 那么屏幕上显示的净颜色将为白色（红色+绿色+蓝色 = 白色）。但是，这样做会导致我得到不同的结果。见下图：

[https://dl.dropbox.com/u/824515/Untitled.png](https://dl.dropbox.com/u/824515/Untitled.png)

我正在使用这种技术来绘制我的飞机：

```
 GraphicsDevice.BlendState = BlendState.Additive;

        foreach (EffectPass pass in effect.CurrentTechnique.Passes)
        {
            pass.Apply();

            GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleList, circle1, 0, points, VertexPositionColor.VertexDeclaration);
            GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleList, circle2, 0, points, VertexPositionColor.VertexDeclaration);
            GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleList, circle3, 0, points, VertexPositionColor.VertexDeclaration);
        } 
```

**编辑**：这是一个更清晰的示例，说明当前添加剂混合如何为我工作：[https ://dl.dropbox.com/u/824515/Untitled2.png](https://dl.dropbox.com/u/824515/Untitled2.png)

它似乎很好地添加了颜色，但是当在中心完全组合时，颜色似乎消失了。

# linux - 如何将包含文件的文件夹复制到 Unix/Linux 中的另一个文件夹？

> ID：14922562
> 
> 赞同：1319
> 
> 时间：2013-02-17T15:16:20.413
> 
> 标签：linux, cp

我在将包含该文件夹中文件的文件夹复制到另一个文件夹时遇到了一些问题。命令`cp -r`不会复制文件夹中的文件。

* * *

## 回答 #1

> 赞同：2175
> 
> 时间：2013-02-17T15:20:20.803

您正在寻找的选项是`-R`.

```
cp -R path_to_source path_to_destination/ 
```

*   如果`destination`不存在，它将被创建。
*   `-R`意味着`copy directories recursively`。您也可以使用`-r`它，因为它不区分大小写。
*   要复制源文件夹中的**所有内容**（符号链接、隐藏文件）而不复制源文件夹*本身，*请使用`-a`标志以及源中的尾随`/.`（根据`@muni764`'s /`@Anton Krug`的[注释](https://stackoverflow.com/questions/14922562/how-do-i-copy-folder-with-files-to-another-folder-in-unix-linux#comment90054461_14922600)）：

```
cp -a path_to_source/. path_to_destination/ 
```

* * *

## 回答 #2

> 赞同：386
> 
> 时间：2013-02-17T15:26:29.950

您正在寻找`cp`命令。您需要更改目录，以便您在尝试复制的目录之外。

如果您正在复制的目录被调用`dir1`并且您想要将其复制到您的`/home/Pictures`文件夹中：

```
cp -r dir1/ ~/Pictures/ 
```

Linux 区分大小写，并且还需要`/`在每个目录之后知道它不是文件。 `~`是终端中的一个特殊字符，它会自动评估为当前用户的主目录。如果您需要知道您所在的目录，请使用命令`pwd`。

当您不知道如何使用 Linux 命令时，可以通过键入以下内容来参考手册页：

```
man [insert command here] 
```

在终端提示符下。

此外，要在终端中键入时自动完成长文件路径，您可以`Tab`在开始键入路径后点击，您将看到选择，或者它将插入路径的剩余部分。

答案中 Linux 和 Unix 之间有一个重要区别，因为对于 Linux (GNU and BusyBox) `-R`，`-r`和`--recursive`都是等效的，如[本答案](https://unix.stackexchange.com/questions/18712/difference-between-cp-r-and-cp-r-copy-command)中所述。对于可移植性，即 POSIX 合规性，`-R`由于与`-r`. 阅读手册页以了解可能出现的任何特性很重要（这是一个很好的用例来说明为什么 POSIX 标准是有用的）。

* * *

## 回答 #3

> 赞同：110
> 
> 时间：2013-02-17T15:20:42.360

采用：

```
$ cp -R SRCFOLDER DESTFOLDER/ 
```

# javascript - 使用 Meteor.loginWithPassword 登录时出现错误

> ID：14922564
> 
> 赞同：5
> 
> 时间：2013-02-17T15:16:28.840
> 
> 标签：javascript, twitter-bootstrap, meteor

到目前为止，我可以注册一个用户发送电子邮件并在 Meteor.users 中看到他……在我注销并尝试登录后，我收到了一个错误

这是我得到的错误： Meteor.Error {error: 403, reason: "User not found", details: undefined}

如果我这样做，在我的控制台中： Meteor.users

我在那里看到我的用户：a46e6e5a-03dd-4bef-9ea7-eb08ba6c2cd9：对象_id：“a46e6e5a-03dd-4bef-9ea7-eb08ba6c2cd9”用户名：“myemail@gmail.com” **原型**：对象

这是我的代码：

```
if (Meteor.isClient) {

  Template.landing.events({
    'click #login-btn' : function () {
      var username = $('#input-email').val();
      var password = $('#input-password').val();
      console.log(username);
      Meteor.loginWithPassword(username, password, function(err){
        if (err) {
          console.log(err);
        };
      });
    },
    'click #invite-btn' : function () {
      //console.log("You pressed the button");
      //open a modal window with sign up and create account ui
    },
    'click #signup-btn' : function () {
      //console.log("You pressed the signup-btn");

      var options = {
          username: $('#input-email').val(),
          password: $('#input-password').val()
      };

      Accounts.createUser(options, function(err){
        //$('#inputs').addClass('error')
        //console.log($('#inputs'))
        if (err) {

          console.log(err);

        }else{
          $('#myModal').modal('hide');
          // In your client code: asynchronously send an email
          Meteor.call('sendEmail',
                      $('#input-email').val(),
                      'update@mydomain.com',
                      'Thanks for requesting a invite code',
                      'We are glad you signed up for a invite to SlideSlider. We are working to get our closed bate up and running. Please stay tuned.');
        }
      });

    }
  });

  Template.loggedin.events({
    'click #logout-btn' : function () {
      Meteor.logout();
    }
  });

}

if (Meteor.isServer) {

  Meteor.methods({
    sendEmail: function (to, from, subject, text) {
      // Let other method calls from the same client start running,
      // without waiting for the email sending to complete.
      this.unblock();
      console.log("send email");
      Email.send({
        to: to,
        from: from,
        subject: subject,
        text: text
      });
    }
  });

} 
```

任何帮助都会很棒，顺便说一句，这是我的第一个 stackoverflow 问题:)

# android - 尝试使用 NSight 编译 Android 非原生项目

> ID：14922572
> 
> 赞同：1
> 
> 时间：2013-02-17T15:17:06.110
> 
> 标签：android, visual-studio, nvidia, nsight, tegra

我正在尝试使用带有 Visual Studio 的新 nsight 插件来编译一个没有本机代码的简单的 Android 应用程序。问题是视觉工作室甚至不会尝试编译，因为它看不到任何要编译的东西。手动运行 ant debug 可以很好地编译它。带有本机代码的 Android 应用程序工作正常，因为 Visual Studio 将 c 文件识别为要编译的东西。有谁知道如何解决这个问题，因为没有本机代码选项的 Android 应用程序是相当没用的。

输出是

```
1>------ Build started: Project: Android3, Configuration: Debug Android ------
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我还应该注意，如果我进入命令行并运行 ant build，它构建得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T05:29:16.043

也许您可以尝试使用模板“Android 应用程序”中的 helloworld 示例，看看是否可以编译。

如果您从 Tegra Android Development Pack 安装了 Nsight Tegra，并且还安装了 Android SDK/NDK、ANT、JAVA。他们应该预先配置好工作。基本上，您的路径中需要 32 位 java，以及 JAVA_HOME、ANT_HOME 环境。正如您所看到的本机编译的，很可能与 java 相关的内容在您的环境中被遗漏或弄乱了。

正如您所描述的“不编译”，是否还有其他登录输出？

# vba - 写入 TXT 文件？

> ID：14922578
> 
> 赞同：1
> 
> 时间：2013-02-17T15:17:45.170
> 
> 标签：vba

所以我在 VBA 上有一个用户表单，我正在制作一个龙与地下城风格的助手，你可以在其中按下按钮，每个统计数据都是为你决定的，但我想做到这一点，这样一旦你滚动了这些统计数据，他们就可以保存在文本文件夹中并以正确的方式再次打开。

所以，我有3个不同的统计数据。敏捷、技巧和力量。目前的代码是这样工作的：

```
Private Sub agilitybutton_Click()
agility.Caption = Int(10 + ((Int((12 - 1 + 1) * Rnd + 1)) / (Int((4 - 1 + 1) * Rnd + 1))))
End Sub

Private Sub skillbutton_Click()
skill.Caption = Int(10 + ((Int((12 - 1 + 1) * Rnd + 1)) / (Int((4 - 1 + 1) * Rnd + 1))))
End Sub

Private Sub strengthbutton_Click()
strength.Caption = Int(10 + ((Int((12 - 1 + 1) * Rnd + 1)) / (Int((4 - 1 + 1) * Rnd + 1))))
End Sub 
```

所以每个数字都是两个随机整数的除法，然后四舍五入。第一个数字介于 1 和 12 之间，第二个数字介于 1 和 4 之间。第一个数字除以第二个数字，并显示在按钮旁边的标题中。

我想让它让每个技能的字幕。（strength.caption、skill.caption 和 Agility.caption）都保存在一个 txt 文件中，我只需按一下按钮即可命名。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:44:11.353

操作文本文件最灵活的方法是`ADODB.Stream`对象。以下是简单文本输出的示例代码：

```
TextOutput = "Hello World!"
FilePath = "C:\output.txt"
Set FileStream = CreateObject("ADODB.Stream")
FileStream.Open
FileStream.Type = 2 'Text
FileStream.Charset = "utf-8"
FileStream.WriteText TextOutput
FileStream.SaveToFile (FilePath)
FileStream.Close 
```

阅读更多：[ADO 流对象](http://www.w3schools.com/ado/ado_ref_stream.asp)和示例二进制到文本的转换：[https ://stackoverflow.com/a/14285131/1953175](https://stackoverflow.com/a/14285131/1953175)

# regex - Haskell：正则表达式和 Data.Text

> ID：14922579
> 
> 赞同：15
> 
> 时间：2013-02-17T15:17:49.197
> 
> 标签：regex, haskell, text

在处理大量文本数据时，建议使用`Data.Text`而不是使用 haskells 原生字符串。检查，完成。但是正则表达式呢？是否有可用的正则表达式库，专门用于`Data.Text`？据我所知，所有正则表达式库都在使用 Haskell 原生字符串，甚至更糟糕的 CString。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T15:22:52.757

从 Data.Text[文档](http://hackage.haskell.org/packages/archive/text/0.11.2.0/doc/html/Data-Text.html)：

> 要使用扩展且非常丰富的函数系列来处理 Unicode 文本（包括规范化、**正则表达式**、非标准编码、文本中断和语言环境），请参阅 text-icu 包：[http ://hackage.haskell.org /包/文本-icu](http://hackage.haskell.org/package/text-icu)

更准确地说[是 Data.Text.ICU.Regex](http://hackage.haskell.org/packages/archive/text-icu/0.6.3.5/doc/html/Data-Text-ICU-Regex.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-08T10:29:04.923

[regex-tdfa](https://hackage.haskell.org/package/regex-tdfa) offers a `Text`-based interface in the `Text.Regex.TDFA.Text` module. Its advantage over the `text-icu` package is that it doesn't use the `IO` monad, so it's easier to use.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-03-18T23:16:50.780

# php - 单击链接后，文本会出现在多表格单元格下方。

> ID：14922580
> 
> 赞同：2
> 
> 时间：2013-02-17T15:17:59.780
> 
> 标签：php, javascript, html, css

我有一个多表单元格和行，每个单元格和行都带有链接，每个链接都包含 javascript“tdhover”，现在每个链接都链接到一个新页面，这是一个“烦人”的大量页面，我正在尝试实现类似于下面屏幕截图中的内容：

![当前表](../Images/43b11c1f862d1ec4d51df10dcf83aa39.png)

我当前的代码是简单的 html 和 css：

```
<table style="padding:0px;font-size:10pt;"><tr><td><a href='/path/1/'>1-100</a></td><td><a href='/path/101/'>101-200</a></td> /* .....etc */ 
```

如何实现每次单击链接时在表格下方显示文本的目标，如果单击新链接，则将以前的文本更改为新文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:24:28.990

您可以在要显示文本的表格下方定义一个 DIV。

并且使用 jquery，您可以在单击链接时在 DIV 上显示文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:21:48.637

如果您在同一页面中有内容，则可以使用 jquery 在 div 中显示特定文本（可能在数组或 switch 语句中）。

如果内容来自另一个页面，您可以使用 ajax/jquery(.post/.ajax) 来实现这一点。

另一个想法是定义一个 iframe（首先隐藏），您将在其中更改 iframe 的来源，因为您将单击每个链接并使其可见

希望有帮助。请发布一些代码，看看你有多远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T18:06:43.210

只需在您希望文本出现的位置（在表格下方）创建一个 div。并使用以下 jquery 代码：

```
$('#yourtableid a').click(function(){
    $.get($(this).attr('href'), function(data){
        $('#destination_div_id').html(data);
    })
}); 
```

这将在目标 div 中显示链接页面的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T01:19:47.070

经过 1 天的努力工作、搜索文档和测试代码，我最终找到了解决问题的方法。

这是显示/隐藏我的 div 的 jquery 脚本

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){

$('a').click(function () {
var divname= this.name;
$("#"+divname).show("slow").siblings().hide("slow");
});

});
</script> 
```

这是html代码：

```
<div class="menu">
<ul>
<li><a href="#" name="div1" >Home</a></li>
<li><a href="#" name="div2" >Page1</a></li>
<li><a href="#" name="div3" >page2</a></li>
<li><a href="#" name="div4" >page3</a></li>
</ul>
</div>

<div>

<div id="div1" style="display:none">
Hello World
</div>

<div id="div2" style="display:none">
Test
</div>

<div id="div3" style="display:none">
Another Test
</div>

<div id="div4" style="display:none">
Final Test
</div>

</div> 
```

这是[演示](http://fiddle.jshell.net/73LPA/)

# mysql - 将 LIKE 子句与完整单词进行比较

> ID：14922582
> 
> 赞同：0
> 
> 时间：2013-02-17T15:18:04.700
> 
> 标签：mysql, sql-like

我有以下`SQL`查询，它返回所有包含的单词`NANI`。

```
SELECT * FROM some_tbl WHERE q LIKE '%NANI%'; 
```

当我的数据库中有这样的句子时，这很好：

> 纳尼出生于佛得角，自幼随家人移居欧洲。

但是，如果我只键入`NA`或`NI`使用上述查询，该句子将再次返回。

我需要一个将`LIKE`子句与完整单词而不是单词的一部分进行比较的模式，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:21:29.617

只需在目标字符串周围放置空格：

```
SELECT * 
FROM some_tbl 
WHERE q LIKE '% NANI %'
   or q LIKE 'NANI %'
   or q LIKE '% NANI'
   or q = 'NANI'; 
```

# c# - 如何动态地将类型转换为泛型类型？

> ID：14922585
> 
> 赞同：-2
> 
> 时间：2013-02-17T15:18:17.700
> 
> 标签：c#, generics

我有一些字符串要转换为不同的类型——通常是枚举。持有这个的类是一个泛型类型，所以即使我保存了类型，我也找不到如何动态转换的方法

```
 if(type.IsEnum)
                     typedValue = Enum.Parse(type, value , true);
                }
                else
                {
                    typedValue = Convert.ChangeType(value,type);
                }

                foreach (Delegate method in pair.Value)
                {

                    method.DynamicInvoke(new[] { value, typedValue, time });
                }' 
```

我需要根据类型将类型化值更改为不是保存类型而是作为泛型类型

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:21:10.057

您不能这样做，因为仅在编译时才知道类型时才使用泛型。在您的示例中，`type`变量表示运行时类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:32:01.860

您可以`Type`使用`typeof`.

```
public T Convert<T>(T value)
{
    Type type = typeof(T);
    if(type.IsEnum)
        return (T)Enum.Parse(type, value , true);
    } else {
        ...
    }
} 
```

当然，您也可以使用类的通用参数来做到这一点。但无论如何，您需要在编译时知道类型。类型安全基于编译器检查。如果您在编译时不知道类型，则需要返回 an`object`或 a `dynamic`，除非您具有所有涉及的类型共有的更具体的类型。

* * *

假设您能够创建一个完全动态地返回正确类型的方法。

```
var converted = Convert(type, value);

// Are you allowed to do this?
converted = 2 * converted;

// or this?
converted = converted + " hello";

// or even this?
converted.SaveAs("C:\Data\Converted.txt"); 
```

由于调用者在编译时（甚至设计时）不知道类型，因此他无法以适当的方式使用此类型。这是逻辑上的限制，而不是语言的限制。即使使用动态语言或 C-Sharp 的`dynamic`类型，您也需要了解您在设计时使用的类型。

# python - Matlab结构数组到python

> ID：14922586
> 
> 赞同：4
> 
> 时间：2013-02-17T15:18:24.413
> 
> 标签：python, matlab

我已经彻底环顾四周，试图找出一种在 python 中创建类似 struct 数组的 matlab 方法。我在网上查看了一些问题，答案似乎没有帮助，或者我可能只是误解了它们，因为它们与我有关。所以，继续前进。我正在尝试形成一个等效于以下 matlab 代码的 python。

```
channel                 = [];
channel.PRN             = 0; 
channel.acquiredFreq    = 0; 
channel.codePhase       = 0; 
channel.status          = '-';  
channel = repmat(channel, 1, settings.numberOfChannels); 
```

repmat 基本上会创建一个名为 channel 的结构数组，其中的单元格数量等于 settings.numberOfChannels ，每个单元格都有 PRN、acquiredFreq 等。

稍后，我通过执行一个改变这些值的循环来访问这个结构：

```
for ii = 1:settings.numberOfChannels
        channel(ii).PRN          = PRNindexes(ii);
        channel(ii).acquiredFreq = acqResults.carrFreq(PRNindexes(ii));
        channel(ii).codePhase    = acqResults.codePhase(PRNindexes(ii)); 
```

我尝试了几种方法，但它要么在使用 numpy 的瓷砖的情况下吐出废话（我可能只是使用不正确），要么当我尝试制作一个循环时，例如：

```
class test:
    for iii in range(1,settings.numberOfChannels):
        iii.PRN=0
        iii.acquiredFreq=0
        iii.codePhase=0
        iii.status="-" 
```

我很可能认为这是语法错误或我对 python 的误解，因为这是我第一次使用它。如果这是不正确的地方问这个或那个性质的东西，我很抱歉。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-17T15:25:54.083

更新：您可能想调查[Pandas](https://pandas.pydata.org/)。它的 Series 和 DataFrame 比 NumPy 结构化数组更易于使用且功能更全面。

* * *

您可以使用 NumPy[结构化数组](http://docs.scipy.org/numpy/docs/numpy.doc.structured_arrays/)：

```
import numpy as np
channel = np.zeros(1, dtype = [('PRN',int),
                               ('acquiredFreq',int),
                               ('codePhase',int),
                               ('status','|S1')])

print(channel)
# [(0, 0, 0, '')] 
```

按整数索引访问特定行：

```
print(channel[0])
# (0, 0, 0, '') 
```

按列名索引将列作为数组返回：

```
print(channel['PRN'])
# [0] 
```

或者您可以遍历每一行并分配给每个字段（列），但这在 NumPy 中相对较慢。

```
for row in channel:
    row['PRN'] = 1
    row['acquiredFreq'] = 1
    row['codePhase'] = 1
    row['status'] = '+'

print(channel)    
# [(1, 1, 1, '+')] 
```

为了完整起见，我还要提到您可以按行然后按列分配：

```
channel[0]['status'] = '-'
print(channel)
# [(1, 1, 1, '-')] 
```

或按列然后按行分配：

```
channel['PRN'][0] = 10
print(channel)
# [(10, 1, 1, '-')] 
```

我展示了上面的内容，因为它与您发布的 Matlab 代码最相似。但是，让我再次强调，分配给 NumPy 数组中的单个单元格很慢。执行上述操作的 NumPy 方法是执行整个数组分配：

```
channel['PRN'] = PRNindexes 
```

其中`PRNindexes`是一个序列（例如列表、元组或 NumPy 数组）。

* * *

您还可以使用[花哨的索引](http://docs.scipy.org/numpy/docs/numpy-docs/reference/arrays.indexing.rst/#arrays-indexing)（又名“高级索引”）来选择行：

```
index = (channel.status == '+')  # Select all rows with status '+'
channel['PRN'][index] = 10       # Set PRN to 10 for all those rows 
```

请记住，花哨的索引返回一个新数组，而不是原始数组的视图。（相比之下，“基本切片”（例如`channel[0]`或`channel[1:10]`返回视图。）因此，如果您想进行更改原始数组的分配，请先按列选择，然后再选择索引（`index`）

```
channel['PRN'][index] = ... 
```

而不是

```
channel[index]['PRN'] = ... 
```

# maven-3 - Maven3：如何从 1 个项目创建 3 个 jars

> ID：14922589
> 
> 赞同：0
> 
> 时间：2013-02-17T15:19:05.593
> 
> 标签：maven-3, maven-plugin, maven-assembly-plugin

我有一个 java 项目，其中包含 3 个不同的类，每个类都有一个 main()。我有一个用于整个项目的 pom.xml 文件。

我希望 Maven 为每个类及其依赖项制作一个 jar。

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:13:58.160

如果您有三个主类，每个类都是一个单独的应用程序，那么您很可能应该有四个 jar：一个用于每个主类，一个用于在它们之间共享的代码。Maven 与“每个模块一个工件”的想法非常紧密，如果你试图违背这一点，你就会走上一条黑暗而危险的道路。在 Maven 中表达这种结构的自然方式是在五个或六个模块中：

1.  项目的根模块，它聚合了所有其他模块。这不会是一个 jar 生成模块。它的包装是“pom”。
2.  （可选）一个“父”子模块，所有生成工件的模块都从该子模块继承。您可以使用此模块来建立公共依赖版本，设置所有模块所需的存储库等。这也将打包设置为“pom”。它是可选的，因为位于项目根目录的聚合器模块也可以扮演这个角色，但就像在代码中一样，关注点分离是好的。[Sonatype 书中](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html)的“POM 最佳实践”涵盖了该主题。
3.  包含在三个主要类之间共享的所有代码的子模块。

和 4-6：每个主类的子模块以及特定于该主类/应用程序的支持代码和配置。

在文件系统上，此解决方案如下所示：

```
<project folder>
  - pom.xml
  - parent-module
    - pom.xml
  - common
    - pom.xml
  - app1
    - pom.xml
  - app2
    - pom.xml
  - app3
    - pom.xml 
```

然后，您将使用诸如[组装插件](http://maven.apache.org/plugins/maven-assembly-plugin/)或[appassembler](http://mojo.codehaus.org/appassembler/appassembler-maven-plugin/)之类的东西来创建将适当的配置、库和启动脚本打包在一起的发行版。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:28:49.650

您可以使用[配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)来做到这一点。在这里你有例子[（点击）](http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:29:09.383

你真的不应该那样做。请阅读[这个](http://www.sonatype.com/people/2010/01/how-to-create-two-jars-from-one-project-and-why-you-shouldnt/)，它也链接到[另一个](https://stackoverflow.com/questions/2132958/ant-to-maven-multiple-build-targets)SO 帖子。

# css - Django - 如何在 django admin 中折叠表单

> ID：14922590
> 
> 赞同：1
> 
> 时间：2013-02-17T15:19:20.647
> 
> 标签：css, django, django-forms

我使用[django-form-utils](http://pypi.python.org/pypi/django-form-utils)生成带有类似于 django admin 的字段集的 BetterModelForm。使用 BetterModelForm 可以将 CSS 与带有 'classes' 选项的字段集相关联。我想知道如何像在 Django-Admin 中那样折叠表单的字段集。

表格.py：

```
class ezAppOptionFormSet(BetterModelForm):

    class Meta:
        model = EzApp
        fieldsets = [('App options:', {'fields': ['level', 'center_1', 'center_2', 'width', 'height'], 'classes': ['collapse']}),
                ('Colors:', {'fields': ['color'], 'classes': ['collapse']})
                ] 
```

模板.html：

```
 <form method="post" action="." encrypt="multipart/form-data">{% csrf_token %}
        <b>App name: {{ App_title }}</b>
        {% if formset.non_field_errors %}{{ formset.non_field_errors }}{% endif %}
        {% for fieldset in formset.fieldsets %}
            <fieldset class="{{ fieldset.classes }}">
            {% if fieldset.legend %}
                <legend>{{ fieldset.legend }}</legend>
            {% endif %}
            {% if fieldset.description %}
            <p class="description">{{ fieldset.description }}</p>
            {% endif %}
            <ul>
            {% for field in fieldset %}
                {% if field.is_hidden %}
                    {{ field }}
                {% else %}
                    <li{{ field.row_attrs }}>
                    {{ field.errors }}
                    {{ field.label_tag }}<br>
                    {{ field }}
                    </li>
                {% endif %}
            {% endfor %}
            </ul>
            </fieldset>
        {% endfor %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T02:26:02.280

您需要使用 JavaScript 从客户端单击事件切换字段集的可见性。jQuery 的[切换](http://api.jquery.com/toggle/)功能应该可以很好地解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T21:32:42.187

我这样做的方式是简单地使用 django admin 的 collapse.js 脚本。

在模板中，导入脚本：

```
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="/static/admin/js/core.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
<script type="text/javascript" src="/static/admin/js/actions.js"></script>
<script type="text/javascript" src="/static/js/collapse.js"></script> 
```

然后更改标签`<legend>`为`<h2>`和宾果游戏，你有同样的崩溃。

```
<form method="post" action="." encrypt="multipart/form-data">{% csrf_token %}
    <b>App name: {{ App_title }}</b>
    {% if formset.non_field_errors %}{{ formset.non_field_errors }}{% endif %}
    {% for fieldset in formset.fieldsets %}
        <fieldset class="{{ fieldset.classes }}">
        {% if fieldset.legend %}
            <h2>{{ fieldset.legend }}</h2>
        {% endif %}
        {% if fieldset.description %}
        <p class="description">{{ fieldset.description }}</p>
        {% endif %}
        <ul>
        {% for field in fieldset %}
            {% if field.is_hidden %}
                {{ field }}
            {% else %}
                <li{{ field.row_attrs }}>
                {{ field.errors }}
                {{ field.label_tag }}<br>
                {{ field }}
                </li>
            {% endif %}
        {% endfor %}
        </ul>
        </fieldset>
    {% endfor %} 
```

# c# - 手动重置事件的运行方法问题

> ID：14922591
> 
> 赞同：0
> 
> 时间：2013-02-17T15:19:22.627
> 
> 标签：c#, manualresetevent

我正在构建一个使用的方法，但在我启动该方法`ManualResetEvent`后我无法让它运行。`WaitOne`这是我的方法代码。代码运行代码，直到它运行到`wait.WaitOne()`调用。谢谢！！

```
 var wait = new ManualResetEvent(false);
            Color tmpColor = new Color();
            MouseEventHandler tmpHandler = null;

            ThreadPool.QueueUserWorkItem(delegate
            {
                Debug.WriteLine("Adding MouseEventHandler..");
                tmpHandler = new MouseEventHandler(
                   (sender, e) =>
                   {
                       if (e.Button == MouseButtons.Left)
                       {
                           Bitmap tmpImage = new Bitmap(imgBox.Image);
                           tmpColor = tmpImage.GetPixel(e.X, e.Y);
                           Debug.WriteLine("Testing..");
                       }
                       else
                       {
                           Debug.WriteLine("Closing..");
                           this.Close();
                       }
                       wait.Set();
                   }
                );

                imgBox.MouseClick += tmpHandler;
            });

            Debug.WriteLine("Waiting..");

            wait.WaitOne();
            Debug.WriteLine("Running.."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:32:16.500

看起来你正在阻塞主线程。这可以防止事件处理程序执行，因此您的 Set 方法永远不会被调用。

# c++ - 毫秒到可读格式？

> ID：14922594
> 
> 赞同：0
> 
> 时间：2013-02-17T15:19:38.777
> 
> 标签：c++

我想将毫秒转换为人类可读的字符串。

所以它看起来像 1:59:23（1 小时 59 分 23 秒）。

我试过这个：

```
 int hours = (metaData["duration"].toInt()/(1000 * 60 * 60));
    int mins = (metaData["duration"].toInt()/(1000 * 60));
    int seconds = (metaData["duration"].toInt()/1000); 
```

但这只是给出总数，即它会说总分钟数和总秒数，它没有考虑60秒变成一分钟，所以不要将它包括在秒数中。

有没有人有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:21:13.873

您需要使用模数函数来提取有多少分钟和秒。

```
int hours = (metaData["duration"].toInt()/(1000 * 60 * 60));
int mins = (metaData["duration"].toInt()/(1000 * 60)) % 60;
int seconds = (metaData["duration"].toInt()/1000) % 60; 
```

模数函数在除以某物时返回余数。因此，使用`% 60`您最终得到的秒数，忽略整分钟，同样也忽略分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:21:43.797

只需稍微修改您的代码。

```
int hours = (metaData["duration"].toInt()/(1000 * 60 * 60));
// 60 mins = 1 hour
int mins = (metaData["duration"].toInt()/(1000 * 60)) % 60;
// 60 secs = 1 min
int seconds = (metaData["duration"].toInt()/1000) % 60; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-30T10:27:23.167

我使用以下代码，其中**totalf**保存毫秒值，输出类型为：

Days.Hours:Minutes:Seconds.Millisecods 例如 12.23:59:59.123

```
unsigned int r,d,h,m,s,f;
r = abs(totalf);
d = r / 86400000;
r = r % 86400000;
h = r / 3600000;
r = r % 3600000;
m = r / 60000;
r = r % 60000;
s = r / 1000;
f = r % 1000;

char str[128];

if (totalf<0)
    sprintf(str, "-%d.%02d:%02d:%02d.%03d", d, h, m, s, f);
else
    sprintf(str, "%d.%02d:%02d:%02d.%03d", d, h, m, s, f); 
```

# wordpress-theming - 我对 wordpress 主题的理解正确吗？

> ID：14922595
> 
> 赞同：0
> 
> 时间：2013-02-17T15:19:56.963
> 
> 标签：wordpress-theming, wordpress

我正在为网站开发 wordpress 主题，并希望将 wordpress 用作 CMS。我对 wordpress 开发比较陌生，但我是一位来自 Zend Framework 的经验丰富的 php 开发人员。基本上，我创建了一个新主题，并在管理工具中设置了一个主页。该站点非常基本，具有将在所有页面上使用的页眉、内容区域和页脚。我在主题中设计了页眉和页脚，但是当我到达内容部分时，我开始问自己一些问题......

基本上，问题是这样做是否被认为是正确的：

```
<?php the_content(); ?> 
```

或者

```
<section id="home_page_content">
    <div class="home_left">
        <div class="main_image">
            <div class="mariela_circle"></div>
        </div>
    </div>
    <div class="home_right">
        <?php the_content(); ?>
    </div>

</section> 
```

第一个对我来说似乎更正确，因为我可以简单地从第二个选项中获取标记并将其粘贴到该页面的 wordpress 编辑器中。我还使用简码来帮助更轻松地编辑网站的动态部分。这是我最终使用主页管理工具在页面编辑器中放入的内容：

```
<section id="home_page_content">
    <div class="home_left">
        <div class="main_image">
            <div class="mariela_circle"></div>
        </div>
    </div>
    <div class="home_right">
        [homePageSplash title1="Hello," title2="a bit about myself." content="a paragraph of text goes here." circle1Text="Item 1"]
    </div>
</section> 
```

这很好用，但这里的一些标记可能会在其他页面上重复使用。假设我创建了第二个页面。我可能会复制整个块，但只需更改简码。我不想这样做，因为我不想复制任何代码。在这种情况下，是否适合创建另一个简码来生成此标记并调用我上面列出的简码？如果有人有这样做的经验，请分享您是如何解决这个问题的。我想确保我使用的过程是正确的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:42:39.353

你不应该在你的文本编辑器中使用任何标记，WordPress 是构建的，所以即使没有 HTML 知识的人也可以使用它，所以我建议你也这样做。仅在文本编辑器中键入您的内容。

`the_content()`应该在“循环”中使用，一个基本的循环是这样的：

```
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<?php //use the_content() and similar functions (the_title()) here ?>
<?php endwhile; else: ?>
    <p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?> 
```

阅读更多：[http ://codex.wordpress.org/The_Loop](http://codex.wordpress.org/The_Loop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:16:24.397

本质上，是的，你是对的。我会做一些调整或改变，但我不会深入，因为这是个人选择。我建议您[下载一些免费的 Wordpress](http://wordpress.org/extend/themes/)主题并对其进行逆向工程；即把它们分开！

还有[一些很好的主题教程](http://www.siteground.com/tutorials/wordpress/wordpress_create_theme.htm)。如果您曾经使用过 Wordpress，它与 Joomla （就主题而言）非常相似。

# javascript - jsonp函数未定义

> ID：14922596
> 
> 赞同：0
> 
> 时间：2013-02-17T15:20:03.703
> 
> 标签：javascript, jsonp

```
(function () {

    function callbackF(data) {
        eval(data.script);
    }

    window.onload = function () {
        if (url.indexOf('.html') > 0) {
            var gt_widget_id = document.createElement('div');
            gt_widget_id.setAttribute('id', 'gt_widget_0');
            var comments = document.getElementById('comments');
            comments.parentNode.insertBefore(gt_widget_id, comments);
            var comments = document.getElementById('comments');
            var script = document.createElement('script');
            script.setAttribute('src', "http://dev.example.com/wp/wpregister.asp?callback=callbackF&ver=2.5&url=" + encoded_url);
            script.setAttribute("type", "text/javascript");
            script.setAttribute("id", "grazit_script");
            document.getElementById("gt_widget_0").parentNode.appendChild(script);
        }
    }
})(); 
```

html与问题无关，标签确实被附加并且json返回就在调用之后，控制台告诉我callbackF未定义？这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:22:55.970

> 这是为什么？

因为您需要`callbackF`在闭包之外定义函数：

```
function callbackF(data) {
    eval(data.script);
}

(function () {
    window.onload = function () {
        if (url.indexOf('.html') > 0) {
            var gt_widget_id = document.createElement('div');
            gt_widget_id.setAttribute('id', 'gt_widget_0');
            var comments = document.getElementById('comments');
            comments.parentNode.insertBefore(gt_widget_id, comments);
            var comments = document.getElementById('comments');
            var script = document.createElement('script');
            script.setAttribute('src', "http://dev.example.com/wp/wpregister.asp?callback=callbackF&ver=2.5&url=" + encoded_url);
            script.setAttribute("type", "text/javascript");
            script.setAttribute("id", "grazit_script");
            document.getElementById("gt_widget_0").parentNode.appendChild(script);
        }
    }
})(); 
```

或者，您可以`callbackF`在范围上定义您的函数，`window`以便可以从闭包外部访问它：

```
(function () {
    window.callbackF = function(data) {
        eval(data.script);
    };

    window.onload = function () {
        if (url.indexOf('.html') > 0) {
            var gt_widget_id = document.createElement('div');
            gt_widget_id.setAttribute('id', 'gt_widget_0');
            var comments = document.getElementById('comments');
            comments.parentNode.insertBefore(gt_widget_id, comments);
            var comments = document.getElementById('comments');
            var script = document.createElement('script');
            script.setAttribute('src', "http://dev.example.com/wp/wpregister.asp?callback=callbackF&ver=2.5&url=" + encoded_url);
            script.setAttribute("type", "text/javascript");
            script.setAttribute("id", "grazit_script");
            document.getElementById("gt_widget_0").parentNode.appendChild(script);
        }
    }
})(); 
```

# visual-studio-2012 - 为什么 VS 2012 测试资源管理器中的场景大纲显示为“外部”？

> ID：14922597
> 
> 赞同：7
> 
> 时间：2013-02-17T15:20:09.350
> 
> 标签：visual-studio-2012, specflow, test-explorer

我有一个场景大纲（又名场景模板），我希望使用 VS 2012 的测试资源管理器列出我的测试。默认测试分组由“项目”名称完成 - 如果我坚持使用它，来自场景大纲的测试将在“外部”组中，而不是在我的项目组下。

为什么会这样，是否有解决方案/解决方法？

我的场景是我想使用测试资源管理器为给定项目运行我的所有测试。为所有人设置相同的特征是愚蠢的，并且容易出现人为错误。

我的解决方案有 10 个这样的项目，并且很快就会添加更多。因此，将项目的场景大纲测试保留在“外部”下可能会导致任何人错过它们或获取属于另一个项目的场景大纲生成的测试。

**更新**

GitHub 用户 Shashi ( [https://github.com/shashiprabhakar](https://github.com/shashiprabhakar) ) 已向 SpecFlow 贡献者记录了一个问题：[https](https://github.com/techtalk/SpecFlow/issues/275) ://github.com/techtalk/SpecFlow/issues/275 。非常感谢，伙计！我已经开始跟踪它，所以如果在那里提出修复/解决方法，我会在这里发布它作为答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-15T09:35:54.550

```
<specFlow>
  <unitTestProvider name="..." /> <!-- this you have already -->
  <generator allowDebugGeneratedFiles="true" /> <!-- this is the important setting -->
</specFlow> 
```

这是 Gaspar Nagy 在 App.config 文件中推荐的配置。“allowDebugGeneratedFiles”似乎是一张票。可以在[官方 SpecFlow 配置页面](https://github.com/techtalk/SpecFlow/wiki/Configuration)上找到有关标签及其子标签的更多信息。将其设置为 TRUE 只是第一步。

正如 Gaspar 建议的那样，下一步是在解决方案资源管理器中右键单击项目文件并选择**Regenerate Feature Files**选项。

**注意**：当您设置allowDebugGeneratedFiles 标志然后重新生成.feature 文件时实际发生的情况，SpecFlow 只是从.feature.cs 文件中删除[#line hidden](http://msdn.microsoft.com/en-us/library/34dk387t%28v=vs.71%29.aspx)和[#line *number*](http://msdn.microsoft.com/en-us/library/34dk387t%28v=vs.71%29.aspx)。

最后，我个人建议在重建之前或之后重新启动 Visual Studio 2012。当我尝试上述步骤时，测试资源管理器仅在重新启动 Visual Studio 后才能正确显示测试。

**PS**：Gaspar 指出，如果引发了*allowDebugGeneratedFiles*标志 (=true)，则使用“运行 SpecFlow 场景”选项将不再起作用。但是，我可以通过右键单击项目文件来使用该选项。甚至在我尝试 Gaspar 的建议之前，在 .feature 上使用该选项对我不起作用，所以这一定是他所指的缺点。

**PS #2**：Gaspar 还提到 SpecFlow 1.9.2 中将消除这样的缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T15:02:37.233

正如 Gaspar ( [https://github.com/gasparnagy](https://github.com/gasparnagy) ) 在对 GitHub 问题 ( [https://github.com/techtalk/SpecFlow/issues/275](https://github.com/techtalk/SpecFlow/issues/275) ) 的评论中建议的那样，在解决方案资源管理器中右键单击项目文件然后选择“Run SpecFlow Scenarios”是测试资源管理器的项目分组的一个很好的解决方法。

我可以验证该提议是否有效 - 使用 SpecFlow 1.9.0 对其进行了测试。

但是，这仍然给测试资源管理器及其怪异的“外部”测试组留下了问题，其中放置了场景大纲生成的测试。

如果发现更多细节，我将更新此答案或发布新答案。

# html - 如何按内容设置宽度？

> ID：14922599
> 
> 赞同：0
> 
> 时间：2013-02-17T15:20:15.573
> 
> 标签：html, css

我有一个图标：

[![在此处输入图像描述](../Images/bb2e58e863b3ae7fd660d78e47972b97.png)](https://i.stack.imgur.com/AVY2A.png)

悬停时出现工具提示：

[![在此处输入图像描述](../Images/45dced4248adcb05b858f09a54baf03c.png)](https://i.stack.imgur.com/EMxU4.png)

如您所见，问题在于它的宽度是由父元素决定的，工具提示的宽度是否可能会自动由它的内容决定？

HTML：

```
<div class="icon">
    <span class="tooltip">Debian: 20%</span>
    <span class="icon-lin-debian" style="opacity:0.2"></span>
</div> 
```

CSS：

```
div.icon{
    position:relative;
    display: inline-block;
}

span.tooltip {
    display: none;
    position: absolute;
    line-height: 20px;
    width: 100%;
    left:0;
    right:0;
    padding: 10px;
    font-size: 14px;
    text-align: center;
    background: #000;
    border: 1px solid #353535;
    border-radius: 5px;
    top: -45px;
    z-index: 100;
}

span.tooltip:after {
    content: "";
    position: absolute;
    width: 0;
    height: 0;
    border-width: 10px;
    border-style: solid;
    border-color: #353535 transparent transparent transparent;
    top: 40px;
    left: 20px;
    z-index: 100;
} 
```

PS
还有别的说法，所以我不能自己设置宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:07:05.387

默认情况下，子元素将保留在其父元素内。这是通过包装内容和/或扩展父元素来实现的。

在这种情况下，父元素扩展为包含子元素，因为父元素上没有明确设置宽度。为了让子元素看起来超出父元素，您需要设置父元素的宽度，以便在子元素太宽时不会扩展，然后您需要设置子元素'宽度比他们父母的宽。然后，您可以`overflow: visible;`在父元素上指定以允许子元素完全显示，即使它们延伸到父元素之外。

# multithreading - 分析多线程和多处理器程序

> ID：14922602
> 
> 赞同：1
> 
> 时间：2013-02-17T15:20:31.533
> 
> 标签：multithreading, g++, profiling, mpi

我最近开发的应用程序使用多个处理器，它们通过消息传递接口标准进行通信，而某些部分涉及多个异步运行的线程（`std::async`）。

我正在运行带有 g++-4.6.3 和 openMPI 的 Ubuntu 12.04 x86。

将 添加`-p -g -pg`到编译器标志并运行 gprof 不会产生任何有用的输出，它基本上表示一切都很快完成了。

如何分析此类程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-31T19:52:40.493

为此，我建议由我的雇主开发的[Allinea MAP 。](http://www.allinea.com/products/map/)它分析 MPI 应用程序并显示源代码中的哪些地方占用了应用程序时间。有一些关于内存使用、MPI 通信和计算成本的非常有用的图表 - 它允许您轻松放大问题区域以提高性能。

您不必重新编译您的应用程序即可开始使用它：它会在运行时自动添加分析。

它是商业软件 - 但有 30 天的试用期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:47:11.487

对于多线程程序，没有必要带出大 MPI 配置文件枪。我使用英特尔的 VTune，它在分析多个线程方面做得非常出色。您可以获得 30 天的试用期。

# php - 使用 $$ 的更简单方法

> ID：14922606
> 
> 赞同：0
> 
> 时间：2013-02-17T15:20:46.713
> 
> 标签：php, variables

我正在寻找一种更简单的方法来制作下面的示例：

```
<?php
   $q = "Q".rand(1, 3);
   echo $$q;
?> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:25:37.433

```
<?php
   $array = array(1,2,3)
   $key = rand(1, 3);
   echo $array[$key];
?> 
```

# c++ - C++中的运算符关键字

> ID：14922615
> 
> 赞同：0
> 
> 时间：2013-02-17T15:21:33.933
> 
> 标签：c++, operator-overloading, operator-keyword

我正在阅读 C++ 中的思考。有一个我不明白的代码片段。谁能帮我解释一下？

```
class GameBoard {
public:
  GameBoard() { cout << "GameBoard()\n"; }
  GameBoard(const GameBoard&) { 
    cout << "GameBoard(const GameBoard&)\n"; 
  }
  GameBoard& operator=(const GameBoard&) {
    cout << "GameBoard::operator=()\n";
    return *this;
  }
  ~GameBoard() { cout << "~GameBoard()\n"; }
};

class Game {
  GameBoard gb; // Composition
public:
  // Default GameBoard constructor called:
  Game() { cout << "Game()\n"; }
  // You must explicitly call the GameBoard
  // copy-constructor or the default constructor
  // is automatically called instead:
  Game(const Game& g) : gb(g.gb) { 
    cout << "Game(const Game&)\n"; 
  }
  Game(int) { cout << "Game(int)\n"; }
  Game& operator=(const Game& g) {
    // You must explicitly call the GameBoard
    // assignment operator or no assignment at 
    // all happens for gb!
    gb = g.gb;
    cout << "Game::operator=()\n";
    return *this;
  }
  class Other {}; // Nested class
  // Automatic type conversion:
  operator Other() const {
    cout << "Game::operator Other()\n";
    return Other();
  }
  ~Game() { cout << "~Game()\n"; }
}; 
```

在上面的代码片段中，我不明白：

```
 operator Other() const {
    cout << "Game::operator Other()\n";
    return Other();
  } 
```

我猜这个函数定义了一个运算符“ `Other()`”。回归意味着什么`Other()`？如果`Other()`表示 Other 类的对象，则运算符 " " 的返回类型`Other()`不是 class 的类型`Other`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:33:06.853

它是一个**转换**运算符（**不是强制**转换运算符）。每当您的代码要求**转换**为`Other`操作员时，都会使用。您的代码可以通过两种方式调用转换。在以下情况下会发生隐**式转换：**

```
Game g;
Game::Other o(g); // **implicit conversion** of g to Game::Other 
```

当您在代码中编写强制转换时会发生**显**式**转换**：

 **```
Game g;
Game::Other o(static_cast<Game::Other>(g)); // **explicit conversion**
    // of g to Game::Other 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:24:06.780

它是一个强制转换运算符。

当您写作时`(Other)game;`（即您将游戏投射到`Other`）。

它会被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:24:18.837

这是一个 C++ 强制转换运算符。它定义了如果一个对象将被强制转换为类 Other 会发生什么。**

# ember.js - DS.RESTAdapter 的预期 JSON 响应的完整列表是什么？

> ID：14922623
> 
> 赞同：48
> 
> 时间：2013-02-17T15:22:41.123
> 
> 标签：ember.js, ember-data, ember-router

我正在尝试为 Ember.js 应用程序编写基于 express.js 的自定义服务器。我相处得很好，但我一直在试图猜测 Ember Data 在给定时刻期望什么 JSON 响应。

这个全新的文档是一个很好的开始[http://emberjs.com/guides/models/the-rest-adapter/](http://emberjs.com/guides/models/the-rest-adapter/)但还不够完整。

我在黑暗中的刺伤让我明白（Ember pre4，Ember Data 11）：

```
Context                                Server URL          Method     Req. Data                  Resp. Data
~~~~~~~                                ~~~~~~~~~~          ~~~~~~     ~~~~~~~~~                  ~~~~~~~~~~
Getting a list of all users            /users              GET                                   {"users":[{...},{...}]}
Getting a particular user              /users/123          GET                                   {"user":{...}}
Creating a user                        /users              POST       {"user":{...}}             ???
Updating a user                        /users/123          PUT        {"user":{...}}             ???
Deleting a user                        /users/123          DELETE     ???                        ???

Creating a user (bulkUpdate)           /users              POST       {"users":[{...},{...}]}    ???
Updating a user (bulkUpdate)           /users/bulk         PUT        {"users":[{...},{...}]}    ???
Deleting a user (bulkUpdate)           /users/123          DELETE     ???                        ??? 
```

有人可以帮我填一些这些空白吗？

**编辑，预期 JSON 响应的完整列表**

这些响应是从[ember-data REST 适配器单元测试和通过查看](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/unit/rest_adapter_test.js)[Example Ember Data 应用程序](https://github.com/dgeb/ember_data_example)上的网络流量收集的。

```
Context                                Server URL          Method     Req. Data                  Resp. Data
~~~~~~~                                ~~~~~~~~~~          ~~~~~~     ~~~~~~~~~                  ~~~~~~~~~~
Getting a list of all users            /users              GET                                   {"users":[{...},{...}]}
Getting a particular user              /users/123          GET                                   {"user":{...}}
Creating a user                        /users              POST       {"user":{...}}             {"user":{...}}
Updating a user                        /users/123          PUT        {"user":{...}}             {"user":{...}}
Deleting a user                        /users/123          DELETE     N/A                        null

Creating a user (bulkCommit)           /users              POST       {"users":[{...},{...}]}    {"users":[{...},{...}]}
Updating a user (bulkCommit)           /users/bulk         PUT        {"users":[{...},{...}]}    {"users":[{...},{...}]}
Deleting a user (bulkCommit)           /users/bulk         DELETE     {"users":[1,2]}            {"users":[1,2]} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-18T21:17:54.103

与其在黑暗中刺伤，不如看看[rest-adapter-test](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/adapter/rest_adapter_test.js)

例如，要填写关于批量更新的响应数据的问题，[L738](https://github.com/emberjs/data/blob/master/packages/ember-data/tests/integration/adapter/rest_adapter_test.js#L736)描述了预期的响应数据：

```
ajaxHash.success({ people: [
  { id: 1, name: "Brohuda Brokatz" },
  { id: 2, name: "Brocarl Brolerche" }
]}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T11:58:25.343

`ajaxResponse(`目前在`rest-adapter-test.js`源代码中查找嵌套在相似块中的短语`test("create - a payload with a new ID and data applies the updates"`以读取服务器所需的响应。

# php - 为什么此代码散列为空？

> ID：14922624
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:22:43.000
> 
> 标签：php, forms, post, passwords, sha256

以下代码通过用户名检查，但在密码检查失败。

如您所见，哈希值被回显，但由于某种原因，它们输出`e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855`，即`sha256sum`of `/dev/null`。由于密码似乎根本没有回显，我只能假设它无法获取 POST，但为什么呢？

### 登录

```
<form action="dologin" method="post">
Username: <input type="text" name="username">
Password: <input type="password" name="password">
<input type="submit">
</form> 
```

### 多洛金

```
 if ( $_POST[username] == $actualusername ) {
        // Hash the password
        $hashedpassword = hash('sha256', $_POST[password]);
        echo $_POST[password];
        echo $hashedpassword;
        if ( $hashedpassword == $actualpassword ) {
            echo '<h2>Logged in</h2>';
        } else {
        echo '<h2>Incorrect password</h2>';
        echo $hashedpassword;
        }
    } else {
        echo '<h2>Incorrect username</h2>';
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:27:43.047

关闭输入标签能解决你的问题吗？此外，您可以使用

```
isset($_POST["blabla"]) 
```

测试该值是否设置在`$_POST`.

# sql - 加入整数范围，为每一行单独创建

> ID：14922625
> 
> 赞同：2
> 
> 时间：2013-02-17T15:22:50.487
> 
> 标签：sql, oracle, select, join, range

从表中：

```
|   name   |   range   |
------------------------
| 'Range1' | '456-458' |
| 'Range2' |   '11-13' | 
```

只是想得到这个结果：

```
|   name   |   range   | value |
--------------------------------
| 'Range1' | '456-458' |  456  |
| 'Range1' | '456-458' |  457  |
| 'Range1' | '456-458' |  458  |
| 'Range2' |   '11-13' |   11  |
| 'Range2' |   '11-13' |   12  |
| 'Range2' |   '11-13' |   13  | 
```

如果源表只有一个范围，则查询可以正常工作：

```
WITH data AS (
    SELECT 'Range1' name, '456-458' range FROM dual
)
SELECT ROWNUM, name, range, LEVEL value
FROM data, dual
WHERE LEVEL >= to_number(SUBSTR(range, 1, INSTR(range,'-')-1))
CONNECT BY LEVEL <= to_number(SUBSTR(range, INSTR(range,'-')+1)); 
```

但返回数万行，如果需要两个范围：

```
WITH data AS (
    SELECT 'Range1' name, '456-458' range FROM dual
    UNION
    SELECT 'Range2' name, '11-13' range FROM dual
)
SELECT ROWNUM, name, range, LEVEL value FROM data, dual
WHERE LEVEL >= to_number(SUBSTR(range, 1, INSTR(range,'-')-1))
CONNECT BY LEVEL <= to_number(SUBSTR(range, INSTR(range,'-')+1)); 
```

*是否可以改进此查询以获得所需，或者我的方法最初是错误的？*

```
Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:42:26.543

在 11g 中，您可以对此类事物使用递归分解子查询。

```
SQL> with data as (select name, range,
  2                       to_number(substr(range, 1, instr(range,'-')-1)) from_val,
  3                       to_number(substr(range, instr(range,'-')+1)) to_val
  4                  from your_table),
  5  ranges (name, range, curr_val, from_val, to_val)
  6  as (select name, range, from_val, from_val, to_val
  7        from data
  8      union all
  9      select name, range, curr_val+1, from_val, to_val
 10        from ranges
 11       where curr_val < to_val)
 12  select name, range, curr_val
 13    from ranges
 14   order by name, curr_val;

NAME   RANGE     CURR_VAL
------ ------- ----------
Range1 456-458        456
Range1 456-458        457
Range1 456-458        458
Range2 11-13           11
Range2 11-13           12
Range2 11-13           13 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:01:30.850

递归（DazzaL 的答案）是一个更好的解决方案，但如果您想了解如何使用分层查询来实现它。

```
WITH data AS (
SELECT 'Range1' name
     , '456-460' range 
  FROM dual
UNION ALL
SELECT 'Range2' name
     , '11-13' range 
  FROM dual)

, ranges AS (
SELECT name
     , range
     , to_number(SUBSTR(range, 1, INSTR(range,'-')-1)) from_range
     , to_number(SUBSTR(range, INSTR(range,'-')+1)) to_range
  FROM data

), max_seq AS (
SELECT MAX(to_range - from_range) + 1 max_seq
  FROM ranges

), seq AS (
SELECT ROWNUM seq
  FROM max_seq
CONNECT BY LEVEL <= max_seq
) 

SELECT ROWNUM
     , name
     , range
     , from_range + seq - 1 value
  FROM ranges
 INNER JOIN seq
    ON seq <=  (to_range - from_range) + 1 
```

# javascript - 新附加元素上的 Jquery 绑定

> ID：14922629
> 
> 赞同：2
> 
> 时间：2013-02-17T15:23:02.543
> 
> 标签：javascript, jquery, javascript-events

我很好奇这样的事情是否可能

```
$('.parent').append('<div></div>',
{ text: 'delete',
  on: {click, dofunc(this)}}) 
```

这样做的关键是将事件处理程序绑定到其创建语句中新创建的元素，并将新创建的元素传递给处理函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:29:26.910

是的，有可能。

```
$('<div/>', { 
  text:  'delete',
  click:  dofunc
}).appendTo('.parent'); 
```

`this`在`dofunc`函数的上下文中是指被点击的元素。

[http://jsfiddle.net/e77L4/](http://jsfiddle.net/e77L4/)

# python - Python，tkinter：如何选择目录然后将路径作为变量加载到导入的类？

> ID：14922630
> 
> 赞同：0
> 
> 时间：2013-02-17T15:23:02.903
> 
> 标签：python, tkinter

我正在开发一个 gui，用户必须在其中浏览选择 a 目录。然后我需要将目录路径保存为变量并由导入的类使用。

到目前为止，我已经编写了使用户能够选择目录但并没有被困在下一步做什么的代码。我到目前为止的代码如下：

```
def loadDirectory():
    directory = filedialog.askdirectory() 
```

通过按下按钮调用该函数。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:38:57.220

这个比较简单。

```
import chrome

def loadDirectory():
    chrome.directory = filedialog.askdirectory() 
```

这应该做你想要的。

# git - Github：删除分叉后分叉

> ID：14922634
> 
> 赞同：4
> 
> 时间：2013-02-17T15:23:19.953
> 
> 标签：git, github, git-fork

我已经删除了我的叉子，但现在我不能再叉同一个仓库了。我只是在尝试“重新分叉”时看到 Github 的 404 页。我现在怎么分叉？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T16:09:21.097

您会发现旧版本的 GitHub for Enterprise 也有类似的行为，如[问题 50](https://github.com/rose-compiler/rose/issues/50)中所示。

对于[GitHub 上的分叉，建议](https://github.com/rose-compiler/rose/issues/50#issuecomment-10475260)是在删除前一个分叉后等待几个小时，然后重试（[单击该分叉按钮](https://stackoverflow.com/a/8698907/6309)）。

请注意，如果您打算提出新的拉取请求，则不必删除分叉：只需在更新分叉后将它们隔离在自己的分支中（[从上游推送到最新的源](https://stackoverflow.com/questions/9257533/what-is-the-difference-between-origin-and-upstream-in-github/9257901#9257901)）。

另请参阅（以避免删除分叉）：

*   “[我的pull request已经被合并了，接下来怎么办？](https://stackoverflow.com/questions/12770550/my-pull-request-has-been-merged-what-to-do-next/12772000#12772000) ”
*   “[如何进行 Github 拉取请求？](https://stackoverflow.com/a/14681796/6309) ”
*   “[无需分叉即可拉取请求？](https://stackoverflow.com/a/14821866/6309) ”

# php - 这个 php 循环是否正确，我的灯箱显示错误的图像

> ID：14922638
> 
> 赞同：0
> 
> 时间：2013-02-17T15:23:29.773
> 
> 标签：php, jquery, loops, lightbox

我正在使用 fancybox 灯箱，并想快速将图片添加到我的页面，所以我正在尝试这个 PHP 代码，但是当我单击图像时会显示错误的图像。缩略图和大图像在不同的文件夹中都是相同的数字。

```
 <?php

                $initialImageNumber = 1;
                $endingImageNumber  = 38;

                $title = "click to enlarge";

                for ($i = $initialImageNumber; $i <= $endingImageNumber; $i++)

                    echo '<a href="images/barpics/' . $i . '.jpg" class="fancybox" rel="gallery" title="' . $title .'"><img src="images/thumb/'. $i .'.jpg" /></a>';

                ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:39:01.380

好吧，这段代码还可以，你可以再简化一下这段代码

```
<?php
$totalImages  = 38;

for ($i = 1; $i <= $totalImages; $i++) {
   echo '<a href="images/barpics/' . $i . '.jpg" class="fancybox" rel="gallery" title="click to enlarge"><img src="images/thumb/'. $i .'.jpg" /></a>';
}
?> 
```

或者只是使用 for 循环。关于图像，我的猜测是图像不匹配。使用此脚本加载网页，打开它的源代码，检查图像的 ID。然后转到图像文件夹`images/barpics/`并`images/thumb/`查看具有该特定 ID 的图像。我的猜测是它们不匹配，这导致了它的问题。

# c# - 有多少用户可以使用 XML 文件读/写而不引起问题

> ID：14922639
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:23:31.830
> 
> 标签：c#, .net, xml, database

我正在使用一些 XML 文件和文本文件来为一个私人项目存储我的数据，这是我和另外一个人在使用该应用程序，它工作正常。我不使用 SQL 数据库的原因与我认为的问题无关。

在读取和写入我的文件时，我总是使用**lock(object) {}以避免读/写问题。**

问题是，在以不同方式出现性能问题和/或错误之前，我假设有多少用户可以调用想要读取和写入文件的函数，我会遇到什么问题？

如果有人与多个用户或更多用户一起尝试过，请回答，我真的很想知道:)

提前致谢！

**编辑** 每个锁定持续 1 到 2 毫秒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:38:49.670

假设每个用户都在他们自己的计算机上运行应用程序并访问共享驱动器上的 xml 文件，那么您应该使用文件锁定机制而不是对象锁定。您可以使用不共享打开文件进行读写。

例如：

```
bool success = false;
while (!success)
{
    try
    {
        using(Stream file = new FileStream(path, FileMode.Open, FileAccess.ReadWrite, FileShare.None))
        {
            // Read current content from file.
            // Make changes
            // Save new content to file.
        }
        success = true;
    }
    catch(IOException e)
    {
        // Someone else was modifying the file.
        // Apart from the message (in different languages) there is no way to tell
        // if it was a sharing violation or another IO exception.
    }
} 
```

我希望这对您的探索有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:31:29.950

更好的方法是使用 DBE 或创建自己的，它可以将数据加载到 RAM 并管理并发访问。

# javascript - Javascript - 在输入标签上返回 false

> ID：14922643
> 
> 赞同：0
> 
> 时间：2013-02-17T15:23:49.203
> 
> 标签：javascript, html, forms, return

只是出于好奇，如果您在输入标签上应用 return false 会发生什么？

```
<input type="password" name="psw" onblur="return false;" /> 
```

它会阻止该字段与表单的其余部分一起提交吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:26:38.777

它不会做任何事情，[模糊是不可取消的](http://www.w3.org/TR/DOM-Level-2-Events/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:28:28.160

`false`从处理程序返回只是取消默认操作。

`blur`据我所知，元素事件不会发生默认操作`input`，因此没有什么可以取消的。

* * *

只是为了了解在`on[event]`处理程序上分配时会发生什么，您的元素会获得一个分配给该事件的相关属性的新函数。

因此，在 的情况下`onblur`，您的元素将有效地获得：

```
elem.onblur = function(event) {
    return false;
} 
```

函数的主体是您提供的字符串。较旧的 IE 将不包含该`event`参数，这实际上对他们的情况很有帮助。

* * *

所以基本上，你的字符串就像它被传递给`Function`构造函数一样被使用，并将结果添加到属性中。

```
elem.onblur = new Function("event", "return false;") 
```

# django - 基于反转通用类视图 URL 得到

> ID：14922651
> 
> 赞同：0
> 
> 时间：2013-02-17T15:24:22.783
> 
> 标签：django

我有一个通用的类视图定义为：

```
class ItemDetailView(DetailView):
    model           = Item
    template_name   = "item_detail.html" 
```

及其对应的 URL 模式

```
('^/item/(?P<pk>\d+)/$', ItemDetailView.as_view(), name="item-detail"), 
```

我想在我的模板中使用这样的东西

```
<form method="GET" action="{% url item-detail %}">
    <input type="text" name="pk">
</form> 
```

显然，`{% url %}`失败是因为`item-detail`期望`pk`作为参数。有没有什么方法可以调用`ItemDetailView`而无需使用如下所示的辅助视图？：

```
def get_item_detail(request):
    return reverse('item-detail', kwargs={'pk': request.GET['pk']}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T18:57:21.450

将您的模板更改为：

```
{% load url from future %}
<form method="GET" action="{% url 'item-detail' pk=item.pk %}">
    <input type="text" name="pk">
</form> 
```

这是有关此的[文档](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#url)。

# ios - 通用 iOS 6 应用程序的程序化故事板

> ID：14922653
> 
> 赞同：0
> 
> 时间：2013-02-17T15:24:31.177
> 
> 标签：ios, storyboard

**更新 1**

![属性检查器](../Images/bcbaaceb428bea601975d44eaa2a0301.png)

**更新 1**

**更新 0**

![当我实现提供的答案中建议的代码时，执行中止](../Images/258d7ee1de4176774a9de20ebe0c4620.png).

**更新 0**

[这个很好的问题和答案](https://stackoverflow.com/questions/9896406/)并不完全适用于我的通用应用程序，它同时具有 iPhone 和 iPad xibs，现在想要使用情节提要。

这是基于 xib 的 BSAppDelegate.m（在故事板之前）

```
 #import "BSAppDelegate.h"
    #import "BSViewController.h"

    @implementation BSAppDelegate

    NSString *receivedData;

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        // Override point for customization after application launch.
        // return YES;
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            self.viewController = [[BSViewController alloc] initWithNibName:@"BSViewController_iPhone" bundle:nil];
        } else {        
            self.viewController = [[BSViewController alloc] initWithNibName:@"BSViewController_iPad" bundle:nil];
    }
        self.window.rootViewController = self.viewController;   
        [self.window makeKeyAndVisible];
        return YES;
    } 
```

我试图在`else`上面的代码之后插入以下代码，但我无法完全完成需要设置`self.viewController`为与上述代码兼容的代码修复。

```
UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"BSViewController"];
vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentViewController:vc animated:YES completion:NULL]; 
```

你能告诉我如何修复我的代码吗？我正在使用 Xcode 4.5.2 并为 iOS 6 开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:28:21.110

两个问题：

1.  只需将 self.ViewController 设置为您从情节提要中获得的 vc :)

    ```
     #import "BSAppDelegate.h"
    #import "BSViewController.h"

    @implementation BSAppDelegate

    NSString *receivedData;

    - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {
        // Override point for customization after application launch.
        // return YES;
        self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
        // Override point for customization after application launch.
        if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
            self.viewController = [[BSViewController alloc] initWithNibName:@"BSViewController_iPhone" bundle:nil];
        } else {        
            UIStoryboard *sb = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
            UIViewController *vc = [sb instantiateViewControllerWithIdentifier:@"BSViewController"];
            vc.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
            self.viewController = (id)vc;
        }
        self.window.rootViewController = self.viewController;   
        [self.window makeKeyAndVisible];
        return YES;
    } 
    ```

2.  在您的故事板中，您没有设置名为“BSViewController”的标识符，因此调用 instantiateViewControllerWithIdentifier 将失败。设置在屏幕截图中可见的标识符（又名 Storyboard ID）

# javascript - 从 Facebook 上的 JavaScript 文件 (melonJS) 游戏调用 Python 函数 (Flask)

> ID：14922657
> 
> 赞同：1
> 
> 时间：2013-02-17T15:25:11.530
> 
> 标签：javascript, python, facebook, flask

我浏览了有关 stackoverflow、github、Google 等的许多主题……虽然没有简单的答案，但我找到了许多不同的答案。

我正在用 JavaScript 编写 Facebook 游戏（使用 melonJS 引擎）。框架是 Flask (Python)。

我想要做的是能够在 Python 和 JS 代码之间发送数据而无需刷新页面（如数据库操作、电子邮件发送等）。我希望用户只是看到游戏、选择选项、玩游戏，剩下的事情由游戏完成。

虽然我已经设法看到类似下面的东西会起作用：

应用程序.py

```
def add(f,l,a):
    g.db.execute('insert into persons (fname,lname,age) values (?, ?, ?)',
            [f,l,a])
    g.db.commit()

@app.route('/')
def index():
    cur = g.db.execute('select fname, lname, age from persons order by id desc')
    entries = [dict(fname=row[0], lname=row[1], age=row[2]) for row in cur.fetchall()]
return render_template('app.html',entries=entries,addtodb=add) 
```

应用程序.html

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>THE GAME</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 1.22" />

    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
    var adddb = '{{addtodb('Anne','Monk','12')}}';
    </script>

</head>

<body>
{{addtodb('Allie','Monk','78')}}
<ul class=entries>
        {% for entry in entries %}
            <li><h2>{{ entry.fname }} {{ entry.lname|safe }} </h2> Age: {{ entry.age }}</li>
        {% else %}
            <li><em>Unbelievable. No entries here so far</em></li>
        {% endfor %}
</ul>
</body>

</html> 
```

{{addtodb}} 都可以工作。我只是想知道如何将函数发送到仅链接到 HTML 的 file.js（如上面的 jquery），而不是直接放在里面。正如我已经检查过的那样，“{{...}}”将不起作用。我想我可能必须找到一些 Python 模块或使用 AJAX，除非我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T23:55:11.523

答案是“AJAX”，但希望一些简化的阐述能帮助您指出正确的方向：

您需要使某种 JS 事件（单击链接、单击按钮、游戏中触发的事件）触发异步（即不等待服务器的响应）或同步（即等待回音）调用带有请求的服务器上的 Flask 端点（即您设置的路由）。如果您正在创建一个新条目，那可能是一个 POST 请求。在服务器上验证它并将其保存到数据库中。

如果您还希望页面反映由于服务器对数据库的行为而发生的任何事情，您的 Flask 端点需要返回 JSON 响应。由于您已经生成了页面上的 HTML 和 JS，因此需要将 JS 中的函数绑定为事件侦听器，以便它寻找 JSON 响应，然后解析 JSON 并执行您在函数中放置的任何代码。

JQuery 的 ajax 功能为您完成了这一切。[这是一个 jQuery AJAX POST 的示例](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)。示例使用 PHP 没关系；您通常在 Flask 视图中解析 POST 并返回 jsonify(data)。[请参阅 Flask.jsonify 上的文档](http://flask.pocoo.org/docs/api/#flask.jsonify)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T21:15:53.740

您必须使用 AJAX。在服务器端，您只需要一个以 JSON 形式返回数据的 URL。在客户端，我建议您使用 jQuery 处理 AJAX 请求。只需使用 jQuery 从服务器请求数据并将数据渲染到 DOM 中。

# html - 与 VBScript 不同，HTML 文件输入表单显示所选文件的完整路径

> ID：14922662
> 
> 赞同：0
> 
> 时间：2013-02-17T15:25:32.360
> 
> 标签：html, vbscript

首先抱歉标题不好，如果有人可以更好地命名这个问题，请做。

我有这个 HTML 文件：

```
<html>
  <form action='' method='post'>
    <input id='inbox' type='file' />
    <input id='outbox' type='button' onclick='alert(inbox.value);' 
      value='submit' />
  </form>
</html> 
```

当我用 IE 打开它，然后浏览文件并单击“提交”按钮时，我会收到所选文件的完整路径的警报。但是，如果我尝试使用 VBScript 编写相同的脚本：

```
Set IE = CreateObject("InternetExplorer.Application")
IE.Offline = True
IE.Navigate "about:blank"

Do
Loop While IE.Busy

html = "<html>" &_
       "  <form action='' method='post'>" &_
       "    <input id='inbox' type='file' />" &_
       "    <input id='outbox' type='button' onclick='alert(inbox.value);'" &_
       "      value='submit' />" &_
       "  </form>" &_
       "</html>"

IE.Document.write html
IE.Width = 0
IE.Height = 0
IE.Document.All("inbox").Click
IE.Document.All("outbox").Click 
```

我收到了臭名昭著的`c:\fakepath\file.ext`消息。

有谁知道为什么会这样甚至更好地克服它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:43:17.363

After reading your last comment - "I want file open dialog that will return full path and would work on XP and 7", and as I see you want to call this dialog in WSH environment, then you can use CommonDialog Control. This control is disabled in Windows 8, but works fine up to Windows 7, as you intend. Need to note that on 64-bit Windows by default .VBS files executed as 64-bit process, but that control is 32-bit, for that reason I include in my example code and function that restart the script as 32-bit process.

```
Call Force32bit

With CreateObject("MSComDlg.CommonDialog")
    .Filter = "Text files (*.txt)|*.txt|All files (*.*)|*.*"
    .InitDir = CreateObject("WScript.Shell").SpecialFolders("MyDocuments")
    .MaxFileSize = 256
    .Flags = &H80000 + &H4 + &H8
    .ShowOpen
    If Len(.FileName) Then
        WScript.Echo .FileName
    Else
        WScript.Echo "Canceled"
    End If
End With

Sub Force32bit()
    Dim sWinDir, sSys64, sSys32, oShell
    Set oShell = CreateObject("WScript.Shell")
    sWinDir = oShell.ExpandEnvironmentStrings("%WinDir%")
    With CreateObject("Scripting.FileSystemObject")
        sSys64 = .BuildPath(sWinDir, "SysWOW64")
        If Not .FolderExists(sSys64) Then Exit Sub
        sSys32 = .BuildPath(sWinDir, "System32")
        If sSys32 = WScript.Path Then
            oShell.CurrentDirectory = sSys64
            oShell.Run "wscript.exe " & Chr(34) & _
            WScript.ScriptFullName & Chr(34), 1, False
            WScript.Quit
        End If
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T18:19:44.150

这是 IE 中的安全设置，您可以通过将 html 启动为像这样的 hta 来规避它

```
Set wShell=CreateObject("WScript.Shell")
Set oExec=wShell.Exec("mshta.exe ""about:<input type=file id=FILE><script>FILE.click();new ActiveXObject('Scripting.FileSystemObject').GetStandardStream(1).WriteLine(FILE.value);close();resizeTo(0,0);</script>""")
MsgBox oExec.StdOut.ReadAll 
```

# objective-c - 在 WebView 中覆盖 NSScrollView

> ID：14922671
> 
> 赞同：3
> 
> 时间：2013-02-17T15:26:09.170
> 
> 标签：objective-c, macos, cocoa

我在 OSX 中制作了一个带有 Pull to Refresh 功能的自定义 NSScrollView。我想在 WebView 中实现它。是否可以为（WebKit）WebView 设置自定义滚动视图类？

# android - 添加“mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();”时应用程序不断崩溃

> ID：14922678
> 
> 赞同：3
> 
> 时间：2013-02-17T15:26:38.950
> 
> 标签：android, google-maps-android-api-2

我正在尝试学习如何使用 Google API V2 开发谷歌地图 Android 应用程序。当我没有添加

```
private GoogleMap mMap = null;
mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap(); 
```

在**MyGoogleMapDemo.java** 但是当我添加它们时，应用程序不断崩溃。我正在使用

*   谷歌 API 4.2
*   安卓 SDK 工具 21.1
*   Android SDK平台-工具16.0.1
*   Eclipse SDK 3.7.1

而且我还将 android-support-v4.jar 添加到我的项目中。我期待着

**MyGoogleMapDemo.java**

```
package org.lxh.demo;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.MapFragment;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
public class MyGoogleMapDemo extends FragmentActivity 
{

private GoogleMap mMap = null;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mMap = ((MapFragment) getFragmentManager().findFragmentById(R.id.map)).getMap();

} 
```

**主要的.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"

    map:cameraBearing="112.5"
    map:cameraTargetLat="-33.796923"
    map:cameraTargetLng="150.922433"
    map:cameraTilt="30"
    map:cameraZoom="13"
    map:mapType="normal"
    map:uiCompass="true"
    map:uiRotateGestures="true"
    map:uiScrollGestures="true"
    map:uiTiltGestures="true"
    map:uiZoomControls="false"
    map:uiZoomGestures="true" /> 
```

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.lxh.demo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <permission
        android:name="org.lxh.demo.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="org.lxh.demo.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/icon"
        android:label="@string/app_name" >
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyCHCxLLeMk3zRL4TYICdbYjB6nQk-oCvRs" />

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".MyGoogleMapDemo"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**日志.txt**

```
02-17 22:56:51.954: D/ActivityThread(11229): setTargetHeapUtilization:0.25
    02-17 22:56:51.954: D/ActivityThread(11229): setTargetHeapIdealFree:8388608
    02-17 22:56:51.954: D/ActivityThread(11229): setTargetHeapConcurrentStart:2097152
    02-17 22:56:52.585: W/dalvikvm(11229): threadid=1: thread exiting with uncaught exception (group=0x4106d498)
    02-17 22:56:52.585: E/AndroidRuntime(11229): FATAL EXCEPTION: main
    02-17 22:56:52.585: E/AndroidRuntime(11229): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.lxh.demo/org.lxh.demo.MyGoogleMapDemo}: java.lang.NullPointerException
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2080)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2105)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.ActivityThread.access$600(ActivityThread.java:136)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.os.Handler.dispatchMessage(Handler.java:99)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.os.Looper.loop(Looper.java:137)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.ActivityThread.main(ActivityThread.java:4797)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at java.lang.reflect.Method.invokeNative(Native Method)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at java.lang.reflect.Method.invoke(Method.java:511)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at dalvik.system.NativeStart.main(Native Method)
    02-17 22:56:52.585: E/AndroidRuntime(11229): Caused by: java.lang.NullPointerException
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at org.lxh.demo.MyGoogleMapDemo.onCreate(MyGoogleMapDemo.java:24)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.Activity.performCreate(Activity.java:5024)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2044)
    02-17 22:56:52.585: E/AndroidRuntime(11229):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:30:33.660

您的 LogCat 中可能还有其他与您的问题相关的消息。我的猜测是你的问题是你有一个格式错误的`<fragment>`元素。你有：

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment"
    ... /> 
```

你不应该同时拥有*and* `android:name` *，* `class`它们当然也不应该指向不同的类。`android:name`是首选方法。由于您继承自`FragmentActivity`，我的猜测是您确实想`android:name`指向`SupportMapFragment`，因此进行更改并删除该`class`属性。您可能还希望在开始时摆脱`xmlns:map`所有`map:`属性，直到您的其余代码正常工作。

# c# - 来自内部的公共接口？

> ID：14922685
> 
> 赞同：2
> 
> 时间：2013-02-17T15:27:12.990
> 
> 标签：c#, inheritance, interface, public, internal

一个程序集向外界公开了几个接口（`IFirst`, `ISecond`, ），即这些接口是.`IThird``public`

现在，作为实现细节，所有这些对象都有一个共同的特征，由接口描述`IBase`。我不想`IBase`公开，因为这可能会在未来的实现中发生变化，并且与我的程序集的用户完全无关。

显然，公共接口不能从内部接口派生（给我一个编译器错误）。

有什么方法可以表达`IFirst`, `ISecond`, 并且`IThird`仅从内部的角度来看有一些共同点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:29:17.263

不在 C# 中

您能做的最好的事情就是让您的*类*同时实现内部和公共接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:12:40.183

正如安德鲁上面所说。只是为了扩展，这里有一个代码示例：

```
public interface IFirst
{
    string FirstMethod();
}

public interface ISecond
{
    string SecondMethod();
}

internal interface IBase
{
    string BaseMethod();
}

public class First: IFirst, IBase
{
    public static IFirst Create()  // Don't really need a factory method;
    {                              // this is just as an example.
        return new First();
    }

    private First()  // Don't really need to make this private,
    {                // I'm just doing this as an example.
    }

    public string FirstMethod()
    {
        return "FirstMethod";
    }

    public string BaseMethod()
    {
        return "BaseMethod";
    }
}

public class Second: ISecond, IBase
{
    public static ISecond Create()  // Don't really need a factory method;
    {                               // this is just as an example.
        return new Second();
    }

    private Second()  // Don't really need to make this private,
    {                 // I'm just doing this as an example.
    }

    public string SecondMethod()
    {
        return "SecondMethod";
    }

    public string BaseMethod()
    {
        return "BaseMethod";
    }
} 
```

# php - fwrite完成时php继续功能

> ID：14922686
> 
> 赞同：0
> 
> 时间：2013-02-17T15:27:14.063
> 
> 标签：php, fwrite

我需要加入两个 csv 文件，然后读取整个合并文件。
问题是 php 在`fwrite`工作时一直在执行函数。
所以当`fwrite`开始时需要暂停/停止。

```
static function dictionary($path) {
    $language_pack = Doo::conf()->SITE_PATH . Doo::conf()->PROTECTED_FOLDER . 'languages/' . $lang . '/language_pack.csv';
    Doo::joinFiles(array($lang_path, $common_lang_path), $language_pack);
// a pause must be done here until Doo::joinFiles finish it's job
    return Doo::translator('Csv', $language_pack, array('delimiter' => '|','enclosure' => '"'));
}

// this function joins array of files and will merge them into single file
static function joinFiles(array $files, $result) {
    if(!is_array($files)) {
        throw new Exception('`$files` must be an array');
    }

    $wH = fopen($result, "w+");

    foreach($files as $key => $file) {
        $fh = fopen($file, "r");
        while(!feof($fh)) {
            fwrite($wH, fgets($fh));
        }
        fclose($fh);
        unset($fh);
        fwrite($wH, "\n"); //usually last line doesn't have a newline
    }
    fclose($wH);
    unset($wH);
} 
```

当我运行时`Doo::dictionary()`，language_pack.csv 文件仅包含第一个 csv 文件内容。

# excel - 将单个单元格添加到excel中的范围

> ID：14922688
> 
> 赞同：2
> 
> 时间：2013-02-17T15:27:23.090
> 
> 标签：excel, excel-formula

我正在尝试在 excel 中运行一个公式，该公式接收一系列单元格并对它们执行操作。问题是，我想传递一个单元格范围，以及另一个不在该范围内的单元格。

你知道这样做的方法吗？

在您提出建议之前，我要说的是，不幸的是，该公式不像 SUM 那样工作，这意味着它没有无穷无尽的字段来输入单独的值。它有一个字段用于一系列值（我想要一个范围和另一个单独的单元格），在逗号之后，应该出现另一个不同的值（意思是，我可以给它范围，逗号，另一个价值）。

多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T02:06:25.530

你说的可以用VBA来实现。

比如切换到Visual Basic编辑器（Alt+F11），新建一个Module（Insert，Module），输入以下代码并保存。

```
Public Function SumPow(param1 As Range, param2 As Double) As Double
    For Each c In param1
        SumPow = SumPow + c.Value
    Next c
    SumPow = SumPow ^ param2
End Function 
```

现在回到你的 Excel 表，你可以使用公式*=SumPow(Range, Cell)*。

它将输出范围内所有值的总和，提升到单个单元格中值的幂。

# jsf-2 - 在 JSF 2.0 复合中指定操作

> ID：14922689
> 
> 赞同：1
> 
> 时间：2013-02-17T15:27:32.740
> 
> 标签：jsf-2, composite-component

我想创建一个输出`<button>`标签的复合组件。此标签将包装其他内容。我知道一种选择是编写我自己的组件和渲染器。但是，我更愿意将其作为复合材料来完成。我能预见的唯一问题是在我的`<button>`标签被点击时指定一个动作。

有谁知道是否可以在自定义组合上指定操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:36:28.333

在定义复合组件时，您可以指定您的组件是动作源：

```
<cc:interface>
  <!-- ... -->
  <cc:actionSource name="myButton" targets="myButton"/>
  <!-- ... -->
</cc:interface>

<cc:implementation>
  <!-- ... -->
  <h:commandButton id="myButton" value="My Button"/>
  <!-- ... -->
</cc:implementation> 
```

有了这个，你就创建了你的复合组件动作源，你可以在你的组件中定义动作监听器：

```
<my:customComponent id="component">
  <f:actionListener for="myButton" binding="#{myBean.action}"/>
</my:customComponent> 
```

# java - 在 JTabbedPane 中聚焦 JTextArea

> ID：14922691
> 
> 赞同：4
> 
> 时间：2013-02-17T15:27:49.073
> 
> 标签：java, swing, focus, jtabbedpane, changelistener

我正在用 Java 编写一个聊天客户端，我希望有一个 JDialog 用于所有打开的聊天。所以我决定使用 JTabbedPane，其中一个选项卡代表一个聊天。

我在每个选项卡中都放了一个 JPanel，它只包含一个用于消息历史记录的 JTextPane 和一个用户输入消息的 JTextArea。

为了更好的可用性，我实现了一个功能，当

1.  一个新的 ChatTab 被打开
2.  用户在 ChatTab 之间切换（JTabbedPane 的 ChangeListener 触发）

我有一个类**ChatWindow**，它扩展了 JDialog 并显示了 JTabbedPane。这是我实现 ChangeListener 的地方。

```
private JTabbedPane chatTabPane;
private List<ChatTab> chatTabs;

public ChatWindow() {
    chatTabs = new ArrayList<ChatTab>();

    JPanel chatWindowPanel = new JPanel(new BorderLayout());

    chatTabPane = new JTabbedPane(JTabbedPane.TOP);
    chatWindowPanel.add(chatTabPane);

    this.add(chatWindowPanel, BorderLayout.CENTER);

    chatTabPane.addChangeListener(new ChangeListener() {

        @Override
        public void stateChanged(ChangeEvent arg0) {
            focusInputField();
        }
    });
}

public ChatTab addChatTab(Contact contact) {
    ChatTab newChatTab = new ChatTab();
    chatTabs.add(newChatTab);
    chatTabPane.addTab(contact.toString(), null, newChatTab.getPanel());
    return newChatTab;
}

public void focusInputField() {
    for (ChatTab chatTab : chatTabs) {
        if(chatTab.getPanel() == chatTabPane.getSelectedComponent()) {
            chatTab.focusInputField();
        }
    }
}

public JTabbedPane getChatTabs() {
    return chatTabPane;
}
} 
```

ChatTab类中的**focusInputField** *()*方法如下所示：

 **```
public void focusInputField() {
    inputField.requestFocusInWindow();
    inputField.requestFocus();
} 
```

好的，这是更改选项卡时的焦点。除此之外，我还实现了在创建新的聊天选项卡时 JTextArea 的焦点。这是在**ChatWindowController**类中处理的。**当我向ChatWindow**类添加新选项卡时，我调用了一个方法*setChatVisible() ：*

 **```
public void setChatVisible() {
    if(!chatWindow.isVisible()) {
        chatWindow.setVisible(true);

        chatWindow.focusInputField();
    }
} 
```

所以这是我的问题：当我打开一个新的聊天选项卡时，焦点有效。在大多数情况下，当用户更改选项卡时它也可以工作，但是当我打开多个新的聊天选项卡并第一次在选项卡之间切换时它不会集中。我切换到的选项卡的 JTextArea 没有焦点。但是，当我再次切换时，它一直有效。

有谁知道是什么问题？我真的没主意了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:27:21.440

不正确的同步可能会导致间歇性故障。应该批判性地检查几件事：

*   验证您是否在[事件分派线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)(EDT) 上构造了所有 GUI 元素。

*   由于您肯定在使用多个线程，因此请验证所有更新都发生在 EDT 上，[例如](https://stackoverflow.com/a/3245805/230513).

*   您可以使用在 EDT 上对事件进行排序，如此[处](https://stackoverflow.com/a/14894894/230513)`invokeLater()`所示。

*   更喜欢[`requestFocusInWindow()`](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)，`requestFocus()`但不要同时使用两者。****

# sharepoint-2007 - 是否可以将多个记分卡连接到 PP 2007 中的单个分析图表？

> ID：14922693
> 
> 赞同：0
> 
> 时间：2013-02-17T15:27:56.810
> 
> 标签：sharepoint-2007, business-intelligence, performancepoint

我知道如何将记分卡连接到 PerformancePoint 中的图表，但我不确定是否可以通过任何方式连接多个记分卡？

要将记分卡连接到图表，我只需将它们放在同一页面中，然后将记分卡属性拖放到图表中即可。然后，当然我需要使用 MDX 配置连接。

当我尝试从第二张记分卡拖放到同一个图表时，它不允许我这样做。我想知道为什么以及是否有解决方法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T13:46:54.403

我认为不可能将多个记分卡链接到同一个图表。所以，我最终为每个记分卡创建了多个图表。最初可以隐藏图表并根据某些条件显示它们。您可以使用记分卡上的 DisplayCondition 属性来实现这一点。

# c# - 这里提供所需信息量的最简单的数据结构是什么？

> ID：14922695
> 
> 赞同：3
> 
> 时间：2013-02-17T15:28:11.163
> 
> 标签：c#, datetime, data-structures, calendar, scheduling

您将如何**构建一个数据结构**- 表示为下面的 Schedule 类 - 这将为您提供足够的信息，以便为您的 ExtensionMethod 提供简单且足够的信息，以便它可以设置 testResult_# 变量。

**请注意**：我不是在问如何实现 GetScheduleById(string) 方法，而是要求通过向该方法提供所有需要的信息来尽可能简单地定义 Schedule 数据结构。

```
var datetimeUnderTest = DateTime.Now;
Schedule workingDaysSchedule = ScheduleRepository.GetScheduleById("dubaiWorkingDays");
Schedule workingHoursSchedule = ScheduleRepository.GetScheduleById("usaWorkingHours");
Schedule winterSchedule = ScheduleRepository.GetScheduleById("brasilWinter");
Schedule nightsInWeekendSchedule = ScheduleRepository.GetScheduleById("NightsInWeekends");
Schedule nightsInWeekDaysSchedule = ScheduleRepository.GetScheduleById("NightsInWeekDays");

// IsInSchedule is an Extension method on DateTime
bool testResult_0 = datetimeUnderTest.IsInSchedule(workingDaysSchedule ); 
bool testResult_1= datetimeUnderTest.IsInSchedule(workingHoursSchedule ); 
bool testResult_2 = datetimeUnderTest.IsInSchedule(winterSchedule); 
bool testResult_3 = datetimeUnderTest.IsInSchedule(nightsInWeekendSchedule ); 
bool testResult_4 = datetimeUnderTest.IsInSchedule(nightsInWeekDaysSchedule ); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:18:31.970

在我看来， a`Schedule`只是日期/时间范围的列表。或者，可能在 7 个工作日的每一天中都有一组时间范围。例如，a`workingDaysSchedule`可能每天（周一到周五）包含一个条目。该条目将是从 00:00 到 23:59:59。

`nightsInWeekendSchedule`将有周五和周六的条目，无论夜间时间是什么。

对其进行建模的最简单方法（不一定是最有效的）如下所示：

```
class TimeRange
{
    public DateTime StartTime { get; set; }
    public DateTime EndTime { get; set; }
}

class Schedule
{
    private List<List<TimeRange>> Days = new List<List<TimeRange>>
    {
        new List<TimeRange>(), // Sunday
        new List<TimeRange>(), // Monday
        // etc.
    };
    public Add(DayOfWeek day, DateTime startTime, DateTime endTime);
    public Contains(DateTime test);
} 
```

给定一个`DateTime`值，您可以找到星期几 ( [DateTime.DayOfWeek](http://msdn.microsoft.com/en-us/library/system.datetime.dayofweek.aspx) )，然后对当天的范围列表进行线性搜索。

您必须考虑一些并发症。例如，周五晚上 11:00 到早上 7:00 的班次实际上有两个范围：周五晚上 11:00 到午夜，然后是周六上午 12:01 到早上 7:00。您添加范围的代码必须拆分范围并添加到周五和周六的时间表。

或者，您可以避免该`Add`方法的复杂性，而只需使用集合初始值设定项语法对范围进行编码。

# macos - 在applescript中读取文本文件

> ID：14922697
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:28:26.140
> 
> 标签：macos, text, applescript

我已经研究了几天......我正在尝试使用applescript来读取文本文件并检查它是否说一个特定的单词。我发现的所有文章都没有解释什么是做什么的，所以令人困惑......有什么帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:34:45.773

# php - php5 使用 XML 文件中的 SimpleXML 在重复键上插入更新 mysql

> ID：14922699
> 
> 赞同：0
> 
> 时间：2013-02-17T15:28:30.213
> 
> 标签：php, mysql, xml, xml-parsing, simplexml

我试图弄清楚如何构建我的脚本并需要一些帮助。

我正在使用 PHP 5 和 MySQL 5.1.67

我的目标是能够从数据库中提取某些字段，用 PHP 重新格式化它们并将它们显示为列表。重新格式化将包括 HTML 序列。我的目标是有一个自动化的 CRON 脚本，它将自动更新网页。

我对这些语言的经验很少。所以任何帮助都会很好。

我的逻辑是我应该将所有内容加载到一个（mysql）表中。我的 XML 使用 latin1 字符集。类别、id、标题和描述是表中的每一列。

这是mysql的结构：

类别 mysql 使用 VARCHAR Latin1
站点刚刚用于分组
id mysql 使用 VARCHAR Latin1
标题 mysql 使用 VARCHAR Latin1
描述 mysql 使用 VARCHAR Latin1

XML结构如下：

```
// XML Structure
// 23 categories to loop through
// hunderds of sites to loop through per category
//
<catalog>
<category>
<name>Category_Name</name>
<site>
<id>UR545665U</id>
<pagerank>1</pagerank>
<title>Title_Name</title>
<description>Description_of_the_site</description>
</site>
</category>
</catalog>
//
// 
```

我已经到了使用下面的代码加载我的 XML 和 DB 的地步。

```
//mysql connection
$con2 = mysql_connect("www.hosting.com","db_username","db_password");
if (!$con2) {
    die('Could not connect: ' . mysql_error());
}

$dbcon1 = mysql_select_db("database_name", $con2);
if (!$dbcon1) {
    die ('Can\'t use database_name : ' . mysql_error());
}

//simplexml load xml file with simplexml
$library=  simplexml_load_file('feed.xml');
    if ($xml === false) {
        echo "Failed loading XML\n";
        foreach(libxml_get_errors() as $error) {
            echo "\t", $error->message;
        }
    } 
```

那么这就是我遇到麻烦的地方......我需要遍历类别并在其中遍历站点。我遇到的麻烦是我不能使用 getName() 函数，因为`<category>`并且`<site>`没有在 xml 中命名。所以我用`<name>`它来识别类别，因为它是唯一的，并且`<id>`识别站点也是唯一的。

所以我在这里的逻辑是在其内部有一个 foreach() 函数。遍历类别并遍历其类别中的每个站点。

```
//begin loop each category and each site
foreach($library->xpath('/Catalog/Category/Name') as $category) {
    foreach($library->xpath('/Catalog/Category/Name/Site/Id') as $id) {
        $site = $library->xpath('//Site');
        $title = $site->Title;
        $description = $site->Description; 
```

从这一点来看，是用 mysql 5 正确的转义序列来正确格式化 sql 进程以避免黑客攻击。

我正在考虑这样做的方式如下：

```
// Format Query String into a variable
// Note: VALUES are in "" because they may contain strings
// sprintf() will run on each loop to format the new <site> string

        $mynewquery = sprintf('REPLACE INTO Table_Name (id, title, description, category) VALUES (\"%4$s\",\"%6$s\",\"%7$s\",\"%3$s\")');
        if ($mynewquery === false) {
            echo "Failed formatting query string\n";
            foreach(libxml_get_errors() as $error) {
                echo "\t", $error->message;
            }
        }   

//Run Query String to load data into DB

        mysql_query($mynewquery);
        if (!$mynewquery) {
            die ('Error running Query: ' . mysql_error());
        }
//
// close the loops and database connection after this. 
```

我使用了 echo 语句（未显示）来获取有关该过程的反馈。它一直通过加载 XML 没有错误。我的猜测是我在循环过程中遇到了语法问题。所以我有几个问题：

*   我的逻辑正确吗？
*   如果 XML 在其中引用了 DTD，是否需要在脚本中放置任何特殊编码？
*   我是否使用适当的变量和函数来实现我的意图？

关于如何使这项工作的任何建议？我试过了，但数据库不加载数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:33:20.080

您正在循环遍历 xml 元素，但根本没有引用循环变量。你需要更多这样的东西：

```
foreach($library->Category as $category) {
    foreach($category->Site as $site) {
        $id = $site->Id;
        $title = $site->Title;
        $description = $site->Description;

        //- insert into db here
    }
} 
```

# android - windows app和android app之间的通讯

> ID：14922700
> 
> 赞同：0
> 
> 时间：2013-02-17T15:28:34.693
> 
> 标签：android, windows, socket.io

如果这是一个非常笼统的问题，我很抱歉，但我不知道从哪里开始，所以我正在寻找想法。

我有一个 Windows 应用程序（乐谱编辑），我目前正在将它移植到进展顺利的 Andriod。

我想添加的功能比在 windows 应用程序中创建的文档可以发送到用户的 android 平板电脑。我想知道，假设两者都在同一个本地网络上，我将如何在 Android 上编写某种侦听器，Windows 端可以打开一个套接字或其他东西并向其发送数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:25:29.517

我写了一个小东西，这样我的 Windows 应用程序就可以找到在本地网络上运行的我的 android 应用程序的一个实例，就在这里。这是首先的android代码

```
import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Arrays;

import android.os.AsyncTask;
import android.util.Log;

public class TabSyncServer extends AsyncTask<Void, Void, Void> {

    ServerSocket mServerSocket = null;
    Socket mSocket = null;
    DataInputStream mDataInputStream = null;
    DataOutputStream mDataOutputStream = null;

    @Override
    protected void onPreExecute() {

        try {
            mServerSocket = new ServerSocket(2112);
            //System.out.println("Listening :2112");
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    @Override
    protected Void doInBackground(Void... args) {
        byte[] bytebuf = new byte[1024];
        while (true) {
            try {

                mSocket = mServerSocket.accept();
                mDataInputStream = new DataInputStream(mSocket.getInputStream());
                mDataOutputStream = new DataOutputStream(mSocket.getOutputStream());
                Log.d("TabSyncServer", "ip: " + mSocket.getInetAddress());
                mDataInputStream.read(bytebuf);

                String str = new String(bytebuf, "UTF8");
                Log.d("TabSyncServer", "message: " + str);
                if(str.contains("Hello Android")) {
                    Log.d("TabSyncServer", "sending reply");
                    mDataOutputStream.writeBytes("Hello Windows");
                }

                // 

            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally {
                if (mSocket != null) {
                    try {
                        mSocket.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                if (mDataInputStream != null) {
                    try {
                        mDataInputStream.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

                if (mDataOutputStream != null) {
                    try {
                        mDataOutputStream.close();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        }

    }

} 
```

和 windows MFC 代码

```
 void CMainFrame::OnBrowseMobile() {

    CMobileSync* con = new CMobileSync();
    CString ipaddr_base;
    int my_last_digit;
    if(!con->getMyIP(ipaddr_base, my_last_digit)) {
        setMobilePath("Can't find local network");
        return;
    }

    for(int i=1 ; i<98 ; i++) {
        if(i==my_last_digit)
            continue;       // don;t check self

        CString ipaddr; ipaddr.Format("%s.%d", ipaddr_base, i);
        bool res = con->ConnectToHost(ipaddr);
        if(res) {
            res = con->SendMsg ("Hello Android");

            if(res) {
                TRACE1("send ok %s\n",ipaddr.GetBuffer());
#define RD_BUF_LEN 80
                char buffer[RD_BUF_LEN];
                if(con->ListenOnPortBlocking(buffer, RD_BUF_LEN)) {
                    if(strncmp(buffer, "Hello Windows", 12)==0) {
                        TRACE1("reply ok %s", buffer);
                        setMobilePath(ipaddr);
                        con->CloseConnection ();
                        return;
                    }
                }
            } else {
                TRACE("send FAILED\n");
            }
        }
        con->CloseConnection ();
    }
    setMobilePath("No TabTrax on local network");
}

#include "stdafx.h"
#include <winsock.h>
#include "MobileSync.h"

#define TTPORT 2112
bool CMobileSync::getMyIP(CString& ipaddr_front, int& ipaddr_lastdigit)
{
    char szBuffer[1024];

    #ifdef WIN32
    WSADATA wsaData;
    WORD wVersionRequested = MAKEWORD(2, 0);
    if(::WSAStartup(wVersionRequested, &wsaData) != 0)
        return false;
    #endif

    if(gethostname(szBuffer, sizeof(szBuffer)) == SOCKET_ERROR)
    {
      #ifdef WIN32
      WSACleanup();
      #endif
      return false;
    }

    struct hostent *host = gethostbyname(szBuffer);
    if(host == NULL)
    {
      #ifdef WIN32
      WSACleanup();
      #endif
      return false;
    }

    //Obtain the computer's IP
    unsigned char b1, b2, b3, b4;
    b1 = ((struct in_addr *)(host->h_addr))->S_un.S_un_b.s_b1;
    b2 = ((struct in_addr *)(host->h_addr))->S_un.S_un_b.s_b2;
    b3 = ((struct in_addr *)(host->h_addr))->S_un.S_un_b.s_b3;
    b4 = ((struct in_addr *)(host->h_addr))->S_un.S_un_b.s_b4;

    ipaddr_front.Format("%d.%d.%d", b1, b2, b3);
    ipaddr_lastdigit = b4;
    #ifdef WIN32
    WSACleanup();
    #endif
    return true;
}

//CONNECTTOHOST – Connects to a remote host
bool CMobileSync::ConnectToHost(const char* IPAddress)
{
    //Start up Winsock…
    WSADATA wsadata;

    int error = WSAStartup(0x0202, &wsadata);

    //Did something happen?
    if (error)
        return false;

    //Did we get the right Winsock version?
    if (wsadata.wVersion != 0x0202)
    {
        WSACleanup(); //Clean up Winsock
        return false;
    }

    //Fill out the information needed to initialize a socket…
    SOCKADDR_IN target; //Socket address information

    target.sin_family = AF_INET; // address family Internet
    target.sin_port = htons (TTPORT); //Port to connect on
    target.sin_addr.s_addr = inet_addr (IPAddress); //Target IP

    mSocket = socket (AF_INET, SOCK_STREAM, IPPROTO_TCP); //Create socket
    if (mSocket == INVALID_SOCKET)
    {
        return false; //Couldn't create the socket
    }  

    //Try connecting...

    if (connect(mSocket, (SOCKADDR *)&target, sizeof(target)) == SOCKET_ERROR)
    {
        return false; //Couldn't connect
    }

    return true; //Success
}

//CLOSECONNECTION – shuts down the socket and closes any connection on it
void CMobileSync::CloseConnection ()
{
    //Close the socket if it exists
    if (mSocket)
        closesocket(mSocket);
    mSocket=0;

    WSACleanup(); //Clean up Winsock
}

int CMobileSync::SendMsg (char* szpText, int buflen)
{
    if(buflen==0)
        buflen = strlen(szpText);
    int ret = send(mSocket, szpText, buflen, 0);
    TRACE1("CMobileSync::SendMsg sent %d bytes\n", ret);
    return ret;
}

WSADATA w;

//LISTENONPORT – Listens on a specified port for incoming connections 
//or data
bool CMobileSync::ListenOnPortBlocking(char* buffer, int buflen)
{
    //Now we can start listening (allowing as many connections as possible to  
    //be made at the same time using SOMAXCONN). You could specify any 
    //integer value equal to or lesser than SOMAXCONN instead for custom 
    //purposes). The function will not //return until a connection request is 
    //made
    // listen(s, SOMAXCONN);

    memset(buffer, 0, sizeof(buffer)); //Clear the buffer

    int iTimeout = 1600;
    setsockopt( mSocket,  SOL_SOCKET, SO_RCVTIMEO, (const char *)&iTimeout, sizeof(iTimeout));

    //Put the incoming text into our buffer
    int ret = recv (mSocket, buffer, buflen-1, 0); 

    //Don't forget to clean up with CloseConnection()!

    if(ret != SOCKET_ERROR)
        return true;

    int err = WSAGetLastError();
    return false;
} 
```

它没有经过广泛测试，但它正在运行

这可能对某人有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:32:49.927

我认为直接通过本地网络发送文件不是最好的方法。您很容易受到许多用户抱怨共享无法正常工作。这主要是由于他们自己的网络配置问题。

为什么不使用 DropBox 之类的服务来实现文件共享呢？

像 DropBox 这样的服务提供了简单的 API，可以在应用程序中使用，以便将文件保存到远程文件夹中，并从远程文件夹中读取文件。

这样，用户根本不必在同一个网络中。实现文件共享的大部分繁重工作将由专注于此的服务完成。

**添加：**

如果您不想为 DropBox 之类的单独服务要求帐户，请考虑以下方法：在您自己的 Web 服务器上实现一个非常简单的类似 DropBox 的服务。制作一个简单的脚本，允许用户通过 HTTP 匿名上传文件到您的服务器。上传后，他们将收到此文件的 5 位数 ID，或者他们可以共享的其他链接。从第二个应用程序使用此 ID 或链接时，可以下载文件（再次通过 HTTP）。如果您在几个小时后自动从服务器中删除文件，您将不会用完空间。

你可以用大约 20 行 PHP 代码来实现这样的服务。而且所需的应用程序代码非常简单（因为它只依赖于 HTTP）。如果您担心网络服务器的成本，您可以从每月 5 美元左右购买一台，甚至可以使用 Google App Engine 之类的免费服务（如果您的带宽和空间要求较低，则免费）。

文件上传的代码[示例](http://reecon.wordpress.com/2010/04/25/uploading-files-to-http-server-using-post-android-sdk/)。下载应该足够简单，可以单独完成。关于定期文件删除 - 显而易见的方法是[cron](http://en.wikipedia.org/wiki/Cron)但我认为没有它很容易管理。每当您接受新的上传（在 PHP 脚本中）时，请检查所有下载并删除旧的。

# actionscript-3 - Flash Player 10.0 r2 已停止工作

> ID：14922702
> 
> 赞同：0
> 
> 时间：2013-02-17T15:28:45.237
> 
> 标签：actionscript-3, flash

我开发了我最复杂的 Flash ActionScript 应用程序。我不知道他们能变得多么复杂，但我认为我的很普通。它有大约 1500 个对象，只有在单击时才会进行缩放和颜色变化，并连接到数据库以获取数据，例如，对象的名称在数据库中。我已经硬编码了读取数据库的 Web 应用程序的路径。Flash 应用程序从 Web 应用程序（Visual Studio/服务器）读取数据库。

它适用于我的开发环境（Flash CS4 > F12），具有我所需的探索，即 IE 和 FF。

但是，当我尝试运行与项目位于同一文件夹中的已发布版本 (.swf) 时，我只是收到错误屏幕“Adobe Flash Player 10.0 r2 已停止工作”，而没有其他任何反应。我有点害怕如果没有客户端计算机中的整个代码，我可能无法为我的客户端发布它......我需要做些什么才能让它在没有安装 Adob​​e Flash 的服务器环境中工作，即，只是.swf 文件和数据库的服务器设置？

另请注意，当我启动项目时，当我运行一个小文件但随着它变大时，这有效，甚至调试模式也停止工作......

我在我的电脑上运行 Win 7 64 位、Flash CS4 和 Visual Studio 2010。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:55:57.843

听起来像是您安装的 Adob​​e Flash Player 网络浏览器插件的问题，而不是您的应用程序或 swf 的问题。尝试[升级插件](http://get.adobe.com/flashplayer/)。

10.0现在是一个相当老的版本，当前版本是11.6。此外，它是“.0”版本，已知 10.0 存在问题。您的 swf 在较旧的 Flash Player（包括 10.0）中工作可能很重要，也可能不重要，但总的来说，今天安装 10.0 的用户并不多（[http://www.statowl.com/flash.php](http://www.statowl.com/flash.php)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:54:56.443

曾几何时，我也遇到过这个问题，我通过使用Vector类或无效接口找到了一些根本原因。

# python-3.x - 在生产服务器上安装 pyramid_jinja2 时出错

> ID：14922709
> 
> 赞同：1
> 
> 时间：2013-02-17T15:29:26.300
> 
> 标签：python-3.x, pyramid

在生产服务器上使用 pip/install pyramid_mongodb 没有问题。然而，当涉及到 pyramid_jinja2 时，这个问题不断出现，让我抓狂。我使用过 pip/install 和 easy_install，但两者似乎都不起作用。

我正在使用python3.3

我应该如何解决这个问题？

```
root@vre [/home/vrnet/public_html/env]# sudo -u vrnet ./bin/pip install pyramid_jinja2

Downloading/unpacking pyramid-jinja2
  Running setup.py egg_info for package pyramid-jinja2
    Traceback (most recent call last):
      File "<string>", line 16, in <module>
      File "/home/vrnet/public_html/env/build/pyramid-jinja2/setup.py", line 21, in <module>
        CHANGES = open(os.path.join(here, 'CHANGES.txt')).read()
      File "/home/vrnet/public_html/env/lib64/python3.3/encodings/ascii.py", line 26, in decode
        return codecs.ascii_decode(input, self.errors)[0]
    UnicodeDecodeError: 'ascii' codec can't decode byte 0xc5 in position 131: ordinal not in range(128)
    Complete output from command python setup.py egg_info:
    Traceback (most recent call last):

  File "<string>", line 16, in <module>

  File "/home/vrnet/public_html/env/build/pyramid-jinja2/setup.py", line 21, in <module>

    CHANGES = open(os.path.join(here, 'CHANGES.txt')).read()

  File "/home/vrnet/public_html/env/lib64/python3.3/encodings/ascii.py", line 26, in decode

    return codecs.ascii_decode(input, self.errors)[0]

UnicodeDecodeError: 'ascii' codec can't decode byte 0xc5 in position 131: ordinal not in range(128)

----------------------------------------
Command python setup.py egg_info failed with error code 1 in /home/vrnet/public_html/env/build/pyramid-jinja2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:31:53.177

包更改日志文件中包含非 ascii 字符，从而中断包安装。我已经[提交了一个](https://github.com/Pylons/pyramid_jinja2/issues/56)关于这个的错误报告。

您必须与开发人员一起解决这个问题，或者改用 Python 2 或其他模板引擎。

# c# - 查询以获取每小时的所有操作

> ID：14922711
> 
> 赞同：0
> 
> 时间：2013-02-17T15:29:53.003
> 
> 标签：c#, sql, linq

我想运行并打印一个查询，显示一天中每小时的订单数（24）。

应该看起来像：
小时-1:00，订单数-5
小时-2:00，订单数-45
小时-3:00，订单数-25
小时-4:00，订单数-3
小时- 5:00，订单数量-43
等等……

我尝试：

```
 public void ShowBestHours()
    {
        using (NorthwindDataContext db = new NorthwindDataContext())
        {
            var query =
                from z in db.Orders
                select new Stime
                {
                    HourTime = db.Orders.GroupBy(x => x.OrderDate.Value.Hour).Count(),

                };
            foreach (var item in query)
            {
                Console.WriteLine("Hour : {0},Order(s) Number : {1}", item.HourTime, item.Count);
            }
        }
    }
    public class Stime
    {
        public int HourTime { get; set; }
        public int Count { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:57:46.077

您需要将查询更改为

```
var query = 
    from z in db.Orders
    group z by z.OrderDate.Value.Hour into g
    select new Stime{ HourTime = g.Key, Count=g.Count () }; 
```

或者

```
var query = db,Orders.GroupBy (o => o.OrderDate.Value.Hour).Select (
    g => new Stime{ HourTime=g.Key, Count=g.Count () }); 
```

在我的 Northwind 副本中，所有 OrderDate 值都只是日期，因此结果只是 HourTime = 0，Count = 830。

我假设您只是在尝试分组。尝试像这样按星期几分组

```
var query = db.Orders.GroupBy (o => o.OrderDate.Value.DayOfWeek).Select (
    g => new { DayOfWeek=g.Key, Count=g.Count () }); 
```

这给出了更有用的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:57:33.250

您没有`Stime.Count`在查询中进行任何设置，也没有按小时正确分组。当然，我还没有看到您的确切设置，但我认为以下内容应该适合您。

```
var query =
    from z in db.Orders
    group z by z.OrderDate.Value.Hour into g
    select new Stime() { HourTime = g.Key, Count = g.Count() };

foreach (var item in query)
{
    Console.WriteLine("Hour : {0},Order(s) Number : {1}", item.HourTime, item.Count);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T15:58:13.920

试试这个：

```
public void ShowBestHours()
{
    using (NorthwindDataContext db = new NorthwindDataContext())
    {
        var query = db.Orders.GroupBy(x =>  x.OrderDate.Value.Hour).OrderByDescending(x => x.Count()).Select(x => new Stime { HourTime = x.Key, Count = x.Count() });   

        foreach (var item in query)
        {
            Console.WriteLine("Hour : {0},Order(s) Number : {1}", item.HourTime, item.Count);
        }
    }
} 
```

# php - php, jquery 只有第一个 id 工作正常

> ID：14922717
> 
> 赞同：1
> 
> 时间：2013-02-17T15:30:36.303
> 
> 标签：php, jquery

我在 .php 中有以下代码（代码经过编辑以便于理解）。

```
while($row = mysql_fetch_array($biznis)){
<div id='listItem'>
    <div id='listPic'>
        <img src='../../social/images/avatar/empty_avatar_full.jpg'></img>
    </div>
    <div id='listCont'>
        <span>abcde<i>(request pending)</i></span>                              
    </div>
    <div id="listInfo">
        <span id='info'>More info</span>
    </div>
    <div style='clear:both;'></div>

    <div id='moreInfo'>
        <span>Invitation sent: xx-yy-zzzz</span>
    </div>
</div>

<div style='clear:both;'></div>
} 
```

所以代码没什么特别的，我只是把表格中的所有记录排成一行。所以现在，问题来了，正如你所看到的，我对相同的元素使用相同的 id。

jQuery代码

```
$(document).ready(function () {
    $("#moreInfo").hide();

    $("#info").click(function(){
    $("#moreInfo").slideToggle();
});
}); 
```

好的，现在问题就来了。只有第一个 div (#moreinfo) 被隐藏，所有其他的都被显示。只有第一个跨度 (#info) 正在切换滑块。

我尝试为 ids 设置计数器，并为每个函数设置 jquery，但没有像我想象的那样真正起作用。

泰，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:33:54.987

使用 class 而不是 ids，因为您处于 while 循环中。一个 id 只存在一次。

并更新您的 JS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T15:33:58.213

元素 ID 应该是该元素*的唯一*标识符。为通用选择器使用**类名：**

```
<? while($row = mysql_fetch_array($biznis)): ?>
<div class="listItem">
    <div class="listPic">
        <img src="../../social/images/avatar/empty_avatar_full.jpg"></img>
    </div>
    <div class="listCont">
        <span>abcde<i>(request pending)</i></span>                              
    </div>
    <div class="listInfo">
        <span class="info">More info</span>
    </div>
    <div style="clear:both;"></div>
    <div class="moreInfo">
        <span>Invitation sent: xx-yy-zzzz</span>
    </div>
</div>
<div style="clear:both;"></div>
<? endwhile; ?> 
```

并将您的 jQuery 更改为：

```
$(function() {
   $('.moreInfo').hide();
   $('.info').click(function() {
      $('.moreInfo').slideToggle();
   });
}); 
```

**编辑**

```
$('.info').click(function() {
   $(this).parent().siblings('.moreInfo').slideToggle();
}); 
```

# java - 回调中的 notify() 未发出 wait() 信号

> ID：14922718
> 
> 赞同：2
> 
> 时间：2013-02-17T15:30:40.380
> 
> 标签：java, android, callback, thread-synchronization

问题很简单。在 Android 上，我有一个需要调用库函数的方法。该呼叫将发出我必须处理的回调信号。在我从我的方法返回之前，我必须等待该回调发出信号。

我认为监视器对象上的 wait() 和 notify() 方法可以解决问题。它不是。

基本上监控对象被调用`Connection`，我在调用方法中实例化。然后该方法执行一个循环，在该循环中它调用一个 Android 库方法来“取消注册”一个对象。不幸的是，对这个方法的响应是在一些回调中给出的。所以我使用该`Connection.wait(10000)`方法来等待回调，并在回调中使用`connection.notify()`它来发出信号何时完成（当然，所有同步）。但是，`connection.notify()`不会发布`connection.wait(10000)`. 我可以从 Android logcat 中看到注销成功但我总是必须等待 10 秒才能尝试下一个注销任务。

调用方法和回调的代码如下。我在推理中做出了多么愚蠢的假设，即这失败了。据我所见，调用方法（线程）肯定拥有监视对象并将其交给`connection.wait(10000)`！

也许我对这个问题使用了完全错误的方法？（我想要的是在所有注销完成之前阻止调用者的方法。）

```
public void clearRegistrations()
{
    connection = new Connection();
    // Tell the callback to notify() when a result is obtained
    connection.setUseNotify(true);
    for(BluetoothHealthAppConfiguration btConfig : btHealthAppConfigs)
    {
        // Initialize Connection object to not connected
        connection.setConnectionState(false);
        if(btHealth.unregisterAppConfiguration(btConfig))
        {
            try
            {
                synchronized (connection) 
                {
                    connection.wait(10000);
                    // See if we were signaled or timed out
                    if(!connection.getConnectionState())
                    {
                        Log.i(TAG, "Unregistration attempt timed out or failed; trying next un-registration");
                    }
                }
            }
            // This should not happen
            catch(InterruptedException ie)
            {
                Log.i(TAG, "The InterrupedException is signaled.");
            }
            // This should not happen.
            catch(IllegalMonitorStateException ime)
            {
                Log.i(TAG, "wait() method threw an IllegalMonitorStateException. Message: " + ime.getMessage());
            }
        }
        else
        {
            Toast.makeText(context, "Un-Registration API returned failure", Toast.LENGTH_SHORT).show();
        }
    }
    btHealthAppConfigs.clear();
    connection.setConnectionState(false);
    connection.setUseNotify(false);
} 
```

回调如下，它与上面的方法在同一个类中，但它是 Android 中非常流行的“onSomeEvent()”之一：

```
 public void onHealthAppConfigurationStatusChange(BluetoothHealthAppConfiguration btAppConfig, int status)
    {
        if (status == BluetoothHealth.APP_CONFIG_UNREGISTRATION_FAILURE)
        {
            Log.i(TAG, "Un-Registration of the Bluetooth Health Application failed");
            if(connection.useNotify() == true)
            {
                synchronized (connection)
                {
                    Log.i(TAG, "Signal unregistration failure");
                    // just indicate signaled
                    connection.setConnectionState(true);
                    connection.notify();
                }
            }
        }
        else if(status == BluetoothHealth.APP_CONFIG_UNREGISTRATION_SUCCESS)
        {
            Log.i(TAG, "Un-Registration of the Bluetooth Health Application successful");
            if(connection.useNotify() == true)
            {
                synchronized (connection)
                {
                    Log.i(TAG, "Signal unregistration success");
                    connection.setConnectionState(true);
                    connection.notify();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:58:02.687

这段代码可能有很多问题： assylias 得到了大部分。显而易见的是，您肯定需要使用 notifyAll，而不是 notify。notify 重新启动某个等待锁的线程；notifyAll 重新启动它们。

useNotify 和 setConnectionState 也需要同步。此外，您需要保证您锁定的连接实例在两个部分中是相同的，并且与您调用 notify 的连接实例相同。最后，您需要保证在调用等待之后确实发生了通知调用。

就方法而言，每当您使用此类低级工具时，您都应该想知道是否没有更好的方法。有几个更高级的结构可以更简单地做到这一点。我建议您尝试重新设计代码，以免等待回调。拨打电话，将状态停放在某处，然后在发生回调时处理回调。

# eclipse - Eclipse：在 Eclipse 副本之间随身携带我的所有偏好

> ID：14922719
> 
> 赞同：1
> 
> 时间：2013-02-17T15:30:45.960
> 
> 标签：eclipse, import, export, preferences

我正在使用 Spring Tool Suite，我认为它基于 Eclipse 3.7.2

我在工作时的 Eclipse 副本中设置了一些 Java 和 XML 语法颜色编码首选项。然后我将我的偏好导出到

eclipsePrefs.epf

我刚刚尝试将我的偏好导入到我家中的 Eclipse 副本中

eclipsePrefs.epf

Java 首选项只有复选框，XML 语法着色或其他首选项没有。我试过“全部导入”。没有骰子。

如何在 Eclipse 副本之间移动我的所有颜色编码......以及其他偏好？

周末愉快

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:33:27.873

`.metadata`所有设置都存储在当前工作空间中名为（隐藏）的文件夹中。每个插件都有一个`plugin`包含设置和首选项的文件夹，包括 Eclipse 的核心。

请参阅本指南：[http ://eclipse.dzone.com/news/create-new-eclipse-workspace-w](http://eclipse.dzone.com/news/create-new-eclipse-workspace-w)

# codeigniter - CodeIgniter 和 KCFinder 上的会话集成

> ID：14922721
> 
> 赞同：1
> 
> 时间：2013-02-17T15:31:02.147
> 
> 标签：codeigniter, session

我想使用 codeigniter 会话仅为登录用户启用 kcfinder。

在我的登录控制器中，我将会话设置为

```
 $sesData = array(
          'userId'  => $this->input->post('username',true),
           .....
           'KCFINDER' => Array('disabled' => FALSE)
 ); 
```

在 kcfinder config.php 中，我将 session var 作为默认值

```
'_sessionVar' => &$_SESSION['KCFINDER'], 
```

但我仍然无法访问查找器（通过 ckeditor）我得到“您无权浏览服务器”。

如果我打开这个，在 kcfinder 的 config.php 中

```
'disabled' => true, 
```

至

```
'disabled' => false, 
```

kcfinder 效果很好，但它具有公共访问权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T20:01:09.997

我通过将 kcfinder 会话设置为找到了一个临时解决方案

```
session_start();
$_SESSION['KCFINDER'] = array(); 
$_SESSION['KCFINDER']['disabled'] = false; 
```

但我仍在寻找codeigniter解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T16:31:59.910

您无法访问 CI 之外的 CI 会话。但是如果你使用这个库，你可以使用 CI 会话语法并访问 CI 之外的会话信息。

[https://github.com/EllisLab/CodeIgniter/wiki/Native-session](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)

干杯，

巴特

# c# - 如何在 C# 中反序列化 python 泡菜？

> ID：14922722
> 
> 赞同：9
> 
> 时间：2013-02-17T15:31:02.047
> 
> 标签：c#, python, pickle

我有一些 python 数据，序列化为泡菜，需要在 C# 程序中使用它。那么有什么方法可以在 C# 中反序列化 python 泡菜？我无法将数据格式更改为 JSON 等。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T15:58:56.833

你说你不能改变生成泡菜的程序。但是你肯定可以编写一个单独的 Python 程序来读取 pickle 并将其再次写为 JSON 吗？

```
import json, pickle

with open("data.pickle", "rb") as fpick:
    with open("data.json", "w") as fjson:
        json.dump(pickle.load(fpick), fjson) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T15:34:25.090

引用自[`documentation`](http://docs.python.org/2/library/pickle.html)：

> pickle 使用的数据格式是 Python 特定的。这样做的好处是没有外部标准施加的限制，例如 XDR（不能表示指针共享）；但这意味着非 Python 程序可能无法重建腌制的 Python 对象。

所以你的问题的答案是否定的，你不能在 C# 中反序列化它。如果您需要与其他平台通信，则必须使用可互操作的格式，例如 XML 或 JSON。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T15:54:15.657

您可以尝试[嵌入 IronPython](http://www.codeproject.com/Articles/53611/Embedding-IronPython-in-a-C-Application)并从那里 unpickling，然后使 unpickled 的对象可用于 C# 应用程序。

请注意，pickle 旨在序列化*Python*对象，因此这种方法仅适用于您有非常简单的对象且具有与 C# 等效项的明确映射的情况。它还要求您的 IronPython 环境可以访问定义 pickle 中包含的所有对象的类的所有模块（与 CPython 中相同）。

如果可能，您应该尝试以其他更具互操作性的方式（例如 JSON 或 XML）序列化您的数据。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-09T19:40:22.497

[Pyrolite](https://www.nuget.org/packages/Razorvine.Pyrolite/)有一个 Unpickler 类，可以将泡菜变成一个对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-16T00:46:13.780

现在有一个 NuGet [Razorvine.Pickle](https://www.nuget.org/packages/Razorvine.Pickle/)，用于在 .NET 中序列化和反序列化 pickle 文件。

# azure - Windows Azure - 更新和添加资源文件

> ID：14922727
> 
> 赞同：0
> 
> 时间：2013-02-17T15:31:46.547
> 
> 标签：azure, globalization

我是 Windows Azure 世界的新手，我对在部署的应用程序中使用资源文件有一些疑问。

当我部署了应用程序时，是否可以在不重建应用程序的情况下添加或更新现有资源 (resx) 文件？我已经阅读了一些信息，但我还不确定这种情况下的最佳实践。

我已经看到将资源文件的内容插入表或 blob 存储的建议，而且只要应用程序池“回收”，文件的更新不会强制重建。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:16:35.493

当我想更改代码上的某些内容时，我只是想您想要的相同的东西我必须将我们的应用程序重新部署到 Azure，并且需要很长时间才能上传，但我不知道是否可以更新您的资源（resx ) 文件。

我在首席 Windows Azure 架构师 Steve Marx 的博客上找到了一些解决方案：[通过与 Blob 存储同步，在几秒钟内更新您的 Windows Azure 网站](http://blog.smarx.com/posts/update-your-windows-azure-website-in-just-seconds-by-syncing-with-blob-storage)

这是一个很好的解决方案，如果您采用这种方式，您可以节省部署过程中的时间。

# c - 如何解释 C 中命令行参数中的特殊字符？

> ID：14922730
> 
> 赞同：0
> 
> 时间：2013-02-17T15:32:03.303
> 
> 标签：c, bash, special-characters, command-line-arguments, argv

第一个问题：

假设我们编写了一个简单的程序，它接受命令行参数并打印到文件中。如果用户输入

> writetofile 你好！0\nw%orl\t!@#y

bash 回复

> !0: 未找到事件。

如果用户不知道使用引号 ('') 或转义字符 ('\') 之类的东西，我该如何处理这些东西而不是 bash 将其理解为命令？

第二个问题：

一旦我得到这些参数，我如何将它们解释为特殊字符而不是字符序列。（即 \t 是制表符，而不是 '\''t'）

也就是说，如何确保程序将其写入文件：

```
Hello!0
 w%orl    !@#y 
```

并不是

```
Hello!0\n w%orl\t!@#y 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T18:12:15.590

您无法让 bash 停止将命令行解析为命令行。在您的特定情况下，`set +H`将禁用历史扩展，从而允许 !0 作为文字，但是如果您包含`(parenthesis)`, `$variables`,和其他十几个 shell 语法元素，`#comments`命令仍然会失败。`ampersand &`

请注意，这仅适用于 shell 的解析阶段，不适用于按字面传递`execve`或类似的任何数据。

要么让用户引用数据（`'single quotes'`将处理除其他单引号之外的所有内容），要么让您的程序本身读取数据以便交互进行

> ```
> $ writetofile
> Please enter your gibberish and press enter: Hello!0\n w%orl\t!@#y
> Thank you for your eloquent contribution.
> $ 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:43:06.030

第一个问题：使用单引号。即：writetofile 'Hello!0\nw%orl\t!@#y'

第二个问题：使用 printf。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T19:00:18.163

关于第二个问题：正如@Jims 所说，您可以使用 printf(1) 打印字符串。好主意，但请注意，这只会起作用，因为您（似乎）想要识别的转义符，例如`\t`and `\n`，与 printf 识别的转义符相同。

这些转义很常见，但它们没有任何基本内容，因此您的问题的*一般*答案 - 以及如果您想识别 printf 没有的转义的答案 - 是让您的程序解释它们。执行此操作的类 C 代码将类似于：

```
char *arg = "foo\\tbar\\n"; /* the doubled backslashes are to make this valid C */
int arglen = strlen(arg);
for (i=0; i<arglen; i++) {
    if (arg[i] == '\\') { // we've spotted an escape
        // interpret a backslash escape
        i++; // we should check for EOS here...
        switch (arg[i]) {
          case 'n': putchar('\n'); break;
          case 't': putchar('\t'); break;
          // etc
         }
     } else {
         // ordinary character: just output it
         putchar(arg[i]);
     }
 } 
```

（插入错误处理和良好的风格，品尝）。

# javascript - 如何定义 .done()

> ID：14922732
> 
> 赞同：2
> 
> 时间：2013-02-17T15:32:15.547
> 
> 标签：javascript, jquery

我正在尝试实现延迟`done`函数的调用，但找不到这样做的方法：

```
jQuery.fn.imageload=function(src) {
    $this=$(this);
    var img=new Image();
    img.src=src;
    if (img.complete) {done();return;}
    img.onload=done;
    function done() {
        console.log('done');
        $this.empty().append(img);
    }
    return $this;
}

$('div').imageload('http://placehold.it/350x150').done(function() {
    //this not called
    console.log('done loading');
}); 
```

[http://jsfiddle.net/oceog/m4jvd/](http://jsfiddle.net/oceog/m4jvd/)

`.done()`加载图像后，我应该在插件声明中添加什么来调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T15:41:48.600

[http://jsfiddle.net/hnhGR/3/](http://jsfiddle.net/hnhGR/3/)

您需要使用[jQuery.Deferred](http://api.jquery.com/category/deferred-object/)对象。

```
$(function () {
    $.fn.imageload=function(src) {
        $this=$(this);
        var img=new Image();
        img.src=src;
        var deferred = $.Deferred();
        img.onload = function() {
            deferred.resolve(img); 
        }
        if (img.complete) {
            img.onload();
        }
        deferred.done(function () {
            console.log('done');
            $this.empty().append(img);
            return img;
        });
        return deferred;
    }

    $('#my-div').imageload('http://placehold.it/350x150').done(function(img) {
        console.log('done loading', img);
    });
}); 
```

基本上 Deferred 对象有一个`resolve()`方法。当它被触发时，这意味着正在发生的任何异步过程都已经完成。当解析被触发时，所有被分配`done()`并被`then()`依次调用的回调。您传递给`resolve()`方法的值将传递给这些回调（在本例中为`img`变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:46:58.017

我会做：

```
jQuery.fn.imageload = function(src) {
    var self = this,
        img = new Image(),
        def = new jQuery.Deferred();

    if (img.complete) {
        def.resolve();
    }
    img.onload = function() {
        console.log('done');
        self.empty().append(img);
        def.resolve(); 
    }
    img.src = src;
    return def.promise();
}

$('div').imageload('http://placehold.it/350x150').done(function() {
    console.log('done loading');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T15:42:04.573

我会尝试使用[$.Deferred](http://api.jquery.com/category/deferred-object/)。我想这会起作用：

```
$.fn.imageload = function(src) {
    $this = this;
    return $.Deferred(function() {
        var self = this,
            img = new Image();
        img.onload = function() {
           $this.empty().append(img);
           self.resolve();
        };
        img.src = src;
    });
}

$('div').imageload('http://placehold.it/350x150').done(function () {
    console.log('done loading');
}); 
```

[http://jsfiddle.net/k6kuB/](http://jsfiddle.net/k6kuB/)

# jquery - Rails > 3.1 如何从 application.js 提供图像

> ID：14922735
> 
> 赞同：0
> 
> 时间：2013-02-17T15:32:25.220
> 
> 标签：jquery, ruby-on-rails-3, asset-pipeline

我已经在`app/assets/images`目录中放了一张图片，现在我想从我的`application.js`文件中提供它。

就像是：

```
beforeSend: function() {
  ('#any_div').html("<img src='/assets/loading.gif'>");
} 
```

它尝试从我当前的控制器加载，我得到：

```
Request URL:http://localhost:3000/users/loading.gif
Request Method:GET
Status Code:401 Unauthorized 
```

这里有什么提示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:06:29.990

刚刚找到了解决办法。

在我的`config/application.rb`文件中，我必须添加以下行：

`config.serve_static_assets = true`

并重新启动本地网络服务器。

而已！希望它可以帮助某人。

# yii - YiiBooster - 项目的 htmlOptions 不起作用？

> ID：14922739
> 
> 赞同：2
> 
> 时间：2013-02-17T15:32:46.783
> 
> 标签：yii, yii-extensions, yii-booster

我正在使用[http://yii-booster.clevertech.biz/components.html#navbar](http://yii-booster.clevertech.biz/components.html#navbar)并且我想生成导航栏。我有一个问题，因为我必须`pull-right`在其中一个项目上使用 css 类。

为什么不`htmlOptions`工作？如何`pull-right`在“用户”项上使用？

```
$this->widget('bootstrap.widgets.TbNavbar', array(
    'brand' => CHtml::encode($this->pageTitle),
    'brandUrl' => '#',
    'collapse' => true,
    'type' => 'inverse',
    'items' => array(
        array(
            'class' => 'bootstrap.widgets.TbMenu',
            'items' => array(
                array('label'=>'Home', 'url'=>'#', 'active'=>true),
                array('label'=>'Link', 'url'=>'#'),
                array('label'=>'Link', 'url'=>'#'),
                array('label'=>'User (895)', 'htmlOptions'=>array('class'=>'pull-right'),
                    'items'=>array(
                        array('label'=>'Support', 'url'=>'#'),
                        array('label'=>'Mailing', 'url'=>'#'),
                        array('label'=>'Sklep', 'url'=>'#'),
                        array('label'=>'Profile', 'url'=>'#'),
                        array('label'=>'Logout', 'url'=>'#'),
                    )
                ),
            )
        )
    )
)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:01:50.263

请试试：

```
$this->widget('bootstrap.widgets.TbNavbar', array(
    'brand' => CHtml::encode($this->pageTitle),
    'brandUrl' => '#',
    'collapse' => true,
    'type' => 'inverse',
    'items' => array(
        array(
            'class' => 'bootstrap.widgets.TbMenu',
            'items' => array(
                array('label'=>'Home', 'url'=>'#', 'active'=>true),
                array('label'=>'Link', 'url'=>'#'),
                array('label'=>'Link', 'url'=>'#'),
                array('label'=>'User (895)', 'itemOptions'=>array('class'=>'pull-right'),
                    'items'=>array(
                        array('label'=>'Support', 'url'=>'#'),
                        array('label'=>'Mailing', 'url'=>'#'),
                        array('label'=>'Sklep', 'url'=>'#'),
                        array('label'=>'Profile', 'url'=>'#'),
                        array('label'=>'Logout', 'url'=>'#'),
                    )
                ),
            )
        )
    )
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:22:34.507

哦，我懂了。应该这样写：

```
$this->widget('bootstrap.widgets.TbNavbar', array(
    'brand' => CHtml::encode($this->pageTitle),
    'brandUrl' => '#',
    'collapse' => true,
    'type' => 'inverse',
    'items' => array(
        array(
            'class' => 'bootstrap.widgets.TbMenu',
            'items' => array(
                array('label'=>'Home', 'url'=>'#', 'active'=>true),
                array('label'=>'Link', 'url'=>'#'),
                array('label'=>'Link', 'url'=>'#'),
            )
        ),
        array(
            'class' => 'bootstrap.widgets.TbMenu',
            'htmlOptions'=>array('class'=>'pull-right'),
            'items' => array(
                array('label'=>'Name Surname (895)',
                    'items'=>array(
                        array('label'=>'Support', 'url'=>'#'),
                        array('label'=>'Mailing', 'url'=>'#'),
                        array('label'=>'Sklep', 'url'=>'#'),
                        array('label'=>'Profile', 'url'=>'#'),
                        array('label'=>'Logout', 'url'=>'#'),
                    )
                ),
            )
        ),
    )
)); 
```

# java - 难以理解具有嵌套函数的 Java 实现（以及用 C++ 对其进行编码）

> ID：14922753
> 
> 赞同：1
> 
> 时间：2013-02-17T15:33:51.710
> 
> 标签：java, c++, interface

我看一段 Java 代码，我想看看它是如何在 C++ 中实现的：

```
public interface IThing {
    public void method1();
    // more (virtual methods)
}

public interface IThingFactory {
    public IThing getThing(ThingType thing);
}

public interface IFactory<T> {
    public T createInstance();
}

public class A {
    A(ThingType thingType, IFactory<IThing> thingFactory, ...) {
        // ...
    }

    static A create(ThingType thingType, final IThingFactory thingFactory) {
        return new A(new IFactory<IThing>() {
        {
            public IThing createInstance()
            {
                return thingFactory.getThing(thingType);
            }
        }, new IFactory< ... >()
        {
            public IAnother createInstance()
            {
                return anotherFactory.getAnother(anotherType);
            }
        });
    }

    // ... 
} 
```

我希望上面的代码（不完整）说明了我试图找出的内容。我的问题是如何在 C++ 中完成。主要是我不明白构造函数调用`createInstance`里面的实现`A`（在我看来还是不完整的），比如匿名函数实现。我看不到如何`createInstance`在 C++ 中以某种方式实现该方法，以便`IFactory<IThing>`定义（抽象）类型的对象，因为通过这种方式，（虚拟）方法`createInstance`仍然是纯的。或者可以用某种 lambda 函数来完成吗？

有人可以告诉我如何用 C++ 编码吗？谢谢（你的）信息！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:58:44.657

Java 语言规范写道：

> 非限定和限定类实例创建表达式都可以选择以类主体结尾。这样的类实例创建表达式声明了一个匿名类（第 15.9.5 节）并创建它的一个实例。

该匿名类是类实例创建表达式中命名的类的子类（在您的情况下为：）`IFactory`。

匿名类的一个特殊特性是它们可以访问周围作用域的最终变量。这是通过将它们的值提供给匿名子类的构造函数来实现的，然后将它们存储在该子类的最终字段中。

因此，直接转换为 C++ 将实例化一个命名子类，该子类将这些值作为构造函数参数。根据代码的实际作用，可能存在更惯用的翻译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:45:03.520

在 C++ 中，您也可以拥有匿名类，就像您可以拥有匿名结构一样（类与具有私有的结构相同）。

但是，我认为你最好不要使用它，因为我们不能显式地使匿名类继承自类 B，在 main 函数中它被强制转换为 B* 非常难看，而且 new 运算符不能直接应用于匿名类。因此匿名实例 c 被分配在堆栈上，当程序运行超出范围时它将被删除，并会导致问题。

使用命名子类是标准方法。

```
#include <iostream>
using namespace std;

// class B is a pure virtual class which is equivalent to interface in java.
class B
{
public:
    virtual int F() = 0;
};

class A
{
public:
    B * bb;
public:
    A(B* b);
};

A::A(B*b)
{
    bb = b;
}

int main()
{
    class{public: virtual int F(){return 10;}} c;
    A a((B*) &c);
    cout<<a.bb->F()<<endl;
} 
```

# java - Android/Adobe 空难报告：java.lang.UnsatisfiedLinkError

> ID：14922761
> 
> 赞同：3
> 
> 时间：2013-02-17T15:34:57.203
> 
> 标签：java, android, air, dalvik

我在 Google 的“崩溃和 ANR”中收到此错误。使用 Adob​​e Air 构建并打包为强制运行时的应用程序。

```
java.lang.UnsatisfiedLinkError: nativeSurfaceCreated
at com.adobe.air.AIRWindowSurfaceView.nativeSurfaceCreated(Native Method)
at com.adobe.air.AIRWindowSurfaceView.surfaceCreated(AIRWindowSurfaceView.java:719)
at android.view.SurfaceView.updateWindow(SurfaceView.java:545)
at android.view.SurfaceView.access$000(SurfaceView.java:81)
at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:693)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1731)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2583)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4508)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:809)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:576)
at dalvik.system.NativeStart.main(Native Method) 
```

有人知道这是什么意思吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T19:13:20.780

`UnsatisfiedLinkError`for Java 通常意味着您尝试加载一个名为`nativeSurfaceCreated`. 基本上你的代码调用了一个调用方法的方法等等，而其他人编写的一些代码称为本地方法。此本地方法加载了一个名为 的库`nativeSurfaceCreated`，而您没有该库。这通常打包在 Windows 中的 dll 或 Linux 中的 so 文件中。如果你能找到这个 dll/so 文件，你就可以运行你正在运行的任何东西。

# sorting - 快速排序中位数 3 运行时间

> ID：14922762
> 
> 赞同：0
> 
> 时间：2013-02-17T15:34:59.820
> 
> 标签：sorting, case, average

我正在考虑一种快速排序算法，选择分区函数中的枢轴作为数组中三个（均匀）随机选择的项目的中位数。有谁知道平均案例的运行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:47:05.490

小假设：所有元素都是不同的。

有了这个假设，即使你选择枢轴作为一个随机元素，平均运行时间也是 O(n * log n)。最乐观的情况也是 O(n * log n)。选择三个随机元素的中位数不会使平均情况变得更糟，因此它也必须是 O(n * log n)。通过查看中位数，您获得的是与平均值的较小偏差。这种版本的快速排序更加倒霉。

如果元素不必不同，请考虑一种情况，它们都相等。如果你的算法在 O(n * log n) 时间内仍然有效，它可能都是一样的。

# mysql - 如何为各种颜色和尺寸的商品构建数据库？

> ID：14922764
> 
> 赞同：0
> 
> 时间：2013-02-17T15:35:16.967
> 
> 标签：mysql, database, database-design

如何为具有各种尺寸和颜色的产品的电子商店构建数据库的最有效方法是什么？

假设我有一个产品，一件 T 恤。例如，如果我需要显示还剩多少 XXL 号红色 T 恤，那么表格/列结构应该是什么？

希望你能理解我的问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:41:20.880

表：

```
tshirts(tshirt_id, brand, size_id, color_id);
size(size_id, size_value)
color(color_id, color_name) 
```

这是假设 T 恤只有一种颜色而不是混合颜色:)。如果您想将更多颜色与 T 恤相关联，那么您可能需要引入另一个表，以使用复合键在 T 恤和颜色之间建立一对多关系。

```
tshirt_color(tshirt_id, color_id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:38:18.827

三个表听起来不错：

1.  产品
2.  颜色
3.  尺寸

每个产品行都链接到颜色和尺寸。您可以根据需要拥有尽可能多或尽可能少的颜色和尺寸组合的产品。Products 表还可以有一个库存列，您可以使用它来显示剩余的数量。

# android - 如何列出 Android 根进程

> ID：14922768
> 
> 赞同：0
> 
> 时间：2013-02-17T15:35:41.007
> 
> 标签：android, shell, root, activity-manager

我正在尝试使用以下代码列出所有当前正在运行的进程：

```
ActivityManager am = (ActivityManager) getSystemService(ACTIVITY_SERVICE);
List<ActivityManager.RunningAppProcessInfo> processInfo = am.getRunningAppProcesses();
for (int i = 0; i < processInfo.size(); i++) {
Log.d("Process: ",""+processInfo.get(i).processName );
} 
```

它列出了除“sh”、“strace”等根进程之外的所有内容。任何人都可以告诉如何列出这些吗？它们在通过 shell 命令提示符执行“ps”命令时被列出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:38:48.373

通过 shell执行`ps`命令并自己处理并显示输出。ActivityManager 只会返回应用程序。

您可以从我的开源项目中看到[TerminalUtils类，这是通过 Java 运行终端命令并将输出转换为字符串的示例。](https://github.com/RaghavSood/UserManagement/blob/master/src/com/appaholics/umd/TerminalUtils.java)

# jquery - 标签颜色不同

> ID：14922778
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:37:28.880
> 
> 标签：jquery, css, colors

我想给每个标签一个不同的颜色，但是我该怎么做呢？我试过像给每个链接或 ul 一个类这样的东西，但这没有用。我知道 anwser 非常简单，但我不知道这里应该是什么是我使用的代码

这是我的CSS

```
<style>
.tabs li {
    list-style:none;
    display:inline;
}

.tabs a {
    display:inline-block;
    background:#999;
    color:#fff;
    text-decoration:none;
    width:172px;
    height:30px;
}

.tabs a.active {
    background:#fff;
    color:#000;
}
.inhoud {
    padding:18px;
    width:600px;
    padding-top:20px;
    width:965px;
    height:870px;
}
.tabstitel{
    padding:10px;
    width:120px;
    background:#099;
}
</style> 
```

这是在我的身体里

```
<ul class='tabs'>
            <li class="tab1"><a class="tabstitel" href='#tab1'>titel</a></li>
            <li class="tab1"><a class="tabstitel" href='#tab2'>titel</a></li>
            <li class="tab1"><a class="tabstitel" href='#tab3'>titel</a></li>
            <li class="tab1"><a class="tabstitel" href='#tab4'>titel </a></li>
            <li class="tab1"><a class="tabstitel" href='#tab5'>titel</a></li> 
```

和脚本

```
$('ul.tabs').each(function () {
  var $active, $content, $links = $(this).find('a');
  $active = $($links.filter('[href="' + location.hash + '"]')[0] || $links[0]);
  $active.addClass('active');
  $content = $($active.attr('href'));
  $links.not($active).each(function () {
    $($(this).attr('href')).hide();
  });
  $(this).on('click', 'a', function (e) {
    $active.removeClass('active');
    $content.hide();
    $active = $(this);
    $content = $($(this).attr('href'));
    $active.addClass('active');
    $content.show();
    e.preventDefault();
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:50:14.217

将此添加到您的 CSS 中：

```
#tab1{background-color:red}
#tab2{background-color:green}
#tab3{background-color:blue}
#tab4{background-color:yellow}
#tab5{background-color:purple} 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T20:12:11.507

这被剥离了：这[是一个小提琴](http://jsfiddle.net/sheriffderek/J7mc6/)

**HTML**

```
<ul class='tabs'>
    <li class="tab1"><a href="?">titel</a></li>
    <li class="tab2"><a href="?">titel</a></li>
    <li class="tab3"><a href="?">titel</a></li>
    <li class="tab4"><a href="?">titel</a></li>
    <li class="tab5"><a href="?">titel</a></li>
</ul> 
```

**CSS**

```
.tabs {
    float: left;
    background-color: red;
    overflow: hidden;
    list-style: none; /* this is the list... */

    /* this is just to dempnstrate how the ul should contain the elements */
}

.tabs li {
    float: left;
}

.tabs a {
    display: block;
    float: left;
    padding: 1em 2em;

    background-color: rgba(0,0,0,.1);
    margin-right: 1em;
}

.tab1 a {
    background-color: orange;
}

    .tab1 a:hover { /* example :hover */        
    background-color: #f06;
    }

    .tab1 a:active { /* example :active */        
    background-color: #000;
    }

.tab2 a {
    background-color: yellow;
}

.tab3 a {
    background-color: lime;
}

.tab4 a {
    background-color: lightblue;
}

.tab5 a {
    background-color: pink;
} 
```

我还没有真正完全理解这一点，但是给一个类然后在你的 CSS 中调用它`a.myclass { }`，我猜，对于浏览器来说太具体和太重了，通常是不可以的。因此，据我所知，你想把它们叫出来`.list-item-class a { }`——更具体地说——如果你想在未来证明你的列表中可能存在第二层 ul，你可以使用 > like...`.list-class > .list-item-class > a { }`

[CSS 选择器上](http://net.tutsplus.com/tutorials/html-css-techniques/the-30-css-selectors-you-must-memorize/)有一个很好的资源。参见列表中的#8。

# python - 阻止/强制执行 Gtk3 加速器

> ID：14922779
> 
> 赞同：2
> 
> 时间：2013-02-17T15:37:32.130
> 
> 标签：python, gtk, gtk3, accelerator

我最近决定编写我的第一个 Gtk3 应用程序，但我遇到了加速器问题。我知道如何添加加速器，但他们只是拒绝使用某些键，如右箭头和左箭头。这是一个简单的程序，它应该（但不会）在按下右箭头时破坏 GtkWindow。不过，它适用于大多数其他按钮。

```
from gi.repository import Gtk, Gdk
keyval= 65363

w=Gtk.Window()
menubar= Gtk.MenuBar()
filemenu= Gtk.Menu()
accels= Gtk.AccelGroup()
w.add_accel_group(accels)
file= Gtk.MenuItem.new_with_mnemonic('_File')
new= Gtk.ImageMenuItem.new_from_stock(Gtk.STOCK_NEW, None)
new.add_accelerator('activate', accels, keyval, Gdk.ModifierType(0), Gtk.AccelFlags(1))
file.set_submenu(filemenu)
filemenu.append(new)
new.connect('activate', lambda a: w.destroy())
menubar.append(file)
w.add(menubar)
w.connect('destroy', Gtk.main_quit)
w.show_all()
Gtk.main() 
```

然后，另一方面，还有另一个问题：如果小部件具有键盘焦点（例如 GtkEntry）并且按下了加速键组合，则执行加速器动作 - 但小部件没有收到按键按下。除了在小部件聚焦时从窗口中删除 AccelGroup 之外，还有其他方法可以防止这种情况吗？

# css - 如何以最小高度/最小宽度垂直和水平居中 div？

> ID：14922781
> 
> 赞同：0
> 
> 时间：2013-02-17T15:37:42.463
> 
> 标签：css

基本上我有一个宽度为 512 像素、高度为 336 像素的 div。我希望这个 div 始终位于屏幕的中心。如果浏览器窗口小于这些尺寸，我希望滚动条启动，以便用户可以看到所有内容。

目前我已经设法将我的 div 放在中心位置，我设置了 min-width/min-height，高度工作正常，但由于某种原因 min-width 不是。似乎滚动条正在显示，但内容在左侧被剪辑，我不知道为什么。

我在[这里](http://jsfiddle.net/c6Rca/)敲了一个jsfiddle （尝试重新调整窗口大小，使内容大于浏览器窗口，你会看到问题）

**HTML：**

```
<div id="vert-wrapper">
    <div id="wrapper">        
        <img src="http://lorempixel.com/512/336/" width="512" height="336" />
    </div>
</div> 
```

和**CSS：**

```
#vert-wrapper { width: 512px; min-height: 336px; height: 100%; position: absolute; left: 50%; margin-left: -256px; }
#wrapper { width: 100%; min-width: 512px; height: 336px; position: absolute; top: 50%; margin-top: -158px; } 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:49:49.047

这是因为留有余量。您的容器越来越小，您尝试设置的边距太大。尝试使用媒体查询。我试过了，它似乎有效，你的图片似乎整个可见。我把你图片的宽度作为查询的限制并取消所有边距：

```
@media (max-width:512px){
    #vert-wrapper {left:0%; margin-left:auto; }
} 
```

# java - 将字符串日期转换为闹钟

> ID：14922782
> 
> 赞同：0
> 
> 时间：2013-02-17T15:37:47.760
> 
> 标签：java, android, eclipse

我正在尝试设置警报。我有时间存储在 cvs 文件中。它们的格式为 hh:mm，例如 02:13。我想为这个时间设置闹钟

使用以下代码

```
 SimpleDateFormat  dt = new SimpleDateFormat("hh:mm"); 
      dt.parse(str); // GET TIME HERE

NotificationManager manger = (NotificationManager) this.getActivity().getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.launcher, "Mosque Prayer Times", time);
        PendingIntent contentIntent = PendingIntent.getActivity(this.getActivity(), 0, new Intent(this.getActivity(), AlarmReceiver.class), 0);
        notification.setLatestEventInfo(this.getActivity(), name, title, contentIntent);
        notification.flags = Notification.FLAG_INSISTENT;
        notification.sound = Uri.parse("android.resource://com.trib.app.mosqueprayertimes/raw/adhan.mp3");
        manger.notify(id, notification);        
    } 
```

我发现很难从这种日期格式中提取“时间”并将其设置在我的通知中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:57:51.363

你有没有试过这个......

```
 SimpleDateFormat  dt = new SimpleDateFormat("hh:mm"); 
     Date date=  dt.parse(str); // GET TIME HERE
    Calender cal=Calender.getInstance();
    cal.setTime(date);
    String hours=cal.get(Calendar.HOUR);
    String minutes=cal.get(Calendar.MINUTE); 
```

# jquery - 当表单使用ajax动态加载时，jquery表单选择器不起作用

> ID：14922783
> 
> 赞同：2
> 
> 时间：2013-02-17T15:37:59.323
> 
> 标签：jquery, jquery-selectors

我在这个问题上敲了半天。

我想阻止提交表单，所以我可以使用 ajax 提交它，但不能让选择器工作。

我的标记是这样的：

```
<div class="my_cart">
<ul>
<li>
<form action="/cart/remove_item" method="post" accept-charset="utf-8">
<input type="hidden" name="rowid" value="eb0d73613fd555ed3dc24d3877447fc7">
<input type="submit" name="foofoo" value="*">
</form>
</li>
<li>London</li>
<li class="crossed_price">46.00</li>
<li class="discount_price">free</li>
</ul>
<ul>
<li>
<form action="/cart/remove_item" method="post" accept-charset="utf-8">
<input type="hidden" name="rowid" value="71d2b4c973728137ec1905264be464b8">
<input type="submit" name="foofoo" value="*">
</form>
</li>
<li>Paris</li>
<li class="price">59.00</li>
</ul>
</div> 
```

JS是这样的：

```
$(document).ready(function() {
alert("Hello"); // this is to see if the function is triggered on page load. it is.
$("div.my_cart form").submit(function() { 
  alert ("no go");
  return false;
})
}); 
```

据我了解，`$("div.my_cart form")`应该捕获类为“my_cart”的**任何div 下的****所有**表单，但它似乎不起作用，并且表单像往常一样提交。

 **这不是浏览器问题，因为我已经在几种浏览器（Chrome、FF、Safari）上对其进行了测试。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:57:55.903

您的代码`$(document).ready(function() {`仅在 DOM 加载时运行一次。如果您使用 AJAX 加载页面的其他部分，则此方法不会再次触发它。

因此，因为您正在动态添加`my_cart`事件订阅，所以在文档就绪事件中将不起作用。

您需要使用 jQuery [on() 方法](http://api.jquery.com/on/)来订阅动态添加元素的事件：

```
$(document).ready(function () {
    alert("Hello");
    $(document).on("submit", "div.my_cart form", function () {
        alert("no go");
        return false;
    });
}); 
```**

# javascript - Javascript 在 JQuery 加载的 DIV 中不起作用

> ID：14922787
> 
> 赞同：2
> 
> 时间：2013-02-17T15:38:08.377
> 
> 标签：javascript, jquery

我将页面加载到 div 中，我的问题是我无法在 page1.php 中执行 javascript 代码。当我将页面加载到 div 时，如何执行代码。谢谢您的帮助。

这是我的代码

**索引.php**：

```
<script language="JavaScript" type="text/javascript">
function swapContent(cv) {
    $("#content").html('<img  class="loader" src="images/loader.gif"/>').show();
    var url = "load.php";
    $.post(url, {contentVar: cv} ,function(data) {
       $("#content").html(data).show();
    });

}
</script>

<a href="#" onClick="return false" onmousedown="javascript:swapContent('page1');"> Button1 </a>
<a href="#" onClick="return false" onmousedown="javascript:swapContent('page2');"> Button2 </a>

<div id="content"></div> 
```

**加载.php**：

```
<?php 
if(isset($_GET['contentVar']))
{
$contentVar = $_GET['contentVar'];  
    }else{
    $contentVar = $_POST['contentVar']; }
if ($contentVar == "page1") {
   include("page1.php");
} else if ($contentVar == "page2") {
   include("page2.php");
} 
```

和**page1.php的示例**

```
<script type="text/javascript" src="nicEdit.js"></script>
<script type="text/javascript">
    bkLib.onDomLoaded(function() { nicEditors.allTextAreas() });
</script>
<textarea name="message" id="message" cols="45" rows="5"></textarea> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:04:59.330

从 Ajax 返回的数据被视为纯文本，因此默认情况下不会执行其中的任何 Javascript。见[这篇](https://stackoverflow.com/questions/14314072/jquery-doesnt-execute-on-div-loaded-with-ajax)文章。

尝试使用 .load() 而不是 $.post() ：

```
function swapContent(cv) {
    $("#content").html('<img  class="loader" src="images/loader.gif"/>').show();
    var url = "load.php";

    $("#content").load(url, {contentVar: cv});
} 
```

# jsf-2 - Primefaces3.5+JSF2.1.9 点击链接或按钮两次后的请求处理

> ID：14922788
> 
> 赞同：0
> 
> 时间：2013-02-17T15:38:16.440
> 
> 标签：jsf-2, primefaces, commandbutton

我正在使用 Primefaces3.5 和 Jsf2.1.9 我遇到了一个奇怪的问题

```
 <p:commandButton> 
```

也

```
 <p:commandLink> 
```

我必须按下按钮并链接多个，然后 JSF bean 方法正在调用，否则单击没有发生当我阅读一些**Stackoverflow**问题时，此问题与**JSF**相关，但即使将 Primfaces3.5 与他们的组件一起使用，我也遇到了这个问题。任何人都知道我该如何解决这个问题。我的 JSF 页面

```
<ui:composition xmlns:jsp="http://java.sun.com/JSP/Page"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui"
    template="./../portfolio/PortfolioViewTemplate.xhtml">

    <ui:define name="moduleContent">

        <p:panel id="panel" header="Portfolio Transaction">
            <p:messages id="msgs" />

            <p:panelGrid id="addMoreTrans" columns="2" style="border-style:none;">
                <f:facet name="header">
                       Add Trades
                </f:facet>
                <p:dataTable var="moreTrans"
                    value="#{portfolioTransactionBean.listOfTrasPanel}" style="border:none;" >

                    <p:column style="border:none;">
                        <p:panelGrid columns="7" id="transactionPanel1"
                            style="display: inline-block;border:none;">

                            <h:outputLabel for="tipsSuggestionBoxId" value="Company Name:*"></h:outputLabel>

                            <h:outputText value="Date:*" />

                            <h:outputText value="Type:*" />

                            <h:outputText value="Quantity:*" />

                            <h:outputText value="Price:*" />

                            <h:outputText value="Brokerage:" />

                            <h:outputText value="Notes:" />

                            <p:autoComplete id="tipsSuggestionBoxId"
                                completeMethod="#{applicationScopeBean.autoSelectCompany}"
                                value="#{portfolioTransactionBean.txnCurrentRecord.companyName}"
                                minChars="3" nothingLabel="No similar company found"
                                requestDelay="1" minQueryLength="3" required="true"
                                requiredMessage="Company Name Cannot be empty">
                            </p:autoComplete>

                            <p:calendar id="from_date1" size="10" required="true"
                                requiredMessage="Date Cannot be empty"
                                value="#{portfolioTransactionBean.txnCurrentRecord.umptTransDate}"
                                mode="popup" showOn="both" pattern="dd/MM/yyyy"
                                popupIconOnly="true" readonly="#{facesContext.renderResponse}"
                                navigator="true" showButtonPanel="true">
                            </p:calendar>

                            <p:selectOneMenu id="tranType"
                                value="#{portfolioTransactionBean.txnCurrentRecord.umptTransType}">
                                <f:selectItem itemLabel="Transaction Type" itemValue="" />
                                <f:selectItem itemLabel="Buy" itemValue="Buy" />
                                <f:selectItem itemLabel="Sell" itemValue="Sell" />
                                <f:selectItem itemLabel="Bonus" itemValue="Bonus" />
                                <f:selectItem itemLabel="Split" itemValue="Split" />
                            </p:selectOneMenu>

                            <p:spinner id="transQuntity1" required="true"
                                value="#{portfolioTransactionBean.txnCurrentRecord.umptQty}"
                                min="1" label="Quanity" size="5"
                                validatorMessage="Field Is mandatory" />

                            <p:spinner id="transPrice1" required="true" size="5"
                                value="#{portfolioTransactionBean.txnCurrentRecord.umptPrice}"
                                label="Price" validatorMessage="Field Is mandatory" />

                            <p:spinner id="brokerage1" size="5"
                                value="#{portfolioTransactionBean.txnCurrentRecord.umptBrokerage}" />

                            <h:inputText
                                value="#{portfolioTransactionBean.txnCurrentRecord.umptNotes}" />

                        </p:panelGrid>
                    <p:separator id="customSeparator" style="width:100%;height:10px" />

                    </p:column>
                </p:dataTable>
                <f:facet name="footer">

                    <p:commandButton value="Clear"
                        actionListener="#{portfolioTransactionBean.clearRecord}"
                        process="@this"
                        rendered="#{portfolioTransactionBean.onClickofButton}">
                    </p:commandButton>
                    <p:spacer width="100" height="10" />
                    <p:commandButton value="Save Transaction " icon="ui-icon-check"
                        action="#{portfolioTransactionBean.savePortfolioTransaction}"
                        style="float:right;right:20%;"
                        rendered="#{portfolioTransactionBean.onClickofButton}">

                    </p:commandButton>
                    <p:commandButton value="Add More Transaction " icon="ui-icon-check"
                        action="#{portfolioTransactionBean.addMoreTransPanel}"
                        process="@this" update="addMoreTrans"
                        rendered="#{portfolioTransactionBean.onClickofButton}" />

                </f:facet>
            </p:panelGrid>

            <p:panelGrid columns="2" id="allTransactionPanel">
                <p:dataTable value="#{portfolioTransactionBean.transactionsList}"
                    var="tradeRec">
                    <f:facet name="Header">
                        <h:outputText>Recently Added Trades</h:outputText>
                    </f:facet>

                    <p:column headerText="Company">
                        <h:outputText value="#{tradeRec.companyName}"></h:outputText>
                    </p:column>
                    <p:column headerText="Date">
                        <h:outputText value="#{tradeRec.umptTransDate}">
                            <f:convertDateTime dateStyle="medium"></f:convertDateTime>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Type">
                        <h:outputText value="#{tradeRec.umptTransType}"></h:outputText>
                    </p:column>
                    <p:column headerText="Quantity">
                        <h:outputText value="#{tradeRec.umptQty}"></h:outputText>
                    </p:column>
                    <p:column headerText="Price">
                        <h:outputText value="#{tradeRec.umptPrice}">
                            <f:convertNumber maxFractionDigits="2"></f:convertNumber>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Brokerage">
                        <h:outputText value="#{tradeRec.umptBrokerage}">
                            <f:convertNumber maxFractionDigits="2"></f:convertNumber>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </p:panelGrid>
        </p:panel>

    </ui:define>
</ui:composition> 
```

模板文件...

```
<ui:composition xmlns:jsp="http://java.sun.com/JSP/Page" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:f="http://java.sun.com/jsf/core" 
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:p="http://primefaces.org/ui" 
    template="./../templates/MasterTemplate.xhtml">

    <ui:define name="moduleDetails">
        <h:form name="portfolioMenuForm">
        <f:event type="javax.faces.event.PreRenderViewEvent" listener="#{applicationScopeBean.preRenderView}"/>
            <table style="width: 100%; min-height: 500px; border: none">

                <tr>
                    <td>
                    <p:menu>
                        <p:submenu label="Portfolio Views"> 
                            <p:menuitem value="Add Transactions" action="PortfolioTransactionMgmt" update="@form"   immediate="true" />
                            <p:menuitem value="View Transactions"  action="PortFolioTranView"   update="@form"   immediate="true"  />
                            <p:menuitem value="Latest Holdings"  action="PortfolioHolding"  update="@form" immediate="true" />
                            <p:menuitem value="Sector Allocations"  action="#{portfolioTransactionBean.showSecAllocation}"  update="@form" immediate="true" />
                            <p:menuitem value="Realized Profit"  action="PortfolioRelizeProfit"  update="@form" immediate="true" />
                            <p:menuitem value="Portfolio Performance"  action="#{portfolioTransactionBean.showPortPerformance}"  update="@form" immediate="true" />
                            <p:menuitem value="Benchmark Comparison"  action="#{portfolioTransactionBean.showBenhComparison}"  update="@form" immediate="true" />
                         </p:submenu>   
                    </p:menu>
                    </td>
                    <td>
                        <ui:insert name="moduleContent"></ui:insert>
                    </td>
                </tr>

            </table>
        </h:form>
    </ui:define>

</ui:composition> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:30:22.480

基本上这不是奇怪的问题在第一次单击时，jsf 首先查看是否有 (javax.faces.ViewState) 状态可用，如果它不可用，那么它会为你创建一个 & 当你第二次单击时，因为 Jsf 状态可用它调用 bean 方法。解决方案：尝试通过javascript函数创建jsf状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:02:24.067

感谢primefaces 的**Çağatay Çivici**项目负责人。他建议我

> 然后尝试使用 2.1.17，showcase 是 2.1.17。

所以我为 jsf 更新了我的 pom，它就像一个魅力。

谢谢

# uitableview - 如何使 UITableview 单元格在三个级别上重新加载？

> ID：14922790
> 
> 赞同：0
> 
> 时间：2013-02-17T15:38:35.080
> 
> 标签：uitableview, ios6

我有一个应用程序结构，包括`UITableViews`如下所示。该项目是一个核心数据应用程序，具有两个实体和大约十几个属性。

在子细节中，有一些`UIPickers`. 选择拾取器项时，更改反映在核心数据模型中，并在根VC中反映。更改不会反映在子详细视图本身中，也不会反映在详细视图中。

我正在推送和弹出每个 VC，在每个 VC 之间传递实体值。我从 A 到 B 到 C 又回来。

如果需要，我将使用代码片段更新问题。

谢谢

![在此处输入图像描述](../Images/84c3c795941bdcb44c3be571d4937950.png)

这两天我一直在试图弄清楚这里发生了什么，并认为是时候寻求帮助了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:08:12.090

**发生了什么的可能解释**

没有看到你的代码，我只能猜测，但这就是我认为正在发生的事情。您的 rootViewController 正在正确侦听 coreData 模型的更改。您要么直接收听，`NSManagedObjectContextObjectsDidChangeNotification`要么已经实现了`NSFetchedResultsControllerDelegate`. `viewWillAppear`或者更有可能的是，您正在rootViewController中正确执行获取。但是，您可能没有在 Detail 或 Sub-Detail viewControllers 中执行任何这些操作。

**具体建议**

1.  在 Detail 和 Sub-Detail viewWillAppear 中调用`performFetch`和`[tableView reloadData]`，以便它们刷新 coreData 中的数据。
2.  更好地实现`NSFetchedResultsControllerDelegate`，以便对 coreData 模型的更改自动反映在 UITableView 中。

# r - 分类变量的ddply和汇总

> ID：14922791
> 
> 赞同：1
> 
> 时间：2013-02-17T15:38:44.070
> 
> 标签：r, aggregate, plyr

我有一个这样的数据框 x

```
Id   Group   Var1
001    A     yes
002    A     no
003    A     yes
004    B     no
005    B     yes
006    C     no 
```

我想创建一个这样的数据框

```
Group    yes    no
A        2      1
B        1      1
C        0      1 
```

.aggregate 函数运行良好

```
aggregate(x$Var1 ~ x$Group,FUN=summary) 
```

但我无法使用结果创建数据框。

如果我尝试使用 .ddply

```
ddply(x,"Group",function(x) summary(x$Var1)) 
```

我得到错误：结果的长度不相等。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:53:51.807

这不能回答您关于 的问题`ddply`，但它应该对您的输出有所帮助。您使用`aggregate`的聚合命令中的第二列是一个矩阵，但您可以将整个输出包装在一个`do.call(data.frame...`语句中以获取数据框。假设你`data.frame`被称为“mydf”：

```
temp <- do.call(data.frame, aggregate(Var1 ~ Group, mydf, summary))
temp
#   Group Var1.no Var1.yes
# 1     A       1        2
# 2     B       1        1
# 3     C       1        0
str(temp)
# 'data.frame':  3 obs. of  3 variables:
#  $ Group   : Factor w/ 3 levels "A","B","C": 1 2 3
#  $ Var1.no : int  1 1 1
#  $ Var1.yes: int  2 1 0 
```

或者，您可以查看`table`：

```
table(mydf$Group, mydf$Var1)
#    
#     no yes
#   A  1   2
#   B  1   1
#   C  1   0
as.data.frame.matrix(table(mydf$Group, mydf$Var1))
#   no yes
# A  1   2
# B  1   1
# C  1   0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T15:42:17.707

我在你的数据中引入了一个 NA

```
dat <- read.table(text = 'Id   Group   Var1
001    A     yes
002    A     no
003    A     NA     ## here!
004    B     no
005    B     yes
006    C     no',head = T) 
```

您需要在 summary 之前删除 NA ，因为 summary 为 NA 创建列，而 `aggregate`公式方法具有默认设置，`na.action = na.omit`该设置将排除额外的 NA' 列。这是一种解决方法，我在摘要之前删除了 NA：

```
 library(plyr)
  ddply(dat,"Group",function(x) {
    x <- na.omit(x$Var1)
    y <- summary(x)
})
 Group no yes
1     A  1   1
2     B  1   1
3     C  1   0 
```

这相当于

```
x <- dat
aggregate(x$Var1 ~ x$Group,FUN=summary)
  x$Group x$Var1.no x$Var1.yes
1       A         1          1
2       B         1          1
3       C         1          0 
```

# javascript - photoswipe 不会返回到原始页面

> ID：14922793
> 
> 赞同：1
> 
> 时间：2013-02-17T15:38:54.797
> 
> 标签：javascript, jquery, jquery-mobile, photoswipe

单击某个项目时，我正在使用 photoswipe 显示我的画廊。

**我的标记**：

```
<ul id="gallery_mobile_about">
        <li>
            <a href="/files/uploads/Detalle-Magrana.jpg" style="background-image: url('/files/uploads/Detalle-Magrana.jpg');" data-iframe="" data-pos="0" data-url="/files/uploads/Detalle-Magrana.jpg" class="gallery-item ui-link"></a>
        </li>
    <li>
            <a href="/files/uploads/Figues-de-Moro.jpg" style="background-image: url('/files/uploads/Figues-de-Moro.jpg');" data-iframe="" data-pos="1" data-url="/files/uploads/Figues-de-Moro.jpg" class="gallery-item ui-link">

            </a>
        </li>
        <li>
            <a href="/files/uploads/Cala-Deià-50x30cm1-1024x782.jpg" style="background-image: url('/files/uploads/Cala-Deià-50x30cm1-1024x782.jpg');" data-iframe="" data-pos="2" data-url="/files/uploads/Cala-Deià-50x30cm1-1024x782.jpg" class="gallery-item ui-link">
            </a>
        </li>
    <li>
            <a href="/files/uploads/Deia-Church-on-Cala-rock.jpg" style="background-image: url('/files/uploads/Deia-Church-on-Cala-rock.jpg');" data-iframe="" data-pos="3" data-url="/files/uploads/Deia-Church-on-Cala-rock.jpg" class="gallery-item ui-link">
            </a>
        </li>
</ul> 
```

**js**：

```
$(document).ready(function(){
    var myPhotoSwipe = $("#gallery_mobile_about a").photoSwipe(
    { enableMouseWheel: false , 
        enableKeyboard: false } 
    );                  
}); 
```

**问题**是，即使画廊似乎已加载，作为背景，我看到一个带有文本“未定义”的白页，并且在关闭画廊页面时，该白页将保留为该白页（未返回原始视图）

**结果**（点击图片，其中显示画廊中有 5 个项目）：[http ://deia.info/m/?lan=2&task=view_post&catid=14&blogid=25](http://deia.info/m/?lan=2&task=view_post&catid=14&blogid=25)

我在这里似乎缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:24:31.307

添加`rel="external"`解决了这个问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-17T13:56:27.397

我已经具备了这个属性`rel="external"`并尝试了对我有用的东西。

> ```
>  var myPhotoSwipe = $("#Gallery a").photoSwipe({
>             //your others attributes
>             target: 'html'
>         }); 
> ```

# java - Spring ContextConfiguration Initializers 不在 Maven 测试下运行

> ID：14922794
> 
> 赞同：0
> 
> 时间：2013-02-17T15:38:56.110
> 
> 标签：java, spring, maven, junit

我有一个在 Spring 应用程序上下文中完美运行的 Junit 测试。应用程序上下文包括两个 xml 文件以及一个初始化程序。JUnit 基类如下：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( locations = { "classpath:/applicationContext.xml", 
                                     "classpath:/applicationcontext-security.xml"}, 
                                     initializers = com.abc.ConfigurationInitializer.class )
@TransactionConfiguration
@Transactional
public abstract class BaseTest extends AbstractTransactionalJUnit4SpringContextTests
{...... 
```

但是，在 Maven 下运行测试时，应用程序上下文无法加载，这是因为初始化程序类没有运行。

为什么 Initializer(s) 类没有运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T15:17:41.270

我的错 - 初始化程序运行它很快就崩溃了

# unicode - JWPlayer 6 RSS 播放列表中的 Unicode 字符（带演示）

> ID：14922798
> 
> 赞同：1
> 
> 时间：2013-02-17T15:39:03.383
> 
> 标签：unicode, rss, jwplayer

好的，我有一个云端安装，它的文件夹/文件名中有 ö 和 ó 等字符。

每当我指向具有其中之一的 RTMP 流时，JWPlayer 就会进入无限缓冲。

为了使它起作用，我该如何逃避这些？它快把我逼疯了。我尝试过放弃 RSS 并使用 JSON，但也无法使其正常工作。

演示：[http ://apricot.viviotech.net/miscellaneous/index2.html](http://apricot.viviotech.net/miscellaneous/index2.html)

您会看到 N*E*R*D 轨道工作 - 所以它不是整体配置/播放器，只是任何带有不寻常字符的东西。

帮助？

更新：是的，设法使某些东西起作用：如果我从生成的 HTML 中复制并粘贴带有 diareses 的 o 并重新保存，它就可以工作。即 apricot.viviotech.net/miscellaneous/index3.html

它们看起来相同，但在十六进制编辑器中，不起作用的那个看起来像 Björk（字节编码为 C3 B6），而输出为 BjoÌ^rk（字节编码为 6F CC 88） （纯粹在底层 HEX 中）。在 HTML 源代码中，它们看起来相同，但显然这些输出的方式存在一些我不理解的编码问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T07:58:48.503

发现了问题：[https](https://stackoverflow.com/a/16477559/442412) ://stackoverflow.com/a/16477559/442412：注意自我，更多地关注正在发生的事情而不是正在发生的事情......

# javascript - 单击按钮时如何防止按钮内部跨度标签不可点击或无响应？

> ID：14922799
> 
> 赞同：0
> 
> 时间：2013-02-17T15:39:23.967
> 
> 标签：javascript, jquery

我创建的按钮有问题，基本上当我单击按钮时，它似乎非常无响应，只有大约 50% 的时间会触发。目前我在按钮内有一个 span 标签，我认为这可能对按钮点击有影响。这是对的吗？如果是这样，防止点击跨度的最佳方法是什么？

**按钮标记：**

```
<button class="btn view-newest btn-inverse is-active">
 <i class="icon icon-star"></i>
 <span>Click the button</span>
</button> 
```

然后我有一个简单的 .on 点击​​事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-29T14:49:48.673

如果这是您拥有的所有代码，则该`<span>`标签不应干扰 jQuery click 事件侦听器；它没有做任何花哨的事情。

这是一个展示这一点的[JSFiddle](http://jsfiddle.net/j1exwbsx/)：

```
<button class="btn view-newest btn-inverse is-active">
 <i class="fa fa-star"></i>
 <span>Click the button</span>
</button>

<div id="timesClicked">Times clicked: </div>

<script>
    clicked = 0;
    $(".btn").on('click', function() {
        clicked++;
        $("#timesClicked").text("Times clicked: " + clicked)
   });
</script> 
```

我会检查控制台是否有错误，确保只有一个事件侦听器并且在正确的位置调用它，并检查是否有任何松散的 Javascript 或 CSS 规则影响按钮。

# batch-file - 嘿，我需要批量帮助才能将 1 个文件夹中的所有内容复制到另一个文件夹

> ID：14922801
> 
> 赞同：-3
> 
> 时间：2013-02-17T15:39:46.283
> 
> 标签：batch-file, copy, directory

我正在处理一个文件夹很少的脚本，我真的不明白如何为此进行配置，但我不需要它。我已经在里面设置了一个脚本配置

```
Set cfg=cfg2
Set txt=txt2
Set rar=rar2 
```

cfg2、txt2、rar2 位于不同的目录中

cfg 中的文件是 cfg 文件，但其中有很多。这也适用于 txt & rar。

我想要一个复制脚本，将所有 cfg 文件（并且只有 cfg 文件）复制到另一个目录中的 cfg2 文件中。然后这又是 txt & rar 文件。

我也知道 move 的代码，但我真的很想复制它，因为在 move 时你只是 move "txt/*.txt" %txt% 这有点像我想做的，但那不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T06:22:50.880

看看微软的robocopy。像下面这样的东西应该可以工作；

```
robocopy /s \path\cfg \path\cfg2 *.cfg 
```

# c - C二叉搜索树实现——插入

> ID：14922802
> 
> 赞同：1
> 
> 时间：2013-02-17T15:39:49.290
> 
> 标签：c, binary-tree, binary-search-tree

我正在尝试创建一个程序，该程序将单词列表作为输入，并将它们排序为二叉树，以便可以找到它们，例如字典。这是我到目前为止所做的，但`newEl -> el = input;`我知道这是因为它试图指向一个 NULL el，当第一次创建树时，我得到了一个分段错误，但我不确定改进的最佳方法是什么我的代码是。有人有想法么？谢谢。

```
struct node *tra(struct node * start, Type input) {
  struct node * thisNode = start;

  if (thisNode == NULL)

    Type current = thisNode -> el;

    if (strcmp(input, current) > 0)
        return tra(thisNode -> right, input);

    else if (strcmp(input, current) < 0)
        return tra(thisNode -> left, input);

    else
        return thisNode;
  }
}

Ta insert(Type input, Ta ta) {
  if ((find(input, ta)) == FALSE) {
    newEl -> el = input;

  }

  return ta;
}

Boolean find(Type input, Ta ta) {
    if (tra(ta -> head, input) == NULL)
        return FALSE;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:54:36.423

既然你已经知道问题是什么，你应该解决它。分配节点并插入它。

```
Ta insert(Type input, Ta ta) {
  if ((find(input, ta)) == FALSE) {
    // call to tra will fail. this is the place to create a new node
    struct node *newEl = (struct node*)  malloc(sizeof(struct node));
    newEl -> el = input;
    newEl -> left = 0;
    newEl -> right = 0;
    // do the insertion ....
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T15:58:19.397

似乎您想创建一个新节点，但我看不到您为新节点分配空间的任何地方，例如：

```
newEl = (struct node*)malloc(sizeof(struct node)); 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:03:26.550

这是一个指向等效指针的指针：

```
typedef char *Type;
struct node {
  struct node *left , *right;
  Type payload;
  };    

struct node **find_pp(struct node **pp, Type input) {
  struct node *thisNode ;

  while ( thisNode = *pp ) {
    int diff;
    diff = strcmp(input, thisNode->payload);
    if (!diff) break;
    pp = (diff <0) ? &thisNode->left : &thisNode->right;
  }
return pp;
}

Boolean find(struct node *root, Type thing)
{
  struct node **pp;
  pp = find_pp( &root, thing);
  return (*pp) ? True : False;
}

void insert (struct node **pp, Type thing)
{
  struct node *newNode;
  pp = find_pp (pp, thing);

  if (*pp) return; /* already exists */
  *pp = newNode = malloc (sizeof *newnode);
  newNode->payload = strdup(thing);
  newNode->left = NULL;
  newNode->right = NULL;

return;
} 
```

* * *

几点注意事项：

*   将节点插入树意味着：分配给以前为 NULL 的指针
*   空树也是一棵树：只是一个恰好为空的指针（指向树的根）
*   在树中找到一个节点意味着：找到应该在的地方（：=指针）（如果它存在）
*   如果它不存在，这个指针正是应该插入它以使其存在的地方
*   绘制图表（用纸和铅笔）会有所帮助。

# ios - UILabel sizeToFit 仅适用于 AutoLayout 关闭

> ID：14922803
> 
> 赞同：3
> 
> 时间：2013-02-17T15:39:53.823
> 
> 标签：ios, ios6, uilabel, autolayout

所以我正在使用 iOS 6 制作一个应用程序，并且想知道为什么我以前在 iOS 5 上运行良好的代码现在不再工作了。我有一个带有动态 UILabel 的单元格，它会根据它携带的文本进行调整。

这是在打开自动布局的情况下：

![在此处输入图像描述](../Images/70991acefa6dd9d261b0dc5fc79f2b8b.png)

这是关闭自动布局的情况：

![在此处输入图像描述](../Images/0c500271c1aad40c348a810632d9a24d.png)

这是我的代码：

```
- (CGFloat)heightForText:(NSString *)bodyText
{

#define FONT_SIZE 13.0f
#define CELL_CONTENT_WIDTH 280.0f
#define CELL_CONTENT_MARGIN 5.0f

    CGSize constraintSize = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);
    CGSize labelSize = [bodyText sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraintSize lineBreakMode:NSLineBreakByWordWrapping];
    CGFloat height = MAX(labelSize.height, 36.0f);
    //   NSLog(@"height=%f", height);
    return height + (CELL_CONTENT_MARGIN * 2);

}

- (CGFloat)tableView:(UITableView *)tv heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    NSInteger section = [indexPath section];

    switch (section) {

        case 0:
            if ([self.text.text length]!=0)
            {
                return [self heightForText:self.text.text];
            }
            else if ([self.link.text length]!=0)
            {

               return 60.0f;

            }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T21:31:26.880

您显示的代码很好，问题很可能在您单元格内标签上的限制（您没有显示）内。

您的标签需要具有约束以使其与其父视图的每个边缘保持固定距离。这可能已经是这种情况了——如果是这样，现在的问题是标签不知道如何换行——您还需要`preferredMaxLayoutWidth`在标签上设置 。

我发现 DCIntrospect 等工具在调试 Autolayout 问题时非常有用。例如，在这种情况下，很难判断这是不是没有环绕文本的正确大小的标签，还是标签不够高而无法正确显示您的内容。

# javascript - 一种检查是否单击了类的任何元素的方法

> ID：14922804
> 
> 赞同：1
> 
> 时间：2013-02-17T15:39:54.110
> 
> 标签：javascript, jquery

有没有办法检查一个类的任何元素是否已被 jQuery 单击？我想检测是否单击了具有某个类的元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:41:13.637

> 我想检测是否单击了具有某个类的元素。

好吧，您总是可以订阅[`.click()`](http://api.jquery.com/click/)将在单击 DOM 元素时调用的事件处理程序：

```
$('.someClass').click(function() {
    // here you could use "this" to get the DOM element that was clicked.
}); 
```

如果您想使用以下[`.data()`](http://api.jquery.com/data/)函数跟踪它，您可以将一些元数据信息与此 DOM 元素相关联：

```
$('.someClass').click(function() {
    var isClicked = $(this).data('clicked');
    if (!isClicked) {
        // it's the first time we are clicking on this element
        $(this).data('clicked', true);
    } else {
        // the user has already clicked on this element
    }
}); 
```

# php - Javascript - 是否可以访问像 var b = 'opt' + 5; 这样的数组？警报（b [61]）；？

> ID：14922806
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:40:00.973
> 
> 标签：php, javascript, arrays, construction

在 PHP 中，我可以执行以下操作：

```
$name = "options{$a}"; // or "options" . $a, doesn't matter

for ($i = 0; $i < count($name[$i]); $i++) {
    // do something...
} 
```

只要**options0**存在（假设**$a**是**0**或**1**或其他），这种构造是完全有效的，但是......现在我需要在 Javascript 中做同样的事情，但现在没有成功。

谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:52:49.867

您可以使用一些注释所描述的数组，也可以使用对象属性。它们涉及类似的符号，但工作方式不同。例如，您可以执行以下操作：

```
var options = { option0 : ['a', 'b', 'c'],
                option1 : ['d', 'e'],
                ...
               };
var a = 0;
var count = options['option' + a].length; // assigns 3 to count 
```

这将访问`options`named的属性`'option' + a`（或者，使用此示例代码，`option0`）。

虽然您可以轻松计算和使用属性名称，但您不能（正如评论中指出的那样）使用局部变量名称来执行此操作。

# vb.net - 在 VB.NET 中保存图像

> ID：14922810
> 
> 赞同：1
> 
> 时间：2013-02-17T15:40:12.037
> 
> 标签：vb.net, image, system.drawing

我有一些用于从 VB.NET 中的 URL 保存图像的代码，但我没有找到保存图像的位置，我添加了一个位置字符串，但我不知道如何在代码中使用它。如何更改我的代码保存图像的位置（导入 System.Drawing 公共类 Form1）

```
Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

End Sub

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Dim MyImage As System.Drawing.Image
    Dim URL As String = TextBox1.Text
    Dim FileName As String, URLpieces As String()
    Dim location As String = "C:/SaveIMGURL/"
    URLpieces = Split(URL, "/")
    FileName = URLpieces.GetValue(UBound(URLpieces))
    MyImage = GetImage(URL)
    MyImage.Save(FileName)
    MyImage = Nothing
End Sub
Function GetImage(ByVal URL As String) As System.Drawing.Image
    Dim Request As System.Net.HttpWebRequest
    Dim Response As System.Net.HttpWebResponse
    Request = System.Net.WebRequest.Create(URL)
    Response = CType(Request.GetResponse, System.Net.WebResponse)
    If Request.HaveResponse Then
        If Response.StatusCode = Net.HttpStatusCode.OK Then
            GetImage = System.Drawing.Image.FromStream(Response.GetResponseStream)
        End If
    End If
    Try
    Catch e As System.Net.WebException
        MsgBox("A web exception has occured [" & URL & "]." & vbCrLf & " System returned: " & e.Message, MsgBoxStyle.Exclamation, "Error!")
        Exit Try
    Catch e As System.Net.ProtocolViolationException
        MsgBox("A protocol violation has occured [" & URL & "]." & vbCrLf & "  System returned: " & e.Message, MsgBoxStyle.Exclamation, "Error!")
        Exit Try
    Catch e As System.Net.Sockets.SocketException
        MsgBox("Socket error [" & URL & "]." & vbCrLf & "  System returned: " & e.Message, MsgBoxStyle.Exclamation, "Error!")
        Exit Try
    Catch e As System.IO.EndOfStreamException
        MsgBox("An IO stream exception has occured. System returned: " & e.Message, MsgBoxStyle.Exclamation, "Error!")
        Exit Try
    Finally
    End Try
End Function 
```

结束类

# c# - 手写笔墨水压力不工作

> ID：14922811
> 
> 赞同：0
> 
> 时间：2013-02-17T15:40:14.013
> 
> 标签：c#, windows-runtime, windows-store-apps, microsoft.ink

我正在尝试将 Ink 功能应用于我的 Windows Store 应用程序。

基于[MSDN 中的 Simplified Ink Sample](http://code.msdn.microsoft.com/windowsapps/Input-simplified-ink-sample-11614bbf)（注意我使用 C# 示例），我修改了 Scenario1.xaml.cs 中的第 51 行，`drawingAttributes.IgnorePressure = false;`以便使用 Stylus Pressure。

仅供参考，下面是第 46~52 行的代码块。

```
 // Initialize drawing attributes. These are used in inking mode.
        drawingAttributes = new Windows.UI.Input.Inking.InkDrawingAttributes();
        drawingAttributes.Color = Windows.UI.Colors.Red;
        double penSize = 2 + 2*PenThickness.SelectedIndex;
        drawingAttributes.Size = new Windows.Foundation.Size(penSize, penSize);
        drawingAttributes.IgnorePressure = false;
        drawingAttributes.FitToCurve = true; 
```

但笔画粗细并没有像我预期的那样改变。我`drawingAttributes.PenTip = PenTipShape.Circle;`在第 51 行之后立即添加，但压力不受影响。

我错过了什么吗？我的手写笔与 Fresh Paint 应用程序或其他压力敏感应用程序（我使用的是联想 x230t 平板电脑）正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:00:18.940

该示例中的 XamlInkRenderer 在绘制笔划时会忽略 DrawingAttribute.Pressure。每个笔画都以恒定宽度绘制，因此即使记录了压力，也不会使用它。

# css - 字体缺少特定语言的字形 - 在这种情况下我如何利用 css 回退？

> ID：14922815
> 
> 赞同：0
> 
> 时间：2013-02-17T15:40:54.593
> 
> 标签：css, georgian

我正在使用 Myriad Pro，对于格鲁吉亚语，它显示 [X][X][X] 块。

我想将 Myriad Pro 用于英语，但如何为格鲁吉亚语实施后备策略？

![在此处输入图像描述](../Images/747c138c1deaa3f28d2c27157811f842.png)

做字体系列：Myriad Pro、Arial、Serif 什么都没做。因为如果浏览器没有或理解它，这是跳过字体的机制......

我有哪些选择？

处理这个的正确方法是什么？

我真的很想避免使用php根据所选语言输出css字体系列的php/css ...有更清洁的解决方案吗？

泰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:23:57.953

由于您的屏幕截图包含一些格鲁吉亚字母，因此您的系统中必须有一些包含它们的字体（当然，除非它们在图像中）。这表明字体处理有问题。例如，当您指定 时，`font-family: Myriad Pro`浏览器应通过从其他字体中提取字符来处理该字体中不存在的字符。然而，众所周知，浏览器（尤其是 IE）经常无法做到这一点。

相对较少的字体包含格鲁吉亚字母。要获得良好（但不完美）的概述，请查看 Fileformat.info 页面上有关[格鲁吉亚字母 an 的字体支持](http://www.fileformat.info/info/unicode/char/10d0/fontsupport.htm)。

解决方案是明确指定包含格鲁吉亚字母的后备字体。Arial 不会这样做，因为它缺少它们。唯一（合理）安全的方法是通过`@font-face`. 如果您使用 Myriad Pro（一种纯无衬线字体）来处理拉丁字母，则最好使用 x 高度大致相同的无衬线字体。考虑使用[DejaVu](http://dejavu-fonts.org/wiki/Main_Page) Sans，一种不错的免费字体（和[FontSquirrel @font-face 生成器](http://www.fontsquirrel.com/fontface/generator)）。

你的 CSS 规则可能有

```
font-family: Myriad Pro, DejaVu Sans, sans-serif; 
```

# asp.net - 在 asp.net 中使用 cookie 自动登录用户（自定义登录）

> ID：14922822
> 
> 赞同：1
> 
> 时间：2013-02-17T15:41:44.950
> 
> 标签：asp.net, security, cookies, login, persistent

我在网上找不到我要找的东西，所以任何帮助都将不胜感激。我已经实现了一个**自定义登录**表单，用户在其中输入他的电子邮件和密码进行登录。然后我使用这些凭据查询数据库（密码经过哈希处理和加盐），如果两者都找到，那么我将 UserID 存储在会话状态中。如果用户关闭浏览器，则会话丢失，因此他必须重新登录。我了解了如何使用 cookie 来实现“记住我”功能，但我不知道我应该在 cookie 中存储什么以用于自动登录过程并使其安全。

PS：我知道 cookie 是什么以及它是如何工作的。我也知道不建议将用户凭据（电子邮件 + 密码）存储在 cookie 中。**我正在使用带有 C# 的 asp.net 4.0**

实际上，我正在寻找使用 cookie 的自动登录系统背后的逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:19:39.940

您应该只使用[FormsAuthentication](http://msdn.microsoft.com/en-us/library/twk5762b%28v=vs.100%29.aspx)来设置 cookie：

```
FormsAuthentication.SetAuthCookie(theUserID, true); 
```

然后把它拿回来：

```
string userId = HttpContext.Current.User.Identity.Name; 
```

如果您担心安全性，您可以考虑仅使用安全 cookie（您将只能通过 https 读取该 cookie）。

在相关帖子中有更多信息：[ASP .Net 中的手动访问控制](https://stackoverflow.com/questions/14629346/manual-access-control-in-asp-net/14630156#14630156)

**更新：**根据您的评论，您认为您不能在自定义登录表单中设置表单身份验证 cookie。所以我创建了一个空白的 ASP.NET 4 项目，在那里我创建了一个自定义登录——它将登录任何未经身份验证的用户。以下是三个部分：

（您的项目应该有类似的`web.config`东西，因为您的网站上有一个人们登录的表单）：

```
<authentication mode="Forms"></authentication> 
```

代码正面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="default.aspx.cs" Inherits="emptyWebApp._default" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Example</title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
     Username: <asp:Label ID="_username" runat="server"></asp:Label>
    </div>
    </form>
</body>
</html> 
```

后面的代码：

```
using System;
using System.Web;
using System.Web.Security;

namespace emptyWebApp
{
    public partial class _default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (HttpContext.Current.User.Identity.IsAuthenticated)
            {
                _username.Text = HttpContext.Current.User.Identity.Name;
            }
            else
            {
                _username.Text = "Not logged in";
                FormsAuthentication.SetAuthCookie("CookieMan", true);
            }
        }
    }
} 
```

如您所见，您可以`FormsAuthentication.SetAuthCookie`在自己的自定义身份验证功能中设置身份验证 cookie，即使是像这样不合理的。

在这种情况下，当他们第一次点击页面时，它会显示`Username: Not logged in`，然后它会将他们作为“CookieMan”登录。刷新页面将显示`Username: CookieMan`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T17:34:47.333

我找到了关于这个问题的非常好的文章。我建议全部阅读！

*   [http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/](http://fishbowl.pastiche.org/2004/01/19/persistent_login_cookie_best_practice/)
*   [关于这种持久登录方法（“记住我”），我应该注意什么问题？](https://stackoverflow.com/questions/12989778/any-gotchas-i-should-be-aware-of-regarding-this-approach-to-persistent-logins?rq=1)
*   [散列“记住我”cookie 令牌的最佳方法](https://stackoverflow.com/questions/8502972/best-way-for-hashing-a-remember-me-cookie-token/8508213#8508213)
*   [基于表单的网站身份验证权威指南](https://stackoverflow.com/questions/549/the-definitive-guide-to-forms-based-website-authentication)
*   [为网站实施“记住我”的最佳方式是什么？](https://stackoverflow.com/questions/244882/what-is-the-best-way-to-implement-remember-me-for-a-website)
*   [http://jaspan.com/improved_persistent_login_cookie_best_practice](http://jaspan.com/improved_persistent_login_cookie_best_practice)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:35:35.993

每当我这样做时，我只是组成一些随机的“SessionId”guid 并使用该值。

如果您的代码可以保留列表 sessionId/UserId 对并根据需要使它们过期。

# mda - Eclipse EMF 与 OMG MDA 标准有多大关系？

> ID：14922826
> 
> 赞同：2
> 
> 时间：2013-02-17T15:42:01.030
> 
> 标签：mda, model-driven-development, mde

我正在寻找一种新的 MDA 工具来尝试建模和代码生成。这还不是针对任何与工作相关的项目，而是出于测试目的。到目前为止，我只使用 Merode 方法（使用 jMermaid 进行建模和随附的代码生成器），但想尝试一些新的东西。

由于 EMF 集成在 Eclipse 中，我看到了很多积极的理由来尝试它。但是在阅读了一些文档和在线文章之后，我想知道它有多少采用 OMG MDA 标准，又有多少没有。

例如我发现以下文字

> 另一方面，如果您已经接受了建模的想法，甚至是模型驱动架构 (MDA) 的大图，3 您应该将 EMF 视为一种正在朝这个方向发展的技术，但比直接来得慢广泛采用。您可以将 EMF 视为辅助轮上的 MDA。

在[http://www.informit.com/articles/article.aspx?p=1323360&seqNum=2](http://www.informit.com/articles/article.aspx?p=1323360&seqNum=2)

但是我无法找到一份简明的清单，说明 OMG 标准的哪些要点得到了实施，哪些要点被遗漏或解释不同。任何人都可以帮忙吗？（如果有其他更推荐的工具，我总是愿意接受建议。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:22:44.283

关系很小。EMF 是一个用于创建（元）模型的框架，具有非常基本的代码生成功能（基本上只有 Java 直接翻译）。EMF 的目标不是成为一个 MDA 框架，而是成为其他工具可以在其上构建更复杂解决方案的构建块（例如，查看开源 Eclipse Acceleo 工具）。

MDA 只是一种哲学。它本身甚至不是一个特定的方法。MDA 指南，即解释 MDA 的 OMG 标准文档，只是使用 OMG 技术进行模型驱动开发的一组原则，但没有更进一步（如果需要，您可能想检查[所有这些 MD* 首字母缩略词之间的区别](http://modeling-languages.com/clarifying-concepts-mbe-vs-mde-vs-mdd-vs-mda/)）。

因此，您可以找到遵循 MDA 原则的基于 EMF 的工具，但 EMF 本身并不假装这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-20T10:00:17.793

EMF 对应于简化的 OMG 的 MOF 实现（[http://www.omg.org/mof/](http://www.omg.org/mof/)），提供了表达自定义元模型和生成 java 组件以实例化模型的工具。

MDA 是一种特殊的模型驱动哲学，它基于多种模型（CIM、PIM、PSM...），旨在提供一种从独特功能模型 (PIM) 中针对多种技术架构 (PSM) 的方法。

您可以将 EMF 用于任何模型驱动的哲学 MBE、MDE、MDD 或 MDA。它是允许您定义自己的元模型和模型的基本构建块。简单地说，EMF 提供了模型，您可以将它用于任何模型驱动的方法，包括 MDA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T13:47:47.680

在 EMF FAQ 中有一个问题[“EMF 与 OMG MDA 有什么关系？”](https://wiki.eclipse.org/EMF/FAQ#What_is_the_relationship_of_EMF_to_OMGTM_MDATM.3F) 哪个国家

> “本质上，EMF**支持**关键的 MDA 概念，即使用模型作为开发和集成工具的输入，这些工具产生多种编程语言（在 Eclipse EMF 本身的情况下是 Java）或数据交换格式 (XML) 表示。”

# python - 将自定义视图添加到 Django 管理员

> ID：14922828
> 
> 赞同：2
> 
> 时间：2013-02-17T15:42:16.293
> 
> 标签：python, django

我正在尝试让自定义视图在 Django 管理员中工作。我有下一个模型：

```
class Reseller(models.Model):
    first_name = models.CharField(max_length=64, verbose_name='First Name')
    last_name = models.CharField(max_length=64, verbose_name='Last Name')
    email = models.CharField(max_length=64, verbose_name='E-mail')
    password = models.CharField(max_length=64, blank=True, editable=False) 
```

这就是我添加自定义按钮（重置密码）的方式。自定义视图（扩展 change_form.html）我有这个：

```
{% extends "admin/change_form.html" %}

{% load i18n %}

{% block object-tools %}
{% if change %}
  <ul class="object-tools">
  <li><a href="reset_password/">Reset Password</a></li>
  </ul>

{% endif %}
{% endblock %} 
```

这就是我所拥有的`admin.py`

```
from django.conf.urls.defaults import patterns
from django.contrib import admin
from django.shortcuts import redirect
from django.shortcuts import render_to_response
from django.template import RequestContext

from myapp.resellers.models import Reseller

class ResellerAdmin(admin.ModelAdmin):
    list_display = ('id', 'first_name', 'last_name', 'email')
    list_filter = ('email')
    search_fields = ('first_name', 'last_name', 'email')
    ordering = ['-id', ]

    def get_urls(self):
        urls = super(ResellerAdmin, self).get_urls()
        my_urls = patterns('',
                           (r'(?P<id>\d+)/reset_password/$',
                            self.admin_site.admin_view(self.reset_password)),
                        )
        return my_urls + urls

    def reset_password(self, request, id):
        entry = Reseller.objects.get(pk=id)
        [...GENERATE AND SEND PASSWORD FUNCTION GOES HERE...]
        return redirect(entry)

admin.site.register(Reseller, ResellerAdmin) 
```

当我运行此代码时，我得到下一个：`argument of type 'Reseller' is not iterable`. 我是 Django 的新手，所以基本上某处有一个愚蠢的错误，所以请不要投反对票:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T17:03:27.103

如果您仅将模型作为参数传递给模型，则将调用`redirect`模型[get_absolute_url()](https://docs.djangoproject.com/en/dev/ref/models/instances/?from=olddocs#django.db.models.Model.get_absolute_url)方法，您可能尚未定义该方法（请参阅[文档](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#redirect)）。
所以继续`get_absolute_url()`往你的 Reseller 类中添加一个方法。

# android - 配置 ActionBarSherlock 和 HoloEverywhere

> ID：14922829
> 
> 赞同：1
> 
> 时间：2013-02-17T15:42:15.903
> 
> 标签：android, eclipse, actionbarsherlock

我正在尝试在[https://stackoverflow.com/a/10888882/2031219](https://stackoverflow.com/a/10888882/2031219)之后配置 ActionBarSherlock 和 HoloEverywhere 。

但是，在第 6 步和第 7 步中，当我单击项目属性中的 Android 标题时，我的 Eclipse 停止工作。

这可能是问题所在？

谢谢

# javascript - 如何使用 insertBefore 添加新元素？

> ID：14922837
> 
> 赞同：2
> 
> 时间：2013-02-17T15:43:22.613
> 
> 标签：javascript

我正在尝试向标签添加文本，但我不断收到错误消息

```
NOT_FOUND_ERR: DOM Exception 8
Error: An attempt was made to reference a Node in a context where it does not exist. 
```

这是javascript：

```
var getexp = document.getElementsByTagName("td")[219];
few lines of code here...
var fsptag = document.createElement('text');
fsptag.innerHTML = append1 +fspRound +append2 +ratioRound;

var fsptext = fsptag.innerHTML;
fsptag.appendChild(fsptext);
getexp.insertBefore(fsptag,getexp.childNodes[10]); 
```

我是新手（只有几天）。据我了解`getexp.childNodes[10]`，应该是`getexp`. 它是一个子节点。这里的任何帮助将不胜感激。谢谢。

编辑：HTML

```
<td colspan=2>&nbsp;&raquo;&nbsp;
<b>Combat level: 20</b> (311855484)&nbsp;<font style='font-size:8px;color:#696156'>+13144516</font>
<BR><BR>&nbsp;&raquo;&nbsp;
<b>Troops ready:</b> 100% 
<BR>&nbsp;&raquo;&nbsp;
<b>Mana:</b> 40 / 40<BR>&nbsp;&raquo;&nbsp;
<b>Location:</b> <a href=map.php?cx=50&cy=50>Empire Capital</a>
<BR><BR><BR><BR><BR>
<center><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="460" height="54" id="showarmy" align="middle"> 
```

HTML 看起来像这样。它来自这里 ( [http://www.lordswm.com/pl_info.php?id=2255](http://www.lordswm.com/pl_info.php?id=2255) ) 在第 204 行的源代码中。

编辑：

```
var append1 = "<br><br>&nbsp;&raquo;&nbsp;<b>Total FSP: </b>";
var append2 = "<br>&nbsp;&raquo;&nbsp;<b>Ratio: </b>";
var fsptag = document.createElement('text');
fsptag.innerHTML = append1 +fspRound +append2 +ratioRound;       //fspRound & ratioRound are numbers 
```

然后当我使用它时：`getexp.appendChild(fsptag);`附加的文本（html？）在最后创建，即在`<object>`（html代码的最后一行）之后。我希望它出现在 5 个`<br>`标签之间（html 代码的第 8 行）。抱歉耽搁了，我自己想弄清楚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T16:32:26.903

[`createElement(tag_name)`](https://developer.mozilla.org/en-US/docs/DOM/document.createElement)创建一个由`tag_name`. Afaik，[`<text>`](https://developer.mozilla.org/en-US/docs/SVG/Element/text)只能出现在`<svg>`. 您的目的是创建自定义 HTML 标记吗？如果是这样，您需要使用其他名称。

[`appendChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)将*元素*作为参数，而不是*字符串*。同样，当一个元素被添加一次时，它会从它的原始位置移动，即`appendChild`'s 参数中使用的变量的值变为`null`. 这意味着，如果您想插入一个新元素两次，则必须在再次插入之前重新创建它。

在现代浏览器中，该[`childNodes`](https://developer.mozilla.org/en-US/docs/DOM/Node.childNodes)集合还包含标签之间的空格和换行符，因此您可能需要重新计算[`insertBefore()`](https://developer.mozilla.org/en-US/docs/DOM/Node.insertBefore).

* * *

**编辑**

编辑帖子后，它更容易理解。我为你存储了一个简化的[小提琴](http://jsfiddle.net/ueRB7/)。它可能会关闭您需要的东西？

小提琴中的基本代码是这样的：

```
var getexp = document.getElementsByTagName("td")[219];
var fsptag = document.createElement('div');
fsptag.innerHTML = append1 + fspRound + append2 + ratioRound;
getexp.insertBefore(fsptag, getexp.childNodes[10]); 
```

# cakephp - 如何在同一个表中保存多个表单，如 phpmyadmin

> ID：14922838
> 
> 赞同：0
> 
> 时间：2013-02-17T15:43:28.180
> 
> 标签：cakephp

我正在使用 CakePHP 2.3 版

当您为 1 个表输入多个表单时，我一直想知道如何保存像 phpmyadmin 这样的循环表单。

假设我有一个带有 id、name 和 content 列的表 products。为了保存我的数据，我用这 3 个输入乘以 3 制作了一个表格。所以这给了我这样的东西：

```
<?php echo $this->Form->create('Product'); ?>

<!-- Form for product 1 -->
<?php echo $this->Form->input('name', array('label' => "Name")); ?>
<?php echo $this->Form->input('content', array('label' => "Content")); ?>
<?php echo $this->Form->input('id'); ?>

<!-- Form for product 2 -->
<?php echo $this->Form->input('name', array('label' => "Name")); ?>
<?php echo $this->Form->input('content', array('label' => "Content")); ?>
<?php echo $this->Form->input('id'); ?>

<!-- Form for product 3 -->
<?php echo $this->Form->input('name', array('label' => "Name")); ?>
<?php echo $this->Form->input('content', array('label' => "Content")); ?>
<?php echo $this->Form->input('id'); ?>

<?php echo $this->Form->end('done'); ?> 
```

当然这是行不通的，我不知道如何完成这项工作。

有人可以告诉我它是如何工作的吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:51:31.887

对方法执行以下调用`input()`：

```
...
echo $this->Form->input('Product.0.name', array('label' => 'Name'));
echo $this->Form->input('Product.0.content', array('label' => 'Content'));

echo $this->Form->input('Product.1.name', array('label' => 'Name'));
echo $this->Form->input('Product.1.content', array('label' => 'Content'));

echo $this->Form->input('Product.2.name', array('label' => 'Name'));
echo $this->Form->input('Product.2.content', array('label' => 'Content'));
... 
```

前面的代码应该输出以下表单元素

```
<input type="text" id="Product0name" name="data[Product][0][name]">
<input type="teaxtarea" id="Product0Content" name="data[Product][0][Content]">

<input type="text" id="Product1name" name="data[Product][1][name]">
<input type="teaxtarea" id="Product1Content" name="data[Product][1][Content]">

<input type="text" id="Product2name" name="data[Product][2][name]">
<input type="teaxtarea" id="Product2Content" name="data[Product][2][Content]"> 
```

`saveAll()`它可以很容易地由您的控制器使用方法发布和保存。还可以在以下位置查看 CakePHP 文档：[Field-naming-conventions](http://book.cakephp.org/2.0/en/core-libraries/helpers/form.html#field-naming-conventions)

# php - 在 $_POST 变量中使用引号、撇号或都不使用有什么区别？

> ID：14922840
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:43:31.437
> 
> 标签：php, post

我最近发布了一个代码不起作用的[问题](https://stackoverflow.com/questions/14922624/why-does-this-code-hash-null)，并建议我在 $_POST 变量中添加撇号。

### 我正在使用

```
$_POST[variable] 
```

### 人（？）推荐

```
$_POST['variable'] 
```

[PHP.net 推荐](http://php.net/manual/en/reserved.variables.post.php)

```
$_POST["variable"] 
```

你用什么，为什么？
使用其中一种时会出现什么差异？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:47:47.550

`"`使用和之间没有本质区别`'`。数组键可以是整数或字符串。字符串在 PHP 中被引用。在这种情况下不使用引号是可行的，但 PHP 首先检查键是否为常量，然后再将其解释为字符串。[在 PHP 文档中不鼓励](http://php.net/manual/en/language.types.array.php#language.types.array.donts)不引用数组键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T15:48:01.143

第一种方法会抛出一个通知：

```
[18-Feb-2013 02:46:06] PHP Notice:  Use of undefined constant variable - assumed 'variable' in /Users/Aram/Development/Web/test.php on line 6 
```

此外，您不能使用连字符，因为它会将它们分开处理。

```
[18-Feb-2013 02:46:56] PHP Notice:  Use of undefined constant variable - assumed 'variable' in /Users/Aram/Development/Web/test.php on line 6
[18-Feb-2013 02:46:56] PHP Notice:  Use of undefined constant name - assumed 'name' in /Users/Aram/Development/Web/test.php on line 6 
```

使用单引号，因为它比双引号更简单，并且不需要使用 shift 键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T15:49:25.333

这与 $_POST 变量无关。
它是关于**字符串**的。字符串作为**数组键**是严格的。

您在这里将字符串作为数组键 - 因此，您必须将它们格式化为字符串。
要格式化字符串，您可以使用任何引号，没有区别。

`variable`没有引号实际上是一个**常数**。

您必须省略引号的唯一情况是双引号字符串：

```
echo "Hello $_GET[name], howdy?"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T15:50:12.720

使用`$_POST[variable]`if`variable`是常量或变量的名称：$var。

使用`$_POST["variable"]`或`$_POST['variable'] if`变量`是一个字符串。

# node.js - Node.js socket.io 服务器回调不起作用

> ID：14922841
> 
> 赞同：6
> 
> 时间：2013-02-17T15:43:32.783
> 
> 标签：node.js, socket.io

我正在开发一个简单的 Node.js 双向客户端\服务器通信通道，我正在尝试在服务器上使用*socket.io ，在客户端上使用**socket.io-* client。

我已经插入了下面的代码，你会看到它是非常基本的东西，我在我的本地机器上运行这两个 - 以尽量减少复杂性。

我看到的行为是：

1.  我启动服务器。
2.  服务器将*“服务器启动”*记录到控制台。
3.  我启动客户端。
4.  客户端记录*“服务器准备就绪！”*
5.  没有其他事情发生...

我期望服务器记录*“客户端已准备好！”* 消息，然后是内容（*'Ready received'*）。

我什至使用 WireShark 来嗅探这条线，它确实看起来客户端正在按设计发出消息 - 但服务器上的回调没有触发。

我正在运行带有*express v3.1.0*、*socket.io v0.9.13*和*socket.io-client v0.9.11 的**节点*v0.8.4 （全部通过*npm*安装）。

 ***这是服务器代码...

```
var http = require('http'),  
    express = require('express'),
    app = express(),
    server = http.createServer(app);

app.configure(function(){
  app.use(express.static(__dirname + '/public'));
});

server.listen(8080);
console.log("Server started");

var io = require('socket.io').listen(server);

io.sockets
     .on('connection', function(socket){ 
          socket.emit('server ready', { msg: 'ready' }) ;
      })

     .on('comms', function(content) {
          console.log('Client is ready!');
          console.log(content);
     }); 
```

这是客户端代码...

```
 var clientio = require('socket.io-client');
    var socket = new clientio.connect('http://localhost', { port: 8080 });

    socket
     .on('server ready', function(data){
          console.log('Server is ready!');
          socket.emit('comms', 'Ready received');
    })  

     .on('connect-error', function(error) {
          console.log('Connection Error\n' + error);
    })

     .on('error', function(error) {
          console.log('Socket Error\n' + error);
    }) 
```

*socket.io*和*socket.io-client*的文档和示例都有些混乱（出于慈善目的），它们似乎有点移动目标......但据我所知，我认为这应该可行。

我希望有人能给我建议，我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T16:46:39.563

希望这或多或少地在做你需要做的事情。只是几个小改动。

**应用程序.js**

```
var app     = require('express')()
    , server  = require('http').createServer(app)
    , io      = require('socket.io').listen(server);

    // using 'connect' to handle static pages
    app.use(require('connect').static(__dirname + '/public'))
    server.listen(8080);

    app.get('/', function (req, res) {
        res.sendfile(__dirname + '/index.html');
    });

    io.sockets.on('connection', function (socket) {
        socket.emit('server ready', { msg: 'ready' });

        socket.on('comms', function(content) {
            console.log(('Client is ready\n'));
            console.log(content);
        });
    }); 
```

**索引.html**

```
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js">

</script>

<script>
window.jQuery || document.write('<script src="js/jquery-1.8.3.min.js"><\/script>')
</script>

<script src="/socket.io/socket.io.js"></script>
</head>

<body>
<script>
(function (d, b) {

    function bindEvents() {
        function doSomething(msg) {
            $.each(msg, function (key, value) {
                console.log('doSomething...');
                $("body").append("<p>" + value + "</p>")
            });
        };

    // var socket = io.connect();
    var socket = io.connect('http://localhost');

    socket.on('server ready', function (msg) {
        console.log('Server is ready!\n', msg);
        doSomething(msg);
        socket.emit('comms', {
            msg: 'Client is Ready'
        });
    });

    socket.on('connect-error', function (err) {
        console.log('Connection Error\n', err);
    });

    socket.on('error', function (err) {
        console.log('Connection Error\n', err);
    });
};

$(document).ready(function () {
    bindEvents()
});

})(jQuery, this)
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T15:52:29.683

在您的服务器中，您有以下代码：

```
io.sockets
 .on('connection', function(socket){ 
      socket.emit('server ready', { msg: 'ready' }) ;
  })

 .on('comms', function(content) {
      console.log('Client is ready!');
      console.log(content);
 }); 
```

你应该做的是这样的：

```
io.sockets.on('connection', function(socket){
    socket.emit('server ready', { msg: 'ready' });

    socket.on('comm', function(content){
        console.log('Client is ready!');
        console.log(content);
    });

}); 
```***

# vb.net - 在 SQL 选择查询中使用冒号（非绑定）

> ID：14922842
> 
> 赞同：0
> 
> 时间：2013-02-17T15:43:49.593
> 
> 标签：vb.net, sqlite, datatable

*   语言：VB.Net
*   数据库：SQLite
*   IDE：Visual Studio 2012

我正在解析一个文件夹并放置文件名 - 带有完整路径到一个表中。

我从 Visual Studio 调试器收到以下错误：

**无法解释位置 14 处的标记 ':'**。

代码行是：

```
rowsFound = Me.Select("FileName = """ + fi.FullName + """") 
```

评估为：

```
rowsFound = Me.Select("FileName = "G:\Dropbox\VirtualDJ\Tracklisting\2008-02-02 11th Birthday.m3u"") 
```

位置 14 是路径中驱动器号分隔符的位置。

虽然不是主键，但我使用完整路径/文件名作为唯一标识符，并且在重新扫描文件时，在添加新 DataRow 之前检查文件是否存在。

我在 Access 2010 中对此进行原型设计没有问题，但需要迁移到 VB.net，因为我无法让 ID3 库与 VBA 一起使用。但是，无法通过基本的查找内容有点令人讨厌。

任何帮助，将不胜感激。

干杯，

罗伊

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T16:01:06.183

尝试用单引号包围路径：

```
Me.Select("FileName = '" + fi.FullName + "'") 
```

从您提到的`apostrophe`作为文件名的一部分的评论中，您需要对其进行转义：

```
Me.Select("FileName = '" + fi.FullName.Replace("'","''") + "'") 
```

# windows - DirectX 诊断模式不适用于 Win32 ( ? )

> ID：14922845
> 
> 赞同：1
> 
> 时间：2013-02-17T15:43:57.160
> 
> 标签：windows, directx, direct3d

我正在使用 Windows 8 上的 DirectX 11 程序，我认为顶点着色器存在问题。我尝试启动 DirectX 诊断模式 ([Alt]+[F5])，虽然如果打开诊断模式，程序将正常运行而不会引发异常，但它总是会在调用“CreateSwapChainForHwnd”时崩溃，并显示以下错误消息

> MyApplication.exe 中 0x0097C004 处的未处理异常：0xC0000096：特权指令。

DirectX 调试是否根本不适用于 Windows 应用商店应用程序？它似乎在特定的 Win32 应用场景中运行良好，但我似乎遇到了许多它不起作用的场景。

更新：

除其他外，我安装了 DirectX 调试符号并获得了更详细的消息。

> MyApplication.exe 中 0x000007FDED063589 (dxgi.dll) 处的未处理异常：0xC0000005：访问冲突读取位置 0x0000000000000000。

因此，从微软端的代码来看，它看起来是一个空引用异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:53:49.373

我认为您的问题是调试器不喜欢 CreateSwapChainForHwnd()，正如其他人发现的那样：[Visual Studio 11's Graphics Debugger 的目标应用程序要求](https://stackoverflow.com/questions/9696302/requirements-for-target-application-for-visual-studio-11s-graphics-debugger)

我的代码调用 D3D11CreateDevice() 后跟 IDXGIFactory::CreateSwapChain() 并且调试器适用于桌面 win32 应用程序，所以试试吧。

您让它在哪些特定的 Windows 应用商店应用程序场景中工作？我有完全相反的问题 - 我无法让 Alt-F5 调试器完全适用于 Windows 商店应用程序，但它适用于桌面 win32 应用程序。

# count - SPARQL 解析错误：意外终端

> ID：14922847
> 
> 赞同：3
> 
> 时间：2013-02-17T15:44:18.237
> 
> 标签：count, sparql, gruff

我一直在使用 gruff 创建和执行一些简单的 SPARQL 查询，但遇到了一些麻烦。以下查询有效（省略了前缀）：

```
SELECT ?k
WHERE
{ ?k  rdf:type  uw:pcservice . } 
```

但是，当我引入 COUNT 函数时，如下所示，我在 gruff 中收到以下错误：

错误：解析错误：意外终端（（值：：|（|）。预期终端：（* varname 减少不同）。[条件类型：sparql-parse-error-unexpected-terminal]

```
SELECT (COUNT(?k) AS ?count)
WHERE
{ ?k  rdf:type  uw:pcservice . } 
```

不确定是什么原因造成的。任何线索将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:13:06.117

鉴于该错误听起来该工具不支持 SPARQL 1.1。它期待一个 vanilla `SELECT [*|varname|reduced|distinct]`，不包括聚合和分配。

# php - url php中的哈希ID

> ID：14922850
> 
> 赞同：3
> 
> 时间：2013-02-17T15:44:28.953
> 
> 标签：php

在我的网站上登录的用户可以创建文档，就像在 Google Docs 上一样。该文档可以由用户公开，或私有（默认）。文档存储在这样的数据库表中：

```
| id | title | content | public | owner |
| 1  | asd   | asd     | 1      |  1    |
| 2  | asd   | asd     | 0      |  1    |
| 3  | asd   | asd     | 0      |  2    | 
```

如果 public 等于 1，它是一个公共文档，可以通过任何用户的链接查看：site.com/documents/id

问题是，即使文档可以公开，我也不希望用户能够一直将 url ID 增加 1 以访问所有公开文档：

*   site.com/documents/1
*   site.com/documents/2
*   site.com/documents/3

等等...

所以也许我应该散列 ID 或类似的东西？像这样：

```
<?php echo 'site.com/documents/'.md5($id); ?> 
```

问题是，我无法弄清楚它在服务器端是哪个ID，因为它是散列的......

我能做些什么来解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:56:42.643

根据您的安全要求，您应该确保您的文档 ID 实际上是随机的且**不可猜测**。如果您只是简单地对自增 ID 进行散列，则生成的散列可能**看起来是随机**的，但是一旦有人注意到您只是在散列递增的数值（并正确猜测您的散列算法），就很容易猜测可能的文档 ID。

为此，您可以简单地散列随机数（确保数据库中没有散列冲突），或使用 UUID（有关如何生成它们的示例，请参阅[此问题）。](https://stackoverflow.com/questions/2040240/php-function-to-generate-v4-uuid)

为了将散列标识符映射到现有文档，只需将散列与文档一起存储在数据库中（最好使用散列作为主键）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T12:45:46.140

MD5 不适用于散列数字，任何人都可以反转数字 md5。我会推荐一些更强大的东西，比如 SHA。（您还可以加密整个 URL，以提高安全性，因为它不容易被破解 - 它不会占用任何额外的空间，因为无论散列多少数据，所有散列的大小都是相同的）

您需要将哈希存储在数据库中，并且仅将其存储用于公共文件。因此，任何具有以下 URL 结构的 url：

```
"site.com/documents/65hd83jd8h..." 
```

您可以在数据库中查找，因为哈希是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-17T16:06:55.327

您如何验证所有者正在查看私人文档？

虽然拥有随机 ID 肯定有助于防止轻易猜测文档 ID，但您似乎正在通过默默无闻来看待安全性。

在您的文档控制器中，您需要检查是否 public == 0 that owner == $logged in user。在此方法中，您还将验证您的唯一文档 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T15:50:14.390

你绝对应该散列它。请注意，如今 md5 不够安全，因此您可能想看看 Sha 或 Blowfish（即使后者在那里看起来有点矫枉过正）。

然后，您只需将哈希存储在包含文档属性的数据库表中。

否则，您可以自己创建一个随机散列来识别文档并使用它而不是 ID（并且显然检查墨菲没有做到，因此有两个具有相同散列的文档）。

# sql - 从多个 SQL 中创建一条记录

> ID：14922854
> 
> 赞同：0
> 
> 时间：2013-02-17T15:44:58.220
> 
> 标签：sql, libreoffice

我的最终目标是创建一个平面输出文件/表来导出。我有两张表，我想将它们组合在一起，如下所示。

人员表（AccountId 唯一）

```
AccountId
Name 
```

我有一个名为 BillDt 的第二张表（很多到 accountid - 可能超过 2 个）

BillDt 表

```
AccountId
BillDt 
```

想要的输出结果是：AcctId, Name, 1stBillDt, 2ndBillDt

如果有 3 个或更多，我不在乎 2ndBill 日期是否实际上是最后一个。我可以将结果放回人员表或新表中。寻找 SQL 来执行此操作。我正在使用 LibreOffice Base 4.0.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:49:24.347

假设您在 BillDt 表中有表示第 1、第 2、第 3 个条目的内容，您可以使用如下所示的内容

```
SELECT person.accountID, person.Name, CASE WHEN BillDt.OrderKey = 1 THEN BillDt ELSE '' END AS 1stBillDt, CASE WHEN BillDt.OrderKey = 2 THEN BillDt ELSE '' END AS 2ndBillDt
FROM Person
 INNER JOIN Person.AccountID ON BillDt.AccountID 
```

# php - PHP 中的数据标准？

> ID：14922855
> 
> 赞同：0
> 
> 时间：2013-02-17T15:45:05.027
> 
> 标签：php, mysql, codeigniter

这可能是一个愚蠢的问题，但我无法找到任何答案。所以我转向我总能找到答案的地方。我正在使用 CodeIgniter 框架。我想知道类返回数据是否有标准？

有时我将数据作为数组返回（无论是多维还是单维），有时我将数据作为对象返回。

```
$query = $this->db-query($sql);
$result = $query->result(); // returned as object    
foreach( $result as $row)
{
  $row->title
  $row->body
} 
```

或者

```
$result = $query->result_array(); //multidimensional array
foreach($result as $row)
{
  $row['title']
  $row['body']
} 
```

哪个更适合模板？或者各自的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:47:22.213

当您的对象不是真实对象而只是伪装的数组时-最好将其设为显式数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:50:24.163

您可以将对象用作简单的容器值（尽管为此使用数组可能更容易）。在我看来，使用数组还是标准对象主要取决于您的个人喜好。关于干净的代码，唯一重要的一点是**一致**地使用数组或对象（以避免不必要的混淆）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T15:47:02.657

对象**实际上并不**意味着具有公共属性的简单容器，而数组是。因此，您应该使用数组。

出于造型目的并没有真正改变那么多。

# networking - 在同一台机器上的两个 Tap 设备之间 Ping

> ID：14922858
> 
> 赞同：3
> 
> 时间：2013-02-17T15:45:23.263
> 
> 标签：networking

我的机器上有两个虚拟 TAP 接口 tap0 和 tap1。它们的 IP 分别为 10.0.0.1 和 10.0.0.2。它们都使用 socat 相互连接。两者都有网络掩码 255.255.255.0 （因此在同一个子网上）。使用此设置，我尝试通过 tap0 ping 10.0.0.2，反之亦然。由于某种原因，这似乎不起作用。尽管 tcpdump 显示从 tap0 到达 tap1 的 ARP 数据包，但没有 ARP 回复，因此没有 ICMP 请求，因此也没有 ICMP 回复。使用 TUN 设备而不是 TAP 设备绕过 ARP 请求/响应周期，但现在 ICMP 请求显示在 tap1 上，没有返回 ICMP 响应。

我尝试了一些方法，例如启用 ip_forward ( echo 1 > /proc/sys/net/ipv4/ip_forward) 和禁用反向路径过滤 ( echo 0 > /proc/sys/net/ipv4/conf/tap0/rp_filter 和 echo 0 > /proc/sys/net/ipv4/conf/tap1/rp_filter ）。

以下是重现我的问题的命令：

```
sudo socat TUN:10.0.0.1/24,tun-type=tap TUN:10.0.0.2/24,tun-type=tap
sudo ifconfig tap0 10.0.0.1 netmask 255.255.255.0
sudo ifconfig tap1 10.0.0.2 netmask 255.255.255.0
ping -Itap0 10.0.0.2
tcpdump -Itap0 -n
tcpdump -Itap1 -n 
```

# sql-server - 如何在 sql server 中选择输出标量值？

> ID：14922859
> 
> 赞同：0
> 
> 时间：2013-02-17T15:45:32.027
> 
> 标签：sql-server, tsql, scalar

嗨，我还是 TSQL 的新手。如何输出标量变量以便我的 vb 代码可以访问它？

在 VB 中，我使用 rs 方法。在这种情况下，我必须创建 3 个 rs 才能访问下面的数据。我想要一个存储过程，它可以在不使用多个 rs 的情况下为我提供所需的 4 个值。

```
Create PROCEDURE [dbo].[sp_tblTransaction_GET_All_Totals]

@TransID bigint

AS

Declare @MyTotalCharges as money 
Declare @MyTotalDiscounts as money 
Declare @MyTotalPayments as money 

Declare @TotalCharges as money
Declare @TotalDiscounts as money
Declare @TotalPayments as money
Declare @Balance as money

SELECT     @MyTotalCharges = SUM(Amount) 
FROM         tblTransactionDetails
WHERE     (TransID = @TransID)

SELECT     @MyTotalDiscounts = SUM(Amount) 
FROM         tblTransaction_DP
WHERE     (TransID = @TransID)

SELECT     @MyTotalPayments = SUM(Amount)
FROM         tblPayments
WHERE     (TransID = @TransID)

--Below are the scalar values I need to be ouputed and accessed by my vb app.
--How can I output the values below?

@TotalCharges = @MyTotalCharges
@TotalDiscounts = @MyTotalDiscounts
@TotalPayments = @MyTotalPayments
@Balance = (@MyTotalCharges - @MyTotalDiscounts - @MyTotalPayments) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:21:58.750

你有没有尝试过？

```
SELECT @Balance AS 'Balance', @TotalCharges AS 'TotalCharges' ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-17T16:29:17.310

您需要将存储过程中的值作为表返回。将此添加到您的程序中。

```
SELECT
    @TotalCharges as [Total Charges],
    @TotalDiscounts as [Total Discounts],
    @TotalPayments as [TotalPayments],
    @Balance as [Balance] 
```

然后，您可以从 VB 应用程序执行存储过程并将表加载到 DataTable 中。

```
int transactionID = 0;
DataTable table = new DataTable();

using (var connection = new SqlConnection("connectionString")
using (var command = new SqlCommand("sp_tblTransaction_GET_All_Totals", connection)
{
    connection.Open();
    command.CommandType = CommandType.StoredProcedure;
    command.Parameters.AddWithValue("@TransID", transactionID);

    using (var adapter = new SqlDataAdapter(command))
    {
        adapter.Fill(table);
    }   
} 
```

[使用 SqlDataAdapter 从 C# 调用存储过程](https://stackoverflow.com/questions/10832620/calling-a-stored-procedure-from-c-sharp-using-sqldataadapter)

这是有关 SqlDataAdapter 的文档，其中将包含 C# 和 VB 中的示例。

[MSDN - SqlDataAdapter 类 (System.Data.SqlClient)](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)

# linux - 如何在 Ubuntu 的 Debian 包中添加依赖文件？

> ID：14922861
> 
> 赞同：0
> 
> 时间：2013-02-17T15:45:56.630
> 
> 标签：linux, ubuntu, debian

我正在尝试构建一个带有一些依赖项的 debian 包......让我知道如何在其中添加依赖项。我试过把它放在控制文件中......但它不起作用......我正在关注这个链接： [http ://www.webupd8.org/2010/01/how-to-create-deb-package-ubuntu- debian.html](http://www.webupd8.org/2010/01/how-to-create-deb-package-ubuntu-debian.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:08:51.733

在您的`debian/control`文件中，您需要一个类似于此的行：

`Depends: foo, bar, baz(>=1.0)`

编辑：`dpkg -i`不下载依赖项只有 apt-get 这样做。您通常需要`sudo apt-get install -f`在使用后运行，`dpkg -i`除非您将软件包添加到 apt 存储库并从那里安装

# twitter - Twitter引导手风琴奇怪的行为

> ID：14922862
> 
> 赞同：0
> 
> 时间：2013-02-17T15:45:57.843
> 
> 标签：twitter, twitter-bootstrap, scroll, accordion

我在我的项目中使用了 bootstrap 手风琴（折叠），但不幸的是结果不是想要的。我在手风琴里有大约 8 件物品，其中一些里面有很多文字（有时超过半页）。

我正在尝试折叠/展开手风琴中的项目，但这种行为完全奇怪且不可预测。我只是在他们的网站上复制了示例并添加了更多项目。我的期望是，每次我点击一个关闭的项目时，它都会打开，打开的 div 将获得焦点。有时我看到页面滚动非常快，焦点位于错误的位置或项目已打开，但页面上的焦点太低且标题不可见。

关于如何正确处理手风琴或正确行为的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T17:59:55.317

这是一个工作示例[http://jsfiddle.net/panchroma/RdK8t/](http://jsfiddle.net/panchroma/RdK8t/)

它直接取自[bootstrap 示例](http://twitter.github.com/bootstrap/javascript.html#collapse)，其中一个元素添加了扩展内容。

典型的代码是：

```
<div class="accordion" id="accordionParent"> <!-- start #accordionParent wrap -->

      <!-- start typical content group -->  
            <div class="accordion-group">
              <div class="accordion-heading">
                <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordionParent" href="#collapseOne">
                  Collapsible Group Item #1
                </a>
              </div>
              <div id="collapseOne" class="accordion-body collapse in">
                <div class="accordion-inner">
                        content
                </div>
              </div> 
            </div>  
       <!-- end typical content group -->

</div>  <!-- end accordionParent wrap --> 
```

您可以验证您的页面以确保没有嵌套问题，并仔细检查如果您没有使用完整的引导 js 文件，请确保您包含了转换插件。

希望这可以帮助！

# android - 主键自动增量不适用于android数据库？

> ID：14922863
> 
> 赞同：0
> 
> 时间：2013-02-17T15:45:58.953
> 
> 标签：android, android-sqlite

```
 public static final String Database_Name="content.db";
public static final int Database_Version=1;
public static final String Table_Name="images";
public static final String Column1="contentid";
public static final String Column2="content_type";
public static final String Column3="content";
public static final String Column4="has_update";
public static final String Column5="server";
public static final String Column6="_id";
public static final String Create_Database = 
        "CREATE TABLE " + Table_Name +
                " (" + Column6 + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                Column1 + " LONG, " + 
                Column2 + " TEXT NOT NULL, " + 
                Column3 + " TEXT NOT NULL, " + 
                Column4 + " INTEGER, " + 
                Column5 + " INTEGER); "; 
```

我正在使用上面的代码并执行 Create_Database 查询在 android 数据库中创建一个表，但是我在 logcat 中收到一个错误，说自动增量只能分配给一个整数主键？我在这里做错了什么？

```
02-17 21:08:27.016: E/SQLiteLog(8460): (1) AUTOINCREMENT is only allowed on an INTEGER PRIMARY KEY 
```

这是我在 logcat 中遇到的错误。任何帮助.....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T16:07:20.567

尝试这个

```
 public static final String Create_Database = 
    "CREATE TABLE " + Table_Name +
            " (" + Column6 + " INTEGER PRIMARY KEY, " +
            Column1 + " LONG, " + 
            Column2 + " TEXT NOT NULL, " + 
            Column3 + " TEXT NOT NULL, " + 
            Column4 + " INTEGER, " + 
            Column5 + " INTEGER " + ")"; 
```

声明为**INTEGER PRIMARY KEY**的列将[自动递增](http://www.sqlite.org/faq.html#q1)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-17T15:57:56.337

尽量`NOT NULL`防止第二个错误。

也试试这样`INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-15T08:49:20.653

尝试这个

整数主键自动增量 NULL

这个对我有用

# c - 这个 fork() 程序的输出

> ID：14922867
> 
> 赞同：2
> 
> 时间：2013-02-17T15:46:29.623
> 
> 标签：c, process, fork

```
#include<stdio.h>
#include<unistd.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>
#include<errno.h>
int main()
{
   printf("abcd");
   fork ();
   printf("pqrs\n");
   return 0;
} 
```

该程序给出的输出如下：

```
abcdpqrs
abcdpqrs 
```

但怎么可能呢？不应该是：

```
abcdpqrs
pqrs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-17T15:48:51.347

不

这是因为 fork 还复制了 printf 中使用的数据结构，保存了要打印的缓冲区。

如果你 fork 程序，缓冲区不会被刷新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-17T15:50:06.010

`printf`不一定`stdout`立即刷新，所以会发生“abcd”被缓冲直到执行下一个输出。由于稍后 fork 的两个“边”都进行了输出，因此两者也将清除“abcd”。

要使其按照您可能猜测的方式工作，请尝试手动冲洗；

```
int main()
{

   printf("abcd");
   fflush(stdout);
   fork ();
   printf("pqrs\n");
   return 0;
}

$ ./a.out 
abcdpqrs
pqrs 
```

# java - 如何在 Java 中从 XML 生成状态流程图？

> ID：14922879
> 
> 赞同：0
> 
> 时间：2013-02-17T15:47:53.887
> 
> 标签：java, dom, xml-parsing, stateflow

我创建了 Web 服务并以 XML 格式返回响应。从 XML 文件生成状态流程图的最佳工具是什么？

免费工具或库？

引导我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T15:57:56.663

为了即时构建图形图像，我使用[AT&T GraphViz](http://www.graphviz.org/Download.php)。

`.gv`在将它们发送到工具之前，您必须解析 XML 并生成文件`dot`。

**优点：** `.gv`文件是简单的文本文件，语法简单，非常直观。

**缺点：**您必须安装软件包，使用 windows 安装程序或 Linux 软件包，存在于非常大的 *nix 集上。

# jquery - jQuery从不同元素中的元素加载信息

> ID：14922882
> 
> 赞同：0
> 
> 时间：2013-02-17T15:48:06.740
> 
> 标签：jquery, jquery-get

如何从加载了 $.get 的链接中获取 href 值？我的脚本总是使用 div 中的值，而不是之后加载的值。

编码：

```
<html>
<body>
<div id="wrapper">
  <div id="more">
    content
  </div>
  <div class="paglink">
    <a href="/the/url/to/page/1">More</a>
  </div>
</div>
<script>
jQuery(document).ready(function($) {

     $(".paglink a").click(function(e) {
          e.preventDefault();
          $.get($(".paglink a").attr('href'), function(data){ 
            $(data).find("#more").appendTo("#more");
            $(".paglink").html($(data).find(".paglink").html());
          });     
     });

});
</script>
</body>
</html> 
```

被加载的页面：

```
<html>
<body>
<div id="wrapper">
  <div id="more">
    content
  </div>
  <div class="paglink">
    <a href="/the/url/to/page/2">More</a>
  </div>
</div>
</body>
</html> 
```

简而言之：我必须写什么而不是

```
$(".paglink a").attr('href') 
```

从新加载的链接中获取价值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T21:28:12.243

似乎您正在将元素动态加载到您的 html 中，这样新元素没有附加点击事件，因为您可能将其附加到 document.Ready()..

jQuery 有一个“on” API，您可以使用它来将点击事件附加到动态加载的 DOM 元素上。

**试试这个代码**

```
$(".paglink").on('click' , 'a', function(e) {
          e.preventDefault();
          $.get($(this).attr('href'), function(data){
              alert(data);
            $(data).find("#more").appendTo("#more");
            $(".paglink").html($(data).find(".paglink").html());
          });   
 }); 
```

这段代码是正确的

```
$(data).find("#more").appendTo("#more"); 
```

你只取属于`#more`element的 html 内容

[附加信息](http://api.jquery.com/on/)

# javascript - 为什么 solr 的回复不正确

> ID：14922885
> 
> 赞同：0
> 
> 时间：2013-02-17T15:48:19.370
> 
> 标签：javascript, solr

我向 solr 发出请求，我想在 biz_subject 列中查找以该字符串开头的所有记录 -`myel`但是当我测试此查询时，我发现 solr 给了我一些`myel`位于中间或末尾的记录！我不希望那样。

例如，当我搜索`evn`响应应该是`evno`，`evniiiii`依此类推，响应也给出了`limevnii`，`kisuevn`我不想要那些。

```
function triming()
{
   k++;
   xmlhttp.onreadystatechange = function() 
   { 
        if (xmlhttp.readyState==4 && xmlhttp.status==200) 
        {
           alert(xmlhttp.responseText);
           var  str = xmlhttp.responseText;
           var rsp = JSON.parse(str);

           var object;
           alert (rsp.response.numFound);
           //Pin marker on the maps
           for( var i = 0; i < rsp.response.numFound; i++) 
           {
              object = rsp.response.docs[i];
           }
           alert (rsp.response.docs[1].biz_subject);
            //title: object.biz_subject,                
        }
    }

    var url = "http://localhost:8983/solr/db/select?q=biz_subject:" + encodeURIComponent(newstr)+"*&wt=json&indent=true";
    //  alert (url);
        xmlhttp.open("GET", url, true);
        xmlhttp.send(); 
  } 
```

**架构.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!--
 Licensed to the Apache Software Foundation (ASF) under one or more
 contributor license agreements.  See the NOTICE file distributed with
 this work for additional information regarding copyright ownership.
 The ASF licenses this file to You under the Apache License, Version 2.0
 (the "License"); you may not use this file except in compliance with
 the License.  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
-->

<!--  
 This is the Solr schema file. This file should be named "schema.xml" and
 should be in the conf directory under the solr home
 (i.e. ./solr/conf/schema.xml by default) 
 or located where the classloader for the Solr webapp can find it.

 This example schema is the recommended starting point for users.
 It should be kept correct and concise, usable out-of-the-box.

 For more information, on how to customize this file, please see
 http://wiki.apache.org/solr/SchemaXml
-->

<schema name="db" version="1.1">
  <!-- attribute "name" is the name of this schema and is only used for display purposes.
       Applications should change this to reflect the nature of the search collection.
       version="1.1" is Solr's version number for the schema syntax and semantics.  It should
       not normally be changed by applications.
       1.0: multiValued attribute did not exist, all fields are multiValued by nature
       1.1: multiValued attribute introduced, false by default -->

  <types>
    <!-- field type definitions. The "name" attribute is
       just a label to be used by field definitions.  The "class"
       attribute and any other attributes determine the real
       behavior of the fieldType.
         Class names starting with "solr" refer to java classes in the
       org.apache.solr.analysis package.
    -->
    <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>
    <!-- The StrField type is not analyzed, but indexed/stored verbatim.  
       - StrField and TextField support an optional compressThreshold which
       limits compression (if enabled in the derived fields) to values which
       exceed a certain size (in characters).
    -->
    <fieldType name="string" class="solr.StrField" sortMissingLast="true" omitNorms="true"/>

    <!-- boolean type: "true" or "false" -->
    <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>

    <!-- The optional sortMissingLast and sortMissingFirst attributes are
         currently supported on types that are sorted internally as strings.
       - If sortMissingLast="true", then a sort on this field will cause documents
         without the field to come after documents with the field,
         regardless of the requested sort order (asc or desc).
       - If sortMissingFirst="true", then a sort on this field will cause documents
         without the field to come before documents with the field,
         regardless of the requested sort order.
       - If sortMissingLast="false" and sortMissingFirst="false" (the default),
         then default lucene sorting will be used which places docs without the
         field first in an ascending sort and last in a descending sort.
    -->    

    <!-- numeric field types that store and index the text
         value verbatim (and hence don't support range queries, since the
         lexicographic ordering isn't equal to the numeric ordering) -->
    <fieldType name="integer" class="solr.IntField" omitNorms="true"/>
    <fieldType name="long" class="solr.LongField" omitNorms="true"/>
    <fieldType name="float" class="solr.FloatField" omitNorms="true"/>
    <fieldType name="double" class="solr.DoubleField" omitNorms="true"/>

    <!-- Numeric field types that manipulate the value into
         a string value that isn't human-readable in its internal form,
         but with a lexicographic ordering the same as the numeric ordering,
         so that range queries work correctly. -->
    <fieldType name="sint" class="solr.SortableIntField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="slong" class="solr.SortableLongField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sfloat" class="solr.SortableFloatField" sortMissingLast="true" omitNorms="true"/>
    <fieldType name="sdouble" class="solr.SortableDoubleField" sortMissingLast="true" omitNorms="true"/>

    <!-- The format for this date field is of the form 1995-12-31T23:59:59Z, and
         is a more restricted form of the canonical representation of dateTime
         http://www.w3.org/TR/xmlschema-2/#dateTime    
         The trailing "Z" designates UTC time and is mandatory.
         Optional fractional seconds are allowed: 1995-12-31T23:59:59.999Z
         All other components are mandatory.

         Expressions can also be used to denote calculations that should be
         performed relative to "NOW" to determine the value, ie...

               NOW/HOUR
                  ... Round to the start of the current hour
               NOW-1DAY
                  ... Exactly 1 day prior to now
               NOW/DAY+6MONTHS+3DAYS
                  ... 6 months and 3 days in the future from the start of
                      the current day

         Consult the DateField javadocs for more information.
      -->
    <fieldType name="date" class="solr.DateField" sortMissingLast="true" omitNorms="true"/>

    <!-- The "RandomSortField" is not used to store or search any
         data.  You can declare fields of this type it in your schema
         to generate psuedo-random orderings of your docs for sorting 
         purposes.  The ordering is generated based on the field name 
         and the version of the index, As long as the index version
         remains unchanged, and the same field name is reused,
         the ordering of the docs will be consistent.  
         If you want differend psuedo-random orderings of documents,
         for the same version of the index, use a dynamicField and
         change the name
     -->
    <fieldType name="random" class="solr.RandomSortField" indexed="true" />

    <!-- solr.TextField allows the specification of custom text analyzers
         specified as a tokenizer and a list of token filters. Different
         analyzers may be specified for indexing and querying.

         The optional positionIncrementGap puts space between multiple fields of
         this type on the same document, with the purpose of preventing false phrase
         matching across fields.

         For more info on customizing your analyzer chain, please see
         http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters
     -->

    <!-- One can also specify an existing Analyzer class that has a
         default constructor via the class attribute on the analyzer element
    <fieldType name="text_greek" class="solr.TextField">
      <analyzer class="org.apache.lucene.analysis.el.GreekAnalyzer"/>
    </fieldType>
    -->

    <!-- A text field that only splits on whitespace for exact matching of words -->
    <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      </analyzer>
    </fieldType>

    <!-- A text field that uses WordDelimiterFilter to enable splitting and matching of
        words on case-change, alpha numeric boundaries, and non-alphanumeric chars,
        so that a query of "wifi" or "wi fi" could match a document containing "Wi-Fi".
        Synonyms and stopwords are customized by external files, and stemming is enabled.
        Duplicate tokens at the same position (which may result from Stemmed Synonyms or
        WordDelim parts) are removed.
        -->
    <fieldType name="text" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="index">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <!-- in this example, we will only use synonyms at query time
        <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
      <analyzer type="query">
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.PorterStemFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

    <!-- Less flexible matching, but less false matches.  Probably not ideal for product names,
         but may be good for SKUs.  Can insert dashes in the wrong place and still match. -->
    <fieldType name="textTight" class="solr.TextField" positionIncrementGap="100" >
      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="false"/>
        <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
        <filter class="solr.WordDelimiterFilterFactory" generateWordParts="0" generateNumberParts="0" catenateWords="1" catenateNumbers="1" catenateAll="0"/>
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <filter class="solr.EnglishMinimalStemFilterFactory"/>
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
      </analyzer>
    </fieldType>

    <!-- This is an example of using the KeywordTokenizer along
         With various TokenFilterFactories to produce a sortable field
         that does not include some properties of the source text
      -->
    <fieldType name="alphaOnlySort" class="solr.TextField" sortMissingLast="true" omitNorms="true">
      <analyzer>
        <!-- KeywordTokenizer does no actual tokenizing, so the entire
             input string is preserved as a single token
          -->
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <!-- The LowerCase TokenFilter does what you expect, which can be
             when you want your sorting to be case insensitive
          -->
        <filter class="solr.LowerCaseFilterFactory" />
        <!-- The TrimFilter removes any leading or trailing whitespace -->
        <filter class="solr.TrimFilterFactory" />
        <!-- The PatternReplaceFilter gives you the flexibility to use
             Java Regular expression to replace any sequence of characters
             matching a pattern with an arbitrary replacement string, 
             which may include back refrences to portions of the orriginal
             string matched by the pattern.

             See the Java Regular Expression documentation for more
             infomation on pattern and replacement string syntax.

             http://java.sun.com/j2se/1.6.0/docs/api/java/util/regex/package-summary.html
          -->
        <filter class="solr.PatternReplaceFilterFactory"
                pattern="([^a-z])" replacement="" replace="all"
        />
      </analyzer>
    </fieldType>

    <!-- since fields of this type are by default not stored or indexed, any data added to 
         them will be ignored outright 
     --> 
    <fieldtype name="ignored" stored="false" indexed="false" class="solr.StrField" /> 

 </types>

 <fields>
   <!-- Valid attributes for fields:
     name: mandatory - the name for the field
     type: mandatory - the name of a previously defined type from the <types> section
     indexed: true if this field should be indexed (searchable or sortable)
     stored: true if this field should be retrievable
     compressed: [false] if this field should be stored using gzip compression
       (this will only apply if the field type is compressable; among
       the standard field types, only TextField and StrField are)
     multiValued: true if this field may contain multiple values per document
     omitNorms: (expert) set to true to omit the norms associated with
       this field (this disables length normalization and index-time
       boosting for the field, and saves some memory).  Only full-text
       fields or fields that need an index-time boost need norms.
     termVectors: [false] set to true to store the term vector for a given field.
       When using MoreLikeThis, fields used for similarity should be stored for 
       best performance.
   -->

   <field name="id" type="string" indexed="true" stored="true" required="true" multiValued="false" /> 
   <field name="**biz_subject**" type="text" indexed="true" stored="true"/>
   <field name="company_name" type="text" indexed="true" stored="false"/>
   <field name="obshtina" type="text" indexed="true" stored="true"/>
   <field name="name" type="text" indexed="true" stored="true"/>
   <field name="role" type="text" indexed="true" stored="true"/>
   <field name="country" type="text" indexed="true" stored="true"/>
   <field name="nace_code" type="text" indexed="true" stored="true"/>
   <field name="nace_text" type="text" indexed="true" stored="true"/>
   <field name="main_office_town" type="text" indexed="true" stored="true"/>
   <field name="zip_code" type="text" indexed="true" stored="true"/>
   <field name="address" type="text" indexed="true" stored="true"/>
   <field name="phone" type="text" indexed="true" stored="true"/>
   <field name="fax" type="text" indexed="true" stored="true"/>
   <field name="email" type="text" indexed="true" stored="true"/>
   <field name="web" type="text" indexed="true" stored="true"/>
   <field name="rid" type="text" indexed="true" stored="true"/>
   <field name="location" type="location" indexed="true" stored="true"/>

   <!-- "default" values can be specified for fields, indicating which
        value should be used if no value is specified when adding a document.
     -->
<!--
   <field name="egn" type="text" indexed="true" stored="true" default="0"/>
   <field name="fn" type="string" indexed="true" stored="true"/>
-->

   <!-- Some sample docs exists solely to demonstrate the spellchecker
        functionality, this is the only field they container.
        Typically you might build the spellchecker of "catchall" type field
        containing all of the text in each document
     -->
   <field name="word" type="string" indexed="true" stored="true"/>

   <!-- catchall field, containing all other searchable text fields (implemented
        via copyField further on in this schema  -->
   <field name="text" type="text" indexed="true" stored="false" multiValued="true"/>

   <!-- non-tokenized version of manufacturer to make it easier to sort or group
        results by manufacturer.  copied from "manu" via copyField -->
   <field name="manu_exact" type="string" indexed="true" stored="false"/>

   <!-- Here, default is used to create a "timestamp" field indicating
        When each document was indexed.
     -->
   <field name="timestamp" type="date" indexed="true" stored="true" default="NOW" multiValued="false"/>

   <!-- Dynamic field definitions.  If a field name is not found, dynamicFields
        will be used if the name matches any of the patterns.
        RESTRICTION: the glob-like pattern in the name attribute must have
        a "*" only at the start or the end.
        EXAMPLE:  name="*_i" will match any field ending in _i (like myid_i, z_i)
        Longer patterns will be matched first.  if equal size patterns
        both match, the first appearing in the schema will be used.  -->
   <dynamicField name="*_i"  type="sint"    indexed="true"  stored="true"/>
   <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
   <dynamicField name="*_l"  type="slong"   indexed="true"  stored="true"/>
   <dynamicField name="*_t"  type="text"    indexed="true"  stored="true"/>
   <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
   <dynamicField name="*_f"  type="sfloat"  indexed="true"  stored="true"/>
   <dynamicField name="*_d"  type="sdouble" indexed="true"  stored="true"/>
   <dynamicField name="*_dt" type="date"    indexed="true"  stored="true"/>
   <dynamicField name="*_coordinate" type="double" indexed="true" stored="true"/>

   <dynamicField name="random*" type="random" />

   <!-- uncomment the following to ignore any fields that don't already match an existing 
        field name or dynamic field, rather than reporting them as an error. 
        alternately, change the type="ignored" to some other type e.g. "text" if you want 
        unknown fields indexed and/or stored by default --> 
   <!--dynamicField name="*" type="ignored" multiValued="true" /-->

 </fields>

 <!-- Field to use to determine and enforce document uniqueness. 
      Unless this field is marked with required="false", it will be a required field
   -->
 <uniqueKey>id</uniqueKey>

 <!-- field for the QueryParser to use when an explicit fieldname is absent -->
 <defaultSearchField>text</defaultSearchField>

 <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
 <solrQueryParser defaultOperator="OR"/>

  <!-- copyField commands copy one field to another at the time a document
        is added to the index.  It's used either to index the same field differently,
        or to add multiple fields to the same field for easier/faster searching.  -->
   <copyField source="id" dest="rid"/>
<!--
   <copyField source="cat" dest="text"/>
   <copyField source="name" dest="text"/>
   <copyField source="name" dest="nameSort"/>
   <copyField source="name" dest="alphaNameSort"/>
   <copyField source="manu" dest="text"/>
   <copyField source="features" dest="text"/>
   <copyField source="includes" dest="text"/>

   <copyField source="manu" dest="manu_exact"/>
-->

 <!-- Similarity is the scoring routine for each document vs. a query.
      A custom similarity may be specified here, but the default is fine
      for most applications.  -->
 <!-- <similarity class="org.apache.lucene.search.similarities.DefaultSimilarity"/> -->

</schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T19:34:37.663

看起来您可以将 fieldType 设为`biz_subject`字符串。或者，如果您需要它`text`用于其他搜索目的，则创建一个名为的新[副本字段](https://wiki.apache.org/solr/SchemaXml#Copy_Fields)，其类型为字符串。然后您可以对您的搜索词执行通配符搜索，例如`biz_subject``biz_subject_str`

```
q=biz_subject:evn* 
```

或者

```
q=biz_subject_str:evn* 
```

索引期间字符串不会拆分为标记，因此您不应将`limevnii`其作为匹配项。

# solr - Solr MoreLikeThis 和使用 Boost 函数（Boost 最近的项目）

> ID：14922888
> 
> 赞同：1
> 
> 时间：2013-02-17T15:48:30.903
> 
> 标签：solr, boost-function, morelikethis

我有一个类似的问题，如“在 MoreLikeThis Solr 请求处理程序中[提升最近的项目”在 MoreLikeThis Solr 请求处理程序中提升最近的项目](https://stackoverflow.com/questions/6996581/boost-recent-item-in-morelikethis-solr-request-handler)

我想提升从 MoreLikeThis 处理程序或组件返回的最近项目。我发现 MoreLikeThisHandler 不支持 bf ，因为它是 Dismax 参数。

因此我尝试了以下（在我的 solrconfig.xml 中）：

```
<requestHandler name="/select" class="solr.SearchHandler">
<lst name="defaults">
    <str name="df">id</str>
    <str name="mlt">true</str>
    <str name="mlt.count">10</str>
    <str name="mlt.fl">project,type,summary,description,environment,fixfor,component</str>
    <str name="mlt.mintf">1</str>
    <str name="mlt.mindf">2</str>
    <str name="mlt.boost">true</str>
    <str name="rows">20</str>
    <str name="fl">id,key,project,summary,reporter,assignee,updated,score</str>
    <str name="bf">ms(NOW/HOUR,updated)</str>
</lst>
<!--<arr name="components">
    <str>mlt</str>
</arr>--> 
```

和

```
<field name="id" type="long" indexed="true" stored="true" required="true" multiValued="false" termVectors="true"/><!-- is termVector by long needed? -->
...
<field name="key" type="string" indexed="true" stored="true" required="true" multiValued="false"/>
...
<field name="description" type="text_general" indexed="true" stored="false" required="true" multiValued="false" termVectors="true"/>
...
<field name="updated" type="date" indexed="true" stored="true" required="false" multiValued="false"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:25:58.940

似乎不支持 Mlt boost。
您可能可以检查 Mlt 排序补丁[SOLR-1545](https://issues.apache.org/jira/browse/SOLR-1545)

# matlab - matlab contourf如何绘制二维决策边界

> ID：14922889
> 
> 赞同：0
> 
> 时间：2013-02-17T15:48:39.983
> 
> 标签：matlab, contour

我完成了一次 SVM 训练，得到了 X、Y 之类的数据。X 是只有 2 维的特征矩阵，Y 是分​​类标签。因为数据只有二维，所以我想画一个决策边界来显示支持向量的表面。

我在 Matlab 中使用 contouf 来解决这个问题，但真的很难理解如何使用该函数。

我写道：

```
#1 try:    
contourf(X);

#2 try:
contourf([X(:,1) X(:,2) Y]);

#3 try:
Z(:,:,1)=X(Y==1,:);
Z(:,:,2)=X(Y==2,:);
contourf(Z); 
```

所有这些事情都不正确。而且我查了Matlab的帮助文件，大部分都是把Z当作一个函数，所以我真的不知道如何形成正确的Z矩阵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:44:57.013

如果您使用来自 Bioinformatics Toolbox的`svmtrain`and命令，您可以只使用附加的输入参数，它将显示带有决策边界和突出显示支持向量的散点图。`svmclassify``(...'showplot', true)`

如果您使用自己的 SVM 或第三方工具（如 libSVM），您可能需要做的是：

1.  `meshgrid`使用命令在 2D 输入特征空间中创建点网格
2.  使用经过训练的 SVM 对这些点进行分类
3.  使用 绘制点网格和分类`contourf`。

例如，在 kind-of-MATLAB-but-pseudocode 中，假设您的输入特征称为 X1 和 X2：

```
numPtsInGrid = 100;
x1Range = linspace(x1lower, x1upper, numPtsInGrid);
x2Range = linspace(x2lower, x2upper, numPtsInGrid);
[X1, X2] = meshgrid(x1Range, x2Range);
Z = classifyWithMySVMSomehow([X1(:), X2(:)]);
contourf(X1(:), X2(:), Z(:)) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-25T10:19:23.620

我知道已经有一段时间了，但我会试一试，以防其他人提出这个问题。

假设我们有一个 2D 训练集来训练一个 SVM 模型，换句话说，特征空间是一个 2D 空间。我们知道核 SVM 模型会导致以下形式的得分（或决策）函数：

f(x) = sum [i=1 to N] ( *a* [i] *y* [i] k( *x* , *x* [i] )) + *b*

其中 N 是支持向量的数量，*x* [i]是第*i*个支持向量，*a* [i]是估计的拉格朗日乘数， *y* [i]是相关的类标签。决策函数的值（分数）以方式描述了观察*x*与决策边界的距离。

现在假设对于 2D 特征空间中的每个点 (X,Y)，我们都可以找到决策函数的相应分数。我们可以在 3D 欧几里得空间中绘制结果，其中 X 对应于第一个特征向量*f1的*[值，Y 对应于][第二]个特征*f2*的值，Z 对应于每个点 (X,Y) 的决策函数的返回。这个 3D 图形与 Z=0 平面的交点为我们提供了进入二维特征空间的决策边界。换句话说，假设决策边界由分数等于 0 的 (X,Y) 点形成。看起来合乎逻辑吧？

现在在 MATLAB 中，您可以轻松地做到这一点，首先在 X,Y 空间中创建一个网格：

```
d = 0.02;
[x1Grid,x2Grid] = meshgrid(minimum_X:d:maximum_X,minimum_Y:d:maximum_Y); 
```

*d*根据所需的网格分辨率选择。

然后对于经过训练的模型*SVMModel*找到每个网格点的分数：

```
xGrid = [x1Grid(:),x2Grid(:)];
[~,scores] = predict(SVMModel,xGrid); 
```

最后绘制决策边界

```
figure;
contour(x1Grid,x2Grid,reshape(scores(:,2),size(x1Grid)),[0 0],'k'); 
```

等高线为我们提供了一个 2D 图形，其中有关第 3 维的信息在 2D 平面中被描绘为实线。这些线表示等响应值，换句话说，具有相同 Z 值的 (X,Y) 点。在我们的场合，轮廓给了我们决策边界。

希望我能帮助让这一切更清楚。您可以在以下链接中找到非常有用的信息和示例：

[MATLAB 的例子](https://www.mathworks.com/help/stats/support-vector-machines-for-binary-classification.html#bsr5ovw-1)

[3D 空间中决策函数的表示](http://mccormickml.com/2013/04/16/trivial-svm-example/)

# c++ - 以非多态方式调用虚函数的成本是多少？

> ID：14922890
> 
> 赞同：9
> 
> 时间：2013-02-17T15:48:43.417
> 
> 标签：c++, performance, virtual-functions

我有一个纯抽象基础和两个派生类：

```
struct B { virtual void foo() = 0; };
struct D1 : B { void foo() override { cout << "D1::foo()" << endl; } };
struct D2 : B { void foo() override { cout << "D1::foo()" << endl; } }; 
```

调用`foo`A 点的成本是否与调用非虚拟成员函数的成本相同？或者它是否比 D1 和 D2 不是从 B 派生的更昂贵？

```
int main() {
 D1 d1; D2 d2; 
 std::vector<B*> v = { &d1, &d2 };

 d1.foo(); d2.foo(); // Point A (polymorphism not necessary)
 for(auto&& i : v) i->foo(); // Polymorphism necessary.

 return 0;
} 
```

**答案：****Andy Prowl**的答案是正确的答案，我只是想添加 gcc 的汇编输出（在[godbolt](http://gcc.godbolt.org/)中测试：gcc-4.7 -O2 -march=native -std=c++11）。直接函数调用的成本是：

```
mov rdi, rsp
call    D1::foo()
mov rdi, rbp
call    D2::foo() 
```

对于多态调用：

```
mov rdi, QWORD PTR [rbx]
mov rax, QWORD PTR [rdi]
call    [QWORD PTR [rax]]
mov rdi, QWORD PTR [rbx+8]
mov rax, QWORD PTR [rdi]
call    [QWORD PTR [rax]] 
```

但是，如果对象不是从其中派生的，`B`而您只是执行直接调用，则 gcc 将**内联**函数调用：

```
mov esi, OFFSET FLAT:.LC0
mov edi, OFFSET FLAT:std::cout
call    std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*) 
```

这*可以*启用进一步的优化，如果`D1`并且`D2`不派生，`B`所以我猜**不，它们不等效**（至少对于具有这些优化的这个版本的 gcc，-O3 在没有内联的情况下产生了类似的输出）。是否有什么东西阻止编译器在这种情况下内联`D1`并且`D2`确实派生自`B`？

**“修复”：**使用委托（也就是自己重新实现虚函数）：

```
struct DG { // Delegate
 std::function<void(void)> foo;
 template<class C> DG(C&& c) { foo = [&](void){c.foo();}; }
}; 
```

然后创建一个代表向量：

```
std::vector<DG> v = { d1, d2 }; 
```

如果您以非多态方式访问方法，这允许内联。`std::function`但是，我想访问向量会比仅使用虚拟函数（还不能用 Godbolt 测试）更慢（或者至少与使用虚函数进行类型擦除一样快）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T15:54:20.377

> 在 A 点调用 foo 是否与调用非虚拟成员函数的成本相同？

**是的。**

> 或者它是否比 D1 和 D2 不是从 B 派生的更昂贵？

**不。**

编译器将静态解析这些函数调用，因为它们不是通过指针或引用执行的。由于调用函数的对象的类型在编译时是已知的，因此编译器知道`foo()`必须调用哪个实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T16:58:45.580

最简单的解决方案是查看编译器的内部结构。在 Clang 中，我们`canDevirtualizeMemberFunctionCall`在[lib/CodeGen/CGClass.cpp](http://llvm.org/svn/llvm-project/cfe/trunk/lib/CodeGen/CGClass.cpp)中找到：

```
/// canDevirtualizeMemberFunctionCall - Checks whether the given virtual member
/// function call on the given expr can be devirtualized.
static bool canDevirtualizeMemberFunctionCall(const Expr *Base, 
                                              const CXXMethodDecl *MD) {
  // If the most derived class is marked final, we know that no subclass can
  // override this member function and so we can devirtualize it. For example:
  //
  // struct A { virtual void f(); }
  // struct B final : A { };
  //
  // void f(B *b) {
  //   b->f();
  // }
  //
  const CXXRecordDecl *MostDerivedClassDecl = getMostDerivedClassDecl(Base);
  if (MostDerivedClassDecl->hasAttr<FinalAttr>())
    return true;

  // If the member function is marked 'final', we know that it can't be
  // overridden and can therefore devirtualize it.
  if (MD->hasAttr<FinalAttr>())
    return true;

  // Similarly, if the class itself is marked 'final' it can't be overridden
  // and we can therefore devirtualize the member function call.
  if (MD->getParent()->hasAttr<FinalAttr>())
    return true;

  Base = skipNoOpCastsAndParens(Base);
  if (const DeclRefExpr *DRE = dyn_cast<DeclRefExpr>(Base)) {
    if (const VarDecl *VD = dyn_cast<VarDecl>(DRE->getDecl())) {
      // This is a record decl. We know the type and can devirtualize it.
      return VD->getType()->isRecordType();
    }

    return false;
  }

  // We can always devirtualize calls on temporary object expressions.
  if (isa<CXXConstructExpr>(Base))
    return true;

  // And calls on bound temporaries.
  if (isa<CXXBindTemporaryExpr>(Base))
    return true;

  // Check if this is a call expr that returns a record type.
  if (const CallExpr *CE = dyn_cast<CallExpr>(Base))
    return CE->getCallReturnType()->isRecordType();

  // We can't devirtualize the call.
  return false;
} 
```

我相信代码（和随附的注释）是不言自明的 :)

# java - 二叉搜索树，插入方法不会编译

> ID：14922899
> 
> 赞同：0
> 
> 时间：2013-02-17T15:49:39.537
> 
> 标签：java, binary-search-tree

我正在尝试用java编写我自己的二叉搜索树。我已经编写了所有方法，现在我正在尝试编写一个程序来测试这些方法。

但是，当我尝试实现我的“插入”方法时，它不会编译，我也不知道为什么。

```
public class lab05driver {
public static void main(String[] args) {
    BST q = new BST();

    int a = 5;
    String b = "jed";
    double c = 1.8;
    char d = 'r';
    boolean e = false;
    int f = 35;
    String g = "yay";
    double h = 2.1;
    char i = 'i';
    boolean j = true;

    Integer k = 5;
    q.insert(k);    
}} 
```

我的 BST 课程如下所示：

```
public class BST implements myBST {

    private myTreeNode root;

    public BST() {

    }

    public void insert(Comparable x) {
        if(root == null) {
            root = new myTreeNode();
            root.data = x;
        } else if ( !lookup(x) ) {
            root.insert(x);
        }

    }

    ...more code...

} 
```

而且，myBST 看起来像：

```
public interface myBST {
    public void insert(Comparable x);
    public void delete(Comparable x);
    public boolean lookup(Comparable x);
    public void printPreOrder();
    public void printInOrder();
    public void printPostOrder();
} 
```

最后，myTreeNode 看起来像：

```
public class myTreeNode {

    public myTreeNode() {

    }

    public Comparable data ;

    public myTreeNode leftchild;

    public myTreeNode rightchild;

    public myTreeNode parent;

    public void insert(Comparable d) {
        //if less than
        //does left exist? if it doesnt, make it, give it d
        //if it exists call insertrecursive on rightchild
        if(d.compareTo(data) <= 0) {
            if(leftchild != null) {
                leftchild.insert(d);
            } else {
                leftchild = new myTreeNode();
                leftchild.data = d;
                leftchild.parent = this;
            }
        } else {
            if(rightchild != null) {
                rightchild.insert(d);
            } else {
                rightchild = new myTreeNode();
                rightchild.data = d;
                rightchild.parent = this;
            }
        }
    }

...more code...
} 
```

它在 lab05driver 中的“q.insert(k)”处引发错误。任何帮助/建议将不胜感激......

~~~~~ 编辑：对不起，我只是复制了那个错误......有一个主要方法，整数k是一个整数......我得到命令行的错误是：警告：[unchecked] unchecked call to compareTo(T ) 作为原始类型 java.lang.Comparable 的成员

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:00:18.743

`q.insert(k);`是一个声明。语句需要在方法中，目前不在方法中。

所以做类似的事情：

```
public class lab05driver
{
  public static void main( String[] args )
  {
    BST q = new BST();
    int a = 5;
    String b = "jed";
    double c = 1.8;
    char d = 'r';
    boolean e = false;
    int f = 35;
    String g = "yay";
    double h = 2.1;
    char i = 'i';
    boolean j = true;

    Integer k = 1; // changed because "Integer k = "test";" doesn't compile
    q.insert(k);
  }
} 
```

请注意我用于该方法的签名。这是 Java 视为入口方法（程序将启动的地方）的签名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:02:41.153

我能看到的最明显的问题是：

```
 Integer k = "test"; 
```

k 需要是某种整数 - 你已经为它分配了一个字符串。这不是一个有效的分配。有效值为 -1、0、1 等 - 任何整数值。

一旦您分配了一个值（或将 k 更改为`String`类），您的代码应该没问题

# python - 坚持下一个字母生成器——Python 3

> ID：14922909
> 
> 赞同：2
> 
> 时间：2013-02-17T15:50:27.970
> 
> 标签：python, if-statement, python-3.x, chr, ord

目前，我正在网上学习一些计算机科学课程。我接到了编写一个程序的任务，该程序在有效输入后将打印字母表中的下一个字母。这是我的代码：

```
char = input()
ordchar = ord(char)
nextletter = ordchar + 1
nextletter = chr(nextletter)

if nextletter == ("["):
    print("A")

if nextletter == ("{"):
    print("a")

if nextletter!=("[","{"):
    print(nextletter) 
```

现在，我确实看到了代码的问题，尽管我不知道如何纠正它。基本上，在倒数第二行代码中，我希望它基本上说“如果下一个字母不等于 { 或 [ 打印下一个字母”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:51:52.963

```
if nextletter not in ["[", "{"]:
    print(nextletter) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-17T15:53:04.150

*您根本*不需要测试这些字符。在它之前的代码中，你确保它`nextletter`永远*不会*是`[`or `{`，如果你只是给`nextletter`那里分配一个不同的字母：

```
if nextletter == "[":
    nextletter = "A"
elif nextletter == "{":
    nextletter = 'a' 
```

如果您仍然需要进行这样的测试，请使用[`not in`操作符](http://docs.python.org/3/reference/expressions.html#not-in)：

```
if nextletter not in '[{': 
```

`not in``True`如果左边的操作数不存在于右边的序列中，则返回。我在示例中使用了一个包含两个字符的字符串，它算作一个序列：

```
>>> '[' in '[{'
True
>>> '0' in '[{':
False 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-17T15:51:43.733

使用`not in`成员运算符：

```
if nextletter not in ("[","{"):
    print(nextletter) 
```

`if-elif`另请注意，如果您使用的是构造而不是个体，则可以避免第三次测试`if's`。这样，您可以将第三部分放在一个`else`块中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-17T15:57:04.077

问题是你在问 nextletter 是否不等于`("[","{")`. 您想问它是否不等于“[”或“{”。因此，您必须问， `if nextletter != "[" and nextletter != "{"` 这将检查它是否既不是“[”也不是“{”。希望这可以帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-17T15:55:32.820

虽然其他答案是正确的，但做你想做的事情的正确方法是使用`elif`和`else`：

```
if nextletter == ("[") :
    print("A")
elif nextletter == ("{") :
    print("a")
else :
    print(nextletter) 
```

# html - 背景颜色是未填充行的扩展表列

> ID：14922911
> 
> 赞同：0
> 
> 时间：2013-02-17T15:50:41.137
> 
> 标签：html, css, background-color

我有一个扩展的表，但只有两行数据。我想将第一**列**的背景一直着色到页面底部，但我不确定这样做，尤其是因为没有扩展表格的行。不确定是否有办法做到这一点，但希望能提供任何帮助。

这是 JS Fiddle：jsfiddle.net/5E24f/ 我希望第 1 列的背景颜色扩展到页面底部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:33:19.117

您可能这样做的唯一方法是，如果您确切知道第一列的宽度。

[http://jsfiddle.net/5E24f/4/](http://jsfiddle.net/5E24f/4/)

```
table.patientinfo:after {
    content: " ";
    background: orange; /* replace with your bg color */
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 17px; /* matches the width of your first column */
    z-index: -1;
} 
```

# subdomain - app.facebook.com/mygame 没有工作

> ID：14922917
> 
> 赞同：-1
> 
> 时间：2013-02-17T15:51:12.557
> 
> 标签：subdomain, facebook-apps

我在 facebook 上有一个应用程序，我在子域 (mygame.mydomain.com) 上托管这个应用程序。当我在应用程序中心或直接链接（www.facebook.com/appcenter/mygame）上单击游戏时，没有问题，但如果我想在链接“app.facebook.com/mygame”上重定向它没有用。

我无法理解是什么问题，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:55:23.990

不是“apps.facebook.com”吗？

而且，我认为“apps.facebook.com 不再工作了。因为每当我尝试使用该网址打开应用程序时，它都会将我重定向到“facebook.com/appcenter/”

# java - 为什么 Project Facet 窗口无法在 Eclipse 中打开？

> ID：14922918
> 
> 赞同：0
> 
> 时间：2013-02-17T15:51:41.317
> 
> 标签：java, android, eclipse, google-app-engine, google-cloud-sql

我在 Eclipse 中为现有的 Android 应用程序生成了一个应用程序引擎后端。我想通过以下链接[https://developers.google.com/eclipse/docs/cloudsql-jpatools将项目配置为使用 Cloud SQL](https://developers.google.com/eclipse/docs/cloudsql-jpatools)

当我这样做时：右键单击项目 --> 属性 --> 项目方面 --> 选择 JPA v2.0 并单击进一步配置可用选项 eclipse 只是卡住了很长时间，没有任何反应？

我该怎么办？还有一种方法可以在不使用 JPA 的情况下将 Endpoints 与 cloudsql 一起使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:10:30.650

我能够通过安装最新版本的 eclipse Juno v4.2 来解决这个问题

# ruby-on-rails - 从 Rail Active 调用 Socket.io：记录回调或观察者

> ID：14922924
> 
> 赞同：2
> 
> 时间：2013-02-17T15:52:11.240
> 
> 标签：ruby-on-rails, node.js, notifications, push-notification, socket.io

LayerVault 的好人发布了一种在现有 Ruby 应用程序上添加“实时”功能的简单方法，而无需诉诸客户端 MCV 或用 Node.js 重写整个应用程序，不久前。他们的帖子显示，只要您的 rails**模型**通过 delay_job 和 Active:Record Observer 更新 [参考 1]，您就可以更新所有客户端：

```
 class FileObserver < ActiveRecord::Observer
      observer :lv_file

    def after_commit(record)
      record.delay.report_updated
    end
  end 
```

和

```
 class LVFile < ActiveRecord::Base
     def report_updated
        Messenger.publish_message('file_updated', "file/#{self.id}")
     end
  end 
```

[参考1]`http://layervault.tumblr.com/post/31462727280/rails-in-realtime-part-2`

从客户端 javascript 连接到 socket.io 服务器很容易。但是我不知道如何`Messenger.publish_message('file_updated', "file/#{self.id}")`在 Rails 服务器端实现。在帖子中他们确实提到了

> report_updated 方法对**单独的 Messenger 类**（Web 应用程序端的 Socket.IO 接口）进行类方法调用，并报告文件已更改到适当的房间。

但我仍然不太确定如何`Messager`在 Rails 中实现类，以便 Active:Record Observer 能够连接到我的 socket.io 服务器并发送更新。

**[PS]**关于 HN 的对话表明他们使用[了这个宝石](https://github.com/lyondhill/socket.io-ruby-client)

gem 的 wiki 甚至包括一个简短的演示：

```
 require 'SocketIO'

   client = SocketIO.connect("http://localhost", sync: true) do
      before_start do
        on_message {|message| puts message}
        on_disconnect {puts "I GOT A DISCONNECT"}
      end

      after_start do
        emit("loadLogs", "/var/www/rails_app/log/production.log")
      end
   end

    puts "socket still running"
   loop do
     sleep 10
     puts 'zzz'
   end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T18:55:09.027

Messenger 类没有太多内容。您所需要的只是创建连接，触发消息，然后结束。这是我们的全部内容`messenger.rb`：

```
require 'socketio-client'

class Messenger
  def self.send_message!(name, args)
    begin
      SocketIO.connect(MESSENGER_SOCKETIO_ADDRESS, sync: true) do
        after_start do
          emit(name, args)
          disconnect
        end
      end
    rescue
    end
  end
end 
```

# ruby-on-rails - Ruby on Rails 架构

> ID：14922931
> 
> 赞同：0
> 
> 时间：2013-02-17T15:53:26.473
> 
> 标签：ruby-on-rails, ruby, passenger, rack

我对 ruby​​ on rails 很陌生。我已经设置了一个`Apache`服务器，它将请求定向到`Phusion Passenger`，`Passenger`调用相应的控制器并完成工作。什么时候调用 rack module( `config.ru`)？Apache 发送给Passenger 的每个请求都会调用它吗？`Apache`我能否获得在和之间发生的事件的详细流程`Passenger`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T17:54:47.323

`config.ru`在机架服务器（在这种情况下为乘客）启动时加载。请求期间究竟发生了什么实际上取决于您的设置。但基本流程是这样的：

当请求进入 Apache 时，它​​将首先尝试从`public/`您的应用程序目录中提供文件。如果失败，Passenger 会将请求转发给您的应用程序，然后该应用程序处理请求并将响应返回给Passenger。乘客然后将响应返回给 Apache，Apache 将其传输给客户端。

# c# - Windows 7 资源管理器文本框控件

> ID：14922932
> 
> 赞同：1
> 
> 时间：2013-02-17T15:53:31.097
> 
> 标签：c#, wpf

你们中的任何人都知道一个控件，它看起来像 Windows 7 资源管理器顶部的文本框吗？

![Windows 7 资源管理器文本框](../Images/467c1b99b26dea8dbbbac4a92f5e903a.png)

如果没有这样的控制，任何建议如何写一个？

安德烈

# javascript - 如何检查 Modernizr 是否可以使用本机绑定功能

> ID：14922933
> 
> 赞同：0
> 
> 时间：2013-02-17T15:53:32.367
> 
> 标签：javascript, modernizr

是否可以使用 Modernizer 检查本机浏览器的绑定功能（或任何其他本机浏览器的功能）是否可用或者我正在使用 pollyfill？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:56:19.290

我不这么认为，但您可以使用 Modernizr 轻松创建自己的测试：http: [//modernizr.com/docs/#addtest](http://modernizr.com/docs/#addtest)您需要检查`Function.prototype.bind`.

# android - java.lang.String 类型的值无法在 android 中转换为 JSONObject

> ID：14922934
> 
> 赞同：0
> 
> 时间：2013-02-17T15:53:34.750
> 
> 标签：android, json, string

我正在从我的 android 项目中的 assets 文件夹中读取 json 文件。我正在尝试将读取 json 文件后返回的字符串转换为 JSONObject。我用谷歌搜索了很多，但在我的代码中找不到错误。其他人使用此代码取得了成功。任何人，如果我的方法有误或我的代码中有问题，请指导我。在 - //1 行，我得到标题中所述的错误。

```
AssetManager am = getAssets();
        InputStream is;

        try 
        {
            is=am.open("places.json");
            int size = is.available();
            byte[] buffer = new byte[size];
            is.close();
            String bufferString = new String(buffer);
            JSONObject jo = new JSONObject(bufferString);    //1
            JSONObject pjo = jo.getJSONObject("Places"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T15:55:45.407

您应该考虑使用 JSONReader：http: [//developer.android.com/reference/android/util/JsonReader.html](http://developer.android.com/reference/android/util/JsonReader.html)

从 API 级别 11 开始可用。但我确信它也可以通过兼容性库 v4 使用

# c++ - C++ 和 - (unsigned int)

> ID：14922935
> 
> 赞同：0
> 
> 时间：2013-02-17T15:53:45.813
> 
> 标签：c++

为什么以下行

```
auto k = -10u; 
```

返回 k = 4294967286 ？它不应该将 10unsigned 类型转换为有符号整数吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T15:55:41.187

不，不应该。

-（无符号类型）是无符号类型。

应用于内置整数的任何运算符都具有相同类型的结果

# python - 在 Tkinter 中设置帧大小和位置

> ID：14922937
> 
> 赞同：2
> 
> 时间：2013-02-17T15:54:04.750
> 
> 标签：python, graphics, tkinter

我正在尝试在 Tkinter 中设置框架大小和框架（主小部件）的位置。根据[这个答案](https://stackoverflow.com/questions/11091548/centering-and-size-a-windows-frame-in-tkinter-class-python)，我将其添加到我的代码中：

```
from Tkinter import *
import ctypes
user = ctypes.windll.user32
screensize = (user.GetSystemMetrics(0), user.GetSystemMetrics(1), user.GetSystemMetrics(2), user.GetSystemMetrics(3))

class GetWord:
    def __init__(self, master):
        master.geometry("%s+%s+%s+%s" % (screensize[0], screensize[1], screensize[2], screensize[3]))
        # I added the above in, but not sure how it works
        self.frame = Frame(master, width = screensize[0], height = screensize[1])
        self.frame.grid() 
```

但是，这样做时，我得到一个`TclError`：

```
Traceback (most recent call last):
  File #file path, line 39, in <module>
    f = GetWord(root)
  File #file path, line 8, in __init__
    master.geometry("%s+%s+%s+%s" % (screensize[0], screensize[1], screensize[2], screensize[3]))
  File "C:\Python2.7.3\lib\lib-tk\Tkinter.py", line 1534, in wm_geometry
    return self.tk.call('wm', 'geometry', self._w, newGeometry)
TclError: bad geometry specifier "1366+768+17+17" 
```

我这样称呼班级：

```
root = Tk(className='derp')
root.columnconfigure(0, weight=1)
root.rowconfigure(0, weight=1)
f = GetWord(root)
root.mainloop() 
```

我怎样才能解决这个问题？我想让框架从屏幕的中心开始，并从特定的窗口大小开始（现在它是全屏的，但我稍后会改变它）。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-17T15:58:46.547

您需要使用字母“x”而不是“+”

```
master.geometry("%sx%sx%sx%s" % (screensize[0], screensize[1], screensize[2], screensize[3])) 
```

# java - 查找远程 jvm 的默认文件编码

> ID：14922944
> 
> 赞同：1
> 
> 时间：2013-02-17T15:55:07.037
> 
> 标签：java, character-encoding

我需要在 Java 程序中找出远程 Java vm 上的默认文件编码是什么。

有没有办法在远程 vm 上执行 Charset.defaultCharset() 并取回它的值......而不改变在远程 jvm 上运行的程序？

更新：

我试图找出 WebLogic 11g 或 WebLogic 12c 服务器的默认字符集是什么……我没有启动，无法重新启动，并且我没有“权利”在其上部署代码。

我还需要能够从我正在编写的 Java 程序中确定服务器进程的默认字符集。它可能与服务器在同一台机器上执行......或者不是。服务器和我的程序是否会以相同的环境启动是非常值得怀疑的。

我更喜欢一种依赖于很少假设的方法......所以这通常意味着更多的代码......

我可能无法在服务器上执行 Charset.defaultCharset()……所以我不应该说“执行 Charset.defaultCharset()”。对不起那些人。我需要做一些事情来提供与从服务器进程内部执行 Charset.defaultCharset() 一样正确的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:19:03.827

*编辑*：写完我的答案后，我发现它至少部分基于一个错误的假设，因为`Charset.defaultCharset()`不能保证总是返回相同的值。如果在与目标应用程序相同的主机上尝试过以下一些方法，它们应该仍然有效，但我当然建议您也阅读[此问题](https://stackoverflow.com/q/361975/1067887)的前两个答案以了解更多背景信息。

特别是强行覆盖`file.encoding`而不是试图弄清楚它实际上是什么可能更容易。

* * *

作为各州的[javadoc ：`defaultCharset`](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29)

> 默认字符集在虚拟机启动期间确定，通常取决于底层操作系统的区域设置和字符集。

这意味着它`defaultCharset()`在 JVM 进程内是只读的，并且将为在同一台机器上启动的所有 JVM 进程返回相同的字符集，除非它们的环境在启动进程之前已明确更改（例如，启动 JVM 并设置的包装器/启动器脚本当前进程及其子进程的不同语言环境）。如果您确定这两个进程以相同的方式启动，那么`Charset.defaultCharset()`应该返回与`Charset`您要求的应用程序相同的内容。

以此为背景，按照烦恼/努力的递增顺序：

1.  如果您的主机运行的是 Unix/Linux，请尝试[procfs](http://en.wikipedia.org/wiki/Procfs)。例如。`/proc/<vmpid>/environ`和`/proc/<vmpid>/cmdline`（在 Linux 上）将是很好的起点，因为它们向您展示了该过程是如何在没有混淆包装脚本的情况下*实际启动的。*此解决方案还可以获得奖励积分，因为它不需要您重新启动/更改应用程序以进行检查。需要注意的事项：变量（[Linux 上的语言环境](https://wiki.archlinux.org/index.php/Locale)`LANG`介绍）和影响语言环境的 JVM 命令行参数。其他操作系统也可能具有某种形式的过程检查，您可以使用它来显示此信息。`LC_*`

2.  接下来：在特定的主机/JVM 上编译并运行它：

    ```
    import java.nio.charset.Charset;

    public class DumpCharset {
      public static void main(String[] args) {
        System.out.println(Charset.defaultCharset().displayName());
      }
    } 
    ```

    如前所述，如果进程以相同的方式启动，`Charset.defaultCharset()`则应返回相同的值（在同一主机上）。为了非常接近，您甚至可以将包含 main 方法的应用程序的 jar 临时替换为包含上述代码的 jar（确保类名匹配）。

3.  如果这不能为您提供所需的信息（它应该），请尝试启动该进程以使其接受调试器，附加调试器，然后深入了解语言环境，和/或执行类似于上述代码的表达式。

4.  如果这仍然不能为您提供所需的信息，那么您可以激进并在类加载时使用动态字节码编织。这可以使用基于加载时间编织的现有 AOP 框架（例如[AspectJ](http://eclipse.org/aspectj/doc/released/devguide/ltw.html)）或直接使用[ASM 4](http://asm.ow2.org/)和[`java.lang.instrument`API](http://docs.oracle.com/javase/7/docs/api/java/lang/instrument/package-summary.html)来实现。请注意，使这项工作存在一些陷阱，因此很难判断这在您的情况下是否会相当简单。但期望它比上述方法（更多？）工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:01:55.617

我建议您使用[System.getProperty( "os.name" )](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29)、 System.getProperty( "os.arch" ) 来识别远程架构。

[默认字符集](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html#defaultCharset%28%29)也可能有用：

```
java.nio.Charset cs = java.nio.Charset.defaultCharset(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T19:38:50.803

这是我最终做的......（大致）

```
 mbs = conn.getMBeanServerConnection();
  ObjectName runtime = new ObjectName(ManagementFactory.RUNTIME_MXBEAN_NAME);
  TabularDataSupport foo = 
    (TabularDataSupport) mbs.getAttribute(runtime, "SystemProperties");
  for (Iterator<Object> it = foo.values().iterator(); 
                      it.hasNext() && null == retVal; ) {
    CompositeDataSupport cds = (CompositeDataSupport) it.next();
    for (Iterator<?> iter = cds.values().iterator() ; 
                   iter.hasNext() && null == retVal ;) {
      if ("file.encoding".equals(iter.next()) && iter.hasNext())
        retVal = iter.next().toString();
    } 
```

我连接到 MBeanServer，然后通过 SystemProperties 找到连接另一端进程的 file.encoding。

# node.js - 建议：熨斗、强大和 aws s3

> ID：14922949
> 
> 赞同：3
> 
> 时间：2013-02-17T15:55:37.560
> 
> 标签：node.js, amazon-s3, flatiron.js, formidable

我是使用 node.js 进行服务器端编程的新手。我现在正在将一个小型 webapp 与它结合在一起，并让通常的启动学习去做。以下代码*WORKS*。但我很想知道从表单上传简单文件并将其放入 aws s3 是否或多或少是一种正确的方法：

```
app.router.post('/form', { stream: true }, function () {

    var req = this.req,
        res = this.res,
        form = new formidable.IncomingForm();

    form
    .parse(req, function(err, fields, files) {
        console.log('Parsed file upload' + err);
        if (err) {
            res.end('error: Upload failed: ' + err);
        } else {
            var img = fs.readFileSync(files.image.path);
            var data = {
                Bucket: 'le-bucket',
                Key:    files.image.name,
                Body:   img
            };
            s3.client.putObject(data, function() {
                console.log("Successfully uploaded data to myBucket/myKey");
            });
            res.end('success: Uploaded file(s)');
        }
    });
}); 
```

注意：我必须在 union/flatiron.plugins.http 中关闭缓冲区。

我想了解的是，何时流式加载文件以及何时同步加载。这将是一个非常小的网络应用程序，流量很少。

如果它或多或少好，那么请将此视为工作代码的象征，我也会将其纳入要点。找到这类东西的文档和工作示例并不容易。我非常喜欢熨斗。但它的小模块方法导致整个网络上出现大量零散的文档和示例，仅谈教程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-29T14:27:19.027

您应该使用除强大之外的其他模块，因为据我所知强大没有 s3 存储选项，那么您必须在上传之前将文件保存在服务器中。我建议您使用：[多方](https://www.npmjs.com/package/multiparty)

使用此[示例](https://github.com/andrewrk/node-multiparty/blob/master/examples/s3.js)可直接上传到 S3，而无需将其本地保存在您的服务器中。

# asp.net-mvc-4 - MVC 4，WebApi：POST 停止工作，GET 工作

> ID：14922950
> 
> 赞同：0
> 
> 时间：2013-02-17T15:55:37.543
> 
> 标签：asp.net-mvc-4, visual-studio-2012, asp.net-web-api

我不能再对 MVC 4 中的 WebAPI 进行 POST。Post() 方法，不管我怎么做，都不会被调用。如果我发送 GET，则完全没有问题。

```
public void Post()
{
} 
```

这就是它在控制器中的简单程度。我使用 Fiddler 发送帖子，但没有任何反应。我使用 fiddler 将 GET 发送到同一个控制器，然后调用 GET 方法。

我已经环顾了好几个小时，但无法弄清楚问题出在哪里，更不用说在哪里进行调试了，因为任何 POST 都只会返回 500（内部服务器错误）。

关于这里发生了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T19:07:15.323

我在控制器中还有两种方法，一种称为 GatherZipCode()，另一种称为 RetrieveWeather()。我认为他们对处理 POST 没有影响，因为他们没有 Post 关键字。但他们混淆了这一切，以及问题的原因。因此，请注意在 api 控制器中有多个 Post 处理程序。

感谢 Darin Dimitrov，他带领我走上了正确的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T17:35:53.927

添加方法属性：

```
[HttpPost]
public void Post()
{
} 
```

# jquery - 如何使用 jQuery 更改点击时的 img

> ID：14922954
> 
> 赞同：0
> 
> 时间：2013-02-17T15:55:53.947
> 
> 标签：jquery, html, image

我有这段代码可以在表格中显示小图像

```
<table>
<tr>
<td class='change' id='c1'><img src='images/on.gif'/></td>
<td class='change' id='c2'><img src='images/on.gif'/></td>
<td class='change' id='c3'><img src='images/on.gif'/></td>
<td class='change' id='c4'><img src='images/on.gif'/></td>
<td></td>    
</tr>
</table> 
```

如何在点击事件时更改表格中任何一张图像的图像。我试过这样做，但似乎无法让它工作。

```
$(document).on('click', '.change', function() {
if (this.src == 'images/on.gif')
  this.src = 'images/off.gif';
else
  this.src = 'images/on.gif';
}); 
```

我已经搜索过了，是的，我发现了类似的问题，但我似乎真的无法让它发挥作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-17T15:58:17.670

`.change`不是图像，它是父 TD ：

```
$(function() {
    $(document).on('click', '.change', function () {
        var img = $(this).find('img');
        img.attr('src', (img.attr('src') == 'images/on.gif' ? 'images/off.gif' : 'images/on.gif'));
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:58:26.320

`.change`是表格单元格元素，而不是图像元素

```
$(document).on('click', '.change img', function () { 
```

# vb.net - 如何使用多个分隔符拆分字符串

> ID：14922957
> 
> 赞同：3
> 
> 时间：2013-02-17T15:56:14.580
> 
> 标签：vb.net

下面是我在 SSIS 包中使用的脚本。

```
If (Row.AnswerType.Trim().ToUpper = "MULTIPLE SELECT" And _
    Row.SurveyQuestionID = Row.SurveyDefinitionDetailQuestionNumber) Then

    Dim Question1 As String = Row.SurveyDefinitionDetailAnswerChoices.ToUpper.Trim()
    Dim ans1 As String = Row.SurveyAnswer.ToUpper.Trim()

    For Each x As String In ans1.Split(New [Char]() {CChar(vbTab)})
        If Question1.Contains(x) Then
            Row.IsSkipped = False
        Else
            Row.IsSkipped = True
            'Row.IsAllowed = True
            Row.ErrorDesc = "Invalid Value in Answer Column For Multiple Select!"
        End If
    Next
End If 
```

此脚本仅在将制表符作为分隔符时才会成功。但我需要制表符和非制表符作为分隔符。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-17T16:14:11.483

将所有需要的字符添加到字符数组中

```
ans1.Split(New [Char]() { CChar(vbTab), CChar(" "), CChar(";") }) 
```

或者

```
ans1.Split(New [Char]() { CChar(vbTab), " "C, ";"C }) 
```

通过使用字符文字后缀`C`.

# gcc - 有没有一种简单的方法来对编译器输出进行颜色编码？

> ID：14922960
> 
> 赞同：39
> 
> 时间：2013-02-17T15:56:28.917
> 
> 标签：gcc, g++, ansi-colors

gcc（或其他编译器）通常会生成大量文本输出，并且很难看到错误在哪里或错过警告。我已经进行了一些搜索，但没有找到一个干净简单的解决方案来对编译器输出进行颜色编码（例如警告是黄色的，错误是红色的，等等......）

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-04-13T07:27:58.917

[Gcc 4.9 似乎已](https://gcc.gnu.org/onlinedocs/gcc-4.9.2/gcc/Language-Independent-Options.html)通过`-fdiagnostics-color`标志添加了此功能：

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-17T16:02:03.703

如果您正在寻找非常简单的东西，这是一个替代方案：

```
#!/bin/bash -e

make ${@} 2>&1 | perl -wln -M'Term::ANSIColor' -e '
m/Building|gcc|g++|\bCC\b|\bcc\b/ and print "\e[1;32m", "$_", "\e[0m"
or
m/Error/i and print "\e[1;91m", "$_", "\e[0m"
or
m/Warning/i and print "\e[1;93m", "$_", "\e[0m"
or
m/Linking|\.a\b/ and print "\e[1;36m", "$_", "\e[0m"
or
print; ' 
```

只需将您的 make 别名到此脚本并确保它是可执行的...

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-02-17T15:58:57.483

Debian 和 Ubuntu`colorgcc`为此提供了软件包。

我通常运行`gcc`（和`make`）通过`emacs`然后`M-x compile`消息被着色。

### 附加物

[GCC 4.9](http://gcc.gnu.org/gcc-4.9/changes.html)具有本机着色功能，而[GCC 6](https://gcc.gnu.org/gcc-6/)（2016 年 4 月末发布）（可能还有[GCC 5](https://gcc.gnu.org/gcc-5)）默认启用它（当 stdout 是终端时）。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-06-14T23:37:41.413

好的，我也会留下一个关于我自己的（基于python的）工具的通知:)

它被称为[可插拔输出处理器](http://zaufi.github.io/pluggable-output-processor.html)，不仅用于对特定程序的输出进行着色。这是之前的示例 GCC 输出：

![可插拔输出处理器之前](../Images/8752f3f5cf422fdb7ed999639f036b55.png) 后： ![可插拔输出处理器之前](../Images/13eae7d96eafa5e8cebc142a3b7841fd.png)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-02-17T15:59:29.767

请参阅[colorgcc](http://schlueters.de/colorgcc.html)，这是一个 perl 脚本，它可以为 gcc 输出提供色彩。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-02T06:45:05.673

# 如何安装和使用 colorgcc 为你的 gcc 编译器输出着色：

到目前为止，这里至少有 3 个答案提到[colorgcc](https://github.com/colorgcc/colorgcc)，但没有一个解释如何安装它！（这并不明显）。所以，这里是如何在 Ubuntu 中安装最新版本！

1.  转到[此处](https://github.com/colorgcc/colorgcc)并单击“克隆或下载”->“下载 Zip”。我把它保存到“~/Downloads/Install_Files”
2.  在文件浏览器中导航到它并右键单击它并转到“在此处提取”。我现在有一个名为“~/Downloads/Install_Files/colorgcc-master”的目录。
3.  将“colorgcc.pl”脚本复制到“/usr/bin/colorgcc”以“安装”它（确保根据上面提取的位置使用正确的目录）：`sudo cp ~/Downloads/Install_Files/colorgcc-master/colorgcc.pl /usr/bin/colorgcc`
4.  使其可执行：`sudo chmod +x /usr/bin/colorgcc`
5.  如果“~/bin”目录尚不存在，则创建它：`mkdir ~/bin`
6.  *创建指向“/usr/bin/colorgcc”的符号链接，这样每当您调用`gcc`或`g++`它自动调用时`colorgcc`：
    *   `ln -s /usr/bin/colorgcc ~/bin/g++`
    *   `ln -s /usr/bin/colorgcc ~/bin/gcc`
    *   （如果您出于某种原因想要卸载 colorgcc，只需删除这些符号链接“~/bin/g++”和“~/bin/gcc”，以及 Perl 脚本：“/usr/bin/colorgcc”，你就完成了)
7.  完毕！

`g++`这是我打电话时的示例输出`g++ -Wall -std=c++11 time_until_overflow_2.cpp -o time_until_overflow_2`：

[![在此处输入图像描述](../Images/817de0628e5a1ec0b3720fe2305348b1.png)](https://i.stack.imgur.com/KaHt5.png)

*注意：在“~/bin”中创建这些符号链接仅在“~/bin”位于实际和可执行文件所在文件夹*之前的路径变量中时才有效。*为确保您的路径中有“~/bin”，您可以使用以下命令查看 PATH 变量内容：。如果您在路径的开头没有看到“/home/YOUR_USERNAME/bin”，请添加：。`gcc``g++``echo $PATH``export PATH=~/bin:$PATH`

参考：

请参阅此处了解更多信息。以及我最初学习大部分这些步骤的地方：[https](https://imranfanaswala.wordpress.com/2009/02/02/setting-up-colorgcc/) ://imranfanaswala.wordpress.com/2009/02/02/setting-up-colorgcc/ 。谢谢伊姆兰·法纳斯瓦拉！

〜GS [_](http://www.electricrcaircraftguy.com/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-20T15:03:03.167

您可以使用[GilCC](http://www.onlysolutionssoftware.com/gilcc/)，它是一个 Ruby 工具，可以将 GCC 输出实时转换为颜色。现在您有两个选择：Perl 脚本 (colorGCC) 或 GilCC，如果您已经使用 Ruby，您会喜欢 GilCC。

GilCC 独有；GilCC 具有警告和错误计数器，还显示编译时间，当您尝试改进时非常方便。因为它在 Ruby 中，所以它是跨平台的。它很灵活，你可以添加更多的宝石来定制你想要的任何东西。

下载页面的链接在这里。

[https://github.com/gilmotta/GilCC](https://github.com/gilmotta/GilCC)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-05-22T02:54:03.013

尽管 GCC 4.9 具有 -fdiagnostics-color 选项来启用终端的彩色输出，但我创建了一个名为“ [crror](https://github.com/bearmini/crror) ”的小工具来获得彩色编译器输出。

它也支持输出`make`。如果有人需要，我可以为其他工具添加着色模式。

# jquery - 这个ajax调用中的错误是什么？

> ID：14922962
> 
> 赞同：0
> 
> 时间：2013-02-17T15:56:58.810
> 
> 标签：jquery, ajax, post

也许这可能非常简单，我找不到为什么这个 ajax 调用不起作用。我放置了有效的 post call 等效项。

```
 //this works
    $(document).ready(function () {
        $('#ingresa_usuario_form').submit(function (event) {
            event.preventDefault();
            var url = $(this).attr('action');
            var datos = $(this).serialize();
            $.post(url, datos, function (resultado) {
                $('#posted_values').html(resultado);
            });
        });
    });

    //this doesn't work
    $(document).ready(function(){
        $('#ingresa_usuario_form').submit(function (event) {
            event.preventDefault();
            $.ajax({
                type: "POST",
                url: $(this).attr('action'),
                data: $(this).serialize(),
                dataType: "text/plain",
                success: function (response) {
                    $('#posted_values').html(response);
                }
            });
        })
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:13:23.983

看起来您的 url 不接受 contentType“text/plain”，并且只接受 $.post 的默认 contentType，即“application/x-www-form-urlencoded; charset=UTF-8”。希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:34:40.393

从[$.ajax 教程](http://api.jquery.com/jQuery.ajax/) `dataType`只能是`xml`, `json`,`script`或`html`. 但是需要更多关于什么是“这不起作用”的信息。

# jquery - 不仅要等待页面加载，还要等待它的内容通过 ajax 调用更新

> ID：14922970
> 
> 赞同：0
> 
> 时间：2013-02-17T15:57:49.947
> 
> 标签：jquery, ajax, get, load

我正在使用 jQuery 和 ajax 来获取远程网页。如果您将此网页加载到浏览器中，它会正常加载，但在大约 100 毫秒后会显示另一个表示计数器的元素。此计数器插入特定位置并具有特定类。这是这个地方的 HTML：

```
<span class="unreadcount">1</span> 
```

我正在尝试为 chrome 制作一个插件，它需要这个值。问题是该值在页面加载后不可用，但我必须等待从页面到服务器的请求（未读计数）完成，然后再处理页面的 HTML 以获得我想要的值。

有什么办法可以用 jQuery 做到这一点？我正在使用以下代码来获取 HTML 页面：

```
$.ajax({
           async: false,
           cache: false,
           type: 'GET',
           dataType: 'html',
           url: 'https://somesite.com/index.php',
           success: function(data1) {
               var descNode = document.createElement("div");
               descNode.innerHTML = data1;
               var unreadcount = descNode.getElementsByClassName("unreadcount");
            /*process unreadcount etc*/
         },
         error: function () {
            // something went wrong with the request
            error_occurred();
            return;
         }
      }); 
```

不幸的是，每次 unreadcount.length 都是 0，我注意到计数器没有与页面一起加载，而是在不久之后加载。

在处理页面之前如何等待计数器加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T16:08:40.460

你不能。

您将网页作为字符串获取。因此，不会执行任何 JavaScript。

您最好的选择是尝试复制获取未读邮件计数的请求。也就是说，如果您确定它是通过 AJAX 完成的。

虽然，可能使用 an`<iframe>`可能会有所帮助。而且，对您有利的是，您只需要一个仅适用于 Chrome 的解决方案，而不是一个容易失败`<iframe>`的跨浏览器解决方案。`<iframe>`

# objective-c - 在 OS X 中以编程方式捕获音频

> ID：14922976
> 
> 赞同：1
> 
> 时间：2013-02-17T15:58:12.720
> 
> 标签：objective-c, macos, cocoa, core-audio

我想知道如何在我的应用程序中收听应用程序（例如 iTunes）产生的音频流。我正在为在我正在开发的应用程序中需要此功能的客户工作（它是一个音频分析工具）。最好这不会涉及使用任何类型的内核扩展来完成此操作。

我对听到“Audio HiJack”或任何这样做的闭源解决方案不感兴趣。请记住，我正在尝试在我正在编写的程序中执行此操作。

提前感谢您提供的任何帮助。

# php - php代码显示目录中的图像不起作用

> ID：14922978
> 
> 赞同：0
> 
> 时间：2013-02-17T15:58:12.813
> 
> 标签：php, image

我有这个代码来显示图像，每个用户都有自己的，我会评论它以节省您的时间

```
 <?php
session_start();
$name=$_SESSION['valid_user']; //saved current username in variable
$loc="./uploads/";             //location of image directory
$path=$loc.$name;              //current user's folder to save his images 
echo $path."<br>";             //i used this to make sure the path is ok, only for testing

if(is_dir($path))              //if directory exists, show it exists,otherwise show it
{                              //doesnt exists
    echo "<br>exists";
} 
else 
{ 
        echo "<br>not exists"; 
}
$files = glob($path."/");
for ($i=1; $i<count($files); $i++)  
{
    $num = $files[$i];          //picture number
    print $num."<br />";
    echo '<img src="'.$path.'" alt="random image" height="100" width="100"/>'."<br /><br />";
}                           //shows the picture till the last one
?> 
```

我得到的输出是这个

```
./uploads/user_name

exists 
```

但它不显示图像，即使文件夹不为空（上传脚本工作正常）。

***编辑; 解决了它（低代表，无法回答我自己的问题）。***

知道了。对于任何关心的人，这条线在这里

```
echo '<img src="' . $path . '/' . $files[$i] . '" <!-- etc --> />'; 
```

没有工作，因为我添加了已经包含路径的 $files，并且它正在向 img src 提供输入

```
/uploads/username/uploads/username 
```

所以这是相同路径的两倍。删除 $path 后，只使用

```
<img src="' . $files[$i] . '" 
```

成功了。谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:10:07.883

我认为您需要将通配符路径传递给`glob`: `glob($path . '/*')`。您也没有在图像源属性中打印文件名：

```
echo '<img src="' . $path . '/' . $files[$i] . '" <!-- etc --> />'; 
```

此外，您`$num`实际上是文件名，而不是图片编号 - 即`$i`. `foreach`您可以使用以下构造真正简化该循环：

```
foreach($files as $filename) {
  // etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:12:49.660

您需要添加使用 glob afaik 的模式

```
$files = glob($path."/*.*"); // all files
$files = glob($path."/*.jpg"); // all jpgs etc.pp

foreach($files as $idx => $file)
{
    $num = $idx+1; //idx starts with 0 so we add one here
    print $num."<br />";
    echo '<img src="'.$path.'/'.$file'" alt="random image" height="100" width="100"/>'."<br /><br />";
} 
```

# android - 在第一个 NDK 应用程序上出现异常

> ID：14922979
> 
> 赞同：1
> 
> 时间：2013-02-17T15:58:14.267
> 
> 标签：android, eclipse-plugin, android-ndk

我开始学习NDK。我已经下载了最近的 NDK 工具和 eclipse 插件。我遵循了基本教程并尝试运行。我在没有 eclipse 插件（手动调用`ndk-build`）的情况下让它工作，但使用插件我得到了这个异常：

`02-17 17:49:01.477: E/AndroidRuntime(9746): java.lang.UnsatisfiedLinkError: performOperation`

这是我的代码：

```
package com.helloworld;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class HelloWorld extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_hello_world);

    NativeLibrary nativeobject = new NativeLibrary();
    nativeobject.result(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.hello_world, menu);
        return true;
    }

} 
```

和：

```
package com.helloworld;

import android.content.Context;
import android.widget.Toast;

public class NativeLibrary {

    /* *
     * performOperation is defined in native library
     */
    public native String performOperation();

    /* *
     * loads the library shared object
     */
    static {
        System.loadLibrary("NativeLibrary");
    }

    /* *
     * Computes the result
     */
    public void result(Context ctx) {
        Toast.makeText(ctx, performOperation(), Toast.LENGTH_SHORT).show();
    }
} 
```

cp:

```
#include <jni.h>

JNIEXPORT jstring JNICALL Java_com_helloworld_NativeLibrary_performOperation(
        JNIEnv* env, jobject o) {
    return env -> NewStringUTF("this is NativeLibrary");
} 
```

安卓.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := NativeLibrary
LOCAL_SRC_FILES := NativeLibrary.cpp

include $(BUILD_SHARED_LIBRARY) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:03:27.527

在 CPP 文件中，`extern "C"{}`在函数周围添加：

```
extern "C" {
JNIEXPORT jstring JNICALL Java_com_helloworld_NativeLibrary_performOperation(
        JNIEnv* env, jobject o) {
    return env -> NewStringUTF("this is NativeLibrary");
}

} 
```

# android - ShareActionProvider 自定义图标

> ID：14922980
> 
> 赞同：1
> 
> 时间：2013-02-17T15:58:16.793
> 
> 标签：android, android-actionbar, actionbarsherlock, shareactionprovider

我使用自定义图标实现了 shareActionProvider(on ABS)，但似乎图标已经以某种方式扩展（可能在共享操作中添加了额外的填充）并且比其他操作项更大。除了分享动作之外，所有动作项都有固定的 48X48 大小并正确显示。操作项如下所示：

![在此处输入图像描述](../Images/0a2f22f74f5fe14e72e820fced01499c.png)

我试图覆盖 activityChooserViewStyle（我认为这是组件 shareActionProvider 正在生成）但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T22:48:20.640

好的。发现了问题。由于某种原因，“共享”的大小与操作栏中的其他操作不同（可能是因为它打开了一个列表？）。在查看内置的 android drawable: 时找到了它`@drawable/abs__ic_menu_share_holo_dark`。就此而言，在 MDPI 中它是 32X32。

# c# - 如果我有字符和长度，构建字符串的最简单方法是什么

> ID：14922985
> 
> 赞同：5
> 
> 时间：2013-02-17T15:58:27.743
> 
> 标签：c#, string

在 C# 中，作为输入，我有：

字母：“A”
长度：5

我想输出：

“啊啊啊”

除了循环之外，还有更优雅的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-17T15:59:51.880

您可以使用字符串构造函数：`new string('A', 5);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T15:59:53.933

您可以只使用[重复字符串构造函数的字符](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)来创建字符串。

```
Console.WriteLine(new String('A', 5)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-17T16:00:30.397

是的：

```
String st = new String('A', 5); 
```

请参阅[MSDN](http://msdn.microsoft.com/en-us/library/xsa4321w.aspx)。

# java - Java 中的 2D 图形渲染

> ID：14922999
> 
> 赞同：2
> 
> 时间：2013-02-17T16:00:01.967
> 
> 标签：java, graphics, 2d

我正在开发一款类似于口袋妖怪（黄色/红色/蓝色）的游戏，但我对如何创建交互式地图有点迷茫。对此的任何想法都会有所帮助，我什至不确定从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-17T18:08:26.890

尝试联系 Toni Epple，看看他是否会发布 JavaFX 游戏引擎的早期版本。

*   一篇关于[将框架用作](http://jayskills.com/blog/2013/01/09/writing-a-tile-engine-in-javafx/)Pokemon 类游戏的 TileEngine 的文章。
*   该引擎利用[TMX 平铺地图格式](https://github.com/bjorn/tiled/wiki/TMX-Map-Format)，并将 JavaFX 与[Box2D](http://www.jbox2d.org/)用于物理集成。
*   这是[175 LOC 中的 SpaceInvaders](http://jayskills.com/blog/2013/02/13/space-invaders-in-less-than-175-loc/)。

即使您尚未公开使用该引擎，Toni 的 TileEngine 博客条目也应该提供一些有关如何开始使用的良好背景知识。

[这是在 TileMap 上](http://m.youtube.com/watch?v=1L1sY2NV8m8&feature=plcp)进行路径查找的引擎的 YouTube 链接，Toni 在他的 YouTube 帐户中有其他演示。

[Java Gaming 论坛](http://www.java-gaming.org/)为 Java 游戏开发提供了极好的资源，并且是一个活跃且乐于助人的社区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-17T16:07:01.793

您可能想学习使用 JavaFX 来开发您的游戏。

这里有一个教程，但是网上有很多：

[http://carlfx.wordpress.com/2012/03/29/javafx-2-gametutorial-part-1/](http://carlfx.wordpress.com/2012/03/29/javafx-2-gametutorial-part-1/)

我认为与 JavaFX 相比，Swing 使用起来太难了，但这将是另一种选择。有关帮助您决定的更多信息，您可以查看以下问题：[https ://stackoverflow.com/questions/1318645/javafx-or-swing](https://stackoverflow.com/questions/1318645/javafx-or-swing)