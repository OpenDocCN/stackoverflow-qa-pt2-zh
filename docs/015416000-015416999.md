# StackOverflow 问答 15416000-15416999

# jakarta-ee - guava 之类的用于 Web 开发的 java 库

> ID：15416000
> 
> 赞同：4
> 
> 时间：2013-03-14T17:21:08.020
> 
> 标签：jakarta-ee, gwt, web-applications, spring-mvc, guava

我正在搜索一个提供高质量、经过良好测试和绝对基本类的 java 库，这些类很可能在每个（干净的）Web 应用程序中重新实现。例子是

*   持有偏移量和限制的分页器值类
*   从请求中获取类型值或默认值的方法，例如*request.getInteger("limit", 50)*
*   UTF-8 的 URLEncoder 和 URLDecoder 的包装器，不会抛出
*   有效 URL、解析器和构建器的所有组件的不可变微小值类
*   使时间相关代码可测试的时钟接口和实现
*   ...（我会找到更多）

我知道 Spring 有很多有用的东西，但仍然缺少上面这些简单的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:19:47.707

看看[谷歌网络工具包](https://developers.google.com/web-toolkit/)。它可以完成您所追求的大部分工作。

我已经使用过它，并且会再次使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T19:13:01.833

我曾经参与过的 Evert 项目在内部创建了大量类似的实用程序。

看看许多 web 框架的源代码，它们肯定有一些 util 包或类（请注意，它主要是供内部使用的，他们不会期望外部代码使用它）。

一些 Apache Commons 库最初是因为这个而构建的，但它们已经超越了简单的实用程序，而且现在它们并不总是得到很好的维护。

现在接近的东西是 OmniFaces，但它专门用于 JSF，当您请求时，什么？普通 Servlet、GWT 和 Spring MVC？

# web-platform-installer - 您尝试使用的功能位于不可用的网络资源上

> ID：15416002
> 
> 赞同：4
> 
> 时间：2013-03-14T17:21:10.877
> 
> 标签：web-platform-installer

Web平台安装程序4.5是从[官方网站](http://www.microsoft.com/web/downloads/platform.aspx)下载的。在安装过程中出现问题：在文件夹中看不到`wpi.msi`文件。但是当我在资源管理器中打开这个文件夹时，我看到了这个文件。目前我有 Web 平台安装程序**4.0**并希望升级到版本**4.5**。所以我无法安装 Web Platform Installer 4.5。

![wpi.msi 丢失](../Images/a5fbfa21663f5f0bd0bdf3613348f1a1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-07T21:58:58.440

迟到总比不好！

尝试使用此解决方案，您的注册表项似乎已损坏。

[https://support.microsoft.com/en-us/help/17588/fix-problems-that-block-programs-from-being-installed-or-removed](https://support.microsoft.com/en-us/help/17588/fix-problems-that-block-programs-from-being-installed-or-removed)

# javascript - 如何将 $rootScope 注入 AngularJS 单元测试？

> ID：15416006
> 
> 赞同：15
> 
> 时间：2013-03-14T17:21:19.487
> 
> 标签：javascript, unit-testing, dependency-injection, angularjs, jasmine

假设我有一个依赖于 $rootScope 中的值的服务，如以下（微不足道的）服务：

```
angular.module('myServices', [])
.factory('rootValGetterService', function($rootScope) {
    return {
        getVal: function () {
            return $rootScope.specialValue;
        }
    };
}); 
```

如果我想通过在 $rootScope 中输入一个值来对此进行单元测试，那么最好的方法是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-11-28T13:52:44.703

```
...
var $rootScope;
beforeEach(inject(function(_$rootScope_) {
  $rootScope = _$rootScope_;
}));
... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T17:21:19.487

通过使用 provide()，你可以注入一个新的 $rootScope：

```
describe('in rootValGetter', inject(function ($rootScope) {
    var scope;
    var testRootValGetter;

    beforeEach(function () {

        scope = $rootScope.$new();

        module(function ($provide) {
            $provide.value('$rootScope', scope);
        });

        inject(function ($injector) {
            testRootValGetterService = $injector.get('rootValGetterService');
        });
    });

    it('getVal returns the value from $rootScope', function() {
        var value = 12345;

        scope.specialValue = value;

        expect(testRootValGetterService.getVal()).toBe(value);
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T15:20:34.957

包括`angular-mocks.js`，然后使用[`angular.mock.inject`](https://docs.angularjs.org/api/ngMock/function/angular.mock.inject)：

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-25T14:14:32.743

如果您正在注入`$scope`，您可以直接模拟您需要的属性，而不是创建一个新的范围`$rootScope`。

然后`$rootScope`将注入您正在测试的代码中可用的那些属性。

至少这是我解决同样问题的方法。

以下代码应该适用于您的示例。

```
beforeEach(inject(function($rootScope) {
    $rootScope.specialValue = 'whatever';
})); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-22T05:12:28.507

试着给出一个更详细的答案，包括测试用例：

...

```
var $rootScope;
beforeEach(inject(function(_$rootScope_) {
  $rootScope = _$rootScope_;
})); 
```

...

```
 it('getVal returns the value from $rootScope', function() {
        var value = 12345;
        $rootScope.specialValue = value;
        expect(testRootValGetterService.getVal()).toBe(value);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-03T19:13:37.297

这是我所做的：

```
it('some kind of wacky test', function($rootScope, Translate){
    $rootScope.lang = 'en';
    expect(Translate('overview').toBe('Overview');
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-10T18:51:57.907

希望这对其他人有所帮助，因为这是解决类似问题的方法。

```
var rootValGetterService;

beforeEach(inject(function($rootScope,$injector) {
    $rootScope.specialValue = "test";
    rootValGetterService= $injector.get('rootValGetterService');
}));

it("Should have a service", function () {
    expect(rootValGetterService).toBeDefined();
}); 
```

# ios - 将行保存到核心数据时的时间延迟？

> ID：15416010
> 
> 赞同：3
> 
> 时间：2013-03-14T17:21:37.400
> 
> 标签：ios, core-data

我构建了一个简单的问答游戏，可以在 iOS 5.1、6.0 和 6.1 上运行。我使用核心数据，我有这两个对象：

```
@interface Category : NSManagedObject
@property (nonatomic, retain) NSString * category;
@property (nonatomic, retain) NSNumber * difficulty;
@property (nonatomic, retain) NSSet *questions;
@end 
```

和

```
@interface Question : NSManagedObject
@property (nonatomic, retain) NSNumber * disabled;
@property (nonatomic, retain) NSNumber * displayTypeEasy;
@property (nonatomic, retain) NSNumber * displayTypeHard;
@property (nonatomic, retain) NSNumber * displayTypeMedium;
@property (nonatomic, retain) NSNumber * questionID;
@property (nonatomic, retain) Category *category;
@end 
```

这个想法是每个问题都只有一个类别（例如，娱乐或体育）。Category-Question 关系是一对多的；在我的样本数据中，有 3 个类别和 20 个问题。

我有一个设置窗口，允许用户更改他们想要玩的类别和/或更改给定类别的难度级别（即在此窗口中，对类别对象进行更改）。当用户按下 OK 时，将执行以下代码：

```
- (IBAction)okPressed:(UIButton *)sender {
    NSError * error;
    BOOL wasSaveSuccessful = [[Constants database].managedObjectContext save:&error];
    NSLog(@"wasSaveSuccessful:%@   areChangesPending:%@", wasSaveSuccessful ? @"YES" : @"NO",
          [[Constants database].managedObjectContext hasChanges] ? @"YES" : @"NO");
} 
```

顺便说一句：“[Constants database]”是一个 UIManagedDocument 代表我的持久存储。诚然，这可能不是保持这种状态的最佳方法，但我不相信这是我问题的根源。

接下来，用户可以按下新游戏按钮。然后执行此提取：

```
- (void) loadBatchOfQuestions
{
    if ([self.questionBatch count] == 0) { // self.questionBatch is an NSMutableArray
        // TEST #1
        for (Category * c in [[Category allCategories] objectEnumerator])
            NSLog(@"category:%@   difficulty:%d", c.category, [c.difficulty integerValue]);

        // TEST #2
        Question * q1 = [Question queryQuestionWithQuestionID:50150];
        NSLog(@"q1 difficulty:%d", [q1.category.difficulty integerValue]);

        NSFetchRequest * request = [NSFetchRequest fetchRequestWithEntityName:@"Question"];
        request.predicate = [NSPredicate predicateWithFormat:
                             @"(disabled == NO)"
                             @"AND (questionID > %ld)"
                             @"AND (((category.difficulty == %i) AND (displayTypeEasy != NULL))"
                             @" OR ((category.difficulty == %i) AND (displayTypeMedium != NULL))"
                             @" OR ((category.difficulty == %i) AND (displayTypeHard != NULL)))",
                             MAX_QUESTIONID_FOR_TEST_QUESTIONS,
                             DIFFICULTY_EASY, DIFFICULTY_MEDIUM, DIFFICULTY_HARD];

        NSError * error;
        [self.questionBatch addObjectsFromArray:[[Constants database].managedObjectContext executeFetchRequest:request error:&error]];
} 
```

这就是问题所在：如果在按下 OK 并离开设置窗口后，我在按下 New Game 之前等待了大约 10 秒，那么一切正常；loadBatchOfQuestions 中的 fetch 基于当前的 Category 数据返回正确的行。但是，如果我在关闭设置窗口后立即按下新游戏，我会看到旧数据（即我查询了错误的问题）。

对于我在上面添加的 NSLog 语句：

*   在 okPressed 中，我总是看到 wasSaveSuccessful=YES 和 areChangesPending=NO（如我所料）
*   对于 loadBatchOfQuestions 中的 TEST #1，我获取了所有类别行（在本例中为 3）并验证了我看到的是最新数据
*   对于 loadBatchOfQuestions 中的 TEST #2，我获取一个问题行以查看它是否显示正确的类别数据；确实如此。

然而，随后的 fetch 返回旧数据。

这是我*认为*正在发生的事情：

*   当我在 okPressed 中调用 save: 时，它实际上是将更改写入内存缓存。然后这些更改会在 3-10 秒内异步写入 Core Data 持久存储。
*   TEST #1 和 TEST #2 中的提取是非常基本的；他们只是用一个简单的谓词获取对象（在 TEST #1 的情况下没有谓词，因为我想要所有行，在 TEST #2 的情况下是 @"questionID = %ld"）。对于这些情况，提取可以在从持久存储中检索数据之前检查缓存中的当前数据。（NSManagedObjectContext.executeFetchRequest 的文档说“如果上下文中的对象已被修改，则根据其修改后的状态评估谓词，而不是根据持久存储中的当前状态。因此，如果上下文中的对象已被修改，则如果它满足获取请求的条件，即使更改尚未保存到存储并且存储中的值不满足条件，请求也会检索它。相反，
*   但是，我在 loadBatchOfQuestions 中的主要谓词非常复杂，以至于在评估缓存时提取不会/不能查看缓存，因此我看到的是旧数据。但是，如果我等待的时间足够长，那么在执行此 fetch 时，持久存储将已更新。

我的问题：

*   我的分析有意义吗？或者有人在我的代码中看到其他错误/缺陷吗？
*   如果我是正确的，有没有办法解决这个问题？也许调用一个委托方法告诉我数据何时“真正”保存到持久存储？或者我需要设置的 UIManagedDocument 或 NSManagedObjectContext 的属性？

# saml - SAML：通过单个 IdP 路由第三方 IdP 消息是否有效

> ID：15416011
> 
> 赞同：0
> 
> 时间：2013-03-14T17:21:39.637
> 
> 标签：saml

我对 SAML (v2) 协议的理解是服务提供者应该直接与身份提供者交互以交换授权请求和断言消息。

我可以想到许多原因，为什么这是一个坏主意（破坏消息签名，让中间 IdP 访问来自其他 IdP 的信息），但是 SAML 是否支持任何允许以下安排的场景？

SP <------> MainIdP <-----> ThirdPartyIdP

因此（假设地）假设 MainIdP 有一些聪明的方法来确定 SP 用户需要对 ThirdPartyIdP 进行身份验证，它将委托给 ThirdPartyIdP 然后接收响应、处理它并回复给 SP。SAML 是否允许这样做？（我之所以问，是因为软件供应商建议了这种方法，我认为它不受支持，而且从根本上不安全。）

据我所知，“正确”的方法是将 SP 配置为独立了解两个 IdP，并向用户提供可供选择的列表，或委托给可以询问用户或推断的发现服务IdP 使用的其他方式。这是正确的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:01:21.613

大多数 SAML 的联合身份提供者都有“家庭领域发现”屏幕的概念。

SP 被“绑定”到 MainIdP，但 MainIdP 显示一个屏幕，显示与其联合的所有其他 IDP。从该列表中，您选择 ThirdPartyIdP。

# php - 如何优化由大型数据集引起的慢查询？

> ID：15416015
> 
> 赞同：0
> 
> 时间：2013-03-14T17:21:51.727
> 
> 标签：php, sql, optimization

我撤回了很多信息，结果我的页面在大约 22~24 秒内加载。我能做些什么来优化我的代码吗？

这是我的代码：

```
<?php
$result_rules = $db->query("SELECT source_id, destination_id FROM dbo.rules");

while($row_rules = sqlsrv_fetch_array($result_rules)){
$result_destination = $db->query("SELECT pk_id, project FROM dbo.destination WHERE pk_id=" . $row_rules['destination_id'] . " ORDER by project ASC");
    while($row_destination = sqlsrv_fetch_array($result_destination)){
        echo "Destination project: ";
        echo "<span class='item'>".$row_destination['project']."</span>";
        echo "ID: ".$row_rules['destination_id']."<br>";
        if ($row_rules['source_id'] == null) {
            echo "Source ID for Destination ID".$row_rules['destination_id']." is NULL<br>";
        } else {
            $result_source = $db->query("SELECT pk_id, project FROM dbo.source WHERE pk_id=" . $row_rules['source_id'] . " ORDER by project ASC");
            while($row_source = sqlsrv_fetch_array($result_source)){    
                echo "Source project: ";
                echo $row_source['project'];
                echo " ID: ".$row_rules['source_id']."<br>";
            }
        }
    }
}
?> 
```

这是我的表的样子：

源表：pk_id：int，project：varchar（50），feature：varchar（50），里程碑：varchar（50），reviewGroup：varchar（125），groupId：int

规则表：pk_id:int、source_id:int、destination_id:int、login:varchar(50)、status:varchar(50)、batchId:int、srcPGroupId:int、dstPGroupId:int

目标表：pk_id:int、project:varchar(50)、feature:varchar(50)、milestone:varchar(50)、QAAssignedTo:varchar(50)、ValidationAssignedTo:varchar(50)、Priority:varchar(50)、groupId :int

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:26:44.947

添加一个索引，`(pk_id, project)`使其包含对查询重要的所有字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:26:59.347

1.  确保 pk_Id 已编入索引：[http ://www.w3schools.com/sql/sql_create_index.asp](http://www.w3schools.com/sql/sql_create_index.asp)

2.  不要使用 select *，而是只返回您需要的列，除非您需要所有这些列。

3.  我还建议将您的 SQL 代码移动到服务器并调用存储过程。

4.  如果您的后端是 mysql，您可以考虑使用 LIMIT：http: [//php.about.com/od/mysqlcommands/g/Limit_sql.htm](http://php.about.com/od/mysqlcommands/g/Limit_sql.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:27:14.823

我假设 else 子句会减慢您的代码速度。我建议在开始时保存您需要的所有数据，然后在 else 子句中再次访问该数组。基本上，您不需要每次都运行它。

```
$result_destination = $db->query("SELECT * FROM dbo.destination WHERE pk_id=" . $row_rules['destination_id'] . " ORDER by project ASC") 
```

您可以更早地获取数据并使用 PHP 对其进行迭代。

```
$result_destinations = $db->query("SELECT * FROM dbo.destination ORDER by project ASC") 
```

然后稍后在您的代码中使用 PHP 来确定正确的目的地。取决于你正在做什么，它应该会节省一些时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:30:18.887

对于初学者，您可能希望减少运行的查询数量。例如，执行一个查询，遍历这些结果并运行另一个查询，然后遍历该结果集运行更多查询通常被认为是不好的。运行的查询数量呈指数增长。

例如，如果您从第一个查询返回 100 行，从每个子查询返回 10 行。第一个查询返回您循环的 100 行。对于您再次查询的每个人。您现在有 101 个查询。然后，对于这 100 个中的每一个，您运行另一个查询，每个查询返回 10 行。您现在有 1001 个查询。每个查询都必须向服务器发送数据（查询文本），等待响应并取回数据。这就是需要这么长时间的原因。

使用连接对所有表执行单个查询并遍历单个结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T17:36:13.783

另一个考虑因素是浏览器渲染 php 代码生成的 html 所需的时间。您提供的数据越多，所需的时间就越长。根据受众的要求，您可能希望一次只显示 x 条记录。

有一些 jquery 方法可以在不返回服务器的情况下增加显示的记录数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T17:54:17.277

如果您在优化查询方面需要帮助，请提供架构的详细信息和解释计划的输出。

运行嵌套循环对性能不利。在这样的嵌套循环中运行查询是导致性能非常差的一个秘诀。在 select 中使用 '*' 对性能也不利（尤其是当您只使用几列时）。

您应该首先优化您的 PHP 并合并查询：

```
$result_rules = $db->query(
     "SELECT rule.destination_id, [whatever fields you need from dbo.rules] 
             dest.project AS dest_project,
             src.project AS src_project,
             src.pk_id as src_id
      FROM dbo.rules rule
      INNER JOIN dbo.destination dest
          ON dest.pk_id=rule.destination_id
      LEFT JOIN dbo.source src
          ON src.pk_id=rule.source_id
      ORDER BY rule.destination_id, dest.project, src.project");

$last_dest=false;
$last_src=false;
while($rows = sqlsrv_fetch_array($result)){  
    if ($row['destination_id']!==$last_dest) {
       echo "Destination project: ";
       echo "<span class='item'>".$row['dest_project']."</span>";
       echo "ID: ".$row['destination_id']."<br>";
       $last_dest=$row['destination_id'];
    }
    if (null===$row['src_id']) {
       ... I'll let you sort out the rest. 
```

# python - 数组列表索引超出范围

> ID：15416016
> 
> 赞同：1
> 
> 时间：2013-03-14T17:21:54.027
> 
> 标签：python, arrays, list

我有一个大小为 155 的数组，我的程序包括您输入一个单词，然后在数组中搜索该单词。但是，当我输入`'176'`数组中的最后一个单词时，它会给出`list index out of range`错误为什么会这样？

```
i = resList.index(resiID) # --searchs list and give number where found, for last word gives 155
print len(resultss) # --prints 155
colour = resultss[i] # --error given on this line 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:26:00.207

这是预期的行为。如果您有 a`list`其中有 a `len`，`x`则`x`索引未定义。

例如：

```
lst = [0,1]
print len(lst) # 2
print lst[0] # 0
print lst[1] # 1
print lst[len(lst)] #error 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:29:41.500

您的索引超出范围。以下是列表索引的工作方式：

```
>>> a = list(range(10))
>>> a
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> i = a.index(9)
>>> i
9
>>> a[i]
9
>>> a[10]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
IndexError: list index out of range 
```

如果索引的长度是`i`，那么您可以使用范围内的任何索引`0..i-1`。最后一个有效索引是`len(mylist) - 1`。

155 超出范围，可能是因为您在一个列表/可迭代 ( `resList`) 中获取索引并将其用作不同/较小列表/可迭代 ( `resultss`) 的索引。

# javascript - 如何在一个页面上获得多个地图？

> ID：15416017
> 
> 赞同：3
> 
> 时间：2013-03-14T17:21:59.557
> 
> 标签：javascript, google-maps-api-3, multiple-instances

我将需要在同一页面上至少有 3 张地图（一张在另一张下方，而不是并排），每张地图都包含多个标记。谁能告诉我如何在同一页面上获得三个版本（之后我可以修改每个版本的详细信息）？我基本上在这里感觉自己的方式，对javascript知之甚少。

非常感谢 - 罗杰

```
<div id="map" style="height:400px;width:541px;display:block;">
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">
function mapIt(){

    var latlng = new google.maps.LatLng(24.00, 0.00);
    var myOptions = {
        zoom: 1,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
    }
    var map = new google.maps.Map(document.getElementById('map'), myOptions);
    setMarkers(map, places);
}

var places = [
        ['London',51.50, -0.125,"Markers/green.png"],
        ['Abidjan',5.34, -4.03,"Markers/red2.png"],
        ['Abu Dhabi',24.47, 54.37,"Markers/red2.png"],

];

var popUps = [
        '<strong>London</strong><br />link to larger map',
        '<strong>Abidjan, Ivory Coast</strong><br />Content here',
        '<strong>Abu Dhabi, United Arab Emirates</strong><br />Content here>',

    ]

var infowindow;
function setMarkers(map, locations) {

     for (var i = 0; i < places.length; i++) {
        var myLatLng = new google.maps.LatLng(locations[i][1], locations[i][2]);
        var icon = locations[i][3];
        var marker = new google.maps.Marker({
            position: myLatLng,
            map: map,  
            title: locations[i][0],
            icon: icon
        });
        (function(i, marker) {
            google.maps.event.addListener(marker,'click',function() {
                if (!infowindow) {
                    infowindow = new google.maps.InfoWindow();
                }
                infowindow.setContent(popUps[i]);
            infowindow.open(map, marker);
            });
        })(i, marker);
     }
};
mapIt();
</script></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:32:57.553

我几分钟前创建的代码显示了如何在同一页面中设置四个地图。

**[从JS Fiddle](http://jsfiddle.net/NUkCs/5/)**看到它

它基本上归结为为地图设置正确数量的 div 元素：

```
<div id="map0"></div>
<div id="map1"></div>
<div id="map2"></div>
<div id="map3"></div> 
```

并初始化它们：

```
var map0 = new google.maps.Map(document.getElementById("map0"), mapOptions);
var map1 = new google.maps.Map(document.getElementById("map1"), mapOptions);
var map2 = new google.maps.Map(document.getElementById("map2"), mapOptions);
var map3 = new google.maps.Map(document.getElementById("map3"), mapOptions); 
```

**编辑：**

我更新了示例以将标记添加到以下类型的对象，以便根据您要处理的地图标记更容易访问它们。

```
var markers = {
          'map0' : [],
          'map1' : [],
          'map2' : [],
          'map3' : [],
      }; 
```

它应该将以下调试信息打印到 javascript 控制台：

```
Marker is: (60.12816100000001, 18.643501000000015) map name is: map0
(markers['map0'][0]: (60.12816100000001, 18.643501000000015)
Marker is: (61.92410999999999, 25.748151000000007) map name is: map1
(markers['map0'][0]: (60.12816100000001, 18.643501000000015)
Marker is: (32.7151137, -117.15665719999998) map name is: map2
(markers['map0'][0]: (60.12816100000001, 18.643501000000015)
Marker is: (35.86166, 104.19539699999996) map name is: map3
(markers['map0'][0]: (60.12816100000001, 18.643501000000015) 
```

因此，在我提供的示例中，我只为每个地图添加一个标记，但可以添加任意数量的标记，因为`markers`对象对每种地图类型都有数组。

干杯。

# javascript - 将重叠事件保持在顶部

> ID：15416021
> 
> 赞同：1
> 
> 时间：2013-03-14T17:22:06.127
> 
> 标签：javascript, jquery, fullcalendar

我正在使用完整的日历。

这是问题的一个示例： ![在此处输入图像描述](../Images/9a6e72ca93978ced3cdebd6a2aa7957b.png)

问题是非工作日无论如何都应该保持在首位。默认任务应该在 nwd 和超酷项目之间滑动。

有谁知道我可以在服务器端做什么，目前可以：

```
 var sortedList = eventList
            .OrderBy(p => p.resource).
            ThenBy(p => new
          DateTime(ConvertFromUnixTimestamp(p.start).Year,
          ConvertFromUnixTimestamp(p.start).Month,
          ConvertFromUnixTimestamp(p.start).Day)
          ).ThenBy(p => !p.isDate)
          .ThenBy(p => p.title).ToList();
        List<dynamic> finalList = new List<object>();

        for (int i = 0; i < sortedList.Count(); ++i)
        {
            var e = sortedList.ElementAt(i);
            finalList.Add(
                new
                {
                    id = i.ToString(),
                    realid = e.realid,
                    isDate = e.isDate,
                    title = e.title,
                    start = ResolveStartDate(StartDate(ConvertFromUnixTimestamp(e.start).AddSeconds(i))),
                    end = e.end,
                    description = e.description,
                    allDay = e.allDay,
                    resource = e.resource,
                    editable = e.editable,
                    color = e.color
                }
                );

        }

        JavaScriptSerializer js = new JavaScriptSerializer();
        string strJSON = js.Serialize(finalList); 
```

或客户端，fullcalendar 似乎有：

```
function segCmp(a, b) {
    //return (b.msLength - a.msLength) * 100 + (a.event.start - b.event.start);
    return (a.event.start - b.event.start);
}

function segsCollide(seg1, seg2) {
    //return seg1.end > seg2.start && seg1.start < seg2.end;
    return false;
}

/* Event Sorting
-----------------------------------------------------------------------------*/

// event rendering utilities
function sliceSegs(events, visEventEnds, start, end) {
    var segs = [],
        i, len=events.length, event,
        eventStart, eventEnd,
        segStart, segEnd,
        isStart, isEnd;
    for (i=0; i<len; i++) {
        event = events[i];
        eventStart = event.start;
        eventEnd = visEventEnds[i];
        if (eventEnd > start && eventStart < end) {
            if (eventStart < start) {
                segStart = cloneDate(start);
                isStart = false;
            }else{
                segStart = eventStart;
                isStart = true;
            }
            if (eventEnd > end) {
                segEnd = cloneDate(end);
                isEnd = false;
            }else{
                segEnd = eventEnd;
                isEnd = true;
            }
            segs.push({
                event: event,
                start: segStart,
                end: segEnd,
                isStart: isStart,
                isEnd: isEnd,
                msLength: segEnd - segStart
            });
        }
    } 
    return segs.sort(segCmp);
}

// event rendering calculation utilities
function stackSegs(segs) {
    var levels = [],
        i, len = segs.length, seg,
        j, collide, k;
    for (i=0; i<len; i++) {
        seg = segs[i];
        j = 0; // the level index where seg should belong
        while (true) {
            collide = false;
            if (levels[j]) {
                for (k=0; k<levels[j].length; k++) {
                    if (segsCollide(levels[j][k], seg)) {
                        collide = true;
                        break;
                    }
                }
            }
            if (collide) {
                j++;
            }else{
                break;
            }
        }
        if (levels[j]) {
            levels[j].push(seg);
        }else{
            levels[j] = [seg];
        }
    }
    return levels;
} 
```

这可以让跨越多天的事件始终保持在非工作日以下？在事件中将非工作日定义为 isDate。所以如果 event.isDate 那么它是一个非工作段。

谢谢

# asp.net-mvc-3 - EntityType 'x' 没有定义键。定义此 EntityType 的键

> ID：15416022
> 
> 赞同：5
> 
> 时间：2013-03-14T17:22:07.697
> 
> 标签：asp.net-mvc-3

我有这个接收参数的动作，我想打印出所有结果

```
public ActionResult MusicaGenero(string genero) {

            //should return  more than 30 rows 
             var results = con.artista.Where(x=>x.genero==genero);

            return View(results);
        } 
```

MusicaGenero 有这个

```
@model IEnumerable<MvcApplication1.Models.detallesMusica>

@{
    ViewBag.Title = "MusicaGenero";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Musica del genero de: @ViewBag.genero</h2>

<ul>
@foreach(var detallesMusica in Model)
{
    <li>@detallesMusica.artista</li>        
    <li>@detallesMusica.nombre</li> 
    <li>@detallesMusica.publicado</li>  
    <li>@detallesMusica.costo</li>  
}
</ul> 
```

怎么可能，但它会引发异常

```
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'album' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'genero' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'artista' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'albums' is based on type 'album' that has no keys defined.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'generos' is based on type 'genero' that has no keys defined.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'artista' is based on type 'artista' that has no keys defined.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.Entity.ModelConfiguration.ModelValidationException: One or more validation errors were detected during model generation:

\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'album' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'genero' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'artista' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'albums' is based on type 'album' that has no keys defined.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'generos' is based on type 'genero' that has no keys defined.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'artista' is based on type 'artista' that has no keys defined. 
```

这里有什么问题？我已经添加了一个密钥，但仍然给我这个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:50:11.793

如您所见，您遇到了 System.Data.Entity 错误，这些错误，至少在这种情况下，与您发布的代码无关。

实体框架需要某种方式知道它应该将哪个字段定义为主键。你可以通过两种方式告诉它如何做到这一点。

您可以定义名称为“Id”的属性，或将“Id”附加到与实体同名的属性中。例如，其中任何一个都可以工作

```
public class Album
{
  public string Id {get; set;}
  public string Name {get; set;}
}
public class Album
{
  public string AlbumId {get; set;}
  public string Name {get; set;}
} 
```

EF 会根据命名约定理解为字段`Id`或`AlbumId`主键。

您可以做的另一件事是使用`System.ComponentModel.DataAnnotations` `[Key]`属性来定义键。例如，这将使该字段`Name`成为表的主键。

```
using System.ComponentModel.DataAnnotations;
//...
public class Album
{
  [Key]
  public string Name {get; set;}
} 
```

# clearcase - 检查两个不同的配置规范是否选择完全相同的元素版本

> ID：15416029
> 
> 赞同：1
> 
> 时间：2013-03-14T17:22:21.043
> 
> 标签：clearcase

我有两个相似但不同的配置规范，我认为应该选择所有相同的元素版本。我怎样才能最容易地检查是否是这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:36:44.690

您可以创建两个动态视图，每个视图都有自己的配置规范：

```
cleartool setcs -tag aViewTag yourConfigSpecFile 
```

然后，您可以比较以下结果：

```
cleartool ls 
```

（在两种视图中）

A`cleartool ls`显示在每个视图中找到的确切版本。

更好的是，使用[fmt_ccase](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)：

```
# unix
cleartool find . -exec 'cleartool desc -fmt "Version: %n\n" $CLEARCASE_XPN'
#windows
cleartool find . -exec "cleartool desc -fmt \"Version: %n\n\" \"%CLEARCASE_XPN%\"" 
```

这将列出所有选定的版本，您可以将输出重定向到一个文件中，每个视图一个。
然后比较是微不足道的。

# google-chrome - Chrome中的CSS背景大小问题

> ID：15416035
> 
> 赞同：1
> 
> 时间：2013-03-14T17:22:29.573
> 
> 标签：google-chrome, css

我有一个 CSS 属性`background-size`设置`729px auto;`为蓝色框架的中心 div，

以下是 IE 和 Firefox 中的结果（我用红框隐藏了内容）：

![在此处输入图像描述](../Images/3097bbe8410af54366e76821aa05e4e0.png)

这是 Chrome 中的结果：

![在此处输入图像描述](../Images/7473cdc6ee4d11ebd40fb610ac1262a7.png)

是否知道 Chrome 中的属性是否有特殊技巧`background-size`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:32:41.797

为什么不使用代码而不是图像？问题解决了。

[http://jsfiddle.net/jDMxJ/](http://jsfiddle.net/jDMxJ/)

**HTML：**

```
<div class="blue">
    <div class="red">

    </div>
</div> 
```

**CSS：**

```
.blue {
    width: 626px;
    height: 326px;
    box-sizing: border-box;
    border: 2px solid blue;
    border-radius: 10px;
}

.red {
    width: 600px;
    height: 300px;
    margin: 10px auto;
    box-sizing: border-box;
    border: 3px solid red;
    border-radius: 10px;
    box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.7);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:35:38.643

经过实验，我发现 Chrome 无法识别`auto`此处的属性：`729px auto;`

它只是把它剪掉：

![在此处输入图像描述](../Images/d01c61b2511969a2d43f2fd62c32da73.png)

但是当我改变它时`729px auto;`，`729px 1px;`它工作了！

我看到蓝框:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:25:05.980

试试`box-sizing: border-box;`你的CSS。

# iphone - UILabel 不换行（如果我更改默认字体大小）

> ID：15416036
> 
> 赞同：1
> 
> 时间：2013-03-14T17:22:33.737
> 
> 标签：iphone, ios, ios6, storyboard, uilabel

我正在研究一个简单的**故事板**原型。我的 TableViewController 使用动态原型作为内容。

我有一个带有 4 个标签的单元格，其中两个将在代码中设置（标签文本）。单元格的高度也将在代码中计算。换行符设置为自动换行，**使用默认值（系统 17.0）一切正常**：

*看这里：*

![在此处输入图像描述](../Images/f34cdf538d47b99dedd52ed5db5979c3.png)

..但是如果我**更改“Fantasy Street ...”标签的字体大小，**它就不会再坏了，而是会被切断！

*看这里：使用系统字体 16*

![在此处输入图像描述](../Images/f0bb8077c89ce2bca6faf11db3fbd02c.png)

行数设置为 0 自动换行仍处于活动状态

..我也尝试在代码中手动完成，但没有改变。

有人对此有解释吗？

****编辑：** 当我添加 myLabel.frame = CGRectMake(t.origin.x, t.origin.y, t.size.width, t.size.height *2);

到 cellForRowAtIndexPath 我仍然看到被切断的标签。但是，如果我随后滚动表格视图以使标签很快位于可视区域之外，那么当它再次可见时，它将与完整的文本一起显示。

顺便说一句，我正在使用 viewTags，所以我没有专门的单元类，例如 UILabel *myLabel = (UILabel *)[cell viewWithTag:2];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T03:20:21.440

你应该检查 UILabel 宽度；宽度应小于值的宽度。然后像这样：

```
(void) viewWillLayoutSubviews {
    _landPhoneTips.preferredMaxLayoutWidth = _landPhoneTips.bounds.size.width;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T14:28:27.180

我花了几个小时处理这个相同的问题，然后昨晚终于把它解决了。更改字体大小后，您必须`UILabel`在情节提要中选择 并选择`Edit > Size`适合内容，即使您之前已经这样做了！在这样做时，您显然会重置一些在更改字体大小时会弄乱的设置。完成后，UILabel 将像以前一样包装。

# javascript - 为什么第四个嵌套值的访问方式比第五个慢？

> ID：15416038
> 
> 赞同：3
> 
> 时间：2013-03-14T17:22:36.900
> 
> 标签：javascript, performance

我正在构建一个[jsperf](http://jsperf.com/n-level-object-nesting)来说明访问嵌套对象成员所花费的时间，我发现了这个奇怪的现象。出于某种原因，第四个嵌套对象成员的测试运行速度比第五个要慢得多。我已经在 Chrome 和 Firefox 中尝试过，并且得到了相同的结果。

![在此处输入图像描述](../Images/5b17e71ad0f769aaed074dc22b3898a3.png)

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:26:37.150

你的对象是这个，我的评论补充说：

```
var obj = {
  "one": {
    "two": {
      "three": {
        "four": {
          "five": {
            "value": 0
          }
          /* MISSING "value": 0 */
        },
        "value": 0
      },
      "value": 0
    },
    "value": 0
  },
  "value": 0
}; 
```

};

然而，键上的对象`"four"`没有`"value"`键，因此显然 JavaScript 引擎必须做额外的工作来处理这种情况：错过对对象的键查找，错过对对象的键查找对象的原型`Object`，返回`undefined`，然后计算`NaN`时添加`1`到`undefined`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:26:32.137

问题是`obj.one.two.three.four`没有`value`属性。`NaN`在那种情况下，JavaScript 在最终分配给之前遍历原型链寻找缺失的属性`sum`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:31:31.413

我修复了你的测试。您没有“四”的值字段。我还在测试中添加了一个写入过程以获得更好的值； [在这里你得到了固定的 jsperf 测试](http://jsperf.com/n-level-object-nesting/4)

# ios - 孤立的 UILocalNotification - 确认

> ID：15416039
> 
> 赞同：0
> 
> 时间：2013-03-14T17:22:40.990
> 
> 标签：ios, uilocalnotification

我有一个正在使用的应用程序允许用户设置和删除 UILocalNotifications。在开发过程中，我添加和删除了 UILocalNotifications 进行测试，它似乎正在工作。

但是我看到奇怪的行为，在从设备中删除我的应用程序并再次运行它*而不*设置任何通知后，我会得到一个 UILocalNotification。此通知未在此全新安装中设置（通过在我的通知设置方法中添加断点进行检查）。

我是否有可能从以前的安装中获得了孤立的 UILocalNotification （是的，这对我来说似乎也极不可能）。

我已经尝试通过将通知设置`alertBody`为特定于每个新安装的内容来调试它，但是这个唯一的字符串不会显示在警报中。例如：

```
notif.alertBody = [NSString stringWithFormat:@"Alert for: %@", alertName]; 
```

有没有人见过这种行为？

**更新：**刚刚确认孤立的 UILocalNotifications：从设备中删除了应用程序并在我的 rootViewController 上运行以下代码`viewDidAppear`。我在控制台中得到以下输出：

> ```
> 2013-03-14 14:20:07.439 TestApp[16606:907] found alert: uigffhy
> 2013-03-14 14:20:07.444 TestApp[16606:907] found alert: uigffhy 
> ```

此用户来自先前安装的位置。啊。

```
NSArray *notificationArray = [[UIApplication sharedApplication] scheduledLocalNotifications];

for (UILocalNotification *notif in notificationArray) {
    NSDictionary * info = notif.userInfo;
    NSString * name = [info objectForKey:@"sequenceName"];
    NSLog(@"found alert: %@", name);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:47:43.037

只需检测它是否是全新安装（使用`NSUserDefaults`）并执行以下操作`applicationDidFinishLaunching:`

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

# java - 准备好的报表数据库

> ID：15416040
> 
> 赞同：0
> 
> 时间：2013-03-14T17:22:45.913
> 
> 标签：java, mysql, swing, jdbc

我想将 JTable 中的数据写入数据库，但到目前为止它不起作用。我总是得到一个mysql错误！有人可以告诉我有什么问题吗？

```
public class Fussball extends JFrame {

    private JButton save = new JButton();
    private JTable jTable1 = new JTable(9, 4);
    private DefaultTableModel jTable1Model = (DefaultTableModel) jTable1.getModel();
    private JScrollPane jTable1ScrollPane = new JScrollPane(jTable1);

    public Fussball(String title) {
        super(title);
        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        int frameWidth = 563;
        int frameHeight = 482;
        setSize(frameWidth, frameHeight);
        Dimension d = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (d.width - getSize().width) / 2;
        int y = (d.height - getSize().height) / 2;
        setLocation(x, y);
        Container cp = getContentPane();
        cp.setLayout(null);
        // Anfang Komponenten
        save.setBounds(200, 304, 201, 65);
        save.setText("speichern");
        save.setMargin(new Insets(2, 2, 2, 2));
        save.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent evt) {
                save_ActionPerformed(evt);
            }
        });
        cp.add(save);
        jTable1ScrollPane.setBounds(64, 48, 465, 225);
        jTable1.getColumnModel().getColumn(0).setHeaderValue("Spiel ID");
        jTable1.getColumnModel().getColumn(1).setHeaderValue("Verein 1");
        jTable1.getColumnModel().getColumn(2).setHeaderValue("Verein 2");
        jTable1.getColumnModel().getColumn(3).setHeaderValue("Ergebnis");
        cp.add(jTable1ScrollPane);
        // Ende Komponenten
        setResizable(false);
        setVisible(true);
    }

    public void save_ActionPerformed(ActionEvent evt) {
        try {
            Class.forName("com.mysql.jdbc.Driver").newInstance();
            Connection dbConn = DriverManager.getConnection("jdbc:mysql://localhost:3306/fussball", "root", "");
            Statement statement = dbConn.createStatement();
            String insertQuery = "INSERT INTO Spiel VALUES (?,?,?,?)";
            PreparedStatement ps = dbConn.prepareStatement(insertQuery);
            ps.setString(1, "idSpiel");
            ps.setString(2, "Vereinone");
            ps.setString(3, "Vereintwo");
            ps.setString(4, "Ergebnis");
            ps.executeUpdate();
            //Vector vector = new Vector();
            statement.close();
            dbConn.close();
        } catch (InstantiationException e) {
            System.err.println("Error in Instantiation!");
        } catch (ClassNotFoundException e) {
            System.err.println("Class not found!");
        } catch (IllegalAccessException e) {
            System.err.println("Access denied!");
        } catch (SQLException e) {
            System.err.println("SQL Error!");
        }

    }

    public static void main(String[] args) {
        new Fussball("fussball");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:33:37.510

尝试将数据库功能与您的 UI 代码隔离开来。只需编写一个简单的方法来运行插入，就像您的侦听器方法一样，看看您是否可以让它工作。您现在几乎正在这样做，因为您发布的代码实际上并未从表中提取数据。看起来它只是运行测试更新。尽管如此，我还是建议您创建一个 DAO 类并将所有 SQL 代码放在那里，而不是与您的 UI 代码混合。

来自 SQL 的错误消息并不总是那么有用，但有时确实有用。您忽略了代码中的异常。

特别是，我会用以下代码替换代码中的 catch 块：

```
 catch (SQLException e) {
        System.err.println("SQL Error:" + e.toString() );
 } 
```

另请注意，您没有使用您的`Statement statement = dbConn.createStatement();`，因此您可以删除该行。

在你的 DAO 类中，你可以像这样创建一个测试方法来帮助我们隔离和解决这个问题。重要的是显示异常消息，而不是仅仅捕获它们并打印您自己的消息。

```
 public void testDBInsert() {
    try {
        Class.forName("com.mysql.jdbc.Driver").newInstance();
        Connection dbConn = DriverManager.getConnection("jdbc:mysql://localhost:3306/fussball", "root", "");
        String insertQuery = "INSERT INTO Spiel VALUES (?,?,?,?)";
        PreparedStatement ps = dbConn.prepareStatement(insertQuery);
        ps.setInt(1, 128);  //should be an integer?
        ps.setString(2, "Vereinone");
        ps.setString(3, "Vereintwo");
        ps.setString(4, "Ergebnis");
        ps.executeUpdate();
        ps.close();
        dbConn.close();
    } catch (Exception e) {
        System.err.println("Error in SQL Test: " + e.toString() );
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:42:29.103

尝试设置`Classpath`为包含 MYSQL JDBC 驱动程序的文件夹并重新运行您的应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:44:12.720

> 如果我没记错的话，您使用的语句是错误的：
> 
> ```
> private final String INSERT_QUERY=
> "INSERT INTO tableName (col_name,col_name2, col_name3) VALUES(?, ?, ?);"; 
> ```
> 
> 您缺少要与值关联的列的名称。

编辑：**以上**是错误的，你的陈述和我的陈述都是正确的。

此外，如果您正在使用和 INSERT 语句，您可以这样做（您不必创建语句）：

```
PreparedStatement p = dbConn.prepareStatement(INSERT_QUERY);
p.setString(...); 
```

以此类推。

如果这没有帮助，还有（这在我身上发生过很多次）您的 MySQL 服务器可能已关闭（未运行）的事实。首先检查它是否正在运行。

如果没有工作，您至少可以尝试向我们提供您遇到的错误吗？

# php - php ErrorHandler - 错误计数

> ID：15416042
> 
> 赞同：0
> 
> 时间：2013-03-14T17:23:01.117
> 
> 标签：php, function, handler

您可能已经知道，php 中的错误处理程序可以替换为使用以下函数的函数

> set_error_handler()

我正在制作自己的错误处理程序，当我得到所有错误时，我想做点什么。

截至目前，**每次**发生错误时都会执行自定义错误处理功能。

那么，有什么方法可以知道它是否是最后一个错误，所以我可以执行一个 html 脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:26:38.277

我怀疑您正在寻找[register_shutdown_function()](http://php.net/register_shutdown_function)：

> 在脚本执行完成或调用 exit() 后注册要执行的回调。

但是你最好确保你的回调函数不会触发任何错误 xD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:33:47.043

如果您想一次性处理所有错误（这意味着您将无法看到在致命错误之前发生的错误 - 因此我不建议这样做）然后注册一个 sutdown 函数并通过您的错误处理程序累积数据然后在您的关机功能报告错误....

```
<?php

$mylog="started\n"

function logit() {
    global $mylog;
    if ($mylog) {
       file_put_contents(tmpnam('/var/log/php', 'err');
    }
}

register_shutdown_function('logit');
function whoops()
{
    global $mylog;
    $mylog.="something bad happenned\n";
}
set_error_handler('whoops');
.... 
```

（这都可以通过自动添加文件来完成）

# java - 是否有必要将 @JsonIgnoreProperties 放置到 Spring JPA 域中的所有非 JSON 类？

> ID：15416044
> 
> 赞同：2
> 
> 时间：2013-03-14T17:23:19.243
> 
> 标签：java, json, spring

例如我在当前的Spring应用中有20个实体类，只有一个需要映射到JSON对象，所以这里有两个问题：

1.  是否有必要安排`@JsonIgnoreProperties(ignoreUnknown=true)`到所有其他班级？

2.  如果我选择`org.codehaus.jackson`JSON 处理程序，杰克逊是否有机会通过所有实体类尝试进行映射？我有一个

    ```
    org.codehaus.jackson.map.JsonMappingException: Infinite recursion (StackOverflowError) 
    ```

抛出异常但日志中提到的集合对象已经被标记为`@JsonIgnore`，甚至整个类都被标记为`@JsonIgnoreProperties(ignoreUnknown=true)`。那么是什么让它像上面一样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:31:32.660

如果您尝试使用 Jackson 将类映射为 JSON 对象，那么所有原语都可以。但是，杰克逊会尝试将您要映射的*对象中的任何对象*映射到 JSON 对象中。因此，作为您使用 JSON 映射的类的字段成员的任何类都需要能够映射到 JSON（以及它具有的任何对象字段），或者您需要忽略原始类中的那些对象字段.

此外，如果您有任何可能导致无限循环的递归映射（例如用户有一个团队，并且团队有一个用户列表）。Jackson 2 有一些[很好的解决方案](http://wiki.fasterxml.com/JacksonFeatureObjectIdentity)可以帮助解决这个问题。

# regex - Perl 中的正则表达式匹配问题

> ID：15416048
> 
> 赞同：2
> 
> 时间：2013-03-14T17:23:24.203
> 
> 标签：regex, perl

我在 Perl 中匹配正则表达式时遇到问题，想知道是否有人有任何见解：

这是我的正则表达式：`/^-MEMBER:\s+(\b[^,]+)(?:,\s(\b.{1,50}\b)\.?)?\s+ID#:\s+(\d+)$/`

这是我匹配的内容：

> -成员：Doe，John H ID#：3907

正则表达式工作得很好，并且与上面的行匹配，但是对于任何可能不包含名字和中间名的行都有问题。下面的例子：

> -成员：Doe，ID#：3907

我无法匹配当前的正则表达式，这两行。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:49:48.430

您已将逗号匹配放在可选的名字组中，因此您只能在存在名字的情况下匹配逗号。如果逗号将伴随没有名字的姓氏，则需要将其移至姓氏组。

```
/^-MEMBER:\s+(\b[^,]+,)(?:\s(\b.{1,50}\b)\.?)?\s+ID#:\s+(\d+)$/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:58:13.443

问题在于，你真正用的是什么语法来描述你的输入。试图一口气描述这一切变得非常复杂，非常快。请参阅 perl [yapp 模块](http://search.cpan.org/~fdesar/Parse-Yapp-1.05/lib/Parse/Yapp.pm)以获取替代方案。

但是，如果您坚持只使用正则表达式，那么我们开始：

```
/^-MEMBER: # start of line, match specific string
\s+ # must be followed by at least one whitespace char
(\b[^,]+) # now we need to match a word in a capture group
(?:,\s(\b.{1,50}\b)\.?)? # here's the pain, so lets deal with it below
\s+ # more whitespace
ID#: # match this string
\s+ # and some more whitespace
(\d+)$/ # digits at the end of the line

(
 ?: # cluster the following
 ,\s # comma, then a single space
 (
  \b.{1,50}\b # up to fifty "things" bounded by words
 ) # another capture group
 \.? # optional period
)? # zero or one of these I.E. optional capture 
```

这是脆弱的，因为它将假设硬编码到您的“语言”中。请注意，如果我们没有名字/中间名，则不允许使用逗号，因为它*位于*可选组内。那是您的第二次测试不匹配的问题。

其次，如果我们有一个名字/中间名部分，它可以包含除换行符之外的任何内容。这可能不是您想要或期望的。

解析器有用的原因不一定是因为它们允许您拥有“上下文”，尽管它们这样做了。这是因为它将你复杂的正则表达式分解成小的、易于管理的部分，它们连接在一起形成一个明确定义的整体。通过学习这样的工具，您在这里遇到的问题类型变得容易实现和*改变*。

请注意您的正则表达式如何尝试定义每个部分中的“有效”内容。姓氏`(\b[^,]+)`可以有除逗号以外的任何内容！这是你想要的吗？如果有效名称只能包含`[a-zA-Z_]`在其中会发生什么？是`;injectionattemptFTW!!;#`一个有效的名字吗？设计您的程序，以便有一组有限且明显的条件。`If a then valid, else fail`对于简单`a`的 s 很容易推理。

除非您定义所有可能的特殊情况，否则您将遇到导致此正则表达式中断的事情。我无法定义完美的正则表达式，因此您有两种选择：

1.  随着特殊情况的识别，将正则表达式修补为更加复杂的
2.  重新设计以避免需要复杂的正则表达式

如果您选择选项一，那么这个正则表达式可以解决您当前的问题：

```
/^-MEMBER:\s+(\b[^,]+),?(?:\s(\b.{1,50}\b)\.?)?\s+ID#:\s+(\d+)$/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:39:41.573

此正则表达式将匹配两行：

```
/
    ^-MEMBER:\s+         # the beginning of the line with "-MEMBER: "
    .*?                  # non greedy
    \s+ID#:\s+(\d+)$     # space and end ID part
/x 
```

# python - 带有历史记录的python命令行

> ID：15416054
> 
> 赞同：11
> 
> 时间：2013-03-14T17:23:42.153
> 
> 标签：python, command-line

我正在用 python 编写程序，用户将通过命令行使用程序。我正在使用 raw_input 从用户那里获取命令。我想在 bash 等中拥有“记忆”，所以，如果你在键盘上按下箭头（向上或向下），你会得到上一个/下一个命令。我知道一种方法（只需获取用户输入的每个字符并检查它），但也许你知道更好/更可爱的东西:-)

问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-14T17:28:49.257

如果我了解您想要什么，您只需导入`readline`模块即可实现。这将修改 的行为`raw_input()`，使其在历史和行编辑方面更像 python 交互式 shell。

不过要小心，可以在没有的情况下构建 python，`readline`所以我建议在 try 块中导入它：

```
try:
    import readline
except:
    pass #readline not available 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T17:28:52.763

内置的[readline 模块](http://docs.python.org/2/library/readline.html)提供了这个功能。

# c# - 从配置文件初始化字符串

> ID：15416056
> 
> 赞同：2
> 
> 时间：2013-03-14T17:24:00.233
> 
> 标签：c#, visual-studio-2012, asp.net-web-api

我被要求这样做，但我不知道从哪里开始，因为我是新手。

我使用 Visual Studio 2012 创建了一个 C# .NET 应用程序（更准确地说是一个 Web api）。

我创建了一个 lsi 文件（新版本的 msi 文件）以便能够将其部署在服务器上。

现在我想创建某种配置文件，我可以在其中编辑字符串，而不必每次都进入代码来更改它。

假设变量被调用`mystring`：1-如何创建一个配置文件来请求字符串而无需进入代码？2- 我怎么说 mystring=input 字符串？

我试图查找它，但由于我没有确切的名称，我真的不知道我在寻找什么......

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:30:46.973

一种解决方案是使用您要加载的设置保存配置文件，我建议将其保存到 ProgramData 文件夹。

我会将设置保存到 XML 文件（或 JSON）中，以便在加载时将数据序列化和反序列化到程序中。[指导](http://support.microsoft.com/kb/815813?wa=wsignin1.0)

您还可以保存其他详细信息，以便在每次以这种方式打开应用程序时保留它们，例如用户名字段。

# jquery - 其他 html 文件的 Href 在谷歌浏览器中不起作用

> ID：15416057
> 
> 赞同：1
> 
> 时间：2013-03-14T17:24:03.147
> 
> 标签：jquery, html, google-chrome, href

我有以下简单的 html 文件，主体内部只有 1 个指向同一文件夹中另一个 html 文件的链接。

```
<!DOCTYPE html> 
<html>

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/> 

    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 

<body> 

    <div>       
        <a href="homepage.html">Homepage</a>        
    </div>

</body>
</html> 
```

当我在 mozilla firefox 中打开 html 页面并单击链接时，我正确地转到了 homepage.html。但是当我在谷歌浏览器中做同样的事情时，我得到一个“错误加载页面”。如果我右键单击该链接并执行“在新选项卡中打开”，则谷歌浏览器会正确转到 homepahe.html。这两个文件都在同一个文件夹中，并且它们的命名是正确的。现在，如果我在标题部分删除导入的 jquery 脚本，则链接可以正常点击谷歌浏览器

显然，它不可能是 jquery 破坏了 google chrome。那么有什么问题呢？

我的 html 文件不在服务器上，而是在本地。曾经有一个错误（[http://doeswhat.com/2011/03/08/jquery-mobile-error-loading-page/](http://doeswhat.com/2011/03/08/jquery-mobile-error-loading-page/)）但在页面上它说它现在已修复。我不知道如何在服务器上托管文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:27:15.813

好吧，尝试将 rel="external" 添加到您的链接中。这应该有助于解决问题并允许您不添加完整路径。此致， Thakur Saksham Chauhan

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:41:31.320

尝试将 rel="external" 添加到您的链接。这应该有助于解决问题并允许您不添加完整路径。

# notifications - 在 Worklight 客户端设备中忘记其通知订阅

> ID：15416060
> 
> 赞同：0
> 
> 时间：2013-03-14T17:24:09.823
> 
> 标签：notifications, apple-push-notifications, ibm-mobilefirst

我的 Worklight 应用程序中有一个按钮，它为应用程序和用户订阅通知源，其方式与以下 URL 上的通知示例大致相同：http: [//www.ibm.com/developerworks/mobile/worklight/getting-started .html#高级](http://www.ibm.com/developerworks/mobile/worklight/getting-started.html#advanced)

问题是当设备重新启动/或应用程序关闭并且我需要重新登录时 - isSubscribed 函数将返回 false - 尽管以前是 true。

客户端是否意味着自动保存其订阅？在多个设备/应用重新启动时维护对通知源的订阅的最佳做法是什么？

这是我的 securityTests 设置：

```
<securityTests>
        <customSecurityTest name="WebServicesAdapters-securityTest">
            <test isInternalUserID="true" realm="CustomAuthenticatorRealm"/>
        </customSecurityTest>

          <mobileSecurityTest name="PushApplication-strong-mobile-securityTest">
            <testUser realm="CustomAuthenticatorRealm"/>
            <testDeviceId provisioningType="none"/>
        </mobileSecurityTest>

    </securityTests> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:44:32.490

这是 Worklight v5.0.5.x 中的一个缺陷，已在 5.0.6 中修复。

要解决此问题，您可以尝试使用不基于适配器的身份验证。如果只保护适配器，这将失败，应用程序也必须受到保护。

# php - 为什么这不会显示与 Select 查询关联的适当数据？

> ID：15416062
> 
> 赞同：0
> 
> 时间：2013-03-14T17:24:12.387
> 
> 标签：php, pdo

我的最终目标是创建一个简单的网络应用程序，我们可以输入纸张/碳粉的使用情况并运行报告。它并不复杂，可以让我学习 php。我正在使用 PDO 进行数据库工作。我使插入功能完美地工作，但是对于我的一生，我无法运行以下语句。我要做的就是获取数据，然后将其显示在 html 表单上。MySQL真的很简单，但是PDO让我很头疼（我到处找了，找不到统一的方法来完成我想要的）

```
include 'dbconnector.php';
$pastdate = $_POST['date'];

if (isset($_POST['datepull'])){
$pulldata = ("SELECT Paper, Black, Cyan, Magenta, Yellow, Blacksp, Cyansp, 
    Magentasp, Yellowsp FROM tablename WHERE Date = :date"):                          
$getdata = $database_connector->prepare($pulldata);
$getdata->bindParam(':date', $pastdate);
$getdata->execute();
$row = $getdata->fetch(PDO::FETCH_ASSOC);
print $row['Paper']. "\t";

}
else {
echo "It didnt work again";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:29:40.700

Yo在 sql 字符串之后有一个冒号 ( `:`) 而不是分号 ( )。`;`除了 date 是一个关键字，我认为你的`date`值应该是一个字符串。

尝试这个：

```
$getdata->bindParam(':date', $pastdate, PDO::PARAM_STR); 
```

希望能帮助到你。

# php - 使用变量名作为对象标题

> ID：15416064
> 
> 赞同：1
> 
> 时间：2013-03-14T17:24:16.170
> 
> 标签：php, javascript, html

这是我目前在 javascript 中的代码：

```
 'methv': document.getElementById("methv").value,
    'q1': document.getElementById("q1").value,
    'q2':document.getElementById("q2").value,
    'q3':document.getElementById("q3").value,
    'q4':document.getElementById("q4").value,
    'comm':document.getElementById("comm").value, 
```

在我的 php 文件中，我有一个名为 num 的不可见输入字段，它在我的数据库中具有唯一数字的值。

```
<input id="num" type="hidden" value="<?php echo $post['unique person code']; ?>" /> 
```

有没有办法让这个值作为变量名。例如，它将具有以下值：

'q1' + 数字：document.getElementById("q1").value

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:28:38.417

是的。使用括号表示法：

```
containerObject['q1' + num] = document.getElementById("q1").value; 
```

容器对象是包含所有数据的地方。`num`虽然必须先定义。

# javascript - Javascript 全局变量在 jQuery Droppable 中不起作用

> ID：15416067
> 
> 赞同：0
> 
> 时间：2013-03-14T17:24:23.280
> 
> 标签：javascript, jquery, jquery-ui, scope, jquery-ui-draggable

这一定是一些例外，因为我很确定它应该可以工作：

```
var myvar; // global variable

function draggableinit(e, ui){
    console.log(myvar); // still defined here
    jQuery('.drop-div').droppable({
        deactivate: function(event, ui){
            console.log(myvar); // why undefined?
        }
    });
}

function set(){
    var myvar = jQuery('.cont').resizable({
        start: function(event, ui) {  },
        resize: function(event, ui) {  },
        stop: function(event, ui) { // functions to manipulate size  }
    });
    return myvar;
}

jQuery(document).ready(function(){
    myvar = set();
    jQuery('.some-div').draggable({
        "start": draggableinit
    });
}); 
```

我想知道为什么`myvar`在那个地方未定义？它不应该可以从任何地方访问吗？

文档：http: [//jqueryui.com/draggable/](http://jqueryui.com/draggable/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:28:22.323

将其直接分配给以`window`排除范围冲突。那应该行得通。在预期范围之外创建`var foo`不会自动使其成为“全局”，只是*对该*范围块和嵌套范围是全局的。

```
function draggableinit(e, ui){
    jQuery('.drop-div').droppable({
        deactivate: function(event, ui){
            console.log(window.myvar); // why undefined?
        }
    });
}

jQuery(document).ready(function(){
    window.myvar = 123;
    jQuery('.some-div').draggable({
        "start": draggableinit
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:32:16.353

您正在为您的脚本使其全局化 - 而不是对所有脚本都具有全局性。`window`在或中创建它`document`。

# go - 如何阻止除正在运行的所有 goroutines

> ID：15416071
> 
> 赞同：1
> 
> 时间：2013-03-14T17:24:40.973
> 
> 标签：go

我有两个（但稍后我会是三个）处理来自远程服务器（来自 ampq 通道）的传入消息的例程。但是因为它们正在处理相同的数据/状态，所以我想阻止所有其他 go 例程，除了正在运行的例程。

我想出了一个解决方案，使用`chan bool`每个 goroutine 阻塞然后释放它，代码如下：

```
package main

func a(deliveries <-chan amqp, handleDone chan bool) {
    for d := range deliveries {
        <-handleDone        // Data comes always, wait for other channels
        handleDone <- false // Block other channels

        // Do stuff with data...

        handleDone <- true // I'm done, other channels are free to do anything
    }
}

func b(deliveries <-chan amqp, handleDone chan bool) {
    for d := range deliveries {
        <-handleDone
        handleDone <- false
        // Do stuff with data...
        handleDone <- true
    }
}

func main() {
    handleDone := make(chan bool, 1)
    go a(arg1, handleDone)
    go b(arg2, handleDone)
    // go c(arg3, handleDone) , later

    handleDone <- true // kickstart
} 
```

但是第一次每个函数都会得到`handleDone <- true`，它们将被执行。稍后如果我添加另一个第三个函数，事情会变得更加复杂。如何阻止除运行之外的所有其他 go 例程？还有其他更好的解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:27:26.997

您想查看同步包。

[http://golang.org/pkg/sync/](http://golang.org/pkg/sync/)

您将使用互斥锁来执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T21:36:49.720

如果你有一个传入的消息流，并且有三个 goroutine 监听该流并进行处理，并且你想确保一次只有一个 goroutine 在运行，那么解决方案非常简单：杀死两个 goroutine。

您正在提高并发性并增加复杂性，然后试图阻止它们同时运行。最终结果与单个流阅读器相同，但有很多可能出错的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T19:37:31.267

我很困惑你为什么想要这个 - 为什么不能`deliveries`独立处理每条消息？为什么有两个不同的函数处理这些消息？如果每个人都负责一种特定类型的消息，那么您似乎需要一个`deliveries`接收器来分派到该类型的适当逻辑。

但是要回答你的问题，我认为每个函数都不会`true`从`handleDone`一开始就得到一个。一个（假设它是`a`）正在接收`true`来自的发送`main`；另一个（`b`然后）是`false`从第一个发送的。因为您正在丢弃收到的值，所以您无法分辨这一点。然后两者都在运行，并且您正在使用缓冲通道（您可能想要`make(chan bool)`一个无缓冲通道），因此会出现混乱，特别是当您添加第三个 goroutine 时。

实际上并`handleDone <- false`没有完成任何事情。只需将任何价值`handleDone`视为接力赛中的接力棒。一旦一个 goroutine 接收到这个值，它就可以做它的事情；完成后，它应该将其发送到通道以将其交给下一个 goroutine。

# mysql - 无法弄清楚这段代码的 SQL 语法

> ID：15416076
> 
> 赞同：1
> 
> 时间：2013-03-14T17:24:52.737
> 
> 标签：mysql

自从我尝试将此代码粘贴到 phpmyadmin 数据库中时执行 SQL 以来，它不会创建我得到错误的表：

```
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'NOT NULL PRIMARY KEY, WORKER CHAR(30), CONSTRAINT WORKER_FK FOREIGN KEY(WORKE' at line 2 
```

这是 sql 表的代码：

```
CREATE TABLE REPORT(
 REPORT_ID NOT NULL PRIMARY KEY,
  WORKER CHAR(30) CONSTRAINT WORKER_FK FOREIGN KEY(WORKER) REFERENCES WORKER(WORKER_ID)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  CLIENT CHAR (30) CONSTRAINT CLIENT_FK FOREIGN KEY(client) REFERENCES CLIENT(CLIENT_ID)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
 START_DATE DATE CONSTRAINT STARTDATE_FK FOREIGN KEY(JOB) REFERENCES JOB(START_DATE)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  END_DATE DATE CONSTRAINT ENDDATE_FK FOREIGN KEY(JOB) REFERENCES JOB(END_DATE)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  COMMENT CHAR(30)
 )engine innoDB; 
```

谁能帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:36:19.467

实际的错误消息来自 report_id 没有数据类型这一事实。

```
REPORT_ID NOT NULL PRIMARY KEY, 
```

应该

```
REPORT_ID INTEGER NOT NULL PRIMARY KEY, 
```

但是你还有很多问题。MySQL 会默默地忽略“内联”外键 - 即使使用 InnoDB。您必须将它们移动到最后。

此外，您对工作表的外键可能不正确。首先，你的表中没有`job`列，所以`FOREIGN KEY(JOB) REFERENCES JOB(END_DATE)`不可能是正确的。

其次，您将两个不同的 PK 定义引用到同一个表。我的猜测是你实际上想要：

```
CONSTRAINT START_END_DATE_FK 
   FOREIGN KEY (START_DATE, END_DATE) 
   REFERENCES JOB(START_DATE, END_DATE)
ON UPDATE CASCADE
ON DELETE SET NULL, 
```

这假设这`(START_DATE, END_DATE)`是`JOB`表的主键 - 这听起来有点奇怪。

不确定是否`comment`是 MySQL 中的保留字。如果是，则需要引用列名。

所以把这些放在一起，你可能需要这样的东西：

```
CREATE TABLE REPORT
(
  REPORT_ID INTEGER NOT NULL PRIMARY KEY,
  WORKER CHAR(30) ,
  CLIENT CHAR (30),
  START_DATE DATE ,
  END_DATE DATE,
  COMMENT CHAR(30),
  CONSTRAINT WORKER_FK FOREIGN KEY(WORKER) REFERENCES WORKER(WORKER_ID)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  CONSTRAINT CLIENT_FK FOREIGN KEY (client) REFERENCES CLIENT(CLIENT_ID)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  CONSTRAINT START_END_DATE_FK FOREIGN KEY (START_DATE, END_DATE) REFERENCES JOB(START_DATE, END_DATE)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  CONSTRAINT ENDDATE_FK FOREIGN KEY(JOB) REFERENCES JOB(END_DATE)
  ON UPDATE CASCADE
  ON DELETE SET NULL
 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:35:52.413

您没有为 定义列类型`REPORT_ID`。IE`REPORT_ID int(11) NOT NULL PRIMARY KEY,`

```
CREATE TABLE REPORT(
 REPORT_ID int(11) NOT NULL PRIMARY KEY,
  WORKER CHAR(30) CONSTRAINT WORKER_FK FOREIGN KEY(WORKER) REFERENCES WORKER(WORKER_ID)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  CLIENT CHAR (30) CONSTRAINT CLIENT_FK FOREIGN KEY(client) REFERENCES CLIENT(CLIENT_ID)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
 START_DATE DATE CONSTRAINT STARTDATE_FK FOREIGN KEY(JOB) REFERENCES JOB(START_DATE)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  END_DATE DATE CONSTRAINT ENDDATE_FK FOREIGN KEY(JOB) REFERENCES JOB(END_DATE)
  ON UPDATE CASCADE
  ON DELETE SET NULL,
  COMMENT CHAR(30)
 )engine innoDB; 
```

# actionscript-3 - 在 AS3 中使用 GreenSock 补间 Sprite 大小

> ID：15416083
> 
> 赞同：1
> 
> 时间：2013-03-14T17:25:14.700
> 
> 标签：actionscript-3, flash, animation, tween, gsap

我已经看到可以使用 补间矩形的示例`scaleX`，但我找不到任何补间圆的东西。（我正在绘制的“圆圈”实际上是一个甜甜圈形状，我希望外圈是补间的那个）。

```
var resizeVar:Number = 75;

myCircle.graphics.drawCircle((myCircle.width/2), (myCircle.height/2), resizeVar);
myCircle.graphics.drawCircle((myCircle.width/2), (myCircle.height/2), 75); 
```

我试过这样做，但这会引发很多错误。我认为不可能这样：

```
TweenMax.to(myCircle, 2, {resizeVar:150, ease:SlowMo.ease.config(1, 0)}); 
```

通常对于显示对象，以这种方式完成。但它不适用于这个“甜甜圈”：

```
TweenMax.to(myRectangle, 2, {scaleX:1.5, scaleY:1.5 ease:SlowMo.ease.config(1, 0)}); 
```

所以我的问题是，我怎样才能补间我的外圆的半径大小？

编辑：这就是甜甜圈的绘制方式，因此 resizeVar 需要从 75 更改为 150。

```
var myCircle:Sprite = new Sprite();

myCircle.graphics.beginFill(0xbbbbbb);
myCircle.graphics.drawCircle(0, 0, 150); // this is what should be tweening/scaling
myCircle.graphics.drawCircle(0, 0, 75); // this should stay the same
myCircle.graphics.endFill();

addChild(myCircle); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:50:04.507

您应该能够补间任何 displayObject的`scaleX`和属性：`scaleY`

```
var radius:Number = 75;
var myCircle:Sprite = new Sprite();
myCircle.graphics.beginFill(0);
myCircle.graphics.drawCircle(radius/2, radius/2, radius);
myCircle.graphics.endFill();
addChild(myCircle);

TweenMax.to(myCircle, 2, {scaleX:2, scaleY:2, ease:SlowMo.ease.config(1,0)}); 
```

**编辑**

这就是你如何缩放甜甜圈的外部：

```
var resizeObject:Object = { innerRadius:75, outerRadius:150 };
myCircle = new Sprite();
myCircle.graphics.beginFill(0xbbbbbb);
myCircle.graphics.drawCircle(0, 0, resizeObject.outerRadius);
myCircle.graphics.drawCircle(0, 0, resizeObject.innerRadius);
myCircle.graphics.endFill();

addChild(myCircle);    
TweenMax.to(resizeObject, 2, {outerRadius:300, ease:SlowMo.ease.config(1,0), onUpdate:updateCircle, onUpdateParams:[resizeObject]});

function updateCircle(resizeObject:Object):void 
{
    myCircle.graphics.clear();
    myCircle.graphics.beginFill(0xbbbbbb);
    myCircle.graphics.drawCircle(0, 0, resizeObject.outerRadius);
    myCircle.graphics.drawCircle(0, 0, resizeObject.innerRadius);
    myCircle.graphics.endFill();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:47:26.373

它适用于矩形的原因是您正在更改矩形的比例。当您更改比例时，Flash Player 会调整包含您的图形的显示对象的比例。

但是，对于圆，您正在尝试更改圆的半径。半径仅在您使用该`drawCircle()`方法绘制圆时使用。补间半径的一种方法是使用补间多次重新绘制圆（不是那么理想）。

要使用新的半径重新绘制圆，您可以使用提供的[onUpdate](http://www.greensock.com/as/docs/tween/_tweenmax.html)回调`TweenMax`：

```
TweenMax.to(myCircle, 2, {resizeVar:150, onUpdate: onUpdateCallback, onUpdateParams: [resizeVar] });

function onUpdateCallback(radius):void
{
    myCircle.graphics.drawCircle(myCircle.graphics.drawCircle((myCircle.width/2), (myCircle.height/2), radius);
} 
```

**[编辑]**

请注意，我添加了一些您需要传递给`onUpdateCallback()`函数的参数。我还修改了函数添加一个`radius`参数，然后`radius`在画圆的时候使用。

关于“试图改变这个甜甜圈的外圈”，这可能更复杂。您可能需要画出甜甜圈的两个圆圈。您可能还需要`graphics.clear()`在绘制圆圈之前调用。

但是，也许@Marcela 的答案更好，只需更改您已经绘制的对象的 scaleX 和 scaleY 。但是，如果您需要达到指定的半径，唯一的方法是在补间的每个间隔上重新绘制圆。

# installation - 尝试运行 phpunit.phar 时出现“PHP Parse 错误...”

> ID：15416084
> 
> 赞同：0
> 
> 时间：2013-03-14T17:25:17.243
> 
> 标签：installation, phpunit

我正在尝试在我的服务器上设置 phpunit。这是我到目前为止所做的......

1.  通过 PuTTY SSH 到 Apache 服务器
2.  跑命令...`cd /path/to`
3.  跑命令...`wget http://pear.phpunit.de/get/phpunit.phar`
4.  跑命令...`chmod +x phpunit.phar`
5.  跑命令...`/path/to/phpunit.phar`

我收到的错误是...

`PHP Parse error: syntax error, unexpected T_FUNCTION, expecting ')' in /path/to/phpunit.phar on line 6`

phpunit.phar 文件的前 8 行是...

```
#!/usr/bin/env php
<?php
define('__PHPUNIT_PHAR__', realpath($GLOBALS['_SERVER']['SCRIPT_NAME']));

spl_autoload_register(
  function ($class)
  {
      static $classes = NULL; 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T14:25:54.773

您[至少需要 PHP 5.3.3](http://www.phpunit.de/manual/current/en/installation.html)才能使用 PHPUnit 的 phar 版本：

> 注意：PHPUnit 3.7 需要 PHP 5.3.3（或更高版本），但强烈建议使用 PHP 5.4.7（或更高版本）。

# authentication - Umbraco 如何保护其内部 CMS 页面？

> ID：15416085
> 
> 赞同：0
> 
> 时间：2013-03-14T17:25:18.143
> 
> 标签：authentication, umbraco

我想向我的 Umbraco 网站添加一个页面，只有登录到 Umbraco 后端的用户才能访问该页面，但我无法弄清楚 Umbraco 如何进行身份验证。

我从调试中能够弄清楚的是，在我登录 Umbraco 后，我检查了 HttpContext.Current.User.Identity.IsAuthenticated，它是错误的，所以它没有以这种方式进行身份验证。

有谁知道我在哪里可以找到 Umbraco 进行身份验证检查的代码，如果用户没有登录，他们会返回登录屏幕？我需要连接到这一点并将其扩展到我的新页面。

回答

检查 umbraco.BusinessLogic.User.GetCurrent() 以获取当前登录到 Umbraco 后端的用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:16:29.687

找到了答案。您需要做的就是检查 umbraco.BusinessLogic.User.GetCurrent() 以查看用户是否登录到 Umbraco 后端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:44:08.930

查看 Umbraco 的[公共访问](http://our.umbraco.org/wiki/reference/umbraco-client/context-menus/public-access)。这是 Umbraco 用来保护页面的机制。Umbraco 为 Umbraco 用户（后端）和 Umbraco 成员（前端）使用单独的成员资格表，因此如果您希望用户访问某些页面，则必须添加两次用户。

您需要创建一个带有一些登录控件的登录页面。您还需要一个“错误页面”，如果用户无权查看请求的页面，这基本上是用户将被发送到的页面。[Morten Bock Sørensen 在一篇博](http://www.mortenbock.dk/blog/2009/04/01/setting-up-membership-in-umbraco.aspx)文中很好地介绍了如何设置它。

或者，您可以将希望保护的内容放在后端的[仪表板中。](http://our.umbraco.org/wiki/reference/files-and-folders/dashboardconfig)您甚至可以将用户控件挂接到仪表板中，从节点中动态提取内容。

# visual-studio - TFS 构建服务器失败

> ID：15416087
> 
> 赞同：0
> 
> 时间：2013-03-14T17:25:20.720
> 
> 标签：visual-studio, tfsbuild

在我的新工作中，我们被迫使用 Microsoft Team Foundation Server 2008 进行构建。即使大多数开发人员已经迁移到 VS 2010 和 2012，但构建服务器仍然是 TFS 2008。无论如何，我正在使用 VS 2010 项目，并且我在 2008 TFS 服务器上构建了“默认构建定义”。

构建失败。查看日志，它试图删除工作区“agentserver_104_”但没有找到，但后来尝试创建工作区“agentserver_104_”。但它失败了，因为已经有一个名为“agentserver_104”的工作区。这是日志的错误消息

```
Target "CoreInitializeWorkspace" in file "C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets" 
Using "DeleteWorkspaceTask" task from assembly "c:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\Microsoft.TeamFoundation.Build.Tasks.VersionControl.dll".
Task "DeleteWorkspaceTask"
  DeleteWorkspaceTask TeamFoundationServerUrl="http://xxxxx:8080/" BuildUri="vstfs:///Build/Build/21924" Name="agentserver_104_" DeleteLocalItems=True
  TF14061: The workspace agentserver_104_;TCPL\TFSBuild does not exist.
Done executing task "DeleteWorkspaceTask".
Task "DeleteWorkspaceTask" skipped, due to false condition; 
Using "CreateWorkspaceTask" task from assembly "c:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\PrivateAssemblies\Microsoft.TeamFoundation.Build.Tasks.VersionControl.dll".
Task "CreateWorkspaceTask"
  CreateWorkspaceTask TeamFoundationServerUrl="http://xxxxx:8080/" BuildUri="vstfs:///Build/Build/21924" Name="agentserver_104_" 
  BuildDirectory="E:\TFSBuild\Geofind Modernization\GeoFacility 10.1 - Win7" SourcesDirectory="E:\TFSBuild\Geofind Modernization\GeoFacility 10.1 - Win7\Sources" Comment="Workspace created by Team Build"
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets(801,5,801,5): error : The path E:\TFSBuild\Geofind Modernization\GeoFacility 10.1 - Win7\Sources is already mapped in workspace agentserver_104.
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets(801,5): error MSB4018: The "CreateWorkspaceTask" task failed unexpectedly.
C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\TeamBuild\Microsoft.TeamFoundation.Build.targets(801,5): error MSB4018: Microsoft.TeamFoundation.VersionControl.Client.MappingConflictException: The path E:\TFSBuild\Geofind Modernization\GeoFacility 10.1 - Win7\Sources is already mapped in workspace DAPP03085_104. 
```

请注意，当它尝试删除工作区时，它使用名称 agentserver_104_

但现有名称是：agentserver_104

没有尾随下划线。任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-18T08:46:03.647

我想可能引用的项目似乎有问题。因为真正的错误是`The path E:\TFSBuild\Geofind Modernization\GeoFacility 10.1 - Win7\Sources is already mapped in workspace DAPP03085_104.`所以我认为你需要检查那个。

# c# - 如何使用 json 和 ajax 从 asp.net 中的 sql server 数据库中填充列表

> ID：15416088
> 
> 赞同：1
> 
> 时间：2013-03-14T17:25:21.603
> 
> 标签：c#, asp.net, sql-server, ajax, jquery-mobile

我想从我使用 jquery mobile、asp.net、C# 和 sql server 数据库的数据库中填充一个列表

我编写了一个服务来从数据库中获取数据作为 dtataset 但我无法将数据集转换为 json 可以理解的内容

所以这是我的服务

```
[System.Web.Services.WebMethod]
    public static DataSet GetProducts()
    {
        string query = "SELECT [product] ,[img1] ,[descr] FROM [ELQ].[dbo].[products]";
        SqlCommand cmd = new SqlCommand(query);

        return GetData(cmd);

    }
    private static DataSet GetData(SqlCommand cmd)
    {
        string connString = "Data Source=GHOST-PC\\STC;Initial Catalog=ELQ_z;Integrated Security=True";
        using (SqlConnection con = new SqlConnection(connString))
        {
            using (SqlDataAdapter sda = new SqlDataAdapter())
            {
                cmd.Connection = con;
                sda.SelectCommand = cmd;
                using (DataSet ds = new DataSet())
                {
                    sda.Fill(ds);
                    return ds;
                }
            }
        }
    } 
```

这是我的清单

```
 <ul data-role="listview" data-inset="true" data-filter="true">
                <li><a href="ray.html">
                    <img src="pic/ip5.jpg">
                    Iphone </a></li>
                <li><a href="scott.html">
                    <img src="pic/s2.jpg">
                    S2</a></li>
                <li><a href="todd.html">
                    <img src="pic/s3.jpg">
                    S3</a></li>
                <li><a href="dave.html">
                    <img src="pic/nt2.jpg">
                    note2</a></li>
            </ul> 
```

我如何将其转换为 json 并使用 ajax 填充列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:42:53.237

您在 ASP.Net 中使用什么 API？您使用的是 Web 表单，还是 mvc 或 webapi？

如果您想保持上述代码，您将需要创建一个 DTO（数据传输对象）类并从您的数据集中填充它。然后，您可以使用 Json.Net 对其进行序列化，您可以使用 NuGet 轻松安装它。

可能更好的选择是使用 WebAPI 和实体框架。WebAPI 将为您进行序列化。这是创建 API 的好方法，您的 jQuery Mobile 应用程序可以访问 GET、POST、PUT 和 Delete 数据。

我敢肯定，如果您在 Google 上开始使用 WebAPI，您会发现许多打印和视频形式的入门教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:22:09.420

我使用了 DTO（数据传输对象）方式，这是我的代码

首先我写了一个类产品

```
public class product
{
    //[product] ,[img1] ,[descr]
    public string name;
    public string img1;
    public string descr;

} 
```

然后我将 getdata() 方法更改为这样

```
[WebMethod]
    public List<product> getdata()
    {
        List<product> productt = new List<product> {};
        string query = "SELECT [product] ,[img1] ,[descr] FROM [ELQ].[dbo].[products]";
        SqlCommand cmd = new SqlCommand(query);
        DataSet ds = GetData(cmd);
        DataTable dt = ds.Tables[0];
        foreach(DataRow item in ds.Tables[0].Rows)
        {
            product pro = new product();
            pro.name = item["product"].ToString();
            pro.img1 = item["img1"].ToString();
            pro.descr = item["descr"].ToString();
            productt.Add(pro);
        }

        return productt; 
    } 
```

# ios - 如何从表视图中添加/删除子视图

> ID：15416090
> 
> 赞同：0
> 
> 时间：2013-03-14T17:25:24.573
> 
> 标签：ios, ipad, ios6, addsubview

我有一个`UITableView`我想让用户单击单元格并使用子视图来显示详细信息。我试过这个方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

SubMainViewController __autoreleasing *mSubView = [self.storyboard instantiateViewControllerWithIdentifier:@"mainSubView"];
[self presentViewController:mSubView animated:YES completion:nil];

} 
```

这似乎有效，但是，我无法回到我的表格视图，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:53:35.790

好吧，当用户选择一个单元格时，您似乎想要加载一个详细视图，并且您希望用户能够在返回或按下某个按钮时返回到先前的视图。您需要为此使用导航控制器。这是苹果文档的链接[http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/ipad/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)

这是一个示例教程，可帮助您入门

[http://razell.hubpages.com/hub/IPhone-Guide-Loading-a-detail-view](http://razell.hubpages.com/hub/IPhone-Guide-Loading-a-detail-view)

希望这会有所帮助，如果您需要更多帮助，请告诉我。

编辑：

因此，根据您的评论，您正在寻找一个模式视图以弹出视图。好吧，这里有很多不同方法的链接，它们都有示例项目，所以你可以实际看到这个技巧是如何执行的。

[http://samwize.com/2012/12/06/7-ios-custom-popup-views/](http://samwize.com/2012/12/06/7-ios-custom-popup-views/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:48:14.747

在您`SubMainViewController`中，您需要使用关闭当前视图控制器

```
[self.presentingViewController dismissViewControllerAnimated:YES completion:nil]; 
```

# asp.net - 加密和解密 FormsAuthenticationTicket 以对用户进行身份验证

> ID：15416091
> 
> 赞同：3
> 
> 时间：2013-03-14T17:25:25.923
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, forms-authentication, httpmodule

我正在尝试创建自己的身份验证机制，它依赖于`FormsAuthentication`. 我基本上使用 OAuth 来允许用户在授权服务器中进行身份验证，一旦他们通过身份验证，我需要使用`FormsAuthentication` 它在整个会话中对他们进行身份验证。所以无论如何，我创建了`HttpModule`一个辅助类来完成这项工作。不幸的是，事实并非如此。

发生的情况是，`PostAuthenticateRequest`我加密票证并将 cookie 添加到响应中，然后将用户重定向到网站的根目录。重定向用户后，将发出另一个 HTTP 请求，因此`HttpModule`再次触发，并且在`AuthenticateRequest`事件中我正在检查该用户是否已通过身份验证。为了检查用户是否经过身份验证，我试图读取 cookie，从中获取用户名，然后设置`Thread.CurrentPrincipal`属性。但是，由于某种原因，无法找到 cookie。

这是我的代码：

```
public class OAuthModule : IHttpModule
{
    private const String USERNAME = "username";

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        context.AuthenticateRequest += context_AuthenticateRequest;
        context.PostAuthenticateRequest += context_PostAuthenticateRequest;
    }

    void context_PostAuthenticateRequest(object sender, EventArgs e)
    {
        var application = sender as HttpApplication;
        if (application != null)
        {
            String username = application.Context.Items[USERNAME].ToString();
            String uri = RemoveQueryStringFromUri(application.Context.Request.Url.AbsoluteUri);
            var cookie = IdentityHelper.GetEncryptedFormsAuthenticationCookie(username, uri);
            application.Context.Response.Cookies.Add(cookie);

            application.Context.Response.Redirect(uri);
        }
    }

    void context_AuthenticateRequest(object sender, EventArgs e)
    {
        HttpApplication application = sender as HttpApplication;
        if (sender != null)
        {
            if (!application.Context.Request.Url.AbsolutePath.Contains("."))
            {
                if (!IdentityHelper.IsAuthenticated)
                {
                    HttpContextWrapper wrapper = new HttpContextWrapper(application.Context);
                    String clientId = WebConfigurationManager.AppSettings["ClientId"];
                    String clientSecret = WebConfigurationManager.AppSettings["ClientSecret"];
                    String authorizationServerAddress = WebConfigurationManager.AppSettings["AuthorizationServerAddress"];
                    var client = OAuthClientFactory.CreateWebServerClient(clientId, clientSecret, authorizationServerAddress);
                    if (String.IsNullOrEmpty(application.Context.Request.QueryString["code"]))
                    {
                        InitAuthentication(wrapper, client);
                    }
                    else
                    {
                        OnAuthCallback(wrapper, client);
                    }
                }
            }
        }
    }

    private void InitAuthentication(HttpContextWrapper context, WebServerClient client)
    {
        var state = new AuthorizationState();
        var uri = context.Request.Url.AbsoluteUri;
        uri = RemoveQueryStringFromUri(uri);
        state.Callback = new Uri(uri);
        var address = "https://localhost";
        state.Scope.Add(address);

        OutgoingWebResponse outgoingWebResponse =  client.PrepareRequestUserAuthorization(state);
        outgoingWebResponse.Respond(context);
    }

    private void OnAuthCallback(HttpContextWrapper context, WebServerClient client)
    {
        try
        {
            IAuthorizationState authorizationState = client.ProcessUserAuthorization(context.Request);
            AccessToken accessToken = AccessTokenSerializer.Deserialize(authorizationState.AccessToken);
            String username = accessToken.User;
            context.Items[USERNAME] = username;                
        }
        catch (ProtocolException e)
        {
            EventLog.WriteEntry("OAuth Client", e.InnerException.Message);
        }
    }

    private String RemoveQueryStringFromUri(String uri)
    {
        int index = uri.IndexOf('?');
        if (index > -1)
        {
            uri = uri.Substring(0, index);
        }
        return uri;
    }
}

public class IdentityHelper
{
    public static Boolean IsAuthenticated
    {
        get
        {
            String username = DecryptFormsAuthenticationCookie();
            if (!String.IsNullOrEmpty(username))
            {
                SetIdentity(username);
                return Thread.CurrentPrincipal.Identity.IsAuthenticated;
            }
            return false;
        }
    }

    private static String DecryptFormsAuthenticationCookie() 
    {
        var cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
        if (cookie != null)
        {
            FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);
            return ticket.UserData;
        }
        return String.Empty;
    }

    internal static HttpCookie GetEncryptedFormsAuthenticationCookie(String username, String domain)
    {
        var expires = DateTime.Now.AddMinutes(30);
        FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(1, username, DateTime.Now, expires, true, username, FormsAuthentication.FormsCookiePath);
        var cookie = new HttpCookie(FormsAuthentication.FormsCookieName);
        cookie.Value = FormsAuthentication.Encrypt(ticket);
        cookie.Domain = domain;
        cookie.Expires = expires;
        return cookie;
    }

    private static void SetIdentity(String username)
    {
        ClaimsIdentity claimsIdentity = new ClaimsIdentity(new List<Claim> { new Claim(ClaimTypes.Name, username) });
        var principal = new ClaimsPrincipal(claimsIdentity);
        Thread.CurrentPrincipal = principal;
    }
} 
```

我哪里做错了？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:21:07.507

好的，所以我终于解决了。就像下面这样简单：

```
application.Context.Response.Redirect(uri, false); 
```

我需要告诉模块不要终止当前响应（因此是`false`），这样它就会在即将到来的请求中保留 cookie。

# xsd - xsd 值限制

> ID：15416095
> 
> 赞同：1
> 
> 时间：2013-03-14T17:25:41.720
> 
> 标签：xsd, xsd-validation

伙计们，我需要您在以下方面的帮助。我的 xml 看起来像这样：

```
 <Images>
    <Image ImageId="1" ImageFile="a.png"/>
    <Image ImageId="2" ImageFile="b.png"/>
    <Image ImageId="3" ImageFile="c.png"/>
    <Image ImageId="4" ImageFile="d.png"/>
    <Image ImageId="5" ImageFile="e.png"/>
</Images>
<Banners>
    <Banner BannerId="1" ImageId="2"/>
    <Banner BannerId="43" ImageId="3"/>
    <Banner BannerId="45" ImageId="4"/>
    <Banner BannerId="596" ImageId="2"/>
    <Banner BannerId="6" ImageId="2"/>
</Banners> 
```

我需要创建一个 xsd，它将 Banner 元素中的 ImageId 值限制为图像中出现的值。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:38:09.323

是的; 您需要的 XML 模式组件是 key/keyref：

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="sample">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="Images">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element maxOccurs="unbounded" name="Image">
                                <xsd:complexType>
                                    <xsd:attribute name="ImageId" type="xsd:unsignedByte" use="required"/>
                                    <xsd:attribute name="ImageFile" type="xsd:string" use="required"/>
                                </xsd:complexType>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
                <xsd:element name="Banners">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element maxOccurs="unbounded" name="Banner">
                                <xsd:complexType>
                                    <xsd:attribute name="BannerId" type="xsd:unsignedShort" use="required"/>
                                    <xsd:attribute name="ImageId" type="xsd:unsignedByte" use="required"/>
                                </xsd:complexType>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
        <xsd:key name="PK">
            <xsd:selector xpath="Images/Image"/>
            <xsd:field xpath="@ImageId"/>
        </xsd:key>
        <xsd:keyref name="FK" refer="PK">
            <xsd:selector xpath="Banners/Banner"/>
            <xsd:field xpath="@ImageId"/>       
        </xsd:keyref>
    </xsd:element>
</xsd:schema> 
```

示例错误消息：

```
The key sequence '8' in Keyref fails to refer to some key.
xsd-restriction-by-value.xml is XSD 1.0 invalid. 
```

# javascript - 直接在onclick中调用函数

> ID：15416100
> 
> 赞同：0
> 
> 时间：2013-03-14T17:26:01.263
> 
> 标签：javascript, casperjs

我是 javascript 和 casperjs 的新手。我正在尝试触发一个按钮来自动执行特定任务。我可以做到`clicklabel()`。我想知道是否有直接的方法来调用这些函数。casperjs 文档中有一个`sendAJAX`函数。它在这种情况下有效吗？

```
<a class="selection" href="javascript:void(0)" onclick="function1(); function2();">New</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:41:11.520

在这种情况下，您实际上并不需要 href - 只需将其留空即可。

但是，要回答您的问题，似乎有两种选择。第一个，也是最好的，是 jQuery .click() 函数。jQuery 很棒，如果您使用 javascript 做事，您应该自己学习它（尽管学习如何正确使用它确实需要一些时间）。但是，如果您目前不愿意花时间，我建议[如何使用 JavaScript 模拟点击？](https://stackoverflow.com/questions/2705583/simulate-click-javascript)看起来像一个可行的仅限javascript的答案。

# php - 在不使用 while 循环的情况下获取单个 postgres 记录作为关联数组

> ID：15416101
> 
> 赞同：1
> 
> 时间：2013-03-14T17:26:03.093
> 
> 标签：php, sql, postgresql, pdo

如果我有一个我知道只会返回一个结果的语句：

`$emp_query = "SELECT * FROM table WHERE id = 'employee_id' LIMIT 1`"

有什么方法可以在不使用和 while 循环的情况下访问`pg_query($con, $csr_query);`关联数组的结果？`pg_fetch_assoc`当我知道我只检索一条记录时，while 循环似乎是不必要的。也许 PDO 中也有一些方法，我只是先这样设置它，因为我更喜欢简单的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:49:25.863

类似 pg_fetch_result 的东西：

[http://www.php.net/manual/en/function.pg-fetch-result.php](http://www.php.net/manual/en/function.pg-fetch-result.php)

# list - Haskell 持久列表

> ID：15416102
> 
> 赞同：3
> 
> 时间：2013-03-14T17:26:03.437
> 
> 标签：list, haskell, persistent

我是 Haskell 的新手，想知道是否有一种简单的方法可以创建一个数据结构，我可以通过连续的函数调用向其中添加记录，并且不会在函数调用之间丢失结构的状态（持久？），而不需要一个数据库。所以我有：

```
data Book = Book  { title  :: String
                  , author :: String
                  , ISBN   :: String
                  }
                  deriving (Eq, Show)

type BookShelf = [Book] 
```

我很欣赏 Haskell 这样做的方法是复制数据结构并在尝试执行此类操作时返回更新。所以这会像这样工作：

```
addToBookShelf :: Book -> BookShelf -> BookShelf
addToBookShelf b bs = b : bs 
```

所以我可以从其他函数递归调用它来填充书架。我不相信这对我有用，因为我试图通过 JSON PUT 请求添加记录，并且我不想返回更新的列表以供外部 HTTP 客户端递归调用的函数？我敢肯定，这个问题必须有一个简单的答案！

附加信息：我正在使用 Web.Scotty 解析 JSON POST/GET。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:01:18.507

您将需要以某种方式对状态进行建模。既然你是新手，让我们采用一种简单的方法：向你的服务器添加一个参数来跟踪状态：

```
getBookViaJSON :: IO Book
-- listen, convert, ...

server :: BookShelf -> IO () 
server bookshelf = do
    book <- getBookViaJSON
    server (book:bookshelf) 
```

这个函数永远不会返回，也永远不会对书架做任何事情，所以它本身没有用，但你明白了吗？

# php - Chrome-extension：使用 AJAX 和 JQUERY 在弹出窗口中显示图片

> ID：15416103
> 
> 赞同：0
> 
> 时间：2013-03-14T17:26:16.803
> 
> 标签：php, jquery, google-chrome-extension, popup

我目前正在开发一个 chrome 扩展，它允许在用户发送单词时显示图片。我使用 AJAX 和 JQUERY 来获取图片。

我**在弹出窗口中显示图片**时遇到问题。事实上，它适用于普通的 html 页面，但不适用于弹出窗口。

如果你想测试：[http](http://algec.iut-blagnac.fr/~groupe6pjt/testAjax/pageHTML.html) ://algec.iut-blagnac.fr/~groupe6pjt/testAjax/pageHTML.html 。

当我尝试在弹出窗口中显示图片时，JavaScript 控制台中出现此错误：

> 无法加载资源 chrome-extension://pmbnmemdpheopedlikgmdeegebojkoji/chamoix.png

我有一个带有裂缝的小图像图标，而不是图片。

我认为这不是图片路径的问题，因为它在我们的页面上工作（上面的链接）。

**这是我的代码：**

**1\. more_com.php（服务器上的php文件）**

```
<?php

    print "<p>Je suis un fichier php 2.0 !</p>";

        $conn = mysql_connect("localhost", "groupe6pjt", "bfjrs2012") or die ("Connexion impossible");
        $base="groupe6pjt";
        mysql_select_db("$base") or die ("base inconnue"); 

        $requete2 = "select imgSigne from signe where idSigne=10;";
        $resultat2 = mysql_query($requete2) or die ("requete2 impossible");
        while($tab = mysql_fetch_array($resultat2))
        {
            echo $tab[0];
            echo "<br/><img  src=\"chamoix.png\" />";
        }
?> 
```

**2.popup.html**

```
<!DOCTYPE html PUBLIC>
<html>
<head>
<link rel="stylesheet" href="css/bootstrap.css" type="text/css" media="screen">
<title>Techniques AJAX - XMLHttpRequest</title>
<script src="popup.js"></script>
</head>
<body>

<div id="bandeau">
<h4 style="color : white;">AIPS - Traduction LSF</h4>
</div>

<div id="obtenirTexte" class="well well-large">
<p><b>1)</b> Obtenir le texte surligné sur la page : </p>
    <form class="form-search">
    <div class="input-append">
        <input class="span2 search-query" name="text" style="height : 30px; width : 175px;" type="text" id="text"/><button id="effacer" class="btn btn-primary" name="effacer" style="height : 30px;" title="Effacer le mot"><img src="effacer.png" alt="Erreur"/></button>
    </div><br/><br/>
        <button id="submit" class="btn" title="1) Texte">Obtenir le texte</button>
    </form>
</div>

<div id="obtenirImage" class="well well-large">

    <div id="commentaires">
    <p><b>2)</b> Obtenir l'image correspondante : </p>
    </div>

    <form>
        <input id="more_com" class="btn" type="button" value="Obtenir l'image" title="2) Image"/>
    </form>

    <div id="message">
        <!-- PHP return here ! -->
    </div>

</div>
<!-- As you can see with Chrome you can't put script directly in the htlm code so I create a file with my function : fonction.js -->
<script language="JavaScript" type="text/javascript" src="jquery.js"></script>
<script language="JavaScript" type="text/javascript" src="fonction.js"></script>
<script language="JavaScript" type="text/javascript" src="fonction2.js"></script>
<script language="JavaScript" type="text/javascript" src="popup.js"></script>
</body>
</html> 
```

**3.函数.js**

```
$(document).ready(function(){

        $("#more_com").click(function(){                                                                      //Cette fonction se déclenche quand on clique sur le bouton d'id "more_com" (ici "Obtenir l'image")
            var variableTest=$.ajax({
                 url : "http://algec.iut-blagnac.fr/~groupe6pjt/testAjax/more_com.php",      //Ca c'est la page PHP qu'on va devoir modifier pour qu'à la reception du mot elle affiche l'image correspondante (Ne pas changer !)
                 type : "GET",                                                                                                                                                                                           //On garde GET car on veut récupérer une donnée en envoyant des infos ( != POST )
                 //data : 'motRecher=' + COUCOU;      // *****A MODIFIER*****                  //On va devoir utiliser ce champ pour envoyer le mot surligné vers la page PHP "more_com.php" 
                 dataType : "html",                                                                                                                                                                              //Le type de données renvoyé par la page PHP (ici : c'est du html que la page renvoie)
            });

            variableTest.done(function(data, textStatus, jqXHR){                             //Si on atteind le fichier alors on affiche ce que retourne "more_com.php" (ici il retourne "Je suis un fichier PHP !")
              $("#message").html(data);                                                                                                                                     //Permet l'affichage du fichier PHP
            });

            variableTest.fail(function(jqXHR, textStatus){                                            //Si on atteind pas le fichier ...
                $("#message").html("<p>Erreur</p>");                                                   //...erreur
            });
        });
    }); 
```

我认为 Chrome 会阻止在弹出窗口中显示图片或类似的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:07:55.440

您遇到的问题是图像是这样定义的

```
<img src="./chamoix.png"> 
```

此相对路径解析为

```
http://algec.iut-blagnac.fr/~groupe6pjt/testAjax/chamoix.png 
```

在网页上，但尝试解析为

```
chrome-extension://pmbnmemdpheopedlikgmdeegebojkoji/chamoix.png 
```

在扩展中。尝试使用绝对路径或 a`replace()`将其指向正确的地址。

# php - Javascript变量中的PHP回显以动态更改饼图

> ID：15416104
> 
> 赞同：1
> 
> 时间：2013-03-14T17:26:26.730
> 
> 标签：php, javascript, pie-chart

我有以下代码。请查看[jsfiddle 页面](http://jsfiddle.net/2w4YC/1/)。在这段代码中有静态数字 5 和 10。这些需要更改为动态数字，由 PHP 代码在变量`$result1`和`$result2`.

我尝试了很多东西，请参阅 jsfiddle 页面。

那么基本上如何在下面的示例中用 PHP 代码替换 5 和 10 呢？

```
var pie = new RGraph.Pie('cvs', [result1,10]); 
```

该解决方案感谢 Jeff Shaver 在 Clamidity 的帮助下：

```
var pie = new RGraph.Pie('cvs', [<?php echo $result1; ?>,<?php echo $result2; ?>]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:28:53.480

你必须回应他们。

```
var pie = new RGraph.Pie('cvs', [<?php echo $result1; ?>,10]); 
```

# magento - magento - 选择框的默认大小

> ID：15416107
> 
> 赞同：0
> 
> 时间：2013-03-14T17:26:31.910
> 
> 标签：magento, magento-1.7, php

我需要将 magento 电子商务的“高级搜索”功能移至侧边栏。

为了使它更紧凑，我想减小“选择”框的大小。

高级搜索 phtml 文件中的代码如下所示：

```
<?php break;
case 'select': ?>
<div class="controls">
<?php echo $this->getAttributeSelectElement($_attribute) ?>
</div> 
```

生成的 html 是这样的：

```
<div class="controls">
<select name="stagione[]" id="stagione" class="multiselect" title="Stagionalità" multiple="multiple" size="4">
...
</select>
</div> 
```

如何将 size="4" 更正为默认为 size="1" 可能只是处理 phtml 文件而不触及核心 magento 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:38:38.453

在 phtml 文件中进行此操作是不可能的，因为选择的大小是硬编码在`Mage_CatalogSearch_Block_Advanced_Form::getAttributeSelectElement`.

```
// 2 - avoid yes/no selects to be multiselects
if (is_array($options) && count($options)>2) {
    $extra = 'multiple="multiple" size="4"';
    $name.= '[]';
} 
```

您可以为此块创建重写并覆盖它。

# jsf - 带有自定义动态图像的 JSF 按钮

> ID：15416108
> 
> 赞同：0
> 
> 时间：2013-03-14T17:26:32.587
> 
> 标签：jsf, jsf-2, primefaces

*JSF-2.0、Mojarra 2.1.19、PrimeFaces 3.4.1*

我知道我们可以通过定义我们自己的 css 类来向按钮添加图像，例如：

```
.imageButton {
  background-image:url(#{resource['images/button.png']});
} 
```

但问题是，图片 url 来自 bean，它对每个用户都有不同的价值，所以给静态图片 url 是行不通的。我需要某事。像那样：

```
<p:button value="#{loginBean.loggeduser.name}" icon="#{loginBean.loggeduser.picurl}"/> 
```

但正如预期的那样，这不起作用，因为 icon 属性需要一个类名。我也尝试`p:graphicImage`在按钮内定义一个组件，但看起来不像是一个常规图标。

它应该看起来像这样：

![个人资料图片](../Images/c1782f7d86faa0e0e8e733f0660790d4.png)

上图可以用预定义的图标完成，代码如下：

```
 <p:commandButton value="sth" icon="ui-icon-star"/> 
```

但正如我所说，我不想使用静态图标。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:50:18.597

你有几个选择。我将在下面列出其中两个。

1.  使用内联样式作为按钮的属性：

    ```
    style='background: url(#{resource['images/button.png']}) no-repeat;' 
    ```

2.  在按钮内嵌套图像（请注意，它不适用于命令按钮）：

    ```
    <h:button ...>
        <h:graphicImage .../>
    </h:button> 
    ```

并在必要时使用其他 CSS 样式进行文本输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:54:16.320

我刚刚检查了 primefaces 3.4 手册，我验证了`<p:commanButton>`它的属性，`styleClass`所以我想你可以使用它，

```
<p:button value="#{loginBean.loggeduser.name}" styleClass="#{loginBean.loggeduser.picStyle}"/> 
```

我想在我的支持bean中定义：

```
public String picStyle() {
  if (userA) {
   //get userA's image
     return "yourcss";
  } else {
     return "default";
  }
} 
```

我不确定这是最好的方法，但我想它应该可以使用`style`属性

# java - HTMLUnit Java - 假装浏览器插件

> ID：15416118
> 
> 赞同：1
> 
> 时间：2013-03-14T17:26:53.130
> 
> 标签：java, htmlunit, browser-plugin

我正在编写一个 Java 工具，它应该分析网站以检测恶意网站。对于恶意网站，我指的是试图利用浏览器漏洞或已安装插件的页面。

但是这些网站（漏洞利用工具包）首先会分析浏览器版本以及是否安装了特定的插件版本。在分析之后，他们使用可以利用漏洞感染 PC 的文件/shellcode 将“iframe”动态注入网站。出于这个原因，我想假装已经安装了一些插件。使用这段代码，我可以显示“安装”了哪些插件。

```
 webClient = new WebClient(BrowserVersion.FIREFOX_17);
        Set<PluginConfiguration> plugins = webClient.getBrowserVersion().getPlugins();

        Iterator<PluginConfiguration> iterator = plugins.iterator();
        while(iterator.hasNext())
        {
            PluginConfiguration plug = iterator.next();
            //Console Output
            tr(plug.getName() + "$" + plug.getDescription() );
        } 
```

### 输出

*Shockwave Flash$Shockwave Flash 9.0 r31*

有人知道我可以如何假装一个 PDF 插件吗？谢谢

# entity-framework - 实体框架 - 避免序列化中的循环关系

> ID：15416120
> 
> 赞同：4
> 
> 时间：2013-03-14T17:26:57.780
> 
> 标签：entity-framework, serialization, entity-framework-5, wcf-data-services, entity-relationship

我有两张桌子：`Users`& `Profiles`。一个用户有一个配置文件 (1:1)，一个配置文件可以影响多个用户，每个配置文件有很多模块，每个模块有很多操作。

我使用直接服务调用将此对象从 asmx 发送到 aspx 页面。

由于延迟加载，我得到了一个错误......所以我禁用了延迟加载。

```
this.Configuration.LazyLoadingEnabled = false; 
```

这很好，我得到了我的用户，配置文件为空。

要构建菜单树，我必须检索配置文件。我包括它：

```
 User user = new User();
        using (cduContext db = new cduContext())
        {
            // get the user
            string encryptedPassword = Encryption.Encrypt(password);
            user = (from u in db.Users
                    where u.UserName.Equals(login) &&
                          u.Password.Equals(encryptedPassword)
                    select u).FirstOrDefault();
            // Include the users profile
            user = db.Users.Include("Profile").FirstOrDefault();
        }
        return user; 
```

我在 javascript 调用函数中遇到了这个错误：

> *序列化“CDU.Entities.Models.User”类型的对象时检测到循环引用。*

当我在 asmx 中（在发送之前）快速查看用户对象时，我发现配置文件已包含拥有此 pofile 的用户列表，每个用户都加载了他的配置文件......等等

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:14:49.810

请注意，您的代码应如下所示：

```
using (cduContext db = new cduContext())
{
    // get the user
    string encryptedPassword = Encryption.Encrypt(password);
    var user = from u in db.Users
               where u.UserName.Equals(login) &&
                     u.Password.Equals(encryptedPassword)
               select u;
    // Include the users profile
    return user.Include("Profile").FirstOrDefault();
} 
```

在您的代码中，您通过用第二个查询覆盖它来丢弃第一个查询。并且没有正当理由创建一个空白用户。

为了解决您的问题，您将决定您不想序列化的内容。在您的情况下，您可能不想序列化 Profile.Users

你没有提到你正在使用什么序列化程序。我假设您正在使用 DataContract 序列化程序？

编辑：

您将使用 [IgnoreDataMember] 属性标记您的 Profile.Users 对象。

# java - CastClassException 为 Struts2 Action 构建测试用例

> ID：15416137
> 
> 赞同：0
> 
> 时间：2013-03-14T17:27:55.000
> 
> 标签：java, struts2, junit3

我在构建使用 Struts 2.3.8 附带的 Spring 模拟框架的单元测试时遇到了麻烦。基本上，我有一个构建框架的 BaseTestCase。然后是调用它的单个测试用例。用我得到的模拟动作从 createAction 中出来：

```
java.lang.ClassCastException: com.opensymphony.xwork2.ActionSupport incompatible with com.lm.learn.action.LoginAction
at com.lm.learn.action.LoginActionTest.testUsername(LoginActionTest.java:18)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
at java.lang.reflect.Method.invoke(Method.java:611)
at junit.framework.TestCase.runTest(TestCase.java:164)
at junit.framework.TestCase.runBare(TestCase.java:130)
at junit.framework.TestResult$1.protect(TestResult.java:106)
at junit.framework.TestResult.runProtected(TestResult.java:124)
at junit.framework.TestResult.run(TestResult.java:109)
at junit.framework.TestCase.run(TestCase.java:120)
at junit.framework.TestSuite.runTest(TestSuite.java:230)
at junit.framework.TestSuite.run(TestSuite.java:225)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

这是因为动作类很好奇`extends ActionSupport`。我必须缺少一些基本的东西，因为这是一个微不足道的例子。不幸的是，我根本不了解Spring。

这是（精简的）动作类：

```
public class LoginAction extends ActionSupport {

private static final long serialVersionUID = -8123618443227375443L;
private String username;
private String password;
private User user;

public String execute() {

    user = new User(username, password);
    if (validateLogin(user)) {
        return SUCCESS;
    } else {
        addActionError(getText("error.login"));
        return ERROR;
    }
} 
```

和测试用例（在第一行爆炸）：

```
 public void testUsername() throws Exception {

    action = (LoginAction) createAction(LoginAction.class, "/", "LoginAction", "execute");
    Map<String, Object> p = new HashMap<String, Object>();
    p.put("user.userName", "admin");
    p.put("user.password", "admin");
    proxy.getInvocation().getInvocationContext().setParameters(p);
    String result = proxy.execute();
    assertEquals(result, "success");
} 
```

以及模拟堆栈的baseCase：

```
 protected <T> T createAction(Class<T> clazz, String namespace, String actionName, String methodName) throws Exception {

    proxy = dispatcher.getContainer().getInstance(ActionProxyFactory.class)
            .createActionProxy(namespace, actionName, methodName, null, false, false);
    proxy.getInvocation().getInvocationContext().setParameters(new HashMap<String, Object>());
    proxy.setExecuteResult(false);
    ServletActionContext.setContext(proxy.getInvocation().getInvocationContext());

    return (T) proxy.getAction();
} 
```

为什么我会收到 ClassCast 异常，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:00:29.963

解决方案：

模拟堆栈需要您正在模拟的操作的完全合格的类名，否则它假定为 ActionSupport。这一行：

```
proxy = dispatcher.getContainer().getInstance(ActionProxyFactory.class)
        .createActionProxy(namespace, actionName, methodName, null, false, false); 
```

没有一篇教程或 Struts 上的 Junit 测试介绍提到这一点。实际上，除非您已经是 Spring 大师，否则它们中的大多数都很难编译。

# backbone.js - 在 Ajax Success Not Working 中附加主干 EL 两次

> ID：15416138
> 
> 赞同：1
> 
> 时间：2013-03-14T17:28:02.520
> 
> 标签：backbone.js, backbone-views

当我尝试在我的成功方法中同时将我的主干视图附加到两个不同的位置时，只有第二个附加有效。你知道为什么吗？

```
$(content).prepend(this.$el.append(this.template({ data: data })));

$(chat_window).prepend(this.$el.append(this.template({ data: data }))); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:51:54.983

每个 DOM 节点可以正好有 0 个或 1 个父节点，从不超过 1 个。如果在某处附加一个节点，它会从当前父节点中删除，然后附加到新父节点。您在这里需要的是 2 个不同的视图实例，每个实例都有自己的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:10:45.630

`el`对应于主干生成的一个`html`元素。`view`在该 html 元素中，您可以附加更多的 html 天气，它是另一个主干`view`或渲染的`template`.

因此，在您的情况下，如果`el`附加了两次，它最终会停留在最后附加到 dom 树的位置。如果你想在多个地方附加，那么我想你应该`view`两次实例化主干。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T06:50:35.430

在我看来，你所说的视图不应该知道它的远亲或表亲，而是应该触发一个事件“我有新的内容”，然后感兴趣的视图可以按照他们想要的方式进行操作。

话虽如此，视图与其 html 表示之间存在差异，您可以设计您的应用程序，以便在 html 中获得 2 个放置“.new-content-holder”的位置，并将此选择器作为 el你对创作的看法。然后这两个地方将同时更新，而无需您明确编程。我有时会使用这种技术，例如，当我希望在列表上方和下方显示长列表的分页器时。

一些 html ：

```
<div class="content">
  <p>Recent comments</>
  <ul class="new-content-holder"></ul>
</div>

<div class="chat-room">
  Live feed
  <ul class="new-content-holder">
    <li>a chat message</li>
    <li>another chat message</li>
  </ul>
</div> 
```

和一个视图

```
....
var MessageView = Backbone.View.extend({
  template: _.template('<li class="chat-message"><%= message %></li>'),

  prependData: function(data){
    this.$el.prepend(this.template(data))
  },

  onMessage: function(message) {
    this.prependData({message: message.data})
  }

});
....

//And in a super controller of sorts :
var messageView = new MessageView(el: '.new-message-holder') 
```

同样，这不是一个很好的关注点分离......但我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T06:57:21.767

我同意@Peter Lyons，您不能将同一个节点注入两个元素。最终，节点将移动到新元素。其中一种方法是从要注入的元素中获取 HTML，然后两次注入相同的 HTML。由于 html 是字符串而不是 dom 元素。您可以多次添加它，并在尽可能多的元素中添加它。

试试这个：

```
var html = this.$el.append(this.template({ data: data })).html();
$(content).prepend(html);
$(chat_window).prepend(html); 
```

我希望您没有在模板内的元素上使用 id。

PS：我不完全了解您的用例。

# c++ - 需要为后缀算法创建中缀

> ID：15416142
> 
> 赞同：0
> 
> 时间：2013-03-14T17:28:05.517
> 
> 标签：c++, queue, postfix-notation

我需要实现中缀到后缀的转换算法来计算表达式 a+b*cd/e

我还需要使用队列来执行此操作（我相信需要 2 个不同的队列堆栈）

我已经使用 DoubleLinkList 创建了我的队列类，现在只需要为这个问题创建算法。不过，我很不知道该怎么做。任何帮助，将不胜感激！

到目前为止（我知道这是非常错误的）我有：

```
string infix = "a+b*c-d/e";
    Queue *holder = new Queue();
    Queue *newstring = new Queue();
    int length = infix.length();
    char temp;
    char prev;
    for(int i=0; i<length; i++)
    {
        temp = infix[i];
        if((temp == '+') || (temp == '-') || (temp == '*') || (temp == '/'))
        {
            if (holder->isEmpty())
            {
                holder->queue(temp);
            }
            if(temp<holder.enqueue())
            {

            }
        }
        holder->queue(temp);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:36:24.677

我认为这是一项家庭作业，因此您自己弄清楚编程细节很重要。该算法的大致轮廓如下：

```
Define a stack
Go through each character in the string
If it is between 0 to 9, append it to output string.
If it is left brace push to stack
If it is operator *+-/ then 
          If the stack is empty push it to the stack
          If the stack is not empty then start a loop:
                             If the top of the stack has higher precedence
                             Then pop and append to output string
                             Else break
                     Push to the stack

If it is right brace then
            While stack not empty and top not equal to left brace
            Pop from stack and append to output string
            Finally pop out the left brace.

If there is any input in the stack pop and append to the output string. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:33:13.663

我认为您应该创建一个运算符和值树。
您可以根据树的遍历顺序从中缀转换为后缀再到前缀。
您的讲师可能已经给您分配了在这三者之间进行转换的作业。

以下是一些文章：
[德克萨斯大学](http://www.cs.utexas.edu/~lavender/courses/ee360c/lectures/lecture-24.pdf)
[YouTube 视频](http://www.youtube.com/watch?v=1X_li3efgDI)
[Wikipedia - 表达式树](http://en.wikipedia.org/wiki/Binary_expression_tree)

# ember.js - ember.js 身份验证

> ID：15416143
> 
> 赞同：4
> 
> 时间：2013-03-14T17:28:08.120
> 
> 标签：ember.js

我想用 ember.js 实现身份验证。因此，当应用程序启动时，在路由器处理请求的 url 之前，我想检查用户状态。如果用户未通过身份验证，我想保存请求的 url 并重定向到特定的 url (/login)。我试图实现这个重载 Ember.Route 但我认为这不是一个好习惯。例如，如果我这样做：

```
var AuthRoute = Ember.Route.extend({  
    redirect: function() {  
        var controller = App.userController;  
            if (!controller.get("userAuth")) {  
                controller.set("lastFilter", this.routeName);  
                this.transitionTo("index");
            }  
        }  
    }  
}); 
```

如果 url 是 '/admin/foobar'，则 admin 路由将重定向而不是 foobar。

我可以在路由器启动之前处理重定向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T10:10:52.480

我用这样的东西

```
Ember.SecureRoute = Ember.Route.extend({
  role: null,

  redirect: function (model) {
    if (!this.controllerFor('login').get('authenticated')) {
        this._routeToLogin();
    }

    var role = this.get('role');
    if (!Ember.isEmpty(role) && !this.controllerFor('login').hasRole(role)) {
        this._routeToLogin();
    } 
  },

  _routeToLogin: function () {
    var infos = this.get('router.router.currentHandlerInfos');

    this.router.router.didTransition(infos);

    var routeName = !this.router.router.hasRoute(this.routeName) ? this.routeName + '.index' : this.routeName;
    var params = infos.filter(function (item, index, enumerable) { return item.context !== undefined; }).map(function (item) { return item.context; })
    var url = Ember.Router.prototype.generate.apply(this.router, params.insertAt(0, routeName))
    this.router.location.setURL(url);

    this.transitionTo("login");
  }
}); 
```

然后在您的 loginController 中，您可以使用浏览器历史记录返回到您的原始路线

```
APP.LoginController = Ember.Controller.extend({
  //other stuff

  authenticate: function (username, password) {
    //do the authentication
    history.go(-1);
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T00:21:23.447

我这样做的方式是将经过身份验证的用户与我的数据一起传递。我的主应用程序中有一个 initConfiguration 函数

所以在索引文件里面（在这种情况下我给你看玉）我有这个：

```
// initialize ember settings
script(type='text/javascript')
    App.initConfiguration('!{currentUser}') 
```

并且在我的应用程序文件中（此处为咖啡脚本）

```
window.App = Ember.Application.create

  currentUser: null

  initConfiguration: (currentUser) ->
    if currentUser? and currentUser.length > 0
      @set 'currentUser', currentUser 
```

如果您使用的是 ember-data，则必须将应用程序文件更改为

```
window.App = Ember.Application.create

  currentUser: null

  tempCurrentUser: null

  initConfiguration: (currentUser) ->
    ##
    # set the tempCurrentUser to the currentUser passed in, this is then
    # set in the ApplicationRoute to the App.currentUser
    # and destroyed (this is necessary as the ember store is not initialzed yet
    # and just setting it here will result in an error)     
    if currentUser? and currentUser.length > 0
      @set 'tempCurrentUser', currentUser 
```

然后在您的应用程序路由中执行以下操作

```
App.ApplicationRoute = Ember.Route.extend

  setupController: (controller) ->
    if App.tempCurrentUser?
      App.setCurrentUser(App.tempCurrentUser) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T18:41:35.093

Ember 有一个关于防止和重试身份验证的精彩指南：http: [//emberjs.com/guides/routing/preventing-and-retrying-transitions/](http://emberjs.com/guides/routing/preventing-and-retrying-transitions/)

根据用户是否登录进行转换的简单方法：

```
App.ApplicationRoute = Ember.Route.extend({
    willTransition: function () {
        var session = this.controllerFor('session');
        if (!session.get('authed')) {
            this.transitionTo('login');
        }
    }
}); 
```

上面的示例假设您有某种会话控制器或对象来管理活动会话。这是因为 ApplicationRoute 是您进入应用程序时（从任何 URL）进入的第一个路由。

# xcode - cocosbuilder的两个同名文件

> ID：15416144
> 
> 赞同：0
> 
> 时间：2013-03-14T17:28:10.843
> 
> 标签：xcode, cocos2d-x, ipa, cocosbuilder

我想使用 cocosbuilder 和 cocos2d-x 为新旧 iPhone 开发我的游戏。我想为两种分辨率创建一个文件。我创建了一个 ccb 文件，然后将其发布到视网膜和正常分辨率。一切正常，但现在我有两个同名的 png 文件：

已发布-iOS/resources-iphone/star.png

已发布-iOS/resources-iphonehd/star.png

有一个问题。我正在使用 Xcode，它不喜欢项目中有 2 个同名文件。我可以将这些文件添加到单独的组中的项目中，但在最终的应用程序包中可能只有一个 star.png 文件。它是随机选择的。当我在 iphone 4s 上启动我的应用程序时，我有来自旧 iphone 显示屏的图片。如何将 cocosbuilder 用于多种分辨率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:53:58.617

您应该将 XCode 项目中的 resources-iphone 和 resources-iphonehd 目录作为文件夹引用而不是组导入。您可以通过将文件夹拖放到您的 XCode 项目中来做到这一点。当您这样做时，您将看到应用程序包中出现的目录。您可以通过选择应用程序的目标并转到 Build Phases->Copy Bundle Resources 来检查。

之后，在您的 ApplicationDelegate.cpp 文件中，您应该将这些文件夹添加到 CCFileUtils 的搜索路径列表中。

```
std::vector<std::string> resDirOrders;

if (resolution is iphone) 
{
    resDirOrders.push_back("resources-iphone");
} 
else if (resolution is iphone retina) 
{
    resDirOrders.push_back("resources-iphonehd");
    resDirOrders.push_back("resources-iphone");
}

CCFileUtils::sharedFileUtils()->setSearchResolutionsOrder(resDirOrders); 
```

这是 cocos2d-x 开发人员推荐的处理多种分辨率的方法（查看[这篇文章](http://www.cocos2d-x.org/projects/cocos2d-x/wiki/Mechanism_of_loading_resources)）。您可以使用 CCDirector 中的窗口大小来确定当前分辨率。在 iphonehd 案例中，我包括非视网膜文件夹以及后备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:39:10.183

Xcode 和 iOS 应用程序包不是在文件夹中组织的，而是在平面包中。您需要重命名文件才能使其正常工作。我建议这样的事情：

```
// iOS Standard
Published-iOS/resources-iphonehd/star@2x.png 
```

或这个

```
// cocos-2d Standard
Published-iOS/resources-iphonehd/star-hd.png 
```

# antlr - 语义谓词从 Antr3 到 Antr4 的翻译

> ID：15416145
> 
> 赞同：0
> 
> 时间：2013-03-14T17:28:11.390
> 
> 标签：antlr, antlr4

在我的 Antlr3 语法中，我使用以下词法分析器规则来识别恒定的日期周期，例如“1 YEAR 4 MONTHS”：

```
(DATE_PERIOD_CONSTANT)=> DATE_PERIOD_CONSTANT ((' '+ DATE_PERIOD_CONSTANT)=> ' '+ DATE_PERIOD_CONSTANT)* 
```

（信用到期的信用，来自Bart Kiers）。

不幸的是，这种语法在 ANTLR4 中已经消失了。所以，我没有成功尝试以下方法：

```
DATE_PERIOD_CONSTANT
: (INTEGER ' '+ (YEAR | MONTH | WEEK | DAY))+
| {getText().matches("(\\d+ (YEAR(S)?|MONTH(S)?|WEEK(S)?|DAY(S)?))+")}? INTEGER
;

INTEGER
    : DIGIT+
    ;

 fragment DIGIT:'0'..'9';

// YEAR/MONTH/WEEK/DAY definition 
```

那也是不成功的。

谁能帮我翻译成新格式？

杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:47:51.307

示例词法分析器规则使用*句法*谓词，而不是语义谓词。这些在 ANTLR 4 中是不必要的，因为它大大提高了前瞻能力。您所要做的就是删除它们：

```
DATE_PERIOD_CONSTANT (' '+ DATE_PERIOD_CONSTANT)* 
```

# java - 如何从属性文件中填充使用弹簧配置的地图

> ID：15416156
> 
> 赞同：1
> 
> 时间：2013-03-14T17:28:28.010
> 
> 标签：java, spring, map

我已经构建了一个小应用程序，它可以读取 Excel 文件并为我创建所有必要的 SQL 语句。Excel文件不时被客户操纵。

Excel 文件的第一行包含一个标题，我在读取这些行时需要将其转换为整数。比如标题“english”需要翻译成“30”，然后我生成SQL语句。（只是一些内部定义）。（您可以将其与 DNS - Human readable domain name into IP-Address mapping 进行比较）目前我手动进行映射，但我想用一个很小的 ​​Spring 配置摆脱这一步。因为标题不是固定的，所以需要从属性文件中读取标题信息。

我发现了这样的事情：

```
<bean class="java.util.HashMap" id="exampleMapping">
    <constructor-arg index="0">
        <map>
            <entry key="theKey" value="theValue"/>
            <entry key="otherKey" value="otherValue"/>
        </map>
    </constructor-arg>
</bean> 
```

这似乎工作得很好。但是Spring配置被编译成一个jar。所以我的第一选择（如果可能的话）是将键值对外部化到属性文件中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T18:13:35.673

你很幸运，因为`Properties`类实现了`Map`！只需像这样定义属性bean：

```
<util:properties id="myProps" location="classpath:myProps.properties" /> 
```

（不要忘记导入 Spring`util`命名空间）

# android - 如何使用 Handler 更新 ProgressBar？

> ID：15416158
> 
> 赞同：3
> 
> 时间：2013-03-14T17:28:33.547
> 
> 标签：android, android-progressbar, android-handler

我是 Android 新手，我正在尝试完成一个关于将 a`ProgressBar`与`Handler`. 请注意，我的目标是 API 11。

这是我的代码，其中包含我正在内联的错误：

```
public class HandlerDemo extends Activity {

    ProgressBar bar;
    Handler handler = new Handler() {

        @Override
        public void handleMessage() {   // Shows "method must override or implement supertype method" on this line.
            bar.incrementProgressBy(5);
        }

        @Override
        public void close() {

        }

        @Override
        public void flush() {

        }

        @Override
        public void publish(LogRecord arg0) {

        }
    };

    AtomicBoolean isRunning = new AtomicBoolean(false);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_handler_demo);
        bar = (ProgressBar)findViewById(android.R.id.progress);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_handler_demo, menu);
        return true;
    }

    public void onStart() {
        super.onStart();
        bar.setProgress(0);

        Thread background = new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    for(int i = 0; i < 20 && isRunning.get(); i++) {
                        Thread.sleep(1000);
                        handler.sendMessage(handler.obtainMessage()); // Shows "Method is undefined for type Handler" on this line.
                    }
                } catch(Throwable t) { }
            }
        });
        isRunning.set(true);
        background.start();
    }

    public void onStop() {
        super.onStop();
        isRunning.set(false);
    }
} 
```

为什么我会收到这些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:31:03.157

您的`Handler`导入错误。它应该是`android.os.Handler`

# c# - DataTable RowChanged 如何获取先前的 Row 值？

> ID：15416161
> 
> 赞同：6
> 
> 时间：2013-03-14T17:28:39.010
> 
> 标签：c#, .net, events, datatable

我有一个数据表。当行发生变化时，我需要获取这一行，它是以前的值（DataRow）。我怎么才能得到它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T17:32:20.767

您应该订阅该[`ColumnChanged`](http://msdn.microsoft.com/en-us/library/system.data.datatable.columnchanged.aspx)事件，这样您就可以看到以前的和当前的值。

例子：

```
//code to wire up the handler
custTable.ColumnChanged += new DataColumnChangeEventHandler(Column_Changed);

//code for the event
private static void Column_Changed(object sender, DataColumnChangeEventArgs e )
{
    Console.WriteLine("Column_Changed Event: name={0}; Column={1}; original name={2}", 
        e.Row["name"], e.Column.ColumnName, e.Row["name", DataRowVersion.Original]);
} 
```

# excel - VBA Excel - 有没有办法根据两列中的条件删除行？

> ID：15416164
> 
> 赞同：1
> 
> 时间：2013-03-14T17:28:44.907
> 
> 标签：excel, vba

我一直在研究一个宏来清理生成并复制到 Excel 中的表单。在我需要删除包含多余公式的行的最后阶段之前，我已经弄清楚了一切。例子：

```
400000  |  Smith, John| 2.4   | 5.66|   =C1+D1
400001  |  Q, Suzy    | 4.6   | 5.47|   =C2+D2
400002  |  Schmoe, Joe| 3.8   | 0.14|   =C3+D3
Blank   |             |       |     |   #VALUE
Blank   |             |       |     |   #VALUE 
```

是否有一个公式可以将“A”列与“E”列进行比较，并让它删除所有在“A”中没有值但在“E”中有值的行？

我尝试了一个基本的循环公式，仅通过空的“A”列，它可以永久删除我想要保留的信息下方的行，我在这个网站上找到了一个处理过滤器的公式（来自 brettdj）但是我不知道如何编辑它以正确捕获我需要的内容。

这是我从 brettdj 那里得到的：

```
Sub QuickKill()
Dim rng1 As Range, rng2 As Range, rng3 As Range
Set rng1 = Cells.Find("*", , xlValues, , xlByColumns, xlPrevious)
Set rng2 = Cells.Find("*", , xlValues, , xlByRows, xlPrevious)
Set rng3 = Range(Cells(rng2.Row, rng1.Column), Cells(1, rng1.Column))
Application.ScreenUpdating = False
Rows(1).Insert
With rng3.Offset(-1, 1).Resize(rng3.Rows.Count + 1, 1)
    .FormulaR1C1 = "=OR(RC1="",RC1<>"")"
    .AutoFilter Field:=2, Criteria1:="TRUE"
    .EntireRow.Delete
    On Error Resume Next
    'in case all rows have been deleted
    .EntireColumn.Delete
    On Error GoTo 0
End With
Application.ScreenUpdating = True 
```

其他一些信息：

我想忽略的工作表的前 5 行，它们包含列标题和报告名称等。

40#### 填充的行数发生了变化，所以我不能简单地让宏删除第 4 行。

我对宏（显然）没有广泛的了解，因此对某些部分如何工作的详细解释将不胜感激。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:39:14.597

是的，有一种**不需要循环的方法**

您的公式（在 Excel 电子表格中）将是这样的：

```
=IF(AND(A:A="",E:E<>""),"DELETE THIS ROW","LEAVE THIS ROW") 
```

现在，可以让该公式将错误放在我测试返回 True 的行中。我们这样做的原因是 Excel 的一个称为 SpecialCells 的功能。

在 Excel 中选择任何空单元格，然后在编辑栏中键入

```
=NA() 
```

接下来，按 F5 或 CTRL+G（**编辑**菜单上的*转到...*），然后单击*特殊*按钮以显示 SpecialCells 对话框。

 ***在该对话框中，单击“公式”旁边的单选并在下方清除复选框，以便仅选择**错误**。现在点击确定

Excel 应该选择了工作表中包含错误 ( **#N/A** ) 的所有单元格。

下面的代码通过在 H 列中创建一个公式来利用这个技巧，该公式将在您要删除的所有行中放置一个**#N/A ，然后调用 SpecialCells 来查找这些行，并清除（删除）它们......**

```
 Sub clearCells()
    '
    Dim sFormula As String
    '
    ' this formula put's an error if the test returns true, 
    ' so we can use SpecialCells function to highlight the
    ' rows to be deleted!
sFormula = "=IF(AND(A:A="""",E:E<>""""),NA(),"""")"
'
' put a formula into column H, to find the rows that ned to be deleted...
Range("H5:H" & Range("E65536").End(xlUp).Row).Formula = sFormula
'
Stop ' next line clears multiple rows, could also delete the entire row!
' now clear the cells returned by SpecialCells ...
Range("H5:H" & Range("E65536").End(xlUp).Row).SpecialCells(xlCellTypeFormulas, xlErrors).Offset(0, -7).Clear ' ' EntireRow .Delete shift:=xlup
'
' clean up the formula
Range("H5:H" & Range("E65536").End(xlUp).Row).Clear    '
    End Sub 
```

复制粘贴并使用 F8 逐步完成...

那么我们可以为您提供更多帮助...

希望这能让你开始

顺便说一句，如果您真的想要一个**循环**，也可以使用循环:)

菲利普

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:53:57.307

我不知道为什么 Philip 认为使用循环是一件坏事。这是一个简单的宏，它遍历每一行并删除`Column A`空且`Column E`具有某些值的行。

它假设您的代码是 on `Sheet 1`。我已经对代码进行了注释，以使您更容易理解。如果您不想考虑`1-5`删除行，请将该`For loop`值设置`6`为代码中的注释所述。

请注意，删除是自下而上进行的，因为当您删除一行时`totalRows`，循环中的计数会发生变化。为了避免缺少行的循环，我只是以相反的顺序进行。

**代码**

```
Public Sub DeleteWhereEmpty()
    Dim colARowCount As Integer
    Dim colERowCount As Integer
    Dim totalRows As Integer
    Dim currentRow As Integer
    Dim colA As Integer
    Dim colE As Integer
    Dim colACurrentValue As String
    Dim colECurrentValue As String

    colA = 1
    colE = 5
    colARowCount = Sheet1.Cells(Rows.Count, colA).End(xlUp).Row
    colERowCount = Sheet1.Cells(Rows.Count, colE).End(xlUp).Row

    'set total number of rows to look at
    totalRows = colARowCount
    If colARowCount < colERowCount Then
        totalRows = colERowCount 'E has more rows, so use it
    End If

    'to stop deleting at row 5, replace 'To 1' with 'To 6'
    For currentRow = totalRows To 1 Step -1
        colACurrentValue = Cells(currentRow, colA).Value
        colECurrentValue = Cells(currentRow, colE).Text

        'if A is empty and E has data in it, delete the row
        If colACurrentValue = "" Or IsEmpty(colACurrentValue) _
           And Len(colECurrentValue) > 0 Then
            Cells(currentRow, colA).EntireRow.Delete
        End If
    Next
End Sub 
```

**前**

![在此处输入图像描述](../Images/d2422bad669a96b9f5f9e509a07318f3.png)

**后**

![在此处输入图像描述](../Images/28c88bc3f71ad762747b36358f000ebd.png)***

# ruby-on-rails - rails 性能测试 - 运行一项测试

> ID：15416171
> 
> 赞同：1
> 
> 时间：2013-03-14T17:29:07.290
> 
> 标签：ruby-on-rails, ruby, testunit

我的 Rails 应用程序中有几个性能测试

它位于 test/performance/some_file.rb 所以文件包含几个方法。我只需要运行一个来获得好的日志

在文件里面我有几个 test_* 方法。

有没有办法只运行一个性能测试？我正在执行：

```
 rake test:benchmark TESTOPTS="--name=test_with_pet_care_job" 
```

看起来我的测试开始了，但由于某种原因它冻结了我如何只运行一个测试？

这是源文件：

# 测试/性能/注册/parent_full_test.rb

```
require './test/test_helper'
require 'rails/performance_test_help'
require 'benchmark_test_helper'
require './test/performance/registrations/logging_methods'

module Registration
  class ParentFullTest < ActionDispatch::PerformanceTest
    attr_reader :parent_data

    include Registrations::LoggingMethods

    def test_with_pet_care_job
      registration_step '01 Member should be created' do
        post registration_submit_path, parent_data[:base_info]
      end

      registration_step '02 Job should be posted' do
        post registration_submit_path, parent_data[:petcare_job]
      end
    end

    def test_with_companion_care_job
      registration_step '01 Member should be created' do
        post registration_submit_path, parent_data[:base_info]
      end

      registration_step '02 Job should be posted' do
        post registration_submit_path, parent_data[:companion_care_job]
      end
   end

   def setup
     refresh_member_data
     delete logout_path

     write_to_log("performance test started")
   end

   def teardown
     Account::Member.last.profile.destroy # to clean mongo data
   end

   private

   def refresh_member_data
     @parent_data = BenchmarkTestHelper.yaml_data(data_file)
   end

   def data_file
     File.join(File.expand_path('..' ,__FILE__), 'data/parent.yml.erb')
   end
 end 
```

结尾

# 测试/性能/注册/logging_methods.rb

```
module Registrations
  module LoggingMethods

    def registration_step(step_name)
      before_count = Profile::MemberActivity.count
      write_to_log(step_name + ' started')
      yield
      write_to_log(step_name + ' finished')
      assert_equal Profile::MemberActivity.count, before_count+1, step_name
    end

    def write_to_log(message)
      Rails.logger.debug message
    end
end 
```

# 测试/benchmark_test_helper.rb

```
require 'yaml'

module BenchmarkTestHelper
  class << self
    def yaml_data(file_name)
      YAML.load(ERB.new(File.read(file_name)).result).with_indifferent_access
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:36:30.133

```
ruby -I test test/performance/some_file.rb --name=test_with_pet_care_job 
```

# generics - 如何将通用接口注册到通用实现

> ID：15416172
> 
> 赞同：1
> 
> 时间：2013-03-14T17:29:10.393
> 
> 标签：generics, inversion-of-control, unity-container, munq

在 Unity 中，我可以轻松地将通用接口映射到通用实现，这样对于所有 ISomething，我可以通过单个注册映射 SomethingImpl。

```
var container = new UnityContainer();
//Map all generic repositories to their concrete generic implementations.
container.RegisterType(
                       typeof(IRepository<,>), 
                       typeof(Repository<,>)
                      ); 
var EmployeeRepository = container.Resolve<IRepository<Employee, int>>(); 
```

如何在 Munq 中实现相同的目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-28T08:39:03.017

您可以像这样使用 Unity 注册开放泛型：

```
container.RegisterType(typeof(IOpenGeneric<>), typeof(OpenGeneric<>)); 
```

然后你可以像这样解决它们：

```
IOpenGeneric<MyClass> value = container.Resolve<IOpenGeneric<MyClass>>(); 
```

您不能做的是使用“明显”的语法：

```
container.RegisterType<IOpenGeneric<T>,OpenGeneric<T>>() // SYNTAX ERROR!! 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T21:20:55.797

你运气不好。你有两个选择：

1.  显式注册所有类型：

    ```
    container.Register<IRepository<int, User>, Repository<int, User>>();
    container.Register<IRepository<Guid, Order>, Repository<Guid, Order>>();
    container.Register<IRepository<long, OrderLine>, Repository<long, OrderLine>>();
    // etc 
    ```

    你总是可以做一个方便的帮助方法来减轻一点痛苦：

    ```
    public static void RegisterRepository<TKey, TEntity>(
        this Container container)
    {
        container.Register<IRepository<TKey, TEntity>, Repository<TKey, TEntity>();
    }

    container.RegisterRepository<int, User>>();
    container.RegisterRepository<Guid, Order>>();
    container.RegisterRepository<long, OrderLine>>();
    // etc 
    ```

2.  切换到具有对开放泛型的内置支持的不同容器。以下是我所知道的支持此功能的容器：Autofac、StructureMap、Unity、Castle Windsor、Ninject 和 Simple Injector。

# java - 获取系统时间监听器

> ID：15416177
> 
> 赞同：1
> 
> 时间：2013-03-14T17:29:22.903
> 
> 标签：java, swing, time, system, actionlistener

我有一个实现`Actionlistener`. 单击此类中的按钮后，我希望它在我指定的精确时间，更早和其他地方执行某些操作。所以我做了这些课程：

```
class DoSomething implements ActionListener{
     public void actionPerformed(ActionEvent a){
     while(true){
         String test = obtainTime.time;

    if(test.matches("(.*)17:29:30(.*)")){
         Class.doSomethingMethod();
    }
        //Rest of the code
     }
     }
}

class ObtainTime{
     static DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
     static Calendar cal = Calendar.getInstance();
     static String time = dateFormat.format(cal.getTime());
} 
```

所以问题是，我只得到点击它的时间。第二件事是按钮变得不可点击，因为它仍在运行，有没有办法让它在代码仍在后台运行时再次可点击？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:02:14.117

如果您正在做一些快速的事情和/或需要您在达到目标时间时更新 UI 的事情，那么您想要使用[Java Swing Timer](http://docs.oracle.com/javase/6/docs/api/javax/swing/Timer.html)。更多关于这方面的文档在这里：[Oracle 的 Swing Timer 教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。如果您正在执行一项长期运行的任务，您将需要遵循 andersoj 的建议并使用预定的执行程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:36:51.347

如果你想并行地做几件事，你必须使用线程。你可以通过使用[Thread](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)扩展你的类或实现[Runnable 接口](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)来做到这一点。 两种方式的不错的教程都可以在[这里](http://www.javabeginner.com/learn-java/java-threads-tutorial)找到。

要获取与您的模式匹配的甲酸盐时间和日期，请查看[此文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)，您可以在其中找到在 java 中格式化日期和时间的模式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:11:57.047

看起来您正在使用 Swing 作为您的 GUI API。你应该使用[javax.swing.SwingWorker](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingWorker.html)来实现你正在寻找的东西。可以按如下方式完成：

```
import javax.swing.*;
import java.util.*;
import java.text.*;
import java.awt.*;

public class SWorker extends JFrame
{
    JLabel label ;
    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
    Calendar cal = Calendar.getInstance();
    static SwingWorker worker;
    public void createAndShowGUI()
    {
        setTitle("SwingWorker Demo");
        label = new JLabel();
        getContentPane().add(label,BorderLayout.NORTH);
        setSize(300,200);
        worker = new SwingWorker<String, String>() 
        {
            @Override
            public String doInBackground() 
            {
               cal = Calendar.getInstance();
               String test = dateFormat.format(cal.getTime());
               while (!(test.matches("(.*)23:41:30(.*)")) && ! isCancelled())
               {
                   publish(new String[] {test});
                    Thread.sleep(5);//Added to sleep the thread for 5 ms so that load could be shed from processor..
                   cal = Calendar.getInstance();
                   test = dateFormat.format(cal.getTime());
               }
               return test;
            }

            @Override
            public void done() //This method is called when doInBackground() finishes. i.e when pattern is matched
            {
                try
                {
                    //Call here the method that you want to call after the time matches.
                    label.setText(get() + " Time's up ...!!");  
                }
                catch (Exception ex){}

            }
            @Override
            public void process(java.util.List<String> chunks)
            {
                label.setText(chunks.get(chunks.size()-1));
            }
        };
        String time = dateFormat.format(cal.getTime());
        label.setText(time);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }
    public void start()
    {
        worker.execute();
    }
    public static void main(String st[])
    {
        SwingUtilities.invokeLater( new Runnable()
        {
            @Override
            public void run()
            {
                SWorker sWorker = new SWorker();
                sWorker.createAndShowGUI();
                sWorker.start();
            }
        });
    }
} 
```

要了解有关如何使用的更多信息，请查看[SwingWorker 上](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)`SwingWorker`的官方教程

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:51:24.177

**您的第一个问题**：虽然令人困惑，但我想您是在问为什么您只能获得第一次按下按钮时所测量的时间。答案是因为当你第一次按下按钮时，你加载了`ObtainTime`类。当您加载该类时，静态初始化程序运行一次且仅一次。该行：

```
static String time = dateFormat.format(cal.getTime()); 
```

是一个静态初始化器。你可能想要做的是更像这样的事情：

```
class DoSomething implements ActionListener{

  private final ScheduledExecutor scheduler = executors.newSingleThreadScheduledExecutor();
  private final long timeToRunAction;

   DoSomething(long timeToRunAction) {
     this.timeToRunAction = timeToRunAction;
   }

   public void actionPerformed(ActionEvent a)
   {
     long currentTime = System.currentTimeMillis();
     long delayTime = timeToRunAction - currentTime;
     scheduler.schedule(new Runnable() {
         public void run() { Class.doSomethingMethod(); }
     }, delayTime, TimeUnit.MILLISECONDS);
   }
} 
```

如果你使用这个类，那么当你实例化它时，你在构造函数中指定目标时间。您可能希望它更具动态性，这很好，您只需使该`timeToRunAction`字段可变并提供一种设置它的方法。此处的时间以从 unix 纪元开始的毫秒数指定。如果你需要做一些日历魔术来计算你的目标时间，我已经把它省略了。

**您的第二个问题**：我强烈建议您不要使用自己的并发，而是使用它[`ScheduledExecutor.schedule()`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#schedule%28java.util.concurrent.Callable,%20long,%20java.util.concurrent.TimeUnit%29)来执行此操作。您将需要使用日历来计算正确的延迟时间（可能以毫秒为单位）来安排活动。

# symfony - 内核中的 Symfony 2.1 控制器覆盖。请求结果“允许的内存大小已用尽”

> ID：15416185
> 
> 赞同：2
> 
> 时间：2013-03-14T17:30:07.150
> 
> 标签：symfony, event-listener

问候那里的编码员，

我尝试通过以下方式创建基于请求路由的控制器覆盖功能作为 kernel.request 侦听器：

```
public function onKernelRequest(GetResponseEvent $event){

    $requested_uri = $event->getRequest()->getRequestUri();

    if($requested_uri == '/' || $requested_uri == '/index.php' || $requested_uri == '/index_dev.php'){
        $event->getRequest()->attributes->set('_controller', 'TestHomeBundle:Home:index');
    }   
} 
```

但是它在 apache 日志中显示以下错误：

```
PHP Fatal error:  Allowed memory size of 268435456 bytes exhausted (tried to allocate 39 bytes) in /vendor/symfony/symfony/src/Symfony/Component/Routing/Generator/UrlGenerlGenerator.php on line 182 
```

我通过以下方式注册了它。

```
 kernel.listener.homepage_rewrite_listener:
    class: Test\HomeBundle\EventListener\HomepageRewriteListener
    tags:
        - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest, priority: 35 } 
```

主要问题是我不能给这个更多的内存。欢迎任何想法。先感谢您。

# java - Eclipse：“导入 java.io 无法解析”

> ID：15416186
> 
> 赞同：32
> 
> 时间：2013-03-14T17:30:07.617
> 
> 标签：java, android, eclipse

我在 Eclipse 中有几个 Android 项目，一切都很好，除了一个（一个库）无法解析任何导入。

java.io 导入在同一个工作区中的其他 Android 项目中确实可以很好地解决，并且以前（我已经一年多没有使用它）这个库也可以正常工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-03-14T17:33:07.043

检查两件事

**Eclipse 首选项**

1.  检查您的 Eclipse 首选项：`Java`->`Installed JREs`
2.  您正在使用的那个应该被标记，它应该是一个 JDK 而不仅仅是一个 JRE。

**项目构建路径**

1.  还要检查项目的构建路径：右键单击项目 -> `Properties`->`Java Build Path`
2.  检查`libraries`文件夹中是否存在 JRE 系统库并...
3.  如果没有使用`Add library`->添加它`JRE System Library`，然后选择正确的一个（从已安装的 JDK 中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-25T10:11:33.027

我正在使用 Maven，这是我为重新解决而做的 -->

1.  右键单击项目
2.  Maven -> 更新项目。确保选择“强制更新快照/版本”。
3.  还要检查“clean project”、“update project conf from pom”和“refresh workspace resource options”，然后单击“ok”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-26T11:58:27.827

以下对我有用：

*   关闭项目并重新打开它。

或者

*   清理项目（= 重建构建路径，从而重新配置 JDK 库）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-04T17:12:33.930

我的项目树中缺少 JRE 系统库。并导航到项目的构建路径和“添加（ing）库”工作！

# html - 有没有办法显示宽度为 % 且没有内容的 div？

> ID：15416190
> 
> 赞同：0
> 
> 时间：2013-03-14T17:30:15.530
> 
> 标签：html, css, shapes

例如这个 div 显示：

```
<div class="circle"></div

.circle { 
   width: 300px;
   height: 300px;
   background: red; 
   border-radius: 50%;
} 
```

但是当宽度和高度以 % 为单位时，它会崩溃：

```
.circle { 
       width: 30%;
       height: 30%;
       background: red; 
       border-radius: 50%;
    } 
```

有没有办法让它显示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:32:06.070

这是因为 div 没有高度。`width: 30%;`将始终使 div 的宽度为父级（`<body>`在本例中为 ）的 30%，这就是您想要的。但是，高度的行为略有不同。

您需要为 body 和 html 指定 100% 的高度，如下所示：

```
html,
body {
  height: 100%;
} 
```

[工作小提琴](http://jsfiddle.net/w5LSK/)

[你可以在这里](http://webdesign.about.com/od/csstutorials/f/set-css-height-100-percent.htm)阅读为什么会有这样`height: 100%;`的行为

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:34:24.907

您需要在某处声明一个硬宽度/高度，在此示例中，我在容器 div 上放置了一个硬宽度/高度：

[http://jsfiddle.net/exrNm/1/](http://jsfiddle.net/exrNm/1/)

```
<div class="con">
    <div class="circle"></div
</div>

.con{
    width:300px;
    height:300px
}

.circle { 
   width: 30%;
   height: 30%;
   background: red; 
   border-radius: 50%;
} 
```

您可以轻松地在父链的某处设置硬宽度。% 需要一个硬值来计算。

# google-visualization - 谷歌折线图：特定范围的不同颜色

> ID：15416198
> 
> 赞同：5
> 
> 时间：2013-03-14T17:30:36.930
> 
> 标签：google-visualization, linechart

[https://developers.google.com/chart/interactive/docs/gallery/linechart?hl=ja#Configuration_Options](https://developers.google.com/chart/interactive/docs/gallery/linechart?hl=ja#Configuration_Options)

如何根据特定范围为单行指定不同的颜色？例如，一条线应该是从 0 到 10 的蓝色，从 10 到 20 的红色。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T02:27:49.043

简短的回答：你不能。

长答案：您可以构建一个冗长的解决方法，但每个步骤都会出现不同的问题，您可能会发现这些问题比单色线更糟糕。

循环遍历您的数据，以便每种颜色在每个系列的不同列中。这是最快的方法。

例如，如果您有数据：

```
 var data = google.visualization.arrayToDataTable([
    ['Month', 'Data'],
    ['2004/05', 123],
    ['2005/06', 234],
    ['2006/07', 345],
    ['2007/08', 456],
    ['2008/09', 789] 
```

你想把它分成3种颜色：<300, 300-600

> 600

您可以编写一个脚本来使您的数据看起来像这样：

```
 var data = google.visualization.arrayToDataTable([
    ['Month', 'Red', 'Green', 'Blue'],
    ['2004/05', 123, null, null],
    ['2005/06', 234, null, null],
    ['2006/07', null, 345, null],
    ['2007/08', null, 456, null],
    ['2008/09', null, null, 789] 
```

以上将为您提供每个不同范围的彩色点。如果您确实希望连接它们的线在超过某个阈值时立即改变颜色，您必须计算任何一天的 300 的截距，并将其添加到系列中。与 600 相同。您还必须将“月份”系列更改为实际日期值，以便您可以正确设置两者之间的点。当然，那些中间点也会出现，这是另一个令人头疼的问题......

您也可以摆弄[域](https://developers.google.com/chart/interactive/docs/roles)，但这些不会帮助您着色（但会帮助您将不同的点连接到同一个系列）。

# python - 下载 xlrd python 包时出现“解压失败”错误

> ID：15416200
> 
> 赞同：0
> 
> 时间：2013-03-14T17:30:45.063
> 
> 标签：python, xlrd

从以下链接下载 xlrd python 包时出现“解压失败”错误。[https://pypi.python.org/pypi/xlrd](https://pypi.python.org/pypi/xlrd)

我过去曾下载过 python 包，但从未收到此错误。请有人告诉我错误的根源是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:51:15.510

该链接的 Safari 似乎已损坏，我在使用该浏览器时看到相同的错误。

使用不同的浏览器（Chrome 和 Firefox 都可以很好地处理文件），或者`curl`从命令行使用：

```
curl -O "https://pypi.python.org/packages/source/x/xlrd/xlrd-0.9.0.tar.gz" 
```

# php - MYSQL 循环显示额外的“空”结果

> ID：15416201
> 
> 赞同：0
> 
> 时间：2013-03-14T17:30:45.633
> 
> 标签：php, loops, mysqli

我已经删除了表格并一遍又一遍地使用新数据重新开始，并试图弄清楚为什么我的循环在开始时添加了一个额外的空结果。我用于循环的代码如下。

```
 $sql = "SELECT * FROM `addresses` WHERE `company_name` = '$pro_company'";
    $query = $mysqli->query("$sql");    
        while($array[] = $query->fetch_object());
            array_pop($array);
            foreach($array as $listing) :
                echo $listing->Taddress . " ";
                echo $listing->Tcity. " ";
                echo $listing->Tstate . " ";
                echo $listing->Tzip . " ";
                echo " <a href='edit.php?pid=". $listing->PID . "'>edit</a> |";
                echo " <a href='delete.php?pid=". $listing->PID . "'>delete</a>";
                echo "</a><br />";
        endforeach; 
```

我从这个循环中得到的结果如下。

```
 edit | delete
       14220 Parrott Ext. TestCity AL 84106 edit | delete 
```

我正在尝试学习 mysqli 语句，所以我确信我缺少一些东西。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:33:27.430

扔一个

```
print_r($array);die; 
```

在foreach之前并查看输出。这应该让您了解问题的确切位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:38:36.737

您的数据库很可能有一行没有值。先检查一下。发生的频率比你意识到的要多（无论如何对我来说）

作为一种可能的解决方案，您可以在回显之前添加额外条件以确保存在值

```
foreach($array as $listing) :
   if($listing->Taddress){
     echo $listing->Taddress . " "; 
```

就个人而言，我会先找到原因。print_r 会有所帮助

# java - 辅助方法和正确使用 for 循环

> ID：15416207
> 
> 赞同：1
> 
> 时间：2013-03-14T17:31:05.373
> 
> 标签：java

**该计划的指导方针如下**

问题 B：年份日期。目标：了解 Switch 结构、辅助方法以及使用带有标记值的 While 循环。

您将创建一个名为 Year2012 的类，以在给定月份（mm）或月份加天（dd）作为整数值时操作日期。它有以下获取方法： 1) MonthName，它返回一个字符串值，它是月份的名称，例如九月、六月、五月等。 2) DaysInMonth，它返回该月的天数。3)DayOfTheYear 返回序数年份日期（1-365 之间的数字，通常称为儒略日期）。提示，使用 for 循环添加前一个月的天数，然后添加当前月的天数。4) DayOfWeek，它返回一个字符串值，它是当天的名称，例如星期一、星期二等。

其中一些方法可以用作其他方法的“辅助”方法。所有方法都将直接或间接使用 switch 语句。每个方法都根据发送给它的值计算返回值，因此没有类属性，只有一个默认构造函数。所有逻辑都必须包含在您自己的方法中。（即，您不会将现有的 API 类用于您的逻辑。）设计一个测试应用程序，询问用户月份和日期，然后显示月份名称、月份中的天数、日期这个日期的星期，以及这一天的儒略日期。编写程序以使用 While 循环处理日期，直到输入标记值。多次运行您的程序以测试不同的日期，但使用以下五个日期进行最后一次运行：1 月 1 日、4 月 18 日、8 月 2 日、11 月 28 日和 12 月 15 日。

**我在这个程序的某些部分遇到问题。特别是使用 Julian date 方法和 dayofTheWeek 方法。Julian date 不断打印出 1 （我没有测试很多日期），并且是 dayofTheWeek 方法的辅助方法，你能看看我的代码，看看我的问题是什么吗？**

```
 public String monthName(int month)
    {
        String mon = null;
        switch (month)
        {
            case 1:
                mon = "January";
                break;
            case 2:
                mon = "February";
                break;
            case 3:
                mon = "March";
                break;
            case 4:
                mon = "April";
                break;
            case 5:
                mon = "May";
                break;
            case 6:
                mon = "June";
                break;
            case 7:
                mon = "July";
                break;
            case 8:
                mon = "August";
                break;
            case 9:
                mon = "September";
                break;
            case 10:
                mon = "October";
                break;
            case 11:
                mon = "November";
                break;
            case 12:
                mon = "December";
                break;
            default:
                mon = "Inccorect entry";
                break;
        }
        return mon;
    }

    public int daysInMonth(int month)
    {
        int days = 0;
        switch (month)
        {
            case 1:
                days = 31;
                break;
            case 2:
                days = 28;
                break;
            case 3:
                days = 31;
                break;
            case 4:
                days = 30;
                break;
            case 5:
                days = 31;
                break;
            case 6:
                days = 30;
                break;
            case 7:
                days = 31;
                break;
            case 8:
                days = 31;
                break;
            case 9:
                days = 30;
                break;
            case 10:
                days = 31;
                break;
            case 11:
                days = 30;
                break;
            case 12:
                days = 31;
                break;
            default:
                days = 0;
        }
        return days;
    }

    public int dayOfTheYear(int month, int day)
    {
        int julian = 0;
        for (int count = 1; count == month; count++)
        {
            julian += daysInMonth(count);
        }
        return julian;
    }

    public String dayOfWeek(int month, int day)
    {
        int daysSoFar = dayOfTheYear(month, day);
        int weekDay = daysSoFar % 7;
        String dayName = null;

        switch (weekDay)
        {   
            case 1:
                dayName = "Sunday";
                break;
            case 2:
                dayName = "Monday";
                break;
            case 3:
                dayName = "Tuesday";
                break;
            case 4:
                dayName = "Wednesday";
                break;
            case 5:
                dayName = "Thursday";
                break;
            case 6:
                dayName = "Friday";
                break;
            case 7:
                dayName = "Saturday";
                break;
            default:
                dayName = "Incorrect entry";
        }
        return dayName;     
    }

    public static void main(String[] args)
    {
        Scanner keyboard = new Scanner(System.in);
        Year2012 year = new Year2012();
        System.out.println("Please enter a month using integers (Jan = 1): ");
        int month = keyboard.nextInt();
        System.out.println("Please enter a day within that month: ");
        int day = keyboard.nextInt();

        System.out.println("Month: " + year.monthName(month));
        System.out.println("Number of days in month: " + year.daysInMonth(month));
        System.out.println("Day of the week: " + year.dayOfWeek(month, day));
        System.out.println("Julian date: " + year.dayOfTheYear(month, day));

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:38:18.063

你在设置朱利安值的 for 循环中弄错了。尝试这个：

```
int julian = 0;
for (int count = 1; count < month; count++)
{
julian += daysInMonth(count);
}
return julian + day; 
```

此循环使用**count < month**而不是**count == month**。它还返回**julian + day**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:41:48.837

你在朱利安值计算中有几个问题。尝试这个：

```
public int dayOfTheYear(int month, int day)
{
    int julian = 0;
    for (int count = 1; count < month; count++) //note this loop will not run for Jan(as the logic below will cover that
    {
        julian += daysInMonth(count);
    }
    julian += day;
    return julian;
} 
```

此循环使用 count < month 而不是 count == month，然后在返回答案之前添加输入中的天数。

请注意，此循环不会为 Jan 运行，因为在这种情况下，您只想添加输入的日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T17:38:35.467

你的 for 循环条件是`count == month`.

```
public int dayOfTheYear(int month, int day)
{
    int julian = 0;
    for (int count = 1; count == month; count++)
    {
        julian += daysInMonth(count);
    }
    return julian;
} 
```

这意味着循环体只会在`month`输入为 1 时执行，并且只会执行一次。你的意思是`count < month`？

# python - 排序和排名列表 python 并使用 python 写回 MySQL

> ID：15416212
> 
> 赞同：0
> 
> 时间：2013-03-14T17:31:25.413
> 
> 标签：python, mysql-python

我正在使用 python 从 MySQL 读取值，然后对列表进行排序。然后我需要对列表进行排名并将其写回 MySQL。我的代码是

获取列表

```
cursor.execute ("SELECT winnings, user, rank FROM round_lb WHERE r_id = 5")
round_test = cursor.fetchall() 
```

返回

```
((90L, 70L, 0L), (17L, 1L, 0L), (25L, 78L, 0L)) 
```

排序列表（因此最高奖金列在前）

```
print sorted(round_test, reverse =True)
[(90L, 70L, 0L), (25L, 78L, 0L), (17L, 1L, 0L)] 
```

我现在想为 rank 字段分配一个值，所以 90 是 rank1、25 rank2 和 17 rank3 等...

这就是我卡住的地方..有没有人知道一种在python中对它们进行排名的简单方法......所以我可以将它们写回MySQL......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:36:59.593

```
>>> [row[:-1] + (rank,) for rank, row in enumerate(sorted(rows, reverse=True), start=1)]
    [(90L, 70L, 1), (25L, 78L, 2), (17L, 1L, 3)] 
```

*   `enumerate(rows, start=1)`返回返回 (rank, row) 的元组列表，从`1`
*   `row[:-1]`从行中取出所有项目，但最后一个（有效地剥离旧排名）
*   `row[:-1] + (rank,)`连接行的第一项和包含排名的 1 元组。

如果你打算替换它，你为什么要选择它呢？

```
cursor.execute ("SELECT winnings, user FROM round_lb WHERE r_id = 5")
rows = cursor.fetchall()
for rank, (winnings, user) in enumerate(sorted(rows, reverse=True), start=1):
    params = (winnings, user, rank)
    cursor.execute("INSERT INTO round_lb (winnings, user, rank) VALUES (%s, %s, %s)", params) 
```

为什么不在 MySQL 中对它们进行排序？

```
cursor.execute ("SELECT winnings, user FROM round_lb WHERE r_id = 5 ORDER BY winnings DESC")
rows = cursor.fetchall()
for rank, (winnings, user) in enumerate(rows, start=1):
    params = (winnings, user, rank)
    cursor.execute("INSERT INTO round_lb (winnings, user, rank) VALUES (%s, %s, %s)", params) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:36:48.950

如果您只需要顺序排序，您已经将它放在列表中元组的位置：

```
sorted_list = sorted(round_test, reverse =True)
# [(90L, 70L, 0L), (25L, 78L, 0L), (17L, 1L, 0L)]
ranked_list = []
for position, row in enumerate(sorted_list):
    ranked_list.append(tuple(row[0:2] + [position])) # replaces the 3rd row member
# ranked_list
# [(90L, 70L, 1), (25L, 78L, 2), (17L, 1L, 3)] 
```

# knockout.js - observable() 未按预期更新选择所选项目

> ID：15416215
> 
> 赞同：0
> 
> 时间：2013-03-14T17:31:30.243
> 
> 标签：knockout.js

的HTML：

```
<select id="Catagories_CategoryId" data-bind="options: CategoryServiceTypes, 
    optionsText: 'Name',                        
    optionsCaption: 'Please select a Category...',                                        
    value: SelectedCategoryType">
</select> 
```

在下面的代码示例中，我刚刚删除了网格中的一个项目，所以我通过重新填充网格`LoadServiceTypesFromSvc()`

```
obj.SelectedCategoryTypeHolder(obj.SelectedCategoryType()); //copy the old selected object
pager.LoadServiceTypesFromSvc(); //repop
ko.utils.arrayForEach(obj.CategoryServiceTypes(), function(data) {                                                        
    if (data.CategoryId() == obj.SelectedCategoryTypeHolder().CategoryId()) {
        obj.SelectedCategoryType(data);
        alert('selected ' + obj.SelectedCategoryType().Name()); //shows the name of the item I'm aiming for
    }
}); 
```

`LoadServiceTypesFromSvc()`还重新填充了选择。我想将选择的选定值设置为数据刷新之前的值。

即使警报确认 obj.SelectedCategoryType() 已设置为我希望设置的值 - 选择本身保持不变，仍显示默认的“请选择...”第一项。

我错过了什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:49:00.993

对 .done 函数中 LoadServiceTypesFromSvc() 返回的每个项目运行 ko.utils.arrayForEach(...) 块

# prolog - prolog中的单例变量

> ID：15416220
> 
> 赞同：24
> 
> 时间：2013-03-14T17:31:39.907
> 
> 标签：prolog

我正在测试我的新版本 SWI prolog 并不断遇到错误：**单例变量**。

例子：

```
member(X,[X|T]).

member(X,[X|T]) :- member(X,T). 
```

查找列表的成员，例如：

```
member(yolands,[yolanda,tim])

X = yes 
```

但相反，我得到X 和 T的**单例变量错误**

如果我执行以下操作：

```
member(X,[X|_]).
member(X,[_|T]) :- member(X,T). 
```

它有效，但看起来很丑！

谁能解释为什么不允许使用单个变量以及这个 ANSI 标准？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T17:40:37.893

单例变量在 Prolog 中是*无用*的，很容易通过编辑错别字引入。

我欢迎这个*警告*，因为它可以很容易地发现这种常见的错误原因。

作为警告，您*可以*运行包含单例的代码，但这些最终假定的任何值都将丢失。

我不认为*ISO*标准（从未听说过*ANSI*）禁止此类变量。

你可以用这种方式重写你的例子

```
member(X, [Y|T]) :- X = Y ; member(X, T). 
```

然后忘记单例。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-14T19:19:22.533

你这里有一个错误：

```
member(X,[X|T]) :- member(X,T). 
```

你**实际上**在说什么（与你认为你在说什么相反）是，`member/2`如果 X 位于列表的头部**并**出现在列表的尾部，则它成立。这个谓词只对列表开头的同一事物的前 N ​​个副本为真，所以说起来很奇怪！

```
?- member(X, [a,a,c]).
X = a ;
X = a ;
false.

?- member(X, [b,a,a]).
X = b ;
false. 
```

现在，您可以通过执行以下操作来纠正错误并仍然有单例警告：

```
member(X, [Y|T]) :- member(X, T). 
```

但这既不如具有两个头的传统定义或具有显式 OR 的 @CapelliC 版本 (+1) 好。我认为你应该等到你对 Prolog 有了更好的理解，然后再对你的 Prolog 代码美学的感觉进行大量评估。如果您坚持使用一段时间，您将体会到这个警告以及匿名变量的使用。

使单例变量在 Prolog 中无用的原因是它们被命名但对它们一无所知，并且它们对其余的计算没有影响。下划线强调绝对任何东西都可以在不影响含义的情况下进入那里。是什么使得

```
member(X, [X|T]). 
```

true 是位置 1 的 X 与位置 2 的列表头部的 X 相同。列表必须为空或有头和尾，但尾部的内容与此处无关，重要的是X 也是头部。T 可能是列表的其余部分，也可能是不合适的列表，也可能是面包盒、闪电或春日空气的气味。与真假无关`member(X, [X|T])`。

单例警告告诉你“你在这里为某些东西保留了一个名字，但你从来没有用那个名字来调用任何东西。” 当我收到这条消息并且它不是一个明显的错字时，我做的第一件事就是用 _ 替换名称，看看我的代码是否仍然有意义。如果没有，我有一个逻辑错误。如果是这样，那可能是不必要的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-19T14:26:14.240

[您可以在SWI-Prolog FAQ](http://www.swi-prolog.org/FAQ/SingletonVar.html)的官方页面上阅读它

出现此警告的最常见情况是：

1.  变量中的拼写错误
2.  忘记使用/绑定变量

SWI 提出了一些忽略它的方法：

1.  为此目的使用名为 _ 的匿名变量。
2.  使用以 _ 开头的变量（如`_T`, `_X`），以避免警告并记录您忽略的内容。
3.  如果您知道自己在做什么，则可以使用`:- style_check(-singleton).`，并且所有警告都应该消失。

# javascript - Javascript每个href onclick

> ID：15416222
> 
> 赞同：0
> 
> 时间：2013-03-14T17:31:45.553
> 
> 标签：javascript, html, href

我正在开发一个留在网站本身的应用程序，我希望每个链接都调用一个函数。我试过这个：

**HTML**

```
<a href="index.php">link</a><br>
<a href="news.php">link 2</a> 
```

**Javascript**

```
var a = document.getElementsByTagName("a");
for (var i = 0; i < a.length; i++) {
  a[i].onclick = function () {
    return false
  }
} 
```

怎么了？它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:34:03.383

由于它不是 jQuery，因此您应该使用该[`preventDefault`](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)函数。

```
var a = document.getElementsByTagName("a");
    for (var i = 0; i < a.length; i++) {
       a[i].onclick = function (e) {
       e.preventDefault();

       doSomething();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:35:12.433

编辑纯javascript解决方案

```
document.addEventListener("click", function(e){
    if (e.nodeName==="A"){
        e.preventDefault();
        return false;
    }
}, false); 
```

这只会向文档添加一个事件，并仅阻止对锚元素的所有点击。

由于评论，我删除了旧的解决方案，这不是一个 jquery 问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:35:06.023

不要使用`return false`，它比你真正需要的要多。而是尝试`event.preventDefault()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:38:20.197

```
var a = document.getElementsByTagName("a").forEach(function (e) {
       e.onclick = function (a) {
           doSomething(a);
           return false;
       }
    }
} 
```

# java - i18n 本地化电话号码、地址、货币

> ID：15416225
> 
> 赞同：0
> 
> 时间：2013-03-14T17:31:54.227
> 
> 标签：java, internationalization

我想知道是否有人遇到过一个开源包，它可以根据国家/地区设置提供日期格式、电话号码格式、地址（和邮政编码/邮政）和货币等的实现。

因此，对于国家/地区代码，i18n 库将返回提及的已定义类型的特定实现。

我希望看到 JDK 提供这种需求。

如果有人愿意，我愿意参与这样的项目。

帕特里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:00:36.280

本地化日期和货币格式是标准 API 的一部分。相关的起点是类`java.text.DateFormat`和`java.text.NumberFormat`.

[如果您需要标准 API 或更详细功能之外的语言环境支持，您可以在ICU](http://site.icu-project.org/)库中找到您需要的内容。

对于电话号码格式，您也许可以使用Google 的[libphonenumber](http://code.google.com/p/libphonenumber/)。然而，对于某些国家/地区，格式和分类规则不完整或非常过时。它可能值得一看，但可能不是您想要的。AFAIK，但是没有更好的解决方案可用。

对于地址格式，您可以使用 Google 的[Geocoding API](https://developers.google.com/maps/documentation/geocoding/)。它不是可下载的图书馆，而是在线服务。您可以输入一个自由格式的地址，服务将在该`formatted_address`字段中返回一个格式正确的地址。

# c - C：从模式匹配中提取字符串和字符串终止的替代方法？

> ID：15416229
> 
> 赞同：2
> 
> 时间：2013-03-14T17:32:08.710
> 
> 标签：c, regex, string, pattern-matching, posix

我的问题有两个：

我正在使用 POSIX 正则表达式，并且为模式匹配设置了一个非常好的系统，并且正在工作，但是处理 C 对字符串操作的低级/难以使用的支持非常困难，尤其是在 sub 部门-字符串方法。我知道下面的例子不是一个小插曲，所以请多多包涵，但我觉得本节展示了我如何设置 POSIX 正则表达式以及我是如何使用它的。我的主要问题是，如何从 POSIX 中为每个模式匹配提取字符串并将其放入一个字符串/字符数组中，我可以安全地使用正常的 C 字符串函数，例如在此处找到的函数： [http ://faculty.edcc.edu/ paul.bladek/c_string_functions.htm](http://faculty.edcc.edu/paul.bladek/c_string_functions.htm)? 似乎我可以从模式匹配内部结构中获取字符串，但是每次我对模式匹配执行我认为正常的子字符串操作时，C 都会死掉。

下面的例子显示了以前工作过的代码，但是直到我决定将变量“result”从数组更改为 (char *) （你可以看到旧的方式被注释掉了）并尝试使用 C 的内存分配方法来做这个权利。您可以在输出中看到它有多远，变量“结果”出来是正确的，但是当我使用 strstr(...) 时，程序在 IF 比较时崩溃，原因我无法确定。

我的最后一个问题，NULL 终止 (char *) 的最佳方法是什么？显然，我在下面这样做的方式可能是一个问题。

代码：（注意，“storage”是一个大尺寸的字符数组，包含正在执行模式匹配的文本）

```
regex_t r;  // stores regex
regmatch_t m[50];  // stores parts of file-string that matched the regex
const char * p = storage; // pointer to string that will be read in by regexec(...)
char matches[tracker][BUFFSIZE]; // 2D array containing a collection of strings
int ind = 0;  // indexing variable "matches" array
printf("### Collecting Pattern Matches ###\n");
int regExErr1 = regcomp(&r, "<[^<>]+=[[:space:]]*\"[^\"]+\"", REG_EXTENDED|REG_NEWLINE);
if( regExErr1 ){ 
    fprintf(stderr, "Fail to compile regex!\n"); 
    exit(1); 
}
while(1){
    regExErr1 = regexec(&r, p, 10, m, 0);
    if( regExErr1 != 0 ){ 
        fprintf(stderr, "Done finding URL pattern matches...\n"); 
        break; 
    }   
    int i = 0;
    while(1){
        if(m[i].rm_so == -1){
            break;
        }
        printf("entering loop at index %i\n", i);
        int start = m[i].rm_so;
        int finish = m[i].rm_eo;
        //char result[(finish - start)];
        char * result = (char *) malloc(strcspn(strstr(p + start, "<"), ">"));
        //strcpy(result, strstr(("%.*s\n", (finish - start), p + start), "<"));
        strcpy(result,("%.*s\n", strcspn((p+ start), ">"), strstr(p + start, "<")));
        result[strcspn(result, ">")+1] = 0;
        printf("LOOKING AT:  %s\n", result);
        if(strstr(result, "href") != NULL || strstr(result, "HREF") != NULL || strstr(result, "src") != NULL){
            printf("## CONSIDERING:  %s\n", result);
            if(strstr(result, "http:") == NULL && strstr(result, "mailto") == NULL){
                printf("Pattern is a relative URL.\n");
                strcpy(result, strstr(result, "\"") + 1);
                result[strcspn(result, "\"")] = 0;
                strcpy(result, relativePathCondense(result, "."));
                strcpy(matches[ind], base);
                strcat(matches[ind], result);
                matches[ind][(strlen(base) + strlen(result))] = 0; // NULL terminate the string match in the collection
                printf("Stored %i ==  %s\n", ind, matches[ind]);
                ...
                ind++; // update the counter to the 2D record array "matches"
            }else if(strstr(result, "http:") != NULL || strstr(result, "mailto:") != NULL){
                printf("Pattern is an absolute URL.\n");
                strcpy(result, strstr(result, "\"") + 1);
                result[strcspn(result, "\"")] = 0;
                printf("Trimmed expression is %s\n", result);
                strcpy(matches[ind], result);
                matches[ind][strlen(result)] = 0; // NULL terminate the string match in the collection
                printf("Stored %i ==  %s\n", ind, matches[ind]);
                ...
                ind++;                  
            }
        }
        i++;
    }
    p += m[0].rm_eo; // this will move the pointer p to the end of last matched pattern and on to the start of a new one
} 
```

输出：

```
### Collecting URL's from stored HTML source document! ###
entering loop at index 0
LOOKING AT:  <BODY BGCOLOR = "#FFFFF0">
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:54:34.957

```
 strcpy(result,("%.*s\n", strcspn((p+ start), ">"), strstr(p + start, "<"))); 
```

这并不像你想的那样......表达式`("%.*s\n", ...`只是使用逗号运算符`expr, expr`，它计算两个表达式，但具有右手 expr 的值。我想你打算在`sprintf`这里使用。

（另外，如果不仔细计算，您可能会`malloc`少一个字节。通常的习惯用法是`strlen(s) + 1`，但我必须更深入地考虑您的`strspn`）

# ruby-on-rails - Ruby on Rails 项目结构

> ID：15416231
> 
> 赞同：-2
> 
> 时间：2013-03-14T17:32:11.223
> 
> 标签：ruby-on-rails, web-applications, structure

我正在学习 Ruby on Rails 几个星期，遵循一些教程和小文章。您能否推荐一些文章或视频教程，对项目结构进行良好的高级概述，其中还包括事物如何相互连接（模型、视图、控制器、资产等）以形成 Web 应用程序？我想我深入细节而不了解基础知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:49:18.203

30.000 英尺的概述是 Rails 很像 Magic :)

您应该知道很多约定，但它们都是不言自明且简单的。

首先：您不需要在 Rails 应用程序中连接任何东西——Rails 通过约定为您做到这一点。

所以首先是文件夹结构。

您的应用程序位于`/app`目录中，配置位于`/config`. 内部的数据库文件和迁移`/db`等..`/public`是所有不受 Rails 管理的东西的地方（`robots.txt`静态内容等）。

在里面`/app`你通常会有：

```
app
 - assets
 - controllers
 - models
 - views 
```

**资产**是应用程序的 JavaScript、CSS 和图像文件所在的位置。

**控制器**是放置控制器的地方。这里的约定如下：

`ApplicationController`派生自`ActionController::Base`所有应用程序控制器的基类，并且旨在作为基类。当控制器的名称与其类名匹配时，控制器会立即加载。所以`ApplicationController`预计会在里面声明`application_controller.rb`。另一个样本将是一个`PostsController`进入`posts_controller.rb`文件的样本。

这里的约定也是管理许多事物（帖子、客户、链接......）的控制器是复数的，而像个人资料、帐户这样的单数资源是单数的——但这并不是真正的硬性规则。

**模型**是 ActiveRecord 模型所在的地方，它们被定义为简单的类，扩展`ActiveRecord::Base`并与它们的类名进入相同的文件：`Post`进入`post.rb`，`User`进入`user.rb`。

**Views**有点特殊，因为它包含基于每个控制器的子文件夹。因此，如果您有 a`PostsController`和 a ，`CommentsController`那么您将在`/views`:`posts`和`comments`.

在这些视图文件夹中，您将放置与控制器内的操作（​​方法）相对应的文件。所以通常你会有一个`index.html.erb`文件，当`index`控制器上的方法被调用时，它会被渲染。

正如您所看到的，这就是魔法发生的地方，您只需要以正确的方式命名，Rails 就会自行解决问题。您必须明确执行某些操作才能使其工作的唯一特殊情况是路由。

**路由**进入`/config/routes.rb`，该文件用于告诉 Rails 应用程序哪些 url 映射到控制器中的哪些操作。但我建议您在 Rails 指南或其他人在此问题中发布的众多教程中查找。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:42:54.453

三件事：

*   从[指南开始](http://guides.rubyonrails.org/getting_started.html)
*   进入[Michael Hartl 的教程](http://ruby.railstutorial.org/)
*   享受一些[Railscasts](http://www.railscasts.com)

顺序很重要！

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:36:42.853

如果您是 Rails 新手，那么您应该遵循这个基本教程。 [http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:38:38.603

试试这个资源，我发现它很有用。

[http://www.codethinked.com/rails-3-baby-steps-series](http://www.codethinked.com/rails-3-baby-steps-series)

# java - 共享 Eclipse 配置首选项

> ID：15416232
> 
> 赞同：0
> 
> 时间：2013-03-14T17:32:12.203
> 
> 标签：java, eclipse, preferences

我是 Java 新手，我使用 Eclipse 编写代码，开始时我做了很多调整以使 Eclipse 更适合我，比如更改字体和字体大小、切换行号幻影以及所有这些事情。

我想知道是否有办法让我共享这些首选项，例如在文件或目录中，所以当我需要使用另一台计算机时，我可以启用我的首选项，而不必再次进行所有手动调整。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:33:03.997

遗憾的是，eclipse 将其首选项存储在工作区中，因此当切换到另一个时，所有设置都会丢失。

您可以首先使用 File -> Export -> Preferences file 从原始工作区导出首选项。然后在切换之后，可以使用 File -> Import -> Preferences 将它们导入回来。

如果是另一台计算机，唯一的解决方案是将首选项文件保存到共享文件夹或使用某些服务（例如 Dropbox）使文件处于自动同步状态。

# jqplot - jqplot：将xaxis刻度文本拆分为单词

> ID：15416235
> 
> 赞同：0
> 
> 时间：2013-03-14T17:32:15.950
> 
> 标签：jqplot

我在图表的轴上使用的标签包含多个单词的文本。像这样：

![在此处输入图像描述](../Images/67866cbc53473c68eeec2fb4cb8f0f10.png)

它看起来很糟糕。我尝试（如图所示）用 brs 或 \n 替换机智空格，以便在多行中呈现文本。结果不是我期望得到的。

**如何将刻度文本拆分为单词并将每个单词绘制在一行上？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:29:38.917

正在工作将`<br/>`尝试将您的文本分成两行。[在此处](http://jsfiddle.net/AnthonyLeGovic/XLGFq/13/)查看一个工作示例。

为了让它工作，别忘了加载一些 jqplot 插件：CanvasAxisTickRenderer、CategoryAxisRenderer。然后，您需要申请 `tickRenderer: $.jqplot.CanvasAxisTickRenderer`您的系列。您还需要应用`renderer: $.jqplot.CategoryAxisRenderer`到您的 yaxis 上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-23T14:05:09.093

对我来说，<br/> 没有用，**\n**用了。

我的配置：

```
jQuery.jqplot(element, configuration.series, {
        stackSeries: true,
        animate: false,
        captureRightClick: false,
        seriesColors: ['green', 'blue', 'yellow', 'orange', 'red'],
        seriesDefaults: {
            renderer: jQuery.jqplot.BarRenderer,
            rendererOptions: {
                shadowOffset: 0,
                barDirection: 'horizontal',
                highlightMouseDown: false,
                barWidth: 20,
            },
            pointLabels: {
                show: false
            }
        },
        axesDefaults: {
            min: 0,
            minorTicks: 0,
            tickOptions: {
                formatString: '%d'
            }
        },
        highlighter: {
            show: false
        },
        axes: {
            yaxis: {
                renderer: jQuery.jqplot.CategoryAxisRenderer,
                ticks: configuration.labels
            },
            xaxis: {
                ticks: configuration.ticks,
                label:'Hours',
                labelOptions:{
                    fontFamily:'Helvetica',
                    fontSize: '10pt'
                },
            }
        }
    }); 
```

# database - 将套接字连接保存在数据库中而不是数组中

> ID：15416237
> 
> 赞同：0
> 
> 时间：2013-03-14T17:32:17.867
> 
> 标签：database, arrays, node.js, websocket, webrtc

我在我的应用程序中使用 webrtc.io 库，但我遇到了负载平衡问题，因为所有套接字连接都保存在全局数组中

```
//Array to store connections
rtc.sockets = [];
manager.on('connection', function(socket) {
...    

rtc.sockets.push(socket);
...
}); 
```

链接到 Lib：[https ://github.com/webRTC/webRTC.io/blob/master/lib/webrtc.io.js](https://github.com/webRTC/webRTC.io/blob/master/lib/webrtc.io.js)

我想多次启动我的 webrtc.io 服务器应用程序，因此不能像这样存储 Socketobjects。我想我需要一个数据库后端，但这甚至可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T20:05:59.383

我认为您不想将套接字连接存储在数据库中以进行负载平衡。相反，您希望以某种方式将客户端重定向到不同的服务器，并让它们直接与这些服务器建立套接字连接。

# javascript - 追加“ 文本 “ 至 ” " 使用 jQuery foreach 和追加

> ID：15416239
> 
> 赞同：2
> 
> 时间：2013-03-14T17:32:22.193
> 
> 标签：javascript, jquery, html-lists

我正在尝试使用调用 Web 服务的结果动态创建链接列表。我的 HTML 中有该`<ul>`元素。

```
<ul id="myList"></ul> 
```

我正在尝试使用 jQuery foreach 和 append 来创建列表项。

给定以下数据：

```
var options = {
    {href: "#", text:"text"},
    {href: "#", text:"text"},
    {href: "#", text:"text"},
    {href: "#", text:"text"}
}; 
```

我想我可以使用以下脚本创建列表：

```
$each(options, function(index) {
    $("#myList").append($("<li>", {}).append($("<a>", { href: options[index].href })).text(options[index].text));
}); 
```

虽然它有点工作，但文本最终在锚元素之外。我想要结束的是：

```
<ul id="myList">
  <li><a href="#">Text</a></li>
  <li><a href="#">Text</a></li>
  <li><a href="#">Text</a></li>
  <li><a href="#">Text</a></li>
</ul> 
```

谁能告诉我哪里出错了？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:36:21.370

你很接近，但你的语法有点错误。

```
var options = [
    {href: "#", text:"text"},
    {href: "#", text:"text"},
    {href: "#", text:"text"},
    {href: "#", text:"text"}
];

$.each(options, function(index) {
    $("#myList").append($("<li>", {}).append($("<a>", { href: options[index].href }).text(options[index].text)));
}); 
```

您需要一组包含您的对象的选项。您还遇到了语法错误`$.each`。示例：http: [//jsfiddle.net/5ZDZX/1/](http://jsfiddle.net/5ZDZX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:35:10.003

尝试这个

```
$.each(options, function(index) {
    $("#myList").append($("<li>").append($("<a>", { href: options[index].href , text : options[index].text})));
}); 
```

[http://jsfiddle.net/uMUzf/](http://jsfiddle.net/uMUzf/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:36:07.387

我认为您可能`append`错误地嵌套了 s 。尝试：

```
$.each(options, function(index) {
    $("#myList").append(
        $("<li>", {}).append(
            $("<a>", { href: options[index].href }).text(
                options[index].text
            )
        )
    );
}); 
```

你有它的方式，你是添加`text`到`<li>`而不是`<a>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:36:52.850

那是因为你设置的`.text`不是`li` **标签**`a`。

此外，您的`option`对象设置不正确，使用`{ }`而不是`[ ]`

**演示：http: [//jsfiddle.net/4WTG3/](http://jsfiddle.net/4WTG3/)**

尝试这个：

```
var options = [
    {href: "#", text:"text"},
    {href: "#", text:"text"},
    {href: "#", text:"text"},
    {href: "#", text:"text"}
];

$.each(options, function(index) {
    $("#myList")
    .append($("<li>", {})
        .append($("<a>", { href: options[index].href }).text(options[index].text)
    ));
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T17:41:08.327

您需要对象数组，并且您的 append 语句似乎有点过于复杂：

[http://jsfiddle.net/x23ja/](http://jsfiddle.net/x23ja/)

您还需要使用`$.each`而不是`$each`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-11T13:37:53.573

我成功地使用了这个

```
$.each(result, function (i, file) {
                $("#filelist").append('<li><a target="_blank" href="' + downloadUrl + '/' + file.StaticFileId + '">' + file.ShortDesc + '</a></li>');
}); 
```

# bash - Bash 扩展哈希表（字典）

> ID：15416248
> 
> 赞同：2
> 
> 时间：2013-03-14T17:32:46.757
> 
> 标签：bash, hash, dictionary

我尝试用文件中的数据填充我的哈希表。使用此代码

```
 templates="./templates"
      declare -A ARRAY
      ARRAY+=([a]='b')
      ARRAY+=([d]='f')
      cat $templates | while read line 
      do
      a=`(echo $line | cut -d ':' -f 1)`
      b=`(echo $line | cut -d ' ' -f 2)`
      ARRAY+=([a]=b)
      done

      for x in ${!ARRAY[@]}
      do
      echo "$x - ${ARRAY["$x"]}"
      done 
```

它只给我

```
 a - b
  d - f 
```

模板文件是：

```
nazwisko: towar
Kowalski: ksiazki
Nowak: programy 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:53:46.677

您的代码存在一个问题，并且可能会发生很多简化。

一、问题：

这一行：

```
ARRAY+=([a]=b) 
```

应该：

```
ARRAY+=(["$a"]="$b") 
```

为了简化：

```
declare -A arr=([a]=b [d]=f)
while IFS=': ' read -r a b; do
    arr+=(["$a"]="$b")
done < "$templates"

for i in "${!arr[@]}"; do
    printf '%s - %s\n' "$i" "${arr[$i]}"
done 
```

# c# - Auto- vs ManualResetEvent，差异

> ID：15416249
> 
> 赞同：-3
> 
> 时间：2013-03-14T17:32:54.737
> 
> 标签：c#, .net, multithreading

我阅读了有关事件，它允许我等待其他线程：`AutoResetEvent`和`ManualResetEvent`.

这两个类有什么区别？哪个类更适合高并发程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:35:11.487

不同之处在于事件发出信号（设置）时会发生什么。

*   手动重置事件将保持信号状态，直到您再次明确重置它
*   一旦等待它的第一个线程被唤醒，自动重置事件将自动重置（未发出信号）

一般来说，我发现使用手动重置事件更容易，因为在大多数情况下，在任何给定时间确定事件的状态会更直接一些。

也就是说，在某些情况下，自动重置事件的行为有助于更好地实现同步，因为您可以保证**只有一个**等待线程会收到信号。因此，如果您有一个生产者/多个消费者场景，其中任何但只有一个消费者应该收到信号，您应该考虑自动重置事件。

# iphone - 无法找到带有异常断点和设置 NSZombies 类的 exc_bad_access 行

> ID：15416250
> 
> 赞同：0
> 
> 时间：2013-03-14T17:32:56.303
> 
> 标签：iphone, ios, objective-c, uiimageview

该代码应该从选择器视图中选择图像的数据块并将其上传到网站，但每次我尝试上传特定块时，它都会给我一个 EXC_BAD_ACCESS。以下是拆分图像数据的代码大块

```
PrimaryImageController.h

@interface PrimaryImageViewController
{
    __weak IBOutlet UIImageView *imgView;
}
@property (nonatomic,strong)    NSMutableArray *chunkArray;

PrimaryImageController.m
@synthesize imgView,chunkArray;

- (void)viewDidLoad
{
chunkArray=[[NSMutableArray alloc]init];
}

-(void)updateImage
{
UIImage *img = imgView.image;    
NSData *dataObj=UIImageJPEGRepresentation(img, 1.0);
NSUInteger length = [dataObj length];    
NSUInteger chunkSize = 3072*10;
NSUInteger offset = 0;
int numberOfChunks=0;
do
{
    NSUInteger thisChunkSize = length - offset > chunkSize ? chunkSize : length - offset;
    NSData* chunk = [NSData dataWithBytesNoCopy:(char *)[dataObj bytes] + offset
                                         length:thisChunkSize
                                   freeWhenDone:NO];
    offset += thisChunkSize;        
    [chunkArray insertObject:chunk atIndex:numberOfChunks];        
    numberOfChunks++;        
}    
while (offset < length);
for (int i=0; i<[chunkArray count]; i++)
{
    [uploadPrimary uploadImage:[chunkArray objectAtIndex:i] uuid:uniqueIdString numberOfChunks:[chunkArray count] currentChunk:i];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:51:58.057

`exc_bad_access`表示严重崩溃，不多也不少。虽然过度释放对象通常会导致这种情况，但可能发生这种崩溃还有许多其他原因。同样，硬崩溃在`NSException`某种意义上也不例外。设置异常断点无济于事。

如果你有一个崩溃，你应该有一个回溯。发布崩溃的回溯。

如果您启用了 ARC，这看起来像是一个内部指针问题。您正在创建一堆对 中包含的数据的引用`dataObj`，但不再引用`dataObj`。

尝试`[dataObj self];`在该`for()`循环之后添加。

但是，由于您将块存储在作为实例变量的数组中，因此`dataObj`应将其寿命与该数组的寿命相耦合。即要么将数组移动到`updateImage`方法中，要么将 iVar 声明为强引用`dataObj`。

# java - Java3D - 未找到某些类，但类路径设置正确

> ID：15416254
> 
> 赞同：1
> 
> 时间：2013-03-14T17:32:59.800
> 
> 标签：java, runtime, noclassdeffounderror, java-3d, canvas3d

我有一个使用成功编译的 Java3D 的类，尽管当我尝试运行它时它说：**线程“main”中的异常 java.lang.NoClassDefFoundError: javax/media/j3d/Canvas3D**，

使用以下堆栈跟踪：

```
 at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at sun.launcher.LauncherHelper.getMainMethod(Unknown Source)
        at sun.launcher.LauncherHelper.checkAndLoadMain(Unknown Source)
Caused by: java.lang.ClassNotFoundException: javax.media.j3d.Canvas3D
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source) 
```

我已经尝试过的东西：

1.  在将 Java3D jar 复制到 /jre/lib/ext/ 之前，我什至无法编译它。

2.  我有最新的 Java、Java3D，我正在使用 Notepad++，我尝试重新安装 Java3D。

3.  我已经正确设置了类路径/路径。

4.  代码中没有错误。

5.  我可以运行我创建的普通 Java 应用程序。

6.  我尝试在运行应用程序时使用类路径（java -classpath blahblah ApplicationName）。

7.  我检查了罐子内部，并且类（包括 Canvas3D）肯定在里面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:03:33.023

不是你说的每件事都是真的。

如果类在 jar 中，并且如果您正确设置了类路径，那么您将不会收到此消息。

我怀疑您的构建路径与类路径（主要与运行时相关联，其中构建路径与编译时间相关联）混淆了。在不了解运行时环境的更多细节的情况下，很难更具体。

它总是让我感到困惑，一个他们无法解决问题的人如何如此肯定地断言所有这些事情都“正确”设置：你怎么知道？这个问题难道不是一些相反的证据，至少足以引起一个小小的疑问吗？

# asp.net-mvc - 如果对象具有某个属性值，则 MVC 显示一个下拉框

> ID：15416257
> 
> 赞同：0
> 
> 时间：2013-03-14T17:33:08.673
> 
> 标签：asp.net-mvc, list, html-helper, dropdownbox

我有一个名为 FitToPlay 的属性，它包含未受伤的玩家列表。我想要做的是为团队中的每个位置制作一个下拉框，并且只在下拉框中填充适合播放列表中的球员，这些球员有问题的位置作为他们的主要或次要位置。

我想知道的是如何使用 html 下拉框助手显示特定对象。

提前谢谢了。

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:01:18.207

我想你会想要遍历每个位置，并且在循环内遍历所有当前 FitToPlay 玩家，如果他的第一个或第二个位置是当前循环通过的位置，那么将他插入其中.. 最后如果有人插入创建一个下拉列表

所以像..

```
//Loop through all the positions
foreach (var position in Model.positions)
{
   //Create a list for each position 
   List<SelectListItem> playersInPosition = new List<SelectListItem>();
   //Only loop through players with the current position as either primary or secondary
   foreach(var player in Model.FitToPlay.Where(pl => pl.primary == position || pl.secondary == position))
   {
     //Put this player into the list
     playersInPosition.add(new SelectListItem { Text = player.name, Value = player.id});
   }
   //If at least one fits the criteria make a drop down list from it
   if(playersInPosition != null && playersInPosition.Count > 0)
   {
       @Html.DropDownList(position.name, playersInPosition);
   }
} 
```

# asp.net-mvc-4 - 带有 SPA 架构的 ValidateAntiForgeryToken

> ID：15416264
> 
> 赞同：11
> 
> 时间：2013-03-14T17:33:28.673
> 
> 标签：asp.net-mvc-4, knockout.js, single-page-application, durandal, hottowel

我正在尝试为 Hot Towel SPA 申请设置注册和登录。我基于[asp.net 单页应用程序模板](http://www.asp.net/single-page-application)创建了 SimpleMembershipFilters 和 ValidateHttpAntiForgeryTokenAttribute 。

你如何得到

```
 @Html.AntiForgeryToken() 
```

在 Durandal SPA 模式下工作的代码。

目前我有一个**register.html**

```
<section>
    <h2 data-bind="text: title"></h2>

    <label>Firstname:</label><input data-bind="value: firstName" type="text"  />
    <label>Lastname:</label><input data-bind="value: lastName" type="text"  />
    <label>Email:</label><input data-bind="value: emailAddress" type="text"  />
    <label>Company:</label><input data-bind="value: company" type="text"  />
    <br />
    <label>Password:</label><input data-bind="value: password1" type="password" />
    <label>Re-Enter Password:</label><input data-bind="value: password2" type="password" />
    <input type="button" value="Register" data-bind="click: registerUser" class="btn" />
</section> 
```

**注册.js**：

```
define(['services/logger'], function (logger) {
    var vm = {
        activate: activate,
        title: 'Register',
        firstName: ko.observable(),
        lastName: ko.observable(),
        emailAddress: ko.observable(),
        company: ko.observable(),
        password1: ko.observable(),
        password2: ko.observable(),
        registerUser: function () {
            var d = {
                'FirstName': vm.firstName,
                'LastName': vm.lastName,
                'EmailAddress': vm.emailAddress,
                'Company': vm.company,
                'Password': vm.password1,
                'ConfirmPassword': vm.password2
            };
            $.ajax({
                url: 'Account/JsonRegister',
                type: "POST",
                data: d ,
                success: function (result) {
                },
                error: function (result) {
                }
            });
        },
    };

    return vm;

    //#region Internal Methods
    function activate() {
        logger.log('Login Screen Activated', null, 'login', true);
        return true;
    }
    //#endregion
}); 
```

在 $ajax 调用中如何传递 AntiForgeryToken？另外我如何创建令牌？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-19T23:13:38.967

我会阅读[这篇](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks)关于如何使用 javascript 使用防伪令牌的文章。这篇文章是为 WebApi 编写的，但如果你愿意，它可以很容易地应用于 MVC 控制器。

简短的回答是这样的：在您的 cshtml 视图中：

```
<script>
    @functions{
        public string TokenHeaderValue()
        {
            string cookieToken, formToken;
            AntiForgery.GetTokens(null, out cookieToken, out formToken);
            return cookieToken + ":" + formToken;                
        }
    }

    $.ajax("api/values", {
        type: "post",
        contentType: "application/json",
        data: {  }, // JSON data goes here
        dataType: "json",
        headers: {
            'RequestVerificationToken': '@TokenHeaderValue()'
        }
    });
</script> 
```

然后在您的 asp.net 控制器中，您需要像这样验证令牌：

```
void ValidateRequestHeader(HttpRequestMessage request)
{
    string cookieToken = "";
    string formToken = "";

    IEnumerable<string> tokenHeaders;
    if (request.Headers.TryGetValues("RequestVerificationToken", out tokenHeaders))
    {
        string[] tokens = tokenHeaders.First().Split(':');
        if (tokens.Length == 2)
        {
            cookieToken = tokens[0].Trim();
            formToken = tokens[1].Trim();
        }
    }
    AntiForgery.Validate(cookieToken, formToken);
} 
```

您想在标头中传递它的原因是，如果您在请求的查询字符串或正文中的 ajax 调用中将其作为参数数据参数传递。然后，您将更难获得适用于所有不同场景的防伪令牌。因为您必须反序列化正文然后找到令牌。在标题中，它非常一致且易于检索。

* * *

****为光线编辑**

这是一个动作过滤器示例，您可以使用它来为 Web api 方法赋予属性，以验证是否提供了防伪令牌。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Helpers;
using System.Web.Http.Filters;
using System.Net.Http;
using System.Net;
using System.Threading.Tasks;
using System.Web.Http.Controllers;
using System.Threading;

namespace PAWS.Web.Classes.Filters
{
    public class ValidateJsonAntiForgeryTokenAttribute : FilterAttribute, IAuthorizationFilter
    {
        public Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
        {
            if (actionContext == null)
            {
                throw new ArgumentNullException("HttpActionContext");
            }

            if (actionContext.Request.Method != HttpMethod.Get)
            {
                return ValidateAntiForgeryToken(actionContext, cancellationToken, continuation);
            }

            return continuation();
        }

        private Task<HttpResponseMessage> FromResult(HttpResponseMessage result)
        {
            var source = new TaskCompletionSource<HttpResponseMessage>();
            source.SetResult(result);
            return source.Task;
        }

        private Task<HttpResponseMessage> ValidateAntiForgeryToken(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
        {
            try
            {
                string cookieToken = "";
                string formToken = "";
                IEnumerable<string> tokenHeaders;
                if (actionContext.Request.Headers.TryGetValues("RequestVerificationToken", out tokenHeaders))
                {
                    string[] tokens = tokenHeaders.First().Split(':');
                    if (tokens.Length == 2)
                    {
                        cookieToken = tokens[0].Trim();
                        formToken = tokens[1].Trim();
                    }
                }
                AntiForgery.Validate(cookieToken, formToken);
            }
            catch (System.Web.Mvc.HttpAntiForgeryException ex)
            {
                actionContext.Response = new HttpResponseMessage
                {
                    StatusCode = HttpStatusCode.Forbidden,
                    RequestMessage = actionContext.ControllerContext.Request
                };
                return FromResult(actionContext.Response);
            }
            return continuation();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T17:42:29.510

在 JS var 中获取令牌的值

```
var antiForgeryToken = $('input[name="__RequestVerificationToken"]').val(); 
```

**然后只需在.ajax**调用的**[beforeSend](http://api.jquery.com/jQuery.ajax/)**函数中添加您的 ajax POST 标头

 **```
beforeSend: function (xhr, settings) {
            if (settings.data != "") {
                settings.data += '&';
            }
            settings.data += '__RequestVerificationToken=' +  encodeURIComponent(antiForgeryToken);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-27T12:26:47.927

我对此有点挣扎，因为对于基于热毛巾模板的 Durandal SPA 应用程序，现有答案似乎都不能正常工作。

我必须结合使用 Evan Larson 和 curtisk 的答案来获得一些我认为应该的方式。

在我的 index.cshtml 页面（Durandal 支持 cshtml 和 html）我在`</body>`标签上方添加了以下内容

```
@AntiForgery.GetHtml(); 
```

我按照 Evan Larson 的建议添加了一个自定义过滤器类，但是我必须对其进行修改以支持单独查找 cookie 值并使用 __RequestVerificationToken 作为名称而不是 RequestVerificationToken，因为这是 AntiForgery.GetHtml(); 提供的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Helpers;
using System.Web.Http.Filters;
using System.Net.Http;
using System.Net;
using System.Threading.Tasks;
using System.Web.Http.Controllers;
using System.Threading;
using System.Net.Http.Headers;

namespace mySPA.Filters
{
    public class ValidateJsonAntiForgeryTokenAttribute : FilterAttribute, IAuthorizationFilter
    {
        public Task<HttpResponseMessage> ExecuteAuthorizationFilterAsync(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
        {
            if (actionContext == null)
            {
                throw new ArgumentNullException("HttpActionContext");
            }

            if (actionContext.Request.Method != HttpMethod.Get)
            {
                return ValidateAntiForgeryToken(actionContext, cancellationToken, continuation);
            }

            return continuation();
        }

        private Task<HttpResponseMessage> FromResult(HttpResponseMessage result)
        {
            var source = new TaskCompletionSource<HttpResponseMessage>();
            source.SetResult(result);
            return source.Task;
        }

        private Task<HttpResponseMessage> ValidateAntiForgeryToken(HttpActionContext actionContext, CancellationToken cancellationToken, Func<Task<HttpResponseMessage>> continuation)
        {
            try
            {
                string cookieToken = "";
                string formToken = "";
                IEnumerable<string> tokenHeaders;
                if (actionContext.Request.Headers.TryGetValues("__RequestVerificationToken", out tokenHeaders))
                {
                    formToken = tokenHeaders.First();
                }
                IEnumerable<CookieHeaderValue> cookies = actionContext.Request.Headers.GetCookies("__RequestVerificationToken");
                CookieHeaderValue tokenCookie = cookies.First();
                if (tokenCookie != null)
                {
                    cookieToken = tokenCookie.Cookies.First().Value;
                }
                AntiForgery.Validate(cookieToken, formToken);
            }
            catch (System.Web.Mvc.HttpAntiForgeryException ex)
            {
                actionContext.Response = new HttpResponseMessage
                {
                    StatusCode = HttpStatusCode.Forbidden,
                    RequestMessage = actionContext.ControllerContext.Request
                };
                return FromResult(actionContext.Response);
            }
            return continuation();
        }
    }
} 
```

随后在我的 App_Start/FilterConfig.cs 我添加了以下内容

```
public static void RegisterHttpFilters(HttpFilterCollection filters)
{
    filters.Add(new ValidateJsonAntiForgeryTokenAttribute());
} 
```

在我的 Global.asax 下的 Application_Start 中，我添加了

```
FilterConfig.RegisterHttpFilters(GlobalConfiguration.Configuration.Filters); 
```

最后，对于我的 ajax 调用，我添加了 curtisk 输入查找的派生，以向我的 ajax 请求添加标头，在这种情况下为登录请求。

```
var formForgeryToken = $('input[name="__RequestVerificationToken"]').val();

return Q.when($.ajax({
    url: '/breeze/account/login',
    type: 'POST',
    contentType: 'application/json',
    dataType: 'json',
    data: JSON.stringify(data),
    headers: {
        "__RequestVerificationToken": formForgeryToken
    }
})).fail(handleError); 
```

这导致我的所有发布请求都需要一个验证令牌，该验证令牌基于 AntiForgery.GetHtml() 创建的 cookie 和隐藏表单验证令牌；

据我了解，这将防止跨站点脚本攻击的可能性，因为攻击站点需要能够同时提供 cookie 和隐藏表单值才能验证自己，而这将更加难以获取。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-27T22:20:54.100

**如果使用 MVC 5，请阅读此解决方案！**

我尝试了上述解决方案，但它们对我不起作用，从未达到动作过滤器，我不知道为什么。上面没有提到 MVC 版本，但我假设它是版本 4。我在我的项目中使用版本 5，并最终得到以下操作过滤器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Mvc.Filters;

namespace SydHeller.Filters
{
    public class ValidateJSONAntiForgeryHeader : FilterAttribute, IAuthorizationFilter
    {
        public void OnAuthorization(AuthorizationContext filterContext)
        {
            string clientToken = filterContext.RequestContext.HttpContext.Request.Headers.Get(KEY_NAME);
            if (clientToken == null)
            {
                throw new HttpAntiForgeryException(string.Format("Header does not contain {0}", KEY_NAME));
            }

            string serverToken = filterContext.HttpContext.Request.Cookies.Get(KEY_NAME).Value;
            if (serverToken == null)
            {
                throw new HttpAntiForgeryException(string.Format("Cookies does not contain {0}", KEY_NAME));
            }

            System.Web.Helpers.AntiForgery.Validate(serverToken, clientToken);
        }

        private const string KEY_NAME = "__RequestVerificationToken";
    }
} 
```

-- 记下`using System.Web.Mvc`and `using System.Web.Mvc.Filters`，而不是`http`库（我认为这是 MVC v5 改变的事情之一。 --

然后只需将过滤器`[ValidateJSONAntiForgeryHeader]`应用于您的操作（或控制器），它应该会被正确调用。

在我上面的布局页面中，`</body>`我有`@AntiForgery.GetHtml();`

最后，在我的 Razor 页面中，我执行 ajax 调用如下：

```
var formForgeryToken = $('input[name="__RequestVerificationToken"]').val();

$.ajax({
  type: "POST",
  url: serviceURL,
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  data: requestData,
  headers: {
     "__RequestVerificationToken": formForgeryToken
  },
     success: crimeDataSuccessFunc,
     error: crimeDataErrorFunc
}); 
```**

# c++ - C++ 语法：常量引用参数

> ID：15416269
> 
> 赞同：2
> 
> 时间：2013-03-14T17:33:49.897
> 
> 标签：c++, parameters

请在下面的代码中解释**const void *a, const void *b**。这些常量引用参数是不是意味着这个函数的内部代码不能改变它的值？为什么要将这些参数作为参考？认为引用参数旨在通过值传递并允许在函数定义内更改值。为什么使用 void 作为参数参数？

```
int peak_compare(const void *a, const void *b)  //Function peak_compare
{
  Peaks *aa = (Peaks *)a;
  Peaks *bb = (Peaks *)b;

  if(aa->wt1 > bb->wt1) return -1;
  if(aa->wt1 == bb->wt1) return 0;
  return 1;
} 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:39:39.620

`const typename * p`是**Pointer to Constant**的语法。这意味着，您不能更改函数中的值。

`typename * const p`是**常量指针**的语法。这意味着您不能在函数中更改指针本身。

在上面的示例中，`typename`可以是任何东西，从标准类型到用户定义类型，再到`void`. 如果它是 a `void`，则意图是该函数可能会获得指向不同类型的指针。您应该正确地将 void 指针转换为正确的类型，以便访问其成员，就像您的情况一样，以下几行正在执行：

```
Peaks *aa = (Peaks *)a;
Peaks *bb = (Peaks *)b; 
```

**但是这个演员表失去了常数。**正确的语法应该是：

```
const Peaks *aa = (const Peaks *)a;
const Peaks *bb = (const Peaks *)b; 
```

不要失去价值常数。

* * *

**编辑**：正如其中一条评论所指出的，并且由于该问题仅带有 标记`C++`，因此最好以 C++ 样式进行转换，如下所示：

```
const Peaks* aa = static_cast<const Peaks*>(a);
const Peaks* bb = static_cast<const Peaks*>(b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:38:10.887

`const void *a`表示 a 是指向常量的 void 指针，因此内容不能更改。
有关说明，请参阅此链接： [http ://en.wikipedia.org/wiki/Const-correctness](http://en.wikipedia.org/wiki/Const-correctness)

但是，当您松开演员表的`const`内容时，会有一个危险的演员表。

```
Peaks *aa = (Peaks *)a; 
```

应改为

```
const Peaks *aa = (const Peaks *)a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:39:25.217

比较两个 void 指针，返回一个大于、等于或小于 0 的整数，根据 a 的键是否大于、等于或小于通过 peak_compare() 比较确定的 b 的键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:53:41.613

无论是否使用类型的参数，都没有*类型安全*。您应该尽可能避免使用 C 风格的强制转换。`void*``const`

```
Peaks* aa = (Peaks*) a; 
```

可能导致`aa`无效，这将导致**未定义的行为**。

* * *

如果您因为 需要此功能[`qsort`](http://en.cppreference.com/w/cpp/algorithm/qsort)，那么我建议您[`std::sort`](http://www.cplusplus.com/reference/algorithm/sort/)改用。在这种情况下，您可以只覆盖`operator<`of `Peaks`：

```
struct Peaks
{
    bool operator < (const Peaks& p) const
    {
        return (wt1 < p.wt1);
    }
}; 
```

可以这样使用：

```
std::vector<Peaks> vec;
...
std::sort(vec.begin(), vec.end()); 
```

还可以看看[对自定义对象的向量进行排序](https://stackoverflow.com/q/1380463/1168156):)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T17:38:28.763

它们是指向常量数据的指针，正确，请参见[此处](http://www.cprogramming.com/reference/pointers/const_pointers.html)，因此您无法通过指针更改它们指向的事物的值。

# c++ - 使用 Boost.Asio 只读所需的字节数

> ID：15416270
> 
> 赞同：1
> 
> 时间：2013-03-14T17:33:51.360
> 
> 标签：c++, sockets, boost, boost-asio

我只是在创建一个非常简单的 C++ 类，它为我提供了一些方法，例如`connect()`and `read()`，而不是公开所有 Boost.Asio 套接字调用。

现在，我正在尝试找出如何创建一个只读取所需字节数的方法：

```
SocketClient::read(int bytes, char* data); //reads desired amount of bytes and puts them in data, size of data>bytes! 
```

不幸的是，我`read_byte`在 Boost.Asio 中没有发现任何功能。我不想丢弃已收到但尚未读取的字节。

[这是我的课。](http://u8.8u.cz//code/client.cpp)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T18:53:12.193

[读取](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_asio/reference/read/overload1.html)功能似乎提供了您所需要的：

> 该函数用于从流中读取一定字节数的数据。调用将阻塞，直到以下条件之一为真：
> 
> ```
> - The supplied buffers are full. That is, the bytes transferred
>   is equal to the sum of the buffer sizes.
> - An error occurred. 
> ```

示例用法：

```
boost::asio::read(stream, boost::asio::buffer(data, size)); 
```

# eclipse - 将 Eclipse 中的 Debug As > JUnit Test 移动到上下文菜单的根目录

> ID：15416272
> 
> 赞同：0
> 
> 时间：2013-03-14T17:33:56.660
> 
> 标签：eclipse, junit

如何将 Eclipse 中的 Debug As > JUnit Test 移动到上下文菜单的根目录？我已经习惯了在根目录中列出 Debug 的 IntelliJ 上下文菜单。这是我选择了一种测试方法的时候。

例如，在 Eclipse 中：

![在此处输入图像描述](../Images/2f55acbf53a3949561a699378d0926b0.png)

在 IntelliJ 中：

![在此处输入图像描述](../Images/f674506c00be90c0fb382e3d3f3ce1d2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-16T15:15:08.503

这是不可能的。菜单项的一般顺序由提供或扩展上下文菜单的插件定义。没有配置。

也许[EclipseRunnerPlugin](https://code.google.com/p/eclipserunnerplugin/)可能对您有所帮助。它允许在单独的视图中对启动配置进行排序和分组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T02:24:36.590

我认为这是不可能的。因为您在 Eclipse 中看到的所有内容本质上都是插件。除非您修改 Eclipse 插件或制作自己的插件，否则您的目标无法实现。

# jquery - 为什么在测试 ui.sender 时 jquery sortable 中的更新事件似乎运行了两次

> ID：15416275
> 
> 赞同：10
> 
> 时间：2013-03-14T17:34:06.620
> 
> 标签：jquery, jquery-ui-sortable

我正在使用可排序的 jQuery UI 对连接列表进行排序。更新事件似乎运行了两次。

这是完整的可排序调用：

```
$(".pageContent").sortable({
    handle: ".quesText",
    connectWith: ".pageContent",
    containment: "section",
    start: function(e, ui){
        ui.placeholder.height(ui.item.height());
    },
    placeholder: "sortable-placeholder",
    opacity: 0.5,
    cursor: "move",
    cancel: "input, select, button, a, .openClose",
    update: function(e, ui){
        var thisItem = ui.item;
        var next = ui.item.next();
        var prev = ui.item.prev();

        var thisNumber = thisItem.find(".quesNumb");
        var nextNumber = next.find(".quesNumb");
        var prevNumber = prev.find(".quesNumb");

        var tn = parseInt(thisNumber.text());
        var nn = parseInt(nextNumber.text());
        var pn = parseInt(prevNumber.text());

        var quesNumbs = $(".quesNumb");

        var newItemId = thisItem.attr("id").replace(/_\d+$/, "_");

        //test if we are dragging top down
        if(ui.position.top > ui.originalPosition.top){
            quesNumbs.each(function(i){
                var thisVal = parseInt($(this).text());
                var grandparent = $(this).parent().parent();
                var grandId = grandparent.attr("id").replace(/_\d+$/, "_");
                if(thisVal > tn && (thisVal <= pn || thisVal <= (nn - 1))){
                    $(this).text(thisVal - 1 + ".");
                    grandparent.attr("id",grandId + (thisVal - 1));
                }
            });
            if(!isNaN(pn) || !isNaN(nn)){
                if(!isNaN(pn)){
                    //for some reason when there is a sender pn gets updated, so we check if sender exists
                    //only occurs sorting top down
                    if($.type(ui.sender) !== "null"){
                        var senderId = ui.sender.attr("id");
                        thisNumber.text(pn + 1 + ".");
                        thisItem.attr("id",senderId + "_" + (pn + 1));
                        alert(thisItem.attr("id"));
                    }
                    else {
                        thisNumber.text(pn + ".");
                        thisItem.attr("id",newItemId + pn);
                        alert(thisItem.attr("id"));
                    }
                }
                else {
                    thisNumber.text(nn - 1 + ".");
                }
            }
            else {
                   //something will happen here
            }
        }
        //otherwise we are dragging bottom up
        else {
            quesNumbs.each(function(i){
                var thisVal = parseInt($(this).text());
                if(thisVal < tn && (thisVal >= nn || thisVal >= (pn + 1))){
                    $(this).text(thisVal + 1 + ".");
                }
            });
            if(!isNaN(pn) || !isNaN(nn)){
                if(!isNaN(pn)){
                    thisNumber.text(pn + 1 + ".");
                }
                else {
                    thisNumber.text(nn + ".");
                }
            }
            else {
               //something will happen here
            }
        }
    }
}); 
```

这是似乎运行两次的部分：

```
 if($.type(ui.sender) !== "null"){
                    var senderId = ui.sender.attr("id");
                    thisNumber.text(pn + 1 + ".");
                    thisItem.attr("id",senderId + "_" + (pn + 1));
                    alert(thisItem.attr("id"));
                }
                else {
                    thisNumber.text(pn + ".");
                    thisItem.attr("id",newItemId + pn);
                    alert(thisItem.attr("id"));
                } 
```

当排序保持在同一个列表`alert`中`ui.sender`时，我希望只得到一个。`null`当一个项目离开一个列表去另一个然后`ui.sender`将不再是`null`。

问题是当我将项目移动到新列表时会收到**2条警报消息。**好像 ui.sender 在更新函数运行一次后设置，然后再次运行更新函数。显然这不好，因为我正在覆盖不一定应该被覆盖的数据。

如果是这种情况，我应该如何重写我的代码以避免覆盖数据？

**编辑**

我相信每次更改列表 DOM 时都会调用更新事件，而不仅仅是一般的 DOM。因此，对于每个具有 DOM 更改的列表，更新都会运行。当我将一个项目移动到一个新列表时，我正在更新两个列表。

所以我想新的问题是：我如何重写这段代码，知道它会触发两次？是否有可以实现此目的的 Receive 和 Remove 事件的组合？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-03-15T16:37:38.120

我对每个可排序的事件进行了一些调查。以下是我的发现，按它们发生的顺序列出：

```
$(".pageContent").sortable({
    start: function(e,ui){
        //Before all other events
        //Only occurs once each time sorting begins
    },
    activate: function(e,ui){
        //After the start event and before all other events
        //Occurs once for each connected list each time sorting begins
    },
    change: function(e,ui){
        //After start/active but before over/sort/out events
        //Occurs every time the item position changes
        //Does not occur when item is outside of a connected list
    },
    over: function(e,ui){
        //After change but before sort/out events
        //Occurs while the item is hovering over a connected list
    },
    sort: function(e,ui){
        //After over but before out event
        //Occurs during sorting
        //Does not matter if the item is outside of a connected list or not
    },
    out: function(e,ui){
        //This one is unique
        //After sort event before all drop/ending events unless **see NOTE
        //Occurs, only once, the moment an item leaves a connected list
        //NOTE: Occurs again when the item is dropped/sorting stops 
        //--> EVEN IF the item never left the list
        //--> Called just before the stop event but after all other ending events
    },
    beforeStop: function(e,ui){
        //Before all other ending events: update,remove,receive,deactivate,stop
        //Occurs only once at the last possible moment before sorting stops
    },
    remove: function(e,ui){
        //After beforeStop and before all other ending events
        //Occurs only once when an item is removed from a list
    },
    receive: function(e,ui){
        //After remove and before all other ending events
        //Occurs only once when an item is added to a list
    },
    update: function(e,ui){
        //After receive and before all other ending events
        //Occurs when the DOM changes for each connected list
        //This can fire twice because two lists can change (remove from one
        //list but add to another)
    },
    deactivate: function(e,ui){
        //After all other events but before out (kinda) and stop
        //Occurs once for each connected list each time sorting ends
    },
    stop: function(e,ui){
        //After all other events
        //Occurs only once when sorting ends
    }
}); 
```

在解决我的问题时，我只是通过将更新函数的内容包装在`if else`检查`ui.sender`. 基本上它说如果`ui.sender`不存在，那么这是第一次通过更新功能，我们应该做这个功能，否则什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-22T19:58:27.530

我在这里发布了答案：[jquery Sortable connectWith call the update method两次](https://stackoverflow.com/questions/3492828/jquery-sortable-connectwith-calls-the-update-method-twice)

您可以组合删除和接收并创建一个包含更改的数组，然后将其作为 JSON 发布到服务器。

演示：http: [//jsfiddle.net/r2d3/p3J8z/](http://jsfiddle.net/r2d3/p3J8z/)

HTML：

```
<div class="container">
    <div class="step" id="step_1">
        <h2 class="title">Step 1</h2>
        <div class="image" id="image_10">Image 10</div>
        <div class="image" id="image_11">Image 11</div>
        <div class="image" id="image_12">Image 12</div>
    </div>
    <div class="step" id="step_2">
        <h2 class="title">Step 2</h2>
        <div class="image" id="image_21">Image 21</div>
        <div class="image" id="image_22">Image 22</div>
        <div class="image" id="image_23">Image 23</div>
    </div> 
```

JS：

```
 $(function(){

        /* Here we will store all data */
        var myArguments = {};   

        function assembleData(object,arguments)
        {       
            var data = $(object).sortable('toArray'); // Get array data 
            var step_id = $(object).attr("id"); // Get step_id and we will use it as property name
            var arrayLength = data.length; // no need to explain

            /* Create step_id property if it does not exist */
            if(!arguments.hasOwnProperty(step_id)) 
            { 
                arguments[step_id] = new Array();
            }   

            /* Loop through all items */
            for (var i = 0; i < arrayLength; i++) 
            {
                var image_id = data[i]; 
                /* push all image_id onto property step_id (which is an array) */
                arguments[step_id].push(image_id);          
            }
            return arguments;
        }   

        /* Sort images */
        $('.step').sortable({
            connectWith: '.step',
            items : ':not(.title)',
            /* That's fired first */    
            start : function( event, ui ) {
                myArguments = {}; /* Reset the array*/  
            },      
            /* That's fired second */
            remove : function( event, ui ) {
                /* Get array of items in the list where we removed the item */          
                myArguments = assembleData(this,myArguments);
            },      
            /* That's fired thrird */       
            receive : function( event, ui ) {
                /* Get array of items where we added a new item */  
                myArguments = assembleData(this,myArguments);       
            },
            update: function(e,ui) {
                if (this === ui.item.parent()[0]) {
                     /* In case the change occures in the same container */ 
                     if (ui.sender == null) {
                        myArguments = assembleData(this,myArguments);       
                    } 
                }
            },      
            /* That's fired last */         
            stop : function( event, ui ) {                  
                /* Send JSON to the server */
                $("#result").html("Send JSON to the server:<pre>"+JSON.stringify(myArguments)+"</pre>");        
            },  
        });
    }); 
```

解决方案的完整说明： [http ://r2d2.cc/2014/07/22/jquery-sortable-connectwith-how-to-save-all-changes-to-the-database/](http://r2d2.cc/2014/07/22/jquery-sortable-connectwith-how-to-save-all-changes-to-the-database/)

# facebook - 通过图形 API 获取 Facebook 活动的参加者人数

> ID：15416276
> 
> 赞同：0
> 
> 时间：2013-03-14T17:34:09.567
> 
> 标签：facebook, facebook-graph-api

```
 $accesstoken = $facebook->getAccessToken();
    $ret_obj = $facebook->api('366476673459158/attending', 'GET');
    print_r($ret_obj); 
```

这就是我正在做的尝试只显示参加活动的人数。我只是得到一个空数组。

PS：如果我尝试直接获取参加人数，它只会给我一个错误。

$ret_obj = $facebook->api($agenda.'/invited', 'GET', array('summary' => 1));

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T20:27:51.127

这是解决方案：

```
 $ret_obj = $facebook->api($post.'/invited', 'GET', array('summary' => 1));
 $attending_count = $ret_obj['summary']['attending_count']; 
```

但是当我只需要摘要时，它也会返回整个邀请列表。似乎不存在任何解决方法。

# file-upload - 通过 VPN 传输大型目录的最快方法

> ID：15416280
> 
> 赞同：1
> 
> 时间：2013-03-14T17:34:23.780
> 
> 标签：file-upload, compression

我有个问题。每天我都必须通过 VPN 将我的整个源代码（它是一个包含多个目录和文件的目录）上传到服务器。源代码的大小约为 250 MB。我每天做的是，压缩它（将它的大小减少到大约 100 MB），然后我通过 ftp 将这个压缩文件传输到服务器，最后在那里解压缩。我需要大约 20 分钟才能转移它。我确信必须有比我正在做的更好的方法来做到这一点。要么建议我更好的压缩机制或更快的上传方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:42:50.290

如果您可以设置版本控制服务器，那就太好了，Mercurial 和 Git 非常适合。

另一种选择是使用rsync，它是一个同步工具，只上传两个版本之间的差异，避免重复传输数据。

我在这里假设一个类 UNIX 环境，但在 Windows 上，选项几乎相同。

PD：这个问题更适合[superuser](https://superuser.com/)。

# macros - Word 2010 /m 从批处理文件切换

> ID：15416283
> 
> 赞同：2
> 
> 时间：2013-03-14T17:34:27.470
> 
> 标签：macros, batch-file, ms-word, cmd

我正在尝试从批处理文件中执行 Word 宏。[此处](http://support.microsoft.com/kb/210565)的文档表明这是使用 /mMacroname 开关完成的。

但是，当我这样做时，我收到“无效开关 - /mMacroname”错误。似乎我做错了什么，但我一生都无法弄清楚它是什么。

宏的名称是 FormatStrikethrough。它打开/关闭/等。文件本身。我这样调用它：

```
start "C:\Program Files (x86)\Microsoft Office\Office14\winword.exe" /mFormatStrikethrough 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T15:13:09.760

从命令中删除`start`将使其工作。

我相信这是因为您的参数被传递给`start`而不是`winword`可执行文件。至于如何使用 start 启动带开关的程序，

[这个答案](https://stackoverflow.com/questions/154075/using-the-dos-start-command-with-parameters-passed-to-the-started-program)似乎告诉你如何做到这一点。

# mongodb - MongoDB 字母排序错误

> ID：15416288
> 
> 赞同：4
> 
> 时间：2013-03-14T17:34:40.560
> 
> 标签：mongodb

我正在使用 MongoDB 标准 $sort 操作，发现如果有一个小写的大写字符串，结果会被打乱。

例子：

```
Google
HTC
LG
Yoc
iTaxi 
```

如您所见，`iTaxi`被推到底部，而不是位于`HTC`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T17:38:34.003

这是区分大小写的排序，小写字母排在大写字母之后。因此，出于排序和搜索的目的，存储“规范化字段”是有意义的，其中字符串都是大写字母，并且某些特殊字符被删除或替换，例如

```
[ { name : "iTaxi", searchName: "ITAXI" },
  { name : "HTC", searchName: "HTC" },
  { name : "Ümlaut", searchName: "UMLAUT" },
  .... ] 
```

在此示例中，`searchName`应该索引字段，而不是`name`字段。

字符串的规范化，特别是替换变音符号和特殊字符，有点棘手。例如，在德语中`ü`应该成为`ue`并且`ß`应该成为`ss`or `sz`，但这远远超出了您最初问题的范围。

# bash - if 语句中的命令与返回值检查的区别

> ID：15416289
> 
> 赞同：0
> 
> 时间：2013-03-14T17:34:40.973
> 
> 标签：bash, return-value, if-statement

所以我不知道这个标题有多聪明，但我只是在想是否以某种方式“推荐”使用第二种方法？：

第一种方法：

```
if mv "$(ls -1 tarball* | head -1)" supertarball.tar; then
  echo "A Super Tarball created."
else
  echo "No tarballs here."
fi 
```

第二个（也将`ls`字符串分配给变量）：

```
LAST="$(ls -1 tarball* | head -1)"
mv $LAST supertarball.tar
res=$?
if [ $res -ne 0 ]; then
  echo "A Super Tarball created."
else
  echo "No tarballs here."
fi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:51:51.023

它们都很糟糕，但要回答基本问题，请使用`if`. 这就是它的用途。`$?`仅当您需要按多个可能的非零状态进行分支时才需要检查。

*   [http://mywiki.wooledge.org/BashPitfalls#pf44](http://mywiki.wooledge.org/BashPitfalls#pf44)

当你阅读时，[不要解析 ls](http://mywiki.wooledge.org/ParsingLs)，并且[总是引用](http://mywiki.wooledge.org/Quotes)。

```
f() {
    if [ -f "$1" ] && mv -- "$1" supertarball.tar; then
        echo 'A Super Tarball created.'
    else
        echo 'No tarballs here.'
    fi >&2
}

f tarball* 
```

# java - 将 Java 程序作为 (D)COM 服务提供

> ID：15416290
> 
> 赞同：1
> 
> 时间：2013-03-14T17:34:42.557
> 
> 标签：java, com

我正在寻找一个解决方案（最佳示例代码）如何实现将 Java 程序注册为 (D)COM 服务器/服务。更简洁我有以下问题：

最初的情况是：

*   (a) 我有一个 Java Webservice (Axis) 从 Web 中提取数据。

*   (b) 我有一个第 3 方服务（用 Delphi 编写），它需要来自 COM 对象的数据并定期调用它（指定了调用 COM 对象的方法的接口）。

为了从 (a) 到 (b) 获取数据，我需要实现一个 COM-Server，它为 (b) 提供检索其数据所需的方法。

我的主要问题是：

**如何将 Java 服务制作和注册为 COM 对象并提供所需的方法，以便 (b) 在调用时获取其数据。**

我知道 Java，但我不是 (D)COM 方面的专家。所以，请原谅我可能出现的关于 COM 的技术错误。在网上搜索我发现了几个允许 Java 程序与 COM 对象交互的工具/框架（例如 JInterop），但我没有找到如何使 Java 程序通过 (D)COM 访问的代码等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:44:46.790

首先，看看如何[使用 Java Servers 和 DCOM](http://support.microsoft.com/kb/162164)。一个例子是[idl server](http://gsraj.tripod.com/com/idlserver.html)。此外，您可以查看[服务教程](http://documentation.softwareag.com/webmethods/entirex/exx71160/webservi/services.htm)。

# ios - 自动布局错误和标识符

> ID：15416295
> 
> 赞同：3
> 
> 时间：2013-03-14T17:35:09.753
> 
> 标签：ios, user-interface, autolayout

我收到一个我不明白的自动布局错误：

```
2013-03-14 18:30:48.842 driver[7177:907] Unable to simultaneously satisfy constraints.
    Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSLayoutConstraint:0x1ede73e0 UILabel:0x1ede4320.top == PriceCell:0x1edcd0c0.top + 160>",
    "<NSLayoutConstraint:0x1ede7460 V:[UILabel:0x1ede4320]-(7)-[UIImageView:0x1ede45d0]>",
    "<NSLayoutConstraint:0x1ede74a0 UIImageView:0x1ede45d0.centerY == UIImageView:0x1f856810.centerY>",
    "<NSLayoutConstraint:0x1ede7880 UIImageView:0x1f856810.top == PriceCell:0x1edcd0c0.top + 30>",
    "<NSLayoutConstraint:0x1ede78c0 UIImageView:0x1f856810.bottom == PriceCell:0x1edcd0c0.bottom>",
    "<NSAutoresizingMaskLayoutConstraint:0x1f83f340 h=--& v=--& V:[PriceCell:0x1edcd0c0(300)]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x1ede7460 V:[UILabel:0x1ede4320]-(7)-[UIImageView:0x1ede45d0]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

问题：从错误列表中我无法确定自动布局所指的 ui 元素。所以我回到我的 Storyboard 并在我的 tableviewcell 中的每个 UI 元素中分配一个 Identifier 在字段 Restoration Id 中。我在某处读到错误消息中的十六进制数字然后替换为我分配给相应 ui 元素的名称。但不幸的是，这并没有发生。那么我在这里做错了什么，或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-13T13:42:23.087

我已经检查了导致错误的布局约束中断。

如果我没有错，那么您的布局可能如下所示： ![在此处输入图像描述](../Images/7095da761ac16af1fedea4da4aa716be.png)

所以看起来你已经设置了约束，比如：

```
•   Vertical space between cell top and label top is 160\. So your label will be 160 px down from cell top.
•   Then you have set vertical space between label and imageView1 is 7 px.
•   Then you made centre Y between imageView1 and imageView2 to 0 px. So their centre will be same.
•   Then you set vertical space between imageView2 and cell top is 30 px.
•   Then you set vertical space between image view bottom and cell bottom is 0 px.
•   It seems that your cell height is 300 px. 
```

所有这些约束都是为了满足你的一个约束而打破的。

那么这里会发生什么来满足“ 160 + label.height + 7 + UIImageView1.height ”的约束。

好吧，您的单元格高度似乎小于 label + imageView1 + 160 px of y + 7 的总高度。

似乎它的总高度超过了 300，这是您的单元格的高度，并且您的 imageView1 和 imageView2 中心 Y 都试图将中心匹配为 0。

# sql-server-2008 - 如何使用 T-SQL 在 SQL Server 2008 上将数据从表导出到 Excel？

> ID：15416302
> 
> 赞同：0
> 
> 时间：2013-03-14T17:35:30.457
> 
> 标签：sql-server-2008, excel, tsql

想要使用 T-SQL 将 SQL Server 2008 中的表中的数据导出到 Windows 7 上的 excel 文件。通过互联网搜索，许多人尝试以下操作：

```
Insert into openrowset ('Microsoft.Jet.OLEDB.4.0', 'Excel 8.0;Database=c:\MyExcel.xls;','SELECT * FROM [Sheet1$]')
select * FROM mytab 
```

我也试过了。我它不工作。

也试试下面：

```
sqlcmd -S myServer -d myDB -E -Q "select * from Tab" -o "MyData.csv" -h-1 -s"," 
```

好的，没有错误，但没有创建文件。也不确定这是否可以在 T-SQL 中运行。

这种情况有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:43:43.473

大容量复制程序 = bcp

MSDN：http: [//msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

示例用法：

```
bcp AdventureWorks2012.Sales.Currency out "Currency Types.dat" -T -c 
```

这是一个命令行实用程序，因此如果必须从 SQL Server 执行此操作，则需要使用命令 shell 功能。我很好奇您使用的 sqlcmd 是否试图在后台使用 bcp。请注意，如果您要发送到某些位置，则直接从 SQL 创建文件会遇到权限问题，因为 SQL 帐户可能无权访问。最重要的是要记住，运行 TSQL 的机器不是服务器，所以当使用本地路径时它保存到的位置是相对于运行脚本的服务器，而不是通过 TCP/IP 运行脚本到 SQL Server 的用户。我认为 SQL Server 文件创建的默认设置是服务器上 SQL Server 的“数据”位置的根安装。就像是：

```
C:\Program Files\Microsoft SQL Server\(version current is: 110)\Data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T06:44:55.453

1.  使用导出向导创建 SSIS 包。选择[第一行是列名]，excel目标，你的源表或查询
2.  在最后一步中，将 SSIS 包保存为文件
3.  使用 sp_configure 启用 xp_cmdshell
4.  使用 t-sql 脚本执行 ('dtexec /file: ')

# c# - 使用哪个 C# 多线程选项

> ID：15416304
> 
> 赞同：2
> 
> 时间：2013-03-14T17:35:36.040
> 
> 标签：c#, wpf, multithreading

全部 -

更多的方法问题。我有一个 Web 服务，我需要从客户端机器上对其进行性能测试。所以本质上是在编写一个快速的 WPF 多线程应用程序（其中有一个仪表/速度计）来直观地指示请求/响应时间。事件驱动 - 所以当我点击一个按钮时 - 应用程序将开始发出请求。我只关心请求/响应花费了多少时间，而不是响应值本身（目前）。

这是我目前的思考过程：

1）我需要创建尽可能多的线程（我的客户端机器可以处理）并测量性能。我可以考虑的 2 个选项 - 创建一个新的 Thread 机制（这样我可以完全控制线程）或使用 backgroundworker 机制（这样我可以将该值从后台处理传递回 UI）。假设 - 必须循环通过线程创建代码 - 因此可以继续为这两种方法创建多个线程。

2) 不需要任何进度报告，因此这不是选择多线程方法的标准

3）确实需要一个回调方法 - 因为它应该传回值（请求/响应网络服务所花费的时间）

4) 当我用一个值更新一个变量时 - 将利用任何一种可用的同步方法。

5) Havent 确实使用了 4.0 框架中的 Task API - 但这是我应该考虑的事情。

上面的方法看起来不错 - 还是我错过了什么？

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:09:31.293

很多人都推荐了Tasks，我认为这是个好主意。我自己也不介意使用裸线程，就您应该使用哪个线程而言，两者都可以。需要警惕的主要事情是异常处理行为，这在两者之间有所不同。如果你在一个典型的线程中有一个未处理的异常，它会降低你的进程，所以你可能想要这样的东西（只是不要过于简单;））：

```
int errorCount = 0;

void Run()
{
    Thread t = new Thread(delegate()
    {
        try
        {
            // your code
        }
        catch (Exception )
        {
            Interlocked.Increment(ref errorCount);
        }
    });
} 
```

另一方面，任务有一种更可控的方式来处理错误——当您调用 Task.Wait 函数时，它们会将错误包裹在[AggregateException中。](http://msdn.microsoft.com/en-us/library/system.aggregateexception.aspx)

我正在考虑您的案例的例外情况，特别是因为我假设您在压力测试期间最终会出现超时错误。

`Parallel.ForEach`可能也值得一看，但老实说，由于您正在尝试压力测试而不是真实世界的场景，我可能会避免它来确定我一次运行了多少线程 - 我相信 PLINQ 的东西会做一些客户端负载均衡。

所有这些方法的回调方法都很容易。我只是使用方法调用，而不是传递回调，但这是一个实现细节。

我会远离 BackgroundWorker，因为它确实适用于与 UI 相关的异步操作，并且在这个特定的上下文中可能有点臃肿。

# c++ - 获取成员函数的地址而不通过具体名称引用实例的类？

> ID：15416305
> 
> 赞同：0
> 
> 时间：2013-03-14T17:35:36.820
> 
> 标签：c++, c++11, visual-studio-2012, auto

现在我们有了`auto`关键字，我希望能够获取类实例成员的地址，而不必静态引用它的类。

例如（老派）

```
MyInterestingClass & foo = m_holder.GetInteresting();
foo.SetEnableNotification(false);
ScopeGuard restore_notifications = MakeObjGuard(foo, &MyInterestingClass::SetEnableNotification, true);
// do stuf... 
```

c++11 使用自动？？？

```
auto & foo = m_holder.GetInteresting();
foo.SetEnableNotification(false);
ScopeGuard restore_notifications = MakeObjGuard(foo, &foo.SetEnableNotification, true);
// do stuf... 
```

但是，&foo.memfun 无法编译。对此的语法/规范方法是什么？如果可以避免的话，我们当然不想引用具体类型的 foo ，否则`auto`似乎确实是弱酱，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:44:42.697

这应该有效（至少在 GCC 4.7.2 中）：

```
ScopeGuard restore_notifications = MakeObjGuard(foo,
    &std::remove_reference<decltype(foo)>::type::SetEnableNotification, true); 
```

我在简化的情况下尝试了它，它编译得很好。

# php - 如何使用 PDO 保存数组值

> ID：15416307
> 
> 赞同：1
> 
> 时间：2013-03-14T17:35:48.250
> 
> 标签：php, arrays, pdo

我是编程新手，在使用 PDO 将值存储在数组中时遇到问题。

我从表单输入中得到一个字符串：

```
 $brands = "Nike, Adidas, Reebok"; 
```

我得到一个数组，其中字符串用逗号分隔：

```
$pieces = explode(",", $brands); 
```

我需要使用 PDO 将数组中的每个值存储在表中的不同记录中，如下所示：

```
$statement = " INSERT INTO userbrands (Name, Email, Brand) VALUES (:name, :email, :brand)";
$sth = $db ->prepare($statement);
$sth -> execute(array(':name'=>$name, ':email'=>$email, ':brand'=>$pieces)); 
```

感谢您回答菜鸟问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:38:00.007

```
$statement = " INSERT INTO userbrands (Name, Email, Brand) VALUES (:name, :email, :brand)";
$sth = $db ->prepare($statement);
foreach ($pieces as $one_piece) {
  $sth -> execute(array(':name'=>$name, ':email'=>$email, ':brand'=>$one_piece));
} 
```

# php - 如何在php中循环遍历数组中的数组

> ID：15416312
> 
> 赞同：0
> 
> 时间：2013-03-14T17:35:57.577
> 
> 标签：php, arrays, for-loop, foreach, nested-loops

这是数组结构（仅数组中的第一个元素）：

```
Array
(
    [1] => Array
        (
            [pageid] => 1
            [step_order] => 1
            [pageurl] => http://www.domain.com/
            [in_links] => Array
                (
                    [domains] => Array
                        (
                            [Direct Entry] => 1520
                            [www.google.com] => 387
                            [www.google.co.in] => 14
                            [search.yahoo.com] => 10
                            [All other] => 27
                        )

                    [impressions] => Array
                        (
                            [Direct Entry] => Array
                                (
                                    [0] => 10654
                                    [1] => 10728
                                    [2] => 10772
                                )

                            [www.google.com] => Array
                                (
                                    [0] => 10991
                                    [1] => 12455
                                    [2] => 12466
                                    [3] => 10757
                                )

                            [www.google.co.in] => Array
                                (
                                    [0] => 9839
                                    [1] => 9837
                                    [2] => 9845
                                )

                            [search.yahoo.com] => Array
                                (
                                    [0] => 12087
                                    [1] => 10864
                                )

                        )

                )

            [out_links] => Array
                (
                    [domain] => Array
                        (
                            [Left site] => 1752
                            [http://www.domain.com/#] => 102
                            [http://www.domain.com/contact] => 102
                            [http://www.domain.com/#basic_inline_div] => 2
                        )

                    [impressions] => Array
                        (
                            [Left site] => Array
                                (
                                    [0] => 7680
                                    [1] => 9728
                                    [2] => 10496
                                )

                            [http://www.domain.com/#] => Array
                                (
                                    [0] => 259
                                    [1] => 11013
                                )

                            [http://www.domain.com/contact] => Array
                                (
                                    [0] => 12802
                                    [1] => 10757
                                )

                            [http://www.domain.com/#basic_inline_div] => Array
                                (
                                    [0] => 11
                                    [1] => 51
                                )

                        )

                )

            [visitors] => 1958
        )
) 
```

我正在尝试循环从域、印象（和子元素）中获取元素。我设法得到了第一部分：pageid、step_order、page_url。我在使用 in_links 和 out_links 及其子数组时遇到问题。有人对如何提取这些数据有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:40:59.540

以下是您从 in_links 获取域的方法。其他类似（但我不确定印象子数组中的索引代表什么）。

```
foreach ($array as $element) {
  foreach ($element['in_links']['domains'] as $domain => $count) {
    echo "Domain: $domain, Count: $count\n";
  }
} 
```

# java - Spring Security 方法规则：返回值包含一个 Collection

> ID：15416313
> 
> 赞同：2
> 
> 时间：2013-03-14T17:36:01.637
> 
> 标签：java, collections, spring-security, spring-el

在 Spring Security 中，我想保护一个包含返回值并使用`@PostAuthorize`.

我想添加一个约束，不允许一个用户访问他们不是所有者的资源。我面临的问题是我想根据一组值检查主体 ID。

设想：

域对象：

```
public class Car implements Serializable {
    private Integer id;
    private Collection<Driver> drivers;
    ...
}

public class Driver implements Serializable {
    private Integer id;
    ...
} 
```

服务：

```
@PostAuthorize("hasRole('ROLE_ADMIN') or principal.id == returnObject.drivers.driver.id")
public Car getCar(int id) throws DAOException {
    ...        
    return carDAO.get(id);
} 
```

当然，这个 Spel 表达式不起作用。

```
SEVERE: El Servlet.service() para el servlet [dispatcher] en el contexto con ruta [] lanzó la excepción [Request processing failed; nested exception is java.lang.IllegalArgumentException: Failed to evaluate expression 'hasRole('ROLE_ADMIN') or principal.id == returnObject.drivers.driver.id'] con causa raíz
org.springframework.expression.spel.SpelEvaluationException: EL1008E:(pos 42): Field or property 'driver' cannot be found on object of type 'org.eclipse.persistence.indirection.IndirectList' 
```

我还没有看到任何适用于 Collection 的示例。 [这个未解决的问题](https://stackoverflow.com/questions/14406090/how-to-authenticate-against-a-collection-of-domain-objects-in-spring-expression)类似，但我不知道是否符合我的特定情况。有可能做这样的事情吗？这是做我想做的事情的另一种方式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:52:32.103

尝试如下重写您的表达式：

```
@PostAuthorize("hasRole('ROLE_ADMIN') or returnObject.hasDriverWithId(principal.id)") 
```

然后将相应`hasDriverWithId`的方法添加到您的 Car 类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:51:02.773

尝试访问`driver`List 上的属性实际上没有任何意义。您想要列表中的第一项吗？怎么样`returnObject.drivers[0].id`？

# opencv - cvSobel 问题 - opencv

> ID：15416320
> 
> 赞同：0
> 
> 时间：2013-03-14T17:36:14.520
> 
> 标签：opencv

我有下面的代码：

```
 // Image Processing.cpp : Defines the entry point for the console application.
 //
 //Save an available image.
 #include "stdafx.h"
 #include "cv.h"
 #include "highgui.h"
 #include "cxcore.h"
/*
The purpose of this program is to show an example of THRESHOLDING.
*/

int _tmain(int argc, _TCHAR* argv[])
{
IplImage* src = cvLoadImage("D:\\document\\Study\\university of     technology\\semester_8\\Computer Vision\\Pics for test\\black-white 4.jpg");
IplImage* dst = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,3);
IplImage* temp1 = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
IplImage* temp2 = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
cvCvtColor(src,temp1,CV_RGB2GRAY);
cvSobel(temp1,temp2,0,1,3);
cvMerge(temp2,temp2,temp2,NULL,dst);
cvNamedWindow("src",1);
cvNamedWindow("dst",1);

cvShowImage("src",src);
cvShowImage("dst",temp2);

cvWaitKey(0);

cvReleaseImage(&src);
//cvReleaseImage(&dst);
cvDestroyAllWindows();
return 0;
} 
```

当我运行它时，会出现如下图所示的警告： ![在此处输入图像描述](../Images/8a0697d7904dba18b81e5565504ecb1b.png)

但是如果我仍然点击“countinue”按钮，结果就会显示出来！ ![在此处输入图像描述](../Images/e385cdea5ee028ca591e910266e855b6.png)

希望有人能给我一个解释！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:58:48.257

结果是正确的。程序的描述不是。您的 xorder=0 和 yorder=1 这意味着您正在检测 y 方向的一阶导数。图像中的白色像素对应于可以通过垂直导数检测到的边界，即尽可能接近水平边界。这就是为什么几乎没有检测到垂直线的原因。

CvSobel 本身与阈值无关。CvSobel 是一个用于寻找边界和轮廓的函数。阈值化是最常见的从灰度图像创建黑白图像的操作。它也被称为图像二值化。

如果要对图像进行阈值处理，请从 cvThreshold 和 cvAdaptiveThreshold 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T13:58:31.627

我已经修好了，这是我的代码：

```
 // Image Processing.cpp : Defines the entry point for the console application.
 //
 //Save an available image.
 #include "stdafx.h"
 #include "cv.h"
 #include "highgui.h"
 #include "cxcore.h"
 /*
 The purpose of this program is to show an example of Sobel method.
 */

 int _tmain(int argc, _TCHAR* argv[])
 {
IplImage* src = cvLoadImage("D:\\document\\Study\\university of technology\\semester_8\\Computer Vision\\Pics for test\\black-white 4.jpg");
IplImage* dst = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
IplImage* dst_x = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
IplImage* dst_y = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
IplImage* temp1 = cvCreateImage(cvGetSize(src),IPL_DEPTH_8U,1);
IplImage* temp2 = cvCreateImage(cvGetSize(src),IPL_DEPTH_16S,1);

cvCvtColor(src,temp1,CV_RGB2GRAY);  

cvSobel(temp1,temp2,0,1,3);
cvConvertScale(temp2,dst_y,1.0,0);

cvSobel(temp1,temp2,1,0,3);
cvConvertScale(temp2,dst_x,1.0,0);

//k nen dao ham cung luc theo x va y ma nen dao ham rieng roi dung ham cvAdd.
//cvSobel(temp1,temp2,1,1,3);
//cvConvertScale(temp2,dst,1.0,0);

cvAdd(dst_x,dst_y,dst,NULL);

cvNamedWindow("src",1);
cvNamedWindow("dst",1);
cvNamedWindow("dst_x",1);
cvNamedWindow("dst_y",1);

cvShowImage("src",src);
cvShowImage("dst",dst);
cvShowImage("dst_x",dst_x);
cvShowImage("dst_y",dst_y);

cvWaitKey(0);

cvReleaseImage(&src);
cvReleaseImage(&dst);
cvReleaseImage(&temp1);
cvReleaseImage(&temp2);
cvDestroyAllWindows();
return 0;
 } 
```

# c# - 填写审计字段的通用方法

> ID：15416324
> 
> 赞同：0
> 
> 时间：2013-03-14T17:36:20.827
> 
> 标签：c#, wcf

填写审计字段的通用方法

我想在添加或修改每个实体时填写它们的审计字段。

例如，`Customer`实体有`CreatedDate`, `UpdatedDate`。对于具有`CreatedDate`,的订单实体也是如此`UpdatedDate`。

我可以在`AddCustomer`or`UpdateCustomer`方法或`NewOrder`,`UpdateOrder`方法中更新它们。

对于`AddCustomer`：

```
customer.CreatedDate = DateTime.Now;
customer.UpdatedDate= DateTime.Now; 
```

对于`UpdateCustomer`：

```
customer.UpdatedDate= DateTime.Now 
```

我想做什么而不是在每个方法中重复代码，我可以有一个接受泛型类型和更新的泛型方法吗？

```
private void FillAuditFields<T>(ref T entity)
{
} 
```

我应该在里面做什么`FillAuditFields`（如果可以的话）说`entity.CreatedBy`，`entity.UpdatedBy`。还是有更好的方法来做到这一点？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:45:18.007

根本不需要泛型，您只需要您的 Customer 和 Order 类实现一个接口，例如：

```
public interface IAuditable
{
    DateTime CreatedDate{get;set;}
    DateTime UpdatedDate{get;set;}
} 
```

并在适当的地方有 2 种方法

```
public void AuditableCreated(IAuditable auditable)
{
    auditable.CreatedDate = DateTime.Now;
}
public void AuditableUpdated(IAuditable auditable)
{
    auditable.UpdatedDate = DateTime.Now;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:44:53.530

让您的实体使用要在所有实体上设置的字段实现接口，并使用“where”子句将 T 限制为实现该接口的类。

# php - 如何为用户发布的内容创建版本控制/历史/修订系统？

> ID：15416332
> 
> 赞同：14
> 
> 时间：2013-03-14T17:36:38.920
> 
> 标签：php, mysql, version-control, compare, database-versioning

在阅读了很多关于[保留页面更改历史记录](https://stackoverflow.com/questions/3481392/keeping-page-changes-history-a-bit-like-so-does-for-revisions)或[如何对数据库中的记录进行版本控制](https://stackoverflow.com/questions/323065/how-to-version-control-a-record-in-a-database)（例如）的 SO 问题之后，我找不到一个真正优雅的解决方案来完成这项工作。

*现在，让我们尽可能清楚地解释我们需要什么*，对于这个简单的修订系统，允许注册用户发布一些文章，其他用户提交这些文章的修订，然后一些版主用户检查这些修订。

**MySQL数据库**

该数据库包含一个带有以下简化字段的文章表：

```
ARTICLE(id, id_user, title, content, date); 
```

为了实现修订/历史版本，我想我们会有下表：

```
REVISION(id, id_article, revision_id_user, id_moderator, revision_date, 
         revision_title, revision_content, revision_description, revision_check); 
```

与关系：`ARTICLE 0,n <---> 1,1 REVISION`

**工作流程**

*   用户创建一个`ARTICLE`，插入到`ARTICLE`表中（*太棒了！*）

*   另一个用户对此进行了更新`ARTICLE`，此更新记录在`REVISION`表中，并为主持人用户排队。( `revision_check=0`)。

*   版主用户验证`REVISION(revision_check=1)`，然后`ARTICLE(content)`获取`REVISION(revision_content)`值。

**我的问题**

*   这个工作流程似乎是一个好方法吗？`REVISION`因为，我看到了一个错误：如果一个 s有几个`ARTICLE`：

*   我们应该取上次提交的内容`REVISION`还是原始内容`ARTICLE`？
*   或者，我们是否需要阻止修订，因为`REVISION`在未检查最后一个时无法提交其他修订。

*   有没有办法记录轻量级版本？顺便问一下，是否可以在`REVISION`表中插入仅通过 SQL、PHP 或 js 比较函数更新的内容？以及如何像 SO 那样显示它？因为我怕`REVISION`桌子会很重。

*   奖金：怎么做？

**任何想法、链接、来源、插件**（MySQL、PHP 5 和 JS/jQuery）将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T10:04:02.290

由于您的个性化工作流程，我没有看到针对您问题的插件的单一答案。

**关于修订工作流程**

这是你自己对它的看法，它对你的使用来说似乎并不算太​​糟糕。但我敢肯定，一些用例应该顺便发展一下。

我可以看到的第一点，您必须锁定修订，直到修订正在进行并且直到它得到版主的验证。例如，在进行时添加`ARTICLE(revision=progress)`锁定它，并通过显示消息来避免用户同时编辑文章。

第二点，要小心，我相信文章的作者可以在没有任何审核过程的情况下更新它。`ARTICLE(revision=progress)`出于这个原因，当作者更新他自己的文章时，您也必须设置。

**关于在 db 中记录修订的精简版本**

您可以在 php（或其他）中创建一个疯狂的函数，为每个更改创建一个数组，如下所示：

```
array('1'=>array('char_pos'=>'250','type'=>'delete','length'=>'25','change'=>''),
'2'=>array('char_pos'=>'450','type'=>'insert','length'=>'16','change'=>'some text change'),
...); 
```

如您所见，在数据库中创建、格式化和记录它可能非常糟糕且难以管理。

我认为没有办法用 MySQL 进行版本控制。您可以使用 PROPEL 之类的 ORM 进行版本控制，但我认为结果不会是您所期望的......

在这里，更好的方法似乎是记录每个修订版的整个更新文章，即使它会增加您的数据库。使用您的工作流程，您不会阅读很多 REVISION 表，因此 MySQL 不会为它带来繁重的负载。

**关于比较显示**

您可以使用[Diff-Match-Patch 插件](https://code.google.com/p/google-diff-match-patch/)来突出显示两个内容之间的更新，[此处为“差异”演示](http://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html)。我认为 SO 使用[Beyond compare](http://www.scootersoftware.com/moreinfo.php)（或类似）来突出修订之间的变化。

要阅读有关 SO 技术的更多信息，您可以查看[此页面](https://blog.stackoverflow.com/2008/09/what-was-stack-overflow-built-with/)。

# c# - 计算数学字符串 Asp.net C# 的结果

> ID：15416333
> 
> 赞同：1
> 
> 时间：2013-03-14T17:36:39.393
> 
> 标签：c#, math, asp-classic

我需要在 Visual Studio Web Developer (Asp C#) 中制作一个基于表单的计算器 我有一个显示单击按钮的值的文本框（包括 +、-、/、*）...

现在我希望它计算该文本框的字符串值，如果可能的话......

编辑：我知道 JS 有一个非常简单的方法来使用 eval(stringholdername); 但我似乎找不到任何与 ASP C# 等效的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:25:17.553

您可以使用一些简单的递归方法，如下所示：

```
 public int Calculate(string expression)
    {
        int result = 0;
        string[] expressions = expression.Split('+');
        if (expressions.Length > 1)
        {
            result = 0;
            foreach (string expr in expressions)
                result += Calculate(expr);
            return result;
        }
        expressions = expression.Split('-');
        if (expressions.Length > 1)
        {
            result = Calculate(expressions[0]);
            for (int i = 1; i < expressions.Length; i++)
                result -= Calculate(expressions[i]);
            return result;
        }
        expressions = expression.Split('*');
        if (expressions.Length > 1)
        {
            result = 1;
            foreach (string expr in expressions)
                result *= Calculate(expr);
            return result;
        }
        expressions = expression.Split('/');
        if (expressions.Length > 1)
        {
            result = Calculate(expressions[0]);
            for (int i = 1; i < expressions.Length; i++)
                result /= Calculate(expressions[i]);
            return result;
        }

        if (!int.TryParse(expression, out result))
            throw new ArgumentException("Expression was not nummeric", "expression");

        return result;
    } 
```

很简单，不支持（和）和负数，只支持+、-、*和/。

你像这样使用它：

```
int result = Calculate("20*10+200/100"); 
```

祝你的任务好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:37:33.377

查看[NCalc](http://ncalc.codeplex.com/)，它是一个开源数学表达式评估器。

# macos - QFileDialog：如何在“另存为...”对话框中设置默认文件名

> ID：15416334
> 
> 赞同：17
> 
> 时间：2013-03-14T17:36:42.393
> 
> 标签：macos, qt4, qfiledialog

我尝试在 Mac OS X 中创建“另存为...”对话框。但我不想使用`QFileDialog::getSaveFileName()`函数，因为由该函数创建的对话框在 Mac OS X Lion 中并不是真正原生的**。**所以我决定创建对话框作为`QFileDialog`对象：

```
auto export_dialog( new QFileDialog( main_window ) );
export_dialog->setWindowModality( Qt::WindowModal );
export_dialog->setFileMode( QFileDialog::AnyFile );
export_dialog->setAcceptMode( QFileDialog::AcceptSave ); 
```

一切正常，除了一个问题。我无法为保存的文件设置默认名称，因此用户每次都必须手动输入此名称。我知道该函数`QFileDialog::getSaveFileName()`允许通过第三个参数*dir* ( [http://qt-project.org/doc/qt-4.8/qfiledialog.html#getSaveFileName](http://qt-project.org/doc/qt-4.8/qfiledialog.html#getSaveFileName) ) 设置默认文件名。但是如果没有这个功能，如何设置这个默认名称呢？

我可以通过函数为保存的文件设置默认后缀`QFileDialog::setDefaultSuffix()`，但我需要设置整个默认名称，而不仅仅是默认后缀。

我试过使用`QFileDialog::setDirectory()`函数，但它只设置保存的目录，没有保存文件的名称。

我在 Mac OS X Lion 上使用 Qt 4.8.1。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-03-05T12:24:15.893

我发现**`selectFile("myFileName");`**只有在文件实际存在时才使用。就我而言，目的是创建一个新文件，并可选择覆盖现有文件。

对我有用的解决方案*（Qt 5.3.2）*如下：

```
QFileDialog svDlg;

QString saveFileName = svDlg.getSaveFileName(this, caption, preferredName, filter); 
```

在上面的例子中，preferredName 是一个包含 "C:/pre-selected-name.txt" 的 QString

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-19T00:30:16.880

为将来的访问者重申评论中的内容，以下行将“myFileName”作为 QFileDialog 中的默认名称：

```
export_dialog->selectFile("myFileName"); 
```

讨论：[http ://www.qtcentre.org/threads/49434-QFileDialog-set-default-name?highlight=QFileDialog](http://www.qtcentre.org/threads/49434-QFileDialog-set-default-name?highlight=QFileDialog)

不太有用的文档：http: [//qt-project.org/doc/qt-4.8/qfiledialog.html#selectFile](http://qt-project.org/doc/qt-4.8/qfiledialog.html#selectFile)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-14T04:11:58.143

```
QString dir = QDir::homePath();
QString name = "test.txt";

QFileDialog::getSaveFileName(nullptr, tr("save file"), dir + "/" + name, tr("TXT (*.txt)")); 
```

如果您设置“dir”参数，并且 dir 是“file”（存在或不存在），则在 windows 中您将拥有默认名称。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-16T10:24:22.630

使用当前的 QT 版本 (5.x)，您可以使用函数调用`directory`中的参数设置首选文件名[`QFileDialog.getSaveFileName()`](http://doc.qt.io/qt-5/qfiledialog.html#getSaveFileName)：

```
QFileDialog.getSaveFileName( directory = 'preferredFileName.txt' ) 
```

文档：[http ://doc.qt.io/qt-5/qfiledialog.html#getSaveFileName](http://doc.qt.io/qt-5/qfiledialog.html#getSaveFileName)

# java - 将字符发送到后台 Java 进程的标准输入

> ID：15416336
> 
> 赞同：1
> 
> 时间：2013-03-14T17:36:42.620
> 
> 标签：java, process, background, pid

我希望将一个字符发送到在后台运行的 Java 进程。我发现这篇文章[https://serverfault.com/questions/178457/can-i-send-some-text-to-the-stdin-of-an-active-process-running-in-a-screen-sessi？ answertab=active#comment155464_178470](https://serverfault.com/questions/178457/can-i-send-some-text-to-the-stdin-of-an-active-process-running-in-a-screen-sessi?answertab=active#comment155464_178470)我认为可以解决问题，但实际上并没有。出于测试目的，我添加了一行

```
 System.out.println("This is what I read "+(int)temp); 
```

以这种方式读取 temp 的位置

```
int temp = inputStreamReader.read(); 
```

确实发生了一些非常奇怪的事情：

*   我在终端窗口中启动进程（这次不在后台）
*   我打开另一个终端并查找进程的 PID
*   我运行命令

    `echo q > /proc/*pid_of_the_process/fd/0`

*   在另一个窗口中，这条线出现

    `q`

所以出于某种原因，我在进程正在运行的终端中看到了这个字符，但它实际上并没有被进程读取，因为如果是这种情况，那么我会看到这一行

```
This is what I read 113 
```

如果我在终端窗口中键入“q”，这就是我实际得到的。

有人知道我为什么会出现这种有趣的行为吗？

# c# - 未知的外部方法 T System.Nullable`1::get_Value()

> ID：15416342
> 
> 赞同：1
> 
> 时间：2013-03-14T17:36:54.143
> 
> 标签：c#, android, dot42

我的 dot42 C# 项目遇到了问题：

```
Unknown extern method T System.Nullable`1::get_Value() at System.Void NokiaStyleProfiles.AddDialogue::btnAdd_Click(System.Object,System.EventArgs) (c:\Users\STO\Documents\Visual Studio 2012\Projects\NokiaStyleProfiles\NokiaStyleProfiles\AddDialogue.cs, position 86,13) 
```

导致该问题的代码：

```
int hourStart = timePickerStart.CurrentHour.Value; (timePicker.CurrentHour is an int?) 
```

`(int)`,`.Value`和`.GetValueOrDefault()`, 正如预期的那样，产生相同的结果：这个错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T07:45:23.337

这已`Version 1.0.0.67`针对原始类型进行了修复。不再需要上一个答案中建议的解决方法。如果您运行检查更新，它将更新到最新版本的 dot42。

*披露：我在 dot42 工作。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:14:01.177

dot42 开发者回复：

...

> 现在还没有完全支持 Nullable 类型。此功能是使结构的行为与实际结构相同的一部分。现在我建议解决它。

...

解决方法是：

```
int hourStart = Int32.Parse(timePickerStart.GetCurrentHour().ToString()); 
```

# android - 如何检测滚动视图何时到达底部，以便可以将更多项目加载到其中？

> ID：15416343
> 
> 赞同：2
> 
> 时间：2013-03-14T17:36:57.503
> 
> 标签：android, android-layout, scrollview

我的 android 应用程序中有一个滚动视图，我用数据库中的项目填充。我从其中的 20 个项目开始，但我想要发生的是让滚动视图在用户将滚动视图拉到底部时加载更多项目。如果它不是私有的，我可以覆盖 onDetectOverflow 但我不能，所以我无法弄清楚如何检测用户何时向上拉滚动视图。似乎没有任何我可以使用的 onScroll 侦听器，所以有人有办法检测到这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T03:52:59.637

您可以根据需要使用 PullToRefresh 列表视图。它将根据用户滚动加载scrollview up和scrollview down的数据。以下链接提供了PullToRefresh listview的来源

[拉取刷新](https://github.com/chrisbanes/Android-PullToRefresh)

[AndroidPullToRefresh](https://github.com/johannilsson/android-pulltorefresh)

[PullToRefresh-ListView](https://github.com/erikwt/PullToRefresh-ListView)

# javascript - 使用 Javascript 确定 URL 中的 /category/

> ID：15416344
> 
> 赞同：1
> 
> 时间：2013-03-14T17:36:57.937
> 
> 标签：javascript, regex, url, indexof

我需要包含（通过 Javascript）不同的内容，具体取决于从 url 捕获的主要类别。

该网站的布局如下：

[http://example.com/Category/Arts/Other/Sub/Categories/](http://example.com/Category/Arts/Other/Sub/Categories/)

[http://example.com/Category/News/Other/Sub/Categories/](http://example.com/Category/News/Other/Sub/Categories/)

[http://example.com/Category/Sports/Other/Sub/Categories/](http://example.com/Category/Sports/Other/Sub/Categories/)

[http://example.com/Category/Business_And_Finance/Other/Sub/Categories/](http://example.com/Category/Business_And_Finance/Other/Sub/Categories/)

上述不同的主要类别是：

**艺术、新闻、体育和商业_And_Finance**

在javascript中完成此操作的最佳方法是什么。我需要的可能如下所示，

```
if (category = Arts) {
    alert("Arts");
}else if (category = News) {
    alert("News");
}... 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:41:54.380

拆分 location.href 然后打开相应的变量。因此，例如：

```
var url = document.location.href,
    split = url.split("/");

/*
  Split will resemble something like this:
  ["http:", "", "example.com", "Category", "Arts", "Other", "Sub", "Categories", ""]

  So, you'll find the bit you're interested in at the 4th element in the array
*/
switch(split[4]){
  case "Arts":
    alert("I do say old chap");
    break;

  case "News":
    alert("Anything interesting on?");
    break;

  default:
    alert("I have no idea what page you're on :O!");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:41:19.677

您可以像这样访问当前网址

```
document.location.href 
```

你可以做一个

```
if (    document.location.href.indexOf("categoryYouWant")>-1){
     //whatever you want
} 
```

但你应该做一个正则表达式

```
category=document.location.href.match(/example\.com\/(\w+)\//i)[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:42:18.527

```
var url = window.location.href;

var category = url.split('Category/')[1].split('/')[0];

if (category === 'Arts') {
    alert("Arts");
}else if (category === 'News') {
    alert("News");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:46:53.420

我做了这个例子：

```
<!DOCTYPE html> 
    <html>

    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/> 

        <script type="text/javascript">
        function determine(url)
        {
           var myArray = url.split('/'); 
           if(myArray[4] == "News")
           alert(myArray[4]);

        }

        </script>
    </head> 

    <body> 

        <div>       
            <a href="" onclick="determine('http://example.com/Category/News/Other/Sub/Categories/')">http://example.com/Category/News/Other/Sub/Categories/</a>       
        </div>

    </body>
    </html> 
```

萨卢多斯 ;)

# for-loop - for循环输出中的虚假空间

> ID：15416348
> 
> 赞同：0
> 
> 时间：2013-03-14T17:37:04.133
> 
> 标签：for-loop, batch-file, cmd

我正在尝试使用批处理文件将包含 sql 代码的文件转换为单个环境变量，以便与 MSSQL 实用程序 bcp 一起使用。例如，如果 InFile.sql 包含

```
-- This is a simple statement
SELECT *
    FROM table 
```

的输出`ECHO %query%`应该是 `SELECT * FROM people`

下面的代码大部分时间都对我有用

```
SETLOCAL=ENABLEDELAYEDEXPANSION 
:: Replace VarOld with VarNew
FOR /f "delims=" %%a IN ('TYPE InFile.sql') DO ( SET line=%%a & ECHO !line:table=people! >> TmpFile1 )

:: Remove comment lines starting with  '-'  and remove newline characters
(FOR /f "eol=- delims=" %%a in (TmpFile1) DO SET/p=%%a ) <nul >TmpFile2

:: Create variable 'Query'
FOR /f "delims=" %%a IN ('TYPE TmpFile2') DO SET query=%%a 
```

但是，第一个 FOR 循环在每行末尾添加 3 个空格字符，第二个 FOR 循环添加另一个空格字符，因此结果是 `SELECT * FROM people`

我可以应付额外的空格（尽管我内心的纯粹主义者并不高兴！）直到我不得不将它与长 SQL 查询和多个替换步骤一起使用 - 文件中的每一行都添加了 12 个空格字符。额外的空格足以使生成的查询长约 8300 个字符 - 对于 Windows 的批处理文件行的 8196 个字符限制来说太多了。

谁能看到我如何删除这些虚假空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:39:38.727

在捕获一行 infile.sql 时`tokens=*`，在循环中使用应该修剪空白。`for`这是一个概念证明，`%query%`包含在引号中以说明修剪：

```
@echo off
setlocal enabledelayedexpansion

set query=
if "%~1"=="" goto usage
if not exist "%~1" goto usage

for /f "usebackq eol=- tokens=*" %%I in ("%~f1") do (
    set "sub=%%I"
    set query=!query! !sub:table=people!
)

:: strip the leading space from %query%
echo "%query:~1%"
goto :EOF

:usage
echo Usage: %~nx0 sqlfile 
```

**示例输出：**

```
C:\Users\me\Desktop>type infile.sql
-- This is a simple statement
SELECT *
    FROM table

C:\Users\me\Desktop>test.bat infile.sql
"SELECT * FROM people" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T23:44:54.493

根本问题是尾随空格在重定向器之前的 SET 语句和 ECHO 语句中很重要。

在您的代码中，您需要删除第一个之后`%%a`和`people!`中的空格`FOR`因此：

```
FOR /f "delims=" %%a IN ('TYPE InFile.sql') DO (SET line=%%a&ECHO !line:table=people!>> TmpFile1) 
```

下一个问题更微妙一些。在

```
(FOR /f "eol=- delims=" %%a in (TmpFile1) DO SET/p=%%a ) <nul >TmpFile2 
```

后面的空格`/p=%%a`是必需的，因为它在构建 TmpFile2 时提供了从行中获取的文本之间的分隔符 - 这会导致多余的尾随空格。尝试用例如替换该空间`Q`-仅用于测试。

因此，您需要在最终空间`QUERY`构建完成后将其删除`FOR`

```
SET query=%query:~0,-1% 
```

# sql - 随历史价值的变化计算产品总和

> ID：15416352
> 
> 赞同：1
> 
> 时间：2013-03-14T17:37:13.100
> 
> 标签：sql, ms-access, ms-access-2010

给定 Access 2010 中的两个（简化）表：

```
**tblDailyLabour**
DailyLabourID - PK
DateRecorded
EmployeeID
QtyHours

**tblEmployeeHistory**
EmpHistoryID - PK
DateApplicable
EmployeeID
PayRate 
```

今天将 Employee1 输入到数据库中。他被设置在员工的“通讯录”中，并为他分配了各种价值。截至今天，他的工资率为 23.50 美元/小时。

因此，从今天开始，所有记录的小时数将根据 Employee1 的今天费率 (23.50 * [QtyHours]) 计算。一个月过去了，Employee1 的工资增加到 25.00 美元/小时。该值作为新条目记录在“员工历史记录”中，并且自 4 月 17 日起生效。因此，从 4 月 17 日起，他的计算时间为 (25.00 * [QtyHours])。

在每日报告中，这很简单，因为查询会检查报告日期并计算 Employee1 的总数。无论报告是 3 月 17 日还是 4 月 25 日，查询都会查找分配的费率并计算总成本。

但是，如果我要创建一份管理报告来评估 3 月 17 日至 6 月 3 日期间所有日子的总成本，则可能需要考虑员工费率的一些变化。

这是我遇到问题的地方。如果 DateApplicable <= DateRecorded，我无法弄清楚如何不显示任何以前的费率。

我该如何编写一个查询来确定每天的费率 - 取决于员工历史记录中的值 - 并计算总和？

如果这个问题的措辞不是很好，我提前道歉，但非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:08:19.927

我认为如果您在“地址簿”中设置日期范围（开始日期和结束日期）而不仅仅是开始日期，可能会更容易。
在当前记录上，将结束日期设为 9999 年 12 月 31 日。输入新的当前记录时，更新最后一条记录的结束日期。

# node.js - 如何使用具有节点持久性的池？

> ID：15416354
> 
> 赞同：1
> 
> 时间：2013-03-14T17:37:18.670
> 
> 标签：node.js, connection-pooling, node-persist

是默认启用池化，还是必须手动启用？

有人可以提供一个`database.json`或类似的例子来说明如何启用/禁用池吗？

[https://github.com/nearinfinity/node-persist#connectionPoolingUsing](https://github.com/nearinfinity/node-persist#connectionPoolingUsing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:14:17.943

默认情况下不启用池化，需要通过指定`pooling`选项和 pooling手动启用`name`。

您可以通过查看[persist.js](https://github.com/nearinfinity/node-persist/blob/master/lib/persist.js)`connect`中的代码来验证这一点：

```
if (opts.pooling && opts.pooling.name) {
  ... // Pooling is setup here
  return pool.acquire(connectAfterAutoDefinesComplete.bind(this, callback));
} else {
  return driver.connect(opts, connectAfterAutoDefinesComplete.bind(this, callback));
} 
```

* * *

直接回答你的问题：

您可以通过提供链接示例中指定的选项来启用池化，并且您可以通过不在`database.json`.

# jquery - 通过 SOAP 查询 SharePoint 列表仅返回第一页视图

> ID：15416361
> 
> 赞同：2
> 
> 时间：2013-03-14T17:37:39.827
> 
> 标签：jquery, sharepoint, soap, caml

我正在尝试检索列表中的所有项目，但我只获得前 50 个项目（默认视图的第一页）。最终，我想将列表中的所有项目拉入一个数组，我可以对其进行排序和解析以输出一系列格式化 XSLT 中的统计信息，但让我们首先解决我们的第一个障碍。

这是我的代码：

```
<script src="/sites/mySite/Resources/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
    var soapEnv =
        "<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/'> \
            <soapenv:Body> \
                     <GetListItems xmlns='http://schemas.microsoft.com/sharepoint/soap/'> \
                        <listName>myList</listName> \
                        <viewFields> \
                            <ViewFields> \
                               <FieldRef Name='Team_x0020_Assigned' /> \
                           </ViewFields> \
                        </viewFields> \
                    </GetListItems> \
                </soapenv:Body> \
            </soapenv:Envelope>";

        $.ajax({
            url: "/sites/mySite/_vti_bin/lists.asmx",
            type: "POST",
            dataType: "xml",
            data: soapEnv,
            complete: processResult,
            contentType: "text/xml; charset=\"utf-8\""
        });
    });

    function processResult(xData, status) {
        $(xData.responseXML).find("z\\:row").each(function() {
            var liHtml = "<li>" + $(this).attr("ows_Team_x0020_Assigned") + "</li>";
            $("#tasksUL").append(liHtml);
        });
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T01:23:42.450

视图上可能设置了 rowLimit，您可以通过添加来覆盖它

```
<rowLimit>1000</rowLimit> 
```

给GetListItems 参数。

请注意，尽管 SharePoint 2010 可以限制您的请求，但返回的项目数不会超过 5000 或 20000 个（对于管理员）。这些设置可以在 Central Admin 的 Web 应用程序设置中更改。

顺便说一句，如果您还没有这样做，您可能想要研究使用 XSLT 列表视图 Web 部件。

# javascript - Cloud 9 IDE 上的 Socket.io - 警告：引发错误：错误：监听 EACCES

> ID：15416363
> 
> 赞同：1
> 
> 时间：2013-03-14T17:37:51.927
> 
> 标签：javascript, node.js, sockets, express, socket.io

我正在 Cloud 9 IDE 中开发。

这是我收到的错误：

警告：引发错误：错误：听 EACCES

我正在使用 Cloud 9 指定在我的代码中用于监听的端口：process.env.PORT

这是我的代码：

```
//app.js Socket IO Test
var express = require("express"),
redis = require('socket.io/node_modules/redis'),
io = require('socket.io').listen(app);

var app = express();

var redisPort = [CENSORED]
  , hostname = [CENSORED]
  , password = [CENSORED]
  , db = 1;

var pub = redis.createClient(redisPort, hostname);
var sub = redis.createClient(redisPort, hostname);
var store = redis.createClient(redisPort, hostname);
pub.auth(password, function(){console.log("adentro! pub")});
sub.auth(password, function(){console.log("adentro! sub")});
store.auth(password, function(){console.log("adentro! store")});

io.configure( function(){
io.enable('browser client minification'); // send minified client
io.enable('browser client etag'); // apply etag caching logic based on version number
io.enable('browser client gzip'); // gzip the file
io.set('log level', 1); // reduce logging
io.set('transports', [ // enable all transports (optional if you want flashsocket)
'websocket'
, 'flashsocket'
, 'htmlfile'
, 'xhr-polling'
, 'jsonp-polling'
]);
var RedisStore = require('socket.io/lib/stores/redis');
io.set('store', new RedisStore({redisPub:pub, redisSub:sub, redisClient:store}));
});

app.listen(process.env.PORT);

app.get('/', function (req, res) {
res.sendfile(__dirname + '/index.html');
});

var buffer = [];
io.sockets.on('connection', function(client){
var Room = "";
client.on("setNickAndRoom", function(nick, fn){
fn({msg : "Hello " + nick.nick});
client.join(nick.room);
Room = nick.room;
client.broadcast.to(Room).json.send({ msg: "Se conecto al room: " + nick.room, nick : nick });
});

client.on('message', function(message, fn){
var msg = message; //{ message: [client.sessionId, message] };
buffer.push(msg);
if (buffer.length > 15)
buffer.shift();
client.broadcast.to(Room).json.send(msg);
fn(msg);
});

client.on('disconnect', function(){
client.broadcast.to(Room).json.send({ msg: "Se desconecto"});
});
}); 
```

我不确定为什么在使用 Cloud 9 建议的端口时会出现此错误。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T12:46:44.540

难道你不想在让套接字监听它之前创建 app = express() 吗？

# wordpress - 将 wordpress 用户添加到 Salesforce 联系人

> ID：15416364
> 
> 赞同：0
> 
> 时间：2013-03-14T17:37:51.917
> 
> 标签：wordpress, salesforce

我正在尝试通过连接到 Wordpress 注册并将正在注册的用户添加到 Salesforce 数据库来完成一项相对简单的任务。当我在 Wordpress 之外运行 Salesforce db 代码时，它可以完美运行，但是当我通过在我的 wordpress 网站上注册来测试它时，我收到一条错误消息：INVALID_LOGIN: Invalid username, password, security token; 或用户被锁定。

此外，我从 Wordpress 收到此错误“无法修改标头信息 - 标头已发送”，这不允许我查看发送到 Salesforce 的整个对象数据。

这是我的代码：

```
 $SF_USERNAME = 'test';
 $SF_PASSWORD = 'test';

 define( 'CD_PLUGIN_PATH', plugin_dir_path( __FILE__ ) );

 require_once (CD_PLUGIN_PATH . 'Toolkit/soapclient/SforceEnterpriseClient.php');
 require_once (CD_PLUGIN_PATH . 'Toolkit/soapclient/SforceHeaderOptions.php');

 function add_user_to_SF($user_id) {
$user = get_userdata($user_id);

 try {
     $mySforceConnection = new SforceEnterpriseClient();
     $mySoapClient = $mySforceConnection->createConnection(CD_PLUGIN_PATH . 'Toolkit/soapclient/enterprise.wsdl.xml');
     $mylogin = $mySforceConnection->login($SF_USERNAME, $SF_PASSWORD);

     print '<pre>'; 
     print_r($mylogin);
     print '</pre>';
     print '<br/><br/>';

$sObject = new stdclass();
$sObject->FirstName = $user->first_name;
$sObject->LastName = $user->last_name;
$sObject->Email = $user->user_email;

//echo "**** Creating the following:\r\n";
$createResponse = $mySforceConnection->create(array($sObject), 'Contact');

$ids = array();
    foreach ($createResponse as $createResult) {
        print_r($createResult);
        array_push($ids, $createResult->id);
    }

    } catch (Exception $e) {
      $errors->add( 'demo_error', __(print_r($_POST),'mydomain') );
      $errors->add( 'demo_error', __($mySforceConnection->getLastRequest(),'mydomain') );
      $errors->add( 'demo_error', __($e->faultstring,'mydomain') );
      return $errors;
}

}

 add_filter( 'registration_errors', 'add_user_to_SF', 10, 3 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:41:48.147

这是一个 php 范围问题。

添加：全局$SF_USERNAME；全局 $SF_PASSWORD；

函数内部解决了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T05:13:10.693

看起来您可能缺少安全令牌。它附加到密码的末尾。

此链接说明如何生成令牌

[https://login.salesforce.com/help/doc/en/user_security_token.htm](https://login.salesforce.com/help/doc/en/user_security_token.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T05:41:16.090

您需要使用密码添加您的 salesforce 帐户安全令牌，例如。密码 - “testing” 安全令牌 - “2321njjn32j32” 您需要通过 - “testing2321njjn32j32”

这将正常工作。

# java - oracle.xdb.XMLType 无法转换为 java.lang.String 错误

> ID：15416366
> 
> 赞同：0
> 
> 时间：2013-03-14T17:38:00.617
> 
> 标签：java, jakarta-ee, jpa, eclipselink

我正在使用 JPA 从 Oracle XMLType 列中检索数据。我创建了一个定制器：

```
@Override
public void customize(final ClassDescriptor descriptor) throws Exception {
    descriptor.removeMappingForAttributeName("content");
    DirectToXMLTypeMapping mapping = new DirectToXMLTypeMapping();
    mapping.setAttributeName("content"); //name of the atribute on the Entity Bean
    mapping.setFieldName("CONTENT"); //name of the data base column
    mapping.getField().setColumnDefinition("XMLTYPE");
    descriptor.addMapping(mapping);
} 
```

我的实体类中的列是：

```
@Basic(optional = false)
@NotNull
@Lob
//@Column(name = "CONTENT", columnDefinition="XMLTYPE")    
private String content; 
```

但是，当我运行我的程序时，我收到错误“ `java.lang.ClassCastException: oracle.xdb.XMLType cannot be cast to java.lang.String at entities.Sqdocument._persistence_set(Sqdocument.java) at org.eclipse.persistence.internal.descriptors.PersistenceObjectAttributeAccessor.setAttributeValueInObject(PersistenceObjectAttributeAccessor.java:46) at org.eclipse.persistence.mappings.DatabaseMapping.setAttributeValueInObject(DatabaseMapping.java:1532) at org.eclipse.persistence.mappings.DatabaseMapping.readFromRowIntoObject(DatabaseMapping.java:1423) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildAttributesIntoObject(ObjectBuilder.java:448) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:803) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:607) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:564) at org.eclipse.persistence.queries.ObjectLevelReadQuery.buildObject(ObjectLevelReadQuery.java:777) at org.eclipse.persistence.queries.ReadObjectQuery.executeObjectLevelReadQuery(ReadObjectQuery.java:462) at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1150) at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852) at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1109) at org.eclipse.persistence.queries.ReadObjectQuery.execute(ReadObjectQuery.java:421) at org.eclipse.persistence.internal.sessions.AbstractSession.internalExecuteQuery(AbstractSession.java:2946) at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1602) at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1584) at org.eclipse.persistence.internal.indirection.NoIndirectionPolicy.valueFromQuery(NoIndirectionPolicy.java:323) at org.eclipse.persistence.mappings.ForeignReferenceMapping.valueFromRowInternal(ForeignReferenceMapping.java:2135) at org.eclipse.persistence.mappings.OneToOneMapping.valueFromRowInternal(OneToOneMapping.java:1716) at org.eclipse.persistence.mappings.ForeignReferenceMapping.valueFromRow(ForeignReferenceMapping.java:2024) at org.eclipse.persistence.mappings.ForeignReferenceMapping.readFromRowIntoObject(ForeignReferenceMapping.java:1369) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildAttributesIntoObject(ObjectBuilder.java:448) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:803) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildWorkingCopyCloneNormally(ObjectBuilder.java:719) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObjectInUnitOfWork(ObjectBuilder.java:672) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:605) at org.eclipse.persistence.internal.descriptors.ObjectBuilder.buildObject(ObjectBuilder.java:564) at org.eclipse.persistence.queries.ObjectLevelReadQuery.buildObject(ObjectLevelReadQuery.java:777) at org.eclipse.persistence.queries.ReadAllQuery.registerResultInUnitOfWork(ReadAllQuery.java:783) at org.eclipse.persistence.queries.ReadAllQuery.executeObjectLevelReadQuery(ReadAllQuery.java:434) at org.eclipse.persistence.queries.ObjectLevelReadQuery.executeDatabaseQuery(ObjectLevelReadQuery.java:1150) at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:852) at org.eclipse.persistence.queries.ObjectLevelReadQuery.execute(ObjectLevelReadQuery.java:1109) at org.eclipse.persistence.queries.ReadAllQuery.execute(ReadAllQuery.java:393)` ”可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T16:54:10.530

Eclipselink 正在成功检索 XML 类型。问题是 XMLType 不是 String 的实例，因此无法自动转换。

您需要编写一个转换器来在 XMLType 和 String 之间进行转换。如果您想以任何方式更改数据，您还需要编写从 String 到 XMLType 的转换器的另一端。

查看[Conversions and Converters](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Mapping/Basic_Mappings/Default_Conversions_and_Converters)以获取编写转换器的帮助。

# actionscript-3 - ActionScript 3 鼠标移动时没有鼠标点击

> ID：15416369
> 
> 赞同：0
> 
> 时间：2013-03-14T17:38:09.043
> 
> 标签：actionscript-3, mobile, mousemove, touch-event, mouseclick-event

我在滚动条中有不同的元素：

```
protected var theScroll:Scroller = new Scroller(); 
```

每个元素都有一个 EventetListener：

```
mc1.addEventListener(MouseEvent.MOUSE_DOWN, showMC, false, 0, true); 
```

如果用户想要滚动元素，则调用 EventListener 并且用户无法滚动。

如何检查用户是否想要滚动或单击？

有任何想法吗？

最好的珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:46:46.137

在鼠标按下处理程序的元素中设置鼠标按下标志，如果该布尔标志为真并且您有鼠标**移动**事件（在鼠标移动处理程序处检查它），则表示用户正在尝试拖动。当鼠标上升时不要忘记重置标志。仅供参考：Flex 有一个拖动事件。

# ios - UICollectionView deleteItemsAtIndexPaths 不能正确地为补充视图设置动画

> ID：15416384
> 
> 赞同：2
> 
> 时间：2013-03-14T17:38:42.353
> 
> 标签：ios, uicollectionview

（以下更新）

当我从我的集合视图中的某个部分（例如，第 0 部分）中删除项目时，我发现补充视图（在本例中为 UICollectionViewFlowLayout 的标题）随着第 0 部分中的单元格动画消失并且“重复”后面的部分与它们一起动画以匹配弹出的部分。

当然，那些突然出现的可能是“重复”，但这并不重要。就像集合视图可以看到未来！然后正在赶上自己。这就是动画的感觉。

你知道是否有一些怪癖或错误或简单的修复来抑制这个额外的弹出补充视图？

更新：我注意到这也发生在单元格中，而不仅仅是部分，而且它似乎“加倍”了屏幕上底部的几个单元格和部分。当我从零部分中删除单元格时，它下面的一些部分和单元格会正确动画而没有重复，但超过某个点时，它们会弹出。约束问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:14:44.047

这是 UICollectionViewFlowLayout 的错误。无论出于何种原因，UICollectionViewFlowLayout 都无法正确地为不在屏幕上的单元格设置动画。

我已经做了两个解决这个问题的解决方法，但没有一个可以完全解决它。第一种是人为地增加集合视图的框架，以便它创建动画所需的单元格，从而在数据更改时正确动画。这有点小技巧，并不适用于所有情况。

另一种选择是从头开始编写自己的流布局。这对我有用，复杂性完全取决于你的布局有多复杂。这是我用于编写自己的流程布局的示例：[https ://github.com/chiahsien/UICollectionViewWaterfallLayout](https://github.com/chiahsien/UICollectionViewWaterfallLayout)

# python - 如何防止 sqlalchemy 为 CTE 的列名添加前缀？

> ID：15416389
> 
> 赞同：1
> 
> 时间：2013-03-14T17:39:02.710
> 
> 标签：python, python-2.7, sqlalchemy

考虑以下通过 SQLAlchemy 编码的查询。

```
# Create a CTE that performs a join and gets some values
x_cte = session.query(SomeTable.col1
                     ,OtherTable.col5
                     ) \
               .select_from(SomeTable) \
               .join(OtherTable, SomeTable.col2 == OtherTable.col3)
               .filter(OtherTable.col6 == 34)
               .cte(name='x')

# Create a subquery that splits the CTE based on the value of col1
# and computes the quartile for positive col1 and assigns a dummy
# "quartile" for negative and zero col1
subquery = session.query(x_cte
                        ,literal('-1', sqlalchemy.INTEGER).label('quartile')
                        ) \
                  .filter(x_cte.col1 <= 0)
                  .union_all(session.query(x_cte
                                          ,sqlalchemy.func.ntile(4).over(order_by=x_cte.col1).label('quartile')
                                          )
                                    .filter(x_cte.col1 > 0)
                            ) \
               .subquery()

# Compute some aggregate values for each quartile
result = session.query(sqlalchemy.func.avg(subquery.columns.x_col1)
                      ,sqlalchemy.func.avg(subquery.columns.x_col5)
                      ,subquery.columns.x_quartile
                      ) \
                .group_by(subquery.columns.x_quartile) \
                .all() 
```

对不起，这与我的真实查询相似。在我的真实代码中，我为我的 CTE 赋予了一个更具描述性的名称，并且我的 CTE 有更多的列，我必须为其计算平均值。（它实际上也是由 CTE 中的一列加权的加权平均值。）

真正的“问题”纯粹是试图让我的代码更清晰、更短。（是的，我知道。这个查询已经是一个怪物并且难以阅读，但客户坚持认为这些数据是可用的。）请注意，在最终查询中，我必须将我的列称为`subquery.columns.x_[column name]`; 这是因为 SQLAlchemy 在我的列名前面加上 CTE 名称。我只想让 SQLAlchemy 在生成列名时省略我的 CTE 名称，但由于我有很多列，我不想在我的子查询中单独列出它们。去掉 CTE 名称会使我的列名（它们本身足够长）更短且更易读；我可以保证这些列是唯一的。我怎样才能做到这一点？

将 Python 2.7.3 与 SQLAlchemy 0.7.10 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:25:04.210

您并不太具体这里的“x_”是什么，但如果这是最终结果，请使用 label() 为结果列指定您想要的任何名称：

```
row = session.query(func.avg(foo).label('foo_avg'), func.avg(bar).label('bar_avg')).first()
foo_avg = row['foo_avg']  # indexed access
bar_avg = row.bar_avg     # attribute access 
```

编辑：我无法在这里重现“x_”。这是一个测试：

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()

class A(Base):
    __tablename__ = "a"

    id = Column(Integer, primary_key=True)

    x = Column(Integer)
    y = Column(Integer)

s = Session()

subq = s.query(A).cte(name='x')

subq2 = s.query(subq, (subq.c.x + subq.c.y)).filter(A.x == subq.c.x).subquery()

print s.query(A).join(subq2, A.id == subq2.c.id).\
        filter(subq2.c.x == A.x, subq2.c.y == A.y) 
```

上面，你可以看到我可以`subq2.c.<colname>`毫无问题地参考，没有“x”前缀。如果您可以指定 SQLAlchemy 版本信息并完整填写您的示例，我可以按原样运行它以重现您的问题。

# java - JAVAFX 中的 Webkit 更新

> ID：15416397
> 
> 赞同：3
> 
> 时间：2013-03-14T17:39:18.480
> 
> 标签：java, webview, webkit, javafx-2

是否可以在**javafx** * *netbeans* *中更新**webkit**？

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:47:43.043

开源软件组件的源代码：JavaFX

[修改后的 Webkit 源代码](http://www.oracle.com/technetwork/opensource/webkit-1667084.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T21:47:29.180

[Java 快照版本](http://jdk8.java.net/download.html)通常使用比[Java 标准版本](http://www.oracle.com/technetwork/java/javase/downloads/index.html)更新的 webkit 版本，因此您可以尝试快照版本并查看它是否公开了您寻求的 WebKit 功能。

* * *

JavaFX 团队目前没有提供关于如何将更新或修改的 WebKit 版本集成到 JavaFX 的说明。我认为这样做的任何尝试都需要将 JavaFX Web 节点的 Java 部分开源，因为 Web 节点的 Java 代码和本机代码之间可能存在基于 JNI 的紧密集成。当 JavaFX Web 节点完全开源时，可能会提供这样的说明。您可以从[open-jfx 邮件列表](http://mail.openjdk.java.net/mailman/listinfo/openjfx-dev)中请求有关如何执行此操作的详细信息，以及完整开源的 eta。***

# javascript - 在使用 jQuery on() 时在 Ajax 之后取消设置事件处理

> ID：15416398
> 
> 赞同：1
> 
> 时间：2013-03-14T17:39:20.590
> 
> 标签：javascript, jquery, ajax, events, event-handling

如果通过正常的页面加载加载，下面的 JS 代码可以正常工作。但是，如果包含此代码的页面通过 Ajax 刷新，则`click`注册多次，每次通过 Ajax 刷新页面时注册一次。`console.log`您可以通过“已保存”一词的打印次数或“#SavedBtn clicked”消息出现的次数来判断这一点。

当通过 Ajax 加载页面时，是否有某种方法可以取消设置点击处理程序？

HTML：

```
<button type='button' id='saveBtn'></button> 
```

JS：

```
$(document.body).on('click', '#saveBtn', function(){
    var t='<span class="savedSpan">Saved</span>';
    $(this).after(t);
    console.log('#saveBtn clicked');
    $('.savedSpan').animate({
        color: "#FFF4D2"
        }, 1000).fadeOut();                           
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:41:16.903

你可以在打电话[`off()`](http://api.jquery.com/off/)之前先打电话给[`on()`](http://api.jquery.com/on/)。这将在添加另一个处理程序之前删除处理程序。

代码可能如下所示：

```
$(document.body).off('click', '#saveBtn');
$(document.body).on('click', '#saveBtn', function(){
    var t='<span class="savedSpan">Saved</span>';
    $(this).after(t);
    console.log('#saveBtn clicked');
    $('.savedSpan').animate({
        color: "#FFF4D2"
        }, 1000).fadeOut();                           
}); 
```

# python - python fnmatch找不到文件

> ID：15416401
> 
> 赞同：0
> 
> 时间：2013-03-14T17:39:25.593
> 
> 标签：python, regex, csv

我有一个包含一堆子目录的目录，每个子目录都有许多 csv 文件，但我只对某些 csv 文件感兴趣。所以我写了以下python方法，但我无法捕获文件名，如果我这样做 *.csv 它会找到所有文件，但我不想读取所有文件：

```
def gatherStats(template_file, csv_file):
    for lang in getLanguageCodes(csv_file):
        lang_dir = os.path.join(template_file, lang)
        try:
            for file in os.listdir(lang_dir):
                if fnmatch.fnmatch(file, '*-*-template-users-data.csv'):
                    t_file = open(file, 'rb').read()
                    reader = csv.reader()
                    for row in reader:
                        print row
                else:
                    print "didn't find the file"
        except Exception, e:
            logging.exception(e) 
```

我在这里做错了什么？是正则表达式的问题吗？我们可以在 fnmath 中使用正则表达式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:50:12.430

您的代码有几个问题。首先修复它们，然后我们可能会深入了解您的问题到底是什么。

*   首先，不要使用内置名称作为变量，例如`file`. 而是将其替换为`filename`.
*   然后`os.path.join(lang_dir, filename)`在打开文件之前。意义：

    ```
    t_file = open(os.path.join(lang_dir, filename), 'rb').read() 
    ```

*   `reader = csv.reader()`如果您没有在这一行中引用您打开的文件对象，您希望如何读取您的文件？

*   你的`try`/`except`块对我来说有点太宽了。花点时间缩小实际可能发生的错误。然后决定哪些是你想忽略的，哪些应该让你的程序崩溃。仔细看看这个块中实际抛出的异常。你可能会在那里找到你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:14:55.767

在另一个用户提供的帮助下，我设法解决了这个问题。我把这个答案放在这里，以供社区将来参考。

```
def gatherStats(template_file, csv_file):
    for lang in getLanguageCodes(csv_file):
        lang_dir = os.path.join(template_file, lang)
        try:
            for filename in os.listdir(lang_dir):
                path = os.path.join(lang_dir, filename)
                if re.search(r'-.+-template-users-data.csv$',filename):
                    with open(path, 'rb') as template_user_data_file:
                        reader = csv.reader(template_user_data_file)
                        try:
                            for row in reader:
                                print row
                        except csv.ERROR as e:
                            logging.error(e)
                else:
                    print "didn't find the file"
        except Exception, e:
            logging.exception(e) 
```

# mysql - 从与主 ID 键链接的其他表中添加名称

> ID：15416407
> 
> 赞同：0
> 
> 时间：2013-03-14T17:40:06.877
> 
> 标签：mysql, sql

我有 3 张桌子，分别称为 Doctor、Appointment 和 Person。我需要将医生的姓名添加到以下结果中：

![在此处输入图像描述](../Images/cdc5de6aa09d03ec2aec76e9798778b5.png)

使用此代码：

```
SELECT doctor.doctor_id, COUNT(appointment.appt_time) AS No_APP 
FROM doctor
LEFT JOIN appointment 
ON appointment.doctor_id = doctor.doctor_id
GROUP BY doctor.doctor_id; 
```

我可以对其进行哪些修改，以便我可以使用它的医生姓名，这是我的表格列表（名称在带有医生 ID 的人员表中）：

![在此处输入图像描述](../Images/ca81c394ded80a8a2ca6ffc57b7141ac.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:43:11.053

```
SELECT
    doctor.doctor_id,
    person.last_name,
    COUNT(appointment.appt_time) AS No_APP 
FROM
    doctor
LEFT JOIN
    appointment  ON appointment.doctor_id = doctor.doctor_id
LEFT JOIN
    person  ON doctor.doctor_id = person.person_id
GROUP BY
    doctor.doctor_id,
    person.last_name; 
```

或者你甚至可以跳过`doctor`表格：

```
SELECT
    person.person_id,
    person.last_name,
    COUNT(appointment.appt_time) AS No_APP 
FROM
    person
LEFT JOIN
    appointment ON appointment.doctor_id = person.person_id
GROUP BY
    person.person_id,
    person.last_name; 
```

# python - python json对象动态层次结构级别

> ID：15416409
> 
> 赞同：0
> 
> 时间：2013-03-14T17:40:31.553
> 
> 标签：python, json

```
a={'1':{'2':{'3':'4'}}}

for something in range(0,some_input): # a forloop
    print something_x 
```

我需要“print something_x”是这样的..

```
for loop1 -> {'2':{'3':'4'}}
for loop2 -> {'3':'4'}
for loop3 -> {'4'} 
```

something_x 必须是循环 1 中的 a['1'] 和循环 2 中的 a['1']['2'] 等等

问题是我得到了一些数字，其中一个数字告诉我我需要根据变量替换/编辑/添加 json 对象中的哪个层次结构。

我可以尝试创建副本然后替换它们或尝试递归方式，但我可能会得到 ctrl+c 中断并且不想丢失我到目前为止已经编辑过的数据

我也尝试过动态创建变量名，比如

```
 zzz="a['1']['2']"
    eval(zzz) 
```

我知道这不是最好的方法

无论如何要在json对象的前面动态添加一个键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:51:48.167

在您的具体示例中，您可以使用指向字典越来越深的指针：

```
In [33]: a = {'1': {'2': {'3': '4'}}}

In [34]: pointer = a

In [35]: for key in range(1, 4):
   ....:     print pointer[str(key)]
   ....:     pointer = pointer[str(key)]
   ....:
{'2': {'3': '4'}}
{'3': '4'}
4 
```

不确定更大的图景是什么（以及它与 JSON 有什么关系）。

# eclipse - 如何以编程方式更改 Eclipse 中的帮助内容？

> ID：15416410
> 
> 赞同：1
> 
> 时间：2013-03-14T17:40:32.057
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

我有一个 Eclipse 插件，我想根据我定义的变量以编程方式禁用帮助内容 TOC。简而言之，如果特定类型的用户正在访问插件，我想防止某些帮助文档出现在帮助内容中。

最好我想在某处的 ApplicationWorkbenchAdvisor 中执行此操作。

如果设置了变量，一种想法是将“主要”值修改为假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T22:41:27.977

不确定它是否会起作用，但请尝试使用`org.eclipse.ui.activities`扩展点。[Vogella](http://www.vogella.com/blog/2009/07/13/eclipse-activities/)的教程告诉我们可以只隐藏 UI 元素，如向导、视图等，但它是从 2009 年开始的。不确定现在是否可以隐藏 TOC。如果您尝试一下，很高兴提供反馈；）

# c++ - 指针递增和递减

> ID：15416416
> 
> 赞同：0
> 
> 时间：2013-03-14T17:40:39.993
> 
> 标签：c++, pointers, turbo-c++

我正在解决老师给我的一个问题，但遇到了一个小问题。我应该给出以下代码的输出：（它是用 Turbo C++ 编写的）

```
#include<iostream.h>
void main()
{
    char *p = "School";
    char c;
    c=++(*(p++));
    cout<<c<<","<<p<<endl;
    cout<<p<<","<<++(*(p--))<<","<<++(*(p++))<<endl;

} 
```

程序给出的输出是：

```
T,chool
ijool,j,i 
```

我得到了指针*本身*递增然后递增*指针指向的值的部分*。但我没有得到字符串打印出**ijool的部分**

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:59:39.677

您展示的程序是非标准且格式错误的（不应编译）。

“小”问题：

*   C++ 中输入/输出流的正确标头是`<iostream>`, 不是`<iostream.h>`
*   `main()`返回一个`int`，而不是一个`void`。
*   `cout`and`endl`不能`using namespace std;`在文件开头没有 a 使用，或者更好：使用`std::cout`and `std::endl`。

“核心”问题：

*   `char* p = "School";`是指向字符串字面量的指针。此转换在 C++03 中有效，在 C++11 中已弃用。除此之外，通常字符串文字是只读的，并且尝试修改它们通常会导致段错误（并且修改字符串文字在标准中是未定义的行为）。因此，**每次使用时都有未定义的行为`p`**，因为您修改了它指向的内容，即字符串字面量。
*   **更微妙的**（和实际的解释）：你`p`在行中修改了几次`std::cout<<p<<","<<++(*(p--))<<","<<++(*(p++))<<std::endl;`。这是未定义的行为。用于操作的顺序`p`没有定义，这里似乎编译器从右边开始。您可以查看[序列点、之前/之后](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points)的序列以获得更好的解释。

您可能对[此处的实时代码](http://ideone.com/cnoAMX)感兴趣，这更像您对程序的期望。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T17:54:56.310

假设您正确：

1.  标题到`<iostream>`- 没有`iostream.h`标题
2.  您分别使用`cout`and `endl`with`std::cout`和`std::endl`
3.  `main`to的返回类型`int`

好的，

```
char *p = "School"; 
```

字符串文字`"School"`的类型为“array of 7 `const` `char`”。转换为`char*`C++03 中已弃用。在 C++11 中，这是无效的。

```
c=++(*(p++)); 
```

在这里，我们遇到了未定义的行为。正如我之前所说，`char`字符串文字中的 s 是`const`. 您根本无法修改它们。此处的前缀`++`将尝试修改`S`字符串文字中的字符。

所以从现在开始，猜测应该发生什么是没有用的。你有未定义的行为。任何事情都有可能发生。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T18:00:10.663

即使前面的行是合法的，这行也是未定义的行为，这意味着您无法准确预测输出将是什么：

```
cout<<p<<","<<++(*(p--))<<","<<++(*(p++))<<endl; 
```

请注意它如何修改该`p`行上多次的值（实际上是在序列点之间）？这是不允许的。充其量你可以说“在这个带有这个运行时库和这个环境的编译器上，在这个执行时刻我观察到了以下行为”，但是因为它是未定义的行为，你不能指望它每次都做同样的事情您运行程序，或者即使在程序的同一运行中多次遇到相同的代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T18:09:08.330

这段代码至少存在三个问题（也许更多；我不是 C++ 专家）。

第一个问题是不应修改字符串常量，因为它们可以放置在程序内存的只读部分中，操作系统直接映射到磁盘上的 exe 文件（操作系统可能在相同的几个运行实例之间共享它们例如程序，或者避免在 RAM 低时将那些需要写入交换文件的内存部分，因为它知道它可以从 exe 中获取原始文件）。例如，该示例在我的编译器上崩溃。要修改字符串，您应该分配字符串的可修改副本，例如使用[strdup](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)。

第二个问题是它在没有声明的情况下使用`cout`和`endl`来自命名空间。`std`您应该为他们的访问添加前缀`std::`或添加`using namespace std;`声明。

第三个问题是第二行上的操作发生的顺序`cout`是未定义的行为，导致字符串在第一行末尾`cout`和下一行显示的时间之间发生了明显的神秘变化。

由于此代码不打算做任何特别的事情，因此您可以使用不同的有效方法来修复它。这可能会运行：

```
#include <iostream>
#include <string.h>
#include <stdlib.h>

using namespace std;

int main()
{
    char *string = strdup("School");
    char *p = string;
    char c;
    c=++(*(p++));
    cout<<c<<","<<p<<endl;
    cout<<p<<","<<++(*(p--))<<","<<++(*(p++))<<endl;
    free(string);
} 
```

（在我的编译器上输出：`T,chool`，`diool,i,d`。）

它仍然有未定义的行为。`cout`要解决此问题，请按如下方式修改第二行：

```
cout << p << ",";
cout << ++(*(p--)) << ",";
cout << ++(*(p++)) << endl; 
```

那应该给出`T,chool`, `chool,d,U`（假设一个字符集按顺序从 A 到 Z）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T17:47:44.720

1.  p++ 将 p 的位置从“学校”移动到“学校”。在此之前，因为它是 p++，而不是 ++p，所以它增加了 char 的值。现在 c = "T" 从 "S"
2.  当您输出 p 时，您会输出 p 的其余部分，我们之前将其标识为“chool”。
3.  由于最好从反复试验中学习，因此请使用调试器运行此代码。这是一个伟大的工具，将永远跟随你。这将有助于第二组 cout 语句。如果您需要有关 gdb 或 VS 调试器的帮助，我们可以逐步完成。

# ios - 通过滑动详细视图增加 coredata 详细视图

> ID：15416417
> 
> 赞同：1
> 
> 时间：2013-03-14T17:40:41.240
> 
> 标签：ios, core-data, nsfetchedresultscontroller

一段时间以来，我一直在努力寻找这个问题的答案。

我有一个 coredata 表，当我从该表中选择一个实体时，会推送一个详细视图，其中包含详细视图控制器中的所有信息。

我希望详细视图在滑动时只刷新下一个对象的详细信息。有没有人看过这个函数的教程或示例代码？

我找到了这个部分教程，但是对于我不知道从哪里开始的部分有很多缺失的解释：http: [//craigcoded.com/2010/10/05/accessing-nsfetchedresultscontroller-results-on-the -uitableview的详细视图/](http://craigcoded.com/2010/10/05/accessing-nsfetchedresultscontroller-results-on-the-detail-view-of-a-uitableview/)

这看起来应该放在 tableViewController 中，而不是 detailViewController 中。

提前致谢。迈克尔

它包括这个递减逻辑：

```
NSUInteger rowIndex = [[self storyIndex] row];
NSUInteger sectionIndex = [[self storyIndex] section];

if (rowIndex > 0) {
 rowIndex--;
} else if (sectionIndex > 0) {
sectionIndex--;
rowIndex = [[[[fetchedResultsController sections] objectAtIndex:sectionIndex] objects] count] - 1;
}

storyIndex = [NSIndexPath indexPathForRow:rowIndex inSection:sectionIndex];

Story *story = [fetchedResultsController objectAtIndexPath:storyIndex];
[self setupToolbarForStory:story];
[storyView setStory:story];
[storyView setNeedsDisplay]; 
```

这个增量逻辑：

```
NSUInteger rowIndex = [[self storyIndex] row];
NSUInteger sectionIndex = [[self storyIndex] section];

if (rowIndex < [[[[fetchedResultsController sections] objectAtIndex:sectionIndex] objects] count] - 1) {
 rowIndex++;
} else if (sectionIndex < [[fetchedResultsController sections] count] - 1) {
 sectionIndex++;
 rowIndex = 0;
}

storyIndex = [NSIndexPath indexPathForRow:rowIndex inSection:sectionIndex];

Story *story = [fetchedResultsController objectAtIndexPath:storyIndex];
[self setupToolbarForStory:story];
[storyView setStory:story];
[storyView setNeedsDisplay]; 
```

# express - 检测是否有人从常规 Node.js 应用程序登录到 Meteor

> ID：15416418
> 
> 赞同：0
> 
> 时间：2013-03-14T17:40:41.380
> 
> 标签：express, meteor

有没有办法让我检查是否有人从 Meteor 外部登录到 Meteor；例如，来自 Express.js 应用程序？我想从 Express 应用程序中知道当前登录的用户是谁在特定客户端上，这样如果调用了 API，我们就会知道将 API 调用的结果应用到谁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:07:51.483

所以这是最好的两部分。

**一种在meteor中检查用户是否在线的方法**

您可能可以使用流星智能包（[社区包回购](http://atmosphere.meteor.com)）来做到这一点：[https ://github.com/erundook/meteor-profile-online](https://github.com/erundook/meteor-profile-online)

确保你有[陨石](https://github.com/oortcloud/meteorite)，通过安装`npm install meteorite -g`

在您的包回购中使用：`mrt add profile-online`

**使用 Express 访问流星的数据**

要访问 Express 中的内容，您需要一个 DDP 客户端，我知道这个可以与 pre1（[Meteor 0.57+ 的 DDP](http://www.meteor.com/blog/2013/02/22/meteor-057-major-scaling-update-new-ddp-version-ejson)版本）一起使用：[https ://github.com/EventedMind/node-ddp-client](https://github.com/EventedMind/node-ddp-client)

你可以有一个在流星中检查你的方法

**服务器js（流星）**

```
Meteor.methods({
    'isonline: function(id) { 
        return Meteor.users.find(id).profile.online;
    }
} 
```

**表达：**

```
var client = new DDPClient({
    host: "localhost",
    port: 3000
});

userid = '1' //The user _id of the person you want to check
client.connect(function () {
   console.log("Connected to Meteor at localhost:3000");
   client.call("isonline", [userid], function(err,result) {
        client.close();
            if(!err) {
                if(result) {
                    console.log("User " + userid + " is online");
                }
                else
                {
                    console.log("That user isn't online");
                }
            }
            else
            {
                console.log(err)
            }
   });
}); 
```

# android - 如何从 Facebook 获取 ParseUser 的名称？

> ID：15416419
> 
> 赞同：2
> 
> 时间：2013-03-14T17:40:41.820
> 
> 标签：android, facebook, facebook-graph-api, login

我在尝试获取通过 Facebook 登录的 Parse 用户的名称时遇到了很大的问题。

登录工作正常，我可以在解析数据浏览器上看到用户令牌， ParseUser.getCurrentUser 返回一个 ParseUser 和所有，但我不知道我可以从 facebook 获取用户名吗？

到目前为止我的代码是

```
ParseFacebookUtils.logIn(C_RegisterLogin.this, new LogInCallback()
{
    @Override
    public void done(ParseUser user, ParseException err)
    {
        progressdialog.dismiss();

        if (user == null)
        {
            Toast toast = Toast.makeText(getApplicationContext(), "Login via Facebook failed!", Toast.LENGTH_LONG);
            toast.setGravity(Gravity.TOP, 0, 20);
            toast.show();
        }
        else
        {
            if (user.isNew())
            {
            }

            List args = new ArrayList<String>();
            args.add("name");
            JSONObject result = new JSONObject(ParseFacebookUtils.getSession().requestNewReadPermissions(C_RegisterLogin.this, args);
            String facebookname = result.optString("name");

            Toast toast = Toast.makeText(getApplicationContext(), "Thanks, "+facebookname+". You are now successfully logged in!", Toast.LENGTH_LONG);
            toast.setGravity(Gravity.TOP, 0, 20);
            toast.show();
            finish();
            startActivity(new Intent(C_RegisterLogin.this, E_SelectJourney.class));
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:40:41.820

解决了它，只需要它使用来自 facebook 的 Request.executeMeRequestAsync ，并且对于它的会话参数，我使用会话 Parse 给我：D

```
if (ParseFacebookUtils.getSession().isOpened())
{
    Request.executeMeRequestAsync(ParseFacebookUtils.getSession(), new Request.GraphUserCallback()
    {
        @Override
        public void onCompleted(GraphUser user, Response response)
        {
            if (user != null)
            {
                progressdialog.dismiss();
                Toast toast = Toast.makeText(getApplicationContext(), "Thanks, " + user.getName() + ". You are now successfully logged in through Facebook!", Toast.LENGTH_LONG);
                toast.setGravity(Gravity.TOP, 0, 20);
                toast.show();
                finish();
                startActivity(new Intent(C_RegisterLogin.this, E_SelectJourney.class));
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T15:36:33.163

Request.executeMeRequestAsync 方法已被弃用，因此对于 facebook sdk 3.21，您需要使用

```
 if (ParseFacebookUtils.getSession().isOpened()){
Request.newMeRequest(ParseFacebookUtils.getSession(), new Request.GraphUserCallback()
{
    @Override
    public void onCompleted(GraphUser user, Response response)
    {
        if (user != null)
        {
            progressdialog.dismiss();
            Toast toast = Toast.makeText(getApplicationContext(), "Thanks, " + user.getName() + ". You are now successfully logged in through Facebook!", Toast.LENGTH_LONG);
            toast.setGravity(Gravity.TOP, 0, 20);
            toast.show();
            finish();
            startActivity(new Intent(C_RegisterLogin.this, E_SelectJourney.class));
        }
    }
}).executeAsync();} 
```

# android - 如何使用条形码扫描仪通过 WiFi 将数据发送到 PC

> ID：15416428
> 
> 赞同：0
> 
> 时间：2013-03-14T17:41:06.847
> 
> 标签：android, android-intent

是否可以在扫描后将 UPC 存储到您的 Android 设备（excel 或记事本），并能够通过 WiFi 将其发送到 PC？并让数据直接进入记事本或excel？

我正在使用 Android WiFi 扫描仪开发库存系统。请帮助我，因为我很难搜索这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-01T01:35:30.620

我实际上正在为我的工作做这个确切的项目！

我下载了一个名为 ScanPet 的应用程序！（您还需要下载 Barcode Scanner - 也是免费的，并且您不需要对应用程序执行任何操作）它将扫描条形码并自动存储序列号。然后，您可以手动输入其他几个字段，例如型号、价格、评论和其他一些字段。该应用程序将所有内容存储在一个 Excel 文档中，然后您可以通过电子邮件发送给自己。

如果您使用的是outlook，那么扫描收件箱，抓取附件，打开它，然后将excel文档中的数据输入到您的数据库中是相当容易的！如您所说，也可以设置批处理调用来安排任务！祝自动化的朋友好运！

# forms - ASP.NET MVC 4：提交时表单输入值始终为空

> ID：15416435
> 
> 赞同：3
> 
> 时间：2013-03-14T17:41:24.833
> 
> 标签：forms, asp.net-mvc-4, form-submit

我正在尝试构建简单的搜索实用程序，按姓氏搜索我的员工。

这是我的剃刀视图

```
 @using(Html.BeginForm("Index","Employee", FormMethod.Post))
{
    <p>
        Search employees by Last Name : @Html.TextBox("SearchString")
        <input type="submit" value="Submit" name="Search" />     
    </p>
} 
```

这是我的控制器

```
 // GET: /Employee/
    public ActionResult Index(string lastName)
    {
        var employees = db.Employees;
        if (!String.IsNullOrEmpty(lastName))
        {
            employees = employees.Where(p => p.LastName.ToUpper().Contains(lastName.ToUpper()));
        }            
        return View(employees.ToList());
    } 
```

调试显示提交按钮返回到 index 方法，但返回到 Index 方法的值 lastName 始终为 null。如何正确传递姓氏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:45:02.123

您的 `@Html.TextBox("SearchString")`名称和操作方法参数名称必须匹配。（搜索字符串）

```
[HttpPost]
public ActionResult Index(string SearchString)
{
    var employees = db.Employees;
    if (!String.IsNullOrEmpty(SearchString))
    {
        employees = employees.Where(p => p.LastName.ToUpper().Contains(SearchString.ToUpper()));
    }            
    return View(employees.ToList());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:44:51.237

您必须将变量命名`ActionResult`为与字段名称相同的名称，因此在您的示例中，将`TextBox`值设置为`lastName`或将变量命名`ActionResult Index`为`SearchString`

# objective-c - UIView 引用返回 NULL 指向的 ARC 已启用

> ID：15416436
> 
> 赞同：0
> 
> 时间：2013-03-14T17:41:25.190
> 
> 标签：objective-c, uiview, null, automatic-ref-counting

我启用了 ARC，所以我不确定为什么我的引用为空。

我的视图控制器在视图加载后立即实例化 UIView '<strong>theGrid'。

后来我在另一个调用 UIViewContoller `- (void) updateTheGrid:(id)sender`方法的类（MyOtherClass）中切换，该方法根据 NSLog 调用，但是当我输出 UIView 以查看它是否存在时，它返回 null。

我究竟做错了什么？我的印象是 ARC 跟上一切。我觉得我的麻烦来自 mm "MyOtherClass"， `ViewController * vc = [[ViewController alloc] init];`因为我觉得那只是创建一个新实例。但如果是这样的话，我想如何引用旧实例并调用该方法？

**NSLOG 输出**

```
[28853:c07] Intial Grid: <GridView: 0x8e423b0; frame = (0 0; 768 1024); layer = <CALayer: 0x8e43780>>
[28853:c07] Update The Grid (null) 
```

**GridView.h**

```
#import <UIKit/UIKit.h>

@interface GridView : UIView

- (void) gridUpdated;
@end 
```

**网格视图.m**

```
#import "GridView.h"
@implementation GridView

- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        NSLog(@"initWithFrame");

     }
    return self;
}

- (void)drawRect:(CGRect)rect{
   NSLog(@"Grid Draw Rect");
}

- (void) gridUpdated {
    NSLog(@"GRID VIEW.m : Grid update called");
    [self setNeedsDisplay];
}

@end 
```

**视图控制器.h**

```
#import <UIKit/UIKit.h>
#import "GridView.h"

@interface ViewController : UIViewController {
        GridView *theGrid;
}

@property (strong, retain) GridView * theGrid;
- (void) updateTheGrid : (id) sender;
@end 
```

**视图控制器.m**

```
#import "ViewController.h"
#import "GridView.h"

@interface ViewController () {}
@end

@implementation ViewController

@synthesize theGrid;

- (void)viewDidLoad {
    [super viewDidLoad];

    //draw the grid
    theGrid = [[GridView alloc] initWithFrame:self.view.frame];
    NSLog(@"Intial Grid: %@", theGrid);
    [self.view addSubview:theGrid];
}

- (void) updateTheGrid : (id) sender{
    NSLog(@"Update The Grid %@", theGrid);
    [theGrid gridUpdated];
}

@end 
```

**我的其他类.m**

```
- (void) mySwitch : (id) sender {
    ViewController * vc = [[ViewController alloc] init];
    [vc updateTheGrid:sender];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:33:45.880

不要`ViewController`在你的对象中再次分配对象，`MyOtherClass.m`因为它会创建一个新的实例，`ViewController`并且你以前持有的对象将`ViewController`被处置，包括 theGrid。

所以请在内部声明一个`weak`属性并在分配时分配它 `ViewController``MyOtherClass.m``MyOtherClass.m`

例子：

**视图控制器类**

```
moc = [[MyOtherClass alloc] initWithFrame:self.view.frame];

 moc.vc = self; 
```

**我的其他类.h**

```
@property(nonatomic,weak) ViewController *vc; 
```

**我的其他类.m**

```
- (void) mySwitch : (id) sender {

   [self.vc updateTheGrid:sender];

} 
```

注意：注意前向声明:)

# windows-phone-8 - 无法在 windows phone 8 上安装公司应用程序

> ID：15416437
> 
> 赞同：15
> 
> 时间：2013-03-14T17:41:27.693
> 
> 标签：windows-phone-8, code-signing, xap, code-signing-certificate

我们正在为 windows phone 8 开发公司应用程序。

[我已按照适用于 Windows Phone](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj206943%28v=vs.105%29.aspx)的公司应用程序分发中描述的每个步骤进行操作

这是我所做的：

*   注册公司账户
*   从赛门铁克购买了企业证书。
*   使用私钥导出的 PFX 文件
*   从 PFX 生成的注册令牌（AETX 文件）。
*   开发的应用程序，用 Visual Studio 构建并生成 xap 文件。（将其命名为 App.xap）
*   预编译托管程序集并使用 BuildMDILXap.ps1 powershell 脚本使用证书对其进行签名。（所有消息都表示成功）。
*   在我们的网络服务器上托管 AETX 和签名的 XAP 文件。

此时，当wp8手机尝试在未安装AETX的情况下下载XAP文件时，手机会给出正确的错误信息：“在安装此应用程序之前，您需要添加XXXX公司帐户。请联系您公司的支持人员寻求帮助”。

安装AETX后，当wp8手机尝试安装XAP文件时，手机要求确认：“Would you like to install App1 from XXXX?” 单击“安装”按钮后，没有任何反应。没有成功消息，没有错误消息，没有安装指示，并且应用程序未显示在应用程序列表中。

我还尝试通过电子邮件发送 AETX 和 XAP 文件（以防 Internet Explorer 或 iis 无法处理文件类型），结果相同。

我也尝试为我们的公司中心应用程序做同样的事情，同样的结果。

据我了解，公司中心应用程序只是另一个应用程序（当然用于不同的目的），普通应用程序和中心应用程序都可以以相同的方式分发（通过网址或电子邮件等），对吧？

怎么了？在这里找不到问题？有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T21:53:49.697

我敢打赌，您没有正确的代码签名设置。一个很容易错过的重要步骤是**安装企业代码签名证书的父证书**（您从赛门铁克获得）。具体来说，下载并导入以下两个证书，然后再次尝试对 XAP 文件进行签名。

[https://knowledge.verisign.com/library/VERISIGN/ALL_OTHER/Symantec_Enterprise_Mobile_Root_for_Microsoft.cer](https://knowledge.verisign.com/library/VERISIGN/ALL_OTHER/Symantec_Enterprise_Mobile_Root_for_Microsoft.cer) [https://knowledge.verisign.com/library/VERISIGN/ALL_OTHER/Symantec_Enterprise_Mobile_CA_for_Microsoft_Cert.cer](https://knowledge.verisign.com/library/VERISIGN/ALL_OTHER/Symantec_Enterprise_Mobile_CA_for_Microsoft_Cert.cer)

遗憾的是，签名工具没有报告任何错误，但输出不是 WP8 接受的正确签名的 XAP。

# git - 忽略一个目录...但不是一个或两个子目录

> ID：15416442
> 
> 赞同：2
> 
> 时间：2013-03-14T17:41:42.973
> 
> 标签：git, gitignore

我一直以为我知道如何忽略和否定模式，但我很难过。我有一个基线 Drupal 安装，我想忽略`sites/`文件夹中的所有内容，除了几个特定的​​子目录：`sites/all`和`sites/my-project`.

```
.vagrant
settings.php

# A directory set aside for user contributed assets
uploads/

# All we care about is sites/all and sites/my-project
www/sites/*
!www/sites/all
!www/sites/my-project 
```

鉴于项目根目录中的上述`.gitignore`文件，当我执行 a 时`git add .`，我得到了我所期望的一切`www/sites/all`，但没有从`www/sites/my-project`. 我在这里想念什么？我现在只关心一个文件 ( `www/sites/my-project/settings.sample.php`)，但我不明白为什么它没有像其他所有文件一样添加。

我知道我可以强迫它，但我想了解更大的问题。我在这里想念什么？不管它值多少钱，这是我最初的承诺。我不认为它有任何关系，但我也不知道它不重要。

**更新**

哎呀！看起来我关心的一个文件*被*忽略了（这可以解释为什么目录被忽略）。我不知道在哪里或为什么，但它给了我看的地方......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:00:01.787

我没有看到问题：

```
$ find .
.
./.gitignore
./www
./www/sites
./www/sites/ignored
./www/sites/ignored/file
./www/sites/my-project
./www/sites/my-project/file
./www/sites/my-project/settings.sample.php
./www/sites/all
./www/sites/all/file
$ git init
Initialized empty Git repository in /home/desert69/tmp/gitignore/.git/
$ cat .gitignore 
.vagrant
settings.php

# A directory set aside for user contributed assets
uploads/

# All we care about is sites/all and sites/my-project
www/sites/*
!www/sites/all
!www/sites/my-project
$ git add .
$ git status --short
A  .gitignore
A  www/sites/all/file
A  www/sites/my-project/file
A  www/sites/my-project/settings.sample.php
$ git --version
git version 1.7.10.4 
```

所以一切似乎都在工作。

尝试做一个`rm -rf .git/ && git init`以防万一您之前忽略或添加了任何其他文件。

我想也许 dot 有任何东西`settings.php`被解释为 an`*`所以它匹配`.sample.`，但似乎没有。

尝试删除并重新`init`生成存储库。

# wordpress - 多重警告：session_start() [function.session-start]

> ID：15416445
> 
> 赞同：1
> 
> 时间：2013-03-14T17:41:50.820
> 
> 标签：wordpress

我正在尝试帮助将第三方主题安装到 WordPress 安装中，当我单击“实时预览”或“激活”主题时收到以下三个错误代码：

> 警告：session_start() [function.session-start]: open(/var/chroot/home/content/66/5232766/tmp/sess_1n0eifrftmjfu96hop17kihi35, O_RDWR) failed: No such file or directory (2) in /home/content/第 461 行的 66/5232766/html/wp-content/themes/Drlawyer/functions.php
> 
> 警告：session_start() [function.session-start]：无法发送会话 cookie - 已发送的标头（输出开始于 /home/content/66/5232766/html/wp-content/themes/Drlawyer/functions.php:461 ) 在第 461 行的 /home/content/66/5232766/html/wp-content/themes/Drlawyer/functions.php
> 
> 警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /home/content/66/5232766/html/wp-content/themes/Drlawyer/functions.php:461 ) 在第 461 行的 /home/content/66/5232766/html/wp-content/themes/Drlawyer/functions.php

我该如何解决这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:18:11.663

尝试评论该行并删除您的添加

```
function cp_admin_init() // { if (!session_id()) session_start(); } 
```

如果这是 Godaddy 托管，您可能需要这样做（我一直遇到这个问题）将其添加到您的 php5.ini 文件中，然后您需要从 Godaddy 托管控制面板中终止所有进程，它会起作用。检查您的 phpinfo.php 文件以确保它已完成

```
upload_tmp_dir = /var/chroot/home/content/56/10594156/html/temp
session.save_path = /var/chroot/home/content/56/10594156/html/temp 
```

当然将路径更改为您的路径，然后在您的根目录中创建一个 /temp 目录，并且 CHMOD 777 Godaddy 由于某种原因与 tmp/ 目录有问题

# java - SpringMVC HTTP 状态 405 - 不支持请求方法“POST”

> ID：15416447
> 
> 赞同：4
> 
> 时间：2013-03-14T17:41:54.787
> 
> 标签：java, spring-mvc, http-post, http-status-code-405

我有一个表单，我从该表单查询数据库，并将结果发布到另一个页面。然后我从查询结果中选择一条记录，它会将我带回到我进行查询的页面，以便我可以更新记录。

我单击更新，这会将我带回控制器并返回第一次调用查询的相同方法，但是请求的参数现在是“更新”，因此假设转到方法中的更新条件。好像我无法将页面重新提交到相同的 url 映射。

**控制器**

```
 @RequestMapping(value="citizen_registration.htm", method = RequestMethod.POST)
    public ModelAndView handleRequest(@Valid @ModelAttribute Citizens citizen, 
            BindingResult result,  ModelMap m, Model model,
            @RequestParam(value="user_request") String user_request) throws Exception {

        try{
             logger.debug("In Http method for CitizenRegistrationController - Punishment Registration");
             logger.debug("User Request Is " + user_request);

                 if(result.hasErrors()){

                //handle errors

                    // return new ModelAndView("citizen_registration");
                 }else{

                     //check if its a save or an update

                     if(user_request.equals("Save"))
                        //do save

                        else if (user_request.equals("Query"))

                        //do query

                        else if (user_request.equals("Update"))
                        //do update

                }
    } 
```

**错误日志**

```
34789 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - Bound request context to thread: org.apache.catalina.connector.RequestFacade@2ba3ece5
34791 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - DispatcherServlet with name 'crimetrack' processing POST request for [/crimeTrack/getCitizen/citizen_registration.htm]
34792 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - Testing handler map [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping@3a089b3] in DispatcherServlet with name 'crimetrack'
34792 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  - Looking up handler method for path /getCitizen/citizen_registration.htm
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver  - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.mvc.annotation.ResponseStatusExceptionResolver  - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver  - Resolving exception from handler [null]: org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'POST' not supported
34796 [http-bio-8084-exec-3] WARN  org.springframework.web.servlet.PageNotFound  - Request method 'POST' not supported
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - Null ModelAndView returned to DispatcherServlet with name 'crimetrack': assuming HandlerAdapter completed request handling
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@2ba3ece5
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.servlet.DispatcherServlet  - Successfully completed request
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in WebApplicationContext for namespace 'crimetrack-servlet': ServletRequestHandledEvent: url=[/crimeTrack/getCitizen/citizen_registration.htm]; client=[127.0.0.1]; method=[POST]; servlet=[crimetrack]; session=[null]; user=[null]; time=[8ms]; status=[OK]
34796 [http-bio-8084-exec-3] DEBUG org.springframework.web.context.support.XmlWebApplicationContext  - Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/crimeTrack/getCitizen/citizen_registration.htm]; client=[127.0.0.1]; method=[POST]; servlet=[crimetrack]; session=[null]; user=[null]; time=[8ms]; status=[OK] 
```

**萤火虫**

检查 FireBug 我得到了`"NetworkError: 405 Method Not Allowed - http://localhost:8084/crimeTrack/getCitizen/citizen_registration.htm"`这个应该是`http://localhost:8084/crimeTrack`/citizen_registration.htm"`

getCitizen 是我在第一次执行查询时被带到的页面，它包含在 url 中。

我将 jsp 表单操作定义更改为，`<form:form id="citizenRegistration" name ="citizenRegistration" method="POST" commandName="citizens" action="<%=request.getContextPath()%>/citizen_registration.htm">`但是当我启动应用程序并向此页面发出请求时，我得到：

```
HTTP Status 500 - /WEB-INF/jsp/citizen_registration.jsp (line: 31, column: 116) attribute for %>" is not properly terminated 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:43:36.020

```
function submitPage(){
     document.getElementById("citizenRegistration").action="getCitizen/citizen_registration.htm";
     document.getElementById("citizenRegistration").target="_self";    
     document.getElementById("citizenRegistration").method = "POST";
     document.getElementById("citizenRegistration").submit();
} 
```

您可以调用上述方法。使用 onclick 绑定提交按钮的功能

# ios - UITextField 键盘：未输入文本时启用完成按钮

> ID：15416448
> 
> 赞同：4
> 
> 时间：2013-03-14T17:42:02.297
> 
> 标签：ios, uitextfield, uikeyboard

我的应用程序中有一个 UITextField。当用户选择它时，键盘会显示一个完成按钮。按下完成按钮可关闭键盘。但是完成按钮只有在用户输入文本后才会启用。我希望用户可以选择关闭键盘而不输入文本。是否可以在输入文本之前启用完成按钮？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T17:56:03.630

好的，我发现这可以通过取消选中 Attributes Inspector 中的 Auto-enable Return Key 属性来解决。

# objective-c - IBOutlet 未连接到情节提要

> ID：15416460
> 
> 赞同：0
> 
> 时间：2013-03-14T17:42:35.680
> 
> 标签：objective-c, xcode

我一直在涉足 XCode。我对它很陌生，但我一直在做一些教程。我正在运行 XCode 版本 4.6 (4H127)。

我一直在关注本教程：[http](http://www.youtube.com/watch?v=bGPJeYxWr3Y) ://www.youtube.com/watch?v= bGPJeYxWr3Y 并且在 4:36 时我被困住了，因为我的 IBOutlet 没有显示在弹出窗口中 - 有什么原因吗为什么不呢？

这是我的代码：

ViewController.h：[http](http://pastebin.com/ruJaXnKv) ://pastebin.com/ruJaXnKv ViewController.m：http : [//pastebin.com/rhKKastC](http://pastebin.com/rhKKastC)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:11:09.967

我发现它没有连接到正确的类。我认为它可能会默认这样做。

# ruby-on-rails - Rails 在生产服务器和本地生产模式下的压缩差异

> ID：15416465
> 
> 赞同：0
> 
> 时间：2013-03-14T17:42:58.977
> 
> 标签：ruby-on-rails

如果我将在 Rails 生产模式下运行的代码库的本地副本与在实际服务器上运行的相同代码库进行比较，并使用 Webkit Inspector 的“网络”选项卡来比较连接的 javascript 的大小，我在实时服务器上看到总共 36k 和 99k在以生产模式运行的本地副本上。

我一直小心地预编译我的资产，并且启用了 assets.compress = true。

奇怪的是，如果我检查连接的 JS，它在两种情况下都会被缩小。换句话说，它看起来像压缩正在通过资产管道发生......但报告的数字差异很大。

相关命令：

```
bundle exec rake assets:precompile
rails s -e production 
```

在配置中：

```
 config.assets.compress = true 
```

有什么理论吗？谢谢。

# css - CSS Sprite 未显示

> ID：15416467
> 
> 赞同：1
> 
> 时间：2013-03-14T17:43:13.457
> 
> 标签：css, sprite

我想把一张图片放在我博客的每篇文章的底部，但它没有显示出来。

该图像是我用来保存博客库存图像的较大“icons.png”文件的一部分，因此我决定将其作为精灵放入（因为无论如何我都必须为其他图标这样做）。

HTML：

```
<section class="footnote">
    <p>This article is my <?php echo numeral(article_id()); ?> oldest. It is <?php echo count_words(article_html()); ?> words long, and it’s got <?php echo total_comments() . pluralise(total_comments(), ' comment'); ?> for now. <?php echo article_custom_field('attribution'); ?></p>
    <div class="sprite article-ender" ></div>
</section> 
```

CSS：

```
.sprite {
    background-image: url(".../img/icons.png"); 
    display: block;
}
.sprite.article-ender {
    margin-top: 1em;
    background-position: -63px -563px;
    width: 46px;
    height: 99px;
} 
```

我不知道我做错了什么。我认为精灵相当简单，但这张图片根本没有出现。

我想也许图像 url 是错误的，但我很确定我的相对 URL 是正确的（是的新手在这里啊哈哈）——img 文件夹和我的 css 文件夹（样式表所在的位置）在同一个文件夹中。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:45:49.480

可能是图片网址前面的三个点？

# php - 自己网站的搜索引擎

> ID：15416470
> 
> 赞同：0
> 
> 时间：2013-03-14T17:43:19.487
> 
> 标签：php, html, search-engine

大家好，我正在尝试在我的网站上制作搜索引擎。搜索引擎必须在一个类别中浏览，搜索后必须显示所有结果。但是引擎不显示结果。

示例：X 用户正在 PC 游戏中搜索 Y 游戏。X 用户在文本区域输入游戏名称，然后单击按钮搜索。搜索脚本后不显示 Y 游戏的结果。这是我的脚本

```
<form action="search.php" method="POST">
<p><br />
<input name="q" type="hidden" />
<font color="black">Hunt Data:</font>
<input name="qfront" type="text" style="width: 230px" name="nume"id="nume" />
<select name="category">
<option value="0">All</option>
<option value="1">PC-Games</option>
<option value="2">Console</option>
<option value="3">Movies</option>
<option value="4">Music</option>
<option value="5">XXX</option>
<option value="6">Windows</option>
<option value="7">Linux</option>
<option value="8">Software</option>
<option value="9">Documents</option>
<input type="submit" value="Search" />
</p>
</form> 
```

PHP 脚本

```
<html>
<body>
<center>
<font color="black" size="4">
<?php
//define each directory here, the index starts with 0 == all and so on.
$categorydir = array('/Category/All/', '/Category/PCGames/', '/Category/Console/', '/Category/Movies/', '/Category/Music/', '/Category/XXX/', '/Category/Windows/', '/Category/Linux/', '/Category/Software/', '/Category/Documents/');
//if option selected and its valid number
if (isset($_POST['category'])) 
    if(ctype_digit($_POST['category']) && isset($categorydir[$_POST['category']])) {
        if(array_key_exists($_POST['category'], $categorydir) && is_dir($categorydir[$_POST['category']])) {
            $handle = opendir($categorydir[$_POST['category']]); //LINE 14
            $files = scandir($handle);
            echo 'Results of search:<br></br>';
            foreach($files as $file){ //LINE 17
                echo($file);
            }
        } else {
            echo 'target directory not found';
    }
}
?>
</font>
</center>
</body>
</html>
<html>
<head>
<title>DataHunters</title>
<link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
<div id="header">
<h1 id="logo"><a href="index.html">DataHunters</a>
</h1>
</div>
<div id="navigation">
<ul>
<li><a class="active" href="index.html">Home</li></a>
<li><a href="chat.html">Chat</li></a>
<li><a href="contact.html">Contact</li></a>
<li><a href="http://www.forum.datahunters.ro">Forum</li></a>
</ul>
</li>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:05:07.523

在这里，如果您觉得可以关闭它，我会将其作为答案发布。

> 我认为您的问题是 [`scandir`](http://php.net/manual/en/function.scandir.php)目录的字符串参数，而不是文件句柄。

正如人们所说，您真的应该花时间了解有关数据库的更多信息。网上有很多可用的教程，这几乎是任何类型的开发都需要具备的技能。MySQL 和 PDO 是一个很好的起点。

*   [http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)
*   [http://php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)
*   [http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/](http://net.tutsplus.com/tutorials/php/php-database-access-are-you-doing-it-correctly/)

祝你好运。

# iphone - 将 NSMutableArray 中的 NSString 连接到 NSString

> ID：15416472
> 
> 赞同：2
> 
> 时间：2013-03-14T17:43:22.537
> 
> 标签：iphone, xcode, nsstring, nsmutablearray, nsmutablestring

我需要创建一个`NSString`用于浏览 FTP 共享中的文件夹。我在 TableView 上显示目录，用户可以通过选择行来浏览

我将选定行的字符串写入可变数组，然后我需要在可变数组中创建一个包含所有字符串的字符串。表示选择行时将最后一个字符串添加到上一个字符串

例如数组中的第一个字符串是“Downloads”第二个“Movies”第三个“HD-Movies”......等等，我需要第一次选择行上的字符串“/Downloads/”第二次“/Downloads/Movies/”，第三个“/Downloads/Movies/HD-Movies”

我确定我需要一个`NSMutableString`，但不知道如何添加字符串...

这是我的代码的一部分：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

NSMutableArray *filePathArray = [[NSMutableArray alloc]init];
[filePathArray addObject:@"/Downloads/"];
[filePathArray addObject:[fileNameArray objectAtIndex:indexPath.row]];

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:48:31.957

你可以这样做：

```
NSString *string=[array componentsJoinedByString:@"/"]; 
```

这会给你：

> 下载/电影/高清电影

现在，如果您想`/`在前面添加一个`/`.

# css - 为什么 -webkit-box-flex 属性对此不起作用？

> ID：15416476
> 
> 赞同：1
> 
> 时间：2013-03-14T17:43:41.173
> 
> 标签：css, html, webkit, flexbox

我正在制作一个网站，我制作了一些按钮并向它们添加了 -webkit-box-flex 属性。它工作得很好。但是，当我向其中一个按钮添加下拉菜单时，-webkit-box-flex 属性不再适用于它们并且它不起作用。谁能告诉我发生了什么？

这是一个jsfiddle：

[http://jsfiddle.net/hGT6E/](http://jsfiddle.net/hGT6E/)

```
*{
margin: 0px;
padding: 0px;
 }

h1{
font: bold 20px PrimaSans BT;
 }

 h2{
font: italic 14px PrimaSans BT;
  }

header, section, footer, aside, nav, article, hgroup, ul, li{
 display: block;
 }

 #wrapper{
max-width: 1000px;
margin: 20px 0px;
display: -webkit-box;
display: -moz-box;
-webkit-box-orient: vertical;
-moz-box-orient: vertical;

-webkit-box-flex: 1;
-moz-box-flex: 1;
margin-left: auto ;
margin-right: auto ;
}

#searchbox{
float: right;
margin-bottom: 10px;
}

body{
width: 100%;
margin: 0;
display:-moz-box;
-moz-box-pack: center;
display:-webkit-box;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0,    `enter code here`#ffffff), color-stop(1, #bababa));
background-image: -moz-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#ffffff), color-stop(1, #bababa));
background-repeat: no-repeat;
background-attachment: fixed;
  }

 #navigation{
display: block;
padding: 10px;
margin: 5px;
margin-bottom: 0px;
-webkit-border-radius: 15px;
width: 800px;
height: 60px;
display: -webkit-box;
-webkit-box-orient: horizontal;
display: -moz-box;
-moz-box-orient: horizontal;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#ffffff), color-stop(1, #bababa));
background-image: -moz-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#ffffff), color-stop(1, #bababa));

 }

 #navigation li:hover ul{
display: block;
 }

 #navigation ul{
margin: 0px;
padding: 0px;
 }

 #navigation li{
position: relative;
float: left;
list-style-type: none;
 }

 #navigation ul:after{
display: block;
clear: both;
visibility: hidden;
 }

  #navigation li a{
text-decoration: none;
display: block;
color: black;
border-right: 1px solid grey;
padding: 10px 25px;

 }

  #navigation ul ul{
position: absolute;
border: 20px;
left: 0px;
width: 125px;
display: none;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#ffffff), color-stop(1, #bababa));
  }

  #navigation ul ul li{
border: 1px solid grey;
width: 99%;
-webkit-transition: background 2s
  }

   #navigation ul ul li:hover{
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#fffc01), color-stop(1, #ffde00));
  }

 #navigation ul ul li a{
border-right: none;
  }

  .navigation_button{
font: bold 18px PrimaSans BT;
-webkit-box-flex: 1;
width: 100px;
padding: 10px;
margin: 10px;
text-align: center;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#ffffff), color-stop(1, #bababa));
background-image: -moz-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#ffffff), color-stop(1, #bababa));
-webkit-border-radius: 10px;
-webkit-transition: -webkit-transform 2s, opacity 2s, background 2s, scale 2s,
  }

   .navigation_button:hover{
-webkit-transform: scale(1.05);
opacity: 1;
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#fffc01), color-stop(1, #ffde00));
background-image: -moz-gradient(linear, left top, left bottom, color-stop(0, `enter code here`#fffc01), color-stop(1, #ffde00));
 }

 #main_section{
border: 1px solid grey;
width: 750px;
margin-left: 40px;
margin-right: 30px;
border-top: 0px;
height: 800px;
margin-bottom: 10px;
-webkit-border-bottom-right-radius: 10px;
-webkit-border-bottom-left-radius: 10px;
background-color: #f1f1f1;
-webkit-box-flex: 1;
 }

 .article_1{
border: 1px solid gray;
background: white;
-webkit-box-flex: 1;
margin-left: 10px;
margin-right: 10px;
margin-top: 10px;
padding: 10px;
  }

  .article_1_footer{
text-align: right;
  }

  #footer{
text-align: center;
font: italic 12px Times New Roman
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:55:04.447

该`box-flex`属性（现代名称：）`flex`仅适用于*flex items*的项目。为了成为一个弹性项目，它的父元素必须是一个*弹性容器*（显示值为box/flexbox/flex）。元素的`.navigation_button`父元素是`ul#nav_menu`，它的显示类型是块。

[http://jsfiddle.net/hGT6E/1/](http://jsfiddle.net/hGT6E/1/)

```
#nav_menu {
    display: -webkit-box;
    width: 100%;
} 
```

我必须警告不要依赖这些可用的属性。它们来自 2009 年的 Flexbox 规范，并且可能会在不久的将来被删除。如果您需要它们支持旧的移动浏览器，请确保您还为每个属性提供现代版本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T19:09:55.180

就像 Cimmanon 之前解释的那样，

```
#parent {
    /* the parent has to be setup */
    display: -webkit-box;
    display: -moz-box;
    display: -o-box;
    display: box;
}

#child {
    /* for the child to behave correctly */
    -webkit-flex-box: 1;
    -moz-flex-box: 1;
    -o-flex-box: 1;
    flex-box: 1;
} 
```

您是否在不受支持的浏览器中查看它？

某些特定于供应商的前缀可能会丢失（相对于您的浏览器可访问性范围）。

这是一些使用 flex 的新学校示例方法（从[bennettfeely.com/flexplorer](http://bennettfeely.com/flexplorer/)生成）；

```
.flex-container {
    display: -webkit-flex;
    display: -moz-flex;
    display: -ms-flex;
    display: flex;
    -webkit-flex-flow: row wrap;
    -moz-flex-flow: row wrap;
    -ms-flex-direction: row;
    -ms-flex-wrap: wrap;
    -ms-flex-flow: row wrap;    
    flex-flow: row wrap;
}

.flex-item {
    -webkit-flex:1 auto;
    -moz-flex:1 auto;
    -ms-flex:1 auto;
    flex:1 auto;
} 
```

您可以查看[Caniuse上的 flex 浏览器支持](http://caniuse.com/#search=flex)

用户 Cimmanon 提出的观点，前缀选择器可能与您的问题无关，但不知何故，在阅读了您的 .css 声明后，我注意到您没有设置“基本”CSS3 声明 (dispaly:box; flex-box:1; ）。所以我想了一秒钟，这可以解释你的情况，但事实并非如此。

# actionscript-3 - 如何在 AS3 中初始化我的函数

> ID：15416477
> 
> 赞同：1
> 
> 时间：2013-03-14T17:43:43.410
> 
> 标签：actionscript-3

我是AS3的初学者。我想在 400*450 的画布有限的空间中创建一个简单的弹跳球。但是当我发布它时它无法工作。任何人都可以帮我解决这个问题吗？PS：有什么好的网站可以帮助我了解更多关于AS3的东西吗？

这是我的代码：

```
function ballmoving(evt:Event = null):void 
{
    var vel_x = 5;
    var vel_y = 6;
    ball.x = -20;
    ball.y = 280;

    ball.x += vel_x;
    ball.y += vel_y;    
    if (ball.x > stage.stageWidth - ball.width / 2 || ball.x < 0 + ball.width /2)
    {
        vel_x *= -1;
    }
    else if (ball.y > 280 || ball.y < 0 + ball.height /2)
    {
        vel_y *= -1;
    }
}

ballmoving();

RecycleButton.addEventListener(MouseEvent.CLICK, reset);

function reset(event:MouseEvent):void
{
    ball.x = -20;
    ball.y = 280;
    ballmoving();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:57:36.393

尝试类似：

```
var vel_x = 5;
var vel_y = 6;

function ballmoving(evt:Event = null):void 
{

    ball.x += vel_x;
    ball.y += vel_y;    
    if (ball.x > stage.stageWidth - ball.width / 2 || ball.x < ball.width /2)
    {
        vel_x *= -1;
    }

    if (ball.y > 280 || ball.y < ball.height /2)
    {
        vel_y *= -1;
    }
}

stage.addEventListener(Event.ENTER_FRAME, ballmoving);
RecycleButton.addEventListener(MouseEvent.CLICK, reset);

function reset(event:MouseEvent):void
{
    ball.x = -20;
    ball.y = 280;
} 
```

# javascript - 从 Javascript 函数返回 JSON 对象

> ID：15416486
> 
> 赞同：0
> 
> 时间：2013-03-14T17:43:53.347
> 
> 标签：javascript, json, function, object

尝试解析一些直播 JSON 数据并查看事件是否具有特定标签。如果没有，那么我将使用该数据来输出值等。

无论出于何种原因，`upcoming_event`都没有被分配事件对象（这是`findPublicEvent`函数的返回值。

事件对象的 console.log 工作正常 - 但返回它不起作用：/

```
// get our NLC data from livestream.
// -> note: need the '?callback=?' to convert to JSONP for cross-domain usage
var $uri = 'http://api.new.livestream.com/accounts/newlifechurchtv/?callback=?';
$.getJSON($uri, function(data) {
    parseNLCData(data);
});

parseNLCData = function(nlc_data){
  // set our variable to the return first event
  // nlc_data.upcoming_events.data is a json array of events
  window.upcoming_event = findPublicEvent(nlc_data.upcoming_events.data);
}

// should return single public event
function findPublicEvent (all_events) {
  // if we have events
  if (all_events) {
    // loop through events to find public event
    $.each(all_events, function(index,value){
      // get all the tags, remove whitespace, and put into array
      var $tags = value.tags.replace(/ /g, '').toLowerCase().split(',');
      // check for privacy.
      var $privacy = $.inArray('private', $tags);
      if ($privacy === -1) {
        // if the event isn't private -> return it!
        console.log(value);
        return value;
      }
    });
   // otherwise .... ->
   } else {
    // we don't have events, sooo, no dice.
    return false;
   }

 }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:46:00.617

`findPublicEvent`不退货。您传递给的匿名函数`each`正在返回它。

由于它是`findPublicEvent`您正在捕获的返回值，因此您看不到它。

1.  在范围内定义一个变量`findPublicEvent`
2.  从您的匿名函数内部为其分配一个值（使用常规分配，而不是返回）
3.  从返回该变量`findPublicEvent`

# android - 如何使用 InputStream 加载字体

> ID：15416487
> 
> 赞同：1
> 
> 时间：2013-03-14T17:44:06.233
> 
> 标签：android, typeface

如何使用 InputStream 加载字体？

我正在使用 classLoader 到资源，它会返回一个 Inputstream，现在如何将它传递给 Typeface？

我试过这些方法：

```
font  = Typeface.createFromFile(line); //File path

font  = Typeface.createFromFile(line);//String path 
```

但是他们两个都行不通。

还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-01-05T13:51:16.603

您将得到的最接近的是将流保存到（临时）文件，并将该文件传递给方法。

# html - :first-child 和 :last-child 同时

> ID：15416491
> 
> 赞同：12
> 
> 时间：2013-03-14T17:44:13.490
> 
> 标签：html, css, pseudo-class, css-selectors

这可能很容易，因为我觉得我在这里遗漏了一个基本点。

情况：

```
.singleOrder:first-child {
    border-radius: 5px 0 0 0;
}

.singleOrder:last-child {
    border-radius: 0 5px 0 0;
} 
```

在只有一个孩子之前工作得很好。在这种情况下，第二个声明将覆盖第一个声明，并且不会达到预期的效果。

解决这个问题的最简短和优雅的方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-14T17:45:29.353

拆分它：

```
.singleOrder:first-child {
    border-top-left-radius: 5px;
}

.singleOrder:last-child {
    border-bottom-left-radius: 5px;
} 
```

或者写一个额外的规则：

```
.singleOrder:first-child:last-child {
    border-radius: 5px 5px 0 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T17:47:32.873

使用`:only-child`：

```
.singleOrder:only-child {
    border-radius: 5px 5px 0 0;
} 
```

更新：Yogu 是对的。我忘了提。这应该在你的陈述之后。

# algorithm - 递归实现东北路径的麻烦

> ID：15416492
> 
> 赞同：1
> 
> 时间：2013-03-14T17:44:14.313
> 
> 标签：algorithm, recursion

我应该使用递归来输出从 A 点到 B 点的唯一东北路径 ne(x, y) 的总数，其中 B 是 A 以北的 x 行和 A 以东的 y 列。此外，我需要打印可能的唯一 NE 路径。

我知道如何使用递归来获取唯一路径的总数。但是，我坚持使用递归正确打印所有 NE 路径。

这是一些测试用例的给定输出： [输出图像](https://codecrunch.comp.nus.edu.sg/taskfile.php/846/output.png)

![我错误的递归代码](../Images/a4778ca9fca5abe6f1ef93ae2dc25805.png)

无论如何，这是我错误的递归代码的屏幕截图。请给我建议我哪里出错了。我已经为此花费了很多时间，但仍然无法找到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:05:30.397

1.  我认为您应该打印 if( rows == 0 && cols == 0 )，因为当您到达 B 点时就是这种情况。

2.  为什么在第一个 ne 调用中使用 path+="N" 作为回报？这会将“N”添加到原始路径，然后您将在第二次调用中获得路径+“N”+“E”。

尝试以下操作：

```
public static int ne( int rows, int cols, String path )
{
   if( rows == 0 && cols == 0 )
   {
      System.out.println(path);
      return 1;
   }
   int npats = 0, wpaths = 0;
   if( rows != 0 )
      npaths = ne( rows-1, cols, path+"N" );
   if( cols != 0 )
      wpaths = ne( rows, cols-1, path+"E" );
   return npaths + wpaths;
} 
```

# durandal - Durandaljs 可以做区域吗

> ID：15416494
> 
> 赞同：3
> 
> 时间：2013-03-14T17:44:16.593
> 
> 标签：durandal

我想看看是否有办法在 Durandaljs 做区域

类似的东西

```
/App/areas/home
                /views
                /viewmodels
          /other
                /views
                /viewmodels 
```

我看到 viewLocator 允许这种约定：

```
 viewLocator.useConvention('viewmodels', 'views', 'areas'); 
```

但 router.useConvention() 似乎默认为相同的路径。

是否有适当的方法来解释这一点，文档在这方面很简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T23:01:43.493

是的，你可以这样做。

由于您使用的是 Durandal.router，因此您可以通过覆盖路由器 autoConvertRouteToModuleId 来使用在哪里找到 ViewModel 的约定，如下所示：

```
router.autoConvertRouteToModuleId = function(url, params) {
    return url + '/' + 'params[0]';
}; 
```

至于找到绑定到您的视图模型的视图，那么您可以像上面那样......更改视图定位器约定。

# c++ - 定义全局命名空间

> ID：15416497
> 
> 赞同：0
> 
> 时间：2013-03-14T17:44:23.767
> 
> 标签：c++, namespaces

如何定义全局命名空间，类似于全局变量（通过`extern`关键字）？我尝试了以下方法，但它不起作用：

```
//header
#ifndef ASD_H
#define ASD_H

namespace Goo
{
    int var;
}
#endif 
```

这个头文件我将包含在所有`.cpp`需要访问命名空间的文件中。这不起作用。这是如何正确完成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:49:15.187

默认命名空间是全局命名空间。只是不要显式添加`namespace`代码。

话虽如此，您之所以这么问，是因为您不了解命名空间的工作原理。他们的工作是清除范围。它们不是对象。它们不指向任何记忆。他们像那样非常“柔软”。任何文件都可以声明一个命名空间，并且出现在其中的任何类、结构、函数等都将成为该命名空间的一部分。不同的文件不需要通信它们共享相同的命名空间；如果文本相同，则它是相同的命名空间。

回复您的评论：

```
namespace One {
    intvar1;
}

namespace Two {
    int var2;
} 
```

然后可以在其他翻译单元中以`One::var1`和访问它`Two::var2`，就像它们不在命名空间中并且您键入`var1`或一样`var2`- 这意味着您仍然负责`extern`在必要时声明等。

此外，您可以使用`namespace Base::One`或者`Base::Two`如果您有一个通用的基本命名空间。

# javascript - 表演后对焦不起作用

> ID：15416500
> 
> 赞同：1
> 
> 时间：2013-03-14T17:44:28.553
> 
> 标签：javascript, jquery, focus, show

我在文本框中有一个输入字段，如下所示：

```
<div id="box_password2" style="display:none;">
  <span style="float:left;margin: 10px 0px 0px 20px;">Verify password:</span>                           
  <input type="password" id="field_password2" class="auto" maxlength="10" style="margin: 10px 0px 0px 10px; width: 80px; float: left;" value="">
</div> 
```

我希望取消隐藏框（和包含的输入字段）并将焦点设置到输入字段，如下所示：

```
$('#box_password2').fadeIn("fast", function() {
  $("#field_password2").focus(); 
  console.log('Active element: '+$(":focus").attr('id'));
}); 
```

但这只是行不通。焦点在某个不可见的地方，我的控制台将活动元素显示为未定义。为什么这不起作用？

* * *

**更新**

我添加了一个 onfocus 警报和 field_password2 DOES 获得焦点，但不知何故将其丢失到 NEXT 字段。如果重要的话，上面的 javascript 在另一个输入字段的 onchange 事件中。在我的代码更改焦点之后，onchange 处理程序是否正在更改焦点？有什么办法可以防止吗？

# javascript - JQuery 更改文本

> ID：15416502
> 
> 赞同：1
> 
> 时间：2013-03-14T17:44:32.707
> 
> 标签：javascript, jquery, text

我有一个简单的任务是在按下按钮后更改按钮上的文本。这是我的脚本：

```
$(".recent").on("click", 'button', function () {
        $(this).closest($("li")).find($(".content")).slideToggle();
        if ($(this).text="Show content") {
            $(this).text("Hide content");
        } else {
            $(this).text("Show content");
        }
    }); 
```

当我按下按钮时，文本变为“隐藏内容”。但是当我再次按下按钮时，它不会变回“显示内容”。猜猜这是关于一些简单的事情......将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:46:02.580

您需要使用等价`===`而不是赋值`=`并使用 text() 而不是 text

```
$(".recent").on("click", 'button', function () {
        $(this).closest($("li")).find($(".content")).slideToggle();

        if ($(this).text() === "Show content") {
            $(this).text("Hide content");
        } else {
            $(this).text("Show content");
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T17:45:55.370

用于`===`比较。您使用的是`=`哪个分配值。也是`.text()`一种方法

```
$(".recent").on("click", 'button', function () {
    $(this).closest('li').find('.content').slideToggle();
    if ($(this).text() === "Show content") {
        $(this).text("Hide content");
    } else {
        $(this).text("Show content");
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:47:30.467

`.text()`是一个方法，所以你必须调用它来获取和设置文本：

```
$(".recent").on("click", 'button', function() {
    var $this = $(this);

    $this.closest("li").find(".content").slideToggle();

    if ($this.text() === "Show content") {
        $this.text("Hide content");
    } else {
        $this.text("Show content");
    }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T17:47:44.220

the`.text`是一种**方法**，因此需要跟在 a 之后`()`。此外，对于相等，使用`==` **not** `=`， single`=`用于分配。

试试这个：

```
$(".recent").on("click", 'button', function () {
    $(this).closest($("li")).find($(".content")).slideToggle();
    if ($(this).text() == "Show content") {
        $(this).text("Hide content");
    } else {
        $(this).text("Show content");
    }
}); 
```

# knockout.js - Knockout 映射一个数组而不是它的子属性？

> ID：15416503
> 
> 赞同：0
> 
> 时间：2013-03-14T17:44:39.367
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在尝试使用淘汰赛映射插件，除了一部分外，我的工作正常。

我有一个对象数组，我希望数组是可观察的，但我不希望数组中的对象此时是可观察的。

例如：

主要的

*   标签[]

标签

*   标题
*   ID
*   视窗[]

窗户

*   标题
*   ID
*   地点
*   ETC

    ```
    var MainMapping = {
      'Tabs': {
        create: function(options) {
            return ko.mapping.fromJS(options.data, {'ignore': ['Id']}, model.tab);
        }
      }
    }; 
    ```

我希望它没有任何 Window 属性是可观察的，但我希望 Windows 数组是。

谁能给我一些关于如何做到这一点的提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:57:47.240

[映射插件](http://knockoutjs.com/documentation/plugins-mapping.html)具有复制选项，它使用复制的值创建 JS 属性（即，我认为您不能将 'Window.Title' 作为顶级视图模型的属性映射，尽管请随意尝试！ )，这听起来像你所追求的。但是，由于它是一个孩子，我不确定它是否会起作用，所以您可能想查看创建映射，您可以在其中完全控制映射，您可以直接将窗口数据对象复制到 Windows 数组中，否则也使用映射插件，并在其上使用复制映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:26:18.350

这是我想出的答案：

```
var Main = function() {
    return { ....}
}();

var mainMap = {
    'Tabs':{
        create:function(options){
            return new Tab(options.data);
        }
    }
};

function Tab(data){
    var defaults = { ...}
    data = $.extend(true, defaults, data);

    var tabMap = {
        'copy': ['id'],
        key: function(data) {
            return ko.utils.unwrapObservable(data.id);
        },
        'windows': {
            create: function(options) {
                return new myWindow(options.data);
            }
        }
    };

    ko.mapping.fromJs(data, tabMap, this);
}

function myWindow(data){
    var defaults = { ....};
    return $.extend(true, defaults, data);
}

ko.mapping.fromJS(data, mainMap, Main);
ko.applyBindings(Main, $('#Main')[0]); 
```

# javascript - 如何使这个 Javascript 复选框触发动作像我的 CSS 示例一样工作

> ID：15416505
> 
> 赞同：2
> 
> 时间：2013-03-14T17:44:43.283
> 
> 标签：javascript, jquery, css, checkbox

我正在使用以下代码来测试“是否”在页面加载时选中了复选框。如果是，则将显示某个附加字段（称为 myfield）：

```
<style>
#myfield {
    display: none;
}
</style>    

<input type="checkbox" id="mycheckbox" name="mycheckbox" />

<input type='text' id='myfield' name='myfield' />

<script>
if ($("#mycheckbox").is(":checked")) {
document.getElementById("id").style.display="block";
}
</script> 
```

但是，这仅在页面加载并且复选框已被选中时才有效。如果在页面加载时未选中该框，则它无法实时工作，然后您单击该框。我希望在“选中”框时立即显示隐藏字段，而无需重新加载页面。然后，当未选中该框时，我希望 myfield 立即隐藏。

任何人都可以指出更好/正确的方法吗？

此外：

注意：我确实知道如何在 CSS 中使用标签来做到这一点，但其他时候我需要使用 javascript。

以下是仅使用 CSS 在现代浏览器中运行良好的方法：http: [//jsfiddle.net/3KTC3/](http://jsfiddle.net/3KTC3/)

这是仅 CSS 的 jsfiddle 代码：

```
<style type="text/css">
.label-for-check {
    display:none;
}

.check-with-label:checked + .label-for-check {
display:block;  
}
</style>   

<div>
<input type="checkbox" id="check" class="check-with-label" />
  <label for="check" class="label-for-check">

        <br /><br />MyField<br />
    <input type='text' id='myfield' name='myfield' size='10'  />
</label>
<div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:47:19.270

您需要附加一个[`change`](http://api.jquery.com/change/)事件处理程序。您发布的代码仅在页面加载时执行，它不会监视元素的状态。

这是一个等效于您的 CSS 版本的 jQuery，带有类和相邻的选择器：

```
$('.check-with-label').change(function() {
    $(this).next().toggle(this.checked);
}).change(); 
```

[**小提琴**](http://jsfiddle.net/qV2hT/13/)

说明：`this`引用被点击的复选框，根据复选框的选中状态获取[`next`](http://api.jquery.com/next/)元素（相当于您的 CSS`+`选择器）[`toggle`](http://api.jquery.com/toggle/)及其显示。

另一个仅适用于您的 2 个给定 ID 的版本：

```
$('#mycheckbox').change(function() {
    $('#myfield').toggle(this.checked);
}).change(); 
```

[**小提琴**](http://jsfiddle.net/qV2hT/17/)

请注意，您的 CSS 版本与所有桌面浏览器兼容，包括 IE7 及更高版本。考虑是否有必要为此使用JS。

**编辑：**您必须在附加后触发更改处理程序，因此如果在加载页面时已选中该复选框，则触发的处理程序将显示该字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:51:04.770

```
$(document).ready(function(){
    if($("#mycheckbox").is(":checked")) $('#myfield').show();

    $('#mycheckbox').on('change', function(){
        if($(this).is(":checked")) {
            $('#myfield').show();
        } else {
            $('#myfield').hide();
        }
    })
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:53:09.637

您的问题是，**如果您的复选框被选中，jQuery 只会检查一次（当您加载网站时）。**

每次用户更改复选框时，更改处理程序都会触发，如果它被选中，它将显示`#myfield`

做这样的事情：

```
$('#mycheckbox').change(function() {
    if ($(this).is(":checked")) {
      $('#myfield').show()
    }
}); 
```

# apache - 从 VM Web 应用程序“破解”到 localhost 根目录

> ID：15416509
> 
> 赞同：-3
> 
> 时间：2013-03-14T17:44:53.143
> 
> 标签：apache, directory, virtual-machine

我在本地运行 apache VM Web 应用程序。是红帽子。

它是基于 PHP 的，但主页是 index.html。我能够进入图像等的子目录，我想知道我是否可以访问包含 php 代码的目录，可能只是图像目录的上一层。由于 index.html，它会强制加载，我无法看到服务器文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T22:32:35.047

是的，曾经有一个叫做[dot-dot-traversal](https://en.wikipedia.org/wiki/Directory_traversal_attack)的技巧可以做到这一点。基本上，您将两个点放入 URL 并爬上 Web 根目录。类似的东西`http://www.example.com/../../../../etc/shadow`。偶尔会发现利用该漏洞的新方法，但大多数情况下很少见。除非您运行的是旧服务器，否则您应该非常安全。

# ios - 无法让我的扑克逻辑正确检查“卡片”对象的 NSMutableArray 中的同花顺

> ID：15416519
> 
> 赞同：0
> 
> 时间：2013-03-14T17:45:18.037
> 
> 标签：ios, cocos2d-iphone, nsmutablearray, key-value-coding, nssortdescriptor

在这个问题上卡了三天。认为写出这个问题比自己解决问题需要更长的时间，但我对此一无所获。我会尽量简明扼要地阐述这一点。在 Objective-C、Cocos2D-iPhone 2.0、Xcode 4.6 中。

我正在写一个德州扑克游戏，我一直在试图让我的游戏层来评估哪些手是同花顺和皇家同花顺。

（对于那些不熟悉德州扑克或一般扑克的人，一旦所有可能的牌都发完，玩家必须从总共 7 张牌中做出他最好的 5 张牌。在这种情况下，我只关心确定玩家是否有同花顺，即任意 5 张相同花色的牌，它们也是按顺序排列的。[例如 7、8、9、10 和梅花 J，或 A、2、3、4 , 和红桃 5 等。“皇家”同花就是最高的同花顺，即十、杰克、皇后、国王和 A 都相同的花色。]）

对于 Card 类，我所拥有的只是分配和移动的方法。说这些工作正常，我感到很自在。我在那里没有任何问题。

以下是我的 Card 类的相关部分：

```
Card.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"

@interface Card : CCSprite {
    BOOL removedFromLayer, reachedDestination, isMoving;
    NSString *imageName;
    NSString *suit;
    NSNumber *rank;
}

@property BOOL removedFromLayer, reachedDestination, isMoving;
@property (nonatomic, retain) NSNumber *rank;
@property (nonatomic, retain) NSString *suit;
@property (nonatomic, retain) NSString *imageName;

// ... movement and animation methods

@end 
```

执行：

```
#import "Card.h"
@implementation Card
@synthesize removedFromLayer, reachedDestination, isMoving, rank, suit, imageName;
    // ... implementations
@end 
```

我扩展了 NSMutableArray 类以包含扑克手评估逻辑。我最初尝试创建一个 NSMutableArray 的子类，但作为经验丰富的程序员会认识到，它并没有很好地工作。据我从控制台读数中得知，排序方法运行良好。我现在只坚持直接冲洗方法。我承认它很丑。（哈。“很丑。”）：

```
#import "NSMutableArray+HandAnalysis.h"
#import "Card.h"

#define cards1And2AreSequential (card1Rank == (card2Rank - 1))
#define cards2And3AreSequential (card2Rank == (card3Rank - 1))
#define cards3And4AreSequential (card3Rank == (card4Rank - 1))
#define cards4And5AreSequential (card4Rank == (card5Rank - 1))
#define cards5And6AreSequential (card5Rank == (card6Rank - 1))
#define cards6And7AreSequential (card6Rank == (card7Rank - 1))

#define cards1And2AreSameSuit (card1Suit == card2Suit)
#define cards2And3AreSameSuit (card2Suit == card3Suit)
#define cards3And4AreSameSuit (card3Suit == card4Suit)
#define cards4And5AreSameSuit (card4Suit == card5Suit)
#define cards5And6AreSameSuit (card5Suit == card6Suit)
#define cards6And7AreSameSuit (card6Suit == card7Suit)

#define firstCardIsAnAce [[firstCard valueForKey:@"rank"] intValue] == 1
#define lastCardIsAKing [[lastCard valueForKey:@"rank"] intValue] == 13
#define secondToLastCardIsAQueen [[secondToLastCard valueForKey:@"rank"] intValue] == 12
#define thirdToLastCardIsAJack [[thirdToLastCard valueForKey:@"rank"] intValue] == 11
#define fourthToLastCardIsATen [[fourthToLastCard valueForKey:@"rank"] intValue] == 10

// clubs (NOTE:  These do not terminate with a semi-colon)
#define firstCardIsAClub [[firstCard valueForKey:@"suit"] isEqualToString:@"club"]
#define lastCardIsAClub [[lastCard valueForKey:@"suit"] isEqualToString:@"club"]
#define secondToLastCardIsAClub [[secondToLastCard valueForKey:@"suit"] isEqualToString:@"club"]
#define thirdToLastCardIsAClub [[thirdToLastCard valueForKey:@"suit"] isEqualToString:@"club"]
#define fourthToLastCardIsAClub [[fourthToLastCard valueForKey:@"suit"] isEqualToString:@"club"]

// diamonds
#define firstCardIsADiamond [[firstCard valueForKey:@"suit"] isEqualToString:@"diamond"]
#define lastCardIsADiamond [[lastCard valueForKey:@"suit"] isEqualToString:@"diamond"]
#define secondToLastCardIsADiamond [[secondToLastCard valueForKey:@"suit"] isEqualToString:@"diamond"]
#define thirdToLastCardIsADiamond [[thirdToLastCard valueForKey:@"suit"] isEqualToString:@"diamond"]
#define fourthToLastCardIsADiamond [[fourthToLastCard valueForKey:@"suit"] isEqualToString:@"diamond"]

// hearts
#define firstCardIsAHeart [[firstCard valueForKey:@"suit"] isEqualToString:@"heart"]
#define lastCardIsAHeart [[lastCard valueForKey:@"suit"] isEqualToString:@"heart"]
#define secondToLastCardIsAHeart [[secondToLastCard valueForKey:@"suit"] isEqualToString:@"heart"]
#define thirdToLastCardIsAHeart [[thirdToLastCard valueForKey:@"suit"] isEqualToString:@"heart"]
#define fourthToLastCardIsAHeart [[fourthToLastCard valueForKey:@"suit"] isEqualToString:@"heart"]

// spades
#define firstCardIsASpade [[firstCard valueForKey:@"suit"] isEqualToString:@"spade"]
#define lastCardIsASpade [[lastCard valueForKey:@"suit"] isEqualToString:@"spade"]
#define secondToLastCardIsASpade [[secondToLastCard valueForKey:@"suit"] isEqualToString:@"spade"]
#define thirdToLastCardIsASpade [[thirdToLastCard valueForKey:@"suit"] isEqualToString:@"spade"]
#define fourthToLastCardIsASpade [[fourthToLastCard valueForKey:@"suit"] isEqualToString:@"spade"]

@implementation NSMutableArray (HandAnalysis)

-(NSMutableArray *)sortByRank {

    NSSortDescriptor *rankSD = [[NSSortDescriptor alloc] initWithKey:@"rank" ascending:YES];

    NSArray *sortDescriptors = [NSArray arrayWithObject:rankSD];
    NSArray *sortedHand = [self sortedArrayUsingDescriptors:sortDescriptors];
    NSMutableArray *handOrganizedByRank = [NSMutableArray arrayWithArray:sortedHand];

    for (Card* card in handOrganizedByRank) {
        NSLog(@"%@", [card valueForKey:@"rank"]);
    }

    return handOrganizedByRank;
}

-(NSMutableArray *)sortBySuit {

    NSSortDescriptor *suitSD = [[NSSortDescriptor alloc] initWithKey:@"suit" ascending:YES];

    NSArray *sortDescriptors = [NSArray arrayWithObject:suitSD];
    NSArray *sortedHand = [self sortedArrayUsingDescriptors:sortDescriptors];
    NSMutableArray *handOrganizedBySuit = [NSMutableArray arrayWithArray:sortedHand];

    for (Card* card in handOrganizedBySuit) {
        NSLog(@"%@", [card valueForKey:@"suit"]);
    }

    return handOrganizedBySuit;
}

-(BOOL)isStraightFlush {

    [self sortByRank];
    [self sortBySuit];

    NSLog(@"Amount of cards in the array:  %d", [self count]);

    // this section is for if there are 7 cards in the array total.
    if ([self count] == 7) {

        int card1Rank = [[[self objectAtIndex:0] valueForKey:@"rank"] intValue];
        int card2Rank = [[[self objectAtIndex:1] valueForKey:@"rank"] intValue];
        int card3Rank = [[[self objectAtIndex:2] valueForKey:@"rank"] intValue];
        int card4Rank = [[[self objectAtIndex:3] valueForKey:@"rank"] intValue];
        int card5Rank = [[[self objectAtIndex:4] valueForKey:@"rank"] intValue];
        int card6Rank = [[[self objectAtIndex:5] valueForKey:@"rank"] intValue];
        int card7Rank = [[[self objectAtIndex:6] valueForKey:@"rank"] intValue];

        id card1Suit = [[self objectAtIndex:0] valueForKey:@"suit"];
        id card2Suit = [[self objectAtIndex:1] valueForKey:@"suit"];
        id card3Suit = [[self objectAtIndex:2] valueForKey:@"suit"];
        id card4Suit = [[self objectAtIndex:3] valueForKey:@"suit"];
        id card5Suit = [[self objectAtIndex:4] valueForKey:@"suit"];
        id card6Suit = [[self objectAtIndex:5] valueForKey:@"suit"];
        id card7Suit = [[self objectAtIndex:6] valueForKey:@"suit"];

        // if all cards (1-7) are straight flush
        if ((cards1And2AreSequential && cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards6And7AreSequential && cards1And2AreSameSuit && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit && cards6And7AreSameSuit)) {
            NSLog(@"Player has a seven-card straight flush.  %d items in the array.", [self count]);

            return TRUE;
        }

        // (6-card straight flushes)  if cards 1-6 or 2-7 are straight flush
        else if ((cards1And2AreSequential && cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards1And2AreSameSuit && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit) ||  (cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards6And7AreSequential && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit && cards6And7AreSameSuit)) {
            NSLog(@"Player has a six-card straight flush.  %d in the array.", [self count]);

            return TRUE;
        }

        // (5-card straight flushes)  if 1-5 or 2-6 or 3-7 are straight flush
        else if ((cards1And2AreSequential && cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards1And2AreSameSuit && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit) ||  (cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit) || (cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards6And7AreSequential && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit && cards6And7AreSameSuit)) {

            NSLog(@"Player has a straight flush.  %d in the array.", [self count]);

            return TRUE;
        } else {
        NSLog(@"Player does not have a straight flush.  %d in the array.", [self count]);
        return  FALSE;
        }
    }

    // this section is for if there are 6 cards in the array total.
    else if ([self count] == 6) {
        int card1Rank = [[[self objectAtIndex:0] valueForKey:@"rank"] intValue];
        int card2Rank = [[[self objectAtIndex:1] valueForKey:@"rank"] intValue];
        int card3Rank = [[[self objectAtIndex:2] valueForKey:@"rank"] intValue];
        int card4Rank = [[[self objectAtIndex:3] valueForKey:@"rank"] intValue];
        int card5Rank = [[[self objectAtIndex:4] valueForKey:@"rank"] intValue];
        int card6Rank = [[[self objectAtIndex:5] valueForKey:@"rank"] intValue];

        id card1Suit = [[self objectAtIndex:0] valueForKey:@"suit"];
        id card2Suit = [[self objectAtIndex:1] valueForKey:@"suit"];
        id card3Suit = [[self objectAtIndex:2] valueForKey:@"suit"];
        id card4Suit = [[self objectAtIndex:3] valueForKey:@"suit"];
        id card5Suit = [[self objectAtIndex:4] valueForKey:@"suit"];
        id card6Suit = [[self objectAtIndex:5] valueForKey:@"suit"];

            // added
            // (6-card straight flush)  if cards 1-6 is straight flush
            if ((cards1And2AreSequential && cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards1And2AreSameSuit && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit)) {
                NSLog(@"Player has a six-card straight flush.  %d in the array.", [self count]);

                return TRUE;
            }
            // (5-card straight flushes)  if cards 1-5 or cards 2-6 make a straight flush
            else if ((cards1And2AreSequential && cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards1And2AreSameSuit && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit) ||  (cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards5And6AreSequential && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit && cards5And6AreSameSuit)) {
                NSLog(@"Player has a straight flush.  %d in the array.", [self count]);

                return TRUE;
            } else {
            NSLog(@"Player does not have a straight flush.  %d in the array.", [self count]);
            return  FALSE;
            }
        }

    // if only 5 cards in the array, only one possible straight flush
    else if ([self count] == 5) {
        int card1Rank = [[[self objectAtIndex:0] valueForKey:@"rank"] intValue];
        int card2Rank = [[[self objectAtIndex:1] valueForKey:@"rank"] intValue];
        int card3Rank = [[[self objectAtIndex:2] valueForKey:@"rank"] intValue];
        int card4Rank = [[[self objectAtIndex:3] valueForKey:@"rank"] intValue];
        int card5Rank = [[[self objectAtIndex:4] valueForKey:@"rank"] intValue];

        id card1Suit = [[self objectAtIndex:0] valueForKey:@"suit"];
        id card2Suit = [[self objectAtIndex:1] valueForKey:@"suit"];
        id card3Suit = [[self objectAtIndex:2] valueForKey:@"suit"];
        id card4Suit = [[self objectAtIndex:3] valueForKey:@"suit"];
        id card5Suit = [[self objectAtIndex:4] valueForKey:@"suit"];

        if (cards1And2AreSequential && cards2And3AreSequential && cards3And4AreSequential && cards4And5AreSequential && cards1And2AreSameSuit && cards2And3AreSameSuit && cards3And4AreSameSuit && cards4And5AreSameSuit) {
            NSLog(@"Player has a straight flush.  %d in the array.", [self count]);

            return TRUE;
        } else {
            NSLog(@"Player does not have a straight flush.  %d in the array.", [self count]);
            return FALSE;
        }
    }
    NSLog(@"Something is wrong in the isStraightFlush method.");

    return 0;
}

@end 
```

以下来自我的 CCGamePlayLayer。这一层负责创建、洗牌和处理套牌——在这种情况下，是一个加载的套牌，每次都会给我一个皇家同花顺。我们首先制作一副套牌，它由两个非同花平分和梅花 10、J、Q、K 和 A 组成。然后我们调用洗牌法，然后我们发牌，其中包括玩家的 2 张底牌、3 张翻牌、1 张转牌和 1 张河牌。然后我们调用 evaluateHand 方法来确定玩家可以用他的 7 张牌组成的最佳手牌。一旦确定了玩家的手牌类型，evaluateHand 方法就会显示一个 UIAlertView，告诉玩家手牌是什么。

```
CCGamePlayLayer.h

#import <Foundation/Foundation.h>
#import "cocos2d.h"
#import <GameKit/GameKit.h>
#import <UIKit/UIKit.h>
#import "NSMutableArray+HandAnalysis.h"

@interface CCGamePlayLayer : CCLayer <CCTargetedTouchDelegate> {

    NSMutableArray *deck;
}

@property (nonatomic, retain) NSMutableArray *deck;
    @property (nonatomic, retain) hasPair, hasTwoPair, hasSet, hasStraight, hasFlush, hasBoat, hasQuads, hasStraightFlush, hasRoyalFlush;

CCGamePlayLayer.m

#import "CCGamePlayLayer.h"
#import "ItemsViewController.h"
#import "MGAppDelegate.h"
#import "Card.h"

@implementation CCGamePlayLayer

@synthesize deck;
@synthesize hasPair, hasTwoPair, hasSet, hasStraight, hasFlush, hasBoat, hasQuads, hasStraightFlush, hasRoyalFlush;

-(id)init {
    if (self = [super init]) {

        //  ... Make the buttons and background

        [self makeLoadedRoyalFlushDeck];
        [self shuffle];

        NSLog(@"Here's the shuffled deck, from the init method:");

        for (Card *c in deck) {
            NSLog(@"%@", c.imageName);
        }

        [self dealLoadedHoleCards];
    }
    return self;
}

-(NSMutableArray *)makeLoadedRoyalFlushDeck {
    Card *aceC = [Card spriteWithFile:@"pbwb1c.png"];
    [aceC setValue:@"Ac" forKey:@"imageName"];
    [aceC setValue:[NSNumber numberWithInt:1] forKey:@"rank"];
    [aceC setValue:@"club" forKey:@"suit"];

    Card *tenC = [Card spriteWithFile:@"pbwbtc.png"];
    [tenC setValue:@"Tc" forKey:@"imageName"];
    [tenC setValue:[NSNumber numberWithInt:10] forKey:@"rank"];
    [tenC setValue:@"club" forKey:@"suit"];

    Card *jackC = [Card spriteWithFile:@"pbwbjc.png"];
    [jackC setValue:@"Jc" forKey:@"imageName"];
    [jackC setValue:[NSNumber numberWithInt:11] forKey:@"rank"];
    [jackC setValue:@"club" forKey:@"suit"];

    Card *queenC = [Card spriteWithFile:@"pbwbqc.png"];
    [queenC setValue:@"Qc" forKey:@"imageName"];
    [queenC setValue:[NSNumber numberWithInt:12] forKey:@"rank"];
    [queenC setValue:@"club" forKey:@"suit"];

    Card *kingC = [Card spriteWithFile:@"pbwbkc.png"];
    [kingC setValue:@"Kc" forKey:@"imageName"];
    [kingC setValue:[NSNumber numberWithInt:13] forKey:@"rank"];
    [kingC setValue:@"club" forKey:@"suit"];

    Card *deuceS = [Card spriteWithFile:@"pbwb2s.png"];
    [deuceS setValue:@"2s" forKey:@"imageName"];
    [deuceS setValue:[NSNumber numberWithInt:2] forKey:@"rank"];
    [deuceS setValue:@"spade" forKey:@"suit"];

    Card *deuceD = [Card spriteWithFile:@"pbwb2d.png"];
    [deuceD setValue:@"2d" forKey:@"imageName"];
    [deuceD setValue:[NSNumber numberWithInt:2] forKey:@"rank"];
    [deuceD setValue:@"diamond" forKey:@"suit"];

    deck = [NSMutableArray arrayWithObjects: deuceS, deuceD, aceC, tenC, jackC, queenC, kingC, nil];

    for (Card *c in deck) {
        NSLog(@"%@", c.imageName);
    }

    return deck;
}

-(void)shuffle {
    NSLog(@"[self.deck count] == %d", [self.deck count]);
    for (int i = [self.deck count] - 1; i > 0; i--) {
        [self.deck exchangeObjectAtIndex:(arc4random_uniform([self.deck count] - 1)) withObjectAtIndex:i];
    }
    NSLog(@"The deck has been shuffled.");
    NSLog(@"Here is the shuffled deck:");

    for (Card *c in deck) {
        NSLog(@"%@", c.imageName);
    }
}

-(void)evaluateHand {
    if (playerHoleCard1 && playerHoleCard2 && !flop1 && !flop2 && !flop3 && !turn && !river) {
        UIAlertView *holeCardsAlert = [[UIAlertView alloc] initWithTitle:@"Whoa!" message:@"You've only been dealt your hole cards!  Slow down, there, killer!" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [holeCardsAlert show];
    }
    else if (playerHoleCard1 && playerHoleCard2 && flop1 && flop2 && flop3 && !turn && !river) {
        UIAlertView *flopAlert = [[UIAlertView alloc] initWithTitle:@"FLOP" message:@"You need to wait until the board is completely dealt out to evaluate your hand." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [flopAlert show];
    }
    else if (playerHoleCard1 && playerHoleCard2 && flop1 && flop2 && flop3 && turn && !river) {
        UIAlertView *turnAlert = [[UIAlertView alloc] initWithTitle:@"TURN" message:@"Almost there.  One card to go, and then I'll tell you what kind of hand you have." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [turnAlert show];
    }
    else if (playerHoleCard1 && playerHoleCard2 && flop1 && flop2 && flop3 && turn && river) {

        // put the player's 2 hole cards and the 5 board cards in an array for sorting
        NSMutableArray *allCards = [NSMutableArray arrayWithObjects:flop1, flop2, flop3, turn, river, playerHoleCard1, playerHoleCard2, nil];

        // first check for higher hands
        // royal flush
        id sequentialHand           = [allCards sortByRank];
        id sequentialAndSuitedHand  = [sequentialHand sortBySuit];

        // Check for straight flush first
        hasRoyalFlush = [sequentialAndSuitedHand isStraightFlush];

        // Checking for straight or flush
        hasStraight = [sequentialHand isStraight];
        hasFlush = [sequentialAndSuitedHand isFlush];

        // Checking for quads, we check the original array
        hasQuads = [allCards isQuads];

        // Check for SF
        if (hasStraight == TRUE && hasFlush == TRUE) {
            if (hasRoyalFlush == TRUE) {
                hasStraightFlush = FALSE;
                hasStraight = FALSE;
                hasFlush = FALSE;
                NSLog(@"hasRoyalFlush == TRUE");
            } else if (hasRoyalFlush == FALSE) {
                NSLog(@"hasRoyalFlush == FALSE");
            }
        }
        else if (hasRoyalFlush == FALSE) {
                hasStraight = FALSE;
                hasFlush = FALSE;
                UIAlertView *straightFlushAlert = [[UIAlertView alloc] initWithTitle:@"STRAIGHT FLUSH" message:@"You have a straight flush." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                [straightFlushAlert show];
            } else if (hasStraightFlush == FALSE) {
                NSLog(@"hasStraightFlush == FALSE");
            } else {
                NSLog(@"Some problem in determining whether hasStraightFlush is TRUE or FALSE.");
            }

        // check for straight
        if (hasStraight == TRUE) {
            UIAlertView *straightAlert = [[UIAlertView alloc] initWithTitle:@"STRAIGHT" message:@"You have a straight." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [straightAlert show];

            NSLog(@"Player has a straight.");
        }

        if (hasFlush == TRUE) {
            UIAlertView *flushAlert = [[UIAlertView alloc] initWithTitle:@"FLUSH" message:@"You have a flush." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [flushAlert show];

            NSLog(@"Player has a flush.");
        }

        if (hasQuads == TRUE) {
            hasPair = FALSE;
            hasTwoPair = FALSE;
            hasStraight = FALSE;
            hasFlush = FALSE;
            UIAlertView *quadsAlert = [[UIAlertView alloc] initWithTitle:@"QUADS" message:@"You have four of a kind." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
            [quadsAlert show];
        }
    }
}

@end 
```

当我运行它并尝试评估我的手牌时，这是我从控制台得到的信息：

```
2013-03-14 10:27:53.045 TexasHoldemGame[7600:c07] sortByRank called.
2013-03-14 10:27:53.045 TexasHoldemGame[7600:c07] 1
2013-03-14 10:27:53.046 TexasHoldemGame[7600:c07] 2
2013-03-14 10:27:53.047 TexasHoldemGame[7600:c07] 2
2013-03-14 10:27:53.048 TexasHoldemGame[7600:c07] 10
2013-03-14 10:27:53.049 TexasHoldemGame[7600:c07] 11
2013-03-14 10:27:53.049 TexasHoldemGame[7600:c07] 12
2013-03-14 10:27:53.050 TexasHoldemGame[7600:c07] 13
2013-03-14 10:27:53.050 TexasHoldemGame[7600:c07] For thoroughness, here it is with both values and suits:
2013-03-14 10:27:53.051 TexasHoldemGame[7600:c07] 1 of club
2013-03-14 10:27:53.051 TexasHoldemGame[7600:c07] 2 of diamond
2013-03-14 10:27:53.052 TexasHoldemGame[7600:c07] 2 of spade
2013-03-14 10:27:53.053 TexasHoldemGame[7600:c07] 10 of club
2013-03-14 10:27:53.053 TexasHoldemGame[7600:c07] 11 of club
2013-03-14 10:27:53.054 TexasHoldemGame[7600:c07] 12 of club
2013-03-14 10:27:53.054 TexasHoldemGame[7600:c07] 13 of club
2013-03-14 10:27:53.055 TexasHoldemGame[7600:c07] sortBySuit called.
2013-03-14 10:27:53.055 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.056 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.056 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.057 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.057 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.058 TexasHoldemGame[7600:c07] diamond
2013-03-14 10:27:53.058 TexasHoldemGame[7600:c07] spade
2013-03-14 10:27:53.059 TexasHoldemGame[7600:c07] For thoroughness, here it is with both values and suits:
2013-03-14 10:27:53.059 TexasHoldemGame[7600:c07] 1 of club
2013-03-14 10:27:53.060 TexasHoldemGame[7600:c07] 10 of club
2013-03-14 10:27:53.061 TexasHoldemGame[7600:c07] 11 of club
2013-03-14 10:27:53.061 TexasHoldemGame[7600:c07] 12 of club
2013-03-14 10:27:53.062 TexasHoldemGame[7600:c07] 13 of club
2013-03-14 10:27:53.062 TexasHoldemGame[7600:c07] 2 of diamond
2013-03-14 10:27:53.063 TexasHoldemGame[7600:c07] 2 of spade
2013-03-14 10:27:53.063 TexasHoldemGame[7600:c07] isStraightFlush bool method called.
2013-03-14 10:27:53.064 TexasHoldemGame[7600:c07] sortByRank called.
2013-03-14 10:27:53.064 TexasHoldemGame[7600:c07] 1
2013-03-14 10:27:53.065 TexasHoldemGame[7600:c07] 2
2013-03-14 10:27:53.066 TexasHoldemGame[7600:c07] 2
2013-03-14 10:27:53.067 TexasHoldemGame[7600:c07] 10
2013-03-14 10:27:53.067 TexasHoldemGame[7600:c07] 11
2013-03-14 10:27:53.069 TexasHoldemGame[7600:c07] 12
2013-03-14 10:27:53.070 TexasHoldemGame[7600:c07] 13
2013-03-14 10:27:53.070 TexasHoldemGame[7600:c07] For thoroughness, here it is with both values and suits:
2013-03-14 10:27:53.071 TexasHoldemGame[7600:c07] 1 of club
2013-03-14 10:27:53.072 TexasHoldemGame[7600:c07] 2 of diamond
2013-03-14 10:27:53.073 TexasHoldemGame[7600:c07] 2 of spade
2013-03-14 10:27:53.073 TexasHoldemGame[7600:c07] 10 of club
2013-03-14 10:27:53.073 TexasHoldemGame[7600:c07] 11 of club
2013-03-14 10:27:53.074 TexasHoldemGame[7600:c07] 12 of club
2013-03-14 10:27:53.074 TexasHoldemGame[7600:c07] 13 of club
2013-03-14 10:27:53.076 TexasHoldemGame[7600:c07] sortBySuit called.
2013-03-14 10:27:53.077 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.078 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.079 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.080 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.082 TexasHoldemGame[7600:c07] club
2013-03-14 10:27:53.082 TexasHoldemGame[7600:c07] diamond
2013-03-14 10:27:53.083 TexasHoldemGame[7600:c07] spade
2013-03-14 10:27:53.083 TexasHoldemGame[7600:c07] For thoroughness, here it is with both values and suits:
2013-03-14 10:27:53.084 TexasHoldemGame[7600:c07] 1 of club
2013-03-14 10:27:53.084 TexasHoldemGame[7600:c07] 10 of club
2013-03-14 10:27:53.085 TexasHoldemGame[7600:c07] 11 of club
2013-03-14 10:27:53.086 TexasHoldemGame[7600:c07] 12 of club
2013-03-14 10:27:53.087 TexasHoldemGame[7600:c07] 13 of club
2013-03-14 10:27:53.088 TexasHoldemGame[7600:c07] 2 of diamond
2013-03-14 10:27:53.089 TexasHoldemGame[7600:c07] 2 of spade
2013-03-14 10:27:53.090 TexasHoldemGame[7600:c07] Amount of cards in the array:  7
2013-03-14 10:27:53.092 TexasHoldemGame[7600:c07] Player does not have a straight flush.  7 in the array.
2013-03-14 10:27:53.092 TexasHoldemGame[7600:c07] isStraight called.
2013-03-14 10:27:53.093 TexasHoldemGame[7600:c07] Back in the isStraight method again.
2013-03-14 10:27:53.094 TexasHoldemGame[7600:c07] We're about to start iterating through the array, and here are the ranks in the array, before elimination:
2013-03-14 10:27:53.095 TexasHoldemGame[7600:c07] Rank:  1
2013-03-14 10:27:53.096 TexasHoldemGame[7600:c07] Rank:  2
2013-03-14 10:27:53.098 TexasHoldemGame[7600:c07] Rank:  2
2013-03-14 10:27:53.098 TexasHoldemGame[7600:c07] Rank:  10
2013-03-14 10:27:53.099 TexasHoldemGame[7600:c07] Rank:  11
2013-03-14 10:27:53.099 TexasHoldemGame[7600:c07] Rank:  12
2013-03-14 10:27:53.099 TexasHoldemGame[7600:c07] Rank:  13
2013-03-14 10:27:53.102 TexasHoldemGame[7600:c07] This is how many items are in the array, currently:  6
2013-03-14 10:27:53.103 TexasHoldemGame[7600:c07] After elimination:
2013-03-14 10:27:53.104 TexasHoldemGame[7600:c07] Rank:  1
2013-03-14 10:27:53.104 TexasHoldemGame[7600:c07] Rank:  2
2013-03-14 10:27:53.105 TexasHoldemGame[7600:c07] Rank:  10
2013-03-14 10:27:53.105 TexasHoldemGame[7600:c07] Rank:  11
2013-03-14 10:27:53.105 TexasHoldemGame[7600:c07] Rank:  12
2013-03-14 10:27:53.106 TexasHoldemGame[7600:c07] Rank:  13
2013-03-14 10:27:53.106 TexasHoldemGame[7600:c07] There are 5 or more cards.  Proceed.
2013-03-14 10:27:53.107 TexasHoldemGame[7600:c07] tempHand objectAtIndex:0 == 1
2013-03-14 10:27:53.107 TexasHoldemGame[7600:c07] tempHand objectAtIndex:1 == 2
2013-03-14 10:27:53.108 TexasHoldemGame[7600:c07] tempHand objectAtIndex:2 == 10
2013-03-14 10:27:53.143 TexasHoldemGame[7600:c07] tempHand objectAtIndex:3 == 11
2013-03-14 10:27:53.144 TexasHoldemGame[7600:c07] tempHand objectAtIndex:4 == 12
2013-03-14 10:27:53.144 TexasHoldemGame[7600:c07] tempHand objectAtIndex:5 == 13
2013-03-14 10:27:53.145 TexasHoldemGame[7600:c07] You have a straight.
2013-03-14 10:27:53.145 TexasHoldemGame[7600:c07] isFlush bool method called.
2013-03-14 10:27:53.146 TexasHoldemGame[7600:c07] FLUSH!!!  FLUSH!!!  FLUSH!!!
2013-03-14 10:27:53.146 TexasHoldemGame[7600:c07] isQuads bool method called.
2013-03-14 10:27:53.147 TexasHoldemGame[7600:c07] Print out the array, so we know what we're dealing with:
2013-03-14 10:27:53.148 TexasHoldemGame[7600:c07] 12 of club
2013-03-14 10:27:53.148 TexasHoldemGame[7600:c07] 1 of club
2013-03-14 10:27:53.149 TexasHoldemGame[7600:c07] 13 of club
2013-03-14 10:27:53.150 TexasHoldemGame[7600:c07] 2 of diamond
2013-03-14 10:27:53.150 TexasHoldemGame[7600:c07] 2 of spade
2013-03-14 10:27:53.151 TexasHoldemGame[7600:c07] 11 of club
2013-03-14 10:27:53.152 TexasHoldemGame[7600:c07] 10 of club
2013-03-14 10:27:53.152 TexasHoldemGame[7600:c07] Number of Aces:  1
Number of Deuces:  2
Number of Threes:  0
Number of Fours:  0
Number of Fives:  0
Number of Sixes:  0
Number of Sevens:  0
Number of Eights:  0
Number of Nines:  0
Number of Tens:  1
Number of Jacks:  1
Number of Queens:  1
Number of Kings:  1
2013-03-14 10:27:53.153 TexasHoldemGame[7600:c07] PLayer does not have quads.
2013-03-14 10:27:53.153 TexasHoldemGame[7600:c07] hasRoyalFlush == FALSE
2013-03-14 10:27:53.522 TexasHoldemGame[7600:c07] Player has a straight.
2013-03-14 10:27:53.523 TexasHoldemGame[7600:c07] Player has a flush. 
```

而且，您可以想象，屏幕上会弹出两个 UIAlertView，即“STRAIGHT”和“FLUSH”警报视图。上面的方法isStraightFlush和另外一个我试过：在方法中创建一个临时数组，在临时数组中存储游戏层中的接收数组，将卡片按花色分散成四个单独的数组（clubArray，diamondArray，heartArray， spadeArray)，然后遍历数组以查看卡片是否按顺序排列，就像我在上面所做的那样。如果阵列中的牌少于 5 张，那么当然不可能出现同花顺。

我不知道我做错了什么。抱歉，这篇文章太长了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:52:05.970

问题在这里：

```
[self sortByRank];
[self sortBySuit]; 
```

这些方法不会就地修改数组，而是返回一个排序后的数组，然后您将其丢弃。

我的建议：不要在 NSMutableArray 上创建一个类别，而是创建一个带有 NSMutableArray 属性的 Hand 类，称为`cards`. 然后`-sortByRank`and`-sortBySuit`可以重新分配该属性，并在您的其余逻辑中，替换`self`为`self.cards`.

**注意：**糟糕。我认为这不是问题，因为您在调用`-isStraightFlush`. 尽管如此，这些台词只会让人感到困惑。

我会留下这个答案，因为我建立更好的模型类的建议仍然有效。

**补充：**您也不应该对 NSNumber 和 NSString 对象进行指针比较。这实际上可能是问题所在。

```
card1.suit == card2.suit
card1.rank == (card2.rank - 1) 
```

而是比较值：

```
[card1.suit isEqualToString:card2.suit]
card1.rank.integerValue == card2.rank.integerValue - 1 
```

# dynamics-crm-2011 - Microsoft Dynamics CRM 2011 将实体同步到外部数据库表中

> ID：15416520
> 
> 赞同：2
> 
> 时间：2013-03-14T17:45:24.213
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我需要将一些实体（帐户、潜在客户、联系人等）同步到 crm 数据库之外但在同一服务器上的数据库表。我正在寻找一种支持的方式来做到这一点。这是我尝试过的，但不起作用：

我首先在外部数据库中创建了与 dbo.account （视图）中的模式匹配的表。然后我写了post create、post update、post assign和post delete插件来创建、更新或删除外部表中的记录（使用ADO.Net）。我以最通用的方式编写了插件，以便可以为任何对插件进行最小更改的实体注册它（通过不对字段名称进行硬编码）。这样做，我遇到的问题是其他表的外键字段。例如。在 dbo.account 中，有 PrimaryContactId 和 PrimaryContactIdName、PreferredSystemUserId 和 PreferredSystemUserIdName、ParentAccountId 和 ParentAccountIdName 等字段。在插件的输入参数中，xxxxId 字段在更新时可用，但“xxxxIdName”字段不可用。

有没有办法让我的插件解决方案工作？是否有更好的支持方式来获得同步表？提前致谢，

PS：1.数据同步必须是实时的

PS：2.这是我获取更新查询的功能

```
private static string PrepareUpdateQuery(ITracingService tracingService, IEnumerable<KeyValuePair<string, object>> attributeCollection, string entityName, string entityIdName)
    {

        var query = "Update MainDb.MSCRM." + entityName + " set ";
        foreach (KeyValuePair<string, object> keyValuePair in attributeCollection)
        {
            tracingService.Trace("Key: {0}", keyValuePair.Key);
            if (keyValuePair.Key != entityIdName && keyValuePair.Key != "modifiedonbehalfby")
            {
                query = query + keyValuePair.Key + " = ";
                if (keyValuePair.Value == null)
                    query = query + "null, ";
                else
                {
                    var typeOfValue = keyValuePair.Value.GetType().Name;
                    tracingService.Trace("typeOfValue: {0}", typeOfValue);
                    switch (typeOfValue)
                    {
                        case "EntityReference":
                            query = query + "'" + ((EntityReference)keyValuePair.Value).Id + "', ";
                            break;
                        case "OptionSetValue":
                            query = query + ((OptionSetValue)keyValuePair.Value).Value + ", ";
                            break;
                        case "BooleanManagedProperty":
                            query = query + (((BooleanManagedProperty)keyValuePair.Value).Value ? "1" : "0") + ", ";
                            break;
                        default:
                            query = query + "'" + keyValuePair.Value + "', ";
                            break;
                    }
                }
            }
        }
        return query;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:57:52.420

如果您所追求的只是作为当前执行插件上的属性的实体的名称，那么 EntityReference 对象具有应包含该名称的 Name 属性。如果不是，您可以使用 id 和逻辑名称查询 CRM，以获取您在引用实体上查找的任何值。

## 编辑 1

如果您只是移动数据，为什么还要设置引用名称？我已从您的数据库表中删除了这些名称，并创建了一个查找相应实体名称的视图。这就是 CRM 正在做的事情。它还使您的其他数据库更加规范化。IE。如果您更新由另一个实体引用的实体的名称，您将必须搜索并更新所有这些名称......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:14:19.113

xxxIdName 字段实际上只是视图的助手，您可以轻松找出它们应该包含的内容。

例如，假设您有一个名为“some company”的帐户，其主要联系人为“bob bobson”。在处理帐户实体时，primarycontactId 将是一个 guid，primarycontactIdName 将是“bob bobson”，accountIdName 将是“some company”。

在您的插件中执行此操作的最简单方法是查找相关实体并从那里获取值 - 90% 的时间它只是名称字段。

但是，您还需要考虑，如果您在使用 CRM 架构时做正确的事情，也许最好只复制您需要的字段并为同步表使用您自己的架构。

更新：刚刚看到您的代码，您正在覆盖查询中包含的值而不是将其设置回基本查询，因此您将在第二次通过 foreach 时得到奇怪的结果/错误

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T18:51:14.713

如果您一心想将相关实体名称放在主实体表中，您总是可以像这样抓取它：

```
var entityEntityRef = (EntityReference)keyValuePair.Value;
var relatedEntity = service.Retrieve(entityRef.LogicalName, entityRef.Id, new ColumnSet(true)); 
```

现在将 relatedEntity 作为所有可用属性。您将主要寻找名称字段，但有些实体是不同的，例如我相信使用全名字段的联系人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T22:34:56.480

事实上，您可以为所有实体注册一个插件（当然，检查发出消息的那个是否在已处理的列表中）。

```
IEnumerable<String> supportees = new String[]{ "account", "contact" };
if(!supportees.Any(element
  => element == targetLogicalName))
    return; 
```

至于链接实体，您有三个选择。

1.  跳过它们。不是完整的数据同步，但易于实施。
2.  仅存储指南。数据同步是实例范围的 - 有限但比较容易。
3.  获取所有链接数据。完整的信息，但要开发递归 PIA。

# solr - Solr 元数据索引

> ID：15416522
> 
> 赞同：0
> 
> 时间：2013-03-14T17:45:29.103
> 
> 标签：solr, solr-cell

我是 Solr 的新手，我正在通过存储在我的数据库中的 URL 从二进制文件中提取元数据。我想知道哪些字段可用于从 PDF 索引（将作为 column="" 启动的字段）。我还想知道如何在 Solr 中创建自定义字段。它是如何实现并映射到来自文件的特定元数据的。如果有人有可以向我展示的代码片段，将不胜感激。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:23:29.037

要在 Solr 中创建自定义字段，您需要修改`schema.xml`用于安装 Solr 的文件。发行版中包含的 Solr 示例附带的[schema.xml文件（位于 /example 文件夹下）包含大量用于文件提取的预定义元数据字段。](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_4_2/solr/example/solr/collection1/conf/schema.xml?view=markup)有关在 Solr 中创建自定义字段的信息，请参阅以下内容：

*   [SchemaXml](http://wiki.apache.org/solr/SchemaXml)
*   [文档、字段和架构设计](http://docs.lucidworks.com/display/solr/Documents,+Fields,+and+Schema+Design)

Solr 有一个内置的请求处理程序，用于从二进制文件中提取和映射元数据。详情请参考以下内容：

*   [提取请求处理程序](http://wiki.apache.org/solr/ExtractingRequestHandler)
*   [使用 Apache Tika 通过 Solr Cell 上传数据](http://docs.lucidworks.com/display/solr/Uploading+Data+with+Solr+Cell+using+Apache+Tika)

# jquery - jQuery Ajax 不发布任何数据

> ID：15416524
> 
> 赞同：2
> 
> 时间：2013-03-14T17:45:30.663
> 
> 标签：jquery, ajax, post

我在 portlet 中使用 Kendo UI DatePicker。这是我的 jQuery ajax 代码：

```
kendoWindow.find(".btnConfirm,.btnCancel").click(function(e)
        {
            if (jQuery(this).hasClass("btnConfirm"))
            {
                var strStartDate;
                var strEndDate;

                jQuery.ajax(
                {
                    url : window.urlGenerateWorkbook,
                    data :
                    {
                        strStartDate : jQuery("#startDate").data("kendoDatePicker").value(),
                        strEndDate : jQuery("#endDate").data("kendoDatePicker").value()
                    },
                    dataType : "json",
                    cache : false,
                    async : true,
                    type : "POST",
                    timeout : 0,
                    success : function(jsonResponse)
                    {
                        if (jsonResponse.hasOwnProperty('ERROR'))
                        {
                            alertError(jsonResponse['ERROR']);
                        }
                        else
                        {
                            jQuery('.pnlJournalEntry #tdEntries > div').empty();
                            setJournalEntries(strPortletID);
                        }
                    },
                    error : function(jsonResponse)
                    {

                        alertError("There was no response from the server.");

                    }
                });
            }

            kendoWindow.data("kendoWindow").close();
        }).end(); 
```

我正在使用 Kendo Window 在 portlet 中打开另一个窗口，该窗口将询问日期范围。然后它获取这些日期并通过 ajax 发送。当我提醒 strStartDate 和 strEndDate 时，我得到了值。但在 Java 方面，我得到了 NullPointerException。当我在 Firebug 中检查 POST 方法时，我没有发布任何内容。

有人可以帮我解决这个问题吗？谢谢。

编辑：我想我发现了这个问题。Ajax 中的所有内容都需要作为字符串发送。Kendo UI DatePicker，当我将 strStartDate 和 strEndDate 设置为 value() 时，它返回了一个日期。由于 Ajax 不能发送日期，我不得不这样做：

```
data :
{
    strStartDate : jQuery('#startDate').data("kendoDatePicker").value().toString(),
    strEndDate : jQuery('#endDate').data("kendoDatePicker").value().toString()
}, 
```

现在将以下内容发送到 Java ViewController：

2013 年 3 月 1 日星期五 00:00:00 GMT-0500（东部标准时间） 2013 年 3 月 12 日星期二 00:00:00 GMT-0400（东部夏令时间）

我仍然得到 NullPointerException，但我认为它现在在 Java 端，所以我现在至少得到了一些数据。谢谢你们的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:53:21.210

在你的ajax调用之上，试试这个：

```
var payload = {
    strStartDate : jQuery("#startDate").data("kendoDatePicker").value(),
    strEndDate : jQuery("#endDate").data("kendoDatePicker").value()
}; 
```

然后您的 ajax 声明应更改为：

```
data: JSON.stringify(payload), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:54:38.853

尝试添加**contentType**

```
contentType: "application/json; charset=utf-8", 
```

# json - 在 HTML 5 中将列表数据添加到本地存储

> ID：15416526
> 
> 赞同：0
> 
> 时间：2013-03-14T17:45:33.193
> 
> 标签：json, html, google-maps, local-storage

我想使用 HTML 5 将谷歌地图标记位置添加到我的本地存储中。标记是在用户单击地图时动态创建的，应该直接保存到本地存储中。

我正在考虑一次将一个 JSON 字符串放入所有标记的本地存储中，但这会`JSON.stringify`在每次用户添加标记时导致数组中的一个。

另一种可能性是使用像这样的计数器单独添加每个标记，`localStorage["marker.1"]`但这种方法感觉不对，因为标记也可以删除。

也不能在事件上写入数据`unload`，因为它不够可靠。

有没有一种简洁明了的方法来实现这一点，而无需一直将所有内容都串起来或使用计数器？

# c++ - 数组类的构造函数

> ID：15416527
> 
> 赞同：1
> 
> 时间：2013-03-14T17:45:40.793
> 
> 标签：c++, arrays, class, constructor

我在这段代码中遇到错误

```
class business
{
    public:
        business();  // Default Constructor
        business(string busines,int r)
        {
            busines=busines;
            ratings=r;
        }   // constructor;

    private:

        string busines;
        int ratings;
        int items_owned;
        int business_cancellation;
        int biz_size_of_building;
        int biz_shipping_method;
};

int main(int argc, char *argv[])
{
    business b[10];

    b[b_count](busines,rating);

    return 0;
} 
```

它给了我以下错误（[http://ideone.com/FfajNS](http://ideone.com/FfajNS)）：

```
prog.cpp: In function ‘int main(int, char**)’:
prog.cpp:32:32: error: no match for call to ‘(business) (std::string&, int&)’ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:49:27.717

您正在尝试在已构造的对象上调用构造函数……在数组创建期间调用了默认构造函数，因此您不能再次“构造”对象。对于您的应用程序，您可能希望考虑使用一个`std::vector`可以使用从一组默认参数初始化的对象创建类似数组的容器的位置。

例如，您可以这样做：

```
std::vector<business> array(10, business(business_string, rating)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:24:07.953

我相信你想要这样的东西：

```
b[2] = business("Denny's", 50); 
```

这通过使用给定参数调用构造函数来创建一个临时业务变量。然后将临时复制到数组的插槽 3 中`b`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:52:55.497

该数组已经使用该类`b`的构造函数创建了 10 个业务对象。`default`您可以通过以下方式访问这些对象`business someBusiness = b[someIndex];`

**编辑：**

如果要设置单个对象的值，只需执行以下操作（注意，您不创建这些对象，只需设置它们的值）：

```
for(int i=0; i<10; i++)
{
    b[i].busines = ...;
    b[i].ratings = ...;

    /* or to create new ones */

    b[i] = business("asd", 10);
} 
```

`vector`如果您像 Jason 建议的那样将这些对象存储在 中，那就更好了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:54:44.517

```
 business b[10]; 
```

您创建 10 个“默认”业务对象。b_count 是什么？我希望从 0 到 9 有一些 int。但是在这里，您正在“调用”具有 2 个参数的业务对象：

```
 b[b_count](busines,rating); 
```

但是业务没有`operator()()`用 2 个参数定义。

编辑：您绝对必须使用`std::vector`并仔细阅读其他答案。但我知道，有时初学者是不允许使用 STL 库的，无论如何，您似乎应该了解如何使用构造函数以及如何初始化数组的元素。请阅读静态成员及其定义方式，并尝试了解以下示例的工作原理。

```
#include <string>
using std::string;
class business
{
    public:
        business()                        // Default Constructor
            :busines(def_busines),ratings(def_ratings){}; 
        business(const string& bus,int r)   // constructor;
            :busines(bus),ratings(r){}

        static void SetDef(const string& busines,int r)
        {
            def_busines=busines;
            def_ratings=r;
        }

    private:

        string      busines;
        int         ratings;
        static string def_busines;
        static int def_ratings;
        int items_owned;
        int business_cancellation;
        int biz_size_of_building;
        int biz_shipping_method;

};
    string business::def_busines="";  // Set here the default-defaults
    int business::def_ratings=1;

int main(int argc, char *argv[])
{
    business::SetDef("Some business",2);
    business a[10];

    business::SetDef("Other business",3);
    business b[10];

    business c("Third business",4);

    return 0;
} 
```

# ruby-on-rails - has_one 通过多表继承和多态关联

> ID：15416528
> 
> 赞同：13
> 
> 时间：2013-03-14T17:45:42.600
> 
> 标签：ruby-on-rails, activerecord, polymorphic-associations, multi-table-inheritance

在我目前正在 Rails 4.0.0beta1 下开发的项目中，我需要基于用户的身份验证，其中每个用户都可以链接到一个实体。我对rails有点陌生，这样做有一些麻烦。

模型如下：

```
class User < ActiveRecord::Base
end

class Agency < ActiveRecord::Base
end

class Client < ActiveRecord::Base
  belongs_to :agency
end 
```

我需要的是用户能够链接到代理机构或客户，但不能同时链接到两者（这两个是我将要调用的实体）。它可以完全没有链接，最多只有一个链接。

我寻找的第一件事是如何在 Rails 中进行[多表继承](http://techspry.com/ruby_and_rails/multiple-table-inheritance-in-rails-3/)（MTI）。但是有些事情阻止了我：

*   它不是开箱即用的
*   对于像我这样的新手来说，MTI 看起来有点难以实施
*   实施解决方案的 gem 似乎过时了，要么太复杂，要么不完整
*   宝石可能会在 rails4 下损坏，因为它们已经有一段时间没有更新了

所以我寻找另一种解决方案，我发现了[多态关联](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)。

[从昨天开始，我就一直在研究这个问题，即使在Rails 多态 has_many :through](https://stackoverflow.com/questions/4641500/rails-polymorphic-has-many-through)和[ActiveRecord、has_many :through 和多态关联](https://stackoverflow.com/questions/1683265/activerecord-has-many-through-and-polymorphic-associations)的帮助下，我也花了一些时间让它工作

我设法使上述问题中的示例起作用，但花了一段时间，我终于遇到了两个问题：

1.  如何将 user 中的关系转换为 has_one 关联并能够“盲目地”访问链接实体？
2.  如何设置约束以使用户不能拥有多个实体？
3.  有没有更好的方法来做我想做的事？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T17:45:42.600

这是一个完整的工作示例：

迁移文件：

```
class CreateUserEntities < ActiveRecord::Migration
  def change
    create_table :user_entities do |t|
      t.integer :user_id
      t.references :entity, polymorphic: true

      t.timestamps
    end

    add_index :user_entities, [:user_id, :entity_id, :entity_type]
  end
end 
```

型号：

```
class User < ActiveRecord::Base
  has_one :user_entity

  has_one :client, through: :user_entity, source: :entity, source_type: 'Client'
  has_one :agency, through: :user_entity, source: :entity, source_type: 'Agency'

  def entity
    self.user_entity.try(:entity)
  end

  def entity=(newEntity)
    self.build_user_entity(entity: newEntity)
  end
end

class UserEntity < ActiveRecord::Base
  belongs_to :user
  belongs_to :entity, polymorphic: true

  validates_uniqueness_of :user
end

class Client < ActiveRecord::Base
  has_many :user_entities, as: :entity
  has_many :users, through: :user_entities
end

class Agency < ActiveRecord::Base
  has_many :user_entities, as: :entity
  has_many :users, through: :user_entities
end 
```

如您所见，我添加了一个 getter 和一个 setter，我将其命名为“实体”。这是因为`has_one :entity, through: :user_entity`引发以下错误：

```
ActiveRecord::HasManyThroughAssociationPolymorphicSourceError: Cannot have a has_many :through association 'User#entity' on the polymorphic object 'Entity#entity' without 'source_type'. Try adding 'source_type: "Entity"' to 'has_many :through' definition. 
```

最后，这是我设置的测试。我给它们是为了让每个人都明白知道你可以在这些对象之间设置和访问数据。我不会详细介绍我的 FactoryGirl 模型，但它们非常明显

```
require 'test_helper'

class UserEntityTest < ActiveSupport::TestCase

  test "access entity from user" do
    usr = FactoryGirl.create(:user_with_client)

    assert_instance_of client, usr.user_entity.entity
    assert_instance_of client, usr.entity
    assert_instance_of client, usr.client
  end

  test "only right entity is set" do
    usr = FactoryGirl.create(:user_with_client)

    assert_instance_of client, usr.client
    assert_nil usr.agency
  end

  test "add entity to user using the blind rails method" do
    usr = FactoryGirl.create(:user)
    client = FactoryGirl.create(:client)

    usr.build_user_entity(entity: client)
    usr.save!

    result = UserEntity.where(user_id: usr.id)
    assert_equal 1, result.size
    assert_equal client.id, result.first.entity_id
  end

  test "add entity to user using setter" do
    usr = FactoryGirl.create(:user)
    client = FactoryGirl.create(:client)

    usr.client = client
    usr.save!

    result = UserEntity.where(user_id: usr.id)
    assert_equal 1, result.size
    assert_equal client.id, result.first.entity_id
  end

  test "add entity to user using blind setter" do
    usr = FactoryGirl.create(:user)
    client = FactoryGirl.create(:client)

    usr.entity = client
    usr.save!

    result = UserEntity.where(user_id: usr.id)
    assert_equal 1, result.size
    assert_equal client.id, result.first.entity_id
  end

  test "add user to entity" do
    usr = FactoryGirl.create(:user)
    client = FactoryGirl.create(:client)

    client.users << usr

    result = UserEntity.where(entity_id: client.id, entity_type: 'client')

    assert_equal 1, result.size
    assert_equal usr.id, result.first.user_id
  end

  test "only one entity by user" do

    usr = FactoryGirl.create(:user)
    client = FactoryGirl.create(:client)
    agency = FactoryGirl.create(:agency)

    usr.agency = agency
    usr.client = client
    usr.save!

    result = UserEntity.where(user_id: usr.id)
    assert_equal 1, result.size
    assert_equal client.id, result.first.entity_id

  end

  test "user uniqueness" do

    usr = FactoryGirl.create(:user)
    client = FactoryGirl.create(:client)
    agency = FactoryGirl.create(:agency)

    UserEntity.create!(user: usr, entity: client)

    assert_raise(ActiveRecord::RecordInvalid) {
      UserEntity.create!(user: usr, entity: agency)
    }

  end

end 
```

我希望这可以对某人有所帮助。我决定将整个解决方案放在这里，因为与 MTI 相比，它在我看来是一个不错的解决方案，而且我认为设置类似的东西不应该花费太多时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T22:16:18.023

上面的答案给我带来了一些麻烦。验证唯一性时使用列名而不是模型名。将 validates_uniqueness_of :user 更改为 validates_uniqueness_of :user_id。

# iphone - 如何使用 UISwitch 告诉控制器检查方法中的某个条件

> ID：15416536
> 
> 赞同：0
> 
> 时间：2013-03-14T17:45:55.413
> 
> 标签：iphone, ios, objective-c, cocoa-touch, cocoa

在我的纸牌配对游戏中：

-我有一种方法可以检查在特定索引中翻转的卡片。它基本上是应用程序中的整个逻辑。

-我有另一种检查匹配的方法。

现在，我在视图控制器中创建了一个切换按钮，它将告诉控制器用户将模式更改为“3”卡而不是基本模式（2 卡）。

我的问题是，如果有超过 2 个匹配项，我如何告诉控制器检查匹配方法。这让我发疯，请帮助我解决这个问题。

我在控制器中还有一个 updateUI 方法，可以让匹配的卡片消失，所以我需要确保它的行为相同。

以下代码显示了flipCardAtIndex方法，匹配方法和视图控制器以相同的顺序：

CardMatchingGame.m（最后一个方法是flipCardAtIndex）：

```
#import "CardMatchingGame.h"
#import "PlayingCardsDeck.h"

@interface CardMatchingGame()

@property (readwrite, nonatomic) int score;
@property (strong, nonatomic) NSMutableArray *cards;
@property (strong, nonatomic) NSString *notification;
@end        

@implementation CardMatchingGame

-(NSMutableArray *) cards {

    if (!_cards) _cards = [[NSMutableArray alloc] init];
    return _cards;
}

-(id)initWithCardCount:(NSUInteger)count usingDeck:(Deck *)deck {

    self = [super init];

    if (self) {

        for (int i = 0; i < count; i++) {
            Card *card = [deck drawRandonCard];

            if (!card) {
                self = nil;
            } else {
                self.cards[i] = card;
            }
        }
    }
    return self;
}

-(Card *) cardAtIndex:(NSUInteger)index {

    return (index < self.cards.count) ? self.cards[index] : nil;
}

#define FLIP_COST 1
#define MISMATCH_PENALTY 2
#define BONUS 4

-(void) flipCardAtIndex:(NSUInteger)index {

    Card *card = [self cardAtIndex:index];

    if (!card.isUnplayable) {

        if (!card.isFaceUp) {

            for (Card *otherCard in self.cards) {

                if (otherCard.isFaceUp && !otherCard.isUnplayable) {

                    NSMutableArray *myCards = [[NSMutableArray alloc] init];

                    [myCards addObject:otherCard];

                    int matchScore = [card match:myCards];

                    if (matchScore) {

                        otherCard.unplayble = YES;
                        card.unplayble = YES;

                        self.notification = [NSString stringWithFormat:@"%@ & %@  match!", card.contents, otherCard.contents];

                        self.score += matchScore * BONUS;
                    } else {
                        otherCard.faceUp = NO;
                        self.score -= MISMATCH_PENALTY;
                        self.notification = [NSString stringWithFormat:@"%@ did not matched to %@", card.contents, otherCard.contents];
                    }
                    break;
                }

            }
            self.score -= FLIP_COST;
        }
        card.faceUp = !card.isFaceUp;   
    }
}
@end 
```

PlayingCards.m（仅第一种方法，匹配方法）：

```
#import "PlayingCards.h"

@implementation PlayingCards

@synthesize suit = _suit;

//overriding the :match method of cards to give different acore if its only a suit match or a number match
-(int)match:(NSArray *)cardToMatch {

    int score = 0;

    for (int i = 0; i < cardToMatch.count; i++) {

        PlayingCards *nextCard = cardToMatch[i];
        if ([nextCard.suit isEqualToString:self.suit]) {

            score += 1;
        } else if (nextCard.rank == self.rank) {

            score += 4;
        }
    }

   return score;

} 
```

我的视图控制器（最后一种方法是切换按钮）：

```
#import "CardGameViewController.h"
#import "PlayingCardsDeck.h"
#import "CardMatchingGame.h"

@interface CardGameViewController ()

@property (weak, nonatomic) IBOutlet UILabel *flipsLabel;
@property (weak, nonatomic) IBOutlet UILabel *notificationLabel;
@property (weak, nonatomic) IBOutlet UILabel *scoreCounter;
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;
@property (strong, nonatomic) CardMatchingGame *game;
@property (nonatomic) int flipsCount;

@property (nonatomic) NSNumber *mode;
//@property (weak, nonatomic) IBOutlet UISwitch *mySwitch;
@property (weak, nonatomic) IBOutlet UISwitch *mySwitch;

@end

@implementation CardGameViewController

@synthesize mode = _mode;

//creating the getter method that creates a new card game.
-(CardMatchingGame *) game {

    if (!_game) _game = [[CardMatchingGame alloc] initWithCardCount:self.cardButtons.count usingDeck:[[PlayingCardsDeck alloc] init]];
    return _game;
}

//creating a setter for the IBOutletCollection cardButtons
-(void) setCardButtons:(NSArray *)cardButtons {

    _cardButtons = cardButtons;
   [self updateUI];
}

//creating the setter for the flipCount property. Whick is setting the flipsLabel to the right text and adding the number of counts.
-(void) setFlipsCount:(int)flipsCount {

    _flipsCount = flipsCount;
    self.flipsLabel.text = [NSString stringWithFormat:@"Flips: %d", self.flipsCount];

}

-(void) updateUI {

    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.unplayble;
        if (card.unplayble) {
            cardButton.alpha = 0.1;
        }

        //updating the score 
        self.scoreCounter.text = [NSString stringWithFormat:@"Score: %d", self.game.score];

        //if notification in CardMatchingGame.m is no nil, it will be presented 
        if (self.game.notification) {

        self.notificationLabel.text = self.game.notification;

        }
    }
}

//Here I created a method to flipCards when the card is selected, and give the user a random card from the deck each time he flips the card. After each flip i'm incrementing the flipCount setter by one.
- (IBAction)flipCard:(UIButton *)sender {

    [self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender] forMode:self.mode];
    self.flipsCount++;
    [self updateUI];
}

//sending an alert if the user clicked on new game button
- (IBAction)newGame:(UIButton *)sender {

   UIAlertView* mes=[[UIAlertView alloc] initWithTitle:@"Are you sure..?" message:@"This will start a new game" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];

    [mes show];

}

//preforming an action according to the user choice for the alert yes/no to start a new game
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if (buttonIndex != [alertView cancelButtonIndex]) {

        self.flipsCount = 0;
        self.game = nil;
        for (UIButton *button in self.cardButtons) {
            Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:button]];
            card.unplayble = NO;
            card.faceUp = NO;
            button.alpha = 1;
        }

        self.notificationLabel.text = nil;
        [self updateUI];

    }
}

-(void) setMode:(NSNumber *)mode {

    mode = _mode;
}

-(void) switchValueChange:(id)sender {

    UISwitch *Switch = (UISwitch *) sender;

    NSNumber *twoCards = [NSNumber numberWithInt:2];
    NSNumber *threeCards = [NSNumber numberWithInt:3];

    if (Switch.on) {
        self.mode = twoCards;
    }
    else
    {
        self.mode = threeCards;
    }
}

- (void)viewDidLoad
{
    UISwitch *mySwitch;
    [super viewDidLoad];
    [mySwitch addTarget:self action:@selector(switchValueChange:) forControlEvents:UIControlEventValueChanged];
    [self updateUI];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:22:58.557

`@property (weak, nonatomic) IBOutlet UISwitch *mySwitch;`从您的 .m 类中删除。相反，转到您的故事板，单击具有开关的控制器，然后单击右上角的助手编辑器按钮（看起来像一张脸）。它将打开 CardGameViewController.h。现在右键单击故事板上的切换视图，然后单击并从 New Referencing Outlet 拖动到 CardViewController.h。这就是您将开关引用到控制器中的方式。现在您在接口文件中有了 switch 变量，转到您的实现文件 (CardGameViewController.m) 并合成该变量：

```
@synthesize mySwitch = _mySwitch; 
```

现在，将您的 viewDidLoad 方法更改为：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.mySwitch addTarget:self action:@selector(switchValueChange:) forControlEvents:UIControlEventValueChanged];
    [self updateUI];

} 
```

同时删除 setMode 方法。如果您正在合成模式变量，则不需要它。

现在试一试。你知道如何在 xcode 中使用断点进行调试吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:29:46.673

实际上，获得开关值是很容易的部分。你可以设置一个从你的 switch 到你的 viewController (CardGameViewController) 的引用出口，并在你的 view controller 的 viewDidLoad 方法中，添加方法来监听 switch 值的变化：

```
[mySwitch addTarget:self action:@selector(switchValueChange:) forControlEvents:UIControlEventValueChanged]; 
```

添加一个名为`NSNumber *mode`CardGameViewController 的新属性并合成它。现在您可以在 switchValueChanged 方法中更新“模式”（我相信它可能是一个实例变量）：

```
- (void)switchValueChange:(id)sender
  {
      UISwitch *switch = (UISwitch *) sender;
      if (sender.on)
        self.mode = 2;
      else
        self.mode = 3;
  } 
```

如果我的假设是正确的，那么“模式”是指要匹配多少张牌，对吗？2 表示至少 2 张牌面朝上时应相同，3 表示 3 张牌应在花色或数字上匹配。

首先将您的 PlayingCards 中的 match 方法更改为类似的内容（接受另一个名为 mode 的参数）（您可能也必须在其父类中更新相同的方法）：

```
//overriding the :match method of cards to give different acore if its only a suit match or a number match
-(int)match:(NSArray *)cardToMatch forMode:(NSNumber *) mode{

    int score = 0;
    int cardsMatched = 0;

    for (int i = 0; i < cardToMatch.count; i++) {

        PlayingCards *nextCard = cardToMatch[i];
        if ([nextCard.suit isEqualToString:self.suit]) {

            score += 1;
            cardsMatched++;
        } else if (nextCard.rank == self.rank) {

            score += 4;
            cardsMatched++;
        }

        if (cardsMatched >= [mode intValue])
          break;

    }

   return score;

} 
```

现在，在您的 CardMatchingGame.m 方法中，将 flipCardAtIndex 方法更改为此（接受另一个名为 mode 的参数）：

```
-(void) flipCardAtIndex:(NSUInteger)index forMode (NSNumber *mode) {

    Card *card = [self cardAtIndex:index];

    if (!card.isUnplayable) {

        if (!card.isFaceUp) {

            NSMutableArray *myFaceUpCards = [[NSMutableArray alloc] init];

            // UPDATED: Loop through all the cards that are faced up and add them to an array first
            for (Card *otherCard in self.cards) {

                if (otherCard.isFaceUp && !otherCard.isUnplayable && orderCard != card) {

                    [myCards addObject:otherCard];
             }

             // UPDATED: Now call the method to do the match. The match method now takes an extra parameter
                    int matchScore = [card match:myCards forMode:mode];

                    if (matchScore) {

                        otherCard.unplayble = YES;
                        card.unplayble = YES;

                        self.notification = [NSString stringWithFormat:@"%@ & %@  match!", card.contents, otherCard.contents];

                        self.score += matchScore * BONUS;
                    } else {
                        otherCard.faceUp = NO;
                        self.score -= MISMATCH_PENALTY;
                        self.notification = [NSString stringWithFormat:@"%@ did not matched to %@", card.contents, otherCard.contents];
                    }

            }
            self.score -= FLIP_COST;
        }
        card.faceUp = !card.isFaceUp;   
    }
} 
```

最后，将调用更改为

```
[self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]]; 
```

在

```
- (IBAction)flipCard:(UIButton *)sender 
```

CardGameViewController 的方法

```
[self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender] forMode:self.mode]; 
```

看看这是否有意义。

# php - 随机化特定组mysql

> ID：15416544
> 
> 赞同：0
> 
> 时间：2013-03-14T17:46:08.380
> 
> 标签：php, mysql, sql

所以我有这行代码：

```
$results = mysql_query('
    SELECT * 
    FROM members 
    WHERE category1="Photographers" 
    ORDER BY premium DESC, featured DESC, company ASC'); 
```

一切都很好，高级会员出现在精选之上。推荐在普通会员之上，他们都是按字母顺序排列的。但是，我希望特色成员显示在常规成员之上，但随机而不是按字母顺序显示。我试过 RAND() 但它随机化了我所有的成员，请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:49:45.123

```
SELECT * 
FROM members 
WHERE category1="Photographers" 
ORDER BY 
    premium DESC, 
    featured DESC, 
    CASE WHEN featured = 1 THEN RAND() ELSE company END ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:49:15.843

您可以在 ORDER BY 中使用 CASE，例如

```
SELECT * 
FROM members 
WHERE category1="Photographers" 
ORDER BY CASE WHEN Featured = 1 THEN 0 ELSE 1 END, Rand() 
```

# android - 键盘出现时平滑滚动布局？

> ID：15416545
> 
> 赞同：3
> 
> 时间：2013-03-14T17:46:10.367
> 
> 标签：android, android-layout, scroll, android-edittext, android-softkeyboard

目前，当 EditText 成为焦点并且键盘出现时，键盘会覆盖表单布局一秒钟，然后布局容器调整大小以显示表单，如下图所示。

![在此处输入图像描述](../Images/ed19e8ecd0d883b37771c7ed1929fca5.png)

我希望布局在键盘上升时平滑调整大小。这可能吗？

![在此处输入图像描述](../Images/723296b6ede347271d11963b5657aaa3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T09:25:38.900

将此添加到您的清单中：

```
android:windowSoftInputMode="adjustResize|stateVisible" 
```

# ruby-on-rails - 我的发现者疯了。（.find返回错误的类？）

> ID：15416551
> 
> 赞同：3
> 
> 时间：2013-03-14T17:46:23.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

Rails 3.2.11 MySql2 宝石

嗨，有人知道为什么我的 find 方法返回了错误类型的 activerecord 吗？

这是模型：

```
class NameList < ActiveRecord::Base
  attr_accessible :name, :selected, :type
  self.table_name='name_lists'
end 
```

这是控制台输出：

```
>> k=NameList.find(28)
NameList Load (0.0ms)  SELECT `name_lists`.* FROM `name_lists` WHERE `name_lists`.`id` = 28 LIMIT 1
#<Neighborhood id: 28, name: "Bayview">

>> k.class
Neighborhood(id: integer, city_id: integer, name: string, street_count: integer,  relative_value: float, home_count: integer, min_lot_size: integer, created_at: datetime, updated_at: datetime) 
```

请注意，我正在调用 NameList.find，但我得到的是 Neighborhood 对象。奇怪的是，sql 似乎是正确的——它查询 NameList 表。

Neighborhood 对象没有什么特别之处：下面是它的模型：

```
class Neighborhood < ActiveRecord::Base
  belongs_to :city
  has_many :streets
  attr_accessible :name, :relative_value, :street_count
  def self.make(name, relative_value, min_lot_size, street_count, home_count)
     n=Neighborhood.new
     n.name = name
   end
 end 
```

但是，当我尝试保存它时-它使用 Neighborhood 模式的定义并尝试更新错误的表。

```
> k.name = "Foo"
"Foo"

>> k.save
(1.0ms)  BEGIN
(0.0ms)  UPDATE `neighborhoods` SET `name` = 'Foo', `updated_at` = '2013-03-14 17:40:46' WHERE `neighborhoods`.`id` = 28
(0.0ms)  COMMIT
 true 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:01:49.253

您偶然发现了 Rails 单表继承 (STI)，如果您在表中添加“类型”列，您会立即得到它。本质上，该对象是从名称与该记录中类型列的值匹配的类实例化的。

如果您想了解 STI，请继续阅读[此处](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)，查找单表继承部分。在您的情况下，我敢打赌您并不真正想要这种行为，因此您的解决方案是将列重命名为 kind、category 或任何对您有意义的名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T15:08:15.820

但是，如果需要列名`type`，您可以在每个模型的基础上关闭单表继承。[在这篇文章](https://stackoverflow.com/questions/18243367/rails-invalid-single-inheritance)中查看我的答案

# ios - 如何在 iOS 中识别混合图层？

> ID：15416554
> 
> 赞同：2
> 
> 时间：2013-03-14T17:46:46.243
> 
> 标签：ios, debugging, uiview-hierarchy

我正在触发 iOS 动画以在我的屏幕上移动一些元素，当我这样做时，屏幕底部的一个区域（远离我*认为*我正在执行操作的位置）会稍微改变阴影。当我在 iPhone 模拟器中打开“显示混合图层”时，很明显在我的动画开始时，*一些东西*开始覆盖该区域，但我不知道是什么。我添加到屏幕上的视图是一个复合视图，包括一个滚动视图和一个叠加层——其中的某些东西超出了它应该在的范围内，我不知道是什么。模拟器显然知道它是什么——它很高兴为我将它着色为红色作为混合层——但我无法让它告诉我*什么*图层正在混合，所以我可以修复它。我该怎么做呢？

ETA：如果我在插入的视图上打开 clipsToBounds，我的问题就会消失。但是我仍然想知道在尝试调试时如何识别分层视图。有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:51:14.597

尝试为所有内容设置动画，但每次都隐藏一个子视图，直到某个时刻，子视图被删除并且问题不再可见 - 您将知道哪个视图有问题。

更好的是去 [查看子视图] - 真正访问它们。

# android - Android SDK 虽然不想启动但条件为真

> ID：15416556
> 
> 赞同：0
> 
> 时间：2013-03-14T17:47:04.657
> 
> 标签：android, while-loop, conditional-statements

我有一个变量，当我单击一个按钮时，它会更改（设置为 1），然后应该输入一段时间，因为变量设置为 1 但它没有。在 logcat Metronome 中，单击的消息被打印，但 InWhile 消息没有被打印。为什么？我应该怎么做才能进去？

```
 metronomepp.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (ms==0) {ms=1;}
            Log.i("Metronome clicked", ""+ms);
        }
    });

    while (ms == 1) {
        Log.i("Metronome", "InWhile");
        if (metronome.isPlaying()) {metronome.stop();}
        metronome.seekTo(0);
        metronome.setOnSeekCompleteListener(null);
        metronome.start();
        metronome.setOnCompletionListener(null);
        metronomepp.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                ms=0;
            }
        });
    } 
```

已解决：在点击时移动！但是现在应用程序崩溃了。

按下按钮后的 LogCat（声音只播放一次，然后应用程序崩溃）：

```
03-14 19:10:30.584: I/Metronome clicked(25448): 1
03-14 19:10:30.584: I/Metronome(25448): InWhile
03-14 19:10:30.584: V/MediaPlayer(25448): isPlaying: 0
03-14 19:10:30.584: V/MediaPlayer-JNI(25448): isPlaying: 0
03-14 19:10:30.584: V/MediaPlayer-JNI(25448): seekTo: 0(msec)
03-14 19:10:30.584: V/MediaPlayer(25448): seekTo 0
03-14 19:10:30.584: V/MediaPlayer(25448): getDuration
03-14 19:10:30.584: V/MediaPlayer(25448): message received msg=4, ext1=0, ext2=0
03-14 19:10:30.589: V/MediaPlayer(25448): Received seek complete
03-14 19:10:30.589: V/MediaPlayer(25448): All seeks complete - return to regularly scheduled program
03-14 19:10:30.589: V/MediaPlayer(25448): callback application
03-14 19:10:30.589: V/MediaPlayer(25448): back from callback
03-14 19:10:30.589: V/MediaPlayer-JNI(25448): start
03-14 19:10:30.589: V/MediaPlayer(25448): start
03-14 19:10:30.619: D/AndroidRuntime(25448): Shutting down VM
03-14 19:10:30.619: W/dalvikvm(25448): threadid=1: thread exiting with uncaught exception (group=0x40c581f8)
03-14 19:10:30.624: E/AndroidRuntime(25448): FATAL EXCEPTION: main
03-14 19:10:30.624: E/AndroidRuntime(25448): java.lang.IllegalMonitorStateException: object not locked by thread before wait()
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.Object.wait(Native Method)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.Object.wait(Object.java:401)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at com.example.guitartools.MetronomeActivity$3.onClick(MetronomeActivity.java:72)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.view.View.performClick(View.java:3627)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.view.View$PerformClick.run(View.java:14329)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.os.Handler.handleCallback(Handler.java:605)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.os.Handler.dispatchMessage(Handler.java:92)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.os.Looper.loop(Looper.java:137)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at android.app.ActivityThread.main(ActivityThread.java:4511)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.reflect.Method.invokeNative(Native Method)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at java.lang.reflect.Method.invoke(Method.java:511)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-14 19:10:30.624: E/AndroidRuntime(25448):    at dalvik.system.NativeStart.main(Native Method)
03-14 19:10:30.969: V/MediaPlayer(25448): message received msg=2, ext1=0, ext2=0
03-14 19:10:30.969: V/MediaPlayer(25448): playback complete
03-14 19:10:30.969: V/MediaPlayer(25448): callback application
03-14 19:10:30.969: V/MediaPlayer(25448): back from callback 
```

这是在while中使用Thread之后的代码：

```
 metronomepp.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if (ms==0) {ms=1;}
            while (ms == 1) {
                runThread();
            }
        }
    }); 
```

这是onCreate之外的线程代码：

```
private void runThread() {
    new Thread() {
        public void run() {

                if (metronome.isPlaying()) {metronome.pause();}
                metronome.seekTo(0);
                metronome.setOnSeekCompleteListener(null);
                metronome.start();
                metronome.setOnCompletionListener(null);
                try {
                    Thread.sleep((long) timetw);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                metronomepp.setOnClickListener(new OnClickListener() {
                    public void onClick(View v) {
                        Log.i("Metronome", "InWhile1");
                        ms=0;
                    }
                });
        }
    }.start();
} 
```

并且在启动此活动后 LogCat 输出：

```
03-14 19:56:46.214: D/AndroidRuntime(28668): Shutting down VM
03-14 19:56:46.214: W/dalvikvm(28668): threadid=1: thread exiting with uncaught exception (group=0x40c581f8)
03-14 19:56:46.219: E/AndroidRuntime(28668): FATAL EXCEPTION: main
03-14 19:56:46.219: E/AndroidRuntime(28668): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.crnibero.guitartools/com.example.guitartools.MetronomeActivity}: java.lang.NullPointerException
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1891)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.os.Looper.loop(Looper.java:137)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.ActivityThread.main(ActivityThread.java:4511)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at java.lang.reflect.Method.invokeNative(Native Method)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at java.lang.reflect.Method.invoke(Method.java:511)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at dalvik.system.NativeStart.main(Native Method)
03-14 19:56:46.219: E/AndroidRuntime(28668): Caused by: java.lang.NullPointerException
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.Activity.findViewById(Activity.java:1794)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at com.example.guitartools.MetronomeActivity.<init>(MetronomeActivity.java:29)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at java.lang.Class.newInstanceImpl(Native Method)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at java.lang.Class.newInstance(Class.java:1319)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.Instrumentation.newActivity(Instrumentation.java:1026)
03-14 19:56:46.219: E/AndroidRuntime(28668):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
03-14 19:56:46.219: E/AndroidRuntime(28668):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:49:07.967

您必须将您的 While 循环代码放在 onClick 中。

# css - CSS 打印样式表：隐藏除特定图像之外的所有内容，显示整页

> ID：15416557
> 
> 赞同：3
> 
> 时间：2013-03-14T17:47:05.087
> 
> 标签：css, printing, stylesheet

我正在尝试构建一个仅打印特定图像的样式表，并将图像大小调整为覆盖整个页面。

在我的 media="print" 样式表中，我有：

```
@page { 
    margin: 0.5in; 
}
body {
    width: 100%;
}
body * {
    visibility: hidden;
}
#specificimage {
    visibility: visible;
    position: fixed;
    top: .5in;
    left: .5in;
    width: 7.5in;
    height: auto;
} 
```

html结构与此类似：

```
<body>
    <div>
        <div>
            <div>
                <img id="specificimage" src="image.png" />
            </div>
        </div>
    </div>
</body> 
```

它在 Firefox 19 中打印良好，但这是我测试过的唯一可以正常工作的浏览器。IE 9 不显示任何内容；Safari 5.1.7 (PC) 仅在页面左侧显示一小部分图像；Chrome 25 显示完整图像，但在页面的一小部分。

有人知道我还能尝试什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:16:21.577

正如[Diodeus 在评论中指出的那样](https://stackoverflow.com/questions/15416557/css-print-stylesheet-hide-everything-except-specific-image-show-that-full-page#comment-21799343)，任何给定元素的可见性如果其父元素未显示，则无关紧要——事实上，在许多浏览器中，资源甚至不会被加载。

我会提出这些改变：

```
* {
    background: none          !important;
    direction:  ltr           !important;
    display:    none          !important;
    font-size:  0             !important;
    height:     0             !important;
    line-height:-9999         !important;
    margin:     0             !important;
    padding:    0             !important;
    position:   static        !important;
    text-indent:-9999em       !important;
    width:      0             !important;
    white-space:normal        !important;
}

html, body, div, #specificimage {
    display:    block         !important;
}

#specificimage {
    left:       0             !important;
    position:   fixed         !important;
    top:        0             !important;
    width:      100%          !important;
} 
```

该`*`规则非常繁重，但要确保：

*   大小（或页数，因为页面结构高于一页）不受度量值的影响，度量值受边框、高度、边距、宽度的影响；
*   a 内的文本`div`不可见：负文本缩进，从左到右的强制方向，加上零字体大小和通过空格强制换行：正常意味着它将隐藏到左侧并且不会扩展宽度。负的 line-height 意味着它也将被隐藏到顶部，如果它非常长，则不会扩展高度（或页数）。
*   位置：静态意味着左、右、上或下不会扩展页面画布超出其需要的范围。
*   重要的规则就在那里，因为任何将这些属性中的任何一个首先赋予元素的规则总是会更强大。在不对文档结构做出假设的情况下，我们必须应用此覆盖。如果您需要使这个王牌更具体的类和基于选择器的规则`!important`指定，您可以附加`:nth-child(n)`到星号任意次数，但这对内联样式或具有切换重要性的 ID 选择器的规则没有帮助。

# java - MongoDB列出java中可用的数据库

> ID：15416559
> 
> 赞同：9
> 
> 时间：2013-03-14T17:47:18.497
> 
> 标签：java, mongodb, mongo-java

我正在编写一个算法，它将通过 java 中所有可用的 Mongo 数据库。

在windows shell上我只是做

```
show dbs 
```

我如何在 java 中做到这一点并取回所有可用数据库的列表？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-14T17:50:37.597

你会这样做：

```
MongoClient mongoClient = new MongoClient();
List<String> dbs = mongoClient.getDatabaseNames(); 
```

这只会为您提供所有可用数据库名称的列表。

[您可以在此处](http://api.mongodb.org/java/current/com/mongodb/Mongo.html#getDatabaseNames())查看文档。

**更新：**

正如下面提到的@CydrickT，`getDatabaseNames`已经被弃用，所以我们需要切换到：

```
MongoClient mongoClient = new MongoClient();
MongoCursor<String> dbsCursor = mongoClient.listDatabaseNames().iterator();
while(dbsCursor.hasNext()) {
    System.out.println(dbsCursor.next());
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-14T15:11:37.850

对于由于该方法`getDatabaseNames();`已弃用/不可用而来到这里的任何人，这里是获取此信息的新方法：

```
MongoClient mongoClient = new MongoClient();
MongoCursor<String> dbsCursor = mongoClient.listDatabaseNames().iterator();
while(dbsCursor.hasNext()) {
    System.out.println(dbsCursor.next());
} 
```

这是一个返回数据库名称列表的方法，如前一个`getDatabaseNames()`方法：

```
public List<String> getDatabaseNames(){
    MongoClient mongoClient = new MongoClient(); //Maybe replace it with an already existing client
    List<String> dbs = new ArrayList<String>();
    MongoCursor<String> dbsCursor = mongoClient.listDatabaseNames().iterator();
    while(dbsCursor.hasNext()) {
        dbs.add(dbsCursor.next());
    }
    return dbs;
} 
```

# bash - 命令替换与进程替换

> ID：15416570
> 
> 赞同：17
> 
> 时间：2013-03-14T17:47:52.480
> 
> 标签：bash, command-substitution, process-substitution

我试图了解这两个类似命令之间的区别。

```
aa=$(foo | bar | head -1)
read aa < <(foo | bar | head -1) 
```

*   我知道这`<()`需要`#!/bin/bash`，但这会使其变慢吗？
*   他们创建相同数量的子壳吗？
*   它们是否需要相同数量`bash`或`sh`流程？

我希望使用性能最佳的命令。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T19:03:44.130

1.  不，Bash 在非 POSIX 模式下更快。
2.  这取决于。这既是特定于实现的细节，也是特定于平台的细节。
    *   在 Bash 中，两者都需要相同数量的进程。如果`lastpipe`未启用，则每个管道元素都有一个进程，外加一个用于替换的子外壳和父进程。
    *   在 Bash 中，如果`lastpipe`启用，管道的最后一个元素`exec`在两种情况下都不会分叉，仍然需要相同数量的进程。
    *   在 ksh93 中，在这种情况下，两者都需要相同数量的进程，但如果最后一个管道元素是内置的，它将在父进程中运行以进行命令替换，从而使其更快。
    *   在 Bash 和 ksh93 中，如果 shell 在不支持的系统上编译`/dev/fd/*`，则 shell 将创建命名管道来代替进程。这可能会影响性能。
3.  上一个子弹也许应该放在这里。注意“subshel​​l”并不一定意味着一个单独的进程，尽管在几乎所有的 shell 中，它确实（`$(<...)`除了支持它的 Bash 之外的所有东西）。在 mksh 和 ksh93 中，也有`${ ;}`样式命令替换，但每个 shell 以不同的方式实现这一点。在 ksh93 中，它可能会或可能不会提供加速。在 mksh 中，可能不是。mksh 不支持进程替换，zsh 不支持（也没有办法模拟）`BASHPID`，所以没研究。

命令替换本质上没有什么比 Bash 中的进程替换更快的了，但是`head`在这种情况下是多余的，`read`因为你在那里只读取一行。顺便说一句，始终使用`head -n ...`--`-1`不可移植。此外，除非您希望 shell 破坏输入，否则不要使用`read`without 。`-r`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:13:17.947

在这里提高性能的最好方法是尽可能地摆脱前叉和管道。

出于所有意图和目的，您不应担心所述的性能问题。99% 的执行时间可能由特定命令决定，而不是进程替换与命令替换的差异。你知道优化第一定律吗？不。特别是如果您要牺牲便携性。使用`$(whatever)`并忘记其他一切。如果您真的担心性能，那就是您需要解决的命令/管道/分支。否则，你是在试图通过挤出眼中的泪水来减肥。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T17:58:44.187

`Bash's`使用内置基准进行基准测试`time`，第一种形式比第二种形式慢。

您可以使用以下方法自行测试：

```
bash -c 'time PIPELINE...' 
```

两者都创建*子*shell——在第一种情况下，shell 读取和扩展子shell 的输出，而`read`在第二种情况下，shell 的内置读取来自后台进程。

看：

*   [http://mywiki.wooledge.org/ProcessSubstitution](http://mywiki.wooledge.org/ProcessSubstitution)
*   [http://mywiki.wooledge.org/BashFAQ/002](http://mywiki.wooledge.org/BashFAQ/002)
*   [http://mywiki.wooledge.org/BashFAQ/082](http://mywiki.wooledge.org/BashFAQ/082)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T18:27:26.223

进程替换绕过由 piplines/command 替换创建的子 shell。替换语法被替换为 FIFO 或 FD 的名称，其中的命令在后台运行。**替换**与参数扩展和命令替换同时执行。

查看与“tee”一起使用的过程替换的信息。

[http://mywiki.wooledge.org/ProcessSubstitution](http://mywiki.wooledge.org/ProcessSubstitution)

# quadratic - c中的二次函数

> ID：15416576
> 
> 赞同：1
> 
> 时间：2013-03-14T17:48:26.090
> 
> 标签：quadratic, equation-solving

除了在第 25 行解决 X 问题外，我几乎所有工作都在工作，我一直收到错误消息，说“术语不能评估为采用 1787 个参数的函数”我让它给了我一个 1 或一个 0，但因为我一直在弄乱它，所以我输了我在哪里并保存在副本上。如果很难阅读，仍然是新的发布抱歉

```
#include <stdio.h>
#include <math.h>

void quadratic_function()

{
    int         a,b,c;      // variables
    long int    result;     // my X in the quadractic function
    long int    y,x;            // the result
    long int    quadratic;

    printf("enter values for a,b,c\n");
    scanf("%i\n %i\n %i", &a,&b,&c);
    printf("A=%i  B=%i  C=%i\n", a,b,c); //Displays Variables

    y= pow(b, 2);
    result= (y)*-4*(a)*(c); // b^2-4ac
    printf("\n%li\n",result);

    if (result<0) 
        printf("Imaginary Number"); // if negative

    else (result>0);
        x=(-b/2*(a)) +- (sqrt(pow(b, 2)) (-4*(a)*(c))) / (2*(a)); 
        //solving for x

        printf("\n %li\n",x);

        a = a*x;
        b = b*x;
        quadratic=pow(a, 2)*(b)*(c);        // if positive

         //printf("Quadratic equation equal to %li",quadratic); // result

}

int main()
{
quadratic_function();
return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:10:21.763

我注意到的第一件事是你试图同时做二次方程的`+`和部分。`-`方程

`x = (-b +- sqrt(b^2 - 4ac)) / 2a`

意思是一样的

`x = (-b + sqrt(b^2 - 4ac)) / 2a AND x = (-b - sqrt(b^2 - 4ac)) / 2a`

换句话说，如果`b^2 - 4ac`大于 0，则方程有两个答案，如果为 0，则有一个答案，如果是否定的，则没有答案。

另一件事，这条线`else (result>0);`并没有真正做任何事情。之后的其余代码即使你得到也会执行`b^2 - 4ac < 0`

最后，我不完全确定你的分组或 C++ 的负号优先级，所以我稍微改变了你的括号。

```
y = pow(b, 2);
result = (y) - (4*a*c); // b^2-4ac
printf("\n%li\n", result);

if (result < 0) {
    printf("Imaginary Number"); // if negative

} else if (result == 0) {
    x = (-b) / (2 * a); // sqrt(0) = 0, so don't bother calculating it
    a = a*x;
    b = b*x;
    quadratic=pow(a, 2)*(b)*(c);
    printf("Quadratic equation equal to %li",quadratic); // result

} else if (result > 0) {

    // solve for (-b + sqrt(b^2 - 4ac)) / 2a
    x = ((-b) + sqrt(pow(b, 2) - (4 * a * c))) / (2 * a); 

    printf("\n %li\n",x);

    a = a*x;
    b = b*x;
    quadratic=pow(a, 2)*(b)*(c);
    printf("Quadratic equation equal to %li",quadratic); // result

    // do it again for (-b - sqrt(b^2 - 4ac)) / 2a
    x = ((-b) - sqrt(pow(b, 2) - (4 * a * c))) / (2 * a); 

    printf("\n %li\n",x);

    a = a*x;
    b = b*x;
    quadratic=pow(a, 2)*(b)*(c);
    printf("Quadratic equation equal to %li",quadratic);
} 
```

# java - 警告：未找到提供程序 com.sun.xml.internal.bind.v2.ContextFactory

> ID：15416579
> 
> 赞同：6
> 
> 时间：2013-03-14T17:48:35.093
> 
> 标签：java, jaxb, jersey, glassfish-3

我已经在一个 JSF 应用程序中集成了一些 web 服务`Jersey`。一切正常，甚至 OAuth 标识也正常工作。但！启动我的网络服务器时，我总是收到此错误：

```
INFO: Scanning for root resource and provider classes in the packages:
  com.mysite.webService
INFO: Root resource classes found:
  class com.mysite.webService.Accounts
INFO: No provider classes found.

INFO: Initiating Jersey application, version 'Jersey: 1.17 01/17/2013 03:31 PM' 
```

 ~~~~```
SEVERE: The provider class, class com.sun.jersey.oauth.server.OAuthProviderInjectionProvider, could not be instantiated. Processing will continue but the class will not be utilized
java.lang.RuntimeException: No OAuthProvider implementation found in the list of providers.
    at com.sun.jersey.oauth.server.OAuthProviderInjectionProvider.<init>(OAuthProviderInjectionProvider.java:71)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) 
```~~  ~~*（edit2：上面现在解决了）*

这个警告：

```
...

WARNING: Provider com.sun.xml.internal.bind.v2.ContextFactory not found
javax.xml.bind.JAXBException: Provider com.sun.xml.internal.bind.v2.ContextFactory not found
 - with linked exception:
[java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory not found by com.sun.jersey.glassfish.v3.osgi.jersey-gf-server [157]]
    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:148)
    at javax.xml.bind.ContextFinder.find(ContextFinder.java:361)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:446)
    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:409)
    at com.sun.jersey.server.impl.wadl.WadlApplicationContextImpl.<init>(WadlApplicationContextImpl.java:95) 
```

这是我的`web.xml`相关条目：

```
<servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>my.site.webService</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey Web Application</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

我的课程看起来像这样：

```
@Path("/rest")
public class MyClass {

    @GET 
    @Path("/{id}/results")
    @Produces("application/json")
    public String getResults(@Context HttpContext hc, @PathParam("id")) {
        //...
    }
} 
```

我正在使用`Majorra 2.1.20`和`Glassfish 2.1.2.2`作为`PrimeFaces 3.4.1`插件`Jersey 1.17`。`Eclipse Juno`如果这会影响任何事情，请继续发展。

### 编辑

这并不妨碍我在 web 服务方面一切正常。但每次我在 Glassfish 上重新发布某些内容时，都会出现错误。

正如下面的答案中提到的，这应该已根据[JIRA bug JERSEY-709](http://java.net/jira/browse/JERSEY-709)在版本 1.7 中修复。但我在 v. 1.17 上做得很好，我仍然得到这个。

我还添加了一个警告，我正在堆栈跟踪中。如果这可以帮助确定问题！

在网上搜索：我在这里发现[了同样的未解决问题](http://jersey.576304.n2.nabble.com/Upgraded-Jersey-to-1-15-in-glassfish-3-1-2-2-Getting-org-jboss-weld-resources-spi-ResourceLoadingExcs-td7580264.html)

### 编辑 2

如下所述，更新我的`OAuthClient.jar`确实解决了第一个`error`. 我仍然得到`WARNING: Provider com.sun.xml.internal.bind.v2.ContextFactory not found`.

### 编辑 3 - 尝试的解决方案

在我认为会成为[这个问题](https://stackoverflow.com/questions/3093963/java-class-using-jaxb-api-failing-in-jira-with-provider-com-sun-xml-bind-v2-co)的线索之后尝试更新 JAXB 。这并没有带来任何成功。同样的警告。当删除我的此警告中的 Jersey 位时，`web.xml`此警告停止显示（只是为了确认这确实引发了问题）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-23T09:58:54.007

在另一个上下文中：使用 Maven 的独立 Java 应用程序

在 pom.xml 中，jaxb 是使用以下行定义的：

```
<dependency>
    <groupId>javax.xml.bind</groupId>
    <artifactId>jaxb-api</artifactId>
    <version>2.1</version>
</dependency> 
```

项目编译成功，但是运行的时候收到同样的异常（java.lang.ClassNotFoundException: com.sun.xml.bind.v2.ContextFactory）

在 jaxb-api 依赖项之前添加此行已解决问题

```
<dependency>
    <groupId>com.sun.xml.bind</groupId>
    <artifactId>jaxb-impl</artifactId>
    <version>2.1.2</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T15:37:55.140

升级到 Jersey 1.18 时，此错误已消失。

见[https://java.net/jira/browse/JERSEY-1932](https://java.net/jira/browse/JERSEY-1932)

要将 Glassfish 升级到 Jersey 1.18，请参阅：[https ://jersey.java.net/nonav/documentation/1.18/glassfish.html](https://jersey.java.net/nonav/documentation/1.18/glassfish.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T16:04:52.310

这应该已根据[JERSEY-709](http://java.net/jira/browse/JERSEY-709)在 v1.7 中修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T13:36:09.857

M8，我也遇到了这个：

```
 NetBeans 7.2
  Glassfish 3.1.2.2 which have jersey 1.11, and jersey-oauth 1.11. 
```

但它可以与：

```
 NetBeans 7.3
  Glassfish 3.1.2.2 which have jersey 1.11 (I didn't modify jars in glassfish/module folder)
  jersey 1.13 and jersey-oauth 1.13 (which is packed in war) 
```

然后异常不再存在。

我仍然不太确定它是如何解决的，但我希望这可以帮助你。~~~~

# xss - 在跨域实现中读取 AICC 服务器响应

> ID：15416584
> 
> 赞同：0
> 
> 时间：2013-03-14T17:48:59.883
> 
> 标签：xss

我目前正在尝试开发一个客户希望通过他们的学习管理系统跟踪的网络活动。他们的 LMS 使用 AICC 标准（HACP 绑定），并将实际的学习对象保存在单独的内容存储库中。

现在我正在努力解决 LMS 和“课程”之间的通信类型，因为它们位于两个不同的服务器上。当课程启动时，我能够从 URL 字符串中检索**sessionId**和**aicc_url ，并且我可以成功地将值发布到 LMS 上的****aicc_url**。

困难在于我无法读取和解析来自 LMS 的返回响应（格式为纯文本）。AICC 规定，课程首先向带有会话 ID 的 aicc_url 发布“getParam”命令，以便检索完成状态、以前会话的书签信息、用户 ID 信息等信息，这些都是我需要的。

到目前为止，我已经尝试了三种不同的方法：

**1 -**我从使用 jQuery (1.7) 和 AJAX 开始，这就是我通常会使用相同服务器实现的方式。这在 XMLHttpRequest 上返回了“无传输”错误。在阅读了一些论坛之后，我尝试确保将 ajax 调用的跨域属性设置为 true，以及在 ajax 调用上方插入**$.support.cors = true的建议，但这些都没有帮助。**

**2 & 3 -**我尝试使用 oldschool 框架集，底部框架中有一个表单，该表单将使用 LMS 返回的文本提交和刷新，然后通过 javascript 读取；然后是使用 iFrame 作为实际表单的目标并使用 onload 处理程序读取和解析内容的变体。这两种方法都在同一个服务器环境中工作，但在跨域环境中失败。

有人告诉我，所有其他课程都脱离了内容存储库书签以及跟踪完成情况，因此显然可以以某种方式从 LMS 读取返回值；AICC 经常被宣传为在跨服务器场景中工作，所以我认为在我忽略的 AICC 结构中必须有一种常用的方法来执行此操作。到目前为止，我的论坛搜索还没有发现任何让我走得更远的东西，所以如果有人在跨域 AICC 实现方面有任何经验，我当然可以使用建议！

我剩下的唯一想法是尝试在与课程相同的服务器上设置 PHP“中继”表单，并让前端页面向其发送值，然后使用 PHP 将这些值提交到 LMS，然后中继从 LMS 到前端 iframe 或 ajax 调用的返回文本，以便将其视为在同一个域中......我不确定是否有一种方法可以在不进入服务器端的情况下解决问题。AICC 内部似乎必须有一个共同的解决方案。

提前致谢！

***编辑和更新：*** 对于遇到类似问题的任何人，我找到了一些可能有助于解释问题的资源以及一些替代解决方案。

第一个特定于 Plateau，它是 LMS 行业的大玩家，已被 Successfactors 收购。这是一些关于设置代理以处理跨域内容的文档： [http ://content.plateausystems.com/ContentIntegration/content/support_files/Cross-domain_Proxlet_Installation.pdf](http://content.plateausystems.com/ContentIntegration/content/support_files/Cross-domain_Proxlet_Installation.pdf)

我发现的第二个是 Successfactors 的幻灯片演示，它强调了跨域内容的挑战，并说明了解决它的后端想法；包括使用反向代理。相关部分从幻灯片 21-22（PDF 中的第 11 页）开始。 [http://www.successfactors.com/static/docs/successconnect/sf/successfactors-content-integration-turley.pdf](http://www.successfactors.com/static/docs/successconnect/sf/successfactors-content-integration-turley.pdf)

希望能帮助其他试图解决同样问题的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T21:02:02.453

这篇文章中的答案可能会引导您朝着正确的方向前进：

[最佳实践：合法的跨站脚本](https://stackoverflow.com/questions/52646/best-practice-legitimate-cross-site-scripting?rq=1)

我认为您在设置 PHP“中继”方面走在了正确的轨道上。我认为这与另一篇文章的答案中的选择#1 类似，并且似乎与您在问题中描述的内容最有意义。

# c - C中对有符号和无符号字符的需求是什么

> ID：15416586
> 
> 赞同：0
> 
> 时间：2013-03-14T17:49:05.533
> 
> 标签：c

C语言中对有符号和无符号字符有什么要求？

在 C 中使用有符号和无符号字符有什么特殊原因吗？还是只是为了完整性而添加，以便编译器在添加有符号/无符号修饰符之前不必检查数据类型？

我不是在询问有符号和无符号变量。我的疑问是无符号字符变量不足以使您必须依赖有符号字符变量的特殊情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T21:54:39.993

A`char`可以是有符号的或无符号的，具体取决于对底层硬件最有效的方法。关键字`signed`并`unsigned`允许您明确指定您想要其他东西。

引用 C99 的理由：

> 指定了三种类型`char`：`signed`、plain 和`unsigned`。与先前的实践一样，根据实现， plain`char`可以表示为有符号或无符号。该类型`signed char`是在 C89 中引入的，以便在那些实现普通`char`为`unsigned char`. 出于对称原因，`signed`允许关键字作为其他整数类型的类型名称的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:06:17.380

**信息 #1：** `char`在 C 中只是一个小的`int`，它使用 8 位。

**信息#2：**`signed`和之间的区别在于`unsigned`表示中的一位用作`signed`变量的符号位。

**信息#3：**由于（#2），`signed`变量保持不同的范围（-128 到 127，`char`以防万一）与`unsigned`（0 到 255，以防万一）相比`char`。

**QA #1：**我们为什么需要`unsigned`？

在大多数情况下（例如表示指针）我们不需要有符号变量。按照惯例，内存中的所有位置都作为无符号地址的连续数组公开给程序。

**QA #2：**我们为什么需要`signed`？

一般来说，做有符号算术。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T17:59:36.577

我假设您使用 char 来保存数字，而不是字符。

所以：

signed char 至少为您提供 -128 到 127 的范围。unsigned char 至少为您提供 0 到 255 的范围。

标准要求 char 至少为 8 位，所以这至少是我这么说的原因。这些值可能更大。

无论如何，要回答您的问题，将 char 设置为 unsigned 释放了将第一位作为“符号”位的要求，从而使您可以保持有符号 char 的近两倍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:54:02.927

您必须了解的是数据类型“char”实际上只是一个整数，通常为 8 位宽。假设您尊重减少的值限制，您可以像使用任何其他间数据类型一样使用它。没有理由将“char”限制为字符。

在 32/64 位处理器上，通常不需要使用如此小的整数字段，但在 8 位处理器（例如 8051）上，8 位整数不仅处理速度快得多，而且使用更少（有限）记忆。

# jquery - 菜单是否可以在悬停背景时覆盖另一个菜单项？

> ID：15416588
> 
> 赞同：2
> 
> 时间：2013-03-14T17:49:13.627
> 
> 标签：jquery, html, css

我有一个水平菜单，它是纯 HTML、CSS 和 Jquery。所有的菜单都很完美，但是菜单的设计有一个非常愚蠢的分隔符，这给我带来了问题。无论如何，悬停菜单上的 CSS 甚至可以覆盖其他菜单项之间的分隔符吗？

这是菜单：![在此处输入图像描述](../Images/94b96a55380cea231d02354ecef2370a.png)

这是悬停：![在此处输入图像描述](../Images/7cf1f68c94ace360e29b909bb50e53d2.png)

这就是问题 ：![在此处输入图像描述](../Images/ad1c36e74f4ca0412a61625cf6e9ec12.png)

*   很重要！菜单是动态的（我不能让每一个都具有给定的宽度）
*   分隔符 h.line 是一个 *.png 文件
*   所有菜单都是纯 HTML、CSS 和 Jquery（问题仅在 CSS 中），没有菜单图像背景，图像只是“分隔线”

CSS代码（我认为只有这部分是问题）：

```
 .white ul.mega-menu li {
    float: left; 
    margin: 0; 
    padding: 0;
    text-transform: uppercase;
}
.white ul.mega-menu li a {
    float: left; 
    display: block; 
    color: #47515c; 
    padding: 0px 15px; 
    text-decoration: none;
    border-left: 1px solid #fff;
    background: url(../images/top_menu_separate.png) no-repeat right; 

}
.white ul.mega-menu li a.dc-mega {position: relative;}
.white ul.mega-menu li.mega-hover a, .white ul.mega-menu li a:hover {
    color: #47515c;
    background: #dadcde;
    border-left: 1px solid #dadcde;
    padding-bottom: 0px;
    z-index: 5000000;
    overflow: visible;

} 
```

HTML：

```
 <div class="white">  
                <ul id="mega-menu-9" class="mega-menu">
                    <li><a href="test.html" class="multi">Expertise</a></li>
                    <li><a href="test.html">About us</a></li>
                    <li><a href="#">Our People</a></li>
                    <li><a href="#">Our work</a></li>
                    <li><a href="#">Candidates</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Contact us</a></li>
                </ul>
            </div> 
```

我认为这是方法：

```
.white ul.mega-menu li:hover
{
    border-left: 1px solid #dadcde;
    margin-left: -1px;
} 
```

唯一的问题是，当悬停时，它会将所有菜单从右向左移动 1px，看起来很糟糕......有什么技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:54:18.607

我在 jsFiddle 中重新创建了这个问题。

**jsFiddle：http: [//jsfiddle.net/gkgUj/](http://jsfiddle.net/gkgUj/)**

解决方案：

```
li:hover + li a {
    border-left: 0 none;
    margin-left: 1px;
} 
```

**在你的情况下添加这个**

```
.white ul.mega-menu li:hover + li a {
    background-image: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:59:24.247

一种选择是将悬停的项目向左移动一个像素以覆盖分隔符：

```
.white ul.mega-menu li:hover
{
    border-left: 1px solid #dadcde;
    margin-left: -1px;
} 
```

另一种选择是将分隔符放在每个项目的左侧，然后在其左侧的项目悬停时将其替换为白色边框：

```
.white ul.mega-menu li
{
    background: url(../images/top_menu_separate.png) no-repeat left;
}

.white ul.mega-menu li:hover + li
{
    background: none;
    border-left: 1px solid #fff;
} 
```

# recursion - 使用递归从列表中选择唯一项

> ID：15416592
> 
> 赞同：0
> 
> 时间：2013-03-14T17:49:17.603
> 
> 标签：recursion, erlang

作为昨天问题 Erlang 的后续[：使用递归从列表中选择唯一项目](https://stackoverflow.com/questions/15391740/erlang-choosing-unique-items-from-a-list-using-recursion)

在 Erlang 中，假设我想从给定列表中选择所有*唯一*项目，例如

```
List = [foo, bar, buzz, foo]. 
```

我使用了你的[代码示例](https://stackoverflow.com/questions/15391740/erlang-choosing-unique-items-from-a-list-using-recursion)导致

```
NewList = [bar, buzz]. 
```

我将如何`NewList`在 Erlang 中进一步操作？

例如，假设我不仅想从 中选择所有唯一项目，还想计算来自?`List`的所有结果项目的字符总数。`NewList`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T23:23:30.813

在函数式编程中，我们有频繁出现的模式，它们应该有自己的名字和支持函数。最广泛使用的两个是`map`和`fold`（有时`reduce`）。这两个构成了列表操作的基本构建块，通常不需要编写专用的递归函数。

### 地图

该`map`函数按顺序遍历列表，生成一个新列表，其中每个元素都是将函数应用于原始列表中的相应元素的结果。以下是典型的`map`实现方式：

```
map(Fun, [H|T]) -> % recursive case
    [Fun(H)|map(Fun, T)];
map(_Fun, []) -> % base case
    []. 
```

这是递归函数的完美介绍性示例；粗略地说，函数子句要么是*递归情况*（导致调用 iself*并带有较小的问题实例*），要么是*基本情况*（没有进行递归调用）。

那你怎么用`map`？请注意，第一个参数`Fun`应该是一个函数。在 Erlang 中，可以内联声明匿名函数（有时称为 lambdas）。例如，要对列表中的每个数字求平方，生成一个平方列表：

```
map(fun(X) -> X*X end, [1,2,3]). % => [1,4,9] 
```

这是[高阶编程](http://en.wikipedia.org/wiki/Higher-order_programming)的一个例子。

请注意，这`map`是 Erlang 标准库的一部分，因为`lists:map/2`.

### 折叠

虽然`map`在一个列表和另一个列表之间创建 1:1 元素映射，但目的`fold`是将某些函数应用于列表的每个元素，同时累积单个结果，例如总和。正确的折叠（它有助于将其视为“向右”）可能看起来像这样：

```
foldr(Fun, Acc, [H|T]) -> % recursive case
    foldr(Fun, Fun(H, Acc), T);
foldr(_Fun, Acc, []) -> % base case
    Acc. 
```

使用此函数，我们可以对列表的元素求和：

```
foldr(fun(X, Sum) -> Sum + X, 0, [1,2,3,4,5]). %% => 15 
```

注意`foldr`和`foldl`都是`lists`模块中 Erlang 标准库的一部分。

`map`虽然它可能不是很明显，但可以单独使用和解决一大类常见的列表操作问题`fold`。

### 递归思考

编写递归算法起初可能看起来令人生畏，但当你习惯它时，它会变得很自然。遇到问题时，您应该确定两件事：

1.  如何将问题分解为更小的实例？为了使递归有用，递归调用必须将较小的问题作为其参数，否则函数将永远不会终止。
2.  基本情况是什么，即终止标准？

至于1），考虑计算一个列表的元素的问题。这怎么可能分解成更小的子问题呢？好吧，这样想：给定一个非空列表，它的第一个元素（头）是 X，余数（尾）是 Y，它的长度是 1 + Y 的长度。由于 Y 小于列表 [X |Y]，我们已经成功地减少了这个问题。

继续列表示例，我们什么时候停止？好吧，最终，尾巴将是空的。我们回到基本情况，即空列表的长度为零的定义。您会发现为各种情况编写函数子句非常类似于为字典编写定义：

```
%% Definition:
%% The length of a list whose head is H and whose tail is T is
%% 1 + the length of T.
length([H|T]) ->
    1 + length(T);
%% Definition: The length of the empty list ([]) is zero.
length([]) ->
    0. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T20:05:58.613

您可以使用折叠来递归结果列表。为简单起见，我将您的原子转换为字符串（您可以使用 list_to_atom/1 执行此操作）：

```
1> NewList = ["bar", "buzz"].
["bar","buzz"]
2> L = lists:foldl(fun (W, Acc) -> [{W, length(W)}|Acc] end, [], NewList).        
[{"buzz",4},{"bar",3}] 
```

这将返回一个 proplist，您可以像这样访问：

```
3> proplists:get_value("buzz", L).
4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T20:36:48.480

如果您想自己构建递归以用于教学目的而不是使用列表：

```
count_char_in_list([], Count) ->
    Count;
count_char_in_list([Head | Tail], Count) ->
    count_char_in_list(Tail, Count + length(Head)). % a string is just a list of numbers 
```

进而：

```
1> test:count_char_in_list(["bar", "buzz"], 0).
7 
```

# shell - 总和，计数，不同的计数字段与 awk

> ID：15416594
> 
> 赞同：-1
> 
> 时间：2013-03-14T17:49:19.187
> 
> 标签：shell, awk

我有一个这样的文本文件：

```
A   B   C   D   E
----------------------  
x   x   e   2   10
y   y   g   1   8 
z   o   e   2   9 
o   o   q   1   10
p   z   e   3   22
x   x   e   1   11
z   o   a   1   24
y   z   b   1   25 
```

我想用`awk`做同样的事情`SQL`：

```
select A, 
       B, 
       count(distinct C), 
       sum(D),
       sum(case when E>20 then E else 0 END) 
  from test 
 group by A,B 
```

输出：

```
A   B  count(distinct C)    sum(D)  sum(case when E>20 then E else 0 END) 
-------------------------------------------------------
o   o   1       1       0
p   z   1       3       22
x   x   1       3       0
y   y   1       1       0
y   z   1       1       25
z   o   2       3       24 
```

这是我的解决方案，但不同的部分尚未完成：

```
awk '
{
    idx4[$1"|"$2]=idx4[$1"|"$2]+$4;
    idx5[$1"|"$2]=$5>20?idx5[$1"|"$2]+$5:idx5[$1"|"$2]
} 
END {
    for (i in idx4) print i, idx4[i], idx5[i]
}' OFS="\t" test 
```

==================================================== ============================

我已经完成了几个小时，这是我的代码：

```
 {
        if (idx3[$1"|"$2, $3] == 0) {
            idx3[$1"|"$2, $3]+=1;
        }
        idx4[$1"|"$2]=idx4[$1"|"$2]+$4;
        idx5[$1"|"$2]=$5>20?idx5[$1"|"$2]+$5:idx5[$1"|"$2]
    } 
    END {
        for (j in idx3) {
            split(j, idx, SUBSEP)
            count[idx[1]]++
        }
        for (i in idx4) {
            print i, count[i], idx4[i], idx5[i] 
        }
    } OFS="\t" 
```

@Scrutinizer 在下面给出了更易读的代码，我认为这更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:22:34.800

请试试这个脚本，我已经测试过它可以像你期望的那样输出结果。

```
awk '
{
    if( NR<3) {next}

    idx4[$1"|"$2]=idx4[$1"|"$2]+$4;
    idx5[$1"|"$2]=$5>20?idx5[$1"|"$2]+$5:idx5[$1"|"$2]

    if( index(TR[$1"|"$2],$3)==0 )
    {
         TR[$1"|"$2] = TR[$1"|"$2]"|"$3;
         TRD[$1"|"$2] +=1;
    }
} 
END {
    for (i in idx4) print i, TRD[i], idx4[i], idx5[i]+0
}' OFS="\t" test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T20:10:43.250

试试这个（类似于你自己的解决方案）：

```
awk '
  NR<3{
    next
  }

  {
    i=$1 OFS $2
    D[i]+=$4
  }

  !A[i,$3]++{
    C[i]++
  }

  $5>20{
    E[i]+=$5
  }

  END{
    for(i in D)print i, C[i], D[i], E[i]+0
  }
' OFS='\t' infile 
```

`NR<3`用于跳过两个标题行。如果它们不存在于输入文件中，您可以忽略该部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-24T05:56:48.223

```
$ gawk '{ a[$1,$2]["C"][$3]; a[$1,$2]["D"]+=$4; a[$1,$2]["E"]+=($5>20 ? $5:0) }
END { 
    PROCINFO["sorted_in"] = "@ind_str_asc"
    for ( i in a) { 
        split(i, b, SUBSEP) 
        print b[1], b[2], length(a[i]["C"]), a[i]["D"], a[i]["E"] 
    }
}' OFS='\t' file
o       o       1       1       0
p       z       1       3       22
x       x       1       3       0
y       y       1       1       0
y       z       1       1       25
z       o       2       3       24 
```

# javascript - 使用外部接口 js

> ID：15416598
> 
> 赞同：-2
> 
> 时间：2013-03-14T17:49:42.413
> 
> 标签：javascript, jquery, flash, externalinterface

我是**ExternalInterface js**的初学者，我真的不知道如何使用它。我在网上有 100 个 flash 视频。用户访问网络并开始观看第一个视频。当第一个视频结束时，弹出窗口打开并**再次显示 play**或**Next Video**。当点击**下一个视频**链接并打开下一个视频的 URL 时，将播放下一个视频。等等...

我只需要从哪里开始的指导以及有关理解 externalInterface 或任何其他方式来完成此任务的任何帮助..

**我不是要代码..只需要指导。从哪里开始，什么是正确的方法。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:53:36.687

您可以使用 Actionscript 调用 Javascript 函数：

**JS：**

```
function sayHello(data){
    alert("Hello, "+data.name);
} 
```

**作为：**

```
ExternalInterface.call("sayHello",{name:"John Doe"}); 
```

或者，也可以反过来用JS调用AS函数

**作为：**

```
ExternalInterface.addCallback("sayHello",function(name:String){
    trace("Hello, "+name)
}); 
```

**JS：**

```
myFlashMovie.sayHello("John Doe"); 
```

# r - 如何使用 biomaRt 将安捷伦探针 ID 列表转换为基因符号并具有 na 值？

> ID：15416602
> 
> 赞同：1
> 
> 时间：2013-03-14T17:49:49.130
> 
> 标签：r, bioconductor

我正在尝试使用 biomaRt 将超过 90k 探针 ID 的列表转换为基因符号，但是遇到了问题。使用 getBM 函数，我可以看到其中只有 22k 有对应的基因符号，但输出是一个长度为 22k 的向量，我无法看到与初始探针 ID 列表的对应关系。使用 getBMlist，我可以获得为那些不匹配的探测器指定的 na 值的输出，但该函数会给出一条警告消息，即 getBMlist 不适用于大型列表。如何获得 90k 基因符号和 na 值的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-01T15:22:14.233

要获得 probeID 和基因符号之间的映射，您需要在 biomaRt 属性中包含 probeID。

以下是我在使用安捷伦微阵列的一些工作中是如何做到的：

```
genes<-c("A_23_P10060", "A_23_P10091", "A_23_P103951", "A_23_P10525", "A_23_P105732", "A_23_P10605", "NM_005325")

library(biomaRt)
ensembl<-useMart("ensembl", dataset="hsapiens_gene_ensembl")

ensembl.id<-grep("ENST", genes, value=T)
agilent.df<-getBM(attributes = c("hgnc_symbol","efg_agilent_wholegenome_4x44k_v1"), filters=c("efg_agilent_wholegenome_4x44k_v1"),values=genes, mart=ensembl)

genes<-merge(x = as.data.frame(genes),y =  agilent.df, by.y="efg_agilent_wholegenome_4x44k_v1", all.x=T, by.x="genes") 
```

有一个非常好的[biomaRt 教程](http://www.bioconductor.org/packages/release/bioc/vignettes/biomaRt/inst/doc/biomaRt.pdf)可以引导您完成相同的过程。如果您运行此代码，您会注意到一个探针将有一个 hgnc_symbol 的“”，这是因为它存在于 ensemble mart 中但没有指定的基因符号。

# file - 使用 QDir::rename() 在 Qt 中重命名文件失败

> ID：15416603
> 
> 赞同：2
> 
> 时间：2013-03-14T17:49:53.120
> 
> 标签：file, qt, text, rename, qdir

我`QDir::rename()`用来重命名一个临时文件。

这是我的代码：

```
// change the temporary filename
void save::finish()
{
    QString newpath = ui->path->text();

    QString newname = ui->filename->text();

    newpath.append("/");
    newpath.append(newname);
    newpath.append(".txt");

    QDir r;

    bool check = r.rename("temp.txt", newname);

    if (check == true)
    {
        QMessageBox::warning(this,"Error","Saved successfully!", QMessageBox::Ok);
        close();
    }

    else
    {
        QMessageBox::warning(this,"Error","Error saving! Please try again.", QMessageBox::Ok);
    }
} 
```

该文件被重命名，但它与临时文件位于同一目录中。我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T20:06:10.743

也许试试

```
bool check = r.rename("temp.txt", newpath); 
```

我看到您有一个未在重命名`QString`调用`newpath`中使用的调用，但您传递`newname`了您`newpath`在前一行中附加的调用。从您发布的代码看来，您只是给了一个新名称，因此结果文件与原始文件位于同一文件夹中但确实被重命名了。

请记住，即使提供完整路径[QDir::rename](http://qt-project.org/doc/qt-4.8/qdir.html#rename)如果源路径和目标路径不在同一分区上或由于文档中提到的其他一些原因，也会失败。

# windows - 如何编写 Windows 批处理脚本以将目录中的最新文件复制到新文件夹中？

> ID：15416604
> 
> 赞同：1
> 
> 时间：2013-03-14T17:49:53.273
> 
> 标签：windows, date, for-loop, batch-file, cmd

我需要将目录中的最新文件移动、剪切和粘贴到新创建的文件夹位置。该文件是由我没有权限的单独程序创建的。新的目录位置是由下面复制的批处理文件创建的。我从代码示例中找到了一些基础。我只是有点麻烦把这些碎片放在一起。如何将最新文件从目录位置移动到新目录位置？

```
:: Auto directory date batch (MMDDYYYY format)
:: First parses month, day, and year into mm , dd, yyyy formats and then combines to be DDMMYYYY
:: Setups %date% variable
:: @author Deepu Mohan Puthrote www.deepumohan.com
@echo off
FOR /F "TOKENS=1* DELIMS= " %%A IN ('DATE/T') DO SET CDATE=%%B
FOR /F "TOKENS=1,2 eol=/ DELIMS=/ " %%A IN ('DATE/T') DO SET mm=%%B
FOR /F "TOKENS=1,2 DELIMS=/ eol=/" %%A IN ('echo %CDATE%') DO SET dd=%%B
FOR /F "TOKENS=2,3 DELIMS=/ " %%A IN ('echo %CDATE%') DO SET yyyy=%%B
SET date=%yyyy%%mm%%dd%
echo New folder name %date%
MKDIR %date% 
```

我添加到第一个 .bat 以将文件移动到新目录，因为我尝试将文件移动到新目录但出现错误

```
FOR /F "delims=" %%I IN ('DIR . /B /O:-D') DO COPY %%I <<%date%>>
pause 
```

<<此时出乎意料

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T22:01:23.883

尝试这个：

```
for /f "tokens=*" %%i in ('dir /od /b /a-d') do set "file=%%~i"
move "%file%" "%date%" 
```

顺便说一句：不要对批处理变量（日期）使用默认环境变量名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:08:02.200

您的`FOR`循环走在正确的轨道上。您只想做一个`MOVE`而不是`COPY`，然后在处理第一个项目后退出循环。

```
FOR /F "delims=" %%I IN ('DIR . /B /O:-D /A-D') DO (
    MOVE "%%I" "%date%"
    GOTO :EOF
) 
```

我添加`/A-D`了`DIR`排除目录，并删除了`<<`and `>>`。（我不确定为什么一开始就在那里。）

# virtual-machine - 我可以使用运行 windows server 2012 的虚拟机来托管 sharepoint 2013

> ID：15416606
> 
> 赞同：0
> 
> 时间：2013-03-14T17:49:59.387
> 
> 标签：virtual-machine, sharepoint-2013, windows-server-2012

我有 Windows 8 专业版。我想创建一个运行 windows server 2012 的虚拟机来托管 sharepoint server 2013 以用于开发目的。有什么限制或建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:56:56.753

这不是一个真正的堆栈溢出问题，但由于我刚刚做了同样的事情（Win 8 + Hyper-V/Win2012 + SharePoint 2013），我会回答的。

可以，但需要 Active Directory 域。因此，您必须将 DC 角色添加到服务器或配置另一个充当域控制器的 VM。

我个人发现 Windows Server 2012 在我的虚拟环境中表现不佳，我想我会回到 Win2008R2 + SP 2013 进行开发。

# c# - 如何在 C# 中同时运行两个操作

> ID：15416607
> 
> 赞同：0
> 
> 时间：2013-03-14T17:49:59.913
> 
> 标签：c#, wpf

我的 WPF 应用程序有问题。我有一个习惯`CircularProgressBar`。当我从数据库中检索数据时，需要几秒钟。

我想`CircularProgressBar`在检索数据时在我的应用程序中显示。

此代码运行`CircularProgressBar`：

```
CircularProgressBar cb = new CircularProgressBar();
stk.Children.Add(cb);

ThreadStart thStart = delegate()
{
    ThreadStart inv = delegate()
    {
        stk.Children.Remove(cb);

    };
    this.Dispatcher.Invoke(inv, null);
};

Thread myThread = new Thread(thStart);
myThread.Start(); 
```

在我的自定义类（`Printer`）中。

我把这个窗口称为：

```
Printer p = new Printer();

p.Show();

//Code For retrieve  Data from DataBase

p.close(); 
```

所以会发生这种情况：`CircularProgressBar`显示几秒钟但它没有运行。我的错误在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:14:33.927

您可以简单地使用后台工作者：

```
private BackgroundWorker bw = new BackgroundWorker();

bw.WorkerReportsProgress = true;
bw.WorkerSupportsCancellation = true;
bw.DoWork += new DoWorkEventHandler(bw_DoWork);
bw.ProgressChanged += new ProgressChangedEventHandler(bw_ProgressChanged);
bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);

private void bw_DoWork(object sender, DoWorkEventArgs e)
{
//load data from database
System.Threading.Thread.Sleep(1);
worker.ReportProgress(progressbar_value);
}

private void bw_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
Progress.value= progressbar_value;
}

private void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
//progress completed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:16:47.243

这不是你在 wpf 中做事的方式——使用模型从数据库中填充数据，然后将 CircularProgressBar 可见性绑定到你所处的状态（完成任务时隐藏它）。所有这些样板代码都应该在 xaml 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:19:12.530

如果我是你，我会通过使用具有依赖属性的数据绑定来简化生活。要遵循的步骤是什么。

1) 在您的自定义进度条中创建一个名为 IsBusyProperty 的 bool 类型的依赖属性。

2) 将委托注册到其值更改事件（这在您创建依赖属性时完成）。

3) 您现在可以将此 IsBusyProperty 绑定到代码中显示“嘿，我很忙”的状态。

4）当该值设置为 true 时，您将让您的进度条开始它的魔力。

5）当它设置为 false 时，你会停止魔法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T12:58:12.943

创建一个带有旋转故事板的控件要简单得多，只要你的 ui 没有被锁定，它就会旋转，然后简单地杀死它。

[尝试这个](http://www.codeproject.com/Articles/35288/WPF-Circular-Progress-Bar)

# vb.net - VB.net 递增数字与 texbox 值连接

> ID：15416612
> 
> 赞同：1
> 
> 时间：2013-03-14T17:50:12.697
> 
> 标签：vb.net, vb.net-2010

我正在学习 vb.net。我正在尝试创建一个从 00000 开始的增量数字，并将该数字与文本框中的值（例如 JH00001）连接起来，然后将其插入数据库。

请有人可以帮我解决这个问题，因为我对 vb.net 完全陌生。

提前感谢大家的帮助。我很抱歉我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:58:12.727

```
Dim number as Integer = 1
Dim text as String = textbox1.text &= number.toString().padLeft(5, "0"c) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:57:48.570

一个 for 循环应该是你需要的：

就像是：

```
Dim text As String = textbox1.text
Dim DBtext As String
For value As Integer = 0 To 5
    DBtext = text & value.ToString()
    'Insert anything else you need to do. Such as insert into DB.
Next 
```

只需将 5 替换为您需要运行的次数即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T09:21:06.947

我个人更喜欢使用`String.Format`...

```
For i = 0 to 1e6-1
    Dim FormattedString = String.Format("{0}{1:00000}", Textbox1.Text, i)
Next 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T17:57:05.187

使用`D5`精度说明符指示该数字应至少为 5 位数字，包括前导零：

```
Dim valueFromTextBox As String = "JH"
Dim value As String = ""

For i = 0 To 99

  value = valueFromTextBox & i.ToString("D5")

 'Insert value to database

Next 
```

查看[MSDN](http://msdn.microsoft.com/en-gb/library/dwhawy9k%28v=vs.80%29.aspx)了解更多格式化方法

# asp.net - 不明确的 TLS Rec 第 1 层加密警报

> ID：15416624
> 
> 赞同：2
> 
> 时间：2013-03-14T17:51:01.230
> 
> 标签：asp.net, security, ssl, iis-6

我正在尝试从 iis 6 服务器中的 asp.net 应用程序访问远程 Web 服务到远程 Web 服务器。由于无法连接，我使用 MS Network Monitor 查看发生的情况。

这是 TLS 的进展

```
2   15:26:31 14.03.2013 0.0000000       yyy.yyy.yyy.yyy XXX.XXX.XXX.XXX TLS TLS:TLS Rec Layer-1 HandShake: Client Hello.    {TLS:4, SSLVersionSelector:3, TCP:2, IPv4:1}
3   15:26:31 14.03.2013 0.0312500       XXX.XXX.XXX.XXX yyy.yyy.yyy.yyy TLS TLS:TLS Rec Layer-1 HandShake: Server Hello.; TLS Rec Layer-2 HandShake: Certificate.   {TLS:4, SSLVersionSelector:3, TCP:2, IPv4:1}
4   15:26:31 14.03.2013 0.0312500       yyy.yyy.yyy.yyy XXX.XXX.XXX.XXX TLS TLS:TLS Rec Layer-1 HandShake: Certificate. Client Key Exchange. Certificate Verify.; TLS Rec Layer-2 Cipher Change Spec; TLS Rec Layer-3 HandShake: Encrypted Handshake Message.   {TLS:4, SSLVersionSelector:3, TCP:2, IPv4:1}
5   15:26:31 14.03.2013 0.0468750       XXX.XXX.XXX.XXX yyy.yyy.yyy.yyy TLS TLS:TLS Rec Layer-1 Cipher Change Spec; TLS Rec Layer-2 HandShake: Encrypted Handshake Message. {TLS:4, SSLVersionSelector:3, TCP:2, IPv4:1}
6   15:26:31 14.03.2013 0.0781250       XXX.XXX.XXX.XXX yyy.yyy.yyy.yyy TLS TLS:TLS Rec Layer-1 Encrypted Alert {TLS:4, SSLVersionSelector:3, TCP:2, IPv4:1} 
```

这是带有警报的最终 TLS 交易

```
 - TlsRecordLayer: TLS Rec Layer-1 Encrypted Alert
     ContentType: Encrypted Alert
   - Version: TLS 1.0
      Major: 3 (0x3)
      Minor: 1 (0x1)
     Length: 18 (0x12)
     EncryptedData: Binary Large Object (18 Bytes) 
```

最后这是警报部分的十六进制转储。

```
15 03 01 00 12 CE CA A3 1C C9 44 5C AC A2 3C BB 3C F3 F9 8A A6 4F 22 
```

根据[http://en.wikipedia.org/wiki/Transport_Layer_Security#Alert_protocol](http://en.wikipedia.org/wiki/Transport_Layer_Security#Alert_protocol)我试图解码含义

```
15 = 21 dec <- always 21
03 01 = major and minor Version
00 12  = lentgh 
```

现在它变得很奇怪。通常接下来的两个字节应该是警报的级别和描述。但它们没有任何意义。除此之外，它们在我运行的每个跟踪中都不同。而前部始终保持不变。

有什么想法可以解密警报吗？

我的第一个想法是对方可能不允许 TLS 1，而 IIS 6 只支持 TLS 1（至少我是这么认为的）。

非常感谢先进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T18:15:52.493

警报本身已加密，因为握手成功。所以在你知道它说什么之前，你必须解密它——你可以使用 ssldump，以防你有服务器的私钥。

在这里找到这个：http: [//www.wireshark.org/lists/ethereal-users/200110/msg00055.html](http://www.wireshark.org/lists/ethereal-users/200110/msg00055.html) - 在我对同样的问题困惑了一段时间之后。

这是关于 ssldump：[http ://www.rtfm.com/ssldump/](http://www.rtfm.com/ssldump/)

使用 Wireshark，您可以解密所有内容，以防您拥有用于加密的私钥：http: [//support.citrix.com/article/ctx116557](http://support.citrix.com/article/ctx116557)

# lua - Lua - 从内存中删除对象时减少“类”对象计数

> ID：15416632
> 
> 赞同：2
> 
> 时间：2013-03-14T17:51:19.330
> 
> 标签：lua, destructor, counter, moai

我目前正在使用 Lua 进行 MOAI 项目。我正在尝试为一些游戏对象设置一些压力测试，然后跟踪我在游戏会话期间创建和销毁的 Lua 对象的时间。我可以轻松跟踪“类”对象/表何时被创建通过增加构造函数或初始化程序中的计数来初始化。但是，由于 Lua 没有析构函数，我不确定如何跟踪对象何时从内存中删除。

非常感谢您对此事的任何帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:02:14.547

要在 Lua 对象（我假设完整的用户数据或表）消失时收到通知，您可以为它设置一个[_gc 元](http://www.lua.org/manual/5.2/manual.html#2.5.1)方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T22:11:03.717

也许弱表是你的答案，嵌套。这是一个片段：

```
objectArray={}

function newObj(...)
   --your OOP code here
   --obj is the new table you made
   objectArray[#objectArray+1]=setmetatable({obj},{__mode='v'})
end 
```

现在，在每帧运行的函数/块中：

```
for i=1,#objectArray do --no pairs for efficiency, being run every frame this matters
   local stillThere=#objectArray[i]
   stillThere=stillThere==1
   if not stillThere then deconstruct() end
end 
```

不幸的是，你不能把桌子拿回来。我不确定是否有一个简单的解决方案，因为 __index 会停止 GC。

# scripting - 在对话框中设置变量

> ID：15416640
> 
> 赞同：0
> 
> 时间：2013-03-14T17:51:53.627
> 
> 标签：scripting, mirc

```
/set %something sadf 
```

嗯，我可以使用组合对话框为变量设置值吗？

如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T18:30:00.987

如果您想将变量的值设置为等于组合框中的任何值，您只需要添加一个对话框事件。这是一个如何做到这一点的例子

```
dialog combo {

  size -1 -1 100 20
  title "Combo"
  option dbu

  combo 1, 5 5 50 10
  button "Set variable", 2, 60 5 35 10

}

on 1:dialog:combo:sclick:2 { 

  if ($did(combo, 1) != $null) set %something $did(combo, 1)

}

alias combo dialog -m combo combo 
```

运行`/combo`，在组合框中键入一些内容并按`Set variable`。该`%something`变量将使用您输入的内容进行设置。

# java - 将jsp页面的值与数据库值进行比较空指针异常

> ID：15416643
> 
> 赞同：0
> 
> 时间：2013-03-14T17:51:56.573
> 
> 标签：java, database, jsp, servlets

我想比较从表单中获取的字符串与带有表值的值......但是有空指针异常
2）我如何让结果集不访问表的最后一条记录

```
 String occid = request.getParameter("occid");
        String date = request.getParameter("Date");
        String firstname = request.getParameter("FirstName");
        String lastname = request.getParameter("LastName");
        String village = request.getParameter("Village");
        String sonof = request.getParameter("Son");
        String district = request.getParameter("District");
        String weight = request.getParameter("Weight");
        String bags = request.getParameter("Bags");
        String rate = request.getParameter("Rate");
        String amount = request.getParameter("Amount");
        String advanceamt = request.getParameter("Advance");

        String sql = null;
        PreparedStatement prest = null;
        List<AcceptBean> list = new ArrayList<AcceptBean>();

        sql = "Select * from ColdStorage.OccupantMaster";
        prest = conn.prepareStatement(sql);
        ResultSet rs = prest.executeQuery();
        String first = "";
        String last = "";
        String vill = "";
        String son = "";
        String dist = "";
        while (rs.next()) {
            AcceptBean bean = new AcceptBean();
            first = rs.getString("FirstName");
            bean.setFirstName(first);
            System.out.println("first = " + first);
            last = rs.getString("LastName");
            bean.setLastName(last);
            System.out.println("last = " + last);
            vill = rs.getString("Village");
            bean.setVillage(vill);
            System.out.println("vill = " + vill);
            son = rs.getString("Sonof");
            bean.setSonOf(son);
            System.out.println("son = " + son);
            dist = rs.getString("District");
            bean.setDistrict(dist);
            System.out.println("dist = " + dist);
            list.add(bean);
        }
        for (AcceptBean s : list) {
            if ((first.equals(firstname) || first.equals("null")) && (last.equals(lastname) || last.equals("null")) &&
                    (vill.equals(village) || vill.equals("null")) && (son.equals(sonof) || son.equals("null")) &&
                    (dist.equals(district) || dist.equals("null"))) 

            {
                System.out.println("do nothing");
                ServletContext sc = getServletContext();
                RequestDispatcher rd = sc.getRequestDispatcher("/Index.jsp");
                System.out.println("it exists in database");
                rd.forward(request, response);

            } 
```

数据库值是 -

OccId 名 姓 村 SonOf 区

31 Sourodeep bag bengal aurobindo bad bengal

32 ARVINDBHAI 帕尔马萨乔德

第 67 章

72 urvashi parmar 孟买 arvindbhai parmar 孟买

90 迪扬 NULL NULL NULL NULL

91 迪扬 NULL NULL NULL NULL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:55:39.077

1.  你必须检查空

    如果（第一！=空）

2.如果是空搅拌，`null`则不等于`NULL`，因为你使用了equals，使用equalsIgnoreCase代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:55:49.883

文档[`ResultSet#getString`](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getString%28java.lang.String%29)说：

> 列值；如果值为 SQL NULL，则返回值为 null

例如，对于那些行，而`last`不是. 因此，您正在调用。`null``String` `"null"``null.equals`

测试`== null`，而不是`equals("null")`：

```
 if( first == null || first.equals(firstname) &&
            last == null || last.equals(lastname) &&
            vill == null || vill.equals(village) &&
            son == null || son.equals(sonof) &&
            dist == null || dist.equals(district) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:01:20.443

检查你的

如果（第一！=空）

然后将值与其他值进行比较

# loops - iMacros 中的 LOOP 功能（TAG POS）

> ID：15416654
> 
> 赞同：6
> 
> 时间：2013-03-14T17:52:34.660
> 
> 标签：loops, tags, instagram, imacros

我有这个代码：

```
VERSION BUILD=7601105 RECORDER=FX
SET !TIMEOUT_PAGE 10
SET !ERRORIGNORE YES
TAB T=1

CMDLINE !DATASOURCE tags.csv
SET !DATASOURCE_COLUMNS 1
SET !DATASOURCE_LINE {{!LOOP}}
SET !VAR1 {{!LOOP}}

'***** enter all hashtags and likes here
'1
URL GOTO=http://web.stagram.com/tag/{{!COL1}}/
WAIT SECONDS=5
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2
TAG POS={{!LOOP}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png
WAIT SECONDS=2 
```

查看所有链接如何相同，我想循环 10 次到同一 url 中的下一个链接，而不必复制/粘贴 TAG POS 命令 10 次。

谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:02:02.010

你不能用常规的 imacros 做到这一点，但你可以用 jaavscript 版本。像这样的东西：

```
var macro;
macro =  "CODE:";
macro +=  "TAG POS={{i}} TYPE=IMG ATTR=SRC:http://cdn.stagram.com/img/like.png" + "\n"; 
macro +=  "WAIT SECONDS=2" + "\n"; 
for(i=1;i<=10;i++){
iimSet("i",i);
iimPlay(macro);
} 
```

# php - Pear::Auth 从命令行访问

> ID：15416656
> 
> 赞同：0
> 
> 时间：2013-03-14T17:52:38.103
> 
> 标签：php, http, pear

我对 Pear::Auth PHP 库有疑问。我可以以某种方式“登录命令行”吗？我的意思是我可以从 HttpRequest 访问受 Pear::Auth 保护的资源吗？我在其他脚本程序中创建自己？你能给我一个例子吗（python、php、java或任何可读的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:59:13.020

真的取决于...取决于您尝试执行此操作的内容和位置...想到的一些事情：

*   将凭据作为命令行参数传递。
*   将凭据作为 GET 请求参数的一部分传递（可能假设为 SSL）。
*   将 cURL 与 cookie 罐一起使用。
*   实现一个服务层，以便这些调用以一种可满足您需求的替代方式处理身份验证（具有身份验证的 API 可与您现有的 Pear Auth 一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:52:30.087

好的，让它工作（希望这可能对其他人有所帮助 - 这是 Python 解决方案，可以转换为任何语言，并允许您通过在程序中创建的 HttpRequest 控件登录到 Pear::Auth。

```
import urllib
import httplib2
from urllib import urlencode
http = httplib2.Http()

url = 'LOGIN_URL'
# this applies to current version of Pear (had to add the authsecret)
body = {'username': 'USRENAME', 'password': 'PASSWORD', 'authsecret': ''} 
headers = {'Content-type': 'application/x-www-form-urlencoded'}
response, content = http.request(url, 'POST', headers=headers, body=urllib.urlencode(body))
# CAREFUL!!! HERE IS THE TRICKY PART !
# response['set-cookie'] looks like this -> 'SomeSession=longID; path=/, SomeSession=longID; path=/, authchallenge=blabla; path=/'
# you need to parse it and use only authchallanage and SomeSessionpart(just one of them I think the last one) - have no idea why, but it works. So next line needs some parsing and fixing
headers = {'Cookie': response['set-cookie']} #parseme -- this is not correnct and will not work, but you have to fix it to match your implementation
print headers

# e.g. headers = {'Cookie': 'MySession=bdfdstiq90oilkpk7n4s2q2g50; authchallenge=fddtggffg5784d359c12dfad4059', 'X_REQUESTED_WITH': 'xmlhttprequest'}#the second header is optional, I needed to access some ajax call
data = dict(argument="to_pass", eg="customerID")
resp, content = http.request("secure_URL", "POST", urlencode(data), headers=headers)
print resp
print content 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T10:04:52.360

如果有人对这里的 Java 解决方案感兴趣，那就是：

```
public String getServerJson(){
    DefaultHttpClient httpclient = new DefaultHttpClient();
    HttpPost httpost = new HttpPost("https://"+hostToReach+"/secure/index.php");
    httpost.setHeader("Content-Type", "application/x-www-form-urlencoded; charset=utf-8");

    List <NameValuePair> nvps = new ArrayList <NameValuePair>();
    nvps.add(new BasicNameValuePair("username", htmlUsername));
    nvps.add(new BasicNameValuePair("password", htmlPassword));

    httpost.setEntity(new UrlEncodedFormEntity(nvps, Consts.UTF_8));
    try {
        HttpResponse response = httpclient.execute(httpost);
        HttpEntity entity = response.getEntity();
        EntityUtils.consume(entity);

    }
    catch (Exception e){
        e.printStackTrace();
    }

    HttpPost ajaxPost = new HttpPost("https://"+hostToReach+"/?event_id="+pmp.getPmpEventId().getEventId().toString()+"&categories_only=true&pos=true");
    ajaxPost.setHeader("X_REQUESTED_WITH", "xmlhttprequest");
    try {
        HttpResponse catResponse = httpclient.execute(ajaxPost);
        BufferedReader rd = new BufferedReader (new InputStreamReader(catResponse.getEntity().getContent()));
        String line = "";
        String json = "";
        while ((line = rd.readLine()) != null) {
              json += line;
        }
        EntityUtils.consume(catResponse.getEntity());
        return json;

    }
    catch (Exception e) {
        e.printStackTrace();
        return "";
    }
} 
```

注意：cookies 是自动处理的（httpclient 在它存在的整个过程中都会保存它们，所以你不必担心）

# android - 找不到源 classloader.class

> ID：15416659
> 
> 赞同：4
> 
> 时间：2013-03-14T17:52:51.210
> 
> 标签：android, eclipse

我编写了以下代码用于从 Internet 资源中读取信息：

```
public String ReadUrl(){
    BufferedReader br = null;
    String result = null;

    try {
        URL url = new URL(this.url);
        br = new BufferedReader(new InputStreamReader(url.openStream()));
        String line = null;
        while ((line = br.readLine()) != null)
            result += line;
    } catch (IOException e) {
    }

    return result;
} 
```

`this.url`看起来像：`"http://example.com/json.php"`。当我想在虚拟机上打开此应用程序时，我在 Eclipse 中收到此错误：

> 源附件不包含文件 classloader.class 的源

问题出在哪里？（我更新了 Eclipse 和 Android SDK）。

# python - Django模板循环以“items”为键的dictionary.items

> ID：15416662
> 
> 赞同：10
> 
> 时间：2013-03-14T17:52:56.143
> 
> 标签：python, django, django-templates

我的模板中有一本字典，我想以通常的方式循环浏览

```
{% for key, value in dictionary.items %} 
```

但是在字典中我有一个名为 的键`'items'`，所以我的循环返回字典 ['items'] 的值并尝试将结果解包为键值。

如何告诉 Django 使用该功能`items`而不是访问密钥？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T18:02:57.680

`dictionary.iteritems`改为打电话？我不认为有更好的方法。

如果您无法控制字典键，唯一安全的方法是使用自定义标签来迭代字典。

# python - pyqt - 用 csv 数据填充 QTableWidget

> ID：15416663
> 
> 赞同：4
> 
> 时间：2013-03-14T17:53:01.183
> 
> 标签：python, csv, pyqt, qtablewidget

我有一个 QTableWidget，我将此表中的数据导出到 csv 文件。但是现在，我想打开一个现有的 csv 文件并用这些数据填充我的表。我该怎么做？

这是我的导出代码，我想要一个“填充”代码，但我真的不知道该怎么做。我知道如何读取 csv，但我不知道如何用这个 csv 数据填充我的表格。

```
def export(self):
    nomeArquivo = "nomeArquivo"
    filename = unicode(QFileDialog.getSaveFileName(self, "Document - Choose Export File", nomeArquivo+".csv"))
    if not filename:
            return
    self.model.sort()
    fh = None
    try:

            fh = QFile(filename)
            if not fh.open(QIODevice.WriteOnly):                     
                raise IOError, unicode(fh.errorString())
            stream = QTextStream(fh)
            stream.setCodec("UTF-8")              
            for row in range(self.model.rowCount()):
                TSentence = self.model.data(
                self.model.index(row, TABELA.SENTENCE)).toString()
                TIrony = self.model.data(   
                self.model.index(row, TABELA.IRONY)).toString()

                stream  << "\""<< TSentence << "\"" << ";" << "\""<< TIrony <<"\"" <<"\n" 

    except (IOError, OSError), e:
        QMessageBox.warning(self, "Text - Error",
                "Failed to export: %s" % e)

    finally:
        if fh:
            fh.close()
    QMessageBox.warning(self, "Text - Export",
            "Successfully exported text to %s" % filename) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-15T03:02:48.720

看起来您可以在`csv`这里使用该模块：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
import csv

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, fileName, parent=None):
        super(MyWindow, self).__init__(parent)
        self.fileName = fileName

        self.model = QtGui.QStandardItemModel(self)

        self.tableView = QtGui.QTableView(self)
        self.tableView.setModel(self.model)
        self.tableView.horizontalHeader().setStretchLastSection(True)

        self.pushButtonLoad = QtGui.QPushButton(self)
        self.pushButtonLoad.setText("Load Csv File!")
        self.pushButtonLoad.clicked.connect(self.on_pushButtonLoad_clicked)

        self.pushButtonWrite = QtGui.QPushButton(self)
        self.pushButtonWrite.setText("Write Csv File!")
        self.pushButtonWrite.clicked.connect(self.on_pushButtonWrite_clicked)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.tableView)
        self.layoutVertical.addWidget(self.pushButtonLoad)
        self.layoutVertical.addWidget(self.pushButtonWrite)

    def loadCsv(self, fileName):
        with open(fileName, "rb") as fileInput:
            for row in csv.reader(fileInput):    
                items = [
                    QtGui.QStandardItem(field)
                    for field in row
                ]
                self.model.appendRow(items)

    def writeCsv(self, fileName):
        with open(fileName, "wb") as fileOutput:
            writer = csv.writer(fileOutput)
            for rowNumber in range(self.model.rowCount()):
                fields = [
                    self.model.data(
                        self.model.index(rowNumber, columnNumber),
                        QtCore.Qt.DisplayRole
                    )
                    for columnNumber in range(self.model.columnCount())
                ]
                writer.writerow(fields)

    @QtCore.pyqtSlot()
    def on_pushButtonWrite_clicked(self):
        self.writeCsv(self.fileName)

    @QtCore.pyqtSlot()
    def on_pushButtonLoad_clicked(self):
        self.loadCsv(self.fileName)

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow("/path/to/MyFile.csv")
    main.show()

    sys.exit(app.exec_()) 
```

PyQt5 版本：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-
import csv

from PyQt5 import QtCore, QtGui, QtWidgets

class MyWindow(QtWidgets.QWidget):
    def __init__(self, fileName, parent=None):
        super(MyWindow, self).__init__(parent)
        self.fileName = fileName

        self.model = QtGui.QStandardItemModel(self)

        self.tableView = QtWidgets.QTableView(self)
        self.tableView.setModel(self.model)
        self.tableView.horizontalHeader().setStretchLastSection(True)

        self.pushButtonLoad = QtWidgets.QPushButton(self)
        self.pushButtonLoad.setText("Load Csv File!")
        self.pushButtonLoad.clicked.connect(self.on_pushButtonLoad_clicked)

        self.pushButtonWrite = QtWidgets.QPushButton(self)
        self.pushButtonWrite.setText("Write Csv File!")
        self.pushButtonWrite.clicked.connect(self.on_pushButtonWrite_clicked)

        self.layoutVertical = QtWidgets.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.tableView)
        self.layoutVertical.addWidget(self.pushButtonLoad)
        self.layoutVertical.addWidget(self.pushButtonWrite)

    def loadCsv(self, fileName):
        with open(fileName, "r") as fileInput:
            for row in csv.reader(fileInput):    
                items = [
                    QtGui.QStandardItem(field)
                    for field in row
                ]
                self.model.appendRow(items)

    def writeCsv(self, fileName):
        with open(fileName, "w") as fileOutput:
            writer = csv.writer(fileOutput)
            for rowNumber in range(self.model.rowCount()):
                fields = [
                    self.model.data(
                        self.model.index(rowNumber, columnNumber),
                        QtCore.Qt.DisplayRole
                    )
                    for columnNumber in range(self.model.columnCount())
                ]
                writer.writerow(fields)

    @QtCore.pyqtSlot()
    def on_pushButtonWrite_clicked(self):
        self.writeCsv(self.fileName)

    @QtCore.pyqtSlot()
    def on_pushButtonLoad_clicked(self):
        self.loadCsv(self.fileName)

if __name__ == "__main__":
    import sys

    app = QtWidgets.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow("data.csv")
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T20:10:29.143

这是来自我的一个项目：

```
def setup_relation(self,rel):

    self.table.insertRow(0)

    for i in rel.header.attributes:
        item=QtGui.QTableWidgetItem()
        item.setText(i)
        self.table.insertColumn(self.table.columnCount())
        self.table.setItem(0,self.table.columnCount()-1,item)

    for i in rel.content:
        self.table.insertRow(self.table.rowCount())
        for j in range(len(i)):
            item=QtGui.QTableWidgetItem()
            item.setText(i[j])
            self.table.setItem(self.table.rowCount()-1,j,item) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-29T23:18:46.703

```
import csv

from PyQt5.QtCore import Qt
from PyQt5.QtGui import QKeySequence, QCursor
from PyQt5.QtWidgets import QAction, QApplication, QFileDialog, QMenu, QTableView

class SEToolsTableView(QTableView):

    """QTableView class extended for SETools use."""

    def __init__(self, parent):
        super(SEToolsTableView, self).__init__(parent)

        # set up right-click context menu
        self.save_csv_action = QAction("Save table to CSV...", self)
        self.menu = QMenu(self)
        self.menu.addAction(self.save_csv_action)

        # connect signals
        self.save_csv_action.triggered.connect(self.choose_csv_save_location)

    def contextMenuEvent(self, event):
        self.menu.popup(QCursor.pos())

    def event(self, e):
        if e == QKeySequence.Copy or e == QKeySequence.Cut:
            datamodel = self.model()

            selected_text = []
            current_row = None
            current_col = None
            prev_row = None
            prev_col = None
            for index in sorted(self.selectionModel().selectedIndexes()):
                current_row = index.row()
                current_col = index.column()

                if prev_row is not None and current_row != prev_row:
                    selected_text.append('\n')
                elif prev_col is not None and current_col != prev_col:
                    selected_text.append('\t')

                selected_text.append(datamodel.data(index, Qt.DisplayRole))

                prev_row = current_row
                prev_col = current_col

            QApplication.clipboard().setText("".join(selected_text))
            return True

        else:
            return super(SEToolsTableView, self).event(e)

    def choose_csv_save_location(self):
        filename = QFileDialog.getSaveFileName(self, "Save to CSV", "table.csv",
                                               "Comma Separated Values Spreadsheet (*.csv);;"
                                               "All Files (*)")[0]

        if filename:
            self.save_csv(filename)

    def save_csv(self, filename):
        """Save the current table data to the specified CSV file."""

        datamodel = self.model()
        row_count = datamodel.rowCount()
        col_count = datamodel.columnCount()

        with open(filename, 'w') as fd:
            writer = csv.writer(fd, quoting=csv.QUOTE_MINIMAL)

            # write headers
            csv_row = []
            for col in range(col_count):
                csv_row.append(datamodel.headerData(col, Qt.Horizontal, Qt.DisplayRole))

            writer.writerow(csv_row)

            # write data
            for row in range(row_count):
                csv_row = []

                for col in range(col_count):
                    index = datamodel.index(row, col)
                    csv_row.append(datamodel.data(index, Qt.DisplayRole))

                writer.writerow(csv_row) 
```

# twitter-bootstrap - Twitter Bootstrap 中的自定义对象

> ID：15416668
> 
> 赞同：0
> 
> 时间：2013-03-14T17:53:14.857
> 
> 标签：twitter-bootstrap

对于假设位于给定位置的图像顶部的容器，我有以下 CSS：

```
.jumbotron .container {
    position: absolute;
    right: 0;
    bottom: 0;
    left: 0;
    top:75px;
}

.jumbotron .caption{
    position: static;
    max-width: 750px;
    padding: 10px;
    margin-bottom: 200px;
    background: rgba(51, 51, 51, 0.65) !important;
    margin-top: 50px;
} 
```

在示例站点上创建以下内容：[示例开发站点](http://adambalan.com/WordPressDev/)

您所看到的是巨大的 jumbotron 图像，上面有一个不透明的正方形。调整屏幕大小，使菜单进入移动友好，一切看起来都比较好，现在打开菜单。

不透明的正方形不会随图像向下移动，它停留在一个位置。如何让它与图像一起移动并保持其原始位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:57:41.457

添加`position:relative`到那个特定的 jumbotron。

# javascript - 使用 Javascript 将 css 样式应用于弹出窗口

> ID：15416672
> 
> 赞同：0
> 
> 时间：2013-03-14T17:53:28.310
> 
> 标签：javascript

我有一个带有多个 div 的 jsp。我正在使用整个 div 数据`innerHTML`并将其显示到弹出窗口。通过使用它，我无法获得所有的 CSS 样式。

这是功能：

```
function popupWin(cs) {
  var divText1 = document.getElementById("divId").innerHTML;
  var divText2 = document.getElementById("divId"+cs).innerHTML;
  var divText3 = document.getElementById("divId"+cs+"abc").innerHTML;
  var myWindow = window.open('',"mywindow","status=no,menubar=no,resizable=yes,toolbar=no,scrollbars=yes,addressbar=no,height=600,width=800");
  var doc = myWindow.document;
  doc.open();
  doc.write('<link href="styles/shared/common.css" rel="stylesheet" type="text/css" />');
  doc.write('<link href="styles/parent/common.css" rel="stylesheet" type="text/css" media="all" />');
  doc.write('<link href="styles/parent/print.css" rel="stylesheet" type="text/css" media="print" />');
  doc.write('<link rel="stylesheet" type="text/css" href="styles/admintool.css" />');
  doc.write(divText1);
  doc.write(divText2);
  doc.write(divText3);
  doc.close();
} 
```

通过使用此功能，只有一些样式有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:57:38.593

尝试在样式链接周围写 head 标签，在内容周围写 body 标签。

# java - Android：ListView ..在单击模式和多选模式之间转换（例如：消息传递应用程序）

> ID：15416674
> 
> 赞同：2
> 
> 时间：2013-03-14T17:53:39.707
> 
> 标签：java, android, android-layout, android-listview, android-adapter

ListView 将显示联系人。

选项：

一键式模式。如果用户单击一个项目（仅显示 TextView），应用程序将启动一个新活动（联系人资料）。

2-选择模式。如果用户从菜单或操作栏项目中选择添加到联系人，则列表视图将更改为选择模式（每个项目的文本视图 + 复选框）。

1-如何隐藏和显示复选框？

2-如何应对事件？

编码：

Activity的布局：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   android:background="@drawable/screen_background"
    android:orientation="vertical" >
    <SearchView
    android:id="@+id/search_bar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="textCapWords"
    android:iconifiedByDefault="false" >
  </SearchView>
   <View
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:background="#000000" />
   <ListView
    android:id="@+id/listview_Menu"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:choiceMode="singleChoice" >
   </ListView>

  </LinearLayout> 
```

列表视图项目布局：

```
 <LinearLayout
   android:layout_width="match_parent"
   android:layout_height="wrap_content" 
   android:orientation="horizontal">

    <CheckBox
     android:id="@+id/listview_checkbox_item"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

   <TextView
    android:id="@+id/listview_textview_item"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:gravity="center"
    android:textColor="#fefefe"
    android:textSize="25sp" >
   </TextView>

  </LinearLayout> 
```

活动类

```
 protected void onCreate(Bundle savedInstanceState) {

     super.onCreate(savedInstanceState);
    setContentView(R.layout.list_view_screen);

    String[] contacts = {"aaaa aaa", "bbbb bbbb" ,"ccccccc" ,"ddddd dddd" ,"ffffff ffffff"};

    final ArrayAdapter<String> adapt = 
     new ArrayAdapter<String>( this, R.layout.list_view_item,   
                              R.id.listview_textview_item,items);

    ListView menuList = (ListView) findViewById(R.id.listview_Menu);
      menuList.setAdapter(adapt);

       menuList.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View itemClicked,
                int position, long id) {
            // TODO Auto-generated method stub
            startActivity(new Intent(this,
                    ContactProfile.class));

        }

    });

    menuList.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    });

 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T19:17:46.947

我想我找到了答案。

首先：

在 list_view_item 布局中。为了

文本视图 android:textIsSelectable="false" 复选框 android:visibility="invisible"

允许**点击模式**。（setOnItemClickListener(new AdapterView.OnItemClickListener() 将起作用）

第二：

显示或隐藏所有复选框。

```
 ListView menuList = (ListView) findViewById(R.id.listview_Menu);
        for(int i=0; i < menuList.getChildCount(); i++){
            LinearLayout itemLayout = (LinearLayout)menuList.getChildAt(i);
            CheckBox cb = (CheckBox)itemLayout.findViewById(R.id.listview_checkbox_item);
           cb.setVisibility((cb.getVisibility() == View.VISIBLE)? View.INVISIBLE :  View.VISIBLE);
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:59:47.443

假设您正确设置了列表，您希望放入`android:visibility="invisible"`复选框定义，然后`listview_checkbox_item.setVisibility()`在您的操作栏按钮回调函数中使用来切换可见性。

# glassfish - 为什么我的 Web 应用程序在 Glassfish 中连续部署了两次？

> ID：15416681
> 
> 赞同：0
> 
> 时间：2013-03-14T17:53:58.047
> 
> 标签：glassfish, jersey

我正在使用 NetBeans 7.3、Glassfish 3.1.2.2 和 Maven。当我将应用程序部署到 Glassfish 时，我得到以下日志：

```
Launching GlassFish on Felix platform
INFO: Running GlassFish Version: GlassFish Server Open Source Edition 3.1.2.2 (build 5)
INFO: Registered org.glassfish.ha.store.adapter.cache.ShoalBackingStoreProxy for persistence-type = replicated in BackingStoreFactoryRegistry
INFO: Grizzly Framework 1.9.50 started in: 3ms - bound to [0.0.0.0:3700]
INFO: Grizzly Framework 1.9.50 started in: 15ms - bound to [0.0.0.0:8181]
INFO: Grizzly Framework 1.9.50 started in: 27ms - bound to [0.0.0.0:8080]
INFO: Grizzly Framework 1.9.50 started in: 8ms - bound to [0.0.0.0:4848]
INFO: Grizzly Framework 1.9.50 started in: 1ms - bound to [0.0.0.0:7676]
INFO: The Admin Console is already installed, but not yet loaded.
INFO: WEB0169: Created HTTP listener [http-listener-1] on host/port [0.0.0.0:8080]
INFO: WEB0169: Created HTTP listener [http-listener-2] on host/port [0.0.0.0:8181]
INFO: WEB0169: Created HTTP listener [admin-listener] on host/port [0.0.0.0:4848]
INFO: WEB0171: Created virtual server [server]
INFO: WEB0171: Created virtual server [__asadmin]
INFO: WEB0172: Virtual server [server] loaded default web module []
INFO: core.start_container_done
INFO: SEC1002: Security Manager is OFF.
INFO: SEC1010: Entering Security Startup Service
INFO: SEC1143: Loading policy provider com.sun.enterprise.security.provider.PolicyWrapper.
INFO: SEC1115: Realm [admin-realm] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.
INFO: SEC1115: Realm [file] of classtype [com.sun.enterprise.security.auth.realm.file.FileRealm] successfully created.
INFO: SEC1115: Realm [certificate] of classtype [com.sun.enterprise.security.auth.realm.certificate.CertificateRealm] successfully created.
INFO: SEC1011: Security Service(s) Started Successfully
WARNING: DPL8027: Ignore WEB-INF/sun-web.xml in archive /C:/Users/Tiago Peres/Documents/NetBeansProjects/playground-websockets/target/playground-websockets-1.0-SNAPSHOT/, as GlassFish counterpart runtime xml WEB-INF/glassfish-web.xml is present in the same archive.
INFO: WELD-000900 1.1.8 (Final)
INFO: HV000001: Hibernate Validator 4.3.0.Final
INFO: Activating CDI extension for Spring Data JPA repositories.
INFO: PWC1412: WebModule[null] ServletContext.log():No Spring WebApplicationInitializer types detected on classpath
INFO: Inicializando Mojarra 2.1.6 (SNAPSHOT 20111206) para o contexto '/playground-websockets'
INFO: Monitoring jndi:/server/playground-websockets/WEB-INF/faces-config.xml for modifications
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1a4ffb5b: startup date [Thu Mar 14 14:11:17 BRT 2013]; root of context hierarchy
INFO: Loading XML bean definitions from URL [jndi:/server/playground-websockets/WEB-INF/beans.xml]
INFO: JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
INFO: JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO: Overriding bean definition for bean 'loginService': replacing [Generic bean: class [com.playground.core.service.impl.LoginServiceImpl]; scope=singleton; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in URL [jar:file:/C:/Users/Tiago%20Peres/Documents/NetBeansProjects/playground-websockets/target/playground-websockets-1.0-SNAPSHOT/WEB-INF/lib/playground-core-1.0-SNAPSHOT.jar!/com/playground/core/service/impl/LoginServiceImpl.class]] with [Generic bean: class [com.playground.core.service.impl.LoginServiceImpl]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in URL [jndi:/server/playground-websockets/WEB-INF/beans.xml]]
INFO: JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO: Loaded JDBC driver: com.mysql.jdbc.Driver
INFO: Bean 'dataSource' of type [class org.springframework.jdbc.datasource.DriverManagerDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'persistenceProvider' of type [class org.hibernate.ejb.HibernatePersistence] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'jpaVendorAdapter' of type [class org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'jpaDialect' of type [class org.springframework.orm.jpa.vendor.HibernateJpaDialect] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: persistence-websockets.xml should be located inside META-INF directory; cannot determine persistence unit root URL for class path resource [persistence-websockets.xml]
INFO: Building JPA container EntityManagerFactory for persistence unit 'playground-websockets'
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
INFO: HHH000412: Hibernate Core {4.1.6.Final}
INFO: HHH000206: hibernate.properties not found
INFO: HHH000021: Bytecode provider name : javassist
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: playground-websockets
    ...]
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory
INFO: HHH000397: Using ASTQueryTranslatorFactory
INFO: HHH000229: Running schema validator
INFO: HHH000102: Fetching database metadata
INFO: HHH000261: Table found: playground.gametitle
INFO: HHH000037: Columns: [id, playedtimes, name, maximumnumberofplayers, rating, launchdate]
INFO: HHH000261: Table found: playground.player
INFO: HHH000037: Columns: [id, nickname, facebookid]
INFO: HHH000261: Table found: playground.score
INFO: HHH000037: Columns: [id, playedtimes, gametitle_id, victories, losses, player_id, points]
INFO: HHH000261: Table found: playground.hibernate_sequence
INFO: HHH000037: Columns: [next_val]
INFO: Bean 'entityManagerFactory' of type [class org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@56983a92: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,scoreRepositoryImpl,scoreRepository,gameTitleRepositoryImpl,gameTitleRepository,playerRepositoryImpl,playerRepository,org.springframework.data.repository.core.support.RepositoryInterfaceAwareBeanPostProcessor#0,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#0,invitationRepositoryImpl,loggedPlayerRepository,queueRepositoryImpl,roomRepositoryImpl,invitationServiceImpl,loginService,queueServiceImpl,roomServiceImpl,dataSource,entityManagerFactory,persistenceProvider,jpaDialect,jpaVendorAdapter,org.springframework.transaction.config.internalTransactionAspect,transactionManager,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#1,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#1,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
INFO: Using JTA UserTransaction: com.sun.enterprise.transaction.UserTransactionImpl@45f8a36d
INFO: Using JTA TransactionManager: com.sun.enterprise.transaction.TransactionManagerHelper@46b16cfe
INFO: Using JTA TransactionSynchronizationRegistry: com.sun.enterprise.transaction.TransactionSynchronizationRegistryImpl@c91aca4
INFO: ***MyWebSocketApplication registered successfully in the Servlet***
INFO: ***LoginApplication registered successfully in the Servlet***
INFO: WEB0671: Loading application [playground-websockets] at [/playground-websockets]
INFO: CORE10010: Loading application playground-websockets done in 21.807 ms
INFO: GlassFish Server Open Source Edition 3.1.2.2 (5) hora de inicialização : Felix (1.296ms), serviços de inicialização(23.324ms), total(24.620ms)
INFO: Created EjbThreadPoolExecutor with thread-core-pool-size 16 thread-max-pool-size 32 thread-keep-alive-seconds 60 thread-queue-capacity 2147483647 allow-core-thread-timeout false 
```

然后它又开始为“Jersey Application”做所有事情。

```
INFO: Initiating Jersey application, version 'Jersey: 1.11.1 03/31/2012 06:49 PM'
INFO: WEB0169: Created HTTP listener [http-listener-1] on host/port [0.0.0.0:8080]
INFO: Grizzly Framework 1.9.50 started in: 2ms - bound to [0.0.0.0:8080]
INFO: REST00001: Listening to REST requests at context: /management/domain
INFO: The Admin Console is already installed, but not yet loaded.
INFO: The Admin Console is starting. Please wait.
INFO: JMX005: JMXStartupService had Started JMXConnector on JMXService URL service:jmx:rmi://Tiago-PC:8686/jndi/rmi://Tiago-PC:8686/jmxrmi
INFO: Inicializando Mojarra 2.1.6 (SNAPSHOT 20111206) para o contexto ''
WARNING: DPL8027: Ignore WEB-INF/sun-web.xml in archive /C:/Users/Tiago Peres/Documents/NetBeansProjects/playground-websockets/target/playground-websockets-1.0-SNAPSHOT/, as GlassFish counterpart runtime xml WEB-INF/glassfish-web.xml is present in the same archive.
INFO: WEB0671: Loading application [__admingui] at [/]
INFO: CORE10010: Loading application __admingui done in 2.489 ms
INFO: The Admin Console application is loaded.
INFO: Activating CDI extension for Spring Data JPA repositories.
INFO: PWC1412: WebModule[null] ServletContext.log():No Spring WebApplicationInitializer types detected on classpath
INFO: Inicializando Mojarra 2.1.6 (SNAPSHOT 20111206) para o contexto '/playground-websockets'
INFO: Monitoring jndi:/server/playground-websockets/WEB-INF/faces-config.xml for modifications
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@2b58140c: startup date [Thu Mar 14 14:11:40 BRT 2013]; root of context hierarchy
INFO: Loading XML bean definitions from URL [jndi:/server/playground-websockets/WEB-INF/beans.xml]
INFO: JSR-250 'javax.annotation.ManagedBean' found and supported for component scanning
INFO: JSR-330 'javax.inject.Named' annotation found and supported for component scanning
INFO: Overriding bean definition for bean 'loginService': replacing [Generic bean: class [com.playground.core.service.impl.LoginServiceImpl]; scope=singleton; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in URL [jar:file:/C:/Users/Tiago%20Peres/Documents/NetBeansProjects/playground-websockets/target/playground-websockets-1.0-SNAPSHOT/WEB-INF/lib/playground-core-1.0-SNAPSHOT.jar!/com/playground/core/service/impl/LoginServiceImpl.class]] with [Generic bean: class [com.playground.core.service.impl.LoginServiceImpl]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in URL [jndi:/server/playground-websockets/WEB-INF/beans.xml]]
INFO: JSR-330 'javax.inject.Inject' annotation found and supported for autowiring
INFO: Loaded JDBC driver: com.mysql.jdbc.Driver
INFO: Bean 'dataSource' of type [class org.springframework.jdbc.datasource.DriverManagerDataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'persistenceProvider' of type [class org.hibernate.ejb.HibernatePersistence] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'jpaVendorAdapter' of type [class org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Bean 'jpaDialect' of type [class org.springframework.orm.jpa.vendor.HibernateJpaDialect] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: persistence-websockets.xml should be located inside META-INF directory; cannot determine persistence unit root URL for class path resource [persistence-websockets.xml]
INFO: Building JPA container EntityManagerFactory for persistence unit 'playground-websockets'
INFO: HCANN000001: Hibernate Commons Annotations {4.0.1.Final}
INFO: HHH000412: Hibernate Core {4.1.6.Final}
INFO: HHH000206: hibernate.properties not found
INFO: HHH000021: Bytecode provider name : javassist
INFO: HHH000204: Processing PersistenceUnitInfo [
    name: playground-websockets
    ...]
INFO: HHH000130: Instantiating explicit connection provider: org.hibernate.ejb.connection.InjectedDataSourceConnectionProvider
INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
INFO: HHH000268: Transaction strategy: org.hibernate.engine.transaction.internal.jta.CMTTransactionFactory
INFO: HHH000397: Using ASTQueryTranslatorFactory
INFO: HHH000229: Running schema validator
INFO: HHH000102: Fetching database metadata
INFO: HHH000261: Table found: playground.gametitle
INFO: HHH000037: Columns: [id, playedtimes, name, maximumnumberofplayers, rating, launchdate]
INFO: HHH000261: Table found: playground.player
INFO: HHH000037: Columns: [id, nickname, facebookid]
INFO: HHH000261: Table found: playground.score
INFO: HHH000037: Columns: [id, playedtimes, gametitle_id, victories, losses, player_id, points]
INFO: HHH000261: Table found: playground.hibernate_sequence
INFO: HHH000037: Columns: [next_val]
INFO: Bean 'entityManagerFactory' of type [class org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6bbeacbf: defining beans [org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,org.springframework.context.annotation.internalPersistenceAnnotationProcessor,playerRepositoryImpl,playerRepository,gameTitleRepositoryImpl,gameTitleRepository,scoreRepositoryImpl,scoreRepository,org.springframework.data.repository.core.support.RepositoryInterfaceAwareBeanPostProcessor#0,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#0,invitationRepositoryImpl,loggedPlayerRepository,queueRepositoryImpl,roomRepositoryImpl,invitationServiceImpl,loginService,queueServiceImpl,roomServiceImpl,dataSource,entityManagerFactory,persistenceProvider,jpaDialect,jpaVendorAdapter,org.springframework.transaction.config.internalTransactionAspect,transactionManager,org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor#1,org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#1,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
INFO: Using JTA UserTransaction: com.sun.enterprise.transaction.UserTransactionImpl@32ada1c
INFO: Using JTA TransactionManager: com.sun.enterprise.transaction.TransactionManagerHelper@46b16cfe
INFO: Using JTA TransactionSynchronizationRegistry: com.sun.enterprise.transaction.TransactionSynchronizationRegistryImpl@c91aca4
INFO: ***MyWebSocketApplication registered successfully in the Servlet***
INFO: ***LoginApplication registered successfully in the Servlet***
INFO: WEB0671: Loading application [playground-websockets] at [/playground-websockets]
INFO: playground-websockets foi implantado com sucesso em 19.620 milissegundos.
INFO: WEB0169: Created HTTP listener [http-listener-2] on host/port [0.0.0.0:8181]
INFO: Grizzly Framework 1.9.50 started in: 2ms - bound to [0.0.0.0:8181] 
```

我不明白为什么应用程序也必须部署到泽西岛。我没有任何 Restfull 服务，我为什么需要它？我可以删除它吗？如何？

提前感谢您的任何回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T02:33:06.663

您从日志中的第一个摘录显示 Glassfish 正在启动。如果应用程序之前已部署，Glassfish 会在启动时加载它。

第二个序列是将应用程序的当前版本从您的 IDE（由 Oracle Glassfish 插件驱动）部署到 Glassfish 中。它不会跟踪在 Glassfish 停止/启动中部署了哪个版本的 Web 应用程序的状态 - 所以它只是重新发布它。

如果在您发布更新时 Glassfish 已经在运行，它应该只发布一次。

# html - lang=unknown 属性是否有效？

> ID：15416683
> 
> 赞同：7
> 
> 时间：2013-03-14T17:54:04.180
> 
> 标签：html, lang

给定一个特定语言（英语）的 HTML 文档。

我在标签上定义了一个 lang 属性：

```
<html lang="en"> 
```

页面中的某些文本是用另一种语言（例如法语）编写的：

```
<span lang="fr">
  blabla...
</span> 
```

但是，如果我无法识别语言，但我知道它不是英语，我可以将“未知”设置为 lang 属性的有效值吗？

```
<span lang="unknown">
  blabla...
</span> 
```

我在 w3c 文档中读到了这个，但我不确定“默认值是 [...] 未知”是否意味着“未知”是一个真实值......

[http://www.w3.org/TR/html4/struct/dirlang.html](http://www.w3.org/TR/html4/struct/dirlang.html)

*lang = language-code [CI] 此属性指定元素属性值和文本内容的基本语言。**此属性的默认值为 unknown**。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T20:48:05.090

HTML 4.01 规范中的措辞晦涩难懂；该值`unknown`不是有效的语言标签，并且规范使用单词“unknown”作为正常的英文单词。即，默认值是表示语言未知的值，但未明确指定该值。

该规范在这方面已经部分过时，因为它指的是语言标签上的已被取代的 RFC。当前的 RFC 是[RFC 5646](https://www.rfc-editor.org/rfc/rfc5646)，用于识别语言的标签，也称为 BCP（最佳当前实践）47。除其他外，它在主要语言标签方面参考 ISO 639-2，它们包含`und`“未确定”的代码”。所以从技术上讲，你可以使用`lang=und`，但 RFC 说：“除非需要语言标签并且语言信息不可用或无法确定，否则不应使用此子标签。最好省略语言标签（在允许的情况下）。”</p>

这是 HTML5 RC 中采用的方法，它说[：`lang`](http://www.w3.org/TR/html5/dom.html#the-lang-and-xml:lang-attributes) “将属性设置为空字符串表示主要语言是未知的。[BCP47]”</p>

因此，对于无法识别语言的文本，您可以使用例如`<span lang="">...</span>`.

原则上，当您在更高级别的元素嵌套中指示语言时，这很有用。例如，设置`lang=""`可能意味着用户代理禁用拼写检查和特定于语言的格式，尽管这仍然是相当理论上的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:55:49.680

如果您不需要，我宁愿**根本不设置它。**请注意，`lang=`如果未设置，则该值将从其封闭（父）元素派生。

如果您以*某种方式被迫设置它*，那么根据规范将其设置为您已经建议的**默认值`unknown`**似乎是完全合法的。

# actionscript-3 - 如何在 FlashBuilder 中存储 GPS 坐标？

> ID：15416684
> 
> 赞同：2
> 
> 时间：2013-03-14T17:54:11.183
> 
> 标签：actionscript-3, flash-builder

我正在开发一个应用程序，我需要将所有 GPS 坐标存储在数据库中。我可以存储它，但只能存储最后一个坐标。

我的问题是，如何存储用户活动的所有坐标？我正在使用 WAMP 服务器。这是我的代码，它只存储最后一个坐标。请注意，我仅使用此代码存储 Long 和 Lat

```
protected function onUpdate(event:GeolocationEvent):void {
  trace("Update event called");
  log.text = "latitude = " + event.latitude +
    "\nlongitude = " + event.longitude +
    "\naltitude = " + event.altitude +
    "\nverticalAccuracy = " + event.verticalAccuracy +
    "\nhorizontalAccuracy = " + event.horizontalAccuracy +
    "\nspeed = " + event.speed +
    "\nheading = " + event.heading +
    "\ntimestamp = " + event.timestamp;
  lat.text="" + event.latitude;
  long.text="" + event.longitude;
  langTextInput.text = long.text
  latTextInput.text=lat.text
  gpstableService.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T23:31:15.690

我认为您需要问自己的第一个问题是您是要在本地还是在 WAMP 服务器上存储此坐标。

如果您只在本地需要它们，那么一个简单的选择是使用本地 SharedObject（例如，您可以存储任何新位置，并将您收到事件的日期作为键）。如果你真的想使用本地数据库，那么你可以使用这样的服务：

```
package
{
    import flash.data.SQLConnection;
    import flash.data.SQLStatement;
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.SQLEvent;

    public class DatabaseService extends EventDispatcher
    {
        public var conn:SQLConnection;

        public function DatabaseService()
        {
            conn = new SQLConnection();
            conn.addEventListener(SQLEvent.OPEN, handleConnectionSuccess);
            conn.openAsync(null);
        }

        public function addCoordinates(lat:String, long:String):void
        {
            var insertStmt:SQLStatement = new SQLStatement();
            insertStmt.sqlConnection = conn;
            var sql:String = "INSERT INTO coordinates (latitude, longitude)" +
                " VALUES (" + lat + ", " + long + ")";
            insertStmt.text = sql;
            insertStmt.addEventListener(SQLEvent.RESULT, handleInsertionResult);
            insertStmt.execute();
        }

        private function createTable():void
        {
            var createStmt:SQLStatement = new SQLStatement();
            createStmt.sqlConnection = conn;
            var sql:String = "CREATE TABLE IF NOT EXISTS coordinates " +
                "( coordId INTEGER PRIMARY KEY AUTOINCREMENT, latitude TEXT, longitude TEXT)";
            createStmt.text = sql;
            createStmt.addEventListener(SQLEvent.RESULT, handleTableCreationResult);
            createStmt.execute();
        }

        private function handleConnectionSuccess(event:SQLEvent):void
        {
            createTable();
        }

        private function handleTableCreationResult(event:SQLEvent):void
        {
            dispatchEvent(new Event(Event.COMPLETE));
        }

        private function handleInsertionResult(event:SQLEvent):void
        {
            var stmt:SQLStatement = event.target as SQLStatement;
            stmt.removeEventListener(SQLEvent.RESULT, handleInsertionResult);
            trace ("Coordinates are saved in DB");
        }
    }
} 
```

然后，您可以在每次收到 GPS 事件时调用此服务：

```
 protected function onUpdate(event:GeolocationEvent):void
    {
        trace("Update event called");
        gpsTableService.addCoordinates(event.latitude, event.longitude);
    } 
```

`gpsTableService`的实例在哪里`DatabaseService`。

如果您需要在您的服务器上发送此信息，那么您应该编写一个 PHP 脚本来处理您的请求。该脚本将负责数据库管理，即将数据存储到其中。要从您的 Flash 应用程序调用此脚本，您需要创建用户 a `URLVariable`、 a`URLRequest`和 a `URLLoader`。

# php - Disqus API：以访客身份创建评论

> ID：15416688
> 
> 赞同：4
> 
> 时间：2013-03-14T17:54:24.903
> 
> 标签：php, curl, disqus

我正在尝试使用 Disqus API 将帖子添加到现有讨论/论坛。在文档中，我可以读到我可以作为访客发送评论而无需身份验证。文档是这样说的： [http ://disqus.com/api/docs/posts/create/](http://disqus.com/api/docs/posts/create/)

> 在两种情况下允许匿名评论：
> 
> 1.  您正在使用旧版身份验证和您的密钥
> 2.  您正在使用您的公钥，您来自经过验证的推荐人，您未经身份验证，并且您尝试在其上创建帖子的论坛列在应用程序受信任的论坛中。
> 
> 要创建匿名评论，只需传递 author_email 和 author_name 以及可选的 author_url 参数。

所以我使用这段代码在 PHP 中创建注释。（我使用了一个非常简单的 cURL 类，但问题不存在，因为我在 disqus.com/api 的控制台中得到了相同的类）

```
$curl = new Curl(1); 

$curl->addPostVar('thread','THREAD_ID');
$curl->addPostVar('message','Text message');
$curl->addPostVar('author_email','My email');
$curl->addPostVar('author_name','My name');
$curl->addPostVar('api_secret','My application secret API key');

echo $curl->exec('https://disqus.com/api/3.0/posts/create.json'); 
```

但我通过 JSON 得到错误

```
{"code": 4, "response": "You must be authenticated to perform this action"} 
```

我知道其他人已经问过这个问题（[Disqus API 创建发布错误](https://stackoverflow.com/questions/13897710/disqus-api-create-post-error)），但建议的响应是使用 OAuth 并获得身份验证。但我不想进行身份验证，我想发送带有姓名和电子邮件的客人评论。我哪里错了？

非常感谢您的任何回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T15:20:23.457

要匿名评论，您**不会**传递任何访问令牌。但是，您必须确保满足以下条件：

1.  在您的网站设置中，在“常规”下，确保选中“允许访客评论”
2.  在您的 Disqus 网站设置中，在“高级”选项卡下，将您的域添加为受信任域
3.  在您的 API 应用程序设置中，将受信任域中的相同域添加到 API 应用程序的受信任域列表中
4.  当您发出 API 请求以发布评论时，请确保您的“referer”标头有一个位于这些受信任域之一上的域，并将“host”标头设置为“.disqus.com”以获得良好的衡量标准
5.  使用您的公钥发出 API 请求

我能够按照这些规则成功提出请求。

为了清楚起见，您需要拥有/管理该站点才能通过 API 向其发布匿名评论。还要确保`strict=1`在执行此操作时传递一个附加参数。默认情况下，错误的任何可选参数都会被简单地删除，因此如果 author_name 和 author_email 抛出错误，您可能会遇到以自己身份发表评论的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-12T03:03:23.480

在检查了明显的事情（比如启用访客发帖和在论坛和应用程序设置中检查我的引用域）之后，我终于能够使用[disqus-php](https://github.com/disqus/disqus-php)库解决这个问题：

```
require __DIR__ . '/disqus-php-master/disqusapi/disqusapi.php';

$disqus = new DisqusAPI($secret_key);

print_r($disqus->posts->create(array(
    'thread' => $thread_id,
    'message' => $message,
    'author_name' => $author_name,
    'author_email' => $author_email,
    'api_key' => $api_key,
))); 
```

问题是它与`api_key`您的 Disqus 应用程序设置中显示的公钥不同。实际上，我必须检查来自 Disqus Javascript 小部件的 AJAX 调用之一才能得到正确的`api_key`：

![Disqus AJAX 调用标头显示 api_key](../Images/8e47965fbb3c2be0e4c9b7cc1948517c.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-31T12:18:46.320

我再次打开这个帖子，因为我有同样的问题，而且似乎还没有答案。

几天来，我一直在尝试以访客身份通过 API 发表评论。如果我阅读 API 文档，它说我必须传递消息、author_name、author_url、thread 和 api_key 才能做到这一点，但不能这样做。我总是得到

```
"Code: 12" 
```

和

```
"This application cannot create posts on the chosen forum". 
```

如果我通过 access_token 发送它可以工作，但它会以我的身份发布，这不是我想要的。

我还在 Github 上找到了[Disqus 食谱](https://github.com/disqus/DISQUS-API-Recipes)，在初学者部分的自述文件中，它指的是一个片段

> “创建访客评论：/php/create-guest-comment.php”

但找不到片段。所以我浏览了提交并找到[“删除过时的客人评论创建脚本”](https://github.com/disqus/DISQUS-API-Recipes/commit/b0eaca0f1d025579d47cb6d4cb70e271ff9036ac)。我是否应该将其视为 Disqus 目前无法通过 API 以访客身份创建评论的暗示？如果是这样，Disqus 可能会更新您的文档。

如果我做错了什么，我会很感激你指出我正确的方向。

# php - 在 PHP 中使用 CURL POST 登录到远程身份验证函数/php 文件

> ID：15416689
> 
> 赞同：2
> 
> 时间：2013-03-14T17:54:33.293
> 
> 标签：php, html, rest, curl, login

我正在尝试为我的脚本创建一个登录系统并且卡在一个点上。

我需要做的是 POST 他在 login.php (server1) 上提交的用户的登录详细信息到我的后端脚本的登录系统 verify.php(server2) verify.php 使用 POST 数据来验证登录信息并实际设置cookie 和后端系统的所有其他内容。

我在 server2 上使用了第 3 部分脚本，所以我不能在其中进行太多修改，如果我直接从 server1 到 server2 直接执行 HTML FORM POST（使用 action=verify.php 链接），整个登录操作都有效

但是出于各种原因和安全目的以及执行附加代码，我需要使用 curl 或其他方式来发布登录信息。

我的登录系统正在工作，因为我可以在我的日志中回显登录信息正确且登录功能在 server2 上运行的状态，但由于某种原因（可能是由于 curl），cookie 没有设置/保存到用户的 PC 等当他访问 server2 url，他仍然看到我设置的“需要登录”错误消息，因此没有通过该 login.php 文件获取自动登录。

这是我的 login.php 代码（server1）和 $hostname 链接到 server2（verify.php）

```
$data['username']=$username;
$data['pass']=$pass;

//open connection
    $ch = curl_init();

    //set the url, number of POST vars, POST data
    curl_setopt($ch,CURLOPT_URL, $hostname);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    curl_setopt($ch,CURLOPT_USERAGENT, "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)");
    curl_setopt($ch,CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch,CURLOPT_PROXY, $proxy);
    curl_setopt($ch,CURLOPT_COOKIEJAR, "cookie.txt");
    curl_setopt($ch,CURLOPT_COOKIEFILE, "cookie.txt");
//curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
    //execute post
    $result = curl_exec($ch);

    print_r(curl_error($ch));
    print_r(curl_getinfo($ch));
    print_r(curl_errno($ch));

    //close connection
    curl_close($ch); 
```

这是卷曲响应

```
Trying to login with *user* and *pass* Var check username password
 SuccessArray ( [url] => *hostname* [content_type] => text/html [http_code] => 200 [header_size] => 712 [request_size] => 308 [filetime] => -1 [ssl_verify_result] => 0 [redirect_count] => 0 [total_time] => 0.245843 
[namelookup_time] => 0.010171 [connect_time] => 0.01039 [pretransfer_time] => 0.010398 [size_upload] => 257 [size_download] => 93 [speed_download] => 378 [speed_upload] => 1045 [download_content_length] => -1 [upload_content_length] => 257 [starttransfer_time] => 
0.042541 [redirect_time] => 0 [certinfo] => Array ( ) [redirect_url] => ) 0 
```

PS：它不是php使用的远程登录系统，它是一个用户登录系统，而不是直接使用HTML FORM动作

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-12T11:10:14.473

**服务器配置开始**

步骤1：

浏览并打开：..\php\php.ini

第2步：

通过删除分号 (;) 取消注释 php.ini 文件中的以下行。

```
;extension=php_curl.dll 
```

之后它看起来像下面的东西 - extension=php_curl.dll

第 3 步：

重新启动您的 Apache 服务器。

**服务器配置端**

**php代码**

```
$c = curl_init();//init
curl_setopt($c,CURLOPT_URL,'http://yourURL.php');//url 
curl_setopt($c,CURLOPT_POST,1);//post
//1 = true
curl_setopt($c, CURLOPT_POSTFIELDS,'name=XXX&lastname=YYY');
curl_exec($c);//exec 
```

**静态选项：**

`CURLOPT_URL`- 网址

`CURLOPT_HEADER`- 得到标题？(0/1)

`CURLOPT_RETURNTRANSFER`- 回答服务器的价值？(0/1)

`CURLOPT_TIMEOUT`- 连接多长时间，服务器忙时

`CURLOPT_POST`- 邮政？(0/1)

`CURLOPT_POSTFIELDS`- 发布数据

`CURLOPT_NOBODY`- 只返回 HEAD

[更多的](http://pl.php.net/manual/pl/function.curl-setopt.php)

# java - 在模拟器上打印

> ID：15416692
> 
> 赞同：-1
> 
> 时间：2013-03-14T17:54:38.653
> 
> 标签：java, android, android-emulator, console

我是安卓新手。我正在做一个项目，我需要在 android 手机上提供方向信息。所以，我必须在我的安卓屏幕上看到定向消息。我已经用普通的 java 编写了代码并编译，在命令提示符下执行。我能够看到我在代码中给出的打印语句的输出。所以，我创建了一个新的 android 项目，然后创建了另一个类并将我的代码粘贴到那里。令我惊讶的是，我在模拟器屏幕上找不到打印语句。此外，当我昨晚尝试做同样的事情时，我能够在 eclipse 的控制台窗口上看到打印语句。但我现在不一样了。你能解释一下如何让我的打印语句出现在模拟器屏幕上。同时，请让我知道为什么我能够在 Eclipse 的控制台窗口上看到这些打印语句，我应该怎么做才能复制它们？我只能在模拟器屏幕上看到 Hello World。

下面是一段代码：

`包 com.example.visual;

```
import org.json.JSONObject;
import org.restlet.data.ChallengeScheme;
import org.restlet.ext.json.JsonRepresentation;
import org.restlet.resource.ClientResource;
import android.widget.Toast;
import android.app.Activity;

public class ItsClient4 extends Activity {

private final static String BASE_URL = "my website url";
private final static String SITE_ID = "67";// Your site ID here
private final static String STATION_MAC[] = {"mac1","mac2"};// The station's MAC address
private final static String NODES[] = {"mac3","mac4","mac5","mac6","mac7","mac8"};
private final static String USERNAME = "usrname";// Your username
private final static String PASSWORD = "pwd";// Your password
public static void main(String[] args) throws Exception {
// Set the request parameters
while(true){
double c[]=new double[6];
double d[]=new double[6];
String url[] =new String[2];
ClientResource itsClient[] = new ClientResource[2];
JsonRepresentation jsonRep[] = new JsonRepresentation[2];
for(int i=0;i<=0;i++){

url[i] = BASE_URL + "sites/" + SITE_ID + "/stations/"+ STATION_MAC[i] + "/";

itsClient[i] = new ClientResource(url[i]);
                 itsClient[i].setChallengeResponse(ChallengeScheme.HTTP_BASIC, USERNAME, PASSWORD);
// Retrieve and parse the JSON representation
jsonRep[i] = new JsonRepresentation(itsClient[i].get());
JSONObject jsonObj = jsonRep[i].getJsonObject();
// Output results

c[i]=jsonObj.getJSONObject("loc").getDouble("lat");
d[i]=jsonObj.getJSONObject("loc").getDouble("lng");

Toast.makeText(ItsClient4.this,"text",20000).show();
//Toast.makeText(ItsClient4.this, "Hello", Toast.LENGTH_LONG).show();
System.out.println(c[i] +" "+d[i]);
if(d[i]>78.142182){
System.out.println("near E8");
}
}

}
}
} 
```

`

请检查上面的代码，请帮助我如何使用 Toast。它仍然给我错误“不能在静态上下文中使用它”。在我的包“visual”中，在 src 目录中，com.example.visual 有两个子目录。一个是MainActivity.java，另一个是ItsClient4.java。MainActivity.java 是自动创建的。我通过在 com.example.visual 目录中添加一个新的 Class 创建了 ItsClient4.java。请告诉我如何克服上述错误。

我不能在 Main 函数中使用 Toast 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T17:55:48.637

> 你能解释一下如何让我的打印语句出现在模拟器屏幕上。

用于`Toast`在模拟器上显示文本。

喜欢

```
Toast.makeText(this, "text", Toast.LENGH_LONG).show(); 
```

你应该使用`logcat`喜欢

```
Log.v("app","text"); and see this in logcat 
```

这也是调试的更好选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T17:57:54.850

对于打印，您可以使用 Toast 示例：

```
Toast.makeText(MainActivity.this, "Hello", Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T17:59:19.647

就像 TGMCians 所说，一个`Toast`人会成功。

如果您想将其写入 LogCat，那么您可以使用

```
Log.i(tag, message) 
```

然后，您可以通过转到 Window > Show View > Other > Android > LogCat 在 Eclipse 中的 LogCat 中查看它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T18:30:37.743

有很多方法可以获取有关 android 的反馈。

**解决方案 1：**

仅在屏幕上显示反馈的 Activity。像以下代码一样更改您的创建：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Create a string with text
    String message = "the text you want to show";

    // here you can write / change your 'message' to 
    //         whatever you want to display on screen...

    // Create the text view
    TextView textView = new TextView(this);
    textView.setTextSize(40);

    // enable textView to scroll to for long text to be visible
    textView.setMovementMethod(new ScrollingMovementMethod()); 

    // add the text to the textview
    textView.setText(message); 

    // Set the text view as the activity layout
    setContentView(textView);
} 
```

**解决方案 2：**

[Toast 消息](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)持续排序时间段，并在屏幕底部（默认情况下）弹出：

```
Toast.makeText(context, text, duration).show(); 
```

*   上下文： `this`如果代码在 Activity 类中
*   文本：通常是一个字符串
*   持续时间： `Toast.LENGTH_SHORT`或`Toast.LENGTH_LONG`

**解决方案 3：**

一条日志消息。它类似于 java 代码`System.out.println("a message");`，虽然它可以工作，但看到它编写并不常见。相反，我们使用 android 原生[Log 类](http://developer.android.com/reference/android/util/Log.html)。

```
Log.v(TAG, "your message here" + and_some_other_variable); 
```

*   TAG：一个字符串，以便更容易找到您的日志，可用于过滤。

有关调试日志的更多信息[在这里](http://developer.android.com/tools/debugging/debugging-log.html)。

# c# - 在gridview中滚动

> ID：15416699
> 
> 赞同：0
> 
> 时间：2013-03-14T17:55:04.480
> 
> 标签：c#, asp.net, web-applications, gridview, vertical-scrolling

我有一个网格视图，它有 4 列 --> 食物类型、菜肴名称、价格、数量。

“食物类型”列的值为“法国、中国、意大利”

“菜肴名称”列具有用于尊重食物类型的菜肴名称，例如。对于中国人来说，其中一道菜是面条。

“价格栏”有每道菜的价格

“数量”列有文本框，客户将在其中插入要订购的菜肴数量。

3 种食物类型中的每一种都可以有数百种菜肴。我在启用滚动的单个网格视图中显示所有食物类型的所有菜肴。

问题是，网格视图一次只能在滚动面板中显示 20 行。我想避免手动滚动以获取特定食物类型的菜肴。

我想使用一个下拉列表 (DDL)，其中包含法语、中文、意大利语（食物类型）的值，用于在网格视图中滚动。当用户选择 DDL 中的任何值时，用户应滚动到网格视图的相关区域。假设网格首先有法国食物类型的行（行可以是任何数字），然后是中国食物，最后是意大利食物。

请帮助我使用 DDL 制作此垂直滚动功能。

要可视化网格视图，请点击以下链接：

[http://www.flickr.com/photos/94027637@N05/8556915219/](http://www.flickr.com/photos/94027637@N05/8556915219/)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T05:42:08.470

如果您可以用简短的链接列表替换下拉列表，您可以将带有每种食物类型 ID 的锚标记添加到该类型的第一个条目。它看起来像这样：

```
<a href="#French">French</a>
<a href="#French">Chinese</a>
<a href="#French">Italian</a>

<table>
    <tr><td><a id="French"></a>French</td><td>Steak au poivre</td></tr>
    <tr><td>French</td><td>Steak frites</td></tr>
    <tr><td>French</td><td>Poulet frites</td></tr>
    ...
    <tr><td><a id="Chinese"></a>Chinese</td><td>Chinese noodles</td></tr>
    <tr><td>Chinese</td><td>Noodle Soup</td></tr>
    ...
    <tr><td><a id="Italian"></a>Italian</td><td>Braciole</td></tr>
    <tr><td>Italian</td><td>Pizza marinara</td></tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:01:15.390

我有另一个建议用于此类工作。

对每个食品类别使用可折叠面板/手风琴。首先，所有食品类别都将被折叠，当客户想要查看特定类别时，他/她将单击该类别的标题，该标题将展开以显示相关食品。

取决于您，您可以使用多个网格或单个网格。

# windows - SQLite 数据库可以跨 Windows 服务和用户应用程序共享吗？

> ID：15416702
> 
> 赞同：1
> 
> 时间：2013-03-14T17:55:24.137
> 
> 标签：windows, sqlite, service, share

在我的产品中，我想在 Windows 服务和用户级应用程序之间使用 SQLite 共享数据。但是，我遇到了一些问题。

当用户级应用程序创建 SQLite 数据库时，两个程序都可以毫无问题地使用它。但是如果服务创建了 SQLite 数据库，那么 SQLite 似乎处理并发性很差。只要数据库连接处于活动状态，服务进程似乎就会保持写锁定。用户级进程的尝试会导致与共享内存相关的错误（我见过`SQLITE_IOERR_SHMOPEN`和`SQLITE_IOERR_SHMMAP`）而不是正常`SQLITE_LOCKED`错误。当然，当服务关闭与数据库的连接时，用户级进程将再次获得访问权限。

该服务以`LOCAL_SERVICE`用户身份运行，SQLite 数据库位于共享系统目录 ( `C:\ProgramData\...`)**中并使用预写日志记录 (编辑)**。

我的理论是 SQLite 不能在用户级进程和服务之间共享内存，因此不可能有两个同时由这些进程保持的连接。

有没有人处理过这个？除了非常努力地防止两个进程同时需要数据库之外，还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T19:16:51.127

显然，问题与该服务正在创建具有限制性权限的文件夹（在其中创建 SQLite 数据库）有关。*一旦我们开始为用户*组中的任何人创建具有写入权限的文件夹，问题就消失了。

# iframe - 从 iFrame embed API 获取 YouTube 视频信息

> ID：15416703
> 
> 赞同：4
> 
> 时间：2013-03-14T17:55:25.027
> 
> 标签：iframe, youtube, youtube-api

我正在使用 YouTube iFrame API 嵌入视频并创建一个简单的自定义播放器。

我正在寻找视频标题/描述/等。无需再次调用 YouTube 即可从 API 获取信息。我找不到任何相关信息 - 有什么想法，还是我一直在打额外的电话来获取视频信息？我想也许信息在`player`返回的对象中可用`YT.Player()`。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-02T14:32:56.883

就目前而言，假设您的播放器对象已准备就绪，则可以使用视频数据，通过`player.getVideoData()`它从 YT.Player 返回视频数据对象：

```
var videoData = player.getVideoData();
var title = videoData['title'];
var video_id = videoData['video_id'];
var author = videoData['author']; 
```

请注意，视频数据对象中的标题只是一个简短的标题，据我所知有 48 个字符。目前没有长标题和任何描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T05:24:35.740

在这里我已经完成了..如果它是正确的，那么标记为正确:)

```
<script type="text/javascript">
var playListURL = 'http://gdata.youtube.com/feeds/users/AbrahamLingo/uploads?alt=json&callback=?';

var videoURL= 'http://www.youtube.com/watch?v=';
$.getJSON(playListURL, function(data) {
var list_data="";
$.each(data.feed.entry, function(i, item) {
var feedTitle = item.title.$t;
var feedURL = item.link[1].href;
var fragments = feedURL.split("/");
var videoID = fragments[fragments.length - 2];
var url = videoURL + videoID;
var thumb = "http://img.youtube.com/vi/"+ videoID +"/hqdefault.jpg";
 alert(feedTitle);
});
});

</script> 
```

演示链接：- [http://jsfiddle.net/7gq6Y/](http://jsfiddle.net/7gq6Y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T13:59:10.487

似乎这是不可能的。我花了很多时间手动查看播放器对象，但找不到与标题或描述相关的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-24T18:43:26.933

是的，JacobFennell 的回答是正确的，是从玩家对象中获取数据的最佳方式。只要确保你在 onPlayerReady 事件中处理这个，否则你会得到一个未定义的对象：

```
function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '390',
      width: '640',
      videoId: 'M7lc1UVf-VE',
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange
      }
    });

    console.log(player);
  }

  // 4\. The API will call this function when the video player is ready.
  function onPlayerReady(event) {
    player.getVideoData(); //here you go
    event.target.playVideo();
  } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-23T00:07:50.840

据我所知，Iframe API`getVideoData()`总是调用`https://www.youtube.com/get_video_info`.

Nit：我建议不要通过将其从对象而不是对象中取出来`onPlayer*`调用函数。`getVideoData()``event``player`

在任何一种情况下，函数都会返回和对象，如下所示：

```
Object { video_id: "XXX", author: "AUTHOR", title: "TITLE" } 
```

下面是一个使用视频 ID 设置 Google Analytics 事件的示例：

```
var onPlayerStateChange = function(event) {

    // get video Id from event, not player.
    videoId = typeof event.target.getVideoData().video_id !== 'undefined' ? event.target.getVideoData().video_id : 'unknown';

    // track when user clicks Play
    if (event.data == YT.PlayerState.PLAYING) {

        if (window.ga && ga.loaded) {

            ga('send', 'event', 'Video', 'play', videoId);
        }
    }

    // track when user clicks Pause
    if (event.data == YT.PlayerState.PAUSED) {

        if (window.ga && ga.loaded) {

            ga('send', 'event', 'Video', 'pause', videoId);
        }
    }

    // track when video ends
    if (event.data == YT.PlayerState.ENDED) {

        if (window.ga && ga.loaded) {

            ga('send', 'event', 'Video', 'ended', videoId);
        }
    }
}; 
```

# django - 删除后模型对象是否可用？

> ID：15416708
> 
> 赞同：3
> 
> 时间：2013-03-14T17:55:45.090
> 
> 标签：django

如果我从数据库中获取所有对象，然后使用 python foreach 循环遍历它们，然后我删除循环中的所有对象。仍作为客户对象在内存中的已删除数据库条目会发生什么情况

```
for cust in Customer.objects.all():
   #delete all
   for cust2 in Customer.objects.all():
      cust2.delete()

   #what is cust now??
   cust.save() # is this valid? 
```

是否可以立即刷新每个客户的每次迭代中的值？因此，在处理 cust1 时，我删除了 cust2，然后在下一次迭代中我不开始处理 cust2 ...想象一下：

```
 for cust in Customer.objects.all():
       if cust.pay_everyone():
           for cust2 in Customer.objects.all(): 
               cust2.paid = True
               cust2.save()

       #when cust2 comes in the loop, cust2.paid is still False
       #the previous pay_everyone() method is undone
       if cust.kill_everyone():
           for cust2 in Customer.objects.all(): 
               cust2.delete()

       #when cust2 comes in the loop, he is still alive when he should be dead
       cust.save()
       # in cust2's turn in the loop, he has been just resurrected which is not possible 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:14:08.827

这是摘自[文档](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.delete)的摘录：

> Model.delete([using=DEFAULT_DB_ALIAS]) 为对象发出 SQL DELETE。这只会删除数据库中的对象；Python 实例仍将存在，并且其字段中仍将包含数据。
> 
> 有关更多详细信息，包括如何批量删除对象，请参阅删除对象。
> 
> 如果您想要自定义删除行为，您可以覆盖 delete() 方法。有关更多详细信息，请参阅覆盖预定义的模型方法。

我不明白为什么你会在第一个循环中嵌套第二个循环：对于每个对象，删除所有对象然后保存对象？

```
cust = Customer.objects.all():

#delete all
for c in Customer.objects.all():
   c.delete() 
```

这更清楚，恕我直言。我会尝试解释应该发生什么（不是 100% 肯定，从未尝试过这样的事情）。

*   cust 是一个 QueryDict 对象，正如文档所说，它仍然填充
*   您的数据库现在已清空与客户模型相关的所有数据

您现在应该能够遍历 cust 并再次保存每个对象。

注意**应该**，这很重要

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:18:30.150

该`cust`变量包含有关存储在 QuerySet 中的第 n 个元素的信息的 python 表示形式（由 Customer.objects.all() 获得）。

如果您调用 delete() 方法，您会点击数据库，但有关已删除对象的所有信息仍存储在`cust`变量中。因此，如果您在删除此方法的 save() 方法后调用，您将在数据库中重新存储变量中包含的所有信息。

# android - 进度条活动强制关闭

> ID：15416716
> 
> 赞同：1
> 
> 时间：2013-03-14T17:55:57.047
> 
> 标签：android, android-progressbar, android-handler

我是 android 新手，正在尝试一些教程。我遇到了处理进度条的简单教程。我的最小 SDK 是 11。

这是我尝试过并在运行时强制关闭活动的方法

```
public class HandlerDemo extends Activity {

ProgressBar bar;
Handler handler = new Handler() {
    @Override
    public void handleMessage(){    
        bar.incrementProgressBy(5);
    }

    @Override
    public void close() {
    }

    @Override
    public void flush() {
    }

    @Override
    public void publish(LogRecord arg0) {
    }
};

AtomicBoolean isRunning = new AtomicBoolean(false);

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_handler_demo);
    bar = (ProgressBar)findViewById(android.R.id.progress);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_handler_demo, menu);
    return true;
}

public void onStart() {
    super.onStart();
    bar.setProgress(0);

    Thread background = new Thread(new Runnable() {

        @Override
        public void run() {
            try{
                for(int i=0;i<20 && isRunning.get();i++){
                        Thread.sleep(1000);
                        handler.sendMessage(handler.obtainMessage());
                }
            }
            catch(Throwable t){
            }
        }
    });
    isRunning.set(true);
    background.start();
}

public void onStop(){
    super.onStop();
    isRunning.set(false);
}
} 
```

日志猫

```
03-14 23:18:51.408: E/AndroidRuntime(717): FATAL EXCEPTION: main
03-14 23:18:51.408: E/AndroidRuntime(717): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.progrss/com.example.progrss.HandlerDemo}: java.lang.NullPointerException
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1736)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1752)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:993)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.os.Looper.loop(Looper.java:126)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.ActivityThread.main(ActivityThread.java:3997)
03-14 23:18:51.408: E/AndroidRuntime(717):  at java.lang.reflect.Method.invokeNative(Native Method)
03-14 23:18:51.408: E/AndroidRuntime(717):  at java.lang.reflect.Method.invoke(Method.java:491)
03-14 23:18:51.408: E/AndroidRuntime(717):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
03-14 23:18:51.408: E/AndroidRuntime(717):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
03-14 23:18:51.408: E/AndroidRuntime(717):  at dalvik.system.NativeStart.main(Native Method)
03-14 23:18:51.408: E/AndroidRuntime(717): Caused by: java.lang.NullPointerException
03-14 23:18:51.408: E/AndroidRuntime(717):  at com.example.progrss.HandlerDemo.onStart(HandlerDemo.java:41)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1132)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.Activity.performStart(Activity.java:4320)
03-14 23:18:51.408: E/AndroidRuntime(717):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1709)
03-14 23:18:51.408: E/AndroidRuntime(717):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:58:53.233

改变

```
bar = (ProgressBar)findViewById(android.R.id.progress); 
```

到

```
bar = (ProgressBar)findViewById(R.id.progress); 
```

目前您正在尝试访问 android.R.id.progress

# c - 使用结构的哈希表

> ID：15416718
> 
> 赞同：0
> 
> 时间：2013-03-14T17:56:03.920
> 
> 标签：c

我正在研究一个哈希表，但没有走得太远。我的问题是如何将表格设置为大小。（阅读下面的说明以获得澄清）。

这是我应该做的：

```
/**
 * Create a new instance of struct hashStorage and return it. It sets the size of the
 * table to be of length "size" which will be the number of the entries in the hash. It takes also an
 * argument to specify the format of the order printed to an output stream. If myHash parameter
 * is NULL then this means that the hash should be a linked list. When myHash is NULL the size
 * parameter should be ignored.
 */

struct hashStorage {
    int    (*funcHash)  (int);
    void   (*printItem) (struct order *, FILE *);
    struct onode**      table;
    int    size;
};

struct hashStorage* createHash(int size, int (*myHash)(int),void(*printOrder)(struct order *, FILE *))
{
     struct hashStorage* hashList = (struct hashStorage*) malloc(sizeof(struct hashStorage));

     hashList->table;

    if(myHash == NULL)
    {

    }
    else
    {

    }
     return hashList;
} 
```

如果有人能解释我的给予和例子将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-01T13:14:14.557

您试图为已分配的对象设置值。你面临的障碍是：

1.  出于某种原因，您想合并链表和哈希表数据结构？这是愚蠢的，但无论如何......
2.  `malloc`不一定返回指向对象的指针；它可能会返回`NULL`。在继续之前，您需要检查一下。
3.  您分配 to 的返回值的`malloc`对象不是您要分配的对象，因此`hashList = ...`不起作用；您需要使用`*hashlist = ...`或`hashlist->member = ...`。

这是我编写此代码的方式：

```
typedef size_t hash_fn(int);
typedef void print_fn(struct order *, FILE *);

struct hash_table {
    size_t       size;
    hash_fn      *hash_function;
    print_fn     *print_function;
    struct onode *item[];
};

struct hash_table *create_hash_table(size_t size, hash_fn *hash_function, print_fn *print_function)
{
    if (hash_function == NULL)
    {
        /* This should give you enough to implement your linked list;
         * use hash_table->item[0] as your item and hash_table->item[1]
         * as your link. */
        size = 2;
    }

    struct hash_table *hash_table = malloc(sizeof *hash_table
                                         + size * sizeof *hash_table->table);
    if (hash_table == NULL)
    {
        return NULL;
    }

    *hash_table = (struct hash_table) { .size = size
                                      , .hash_function = hash_function
                                      , .print_function = print_function };

    return hash_table;
} 
```

# wordpress - 将 WordPress 标题拆分为两行

> ID：15416719
> 
> 赞同：1
> 
> 时间：2013-03-14T17:56:08.273
> 
> 标签：wordpress, split, title

这是一个您可能会觉得有用的问答。

很多时候，我正在构建一个 WordPress 网站，并且需要一个页面或帖子来拥有标题和副标题。我不想创建一个元框来存储子标题，我希望能够让作者在默认标题框中写下标题，然后在代码中将其分解为标题/副标题。

例如，这是标题：

“这是主标题 - 这是副标题”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T17:56:08.273

把它放在你的functions.php文件中会得到标题并用' - '字符分割它（注意它是一个空格，然后是一个连字符，后跟一个空格）。

```
/*
 * Split and wrap title
 */
    function get_split_title($postID) {
        $title = get_the_title($postID);
        $lines = explode(' &#8211; ', $title);
        $output = false;
        $count = 0;

        foreach( $lines as $line ) {
            $count++;
            $output .= '<span class="line-'.$count.'">'.$line.'</span> ';
        }

        return $output;
    } 
```

然后在主题文件中，您可以这样做以将标题烘烤分成几行：

```
<?php echo get_split_title($post->ID); ?> 
```

如果需要，您可以使用 CSS 和“display:block”将每个跨度拆分为新行。或者，您可以
在上述函数中的标记后添加 a。

# java - 获取 id 列表的更好方法

> ID：15416722
> 
> 赞同：2
> 
> 时间：2013-03-14T17:56:12.860
> 
> 标签：java, collections, guava

这是我的示例对象

```
public class Dummy {
    private long id;
    private String name;
    /**
     * @return the id.
     */
    public long getId() {
        return id;
    }
    /**
     * @param id the id to set.
     */
    public void setId(long id) {
        this.id = id;
    }
    /**
     * @return the name.
     */
    public String getName() {
        return name;
    }
    /**
     * @param name the name to set.
     */
    public void setName(String name) {
        this.name = name;
    }

} 
```

我的问题是我有这些对象的列表，我需要获取列表中该对象中存在的 id 列表。我可以很容易地做到这一点

```
List<Long> ids = Lists.newArrayList();
for(Dummy dummy: dummyList){
 ids.add(dummy.getId()); 
} 
```

我想知道是否可以通过使用替代方法来完成（而不是使用 for 循环可能是？）而不是我想出的可能是使用`Iterables`或`Collections`过滤？

编辑：我有兴趣知道如何以不同于我想出的方式完成它。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T18:10:39.657

## 使用番石榴

您可以使用`Iterables.transform`获取索引的 Iterable：

```
List<Dummy> dummyList = Lists.newArrayList();
Iterable<Long> idList = Iterables.transform(dummyList, new Function<Dummy, Long>() {
    public Long apply(Dummy dummy) { return dummy.getId(); };
}); 
```

但这似乎真的有点矫枉过正。你获得了一行，但你失去了可读性。

## 使用 Java 8

从 Java 8 开始，你有了闭包，你可以用更简洁的方式编写它。

```
List<Long> idList = dummyList
            .stream()
            .map(Dummy::getId)
            .collect(Collectors.toList()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:03:03.353

没有办法让它更短，这是完成工作所需的最少工作量。

你可以做什么，如果你发现你在很多地方都在这样做，那么你可以用它来做一个方法：

```
public static List<Long> getIds(final List<Dummy> dummyList)
{
    List<Long> ids = Lists.newArrayList();
    for(Dummy dummy: dummyList){
        ids.add(dummy.getId());   
    } 
} 
```

进而：

```
List<Long> ids = getIds(dummyList); 
```

编辑：如果您以后确实找到了不同的方法，您只需替换方法主体，并且“神奇地”您正在做的所有地方都将使用新方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T18:30:46.340

为了完整起见：您还可以使用[`LambdaJ`](https://code.google.com/p/lambdaj/)使其成为单线：

```
List<Long> ids = extract(dummyList, on(Dummy.class).getId()); 
```

[在LambdaJ 的 wiki](https://code.google.com/p/lambdaj/wiki/LambdajFeatures#Converting,_indexing_and_sorting_items)上查看更多详细信息。

请注意，此解决方案可能看起来比 for 循环更好，但性能更差，因为它在幕后使用代理，所以如果代码对性能至关重要，我不会使用它。[请参阅此处](https://code.google.com/p/lambdaj/wiki/PerformanceAnalysis)对 LambdaJ 造成的性能损失的一些分析。

# php - Doctrine2 Migrations... 访问实体以进行内容更新

> ID：15416726
> 
> 赞同：0
> 
> 时间：2013-03-14T17:56:33.923
> 
> 标签：php, doctrine-orm, database-migration

我已经开始使用 Doctrine Migrations 并且我很喜欢它......好吧，至少我直到今天才这样做 :-)
作为迁移的一部分，我需要更新菜单表以向应用程序添加新功能。我知道不鼓励在迁移过程中插入内容，但我找不到更好的方法来处理它。插入本身不是问题，但在我的情况下，该表使用 NestedTree 并且还具有需要设置的外键。

因此，为了填写所有数据，我需要在插入新内容之前查询数据库以获取一些值。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:51:09.157

最后我[发现](https://stackoverflow.com/questions/10355678/doctrine2-migration-using-dbal-instead-of-this-addsql?rq=1)你可以通过使用`$this->connection`. 它不像使用实体那么容易（在这种情况下），但它确实有效！

# codeigniter - ElFinder - 无法连接到后端

> ID：15416727
> 
> 赞同：0
> 
> 时间：2013-03-14T17:56:44.233
> 
> 标签：codeigniter, ckeditor, codeigniter-2, elfinder

我正在尝试将 CKeditor 和 Elfinder 集成到我的 Codeigniter 应用程序中。CKeditor 工作正常，但无论我尝试使用什么文件浏览器，我都会得到`server error`. 目前我正在尝试使用 Elfinder，但我得到了`Unable to connect to backend`错误。

我已经按照维基文章中所说的做了，但我似乎无法超越这一点。我还应该提到`connector.php`返回`server error`，这与我在使用 Kcfinder 时遇到的问题相同。

# java - JMS 订阅者在一段时间后停止从主题获取消息

> ID：15416729
> 
> 赞同：1
> 
> 时间：2013-03-14T17:56:45.170
> 
> 标签：java, jms, subscription, jms-topic

我注意到订阅 JMS 主题的进程在一段时间内没有消息发布到该主题后停止接收发布到该主题的消息（这次我无法准确量化，但让我们说一分钟）。我正在使用 JBoss Application Server v4.2 来管理主题。

知道为什么会这样，以及如何确保我的订阅者即使在没有任何内容发布到他们的主题之后仍然能够收到消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:40:02.920

在 [安装目录]/jboss/server/default/deploy/jboss-messaging.sar 中有一个名为“remoting-bisocket-service.xml”的文件

在其中，默认超时通常设置为 30 秒。此值需要设置为 0 以实现无限超时。

# javascript - 在 HTML5 Canvas 上绘制线条时出现问题

> ID：15416731
> 
> 赞同：2
> 
> 时间：2013-03-14T17:56:48.463
> 
> 标签：javascript, html, canvas

```
<body>
    <canvas id="myCanvas" style="border:1px solid #000000; width: 800px;height:800px">
    </canvas>
</body> 
```

我有一个这样定义的画布。在视图准备就绪时，我正在画布图形上绘制一个箭头。

```
window.onload = function() {

    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    ctx.fillStyle = "#000000";
    ctx.fillRect(0, 0, 800, 800);
    drawArrow(100, 100, 100, 20, ctx);
};

function drawArrow(x, y, w, h, ctxt) {

    var headWidth = 10;
    ctxt.beginPath();
    ctxt.strokeStyle = "#FF0";
    ctxt.moveTo(x, y + (h / 2));
    ctxt.lineTo(x + w, y + (h / 2));

    //To Draw Arrow Head
    ctxt.moveTo((x + w) - headWidth, y + (h / 2));
    ctxt.lineTo((x + w) - (2 * headWidth), y);
    ctxt.lineTo((x + w), y + (h / 2));
    ctxt.lineTo((x + w) - (2 * headWidth), y + h);
    ctxt.lineTo((x + w) - headWidth, y + (h / 2));

    //To Draw Arrow Tail
    ctxt.moveTo(x + (headWidth), y + (h / 2));
    ctxt.lineTo(x, y);
    ctxt.lineTo(x + (2 * headWidth), y + (h / 6));
    ctxt.lineTo(x + (2 * headWidth), y + (h * (3 / 4)));
    ctxt.lineTo(x, y + h);
    ctxt.lineTo(x + headWidth, y + (h / 2));

    ctxt.lineWidth = 1;
    ctxt.stroke();
} 
```

即使我设置`ctxt.lineWidth`为 1，线宽似乎也不是 1，而且线条有些拉伸。谁能指出我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:02:11.857

这是由于您通过 CSS 设置了宽度和高度。通过 CSS 更改宽度和高度将更改画布元素的大小，但不会更改像素密度。为此，您必须直接在 canvas 元素上设置`.width`and属性。`.height`

将您更改`onload`为以下内容，并删除元素上的宽度和高度样式。

**[现场演示](http://jsfiddle.net/V783h/1/)**

```
window.onload = function() {

    var c = document.getElementById("myCanvas");
    var ctx = c.getContext("2d");
    // canvas width and height set here.
    c.width = 800;
    c.height = 800;

    ctx.fillStyle = "#000000";
    ctx.fillRect(0, 0, 800, 800);
    drawArrow(100, 100, 100, 20, ctx);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:23:56.253

```
<canvas id="myCanvas" width="800" height="800" style="border:1px solid #000000;">
</canvas> 
```

即使你像这样设置宽度和高度，它也可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:17:14.610

您必须指定“像素之间”的坐标。例如，如果你从`[0,0]`to画一条线，你会得到比从to`[10,0]`画更宽的线。`[0.5,0.5]``[10.5,0.5]`

# delphi - 动态方法和虚拟方法有什么区别？

> ID：15416733
> 
> 赞同：22
> 
> 时间：2013-03-14T17:56:57.073
> 
> 标签：delphi

动态方法如何提高代码大小？
代码大小是什么意思？？？这意味着program.exe文件大小？？

根据手册：

> 一般来说，虚方法是实现多态行为的最有效方式。当基类声明了许多可覆盖的方法时，动态方法很有用，这些方法由应用程序中的许多后代类继承，但只是偶尔被覆盖。

当只有一个继承的类覆盖该方法时，如果我使用动态而不是虚拟，我将获得什么，因为手册还说：

> 虚拟方法优化速度，而动态方法优化代码大小。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-03-14T19:24:23.800

虚拟方法通过虚拟方法表 (VMT) 实现。每个班级有一个 VMT。VMT 为类中的每个虚拟方法包含一个条目。该条目是该方法的地址。

这允许非常有效的调用。您只需获取位于固定偏移量的 VMT 的地址`Self`。然后通过索引查找方法指针并调用该方法。

这确实意味着，如果您有一个包含大量虚拟方法的类，并且您派生了一个子类，您将创建一个包含所有虚拟方法的全新 VMT。如果您没有覆盖其中的许多，那么您会发现 VMT 有很多重叠。

这在 16 位时代很重要。VMT 可能会占用可执行映像中的大量空间（这就是代码大小的含义），并且您可能会用完 VMT 的空间。因此引入了动态方法。与 VMT 类似的是动态方法表 DMT。这是以不同的方式实现的，以避免在方法未被覆盖时重复。缺点是调用动态方法更昂贵。

在现代，由于 32 位，尤其是 Delphi 生成的非常胖的可执行文件，这些大小问题并不重要。因此，所有合理的建议都是专门使用虚拟方法。

虚拟方法表的实现很好理解，可以找到很多参考资料来理解它们。对于相当古怪的动态方法来说，情况就不是这样了。我发现的最佳信息来源来自 Hallvard Vassbotn 的博客：

*   [http://hallvards.blogspot.co.uk/2007/03/hack15-overriding-message-and-dynamic.html](http://hallvards.blogspot.co.uk/2007/03/hack15-overriding-message-and-dynamic.html)
*   [http://hallvards.blogspot.co.uk/2006/04/dynamic-methods-and-inherited.html?m=1](http://hallvards.blogspot.co.uk/2006/04/dynamic-methods-and-inherited.html?m=1)

# python - 从 json 字符串（Twitter 数据）中删除嵌套的双引号

> ID：15416736
> 
> 赞同：3
> 
> 时间：2013-03-14T17:57:16.403
> 
> 标签：python, json, string, twitter, quotes

我对字符串中的嵌套引号有以下问题：

作为 json 块的一部分，通常有一些字符串本身包含双引号，这是 json 中唯一允许的字符串限制器。我说的是这样的事情（摘录，实际上 json 块还有更多元素）：

```
{"truncated": false,
"source": "u003Ca href="http: //mobile.twitter.com" rel="nofollow"u003EMobile Webu003C/au003E",
"id_str": "177386775671615488",
"geo": null} 
```

我正在尝试在 Python 中解析这个 json 块。显然，由于 "source" 的值中有多余的双引号，json 格式会变得混乱。

不幸的是，这些乱七八糟的字符串是使用输入的，所以我不能只返回源并告诉它给我正确的 json 数据。一些真实的人曾经输入了一个包含双引号的字符串，这个字符串现在在我的 json 数据中显示为一个用双引号分隔的字符串。数据实际上来自 Twitter API，也许有人遇到过类似的问题或经验。我很难想象 Twitter 允许这样做，或者没有适当的机制来防止其 json 被破坏。

**我现在的问题是：**如何删除字符串中多余的双引号，以免我的 json 被破坏？我实际上不需要这些字符串中的数据，我需要 json 块的不同部分。因此，如果有一种聪明的方法可以完全删除它们，那将是完美的。不幸的是，额外的双引号出现在各种不同的地方，所以我不能使用某种“仅删除最外层引号”的机制，也不能删除所有双引号，因为在大多数地方它们是 json 语法的一部分。是否有一种聪明的RE方式来做到这一点？

谢谢你的帮助！

# javascript - 为什么一段 Javascript 仅在我下方有警报时才有效？

> ID：15416737
> 
> 赞同：6
> 
> 时间：2013-03-14T17:57:22.667
> 
> 标签：javascript, jquery

我有以下代码块来跟踪按钮的点击，然后在 mixpanel 中记录分析。

```
<script type="text/javascript">
$('.buy').click(function() {
   var myPart = $('#part-name').text();
   var myDistributor = $(this).closest('tr').children('.distributor').text();
   mixpanel.track("Buy Part Link", {"PartName": myPart, "Distributor": myDistributor});
});
</script> 
```

就其本身而言，MixPanel 中不会跟踪活动。但是，当我`alert ('added');`在 mixpanel 跟踪代码下方添加时，它突然就完美运行了。

为什么？

更新：由于有人问，警报被放置在`mixpanel.track`命令下方。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T18:00:29.797

我将猜测并说可能是因为您正在使用`a`标签并且页面在脚本可以完成工作之前刷新。

解决方案是`event.preventDefault`在您的函数中使用，如下所示：

```
$('.buy').click(function(event) {
    event.preventDefault();
    //the rest of your code
}); 
```

默认情况下，`a`标签通常会导航到新页面（基于`href`属性）。如果`href`设置为 no，那么它通常会重新加载当前页面。这是大多数不了解该`preventDefault`功能的人的常见忽视。但是添加此行会阻止链接在任何地方导航。

正如@Esailija 所说，如果您的 click 函数中的所有代码同步运行，那么它会在页面导航之前完成，这表明它的一部分（最像`.track`调用）正在异步运行 - 可能使用计时器或通过例如，ajax 调用。

通常，当您发现警报会修复代码时，很可能是因为某些事情没有足够的时间来完成。所以总是寻找可以结束脚本的东西，这很可能（在这种情况下）是页面重新加载/刷新。

如果这不是问题，那么我们可能需要查看您的一些 HTML 以进一步提供帮助。

* * *

由于您的评论，您仍然想导航，我做了一个非常快速的谷歌搜索，文档告诉您如何处理链接。[查看此页面](https://mixpanel.com/docs/integration-libraries/javascript#js)并向下滚动到该`mixpanel.track_links`功能。

# php - 通过 magento API 获取父产品 URL

> ID：15416740
> 
> 赞同：0
> 
> 时间：2013-03-14T17:57:31.707
> 
> 标签：php, api, magento, magento-1.7

我想通过 magento API 获取与分组产品（“父”）相关联的简单产品的父 URL。

这就是我在 magento 应用程序中的操作方式：

```
<?php if($_product->getTypeId() == "simple"): ?>
<?php $parentIds = Mage::getModel('catalog/product_type_grouped')->getParentIdsByChild($_product->getId()); ?> 
```

现在我需要对 API 进行这样的调用，因此当我输入简单产品的“sku”时，我可以获取分组的产品 URL（具有关联的简单产品）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:09:24.563

您应该为此创建一个自定义 API。您可以在此处阅读如何创建自定义 API：http: [//www.magentocommerce.com/api/soap/create_your_own_api.html](http://www.magentocommerce.com/api/soap/create_your_own_api.html) 在原生 API 方法中只有一个方法列表 [http://www.magentocommerce.com/api/soap/catalog /catalogProductTypes/productTypes.html](http://www.magentocommerce.com/api/soap/catalog/catalogProductTypes/productTypes.html)

# java - 如何使用 apache commons-exec 运行 java 程序？

> ID：15416750
> 
> 赞同：0
> 
> 时间：2013-03-14T17:57:50.200
> 
> 标签：java, exec, apache-commons-exec

我正在尝试在我的 java 应用程序 GUI 中动态运行 java 代码。我尝试了以下代码：

```
 Sring tempfile="java -classpath "+wrkdir+"/bin "+runfile;
            CommandLine cmdLine = CommandLine.parse(tempfile);
            DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();
            ExecuteWatchdog watchdog = new ExecuteWatchdog(ExecuteWatchdog.INFINITE_TIMEOUT);
            DefaultExecutor executor = new DefaultExecutor();
            executor.setExitValue(1);
            executor.setWatchdog(watchdog);
            try {
                executor.execute(cmdLine, resultHandler);
            } catch (ExecuteException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                resultHandler.waitFor();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

结果是，当我的输入文件（tempfile）由打印语句组成时；那是，

```
public class Sample2 {  
    public static void main(String[] args) {                               
                System.out.println("It Works..!!");  
    }  
} 
```

它能够显示结果。但是如果输入文件是这样的，

```
 import java.io.DataInputStream;
   import java.io.IOException;
   import java.util.*; 
   public class Count 
   { 
     public static void main(String args[]) throws IOException 
     { 
       int n;
       System.out.println("Enter the number: ");
       DataInputStream din=new DataInputStream(System.in);
       String s=din.readLine();
       n=Integer.parseInt(s);
       System.out.println("#"+n);
     } 
  } 
```

结果是 NumberFormatException。这是什么原因？在这种情况下如何通过键盘输入值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:10:50.720

您是否认为输入文件中的 parseInt 实际上可能引发了合法的解析异常？

尝试更改以下行

```
n=Integer.parseInt(s); 
```

至

```
try {
 n=Integer.parseInt(s);
} catch(NumberFormatException e) {
  System.out.println("Unable to parse string into Integer. String: " + s);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T14:43:56.823

构造`DefaultExector()`函数不附加到标准输入，所以你没有得到任何输入，也没有什么可以解析的。要附加到标准输入，请创建一个 ExecuteStreamHandler 并将其添加到您的 DefaultExecutor 中，如下所示：

```
ExecuteStreamHandler streamHandler = new PumpStreamHandler(System.out, System.err, System.in);
DefaultExecutor executor = new DefaultExecutor();
executor.setStreamHandler(streamHandler); 
```

如果您想从其他地方而不是 System.in 读取输入，请将合适的 InputStream 对象传递给 PumpStreamHandler 构造函数。

# java - 每次向 JTextArea 添加文本时，如何阻止 Swing 程序调整组件大小

> ID：15416753
> 
> 赞同：0
> 
> 时间：2013-03-14T17:58:05.027
> 
> 标签：java, swing

我有一个 Swing 应用程序，在框架底部有一个 JTextArea，它跨越整个宽度，当用户出错时，JTextArea 中会显示一条错误消息。尽管发生这种情况时，右侧的两列会变宽，而左侧的两列会变窄。我到处搜索，找不到阻止这种情况发生的方法。请有人能解释一下我解决这个问题的方法吗？我的 GUI 的代码如下所示。

```
public GUI(Event event) {
        super("Checkpoint Manager");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setResizable(false);
        setLocation(165,25);
        listener = new Listener(event, this);

        // Initializes labels and text fields.
        arrivalLabel = new JLabel("Arrival Time:  ");
        depLabel = new JLabel("Departure Time:  ");
        checkLabel = new JLabel("Tick For Exclusion:  ");
        SimpleDateFormat format = new SimpleDateFormat("HH:mm");
        arrival = new JFormattedTextField(format);
        dep = new JFormattedTextField(format);
        check = new JCheckBox();

        // Initializes panel and buttons, also adds ActionListeners to buttons.
        panel = new JPanel();
        panel.setLayout(new GridBagLayout());
        setLayout(new FlowLayout());
        submit = new JButton("Submit");
        cancel = new JButton("Cancel");
        enterMed = new JButton("Enter Medical Checkpoint");
        enterTime = new JButton("Enter Time Checkpoint");
        submit.addActionListener(listener);
        cancel.addActionListener(listener);
        enterMed.addActionListener(listener);
        enterTime.addActionListener(listener);

        // Initializes the messageArea and sets the border for it.
        messageArea = new JTextArea();
        messageArea.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createCompoundBorder
                (BorderFactory.createTitledBorder("Messages"),BorderFactory.createEmptyBorder(5,5,5,5)),messageArea.getBorder()));

        // Initializes the ScrollPane for the timeList and adds the timeList to it. 
        entrantModel = new DefaultListModel();
        entrantList = new JList(entrantModel);
        entrantList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        entrantPane = new JScrollPane(entrantList);
        entrantPane.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createCompoundBorder
        (BorderFactory.createTitledBorder("Entrants"),BorderFactory.createEmptyBorder(5,5,5,5)),entrantPane.getBorder()));
        entrantPane.setMaximumSize(new Dimension(60,300));
        // Initializes the ScrollPane for the timeList and adds the timeList to it. 
        nodeModel = new DefaultListModel();
        nodeList = new JList(nodeModel);
        nodeList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        nodePane = new JScrollPane(nodeList);
        nodePane.setMaximumSize(new Dimension(60, 300));
        nodePane.setBorder(BorderFactory.createCompoundBorder(BorderFactory.createCompoundBorder
        (BorderFactory.createTitledBorder("Nodes"),BorderFactory.createEmptyBorder(5,5,5,5)),nodePane.getBorder()));

        // Structures the components in the frame using GridBagLayout.
        GridBagConstraints c = new GridBagConstraints();
        c.gridx = 0;
        c.gridy = 0;
        c.gridwidth = 2;
        c.ipadx = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(enterTime, c);

        c.gridx = 2;
        c.gridy = 0;
        c.gridwidth = 2;
        c.ipadx = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(enterMed, c);

        c.gridx = 0;
        c.gridy = 1;
        c.gridwidth = 2;
        c.ipady = 100;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(entrantPane, c);

        c.gridx = 2;
        c.gridy = 1;
        c.gridwidth = 2;
        c.ipady = 100;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(nodePane, c);

        c.gridx = 0;
        c.gridy = 2;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(arrivalLabel, c);

        c.gridx = 1;
        c.gridy = 2;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(arrival, c);

        c.gridx = 2;
        c.gridy = 2;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(checkLabel, c);

        c.gridx = 3;
        c.gridy = 2;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(check, c);

        c.gridx = 0;
        c.gridy = 3;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(depLabel, c);

        c.gridx = 1;
        c.gridy = 3;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(dep, c);

        c.gridx = 2;
        c.gridy = 3;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(submit, c);

        c.gridx = 3;
        c.gridy = 3;
        c.gridwidth = 1;
        c.ipadx = 5;
        c.ipady = 5;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(cancel, c);

        c.gridx = 0;
        c.gridy = 4;
        c.gridwidth = 4;
        c.ipadx = 20;
        c.ipady = 30;
        c.insets = new Insets(10,10,10,10);
        c.fill = GridBagConstraints.HORIZONTAL;
        panel.add(messageArea, c);

        //Adds the panel to the frame and sets the components to fit according to the size of the frame. 
        add(panel, c);

        pack(); 
        setVisible(true);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:46:46.020

`JScrollPane`如果您不希望`JTextArea`每次添加文本时都扩大大小，则可以使用A ：

```
JScrollPane scrollPane = new JScrollPane(messageArea);
scrollPane.setBorder(...);
panel.add(scrollPane, c); 
```

# java - 如何找到继承给定接口的类实例？

> ID：15416755
> 
> 赞同：2
> 
> 时间：2013-03-14T17:58:10.227
> 
> 标签：java, netbeans, interface, jvm, lookup

我正在寻找一种方法来查找当前在JVM中运行的继承给定接口的所有实例，比如interfaceA。我最初收到的建议是使用

```
Lookup.getDefault().lookupAll(interfaceA.class); 
```

和

```
@ServiceProvider(service=interfaceA.class) 
```

在定义实现 interfaceA 的类之前。我发现这确实找到了实现 interfaceA 的类。但是，我很确定 Lookup 使用 java 反射为我提供了该类的新实例。我最大的问题是我可以在我的 Netbeans 项目中引入哪些库受到限制，否则之前的问题会回答这个问题。

这种动物是否存在于纯 Java 或非常知名的库中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:06:00.977

不。因为java在需要时动态加载类，所以你不能真正“枚举”JVM可用的所有类。用于执行此操作的大多数机制涉及预先在路径上的某个位置（xml 文件、属性文件）列出所有子类并使用它，或者将它们标记为由某个容器进行某种运行时处理（您的 @ServiceProvider 注释） . Java EE、Spring 和 guice 是一些众所周知的容器——但这样的代码在这样的容器之外无法工作。

我还看到了尝试遍历类路径上的所有 jar 的代码，但是这样的代码非常脆弱，并且通常与它运行的特定环境相关联。

# solr - 如何使用 Solr 跨多个核心删除 1 个调用的文档？

> ID：15416760
> 
> 赞同：2
> 
> 时间：2013-03-14T17:58:19.070
> 
> 标签：solr

我正在使用 6 个内核，它们构成了我的索引的全部（800 万个文档，分布在 6 个内核上）。如果我想删除一个文档（例如，deleteById 或 deleteByQuery），似乎我必须进行 6 次删除调用，因为我永远不知道特定文档在哪个核心。这是正确的吗？

当我搜索时，我可以给搜索一个“shards”参数，Solr 将搜索所有内核。删除时，这似乎不是真的。

有没有办法通过跨多个核心的一次调用来删除文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:39:22.193

看起来您可以启用分片[DocTransformer](http://wiki.apache.org/solr/DocTransformers#A.5Bshard.5D)以返回在查询期间找到文档的分片。通过利用这一点，您可以查询要删除的文档，从结果中获取分片 ID（或您的情况下的核心）并将删除命令发送到适当的核心。当然，这将是一开始的额外查询，但您只需要为每个文档发出一个删除请求，而不是为每个核心发出一个删除请求。

文档在设置时有点多余，所以我做了一些挖掘，我认为应该将以下内容添加到您的 solrconfig.xml 文件中以启用此功能：

```
 <transformer name="shard" 
         class="org.apache.solr.response.transform.ShardAugmenterFactory"/> 
```

[通过查看ShardAugmenterFactory](http://svn.apache.org/viewvc/lucene/dev/branches/lucene_solr_4_2/solr/core/src/java/org/apache/solr/response/transform/ShardAugmenterFactory.java?view=markup)的源，它将检测请求中是否正在使用分片并在响应中启用分片输出。

# asp.net-mvc - MVC：控制器或库

> ID：15416762
> 
> 赞同：0
> 
> 时间：2013-03-14T17:58:24.450
> 
> 标签：asp.net-mvc

我对 MVC 很陌生，我想澄清一下控制器的功能。

想象一下这个原始示例：

我有**2 个模型**和**1 个控制器**，它们从两个模型中获取数据，我必须对这两个数据包进行非常复杂的计算。（然后将结果提供给视图。）

我的问题是：

我应该将这个复杂**的计算放入控制器**中，**还是**应该将其**放入库中**？更一般的形式：

我是否可以在控制器内进行计算，或者这是一种不好的做法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:00:33.487

控制器是放置这种逻辑的容易的地方，并且很容易变得混乱。关注点分离将使您走上实现[服务层](https://stackoverflow.com/questions/5702391/mvcs-model-view-controller-service)的道路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:01:31.037

`Controllers`应该尽可能轻，并且几乎没有依赖关系。`Model`尽管您可能希望将其放在自己的库中，但您应该像这样处理业务逻辑。如果您确实将它放在不同的库中，请从`model`.

# php - 有没有办法让 PHPUnit 的对象在创建时返回 NULL？

> ID：15416763
> 
> 赞同：0
> 
> 时间：2013-03-14T17:58:27.210
> 
> 标签：php, interface, phpunit

我正在尝试为 PHPUnit 创建一个测试，但是 - 在我们正在测试的类中，有一种情况是传递的对象被检查为`NULL`.

我已经像这样创建了对象（实际上是一个接口）：

```
class SomeTestClass extends PHPUnit_Framework_Testcase {

    protected $storage;

    public function setUp() {
      $this->storage = $this->getMockBuilder('Some\Namespace\TestedInterface')->getMock();
    }

    public function testStorage() {

      /* here is where I need to pass over $this->storage to testFunc() and assert it is null */ 

      $testingClass = new TestingClass();
      $testingClass->testFunc( $this->storage );

    }
  } 
```

所以 - 我需要做的是创建一个模拟接口的对象，它的“返回”值是`null`在`testFunc()`函数中检查它的时候。

我怎么做？我们的`TestingClass`类需要一个实现接口的对象。

谢谢。

# ocean - 运行单元测试后未处理的 Petrel 异常

> ID：15416771
> 
> 赞同：1
> 
> 时间：2013-03-14T17:58:51.167
> 
> 标签：ocean, petrel

我有使用 nunit 成功运行的 Petrel 2012 单元测试。我添加了一些新的单元测试。这些测试使用我注册的一些自定义域对象。我还在使用不同的 Petrel 项目进行测试。

运行 Nunit 时，它会运行我的测试并且它们是成功的，但是，在 nunit 报告结果后，nunit 崩溃：

> Petrel 2012.1 64 位（CL 345168，2012 年 7 月 27 日构建）中的未处理异常：可能的原因：可能的单例问题：托管代码在 CLR 关闭后尝试执行。异常类型：
> 0xC0020001：字符串绑定无效。异常详细信息：异常发生在模块 KERNEL32.dll 中的偏移量 0xDD50 异常处理程序：Petrel 未处理的异常过滤器（本机初始化）异常线程：未命名线程（id 3908）报告编号：0 报告 ID：
> {8c53496a-ff6e-46e0-b536-a85868246cef本机堆栈跟踪：
> KERNEL32.dll+0xDD50 PulseEvent+0x60 clr.dll+0x45A454
> clr.dll+0x5B46D3 clr.dll+0x189C1A Core.Subjects.dll+0xF7138 BaseAllSubjectsItr::init+0x58 Core.Subjects.dll+0xF7351 BaseAllSubjectsItr: :BaseAllSubjectsItr+0x31
> Core.Subjects.dll+0x4E919 NotificationManagerImpl::notifyBeforeRemove+0x59
> Core.Subjects.dll+0xE034E FolderSubject::removeKidAt+
> 0x9E Core.Subjects.dll+0xDFED1 FolderSubject::removeAllKids+0x31
> Core.Subjects.dll+0xCA307 ParentSubject::cleanup +0x17
> Foundation.Primitives.BaseClasses.dll+0xB434 MemorySaver::MemorySaver+0x224
> Foundation.Primitives.BaseClasses.dll+0x2777C Shared::unref+0x1C
> Foundation.Primitives.BaseClasses.dll+0x18EE Shared::unref+0xE
> Sim.Domain .Analysis.dll+0x1F5CCE FunctionPlotCmd::~FunctionPlotCmd+0x3E
> Sim.Domain.Analysis.dll+0x783F7
> Foundation.Primitives.BaseClasses.dll+0xB463 MemorySaver::MemorySaver+0x253
> Foundation.Primitives.BaseClasses.dll+0x2777C Shared::unref+0x1C
> Foundation.Primitives.BaseClasses.dll+0x18EE Shared::unref+0xE
> Core.Subjects.dll+0xE169 UpdateHint::operator=+0x2C9
> Core.Subjects.dll+ 0x12CDC4 Core.Subjects.dll+0x4979F Slb::Petrel::Configuration::ServiceBase::create+0x42F Core.Subjects.dll+0x499E9 Slb::Petrel::Configuration::ServiceBase::create+0x679 ntdll.dll+0x149BF RtlGetCurrentDirectory_U+0x1FF
> KERNEL32.dll+0x1A35C ExitProcess+0x2C mscoreei.dll+0x18552
> mscoreei.dll+0x183E4 clr.dll+0x238787 clr.dll+0x23980C
> clr.dll+0x171966 clr.dll+0x16F5611385clr.dll+0x .dll+0x3309 CoreExeMain+0x49
> mscoree.dll+0x5B21 CorExeMain+0x69 KERNEL32.dll+0x196AC BaseProcessStart+0x2C 托管堆栈跟踪：无法收集托管堆栈跟踪。
> 
> 继续调用 Windows 错误报告...

我还尝试使用在此错误之前使用的 Petrel 项目，但现在我得到了相同的异常。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T14:29:47.977

重新启动构建服务器解决了这个问题。

# c - C编程：分配给数组的循环函数

> ID：15416775
> 
> 赞同：0
> 
> 时间：2013-03-14T17:59:06.643
> 
> 标签：c, arrays, function, loops

我在 C 中有以下函数，它以整数作为输入（例如，数字 1000），将数字拆分为单个数字（在这种情况下为 1、0、0、0）并将每个数字分配给一个称为数字的数组：

```
int splitnumber(int x)
{
    temp=x;

    while(temp)
    {
        temp=temp/10;
        factor = factor*10;
    }

    while (factor>1)
    {
        factor = factor / 10;
        digits[i]= x/factor;
        x = x % factor;
       i = i + 1;
    }
} 
```

这第一次效果很好，但如果我在循环中使用它，似乎数字数组每次都没有改变，它仍然保持与第一次相同的值。当我只是简单地尝试使用新号码再次使用该功能时也是如此，它仍然挂在第一次尝试的结果上。这是我试图在其中使用它的循环：

```
do
{
    splitnumber(number);

    lowhigh = sort_lowtohigh(digits);
    highlow = sort_hightolow(digits);

    printf ("\n\nLoop number is:%d\n", number);
    printf ("High to Low is: %d\n", highlow);

    printf ("Low to high is: %d", lowhigh);

    printf("\n");

    printf ("Subtraction is: %d", subtraction(highlow, lowhigh));

    number++;
} while (number <= 1020); 
```

如您所见，我还使用了其他几个使用数字数组的函数。这些函数似乎工作正常，但在第二次循环中没有产生正确的结果，因为数字数组没有改变。这是输出：

```
循环数为：1001
从高到低是：1100
从低到高是：11
减法为：1089

循环数为：1002
从高到低是：1100
从低到高是：11
减法为：1089

循环数为：1003
从高到低是：1100
从低到高是：11
减法为：1089

```

循环正在增加数字计数器，但再次，数字数组没有被更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:15:37.227

我在您的代码中看到了一些问题（可能导致所描述的行为）：

在您的函数“splitnumber(int x)”中：

*   你没有局部变量（temp，i，factor）
*   "i" 永远不会被初始化！
*   没有返回值

我相信，变量 i （可能全局声明）会导致您的问题。每次你调用“splitnumber”时，我都会增加。在第一次调用 splitnumber 期间，i 可能是 0，并且会在调用期间增长到 3。这将影响前 4 个数字条目（可能再次全局声明为 int[4]）。当您第二次调用 splitnumber 时，i 仍然是 4。所以这次您更改了 digit[4 5 6 和 7] 的值。

如果我的猜测是正确的，那么您很幸运您的程序不会因分段错误而崩溃。您正在尝试访问您从未分配过的内存（所有带有 digit[i]; i > 3 的内容）。

只需添加一个

```
i = 0; 
```

在 splitnumber 的开头将解决您的问题。在函数中使用局部变量可能会解决更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:18:13.617

由于`i`未初始化为`0`in `splitnumber`，因此您只会将每个元素设置`digits`一次...后续调用将超出数组的范围。

# .net - pwdLastSet 显示在一台服务器 A 上，但不在服务器 B 上，即使它在那里

> ID：15416777
> 
> 赞同：1
> 
> 时间：2013-03-14T17:59:12.970
> 
> 标签：.net, active-directory

pwdLastSet 没有在服务器 B 下面的代码中返回。在服务器 B 上，用户是由“Crowd”创建的，我猜是通过 LDAP。当我在 AD Manger 中检查用户时，我可以看到该字段，但是当我尝试通过代码在服务器 B 上获取 pwdLastSet 时，它不起作用。然而，这一切都在我通过 AD 创建用户的服务器 A 上运行。

我还通过 UserPrincipal 对象尝试了“LastPasswordSet”。

```
private static DateTime DateTest(string userName)
   {
       userName = userName.Trim();
       DateTime hacked;
       using (DirectorySearcher ds = new DirectorySearcher())
       {
           ds.SearchScope = SearchScope.Subtree;
           ds.PropertiesToLoad.Add("distinguishedName");
           ds.PropertiesToLoad.Add("pwdLastSet");
           ds.PageSize = 1;
           ds.ServerPageTimeLimit = TimeSpan.FromSeconds(2);
           ds.Filter = string.Format("(&(objectCategory=user)(sAMAccountName={0}))", userName);

           SearchResult sr = ds.FindOne();
           //hacked = DateTime.FromFileTime((long)sr.Properties["pwdLastSet"][0]);

            IDictionaryEnumerator e = sr.Properties.GetEnumerator();
           while (e.MoveNext())
           {
               //if (typeof(ResultPropertyCollection) == e.Key.GetType())
               //{
               //    foreach (var item in (ResultPropertyCollection)e.Key)
               //    {
               //        Console.WriteLine(e);
               //    }

               //}
               Console.Write(e.Key);
               Console.Write(" : ");

               foreach (var item in (ResultPropertyValueCollection)e.Value)
               {
                   Console.WriteLine(item);
               }
           }
       }

       return DateTime.Now;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T13:46:37.340

尽管我的登录名具有企业/域管理员组成员身份，但在我执行它时仍然无法正常工作。

但是，当我右键单击控制台应用程序并以管理员身份运行它时，它就像一个魅力。加尔！

# algorithm - 递归关系的运行时间

> ID：15416779
> 
> 赞同：1
> 
> 时间：2013-03-14T17:59:22.230
> 
> 标签：algorithm, complexity-theory, relation, recurrence, master-theorem

刚刚在测验中得到了这个：T(n) = 4T(sqrt(n)) + 5

我使用替换简化它并得到 F(k) = 4F(k/2) + 5

使用主定理，我猜它是 O(logn)。这是准确的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:37:39.410

定义

```
F(n) = T(2^n) 
```

然后我们有

```
F(n) = 4F(n/2) + 5 
```

根据主定理，我们有

```
a = 4
b = 2
f(n) = 5 = O(1) = O(m^0), so c = 0
0 < 2 = log_2(4) 
```

所以我们是主定理的案例1。通过案例 1，我们有

```
F(n) = Theta(n^2) 
```

所以

```
T(2^n) = Theta(n^2) 
```

所以

```
T(n) = Theta(log(n^2)) = Theta(2logn) = Theta(log n) 
```

所以是的，你的答案似乎是正确的。

# c++ - 输出的GiNaC顺序

> ID：15416782
> 
> 赞同：1
> 
> 时间：2013-03-14T17:59:24.857
> 
> 标签：c++, ginac

我正在构建一个用 C++ 编写的应用程序，其中大量涉及代数。我决定将 GiNaC 用于计算机代数系统 (CAS) 它运行良好；但是有一个小问题。元素的顺序不是我希望它们在输出中的顺序。让我举个例子。这是我的 C++ 代码：

```
#include <iostream>
#include <ginac/ginac.h>

int main()
{
    using namespace GiNaC;
    symbol x("x");
    ex poly((x^2)+3*x+5);

    std::cout << poly;
} 
```

该程序的输出是：

```
5+x^2+3*x 
```

好吧，我检测到这不是恒定的，输出也可以是：

```
5+3*x+x^2 
```

虽然，两者在数学上都是正确的，但我想要的形式（或者我需要的 :-) 都不是。我希望多项式以最大程度开始，即我的输出应该是：

```
x^2+3*x+5 
```

当我们添加有符号数、括号或更复杂的代数表达式时，这个问题会更加严重（它有时甚至会写成 (-3+a)x，看起来很丑 :-)`std::cout<<GiNaC::latex` 并不能解决问题。在我看来，最烦人的部分是输出的不稳定行为。
在 GiNaC 中是否可能发生类似的事情。我也不想有一个非常混乱的代码（因为 C++0x`<regex>`库可以很容易地做到这一点，但我宁愿不涉及正则表达式，我的代码已经足够复杂了）
我在 Ubuntu Quantal Quetzal 下使用 GCC 4.7.2 . 谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T20:18:36.180

您所指的行为记录[在这里](http://www.ginac.de/tutorial/Polynomial-arithmetic.html#Polynomial-arithmetic)，它似乎不是处理这种情况的任何内置功能。

根据[这个](http://www.ginac.de/pipermail/ginac-list/2010-April/001598.html)你需要自己实现这个。下面是一个简短的示例代码，说明如何做到这一点。

```
#include <iostream>
#include <vector>
#include <algorithm>
#include <ginac/ginac.h>

int main()
{
    using namespace GiNaC;
    symbol x("x");
    ex poly(-3*x-5+power(x,2));

    std::vector<ex> terms(poly.begin(), poly.end());
    std::sort(std::begin(terms), std::end(terms), 
        [x](const ex& lhs, const ex& rhs) { return lhs.degree(x)>rhs.degree(x); });

    bool first{ true };
    for(auto term : terms) {
        if( first ) first = false;
        else if( term.coeff(term)>0) std::cout << '+' ;

        std::cout << term;
    }

    std::cout << std::endl;
} 
```

# ios - 自定义 UINavigationBar

> ID：15416785
> 
> 赞同：0
> 
> 时间：2013-03-14T17:59:30.783
> 
> 标签：ios, ios6, uinavigationbar

*免责声明：*我可能问错了人，因为我只是这种情况下的设计师，并且对 iOS 开发非常了解杰克。

*免责声明：*然而，我是一名熟练的 PHP 和 JS 程序员，所以我并没有完全失去开发的艺术/意识。

现在，我们尝试重现的设计需要标题栏。目前它是一个 UINavigationBar。但是，该元素显然不允许进行足够的自定义。

*   该条的高度应为 110 像素（Retina）。
*   它不应有光泽、边框或可见背景；整个屏幕应该有相同的静止不动的背景（图像）。
*   当它下面的内容被滚动时，该栏应该只有一个阴影（这也是一个图像，任何内部阴影效果都不够）。换句话说，投影图像是“某些内容在此处”的指示符。如果我没记错的话，Android 用户对这种行为很熟悉。

我在这里附上了设计模型的一部分；

![展示酒吧行为的设计模型](../Images/84ea1c5258e867c66249a887503fea25.png)

实现这种效果的阻力最小的路径是什么（如果可能，使用本机 UINavigationBar，但如果没有，则无需出汗）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:29:09.163

实现这一点的最简单方法是添加一个类，该类继承`UINavigationBar`并实现`drawRect`在上下文中绘制带有阴影的导航栏图像的方法。

```
@interface MynavBar:UINavigationBar
@end

@implementation MynavBar

- (void)drawRect:(CGRect)rect
{
 UIImage *navBarImg=[UIImage imageNamed:@"navBar.png"];
[navBarImg drawRect:rect];
[super drawRect:rect];
}
@end 
```

使用此类作为 IB 中导航栏的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:55:57.017

好吧，在你的情况下，我认为不可能使用`UINavigationBar`. 因为，默认`navigationBar`高度是只读的，所以您不能以编程方式更改它。有一次，我尝试制作更大的导航栏，但它并没有真正起作用，因为如果需要，您无法控制默认的后退按钮位置。如果您不需要导航栏，我认为您应该使用带有背景图像的自定义视图，这样您就可以随意设置它的框架。

# elasticsearch - 扫描/滚动弹性搜索索引时是否有可预测的顺序？

> ID：15416786
> 
> 赞同：4
> 
> 时间：2013-03-14T17:59:32.803
> 
> 标签：elasticsearch, scroll, database-scan

扫描 ElasticSearch 索引时，无法根据[文档](http://www.elasticsearch.org/guide/reference/api/search/search-type.html)应用任何排序。但是在这个过程中，结果的顺序是否有任何定义？如果是，是否可以预测？

背景资料：

我需要定期对 5M 文档进行操作，每批 1.000 文档需要大约 1 分钟的时间来处理。由于我无法确保每次运行时都会完成该过程，因此我很乐意让它在上次中断的地方继续工作，例如，如果滚动结果是按排序的`ID`（我知道，它是不是），我会跟踪`ID`我的代码中最后处理的内容，并且在下次运行时不再使用 处理任何文档`ID <= lastProcessedId`，以确保每个文档都得到定期处理。

顺便说一句：“处理文档”并不是指将其他信息写回索引，而是更新我数据库中的其他一些内容。在我的情况下，将时间戳写入索引文档无济于事，因为该过程被中断的原因之一可能是索引被替换为新索引（从头开始重建）。将处理后的时间戳写入数据库对我来说也不是一个理想的选择，因为迭代性能是我首先使用索引滚动的原因......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T10:47:56.167

不，排序顺序是不可预测的。我打算建议使用时间戳，但后来我读了你的其余问题:)

确实，使扫描搜索“可恢复”的唯一方法是将您的文档在某个字段（例如时间戳或 ID）上划分为多个部分，并使用范围查询一次滚动浏览一个部分。

# ios - 渲染到纹理：总是黑色纹理

> ID：15416791
> 
> 赞同：0
> 
> 时间：2013-03-14T17:59:50.977
> 
> 标签：ios, opengl-es

我正在尝试渲染到纹理并随后使用纹理，但由于某种原因它不起作用。

如 Apple[文档](http://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html)中所述，

首先，我分配 fbo 以渲染到纹理..

```
glGenFramebuffers(1, &read_framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, read_framebuffer); 
```

然后我创建纹理并将其附加到该 fbo ..

```
glActiveTexture(GL_TEXTURE0);
glGenTextures(1, &texture);
glBindTexture(GL_TEXTURE_2D, texture);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);
glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE );
glTexParameterf( GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE );
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8_OES, 64, 64, 0, GL_RGBA,
             GL_UNSIGNED_BYTE, NULL);
glBindRenderbuffer(GL_RENDERBUFFER, 0);
glBindTexture(GL_TEXTURE_2D, 0);
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D,
                       texture, 0); 
```

然后创建用于绘图的fbo..

```
glGenFramebuffers(1, &draw_framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, draw_framebuffer);
glGenRenderbuffers(1, &_colorRenderBuffer);
glBindRenderbuffer(GL_RENDERBUFFER, _colorRenderBuffer);
[_context renderbufferStorage:GL_RENDERBUFFER fromDrawable:_eaglLayer];
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _colorRenderBuffer); 
```

稍后在渲染循环部分..

```
glBindFramebuffer(GL_FRAMEBUFFER, read_framebuffer);

(...off-screen drawing the scene here...)

glBindFramebuffer(GL_FRAMEBUFFER, draw_framebuffer); 
```

绑定应该包含我的屏幕外渲染图像的纹理..

```
glBindTexture(GL_TEXTURE_2D, texture);

(..draw the scene with texture applied here...) 
```

但是，由于某种原因，纹理总是黑色的。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T09:22:00.807

在`glTexImage2D`交换. `GL_RGBA8_OES`_ `GL_RGBA`我可以看到您从苹果文档中获取了这些参数..（没有评论..）无论如何，正如@prideout 指出的那样，关于您的问题的评论，您应该始终检查帧缓冲区状态。在你的情况下，它返回了`GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT`。

# ios - 如何从 ios 应用程序连接到 SQL Server 数据库？

> ID：15416793
> 
> 赞同：1
> 
> 时间：2013-03-14T17:59:58.857
> 
> 标签：ios, xcode

我是 iOS 开发世界的新手，所以请多多包涵。

我有一个具有 SQL Server 2008 数据库的 Web 应用程序。我正计划开发一个 iPad 应用程序，它基本上是 Web 应用程序的平板电脑版本，主要要求是访问相同的 SQL Server 数据库来访问数据。我不知道如何开始。是否有任何类似于 ADO.NET for xcode 的 SQL Server 连接库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:02:02.777

据我所知，没有办法做到这一点。我认为您应该创建一个 API 来处理数据库，并使用它来操作数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:07:55.297

那么您可以将数据库移动到 Microsoft Azure SQL 数据库并使用 Microsoft 提供的 iOS 移动工具包连接到它。

# c++ - 如何调整 Levenshtein 距离算法以将匹配限制为单个单词？

> ID：15416798
> 
> 赞同：11
> 
> 时间：2013-03-14T18:00:11.233
> 
> 标签：c++, algorithm, stdstring, levenshtein-distance, heuristics

我在 C++ 中使用 Levenshtein 距离算法来比较两个字符串以测量它们彼此之间的接近程度。但是，普通的 Levenshtein 距离算法不区分由空格分隔的单词边界。这导致距离计算比我想要的要小。我正在比较标题以查看它们彼此之间的接近程度，并且我希望算法不会将来自多个单词的字符计为匹配。

例如，如果我比较这两个字符串，我会得到以下结果，`+`指定一个匹配项并`-`指定一个不匹配项：

```
Al Chertoff Et
Al Church Department of finance Et
+++++------+--++-----++-+------+++
Al Ch      e  rt     of f       Et 
```

我得到一个与`"Chertoff"`四个单词匹配的单词的距离为 20，`"Church Department of finance"`而我真的希望它们被认为彼此之间的距离更远，因为不允许字符与多个单词匹配，并且与单词的距离为 25`"Chertoff"`最匹配一个单词`"Department"`，三个字符匹配：

```
Al Chertoff Et
Al Church Department of finance Et
+++--------+--++---------------+++
Al         e  rt                Et
         Ch     off 
```

我如何调整 Levenshtein 距离来完成此任务，或者是否有另一种更适合此的距离算法？也许在每个单词上单独使用 Levenshtein 距离并选择距离最小的单词？但是，如果在字符串深处匹配一个单词会导致后续单词匹配不佳，因为它们的匹配最好在字符串的较早位置？这可以通过将 Levenshtein 距离调整为单词级别来以某种方式完成吗？

例如，对于以下更复杂的示例，此想法的最短距离是 20：

```
Al Chertoff Deport Et
Al Church Department of finance Et
+++++----++++-++---------------+++
Al Ch     Dep rt                Et
     ertoff  o 
```

而不是最大化`"Chertoff"`的匹配并获得 24 的更长距离：

```
Al Chertoff Deport Et
Al Church Department of finance Et
+++--------+--++-----+---------+++
Al         e  rt     o          Et
         Ch     off
                  Dep rt 
```

我目前对 Levenshtein 距离的实现如下：

```
size_t
levenshtein_distance(const std::string& a_compare1,
                     const std::string& a_compare2) {
  const size_t length1 = a_compare1.size();
  const size_t length2 = a_compare2.size();
  std::vector<size_t> curr_col(length2 + 1);
  std::vector<size_t> prev_col(length2 + 1);

  // Prime the previous column for use in the following loop:
  for (size_t idx2 = 0; idx2 < length2 + 1; ++idx2) {
    prev_col[idx2] = idx2;
  }

  for (size_t idx1 = 0; idx1 < length1; ++idx1) {
    curr_col[0] = idx1 + 1;

    for (size_t idx2 = 0; idx2 < length2; ++idx2) {
      const size_t compare = a_compare1[idx1] == a_compare2[idx2] ? 0 : 1;

      curr_col[idx2 + 1] = std::min(std::min(curr_col[idx2] + 1,
                                             prev_col[idx2 + 1] + 1),
                                    prev_col[idx2] + compare);
    }

    curr_col.swap(prev_col);
  }

  return prev_col[length2];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T22:01:42.150

`levenshtein_distance`通过在序列容器上创建一个通用算法并包含一个计算两个元素之间距离的成本函数，我可以非常接近你想要的：

```
template<typename T, typename C>
size_t
seq_distance(const T& seq1, const T& seq2, const C& cost,
             const typename T::value_type& empty = typename T::value_type()) {
  const size_t size1 = seq1.size();
  const size_t size2 = seq2.size();

  std::vector<size_t> curr_col(size2 + 1);
  std::vector<size_t> prev_col(size2 + 1);

  // Prime the previous column for use in the following loop:
  prev_col[0] = 0;
  for (size_t idx2 = 0; idx2 < size2; ++idx2) {
    prev_col[idx2 + 1] = prev_col[idx2] + cost(empty, seq2[idx2]);
  }

  for (size_t idx1 = 0; idx1 < size1; ++idx1) {
    curr_col[0] = curr_col[0] + cost(seq1[idx1], empty);

    for (size_t idx2 = 0; idx2 < size2; ++idx2) {
      curr_col[idx2 + 1] = std::min(std::min(
        curr_col[idx2] + cost(empty, seq2[idx2]),
        prev_col[idx2 + 1] + cost(seq1[idx1], empty)),
        prev_col[idx2] + cost(seq1[idx1], seq2[idx2]));
    }

    curr_col.swap(prev_col);
    curr_col[0] = prev_col[0];
  }

  return prev_col[size2];
} 
```

鉴于上述`seq_distance`情况，两个句子之间的编辑距离使得无法在单词边界之间进行编辑，可以用以下方式定义：

```
size_t
letter_distance(char letter1, char letter2) {
  return letter1 != letter2 ? 1 : 0;
}

size_t
word_distance(const std::string& word1, const std::string& word2) {
  return seq_distance(word1, word2, &letter_distance);
}

size_t
sentence_distance(const std::string& sentence1, const std::string& sentence2) {
  std::vector<std::string> words1;
  std::vector<std::string> words2;
  std::istringstream iss1(sentence1);
  std::istringstream iss2(sentence2);
  std::copy(std::istream_iterator<std::string>(iss1),
            std::istream_iterator<std::string>(),
            std::back_inserter(words1));
  std::copy(std::istream_iterator<std::string>(iss2),
            std::istream_iterator<std::string>(),
            std::back_inserter(words2));
  return seq_distance(words1, words2, &word_distance);
} 
```

这是在[ideone](http://ideone.com/93IhH2)上工作的代码。我已经测试了几个案例，我很确定它做了正确的事情，但你应该多尝试一下，以确保结果是合理的。

请注意，这并不是您所要求的，因为它忽略了编辑距离测量中的所有空格：我认为修改它不这样做应该不会太难，但我还没有完全考虑过。无论如何，这可能一样好（甚至更好），具体取决于您的需要，所以我会让您决定是否要尝试调整它。

只是一个小提示，您的原始代码在以下两行中略有错误：

```
curr_col.reserve(length2 + 1);
prev_col.reserve(length2 + 1); 
```

在向量中保留容量，但实际上并没有更改它们的大小，因此在此之后访问数组是未定义的行为。`resize`如果您要访问某个范围内的元素，您实际上应该使用向量：`reserve`通常用于您将要`push_back`一个接一个地访问一定数量的元素的情况（这会随着您的移动而增加大小，而不是一次全部增加）并且您希望避免多次内部重新分配的成本（因为每次超出容量时，内部容量只会增加一定的系数）。

**编辑：**

[此版本](http://ideone.com/RzpNic)将单词之间的空格作为编辑距离的一部分考虑在内，但由于在某些情况下需要添加多个空格，因此结果仍与您的示例不完全相同。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-03-14T19:06:37.343

如果单个单词的长度不同，则将跨越单词边界。如果您想保持在各个单词中比较的索引，那么您需要使单词的长度相同。例如，这里有一个 Javascript（是的，我知道你问的是 C++，但这是为了说明 - 代码取自维基百科）距离计算例程：

```
var memo = {};

function d(str1, i, len1, str2, j, len2){
    var key = [i,len1,j,len2].join(',');
    if(memo[key] != undefined) return memo[key];

    if(len1 == 0) return len2;
    if(len2 == 0) return len1;
    var cost = 0;
    if(str1[i] != str2[j]) cost = 1;

    var dist = Math.min(
        d(str1, i+1,len1-1, str2,j,len2)+1, 
        d(str1,i,len1,str2,j+1,len2-1)+1,
        d(str1,i+1,len1-1,str2,j+1,len2-1)+cost);
    memo[key] = dist;
    return dist;
}

var str1 = "Al Chertoff Deport$$$$ $$ $$$$$$$ Et";
var str2 = "Al Church$$ Department of finance Et";

console.log(d(str1, 0, str1.length, str2, 0, str2.length)); 
```

请注意我是如何修改两个输入字符串以匹配单个单词级别的。运行这个我得到了 19 的距离。同样，如果我将字符串更改为：

```
var str1 = "Al Chertoff $$$$$$$$$$ $$ $$$$$$$ Et";
var str2 = "Al Church$$ Department of finance Et"; 
```

我得到24的距离。

# java-me - lcdui v/s lwuit

> ID：15416799
> 
> 赞同：0
> 
> 时间：2013-03-14T18:00:13.030
> 
> 标签：java-me, lwuit, lcdui, j2mepolish, cldc

我想为应用程序创建 j2me 屏幕。我是 j2me 和 wnat 的新手，不知道我应该选择 lcdui 还是 lwuit。我读到 lwuit 仅在 CLDC 1.1 手机中受支持。我想知道 CLDC 1.0 手机的列表。从我对 lcdui 编码所做的工作来看，我认为有很多限制。限制之一是文本框和列表不能一起放在表单中。我将需要可以在其中放置文本框和列表的屏幕。

任何 j2me 专业人士，请就我应该选择 lcdui 还是 lwuit 提出五个建议。以及您在每种方法中面临的实际困难。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T06:53:09.630

我建议你使用 LWUIT。因为您可以使用 LWUIT 创建具有良好 UI 的应用程序。您可以通过将 .RES 主题用于应用程序设计来显着减小 JAR 文件的大小。

据我了解，您想在表单仪式中放置一个文本框和列表吗？在 LWUIT 中很有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T11:04:14.633

您也可以轻松地将 LWUIT 与 CLDC 1.0 设备一起使用。还有很多 CLDC 1.0 设备，您可以搜索每个制造商，并且构建将自动与 CLDC 1.1 一起工作。LWUIT 也没有限制只能与 CLDC 1.1 一起使用。我会说，在 lwiit 中，UI 调整也更容易一些。

# actionscript-3 - AS3：拖动选择TileList中的多个图块

> ID：15416806
> 
> 赞同：0
> 
> 时间：2013-03-14T18:00:33.403
> 
> 标签：actionscript-3, tilelist

我和我的两个同学一起做一个项目，我们希望能够将光标拖到一个瓷砖列表上以选择多个瓷砖。我们真的找不到任何功能来做到这一点，是否有可能做到这一点？

最好的祝福

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:12:31.893

这应该让您了解要完成的工作：

```
tileList = new TileList();
tileList.allowMultipleSelection = true;
tileList.addEventListener(MouseEvent.MOUSE_DOWN, startSelecting);
tileList.addEventListener(MouseEvent.MOUSE_UP, stopSelecting);

function startSelecting(e:MouseEvent):void 
{
    tileList.addEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);
    if (CellRenderer(e.target))
    {
        CellRenderer(e.target).selected = true;
    }
}

function onMouseMove(e:MouseEvent):void 
{
    if (CellRenderer(e.target))
    {
        CellRenderer(e.target).selected = true;
    }
}

function stopSelecting(e:MouseEvent):void 
{
    tileList.removeEventListener(MouseEvent.MOUSE_MOVE, onMouseMove);
} 
```

您肯定会希望对其进行自定义以满足您的需要，但基本上它会在磁贴列表中添加一些鼠标事件侦听器，并选择在按下鼠标按钮时已滚动的任何磁贴。

# asp.net - 文本框中的 HTML 错误

> ID：15416807
> 
> 赞同：1
> 
> 时间：2013-03-14T18:00:35.567
> 
> 标签：asp.net, html, textbox

我试图在我的 asp 文本框中允许 HTML，但是当我点击按钮时，它会返回此错误：

> 未捕获的 Sys.WebForms.PageRequestManagerServerErrorException：Sys.WebForms.PageRequestManagerServerErrorException：处理服务器上的请求时发生未知错误。从服务器返回的状态码是：404。”

我`Server.HtmlEncode`用来在文本框中对 HTML 进行编码但仍然没有结果的服务器端之一。我尝试使用断点 , `AutoEventWireup="false"`，`ValidateRequest="false"`并在 web.config 中将页面验证设置为 false。我也尝试`ValidateRequest="false"`在页面上使用它自己。它也返回这个错误`A potentially dangerous Request.Form value was detected from the client (ctl00$ContentPlaceHolder1$testBox="<test")`。服务器端和*客户*端代码如下：

```
--Client side--
<asp:TextBox runat="server" ID="testBox" />
<asp:Button runat="server" OnClick="testHtmlEncode" />

--Server side--
protected void testHtmlEncode(Object sender, EventArgs e) {
console.write(Server.HtmlEncode(testBox.Text));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:38:49.150

我让它与这个aspx一起工作：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" ValidateRequest="false" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>
    <asp:TextBox runat="server" ID="txtValue"></asp:TextBox>
        <asp:Button runat="server" ID="btnSubmit" OnClick="btnSubmit_Click" Text="submit"/>
    </div>
    </form>
</body>
</html> 
```

这个 web.config

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.5"/>
    <httpRuntime targetFramework="4.5" requestValidationMode="2.0"/>
  </system.web>
</configuration> 
```

这个 .aspx.cs

```
public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnSubmit_Click(object sender, EventArgs e)
    {
        Console.WriteLine(txtValue.Text);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:43:01.000

试试`<httpRuntime requestValidationMode="2.0" />`你的 web.config

连同`ValidateRequest="false"`在页面上。

添加`ID="btnSubmit"`给你按钮

**编辑：**

首先，我会谷歌你原来的错误。你应该能够做到这一点。尝试停止开发 Web 服务器并重新运行（任务栏中的图标）。

[https://www.google.com/?q=A+potentially+dangerous+Request.Form+value+was+detected+from+the+client](https://www.google.com/?q=A+potentially+dangerous+Request.Form+value+was+detected+from+the+client)

对于 jQuery 解决方案：

在 .aspx.cs 中

```
[WebMethod]
  public static void MyMethod(string myTextBoxValue)
  {
    //do something
  } 
```

在 .aspx 中

```
var txtValue= $('#<%=testBox.ClientID%>').val();
        if (!txtValue) {
            txtValue= 0;
        }
        var objJSON = {
            myTextBoxValue: txtValue
        };
        var encoded = JSON.stringify(objJSON);

$.ajax({
  type: "POST",
  url: "PageName.aspx/MyMethod",
  data: encoded,
  contentType: "application/json; charset=utf-8",
  dataType: "json",
  success: function(msg) {
    // Do something interesting here.
  }
}); 
```

**编辑 2：** 确保您没有使用文本框中的任何内容进行直接的 sql 调用，您将打开自己的 sql 注入攻击。这就是为什么 asp.net 首先阻止了“<”。

**编辑 3** 不确定是否重要，但您的 asp:Button 没有 ID 属性

# android - AlertDialog 到 DialogFragment

> ID：15416809
> 
> 赞同：0
> 
> 时间：2013-03-14T18:00:39.827
> 
> 标签：android, dialog

好的 Activity 类型的方法 showDialog(int, Bundle) 已弃用...所以我已经将 timePicker 更改为 fragmentDialog ，这很容易，因为 fragmentDialog 已经准备好：

```
new TimePickerDialog(getActivity(),_listener, _hour, _minute,dateFormat); 
```

但是我怎样才能将这种类型的对话框重新制作为 fragmentDialog 呢？

```
AlertDialog.Builder
        .setIcon()
        .setTitle()
        .setPositiveButton()
        .setSingleChoiceItems(new CharSequence[]{"Visual","Audio","Both"},2,null) 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:48:44.610

如果我对您的理解正确，您想**重用**您的`AlerDialog`，以便您可以定义一次并在片段/活动中的不同位置使用。

来自android文档`AlertDialog android.app.AlertDialog.Builder.create()` `Creates a AlertDialog with the arguments supplied to this builder. It does not show() the dialog. This allows the user to do any extra processing before displaying the dialog. Use show() if you don't have any other processing to do and want this to be created and displayed.` 所以：

```
//declare inside your fragment class
private AlertDialog welcomeDialog;

//Inisde onCreate paste the following code so your dialoge is just created but not shown
            welcomeDialog = new AlertDialog.Builder(this)
                .setIcon(android.R.drawable.ic_dialog_alert)
                .setTitle(
                        getResources().getString(R.string.first_run_title))
                .setMessage(
                        getResources().getString(R.string.first_run_desc))
                .setPositiveButton(R.string.ok,
                        new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                dialog.dismiss();
                            }
                        }).create();

//Wherever in your code you need to display the dialog,just use this piece of code:
welcomeDialog.show();

//and finally to do the cleanup:
    @Override
protected void onStop() {
    super.onStop();
    if (welcomeDialog != null)
        welcomeDialog.dismiss();} 
```

# csv - 在 Visual Basic 中向 csv 文件添加一列

> ID：15416811
> 
> 赞同：0
> 
> 时间：2013-03-14T18:00:47.033
> 
> 标签：csv, vb6

我有什么：

*   .csv 文件
*   多列
*   第一列中的关键字列表

我想做什么：

*   添加一个新的第一列（将其他列向右移动），我将其称为“A”
*   阅读我将称为“B”的（现在）第二列的每个单词
*   对于 BI 列的每个单词，想在 A 列中写一个详细的单词

我将负责细化功能。

你能帮我编辑一下这个 .csv 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:44:43.390

您有第一行关键字：

```
"B,C,D,E" 
```

但是你想`"A"`在开头插入，例如，有

```
"A,B,C,D,E" 
```

您可以阅读整行，并以逗号 (,) 分隔。然后在循环中重建字符串，并为要在其中惰性化新关键字的索引提供特殊情况。

```
Dim keywords As String
Dim newKeywords As String
Dim arr() As String
Dim keywordToInsert As String
Dim i As Integer

keywords = "B,C,D,E"
keywordToInsert = "A"

arr = Split(keywords, ",")

For i = 0 To UBound(arr) Step 1
    If i = 0 Then
        newKeywords = keywordToInsert
    End If
    newKeywords = newKeywords & "," & arr(i)
Next i 
```

这为您提供了关键字。使用这个循环，您应该能够想出自己的循环来读取每一行并像这样对第一列进行操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T22:09:23.683

或者我可以将原始 csv 文件上传到数据表中，在表单中的数据网格中将其可视化，然后直接在数据表中添加一列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T11:23:37.747

这假设您知道 CSV 文件中的列：

```
Private Sub RewriteFile(ByRef the_sFileName As String)

    Dim sFileNameTemp   As String
    Dim iFileNoInput    As Integer
    Dim iFileNoOutput   As Integer
    Dim iField1         As Integer
    Dim sField2         As String
    Dim datField3       As Date

    ' Temporary file name.
    sFileNameTemp = the_sFileName & ".tmp"

    iFileNoInput = FreeFile
    Open the_sFileName For Input As #iFileNoInput

    iFileNoOutput = FreeFile
    Open sFileNameTemp For Output As #iFileNoOutput

    Do Until EOF(iFileNoInput)
        ' Read in each field of each line into a separate variable, then write to temporary file together with new field. (If you don't know a field's type, use Variants)
        Input #iFileNoInput, iField1, sField2, datField3
        Write #iFileNoOutput, Elaborate(iField1, sField2), iField1, sField2, datField3
    Loop

    Close #iFileNoOutput
    Close #iFileNoInput

    ' Delete the original file, and replace with new file.
    Kill the_sFileName
    Name sFileNameTemp As the_sFileName

End Sub 
```

# php - 如果按钮被禁用，则不会提交表单

> ID：15416814
> 
> 赞同：0
> 
> 时间：2013-03-14T18:00:55.707
> 
> 标签：php, html, forms, submit, form-submit

此代码确认用户填写表单的信息。

在我第一次提交时，我使用此代码，它可以防止表单被提交两次：

```
<td width="30%" align="left">
    <input name="Submit" type="submit" value="OK" onclick="this.disabled=true; this.value='Sending...'; selectCarMakeModel.submit();"/>
</td> 
```

但是在确认码上，在我第二次提交时，如果我想在 onclick 中添加“this.disable”，它将不起作用，而不是在命令之前或之后，它只是保持空闲：

```
<form name="selectCarMakeModel" action="<?=$_SERVER['REQUEST_URI']?>" method="post">
    <?
    foreach($_POST as $key => $val) {
        echo '<input type="hidden" name="'. $key .'" value="'. myHTMLSpecialChars($val) .'">' . "\n";
    }
    ?>
    <input type="hidden" name="sticky" value="showForm">
    <input type="submit" name="goBack" value="No, Go Back">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <input type="submit" name="submit" value="Si, continue" onClick="this.form.sticky.value='continue'">
</form> 
```

谢谢

编辑：对不起，对不起......我没问对，第一个代码工作正常，问题是在第二个代码中，如果我点击提交按钮两次，表单会被提交两次，所以我尝试添加“this.禁用”功能，但在第二个代码上不起作用，如果我添加它，它不会处理，如果我不添加它，有时表单会发送两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:01:47.880

`disabled`元素**不触发事件**。您必须启用该属性，然后才能触发该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:38:17.407

您需要将要提交的内容设置为隐藏，然后您可以在第一次单击后禁用提交，（提交隐藏值）。用户将无法提交两次，值将被提交

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:03:18.100

提交后需要重新启用：

```
onclick="this.disabled=true; this.value='Sending...'; selectCarMakeModel.submit();this.disabled=false;" 
```

那应该为下一次设置它。

# asp.net - 当用户在asp.net c#中完成注册时如何发送带有验证链接的电子邮件

> ID：15416818
> 
> 赞同：-4
> 
> 时间：2013-03-14T18:01:01.987
> 
> 标签：asp.net

当用户在asp.net c#中完成注册时如何发送带有验证链接的电子邮件这是我的代码......请告诉我，当他创建帐户时我如何在用户电子邮件上发送验证链接......请帮助。 ...提前致谢

```
using System;
using System.Collections;
using System.Configuration;
using System.Data;
using System.Web;
using System.Linq;
using System.Xml.Linq;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Data.SqlClient;
using System.Configuration;

public partial class Registration : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
     SqlConnection con = new SqlConnection(
     ConfigurationManager.ConnectionStrings["BMCConnectionString"].ConnectionString);

    // open the data connection.  
    con.Open();
}
protected void Button1_Click(object sender, EventArgs e)
{
     if (IsPostBack)
    {
        Response.Write("<script>alert('Thanking you .....Registration Successful')</script>");
        TextBoxDate.Text = DateTime.Now.ToString();

        SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["BMCConnectionString"].ConnectionString);

        con.Open();
        string insCmd = "insert into Registration(UserName, Password, RePassword, Email, FullName ,Date ,Month, Year, Gender, Area, Date1) values (@UserName, @Password, @RePassword, @Email, @FullName ,@Date ,@Month, @Year, @Gender, @Area, @Date1)";
        SqlCommand insertUser = new SqlCommand(insCmd, con);
        insertUser.Parameters.AddWithValue("@UserName", TextBoxUN.Text);
        insertUser.Parameters.AddWithValue("@Password", TextBoxPW.Text);
        insertUser.Parameters.AddWithValue("@RePassword", TextBoxRP.Text);
        insertUser.Parameters.AddWithValue("@Email", TextBoxEA.Text);
        insertUser.Parameters.AddWithValue("@FullName", TextBoxFN.Text);
        insertUser.Parameters.AddWithValue("@Date", DropDownListDate.SelectedItem.Text);
        insertUser.Parameters.AddWithValue("@Month", DropDownListMonth.SelectedItem.Text);
        insertUser.Parameters.AddWithValue("@Year", DropDownListYear.SelectedItem.Text);
        insertUser.Parameters.AddWithValue("@Gender", RadioButtonList1.SelectedItem.Text);
        insertUser.Parameters.AddWithValue("@Area", DropDownListArea.SelectedItem.Text);
        insertUser.Parameters.AddWithValue("@Date1", TextBoxDate.Text);
        {
            //create the mail message
            MailMessage mail = new MailMessage();
            //set the addresses
            mail.From = new MailAddress("salvevishal9@gmail.com");
            mail.To.Add(TextBoxEA.Text);
            //set the content
            mail.Subject = "This is an email";
            mail.Body = "this is the body content of the email.";
            //send the message

            SmtpClient smtp = new SmtpClient("smtp.gmail.com");
            smtp.Port = 587;
            smtp.EnableSsl = true;
            smtp.Send(mail);

        try
        {
            insertUser.ExecuteNonQuery();
            con.Close();

        }
        catch (Exception er)
        {
            Response.Write(er);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T05:53:48.033

通过asp.net c#发送邮件并不是一件复杂的事情……只要我们知道smtp端口和主机……

```
 MailAddress to = new MailAddress("Email Id");

        MailAddress from = new MailAddress("Email Id");

        MailMessage mail = new MailMessage(from, to);

        mail.Subject = "write your subject";
        mail.Body = "write your body message";

        SmtpClient smtp = new SmtpClient();
        smtp.Host = "smtp.gmail.com";
        smtp.Port = 587;

        smtp.Credentials = new NetworkCredential(
            "Email Id", "Password");
        smtp.EnableSsl = true;

        smtp.Send(mail); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:04:03.153

找到一个您可以使用的 SMTP 服务器——您的虚拟主机应该为您提供一个可以用于内部应用程序的服务器。如果没有，那么您可以使用 Gmail，如果您有 Gmail 帐户。

用于`System.Net.Mail.SmtpClient`连接到服务器并发送电子邮件。它有一个简单的重载方法`Send`，可让您在一次调用中发送邮件。

请注意，`System.Web.Mail.SmtpClient`已过时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:31:13.157

```
//create the mail message

using(SmtpClient smtp = new SmtpClient("localhost"))
{
            MailMessage mail = new MailMessage();
            //set the addresses
            mail.From = new MailAddress("salvevishal9@gmail.com.com");
            mail.To.Add("@Email");
            //set the content
            mail.Subject = "This is an email";
            mail.Body = "this is the body content of the email.";
            //send the message
        smtp.Send(mail);
} 
```

更多信息：

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-06T10:20:24.977

```
MailAddress to = new MailAddress("Email Id");

MailAddress from = new MailAddress("Email Id");

MailMessage mail = new MailMessage(from, to);

mail.Subject = "write your subject";
mail.Body = "write your body message";

SmtpClient smtp = new SmtpClient();
smtp.Host = "smtp.gmail.com";
smtp.Port = 587;

smtp.Credentials = new NetworkCredential(
    "Email Id", "Password");
smtp.EnableSsl = true;

smtp.Send(mail); 
```

# angularjs - 带有 ng-repeat 的 Angularjs 为相同类型的多个元素生成相同的 id

> ID：15416837
> 
> 赞同：3
> 
> 时间：2013-03-14T18:01:56.620
> 
> 标签：angularjs, angularjs-ng-repeat, ng-repeat

我有一个 html 页面，其中我有一个对象“消息”，该对象具有一个属性“属性”，它是一个对象数组。问题是当我使用'ng-repeat'迭代'Message.Properties'项目以呈现我用angularjs创建的某些自定义元素时，它会生成一个id，我为相同的元素得到相同的id类型。这是我的代码示例：

```
<div data-ng-repeat="property in Message.Properties">
...
  <div ngm-if="(property.Type == 9)">                            
    <sdk:selectbox name="property.Title" row="" datafield="property.Value"
      options="property.ValueCollection" displayfield="Value" valuefield="Key"
      mandatory="property.isMandatory" labeled="property.Title" multiple="">
    </neolynk:selectbox>
  </div>
</div> 
```

重新表述，当元素“sdk:selectbox”被编译时，如果我在 Message.Properties 中有 2 个具有相同类型的属性（例如：9），则生成的 id（创建的 html 输入）对于两者都是相同的（虽然我是随机生成的），但是对于不同的输入，我当然需要不同的 ID。我读到 ng-repeat 会为每个项目复制模板，是吗？！如何解决？我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T18:30:13.747

您可能可以`$index`在您的内部使用`ng-repeat`基于当前行创建唯一 id。取自[文档](http://docs.angularjs.org/api/ng.directive:ngRepeat)：

> 每个模板实例的本地范围都公开了特殊属性，包括：
> 
> *   $index - {number} - 重复元素的迭代器偏移量（0..length-1）
> *   $first - {boolean} - 如果重复元素在迭代器中是第一个，则为 true。
> *   $middle – {boolean} – 如果重复元素在迭代器的第一个和最后一个之间，则为 true。
> *   $last - {boolean} - 如果重复元素是迭代器中的最后一个，则为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T05:57:56.813

听起来从您`Message.Properties`到 id 的转换是问题所在。您是否尝试通过将 Properties 显式设置为不同的对象集（甚至将 设置`Message.Type`为不同于 9 的对象）并运行它来检查这一点？

ng-repeat 不会为每个项目克隆模板，但会`$scope`从其父项继承模板，因此可能会在多个项目中使用来自那里的某些对象。

# c++ - 指针运算符可以在 C++ 中重载吗？

> ID：15416840
> 
> 赞同：0
> 
> 时间：2013-03-14T18:02:02.410
> 
> 标签：c++

运算符`=`是否可以为类指针重载。此示例尝试为指针“Cutie*”重载“operator =”：

```
class Cutie    
{
public:
    int Krait;

    Cutie() : Krait(0)
    {
    }
};

Cutie* operator = (Cutie* p, Cutie* q)
{
    if(p == 0)
    {
        if(0 < Krait)
            Krait--;
    }
    else
        Krait++;
} 
```

* * *

上述定义有误。我正在寻找一个计算指针分配的定义：

```
Cutie c;
Cutie* p = 0;
p = &c; 
```

现在'p -> Krait'应该是'1'。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:04:47.000

不，您不能有一个仅将指针作为其参数的非成员重载运算符函数：

> 操作符函数要么是非静态成员函数，要么是非成员函数，并且至少有一个类型为类、类引用、枚举或枚举引用的参数。

# php - PayPal Button 提交表单并同时触发 Ajax 调用？

> ID：15416842
> 
> 赞同：0
> 
> 时间：2013-03-14T18:02:04.017
> 
> 标签：php, ajax

我有一个 PayPal 按钮，它将表单提交到表单`action=""`属性中指定的 url。我希望此按钮执行的操作是在提交表单的同时（或大致相同）触发 ajax 调用。

所以表格看起来像这样：

```
<?php echo('   

    <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post" id="payWithPayPalForm">
    <input type="hidden" name="cmd" value="_xclick">
    <input type="hidden" name="business" value="me@mydomain.com">
    <input type="hidden" name="amount" value="'.$price.'">
    <input type="hidden" name="bn" value="PP-BuyNowBF:btn_buynowCC_LG.gif:NonHostedGuest" >
    <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_paynowCC_LG.gif" border="0" id="payWithPayPalButton" name="submit" alt="PayPal - The safer, easier way to pay online!">
    <img alt="" border="0" src="https://www.paypalobjects.com/pl_PL/i/scr/pixel.gif" width="1" height="1">
    </form>
          ');
?> 
```

ajax请求如下：

```
$.ajax({
    type: "POST",
    url: "classes/acceptOfferFunction.php",
    data: {
        hash: getURLParameter('hash'),
        hash2: getURLParameter('hash2')
    },
    success: function (result) {

    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:08:33.167

这里的问题是您的 ajax 请求将被取消，因为页面将重新加载（实际上重定向到贝宝）。

您可以做的是在提交表单时发送 ajax 请求**并等待**ajax 请求完成。然后，发送表格。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" onsubmit="return ajaxRequest()" method="post" id="payWithPayPalForm"> 
```

使用`onsubmit`，当用户发送表单时，该函数`ajaxRequest`将被触发。由于我们之前放了一个return，form会等待函数的return继续。

*   如果`ajaxRequest()`返回true，表单将被提交。
*   如果它返回 false，则不会。

这是 POC。您有更好的方法以非阻碍性的方式处理它（例如，在表单 id 上使用 jQuery）。而且您也必须编写函数代码。

# javascript - 使用 Javascript 截取单页应用程序的屏幕截图

> ID：15416844
> 
> 赞同：5
> 
> 时间：2013-03-14T18:02:05.403
> 
> 标签：javascript, html, screenshot, webpage-screenshot

**背景**

我通过使用 JS 模拟用户输入，在我工作的应用程序上运行 UI 测试。JS 在运行测试应用程序的 iframe 上按顺序运行一堆鼠标和键盘触发器，我可以观察中断。我想对其进行设置，以便它可以定期截取当前状态的屏幕截图。

**已经考虑**

我知道这是一个重复的问题，我现在再次问这个问题，以防最近这个领域有任何发展。

我查看了[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)以截取屏幕截图，虽然它在大多数情况下都有效，但在使用大量 CSS3 和 webfonts 时似乎有问题。

我也不能随意使用服务器端方法，因为我正在开发一个单页主干应用程序，并且它不存储基于 URL 的状态（大部分情况下）。

我什至查看了 mozilla 的特定`background:-moz-element()`属性，但是当您想要的页面位于 iframe 中时，这不起作用。

我认为最接近我需要的是 phantomJS，它允许您操作页面并截取屏幕截图。我想避免这种情况，因为我会使用在运行测试时查看测试的能力。

那么，有人知道我可以在这里使用什么吗？只要它在 Windows 上运行，它甚至可以是一种浏览器（Firefox 或 Chrome）独有的。它不需要在所有客户端上运行，只在我的客户端上运行，所以即使我必须设置一个特殊的环境也可以，只要可以通过 JS 保存屏幕截图（虽然只在 Firefox 或 Chrome 上，所以没有 ActiveX）。

**TL;DR** 需要 Javascript 或 HTML5 API 来保存在 iframe 中运行的应用程序的屏幕截图。请不要付费解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-19T10:17:19.980

看起来您需要的正是我们开发的产品。我们可以从单个页面应用程序（包括状态）创建完全准确的屏幕截图。

看看[http://usersnap.com](http://usersnap.com)

全面披露：我是 Usersnap 的联合创始人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-15T13:39:30.933

最后选择了 phantomJS。虽然 html2canvas 非常适合基本使用，但当您拥有大量 CSS3 和 webfonts 时，它就不太好用了。

phantomJS 的稳定版本在 webfonts 方面存在一些已记录的问题 - [https://code.google.com/p/phantomjs/issues/detail?id=592](https://code.google.com/p/phantomjs/issues/detail?id=592)

值得庆幸的是，虽然这个用户已经构建了一个开箱即用的字体支持版本 - [http://arunoda.me/blog/phantomjs-webfonts-build.html](http://arunoda.me/blog/phantomjs-webfonts-build.html)

此外，值得注意的是，如果您从自己的服务器（本地）提供网络字体，它可能仍然会失败。切换到谷歌托管的网址通常会解决这个问题。可能与内容类型有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-16T09:22:17.297

由于您可以使用需要特定浏览器的解决方案，因此您可以制作 Chrome 扩展程序，并使用[Tab API](https://developer.chrome.com/extensions/tabs.html)的[captureVisibleTab](https://developer.chrome.com/extensions/tabs.html#method-captureVisibleTab)方法。

```
chrome.tabs.captureVisibleTab(null, {}, function (image) {
   // You can add that image HTML5 canvas, or Element.
}); 
```

来源：[https ://stackoverflow.com/a/4574782/2972](https://stackoverflow.com/a/4574782/2972)

查看这个答案，了解如何从 JavaScript 调用扩展：[https ://stackoverflow.com/a/8713547/2972](https://stackoverflow.com/a/8713547/2972)

# php - jQuery post div 内容和 php echo

> ID：15416846
> 
> 赞同：1
> 
> 时间：2013-03-14T18:02:10.250
> 
> 标签：php, jquery

我想通过 jQuery 发布 div 的内容，重定向到 php 文件，然后在 php 文件上回显 div 内容。

html

```
<div id="edit_content">
<p>This is a test</p>    
</div>
<a href="processingscript.php" id="submit_script">Submit</a> 
```

jQuery

```
$('#submit_script').click(function(){
$.post('/processingscript.php', {'html': $('#edit_content').html()};
}); 
```

php

```
$content = $_POST['html'];
echo $content; 
```

到目前为止，我在 php 文件上得到了一个空白回显。我应该使用 $().redirect() 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:09:50.187

好吧..我不完全确定您在这里要做什么。但这就是我所理解的——

您想在不同的 PHP 脚本上访问 div 的内容。您使用“ *redirect* ”一词，然后使用 jQuery AJAX 方法。最后，您还没有为 AJAX 调用定义回调，因此您永远不会看到来自 PHP 的回声。

尝试这样的事情 -

```
var htmlData = $('#edit_content').html();
$.post('/processingscript.php', {'html': htmlData },function(response){
  // response now contains anything echoed from processingscript.php 
}); 
```

您在函数中看到的匿名函数`$.post()`就是我前面提到的回调。这是一个在 AJAX 请求成功完成后立即调用的函数。传递给它的参数 ( `response`) 是`processingscript.php`脚本的输出。

因此，要将整个事情组合在一起，您的 jQuery 会向您的 PHP 脚本发送一个 AJAX 请求，然后该脚本可以随意操作和使用`$_POST`数据。一旦 PHP 完成它的业务，它可以回显状态消息。这可以是纯文本，只是一个“ *Woo Hoo！脚本完成！* ”，甚至是一个包含您想要传递回 JavaScript 的任何信息的对象（这将是一个 JSON 响应）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T19:34:59.687

**这就是你想要的，我猜。经过测试，100% 对我有效**

***HTML：***

```
<div id="edit_content">
    <p>This is a test paragraph</p><p> This is <u>another</u> <b>paragraph</b></p>    
</div>
<button id="submit_script">Submit</button>
<div style="border: 2px solid red; width: 200px; height: 100px;">
    <b>Result:</b>
    <div id="result"></div>
</div> 
```

***Javascript：***

```
$(document).ready(function() {
    $("#submit_script").click(function() {
        var content = $('#edit_content').html();
            $.post("processing.php", { html: content})
            .done(function(data) {
            $('#result').empty().append(data)
            });
        });
}); 
```

**这会将返回的 div 内容加载到新的 div 上。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:04:37.257

你应该添加

```
return false; 
```

在 jQuery click 事件处理程序中，否则它将导航到该页面。

```
$('#submit_script').click(function(){
    $.post('/processingscript.php', {'html': $('#edit_content').html()};
    return false;
}); 
```

请记住，您只能在浏览器 javascript 控制台中看到通过 AJAX 请求获得的页面中显示的内容。您插入的“回声”不会在您的页面上显示任何内容，除非您使用 jQuery 获得响应但脚本没有意义。

# javascript - 捕捉 Mac 触控板缩放

> ID：15416851
> 
> 赞同：25
> 
> 时间：2013-03-14T18:02:17.103
> 
> 标签：javascript, html, macos

目前在我的应用程序中，我正在捕捉鼠标滚轮事件并在 Canvas 元素上执行放大或缩小。如果用户使用 Mac 并尝试使用触控板执行缩放，则不会发生任何事件，实际发生的是放大/缩小浏览器。

有没有办法捕捉使用触控板执行的缩放事件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-02-23T22:49:37.770

至少在 Chrome 中，触控板“捏合缩放”会触发滚轮/鼠标滚轮事件，看起来好像按下了 ctrl 键。您可以像任何其他滚轮/鼠标滚轮事件一样捕获此事件，并防止其默认发生。下面是一个使用 jQuery 的例子：

```
$("canvas").on("mousewheel", function(e) {
    if (e.ctrlKey) {
        e.preventDefault();
        e.stopImmediatePropagation();

        // perform desired zoom action here
    }
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-05-12T10:17:13.000

[从 Safari 9.1 开始，您可以从](https://developer.apple.com/library/mac/releasenotes/General/WhatsNewInSafari/Articles/Safari_9_1.html#//apple_ref/doc/uid/TP40014305-CH10-SW7)**OSX 设备**捕获缩放和旋转事件。有关更多信息，请阅读[GestureEvent 类参考](https://developer.apple.com/library/mac/documentation/UserExperience/Reference/GestureEventClassReference/index.html)。请注意，这仅适用于 Safari，但由于您的问题是关于“ **Mac**触控板缩放”，我认为这就是您要寻找的。

```
function zoom(e) {
  console.log(e.scale)
  e.preventDefault()
}
document.addEventListener('gesturestart', zoom)
document.addEventListener('gesturechange', zoom)
document.addEventListener('gestureend', zoom)
```

* * *

旁注：iOS 上的 Safari 也支持这些事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-07T16:59:30.537

据我所知，触控板捏合不会触发触摸或手势事件，因此 Hammer.js 不会检测到它。

我能够使用 Hamster.js 在 Chrome 中模拟夹点检测。它将触发鼠标滚轮事件，您可以使用增量来确定用户是放大还是缩小。

但是，此解决方案在 Safari 中不起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-13T19:17:26.553

环顾四周，这有帮助吗？它在讨论中涵盖了 web 应用程序和 javascript，并将hammer.js 作为检测夹点事件的可能解决方案......检测夹点 [的最简单方法](https://stackoverflow.com/questions/11183174/simplest-way-to-detect-a-pinch)

* * *

## 回答 #5

> 赞同：-8
> 
> 时间：2013-09-08T14:06:46.733

仅使用 Javascript 无法捕捉触控板的捏放大/缩小

# c# - MVC 4\. 和实体框架表连接

> ID：15416852
> 
> 赞同：6
> 
> 时间：2013-03-14T18:02:20.910
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, asp.net-mvc-4

这个项目让我发疯 ;-) 我正在尝试做一个简单的查询来连接两个表

我有以下内容：

存储库类方法

```
 public IQueryable<ADPerson> FindAll(string UserId)
    {
        return (from p in db.ADPerson
                select p); 

    } 
```

在我的控制器中：

```
 var ADPersonList = from o in ADPersonDB.FindAll(GetUserId())
                    join c in MSDNTypeDB.FindAll(GetUserId()) on o.MsdnTypeId equals c.MsdnTypeId
                    select new ADPerson()
                    {

                        AdPersonId = o.AdPersonId,
                        SamAccountName = o.SamAccountName,
                        Description = o.Description,
                        DisplayName = o.DisplayName,
                        UserPrincipalName = o.UserPrincipalName,
                        Enabled = o.Enabled,
                        LastUpdated = o.LastUpdated,
                        OnlineAssetTag = o.OnlineAssetTag,
                        MsdnTypeId = o.MsdnTypeId,
                        MsdnSubscription = c.MsdnTypeDescription,

                    }; 
```

我不断收到错误消息：

```
{"The specified LINQ expression contains references to queries that are associated with different contexts."} 
```

我还尝试添加到存储库类：

存储库类方法

```
 public IQueryable<ADPerson> FindAll(string UserId)
    {
        //return (from p in db.ADPerson
        //        select p); 

        var query = from o in db.ADPerson
                    join c in db.MsdnTypes on o.MsdnTypeId equals c.MsdnTypeId
                    select new ADPerson()
                    {

                        AdPersonId = o.AdPersonId,
                        SamAccountName = o.SamAccountName,
                        Description = o.Description,
                        DisplayName = o.DisplayName,
                        UserPrincipalName = o.UserPrincipalName,
                        Enabled = o.Enabled,
                        LastUpdated = o.LastUpdated,
                        OnlineAssetTag = o.OnlineAssetTag,
                        MsdnTypeId = o.MsdnTypeId,

                        MsdnSubscription = c.MsdnTypeDescription,

                    };

        return query;

    } 
```

在两个表之间做一个简单的连接并在实体框架中填充变量真的很难吗

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:22:17.963

投影到匿名对象

```
var query = from o in db.ADPerson
   join c in db.MsdnTypes on o.MsdnTypeId equals c.MsdnTypeId
   select new 
   {
     AdPersonId        = o.AdPersonId,
     SamAccountName    = o.SamAccountName,
     Description       = o.Description,
     DisplayName       = o.DisplayName,
     UserPrincipalName = o.UserPrincipalName,
     Enabled           = o.Enabled,
     LastUpdated       = o.LastUpdated,
     OnlineAssetTag    = o.OnlineAssetTag,
     MsdnTypeId        = o.MsdnTypeId,
     MsdnSubscription  = c.MsdnTypeDescription,
  }; 
```

然后映射回您的实体

```
foreach (var item in query)
{
  var adPerson = new ADPerson
  {
    AdPersonId         = item.AdPersonId,
    SamAccountName     = item.SamAccountName,
    Description        = item.Description,
    DisplayName        = item.DisplayName,
    UserPrincipalName  = item.UserPrincipalName,
    Enabled            = item.Enabled,
    LastUpdated        = item.LastUpdated,
    OnlineAssetTag     = item.OnlineAssetTag,
    MsdnTypeId         = item.MsdnTypeId,
    MsdnSubscription   = item.MsdnTypeDescription,
  {
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:20:31.693

```
 public IQueryable<ADPerson> FindAll(string UserId)
    {
       // return (from p in db.ADPerson
       //        select p);
        List<ADPerson> lst = new List<ADPerson>();
        var query = from o in db.ADPerson
                    join c in db.MsdnTypes on o.MsdnTypeId equals c.MsdnTypeId
                    select new
                         {

                             AdPersonId = o.AdPersonId,
                             SamAccountName = o.SamAccountName,
                             Description = o.Description,
                             DisplayName = o.DisplayName,
                             UserPrincipalName = o.UserPrincipalName,
                             Enabled = o.Enabled,
                             LastUpdated = o.LastUpdated,
                             OnlineAssetTag = o.OnlineAssetTag,
                             MsdnTypeId = o.MsdnTypeId,
                             MsdnSubscription = c.MsdnTypeDescription

                         };
        foreach (var item in query)
        {
            var adPerson = new ADPerson()
              {
                  AdPersonId = item.AdPersonId,
                  SamAccountName = item.SamAccountName,
                  Description = item.Description,
                  DisplayName = item.DisplayName,
                  UserPrincipalName = item.UserPrincipalName,
                  Enabled = item.Enabled,
                  LastUpdated = item.LastUpdated,
                  OnlineAssetTag = item.OnlineAssetTag,
                  MsdnTypeId = item.MsdnTypeId,
                  MsdnSubscription = item.MsdnSubscription
              };
            lst.Add(adPerson);

        }

        return lst.AsQueryable();

    } 
```

# java - Java OO——提供与其他对象交互的新方法的对象？

> ID：15416860
> 
> 赞同：3
> 
> 时间：2013-03-14T18:02:42.730
> 
> 标签：java, terminology

假设我有一个`List<Apple>`对象，每个苹果都有一种颜色。

我实现了另一个对象，该对象是用其输入苹果对象列表构造的。我可能会在这个对象上实现一些功能，比如“让我知道青苹果的数量。”，我可以在不知道该对象的内部表示的情况下调用它。

你会怎么称呼这个人？这似乎是基本的 OO，但我在想一个描述性的名称时遇到了麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-04T23:24:45.377

由于您在谈论一种`List<Apple>`可能性，因此您也在谈论一种`Collection<Apple>`（列表继承集合）。

如果您想强调“收藏”，那么我将其命名为“收藏”。苹果传统上以蒲式耳出售，但您不关心测量，所以我会使用更通用（不取决于大小）的术语“篮子”。

```
public class Basket {

   private int greenCount;

   public void addApple(Apple apple) {
     if (apple.isGreen()) {
        greenCount++;
     }
   }

   public int getGreenAppleCount() {
      return greenCount;
   }

} 
```

这恰当地抓住了计算篮子中青苹果的责任。

另一方面，实用程序似乎将任务的责任与特定类型绑定的对象分开。例如，让我们看一个假设的`AppleCounterUtil`.

```
public class AppleCounterUtil {

    public int getCount(Collection<Apple> apples, AppleCondition condition) {
        int count = 0;
        for (Apple apple : apples) {
            if (condition.isSatisfied(apple)) {
               count++;
            }
        }
    }

} 
```

现在我们有了一个很好的实用程序，它实际上不维护计数，但每次需要从可能不同的苹果列表中重新计算计数。

关键是后一个例子**不是面向对象的**，因为没有概念对象。声明没有对象的基本原理是因为包含该实用程序的类缺少状态。对象是**数据**和**密切相关的代码**的集合。当您只有代码时，可以合理地论证您有一个名称空间函数而不是一个对象。

为了再次看到差异，让我们比较两个代码片段。使用我们的第一个“篮子”方法：

```
...
int greenOnes = basket.getGreenAppleCount();
basket.addApple(new GreenApple());
greenOnes = basket.getGreenAppleCount();
... 
```

变得非常笨重，但是由于我们是*面向对象的*，我们可以很容易地添加一个`Basket Listener`接口到`Basket`

```
public class Basket {

   public void addListener(BasketListner listener) {
     ...
   }

   public void addApple(Apple apple) {
     ...
     for (BasketListnener listner : listeners) {
       listener.appleAdded(this);
     }
   }

}

... some other class ... implements BasketListener {

   int greenOnes = 0;

   ...

   public void appleAdded(Basket basket) {
      greenOnes = basket.getGreenAppleCount();
   }
} 
```

而使用面向实用的技术

```
...
int greenOnes = AppleCounterUtil.getCount(apples, new GreenCountCondition());
apples.addApple(new GreenApple());
greenOnes = AppleCounterUtil.getCount(apples, new GreenCountCondition());
... 
```

表面上看起来很相似，直到您尝试添加更多功能。在尝试添加“苹果列表监听器”时，您很快就会意识到它`AppleCounterUtil`不负责维护计数，并且无法被监听。“苹果列表”也不负责维护计数，通用列表通常会提供错误的监听接口。

不幸的是，当一个人变得面向实用程序时，他们通常会尝试通过添加更多实用程序方法来解决问题。这最终可能意味着特定的关注点（谁管理苹果组）可以分布在许多实用程序中，而无需任何实用程序单独负责该任务。每个实用程序只提供一些可以按需计算的“功能”。

在某些情况下，按需计算功能可能会依赖于其他按需计算功能，这样您就可以在两者之间获得功能耦合（即使没有直接的代码耦合）。这种有效的耦合意味着如果您未能按顺序调用特定的一组实用程序，或者省略了所需的实用程序调用，您的代码就会中断。一个极端的情况是对象最终失去了它们的行为，以至于它们变成了数据结构，或者失去了通常与对象相关联的行为。它是一种面向对象的设计反模式，被称为“贫血对象”。

# objective-c - NSPointerArray 和 char * 的内存管理问题

> ID：15416862
> 
> 赞同：1
> 
> 时间：2013-03-14T18:02:45.293
> 
> 标签：objective-c, memory-management, memory-leaks

我有一个`char *`，我用它来处理它，`strtok`并得到我得到的每一行的副本`strdup`。这`char *`用作函数的参数，该函数将指针存储在 a`NSMutableArray`中，其中包含`NSPointerArray`. 问题是当我在 dealloc 中调用 release 时，我得到`NSMutableDictionary`消息发送到已释放的实例`。所以我认为这里有一些严重的错误......这里有一些代码：

```
proceedDataBlock = ^(const char *data){

            NSDate *date = [NSDate date];

            int counter = 0;
            char *temp = strdup(data);
            char *cline = strtok(temp, "\n");
            Table *dataList = [[Table alloc] initWithType:m.Type groups:groupings];
            while(cline)
            {
                 // do something
                 [myObject addString:strdup(cline)];
                 cline = strtok(NULL, "\n");
            }
            free(temp);
 [callbackObj performSelectorOnMainThread:@selector(recieveDataModelsFinished:) 
```

withObject:[dataList autorelease] waitUntilDone:YES]; }

`myObject:addString`看起来像：

```
-(void)addString:(char *)line
{
// models is an NSMutableArray
    char cGroup = line[32];
    NSString *group = [NSString stringWithFormat:@"%c", cGroup];
    NSPointerArray *dataArray = [self.models objectForKey:group];
        [dataArray addPointer:line];
} 
```

现在，当我释放我的对象并调用 dealloc 时：

```
-(void)dealloc
{    
    [_models release];
    [_type release];
    [super dealloc];
} 
```

我的`_models`字典中的每个条目都会得到消息 `message send to deallocated instance`。

编辑：在这里我创建模型字典及其内容：

```
 self.models = [NSMutableDictionary dictionaryWithCapacity:100];

if (mappings.count > 0)
{
    self.groupings = [mappings retain];

    for (GroupingInfo *group in self.groupings)
    {
        NSPointerArray *dataArray = [[NSPointerArray alloc] initWithOptions:NSPointerFunctionsCStringPersonality];
        [self.models setValue:dataArray forKey:group.key];
        [dataArray release];
    }
}
else
{
    NSPointerArray *dataArray = [[NSPointerArray alloc] initWithOptions:NSPointerFunctionsCStringPersonality];
    [self.models setValue:dataArray forKey:ALLITEMS_GROUP_KEY];
    [dataArray release];
} 
```

}

EDIT2：当我在调试器中单步执行我的 dealloc 时，我只会收到此消息，然后如果我没有单步执行任何操作，我就会看到此消息（但没有发生崩溃）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T07:31:28.053

我在 Apple 论坛上听到：“如果您仅在调试器中单步执行代码时收到该消息，那么这是调试器的一个已知问题。当您单步执行代码以获取它们的描述时，调试器消息对象。如果对象已解除分配但仍在范围内，调试器仍将向解除分配的对象发送消息，从而导致控制台输出有关向解除分配的实例发送消息的消息。” 所以我希望它是调试器的问题。

# google-app-engine - 基于处理程序和方法的 Google-App-Engine 网址

> ID：15416863
> 
> 赞同：0
> 
> 时间：2013-03-14T18:02:53.030
> 
> 标签：google-app-engine, routing, url-routing

有没有人想出一种在 Google App Engine 中进行自动路由的优雅方法？我最终得到了很长的路线列表，即

```
urls = routes.HandlerPrefixRoute(h+'index_handler.',[RedirectRoute(r'/',handler='IndexHandler')]),... 
```

我想要这样 example.com/blog 会自动路由到 blog 处理程序，example.com/blog/method 会自动路由到 blog.method 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T21:19:46.850

我已经找到了一个非常基本的使用 webapp2 和应用引擎进行路由的解决方案。我不打算在这里发布整个解决方案，但如果有人想看到它，请告诉我，我会将其发布在 github 上并向您发送链接。

我基本上只是使用 os 在我的处理程序目录中获取我的文件并遍历文件：

```
for file in os.listdir(directory):
    if file.endswith(".py") and file != '__init__.py': 
```

我使用了一个非常简单的命名约定（即 file_name = FileName），因此基于处理程序目录中的文件，我可以为每个动态创建路由。

我在应该路由的方法上使用装饰器（即 url 处理程序/方法将转到处理程序文件，处理程序类和 Handler.Method 将被调用）。所以我得到了每个类的所有方法，如果类方法具有装饰器创建的属性，则路由它！

所以像这样的for循环：

```
methods = inspect.getmembers(handlercls, predicate=inspect.ismethod)
methods = [x[1] for x in methods if hasattr(x[1], 'route')]

for method in methods:
    # Set some kwargs that I can then pass to a route (i.e. handler path, method to call, etc...) 
```

就像我说的，可能为什么没有人回答这个问题，整个解决方案很长，所以如果有人想要，我会把它放在 GitHub 上，也许人们可以添加/控制。对它进行改进。

# c# - 在 C# 中使用数据库将 Windows 窗体导出到应用程序

> ID：15416864
> 
> 赞同：0
> 
> 时间：2013-03-14T18:02:54.087
> 
> 标签：c#, database

我正在使用 c# 和数据库（一个 WinForms 应用程序）开发一个项目。

我尝试使用`.exe`Release 目录中的文件，但是当我将它复制到计算机上的另一个文件夹或在另一个文件夹上使用它时，它说它找不到`.mdf`文件（数据库）。

如何将项目导出为应用程序以便数据库存在？

# java - 无法在 ActionBarSherlock 中创建选项菜单

> ID：15416866
> 
> 赞同：3
> 
> 时间：2013-03-14T18:03:02.527
> 
> 标签：java, android, actionbarsherlock

我正在尝试在 ActionBarSherlock 的帮助下在 Android 2.3 应用程序中实现选项菜单。但它不显示。这是选项菜单的简单 XML 布局文件“breadcrumb_bar_menu”：

```
<?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >
  <item android:id="@+id/inbox"
       android:icon="@drawable/topbar_btn_inbox"      
       android:title= "@string/about" />    

 <item android:id="@+id/sent"
       android:icon="@drawable/topbar_sent"      
       android:title="@string/about" />    
    </menu> 
```

这是我从 SherlockActivity 继承的活动：

```
 public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.breadcrumb_bar_menu, menu);
    return true;
} 
```

但是我在活动中看不到选项菜单。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T02:19:03.737

`android:showAsAction="ifRoom"`在您的菜单 xml 项的属性中包含。

```
 <?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/inbox"
       android:showAsAction="ifRoom"
       android:icon="@drawable/topbar_btn_inbox"      
       android:title= "@string/about" />    

    <item android:id="@+id/sent"
       android:showAsAction="ifRoom"
       android:icon="@drawable/topbar_sent"      
       android:title="@string/about" />    
 </menu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-09T20:14:10.217

```
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    com.actionbarsherlock.view.MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.actionoption, menu);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:20:33.427

您必须为设备设置导航模式。如果是，您的设备是否有硬菜单键，那么您将看不到三个点菜单选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T23:14:25.240

您需要告诉系统您将使用菜单：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setHasOptionsMenu(true);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-21T17:52:52.870

为了使用 Actionbarsherlock 使 optionmenu 像在其他 API > 2.3.3 上一样工作，我做了以下操作：

菜单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/navigateMenu" 
android:icon="@drawable/icon"
android:title="Menu"
android:orderInCategory:"9"
android:showAsAction="always"
android:titleCondensed="Menu">
<menu>
<item android:id="@+id/id1"
android:icon="@drawable/option1"
android:title="option1" />
<item android:id="@+id/id2"
android:icon="@drawable/option2"
android:title="option2" />
<item android:id="@+id/id3"
android:icon="@drawable/option3"
android:title="option3" />
</menu>
</item>
</menu> 
```

在您的活动代码中：获取父 MenuItem 的引用并使用 SHOW_AS_ACTION_ALWAYS 属性将其附加到操作栏参见相同的代码：

活动文件：

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.sample_menu, menu);

//To make optionmenu visible on Actionbar for 2.3.3

menu.findItem(R.id.navigateMenu).setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS)
        return true;
    } 
```

# wordpress - 显示重复内容的 Wordpress 自定义循环

> ID：15416868
> 
> 赞同：0
> 
> 时间：2013-03-14T18:03:05.840
> 
> 标签：wordpress, loops

我在custom_functions.php 中设置了一个自定义循环。循环的基本思想是这样的

```
 function category() {
   if (is_category(3557)) {
      News Category content
   }
   else{
      Main categories content
   }
 } 
```

这适用于所有主要类别，但在新闻页面上，我显示的是新闻内容，然后是主要网站内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:34:00.273

我意识到出了什么问题 - 我正在使用 Thesis 主题，而我找到的关于如何启动自定义循环的示例有

```
else
  thesis_loop::category(); 
```

在最后。但是，一旦我添加了实际内容来覆盖默认循环，我只需要为 else 语句添加括号，所以它变成了

```
else {
   Main category content
} 
```

# jquery - 为什么在 jQuery 对象中包装 HTML 响应时 IE 会泄漏内存？

> ID：15416869
> 
> 赞同：11
> 
> 时间：2013-03-14T18:03:12.003
> 
> 标签：jquery, ajax, internet-explorer, memory-leaks

我试图弄清楚为什么 IE 在将 AJAX 请求的 HTML 页面包装在 jQuery 对象中进行处理时会泄漏内存。用户可能会访问页面并让它停留几分钟或几小时，因此页面`ajax`每分钟使用几次 jQuery 的方法来获取新数据，然后我将页面的重要部分替换为新的预渲染数据。

在这一点上，我已将其缩小到一个调用 - 当`$(data)`调用包装 HTML 字符串时，内存会出现一点峰值，并且似乎从来没有被垃圾收集。随着时间的推移，使用了数百 MB，我被迫重新加载页面或重新启动 IE。

[**这个小提琴**](http://jsfiddle.net/t8GzG/5/)能够重现这个问题。它使用 AJAX 请求页面，然后`$(data)`在紧密循环中调用以夸大泄漏。Chrome 和 Firefox 似乎都像我预期的那样做出反应（内存被回收），但 IE 表现不佳。惊喜。

使用 Process Explorer，我发现在运行上述小提琴两次后内存消耗急剧增加。

![在此处输入图像描述](../Images/93f35be7fee01a628b554a5091fd1d34.png)

我目前在标准模式下使用 IE9。

为什么会这样？有解决方法吗？

## 更新

这是一个在不使用 AJAX 的情况下演示该问题的[**小提琴。**](http://jsfiddle.net/t8GzG/13/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:56:33.997

我找到了解决上述问题的方法。

在解决这个问题时，我尝试了各种方法来防止泄漏发生。我想出的解决方案是放弃使用`$.ajax`来检索数据并`$()`包装结果。相反，我使用`$('#destination').load('sourceUrl #selector')`（参见[文档](http://api.jquery.com/load/)）将数据推送到隐藏的 div 中，然后以这种方式操作结果。

结果是在幕后`$.load`使用`$.parseHTML`来操纵结果并将它们推到指定的位置（`$()`显然没有）。[有关源代码行，请参见此处](https://github.com/jquery/jquery/blob/1.9-stable/src/ajax.js#L176)。

*   `$(htmlText)`泄漏
*   `$(bodyText)`不泄漏
*   `$.parseHtml(htmlText)`慢慢泄漏（？）
*   `$.parseHtml(bodyText)`不泄漏

这是一个要演示的[小提琴。](http://jsfiddle.net/t8GzG/21/)

我不知道*为什么*它的行为方式如此，但它的短处似乎是：尽可能避免解析完整的 HTML 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:44:32.193

我看到了您所看到的，当我更改代码以在每次调用成功时重新分配函数时，神奇地它没有泄漏（至少在我的环境中。）

所以，我的解决方案很愚蠢，但它似乎对我有用。对你起作用吗？

```
$(function(){
    $.ajaxSetup({ cache: false });

    $('#go').click(performCall);
});

function performCall() {
    $('#timestamp').text('Working...');

    $.ajax({
       url: 'http://fiddle.jshell.net/',
        success: function(){
            var func = function(data, textStatus, jqXHR) {
                $('#timestamp').text('Done at ' + new Date());
                for(var x = 0; x < 100; x++) {
                    var $a = $(data);
                }
            };
            func();
        }
   });
} 
```

[http://jsfiddle.net/tCvUw/](http://jsfiddle.net/tCvUw/)

# jquery - MVC 4 WebGrid 和 Jquery 产生两个错误。JQuery 未定义，ajax 模型更改后出现排序错误

> ID：15416877
> 
> 赞同：3
> 
> 时间：2013-03-14T18:03:33.027
> 
> 标签：jquery, asp.net-mvc-4, webgrid

在我正在更新的 div 元素内部是一个带有 webgrid 的页面部分，当我在 webgrid 构造函数中指定 ajaxUpdateContainerId: 时出现错误：

JavaScript 运行时错误：“jQuery”未定义

这是生成的 javascript 错误引用：

```
<script type="text/javascript">
        (function($) {
            $.fn.swhgLoad = function(url, containerId, callback) {
                url = url + (url.indexOf('?') == -1 ? '?' : '&') + '__swhg=' + new Date().getTime();

                $('<div/>').load(url + ' ' + containerId, function(data, status, xhr) {
                    $(containerId).replaceWith($(this).html());
                    if (typeof(callback) === 'function') {
                        callback.apply(this, arguments);
                    }
                });
                return this;
            }

            $(function() {
                $('table[data-swhgajax="true"],span[data-swhgajax="true"]').each(function() {
                    var self = $(this);
                    var containerId = '#' + self.data('swhgcontainer');
                    var callback = getFunction(self.data('swhgcallback'));

                    $(containerId).parent().delegate(containerId + ' a[data-swhglnk="true"]', 'click', function() {
                        $(containerId).swhgLoad($(this).attr('href'), containerId, callback);
                        return false;
                    });
                })
            });

            function getFunction(code, argNames) {
                argNames = argNames || [];
                var fn = window, parts = (code || "").split(".");
                while (fn && parts.length) {
                    fn = fn[parts.shift()];
                }
                if (typeof (fn) === "function") {
                    return fn;
                }
                argNames.push(code);
                return Function.constructor.apply(null, argNames);
            }
        })(jQuery); 
```

这是我的主页：

```
@model IEnumerable<PamperWeb.Models.Lab>

@{
    ViewBag.Title = "Index";
}

@Html.Partial("_SubMenu")

<h2>Index</h2>

<p>
    @Html.ActionLink("Add Lab", "Create", "Lab", new { patientId = ViewBag.PatientId }, null)
</p>
<div id="labs">
@Html.Partial("_Completed", Model)
</div> @section Scripts {
@Scripts.Render("~/bundles/jqueryval")
@Scripts.Render("~/bundles/sitespec") 
```

}

和部分：

```
@model IEnumerable<PamperWeb.Models.Lab>

@{
    var grid = new WebGrid(Model, ajaxUpdateContainerId: "labs", defaultSort: "Name");
}

@grid.GetHtml(columns: grid.Columns(
grid.Column("Name"),
grid.Column("Given", header: "Date"),
grid.Column("TimeGiven", header: "Time"),
grid.Column("Value"),
grid.Column("Phase"),
grid.Column("PatientId"),
grid.Column("", format: @<text>@Ajax.ActionLink("Disable", "Disable", new { labid = item.Id, patientid = ViewBag.PatientId }, new AjaxOptions { HttpMethod="POST", UpdateTargetId = "labs"})</text>)
)
) 
```

如果我从 webgrid 构造函数中删除 ajaxUpdateContainerId，错误就会消失。但是当我点击排序时，我得到一个 404 来寻找我的控制器操作。为什么它会在排序时寻找我的控制器操作？

第二个问题是如果我使用 ajax 修改部分，在禁用时，排序停止工作。如果我替换为 html.actionlink 排序继续工作。

我有 jquery 1.9.1。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-11T11:51:24.493

问题是 JavaScript 解释器运行由`WebGrid`which 引用生成的脚本`jQuery`。但`jQuery`当时没有加载，所以你看到“jQuery”是未定义的消息。`@Scripts.Render`按照 Sheep 的建议在标题 ( ) 中加载 jQuery 脚本应该可以解决问题。

但是，我想知道这是否真的是微软想要的，因为他们默认在页面底部加载 jQuery。这通常可以避免延迟页面显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-26T17:28:44.553

我在使用 MVC 4 VS2012 时遇到了同样的问题，我的问题是我必须将我的 @Scripts.Render 指令移动到我的 _Layout.cshtml 的顶部。这解决了问题

@Scripts.Render 指令是否有可能将 jQuery javascript 文件放在 jqGrid 文件之后？如果您在浏览器中单击“查看源代码”并查看页面中包含 javascript 文件的顺序，则可以看到这一点。

jQuery 代码库必须始终放在 jqGrid 库之前，这是您在不是这种情况时收到的典型错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T20:20:04.720

你解决了吗？我在IE中遇到了同样的问题，我能够修复它。我必须将所有定义的脚本/css（我的在**_Layout.cshtml**中）移动到包（**BundleConfig.cs**）中，这似乎解决了问题。

```
 <head>
        <meta charset="utf-8" />
        <title>@ViewBag.Title - My ASP.NET MVC Application</title>
        <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />            
        @Styles.Render("~/Content/css")
        @Scripts.Render("~/bundles/modernizr")
        @Scripts.Render("~/bundles/jquery")
        @Scripts.Render("~/bundles/jqueryui")
    </head> 
```

# linux - SQLite 在文本检索中遗漏字符

> ID：15416878
> 
> 赞同：2
> 
> 时间：2013-03-14T18:03:34.087
> 
> 标签：linux, sqlite, g++

我正在将应用程序从 Windows 移植到 Linux。除了数据库之外，我已经设法使一切正常工作。每当我打电话`sqlite3_column_text16()`时，我都会得到一个缺少大多数字符的字符串。我不知道这种行为从何而来，因为它在 Windows 上运行得无可挑剔。

我没有做任何特别的事情，只是

```
wstring a(static_cast<wchar_t const *>(sqlite3_column_text16(stmt, 2))); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:56:15.773

Unicode 字符可以超过 16 位，因此除 Windows 之外的所有操作系统都使用 32 位类型的`wchar_t`.

您可以从 UTF-16 转换为 UTF-32（注意代理对），但取决于您的程序的设计方式，在任何地方都使用 UTF-8 可能更容易。

# angularjs - AngularJS 在服务器和客户端之间自动同步数据

> ID：15416879
> 
> 赞同：58
> 
> 时间：2013-03-14T18:03:35.373
> 
> 标签：angularjs, angular-resource

AngularJS 文档中有一些我似乎找不到的东西，或者我只是想念。

我正在使用 NodeJS 和 Express 在后端创建一个 Web 应用程序，并且我试图了解它如何在前端与 Angular 进行交互。特别是，我将有一个用于 Angular 的 JSON API 来从中获取信息。我希望前端始终是最新的。

我的问题是：

*   双向数据绑定功能是否意味着 Angular（$resource 或 $http）每隔*n* 秒自动从服务器获取数据？
*   它自然会使用长轮询、短轮询或 websockets 吗？
*   您是否需要 JQuery 来实现服务器-客户端同步，或者一切都可以用 Angular 完成？
*   您是否必须添加额外的代码才能使这种行为发生？我需要使用 $timeout 吗？

我似乎找到的每个示例都涉及客户端一次获取数据。不与服务器同步数据。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-03-14T18:53:58.347

AngularJS 中的双向绑定指的是数据模型（$scope）和你的视图（指令）。例如，如果模型中的数据发生变化，视图将自动更新。同样，如果用户修改视图中的数据，您的模型将自动更新。

与 Web 服务的交互是通过 $http 服务模块进行的。因此，要从您的 RESTful API 中获取数据，您可以执行以下操作：

```
$http.get('/someUrl').success(successCallback); 
```

$http 的完整文档在[AngularJS 站点上](http://docs.angularjs.org/api/ng.$http)。我想你会发现它与 jQuery 的 $.ajax 方法非常相似。您可以使用 Angular 的 $timeout 服务（基本上是 setTimeout 的包装器）轻松设置 $http.get() 进行短轮询。

对于 AngularJS 客户端和服务器 API 之间的实时更新，您可能需要查看[Socket.io](http://socket.io)。它使用 node.js 在浏览器和服务器之间创建实时套接字连接，并为旧版浏览器提供后备机制（闪存、长轮询）。GitHub 上有一个样板项目，演示了如何使用 Socket.io 设置 AngularJS： [https ://github.com/btford/angular-socket-io-seed](https://github.com/btford/angular-socket-io-seed)

回顾一下：

> 双向数据绑定功能是否意味着 Angular（$resource 或 $http）每隔 n 秒自动从服务器获取数据？

不，双向绑定是在 Angular 模型和视图之间。

> 它自然会使用长轮询、短轮询或 websockets 吗？

默认情况下，Angular 不包括任何这些。您必须自己设置它们。

> 您是否需要 JQuery 来实现服务器-客户端同步，或者一切都可以用 Angular 完成？

$http 在广义上是 Angular 的 jQuery 的 $.ajax 等价物

> 您是否必须添加额外的代码才能使这种行为发生？我需要使用 $timeout 吗？

使用 $timeout 进行短轮询，或者为长轮询和/或 websockets 推出自己的解决方案（请参阅[angular-socket-io-seed](https://github.com/btford/angular-socket-io-seed)项目）。

# ios - 如何在特定视图中停止视图旋转，而不是所有视图

> ID：15416880
> 
> 赞同：0
> 
> 时间：2013-03-14T18:03:39.917
> 
> 标签：ios, objective-c

我制作了应用程序并有很多视图如何在应用程序中的我的视图中停止在一个视图中旋转？

我能得到帮助吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:17:33.937

`UIViewCovtroller`您可以覆盖您正在使用的视图控制器或视图控制器的以下功能。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 return (interfaceOrientation == UIInterfaceOrientationPortrait ||
   interfaceOrientation == UIInterfaceOrientationLandscapeLeft || 
   interfaceOrientation == UIInterfaceOrientationLandscapeRight ||
   interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown );
} 
```

编辑

对于 ios 6 及更高版本，请使用以下方法

```
- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;// return only the supported orientation
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:39:13.317

如果您使用 TabViewController 或 NavigationController，其中某些视图未返回 UIInterfaceOrientationMaskPortrait，则它将不起作用。更改代码以使所有 ViewControllers 返回 UIInterfaceOrientationMaskPortrait。

或者，您可以使用此类别（如果使用 UINavigationController）

```
@interface UINavigationController (RotationPortrait)
    -(NSUInteger)supportedInterfaceOrientations;
@end

@implementation UINavigationController (RotationPortrait)
-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}
@end 
```

# c# - xml 删除所有值

> ID：15416881
> 
> 赞同：0
> 
> 时间：2013-03-14T18:03:41.237
> 
> 标签：c#, xml

我只想删除所有 xml 元素值并将名称空间保留在原始文件中。我发现了一些可以删除值的代码，但它也删除了命名空间。我怎样才能删除 xml 值？

```
 private static XElement RemoveAllNamespaces(XElement xmlDocument)
    {
        if (!xmlDocument.HasElements)
        {
            XElement xElement = new XElement(xmlDocument.Name.LocalName);
            xElement.Value = String.Empty;

            foreach (XAttribute attribute in xmlDocument.Attributes())
               xElement.Add(attribute);

            return xElement;
        }
        return new XElement(xmlDocument.Name.LocalName, xmlDocument.Elements().Select(el => RemoveAllNamespaces(el)));
    } 
```

# c++ - 重写常量表达式？

> ID：15416883
> 
> 赞同：3
> 
> 时间：2013-03-14T18:03:49.600
> 
> 标签：c++, templates, c++11, overloading, constexpr

是否可以根据某事物是否为常量表达式来覆盖函数和/或模板？

基本上我想做的是构建一个字符串类，如果传递一个静态字符串或一个指向一个的 constexpr 变量，它将简单地使用该指针，以后不会尝试删除它。

另一方面，如果给类一个缓冲区，它需要复制或采用它，然后在析构函数中删除它。

我认为最接近的可能是使用强类型定义并要求程序员在该类型定义下声明他/她的静态字符串。我想知道那些比我聪明的人是否能想出一些不需要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:38:23.383

> 基本上我想做的是构建一个字符串类，如果传递一个静态字符串或一个指向一个的 constexpr 变量，它将简单地使用该指针，以后不会尝试删除它。

我认为我们在这里面临一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。知道一个表达式是不是`constexpr`，并不能告诉你它是否适合`delete`.

我会说如果这个操作可能不合适，该函数不应该尝试猜测是否删除。我相信调用者应该注意这一点，可能使用智能指针来*处理*它。

换句话说，如果必须将指向的对象作为参数传递给函数，我会让函数接受左值引用，并让客户端取消引用指针。

我想说这种模式不仅在以下情况下有意义`delete`：更一般地说，如果一段代码**负责**决定如何生成或计算某些值（例如对象分配），那么还有**责任**正确执行一些相关或相应的操作（例如清理）应该属于同一段代码：

```
void foo(my_object& o)
{
    // ...
}

my_object o;
foo(o);
// The argument has automatic storage, no need to delete

my_object* pO = new my_object();
foo(*pO);

// The argument was allocated through operator new, we must
// deallocate it through a corresponding call to delete
delete pO; 
```

如果您真的希望在函数中进行清理*，*您应该为客户端提供一种方法来告诉函数如何执行它：

```
void foo(my_object& o, bool shouldDelete)
{
    // ...
    if (shouldDelete) { delete &o; }
}

my_object o;
foo(o, false); // "And don't try to deallocate this object please..."

my_object* pO = new my_object();
foo(*pO, true); // "Please, delete it for me" (we are delegating the
                // responsibility of performing the material action,
                // but not the one of knowing how!) 
```

为了获得更大的灵活性，您甚至可以接受一个可调用对象，这通过“*委派执行实质性操作的责任，而不是知道如何执行的责任*”，使我在上述评论中的意思更加清楚：

```
#include <functional>

void foo(my_object& o, std::function<void()> f = [] () { })
{
    // ...
    f();
}

int main()
{
    my_object o;
    foo(o); // "And don't do anything with this object when you're done..."

    my_object* pO = new my_object();
    foo(*pO, [=] () { delete pO; }); // "Please, do exactly this when done..."
} 
```

如果您不需要在运行时确定可调用对象的类型，您甚至可以考虑转为`foo()`函数*模板*。

* * *

最后，关于您最初关于如何**确定表达式是否为常量表达式的**问题，这通常是不可能的，但有一些技术可以在某些情况下帮助您 - 请注意它们的局限性。在这方面，您可能会发现[**StackOverflow 上的此问答**](https://stackoverflow.com/questions/13299394/is-is-constexpr-possible-in-c11)相关。

# sql-server - 插入包含另一个表的列的表中

> ID：15416884
> 
> 赞同：0
> 
> 时间：2013-03-14T18:03:56.727
> 
> 标签：sql-server, triggers, sql-insert

我有两个相互关联的表 (`feature`和`features`)，我想让开发人员对`id`一个表 ( `feature`) 拥有的 (主键) 透明。因此，为了插入一个表（`features`），您不必放入另一个表`id`（`feature`），您可以使用另一个表具有的辅助键。这是我的代码：

```
CREATE TABLE feature(
    id INTEGER NOT NULL,
    description VARCHAR(15) NOT NULL,
    value VARCHAR(15) NOT NULL,
    price MONEY NOT NULL,

    CONSTRAINT feature_pk PRIMARY KEY(id),
    CONSTRAINT feature_un UNIQUE(description, value),
    CONSTRAINT feature_ck_price CHECK(price >= 0)
);

CREATE TABLE features(
    name VARCHAR(20) NOT NULL,
    year NUMERIC(4) NOT NULL,
    feature_id INTEGER NOT NULL,

    CONSTRAINT features_pk PRIMARY KEY(name,year,feature_id),
    CONSTRAINT features_fk_model FOREIGN KEY(name,year) REFERENCES model(name,year),
    CONSTRAINT features_pk_feature FOREIGN KEY(feature_id) REFERENCES feature(id)
);

-- Trigger not working because the features table doesnt have the columns I'm trying to use.

CREATE TRIGGER trigger_features_get_feature_id
ON features
INSTEAD OF INSERT
AS
DECLARE
    @tr_features_name VARCHAR(20),
    @tr_features_year NUMERIC(4),
    @tr_features_description VARCHAR(15),
    @tr_features_value VARCHAR(15),
    @tr_features_feature_id INT
SELECT @tr_features_name=(SELECT name FROM INSERTED)
SELECT @tr_features_year=(SELECT year FROM INSERTED)
SELECT @tr_features_description=(SELECT description FROM INSERTED)
SELECT @tr_features_value=(SELECT value FROM INSERTED)
SELECT @tr_features_feature_id=(SELECT id FROM feature WHERE description = @tr_features_description AND value = @tr_features_value)
BEGIN
    PRINT  CONVERT(varchar(100),@tr_features_feature_id) + @tr_features_description + @tr_features_value + CONVERT(varchar(100),@tr_features_name) + @tr_features_year
    INSERT INTO features VALUES(@tr_features_name,@tr_features_year,@tr_features_id)
END 
```

我希望能够执行以下类型的插入，因此您可以使用该表的辅助键（和） `id`，而不是使用表的（自动生成的）。`feature``value``description`

```
INSERT INTO features(name,year,descripition,value) VALUES('Malibu', 2012, 'colour', 'black'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:41:30.930

我遵循@adam 所说的，这就是结果

```
CREATE PROCEDURE [dbo].procedure_insert_features 
@pr_car_name VARCHAR(20) = NULL,
@pr_car_year NUMERIC(4) = NULL,
@pr_feature_description VARCHAR(15),
@pr_feature_value VARCHAR(15)
AS
SET NOCOUNT ON
BEGIN
DECLARE @pr_feature_id AS INTEGER
    SET @pr_feature_id = (SELECT ID FROM [automobile].[dbo].[feature] WHERE description = @pr_feature_description AND value = @pr_feature_value);
    -- PRINT @pr_feature_id
    IF @pr_feature_id IS NOT NULL
        BEGIN
            INSERT INTO [automobile].[dbo].available_features VALUES(@pr_car_name,@pr_car_year,@pr_feature_id);
    END
ELSE
    BEGIN
        RAISERROR ('ID NOT FOUND, PLEASE CHECK SPELLING', 10,1);
    END
END 
```

# wpf - WPF 服务器数据绑定层架构

> ID：15416889
> 
> 赞同：0
> 
> 时间：2013-03-14T18:04:21.463
> 
> 标签：wpf, winforms, entity-framework, architecture

我使用 Windows 窗体已经超过 12 年了，现在我认为是时候学习 WPF 了。所以我在学习曲线过程中，但我对服务器数据绑定架构有一些疑问。

我构建的 Windows 窗体应用程序是用于 SaaS 的 Smartclients (clickonce)，并使用带有存储过程的 SQL Server 和通过读取数据集（来自存储过程）绑定的自定义对象，效果很好，但我知道它不是尖端技术，例如使用实体框架或其他 ORM，但它非常灵活。

现在有了 WPF，我在想使用使用数据集绑定的自定义对象不是最好的方法，所以不知道实体框架是否是正确的选择或其他架构。

希望有人能给我关于最佳实践的建议或指导。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:37:51.057

以正确的方式学习 WPF 可能会让人望而生畏。你可能想打破学习过程。

最初，我会从学习过程中抽象出数据层，让自己熟悉绑定的工作方式和验证简单实体对象的方式。一旦您对这一点以及 WPF 的其他优点感到满意，您就可以回过头来尝试弄清楚如何开发一个您可以使用的架构。

# asp.net - SAML 令牌仅在 10 小时后过期

> ID：15416890
> 
> 赞同：1
> 
> 时间：2013-03-14T18:04:31.880
> 
> 标签：asp.net, sharepoint-2010, wif, federation

我正在使用基于 WIF (.NET 4.0) 的自定义 STS，目前仅用于 SharePoint 应用程序。我在按预期工作的 HTTP 模块中设置了滑动到期代码，但安全令牌的生命周期为 10 小时（默认生命周期）。

```
/// <summary>
/// Handles the SessionSecurityTokenReceived event of the SingleSignOnModule control.
/// </summary>
/// <param name="sender">The source of the event.</param>
/// <param name="e">The <see cref="Microsoft.IdentityModel.Web.SessionSecurityTokenReceivedEventArgs"/> instance containing the event data.</param>
private void SingleSignOnModule_SessionSecurityTokenReceived(Object sender, SessionSecurityTokenReceivedEventArgs e)
{
    using (new SPMonitoredScope("SingleSignOnModule-SessionSecurityTokenReceived"))
    {
        if ((HttpContext.Current != null) && (FederatedAuthentication.SessionAuthenticationModule != null) && (e != null))
        {
            TimeSpan logonTokenCacheExpirationWindow = TimeSpan.FromSeconds(1);
            SPSecurity.RunWithElevatedPrivileges(delegate()
            {
                logonTokenCacheExpirationWindow = SPSecurityTokenServiceManager.Local.LogonTokenCacheExpirationWindow;
            });

            DateTime currentDateTime = DateTime.UtcNow;
            TimeSpan sessionLifetime = (e.SessionToken.ValidTo - e.SessionToken.ValidFrom);
            DateTime sessionValidFrom = e.SessionToken.ValidFrom;
            DateTime sessionValidTo = (e.SessionToken.ValidTo - logonTokenCacheExpirationWindow);

            if ((currentDateTime < sessionValidTo) && (currentDateTime > sessionValidFrom.AddMinutes(sessionLifetime.TotalMinutes / 2)))
            {
                e.SessionToken = FederatedAuthentication.SessionAuthenticationModule.CreateSessionSecurityToken(e.SessionToken.ClaimsPrincipal, e.SessionToken.Context, currentDateTime, currentDateTime.AddMinutes(sessionLifetime.TotalMinutes), e.SessionToken.IsPersistent);
                e.ReissueCookie = true;
            }
        }
    }
} 
```

最初，我认为这可以由 SPSecurityTokenServiceManager 设置。然而，这并没有改变什么。（PowerShell 片段）

```
Write-Output("[INFO] Updating the SPSecurityTokenServiceManager")
$stsMgr = Get-SPSecurityTokenServiceConfig

Write-Output("[INFO] Updating the SPSecurityTokenServiceManager to use session cookies.")
$stsMgr.UseSessionCookies = $true; #

Write-Output("[INFO] Updating the SPSecurityTokenServiceManager logon token cache expiration window")
$stsMgr.LogonTokenCacheExpirationWindow = New-TimeSpan -Days 0 -Hours 0 -Minutes 1

Write-Output("[INFO] Updating the SPSecurityTokenServiceManager service token cache expiration window.")
$stsMgr.ServiceTokenCacheExpirationWindow = New-TimeSpan -Days 0 -Hours 0 -Minutes 20

$stsMgr.Update() 
```

我无法设置 SessionSecurityTokenHandler.DefaultLifetime，因为它是只读的并设置为 10 小时。

```
// Type: Microsoft.IdentityModel.Tokens.SecurityTokenHandler
// Assembly: Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35
// Assembly location: C:\Windows\assembly\GAC_MSIL\Microsoft.IdentityModel\3.5.0.0__31bf3856ad364e35\Microsoft.IdentityModel.dll

namespace Microsoft.IdentityModel.Tokens
{
    public class SessionSecurityTokenHandler : SecurityTokenHandler
    {
        public static readonly TimeSpan DefaultLifetime = TimeSpan.FromHours(10.0);
        ...
    }
} 
```

SecurityToken.ValidTo 只有一个 getter 而不是一个 setter。

```
// Type: System.IdentityModel.Tokens.SecurityToken
// Assembly: System.IdentityModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089
// Assembly location: C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\v3.0\System.IdentityModel.dll

namespace System.IdentityModel.Tokens
{
    /// <summary>
    /// Represents a base class used to implement all security tokens.
    /// </summary>
    /// <filterpriority>2</filterpriority>
    public abstract class SecurityToken
    {
        ...

        /// <summary>
        /// Gets the last instant in time at which this security token is valid.
        /// </summary>
        /// 
        /// <returns>
        /// A <see cref="T:System.DateTime"/> that represents the last instant in time at which this security token is valid.
        /// </returns>
        /// <filterpriority>2</filterpriority>
        public abstract DateTime ValidTo { get; }

        ...
    }
} 
```

我还注意到，在ValidTo 中`FederatedAuthentication.SessionAuthenticationModule.CreateSessionSecurityToken`，默认的 ValidTo 属性设置为 ValidFrom + 默认令牌生命周期。我可以看到设置 SecurityToken.ValidTo 的唯一方法是创建安全令牌时。这是否意味着我需要实现一个自定义 SecurityToken 类，或者在 WIF 堆栈中的某个地方我可以拦截令牌的创建？到目前为止，我似乎只找到了以下事件处理程序，`FederatedAuthentication.SessionAuthenticationModule.SessionSecurityTokenCreated`但此时令牌已经创建，我可以在其中访问令牌，但正如预期的那样，该`SecurityToken.ValidTo`属性只是一个 getter。

`<microsoft.identityModel />`配置部分似乎也没有为此设置。有一个 persistenLifeTime 设置，但这仅适用于写入磁盘的 cookie。

```
<microsoft.identityModel>
      <federatedAuthentication>
        <wsFederation
            persistentCookiesOnPassiveRedirects="true" />
        <cookieHandler 
          persistentSessionLifetime="60.0:0:0" />
      </federatedAuthentication>
</microsoft.identityModel> 
```

此外，为了使加密/解密与服务器无关，加密使用证书。为此，我以编程方式将会话安全令牌处理程序添加到我的联合提供程序的 Global.asax 中。我只提到这一点是因为我想知道，如果我需要自定义`SecurityToken.ValidTo`，我是否可能需要创建一个自定义安全令牌处理程序类，或者我目前在 Global.asax 中是如何做到这一点的，我需要看看其他地方解决`SecurityToken.ValidTo`问题？

```
 <microsoft.identityModel>
    <service>
      <serviceCertificate>
        <certificateReference x509FindType="FindByThumbprint" findValue="myThumbPrint" />
      </serviceCertificate>
      ...
  </microsoft.identityModel>

namespace MyCompany.IdentityServer.FederationProvider
{
    public class Global : System.Web.HttpApplication
    {
        /// <summary>
        /// Handles the Start event of the Application control.
        /// </summary>
        /// <param name="sender">The source of the event.</param>
        /// <param name="e">The <see cref="System.EventArgs"/> instance containing the event data.</param>
        protected void Application_Start(object sender, EventArgs e)
        {
            FederatedAuthentication.ServiceConfigurationCreated += OnServiceConfigurationCreated;
        }

        /// <summary>
        /// Called when [service configuration created].
        /// </summary>
        /// <param name="sender">The sender.</param>
        /// <param name="e">The <see cref="Microsoft.IdentityModel.Web.Configuration.ServiceConfigurationCreatedEventArgs"/> instance containing the event data.</param>
        private void OnServiceConfigurationCreated(object sender, ServiceConfigurationCreatedEventArgs e)
        {
            // The session security token handler needs to be overridden so that encryption/decryption is not server dependent via DPAPI.
            // We need encryption/decryption to be server agnostic, so we make it certificate based instead.
            // See http://blogs.msdn.com/b/distributedservices/archive/2012/10/29/wif-1-0-id1073-a-cryptographicexception-occurred-when-attempting-to-decrypt-the-cookie-using-the-protecteddata-api.aspx

            // Use the <serviceCertificate> to protect the cookies that are
            // sent to the client.
            var sessionTransforms =
                new List<CookieTransform>(new CookieTransform[] {
                new DeflateCookieTransform(), 
                new RsaEncryptionCookieTransform(e.ServiceConfiguration.ServiceCertificate),
                new RsaSignatureCookieTransform(e.ServiceConfiguration.ServiceCertificate)  });

            var sessionHandler = new SessionSecurityTokenHandler(sessionTransforms.AsReadOnly());

            // This does nothing
            //sessionHandler.TokenLifetime = someLifeTime;

            e.ServiceConfiguration.SecurityTokenHandlers.AddOrReplace(sessionHandler);
        }
    }
} 
```

如果我创建一个自定义 securityTokenHandler，我看到我可以指定一个生命周期，但这看起来就像我在上面的 Global.asax 中尝试的那样， sessionHandler.TokenLifetime = ...

```
 <microsoft.identityModel>
    <service>
        <securityTokenHandlers>
          <add type="System.IdentityModel.Tokens.SessionSecurityTokenHandler, System.IdentityModel">
            <sessionTokenRequirement lifetime="TimeSpan" />
          </add>
        </securityTokenHandlers>
      ...
    </service>
</microsoft.identityModel> 
```

我只能假设我错过了一些明显的设置，或者是我唯一的行动方案来定制以获得`SecurityToken.ValidTo`我需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T13:00:39.970

在 STS 中 - 设置 SecurityTokenConfigurationConfiguration 类的 DefaultTokenLifetime 属性以覆盖 10h 默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T08:58:58.333

您可以使用此 powershell 脚本来增加它

```
$sts = Get-SPSecurityTokenServiceConfig
$sts.FormsTokenLifeTime = (New-TimeSpan -minutes <NUMBER_OF_MINUTES>)
$sts.Update()
Get-SPSecurityTokenServiceConfig 
```

# asp.net - 如何通过 Web 界面执行存储在服务器上的 .bat？

> ID：15416891
> 
> 赞同：1
> 
> 时间：2013-03-14T18:04:32.347
> 
> 标签：asp.net, html, web-applications, batch-file

全部，

请原谅这里缺少示例代码。我有一个 .bat 文件，它执行一个后台进程，刷新我正在设计的网页上的图形。我可以使用调度应用程序自动运行这个过程，但我想给用户手动控制。我想要网页上的一个按钮，用户可以单击该按钮在服务器上运行 .bat 文件。我在 html 和 C# 中对 aspx 文件进行编码。

到目前为止我尝试过的是：

```
<a href='program.bat'> Refresh </a> 
```

显然这不起作用：当我在 IE 浏览器上单击“刷新”并选择“运行”时，文件下载到本地驱动器上的临时文件夹并尝试在那里执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:20:21.487

如果您希望批处理文件在服务器上运行，那么您必须从您的 C# 代码中调用它，而不是在 html 中。

有很多方法可以做到这一点。最简单的是有一个从 调用它的 aspx 页面，`OnLoad`比如说 update.aspx：

```
<script runat="server">
    protected override void OnLoad( EventArgs e )
    {
        System.Diagnostics.Process.Start( @"c:\path\to\program.bat" );
    }
</script> 
```

然后你的 html 有一个常规`<a href="update.aspx">`标签。

当然，它也可以作为按钮按下等的回发来完成。关键是它是在服务器端完成的，在一些代码隐藏中。

# objective-c - 函数“OSReadBigInt8”的隐式声明在 c99 中无效

> ID：15416892
> 
> 赞同：1
> 
> 时间：2013-03-14T18:04:33.257
> 
> 标签：objective-c, endianness

OSReadBigInt8 似乎不像 OSReadBigInt16 和 OSReadBigInt32 那样存在。我会在目标 c 中将网络字节转换为我的平台的字节序吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:05:55.300

字节顺序对于单个字节是没有意义的。直接复制过来就好了。

```
uint8_t hostByte = networkByte; 
```

# wpf - 如何判断一个点是否是一条线的一部分？

> ID：15416893
> 
> 赞同：0
> 
> 时间：2013-03-14T18:04:34.303
> 
> 标签：wpf, math, geometry

给定一条由两点（A，B）定义的线，我如何判断另一个点（C）是否在该线上，WPF 是否具有内置函数，因为我使用路径来表示线还是我必须写一个函数。如果后者是真的，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:07:24.257

如果三个点形成的角度为 180 度，则它们是共线的。或者换一种说法，线段 AB、AC 和 BC 的斜率都相等。

求解斜率： `[AB].y/[AB].x = [AC].y/[AC].x`给出以下很好的函数：

```
bool AreCollinear(Point A, Point B, Point C) 
{
    double slopesDelta = (A.y - B.y) * (A.x - C.x) - (A.y - C.y) * (A.x - B.x);
    double tolerance = 1e-6;                // substitute for your own tolerance
    return tolerance > Math.Abs(slopesDelta);
} 
```

# asp.net - 如何在 RDLC 图表上显示水平目标线？

> ID：15416904
> 
> 赞同：1
> 
> 时间：2013-03-14T18:05:12.437
> 
> 标签：asp.net, rdlc

我有一个使用 RDLC 创建的图表。我想在下面显示一条代表目标的虚线。

![在此处输入图像描述](../Images/a5c37789212854e0cf5165eebd60eef5.png)

我想知道如何在图表上显示虚线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T05:02:30.313

正如您可能发现的那样，线控件的大小不允许动态设置。这是使用文本框代替的解决方法：

> 1.  将文本框添加到报告中，并将其调整为与图表相同的宽度。
> 2.  将`CanShrink`属性设置为`True`。
> 3.  在表达式中使用该`StrDup`函数，以便生成等于目标值的重复破折号字符串，例如： `=StrDup(CountRows("ReportItemsDataSet"),"-")`
> 4.  最后，尝试使用字体名称和粗细，使文本框的大小与图表相匹配。如果它太长并且换行，您可能需要调整字符数。这可以使用除法或减去一个常数值来缩短字符串。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T09:33:59.353

将第二列添加到您的数据集（例如称为目标），每个值设置为 95%（或其他）。

然后，将此作为第二个数据字段添加到图表中，并将其格式化为一条线。

# matlab - 如何将不同 .mat 文件中的变量存储到单独的矩阵中

> ID：15416905
> 
> 赞同：0
> 
> 时间：2013-03-14T18:05:23.450
> 
> 标签：matlab

我有一个文件夹，里面有一堆 .mat 文件，每个文件都有很多不同的变量。我想将（一个）单个变量存储到单独的矩阵中。我做了一个 for 循环，用它按名称加载每个文件，但这只给了我最后一个 .mat 文件。我是 Matlab 的新手，我假设有一个非常简单的方法可以解决这个问题，但我没有找到任何东西。

谢谢！

编辑：好的，所以我有一大堆 .mat 文件，每个文件都有一个变量 X。我想将所有 X 存储到与每个单独的 .mat 文件相对应的单独矩阵中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:23:59.973

`Load(filename)`它自己会将变量加载到工作空间中，但是，正如您所注意到的，每次您加载具有相同名称的新变量时，这些变量都会被覆盖。 `S = load(filename)`将变量加载到结构数组中。然后，您可以按名称访问每个变量并将其保存在数组中。例如：

```
% create two files containing variables with the same names    
x = 1;
y = 2;
save("test1.mat")

x = 10;
y = 20;
save("test2.mat")

% load the saved files and store the variables x and y in vectors
for i  = 1:2
    temp = load(["test", num2str(i), ".mat"]);
    xVec(i) = temp.x;
    yVec(i) = temp.y;
end 
```

作为对您的编辑的响应，您可以将每个文件中的所有变量保存在一个矩阵中，如下所示：

```
% load the saved files and store the contents of each file in a matrix
dataArray = {};
for i  = 1:2
    temp = load(["test", num2str(i), ".mat"]);
    dataArray{i} = [temp.x, temp.y];
end 
```

元胞数组`dataArray`将包含每个文件的矩阵。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:11:18.850

将文件加载到变量中

ld{ii} = 加载（文件名{ii} ）；

现在`ld{ii}`是一个结构，文件中的每个变量都有一个字段`filename{ii}`

# 3d - 从实体对象中生成 3d 点

> ID：15416907
> 
> 赞同：0
> 
> 时间：2013-03-14T18:05:31.593
> 
> 标签：3d, geometry

我曾经使用 2D 和一点点 OpenCV，现在想使用 3D 对象。所以首先我想知道如何从实体对象中生成 3d 点，因为说我有一个鸭子对象并且我想要一个 3d 点，我怎样才能生成 3d 点？

我在 Google 上进行了研发，发现点可以由激光、kinnect 传感器等生成，还有一个名为 Point Cloud 和 CGAL 的库也可用，但是在我有一些点之后就会出现。

所以首先我想知道如何生成 3d 点？它可以由激光生成，请您指导我设置使用激光源或任何其他介质获取数据的方法的正确方向。

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T20:02:46.547

还有另一种更便宜的方法可以从 3D 对象生成一组点，称为[structure-from-motion](http://phototour.cs.washington.edu/bundler/)。

非常简单地说，它将 3D 对象（或场景）的照片集合作为输入，并计算出对应关系（相同的视觉特征出现在不同的图像中），并使用多个这样的对应关系，估计这些特征点在3D。

有很多[开源项目](http://www.findbestopensource.com/tagged/reconstruction)处理重建。

希望这可以帮助。

# android - 在 Android Widget 中使用 GestureOverlayView 或类似的东西

> ID：15416908
> 
> 赞同：4
> 
> 时间：2013-03-14T18:05:37.690
> 
> 标签：android, widget, gesture

**是否可以创建一个包含 GestureOverlayView 的小部件？**

我的目标是创建一个在手势板左侧有 4 个按钮堆叠的小部件。在我的活动和片段中，我目前正在使用 GestureOverlayView，它允许我读取手势，并将它们与保存的手势模式库进行匹配，以确定特定的动作。

在项目的下一个阶段，我想将片段和活动中的手势窗格复制到放置在 Android 主屏幕上的小部件上。

我读过一篇文章说 Android 中允许使用 FrameLayouts，看到 GestureOverlayView 如何从 framelayout 扩展，我理想主义的自我认为这是可能的。

到目前为止，我已经获得了一个具有我希望使用的相同图像和布局的小部件，并且它在没有功能的情况下显示得很好。布局如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout_app"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight=".2"
        android:background="@drawable/draw_pad_background"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/call" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/text" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/app" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/contact" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight=".03"
        android:background="@drawable/button_divider"
        android:orientation="vertical" >

    </LinearLayout>

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight=".85" >

        <LinearLayout
            android:id="@+id/llSeparateLayer_app"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <!-- <LinearLayout android:layout_width="fill_parent" android:layout_height="1dip" 
                android:background="#FFFFFF" android:layout_centerVertical="true" /> <ImageView 
                android:layout_height="30dip" android:src="@drawable/call" android:layout_width="wrap_content" 
                android:scaleType="centerInside" android:layout_centerHorizontal="true" /> 
                <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content" 
                android:layout_centerInParent="true"> <ImageView android:layout_height="30dip" 
                android:src="@drawable/text" android:layout_width="wrap_content" android:scaleType="centerInside" 
                android:layout_marginTop="30dip" /> </LinearLayout> -->

            <LinearLayout
                android:id="@+id/llOpenDSR"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight=".5"
                android:background="@drawable/draw_pad_background"
                android:gravity="center" >
            </LinearLayout>

        </LinearLayout>

    </RelativeLayout>

</LinearLayout> 
```

如果我添加手势视图，它看起来像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/main_layout_app"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight=".2"
        android:background="@drawable/draw_pad_background"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/call" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/text" />

        <ImageView
            android:id="@+id/imageView3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/app" />

        <ImageView
            android:id="@+id/imageView4"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/contact" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight=".03"
        android:background="@drawable/button_divider"
        android:orientation="vertical" >

    </LinearLayout>

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:layout_weight=".85" >

        <LinearLayout
            android:id="@+id/llSeparateLayer_app"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <!-- <LinearLayout android:layout_width="fill_parent" android:layout_height="1dip" 
                android:background="#FFFFFF" android:layout_centerVertical="true" /> <ImageView 
                android:layout_height="30dip" android:src="@drawable/call" android:layout_width="wrap_content" 
                android:scaleType="centerInside" android:layout_centerHorizontal="true" /> 
                <LinearLayout android:layout_height="wrap_content" android:layout_width="wrap_content" 
                android:layout_centerInParent="true"> <ImageView android:layout_height="30dip" 
                android:src="@drawable/text" android:layout_width="wrap_content" android:scaleType="centerInside" 
                android:layout_marginTop="30dip" /> </LinearLayout> -->

            <LinearLayout
                android:id="@+id/llOpenDSR"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight=".5"
                android:background="@drawable/draw_pad_background"
                android:gravity="center" >
            </LinearLayout>

        </LinearLayout>

        <android.gesture.GestureOverlayView
            android:id="@+id/appGestures"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:eventsInterceptionEnabled="false"
            android:fadeOffset="400"
            android:gestureColor="@color/default_gesture_color"
            android:gestureStrokeAngleThreshold="0.1"
            android:gestureStrokeLengthThreshold="80"
            android:gestureStrokeSquarenessThreshold="0.1"
            android:gestureStrokeType="multiple"
            android:orientation="horizontal"
            android:uncertainGestureColor="@color/default_gesture_color_uncertain" >

            <ImageView
                android:id="@+id/image_notification"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center" />

        </android.gesture.GestureOverlayView>

    </RelativeLayout>

</LinearLayout> 
```

当我将此小部件添加到我的主屏幕时，我得到“问题加载小部件”

然后我找到了文档的这一部分：

“虽然小部件可以理解为“迷你应用程序”，但在开始设计小部件之前，需要了解一些重要的限制：

手势

由于小部件位于主屏幕上，因此它们必须与在那里建立的导航共存。与全屏应用程序相比，这限制了小部件中可用的手势支持。例如，虽然应用程序可能支持允许用户在屏幕之间横向导航的视图寻呼机，但该手势已经在主屏幕上用于在主面板之间导航。

可用于小部件的唯一手势是：

触摸垂直滑动”

[http://developer.android.com/design/patterns/widgets.html](http://developer.android.com/design/patterns/widgets.html)

那么这是否意味着我不能使用这个视图？

# html - somthing导致Opera主页上的底部滚动条

> ID：15416911
> 
> 赞同：0
> 
> 时间：2013-03-14T18:05:52.640
> 
> 标签：html, css, opera

在我的主页上，某些东西导致底部滚动条也出现在歌剧中，有什么想法吗？

我已经查看了所有元素，似乎没有一个过度延伸。这似乎只发生在歌剧和手机上。我努力了

```
body {
overflow-x: hidden;
} 
```

它删除了栏，但我担心如果你需要更小的分辨率，你将无法滚动？ [http://tshirthideout.com](http://tshirthideout.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:28:07.267

该问题是由以下 css`<div class="entry-content"></div>`在您的*最新设计* `article`网格中起作用引起的：

```
.entry-content { 
    width: 700px;
} 
```

以下任何解决方案都可以解决问题：

*   您可以删除未使用`.entry-content div`的 s
*   您可以删除上述 css 规则或设置适合其父容器的宽度
*   你可以设置`#content{overflow:hidden}`

# php - 在表单中嵌套表单

> ID：15416916
> 
> 赞同：0
> 
> 时间：2013-03-14T18:06:03.167
> 
> 标签：php, jquery, forms

这是一个有效的答案。我没有在表单中嵌套表单，而是创建了第二个表单并将其放置在我想要运行的位置。这很乏味，但它做了我想做的事。

我需要单独的查询在单独的窗口中打开。

我可以在 php.ini 中使用具有不同值的第二个提交按钮。但是我不能在不丢失第一个窗口的情况下强制该查询在第二个窗口中打开。

这是一个出租车调度界面。不想丢失第一页上来之不易的键入数据。进入第二个页面的查询对于验证在第一个窗口中收集的信息是必要的。可能，我们可能会在第二个窗口中运行查询以验证并找到地址，然后使用处理程序将找到的地址插入回第一个窗口中。

第二个窗口是必要的。我只想在第二个窗口中查询几个项目。

我可以使用 cookie 并使用链接在新窗口中启动查询。这可能比它的价值更麻烦。

有人看到另一种方法吗？我很擅长 PHP，只是学习 jquery，但对 ajax 一无所知？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr"><head>
<title>test / crtp</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script type="text/javascript" src="jquery.js"></script>

<script type="text/javascript">
$(document).ready(function () {
    position_mdiv()();
    $(window).resize(function() {
        position_mdiv();
    });
})

function position_mdiv(){

    var pos = $('#place_here').position();
    var width = $('#place_here').outerWidth();

    $('#div_2').css({
    position: "absolute",
    top: pos.top +2 + "px",
    left: (pos.left -300 + width) + "px"
});

}

</script>
<body>

<form id="CTRP_Form">
    <table border="1">
        <tr>
            <td>
                <div id="div_1">
                    <input id="fnam" name="fnam" form="CTRP_Form" type="text">                
                    <input type=submit>
                </div>
            </td>
            <td id="place_here" style="background:yellow;width:300px;padding:0px;border:solid 2px #CCC">
            </td>
        </tr>
    </table>
</form>

<div id="div_2">
    <form id="query_Form">
        <input id="MyQuery" name="MyQuery" form="query_Form" type="text">
        <input type=submit>
    </form>
</div>

</body>
</html> 
```

# jquery - 如何在浏览器中仅滚动顶层以覆盖底层？

> ID：15416919
> 
> 赞同：0
> 
> 时间：2013-03-14T18:06:16.483
> 
> 标签：jquery, css, html, scroll

在这个例子中，他们能够以某种方式在浏览器中滚动顶层以覆盖底层 div。如何使用 jquery/CSS 做到这一点？

[www.sevenly.org](http://www.sevenly.org/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:14:10.743

这是一个如何实现这一目标的想法。您可以根据自己的需要进行改进。背景层和元素一样是固定的`<nav>`。所有元素都有不同的值，`z-index`以使内容在背景和导航之间滚动。

**演示**

[http://jsfiddle.net/RjGsM/](http://jsfiddle.net/RjGsM/)

**HTML**

```
<div class="background"></div>
<nav></nav>
<div class="content"></div> 
```

**CSS**

```
div.background {
    position: fixed;
    z-index: 0;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    margin-top: 50px;
    background: red;
}

div.content {
    position: relative;
    z-index: 1;
    height: 100%;
    width: 100%;
    margin-top: 300px;
    background: blue;
}

nav {
    position: fixed;
    z-index: 2;
    top: 0;
    left: 0;
    height: 50px;
    width: 100%;
    background: black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:10:44.727

将 {position: fixed} 添加到您不想滚动的“层”（div）。确保它的 z-index 低于滚动的 div。

但请注意，移动兼容性不是很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:11:08.773

这个效果是通过给你的 body 元素添加一些内边距（sevenly.org 使用 600px - about right），然后在背景中绝对定位一个元素来实现的。

# javafx-2 - webEngine.getHistory() 在 TableView 中添加

> ID：15416924
> 
> 赞同：0
> 
> 时间：2013-03-14T18:06:42.690
> 
> 标签：javafx-2, javafx

我有一个代码可以在组合框中分配历史记录，但我需要在表中！

资源

```
final ComboBox locationHistory = new ComboBox();
    final WebHistory history = webEngine.getHistory();
    history.getEntries().addListener(new 
        ListChangeListener<WebHistory.Entry>(){
            @Override
            public void onChanged(ListChangeListener.Change<? extends WebHistory.Entry> c) {
                c.next();
                for (WebHistory.Entry e : c.getAddedSubList()) {
                    locationHistory.getItems().add(e.getUrl());
                }
            }
    }); 
```

它是..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:03:06.730

您的代码将与在列表中添加项目相同。如果你称你的表为“locationHistory”，那么

```
locationHistory.getItems().add(e.getUrl()); 
```

代码将在表中添加 WebHistory.Entry 类型的项目。

现在，您遇到了另一个麻烦：

您有一个 tableView，并且您有一个表中的项目列表 (getItems())。每一项对应表中的一行。要显示内容，以便将部分行分成列，您必须在表格的列列表中添加列，并为每列添加一个 cellValueFactory。每个值工厂都提供了为每个数据项提取需要显示在列中的信息的可能性（它获取有关数据项的信息，并返回信息的描述，该信息将显示在相应项的相应列中）。

此外，请在此处阅读有关如何为列添加单元格值工厂的信息：[javafx 中的单元格工厂](https://stackoverflow.com/questions/10519534/cell-factory-in-javafx)

# c# - 为什么 AutoResetEvent 不工作 BeginSend？

> ID：15416931
> 
> 赞同：0
> 
> 时间：2013-03-14T18:06:54.337
> 
> 标签：c#, multithreading, asynchronous, asyncsocket

我编写了一个服务器端应用程序，它使用`BeginSend()`和管理许多客户端`EndSend()`

在过去的几个小时里，我一直在努力确保不会`BeginSend()`为同一个客户拨打后续电话。

似乎以下代码片段没有达到我的目标，并且`SendAsyncData`在第一次完成之前不会阻止第二次调用。

我的错误是什么？

```
struct SendBuffer
{
    public const int BUFFER_SIZE = 1024 * 128;
    public byte[] BUFFER;
    public int sent;

    public SendBuffer(byte[] data)
    {
        BUFFER = new byte[data.Length];
        Buffer.BlockCopy(data, 0, BUFFER, 0, data.Length);
        sent = 0;
    }

    public void Dispose()
    {
        BUFFER = null;
        sent = 0;
    }
}

private void SendAsyncDataWithHeader(byte[] data
{
    int toSend;
    byte[] dataWithHeader = Combine(BitConverter.GetBytes(data.Length), data);

    SendAutoResetEvent.WaitOne();
    sendBuffer = new SendBuffer(dataWithHeader);

    if (sendBuffer.BUFFER.Length - sendBuffer.sent > SendBuffer.BUFFER_SIZE)
        toSend = SendBuffer.BUFFER_SIZE;
    else
        toSend = sendBuffer.BUFFER.Length - sendBuffer.sent;

    try
    {
        socket.BeginSend(sendBuffer.BUFFER, 0, toSend, SocketFlags.None, sendCallback, null);
    }
    catch (SocketException se)
    {
        switch (se.SocketErrorCode)
        {
            case SocketError.ConnectionAborted:
            case SocketError.ConnectionReset:
                if (Disconnected != null)
                {
                    Disconnected(this);
                }
                break;
        }
    }
    catch (ObjectDisposedException)
    {
    }
    catch (NullReferenceException ex)
    {
    }
    catch (Exception ex)
    {
        Server.logger.Error(ex);
        Disconnected(this);
    }
}

void sendCallback(IAsyncResult ar)
{
    int bytesSent;
    try
    {
        bytesSent = socket.EndSend(ar);
        if (bytesSent == 0)
        {
            if (Disconnected != null)
            {
                Disconnected(this);
                return;
            }
        }
        sendBuffer.sent += bytesSent;
        if (sendBuffer.sent == sendBuffer.BUFFER.Length)
        {
            sendBuffer.Dispose();

            SendAutoResetEvent.Set();
            Server.logger.Info("set {0}", userName);
        }
        else
        {
            int toSend;
            if (sendBuffer.BUFFER.Length - sendBuffer.sent > SendBuffer.BUFFER_SIZE)
                toSend = SendBuffer.BUFFER_SIZE;
            else
                toSend = sendBuffer.BUFFER.Length - sendBuffer.sent;

            socket.BeginSend(sendBuffer.BUFFER, sendBuffer.sent, toSend, SocketFlags.None, sendCallback, null);
        }
    }
    catch (SocketException se)
    {
        switch (se.SocketErrorCode)
        {
            case SocketError.ConnectionAborted:
            case SocketError.ConnectionReset:
                if (Disconnected != null)
                {
                    Disconnected(this);
                    return;
                }
                break;
        }
    }
    catch (ObjectDisposedException ex)
    {
    }
    catch (Exception ex)
    {
        Server.logger.Error(ex);
        Disconnected(this);
    }
} 
```

# ruby - 让 ruby 自动查找 http 的代理/身份验证设置的值？

> ID：15416936
> 
> 赞同：0
> 
> 时间：2013-03-14T18:07:12.833
> 
> 标签：ruby, windows, http, proxy, mechanize-ruby

我正在使用 ruby​​ gem Mechanize 通过代理访问网站并且它正在工作发现我只是想知道是否可以让 ruby​​ 自动填写我的代理设置。

```
require 'mechanize'

agent = Mechanize.new do|a|
  a.set_proxy('proxy', port, 'YOUR_USER_NAME', 'YOUR_PASS')
end 
```

我知道如何获取用户名和代理，但不知道密码，因为代理需要身份验证。

```
ENV['username']
ENV['http_proxy'] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:40:29.213

您的环境中应该有一个变量`HTTP_PROXY`，其中包含您需要的所有内容，例如：

```
HTTP_PROXY = http://username:password@proxyserver.domain.com 
```

然后，你应该有一个方法可以传递这个字符串，或者如果你不这样做，一些解析就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T20:02:44.080

原来我需要的是：

```
require 'mechanize'

agent = Mechanize.new do|a|
 a.set_proxy('proxy', port, 'YOUR_USER_NAME')
end 
```

我想我只是假设我需要密码，但看起来你只需要你的用户名。！也许机械化使用NTLM或类似的东西？

# c++ - 清除和调整向量 - C++

> ID：15416937
> 
> 赞同：1
> 
> 时间：2013-03-14T18:07:13.493
> 
> 标签：c++, vector, resize

我正在尝试制作一个向量，然后输入一个while循环，使用该向量，然后在每个循环结束时调整向量的大小。所以我决定`my_vector.clear()`在循环结束时制作，在循环`my_vector.resize(newSize)`开始时制作。这是一个示例代码：

```
typedef struct my_type{
    int numNextDom;
    bool knockedDown;
} my_type;

int main (int argc, char * const argv[]) {
    int i, testCase, totalDom, numLines, num_dom=0, num_next_dom=0, aux_map_int = 0, linesScanned = 0;
    bool firstTime=true;

    std::cin>>testCase;
    std::vector<my_type> my_vector;

    while(aux_map_int < testCase){

        std::cin>>totalSize>>numLines;

        my_vector.resize(totalSize);

        while (linesScanned < numLines) {
            std::cin>>num_dom>>num_next_dom;

            if(firstTime){
                my_vector[0].numNextDom = totalSize;
                my_vector[0].knockedDown = true;
                firstTime=false;
            }
            my_vector[num_dom].numNextDom = num_next_dom;
            my_vector[num_dom].knockedDown = false;

            linesScanned++;
        }

        std::cout << giveResult(my_vector) << std::endl;
        aux_map_int++;
        my_vector.clear();
    }

    return 0;
} 
```

所以你看，在我使`my_vector.clean()`向量变为 os 大小 1 之后，但是当循环重新完成时，`my_vector`大小保持为 1 并且不执行`my_vector.resize(totalSize)`. 我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:26:48.670

我运行了您的代码，并且正确调整了向量的大小。

我认为你的问题是你`linesScanned`在第一次测试后没有重置，所以如果`totalSize`循环的第二次迭代比第一次迭代小，你根本不会进入第二次循环的主体。即使第二次更大，您也不会得到您期望的行为。

您可以通过添加`linesScanned = 0;`作为外循环的第一条语句来解决此问题，即紧随其后`while(aux_map_int < testCase){`

另外，我建议您使用 for 循环，因为它们更干净，并且可以帮助您避免将来出现此类错误。

这是我测试的程序：

```
#include <iostream>
#include <vector>

int totalSize = 0;

typedef struct my_type{
    int numNextDom;
    bool knockedDown;
} my_type;

int giveResult(std::vector<my_type>);

int main (int argc, char * const argv[]) {
    int i, testCase, totalDom, numLines, num_dom=0, num_next_dom=0, aux_map_int = 0, linesScanned = 0;
    bool firstTime=true;

    std::cin>>testCase;
    std::vector<my_type> my_vector;

    while(aux_map_int < testCase){

        std::cin>>totalSize>>numLines;

        my_vector.resize(totalSize);
        std::cout << "my_vector.size(): " << my_vector.size() << std::endl;
        std::cout << "linesScanned: " << linesScanned << std::endl;
        std::cout << "numLines: " << numLines << std::endl;

        while (linesScanned < numLines) {
            std::cin>>num_dom>>num_next_dom;

            if(firstTime){
                my_vector[0].numNextDom = totalSize;
                my_vector[0].knockedDown = true;
                firstTime=false;
            }
            my_vector[num_dom].numNextDom = num_next_dom;
            my_vector[num_dom].knockedDown = false;

            linesScanned++;
        }

        std::cout << giveResult(my_vector) << std::endl;
        aux_map_int++;
        my_vector.clear();
    }

    return 0;
}

int giveResult(std::vector<my_type>) {
    return 0;
} 
```

这是来自我的控制台的交互会话：

```
2
2 2
my_vector.size(): 2
linesScanned: 0
numLines: 2
5 5
6 6
0
3 2
my_vector.size(): 3
linesScanned: 2
numLines: 2 
```

在这里您可以看到linesScanned 没有重置并且会导致问题。

这是您的主要功能的正确（关于此问题）版本：

```
int main (int argc, char * const argv[]) {
    int i, testCase, totalDom, numLines, num_dom=0, num_next_dom=0, aux_map_int = 0, linesScanned = 0;
    bool firstTime=true;

    std::cin>>testCase;
    std::vector<my_type> my_vector;

    while(aux_map_int < testCase){
        linesScanned = 0;
        std::cin>>totalSize>>numLines;

        my_vector.resize(totalSize);

        while (linesScanned < numLines) {
            std::cin>>num_dom>>num_next_dom;

            if(firstTime){
                my_vector[0].numNextDom = totalSize;
                my_vector[0].knockedDown = true;
                firstTime=false;
            }
            my_vector[num_dom].numNextDom = num_next_dom;
            my_vector[num_dom].knockedDown = false;

            linesScanned++;
        }

        std::cout << giveResult(my_vector) << std::endl;
        aux_map_int++;
        my_vector.clear();
    }

    return 0;
} 
```

我希望这能清除它。

-斯坦

# google-app-engine - “默认”提供的 App Engine 版本似乎不一致，并在更改默认版本后抖动一段时间

> ID：15416938
> 
> 赞同：6
> 
> 时间：2013-03-14T18:07:22.077
> 
> 标签：google-app-engine

我们的应用程序提供一个简单地报告 os.environ['CURRENT_VERSION_ID'] 的端点。我们将其用于一种监视类型，该监视跟踪当前将哪个版本设置为“默认版本”。

从 3 月 5 日下午开始，我们注意到在向该端点发出请求时出现了奇怪的行为。在我们更改默认版本后不久（通过“appcfg.py set_default_version”），对该端点的重复请求将在先前的默认值和新的默认值之间翻转。这会持续大约 10 分钟，之后所有后续请求将始终报告新的、正确的默认版本。因此，在这 10 分钟的窗口中，对我们正常默认 URL 的请求似乎会不一致地报告旧版本或新版本。

这似乎是行为的改变。我们应用程序的默认版本之前的更改发生在 3 月 1 日，并且在该日期之前的所有其他版本更改都没有表现出这种翻转行为。

[（从我队友](https://plus.google.com/110287455381476170305/about)的[错误报告](https://code.google.com/p/googleappengine/issues/detail?id=8970)中窃取的问题）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T18:20:01.703

首先介绍一下背景：

*   App Engine 在分布式基础架构中运行您的应用程序：您的应用程序接收的流量越多，在任何给定时间运行您的代码的实例（应用服务器）就越多
*   出于可扩展性/简单性和许多其他原因，App Engine 没有实现客户端 <-> 应用服务器粘性；因此，对默认应用版本的任何请求都可以由任何应用服务器处理

更改应用程序的默认版本后，通过管理控制台更改标记为默认的版本，或部署与当前默认相同的主要版本，有关此更改的信息将通过 App Engine 基础架构传播。随着应用服务器意识到新版本，它们开始加载新版本的应用程序代码。一旦给定的应用服务器准备就绪，它将开始提供新版本的代码。

在一段时间内，一些应用服务器将提供以前的默认版本，而其他应用服务器已经在提供新的默认版本。因此，预计任何具有大量流量的应用都会看到您描述的行为。

我们一直在努力减少这些版本更改所花费的时间，但我们最关心的是确保过渡顺利进行。如果应用程序有大量实例为以前的版本提供服务，App Engine 需要确保始终有足够的容量（结合新旧应用服务器）来服务所有当前流量。应用程序的先前版本和新版本可能需要不同数量的应用服务器（由于版本之间的性能差异），这是无法“立即”安全地执行转换的另一个原因。

If you'd like more control over the process, you can use App Engine's [Traffic Splitting](https://developers.google.com/appengine/docs/adminconsole/trafficsplitting) feature. In a step wise fashion you can increase the percentage of user traffic you'd like to direct at the new version. App Engine will then provide version stickiness based on either client IP address or a cookie (for web apps). You can also use Traffic Splitting to 'canary' a new version of the application on some percentage (say 1%) of clients.

# c# - 如何使 Windows Phone 列表框不可滚动？

> ID：15416944
> 
> 赞同：1
> 
> 时间：2013-03-14T18:07:32.553
> 
> 标签：c#, windows-phone-7, xaml, listbox

我的 Windows Phone 应用程序中有一个列表框。现在，列表框是可滚动的（默认情况下），所以如果我用手指触摸列表框，它就会滚动。我想让它不可滚动（即当我触摸并拖动列表框时，什么也没有发生）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:18:47.453

[WP7](https://stackoverflow.com/questions/3679326/wp7-prevent-listbox-scrolling)中的类似问题防止列表 框滚动 独立于页面的列表框滚动被锁定，但仍允许页面滚动（如有必要）

listBox 控件应该有一个“可滚动”或类似的属性，您可以将其设置为 false 以防止 listBox 滚动。

# delphi - Delphi XE3 可以像 Soap 一样访问 WCF 数据服务吗？（无需手动解析 XML）

> ID：15416956
> 
> 赞同：1
> 
> 时间：2013-03-14T18:08:05.703
> 
> 标签：delphi, wcf-data-services, delphi-xe3, wcf-data-services-client

我们即将购买Delphi XE3，但是自从安装了demo之后，我注意到我无法将服务引用添加到WCF 数据服务中。我尝试使用服务的元数据 URL 和服务的基本 URL，但没有成功。

我们希望本机支持此功能，以处理从 Atom 提要到客户端对象的序列化/反序列化。

Delphi 的营销材料建议原生支持 WCF 数据服务，如果我们必须构建 http 请求，然后手动解析返回的 XML，那么我们还不如从 Delphi 2010 升级。

有人对这个有经验么？我只需要输出json吗？我需要使用一个特定的组件来处理这个而不是 Delphi 中的 WSDL 导入吗？

谢谢

# variables - 在 Nginx 定位规则中使用变量

> ID：15416957
> 
> 赞同：72
> 
> 时间：2013-03-14T18:08:07.677
> 
> 标签：variables, nginx, webserver

在 Nginx 中，我试图定义一个变量，它允许我为我的所有位置块配置一个子文件夹。我这样做了：

```
set $folder '/test';

location $folder/ {
   [...]
}

location $folder/something {
   [...]
} 
```

不幸的是，这似乎不起作用。虽然 Nginx 没有抱怨语法，但它在请求时返回 404 `/test/`。如果我明确写入文件夹，它可以工作。那么如何在位置块中使用变量呢？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-03-15T12:46:05.020

你不能。Nginx 并不真正支持配置文件中的变量，它的开发人员嘲笑所有要求添加此功能的人：

> “与普通静态配置相比，[变量] 的成本相当高。[A] 宏扩展和“包含”指令应该与 [with] 一起使用，例如 sed + make 或任何其他常见的模板机制。” [http://nginx.org/en/docs/faq/variables_in_config.html](http://nginx.org/en/docs/faq/variables_in_config.html)

您应该编写或下载一个小工具，允许您从占位符配置文件生成配置文件。

**更新**下面的代码仍然有效，但我已经将它全部打包到一个名为[Configurator](https://github.com/danack/Configurator)的小型 PHP 程序/库中，也在[Packagist](https://packagist.org/packages/danack/configurator)上，它允许从模板和各种形式的配置数据轻松生成 nginx/php-fpm 等配置文件.

例如，我的 nginx 源配置文件如下所示：

```
location  / {
    try_files $uri /routing.php?$args;
    fastcgi_pass   unix:%phpfpm.socket%/php-fpm-www.sock;
    include       %mysite.root.directory%/conf/fastcgi.conf;
} 
```

然后我有一个定义了变量的配置文件：

```
phpfpm.socket=/var/run/php-fpm.socket
mysite.root.directory=/home/mysite 
```

然后我使用它生成实际的配置文件。看起来你是一个 Python 人，所以基于 PHP 的示例可能对你没有帮助，但对于其他使用 PHP 的人来说：

```
<?php

require_once('path.php');

$filesToGenerate = array(
    'conf/nginx.conf' => 'autogen/nginx.conf',
    'conf/mysite.nginx.conf' => 'autogen/mysite.nginx.conf',
    'conf/mysite.php-fpm.conf' => 'autogen/mysite.php-fpm.conf',
    'conf/my.cnf' => 'autogen/my.cnf',
);

$environment = 'amazonec2';

if ($argc >= 2){
    $environmentRequired = $argv[1];

    $allowedVars = array(
        'amazonec2',
        'macports',
    );

    if (in_array($environmentRequired, $allowedVars) == true){
        $environment = $environmentRequired;
    }
}
else{
    echo "Defaulting to [".$environment."] environment";
}

$config = getConfigForEnvironment($environment);

foreach($filesToGenerate as $inputFilename => $outputFilename){
    generateConfigFile(PATH_TO_ROOT.$inputFilename, PATH_TO_ROOT.$outputFilename, $config);
}

function    getConfigForEnvironment($environment){
    $config = parse_ini_file(PATH_TO_ROOT."conf/deployConfig.ini", TRUE);
    $configWithMarkers = array();
    foreach($config[$environment] as $key => $value){
        $configWithMarkers['%'.$key.'%'] = $value;
    }

    return  $configWithMarkers;
}

function    generateConfigFile($inputFilename, $outputFilename, $config){

    $lines = file($inputFilename);

    if($lines === FALSE){
        echo "Failed to read [".$inputFilename."] for reading.";
        exit(-1);
    }

    $fileHandle = fopen($outputFilename, "w");

    if($fileHandle === FALSE){
        echo "Failed to read [".$outputFilename."] for writing.";
        exit(-1);
    }

    $search = array_keys($config);
    $replace = array_values($config);

    foreach($lines as $line){
        $line = str_replace($search, $replace, $line);
        fwrite($fileHandle, $line);
    }

    fclose($fileHandle);
}

?> 
```

然后 deployConfig.ini 看起来像：

```
[global]

;global variables go here.

[amazonec2]
nginx.log.directory = /var/log/nginx
nginx.root.directory = /usr/share/nginx
nginx.conf.directory = /etc/nginx
nginx.run.directory  = /var/run
nginx.user           = nginx

[macports]
nginx.log.directory = /opt/local/var/log/nginx
nginx.root.directory = /opt/local/share/nginx
nginx.conf.directory = /opt/local/etc/nginx
nginx.run.directory  = /opt/local/var/run
nginx.user           = _www 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2020-04-29T23:22:54.620

这已经晚了很多年，但是自从我找到解决方案后，我将在此处发布。通过使用[地图](https://nginx.org/en/docs/http/ngx_http_map_module.html)，可以执行所要求的操作：

```
map $http_host $variable_name {
    hostnames;

    default       /ap/;
    example.com   /api/;
    *.example.org /whatever/;
}

server {
    location $variable_name/test {
        proxy_pass $auth_proxy;
    }
} 
```

如果您需要跨多个服务器共享同一个端点，您还可以通过简单地默认值来降低成本：

```
map "" $variable_name {
    default       /test/;
} 
```

Map 可用于根据字符串的内容初始化变量，并且可以在`http`范围内使用，允许变量是全局的并且可以跨服务器共享。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-21T15:30:40.380

你可以做与你提议的相反的事情。

```
location (/test)/ {
   set $folder $1;
}

location (/test_/something {
   set $folder $1;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-02-26T03:42:17.653

@danack 的 PHP 生成脚本的修改 python 版本。它生成`build/`位于父目录中的所有文件和文件夹，替换所有`{{placeholder}}`匹配项。您需要在运行脚本之前`cd`进入。`build/`

*文件结构*

```
build/
-- (files/folders you want to generate)
-- build.py

sites-available/...
sites-enabled/...
nginx.conf
... 
```

*构建.py*

```
import os, re

# Configurations
target = os.path.join('.', '..')
variables = {
  'placeholder': 'your replacement here'
}

# Loop files
def loop(cb, subdir=''):
  dir = os.path.join('.', subdir);

  for name in os.listdir(dir):
    file = os.path.join(dir, name)
    newsubdir = os.path.join(subdir, name)

    if name == 'build.py': continue
    if os.path.isdir(file): loop(cb, newsubdir)
    else: cb(subdir, name)

# Update file
def replacer(subdir, name):
  dir  = os.path.join(target, subdir)
  file = os.path.join(dir, name)
  oldfile = os.path.join('.', subdir, name)

  with open(oldfile, "r") as fin:
    data = fin.read()

  for key, replacement in variables.iteritems():
    data = re.sub(r"{{\s*" + key + "\s*}}", replacement, data)

  if not os.path.exists(dir):
    os.makedirs(dir)

  with open(file, "w") as fout:
    fout.write(data)

# Start variable replacements.
loop(replacer) 
```

# angularjs - AngularJS 和干燥

> ID：15416959
> 
> 赞同：3
> 
> 时间：2013-03-14T18:08:08.833
> 
> 标签：angularjs

我在尝试维护 DRY [不要重复自己] 的概念时遇到了 AngularJS 的问题。我希望我做错了什么，有人可以指出我的错误。

一家公司销售卡车和汽车。**这两个项目具有相似和不同的属性。添加到库存时需要一些，而另一种则不需要，所以看来我必须创建两种形式，一种用于卡车和汽车**。好的，没问题。但这是我感到困惑的地方。

卡车和汽车都有一个名为传输的属性，所以我更愿意创建一个“模板”来添加传输类型，并通过 ng-include 将其嵌入到“添加卡车”和“添加汽车”表单中。但是因为我我正在使用 ng-include，模板本身不在主窗体的范围内，我需要限定它的 ng-model。

如果我在传输模板的输入中使用它：**ng-model="newTruck.Tramission** "，则添加新卡车的表单在范围内并且工作正常，但显然不是我想共享此模板的汽车表单. 所以我想用这个：**ng-model="$parent.Transmission"**这样模板可以被任何一种形式使用，但这不起作用。

**这可能会导致不必要的臃肿网站，即 StockNumber 模板、Interior、Exterior Colors 模板等。**

那么，我是否正确，我需要违反 DRY 并为每个具有此类属性的不同产品使用相同的模板，例如“添加传输”模板，还是我做错了什么？

**编辑：如果我没有说清楚，传输是汽车和卡车的关联类，而不是原始属性。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T09:47:17.820

我认为，`ng-init`Angularjs 中内置了这种场景。根据您提到的内容，我将假设您有两种对象，但这些对象的某些部分将是相同的（一种混合）。

因此，您将有一个名为的类`Car`和一个名为的类，`Truck`但它们都包含一个名为的对象`transmission`，用户将在其中编辑该对象`ng-include`。为了在内部编辑相同的传输对象`ng-include`并使控制器与父对象无关，`transmission`您如何定义合同？

```
<div ng-controller="CarCtrl">
    <div>{{car.name}}</div>
    <div ng-include="'transmission.html'" >
    </div>
</div>

<div ng-controller="TruckCtrl">
    <div>{{truck.name}}</div>
    <div ng-include="'transmission.html'">
    </div>
</div> 
```

现在这就是你的`transmission.html`样子：

```
<div class="transmission" ng-controller="TransmissionCtrl">
<!-- you want to be able to do model.transmission.type in here and be agnostic of whether model is car or truck-->
    {{model.transmission.type}}
</div> 
```

现在`ng-init`魔法来了。

只需添加与您`ng-init="model = car"`相同的级别`ng-include`即可。

```
<div ng-controller="CarCtrl">
    <div>{{car.name}}</div>
    <div ng-init="model = car" ng-include="'transmission.html'" >
    </div>
</div> 
```

因此，现在您`TransmissionCtrl`对正在编辑其传输的模型是不可知的。干燥？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-26T07:36:46.273

视图和控制器不应使用“汽车”或“卡车”，而应使用更通用的“车辆”。将每种车辆类型的可能值存储在配置对象中，并在需要时引用这些值。

通过具有车辆类型属性来处理差异。

```
<div ng-show="vehicle.type == 'car'">   {{config.carTransmissionTypes}} </div>
<div ng-show="vehicle.type == 'truck'"> {{config.truckTransmissionTypes}} </div> 
```

# c++ - 读取 C++ 类对象

> ID：15416960
> 
> 赞同：2
> 
> 时间：2013-03-14T18:08:08.957
> 
> 标签：c++

用于读取类对象（这里“**艺术**”是对象的名称）。我必须遵循以下代码filin 是输入和输出流。

```
filin.write((char*)&arts,sizeof(arts));
filin.read((char*)&arts,sizeof(arts)); 
```

你能解释一下这些。

1.  为什么我们通过添加 (char *) 来键入 caste 以及为什么要添加到字符指针。

2.  为什么在艺术之前添加 & 符号？

3.  为什么要在最后添加 sizeof(arts) ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:28:34.857

> 为什么我们通过添加 (char *) 来键入 caste 以及为什么要添加到字符指针。

`char`是一个错误的名字。这是一个谎言——它应该被调用`byte`，因为它就是：一个*字节*。您正在使用的[`read`](http://en.cppreference.com/w/cpp/io/basic_istream/read)and[`write`](http://en.cppreference.com/w/cpp/io/basic_ostream/write)函数在字节缓冲区上工作——这是为了使它们成为通用的，即与任意类型一起工作（尽管这也是一个谎言）。

> 为什么在艺术之前添加 & 符号？

`&`获取对象的内存地址。通过写入`(char*) &obj`，我们有效地获取（地址）位于给定对象下的字节缓冲区——换句话说，以字节为单位的对象表示。

> 为什么要在最后添加 sizeof(arts) ？

`sizeof(obj)`告诉我们`obj`内存有多大——即它在字节缓冲区中占用了多少字节。给定起始地址（见前一点）和大小，我们可以完全描述对象在内存中的物理存在，我们可以使用它来将对象从主内存传输到文件中，反之亦然。

然而，正如我之前所说，这是一个谎言。C++ 实际上有许多类型的对象不支持这种复制它们的内存，因为这些对象实际上对它们所在的内存做出了假设。在最简单的情况下，它们包含一个指针成员，在复制字节表示之后对象，仍然指向旧位置，因此不再有用：

```
struct some_class {
    some_class* self;

    some_class() : self(this) { }
}; 
```

这个类有一个成员——<code>self——指向它自己。逐字节复制此类的实例将破坏此标识并使对象无用（复制后副本的`self`成员*仍将*指向原始对象，而不是副本）。

这种逐字节复制也称为*浅拷贝*——与可以正确复制上述指针的*深拷贝相反。*

您显示的代码在 C++ 中通常不安全。事实上，它存在的问题比我迄今为止提到的还要多，而且在大多数情况下，对象的（反）序列化有更好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T18:15:20.203

回答您的问题：

1 -`write`并`read`取一个`char`指针 ( `char *`)。这意味着它一个字节一个字节`write`地`read`工作，并且读取或写入与函数的第二个参数给出的字节数完全相同的字节数。

2-`&`是`address of`。这意味着您正在获取 的地址`arts`，然后将地址转换为`char`指针作为`(char*)&arts`。

3 -`sizeof()`返回其参数的长度（长度是指**一个实例在内存中占用的大小**）。在这种情况下，您会得到 和 的大小，`arts`告诉`write`和，或`read`有多少位。`write``read`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T18:22:42.893

首先，`&`操作员获取您的艺术品的指针。假设您的对象`arts`是类型`Foo`：

```
Foo arts; 
```

然后`&arts`是类型`Foo*`。

您代码中的方法`write()`似乎处理字节数组（通常需要通过网络传输或写入文件），因此它使用指向`char`（写为`char*`）的指针，因为类型`char`的大小为 1 字节，（嗯，在我知道的任何平台上），因此，如果您从 char 指针中添加或减去，您可以将指针前进或倒退该字节数（在 C++ 中，指针算术以对象字节大小的倍数进行） .

当您转换 from`Foo*`时，`char*`您实际上是在告诉编译器将该指针视为 1 字节的倍数，而不是对象完整大小的倍数。这是处理字节数组的函数的习惯做法，就像你的`write()`and `read()`函数中的情况一样。

最后，在第一个参数中，您只传递了一个指针，一个内存地址。因此，要让函数`write()`知道它必须从指针读取多少字节，您必须传入对象的长度（第二个参数）。该运算符`sizeof(arts)`在编译时转换为对象的字节大小`arts`（它也可以采用类型，因此如果是 的类型`sizeof Foo`，则写入将是等效的）。`Foo``arts`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T18:29:29.313

从第二个问题开始更容易。运算符 & 只是返回一个指向内存中对象的指针。然后我们将指向arts对象的指针转换为指向char的指针。Char 具有特定机器上最小可寻址内存单元的大小，它可以是 8 位（最常见），越来越少。我们也称它为“字节”。最后我们调用 sizeof 函数，它返回对象的大小，表示为存储该对象所需的最小内存单元（在我们的例子中是字符）的数量。在该函数接收指向内存中某个位置的指针以及要写入或读取的字节数之后。它需要知道的一切。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T18:22:52.017

您发布的代码将对象存储在流中，然后从流中检索它。让我们把代码分成几块。

```
filin.write((char*)&arts,sizeof(arts)); 
```

首先，让我们检查一下 write 方法的签名。我猜，它看起来类似于以下内容：

```
stream::write(char * input, int size) 
```

所以流对象需要一个指向内存中某个位置的指针，`size`从那里获取字节并存储。

现在，让我们将您的命令与此签名进行比较。`input`是 (char*)&arts。您有`arts`某种类型的对象，并且想要存储它。`input`必须是指向内存中存储对象的指针，因此您可以使用`&`运算符检索它：`&arts`。但是，该方法期望`input`是 a `char*`（意味着更多的是指向字节的指针，char 不仅在您想要处理字符时使用，而且在您想要处理字节的地方使用），但您的指针不是`char *`. 这就是进行类型转换的原因：指向`arts`类型的指针被转换为指向 a 的指针`char *`。它的值保持不变，但现在编译器知道，*你*知道你在做什么。

接下来，有一个大小参数告诉流类消耗多少字节。由于您要存储艺术对象，`sizeof(arts)`因此调用 a 来验证其大小。

# ruby - Ruby 1.9.3 创建新用户/密码并在数据库中重新提示？

> ID：15416962
> 
> 赞同：0
> 
> 时间：2013-03-14T18:08:17.007
> 
> 标签：ruby, loops

我是一名初学者，正在学习一些基本课程。

尝试创建一个新用户，如果该用户已经在哈希中，再次提示用户，但是一旦用户为 nil，要求输入密码，然后添加到哈希中。我有过很多尝试。这只是其中之一。

```
users = {
    user_1: 2
}

puts "Create New User: Type your username"
new_user = gets.chomp

if users[new_user.to_sym].nil?
  puts "Type in a Password"
  pass = gets.chomp
  users[new_user.to_sym] = pass.to_i

elsif users[new_user.to_sym] != nil
  puts "We already have that user."
  loop do
    if users[new_user.to_sym] != nil
      puts "Try Again"
      ta = gets.chomp
    break if users[ta.to_sym] == nil
   end
  end
end 
```

我尝试过使用`"when, then", "if/else"`, `"until"`,`"while"`等（这些是我知道的基本功能，或者至少正在学习，并且希望尽可能使用这些功能的一些变体来解决），但每次我似乎都无法弄清楚如何应用停止循环的用户名（最终为零），回到我的主要目标，将新的用户/密码添加到哈希中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:21:35.703

我认为，您的主要困难是在您设法从用户​​那里获得有效名称后如何返回设置密码。您可以将此代码提取到一个方法中，然后调用它。

```
users = {
  "user_1" => 2
}

def get_username
  puts "Create New User: Type your username"
  new_user = gets.chomp
end

def get_password users, name
  puts "Type in a Password"
  pass = gets.chomp
  users[name] = pass.to_i
end  

new_user = get_username

if users[new_user].nil?
  get_password users, new_user
else
  puts "We already have that user."

  # ruby's do-while loop. Or, rather, do-while-not in this case :)
  begin
    new_user = get_username
  end unless users[new_user].nil?

  get_password users, new_user
end 
```

我还更改了代码以使用字符串作为键（而不是符号）。你应该避免使用这样的符号。它会产生严重的后果（符号不是垃圾可回收的，因此如果创建太多符号可能会泄漏内存）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T18:30:48.273

创建单个用户：

```
users = {
      user_1: 2
}

check=true
puts "Create New User: Type your username"
new_user = gets.chomp

while(check) do
  if users[new_user.to_sym] != nil
    puts "We already have that user."
    if users[new_user.to_sym] != nil
      puts "Try Again"
      puts "Enter username"
      new_user = gets.chomp
    end
  elsif users[new_user.to_sym].nil?
    puts "Type in a Password"
    pass = gets.chomp
    users[new_user.to_sym] = pass.to_i
    break
  end

end 
```

# gephi - Gephi中的二部图

> ID：15416964
> 
> 赞同：1
> 
> 时间：2013-03-14T18:08:23.780
> 
> 标签：gephi

你如何为二部图构造一个 csv。我有以下数据集：

```
ID, Source, Target, Weight
1,00ash00,t3_ascto,-1
2,00ash00,t3_asll7,1
3,00ash00,t3_atawm,1
4,00ash00,t3_avosd,1
5,0-0,t3_6vlrz,1
6,0-0,t3_6vmwa,1
7,0-0,t3_6wdiv,1
8,0-0,t3_6wegp,1
9,0-0,t3_6wegz,1
10,00-,t3_ajdu3,-1 
```

源和目标列表示二分图中的从到方面。我在某处读到，为了生成图形，您需要一个节点 csv 文件（ID 与节点的映射）和一个边 csv 文件。那么如何转换上述数据集并在这两个文件中使用它呢？

如果我的方法不对，建议另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:54:20.157

是的，这似乎是[gephi 可以导入的 CSV“电子表格”](https://gephi.org/users/supported-graph-formats/spreadsheet/)的一个很好的例子，除了一件事：它不适用于每个列名之前的空格。所以列名在文件中应该如下所示：

```
ID,Source,Target,Weight 
```

[然后通过创建一个新项目或使用现有项目，并单击“概述”和“预览”之间的“数据实验室”按钮，将文件导入 gephi 边缘表](http://wiki.gephi.org/index.php/Import_CSV_Data)应该没有问题。

其他意见：

*   这是一个二分图，其中没有源是目标，也没有目标是源。
*   如果要将其作为无向图导入，则可以为每条边（即行）添加一个值为“无向”的“类型”列。
*   源标识符 00- 是否可能是 0-0？奇怪的相似。

# xcode - 从可可中的 nib 加载一个视图

> ID：15416966
> 
> 赞同：0
> 
> 时间：2013-03-14T18:08:30.800
> 
> 标签：xcode, cocoa, xib, nib

我想知道，当 NIB 文件包含多个窗口时，如何使 Cocoa OS X 应用程序只显示一个窗口？我知道这是可能的（我看到一个以这种方式完成的项目）但总是当我将辅助窗口添加到 XIB 时，它会自动打开主窗口。新窗口与主窗口或“文件所有者”没有任何联系，所以我不知道为什么 Cocoa 决定显示它。

它甚至发生在 Xcode 创建的新应用程序中，所以我想我需要做一些额外的步骤来避免自动显示第二个窗口。

我正在使用 Xcode 4.6 并且仍然是新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T19:34:18.763

选择窗口，选择最右侧窗格中的 Attributes 选项卡，然后取消选中**Visible At Launch**。

![Xcode 属性选项卡](../Images/4f863a31c4cb53a205832590f41f9220.png)

# asp.net - 无效的回发或回调参数，发布到其他页面

> ID：15416968
> 
> 赞同：1
> 
> 时间：2013-03-14T18:08:37.537
> 
> 标签：asp.net, webforms

**背景：**

我正在处理一个非常古老的项目，其中标题是 UserControl，标签、链接、按钮和上面的所有内容都添加了 output.Write。它是一个非常大的文件，需要保持原样工作。

**特征：**

我正在创建一个 div，当用户单击链接以转到更安全的一侧时，它会要求输入密码，我执行 ajax 请求，如果密码有效，它会返回一个令牌，我将此令牌设置为隐藏字段和单击按钮将该令牌提交到其他页面。

**问题：**

我正在生成输出。编写表单、输入和按钮，当我尝试提交时，我得到 Invalid postback 或 callback 参数。

这就是我生成它的方式：

```
 mystringbuilder.Append("<div id='blackout' style='display: none'>")
        mystringbuilder.Append("</div>")
        mystringbuilder.Append("<div id='adminPassword' style='display: none;' class='popupcont'>")
        mystringbuilder.Append("   <a href='#' onclick=""return closeDiv('adminPassword','',0);"" class=""pclose""></a>")
        mystringbuilder.Append("  <br />")
        mystringbuilder.Append("Password: <input type='password' name='txtPassword' id='txtPassword'/><br>")
        mystringbuilder.Append("<button type='button' id='btnLogin'> Login </button>")
        mystringbuilder.Append(String.Format(" <input style='display:none' type='text' name='hidUsername' id='hidUsername' value='{0}'/>", User.UserName))
        mystringbuilder.Append(" <FORM action='/tokenLogin.aspx' method='post'>")
        mystringbuilder.Append(" <input style='display:none' type='text' name='hidAuthToken' id='hidAuthToken'/>")
        mystringbuilder.Append("<button type='submit' style='display:none' id='btnTransfer'> Transfer </button>")
        mystringbuilder.Append("</FORM>")
        mystringbuilder.Append("</div>") 
```

我尝试添加这个，但我仍然得到相同的结果：

```
 Page.ClientScript.RegisterForEventValidation("hidAuthToken")

 Page.ClientScript.RegisterForEventValidation("btnTransfer") 
```

我可以尝试任何解决方法吗？我无法禁用验证，因为它在标题中，我将为所有页面禁用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T20:16:25.237

任何解决方法都会让您面临漏洞，但我最喜欢的是幻像按钮。

您可以在页面上任意位置放置一个 ASP 按钮，并将其显示设置为无。然后你劫持它的回发，这样你总是有一个有效的回发事件。我一直在为网格中动态创建的按钮执行此操作。

我的假设是您的登录按钮执行 ajax 调用，然后触发提交按钮的单击事件。所以这就是我要如何措辞这个答案。

所以如果你放置：

```
<asp:button runat="server" ID="btnPhantom" UseSubmitBehavior="false" Visible="false" /> 
```

somwhere 在您的页面上，然后您将像这样修改您的代码：

```
mystringbuilder.Append(string.format"<input type='button' style='display:none' id='btnTransfer' value='Transfer' onclick='javascript: {0}'/>", Page.ClientScript.getPostBackEventReference(btnPhantom,null) ) 
```

然后在您的页面加载中，您需要注意幻像按钮的事件：

```
C#

String tEventTarget = Request("__EVENTTARGET).ToString();
if(tEventTarget == btnPhantom.UniqueID){
    //read input from request and redirect
}

VB

Dim tEventTarget as String = Request("__EVENTTARGET).ToString

If tEventTarget = btnPhantom.UniqueID Then
   //read input from request and redirect 
End IF 
```

我一直这样做是为了页面没有意识到的动态控件。这有点像我说的那样，它可能不是最安全的方法，但是将纯文本授权令牌存储在文本框中也不是那么安全;)。

# php - 检查组合数组

> ID：15416969
> 
> 赞同：2
> 
> 时间：2013-03-14T18:08:48.507
> 
> 标签：php, arrays, if-statement

我的代码中有以下组合数组：

```
if (($req[$doc_id5] == "Required") && ($signed == "No")) 
```

如果需要数组中的最终文档，则此 IF 语句中的命令效果很好，`$signed = No`但是我需要它来检查整个数组中是否有所需的未签名文档。

我尝试了以下方法：

```
if (in_array("Required",$req[$doc_id5]) && ($signed == "No")) 
```

但这没有用。

如果需要，很高兴发布我的代码，但它非常混乱。

编辑：这是检查文档是否已签名的代码：

```
 $order20 = "SELECT * FROM signatures WHERE doc_id = '$doc_id5' AND action_id = '$action_id' AND member_id = '$member_id'";
      $result20 = mysql_query($order20);

if (mysql_num_rows($result20)>0) {
$signed = "Yes";
} else {
$signed = "No";
} 
```

亲切的问候，

n00bstacker

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:10:07.877

尝试这个 ：

```
if (in_array("Required",$req) && ($signed == "No")) 
```

第二个参数应该是一个数组

参考： http: [//php.net/manual/en/function.in-array.php](http://php.net/manual/en/function.in-array.php)

# php - php 有一个随机的宝宝

> ID：15416973
> 
> 赞同：0
> 
> 时间：2013-03-14T18:09:06.507
> 
> 标签：php

如果我想创建一个调查来显示您未来婴儿的性别，计算男性与女性的比例为 1.05 比 1。假设每对夫妇只会生一个孩子。我怎么能在php中做到这一点？

`rand (0,1);`将生成一个随机数（1 或 0）。可以代表性别。但是，如何将该比率用作获得该数字的概率？

我知道这个比率非常接近，也许将这个比率应用于我的函数根本不会影响结果。但我这样做是为了教育自己，所以请给我一个如何做到这一点的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:22:18.260

根据@Michael Berkowski 的评论：

```
/**
 * Generate random baby gender adjusted by ratio male to female 1.05:1
 *
 * @return
 *   TRUE if male or FALSE if female
 */
function is_random_male() {
    return rand(1, 205) <= 105;
}

echo is_random_male() ? 'male' : 'female'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:19:04.520

1.05 比 1 相当于：

*   男性 % = (1 / 2.05) * 100 % = 48,78.. %
*   女性 % = (1.05 / 2.05) * 100 % = 51.22.. %

现在根据所需的准确程度，您可以执行以下算法：

```
$rnd = rand(0,100);
if ($rnd < 48 ) {
    //male
}
else {
    //female
} 
```

如果您想要更高的准确性：

```
$rnd = rand(0,10000);
if ($rnd < 4878 ) {
    //male
}
else {
    //female
} 
```

# ruby-on-rails - rails +主干报告模型中的确认字段在创建时为空

> ID：15416977
> 
> 赞同：0
> 
> 时间：2013-03-14T18:09:15.360
> 
> 标签：ruby-on-rails, validation, backbone.js, model

我正在通过主干创建用户模型。密码字段有一个确认字段。如果我通过控制台创建用户 - 它已创建。但如果我尝试通过主干创建模型，则会出现错误 - “Password_confirmation 不能为空”。
我一直在寻找拼写错误或任何其他简单的错误......这是我的代码视图：

```
class Notes.Views.signupView extends Backbone.View
  template: JST['users/signup']
  events:
    'submit form#create_user': 'createUser'
  checkField: (fieldId) ->
    $('#'+fieldId).val() != ''

  inputFilled: ->
    @checkField( 'name' ) && @checkField( 'email' ) && @checkField( 'password' ) && $('#password').val() == $('#password_confirmation').val()
  readAttributes: ->
    atr =
      name: $('#name').val()
      email: $('#email').val()
      password: $('#password').val()
      password_confirmation: $('#password_confirmation').val()

  createUser: (e)->
    e.preventDefault()
    unless @inputFilled()
      alert 'All fields must be filled, passwords must match'
      return
    attributes = @readAttributes()
    @model = new Notes.Models.User(attributes)
    @model.save attributes,
      wait: true
      success: -> alert('OK')
      error: @handleError
  handleError: (entry,response) ->
    if response.status == 422
      errors = $.parseJSON(response.responseText).errors
      for attribute, messages of errors
        alert "#{attribute} #{message} " for message in messages
  render: ->
    $(@el).html(@template())
    this 
```

控制台显示使用以下参数发送请求：

```
{"name":"elmor","email":"elmorelmor@ukr.net","password":"elmor","password_confirmation":"elmor"} 
```

回应它

```
{"errors":{"password_confirmation":["can't be blank"]}} 
```

我的模型：

```
class User < ActiveRecord::Base
  attr_accessor :password
  attr_protected :password_digest
  attr_accessible :password, :facebook, :linkedin, :name, :email,  :twitter, :web
  validates :name, presence: true, uniqueness: true
  validates :email, presence: true, uniqueness: true, email: true
  validates :password, presence: true, :confirmation => true
  validates :password_confirmation, presence: { if: :password }

  def password=(pass)
    return if pass.blank?
    @password = pass
    self.password_digest = BCrypt::Password.create(pass)
  end
end 
```

**更新 1**
如果我插入`:password_confirmation`我`attr_accessible`得到 500 错误作为响应，但新用户已创建！我不认为压制这个错误是正确的想法，所以希望找到更好的方法......

**更新 2**
忘记添加控制器的代码

```
class UsersController < ApplicationController
  respond_to :json
  def create
    respond_with User.create(params[:user])
  end

end 
```

更新 3
我想我找到了这个错误的根源 - 在 production.log 上我可以看到一个错误，当我提交这个表单时

```
Processing by UsersController#create as JSON

      Parameters: {"name"=>"elmor", "email"=>"elmor@ukr.net", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]", "user"=>{"password"=>"[FILTERED]", "name"=>"elmor", "email"=>"elmor@ukr.net"}} 
```

`password_confirmation` 里面不存在`user`......我不知道为什么 - 看看主干视图......它都在那里 ^（还有一个模型 -

```
class Notes.Models.User extends Backbone.Model
  url: '/api/account'
  # paramRoot: 'user' i tried with or without this line... Still error with 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:49:38.253

最后，我在控制器的操作中添加了 location 属性

```
 def create
    respond_with User.create(params[:user]),:location => signup_path
  end 
```

并添加`:password_confirmation`到`attr_accessible`模型中。就是这样！

# php - Symfony 形式的关注点分离

> ID：15416981
> 
> 赞同：3
> 
> 时间：2013-03-14T18:09:21.700
> 
> 标签：php, oop, symfony, domain-driven-design, modular-design

我最近一直在尝试使用 Symfony 2 表单，这对于简单的表单非常有用。

但是 - 用于选择框或类似的东西 - 我经常想要表单中的关联实体列表。在几篇博文和 Symfony 文档中，他们提出了这样的建议……

```
//BlogPostType implements FormTypeInterface
public function buildForm(FormBuilderInterface $builder, array $options)
{
  $builder
  ->add('category', null, array(
    'property' => 'name',
    'query_builder' => function(EntityRepository $er) use($options) {
      return $er->createQueryBuilder('category')->orderBy('category.name', 'ASC');
    }
  );
} 
```

由于我非常关注域驱动设计，尤其是关注点分离，我发现很难相信在 Symfony 中将关联实体绑定到自定义表单类型的唯一选择是在自定义表单中查询它表格类型。

在我看来，这违反了 SoC，因为不应该查询表单。这样，表单总是采用相同的实体，但不是表单应该选择显示哪些实体......

要求表单构建器构建表单的控制器应该将关联的对象注入到自定义表单类型构造函数中......

```
//BlogPostType implements FormTypeInterface
public function __construct(array $categories) {
  $this->categories = $categories;
}

public function buildForm(FormBuilderInterface $builder, array $options)
{
  $builder
    ->add('category', null, array(
      'property' => 'name',
      'choices' => $this->categories
    );
} 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T18:16:08.407

是的，您可以从控制器传递选择。只需创建一个选项，而不是通过构造函数注入它，因为构造函数仅在为每个请求创建给定类型的第一种形式时使用。因此，如果您碰巧需要在一个页面上输出多个相同类型的表单，那么如果通过构造函数传递，它们的选择将是相同的。

当您注入可以多次重用而没有任何问题的服务时，通过构造函数向表单类型注入一些东西是有意义的。

文档中和网络上的许多示例都违反了许多最佳实践，但是用尊重实践的示例来教新手一些东西要困难得多。

# c# - 如何检索剪贴板文件指针 CF_HDROP

> ID：15416983
> 
> 赞同：3
> 
> 时间：2013-03-14T18:09:29.263
> 
> 标签：c#, windows, winapi, clipboard

每当我们使用 ctrl+c 复制任何文件时，`clipboard`它都会存储文件指针以供`cut,copy,paste`操作。有什么方法可以使用 C# 检索该文件指针？我尝试[了这篇文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776902%28v=vs.85%29.aspx#CF_HDROP)，但没有为我解决。

我的第二个问题是，如果我们有它的逻辑地址，我们如何`perform paste operation`归档？我找不到任何可以尝试的有价值的内容。

# ruby - 为什么 `Float` 没有固定的对象 ID，而 `Fixnum` 有一个？

> ID：15416986
> 
> 赞同：2
> 
> 时间：2013-03-14T18:09:42.433
> 
> 标签：ruby, ruby-2.0

谁能帮我理解为什么一个对象`Float`没有一个固定`object_id`的对象而一个对象`Fixnum`有一个固定的对象`object-id`？

```
C:\>ruby -v
ruby 2.0.0p0 (2013-02-24) [i386-mingw32]

C:\>irb --simple-prompt
DL is deprecated, please use Fiddle
>> 10.object_id
#=> 21
>> 10.object_id
#=> 21
>> 10.22.object_id
#=> 18272628
>> 10.22.object_id
#=> 15089952
>> 3.14.object_id
#=> 18577176
>> 3.14.object_id
#=> 16707660 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:20:16.047

在 Ruby 1.8 和 1.9 中，浮点数永远不是立即数，因此所有浮点数都需要新的内存分配。

在 Ruby 2.0.0 中，在 64 位系统上，许多浮点数[现在是立即数](http://blog.marc-andre.ca/2013/02/23/ruby-2-by-example/#optimizations)。这意味着典型的浮点数不再需要内存分配和释放，因此操作速度更快。

Ruby 将其值存储在一个指针中（32 位或 64 位，取决于平台）。它实际上使用一种技巧将立即数存储在该指针中。这就是为什么 Fixnum 只能保存 31 / 63 位的原因。

在 32 位平台上，没有聪明的方法来存储浮点数，但在 64 位平台上，可以使用第一个将该值标记为立即浮点数，其余 60 个左右来保存数据。但是，确实需要完整 64 位的浮点数不能是立即数，因此这些浮点数就像在使用实际指针之前一样存储。

可以在[原始功能请求](https://bugs.ruby-lang.org/issues/6763)中找到有关此优化的更多信息。

# android - Android连接到本地网络中的WebService

> ID：15416987
> 
> 赞同：0
> 
> 时间：2013-03-14T18:09:45.460
> 
> 标签：android, web-services, networking, connection

我有一个从我的本地机器上运行的 WebService，如果它被模拟器访问，它会工作得很好。

由于某些企业 BS，我需要将运行 WebService 的服务器移动到另一台机器（VM）。

这导致我的 Android 应用程序停止工作。

我可以使用我的浏览器访问 VM 中的 WebService，我得到了完美的 JSON 响应，但我不能使用模拟器 - 我收到“连接被拒绝”错误。

我需要改变什么？或者我需要让 IT 部门就我的本地计算机或远程 VM 进行更改？

提前致谢！

# jquery - jQuery：在另一个创建的元素内创建一个元素

> ID：15416989
> 
> 赞同：0
> 
> 时间：2013-03-14T18:09:51.473
> 
> 标签：jquery

在下面的字符串中，我试图在 周围添加一个额外的跨度，`post.caption`但将其保留在`<span class="overlay" />`. 我已经尝试在 .html 之前和之后添加和包装，但无法得到它或任何东西来正确地做到这一点。

`$('<span class="overlay" />').html(post.caption).appendTo(entry);`

结果看起来像`<span class="overlay"><span>Caption content</span></span>`

如果有帮助，这是完整的代码段：

```
entry = $('<a />').attr('href', post.permalinkFull)
        $('<img />').attr('src', post.image).appendTo(entry)
        $('<span class="overlay" />').html(post.caption).appendTo(entry); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:15:09.163

你可以试试这个`wrapInner`：

```
$('<span class="overlay" />').html(post.caption)
                             .wrapInner('<span />').appendTo(entry); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T18:18:01.880

如果 post.caption 是一个字符串，那么据我所知，您还想在它周围创建跨度：

```
$('<span>').html(post.caption).appendTo(entry).wrap('<span class="overlay" />'); 
```

# c++ - 多幅图像 C++/OpenCV 的实时 SIFT 描述符匹配

> ID：15416992
> 
> 赞同：1
> 
> 时间：2013-03-14T18:09:59.817
> 
> 标签：c++, opencv, computer-vision

同一本童书有 10 页，页面的内容都是图片，我从每个页面中提取关键点和描述符作为我的训练数据。我想检测哪些页面在基于相机的匹配描述符中。

到目前为止，我通过提取每一帧的关键点和描述符并使用 OpenCV 的 FlannBasedMatcher 从训练数据中逐一匹配描述符来实现它，然后它返回最佳匹配的描述符。

这里的问题是它不能实时实现，当训练数据超过 3 页时，运行时间会很慢。

有没有人知道任何更好的方法来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T18:40:01.483

事实上，Surf 是一种更好的算法，虽然它不如 sift 准确，但你会发现它的运行时间接近实时，我还建议，如上所述，计算特征并使用并行计算进行匹配（容易如果您只是使用 OpenMP 就足够了）..

但是考虑到，冲浪发现的关键点要少得多，所以如果你的对象不是“有趣”或不够大......你不会匹配很多......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:11:57.957

匹配是一个昂贵的过程，但可以并行化，并且有一些优化（如向量之间的余弦匹配）来加快速度。

如果您想要更高的准确度，您没有太多选择，您需要对特征进行分组匹配（这需要与训练数据和找到的关键点数量成正比的额外时间）。

另外：考虑使用 SURF 而不是 SIFT，由于一些智能优化，它更快。

# c# - 拖放后图像名称元数据错误

> ID：15416995
> 
> 赞同：2
> 
> 时间：2013-03-14T18:10:06.037
> 
> 标签：c#, drag-and-drop, metadata

我有一个允许拖放的图像管理器应用程序。拖入图像时，我执行此行以获取图像的路径和名称。

```
public bool GetFileName(out string _filename, DrageventArgs E)
{
    _filename = String.Empty;
    Array data = ((System.Windows.Forms.IDataObject)e.Data).GetData("FileName") as Array;
    ...
} 
```

该行来自[This article](http://www.codeproject.com/Articles/9017/A-Simple-Drag-And-Drop-How-To-Example "本文")，因此对于我的水平来说它可能太高级了，但它运行得很好，我认为我已经足够了解它的用途。

但是，我在获取正确的图片标题时遇到了问题。我怀疑“文件名”数据可能是原因，因为当拖动一个名为“Phare.jpg”的图像时，我得到的字符串是

```
"C:\Users\\Public\Pictures\SAMPLE~1\LIGHTH~1.JPG". 
```

“LIGHTH”位基本上是“phare”，但用英文......至少是第一个字母。也许我没有提取正确的数据？有一个更好的方法吗？我可以尝试提取与“文件名”不同的数据吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:19:11.147

这是从普通文件名构造的[8.3 文件名。](http://en.wikipedia.org/wiki/8.3_filename)很可能您用来显示文件名称的任何软件都使用了一些有趣的文件名到显示名称的映射，或者非 8.3 名称与 8.3 名称完全不同是您的情况（`dir C:\Users\\Public\Pictures\SAMPLE~1`在命令提示符下执行可能会显示实际文件名是什么）。

您应该能够使用[System.IO.Path.GetFullPath()](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)将 8.3 文件名映射回常规名称。

您有机会从图像元数据中获取其他语言的图像名称 - 查看[Image.PropertyItems](http://msdn.microsoft.com/en-us/library/system.drawing.image.propertyitems.aspx)。

# scala - Scala 中枚举值的前身和后继

> ID：15416999
> 
> 赞同：1
> 
> 时间：2013-03-14T18:10:15.710
> 
> 标签：scala, enums, enumeration

是否有一种不那么复杂的方法来查找枚举值的前任和后继？

```
object E extends Enumeration {
   val W, X, Y, Z = Value
}

def succ(a: E.Value) : E.Value = {
   val arr = E.values.toArray
   return arr(a.id + 1)
}

scala> succ(E.W)
res17: E.Value = X

scala> succ(E.Y)
res18: E.Value = Z 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T18:43:22.530

`E(n)`将获得第`n`th 值，并且每个值都知道自己的索引（字段`id`）。因此，假设您刚刚按顺序保留了这些值：

```
def succ(a: E.Value) = if (a.id+1 >= E.maxId) None else Some(E(a.id+1))
def pred(a: E.Value) = if (a.id <= 0) None else Some(E(a.id-1)) 
```

如果您希望在超出范围时抛出异常，则可以删除检查和选项内容。或者，如果您愿意，也可以循环回到开头。

如果您可能已根据自己的喜好重新编号（例如`val V = Value(98)`），那么您必须搜索该`values`集合；瑞安的回答已经涵盖了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T18:31:22.643

您可以执行以下操作：

```
scala> def succ(a: E.Value) = {
 |   E.values.find(_ > a)
 | }
succ: (a: E.Value)Option[E.Value]

scala> succ(E.W)
res14: Option[E.Value] = Some(X)

scala> succ(E.Z)
res15: Option[E.Value] = None

scala> def pred(a: E.Value) = {
 |   E.values.takeWhile(_ < a).lastOption
 | }
pred: (a: E.Value)Option[E.Value]

scala> pred(E.W)
res26: Option[E.Value] = None

scala> pred(E.Y)
res27: Option[E.Value] = Some(X) 
```

这也返回 Option[E.Value] 而不是 E.Value。如果您调用 succ(EZ)，这也将正常工作。