# StackOverflow 问答 13525000-13525999

# shell - 如何从查找“type d”中排除此/当前/点文件夹

> ID：13525004
> 
> 赞同：219
> 
> 时间：2012-11-23T07:55:10.850
> 
> 标签：shell, directory, find

```
find . -type d 
```

可用于查找某个起点以下的所有目录。但它也会返回当前目录 ( `.`)，这可能是不受欢迎的。怎么可能排除？

* * *

## 回答 #1

> 赞同：244
> 
> 时间：2012-11-23T07:55:10.850

不仅`find`可以通过`-maxdepth`参数控制递归深度，还可以使用相应的参数从“top”开始限制深度`-mindepth`。所以真正需要的是：

```
find . -mindepth 1 -type d 
```

* * *

## 回答 #2

> 赞同：222
> 
> 时间：2013-06-30T10:32:03.380

[**POSIX 7 解决方案**](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/find.html#tag_20_47)：

```
find . ! -path . -type d 
```

对于这种特殊情况 ( `.`)，打高尔夫球比`mindepth`解决方案更好（24 对 26 字符），尽管由于`!`.

要排除其他目录，这将不太好打，并且需要一个 DRYness 变量：

```
D="long_name"
find "$D" ! -path "$D" -type d 
```

`!`我在和之间的决策树`-mindepth`：

*   脚本？用于`!`便携性。
*   关于 GNU 的交互式会话？
    *   排除`.`？扔硬币。
    *   排除`long_name`？使用`-mindepth`.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-03-02T12:21:03.750

`find ./* <...>`当我不介意忽略第一级点文件时，我会使用（`*`默认情况下，glob 在 bash 中与这些不匹配 - 请参阅内置 shopt 中的“dotglob”选项：[https ://www.gnu.org/software/bash /manual/html_node/The-Shopt-Builtin.html](https://www.gnu.org/software/bash/manual/html_node/The-Shopt-Builtin.html)）。

```
eclipse tmp # 查找 .
.
。/屏幕
./screen/.testfile2
./.X11-unix
./.ICE-unix
./tmux-0
./tmux-0/默认

```

```
eclipse tmp # 查找 ./*
。/屏幕
./screen/.testfile2
./tmux-0
./tmux-0/默认

```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-05-19T08:21:26.547

好吧，还有一个简单的解决方法（该解决方案在 windows git bash 上对我不起作用）

`find * -type d`

它的性能可能不是很好，但可以完成工作，这有时是我们需要的。

[编辑]：正如@AlexanderMills 评论的那样，它不会在根位置显示隐藏目录（例如`./.hidden`），但会显示隐藏的子目录（例如。`./folder/.hiddenSub`）。[在 Windows 上使用 git bash 测试]

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-24T09:20:08.343

用管道传送到 sed。不要忘记扩展正则表达式的 -r。

```
find . -type d | sed -r '/^\.$/d' 
```

# uitableview - 知道 scrollToRowAtIndexPath 何时不滚动

> ID：13525008
> 
> 赞同：2
> 
> 时间：2012-11-23T07:55:19.490
> 
> 标签：uitableview, animation

向表中添加一行后，我使用**scrollToRowAtIndexPath**将该行定位在屏幕中间，然后依靠**scrollViewDidEndScrollingAnimation**突出显示同一行。

有时，行不能滚动；例如，当它是表中的第一个时。在这些情况下，不会调用**scrollViewDidEndScrollingAnimation**，因此不会突出显示新添加的行。

有没有办法知道**scrollToRowAtIndexPath**是否会对表格产生任何影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:25:34.267

在插入时，您必须指定要插入的 indexPaths 对吗？公开存储这些 indexPaths 并在 CellForRowAtIndexPath 中重新加载带有高亮颜色的行或单独重新加载行。

例如：将插入行的索引路径添加到公共数组。

```
[tableView insertRowsAtIndexPaths:indexpathArray withRowAnimation:UITableViewRowAnimationFade];

self.colorIndexs = indexpathArray; 
```

然后将其添加到 cellForRowAtIndexPath

```
if ([colorIndexs count] > 0 && [colorIndexs containsObject:indexPath])

customCell.contentView.backgroundColor = [UIColor redColor]; 
```

# c# - 将整个数组值分配给c#中的另一个变量？

> ID：13525016
> 
> 赞同：-1
> 
> 时间：2012-11-23T07:56:05.543
> 
> 标签：c#

我有一个数组，我想将它分配给另一个数组变量。这是代码

```
for (int i = 0; i < length; i++)
        {
            arr1[i] = Convert.ToByte(Tag_uid.Substring(2 * i, 2), 16);
        }

        //Create an array to hold the Command Packet
        byte[] CommandPacket = new byte[9];

        CommandPacket[0] = arr1;   //ERROR: cannot convert type byte[] to byte 
```

如何将整个数组值分配给`commandpacket[0]`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:00:43.120

怎么样

```
for (int i = 0; i < length; i++)
{
    arr1[i] = Convert.ToByte(Tag_uid.Substring(2 * i, 2), 16);
}

byte[][] CommandPacket = new byte[9][];

CommandPacket[0] = arr1; 
```

# jqgrid - jqgrid - 将 jqgrid 与 json 数据一起排序

> ID：13525017
> 
> 赞同：1
> 
> 时间：2012-11-23T07:56:13.547
> 
> 标签：jqgrid

我有一个 jqgrid。客户端对网格进行排序后，我需要从 jqgrid 中提取 json 数据。拉取的 json 数据应该是排序后的版本，而不是原始版本。我怎样才能做到这一点？

这是我的 jqgrid 源

```
jQuery("#myGrid").jqGrid({
    datastr: jsonData,
    datatype: 'jsonstring',
    jsonReader: { repeatitems: false, root: function(obj) { return obj; }},
    colNames: [ 'Column 1',
                'Column 2'],
    colModel: [
        { name: 'prop1',    index: 'prop1'},
        { name: 'prop2',    index: 'prop2'},

    ],
    headertitles: true,
    sortable: true,
    pginput: true,
    rownumbers: true,
    rowNum: 5,
    rowList: [5,20, 100, 10000],
    pager: '#pager',
    width:'600',
    height:'300',
    shrinkToFit:false,
    viewrecords: true,
    loadonce: true
}); 
```

目前，当我`alert(jsonData)`在 gridComplete 中显示原始 json 数据而不是排序后的数据时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T07:27:30.790

对于遇到这个问题的人，您可以将`data`参数传递给`loadComplete`jqGrid的事件。此数据是网格数据源的排序版本。

# java - 如何将运算符上的数学表达式拆分为分隔符，同时将它们保留在结果中？

> ID：13525024
> 
> 赞同：7
> 
> 时间：2012-11-23T07:56:33.310
> 
> 标签：java, regex, string, split

我需要拆分一个表达式

```
a+b-c*d/e 
```

并分别获取`a`, `b`, `c`, `d`, `e`（作为字符串数组）以及`=`, `-`, `*`, `d`, `/`（也是运算符数组）。我试过像：

```
String myString;

String myString={"a+b-c*d/e");

String[] result=new String();

String[] separator=new String[]{"+","-","/","*"};

result=myString.split(separator); 
```

但是，它显示一个错误。如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-23T08:00:14.557

**第一个问题： -**

多重声明`String myString;`

**第二个问题：-**

字符串初始化不正确。末尾缺少双引号。从末端拆下支架和支架。

```
String myString = "a+b-c*d/e"; 
```

**第三个问题： -**

使用 String 对象初始化的字符串数组，而不是数组对象。

```
String[] result=new String();  // Should be `new String[size]` 
```

事实上，您不需要事先初始化您的数组。

**第四个问题：-**

`String.split`将正则表达式作为参数，您已经传递了一个数组。不管用。

**采用： -**

```
String[] result = myString.split("[-+*/]"); 
```

拆分所有运营商。

* * *

关于你的这个声明： -

> 以及`=, -, *, d, /`（也是一组运算符）分别。

我不明白你在这里想要什么。您的示例字符串不包含`=`. 并且`d`不是`operator`. 请查看是否要编辑它。

**更新 ： -**

如果您打算将运算符也保留在数组中，则可以使用此正则表达式：-

```
String myString= "a+b-c*d/e";
String[] result = myString.split("(?<=[-+*/])|(?=[-+*/])");
System.out.println(Arrays.toString(result));

/*** Just to see, what the two parts in the above regex print separately ***/
System.out.println(Arrays.toString(myString.split("(?<=[-+*/])")));
System.out.println(Arrays.toString(myString.split("(?=[-+*/])"))); 
```

**输出 ： -**

```
[a, +, b, -, c, *, d, /, e]
[a+, b-, c*, d/, e]
[a, +b, -c, *d, /e] 
```

`(?<=...)`手段`look-behind assertion`，`(?=...)`手段`look-ahead assertion`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T08:11:57.050

除了`split`方法之外，您还可以使用`java.util.StringTokenizer`：

```
 String myString = "a+b-c*d/e";

 List<String> operatorList = new ArrayList<String>();
 List<String> operandList = new ArrayList<String>();
 StringTokenizer st = new StringTokenizer(myString, "+-*/", true);
 while (st.hasMoreTokens()) {
    String token = st.nextToken();

    if ("+-/*".contains(token)) {
       operatorList.add(token);
    } else {
       operandList.add(token);
    }
 }

 System.out.println("Operators:" + operatorList);
 System.out.println("Operands:" + operandList); 
```

结果：

```
Operators:[+, -, *, /]
Operands:[a, b, c, d, e] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T08:03:52.570

只是为了得到a/b/c/d/e：

```
String myString = "a+b-c*d/e";
String[] result=myString.split("[-+*/]"); 
```

以更易读的形式：

```
String myString = "a+b-c*d/e";
String[] result2=myString.split("["+Pattern.quote("+-*/")+"]"); 
```

要获得 +-*/：

```
ArrayList<Character> list = new ArrayList<Character>();
for (char c:myString.toCharArray())
{
   if ("+-*/".contains(""+c)) list.add(c);
}
System.out.println(list); 
```

编辑：删除了不需要的转义字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T08:39:19.753

我认为您想要做的更像是解析器，而不是标记器。

使用字符串标记器，您通常有一个长字符串（即“parameter1;parameter2;parameter3”），其中连接了几个元素，并使用“标记”来分隔这些元素。使用函数“String.split”，您基本上是在说：“好的，给出这个字符串中的所有元素，但要考虑到那个字符';' 分隔不同的元素”。然后你得到“parameter1”、“parameter2”、“parameter3”。你不关心分隔符。

但是在像您这样的数学表达式中：“a+bc*d/e”，您想要获取所有单个元素（操作数和运算符）。这里没有明确的分隔符，顺序对您也很重要。我会使用解析器库并编写一个小语法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T08:02:29.403

据我所知，你不能立即做你想做的事。[`split(String regex)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29)不需要整个数组（与 C# 不同），只是一个表示有效正则表达式的字符串。

您可以做的是定义 a[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)包含您的运算符和 2 [`ArrayLists`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)。一旦你有了它，你迭代你的字符串，检查集合是否包含给定的字符（从而确定它是否是一个运算符）。如果是，那么，你把它放在一个列表中，如果不是，你把它放在另一个列表中。

最后，您可以使用[`toArray(new String\[arraySize\])`](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html#toArray%28T%5B%5D%29)来取回您的`ArrayLists`as String 数组。

# android - 登录 Web 服务异常 (716): java.lang.ArrayIndexOutOfBoundsException: length=0; 索引=0

> ID：13525025
> 
> 赞同：1
> 
> 时间：2012-11-23T07:56:35.653
> 
> 标签：android, ksoap

```
 ****android side:**
        Permission is also added in Android mainfest.xml    
        **webMethod.java****
SoapObject request = new SoapObject(SOAPNAMESPACE,SOAPLOGINMETHOD);
request.addProperty("Username",Username);
request.addProperty("Password",Password);
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);
    Log.d("parameter out",""+ envelope.bodyOut.toString());
    try{HttpTransportSE httpTransport = new HttpTransportSE(SOAPURL);
    httpTransport.call(SOAPLOGINACTION, envelope);
    SoapObject response=(SoapObject) envelope.bodyIn;
    Log.d("parameter in",""+ envelope.bodyIn);
    id=response.getProperty(0).toString();

****DOTNETWEBSERVICE side:**
 [WebMethod]
public string LoginCheck(string username, string password)//,int waitId,string phoneName,string phoneStatus,string time,string date)
{
    string userID1 = null;
    int d = 0,ds=0;
    string path = "Data Source=UX-PC;Initial Catalog=ResturantOrdingSystem;User ID=sa;Password=123";
    SqlConnection con = new SqlConnection(path);
    try
    { con.Open(); }
    catch (Exception exx) { }
    //  string sql = "SELECT * FROM HR Where username='" + username + "'AND password='" + password + "'";
    string sql = "SELECT * FROM HR Where position='waiter' AND username='" + username + "'AND password='" + password + "'";
    //+ "'AND position=waiter'"

    SqlCommand CMD = new SqlCommand(sql, con);
    dr = CMD.ExecuteReader();

    while (dr.Read())
    {
        userID1 = (string)dr["name"];
    } con.Close(); 
```

***问题：*** 我在

```
logtrace: Exception(716): java.lang.ArrayIndexOutOfBoundsException: length=0; index=0 
i am using ksoap2-android-assembly-2.6.0-jar-with-dependencies
Please describe me tell me solution? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:02:41.393

我认为您的响应对象是空的，当您尝试将其分配给“id”变量时，它会出现此错误

```
id=response.getProperty(0).toString(); 
```

检查您的回复是否为空？检查您的网络方法 sql 查询是否返回数据？

# python - ProgressBar：设置脉冲块的宽度

> ID：13525032
> 
> 赞同：1
> 
> 时间：2012-11-23T07:57:40.690
> 
> 标签：python, pygtk

有没有办法改变正在移动的块的宽度`gtk.ProgressBar.pulse()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T12:58:00.473

不在 PyGTK 上。如果您使用的是 GTK 3，那么有一个 CSS 类，`GtkProgressBar:pulse`但我找不到任何关于如何更改宽度的文档。如果您进行一些挖掘，这可能是可能的。

# database - 同步本地和远程ms访问数据库

> ID：13525037
> 
> 赞同：3
> 
> 时间：2012-11-23T07:58:32.593
> 
> 标签：database, ms-access, synchronization, database-replication

我的客户有一个本地 MS Access 数据库，他将在本地处理它，然后他想将它与远程服务器上的另一个同步。

将他的更改同步到在线数据库的最佳方法是什么，或者有没有办法从 MS Access 打开在线数据库？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:58:47.183

One of my customers gave me the access to his server through VPN. Once the connection is etablished, I can see the connection by entering `\\192.168.xx.yy` (with appropriate values for xx and yy) in the windows explorer. Through the context menu of the connection symbol you can then map this to a drive letter and work with the mdb's as if they were on your local computer.

# java - 局部变量变为空（Android）

> ID：13525040
> 
> 赞同：1
> 
> 时间：2012-11-23T07:59:07.973
> 
> 标签：java, android, exception, nullpointerexception

从我的 android 应用程序中，我收到一条奇怪的错误消息：NullPointerException（在最后一行代码中）。

```
public static Integer getDefaultCalendarId(Context context) {
    String calendarInSettings = PrefsHelper.getDefaultCalendar(context);
    Calendar calendar = PrefsHelper.getCalendarFromPrefKey(context, calendarInSettings);
    if (calendar == null || !calendar.canEventEdit()) {
        return calculateDefaultCalendar(context);
    }
    boolean isChecked = false;
    for (Calendar checkedCalendar : PrefsHelper.getCheckedCalendars(context)) {
        if (checkedCalendar.getId() == calendar.getId()) {
            isChecked = true;
            break;
        }
    }

    (1114 line) return isChecked ? calendar.getId() : calculateDefaultCalendar(context); // NullPointerException
} 
```

三星 GT-N7000 发生异常。

这怎么可能发生？

**更新：**

calculateDefaultCalendar 可以返回 null，但 getDefaultCalendarId 返回值 - 整数（可为空）！

堆栈跟踪：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{xxx.trial/xxx.view.EventEditActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4511)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at xxx.EventHelper.java.lang.Integer getDefaultCalendarId(android.content.Context)(SourceFile:1114)
at xxx.view.EventEditActivity.void onCreate(android.os.Bundle)(SourceFile:306)
at android.app.Activity.performCreate(Activity.java:4470)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
... 11 more
java.lang.NullPointerException
at xxx.EventHelper.java.lang.Integer getDefaultCalendarId(android.content.Context)(SourceFile:1114)
at xxx.view.EventEditActivity.void onCreate(android.os.Bundle)(SourceFile:306)
at android.app.Activity.performCreate(Activity.java:4470)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
at android.app.ActivityThread.access$600(ActivityThread.java:127)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4511)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:986)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:753)
at dalvik.system.NativeStart.main(Native Method) 
```

**更新 2**

计算默认日历：

```
private static Integer calculateDefaultCalendar(final Context context) {
    String account = PrefsHelper.getAccountName(context);
    if (account != null) {
        for (Calendar calendar : PrefsHelper.getCheckedCalendars(context)) {
            if (calendar.getOwnerAccount().equals(account) && calendar.canEventEdit()) {
                return calendar.getId();
            }
        }
    }

    for (Calendar calendar : PrefsHelper.getCheckedCalendars(context)) {
        if (calendar.canEventEdit()) {
            return calendar.getId();
        }
    }

    return null;
} 
```

***更新 3***

错误定期重复：

产品/安卓版本

LT26i_1257-3921 / 4.0.4

MK16i_1249-8137 / 4.0.4

SCH-I500 / 2.3.5

SCH-I500 / 4.0.4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T01:50:55.860

```
return isChecked ? calendar.getId() : calculateDefaultCalendar(context); 
```

我怀疑`calendar.getId()`退货`int`不`Integer`。这意味着`calculateDefaultCalendar(context)`返回 a 的`Integer`，首先需要自动拆箱，`int`结果`int`必须自动装箱到`Integer`。如果`isChecked`为 false 并`calculateDefaultCalendar(context)`返回，`null`那么这将导致`NPE`. 请参阅以下简化的等效代码，例如：

```
class N2 {
  public static void main(String args[])
  {
    System.out.println(check()); 
  }
  static Integer check()
  {
    return false ? 0 : fNull(); 
  }
  static Integer fNull() 
  {
    return null;
  }
} 
```

搜索相关术语`auto-boxing`，`NullPointerException`并`ternary`带来许多类似的热点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T02:08:13.033

如果`calender.getId()`返回一个`int`，您将遇到自动装箱问题。由于最可能的罪魁祸首是 的返回值`calculateDefaultCalendar()`，因此编译器很可能试图自动拆箱`null`返回值。`calender.getId()`要解决此问题，您可以简单地手动将with的返回值装箱`Integer.valueOf(calendar.getId())`。这将确保返回值被装箱为 an`Integer`然后返回值`calculateDefaultCalendar()`不会被自动拆箱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:04:45.153

显而易见，其中之一为空：

*   ~~`calendar`~~（已消除，之前在代码中成功调用过）

*   ~~从`getId()`~~（消除，之前在代码中成功调用）的返回

*   从返回`calculateDefaultCalendar`

*   ~~`context`~~（已消除，之前在代码中成功调用过）

看起来`calculateDefaultCalendar`由于某种原因返回 null 。在我们提供更多帮助之前，我们需要代码。

* * *

好的，现在我们有了`calculateDefaultCalendar`，我们可以继续消除。从您的评论看来，问题在于这两个条件语句

```
if (calendar.getOwnerAccount().equals(account) && calendar.canEventEdit()) {
    return calendar.getId();
} 
```

和

```
if (calendar.canEventEdit()) {
    return calendar.getId();
} 
```

不评估`true`（否则他们会返回一个整数，你说）。所以，接下来要做的是确保

*   `account`不为空
*   `canEventEdit()`是真的

通常，NPE 跟踪是这样的，非常简单。只需通过代码向后工作，直到出现某些`NULL`内容，这就是源代码。

# r - 从 R 中具有不同列的另一个 data.frame 更新 data.frame

> ID：13525050
> 
> 赞同：2
> 
> 时间：2012-11-23T08:00:01.870
> 
> 标签：r, dataframe, merging-data

给定两个数据框

```
old.df = data.frame(SampleNo=c('A1', 'B4', 'C5', 'D4'), Result=c(rep("Successful",4)), NoUnit = c(rep(4,4)))
new.df = data.frame(SampleNo=c('A1', 'C5', 'D4', 'E4'), Result=c(rep("Successful",2),rep( "Failure",2)),State=c(rep("California",2),rep("New York",2))) 
```

使其具有以下格式：

```
> old.df
  SampleNo     Result      NoUnit
1       A1     Successful      4
2       B4     Successful      4
3       C5     Successful      4
4       D4     Successful      4

> new.df
  SampleNo     Result      State
1       A1 Successful California
2       C5 Successful California
3       D4    Failure   New York
4       E4    Failure   New York 
```

我想用 new.df 中的新数据更新 old.df 的内容，维护 old.df 的行连续性并从 new.df 添加新列。结果 data.frame 将是：

```
 SampleNo     Result   NoUnit      State
1       A1 Successful      4 California
2       B4 Successful      4       <NA>
3       C5 Successful      4 California
4       D4    Failure      4   New York
5       E4    Failure     NA   New York 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:09:08.297

```
merge(old.df,new.df,all=TRUE)

  SampleNo     Result NoUnit      State
1       A1 Successful      4 California
2       B4 Successful      4       <NA>
3       C5 Successful      4 California
4       D4    Failure      4   New York
5       E4    Failure     NA   New York 
```

**OP更改规则后进行编辑：**

```
df <- merge(old.df,new.df,all=TRUE,by="SampleNo")
df$Result <- with(df,factor(ifelse(is.na(Result.y),
                             as.character(Result.x),as.character(Result.y))))
df$Result.x <- NULL; df$Result.y <- NULL

  SampleNo NoUnit      State     Result
1       A1      4 California Successful
2       B4      4       <NA> Successful
3       C5      4 California Successful
4       D4      4   New York    Failure
5       E4     NA   New York    Failure 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T03:17:56.480

Merge 不会自行执行此操作。但是您并不想在`"Result"`列上合并，只在`"SampleNo"`列上合并，然后合并`"Result"`值，如果可用则使用新值，否则使用旧值。

这是一些执行此操作的代码，适用于除交集以外的所有列`"SampleNo"`

```
merge.by.sample <- function(old.df, new.df, by='SampleNo') {
  r <- merge(old.df, new.df,all=T,by=by)

  merge.col <- function(r, col) {
    xname <- paste0(col, '.x')
    yname <- paste0(col, '.y')

    r[col] <- factor(r[,yname], levels=union(levels(r[,xname]), levels(r[,yname])))
    r[col][is.na(r[col])] <- r[xname][is.na(r[col])]
    r[!(names(r) %in% c(xname, yname))]
  }

  i <- intersect(names(old.df), names(new.df))
  i <- i[!i %in% by]

  for (col in i) {
    r <- merge.col(r, col)
  }
  r
} 
```

# eclipse - 一个接口添加方法，如何为所有类添加默认实现

> ID：13525060
> 
> 赞同：4
> 
> 时间：2012-11-23T08:00:49.163
> 
> 标签：eclipse

现在我有一个DetailUI接口，我有上千个类实现了DetailUI接口，我想添加一个方法isXXX()，我想让当前所有的类自动实现该方法并且该方法默认返回true，有没有eclipse中的简单方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:34:14.087

也许还有另一种方式，但你可以

*   在接口中添加方法声明
*   转到*问题*视图，选择新方法导致的编译错误之一，右键单击并选择*快速修复*
*   选择“添加未实现的方法”，然后选择对话框底部的所有其他类

但是，这将使生成的方法返回 false：

```
public boolean isXXX() {
    // TODO Auto-generated method stub
    return false;
} 
```

因此，您可以搜索并替换为以下搜索正则表达式：

```
// TODO Auto-generated method stub\R\s*return false; 
```

以及以下替换字符串：

```
return true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:34:23.793

是的。转到“问题”视图，并选择所有表明您缺少该方法的问题（“XYZ 类型必须实现继承的...”）。全部选择后，右键单击并选择“快速修复”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T18:56:33.413

对于实现接口的类层次结构，上述解决方案可能并不理想——如果存在抽象超类，它不会因缺少另一个方法而标记错误。我发现使用 Type Hierarchy 视图（Windows 上的 F4）查找顶级类并在那里添加方法更方便。

另一种选择是升级到允许默认实现的 Java 1.8。[https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html](https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html)

# indexing - eGit 添加到索引行为

> ID：13525065
> 
> 赞同：3
> 
> 时间：2012-11-23T08:01:18.843
> 
> 标签：indexing, add, edit

我用了 git 有一段时间了，现在我想用 eGit 进行 Eclipse 集成。

我对“添加到索引”操作行为有疑问。它的行为与`git add`命令完全一样吗？

让我们考虑以下示例：

1.  对文件进行一些更改（我们称之为 ver1）。
2.  标记它并单击“添加到索引”。
3.  在同一个文件中进行更多更改（我们称之为 ver2）。
4.  做出承诺。

哪个版本的文件将提交到存储库中？如果“添加到索引”的行为类似于`git add`它应该是 ver1。但它会是ver1还是ver2？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T07:45:39.007

好的，因为没有人愿意回应我做了一些实验，看起来 eGit *Add to index 的*行为类似于*git add*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T09:49:02.567

在项目节点上“单击团队”>“添加到索引”。（此菜单项在旧版本的 Egit 上名为 Add。）

请参阅[EGit/用户指南 - Eclipsepedia](https://wiki.eclipse.org/EGit/User_Guide)

# windows - C0000005 在进入 C++ 的 main 之前加载 Windows DLL 时访问冲突

> ID：13525070
> 
> 赞同：1
> 
> 时间：2012-11-23T08:01:49.623
> 
> 标签：windows, dll, access-violation

在进入我的主函数之前加载 3rdparty Windows DLL 时，我遇到了“第一次机会异常”，即“访问冲突 -code c0000005”。我们能否确定问题出在我的代码还是 3rdparty 代码上？

下面是windbg的日志：

```
Microsoft (R) Windows Debugger Version 6.12.0002.633 X86
Copyright (c) Microsoft Corporation. All rights reserved.

CommandLine: D:\risc\rlx_vm\trunk\msvc80\debug\test_rlxvm_ovpsim_dma_ocp_tl2.exe
Symbol search path is: D:\risc\rlx_vm\trunk\msvc80\debugwithreleasecrt;D:\risc\rlx_vm\trunk\msvc80\debug
Executable search path is: 
ModLoad: 00400000 008af000   test_rlxvm_ovpsim_dma_ocp_tl2.exe
ModLoad: 7c920000 7c9b6000   ntdll.dll
ModLoad: 7c800000 7c91e000   C:\WINDOWS\system32\kernel32.dll
ModLoad: 10000000 10021000   R:\home\STools\MIPS\mips_iasim-1.1.1\bin\Windows32\libRuntimeLoader.dll
ModLoad: 77be0000 77c38000   C:\WINDOWS\system32\msvcrt.dll
ModLoad: 10480000 1057e000   C:\WINDOWS\WinSxS\x86_Microsoft.VC80.DebugCRT_1fc8b3b9a1e18e3b_8.0.50727.4053_x-ww_d014c028\MSVCP80D.dll
ModLoad: 10200000 10321000   C:\WINDOWS\WinSxS\x86_Microsoft.VC80.DebugCRT_1fc8b3b9a1e18e3b_8.0.50727.4053_x-ww_d014c028\MSVCR80D.dll
ModLoad: 78130000 781cb000   C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.6195_x-ww_44262b86\MSVCR80.dll
ModLoad: 77d10000 77da0000   C:\WINDOWS\system32\USER32.dll
ModLoad: 77ef0000 77f39000   C:\WINDOWS\system32\GDI32.dll
(18c58.184f0): Break instruction exception - code 80000003 (first chance)
eax=00251eb4 ebx=7ffde000 ecx=00000007 edx=00000080 esi=00251f48 edi=00251eb4
eip=7c92120e esp=0012fb20 ebp=0012fc94 iopl=0         nv up ei pl nz na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00000202
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for ntdll.dll - 
ntdll!DbgBreakPoint:
7c92120e cc              int     3
0:000> g
ModLoad: 008b0000 00a20000   R:\home\STools\MIPS\mips_iasim-1.1.1\bin\Windows32\libOVPsimMIPS.dll
ModLoad: 00a20000 00bc6000   R:\home\STools\MIPS\mips_iasim-1.1.1\bin\Windows32\mipsiasim11.dll
ModLoad: 5fdd0000 5fe25000   C:\WINDOWS\system32\NETAPI32.dll
ModLoad: 77da0000 77e49000   C:\WINDOWS\system32\ADVAPI32.dll
ModLoad: 77e50000 77ee3000   C:\WINDOWS\system32\RPCRT4.dll
ModLoad: 77fc0000 77fd1000   C:\WINDOWS\system32\Secur32.dll
ModLoad: 76320000 76367000   C:\WINDOWS\system32\comdlg32.dll
ModLoad: 5d170000 5d20a000   C:\WINDOWS\system32\COMCTL32.dll
ModLoad: 7d590000 7dd84000   C:\WINDOWS\system32\SHELL32.dll
ModLoad: 77f40000 77fb6000   C:\WINDOWS\system32\SHLWAPI.dll
ModLoad: 71a40000 71a4b000   C:\WINDOWS\system32\WSOCK32.dll
ModLoad: 71a20000 71a37000   C:\WINDOWS\system32\WS2_32.dll
ModLoad: 71a10000 71a18000   C:\WINDOWS\system32\WS2HELP.dll
ModLoad: 65100000 65111000   R:\home\STools\MIPS\mips_iasim-1.1.1\bin\Windows32\pthreadGC2-w32.dll
ModLoad: 76d30000 76d48000   C:\WINDOWS\system32\IPHLPAPI.DLL
(18c58.184f0): Access violation - code c0000005 (first chance)
First chance exceptions are reported before any exception handling.
This exception may be expected and handled.
eax=00000000 ebx=5d170000 ecx=0012ee24 edx=0000004c esi=7c813029 edi=00000000
eip=7c92e470 esp=0012ee2c ebp=0012ee50 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=003b  gs=0000             efl=00010206
ntdll!KiUserCallbackDispatcher+0x10:
7c92e470 ff1490          call    dword ptr [eax+edx*4] ds:0023:00000130=????????
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\WINDOWS\system32\COMCTL32.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for C:\WINDOWS\system32\kernel32.dll - 
*** ERROR: Symbol file could not be found.  Defaulted to export symbols for R:\home\STools\MIPS\mips_iasim-1.1.1\bin\Windows32\libRuntimeLoader.dll - 
```

磁盘 R 上的 DLL 是 3rdparty 库。

# android - 在滚动视图的开头动态添加视图

> ID：13525074
> 
> 赞同：0
> 
> 时间：2012-11-23T08:02:15.193
> 
> 标签：android, scrollview

我在水平滚动视图中有一个线性布局（用按钮填充）。在运行时，它将加载新数据并从线性布局的开头添加视图。在添加视图之前，例如scrollx为1000，显示按钮A。但是在添加视图之后，scrollx 仍然是 1000，但它显示了按钮 A 的一些新添加的按钮。我希望添加后，当前显示不会改变。只有当我向左移动时，我才能看到新添加的视图。

任何人都可以提供一些帮助吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:28:51.783

您可以设置新按钮的特定宽度（或通过覆盖自定义按钮上的 onMeasure 来测量它）。然后手动滚动到 1000+newWidth。

请注意，手动滚动可能应该在绘制视图之后发生，因此将其作为可运行的内容发布到 UI 线程上应该可以工作。

# iphone - 如何保存字符串索引

> ID：13525076
> 
> 赞同：1
> 
> 时间：2012-11-23T08:02:19.970
> 
> 标签：iphone, objective-c, xcode, nsstring, char

我有一个字符串，它的每个字符都存储在一个 char 中

```
char currentLetter; 
```

当循环运行时`i=0`，字符串的第一个字母被复制到 currentLetter。并在`i=1`第二个字母上被复制。但是，我希望我保存特定字母的每个字符串索引。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:11:41.603

```
NSString *str = @"Hello World";
NSMutableIndexSet *indexSet = [NSMutableIndexSet indexSet];

for (NSUInteger i = 0; i < [str length]; i++)
{
    if ([str characterAtIndex:i] == 'o')
        [indexSet addIndex:i];
}

// indexSet now contains all the indexes of the letter 'o' in "str"
// which should be 4 and 7. 
```

[`NSIndexSet`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSIndexSet_Class/Reference/Reference.html#//apple_ref/occ/cl/NSIndexSet)和[`NSMutableIndexSet`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableIndexSet_Class/Reference/Reference.html)类对于存储索引很有用，因为它们提供了其他方法来操作和有效处理索引。

# javascript - 聊天窗口问题

> ID：13525078
> 
> 赞同：-1
> 
> 时间：2012-11-23T08:02:40.090
> 
> 标签：javascript, html, css

[http://demo.rimits.com/rpl/paintball-pole-systemsPaintball.html](http://demo.rimits.com/rpl/paintball-pole-systemsPaintball.html)

你好 ！

请参考上面的链接。

我有一些聊天窗口打开问题，如果有人请解决它，我将不胜感激。

看，在页脚（灰色部分）有一个标题“其他信息”，在它下面有 2 个链接，a）实时支持 b）在线商店。而且这两个链接也显示在横幅下方的右栏（TRC）的顶部。

所以，我的问题是，聊天窗口代码仅针对页脚或 TRC 的 1 个选项运行，但我希望它必须为这两个选项运行。

谢谢巴尔卡尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:11:13.653

请在您的实时支持页脚链接属性中添加以下代码。onclick="psAszUow()"

# grails - Grails GSP 组织

> ID：13525082
> 
> 赞同：0
> 
> 时间：2012-11-23T08:02:45.427
> 
> 标签：grails, gsp

我正在寻找有关如何组织 grails GSP 以及如何管理 GSP 扩展的最佳实践。我正在开发一个应用程序，我需要创建自己的 GSP HTML 元素并覆盖标准 GSP 元素，我想知道如何组织它们。

我的考虑是编写一个 Grails 插件，它有自己的 Taglib 和我自己的命名空间。并创建我需要的所有元素并覆盖现有元素。

有没有关于如何组织这样的事情的好例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:59:23.783

我同意 taglibs 是 GSP 定制的最佳场所。甚至[Grails 网站](https://github.com/grails-samples/grails-website/)也有自己的标签。我现在能记住的几点：

*   [这篇很棒的文章](http://www.viaboxxsystems.de/mastering-grails-taglibs)给了你一些关于标签库的提示。这篇文章向您展示了如何测试、覆盖和重用标签。
*   对于命名空间，我建议您首先检查应用程序将使用哪些插件，以避免冲突。
*   对于集成测试，您可以扩展`GroovyPagesTestCase`
*   在 taglib 中生成 html 可能有点难以维护，但您可以创建模板并使用[g.render](http://grails.org/doc/latest/ref/Tags/render.html)（如果在插件中，请始终在调用中定义此属性）或使用[GSP Taglibs 插件](http://grails.org/plugin/gsp-taglib)

# email - 配置 Lotus Notes 以解析标头中的 utf8

> ID：13525090
> 
> 赞同：-1
> 
> 时间：2012-11-23T08:03:47.083
> 
> 标签：email, lotus-notes, codepages, messagebroker

这个问题与我之前问过的一个问题有关[https://stackoverflow.com/questions/13158412/message-broker-sending-email](https://stackoverflow.com/questions/13158412/message-broker-sending-email) 问题如下：我通过 Message Broker 电子邮件节点发送电子邮件，而 Lotus Notes客户端正确显示邮件正文，但主题行乱码；它似乎无法解析主题，并显示如下： =?UTF8?Q?Application_=E2=84=96_TESTIROVANE._Approval?= 消息和主题行都在其他客户端中正确显示，例如 Gmail 网络客户端. 我应该怎么做才能让 Lotus Client 解析 header 并正常显示？我应该以某种方式配置客户端本身还是配置电子邮件节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:23:39.750

我同意这实际上不是一个编程问题

以防万一其他人在邮件头中遇到同样的问题：我们没有设法以某种方式更改 Lotus 配置，所以我们最终编写了一个 Java 类来处理所有这些电子邮件内容，为头和消息指定 utf-8，并且它现在可以使用，至少可以使用 Lotus 和免费的 smtp-servers/web-clients

# jquery - jQuery AJAX 状态“200 OK”，但没有数据响应

> ID：13525097
> 
> 赞同：6
> 
> 时间：2012-11-23T08:04:40.027
> 
> 标签：jquery, ajax, json, firefox

**jQuery：**

```
$.ajax({
url : url,
type : 'GET',
dataType: 'json',
data: {
    'FN'    : 'GetPages',
    'PIN'   : '7659' 
},
xhrFields: {
   withCredentials: true
},
crossDomain: true,
success: function(data) {
    alert('succsess');
    console.log('data', data);
},
error: function (xhr, ajaxOptions, thrownError) {
    alert('error');
    console.log(xhr.status);
    console.log(thrownError);
}
}); 
```

**Firebug 火狐网络**

[![萤火虫错误](../Images/10a736d9b310399125821efc194e1d38.png)](https://i.stack.imgur.com/I8dAe.png)

**发生什么了**

AJAX“错误：”事件被触发，我的*console.log*输出是：

> xhr.status -> 0
> 
> throwError -> (空字符串)

**这是正常的吗？当我在浏览器中输入 URL 时，我会收到包含 JSON 内容的文件下载，这应该不是问题吧？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T09:52:15.157

**感谢@CrimsonChin，我知道它是同源策略问题**

> 在计算中，同源策略是许多浏览器端编程语言（例如 JavaScript）的重要安全概念。该策略允许在来自同一站点的页面上运行的脚本无特定限制地访问彼此的方法和属性，但禁止跨不同站点的页面访问大多数方法和属性。 [1]

（来自[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)）

授予 JavaScript 客户端对您的资源的基本访问权限只需要添加一个 HTTP 响应标头，即：

```
Access-Control-Allow-Origin: *
Access-Control-Allow-Origin: http://foo.example.com 
```

（来自[http://enable-cors.org/](http://enable-cors.org/)）

Ofc，将 JSON 响应转换为[JSONP](http://en.wikipedia.org/wiki/JSONP)响应也可以。谢谢@djakapm

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:20:39.770

试试这个

```
$.ajax({ type : "GET", 
             url : URL, 
             data: {
             'FN'    : 'GetPages',
             'PIN'   : '7659' 
             },
            xhrFields: {
             withCredentials: true
             },
             crossDomain: true,
             dataType : "jsonp", 
             jsonp : "jsoncallback", 
             jsonpCallback : "SMS", 
             cache : true, 
              success : function(service_data) { 

                      },
              error : function(msg) {
                 alert(JSON.stringify(msg));
                }
          }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:10:42.307

我无法从图像中弄清楚，但是如果您尝试将 AJAX 请求发送到不同的域，则需要使用**JSONP**，简单的 AJAX 请求是不够的

尝试更改`dataType: 'json'`为`dataType: 'jsonp'`

并添加`callback=?`到您的`URL`

# spring - 事务在junit中不起作用？

> ID：13525106
> 
> 赞同：4
> 
> 时间：2012-11-23T08:05:15.077
> 
> 标签：spring, junit, transactions

这里有很多关于 Transactions 和 JUnit 的问题。但是请在丢弃它之前通读一遍，因为我找不到任何有同样问题的人。

我有一个商业方法，注释`@Transactional`。在这种方法中，如果发生某些特殊情况，我将以编程方式进行回滚。`TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();`

现在让我们不要讨论以编程方式回滚是好是坏。让我们接受它在那里，并接受它会留在那里并与它一起工作。

如果我启动我的应用程序并以老式的方式测试这种业务方法，那么一切都会完美运行。当东西应该回滚时，它被回滚，当一切正常时，一切都好。而且我还做了一个测试，`@Transactional`只是为了看到没有任何东西被回滚，即使它应该回滚。一切都按计划进行。

但是我遇到的问题是 JUnit。目前我有这个方法的 2 个 JUnit 测试。1个应该失败（并以编程方式触发回滚）和一个成功而没有回滚的。

我已经尝试了很多不同的 Junit 课程设置。目前它看起来像这样：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:springTestContext.xml", "classpath:springTestContext-dao.xml"})
@TransactionConfiguration(transactionManager = "txManager")
public class MyManagerTest extends AbstractTransactionalJUnit4SpringContextTests {
    @Mock
    private ProductDao productDao;

    @InjectMocks
    MyManager myManager = new MyManagerImpl();

    @Before
    public void setup() {
        MockitoAnnotations.initMocks(this);
    }

    @Test
    public void testUnParsableXml() {
        String xml = "adlsfas";
        Response response = myManager.processXMLContent(xml);
        assertFalse(response.isSuccess());
        System.out.println(response.getResponse());
    }

}
@Service("myManager")
public class MyManagerImpl extends BaseManager implements MyManager {
    @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
    public Response processXMLContent(String xml) {
       /* NB. Extremly simplified version.... */
       Response response = new Response();
       try {
            parseXml(); // just dummy sample. Its actually parsing xml
            response.setSuccess(true)
       catch(SAXException e) {
           TransactionAspectSupport.currentTransactionStatus().setRollbackOnly();
           response.setSuccess(false);
       }
       return response;
    }
} 
```

springTestContext 有`<tx:annotation-driven`注解，dao-context 有事务管理器、实体工厂和数据源。可能甚至不需要那些？因为这个测试在数据库中绝对没有任何关系。我要测试的是，如果事务失败，则会在事务中以编程方式进行回滚。

但是我添加它们的原因是因为我试图在这里获得帮助的错误。每当在业务方法中以编程方式调用回滚时，我总是会收到此错误（仅适用于 junit 测试，否则完美运行）：

```
org.springframework.transaction.NoTransactionException: No transaction aspect-managed TransactionStatus in scope 
```

所以我对你的问题是：我做错了什么。我怎样才能让我的商业方式进行交易？然后作为一个额外的问题，我如何测试在事务上调用了回滚？

感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T19:20:49.337

您必须使用由**AbstractTransactionalJUnit4SpringContextTests**设置的**SpringJUnit4ClassRunner**运行测试，但是您已经用**MockitoJunitRunner**覆盖了它。只需删除测试顶部的**RunWith即可。**

 ******* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T06:17:30.557

您创建 MyManager 类的新实例，`MyManager myManager = new MyManagerImpl();`而不是使用上下文中的实际 bean

```
@Resource(name="myContext")
MyManager myManager; 
```

显然，[没有创建代理，](http://blog.springsource.org/2012/05/23/understanding-proxy-usage-in-spring/)您所指的 MyManager 实例甚至不是 Spring bean，因为它不是在 DI 容器内创建的。

至于`@Transactional`测试类中的注释方法，我相信它们是用[TransactionalTestExecutionListener](http://srcrr.com/java/spring/3.1.0/reference/org/springframework/test/context/transaction/TransactionalTestExecutionListener.html)执行的（所以机制与容器中的有点不同），但我认为这不应该影响容器本身的事务包装器 - 请参阅 beforeTestMethod 和 afterTestMethod如果需要，请检查 PlatformTransactionManager 的操作。

从[文档](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/testing.html#testcontext-ctx-management)中：

> 在 TestContext 框架中，事务由 TransactionalTestExecutionListener 管理，默认情况下通过 @TestExecutionListeners 注解配置，即使您没有在测试类上显式声明 @TestExecutionListeners。但是，要启用对事务的支持，您必须在 @ContextConfiguration 语义加载的应用程序上下文中提供 PlatformTransactionManager bean。此外，您必须在类或方法级别声明@Transactional。

所以我认为运行`@Transactional`测试类和实际bean的注释方法之间没有太大区别（当然，测试类上的默认回滚标志除外） - TransactionAspectSupport 和 TransactionalTestExecutionListener 都只是调用底层的方法[平台事务管理器](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/PlatformTransactionManager.html)。

PS至于您的集成测试，不清楚您要模拟什么bean（ProductDao和MyManager）-当我们使用Spring进行集成测试时，我们测试真正的bean如何相互作用，仅模拟容器外部的依赖项（例如使用 MockServletContext 而不是绑定到真实的 Web 服务器）或用轻量级/嵌入式服务器替换对重量级/生产级服务器的依赖——这是现实条件、便利性和测试执行速度之间的平衡。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-28T06:23:13.607

如果你只是想通过这个测试，你可以在你的方法上添加@Test(expected = NoTransactionException.class)。******

# ruby-on-rails - 使用 web_steps.rb 的黄瓜声明性步骤定义

> ID：13525108
> 
> 赞同：0
> 
> 时间：2012-11-23T08:05:15.403
> 
> 标签：ruby-on-rails, ruby, cucumber

将 Cucumber 用于 BDD (CS169.x1@edX) 时，会返回以下消息以响应“cucumber features/filter_movie_list.feature”的执行：

```
When I uncheck the following ratings: G, PG-13                 # features/step_definitions/movie_steps.rb:44
  Undefined step: "When I uncheck "ratings_G"" (Cucumber::Undefined)
  ./features/step_definitions/movie_steps.rb:52:in `block (2 levels) in <top (required)>'
  ./features/step_definitions/movie_steps.rb:49:in `each'
  ./features/step_definitions/movie_steps.rb:49:in `/I (un)?check the following ratings: (.*)/'
  features/filter_movie_list.feature:30:in `When I uncheck the following ratings: G, PG-13'
...
You can implement step definitions for undefined steps with these snippets:

When /^When I uncheck "(.*?)"$/ do |arg1|
  pending # express the regexp above with the code you wish you had
end 
```

有问题的特定配置在“features/filter_movie_list.feature”中有一个声明性步骤，它说：

> 当我取消选中以下评级时：G、PG-13

尝试在“features/step_definitions/movie_steps.rb”中实现声明性步骤（以重用“features/step_definitions/web_steps.rb”的命令步骤），如下所示：

```
When /I (un)?check the following ratings: (.*)/ do |uncheck, rating_list|
  step "When I uncheck \"ratings_G\"" 
```

和一个有效的 'features/step_definitions/web_steps.rb' 文件（即，在 gem 安装后由 'rails generate cucumber_rails_training_wheels:install' 创建的文件），具有如下命令式默认步骤：

```
When /^(?:|I )uncheck "([^"]*)"$/ do |field|
  check(field)
end 
```

此外，Cucumber 似乎可以访问 'features/step_definitions/web_steps.rb'，因为添加`When I uncheck "ratings_G"`到 'features/step_definitions/movie_steps.rb' 成功；有人知道可能导致这种行为的原因吗？声明性步骤的实现甚至已被简化，因此不会发生变量替换......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:41:40.423

我试过了：

```
When I uncheck the following ratings: "G, PG-13" 
```

然后在步骤文件中：

```
When /^I uncheck the following ratings: "([^"]*)"$/ do |arg1|
  puts "arg1: #{arg1}"
end 
```

..似乎对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T03:23:33.560

**问题**

问题在于您如何尝试从另一个步骤调用一个步骤。

代码的第二行：

```
When /I (un)?check the following ratings: (.*)/ do |uncheck, rating_list|
  step "When I uncheck \"ratings_G\"" 
```

正在寻找一个步骤定义，如：

```
When /^When (?:|I )uncheck "([^"]*)"$/ do |field|
  check(field)
end 
```

请注意，它正在步骤正则表达式中寻找“时间”。这不太可能存在，因此未定义的步骤错误。

**解决方案**

要从步骤调用步骤，您需要执行以下操作之一：

1) 使用`step`并确保不包含 Given/When/Then 关键字：

```
When /I (un)?check the following ratings: (.*)/ do |uncheck, rating_list|
  step "I uncheck \"ratings_G\"" 
```

2) 或者，如果您更喜欢包含 Given/When/Then，请`steps`改用：

```
When /I (un)?check the following ratings: (.*)/ do |uncheck, rating_list|
  steps %Q{
    When I uncheck "ratings_G"
  } 
```

请参阅[黄瓜维基](https://github.com/cucumber/cucumber/wiki/Calling-Steps-from-Step-Definitions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T19:38:08.183

在这种情况下，所提供的课程材料阐明了差异，但并未引导我们在两个非常相似的步骤之间进行描述；将“当我取消选中以下...”更改为“当取消选中以下...”允许 web_steps.rb 回到范围并根据需要执行（之前链接的帖子，[链接：黄瓜矛盾错误消息](https://stackoverflow.com/questions/13560114/cucumber-contradictory-error-messages)，有更多细节）。

# c++ - Mysql C++ 连接器崩溃问题

> ID：13525109
> 
> 赞同：0
> 
> 时间：2012-11-23T08:05:20.993
> 
> 标签：c++, mysql

团队，

我正在尝试使用 mysqlclient 版本 16 和 Mysql c++ 连接器连接到 Mysql 数据库并执行一些 DB 操作。我们的产品依赖于这些库的代码已经编写好了。Mysql 服务器版本 5.1.56。我可以看到它在各种场合都崩溃了。

下面是几个崩溃转储。知道为什么会发生这些吗？通常在关闭连接和创建连接期间。

1.  对于关闭连接，我使用 mSqlCon->close()
2.  对于使用以下内容创建连接 iam：

    驱动程序 = get_driver_instance(); mSqlCon = driver->connect(connection_properties);

mSqlCon 的类型为 sql::Connection *。任何帮助表示赞赏！

```
#0 0x00007f82b4f064ff 在?? () 来自 /usr/local/lib64/mysql/libmysqlclient.so.16
#1 0x00007f82b4f06758 in net_real_write () from /usr/local/lib64/mysql/libmysqlclient.so.16
#2 0x00007f82b4f06c3b in net_flush() from /usr/local/lib64/mysql/libmysqlclient.so.16
#3 0x00007f82b4f03279 in mysql_real_connect () from /usr/local/lib64/mysql/libmysqlclient.so.16
#4 0x00007f82b4a630d7 在 sql::mysql::NativeAPI::LibmysqlStaticProxy::real_connect (this=, mysql=0x7f82ac041680,
    主机=0x7f82ac053d80 "K"，用户=0x4f，密码=0x0，db=0x35a5d367fc14006c，
    端口=3306，unix_socket=0x7f82ac041680“\a”，client_flag=140199208425088）
    在/export/home2/tmp/cteam/bs/connector-c++-64bit/src/mysql-connector-c++-1.1.1/driver/nativeapi/libmysql_static_proxy.cpp:316
#5 0x00007f82b4a649a9 in sql::mysql::NativeAPI::MySQL_NativeConnectionWrapper::connect (this=0x7f82ac0d22d0, host=,
    user=, passwd=, db=, port=, socket_or_pipe=...,
    client_flag=140199208425088) 在 /build/cteam/bs/linux-x86_64/connector-common-alt-64bit/boost/include/boost-1_39/boost/smart_ptr/shared_ptr.hpp:408
#6 0x00007f82b49f8ebe in sql::mysql::MySQL_Connection::init (this=0x7f82ac0d3740, properties=...)
    在/export/home2/tmp/cteam/bs/connector-c++-64bit/src/mysql-connector-c++-1.1.1/driver/mysql_uri.h:51
#7 0x00007f82b49f57b3 in MySQL_Connection (this=0x7f82ac0d3740, _driver=, _proxy=, properties=...)
    在/export/home2/tmp/cteam/bs/connector-c++-64bit/src/mysql-connector-c++-1.1.1/driver/mysql_connection.cpp:141
#8 0x00007f82b4a062cd in sql::mysql::MySQL_Driver::connect (this=0x7f82ac0466e0, properties=...)
    在/build/cteam/bs/linux-x86_64/connector-common-alt-64bit/boost/include/boost-1_39/boost/smart_ptr/scoped_ptr.hpp:96

```

```
#0 0x00007fbf785e7745 in free () from /lib64/libc.so.6
#1 0x00007fbf79b49224 in __gnu_cxx::new_allocator::deallocate (this=,
    __nstart=0x7fbf740dbc76, __nfinish=0x7fbf740dbc80) 在 /usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../include/c++/3.4.6/ext/new_allocator。小时：86
#2 std::_Deque_base >::_M_deallocate_node (
    这=，__nstart=0x7fbf740dbc76，__nfinish=0x7fbf740dbc80）
    在/export/home2/tmp/cteam/bs/connector-c++-64bit/src/mysql-connector-c++-1.1.1/driver/mysql_debug.cpp:401
#3 std::_Deque_base >::_M_destroy_nodes (
    这=，__nstart=0x7fbf740dbc76，__nfinish=0x7fbf740dbc80）
    在/export/home2/tmp/cteam/bs/connector-c++-64bit/src/mysql-connector-c++-1.1.1/driver/mysql_debug.cpp:497
#4 0x00007fbf79b491d0 in ~_Deque_base (this=0x7fbf74049db00000, __in_chrg=)
    在/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../include/c++/3.4.6/bits/stl_deque.h:425
#5 0x00007fbf79b48def in ~MySQL_DebugLogger (this=0x7fbf740444d0, __in_chrg=)
    在/usr/lib/gcc/x86_64-redhat-linux/3.4.6/../../../../include/c++/3.4.6/bits/stl_deque.h:703
#6 0x00007fbf79b4829f in checked_delete (this=)
    在/build/cteam/bs/linux-x86_64/connector-common-alt-64bit/boost/include/boost-1_39/boost/checked_delete.hpp:34
#7 boost::detail::sp_counted_impl_p::dispose (this=)
    在/build/cteam/bs/linux-x86_64/connector-common-alt-64bit/boost/include/boost-1_39/boost/smart_ptr/detail/sp_counted_impl.hpp:78
#8 0x00007fbf79b3ae22 in ~MySQL_ConnectionData (this=0x7fbf740d6140, __in_chrg=)
    在/build/cteam/bs/linux-x86_64/connector-common-alt-64bit/boost/include/boost-1_39/boost/smart_ptr/detail/sp_counted_base_gcc_x86.hpp:145
#9 ~MySQL_Connection (this=0x7fbf740d6140, __in_chrg=)
    在/export/home2/tmp/cteam/bs/connector-c++-64bit/src/mysql-connector-c++-1.1.1/driver/mysql_connection.cpp:162

```

# php - mysql查询以获得未来2个月内的结果

> ID：13525116
> 
> 赞同：1
> 
> 时间：2012-11-23T08:05:47.543
> 
> 标签：php, mysql

我想获得未来 2 个月内的结果，我正在使用以下查询（数据库中的发布日期格式正常，**2013 年 3 月 8 日**）

```
SELECT * FROM imdb WHERE (STR_TO_DATE(`release`, '%e %M %Y')-now()<2months) ORDER BY STR_TO_DATE(`release`, '%e %M %Y') DESC LIMIT 20 
```

我知道 2 个月不会工作......那么这将如何在 mysql 中工作......谢谢......我正在尝试的其他方式是

```
SELECT * FROM imdb WHERE (STR_TO_DATE(`release`, '%e %M %Y')-now()<5184000000) ORDER BY STR_TO_DATE(`release`, '%e %M %Y') DESC LIMIT 20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:16:26.823

此查询可能会为您提供输出：

```
 SELECT * FROM tbl_name WHERE DATE_SUB(CURDATE(),INTERVAL 30 DAY) 
```

让我知道解决方案

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:16:34.887

试试这个 ：：

```
SELECT * FROM imdb WHERE DATE_SUB(CURRDATE(),(STR_TO_DATE(`release`, '%e %M %Y')) <60 ORDER BY STR_TO_DATE(`release`, '%e %M %Y') DESC LIMIT 20 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:17:29.147

像下面这样的东西应该会有所帮助

```
SELECT * FROM `imdb` WHERE ( DATE_SUB(`release`, INTERVAL 2 MONTH) < now()) ORDER BY STR_TO_DATE(`release`, '%e %M %Y') DESC LIMIT 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:25:17.057

```
$sql = "SELECT * FROM tableName ( SELECT MONTH(datefieldName) AS m , DAY(datefiled) As d FROM tableName) AS tmp ORDER BY (m,d) < ( MONTH(CURDATE()), DAY(CURDATE()) ), m , d limit 0,20"; 
```

希望它对你有用！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T08:31:39.160

thx伙计们，我找到了ans（ji先生帮助了我；））

```
"SELECT * FROM imdb WHERE (TO_DAYS(STR_TO_DATE(`release`, '%e %M %Y'))-TO_DAYS(NOW())<60 && TO_DAYS(STR_TO_DATE(`release`, '%e %M %Y'))-TO_DAYS(NOW())>0) ORDER BY STR_TO_DATE(`release`, '%e %M %Y') LIMIT 20" 
```

这样我就可以限制开始和结束日期......从现在开始（）......希望会有所帮助

# c# - 我在我的 linq 中处于死胡同吗？

> ID：13525118
> 
> 赞同：1
> 
> 时间：2012-11-23T08:06:10.653
> 
> 标签：c#, linq

我的数据库中有几个人。其中一些列在“OverviewSortOrders”表中，但不是全部。当我在我的 linq 中收集我的所有人员时，我加入了 OverviewSortOrders 但未在该表中列出的人员当然不在我的结果中。但我想要那些人，即使他们是否在那个桌子上。

```
from...
join...
join..
 join sorting in db.OverviewSortOrders on person.PersonRef equals sorting.PersonRef into moso
 from subsorting in moso.DefaultIfEmpty()
 where subsorting.UserRef == rp.UserRef
    select new
                        {
    SortOrder = (subsorting == null ? int.MaxValue : subsorting.SortOrder),
    ...
    ... 
```

如果人员不在表中，则不会出现以下情况：“其中 subsorting.UserRef == rp.UserRef”。但即使它们在表中或不在表中，我也想将它们收集到我的列表中。但是在那些有 sortOrder 的情况下，我会设置它的值。

问题是：我是否可以在 linq 中解决这个问题，并给那些有价值的人一个价值，给那些不在桌子上的人一个 maxValue。或者我是否需要从我上面粘贴的 linq 中取出那部分。并收集我所有的人（即使他们是否在“OverviewSortOrders”表中）然后给他们价值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:18:46.070

改变：

```
from subsorting in moso.DefaultIfEmpty()
where subsorting.UserRef == rp.UserRef 
```

...到：

```
from subsorting in (
  from ss in moso
  where ss.UserRef == rp.UserRef
  select ss
  ).DefaultIfEmpty() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:13:22.253

我认为您需要的是左外连接。您已经这样做了，`DefaultIfEmpty`但`where`随后的条件将其恢复。

尝试像这样更改它：

```
where subsorting == null || subsorting.UserRef == rp.UserRef 
```

# c# - 每次循环执行 C# 时更改方法调用

> ID：13525119
> 
> 赞同：0
> 
> 时间：2012-11-23T08:06:55.650
> 
> 标签：c#, loops, methods, for-loop

好的，所以我想打电话

```
for (int i = 0; i < b; b--)
{
    color += ChooseColor() + " ";
} 
```

重要的是它被多次调用。我的 ChooseColors() 是

```
private static string ChooseColor()
{
    Random random = new Random();
    var colors = new List<string> { "Blue", "Red", "Green", "Indigo", "Black", "White", "Violet", "Turquoise", "Pink", "Lavender", "Cinder", "Fuschia", "Orange" };
    int index = random.Next(colors.Count);
    string colorName = colors[index];
    colors.RemoveAt(index);
    return colorName;
} 
```

问题是，我希望它每次都调用一个新的 ChooseColor 实例。例如，它将打印 Black White 而不是 Black Black。现在它一遍又一遍地打印完全相同的东西，而不是转储电流并再次调用（这是我认为循环所做的>.<）有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:08:59.673

该数组是在方法中声明的，因此当您再次调用该方法时，它会重新声明并重新填充。您必须在方法之外静态声明颜色列表。

此外，随机化器在每次方法调用时都会再次初始化 - 在方法之外也只初始化一次随机化器。

```
private static Random random = new Random();
private static List<string> colors = new List<string> { ... };

private static string ChooseColor()
{
    if (colors.Count > 0)
    {
        int index = random.Next(colors.Count);
        string colorName = colors[index];
        colors.RemoveAt(index);
        return colorName;
    }

    return String.Empty;
} 
```

请注意，当调用此方法时，现在在颜色列表中没有剩余颜色时会返回一个空字符串。我认为除了解决随机化器问题之外，您还应该重新考虑设计（尤其是为什么有必要从列表中删除颜色）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:08:50.797

在这种情况下，创建 Random 类静态的实例。

这边走

```
static Random random = new Random(); // Global Declaration

private static string ChooseColor()
{
    var colors = new List<string> { "Blue", "Red", "Green", "Indigo", "Black", "White", "Violet", "Turquoise", "Pink", "Lavender", "Cinder", "Fuschia", "Orange" };
    int index = random.Next(colors.Count);
    string colorName = colors[index];
    colors.RemoveAt(index);
    return colorName;
} 
```

有关更多信息，请阅读此

[生成的随机数总是相等的](https://stackoverflow.com/questions/10598000/generated-random-numbers-are-always-equal/10598041#10598041)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T08:14:46.067

您创建`Random`实例的时间太近了。由于它们是从时钟播种的，它们都将以相同的数字开始。在函数外部创建一个实例，然后将其发送给您调用它。

此外，您每次都在创建一个新列表，因此从列表中删除项目无效。在函数外创建列表：

```
Random random = new Random();
List<string> colors = new List<string> { "Blue", "Red", "Green", "Indigo", "Black", "White", "Violet", "Turquoise", "Pink", "Lavender", "Cinder", "Fuschia", "Orange" };
for (int i = 0; i < b; b--) {
  color += ChooseColor(colors, random) + " ";
}

private static string ChooseColor(List<string> colors, Random random) {
  int index = random.Next(colors.Count);
  string colorName = colors[index];
  colors.RemoveAt(index);
  return colorName;
} 
```

# java - Spring Web Service - Web 服务通信

> ID：13525122
> 
> 赞同：0
> 
> 时间：2012-11-23T08:07:21.277
> 
> 标签：java, web-services, synchronization

今天我有一个理论问题（我只是找不到编写示例代码的方法）。

我的系统架构如下所示：`Client <--> Web Service1 <--> query <--> Web Service2 <--> Server`.

我无法更改它，因为我的公司需要将其分开。

问题在于`client`向 发送请求时同步`WebService1`，`WS1`将对象放入查询中， `WS2`一直在观察查询并检查是否有新内容，如果是，则向其发送`Server`处理请求并给出正确响应的请求回来`Client`。

所有请求的`Server`处理时间不相等。我必须从客户那里获得请求并在一个会话中发送请求。`Thread.sleep`或任何停止执行代码的方法都是不可接受的。

谁能给我一个提示我应该使用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:36:35.947

好的，让我们忘记队列和服务器之间的通信。

1.  客户端通过WS1（同步通信）向服务器1发送请求
2.  服务器 1 中的进程写入队列。
3.  服务器 1 中的进程等待来自队列的答案。在这一点上，恐怕，由于与客户端的通信是同步的，客户端应该等待。如何？`Thread.sleep`是一个解决方案。

客户应该等多久？这取决于：

*   服务器 2 中的频率进程读取队列
*   通过 WS2 调用服务器 1 所需的时间
*   服务器处理请求所花费的时间。
*   服务器 1 中的频率进程读取队列以从服务器 2 中寻找答案

因此，您可以使用循环：

1.  向队列询问答案
2.  如果有答案，很好，您回复客户。如果不是，线程必须等待。循环再次开始。

但是，您不能让客户端等待太多，您可以执行以下操作：

1.  那等待的时间超过了最大时间？如果是，请打破循环并回答客户有问题。
2.  向队列询问答案
3.  如果有答案，很好，您回复客户。如果不是，线程必须等待。循环再次开始。

我认为您应该重新考虑停止代码执行，因为在您从队列中获得答案之前没有要执行的代码。无论如何，请参阅此[问题](https://stackoverflow.com/q/9143719/980472)以线程睡眠替代方案。

# php - 属性中的简单 HTML DOM 通配符

> ID：13525124
> 
> 赞同：3
> 
> 时间：2012-11-23T08:07:24.597
> 
> 标签：php, attributes, wildcard, simple-html-dom

我有以下标签

```
<div class="col *">Text</div> 
```

`*`是什么。

我想使用[Simple HTML DOM](http://simplehtmldom.sourceforge.net/)`col`获取所有具有类属性的 div 标签包含（如我的示例中）。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-23T13:06:30.327

因为**Simple HTML DOM**已经有一种方法来选择包含某个值和/或其他内容的属性。例如

> `$html->find("div[class*=col]", 0)->outertext`

或者你可以只检索以这样`div`开头的节点`col`

> `$html->find("div[class^=col]", 0)->outertext`

并且为了安全起见，您可以在这个 3rd 方插件中找到过滤属性的所有其他方法（顺便说一下，处理 DOM 有更好的方法，`libxml`可以[在此处找到](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php/3577662#3577662)最终列表）

1.  `[attribute]`- 匹配具有指定属性的元素。
2.  `[!attribute]`- 匹配没有指定属性的元素。
3.  `[attribute=value]`- 匹配具有特定值的指定属性的元素。
4.  `[attribute!=value]`- 将没有指定属性的元素与某个值匹配。
5.  `[attribute^=value]`- 匹配具有指定属性并以某个值开头的元素。
6.  `[attribute$=value]`- 匹配具有指定属性并以特定值结尾的元素。
7.  `[attribute*=value]`- 匹配具有指定属性且包含特定值的元素。

来源：[http ://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:26:41.870

目前我没有办法对其进行测试，但是当我研究它时（[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)）它应该相当简单。

```
$html = file_get_html('http://somesite.net');
foreach($html->find('div') as $div){
  if stripos($div->class,"col"){
    // this $div has a "col" class..
  }
} 
```

甚至*更简单*：

```
$html = file_get_html('http://somesite.net');
foreach($html->find('div.col') as $div){
  // every $div has a "col" class..
} 
```

它有效吗？

# c++ - Null 作为默认模板参数

> ID：13525127
> 
> 赞同：2
> 
> 时间：2012-11-23T08:07:46.737
> 
> 标签：c++, templates, c++11, overloading, default

为什么不能在模板函数中使用 NULL 作为默认指针参数？让我们考虑以下代码：

```
template<class Graph, class NodeAttribs, class ArcAttribs> string
graphToGraphviz(Graph       &graph,
                NodeAttribs *nattribs = NULL,
                ArcAttribs  *aattribs = NULL,
                string      name      = ""){
   /*...*/
} 
```

我希望能够这样称呼它：

```
graphToGraphviz(g); 
```

我怀疑，编译器认为它无法解析 NULL 的类型，但如果属性为 NULL（存在 if 条件），则不会使用这些类型。但也许这种情况无法通过编译器以正确的方式解决。如果是的话，我怎么能写这样的重载函数，这将允许我使用简写形式？

我有一个像这样重载它的想法：

```
class Empty{}

template<class Graph> string
graphToGraphViz(Graph       &graph,
                string      name      = ""){
    return graphToGraphviz<Graph, Empty, Empty>(graph, NULL, NULL, name)
} 
```

但随后编译器给了我错误，除其他外，该类 Empty 没有`operator []`定义。这又是不稳定的，但是我是否必须使所有这些“虚拟”运算符重载和空函数来满足编译器的要求，还是有更好的方法来做到这一点？

编辑：请查看完整的源代码 - 它将柠檬图转换为 graphviz 格式：我尝试使用 C++11 中的新语法（如下面的答案所示），但没有成功。

```
#ifndef GRAPHTOGRAPHVIZ_H_
#define GRAPHTOGRAPHVIZ_H_

#include <lemon/list_graph.h>

using namespace lemon;
using namespace std;

/* USAGE:
 * ListDigraph::NodeMap<unordered_map<string, string>> nodeAttribs(g);
 * ListDigraph::ArcMap<unordered_map<string, string>> arcAttribs(g);
 * nodeAttribs[node]["label"] = "node_label";
 * string dot = graphToGraphviz(g, &nodeAttribs, &arcAttribs, "hello");
 */

template<class Map>
string getAttribs(Map &map){
    string attribs = "";
    for (const auto &el : map){
        if (el.second != "")
            attribs += "\"" + el.first + "\"=\"" + el.second + "\",";
    }
    if (attribs != "")
        attribs = " [" + attribs + "]";
    return attribs;
}

template<class Graph, class NodeAttribs, class ArcAttribs> string
graphToGraphviz(Graph       &graph,
                NodeAttribs *nattribs = NULL,
                ArcAttribs  *aattribs = NULL,
                string      name      = ""){

    typedef typename Graph::template NodeMap<string> NodeMap;
    typedef typename Graph::NodeIt NodeIterator;
    typedef typename Graph::ArcIt  ArcIterator;

    NodeMap labels(graph);
    ostringstream layout;
    layout << "strict digraph \""+name+"\" {\n";

    // prepare labels
    for (NodeIterator node(graph); node != INVALID; ++node){
        string label = "";
        if (*nattribs != NULL)
            label = (*nattribs)[node]["label"];
        if (label == "") label = static_cast<ostringstream*>( &(ostringstream() << graph.id(node)) )->str();
        label = "\"" + label + "\"";
        labels[node] = label;
    }

    // initialize nodes
    for (NodeIterator node(graph); node != INVALID; ++node){
        layout << labels[node];
        if (*nattribs != NULL)
            layout << getAttribs((*nattribs)[node]);
        layout << ";" << std::endl;
    }

    // initialize arcs
    for (ArcIterator arc(graph); arc != INVALID; ++arc){
        layout << labels[graph.source(arc)] << "->" << labels[graph.target(arc)];
        if (*aattribs != NULL)
            layout << getAttribs((*aattribs)[arc]);
        layout << ";" << std::endl;
    }
    layout << "}";
    return layout.str();
}

#endif /* GRAPHTOGRAPHVIZ_H_ */ 
```

使用 C++11 语法，函数头将如下所示：

```
template<class Graph, class NodeAttribs=ListDigraph::NodeMap<string>, class ArcAttribs=ListDigraph::NodeMap<string> > string
graphToGraphviz(Graph       &graph,
                NodeAttribs *nattribs = NULL,
                ArcAttribs  *aattribs = NULL,
                string      name      = "") 
```

但它不会编译并给出大量奇怪的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:15:04.737

调用时编译器出现问题：

```
graphToGraphviz(g); 
```

现在`NodeAttribs`and的类型是`ArcAttribs`什么？
无论您是否使用它，编译器都必须推断出它的类型。因为使用或不使用是运行时检查。
使用您当前的代码，上述类型变为**non-deducible**。

> 我怎么能写出这样*的重载*函数

你的问题有答案！！
*重载函数，从**原始*模板函数中`template`删除默认参数 ，让两个函数共存：

 *```
template<class Graph>
string graphToGraphviz(Graph &graph, string name = ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:13:57.670

你有没有尝试过

```
template<class Graph, class NodeAttribs, class ArcAttribs> string
graphToGraphviz(Graph       &graph,
                NodeAttribs *nattribs = (<NodeAttribsClass>*)NULL,
                ArcAttribs  *aattribs = (<ArcAttribsClass>*)NULL,
                string      name      = ""){
   /*...*/
} 
```

或者

```
template<class Graph, class NodeAttribs = NodeAttribsClass, class ArcAttribs = ArcAttribsClass> string
graphToGraphviz(Graph       &graph,
                NodeAttribs *nattribs = NULL,
                ArcAttribs  *aattribs = NULL,
                string      name      = ""){
   /*...*/
} 
```

可以在该插槽中使用的有效（具体）类在`NodeAttribsClass`哪里 ？`ArcAttribsClass`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T09:03:21.070

如果你使用 C++11，你可以这样做：

```
template<class Graph, class NodeAttribs=Empty, class ArcAttribs=Empty> ... 
```

我没有在标准中找到相关的语言，但 gcc 接受它。*

# python - Python：如何在新的 cmd 窗口中执行 bat 文件？

> ID：13525129
> 
> 赞同：7
> 
> 时间：2012-11-23T08:08:34.197
> 
> 标签：python, batch-file

在我的 python 脚本中：

```
p = Popen('a.bat') 
```

问题是批处理文件的输出被放到我执行python脚本的主控制台窗口中......我希望批处理文件的输出显示在新的控制台窗口中。任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T19:14:06.127

您可以设置[`CREATE_NEW_CONSOLE`](http://docs.python.org/2/library/subprocess#subprocess.CREATE_NEW_CONSOLE)标志。例如：

```
import subprocess

p = subprocess.Popen('a.bat', creationflags=subprocess.CREATE_NEW_CONSOLE) 
```

有关的文档与[实施](http://hg.python.org/cpython/file/70274d53c1dd/Lib/subprocess.py#l866)`shell=True`不一致。如果指定，则仅当平台是 Win9x 或使用 16 位shell 时才设置。`shell=True``CREATE_NEW_CONSOLE``COMMAND.COM`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:41:12.733

我以前没有使用过python，所以我无法测试，但这应该可以

```
p = Popen('cmd.exe /k start a.bat') 
```

# java - 如何等待文件中的新值并在 Java 中打印该值

> ID：13525136
> 
> 赞同：0
> 
> 时间：2012-11-23T08:09:05.273
> 
> 标签：java, php, android

我正在尝试用 Java 实现比萨状态显示。因此，Java 文件正在读取 html 文件中的值并打印它。可以通过 php 脚本更改状态： http: [//easternmotormall.com/teamdroidco/server/statusUpdater.php](http://easternmotormall.com/teamdroidco/server/statusUpdater.php)

所以脚本将状态写入文件： [http ://easternmotormall.com/teamdroidco/server/home.html](http://easternmotormall.com/teamdroidco/server/home.html)

Java 文件打印它。但我的主要问题是它只需要显示一次结果，我不确定如何实现它。

这是Java代码：

```
 url = new URL("http://easternmotormall.com/teamdroidco/server/home.html");

               try {
                   System.out.println("Fetching status from the server, please wait..");
                   String temp = null;
                   while(true){
                     URLConnection con = url.openConnection();
                     BufferedReader dataPtr = new BufferedReader(new InputStreamReader(con.getInputStream()));
                     // Printing status from Status Updater
                     String status = dataPtr.readLine();
                     if (status != null) {
                         System.out.println(status);
                    }

                     dataPtr.close();
                     Scanner in2 = new Scanner(System.in);
                     in2.nextLine();
                   }
               }
               catch (IOException e) {
                 System.err.println();
               }

        }
    catch (MalformedURLException  e)
        {
            System.err.println();
        } 
```

我在最后暂停了循环，所以它不会继续循环。

我怎样才能使它仅在为文件提供新状态时才打印？

PS。如果有帮助的话，这最终将转换为一个 android 应用程序。

编辑:::::::::::::::::::::::::::::::::::::::::::: 这是编辑的带线程的版本：

```
 url = new URL("http://easternmotormall.com/teamdroidco/server/home.html");

               try {
                   System.out.println("Fetching status from the server, please wait..");
                   String temp = null;
                   while(true){
                     URLConnection con = url.openConnection();
                     BufferedReader dataPtr = new BufferedReader(new InputStreamReader(con.getInputStream()));
                     // Printing status from Status Updater
                     String status = dataPtr.readLine();
                     if (status != null) {
                         System.out.println(status);
                    }

                     dataPtr.close();
                     Scanner in2 = new Scanner(System.in);
                     in2.nextLine();
                   }
               }
               catch (IOException e) {
                 System.err.println();
               }
               statusThread statusreq = new statusThread();
               statusreq.start();
               System.out.println("After the thread...");

        }
    catch (MalformedURLException  e)
        {
            System.err.println();
        }

}

    class statusThread extends Thread {

   // 2\. This is the run() method with some sample contents
   public void run() {

       String status ="", lastStatus ="";
       URL url;
       try {
       url = new URL("http://easternmotormall.com/teamdroidco/server/home.html");
           System.out.println("Fetching status from the server, please wait.. (Thread started)");
           while(true){
             URLConnection con = url.openConnection();
             BufferedReader dataPtr = new BufferedReader(new InputStreamReader(con.getInputStream()));
             // Printing status from Status Updater
             status = dataPtr.readLine();
            if (status != null && !status.equals(lastStatus)) {
                //new status!
                lastStatus = status;
                System.out.println(status);
            }
            else {
                // do nothing or log something
            }

             dataPtr.close();
             Scanner in2 = new Scanner(System.in);
             in2.nextLine();
           }
       }
       catch (IOException e) {
         System.err.println();
       }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:16:05.280

`AsyncTask`如果状态已更改，我会创建一个线程（或者如果您可以使用它的 Android ）以每 30 秒检查一次。如果不是 - 什么也不做，如果它改变了 - 打印它。

你可以像这样实现它：

```
static String lastStatus = "";

// ...

// In separate Thread or AsyncTask:

if (status != null && !status.equals(lastStatus)) {
    //new status!
    lastStatus = status;
    System.out.println(status);
}
else {
    // do nothing or log something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:33:29.287

如果您的服务器是经过探测实现的，那么这就是 HTTP 状态的用途。

即，如果您`If-Modified-Since header`在请求中使用最后一次请求的日期，您将收到带有新内容的 200 ok 或未修改且没有新内容的 304。

最好， 的值`If-Modified-Since`是`Last-Modified`对您最后一个请求的响应中的标头的值。

这是做你所寻求的最标准的方式。

## 编辑

至于等待部分，有4个选项：

*   在定义的时间间隔内使用定期轮询。
*   使用长轮询系统（您的服务器尽可能长时间地阻塞连接，直到返回答案）
*   使用通知系统（Google C2DM 或基于自定义 XMPP 的实现）
*   使用始终打开的双向套接字

第一个选项不是很优化，但很容易。第二个选项是不久前的标准，现在仍在使用。有解决方案，比如彗星。第三种选择在架构上有所不同，但非常有效。我不推荐第四个选项，因为那里有很多事情要处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:12:42.803

您可以在java中使用线程等待，线程的一种方法是睡眠，您可以通过它等待特定的时间......

# c# - 红黑树和多图

> ID：13525138
> 
> 赞同：2
> 
> 时间：2012-11-23T08:09:09.327
> 
> 标签：c#, java, c++

在许多编译器中，标准数据结构如`Set`,`Map`并`Multimap`在后面使用红黑树，并且 a`multimap`存储多个和重复的键。

我对以下报价有疑问：

> “红黑树唯一地存储键，每个键只绑定一个 DataValue”

1.  以上说法属实吗？
2.  如果这是真的，我们如何使用红黑树来实现`multimap`（就像 C++ STL 所做的那样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T08:12:28.290

1）不，不是真的。

2）修改单个映射红黑树以将键映射到多个值将是微不足道的。它只需要使用第二个数据结构和映射键-> 集合。

例如，您可以从字符串映射到整数向量，而不是从字符串映射到整数。或字符串到整数的链接列表。或者一个单一映射 RBT 的字符串。很快 ：）。

* * *

重温#1：从技术上讲，这仍然会将键映射到单个值，只是该值不会是直接映射的类型。根据您认为的“DataValue”，是的，该陈述是正确的。

* * *

此外，辅助数据结构实际上并不是必需的。它只是简化了遍历。基本上为了适应重复，而不是严格小于/大于父/左和父/右之间的关系，你有一个方面也包括相等。

例如：

```
 5
   3     7
 3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T08:34:29.040

您允许节点任一侧的子节点包含既不小于也不大于父节点的键。您需要允许两边相等，否则您可能会严重失去平衡 --- 由 n 个相等键组成的树的高度为 n。

# javascript - 'var array = {}'时如何解决“TypeError：array.splice is not a function”？

> ID：13525140
> 
> 赞同：37
> 
> 时间：2012-11-23T08:09:11.717
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [如何从 javascript 对象中删除属性](https://stackoverflow.com/questions/208105/how-to-remove-a-property-from-a-javascript-object)
> [JavaScript Hashmap 等效项](https://stackoverflow.com/questions/368280/javascript-hashmap-equivalent)

我正在使用 jQuery，我正在以这种方式处理变量：

```
var array = {};

array[an_object]      = something
array[another_object] = something_else
array[...]            = ... 
```

当我尝试在上运行该[`splice`](http://www.w3schools.com/jsref/jsref_splice.asp)方法时，`array`我得到一个`TypeError: array.splice is not a function`. *我的意图是从变量中删除`an_object`“键”及其所有内容。`array`*

我怎样才能做到这一点？

* * *

*注意*：当我运行`console.log(array[an_object])`（同样适用于`another_object`所有其他对象）时，我得到：

```
[Object { label="str1",  value=1 }, Object { label="str2",  value=2 }, { label="strN",  value=N }] 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-23T08:29:38.193

首先，将变量命名为它们是什么。`array`如果您使用它来创建对象，您使用的名称会产生误导。

```
var myObject = {};

myObject[an_object]      = "xyz";
myObject[another_object] = "abc"; 
```

`delete`现在，您可以使用以下语句删除对象中的条目：

```
delete myObject[an_object]; // Returns true / false if the deletion is a success / failure
console.log(myObject[an_object]) // Returns undefined 
```

* * *

现在，也就是说，这不会像您期望的那样工作。`myObject[an_object]`将包含“abc”
不要使用对象作为键。改为使用字符串。
这是因为在 中输入的任何参数`[]`都将转换为字符串。所以实际上，你正在进入`myObject["[object Object]"]`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T08:16:37.290

我对您构建对象的方式有点困惑，因为`an_object`用作键必须是键的字符串值。假设您这样做，这应该通过删除对象的不需要的属性来工作。

```
var array = {};

array['an_object'] = "something"
array['another_object'] = "something_else"

delete(array.an_object)

console.log(array) // Object { another_object = "something_else" } 
```

* * *

**编辑**

正如评论中详述的那样，如果问题是对象被用作另一个对象的键（在这种情况下被混淆地命名为`array`），那么问题是对象首先被转换为它的字符串表示以在对象的上下文中使用钥匙。因此，所有用作键的对象实际上将引用一个名为 的键`[object Object]`，并且您用作键的任何对象都将覆盖以前的对象。

在问题的示例中...

```
array[an_object]      = something
array[another_object] = something_else
// array: Object { "[object Object]" = "something_else" } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T08:40:25.713

要在简单的 JavaScript 中实现字典是相当棘手的，您需要创建一个完整的构造函数来处理这个 - 或者使用一个库来为您处理这个。

通过字典，我指的是可以将对象用作键的对象/散列。您将需要一个使用多个数组（一个用于键，一个用于值）并保持它们同步的构造函数。您可以模仿许多典型的数组方法，但正如我所说，这将是相当多的代码。

作为一个简单的替代方案，您可以执行以下操作：

```
function pushToObject(obj, key, value){
  if( !key||!obj ) return false;
  if( !key[''] ) {
    pushToObject.index = pushToObject.index||[];
    key[''] = pushToObject.index.length;
    pushToObject.index.push(key);
  }
  obj[key['']] = value;
  return true;
}

function removeFromObject(obj, key){
  if( !isNaN(key) ) {
    var list = listKeyObjects(obj);
    var item = list[key];
    return removeFromObject(obj,item);
  }
  else if(key) {
    if( !key[''] ){
      return false;
    }
    return delete obj[key['']];
  }
  return false;
}

function listKeyObjects(obj){
  var a = [];
  for(var i in obj){
    a.push(pushToObject.index[i]);
  }
  return a;
} 
```

*用法*

```
var array = {}; /// it would be best to change the name of this object
var an_object = {}, another_object = {};

/// add your items to the array object, this handles giving each of your
/// objects used as a key a unique index property. This does mean the objects
/// you use `an_object`, `another_object` are modified.
pushToObject( array, an_object, 'something else' );
pushToObject( array, another_object, 'something other than else' );

console.log(array); /// {0:'something else',1:'something other than else'}

removeFromObject( array, an_object ); /// remove using an object as a key

console.log(array); /// {1:'something other than else'}

removeFromObject( array, 0 ); /// remove using an offset index

console.log(array); /// {} 
```

*经过思考*

显然，更好的选择是为此创建自己的专用构造函数，但您可以使用更多代码改进上述内容，这样它就不会修改关键对象。相反，每当将对象用作键时，您都可以扫描`pushToObject.index`键对象的偏移量。我选择了修改您的关键对象的版本，但是因为它应该比每次进行数组修改时都扫描列表更快。

*获取关键函数*

上面的代码只向您展示了如何添加和删除，从偏移量获取特定的关键对象也可能是一个好主意：

```
function getKeyObjectAtIndex = function(obj, index){
  var list = listKeyObjects(obj);
  return list[index] ? list[index] : null;
}

console.log(array); /// {0:'something else',1:'something other than else'}

var key = getKeyObjectAtIndex(array, 1);

console.log(key === another_object) /// === TRUE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:24:02.287

也许是这样的：

[小提琴](http://jsfiddle.net/Ynmgj/1/)

```
var array = {};

var an_object = {};

var another_object = {};    

array[an_object] = 'something'

array[another_object] = 'something_else'

alert(array[an_object]);

array[an_object] = null;

alert(array[an_object]);

delete array[an_object]

alert(array[an_object]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T08:36:17.083

您不能在对象上触发数组方法。您的情况下，您创建了一个对象文字而不是一个数组，将其定义为`var a = []`OR`var a = new Array();`

希望能帮助到你 ！！

# php - CodeIgniter 字符集到 UTF-8

> ID：13525144
> 
> 赞同：-1
> 
> 时间：2012-11-23T08:09:36.753
> 
> 标签：php, codeigniter, unicode

我在 CodeIgniter 中将阿拉伯语产品名称插入购物车时遇到问题。这是通过覆盖`Cart.class`库`$product_name_rules`来解决的`$this->cart->product_name_rules = "^."`

现在效果很好，但还有另一个问题。它仅在我`$db['default']['char_set'] = 'utf8';`在数据库配置文件中设置时才有效。自然，这会将数据库中的所有字符串返回为????。如果我将该 utf8 更改为 utf-8，它将开始正确显示检索到的信息，但购物车拒绝工作。

该怎么办？![在此处输入图像描述](../Images/32cf330e1f2a77905fe563ac6df64cd6.png)

![在此处输入图像描述](../Images/d289ff22d6d2dc69d70cd0c41c778f80.png)

它是购物车作品（数据库配置中的 utf-8）或阿拉伯语作品（数据库中的 utf8）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:14:09.280

您是否检查了存储阿拉伯产品名称的表格列的排序规则，您可以将其排序规则更改为 utf8_general_ci 或适用于阿拉伯字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T04:25:08.960

CI 有一个用于会话的表。虽然表排序规则设置为 UTF8，但列本身不是。因此，当从购物车中进行选择时，数据存储为 ??? 因为不是unicode。将该排序规则更改为 unicode 并完美运行。

# sql - SQL：显示值而不是 ID

> ID：13525145
> 
> 赞同：-3
> 
> 时间：2012-11-23T08:09:42.837
> 
> 标签：sql

我正在学习 SQL，现在我想弄清楚一件事。

我有两张桌子

产品：

```
Product ID (PK) | ProductName
1               |  Apple
2               |  Pear
3               |  Orange
4               |  Banana 
```

销售订单详情：

```
SalesOrderID (PK) | Product ID | Quantity
1                 | 1          | 5
2                 | 3          | 4
3                 | 4          | 2 
```

我的问题是 - 如何在第二个表格中显示产品名称而不是显示 ID？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:14:04.470

你需要使用`join`

```
select P.ProductName, S.SalesOrderID, S.Quantity
from Products P
join SalesOrderDetail S on S.Product_ID=P.Product_ID 
```

[在这里](http://www.w3schools.com/sql/sql_join.asp)您可以找到有关联接的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:13:56.170

试试这个，使用加入

```
select sod.salesorderid,p.productname,sod.quantity from salesorderdetail sod
inner join products p 
on p.productid=sod.productid 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:15:49.687

这将是

```
Select s.SalesOrderId, p.ProductName, s.Quantity from SalesOrderDetail s inner join Products p ON s.ProductID = p.ProductID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:20:20.157

为此，您可以使用 SQL 中可用的自然连接。如果您使用的是 MySQL，则代码可以是：

```
SELECT ProductName, ProductQuantity from Products NATURAL JOIN SalesOrderDetails; 
```

或者

您可以简单地将连接操作用作：

```
SELECT ProductName,ProductQuantity from Products p INNER JOIN SalesOrderDetails sd ON p.ProductId = sd.ProductId; 
```

或者简单地说：

```
SELECT ProductName,ProductQuantity from Products p, SalesOrderDetails sd WHERE p.ProductId = sd.ProductId; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-23T08:23:45.830

尝试这个：

```
SELECT SOD.SalesOrderID
  ,P.ProductName
  ,SOD.Quantity 
FROM SalesOrderDetail SOD 
 ,Products P
WHERE P.ProductID=SOD.Product ID 
```

# jquery - Ryan Fait 自定义表单元素插件。多个 CSS 类问题

> ID：13525147
> 
> 赞同：1
> 
> 时间：2012-11-23T08:10:11.807
> 
> 标签：jquery, css, input, custom-controls

我正在使用 Ryan Fait 的自定义表单元素插件[http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/](http://ryanfait.com/resources/custom-checkboxes-and-radio-buttons/)用于复选框和单选按钮样式。

```
<input type="checkbox" name="check" value="" class="styled" id="check" />
<label for="check">Check me!</label> 
```

插件使用类查找输入`.styled`，将其隐藏并添加一个`<span>`元素。这工作正常，直到我向输入添加另一个 CSS 类：

```
<input type="checkbox" name="check" value="" class="styled required" id="check" />
<label for="check">Check me!</label> 
```

在这种情况下，默认输入会消失，但据我所知，在`<span>`未添加此元素后，我只看到标签。看起来插件只是找不到带有“.styled”类的元素。

我在课前或课后添加到输入中的类并不重要`.styled`，所以我确定这不是 CSS 问题。

有人有同样的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:49:27.027

问题出在插件上。

如果您使用的是 Ryan Fait 的自定义表单元素，并且需要向`input`元素添加更多类，则必须编辑插件。

我为解决这种行为所做的就是下一个小改动。我替换了这个声明

```
inputs[a].className == "styled" 
```

有了这个

```
($(inputs[a]).hasClass("styled")) 
```

在所有情况下。在此样式开始正常工作后。

# php - PHP strpos($a, $b) >= 0 为真，即使 $b 不在 $a 中

> ID：13525156
> 
> 赞同：-2
> 
> 时间：2012-11-23T08:11:37.827
> 
> 标签：php

阅读后[如何检查字符串是否包含 PHP 中的特定单词？](https://stackoverflow.com/questions/4366730/php-how-to-check-if-a-string-contain-specific-words)以及有关[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)`strpos()`的文档，我尝试使用第一个链接的替代方法，而不是，我使用`!==``>= 0`

```
$a = "Hello";
$b = "a";
if(strpos($a, $b) >= 0) {
  echo 'string found';
} else {
  echo 'string not found';
} 
```

打印`'string found'`而不是`'string not found'`？`$b`显然不在`$a`，所以`strpos()`应该返回`false`，因此应该进入`else`，这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:11:37.827

在这种情况下，strpos 确实返回了 false。但是，除 0 以外的任何值在 php 中都被视为 true，包括否定值，即**0**被视为 false。所以，

```
if(strpos($a, $b) >= 0) 
```

被评估为

```
if(false >= 0) 
```

接着

```
if(0 >= 0) 
```

这是真的

你应该`!== false`改用，所以`if(strpos($a, $b) !== false)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:17:37.130

请阅读手册：php.net/manual/en/function.strpos.php

你会注意到如果 $b 不在 $a 中，strpos 将返回 false。您将需要以这种方式检查它：

```
<?php
$a = "Hello";
$b = "a";
if(strpos($a, $b) !== false) {
  echo 'string found';
} else {
  echo 'string not found';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:27:25.357

```
if(strpos($a, $b) >= 0) 
strpos($a, $b) returns false
if(false >= 0) is true. 
```

这里我们需要检查类型。

# java - 如何将 int 转换为 char？

> ID：13525160
> 
> 赞同：-4
> 
> 时间：2012-11-23T08:11:48.907
> 
> 标签：java

如何将 int 转换为 char？

我在用：

```
int i=20;
char c= Character.forDigit(i,10);
// OR
//char c= Integer.toString(i).charAt(0); 

System.out.println(c); 
```

1.  我希望 char 为 '20' （不将 20 视为 ASCII 值并打印一些 ASCII 为 20 的字符）。
2.  上面的程序适用于单个数字，但对于像 20 这样的两位数，它只打印第一个字符，`2`.

我怎样才能打印20个整体？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:13:49.330

首先，`char`采用单个字符（将其视为**长度**为 1 的字符）`String`。Doing不被认为是一个，而是一个包含 2 个字符的数组：, . 因此，您应该考虑使用.**`20``char``'2'``'0'``String`**

 **要整体打印 20，请执行以下操作：

```
int i = 20;
String number = String.valueOf(i);
System.out.println(number); 
```

显然，我永远不能使用 a `char`，所以 a`String`是表示长度大于 1 的字符的最佳方式。

这是了解[Java Primitive Types](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)的资源，这里是[字符](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html)的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:15:37.780

char 是单个字符，即字母、数字、标点符号、制表符、空格或类似的东西。char 文字是用单引号括起来的单个字符，如下所示

char myCharacter = 'g';

有些字符很难输入。Java 为这些提供了转义序列。这是一个反斜杠，后跟一个字母数字代码。例如 '\n' 是换行符。'\t' 是制表符。'\' 是反斜杠本身。定义了以下转义序列：

\b 退格 \t 制表符 \n 换行符 \f 换页符 \r 回车符 \" 双引号，" \' 单引号，' \ 反斜杠，\ 双引号转义序列主要用于字符串内部，否则它将终止字符串。例如

System.out.println("然后吉姆说，\"谁在门口？\""); 没有必要在单引号内转义双引号。以下行在 Java 中是合法的

字符双引号 = '"';

转换成字符串：String.valueOf(20);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:14:50.537

```
int i = 25;
System.out.println("number: " + i); 
```

打印 i 的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:15:01.960

从...开始：

```
String num = "20";
int i = Integer.parseInt(num, 16); // 32 
```**

# php - 如何从数据库中获取所有列

> ID：13525161
> 
> 赞同：0
> 
> 时间：2012-11-23T08:11:50.967
> 
> 标签：php, database, pdo, fetch

我有这样的编码

```
 $tampilUbahVerifikator = $app['db']->prepare("
            select p.nama_pegawai, v.id_pegawai, v.id_verifikator, v.penanggung_jawab,

            rtrim(whitelist_pembayaran || decode(whitelist_pembayaran, null, null, ', ') ||
            whitelist_pemasang || decode(whitelist_pemasang, null, null, ', ') ||
            whitelist_jenis_iklan, ', ') as whitelist,

            rtrim(blacklist_pembayaran || decode(blacklist_pembayaran, null, null, ', ') ||
            blacklist_pemasang || decode(blacklist_pemasang, null, null, ', ') ||
            blacklist_jenis_iklan, ', ') as blacklist

            from verifikator v, pegawai p
            where p.id_pegawai=v.id_pegawai and v.id_verifikator = :idverifikator

            ");
        $tampilUbahVerifikator->bindValue("idverifikator", $verifikatorId);
        $tampilUbahVerifikator->execute();
        $data_ubah_ver = $tampilUbahVerifikator->fetchAll(); 
```

如何才能获取数据库中存在的所有列？例子 ：

```
$data['nama_pegawai'];
$data['whitelist']; 
```

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:14:02.383

试试这个

```
$tampilUbahVerifikator = $app['db']->prepare("
    select p.*, v.*,

    rtrim(whitelist_pembayaran || decode(whitelist_pembayaran, null, null, ', ') ||
    whitelist_pemasang || decode(whitelist_pemasang, null, null, ', ') ||
    whitelist_jenis_iklan, ', ') as whitelist,

    rtrim(blacklist_pembayaran || decode(blacklist_pembayaran, null, null, ', ') ||
    blacklist_pemasang || decode(blacklist_pemasang, null, null, ', ') ||
    blacklist_jenis_iklan, ', ') as blacklist

    from verifikator v, pegawai p
    where p.id_pegawai=v.id_pegawai and v.id_verifikator = :idverifikator

    "); 
```

注意 p.* 和 v.* 从表 p 和 v 中选择所有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:20:39.067

改变

```
$tampilUbahVerifikator->bindValue("idverifikator", $verifikatorId); 
```

到

```
 $tampilUbahVerifikator->bindValue(':idverifikator', $verifikatorId); 
```

# c - 如何将 ./a.out 的结果存储到文本文件中

> ID：13525167
> 
> 赞同：6
> 
> 时间：2012-11-23T08:12:35.083
> 
> 标签：c, linux, shell, terminal

我想知道是否有任何方法可以将我的程序结果存储到文本文件中。我知道您可以执行类似 ./a.out > output.txt 之类的操作，但对于我的程序，在我输入 ./a.out 后，我​​会再次提示输入 TIME：我输入的时间量，然后点击输入算法执行并输出结果。

程序输出一个阶段一段时间，基本上我的输出是这样的：

```
time 0:00 stage 1

time 0:05 stage 1

...

time 2:05 stage 2 
```

如何将输出存储到文本文件中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T08:15:03.143

所以也重定向输入：

`./a.out < input.txt > output.txt`

其中`input.txt`包含时间量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:24:23.537

一种方法是将结果打印到`stderr`

```
fprintf(stderr, "time %d:...."); 
```

并重定向`stderr`到`output.txt`

```
./myprog 2> output.txt 
```

注意：如果您不想打开文件，这是一种解决方法，我不喜欢`stderr`用于除错误以外的任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T08:15:12.660

一种解决方案是将 TIME 参数作为参数传递并使用 ./a.out time > output.txt 将其输出到文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T11:30:34.860

最简单的方法是 sudo_O 告诉你的（它适用于每个操作系统）

```
./a.out <in.txt >out.txt. 
```

如果您想在 C 中执行此操作，请使用 freopen() ( [http://www.cplusplus.com/reference/clibrary/cstdio/freopen/](http://www.cplusplus.com/reference/clibrary/cstdio/freopen/) )

```
 freopen ("myoutput.txt","w",stdout);
 freopen ("myinput.txt","r",stdin); 
```

这会将 stdout 重定向到 myoutput.txt，因此所有 printfs 都会转到“myoutput.txt”。还将标准输入重定向到 myinput.txt，因此所有 scanfs 都从“myinput.txt”读取。

# java - 加载子面板时，Swing Parent JFrame/JPanel 不可用/不可点击

> ID：13525171
> 
> 赞同：1
> 
> 时间：2012-11-23T08:12:54.300
> 
> 标签：java, swing, jframe, jpanel

当用户单击新的按钮加载并获取用户信息时，我正在加载一个`JFrame` `AdminFrame`（带有添加用户和按钮）。当信息提交到服务器时，需要一些时间（因为服务器是基于网络的），在那段时间我的两个面板都卡住了......我想要的是使*可点击*和*可用*，以便用户可以添加新用户或可以添加位置...这是我的添加按钮的模板代码...不写原始代码，因为原始代码太乱了..`addLocation``addUser``JFrame` `addUser``AdminFrame` **`AdminPanel`**

 **```
public class AdminPanel extends JFrame{
       public AdminPanel(){
           Initalize();//Do Initalize Stuff
       }
       public void addBtnActionPerformed(){
           //load Child Form
       }
}//End of class 
```

现在这里是我的 AddUser 面板的 adduser 按钮 Templete 代码 Orignal 代码太乱了..

```
public class AddUser extends JFrame{
       public AddUser(){
           Initalize();//Do Initalize Stuff
       }
       public void addUserBtnActionPerformed(){
           /*
              take user's form input values make a http request send to server
              get response...now what i have to do here to make parent form clickable?
           */
       }
}//End of class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:26:10.400

据我所知，您的问题是您没有在*Event Dispatch Thread上创建 GUI，然后***又在您的***初始线程*上创建另一个`JFrame`可能长时间运行的任务- 因为第一个也是在*初始线程*上创建的。 ***`JFrame`***

 ****1）不要`JFrame`不必要地扩展类，因为您可能想要扩展另一个非常必要但由于java中缺乏多重继承而不能的类。而是`JFrame`在实例上创建和实例化并调用方法，例如：

```
JFrame frame=new JFrame();
frame.setDefaultCloseOperation(..);
frame.add(..); 
```

[2) 在Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建 Swing 组件，如下所示：

```
 SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
           //create Swing and UI components here
        }
    }); 
```

3) 参见[多个 JFrame 的使用，好/坏做法？](https://stackoverflow.com/q/9554636/1133011). 而是使用`JDialog` 我认为您将要使用的或[`CardLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)（允许在单个`JFrame`/Container 上的各种组件之间翻转）。

4) 在 EDT 上使用[Swing Worker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)执行长时间运行的任务（否则 GUI，包括应用程序的其他打开窗口，将变得无响应）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T08:36:47.527

您需要使用 SwingWorker 将繁重/冗长的操作分派到另一个线程中，从而允许 UI 线程（EDT）响应事件。

这是一个非常简单的代码，展示了如何使用 SwingWorker（这里模拟了与服务器的连接`Thread.sleep()`）：

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.List;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingUtilities;
import javax.swing.SwingWorker;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestJFrame implements ActionListener {
    private JProgressBar progress;
    private JButton startButton;
    private JButton testButton;
    private SwingWorker<Void, Integer> worker;

    public void initUI() {
        JFrame frame = new JFrame(TestJFrame.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        progress = new JProgressBar(0, 100);
        startButton = new JButton("Start work");
        testButton = new JButton("Test me while work is in progress");
        startButton.addActionListener(this);
        testButton.addActionListener(this);
        JPanel buttonPanel = new JPanel(new FlowLayout());
        buttonPanel.add(startButton);
        buttonPanel.add(testButton);
        frame.add(buttonPanel, BorderLayout.NORTH);
        frame.add(progress, BorderLayout.SOUTH);
        frame.setSize(600, 400);
        frame.setVisible(true);
    }

    private void showTestDialog() {
        if (worker != null) {
            JOptionPane.showMessageDialog(testButton, "You made a test. See how I still respond while heavy job is in progress?");
        } else {
            JOptionPane.showMessageDialog(testButton,
                    "You made a test, but no job is progress. Hit the \"Start work\" button and hit me again after.");
        }
    }

    private void startWork() {
        if (worker != null) {
            return;
        }
        startButton.setEnabled(false);
        worker = new SwingWorker<Void, Integer>() {

            @Override
            protected Void doInBackground() throws Exception {
                // Outside EDT, we cannot modify the UI, but we can perform lengthy operations
                // without blocking the UI
                for (int i = 0; i < 10; i++) {
                    publish(i * 10);
                    Thread.sleep(1000);
                }
                return null;
            }

            @Override
            protected void process(List<Integer> chunks) {
                // Inside EDT, here we can modify the UI
                super.process(chunks);
                // We only care about the last one
                progress.setValue(chunks.get(chunks.size() - 1));
            }

            @Override
            protected void done() {
                // Inside EDT, he we can modify the UI
                super.done();
                progress.setValue(100);
                startButton.setEnabled(true);
                worker = null;
            }

        };
        worker.execute();
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == startButton) {
            startWork();
        } else if (e.getSource() == testButton) {
            showTestDialog();
        }
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestJFrame().initUI();
            }

        });
    }
} 
```******

# c# - 将 ComboBox 的 ItemsSource 提交给 ValidationRule

> ID：13525180
> 
> 赞同：2
> 
> 时间：2012-11-23T08:13:23.507
> 
> 标签：c#, wpf, combobox, itemssource, validationrule

我想将 ItemsSource 对象提交给我的验证类，以检查是否可以在（ItemsSource 的）列表中找到用户输入（处理程序类中的值）

如何将我的 ComboBox 的 ItemsSource 提交给处理程序类 RestrictedComboBoxItemValidationRule？（或我的 ComboBox-controll 而不是 ItemsSource）

```
<ComboBox Name="bms_ComboBox
          ItemsSource='{Binding Path="[BMS,ANR]"}'
          SelectedValuePath="F1"
          DisplayMemberPath="F1"
          IsEditable="True">
    <ComboBox.Text>
        <Binding Path="[BMS]">
            <Binding.ValidationRules>
                <t:RestrictedComboBoxItemValidationRule Sender={how I can submit ItemsSource of this ComboBox to handler class???}/>
            </Binding.ValidationRules>
        </Binding>
    </ComboBox.Text>
</ComboBox>

// ...

public class RestrictedComboBoxItemValidationRule : ValidationRule 
{
    public object Sender
    {
        get { return sender; }
        set { sender = value; }
    }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo) 
    {
        ValidationResult vr = ValidationResult.ValidResult;

        if (comboText_inItemsSource == false) {
            vr = new ValidationResult(false, "The entered value is not included in list!");
        }
        return vr;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:47:03.867

您需要将 ComboBox 的 ItemsSource 绑定到您的 Sender 属性。由于 ValidationRule 不是 DependencyObject，因此您不能只创建`Sender`一个 DependencyProperty。但是 Josh Smith 有一个很好的解决方法：http: [//www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in](http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-24T09:17:14.323

我发现，有点复杂的方式。但它有效！这是这样的：

我创建了一个 AttachedProperty “Restricted”

```
RestrictedProperty = DependencyProperty.RegisterAttached
("Restricted", typeof(bool), typeof(Field), 
new FrameworkPropertyMetadata(false, new PropertyChangedCallback(OnChangedRestricted))); 
```

在 OnChangedRestricted 中，我为 ComboBox.Loaded 添加了一个事件处理程序：

```
private static void OnChangedRestricted(DependencyObject o, DependencyPropertyChangedEventArgs e) {
        Control c = o as Control;
        if (c != null && (bool)e.NewValue == true) {
            if (c.GetType() == typeof(ComboBox)) {
                ((ComboBox)c).Loaded += new RoutedEventHandler(RestrictedComboBox_Loaded); 
```

原因是，我需要一个 vlide BindingExpression。

```
static void RestrictedComboBox_Loaded
    (object sender, RoutedEventArgs e) {
    ComboBox cb = (ComboBox)sender;
    BindingExpression be = cb.GetBindingExpression
        (ComboBox.TextProperty);
    if (be != null) {
        Binding b = be.ParentBinding;
        b.ValidationRules.Add
            (new RestrictedComboBoxItemValidationRule
                ((ComboBox)sender)); } } 
```

这就是我在这里所做的，将 ValidationRule 添加到我的 ComboBox 的绑定中，而不是我的 CodeBehind 中的 XAML-Code（通过 AttachedProperty 实现）。这是类 RestrictedComboBoxItemValidationRule （这里发生了整个监控）：

```
public class RestrictedComboBoxItemValidationRule : ValidationRule {
        private DataTable itemsSource;
        private ComboBox sender;
        private bool firstChance;
        public RestrictedComboBoxItemValidationRule(ComboBox sender) {
            this.sender = sender;
            this.firstChance = true;
            this.sender.LostFocus += new RoutedEventHandler(Invalidate_OnLostFocus);
            this.itemsSource = this.GetItemsSource (sender.ItemsSource);
            if (this.itemsSource != null) {
                this.itemsSource.CaseSensitive = false; } }

        public override ValidationResult Validate(object value, CultureInfo cultureInfo) {
            ValidationResult result = ValidationResult.ValidResult;
            if (this.sender.IsReadOnly || !this.sender.IsEditable || !this.sender.IsEnabled) {
                return result; }
            if (!string.IsNullOrEmpty(value as string) && this.itemsSource != null) {
                DataRow[] r = this.itemsSource.Select
                    (this.sender.SelectedValuePath + " = '" + value.ToString() + "'");
                if (r.Length == 0 && (!this.sender.IsKeyboardFocusWithin || !this.firstChance)) {
                    result = new ValidationResult
                        (false, "The entered value is not in list!"); } }
            return result; }

        void Invalidate_OnLostFocus(object sender, RoutedEventArgs e) {
            Debug.Assert (((SWC.ComboBox)e.Source).Equals(this.sender),
                "Sender-Object invalide!");
            this.Invalidate(false); }

        /// <param name="firstChance">true, if we want to wait for LostFocus (for our ComboBox),
        /// false, if user's inputs now should be checked.
        /// null, if no update of the firstChance-flag should occur</param>
        private void Invalidate(bool? firstChance) {
            if ((this.sender.IsEditable) && (!this.sender.IsReadOnly) &&
                (!this.sender.IsKeyboardFocusWithin) && (!string.IsNullOrEmpty(this.SenderText))) {
                if (firstChance.HasValue) {
                    this.firstChance = firstChance.Value; }
                // force validation of sender-Object -> with ValidationResult Validate
                this.sender.GetBindingExpression
                    (ComboBox.TextProperty).UpdateSource(); } }

        private DataTable GetItemsSource
            (object itemsSource) {
                DataTable table = null;
            if (itemsSource.GetType() == typeof(DataTable)) {
                table = itemsSource as DataTable; 
            }
            if (itemsSource.GetType() == typeof(DataView)) {
                table = ((DataView)itemsSource).ToTable(); 
            }
            Debug.Assert(table != null,
                "Unknown source type " + itemsSource.GetType ().Name);
            return table; } 

        private string SenderText {
            get { var text = (this.sender != null) ? this.sender.Text : string.Empty;
                if (text == null) { text = string.Empty; }
                return text.ToString().Trim(); } }
    } 
```

我的 XAML 代码是：

```
<ComboBox 
    Name="bMS_ComboBox"
    ItemsSource='{Binding Path="[BMS,ANR]"}'
    Text="{Binding [BMS]}"
    SelectedValuePath="F1"
    DisplayMemberPath="F1"
    Style="{StaticResource LocalComboBoxStyle}"
    IsEditable="True"
    c:Field.Restricted="True"> 
```

c 是我的类字段的命名空间，其中 AttachedProperty Restricted：xmlns:c="clr-namespace:MyAssembly.Controls;assembly=MyAssembly.Controls"

在我的样式文件中，我有以下代码：

```
<Style x:Key="LocalComboBoxStyle" TargetType="{x:Type ComboBox}">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <StackPanel Orientation="Horizontal">
                    <Image Source="Images/exclamation_diamond.png"
                           Height="16"
                           VerticalAlignment="Center" 
                           HorizontalAlignment="Right" 
                           Margin="0 0 2 0"/>
                    <Border BorderBrush="Red" BorderThickness="1" Opacity="0.6">
                        <Border.BitmapEffect>
                            <BlurBitmapEffect Radius="6"/>
                        </Border.BitmapEffect>
                        <AdornedElementPlaceholder/>
                    </Border>
                </StackPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="True">
            <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self},
                Path=(Validation.Errors)[0].ErrorContent}"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

我知道，这很复杂，但效果很好:-)

PS：你可以在这里看到结果：在此处[输入链接描述](http://s7.directupload.net/images/121124/lt4l62wo.jpg)

# javascript - 如果该元素上发生 onmouseout 事件，是否可以检查元素父级的 onmouseout 事件？

> ID：13525182
> 
> 赞同：0
> 
> 时间：2012-11-23T08:13:27.660
> 
> 标签：javascript, html, html-table, event-handling

让我解释一下这个场景：我有一个 JSP 有一个表，它的源代码对我不可用。在表的`<TD>`标签内，但是我可以使用 Java 代码动态插入一个锚标签：

```
String html =
 "<a href=\"javascript:showReleaseVersionsPopUp('" + currentRow.getComponentSeq() + "'); \" class=\"windowletIcon\">" +
                "<img src=\"./images/information-button.png\" width='25' height='20' id='img_"+currentRow.getComponentSeq()+"' " +
                        />" +
 "</a>";
return html; 
```

现在我想要的是，如果鼠标进入这个 Anchor 标签，它会转到 Javascript`showReleaseVersionsPopUp()`并显示一个隐藏的 DIV，但是在这个 Anchor 标签上的 mouseout 事件中，我不希望它转到 Javascript`hideReleaseVersionsPopUp()`并隐藏 DIV。我宁愿在此锚标记`hideReleaseVersionsPopUp()`的父标记上的 mouseout 事件上调用Javascript。`<TD>`

我相信首先要做到这一点，我需要在 Anchor 标记上设置 mouseout 事件处理程序并阻止事件冒泡，然后在其父`<TD>`标记上设置事件处理程序。

但是，在这里重申一下，我无法访问 JSP 代码和`<TABLE>`代码，所以我能做的就是通过上面提到的 Java 代码。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:20:31.843

您可以使用`myElement.parentNode`来获取 的父元素`myElement`。然后，您可以对该父元素执行任何您想要的操作。DOM 操作、事件侦听器，应有尽有。

因此，不要在 Anchor 上添加`mouseout`事件侦听器，而是在 Anchor 的父级上添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:33:26.613

您可以将事件处理程序附加到父节点的 onmouseout 事件。

```
var el = document.getElementById('idOfAnchor').parentNode;

if (el.addEventListener) {

  el.addEventListener('mouseout', hideReleaseVersionsPopUp ); 

} else if (el.attachEvent)  { // for IE8 and previous versions

  el.attachEvent('mouseout', hideReleaseVersionsPopUp );

} 
```

# vbscript - 在 AD 上列出计算机帐户中的成员

> ID：13525191
> 
> 赞同：1
> 
> 时间：2012-11-23T08:14:11.233
> 
> 标签：vbscript

我正在寻找一个`vbscript`可以将计算机帐户“成员”中的所有组放到文本文件中的方法。对于要复制到文本中的“成员”用户帐户，我使用 net user test 命令，我将在几秒钟内`/domain` `c:\temp\testaccount.txt`获得所有成员或`Local/Global`组成员身份的详细信息。是否有要运行的命令或是否需要脚本？

梅尔文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:36:43.317

这是我使用的脚本，但这永远不会像您的控制台命令那样运行得那么快，如果这是一个问题，您可以使用运行命令从脚本执行命令。您需要知道您的域的 LDAP 路径。由于回显，您最好使用 cscript.exe 运行它。

```
Const ForReading = 1, ForWriting = 2, ForAppending = 8, CreateIfNeeded = true
Dim fso, filename, objConnection, objCommand, oShell, sResult, objRecordSet, oFile_out
Set fso = CreateObject("Scripting.FileSystemObject")
filename = "\\server\share\out.txt"
Set objConnection = CreateObject("ADODB.Connection")
objConnection.Open "Provider=ADsDSOObject;"
Set objCommand = CreateObject("ADODB.Command")
objCommand.ActiveConnection = objConnection
objCommand.CommandText = "<LDAP://domain/OU=Workstations,OU=Computers,...>;;name;subtree"
Set oShell = CreateObject("Wscript.Shell")
sResult = oShell.Popup("Generating list..", 2, "Have some patience please, the list is generated")
on error resume next
Set objRecordSet = objCommand.Execute
Call CheckForError
set oFile_out = fso.OpenTextFile (filename, ForWriting, CreateIfNeeded)
Call CheckForError
While Not objRecordset.EOF
  oFile_out.writeline objRecordset.Fields("name")
  Wscript.Echo objRecordset.Fields("name")
  objRecordset.MoveNext
Wend
'--- ---'
Sub CheckForError
  if err.number <> 0 Then
    msgbox("39: "&err.description)
    err.clear
  end if
End Sub 
```

# c# - 在使用时对域对象进行更改

> ID：13525193
> 
> 赞同：0
> 
> 时间：2012-11-23T08:14:26.127
> 
> 标签：c#, .net, mvvm, domain-driven-design, concurrentmodification

我们有一组域对象，可以在一个窗口中编辑并在另一个窗口中同时使用。确保对象始终处于有效状态，并且更改在提交之前对外界不可见。对象存储在存储库中（每个对象都有一个唯一的 ID）。

1.  用户打开“运行”- 窗口（对对象 A 的只读访问）
2.  用户打开“编辑”窗口（对对象 A 的读/写访问权限）
3.  用户更改 UI 中的某些属性，但未单击应用
4.  用户单击运行窗口中的“运行”按钮。运行操作应使用“旧”设置执行。
5.  用户单击编辑窗口中的“应用”按钮并在运行窗口中运行。运行操作使用“新”设置执行。

我可以想到一些解决方案，但我对其中任何一个都不太满意：

1.  从存储库中检出对象时，始终会返回一个克隆。如果希望存储更改，则必须将对象显式提交到存储库。这可能适用于小对象，但在对象模型很大的情况下，克隆所有内容可能不合理。
2.  视图模型或模型存储中间更改并且在用户决定应该应用更改之前不会更改底层域对象。这听起来有点乏味，并且需要我们希望在域对象中拥有的视图模型中的大量验证规则。
3.  UI 不能直接作用于域对象。相反，当用户应用更改时，它们会更改可应用于域对象的 DTO。

请注意，只有一个并发编辑器，但可能有多个并发“阅读器”。此外，并发不会成为问题（从某种意义上说，在多线程环境中部分更新了对象）。

在提交更改之前，我们如何实现编辑域对象而不应用更改的模式？有什么我应该研究的框架吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:34:39.903

我认为[命令模式](http://en.wikipedia.org/wiki/Command_pattern)可能对您有所帮助。
您基本上会实现您的编辑窗口，使其不直接处理对象，而是创建根据 UI 中的数据更改对象的命令。单击应用后，您在对象上执行这些命令，使其进入用户选择的状态。

另一种方法是给 Edit 和 Run 窗口各自提供它们自己的实例，并在用户单击 Apply 后“以某种方式”同步 Run 窗口中的对象。但是，我不太确定如何在不引入大量耦合的情况下实现这一点。

第三种方法是我将实现的：
当您使用 MVVM 时，编辑窗口和运行窗口都有自己的*ViewModel*实例。ViewModel 可以保存域对象的实例。两个 ViewModel 都将持有域对象的*同一实例的实例。*
现在，可以通过以下方式实现 ViewModel：

1.  如果不存在更改（见下文），则其属性 getter 返回基础域对象的值。
2.  当调用 ViewModel 上的属性设置器时，值不会写入域对象，而是写入 ViewModel 中的相应字段。那是一个变化。从现在开始，ViewModel 将返回该值。
3.  ViewModel 有一个将更改写入域对象的方法。此方法不会自动调用，它会在用户在编辑窗口中单击应用时调用。
4.  运行窗口中的 ViewModel 将始终从底层域对象返回数据，因为它永远不会发生变化。

# java - Spring mvc 3.1 tomcat 7-404不解析jsp但控制器注释工作正常

> ID：13525205
> 
> 赞同：5
> 
> 时间：2012-11-23T08:15:47.507
> 
> 标签：java, spring, model-view-controller, jsp, http-status-code-404

我已经为此工作了一段时间，根本不知道出了什么问题。我正在 Tomcat 7 上部署 Spring 3.1 MVC 应用程序。通过查看 DEBUG 输出，我可以看到 1）MVC 调度程序 servlet 根据需要获取我的所有 URL 2）映射到控制器注释的任何 URL 都可以正常工作 3）任何 URL需要映射到 JSP 得到 404。另外，我使用的是 JDK 1.7.0_09。我的 JSP 页面位于 /WEB-INF/jsp/ 中。

提前感谢我可能遗漏的任何提示！

这是我的 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app 
    id="WebApp_ID" 
    version="2.5" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="
        http://java.sun.com/xml/ns/javaee 
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <display-name></display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/dispatcher-servlet.xml</param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

我尝试将我的 URL 模式修改为 /、/ *、/。*, . “/”似乎是我迄今为止最远的地方。另外，我可能是错的，但我不认为 URL 是问题，因为调试日志显示所有 URL 都将发送到调度程序 servlet——这正是我想要的。

这是我的调度程序-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?> 
<beans xmlns="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p" 
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!--Tell the servlet where to look for annotated methods-->
    <context:component-scan base-package="com.test.web.mvc.ctrl" />

    <!--Enables many annotations and searches for @Controller annotated methods etc.. -->
    <context:annotation-config />

    <!--JSR-303 (Bean validation) support will be detected on classpath and enabled automatically-->
    <mvc:annotation-driven />

    <!--This tag allows for mapping the DispatcherServlet to "/" (all extensions etc)-->
    <mvc:default-servlet-handler/>

    <!-- ControllerClassNameHandlerMapping -->
    <bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

    <bean class = "org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter" />
</beans> 
```

我尝试通过`http://localhost:8080/hello`. 我的应用程序被部署到“/”并且解析器没有将“/home”视图映射到/WEB-INF/jsp/hello.jsp，尽管调试日志显示它正确地确认“/home”是传入视图姓名。

`http://localhost:8080/rest/user/bob_user`效果很好，并映射到 Controller 注释。

任何帮助将不胜感激！谢谢！

更新：以下是`http://localhost:8080/hello`应转换为 /WEB-INF/jsp/hello.jsp的调试日志

```
2012-11-23 03:45:50,089 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - DispatcherServlet with name 'dispatcher' processing GET request for [/hello]
2012-11-23 03:45:50,089 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Testing handler map [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping@5c9a010c] in DispatcherServlet with name 'dispatcher'
2012-11-23 03:45:50,089 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Looking up handler method for path /hello
2012-11-23 03:45:50,093 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping - Did not find handler method for [/hello]
2012-11-23 03:45:50,093 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Testing handler map [org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@49049c10] in DispatcherServlet with name 'dispatcher'
2012-11-23 03:45:50,093 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - No handler mapping found for [/hello]
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Testing handler map [org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping@17bd11ee] in DispatcherServlet with name 'dispatcher'
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping - No handler mapping found for [/hello]
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Testing handler map [org.springframework.web.servlet.handler.SimpleUrlHandlerMapping@f212a54] in DispatcherServlet with name 'dispatcher'
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Matching patterns for request [/hello] are [/**]
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - URI Template variables for request [/hello] are {}
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.handler.SimpleUrlHandlerMapping - Mapping [/hello] to HandlerExecutionChain with handler [org.springframework.web.servlet.resource.DefaultServletHttpRequestHandler@4a61f88e] and 1 interceptor
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Testing handler adapter [org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter@1a33f07b]
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Testing handler adapter [org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter@47f128ad]
2012-11-23 03:45:50,094 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Last-Modified value for [/hello] is: -1
2012-11-23 03:45:50,095 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Null ModelAndView returned to DispatcherServlet with name 'dispatcher': assuming HandlerAdapter completed request handling
2012-11-23 03:45:50,095 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Cleared thread-bound request context: org.apache.catalina.connector.RequestFacade@2f38fd40
2012-11-23 03:45:50,095 [http-bio-8080-exec-8] DEBUG org.springframework.web.servlet.DispatcherServlet - Successfully completed request
2012-11-23 03:45:50,095 [http-bio-8080-exec-8] DEBUG org.springframework.web.context.support.XmlWebApplicationContext - Publishing event in WebApplicationContext for namespace 'dispatcher-servlet': ServletRequestHandledEvent: url=[/hello]; client=[127.0.0.1]; method=[GET]; servlet=[dispatcher]; session=[D81D9C8BE397827739EB48BC3BB7A35D]; user=[null]; time=[7ms]; status=[OK]
2012-11-23 03:45:50,095 [http-bio-8080-exec-8] DEBUG org.springframework.web.context.support.XmlWebApplicationContext - Publishing event in Root WebApplicationContext: ServletRequestHandledEvent: url=[/hello]; client=[127.0.0.1]; method=[GET]; servlet=[dispatcher]; session=[D81D9C8BE397827739EB48BC3BB7A35D]; user=[null]; time=[7ms]; status=[OK] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:40:43.480

也许您的 mvc:annotation-driven 正在覆盖您的 RequestMappingHandlerMapping。

还要从组件扫描中排除 @Controller 类：

```
<context:component-scan base-package="org.example">
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

因为控制器已经被

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T16:47:30.680

所以.. 我通过创建一个新的 Controller 类来解决这个问题，该类的方法带有`@RequestMapping("/{viewName}")`. Spring MVC 的匹配方式，这应该是最后也是最通用的匹配。结果，如果我得到 URL，它将尝试首先匹配其他控制器，然后最后匹配这个。当它匹配时，我只返回一个带有视图名称的字符串，所以它最终会转到`/WEB-INF/jsp/[view-name].jsp`. 有人有更好的主意吗？谢谢！

# asp.net - 配置活动目录成员

> ID：13525207
> 
> 赞同：2
> 
> 时间：2012-11-23T08:15:54.967
> 
> 标签：asp.net, .net, active-directory, membership-provider

我想使用会员等级和用户活动目录作为数据源。我在 web.config 中有这样的配置

```
<connectionStrings>
<add name="ApplicationServices"
  providerName="System.Data.SqlClient" />
<add name="LDAPConnectionString" connectionString="LDAP://myserver"/> 
```

```
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
         enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
         applicationName="/" />
  </providers>
</membership> 
```

但是当我想访问 ASP.net WEB 应用程序管理器时，我遇到了这样的问题“遇到错误。请返回上一页再试一次。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T04:50:54.213

试试这个（在确保您的连接字符串有效之前）：

```
<membership>
  <providers>
    <clear/>
    <add name="AspNetSqlMembershipProvider" 
         type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" 
         connectionStringName="***ENTER CORRECT NAME OF YOUR CONN STRING" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="true" 
         requiresQuestionAndAnswer="true" 
         applicationName="/" 
         requiresUniqueEmail="false" 
         passwordFormat="Hashed" 
         maxInvalidPasswordAttempts="5" 
         minRequiredPasswordLength="7" 
         minRequiredNonalphanumericCharacters="1" 
         passwordAttemptWindow="10" 
         passwordStrengthRegularExpression=""/>

  </providers>

</membership> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:17:01.303

看来您`connectionStringName`应该设置为`"LDAPConnectionString"`not to `"ApplicationServices"`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T07:38:48.247

您应该使用[ActiveDirectoryMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.activedirectorymembershipprovider.aspx)，而不是`SqlMembershipProvider`.

链接的 MSDN 文章有一个示例配置。

# c# - 无法加载文件或程序集临时 ASP.NET 文件

> ID：13525211
> 
> 赞同：19
> 
> 时间：2012-11-23T08:16:06.543
> 
> 标签：c#, asp.net, .net, .net-assembly

我正在用 C# 开发一个 aps.net 网站，我正在使用框架 4。创建一个新的网站项目后，我尝试运行该项目。但我收到以下错误

`Could not load file or assembly 'file:///C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\myfirst\159977c5\b9e740fc\App_global.asax.yfqtni9g.dll' or one of its dependencies. The system cannot find the file specified.`

我已经浏览了以下链接[并且都谈到了对文件夹的访问]，但这对我没有帮助:(

[无法加载文件或程序集 'file:///C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\ asp.net vs2010](https://stackoverflow.com/questions/10496875/could-not-load-file-or-assembly-file-c-windows-microsoft-net-framework-v4-0)

[ASP.NET 损坏的程序集“无法加载文件或程序集 App_Web_*”](https://stackoverflow.com/questions/784157/asp-net-corrupt-assembly-could-not-load-file-or-assembly-app-web)

[http://web.archive.org/web/20101023213019/http://www.yetanotherdeveloper.com/post/2008/08/10/Could-not-load-file-or-assembly-App_Web.aspx](http://web.archive.org/web/20101023213019/http://www.yetanotherdeveloper.com/post/2008/08/10/Could-not-load-file-or-assembly-App_Web.aspx)

我检查并为用户用户组授予了“临时 ASP.NET 文件”及其子文件夹和文件的完全访问权限。

### 装配负载跟踪

 ``WRN: Assembly binding logging is turned OFF. To enable assembly bind failure logging, set the registry value [HKLM\Software\Microsoft\Fusion!EnableLog] (DWORD) to 1. Note: There is some performance penalty associated with assembly bind failure logging. To turn this feature off, remove the registry value [HKLM\Software\Microsoft\Fusion!EnableLog].`  `### 堆栈跟踪

```
[FileNotFoundException: Could not load file or assembly 'file:///C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\myfirst\4ff7194b\2da62764\App_global.asax.h-eem9xt.dll' or one of its dependencies. The system cannot find the file specified.]
System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +0
System.Reflection.RuntimeAssembly.nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks) +39
System.Reflection.RuntimeAssembly.InternalLoadAssemblyName(AssemblyName assemblyRef, Evidence assemblySecurity, StackCrawlMark& stackMark, Boolean forIntrospection, Boolean suppressSecurityChecks) +132
System.Reflection.Assembly.Load(AssemblyName assemblyRef, Evidence assemblySecurity) +28
System.CodeDom.Compiler.CompilerResults.get_CompiledAssembly() +93
System.Web.Compilation.BuildProvider.CreateBuildResult(CompilerResults results) +60
System.Web.Compilation.BuildProvider.GetBuildResult(CompilerResults results) +16
System.Web.Compilation.ApplicationBuildProvider.GetGlobalAsaxBuildResult(Boolean isPrecompiledApp) +9118863
System.Web.Compilation.BuildManager.CompileGlobalAsax() +44
System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +265

[HttpException (0x80004005): Could not load file or assembly 'file:///C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\myfirst\4ff7194b\2da62764\App_global.asax.h-eem9xt.dll' or one of its dependencies. The system cannot find the file specified.]
System.Web.Compilation.BuildManager.ReportTopLevelCompilationException() +62
System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled() +421
System.Web.Compilation.BuildManager.CallAppInitializeMethod() +31
System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +691

[HttpException (0x80004005): Could not load file or assembly 'file:///C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\myfirst\4ff7194b\2da62764\App_global.asax.h-eem9xt.dll' or one of its dependencies. The system cannot find the file specified.]
System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258 
```

## 如果这是一个重复的问题，请给我一个链接

谢谢你的建议。

 ``### I got the Log as follows

```
The operation was successful.
Bind result: hr = 0x0\. The operation completed successfully.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = John-PC\John
LOG: DisplayName = Microsoft.VisualStudio.ComponentModelHost, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a
 (Fully-specified)
LOG: Appbase = file:///G:/WorkShop/HTML-CSS/ASP/MyFirst/
LOG: Initial PrivatePath = G:\WorkShop\HTML-CSS\ASP\MyFirst\bin
LOG: Dynamic Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\myfirst\159977c5
LOG: Cache Base = C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\myfirst\159977c5
LOG: AppName = b9e740fc
Calling assembly : (Unknown).
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: G:\WorkShop\HTML-CSS\ASP\MyFirst\web.config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Found assembly by looking in the GAC.
LOG: Binding succeeds. Returns assembly from C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.VisualStudio.ComponentModelHost\v4.0_10.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.ComponentModelHost.dll.
LOG: Assembly is loaded in default load context.

````  `我无法追踪任何错误。请帮我....

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-10-29T20:04:09.173

在我尝试开始性能测试后，我遇到了类似的问题。`system.web`我删除了>`compilation`元素中的assemblyPostProcessorType 属性`web.config`，它再次起作用。

```
 <system.web>
<compilation debug="false" targetFramework="4.5.1"  
            assemblyPostProcessorType="Microsoft.VisualStudio.Enterprise.Common.AspPerformanceInstrumenter, Microsoft.VisualStudio.Enterprise.AspNetHelper, Version=12.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
</system.web> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-02-13T17:44:01.007

如果您使用 Visual Studio 性能工具，那么 Visual Studio 可能会在您的 web.config appsettings 部分中留下一个键。它会导致加载 32 位库，如果您的应用程序以 64 位模式加载，则该库将不起作用。

检查以下内容并将其删除：

```
<add key="Microsoft.VisualStudio.Enterprise.AspNetHelper.VsInstrLocation" value="C:\Program Files (x86)\Microsoft Visual Studio 11.0\Team Tools\Performance Tools\vsinstr.exe"/> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T13:31:22.513

解决方案之一是从对我有用的临时 asp.net 文件夹中删除这些文件。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-12-05T06:17:05.730

从 web.config 中删除以下行将解决您的错误。

```
<compilers>
      <compiler language="c#;cs;csharp" extension=".cs" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.CSharpCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:1659;1699;1701" />
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" type="Microsoft.CodeDom.Providers.DotNetCompilerPlatform.VBCodeProvider, Microsoft.CodeDom.Providers.DotNetCompilerPlatform, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" warningLevel="4" compilerOptions="/langversion:default /nowarn:41008 /define:_MYTYPE=\&quot;Web\&quot; /optionInfer+" />
    </compilers>
  </system.codedom> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-05T19:08:53.990

就我而言，在部署 ASP.NET MVC 项目时，我在 Visual Studio 应用程序属性中重命名了其中一个项目（程序集名称）的 DLL。

在 ASP.NET MVC 项目的 Views 文件夹内有一个`Web.config`文件。该`Web.config`文件有以下`razor`部分，我们可以在其中列出在 Razor 视图文件中提供良好 IntelliSense 支持的程序集：

```
 <system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="System.Web.Mvc.WebViewPage">
      <namespaces>
        <add namespace="VizionLogs.LogRepository" />
        <add namespace="System.Web.Mvc" />
        <add namespace="System.Web.Mvc.Ajax" />
        <add namespace="System.Web.Mvc.Html" />
        <add namespace="System.Web.Optimization"/>
        <add namespace="System.Web.Routing" />
      </namespaces>
    </pages>
  </system.web.webPages.razor> 
```

我的问题：我将项目程序集从`VizionLogs.LogRepository`to`ITVizion.VizionLogs.LogRepository`重命名并忘记在该`Web.config`文件中重命名它。这导致 ASP.NET Temp 文件夹错误告诉我找不到`VizionLogs.LogRepository`. 我花了一些时间来弄清楚发生了什么以及错误在哪里...... :)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-23T09:49:23.537

我认为在这里你有类似的问题： [无法加载文件或程序集 'file:///C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\ asp.net vs2010](https://stackoverflow.com/questions/10496875/could-not-load-file-or-assembly-file-c-windows-microsoft-net-framework-v4-0)

接受的答案是：

> 尝试执行完整的解决方案构建。如果这不起作用，请单击构建 -> 清洁解决方案。如果错误仍然存​​在，请删除 C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\parktms 文件夹中的所有内容并重复。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-23T08:22:45.420

转到注册表并输入

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Fusion]
"EnableLog"=dword:00000001
"LogFailures"=dword:00000001
"LogPath"="c:\\temp\\fusionLog" 
```

对于加载的程序集，您将在 c:\temp\fusionLog 中找到一个日志

在那里你会发现缺少什么依赖。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-14T15:28:58.037

删除 (web.config) 块内的内容对我来说适用于类似的问题。

a) 下面描述了为什么要删除它
[<system.codedom>/<compilers> 在 MVC 5 的 web.config 中究竟做了什么？](https://stackoverflow.com/questions/34545520/what-exactly-does-system-codedom-compilers-do-in-web-config-in-mvc-5)

以下来自微软的附加文章有助于理解这个概念

[https://docs.microsoft.com/en-us/previous-versions/ms366723(v=vs.140)?redirectedfrom=MSDN](https://docs.microsoft.com/en-us/previous-versions/ms366723(v=vs.140)?redirectedfrom=MSDN)

**编译文件夹位置**：

默认情况下，当您编译 Web 应用程序时，已编译的代码放置在 Temporary ASP.NET Files 文件夹中。此文件夹是您安装 .NET 框架的位置的子目录

除此之外，另一篇文章建议仔细检查目标框架和安装的框架

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-12-04T14:00:32.377

我有同样的问题。我只是通过更改 web.config -> system.web -> 编译 -> debug="false" 来解决它。然后它工作正常

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-05T05:58:16.383

从下面的文件夹中删除相应文件夹中的临时项目文件（如 .net 4）将解决此问题。

**“C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET 文件”**

也可以参考这个答案。

[汤米回答](https://stackoverflow.com/a/21422682/2315972)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-29T09:50:43.520

就我而言，我在 web.config 中找到 bin 文件夹，如下所示：

```
<appSettings>
      <add key="webSettingFolder" value="C:\Users\ali eshghi\source\repos\SalesWebApiDotNetFramWork\SalesWebApiDotNetFramWork\bin\"/>
  </appSettings> 
```

之后错误消失了。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-01-16T07:41:12.020

请备份并删除文件夹 myfirst\159977c5\b9e740fc\App_global.asax.yfqtni9g.dll'````

# vb.net - VB.NET IQueryable

> ID：13525215
> 
> 赞同：0
> 
> 时间：2012-11-23T08:16:36.270
> 
> 标签：vb.net, linq, entity-framework

我正在使用 VB.NET FX 4.0 和 EF。在我的代码中，我使用：

```
Dim query As System.Linq.IQueryable(Of MY_TABLE)
Dim sCondition As String = "it.DATE_IN = '" + searchDate + "'"
query = From c In MyContext.MY_TABLE .Where(sCondition ) Select c 
```

结果总是空的，我的问题是..如何从 DATE_IN 字段中仅获取日期部分，因为 searchDate 仅采用 dd/MM/yyyy 格式

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:04:31.733

您可以使用`EntityFunctions.TruncateTime`删除时间部分。此外，在比较日期时，您应该使用 a`DateTime`而不是字符串值。

```
Dim dateValue = DateTime.Parse(searchDate).Date
Dim query = MyContext.MY_TABLE.Where(Function(x) _
            EntityFunctions.TruncateTime(x.DATE_IN) = dateValue) 
```

# objective-c - 移动 MKOverlayPathView 消失在瓷砖后面

> ID：13525217
> 
> 赞同：7
> 
> 时间：2012-11-23T08:16:44.560
> 
> 标签：objective-c, ios, mapkit, mkoverlay

我正在开发一个应用程序，我想在其中显示往返机场的虚构飞机。这可能不是我想在地图上展示的唯一东西。

为此，我使用了来自 LocationReminders 的示例代码（他们拥有的 MKOverlayPathView 子类，ReminderCircleView）并将其连接到我自己的代表飞机的 MKOverlay。此类订阅关于覆盖类的坐标和半径属性的 KVO 通知，并在每次更新时使其路径无效。

叠加层以每秒几帧的速度更新其位置，并且我还更新了它的半径，因此我可以模拟透视图（考虑到它是一个模型对象，但仍然是我找到的最佳解决方案，这不是很聪明）。

我正在使用一个简单的圆形路径进行测试。

此设置工作正常。覆盖视图得到更新并且它的行为正确，随着地图和所有的缩放。

问题在于，在模拟飞行中，覆盖不会绘制在通常靠近目的地的某些图块上。圆圈看起来像是在这些瓷砖后面。

我能够理解这个问题中的一件事：每当我观察到圆圈没有被绘制在某个瓷砖上时，如果我缩小，圆圈就会被正确绘制。然而，放大或平移并不能解决任何问题。

我的理论是，某些图块（或它们的地图矩形）没有被标记为重绘，因此，只有通过缩小我才能强制执行。但我仍然认为这与放大似乎无济于事的事实不一致。

我不知道我是否做错了什么，或者我是否遇到了错误或其他什么。我改用了注释并且它正在工作，但是如果你在没有自己观察缩放比例的情况下缩小，我将失去表示一个变得更小的平面的能力。

我已经在 5.1、6.0 和 6.1 版本中进行了测试，并且行为是相同的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:23:17.147

我已经了解导致这种行为的原因。

在我的每次位置更新时，`MKOverlay`我都在更改`boundingMapRect`以匹配飞机的位置。实际上 MKMapView 只在开始时询问`MKOverlay`它（我通过检查对 的调用来了解这一点`-(BOOL)intersectsMapRect:(MKMapRect)mapRect`）。

作为测试，我更改了`boundingMapRect`以匹配整个世界 ( `boundingMapRect = MKMapRectWorld;`) 并且它有效。然后只需围绕我的飞机路径创建一个问题`MKMapRect`，就是这样。

好吧，Apple 声明如下`boundingMapRect`：

> 包含叠加层的投影矩形。（必需）（只读）此属性包含完全包含覆盖区域的最小矩形。这个协议的实现者在实现他们的覆盖类时必须设置这个区域。应该使用投影坐标指定矩形，即通过将地球投影到二维表面上获得的坐标。

我会说：

> 包含叠加层的投影矩形。（必需）（只读）此属性包含完全包含***可以在其中呈现叠加层的区域***的最小矩形。这个协议的实现者在实现他们的覆盖类时必须设置这个区域。应该使用投影坐标指定矩形，即通过将地球投影到二维表面上获得的坐标。

# tridion - 在提交部署阶段发布失败

> ID：13525218
> 
> 赞同：2
> 
> 时间：2012-11-23T08:16:48.537
> 
> 标签：tridion, tridion-2011, tridion-content-delivery

我们确实从 Tridion 5.3 SP1 升级到了 Tridion 2011 SP1。

大多数事情都运行良好。在“提交部署”状态下，少数页面的发布失败，并出现以下错误。数据库是 SQL Server。

```
Phase: Deployment Prepare Commit Phase failed, Unable to prepare transaction: tcm:0-249333-66560, Unable to store
item inside current transaction, Unable to persist data entity, org.hibernate.exception.ConstraintViolationException:
could not insert: [com.tridion.storage.ComponentMeta], org.hibernate.exception.ConstraintViolationException: could
not insert: [com.tridion.storage.ComponentMeta], Unable to persist data entity,
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta],
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta], Unable
to store item inside current transaction, Unable to persist data entity,
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta],
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta], Unable
to persist data entity, org.hibernate.exception.ConstraintViolationException: could not insert:
[com.tridion.storage.ComponentMeta], org.hibernate.exception.ConstraintViolationException: could not insert:
[com.tridion.storage.ComponentMeta], Unable to prepare transaction: tcm:0-249333-66560, Unable to store item inside
current transaction, Unable to persist data entity, org.hibernate.exception.ConstraintViolationException: could not
insert: [com.tridion.storage.ComponentMeta], org.hibernate.exception.ConstraintViolationException: could not insert:
[com.tridion.storage.ComponentMeta], Unable to persist data entity,
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta],
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta], Unable
to store item inside current transaction, Unable to persist data entity,
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta],
org.hibernate.exception.ConstraintViolationException: could not insert: [com.tridion.storage.ComponentMeta], Unable
to persist data entity, org.hibernate.exception.ConstraintViolationException: could not insert:
[com.tridion.storage.ComponentMeta], org.hibernate.exception.ConstraintViolationException: could not insert:
[com.tridion.storage.ComponentMeta] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:29:31.473

I just upgraded to Tridion 2011 SP1 HR1 and got the exact same error even after applying CD_2011.1.1.82946

Apparently, there's another hotfix (unreleased on SDL Tridion World) called CD_2011.1.1.83467 which fixed the issue

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T23:28:12.450

我似乎记得 sdltridionworld.com 上提供的修补程序 CD_2011.1.1.82946 解决了类似的[问题](https://www.sdltridionworld.com/downloads/hotfixes/SDL_Tridion_2011_SP1_1/index.aspx)。请注意，此修补程序是专门为版本 2011 SP1 HR1 构建的。

希望这可以帮助。

干杯，丹尼尔。

# mysql - 从转储恢复到空数据库时出现 1214 错误

> ID：13525219
> 
> 赞同：0
> 
> 时间：2012-11-23T08:16:50.327
> 
> 标签：mysql, mysql-error-1214

因此，我正在尝试重新创建数据库的开发人员副本。我做`drop database somedb`and `create database somedb`，所以它都是空的。我退出 mysql 并将转储文件通过管道传输到 mysql 中，如下所示：

```
mysql -u root -pfoopassw somedb < newdumpfile.sql 
```

几乎立即我收到以下错误并且该过程被中止：

```
ERROR 1214 (HY000) at line 99: The used table type doesn't support FULLTEXT indexes 
```

由于我没有可以具有[全文不兼容类型](https://stackoverflow.com/questions/963534/mysql-fulltext-indexes-problem)的预先存在的表，这是否意味着我的转储文件已损坏？

我尝试更改`alter table sometable ENGINE = MyISAM;`已创建的两个表的表类型（），给我这个错误：

```
ERROR 1217 (23000): Cannot delete or update a parent row: a foreign key constraint fails 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:37:35.983

我了解到问题是我使用过时的 mysql 作为转储文件，版本 5.5，而我应该使用 5.6。我会尝试升级。

# c# - 编写像 DateTimePicker 这样的自定义控件

> ID：13525221
> 
> 赞同：0
> 
> 时间：2012-11-23T08:16:54.577
> 
> 标签：c#, winforms, user-controls, datetimepicker

我一直在尝试实现一个自定义控件，就像标准的 Winform`DateTimePicker`控件一样。只是我需要我的控件以英尺和英寸为单位显示建筑长度值。就像 9'-6".. 控件应该以这种方式工作..

*   在控件的右侧应该可以看到一个上下旋转按钮。
*   控件应该有 2 个子字段，一个用于英尺，一个用于英寸。这些字段不应**是**`TextBox`具有自己边界的单个es。
*   当没有与控件关联的值时，它应该以灰色“指定长度”显示一个幻影文本字符串。
*   单击控件时应显示？'-？"，如果用户在未输入任何长度的情况下单击离开，则应再次显示重影文本。
*   单击时只有子字段应该是可选的..并且向上旋转按钮仅更改当前选择的子字段..
*   英寸子字段应以 3 为单位递增和递减，并环绕其 0 到 11 的范围。

我认为所有功能都存在于标准控件中的某个地方（或可以被覆盖），`DateTimePicker`但幽灵文本要求除外。所以我可能应该问的是**实际工作原理是****什么？`DateTimePicker`我怎样才能复制它的外观和行为..？**

我在 Google 和 stackoverflow 上看了很多，但没有遇到类似的问题或答案。

* * *

编辑 01：

我认为 updownbase 和 maskedtextbox 的组合可能是我需要使用的.. 但我不知道如何.. 对于一个.. maskedtextbox 在单击时不选择子字段.. 还有如何让 updownbase 与掩码文本框中当前选定的子字段..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T01:41:33.277

我将尝试发布一些信息，希望能帮助您入门，即使它并不能直接解决您的所有问题。首先，您可以获得免费的[dotpeek](http://www.jetbrains.com/decompiler/)反编译器，按 CTRL+T，查找`DateTimePicker`类型并了解其工作原理。准备好看到大量的 winapi 调用。除非您确信自己能够理解所有内容并重新编写它以满足您的需求，否则不要走这条路。

更简单的方法是创建自定义控件。它可能看起来不太好，但至少你可以让它工作得更快。例如，创建一个`UserControl1`，它由一个 TextBox + 一个 Button 组成：

```
Public Class UserControl1
  Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    Dim frm As New Form2
    Dim p = frm.PointToScreen(New Point(Me.Left, Me.Bottom))
    frm.Location = New Point(Me.ParentForm.Left, Me.ParentForm.Top + 40) + p
    frm.Show()
  End Sub
End Class 
```

**免责声明：** +40 是一个糟糕的编码标准，但这是我在努力将坐标转换为屏幕/客户端之后所能想到的最好的。如果您找到更好的方法 - 请在评论中提出建议。

无论如何，在设计时它看起来像这样：

![在此处输入图像描述](../Images/83947cc735353cc2b2863fa52385b9e8.png)

`Form2`是您的弹出窗口，如果失去焦点，它将关闭，以模仿真实的弹出行为：

```
Public Class Form2
  Private Sub Form2_Deactivate(sender As Object, e As System.EventArgs) Handles Me.Deactivate
    Me.Close()
  End Sub
End Class 
```

在设计时它看起来像这样（[FormBorderStyle](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx) = None）：

![在此处输入图像描述](../Images/f51801552b0e4da2f5ed4f79311d9877.png)

编译并将此控件放到您的主窗体上。运行您的应用程序 - 当您单击按钮时，ft/in 下拉菜单将出现在您的控制下方。就像任何弹出窗口一样（包括 的弹出窗口`DateTimePicker`），如果您单击其他任何位置，它将消失（`Deactivate`事件用于使其像这样工作）。这是一张图片，以说明其行为：

![在此处输入图像描述](../Images/a3577b70054dde8d4e9b4c67aa2bf388.png)

现在添加验证、格式化等。

# java - 使用 VI Java api 在 ESXi 服务器上配置 snmp

> ID：13525224
> 
> 赞同：0
> 
> 时间：2012-11-23T08:16:57.993
> 
> 标签：java, snmp, esxi

我正在尝试在 ESX-i 服务器上配置 snmp。为此，我正在使用 VI Java api。为此，我正在使用最近的 vi jars。这是代码。

```
import java.net.URL;

import com.vmware.vim25.HostSnmpConfigSpec;
import com.vmware.vim25.HostSnmpDestination;
import com.vmware.vim25.mo.Folder;
import com.vmware.vim25.mo.HostSnmpSystem;
import com.vmware.vim25.mo.HostSystem;
import com.vmware.vim25.mo.InventoryNavigator;
import com.vmware.vim25.mo.ServiceInstance;

public class ConfigureSnmpSystem
{

    private static final String URL_VCENTER = "https://10.118.67.36/sdk";
    private static final String username = "Admin";
    private static final String password = "passwd";
    public static void main(String[] args) throws Exception {

    ServiceInstance si = new ServiceInstance(new URL(URL_VCENTER), username,
            password, true);

    String hostname = "10.108.30.12"; // this is the ip address of esx-i server
    Folder rootFolder = si.getRootFolder();
    HostSystem host = null;
    host = (HostSystem) new InventoryNavigator(rootFolder)
            .searchManagedEntity("HostSystem", hostname);

    if (host == null) {
        System.out.println("Cannot find the host:" + hostname);
        si.getServerConnection().logout();
        return;
    }

    HostSnmpSystem hss = host.getHostSnmpSystem();

    HostSnmpConfigSpec spec = new HostSnmpConfigSpec();
    spec.setEnabled(true);
    spec.setReadOnlyCommunities(new String[] { "visdk" });
    HostSnmpDestination dest = new HostSnmpDestination();
    dest.setCommunity("visdk");
    dest.setHostName("10.108.67.46");
    dest.setPort(162);
    spec.setTrapTargets(new HostSnmpDestination[] { dest });

    hss.reconfigureSnmpAgent(spec);
    si.getServerConnection().logout();
}
} 
```

错误来`HostSnmpSystem hss = host.getHostSnmpSystem();` 了 hss 出来为空

无法猜测错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T04:45:45.373

vCenter Server 尚不支持配置每个 ESX (hostSystem) snmp。我认为这应该最终在 5.5 IIRC 中可用。

另请注意，由于 ESX 5.1 现在支持 SNMPv3，尽管它使用 'esxcli system snmp set|get' cmds 进行配置，但 VIM API 仅支持 SNMPv1。

# xmemcached - xmemcached 设置字节数组

> ID：13525225
> 
> 赞同：1
> 
> 时间：2012-11-23T08:17:06.150
> 
> 标签：xmemcached

我使用 xmemcached 编写 memcacheclient。现在我想要一个方法，比如：set(key, byte[]) 和 get(key) 在 memcache 客户端中返回 byte[]。任何人都可以建议我在 XMEMCACHED 中做一些事情。就我而言，我将协议缓冲区用于串行/反串行对象，然后将它们存储到 Memcache。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T14:38:10.433

为了能够使用 XMemcached 获取 byte[] 值，我实现了自己的转码器：

```
public class ByteArrayTranscoder implements net.rubyeye.xmemcached.transcoders.Transcoder<byte[]>
{

    @Override
    public byte[] decode(CachedData d)
    {
        return d.getData();
    }
    @Override
    public CachedData encode(byte[] o)
    {
        throw new UnsupportedOperationException();
    }
    // UnsupportedOperationException for all other methods
} 
```

用法：

```
byte[] value = client.get(queueName, new ByteArrayTranscoder()) 
```

可能，同样的技巧可以用于设置值，虽然我没有尝试过。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-22T05:59:18.517

我认为您可以直接设置字节数组。

# directory - 如何在文件夹（b）中创建指向文件夹（a）中所有目录的符号链接？

> ID：13525229
> 
> 赞同：0
> 
> 时间：2012-11-23T08:17:20.643
> 
> 标签：directory, find, symlink, creation

在某些情况下，可能需要创建指向包含在一个文件夹中的所有文件夹的符号链接，例如`folder(a)`在另一个文件夹中，例如`folder(b)`. Linux 提供了强大的命令行功能，所以我认为这可以通过以下方式轻松完成`find`：

```
find folder\(a\)/ -maxdepth 1 -type d -exec ln -s {} \
    folder\(b\)/`echo {} | cut -d '/' -f2` \; 
```

但是这个命令并没有完成它的工作。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:17:20.643

这是我发现它有效的一种方法：

```
find folder\(a\)/ -mindepth 1 -maxdepth 1 -type d \
    -printf 'ln -s "../%p" folder\\(b\\)/%f\n' | sh 
```

# sqlite - SGE+ sqlite3：错误：数据库被锁定

> ID：13525235
> 
> 赞同：2
> 
> 时间：2012-11-23T08:17:30.830
> 
> 标签：sqlite, locking, cluster-computing, sungridengine

我正在尝试运行在集群（**SGE**）中使用**sqlite3的脚本。**

 **该脚本使用 lockfile 创建一个锁[，](http://linux.about.com/library/cmd/blcmdl1_lockfile.htm)填充数据库并释放锁。

```
 $cat test.sh

  #!/bin/sh
  lockfile /commun/data/_tmp.idp448.lock
  sqlite3 /commun/data/stats.sqlite "create table if not exists timeBeginDB(target text UNIQUE NOT NULL,inserted int);"
  rm -f /commun/data/_tmp.idp448.lock
  whoami 
```

/commun/data/ 从所有节点都可见。/commun/data/_tmp.idp448.lock 是我创建的一个随机名称，我目前是唯一使用我们新集群的人。

没有 qsub 脚本可以正常工作：

```
 [lindenb]$ sh test.sh
  lindenb #prints whoami, no error on stderr 
```

当**qsub**被调用时：

```
 $ qsub -cwd -S /bin/sh test.sh
  Your job 673 ("test.sh") has been submitted

  $ cat test.sh.o673
  lindenb #prints 'whoami', so the lock have been created and deleted

  $ cat test.sh.e673
  Error: database is locked 
```

这是一个 sqlite3 错误。

您有什么想法或建议，在 SGE 方面，可能是导致该问题的原因，即这种行为差异？

谢谢皮埃尔

**更新：**

我在集群的一个节点上以 root 身份登录。以下简单命令失败：（/commun/data/stats2.sqlite 不存在）

```
ssh root@node02
root@node02's password:
sqlite3 /commun/data/stats2.sqlite 'create table if not exists timeBeginDB(target text UNIQUE NOT NULL,inserted int);'
Error: database is locked 
```

它在 ~root 中工作：

```
[root@node02 ~]# sqlite3 stats2.sqlite 'create table if not exists timeBeginDB(target text UNIQUE NOT NULL,inserted int);'
[root@node02 ~]# 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:38:00.263

从我在 SGE 上所做的测试来看，它似乎`lockfile`不适用于集群。不过，似乎可行的是[bash-hackers](http://wiki.bash-hackers.org/howto/mutex)`mkdir`中描述的简单锁。

```
#!/bin/sh
DIR=/commun/data/
LOCK=$DIR/_tmp.idp448.lock
until mkdir $LOCK ; do
    sleep 4
done
(date ; hostname) >> $DIR/sge-test
rmdir $LOCK
whoami 
```

使用`lockfile`时，sge-test 文件中报告的日期非常接近。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:24:08.230

/commun/data 是您的 exec 节点上的 NFS 挂载吗？

您可能会在 GridEngine 设置中看到 SQLite“错误：数据库已锁定”消息（通常有许多节点通过 NFS 写入共享文件系统）的一个原因是 SQLite 想要使用 fcntl 锁，而这*根本不起作用*除非您在客户端和服务器上都运行 lockd，否则就在 NFSv3 上*。*

我经常遇到这种情况，到目前为止，我所看到的每一种情况都只是在每个集群节点上启用 lockd（或 rpc.lockd，或 nfslock 等，具体取决于您的环境）服务，以及为共享服务提供服务的任何机器文件系统将解决该问题。**

# cxf - 我如何知道 CXF 是否使用 JIBX 数据绑定？

> ID：13525242
> 
> 赞同：0
> 
> 时间：2012-11-23T08:17:50.373
> 
> 标签：cxf, jibx

我正在为 Web 服务的客户端应用程序使用 Apache CXF。我打算为此使用 JIBX 数据绑定。

当我测试我的应用程序时，我得到了以下日志。我很困惑我的应用程序是否使用日志中的 JIBX 数据绑定，因为“绑定贡献的拦截器”列表不包括与 JIBX 相关的拦截器。

我对CXF和JIBX知之甚少。请让我知道。

提前致谢。

```
----------------------------------
Part of Logging 
........
2012\. 11\. 23 오후 4:49:28 org.apache.cxf.jibx.JibxDataBinding initialize
더 자세히: Initialize JiBX Databinding for [{http://server.sample.prototype.topas/}TopasPrototypeWebServiceServerService] service
........

자세히: Interceptors contributed by binding: [org.apache.cxf.interceptor.AttachmentOutInterceptor@14dd758, org.apache.cxf.interceptor.StaxOutInterceptor@174d93a, org.apache.cxf.binding.soap.interceptor.SoapHeaderOutFilterInterceptor@61a907, org.apache.cxf.interceptor.WrappedOutInterceptor@1a0225b, org.apache.cxf.interceptor.BareOutInterceptor@2f8b5a, org.apache.cxf.binding.soap.interceptor.SoapPreProtocolOutInterceptor@165c7f6, org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor@12aea3e]
.........
------------------------------------ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:31:34.757

保利乌斯，

JiBX 网站上有几个示例。

使用 JiBX 实现 CXF SOAP 服务器：http: [//jibx.sourceforge.net/maven-jibx-plugin/webservice.html](http://jibx.sourceforge.net/maven-jibx-plugin/webservice.html)

使用 JiBX 实现 RESTful 服务：http: [//jibx.sourceforge.net/maven-jibx-plugin/rest.html](http://jibx.sourceforge.net/maven-jibx-plugin/rest.html)

祝你好运！

Don Corley JiBX 贡献者

# java - 在打开窗口之前检查窗口是否已经打开

> ID：13525247
> 
> 赞同：0
> 
> 时间：2012-11-23T08:18:10.000
> 
> 标签：java, gwt, jsni

我有 gwt java 代码程序，它打开一个带有 url 的窗口。

```
 Map<String, Object> ids = new HashMap<String, Object>();
                    ids.put("employeeId", UserToken.getCurrentUserToken().getEmployeeId());
                    createCaseUrl = ICMIntakeConstants.buildGrailsUrl(ICMIntakeConstants.CLIENT_APPLICATION_CONTROLLER, "", ids);
                    ICMWindow.open(createCaseUrl, "intake", "height=600,width=800,scrollbars=yes,resizable=yes,toolbar=no,directories=no,status=no,menubar=no", true); 
```

由于某种原因，它被调用了两次的代码问题（但 IE 和 chrome 处理它，但不是 firefox），这就是为什么窗口只在 Firefox 中弹出两次。我需要知道如何防止这种情况。我试图修改窗口的 JSNI 代码，但我的背景为零，当我进行研究时，不会出现一个简单的警报，所以我无法真正调试/查看发生了什么。

```
/**
 * Defines all variable in JavaScript accessible by Java code and opens a new browser window
 * with the specified url, name and features.
 */
public static native void open(String url, String name, String features, boolean force) 
/*-{
  $wnd.alert("test2");
    var winRef;
    try {

        if (force)
        {

                 winRef = $wnd.open(url,name, features);

                  $wnd.alert("test1 force");
                  Alert.alert("clicked!");

        }
        else
        {
            $wnd.alert("test2");
             winRef = $wnd.open("",name, features);
             if(winRef.location == 'about:blank')
             {
                  winRef.location=url
             }
             else 
             {
                  if(!/Chrome[\/\s]/.test(navigator.userAgent))
                  {
                      winRef.alert("Please click Ok To Continue....");
                  }
             }
        }

        // Set focus to the opened window
        winRef.focus();

    } catch (err) {
    }         
}-*/; 
```

我尝试通过 JUNIT 测试调用 open() 方法，但没有...

谁能告诉我如何使警报弹出，因为即使我删除了整个代码并离开了 $wnd.alert("test2"); ，上面的代码也不起作用？以及如何检查 JSNI 中是否存在 winref 那么我不会打开窗口？请帮忙。

或者有没有办法可以在打开的窗口中插入类似 javascript 代码？解决此问题的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T14:01:00.727

您必须维护对打开窗口的引用，以便您可以询问它是否已关闭。这里有一个工作示例：

```
 private native Element open(String url, String name, String features) /*-{
    return $wnd.open(url, name, features);
  }-*/;

  private native boolean isOpen(Element win) /*-{
    return !! (win && !win.closed);
  }-*/;

  private native void close(Element win) /*-{
    if (win) win.close();
  }-*/;

  private native void focus(Element win) /*-{
    if (win) win.focus();
  }-*/;

  private Element win = null;

  public void onModuleLoad() {

    Button open = new Button("Open Win");
    Button close = new Button("Close Win");
    RootPanel.get().add(open);
    RootPanel.get().add(close);

    open.addClickHandler(new ClickHandler() {
      public void onClick(ClickEvent event) {
        if (!isOpen(win)) {
          win = open("http://www.google.com", "myWin", "height=600,width=800,scrollbars=yes,resizable=yes,toolbar=no,directories=no,status=no,menubar=no");
        }
        focus(win);
      }
    });

    close.addClickHandler(new ClickHandler() {
      public void onClick(ClickEvent event) {
        close(win);
      }
    });

  } 
```

# android - 让自定义View的onDraw方法不执行repeat

> ID：13525248
> 
> 赞同：0
> 
> 时间：2012-11-23T08:18:12.203
> 
> 标签：android, ondraw

我设置了一个自定义View，并作为ListView的一个Item来显示。

当我滑动 ListView 时，自定义 View 的 onDraw 会重复执行。单击项目也会执行 onDraw 重复。在自定义View中我只是画了一张图，不需要重复执行。如何让它只执行一次？

编辑：除了重写结构函数和 onDraw 方法外，没有重写任何方法。

除了在 onDraw 方法中调用 canvas.drawBitmap 之外，不调用任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:41:16.310

您可以调用 invalidate() 方法，该方法会强制调用 onDraw()。

# sql - 在h2数据库中按时间间隔分组

> ID：13525250
> 
> 赞同：4
> 
> 时间：2012-11-23T08:18:27.913
> 
> 标签：sql, h2, group-by

使用 h2 数据库，我想在根据时间戳对条目进行分组时获取列的平均值。

我的表如下所示：

```
TIME                    SID             SERVICE         TET     
2012-11-21 11:31:45.433 164DSQL0L4JW7   service1        3868    
2012-11-21 11:31:45.608 164DSS6TJS321   service2        350     
2012-11-21 11:31:45.711 164DSROS9DNXA   service2        285     
2012-11-21 11:31:45.766 164DSH2PMPY4M   service1        4044    
2012-11-21 11:31:45.778 164DSOGRCKG8J   service1        4248    
2012-11-21 11:31:45.82  164DSRMV0QMFT   service1        3766    
2012-11-21 11:31:46.089 164DSP1L9W6MC   service1        4257    
2012-11-21 11:31:46.226 164DSOPUNUFJF   service3        703     
2012-11-21 11:31:46.752 164DSLJHST6E8   service3        411     
2012-11-21 11:31:46.781 164DSHPI1T3J9   service3        393     
2012-11-21 11:31:45.24  164DSQI4RY330   service2        235     
2012-11-21 11:31:45.268 164DSPRDHROQN   service2        197     
2012-11-21 11:31:45.991 164DSRUUGQ8LN   service2        380     
2012-11-21 11:31:46.338 164DSMARDXMD3   service3        783 
```

我想提取按 TET 列分组的 TET 列的平均值。我希望间隔灵活（例如 15 秒，另一个查询 5 分钟）。

我发现这个[问题](https://stackoverflow.com/questions/10110341/group-records-by-time)几乎是我需要的，但不幸的是我无法获得任何在 H2 中工作的解决方案（没有 strftime）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:50:27.420

H2 支持许多日期和时间函数，例如[DATEDIFF](http://h2database.com/html/functions.html#datediff)和 DATEADD。例子：

```
drop table if exists test;
create table test(id int primary key, ts timestamp);
insert into test 
select x, dateadd(s, x, now()) from system_range(1, 100);
select  dateadd(s, datediff(s, now(), ts) / 10 * 10, now()) as diff,
avg(id) from test group by diff order by diff; 
```

# python - 传递命令行参数

> ID：13525253
> 
> 赞同：0
> 
> 时间：2012-11-23T08:18:37.113
> 
> 标签：python, python-2.7

我编写了一个脚本，该脚本又运行一些其他代码，我需要在后面的代码中检查一些条件，然后再执行它！所以我想到了使用命令行参数，但我对 OOP 概念没有更好的知识来编写类，这是在堆栈溢出中类似问题给出的大多数答案中推荐的。我可以像这样传递参数吗

```
subprocess.call([sys.executable, 'Cnt1', 'argument1', 'argument2']) 
```

如果可以，如何阅读后面代码中的参数？我试图打印

```
print sys.executable
print Cnt1 
```

它显示打印 Cnt1 的错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:01:28.037

您已`'Cnt1'`在子进程调用中指定为字符串

并且`print Cnt1`会产生错误，因为`Cnt1`它不是变量

你的语法应该是`subprocess.call([sys.executable, Cnt1, argument1, argument2])`

假设您在 Cnt1、argument1 和 argument2 变量中有所需的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:48:04.673

您确实可以`python`使用该`subprocess`模块运行，并将参数传递给它。本质上，您将运行一个全新的程序；这与调用函数不同。*不过，通常*没有必要走这么大的路。

如果你运行一个单独的 python 脚本，你需要解析从[`sys.argv`](http://docs.python.org/2/library/sys.html#sys.argv). 该[`argparse`模块](http://docs.python.org/2/library/argparse.html)使这更容易，但如果您所做的只是传递参数列表，则不需要。

```
import sys
print sys.argv 
```

# javascript - Twitter Bootstrap Carousel 加载时自动播放

> ID：13525258
> 
> 赞同：20
> 
> 时间：2012-11-23T08:19:16.787
> 
> 标签：javascript, twitter-bootstrap, carousel

使用 twitter 引导框架，如何调用轮播来“自动滑动”。这意味着当页面加载时，轮播会自动滚动。

我已经为`<a>`下一个链接尝试了一个 javascript onLoad click 函数，但这没有用。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-23T08:25:20.137

您应该按照[Twitter Bootstrap 文档](http://twitter.github.com/bootstrap/javascript.html#carousel)中关于 Carousel 的说明进行操作，因此将第一个 Carousel 幻灯片项设置为**class="active"**并以这种方式初始化 carousel 的 js：

```
$(function(){
    $('.carousel').carousel({
      interval: 2000
    });
}); 
```

然后如果还不够（但这从来没有发生在我身上）使用蛮力触发点击悬停轮播控制按钮，如下所示：

```
$(function(){
$('.carousel').carousel({
      interval: 2000
    });
$('.carousel-control.right').trigger('click');
}); 
```

但这只是一个不需要的技巧，真的，只需按照文档！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-04-02T14:11:40.927

简单的。您在 div 中缺少“data-ride”属性。

`<div id="carousel-example-generic" class="carousel slide" data-ride="carousel">`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-23T20:13:05.617

根据[文档](http://twitter.github.com/bootstrap/javascript.html#carousel)，您需要通过 JavaScript 初始化 Carousel 插件。官方 Bootstrap 文档页面上的轮播示例在**application.js**文件的第 67-68 行初始化：

```
// carousel demo
$('#myCarousel').carousel() 
```

这给了它默认设置。

如果要指定循环间隔，可以`interval`以毫秒为单位设置属性：

```
$('.carousel').carousel({
  interval: 2000
}) 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-07T10:40:58.700

将它放在文档就绪块中，让它为我自动启动

```
$(document).ready(function() {
$('#myCarousel').carousel();
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-08T13:21:32.183

`<div id="myCarousel" class="carousel slide" data-ride="carousel">`对我有用，我一直缺少的是 data-ride 属性。

我希望这会帮助很多人。谢谢stackoverflow，在大多数情况下，您对我非常有用。很高兴这个社区存在。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-06-10T14:45:44.453

您可以使用 html 标记上的**data-interval**属性来自动播放：

```
<div id="carousel-example-generic" class="carousel slide" data-ride="carousel"  data-interval="5000"> 
```

**data-interval**：自动循环项目之间的延迟时间（以毫秒为单位）。如果为 false，carousel 将不会自动循环。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-24T22:54:18.490

```
<header id="myCarousel" class="carousel slide"> 
```

您需要添加

```
data-ride="carousel"

<header id="myCarousel" class="carousel slide" data-ride="carousel"> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-01-21T15:10:16.327

对于 Bootstrap 4 及更高版本：

```
$(function(){
    $('.carousel').carousel({
      interval: 2000,
      ride: 'carousel' // this is the important part
    });
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-23T14:57:50.940

只需添加`data-interval="5000"`到`div`与 IP `carouselExampleIndicators`。

像这样：

```
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="5000"> 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-04-09T14:14:24.433

只需将“幻灯片”类添加到轮播 div 标签中，如下所示：

```
<div class="carousel slide" id="this-carousel-id"> 
```

# c# - log4Net 日志文件未写入

> ID：13525261
> 
> 赞同：7
> 
> 时间：2012-11-23T08:19:35.163
> 
> 标签：c#, asp.net, logging, log4net

我正在尝试在我的 asp.net Web 应用程序中实现 log4net。但不幸的是，该文件没有创建。下面是我的配置。

1\. 添加了 log4net .dll 参考

2\. Web.config 设置。

```
 <configSections>
    <section name="log4net"type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
  </configSections>
  <log4net>
    <appender name="RollingFileAppender" type="log4net.Appender.RollingFileAppender">
      <file type="log4net.Util.PatternString" value="E:/Log/error_%date{dd-MM-yyyy}.log"/>
      <appendToFile value="true"/>
      <rollingStyle value="Date"/>
      <!--<maxSizeRollBackups value="5"/>
      <maximumFileSize value="10MB"/>
      <staticLogFileName value="true"/>-->
      <datePattern value="yyyyMMdd" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %level %logger - %message%newline%exception%newline%newline"/>
      </layout>
    </appender>
    <root>
      <appender-ref ref="RollingFileAppender"/>
    </root>

  </log4net> 
```

3\. 添加了装配参考

```
 [assembly: log4net.Config.XmlConfigurator(Watch = true)] 
```

4\. 在后面的代码中写入日志

```
private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType);

try
{
    throw new System.IO.FileNotFoundException();
}
catch (Exception ex)
{     
    log.Error("Error error logging", ex);       
} 
```

这些是我遵循的步骤，但未创建日志......

请提出您的建议。

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T11:33:05.950

确保您正在调用**XmlConfigurator的****Configure**函数。

 **请参阅此解决方案：[在 Web 应用程序中配置 Log4Net](https://stackoverflow.com/questions/10204171/configure-log4net-in-web-application)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T08:31:15.093

尝试在 E:/Log 中为 asp.net 用户或所有人授予写入权限，然后尝试添加 requirePermission="false" 属性，如下所示：

```
<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,Log4net" requirePermission="false" /> 
```

或者您应该在根部分指定日志记录级别，如下所示：

```
<root>
  <level value="ALL" />
  <appender-ref ref="RollingFileAppender" />
</root> 
```

[这里是 ASP.NET 3.5 – File Appender 示例应用程序](http://www.codeproject.com/Articles/37107/Log4Net-with-ASP-NET-3-5-File-Appender)**

# file-upload - 从 Windows 批处理文件 FTP 上传

> ID：13525262
> 
> 赞同：0
> 
> 时间：2012-11-23T08:19:38.300
> 
> 标签：file-upload, batch-file, ftp, windows-server-2008

按照网上的各种指南，我整理了一个批处理文件，该文件应该将 .zip 上传到我们的中央文件服务器。但是，如果我使用“ftp -n -s:ftpup.dat 108.174.61.82 20”，它不适用于添加到主机的端口 20。我还尝试了“ftp -n -s:ftpup.dat”，然后在下一行尝试了“open 108.174.61.82 20”，但也失败了。我到底做错了什么？

```
cd MySQL
@echo off
echo user backups>ftpup.dat
echo passwordhere>>ftpup.dat
echo cd /MySQL>>ftpup.dat
echo binary>>ftpup.dat
echo put MYSQL-%location%.%backuptime%.zip>>ftpup.dat
echo quit>>ftpup.dat
ftp -n -s:ftpup.dat serveriphere 20
del ftpup.dat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T22:35:21.117

我知道这是一个老问题，但是我在端口上遇到了同样的问题，这对我有用，我将命令保存 `open %ftphost% > ftpcmd.dat`在文件中，而不是稍后调用它

```
SET ftphost=172.xxx.xxx.xx 22    
ECHO open %ftphost% > ftpcmd.dat
ECHO user %username%>> ftpcmd.dat
ECHO %userpass%>> ftpcmd.dat
ECHO bin>> ftpcmd.dat
ECHO put %file%>> ftpcmd.dat
ECHO quit>> ftpcmd.dat

ftp -n -s:ftpcmd.dat
del ftpcmd.dat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:47:42.033

你运行的是 FTP 服务器还是 20 端口？

**Telnet serveriphere 20**来检查端口是否正在监听，也许你让它在默认端口**21上运行**

PS：它是原始的 ftp 协议吗？也许它正在使用 SFTP 或 FTPS

**编辑**：尝试

> ftp -s:ftpup.dat serveriphere 20

删除 -n 自动登录标志

试试这个：

```
Echo ~UsrName~> ftpcmd.txt
echo ~myPass~>> ftpcmd.txt
echo binary>> ftpcmd.txt
echo prompt n>>ftpcmd.txt
echo mget *.exe>> ftpcmd.txt
echo bye >> ftpcmd.txt
ftp -s:ftpcmd.txt ~ftpAddress~
del ftpcmd.txt 
```

# aptana - 与mysql2相关的Ruby错误

> ID：13525264
> 
> 赞同：2
> 
> 时间：2012-11-23T08:20:11.723
> 
> 标签：aptana, bundle, mysql2

我在 Windows 7 Ultimate 上运行 Aptana Studio 3。我打开了一个现有项目（站点+应用程序），我必须进行一些修改。当“ `Run server`”时，我收到此错误：

> `c:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.1/lib/bundler/resolver.rb:287:in resolve`: 在这台机器上可用的 gem 中找不到 gem ' `mysql2 (= 0.2.6) x86-mingw32`'。( `Bundler::GemNotFound`)

事情是我从终端安装了 mysql2 gem，但我仍然得到这个错误。我究竟做错了什么？

# python - numpy数组的列表索引中的多个切片

> ID：13525266
> 
> 赞同：5
> 
> 时间：2012-11-23T08:20:18.630
> 
> 标签：python, arrays, numpy, indexing

Numpy 数组允许索引列表，例如

```
a = np.arange(1000)
l = list([1,44,66,33,90,345])
a[l] = 22 
```

但是，例如，如果我们想使用多切片索引或索引加切片，则此方法不起作用。

```
a = np.arange(1000)
l = list([1,44,66,33,90, slice(200,300) , slice(500,600) ])
a[l] = 22 
```

此代码返回错误消息：

```
IndexError: too many indices 
```

我的问题很简单：你知道在**numpy**或**scipy**中是否存在使用这种索引的有效方法吗？

或者使用这样的索引方法有什么好的和有效的方法？

不要忘记切片的使用会产生非常快的代码；我的问题是拥有尽可能快的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:27:36.307

我想到了什么：

```
a = np.arange(1000)
l = np.hstack(([1, 44, 66, 33, 90], np.arange(200, 300), np.arange(500, 600)))
a[l] = 22 
```

我不确定这是否是最简单的方法，但它确实有效。

**编辑：**你说得对，这比使用切片要慢；但是您不能创建具有任意值的切片对象。也许你应该做几个作业然后：

```
%timeit a[np.hstack(([1, 44, 66, 33, 90], np.arange(200, 300), np.arange(500, 600)))] = 22
10000 loops, best of 3: 39.5 us per loop

%timeit a[[1, 44, 66, 33, 90]] = 22; a[200:300] = 22; a[500:600] = 22
100000 loops, best of 3: 18.4 us per loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:49:10.180

您可以使用精美的索引来构建索引列表。

```
l = numpy.array([1,44,66,33,90]+range(200,300)+range(500,600))
a[l] = 22 
```

但正如[@Lev](https://stackoverflow.com/a/13525348/709852)指出的那样，这可能不会更快（尽管如果您可以预先计算索引列表，几乎可以肯定会如此）。

但是，花式索引适用于每个轴。因此，您可以在一个轴上使用索引，然后对其他轴进行切片，如果这有帮助的话：

```
a = numpy.random.randn(4, 5, 6)
l = numpy.array([1, 2])
a[l, slice(None), slice(2, 4)] = 10 
```

# iphone - 我的 reloaddata 调用没有调用 UItableviewcontroller 中的委托方法？

> ID：13525270
> 
> 赞同：2
> 
> 时间：2012-11-23T08:20:27.713
> 
> 标签：iphone, ios, ipad

我有一个应用程序，我在其中使用像 facebook 应用程序这样的 sidemenu 控制器。它基本上是一个`UITableViewController`。当我`[self.tableView reloaddata]`在视图中使用时，它第一次工作正常时会出现方法。由于某些要求，我需要重新加载这个表视图从另一个视图控制器。所以我这样做了：

```
 SideMenuViewController *second = [[SideMenuViewController alloc]init];
 [second viewWillappear:YES] 
```

我在哪里重新加载数据。但是当我这样做时，reloaddata 不是调用 tableviewcontroller 的 cellforindex 方法，而是调用 numberOfRowsInSection 方法。任何人都可以帮助我找出我哪里出错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T08:49:56.023

您可以对此使用通知。

在 SideMenuViewController viewDidLoad 方法中添加一个：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(reloadTable)
                                             name:@"SideMenuShouldRefreshDataNotification"
                                           object:nil]; 
```

reloadTable 方法如下所示：

```
-(void)reloadTable {
dispatch_async(dispatch_get_main_queue(),^{
  [self.tableView reloadData];
});
} 
```

当您想刷新表格时，您只需从应用程序中的任何位置发布此通知。

```
[[NSNotificationCenter defaultCenter] postNotificationName:[NSNotification notificationWithName:@"SideMenuShouldRefreshDataNotification" object:nil]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:23:50.570

像这样尝试并在下面检查：

```
[[self yourtableviewname] reloadData]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:29:02.687

如果您创建一个新实例并在其上调用方法，则不会导致旧实例被刷新。调用`refreshData`您现有的`TableView`实例，而不是创建一个新实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:30:18.700

使用协议委托重新加载。另一个视图控制器可能无法以您使用的方式调用 viewWillAppear。通过编写一个委托来重新加载 tableview，该委托将返回到其中包含 tableview 的控制器。

希望能帮助到你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T09:51:42.773

此代码永远不会重新加载您的 tableView：

```
SideMenuViewController *second = [[SideMenuViewController alloc]init];
[second viewWillappear:YES] 
```

因为在这里你正在创建你的`SideMenuViewController`类的一个新实例。如果您调用 reloadData 它不会刷新以前的 tableView 实例。

而且强行调用`viewWillappear`委托方法是个坏习惯。

**解决方案：**

`SideMenuViewController`在 viewController 的 @interface 中声明一个实例并为此编写属性。当您转到该视图时，请设置`SideViewController`实例。当用户按下后退按钮调用时：

```
[sideViewControllerObject.tablView reloadData]; 
```

# jaxb - Jaxrs 喜欢编组和解组

> ID：13525271
> 
> 赞同：1
> 
> 时间：2012-11-23T08:20:29.367
> 
> 标签：jaxb, jax-rs

我正在开发一个轻量级框架，用于编组和解组发送到 jaxrs 服务和从 jaxrs 服务接收的数据。我正在使用 jaxb 编组器和解组器。

使用该服务时，我注意到它能够通过将实体列表包装到带有类名的标签中，然后在末尾加上“s”来编组实体列表。所以 a`<customer>`会被包裹起来`<customers>`。这是特定于实现的东西，还是在 jaxrs 规范中？

此外，在创建 jaxrs 服务时，您可以指定它使用和生成的 MediaType，如下所示：

```
@Consumes(MediaType.APPLICATION_XML)
@Produces(MediaType.APPLICATION_XML) 
```

您还可以指定`MediaType.TEXT_PLAIN`在返回 String、Long 等时在服务器上使用哪个。

我想执行与服务器端发生的完全相反的操作。即解组服务已编组的内容，并以服务能够解组的方式编组数据。目前我有这个代码：

```
jaxbContext = JAXBContext.newInstance(<array of classes>);
javax.xml.bind.Marshaller marshaller = jaxbContext.createMarshaller();
marshaller.setProperty(javax.xml.bind.Marshaller.JAXB_FRAGMENT, true);
StringWriter writer = new StringWriter();
marshaller.marshal(obj, writer);
String xml = writer.toString();

Unmarshaller unmarshaller = jaxbContext.
StringReader reader = new StringReader(xml);
JAXBElement<T> jaxbElement = unmarshaller.unmarshal(new StreamSource(reader), clazz);
jaxbElement.getValue(); 
```

但是，此代码无法处理 TEXT_PLAIN 或指定类的列表。

# hibernate - 如何同时在两个表中使用事务？

> ID：13525272
> 
> 赞同：0
> 
> 时间：2012-11-23T08:20:30.267
> 
> 标签：hibernate, transactions

如何在不同的表中同时使用 Hibernate Transaction？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:42:36.523

你开始一个事务，用尽可能多的实体做你想做的一切，然后提交事务，如[文档中所示](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#transactions-demarcation-nonmanaged)

```
// Non-managed environment idiom with getCurrentSession()
try {
    factory.getCurrentSession().beginTransaction();

    // do some work
    ...

    factory.getCurrentSession().getTransaction().commit();
}
catch (RuntimeException e) {
    factory.getCurrentSession().getTransaction().rollback();
    throw e; // or display error message
} 
```

# css - css 属性前的 * 符号是什么意思？

> ID：13525274
> 
> 赞同：3
> 
> 时间：2012-11-23T08:20:34.747
> 
> 标签：css

> **可能重复：**
> [CSS 声明前的 *（星号）是什么意思？](https://stackoverflow.com/questions/2564945/what-does-an-star-mean-in-front-of-a-css-declaration)

我在 aquincum 模板上找到了这个 css：

```
.fluid .grid4 { width: 31.914893614%; *width: 31.8617021246383%; } 
```

那么放 * 符号是什么意思呢？它应该在什么时候出现？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T08:23:00.817

它将属性值应用于 IE7 及更低版本。这也是无效的CSS。请参阅[http://www.webdevout.net/css-hacks#unrecommended-asterisk_prefix](http://www.webdevout.net/css-hacks#unrecommended-asterisk_prefix)。

您应该考虑使用条件注释。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:24:07.527

`*`被 IE6 忽略，而其他浏览器不会忽略它，因此不应用该样式。同样，您可以使用`_`用于 IE7。这有点像黑客。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:25:32.637

这是一个 CSS hack，应该使样式仅适用于 IE7 及以下版本。

与大多数 CSS hack 一样，这是使用不正确的代码使浏览器以特定方式做出反应。如果您使用它，您必须在发布的每个新浏览器版本中给您的代码发送文本，以确保它以您期望的方式做出反应。

你可以在这里找到更多关于它的信息：[http ://www.javascriptkit.com/dhtmltutors/csshacks3.shtml](http://www.javascriptkit.com/dhtmltutors/csshacks3.shtml)

# iphone - iOS应用程序上奇怪的国际化行为

> ID：13525275
> 
> 赞同：1
> 
> 时间：2012-11-23T08:20:58.243
> 
> 标签：iphone, ios, xcode, internationalization, storyboard

我面临一个问题，也许有人知道解决方案。我有一个必须是意大利语的 iPhone 应用程序，但目前该项目显示此设置

[http://cl.ly/L57W](http://cl.ly/L57W)

现在所有屏幕，当我启动应用程序时都是英文的。我不知道发生了什么，我现在才开始从事这个项目。有谁知道是否有办法在 Xcode 中重新分配所有这些值？提前致谢

# windows-phone-7 - WP7 枢轴控制如何工作？

> ID：13525276
> 
> 赞同：0
> 
> 时间：2012-11-23T08:21:04.013
> 
> 标签：windows-phone-7, header, pivot, large-data

我正在构建显示大型图像库的 Windows Phone 7 应用程序。我正在使用枢轴控制来显示它们。

枢轴`HeaderTemplate`包含 1 `TextBlock`（图片的标题）和`ItemTemplate`包含 1 个`Image`控件（图片）。

假设我的画廊包含 300 张图片。当我选择第 300 张图片时，我看到`Image`立即显示第 300 张图片，但标题从第 1 到第 300 标题逐渐显示。

为什么标题不立即显示第 300 个标题？如何强制它立即显示？

是否有更好的实现处理大量项目的枢轴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:36:13.110

您可以根据需要使用任意数量的项目。只需使用 DataBinding 即可。没有代码隐藏，也没有手动添加用户控件。只需像您一样使用模板，一切正常。为什么？

模板和数据绑定具有这样的概念，即只有数据会改变。如果你会看到向下滚动巨大的列表，实际上只有项目的内容会改变。列表本身只会保留……例如 10 个项目 + 2（顶部/底部），如果需要，将填充 x-thound 条目的数据。通过使用数据绑定，内存只需要显示大约 12 个项目，而不是 hunderts 或 thousends。

[http://msdn.microsoft.com/en-us/library/ms752347.aspx](http://msdn.microsoft.com/en-us/library/ms752347.aspx)

为了检查您的情况，您可以将任何计时器添加到 MainPage 并检查 RAM 使用情况：

```
Private Sub dptm_Tick(sender As Object, e As System.EventArgs) Handles dptm.Tick
    txtDeviceUsedMemory.Text = "Speichernutzung : " & (Microsoft.Phone.Info.DeviceStatus.ApplicationCurrentMemoryUsage / 1024 / 1024).ToString("0.0") & "MB"
End Sub 
```

![数据绑定](../Images/c3624f09bcf9139e4dfd1fc14e03efa2.png)

# android - 如何加密字符串，使其可以用作文件路径的一部分，然后在 Android 中解密？

> ID：13525279
> 
> 赞同：1
> 
> 时间：2012-11-23T08:21:09.380
> 
> 标签：android, encryption

在我的应用程序中，我需要加密一个可以包含字符 az、AZ、0-9、下划线、句点和破折号的字符串，然后我们应该能够使用该加密字符串作为文件路径的一部分，即；/mnt/sdcard/encryptedstring/file/ 然后我也应该能够解密该字符串。您能否告诉我是否有任何方法可以实现这一目标？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:23:37.327

IM 为我的 Android 应用程序使用以下类，它就像一个魅力：

```
import java.security.SecureRandom;

import javax.crypto.Cipher;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;

public class Encryption {

    public static String encrypt(String seed, String cleartext) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] result = encrypt(rawKey, cleartext.getBytes());
        return toHex(result);
    }

    public static String decrypt(String seed, String encrypted) throws Exception {
        byte[] rawKey = getRawKey(seed.getBytes());
        byte[] enc = toByte(encrypted);
        byte[] result = decrypt(rawKey, enc);
        return new String(result);
    }

    private static byte[] getRawKey(byte[] seed) throws Exception {
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
        sr.setSeed(seed);
        kgen.init(128, sr); // 192 and 256 bits may not be available
        SecretKey skey = kgen.generateKey();
        byte[] raw = skey.getEncoded();
        return raw;
    }

    private static byte[] encrypt(byte[] raw, byte[] clear) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.ENCRYPT_MODE, skeySpec);
        byte[] encrypted = cipher.doFinal(clear);
        return encrypted;
    }

    private static byte[] decrypt(byte[] raw, byte[] encrypted) throws Exception {
        SecretKeySpec skeySpec = new SecretKeySpec(raw, "AES");
        Cipher cipher = Cipher.getInstance("AES");
        cipher.init(Cipher.DECRYPT_MODE, skeySpec);
        byte[] decrypted = cipher.doFinal(encrypted);
        return decrypted;
    }

    public static String toHex(String txt) {
        return toHex(txt.getBytes());
    }
    public static String fromHex(String hex) {
        return new String(toByte(hex));
    }

    public static byte[] toByte(String hexString) {
        int len = hexString.length()/2;
        byte[] result = new byte[len];
        for (int i = 0; i < len; i++)
            result[i] = Integer.valueOf(hexString.substring(2*i, 2*i+2), 16).byteValue();
        return result;
    }

    public static String toHex(byte[] buf) {
        if (buf == null)
            return "";
        StringBuffer result = new StringBuffer(2*buf.length);
        for (int i = 0; i < buf.length; i++) {
            appendHex(result, buf[i]);
        }
        return result.toString();
    }
    private final static String HEX = "0123456789ABCDEF";
    private static void appendHex(StringBuffer sb, byte b) {
        sb.append(HEX.charAt((b>>4)&0x0f)).append(HEX.charAt(b&0x0f));
    }

} 
```

**用法：**

```
String seed="yourseed";
String EncryptedPass= Encryption.encrypt(seed,Value);       
return Encryption.decrypt(seed,EncryptedPass); 
```

# dns - 如何获取全球 dns 服务器的数量？

> ID：13525282
> 
> 赞同：1
> 
> 时间：2012-11-23T08:21:23.930
> 
> 标签：dns, traversal, calculator

我们知道 DNS 服务器必须在 53 端口服务，所以我有最慢的方法来获取全部数量，它是在 53 端口远程登录所有 Ipv4 地址，但我确信这应该是一个非常耗时的过程并弃用它。

有没有人有比我更好的方法来实现这一点。

# 3d - Collada (dae) - 出口商如何计算布林材料的光泽度？

> ID：13525283
> 
> 赞同：3
> 
> 时间：2012-11-23T08:21:29.110
> 
> 标签：3d, maya, collada

我正在使用 Maya 2013 和 fbx_dae-exporter。当我导出带有偏心度设置为 0.3 的 blinn 材料的 3d 模型时，dae 文件中的光泽度设置为 1.245731

我想在我的应用程序中支持 collada 1.5，我从不同的出口商那里得到不同的值。如果值介于 0 和 1 之间，我所做的是映射到 [1,128]，这对于 Maya 导出的 dae 文件不起作用。

Maya-exporter 如何计算光泽度？在 opencollada-project 的源代码中，我找到了一个转换器 BlinnEccentricityToShininess，它的计算方式如下：

```
100.0f - 99.0f * sqrtf ( v ) 
```

我假设 Maya 2013 不使用此转换器，因为我得到不同的结果。

* * *

我注意到这只发生在我在已经设置了这个值之前导入一个 dae 时。

# android - 是否可以以编程方式检测是真实的还是虚拟的 Android 设备？

> ID：13525284
> 
> 赞同：3
> 
> 时间：2012-11-23T08:21:35.123
> 
> 标签：android, android-emulator

在我的 Android 应用程序中，我必须使用加速度计和其他传感器。由于这个传感器不是由虚拟设备模拟的，我必须使用 SensorSimulator 项目。问题是 SensorSimulator 的 API 看起来与 Android 的不同。因此，如果我在真实设备或虚拟设备中，我必须使用不同的代码。它是否存在以编程方式检测它的方法？或者您知道其他解决方案吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T08:29:49.973

您可以尝试，通过检查`Build.DEVICE`哪个不是真实设备应该读取`generic`或检查`Build.PRODUCT`哪个是`sdk`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-23T08:25:21.430

对于模拟器，以下是正确的......

```
Build.FINGERPRINT.startsWith("generic") 
```

或者

```
boolean inEmulator = "generic".equals(Build.BRAND.toLowerCase()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-02T07:08:43.127

有很多方法可以实现这个目标，例如：（1）cat /proc/cpuinfo，模拟器包含“goldfish”，真实设备包含“Qualcomm MSM xxxx”等。(2) 下列特征表明它是一个模拟器：

```
private static String[] known_pipes={
        "/dev/socket/qemud",
        "/dev/qemu_pipe"
};

private static String[] known_qemu_drivers = {
        "goldfish"
};

private static String[] known_files = {
        "/system/lib/libc_malloc_debug_qemu.so",
        "/sys/qemu_trace",
        "/system/bin/qemu-props"
};

private static String[] known_numbers = { "15555215554", "15555215556",
        "15555215558", "15555215560", "15555215562", "15555215564",
        "15555215566", "15555215568", "15555215570", "15555215572",
        "15555215574", "15555215576", "15555215578", "15555215580",
        "15555215582", "15555215584", };

private static String[] known_device_ids = { 
        "000000000000000"// default ID on emulator
}; 
```

有关更多信息，请参阅论文“Morpheus：自动生成启发式方法以检测 Android 模拟器”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-21T10:35:38.330

我知道这是一个老问题，但也遇到了同样的问题。我修改了 Nermeen 的答案，因为它不再起作用了：

```
boolean inEmulator = Build.FINGERPRINT.contains("generic"); 
```

# mysql - iis express 包为 Xammp

> ID：13525285
> 
> 赞同：0
> 
> 时间：2012-11-23T08:21:52.103
> 
> 标签：mysql, sql, iis-express

我有一个相当笼统的问题。我决定为我的下一个 Intranet Web 应用程序使用 ASP.NET MVC，主要用于学习目的。事实是，经过多年的 PHP 编程，我已经被 Xammp 宠坏了，它涵盖了每个开发人员的需求 (php+MySql)。通常我会在任何机器上下载并删除 Xammp，它就可以正常工作。就我而言，我必须使用运行 IIS6.0 且无法升级的 Windows Server 2003（根据 MS）。

我希望为 ASP.NET 找到类似于 Xampp（开发/生产包）的东西，但似乎没有:( 我看到一些开发人员在 WinServer2003 上使用 IIS Express + SQLCE，但我不确定数据库服务器（例如.SQL、SQL Express 等）。...实际上这是我的问题，你在旧服务器上使用什么？我们可以将 IIS Express 用于生产目的吗？限制？

# php - Solr：突出显示特殊字符（例如'）

> ID：13525294
> 
> 赞同：0
> 
> 时间：2012-11-23T08:22:53.443
> 
> 标签：php, solr, special-characters, highlighting

几天来一直在高低搜索，但是我发现的有关突出显示的各种帖子并未涵盖此特定问题。

我们试图在搜索“刺客信条”时在“刺客信条启示录”等数据中突出显示特殊字符，例如**'**

返回的亮点是：**刺客信条****启示**录。“的”没有突出显示。

我们这样搜索：

```
 $parts    = explode(' ', $query);
        $response = $solr->search(
            '+"' . $query . '" OR "'. $parts[0] .'"', 
            0, 10, 
            array(
                'sort'      => 'score desc', 
                'hl'        => 'on', 
                'hl.fl'     => 'qsearch',
                'fl'        => '*,score', 
                'defType'   => 'dismax',
                'qf'        => 'qsearch^2 title_start^5',
                'bf'        => 'product(mostsold)^25'
            )
        ); 
```

图片来说明返回的内容：

![在此处输入图像描述](../Images/72aea54c7e8533f4b2371a2393e091f5.png)

想法，需要更多信息？

# java - 使用 JUnit 在 Eclipse 中运行测试用例

> ID：13525300
> 
> 赞同：0
> 
> 时间：2012-11-23T08:23:36.797
> 
> 标签：java, oracle, junit, junit4

我正在尝试在 Eclipse 中使用 JUnit 运行测试，但测试用例没有运行，并且 holly 控制台没有显示任何内容。控制台中出现的唯一行是：

```
<terminated>AccountManagmentModuleTest[JUnit] D:\Program Files\Java\jdk1.6.0_26\bin\javaw.exe(Nov 23, 2012 12:08:49 PM) 
```

我要做的就是运行测试用例。有些行正在执行，比如开始连接到 db，但没有使用 DriverManager 创建连接对象，也不抛出任何异常。

```
enter code here

Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
            conn = DriverManager.getConnection("jdbc:oracle:oci8:@local ip:1521:orcl", "dipak1","dipak1"); //got to finally from here, not even catching anything!!!
            cstmt = conn.prepareCall(query);  
            cstmt.execute();

        } catch (Exception e) {

            e.printStackTrace();
        } finally {

            if (null != conn) {

                if (null != cstmt) {
                    cstmt.close();

                }
                conn.close();
            }

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:43:20.973

听起来您的测试正在执行，但没有产生您期望的输出。确保您打开了 JUnit 视图：

***窗口 > 显示视图 > 其他... > Java > JUnit***

此视图将直观地向您显示已经运行了多少测试以及通过了多少测试。如果测试失败，您可以右键单击失败的测试并调试它们。您还可以查看已发生的异常。

除非您在测试中包含输出语句（通过日志框架或简单`println`语句），否则控制台窗口不会向您显示 JUnit 测试的任何输出。只有 JUnit 视图会显示您的测试是否通过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:24:43.177

使用 Junit 进行单元测试时，不应使用 try 和 catch 块使用 throws Exception。而不是 if (null != conn) 使用 JUnit 断言测试（assertNotNull 或 assertEquals 或另一个）。在 Eclipse 上运行 JUNit 测试：

1.  窗口 > 显示视图 > 其他... > Java > JUnit
2.  右键单击 java 文件 > 运行方式 > JUnit 测试。
3.  在 JUnit 面板上，您可以看到单元测试结果是成功还是失败。

    导入静态 org.junit.Assert.assertEquals；

    导入静态 org.junit.Assert.assertNotNull；

    导入静态 org.junit.Assert.assertTrue;

    导入 org.junit.Test；

    ```
    @Test
    public void testDbConnexion() throws Exception
    {
          Class.forName("oracle.jdbc.driver.OracleDriver").newInstance();
    conn = DriverManager.getConnection("jdbc:oracle:oci8:@local ip:1521:orcl", "dipak1","dipak1"); //got to finally from here, not even catching anything!!!
          cstmt = conn.prepareCall(query);  
          cstmt.execute();
          assertNotNull(conn);
          assertNotNull(cstmt);
          connn.close();
    } 
    ```

# javascript - 删除 DOM 中的元素样式

> ID：13525306
> 
> 赞同：0
> 
> 时间：2012-11-23T08:24:02.413
> 
> 标签：javascript, jquery, html, css

```
OldFunc = window.onload;
window.onload = OnLoad;

function OnLoad(){
    try{

        var pathName = window.location.pathname.toLowerCase();

        //alert(pathName);
        if( pathName.indexOf("something")!=-1)
        {           
            OnFixFontAndTable();
            alert(pathName);
        }   
        OldFunc();
    }
    catch(e) 
    {
        alert(e);
    }
} 

function OnFixFontAndTable()
{
    //$('body').attr('style','');   
    document.getElementsByTagName('body').style="";
} 
```

我想使用该代码片段删除页面中的正文样式，但是当我运行页面时，我不断收到错误“TypeError OldFunc 不是函数”

我将我的 URL 地址栏输入为`"localhost:8080/pages/something.php"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:27:37.700

尝试将您的第一行更改为：

```
var OldFunc = window.onload || function() {}; 
```

如果`window.onload`是`undefined`，并且您尝试调用它，您将收到该错误。`OldFunc`上面的代码将在 where `window.onload`is的情况下分配一个空函数`undefined`，所以当你尝试调用它`OldFunc()`时`OnLoad()`不会失败。

或者，让 jQuery 通过指定事件来为您处理`onDomReady`事件。将代码的前两行替换为：

```
$(function() {
    OnLoad();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:29:00.423

好吧，你自己在那里解释了。CodeSnippet 中没有名为 OldFunc 的函数。

尝试

```
$(document).ready(OnLoad);

function OnLoad(){
    try{

        var pathName = window.location.pathname.toLowerCase();

        //alert(pathName);
        if( pathName.indexOf("something")!=-1)
        {           
            OnFixFontAndTable();
            alert(pathName);
        }   
    }
    catch(e) 
    {
        alert(e);
    }
} 

function OnFixFontAndTable()
{
    //$('body').attr('style','');   
    document.getElementsByTagName('body').style="";
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-23T08:27:20.517

将 OnFixFontAndTable 移到“OnLoad”顶部并重试

# c# - MonoTouch 中的键值存储

> ID：13525313
> 
> 赞同：1
> 
> 时间：2012-11-23T08:24:31.190
> 
> 标签：c#, xamarin.ios, key-value

iOS/MonoTouch 中是否有一个简单的键值存储来在应用程序会话之间保持设置？还是你必须自己建造？

编辑：

例子

```
// Some magic function that returns a storage
IKeyValueStorage storage = GetStorage();
storage.Store( "TheKey", "The value" );

var value = storage.Get("TheKey"); 
```

我需要知道在这个简单的界面背后使用什么机制。

谢谢

// 安克曼宁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:07:25.613

最简单的方法是使用[NSUserDefaults](http://conceptdev.blogspot.de/2009/08/monotouch-settingsbundle.html)。这将创建一个所谓的“plist”文件 (PropertyList)，这正是您想要的。该链接描述了如何将它与 MonoTouch 一起使用。

# javascript - window.event.srcElement 在 Mozilla Firefox 中无法工作

> ID：13525317
> 
> 赞同：2
> 
> 时间：2012-11-23T08:25:02.907
> 
> 标签：javascript

这是我的代码。

```
function postbackOnCheck() {
    var o = window.event.srcElement;

    if (o.tagName == 'INPUT' && o.type == 'checkbox' && o.name != null && o.name.indexOf('CheckBox') - 1) 
    {
        __doPostBack("", "");
    }
} 
```

我做了很少的研究。发现window.event.srcElement不能在firefox中使用。所以我把编码改成..

```
function postbackOnCheck() {
    var o = window.event.srcElement || e.target;

    if (o.tagName == 'INPUT' && o.type == 'checkbox' && o.name != null && o.name.indexOf('CheckBox') - 1) 
    {
        __doPostBack("", "");
    }
} 
```

但仍然无法正常工作。希望有人能帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:38:28.850

`window.event`Firefox 中不存在，因此如果您尝试访问`window.event.srcElement`. 即使它起作用了，你也从来没有`e`在任何地方定义过，所以`e.target`也会出错。

在 W3C 兼容的浏览器中，事件对象作为第一个参数传递给事件处理程序。在 IE 中，可以通过`window.event`.
因此，要获得对偶数对象的引用，我们必须这样做：

```
function eventHandler(event) {
    // if `event` is not defined, we fall back to `window.event`
    event = event || window.event;
} 
```

要获取触发事件的元素的引用，我们必须`event.target`在兼容 W3C 的浏览器和`event.srcElement`IE 中访问：

```
// if `event.target` is not defined, we fall back to `event.srcElement`
var target = event.target || event.srcElement; 
```

* * *

[quirksmode.org](http://www.quirksmode.org/js/introevents.html)是了解事件处理和浏览器差异的重要来源。

# java - 如何在方法中为变量设置值并在 main 方法中打印出来？

> ID：13525318
> 
> 赞同：0
> 
> 时间：2012-11-23T08:25:10.627
> 
> 标签：java, variables, methods

```
public class Shape 
{
    public static void main(String args[]){
        int num = 0;
        cng(num);
    }

    public static void cng(int x){
        x = 52;
        System.out.println(x);
    }

} 
```

如您所见，在`cng`方法中，我将 x 的值设置为 52，然后打印出 x 的值。

然后，回到 main 方法，对该变量`cng`执行该方法。`num`

但是，我想要做的是`System.out.println(x);` 在我的方法中没有函数的情况下将 52 的值设置为 x`cng`并打印出我的`main`方法中的值。我该怎么做呢？

我试着做

```
public static void cng(int x){
    x = 52;
} 
```

进而

```
public static void main(String args[]){
    int num = 0;
    cng(num);
    System.out.println(num);
} 
```

但它只打印出一个 0，因为 num 设置为 0。我认为`cng`对`num`变量执行会将其更改为 52，但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:26:41.813

让你的 cng 方法返回一个 int 变量

```
public static int cng(int num){    
num = 52; 
return num; 
} 
```

在您的 Main 方法中，分配从 cng() 方法返回的变量

```
int num = 0;
 num =cng(num);
 System.out.println(num); 
```

或者：

您总是可以将 num 作为成员静态变量，

```
 static int num; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:27:45.103

您想通过引用传递数据。这对于 Java 中的原始值（int、double、boolean 等）是不可能的。

您有以下选择：

*   使其成为班级成员
*   创建一个包装对象（对象引用也是按值传递的，**但**您**可以**在函数中更改该对象的成员，而不是对象引用本身）
*   返回函数中的值（如其他答案所述）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T08:28:23.190

尝试将您的代码更改为：

```
public class Shape 
{

public static void main(String args[]){
    int num = 0;
    num = cng(num);
    System.out.println(num);
}

public static int cng(int x){
    x = 52;
    return x;
}

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T08:30:53.523

阅读评论：

```
public class Shape 
{

    public static void main(String args[]){
    int num = 0;
    num = cng();   //store value returned by cng() in num
    System.out.println("num : " +num); // display num
    }

    public static int cng(){    //change return type to int
    return 52;
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T08:31:50.813

这种行为的原因是参数在 Java 中是按值传递的。这意味着它只是您传递给它的变量的副本。因此，您所做的分配只是该方法的本地。

# javascript - javascript中的脚本性能

> ID：13525319
> 
> 赞同：1
> 
> 时间：2012-11-23T08:25:15.683
> 
> 标签：javascript, performance

我想用画布在 html5 中创建一个游戏。

但我之前有一个性能问题

每次我需要一个变量时创建一个变量会更好吗

```
var game = ...
var car = ...
var monster = ... 
```

`var`还是在脚本开头只实例化一个并执行以下操作会更好：

```
var game = {}
game.car = ...
game.monster = {}
game.monster.attack = function(){...} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:42:54.587

正如评论中所见，你真的不需要太多地怀疑这一点。进行 javascript 游戏编程最重要的事情是您将拥有不同的计算机，这些计算机将具有不同的硬件。因此，如果您不对引擎进行插值，那么所有这些的帧速率都会有所不同。这方面的一个例子是

```
// Updated drawing code for our objects
Rect.prototype.draw = function(context, interpolation) {
  context.fillRect(this.x, this.y + this.velocity * interpolation, 30, 30);
};

Game.draw = function(interpolation) {
  this.context.clearRect(0, 0, 640, 480);

  for (var i=0; i < this.entities.length; i++) {
    this.entities[i].draw(this.context, interpolation);
  }
};

Game.run = (function() {
  var loops = 0, skipTicks = 1000 / Game.fps,
      maxFrameSkip = 10,
      nextGameTick = (new Date).getTime(),
      lastGameTick;

  return function() {
    loops = 0;

    while ((new Date).getTime() > nextGameTick) {
      Game.update();
      nextGameTick += skipTicks;
      loops++;
    }

    if (!loops) {
      Game.draw((nextGameTick - (new Date).getTime()) / skipTicks);
    } else {
      Game.draw(0);
    }
  };
})(); 
```

这将使游戏逻辑保持在您的 Game.fps 中。您可能要避免的另一件事是在您的绘图逻辑中使用 jQuery。这是因为 jQuery 的动画队列非常慢，并且您最终会将动画堆栈到无限，从而给您带来更大的每一帧延迟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:57:27.747

这个测试（[http://jsperf.com/to-scope-or-not-to-scope](http://jsperf.com/to-scope-or-not-to-scope)）表明使用本地范围是迄今为止最快的方法，但创建一个自调用函数只是为了*拥有*一个范围超过抵消它。

您能做的最好的事情就是使用您手头的任何范围。你能做的最坏的事情（除了`with`关键字的使用）性能方面是在一个紧密的循环中使用一个自调用函数（如果你想关闭迭代变量，你仍然应该这样做，即无论如何都要创建一个新函数）。其他任何事情都比仅使用本地范围慢一些。

请注意，javascript 不*使用*块作用域——任何`var`iable 的作用域都限于其封闭函数。

另请注意，您应该尽量减少图形操作的数量，而不是围绕它们的代码的开销。

另请注意，您应该确保程序是可维护的，然后关心性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:40:27.770

差异应该很小，以至于您可以忽略它。通常，您可以依靠解释器在后台为您执行任何此类微优化。你需要关注的是你的算法。

游戏开发的一条经验法则是：*性能瓶颈始终是图形引擎*。这就是你必须优化的地方。避免过度绘制，避免重绘，避免绘制无敌的东西，缓存，缓存，缓存。

# html - 在引导跨度类中创建一个不会占用整个宽度的 div

> ID：13525323
> 
> 赞同：2
> 
> 时间：2012-11-23T08:25:27.447
> 
> 标签：html, css, twitter-bootstrap

我正在尝试使用引导程序设计一个网站，我需要在其中放置一个带有彩色背景的小 div（行流体，引导程序的跨度类）

这是我的代码

```
 <style>
    .lblue{
        -moz-border-radius: 3px;
        border-radius: 3px;
        box-shadow: 
          0 1px 2px #fff, /*bottom external highlight*/
          0 -1px 1px #666, /*top external shadow*/ 
          inset 0 -1px 1px rgba(0,0,0,0.5), /*bottom internal shadow*/ 
          inset 0 1px 1px rgba(255,255,255,0.8); /*top internal highlight*/
        font-size: 16pt;
        padding: 5px;
        margin:5px;
        color:white;
        background: #4bc2d3; /* Old browsers */
        background: -moz-linear-gradient(top,  #4bc2d3 0%, #70d6e2 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#4bc2d3), color-stop(100%,#70d6e2)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #4bc2d3 0%,#70d6e2 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #4bc2d3 0%,#70d6e2 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #4bc2d3 0%,#70d6e2 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #4bc2d3 0%,#70d6e2 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4bc2d3', endColorstr='#70d6e2',GradientType=0 ); /* IE6-9 */
        font-family: OpenSans-Semibold;
        }
    </style>

    <div class="row-fluid">
    <div class="span12">
    <div class="lblue">Insert Content Here</div>
    <div class="lblue">Insert Content Here</div>
    <div class="lblue">Insert Content Here</div>
    <div class="lblue">Insert Content Here</div>
    </div>
    </div> 
```

这段代码的问题是 div 类 lblue 占据了 bootstrap 的 span12 类的整个宽度。我不能真正为该 div 分配特定的宽度，因为它需要是动态的并根据其内容的长度自行拉伸。

概括：

1.  我需要使 div 类 lblue 仅与其中的内容一样长

有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:37:07.357

是的，有一个简单的方法可以解决您的问题。将以下内容添加到您的 .lblue：

```
display: table; 
```

它应该与大多数（如果不是全部）浏览器兼容。

**编辑 1**

可以在此处找到有关该主题的更多信息：

[http://www.onenaught.com/posts/201/use-css-displaytable-for-layout](http://www.onenaught.com/posts/201/use-css-displaytable-for-layout)

# java - 创建加 1 分并清除分数的按钮

> ID：13525330
> 
> 赞同：2
> 
> 时间：2012-11-23T08:26:03.887
> 
> 标签：java, button, counter

试图弄清楚如何在java中正确编码。

```
Team1           Team2

0                10
(+1) (-1)         (+1) (-1)

     (CLEAR ALL SCORES)

(clear team1)         (clearteam2) 
```

我有一个用于 team1 的变量和一个用于 team2 的变量。当您单击时`+1`，分数上升 1 分，减 1 减 1 分，除非变量设置为 0。清除两个变量的按钮和清除一侧或另一侧的单独按钮

[http://i.imgur.com/AiBBc.png](http://i.imgur.com/AiBBc.png)

# clearcase - 重新定位 Web 视图不会为我提供某些文件的最新版本

> ID：13525332
> 
> 赞同：4
> 
> 时间：2012-11-23T08:26:09.560
> 
> 标签：clearcase

我的一位同事检查了几个文件的更新，一些新文件和两个文件的重命名，交付并制定了新的基线。当我将视图重新设置为最新基线时，我可以看到新版本以及版本树中的交付，但“查看选定版本”不是最新版本。

我们都使用 Web 视图和 ClearCase UCM 以及用于 Linux 的 Eclipse 插件。

我不知道这是怎么发生的。文件没有锁定，也没有被破解。如何`ClearCase`确定我的视图不应使用文件的最新版本？

![CCRC](../Images/3a197987cfa8e6ff73d07bbe75e620f7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:07:48.750

Web view means CCRC.

> How does ClearCase determine that my view should not use the latest version of a file?

It is based on the config spec of your web view, and that config spec isn't always in sync with the configuration (ie list of baseline).

See "[Synchronize a CCRC view with a shared UCM stream](http://www-01.ibm.com/support/docview.wss?uid=swg21246264)", and check if "Update Resource" can fix your situation.

![enter image description here](../Images/15f5330cfcd3a347607b2e9ad61d9917.png)

# html - 如何将两个 div 水平并排放置？

> ID：13525333
> 
> 赞同：19
> 
> 时间：2012-11-23T08:26:11.283
> 
> 标签：html, css, containers, position

在两个不同的项目中，我学习了两种将两个`div`s 水平并排放置的不同方法。是一个比另一个更好，还是只是个人品味的问题，或者一个只是巧合？

方法一：

```
.container,
.div1,
.div2 {
  border: 1px solid red;
}

.div1,
.div2 {
  float: left;
}
```

```
<div class="container">
  <div class="div1">
    DIV1
  </div>
  <div class="div2">
    DIV2
  </div>
  <div style="clear: both;"></div>
</div>
```

方法二：

```
.container,
.div1,
.div2 {
  border: 1px solid green;
}

.div1,
.div2 {
  display: inline-block;
}
```

```
<div class="container">
  <div class="div1">
    DIV1
  </div>
  <div class="div2">
    DIV2
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T08:28:05.047

第一个在较旧的浏览器中得到更广泛的支持，但`float`通常会导致一些奇怪的行为（不错，不会破坏您的设计，只是有点意外）。

当您`inline-block`稍后在生命周期中检查一些随机浏览器时，您只会发现设计中有问题。

我通常坚持`float`，而且只有`float`。

**编辑**

差不多 10 年后重新审视这个答案，我现在的建议是坚持`flexbox`并且只有`flexbox`. 如果您需要一些练习，请尝试[https://flexboxfroggy.com/ 。](https://flexboxfroggy.com/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T08:35:36.210

两者都是有效的 CSS，不会意外工作——这取决于你需要什么。

使用`float`s 时，您需要清除它们（如发布的代码中所示）；使用`inline-block`s 时，这不是必需的。此外，您可以使用`text-align`对齐`inline-block`元素，而没有`float: middle`. 您还可以`vertical-align`根据需要使用该属性对齐框。

正如其他人所说，存在一些问题`inline-block`，最明显的是旧的 IE 不支持（很多）块元素（请注意，它在内联元素上运行良好，例如`<span>`）。您可以使用以下 hack 解决此问题：

```
.selector {
    display: inline-block;
    *display: inline;
    zoom: 1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:32:55.787

使用浮点数（第一种方法）。因为它支持所有浏览器并且易于处理。在这里你可以了解更多的[**链接**](http://www.ternstyle.us/blog/float-vs-inline-block)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T08:28:54.470

如果您使用的是第二种方法，那么使用 a`DIV`如果您将其转换为内联元素是没有意义的。只需使用`SPAN`标签。

因此，如果您尝试对齐块级元素/标签，请使用第一种方法。

# java - 在android中创建一个异步/线程函数

> ID：13525334
> 
> 赞同：-3
> 
> 时间：2012-11-23T08:26:22.817
> 
> 标签：java, android, android-asynctask

我有一个有趣的问题要问你。我在 Android 中有一个函数，它通过从远程服务器加载带有数据的列表视图来与 ui 交互。正如预期的那样，这使我的应用程序非常缓慢。

使用最少的代码，我如何将这个函数放在它自己的线程或同步任务上，同时仍然允许它像普通函数一样执行

它不是非常有效。我只需要用尽可能少的代码来做到这一点。

```
try
    {   //getjson file
        HttpClient client = new DefaultHttpClient();  
        HttpGet get = new HttpGet(url);
    HttpResponse responseGet = client.execute(get);  
    HttpEntity resEntityGet = responseGet.getEntity();  

        if (resEntityGet != null) {
            InputStream instream = resEntityGet.getContent();
            BufferedReader str = new BufferedReader(new InputStreamReader(
                    instream));

            String ans = new String("");
            build = new String("");
            while ((ans = str.readLine()) != null) {
                build = build + ans;
            }
        //parse json file   
            JSONObject total = new JSONObject(build);
            JSONArray prices = null;
            if (!total.isNull("title")){
            Prices = title.getJSONArray("title"));}
            ArrayList<data> newArray = new ArrayList<data>();

            for(int i=0;i<Prices.length();i++)
            {
                JSONObject price = null;
                price = Prices.getJSONObject(i);
                data name = new data (price.getString("StoreName"),price.getString("price"),price.getString("Link"));
                newArray.add(name);
            }
            stockArr = new data[newArray.size()];
            stockArr = newArray.toArray(stockArr);
                    //add to listview
            ListView listView = (ListView) findViewById(R.id.mylist);
            listadapter adapter = new listadapter(this,R.layout.listview_item_row, stockArr);
            listView.setAdapter(adapter); 
        }
    } 
    catch(Exception e)
    {
        Toast.makeText(getApplicationContext(),e.toString(), 10).show();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:58:46.243

您可以将用于从远程服务器获取 JSONObject 的代码放在 AsyncTask 类的 doInBackground() 方法中，并从该函数返回该 JSONobject。它将进入 onPostExecute() 方法，您可以在那里解析并将其加载到列表视图中。

```
private class myasyncclass extends AsyncTask<String, Void, JSONObject>{
    @Override
    protected JSONObject doInBackground(String... params) {
        //Enter code for fetching value from remote server
        return yourjsonobj;
    }
    @Override
    protected void onPostExecute(JSONObject result) {   
        //Enter code for parsing and create list view
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:06:18.933

**-****在 UI 线程中做 UI**工作，**在 Non-UI 线程上做非 UI 工作**总是一个好习惯，但随着android 版本的到来，它变成了一个**规律。**`HoneyComb`

**-**当 Android 应用程序在**专用 UI​​ 线程**上启动它时。

**-**在 UI 线程上执行过程昂贵的任务（如 IO、网络调用等）将使其无响应。

**-**所以最好在非 UI 线程上进行网络调用，这可以通过两种方式完成。`Thread`使用`Handler`或我们所说的**无痛线程**，就是这样`AsyncTask`。

**请参阅此链接：**

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

# java - 如何以及在何处将 Servlet.jar 添加到 Weblogic 10？

> ID：13525336
> 
> 赞同：0
> 
> 时间：2012-11-23T08:26:25.907
> 
> 标签：java, servlets, weblogic

我相信由于缺少 servlet.jar 库，我有一个失败的网络应用程序。它在 tomcat 中运行良好，但在 Weblogic 10 下失败并出现 500 错误并且没有堆栈跟踪。

这是否应该与我的 Web 应用程序一起添加到 WEB-INF/lib 文件夹下？还是应该放在 weblogic lib 文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:00:44.387

除非您在 WLS 安装过程中大吃一惊，否则您*不会*错过`servlet.jar`...

从 WLS 版本 10 开始，您会发现它为`$BEA_HOME/modules/javax.servlet.x.y.z.jar`

干杯，

# java - 文件路径为给定位置和文件名返回“null”

> ID：13525337
> 
> 赞同：2
> 
> 时间：2012-11-23T08:26:28.453
> 
> 标签：java

有人可以告诉我我在代码中哪里错了。我正在尝试搜索`filename`在目录路径中命名的特定文件并尝试返回`filepath`但它总是返回`null`。

这是我正在使用的代码：

```
public String walk( String path, String filename ) {
String filePath = null;
    File root = new File( path );
    File[] list = root.listFiles();

    for ( File f : list ) {
        if ( f.isDirectory() ) {
            walk( f.getAbsolutePath(),filename );
           }
        else if (f.getName().equalsIgnoreCase(filename)){
            System.out.println( "File:" +f.getAbsolutePath() );
            filePath= f.getAbsolutePath();
           if(filePath.endsWith(memberPath)){
               System.out.println( "Found: Should exit");
               break;
           }
        }
     }
    System.out.println( "OUT of for:"  );
    return filePath;
} 
```

它打印
出：

```
 OUT of for:    

 File:d:\IM\EclipseWorkspaces\runtime-EclipseApplication\SIT\So\mmm\aaa\xxx.c

Should exit

OUT of for:

OUT of for: 
```

我不明白为什么它仍然回到循环

编辑：更新：

我找到了另一种方法。如果有问题请更正：将文件路径声明为静态变量

```
 public static void walk( String path, String filename ) {

    File root = new File( path );
    File[] list = root.listFiles();

    for ( File f : list ) {
       if ( f.isDirectory() ) {
            walk( f.getAbsolutePath(),filename );
           }
        else if (f.getName().equalsIgnoreCase(filename) && f.getAbsolutePath().endsWith(memberPath)){
             System.out.println( "Should exit");
             filePath = f.getAbsolutePath();
             break;
     }
       }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:35:47.627

您不需要`memberPath`. 将您的代码更改为如下所示：

```
public String walk(String path, String filename) {
    String filePath = null;
    File root = new File(path);
    File[] list = root.listFiles();

    for (File f : list) {
        if (f.isDirectory()) {
            walk(f.getAbsolutePath(), filename);
        } else if (f.getName().equalsIgnoreCase(filename)) {
            System.out.println("File:" + f.getAbsolutePath());
            System.out.println("Found: Should exit");
            filePath = f.getAbsolutePath();
            break;
        }
    }
    return filePath;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:32:06.977

找到后立即返回文件路径：

```
if(filePath.endsWith(memberPath))
{
    return filePath;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:18:41.007

```
public String walk(String path, String filename) {
String filePath = null;
File root = new File(path);
File[] list = root.listFiles();

for (File f : list) {
    if (f.isDirectory()) {
        // store the filePath 
        filePath = walk(f.getAbsolutePath(), filename);    
    } else if (f.getName().equalsIgnoreCase(filename) && f.getAbsolutePath().endsWith(memberPath)) {
        System.out.println("File:" + f.getAbsolutePath());
        System.out.println("Found: Should exit");
        filePath = f.getAbsolutePath();
        break;
    }
  if (filePath != null) {
    break;
  }
}
return filePath; 
```

}

编辑：添加 f.getAbsolutePath().endsWith(memberPath)

# bash - 允许其他用户控制进程

> ID：13525340
> 
> 赞同：2
> 
> 时间：2012-11-23T08:26:46.000
> 
> 标签：bash, sh

我有一个`sh`在我们的服务器上运行的脚本。它`nohup`从另一个脚本开始，以便我可以轻松关闭会话并且它仍然运行

主脚本（将启动这个）也是一个`sh`脚本。它可以使用两个参数执行：

```
--start (will start application)
--stop (will stop it using kill PID) 
```

但是由于应用程序是由我启动的，所以没有其他人（除了 root）可以停止已经运行的实例或重新启动它。

所以我更多地考虑将所有者更改为`nobody`. 那会有帮助吗？如果是，那该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:19:06.083

将脚本设置为在某些事件上自行关闭，而不是运行直到被杀死。然后让主脚本触发该事件`--stop`（事件可以是简单的事情，比如创建特定文件，或者更复杂的事情，比如将命令写入脚本定期读取的 fifo）。这样，其他用户应该能够关闭脚本，无论是谁启动它。

如何执行此操作取决于脚本的详细信息。如果它没有可以检查关闭条件本身的循环，您可以执行一些操作，例如让它生成一个后台进程，该进程定期检查条件并在满足时终止其父 pid。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:29:01.040

设置一个用户，特别是运行这个脚本。

并使用以下命令运行脚本：

```
su -l <user> -c "<command>" 
```

* * *

**更新：**

提出这种方法的前提是修改有问题的脚本不是一种选择。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T12:07:15.483

将所有者更改`nobody`为当然会帮助您实现目标。下面描述了一种通过使用对用户不可见的专用帮助程序来执行此操作的方法。

**解决方案：**您可以使用 setuid 程序确保脚本始终以同一用户身份运行。出于安全原因，您可能不允许将 shell 脚本设置为 setuid，但您可以编写一个简单的启动器程序，也许用 C 语言：

```
#include <stdio.h>
#include <unistd.h>

#define PROG "./daemon.sh"

int main(int argc, char** argv)
{
    char action[32];

    if (argc < 2) {
            fprintf(stderr, "Usage: %s { --start | --stop }n", argv[0]);
            return 0;
    }

    snprintf(action, sizeof(action), "%s-the-real-thing", argv[1]);
    return execl(PROG, PROG, action, (char *)0);
} 
```

在这里，我们假设您的脚本已命名`daemon.sh`并且位于您运行脚本的同一目录中。您可以根据需要使用完整路径或以其他明显方式进行更改。

编译并制作 setuid 如下（假设这里是 name`launcher.c`并且我们决定运行 as `nobody`）：

```
$ gcc -Wall launcher.c -o launcher
$ sudo chown nobody launcher
$ sudo chmod u+s launcher 
```

您需要稍微修改一下您的 shell 脚本守护程序：

```
#!/bin/sh

prog=$(basename $0)

start()
{
    i=0
    while :; do
        i=$(expr $i + 1)
        echo "Daemon working like a mad horse... ($i)"
        sleep 1
    done
}

stop()
{
    pids=$(ps axu | grep "$prog.*--start" | grep -v grep | awk '{print $2}')
    echo "Killing [$pids]"
    [ -n "$pids" ] && exec /bin/kill -KILL $pids
}

case "$1" in
    --start|--stop)         exec ./launcher $1;;
    --start-the-real-thing) start;;
    --stop-the-real-thing)  stop;;
    *)                      echo "Bad argument \"$1\"";;
esac 
```

这里`start`的函数是所有有趣的 funk 完成的地方，直到你通过调用`stop`函数杀死程序。从任何地方运行它都需要进行一些明显的更改，我希望您现有的`kill`逻辑更加优雅。

**用法**和以前一样：

```
./daemon.sh --start
./daemon.sh --stop 
```

**说明：**以上将分别执行`./launcher --start`or `./launcher --stop`。这会将有效用户更改为`nobody`（或您选择设置程序的任何用户），并执行其中一个`./daemon.sh --start-the-real-thing`或`./daemon.sh --stop-the-real-thing`哪个将执行所需的原始操作。

因为简单的启动器程序只允许运行命名脚本，所以安全性很容易控制（只是为了确保您可以检查启动器程序`argv[1]`确实是`--start`或`--stop`，那么恰好两个命令行组合可以运行为 ）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T09:09:56.543

您可以尝试以下选项：

1.  *在您的进程中*创建一个 TCP 套接字，由其他用户启动的客户端进程可以与之通信。
2.  从您的用户开始，启动一个*单独的 TCP 服务器*，它可以通过 TCP 接受一些有限的命令集。该服务器可以接受来自任何用户的 daemon-shutdown 命令。然后，该进程可以为您的主进程发出 kill 命令。
3.  创建一个命名的 fifo，任何用户都可以将其设为可写。创建一个子线程，它将尝试从该 fifo 中读取。由于本质上，fifo 读取调用是阻塞调用，因此该线程将继续休眠（并且不会消耗您的 CPU）。在其他用户向该 fifo 写入内容后，该线程将唤醒并干净地终止父线程。
4.  与上面相同，但线程等待是由同一用户启动的另一个进程的一部分。该进程在唤醒时将杀死主进程。

在我看来，第三种方法是三种方法中最干净的一种。

编辑：由于“主进程”实际上是一个 shell 脚本，“线程”将变为子 shell。&要等待的子线程将是简单的'cat fifo'。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-23T16:41:50.340

如果您具有 root 访问权限，则可以使用`sudo`并配置它以允许`--stop`以 root 身份运行带有参数的脚本。

# android - Seterror 信号没有消失并且搜索正在工作

> ID：13525343
> 
> 赞同：5
> 
> 时间：2012-11-23T08:27:20.190
> 
> 标签：android, android-layout

我已经在两个编辑文本上实现了设置错误的代码。

*   首先获取任何没有 null 或空值的字符串。
*   其次要获取任何没有 null 或空值的字符串，并且必须有一些 Double 值。

代码如下

```
import java.util.HashMap;
import java.util.Map;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class SearchPlaces extends Activity {
    EditText place;
    EditText distance;
    Button search;
    static String _place;
    static String _distance;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        place = (EditText) findViewById(R.id.place);
        distance = (EditText) findViewById(R.id.distance);
        search = (Button) findViewById(R.id.search);
        search.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Map<String, String> validate = new HashMap<String, String>();
                _place = place.getText().toString();
                _distance = distance.getText().toString();
                validate.put("placename", _place);
                validate.put("distancenumeric", _distance);
                if (!validateInputInformation(validate)) {
                    return;
                }
                if ((_place == "" && _distance == "")) {
                    Toast.makeText(getApplicationContext(),
                            "Please fill all the information",
                            Toast.LENGTH_SHORT).show();
                } else {
                    _place = place.getText().toString();
                    _distance = distance.getText().toString();
                    Intent placedist = new Intent(getApplicationContext(),
                            MainActivity.class);
                    Bundle bundle = new Bundle();

                    bundle.putString("place", _place);
                    bundle.putString("distance", _distance);

                    placedist.putExtras(bundle);
                    startActivity(placedist);
                }
            }

            private boolean validateInputInformation(
                    Map<String, String> validate) {

                String l_place = validate.get("placename");
                if (l_place == null || l_place.equals("")) {
                    place.setError("Please enter the Place First");
                    return false;
                }

                String l_distance = validate.get("distancenumeric");
                if (l_distance == null || l_distance.equals("")) {
                    distance.setError("Please enter the Distance First");
                    return false;
                }
                if (!isDoubleNumber(l_distance)) {
                    distance.setError("Please enter Numeric Value");
                    return false;
                }

                return true;

            }
            private boolean isDoubleNumber (String num) {
                try {
                    Double.parseDouble(num);
                } catch (NumberFormatException nfe) {
                    return false;
                }
                return true;
            }
        });
    }
} 
```

实施后，所有工作都很好，但是*当我没有输入并单击搜索按钮时，错误会在第一个编辑框中弹出，然后当我根据需要重新输入正确的值时，错误通知不会消失，但搜索按钮效果很好。*

请帮助我，以便可以从第一个编辑框中删除设置错误通知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T10:13:17.713

写在下面的代码行而不是`if ((_place == "" && _distance == ""))`，它将解决您的问题。

```
if (_place.equals("") && _distance.equals("")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T09:17:59.007

我偶然发现了您的帖子，因为我遇到了同样的问题：“当我将字段留空时，我的 setError 会出现，但是当我开始输入时，图标和文本不会被删除”

这种行为很奇怪，我很确定这是 Android 上的一个错误，因为如果我将字段的 inputType 设置为“textAddressEmail”或“textPassword”它可以工作，但当我的输入是“text”、“textCapWords”时它不会, "文本人名"...

解决方案是以编程方式设置 inputType

```
EditText registrationName = (EditText)findViewById(R.id.registrationName);

registrationName.setInputType(InputType.TYPE_TEXT_FLAG_CAP_WORDS | InputType.TYPE_TEXT_VARIATION_PERSON_NAME); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T14:22:43.533

我也一直面临这个问题。要摆脱这个错误，只需调用： `myEditText.Error = null;`

希望这可以帮助 ！

快乐编码！

# javascript - 单击单元格然后更改上一个单元格或下一个单元格 css 取决于长度

> ID：13525345
> 
> 赞同：0
> 
> 时间：2012-11-23T08:27:20.303
> 
> 标签：javascript, jquery

HTML

```
<!DOCTYPE html>
<html>
<head>
<meta name="description" content="[add your bin description]" />
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
 <style type="text/css">
        .csstdhighlight
        {
            color: White;
            background-color: blue;
        }

        .csstdred
        {
            color: White;
            background-color: red;
        }

        .csstdgreen
        {
            color: White;
            background-color: green;
        }
  table.csstableappointment
        {
            border-collapse: collapse;
        }
        table.csstableappointment td
        {
            border: 1px solid #ccc;
        }
        table.csstableappointment .csstdred
        {
            border-color: #f00;
        }
        table.csstableappointment .csstdgreen
        {
            border-color: green;
        }

    </style>
 <body>

   <table id="tableAppointment" class="csstableappointment" cellspacing= bgcolor="#cccccc" border="1" width="50%">
     <tr class="csstextheader">
     <td>   
     </td>
     <td>Class  
     </td>
     <td>Numbers
     </td>
     </tr>
   <tr class="csstablelisttd">
     <td> 1  
     </td>
     <td class='csstdred'>john
     </td>
     <td>3
     </td>
     </tr>
      <tr class="csstablelisttd">
     <td>  4
     </td>
     <td class='csstdred' > 
     </td>
     <td class='csstdred'> mans 
     </td>
     </tr>   
      <tr class="csstablelisttd">
     <td >  7 
     </td>
     <td class='csstdred'> jack
     </td>
    <td class='csstdred'>   
     </td>
     </tr>  
      <tr class="csstablelisttd">
     <td> 10
     </td>
     <td>11
     </td>
    <td>12
    </td>
     </tr>
     <tr class="csstablelisttd">
     <td> 13
     </td>
     <td class='csstdred'>
     </td>
    <td>15
    </td>
     </tr>
      <tr class="csstablelisttd">
     <td> 16
     </td>
     <td class='csstdred'>george
     </td>
    <td>18
    </td>
     </tr>
   </table>

</body>
</html>

$(document).ready(function () {
    $(document).on('click', '#tableAppointment td', function (e) {
        if ($(this).hasclass('csstdred')) {
            $(this).removeclass('csstdred').addClass('csstdhighlight');
        }
    });
}); 
```

当我单击单元格时， ***如果单元格长度为 3，则其前一个单元格和下一个单元格变为蓝色*** ***，如果单元格长度为 2，则只有其前一个单元格变为蓝色*** ***，如果单元格长度为 1，则当前单元格变为蓝色。***

[演示](http://jsbin.com/umuxij/2/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:53:39.050

```
<table border="1" id="tableAppointment">
<tr>
    <td>a</td>
    <td>asd</td>
    <td>asd3</td>
</tr>
</table> 
```

使用这个想法来设置下一个和上一个。只需给它正确的类并相应地做你的 if 语句。

```
$(document).on('click','#tableAppointment td', function (){
     var length = $(this).text().length;
    var cellIndex = $(this).index();

    if(length == 3)
        $(this).closest('td').next().addClass('theClass');
    if(length == 1)
        $(this).closest('td').prev().addClass('class');
}); 
```

​</p>

# vb.net - 如何在带前缀的 XElement 中获取不带前缀的子 XElement

> ID：13525351
> 
> 赞同：0
> 
> 时间：2012-11-23T08:27:55.873
> 
> 标签：vb.net, linq-to-xml

我一直在 VB.net 中使用 XML，这与您在 C# 中的操作方式完全不同，它更自然地遍历节点。然后，您会遇到名称空间。

首先，我使用了以下导入：

```
Imports <xmlns:mstns="http://tempuri.org/myDataSet.xsd">
Imports <xmlns="http://tempuri.org/MyDataSet.xsd">
Imports <xmlns:xs="http://www.w3.org/2001/XMLSchema">
Imports <xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
Imports <xmlns:msprop="urn:schemas-microsoft-com:xml-msprop"> 
```

然后我尝试像这样访问 TableAdapter 节点：

```
 Dim doc As XDocument

  Dim tableAdapters As XElement

  doc = XDocument.Load(file.FullName)

 tableAdapters = (From item As XElement In doc.<xs:schema>.
                                               <xs:annotation>.
                                               <xs:appinfo>.
                                               <DataSource>. 
                                               <Tables>.
                                               <TableAdapter>
                                               Select item).FirstOrDefault() 
```

[忽略换行符，我这样做只是为了可读性]

我可以正确获取节点，直到 xs:appinfo，之后，我尝试检索的任何节点都为空

我究竟做错了什么？

以下是数据集的正常 xml 结构：

![普通数据集的 XML 结构](../Images/6af28c9675a911d749dd2e432af05e52.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:09:21.850

没关系，我已经发现了问题。DataSource 节点没有使用前缀命名空间，但它实际上是**使用命名空间作为属性**。您可以在图像中看到（作为 xmlns）。

所以要解决它，你这样做：

添加另一个导入，其中 xmlns 的命名空间作为节点中的属性找到：

```
Imports <xmlns:datasource="urn:schemas-microsoft-com:xml-msdatasource"> 
```

然后像这样检索：

```
 tableAdapters = (From item As XElement In doc.<xs:schema>.
                                                     <xs:annotation>.
                                                     <xs:appinfo>.
                                                      <datasource:DataSource>.
                                                    <datasource:Tables>.
                                                    <datasource:TableAdapter> 
                          Select item).FirstOrDefault() 
```

# java - 通过套接字连接到 PC 时，我手机中的 Android-App 停止了

> ID：13525352
> 
> 赞同：1
> 
> 时间：2012-11-23T08:27:57.497
> 
> 标签：java, android, sockets

我将我的电脑用作服务器，只需构建一个套接字。在客户端源代码中，我只是建立一个连接到 pc 的套接字。但是，当我在手机中打开应用程序时，它显示应用程序已停止...我已将 Internet 权限添加到项目中。

服务器

```
public class Server extends Thread{
    private Socket client;

    public Server(Socket c){
        this.client = c;
    }

    public void run(){
        try{    
            //System.out.println("Start!");
            BufferedReader in = 
                    new BufferedReader(new InputStreamReader(client.getInputStream()));
            PrintWriter out = new PrintWriter(client.getOutputStream());
            while(true){
                String str = in.readLine();
                System.out.println(str);
                out.println("has receive...");
                out.flush();
                if(str.equals("end"))
                    break;
            }
            client.close();

        }
        catch(IOException ex){
        }finally{
        }
    }

    public static void main(String[] args) throws IOException{
        ServerSocket server = new ServerSocket(2345);
        System.out.println("Start!");       
        while (true){
            Server sv = new Server(server.accept());
            sv.start();
        }
    }
} 
```

客户：

```
public class MainActivity extends Activity {

    Socket socket;
    DataInputStream dis;
    DataOutputStream dos;

    private TextView tv;
    private Button bt;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tv = (TextView) findViewById(R.id.TextView1);
        bt = (Button) findViewById(R.id.button1);
        bt.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try{
                    socket = new Socket("155.69.149.221",2345);
                    tv.setText("Connected!");
                }catch(IOException ioe){

                }

            }
        });

    }

} 
```

# javascript - 为什么 MVC ajax onSuccess 函数触发甚至状态码是 302

> ID：13525353
> 
> 赞同：0
> 
> 时间：2012-11-23T08:28:02.520
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个 ajax 表单，我在其中定义了一些`ajaxOptions`变量并将其传递给`Ajax.BeginForm`：

```
var ajaxOptions = new AjaxOptions
                      {
                          HttpMethod = "POST",
                          LoadingElementId = "loading",
                          OnBegin = "Base.loadingButton('#RegisterSubmit');",
                          OnSuccess = "Register.onSuccess",
                          OnFailure = "Base.onError"
                      }; 
```

所有 JavaScript 函数都定义在一个特殊的命名空间中，例如`Base`, `Register`,... 。

现在，当表单提交并在服务器中出现错误代码：“0”和类型：“Sql”并使用 elmah 记录，状态代码：“HTTP/1.1 302 Found”从服务器返回。

**问题 1：**
`OnSuccess`即使在这种情况下，函数总是触发，状态 302 返回（但 OnSuccess 只有在状态码为 200 时才必须触发！！！），为什么？

**问题2：**
有时`OnSuccess`即使状态码是200，函数也不会触发！！！，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:38:06.727

> 问题 1：即使在这种情况下，OnSuccess 函数总是触发状态 302 返回（但 OnSuccess 只有在状态码为 200 时才必须触发！！！），为什么？

这是因为当您向重定向的服务器端脚本（状态码 302）执行 AJAX 请求时，AJAX 会跟随重定向到目标位置并最终以状态码 200 结束 => 因为请求成功，将触发 OnSuccess。您对此无能为力 - 这就是 AJAX 的工作方式 - 您无法拦截 302 状态代码。

您是否使用它来检测到登录页面场景的重定向？如果会话过期或什么？处理这种情况的正确方法是使用来自服务器的 401 状态代码并在`OnFailure`方法中检测此事件。为了防止 FormsAuthentication 模块重定向到登录页面但发送 401 状态代码，您可以查看[`following article`](http://haacked.com/archive/2011/10/04/prevent-forms-authentication-login-page-redirect-when-you-donrsquot-want.aspx).

> 问题 2：有时 OnSuccess 函数即使状态码是 200 也不会触发！！！，为什么？

如果状态码为 200，则 OnSuccess 应始终触发，除非您有一些 javascript 错误。

# apache - Apache 重写为 nginx 语法

> ID：13525356
> 
> 赞同：0
> 
> 时间：2012-11-23T08:28:16.310
> 
> 标签：apache, .htaccess, nginx

我在 .htaccess 文件中有这个 apache 重写规则，并希望将其转录到 nginx。

```
 Options +FollowSymlinks
 RewriteEngine on
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^([^/]+)/([^/]+)(.*)$ /$3?$1=$2 [N,QSA] 
```

任何帮助将不胜感激。

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:01:48.567

一般来说，apacahe 节：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule <regeg> <target> 
```

应替换为 nginx 等效项：

```
location ~* <regex> { try_files $uri $uri/ <target>; } 
```

因此，在您的情况下，您需要将以下位置添加到`server`您网站的 nginx -block 中：

```
location ~* ^([^/]+)/([^/]+)(.*)$ { try_files $uri $uri/ /$3?$1=$2; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:31:10.970

您可以尝试使用 Nginx 的新规则： [http ://wiki.nginx.org/NginxHttpRewriteModule](http://wiki.nginx.org/NginxHttpRewriteModule)

# soap - 线程安全的 CXF 调用是否会阻塞其他调用？

> ID：13525360
> 
> 赞同：0
> 
> 时间：2012-11-23T08:28:37.700
> 
> 标签：soap, thread-safety, cxf

我们计划使用 CXF 为我们的 Java 客户端代码生成 Java 类。我读过 CXF 是线程安全的，请参阅[CXF FAQ](http://cxf.apache.org/faq.html#FAQ-AreJAXWSclientproxiesthreadsafe%3F)。

但我找不到的是 2 个线程中的 2 个对同一个soap 服务的调用是否同时执行，或者一个是否会阻塞另一个？

所以我们有多个线程调用**同一个soap服务实例**，比如

```
class TestSoapRunner implements Runnable {
  private TestSoap testSoap;

  public TestSoapRunner(TestSoap testSoap) { // <- all threads use same TestSoap instance
    this.testSoap = testSoap;
  }

  public run() {
     ...
     testSoap.test();  // <- in multiple threads. is one call blocking others???
     ...
  }
} 
```

我需要知道是否只有一个soap调用同时执行，即一个调用阻塞所有其他调用，直到它完成；或者所有呼叫是否同时通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T13:01:24.377

他们都同时经历。

# c++ - 您可以将附加参数传递给谓词吗？

> ID：13525361
> 
> 赞同：18
> 
> 时间：2012-11-23T08:28:40.047
> 
> 标签：c++, predicate

我正在尝试过滤向量，使其仅包含特定值。

例如，确保向量只包含值为“abc”的元素。

现在，我正在尝试通过`remove_copy_if`.

使用 std 的一种算法时，有什么方法可以将附加参数传递给谓词？

```
std::vector<std::string> first, second;
first.push_back("abc");
first.push_back("abc");
first.push_back("def");
first.push_back("abd");
first.push_back("cde");
first.push_back("def");

std::remove_copy_if(first.begin(), first.end(), second.begin(), is_invalid); 
```

我希望将以下函数作为谓词传递，但似乎更有可能最终将当前值`remove_copy_if`与下一个值进行比较。

```
bool is_invalid(const std::string &str, const std::string &wanted)
{
   return str.compare(wanted) != 0;
} 
```

我有一种感觉，我可能正在接近这个错误，所以任何建议将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-23T08:33:53.190

而是定义一个仿函数：

```
struct is_invalid
{
    is_invalid(const std::string& a_wanted) : wanted(a_wanted) {}
    std::string wanted;
    bool operator()(const std::string& str)
    {
        return str.compare(wanted) != 0;
    }
};

std::remove_copy_if(first.begin(),
                    first.end(),
                    second.begin(),
                    is_invalid("abc")); 
```

或者如果 C++11 使用 lambda：

```
std::string wanted("abc");
std::remove_copy_if(first.begin(), first.end(), second.begin(), 
    [&wanted](const std::string& str)
    {
        return str.compare(wanted) != 0;
    }); 
```

`second`请注意，输出向量*必须*在调用 之前包含元素`remove_copy_if()`：

```
// Create 'second' after population of 'first'.
//
std::vector<std::string> second(first.size());

std::string wanted = "abc";
int copied_items    = 0;
std::remove_copy_if( first.begin(), first.end(), second.begin(),
    [&wanted, &copied_items](const std::string& str) -> bool
    {
        if (str.compare(wanted) != 0) return true;
        copied_items++;
        return false;
    });
second.resize(copied_items); 
```

随着仿函数谓词被复制，需要更多的努力来保留`copied_items`信息。有关建议的解决方案，请参阅[在 C++ 中通过引用传递标准算法谓词。](https://stackoverflow.com/questions/8313370/pass-std-algos-predicates-by-reference-in-c)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-23T08:33:35.397

制作函子，或使用`std/boost::bind`.

```
struct is_invalid
{
public:
   is_invalid(const std::string& w):wanted(w) { }
   bool operator () (const std::string& str)
   {
       return str.compare(wanted) != 0;
   }
private:
   std::string wanted;
};

std::remove_copy_if(first.begin(), first.end(), second.begin(), is_invalid("abc")); 
```

绑定示例

```
bool is_invalid(const std::string &str, const std::string &wanted)
{
   return str.compare(wanted) != 0;
}

std::remove_copy_if(first.begin(), first.end(), second.begin(),
boost::bind(is_invalid, _1, "abc")); 
```

# javascript - 如何在主干中获取事件类型？

> ID：13525362
> 
> 赞同：0
> 
> 时间：2012-11-23T08:28:43.957
> 
> 标签：javascript, model-view-controller, backbone.js

骨干中的收集和查看

```
var studentmodel = Backbone.Model.extend();

    var studentcollection = Backbone.Collection.extend({
model : studentmodel,
url : 'http://localhost/bb/data.JSON',
parse : function(response){
    //console.log(response.data);
    return response.data;
    //return response;
},
  });

var studentlistview = Backbone.View.extend({
    tagName : "ul",
    className : "studentlistul",
    initialize : function(){
        this.model.bind("reset", this.checkEvent,this);
        this.model.bind("add", this.checkEvent,this);
    },
      checkEvent : function(){

        $(this.el).html("");

    _.each(this.model.models, function(student){

    $(this.el).append(new studentListItemView({ model : student}).render2().el);
    }, this);

    $('#studentlistdiv').html($(this.el));

    return this; 
```

} });

并尝试将项目添加到此模型及其工作中，我的问题是在 render fn 中我如何在 this.model.bind("add", this.checkEvent,this) this evt 触发时获取事件类型。在 checkEvent 中，我如何获取事件的类型，即触发添加或重置的事件类型。这是我的问题请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T17:34:57.677

没有可靠的方法让 Backbone 事件处理程序知道是什么事件触发了它。而不是这样做：

```
this.model.bind("reset", this.checkEvent, this);
this.model.bind("add",   this.checkEvent, this); 
```

对于每个所需的操作，您应该有单独的处理程序：

```
// A reset generally means that you want to redraw the whole thing.
this.model.bind("reset", this.render, this);

// If one model is added then you usually just want to render the
// the new one.
this.model.bind("add", this.render_one, this); 
```

然后你`render`会看起来像这样：

```
this.$el.empty();
this.collection.each(this.render_one, this);
return this; 
```

我在这里时还有一些额外的事情：

1.  Backbone 视图已经有一个 jQuery 版本的`this.el`in[`this.$el`](http://backbonejs.org/#View-%24el)所以没有必要`$(this.el)`，只需使用`this.$el`.
2.  Backbone 视图处理[`collection`选项](http://backbonejs.org/#View-constructor)的方式与它们处理选项的方式相同`model`。所以如果你`new View({ collection: c })`那么视图将自动拥有`this.collection`. 如果您有收藏，请使用`collection`；如果您有模型，请使用`model`；使用准确的名称不会造成混淆。
3.  Backbone 集合已经混合了一堆[Underscore 方法，](http://backbonejs.org/#Collection-Underscore-Methods)所以你可以说`this.collection.each(...)`而不是`_(this.collection.models, ...)`.

# asp.net - 如何从单个 .ascx 文件加载 ASP.net 页面中的多个用户控件

> ID：13525363
> 
> 赞同：0
> 
> 时间：2012-11-23T08:28:45.547
> 
> 标签：asp.net, vb.net, dynamic, controls

我尝试使用带有 .ascx 文件的自定义控件在单击按钮事件时在 ASP 页面中加载多个控件。

这是我的 .ascx 文件：

```
<%@ Control Language="VB" ClassName="CHelloWorld" %>
<script runat="server">
</script>

<asp:Panel ID="panel" runat="server">
    hello world!
</asp:Panel> 
```

现在我创建一个带有按钮的 .aspx 文件，以及一个面板，每次使用 click on button 时我都会在其中添加控件：

```
<asp:Panel runat="server" id="panelcontrols">
</asp:Panel>
<asp:Button id="myButton" OnClick="OnClickButton" Text="Add" /> 
```

这是我的带有点击事件的 .vb 文件：

```
Sub OnClickButton(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim myControl As Control
    myControl  = LoadControl("myfile.ascx")
    panelcontrols.Controls.Add(myControl  )
End Sub 
```

有了这个实现，当我第一次点击时：我看到“Hello World！” 在我的页面中，但是当我第二次，第三次点击时，......没有发生任何变化！

是因为我只能从 .ascx 加载一个控件吗？

如何从单个 .ascx 文件创建多个控件？

谢谢。

**[编辑]**

好的，我现在使用 WiewState 来记住已经创建的控件。谢谢。

但我有一个问题：

我的 .aspx 文件使用 .vb 文件中的代码（我在其中定义了 OnClickButton），并在 @Page 指令中使用此行：*Src="[path]/myscript.vb*

但是在这个 .vb 文件中我不知道如何使用 CHelloWorld 控件类型来修改控件属性。

如果我使用此代码它不起作用：

```
Sub OnClickButton(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim myControl As CHelloWorld
    myControl  = LoadControl("myfile.ascx")
    panelcontrols.Controls.Add(myControl  )
End Sub 
```

它没有说“CHelloWorld”没有定义！

我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:33:19.580

不，这是因为您正在动态添加控件。在每个页面加载时，添加的控件都将丢失，因此您需要每次都添加它（因此有一种“记住”您在回发之间添加的内容的方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T04:00:28.730

我很高兴 ViewState 为您工作。

关于下一个问题，你有正确的命名空间吗？（这可能值得在一个单独的问题中提出）

# sql - SQL。递归查询。如何优化此查询？

> ID：13525369
> 
> 赞同：0
> 
> 时间：2012-11-23T08:29:07.480
> 
> 标签：sql, oracle, caching, recursion

有没有办法优化递归查询？

表：

```
TREE_TABLE: 
      Parent   varchar2 
      Child    varchar2
TABLEXXX:   
      FieldXXX varchar2 
```

我需要获取所有在 TABLEXXX(FieldXXX) 中有引用的子节点的根。查询的结果是对的，但是响应时间太长了。可以减少对子查询的访问次数吗？或者其他提示...

TREE_TABLE（树格式）

```
a - b - c
d
f - g 
```

表XXX

```
c
f 
```

结果：

```
a
b
c
f

-- Cost: 7\. Bytes: 33.210  Cardinality: 1.230 
WITH subquery AS
(SELECT FIELD FROM TABLEXXX WHERE ...)
SELECT CONNECT_BY_ROOT t1.CHILD "ROOT"
   FROM TREE_TABLE t1
    WHERE EXISTS
      (SELECT subquery.FIELD 
        FROM subquery
        WHERE t1.CHILD = subquery.FIELD)
    START WITH t1.CHILD IN
                  (SELECT FIELD FROM TABLEYYYY WHERE ...)
    CONNECT BY PRIOR t1.CHILD = t1.PARENT 
```

执行计划

```
 <ExplainPlan>
   <PlanElement id="0" operation="SELECT STATEMENT" optimizer="ALL_ROWS" cost="7" cardinality="1.230" bytes="33.210" cpu_cost="3.583.764" io_cost="6">
     <PlanElements>
       <PlanElement id="1" operation="FILTER" filter_predicates=" EXISTS (SELECT 0 FROM &quot;TS_SO_ENG_VALUATIONS_INFO&quot; &quot;V&quot; WHERE &quot;V&quot;.&quot;VAL_DATE&quot;=TO_DATE('2012-10-31 00:00:00', 'yyyy-mm-dd hh24:mi:ss') AND &quot;V&quot;.&quot;CLIENT_CP_CODE&quot;=:B1 GROUP BY &quot;CLIENT_CP_CODE&quot;)">
         <PlanElements>
           <PlanElement id="2" operation="CONNECT BY" option="WITH FILTERING" filter_predicates=" EXISTS (SELECT 0 FROM &quot;TS_BPU_EMAIL_EXTRA_INFO&quot; &quot;TS_BPU_EMAIL_EXTRA_INFO&quot; WHERE &quot;COUNTERPARTY&quot;=:B1)">
       <PlanElements>
         <PlanElement id="3" operation="FILTER" filter_predicates=" EXISTS (SELECT 0 FROM &quot;TS_BPU_EMAIL_EXTRA_INFO&quot; &quot;TS_BPU_EMAIL_EXTRA_INFO&quot; WHERE &quot;COUNTERPARTY&quot;=:B1)">
           <PlanElements>
             <PlanElement id="4" operation="COUNT">
         <PlanElements>
           <PlanElement id="5" operation="HASH JOIN" option="RIGHT OUTER" cost="7" cardinality="1.230" bytes="33.210" cpu_cost="3.583.764" io_cost="6" access_predicates="&quot;T2&quot;.&quot;COUNTERPARTY&quot;(+)=&quot;T1&quot;.&quot;FATHER&quot;">
             <PlanElements>
               <PlanElement object_ID="0" id="6" operation="INDEX" option="FAST FULL SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="IDX_TS_BPU_EMAIL_FAMILY_CNT" object_type="INDEX" cost="3" cardinality="1.230" bytes="12.300" cpu_cost="176.086" io_cost="3"/>
               <PlanElement object_ID="1" id="7" operation="INDEX" option="FAST FULL SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="TS_BPU_EMAIL_FAMILY_PK" object_type="INDEX (UNIQUE)" cost="3" cardinality="1.230" bytes="20.910" cpu_cost="190.329" io_cost="3"/>
             </PlanElements>
           </PlanElement>
         </PlanElements>
             </PlanElement>
             <PlanElement object_ID="2" id="8" operation="INDEX" option="UNIQUE SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="TS_BPU_EMAIL_EXTRA_INFO_PK" object_type="INDEX (UNIQUE)" search_columns="1" cost="1" cardinality="1" bytes="10" cpu_cost="14.443" io_cost="1" access_predicates="&quot;COUNTERPARTY&quot;=:B1"/>
           </PlanElements>
         </PlanElement>
         <PlanElement id="9" operation="HASH JOIN" access_predicates="&quot;T1&quot;.&quot;FATHER&quot;=NULL">
           <PlanElements>
             <PlanElement id="10" operation="CONNECT BY PUMP"/>
             <PlanElement id="11" operation="COUNT">
         <PlanElements>
           <PlanElement id="12" operation="HASH JOIN" option="RIGHT OUTER" cost="7" cardinality="1.230" bytes="33.210" cpu_cost="3.583.764" io_cost="6" access_predicates="&quot;T2&quot;.&quot;COUNTERPARTY&quot;(+)=&quot;T1&quot;.&quot;FATHER&quot;">
             <PlanElements>
               <PlanElement object_ID="0" id="13" operation="INDEX" option="FAST FULL SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="IDX_TS_BPU_EMAIL_FAMILY_CNT" object_type="INDEX" cost="3" cardinality="1.230" bytes="12.300" cpu_cost="176.086" io_cost="3"/>
               <PlanElement object_ID="1" id="14" operation="INDEX" option="FAST FULL SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="TS_BPU_EMAIL_FAMILY_PK" object_type="INDEX (UNIQUE)" cost="3" cardinality="1.230" bytes="20.910" cpu_cost="190.329" io_cost="3"/>
             </PlanElements>
           </PlanElement>
         </PlanElements>
             </PlanElement>
           </PlanElements>
         </PlanElement>
         <PlanElement id="15" operation="COUNT">
           <PlanElements>
             <PlanElement id="16" operation="HASH JOIN" option="RIGHT OUTER" cost="7" cardinality="1.230" bytes="33.210" cpu_cost="3.583.764" io_cost="6" access_predicates="&quot;T2&quot;.&quot;COUNTERPARTY&quot;(+)=&quot;T1&quot;.&quot;FATHER&quot;">
         <PlanElements>
           <PlanElement object_ID="0" id="17" operation="INDEX" option="FAST FULL SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="IDX_TS_BPU_EMAIL_FAMILY_CNT" object_type="INDEX" cost="3" cardinality="1.230" bytes="12.300" cpu_cost="176.086" io_cost="3"/>
           <PlanElement object_ID="1" id="18" operation="INDEX" option="FAST FULL SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="TS_BPU_EMAIL_FAMILY_PK" object_type="INDEX (UNIQUE)" cost="3" cardinality="1.230" bytes="20.910" cpu_cost="190.329" io_cost="3"/>
         </PlanElements>
             </PlanElement>
           </PlanElements>
         </PlanElement>
         <PlanElement object_ID="2" id="19" operation="INDEX" option="UNIQUE SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="TS_BPU_EMAIL_EXTRA_INFO_PK" object_type="INDEX (UNIQUE)" search_columns="1" cost="1" cardinality="1" bytes="10" cpu_cost="14.443" io_cost="1" access_predicates="&quot;COUNTERPARTY&quot;=:B1"/>
       </PlanElements>
           </PlanElement>
           <PlanElement id="20" operation="SORT" option="GROUP BY NOSORT" cost="4" cardinality="1" bytes="18" cpu_cost="29.741" io_cost="4">
       <PlanElements>
         <PlanElement object_ID="3" id="21" operation="TABLE ACCESS" option="BY INDEX ROWID" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="TS_SO_ENG_VALUATIONS_INFO" object_type="TABLE" object_instance="1" cost="4" cardinality="1" bytes="18" cpu_cost="29.741" io_cost="4" filter_predicates="&quot;V&quot;.&quot;CLIENT_CP_CODE&quot;=:B1">
           <PlanElements>
             <PlanElement object_ID="4" id="22" operation="INDEX" option="RANGE SCAN" optimizer="ANALYZED" object_owner="COMPANY_TREASURY" object_name="ENG_VAL_INFO_VAL_DATE_IDX" object_type="INDEX" search_columns="1" cost="3" cardinality="1" cpu_cost="21.564" io_cost="3" access_predicates="&quot;V&quot;.&quot;VAL_DATE&quot;=TO_DATE('2012-10-31 00:00:00', 'yyyy-mm-dd hh24:mi:ss')"/>
           </PlanElements>
         </PlanElement>
       </PlanElements>
           </PlanElement>
         </PlanElements>
       </PlanElement>
     </PlanElements>
   </PlanElement>
</ExplainPlan> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T19:20:24.850

我在这里猜测您的树表结构（假设 null 父级表示根节点）：-

```
CREATE TABLE TREE_TABLE (PARENT VARCHAR2(1), CHILD VARCHAR2(1));
CREATE TABLE TABLEXXX (CHILD_REF VARCHAR2(1) NOT NULL); 
insert into tree_table values (null, 'a');
insert into tree_table values ('a','b');
insert into tree_table values ('b', 'c');
insert into tree_table values (null, 'd');
insert into tree_table values (null, 'f');
insert into tree_table values ('f','g');
insert into tablexxx values ('c');
insert into tablexxx values ('f');
commit; 
```

然后我们可以选择具有您选择的 TABLEXXX 值的所有节点作为这样的后代（您的输出表明您想要所有祖先节点而不仅仅是根节点）：-

```
select child from tree_table 
connect by child = prior parent start with child in (select child_ref from tablexxx) 
```

这给了我们：-

```
c
b
a
f 
```

这显示了我们是如何在树上行走的。我们从您选择的节点（c 和 f）开始向上工作（因此水平是颠倒的）：-

```
select sys_connect_by_path(child ||'(' || level || ')', '->'), child from tree_table 
connect by child = prior parent start with child in (select child_ref from tablexxx) 

->c(1)                c
->c(1)->b(2)          b
->c(1)->b(2)->a(3)    a
->f(1)                f 
```

# android - 如何提示用户设置默认家庭应用

> ID：13525370
> 
> 赞同：1
> 
> 时间：2012-11-23T08:29:15.760
> 
> 标签：android, android-launcher

这几天我一直在网上搜索，到目前为止我还没有想出太多。我想知道的是如何打开可以选择默认家庭应用程序的框。我目前还没有看到如何在单击按钮时启动此对话框（例如）。

编辑：我正在谈论的对话是用于幼儿锁的对话，看起来像[这样](https://i.stack.imgur.com/EJCB0.png)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:43:16.970

您的应用程序必须充当常规启动器。如果会有更多这种类型的应用程序（通常会在您成为第二个应用程序时发生），Android 会在第一次返回启动器时自行询问您。无法从您的代码中显示该对话框。

**编辑**

我不知道“蹒跚学步的孩子”，但要获得这种效果，就像启动器一样（通过设置 CATEGORY_HOME）就足够了，然后，当用户第一次启动您的应用程序时，您会立即将他重定向回启动器。在那一刻，Android 发现它有多个启动器并弹出该对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:41:43.370

我相信当存在多个应用程序为您服务时，这是由 Android 操作系统完成的。例如，单击 youtube 或应用商店链接将允许您在应用或浏览器中打开该链接。

在您的特定情况下，为应用程序提供 CATEGORY_HOME 意图应该可以解决问题。

来源：http: [//developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

# java - MIT Java WordNet 接口：获取 WordNet 词典编纂者类或超感知

> ID：13525372
> 
> 赞同：2
> 
> 时间：2012-11-23T08:29:31.077
> 
> 标签：java, wordnet, lexical

我有一个项目，我需要获得一个单词的词汇含义。我正在考虑使用 WordNet，因为它有自己的词典编纂者类，也称为超感官。我刚刚下载了 MIT JWI 并试图查看这个 JWI 是否支持它。该手册没有说明返回附加到单词的任何词汇信息。

```
import java.io.File;
import java.io.IOException;
import java.io.ObjectInputStream.GetField;
import java.net.URL;
import edu.mit.jwi.*;
import edu.mit.jwi.item.IIndexWord;
import edu.mit.jwi.item.ILexFile;
import edu.mit.jwi.item.ISenseKey;
import edu.mit.jwi.item.IWord;
import edu.mit.jwi.item.IWordID;
import edu.mit.jwi.item.POS;

public class MITJavaWordNetInterface {

    public static void main(String[] args) throws IOException{

        //construct URL to WordNet Dictionary directory on the computer
        String wordNetDirectory = "WordNet-3.0";
        String path = wordNetDirectory + File.separator + "dict";
        URL url = new URL("file", null, path);      

        //construct the Dictionary object and open it
        IDictionary dict = new Dictionary(url);
        dict.open();

        // look up first sense of the word "dog "
        IIndexWord idxWord = dict.getIndexWord ("dog", POS.NOUN );
        IWordID wordID = idxWord.getWordIDs().get(0) ;
        IWord word = dict.getWord (wordID);         
        System.out.println("Id = " + wordID);
        System.out.println(" Lemma = " + word.getLemma());
        System.out.println(" Gloss = " + word.getSynset().getGloss());      
    }    
} 
```

我设法运行了麻省理工学院提供的示例。关于如何获取使用 MIT JWI 或任何其他工具提交的单词的词汇信息的任何线索或建议都会很棒。关于如何调用该方法的示例也将不胜感激。

```
An example word: dog
Desired results: noun.animal 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-06T03:37:16.730

您应该能够使用上面提到的相同代码并添加更多行

```
 IIndexWord idxWord = dict.getIndexWord("dog", POS.NOUN);
    IWordID wordID = idxWord.getWordIDs().get(0);
    IWord word = dict.getWord(wordID);
    ISynset synset = word.getSynset();
    String LexFileName = synset.getLexicalFile().getName();
    System.out.println("Lexical Name : "+ LexFileName); 
```

# c# - delegate.BeginInvoke 和 UI 线程的问题

> ID：13525374
> 
> 赞同：0
> 
> 时间：2012-11-23T08:29:42.503
> 
> 标签：c#, multithreading, threadpool

在按钮单击事件（表单控件）中，我有：

```
Action<SomeType, CallbackType> action = (__o1, __callback) =>
{
  __o1.Operation(__callback);
};
action.BeginInvoke(
  o1, 
  callback,
  (asyncCallback) => 
    ((Action<SomeType, CallbackType>)asyncCallback.AsyncState).EndInvoke(asyncCallback),
  action); 
```

由于某些未知原因，UI 线程挂起，直到此异步调用返回。但仍然单击事件实现返回。

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:11:01.110

尝试这个：

```
Action<SomeType, CallbackType> action = (__o1, __callback) =>
{
    __o1.Operation(__callback);
};
action.BeginInvoke(
    o1,
    callback,
    (asyncCallback) =>
    ((Action<SomeType, CallbackType>)((AsyncResult)asyncCallback).AsyncDelegate).EndInvoke(asyncCallback),
    action); 
```

# c - C中的数字精度误差

> ID：13525376
> 
> 赞同：5
> 
> 时间：2012-11-23T08:29:59.737
> 
> 标签：c, precision, floating-point-precision

这是我写的一段代码：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    double num;
    int tmp;
    printf("enter a number!\n");
    scanf("%lf",&num);
    tmp=num*10000;
    printf(" temp=%d\n",tmp);

    return 0; 
} 
```

当我输入数字 1441.1441 时，我得到的结果是 14411440 而不是 14411441，这显然是将我的输入数字乘以 10000 后的正确结果。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T08:38:57.210

由于绝大多数实数实际上无法准确表示，您可能会发现它`1441.1441`实际上存储为类似`1441.14409999_blah_blah_blah`. 您可以通过插入：

```
printf ("%.50lf\n", num); 
```

在看到之后立即`scanf`（删除尾随零）：

```
1441.14409999999998035491444170475006103515625 
```

现在这实际上是基于您输入的正确（即最接近的）值。从那里开始的下一个最高数字为您提供：

```
1441.144100000000207728589884936809539794921875 
```

第一个值的错误是：

```
0.00000000000001964508555829524993896484375
               ^ ~ 2 x 10^-14 
```

而第二个错误是：

```
0.000000000000207728589884936809539794921875
              ^ ~ 2 x 10^-13 
```

你可以看到后一个错误大约是 10 倍。

当您将其乘以`10000`并尝试将其硬塞到 中时，它会*向下*`int`舍入（截断）。那是因为 (C11) 标准中有这样的说法：*`6.3.1.4`*

 *> 当实浮点类型的有限值转换为_Bool 以外的整数类型时，小数部分被丢弃（即，该值被截断为零）。

您可以尝试的一件事是将鞋拔线更改为：

```
tmp = num * 10000 + 0.5; 
```

这有效地将截断转换为舍入操作。我*认为*这适用于所有情况，但您可能需要对其进行测试（并密切关注）以防万一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T13:13:31.873

对于一般原则，[paxdiablo 的答案](https://stackoverflow.com/a/13525471/1011995)包含相关部分。大多数终止小数不能精确表示为二进制浮点数，因此浮点变量的值比给定字符串中数字表示的数学值稍小或稍大，因此当您想要获得适当的整数时缩放后的值，你应该四舍五入而不是截断。

但是在这里的具体例子中，我们有一个不同的场景。最接近 1441.1441 的 IEEE754 双精度（64 位二进制）值是

```
1441.14409999999998035491444170475006103515625 
```

这确实比 1441.1441 小一点。但如果将该值乘以 10000 作为 IEEE754 双精度值，则结果正好是

```
14411441 
```

这里发生的情况是，如 5.2.4.2.2 第 9 段所允许的那样

> 除了赋值和强制转换（删除所有额外的范围和精度）之外，具有浮动操作数的运算符产生的值和经过通常算术转换的值和浮动常量的值**被评估为范围和精度可能大于要求的格式类型**。

（强调我的），乘积的计算精度比类型（可能是 x87 80 位格式）要求的精度更高，产生的值略小，当乘法的结果转换为`int`时，小数部分被丢弃，你得到 14411440。

```
scanf("%lf",&num); 
```

该值存储在 中`num`，因此它的精度必须为`double`。

```
tmp=num*10000; 
```

该产品`num * 10000`既不存储也不转换为`double`，因此它可能具有更高的精度，从而导致比最接近的值更小或更大的`double`值。然后截断该值以获得`int`.

如果您将产品存储在`double`变量中

```
num *= 10000;
tmp = num; 
```

或`double`在转换为之前将其转换为`int`,

```
tmp = (double)(num * 10000); 
```

您应该得到输入的结果 14411441 `1441.1441`（但请注意，并非所有编译器在转换或存储时总是遵守转换为所需精度的要求 - 违反标准 - 所以不能保证所有优化设置都会产生 14411441 ）。

由于许多 64 位平台使用 SSE 指令而不是 x87 协处理器执行浮点运算，因此观察到的行为不太可能出现在 64 位系统上而不是 32 位系统上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:43:03.040

试着把它变成这样：

```
float a = 3.14;

int i = (int)(a+0.5); 
```

在你的情况下：

```
 double num;
 int tmp;
 printf("enter a number!\n");
 scanf("%lf",&num);
 tmp=(int)(num*10000 + 0.5);
 printf(" temp=%d\n",tmp); 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-23T08:56:06.013

看起来 scanf 在 scanf 中使用浮点精度。我简要检查了 1441.1441 在浮点数中表示为 1441.1440。一般来说，您不应该依赖浮点运算的精度。*

# css - 2 身体背景：如何设置背景的高度

> ID：13525382
> 
> 赞同：1
> 
> 时间：2012-11-23T08:30:28.900
> 
> 标签：css, background

我有这个代码：

```
body{
    margin: 0px;
    padding: 0px;
    background-image: url(images/header.png), url(images/footer.png);
    background-repeat: repeat-x, repeat;
    background-height: 50px , 400px; /* ?? */
    background-position: 0% 0%, 0% 100%;

} 
```

我可以给 footer.png 一个在该特定高度重复的高度吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:39:10.287

你可以试试`background-size`：

```
body{
    margin: 0px;
    padding: 0px;
    background-image: url(images/header.png), url(images/footer.png);
    background-repeat: repeat-x, repeat-x;
    background-size: auto, auto 500px; // here give to background images height
    background-position: 0% 0%, 0% 100%;

} 
```

更多信息在`background-size` [这里](http://www.css3.info/preview/background-size/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:41:09.353

我建议您创建单独的 div 并指定它。

```
body {
    margin: 0px;
    padding: 0px;
    background-image: url(images/header.png), ;
    background-repeat: repeat-x;
    background-height: 50px , 400px; 
    background-position: 0% 0%, 0% 100%;
    div {
        background-image: url(images/footer.png);
        background-repeat: repeat;
        background-height: 50px , 400px;
    }
} 
```

# mysql - 如何使用 GROUP BY(exec_datetime) 优化 COUNT(DISTINCT ip_address) 的性能

> ID：13525389
> 
> 赞同：1
> 
> 时间：2012-11-23T08:31:11.870
> 
> 标签：mysql

我有以下查询，它显示了每天发出请求的不同 IP 地址。

```
SELECT COUNT(DISTINCT ip_address) as ip_address, DATE(exec_datetime) as day
FROM requests
GROUP BY MONTH(exec_datetime), DAY(exec_datetime); 
```

的输出`EXPLAIN`如下

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  requests    ALL NULL    NULL    NULL    NULL    472043  Using filesort 
```

我对覆盖索引没有清楚的了解，因为当我创建一个时，查询需要很长时间才能完成

```
ALTER TABLE requests ADD INDEX unique_ip_per_time(ip_address, exec_datetime); 
```

这是输出`EXPLAIN`

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  requests    index   NULL    unique_ip_per_time  268 NULL    472043  Using index; Using filesort 
```

我如何通过创建索引或重写来优化此查询？

**编辑**

两个语句的执行时间约为 15 秒（有和没有覆盖索引）。此表上唯一的其他键是`UNIQUE`代理和`INDEX`on`ip_address`

`show indexes from requests`

```
Table   Non_unique  Key_name    Seq_in_index    Column_name Collation   Cardinality Sub_part    Packed  Null    Index_type  Comment Index_comment
requests    0   PRIMARY 1   request_id  A   386577  NULL    NULL        BTREE       
requests    1   ip_address  1   ip_address  A   193288  NULL    NULL    YES BTREE       
requests    1   unique_ip_per_time  1   ip_address  A   163 NULL    NULL    YES BTREE       
requests    1   unique_ip_per_time  2   exec_datetime   A   163 NULL    NULL    YES BTREE 
```

**编辑 2**

我按照 eisberg 的说明进行操作，但是此查询大约需要 1.1 秒...

```
EXPLAIN SELECT
  A.request_day,
  (
    SELECT COUNT(DISTINCT B.ip_address)
    FROM requests B
    WHERE B.exec_date = A.request_day
  ) as num_ip_addr
FROM request_days A
ORDER BY A.request_day ASC; 
```

这比这个大约需要 0.9 秒的查询稍慢

```
SELECT COUNT(DISTINCT ip_address) as ip_address, exec_date
FROM requests
GROUP BY exec_date; 
```

我认为我不需要创建带有日期的附加表。是否有任何优化可以应用于部分语句`DISTINCT ip_address`（这似乎是瓶颈）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:51:18.733

我为这种问题创建了一个小解决方法。但是你需要做一些工作。

首先，您可以根据要求创建一个额外的列，以避免在选择期间进行额外的计算：

```
ALTER TABLE requests ADD COLUMN (request_day DATE);

ALTER TABLE requests ADD INDEX i1(request_day);

UPDATE requests SET request_day = DATE(exec_datetime); 
```

比您需要一张额外的表格来记住您可以/想要选择的日期：

```
CREATE TABLE request_days (
  request_day DATE
);

ALTER TABLE request_days ADD UNIQUE INDEX i1(request_day);

INSERT IGNORE INTO request_days SELECT DATE(exec_datetime) FROM requests; 
```

最后，您可以：

```
EXPLAIN
SELECT
  A.request_day,
  (
    SELECT COUNT(DISTINCT B.ip_address)
    FROM requests B
    WHERE B.request_day = A.request_day
  )
FROM request_days A
ORDER BY A.request_day DESC 
```

这使：

```
ID  SELECT_TYPE         TABLE   TYPE    POSSIBLE_KEYS   KEY KEY_LEN REF                         ROWS    EXTRA
1   PRIMARY             A       index   (null)          i1  4       (null)                      1       Using index
2   DEPENDENT SUBQUERY  B       ref     i1              i1  4       db_2_95a42.A.request_day    1       Using where 
```

我希望这能帮到您！

SQL Fiddle 示例：[http ://sqlfiddle.com/#!2/95a42/2](http://sqlfiddle.com/#!2/95a42/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:38:03.263

由于您在 上使用 DATE 函数`exec_datetime`，因此引擎将扫描表的所有行。你应该试试`partitioning the table on exec_datetime` [http://dev.mysql.com/doc/refman/5.1/en/partitioning.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:56:42.037

理想情况下，您只需要像这样添加复合功能索引：

```
CREATE INDEX month_day_idx
   ON requests (MONTH(exec_datetime), DAY(exec_datetime)); 
```

不幸的是，MySQL 不支持功能索引。相反，您有 2 个选择：

1.  为月和日创建额外的列，并使用这两个新字段创建复合索引。

2.  或者如果可以的话，改变你的 GROUP BY 以不使用函数。

# iphone - 如何在 ios 中从网络服务器保存和读取 XML 文件？

> ID：13525394
> 
> 赞同：0
> 
> 时间：2012-11-23T08:31:46.487
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我第一次使用网络服务。

我在运行时从 web 服务获得了一个 XML。

```
<?xml version="1.0" encoding="UTF-8"?>
<driver>
<full_name><![CDATA[Test Driver Name]]></full_name>
<d_o_b><![CDATA[1950-05-12]]></d_o_b>
<p_o_b><![CDATA[Test City]]></p_o_b>
<height><![CDATA[Test City]]></height>
<nationality><![CDATA[Test nationality]]></nationality>
<c_team><![CDATA[Test current teme]]></c_team>
<podium><![CDATA[Test podium]]></podium>
<points><![CDATA[Test points]]></points>
<g_p_entered><![CDATA[1950-05-12]]></g_p_entered>
<worldchanpionship><![CDATA[Test 12]]></worldchanpionship>
<h_race_f><![CDATA[Test hightest]]></h_race_f>
<h_g_points><![CDATA[Test hgp]]></h_g_points>
<pre_team><![CDATA[Test pre team]]></pre_team>
</driver> 
```

现在我想保存和读取通过 web 服务获得的 XML 文件，这样我就可以在没有互联网连接的情况下使用我的应用程序。

我不知道该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:35:32.950

您可以使用 GDataXMLNode 库。看看[http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:24:42.127

您可以将完整的 xml 文件保存在 app 的缓存文件夹中，然后从该 xml 文件中读取数据。因此，当您从该 xml 文件中读取数据时，并且当互联网连接可用时，将 xml 文件替换为新文件。

# html - Django：安全验证不受信任的 HTML 输入

> ID：13525399
> 
> 赞同：3
> 
> 时间：2012-11-23T08:32:11.393
> 
> 标签：html, django, xss

我想在 Django 中净化用户输入。

我知道有[Django Html Purifier](https://github.com/whitehat2k9/django-htmlpurifier)但也许有更轻的东西？如果我希望允许用户使用的标签非常有限，例如 just`<b>`怎么办？也许我可以使用一些内置的 Django？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T09:20:37.680

`django-bleach`派生自 PHP 实现是常用的。

该项目在这里：[https ://bitbucket.org/ionata/django-bleach](https://bitbucket.org/ionata/django-bleach)

它的用法非常简单，根据文档似乎可以做你想做的事：

```
# Which HTML tags are allowed
BLEACH_ALLOWED_TAGS = ['p', 'b', 'i', 'u', 'em', 'strong', 'a'] 
```

干杯:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:28:22.210

Python 有一个[HTML Parser](http://docs.python.org/2/library/htmlparser.html)用于处理字符串中的标签。请也看看[这个问题](https://stackoverflow.com/questions/4436008/how-to-get-html-tags)。

您可以在此模块之上为您的用例编写一些内容。例如

```
from HTMLParser import HTMLParser

VALID_TAGS = ['b', 'a', 'strong']

class ForbiddenHTMLException(Exception):
    pass

class MyHTMLParser(HTMLParser):
    def handle_starttag(self, tag, attrs):
        if tag in VALID_TAGS:
            pass
        else:
            raise ForbiddenHTMLException

def validate(html):
    parser = MyHTMLParser()
    try:
        parser.feed(html)
        return True
    except ForbiddenHTMLException:
        return False

print validate('<b>This is bold Text</b>')
print validate('<p>This is not inside b tag.</p>') 
```

# nhibernate - 更新后强制实体刷新

> ID：13525400
> 
> 赞同：1
> 
> 时间：2012-11-23T08:32:12.860
> 
> 标签：nhibernate

我正在使用具有由视图计算的属性的实体。在我的示例场景中：

1.  我正在从数据库中获取实体，并且正在更改该实体的一些属性
2.  我正在保存这个实体 session.Update(entity)
3.  我正在调用 session.Refresh(entity) ，因为视图计算的某些列可能会因我的更改而更改。

因此，NHibernate 如果被迫对数据库进行三次访问。

我想要实现的是只有两次旅行：

1.  我正在从数据库中获取实体，并且正在更改该实体的一些属性
2.  我在一次数据库之旅中保存了这个实体 session.Update(entity) 和刷新。

是否可以？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T13:50:56.700

不，这是不可能的。您必须发出三个 SQL 命令：选择、更新、选择。NHibernate 确实支持批处理，但它将插入或更新批处理在一起，而不是混合命令。

此外，NHibernate 支持[Generated Properties](http://nhforge.org/doc/nh/en/index.html#mapping-generated)，因此您不必手动更新这些列（它仍然需要往返，但它是透明的）

# wcf - 使用 WCF 和 MTOM 进行流式传输

> ID：13525402
> 
> 赞同：6
> 
> 时间：2012-11-23T08:32:36.350
> 
> 标签：wcf, wcf-binding, mtom, wcf-streaming

我正在使用具有流传输模式的 WCF 绑定，用于向/从服务上传和下载二进制内容。我已经设法让它工作了。我将包括配置、合同等以供参考。

我进行了一些测试来对不同的绑定和编码进行基准测试。上传结果似乎没问题。NetTcp 最快，其次是 BasicHttp-MTOM，然后是 BasicHttp-Text。让我吃惊的是，在下载大文件时，MTOM 的速度比使用 BasicHttp 的文本编码和使用 NetTcp 的二进制编码慢。

我错过了什么吗？为什么上传时 BasicHttp-MTOM 的工作速度比其他绑定慢？除此之外，我还为下载实现了双缓冲。这也适用于除具有 MTOM 编码的 BasicHttp 之外的所有绑定。为什么在使用 MTOM 时双缓冲没有帮助？

感谢您的阅读，您对此的建议和想法。

测试结果：

将 150 MB 二进制数据上传到服务。客户端从 150 MB 文件创建文件流并传递给服务器。服务器将流读入内存流。还没有双缓冲。结果似乎很快，因为没有将数据写入文件系统。绑定按预期执行。

![上传](../Images/417b0484958eb7bd8021a974c2b1035f.png)

从服务下载 100 MB 二进制数据。服务创建一个内存流并传递给客户端。客户端写入文件系统。这是单缓冲区和双缓冲区的结果。如您所见，MTOM 似乎非常慢，并且也不响应双缓冲。

![下载](../Images/af37f5d2d70cf5560ceb94a83cc86dcf.png)

服务器配置（为简单起见省略了一些部分）：

```
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="2147483647"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <netTcpBinding>
        <binding name="StreamedNetTcpBinding"
                 transferMode="Streamed"
                 maxReceivedMessageSize="1099511627776">
        </binding>
      </netTcpBinding>
      <basicHttpBinding>
        <binding name="StreamedBasicHttpBindingWithMtom"
                 messageEncoding="Mtom" transferMode="Streamed"
                 maxReceivedMessageSize="1099511627776">
        </binding>
        <binding name="StreamedBasicHttpBinding"
                 transferMode="Streamed"
                 maxReceivedMessageSize="1099511627776">
        </binding>
      </basicHttpBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

客户端配置（为简单起见省略了一些部分）：

```
<configuration>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding name="StreamedBasicHttpBindingWithMtom" 
                 maxReceivedMessageSize="1099511627776"
                 messageEncoding="Mtom" transferMode="Streamed">
        </binding>
        <binding name="StreamedBasicHttpBinding"
                 maxReceivedMessageSize="1099511627776"
                 transferMode="Streamed">
        </binding>
      </basicHttpBinding>
      <netTcpBinding>
        <binding name="StreamedNetTcpBinding" transferMode="Streamed"
          maxReceivedMessageSize="1099511627776">
        </binding>
      </netTcpBinding>
    </bindings>
  </system.serviceModel>
</configuration> 
```

服务合约：

```
[ServiceContract]
public interface IFileService
{
    [OperationContract]
    void UploadFile(DocumentData document);

    [OperationContract]
    DocumentData DownloadFile();
} 
```

消息合约：

```
[MessageContract]
public class DocumentData
{
    [MessageHeader(MustUnderstand = true)]
    public string DocumentName { get; set; }

    [MessageHeader(MustUnderstand = true)]
    public int FileLength { get; set; }

    [MessageBodyMember(Order = 1)]
    public Stream Data { get; set; }
} 
```

* * *

编辑：这原来是我工作中的开发环境设置的一个问题。当我在家中进行相同的测试时，结果符合预期。

![下载](../Images/341a46a633b8e03a77eead3ca681a5f7.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T09:21:36.523

我将添加我用来实现流式传输的链接并接受这个作为答案。

[使用 WCF 上传/下载文件时的进度指示 作者：Dimitris Papadimitriou](http://www.codeproject.com/Articles/20364/Progress-Indication-while-Uploading-Downloading-Fi)
[从/向流读取/写入时实现双缓冲。（见 Thomas Levesque 的回答）](https://stackoverflow.com/questions/12438746/is-stream-copy-piped)
[双缓冲的另一种实现，它做同样的事情。（参见 Nicholas Carey 的回答）](https://stackoverflow.com/questions/1540658/net-asynchronous-stream-read-write)
[使用 SqlFileStream 从 WCF 服务返回流](https://stackoverflow.com/questions/7469955/return-stream-from-wcf-service-using-sqlfilestream)

[工作示例链接](https://github.com/yigityener/SequentialAccessStreamingService/)

# html - 无法在 iframe 中显示 Excel 页面

> ID：13525404
> 
> 赞同：0
> 
> 时间：2012-11-23T08:32:51.877
> 
> 标签：html, excel, iframe

我正在尝试使用 iframe 在网页内显示 excel 电子表格。我需要嵌入网页中的页面，而不是在不同的窗口上打开。这是我尝试过的两种方法：

方法一：

```
<!DOCTYPE html>
<html>
<body>

<IFRAME frameBorder=0 iframe
name="iframe" height=700 marginHeight=0 marginWidth=0
scrolling=auto
src="REVENUE.xls" width=100%></IFRAME>

</body>
</html> 
```

以上在不同的窗口中打开了 Excel；

方法二：

```
<!--webbot bot="HTMLMarkup" startspan -->

<IFRAME src="REVENUE.xls" width="600" height="300" hspace="0"
vspace="0" frameborder="0" scrolling="auto"></IFRAME>

<!--webbot bot="HTMLMarkup" endspan --> 
```

与第二种方法相同的情况。是我的浏览器有问题还是我使用的是 Mozilla fireFox 和 excel 2003。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:59:46.200

这在几年前是可能的，当时浏览器的安全性比较松懈，而 Office 的卖点之一是它的 COM/OLE 基础，它允许整个 Office 应用程序托管在其他应用程序中（不仅彼此之间，而且在 MS Binder 中） 、Visual Studio，当然还有：Internet Explorer）。

时代变迁。我知道 Office 2003 是可以在 IE 中托管的最后一个 Office 版本，但只能在 IE6（可能是 7？），而且我认为它也只能在 Intranet 站点上运行。

如果您是 LAN 上的 Microsoft 商店，最好的选择是使用 SharePoint Office Web Apps，或者使用 Google Docs，这两者都允许在网页中嵌入（和编辑）文档。

# objective-c - 如何更改 UICollectionView 中的编辑菜单？

> ID：13525411
> 
> 赞同：0
> 
> 时间：2012-11-23T08:33:19.267
> 
> 标签：objective-c, cocoa-touch, ios6, uicollectionview

我使用 UICollectionView 来制作一个小应用程序。我只想在点击“longPress”时更改编辑菜单但不能。

前任。将“剪切”更改为“删除”。

* * *

我像下面的代码一样实现我的 ActionSheet。但这不是我想要的，因为我必须在 UICollectionView 范围之外实现 ActionSheetDelegate。

我想在`performAction`方法内部实现 ActionSheet 以便于控制。
有什么建议吗？谢谢！

```
- (BOOL)collectionView:(QSCollectionView *)collectionView shouldShowMenuForItemAtIndexPath:(NSIndexPath *)indexPath{
    QSCell *cell = [collectionView cellForItemAtIndexPath:indexPath];
    UIActionSheet *deleteButton = [[UIActionSheet alloc] initWithTitle:[NSString stringWithFormat:@"Remove: %@",[collectionView.collectionData objectAtIndex:indexPath.row]] delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:@"OK" otherButtonTitles: nil];
    [deleteButton showFromRect:CGRectMake(0, 57, 57, 20) inView:cell animated:NO];
    return YES;
}
-(BOOL)collectionView:(QSCollectionView *)collectionView canPerformAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender{
    return YES;
}
-(void)collectionView:(QSCollectionView *)collectionView performAction:(SEL)action forItemAtIndexPath:(NSIndexPath *)indexPath withSender:(id)sender{
}
//ActionSheet
-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex{
    switch (buttonIndex) {
        case 0:
            NSLog(@"Delete");
            break;
        default:
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T13:55:26.357

您应该实现自己的`UIActionSheet`类并在`longPress`发生操作时显示该类。

这是 UIActionSheet 的[协议文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIModalViewDelegate_Protocol/UIActionSheetDelegate/UIActionSheetDelegate.html#//apple_ref/doc/uid/TP40006799)和[UIActionSheet 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIActionSheet_Class/Reference/Reference.html)。

# javascript - 如何从 div 标签捕获页面中的任何关键事件？

> ID：13525415
> 
> 赞同：3
> 
> 时间：2012-11-23T08:33:28.003
> 
> 标签：javascript

谁能告诉我如何在 div 标签中捕获关键事件？

我写了这段代码，但它不起作用？

```
<div id="SDiv" style="background-color: White; " onkeypress="kypress()">
     <asp:Label ID="LblSaveAndMoveNext" runat="server" Visible="False" Text="Save"></asp:Label>
</div>

<script type="text/javascript"> 
    function kypress() { EnableButtons(true);}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:41:48.350

只有可以接收焦点的元素，例如输入和其他与表单相关的元素，才会触发键事件。要强制一个`<div>`元素能够接收焦点，您可以使其内容可编辑，这可能不是您想要的，或者添加一个`tabindex`属性。使用值 0 会将元素放置在 Tab 键顺序中的默认位置。

```
<div id="SDiv" tabindex="0" style="background-color: White;"
     onkeypress="kypress()">
    ...
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:38:35.297

您必须拥有焦点才能触发按键事件。

或者您可以在文档对象上应用按键。

使用 jQuery：

```
$(document).keypress(function(){
     /*do something*/
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:53:18.973

您可以通过使用 contenteditable div 来克服它，就像这样。确保您返回 false 以防止 html 中的更改。

```
 <div  id="SDiv" contenteditable="true" 
    style="background-color: White; " tab-index="1" onkeydown="return keydown();">
       <asp:Label ID="LblSaveAndMoveNext" runat="server" Visible="False" Text="Save"></asp:Label>           
    </div>

    <script type="text/javascript">
        function keydown(){
            var keyCode = event.which;
            if(keyCode==13)
                document.write('You pressed Enter');
            //do your logic here
            return false;
        }
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-20T18:30:04.017

答案请参考线程“ [jQuery Event Keypress: Which key waspressed？](https://stackoverflow.com/questions/302122/jquery-event-keypress-which-key-was-pressed?rq=1) ”...

您需要设置 div 的 tabindex 属性，如下所示：

```
<div id="example" tabindex="1" /> 
```

# haskell - Haskell 中 Read 类的实例

> ID：13525417
> 
> 赞同：3
> 
> 时间：2012-11-23T08:33:38.907
> 
> 标签：haskell, type-inference

当我被卡住时，我才刚刚开始玩 Haskell。

我正在尝试使我的新数据类型（我们称之为`MyType`）类的实例`Read`。`Mytype`是一个类型构造函数，所以它需要另一个类型作为参数。我想写这种代码

```
 instance (Read a) => Read (MyType a) where
        readsPrec _ r = [foo (read r :: a ), r] 
```

但它给了我以下错误

```
Could not deduce (Read a2) arising from a use of `read' from the context (Read a). 
```

我认为既然 a is`Readable`我可以推断它，但显然我错了。有任何想法吗？

**编辑：** 我已将以前的代码更改为

```
readsPrec _ r = [foo (read r :: a ), ""] 
```

所以如果我输入：`read "myString" :: MyType a`它工作得很好。现在我希望如果我`read "myString"`在上下文中使用，我不应该指定要读取的类型。但问题是

```
bar (read myString) a 
```

其中`bar:: MyType a -> a -> MyType a`，我得到了 *Ambiguos 变量类型*。

有没有可能做这样的事情而不会出现这种错误？

我希望现在更清楚了，我正在尝试简化代码，但我希望我没有遗漏任何重要的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T09:01:11.850

如果写成，代码实际上会进行类型检查

```
实例 (Read a) => Read (MyType a) 其中
        readsPrec _ r = [(foo (读取 r),r)]

```

如果`foo`有类型`a -> MyType a`。`readsPrec`编译器可以从调用的预期类型签名中找出`foo`应该返回 a `MyType a`，因此（根据 的类型`foo`），表达式`read r`应该有 type `a`。

但是为什么当你用 注释它时它会失败`:: a`？因为类型变量对于它们出现的类型签名来说是本地的。所以与实例头中的`a`完全无关，并且您实际上是在说：表达式可以具有任意类型。但是任意类型没有实例，因此出现错误消息。在消息中，编译器重命名了内部以避免名称冲突。`a``read r :: a``read r``Read``a``a2`

但是，如果您添加`{-# LANGUAGE ScopedTypeVariables #-}`到模块标头，您的代码可以按预期工作。现在，`a`in`read r :: a`指的`a`是实例标头中的类型，一切顺利。

^(请注意，您没有正确使用 readsPrec，但我想这不是问题的一部分。)

# android - 相对布局内的 LinerLayout 不可见

> ID：13525419
> 
> 赞同：0
> 
> 时间：2012-11-23T08:33:52.470
> 
> 标签：android, android-linearlayout, android-relativelayout

这是我的代码，当我在 Eclipse 中对其进行编辑时，它会在图形布局窗口中显示包含两个按钮radia和tv的中间布局。但是当我在手机或平板电脑上运行它时，中间布局消失并且没有显示。请提供任何帮助，这是我的代码。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
xmlns:android1="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android1:orientation="vertical" >

<RelativeLayout
    android1:id="@+id/outerLay"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android1:background="@drawable/header" >

    <Button
        android1:id="@+id/logout"
        style="?android:attr/buttonStyleSmall"
        android1:layout_width="wrap_content"
        android1:layout_height="wrap_content"
        android1:layout_alignBottom="@+id/button6"
        android1:layout_alignParentLeft="true"
        android1:layout_alignParentTop="true"
        android1:background="@drawable/logout_a"
        android1:onClick="logoutClick"
        android1:textStyle="normal" />

    <Button
        android1:id="@+id/button6"
        style="?android:attr/buttonStyleSmall"
        android1:layout_width="wrap_content"
        android1:layout_height="wrap_content"
        android1:layout_alignParentRight="true"
        android1:layout_alignParentTop="true"
        android1:background="@drawable/search_a" />

    <LinearLayout
        android1:id="@+id/innerlay"
        android1:layout_width="wrap_content"
        android1:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android1:layout_alignBottom="@+id/button6"
        android1:layout_alignParentTop="true"
        android1:layout_centerHorizontal="true"
        android1:gravity="center"
        android1:orientation="horizontal" >

        <Button
            android1:id="@+id/television"
            style="?android:attr/buttonStyleSmall"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:background="@drawable/television_a"
            android1:onClick="television" />

        <Button
            android1:id="@+id/radio"
            style="?android:attr/buttonStyleSmall"
            android1:layout_width="wrap_content"
            android1:layout_height="wrap_content"
            android1:background="@drawable/radio_b"
            android1:onClick="radio" />
    </LinearLayout>
</RelativeLayout>

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
</ListView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:46:57.513

这里是相对布局

代替

```
android:layout_width="match_parent" 
```

您可以使用

```
android:layout_width="fill_parent" 
```

我希望这会奏效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T20:41:03.287

您所说的布局是不可见的，请将其 layout_height 或 layout_width 属性或两者都设置为“fill_parent”。

我希望这项工作，因为我得到了我的工作。

# xcode - Cocos2d: [CCSprite offset]: unrecognized selector sent to instance 0x9399cb0

> ID：13525423
> 
> 赞同：0
> 
> 时间：2012-11-23T08:34:21.613
> 
> 标签：xcode, cocos2d-iphone

我刚开始学习cocos2d-iphone 2.x。

当尝试制作 CCSprite 的动画时，会出现错误。

我的代码如下：

CCTexture2D *texture=[[CCTextureCache sharedTextureCache] addImage:@"dragon.png"];

```
CCSpriteBatchNode *spriteSheet=[CCSpriteBatchNode batchNodeWithTexture:texture];
[self addChild:spriteSheet];

NSMutableArray *animFrames=[[NSMutableArray alloc]init];
for (int i=1; i<8; i++) {
    [animFrames addObject:[CCSprite spriteWithTexture:spriteSheet.texture rect:CGRectMake(i*75, 0, 75, 70)]];
}

CCAnimation *flyAnim=[CCAnimation animationWithSpriteFrames:animFrames delay:0.1f];

CGSize winSize=[CCDirector sharedDirector].winSize;

CCSpriteFrame *frame3=[CCSpriteFrame frameWithTexture:texture rectInPixels:CGRectMake(0, 0, 75, 70) rotated:NO offset:CGPointZero originalSize:CGSizeMake(75, 70)];
self.dragon=[CCSprite spriteWithSpriteFrame:frame3];
_dragon.position=ccp(winSize.width/2,winSize.height/2);
self.flyAction=[CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:flyAnim]];
[_dragon runAction:_flyAction];
[spriteSheet addChild:_dragon]; 
```

有什么不对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T11:29:42.737

在您的循环中，该行：

```
[animFrames addObject:[CCSprite spriteWithTexture:spriteSheet.texture rect:CGRectMake(i*75, 0, 75, 70)]]; 
```

您应该添加 CCSpriteFrame 对象而不是 CCSprite。当动作运行时，动作管理器认为这些是 spriteFrame 对象并向它们发送该类的消息。

通常在 .plist 文件中声明精灵帧，比如说“dragon.plist”。可以使用 zwoptex、texturePacker 或类似工具创建 plist（vi 可以正常工作）。然后你可以这样做：

```
[[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"dragon.plist"];
NSMutableArray *frames = [NSMutableArray arrayWithCapacity:numberOfFrames];
for (NSUInteger i = 1; i <= 8; i++) {
    NSString *frName = [NSString stringWithFormat:@"dragon%i.png",i];
    CCSpriteFrame *frr = [[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:frName];
    if (frr) {
        [frames addObject:frr];
    } else {
        MPLOGERROR(@"*** No frame named [%@], bailing out.", frName);
        return nil;
    }
    [frames addObject:frr];
} 
```

# sql - 使用 TSQL JOIN 返回正确的记录

> ID：13525428
> 
> 赞同：1
> 
> 时间：2012-11-23T08:34:44.943
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有声明 A 和声明 B。

语句 A 返回 5 条记录，语句 B 返回 1 条记录。

**声明 A**

```
 SELECT DISTINCT    
    Outlet.cCode,
    Employee.cEmployeeNumber,
    FROM  Outlet 
    INNER JOIN Employee ON EmployeeOutlet.iEmployee = Employee.iID 
    WHERE cCOde = 123 
```

**声明 B**

```
 Select OutletCode, RSMcode, ASMcode, FMcode from Employee_Hierarchy
 Where OutletCode = 123 
```

现在只需要返回 Statement A 中的 3 条记录，其中 Employee.cEmployeeNumber 等于 RSMcode、ASMcode 或 FMcode……

现在，如果我在其中添加以下 JOIN 只会返回 1 条记录，我该如何满足仍然需要的其他 2 条记录？

```
 SELECT DISTINCT    
        Outlet.cCode,
        Employee.cEmployeeNumber,
        FROM  Outlet 
        INNER JOIN Employee ON EmployeeOutlet.iEmployee = Employee.iID 
        INNER JOIN Employee_Hierarchy as EH ON EH.RSMcode = Employee.cEmployeeNumber and EH.OutletCode = Outlet.cCode
        WHERE Outlet.cCode = 123 
```

当我为每个 RSMcode 和 ASMcode 和 FMcode 添加一个 JOIN 时，它什么也不返回.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:19:28.097

这个怎么样？

```
SELECT DISTINCT    
    Outlet.cCode,
    Employee.cEmployeeNumber,
    FROM  Outlet 
    INNER JOIN Employee ON EmployeeOutlet.iEmployee = Employee.iID 
    INNER JOIN Employee_Hierarchy as EH ON EH.OutletCode = Outlet.cCode AND (EH.RSMcode = Employee.cEmployeeNumber OR EH.ASMcode = Employee.cEmployeeNumber OR EH.FMcode = Employee.cEmployeeNumber)
WHERE Outlet.cCode = 123 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:51:54.163

```
INNER JOIN Employee_Hierarchy as EH ON EH.RSMcode = Employee.cEmployeeNumber and outletCode = Outlet.cCode 
```

将这段代码更改为

```
INNER JOIN Employee_Hierarchy as EH ON EH.OutletCode = Outlet.cCode 
WHERE 
Employee.cEmployeeNumber=EH.RSMcode OR 
Employee.cEmployeeNumber=EH.ASMcode OR
Employee.cEmployeeNumber=EH.FMcode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:43:22.663

只是一个猜测

```
SELECT DISTINCT    
        Outlet.cCode,
        Employee.cEmployeeNumber,
        FROM  Outlet 
        INNER JOIN Employee ON EmployeeOutlet.iEmployee = Employee.iID 
        INNER JOIN Employee_Hierarchy as EH ON EH.RSMcode = Employee.cEmployeeNumber and EH.OutletCode = Outlet.cCode
        and EH.OutletCode = 123 
```

# c++ - C++ 11 的 Clang++ 3.3 中的线程支持

> ID：13525429
> 
> 赞同：2
> 
> 时间：2012-11-23T08:34:46.303
> 
> 标签：c++, multithreading, c++11, pthreads, clang

这篇文章底部的代码编译得很好，但会生成一个无用的二进制文件

```
$ clang++ -v
clang version 3.3 (trunk 168461)
Target: x86_64-unknown-linux-gnu
Thread model: posix 
```

当给出这个命令时

```
clang++ -std=c++11 -pthread -s -O3 -DNDEBUG source.cpp -o source 
```

二进制文件总是生成这个

```
terminate called after throwing an instance of 'std::system_error'
  what():  Operation not permitted
Aborted (core dumped) 
```

我不明白的是：

*   如果 C++11 在标准中包含线程模型，为什么我需要链接 POSIX 线程库，为什么标志`-std=c++11`还不够？
*   如果 clang++ 支持`-pthread`与否，根据我所阅读的内容，它应该支持 pthreads

谢谢。

* * *

```
#include <iostream>
#include <thread>

void f()
{
  std::cout << "Hello World\n";
}

int main()
{
  std::thread t(f);
  t.join();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T08:54:12.983

你应该使用这样的命令：

clang++ -std=c++11 -pthread -stdlib=libstdc++ threadEx.cpp

您忘记添加库。libc++ 不适用于 ubuntu 12.04、clang3.3，但我使它适用于 clang3.3 和 g++ 4.7.2（g++ 4.6.3 也不起作用）。两者都有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:58:38.760

在 thread.cc 中，thread::_M_start_thread() 中有以下代码：

```
if (!__gthread_active_p())
  __throw_system_error(int(errc::operation_not_permitted)); 
```

这就是它为你而炸毁的原因 --- libgcc 检查 pthread_cancel() 是否存在，如果存在则只返回 1。您没有指定 -pthread，因此没有 pthread_cancel()。

为什么构建时需要指定-pthread？我猜这是因为替代方案是一直假设 -pthread ，这会导致不必要的开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:10:53.557

在编译代码时使用该`-pthread`标志会产生巨大的差异，请参阅[gcc - 在编译时 -pthread 标志的意义](https://stackoverflow.com/q/2127797/341970)。

~~根据对该问题的公认答案[What is g++'s -pthread equiv in clang?](https://stackoverflow.com/q/2391194/341970) ，铿锵声支持`-pthread`。~~

* * *

实际上，您发布的这一行表明您正在使用 pthreads：

```
Thread model: posix 
```

[Pthreads 不会消失](https://stackoverflow.com/q/1273572/341970)，我非常怀疑 Clang / LLVM 是否会从头开始实现一个新的线程库。他们为什么会？该平台的原生库已经足够成熟。

* * *

抱歉，我无法为您提供更多帮助：我的机器上没有安装 clang，并且您的代码在我的带有 gcc 4.6 的机器上运行良好。

# c# - 重新计算其他表单值：textbox_Leave 或 textbox_TextChanged？

> ID：13525431
> 
> 赞同：3
> 
> 时间：2012-11-23T08:34:56.487
> 
> 标签：c#, .net, winforms, textbox, keyboard-events

我目前正在开发一个 WinForms 项目，并且表单上有一些文本框用于接受用户输入。根据用户输入的值，计算表单上其他字段的值。因此，我很困惑我应该使用两个事件处理程序中的哪一个来执行计算：`textbox_Leave`还是`textbox_TextChanged`？

由于`textbox_TextChanged`每次用户更改文本框中的字符时都会触发，所以我觉得在处理器使用方面非常昂贵，不是吗？另一方面，`textbox_Leave`仅在用户退出文本框后执行。但是，该`TextChanged`事件确实为用户提供了更好的响应体验。但是这种体验值得我们进行额外的处理吗？如果我使用 ，我的项目能否在处理器速度较慢的旧系统上正常运行`TextChanged`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:41:52.163

首先，我会说用简单的案例来测试它。如果您的计算不是太重，那么首先可能不会有问题。

如果计算真的很繁重，而你仍然想要更人性化的解决方案，你可以使用定时器来实现一个节流机制：在 TextChanged 事件中，使用 Tick 处理程序启动一个定时器，该定时器在一定延迟后开始计算；如果在计时器开始之前收到另一个 TextChanged 事件，请重置计时器。当然，这将涉及计时器事件和 textchanged 事件之间的一些同步和可能的锁定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:42:10.500

这里的诀窍是如果你不需要就不要处理，我通常会安排“繁重的东西”，如果**TextBox**没有再次更改，则在一段时间后运行它。像这样的东西：

*   文本框已更改，取消之前的预定更新
    *   **以x** *毫秒*为单位安排更新（这取决于应用程序类型）
*   文本框离开，立即更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T04:21:12.503

根据您尝试执行的计算的描述，我认为即使在较旧的计算机上您也不会看到问题。与用户键入内容的速度相比，您可能低估了计算机的功能。

假设为了争论，一个快速打字员每分钟可以输入 100 个单词。这大约是 800 个字符，这意味着该事件每秒将触发大约 13 次。

因此，餐巾纸数学告诉我们，在用户键入另一个字符之前，我们有大约 76 毫秒的时间来执行计算并在屏幕上获得结果。

这似乎是[过早优化](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)的情况。作为一般规则，您不应该预先优化代码，因为我敢打赌您[不会需要它](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)。

也就是说，我曾经写过一个名为 DelayedAction 的类，如果您确实需要优化，它将满足您的需求。我现在没有代码，但快速谷歌发现了一些非常相似的东西。

[http://www.codeproject.com/Tips/240274/Execute-later-for-delayed-action](http://www.codeproject.com/Tips/240274/Execute-later-for-delayed-action)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:42:43.787

我更喜欢使用`Validated`事件来执行依赖于输入的计算。`TextChanged`将在用户仍在输入其值时触发，并且可能在输入仍然无效时触发。如果您处理该`Validating`事件，则可以防止在文本框中输入无效值，并确保`Validated`仅在输入有效时才会触发。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T08:45:12.867

如果您正在寻找用户进行实时计算，我会使用 textChanged。仅当光标离开 textBox 时才更改值可能会让用户感到困惑和沮丧。

在不知道您的计算有多复杂的情况下，很难准确地说出成本。如果您担心经常发生这种情况，则有几种可能的解决方案。如果实时性不重要，那么不要使用“离开”事件，而是为用户提供“计算”按钮，并寻找 Enter 按键。这对您的最终用户来说比挥动光标来计算要直观得多。

另一种可能的解决方案是实现一个计时器，该计时器启动 textChanged 事件（或者如果它有时间则重置），并且仅在它到期时执行计算。这样一来，快速打字员就不会在短时间内进行大量计算，但您仍然可以近乎实时地提供用户体验，而无需用户按其他任何操作。

# php - symfony (propel) 无法生成模式

> ID：13525433
> 
> 赞同：0
> 
> 时间：2012-11-23T08:35:02.990
> 
> 标签：php, symfony-1.4, propel, phing

我正在使用 symfony 1.4.19 和 php 5.4.8。我认为将php从5.3升级到5.4后出现了问题......

当我生成 schema.yml 时

```
php symfony propel:build-schema 
```

我收到一个错误：

```
PHP Strict Standards:  Declaration of UnixFileSystem::getBooleanAttributes() should be compatible with FileSystem::getBooleanAttributes($f) 
```

到目前为止，我已经进行了一些搜索，我了解到更新 phing 可能会有所帮助，但我已经有了 2.4.13 版本，这是最新版本，错误仍然出现。

以前有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:41:00.680

我真的建议你切换到 sf1.4 的官方 propel 插件：[sfPropelORMPlugin](https://github.com/propelorm/sfPropelORMPlugin)。

您将拥有最后一个 Propel 1.6 而不是 1.4。sfPropelORMPlugin 现在由 Propel 人员正式维护。

顺便说一句，这个问题在 sfPropelORMPlugin 中得到修复：[https ://github.com/propelorm/sfPropelORMPlugin/issues/147](https://github.com/propelorm/sfPropelORMPlugin/issues/147)

# python - django中的函数问题

> ID：13525434
> 
> 赞同：-2
> 
> 时间：2012-11-23T08:35:31.067
> 
> 标签：python, django, function, django-views

我是 Django 的新手。我在其中做了一个小项目，效果很好。

现在我想要的是我在 view.py 文件中创建了一些函数，现在我想在其他文件中调用这些函数，比如 a.py。所以我怎么能做到这一点，任何人都有一些想法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:43:53.807

在`a.py`做：

```
from views import function1, function2

def a_function_one():
   ...
   #call function1 from views
   function1() 
```

# javascript - 为什么 array[0] 使用 jQuery 返回与 array.first 不同的对象，为什么我不能使用 .val()？

> ID：13525440
> 
> 赞同：5
> 
> 时间：2012-11-23T08:35:49.287
> 
> 标签：javascript, jquery

我正在使用 jQuery 选择一组输入对象，当我在选择一个数组元素后尝试将多个方法链接在一起时遇到了一个有趣的问题。谁能向我解释为什么我会出现这种行为？

```
jQuery('.custom-size').first().find('input:hidden')
returns =>  

[<input id=​"custom_order_custom_sizes_attributes_0_size_id" name=​"custom_order[custom_sizes_attributes]​[0]​[size_id]​" type=​"hidden" value=​"138">​
, 
<input name=​"custom_order[custom_sizes_attributes]​[0]​[_destroy]​" type=​"hidden" value=​"0">​
] 
```

`.first()`如果我使用 jQuery或选择其中一个元素`.last()`然后调用`.val()`，我会得到`"138"`.

当我尝试使用数组中的某个位置时，我可以返回数组的元素：

```
var input = jQuery('.custom-size').first().find('input:hidden')[1]
returns => 
<input name=​"custom_order[custom_sizes_attributes]​[0]​[_destroy]​" type=​"hidden" value=​"0"> 
```

但是我不能调用`.val()`这个对象。相反，我收到此错误消息：

```
TypeError: Object #<HTMLInputElement> has no method 'val' 
```

我可以`.slice(x,y)`用来返回单个元素，但这似乎很愚蠢。我在这里想念什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T08:41:12.240

如果您使用括号表示法和索引访问 jQuery 对象，它将返回该索引处的原始 DOM 元素。DOM 元素没有任何 jQuery 方法。

`.first`，`.last`或者`.eq`另一方面返回一个 jQuery 对象。要获取特定索引处的 jQuery 对象`n`，请使用`$(...).eq(n)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T08:41:28.793

以下代码：

```
$(".something")[0] 
```

从 jQuery 集合中获取单个*DOM 元素。*这段代码和你做的一样

```
document.getElementsByClassName("something")[0] 
```

检索到的 DOM 元素没有`val()`方法，因为它不是 jQuery 对象。

为了从 jQuery 集合中获取第一个*jQuery 对象*，您可以使用[`:eq()`](http://api.jquery.com/eq-selector/)选择器（或[`.eq()`](http://api.jquery.com/eq/)方法）或[`:first`](http://api.jquery.com/first-selector/)选择器（或[`.first()`](http://api.jquery.com/first/)方法）：

```
$(".something:eq(0)");   // $(".something").eq(0);
$(".something:first");   // $(".something").first(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:41:20.277

index ( `[1]`) 的本地位置返回指定的 DOM 元素。
jQuery 函数，比如`.first()`返回一个 jQuery 对象（包含在 jQuery 皮肤中的相当多的 DOM 元素），它具有那些其他函数。

# android - Android 4.x 中的 SSL 客户端身份验证

> ID：13525445
> 
> 赞同：7
> 
> 时间：2012-11-23T08:36:32.643
> 
> 标签：android, https, ssl-certificate, authentication, httpsurlconnection

我想创建一个连接到服务器的应用程序。此服务器使用 SSL 客户端身份验证。应用程序的用户应该能够选择证书并允许使用它，就像它在浏览器应用程序中实现一样。

在浏览器应用程序中，身份验证按预期工作，因此我使用的证书是有效的。

当我尝试在我的应用程序中连接时，出现以下错误：

```
javax.net.ssl.SSLHandshakeException: javax.net.ssl.SSLProtocolException:
SSL handshake terminated: ssl=0x2a2d3b38:
Failure in SSL library, usually a protocol error
error:14094410:SSL routines:SSL3_READ_BYTES:sslv3 alert handshake failure
(external/openssl/ssl/s3_pkt.c:1290 0x2a2df880:0x00000003) 
```

我试图按照我的实现的 android 文档。

*   [统一 ICS 中的密钥存储访问](http://android-developers.blogspot.ch/2012/03/unifying-key-store-access-in-ics.html)
*   [HttpsURL连接](http://developer.android.com/reference/javax/net/ssl/HttpsURLConnection.html)

这是我的示例活动的代码：

```
public class ClientCertificateActivity extends Activity implements
    KeyChainAliasCallback {

protected static final String TAG = "CERT_TEST";
private String alias;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    choseCertificate();
    LinearLayout layout = new LinearLayout(this);
    Button connectToServer = new Button(this);
    connectToServer.setText("Try to connect to Server");
    connectToServer.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    connectToServer.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            connectToServer();
        }
    });
    layout.addView(connectToServer);
    addContentView(layout, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
}

protected void connectToServer() {
    final Context ctx = this;
    new AsyncTask<Void, Void, Boolean>() {

        private Exception error;

        @Override
        protected Boolean doInBackground(Void... arg) {
            try {
                PrivateKey pk = KeyChain.getPrivateKey(ctx, alias);
                X509Certificate[] chain = KeyChain.getCertificateChain(ctx,
                        alias);

                KeyStore keyStore = KeyStore.getInstance("AndroidCAStore");
                TrustManagerFactory tmf = TrustManagerFactory
                        .getInstance(TrustManagerFactory
                                .getDefaultAlgorithm());
                tmf.init(keyStore);

                SSLContext context = SSLContext.getInstance("TLS");
                context.init(null, tmf.getTrustManagers(), null);

                URL url = new URL("https://usecert.example.com/");
                HttpsURLConnection urlConnection = (HttpsURLConnection) url
                        .openConnection();
                urlConnection.setSSLSocketFactory(context
                        .getSocketFactory());
                InputStream in = urlConnection.getInputStream();

                return true;
            } catch (Exception e) {
                e.printStackTrace();
                error = e;
                return false;
            }
        }

        @Override
        protected void onPostExecute(Boolean valid) {
            if (error != null) {
                Toast.makeText(ctx, "Error: " + error.getMessage(),
                        Toast.LENGTH_LONG).show();
                return;
            }
            Toast.makeText(ctx, "Success: ", Toast.LENGTH_SHORT).show();
        }
    }.execute();

}

protected void choseCertificate() {
    KeyChain.choosePrivateKeyAlias(this, this,
            new String[] { "RSA", "DSA" }, null, "m.ergon.ch", 443, null);
}

@Override
public void alias(String alias) {
    this.alias = alias;
}
} 
```

异常被抛出`urlConnection.getInputStream();`

这是服务器和客户端之间握手的捕获。 ![SSL 握手的网络捕获](../Images/85d2e360060f7eba64a8a4e55f04c990.png)

感谢您的任何建议和提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:54:34.273

您永远不会使用您的私钥初始化 KeyManager，因此客户端身份验证无法获取它。

您必须实施 X509KeyManager 才能返回您的 PrivateKey 和一些硬编码的别名。这是库存电子邮件应用程序 (ICS+) 中的一个供参考。您可能需要对其进行一些修改，但应该很容易理解：基本上它只是将密钥、别名和证书链保存到字段并通过适当的方法返回它们（`StubKeyManager`只是为未实现和不需要的方法抛出异常）：

```
public static class KeyChainKeyManager extends StubKeyManager {
    private final String mClientAlias;
    private final X509Certificate[] mCertificateChain;
    private final PrivateKey mPrivateKey;

    public static KeyChainKeyManager fromAlias(Context context, String alias)
            throws CertificateException {
        X509Certificate[] certificateChain;
        try {
            certificateChain = KeyChain.getCertificateChain(context, alias);
        } catch (KeyChainException e) {
            logError(alias, "certificate chain", e);
            throw new CertificateException(e);
        } catch (InterruptedException e) {
            logError(alias, "certificate chain", e);
            throw new CertificateException(e);
        }

        PrivateKey privateKey;
        try {
            privateKey = KeyChain.getPrivateKey(context, alias);
        } catch (KeyChainException e) {
            logError(alias, "private key", e);
            throw new CertificateException(e);
        } catch (InterruptedException e) {
            logError(alias, "private key", e);
            throw new CertificateException(e);
        }

        if (certificateChain == null || privateKey == null) {
            throw new CertificateException("Can't access certificate from keystore");
        }

        return new KeyChainKeyManager(alias, certificateChain, privateKey);
    }

    private KeyChainKeyManager(
            String clientAlias, X509Certificate[] certificateChain, 
            PrivateKey privateKey) {
        mClientAlias = clientAlias;
        mCertificateChain = certificateChain;
        mPrivateKey = privateKey;
    }

    @Override
    public String chooseClientAlias(String[] keyTypes, Principal[] issuers, Socket socket) {
         return mClientAlias;
    }

    @Override
    public X509Certificate[] getCertificateChain(String alias) {
          return mCertificateChain;
    }

    @Override
    public PrivateKey getPrivateKey(String alias) {
            return mPrivateKey;
    }
} 
```

# spring - 用于乘法参数的弹簧验证器

> ID：13525451
> 
> 赞同：0
> 
> 时间：2012-11-23T08:36:59.917
> 
> 标签：spring, validation

我的控制器中有以下 GET 请求：

```
@Controller
public class TestController {

    @InitBinder
    protected void initBinder(WebDataBinder binder) {
        binder.setValidator(new ProfileTokenValidator());
    }

    @RequestMapping(value = "/more/{fromLocation:.+}/to/{toLocation:.+}", method = RequestMethod.GET)
    @ResponseBody
    public void copyProfile(@PathVariable @Valid String fromLocation, @PathVariable String toLocation) {
    ...
    }
} 
```

我有一个简单的字符串 fromLocation 验证器

```
public class ProfileTokenValidator implements Validator{

    @Override
    public boolean supports(Class validatedClass) {
        return String.class.equals(validatedClass);
    }

    @Override
    public void validate(Object obj, Errors errors) {
        String location = (String) obj;

        if (location == null || location.length() == 0) {
            errors.reject("destination.empty", "Destination should not be empty.");
        }
    }

} 
```

当fromLocation与toLocation相同时，我需要为案例提供验证的问题。请提供建议或其他帮助，有没有办法编写验证器来同时检查两个参数以获取获取请求？谢谢。

> 块引用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:37:00.400

那是个坏主意。我采取了另一种方式，并在控制器中创建了简单的方法来验证我的参数。如果出现问题，它会引发特殊异常，由书面处理程序处理。此处理程序返回 400 状态错误请求和在抛出之前定义的消息。所以它的行为与自定义验证器完全一样。此链接的文章提供了很大帮助[http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/](http://doanduyhai.wordpress.com/2012/05/06/spring-mvc-part-v-exception-handling/)

以下是我的代码：

```
@Controller
public class TestController {

    @RequestMapping(value = "/more/{fromLocation:.+}/to/{toLocation:.+}", method = RequestMethod.GET)
    @ResponseBody
    public void copyProfile(@PathVariable String fromLocation, @PathVariable String toLocation) {
        validateParams(fromLocation, toLocation);
        ...
    }

    private void validateParams(String fromLocation, String toLocation) {
        if(fromLocation.equals(toLocation)) {
            throw new BadParamsException("Bad request: locations should differ.");
        }
    }

    @ExceptionHandler(BadParamsException.class)
    @ResponseStatus(value = HttpStatus.BAD_REQUEST)
    @ResponseBody
    public String handleBadParamsException(BadParamsException ex) {
        return ex.getMessage();
    }

    @ResponseStatus(value = HttpStatus.BAD_REQUEST)
    public static class BadParamsException extends RuntimeException {
        public BadParamsException(String errorMessage) {
            super(errorMessage);
        }
    }
} 
```

# header - 如何处理未知长度的标头（TFTP 相关）

> ID：13525452
> 
> 赞同：0
> 
> 时间：2012-11-23T08:37:01.733
> 
> 标签：header, tftp

它可能也与其他问题有关。我需要用 C 语言（仅八位组模式）构建一个简单的 TFTP 服务器，它可以与当今可用的大多数 TFTP 客户端一起使用（我只需要实现服务器）。

```
opcode   //2 byte
filename // string (unknown size)
0        // 1 byte
mode     // string (unknows size, max 9 chars considering 'netascii')
0        // 1 byte 
```

但我遇到了一个问题：RRQ/WRQ 数据包有一个未知的长度字段“文件名”（和“模式”）。因为我的服务器需要是通用的，我该如何实现这个选项？创建一个大得离谱的缓冲区并等到 recvfrom() 返回 0？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:37:07.043

使缓冲区不大于以太网数据包的有效负载大小...使用 TFTP recvfrom 不会返回大于该大小的缓冲区...

# android - 安卓手机通过cgi-http方式（dlink dcs-942l）访问IPCam的sd卡

> ID：13525454
> 
> 赞同：1
> 
> 时间：2012-11-23T08:37:13.090
> 
> 标签：android, cgi, android-videoview, http-authentication, ip-camera

我打算`security`在我的android手机上开发一个ipcam应用程序，需要通过HTTP请求访问ipcam的SD卡，播放保存的视频，我有两个问题：

*   当使用浏览器访问特定视频（我知道特定的 URL）时，它会询问我登录和视频启动，而在我的应用程序中，我不知道如何使用特定的 http 会话实现，并且 VideoView 不会启动视频（我假设它需要身份验证）。

我解决了授权！！！

*   我想创建一个 explorer_path-like 来选择使用视频视图重现的视频。我映射了 ip-cam e 电话之间的 http/tcp 交互，但我不知道在服务器响应 cam 发送如何 html 文本来构建网页之后如何获取 http 消息

    ```
    <formatsdcard>Format SD Card</formatsdcard>
    <description1>Click this icon to automatically format the SD Card and create folder for video.</description1>
    <description2>If the recorded files are stored on the SD Card,click on the recorded folder and choose the recorded file you would like to view.</description2>
    <description3>If video files are stored on the SD Card, click on the video folder and choose the video file you would like to view.</description3>
    <description4>Reloads the file and folder information from the SD Card.</description4>
    <format>Format SD Card - </format>
    <view>View Recorded files -</view>
    <playback>Playback Recorded Video - </playback>
    <refresh>Refresh - </refresh>

    <totalcapacity></totalcapacity>
    <availablespace></availablespace>
    <usedspace>xxxxxx</usedspace>
    <modelUsedSpace>0</modelUsedSpace>
    <folderstring>
    VIDEO1.avi:f:CAMPO1*VIDEO2.avi:f:CAMPO2*...OTHER VIDEO IN THE CURRENT DIRECTORY
    </folderstring>
    <folderpath>PARENT-DIRECTORY/CURRENT-DIRECTORY</folderpath>
    <filesperpage>5</filesperpage>
    <currentpage>1</currentpage>
    <totalpages>1</totalpages>
    </playback>
    </config>
    </root> 
    ```

我想获取以下信息：

```
 <folderstring>
    VIDEO1.avi:f:CAMPO1*VIDEO2.avi:f:CAMPO2*...OTHER VIDEO IN THE CURRENT DIRECTORY
    </folderstring>
    <folderpath>PARENT-DIRECTORY/CURRENT-DIRECTORY</folderpath> 
```

# eclipse - 使用 Eclipse 拒绝项目访问

> ID：13525456
> 
> 赞同：13
> 
> 时间：2012-11-23T08:37:33.013
> 
> 标签：eclipse, maven-2

我有一个从 Git 存储库克隆的 Maven 项目（由 5 个子项目组成）。

当我编译（mvn clean install）它们时，我没有收到任何错误，但是，当我在 Eclipse 中导入它们并尝试在主项目上右键单击 > Maven > 更新项目时，我在每个子项目上都收到带有 (Access Denied) 的错误消息（不在主文件夹上，顺便说一句，它是包含子项目文件夹的父文件夹）。

我已经检查了文件夹属性并为每个用户提供了对每个目录和文件的完全访问权限，我实际上正在修改文件并开发应用程序，但是当我尝试更新项目时仍然收到这些错误消息。

有没有我没有看到的明显解决方案？

附带说明：我的同事也有同样的问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-11-22T14:30:51.803

我在 Windows 8 64bit 上遇到了同样的问题。问题是该文件`.classpath`设置了隐藏标志。在我删除隐藏标志后，一切都很好..

您只需删除 .classpath 和 .project 然后继续操作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T10:49:37.420

这可能是由以下原因引起的：

*   该项目位于网络驱动器上
*   文件夹或任何父文件夹的权限错误
*   防止未知可执行文件访问硬盘的病毒扫描程序

要检查是否是权限问题，请在硬盘根目录和主目录中创建项目。

要检查病毒扫描程序是否有问题，请将其禁用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-03T13:50:51.200

在我的（Windows 7 64 位）案例中，这是由

`.classpath`打开安全块的文件。

只需右键单击`.classpath`文件，选择属性并取消阻止它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-22T15:30:47.563

这也可以通过重新启动 Eclipse 来解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-01T18:19:39.253

这是通过通过 Windows 资源管理器从项目的顶部文件夹中删除隐藏标志来解决的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-29T01:50:42.880

我通过在 \.eclipse 上取消隐藏整个文件夹来修复它。

选择所有文件夹，右键单击>属性>属性-取消选中隐藏

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-07T08:37:04.043

视窗 10：

`C:\Users\<user_name>\`应该有`.m2`和`.eclipse`文件夹。

如果它们被隐藏，请右键单击并取消隐藏它们。在子文件夹和文件中应用更改。这应该为我解决问题。

# c# - LINQ to XML：忽略属性的大小写

> ID：13525459
> 
> 赞同：6
> 
> 时间：2012-11-23T08:38:01.767
> 
> 标签：c#, .net, xml, linq-to-xml, casing

我使用 LINQ to XML 处理由 Autodesk 公司创建的 PackageContents.xml 文件。公司在[这里](http://exchange.autodesk.com/autocad/enu/online-help/ACD/2012/ENU/pages/WS1a9193826455f5ff-4fe3487312ce8a8dba5-7feb.htm)定义了这个 XML 文件的结构，但没有 XSD 模式。

我有一个问题：这家公司违反了他的规则......元素和属性的情况通常是无效的。例如，可以定义“Url”属性而不是“URL”属性（不同的大小写）。

但是[大小写对于 XML](http://msdn.microsoft.com/ru-ru/library/ms256152.aspx)（或[英文](http://msdn.microsoft.com/en-us/library/ms256152.aspx)）很重要：

> 与元素名称一样，属性名称区分大小写，并且必须以字母或下划线开头。

“URL”不等于“Url” - 找不到此类属性。

我可以通过 LINQ to XML（或其他）解决这个问题，还是不能？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T09:46:18.410

虽然`myXelement.Attribute("URL")`需要正确的案例是正确的，但没有什么能阻止你做

```
var attribute = x.Attributes()
                 .SingleOrDefault(xa => 
                     string.Equals(xa.Name.LocalName, 
                                   "Url", 
                                   StringComparison.InvariantCultureIgnoreCase)); 
```

将其包装在合适的扩展或静态辅助方法中，您的消费代码应该不会太糟糕。

# c++ - ReadProcessMemory 比 SharedMemory 上的 memcpy 快

> ID：13525462
> 
> 赞同：4
> 
> 时间：2012-11-23T08:38:08.567
> 
> 标签：c++, boost

我正在尝试通过使用共享内存进行通信来改进我的多进程应用程序。我正在通过简单的测试进行一些分析，结果出现了一些奇怪的东西。当我试图复制存储在 SharedMemory 中的数据时，使用 ReadProcessMemory 比使用 Memcopy 更快。

我知道我不应该那样使用 SharedMemory（最好直接在共享内存中读取），但我仍然想知道为什么会这样。通过进一步调查，另一件事出现了：如果我在同一个共享内存区域（实际上是同一个区域）上连续执行 2 次 memcpy，第二个副本比第一个快两倍。

这是显示问题的示例代码。在此示例中，只有一个进程，但问题仍然存在。从共享内存区域执行 memcpy 比在我自己的进程上执行同一区域的 ReadProcessMemory 慢！

```
#include <tchar.h>
#include <basetsd.h>
#include <iostream>

#include <boost/interprocess/mapped_region.hpp>
#include <boost/interprocess/windows_shared_memory.hpp>
#include <time.h>
namespace bip = boost::interprocess;
#include <boost/asio.hpp>

 bip::windows_shared_memory* AllocateSharedMemory(UINT32 a_UI32_Size)
{
    bip::windows_shared_memory* l_pShm = new bip::windows_shared_memory (bip::create_only, "Global\\testSharedMemory", bip::read_write, a_UI32_Size);
    bip::mapped_region l_region(*l_pShm, bip::read_write);
    std::memset(l_region.get_address(), 1, l_region.get_size());
    return l_pShm;
}

//Copy the shared memory with memcpy
void CopySharedMemory(UINT32 a_UI32_Size)
{
    bip::windows_shared_memory m_shm(bip::open_only, "Global\\testSharedMemory", bip::read_only);
    bip::mapped_region l_region(m_shm, bip::read_only);
    void* l_pData = malloc(a_UI32_Size);
    memcpy(l_pData, l_region.get_address(), a_UI32_Size);
    free(l_pData);
}

//Copy the shared memory with ReadProcessMemory
void ProcessCopySharedMemory(UINT32 a_UI32_Size)
{
    bip::windows_shared_memory m_shm(bip::open_only, "Global\\testSharedMemory", bip::read_only);
    bip::mapped_region l_region(m_shm, bip::read_only);
    void* l_pData = malloc(a_UI32_Size);
    HANDLE hProcess = OpenProcess( PROCESS_ALL_ACCESS, FALSE,(DWORD) GetCurrentProcessId());
    size_t l_szt_CurRemote_Readsize;
    ReadProcessMemory(hProcess,
                      (LPCVOID)((void*)l_region.get_address()),
                      l_pData,
                      a_UI32_Size,
                      (SIZE_T*)&l_szt_CurRemote_Readsize);
    free(l_pData);
}

// do 2 memcpy on the same shared memory
void CopySharedMemory2(UINT32 a_UI32_Size)
{
    bip::windows_shared_memory m_shm(bip::open_only, "Global\\testSharedMemory", bip::read_only);
    bip::mapped_region l_region(m_shm, bip::read_only);
    clock_t begin = clock();
    void* l_pData = malloc(a_UI32_Size);
    memcpy(l_pData, l_region.get_address(), a_UI32_Size);
    clock_t end = clock();
    std::cout << "FirstCopy: " << (end - begin) * 1000 / CLOCKS_PER_SEC << " ms" << std::endl; 
    free(l_pData);

    begin = clock();
    l_pData = malloc(a_UI32_Size);
    memcpy(l_pData, l_region.get_address(), a_UI32_Size);
    end = clock();
    std::cout << "SecondCopy: " << (end - begin) * 1000 / CLOCKS_PER_SEC << " ms" << std::endl; 
    free(l_pData);
}

int _tmain(int argc, _TCHAR* argv[])
{
    UINT32 l_UI32_Size = 1048576000;
    bip::windows_shared_memory* l_pShm = AllocateSharedMemory(l_UI32_Size);
    clock_t begin = clock();
    for (int i=0; i<10 ; i++)
        CopySharedMemory(l_UI32_Size);
    clock_t end = clock();
    std::cout << "MemCopy: " << (end - begin) * 1000 / CLOCKS_PER_SEC << " ms" << std::endl; 
    begin = clock();
    for (int i=0; i<10 ; i++)
        ProcessCopySharedMemory(l_UI32_Size);
    end = clock();
    std::cout << "ReadProcessMemory: " << (end - begin) * 1000 / CLOCKS_PER_SEC << " ms" << std::endl; 

    for (int i=0; i<10 ; i++)
        CopySharedMemory2(l_UI32_Size);

    delete l_pShm;
    return 0;
} 
```

这是输出：

```
MemCopy: 8891 ms
ReadProcessMemory: 6068 ms

FirstCopy: 796 ms
SecondCopy: 327 ms
FirstCopy: 795 ms
SecondCopy: 328 ms
FirstCopy: 780 ms
SecondCopy: 344 ms
FirstCopy: 780 ms
SecondCopy: 343 ms
FirstCopy: 780 ms
SecondCopy: 327 ms
FirstCopy: 795 ms
SecondCopy: 343 ms
FirstCopy: 780 ms
SecondCopy: 344 ms
FirstCopy: 796 ms
SecondCopy: 343 ms
FirstCopy: 796 ms
SecondCopy: 327 ms
FirstCopy: 780 ms
SecondCopy: 328 ms 
```

如果有人知道为什么 memcpy 这么慢，如果有解决这个问题的方法，我会全神贯注。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T14:18:25.470

*我的评论作为参考答案。*

在一大块内存中使用“memcpy”需要操作系统为每个复制的新页面筛选其进程/内存表。反过来，使用“ReadProcessMemory”可以直接告诉操作系统哪些页面应该从哪个进程复制到哪个其他进程。

当您使用单个页面进行基准测试时，这种差异就消失了，证实了其中的一些。

我猜想在“小”场景中“memcpy”更快的原因可能是“ReadProcessMemory”需要从用户模式切换到内核模式。另一方面，Memcpy 将任务卸载到底层内存管理系统，该系统始终与您的进程并行运行，并且在某种程度上受到硬件的本地支持。

# scala - Scala：可变大小批次的迭代器的功能替换

> ID：13525463
> 
> 赞同：0
> 
> 时间：2012-11-23T08:38:12.623
> 
> 标签：scala, cassandra, hector

我正在使用 Scala 从我们的列存储 Cassandra 中读取列。每列包含多个条目，n，其中 n 可以在 10 到 20 之间。我们读取一批条目，即一次 1000 个，并且必须从条目创建列；每个条目都有一个附加的 ID，我们可以使用它来分组。

目前，我们使用迭代器来遍历批次中的条目，并通过比较当前 ID 和先前 ID 来确定我们是否进入了新列，并且我们读取了许多批次，直到完成。我们需要在每个批次迭代结束时存储部分列，因为该列的其余部分将在下一个批次中。我在下面放了一些伪代码来演示我们目前使用的基本算法。

**怎么能以功能性的方式做到这一点？**（如果 n 是常数，这将是一个简单的问题，因为我们可以适当地设置批量大小。）

伪代码：

```
val resultBuffer // collects all columns
val columnBuffer // collects entries for current column
var currentId    // id of current column

while(batchIterator.hasNext){
     val batch = batchIterator.getNext
     val entryIterator = batch.entries.iterator

     while(entryIterator.hasNext){
           val entry = entryIterator.next
            if(entry.id != currentId) {
               currentId = entry.id  
               resultBuffer += columnBuilder(columnBuffer)
               columnBuffer.removeAll
               columnBuffer += entry
            } else {
                columnBuffer += entry
            } 
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:06:43.553

这是一个更实用的实现草图，它使用滑动来对条目迭代器中的条目进行分组：

```
val resultBuffer // collects all columns

batchIterator.foreach(batch => {
  val buffer = 
    batch.entries.sliding(2).foldLeft(new ColumnBuffer){(buffer, (curr, next)) =>
      if (curr.id != next.id) {
        resultBuffer += columnBuilder(buffer :+ entry /* Append entry to buffer */)
        new ColumnBuffer
      } else
        buffer += entry /* Return buffer with entry added */
    }

  if (buffer.nonEmpty) resultBuffer += columnBuilder(buffer)
} 
```

在这里，唯一的“全局”对象必须是可变的`resultBuffer`。我们甚至可以通过将它作为另一个累加器包含在内部并用另一个`foldLeft`替换外部来摆脱它。`foreach``foldLeft`

如果运行时效率对您的代码至关重要，那么您绝对应该对各种可能的实现进行基准测试，以便在功能性和性能之间找到良好的折衷。

**编辑 1：**修复了草图中的一个错误，即存储在中的最后一个条目序列`buffer`未添加到`resultBuffer`. 该错误已存在于 OP 的代码中。

**编辑 2：（**针对 Chuck 的评论）

`curr`会将值`entries(0)`设为`entries(entries.size() - 2)`，即不会处理最后一个元素。解决此问题的一种方法是将虚拟元素附加到迭代器，例如

```
(batch.entries ++ List(dummy)).sliding(2).foldLeft ... 
```

这不好，更重要的是，它在为空时**不起作用，因为它会**产生单个 window 。另一种解决方案是包含在内部的累加器中，并在终止后处理它。我还没有解决它，但看起来这会使解决方案更不吸引人。`batch.entries``sliding(2)``List(dummy)``next``foldLeft``foldLeft`

# nginx - 什么时候重启而不重新加载 Nginx？

> ID：13525465
> 
> 赞同：63
> 
> 时间：2012-11-23T08:38:32.297
> 
> 标签：nginx, deployment, passenger

什么时候需要重启nginx，reload就不行了？[如果使用像乘客](http://www.modrails.com/documentation/Users%20guide%20Nginx.html)
这样的分机，会有什么不同吗？

如果服务消耗太多内存，是否应该重新启动服务。重启 Nginx 的任何其他原因，特别是在扩展或 Nginx 核心配置中的配置更改之后？

进行配置更改后，可以通过[二进制文件](http://wiki.nginx.org/CommandLine#Starting.2C_Stopping.2C_and_Restarting_Nginx)本身或 Ubuntu 上的 init.d 脚本“/etc/init.d/nginx -h”重新启动或重新加载 nginx。应该首选哪种方法？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-11-23T10:50:00.453

重新加载 nginx 比重新启动更安全，因为在终止旧进程之前，会解析新的配置文件，如果有任何问题，整个进程都会中止。

另一方面，当您重新启动 nginx 时，您可能会遇到由于语法错误而导致 nginx 停止并且不会重新启动的情况。

重新加载会终止旧进程，因此无论如何都应该清除任何内存泄漏。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-11-26T11:12:14.163

我遇到过需要重新启动 nginx 才能启动`listen`新 IP 地址的指令的情况。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-08-25T21:49:20.490

Ztyx 是对的——在某些情况下需要在更改监听指令时重新启动。

使用 1.6.x，更改监听 IP 地址时可以重新加载，但从“*:80”监听到 IP 地址“xxxx:80”时需要重新启动。

我只用 IPv4 确认了这一点，IPv6 的行为可能类似。

# c# - 将输入提交给另一个 Windows 进程

> ID：13525468
> 
> 赞同：1
> 
> 时间：2012-11-23T08:38:35.370
> 
> 标签：c#

> **可能重复：**
> [如何将按键发送到正在运行的进程对象？](https://stackoverflow.com/questions/2686865/how-can-i-send-keypresses-to-a-running-process-object)

我有一个 Windows 软件，它有一个登录表单，然后自动执行某些操作。我想从我的 c# 应用程序中启动它并使用用户名和密码自动填写登录表单。

使用 Process 类，我能够以编程方式启动该软件，所以我的问题是：

当显示其他进程登录表单时，可以从 c# 自动填充数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T08:41:37.737

最直接的方法可能是使用[Windows Input Simulator](http://inputsimulator.codeplex.com/)之类的东西或直接调用 Win32 API 进行输入。虽然它仍然是在两个程序之间发送数据的一种非常脆弱的方式，但依赖于窗口焦点，UI 不会改变等等......

# excel - VBA find 函数获取错误 424 需要对象

> ID：13525477
> 
> 赞同：2
> 
> 时间：2012-11-23T08:39:28.837
> 
> 标签：excel, vba

我的代码需要错误 424 对象

```
lr = Range("O:O").Cells(Rows.Count, 1).End(xlUp).Row

For y = 0 To UBound(myVariable)
    a = myVariable(y)
    Range("O:O").Select
    Set objXL = GetObject(, "Excel.Application")
    Set z = Cells.Find(What:=a, After:=Range("O2"), LookIn:=xlFormulas, _
        LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
        MatchCase:=False, SearchFormat:=False).Activate
    If z = "True" Then
        ActiveCell.Delete shift:=xlUp
    End If
    MsgBox z.Value
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:13:34.280

Find 检索范围**Object**。所以你要么：

a) 激活找到的范围

```
Cells.Find(What:=a, After:=Range("O2"), LookIn:=xlFormulas, _
    LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False).Activate 
```

**或者**

b) 将找到的范围分配给变量

```
Set z = Cells.Find(What:=a, After:=Range("O2"), LookIn:=xlFormulas, _
    LookAt:=xlWhole, SearchOrder:=xlByColumns, SearchDirection:=xlNext, _
    MatchCase:=False, SearchFormat:=False)      'No .Activate in here ' 
```

同时使用两者会产生错误。

**笔记：**

小心点。如果`.Find`没有找到匹配项，它将检索`Nothing`. 在这种情况下，`.Activate`将弹出错误消息。所以在这里使用一些错误处理。

# node.js - 保存后猫鼬填充

> ID：13525480
> 
> 赞同：112
> 
> 时间：2012-11-23T08:39:50.257
> 
> 标签：node.js, mongodb, mongoose, populate

我无法手动或自动在新保存的对象上填充创建者字段......我能找到的唯一方法是重新查询我已经拥有的我不想做的对象。

这是设置：

```
var userSchema = new mongoose.Schema({   
  name: String,
});
var User = db.model('User', userSchema);

var bookSchema = new mongoose.Schema({
  _creator: { type: mongoose.Schema.Types.ObjectId, ref: 'User' },
  description: String,
});
var Book = db.model('Book', bookSchema); 
```

这是我拉头发的地方

```
var user = new User();
user.save(function(err) {
    var book = new Book({
        _creator: user,
    });
    book.save(function(err){
        console.log(book._creator); // is just an object id
        book._creator = user; // still only attaches the object id due to Mongoose magic
        console.log(book._creator); // Again: is just an object id
        // I really want book._creator to be a user without having to go back to the db ... any suggestions?
    });
}); 
```

编辑：最新的猫鼬修复了这个问题并添加了填充功能，请参阅新接受的答案。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-07-06T17:57:02.193

您应该能够使用模型的填充函数来执行此操作：http: [//mongoosejs.com/docs/api.html#model_Model.populate](http://mongoosejs.com/docs/api.html#model_Model.populate) 在书的保存处理程序中，而不是：

```
book._creator = user; 
```

你会做类似的事情：

```
Book.populate(book, {path:"_creator"}, function(err, book) { ... }); 
```

帮助你的答案可能为时已晚，但我最近被困在这个问题上，它可能对其他人有用。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2018-05-14T15:29:26.187

我的解决方案是使用`execPopulate`，像这样

```
const t = new MyModel(value)
return t.save().then(t => t.populate('my-path').execPopulate()) 
```

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2015-01-02T13:25:37.453

万一有人还在寻找这个。

Mongoose 3.6 引入了许多很酷的功能来填充：

```
book.populate('_creator', function(err) {
 console.log(book._creator);
}); 
```

或者：

```
Book.populate(book, '_creator', function(err) {
 console.log(book._creator);
}); 
```

在以下位置查看更多信息：[https ://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#population](https://github.com/LearnBoost/mongoose/wiki/3.6-Release-Notes#population)

但是这样你仍然会再次查询用户。

在没有额外查询的情况下完成它的一个小技巧是：

```
book = book.toObject();
book._creator = user; 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2017-06-17T03:29:22.447

## 返回承诺（无回调）的解决方案：

**使用文档#populate**

```
book.populate('creator').execPopulate();

// summary
doc.populate(options);               // not executed
doc.populate(options).execPopulate() // executed, returns promise 
```

**可能的实施**

```
var populatedDoc = doc.populate(options).execPopulate();
populatedDoc.then(doc => {
   ... 
}); 
```

[在此处](http://mongoosejs.com/docs/api.html#document_Document-populate)阅读有关文档数量的信息。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2014-07-24T05:30:52.543

只是为了详细说明并举另一个例子，因为它帮助了我。这可能会帮助那些想要在保存后检索部分填充的对象的人。方法也略有不同。花了一两个多小时寻找正确的方法。

```
 post.save(function(err) {
    if (err) {
      return res.json(500, {
        error: 'Cannot save the post'
      });
    }
    post.populate('group', 'name').populate({
      path: 'wallUser',
      select: 'name picture'
    }, function(err, doc) {
      res.json(doc);
    });
  }); 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-07-19T21:09:42.543

我想我会补充一点，以澄清像我这样的完全菜鸟的事情。

如果您不小心的话，最令人困惑的是，存在三种非常不同的填充方法。它们是不同对象的方法（模型与文档），接受不同的输入并给出不同的输出（文档与承诺）。

它们是为那些感到困惑的人准备的：

## Document.prototype.populate()

[查看完整文档。](http://mongoosejs.com/docs/api.html#document_Document-populate)

这适用于文档并返回文档。在原始示例中，它看起来像这样：

```
book.save(function(err, book) {
    book.populate('_creator', function(err, book) {
        // Do something
    })
}); 
```

因为它适用于文档并返回一个文档，所以您可以将它们链接在一起，如下所示：

```
book.save(function(err, book) {
    book
    .populate('_creator')
    .populate('/* Some other ObjectID field */', function(err, book) {
        // Do something
    })
}); 
```

但不要像我一样傻，尝试这样做：

```
book.save(function(err, book) {
    book
    .populate('_creator')
    .populate('/* Some other ObjectID field */')
    .then(function(book) {
        // Do something
    })
}); 
```

记住： Document.prototype.populate() 返回一个文档，所以这是胡说八道。如果你想要一个承诺，你需要...

## Document.prototype.execPopulate()

[查看完整文档。](http://mongoosejs.com/docs/api.html#document_Document-execPopulate)

这个适用于文档，但它返回一个解析为文档的承诺。换句话说，您可以像这样使用它：

```
book.save(function(err, book) {
    book
    .populate('_creator')
    .populate('/* Some other ObjectID field */')
    .execPopulate()
    .then(function(book) {
        // Do something
    })
}); 
```

这样更好。最后，有...

## 模型.populate()

[查看完整文档。](http://mongoosejs.com/docs/api.html#model_Model.populate)

这个**适用于模型**并返回一个承诺。因此，它的使用方式有所不同：

```
book.save(function(err, book) {
    Book // Book not book
    .populate(book, { path: '_creator'})
    .then(function(book) {
        // Do something
    })
}); 
```

希望这对其他一些新人有所帮助。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-23T10:10:30.383

不幸的是，这是 mongoose 的一个长期存在的问题，我认为尚未解决：

[https://github.com/LearnBoost/mongoose/issues/570](https://github.com/LearnBoost/mongoose/issues/570)

您可以做的是为此编写自己的自定义 getter/setter（并在单独的属性中设置*真实）。* `_customer`例如：

```
var get_creator = function(val) {
    if (this.hasOwnProperty( "__creator" )) {
        return this.__creator;
    }
    return val;
};
var set_creator = function(val) {
    this.__creator = val;
    return val;
};
var bookSchema = new mongoose.Schema({
  _creator: {
     type: mongoose.Schema.Types.ObjectId,
     ref: 'User',
     get: get_creator,
     set: set_creator
  },
  description: String,
}); 
```

**注意：**我没有对其进行测试，`.populate`并且在设置纯 id 时它可能会奇怪地工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-09T17:13:25.393

猫鼬 5.2.7

这对我有用（只是很头疼！）

```
exports.create = (req, res, next) => {
  const author = req.userData;
  const postInfo = new Post({
    author,
    content: req.body.content,
    isDraft: req.body.isDraft,
    status: req.body.status,
    title: req.body.title
  });
  postInfo.populate('author', '_id email role display_name').execPopulate();
  postInfo.save()
    .then(post => {
      res.status(200).json(post);
    }).catch(error => {
      res.status(500).json(error);
    });
}; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-05T04:52:21.717

将文档保存在模型中，然后填充

```
 chatRoom = await chatRoom.save();
   const data = await chatRoom
  .populate("customer", "email dp")
  .populate({
    path: "admin",
    select: "name logo",
  })
  .execPopulate(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-05T16:33:52.907

大概…… 像

```
Book.createAsync(bookToSave).then((savedBook) => savedBook.populateAsync("creator")); 
```

将是完成这项工作的最好且问题最少的方法（使用 Bluebird 承诺）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-04T16:07:48.783

最终编写了一些可咖喱的 Promise 函数，您可以在其中声明您的模式、query_adapter、data_adapter 函数并提前填充字符串。对于更短/更简单的实现更容易。

它可能不是超级高效，但我认为执行位非常优雅。

github 文件：[curry_Promises.js](https://github.com/wouldBeNerd/mongoose_methods/blob/master/curry_Promises.js)

**声明**

```
const update_or_insert_Item = mDB.update_or_insert({
    schema : model.Item,
    fn_query_adapter : ({ no })=>{return { no }},
    fn_update_adapter : SQL_to_MDB.item,
    populate : "headgroup"
    // fn_err : (e)=>{return e},
    // fn_res : (o)=>{return o}
}) 
```

**执行**

```
Promise.all( items.map( update_or_insert_Item ) )
.catch( console.error )
.then( console.log ) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-11-01T04:15:35.613

它对我有用

```
 let post = await PostModel.create({
        ...req.body, author: userId
    })

    post = await post.populate('author', 'name')

    res.status(200).json({
        status: 'success',
        data: { post }
    }) 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2021-06-13T10:52:29.413

我没有在这里添加任何新内容。

这只是使用 async/await 编写此代码的一种更简洁的方式：

```
const newCourse = new Course(new_course_data);
const populate_options = [
  // Here write your populate options
];
const created_course = await newCourse.save();
await created_course.populate(populate_options).execPopulate(); 
```

# java - 以纯 xml 格式导出报告 jasper

> ID：13525481
> 
> 赞同：4
> 
> 时间：2012-11-23T08:39:52.953
> 
> 标签：java, jasper-reports

您好我已经知道我们可以从 jasper 导出 XML 格式的数据。但它也返回了我不想要的 jasper 标签。我只需要普通的 xml 表单。可能吗 ？如果是，那怎么办？

我正在通过以下语句生成 xml 格式：

```
 jrExporter = new JRXmlExporter();
         jrExporter.setParameter(JRXmlExporterParameter.IS_EMBEDDING_IMAGES, Boolean.FALSE);
         response.setContentType("application/xml");
         jrExporter.setParameter(JRXmlExporterParameter.JASPER_PRINT, jasperPrint);
         jrExporter.setParameter(JRXmlExporterParameter.OUTPUT_STREAM, response.getOutputStream());
         jrExporter.exportReport(); 
```

希望导出前需要设置一些属性，但不知道是哪个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:01:17.660

这是对 JRXmlExporter 的常见误解。JasperReport 不支持通过 XML 提取报告的数据。JRXmlExporter 导出生成的报告输出，即每个页面和元素的确切布局规范。此外，所有内容都作为纯文本处理，因此如果字段是日期或数字，则所有信息都不可用。

如果您希望仅将数据导出为 XML 结构，则需要实现自定义导出器。为此，您需要定义一个将布局结构转换回数据结构的逻辑。根据我的研究，在以下情况下可以部分实现：

*   您限制了报告的范围（即表格、组、列表） - 一些可识别的结构
*   您还可以利用字段和带区的自定义属性来维护数据类型等信息。

# python - 如何检查文件是否存在于 Google Cloud Storage 中？

> ID：13525482
> 
> 赞同：37
> 
> 时间：2012-11-23T08:39:52.770
> 
> 标签：python, google-cloud-storage, file-exists

我有一个脚本，我想检查存储桶中是否存在文件，如果不存在则创建一个。

我尝试使用`os.path.exists(file_path)`where `file_path = "/gs/testbucket"`，但出现文件未找到错误。

我知道我可以使用`files.listdir()`API 函数列出位于路径中的所有文件，然后检查我想要的文件是否是其中之一。但我想知道是否有另一种方法来检查文件是否存在。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2018-07-03T12:30:33.260

这篇文章很旧，您现在实际上可以使用 blob 类检查 GCP 上是否存在文件，但是因为我花了一段时间才找到答案，所以在这里为正在寻找解决方案的其他人添加

```
from google.cloud import storage

name = 'file_i_want_to_check.txt'   
storage_client = storage.Client()
bucket_name = 'my_bucket_name'
bucket = storage_client.bucket(bucket_name)
stats = storage.Blob(bucket=bucket, name=name).exists(storage_client) 
```

文档在[这里](https://googlecloudplatform.github.io/google-cloud-python/latest/storage/blobs.html)

希望这可以帮助！

## 编辑

根据@om-prakash 的评论，如果文件位于文件夹中，则名称应包含文件的路径：

```
name = "folder/path_to/file_i_want_to_check.txt" 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2018-11-08T09:48:35.850

就像在 blob 对象中使用 exists 方法一样简单：

```
from google.cloud import storage

def blob_exists(projectname, credentials, bucket_name, filename):
   client = storage.Client(projectname, credentials=credentials)
   bucket = client.get_bucket(bucket_name)
   blob = bucket.blob(filename)
   return blob.exists() 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-05-07T15:31:37.883

@nickthefreak 提供的答案是正确的，Om Prakash 的评论也是如此。另一个注意事项是 bucket_name 不应包含`gs://`在前面或`/`末尾。

借鉴@nickthefreak 的示例和 Om Prakash 的评论：

```
from google.cloud import storage

name = 'folder1/another_folder/file_i_want_to_check.txt'   

storage_client = storage.Client()
bucket_name = 'my_bucket_name'  # Do not put 'gs://my_bucket_name'
bucket = storage_client.bucket(bucket_name)
stats = storage.Blob(bucket=bucket, name=name).exists(storage_client) 
```

stats 将是一个布尔值（真或假），具体取决于文件是否存在于存储桶中。

（我没有足够的声望点来评论，但我想为其他人节省一些时间，因为我在这方面浪费了太多时间）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-18T16:20:34.903

如果您正在寻找 NodeJS 中的解决方案，那么这里是：

```
var storage = require('@google-cloud/storage')();
var myBucket = storage.bucket('my-bucket');

var file = myBucket.file('my-file');

file.exists(function(err, exists) {});

// If the callback is omitted, then this function return a Promise.
file.exists().then(function(data) {
  var exists = data[0];
}); 
```

如果您需要更多帮助，可以参考此文档： [https ://cloud.google.com/nodejs/docs/reference/storage/1.5.x/File#exists](https://cloud.google.com/nodejs/docs/reference/storage/1.5.x/File#exists)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-19T04:18:14.397

您可以使用 stat 函数获取文件信息。在实践中，这将向谷歌云存储发出 HEAD 请求，而不是 GET，这会减少资源密集度。

```
import cloudstorage as gcs
# return stat if there is one, else None or false. A stat record should be truthy
def is_file_available(filepath):

  try:
    return gcs.stat(filepath)
  except gcs_errors.NotFoundError as e:
    return False 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-04-08T15:53:25.583

如果您在“Google AI Platform”之类的服务上使用 gcs 文件，请使用 tensorflow 检查文件是否存在：

```
import tensorflow as tf
file_exists = tf.gfile.Exists('gs://your-bucket-name/your-file.txt') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-07-19T10:30:21.177

我在谷歌云存储上搜索的文件：init.sh

**完整路径：** gs://cw-data/spark_app_code/init.sh

```
>>> from google.cloud import storage

>>> def is_exist(bucket_name,object):
...     client = storage.Client()
...     bucket = client.bucket(bucket_name)
...     blob = bucket.get_blob(object)
...     try:
...             return blob.exists(client)
...     except:
...             return False
...
>>> is_exist('cw-data','spark_app_code')
    False
>>> is_exist('cw-data','spark_app_code/')
    True
>>> is_exist('cw-data','init.sh')
    False
>>> is_exist('cw-data','spark_app_code/init.sh')
    True
>>> is_exist('cw-data','/init.sh')
    False
>>> 
```

在这里，文件不是以它们存储在本地文件系统上的方式存储的，而是作为键存储的。因此，在谷歌存储上搜索文件时，使用绝对路径而不仅仅是文件名。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-30T11:58:36.707

我猜没有功能可以直接检查文件是否存在给定路径。
我创建了一个函数，它使用`files.listdir()`API 函数列出存储桶中的所有文件，并将其与我们想要的文件名匹配。如果找到则返回 true，否则返回 false。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-03T07:49:09.373

您可以使用自定义函数（如下所示）检查文件是否存在

```
def is_file_available(filepath):
 #check if the file is available
 fileavability = 'yes';
 try: 
  fp = files.open(filepath, 'r')
  fp.close()
 except Exception,e:
  fileavability = 'no'
 return fileavability 
```

按以下方式使用上述功能

```
 filepath = '/gs/test/testme.txt'
 fileavability = is_file_available(filepath) 
```

注意：在上述函数中，当尝试读取文件的应用程序未授予读取权限时，您也可能得到“否”的结果。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-27T18:38:46.793

几年前 Amit 的回答略有不同，针对 cloudstorage api 进行了更新。

```
import cloudstorage as gcs

def GCSExists(gcs_file):
    '''
    True if file exists; pass complete /bucket/file
    '''
    try:
        file = gcs.open(gcs_file,'r')
        file.close()
        status = True
    except:
        status = False
    return status 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-07-05T12:43:30.907

是的！有可能！[由此](https://googlecloudplatform.github.io/google-cloud-python/latest/storage/blobs.html)

这是我的代码：

```
def get_by_signed_url(self, object_name, bucket_name=GCLOUD_BUCKET_NAME):
    bucket = self.client_storage.bucket(bucket_name)
    blob = bucket.blob(object_name)

    #this is check if file exist or not
    stats = blob.exists(self.client_storage)
    if not stats:
        raise NotFound(messages.ERROR_NOT_FOUND)

    url_lifetime = self.expiration  # Seconds in an hour
    serving_url = blob.generate_signed_url(url_lifetime)
    return self.session.get(serving_url) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-11-24T04:41:44.083

由于这个问题的[公认答案](https://stackoverflow.com/questions/13525482/how-to-check-if-file-exists-in-google-cloud-storage/13644827#13644827)没有提供太多细节 - 这是一个使用`gsutil`该答案描述的功能的现代解决方案。

如果您需要在脚本中多次查询 GCS 文件，这将比其他答案更有效。

```
def bucket_to_list(bucketname: str):
    '''
    Return bucket's contents to python list of strings. 
    We also slice off the bucket name on each line, 
    in case we need to search many buckets for one file.
    '''
    return subprocess.run(['gsutil','ls','-r', bucketname + '**'], shell=False, text=True, stdout=subprocess.PIPE).stdout.replace(bucketname, "").splitlines() 
```

按以下方式使用：

```
# call once for each bucket to store bucket contents 
mybucket1 = 'gs://mybucket1/'
mybucket1list = bucket_to_list(mybucket1)

# limiting list to a bucket's "subdirectories"
mybucket2 = 'gs://mybucket2/subdir1/subdir2/'
mybucket2list = bucket_to_list(mybucket2)

# example filename list to check, we dont need to add the gs:// paths 
filestocheck = ['file1.ext', 'file2.ext', 'file3.ext']

# check both buckets for files in our filelist
for file in filestocheck:
    if file in mybucket1list:
        # do something if file exists in bucket1
    elif file in mybucket2list:
        # do something if file exists in bucket2
    else:
        # do something if file doesn't exist in either bucket 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-05-11T06:52:05.977

从 google.cloud 导入存储

```
def if_file_exists(name:str,bucket_name:str):
    storage_client = storage.Client()
    bucket = storage_client.bucket(bucket_name)
    stats = storage.Blob.from_string(f"gs://{bucket_name}/{name}").exists(storage_client)
    return stats 
```

print(if_file_exists('audios/courses/ActivityPlaying/1320210506130438.wav',GC_BUCKET_NAME),">>>")

> **name** args 是文件的剩余路径

if_file_exists 函数接受两个位置参数，第一个是对象键，第二个是存储桶名称，如果文件存在则返回 true，否则返回 false

# java - OpenXava 实体安全

> ID：13525492
> 
> 赞同：1
> 
> 时间：2012-11-23T08:40:53.887
> 
> 标签：java, security, openxava

如何根据登录的用户角色显示实体？因此，如果用户以管理员角色登录，他将获得对所有系统元素的访问权限，如果他以用户身份登录，他将获得系统的一个子集。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T17:38:44.853

使用 OpenXava，您可以选择生成基于 portlet 的应用程序或正常的 webapp 战争，那么您有两个选择：1).- 将您的 portlet 战争部署到像 Liferay 这样的 portlet 容器中，然后使用 Liferay 安全模式和其他功能生命之光。

另一方面，如果你选择 webapp 战争，你可以看看这个（不是免费的）附加组件[http://www.openxava.org/naviox](http://www.openxava.org/naviox) ...或者你可以提前实现你的安全层像 Spring Security 这样的一些工具，这里是一个带有扩展示例[http://minuteproject.blogspot.com/2012/02/adding-spring-security-to-openxava.html](http://minuteproject.blogspot.com/2012/02/adding-spring-security-to-openxava.html) .... 我没有测试过这个最后一个例子，事实上，当我尝试将 Spring 集成到 ActiveMQ JMS 的其他 OpenXava 项目中时，我遇到了一些问题（然后我确实遵循了其他方式）......但如果你按照相同的步骤并为 Spring 执行此操作，它可能会起作用OpenXava 应用程序的安全性。

# youtube - 如何使用 Youtube javascript API 在特定“秒”获取 youtube 视频的缩略图或快照？

> ID：13525507
> 
> 赞同：12
> 
> 时间：2012-11-23T08:41:41.617
> 
> 标签：youtube, youtube-api, youtube-javascript-api

我想拍摄 youtube 视频的缩略图，比如说[http://www.youtube.com/watch?v=ffaTjpA1scI](http://www.youtube.com/watch?v=ffaTjpA1scI)在 30 秒或 120 秒。如何使用 youtube API 做到这一点？

我确实认为这是可能的，因为当我观看 Youtube 视频时，如果我将光标移到时间轴上，我可以立即看到特定时间的快照。我只想以编程方式检索这些快照。

我也试过[http://img.youtube.com/vi/](http://img.youtube.com/vi/) /0.jpg，实际上这当然可以得到缩略图，但它不能得到特定时间的快照。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T02:11:58.593

这些特定类型的缩略图（用于时间线快照）不会通过任何形式的官方 URL 方案或 API 公开。我也不建议尝试对解决方案进行逆向工程。

# javascript - 如何简化多个嵌套 if else 语句的代码

> ID：13525515
> 
> 赞同：2
> 
> 时间：2012-11-23T08:42:17.177
> 
> 标签：javascript, if-statement, coffeescript

我目前正在使用以下代码进行比较，但如您所见，我正在制作大量的 if else 语句。有没有办法简化代码并提高效率？

```
getGenderRef: (grammer=nil) ->
  @gender_ref = ""
  gender = this.get('gender')
  if gender? and gender == 'male'
    if grammer == 'he'
      @gender_ref = 'he'
    else if grammer == 'his'
      @gender_ref == 'his'
    else if grammer == 'him'
      @gender_ref == 'him'
  else if gender? and gender == 'female'
    if grammer == 'he'
      @gender_ref = 'she'
    else if grammer == 'his'
      @gender_ref == 'her'
    else if grammer == 'him'
      @gender_ref == 'her'
  else if gender? or gender == null
    if grammer == 'he'
      @gender_ref = 'he/she'
    else if grammer == 'his'
      @gender_ref == 'his/her'
    else if grammer == 'him'
      @gender_ref == 'him/her' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T08:47:43.623

你可以使用地图

```
var rules = {
    'female': {
        'he': 'she',
        'his': 'her',
        // ...
    },
    'male': {
        'he': 'he',
        // ...
    },
    'default': {
        'he': 'he/she'
        // ...
    }
};

this.gender_ref = rules[gender ? gender : 'default'][grammer]; 
```

它是可扩展的，也可以从另一个后端（例如数据库）动态生成。

*编辑（由 Linus G Thiel 编写）* coffeescript 中的相同：

```
rules =
  female:
    he: 'she'
    his: 'her'
    // ...
  male:
    he: 'he'
    // ...
  default:
    he: 'he/she'
    // ...

@gender_ref = rules[gender or 'default'][grammer] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:43:12.270

考虑使用 switch 语句

```
switch (gender) {
  case "1":
    alert("");
    break;
  case "2":
    alert("");
    break;
  case "3":
    alert("");
    break;
  case "4":
    alert("");
    break;
  default:
    alert("default");
    break;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:51:55.207

使用多维哈希表。

```
grammarByGender = {
    "male": { "he" : "he", "his": "his", "him": "him" },
    "female": {"he" : "she", "his" :"her", "him":"her"},
    "neuter": {"he":"he/she","his":"his/her","him":"him/her"}
}

@gender_ref = grammarByGender[this.get("gender")][grammer] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T08:54:24.590

使用 map 缓存可能的值。您可以随时扩展它，并且能够简化您的方法：

```
var genders = {
    "male" : {
       "he": "he",
       "his": "his",
       "him": "him"
   },
   "female" : {
       "he": "she",
       "his": "her",
       "him": "her" 
   },
   "null": {
      "he": "he/she",
      "his": "his/her",
      "him": "him/her"
   }
}

function getGenderRef (grammer) {
  var gender_ref = "",
      availableGenders = genders[this.get('gender')];

  if (availableGenders) {
      gender_ref = availableGenders[grammer];
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T08:51:25.257

您可以稍微减少长度，如下所示：

```
getGenderRef: (grammer=nil) ->
  @gender_ref = ""
  gender = this.get('gender')
  if gender? and gender == 'male'
    if grammer == 'he'
      @gender_ref = 'he'
    else if grammer == 'his'
      @gender_ref == 'his'
    else if grammer == 'him'
      @gender_ref == 'him'
  else if gender? and gender == 'female'
    if grammer == 'he'
      @gender_ref = 'she'
    else if grammer == 'his' or grammer == 'him'
      @gender_ref == 'her'
  else if gender? or gender == null
    if grammer == 'he'
      @gender_ref = 'he/she'
    else if grammer == 'his'
      @gender_ref == 'his/her'
    else if grammer == 'him'
      @gender_ref == 'him/her' 
```

你不能让它比这短很多，因为你有很多不同的输出选项。一个 swtich / case 可能是一个选项，但这将是一样多的代码。

另一种选择是使用一个对象：

```
references = {
    'male': {
        'he': 'he',
        'his': 'his',
        'him': 'him'
    },
    'female': {
        'he': 'she',
        'his': 'her',
        'him': 'her'
    },
    'null':{
        'he': 'he/she',
        'his': 'his/her',
        'him': 'him/her'
    }
}
//Access:
gender_ref = references[gender ? gender : 'null'][gender_ref]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-23T10:01:51.543

如果你一步一步来，那就很容易了。您将学习如何以这种方式重构复杂的条件。

首先，请注意您在第一个`if`及其后续`else if`s 中有一个共同的检查，即`if gender?`. 您应该将其作为一项常见检查并重构您的代码，如下所示：

```
 if gender?
    ...
  else # if gender == null
    ... 
```

这形成了您的主要 if 和 else 子句。您将在这些下嵌套 if 和 switch 语句。重构后的 if/else 代码如下：

```
 if gender?
    if gender == 'male'
      switch grammer
        when 'he' then @gender_ref = 'he'
        when 'his' then @gender_ref = 'his'
        when 'him' then @gender_ref = 'him'
    else if gender == 'female'
      switch grammer
        when 'he' then @gender_ref = 'she'
        when 'his' then @gender_ref = 'her'
        when 'him' then @gender_ref = 'her'
  else # if gender == null
    switch grammer
      when 'he' then @gender_ref = 'he/she'
      when 'his' then @gender_ref = 'his/her'
      when 'him' then @gender_ref = 'him/her' 
```

Coffeescript 中的开关非常适合您的情况，使代码可读性强且不那么复杂。您可以进一步优化它。

* * *

这是一个简单的优化，您可以在语句`@gender_ref`开头进行赋值`switch`（同样，去掉公共部分）：

```
 if gender?
    if gender == 'male'
      @gender_ref = switch grammer
        when 'he' then 'he'
        when 'his' then 'his'
        when 'him' then 'him'
    else if gender == 'female'
      @gender_ref = switch grammer
        when 'he' then 'she'
        when 'his' then 'her'
        when 'him' then 'her'
  else # if gender == null
    @gender_ref = switch grammer
      when 'he' then 'he/she'
      when 'his' then 'his/her'
      when 'him' then 'him/her' 
```

您可以通过将赋值移动到父 if 来进一步优化它`@gender_ref =`（虽然它在 else 子句中不起作用......我想知道为什么）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-23T09:15:55.170

在性能方面，if 语句没有任何问题。我不禁想知道这是否不仅仅是关于可读性。

无论如何，这里是另一个仍在使用 if 语句的选项。

```
@gender_ref = grammer; // male values are the same so use as default

if(  gender == "female" ) {

    if( grammer == 'he' ) @gender_ref = 'she';
    if( grammer == 'his' ) @gender_ref = 'her';
    if( grammer == 'him' ) @gender_ref = 'her';

} else if (  !gender ) { // if not defined

    if( grammer == 'he' ) @gender_ref = 'he/she';
    if( grammer == 'his' ) @gender_ref = 'his/her';
    if( grammer == 'him' ) @gender_ref = 'him/her';
} 
```

# oracle10g - oracle PRO*C char(1) 类型修剪为空？

> ID：13525516
> 
> 赞同：1
> 
> 时间：2012-11-23T08:42:27.093
> 
> 标签：oracle10g, type-conversion

我有一个表，其中有一列如下：

```
ppbacct_status  CHAR(1) default ' ' not null, 
```

然后我关注 pro*c：

```
EXEC SQL BEGIN DECLARE SECTION;
    sql_context ctx = NULL;
    char v_p_status_1 = ' ';
EXEC SQL END   DECLARE SECTION;

EXEC SQL select ppbacct_status into :v_p_status_1 from ppbaccount 
where exchange_type = '1' and branch_no = 1854 and stock_account = 'A001854009';

printf("|%c|, |%d|\n", v_p_status_1, v_p_status_1); // here get:  | |, |32|

EXEC SQL update ppbaccount set remark = 'a'||:v_p_status_1||'a' where exchange_type = '1' and branch_no = 1854 and stock_account = 'A001854005'; // 'aa' 
```

上次更新后，我得到备注栏为'aa'，为什么不是'aa'，空间在哪里？

Oracle 版本：10.2.0.1，用 CentOS 5.5。</p>

PRO*C 标志：

```
CPP_PROFLAGS=ireclen=132 oreclen=132 \
        select_error=yes \
        mode=ansi \
        userid=$(USERID) \
        SQLCHECK=SYNTAX \
        def_sqlcode=YES \
        THREADS=YES \
        CODE=CPP \
        CHAR_MAP=CHARF \
        CPP_SUFFIX=cpp \
        PARSE=PARTIAL \
        CLOSE_ON_COMMIT=YES \
        MAXOPENCURSORS=60 \
        DEFINE=USE_PRO_C \
        HOLD_CURSOR=YES \
        PREFETCH=200 \
        include=$(ORACLE_HOME)/precomp/public  \
        include=$(ORACLE_HOME)/oci/include  \
        include=$(FBASE_HOME) \
        include=/usr/lib/gcc-lib/i386-redhat-linux/$(GCC_VER)/include 
```

# vim - 如何隐藏gvim的菜单/工具栏？

> ID：13525518
> 
> 赞同：67
> 
> 时间：2012-11-23T08:42:39.220
> 
> 标签：vim

我没有使用 Windows 上 gvim 中的菜单和工具栏；我可以隐藏它们吗？

这将为文本区域提供更多空间。

![在此处输入图像描述](../Images/05d3dc47de19c7bde802c5ca830de3c2.png)

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-11-23T08:45:35.410

使用[**guioptions**](https://vimhelp.org/options.txt.html#%27guioptions%27)设置（缩写为**go**）。

```
:set guioptions -=m 
```

删除[菜单栏](https://vimhelp.org/options.txt.html#%27go-m%27)。

```
:set guioptions -=T 
```

删除[工具栏](https://vimhelp.org/options.txt.html#%27go-T%27)。

[我的参考](http://vim.wikia.com/wiki/Hide_toolbar_or_menus_to_see_more_text)

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-23T08:46:06.980

您可以通过在 .vimrc 中键入这些命令来隐藏它

```
set guioptions-=m  "menu bar
set guioptions-=T  "toolbar
set guioptions-=r  "scrollbar 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-23T09:07:53.180

我的`.vimrc`: 默认情况下，该栏是隐藏的，但如果我想显示它，我可以使用它`F11`在两种模式之间切换。

```
function! ToggleGUICruft()
  if &guioptions=='i'
    exec('set guioptions=imTrL')
  else
    exec('set guioptions=i')
  endif
endfunction

map <F11> <Esc>:call ToggleGUICruft()<cr>

" by default, hide gui menus
set guioptions=i 
```

移除`mTrl`隐藏窗口菜单栏、任务栏和右滚动条，这是一种 Gvim 全屏模式。有关`:help guioptions`更多信息和自定义，请参阅。

PS : 保留你的 guioptions 很重要`i`，否则 Vim 图标不会显示在`Alt``TAB`任务栏中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-23T08:50:06.113

您可以选择编辑 -> 全局设置 -> 切换工具栏。这会隐藏工具栏，直到您重新启动 VIM。然后，输入`:set`。Vim 提示你列出不同的选项，找到包含`guioptions`. 这是您需要添加到 .vimrc 文件以维持这种外观的内容。

如果您不知道选项名称但知道如何通过主菜单更改它，则可以使用此方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-27T22:05:17.430

我有

```
set guioptions= 
```

在我的 .vimrc 中。但我经常想用`:set go+=m`和暂时使用菜单`:set go-=m`。

从[隐藏工具栏或菜单中查看更多文本 - Vim Tips Wiki](http://vim.wikia.com/wiki/Hide_toolbar_or_menus_to_see_more_text)，我使用他们的

```
let mapleader=","
nnoremap <leader>m :if &go=~#'m'<Bar>set go-=m<Bar>else<Bar>set go+=m<Bar>endif<CR> 
```

用 来打开和关闭菜单`,m`。（嗯，他们实际上有`ctrl-F1`作为键绑定。）

例如，当我需要记住从操作系统的剪贴板粘贴的方式时，我可以很快在菜单中找到它。一旦找到，我仍然会手动输入`"+gP`以建立肌肉记忆，但我仍然很少使用它，以至于我太快忘记它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-07-20T13:37:01.667

```
set go=c 
```

> 使用控制台对话框而不是弹出对话框进行简单的选择。

我认为这会关闭它，而不仅仅是隐藏它。

[http://vimdoc.sourceforge.net/htmldoc/options.html#%27go-c%27](http://vimdoc.sourceforge.net/htmldoc/options.html#%27go-c%27)

编辑：为了澄清，这也关闭了 GUI 中的菜单和工具栏。

[![在此处输入图像描述](../Images/1f3ade13493f8cdef5d40d03e4c0fa9c.png)](https://i.stack.imgur.com/VoZ98.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-25T16:25:02.983

Fedora 附带的 gVim（不确定其他发行版是否受到影响）有一个错误，不允许您使用`set go-=m`;删除菜单。出于某种原因，“m”选项在您设置之前不在“go”字符串中。所以在 Fedora（在 26 中测试）中删除菜单栏的 .vimrc 命令序列是：

```
set go=agitm
set go-=m 
```

我无法在其他任何地方找到解决方案，所以希望这可以帮助其他人在 Fedora 上使用 gVim。

# c# - 错误：“14”附近的语法不正确

> ID：13525519
> 
> 赞同：2
> 
> 时间：2012-11-23T08:42:42.493
> 
> 标签：c#, asp.net, sql-server

我必须使用插入查询在表中插入值...存储在数据库中的表有 3 列： 1\. 日期 (DateTime) 2\. SensorValue (Float) 3\. 差异 (Float) 现在每列的值来自datagridview .....这是按钮的插入代码

```
con.ConnectionString = "Data Source=.\\SQLEXPRESS;AttachDbFilename=C:\\dbsave.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True";
if (con.State == ConnectionState.Closed)
{
    con.Open();
}
for (Int32 i = 0; i < dataGridView1.Rows.Count-1; i++)
{
    String query1 = 
        "INSERT INTO " + tbName + 
        " ( Date, SensorValue, Difference) " + "VALUES (" +     
        dataGridView1.Rows[i].Cells[0].Value + "," + 
        dataGridView1.Rows[i].Cells[1].Value + "," + 
        dataGridView1.Rows[i].Cells[2].Value + ")";
    SqlCommand cmd1 = new SqlCommand(query1, con);
    cmd1.ExecuteNonQuery();
}
con.Close();
MessageBox.Show("The table has been saved"); 
```

错误当然是在执行查询时....日期列中的第一个条目是值：12/05/2012 14:32:00....所以基本上 sql 不接受放置的冒号14....我该如何解决这个问题？请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T08:46:22.960

更新您的查询并添加撇号：

```
String query1 = 
    "INSERT INTO " + tbName + 
    " ( Date, SensorValue, Difference) " + "VALUES ('" +     
    dataGridView1.Rows[i].Cells[0].Value + "'," + 
    dataGridView1.Rows[i].Cells[1].Value + "," + 
    dataGridView1.Rows[i].Cells[2].Value + ")";
SqlCommand cmd1 = new SqlCommand(query1, con); 
```

但我同意 Liath 的观点，参数更安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:47:29.887

该代码甚至没有编译，因此它不会给出运行时错误。

你这里的引号太多了：

```
String query1 = "INSERT INTO " + tbName + " (" Date, Sensor... 
```

应该：

```
String query1 = "INSERT INTO " + tbName + " ( Date, Sensor... 
```

当你有一个日期时间值时，你需要在它周围加上撇号：

```
...LUES (" + dataGridView1.Rows[i].Cells[0].Value + "," + ... 
```

应该：

```
...LUES ('" + dataGridView1.Rows[i].Cells[0].Value + "'," + ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:55:01.047

尝试使用参数化查询。像这样：

```
string query = "INSERT INTO table (Date, SensorValue, Differences) VALUES (@Date, @SensorValue, @Differences)";            
var command = new SqlCommand(query, con);
command.Parameters.Add(new SqlParameter("@Date", System.Data.SqlDbType.DateTime));
command.Parameters.Add(new SqlParameter("@SensorValue", System.Data.SqlDbType.Float));
command.Parameters.Add(new SqlParameter("@Differences", System.Data.SqlDbType.Float));
for (int i = 0; i < dataGridView1.Rows.Count-1; i++)
{
    command.Parameters["@Date"].Value = Convert.ToDateTime(dataGridView1.Rows[i].Cells[0].Value);
    command.Parameters["@SensorValue"].Value = Convert.ToDecimal(dataGridView1.Rows[i].Cells[1].Value);
    command.Parameters["@Differences"].Value = Convert.ToDecimal(dataGridView1.Rows[i].Cells[2].Value);
    command.ExecuteNonQuery();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:45:48.033

在没有看到所有变量的情况下很难诊断，尽管我非常推荐使用参数。它不仅会使这类问题更容易被发现，而且还能保护您免受 sql 注入攻击。

# ajax - 没有表单标记的 ASP.NET MVC3 客户端验证

> ID：13525522
> 
> 赞同：3
> 
> 时间：2012-11-23T08:42:44.113
> 
> 标签：ajax, asp.net-mvc-3, jquery, jquery-validate

我有一个包含一些输入字段的视图。它们绑定到视图模型。他们也有验证信息。但是视图没有表单标签（Ajax.BeginForm 和 Html.BeginForm 都没有）。

用户输入一些输入，从表中选择（通过复选框）一些行，然后单击一个按钮。我已经在客户端处理了这个按钮的点击事件，并编写了一个 AJAX 调用来将数据发送到服务器。这工作正常，除了客户端验证。由于我没有表单标签，因此忽略了客户端验证。有没有办法在不使用表单标签的情况下验证用户输入并在必要时显示错误消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T16:12:31.080

不，jquery 验证插件仅适用于表单标签包含的表单。您可以调用两种方法来验证您的字段

```
$('some_selector').validate()
$('some_selector').valid() 
```

如果没有表单标签，这些都不起作用

# c# - 带代表的事件处理程序

> ID：13525523
> 
> 赞同：3
> 
> 时间：2012-11-23T08:42:48.227
> 
> 标签：c#, event-handling

我将在 C# 中创建动态按钮，并且需要向 Click-Event-Handler (ID) 添加一个参数。

但是，在这个例子中，输出总是**所有按钮**的最后一个参数“10” ，而不是“1-2-3-4-5-....”，为什么？

```
for(int counter = 1; counter < 10; counter++)
{

    // Add new button

    Button btn = new Button();

    btn.Width = 250;
    btn.Height = 50;

    btn.Click += delegate (object sender1, EventArgs e1)
    { myEventHandler(sender1, e1, counter); };

    Test.Controls.Add(btn);

}

public void myEventHandler(object sender, EventArgs e, int i)
{

    MessageBox.Show("Test: " + i);

} 
```

感谢您的帮助！

弗洛里安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:47:48.640

这是因为未捕获计数器变量。这意味着当循环完成时，计数器的值将是 10，因此所有委托都将具有该值来修复您可以在循环中使用如下变量：

```
for(int counter = 1; counter < 10; counter++)
{

    // Add new button

    Button btn = new Button();

    btn.Width = 250;
    btn.Height = 50;

    int num = counter;
    btn.Click += delegate (object sender1, EventArgs e1)
    { myEventHandler(sender1, e1, num ); };

    Test.Controls.Add(btn);

}

public void myEventHandler(object sender, EventArgs e, int i)
{

    MessageBox.Show("Test: " + i);

} 
```

有关更多信息，请参阅 stackoverflow 上的此问题[在 C# 循环中捕获的变量](https://stackoverflow.com/questions/271440/c-sharp-captured-variable-in-loop)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T08:47:06.960

那是因为委托捕获了变量的*引用而不是**值*。这意味着所有十个委托都包含对同一个变量的引用。执行委托后，此变量自然具有值 10，因为您的循环已经完成。`counter`*`counter`*

 *像这样修复它：

```
var tmp = counter;
btn.Click += delegate (object sender1, EventArgs e1)
{ myEventHandler(sender1, e1, tmp); }; 
```

现在每个委托都有自己的实例。

顺便说一句，您可以使用 lambda 语法使这段代码不那么冗长：

```
var tmp = counter;
btn.Click += (sender1, e1) => myEventHandler(sender1, e1, tmp); 
```*

# cuda - 启动超时并终止

> ID：13525530
> 
> 赞同：3
> 
> 时间：2012-11-23T08:43:11.010
> 
> 标签：cuda

我正在使用带有 CUDA 4.2 的 Tesla 2075 (cc 2.0)。我在非显示**GPU（特斯拉）**上运行我的程序，我收到错误：

```
"the launch timed out and was terminated " 
```

在非显示 GPU 上是否会出现此错误？

而且，我怎么能禁用看门狗定时器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T09:03:32.963

我假设您在 Windows 上运行。如果是这样，请将 Tesla 2075 置于[TCC 模式](http://http.developer.nvidia.com/ParallelNsight/2.1/Documentation/UserGuide/HTML/Content/Tesla_Compute_Cluster.htm)。这将允许计算访问，Windows 不会像显示设备那样管理它，这将摆脱看门狗计时器。如果您在查找 nvidia-smi 时遇到问题，只需在 Windows 中搜索 nvidia-smi.exe。（它应该已经安装了显示驱动程序。）然后，如果C2075是系统中唯一的CUDA GPU，命令将是这样的： `nvidia-smi -g 0 -dm 1` 您也可以`nvidia-smi --help`获取该工具的命令行帮助。更改此设置后，这可能需要重新启动系统，以使卡进入 TCC 模式。

另一方面，如果您在这台机器上运行 linux 和 X-windows，则解决方案会有所不同。一种方法是简单地禁用 X，例如将运行级别设置为 3 并重新启动，但还有其他方法可以做到这一点。但是，您将在另一个 GPU 上丢失 X GUI（我假设您有另一个 GPU，因为您说这是一个非显示 GPU）。要在另一个 GPU 上保留 X 和 GUI，有必要修改 xorg.conf 文件以将 X 强制到显示 GPU 上并将其从计算 (Tesla) GPU 中取出。执行此操作的方法会有所不同，但如果您有 2 个 NVIDIA GPU（一个用于显示），则应使用 xorg.conf 文件的相关“显示”部分中的 BusID 参数将 X 显示强制到单个 GPU 上。此外，应删除任何其他“显示”部分。例如：

```
 BusID “PCI:34:0:0” 
```

GPU的PCI ID可以根据`lspci`命令或`nvidia-smi –a`命令来确定。

您可能还希望参考NVIDIA 驱动程序[README 文件的](http://us.download.nvidia.com/XFree86/Linux-x86_64/310.19/README/index.html)[X 配置选项附录](http://us.download.nvidia.com/XFree86/Linux-x86_64/310.19/README/xconfigoptions.html)。

# sql - 如何访问包中声明的类型，有可能吗？

> ID：13525532
> 
> 赞同：0
> 
> 时间：2012-11-23T08:43:13.527
> 
> 标签：sql, plsql

例如，当我在一个包中创建 varray 时`type MyArray Is Varying Array(20) Of Varchar2(512);`

是否可以从另一个包（或任何地方）访问`myPackage.MyArray...`？？？或者如何解决我到处都需要 MyArray 的问题（不能使用全局类型......）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:29:24.700

是的，你在你的包规范中创建这个变量，并像 mypackage.variable 一样为你的会话访问它。您可以使用 PRAGMA SERIALLY_REUSABLE；

# java - 看来我无法更新对象

> ID：13525537
> 
> 赞同：0
> 
> 时间：2012-11-23T08:43:25.333
> 
> 标签：java, object, stack

我正在创建然后从堆栈中删除项目。在这里，我将原始牌组传递给一个方法，在该方法中我尝试确定牌组现在是否为空。如果为空，我想通过创建新牌组并将其引用回原始牌组来重置牌组。

我的逻辑有什么问题？我知道出了点问题，因为当我到达牌组的尽头，最后 if 语句开始运行时，它不会让我稍后逃脱，并且一直告诉我牌组是空的。

```
private static Deck checkDeck(Deck deck)
{
    if(deck.isEmpty())
    {
        System.out.print("Deck is empty! You must recreate and reshuffle deck of cards!\n\n");
        System.out.println("Creating deck...");
        deck = new Deck(DECKSIZE);
        deck.createDeck();
        System.out.println("Shuffling deck...");
        deck.shuffleDeck();
        System.out.print("\n");
    }

    return deck;
} 
```

主类：

```
public static void main(String[] args) throws IOException 
{
    Deck deck = null;
    Hand playersHand = null;
    Hand dealersHand = null;

    System.out.println("Creating deck...");
    deck = new Deck(DECKSIZE);
    deck.createDeck();

    // Remove elements of deck...

    deck = checkDeck(deck);

    temp = new Card(deck.pop());
    System.out.println("Drawing players card... " + temp.toString());
    playersHand.insert(temp);
} 
```

示例输出运行：

```
deal, bet, hit, stay, split, leave: deal

Drawing players card... 9 ♣
Drawing dealers card... 6 ♠
Drawing players card... 11 ♠
Drawing dealers card... 13 ♥

Dealers Hand: K_♥ 6_♠ = 16
Players Hand: J_♠ 9_♣ = 19

deal, bet, hit, stay, split, leave: deal

Deck is empty! You must recreate and reshuffle deck of cards!

Creating deck...
Shuffling deck...

Drawing players card... 13 ♥
Drawing dealers card... 6 ♣
Drawing players card... 7 ♠
Drawing dealers card... 11 ♣

Dealers Hand: J_♣ 6_♣ = 16
Players Hand: 7_♠ K_♥ = 17

deal, bet, hit, stay, split, leave: deal

Deck is empty! You must recreate and reshuffle deck of cards!

Creating deck...
Shuffling deck...

Drawing players card... 4 ♦
Drawing dealers card... 9 ♥
Drawing players card... 3 ♥
Drawing dealers card... 9 ♦

Dealers Hand: 9_♦ 9_♥ = 18
Players Hand: 3_♥ 4_♦ = 7

deal, bet, hit, stay, split, leave: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:57:03.893

该`checkDeck()`函数使用了一个 main 函数没有的函数，并且您没有显示 ( `Deck.shuffleDeck()`)。鉴于您确实显示的代码，我最好的猜测是错误就在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T12:26:12.270

对于我所看到的，您的代码似乎没问题。问题应该出在您执行循环的任何地方，并向“玩家”询问动作。似乎您要么每次都创建一个新的空牌组，要么在此循环中取出剩余的牌。

# sql - 如何使用 R 从 SQL 数据库中检索很长的 XML 字符串？

> ID：13525539
> 
> 赞同：4
> 
> 时间：2012-11-23T08:43:33.460
> 
> 标签：sql, r, odbc

我有一个脚本可以从 SQL 数据库中获取 XML 文件。这是我如何做到的：

```
library(RODBC)
library(XML)

myconn <- odbcConnect("mydsn")

query.text <- "SELECT xmlfield FROM db WHERE id = 12345"
doc <- sqlQuery(myconn, query.text, stringsAsFactors=FALSE)
doc <- iconv(doc[1,1], from="latin1", to="UTF-8")
doc <- xmlInternalTreeParse(doc, encoding="UTF-8") 
```

但是，解析不适用于特定的数据库行，尽管当我将此字段的内容复制到单独的文件中并从文件中解析时它起作用了。经过两天的“反复试验”，我确定了主要问题。似乎以这种方式查询短 XML 文件不会导致任何问题，但是当我查询较大的文件时，字符串在 65534 个字符后被截断。因此，缺少 XML 文件的结尾，无法解析该文件。

我认为这可能是对我计算机上 ODBC 连接的总体限制。但是，另一个也使用 ODBC 从同一数据库中获取同一 XML 字段的程序可以毫无问题地执行此操作。所以我想这是一个`R`特定的问题。

任何想法如何解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T13:46:40.197

我已经写信给包作者，终于收到了以下答复：

> 你不识字不是我的问题，也不是合理的借口。
> 
> 手册说
> 
> '\item[Character types] 字符类型可以分为三种方式：固定或可变长度、最大大小和使用的字符
> 集。最常用的类型\footnote{它们的 SQL 名称
> 是 \code{CHARACTER VARYING} 和 \code{CHARACTER}，但是
> 对于日常使用来说太麻烦了。} 对于
> 可变长度的短字符串 (到某个最大值）和 \code{char} 用于
> 固定长度的短字符串（通常用空格右填充）。
> 'short' 的值因 DBMS 不同而不同，至少为 254，通常为
> 几千——通常其他类型可用于更长的
> 字符串。有一个健全性检查，
> 在读取时只允许最多 65535 个字节的字符串：这可以通过以下方式删除
> 重新编译 \pkg{RODBC}。

本手册可在软件包`doc`目录中找到。`RODBC`此信息不包含在参考手册中。

同时我找到了一个很好的解决方案来检索我的数据而不使用`RODBC`，我没有尝试重新编译这个包。但我希望这个答案对那些遇到同样问题的人有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-29T11:38:42.460

如果您想更改 RODBC 的源并重新编译，使用 github 和 devtools 包相当容易：

1.  在这里分叉回购：[https ://github.com/cran/RODBC](https://github.com/cran/RODBC)
2.  注释掉这一行（这来自 R-3.03 版本）：[https ://github.com/cran/RODBC/blob/R-3.0.3/src/RODBC.c#L734](https://github.com/cran/RODBC/blob/R-3.0.3/src/RODBC.c#L734)

    ```
     if (datalen > 65535) datalen = 65535; 
    ```

3.  （重新）从 github 安装：

    ```
    devtools::install.github("<yourgithubname>/RODBC") 
    ```

现在您应该能够读取大字符串。不过需要注意的是，由于尝试分配过多的内存，您可能会遇到错误（健全性检查之后的行是：

```
 thisHandle->ColData[i].pData = Calloc(nRows * (datalen + 1), char); 
```

因此，最简单的方法是在 R 的 sqlQuery 调用中设置参数 rows_at_time = 1

高温高压

# java - 灰度图像过滤器

> ID：13525540
> 
> 赞同：0
> 
> 时间：2012-11-23T08:43:50.980
> 
> 标签：java, image, matrix, rgb, bufferedimage

我正在研究一个图像过滤器，用于使用矩阵进行灰度化，并在后续循环中将 R+G+B 颜色除以 3，如下所示。

```
for (int i = 0; i < height; i++) {
        for (int j = 0; j < width; j++) {
            Color c = inPixels[i][j];
            outPixels[i][j] = grayLevels[(c.getRed() + c.getGreen() + c.getBlue()) / 3];
        }
    } 
```

但是我听说用强度来做会好很多，所以我尝试了这样的方法，但似乎没有用。当我试图像这样过滤它时，我的 GUI 应用程序会冻结。也许有人可以帮助我解决这个循环？

```
 for (int i = 0; i < height; i++) { 
            for (int j = 0; j < width; j++) { 
                short[][] intensity = computeIntensity(inPixels); 
                Color c = inPixels[i][j]; 

                outPixels[i][j] = grayLevels[(c.getRed() + c.getGreen() + c.getBlue()) / 3];
        } 
```

如果需要，我可以发布我正在使用的其他类，但我认为没有必要，因为代码几乎是不言自明的。

编辑：强度方法来了：

```
protected short[][] computeIntensity(Color[][] pixels) {
    int height = pixels.length;
    int width = pixels[0].length;
    short[][] intensity = new short[height][width];
    for (int i = 0; i < height; i++) {
        for (int j = 0; j < width; j++) {
            Color c = pixels[i][j];
            intensity[i][j] = (short) ((c.getRed() + c.getGreen() + c
                    .getBlue()) / 3);
        }
    }
    return intensity;
} 
```

谢谢，迈克尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:13:38.800

正如上面评论中所说，您可以使用更好的方程来计算灰度：`red * 0.299 + green * 0.587 + blue * 0.114`。

```
protected Color[][] computeIntensity(Color[][] pixels) {
    int height = pixels.length;
    int width = pixels[0].length;
    Color[][] intensity = new Color[height][width];
    for (int i = 0; i < height; i++) {
        for (int j = 0; j < width; j++) {
            Color c = pixels[i][j];
            intensity[i][j] = new Color(c.getRed() * 0.299, c.getGreen() * 0.587, c.getBlue() * 0.114);
        }
    }
    return intensity;
}

outPixels = computeIntensity(inPixels); 
```

已经在`computeIntensity`计算灰度，因此无需重新迭代所有像素。您甚至可以将其重命名为`computeGrayScales`

# css - 等号前的星号是什么意思 (*=) ？感叹号呢？

> ID：13525542
> 
> 赞同：9
> 
> 时间：2012-11-23T08:43:57.797
> 
> 标签：css

我在 css 中找到了这些符号：

```
.nav li ul li a [class*="icol-"] { opacity: 0.5; filter: alpha(opacity=50); padding-top: 4px; }

.secNav .chzn-container { width: 100%!important; max-width: 100%; } 
```

`*`前面的`=`符号是什么意思？使用`!`符号时是注释吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-23T08:47:11.003

```
element[attribute*="includesthis"] 
```

换句话说：

```
<a class="someclassicol-hello">Click me and win a free monkey</a> 
```

被匹配

```
a[class*="icol-"] 
```

如果字符串出现在属性中的任何位置，则为匹配。

也有`^=`for begin with 和`$=`for ends with。[在此处阅读更多信息](http://css-tricks.com/attribute-selectors/)。

* * *

`!important`强制规则相互覆盖，否则它们不会。

```
a { color: red !important }
a.blue { color: blue }

<a class="blue">I'm actually red, because the less specific rule is !important</a> 
```

[在此处阅读更多信息](http://coding.smashingmagazine.com/2010/11/02/the-important-css-declaration-how-and-when-to-use-it/)。尤其是这一点：

> **什么时候应该`!important`使用？**
> 
> 与任何技术一样，根据情况有利有弊。那么什么时候应该使用它，如果有的话？这是我对潜在有效用途的主观概述。
> 
> # 绝不
> 
> `!important`除非在用尽所有其他途径后绝对必要，否则不应使用声明。如果你使用 !important 是出于懒惰、避免正确调试或匆忙完成项目，那么你就是在滥用它，你（或继承你项目的人）将遭受后果。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-23T08:46:35.577

`!`是`!important`;的一部分 这**不是**评论。`!important`强制规则始终被应用。它通常用于覆盖或防止您的样式被覆盖。

意思是“`*=`包含”。所以在这个例子中，第一行是寻找类名`.nav li ul li a`包含“icol-”的元素的所有子元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:52:44.337

`*=`是一个属性选择器，见[CSS3 规范](http://www.w3.org/TR/css3-selectors/#attribute-selectors)

`!important`意味着，该规则被样式的作者认为是重要的，不应被覆盖，请参阅例如[CSS2](http://www.w3.org/TR/2011/REC-CSS2-20110607/cascade.html#important-rules)以获得深入的解释。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T08:50:38.403

来自[W3 推荐](http://www.w3.org/TR/selectors/#attribute-substrings)：

> **`[att*=val]`**
> 
> 表示具有 att 属性的元素，其值包含至少一个子字符串“val”的实例。如果 "val" 是空字符串，则选择器不代表任何内容。

因此，在您的情况下，它将匹配`icol-`其类属性中具有的任何元素（的子元素`.nav li ul li a`）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-11-29T20:21:22.160

`~`不要与仅与它周围的**空白**匹配的哪个相混淆。

* * *

```
[class*="foo"] /* 'fooA bar' */ 
```

将匹配包含`foo`（*周围有或没有空格*）的类

```
[class~="foo"] /* 'foo bar' */ 
```

将匹配`foo`仅包含其**周围空间的类**

* * *

还有：

```
[class^="foo"] // begins with foo ('fooABC')
[class$="foo"] // ends with foo ('ABCfoo')
[class|="foo"] // begins with foo and is separated by a dash ('foo-bar') 
```

更多细节在这里：[复杂选择器](http://learn.shayhowe.com/advanced-html-css/complex-selectors)

# java - 如何使用java识别系统中的扫描仪、网络摄像头等

> ID：13525544
> 
> 赞同：3
> 
> 时间：2012-11-23T08:44:10.247
> 
> 标签：java, webcam, image-scanner

我尝试从使用 Java 连接到我的系统或网络的扫描仪、网络摄像头等设备获取图像。在 Java 中，我们有用于扫描仪的第三方库 JTWAIN 和用于网络摄像头的 JMF/FMJ。在获取图像之前，我需要显示弹出窗口，连接设备，如扫描仪和网络摄像头，然后我将选择设备然后获取图像。

我的问题是：

1.  检测设备扫描仪、网络摄像头等

2.  是否有任何同时支持扫描仪和网络摄像头设备的开源库？

# ruby - 将 Require.JS (r.js build) 包含到 Middleman 构建中

> ID：13525547
> 
> 赞同：4
> 
> 时间：2012-11-23T08:44:36.113
> 
> 标签：ruby, requirejs, middleman, r.js

我与 Middleman 一起开发、测试和构建我的 HAML 和 SASS 项目。

现在我也喜欢使用 require.js。有什么办法可以将 R.js 构建集成到 Middleman 构建中？

你有什么经验吗？你如何在中间人中处理 require.js？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T13:17:05.077

就“运行 r.js”而言，它非常简单：

1.  将 r.js 保存到项目的根目录中。
2.  定义一个在构建后执行 r.js 的自定义扩展（config.rb）：

    ```
    module RequireJS
        class << self
            def registered(app)
                app.after_build do |builder|
                    exec('node r.js -o build/javascripts/app.build.js');
                end
            end
            alias :included :registered
        end
    end

    ::Middleman::Extensions.register(:requirejs, RequireJS) 
    ```

3.  激活自定义扩展 (config.rb)：

    ```
    configure :build do
        …
        activate :requirejs
    end 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T13:01:59.043

`r.js`可以[`node`](http://nodejs.org)通过命令行使用，就像中间人一样。我不知道你究竟是如何使用中间人的，但在你的工作流程中加入另一个命令应该不是问题。您可以在[此处找到](http://requirejs.org/docs/optimization.html#basics)[有关如何`r.js`](http://requirejs.org/docs/optimization.html#basics)从命令行使用的说明。

# ruby-on-rails - 以模态方式访问视图

> ID：13525549
> 
> 赞同：0
> 
> 时间：2012-11-23T08:44:39.200
> 
> 标签：ruby-on-rails, modal-dialog

我正在尝试在我的应用程序中以模式访问我的一个编辑视图。我的 Show.html 读数如下所示

```
<%- model_class = Reading -%>
<div class="page-header">
<h1><%=t '.title', :default => model_class.model_name.human %></h1>
 </div>

<dl class="dl-horizontal">
  <dt><strong><%= model_class.human_attribute_name(:customer_id) %>:</strong></dt>
    <dd><%= @reading.customer_id %></dd>
  <dt><strong><%= model_class.human_attribute_name(:date_of_reading) %>:</strong></dt>
    <dd><%= @reading.date_of_reading %></dd>
  <dt><strong><%= model_class.human_attribute_name(:reading1) %>:</strong></dt>
    <dd><%= @reading.reading1 %></dd>
  <dt><strong><%= model_class.human_attribute_name(:reading2) %>:</strong></dt>
    <dd><%= @reading.reading2 %></dd>
  <dt><strong><%= model_class.human_attribute_name(:reading3) %>:</strong></dt>
    <dd><%= @reading.reading3 %></dd>
</dl>

<div class="form-actions">
   <%= link_to t('.back', :default => t("helpers.links.back")),
          customer_readings_path, :class => 'btn'  %>
   <%= link_to t('.edit', :default => t("helpers.links.edit")),
          edit_customer_reading_path(@reading.customer, @reading), :class => 'btn', :data => {:toggle => "modal", :target => "#editItemModal"} %>
   <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
          customer_reading_path(@reading.customer),
          :method => 'delete',
          :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm",  :default => 'Are you sure?')) },
          :class => 'btn btn-danger' %>
</div> 
```

在我的编辑视图中，阅读/编辑

```
<div id= "editItemModal" class="modal hide fade" tabindex="-1" role="dialog">
<button type="button" class="close" data-dismiss="modal">x</button></h1>
<div class = "page-header">
<h1> Editing Readings </h1>
</div>

<%= render 'form_reading'%>
</div> 
```

但是，在我的节目中单击编辑时，编辑视图不会显示为模式，它只是显示一个空白页面。我能错过什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:04:32.470

1）首先，您需要通过添加 ajaxify 编辑链接`:remote => true`。

2）这个div需要在显示页面上。（只有div而不是里面的内容。）

```
<div id= "editItemModal" class="modal hide fade" tabindex="-1" role="dialog">

</div> 
```

3）`edit.html.erb`通过将其名称更改为`_edit.html.erb`

4) 在显示页面上添加此 javascript 代码

```
$('#link_id').on('ajax:success', function(e, data){
  $('#editItemModal').html(data);
}); 
```

5）在您的控制器编辑操作中写下这个`render 'edit', :layout => false`

此代码中可能存在一些拼写错误或小错误。但是我已经用过很多次了。所以我建议你试试这个。

# ubuntu - Rabbitmq、ubuntu 和自动启动

> ID：13525554
> 
> 赞同：0
> 
> 时间：2012-11-23T08:45:02.100
> 
> 标签：ubuntu, rabbitmq, upstart

我想在 ubuntu 上自动启动 rabbitmq，并且存在多个虚拟主机和用户。

我怎样才能做到这一点？我写了一个小的暴发户脚本是这样的：

```
description "Rabbit Application"
start on runlevel [2345]
stop on runlevel [016]
respawn
exec rabbitmq-server -detached 
```

问题是，当它启动时，它没有我之前设置的用户或虚拟主机（在服务器重置之前），这是我通过`sudo rabbitmqctl`命令添加的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:23:38.437

通过脚本运行 RabbitMQ 在哪个用户上下文下运行？

在 Windows 上运行时，如果 RabbitMQ 在我的用户帐户下启动，则队列/虚拟主机/用户与作为 Windows 服务运行时不同。

我解决这个问题的方法是设置一些环境变量，这样无论谁在运行 RabbitMQ，都会读取相同的配置并使用相同的队列目录等。查看[http://www.rabbitmq.com/relocate.html](http://www.rabbitmq.com/relocate.html)了解详情。

# jquery - 使用 HTML5 和 Canvas 绘制网站效果

> ID：13525561
> 
> 赞同：2
> 
> 时间：2012-11-23T08:45:18.780
> 
> 标签：jquery, html, jquery-plugins, canvas

我正在寻找“绘制网站效果”。基本上，单击笔图标和覆盖将放置在用户可以绘制的屏幕上。到目前为止，我遇到代码问题有两个原因：

1) 开始添加颜色、橡皮擦和尺寸很复杂

2）画布不接受百分比宽度，所以我不能覆盖整个网站

我看过[http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/](http://www.williammalone.com/articles/create-html5-canvas-javascript-drawing-app/)和[http://cool-php-tutorials.blogspot.co.uk/2011/05/ simple-html5-drawing-app-with-saving.html](http://cool-php-tutorials.blogspot.co.uk/2011/05/simple-html5-drawing-app-with-saving.html)

这两个网站都很好，但我想知道是否有人知道实现这一目标的预构建解决方案，或者解决问题的方法（主要是第二个）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:49:44.497

> 画布不接受百分比宽度，所以我不能覆盖整个网站

只需使用 and 计算文档的宽度和高度，`$(document).width()`然后`$(document).height()`将此值分配给画布。

# .net - 是否可以创建强类型的 web.config 引用？

> ID：13525563
> 
> 赞同：6
> 
> 时间：2012-11-23T08:45:25.597
> 
> 标签：.net, configuration

是否可以在 web.config 或 app.config 中创建强类型引用，以便在未将这些类型引用添加到项目时构建将中断？

例如，假设我有一个 WhizzBangerFactory，它在 web.config 中查找已声明的 WhizzBangers。我可能有这样的配置，

```
<whizBangs>
<add name="SuperDooper" type="MyProject.WhizzBangers.SuperDooperWhizzBanger, MyProject.WhizzBangers" />
<add name="Fantastical" type="AnotherProject.WhizzBangers.FantasticalWhizzBanger, AnotherProject.WhizzBangers" />
</whizBangs> 
```

即使没有对 MyProject.WhizzBangers 和AnotherProject.WhizzBangers 的引用，这也将编译得非常好。我想要的是构建失败并通知我我错过了参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T03:16:12.063

web.config 是仅运行时解析。为构建成功或失败而迟到。

如果相同的构建构建了 web.config 中引用的类型，则解析 web.config 文件以验证所有文件是否存在（这将要求网站所需的所有二进制文件最终都位于一个公共目录中。对于像 tfs 之类的东西，这将作为编译后步骤完成，只有成功时才会将二进制文件复制到放置目录，否则构建失败

如果其他类型由另一个构建提供并作为安装程序的一部分包含在内，则可以将相同类型的配置文件解析作为独立应用程序（安装的一部分）运行作为健全性检查

另一种方式（将在您的构建中包含另一个项目，该项目引用您可能需要的所有类型，创建该类型的实例以便编译器不会优化）并将此项目添加为您的 Web 项目的依赖项。这样，如果类型项目失败，那么 Web 构建项目也会失败

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T16:18:39.083

两点：

首先，即使引用丢失，您的项目如何编译？这意味着您实际上并不需要它们！你怎么能有一个你不需要的东西的强类型引用？当您错过了*不必要*的参考时，您要求得到警告？

第二，

我仍然不清楚你想要做什么，但我认为你想要的可以通过创建预构建步骤来实现。您可能需要编写一个小 C# 控制台程序来处理和检查 web.config 文件。

它类似于 Visual Studio 生成一个类来表示您的资源或属性（如果您使用工具添加它们）的方式。例如，如果您转到 Project -> Properties, Resources 选项卡，然后创建一个资源，您会发现 Visual Studio 会生成一个 Resources.Designer.cs 文件，其中包含一个类，您可以在代码中将其引用为

```
Properties.Resources.MyTestResource 
```

有趣的是，在生成的代码里面是这个注释

```
/// <summary>
///   A strongly-typed resource class, for looking up localized strings, etc.
/// </summary>
// This class was auto-generated by the StronglyTypedResourceBuilder
// class via a tool like ResGen or Visual Studio.
// To add or remove a member, edit your .ResX file then rerun ResGen
// with the /str option, or rebuild your VS project. 
```

听起来您可能可以在您的项目中做类似的事情，也许是通过添加一个为您生成类的预构建步骤？

StronglyTypedResourceBuilder 类在这里有一个参考页面：

[http://msdn.microsoft.com/en-us/library/system.resources.tools.stronglytypedresourcebuilder.aspx](http://msdn.microsoft.com/en-us/library/system.resources.tools.stronglytypedresourcebuilder.aspx)

看起来相当容易使用。不过，这可能不适用于您的场景，我只是将其用作示例。听起来更像是您想要生成代理类型或其他东西......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T18:35:01.387

我会推荐你​​作为替代使用某种 IoC 系统。Microsoft 已经提供了 Unity 框架，它会比您尝试的这个解决方案更好。Ninject也相当不错。

[http://www.ninject.org/](http://www.ninject.org/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T16:08:52.647

Resharper 可以帮助您解决这个问题。

它在视觉上区分了 web.config 中未引用类型的内容（或者您犯了一个错误 - 在此示例中，我在“Microsoft”的末尾取了一个“t”）

![在此处输入图像描述](../Images/a28978df60282666c8d8b56fa0ece753.png)

但是，它仍然没有编译失败，这是一个耻辱。它应该！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T12:43:04.023

通过创建一个[新的 Task 实现](http://msdn.microsoft.com/en-us/library/t9883dzc.aspx)或使用[Inline Task](http://msdn.microsoft.com/en-us/library/dd722601.aspx)来创建一个 Msbuild 步骤，它从您的 web.config 解析类名并尝试使用[Assembly.Load](http://msdn.microsoft.com/en-us/library/ky3942xh.aspx)加载它们。如果加载失败，它将抛出一个异常，这将使你的构建失败。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-05T09:56:42.497

Based on what Philip Daniels said, you might need a post-build step.

Let the project compile so that it can place all the referenced DLLs in its output folder and then have a tool (probably custom written or maybe if there is something on Github or Codeplex) scan the .config file and see if the specified type can be found in the output folder.

If it can't be found, then the tool returns a non-zero return code to indicate to the build process (just make sure it hooks into the build process, you would have to let the ms-project build event capture that error code manually, I think) that it failed with an appropriate error message.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-05T13:27:19.110

您可以尝试编写一个单元测试来使用此配置并将测试集成为构建的一部分吗？这将给出正确的指示，即使在自动构建系统中某些测试也会失败，并帮助您发现问题。

或者您可以尝试将 whizBangs 配置放在单独的配置文件中，并在 web.config 中提及源代码。保存这个单独的配置文件后，您可以调用 customtool（VS 中已经提供的自定义工具的工具），它将自动生成一个形成配置文件的类表示的 cs 文件。可以使用自定义工具生成的适当注释签入此 cs 文件，以指示其用途。每当开发人员更改此文件并保存时，config 和 cs 文件都将被检出和编辑。

# android - 2 FragmentActivity之间的Fragment Transaction

> ID：13525564
> 
> 赞同：0
> 
> 时间：2012-11-23T08:45:26.547
> 
> 标签：android, android-fragments

我在我的代码中实现了侧导航，我使用了这个库

[https://github.com/korovyansk/android-fb-like-slideout-navigation](https://github.com/korovyansk/android-fb-like-slideout-navigation)

列表端扩展了 FragmentActivity，主端扩展了 FragmentActivity（见图）。 ![在此处输入图像描述](../Images/8fbab9bb6e1c29a81cc54c747f407cc8.png)

当我单击列表中的项目时，我希望将主要片段替换为另一个片段

所以它有一种方法可以从列表 FragmentActivity 中的 Main FragmentActivity 中执行事务片段我可以添加到此代码中以使 Main 中的事务不在 List 中

```
FragmentTransaction ft =getActivity().getSupportFragmentManager().beginTransaction();
ft.replace(R.id.fragment, newFragment);
ft.addToBackStack(null);
ft.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:59:06.527

```
FragmentManager fm = getActivity().getSupportFragmentManager();
FragmentTransaction ft = fm.beginTransaction();
if(aFragment!=null) {
    ft.detach(aFragment);//*ft.hide(aFragment);
    ft.commit();
} 
ft.attach(bFragment);//*ft.show(bFragment);
ft.commit(); 
```

`*` *使用其中之一*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T07:57:51.787

我通过使用 ft.commitAllowingStateLoss(); 解决了它 它解决了异常：在 onSaveInstanceState 之后无法执行此操作

# mixpanel - 我什么时候打电话给 mixpanel.people.identify

> ID：13525566
> 
> 赞同：5
> 
> 时间：2012-11-23T08:45:36.023
> 
> 标签：mixpanel

如何告诉 mixpanel 我登录用户的用户 ID？

我是否需要在`mixpanel.people.identify()`每次用户登录时调用，或者仅在我第一次在 mixpanel 上创建它们时调用？

如果只是第一次，mixpanel 怎么知道将事件关联到谁？

此外，一旦我确定了这个人，所有事件都可以追溯到那个人，还是我需要`people.set()`显式调用以将通用事件与用户特定事件分开跟踪？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-25T03:50:17.860

您应该`mixpanel.people.identify()`在每次用户登录时调用它。如果您愿意，您甚至可以在每次页面以登录状态加载时调用它。

`identify`在 cookie 中设置一些关于`distinct_id`库在发送人员数据时应该使用什么的数据。

~~如果您`mixpanel.identify`使用 相同`distinct_id`的调用`mixpanel.people.identify`，~~您发送的事件（使用`mixpanel.track`）将显示在客户选项卡上的用户配置文件下。但是，为了让用户完全出现，您需要调用`mixpanel.people.set`（或`.add`）至少一次。

编辑：`mixpanel.people.identify`不再需要；你可以打电话`mixpanel.identify`，它会同时设置。

# html - 打开后，网站快速向左？

> ID：13525567
> 
> 赞同：5
> 
> 时间：2012-11-23T08:45:43.010
> 
> 标签：html, layout

当您打开我的网站[“7daysdistribution”](http://7daysdistribution.com/blogg/)时，布局迅速向左移动，看起来很糟糕。这会发生几秒钟，然后它看起来是正确的。并非所有页面都体验到这个唯一的家（有时）、品牌、联系方式。我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:01:58.400

它在 Opera 的左侧也快速闪烁，实际上我可以在所有页面上看到它。

尝试在源代码中进一步移动*responsive-style.css 。* `<link>`可能是加载需要一些时间，并且在加载该样式之前，中心对齐`.container`不会生效。

在 IE8 中效果会更加明显，因为 IE8 一次只下载两个文件，因此需要更长的时间才能到达*responsive-style.css*，因为要先下载很多其他文件。

# c# - Sharepoint 从包含自定义字段的 WebPart 检索数据

> ID：13525568
> 
> 赞同：1
> 
> 时间：2012-11-23T08:45:42.990
> 
> 标签：c#, sharepoint-2010, sharepoint-designer

我有一个包含自定义字段的 WebPart 站点。 [http://wsscg.blob.core.windows.net/resources/forum/front/aa432.PNG](http://wsscg.blob.core.windows.net/resources/forum/front/aa432.PNG)。

我的目标如下：我想在此表单下方添加一个按钮，单击后，其中的数据将进入自定义列表。

到目前为止，我已经设法在 Sharepoint Designer 中添加了一个按钮和一个内联代码。它将一些数据（如 1、2、3、4、5）添加到我想要的列表中。但问题（可能是最后一个）是如何从表单中检索数据。

我将非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:31:59.793

我建议你在这里搜索：http: [//sharepointjavascript.wordpress.com/](http://sharepointjavascript.wordpress.com/)

我发现有很多有用的客户端陷阱。网站今天似乎关闭了，但请查看动态 js sp 表单的缓存版本： [http ://webcache.googleusercontent.com/search?q=cache:j97GDCJkwsYJ:sharepointjavascript.wordpress.com/2012/01/19/dynamic- forms-for-sharepoint/+&cd=2&hl=en&ct=clnk&gl=en](http://webcache.googleusercontent.com/search?q=cache:j97GDCJkwsYJ:sharepointjavascript.wordpress.com/2012/01/19/dynamic-forms-for-sharepoint/%20&cd=2&hl=en&ct=clnk&gl=en) 其中使用了 getFieldValue 函数。

希望能有所帮助。

# unit-testing - 单元测试 - 我应该使用模拟还是让私有方法更可见

> ID：13525571
> 
> 赞同：1
> 
> 时间：2012-11-23T08:45:53.070
> 
> 标签：unit-testing, mocking

我正在为我正在开发的应用程序的一个新模块寻找一些设计建议，特别是关于如何使设计可测试。

这个问题很常见——从数据库中加载一些数据，对数据运行一些操作，然后将结果保存到数据库中。应用程序中的大多数其他模块具有以下模式：

```
private repo; //Set in constructor
public void Run() 
{
    Stuff stuff = repo.LoadStuff()
    Result result = RunOperationsInPrivateMethod(stuff); //private method
    repo.SaveResult(result);
} 
```

所以为了测试这个，我发现我有几个选择：

1.  注入一个模拟仓库，我可以用它来返回一个东西并验证一个结果。
2.  重构 RunOperationsInPrivateMethod 以保护访问，并直接测试操作。

我错过了任何其他选择吗？人们的喜好是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T08:50:48.967

一般来说，不要测试私有方法，而是考虑你的私有方法是否真的应该是另一个类的公共方法。即，将您的对象分解为具有集中功能的较小对象。

例如，也许 Run 应该是

```
private repo; //Set in constructor
private IOperation operation; // injected in constructor or through dependency injection.
public void Run() 
{
    Stuff stuff = repo.LoadStuff()
    Result result = operation.Run(stuff); //private instance with public method
    repo.SaveResult(result);
} 
```

然后 Run 将是操作类的公共方法

```
class SecretOperation : IOperation
{
   public void Run(Stuff stuff) { /* secret stuff */ }
} 
```

然后，您不必从数据库加载 Stuff 进行测试，只需在专注于测试 SecretOperation 的夹具中创建一个东西。现在您的单元测试可以更加集中。

# android - 使用 BitmapDrawables 的 OutOfMemoryError

> ID：13525573
> 
> 赞同：0
> 
> 时间：2012-11-23T08:46:02.130
> 
> 标签：android

我在我的应用程序中下载并保留照片列表：

```
List<BitmapDrawable> photos = new ArrayList<BitmapDrawable>();
photos.add(Utils.bitmapToBitmapDrawable(downloadBitmap(s));

public static Bitmap downloadBitmap(String url) {
    // GET input stream from server
    return BitmapFactory.decodeStream(inputStream);
} 
```

试图解除分配：

```
if (dldedPics.get(0).getPhotos() != null && !dldedPics.get(0).getPhotos().isEmpty()) {
    for (BitmapDrawable b : dldedPics.get(0).getPhotos()) {
        b.getBitmap().recycle();
    }
}
dldedPics.get(0).setPhotos(null);
Runtime.getRuntime().gc(); 
```

我似乎无法正确释放它们，因为在 10-20 张 100kb 照片之后，我很快就得到了 OutOfMemoryError（在 decodeStream 行）。

堆栈跟踪：

```
11-23 09:43:07.861: E/AndroidRuntime(3079): FATAL EXCEPTION: AsyncTask #1
11-23 09:43:07.861: E/AndroidRuntime(3079): java.lang.RuntimeException: An error occured while executing doInBackground()
11-23 09:43:07.861: E/AndroidRuntime(3079):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.lang.Thread.run(Thread.java:1096)
11-23 09:43:07.861: E/AndroidRuntime(3079): Caused by: java.lang.OutOfMemoryError: bitmap size exceeds VM budget
11-23 09:43:07.861: E/AndroidRuntime(3079):     at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:459)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:515)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at com.domain.persistence.Utils.downloadBitmap(Utils.java:385)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at com.domain.service.tasks.AllPhotosDownloaderTask.doInBackground(AllPhotosDownloaderTask.java:51)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at com.domain.service.tasks.AllPhotosDownloaderTask.doInBackground(AllPhotosDownloaderTask.java:1)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
11-23 09:43:07.861: E/AndroidRuntime(3079):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-23 09:43:07.861: E/AndroidRuntime(3079):     ... 4 more
11-23 09:43:08.201: E/dalvikvm-heap(3079): 240000-byte external allocation too large for this process.
11-23 09:43:08.231: E/GraphicsJNI(3079): VM won't let us allocate 240000 bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:48:51.977

您应该只加载您需要的图像大小，而不是整个图像。

```
 BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = scale;
        b = BitmapFactory.decodeStream(inputStream, null, options); 
```

来自[http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)

*如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。样本大小是对应于解码位图中的单个像素的任一维度中的像素数。例如， inSampleSize == 4 返回的图像是原始宽度/高度的 1/4，像素数的 1/16。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:23:16.673

您可以浏览以下链接以获取使用位图的示例实现

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# ocaml - Camlp4 示例：未绑定模块 Printers.Ocaml

> ID：13525580
> 
> 赞同：0
> 
> 时间：2012-11-23T08:47:04.643
> 
> 标签：ocaml, camlp4

我正在按照[这个](http://ambassadortothecomputers.blogspot.it/p/reading-camlp4.html)有用的系列博客文章探索 Camlp4，但我遇到了编译问题。这是我的 test.ml 文件的代码：

```
open Camlp4.PreCast

let _loc = Loc.ghost in

let cons =
 let rec loop () =
   try
     match read_line () with
       | "" -> []
       | c -> c :: loop ()
   with End_of_file -> [] in
 loop () in
 Printers.Ocaml.print_implem
 <:str_item<
    type t =
    $Ast.TySum (_loc,
           Ast.tyOr_of_list
             (List.map
                 (fun c -> <:ctyp< $uid:c$ >>)
                 cons))$
    let to_string = function
    $Ast.mcOr_of_list
    (List.map
          (fun c -> <:match_case< $uid:c$ -> $`str:c$ >>)
        cons)$
    let of_string = function
    $let ors =
   Ast.mcOr_of_list
     (List.map
         (fun c -> <:match_case< $`str:c$ -> $uid:c$ >>)
         cons) in
    Ast.McOr(_loc,
           ors,
             <:match_case< _ -> invalid_arg "bad string" >>)$
>> 
```

我正在使用这个编译命令： ocamlc -pp camlp4of -I +camlp4 -o variant camlp4lib.cma test.ml 但 ocamlc 发出：错误：未绑定模块 Printers.Ocaml

我想是编译命令的问题，但我找不到 Printers.Ocaml 的实现位置。

谢谢您的帮助！_ 神父。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:48:42.607

您正在尝试访问`Camlp4.PreCast.Printers.OCaml.print_implem`，在您的`open Camlp4.PreCast`as之后可访问`Printers.OCaml.print_implem`；`OCaml`注意vs的不同大小写`Ocaml`；`OCaml`是标准的，应该在 OCaml 工具和文档中一致使用（如果与编译器一起分发的某些库违反了约定，您可以提交小错误报告）。

PS：供您参考，OCaml（4.01）的下一个版本可能会打印以下错误消息（已使用开发版本测试）

```
File "test.ml", line 13, characters 1-43:
Error: Unbound module Camlp4.PreCast.Printers.Ocaml
Did you mean OCaml? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:48:29.437

抱歉，我的错误是 mudule Printers.Ocaml 不存在，Printers.OCaml（带有大写 C）存在。

我为此尝试了 2 天。

解决了。

# tridion - 自动工作流活动未启动

> ID：13525585
> 
> 赞同：1
> 
> 时间：2012-11-23T08:47:24.987
> 
> 标签：tridion, tridion-2011

我创建了一个简单的工作流程**start-->createoredit-->automaticactivity-->End**。自动活动不做任何事情，我在脚本区域的自动活动**FinishActivity“自动活动完成”**的脚本区域中有默认代码。

当我触发工作流时，没有启动和执行自动活动，它被分配给状态为“已分配”的“NTAUTHORITY SYSTEM”（在全局工作列表中）

每当我重新启动“Tridion Workflow Agent”服务或每当通过工作流分配的其他一些自动活动时，都会执行自动活动启动。

我在事件日志中也没有看到任何错误消息。

有人可以帮我吗？我正在使用 SDL Tridion 2011 SP1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:41:14.093

第一项活动必须始终是手动活动。如果您需要使第一个活动自动化，那么您需要依靠事件系统来实现这一点。

编辑：我看到你写了这个问题来添加第一个活动是手动的。

当自动活动卡在已分配状态时，通常意味着存在脚本错误。Visio 设计中的活动之间的连接器也可能存在某些问题。检查我们是否正确连接了所有内容。尝试删除 automaticactivity 与 End 之间的链接并重新创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T11:29:50.457

检查“Tridion Content Manager Workflow Agent”windows 服务是否正在运行。这为我们解决了问题。

# javascript - 未捕获的 TypeError：使用 jQuery 在 js 中非法调用

> ID：13525586
> 
> 赞同：2
> 
> 时间：2012-11-23T08:47:24.130
> 
> 标签：javascript, jquery

```
 function makePvsApplicantCalls(){
         console.log('In makePvsApplicantCalls'); 
         $.ajax({
             type: 'GET',
             url: "/reppify/RPCPostAdapter/httprpc/applicationFacade/getPreviousApplicants",
             data : {jobId : jobId, page: pgNoPA++},
             cache: false,
             beforeSend: function(){
                 console.log('In makePvsApplicantCalls Before Send'); 
             },                     
             success: onSuccessPA,
             complete: function(){  
                 $('#prevSpinner').hide();
             },
             error: handleError,
             dataType: 'json'
        });
} 
```

在调用上面的 javascript 函数时，我在浏览器上出现以下异常并且无法进行 AJAX 调用，以下是调用代码

```
if(data.result>0) {
    makePvsApplicantCalls();
} 
```

以下是错误

```
 Uncaught TypeError: Illegal invocation jquery.min.js:4
    e jquery.min.js:4
    ca jquery.min.js:2
    ca jquery.min.js:2
    ca jquery.min.js:2
    ca jquery.min.js:2
    f.extend.param jquery.min.js:4
    f.extend.ajax jquery.min.js:4
    makePvsApplicantCalls b2bscreening.js:2584
    $.ajax.success b2bscreening.js:2451
    n jquery.min.js:2
    o.fireWith jquery.min.js:2
    w jquery.min.js:4
    d jquery.min.js:4 
```

我怎样才能摆脱这个异常？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T09:06:32.150

弄错了，实际上我输入了两个数据输入，不幸的是只有一个是全局变量，一个是本地的，**现在**已解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:55:38.257

~~尝试将您的成功和错误属性包装到函数中，因为那里需要函数~~

你确定你正确地发送数据吗？

```
data : {'jobId' : jobId, 'page': pgNoPA++} 
```

# spring - 将消息从 AuthenticationFailureHandler 和 LogoutHandler 传递到 JSP

> ID：13525592
> 
> 赞同：0
> 
> 时间：2012-11-23T08:47:46.487
> 
> 标签：spring, struts2, spring-security

在我的应用程序中，我创建了自定义 AuthenticationFailureHandler 和 LogoutSuccess 处理程序类。

现在我想将这些类的消息传递给应该使用 struts2 jstl 标记访问的 JSP。

我不想使用 url 参数将消息传递到 jsp 页面。（login.action?msg=abc）

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:52:45.807

一种方法是将您的消息放到会话中。在 JSP 中，您可以像这样访问会话：

```
<s:property value="#session.message"/> 
```

# jquery - 检查动态添加的图像是否加载失败

> ID：13525594
> 
> 赞同：0
> 
> 时间：2012-11-23T08:47:49.043
> 
> 标签：jquery

我动态地添加图像，只是将带有动态源的 img 标签附加到现有的 div 中。但是，并非所有这些图像都会存在，我想隐藏那些不存在的图像。

我相信我可以使用 load() 并在错误时设置隐藏功能，但是由于我添加了它们，只需创建一个 img 标签，我真的不知道如何将我的 jquery 连接到它。

这是我的添加功能：

```
function GetImages() {
            $('#ImageContainer').empty();
            $('#ImageContainer').css("visibility", "visible");

            var regex = new RegExp("(.+?);", "g");
            var match;
            while (match = regex.exec($("#<%= HttpSources.ClientID %>").val())) {
                $('#ImageContainer').append('<div class="ImgBox"><img src="' +
                    match[1].format($("#<%= ItemNo.ClientID %>").val()) + '" class="Image" /></div>');
            }

            return false;
        } 
```

它将带有 img 的 div 添加到另一个 div 中。

最初，我想做这样的事情来隐藏它们，但由于加载文档时 div 和图像不存在，我真的不知道如何将它连接到它们。

```
$(document).ready(function() {
    $(".ImgBox").Next(".Image").load(function () {
        // ... loaded  
    }).error(function () {
        // ... not loaded
        $(this).hide();
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:49:25.130

**编辑：**事实证明，浏览器不会像他们应该的那样冒泡错误事件。因为事件冒泡是 jQuery .live() 功能背后的机制，所以你的绑定事件不会触发。

作为替代方案，我建议在添加事件时将事件附加到每个元素（或元素集）。

* * *

使用 live() 将事件添加到加载页面时不存在的元素。

[http://api.jquery.com/live/](http://api.jquery.com/live/)

例如

```
$(".ImgBox").Next(".Image")
  .live("load", function () {
    // ... loaded  
  }).live("error", function () {
    // ... not loaded
    $(this).hide();
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:24:41.357

我讨厌回答我自己的问题，但这就是我最终得到的。

.live() 听起来很棒，但不幸的是，它不适用于 img 上的加载/错误。

相反，我发现了这个： http: [//www.sajithmr.me/javascript-check-an-image-is-loaded-or-not](http://www.sajithmr.me/javascript-check-an-image-is-loaded-or-not) 这似乎给了我一种检查图像是否加载的方法。添加所有图像后，我将运行它们，并清理未加载的。

# perl - Perl printf 中的无效转换

> ID：13525595
> 
> 赞同：3
> 
> 时间：2012-11-23T08:47:54.130
> 
> 标签：perl, printf

我有一个错误代码：

```
Invalid conversion in printf: "%A"' printing %A characters in a URL 
```

这是我的代码：

```
$url =~ s/\%([A-Fa-f0-9]{2})/pack('C', hex($1))/seg;
printf "%-10s $url\n", $res_request{$key}; 
```

我怎样才能解决这个问题？

非常感谢，艾尔

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T08:52:33.887

不要放入`$url`格式字符串，而是使用`%s`格式：

```
printf "%-10s %s\n", $res_request{$key}, $url; 
```

（您不应该将变量插入到具有可能被误认为格式化代码的部分的格式字符串中。）

# continuous-integration - 在竹连续集成服务器中执行批处理文件时 PsExec 挂起

> ID：13525597
> 
> 赞同：3
> 
> 时间：2012-11-23T08:47:59.840
> 
> 标签：continuous-integration, batch-file, bamboo, psexec

我的竹服务器上有一个批处理文件，它通过 PsExec 在远程计算机上启动另一个批处理文件。如果我双击竹服务器上的批处理文件一切正常，远程计算机上的批处理文件将启动并且 PsExec 以错误代码 0 退出。

但是，如果我启动竹子，那么 PsExec 会自行挂起，并且远程计算机上的批处理文件不会启动。

```
C:\PsTools>PsExec.exe \\<remote server> -u <user> -p <password> -s -i "C:\batchfile.bat"

PsExec v1.98 - Execute processes remotely
Copyright (C) 2001-2010 Mark Russinovich
Sysinternals - www.sysinternals.com 
```

这是我的输出，也是 PsExec 挂起的地方。

我不明白为什么只有在竹子开始批处理时它才会挂起。

希望可以有人帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T07:27:12.423

[[通过 PsExec 时程序输出丢失](https://stackoverflow.com/questions/1279809/program-output-lost-when-passed-through-psexec)] psexec 中有一个错误，当被 cmd 调用的所有不同的东西调用时，它会正确重定向。您还有更多选项可以在远程机器上启动进程： 1\. [http://feldkir.ch/xcmd.htm](http://feldkir.ch/xcmd.htm) - 它不能在 localhost 上运行 2\. WMIC - 也不能在 localhost 上使用，当主机和用户 /通行证 2\. SCHTASKS

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-30T09:12:08.723

这是一个老问题，但也许有人有同样的问题。第一次运行 psexec 时，会显示一个 eula 对话框。为了避免在此对话框中挂起竹子，您可以尝试使用参数 \accepteula。例如：

```
PsExec.exe \\<remote server> -u <user> -p <password> -s -i "C:\batchfile.bat" -accepteula 
```

# ios - IOS - 帮助理解故事板 - 为什么 rootViewController 不断重新加载？

> ID：13525600
> 
> 赞同：2
> 
> 时间：2012-11-23T08:48:08.733
> 
> 标签：ios, uiviewcontroller, storyboard, retain

谷歌搜索，但到目前为止没有运气。在我开始使用 Storyboards 之前，我有几个使用多个视图控制器的应用程序。当返回到某个 viewController（通过关闭子 viewcontroller）时，我会发现我的原始（或根）viewcontroller 完好无损。现在我正在尝试故事板，似乎我的 rootViewController 不时重新加载，丢失所有数据并从 viewDidLoad 重新启动。我认为这发生在从一个视图控制器到另一个视图控制器的转换之间。例如，从 rootViewController，我提出了另一个视图控制器。当我关闭其他视图控制器以返回 rootViewController 时，它看起来重新加载并且是全新的。它只是有时会发生，也许是当操作系统发出内存警告时。

这是正常的吗？

从我看过的所有教程中，他们说如果使用 Storyboards 保留委托方法“applicationDidFinishLaunchingWithOPtions”几乎完好无损（而在我的旧应用程序中，我会在这里做一些 viewcontroller alloc。我尝试了以下方法，但没有成功：

```
// in didFinishLaunchingWithOptions of delegate.m
[self.window.rootViewController retain] 
```

不工作。我的主视图控制器仍然不时被释放/重新加载

```
// in my viewDidLoad of viewcontroller.m
[self retain]; 
```

也没有工作

我是否必须在委托文件中声明和分配 viewController，然后将其分配给 rootViewController？我尝试了类似的方法，但崩溃了，也许做得不对。

谢谢？

# c# - 如何找到 MemoryCache 的大小，最好以编程方式？

> ID：13525601
> 
> 赞同：2
> 
> 时间：2012-11-23T08:48:09.967
> 
> 标签：c#, memorycache

我想找到 a 的大小`MemoryCache`。

```
MemoryCache _cache = MemoryCache.Default;
_cache.Add("key", "value");
FindSize(_cache); 
```

我想实现该`FindSize()`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:58:46.573

恐怕您在运行时找不到 .NET 对象的大小。有关更多详细信息，请参阅这些答案：

*   [使用 C# 获取字段的大小（以字节为单位）](https://stackoverflow.com/questions/207592/getting-the-size-of-a-field-in-bytes-with-c-sharp#207605)
*   [在 C# 中查找对象实例的大小（以字节为单位）](https://stackoverflow.com/questions/1128315/find-size-of-object-instance-in-bytes-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:01:48.650

你需要`_cache.Count()`价值还是不同的东西？

# ruby - 从子进程中连续读取 STDOUT 和 STDERR

> ID：13525603
> 
> 赞同：6
> 
> 时间：2012-11-23T08:48:29.810
> 
> 标签：ruby, linux

我`IO.popen`用来启动一个子进程，但我只得到子进程退出时子进程运行所花费的时间（有时是 5 分钟或其他时间）内发生的所有事情的结果。我真的需要能够看到子进程写入的所有内容`stderr`以及`stdout`它何时发生。

到目前为止，我找不到任何像这样工作的东西，但我相信这是可能的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T09:00:52.643

如果您需要实时获取输出，我建议使用 stdlib`PTY`而不是`popen`

像这样的东西：

```
require 'pty'

cmd = 'echo a; sleep 1; cat /some/file; sleep 1; echo b'
PTY.spawn cmd do |r, w, pid|
  begin
    r.sync
    r.each_line { |l| puts "#{Time.now.strftime('%M:%S')} - #{l.strip}" }
  rescue Errno::EIO => e
    # simply ignoring this
  ensure
    ::Process.wait pid
  end
end
exit "#{cmd} failed" unless $? && $?.exitstatus == 0

> 33:36 - a
> 33:37 - cat: /some/file: No such file or directory
> 33:38 - b 
```

这样您就可以立即获得输出，就像在终端中一样

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:19:49.620

您可能想使用标准库中的[Open3.popen3](http://rubydoc.info/stdlib/open3/Open3.popen3)，它可以访问标准输入、标准输出和标准错误作为流。

# vim - 使用 Co 在 evil(vim-normal) 状态下临时执行（就像在 emacs 状态下使用 \ 临时执行一样）

> ID：13525605
> 
> 赞同：2
> 
> 时间：2012-11-23T08:48:32.900
> 
> 标签：vim, emacs, emulation

编辑器：Emacs 24.2；插件：邪恶；平台：windows 8

我想用 Co 到 normal-mode， gg 到开始，但是使用 gg 后，缓冲区会自动回到 emacs 模式。

例如：

(1) 如果我在 emacs 模式下，我想用 gg 跳转到缓冲区的开头

(2) 我可以这样做，Cz 到 normal-mode，然后 gg 到开头，然后 Cz 到 emacs 模式。

（3）我不喜欢这种方式，如果我在emacs-mode，我想用Co到normal-mode，用gg到开头，但是用gg后，**缓冲区自动回到emacs-mode。**

(4) 而且我觉得这样对我来说是非常方便的，我也可以使用 Co dib 删除括号中的内容而不离开 emacs-mode（因为在 Co dib 之后，缓冲区会自动回到 emacs-mode）。

我从邪恶的邮件列表中得到了答复，而且效果很好！

```
(define-key evil-emacs-state-map (kbd "Co") 'evil-execute-in-normal-state)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:31:49.957

这种行为似乎与 Vim 的行为一致：`<C-o>`用于执行*一个*普通模式命令并立即返回插入模式。

从技术上讲，它可以用来发出`:norm`带有一堆普通模式命令的 Ex-command，但我猜没有任何好处，而且我不知道 Evil 是否`:normal`会这样做。您不妨完全离开插入模式。

这首先完全是模态和 Vim 的重点。如果你使用邪恶，你还不如接受这种思维方式，而不是与之抗争。

# openssl - 从 X.509 证书中删除私钥

> ID：13525606
> 
> 赞同：0
> 
> 时间：2012-11-23T08:48:48.717
> 
> 标签：openssl

是否有用于从 X.509 证书（*.pem 文件）中删除私钥的 openSSL 命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:28:21.920

通常私钥是单独的 *.pem 文件 - 这是公钥与私钥的重点，它们必须是分开的。

有时为了方便人们将私钥和证书 *.pem 文件连接到一个文件中，这允许像 apache 这样的服务器端程序对其进行解析以找到两者。但这不是很常见，如果是，您可以使用任何文本编辑器查看并编辑它。

# php - PHP 中的 Gmail 聊天

> ID：13525608
> 
> 赞同：1
> 
> 时间：2012-11-23T08:49:16.093
> 
> 标签：php, gmail, bots

我想知道构建与 Gmail 聊天交互的最佳方式是什么。我还没有发现任何看起来非常容易做的事情。一个想法是从头开始构建它，另一个想法是从开源软件中获取代码。您对如何进行以及最好的方法有什么想法？我不一定要寻找最快的方法，因为这对我来说是一个学习项目。与堆栈溢出中发现的相同[如何构建 gmail 聊天机器人？](https://stackoverflow.com/questions/2558181/how-to-build-a-gmail-chat-bot)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:23:16.683

GMail 聊天/Google Talk 使用 XMPP 协议进行通信。这是一个允许您连接到 XMPP 网络[的 PHP 库示例。](http://code.google.com/p/xmpphp/)[这是 xmpp.org 上的列表](http://xmpp.org/xmpp-software/libraries/)。

# html - 我们可以使用 HTML 管理 MS Word 格式吗？

> ID：13525616
> 
> 赞同：0
> 
> 时间：2012-11-23T08:49:54.403
> 
> 标签：html, ms-word

我将根据html页面生成一个word文档。我需要一些格式，例如分页符和自定义文档标题，例如。我可以使用 html 实现它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:57:43.160

我不确定您将如何使用 HTML 自定义标题。一般来说，您计划做的事情可能是个坏主意。我会查看可让您生成常规`.docx`文件（Word XML 格式）的库。

话虽如此，我认为您可以通过以下方式获得分页符：

```
<br clear="all" style="mso-special-character:line-break; page-break-before:always" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:10:02.113

纯 HTML 会很难。但请记住，当前的 Word-Dokument-Format 是 OPENXML（或 Microsoftish）。我敢打赌，有些库可以帮助您使用 javascript 组装或编译 word doxs。

[从 javascript 生成 office open XML excel 文件](https://stackoverflow.com/questions/2742422/generate-office-open-xml-excel-file-from-javascript)

[http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/08/02/working-with-open-xml-documents-using-javascript.aspx](http://openxmldeveloper.org/blog/b/openxmldeveloper/archive/2012/08/02/working-with-open-xml-documents-using-javascript.aspx)

[http://openxmldeveloper.org/wiki/w/wiki/open-xml-and-javascript.aspx](http://openxmldeveloper.org/wiki/w/wiki/open-xml-and-javascript.aspx)

据我所知，OpenXml 中的分页符可以像这样完成......

```
 <w:p>
  <w:r>
    <w:br w:type="page" />
  </w:r>
</w:p> 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:52:27.097

也许。在浏览器中选择页面并使用 cut&pase。Word 会识别剪贴板中的 HTML，然后尽力保留格式。

如果您需要更复杂的内容，则需要编写一个将 HTML 转换为 OOXML 格式的程序。

# android - android - 如何将放大镜集成到我的应用程序中

> ID：13525618
> 
> 赞同：4
> 
> 时间：2012-11-23T08:50:01.867
> 
> 标签：android

我想在我的 android 应用程序中集成“放大镜”。当长按图像上的某个点时应该出现放大镜，然后图像的特定部分应该出现在放大镜中并放大触摸区域。我搜索了很多关于这个放大镜的网站但我没有找到任何关于放大镜的有用链接/数据。可以在android中实现吗？

# android-layout - Android XML: Center RelativeLayout w/ TableLayout inside LinearLayout

> ID：13525624
> 
> 赞同：1
> 
> 时间：2012-11-23T08:50:20.893
> 
> 标签：android-layout

I want to center a RelativeLayout which has a TableLayout inside of it INSIDE a LinearLayout. Hence the image below: ![enter image description here](../Images/d216b7303d1d171856633092ee60bb61.png)

Here is my XML code atm:

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/titlebar_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="vertical"
    >
    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/titlebar_layout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >

        <TableLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/menu_layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/foregroundColor">

            <TableRow>
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center" 
                    android:text="MEDIA"
                    android:textColor="@color/menuFontColor"
                    android:paddingTop="5dp"
                    android:paddingBottom="5dp"
                    android:paddingLeft="60dp"
                    android:paddingRight="60dp"
                    />
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center" 
                    android:text="CALENDER"
                    android:textColor="@color/menuFontColor"
                    android:paddingTop="5dp"
                    android:paddingBottom="5dp"
                    android:paddingLeft="60dp"
                    android:paddingRight="60dp"
                    />
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center" 
                    android:text="HOME"
                    android:textColor="@color/menuFontColor"
                    android:paddingTop="5dp"
                    android:paddingBottom="5dp"
                    android:paddingLeft="60dp"
                    android:paddingRight="60dp"
                    />
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center" 
                    android:text="NEXT EVENT"
                    android:textColor="@color/menuFontColor"
                    android:paddingTop="5dp"
                    android:paddingBottom="5dp"
                    android:paddingLeft="60dp"
                    android:paddingRight="60dp"
                    />
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center" 
                    android:text="ABOUT"
                    android:textColor="@color/menuFontColor"
                    android:paddingTop="5dp"
                    android:paddingBottom="5dp"
                    android:paddingLeft="60dp"
                    android:paddingRight="60dp"
                    />

            </TableRow>
        </TableLayout>
    </RelativeLayout>
</LinearLayout>

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
/> 
```

Problem: The RelativeLayout refuses to center itself, it's aligns automaticlly to the left. Anyway to fix this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:06:14.427

add android:gravity="center_horizontal" to your TableRow tag, this should do the trick

# jpa - JPQL 通过时 JPA Criteria api 查询失败

> ID：13525625
> 
> 赞同：0
> 
> 时间：2012-11-23T08:50:21.853
> 
> 标签：jpa, jpa-2.0, jpql, criteria-api

我正在使用 JPA 来管理我的持久性层。我的一个 Criteria API 引发了异常。我用 JPQL 重写了它，它工作得很好，所以我想我在我的标准 api 版本中遗漏了一些东西。这是我的标准 api 查询：

```
public FoodItemTagsOverrideRule findByFoodItemIdAndType(long foodItemId, RuleTypes ruleType) {
 CriteriaQuery<Rule> c = getCriteriaQuery();
 Root<Rule> rule =
 c.from(Rule.class);
 Predicate foodItemIdCondition =
 cb.equal(rule.get(Rule_.foodItemId), foodItemId);
 Predicate typeCondition =
 cb.equal(rule.get(Rule_.ruleType),
 ruleType.toString());
 c.where(foodItemIdCondition, typeCondition);

 TypedQuery<Rule> q =
 entityManager.createQuery(c);
 List<Rule> result = q.getResultList();
 if (result.isEmpty()) {
 return null;
 }
 return result.get(0);
} 
```

运行良好的 JPQL 版本：

```
public Rule findByFoodItemIdAndType(long foodItemId, RuleTypes ruleType) {
    TypedQuery<Rule> query = getEntityManager().createQuery(
        "SELECT rule " + "FROM " + Rule.class.getSimpleName() + " rule " + "WHERE rule.foodItemId = :foodItemId "
        + "AND rule.ruleType = :ruleType", Rule.class);

query.setParameter("foodItemId", foodItemId);
query.setParameter("ruleType", ruleType.toString());

List<Rule> result = query.getResultList();

if (result.isEmpty()) {
    return null;
}
return result.get(0);
} 
```

你能看出那里有什么不同吗？我在标准 api 查询中放错了吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:28:42.070

你可以试试下面的代码。我试图适应你的代码，你可以相应地改变。

```
CriteriaBuilder qb = em.getCriteriaBuilder();
CriteriaQuery cq = qb.createQuery();
Root<Rule> rule = cq.from(Rule.class);

List<Predicate> predicates = new ArrayList<Predicate>();

predicates.add(qb.equal(rule.get("foodItemId"), foodItemId));
predicates.add(qb.equal(rule.get("ruleType"), ruleType));

cq.select(rule).where(predicates.toArray(new Predicate[]{}));
em.createQuery(cq).getResultList(); 
```

* * *

**编辑：**对于类型安全的谓词定义

```
predicates.add(qb.equal(rule.get(Rule_.foodItemId), foodItemId));
predicates.add(qb.equal(rule.get(Rule_.ruleType), ruleType)); 
```

# meteor - 流星预取数据

> ID：13525628
> 
> 赞同：0
> 
> 时间：2012-11-23T08:50:48.780
> 
> 标签：meteor

在 Meteor 上，我想预取数据。我知道这通常是自动完成的。但是有一个小的等待一些行动。

例如，我放置了一个 jquery 事件并更改了一个会话变量。Minimongo 没有这些数据，必须获取它们。

我想制作一个动画，在此期间我正在获取数据并在动画结束时更改模板。

可能吗？你是怎么做到的？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T18:48:38.960

minimongo 没有您的数据的唯一方法是您的订阅更改时。所以你可以做

编辑：清除它

```
Meteor.autosubscribe(function() {
  //ADD LOADING TO PAGE HERE (1)
  page = Session.get('paging')
  Session.set('Sess1', true)
  Meteor.subscribe('testdata', page, function() {
    //remove loading to page here (2)
    Session.set('Sess1', false)
  });
}); 
```

对于模板，它不需要更改。您可以在 (1) 处设置一个 Session，在 (2) 处设置另一个。

所以

```
<template name="test">
  {{#if Sess1}}
    might be loading here
  {{else}}
    display the data here
  {{/if}}
</template> 
```

# git - 理解 git init

> ID：13525629
> 
> 赞同：24
> 
> 时间：2012-11-23T08:51:04.707
> 
> 标签：git

究竟是`git init`为了什么？我必须每台计算机执行一次还是每个使用 git 的项目执行一次？我下载了我的项目`git clone`并让它工作，但现在它也将我的项目存储到`C:/Users/myUser/git`，是某个文件夹还是我可以更改它？

我对那个文件夹不太了解，它似乎就像一个本地 git repo 之类的东西，但是是什么“管理”它，或者它为什么使用那个路径，你能解释一下吗？

这是我的理解，如果我不正确，请纠正我，需要弄清楚事实：

1.  `git init`适用于每个项目
2.  “用户”下的 git 文件夹是本地存储库，每次我这样做`git commit`时，该文件夹都会更新。
3.  当我这样做时`git push`，它会从该本地存储库中获取，并放入远程存储库。
4.  当我想更新到“HEAD”时，我只是这样做`git pull`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-23T09:16:35.217

这实际上是很多问题和误解。我不确定我是否能够解决所有问题，所以我只会解决直接询问的问题。

1.  **git init 适用于每个项目**

    几乎正确。`git init`用于在不在 git 下的项目上开始使用 git。对于已经在 git 下的项目，您可以使用`git clone`.

2.  **“用户”下的 git 文件夹是本地仓库**

    几乎正确。该文件夹实际上`.git`不是`git`. 这来自unix约定，所有以点开头的文件和文件夹都被认为是隐藏的。

    其次，该文件夹不在您的用户文件夹下。它位于您的项目文件夹下。所以该文件夹`C:/Users/myUser/`是一个项目。如果这不是您的意图，那么您很可能不小心`git init`在您的用户文件夹中执行了。

    每个项目`.git`在项目的根目录中都有一个文件夹，即项目的存储库。这是 git 与 svn 或 cvs 相比如此之快的原因之一——整个存储库都在本地硬盘上处理，没有任何网络流量。

3.  **当我执行 git push 时，它会从本地存储库中获取，然后放到远程**

    正确，但仅适用于具有遥控器的存储库（通常是您创建的存储库，`git clone`用于复制远程存储库）。

    请注意，远程仓库不需要在另一台机器上。您可以将本地文件夹中的项目 git 克隆到另一个文件夹中，然后您可以将新文件夹中的更改推送回原始文件夹。

    该`git clone`命令会自动为您的存储库设置必要的配置以连接回远程。但是您也可以手动配置一个 repo 设置`git init`来连接到远程。

4.  **什么“管理”它**

    该`.git`文件夹管理您项目的存储库。Git 不作为服务器运行*。相反，该`.git`文件夹充当所有 git 命令与之通信的本地“服务器”。基本上，运行 git 命令会编辑`.git`文件夹的内容。

    *注意：远程存储库确实运行服务器，因此您可以连接到它们。但从技术上讲，它们并不是真正的*git*服务器。它们是 git 可以从中下载和上传的文件服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T08:56:26.467

你的~~三四~~理解或多或少是正确的，虽然你遗漏了一些细节。

`git init`初始化（即创建）一个存储库。每个项目都应该在自己的存储库中。

如果您使用下载了项目，`git clone`则无需`git init`再次运行。

您应该能够将项目复制到另一个目录而不会产生任何不利影响。该路径可能是默认选择的。一定要移动整个目录。git 需要运行的元数据存储在项目目录中的隐藏文件中。

推拉可能会变得复杂，尤其是当您与他人一起进行项目时，以及当您使用分支时。在这里写一个完整的主题介绍对我来说是不明智的，所以我建议你去阅读[Pro Git](http://git-scm.com/book)以获得更彻底的解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T08:56:56.383

`git init`仅适用于您从头开始创建自己的新存储库时。它将一个目录变成一个空的 git 存储库。

当您使用`git clone`将现有存储库克隆到新存储库时，`git init`既没有必要也不需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-27T08:09:35.787

@Jaanus 只是对@slebetman 解释的内容的一项补充`git pull`。它不是完全同步，而是获取不在您本地的提交。这更像是一个极端情况，请考虑以下事项 -

1.  假设正在处理一个分支 test_branch。A、B 和 C 提交存在于`origin/test_branch`（您的 git 服务器上的分支），其中 C 是最近的提交。您已经拉动，现在您的本地分支机构也有 A、B 和 C。

2.  假设由于某种原因，您必须重置提交 B 并强制重写历史，`origin/test_branch`将历史保留为 A 和 C。

3.  现在，当您`git pull`在本地表演时。它会说`everything already up to date`，但请注意您对提交 B 进行了额外的更改。因此，不要将其视为同步操作，而应将其视为更多`get what I don't have`操作。

希望这会有所帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-08T14:42:21.573

```
#!bin/bash
DATE=`date +%m%d%Y.%H%M%S`
TARGET="$1.$DATE"
DIR=`pwd`

function batch_convert() {
for file in `ls $1`
do
if [ -d $1"/"$file ]
then
batch_convert $1"/"$file
else
dos2unix $1"/"$file
#echo $1"/"$file
fi
done
}

##################

echo $TARGET
cd $DIR/DCW
git pull
cd ../
batch_convert DCW
cp -R DCW tmp/$TARGET
cd tmp/$TARGET
find . -type d -name "*git*"| xargs -n20 rm -rf

for db in `cat $DIR/tmp/$TARGET/Dblist` ; do
        echo "********** DB IS $db *******"
       for dbfolder in `find * -maxdepth 0 -type d` ;do
    echo `ls -a`
        echo "***** DBFolder is  $dbfolder *****"
    if [ ! $dbfolder = $db ];then
    cp -R $dbfolder $db
    find $db -name "*.ctl"| xargs -I '{}' mv '{}' $db/${db}.ctl
    fi
    done
done
cd ../
tar -cf $TARGET.tar $TARGET 
```

# android - Android蓝牙打印运行时错误

> ID：13525641
> 
> 赞同：1
> 
> 时间：2012-11-23T08:52:11.280
> 
> 标签：android, android-layout, printing, bluetooth

我有一个程序可以将数据从 android 手机发送到移动打印蓝牙。我的代码有问题。发生运行时错误。我无法分析它。请帮忙。非常感谢

这是我的代码示例：

```
 private static final String TAG = "Test";
    static final private int PrintText_ID = Menu.FIRST + 1;
    static final private int PrintBarcode_ID = Menu.FIRST + 2;
    static final private int LineFeed_ID = Menu.FIRST + 3;
    static final private int SetCharacterSet_ID = Menu.FIRST + 4;
    static final private int Connect_ID = Menu.FIRST + 5;
    static final private int Disconnect_ID = Menu.FIRST + 6;    
    static final private int GetStatus_ID = Menu.FIRST + 7;
    static final private int GetPowerStatus_ID = Menu.FIRST + 8;
    static final private int Directio_ID = Menu.FIRST + 9;
    static final private int MsrTrack1_ID = Menu.FIRST + 10;
    static final private int MsrTrack2_ID = Menu.FIRST + 11;
    static final private int MsrTrack3_ID = Menu.FIRST + 12;
    static final private int MsrTrack12_ID = Menu.FIRST + 13;
    static final private int MsrTrack23_ID = Menu.FIRST + 14;
    static final private int PrintText1K_ID = Menu.FIRST + 15; 

    private ZQPrinter PrinterService = null;   
    private boolean conn = false;

    private byte dataBar[] ={0x38, 0x38, 0x30, 0x31, 0x31, 0x31, 0x35, 0x31, 0x31};    //"JAN13(EAN) 8801115114031"
    private byte dataBar2[] ={0x38, 0x38, 0x30, 0x31, 0x31};
    private byte dataBar3[] = {0x31,0x32,0x33,0x34,0x35,0x36,0x37};
    String PrintTextSample="ABCDEFGabcdefg123456!@#$%^\r\n";

    public ZQExample()
    {
        Log.e(TAG, "+++ ON Contructor +++"); 

    }

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        CheckGC("onCreate_Start" );
        Log.e(TAG, "+++ ON CREATE +++");        
        setContentView(R.layout.main);
        TextView t = (TextView) findViewById(R.id.text);        
        registerForContextMenu(t);

        PrinterService = new ZQPrinter();
        CheckGC("onCreate_End" );
    }

    @Override
    public void onStart() {
        super.onStart();
        CheckGC("onStart_Start" );
        TextView t = (TextView) findViewById(R.id.text); 
        t.setText("");              
        t.append("AM-3XM EXAMPLE\n\n");          
        t.append("do long press on touchscreen\n");
        Log.e(TAG, "++ ON START ++");
        CheckGC("onStart_End" );
    }

    @Override
    public synchronized void onResume() {
        super.onResume();
        Log.e(TAG, "+ ON RESUME +");
        CheckGC("onResume_End" );
    }    

    @Override
    public synchronized void onPause() {
        super.onPause();
        Log.e(TAG, "- ON PAUSE -");
        CheckGC("onPause_End" );
    }

    @Override
    public void onStop() {
        super.onStop();
        Log.e(TAG, "-- ON STOP --");
        CheckGC("onStop_End" );
        // defense code for HTC Desire because of reconnect' fail       
        // Runtime.getRuntime().exit(0);       
    }

    @Override
    public void onDestroy() {
         Log.e(TAG, "--- ON DESTROY ---");  
        super.onDestroy();
        if(PrinterService != null)
        {   
         PrinterService.Disconnect(); 
         PrinterService = null;
        }
        CheckGC("onDestroy_End" );
    }   

    @Override   
    public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, v, menuInfo);
        CheckGC("onCreateContextMenu_Start" );
        if (conn == false) {
            menu.add(0, Connect_ID, 0, "Connect");
        } 
        else {
            menu.add(0, Disconnect_ID, 0,  "Disconnect");
            menu.add(0, PrintText_ID, 0,  "PrintText"); 
            menu.add(0, PrintText1K_ID, 0,  "PrintText1K");
            menu.add(0, PrintBarcode_ID, 0,  "PrintBarcode");
            menu.add(0, LineFeed_ID , 0,  "LineFeed");
            menu.add(0, GetStatus_ID , 0,  "GetStatus");
            menu.add(0, GetPowerStatus_ID, 0,  "GetPowerStatus");
            menu.add(0, Directio_ID, 0,  "Directio");
            menu.add(0, MsrTrack1_ID, 0,  "MsrTrack1");
            menu.add(0, MsrTrack2_ID, 0,  "MsrTrack2");
            menu.add(0, MsrTrack3_ID, 0,  "MsrTrack3");
            menu.add(0, MsrTrack12_ID, 0,  "MsrTrack12");
            menu.add(0, MsrTrack23_ID, 0,  "MsrTrack23");
            menu.add(0, SetCharacterSet_ID, 0,  "SetCharacterSet");
        }
        CheckGC("onCreateContextMenu_End" );
    }

    public boolean onContextItemSelected(MenuItem item) {
        int returevlaue=ZQPrinter.AB_SUCCESS;
        TextView t = (TextView) findViewById(R.id.text);   
        switch (item.getItemId()) {
        case Connect_ID:
            CheckGC("Connect_Start" );

            t.setText("");
            t.append("Connect...\n");
            int nRet = PrinterService.Connect("00:1F:B7:03:C8:05");
            if ( nRet == 0 ) {
                t.append("Success\n");
                conn = true;
            }
            else {
                Log.e("Test", String.valueOf(nRet));
                t.append("Fail\n\n"); 
                Toast.makeText(ZQExample.this,"check printer & bluetooth",Toast.LENGTH_SHORT).show();
                conn = false;               
            }
            t.append("do long press on touchscreen\n"); 
            CheckGC("Connect_End" );            
            //////
            return true; 
        case Disconnect_ID:
            CheckGC("Disconnect_Start" );
            t.setText("");          
            t.append("Disconnect...\n");        
            PrinterService.Disconnect(); 
            PrinterService = null;
            t.append("Success\n\n");            
            t.append("do long press on touchscreen\n"); 
            conn = false; 
            CheckGC("Disconnect_End" );
            return true;

        case PrintText_ID:
            CheckGC("PrintText_Start" );
            t.setText("");          
            t.append("PrintText...\n"); 
            //////
            System.setProperty("file.encoding", "gb2312");
            String str = "²âÊÔ´òÓ¡¼òÌå\r\n";
            PrinterService.PrintText(str, ZQPrinter.ALIGNMENT_LEFT, ZQPrinter.FT_DEFAULT, 0);
            //////
            System.setProperty("file.encoding", "big5");
            String str2 = "œyÔ‡´òÓ¡·±ów\r\n";
            PrinterService.PrintText(str2, ZQPrinter.ALIGNMENT_LEFT, ZQPrinter.FT_DEFAULT, 0);
            //////////
       returevlaue=PrinterService.GetStatus();    
        if(returevlaue==ZQPrinter.AB_SUCCESS){   
           for(int i=0 ; i<50;i++) 
           {       
               returevlaue=PrinterService.PrintText(PrintTextSample,
                        ZQPrinter.ALIGNMENT_LEFT, 
                        ZQPrinter.FT_DEFAULT, 
                        ZQPrinter.TS_0WIDTH | ZQPrinter.TS_0HEIGHT );
                    CheckGC("PrintText_Loop" );
               if(returevlaue!=ZQPrinter.AB_SUCCESS)
                {
                    break;
                }

           }
        }

        if(returevlaue==ZQPrinter.AB_SUCCESS){
            returevlaue=PrinterService.LineFeed(5);
        }

        returevlaue=PrinterService.GetStatus();

            if(returevlaue==ZQPrinter.AB_SUCCESS){
                t.append("Success\n\n");
            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
            }

            t.append("\n do long press on touchscreen\n");  
            CheckGC("PrintText_End" );
            return true;

        case PrintBarcode_ID :
            CheckGC("PrintBarcode_Start" );
            t.setText("");          
            t.append("PrintBarcode...\n");  
             returevlaue=PrinterService.GetStatus();

            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.PrintBarcode(dataBar ,dataBar.length ,  ZQPrinter.BCS_JAN13, 50, 3,  ZQPrinter.ALIGNMENT_LEFT,  ZQPrinter.BC_TEXT_BELOW);
            }
            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.LineFeed(1);
            }

            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.PrintBarcode(dataBar2,dataBar2.length,  ZQPrinter.BCS_JAN8, 50, 3,  ZQPrinter.ALIGNMENT_LEFT,  ZQPrinter.BC_TEXT_BELOW);
            }
            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.LineFeed(1);
            }

            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.PrintBarcode(dataBar3 ,dataBar3.length ,  ZQPrinter.BCS_Code39, 50, 3,  ZQPrinter.ALIGNMENT_LEFT,  ZQPrinter.BC_TEXT_BELOW);
            }
            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.LineFeed(1);
            }

            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.PrintBarcode(dataBar3, dataBar3.length,  ZQPrinter.BCS_Code128, 50, 3,  ZQPrinter.ALIGNMENT_LEFT,  ZQPrinter.BC_TEXT_BELOW);
            }
            if(returevlaue==ZQPrinter.AB_SUCCESS){
             returevlaue=PrinterService.LineFeed(1);
            }
            returevlaue=PrinterService.GetStatus();

            if(returevlaue==ZQPrinter.AB_SUCCESS){ 
              t.append("Success\n\n");

            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
            }         
            t.append("\n do long press on touchscreen\n"); 
            CheckGC("PrintBarcode_End" );
            return true;      

        case LineFeed_ID :   
            CheckGC("LineFeed_Start" );
            t.setText("");          
            t.append("LineFeed...\n"); 
            returevlaue=PrinterService.GetStatus();

            if(returevlaue==ZQPrinter.AB_SUCCESS){ 
              returevlaue=PrinterService.LineFeed(5);
            }

            returevlaue=PrinterService.GetStatus();
            if(returevlaue==ZQPrinter.AB_SUCCESS){
                t.append("Success\n\n");
            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
            }

            t.append("\n do long press on touchscreen\n");  
            CheckGC("LineFeed_End" );
            return true;            

        case GetStatus_ID:   
            CheckGC("GetStatus_Start" );
            t.setText("");          
            t.append("GetStatus...\n");             
            returevlaue=PrinterService.GetStatus();
            if(returevlaue==ZQPrinter.AB_SUCCESS){
                t.append("Success\n\n");
            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
            }            
            t.append("\n do long press on touchscreen\n"); 
            CheckGC("GetStatus_End" );
            return true;

        case SetCharacterSet_ID:
            CheckGC("SetCharacterSet_Start" );
            t.setText("");          
            t.append("SetCharacterSet...\n");           
            returevlaue=PrinterService.SetCharacterSet(0);
            if(returevlaue==ZQPrinter.AB_SUCCESS){ //0:USA, 19:Euro
                t.append("Success\n\n");
                String tem_buffer=new String();
                tem_buffer="Data ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
            }           
            t.append("\n do long press on touchscreen\n");  
            CheckGC("SetCharacterSet_End" );
            return true;       

        case GetPowerStatus_ID:  
            CheckGC("GetPowerStatus_Start" );
            t.setText("");          
            t.append("GetPowerStatus...\n");            
            returevlaue=PrinterService.GetPowerStatus();
            if(returevlaue==ZQPrinter.AB_SUCCESS){
                t.append("Success\n\n");
            }else if(returevlaue==ZQPrinter.PWR_HIGH){
                t.append("Success\n\n");
                String tem_buffer=new String();
                tem_buffer="BXL_PWR_HIGH ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;

            }else if(returevlaue==ZQPrinter.PWR_MIDDLE){
                t.append("Success\n\n");
                String tem_buffer=new String();
                tem_buffer="BXL_PWR_MIDDLE ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;

            }else if(returevlaue==ZQPrinter.PWR_LOW){
                t.append("Success\n\n");
                String tem_buffer=new String();
                tem_buffer="BXL_PWR_LOW ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;

            }else if(returevlaue==ZQPrinter.PWR_SMALL){
                t.append("Success\n\n");
                String tem_buffer=new String();
                tem_buffer="BXL_PWR_SMAL ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;

            }else if(returevlaue==ZQPrinter.PWR_NOT){
                t.append("Success\n\n");
                String tem_buffer=new String();
                tem_buffer="BXL_PWR_NOT ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;

            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
            }           
            t.append("\n do long press on touchscreen\n");
            CheckGC("GetPowerStatus_End" );
            return true;

        case MsrTrack1_ID:
            CheckGC("MsrTrack1_Start" );
            t.setText("");          
            t.append("MsrTrack1...\n");  
            byte[] i1 = PrinterService.MsrTrack1();
            char temchar1;
            if(i1!=null){
                PrintOutput("MsrTrack1",i1);
                t.append("Success\n\n");
               //////////////////////////////////// 
                String tem_buffer=new String();
                tem_buffer="Data :("+i1.toString()+") ";
                for(int i=0;i<i1.length;i++)
                {
                    temchar1=(char)i1[i];
                    tem_buffer=tem_buffer+" "+temchar1;
                }
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
              ///////////////////////////////////////   
            }else{
                t.append("Fail\n\n");
            }       
            t.append("\n do long press on touchscreen\n");   
            i1=null;
            CheckGC("MsrTrack1_End" );
            return true;    

        case MsrTrack2_ID:
            CheckGC("MsrTrack2_Start" );
            t.setText("");          
            t.append("MsrTrack2...\n");  
            byte[] i2 = PrinterService.MsrTrack2();
            char temchar2;
            if(i2!=null){
                t.append("Success\n\n");
                PrintOutput("MsrTrack2",i2);
            ////////////////////////////////////    
                String tem_buffer=new String();
                tem_buffer="Data :("+i2.toString()+") ";
                for(int i=0;i<i2.length;i++)
                {
                     temchar2=(char)i2[i];
                     tem_buffer=tem_buffer+" "+temchar2;
                }
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
            ////////////////////////////////////
            }else{
                t.append("Fail\n\n");
            }        
            t.append("\n do long press on touchscreen\n"); 
            i2=null;
            CheckGC("MsrTrack1_End" );
            return true;      

        case MsrTrack3_ID: 
            CheckGC("MsrTrack1_End" );
            t.setText("");          
            t.append("MsrTrack3...\n");  
            byte[] i3 = PrinterService.MsrTrack3();
            char temchar3;
            if(i3!=null){
                 PrintOutput("MsrTrack3",i3);
                 t.append("Success\n\n");
                ////////////////////////////////////
                 String tem_buffer=new String();
                 tem_buffer="Data :("+i3.toString()+") ";
                 for(int i=0;i<i3.length;i++)
                 {
                     temchar3=(char)i3[i];
                     tem_buffer=tem_buffer+" "+temchar3;
                 }
                 t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                 tem_buffer=null;
                ////////////////////////////////////
            }else{
                t.append("Fail\n\n");
            }        
            t.append("\n do long press on touchscreen\n"); 
            i3=null;
            CheckGC("MsrTrack1_End" );
            return true;
        case MsrTrack12_ID: 
            CheckGC("MsrTrack12_End" );
            t.setText("");          
            t.append("MsrTrack12...\n");  
            byte[] i4 = PrinterService.MsrTrack12();
            char temchar4;
            if(i4!=null){
                 PrintOutput("MsrTrack12",i4);
                 t.append("Success\n\n");
                ////////////////////////////////////
                 String tem_buffer=new String();
                 tem_buffer="Data :("+i4.toString()+") ";
                 for(int i=0;i<i4.length;i++)
                 {
                     temchar4=(char)i4[i];
                     tem_buffer=tem_buffer+" "+temchar4;
                 }
                 t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                 tem_buffer=null;
                ////////////////////////////////////
            }else{
                t.append("Fail\n\n");
            }        
            t.append("\n do long press on touchscreen\n"); 
            i4=null;
            CheckGC("MsrTrack12_End" );
            return true;
        case MsrTrack23_ID: 
            CheckGC("MsrTrack23_End" );
            t.setText("");          
            t.append("MsrTrack23...\n");  
            byte[] i5 = PrinterService.MsrTrack3();
            char temchar5;
            if(i5!=null){
                 PrintOutput("MsrTrack23",i5);
                 t.append("Success\n\n");
                ////////////////////////////////////
                 String tem_buffer=new String();
                 tem_buffer="Data :("+i5.toString()+") ";
                 for(int i=0;i<i5.length;i++)
                 {
                     temchar5=(char)i5[i];
                     tem_buffer=tem_buffer+" "+temchar5;
                 }
                 t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                 tem_buffer=null;
                ////////////////////////////////////
            }else{
                t.append("Fail\n\n");
            }        
            t.append("\n do long press on touchscreen\n"); 
            i5=null;
            CheckGC("MsrTrack23_End" );
            return true;
        case Directio_ID: 
            CheckGC("Directio_Start" );
            t.setText("");          
            t.append("Directio...\n");  
            byte sendApdu[] = {0x10, 0x04, 0x01}; 
            byte[] readData = new byte[1];
            int[] readLength = new int[1];
            readLength[0]=readData.length;
            returevlaue=PrinterService.Directio(sendApdu,sendApdu.length,readData,readLength);
            if(returevlaue==ZQPrinter.AB_SUCCESS){
                t.append("Success\n\n");
             ////////////////////////////////////
             String tem_buffer=new String();
             tem_buffer="DataSize:("+readLength[0]+") ,Date : ";
             for(int i=0;i<readLength[0];i++)
             {
                 tem_buffer=tem_buffer+" "+readData[i];
             }
             t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
             tem_buffer=null;
             ////////////////////////////////////   
            }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
            }           
            t.append("\n do long press on touchscreen\n");
            CheckGC("Directio_End" );
            return true;
        case PrintText1K_ID: 
            CheckGC("PrintText1K_Start" );
             t.setText("");         
             t.append("PrintText1K...\n"); 

             String test=new String();  
             for(int i=0 ;i<120;i++)
             {
                 test+="ABCDEFGabcdefg123456!@#$%^ ";
             }

             returevlaue=PrinterService.PrintText(test, 
                        ZQPrinter.ALIGNMENT_LEFT, 
                        ZQPrinter.FT_DEFAULT, 
                        ZQPrinter.TS_0WIDTH | ZQPrinter.TS_0HEIGHT );

             if(returevlaue==ZQPrinter.AB_SUCCESS){
                returevlaue=PrinterService.LineFeed(5);
                t.append("Success\n\n");
             }else{
                t.append("Fail\n\n");
                String tem_buffer=new String();
                tem_buffer="ERROR ["+returevlaue+"]";
                t.append(tem_buffer.subSequence(0,tem_buffer.getBytes().length));
                tem_buffer=null;
             }

             test=null;
             t.append("\n do long press on touchscreen\n");  
             CheckGC("PrintText1K_End" );
             return true;

        }

        return super.onContextItemSelected(item);
    }

    void CheckGC(String FunctionName)
    {
        long VmfreeMemory =Runtime.getRuntime().freeMemory();
        long VmmaxMemory=Runtime.getRuntime().maxMemory();
        long VmtotalMemory=Runtime.getRuntime().totalMemory();
        long Memorypercentage=((VmtotalMemory-VmfreeMemory)*100)/VmtotalMemory; 

        Log.i(TAG,FunctionName+"Before Memorypercentage"+Memorypercentage+"% VmtotalMemory["+VmtotalMemory+"] "+"VmfreeMemory["+VmfreeMemory+"] "+"VmmaxMemory["+VmmaxMemory+"] ");

          //Runtime.getRuntime().gc();
          System.runFinalization();
          System.gc();
          VmfreeMemory =Runtime.getRuntime().freeMemory();
          VmmaxMemory=Runtime.getRuntime().maxMemory();
          VmtotalMemory=Runtime.getRuntime().totalMemory();
          Memorypercentage=((VmtotalMemory-VmfreeMemory)*100)/VmtotalMemory; 
        Log.i(TAG,FunctionName+"_After Memorypercentage"+Memorypercentage+"% VmtotalMemory["+VmtotalMemory+"] "+"VmfreeMemory["+VmfreeMemory+"] "+"VmmaxMemory["+VmmaxMemory+"] ");
    }
    public void PrintOutput(String FunctionName,byte[] Data)
    {
        for(int i=0;i<Data.length;i++)
        {
            Log.i(TAG,FunctionName+"Data["+i+"]="+Data[i]);
        }
    } 
```

# c# - 如何使用 C# 删除 Wpf 组合框项

> ID：13525642
> 
> 赞同：0
> 
> 时间：2012-11-23T08:52:12.387
> 
> 标签：c#, wpf, combobox

我有 3 个具有相同 3 个项目（a、b、c）的组合框。如果我在combobox1中选择“a”，“a”将从combobox2中删除，留在combobox2中的项目将是“b”和“c”。然后我在combobox2中选择“b”，“b”将从combobox3中删除，combobox3中的项目将是“a”和“c”。如果前一个组合框通过 selectionChanged，则删除的项目将再次恢复到组合框中。我尝试了一些在 Internet 上找到的代码，但不起作用...从 previos 组合框中选定的项目没有被删除。

我的组合框代码：

```
<ComboBox Name="firstCombo" SelectionChanged="firstCombo_SelectionChanged">
    <ComboBoxItem Content="A"></ComboBoxItem>
    <ComboBoxItem Content="B"></ComboBoxItem>
    <ComboBoxItem Content="C"></ComboBoxItem>
</ComboBox>

<ComboBox Name="secondCombo" SelectionChanged="secondCombo_SelectionChanged">
    <ComboBoxItem Content="A"></ComboBoxItem>
    <ComboBoxItem Content="B"></ComboBoxItem>
    <ComboBoxItem Content="C"></ComboBoxItem>
</ComboBox>

<ComboBox Name="thirdCombo" >
    <ComboBoxItem Content="A"></ComboBoxItem>
    <ComboBoxItem Content="B"></ComboBoxItem>
    <ComboBoxItem Content="C"></ComboBoxItem>
</ComboBox> 
```

我的 C# 代码：

```
private void firstCombo_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    secondCombo.Items.Remove(firstCombo.SelectionBoxItem);         
}

private void secondCombo_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    thirdCombo.Items.Remove(secondCombo.SelectionBoxItem);         
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T08:58:44.277

我想问题是这些实际上是不同的`ComboBoxItem`实例。它们具有相同的文本，但它们仍然是不同的实例。因此，`SelectionBoxItem`from`secondCombo`不会被找到`thirdCombo.Items`，因此它不会被删除。

您需要根据显示的文本将其删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:59:56.870

您可以使用 SelectedIndex 删除它，但如果您之前删除过某些内容，请注意它，因为如果您已经删除它，那么索引就不一样了：

```
private void firstCombo_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    secondCombo.Items.RemoveAt(firstCombo.SelectedIndex);         
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:24:04.587

您可以只更改单个项目的可见性，而不是添加和删除项目。

如果您在 XAML 中绑定它（通过转换器），“删除”和“读取”将自动发生。

```
<ComboBox Name="firstCombo">
    <ComboBoxItem Content="A"></ComboBoxItem>
    <ComboBoxItem Content="B"></ComboBoxItem>
    <ComboBoxItem Content="C"></ComboBoxItem>
</ComboBox>

<ComboBox Name="secondCombo">
    <ComboBoxItem Content="A"
                  Visiblity="{Binding ElementName=firstCombo Path=SelectedIndex,
                              Converter=IndexToVisibiltyConverter,
                              ConverterParameter=A></ComboBoxItem>
    <ComboBoxItem Content="B"
                  Visiblity="{Binding ElementName=firstCombo Path=SelectedIndex,
                              Converter=IndexToVisibiltyConverter,
                              ConverterParameter=B></ComboBoxItem>
    <ComboBoxItem Content="C"
                  Visiblity="{Binding ElementName=firstCombo Path=SelectedIndex,
                              Converter=IndexToVisibiltyConverter,
                              ConverterParameter=C></ComboBoxItem>
</ComboBox>

<ComboBox Name="thirdCombo">
    <ComboBoxItem Content="A"
                  Visiblity="{Binding ElementName=secondCombo Path=SelectedIndex,
                              Converter=IndexToVisibiltyConverter,
                              ConverterParameter=A></ComboBoxItem>
    <ComboBoxItem Content="B"
                  Visiblity="{Binding ElementName=secondCombo Path=SelectedIndex,
                              Converter=IndexToVisibiltyConverter,
                              ConverterParameter=B></ComboBoxItem>
    <ComboBoxItem Content="C"
                  Visiblity="{Binding ElementName=secondCombo Path=SelectedIndex,
                              Converter=IndexToVisibiltyConverter,
                              ConverterParameter=C></ComboBoxItem>
</ComboBox> 
```

*注意：转换器定义不是合法的语法 - 仅供说明！

您可以绑定到显示的文本或选定的值 - 任何最方便的。

转换器将根据参数检查索引/文本/值并根据需要返回`Visibility.Visible`或`Visibility.Collapsed`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T09:09:28.340

也就是说，也许。

```
String strCombo1 = comboBox1.SelectedItem.ToString(); 
comboBox2.Items.Remove(strCombo1); 
```

# android - 如何等待线程直到另一个线程完成

> ID：13525644
> 
> 赞同：0
> 
> 时间：2012-11-23T08:52:25.543
> 
> 标签：android, multithreading, gridview

我想在网格视图中加载图像时显示进度对话框。
我面临的问题是当前线程和进度对话框线程同时运行。

```
 public String Method1(){
        String output="";
        final ProgressDialog aProgDialogL = ProgressDialog.show(this, "", "Loading...");
        Thread thread = new Thread() {
            public void run () {
                //My codes
                aHandlerL.post(new Runnable() {
                    @Override
                    public void run() {
                        //Post Runnable codes
                        aProgDialogL.dismiss();
                    }
                });
            }
        };
        thread.start();

        /*
         * 
         * 
         * OTHER CODES
         * 
         * 
         */
        return output;
 } 
```

在上面的示例中，我需要在 Progress Dialog Thread 中运行代码。完成执行后，我需要运行我的“其他代码”。怎么做？
.
我尝试使用异步任务。在异步任务完成之前，method1 被执行并重新使用字符串。

```
 public String Method1(){
    String result="";
    new GetImages().execute();
    return result;

}
public class GetData extends AsyncTask<Void, Void, Integer>{

    @Override
    protected void onPreExecute() {
        aProgDialogL = ProgressDialog.show(Main.this, "", "Loading...");
    }

    @Override
    protected Integer doInBackground(Void... params) {
        //Progress Dialig Code
        return null;
    }

    @Override
    protected void onPostExecute(Integer result) {
        aProgDialogL.dismiss();
        //OTHER CODES
        super.onPostExecute(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:01:30.060

您可以使用异步任务。[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)。这里有一个很好的教程。[http://www.vogella.com/articles/AndroidPerformance/article.html。](http://www.vogella.com/articles/AndroidPerformance/article.html.Also)也看看这个链接 [http://developer.android.com/guide/components/processes-and-threads.html](http://developer.android.com/guide/components/processes-and-threads.html)。使用 asynctask 根据您的需要对其进行修改。

```
 doInBackground()- For long running operations. Don't update ui here.
     onPreExecute()- update ui before running the operatio nin background.
     onPostExecute()- update ui after running the operation. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:15:15.937

我建议你采取一些不同的方法。

不要在 Method1() 函数中涉及任何线程。相反，您的 Method1() 函数应该在单独的线程下运行。

下面的片段会帮助你。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ((Button) findViewById(R.id.btnPopup))
            .setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                new Thread() {
                    public void run() {

                        String answer = Method1();

                        runOnUiThread(new Runnable() {

                            @Override
                            public void run() {
                                // Here you will write the code which is
                                // to be executed on main thread.

                            }
                        });
                    };
                }.start();
            }
        });

    }

    public String Method1() {
        // Write code

        return "result";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:59:48.887

我建议使用 AsyncTask 来解决你的问题

```
http://p-xr.com/merging-2-tutorials-xml-data-progressdialog-using-asynctask/

http://p-xr.com/android-tutorial-how-to-make-a-progress-dialog/ 
```

和

```
http://developer.android.com/reference/android/os/AsyncTask.html 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T09:34:27.850

取而代之的是：在特定时间之后使用 Timer 停止你的线程并在停止语句之后编写你想要的代码就像这样：

```
Timer timer=new Timer();
 timer.schedule(new TimerTask() {
 @Override
public void run() {
     thread.stop;
       // Other code   } 
```

}，你想要的时间）；

# sql - 限制第一个表的左连接

> ID：13525656
> 
> 赞同：10
> 
> 时间：2012-11-23T08:53:39.703
> 
> 标签：sql, left-join, limit

我有两个表： gems 和 gemdetail 是左连接的。我试图将 LEFT JOIN 限制为 gems 表中的 10 条记录。还加入了 2 个其他表（gemreply 和 users），但它们不会导致问题。以下不起作用：

```
SELECT gems.gemid, gems.title, r.tot, gemdetail.filename FROM ((gems 
LEFT JOIN (SELECT gemid, COUNT(*) AS tot FROM gemreply GROUP BY gemid) AS r ON gems.gemid = r.gemid) 
LEFT JOIN gemdetail ON gems.gemid = gemdetail.gemid) 
LEFT JOIN users ON gems.userid = users.userid 
WHERE gems.grade = '7' ORDER BY gems.gemid LIMIT 0, 10; 
```

这将返回的总行数限制为 10，但由于每个 gem 有多个详细记录，我只剩下不到 10 个 gem 记录。我已经阅读了每个“限制”帖子，但没有发现这种情况。

更新 1：好的 - 感谢 jviladrich - 它有效。这是代码：

```
SELECT gems.gemid, gems.title, r.tot, gemdetail.filename  
FROM ((gems 
INNER JOIN (SELECT gems.gemid from gems WHERE gems.grade = '7'  ORDER BY gems.gemid LIMIT 0, 10) g
ON (gems.gemid = g.gemid)
LEFT JOIN (SELECT gemid, COUNT(*) AS tot FROM gemreply GROUP BY gemid) AS r ON gems.gemid = r.gemid) 
LEFT JOIN gemdetail ON gems.gemid = gemdetail.gemid) 
LEFT JOIN users ON gems.userid = users.userid ; 
```

更新 2：下面 yogeshr 的代码也可以工作——可能是我要使用的代码。感谢你们俩！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-23T09:02:55.460

类似的东西

```
 SELECT * FROM A
      INNER JOIN ( SELECT * FROM A WHERE A.FIELD1='X' ORDER BY A.FIELD2 LIMIT 10) X
             ON (A.KEYFIELD=X.KEYFIELD)
      LEFT JOIN B ON (A.FIELD = B.FIELD)
      LEFT JOIN C ON (A.FIELD = C.FIELD) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-23T09:13:26.507

试试这个：

```
SELECT g.gemid, g.title, r.tot, gemdetail.filename
FROM (SELECT * FROM gems WHERE grade = '7' LIMIT 10) g
LEFT JOIN (SELECT gemid, COUNT(*) AS tot FROM gemreply GROUP BY gemid) r
          ON r.gemid = g.gemid
LEFT JOIN gemdetail ON g.gemid = gemdetail.gemid
LEFT JOIN users ON g.userid = users.userid
ORDER BY g.gemid; 
```

这应该有效。

# matlab - 在 MATLAB 中查找单元格中特定值的索引

> ID：13525657
> 
> 赞同：4
> 
> 时间：2012-11-23T08:53:39.873
> 
> 标签：matlab, indexing, find, cell

我有一个二维单元格，其中每个元素都是 a) 空或 b) 一个不同长度的向量，其值从 0 到 2 不等。我想获得出现某个值甚至更好的单元格元素的索引，每次出现某个特定值的“完整”索引。

我目前正在研究基于代理的疾病传播模型，这样做是为了找到受感染代理的位置。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T09:27:36.100

这是我的做法：

```
% some example data
A = { [],     [], [3 4 5]
      [4 8 ], [], [0 2 3 0 1] };

p = 4; % value of interest

% Finding the indices:
% -------------------------

% use cellfun to find indices
I = cellfun(@(x) find(x==p), A, 'UniformOutput', false);

% check again for empties
% (just for consistency; you may skip this step)
I(cellfun('isempty', I)) = {[]}; 
```

调用这个方法1。

循环也是可能的：

```
I = cell(size(A));
for ii = 1:numel(I)
    I{ii} = find(A{ii} == p);
end
I(cellfun('isempty',I)) = {[]}; 
```

调用此方法2。

比较两种方法的速度，如下所示：

```
tic; for ii = 1:1e3, [method1], end; toc
tic; for ii = 1:1e3, [method2], end; toc 
```

给

```
Elapsed time is 0.483969 seconds.  % method1
Elapsed time is 0.047126 seconds.  % method2 
```

在带有 Intel Core i3-2310M@2.10GHz w/Ubuntu 11.10/2.6.38-13 的 Matlab R2010b/32bit 上。这主要是由于循环上的 JIT（以及`cellfun`似乎实现了多么可怕和匿名的函数，mumblemumble..）

无论如何，简而言之，使用循环：它的可读性更好，并且比矢量化解决方案快一个数量级。

# php - preg_match IE8 图像未显示

> ID：13525658
> 
> 赞同：0
> 
> 时间：2012-11-23T08:53:41.970
> 
> 标签：php, html, internet-explorer

我正在使用这段代码：

```
$pageObject = get_page($page_id);  
$pageImage = ""; 
if (preg_match('/<!--\[img\](.*?)\[img\]-->/', $pageObject->post_content, $matches)){ 
   if (!empty($matches[1])){ 
       $pageImage = $matches[1]; 
   }
} 
```

获取图像 url，并显示它我使用：

```
<img class="aligncenter size-full wp-image-139" title="" src="<?php echo $pageImage; ?>" alt="" width="" height="" /> 
```

它适用于 chrome、firefox、opera、safari，问题是在 IE8 中图像不显示，就像它不存在一样，但在页面源中一切看起来都很好。

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:57:21.927

`width="" height=""`从您的 HTML 中删除。`""`被 IE8 解释为`0`由于大小为 0x0 而使图像不可见。

顺便说一句，您还应该删除无用的`title=""`and `alt=""`。

# xaml - 将不同样式应用于不同容器内的相同控件

> ID：13525659
> 
> 赞同：2
> 
> 时间：2012-11-23T08:53:47.580
> 
> 标签：xaml, styles

这可能使用 Xaml 吗？例如，我在分组框和工具栏内有标签。我已使用 Xaml 代码中的样式将标签的前景色设置为白色。

窗口的背景颜色为黑色，因此组框也具有此背景。但是，工具栏的背景颜色是 System.Media.Colors.Control （或默认情况下的任何颜色），我想保持这种状态。问题是白色不是几乎白色（工具栏）上的最佳颜色。

是否可以根据容器的内容将标签的前景色设置为不同？而且只在一个地方 - 在我的情况下，在主窗口的 Window.Resources 标记内。

像这样的东西：

```
<Style TargetType="Label">
    <Setter Property="Background">
        <Setter.Value>
            <SolidColorBrush Color="White"/>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="ToolBar.Label">
    <Setter Property="Background">
        <Setter.Value>
            <SolidColorBrush Color="Black"/>
        </Setter.Value>
    </Setter>
</Style> 
```

谢谢，

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T08:59:07.403

您可以使用控件定义资源，例如

```
<ToolBar>
        <ToolBar.Resources>
            <Style TargetType="Label">
                <Setter Property="Background">
                    <Setter.Value>
                        <SolidColorBrush Color="White"/>
                    </Setter.Value>
                </Setter>
            </Style>
        </ToolBar.Resources>
    </ToolBar> 
```

然后工具栏中的标签将选择本地资源。

# javascript - 从 Rails 上的远程链接呈现为 html

> ID：13525661
> 
> 赞同：0
> 
> 时间：2012-11-23T08:53:56.063
> 
> 标签：javascript, ruby-on-rails-3, twitter-bootstrap

在我的注册表单上，当用户成功注册以告诉他检查他的电子邮件时，我想显示一个模式（twitter-bootstrap），所以我在我的表单上输入“remote：true”并呈现一个.js.erb wich显示模态，在我的控制器上。

但是，如果出现输入错误，我需要将页面呈现为 html 以刷新显示这些错误的表单。

我可以将远程表单中的控制器调用为 JS 但呈现为 html 吗？（或任何其他想法做我想做的事）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:58:26.080

我假设你的控制器中有这样的东西：

```
 respond_to do |format|
    format.html { render :this }
    format.js { render :that }
  end 
```

您可以在 respond_to 块之前控制错误 im params，如果有任何错误呈现您的 html 视图，则继续执行 respond_to 块

```
 if errors?(params)
    render :error_view
  else
    respond_to do |format|
      format.html { render :this }
      format.js { render :that }
    end
  end 
```

# objective-c - 如何移动 searchResultsTableView

> ID：13525662
> 
> 赞同：2
> 
> 时间：2012-11-23T08:53:58.703
> 
> 标签：objective-c, xcode, uisearchdisplaycontroller

我想我想把它们移到我最喜欢的地方。我可以设置框架，但我应该在哪里设置呢？

另外，我如何确保表格仍然显示与搜索结果是否为空无关？

这是我尝试过的：

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString
{
    controller.searchResultsTableView.frame=self.placeForTableView.frame;
    controller.searchResultsTableView.hidden=false;
    controller.searchResultsTableView.alpha =1;
    [self debugMode:nil];
    return true;
} 
```

结果：

1.  当文本为 searchResultsTableView 时仍为空
2.  当有一个字符时，框架还没有移动
3.  当有超过 2 个字符时，事情会如我所愿。

然后我添加了这样的东西：

```
- (void)searchDisplayController:(UISearchDisplayController *)controller didShowSearchResultsTableView:(UITableView *)tableView
{
    [self putTableViewWhereItBelongs:tableView];
}
- (void)searchDisplayController:(UISearchDisplayController *)controller didHideSearchResultsTableView:(UITableView *)tableView
{
    [self putTableViewWhereItBelongs:tableView];
}
-(void)putTableViewWhereItBelongs :(UITableView *) tableView
{
    [self.view addSubview:tableView];
    tableView.frame=self.placeForTableView.frame;
    tableView.hidden=false;
    tableView.alpha =1;
} 
```

这完全符合我的意愿，只需要一点点。一开始它不起作用。一开始 tableView 既不显示也不隐藏。

另一个更新：

```
- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
    //UISearchDisplayController * controller = [self displayControllerForThisSearchBar:searchBar];
    if (IsEmpty(searchBar.text)) {
        searchBar.text=@" ";
        searchBar.text=@"";
    }

    //[self putTableViewWhereItBelongs:controller.searchResultsTableView];
} 
```

问题：

1.  尴尬的
2.  一个短暂的故障。我不希望这个动画。我不想让我的用户知道我有这个问题。好吧，它在不到 1 秒的时间内看起来确实有点动画

否则最终结果完全如我所愿。

我想知道是否有人可以改进这一点。

# iphone - 如何将 iOS 应用程序交付给没有 Mac 的测试人员

> ID：13525664
> 
> 赞同：0
> 
> 时间：2012-11-23T08:54:01.423
> 
> 标签：iphone, xcode, macos, itunes

我正在开发一个 iOS 应用程序（我有 macbook）并且我有一个苹果开发者的帐户。

如何将 iPhone 应用程序交付给没有 Mac 的测试人员？

* * *

测试者的手机没有越狱（我无法构建deb）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T09:01:36.637

我建议使用[试飞](https://testflightapp.com)服务。它允许您上传应用程序的构建，然后通过他们的网站分发给测试人员。

他们有一个很好的[帮助部分来帮助您入门](http://help.testflightapp.com)。

**编辑：**哦，基本服务是免费的。

我希望这会有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:01:24.323

他们也可以在 Windows 机器上运行 iTunes。但如果他们根本没有电脑，还有另一种选择。您可以通过链接分发它。

它真的很容易。准备像往常一样进行临时分发，然后单击“企业分发”复选框。

然后将 URL 添加到最终 .ipa 所在的位置。我通常也在第二行填写应用程序名称，但从不填写其余部分。

例如

```
http://www.yourdomain.com/YourApp/YourApp.ipa 
```

然后将创建的 .plist 和 .ipa 上传到相关 URL，以便这 2 个文件可以作为：

```
http://www.yourdomain.com/YourApp/YourApp.ipa
http://www.yourdomain.com/YourApp/YourApp.plist 
```

现在最后创建一个简单的 HTML 页面并将其上传到您的站点。

```
<http>
    <body>
        <c><font size="20"><a href="itms-services://?action=download-manifest&url=http://www.yourdomain.com/YourApp/YourApp.plist">Click here to install YourApp</a></font></c>
    </body>
</http> 
```

现在向他们发送一个指向上述 HTML 页面的链接，他们就可以安装了。

***警告***：您必须在临时分发配置文件证书中包含测试人员的 UDID，否则这将不起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T09:25:31.310

跟着这些步骤：

1.  将用户包含在`udid`您的分发配置文件证书中（与的答案`adhoc`中的步骤相同）。`Goz`
2.  在`Xcode`中，使用存档功能并使用`adhoc`配置文件证书对代码进行签名。
3.  在 Organizer 中，创建用于分发的 .ipa 文件。
4.  将`.ipa`文件发送给您的用户（即通过电子邮件）。
5.  要求他们将文件拖放到Windows`.ipa`的应用程序部分并同步他们的设备。`iTunes`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T08:57:48.993

你必须有 Mac OS 和 Mac 机器来开发它们。您需要在 Mac OSX 上安装 XCode 来编码、运行和测试您的应用程序。

如果您不想购买 Mac，您可以参考这个名为 Hackintosh 的链接在 PC 上安装 Mac OSX。如果您正确执行以下步骤，这在 PC 上可以正常工作：

[http://tonymacx86.blogspot.in/2011/07/xmove-multibeast-install-os-x-107-lion.html](http://tonymacx86.blogspot.in/2011/07/xmove-multibeast-install-os-x-107-lion.html)

如果这不可能，您可以考虑邀请该人亲自或通过前任虚拟进行。Teamviewer 或任何其他远程桌面协议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T09:11:45.910

到目前为止，我使用过的最方便、最省时的方法是试飞。集成非常简单。您可以与测试人员共享文件，并且不需要您拥有系统。

主要步骤是

1）创建有效账号后下载并集成[Testflight SDK （需要登录）。](https://testflightapp.com/sdk/)

2) 将 SDK 与 iPhone 应用程序集成（尽管如果您只想分发应用程序而不跟踪其使用和报告目的，这不是强制性的）。

3）创建您的团队并在门户上上传构建。

4) 随后允许测试人员访问配置文件中提到的允许设备。

您可以在一个地方管理多个团队和应用程序。希望能帮助到你。

# iphone - 有没有办法让 NSBundle 本地化缓存失效，而无需重新启动应用程序？[iOS]

> ID：13525665
> 
> 赞同：6
> 
> 时间：2012-11-23T08:54:02.983
> 
> 标签：iphone, ios, private, localizable.strings

假设我们可以在运行时更改 Localizable.strings，即放置在 NSBundle 中。当前，即使我们更改它的内容，*NSLocalizedString*也会返回旧的（缓存的）值。

1.  运行应用程序
2.  获取特定 key1 <- value1 的 LocalizableString
3.  更改 Localizable.strings key1 = value2
4.  <-- 在应用程序中做一些事情来使本地化缓存失效-->
5.  检查特定 key1 == value2 的 LocalizableString

我已经尝试过的：

*   [[NSBundble mainBundle] 无效资源缓存]
*   [UIApplication_performMemoryWarning]
*   试着看看，如果有一些字典。用于缓存，在 NSBundle 的 ivars 中。
*   试图看到，在 NSBundle 的 GNUStep 实现中，但它与我们在 ios 6.0 中的不同

我不能做什么（根据定义）： - 我不能调配 [NSBundle localizableStringForKey:value:table] - 我不能更改宏 - 一般来说，我不能影响任何原始项目代码，只能在步骤 #4 添加一些东西

这仅用于开发目的。所以，我不需要在 AppStore 或其他地方发布它，所以任何私有方法或解决方案都可以。

所以，问题是。可能有人知道如何做到这一点，或者有人给我另一个想法如何做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T07:50:36.270

> 注意：此解决方案使用私有 API，如果您使用此代码，您向 App Store 提交的应用程序将被拒绝。

所以，经过一番搜索，我找到了对我有帮助的链接

[如何删除 NSBundle 缓存](http://michelf.ca/blog/2010/killer-private-eraser/)

```
// First, we declare the function. Making it weak-linked 
// ensures the preference pane won't crash if the function 
// is removed from in a future version of Mac OS X.
extern void _CFBundleFlushBundleCaches(CFBundleRef bundle) 
  __attribute__((weak_import));

BOOL FlushBundleCache(NSBundle *prefBundle) {
    // Before calling the function, we need to check if it exists
    // since it was weak-linked.
    if (_CFBundleFlushBundleCaches != NULL) {
        NSLog(@"Flushing bundle cache with _CFBundleFlushBundleCaches");
        CFBundleRef cfBundle =
           CFBundleCreate(nil, (CFURLRef)[prefBundle bundleURL]);
        _CFBundleFlushBundleCaches(cfBundle);
        CFRelease(cfBundle);
        return YES; // Success
    }
    return NO; // Not available
} 
```

刷新包缓存后，使用新的本地化键。所以现在我不需要在模拟器中重新启动我的应用程序来查看可本地化字符串的变化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-19T08:53:30.187

您可以使用**uncache**解决方案。

`Localizable.nocache.strings`在您的`lproj`文件夹中使用。

例如`example.bundle/Resources/de.lproj/Localizable.nocache.strings`

`url`通过 FileManager获取后加载本地化字符串。

```
func localizedString(key: String) -> String {
   let bundle = Bundle(url: bundleUrl)
   return bundle.localizedString(forKey: key, value: nil, table: "Localizable.nocache")
} 
```

# php - PHP MYSQL - ID AS 类别 SUB_ID 作为评论

> ID：13525669
> 
> 赞同：0
> 
> 时间：2012-11-23T08:54:40.327
> 
> 标签：php, mysql, comments, categories, article

我无法弄清楚如何在 mysql db 条目下获取评论。

例如，有一篇文章的女巫 id 是`1`，然后在那篇文章中有一些（例如 3 条）评论（ID - 1）`[ARTICLE_ID][CATEGORY]`
，评论就像：`[ID][ARTICLE_ID]` ..

所以就像

| 身份证 | SUB_ID | 标题....
| 1 | 123 | 这是一篇文章
| 2 | 1 | 对第 1 条的评论
| 3 | 1 | 对第 1 条的评论 2
| 4 | 1 | 所有这些 ID 的第 1 条
和 CEN_TYPE 的评论 3，1,2,3,4 是`forumentry`

我这样尝试过的：

1.  SELECT everthing from CNT_Entries_A WHERE CEN_TYPE 就像`forumentry`- 所以这里一切都很好，但它没有在下面放评论（逻辑上）
2.  将所有 ID 和 SUB_ID 放入数组中
3.  进行foreach循环，检查当前ID是否等于数组值，如果是，则检查该ID是否在数组中-如果不是，则将其打印出来并将其放入数组中。
4.  与 SUB ID 相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:04:15.270

我强烈建议将数据拆分为两个数据表：

**文章**
`article_id | text`

**注释**
`comment_id | article_id | comment`

然后你不会有问题做一个简单的`SELECT`+`LEFT JOIN`查询......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:03:27.770

这将给出文章及其评论的结果，以便您可以循环访问：

[在这里](http://sqlfiddle.com/#!2/0f91e/2)找到实现

```
SELECT c1 . * , c2 . * 
FROM comments AS c1
JOIN comments AS c2 ON ( c1.id = c2.sub_id
AND c1.id != c2.id ) 
WHERE c1.cen_type =  'forumentry'

+----+--------+-------------------+------------+----+--------+----------------------+------------+
| id | sub_id | title             | cen_type   | id | sub_id | title                | cen_type   |
+----+--------+-------------------+------------+----+--------+----------------------+------------+
|  1 |      1 | THIS IS A ARTICLE | forumentry |  2 |      1 | COMMENT TO ARTICLE 1 | forumentry |
|  1 |      1 | THIS IS A ARTICLE | forumentry |  3 |      1 | COMMENT 2 to article | forumentry |
|  1 |      1 | THIS IS A ARTICLE | forumentry |  4 |      1 | Comment 3 to Article | forumentry |
+----+--------+-------------------+------------+----+--------+----------------------+------------+ 
```

# nservicebus - 使用自己的队列作为长期流程操作的持有者的应用程序

> ID：13525670
> 
> 赞同：0
> 
> 时间：2012-11-23T08:54:49.360
> 
> 标签：nservicebus, long-running-processes

我想制作一个长期的流程处理程序并为它使用 NServiceBus。NServiceBus 的作用是保存该进程的操作（某种批处理）问题是我有不止一种类型的长期进程，并且每个进程都必须并行运行，因此将所有消息推送到一个队列中不是我必须做的，我想。

逻辑是：1）接收一个长期进程的命令，2）将其分成N个操作，3）每个操作“打包”到消息中并推送到队列中，4）根据消息的类型，特定的handler将处理消息并执行它所持有的操作。

我不能将所有操作放在一个队列中，因为我的应用程序应该处理另一条消息，这需要快速响应。如果队列中充满了操作，则另一条消息将等待很长时间才能处理

那么，有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:36:44.170

您应该在长时间运行的进程端点的访问队列配置设置中正确设置工作线程的数量。

如果您正在使用`MSMQ`检查[这个](http://www.nservicebus.com/faq/MsmqTransportConfig.aspx)，尤其是标签`<MsmqTransportConfig ErrorQueue="error" NumberOfWorkerThreads="1" MaxRetries="5"/>`

尽管另一个线程仍在处理另一条消息，但每个空闲的工作线程都会从队列中拉出一条消息。通过这种方式，您应该实现您在场景中描述的并行计算要求。

# jquery - 如何使用 addClass 和 removeClass 在 JQuery 中控制速度？

> ID：13525672
> 
> 赞同：1
> 
> 时间：2012-11-23T08:55:02.063
> 
> 标签：jquery, jquery-ui, jquery-plugins

我正在使用以下代码在图像悬停时提供弹出标题

```
<script type="text/javascript">
     var jq = $.noConflict();
     jq(document).ready(function(){
     jq(".package-images").mouseover(function(){
     jq(this).addClass("title-effect");
     jq(this).addClass("image-effect");
      jq(".package-images").mouseout(function(){
     jq(this).removeClass("title-effect");
      jq(this).removeClass("image-effect");
     });
    });
   });
  </script> 
```

它工作得很好，但我怎样才能控制这些效果的速度。基本上我希望标题效果慢慢发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T08:58:22.937

如果您希望在一秒钟内对更改进行动画处理：

```
$(this).addClass("title-effect", 1000); 
```

如果您希望更改延迟一秒钟：

```
$(this).delay(1000).addClass("title-effect"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T08:56:21.783

研究使用[setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)方法。

**例子：**

```
function changeColor() {
  nIntervId = setInterval(flashText, 500);
} 
```

或者，它可以作为第二个参数放置`addClass`：

```
$(this).addClass("title-effect", 1000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T08:56:36.990

根据[jQuery UI 文档](http://api.jqueryui.com/addClass/)`addClass()`，您可以在or的第二个参数中设置动画的持续时间`removeClass()`：

```
$(this).addClass("title-effect", 1000);
$(this).removeClass("title-effect", 1000); 
```

> **期间：**
> 
> 确定动画将运行多长时间的字符串或数字。

# android - 关于Android composer->captureScreen 截屏

> ID：13525675
> 
> 赞同：0
> 
> 时间：2012-11-23T08:55:33.117
> 
> 标签：android, screen-capture

我想使用android源代码在android4.0.3中捕获屏幕。它可以正确编译。运行时报错：`Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1).`debug在cpp文件中发现调用`composer->captureScreen`函数，返回NO_ERROR值，但是heap为null，w和h为0，所以调用heap->getBase()时出错。我对此感到困惑。

```
{
    const char *file_path = env->GetStringUTFChars(file, NULL);
    const String16 name("SurfaceFlinger");
    sp<ISurfaceComposer> composer;
    getService(name, &composer);

    sp<IMemoryHeap> heap;
    uint32_t w, h;
    PixelFormat f;
    status_t err = composer->captureScreen(0, &heap, &w, &h, &f,0,0,0,INT_MAX);///*for 4.1.3*/,0,0
    if (err != NO_ERROR) {
        LOGE("screen capture failed: %s\n", strerror(-err));
        exit(0);
    }

    LOGD("screen capture success: w=%u, h=%u, pixels=%p\n",
            w, h, heap->getBase());

    LOGD("saving file as PNG in %s ...\n", file_path);

    SkBitmap b;
    b.setConfig(SkBitmap::kARGB_8888_Config, w, h);
    b.setPixels(heap->getBase());
    SkImageEncoder::EncodeFile(file_path, b,
            SkImageEncoder::kPNG_Type, SkImageEncoder::kDefaultQuality);
    return file;
} 
```

编辑：我添加了

```
 <uses-permission android:name="android.permission.READ_FRAME_BUFFER" />
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在清单中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:08:17.873

我一直试图在另一个类中调用未初始化的画布，所以当它试图获取它的高度或宽度时，它会崩溃。

[请参阅Android Fatal Signal 11](https://stackoverflow.com/questions/10423128/android-fatal-signal-11)的原始 SO[答案](https://stackoverflow.com/a/10436912/1065525)。

# objective-c - 线程 1：EXC_BREAKPOINT（代码=EXC_i386_BPT，子代码=0x0）错误

> ID：13525677
> 
> 赞同：12
> 
> 时间：2012-11-23T08:55:34.170
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, ios6

我正在制作一个 iPad 应用程序，但即使没有错误或警告，它也会在启动时崩溃，输出除了“（lldb）”之外没有输出任何内容，并且它标记了一个指针。

这是构建后崩溃的图像。

![崩溃的图像](../Images/51993511b741683fb4f0cd3d62d908a6.png)

这是代码：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
   /* UIImage *myImage = [UIImage imageNamed:@"de_dust2.png"];
    myImageView = [[UIImageView alloc] initWithImage:myImage];

    myScrollView.contentSize = CGSizeMake(myImageView.frame.size.width, myImageView.frame.size.height);
    myScrollView.maximumZoomScale = 4.0;
    myScrollView.minimumZoomScale = 0.75;
    myScrollView.clipsToBounds = YES;
    myScrollView.delegate = self;
   // [myScrollView addSubview:myImageView];*/

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    [self.viewController setRed:1];
     [self.viewController setGreen:0];
    [self.viewController setBlue:0];
    [self.viewController setAlpha:1];
    [self.viewController checkRotation];
    return YES;
} 
```

我现在还注意到该错误是在该`[self.window makeKeyAndVisible];`行给出的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T09:38:59.953

您的代码看起来没问题，崩溃可能是由于解析窗口的 XIB 文件引发的一些异常...

查看 Interface Builder 中的 Window 并尝试暂时删除对 View Controller 中存在的任何 IBOutlet 的所有引用...

# amazon-ec2 - 如何在 Scalr 上添加 AWS EC2 实例

> ID：13525679
> 
> 赞同：1
> 
> 时间：2012-11-23T08:55:38.083
> 
> 标签：amazon-ec2, scalr

我有一个拥有 14 个实例并使用 scalr 的 AWS 账户。我添加了 Api 参考详细信息，它出现了，当时实例非常少。当我不断添加新实例时，它接受的很少，而拒绝其余的。现在我有一个在 AWS 上新创建的实例，它没有被加载到 scalr 中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T00:48:26.343

您使用 AWS 创建的实例不会显示在 Scalar 中。

相反，您[`Farms`](http://wiki.scalr.com/display/docs/Farms)通过使用自定义和/或预配置的 Scalr 创建（在 Scalr 中）[`Roles`](http://wiki.scalr.com/display/docs/Roles)。当您启动这些场/角色时，它将在 AWS 中启动所需的实例。它就像一个围绕 AWS 提供额外功能的包装器，**但它只会知道从 Scalar 角色启动的实例**。

可以将现有服务器导入 Scalar，尽管这涉及将 scalarizr 软件安装到该服务器上并打开一些端口。[完整的细节可以在这里找到](http://wiki.scalr.com/display/docs/Import+a+non+Scalr+server)。完成后，您将拥有一个可以添加到场然后启动的新角色。

# model-view-controller - JSF2 中的 nl2br 不违反 MVC 范式？

> ID：13525685
> 
> 赞同：0
> 
> 时间：2012-11-23T08:56:14.390
> 
> 标签：model-view-controller, jsf-2, nl2br

我试图弄清楚如何最优雅地将 PHP 的 nl2br() 函数之类的东西集成到使用 JSF2/Spring 完成的当前项目中。我可以很容易地在我的模型类中使用类似的东西来创建吸气剂`return text.replaceAll("\n","<br/>");`，但这看起来确实像是将与视图相关的代码放在它不属于的地方。我对在我的数据库中存储实际的 html 内容有同样的感觉。我想最干净的解决方案是为此使用标签/EL，但是我找不到似乎可以做到这一点的东西。你们将如何实施这样的事情？提前感谢您，任何提示都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:05:18.787

嗯，首先 JSF 是一个 Web UI 框架。因此，您希望输出给用户的任何内容都将以 HTML 结尾（但 javascript 除外）。所以，我不认为它严重违反了 MVC（如果有的话）。也许您甚至可以推开信封并直接`<br/>`在文本中使用，而不是替换`\n`

在更一般的意义上，如果您的文本中有不同的行/段落，更灵活/标准的解决方案是将您的文本分解为不同的元素并让您的演示逻辑处理它。所以，而不是一个属性

```
 presentationPage.introductionText=Ipse Lorum ...sum.\nVini vidi vinci. 
```

你会以

```
 presentationPage.introductionText.par1=Ipse Lorum ...sum.
 presentationPage.introductionText.par2=vini vidi vinci. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T12:16:13.547

使用任一 CSS，假设文本不包含任何 HTML

```
<div style="white-space: pre">#{bean.text}</div> 
```

或者[创建一个自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function/7080174#7080174)，然后将其显示为非转义（Facelets 隐式转义 HTML）

```
<div><h:outputText value="#{my:nl2br(bean.text)}" escape="false" /></div> 
```

您只应绝对确保它[没有 XSS](https://stackoverflow.com/questions/3410526/how-to-implement-a-possibility-for-user-to-post-some-html-formatted-data-in-a-sa)。

# javascript - 在下拉列表中选择一个新值，同时记住 Jquery 中的旧值

> ID：13525688
> 
> 赞同：0
> 
> 时间：2012-11-23T08:56:21.890
> 
> 标签：javascript, jquery, drop-down-menu, jquery-events

我正在一个网上商店工作，客户可以通过下拉列表选择要购买的物品数量。每个项目都有一个点值，我通过 jQuery（`onChange`事件）计算他们的购买总额：

```
function showPoints(itemPointValue, ddlAmount){
    var customerPoints = parseInt($('p#points').html());
    currentPoints = customerPoints - (ddlAmount * itemPointValue);
    $('p#points').html(currentPoints);
}//showPoints 
```

这里唯一的问题是，如果他们将他们的数量从 5 更改为 4，那么另外 4 * 点值会从他们的“总点数”中扣除。他们的总分最终变得完全不准确，甚至可能低于 0。我想用它`jquery.data`来设置一个“oldValue”变量，但 IE 不支持这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:47:52.063

您可以如上所述将先前的值存储在自定义属性上，并且可以使用焦点事件来设置旧值，这行中的某些内容应该可以工作：

```
$('p#points').on('focus', function () {
    $(this).attr('old-value', $(this).val();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:05:10.463

为什么不在任何下拉列表更改时重新计算总积分成本，并通过从 customerPoints 中减去新的总积分来重新计算 currentPoints？对我来说，这似乎是一个比加减值更清洁的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:09:16.253

怎么样，在元素上创建自定义属性：

`$('p#points').attr('old-value',5);`

并像这样检索它：

`$('p#points').attr('old-value');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T12:14:53.657

我通过在下拉列表中使用两个事件解决了这个问题。onClick 使用 jquery.data 和 onChange 保存旧数据以检查旧值与新值。如果新值小于旧值，我会相应地调整总积分。

HTML：

```
<select name="dropdown onClick="saveOld(this.value, this.name)" onchange="showPoints(points, this.value,this.name)"> 
```

JS/jQuery

```
function showPoints(pointCategory, ddlAmount, name){
    old = jQuery.data(document.body,name);
    var Points = parseInt($('p#points').html());
    if(old > ddlAmount){
       diff =  old - ddlAmount;
       currentPoints = Points + (diff * pointCategory);
    }else{
       currentPoints = Points - (ddlAmount * pointCategory);
    }
    $('p#points').html(currentPoints);
}//showPoints

function saveOld(oldAmount, name){
    $(document.body).data(name,oldAmount);
}//saveOld 
```

谢谢大家的答案！

# jquery - 浏览器底部的返回顶部链接，然后在页脚顶部

> ID：13525694
> 
> 赞同：0
> 
> 时间：2012-11-23T08:56:51.723
> 
> 标签：jquery, footer, toplink

当到达浏览器窗口的底部时，即当用户完全向下滚动页面时，如何使返回顶部链接向上滑动到位置 X（页脚顶部）？

现在，我的页面有一个功能正常的返回顶部链接，该链接固定在窗口底部。但是，页面末尾有一个页脚，返回顶部链接需要保持（或快速返回）页面末尾的页脚顶部，而不是浏览器窗口的底部。

Toplink 的脚本是：

```
//plugin
jQuery.fn.topLink = function(settings) {
  settings = jQuery.extend({
    min: 1,
    fadeSpeed: 200
  }, settings);
  return this.each(function() {
    //listen for scroll
    var el = $(this);
    el.hide(); //in case the user forgot
    $(window).scroll(function() {
      if($(window).scrollTop() >= settings.min)
      {
        el.fadeIn(settings.fadeSpeed);
      }
      else
      {
        el.fadeOut(settings.fadeSpeed);
      }
    });
  });
};

//usage w/ smoothscroll
$(document).ready(function() {
  //set the link
  $('#top-link').topLink({
    min: 400,
    fadeSpeed: 500

  });
  //smoothscroll
  $('#top-link').click(function(e) {
    e.preventDefault();
    $.scrollTo(0,500);
  });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:55:11.937

您可以像这样检查用户是否向下滚动到底部页面：

```
$(window).scroll(function() {           
   if($(window).scrollTop() + $(window).height() == $(document).height()) {
      console.log("bottom reached");
   }            
}); 
```

如果到达底部，您可以根据需要设置链接的位置，或者将其设置为向上跳跃或类似的动画。

# c# - 如何在 C# 中的单独线程或后台工作程序中运行此时间计数器？

> ID：13525696
> 
> 赞同：1
> 
> 时间：2012-11-23T08:56:57.217
> 
> 标签：c#

```
 private void time_counter_Tick(object sender, EventArgs e)
    {
        secs += 1;
        if (secs == 60)
        {
            secs = 0;
            mins += 1;
            if (mins == 60)
            {
                mins = 0;
                hrs += 1;
            }
        }
        time_counter_lbl.Text = getCurrentTimeString();
    }

    private void startTheCounter()
    {
        secs = mins = hrs = 0;

        time_counter.Start();
        time_lbl.Visible = true;
        time_counter_lbl.Visible = true;
    }

    private void stopTheCounter()
    {
        time_counter.Stop();
    }

    private string getCurrentTimeString()
    {
        string sec, min, hr;
        sec = min = hr = "";
        if (secs < 10)
            sec = "0" + secs.ToString();
        else
            sec = secs.ToString();
        if (mins < 10)
            min = "0" + mins.ToString();
        else
            min = mins.ToString();
        if (hrs < 10)
            hr = "0" + hrs.ToString();
        else
            hr = hrs.ToString();

        return hr + ":" + min + ":" + sec;
    } 
```

在我的应用程序中，有 db 调用。同时我想显示经过的时间。但是时间标签没有更新。请帮助我，如何在单独的线程中解决此问题以解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:09:24.070

计时器应该能够更新您的标签，将所有标签更新代码放入 time_counter_Tick()

如果您想知道如何使用 BackgroundWorker，请参考我几年前发布的一个问题。

[WPF中的简单线程](https://stackoverflow.com/questions/2466161/easy-threading-in-wpf)

诀窍是您的 UI 逻辑必须在 UI 线程上执行。提供了一些方法，使这比其他方法更容易，但使用它们可能会很棘手。以下是我过去的做法：

首先，您必须声明一个可以提供给 Dispatcher.Invoke 方法的委托：

```
private delegate void UIDelegate(); 
```

然后你可以设置你的后台工作人员并调用它的 RunWorkerAsync 方法：

```
BackgroundWorker loadWorker = new BackgroundWorker();
loadWorker.DoWork += new DoWorkEventHandler(loadWorker_DoWork);
loadWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(loadWorker_RunWorkerCompleted);
loadWorker.RunWorkerAsync(); 
```

然后，要更新 UI 元素，您必须调用它们的调度程序：

```
private void changeStatusLabel(string status)
{
    progressLabel.Dispatcher.Invoke(new UIDelegate(delegate
    {
        progressLabel.Content = status;
    }));
} 
```

这些是从较大的方法中删除的，并且可能会进行一些优化。不过，这将为您提供一个起点。

# javascript - Cookie 法，Cookie 设置器和获取器

> ID：13525697
> 
> 赞同：0
> 
> 时间：2012-11-23T08:56:59.757
> 
> 标签：javascript, cookies

我目前正在为多个网站编写自定义 cookie 法律解决方案。我正在尝试使解决方案/插件尽可能多地成为“一体化解决方案”，并将代码作为脚本的第一位包含在内。目前我几乎已经完成了所有事情，而且看起来都非常漂亮，我想让用户能够“接受”或“拒绝”，而不仅仅是将他们重定向，但仍然允许他们使用该网站。

到目前为止，我已经为接受和拒绝正确设置了一个 cookie，它根据接受或拒绝的选择在 cookie 中设置真值或假值。

我想在 if 语句中使用我找到的代码重新定义 cookie setter 和 getter，以防止在用户未授予权限或尚未选择答案的情况下设置 cookie。

```
document.__defineGetter__("cookie", function() { return '';} );
document.__defineSetter__("cookie", function() {} ); 
```

到目前为止，我有这段代码来检查用户是否允许 cookie，

```
if(checkCookie != true){
    // Run code to redefine cookie setter getter to prevent cookies from being set
}else{
    // Don't do anything and the cookies should be run as usual.
}; 
```

有人可以启发我或为我指出正确的方向，如我所解释的那样使用 cookie setter 和 getter 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:17:31.617

正如亚历克斯·韦恩 (Alex Wayne) 在对您的问题的评论中所说的那样，在您看到`<html>`标签进入浏览器之前就设置了 cookie。

http 是这样的：

```
HTTP/1.1 200 OK
Server: Nginx
Content-Length: x (size of the following content)
Content-Type: text/html (this is what identifies it as html)
Set-Cookie: foo=bar; expires=Tue, 4-Dec-2012 19:30:42 GMT; Max-Age=2592000; Path=/; Version="1"

<!DOCTYPE html>
<html>
... 
```

你可以做，并且必须做的是设置一个“不要跟踪我”会话cookie，告诉服务器不要将任何cookie放到服务的请求中。

另一种方法是在地址栏中设置一个 get 变量，告诉服务器不要设置跟踪 cookie。

这就是饼干的真正用途。

# php - 如何从文件夹中取消链接图像？

> ID：13525703
> 
> 赞同：1
> 
> 时间：2012-11-23T08:57:24.953
> 
> 标签：php, ajax

我目前正在处理购物车。让我快速解释一下 product_info.php 页面中发生的事情。

在产品信息页面中显示产品信息，如名称、价格、图像等。

我在此页面中做了一些小功能。我在产品主图像下方放置了 10 个不同颜色的小图像，并使用 php Gd 在主图像上写了 2 个文本框。

我制作了 ajax 函数，该函数在图像小图像的 onclick 和两个文本框的 onkeyup 上调用，具有三个参数：选定的彩色图像的路径和文本框的值。现在当用户单击彩色图像之一或在其中写入文本时文本框然后此函数将调用并且响应将进入 img.php 文件中，其中使用 GD 创建动态图像并存储在具有随机图像整数名称和此图像的文件夹（而不是数据库中）中。从 img.php 它将进入产品信息页面并显示在主图像中。这个新图像的路径将存储在会话中，当用户完成结帐时，它将存储在表中。

当用户在文本框中选择不同的颜色或输入不同的值时，相同的过程将重复，并且每次新图像都会创建并保存在文件夹中。

我的问题是，当创建新图像时，我将如何从文件夹中取消链接以前的图像？提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:44:43.803

使用取消链接功能删除图像。

首先检查文件是否存在。

```
 unlink('\path\image_name1.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:02:26.757

您的问题很难阅读，但总体而言

```
unlink($imageName); 
```

将删除图像，如此[处](http://ca3.php.net/unlink)所述。

由于该文件已经发送给客户端，因此您可以`unlink`在需要更新图像时立即进行更新（`img.php`如果我理解正确？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:06:36.143

为用户保存 GD 图像时，您需要使用可以链接到用户、图像和颜色的*密钥。*当您*取消链接*图像时，您可以搜索该键、颜色和图像组合并将其删除。

例如，使用如下名称保存图像：`uid_imgId_colourId.ext`. 如果您想添加一个小的随机 id，这也可能会有所帮助，但请将其添加到文件名的末尾（在 .ext 之前）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-15T12:16:40.963

首先检查文件是否存在，然后在数据库中获取图像名称

unlink("图片路径/图片名");

# sql - SQL Server 一年中的第一个星期一

> ID：13525710
> 
> 赞同：8
> 
> 时间：2012-11-23T08:58:07.107
> 
> 标签：sql, sql-server, tsql

如何使用 T-SQL 找到“一年中的第一个星期一”？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-23T09:07:26.703

这是 ngruson 发布的链接中的示例（[http://sqlbump.blogspot.nl/2010/01/first-monday-of-year.html](http://sqlbump.blogspot.nl/2010/01/first-monday-of-year.html)）：

```
DECLARE @Date datetime
DECLARE @Year int = 2012

SET @Date = DATEADD(YEAR, @Year - 1900, 0)

SELECT DATEADD(DAY, (@@DATEFIRST - DATEPART(WEEKDAY, @Date) + 
    (8 - @@DATEFIRST) * 2) % 7, @Date) 
```

以上返回：

```
2012-01-02 00:00:00.000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:42:41.120

```
 Here, 
    1) DATEPART function for finding day of week. 
Here 1=sunday,2=monday,..,7=saturday.
    2) first find out is 2(monday) in case when
 condition then get same date,
    3) if is sunday(1) then add 1 day and get next
 day date is for monday,
    4) if is not 2(monday) and greater then 2 then find 
difference between lastday(7) and add 2 days ,
 so we reach to monday date.

    Here are you change year in @year variable. Ex:

        DECLARE @Date datetime
        DECLARE @Year int = 2012

        set @Date= convert(varchar(4),@Year) + '-01-01'
        select @Date,(case when DATEPART(DW,@Date)=2 then @Date
                     when DATEPART(DW,@Date)=1 then DATEADD(day,1,@Date)
                     else DATEADD(day,7-DATEPART(DW,@Date)+2,@Date)
                      end) as MondayDateis 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T09:14:34.470

优雅不是;）

```
 DECLARE @year DATETIME = '01 jan 2012'

    SELECT [Day] 
    FROM
        (
            SELECT @year [Day] UNION ALL
            SELECT DATEADD(DAY, 1, @year) UNION ALL
            SELECT DATEADD(DAY, 2, @year) UNION ALL
            SELECT DATEADD(DAY, 3, @year) UNION ALL
            SELECT DATEADD(DAY, 4, @year) UNION ALL
            SELECT DATEADD(DAY, 5, @year) UNION ALL
            SELECT DATEADD(DAY, 6, @year)
        ) x
    WHERE
        DATENAME(DW, [Day]) = 'Monday' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-23T09:06:40.803

这是实现这一目标的一个示例：

[http://sqlbump.blogspot.nl/2010/01/first-monday-of-year.html](http://sqlbump.blogspot.nl/2010/01/first-monday-of-year.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-23T09:21:13.067

试试这个：

```
declare @yr int=2020
select case when datepart(weekday,dateadd(year,@yr-1900,0))=1 then dateadd(year,@yr-1900,1)
       else dateadd(dd,8-(datepart(weekday,dateadd(year,@yr-1900,0))),dateadd(year,@yr-1900,1))
end 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!3/d41d8/6531)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-08-08T08:57:03.167

这种方法不使用像 1900 年这样的神奇年份或神奇日期。

```
DECLARE @first_year_day     DATE,
        @first_year_monday  DATE,
        @year               int = 2017

SET @first_year_day    = CAST('1/1/' + str(@year, 4) AS DATE)
SET @first_year_monday    = DATEADD(day, (9 - DATEPART(dw, @first_year_day)) % 7, @first_year_day)
SELECT @first_year_monday 
```

只有在 SQL Server 首选项中将星期配置为从星期日开始时，该代码才有效。这是大多数英语安装的默认设置（在这种情况下，SELECT @@DATEFIRST 将返回 7）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-24T19:13:57.700

我需要按周对一些数据进行分组并显示每周的第一天（在我的例子中是星期日）。我使用以下方法计算一年中的第一个星期日，然后您可以使用周数来获取给定日期发生的一周的开始。

```
DECLARE @firstSundayThisYear DATE,
    @jan1ThisYear DATE,
    @currentYear INT;

SELECT @jan1ThisYear = '01-jan-' + CAST(DATEPART(YEAR, GETDATE()) AS VARCHAR(4)),
    @currentYear = DATEPART(YEAR, GETDATE());

SET @firstSundayThisYear = DATEADD(DAY, -DATEPART(weekday, @jan1ThisYear) + 1, @jan1ThisYear);

PRINT @firstSundayThisYear 
```

注意：@firstSundayThisYear 实际上可能是去年的日期，但是当您乘以周数时，一切都会解决。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-17T10:20:29.853

我不确切知道为什么这里的答案很简单，真的很详细：

```
 // You can try any year
    DECLARE @YEAR INT = 2021
    // First you get the first day of the year
    DECLARE @FIRST_DAY_OF_YEAR DATE = CAST(@YEAR AS VARCHAR(4)) + '-01-01'
    // Then you get its weekday
    DECLARE @FIRST_DAY_OF_YEAR_WEEKDAY INT = DATEPART(WEEKDAY,@FIRST_DAY_OF_YEAR)
    // Then it's just a CASE matter, where you must see if the actual first day of the year is itself a monday or a sunday. If it's a monday we just return the first day, if it's a sunday we just add 1, if it's anything else beyond that we just have to substract the weekday from 9 (which is essentialy the second monday of the year). And we add the result to whichever day of the week is our first day of the year and we always get our first monday
    DECLARE @FIRST_MONDAY_OF_YEAR DATE =
    CASE
        WHEN @FIRST_DAY_OF_YEAR_WEEKDAY = 2 THEN @FIRST_DAY_OF_YEAR
        WHEN @FIRST_DAY_OF_YEAR_WEEKDAY = 1 THEN DATEADD(DAY, 1, @FIRST_DAY_OF_YEAR)
        ELSE DATEADD(DAY, 9 - @FIRST_DAY_OF_YEAR_WEEKDAY, @FIRST_DAY_OF_YEAR)
    END

    SELECT @FIRST_MONDAY_OF_YEAR 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2020-11-29T05:58:37.863

我知道这是一个 8 年前的问题，但我想我还是会把帽子扔进戒指

下面的第一个片段创建了一个测试表，以证明后面的代码不会遇到任何 RBAR 问题。解决方案实际上是在第二个片段的结果中填充“FirstMondayOfYear”列的相当短的公式。其他一切都只是为了添加到演示中。不需要单独的 SET、CASE 语句和对 DATEFIRST 的引用。

```
--===== Create a test table that contains random dates and times from 1900-01-01 up to and not
     -- including 2100-01-01.
   DROP TABLE IF EXISTS #MyHead
;
 SELECT TOP 100000
        SomeDateTime = RAND(CHECKSUM(NEWID()))*DATEDIFF(dd,'1900','2100')+CONVERT(DATETIME,'1900') --Inherently DATETIME
--        SomeDateTime = CONVERT(DATETIME2(7),RAND(CHECKSUM(NEWID()))*DATEDIFF(dd,'1900','2100')+CONVERT(DATETIME,'1900')) --DATETIME2()
--        SomeDateTime = CONVERT(DATE,ABS(CHECKSUM(NEWID())%DATEDIFF(dd,'1900','2100'))+CONVERT(DATETIME,'1900')) --DATE
   INTO #MyHead
   FROM      sys.all_columns ac1
  CROSS JOIN sys.all_columns ac2
;
--===== Return the first Monday for the year of each given date (and the original date) as well
     -- as a weekday name and day check for the date created by the formula.  The FirstMondayOfYear
     -- should (obviously) always be a Monday and it should always be a day of 7 or less.
   WITH cteFindMonday AS
(
 SELECT  SomeDateTime
        ,FirstMondayOfYear  = DATEADD(dd,(DATEDIFF(dd,'1753',DATENAME(yy,SomeDateTime))+6)/7*7,'1753')
   FROM #MyHead
)
 SELECT  SomeDateTime
        ,FirstMondayOfYear
        ,DoW     = DATENAME(dw,FirstMondayOfYear)
        ,IsValid =  IIF(    DATENAME(dw,FirstMondayOfYear) = 'Monday'
                        AND DATEPART(dd,FirstMondayOfYear) <= 7 
                    ,1,0)
   FROM cteFindMonday
  ORDER BY SomeDateTime
; 
```

# xml - 当存在具有别名命名空间的节点时如何使用 xml.modify 修改 XML 属性值

> ID：13525716
> 
> 赞同：-1
> 
> 时间：2012-11-23T08:58:15.370
> 
> 标签：xml

`xml.modify`当存在具有别名命名空间的节点时如何使用修改 XML 属性值

例如 XML 是：

```
<ar:archive xmlns:d="http://guidewire.com/cc/p04_00406_a09_01855_00558/domain" 
            xmlns:o="http://guidewire.com/cc/p04_00406_a09_01855_00558/other" 
            xmlns:ar="http://guidewire.com/archiving" 
            xmlns:i="http://guidewire.com/importing" 
            platform-major="4" platform-minor="406" 
            application-major="9" application-minor="1855" extension="558" 
            importing-schema-version="2.0" archving-schema-version="1.0" 
            root-ref="root" archive-date="2012-10-04T02:02:30.44-05:00">
   <d:Company id="d55" FaxPhone="1234567890" /> 
</ar:archive> 
```

我想修改 to 的`FaxPhone`值`1234`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T11:05:28.853

这`xml.modify`似乎表明您可能正在为此使用 SQL Server - 对吗？

如果是这样 - 使用此代码来实现您正在寻找的内容：

```
// define XML namespace aliases for the two relevant namespaces
;WITH XMLNAMESPACES('http://guidewire.com/cc/p04_00406_a09_01855_00558/domain' AS d, 
                    'http://guidewire.com/archiving' AS ar)
UPDATE 
    dbo.YourTableNameHere
SET 
    YourXmlColumn.modify('replace value of (ar:archive/d:Company/@FaxPhone)[1] with "1234"')
WHERE 
    (some condition here to find the right row in the table ...) 
```

# hibernate - 如何提高 H2 Select 查询性能？

> ID：13525718
> 
> 赞同：1
> 
> 时间：2012-11-23T08:58:20.893
> 
> 标签：hibernate, playframework, h2

我有一个用 Play Framework 1.2.5 编写的应用程序，我使用 H2 文件作为数据库。

该应用程序有一个“销售”表，每天大约有 1000 行。我有大约 5 年的数据（通常会有 2-3 年的数据可用）所以基本上我的测试机中有一个包含 150 万+数据的表格。

我的问题是，客户要求提供诸如“给我日期之间的总和 os 销售额以及 group bu 产品类型和销售类型”之类的数据。所以我必须做一些类似于2组和日期范围的选择查询。

随着表变大，选择查询性能急剧下降。我该怎么做才能获得更好的结果？

我创建了另一个表，其中汇总了每小时、每天和每月的销售额，但是我必须从销售额表中搜索一些功能。

第一个应用程序是用 c# (asp.net webservice) 和 ms-sql 服务器编写的，其中存储过程作为数据库，这些操作只需几秒钟。而且我有相同的数据，即使我没有使用任何汇总表来更快地进行查询。

我知道，专用服务器应用程序总是比嵌入式服务器快，但我认为必须有一种方法来提高此查询的性能。

我可以对 H2 引擎进行任何优化吗？

由于并发问题，我必须在 H2 服务器上启用“MVCC”，这可能是性能问题吗？

感谢您阅读并花费您的时间。

*** *编辑对于使用 Play Framework 1.2.x 的人：

我刚刚在要添加到索引的每一列上添加了 @Index(name="sales_columnname_index") 注释，现在 H2 引擎的工作速度甚至比我的旧 mssql+asp.net 应用程序还要快。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:00:44.707

您必须通过创建正确的索引来进行优化。

例如为此

> 客户要求提供诸如“给我日期之间的总和 os 销售额以及 group bu 产品类型和销售类型”之类的数据。所以我必须做一些像2组和日期范围的选择查询

您需要对列产品类型、销售类型和时间的索引（不一定是唯一的），如下所示：

```
create index sales_table_i2 on sales_table(product_type, sales_type, sales_time); 
```

例如，在您的 HQL 查询中，您必须以确保数据库使用该索引的方式提及索引列

```
select sum(amount) from SalesTable where salesTime >= :start and salesTime < :end group by productType, salesType 
```

或者

```
from SalesTable where productType = :prod and salesType = :sale and salesTime >= :start and salesTime < :end 
```

在第二个示例中，您必须总结 Java 代码中的挂载。

# javascript - 带有 jquery mobile 的微调器

> ID：13525720
> 
> 赞同：2
> 
> 时间：2012-11-23T08:58:27.193
> 
> 标签：javascript, jquery, jquery-mobile, spinner

我正在尝试使用 jQuery Mobile 为我的页面设置微调器加载。但是，当我使用 Ajax 加载某些内容时，微调器不会显示自己。这是我的代码。有什么想法有什么问题吗？

```
$("#invite").live('pageinit', function(e) {
  var render = function (items) {
    var view = '',
    index = 0;
    items.forEach(function(date){
      view +=
        '<div class="ui-block" style="background:white;">' +
        date.address
        '</div>';
      index++;
    });
    return view;
  };
  $.mobile.showPageLoadingMsg();
  $.ajax({                  
    url: 'someurl.com/file.json',
    dataType: "json",
    success: function(data) {
      $('#list').html(render(data.shared_dates));
      $.mobile.hidePageLoadingMsg();
    }
  })
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:05:20.927

如果您使用的是 jQuery Mobile 1.2，那么您应该使用以下内容：

```
$.mobile.loading( 'show' ) 
```

和

```
$.mobile.loading( 'hide' ) 
```

文档：http: [//jquerymobile.com/demos/1.2.0/docs/api/methods.html](http://jquerymobile.com/demos/1.2.0/docs/api/methods.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T23:03:30.833

我正在使用此代码来实现：

```
 $.ajax({url: server_url,
        data: save_data,
        dataType: "jsonp",
        jsonpCallback: 'successCallback',
        async: true,
        beforeSend: function() {
            $.mobile.showPageLoadingMsg(true);
        },
        complete: function() {
            $.mobile.hidePageLoadingMsg();
        },
        success: function (result) {
            // some code here
        },
        error: function (request,error) {
            // some code here
        }, 
       successCallback:function(){

        }
    }); 
```

这是 jsonp 的示例，但逻辑仍然相同。

# c# - C# 4.0 列表 使用 Where,Single,SingleorDefault 从多个线程访问

> ID：13525734
> 
> 赞同：0
> 
> 时间：2012-11-23T08:59:14.983
> 
> 标签：c#, multithreading, list

> **可能重复：**
> [IEnumerable Linq 方法是线程安全的吗？](https://stackoverflow.com/questions/11103779/are-ienumerable-linq-methods-thread-safe)

快速提问。当其他线程访问它（读取但也写入）时在列表上使用 Where,Single,SingleorDefault 会在枚举异常时导致集合更改吗？

为什么 c# 4.0 没有并发列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:03:11.530

`List<T>`*从多个线程读取*是安全的，但根本不支持*写入*。因此，只要不进行任何更改，您就可以对列表执行多个 LINQ 查询。您只能在需要写入的时候使用[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)来获取写入锁。

> 为什么 c# 4.0 没有并发列表？

我相信很难创建一个实现与`List<T>`在排序方面保持相同的保证，但也是线程安全*和*高效的。.NET 4 中的并发集合是高效的，但代价是一些保证（例如在 的情况下进行排序[`ConcurrentBag<T>`](http://msdn.microsoft.com/en-us/library/dd381779.aspx)）。

# google-maps - 更改信息窗口的位置

> ID：13525740
> 
> 赞同：4
> 
> 时间：2012-11-23T08:59:57.447
> 
> 标签：google-maps, google-maps-api-3, position, infowindow

我通常会看到信息窗口打开到标记的顶部。有什么办法可以将它打开到底部或侧面？我是说左边还是右边？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T09:12:11.780

我认为您需要`anchorPoint`在标记上指定属性：*“从标记位置到已以标记作为锚点打开的信息窗口尖端的偏移量。* ”

[https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:07:24.910

![截屏](../Images/78b1c71a331bc8e8859c73b4986458af.png) 信息窗口的打开方式，您可能指的是这个... google map window play with css position:absolute; 尝试更改顶部和左侧坐标的值，看看它是如何随着阴影移动的。

# android - Android 检测当前登录的用户

> ID：13525743
> 
> 赞同：-1
> 
> 时间：2012-11-23T09:00:17.663
> 
> 标签：android, android-4.2-jelly-bean, multi-user

支持多用户`JellyBean`，用户可以使用电源按钮在用户之间切换。

有没有办法以**编程****`logged in or active user`**方式检测当前设备上的情况。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T00:04:41.647

当前状态是使用应用程序“登录”。我知道这并不完全是您所要求的，但它可能会导致您提出问题可能会以不同的方式提出？如果有人同意您可以使用应用程序和不同的帐户“登录”，那么如果存在类似的东西，活动帐户将不再那么重要。

Google 推广 g+ auth 方法： [https ://developers.google.com/accounts/docs/MobileApps?hl=de](https://developers.google.com/accounts/docs/MobileApps?hl=de)

或者你提示一个选择器，它将列出那些可用的帐户：http: [//developer.android.com/reference/com/google/android/gms/common/AccountPicker.html](http://developer.android.com/reference/com/google/android/gms/common/AccountPicker.html)**

# java - 更新依赖于其他实体状态的@Entity 字段的正确方法

> ID：13525745
> 
> 赞同：3
> 
> 时间：2012-11-23T09:00:24.967
> 
> 标签：java, spring, hibernate, jpa, persistence

我们遇到了一个问题，我们必须维护一个日期字段 - 并且最好保留它的值 - 其中日期字段取决于其他实体的状态。用 JPA2 + Hibernate + Spring 解决这个问题的正确方法是什么？

基本上，我们有三个实体，我们称它们`Parent`为 、`Child`和`Conf`。`dependentDate`由依赖于其他实体状态的复杂业务规则计算得出。具体来说，应该`Parent#date`减去`Conf#delay`跳过周末或节假日的所有日子（持久数据）。

问题是每当`Parent#date`发生变化时，所有孩子的`dependentDate`s 都应该重新计算。每当`Child`对象`conf`更改时，这也应该发生。目前，有一种基于`Child`对象关系计算新日期的服务方法（我们称之为`calculateDate()`）。

我们面临着应该在哪里计算字段值的问题。我想出了三个可能的解决方案。其中哪一个 - 或者可能是其他东西 - 是更新依赖于其他实体状态的实体字段的首选方式？

1.  一个 JPA`EntityListener`
    *   这在 JPA2 规范中是不鼓励的，因为 EntityListeners 不应该访问其他实体
    *   该字段将始终正确
2.  更新的 Spring AOP 方面
    *   逻辑隐藏在其他类中，不容易看到
    *   切入点无法捕获所有持久/更新事件的风险
3.  每个开发者为自己
    *   总是，当更新父类或子类的实例时，开发人员必须记住调用服务的`calculateDate()`方法
    *   这应该在dao还是服务层？
    *   开发者忘记添加调用，导致错误状态的风险

以下示例显示了省略注释配置的实体关系。

**实体**

```
public class Parent {
     LocalDate date;
     Set<Child> children;     // one-to-many
}

public class Conf {
     int delay;
}

public class Child {
     LocalDate dependentDate;
     Conf conf;               // many-to-one
     Parent parent;           // many-to-one
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:15:46.453

依赖于多个实体状态的复杂业务规则属于服务层。应用程序中不应该有太多地方更改父母的日期和孩子的 conf，因此您不应该有太多地方必须进行新的日期计算。

如果你真的有很多地方可以这样做，你可以清楚地表明必须通过将 ChildDateUpdater 实例（ChildDateUpdater 是一个接口）传递给父日期的设置器和子 conf 的设置器来重新计算日期。这很明显，每次更改这两个字段时都必须做一些事情：

在父项中：

```
public void setDate(Date date, ChildDateUpdater childDateUpdater) {
    this.date = date;
    for (Child child : children) {
        childDateUpdater.updateChildDate(child);
    }
} 
```

在儿童中：

```
public void setConf(Conf conf, ChildDateUpdater childDateUpdater) {
    this.conf = conf;
    childDateUpdater.updateChildDate(this);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:14:02.673

将您的数据访问封装在 DAO 中。当`Parent`要保存 a 时，检查它的值是否有任何更改，如果是，则相应地更新子级。

的触发选项`realsim`也是可行的（基本上这是在不同级别实现的相同想法），但是您将失去可移植性（并且还会出现已加载的子项实例未更新的问题）。

# sms - 如何使用短信网关接收特定号码的短信

> ID：13525747
> 
> 赞同：1
> 
> 时间：2012-11-23T09:00:31.103
> 
> 标签：sms, sms-gateway

我想创建一项服务，使用户能够就我的产品向我提供反馈（例如……这可以是任何东西）。现在，一旦用户发送 SMS，我应该在我的 PC 中接收它（没有手机未连接到 PC，当我说某个号码时，它是某种免费电话号码类型）以进行进一步处理。

我知道这个问题有点含糊，但基本上我需要知道如果你喜欢这个特别的产品或者喜欢这个号码的人是如何发送短信到这个号码的。他们使用什么技术来接收用户的短信。如果他们使用 SMS GATEways，有人可以建议最好使用哪个网关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:15:06.283

如果您计划接收大量 SMS，那么您正在考虑通过 Internet 连接将 SMS 接收服务器连接到运营商网络中的 SMSC（短消息服务中心）。

这是提供此服务的商业产品：[http](http://www.ozeki.hu/index.php?owpn=507) ://www.ozeki.hu/index.php?owpn= 507 免责声明：我与这家公司无关，我只是发布链接，因为他们有一个简洁的图表说明了这个概念。

自己编写这个服务器并不难——你需要使用像 SMPP（Short Message Peer to Peer 协议）这样的协议来连接 SMSC，并存储 SMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T15:51:18.330

*免责声明，我在 Nexmo 兼职做开发人员宣传。*

您最好的解决方案可能是使用 SMS API。以下是一些提供者：

*   [Nexmo](http://nexmo.com)
*   [特维利奥](http://twilio.com)
*   [特罗波](http://tropo.com)

如果您计划获得国际支持，值得注意的是，据我所知，Nexmo 支持最多传入的虚拟号码（您可以购买允许您接收消息的号码的国家/地区）。

此外，由于您将收到消息，因此 Nexmo 的定价模式对您来说会更好。Twilio/Tropo 对虚拟号码和接收短信的每条消息都收费，Nexmo 只对虚拟号码收费。

所有三个 API 都是直接的 REST/HTTP API - 所以你只需要一个服务器来接收传入的消息，并将其路由到你的 PC。如果您使用 Nexmo，这里有一项服务将连接到您的帐户，并为您处理所有这些（包括 google chrome 插件）：[InDash：传入短信仪表板](http://indash.meltedcube.com)

# javascript - 谷歌地图是灰色的

> ID：13525749
> 
> 赞同：13
> 
> 时间：2012-11-23T09:00:52.213
> 
> 标签：javascript, html, google-maps-api-3

我在使用 html 和 javascript 的移动应用程序中使用谷歌地图。当我加载地图时，我只能在左上角看到 5% 的地图。95% 的 div 容器是灰色的。当我想用 Firebug 检查 div 时，整个地图会突然加载。那会是什么？我已经尝试了几个 Stackoverflow 线程，但没有适合我的解决方案。谢谢你。

代码：

```
<link type="text/css" rel="stylesheet" href="jquery.mobile...>
<link type="text/css" rel="stylesheet" href="index.css">
<script type="text/javascript" src="jquery.mobile...></script>
<script type="text/javascript" src="jquery.mobile/jquery.mobile...></script>
<script type="text/javascript" charset="utf-8" src="cordova-2.1.0.js">       </script>
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8" src="index.js"></script>

<div id="map" style="width: 700px; height: 700px;"></div>

var map = new google.maps.Map(document.getElementById('map'), {
       zoom: 10,
       center: new google.maps.LatLng(-33.92, 151.25),
       mapTypeId: google.maps.MapTypeId.ROADMAP                                
}); 
```

**index.js**

```
$(document).ready(function() {
    $(window).resize(function() {
        google.maps.event.trigger(map, 'resize');
    });
}); 
```

当我使用以 % 或 em 衡量的 div 属性时，它根本不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-06-24T14:45:28.390

检查您的 mapOptions 其中心或其他属性是否正确。在我的场合，谷歌地图无法解释中心属性；尽管该页面在 css 和 jsp 方面完全没有错误，但它一直向我显示灰色地图。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-11-23T09:18:05.030

尝试在文档就绪时调用 resize 方法：

```
$(document).ready(function() {
    $(window).resize(function() {
        google.maps.event.trigger(map, 'resize');
    });
    google.maps.event.trigger(map, 'resize');
}); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-12-17T10:45:05.780

在我的情况下，我的地图没有加载，因为我没有设置`zoom`选项。

```
var map = new google.maps.Map(document.getElementById('map'), {
       zoom: 10, // Forgot to set this prop
       center: new google.maps.LatLng(-33.92, 151.25)                               
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-05T18:14:32.153

就我而言，只需致电即可`map.refresh()`解决此问题。我正在使用 Gmaps。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-10T17:07:38.617

这发生在我身上，因为 mapTypeId 为 NULL。

尝试：

```
map.setMapTypeId("roadmap"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-17T00:50:35.403

就我而言，我错过了提供来自外部 API 的经度。一旦 API 被修复为包含经度，问题就解决了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-21T05:04:40.360

[我有一个使用angular 5](https://stackoverflow.com/questions/48890815/google-maps-grey-box-on-ngif)的类似问题
我只能通过使用`setTimeout` **AND** a来刷新/重新创建地图`setZoom`（即使级别相同）

```
// set timeout.
setTimeout(() => {
    console.log("attempting refresh");
    google.maps.event.trigger(this.map, "resize");
    this.map.setZoom(8);
},
100); 
```

**[在这里工作](https://plnkr.co/edit/CZTnGw?p=preview)**

刷新的迷人之处在于它会在第二次显示时移动地图。谷歌地图显然不是没有[错误的](https://developers.google.com/maps/documentation/javascript/support)。

# web-services - 如何使用 ServiceStack 构建 RESTful Web 服务？ServiceStack 示例不起作用

> ID：13525751
> 
> 赞同：1
> 
> 时间：2012-11-23T09:00:53.680
> 
> 标签：web-services, servicestack

servicestack 提供的示例不起作用。我是 servicestack 的新手。我想用 service stack 构建 RESTful Web 服务。请指引我正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T18:36:55.270

不确定您遇到的问题是什么，但[ServiceStack.Examples 项目](https://github.com/ServiceStack/ServiceStack.Examples/)确实有效。它们都是在 VS.NET 中开发的，并[部署在 servicestack.net](http://www.servicestack.net) Linux Server 上。

[Razor Rockstars](https://github.com/ServiceStack/RazorRockstars)示例项目部署在razor.servicestack.net[上](http://razor.servicestack.net/)。

[Social Bootstrap API (MVC + Bootstrap + Backbone) 项目部署在位于](https://github.com/ServiceStack/SocialBootstrapApi)[bootstrapapi.apphb.com](http://bootstrapapi.apphb.com/)的AppHarbor 上的 Windows 服务器上。

# android - 在 Android 中添加进度条微调器作为 imageview 的占位符

> ID：13525754
> 
> 赞同：1
> 
> 时间：2012-11-23T09:01:06.487
> 
> 标签：android, spinner, progress, android-spinner, android-progressbar

我想在图像视图中放置一个微调器进度条，直到图像从互联网加载。它适用于静态图像。

有一种方法可以将进度条保持在与 imageview 的相对布局中。在我的情况下，我该如何实施？

这是我的适配器：

```
public View getView(int position, View view, ViewGroup parent) {        
    view = new ImageView(parent.getContext());  
    view.setLayoutParams(new GridView.LayoutParams(260, 220));      
    imageLoader.DisplayImage(result.get(position).get("LogoUrl"), (ImageView) view);
    return view;
} 
```

设置图像的方法：

```
public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);
    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);                    
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:43:44.210

为此，您应该请求窗口功能以获取进度

```
requestFeature(FEATURE_INDETERMINATE_PROGRESS); 
```

使用后

setProgressBarIndeterminateVisibility(true|false)

```
to show/hide the progress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:19:52.280

我想你想在你的代码中使用 AsyncTask 。

```
http://developer.android.com/reference/android/os/AsyncTask.html 
```

# sql-server-2008 - SQL Server 2008：与 FOREIGN KEY SAME TABLE 约束冲突

> ID：13525763
> 
> 赞同：2
> 
> 时间：2012-11-23T09:01:33.517
> 
> 标签：sql-server-2008, merge, conflict

几个星期以来，我一直在寻找解决方案，我只是想问一下。我必须合并两个表，但我不能依赖 id(pk)，因为它会自动递增并且绝对不会相同。在这里，如果我的 SP：

```
BEGIN
            MERGE dbo.Publication AS Target
            USING (SELECT id, parent_publication_id, name, date_created, last_updated
                    FROM dbo.ImportPublication
                    where id = @publicationid
                    )
            AS Source
            ON (Target.name = Source.name and Target.parent_publication_id = Source.    parent_publication_id)
            WHEN MATCHED THEN
            UPDATE SET 
                Target.name = Source.name, Target.parent_publication_id = Source.parent_publication_id, Target.date_created = Source.date_created, Target.last_updated = Source.last_updated
            WHEN NOT MATCHED BY TARGET THEN
            INSERT (name, parent_publication_id, date_created, last_updated )
            VALUES ( Source.name, Source.parent_publication_id, Source.date_created, Source.last_updated);
            DECLARE @pubId INT =  SCOPE_IDENTITY()
            if(@pubId != null or @pubId !='')
            begin
                UPDATE dbo.ImportFixedSize
                SET publication_id = @pubId
                where publication_id = @publicationId
            end
            else
                begin
                    set @pubId = ( select Id from Publication where name = ( select name from ImportPublication where id = @publicationid))
                    UPDATE dbo.ImportFixedSize
                    SET publication_id = @pubId
                    where publication_id = @publicationId
                end 
```

我在标题中收到错误。可能是什么原因？我知道事实上没有两行具有相同的名称和publication_group_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T16:46:15.783

以下是我可以看到的*可能*导致这种情况的潜在代码异味 - 如果没有看到确切的故障点，就不可能知道。

1、

```
UPDATE SET 
            Target.name = Source.name, Target.parent_publication_id = Source.parent_publication_id 
```

你为什么做这个？如果它已经匹配，那么我们不会尝试更改它匹配的内容。

2、

```
if(@pubId != null or @pubId !='') 
```

比较空值时，您必须使用@value IS NULL 或@value IS NOT NULL。这是证明：

```
 declare @test int = 1
if (@test != null)
    select 1
if (@test is null)
    select 2
if (@test is not null)
    select 3 
```

# jquery - 根据输入和查找表查找值

> ID：13525764
> 
> 赞同：0
> 
> 时间：2012-11-23T09:01:34.673
> 
> 标签：jquery, html-table, lookup-tables

我有一个 jQuery 问题，我可以使用一些帮助。我正在尝试根据表中的值确定一个值。

这是场景：

1.  选择了一个类别。这决定了要使用的列。这是代码：

    ```
    var column;

    if( $('input:radio[name=arc2-1]:checked').val() == 0 && $('input:radio[name=arc2-2]:checked').val() == 0) {
    column = 2;
    }else if( $('input:radio[name=arc2-1]:checked').val() == 0 && $('input:radio[name=arc2-2]:checked').val() == 1) {
    column = 3;
    }else if( $('input:radio[name=arc2-1]:checked').val() == 1 && $('input:radio[name=arc2-2]:checked').val() == 0) {
    column = 4;
    }else if( $('input:radio[name=arc2-1]:checked').val() == 1 && $('input:radio[name=arc2-2]:checked').val() == 1) {
    column = 5;
    }else if( $('input:radio[name=arc2-1]:checked').val() == 2 && $('input:radio[name=arc2-2]:checked').val() == 1) {
    column = 6;
    }else if( $('input:radio[name=arc2-1]:checked').val() == 3 && $('input:radio[name=arc2-2]:checked').val() == 1) {
    column = 7;
    } 
    ```

2.  HTML 中有一个隐藏的表格，如下所示：

    ```
    <table id="ms25">
        <tr>
            <td>65</td>
            <td>5.4</td>
            <td>5.4</td>
            <td>3.1</td>
            <td>3.1</td>
            <td>3.0</td>
            <td>-</td>
        </tr>
        <tr>
            <td>55</td>
            <td>4.6</td>
            <td>4.6</td>
            <td>2.7</td>
            <td>2.7</td>
            <td>2.5</td>
            <td>-</td>
        </tr>
        <tr>
            <td>45</td>
            <td>3.8</td>
            <td>3.8</td>
            <td>2.2</td>
            <td>2.2</td>
            <td>2.0</td>
            <td>-</td>
        </tr>
        <tr>
            <td>35</td>
            <td>2.9</td>
            <td>2.9</td>
            <td>1.7</td>
            <td>1.7</td>
            <td>1.5</td>
            <td>8.1</td>
        </tr>
    </table> 
    ```

表中的值不会改变。并且总会有 7 列和 11 行（我缩短了示例）。

3.  这是棘手的部分。在输入字段中输入了一个数字（65 或更少）。然后：

4.  输入编号将根据表的第一个列进行检查。输入数字“四舍五入”到列中它上面的下一个最接近的数字。

5.  要查找的数字是第 1 步和第 4 步中的数字。

**例如**，如果列是 4 并且输入的数字是 31，您将转到第一列并找到下一个“向上取整”的最接近的数字 (35)，然后转到第 4 列......然后数字找到是**1.7**。

我找到了与解决方案相关的点点滴滴（例如：[jQuery find same td in prev. and next row](https://stackoverflow.com/questions/9726111/jquery-find-same-td-in-prev-and-next-row)），但我不确定如何将它们放在一起。

任何有关解决方案或在哪里寻找解决方案的帮助/指导将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:24:35.190

你可以这样做：

```
function get_table_value(column, value) {
   table = $('#ms25');
   smallestdiff = Number.MAX_VALUE;
   savedindex = 0;
   table.find('td:first-child').each(function(i) {
      diff = parseInt($(this).text(),10) - parseInt(value, 10);
      if (diff > 0 && diff < smallestdiff) {
          smallestdiff = diff;
          savedindex = i;
      }
   });
   tr = table.find('tr:eq('+savedindex+')');
   alert ( tr.find('td:first-child').text() );  //alerts 35
   alert ( tr.find('td:nth-child('+column+')').text() ); //alerts 1.7
} 
```

查看工作[**演示**](https://tinker.io/c4aff)

# c# - 将对象绑定到 wpf TreeView

> ID：13525766
> 
> 赞同：0
> 
> 时间：2012-11-23T09:01:46.557
> 
> 标签：c#, wpf, binding, treeview

我有以下课程..

```
public class Package
{
  public String name { get; set; }
  public List<Class> classList { get; set; }
}

public class Class
{
  public String name { get; set; }
  public List<Method> methodsList { get; set; }
}

public class Method
{
  public String name { get; set; }
} 
```

我正在从 xml 文件中读取这些值。我想在树视图中显示值。我怎样才能在 wpf TreeView 中完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-10-06T17:38:33.347

我向您展示了我在 MVVM 项目中对 2 个类所做的事情。警告：要了解您需要了解 MVVM（模型视图视图模型）范例的示例。

这些是模型：

```
public class Region
{
    public string RegionName { get; set; }
    public ObservableCollection<Cities> ListCities { get; set; }

    public Region()
    {
        this.ListCities = new ObservableCollection<Cities>();
    }
}
public class Cities
{
    public string CityCode { get; set; }
    public string CityName { get; set; }
} 
```

然后是 ViewModel 中可观察集合的声明：

```
private ObservableCollection<GruppoAperture> _regionGroup;
   public ObservableCollection<GruppoAperture> RegionGroup
   {
      get { return _regionGroup; }
      set
      {
          if (_regionGroup == value)
          return;
          _regionGroup= value;
          RaisePropertyChanged(nameof(RegionGroup));
       }
    } 
```

然后是填充树视图的函数，您可以在需要时触发它：

```
private void PopulateTreeView ()
    {
        DataTable regions = //Here you create a datatable of regions

        DataTable cities = // Here you create a datatable of cities

        if (regions != null && cities != null)
        {
            if (regions.Rows.Count > 0)
            {
                foreach (DataRow r in region.Rows)
                {
                    Regions reg = new Regions();
                    reg.RegionName = r["regionName"].ToString();

                    foreach(DataRow r2 in cities.Rows) //assegno aperture
                    {
                        if (r2["regionName"].ToString() == reg.RegionName)
                        {
                            reg.ListCities.Add(new Cities()
                            {
                                CityCode = r2["cityCode"].ToString(),
                                CityName = r2["cityName"].ToString()
                            });
                        }
                    }
                    RegionGroup.Add(reg);
                }
            }
        }
    } 
```

然后是 XAML 部分：

```
<Window x:Class="MyProject.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyProject"
        xmlns:local1="clr-namespace:MyProject.ViewModels"
        xmlns:local2="clr-namespace:MyProject.Models"
        mc:Ignorable="d"
        Title="CueModifier" Height="703.448" Width="829.25">
    <Window.DataContext>
        <local1:RegionViewModel></local1:RegionViewModel>
    </Window.DataContext>

<Grid x:Name="regiongrid" Height="538" Margin="10,124,10,0" VerticalAlignment="Top" >
            <TreeView x:Name="treeViewRegions" ItemsSource="{Binding RegionGroup}">
                <TreeView.ItemTemplate>
                    <HierarchicalDataTemplate ItemsSource="{Binding ListCities}">
                        <Label Content="{Binding RegionName}"/>
                        <HierarchicalDataTemplate.ItemTemplate>
                            <DataTemplate DataType="{x:Type local2:Cities}">
                                <Label Content="{Binding CityName}"/>
                            </DataTemplate>
                        </HierarchicalDataTemplate.ItemTemplate>
                    </HierarchicalDataTemplate>
                </TreeView.ItemTemplate>
            </TreeView>
        </Grid> 
```

# python - 在完成函数 B 后有条件地调用函数 A

> ID：13525771
> 
> 赞同：1
> 
> 时间：2012-11-23T09:02:10.893
> 
> 标签：python, repeat, function

到目前为止，我有两个类似的函数 function`def A()`和 function `def B()`，它可以工作，但我想这样做，以便用户在 function 中完成写入数据后`B()`，......他可以选择退出或开始在函数中写入数据再次处理`A()`

因此，理论上，用户可以在他（例如）点击`ENTER`退出程序之前重复该过程一百万次。

我将如何实现这一目标？

```
def A(parameters):
    content...
    ...
    ...

def B(parameters):
    content...
    ...
    ...

Press R to repeat with def A (parameters), press Q to quit: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:17:48.593

合并`A()`with的功能`B()`并传递一个标志可能会更好，但是这里有一个解决方案，允许在用户点击之前`A()`调用：`B()``RETURN`

```
def A():
    print 'Processing in A!'

def B():

    choice = ''
    print 'Processing in B!'

    while choice.lower().strip() != 'r':    
        choice = raw_input("Press R to repeat, RETURN to exit: ").lower().strip()            
        if choice == '':
            return False
        if choice  == 'r':
            return True

while B():
    A() 
```

输出：

```
Processing in B!
Press R to repeat, RETURN to exit: R
Processing in A!
Processing in B!
Press R to repeat, RETURN to exit: r
Processing in A!
Processing in B!
Press R to repeat, RETURN to exit: notR
Press R to repeat, RETURN to exit: 
```

一些注意事项：

`lower()`返回用户键入的任何内容，因为所有小写字符都允许`r`并被`R`视为相同。

`strip()`从输入中删除任何前导或尾随空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:28:26.367

怎么样：

```
i = "r"
while i != "q":
    A()
    B()
    i = raw_input("Press Q to quit, press any other key to repeat with def A (parameters):").lower().strip() 
```

# ruby-on-rails - 推送到 github 不再工作

> ID：13525772
> 
> 赞同：1
> 
> 时间：2012-11-23T09:02:12.093
> 
> 标签：ruby-on-rails, git, github

我怎样才能开始一个`repo`和`push`它到我的`Github`？

我之前让它工作得很好，但是在我尝试迁移到一个数据库之后我把它杀死了。我删除了所有远程存储库并清除了本地存储库。

我只是想再次开始推送我的回购。这是我在 github 上创建一个新的 repo 并按照 mac 上的终端的复制和粘贴说明后得到的，直到现在都可以正常工作。

```
error: src refspec master does not match any.
error: failed to push some refs to 'https://github.com/Hendrixer/Learning.git' 
```

我已经尝试了相同问题的所有答案，但没有运气。一般来说，我是开发新手，所以我不知道自己在做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:15:23.897

你承诺了吗？此错误消息有时表明没有要推送的内容。看到[这个问题](https://stackoverflow.com/questions/4181861/src-refspec-master-does-not-match-any-when-pushing-commits-in-git)。

# c++ - clang 和 __float128 错误/错误

> ID：13525774
> 
> 赞同：15
> 
> 时间：2012-11-23T09:02:18.673
> 
> 标签：c++, llvm, clang

我已经成功编译了当前 3.3 的 clang 分支。但是随后任何文件的 C++ 编译都会因错误/错误而失败。可以修复吗？

```
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/iostream:39:
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/ostream:39:
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/ios:40:
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/char_traits.h:40:
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_algobase.h:65:
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/stl_pair.h:61:
In file included from /usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/bits/move.h:57:
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/type_traits:256:39: error: use of
      undeclared identifier '__float128'
    struct __is_floating_point_helper<__float128>
                                      ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-09T21:53:36.093

您可以使用以下方法修复它：

```
CXXFLAGS+="-D__STRICT_ANSI__" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T09:17:50.977

我觉得不`clang`支持`__float128`。它*可能*`long double`与（其中 16 个字节）的类型相同，`clang`因此它可能是插入的简单情况：

```
#define __float128 long double 
```

或者：

```
typedef long double __float128; 
```

在您的包含链中的某个位置。

我不保证它会起作用，但它可能会起作用，而且最好尝试一下，而不是等到`clang`开始支持更多`gcc`扩展。

要么，要么切换到`gcc`，如果这是一个选项。我很确定它`gcc`支持*所有*的`gcc`扩展:-)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-12T00:43:46.707

有关可能的解决方法，请参阅[http://llvm.org/bugs/show_bug.cgi?id=13530#c3](http://llvm.org/bugs/show_bug.cgi?id=13530#c3)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-23T09:34:05.233

解决方案是拥有此声明。它就像一个魅力：

```
#ifdef __clang__
typedef struct { long double x, y; } __float128;
#endif 
```

由于模板规范重新声明错误，解决方案`#define`不起作用。

当然，这是一个黑客，你必须是安全的。我想clang只是为了做一些实验，所以它不会造成任何麻烦。

# java - 如何判断其中一个堆代是否已满？

> ID：13525777
> 
> 赞同：0
> 
> 时间：2012-11-23T09:02:42.147
> 
> 标签：java, memory, garbage-collection, jvm, heap-memory

我们在生产环境中遇到了一些问题，一段时间后，我们从一个已编译的 jsps（有时会有所不同）收到 InvalidPropertyException。我怀疑这是由堆中“消失”的东西引起的。此外，我怀疑这是由于堆的某一代变得满了，所以一些对象“溢出”到最终被 GC 处理的不同代。

我想知道的是：是否可以自动监控堆，并在其中一代已满并且有可能发生这种溢出时发出警报？这可以通过编程方式或通过某些配置进行。我们尝试使用 JConsole，但仅在错误开始发生之后，然后一切看起来都正常，但我真正想知道它在确切时间的样子错误发生（或实际上是几分钟前），无需手动监控。

我已经针对这个问题发布了一个更一般的问题，其中包含更多详细信息：[Spring、NotReadablePropertyException 和 Glassfish 版本](https://stackoverflow.com/questions/12194503/spring-notreadablepropertyexception-and-glassfish-version)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T10:27:36.040

我不会说您的问题不可能与堆相关，但如果是这样，则表明内存子系统和 JVM 中的垃圾收集器中存在严重且非常重大的错误。虽然当然不是不可能，但它的可能性极小，因为它肯定会被其他多个人发现，而且我还没有听到其他人报告过类似的事情。

基本上，对象永远不会被 GC:ed，而仍然至少有一个对该对象的实时引用。在堆中的世代之间移动与它无关，这只是 GC 为优化内存处理所做的后台工作。事实上，并不是所有的 JVM:s 都有代。

如果您有“消失”的对象，要么是因为您正在使用，要么是`WeakReference`因为`SoftReference`您只是在代码中取消引用该对象，使其符合回收条件。

如果您发布有关实际异常（堆栈跟踪等）和相关代码的更多详细信息，也许这里有人可以帮助您找到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:24:28.383

撇开评论不谈，如果您真的想查看不同代的情况，请打开 Verbose GC 日志记录。只需将`-verbose:gc`and添加`-XX:+PrintGCDetails`到您的 java 命令中。这将导致 GC 日志包含以下行：

```
94.198: [Full GC (System) 94.198: [Tenured: 788K->759K(4096K), 0.0428238 secs] 883K->759K(5056K), [Perm : 2095K->2095K(12288K)], 0.0429641 secs] 
```

这告诉您垃圾收集前后每一代使用了多少空间。

[这篇文章](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)也有很多关于这个主题的信息，就像我从中获取上述日志示例的[博客一样。](http://robertmaldon.blogspot.co.nz/2007/09/more-human-friendly-java-gc-timestamps.html)

# django - Zinnia 安装后不运行

> ID：13525778
> 
> 赞同：6
> 
> 时间：2012-11-23T09:02:53.120
> 
> 标签：django, zinnia

我是 Django 新手，上周刚完成 Django 教程。我今天在我的virtualenv中安装zinnia，我确定我已经安装了所有依赖项，例如PIL，tag，mptt等。 pip install django（版本是1.4.2） pip install zinnia 然后，这是我的详细信息脚步：

> 1.  django-admin.py 启动项目 yuetu
> 2.  修改 yuetu/yuetu 目录下的 setting.py 如下：

```
 TEMPLATE_CONTEXT_PROCESSORS = (
  'django.contrib.auth.context_processors.auth',
  'django.core.context_processors.i18n',
  'django.core.context_processors.request',
  'django.core.context_processors.media',
  'django.core.context_processors.static',
  'zinnia.context_processors.version',
) # Optional

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    #'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'django.contrib.comments',
    'tagging',
    'mptt',
    'zinnia',
) 
```

> 3.修改urls.py如：
> url(r'^weblog/', include('zinnia.urls')), url(r'^comments/', include('django.contrib.comments.urls')) ,
> 
> 4.运行 python manage.py validate 没有错误。5.运行 python manage.py syncdb 没有错误。所有的表都在我的 Mysql 数据库中；6.run python manage.py runserver 没有错误

但是当我使用 127.0.0.1:8000/weblog 浏览页面时，我遇到了一个异常，例如：

```
NoReverseMatch at /weblog/

u'admin' is not a registered namespace

Request Method:     GET
Request URL:    http://127.0.0.1:8000/weblog/
Django Version:     1.4.2
Exception Type:     NoReverseMatch
Exception Value:    

u'admin' is not a registered namespace

Exception Location:     /root/Envs/yuetu_zinnia/lib/python2.7/site-packages/django/template/defaulttags.py in render, line 424
Python Executable:  /root/Envs/yuetu_zinnia/bin/python
Python Version:     2.7.3
Python Path:    

['/root/Envs/yuetu_zinnia/yuetu',
 '/root/Envs/yuetu_zinnia/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/root/Envs/yuetu_zinnia/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/root/Envs/yuetu_zinnia/lib/python2.7/site-packages/distribute-0.6.28-py2.7.egg',
 '/root/Envs/yuetu_zinnia/lib/python2.7/site-packages/MySQL_python-1.2.4c1-py2.7-linux-x86_64.egg',
 '/usr/local/pythonbrew/lib',
 '/root/Envs/yuetu_zinnia/lib/python27.zip',
 '/root/Envs/yuetu_zinnia/lib/python2.7',
 '/root/Envs/yuetu_zinnia/lib/python2.7/plat-linux2',
 '/root/Envs/yuetu_zinnia/lib/python2.7/lib-tk',
 '/root/Envs/yuetu_zinnia/lib/python2.7/lib-old',
 '/root/Envs/yuetu_zinnia/lib/python2.7/lib-dynload',
 '/usr/local/lib/python2.7',
 '/usr/local/lib/python2.7/plat-linux2',
 '/usr/local/lib/python2.7/lib-tk',
 '/root/Envs/yuetu_zinnia/lib/python2.7/site-packages',
 '/root/Envs/yuetu_zinnia/lib/python2.7/site-packages/PIL']

Error during template rendering

In template /root/Envs/yuetu_zinnia/lib/python2.7/site-packages/zinnia/templates/zinnia/entry_list.html, error at line 50
u'admin' is not a registered namespace
40  {% endif %}
41  {% endblock %}
42  
43  {% block content-loop %}
44  {% for object in object_list %}
45  {% with object_content=object.html_content|truncatewords_html:100|safe continue_reading=1 %}
46  {% include "zinnia/_entry_detail.html" %}
47  {% endwith %}
48  {% empty %}
49  <p class="notice">
50  <a href="{% url 'admin:zinnia_entry_add' %}">{% trans "No entries yet." %}</a>
51  </p>
52  {% endfor %}
53  {% endblock %}
54  
55  {% block content-pagination %}
56  {% if is_paginated %}
57  {% zinnia_pagination page_obj %}
58  {% endif %}
59  {% endblock %}
60 
```

有人告诉我我怎么了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-27T20:01:50.183

确保您的项目 urls.py 启用了管理系统：

```
# urls.py
from django.conf.urls import patterns, include, url

# MAKE SURE THESE TWO LINES ARE UNCOMMENTED!
from django.contrib import admin
admin.autodiscover()

urlpatters = patterns('',
    # MAKE SURE THIS NEXT LINE IS UNCOMMENTED!
    url(r'^admin/', include(admin.site.urls)),
    url(r'^weblog/', include('zinnia.urls')),
    url(r'^comments/', include('django.contrib.comments.urls')),
) 
```

# api - 使用图形 api 设置页面选项卡图像？

> ID：13525787
> 
> 赞同：0
> 
> 时间：2012-11-23T09:03:38.263
> 
> 标签：api, graph, facebook-apps

我找不到任何字段名称来通过图形 api 为应用程序设置“页面选项卡图像”（如在基本应用程序设置中）？

我知道您可以使用 api 为每个页面为应用程序设置自定义图像，但是是否可以使用 api 为应用程序设置标准页面选项卡图像？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T09:43:20.940

请参阅[https://developers.facebook.com/docs/reference/api/page/#tabs](https://developers.facebook.com/docs/reference/api/page/#tabs)：

> 您可以通过使用页面访问令牌和以下参数向 /PAGE_ID/tabs/TAB_ID 发出 HTTP POST 请求来更新页面的已安装 profile_tab：

使用参数`custom_image_url`或`custom_image`更新页面选项卡的自定义图标。

# regex - OData $filter 条件中的正则表达式？

> ID：13525788
> 
> 赞同：2
> 
> 时间：2012-11-23T09:03:47.310
> 
> 标签：regex, odata

我正在考虑为`OData`我的数据库提供一个接口。我需要在字符串字段上允许正则表达式，即在`OData $filter`条件中。

OData 提供`substringof()`、`startswith()`和其他功能，但我在文档中找不到任何关于正则表达式的信息。这可能吗？

这样的正则表达式函数可能看起来像：

```
/Customers?$filter=match(CompanyName, '^Al[a-z]+s Futterkiste') eq true 
```

`match()`我刚刚编写的函数在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:44:59.743

该协议没有任何用于过滤的内置正则表达式运算符。但是，您可以实现您正在寻找的（或类似的东西），如下所示：

```
GET http://server/Customers?$filter=match(CompanyName=$it/CompanyName, Regex='^Al[a-z]+s Futterkiste') eq true 
```

在这种情况下，您必须有一个函数“match”，它需要两个参数：CompanyName 和 Regex。该函数根据公司名称是否匹配返回真/假。然后，对于每个公司，调用匹配函数。

当然，实现取决于您使用的服务器端技术。

你可以在这里阅读更多：[http ://www.odata.org/media/30002/OData.html#inlineparametersyntax](http://www.odata.org/media/30002/OData.html#inlineparametersyntax)

祝你好运。

# r - 使用 data.table 在“分组依据”操作中设置列名

> ID：13525793
> 
> 赞同：20
> 
> 时间：2012-11-23T09:04:19.153
> 
> 标签：r, data.table

我是 R 中[data.table](http://cran.r-project.org/web/packages/data.table/index.html)包的新用户。我正在尝试为“group by”命令创建的新列命名

```
> DT = data.table(x=rep(c("a","b"),c(2,3)),y=1:5) 
> DT
x y
1: a 1
2: a 2
3: b 3
4: b 4
5: b 5
> DT[,{z=sum(y);z+3},by=x]
x V1
1: a 6
2: b 15 
```

1.  我想直接命名 V1（默认）列（不必使用 colnames），可以吗？
2.  此外，是否可以在一个命令中执行多个分组操作，这将导致类似：

    ```
     x V1 V2
    1: a 6  something
    2: b 15 something 
    ```

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-23T09:22:25.860

```
DT[,list(z=sum(y)+3,a=mean(y*z)),by=x]
   x  z  a
1: a  6  9
2: b 15 60 
```

由于您是新手`data.table`，我建议您也研究一下该`setnames`功能的帮助页面以及`?data.table`小`data.table`插曲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-02T12:55:19.393

为简洁起见，您现在可以`.()`使用`list()`

```
DT[, .(z=sum(y)+3, a=mean(y*z)), by=x] 
```

# ajax - 此函数有过载

> ID：13525799
> 
> 赞同：0
> 
> 时间：2012-11-23T09:04:34.097
> 
> 标签：ajax, jquery

我需要一个简单的方法重载

```
 $.ajax({
        url: '@Url.Action("Footer")',
        type: "GET",
        success: function (result) {
            $(".maindiv").append(result);
        }
    }); 
```

例子`$(".maindiv").append(ajax.loader('@Url.Action("Footer")'));`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:06:21.853

你不能这样做，因为结果`ajax`是异步的。当函数返回时，没有任何东西可以附加。这就是为什么我们给`ajax`.

实际上，您**可以**通过返回占位符并定义一个成功函数替换占位符来做到这一点，但是：

*   这将是沉重而丑陋的
*   获取的内容在下一条指令中仍然不存在
*   与通常的做法相比没有优势

真正要做的是了解浏览器中javascript的基于异步事件的逻辑并学会处理它。

# java - 我的标签小部件不显示图片图标

> ID：13525800
> 
> 赞同：0
> 
> 时间：2012-11-23T09:04:54.830
> 
> 标签：java, android, eclipse, tabs, widget

我正在尝试设置一个应用程序，我对自己的进步感到满意。我已经设置了一个选项卡小部件，如下所示，它工作正常，但是我设置的图片没有显示。这很令人困惑，因为我似乎有！[在此处输入图像描述][1]所有正确的代码。任何评论都会大大复活:)

因此，回顾一下，我试图在每个选项卡下放置图标，例如收藏夹下的星形和警报下的时钟等......

TrainMain.java

```
package com.tris.trainbuzzer;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.TabSpec;

@SuppressWarnings({ "deprecation" })
public class TrainMain extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_train_main);

        Resources res = getResources();
        TabHost tabHost = getTabHost();

        // Tab for planner
        TabSpec plannerspec = tabHost.newTabSpec("Planner");
        plannerspec.setIndicator("Planner",
                res.getDrawable(R.drawable.icon_planner_tab));
        Intent plannerIntent = new Intent(this, PlannerActivity.class);
        plannerspec.setContent(plannerIntent);

        // Tab for alerts
        TabSpec alertsspec = tabHost.newTabSpec("Alerts");
        // setting Title and Icon for the Tab
        alertsspec.setIndicator("Alerts",
                res.getDrawable(R.drawable.icon_alerts_tab));
        Intent alertsIntent = new Intent(this, AlertsActivity.class);
        alertsspec.setContent(alertsIntent);

        // Tab for settings
        TabSpec settingsspec = tabHost.newTabSpec("Settings");
        settingsspec.setIndicator("Settings",
                res.getDrawable(R.drawable.icon_settings_tab));
        Intent settingsIntent = new Intent(this, SettingsActivity.class);
        settingsspec.setContent(settingsIntent);

        // Tab for favourites
        TabSpec favouritesspec = tabHost.newTabSpec("Favourites");
        favouritesspec.setIndicator("Favourites",
                res.getDrawable(R.drawable.icon_favourites_tab));
        Intent favouritesIntent = new Intent(this, FavouritesActivity.class);
        favouritesspec.setContent(favouritesIntent);

        // Adding all TabSpec to TabHost
        tabHost.addTab(plannerspec); // Adding planner tab
        tabHost.addTab(favouritesspec); // Adding favourites tab
        tabHost.addTab(alertsspec); // Adding alerts tab
        tabHost.addTab(settingsspec); // Adding settings tab

    }
} 
```

activity_train_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

</TabHost> 
```

icon_planner_tab.xml（在可绘制文件中）

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

   <!-- When selected, use grey -->
    <item android:state_selected="true"
        android:drawable="@drawable/planner_gray" ></item>
   <!-- When selected, use white -->
    <item 
        android:drawable="@drawable/planner_white"></item>

</selector> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:47:30.797

我测试了你的应用程序。似乎您在 Android ICS 或更高版本上运行它。查看区别：

![在安卓 2.3 上](../Images/11a67ffadb39f9f3e91913f7f99b3468.png)

![在安卓 4.0.4 上](../Images/4d4758e0b92eee343b25213a285078cc.png)

对于自定义选项卡视图指示器：

```
private View createTabView(final Context context, final int textStringId, final int imageResId) {
        View view = LayoutInflater.from(context).inflate(R.layout.tabs_bg, null);
        ImageView iv = (ImageView) view.findViewById(R.id.tabsIcon);
        iv.setImageResource(imageResId);
        TextView tv = (TextView) view.findViewById(R.id.tabsText);
        tv.setText(textStringId);
        return view;
    } 
```

# objective-c - Coreplot iOS 中 LEGENDS 上的触摸事件

> ID：13525803
> 
> 赞同：2
> 
> 时间：2012-11-23T09:05:05.630
> 
> 标签：objective-c, ios, touch, core-plot

我希望如果***用户触摸特定的图例，那么我可以触发一些动作***，比如显示该切片/条形图/图的详细信息。除了：

```
-(NSString *)legendTitleForPieChart:(CPTPieChart *)pieChart recordIndex:(NSUInteger)index 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:16:10.957

到目前为止，这在 coreplot 中不可用。您必须对类进行子`CPTLegend`类化才能添加此功能。这里已经有[这个要求了。](http://code.google.com/p/core-plot/issues/detail?id=444&q=legend)

只是为了给你指出正确的方向。为了实现这一点，您需要执行以下操作，

1.  修改方法`renderAsVectorInContext`以存储绘制图例标题和样本的 CGRect。与图例标题对应的框架之间应该有连接。
2.  修改方法`-(BOOL)pointingDeviceDownEvent:(CPTNativeEvent *)event atPoint:(CGPoint)interactionPoint`并检查点击是否在上面存储的任何这些 CGRect 上。如果该点在该框架内，您需要调用一个委托方法并告诉哪个 Legend 被点击了。在其他 coreplot 类中检查此方法的类似实现。在这种情况下，识别敲击点是否位于该框架内应该几乎是相似的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:41:08.797

我在我的 coreplot 子类中实现了它。这是我做的事情（可能不是最好的方法，但我在这里工作）：

1-为CPlot创建一个类别，并添加一个名为CGRect legendRect的属性；

2-在初始化绘图时，将此属性设置为每个绘图的 CGRectZero；

3-添加协议 CPTLegendDelegate 并实现以下方法：

```
-(BOOL)legend:(CPTLegend *)legend shouldDrawSwatchAtIndex:(NSUInteger)idx forPlot:(CPTPlot *)plot inRect:(CGRect)rect inContext:(CGContextRef)context
{
    if (CGRectEqualToRect(plot.legendRect, CGRectZero)) {
        plot.legendRect = CGRectUnion(self.graph.legend.frame, rect);
    }
    return !plot.hidden;
} 
```

3-添加协议CPTPlotSpaceDelegate并实现以下方法：

```
-(BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(UIEvent *)event atPoint:(CGPoint)point
{
    if (CGRectContainsPoint(self.graph.legend.frame, point)) {

       CGPoint pointInLegend = CGPointMake(point.x - self.graph.legend.frame.origin.x, point.y - self.graph.legend.frame.origin.y);

        [self.graph.allPlots enumerateObjectsUsingBlock:^(CPTPlot *plot, NSUInteger idx, BOOL *stop) {
            if (CGRectContainsPoint(plot.legendRect, pointInLegend))
            {
                //here you can do whatever you need
                plot.hidden = !plot.hidden;
                [self configureLegend]; 
                *stop = YES;
            }
        }];
    }
    return YES;
} 
```

当用户触摸图例项（样本或标签）时，图例将被隐藏。可能这可以在 coreplot 中实现。

问候， 阿尔米尔

# highcharts - Highcharts 空月

> ID：13525808
> 
> 赞同：0
> 
> 时间：2012-11-23T09:05:27.883
> 
> 标签：highcharts

我正在生成一个高图。首先，highchart 以“November”月份开始，该月份是空的，看起来是正确的。现在，如果我去“七月”月（图 1）（只是一个月有一些分数），它看起来不错，但是现在..如果我回到空月“十一月”（图 2），我会看到点“七月”月。

要更改月份：

```
line_chart_1.xAxis[0].setExtremes(start_date_time, end_date_time);
line_chart_1.redraw(); 
```

如何解决这个问题？

![HighChart 错误](../Images/e0c610cbf07c3bd96ca173bfa7a8a8d2.png)

# php - 如何防止在以 .php 结尾的 URL 之后添加其他字符串？

> ID：13525812
> 
> 赞同：5
> 
> 时间：2012-11-23T09:05:43.190
> 
> 标签：php, url

我们网站的团队刚刚发现，任何用户都可以在以 .php 扩展名结尾的 URL 后添加斜杠“/”，然后添加任何字符串，并且仍然可以访问相同的原始页面。

例如：我可以通过以下方式访问 www.mydomain.com/index.php：

*   www.mydomain.com/index.php/test
*   www.mydomain.com/index.php/test/123
*   www.mydomain.com/index.php/wqeqwew/2234dwd

（注意：index.php/ 之后的附加字符串在服务器中不存在，它们只是一些垃圾）

另一个问题是，使用我的动态 URL，我总是可以在我的域名和第一个参数之间添加一个不存在的 php 文件。

例如：我可以通过以下方式访问 www.mydomain.com/product/one：

*   www.mydomain.com/test.php/product/one
*   www.mydomain.com/imnothere.php/product/one

我怎样才能防止这种情况发生，我该如何处理？就 SEO 或安全性而言，这是一个严重的问题吗？每当在浏览器中输入或单击这些类型的 URL 时，我希望网站返回 404 错误。

任何帮助是极大的赞赏。谢谢！

**编辑：**

我想我已经修好了。对于第一个问题，我`AcceptPathInfo Off`在我的 .htaccess 中添加了。对于第二个问题，我刚刚`^`在我的动态 URL 的 RewriteRule 之前添加，例如`RewriteRule ^product/(.*)$`，这样没有人可以在域名和第一个参数之间添加额外的字符串。感谢所有的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:09:47.720

> 我怎样才能防止这种情况发生，我该如何处理？

这是由于 Apache 的[`AcceptPathInfo`](http://httpd.apache.org/docs/2.2/en/mod/core.html#acceptpathinfo)指令。您可以将其关闭 - 如果相应地配置了服务器，您只需要一个 .htaccess 文件即可。

> 就 SEO 或安全性而言，这是一个严重的问题吗？

我想不出一种可能会成为严重问题的方法。它通常在大多数处理程序中默认启用，并且经常被用作“穷人`mod_rewrite`”（一种提供精美 URL 的方法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:13:47.197

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php?url=$1 [PT,L] 
```

# vba - 如何在excel中的特定单元格上调用“导入文本文件”选项？

> ID：13525815
> 
> 赞同：1
> 
> 时间：2012-11-23T09:05:51.570
> 
> 标签：vba, excel

我尝试做的是：

```
1\. goto `worksheet 4`
2\. right mouse click on cell `D32`
3\. if (first time): 
      a. choose import text file.
   else:
      b. choose the Refresh 
```

*   [除了使用mouse_events](http://excelhelphq.com/how-to-move-and-click-the-mouse-in-vba)之外，还有什么更优雅的方法 吗？
*   如果我使用`mouse_events`我必须模拟一个左键和一个右键单击。如何确保右键单击菜单上的确切位置？我想使用`spy++`，但这似乎是做简单事情的错误和肮脏的方式。

## ====*链接中的源代码来模拟鼠标事件：* ====

```
Public Declare Function SetCursorPos Lib "user32" (ByVal x As Long, ByVal y As Long) As Long
Public Declare Sub mouse_event Lib "user32" (ByVal dwFlags As Long, ByVal dx As Long, ByVal dy As Long, ByVal cButtons As Long, ByVal dwExtraInfo As Long)
Public Const MOUSEEVENTF_LEFTDOWN = &H2
Public Const MOUSEEVENTF_LEFTUP = &H4
Public Const MOUSEEVENTF_RIGHTDOWN As Long = &H8
Public Const MOUSEEVENTF_RIGHTUP As Long = &H10

Private Sub SingleClick()
  SetCursorPos 100, 100 'x and y position
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
End Sub

Private Sub DoubleClick()
  'Simulate a double click as a quick series of two clicks
  SetCursorPos 100, 100 'x and y position
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
End Sub

Private Sub RightClick()
  'Simulate a right click
  SetCursorPos 200, 200 'x and y position
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0
  mouse_event MOUSEEVENTF_LEFTUP, 0, 0, 0, 0
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:53:43.727

> 除了使用 mouse_events 之外，还有什么更优雅的方法吗？

就在这里。使用`Worksheet_BeforeRightClick`事件

同样在下面的示例中，我正在检查 Cell D32 中是否有任何内容来决定是导入还是刷新。如果您愿意，可以使用布尔变量。

代码进入相关工作表的工作表代码区域。见截图。

**截屏**

![在此处输入图像描述](../Images/e797879ccb58597587a8f3ab2ceb87f1.png)

**代码**

```
Option Explicit

Private Sub Worksheet_BeforeRightClick(ByVal Target As Range, Cancel As Boolean)
    On Error GoTo Whoa

    Application.EnableEvents = False

    '~~> Check if the right click happened on D32
    If Not Intersect(Target, Range("D32")) Is Nothing Then
        '~~> Check if cell is empty
        If Len(Trim(Target.Value)) = 0 Then
            '~~> If empty, import file
        Else
            '~~> if not empty, refresh data
        End If
        Cancel = True
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

高温高压

# php - 未为特定文件执行 cronjob

> ID：13525818
> 
> 赞同：1
> 
> 时间：2012-11-23T09:05:58.983
> 
> 标签：php, linux, cron

我有一个 cron 设置来运行一个 php 文件，但由于某种原因，它在时机成熟时不起作用。我可以在终端中手动调用相同的文件，它工作正常。也没有错误信息。

注意：为不同的文件夹和文件设置了更多作业，它们都可以正常工作。权限也是一样的。

谢谢

**克朗**

```
30 2 * * 1,2,3,4,5 php /var/www/html/cronjob/update-db.php 
```

**权限**

```
drwxr-xr-x  2 root   root      4096 Nov 20 10:17 cronjob

-rwxr-xr-x 1 root root 5808 Nov 21 17:21 update-db.php 
```

*   conn.php 被许多其他 cronjobs 使用并且工作正常。
*   当我在终端中调用它时，这段代码运行良好。
*   除此之外，其他所有 cronjob 都可以正常工作。

**代码**

```
require_once "/var/www/html/dbfolder/conn.php";

function write_log($message)
{
    $filename = 'update-sis-assessment-column-log.txt';

    if (file_exists($filename))
    {
        $handle = fopen($filename, 'a');
    }
    else
    {
        $handle = fopen($filename, 'w');
        //chmod($filename, 0644);
    }

    fwrite($handle, $message . "\r\n\r\n");
    fclose($handle);

    exit;
}

if (connectDB() === true)
{
    $query = "SELECT.......";
    $rcset = mysql_query($query);

    $terms = null;

    if (@mysql_num_rows($rcset) > 0)
    {
        while ($records = mysql_fetch_array($rcset))
        {
            if (ctype_digit($records['Term']))
            {
                $terms .= "'" . substr($records['Term'], 0, 4) . "-01', ";
            }
        }

        $terms = substr($terms, 0, -2);
    }

    write_log('DONE : ' . $terms);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:14:26.120

确保 php 可执行文件在您的路径中，或者将 php 的完整路径放在 cron 作业中，例如

```
30 2 * * 1,2,3,4,5 /usr/bin/php /var/www/html/cronjob/update-db.php 
```

如果您不确定 php 的位置，您可以运行

```
which php 
```

获取路径

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:24:16.370

还建议将输出重定向到日志文件并使用更短的运行时间间隔进行调试

*/5 * * * * /usr/bin/php /var/www/html/cronjob/update-db.php >> /path_to_log.log

# ajax - 我无法以其他形式更新数据表

> ID：13525820
> 
> 赞同：3
> 
> 时间：2012-11-23T09:06:12.650
> 
> 标签：ajax, jsf, primefaces

我无法`datatable`以另一种形式更新。

```
javax.servlet.ServletException: Cannot find component with identifier "searchForm:dataTableId" referenced from "criteriaForm:j_idt13".
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:321)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:113)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

我创建了两个表单，但我无法更新`bean`. 我在用着 ;

```
<h:form id="criteriaForm">
        <p:panel>
            <h:panelGrid columns="3" cellpadding="2">
                <h:panelGrid columns="3" cellpadding="2">
                    <h:outputText value=start"></h:outputText>
                    <p:calendar required="false" id="date1"
                        value="#{searchBean.date1}">
                        <f:convertDateTime locale="en" pattern="dd/MM/yyyy" />
                    </p:calendar>
                </h:panelGrid>
                <h:panelGrid columns="3" cellpadding="2">
                    <h:outputText value="end"></h:outputText>
                    <p:calendar locale="en" required="false" id="date2"
                        value="#{searchBean.date2}">
                        <f:convertDateTime locale="en" pattern="dd/MM/yyyy" />
                    </p:calendar>
                </h:panelGrid>
                <p:commandButton icon="ui-icon-search" value="Search" type="submit"
                    actionListener="#{searchBean.commit()}"
                    style="width:110px;" update="searchForm:dataTableId"></p:commandButton>
            </h:panelGrid>
        </p:panel>
    </h:form>
    <br />
    <h:form id="searchForm">
        <p:dataTable var="item" id="dataTableId" widgetVar="dataTableWidget"
            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
            rowIndexVar="index" value="#{searchBean.lazyModel}"
            lazy="true" paginator="true" resizableColumns="false" rows="15">
            <p:column headerText="TEST">
                <h:outputText value="#{item.customerName}"></h:outputText>
            </p:column>
            <p:column headerText="TEST">
                <h:outputText value="#{item.customerCode}"></h:outputText>
            </p:column>
            <p:column headerText="TEST">
                <h:outputText value="#{item.customerPhone}"></h:outputText>
            </p:column>
        </p:dataTable>
    </h:form> 
```

**我从页面的来源**复制了“ `searchForm:dataTableId`” 。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:21:26.430

您需要在绝对客户端 ID 前面加上您的情况的命名容器分隔符`:`。所以，你应该`update=":searchForm:dataTableId"`改用。

```
<p:commandButton icon="ui-icon-search" value="Search" type="submit"
    actionListener="#{searchBean.commit()}"
    style="width:110px;" update=":searchForm:dataTableId">
</p:commandButton> 
```

否则，它将相对于当前命名容器组件（即第一个`<h:form>`本身）进行搜索。**

# android - 使用 XML 解析器的表格分页表格布局 Web 服务

> ID：13525822
> 
> 赞同：0
> 
> 时间：2012-11-23T09:06:15.343
> 
> 标签：android, web-services, android-layout, android-ksoap2, tablerow

我已经编写了一个表格布局来自动从 Web 服务填充值，但我是 java 和 android 的新手并写了这个。我想将 sax 解析器中的 vlaues 添加到 tablerow。请帮助我如何将其添加到表格布局中。我已经给出了下面的文件。

![在此处输入图像描述](../Images/32d958452f1a6fdc942fe8fd3959eb4b.png)

表格布局

```
public class TablePage extends Activity {
ArrayList<Bookdetails>bookno=new ArrayList<Bookdetails>();
ArrayList<Bookdetails>booktitle1=new ArrayList<Bookdetails>();
 private final String NAMESPACE = "http://www.webserviceX.NET/";
 private final String URL = "http://www.webservicex.net/BibleWebservice.asmx";
 private final String SOAP_ACTION = "http://www.webserviceX.NET/GetBookTitles";
 private final String METHOD_NAME = "GetBookTitles";
 TableLayout country_table; 
 TableRow countrydet;
@SuppressWarnings("deprecation")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_table_page);
    country_table=(TableLayout)findViewById(R.id.Employee_Table);;

     new service().execute();

}

public void createtable()
{

}
private class service extends AsyncTask<Void, Void, ArrayList<Bookdetails>>{
    saxparser sax=new saxparser();
    @Override
    protected ArrayList<Bookdetails> doInBackground(Void... params) {

        // TODO Auto-generated method stub
        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);
        envelope.dotNet = true;
        try{
            HttpTransportSE androidHttpTransport=new HttpTransportSE(URL);
            androidHttpTransport.call(SOAP_ACTION, envelope);
            //String resdump=androidHttpTransport.responseDump.toString();
            //System.out.println(resdump);
            SoapPrimitive result=(SoapPrimitive)envelope.getResponse();

            //sax(result.toString());
            Xml.parse(result.toString(),sax);

        }
        catch(Exception e){
            e.printStackTrace();
        }
        return sax.getdetails();
    }

    protected void onPostExecute(ArrayList<Bookdetails> details)
    {

         for(int i=0;i<details.size();i++)
         {

         }

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_table_page, menu);
    return true;
} 
```

}

saxparser.java

```
public class saxparser extends DefaultHandler{
TableLayout book_table;
TableRow bookrow;

Boolean currentElement=false;
String currentValue=null;
public static Bookdetails bookdetails = null;
String data;

ArrayList<Bookdetails> datas=new ArrayList<Bookdetails>();

public void startElement(String uri, String localName, String Name,
        Attributes attributes) throws SAXException {
    currentElement=true;
    if(localName.equals("NewDataSet")){
        bookdetails=new Bookdetails();

    }
    else if(localName.equals("Table")){
        String bookno=attributes.getValue("Book");

        String booktitle=attributes.getValue("BookTitle");

        }

}
public void characters(char[] ch,int start,int length ) throws SAXException{
    if(currentElement){
        currentValue=new String(ch,start,length);
                    currentElement=false;
    }
}
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if(localName.equalsIgnoreCase("Book")){
        bookdetails.setBookno(currentValue);
    }else if(localName.equalsIgnoreCase("BookTitle")){
        bookdetails.setBooktitle(currentValue);

    }else if(localName.equalsIgnoreCase("Table")){
        datas.add(bookdetails);

    }

}
public ArrayList<Bookdetails> getdetails()
{
    return datas;
}
// System.out.println(bookno.size()); 
```

Bookdetails.java(Getter Setter 方法)

```
package com.example.tablepagination;

import java.util.ArrayList;

/** Contains getter and setter method for varialbles */
public class Bookdetails {

public String bookno;
public String getBookno() {
    return bookno;
}
public void setBookno(String bookno) {
    this.bookno = bookno;
}
public String getBooktitle() {
    return booktitle;
}
public void setBooktitle(String booktitle) {
    this.booktitle = booktitle;
}
public String booktitle;

} 
```

我已经为 sax 解析器使用了 getter setter 方法。如何将 arraylist 字符串添加到我的表行。谁能告诉我方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:17:23.013

查看[有关 ListView 的 android 指南。](http://developer.android.com/guide/topics/ui/layout/listview.html) 您应该使用带有适配器的 ListView 来显示来自 SaxParser 的元素。

# java - NoClassDefFoundError：sun/security/util/Length，我应该如何解决它

> ID：13525826
> 
> 赞同：4
> 
> 时间：2012-11-23T09:06:30.997
> 
> 标签：java, spring, ubuntu-12.04, openjdk

嗨，我刚刚更新了我的 ubuntu 12.04，一切正常。在我运行项目时更新后，我收到此错误。

```
java.lang.NoClassDefFoundError: sun/security/util/Length 
```

我试过

```
sudo apt-get remove openjdk-7-jdk
sudo apt-get install openjdk-7-jdk 
```

但它没有用。

Java 版本给出：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.4) (6b24-1.11.4-1ubuntu0.12.04.1)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

完整的堆栈跟踪是：

```
org.springframework.web.util.NestedServletException: Handler processing failed; nested exception is java.lang.NoClassDefFoundError: sun/security/util/Length
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:949)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:139)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.cuppla.teammatch.web.filters.OrganisationFilter.doFilter(OrganisationFilter.java:79)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.ajp.AjpProcessor.process(AjpProcessor.java:200)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679)
Caused by: java.lang.NoClassDefFoundError: sun/security/util/Length
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at sun.security.pkcs11.P11ECKeyFactory.generatePublic(P11ECKeyFactory.java:228)
    at sun.security.pkcs11.P11ECKeyFactory.implTranslatePublicKey(P11ECKeyFactory.java:103)
    at sun.security.pkcs11.P11ECKeyFactory.engineGeneratePublic(P11ECKeyFactory.java:152)
    at java.security.KeyFactory.generatePublic(KeyFactory.java:321)
    at sun.security.x509.X509Key.buildX509Key(X509Key.java:223)
    at sun.security.x509.X509Key.parse(X509Key.java:170)
    at sun.security.x509.CertificateX509Key.<init>(CertificateX509Key.java:75)
    at sun.security.x509.X509CertInfo.parse(X509CertInfo.java:705)
    at sun.security.x509.X509CertInfo.<init>(X509CertInfo.java:169)
    at sun.security.x509.X509CertImpl.parse(X509CertImpl.java:1751)
    at sun.security.x509.X509CertImpl.<init>(X509CertImpl.java:196)
    at sun.security.provider.X509Factory.engineGenerateCertificate(X509Factory.java:107)
    at java.security.cert.CertificateFactory.generateCertificate(CertificateFactory.java:322)
    at sun.security.provider.JavaKeyStore.engineLoad(JavaKeyStore.java:763)
    at sun.security.provider.JavaKeyStore$JKS.engineLoad(JavaKeyStore.java:55)
    at java.security.KeyStore.load(KeyStore.java:1201)
    at sun.security.ssl.TrustManagerFactoryImpl.getCacertsKeyStore(TrustManagerFactoryImpl.java:221)
    at sun.security.ssl.TrustManagerFactoryImpl.engineInit(TrustManagerFactoryImpl.java:51)
    at javax.net.ssl.TrustManagerFactory.init(TrustManagerFactory.java:247)
    at sun.security.ssl.SSLContextImpl.engineInit(SSLContextImpl.java:74)
    at javax.net.ssl.SSLContext.init(SSLContext.java:265)
    at com.paypal.core.SSLUtil.getDefaultSSLContext(SSLUtil.java:52)
    at com.paypal.core.DefaultHttpConnection.setupClientSSL(DefaultHttpConnection.java:32)
    at com.paypal.core.AuthenticationService.getPayPalHeaders(AuthenticationService.java:62)
    at com.paypal.core.APIService.makeRequest(APIService.java:111)
    at com.paypal.core.BaseService.call(BaseService.java:149)
    at urn.ebay.api.PayPalAPI.PayPalAPIInterfaceServiceService.doDirectPayment(PayPalAPIInterfaceServiceService.java:1559)
    at urn.ebay.api.PayPalAPI.PayPalAPIInterfaceServiceService.doDirectPayment(PayPalAPIInterfaceServiceService.java:1589)
    at com.cuppla.teammatch.controllers.PaymentController.doPayment(PaymentController.java:150)
    at com.cuppla.teammatch.controllers.PaymentController.makePayment(PaymentController.java:69)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:212)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    ... 53 more
Caused by: java.lang.ClassNotFoundException: sun.security.util.Length
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 104 more 
```

我正在使用 Springtoolsuit 3.1.0 tomcat 7

请在这方面帮助我，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T09:21:02.053

尝试将 java 版本从 1.6 更改为 1.7。您可以使用以下命令执行此操作，该命令将显示您安装的 java 版本。

```
/usr/sbin/alternatives --config java 
```

之后选择您的 java 版本选择。

# list - 随机将一个列表中的项目与另一个列表中的项目配对

> ID：13525828
> 
> 赞同：0
> 
> 时间：2012-11-23T09:06:36.393
> 
> 标签：list, matlab

我正在组织一个“秘密圣诞老人”活动，而不是通过抽签来做无聊的方式，我把它变成了一个教育练习，并使用一些 matlab 代码进行配对。最终结果意味着列表中的每个人都被要求为列表中的另一个人购买礼物。Codewise，问题归结为“从这个人列表中，选择一个不是你并且没有被其他人选中的人”。

我有一些有效的代码，但它不是很健壮（如果有奇数人，可能形成无限循环）。我也怀疑它不是“真正的”随机的。还有更好的方法吗？

```
names = {'Alice' 'Bob' 'Carol' 'Dave' 'Esther' 'Frank'};
picklist = names;
c = numel(names)

pairs = cell(c,2);

for ii = 1:c
    pairs(ii,1) = names(ii);
    match = 1;
    while (match == 1)
        d = ceil(rand(1)*c);
        if ((strcmp(picklist(d),names(ii)) == 0) && (strcmp(picklist(d),'picked') == 0))
            pairs(ii,2) = picklist(d);
            picklist(d) = {'picked'};
            match = 0;
        end
    end
end

pairs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T09:25:48.933

为时已晚，我可能会遗漏一些东西。

```
names     = {'Alice' 'Bob' 'Carol' 'Dave' 'Esther' 'Frank'};
idx       = randperm(length(names));
thisGroup = names(idx);
thatGroup = names( mod(idx,length(idx))+1); 
```

给

```
thisGroup = 
    'Bob'    'Alice'    'Esther'    'Dave'    'Frank'    'Carol'

thatGroup =     
    'Carol'    'Bob'    'Frank'    'Esther'    'Alice'    'Dave' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-16T14:25:48.723

我编写了一个脚本，确保所有配对都不同，然后将它们放入文件中，以人名作为文件名，并在文件中与他们配对的人。

然后可以将这些发送给其他人，而无需任何人，包括运行代码的人都不知道哪些人配对：

```
names = {'A' 'B' 'C'}

% create two groups that are the same

Group_A = {' '};
Group_B = {' '};

% if groups are the same at any index repair

while sum(cellfun(@strcmp,Group_A,Group_B))>0;
   idx = randperm(length(names));
   Group_A = names
   Group_B = names(idx)  ;
end

% Create .txt Files

for i = 1:length(names)
    filename = sprintf('%s.txt', Group_A{i})
    fid = fopen(filename, 'w');
    fprintf(fid, '%s', Group_B{i});
end 
```

# python - 使用带有线程锁的文件句柄时出现 Python 错误“对已关闭文件的 I/O 操作”

> ID：13525833
> 
> 赞同：1
> 
> 时间：2012-11-23T09:06:56.830
> 
> 标签：python, multithreading, file, io

我正在尝试使用 Python`threading`模块写入一个文件，并且我已经在使用锁来访问该文件。类如下：

```
 class WriteToFile(threading.Thread):
      def __init__(self,lock,fp):
          threading.Thread.__init__(self)
          self.lock=lock
          self.fp=fp
      def run():
          self.lock.acquire()
          self.fp.write('some string')
          self.lock.release()
  f=open('somefile','a')
  lock=threading.Lock()
  thread= WriteToFile(lock,f)
  thread.start() 
```

上面的代码只能运行一段时间，由于`ValueError: I/O operation on closed file`

但是，如果我访问“锁定获取和释放”块之间的文件而不是使用文件句柄，则代码可以正常运行。但这种方式并不好，因为每个线程都会打开文件并关闭它。

任何解释为什么？我正在使用 Python 2.7.3 和 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T03:56:53.513

我将以下代码添加到代码末尾以等待所有子线程完成然后关闭文件。现在它可以工作了。

```
 while threading.activeCount() >1:
      pass
  else:
      print 'All done!'
      f.close() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-23T11:19:53.087

可能是主线程在`write`被调用之前死了？我已经在脚本末尾添加了这个添加来尝试您的代码：

```
import time
time.sleep(1) 
```

它有效。

# php - 变量内的函数

> ID：13525838
> 
> 赞同：2
> 
> 时间：2012-11-23T09:07:21.663
> 
> 标签：php

我在课堂上有这个变量：（这有效）

```
public $logFname = '_fail.log'; 
```

但我需要这个：（不起作用）

```
public $logFname = date('d').'_fail.log'; 
```

为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T09:10:31.340

定义变量时不能使用函数。你应该在某个地方初始化它。

你应该这样做：

```
public $logFname;

public function __construct()
{
  $this->logFname = date('d').'_fail.log';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:10:40.323

您应该首先声明变量，然后定义它。

```
public $logFname; 
```

然后像这样使用它：

```
$this->logFname = date('d').'_fail.log'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T09:12:18.147

```
class Log {
    public $logFname = '_fail.log';

    public function __construct() {
        $this->logFname = date('d').'_fail.log';
    }
} 
```

在类中声明变量时不能使用任何函数。

# python - python unittest中的变量范围

> ID：13525842
> 
> 赞同：2
> 
> 时间：2012-11-23T09:07:32.930
> 
> 标签：python, unit-testing, scope

> **可能的重复：**
> [Python 中的“Least Astonishment”：可变默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-in-python-the-mutable-default-argument)

在尝试运行一些单元测试（python 2.7）时，我看到了一些与变量范围相关的奇怪行为：

我有一个包含一个名为“Dummy”的类的模块，它有一个列表作为实例变量。在我对该模块的单元测试中，我有两个单独的测试用例，每个测试用例都创建自己单独的 Dummy 实例。然而，第二个运行的测试中的 Dummy 实例似乎包含在第一个测试中创建的列表。这是代码：

我的模块.py：

```
class Dummy(object):
    def __init__(self, mylist=[]):
        self.mylist = mylist 
```

test_mymodule.py：

```
class TestDummy(unittest.TestCase):
    def testDummy1(self):
        d1 = Dummy()          # d1.mylist is empty, []
        d1.mylist.append(1)   # mylist = [1]
        self.assertEqual(d1.mylist, [1])

    def testDummy2(self):
        d2 = Dummy()          # d2.mylist = [1] !
        d2.mylist.append(2)   # d2.mylist = [1,2]
        self.assertEqual(d2.mylist, [2]) # FAILS 
```

额外细节：

1.  如果我将 a`print mylist`作为 Dummy 的**init**方法的第一行，果然，在第二次测试运行时，它会打印 [1]，就好像 mylist=[1] 作为参数传入一样

2.  如果我明确指定`dd = Dummy(mylist=[])`，那么问题就会消失。它似乎与默认参数值有关，但我不清楚为什么无论如何它应该溢出到不同的范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:20:40.207

这与单元测试无关，而是与 Python 如何处理函数的默认参数有关。`def`执行语句时对函数默认参数求值一次。

这意味着您已经创建了一个列表，该列表用作默认参数，`__init__`并且只要该函数存在，该列表就会存在。

`None`使用（或其他标记值）作为默认值很容易避免：

```
class Dummy(object):
    def __init__(self, mylist=None):
        self.mylist = mylist if mylist is not None else [] 
```

# python - Python合并多个txt文件

> ID：13525847
> 
> 赞同：0
> 
> 时间：2012-11-23T09:08:15.470
> 
> 标签：python, text, merge

我尝试使用此代码合并文件夹中的多个 TXT 文件，但它不起作用：

```
import os,shutil
path = "C:/Users/user/Documents/MergeFolder"
f=open(path + "/fileappend.txt","a")
for r,d,fi in os.walk(path):
     for files in fi:
         if files.endswith(".txt"):                         
              g=open(os.path.join(r,files))
              shutil.copyfileobj(g,f)
              g.close()
f.close() 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:41:37.190

编辑：您正在创建`fileappend.txt`inside `path`，同时对其进行写入。根据写入刷新到磁盘的时间，您可能正在尝试读取要附加到的文件。这会导致很多奇怪的事情。考虑不要放在`fileappend.txt`里面`path`，或者在你完成后把它移到那里。

您可以更整洁地编写代码：

```
with open(os.path.join(path, "fileappend.tmp"), "a") as dest:
    for _, _, filenames in os.walk(path):
        for filename in fnmatch.filter(filenames, "*.txt"):
            with open(filename) as src:
                shutil.copyfileobj(src, dest)
os.rename(os.path.join(path, "fileappend.tmp"), "fileappend.txt") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-08T10:04:28.103

你可以使用 cat(shell 命令)

```
cat 1.txt>>2.txt 
```

在 python 中，你可以使用 os.system() 来使用 shell 命令

# linux - 确定用于构建 ATLAS 的独立 CPU（使用关联 ID 指定）

> ID：13525852
> 
> 赞同：3
> 
> 时间：2012-11-23T09:08:55.630
> 
> 标签：linux, cpu, intel, hyperthreading, atlas

我正在尝试确定用于在具有 4 个 Intel CPU 和超线程（ubuntu 12.04）的 linux 机器上构建 ATLAS 的独立 CPU（用关联 ID 指定）。

我这样做的原因是 ATLAS 手册说在具有超线程的机器上只使用物理内核，关于如何实现这一点它说： [“......如果你学习，你可以告诉 ATLAS 只使用真正的内核关于您的机器的一些信息。不幸的是，ATLAS 目前无法自动检测这些功能，但是如果您进行实验，您可以发现哪些亲和 ID 是单独的核心，......”](http://math-atlas.sourceforge.net/atlas_install/node21.html)

进一步提示如何实际进行此实验：[“...在 Linux 下，我可以使用 cat /proc/cpuinfo... 发现这一点。”](http://math-atlas.sourceforge.net/atlas_install/node46.html)

在我的机器上，文件 /proc/cpuinfo 包含八个虚拟处理器的以下信息：

1.  *   处理器：0
    *   vendor_id : 正版英特尔
    *   CPU系列：6
    *   型号：42
    *   型号名称：Intel(R) Core(TM) i7-2600 CPU @ 3.40GHz
    *   步进：7
    *   微码：0x1b
    *   中央处理器兆赫：3392.333
    *   缓存大小：8192 KB
    *   物理ID：0
    *   兄弟姐妹：8
    *   核心编号：0

...

处理器 0 和 4 共享相同的核心 ID（处理器 1 和 5、2 和 6、3 和 7 以此类推）。但是，如果我将 --force-tids="4 0 1 2 3" 指定给 ATLAS 配置脚本，则构建失败（首先对我来说是由于 make pcheck 失败而引起的）。如果我不使用此标志，则 pcheck 可以正常工作，如下所示：http: [//sourceforge.net/tracker/](http://sourceforge.net/tracker/?func=detail&aid=3577908&group_id=23725&atid=379483) ?func=detail&aid=3577908&group_id=23725&atid=379483 。

有人知道我如何通过一些实验来了解我的机器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T17:24:27.170

查看 likwid (http://code.google.com/p/likwid/)，我很确定它可以让您将 ATLAS 触发的线程仅固定到系统的物理核心。不知道怎么做，但它可以。

# magento - 如何覆盖magento自定义模块中的.phtml文件？

> ID：13525853
> 
> 赞同：1
> 
> 时间：2012-11-23T09:09:03.977
> 
> 标签：magento

我想在我的自定义模块中覆盖 checkout/onpepage/payment.phtml？在我的模块 layout.xml 中，我使用了下面给出的代码-：

```
<checkout_onepage_index>
      <reference name="payment">         
            <action method="setTemplate">
                <template>giftcard/checkout/onepage/payment.phtml</template>
           </action>      
     </reference>
 </checkout_onepage_index> 
```

但是 payment.phtml 文件在我的自定义模块中没有被覆盖。

我浏览了以下链接和更多教程，但没有找到确切的解决方案。

[http://blog.chapagain.com.np/magento-overriding-template-file-from-custom-module/](http://blog.chapagain.com.np/magento-overriding-template-file-from-custom-module/) [http://www.magentocommerce.com/boards/viewthread/262202/#t352074](http://www.magentocommerce.com/boards/viewthread/262202/#t352074) [Magento 扩展需要覆盖模板](https://stackoverflow.com/questions/7986979/magento-extension-needs-to-override-a-template)

我已经清除了浏览器缓存和 magento 缓存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-23T09:48:16.963

自定义 Magento 2 的核心功能是一种糟糕的编码习惯。解决方案是使用 Magento 2 中的自定义模块覆盖 phtml 文件。

在 Magento 2 中使用自定义模块覆盖 phtml 文件的方法：

1.  带插件
2.  使用 XML

[在https://meetanshi.com/blog/override-phtml-file-using-custom-module-in-magento-2/](https://meetanshi.com/blog/override-phtml-file-using-custom-module-in-magento-2/)了解这两种方法的实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T11:09:16.413

还请在 app/code/design/THEME/layout/checkout.xml 中的“block”标签的帮助下覆盖它的 .phtml 文件。我曾经做过一次。这个对我有用。我希望它也对你有用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T11:40:20.130

使用 checkout.onepage.payment 作为参考而不是付款，这将对您有所帮助

# mongodb - mongoDB聚合：在多维数组上查找值

> ID：13525862
> 
> 赞同：3
> 
> 时间：2012-11-23T09:09:40.763
> 
> 标签：mongodb, aggregation-framework

几天前我正在使用 MongoDB 和聚合函数，但我无法得到我正在寻找的结果。

假设一个集合具有这样的文档：

```
[_id] => 2Q4YkrDUPIdMpHYdG7e801
[domain] => notedlinks.loc
[updateDate] => 1353582907
[pageCaches] => Array (
[0] => Array (
    [url] => 421341234213470dfb61366
    [data] => Array (
        [domain] => notedlinks.loc
        [url] => http://notedlinks.loc/sample/node
        [contentHash] => 382a250d4c226bb85b910c04d1774bb7a9020e44
        [percent] => 100
        [info] => Array (
            [results] => Array (
                [0] => Array (
                    [tag] => Twitter
                    [url] => http://dbpedia.org/resource/Twitter
                    [references] => Array (
                        [0] => twitter
                    )
                )
            )
        )
        [updateDate] => 1353582907
    )
)
[1] => Array (
    [url] => 786527618a424234be70dfb61366
    [data] => Array (
        [domain] => notedlinks.loc
        [url] => http://notedlinks.loc/sample/node
        [contentHash] => 382a250d4c226bb85b910c04d1774bb7a9020e44
        [percent] => 100
        [info] => Array (
            [results] => Array (
                [0] => Array (
                    [tag] => Twitter
                    [url] => http://dbpedia.org/resource/Twitter
                    [references] => Array (
                        [0] => twitter
                    )
                )
            )
        )
        [updateDate] => 1353582907
    )
)
) 
```

最初，对于搜索，我有：要搜索的集合、_id 值和 url 值。

目的是针对特定的 url，例如：url: '786527618a424234be70dfb61366'，以获取与该 url 关联的“数据”的值，而不加载所有文档内容。仅获取：

```
 [data] => Array (
        [domain] => notedlinks.loc
        [url] => http://notedlinks.loc/sample/node
        [contentHash] => 382a250d4c226bb85b910c04d1774bb7a9020e44
        [percent] => 100
        [info] => Array (
            [results] => Array (
                [0] => Array (
                    [tag] => Twitter
                    [url] => http://dbpedia.org/resource/Twitter
                    [references] => Array (
                        [0] => twitter
                    )
                )
            )
        )
        [updateDate] => 1353582907
    ) 
```

我一直在使用一些表格，但没有成功的结果。例如：

```
db.dm_2Q.aggregate({ $match: { _id : "2Q4YkrDUPIdMpHYdG7e801"}, $unwind : "$pageCaches", $project : {pageCaches: 1}, $match : {"pageCaches.url" : "786527618a424234be70dfb61366"}});

{
"result" : [
    {
        "_id" : "2Q4YkrDUPIdMpHYdG7e801",
        "pageCaches" : [
            {
                "url" : "786527618a42084367ccbe70dfb61366",
                "data" : {
                    "domain" : "notedlinks.loc",
                    "url" : "http://notedlinks.loc/sample/node",
                    "contentHash" : "382a250d4c226bb85b910c04d1774bb7a9020e44",
                    "percent" : "100",
                    "info" : {
                        "results" : [
                            {
                                "tag" : "Twitter",
                                "url" : "http://dbpedia.org/resource/Twitter",
                                "references" : [
                                    "twitter"
                                ]
                            }
                        ]
                    },
                    "updateDate" : 1353582907
                }
            },
            {
                "url" : "786527618a424234be70dfb61366",
                "data" : {
                    "domain" : "notedlinks.loc",
                    "url" : "http://notedlinks.loc/sample/node",
                    "contentHash" : "382a250d4c226bb85b910c04d1774bb7a9020e44",
                    "percent" : "100",
                    "info" : {
                        "results" : [
                            {
                                "tag" : "Twitter",
                                "url" : "http://dbpedia.org/resource/Twitter",
                                "references" : [
                                    "twitter"
                                ]
                            }
                        ]
                    },
                    "updateDate" : 1353582907
                }
            }
        ]
    }
],
"ok" : 1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:43:20.107

最后，我找到了解决方案：

```
db.dm_2Q.aggregate({$unwind: "$pageCaches"},
{$match:{ "pageCaches.url": "786527618a424234be70dfb61366"}}, 
{$project : {"pageCaches.data": 1}});

{
"result" : [
    {
        "_id" : "2Q4YkrDUPIdMpHYdG7e801",
        "pageCaches" : {
            "data" : {
                "domain" : "notedlinks.loc",
                "url" : "http://notedlinks.loc/sample/node",
                "contentHash" : "382a250d4c226bb85b910c04d1774bb7a9020e44",
                "percent" : "100",
                "info" : {
                    "results" : [
                        {
                            "tag" : "Twitter",
                            "url" : "http://dbpedia.org/resource/Twitter",
                            "references" : [
                                "twitter"
                            ]
                        }
                    ]
                },
                "updateDate" : 1353582907
            }
        }
    }
],
"ok" : 1
} 
```

# c# - asp.net中的消息框jquery（旧样式）

> ID：13525868
> 
> 赞同：0
> 
> 时间：2012-11-23T09:10:40.123
> 
> 标签：c#, javascript, jquery, asp.net, message

我有一个 asp.net 用户控件，我添加了一个图像按钮，然后在头部我使用 javascript/jquery 向它添加一个按钮事件，这样它就会在按钮单击时显示一个消息框，现在如果我调查开发人员工具我可以看到 CSS 已加载，但是当我单击图像按钮时，所有发生的都是页面刷新，现在如果我尝试添加`alert("Message");`而不是我的函数，它确实可以工作。

我宁愿在前端做。

```
<head id="head1">
   <link href="/_LAYOUTS/1033/STYLES/abc/arts/galdtor.css" rel="stylesheet" type="text/css" />

   <script type="text/javascript" src="/_layouts/1033/jquery.js"></script>

   <script type="text/javascript">
      $(document).ready(function() {
        $("input[id$='btnSE']").click(function() {
          $('body').append("<div id='M'><span id='text'></span><br/><div id='BPB' onclick='return BPB();'><a href='' onclick='return BPB();'></a></div></div>");
        });

       function BPB() {
         $('#M').remove();
         $('#EM').remove();
         return false;
       }
     });
  </script>

</head> 
```

然后在体内我得到了这个，

```
<div style="margin: 0px 0px 0px 5px; float: left;">
    <asp:ImageButton ID="btnSE" runat="server" ImageUrl="/_LAYOUTS/1033/IMAGES/abc/arts/gtor/ow.png" />
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:16:29.583

这对我有用。

```
 <div style="margin: 0px 0px 0px 5px; float: left;">
 <asp:ImageButton ID="btnSE" runat="server"   OnClientClick="doWork(); return false;"
 ImageUrl="/_LAYOUTS/1033/IMAGES/abc/arts/gtor/ow.png" />
 </div>

<script type="text/javascript">
function doWork() {  
  $('body').prepend("<div id='M'><span id='text'></span><br/><div id='BPB'     onclick='return BPB();'>
 <a href='' onclick='return BPB();'></a>
 </div></div>");
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:18:19.460

```
<a href='' onclick='return BPB();'> 
```

尝试

```
<a href='javascript:bool(BPB());'></a> 
```

由于您没有在 href 中设置任何内容，因此页面将重新加载

# php - 如何设置安装了 IIS 的 apache 虚拟主机

> ID：13525869
> 
> 赞同：2
> 
> 时间：2012-11-23T09:10:43.540
> 
> 标签：php, apache, iis, wamp

我的 Windows 7 PC 上安装了 wamp 和 IIS。我已经更改`Listen 88`并`ServerName localhost:88`在我的 http.conf 文件中。我可以浏览 wamp 服务器和 iis 服务器。

但问题是我想在 Apache 上创建一个 VirtualHost。这是我的代码

**http.conf**文件

```
<VirtualHost *:88>
  DocumentRoot "c:/wamp/www/test_php"
  ServerName phptest.dev
</VirtualHost> 
```

**主机**文件

```
127.0.0.1 phptest.dev 
```

但是当我去 phptest.dev 时，它会自动显示 IIS 服务器页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T16:16:19.460

我假设您使用的是 URL `http://phptewst.dev:88`，而不是`http://phptest.dev`（实际上是 ... `http://phptest.dev:80`）。

添加到 httpd.conf 这些行 -

```
Listen 88
NameVirtualHost *:88 
```

第一行将使 Apache 绑定到端口 88（在所有 IP 上）。第二行将在端口 88 上设置基于名称的主机。

并删除这些行 -

```
Listen 80
Listen 443 
```

因为 IIS 将监听这些端口。

尽管这确实不是处理此问题的最佳方法，但只需将 Apache 和 IIS 绑定到不同的 IP（而不是端口）上。让 IIS 使用 127.0.0.1 和 Apache 127.0.0.2，或者 LAN IP，或者 WAN IP。

```
Listen 127.0.0.2:80 
```

您还可以让 Apache（端口 80）充当 IIS（端口 8080）的代理，这样您就可以让一切都通过一个 IP 和端口 80。设置一个前端 VirtualHost 并在里面添加一个 ProxyPass 行...

```
ProxyPass / http://127.0.0.1:8080 
```

（*我使用 WampDeveloper Pro，而不是 WampServer，但它们都差不多，所以上面的说明应该适合你）

> 这是 PHP Web 应用程序的人工环境。

该评论并非 100% 正确。Apache、PHP 和 MySQL 在 Windows 上都有数百万用户。并且开发跨平台本身会帮助您找到各种错误（根据我的个人经验）。

# android - 显示 Android 内容时出现 HDMI 屏幕分辨率问题？

> ID：13525870
> 
> 赞同：0
> 
> 时间：2012-11-23T09:10:47.947
> 
> 标签：android, android-layout, device, screen-resolution

我设计了一个非常简单的应用程序来计算显示屏的高度和宽度。我正在使用在全高清 1920x1080 上运行的 HDMI 显示器。但是当我计算显示尺寸时，我得到的只是半高清分辨率，即 720x1080。我正在使用 WindowManager/DisplayMetrics 来计算窗口大小。

任何人都知道为什么它响应显示设备分辨率的一半。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:17:58.620

也许即使设备使用 1920x1080 显示输出，通过硬件到屏幕，它只是从 720x1080 放大（或者可能是 1280x720？）。

设备的内置屏幕是否与较小的屏幕分辨率完全相同，即报告为“一半”分辨率？

所以我认为Android设备处理较小分辨率的画布（显示缓冲区），然后只是重新缩放图像（可能由显示硬件）以使用更高分辨率将图像输出到外部屏幕。

然而，这只是一个猜测，因为您没有提供太多细节，例如*什么设备*、*您使用什么代码*等。

**EDIT**在 Android 4.0 之前，摩托罗拉提供了一个用于处理双屏操作的 API，即[Motorola Dual Screen API](https://stackoverflow.com/questions/10822097/hdmi-out-programming-for-dual-screen)。可悲的是，对 ICS 的支持已被放弃。有史以来最大的错误，恕我直言。

# oracle - 触发器和计数（*）不起作用

> ID：13525876
> 
> 赞同：1
> 
> 时间：2012-11-23T09:11:20.807
> 
> 标签：oracle, plsql

我写了触发器来检查客户是否有任何被暂停的帐户。如果是，他将无法创建新帐户，但是当我尝试插入时，插入仍然通过。有人可以帮我吗？

```
CREATE OR REPLACE TRIGGER SuspendedAccount
BEFORE INSERT ON ACCOUNT

FOR EACH ROW

DECLARE

varIsProblemAccount Int;

BEGIN

SELECT COUNT(*) INTO varIsProblemAccount
FROM ACCOUNT
WHERE CUSTID = :new.custID
    AND ACCSTATUS = 'Suspended';

IF (varIsProblemAccount >= 1) THEN      
        DBMS_OUTPUT.PUT_LINE('*************************************************');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Transaction canceled. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Refer customer to the manager immediately. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('**************************************************');
        RETURN;
    END;

ELSIF (varIsProblemAccount = 0) THEN

    BEGIN
        DBMS_OUTPUT.PUT_LINE('*************************************************');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Transaction completed. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Thank the customer for their business. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('**************************************************');
    END;
END IF;
END; 
```

抱歉，我尝试更改为 0，因为它永远不能为“NULL”，但它仍然不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T09:15:05.127

问题是你的其他条件！

```
CREATE OR REPLACE TRIGGER SuspendedAccount
BEFORE INSERT ON ACCOUNT

FOR EACH ROW

DECLARE

varIsProblemAccount Int;

BEGIN

SELECT COUNT(*) INTO varIsProblemAccount
FROM ACCOUNT
WHERE CUSTID = :new.custID
    AND ACCSTATUS = 'Suspended';

IF (varIsProblemAccount >= 1) THEN      
        DBMS_OUTPUT.PUT_LINE('*************************************************');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Transaction canceled. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Refer customer to the manager immediately. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('**************************************************');
        RETURN;
    END;

-- count() never returns NULL
ELSIF (varIsProblemAccount = 0) THEN

    BEGIN
        DBMS_OUTPUT.PUT_LINE('*************************************************');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Transaction completed. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('   Thank the customer for their business. ');
        DBMS_OUTPUT.PUT_LINE('');
        DBMS_OUTPUT.PUT_LINE('**************************************************');
    END;
END IF;
END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:15:05.490

尝试更改以下代码

```
ELSIF (varIsProblemAccount = null) THEN 
```

到

```
ELSIF (varIsProblemAccount = 0) THEN 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T09:28:59.877

您的触发器不会做任何事情来阻止 INSERT - RETURN 只是过早地退出触发器主体。

如果要阻止 INSERT，则应引发异常：

```
IF (varIsProblemAccount >= 1) THEN      
    raise_application_error(-20001, 'Existing account found');
END; 
```

# c# - 如何以编程方式将 Word 2007 文档保存为 asp.net 中的 PDF 文档？

> ID：13525878
> 
> 赞同：0
> 
> 时间：2012-11-23T09:11:30.673
> 
> 标签：c#, asp.net, c#-4.0, ms-word, office-interop

在我的 Asp.net Web 应用程序中，我必须以编程方式将一个 docx 文件转换为 pdf 文件。我使用了 microsoft interoperability word package 并使用方法 saveAs() 方法。

这是我的 C# 代码...

```
var TheDocument = wdApp.Documents.Open("sample.docx"); //control stopped here...

TheDocument.ExportAsFixedFormat("sample.pdf", Microsoft.Office.Interop.Word.WdExportFormat.wdExportFormatPDF,
               OptimizeFor: Microsoft.Office.Interop.Word.WdExportOptimizeFor.wdExportOptimizeForOnScreen,
               BitmapMissingFonts: true, DocStructureTags: false);

((Microsoft.Office.Interop.Word._Document)TheDocument).Close(); 
```

但是在执行这一行时，`var TheDocument = wdApp.Documents.Open("sample.docx");`控件停在了这一行上，没有进一步的反应。浏览器符号好像正在加载，正在加载...

我不知道这里有什么问题......

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:13:48.320

检查此链接->[在 c# 中将 doc 转换为 pdf](https://stackoverflow.com/questions/4908819/convert-doc-to-pdf-in-c-sharp)

> 它使用 Microsoft.Office.Interop。

```
private Microsoft.Office.Interop.Word.ApplicationClass MSdoc;       

        //Use for the parameter whose type are not known or say Missing
        object Unknown = Type.Missing;

  private void word2PDF(object Source, object Target)
        {   //Creating the instance of Word Application          
       if (MSdoc == null)MSdoc = new Microsoft.Office.Interop.Word.ApplicationClass();

            try
            {  
                MSdoc.Visible = false;               
                MSdoc.Documents.Open(ref Source, ref Unknown,
                     ref Unknown, ref Unknown, ref Unknown,
                     ref Unknown, ref Unknown, ref Unknown,
                     ref Unknown, ref Unknown, ref Unknown,
                     ref Unknown, ref Unknown, ref Unknown, ref Unknown, ref Unknown);
                MSdoc.Application.Visible = false;
                MSdoc.WindowState = Microsoft.Office.Interop.Word.WdWindowState.wdWindowStateMinimize;               

                object format = Microsoft.Office.Interop.Word.WdSaveFormat.wdFormatPDF;

                MSdoc.ActiveDocument.SaveAs(ref Target, ref format,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown, ref Unknown,
                        ref Unknown, ref Unknown, ref Unknown,
                       ref Unknown, ref Unknown);
            }
            catch (Exception e)
            {
                MessageBox.Show(e.Message);
            }
            finally
            {
                if (MSdoc != null)
                {
                    MSdoc.Documents.Close(ref Unknown, ref Unknown, ref Unknown);
                    //WordDoc.Application.Quit(ref Unknown, ref Unknown, ref Unknown);
                }               
                // for closing the application
                WordDoc.Quit(ref Unknown, ref Unknown, ref Unknown);
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-18T11:09:26.983

```
Object missing = Type.Missing;

Globals.ThisAddIn.Application.ActiveDocument.ExportAsFixedFormat(@"D:\MyPDF.pdf", 

Microsoft.Office.Interop.Word.WdExportFormat.wdExportFormatPDF, false, 

Microsoft.Office.Interop.Word.WdExportOptimizeFor.wdExportOptimizeForPrint, 

Microsoft.Office.Interop.Word.WdExportRange.wdExportAllDocument, 1, 1, 

Microsoft.Office.Interop.Word.WdExportItem.wdExportDocumentWithMarkup, true, true, 

Microsoft.Office.Interop.Word.WdExportCreateBookmarks.wdExportCreateNoBookmarks, 

true, true, false,ref missing); 
```

# c++ - 在 Visual 2012 中访问 std::tr1::smart_ptr 而不是 std::smart_ptr

> ID：13525880
> 
> 赞同：1
> 
> 时间：2012-11-23T09:11:39.403
> 
> 标签：c++, visual-studio-2010, c++11, visual-studio-2012, smart-pointers

我们有一个项目同时使用了 Visual Studio 2010 和 Visual Studio 2012。在 2010 项目中，我们使用 tr1 的智能指针实现。此代码具有多个依赖项，因此无法轻松更改。然后将其链接到 2012 解决方案，在该解决方案中我们尝试使用 std:smart_ptr。

在编译时，这会失败，因为 smart_ptr 的两个版本并不相同，这很公平，即使我最初认为它们会如此。

在网上阅读类似的问题，一个解决方案是使用 boost 将正确的东西添加到 tr1 命名空间，但我们不希望这是一个额外的依赖，而不是最后的手段。

有没有办法在 Visual Studio 2012 中访问 tr1 的智能指针，而不是简单的 std:: 版本，以便它编译时不会出错？我曾尝试在 Visual Studio 2012 中使用 std::tr1::shared_ptr 但这不起作用，是否有标题或我需要包含的内容。我们已经包含了`<memory>`标头，并且显然每个代码库都是相互独立编译的。任何帮助表示赞赏

PS 将平台版本更改为 100 而不是 110 也是不可能的。同样，还有更多的依赖关系阻止了这种情况的发生。

# c# - 命名空间和类的命名标准？

> ID：13525881
> 
> 赞同：2
> 
> 时间：2012-11-23T09:11:40.627
> 
> 标签：c#, .net, naming-conventions

在以下情况下：

我有一组作为应用程序插件的项目。每个插件有 3 个命名空间：

1.  常见的
2.  即时的
3.  历史

在每个命名空间内都有一个名为 Settings 的类。

**第一个问题**：你会如何命名这个类，只是 Settings 或 CommonSettings、RealTimeSettings、HistoricalSettings？

在 Common 命名空间内有一个名为 DecisionEngine 的类。该类使用了另外 3 个类，DecisionEngineData、DecisionEngineState 和 DecisionEngineDataSource。

**第二个问题**：你会留下他们的名字还是你会试图找到一种方法来避免在所有类上都有 DecisionEngine 前缀？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T09:15:21.040

我认为将名称留得长而清晰是一个好习惯，所以我会留下 CommonSettings、RealTimeSettings、HistoricalSettings、DecisionEngineData、DecisionEngineState 和 DecisionEngineDataSource。

C# 的问题是命名空间通常不是代码的一部分。通常你只是把`using RealTime`你的文件放在上面，然后`RealTimeSettings`在你的代码中使用。如果类的名称是`Settings`，则代码的可读性会降低，因为您必须将鼠标悬停在类名上才能了解它属于哪个命名空间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-23T09:15:05.310

我经常为这些命名问题而苦恼。然而，在实际使用中，我通常发现较长的类名实际上使实际代码更具可读性。当您最终得到许多仅称为“设置”的类时，您必须不断检查它属于哪个命名空间 - 或者您必须完全限定名称。

所以我认为你应该保留你已经在使用的名字。

但实际上，这是一个普世的问题。:)

# python - 任务列表输出

> ID：13525882
> 
> 赞同：3
> 
> 时间：2012-11-23T09:11:43.843
> 
> 标签：python, python-3.x, tasklist

我对 python 很陌生，但我无法找到我认为应该是一个相对简单的问题的答案。

我正在尝试使用`tasklist`，我想知道我可以用它的输出做什么（比如将它设置为变量、数组等）。

我正在使用`Python 3.3`，但在查找`3.3`.

代码比较简单：

```
import os
os.system("tasklist")
input() 
```

这会打印任务列表，但我无法从该打印中获取数据到变量中。我假设它与 Python 无关，与任务列表无关。

最终，我希望制作任务列表条目的矩阵，这样我就可以搜索一个进程并获取相应的数据。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-07T13:48:54.827

根据其他一些答案...

```
import subprocess
import re    
def get_processes_running():
    """ Takes tasklist output and parses the table into a dict

    Example:
        C:\Users\User>tasklist

        Image Name                     PID Session Name        Session#    Mem Usage
        ========================= ======== ================ =========== ============
        System Idle Process              0 Services                   0         24 K
        System                           4 Services                   0     43,064 K
        smss.exe                       400 Services                   0      1,548 K
        csrss.exe                      564 Services                   0      6,144 K
        wininit.exe                    652 Services                   0      5,044 K
        csrss.exe                      676 Console                    1      9,392 K
        services.exe                   708 Services                   0     17,944 K
        lsass.exe                      728 Services                   0     16,780 K
        winlogon.exe                   760 Console                    1      8,264 K

        # ... etc... 

    Returns: 
        [   {'image': 'System Idle Process', 'mem_usage': '24 K', 'pid': '0', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'System', 'mem_usage': '43,064 K', 'pid': '4', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'smss.exe', 'mem_usage': '1,548 K', 'pid': '400', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'csrss.exe', 'mem_usage': '6,144 K', 'pid': '564', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'wininit.exe', 'mem_usage': '5,044 K', 'pid': '652', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'csrss.exe', 'mem_usage': '9,392 K', 'pid': '676', 'session_name': 'Console', 'session_num': '1'}, 
            {'image': 'services.exe', 'mem_usage': '17,892 K', 'pid': '708', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'lsass.exe', 'mem_usage': '16,764 K', 'pid': '728', 'session_name': 'Services', 'session_num': '0'}, 
            {'image': 'winlogon.exe', 'mem_usage': '8,264 K', 'pid': '760', 'session_name': 'Console', 'session_num': '1'},
            #... etc... 
        ]

    """
    tasks = subprocess.check_output(['tasklist']).split("\r\n")
    p = []
    for task in tasks:
        m = re.match("(.+?) +(\d+) (.+?) +(\d+) +(\d+.* K).*",task)
        if m is not None:
            p.append({"image":m.group(1),
                        "pid":m.group(2),
                        "session_name":m.group(3),
                        "session_num":m.group(4),
                        "mem_usage":m.group(5)
                        })
    return p 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-23T09:36:21.753

`subprocess.check_output`是最简单的：

（注意我在[`ps`](http://www.linfo.org/ps.html)这里使用过，因为我对`tasklist`您正在谈论的命令没有经验-[尽管对窗口系统有参考...](https://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/tasklist.mspx?mfr=true)）

```
>>> import subprocess
>>> res = subprocess.check_output(['ps'])
>>> res
'  PID TTY          TIME CMD\n 1749 ?        00:00:00 gnome-keyring-d\n 1760 ?        00:00:00 gnome-session\n 1797 ?        00:00:00 ssh-agent\n 1800 ?        00:00:00 dbus-launch\n 1801 ?        00:00:04 dbus-daemon\n 1814 ?        00:00:09 gnome-settings-\n 1819 ?        00:00:00 gvfsd\n 1821 ?        00:00:00 gvfs-fuse-daemo\n 1829 ?        00:11:51 compiz\n 1832 ?        00:00:00 gconfd-2\n 1838 ?        00:00:29 syndaemon\n 1843 ?        00:34:44 pulseaudio\n 1847 ?        00:00:00 gconf-helper\n 1849 ?        00:00:00 gvfsd-metadata\n 1851 ?        00:00:00 bluetooth-apple\n 1852 ?        00:00:04 nautilus\n 1853 ?        00:00:01 nm-applet\n 1855 ?        00:00:00 polkit-gnome-au\n 1856 ?        00:00:00 gnome-fallback-\n 1873' 
```

然后你必须做一些事情才能`res`使用它......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-23T09:37:02.573

`os.system`不是通常的 Python 命令。相反，它“调用”到更广泛的操作系统：`os.system(foo)`与进入命令行并键入`foo`. 这是从 Python 脚本执行任何程序的一种快速而肮脏的方式。

当然，有一些非快速和肮脏的方式来做到这一点。它们位于`subprocess`模块中，允许您启动任意子进程（其他程序）并与之通信，向其发送数据并接收其输出。

里面有一个快捷功能，它会调用一个外部程序，检查它是否成功，然后返回输出。该功能是[`subprocess.check_output`](http://docs.python.org/2/library/subprocess.html#subprocess.check_output)：

```
In[20]: [line.split() for line in subprocess.check_output("tasklist").splitlines()]
Out[20]: 
[[],
 ['Image', 'Name', 'PID', 'Session', 'Name', 'Session#', 'Mem', 'Usage'],
 ['=========================',
  '========',
  '================',
  '===========',
  '============'],
 ['System', 'Idle', 'Process', '0', 'Services', '0', '24', 'K'],
 ['System', '4', 'Services', '0', '308', 'K'],
 ['smss.exe', '352', 'Services', '0', '1,628', 'K'],
 ['csrss.exe', '528', 'Services', '0', '7,088', 'K'],
 ['wininit.exe', '592', 'Services', '0', '6,928', 'K'],
 ['csrss.exe', '600', 'Console', '1', '79,396', 'K'],
 ['services.exe', '652', 'Services', '0', '19,320', 'K'],
 ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-01T17:38:27.427

这是最终的解决方案。我试图找到一种方法来检查进程是否已经在运行，但获取进程列表非常耗时。所以我阅读了文档`tasklist`并获得了`/NH`“无标题”和`/FI`过滤的含义。如果您正在寻找所有进程，请使用`cmd = 'tasklist /NH'`.

```
def get_running_processes(look_for):
    # edited from https://stackoverflow.com/a/22914414/7732434
    cmd = f'tasklist /NH /FI "IMAGENAME eq {look_for}"'
    p = Popen(cmd, shell=True, stdout=PIPE, stdin=DEVNULL, stderr=DEVNULL, text=True)
    task = p.stdout.readline()
    while task != '':
        task = p.stdout.readline().strip()
        m = re.match(r'(.+?) +(\d+) (.+?) +(\d+) +(\d+.* K).*', task)
        if m is not None:
            process = {'name': m.group(1), 'pid': m.group(2), 'session_name': m.group(3),
                       'session_num': m.group(4), 'mem_usage': m.group(5)}
            yield process

# sample usage
for process in get_running_processes():
    pass 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-01T03:32:38.037

尝试这个：

```
subprocess.check_output('tasklist /v /fo csv').decode(support_code_page).split('\n')[1:-1] 
```

示例代码：

```
def show_task_list():
    list_task = []
    for support_code_page in ('utf-8', 'cp950', 'cp932'):
        try:
            list_task = subprocess.check_output('tasklist /v /fo csv').decode(support_code_page).split('\n')[1:-1]
        except:
            continue
    if len(list_task) == 0:
        return None
    for string_proc in list_task:
        try:
            list_proc = eval('[' + string_proc + ']')
        except:
            continue
        # exe_name = list_proc[8]
        # print(exe_name)
        print([info for info in list_proc])

show_task_list() 
```

输出：

```
['System Idle Process', '0', 'Services', '0', '24 K', 'Unknown', 'NT AUTHORITY\\SYSTEM', '18:17:17', 'Not applicable']
['System', '4', 'Services', '0', '6,436 K', 'Unknown', '', '0:08:55', 'Not applicable']
... 
```

**更多的**

例如，您可以添加一些条件。

```
info = subprocess.STARTUPINFO()
info.dwFlags |= subprocess.STARTF_USESHOWWINDOW
subprocess.check_output('tasklist /v /fo csv', startupinfo=info) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-13T14:01:51.123

蟒蛇 3

```
# -*- coding: utf-8 -*-

import re

from subprocess import Popen, PIPE, check_output

def get_processes_running():
    """
    Takes tasklist output and parses the table into a dict
    """
    tasks = check_output(['tasklist']).decode('cp866', 'ignore').split("\r\n")
    p = []
    for task in tasks:
        m = re.match(b'(.*?)\\s+(\\d+)\\s+(\\w+)\\s+(\\w+)\\s+(.*?)\\s.*', task.encode())
        if m is not None:
            p.append({"image":m.group(1).decode(),
                        "pid":int(m.group(2).decode()),
                        "session_name":m.group(3).decode(),
                        "session_num":int(m.group(4).decode()),
                        "mem_usage":int(m.group(5).decode('ascii', 'ignore'))
                        })
    return( p)

def test():
    print(*[line.decode('cp866', 'ignore') for line in Popen('tasklist', stdout=PIPE).stdout.readlines()])

    lstp = get_processes_running()
    for p in lstp:
        print(p)
    return

if __name__ == '__main__':
    test() 
```

# javascript - 在android中打开一个新窗口（弹出）javascript

> ID：13525885
> 
> 赞同：1
> 
> 时间：2012-11-23T09:11:53.960
> 
> 标签：javascript, android, popup

我正在尝试开发一个移动应用程序，我想以弹出的形式打开一个页面

我使用这个代码：

```
$('#header-left-container').prepend(results.rows.item(i).LibelleTypeTravail +"" +
                    "<br>" +
                    "<a  href='#null' onclick='open_infos()'  > <img src='../js/images/add.png' > </a>" +
                    "<textarea rows='6'  cols='60'  name='"+results.rows.item(i).LibelleTypeTravail+"'> </textarea><br><br>" );

function open_infos()
 {
 window.open('../prestation_html/list_rubrique.html','nom_de_ma_popup','menubar=no, scrollbars=no, top=100, left=100, width=300, height=200');
 } 
```

但它不起作用，它使模拟器在灰色页面上崩溃

# static-libraries - gnu ld 是链接整个目标文件还是仅链接所需的功能？

> ID：13525889
> 
> 赞同：4
> 
> 时间：2012-11-23T09:11:59.360
> 
> 标签：static-libraries, ld, avr-gcc

我们有一个库和一个可执行文件，将*静态*链接到该库。我们希望最小化最终可执行文件的程序空间。

根据 avr-libc 的文档：

> [函数所在的整个对象模块中的链接器链接](http://www.nongnu.org/avr-libc/user-manual/library.html)

另一方面，我的同事们一致认为，在某些时候，链接器会丢弃任何未使用的函数。

那么谁是正确的还是我误解了什么？整个 gcc 的答案是一致的还是我们在这里只谈论 avr 端口？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T09:18:16.347

除非您告诉它，否则它不会执行死代码剥离。为此，您需要使用以下命令编译所有内容：

```
-fdata-sections -ffunction-sections
```

以标记所有数据和功能。与 GCC 链接时，您需要通过：

```
-Wl,--gc-部分
```

为了垃圾收集所有未使用的部分。

# wpf - WPF 中具有许多元素的组合框性能

> ID：13525890
> 
> 赞同：2
> 
> 时间：2012-11-23T09:12:08.520
> 
> 标签：wpf, combobox

我创建了一个包含大约 1500 个元素的 ComboBox。这个 ComboBox 第一次非常慢，甚至用存储过程填充集合我该怎么办？

这是代码`

```
<ComboBox  Name="cbMember" TextSearch.TextPath="MemberFullName" VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling" IsEditable="True" Height="23" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Margin="5,0,0,0" ItemsSource="{Binding MemberCollection}" SelectedItem="{Binding Path=SelectedSearchMember,Mode=TwoWay,UpdateSourceTrigger=LostFocus}"  KeyDown="cbMember_KeyDown"  DropDownClosed="cbMember_DropDownClosed"  SelectionChanged="cbMember_SelectionChanged">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding MemberFullName}"  VerticalAlignment="Center"  />
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                        <ComboBox.ItemsPanel>
                            <ItemsPanelTemplate>
                                <VirtualizingStackPanel />
                            </ItemsPanelTemplate>
                        </ComboBox.ItemsPanel>
                    </ComboBox>` 
```

并填写可观察的集合代码在这里

```
 MemberCollection = new ObservableCollection<PROC_MembersList_Result>(_context.PROC_MembersCollectionList().Where(c => c.IsHide != null && (bool)c.IsHide == true)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:33:34.450

需要知道是远程调用需要很长时间，还是 WPF 需要一段时间才能呈现所有元素（这意味着虚拟化不起作用）。

首先，在构造函数中移动远程调用：

```
public MyViewModel()
{
    Task.Factory.StartNew(() => 
    {
       var members = new ObservableCollection<PROC_MembersList_Result>(
           _context.PROC_MembersCollectionList()
                    .Where(c => c.IsHide != null && (bool)c.IsHide == true));

       Application.Current.Dispatcher.Invoke(new Action(() => 
       {
           MemberCollection = members;
       }));
    }
} 
```

它的作用是在单独的线程中进行远程调用，以免冻结您的应用程序，然后它使用调度程序`MemberCollection`在 UI 线程上进行设置（否则您会收到跨线程异常）。

对于第二个问题，google 一下，正确的虚拟化问题可能很难解决。

# php - PHP中的数组组合

> ID：13525893
> 
> 赞同：11
> 
> 时间：2012-11-23T09:12:23.187
> 
> 标签：php, arrays, multidimensional-array, combinatorics

考虑以下数组：

```
$a = [['x'], ['y', 'z', 'w'], ['m', 'n']]; 
```

如何从中生成以下数组：

```
$output=[
[[x][y][m]],
[[x][z][n]],
[[x][w][m]],
[[x][y][n]],
[[x][z][m]],
[[x][w][n]],
]; 
```

我正在寻找比我的更有效的代码。（我当前的代码在下面作为答案提供）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T10:05:29.677

开始了。假设：

```
$array = [['x'], ['y', 'z', 'w'], ['m', 'n']]; 
```

**编辑：**经过一些性能测试，我得出结论，我之前发布的解决方案比 OP 的代码慢 300%，这肯定是由于嵌套函数调用堆栈。因此，这是 OP 方法的改进版本，**速度提高了 40% 左右**：

```
$count     = array_map('count', $array);
$finalSize = array_product($count);
$arraySize = count($array);
$output    = array_fill(0, $finalSize, []);
$i = 0;
$c = 0;
for (; $i < $finalSize; $i++) {
    for ($c = 0; $c < $arraySize; $c++) {
        $output[$i][] = $array[$c][$i % $count[$c]];
    }
} 
```

它基本上是相同的代码，但我尽可能使用本机函数，并且还取出了循环中一些不必在每次迭代中执行的功能。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-23T10:24:05.780

“更高效的代码”是一件很主观的事情.... ;-)
您可以使用迭代器而不是数组，因此不必将完整的结果存储在内存中。另一方面，这种解决方案很可能要慢得多。

```
<?php
class PermIterator implements Iterator {
    protected $mi;
    protected $finalSize, $pos;

    public function __construct(array $src) {
        $mi = new MultipleIterator;
        $finalSize = 1;
        foreach ( $src as $a ) {
            $finalSize *= count($a);
            $mi->attachIterator( new InfiniteIterator(new ArrayIterator($a)) );
        }
        $this->mi = $mi;
        $this->finalSize = $finalSize;
        $this->pos = 0;
    }

    public function current() { return $this->mi->current(); }
    public function key() { return $this->mi->key(); }
    public function next() { $this->pos+=1; $this->mi->next(); }
    public function rewind() { $this->pos = 0; $this->mi->rewind(); }
    public function valid() { return ($this->pos < $this->finalSize) && $this->mi->valid(); }
}

$src = $a = [['x'], ['y', 'z', 'w'], ['m', 'n']];
$pi = new PermIterator($src); // <- you can pass this one around instead of the array
foreach ( $pi as $e ) {
    echo join(', ', $e), "\n";
} 
```

印刷

```
x, y, m
x, z, n
x, w, m
x, y, n
x, z, m
x, w, n 
```

或者作为一个数组（对象），您可以通过整数偏移量访问每个元素

```
<?php
class PermArray implements  ArrayAccess {
    // todo: constraints and error handling - it's just an example
    protected $source;
    protected $size;

    public function __construct($source) {
        $this->source = $source;
        $this->size = 1;
        foreach ( $source as $a ) {
            $this->size *= count($a);
        }
    }
    public function count() { return $this->size; }

    public function offsetExists($offset) { return is_int($offset) && $offset < $this->size; }
    public function offsetGet($offset) {
        $rv = array();
        for ($c = 0; $c < count($this->source); $c++) {
          $index = ($offset + $this->size) % count($this->source[$c]);
          $rv[] = $this->source[$c][$index];
        }
        return $rv;
    }

    public function offsetSet($offset, $value ){}
    public function offsetUnset($offset){}
}

$pa = new PermArray( [['x'], ['y', 'z', 'w'], ['m', 'n']] );
$cnt = $pa->count();
for($i=0; $i<$cnt; $i++) {
    echo join(', ', $pa[$i]), "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:13:32.030

```
<?php
function array_permutation(array $a)
{
    $count = array_map('count', $a);
    $finalSize = 1;

    foreach ($count as $val) {
        $finalSize *= $val;
    }

    $output = [];

    for ($i = 0; $i < $finalSize; $i++) {
        $output[$i] = [];
        for ($c = 0; $c < count($a); $c++) {
            $index = ($i + $finalSize) % $count[$c];
            array_push($output[$i], $a[$c][$index]);
        }
    }
    return $output;
}

$a = [['x'], ['y', 'z', 'w'], ['m', 'n']];
$output= array_permutation($a); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-29T17:32:46.117

如果有两个长度相同的数组，似乎所有答案（包括接受的答案）都不起作用。我亲自测试了接受的答案，发现情况确实如此，从其他两个的评论来看，他们有同样的问题。

我最近不得不实现这个算法，所以我会发布我的解决方案。此解决方案旨在与关联数组一起使用，并且还支持将在输出中组合在一起且不会相互排列的列集；如果任何列包含相关信息，这将很有用。如果您不需要这些功能，那么修改此算法以支持您的需求应该是相当简单的。

```
// the input column sets to be permuted
$column_sets = [
    [ //set 1
        ['Column 1' => 'c1v1']
    ],
    [ //set 2
        ['column 2' => 'c2v1', 'Column 3' => 'c3v1'],
        ['column 2' => 'c2v2', 'Column 3' => 'c3v2'],
    ],
    [ //set 3
        ['Column 4' => 'c4v1', 'Column 5' => 'c5v1'],
        ['Column 4' => 'c4v2', 'Column 5' => 'c5v2'],
    ],
    [ //set 4
        ['Column 6' => 'c6v1', 'Column 7' => 'c7v1'],
        ['Column 6' => 'c6v2', 'Column 7' => 'c7v2'],
        ['Column 6' => 'c6v3', 'Column 7' => 'c7v3'],
    ],
    [ //set 5
        ['Column 8' => 'c8v1', 'Column 9' => 'c9v1'],
        ['Column 8' => 'c8v2', 'Column 9' => 'c9v2'],
        ['Column 8' => 'c8v3', 'Column 9' => 'c9v3'],
    ],
];

// copy the first set into the output to start
$output_rows = $column_sets[0];

foreach ($column_sets as $column_set) {
    // save the current state of the rows for use within this loop
    $current_output = $output_rows;

    // calculate the number of permutations necessary to combine the output rows with the current column set
    $permutations = count($output_rows) * count($column_set);
    for ($permutation=0; $permutation < $permutations; $permutation++) {

        // if the current permutation index is grater than the number of rows in the output,
        // then copy a row from the pre-permutation output rows, repeating as necessary
        if ($permutation > count($output_rows) - 1) {
            $output_rows[] = $current_output[$permutation % count($current_output)];
        }

        // copy the columns from the column set
        foreach ($column_set[0] as $key => $value) {
            $output_rows[$permutation][$key] = $column_set[intval($permutation / count($current_output)) % count($column_set)][$key];
        }
    }
}

echo "After Permutaion:\n";
echo implode("\t", array_keys($output_rows[0])) . PHP_EOL;
foreach ($output_rows as $row) {
    echo implode("\t", array_values($row)) . PHP_EOL;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2017-03-16T00:56:10.447

```
[x][y][z]
[x][z][y]
[y][x][z]
[y][z][x]
[z][x][y]
[z][y][x] 
```

我认为你的问题不是排列，而是组合，因为如果排列你的代码将输出上面写的内容，如果给定 {x,y,z} 的数组，排列的公式是 n!/(n-1)! 在这种情况下，它是 6。所以六个排列。

# windows - 在添加/删除程序窗口中更新版本号

> ID：13525895
> 
> 赞同：8
> 
> 时间：2012-11-23T09:12:36.163
> 
> 标签：windows, version, inno-setup

我们有一个由多个部分组成的应用程序：

1.  使用 Inno-Setup 构建的打印机驱动程序。
2.  自定义编写的 C# dll。
3.  一个 AutoIt 脚本，打包安装前两个。

打印机驱动程序列在 Windows 的“添加/删除”部分中，其中`[name]`和`[publisher]`字段`[installed on]`按预期显示。但`[size]`和`[version]`字段留空。

我们的客户希望我们更新该`[version]`字段。此信息存储在哪里（如何在 Windows 的“添加/删除”部分中更新或添加此信息）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T09:27:11.137

`[Setup]`该控件版本号下有几个属性：

```
VersionInfoVersion=
VersionInfoTextVersion=
AppVersion= 
```

该问题的重要字段是`AppVersion`指令，InnoSetup 将其写入`DisplayVersion`注册表项。

可以在[此处](https://github.com/lextm/ActionListWinForms/blob/master/setup.iss)找到完整的示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T09:20:22.443

检查此部分

```
HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Uninstall 
```

您可以通过它的 GUID 选择您的应用程序，并且您可以操作它的数据有 DisplayVersion 键来显示版本和实际版本键用于显示用途以外，还有一个大小字段，您可以在那里添加您的程序大小

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-23T09:19:40.977

这是此注册表项中的“DisplayVersion”值：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\ApplicationName 
```

*'ApplicationName' 显然被您的实际应用程序名称替换*

*如果您没有配置，*ApplicationName也可能是一个 GUID。**

 *Inno-Setup 应该有能力改变这一点。*

# jquery - 提高 jquery 插件性能

> ID：13525897
> 
> 赞同：1
> 
> 时间：2012-11-23T09:12:44.443
> 
> 标签：jquery, jquery-plugins, drop-down-menu

我正在编写一个插件，用我用 html/css 制作的另一个插件替换原来的插件，简而言之，一个选择框。

我有性能问题，我承认我的代码相当繁重。首先，我获取每个选择的 ID，然后在 HTML 代码之后添加一些 CSS 参数，例如宽度、位置...

```
$(this).after("<div class="selectbox" s-id='"+$(this).attr("id")+"'> the code of the select </div>"); 
```

然后我隐藏了选择，这里是我认为很重的部分，我采取了所有选项，我这样做了

```
var selectbox=$("div[s-id="+selectID+"]"); //This is the div previously added after.

//each option of the select will be converted into a div
$.each($(this).find("option"), function(i) {
    var valor = $(this).val(),
        texto = $(this).text();

    if (i == 0) 
        selectbox.find(".class_valor").text(texto);//The first option to be shown

    //Then I add a li to my drop
    selectbox.find("ul").append('<li  data-value="'+valor+'">'+texto+'</li>');
}); 
```

好吧，现在，我不知道这是否是将事件添加到打开下拉列表和单击选项的触发器的最佳方法，这不在选择框功能内，它在`(function($){`

这是代码： [http ://codepen.io/anon/pen/kcpxl](http://codepen.io/anon/pen/kcpxl)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:03:21.517

小而简单的改进，缓存 $(this) 并最小化 DOM 操作

```
var selectbox=$("div[s-id="+selectID+"]"); //This is the div previously added after.

    //each option of the select will be converted into a div
    $.each($(this).find("option"), function(i) {
        var $this = $(this), 
            valor = $this.val(),
            texto = $this.text(), 
            liElems = '';

        if (i == 0) 
            selectbox.find(".class_valor").text(texto);//The first option to be shown

        //Then I add a li to my drop
        liElems += '<li  data-value="'+valor+'">'+texto+'</li>';
    });

    selectbox.find("ul").append(liElems); 
```

# css - 正则表达式：用 BB 代码替换内联 CSS

> ID：13525900
> 
> 赞同：2
> 
> 时间：2012-11-23T09:13:13.713
> 
> 标签：css, regex, inline, bbcode

我必须用 BB 代码替换文本中的所有 HTML 标记，并且我正在努力替换内联 CSS 样式元素。

HTML：

```
<span style="font-family: arial;">Arial</span>
<span style="font-size: 7px;">small text</span>
<span style="color: skyblue;">Blue Text</span>
<div align="center">centered text</div> 
```

应替换为以下内容：BB 代码：

```
[FONT=arial]Arial[/FONT]
[SIZE=7]small text[/SIZE]
[COLOR=skyblue]Blue Text[/COLOR]
[CENTER]centered text[/CENTER] 
```

而字体系列、颜色代码和大小值可能不同。

非工作起点：

```
$text = preg_replace('#<span style="color: (.*?);">(.*?)</span>#siU', '[color=$1]$2[/color]', $text); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:19:51.970

怎么样

```
$text = preg_replace('/<span style="color: (.*?);">(.*?)<\/span>/siU', '[color=$1]$2[/color]', $text); 
```

我刚刚替换了`#`它`/`，它对我有用。
至于其他替补：

```
/<span style="font-size: (.*?)px;">(.*?)<\/span>/
[size=$1]$2[/size]

/<span style="font-family: (.*?);">(.*?)<\/span>/
[font=$1]$2[/font]

/<div align="(.*?)">(.*?)<\/div>/
[$1]$2[/$1] 
```

**更新**
摆弄它：[phpfiddle.org/main/code/zqu-bgs](http://phpfiddle.org/main/code/zqu-bgs)
（结束转义`/`结束标签）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:30:00.520

试试这个：

```
$str1 = '<span style="font-family: arial;">Arial</span>'; 
$str2 = '<span style="font-size: 7px;">small text</span>';
$str3 = '<span style="color: skyblue;">Blue Text</span>';

$reg_exp=  '/<span\s*style=\"\s*(.*?):\s*(.*?)\s*;\s*\">\s*(.*?)\s*<\/span>/';
$reg_exp_rep = '[$1=$2]$3[/$1]';

$text=preg_replace($reg_exp,$reg_exp_rep, $str1);
echo htmlspecialchars($str1).' <=> '.$text.'<br />';
$text=preg_replace($reg_exp,$reg_exp_rep, $str2);
echo htmlspecialchars($str2).' <=> '.$text.'<br />';
$text=preg_replace($reg_exp,$reg_exp_rep, $str3);
echo htmlspecialchars($str3).' <=> '.$text.'<br />'; 
```

结果：

```
<span style="font-family: arial;">Arial</span> <=> [font-family=arial]Arial[/font-family]
<span style="font-size: 7px;">small text</span> <=> [font-size=7px]small text[/font-size]
<span style="color: skyblue;">Blue Text</span> <=> [color=skyblue]Blue Text[/color] 
```

这通常适用于跨度标签。如果你想要更多不同的标签识别或更具体的东西，你必须定义它。

--

编辑：更具体的东西，你要求的。

```
unset($str1,$str2,$str3,$str4,$str5,$str6,$str7,$reg_exp);

$str1 = '
    <span style="font-family: arial;">Arial</span> 
    <span style="font-size: 7px;">small text</span>
    <span style="color: skyblue;">Blue Text</span>
    <div align="center">centered text</div>';

$reg_exp[0] =  '/<span\s*style=\"\s*(.*?):\s*(.*?)\s*;\s*\">\s*(.*?)\s*<\/span>/';
$reg_exp_rep[0] = '[$1=$2]$3[/$1]';
$reg_exp[1] =  '/\[font-family(.*?)\/font-family\]/';
$reg_exp_rep[1] = '[FONT$1/FONT]';
$reg_exp[2]=  '/\[font-size(.*?)\/font-size\]/';
$reg_exp_rep[2] = '[SIZE$1/SIZE]';
$reg_exp[3] =  '/\[color(.*?)\/color\]/';
$reg_exp_rep[3] = '[COLOR$1/COLOR]';
$reg_exp[4] =  '/<div\s*align=\"\s*center\s*"\s*\>\s*(.*?)\s*<\/div>/';
$reg_exp_rep[4]= '[CENTER]$1[/CENTER]';

$text=$str1;
foreach ($reg_exp as $ii => $exp) {
    $text=preg_replace($exp,$reg_exp_rep[$ii], $text);
}
    echo htmlspecialchars($str1).' <=> '.$text.'<br />'; 
```

结果：

```
<span style="font-family: arial;">Arial</span> <span style="font-size: 7px;">small text</span> <span style="color: skyblue;">Blue Text</span> <div align="center">centered text</div> <=> 
[FONT=arial]Arial[/FONT] [SIZE=7px]small text[/SIZE] [COLOR=skyblue]Blue Text[/COLOR] [CENTER]centered text[/CENTER] 
```

# c# - 一个解决方案中的多个 Azure 云服务

> ID：13525909
> 
> 赞同：5
> 
> 时间：2012-11-23T09:13:53.037
> 
> 标签：c#, asp.net, azure, visual-studio-2012

我在 Azure 上运行了 3 个 Web 项目，目前所有站点都在一个实例中，这对于降低成本非常有用，但当其中一个 Web 项目的需求达到峰值时会减慢其他服务的速度/使其停止运行时，效果就不那么好了。

其中 2 个站点位于同一个域（一个具有不同端口）上，一个位于子域上。站点的伟大之处在于您可以使用主机名来区分在同一端口上运行的站点。如果子域站点被引用为 Web 角色，它将需要与其他两个 Web 角色不同的端口——这根本不是我想要的！

问题是虽然我可以使用两个云服务，但你不能在一个解决方案中同时调试它们。将它们放在两个解决方案中可以缓解问题，但它们共享一个经常更改的类库，将其放在一个单独的 Web 角色解决方案中，根据我的经验，调试起来非常棘手。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T12:51:13.540

这里真正的问题是什么？

首先，我没有看到将所有站点都放在一个 WebRole 中的问题。当一个人达到顶峰时 - 只是扩大规模。是的，您将扩展所有站点，但这只是一个优势。Windows Azure 负载均衡器使用 RoundRobin 算法，保证所有请求在所有实例之间均匀发送。我再说一遍——当你看到峰值时，只需向外扩展，不用担心。毕竟，这就是 Azure 所代表的。对于成本来说，这并不重要，因为无论如何你都会扩大规模。无论是每个 Web 角色一个站点，还是每个 Web 角色 10 个站点，规模都是规模，并且花费相同的资金。

至于其他的担心。我一直在处理多项目解决方案。而且我从未见过多个项目使用的公共库存在问题。尤其是当一切都在（源）控制之下时。Visual Studio 具有“添加现有项目”的简洁功能（当您右键单击解决方案时）：

![添加现有项目](../Images/eaaf333aa240cdb208057e82aa579949.png)

因此，您的通用类库只是在许多解决方案中使用的单个项目，并在文件系统的单个位置进行编辑。

作为底线，我要再说一遍 - 如果您唯一的烦恼是当您在高峰期扩展站点时，您也会扩展其他站点，只是不要！而且，如果您不想在高峰期进行扩展，并让网站宕机 - 只需不要费心使用 Azure。

# sql-server - 尽管有打开的连接，但立即删除数据库

> ID：13525910
> 
> 赞同：0
> 
> 时间：2012-11-23T09:13:53.540
> 
> 标签：sql-server, tsql, ssms

我有一个具有现有连接的实时数据库。无论任何打开的连接如何，我都想删除此数据库。

我使用 SQL Server 管理工作室。

什么是坏方法：

*   `detach`命令然后删除物理文件？
*   `delete`命令？

我希望问题很清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:04:01.133

```
ALTER DATABASE [YourDbName]
SET SINGLE_USER WITH ROLLBACK IMMEDIATE
GO

DROP DATABASE [YourDbName]
GO 
```

拉吉

# spring - LoadBeanClassException

> ID：13525912
> 
> 赞同：1
> 
> 时间：2012-11-23T09:14:05.813
> 
> 标签：spring

我创建了简单的 spring MVC 控制器，当我尝试执行时出现错误。

错误信息：

**org.springframework.beans.factory.CannotLoadBeanCl assException：找不到在 ServletContext 资源 [/WEB-INF/springapp-servlet.xml] 中定义的名称为“Redirect.jsp”的 bean 的类 [SpringApp.web.java.HelloController]；嵌套异常是 java.lang.ClassNotFoundException: SpringApp.web.java.HelloController**

这是我的应用程序结构。

SpringApp

```
----Web Pages   
    ----META-INF    
    ----WEB-INF     
        ----springapp-servlet.xml
        ----web.xml
    ----Redirect.jsp    
    ----index1.jsp  
----Source Packages         
    ----java    
        ----HelloController.java

web.xml
--------

        <?xml version="1.0" encoding="UTF-8"?>
         <!--
    To change this template, choose Tools | Templates
    and open the template in the editor.
    -->

     <web-app version="2.4"
             xmlns="http://java.sun.com/xml/ns/j2ee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
             http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd" >

      <servlet>
        <servlet-name>springapp</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
      </servlet>

      <servlet-mapping>
        <servlet-name>springapp</servlet-name>
        <url-pattern>*.htm</url-pattern>
      </servlet-mapping>

      <welcome-file-list>
        <welcome-file>
          index1.jsp
        </welcome-file>
      </welcome-file-list>

    </web-app>

springapp-servlet.xml
----------------------

    <?xml version="1.0" encoding="UTF-8"?>
    <!--

    1\. This file will be used up by the DispatcherServlet and which contains the bean         definition
    2\. The file will be picked up by the specification in the WEB-INF/web.xml using         <servlet>spring</servlet>
    3\. hello controller is responsible for handling the request for the particular page     of     the website and known
    as the page controller.
-->

    <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

      <!-- the application context definition for the springapp DispatcherServlet -->

      <bean name="Redirect.jsp" class="SpringApp.web.java.HelloController"/>

    </beans>

index1.jsp
---------

        <%--
        Document   : index
        Created on : Nov 23, 2012, 11:55:53 AM
        Author     : gopc
    --%>

    <%@page contentType="text/html" pageEncoding="UTF-8"%>
    <!DOCTYPE html>
    <html>
        <head>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
            <title>JSP Page</title>
        </head>
        <body>
            <h1>Hello World!</h1>
        </body>
    </html>

Redirect.jsp
------------

<%--
    Document   : index
    Created on : Nov 23, 2012, 11:55:53 AM
    Author     : gopc
--%>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Hello Controller redirect</title>
    </head>
    <body>
        <h1>This is redirect from the HelloController!</h1>
    </body>
</html>

HelloController.java
-------------------
    /*
     * To change this template, choose Tools | Templates
     * and open the template in the editor.
     */
    package java;
    /**
     *
     * @author gopc
    */

    import org.springframework.web.servlet.mvc.Controller;
    import org.springframework.web.servlet.ModelAndView;

    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    import org.apache.commons.logging.Log;
    import org.apache.commons.logging.LogFactory;

    import java.io.IOException;

    public class HelloController implements Controller {

    protected final Log logger = LogFactory.getLog(getClass());

    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

        logger.info("Returning hello view");
        System.out.println("hi this handlerequest");

        return new ModelAndView("Redirect.jsp");
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:45:16.377

你说：

```
<bean name="Redirect.jsp" class="SpringApp.web.java.HelloController"/> 
```

这意味着 Spring 期望在包中找到您的控制器`SpringApp.web.java`。你已经把它放在包里了`java`。

`package`将控制器中的语句更改为`SpringApp.web.java`，并将源文件移动到适当的目录`SpringApp/web/java`。

另请注意，该包`java`是为 Java 平台保留的，因此无论如何您都不应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:48:28.607

你不能把你的类放在一个名为`java`. 这个包是为标准 JDK 类保留的。

如果你的类 HelloController 在包 foo 中，那么它的类名是`foo.HelloController`. 不是`SpringApp.web.foo.HelloController`。

将 bean 称为“Redirect.jsp”会引起很多混乱。为什么用 JSP 的名称调用控制器 bean？

坦率地说，您似乎没有掌握非常基本的 Java 概念，例如类和包。在玩 Spring 之前，我会先从基础开始，这是一个复杂的野兽。

# c# - Include方法的作用是什么

> ID：13525913
> 
> 赞同：3
> 
> 时间：2012-11-23T09:14:07.020
> 
> 标签：c#, linq-to-entities

我正在尝试为一个项目学习 LINQ。但是我对 Include 方法有点困惑。它是干什么用的？专辑变量的以下两次初始化有什么区别？

```
var album = storeDB.Albums.Include("Artist").ToList();
var album = storeDB.Albums.ToList(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T09:15:32.040

[Include](http://msdn.microsoft.com/en-us/library/bb738708(v=vs.100).aspx)是一种扩展方法，EF 使用它来启用实体的[急切加载](https://stackoverflow.com/questions/1299374/what-is-eager-loading)。

在第一种情况下，通过指定`Include("Artist")`，当您`Album`从集合中检索实体时`Albums`，您指示`LINQ`也检索关联的`Artist`实体（通常关联是通过数据库中的外键，尽管您也可以在模型中关联）。

在第二种情况下，当获取专辑时，您不会通过任何相关实体。

请注意，从 Entity Framework 4.1 及更高版本开始，有一种使用[包含](http://msdn.microsoft.com/en-us/library/gg696450(v=vs.103).aspx)lambda 的首选机制，因此字符串关联变为强类型，即：

```
var album = storeDB.Albums.Include(alb => alb.Artist).ToList(); 
```

请记住`System.Data.Entity`在使用 lambda 扩展时导入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:18:50.960

这两个语句用于不同的目的，第一个是使用 Eager loading，即一次加载属于您的实体的所有对象（而不是稍后再进行查询），

第二个给你结果，所以你可以把它保存在一个可枚举的迭代器中，而不是 IQueryable 对象，这是 Linq 更常见的类型

# php - PHP 获取 Facebook 用户名？

> ID：13525916
> 
> 赞同：0
> 
> 时间：2012-11-23T09:14:19.457
> 
> 标签：php, facebook

是否可以让一个 php 页面显示“发表评论，'%fullname'”而不必使用用户必须授予应用程序权限的方法，我可以用另一种更简单的方式来做到这一点（甚至可能不使用app 方法）在浏览页面时不会中断用户的体验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T09:18:53.423

对此有一个非常简单的答案：不。

未经授权，您无法获取用户的任何个人数据。但是有几个社交插件，您可能想尝试一下：[https ://developers.facebook.com/docs/plugins/](https://developers.facebook.com/docs/plugins/)

如果您知道用户 ID，则可以使用这种方式（或 Graph API）：

> [https://developers.facebook.com/docs/reference/plugins/fb:name/](https://developers.facebook.com/docs/reference/plugins/fb:name/)

但是要获取ID，仍然需要对用户进行授权。

# android - 当我尝试通过 HttpsUrlConnection 发送帖子时出现意外的 IOException

> ID：13525924
> 
> 赞同：1
> 
> 时间：2012-11-23T09:14:56.363
> 
> 标签：android, post, httpclient, ioexception, httpsurlconnection

我的 Android 代码一直在发送数据，它似乎一直在工作，直到抛出一个完全意外的 IOException，冻结一切。我不明白为什么我可以毫无问题地发送多个帖子请求，直到出现异常，几乎是随机的。这是我的代码：

```
public class HttpsClient {

private final static String TAG = "HttpsClient";

private final static String TOKEN_HEADER_KEY = "Token";

private final String urlString;

private SSLContext sslContext;

// application-specific HTTP header
private String TokenHeaderValue = null;

public HttpsClient(String host, String path) {
    // this.sslContext will be init'ed in open()
    this.urlString = "https://" + host + ":443/" + path;
}

public boolean open() {
    try {
        this.sslContext = SSLContext.getInstance("TLS");
        this.sslContext.init(null, null, new java.security.SecureRandom());
        return true;
    } catch (NoSuchAlgorithmException e) {
        Logger.e(TAG, "NoSuchAlgorithmException:");
    } catch (KeyManagementException e) {
        Logger.e(TAG, "KeyManagementException:");
    }

    return false;
}

public byte[] send(byte[] req) {

    Logger.d(TAG, "sending " + Utils.byteArrayToString(req) + " to " + this.urlString);

    URL url;
    try {
        url = new URL(this.urlString);
    } catch (MalformedURLException e) {
        Logger.e(TAG, "MalformedURLException:");
        return null;
    }
    HttpsURLConnection connection;
    try {
        connection = (HttpsURLConnection) url.openConnection();
    } catch (IOException e) {
        Logger.e(TAG, "send IOException 1 " + ((null == e.getMessage()) ? e.getMessage() : ""));
        e.printStackTrace();
        return null;
    }

    connection.setDoInput(true);
    connection.setDoOutput(true);
    connection.setRequestProperty("Connection", "close");
    try {
        connection.setRequestMethod("POST");

    } catch (ProtocolException ignored) { }
    connection.setSSLSocketFactory(this.sslContext.getSocketFactory());
    connection.setReadTimeout(3000);

    if ( this.TokenHeaderValue != null )
        connection.setRequestProperty(TOKEN_HEADER_KEY, this.TokenHeaderValue);

    {
        final Map<String, List<String>> requestProps = connection.getRequestProperties();
        Logger.d(TAG, requestProps.size() + " Request header(s):");
        for (Map.Entry<String, List<String>> entry : requestProps.entrySet())
            for (String value : entry.getValue())
                Logger.d(TAG, " " + entry.getKey() + ": <" + value + ">");
    }

    try {
        // open up the output stream of the connection 
        DataOutputStream output = new DataOutputStream(connection.getOutputStream()); 

        // write out the data 
        output.write(req, 0, req.length);
        output.flush();

        Logger.i(TAG, "Response Code: " + connection.getResponseCode());
        Logger.i(TAG, "Response Message: " + connection.getResponseMessage()); 
    } catch (SocketTimeoutException e) {
        Logger.e(TAG, "SocketTimeoutException:" + ((null == e.getMessage()) ? e.getMessage() : ""));
        return null;
    } catch (IOException e) { // FAILS HERE !!!!!!!
        Logger.e(TAG, "send IOException 2 " + ((null == e.getMessage()) ? e.getMessage() : ""));
        return null;
    }

    final Map<String, List<String>> responseHeaderFields = connection.getHeaderFields();
    Logger.d(TAG, responseHeaderFields.size() + " Response header(s):");
    for (Map.Entry<String, List<String>> entry : responseHeaderFields.entrySet()) {
        final String key = entry.getKey();
        if ( (null != key) && key.equals(TOKEN_HEADER_KEY) )
            this.TokenHeaderValue = entry.getValue().get(0);
        for (String value : entry.getValue())
            Logger.d(TAG, " " + key + ": <" + value + ">");
    }

    // read response
    ArrayList<Byte> response = new ArrayList<Byte>();

    try {
        DataInputStream input = new DataInputStream(connection.getInputStream()); 

        // read in each character until end-of-stream is detected
        for( int c = input.read(); c != -1; c = input.read() ) {
            response.add((byte) c);
        }
        Logger.w(TAG, "Https connection is " + connection);
        connection.disconnect();
        Logger.w(TAG, "Https connection is " + connection);
        input.close();

    } catch (IOException e) {
        Logger.e(TAG, "send IOException 3 " + ((null == e.getMessage()) ? e.getMessage() : ""));
        return null;
    }

    if ( 0 == response.size() ) {
        Logger.w(TAG, "response is null");

        return null;
    }

    // else

    byte[] result = new byte[response.size()];
    for (int i = 0; i < result.length; i++)
        result[i] = response.get(i).byteValue();

    Logger.i(TAG, "Response payload: " + Utils.byteArrayToString(result));

    return result;          
}
} 
```

我再说一遍：代码一直有效，直到多次发送后，然后由于 IO 异常而崩溃。此外，服务器很好，我的代码有问题。

这是整个错误堆栈跟踪：

```
send IOException 2 

0: org.apache.harmony.xnet.provider.jsse.NativeCrypto.SSL_read_byte(Native Method)

1: org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl$SSLInputStream.read(OpenSSLSocketImpl.java:783)

2: org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readLine(HttpURLConnectionImpl.java:671)

3: org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.readResponseHeaders(HttpURLConnectionImpl.java:699)

4: org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getFromNetwork(HttpURLConnectionImpl.java:1088)

5: org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.retrieveResponse(HttpURLConnectionImpl.java:1041)

6: org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:736)

7: org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getResponseCode(HttpsURLConnectionImpl.java:146)

8: com.bitstorms.gui.channels.HttpsClient.send(HttpsClient.java:117)

9: com.bitstorms.gui.apps.Application$MyRunnable.run(Application.java:81)

10: java.lang.Thread.run(Thread.java:1020) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T10:13:08.890

可疑之处在于您从未正确发布流。例如，您创建`DataOutputStream output`、使用它，但从不关闭。尝试更改`finally`用于关闭流的代码：

```
DataOutputStream output = null;
try {
    output = new DataOutputStream(connection.getOutputStream());
    ...
} catch (...) {
    ...
} finally {
    if (output != null) {
         try {
             output.close();
         } catch (IOException ignored) {}
    }
} 
```

应该对它本身做同样的事情`DataInputStream input`（`connection`它应该保证在一些全局`finally`部分中被关闭）。

# javascript - 动态加载的 CSS 没有设置宽度属性

> ID：13525928
> 
> 赞同：0
> 
> 时间：2012-11-23T09:15:11.767
> 
> 标签：javascript, jquery, css

我正在尝试使用 javascript 动态加载 css 文件，有一段时间我认为它可以工作。但下一刻我意识到，页面上的元素没有从 css 文件中获得“宽度”。其他一切正常。我从同一页面检查 chrome 浏览器中的 css，它已完全加载。我做错了什么？

加载 css/js 文件的脚本（我在网上找到的）：

```
function loadjscssfile(filename, filetype){
    if (filetype=="js"){ //if filename is a external JavaScript file
        var fileref=document.createElement('script')
        fileref.setAttribute("type","text/javascript")
        fileref.setAttribute("src", filename)
    }
    else if (filetype=="css"){ //if filename is an external CSS file
        var fileref=document.createElement("link")
        fileref.setAttribute("rel", "stylesheet")
        fileref.setAttribute("type", "text/css")
        fileref.setAttribute("href", filename)
    }
    if (typeof fileref!="undefined")
        document.getElementsByTagName("head")[0].appendChild(fileref)
    }
} 
```

和其他jquery代码：

```
$(this).addClass('iG_Main');
loadjscssfile(data.theme_url,'css');
createGrid($($(this).selector+'.iG_Main'));

function createGrid( selector ){
    var cellWidth, columnValue;
    var blank = '&nbsp;';

    selector.append('<div class="iG_Header"></div>');
    selector.append('<div class="iG_Container"></div>');
    selector.append('<div class="iG_Footer">This is footer!</div>');
    selector_header = selector.children('.iG_Header');
    selector_container = selector.children('.iG_Container');
    selector_footer = selector.children('.iG_Footer');
    selector_header.append('<div class="iG_Cell iG_CheckBox inHead"><div id="iG_CheckBox">'+ blank +'</div></div>');

    if(undefinedVal(data.width))
        data.width = 1000;
    if(undefinedVal(data.height))
        data.height = 400;

    for(var i in data.headerData)
        selector_header.append('<div id="'+ data.headerData[i].name +'" class="iG_Cell inHead"><div>'+ data.headerData[i].label +'</div></div>');

    if(data.options){
        selector_header.append('<div class="iG_Cell Options inHead"><div>'+ blank +'</div></div>');
    //  cellWidth = (data.width-40-15)/(data.headerData.length);
        cellWidth = (data.width-$('.iG_Cell.inHead.Options').width()-selector_header.children('.iG_CheckBox').width())/(data.headerData.length);
    }else cellWidth = (data.width-15-selector_header.children('.iG_CheckBox').width())/(data.headerData.length); //15 - in sake of scrollbar
    //}else cellWidth = (data.width-15-40)/(data.headerData.length); //15 - in sake of scrollbar

    for(var i in data.contentData){
        selector_container.append('<div class="iG_Content"></div>');
        selector_container.children('.iG_Content:last-child').append('<div class="iG_Cell iG_CheckBox inContent"><div id="iG_CheckBox">'+ blank +'</div></div>');
        for(var j in data.headerData){
            columnValue = (undefinedVal(data.contentData[i][data.headerData[j].name])) ? blank : data.contentData[i][data.headerData[j].name];
            selector_container.children('.iG_Content:last-child').append('<div class="iG_Cell"><div>'+ columnValue +'</div></div>');
        }

    selector.css({'width':data.width, 'height':data.height});
    selector_header.children('.iG_Cell').not('.Options').not('.iG_CheckBox').css('width',cellWidth);
    selector_container.children('.iG_Content').children('.iG_Cell').not('.iG_CheckBox').css('width',cellWidth);
    selector_container.css('height', data.height-selector_header.height()-selector_footer.height());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:31:09.007

由于加载 CSS 的方式与 JS 执行是异步的，因此可能会在加载 CSS 之前执行代码。

为避免此类问题，我将创建内联样式，对 CSS 文件执行 XHR 请求并将内容放入样式元素，例如：

```
$.get(the_url, function(response) {
  $('head').append('<style id="the_theme"></style>');
  $('#the_theme').text(response);

  // do the rest
}); 
```

编辑：当然，这可能会导致相对 URL 现在与您的文档相关，而不是与您的 CSS 文件相关。如果这对您来说是个问题，您必须以复杂的方式进行：检查间隔中的规则长度：

```
cssLoaded = 0;
var iv = window.setInterval(function() {
  var cssStylesheet = document.getElementById("the_link_element");
  if(cssStylesheet.sheet && cssStylesheet.sheet.cssRules.length > 0) {
    cssLoaded = 1;
  }
  else if(cssStylesheet.styleSheet && cssStylesheet.styleSheet.cssText.length > 0) {
    cssLoaded = 1;
  }
  else if(cssStylesheet.innerHTML && cssStylesheet.innerHTML.length > 0) {
    cssLoaded = 1;
  }

  if(cssLoaded) {
    window.clearInterval(iv);
  }
}, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:37:31.923

看看[这个问题](https://stackoverflow.com/questions/5537622/dynamically-loading-css-file-using-javascript-with-callback-without-jquery)。使用已接受答案中的代码可能会有所帮助。因此，您的代码将如下所示：

```
var currentItem = $(this);
currentItem.addClass('iG_Main');
loadStyleSheet( data.theme_url + '.css', function( success, link ) {
    createGrid($(currentItem.selector+'.iG_Main'));
}); 
```

# asp.net - 无法访问已使用 plesk 面板设置的网站主题（2 个域指向同一目录）

> ID：13525929
> 
> 赞同：0
> 
> 时间：2012-11-23T09:15:11.493
> 
> 标签：asp.net, iis-7, web-hosting, plesk

在使用 plesk 面板的 Windows Server 2008 R2 上，我创建了 2 个域（domain1.com 和 domain2.com），因此它在 inetpub/vhost 中为 domain1.com 和 domain2.com 创建了 2 个目录，现在我已将 Web 应用程序文件放入**domain1.com/httpdocs**和 domain2.com 从 IIS-> 高级设置设置物理路径到 domain1.com/httpdocs 所以现在两个域都指向同一个目录

**现在，当我使用 domain2.com 访问网站时，在第一页（登录页面）我无法访问主题，为什么？**

为了解决这个问题，我在 domain1.com/httpdocs 文件夹中设置了**“Everyone”**权限，它已解决，但我认为在服务器回收（web24）之后它会删除该权限。那么使用plesk面板在这里设置权限的确切方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:13:23.207

> 现在，当我使用 domain2.com 访问网站时，在第一页（登录页面）我无法访问主题，为什么？

因为 IIS 尝试访问具有为确切虚拟主机指定的用户权限的文件，并且该用户对于不同的虚拟主机是不相同的。

但我不明白你到底想做什么？如果您需要域别名，可以在 plesk 中创建它。

# mysql - mysql中的时间划分和日期划分

> ID：13525934
> 
> 赞同：0
> 
> 时间：2012-11-23T09:15:25.370
> 
> 标签：mysql, jdbc

这是我的表 emp 的两列，我试图在我的动态 Web 应用程序（servlet，jsp）中触发 2 个单独的查询，其中 Id 能够从表中获取我的数据；

```
+-------------------------+----------+
| date                    | serialNo |
+-------------------------+----------+
| 2012-11-21 15:14:08.323 |        6 |
| 2012-11-21 12:48:12.067 |        6 |
| 2012-11-21 09:00:16.559 |        8 |
| 2012-11-21 05:24:20.091 |        9 |
| 2012-11-21 01:11:24.413 |        6 |
| 2012-11-21 14:57:28.531 |       11 |
| 2012-11-21 17:04:31.86  |        9 |
| 2012-11-21 19:33:36.259 |       13 |
| 2012-11-21 20:21:40.524 |        9 |
| 2012-11-21 23:00:44.362 |        8 |
| 2012-11-21 00:24:53.613 |       11 | 
```

我要实施

*   划分时间而不考虑日期，例如

    ```
     Time Division   |  Count 
    ```

    | 00:00:00 - 05:59:59 | 3
    | 06:00:00 - 11:59:59 | 1

    | 12:00:00 - 17:59:59 | 4

查询: `select date count(*) as Count from info where (date between '%00:00:00%' and '%05:59:59%' or date between '%06:00:00%' and '%11:59:59%' or date between '%12:00:00%' and '%17:59:59%') group by date.`:( :(

我发现我一点也不接近 :( 我的查询中的任何一个，所以我在这个论坛上提出这个问题。欢迎在此背景下提供任何类型的输入。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-23T10:47:30.597

我建议您执行以下操作：

为间隔定义一个表，像这样

CREATE TABLE IF NOT EXISTS 步骤（ `name`varchar(10) NOT NULL，初始时间 NOT NULL，最后时间 NOT NULL）ENGINE=InnoDB DEFAULT CHARSET=latin1;

填写名称以及时间间隔的开始和结束：

插入`steps`( `name`, `initial`, `final`) 值 ('Int1', '00:00:00', '05:59:59'), ('int2', '06:00:00', '11:59:59') , ('int3', '12:00:00', '17:59:59'), ('int4', '18:00:00', '23:59:59');

（我在 17:59:59 之后创建了一个最终间隔 por 事件；如果您需要更多间隔，请根据需要更正！...）

为您的数据创建一个表（例如：

如果不存在则创建表`times`（ `time`时间不为空， `freq`int(10) 不为空）引擎=InnoDB 默认字符集=latin1；

用您的时间数据填充它。

进行最终查询：select steps.name, count(*) from steps, times where (steps.initial and steps.final) group by steps.name

结果如下：

"int1","3" "int2","1" "int3","4" "int4","3"

希望会有所帮助！

# svn - Maven 发布：使用用户名和密码（svn）准备标记失败

> ID：13525938
> 
> 赞同：2
> 
> 时间：2012-11-23T09:15:43.927
> 
> 标签：svn, maven, maven-3, maven-release-plugin

在在线帮助之后，我尝试了 Maven 发布插件的正常标准使用。但是当我执行 mvn release:prepare 时，出现以下错误（silverfish 是我的项目名称）：

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-release-plugin:2.0:prepare (default-cli) on project silverfish: Unable to tag SCM
[ERROR] Provider message:
[ERROR] The svn tag command failed.
[ERROR] Command output:
[ERROR] svn: E200007: Source and destination URLs appear not to point to the same repository.
[ERROR] -> [Help 1] 
```

这是我的 pom.xml 中的 scm 部分：

```
<scm>
    <connection>scm:svn:http://svnuser:passwd@some.address/scm/svn/silverfish</connection>
    <url>http://viewurl</url>
</scm> 
```

我认为这与“用户/密码”部分有关，因为 maven 进程的输出给出：

```
[INFO] Checking in modified POMs...
[INFO] Executing: /bin/sh -c cd /home/dittrich/NetBeansProjects/silverfish && svn --username svnuser --password '*****' --non-interactive commit --file /tmp/maven-scm-1445257989.commit --targets /tmp/maven-scm-7382722062367813549-targets
[INFO] Working directory: /home/dittrich/NetBeansProjects/silverfish
[INFO] Tagging release with the label silverfish-1.9...
[INFO] Executing: /bin/sh -c cd /home/dittrich/NetBeansProjects/silverfish && svn --username svnuser --password '*****' --non-interactive copy --file /tmp/maven-scm-723027784.commit --revision 106 http://some.address/scm/svn/silverfish 'http://svnuser:passwd@some.address/scm/svn/silverfish/tags/silverfish-1.9'
[INFO] Working directory: /home/dittrich/NetBeansProjects/silverfish 
```

注意：签入部分没有问题，所以基本的svn配置似乎没问题。

在我看来，问题在于 maven 为复制命令提供了一个 url，没有用户名密码（使用 --username 和 --password 开关）和一个（使用 user:passwd@sever 语法）。然后 subversion 认为这些 url 是不一样的。

```
mvn copy http://some.address/scm/svn/silverfish 'http://svnuser:passwd@some.address/scm/svn/silverfish/tags/silverfish-1.9' 
```

我不知道这是否是一个颠覆问题，因为颠覆应该明白这些网址仍然是相同的。还是 Maven 问题，因为 Maven 应该使用相同的 url 语法？

顺便说一句，我使用的是 svn，版本 1.7.7 (r1393599)，我的 svn 服务器说它是“由 SVN/1.7.5 SVNKit/1.7.5-2 (http://svnkit.com/) t20120724_0758 提供支持”Apache Maven 3.0.4 Java 版本：1.6.0_30，供应商：Sun Microsystems Inc.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T23:32:19.710

从 SCM 连接 URL 中删除用户名和密码：

```
<scm>
    <connection>scm:svn:http://some.address/scm/svn/silverfish</connection>
    <url>http://viewurl</url>
</scm> 
```

并将它们添加到发布插件中：

```
<plugin>
    <artifactId>maven-release-plugin</artifactId>
    ...
    <configuration>
        <username>${svn.username}</username>
        <password>${svn.password}</password>
    </configuration>
</plugin> 
```

# matplotlib - tkinter 与 matplotlib

> ID：13525941
> 
> 赞同：6
> 
> 时间：2012-11-23T09:16:07.623
> 
> 标签：matplotlib, tkinter

我读到可以在 tkinter 中嵌入 pyplot，但我遇到了问题：

我需要显示一些框架，其中一个 pyplot 在主 Tkinter 窗口的框架中，**它**必须对我的按键做出反应。

根据[http://matplotlib.org/examples/user_interfaces/embedding_in_tk.html](http://matplotlib.org/examples/user_interfaces/embedding_in_tk.html) 这有效：

```
#!/usr/bin/env python
from Tkinter import *
import matplotlib
matplotlib.use('TkAgg')    
from numpy import arange, sin, pi
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg, NavigationToolbar2TkAgg
import matplotlib.backend_bases       
from matplotlib.figure import Figure    
import sys
if sys.version_info[0] < 3:
    import Tkinter as Tk
else:
    import tkinter as Tk

root = Tk.Tk()
root.wm_title("Embedding in TK")

f = Figure(figsize=(5,4), dpi=100)
a = f.add_subplot(111)
t = arange(0.0,3.0,0.01)
s = sin(2*pi*t)

a.plot(t,s)

canvas = FigureCanvasTkAgg(f, master=root)
canvas.show()
canvas.get_tk_widget().pack(side=Tk.TOP, fill=Tk.BOTH, expand=1)

canvas._tkcanvas.pack(side=Tk.TOP, fill=Tk.BOTH, expand=1)

def on_key_event(event):
    print('you pressed %s'%event.key)

canvas.mpl_connect('key_press_event', on_key_event)

def _quit():
    root.quit()     # stops mainloop
    root.destroy()  # this is necessary on Windows to prevent
                    # Fatal Python Error: PyEval_RestoreThread: NULL tstate

button = Tk.Button(master=root, text='Quit', command=_quit)
button.pack(side=Tk.BOTTOM)

Tk.mainloop() 
```

而且我很高兴...但是，例如，如果我尝试在其上放置一个 Text 框架：

```
t=Text(root)
t.pack() 
```

（在画布变量定义之前）一旦我单击文本框架并写入其中，就无法单击 pyplot 窗口并使其再次捕获我的按键！

有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-23T20:24:28.133

在 tkinter 中，关键事件被路由到获得焦点的小部件，因此您的问题是将焦点设置回画布。这可以通过在画布上单击绑定来设置焦点。

例如：

```
canvas.mpl_connect('button_press_event', lambda event:canvas._tkcanvas.focus_set())
#or canvas._tkcanvas.bind('<Button1>', ...) 
```

# java - 在 catch 块中无法识别 UnknownHostException

> ID：13525946
> 
> 赞同：7
> 
> 时间：2012-11-23T09:16:32.300
> 
> 标签：java, exception, exception-handling

我的代码中的一种方法引发`UnknownHostException`异常

我首先有一个`catch`这样的块：

```
catch (Exception e) {
  // TODO Auto-generated catch block
  System.out.println("Custom Message "+e.getMessage());
  if(e instanceof java.net.UnknownHostException){
      System.out.println("Unknown Host Ex");
  }else{
      System.out.println("OTHER ERROR");
  }
} 
```

我面临一个问题，即该`if`条件永远不会评估为真，因此我无法输出存在一些主机错误。

你可以看到我`sysout`之前有一个打印这个：

```
Custom Message ; nested exception is: 
    java.net.UnknownHostException: abc.xyz 
```

之后我写了一个单独的 catch 块来处理`UnknownHostException`，但它仍然没有被抓住。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-23T09:18:08.260

好吧，显然你的`UnknownHostException`in 包裹在其他一些例外中。换句话说，上面的一些代码捕获`UnknownHostException`并抛出：

```
throw new SomeOtherException("Custom Message", unknownHostEx); 
```

打印`e.getClass()`以查看包装它的异常类型。你也可以试试：

```
if(e.getCause() != null && e.getCause() instanceof UnknownHostException) 
```

但它很丑。

顺便说一句，您应该避免使用`instanceof`并`catch`找出异常本身（但对您的情况没有帮助）：

```
catch (java.net.UnknownHostException e) {
      System.out.println("Unknown Host Ex");
}
catch (Exception e) {
      System.out.println("OTHER ERROR");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-23T09:18:17.293

`UnknownHostException`嵌套在另一个内部`Exception`，因此它可能不是它的实例，但它只是包含它。您最终可能会检查`e.getCause()`

# google-docs - 在谷歌文档中上传 pdf 文件

> ID：13525949
> 
> 赞同：5
> 
> 时间：2012-11-23T09:16:49.793
> 
> 标签：google-docs

我正在使用 c# 将文件上传到谷歌文档，它可以很好地处理文本文件和 word 文件。但是当我尝试上传 PDF 和 EXCEL 文件时出现错误的请求错误。

我正在使用 SSO 概念通过 asp.net c# 进行谷歌登录。

谁能帮我上传pdf和excel文件？

提前致谢...

兰吉库玛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T21:51:31.580

听起来您正在使用已弃用的 Documents List API。请改用新的 Google Drive SDK v2。插入功能允许您上传任何类型的文件：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

OAuth 授权描述于：

[https://developers.google.com/drive/credentials](https://developers.google.com/drive/credentials)

# spring - org.hibernate.LazyInitializationException：无法初始化代理 - 再次没有会话

> ID：13525951
> 
> 赞同：0
> 
> 时间：2012-11-23T09:16:56.450
> 
> 标签：spring, hibernate, jsf-2

我知道我的问题很奇怪很难理解

我创建了我的项目的一些结构。但是每次我遇到不同的问题`could not initialize proxy - No session again`时`Not serializable exception`

我想得到一些建议或帮助。我尝试使用注释`transactional`，但我不明白在哪种情况下我应该使用`implements Serializable`. 当然，我知道如果我想使用具有视图范围的 bean，我应该使用客户端保存方法，并且 bean 应该是 implenebts seriailzable。如果我使用其他非原始字段，它也应该是可序列化的。这意味着在接口 IDao 和 ITestSystemService 中使用 inmplenets Serializable 没什么不好。

我的通用 DAO

```
public interface IDao<T> extends Serializable{
    List<T> getAll() throws DAOException;
    T get(Long id) throws DAOException;
} 
```

DAO 实现

```
@Repository("subjectDAO")
@Scope("prototype")
public class SubjectHibernateDAO implements ISubjectDAO{

    private static final long serialVersionUID = 1L;

    private static final Logger logger = Logger.getLogger(SubjectHibernateDAO.class);

    @Autowired
    private SessionFactory hibernateSessionFactory;
    //getter and setter

    @SuppressWarnings("unchecked")
    @Override
    public List<Subject> getAll() throws DAOException {
        Session session = hibernateSessionFactory.getCurrentSession();

        Transaction transaction = null;
        List<Subject> subjectList = null;
        try{
            transaction = session.beginTransaction();
            subjectList = session.getNamedQuery(GET_ALL_SUBJECTS_NAME_QUERY).list();
            transaction.commit();
        }  catch (HibernateException e) {
            if (transaction != null)
                transaction.rollback();
            logger.error(SQL_EXCEPTION_IN_QUERY, e);
            throw new DAOException(SQL_EXCEPTION_IN_QUERY, e);
        }
        return subjectList;
    }

// Generic service interface
public interface ITestSystemService<T> extends Serializable{

    List<T> getAll() throws DAOException;
}

//Service realization
@Service("subjectService")
@SessionScoped
public class SubjectServiceImpl implements ISubjectService{

    private static final long serialVersionUID = 1L;

    @Autowired
    @Qualifier("subjectDAO")
    private IDao<Subject> subjectDAO;

    public void setSubjectDAO(IDao<Subject> subjectDAO) {
        this.subjectDAO = subjectDAO;
    }

    @Override
    public List<Subject> getAll() throws DAOException {
        return subjectDAO.getAll();
    }

} 
```

在我的具有视图范围的 JSF bean 控制器中，我每次都会遇到这种结构的问题。

我应该对我的应用程序结构进行哪些更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T16:41:03.417

我将对您所写的内容进行以下更改：

**主题服务实现**

*   这可能是单例范围的——服务没有状态。
*   您不需要主题 DAO 的设置器（我会使用构造函数注入并使 subjectDAO 成为最终状态。
*   使 getAll 方法 @Transaction （正如您在问题中所逃避的那样） - 这将确保 Spring 将 Hibernate 会话绑定到执行线程。然后可以使用 SessionFactory#getCurrentSession()。

**主题HibernateDAO**

*   删除与事务有关的代码，例如事务 = session.beginTransaction()。会话的提供将由您的服务方法上的 @Transactional 注释处理。
*   删除所有回滚代码
*   使 DAO 单例作用域 - 再次没有状态。它应该依赖于最终的 SessionFactory 变量。
*   通过构造函数注入 SessionFactory（字段注入不是很好）。

完成上述所有操作后，您可能会发现问题消失了（从您的问题中看不出实际问题是什么）。您的代码的最大问题是手动事务与 SessionFactory#getCurrentSession() 的使用混合。

您尚未提供 Spring 配置，但要使用 @Transactional，您需要在 Spring 中启用事务代理行为。您可以在 xml 中使用 @EnableTransactionManagement 和使用注释来执行此操作。

# c# - radmenuitem 点击事件”不工作

> ID：13525953
> 
> 赞同：0
> 
> 时间：2012-11-23T09:17:14.053
> 
> 标签：c#, asp.net

在我的应用程序（使用 Asp.net 和语言：C#）中，水平多列“radmenuitem click event”在发布后无法正常工作，并且此应用程序在本地主机上正常工作

任何人请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:20:07.863

不完全确定您的问题是否与我的相同，但对我来说，在我的 Xaml 中，我使用`MouseLeftButtonDown` 它来触发我的事件并且它不起作用。在做了一些搜索和阅读之后，我发现我应该使用`Click`关键字。所以我的 Xaml 现在看起来像这样：

```
 <telerik:RadMenuItem Header="Import" Click="XML_LeftButtonDownImport"/> 
```

和后面的c#：

```
 private void XML_LeftButtonDownImport(object sender, RadRoutedEventArgs e)
{
  OpenFileDialog openFile = new OpenFileDialog();
  // Do your operations here, in my case it was an open file dialog.
} 
```

确保您使用`RadRoutedEventArgs`而不是仅使用`RoutedEventArgs`或`System.Windows.Input.MouseButtonEventArgs`，因为后两者会导致错误。

希望这会有所帮助。

# jquery - 覆盖另一个插件的行为

> ID：13525955
> 
> 赞同：0
> 
> 时间：2012-11-23T09:17:18.577
> 
> 标签：jquery, twitter-bootstrap, jstree

我有一个插件，可以在树“li”上执行一些悬停和选择效果，但是我希望这个函数被 twitter 引导函数的行为覆盖。

```
 $(document).ready(function() {
     $('a').popover({
    animation: 'true',
    placement: 'right',
    trigger: 'hover'}
  );
  }); 
```

如果我将该片段粘贴到萤火虫控制台中，它可以工作，但如果我在代码中有这个功能，它就不会。由于某种原因，另一个插件似乎优先。我有我的引导函数作为最后一个调用的函数，不知道为什么它不能覆盖。

在我有 popover.js 之前，我也有 tree.js 进入 popover.js 不应该覆盖 tree.js 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T12:26:24.370

```
$("a").on("hover", function(){
 $('a').popover({
    animation: 'true',
    placement: 'right',
    trigger: 'hover'}
 )
}); 
```

# c# - 选择操作时 ASP.NET Web Api 忽略 RouteParameter.Optional

> ID：13525957
> 
> 赞同：5
> 
> 时间：2012-11-23T09:17:21.523
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我通过以下步骤发现了这个问题：

1.  使用已安装的项目模板创建一个新的 WebApi 项目

2.  转到 Controllers/ValuesController.cs，有两个*Get*方法，如下所示：

    `public IEnumerable<string> Get()` // 这个提供*GetAll*函数

    `public string Get(int id)` // 这个是*GetOneById*

3.  我不喜欢这种设计，因为我认为这两种api方法可以合二为一：

    `public IEnumerable<string> Get(string ids)`当 ids 为 null 时，返回所有记录，否则按 ids 返回结果（看起来像 id1,id2,id3...）

我也修改了路线：

```
 config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{ids}",
            defaults: new { ids = RouteParameter.Optional }
        ); 
```

现在我想一切都准备好了。但是，当我`/values`在浏览器中访问时（未指定 ids 参数），我被告知“未找到任何操作”，直到我为以下添加默认值`ids`：

```
public IEnumerable<string> Get(string ids = null) 
```

从现在开始，一切都按我的预期工作。我仍然无法`defaults`在路线中移动参数。这意味着：**代码将 ids 参数声明为可选两次**。

查看位于方法的 MVC4 的源代码`System.Web.Http.Controllers.ActionSelectorCacheItem.FindActionUsingRouteAndQueryParameters`，我可以看到在找到*正确的操作*时忽略了路由中定义的可选参数。我个人认为这真的很糟糕，即使解决方法也很容易。还是我误解了路线和动作方法之间的关系？我认为路由是用于帮助请求找到其相应操作的规则，而“参数是可选的”正是规则的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:04:40.157

您可能有一个论点，这对于相对直接的事情来说感觉像是一个尴尬的解决方案，但我认为根本原因是因为您试图将 'GetAll' 和 'GetOneById' 滚动到同一个方法中。

如果您愿意拆分控制器中的方法，则可以将路由配置排除在外。恕我直言，这不是一件坏事；它符合关注点分离原则。这也不意味着代码的任何重复，因为您可以集中逻辑来访问要返回的对象。

这些控制器方法应该为您提供所需的路由，而无需调整路由配置：

```
[HttpGet]
public IEnumerable<string> GetAll()
{
    return GetStrings(new int[]{});
}

[HttpGet]
public string GetOneById(int id)
{
    return GetStrings(new int[]{id}).FirstOrDefault();
}

private IEnumerable<string> GetStrings(int[] ids)
{
     return // fetch strings using int array
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T10:00:45.887

您可以选择将值作为查询字符串

```
public class PaymentsController : ApiController {
        [HttpGet]
        public Person GetValues(string ids = null)
        {
            return new Person() { FirstName = "Michael" };
        }
    }

    public class Person
    {
        public string FirstName { get; set; }
    }
} 
```

我能够通过以下两种方式访问​​这条路线：

1.  /api/payments/getvalues/?ids=123
2.  /api/payments/getvalues/

注意：除默认路由外，没有任何特殊路由

# javascript - JavaScript中的keypress和change有什么区别

> ID：13525958
> 
> 赞同：2
> 
> 时间：2012-11-23T09:17:23.423
> 
> 标签：javascript, jquery

我是java脚本的新手。我对按键和更改事件有点困惑。

以下是示例代码

```
 $("input").live('change',function ()
    {
       Alert("Change event call");
    });

    /
    $("input").live('keypress',function ()
    {            
       Alert("Keypress event call");
    }); 
```

何时调用 Keypress 事件并更改事件调用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T09:19:33.050

## 更改事件

> 当元素的值发生变化时，该`change`事件被发送到元素。此事件仅限于`<input>`元素、`<textarea>`框和`<select>` 元素。对于选择框、复选框和单选按钮，当用户使用鼠标进行选择时会立即触发该事件，但对于其他元素类型，该事件会延迟到元素失去焦点为止。

## 按键事件

> 当浏览器注册键盘输入时，该`keypress`事件被发送到一个元素。这类似于[`keydown`](http://api.jquery.com/keydown/)事件，除了键重复的情况。如果用户按住某个键，`keydown` 则触发一次事件，但`keypress`会为每个插入的字符触发单独的事件。此外，修饰键（如 `Shift`）触发`keydown`事件但不触发`keypress`事件。
> 
> 事件处理程序`keypress`可以附加到任何元素，但事件仅发送到具有焦点的元素。可聚焦元素在浏览器之间可能会有所不同，但表单元素总是可以获得焦点，因此是此事件类型的合理候选者。

**参考：**

*   [http://api.jquery.com/change/](http://api.jquery.com/change/)
*   [http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-23T09:19:12.597

如果在元素失去焦点时更改了值，则会发生更改事件。每次按下并释放（非控制）键时都会发生 keypress 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T09:20:01.100

`keypress`表示您刚刚单击了一个键盘键

`change`表示您已更改项目的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T09:19:28.493

好吧，可以按下一些键，但值仍然不会改变。例如，如果您按 Enter 或 ctrl，则输入的值不会改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-23T09:20:29.260

每次按下键盘键时都会触发 Keypress 事件。当控件失去焦点时调用更改。

# php - 执行动作时执行特定任务

> ID：13525973
> 
> 赞同：0
> 
> 时间：2012-11-23T09:18:20.443
> 
> 标签：php

假设我们面前有这个很棒的用户系统，用户通过设置会话密钥（user_id）登录。但是，如果用户被“禁止”，则该用户仍将登录 - 直到会话到期。

防止这种情况的方法是：

1.  始终检查用户是否被禁止（每个请求）

2.  将会话数据保存在数据库中以便能够轻松删除数据（在用户被禁止时）。

有没有更好的方法来执行这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:25:53.000

我会选择**1**。如果您没有在每个请求中从数据库中检索用户信息，用户也可能无法更新他们的数据。例如，我可以在家登录，将我的个人资料描述更改为“foo”并开始工作。我也在那里登录，这会导致不同的会话。我将信息更改为“bar”，它存储在数据库和我的工作会话中。然后我回家继续浏览之前打开的家庭会话，它仍然包含“foo”。

因此，我认为您至少应该对每个请求的用户数据库进行一些检查，因此在该步骤中您可以检查用户是否也被禁止。

为了加快速度，您可以保留一个存储类型为 MEMORY 的特殊表来保存会话信息。该表可以非常快速地访问，因此可以提高性能。如果用户在“真实”数据库中发生更改，您只需将信息移动到那里。您可以以类似的方式使用 memcache。两者都是在保持相同结果的同时将数据库 IO 保持在最低限度的解决方案。我只会在您需要时添加这些优化。首先在每个请求上查询用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:21:37.403

只需在会话中包含上次检查它是否已被禁止的时间。然后定期根据用户表的禁止列表检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T09:28:11.417

你必须检查它的每个请求`user_id`。计算量不大。您可以使用[Redis](http://redis.io/)或[Memcached](http://memcached.org/)等内存存储来存储`user_id=>banned`对以快速检查它。第二个不起作用，因为会话不稳定，我可以从不同的计算机登录，甚至是浏览器，你将需要复杂的逻辑和更多的资源来执行这样的任务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-23T09:47:27.577

您真的不想在每个请求上都连接到您的数据库，因为这将大大增加具有许多用户的服务器上的加载时间——这不是最好的做法。

但是，您可以使用它`Memcache`来存储和检索被禁止用户的列表 - 从而加快您的数据请求时间。

```
 if((isset($_SESSION['isloggedin']) && $memcache->get('banneduserid') === true))
 {
     session_unset(); 
     session_destroy();
 } 
```

[Memcache](http://php.net/manual/en/book.memcache.php)非常易于使用，如果您以前没有使用过它，学习起来也很有趣。

例如，您将 memcache 对象实例化为 $memcache，然后您只需运行和 之类的`$memcache->set()`方法`$memcache->get()`。就是这样！

# ruby - 在 rails3 中将 CanCan 与 user_role 表一起使用

> ID：13525987
> 
> 赞同：0
> 
> 时间：2012-11-23T09:19:39.150
> 
> 标签：ruby, ruby-on-rails-3, authorization, cancan

我有这样的 user_role 表：

```
user_role_id (pk)
name (e.g admin)
access_one
access_two
acccess_three 
```

和 user_table 的列如下：

```
user_id (pk)
user_role_id (fk)
username
password 
```

我可以通过管理面板创建上面的 users_roles。那么我该如何使用命名角色呢？这样我就可以从cancan 中的[角色继承中受益，并且我希望角色名列表应该与数据库保持同步。](https://github.com/ryanb/cancan/wiki/Separate-Role-Model)
此外，
我希望`ability.rb`根据 access_one、access_two 等设置访问权限。在 user_role table.so 中定义，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:26:41.883

最好看的地方是

[康康能力](https://github.com/ryanb/cancan/wiki/checking-abilities)

Cancan 有一个非常好的文档。只是通过它会很有帮助。

编辑：

```
 user ||= User.new # guest user (not logged in)
        if user.admin?
          can :manage, :all
        elsif user.student?
          can :manage, [Book, Copies]
          can :manage, Theme
        else  
          can :read, :all
        end

      end 
```

您可以使用 can 和 cannot 来处理权限。喜欢

```
can :manage, Model_name, Action_name 
```

这将确保考虑到特定模型以及指定视图的权限。

# c# - 在 Umbraco 4.8+ 中创建自定义应用程序

> ID：13525993
> 
> 赞同：1
> 
> 时间：2012-11-23T09:19:56.277
> 
> 标签：c#, class, umbraco, backend

我一直在尝试在 Umbraco 4.8+ 中创建自定义应用程序选项卡，但无济于事。在 Umbraco 4.8 之前，您必须调整表格等等，[但从 4.8 开始，您应该能够添加一个自动为您生成的类。](http://blog.mattbrailsford.com/2012/07/18/creating-custom-applications-and-trees-in-umbraco-4-8/)

所以我在 Visual Studio 的 Umbraco Web 项目中添加了一个自定义类

```
[Application("myApp", "My App", "myapp.gif")]
public class MyApplicationName : IApplication
{
} 
```

但最重要的是给我一个错误：“无法解析符号'应用程序'”，我不得不使用`using umbraco.interfaces;`，`IApplication`但我似乎找不到任何参考`Application`？

我希望有人可以帮助我，谢谢：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-25T09:50:57.213

您需要包含 umbraco.businesslogic

```
using umbraco.businesslogic;
using umbraco.interfaces;

[Application("myApp", "My App", "myapp.gif")]
public class Class1 : IApplication 
{
    public Class1()
    {
        //
        // TODO: Add constructor logic here
        //
    }
} 
```

# php - 使用 php 和 jquery 将 xml 数据上传回服务器

> ID：13525995
> 
> 赞同：2
> 
> 时间：2012-11-23T09:19:56.310
> 
> 标签：php, jquery, xml

我目前正在编写一个使用 xml 的应用程序。我使用这个访问xml文件 -

```
$.ajax({
    type: "GET",
    url: "data/data.xml",
    dataType: "xml",
    success: function (xml) {
        data = xml;
        init(); 
    }
}); 
```

然后我使用 $(data).find 等更改数据中的一些元素，这似乎改变了值。

然后我需要做的是将此变量“数据”与更改一起上传回我的服务器。我有这段代码可以发回 -

```
$.ajax({ 
    url: "saveXml.php", 
    type: "POST", 
    contentType: "text/xml", 
    processData: true, 
    data: data,
    success: function(){
        console.log('should have saved')
    } 
}); 
```

我的 php 脚本看起来像这样。

```
<?php
$xml = $_POST['data'];
$file = fopen("data/data.xml","w");
fwrite($file, $xml);
fclose($file);
echo "ok";
?> 
```

也许我遗漏了一些东西，也许我需要先对 xml 进行编码，但找不到这样的例子。但是，当它似乎加载并且我得到一个成功回调但我的 xml 文件现在是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:23:00.197

不确定我是否完全掌握了您需要的东西，但是您应该这样做：

**阿贾克斯**

```
 $.ajax({
        type: "GET",
        url: "data/data.xml",
        dataType: "xml",
        error:function(response){ 
        console.log(response);
         },
        success: function (xml) {

            init(xml); 
        }
    });

 function init(xml){
         $.ajax({ 
                url: "saveXml.php", 
                type: "POST", 
                contentType: "text/xml", 
                dataType:'xml',
                processData: true, 
                data: {'xml':xml},
                error:function(response){ 
                console.log(response);
                },
                success: function(data){
                    console.log(data); //check your console.log now
                } 
            });
    } 
```

**PHP**

```
 <?php
    $xml = $_POST['xml'];
    //you don't need to open the file, you have the source of the file in $_POST['data']
    echo $xml;
    ?> 
```

# c# - c# 项目范围内使用别名指令

> ID：13525997
> 
> 赞同：14
> 
> 时间：2012-11-23T09:20:00.960
> 
> 标签：c#

C# 有一个称为[使用别名指令](http://msdn.microsoft.com/en-us/library/aa664765%28v=vs.71%29.aspx)的功能。它们允许您创建这样的类型的别名：

```
using CustomerId = MyComp.MyProject.Core.EntityKey<Customer, int>; 
```

但是，此功能仅适用于每个文件。我正在寻找一种方式——任何方式——在整个项目范围内甚至在解决方案范围内进行此操作。

我想这样做的原因是因为我想消除编写诸如`EntityKey<Customer, int>`,`EntityKey<Order, long>`等内容的冗长性。我喜欢避免在每个文件中定义这些别名。是`EntityKey<TEntity, TKey>`a `struct`，所以我不能创建派生类。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-23T09:21:36.283

不，那不存在。别名严格按文件进行。

# jsf - 无法在 jsf 中获取 selectOneMenu 的 selectItems 的 id

> ID：13525998
> 
> 赞同：0
> 
> 时间：2012-11-23T09:20:06.123
> 
> 标签：jsf, richfaces

Id (personBean.idSelectedItem) 始终返回 null。虽然我可以选择并更改下拉列表的值，但 Id 仍然为空，不会相应更改。请帮助我，以下是我的代码：

```
<h:selectOneMenu value="#{personBean.idSelectedItem}" immediate="true"  onchange="EnableDisable()">
  <f:selectItems value="#{personBean.apptDuration}" />               
</h:selectOneMenu> 
```

我的豆是：

```
private String idSelectedItem = null;
private List<SelectItem> apptDuration = null;
public String getIdSelectedItem() {
   System.out.println("getIdSelectedItem == " + idSelectedItem);
   return idSelectedItem;}

public void setIdSelectedItem(String idSelectedItem) {
    this.idSelectedItem = idSelectedItem;
    System.out.println("setIdSelectedItem == " + idSelectedItem);
}

public List<SelectItem> getApptDuration() {
  if (apptDuration == null) {
      apptDuration = new ArrayList<SelectItem>();
      apptDuration.add(new SelectItem("P1", "Day(s)"));
      apptDuration.add(new SelectItem("P2", "5 min"));
      apptDuration.add(new SelectItem("P3", "10 min"));
      apptDuration.add(new SelectItem("P4", "15 min"));
  }
  return apptDuration;
}

public void setApptDuration(List<SelectItem> apptDuration) {
    this.apptDuration = apptDuration;
} 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:13:04.973

如果您不想重新加载，则必须使用 Ajax，（`a4j`如果您坚持使用 RichFaces）。

使用`a4j:commandButton`（或类似的）显式发送 ajax 请求，或在更改所选值时`a4j:actionListener`在内部`h:selectOneMenu`发送请求/模型更新。类似的东西（我是凭记忆写的>

```
 <h:selectOneMenu id=...>
   <h:selectItems .../>
   <a4j:actionListener listener="#{myBean.myControllerMethod}"/>
 </h:selectOneMenu> 
```

`f:ajax`在没有 RichFaces 的情况下也可以达到相同的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-24T15:32:53.260

我使用 a4j:support 解决了我的问题：现在它可以正常工作，而不是每次都重新加载我的页面：

```
 <h:selectOneMenu id="appt" value="#{personBean.idSelectedItem}" >
                 <f:selectItems value="#{personBean.apptDuration}"/>
                 <a4j:support event="onchange" action="#{personBean.changeID}" oncomplete="DisableFields()" reRender="updatedId"/>  
                 <h:inputHidden id="updatedId" value="#{personBean.updatedApptId}"/>                 
</h:selectOneMenu> 
```