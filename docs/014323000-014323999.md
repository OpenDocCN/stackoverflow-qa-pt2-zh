# StackOverflow 问答 14323000-14323999

# python - 在 Python 中解析类似字典的 URL 参数

> ID：14323000
> 
> 赞同：9
> 
> 时间：2013-01-14T16:58:33.297
> 
> 标签：python, flask, kendo-ui

我正在使用 Python 实现服务器端过滤以服务 KendoUI 的 Grid 组件。

我面临的问题是它默认生成的 AJAX 调用似乎与 Flask 的内置 URL 解析器和 Python 的`urlparse`模块都不兼容。

这是我遇到问题的查询字符串类型的人为示例：`a=b&c=d&foo[bar]=baz&foo[baz]=qis&foo[qis]=bar`

这是我想要的结果：

```
{
    'a': 'b',
    'c': 'd',
    'foo': {
        'bar': 'baz',
        'baz': 'qis',
        'qis': bar'
    }
} 
```

不幸的是`request.args`，如果将其传递给 Flask 端点，您会得到以下结果：

```
{
    'a': 'b',
    'c': 'd',
    'foo[bar]': 'baz'
    'foo[baz]': 'qis'
    'foo[qis]': 'bar'
} 
```

更糟糕的是，在实践中，该结构可能有好几层深。将列过滤`foo`为仅值等于的行的基本调用`'bar'`将产生以下结果：

```
{
    'filter[logic]': 'and',
    'filter[filters][0][value]': 'bar',
    'filter[filters][0][field]': 'foo',
    'filter[filters][0][operator]': 'eq'
} 
```

我检查了 RFC，它要求查询字符串只包含“非分层”数据。虽然我相信它指的是 URI 所代表的对象，但在我能找到的规范中没有对这种类型的数据结构的规定。

我开始编写一个函数，它接受一个参数字典并返回它们所代表的嵌套结构，但我很快意识到这是一个微妙的问题，而且肯定有人以前遇到过这个问题。

是否有人知道将以我想要的方式解析这些参数的模块，或者我可能忽略的解析它们的优雅方式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T17:55:00.973

我只是写了一个小函数来做到这一点：

```
from collections import defaultdict
import re
params = {
    'a': 'b',
    'c': 'd',
    'foo[bar]': 'element1',
    'foo[baz]': 'element2',
    'foo[qis]': 'element3',
    'foo[borfarglan][bofgl]': 'element4',
    'foo[borfarglan][bafgl]': 'element5',
}

def split(string, brackets_on_first_result = False):
    matches = re.split("[\[\]]+", string)
    matches.remove('')
    return matches

def mr_parse(params):
    results = {}
    for key in params:
        if '[' in key:
            key_list = split(key)
            d = results
            for partial_key in key_list[:-1]:
                if partial_key not in d:
                    d[partial_key] = dict()
                d = d[partial_key]
            d[key_list[-1]] = params[key]
        else:
            results[key] = params[key]
    return results
print mr_parse(params) 
```

这应该适用于任何嵌套级别。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T18:35:35.567

前段时间我发现了这个项目：[https ://github.com/bernii/querystring-parser](https://github.com/bernii/querystring-parser)

它专门针对做你想做的事。

然而，在 PHP 世界之外，GET（和 POST）参数的行为不同。就像它们通常使用多值字典来实现一样。因此，更好的想法可能是适应这一点或找到一种与这两个世界兼容的方法。

或者，您可以真正在请求正文 (POST) 中使用 JSON 序列化数据，并将访问的资源视为控制器（执行某些操作的资源，在这种情况下，在您将一些数据传递给它之后搜索某事）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:16:31.700

您也可以在 GET 请求中发送正文。如果您只需要发送一些分层数据，则可能只是客户端上的 json.dumps(data) 和服务器上的 json.loads(data)。

您可以在此处参考 httplib 文档中的此类做法：http: [//docs.python.org/2/library/httplib.html#httplib.HTTPConnection.request](http://docs.python.org/2/library/httplib.html#httplib.HTTPConnection.request)

# pass-by-reference - 允许在脚本级别通过引用传递

> ID：14323008
> 
> 赞同：-1
> 
> 时间：2013-01-14T16:59:20.760
> 
> 标签：pass-by-reference, php

我试图允许一个脚本中包含的一些函数通过引用传递。我不想全局打开它，但是当我在脚本中添加以下指令时，我希望通过引用传递，我仍然看到 PHP 警告：

```
Deprecated: Call-time pass-by-reference has been deprecated 
```

我希望在我覆盖 PHP INI 文件后看到这些警告消失。

```
 ini_set("allow_call_time_pass_reference", "true"); 
```

我该怎么做或者那是正确的，并且警告在那里，因为 PHP 解释器没有解析我的本地 ini_set() 指令，只读取 php.ini？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:03:34.173

1.  [http://php.net/manual/en/ini.core.php](http://php.net/manual/en/ini.core.php) : `allow_call_time_pass_reference`=> **PHP_INI_PERDIR**

2.  [http://php.net/manual/en/configuration.changes.modes.php](http://php.net/manual/en/configuration.changes.modes.php) : `PHP_INI_PERDIR`=> 可以在 php.ini、.htaccess、httpd.conf 或 .user.ini 中设置条目（自 PHP 5.3 起）

答：不能用`ini_set`.

如果您将使用 php 5.4.0，则此配置选项已被删除。

# c# - 如何以编程方式对 AD OU 条目设置“列出内容”和“列出对象”权限？

> ID：14323018
> 
> 赞同：0
> 
> 时间：2013-01-14T16:59:55.243
> 
> 标签：c#, permissions, active-directory

我想为使用 C#（.NET 4.0）的特定用户组的 AD（Active Directory，Windows Server 2008 R2）OU设置`List Content`和选项。`List Object`

我设法根据[Microsoft](http://msdn.microsoft.com/en-us/library/cc219957.aspx)`gPOptions`设置and属性，但我没有找到如何设置and的示例。设置其他两个属性的工作方式如下所示：`gPLink``List Content``List Object`

[...]

```
byte[] binaryForm = new byte[ groupPrincipal.Sid.BinaryLength ];
groupPrincipal.Sid.GetBinaryForm( binaryForm, 0 );
IdentityReference identityReference =
    new SecurityIdentifier( binaryForm, 0 );
PropertyAccessRule propertyAccessRule =
    new PropertyAccessRule(
        identityReference,
        AccessControlType.Allow,
        PropertyAccess.Read,
        new Guid( "...value provided by MSDN link..." ) );
...
// ouEntry is of type DirectoryEntry
ouEntry.ObjectSecurity.AddAccessRule( propertyAccessRule );
ouEntry.CommitChanges();

...
// Same for gPLink with the corresponding GUID 
```

请询问您是否需要更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:05:02.800

`List content`并且`List object`必须有所不同：

```
...
ActiveDirectoryAccessRule activeDirectoryAccessRule =
    new ActiveDirectoryAccessRule(
        identityReference,
        ActiveDirectoryRights.ListChildren | ActiveDirectoryRights.ListObject,
        AccessControlType.Allow,
        ActiveDirectorySecurityInheritance.None );
... 
```

`ActiveDirectoryAccessRule`必须将其添加到上述问题中的相应内容中`DirectoryEntry`。

# soap - WSDL 中的 xmlns 不正确

> ID：14323019
> 
> 赞同：3
> 
> 时间：2013-01-14T16:59:56.110
> 
> 标签：soap, soapui, xml-namespaces

我正在尝试将 WSDL 导入 SOAP-UI 项目 - 这是一个用于测试 SOAP 调用的简单工具。当我尝试导入 wsdl 时，出现以下错误：

> WSDLException（在 /wsdl:definitions/portType/wsdl:operation[1]/wsdl:input）：faultCode=UNBOUND_PREFIX：无法确定 'nrns:getDynamicsUploadQueueRequest 的命名空间

通过检查 WSDL，我发现定义区域下没有`xmlns:nrns`声明。我在一个论坛中读到，我可以将 WSDL 重新保存到磁盘并更正 WSDL。但是，我是一个极端的 SOAP 菜鸟，我不知道定义应该是什么。我认为，如果我只是将以下内容添加到定义区域，它应该可以解决问题。有谁知道我会用什么代替这些问号？我的方法完全错了吗？

```
xmlns:nrns="???" 
```

我不拥有或控制 WSDL。WSDL 和 XML 在下面供参考。

[https://apps.net-results.com/soap/v1/NRAPI.wsdl](https://apps.net-results.com/soap/v1/NRAPI.wsdl)

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name='NRAPI' targetNamespace='https://apps.net-results.com/soap/v1'
                  xmlns:nrtypens="https://apps.net-results.com/soap/v1/NRAPI.xsd"
                  xmlns:soap='http://schemas.xmlsoap.org/wsdl/soap/'
                  xmlns:xsd='http://www.w3.org/2001/XMLSchema'
                  xmlns:soapenc='http://schemas.xmlsoap.org/soap/encoding/'
                  xmlns:wsdl='http://schemas.xmlsoap.org/wsdl/'
                  xmlns='http://schemas.xmlsoap.org/wsdl/'> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:36:36.203

这是 WSDL 中的错误。看来“nrns”的意思是`https://apps.net-results.com/soap/v1`. 请注意，这是元素`targetNamespace`中的 WSDL 。`definitions`

所以只需添加

```
xmlns:nrns='https://apps.net-results.com/soap/v1' 
```

在`definitions`元素中，你应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T19:25:55.817

命名空间是一种将元素与特定类型相关联以避免名称冲突的方法。参考这里[http://www.w3schools.com/xml/xml_namespaces.asp](http://www.w3schools.com/xml/xml_namespaces.asp)

你几乎可以`???`，这应该可以解决你的问题。它不需要是任何有效的 URL，因为它永远不会在 Internet 上访问该 URL 并检查其有效性。

但是，我建议你从它的所有者那里得到更正`WSDL`，然后再使用它，否则你最终可能会遇到命名空间不匹配的问题，浪费大量时间。暂时要继续进行测试，您几乎可以在`<wsdl:definition>`标签中添加任何内容，例如：

```
xmlns:nrns="http://fakeurl.com" 
```

ps发挥你的想象力:)

# php - 如何从字符串中获取可变数字？

> ID：14323030
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:00:36.043
> 
> 标签：php, string

我有一个字符串链接：

```
<blog_lasts limit=2> 
```

但这部分可以更改：limit=5。id如何获取号码？

以及如何从更大的字符串中获取此字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:08:58.367

这是使用 preg_match_all()。它不是 HTML/XML 内容的首选，但不知道是否可以通过 DOMDocument 或仅通过字符串加载，这是最简单的方法。

```
$str = '<blog_lasts limit=2>';
preg_match_all("/<blog_lasts limit=(.*?)>/",$str,$matches);
$num = $matches[1][0];
echo $num; 
```

# sql - 排除 Null 值在子查询中返回 0 行

> ID：14323031
> 
> 赞同：1
> 
> 时间：2013-01-14T17:00:45.107
> 
> 标签：sql, tsql, subquery, isnull

我正在尝试清理 SQL 服务器中的一些数据并在两个表之间添加一个外键。

我要删除的其中一个表中有大量孤立行。我不知道为什么下面的查询会在 MS SQL 服务器中返回 0 行。

--此查询不返回任何行

> select * from tbl_A where ID not in ( select distinct ID from tbl_B )

当我在子查询中包含 IS NOT NULL 时，我得到了我期望的结果。

-- 返回的行包含 tbl_A 中的所有记录，但不包含 tbl_B 中的所有记录

> select * from tbl_A where ID not in ( select distinct ID from tbl_B where ID is not null )

ID 列可以为空，并且包含空值。如果我只运行子查询，我会得到完全相同的结果，除了第一个查询按预期返回一个额外的 NULL 行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:11:26.387

这是`NOT IN`子查询的预期行为。当子查询返回单个`null`值`NOT IN`时将不匹配任何行。

如果您不想专门进行`null`检查，那么您将需要使用`NOT EXISTS`：

```
select * 
from tbl_A A
where not exists (select distinct ID 
                  from tbl_B b
                  where a.id = b.id) 
```

至于为什么`NOT IN`会引起问题，这里有一些讨论它的帖子：

[NOT IN vs. NOT EXISTS vs. LEFT JOIN / IS NULL](http://explainextended.com/2009/09/15/not-in-vs-not-exists-vs-left-join-is-null-sql-server/)

[不存在与不存在](http://sqlinthewild.co.za/index.php/2010/02/18/not-exists-vs-not-in/)

[NOT EXISTS vs. NOT IN vs. LEFT JOIN WHERE IS NULL 之间有什么区别？](https://stackoverflow.com/questions/2246772/whats-the-difference-between-not-exists-vs-not-in-vs-left-join-where-is-null)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:13:18.333

从逻辑的角度来看，使用等于 (=) 匹配 NULL 将返回 NULL 或 UNKNOWN，而不是 true/false。例如，参见[http://msdn.microsoft.com/en-us/library/aa196339(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa196339(v=sql.80).aspx)进行讨论。

如果您想在表 A 中包含在表 B 中没有 NULL 的情况下查找 NULL 值（如果 B 是“父”并且 A 是您想要的“外键”关系中的“子”），那么您需要第二个声明，类似于以下内容。此外，我建议使用表前缀或别名来限定 ID 字段，因为两个表中的字段名称相同。最后，我不建议将 NULL 值作为键。但无论如何：

```
select * from tbl_A as A where (A.ID not in ( select distinct B.ID from tbl_B as B ))
  or (A.ID is NULL and not exists(select * from tbl_B as B where B.ID is null)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:12:41.697

您可能关闭了 ANSI NULL。这会比较 null 值，因此 null=null 将返回 true。

在第一个查询前加上

```
SET ANSI_NULLS ON
GO 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:20:22.467

问题是空值的不可比性。如果您要问“不在”并且子查询中有空值，则它不能说任何东西绝对不存在，因为它将这些空值视为“未知”，因此在三值逻辑中答案始终是“未知” SQL 使用的。

当然，这一切都假设您已启用 ANSI_NULLS（这是默认设置）如果您将其关闭，那么 NULLS 突然变得可比较，它会给您结果，并且可能是您期望的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T17:23:08.177

如果 id 永远不会是负数，您可能会考虑类似：

```
select *
from tbl_A
where coalesce(ID, -1) not in ( select distinct coalesce(ID, -1) from tbl_B ) 
```

（或者如果`id`是一个字符串，使用 something line `coalesce(id, '<null>')`）。

这可能并非在所有情况下都有效，但它在编码级别具有简单性的优点。

# css - IE 不遵循样式规则

> ID：14323034
> 
> 赞同：0
> 
> 时间：2013-01-14T16:18:14.017
> 
> 标签：css, internet-explorer

为客户创建一个 Wordpress 驱动的网站 - [http://www.2sleeptight.com](http://www.2sleeptight.com)

在主流浏览器中看起来还可以，除了在 IE 中存在一些严重的问题。导航不会水平显示，并且网站标题颜色错误。有 2 个样式表，style.css（主样式表）和 custom.css（我对 style.css 所做的编辑）

Wordpress 主题甚至将标题颜色样式直接注入到页眉中：

```
#header .site-title a {font:bold 60px/1em 'Rancho', arial, sans-serif;color:#ffc600;} 
```

但是 IE 仍然会在某处拾取那种灰色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:33:22.713

spogue，问题是你的 CSS 的顺序。这些值被您的其他 CSS 文件继承，并且因为它们是最后执行的，所以它们成为主文件。

只需将其添加到 CSS 文件的底部即可。

```
.site-title a {color:#FFC600!important;} 
```

# java - .contains() 用于 Java 中的嵌套数组

> ID：14323037
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:01:06.977
> 
> 标签：java, arrays, charts

我有一个代表条形图的 2D StringArray。第一个维度表示列（或高度），第二个维度表示行（或宽度）。最后一个元素是图表的底部。

因此，如果数组的第二维中没有元素，则条形图会到达顶部。为了避免打印所有空图表，我实现了这个：

`Arrays.toString(histogramm[i]).contains("x")`

但它似乎检查整个数组是否包含 x，而不仅仅是第 2 维

```
//Print
     System.out.println();
     for (int i = 0; i < 50; i++){
        //only if there is any value, otherwise lots of empty space
        if(Arrays.toString(histogramm[i]).contains("x")){
                System.out.print("      ");
           for (int f = 0; f < 5; f++){
              System.out.print(histogramm[i][f] + " ");
           }
        }
        System.out.println();
     } 
```

如何检查单个维度中的值，而不是整个图表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:20:36.790

要在每个步骤中轻松找到 x 而无需转换 Arrays.toString() ，您最好使用 ArrayList 而不是 array[] 作为直方图。

```
List<List<String>> histogram = new ArrayList<ArrayList<String>>(); 
```

访问：直方图（x，y）；

```
histogram.get(x).get(y); 
```

搜索所有：对于任何现有的 x

```
boolean isFound = false;
// using classical for loop
for(int x = 0; x < histogram.size(); x++) {
   ylist = histogram.get(x);
   // using for each
   for (String yval: xlist) {
      if (yVal.equals("x")) {
         isFound = true;
      }
   }  
}

if (isFound) {
  // action for found
} 
```

# scala - 为 sbt 自定义任务禁用聚合

> ID：14323038
> 
> 赞同：1
> 
> 时间：2013-01-14T17:01:17.413
> 
> 标签：scala, sbt

如何禁用单个自定义任务的聚合？

我尝试将以下内容添加到我的`build.sbt`：

```
aggregate in myTaskName:= false 
```

但它不像我预期的那样工作 - 我有这个错误：

```
~\build.sbt:1: error: not found: value myTaskName
aggregate in myTaskName:= false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-15T20:11:55.157

工作示例（sbt 0.13.5）：

```
val hello = TaskKey[Unit]("hello", "Prints 'Hello Zhu'")

val helloTask = hello := {
  println("Hello Zhu")
}

aggregate in hello := false 
```

请注意，这`TaskKey`是使用的 - 而不是`Setting[Task]`本身。值得额外注意的是，您应该可以访问此密钥，`build.sbt`并且正如@Mark Harrah 所提到的，`hello`它必须是完全合格的。

# c - faacEncOpen 为什么 maxOutput bytes 是 unsigned long *

> ID：14323039
> 
> 赞同：0
> 
> 时间：2013-01-14T17:01:21.210
> 
> 标签：c, libfaac

我正在尝试使用`libfaac`，我很好奇为什么`faacEncOpen()`接收`maxOutputBytes`， `unsigned long*`因为它只是说有多少字节可以写入输出缓冲区。

那么为什么它是一个指针呢？

# nhibernate - Envers 不保存审计-Nhibernate

> ID：14323040
> 
> 赞同：0
> 
> 时间：2013-01-14T17:01:22.580
> 
> 标签：nhibernate, nhibernate-envers

我有以下envers配置：

```
 hibernateCfg.SetEnversProperty(ConfigurationKey.DefaultSchema, "audit");
        hibernateCfg.SetEnversProperty(ConfigurationKey.RevisionFieldName, "Rev");
        hibernateCfg.SetEnversProperty(ConfigurationKey.RevisionTypeFieldName, "RevType");
        hibernateCfg.SetEnversProperty(ConfigurationKey.AuditTableSuffix, "_Audit");

        var cfg = new FluentConfiguration();
        cfg.SetRevisionEntity<RevisionInfo>(x => x.Id, x => x.RevisionTimestamp, new RevisionListener());

        cfg.Audit<User>().Exclude(x=>x.Account).Exclude(x=>x.Agentie).Exclude(x=>x.Location).Exclude(x=>x.Produse).Exclude(x=>x.Roles);
        //cfg.Audit<Account>().ExcludeRelationData(x => x.Users);
        //cfg.Audit<Document>();

        hibernateCfg.IntegrateWithEnvers(new EnhancedAuditEventListener(), cfg); 
```

没有创建审计表，也没有保存数据。我曾尝试`audit.User_Audit`自己创建表格，但没有任何变化。我有 nhibernate envers 1.30 和 nhibernate 3.3.1。

我需要其他配置来完成这项工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T09:05:07.940

我解决了。问题是我有一些来自用户的派生类（如 BrokerUser ：用户），我将其与鉴别器一起使用。我添加后：

```
cfg.Audit<BrokerUser>() 
```

问题解决了。

# javascript - Javascript 函数 window.location.href

> ID：14323042
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:01:28.680
> 
> 标签：javascript, jquery, function

我正在尝试更改线路

```
var url = window.location.href; 
```

指向可以获取实际页面的短链接的 API。

我的想法是这样设置

```
var url = 'http://bit.ly/api.php?url=' . urlencode('http://' . $_SERVER['HTTP_HOST']  . $_SERVER['REQUEST_URI'])); 
```

并将其发送到 Twitter

```
var twit = 'http://twitter.com/home?status='+title+'%20'+url; 
```

获取我有语法错误但不知道是哪一个的报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:04:00.750

*   JavaScript 连接运算符`+`不是`.`
*   `urlencode`是一个PHP函数，你想要`encodeURIComponent`
*   `$_SERVER`是一个 PHP 超全局，你还想要`location.href`

这样的：

```
var url = 'http://bit.ly/api.php?url=' + encodeURIComponent(location.href); 
```

# python - 检查一个键是否存在并且它的值不是 Python 字典中的空字符串

> ID：14323045
> 
> 赞同：27
> 
> 时间：2013-01-14T17:01:33.977
> 
> 标签：python, dictionary, string

从 Python 字典中的键/值对分配变量是否有明确的最佳实践：

*   如果密钥存在
*   如果键的值不是空字符串

否则为变量分配默认值。

我想使用`dict.get`：

```
my_value = dict.get(key, my_default) 
```

但是，`my_value`如果键存在并且值是空字符串，则会分配一个空字符串。使用以下内容是否更好：

```
if key in dict and dict[key]:
    my_value = dict[key]
else:
    my_value = my_default 
```

这将利用空字符串的真实性来确保仅将非空字符串分配给`my_value`.

有没有更好的方法来执行此检查？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-14T17:06:44.117

也许你的意思是：

```
a.get('foo',my_default) or my_default 
```

我认为应该等同于`if-else`您的条件

例如

```
>>> a = {'foo':''}
>>> a.get('foo','bar') or 'bar'
'bar'
>>> a['foo'] = 'baz'
>>> a.get('foo','bar') or 'bar'
'baz'
>>> a.get('qux','bar') or 'bar'
'bar' 
```

与其他版本相比，它的优势非常明显。这很好，因为您只需要执行一次查找并且因为`or`短路（一旦遇到`True`类似的值，它就会返回它。如果没有找到类似 True 的值，则`or`返回第二个）。

如果您的默认值是一个函数，那么*如果*您将其编写为： `d.get('foo',func()) or func()`. 在这种情况下，最好使用一个临时变量来保存`func`.

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-14T17:20:58.207

做你想做的最简单的方法：

```
my_value = dict.get(key) or my_default 
```

`or`如果评估为非假，则将提供第一个值，否则将提供第二个值。与其他语言不同，Python 不会强制结果为布尔值，有时这是一个非常有用的属性。

# python - 在 Python 中解析换行符

> ID：14323056
> 
> 赞同：0
> 
> 时间：2013-01-14T17:02:00.097
> 
> 标签：python, parsing, file-io, newline

我正在开发一个相当基本的编码器/解码器，您可以在其中输入自己的文本文件（作为字符串）和自己的编码器（也作为字符串：它必须是文本文件）。

这是我的解码器功能：

```
def cDecode(file_name, encoder='standard_encoder.txt', save_new=True): # does not decode multi-lines correctly -- everything goes on a single line. See next comment
    '''Decodes <'file_name'> with the reverse method of <'encoder'>.'''
    if type(file_name) != str or type(encoder) != str: raise TypeError("<'file_name'> and <'encoder'> must be of type <'str'>.")
    if type(save_new) != bool: raise TypeError("<'save_new'> must be of type <'bool'>.")
    if file_name[-4:] != '.txt': file_name += '.txt'
    if encoder[-4:] != '.txt': encoder += '.txt'
    decoder_set = {}
    try:
        with open(encoder, 'r') as encoding_file:
            for line in encoding_file:
                line_parts = line.split(': ')
                my_key, my_value = line_parts[1], line_parts[0] 
```

我认为错误在这里：我必须删除'\ n'，因为每个字符（在解码文件中）都在一个新行上，例如：'A：Ð'。

```
 if '\n' in my_key:
                        loc = my_key.find('\n') # this may be the cause of the single-line of the decoding.
                        my_key = my_key[:loc] + my_key[loc + 1:]
                decoder_set[my_key] = my_value
        encoding_file.close()
    except IOError:
        encoder = 'standard_encoder.txt'
        with open(encoder, 'r') as encoding_file:
            for line in encoding_file:
                line_parts = line.split(': ')
                my_key, my_value = line_parts[1], line_parts[0]
                # every key has a new line character automatically because it's on a different line
                if '\n' in my_key:
                        loc = my_key.find('\n')
                        my_key = my_key[:loc] + my_key[loc + 1:]
                decoder_set[my_key] = my_value
        encoding_file.close()
    decodingKeys = decoder_set.keys() 
```

这是函数的其余部分：

```
 if save_new:
        try:
            decoded_file_name = file_name[:-12] + '_decoded' + file_name[-4:]
            encoded_file = open(decoded_file_name, 'a+')
            with open(file_name, 'r') as my_file:
                for line in my_file:
                    de_line = ''
                    for char in line:
                        if char in decodingKeys: de_char = decoder_set[char]
                        else: de_char = char
                        de_line += de_char
                    encoded_file.write(de_line)
        except IOError:
            raise NameError(file_name + ' was not found. Decoding process terminated.')
    else:
        try:
            import os
            encoded_file = file_name[:-12] + '_decoded' + file_name[-4:]
            with open(file_name, 'r+') as my_file:
                for line in my_file:
                    de_line = ''
                    for char in line:
                        if char in decodingKeys: en_char = decoding_set[char]
                        else: de_char = char
                        de_line += de_char
                    encoded_file.write(de_line)
                os.remove(file_name)
                os.rename(encoded_file, file_name)
        except IOError:
            raise NameError(file_name + ' was not found. Decoding process terminated.') 
```

假设我有一个多行文本文件：

```
This is a test.
As is this one.
Good bye! 
```

当编码然后解码时，它显示如下：`This is a test.As is this one.Good bye!`.

我怎样才能解决这个问题？我希望它会显示为：

```
This is a test.
As is this one.
Good bye! 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:04:52.910

添加一段`'\n'`时间将行写回文件：

```
encoded_file.write(de_line+'\n') 
```

# ios - iOS - 多线程 - 显示带有搜索的视图...并同时执行代码

> ID：14323061
> 
> 赞同：0
> 
> 时间：2013-01-14T17:02:17.500
> 
> 标签：ios, objective-c, cocoa-touch

我正在尝试获取 JSON 数据并对其进行解码，同时取消隐藏显示`UIActivityIndicator`和`UILabel`(@"searching...") 的视图，以便用户知道应用程序正在搜索。

这是它应该如何工作的：

1.  用户点击“搜索按钮”
2.  `IBAction`方法取消隐藏搜索视图并同时获取和解码数据（我可以单独执行这些操作，而不是一起执行）。
3.  `[self performSegueWithIdentifier:]`搜索完成后使用将新视图推送到堆栈上。

我试过使用 dispatch_queue 但这样做不会让我在不完全绕过其他代码的情况下将新视图推送到堆栈上（至少我这样做的方式是这样）。我被告知要使用`NSConnection`，但我查看了 API 并且对如何使用它来完成此操作一无所知。

```
dispatch_queue_t myQueue = dispatch_queue_create("myQueue", NULL);

dispatch_async(myQueue, 
^{ 
    //...URL Request, parse JSON, etc.

    dispatch_async(dispatch_get_main_queue(), 
    ^{
        searchingView.hidden = NO;
        [spinner startAnimating];

      });
 });

 [self performSegueWithIdentifier:@"aSegue"]; 
```

这种方式跳过所有代码并立即执行segue。如果我将它与其余代码一起放在 dispatch_queue 中，它会执行代码，但不执行 segue。最后，使用此方法，它首先执行搜索，然后显示视图。我需要相反的。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:06:58.427

我会在分派工作之前显示搜索视图，并在读取和解析 JSON 之后使用分派到主队列来执行转场。

```
searchingView.hidden = NO;
[spinner startAnimating];

dispatch_async(myQueue, ^{ 
    //...URL Request, parse JSON, etc.

    dispatch_async(dispatch_get_main_queue(), ^{
         [self performSegueWithIdentifier:@"aSegue"];
    });
}); 
```

# .net - .NET Image.Save() 忽略已更改的 TIFF 属性项

> ID：14323066
> 
> 赞同：0
> 
> 时间：2013-01-14T17:02:29.730
> 
> 标签：.net, tiff

情况：我有一个文件，其中包含文本数据和许多二进制 TIFF 图像。我需要更改一些 tiff 属性标签，因为在将它们放入该文件之前最初创建 tiff 时，它们的配置错误。因此，我将二进制数据转储到 byte[]，然后转储到 MemoryStream，然后转储到 Image，然后继续从 Image.PropertyItems 中删除所有 PropertyItems，然后通过 Image.SetPropertyItem() 重新创建我自己的标签。最后，我使用正确的编码器信息和编码器参数执行 Image.Save()。

问题：创建的文件不包含我创建的所有属性项，并且我更改的某些项已被完全忽略。属性项中的数据类型也已被忽略（短已更改为长等）。这就像 Image.Save() 重写它想要的任何东西。更具体地说，我将 ImageWith 和 ImageLength 属性指定为 SHORT，并将它们写为 LONG。而且 PlanarConfig 属性项甚至根本没有被写入。

这是我的一些代码：（知道为什么会发生这种情况以及如何解决吗？）

```
const int SHORT = 3;
const int SHORT_LEN = 2;
const int LONG = 4;
const int LONG_LEN = 4;
const int RATIONAL = 5;
const int RATIONAL_LEN = 8;

byte[] bytesFront = bco.Records[0].Fields[4].Data;
byte[] bytesRear = bco.Records[0].Fields[6].Data;
MemoryStream msFront = new MemoryStream(bytesFront);
Bitmap imgFront = (Bitmap)Image.FromStream(msFront);

PropertyItem pi = imgFront.GetPropertyItem(imgFront.PropertyIdList.First<int>());

foreach (PropertyItem currentPropertyItem in imgFront.PropertyItems)
{
    imgFront.RemovePropertyItem(currentPropertyItem.Id);
}

// SubFile Type
pi.Id = 254;
pi.Type = LONG;
pi.Len = LONG_LEN;
pi.Value = GetBytes((uint)0);
imgFront.SetPropertyItem(pi);

// Image Width
pi.Id = 256;
pi.Type = SHORT;
pi.Len = SHORT_LEN;
pi.Value = GetBytes((ushort)imgFront.Width);
imgFront.SetPropertyItem(pi);

//...

// Planar Config
pi.Id = 284;
pi.Type = SHORT;
pi.Len = SHORT_LEN;
pi.Value = GetBytes((ushort)1);
imgFront.SetPropertyItem(pi);

// Resolution Unit
pi.Id = 296;
pi.Type = SHORT;
pi.Len = SHORT_LEN;
pi.Value = GetBytes((ushort)2);
imgFront.SetPropertyItem(pi);

ImageCodecInfo encoderInfo = ImageCodecInfo.GetImageEncoders().First(i => i.MimeType == "image/tiff");
EncoderParameters encoderParameters = new EncoderParameters(1);
encoderParameters.Param[0] = new EncoderParameter(System.Drawing.Imaging.Encoder.Compression, (long)EncoderValue.CompressionCCITT4);

imgFront.Save(@"C:\Temp\imgFront.tif", encoderInfo, encoderParameters); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:53:39.797

好的，所以我了解到，.NET Framework 可能不是 TIFF 的最终权威，它实际上可以做任何想做的事情。你几乎无法控制它。我最终学会了使用 LibTiff.NET 并使用以下代码来做我需要的事情：

```
byte[] bytesOriginal = bco.Records[0].Fields[4].Data;
MemoryStream streamOriginal = new MemoryStream(bytesOriginal);

streamOriginal.Seek(0, SeekOrigin.Begin);
Tiff tiffMemory = Tiff.ClientOpen("In-Memory", "r", streamOriginal, new TiffStream());
Tiff tiffFile = Tiff.Open(@"C:\Temp\imgTest2.tif", "w");

tiffFile.SetField(TiffTag.SUBFILETYPE, tiffMemory.GetField(TiffTag.SUBFILETYPE).First());
tiffFile.SetField(TiffTag.IMAGEWIDTH, tiffMemory.GetField(TiffTag.IMAGEWIDTH).First());
tiffFile.SetField(TiffTag.IMAGELENGTH, tiffMemory.GetField(TiffTag.IMAGELENGTH).First());
tiffFile.SetField(TiffTag.BITSPERSAMPLE, tiffMemory.GetField(TiffTag.BITSPERSAMPLE).First());
tiffFile.SetField(TiffTag.COMPRESSION, tiffMemory.GetField(TiffTag.COMPRESSION).First());
tiffFile.SetField(TiffTag.PHOTOMETRIC, tiffMemory.GetField(TiffTag.PHOTOMETRIC).First());
tiffFile.SetField(TiffTag.STRIPOFFSETS, tiffMemory.GetField(TiffTag.STRIPOFFSETS).First());
tiffFile.SetField(TiffTag.ORIENTATION, tiffMemory.GetField(TiffTag.ORIENTATION).First());
tiffFile.SetField(TiffTag.SAMPLESPERPIXEL, tiffMemory.GetField(TiffTag.SAMPLESPERPIXEL).First());
tiffFile.SetField(TiffTag.ROWSPERSTRIP, tiffMemory.GetField(TiffTag.ROWSPERSTRIP).First());
tiffFile.SetField(TiffTag.STRIPBYTECOUNTS, tiffMemory.GetField(TiffTag.STRIPBYTECOUNTS).First());
tiffFile.SetField(TiffTag.XRESOLUTION, tiffMemory.GetField(TiffTag.XRESOLUTION).First());
tiffFile.SetField(TiffTag.YRESOLUTION, tiffMemory.GetField(TiffTag.YRESOLUTION).First());
tiffFile.SetField(TiffTag.PLANARCONFIG, tiffMemory.GetField(TiffTag.PLANARCONFIG).First());
tiffFile.SetField(TiffTag.RESOLUTIONUNIT, tiffMemory.GetField(TiffTag.RESOLUTIONUNIT).First());

tiffFile.CheckpointDirectory();

byte[] bytesNew = new byte[tiffMemory.RawStripSize(0)];
tiffMemory.ReadRawStrip(0, bytesNew, 0, bytesNew.Length);
tiffFile.WriteRawStrip(0, bytesNew, bytesNew.Length);

tiffMemory.Close();
tiffFile.Close(); 
```

# java - 以编程方式处理 java 源文件和类文件

> ID：14323067
> 
> 赞同：1
> 
> 时间：2013-01-14T17:02:33.437
> 
> 标签：java, compilation, system-console

为了尽可能简洁，我将把它分成两个问题。前段时间我开始制作一个用于教育目的的文本编辑器，并且一直在这里和那里添加。在此过程中，我决定希望它编译和运行 java 程序。我使用`JavaCompiler`类来编译和一个简单的`exec()`方法来执行命令以在控制台中运行程序。源代码变得一团糟，可能是因为它是用无组织的随机代码块编写的，所以我最近决定重写它。在重写程序时，我在文本区域下方添加了一个控制台窗口，以显示编译器的控制台输出以及运行时引发的任何异常等。

在编写代码以通过`JavaCompiler`a 显示来自或控制台输出的输出时，`BufferedInputStream`我意识到我正在做这两件事，我一直认为它们以非常不同的方式相似。我的第一个问题主要是问你的意见，我不知道 Java 中有一个类会像简单的 IDE 一样运行 java 程序，所以执行控制台命令是我知道的唯一方法，同样可能是完成使用 javac 命令编译代码，我很好奇使用`JavaCompiler`该类是否有任何优势？

最后，我一直在为这个东西添加一些简洁的功能。我希望能够跟踪和组织 java 项目，因为我正在编译和运行 java 程序。我希望能够知道任何给定文件属于哪个项目，以及能够区分项目中的包和目录，以便我可以查看包文件夹以编译源文件并执行正确的运行命令从二进制文件夹中运行它，Java 是否提供了一种方法来执行此操作，还是我将不得不做一些事情，例如创建从文件继承但具有附加字段来确定文件类型（目录或包）的自定义类？还是有更好的方法来实现这一点？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:02:40.373

你提出的两个问题是齐头并进的。让我们从元数据开始。弄清楚如何跟踪 IDE 的项目元数据的最佳方法是查看已建立的项目如何尝试执行此操作。

Eclipse 和 Netbeans 都使用在项目根目录中创建的项目文件夹来保存元数据（`.settings`在 Eclipse 中，`.nbproject`在 Netbeans 中）。源文件夹、编译器目标目录、源级别等元数据保存在元数据文件中，主要是 XML。

您可能想要遵循类似的内容，然后考虑添加常见的项目原型，例如`/src`and`/classes`或`/src/main/java`and `/target`。这导致您的问题的第二部分，编译。

Netbeans 本身并不直接使用编译器。Eclipse 可以，但那是因为 Eclipse 有自己的内部编译器实现来提供默认编译器中不可用的额外警告和配置。对于您的 IDE，我将看看 Netbeans 如何管理其项目并对其进行编译。Netbeans没有调用`javac`，而是使用 Ant 和一个内部`build.xml`文件。如果您不熟悉 Ant，它只是一个工具，允许您在 XML 中设置由 Ant 解释和运行的任务。例如，您可以使用 Ant 编译 Java 源代码、生成文档和创建分发 JAR。这是一个非常强大的工具，可让您将整个构建过程作为一种脚本自动化。

你可以遵循同样的想法。IDE 中的新项目将有一个默认`build.xml`文件，该文件将使用一些默认的 Ant 目标构建他们的项目。您也可以从中访问属性文件`build.xml`，因此您可以在属性文件中存储有关源目录的信息，以及要在构建脚本中使用的任何其他可定制信息，并将它们导入构建脚本中。这是一个示例设置。

文件结构：

```
| Project root/
|   .myideproject/
|     build.xml
|     project.properties
|     ui.properties
|   classes/
|     <compiled .class files>
|   doc/
|     <generated javadoc files>
|   lib/
|     <3rd-party .jar files needed for compilation>
|   src/
|     <user .java files> 
```

该`build.xml`文件是您的 IDE 用来编译内容的文件。您可以要求用户安装 Ant（一个快速而轻松的过程），也可以像 Netbeans 那样捆绑它（为您做更多的工作）。在任何一种情况下，如果你将你的嵌套`build.xml`在`.myideproject`目录中，你的构建文件将如下所示：

```
<project name="<User's project name>" default="compile" basedir="..">
    <!-- ... -->
</project> 
```

注意2点：

1.  “用户的项目名称”由用户在创建项目时提供。
2.  “默认”属性将指向构建文件中的目标。
3.  “basedir”属性将重新构建构建过程，使其指向项目根目录中的目录，而不是`.myideproject`.

接下来，您需要导入`project.properties`文件（`ui.properties`用于保存与 UI 相关的数据，而不是用于构建脚本，`project.properties`包含构建脚本正常运行所需的所有内容）。这是将属性导入 Ant 项目的方式：

```
<project ... >
    <import file=".myideproject/project.properties" />
    <!-- ... -->
</project> 
```

这将使用指令使所有属性`project.properties`可用`${propname}`。现在，`src`和`classes`是文件中的可配置目录`project.properties`，我们可以在`compile`目标中使用它们，如下所示：

```
<target name="compile">
    <javac srcdir="${src}"
        destdir="${target}"
        classpath="${classpath}"
        source="${src.jdk}"
        target="${target.jdk}"
        debug="on"
        debugLevel="lines,vars,source" />
</target> 
```

对于上述目标，属性文件可能如下所示：

```
# delimits source directories containing .java files using ':'
src=src1:src2
# only 1 directory, it's where the .class files go
target=classes
# ':'-delimited list of jars or globs which are needed for compilation
classpath=lib/*
# Determines the -source value on the javac process
src.jdk=1.6
# Determines the -target value on the javac process
target.jdk=1.6 
```

评论只是为了清楚起见。此属性文件将使用用户输入从您的 IDE 的 UI 构建，因此如果他们添加或删除源文件夹，`src`属性文件中的值会自动更改，然后他们可以重建该过程。

这应该足以让你开始。需要考虑的一些事项：

*   您将需要一个`run`使用`java`任务的目标以及 IDE 设置的属性来告诉它哪个类用于主方法。
*   您可能还需要考虑对 Maven 项目的支持，它可以帮助用户自动解决依赖关系。这对你来说是更多的工作，你可能应该等到你完成 Ant 支持
*   您需要将标准输出/错误/输入从 Ant 进程重定向到用户可以与之交互的东西。您不必支持标准输入，但您至少应该支持标准输出/错误

根据您的评论的最后一句话：您需要将 a`JTree`与扩展的自定义节点类一起使用`DefaultMutableTreeNode`以创建视图，但它不必是文件结构的视图，而只是项目的视图，所以也许它可能是这样的：

```
+ Project 1 Name
| + Source Folder 1
|     <.java files>
| + Source Folder 2
|     <.java files>
| + Source Folder 3
|     <.java files>
+ Project 2 Name
| + Source Folder 1
|     <.java files>
| + Source Folder 2
|     <.java files>
| + Source Folder 3
|     <.java files> 
```

该结构可以基于文件系统，但只显示用户需要的信息，例如他的源目录。你可以从那里扩展这个想法。

祝你好运，听起来是个有趣的项目。希望我的建议有一定的意义，可以帮助你。让我知道是否有任何需要澄清的地方。

# java - Java如何在图像下方添加字符串并调整其大小？

> ID：14323068
> 
> 赞同：1
> 
> 时间：2013-01-14T17:02:34.403
> 
> 标签：java, image, graphics, graphics2d, java-2d

我正在尝试在 png 图像下方添加一个标题字符串。问题是文本没有空间，我必须添加一些空格。我不知道该怎么做。这是我到目前为止所做的：

```
 BufferedImage image = ImageIO.read(new File("output.png"));
        Graphics g = image.getGraphics();
        g.setFont(g.getFont().deriveFont(30f));
        g.setColor(Color.BLACK);
        g.drawString("Hello World!", 100, 350);
        g.dispose();
        ImageIO.write(image, "png", new File("test.png")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:22:11.907

为什么不简单地将所需的间距添加到新`BufferedImage`的 s 高度？

这是我做的一个例子：

![在此处输入图像描述](../Images/6fe80fdf0098b7aec500f5b79d3af18b.png)

真正的魔法发生在这里：

```
private BufferedImage drawTextOnImage(String text, BufferedImage image, int space) {
    BufferedImage bi = new BufferedImage(image.getWidth(), image.getHeight() + space, BufferedImage.TRANSLUCENT);
    Graphics2D g2d = (Graphics2D) bi.createGraphics();
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON));

    g2d.drawImage(image, 0, 0, null);

    g2d.setColor(Color.BLACK);
    g2d.setFont(new Font("Calibri", Font.BOLD, 20));
    FontMetrics fm = g2d.getFontMetrics();
    int textWidth = fm.stringWidth(text);

    //center text at bottom of image in the new space
    g2d.drawString(text, (bi.getWidth() / 2) - textWidth / 2, bi.getHeight());

    g2d.dispose();
    return bi;
} 
```

上述方法将允许您传入文本、对图像的引用以及要添加的间距量。然后它将在指定空间内将字符串绘制到图像上。图像在通过以下方法传递给上述方法 ( `drawTextOnImage(..)`) 之前调整大小：

```
public static BufferedImage resize(BufferedImage image, int width, int height) {
    BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
    Graphics2D g2d = (Graphics2D) bi.createGraphics();
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));
    g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
    g2d.drawImage(image, 0, 0, width, height, null);
    g2d.dispose();
    return bi;
} 
```

**测试.java：**

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.net.URL;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test {

    public Test() {
        createAndShowGui();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    private void createAndShowGui() {
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        BufferedImage bi = null;
        try {
            bi = ImageIO.read(new URL("http://cs.anu.edu.au/student/comp6700/icons/DukeWithHelmet.png"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        BufferedImage resizedImage = resize(bi, 200, 200);

        final BufferedImage textRenderedImage = drawTextOnImage("Hello", resizedImage, 15);

        JPanel p = new JPanel() {
            @Override
            protected void paintComponent(Graphics grphcs) {
                super.paintComponent(grphcs);
                Graphics2D g2d = (Graphics2D) grphcs;
                g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
                g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));
                g2d.drawImage(textRenderedImage, 0, 0, null);
            }

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(textRenderedImage.getWidth(), textRenderedImage.getHeight());
            }
        };

        frame.add(p);
        frame.pack();
        frame.setVisible(true);
    }

    private BufferedImage drawTextOnImage(String text, BufferedImage image, int space) {
        BufferedImage bi = new BufferedImage(image.getWidth(), image.getHeight() + space, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_TEXT_ANTIALIASING, RenderingHints.VALUE_TEXT_ANTIALIAS_ON));

        g2d.drawImage(image, 0, 0, null);

        g2d.setColor(Color.BLACK);
        g2d.setFont(new Font("Calibri", Font.BOLD, 20));
        FontMetrics fm = g2d.getFontMetrics();
        int textWidth = fm.stringWidth(text);

        //center text at bottom of image in the new space
        g2d.drawString(text, (bi.getWidth() / 2) - textWidth / 2, bi.getHeight());

        g2d.dispose();
        return bi;
    }

    public static BufferedImage resize(BufferedImage image, int width, int height) {
        BufferedImage bi = new BufferedImage(width, height, BufferedImage.TRANSLUCENT);
        Graphics2D g2d = (Graphics2D) bi.createGraphics();
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON));
        g2d.addRenderingHints(new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY));
        g2d.drawImage(image, 0, 0, width, height, null);
        g2d.dispose();
        return bi;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:11:58.760

要将空白添加到 BufferedImage 的底部，您必须创建一个新的 BufferedImage 并复制该图像。

第 3 行的 30 是 30 像素的空白。替换您希望获得所需空白量的任何数字。

```
 BufferedImage image = ImageIO.read(new File("output.png"));
        BufferedImage newImage = new BufferedImage(image.getWidth(), 
            image.getHeight() + 30, BufferedImage.TYPE_INT_ARGB);
        Graphics g1 = image.getGraphics();
        Graphics g2 = newImage.getGraphics();
        g2.setColor(Color.WHITE);
        g2.fillRect(0, 0, newImage.getWidth(), newImage.getHeight());
        g2.drawImage(image, 0, 0, image.getWidth(), image.getHeight(), null); 
```

# jquery - 全屏html5并打开另一个链接

> ID：14323071
> 
> 赞同：1
> 
> 时间：2013-01-14T17:02:42.890
> 
> 标签：jquery, html, fullscreen

所以我做了一个全屏切换按钮，但是当我处于全屏浏览模式并单击另一个链接时，会出现导航栏。

有没有办法隐藏导航栏，以便我的访问者可以全屏浏览我的网站（当转到其他内部链接时）？

我知道我可以使用 iframe，但我不想这样做。（在 stackoverflow 上有一个类似的问题，没有回答，但是 [HTML 5 全屏站点在内部链接上退出全屏模式](https://stackoverflow.com/questions/12841018/html-5-full-screen-site-exits-full-screen-mode-on-internal-links)）

干杯!

```
$('#fullscreen').toggle(
    function(){
        if (docElm.requestFullscreen) {
            docElm.requestFullscreen();
        }
        else if (docElm.mozRequestFullScreen) {
            docElm.mozRequestFullScreen();
        }
        else if (docElm.webkitRequestFullScreen) {
            docElm.webkitRequestFullScreen();
        }
        else if (docElm.msRequestFullScreen) {
            docElm.msRequestFullScreen();
        }
    },
    function(){
        if (document.exitFullscreen) {
            document.exitFullscreen();
        }
        else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
        }
        else if (document.webkitCancelFullScreen) {
            document.webkitCancelFullScreen();
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:54:47.337

似乎有一个事件处理程序。尝试：

```
document.addEventListener("fullscreenchange", function (e) { 
   e.stopPropagation();
}); 
```

您当然需要仅在他们没有点击“退出全屏按钮”时才应用它，否则他们会被卡住。

# java - 将文档根节点与前缀匹配

> ID：14323073
> 
> 赞同：0
> 
> 时间：2013-01-14T17:02:44.583
> 
> 标签：java, xml, xslt, xalan

我有一个根节点所在的 XML 文档，`sv:node`我正在尝试定义一个与该根节点匹配的模板。
当我的根节点没有前缀时，它通常可以工作，但在这种情况下会引发异常。

```
<xsl:template name="/sv:node" /> 
```

我正在将 JAVA 与[Apache XALAN XSLT 处理器](http://xml.apache.org/xalan-j/)一起使用，这会引发`RuntimeException`

```
Caused by: java.lang.RuntimeException: Le préfixe doit se convertir en espace de noms : /sv
    at org.apache.xml.utils.QName.<init>(QName.java:450)
    at org.apache.xalan.processor.XSLTAttributeDef.processQNAME(XSLTAttributeDef.java:937) 
```

*对于 的本地化消息，我深表歉意`RuntimeException`，基本上它是在抱怨前缀 with 未映射到命名空间。*

那么问题来了，怎么匹配这个根节点呢？

编辑：这是我的`stylesheet`标签这是我的样式表标签：

```
<xsl:stylesheet version="1.0" 
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:zip="http://apache.org/cocoon/zip-archive/1.0"
            xmlns:sv="http://www.jcp.org/jcr/sv/1.0"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:18:49.487

我怀疑你的意思是

```
<xsl:template match="/sv:node" /> 
```

（用`match`而不是`name`）。Using`<xsl:template name="...">`声明了一个可以被 调用的*命名模板*`<xsl:call-template>`，而不是 的*匹配模板*，`<xsl:apply-templates>`并且命名模板的名称必须是 QName。异常告诉您它试图将三个字符“正斜杠、s、v”视为 QName 的前缀部分，并发现此前缀未映射到 URI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:20:21.320

这是一个愚蠢的错误，我正在使用

```
<xsl:template name="/sv:node" /> 
```

代替

```
<xsl:template match="/sv:node" /> 
```

# php - MySQL注入查询

> ID：14323078
> 
> 赞同：2
> 
> 时间：2013-01-14T17:03:03.553
> 
> 标签：php, mysql, sql-injection

我熟悉准备好的语句，并且我知道它们是防止 MySQL 注入的最佳实践。但我想知道这个 PHP/MySQL 语句如何可能面临注入攻击的风险：

```
$result = mysqli_query($db,"SELECT name FROM users WHERE id = '".$_POST['name']."';"); 
```

在我看来，用户的输入将包含在单引号内。您可以在一条语句中执行多个查询`mysqli_query`吗？

此外，使上述安全就像这样简单......

```
$result = mysqli_query($db,"SELECT name FROM users WHERE id = '".mysqli_real_escape_string($_POST['name'])."';"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:07:06.910

> 在我看来，用户的输入将包含在单引号内

攻击者所要做的就是在名称 POST data 中加上一个单引号，这样就不会再有了。

```
name=' OR 1=1 
```

> 另外，使上述安全变得像这样简单吗

看起来不错……但它伤害了我的眼睛。使用准备好的语句。它们比通过将字符串连接在一起构建的 SQL 更容易阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T17:22:29.963

> 在我看来，用户的输入将包含在单引号内

除非您在张贴中包含单引号，否则`name`它将允许您跳出引号。例如，将名称发布为：

```
' or 1 or ' 
```

WHERE 子句变为：

```
WHERE id = '' or 1 or ''; 
```

由于该部分，这将匹配并检索表中的所有行`or 1`。正如你所看到的，它打破了引号以注入一些 SQL，然后它返回到引号中以使查询有效。

> 您可以在一条语句中执行多个查询`mysqli_query`吗？

不，但如果它是用`mysqli_multi_query`then yes 执行的，你可以在最后添加多个查询。

> 使上述安全变得一样容易`mysqli_real_escape_string`吗？

通常是的，但准备好的声明会更好。使用转义，`WHERE`子句将变为（使用我上面的示例）：

```
WHERE id = '\' or 1 or \''; 
```

这不再容易受到攻击，因为引号不能被打破，并且只会在`name`字面上匹配时才匹配行，`' or 1 or '`这显然不太可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:10:15.200

基本解释：

如果您只是按照第一个示例插入查询，则如果变量包含单引号字符`$_POST['name']`，则生成的 SQL 字符串将无效。`name`

这将立即惹恼任何名为 O'Brien 或类似名称的人。

但这可能会被黑客利用，黑客可以修改他的“名称”，在单引号后包含有效的 SQL 代码。这可以是任何有效的 SQL，允许黑客对您的数据库执行任何操作或从中查询任何内容。他能做什么将取决于您代码中的其他因素，但足以说明即使在最好的情况下，他也可以做​​一些非常具有破坏性的事情。

回答你的第二个问题：是的。转义使用`mysqli_real_escape_string()`将缓解这个问题。

但是，为了更进一步，您可能还想使用Prepared Queries 进行调查，这是`mysqli`扩展的一项功能。这可以使您的代码更整洁，因为它避免`mysqli_real_escape_string()`了在所有地方都使用那个讨厌的长函数名。它还具有其他好处，例如改进的查询缓存。

希望这有助于回答这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:08:11.450

如果我传递了以下值`$_POST['name']`怎么办？

```
'; DELETE FROM users WHERE name <> ' 
```

我将关闭第一个单引号，然后引入破坏性查询，该查询最后只有一个打开的引号，它将被原始查询中的单引号关闭。

你的第二个查询很好。虽然你真的应该考虑使用准备好的语句（由 mysqli 支持）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T17:09:00.693

如果您正在使用`mysqli`，则应**始终**使用 SQL 占位符方法来执行此操作。转义函数是困难的方法。

```
$stmt = $db->prepare("SELECT name FROM users WHERE id = ?");
$stmt->bind_param('i', $_POST['name']);
$stmt->execute(); 
```

如果你不了解这里的风险，你真的需要阅读一般的[SQL 注入攻击](http://bobby-tables.com/)，并阅读[自动化黑客工具](http://sqlmap.org/)可以对那些不够谨慎的人做什么。

# jquery - 使用 jQuery 访问列表项的文本

> ID：14323079
> 
> 赞同：2
> 
> 时间：2013-01-14T17:03:08.500
> 
> 标签：jquery, list, find

我需要在我的菜单中获取列表项的文本，但似乎无法获取它。

这是我的 div 中的菜单的外观：

```
 <div id='imgbox_1' class='unlocked'>
    <div id="imgbox_1_menu" class="menu">
    <ul class='dropdown'>
     <li><a href='#'> ▼ </a>
      <ul class='sub_menu'> 
          <li class='locker'>Lock</li>
          <li class='delete'>Delete</li>
      </ul>
     </li>
    </ul>
   </div>
</div> 
```

我正在尝试使用该类获取`li`文本`locker`：

`$('#imgbox_1').children('.menu').find('locker').text();`

但这不会返回任何东西。如果我尝试`...find('locker').html()`它说“未定义”。在这种情况下，我如何获取文本，即“锁定”？我需要将其更改为单击后，但我什至无法访问它。带有这些列表项的菜单是动态创建的，它不是从那里开始的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:04:22.473

你需要点。用于类选择器。你在储物柜前错过了点

**[现场演示](http://jsfiddle.net/ZxEre/)**

```
$('#imgbox_1').children('.menu').find('.locker').text(); 
```

或者

```
$('#imgbox_1  .menu  .locker').text(); 
```

或者，如果层次结构不重要

```
$('.locker').text(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:04:25.583

您缺少作为**`.`**类选择器的句点。

```
.find('.locker') 
```

# javascript - 为什么 backgroundColor=rgb(a,b,c) 不起作用？

> ID：14323082
> 
> 赞同：20
> 
> 时间：2013-01-14T17:03:27.013
> 
> 标签：javascript, html

```
<html>
    <head>
        <title> Colors </title>
    </head>

    <body>
    <script type="text/javascript">
        var a = parseInt(prompt("Enter R"));
        var b = parseInt(prompt("Enter G"));
        var c = parseInt(prompt("Enter B"));
        document.body.style.backgroundColor=rgb(a,b,c);
    </script>
    </body>
</html> 
```

为什么背景颜色不根据 RGB 值变化？我做错了什么？？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-14T17:06:02.047

您需要使用引号：

```
document.body.style.backgroundColor = 'rgb(' + a + ',' + b + ',' + c + ')'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mAVFs/1/)。

或者：

```
document.body.style.backgroundColor = 'rgb(' + [a,b,c].join(',') + ')'; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mAVFs/)。

*不带引号*的 JavaScript 将变量作为参数传递给一个未定义的函数`a`，称为. 当您设置 CSS 属性时，您需要传递一个字符串，因此需要*quoting*。`b``c``rgb()`

 *哦，而且你正在使用`parseInt()`它不需要*传入*基数，但如果你这样做会更好（并且更容易避免问题）（*基数*是预期的数字基数）：

```
var a = parseInt(prompt("Enter R"), 10) || 255,
    b = parseInt(prompt("Enter G"), 10) || 255,
    c = parseInt(prompt("Enter B"), 10) || 255; 
```

[JS Fiddle 演示](http://jsfiddle.net/davidThomas/mAVFs/2/)（在我使用的演示中`105`，很明显，如果使用`cancel`按钮，则使用默认值）。

如果有人在提示符下点击“取消”，您可能需要提供默认参数以确保传递实际的颜色值，因为`cancel`否则，我认为，评估为`false`（我假设您更喜欢`255`，但显然调整口味）。

当然，您也可以简单地定义一个函数：

```
function rgb(r,g,b) {
    return 'rgb(' + [(r||0),(g||0),(b||0)].join(',') + ')';
}
  var a = parseInt(prompt("Enter R"), 10),
      b = parseInt(prompt("Enter G"), 10),
      c = parseInt(prompt("Enter B"), 10);
  document.body.style.backgroundColor = rgb(a,b,c); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mAVFs/4/)

这种方法具有允许使用自定义默认值的（也许是似是而非的）好处：

```
function rgb(r,g,b, def) {
def = parseInt(def, 10) || 0;
    return 'rgb(' + [(r||def),(g||def),(b||def)].join(',') + ')';
}
var a = parseInt(prompt("Enter R"), 10),
    b = parseInt(prompt("Enter G"), 10),
    c = parseInt(prompt("Enter B"), 10);
document.body.style.backgroundColor = rgb(a,b,c,40); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/mAVFs/6/)

参考：

*   [`||`（逻辑`OR`）运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#Logical_operators)。
*   [`Array.join()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join).
*   [`Element.style`](https://developer.mozilla.org/en-US/docs/DOM/element.style).
*   [`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:08:00.857

在值周围使用引号

```
document.body.style.backgroundColor="rgb(" + a + "," + b + "," + c + ")"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:08:47.773

rgb 需要用引号引起来：

```
<html>
  <head>
      <title> Colors </title>
  </head>

  <body>
  <script type="text/javascript">
      var a = parseInt(prompt("Enter R"));
      var b = parseInt(prompt("Enter G"));
      var c = parseInt(prompt("Enter B"));
      document.body.style.backgroundColor='rgb(' + a + ',' + b + ',' + c + ')';
  </script>
  </body>
</html> 
```

jsFiddle [http://jsfiddle.net/pduQ6/](http://jsfiddle.net/pduQ6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:05:54.757

你没有调用函数`rgb(...)`

我认为你的意思是：

```
document.body.style.backgroundColor = "rgb(" + a + "," + b + "," + c + ");"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T17:08:13.480

问题是颜色需要是一个字符串：

```
var a = parseInt(prompt("Enter R"),10);
var b = parseInt(prompt("Enter G"),10);
var c = parseInt(prompt("Enter B"),10);
document.body.style.backgroundColor = "rgb(" + [a,b,c].join() + ")"; 
```

[演示](http://jsfiddle.net/jackmaney/yRgwq/)*

# deployment - Liferay 主题部署

> ID：14323092
> 
> 赞同：1
> 
> 时间：2013-01-14T17:04:01.663
> 
> 标签：deployment, liferay, liferay-6, liferay-theme

我为 Liferay 6.1.1 开发了一个自定义主题，它在我本地安装的 Liferay 上运行良好。当我尝试部署到我的 QA 服务器时，主题会显示在控制面板中，我可以在控制面板->网站页面->外观和感觉下分配新主题。

问题是认为分配了主题，我所做的自定义并没有反映在 UI 中。

我用来部署的过程是：

1.  使用 Eclipse“导出”功能创建 theme-name.war 文件。
2.  将war文件放在部署目录中。

有什么我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:39:18.070

尝试打开SDK 文件夹`build-common-theme.xml`下的 XML 文件`themes`并删除所有`preservelastmodified="true"`（或将它们设置为`false`）。

**preservelastmodified**，何时`true`不会更新主题项目中的文件时间戳。因此，您的应用程序服务器不会检测到更改并重新部署主题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:49:51.210

在我看来，您应该清除浏览器缓存，然后再次检查。这也发生在我的一个主题中。

# c++ - 是否有可复制但不可移动的类的用例？

> ID：14323093
> 
> 赞同：16
> 
> 时间：2013-01-14T17:04:13.987
> 
> 标签：c++, c++11, copy-constructor, move-semantics, deleted-functions

在阅读了@Mehrdad[最近提出](https://stackoverflow.com/questions/14302834/when-to-make-a-type-non-movable-in-c11/14303116#14303116)的关于哪些类应设为**不可移动因此不可复制的**问题后，我开始想知道是否存在**可以复制但不可移动**的类的用例。从技术上讲，这是可能的：

```
struct S
{
    S() { }
    S(S const& s) { }
    S(S&&) = delete;
};

S foo()
{
    S s1;
    S s2(s1); // OK (copyable)
    return s1; // ERROR! (non-movable)
} 
```

虽然`S`有一个复制构造函数，但它显然没有对`CopyConstructible`概念进行建模，因为这反过来又是对`MoveConstructible`概念的一种改进，它需要存在一个（未删除的）移动构造函数（参见第 17.6.3.1/2 节，表 21） .

`S`像上面这样的类型是否有任何用例，它是可**复制但不可复制** `CopyConstructible` **且不可移动的**？如果不是，**为什么不禁止**在同一个类中声明复制构造函数*和*删除的移动构造函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T17:11:05.130

假设你有一个类，移动起来并不比复制便宜（也许它包含`std::array`一个 POD 类型）。

从功能上讲，您“应该”将其设为 MoveConstructible，使其`S x = std::move(y);`行为类似于`S x = y;`，这就是 CopyConstructible 是 MoveConstructible 的子概念的原因。通常，如果您根本没有声明任何构造函数，这“就可以工作”。

*在实践中*，我想您可能希望*暂时*禁用移动构造函数，以便通过移动. 对我来说，禁止这样做似乎有些过分。在完整的代码中强制执行良好的界面设计不是标准的工作:-)*`S`*

 ** * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T20:12:59.680

我目前不知道删除移动构造函数/赋值的用例。如果不小心完成，它将不必要地阻止类型从工厂函数返回或放入`std::vector`.

但是，删除的移动成员是合法的，以防万一有人发现它们的用途。打个比方，`const&&`多年来我都知道毫无用处。人们问我我们是否不应该直接取缔它。但最终在我们获得了足够的该功能经验后，确实出现了一些用例。*删除的移动成员也可能*发生同样的情况，但据我所知还没有。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T17:09:54.637

我认为没有任何合理的课程可以阻止*move*，但允许*copy*。从同一个主题可以清楚地看出，当您不再需要原始对象时，移动只是一种有效的复制方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T17:04:30.580

我今天正在研究这个问题，因为我们已经将一些代码从 VS2005 移植到 VS2010 并开始看到内存损坏。原来是因为优化（以避免在进行地图查找时复制）没有转化为具有移动语义的 C++11。

```
class CDeepCopy
{
protected:
    char* m_pStr;
    size_t m_length;

    void clone( size_t length, const char* pStr )
    {
        m_length = length;
        m_pStr = new char [m_length+1];
        for ( size_t i = 0; i < length; ++i )
        {
            m_pStr[i] = pStr[i];
        }
        m_pStr[length] = '\0';
    }

public:
    CDeepCopy() : m_pStr( nullptr ), m_length( 0 )
    {
    }

    CDeepCopy( const std::string& str )
    {
        clone( str.length(), str.c_str() );
    }

    CDeepCopy( const CDeepCopy& rhs )
    {
        clone( rhs.m_length, rhs.m_pStr );
    }

    CDeepCopy& operator=( const CDeepCopy& rhs )
    {
        if (this == &rhs)
            return *this;

        clone( rhs.m_length, rhs.m_pStr );
        return *this;
    }

    bool operator<( const CDeepCopy& rhs ) const
    {
        if (m_length < rhs.m_length)
            return true;
        else if (rhs.m_length < m_length)
            return false;

        return strcmp( m_pStr, rhs.m_pStr ) < 0;
    }

    virtual ~CDeepCopy()
    {
        delete [] m_pStr;
    }
};

class CShallowCopy : public CDeepCopy
{
public:

    CShallowCopy( const std::string& str ) : CDeepCopy()
    {
        m_pStr = const_cast<char*>(str.c_str());
        m_length = str.length();
    }

    ~CShallowCopy()
    {
        m_pStr = nullptr;
    }
};

int _tmain(int argc, _TCHAR* argv[])
{
    std::map<CDeepCopy, int> entries;
    std::string hello( "Hello" );

    CDeepCopy key( hello );
    entries[key] = 1;

    // Named variable - ok
    CShallowCopy key2( hello );
    entries[key2] = 2;

    // Unnamed variable - Oops, calls CDeepCopy( CDeepCopy&& )
    entries[ CShallowCopy( hello ) ] = 3;

    return 0;
} 
```

上下文是我们希望在映射键已经存在的情况下避免不必要的堆分配 - 因此，CShallowCopy 类用于进行初始查找，然后如果这是插入，它将被复制。问题是这种方法不适用于移动语义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T11:01:27.807

这取决于您如何为您的类型定义移动操作的语义。如果移动仅仅意味着*通过资源窃取来优化副本，*那么答案可能是否定的。但是，如果移动意味着移动垃圾收集器或其他一些自定义内存管理方案所使用的“重定位”，那么答案可能是肯定的。

考虑一个位于特定街道地址上的房子的真实示例。可以将该房屋的副本定义为使用完全相同的蓝图建造的另一栋房屋，但位于另一个地址。在这些条件下，我们可以继续说房子不能移动，因为可能有人通过它的地址来指代它。转换为技术术语，对于具有入站指针的结构，移动操作可能是不可能的。

我可以想象一个[信号/插槽](http://en.wikipedia.org/wiki/Signals_and_slots)库的有点扭曲的实现，它允许复制其信号对象，但不允许移动它们。

免责声明：一些 C++ 纯粹主义者会指出 STL（以及标准）定义了什么是移动操作，它与我在这里描述的不符，所以我不会对此争论。*

# mysql - 过滤在mysql中存储为varchar的日期

> ID：14323103
> 
> 赞同：0
> 
> 时间：2013-01-14T17:04:42.923
> 
> 标签：mysql, date, varchar

我正在使用 MySQL 数据库，其中日期存储为 varchar，如下所示：

`'2013-01-31'`在列`cl_223`

我只需要选择 2013 年的记录，所以我尝试了：

```
SELECT ..
FROM ....

Where cl_223 Like '2013' 
```

但这似乎不起作用。

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:06:47.147

您必须添加`%`为通配符：

```
SELECT ..
FROM ....

WHERE cl_223 LIKE '2013%' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:14:11.657

在 varchar 列中存储 datettime 值会使日期时间操作的某些功能复杂化。但是当然你可以选择你的值写这样一个查询如下

```
SELECT * FROM table_name WHERE cl_223 LIKE '2013%' 
```

但是，如果您没有任何性能问题，您可以将 varchar 列转换为 datetime 值并编写更强的类型化查询，如下所示：

```
 SELECT * FROM table_name WHERE  STR_TO_DATE(cl_223,'%Y-%m-%d2') BETWEEN '2013-01-01' AND '2013-12-31' 
```

但是，如果您在流程中需要日期时间值作为日期时间，则最好将其存储在 datetime 列而不是 varchar 列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:08:19.220

查询应该是

```
SELECT ..
FROM ....

Where cl_223 Like '2013%' 
```

但是，更好的解决方案是将日期存储为`DATE`数据类型。如果该列中的日期始终以它们现在的格式使用，则更改将向后兼容。它还将允许更轻松地处理日期值。

# verilog - Verilog中的二进制编码小数

> ID：14323107
> 
> 赞同：1
> 
> 时间：2013-01-14T17:04:53.143
> 
> 标签：verilog, bcd

我为 BCD 编写了以下代码到七段。代码也编译 find 和模拟，但 num 的值不超过 2。我不知道为什么会这样。这是代码：

```
module BCDtoSeven_TOP
  reg  [3:0] num;
  wire a,b,c,d,e,f,g;

  BCDtoSeven s(num,a,b,c,d,e,f,g);

  initial begin
    num=1;
  end

  always @(num<=9) begin
    #2 num=num+1;
  end

endmodule 
```

子模块：

```
module BCDtoSeven(num,a,b,c,d,e,f,g);

  output a,b,c,d,e,f,g;
  input  [3:0] num;

  assign a=(num==4 || num==5 || num==6 || num==7 || num==8 || num==9)? 1:0;
  assign b=(num==2 || num==3 || num==5 || num==6 || num==7 || num==8 || num==9)? 1:0;
  assign c=(num==2 || num==3 || num==8 || num==9 || num==7)? 1:0;
  assign d=(num==4 || num==3 || num==5 || num==8 || num==9 || num==7)? 1:0;
  assign e=(num==5 || num==3 || num==6 || num==8 || num==9)? 1:0;
  assign f=(num==2 || num==1 || num==6 || num==8 )? 1:0;
  assign g=(num==2 || num==3 || num==6 || num==8 || num==9 || num==5 )? 1:0;
endmodule 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:11:37.867

`always @`每当其敏感度列表中的信号发生变化时，都会执行该块。`num<=9`保持为真，因此该块仅执行一次。

使用时钟的替代方法可能如下所示：

```
always @(posedge clk) begin
    if(num <= 9) begin
        num = num+1;
    end
end 
```

# sql - 在 dfa 中遍历表以计算日期

> ID：14323108
> 
> 赞同：0
> 
> 时间：2013-01-14T17:04:56.677
> 
> 标签：sql, sql-server, tsql

我有一张桌子`datecalculation`

它有以下列

```
| 音节 | 从节点 | 天 |
|---------------------------|
| 1 | 12 | 80 |
| 3 | 5 | 45 |
| 4 | 6 | 54 |
...

```

tonode 是结果，fromnode 通过将天数添加到 fromnode 为您提供结果

我拥有的唯一日期是另一个表的创建日期，在这种情况下将来自节点。

示例（“日期计算”表的第一行）

```
从节点中选择 createddate

创建日期 = 01/01/2013

创建日期 = 从节点 12

从节点 12 + 80 天 = 22/03/2013

```

toNode 1 现在有这个值，我们在 datecalculation 表中 fromNode 是 id 是 1 并使用它来计算相关的 toNode。

例子

有没有办法遍历这个表以深度优先算法的方式得到结果？

这可能`tsql`吗？

提前谢谢了。

# c# - 如何制作和使用排序的对象列表（包含2个整数，列表应按其中之一排序）

> ID：14323109
> 
> 赞同：2
> 
> 时间：2013-01-14T17:04:58.663
> 
> 标签：c#, list, sorting

我在 Visual Studio (c#) 中看到过类似 SortedList 的东西。但是，我不知道它是如何工作的以及如何使用它。我想使用 SortedList 因为我希望它的访问时间比普通列表快。不幸的是，我不能使用数组。我很高兴看到一些简单的例子。

编辑：假设有一个对象类：

```
class Point
{
public Point(int a, int b) {x = a; y = b;}
int x;
int y;
}

// x value will not be repeating in a list
Point a1 = new Point(1,2);
Point a2 = new Point(3,5);
Point a3 = new Point(0,2);
Point a4 = new Point(2,7);
Point a5 = new Point(14,2);
Point a6 = new Point(9,10);

SortedList<Point> list = new SortedList<Point>();

list.Add(a1);
list.Add(a2);
list.Add(a3);
list.Add(a4);
list.Add(a5);
list.Add(a6); 
```

是否可以在 O(log2n) 时间内添加所有这些元素？我希望我的列表在添加后看起来像这样。无需在排序后被迫再次对其进行排序。

```
(0,2)
(1,2)
(2,7)
(3,5)
(9,10)
(14,2) 
```

然后我想检查一下，是否有 (x == 9) 的对象。在 O(log2n) 时间内有可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T17:31:54.380

你可以这样做，

```
var list = new SortedList<int, Point>
{
    { 1, new Point(1, 2) },
    { 3, new Point(3, 5) },
    { 0, new Point(0, 2) },
    { 2, new Point(2, 7) },
    { 14, new Point(14, 2) },
    { 10, new Point(9, 10) },
} 
```

如 MSDN 所述，内联对象初始化对 SortedLists 尤其有益。

要查看 x 是否为 3，您可以使用

```
Point x3Point;
if (list.TryGetValue(3, out x3Point))
{
    //x3Point is now set to the Point with an x value of 3.
} 
```

* * *

当然你可以只存储两个`int`s

```
var list = new SortedList<int, int>
{
    { 1, 2 },
    { 3, 5 },
    { 0, 2 },
    { 2, 7 },
    { 14, 2 },
    { 10, 10 },
} 
```

你可以这样使用

```
int yValue;
if (list.TryGetValue(3, out yValue))
{
    var x3Point = new Point(3, yValue);
} 
```

* * *

理想情况下，您使用预先排序的数据初始化列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:12:10.303

直接来自 MSDN：

> 表示键/值对的集合，这些键/值对按键排序，可通过键和索引访问。

因此，当然，如果您必须保持其值始终按特定标准排序，那么它是一种非常有用的 List 类型。查看[此链接](http://msdn.microsoft.com/it-it/library/e7a8xew6.aspx)以获取更多示例和说明！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:13:47.313

您可以通过 LINQ 映射查询创建[SortedList 。](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)下面给出示例。请注意，SortedList 基本上是一个带有键值项的排序哈希表（ `SortedList`implements ）。`IDictionary`所以我从整数数组中选择相等的键和值。

```
var ints = new []{1,54,65,76,34,36};
SortedList sorted =  new SortedList(ints.ToDictionary(key => key, val => val)); 
```

# c - 可以使用 SetWindowLongPtr + GWLP_USERDATA 来存储数据（不是指针）

> ID：14323113
> 
> 赞同：3
> 
> 时间：2013-01-14T17:05:23.140
> 
> 标签：c, winapi

我知道可以使用 SetWindowLongPtr + GWLP_USERDATA 来存储指向某些数据的指针。但是可以直接存储数据，例如“句柄”、“布尔值”、“整数”或其他更大的数据。

从[http://msdn.microsoft.com/zh-tw/library/windows/desktop/ms644898%28v=vs.85%29.aspx](http://msdn.microsoft.com/zh-tw/library/windows/desktop/ms644898%28v=vs.85%29.aspx)，它说：

*设置应用程序专用的新额外信息，例如句柄或指针。*

，所以我想存储一个句柄是可以的。我也使用这种方法毫无问题地存储 RGB 值。但我不知道这样做是否是个好主意。我们可以存储其他大数据（例如，结构）吗？

ps：这个问题的动机是：当我创建一个对话窗口时，我想为它的每个控件存储数据。当然，我可以在窗口过程中使用静态变量并将指针（指向它们）传递给 SetWindowLongPtr 函数。但这在理论上并不“完美”，因为当对话框窗口关闭时，我不再需要这些数据了。当然，在实践中，我需要使用的数据非常少，应该不用关心内存的使用情况。但我仍然想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T17:19:55.587

你只需要一个指针来存储你想要的任何东西。使用要存储的数据声明一个结构。在 CreateWindowEx() 调用之前分配它并将指针作为最后一个参数传递。您可以在 WM_CREATE 消息、CREATESTRUCT.lpCreateParams 字段的窗口过程中将其取回。现在调用 SetWindowsLongPtr 来存储该指针。

任何时候需要它，使用 GetWindowlongPtr 来恢复指向结构的指针。您需要再次清理，使用 WM_NCDESTROY 消息释放指针。

请注意，这是包装 winapi 的 C++ 类库中使用的标准技术。请考虑使用其中之一，而不是自己旋转它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T17:10:22.673

该函数可以存储与（很可能是 32 位或 64 位）[`SetWindowLongPtr`](http://msdn.microsoft.com/zh-tw/library/windows/desktop/ms644898%28v=vs.85%29.aspx)大小相同的数据。`LONG_PTR`如果您的数据可以以该大小存储，那就没问题了。即 bool 就可以了，大多数句柄也可以（因为句柄也往往是指针）。

一个典型的 RGB 值也可以工作，因为它被存储为三个字节（每个颜色分量一个字节）或四个字节（一个额外的 alpha 通道字节）。

如果您需要比这更多的空间，您应该在其他地方分配一个结构并存储指向该结构的指针。

# json - 谷歌日历 JSON 输出

> ID：14323114
> 
> 赞同：0
> 
> 时间：2013-01-14T17:05:26.243
> 
> 标签：json, calendar

我在 Google 上创建了一个公共日历，并希望使用它的 JSON 文件将其嵌入我的网站。你可以[在这里](http://www.google.com/calendar/feeds/tr79slab76bg49f8otabu324mg@group.calendar.google.com/public/full?alt=json-in-script)看到它。

我无法让它运行，我认为问题可能不是我的 JS 代码`JSON-Formatter`喜欢`jsonformat.com`或`jsonprettyprint.com`无法呈现文件。这是正常的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:08:33.277

您提供的 URL 不是返回 JSON，而是返回实际上最终发出 JSON 的 JS。在浏览器中打开并检查。

# php - MySQL LIKE 未按预期工作

> ID：14323116
> 
> 赞同：0
> 
> 时间：2013-01-14T17:05:28.320
> 
> 标签：php, mysql

我没有从我的代码中得到预期的搜索结果，这是我的 SQL 表中的一个片段

```
 Nom      Description 

        41099    Screen truck Hire for Northern Racing
        41100    Dry Hire - Screen
        41101    Dry Hire - Kit
        41102    Screen Truck Hire for chester / Bangor Dee
        41103    Blackburn Digiboard Backup DVD-DO NOT USE 
```

这是我的 PHP 代码，我得到预期的结果，直到我搜索 'chester' 时，我没有得到任何结果。谁能告诉我出了什么问题？

用于返回 XML 数据的 PHP 代码

```
 echo '<sites>'  ; 

    $condition = "Description LIKE '%chester%' ";
    $result = mysql_query("SELECT * FROM jbe_nominal_codes WHERE $condition")  ;

    while($row = mysql_fetch_array($result)) { 
$nom  = $row['nominal'] ;
if (!$nom) { $nom= "0000" ; } ; 

$des  = $row['Description'] ;
if (!$des) { $des= "No Description" ; } ; 

    echo "<NameSearch> " ; 

echo '<nominal>';
echo $nom;
echo '</nominal>'; 

echo '<Description>' ;
echo $des ; 
echo '</Description>' ;

   echo "</NameSearch> " ; 
   } ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:48:02.813

一个好的做法是扩展您的 mysql_ 语句。

> mysql_query("SELECT * FROM jbe_nominal_codes WHERE $condition") or die(mysql_error());

如果抛出错误，你知道你的查询有问题，你会从错误中得到一些提示，如果没有，可能是chester根本不在你的数据库表中吗？

如前所述，您应该注意 mysqli 和 PDO 以及为什么不再使用 mysql_。[为什么我不应该在 PHP 中使用 mysql_* 函数？](https://stackoverflow.com/questions/12859942/why-shouldnt-i-use-mysql-functions-in-php)

# android - 4.0+ 应用中的旧主题

> ID：14323117
> 
> 赞同：0
> 
> 时间：2013-01-14T17:05:32.433
> 
> 标签：android, spinner, android-4.0-ice-cream-sandwich, android-theme

我在我的活动中创建了一个微调器，当我在我的果冻豆设备上运行我的应用程序时，微调器的主题就像 2.x，我怎样才能获得 ICS 一个？

这是我的微调器代码：

```
 <Spinner
      android:id="@+id/spinnermap"
      style="@android:style/Theme.Holo"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_centerVertical="true" /> 
```

如您所见，我尝试设置全局样式“Holo”但没有结果..

我遇到了同样的问题，`NumberPicker`但不记得我是如何解决的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T17:10:26.760

```
 style="@android:style/Theme.Holo" 
```

这不是解决方案。**您不会在 HC 之前的设备上进行后备**。如果您想在整个应用程序中为 HC+ 使用全息主题，则需要为整个应用程序声明一个主题（我假设这是您想要的）。

在您的清单中：

```
android:theme="@style/MyTheme" 
```

值/样式.xml：

```
<style name="MyTheme" parent="android:Theme.Light">
</style> 
```

值-v11/styles.xml：

```
<style name="MyTheme" parent="android:Theme.Holo.Light">
</style> 
```

现在您将在 HC+ 上有一个下拉微调器（当然还有其他全息小部件）

* * *

但是，如果您只想让微调器“holofied”，您可以这样做：

```
<Spinner
      android:id="@+id/spinnermap"
      style="@style/MySpinner"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_centerVertical="true" /> 
```

值/样式.xml：

```
<style name="MySpinner" parent="android:Widget.Spinner">
</style> 
```

值-v11/styles.xml：

```
<style name="MySpinner" parent="android:Widget.Holo.Spinner">
</style> 
```

# ruby - 运行 gem 安装更新时出错

> ID：14323131
> 
> 赞同：0
> 
> 时间：2013-01-14T17:06:18.750
> 
> 标签：ruby, rubygems

我已经安装了 Instant Rails 2.0。在尝试升级 RubyGems 时，我运行命令`gem install update`。它无法给出以下错误。

> C:\Users\Owner\Downloads\InstantRails-2.0-win\rails_apps>gem install update ERROR: While execution gem ... (Gem::RemoteSourceException)
> 
> HTTP 响应 302 获取[http://gems.rubyforge.org/yaml](http://gems.rubyforge.org/yaml)

执行时也会出现同样的错误`gem update -- system`。或任何其他`gem`命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:20:23.900

尝试从[http://gems.rubyforge.org/安装更新的 gem 版本](http://gems.rubyforge.org/)

# java - Spring Data Rest 中的 java.util.Date

> ID：14323139
> 
> 赞同：2
> 
> 时间：2013-01-14T17:06:53.913
> 
> 标签：java, spring

我在 spring(3.1) 数据 REST 中使用 java.util.Date。如何以人类可读的形式打印日期？（例如 MM/DD/YYYY）？

```
@Entity
public class MyEntity{
...

@Column(name="A_DATE_COLUMN")
@DateTimeFormat(iso=ISO.DATE)
private Date aDate;

..getters and setters

} 
```

但是，当我打印我的实体时（在覆盖 toString 之后），我总是得到一个很长的日期。似乎 @DateTimeFormat 不会改变行为。我还尝试了不同的 iso 格式，但也没有帮助。

```
"aDate" : 1320130800000 
```

这是我的春季数据休息的POM文件条目

```
<dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-rest-webmvc</artifactId>
            <version>1.0.0.RELEASE</version>
            <exclusions>
                <exclusion>
                    <groupId></groupId>
                    <artifactId>slf4j-log4j12</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>

                <dependency>
            <groupId>joda-time</groupId>
            <artifactId>joda-time</artifactId>
            <version>2.1</version>
        </dependency> 
```

任何帮助都非常受欢迎。PS。这是 toString 实现

```
@Override
    public String toString() {
        return getClass().getName() + "{"+
                 "\n\taDate: " + aDate
                                       + "\n}";
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:12:53.813

看起来您需要编写一个自定义序列化程序以使 Jackson（JSON 库 spring 在引擎盖下使用）正确地将日期序列化为文本。

你的吸气剂将看起来像这样（其中 JsonDateSerializer 是自定义类）

```
@JsonSerialize(using=JsonDateSerializer.class) 
public Date getDate() {     
   return date; 
} 
```

查看包含序列化程序代码的[这篇博客文章。](http://loianegroner.com/2010/09/how-to-serialize-java-util-date-with-jackson-json-processor-spring-3-0/)序列化程序代码在此处复制，但博客文章中的解释可能会有所帮助。

```
/**
 * Used to serialize Java.util.Date, which is not a common JSON
 * type, so we have to create a custom serialize method;.
 */
@Component
public class JsonDateSerializer extends JsonSerializer<Date>{

    private static final SimpleDateFormat dateFormat = new SimpleDateFormat("MM-dd-yyyy");

    @Override
    public void serialize(Date date, JsonGenerator gen, SerializerProvider provider)
            throws IOException, JsonProcessingException {

        String formattedDate = dateFormat.format(date);

        gen.writeString(formattedDate);
    }
} 
```

# c# - Bing Ads API C# 示例代码不起作用

> ID：14323143
> 
> 赞同：3
> 
> 时间：2013-01-14T17:07:07.733
> 
> 标签：c#, bing-api

我尝试运行 C# 示例代码，但收到以下错误：

> 错误代码：InternalError <0>
> 消息：发生内部错误。
> 详细信息：[这是空白]

我也尝试在自己的代码中实现报告服务，但收到了

> 此行上的“对象引用未设置为对象的实例”错误：

```
response = reportingService.SubmitGenerateReport(request); 
```

这是我的代码，删除了 ids/password/token：

```
using System;
using System.ServiceModel;
using System.Data;

// BingAds.CampaignManagement is the application-defined namespace of 
// the service reference used for this example. 

using collectBingAdsData.BingAds.Reporting;
using collectBingAdsData.BingAds.CampaignManagement;
using collectBingAdsData.BingAds.Bulk;

namespace collectBingAdsData
{
    class Program
    {
        private static CampaignManagementServiceClient campaignManagementService = null;
        private static ReportingServiceClient reportingService = null;
        private static BulkServiceClient bulkService = null;

        private static DataTable BingSemData;

        // Specify your credentials.

        private static string m_password = "password";
        private static string m_username = "username";
        private static string m_token = "token";

        // Specify the advertiser's account ID and customer ID.

        private static long customerID = 123123;
        private static long[] accountIDs = { 123123 };
        private static long[] campaignIDs = { 123123 };

        private static string m_downloadPath = @"c:\reports\keywordperf.zip";

        // Shows how to request a keyword performance report and download it
        // to the specified folder.
        //
        // args[0] - Report ID. To download an existing report request instead 
        //           of requesting a new report, set args[0] to a report ID.

        static void Main(string[] args)
        {
            getAccountsByCutomer(customerID);
            foreach (long accountID in accountIDs)
            {
                getCampaignsByAccount(accountID);
                foreach (long campaignID in campaignIDs)
                {
                    //getCampaignReport(accountID, campaignID);
                    getKeywordReport(accountID, campaignID);
                }
            }
        }

        private static void getKeywordReport(long accountID, long campaignID)
        {
            KeywordPerformanceReportRequest request = new KeywordPerformanceReportRequest();

            request = buildKeywordPerformanceRequest(accountID, campaignID);

            string BingData = RequestReport(request);
        }

        private static void getCampaignReport(long accountID, long campaignID)
        {
            CampaignPerformanceReportRequest request = new CampaignPerformanceReportRequest();

            request = buildCampaignPerformanceRequest(accountID, campaignID);

            string BingData = RequestReport(request);

        }

        // Request the report. Use the ID that the request returns to
        // check for the completion of the report.

        static string RequestReport(ReportRequest report)
        {
            SubmitGenerateReportRequest request = new SubmitGenerateReportRequest();
            SubmitGenerateReportResponse response = new SubmitGenerateReportResponse();

            try
            {
                // Set the header information.

                request.DeveloperToken = m_token;
                request.UserName = m_username;
                request.Password = m_password;

                // Set the request information.

                request.ReportRequest = report;

                response = reportingService.SubmitGenerateReport(request);
            }
            catch (FaultException<collectBingAdsData.BingAds.Reporting.AdApiFaultDetail> fault)
            {
                // Log this fault.

                Console.WriteLine("SubmitGenerateReport failed with the following faults:\n");

                foreach (collectBingAdsData.BingAds.Reporting.AdApiError error in fault.Detail.Errors)
                {
                    if (105 == error.Code) //  InvalidCredentials
                    {
                        Console.WriteLine("The specified credentials are not valid or the " +
                            "account is inactive.");
                    }
                    else
                    {
                        Console.WriteLine("Error code: {0} ({1})\nMessage: {2}\nDetail: {3}\n",
                            error.ErrorCode, error.Code, error.Message, error.Detail);
                    }
                }
            }
            catch (FaultException<collectBingAdsData.BingAds.Reporting.ApiFaultDetail> fault)
            {
                // Log this fault.

                Console.WriteLine("SubmitGenerateReport failed with the following faults:\n");

                foreach (collectBingAdsData.BingAds.Reporting.OperationError error in fault.Detail.OperationErrors)
                {
                    switch (error.Code)
                    {
                        case 106: //  UserIsNotAuthorized
                            Console.WriteLine("The user is not authorized to call this operation.");
                            break;

                        case 2004: // ReportingServiceNoCompleteDataAvaliable
                            Console.WriteLine("The report cannot request complete data because " +
                                "complete data is not available based on the specified " +
                                "aggregation, scope, and time period values.");
                            break;

                        case 2007: // ReportingServiceInvalidReportAggregation
                            Console.WriteLine("The requested aggregation is not valid for the " +
                                "specified reporting period.");
                            break;

                        case 2008: // ReportingServiceInvalidReportTimeSelection
                            Console.WriteLine("The report time period is not valid.");
                            break;

                        case 2009: // ReportingServiceInvalidCustomDateRangeStart
                            Console.WriteLine("The start date of the custom date range specified " +
                                "in the report time period is not valid.");
                            break;

                        case 2010: // ReportingServiceInvalidCustomDateRangeEnd
                            Console.WriteLine("The end date of the custom date range specified " +
                                "in the report time period is not valid.");
                            break;

                        case 2011: // ReportingServiceEndDateBeforeStartDate
                            Console.WriteLine("The end date of the custom date range specified " +
                                "in the report time period cannot be earlier than the start date.");
                            break;

                        case 2015: // ReportingServiceRequiredColumnsNotSelected
                            Console.WriteLine("The report request does not include all of the " +
                                "required columns.");
                            break;

                        case 2016: // ReportingServiceDuplicateColumns
                            Console.WriteLine("The list or report columns contains duplicate " +
                                "columns. Please ensure that there is only one {0} column.",
                                error.Details);
                            break;

                        case 2017: // ReportingServiceNoMeasureSelected
                            Console.WriteLine("The list or report columns must include one or " +
                                "more KPI columns such as Clicks and Impressions.");
                            break;

                        case 2028: // ReportingServiceInvalidAccountThruAdGroupReportScope
                            Console.WriteLine("The report scope cannot be null or empty.");
                            break;

                        case 2034: // ReportingServiceInvalidTimePeriodColumnForSummaryReport
                            Console.WriteLine("When the report aggregation type is summary, " +
                                "you cannot include TimePeriod as a report column.");
                            break;

                        default:
                            Console.WriteLine("Error code: {0} ({1})\nMessage: {2}\nDetail: {3}\n",
                                error.ErrorCode, error.Code, error.Message, error.Details);
                            break;
                    }
                }

                foreach (collectBingAdsData.BingAds.Reporting.BatchError error in fault.Detail.BatchErrors)
                {
                    Console.WriteLine("Error code: {0} ({1})\nIndex: {2}\nMessage: {3}\nDetail: {4}\n",
                        error.ErrorCode, error.Code, error.Index, error.Message, error.Details);
                }
            }

            return (null == response) ? null : response.ReportRequestId;
        }

        private static CampaignPerformanceReportRequest buildCampaignPerformanceRequest(long accountID, long campaignID)
        {
            CampaignPerformanceReportRequest request = new CampaignPerformanceReportRequest();
            request.Aggregation = ReportAggregation.Daily;

            request.Columns = new[] { 
                CampaignPerformanceReportColumn.AccountName, 
                CampaignPerformanceReportColumn.Impressions, 
                CampaignPerformanceReportColumn.Clicks, 
                CampaignPerformanceReportColumn.Conversions, 
                CampaignPerformanceReportColumn.ConversionRate
            };

            request.Format = ReportFormat.Csv;

            request.Scope = new AccountThroughCampaignReportScope()
            {
                AccountIds = accountIDs,
                Campaigns = new[] {
                    new CampaignReportScope {
                        CampaignId = campaignID,
                        ParentAccountId = accountID

                    }
                }
            };

            request.Time = new ReportTime()
            {
                PredefinedTime = ReportTimePeriod.Yesterday
            };
            return request;
        }

        private static KeywordPerformanceReportRequest buildKeywordPerformanceRequest(long accountID, long campaignID)
        {
            KeywordPerformanceReportRequest report = new KeywordPerformanceReportRequest();

            report.Format = ReportFormat.Xml;
            report.ReportName = "My Keyword Performance Report";
            report.ReturnOnlyCompleteData = true;
            report.Aggregation = ReportAggregation.Daily;

            report.Scope = new AccountThroughAdGroupReportScope()
            {
                AccountIds = null,
                AdGroups = null,
                Campaigns = new[] {
                    new CampaignReportScope {
                        CampaignId = accountID,
                        ParentAccountId = campaignID
                    }
                }
            };

            report.Time = new ReportTime()
            {
                //CustomDateRangeStart = new Date()
                //{
                //    Month = 2,
                //    Day = 1,
                //    Year = 2012
                //},
                //CustomDateRangeEnd = new Date()
                //{
                //    Month = 2,
                //    Day = 15,
                //    Year = 2012
                //},
                PredefinedTime = ReportTimePeriod.Yesterday
            };

            report.Filter = new KeywordPerformanceReportFilter()
            {
                DeviceType = DeviceTypeReportFilter.Computer |
                    DeviceTypeReportFilter.SmartPhone
            };

            report.Columns = new[] {
                    KeywordPerformanceReportColumn.TimePeriod,
                    KeywordPerformanceReportColumn.AccountId,
                    KeywordPerformanceReportColumn.CampaignId,
                    KeywordPerformanceReportColumn.Keyword,
                    KeywordPerformanceReportColumn.KeywordId,
                    KeywordPerformanceReportColumn.DeviceType,
                    KeywordPerformanceReportColumn.BidMatchType,
                    KeywordPerformanceReportColumn.Clicks,
                    KeywordPerformanceReportColumn.Impressions,
                    KeywordPerformanceReportColumn.Ctr,
                    KeywordPerformanceReportColumn.AverageCpc,
                    KeywordPerformanceReportColumn.Spend,
                    KeywordPerformanceReportColumn.QualityScore
                };

            return report;
        }

        private static void getCampaignsByAccount(long accountID)
        {
        }

        private static void getAccountsByCutomer(long customerID)
        {
        }
    }
} 
```

我被困在如何从 API 中获取报告，任何帮助将不胜感激。

**更新：**听起来很傻，但传入的广告系列 ID 不正确，谢谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:11:50.930

您的代码告诉您为什么会收到此错误；

```
private static ReportingServiceClient reportingService = null;
response = reportingService.SubmitGenerateReport(request); 
```

您正在尝试访问值的`SubmitGenerateReport`方法`null`。你不能那样做。你应该先初始化它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:06:50.060

传递了错误的数据。我希望错误消息更具描述性，而不仅仅是内部错误。

# android - Android Chronometer, onChronometerTick

> ID：14323146
> 
> 赞同：0
> 
> 时间：2013-01-14T17:07:17.757
> 
> 标签：android, chronometer

我正在开发一个 android 应用程序，但我的计时器有问题。当调用 onChronometerTick 方法时，TextView 应该在第 60 秒更新，但第一次在第 58 秒更新。如果您暂停并再次启动计时器，它会在不同的时间更新。我发现 onChronometerTick 方法在我启动计时器时被调用了两次，这就是我的问题所在！有人能帮我吗？谢谢！

这是我的代码：

```
int br = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    bProg = (Button) findViewById(R.id.bProgram);
    bProg.setOnClickListener(this);

    tv = (TextView) findViewById(R.id.textView1);

    chrono = (Chronometer) findViewById(R.id.chronometer);
    chrono.setBase(SystemClock.elapsedRealtime());
    chrono.setOnChronometerTickListener(this);
    chrono.stop();

}

@Override
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.bProgram:
        Log.d(TAG, "bProgram Clicked");
        checkButton();

        // Change the electricity consumption for the given program
        changeConsumption();

        calculateSecondPrice();

        tvCons.setText(String.valueOf(consumption * 1000 + " W"));
        tvPrice.setText(String.valueOf(price + " lv."));

        if (prog > 0) {
            startChronometer();
        }

        if (prog == 0) {
            pauseChronometer();
        }
        break;
    }
}

private void pauseChronometer() {
    timeWhenStopped = chrono.getBase() - SystemClock.elapsedRealtime();

    chrono.stop();
}

private void startChronometer() {
    if (prog == 1) {
        chrono.setBase(SystemClock.elapsedRealtime() + timeWhenStopped);
        chrono.start();
    }
}

@Override
public void onChronometerTick(Chronometer chronometer) {
    br++;

    totalPrice += secondPrice;

    if (br == 60) {
        br = 0;
        tv.setText(String.valueOf((double) (totalPrice) / 1000000));
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T15:06:26.007

OK I found a way to do it. This helped me: [http://iqwen.net/question/53767](http://iqwen.net/question/53767)

# core - 分段错误和核心转储

> ID：14323148
> 
> 赞同：0
> 
> 时间：2013-01-14T17:07:23.760
> 
> 标签：core

我一直在尝试自己编写二叉树。它似乎一直在工作，直到我想扫描要添加的新字符串。相同的字符串有效，新字符串给了我分段错误和核心转储。我怀疑分配新元素的内存有问题。

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>
//------- wezel -------//
struct node{
char *word;
unsigned int arity;
struct node *left, *right, *parent;
};
struct node *root;
/* Adding new string to tree */
void dopisz(char wordtmp[50], struct node *start){

    if(root==NULL){ // empty tree, add as root
    root=(struct node*)malloc(sizeof *root);
    root->word=(char*)malloc(sizeof wordtmp);
    root->word=strcpy(root->word, wordtmp);
    root->arity=1;
    root->left=NULL;
    root->right=NULL;
    root->parent=NULL;
    }
    else if(strcmp(wordtmp, start->word)==0){
        start->arity=start->arity+1;
    }
    else if(strcmp(wordtmp, start->word)<0){  //if the added element is <
        if(start->left==NULL){ //if there's no left son
            struct node *nowy=(struct node*)malloc(sizeof *root);
            nowy->word=strcpy(nowy->word, wordtmp);
            nowy->arity=1;
            nowy->left=NULL;
            nowy->right=NULL;
            nowy->parent=start;
            start->left=nowy;
        }
        else if(start->left!=NULL){ //if there's left son
            dopisz(wordtmp, start->left);
        }

    }
    else if(strcmp(wordtmp, start->word)>0){  //if the added element is >
        if(start->right==NULL){ //if there's no right son
            struct node *nowy=(struct node*)malloc(sizeof *root);
            nowy->word=strcpy(nowy->word, wordtmp);
            nowy->arity=1;
            nowy->left=NULL;
            nowy->right=NULL;
            nowy->parent=start;
            start->right=nowy;
        }
        else if(start->right!=NULL){ //if there's right son
            dopisz(wordtmp, start->right);
        }

    }

}
//-------looking for minimum -------//
struct node* least(struct node *start){
    if(start->left != NULL){
        return least(start->left);
    }
    else return start;
}

//------- deleting -------//
void usun(){

}
//------- printing -------//
void drukuj(struct node *start){ //printing in order in order
    if(start->left!=NULL){
        drukuj(start->left); 
    }
    printf("%s (%d)\n", start->word, start->arity);
    if(start->right!=NULL){
        drukuj(start->right);
    }
}
//------- main -------//
int main(){
char wordtmp[50];
printf("\t Drzewo Poszukiwan Binarnych \n------------------------\n\n");
int x, y=0;
while(y==0){
    printf("\n MENU: \n 0 -> zakoncz \n 1 -> dopisz\n 2 -> usun\n 3 -> drukuj\n\n"); // 0 - exit, 1 - add, 2 - delete, 3 - print
    scanf("%d", &x);
    switch(x){
    case 0: y++;        break;
    case 1:
    printf("wpisz slowo: ");
    scanf("%s", wordtmp);
    dopisz(wordtmp, root);
    break;
    case 2: usun();     break;
    case 3: drukuj(root);   break;
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:13:44.630

线

```
nowy->word=strcpy(nowy->word, wordtmp); 
```

是错的。 `nowy->word`没有任何指向任意内存的存储点。将字符串复制到其中会产生未定义的结果，但可能会出现段错误。

您可以通过`word`在定义中创建一个固定大小的数组`node`或动态为其分配内存来解决此问题

```
nowy->word=malloc(strlen(wordtmp)+1);
strcpy(nowy->word, wordtmp); 
```

或者

```
nowy->word=strdup(wordtmp); // not standard C but available in Posix systems 
```

# css - IE7 Div 错误溢出：自动

> ID：14323152
> 
> 赞同：0
> 
> 时间：2013-01-14T17:07:29.640
> 
> 标签：css, internet-explorer-7

我需要一些帮助，我有一个 IE7 CSS 问题（一些客户仍然使用 IE7，所以我需要为它编写代码）。

我遇到了一些嵌套 div 和水平滚动条的问题，它在 IE8+ 和其他所有东西中都可以正常工作。

发生的情况是，溢出应该创建一个水平滚动条，因此里面的内容可以扩展到屏幕边缘之外。

HTML

```
<div class="CenterBoxFlow Rounded" >
 <div class="CenterBoxContainer" id="panetest">
  .. Content
 </div>
</div> 
```

CSS

```
.CenterBoxFlow { border: 1px #ccc solid; width: 1110px; white-space: normal; vertical-align: top; display: inline-block; overflow: visible; padding: 15px; margin-bottom: 6px; text-align: center; float: left; position:relative; }
.CenterBoxContainer { text-align: left; width:1110px; overflow:auto; white-space:nowrap; vertical-align:top; overflow-y:hidden; display:inline-block; position:relative;  } 
```

仅供参考，内容也是一系列具有以下样式的 div：

```
.Chart_Small { padding: 5px; width: 152px; white-space: normal; display: inline-block; position: relative; *display: inline; zoom: 1; } 
```

任何关于让 div 在 IE7 中正确溢出的建议都会很棒。

彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:27:57.580

你有没有尝试过：

```
*zoom:1; 
```

它解决了许多 ie7 错误.. ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:33:13.787

我不明白为什么，但从`white-space: normal;`.Chart_Small 中删除为我修复了这个错误。你能检查它是否适合你吗？

# jboss7.x - 在 REST 服务中使用会话范围的 Bean

> ID：14323155
> 
> 赞同：1
> 
> 时间：2013-01-14T17:07:47.363
> 
> 标签：jboss7.x, cdi, resteasy, jboss-weld

我在 JBoss AS 7.1.1 上运行基于 CDI 的应用程序，它使用对话范围 Bean。我需要从 RESTeasy 服务调用这些 bean 之一。不幸的是，当我调用 Conversation Scoped Bean

```
@Inject
private ConversationBean service; 

@GET
@Produces("text/html")
@Path("/book")
public void bookTicket(Long l) {

    service.book(l);
    . . . .
} 
```

返回以下错误：

**原因：org.jboss.weld.context.ContextNotActiveException: WELD-001303 范围类型 javax.enterprise.context.ConversationScoped 没有活动上下文**

这个问题有什么解决方法吗？
谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T17:20:35.213

我知道我之前已经回答过这个问题（或者也许是`@SessionScoped`，同样的事情）。对话与 CDI 中的会话相关联。由于 JAX-RS 中没有会话，因此没有对话。在规范第 6.7.4 节中，它声明对话范围仅在 JSF 请求期间处于活动状态。

如果您想创建自己的 Scope 和 Context 就像对话一样，并使其可用于 JAX-RS 请求，那当然是可行的，但是您必须有一些位置来存储范围并将其与要求。

# c# - 反射属性

> ID：14323156
> 
> 赞同：0
> 
> 时间：2013-01-14T17:07:53.880
> 
> 标签：c#, properties, subclass, entities

如何访问子类属性？，我可以访问 Y 属性，在这种情况下是名称，但不是 x，另一种情况是相同的，但不是 x 的单个引用，而是带有 x 的列表，在第二种情况下，如何迭代每个对象.

```
 public class X
{
    public int ID{get;set;} 
    public int Name{get;set;}
}

public class y
{

    public string Name{get;set;}
    public x Reference{get:set;}
}

    //second case 
public class y
{

    public string Name{get;set;}
    public List<x> Reference{get:set;}
}

public static void Main()
{
    y classY = new y();
    y.Name = "some text here";
    y.x.ID = "1";
    y.x.Name ="some text for x here";
}

// in another class, pass y
// so, in this method I only can get 'y' values, but not x
Hashtable table = new Hashtable();
public void GetProperties(object p)
{
    Type mytype = p.GetType();
    var properties = mytype.GetProperties(BindingFlags.Public | BindingFlags.Instance);

    foreach (var property in properties)
    {
        table.Add(property.Name, property.GetValue(p, null));
    }   
} 
```

### 更新

也试试界面

```
public interface ISub
{}
public class X : ISub // etc....

if (typeof(ISub).IsAssignableFrom(property.GetType()) ) // this alwas as false 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:17:55.420

您必须评估每个属性以了解它是否是列表：

```
foreach (var prop in properties)
{
    var obj = prop.GetValue(p, null);
    if (obj is List<x>)
    {
        var list = obj as List<x>;
        // do something with your list
    }
    else
    {
        table.Add(prop.Name, obj);
    }
} 
```

# java - 谷歌使用 Java/Hibernate 将折线映射到 Postgis

> ID：14323157
> 
> 赞同：0
> 
> 时间：2013-01-14T17:07:59.797
> 
> 标签：java, maps, polygon, google-polyline

我有一个页面，用户在其中输入起点和终点，并在地图中显示路线。我想知道如何获取这个多边形（折线）并通过 Java / Hibernate 将其保存在 Postgis 中。

有人可以帮助我吗？

谢谢。卢西亚诺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:35:11.493

通常您无法将该折线作为矢量数据坐标，因为这些数据由`Teleatlas / Tomtom`（通过`Google`服务）或`Microsoft Bing`（Navteq 数据）或`Nokia`（`Navteq`数据）提供

这样的矢量数据非常昂贵，因此您只能要求在屏幕上画一条线，但您不会得到地理坐标（纬度、经度）。
甚至`Google`无权向您提供该矢量数据（因为他们不拥有该数据，他们只显示它）。

但是，我记得这里有一篇文章展示了如何使用非官方`Google`服务器，您可以在其中请求两个地理点之间的路线，并取回压缩的编码路线。但是您在法律上不能使用该服务，我也不知道它是否存在。

另一种方法是使用开源地图数据，例如`OpenStreetMap`，对于这些服务，您可以获得路线的矢量数据。例如：ios`RouteMe`库通过`OpenStreetMap`.

# sql - 使用表变量将多行插入 SQL Server 表

> ID：14323163
> 
> 赞同：7
> 
> 时间：2013-01-14T17:08:10.687
> 
> 标签：sql, sql-server-2008, insert, table-variable

我目前正在使用 SQL Server 2008，并且正在尝试使用表变量创建一个语句以将多行插入表中。就目前而言，我必须在 4 个不同的位置（2 个选择语句、1 个插入和 1 个更新）插入要添加的信息，但希望能够创建一个表变量，所以我只需要输入信息一次。任何帮助/建议将不胜感激。

这是我试图改变的一个例子。

```
PRINT 'Before'
SELECT  GROUPID, ModifiedBy, ModifiedDate
FROM TableXYZ
WHERE groupID in(ID1, ID2, ID3, ID4)                                                            

BEGIN TRAN

Insert into TableXYZ
 (GROUPID)
VALUES
 (ID1), (ID2), (ID3), (ID4)                                                             

UPDATE TableXYZ
SET existingdays = 15
    ,ModifiedBy = @userID
    ,ModifiedDate = @today
WHERE groupID in(ID1, ID2, ID3, ID4)                                                            

Set  @RowCount =  @@ROWCOUNT 

PRINT 'After '

SELECT  GROUPID, ModifiedBy, ModifiedDate
FROM TableXYZ
WHERE groupID in(ID1, ID2, ID3, ID4) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T17:29:08.687

就只输入一次信息而言，这是您要寻找的吗？

```
DECLARE @IDList TABLE
(
    ID INT
)

INSERT INTO @IDList ( ID )
VALUES
     (ID1)
    ,(ID2)
    ,(ID3)
    ,(ID4)

PRINT 'Before'
SELECT  GROUPID, ModifiedBy, ModifiedDate
FROM TableXYZ AS T
    INNER JOIN @IDList AS L
        ON T.GroupID = L.ID

BEGIN TRAN

Insert into TableXYZ
 (GROUPID)
SELECT ID
FROM @IDList

UPDATE TableXYZ
SET existingdays = 15
    ,ModifiedBy = @userID
    ,ModifiedDate = @today
FROM TableXYZ AS T
    INNER JOIN @IDList AS L
        ON T.GroupID = L.ID

Set  @RowCount =  @@ROWCOUNT 

PRINT 'After '

SELECT  GROUPID, ModifiedBy, ModifiedDate
FROM TableXYZ AS T
    INNER JOIN @IDList AS L
        ON T.GroupID = L.ID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:10:01.660

要插入`table1`来自 的值`table2`：

```
INSERT INTO table1 ( column1 )
SELECT  col1
FROM    table2 
```

# c# - 使用 slowCheetah 转换用户设置

> ID：14323174
> 
> 赞同：8
> 
> 时间：2013-01-14T17:08:51.293
> 
> 标签：c#, .net, settings, slowcheetah

我正在尝试根据使用 slowCheetah 的构建配置文件更改我的默认用户配置，但是我无法找到正确的使用方法

```
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <userSettings>
        <MyApp.Properties.Settings>
            <setting name="Url" serializeAs="String">
                <value>
                    something
                </value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

我已经试了

```
<!-- &amp it's an & escaped in xml-->
<add key="MyApp.Properties.Settings.Url" value="www.google.com" xdt:Transform="Replace" xdt:Locator="Match(key)"/> 
```

但它不起作用。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T17:39:12.340

如果我做对了，你有这个：

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <userSettings>
        <MyApp.Properties.Settings>
            <setting name="Url" serializeAs="String">
                <value>
                    something
                </value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

您想将其转换为：

（替换`<value>something</value>`为`<value>www.google.com</value>`

```
<?xml version="1.0"?>
<configuration>
    <configSections>
        <sectionGroup name="userSettings" type="System.Configuration.UserSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="MyApp.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" allowExeDefinition="MachineToLocalUser" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <userSettings>
        <MyApp.Properties.Settings>
            <setting name="Url" serializeAs="String">
                <value>
                    www.google.com
                </value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

最简单的方法是在转换文件中包含以下文本：

```
<?xml version="1.0"?>

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <userSettings>
        <MyApp.Properties.Settings>
            <setting name="Url" serializeAs="String">
                <value xdt:Transform="Replace">
                    www.google.com
                </value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

它将 ( `<value xdt:Transform="Replace">`) your替换`<value></value>`为您想要的文本。

或者，如果您想选择要替换为`name="Url"`属性的部分：

```
<?xml version="1.0"?>

<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
    <userSettings>
        <MyApp.Properties.Settings>
            <setting name="Url" serializeAs="String" xdt:Transform="Replace" xdt:Locator="Match(name)">
                <value>
                    www.google.com
                </value>
            </setting>
        </MyApp.Properties.Settings>
    </userSettings>
</configuration> 
```

我们在这里执行相同的操作（替换：）`xdt:Transform="Replace"`，但我们通过匹配属性来达到要更改的值：`xdt:Locator="Match(name)"`

# mysql - MySQL - 更改索引列 VARCHAR 长度？

> ID：14323176
> 
> 赞同：0
> 
> 时间：2013-01-14T17:08:54.357
> 
> 标签：mysql, indexing, key, varchar, maxlength

我目前有一个带有唯一索引列“名称”的索引列的表。目前，“名称”列是长度为 25 的 varchar。我想将其增加到 50。我正在尝试使用

```
alter table `meal_prices` modify `name` varchar(50); 
```

去做这个。但是，这似乎不会影响该列。我觉得这不起作用，因为该列是索引列，但我不确定。有什么建议么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:53:48.853

之后运行`show create table TABLENAME`以验证数据类型已更改。

# c++ - 在 32 位的 GCC 中结构打包不起作用？

> ID：14323188
> 
> 赞同：4
> 
> 时间：2013-01-14T17:09:35.997
> 
> 标签：c++, gcc, struct, g++, pragma

我在一个项目中继承了一些第三方代码。它由一个头文件和一个没有源的二进制库组成，所以我不能用不同的设置重新编译它。

标头使用编译时类似断言的技巧（`typedef`如果表达式失败，则使用负大小数组）来确保正确的结构对齐，但它似乎不适用于 32 位模式。

这是一个捕获整个问题的独立小程序：

```
#include <stdio.h>
#include <stddef.h>

#pragma pack(push, 8)
struct test {char _; long long a;};
typedef char pack_test[(offsetof(test, a) == 8) ? 1 : -1];
#pragma pack(pop)

int main(int argc, char *argv[])
{
        printf("%d\n", offsetof(test, a));
        return 0;
} 
```

上面的代码无法在 clang 3.0 和任何我可以快速上手的最新 gcc 版本（4.5 到 4.7）上编译：打包 pragma 根本没有任何效果。编译器不断将成员对齐`a`到 4 个字节（您可以通过注释`typedef`out 来检查）。

这是为什么？如何修复代码，以使该断言不会失败并使其与 ABI 兼容，同时不必遍历标头中的所有结构并将`attribute`s 附加到它们的尾部？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:11:26.123

在 32 位系统上，a`long long`可能不需要八个字节的对齐，四个就足够了。毕竟，您仍然从内存中获取两个完整的字，无论它们中的第一个是八字节对齐的还是四字节对齐的。

您可以尝试使用属性强制八字节对齐

```
struct test { char _; long long a __attribute__ ((aligned(8))); }; 
```

（可能是错的，我对gcc的属性不熟悉）

当然，您也可以在 中添加一个 dummy 成员以`struct`确保所需的对齐方式

```
struct test { char _; char dummy[7]; long long a; } 
```

这应该在实践中起作用。

# php - php 打印并将 div 保存为 .jpeg

> ID：14323191
> 
> 赞同：1
> 
> 时间：2013-01-14T17:09:40.627
> 
> 标签：php, jquery, image-generation, dynamic-image-generation

> **可能重复：**
> [如何使用 PHP 将网页保存为图像文件？](https://stackoverflow.com/questions/3175392/how-to-save-webpage-as-a-image-file-using-php)

我希望用户输入一些输入，然后当他完成点击保存

他的所有输入都发送到一个 php 文件，该文件保存这些输入并响应

具有背景图像的新可打印页面，所有输入都显示在由 css 定位的列表中。 ![在此处输入图像描述](../Images/9fb2ce2559084a4a5f4244f1c90ce75e.png)

我的问题是有可能..

1.  页面显示后触发自动打印
2.  将此实体页面保存为服务器上的单个 jpeg

我的小项目正在使用：php-html5-jquery-codeigniter 2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:13:53.280

您可以使用 GDI+ 生成页面服务器端的 JPG，但它需要您放置文本等，而不依赖于 CSS，以及用于布局的浏览器...如果不这样做，您最好生成一个 PDF是为此而设计的。

至于打印，您可以使用以下 Javascript 触发打印对话

```
windows.print() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:12:37.963

1.  是的。加载时调用`window.print()`。
2.  是的，但这会更困难。您需要将输出生成为图像。PDF 可能是一个更简单的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:13:28.797

要自动打开打印对话框：

```
function printpage() {
    window.print();
} 
```

或者直接打电话`window.print();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T17:25:51.133

你可以搞定 PDF 生成，也可以设置[打印友好的 CSS](http://coding.smashingmagazine.com/2011/11/24/how-to-set-up-a-print-style-sheet/)。

# c# - 将带有子查询的 sql 查询转换为 linq 语句

> ID：14323192
> 
> 赞同：1
> 
> 时间：2013-01-14T17:09:43.263
> 
> 标签：c#, sql, linq, sql-server-2008

> **可能重复：**
> [如何在 LINQ 中进行子查询](https://stackoverflow.com/questions/418609/how-to-do-subquery-in-linq)

我有一个 SQL Server 2008 查询：

```
select 
    account_hcc_id, account_name 
from 
    [ACCOUNT_HISTORY_FACT] 
where 
     TOP_ACCOUNT_KEY = (select TOP 1 TOP_ACCOUNT_KEY 
                        from ACCOUNT_HISTORY_FACT 
                        where account_hcc_id = '3362') 
     and ACCOUNT_LEVEL = 1; 
```

我需要将其转换为 C# linq 语句。请让我知道我该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:16:42.217

```
from ahf in db.ACCOUNT_HISTORY_FACT
where ahf.ACCOUNT_LEVEL == 1 &&
      ahf.TOP_ACCOUNT_KEY == db.ACCOUNT_HISTORY_FACT
                               .Where(x => x.account_hcc_id == "3362") 
                               .Select(x => x.TOP_ACCOUNT_KEY)
                               .FirstOrDefault() 
select new { ahf.account_hcc_id, ahf.account_name }; 
```

# excel - 使用 COUNTIFS 函数时如何只计算可见行数？

> ID：14323194
> 
> 赞同：10
> 
> 时间：2013-01-14T17:09:51.287
> 
> 标签：excel, excel-formula, worksheet-function

我一直在使用 Excel 的 COUNTIFS 函数来计算表中满足特定条件的行数，例如：

```
=COUNTIFS(Table1[Result],"Fail", Table1[Comments], "") 
```

现在我想修改这个表达式，使它只计算 Table1 中可见的行。（IE没有过滤掉。）我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T17:21:05.917

简单的方法是向表中添加另一列 - 例如`helper`用这样的公式调用

`=SUBTOTAL(103, B2)`

其中 B 列是结果列

现在将公式更改为

`=COUNTIFS(Table1[Result],"Fail", Table1[Comments], "",Table1[Helper],1)`

小计公式仅在可见行上返回 1

如果没有帮助列，您可以使用此公式

`=SUMPRODUCT((Table1[Result]="Fail")*(Table1[Comments]=""),SUBTOTAL(103,OFFSET(Table1[Result],ROW(Table1[Result])-MIN(ROW(Table1[Result])),0,1,1)))`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T19:48:27.597

我使用这个公式：=subtotal(3,B2:B100) 其中 subtotal(3, 即 CountA 和 B2:b100 是范围。过滤器中的隐藏行被忽略，这个公式只计算可见行。它适用于我希望它对你有用

# python - 跨多个进程处理 websocket 客户端

> ID：14323195
> 
> 赞同：2
> 
> 时间：2013-01-14T17:09:51.620
> 
> 标签：python, websocket, tornado

我有一个使用 python 的龙卷风框架运行良好的 websocket 实现，用作后端，在单个龙卷风进程上运行良好。虽然我正在尝试，但我无法在多个进程之间保留 websocket 客户端连接。

我目前正在将客户端实例添加到模块的字典对象中，其他进程不容易访问该对象。

有人应该如何在 python 中的多个进程之间保存一个类实例（更具体地说，龙卷风）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T08:56:30.537

您不应该尝试在进程之间共享对象。只是不要这样做。

如果您的用例是某个进程因任何原因停止，请让客户端通过重新连接来处理关闭。连接将被路由到另一个正在运行的 Tornado 进程。

如果您的用例是与其他 Tornado 进程共享消息，请考虑一下您的网络拓扑：您可能会将消息发送到新的父节点，该父节点将消息分发回所有 Tornado 实例（包括原始 Tornado 进程）。

[ZMQ](http://zeromq.org/)库和文档是很好的资源，会给你一些想法。

# vb.net - 如何在 vb.net 中从访问 wpf 数据网格中添加数据

> ID：14323206
> 
> 赞同：0
> 
> 时间：2013-01-14T17:10:30.870
> 
> 标签：vb.net, ms-access, wpfdatagrid

如何将访问数据库中的数据添加到 wpf 数据网格。我曾尝试使用数据表作为数据源，但它给出了一个错误。我也尝试过使用 itemsource 而不是 datasource 就像一些消息来源建议的那样，但徒劳无功。实际上我在用代码填充我的数据表后被卡住了：

```
 `Dim da As New OleDb.OleDbDataAdapter("SELECT activitynm as [Activity],motonum as [Car No], " & _
                                         "startmile as [Start mileage],stopmile as [Stop mileage],proj_code  as [Project]," & _
                                         "ac_code as [Account code],month(miledate) as [Project month], year(miledate) as [Project year]" & _
                                         " from carmileage where ac_code='""'", cnn2)
    Dim dt As New DataTable
    'fill data to datatable
    da.Fill(dt)
    //What to put here is the problem` 
```

有人有线索。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:38:35.190

设置 itemsource 属性：

```
ID_Of_datagrid.ItemSource = dt.rows 
```

[一个显示简单绑定的教程](http://www.i-programmer.info/programming/wpf-workings/620-using-the-wpf-net-40-datagrid-.html?start=2)和[另一个显示简单绑定的教程](http://wpftutorial.net/DataGrid.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-06T15:23:43.977

我有解决方案。我首先填充`ADODB.Recordset`，然后为`DataGrid`. 您必须将每一列绑定到 Recordset 中的列，然后我`OleDb.OleDbDataAdapter`用来连接`Recordset`到`DataTable`. 然后你设置`DataGrid.ItemsSource = DataTable.DefaultView`.

这是我的代码（我也对列进行了一些字符串格式化）：

```
 Public Sub Polni_Tabelo()
    Dim strQuery As String ' SQL stavek 
    Dim rsADO As New ADODB.Recordset  'Recordset iz baze
    Dim col(9) As DataGridTextColumn ' Stolpci datagrid text colmns
    Dim colCheck As New DataGridCheckBoxColumn
    Dim myDataAdapter = New OleDb.OleDbDataAdapter ' adapter za prenašanje v datatable (public)
    ' Dim dr As DataRowView

    Dim textStyle = New Style(GetType(TextBlock))
    textStyle.Setters.Add(New Setter(TextBlock.TextWrappingProperty, TextWrapping.Wrap))

    rsADO.CursorLocation = ADODB.CursorLocationEnum.adUseServer  'definicija lokacije kurzorja ? poglej W3Scool
    rsADO.CursorType = ADODB.CursorTypeEnum.adOpenDynamic
    rsADO.LockType = ADODB.LockTypeEnum.adLockOptimistic
    Try
        strQuery = "SELECT" & _
                    " Po.ID_Ponudbe AS ID" & _
                    ", Po.Datum_Ponudbe AS Datum" & _
                    ", Po.St_Ponudbe AS Stevilka" & _
                    ", Podjetja.Naziv_Podjetja AS Podjetje" & _
                    ", Po.Opis" & _
                    ", Po.Cena_Ponudbe AS Cena" & _
                    ", Po.DDV" & _
                    ", Po.SALDO" & _
                    ", Materialni_Stroski AS Strošek" & _
                    ", Po.Narocilnica AS Naročilnica" & _
                    ", Po.Naroceno AS Naročeno" & _
                    " FROM Podjetja" & _
                    " INNER JOIN" & _
                    " Ponudbe AS Po ON Podjetja.ID_Podjetja = Po.ID_Podjetja"  'Stavek za branje celotne tabele materiala
        'strQuery = "SELECT * From Ponudbe Where ID_Ponudbe = 2"
        rsADO.Open(strQuery, Application.conAdo)   'polni queri preko povezave ustvarjene v mainOknu
        PonudbeDataGrid.Columns.Clear()
        'i = rsADO.RecordCount
        For i = 1 To 9

            col(i) = New DataGridTextColumn                 'definiraj nov stolpec
            col(i).Header = rsADO(i).Name                   'definiraj ime stolpca
            col(i).Binding = New Binding(rsADO(i).Name)                     'definiraj povezavo na bazo in format stolpca
            col(i).MaxWidth = 300
            Select Case i
                Case 1
                    col(i).Binding.StringFormat = "{0:dd.MM.yyyy}"
                Case 4
                    col(i).ElementStyle = textStyle
                    col(i).MaxWidth = 400
                    col(i).MinWidth = 100
                Case 5, 6, 7, 8
                    col(i).Binding.StringFormat = "{0:#,##0.00 €}" ' "x.xx0,00 €"
                Case Else

            End Select
            PonudbeDataGrid.Columns.Add(col(i))            'dodaj stolpec v datagrid
        Next

        colCheck.Header = rsADO(10).Name
        colCheck.Binding = New Binding(rsADO(10).Name)
        colCheck.CanUserResize = False
        PonudbeDataGrid.Columns.Add(colCheck)
        'MaterialDataGrid.Style.Setters.Add(New Setter(Control.VerticalAlignmentProperty, VerticalAlignment.Center))

        PonudbeDataGrid.FontSize = Convert.ToInt32(Me.Font.Text)
        PonudbeDataGrid.ColumnHeaderHeight = 30
        PonudbeDataGrid.MinRowHeight = 30

        myDataTable = New DataTable                         'ustvari novo DataTabelo 
        myDataAdapter.Fill(myDataTable, rsADO)              'polni DataTabelo z recordsetom

        With PonudbeDataGrid
            .ItemsSource = myDataTable.DefaultView          'Vnos DataTable v datagrid
        End With
        PonudbeDataGrid.UpdateLayout()

        rsADO.Close()

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
    myDataAdapter = Nothing
    rsADO = Nothing

    myDataTable.DefaultView.Sort = "Stevilka"
End Sub 
```

# python - 在 Django 中，我的 css 文件无法调用“元组”对象

> ID：14323208
> 
> 赞同：0
> 
> 时间：2013-01-14T17:10:35.020
> 
> 标签：python, django

我刚刚为我的 Django 页面添加了一个 css 文件。但我收到错误消息：

```
Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  101\.                             request.path_info)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "C:\Python27\lib\site-packages\django\core\urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "C:\Python27\lib\site-packages\django\utils\importlib.py" in import_module
  35\.     __import__(name)
File "C:\Python27\PythonProjects\testproject\testproject\urls.py" in <module>
  25\.     (r'^site_media/(?P<path>.*)$', 'django.views.static.serve', { 'document_root': site_media}),

Exception Type: TypeError at /
Exception Value: 'tuple' object is not callable 
```

在我的 urls.py 文件中，我包含了以下几行：

```
 site_media = os.path.join(os.path.dirname(__file__), 'site_media')
    urlpatterns = patterns('',
    ..................
    (r'^site_media/(?P<path>.*)$', 'django.views.static.serve', { 'document_root': site_media}),
) 
```

错误消息告诉我错误来自`urlpatterns`. 我的`site_media`文件夹存储在 中`C:/Python27/PythonProjects/testproject`，我的 css 文件在`site_media`文件夹中。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:20:03.933

您可能在上一行的末尾缺少一个逗号。

# android - ICS 之前的 PreferenceFragment

> ID：14323209
> 
> 赞同：2
> 
> 时间：2013-01-14T17:10:49.300
> 
> 标签：android, android-fragments, android-preferences

如何在较旧的 Android 版本上使用 PreferenceFragment？ActionBarSherlock 和 Google 的兼容性库似乎没有替代实现。如果我创建一个 ActivityGroup 并将 PreferenceActivity 作为一个简单的片段添加到其中，它会正常工作吗？仅针对 ICS 和更新版本可以解决所有问题，但不幸的是，2.3.x 确实占据了整个市场的一半。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:23:32.233

> 如何在较旧的 Android 版本上使用 PreferenceFragment？

你没有。正如您所注意到的，没有反向移植，反向移植将是相当具有挑战性的（因为我曾经研究过这个并尖叫着跑掉了）。

> 如果我创建一个 ActivityGroup 并将 PreferenceActivity 作为一个简单的片段添加到其中，它会正常工作吗？

我不会那样做的。我会创建一个在较新设备上`PreferenceActivity`使用的`PreferenceFragment`，并且只在旧设备上使用普通的偏好 XML。这是一个演示这个[的示例项目。](https://github.com/commonsguy/cw-omnibus/tree/master/Prefs/FragmentsBC)

# c# - 检查特定表单字段是否有效

> ID：14323212
> 
> 赞同：10
> 
> 时间：2013-01-14T17:11:03.077
> 
> 标签：c#, asp.net-mvc, razor, validation

我一直在寻找一段时间，但还没有找到解决方案。

我是 ASP.NET 和 MVC4/Razor2 新手，所以我主要在编辑默认项目。

无论如何，我的问题是我正在使用 Twitter Bootstrap，如果底层字段无效，我需要`error`在 a 上添加一个 CSS 类。`div`

到目前为止，我有这个：

```
 <div class="control-group error">
      @Html.LabelFor(m => m.Password, new { @class = "control-label" })
      <div class="controls">
        @Html.PasswordFor(m => m.Password)
        @Html.ValidationMessageFor(m => m.Password, null, new { @class = "inline-help error" })
      </div>
    </div> 
```

当字段无效时，我应该怎么做才能让 Razor在我的代码段`error`的第一个中插入类。`div`

**更新：**我找到了一种方法，但与其他代码相比感觉不对。有没有更好的方法或者是这样做*的*方法？

```
<div class="control-group@((!ViewData.ModelState.IsValidField("Password")) ? " error" : "")"> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-08T19:10:38.380

像这样：

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString AddClassIfPropertyInError<TModel, TProperty>(
        this HtmlHelper<TModel> htmlHelper, 
        Expression<Func<TModel, TProperty>> expression, 
        string errorClassName)
    {
        var expressionText = ExpressionHelper.GetExpressionText(expression);
        var fullHtmlFieldName = htmlHelper.ViewContext.ViewData
            .TemplateInfo.GetFullHtmlFieldName(expressionText);
        var state = htmlHelper.ViewData.ModelState[fullHtmlFieldName];
        if (state == null)
        {
            return MvcHtmlString.Empty;
        }

        if (state.Errors.Count == 0)
        {
            return MvcHtmlString.Empty;
        }

        return new MvcHtmlString(errorClassName);
    }
} 
```

那么在你看来：

```
<div class="control-group @Html.AddClassIfPropertyInError(x => x.Email, "error")">
    <label class="control-label">Email</label>
    <div class="controls">
        <input type="text" placeholder="Email" name="Email" />
        <span class="help-inline">@Html.ValidationMessageFor(x => x.Email)</span>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-17T10:57:39.183

除了 Loki 所说的之外，我还遇到了一个很好且整洁的解决方案，可以使用 ModelState 类并检索特定信息来实现我想要的每个验证逻辑：

假设您要检查模型中名为“InnerClass”和字段“Name”的类的验证：

```
if (ModelState["InnerClass.Name"].Errors.Count > 0)
{
    foreach (var error in ModelState["InnerClass.Name"].Errors)
    {
        message = error.ErrorMessage;
        isValidFlag = false;
    }
} 
```

除了上述条件，您也可以使用它：

```
ModelState.IsValidField("InnerClass.Name") 
```

ModelState 类具有检索验证信息的好方法，因此通过使用上述方法，您可以通过一些变通方法从中获得更多信息。

希望对你有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-22T00:27:24.063

您也可以检查是否有验证消息，快速而肮脏......

```
<div class="control-group @(Html.ValidationMessageFor(m => m.Password) != null ? "error" : "")"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-21T23:38:13.163

您需要查询视图的属性中的`IsValidField`方法。`ModelStateDictionary``ViewData`

对于不属于层次结构的模型，更新中的答案将起作用。

对于属于层次结构的模型，您需要指定与整个模型相关的字段名称。

要获取模型属性的字段名称，请使用`Html.NameFor(...)`API。

```
ViewData.ModelState.IsValidField( Html.NameFor(m => m.Password).ToString() ) 
```

让我们更进一步，并使用一种实用方法扩展，该方法将在字段*无效*`HtmlHelper`时输出文本

 *```
namespace System.Web.Mvc.Html
{
    public static class GeneralExtensions
    {
        public static MvcHtmlString TextForInvalidField<TModel, TProperty>(this HtmlHelper<TModel> htmlHelper, Expression<Func<TModel, TProperty>> expression, string text)
        {
            if(htmlHelper.ViewData.ModelState.IsValidField(htmlHelper.NameFor(expression).ToString()))
            {
                return MvcHtmlString.Empty;
            }
            return MvcHtmlString.Create(text);            
        }
    }
} 
```

最终结果（来自您的原始示例）将如下所示：

```
<div class="control-group @Html.TextForInvalidField(m => m.Password, "error")">
  @Html.LabelFor(m => m.Password, new { @class = "control-label" })
  <div class="controls">
    @Html.PasswordFor(m => m.Password)
    @Html.ValidationMessageFor(m => m.Password, null, new { @class = "inline-help error" })
  </div>
</div> 
```*

# php - 在 Yii 中引用 Select 下拉值

> ID：14323214
> 
> 赞同：0
> 
> 时间：2013-01-14T17:11:06.417
> 
> 标签：php, yii

问题：使用 a`CActiveForm` `dropDownList`我试图让它在更改时发布选定的值。但我不确定如何引用当前选择的下拉值？

到目前为止的代码是：

```
$form->dropDownList($model,'condition',$model->getConditionOptions(), array('submit'=>array('theme/build','id'=>$model->id,'condition'=>''))); 
```

`getConditionOptions`返回下拉值数组的位置，“条件”应该是从此下拉列表中选择的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:43:53.680

不要仅仅为了具有当前值而指定属性——这违背了下拉菜单的目的。

要获取下拉列表的当前值，请在您的 jquery 中使用 jQuery 的 val: [http://api.jquery.com/val/](http://api.jquery.com/val/)，例如：

```
$("#DropDownID").val() 
```

**编辑：**您真正的问题似乎是如何在更改下拉列表后更新内容，具体取决于下拉列表的值。这将通过 AJAX 完成。Yii 为此提供了一个特殊的[AJAX](http://www.yiiframework.com/doc/api/1.1/CHtml#ajax-detail)数组，例如：

```
$form->dropDownList($model,
                    'condition',
                    $model->getConditionOptions(),
                    array('submit'=>array('theme/build',
                          'id'=>$model->id,
                          'ajax'=>array('url'=>CController::createURL('controller/action'),
                                        'data'=>'$("#' . $model->id . '")',                                   
                                        'update'=>'#otherID', //selector to update
                                        )
                                    )
                          )
                    ); 
```

然后，在您的控制器端，您可以使用[getParam](http://www.yiiframework.com/doc/api/1.1/CHttpRequest#getParam-detail)获取值。请注意，您要更新的任何内容都应回显，而不是使用渲染。

**编辑 2：**如果您不想使用 jQuery，而只是重新加载整个页面，您应该只提交表单，例如：

```
$form->dropDownList($model, 'condition', $model->getConditionOptions(), array('submit'=>CController::createURL('controller/action'))) 
```

然后在您的控制器中，您仍然会使用 getParam 并呈现一个新页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:40:54.380

我认为你可以这样做的方式是这样的：

```
//define your dropdownlist
$form->dropDownList(
    $model,
    'condition',
    $model->getConditionOptions(),
    //your ajax call
    'ajax'  => array( 
        'type'  => 'POST',
        'url'   => 'theme/build'.
        'data'  => array(
            'id' => $model->id,
            'condition' =>'js:jQuery(this).val()', //current value
        )
); 
```

编辑：要获得当前选定的选项：

```
$('#dropbox').val(); 
```

或者

```
$('#dropbox :selected').val(); 
```

获取当前选定的选项文本

```
$('#dropbox :selected').text(); 
```

# objective-c - 将元素从 NSDictionary 复制到方法返回的对象

> ID：14323217
> 
> 赞同：0
> 
> 时间：2013-01-14T17:11:10.367
> 
> 标签：objective-c, copy, nsdictionary

我正在调用一个 JSON 服务，我从中得到：

```
JSON=__NSCFDictionary * 0x0c3a1310 3 key/value pairs 
```

`description`是：

```
Printing description of JSON:
{
    codigo = 0;
    datos =     (
                {
            datalle = "Ahora podr\U00e1s copiar y pegar el RFC y la raz\U00f3n social del cliente.";
            datalletop = "Ahora podr\U00e1s copiar y pegar el RFC y la raz\U00f3n social del cliente.";
            "etiqueta_modulo" = "Administraci\U00f3n de clientes";
            modulo = "ADMIN_CLIENTES";
            seccion = SERVICIOS;
            "titulo_cambio" = Copiar;
            urlimagen = "images/novedades/adm.png";
        },
                {
            datalle = "En caso de que alg\U00fan usuario est\U00e9 inhabilitado para comisionarse, se mostrar\U00e1 un mensaje.";
            datalletop = "En caso de que alg\U00fan usuario est\U00e9 inhabilitado para comisionarse, se mostrar\U00e1 un mensaje.";
            "etiqueta_modulo" = Comisionate;
            modulo = COMISIONATE;
            seccion = SERVICIOS;
            "titulo_cambio" = Bloqueo;
            urlimagen = "images/novedades/comisionate.png";
        },
                {
            datalle = "Ya puedes enviar el recibo fiscal en formato XML.";
            datalletop = "Ya puedes enviar el recibo fiscal en formato XML.";
            "etiqueta_modulo" = "Impresi\U00f3n y env\U00edo de fianzas y recibos";
            modulo = IMPRESION;
            seccion = SERVICIOS;
            "titulo_cambio" = "Recibo en XML";
            urlimagen = "images/novedades/impresion.png";
        },
                {
            datalle = "Es un nuevo m\U00f3dulo que permitir\U00e1 subir documentos a la aplicaci\U00f3n a partir del carrete de fotos del iPad, sustituyendo la aplicaci\U00f3n Integrador.";
            datalletop = "Es un nuevo m\U00f3dulo que permitir\U00e1 subir documentos a la aplicaci\U00f3n a partir del carrete de fotos del iPad, ...";
            "etiqueta_modulo" = "Carga de documentos";
            modulo = INTEGRADOR;
            seccion = SERVICIOS;
            "titulo_cambio" = "Nuevo m\U00f3dulo";
            urlimagen = "images/novedades/cargadoc.png";
        },
                {
            datalle = "Ya puedes personalizar el rango de fechas entre 1 d\U00eda y 1 a\U00f1o. ";
            datalletop = "Ya puedes personalizar el rango de fechas entre 1 d\U00eda y 1 a\U00f1o. ";
            "etiqueta_modulo" = Exportador;
            modulo = EXPORTADOR;
            seccion = "INTELIGENCIA DE NEGOCIOS";
            "titulo_cambio" = "Rango de fechas";
            urlimagen = "images/novedades/exportador.png";
        },
                {
            datalle = "En la secci\U00f3n de detalle de este m\U00f3dulo, encontrar\U00e1s la opci\U00f3n de filtrar la informaci\U00f3n seg\U00fan la moneda.";
            datalletop = "En la secci\U00f3n de detalle de este m\U00f3dulo, encontrar\U00e1s la opci\U00f3n de filtrar la informaci\U00f3n seg\U00fan la moneda.";
            "etiqueta_modulo" = Renovaciones;
            modulo = RENOVACIONES;
            seccion = "INTELIGENCIA DE NEGOCIOS";
            "titulo_cambio" = "Filtro por moneda";
            urlimagen = "images/novedades/ren_cancelaciones.png";
        },
                {
            datalle = "En el reporte de Mezcla de cartera por ramos encontrar\U00e1s un scroll para poder ver m\U00e1s informaci\U00f3n.";
            datalletop = "En el reporte de Mezcla de cartera por ramos encontrar\U00e1s un scroll para poder ver m\U00e1s informaci\U00f3n.";
            "etiqueta_modulo" = Ventas;
            modulo = VENTAS;
            seccion = "INTELIGENCIA DE NEGOCIOS";
            "titulo_cambio" = "Mejora en la visualizaci\U00f3n";
            urlimagen = "images/novedades/ventas.png";
        },
                {
            datalle = "\b<ul><li>Mis clientes. Mundo Aserta hace la inteligencia de negocio por ti, permiti\U00e9ndote enfocarte en lo m\U00e1s importante de tu cartera. \U00bfC\U00f3mo? Analizando de primera vista las ventas, primas por cobrar, reclamaciones y renovaciones de tus 20 principales clientes.</li><li>Programas de proveedores. Consulta la informaci\U00f3n a detalle de cada uno de los programas de tus clientes</li><li>Movimientos. Realiza endosos de aumento a tus p\U00f3lizas de fianzas desde este m\U00f3dulo. Ya puedes realizar tambi\U00e9n cancelaci\U00f3n, disminuci\U00f3n y anula y sustituye de fianza y recibo. </li><li>Podr\U00e1s recibir notificaciones a trav\U00e9s de alertas sobre los movimientos que est\U00e1n en proceso de autorizaci\U00f3n, liberaci\U00f3n o impresi\U00f3n.</li><li>Tablero de control. Te mostrar\U00e1 tus principales indicadores como son: comportamiento de ventas; reclamaciones pagadas, recibidas y recuperadas; primas por cobrar por antig\U00fcedad y d\U00edas cartera; responsabilidades vigentes para cancelar o renovar</li><li>Emisi\U00f3n de fianzas en programas globales de fianzas vehiculares. Ya puedes emitir estas fianzas desde este nuevo m\U00f3dulo</li><li>Genera tu token para poder entrar en modo fuera de l\U00ednea y accesar a los m\U00f3dulos de inteligencia de negocios, Espacio Aserta y Campus Aserta</li></ul>";
            datalletop = "\b<ul><li>Mis clientes. Mundo Aserta hace la inteligencia de negocio por ti, permiti\U00e9ndote enfocarte en lo m\U00e1s ...";
            "etiqueta_modulo" = General;
            modulo = GENERAL;
            seccion = GENERAL;
            "titulo_cambio" = General;
            urlimagen = "images/novedades/general.png";
        },
                {
            datalle = "<ul><li>En caso de que existan fallas de procesamiento de informaci\U00f3n en los sistemas, la secci\U00f3n de Inteligencia de negocios ser\U00e1 bloqueada</li><li>Ya puedes copiar y pegar cualquier dato de la secci\U00f3n Inteligencia de negocios.</li><li>Ahora podr\U00e1s enviar por correo reportes de la secci\U00f3n Inteligencia de negocios sin l\U00edmite de resultados.</li><li>En esta secci\U00f3n, ya podr\U00e1s filtrar la informaci\U00f3n utilizando m\U00e1s de un filtro simult\U00e1neamente.</li></ul>\n";
            datalletop = "<ul><li>En caso de que existan fallas de procesamiento de informaci\U00f3n en los sistemas, la secci\U00f3n de Inteligencia de ...";
            "etiqueta_modulo" = Generales;
            modulo = GENERAL;
            seccion = GENERAL;
            "titulo_cambio" = "Mejoras en toda la aplicaci\U00f3n";
            urlimagen = "images/novedades/general.png";
        }
    );
    mensaje = EXITO;
}
(lldb) 
```

我有这个方法：

```
+(dhNovedades*)parsear:(NSDictionary*) pdicDatos
{
    dhNovedades *novedades;
    novedades.mensaje = [pdicDatos objectForKey:@"mensaje"];
    novedades.novedades = [pdicDatos objectForKey:@"datos"];

    return novedades;
} 
```

我将生成的 JSON 传递给它`NSDictionary`以获取一个`dhNovedades`对象，该对象的定义如下：

```
@interface dhNovedades : NSObject
{
    NSString *login;
    NSString *id_sesion;
    NSMutableArray *novedades;
    NSString *mensaje;
} 
```

我遇到的问题是`objectForKey`：`NSDictionary`对象的属性`dhNovedades`没有被分配，当我评估这些表达式时，我得到：

```
[pdicDatos objectForKey:@"mensaje"] = Invalid Expression 
```

我复习了的内容，`NSDictionary` `pdicDatos`三要素是类型`__NSCFString`；我想这与问题有关，因为我正在分配

```
novedades.mensaje = [pdicDatos objectForKey:@"mensaje"]; //mensaje is a NSString
novedades.novedades = [pdicDatos objectForKey:@"datos"]; //novedades.novedades is a NSMutableArray 
```

我在某处读到这可能与内存管理有关`NSDictionary`——比如我试图不保留的对象——但我对此很陌生，不知道问题可能是什么，所以请帮我！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:35:17.310

在`+parsear:`中，您实际上并没有实例化`dhNovedades`. 您应该在第一行执行此操作：

```
dhNovedades *novedades = [[dhNovedades alloc] init]; 
```

这将是解决您的问题的开始，因为我们不知道您提供的内容是如何设置您的属性或访问器的`dhNovedades`。

另一件事，无所谓：你的类名应该大写。如果“dh”是前缀，则两个字母都应大写。

# mysql - 保存统计mysql

> ID：14323221
> 
> 赞同：1
> 
> 时间：2013-01-14T17:11:30.023
> 
> 标签：mysql, file, statistics, save

我想为我的网站做一个统计。所以我可以记录每天的用户访问。例子：

```
 DAY   | USERS |
---------|-------|
O1/01/13 | 256   |
O2/01/13 | 251   | 
```

这很容易做到，但我担心将它保存在数据库中是否是个好主意？如果我保存在数据库中，每年将有 365 行。或者我应该将记录保存在文本文件中。但问题是如果我保存在文本中，是否很难获取特定日期的数据？我在考虑文本文件的原因是我从来没有在文本中保存过任何东西，所以这对我来说是新的东西。同样，如果我有超过一年的记录，我可以重命名文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:28:15.210

每年 365 行真的没什么。即使您添加更多列，例如点击次数、浏览次数最多的页面等。如果您仍然关心性能，您可以编写一个小 cronjob 来总结每年的统计数据并将结果写入另一个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:22:13.743

如果您需要事务性能，数据库比使用纯文本文件要好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:24:06.190

数据库可以轻松处理数千倍于它所使用的数据。使用文本文件会比它的价值更麻烦。

要考虑的一种替代方法是根本不存储这些数据，而是在需要时运行查询。这对于数据库来说也很容易处理，并且可以让您的统计数据更加灵活。但是，这确实要求您放入该表中的数据直接来自数据库，而不是来自其他来源。

按照现在的情况，您将知道有多少用户访问了该站点。如果您动态获取数据，您可以添加其他标准，例如时间或唯一访问者，这些标准在您当前的设置中不可用。

# android - 选项卡中的列表片段中的列表视图选择

> ID：14323222
> 
> 赞同：0
> 
> 时间：2013-01-14T17:11:34.767
> 
> 标签：android, android-listview, android-viewpager, android-listfragment

我有以下问题。我有一个带有 viewpager 和两个标签的应用程序。这两个选项卡是两个列表片段。现在我希望如果用户在第一个选项卡中选择一个项目，则在第二个选项卡中选择第 5 个项目。（第二个选项卡是第一项文本的翻译）。我的问题是，当我在第一个选项卡中选择一个项目，现在切换到第二个选项卡时，没有任何选择。当我单击第一个选项卡中的某些内容时，我调用了 Parent 活动中的一个函数，该函数调用了第二个片段中的一个函数，该函数应该选择第 5 个项目。这是片段活动的代码：

```
public class Dailyquran extends FragmentActivity implements ActionBar.TabListener {

    SectionsPagerAdapter mSectionsPagerAdapter;
    ViewPager mViewPager;

    public  ArrayList<Tweet> tweets = new ArrayList<Tweet>(); 
    public  ArrayList<Tweet> tweets2 = new ArrayList<Tweet>(); 
    //private static ArrayList<String> roomList;

    public String a;
    public static int laenge_inhalt;

    public static int selected;

    public static String sure_media;
    public static String vers_media;
    String koran_filename;
    //int tabwahl=0;

    int playstatus=0;
    MediaPlayer mp = new MediaPlayer();
    MenuItem playMenu;

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_dailyquran, menu);
        playMenu = menu.findItem(R.id.menu_play);
        return true;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTitle("Daily Quran");
        setContentView(R.layout.activity_dailyquran);        
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());
        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        // set the app icon as an action to go home
        actionBar.setDisplayHomeAsUpEnabled(true); 
        //enable tabs in actionbar
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

     // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);

        mViewPager.setAdapter(mSectionsPagerAdapter);

     // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }

          main(); 

    }

    /*  WEITER UNTEN SIND DIE TABSELECTED FUNKTIONEN !!!!
    //@Override
    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

   // @Override
    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

   // @Override
    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }    
    */

    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        private FragmentTransaction mCurTransaction = null;

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public int getItemPosition(Object object) {
           return POSITION_NONE; //To make notifyDataSetChanged() do something
       }

        @Override      
        public Fragment getItem(int i) {
          //  Fragment building_fragment = new BuildingFragment();
            Fragment room_fragment = new RoomFragment();
            Fragment transl_fragment = new TransliterationFragment();

          //  Fragment device_fragment = new DeviceFragment();
            Bundle args = new Bundle();

            switch(i){
            case 0:

                room_fragment.setArguments(args);

                return room_fragment;
            case 1:           

                return transl_fragment;
            case 2:  
            //  args.putInt(RoomFragment.ARG_SECTION_NUMBER, i);
            //    room_fragment.setArguments(args);
                return room_fragment;
            default: return null;
            } 
        }
        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return "a";
                case 1: return "b";
                case 2: return "c";
            }
            return null;
        }

        @Override
        public Object instantiateItem(View container, int position) {
            if (mCurTransaction == null) {
                mCurTransaction = getSupportFragmentManager().beginTransaction();
            }
            // TODO Auto-generated method stub
            Fragment fragment = getItem(position);

            if (fragment!=null){
                System.out.println("Fragment Found!");
                mCurTransaction.attach(fragment);
                }

            return fragment;//super.instantiateItem(container, position);
        }

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
            case R.id.menu_play:
                play();
                return true;

            default:
                return super.onOptionsItemSelected(item);
        }
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        MenuItem switchButton = menu.findItem(R.id.menu_play);     

    }

    public class Tweet {  

        String content;  
        String sure;
        String vers;

}  

    public class Tweet2 {  

        String content;  
        String sure;
        String vers;

}  

public void onTabReselected(Tab tab, android.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

    public void onTabSelected(Tab tab, android.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub

        mViewPager.setCurrentItem(tab.getPosition());

    }

    public void onTabUnselected(Tab tab, android.app.FragmentTransaction ft) {
        // TODO Auto-generated method stub

    }

//HERE IS THE CODE FOR SELECTING THE SECOND ITEM

public void one_changed()
    {
        TransliterationFragment fragment_meaning = (TransliterationFragment) getSupportFragmentManager().findFragmentById(R.id.myfragment2);                
        Toast.makeText(getApplicationContext(),"Change Selection", Toast.LENGTH_SHORT).show(); 

        fragment_meaning.change_selected(); // do what updates are required   

    } 
```

这是第二个片段的相关代码，我可以在控制台中看到字符串“Hallo”，因此确实调用了该函数，但未选择该项目。

```
public void change_selected()
    {

        System.out.println("Hallo");
        ListView list=getListView();  
        list.setSelection(4);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:37:51.067

当我在父活动的函数 on_changed 中添加此代码时，它现在可以工作：

```
TransliterationFragment fragment_meaning = (TransliterationFragment) getSupportFragmentManager().findFragmentByTag("android:switcher:"+R.id.pager+":1");      
fragment_meaning.change_selected(); // do what updates are required 
```

# python - 在 Python 中遍历 XML

> ID：14323223
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:11:35.957
> 
> 标签：python, xml

我有一些非常“深”的 XML（见底部），并且正在努力使用 minidom 或 elementtree 来获得我需要的值 - 知道获得粗体值 (VALUE_TO_GET) 的最简单方法是什么会有不同数量的`LowestOfferListing`标签？我基本上需要为每个获取`LandedPrice`/的第一个实例，并且找不到这样做的简单（ish）方法！`Amount``SKUIdentifier`

```
<?xml version="1.0" ?>
<GetLowestOfferListingsForSKUResponse xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01">
  <GetLowestOfferListingsForSKUResult SellerSKU="X" status="Success">
    <AllOfferListingsConsidered>true</AllOfferListingsConsidered>
    <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01" 
             xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
      <Identifiers>
        <MarketplaceASIN>
          <MarketplaceId>X</MarketplaceId>
          <ASIN>X</ASIN>
        </MarketplaceASIN>
        <SKUIdentifier>
          <MarketplaceId>X</MarketplaceId>
          <SellerId>X</SellerId>
          <SellerSKU>**VALUE_TO_GET**</SellerSKU>
        </SKUIdentifier>
      </Identifiers>
      <LowestOfferListings>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>New</ItemCondition>
            <ItemSubcondition>New</ItemSubcondition>
            <FulfillmentChannel>Amazon</FulfillmentChannel>
            <ShipsDomestically>True</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>3</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>**VALUE_TO_GET**</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>False</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>Merchant</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>X</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
      </LowestOfferListings>
    </Product>
  </GetLowestOfferListingsForSKUResult>
  <GetLowestOfferListingsForSKUResult SellerSKU="X" status="X">
    <AllOfferListingsConsidered>X</AllOfferListingsConsidered>
    <Product xmlns="http://mws.amazonservices.com/schema/Products/2011-10-01"
             xmlns:ns2="http://mws.amazonservices.com/schema/Products/2011-10-01/default.xsd">
      <Identifiers>
        <MarketplaceASIN>
          <MarketplaceId>X</MarketplaceId>
          <ASIN>X</ASIN>
        </MarketplaceASIN>
        <SKUIdentifier>
          <MarketplaceId>X</MarketplaceId>
          <SellerId>X</SellerId>
          <SellerSKU>**VALUE_TO_GET**</SellerSKU>
        </SKUIdentifier>
      </Identifiers>
      <LowestOfferListings>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>1</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>**VALUE_TO_GET**</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>8</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>Merchant</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>4</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
        <LowestOfferListing>
          <Qualifiers>
            <ItemCondition>X</ItemCondition>
            <ItemSubcondition>X</ItemSubcondition>
            <FulfillmentChannel>X</FulfillmentChannel>
            <ShipsDomestically>X</ShipsDomestically>
            <ShippingTime>
              <Max>X</Max>
            </ShippingTime>
            <SellerPositiveFeedbackRating>X</SellerPositiveFeedbackRating>
          </Qualifiers>
          <NumberOfOfferListingsConsidered>1</NumberOfOfferListingsConsidered>
          <SellerFeedbackCount>X</SellerFeedbackCount>
          <Price>
            <LandedPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </LandedPrice>
            <ListingPrice>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </ListingPrice>
            <Shipping>
              <CurrencyCode>X</CurrencyCode>
              <Amount>X</Amount>
            </Shipping>
          </Price>
          <MultipleOffersAtLowestPrice>X</MultipleOffersAtLowestPrice>
        </LowestOfferListing>
      </LowestOfferListings>
    </Product>
  </GetLowestOfferListingsForSKUResult>
  <ResponseMetadata>
    <RequestId>X</RequestId>
  </ResponseMetadata>
</GetLowestOfferListingsForSKUResponse> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:44:56.963

首先，您的 xml 似乎无效，因为它给出了一个错误`elemntree`，所以我尝试了它`lxml.html`，虽然它更健壮，`xpath`但仍然保持不变。

```
import lxml.html as lh
doc=lh.fromstring(xml)
doc.xpath('//sellersku/text()|//product/descendant::amount[1]/text()') 
```

*输出：*

```
['**VALUE_TO_GET**',
 '**VALUE_TO_GET**',
 '**VALUE_TO_GET**',
 '**VALUE_TO_GET**'] 
```

# osgi - 使 Apache Felix Gogo 无法打开本地控制台

> ID：14323225
> 
> 赞同：7
> 
> 时间：2013-01-14T17:11:43.003
> 
> 标签：osgi, apache-felix

我正在学习将 Apache Felix 用作我的 OSGi 框架。我希望能够使用 Felix Remote Shell 通过 telnet 访问我正在运行的实例。Remote Shell 通过 Gogo 访问该进程，如[http://felix.apache.org/site/apache-felix-remote-shell.html](http://felix.apache.org/site/apache-felix-remote-shell.html)中所述。当我使用自动部署目录中的 Gogo shell 包启动 Felix 时，它会在我开始的 Linux 控制台上`bundles`打开一个 Felix 提示符。`g!`我想做的是让 Felix 在 Gogo shell 处于活动状态时启动，但没有附加到我当前的 Linux 控制台并显示`g!`提示，并且仍然允许我通过远程登录使用 Remote Shell 访问实例。这可能吗？如果是这样，正确的方法是什么？将`nohup`并在后台运行就足够了？这对我来说似乎不是很干净。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-15T14:18:59.747

根据[邮件列表上的讨论](http://apache-felix.18485.n6.nabble.com/Gogo-shell-on-standard-input-output-streams-td4845969.html#a4845970)，您应该添加`-Dgosh.args=--nointeractive`JVM 参数。

# c# - 有没有更好的方法来管理本地化字符串？

> ID：14323226
> 
> 赞同：11
> 
> 时间：2013-01-14T17:11:43.093
> 
> 标签：c#, .net, localization, resourcemanager

我正在开发一个我们不得不担心本地化的产品。目前，这是我必须使用（或添加）本地化字符串时的工作流程：

1.  搜索 resources.resx 文件（其中有数百个项目）
2.  如果找到，则复制名称。否则，添加一个新字符串并复制名称
3.  然后，使用`ResourceFactory.ResourceMgr.GetString("MY_MAGIC_STRING")`（其中`ResourceMgr`只是 ResourceManager 的静态字段）

任何琴弦的这 3 步过程是一个真正的痛苦。是否有任何模式或方法可以使这个过程更容易？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T17:32:37.553

可以访问每个单独的字符串的自动生成的文件更容易使用 - 将 RESX 文件的“自定义工具”设置为`PublicResXFileCodeGenerator`.

代码如下所示：

```
using MyProject.Resources;
...
localizedText = Resources.SomeReasonableName; 
```

旁注：

*   拥有多个 RESX 文件以及自动生成的 ID 具有智能感知的额外好处，可为您提供合理数量的选择。
*   根据翻译的处理方式，您最好不要担心 RESX 文件中的重复文本（可能是 OK/cancel 类型的字符串除外）。在翻译时处理重复的字符串可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:42:52.657

有这个 Java 解决方案可能会给你一些想法： [http ://rodionmoiseev.github.com/c10n/](http://rodionmoiseev.github.com/c10n/)

这个想法是使用接口方法上的注释将翻译存储在源代码本身中。然后，通过使用特殊实用程序，您可以动态创建代理（动态实现接口的类），在调用接口方法时将返回本地化字符串值。

这种方式`"MY_MAGIC_STRING"`被替换为对`MyMagicString()`方法的调用，这为您提供了一些拼写/类型安全性，并使其对重构更加友好。

# php - PHP - 如果选择了选项，则多选需要字段

> ID：14323230
> 
> 赞同：-5
> 
> 时间：2013-01-14T17:12:03.450
> 
> 标签：php, multi-select, required

这是通过电子邮件发送的表格的一部分。当您选择选项状态时，文本字段状态是必需的，如果您不这样做，则县和邮政编码相同。我想要的是 php 来验证这一点，所以我可以发送电子邮件，但到目前为止我还没有能够完成它。

这是HTML：

```
<select multiple="multiple" name="geographic" id="geographic">
    <option value="state">State</option>
    <option value="county">County</option>
    <option value="zip">Zip Code</option>
</select>
<label for="state">What state?</label>
<input id="state" name="state" type="text">
<label for="county">What County?</label>
<input id="county" name="county" type="text">
<label for="zipcode">What is the Zip Code? *</label>
<input id="zipcode" name="zipcode" type="text"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:31:58.553

您可以使用`Javascript`which 允许在前端进行验证并且不需要页面加载，如下所示应该适合您：

```
<head>
<script type="text/javascript">
function SelectValidator() {
  // Get the select object
  var index = document.getElementById("geographic").selectedIndex;
  var select = document.getElementById("geographic").options;

  // Get our input elements
  var county = document.getElementById('county');
  var state = document.getElementById('state');
  var zipcode = document.getElementById('zipcode');

  if (select[index].value === "county") {
    if (county.value === null || county.value === "") {
      alert("Please complete the County field");
    } else {
      alert("You could simply put a return statement here.");
    }
  } else if (select[index].value === "state") {
    if (state.value === null || state.value === "") {
      alert("Please complete the state field");
    } else {
      alert("You could simply put a return statement here.");
    }
  } else if (select[index].value === "zip") {
    if (zipcode.value === null || zipcode.value === "") {
      alert("Please complete the Zip Code field");
    } else {
      alert("You could simply put a return statement here.");
    }
  }
}
</script>
</head> 
```

你的表格：

```
<form>
<select multiple="multiple" name="geographic" id="geographic">
    <option value="state">State</option>
    <option value="county">County</option>
    <option value="zip">Zip Code</option>
</select>

<label for="state">What state?</label>
<input id="state" name="state" type="text">

<label for="county">What County?</label>
<input id="county" name="county" type="text">

<label for="zipcode">What is the Zip Code? *</label>
<input id="zipcode" name="zipcode" type="text">

<button type="button" onclick="SelectValidator()">Display index</button>
</form> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-14T18:41:37.813

首先，您需要将代码包装在一个表单中，但您可能已经这样做了？如果没有，你应该看看[http://www.w3schools.com/php/php_forms.asp](http://www.w3schools.com/php/php_forms.asp)

表单发布到的 php 文件使用 $_POST 接收它，在 geoit 的情况下是 $_POST['geographic']，状态也是如此。现在您知道如何访问该值，您可以验证它。

所以

```
if($_POST['geographic'] == 'state'){

     if(empty($_POST['state'])){
          echo 'state is required';
     }else{
          echo 'state is given, proceed';
     }

} 
```

# wpf - ListViewItem 自定义模板：ContentPresenter 保持为空

> ID：14323231
> 
> 赞同：8
> 
> 时间：2013-01-14T17:12:04.007
> 
> 标签：wpf, xaml, templates, listviewitem, contentpresenter

我的代码中有以下 ListView。`views:GameCard`是一个自定义`UserControl`，是一个包含三个项目`{Binding}`的有效对象。`DataContext`如果没有自定义，`ItemContainerStyle`一切都可以完美运行——列表显示三个`GameCards`带有正确信息等。一旦我添加了这个`ItemContainerStyle`部分，我只得到三个“ABCD”；所以数据仍然正确加载，但`UserControl`不再显示我的（我只添加了“ABCD”来检查数据是否存在，否则我除了空框什么都没有）。

我可以在网上找到的每条信息似乎都表明只需`ContentPresenter`在模板中添加一个元素就可以了，但在这种情况下似乎不行。我错过了什么？

```
<ListView Grid.Row="1" ItemsSource="{Binding}" BorderThickness="0,0,1,0"
              ScrollViewer.HorizontalScrollBarVisibility="Disabled">
    <ListView.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FF614B4B" Offset="0"/>
            <GradientStop Color="#FFDA7070" Offset="1"/>
        </LinearGradientBrush>
    </ListView.Background>
  <ListView.ItemsPanel>
    <ItemsPanelTemplate>
      <WrapPanel />
    </ItemsPanelTemplate>
  </ListView.ItemsPanel>
  <ListView.ItemTemplate>
    <DataTemplate>
      <views:GameCard />
    </DataTemplate>
  </ListView.ItemTemplate>
  <ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate>
            <Grid>
              <TextBlock Text="ABCD" />
              <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
            </Grid>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </ListView.ItemContainerStyle>
</ListView> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T17:28:33.663

您需要设置 ControlTemplate 的[TargetType](http://msdn.microsoft.com/en-us/library/system.windows.controls.controltemplate.targettype.aspx)。为了使您的 ItemTemplate 工作，您还需要绑定`Content`and`ContentTemplate`属性。

```
<ListView.ItemContainerStyle>
    <Style TargetType="ListViewItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <Grid>
                        ....
                        <ContentPresenter
                            Content="{TemplateBinding Content}"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            ... />
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListView.ItemContainerStyle> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:29:59.637

您可能不是这种情况，但到目前为止，我还没有修改 ItemContainerStyle，只需修改 ListView.View。由于您将 Grid 放入模板样式中，因此我假设您正在寻找 GridView ，这就是您这样做的方式：

```
<ListView.View>
    <GridView>
        <GridViewColumn Width="120">
            <GridViewColumnHeader Height="14" >
                <TextBlock Text="Type" FontSize="9"/>
            </GridViewColumnHeader>
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock  Text="{Binding Path=Name, FallbackValue=MISSING}" /> 
    <!-- or content presenter with bindings here -->
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:39:03.723

你的风格和一切都很好。所有需要的是将**Content 属性**分配或绑定到你的 ContentPresenter。我希望这将有所帮助。

# java - 守护线程实现

> ID：14323233
> 
> 赞同：0
> 
> 时间：2013-01-14T17:12:13.733
> 
> 标签：java, multithreading, thread-safety

我正在用java开发一个项目。我已经实现了其中的大部分。它有7个不同的类（在所有这些类中我都使用了线程），它们彼此相关。其中一个具有主要方法。所以我要求在主类中使用守护线程，以便它将初始化其他类上的所有其他线程。

```
Question : How can i implement the daemon thread in the main class? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:15:26.370

`main`线程是为您创建的，您无法控制它是否是守护进程。而且没有多大意义。但是您*确实*可以控制您创建的所有线程。简单的使用[`setDaemon()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)方法：

```
Thread thread = new MyFancyThread();
thread.setDaemon(true);
thread.start(); 
```

对所有自定义线程执行相同的操作。确保您了解后果：一旦`main`线程完成（您退出`main()`方法），您的整个应用程序将终止。

# java - Java 语法 - 这段代码是什么意思？

> ID：14323234
> 
> 赞同：1
> 
> 时间：2013-01-14T17:12:16.670
> 
> 标签：java, syntax

我开始学习使用 Java 进行 Android 编程，主要来自在线 Android 文档。我还浏览了几本书，但它们似乎没有解决这个问题：Java 语法的一个特性，我曾多次遇到过，但对我来说这是一个谜。这只是联系人提供程序文档中的一个示例，位于

[http://developer.android.com/guide/topics/providers/contacts-provider.html](http://developer.android.com/guide/topics/providers/contacts-provider.html)

我已删除注释以整理代码片段：

```
op = 
ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
.withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
.withValue(ContactsContract.Data.MIMETYPE,
    ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
.withValue(ContactsContract.CommonDataKinds.Email.ADDRESS, email)
.withValue(ContactsContract.CommonDataKinds.Email.TYPE, emailType); 
```

我想，这只是一种说法。让我感到困惑的是所有那些看起来好像属于 Visual Basic“with 子句”的“点运算符”。我在哪里可以找到这一切意味着什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:13:53.310

您正在查看[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)，其中每个 with* 方法的返回值是构建器本身（或对象，如果它不是一个构建器）。当您想要链接很多 setter 时，或者当底层对象有很多构造函数并且您不希望使用它的人感到困惑时，它们会很方便。或者，如下所述，当您希望返回的对象是不可变的（因此它不能有设置器）时。

[更具体地说，对于您的情况， ContentProviderOperation.newInsert()](http://developer.android.com/reference/android/content/ContentProviderOperation.html#newInsert%28android.net.Uri%29)的返回值是[ContentProviderOperation.Builder](http://developer.android.com/reference/android/content/ContentProviderOperation.Builder.html)，所有谁的方法都返回自己。通常这样的配置调用链将以调用[build()](http://developer.android.com/reference/android/content/ContentProviderOperation.Builder.html#build%28%29)结束，这将产生一个操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:14:55.900

这是所谓的*流畅接口*的一个实例（[链接到维基百科](http://en.wikipedia.org/wiki/Fluent_interface)）。它有一个特别之处：从前一个调用返回的值被用作后续调用的目标。

像这样的 API 为具有大量可选参数的方法提供了一个有用的替代方案，因为生成的代码更容易阅读和理解。代码有点冗长，但在这种情况下这是一件好事，因为传递给构造函数的参数得到了更好的“标记”。当您有多个相同类型的参数（例如字符串）彼此相邻时，这种样式也更可取，因为它可以让读者避免参数计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:18:11.873

这些方法中的每一个都返回一个`ContentProviderOperation.Builder`已被该方法修改的对象。因此，您可以将对此类方法的调用链接在一起，并以更紧凑的方式完成所有操作。它类似于 jQuery 在 javascript 世界中的工作方式。

[查看 Android 文档中的newInsert 方法](http://developer.android.com/reference/android/content/ContentProviderOperation.html#newInsert%28android.net.Uri%29)可能会更清楚一些，然后查看[ContentProviderOperation.Builder](http://developer.android.com/reference/android/content/ContentProviderOperation.Builder.html)类的文档。请注意，该对象上的所有方法也返回 ContentProviderOperation.Builder 对象。

# r - R：row.names 和数据操作/导出

> ID：14323239
> 
> 赞同：0
> 
> 时间：2013-01-14T17:12:37.183
> 
> 标签：r, export, dataframe

我在理解什么`row.names`是什么以及它如何工作时遇到了一些问题。而且，我怎样才能让我的数据做`row.names`允许做的事情。

例如，我正在使用下面的代码（我的数据）创建一些集群。我想导出该`sapply`行所做的结果，但现在只导出到屏幕上。我的数据框的第一列（path_country）是国家名称，其他列是其他变量（整数）。我看不到将这些集群导出到表格或国家列表及其组成员资格的简单方法。

我尝试使用 R 中的示例数据集制作一个虚拟示例。例如，`mtcars`然后我注意到第一列被表示为`row.names`。有了`mtcars`我可以创建集群，`cutree`到指定数量的组，然后保存为数据框。使用这种方法，我在第一列中有“汽车名称”，在第二列中有组号（或多或少，可以清理以看起来更好，但基本上是我所追求的），这就是我想要的发生在我的数据上。

对此的任何想法将不胜感激。

```
# my data
path_country <- read.csv("C:/path_country.csv")
patho <- subset(path_country, select=c(2:188))
patho.d <- dist(patho)

patho.hclust <- hclust(patho.d)
patho.hclust.groups11 = cutree(patho.hclust,11)
sapply(unique(patho.hclust.groups11),function(g)path_country$Country[patho.hclust.groups11 == g])

# mtcars data
car.d <- dist(mtcars)
car.h <- hclust(car.d)
car.h.11 <- cutree(car.h, 11)
nice_result <- as.data.frame(car.h.11)
write.table(nice_result, "test.txt", sep="\t") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:42:44.500

1) 您可以`data.frame`使用`row.names`CSV 文件创建：

```
# Names in the first column
path_country <- read.table("C:/path_country.csv", row.names=1)
# Names in column "Country"
path_country <- read.table("C:/path_country.csv", row.names="Country", head=TRUE) 
```

请注意，在第二种情况下，您应该指定`head=TRUE`以使用列的名称。

现在`rownames(path_country)`应该为您提供带有行名称的向量，以及`as.data.frame(patho.hclust.groups11)`导出的好结果。

2）您可以随时为您的`data.frame`with 命令指定行的名称：

```
rownames(path_country) <- names.vector 
```

其中`names.vector`是一个向量，其唯一名称的长度等于 中的行数`data.frame`。在您的示例中：

```
rownames(patho.hclust.groups11) <- path_country$Country 
```

请注意，如果您使用第一种方法，则不需要此命令。

# javascript - 在 Linux CentO 上运行 node.js 服务器

> ID：14323247
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:13:07.070
> 
> 标签：javascript, linux, node.js, centos

刚刚在我的新 VPS 上安装了 node.js。我创建了一个简单的脚本 server.js，它当前在端口 8080 上运行，脚本位于 var/www/html/ 中。问题是当我尝试访问我的域时，它会显示我的默认 apache 页面。我应该怎么做才能正确配置我的节点？

谢谢

脚本示例：

```
sys = require("sys"),
my_http = require("http");
my_http.createServer(function(request,response){
    sys.puts("I got kicked");
response.writeHeader(200, {"Content-Type": "text/plain"});
response.write("Hello World");
response.end();
}).listen(8080);
sys.puts("Server Running on 8080"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:19:01.267

var/www 是 Apache 提供的所有文件的默认位置。本质上，Apache 正在“监听”该目录下的请求。将您的节点文件移动到另一个目录并从那里运行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:15:57.783

在端口 8080 上转到您的域：

例如：`http://www.myDomain.com:8080`

# xna - 文字游戏建议

> ID：14323248
> 
> 赞同：1
> 
> 时间：2013-01-14T17:13:17.867
> 
> 标签：xna

我的背景是语言学家，所以在新的一年里，出于兴趣，我决定学习计算机语言 c#，这样我就可以为我的孩子和学生制作小型文字游戏。
我已经开始研究文字游戏，并且一直在阅读有关使用我一直在玩的 char 类型和 char 数组的内容，因此我已经能够生成字母表。
我真正想做的是让一个单词出现随机字母缺失，然后出现字母表，玩家需要选择正确的字母来完成单词。

我不追求代码，作为一名教育工作者，我不喜欢作弊，只是建议我可以从哪里开始，我应该读什么，这样我才能实现我所描述的。

非常感谢您的帮助和建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:38:41.163

如果我正确理解了您的问题，那么您正在寻找一种*算法*（甚至是伪代码）而不是代码或其他任何东西。如果我要按照您的描述实现游戏，我会按照以下方式进行：

1.  **从列表中选择一个单词。**这个“字典”可以像包含不同单词的文本文件一样简单，也可以是包含所有英语单词的更复杂的数据库。
2.  **从单词中选择一个字母并将其删除。**
3.  **向用户询问丢失的字母。**继续询问，直到他们猜对或猜不透为止。
4.  起身重复。

这是一个非常简单的游戏，它使用了非常基本的概念。我相信在这种情况下 XNA 完全是矫枉过正。就像 Mustafa 在原始帖子的评论中提到的那样，XNA 提供了一个使游戏编程更容易的框架，因为它提供了模板，但它也增加了很多开销和不必要的复杂性（尤其是对于新手程序员）。因为你来自非编程背景，我建议 Python 或 Ruby 作为一个很好的入门语言，并建议研究以下主题：

*   从文件中读取（上面提到的“字典”）
*   循环，特别是 for 循环和 while 循环或等效的语言（允许用户继续猜测，直到他们用完猜测或猜测正确）
*   命令行输入/输出（IO）——打印到屏幕并从控制台读取输入。
*   数组和字符串

一旦你构建了一个可以工作的命令行应用程序，*那么*我建议你研究一下图形用户界面 (GUI) 之类的东西，让它看起来“漂亮”。

# mysql - MySQL对表的每一行重复操作

> ID：14323250
> 
> 赞同：0
> 
> 时间：2013-01-14T17:13:26.090
> 
> 标签：mysql, sql, database

我想为另一个表中存在的所有值更新 MySQL 中列的值，但是当我尝试执行此操作时，出现以下错误。我怎样才能做到这一点？

```
 update table1 set value = "0" where url = (select * from url_list) ; 
 ERROR 1242 (21000): Subquery returns more than 1 row 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:17:49.237

您可以将“IN”用于“=”运算符或

```
(select * from url_list) 
```

查询应该只返回一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:17:17.487

假设如果 url 存在于 url_list 的 url 列中，则将值设置为 0，请尝试

```
update table1 set value = "0" where url in (select url from url_list); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:16:52.183

如果您将其更改`=`为`IN`：

```
update table1 set value = "0" where url IN (select * from url_list); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:17:01.917

```
update table1 set value = "0" where url IN (select * from url_list) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T17:17:14.490

更改查询的结尾：

```
WHERE url IN (select url from url_list) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T17:27:03.990

```
UPDATE table1 x
  JOIN url_list y
    ON y.url = x.url
   SET x.value = 0; 
```

# ruby-on-rails - 具有多个应用程序和不同配置的 Apache + 乘客应用程序路线

> ID：14323252
> 
> 赞同：0
> 
> 时间：2013-01-14T17:13:35.620
> 
> 标签：ruby-on-rails, ruby, apache, passenger

我有一个 ruby​​ on rails 应用程序`/var/www/html/rq/`，默认情况下从它上面的目录中获取配置。

```
TEMPLATE = YAML.load_file("../brand.yml") 
```

我已经创建了两个虚拟主机

*   `crayon.domain.com`指着`/var/www/html/crayon/public/`
*   `icb.domain.com`指着`/var/www/html/icb/public/`

两个公用文件夹都包含特定品牌的`brand.yml`.

两个虚拟主机都`PassengerAppRoute`设置为`/var/www/html/rq/`只有一个版本的代码库，在`Rails 3.2.8`

根据他们进入的虚拟主机，我希望它获取该域的品牌文件。我试过了

```
TEMPLATE = YAML.load_file("/brand.yml") 
```

和

```
TEMPLATE = YAML.load_file("http://localhost/brand.yml") 
```

希望它会从特定的公用文件夹中获取文件，但它似乎是从`/var/www/html/rq/public`.

任何人都知道如何实现我的需要并拥有一个具有两个公用文件夹和两组配置的应用程序？

# linux - 如何从 linux shell 访问远程 Windows 命令行？

> ID：14323253
> 
> 赞同：1
> 
> 时间：2013-01-14T17:13:41.783
> 
> 标签：linux, openssh, windows-server

看起来有几个选项，但最简单的方法是什么？
看起来您可以在 Windows 上安装 OpenSSH，但如果可能的话，我想使用现有的实用程序。
我看到 Windows 服务器具有新的 Windows Remote Shell。有没有办法从 linux 终端访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:22:07.680

您可以使用 PowerShell -> [run-powershell-through-ssh](http://hindenes.com/trondsworking/2012/05/17/run-powershell-through-ssh/)

# haskell - 在 Haskell 中运行并行 URL 下载

> ID：14323265
> 
> 赞同：10
> 
> 时间：2013-01-14T17:14:07.573
> 
> 标签：haskell, io, parallel-processing

下面是 (HTTP) 下载给定目录中缺少的文件的 Haskell 代码：

```
module Main where

import Control.Monad ( filterM
                     , liftM
                     )
import Data.Maybe ( fromJust )
import Network.HTTP ( RequestMethod(GET)
                    , rspBody
                    , simpleHTTP
                    )
import Network.HTTP.Base ( Request(..) )
import Network.URI ( parseURI )
import System.Directory ( doesFileExist )
import System.Environment ( getArgs )
import System.IO ( hClose
                 , hPutStr
                 , hPutStrLn
                 , IOMode(WriteMode)
                 , openFile
                 , stderr
                 )
import Text.Printf ( printf )

indices :: [String]
indices =
  map format1 [0..9] ++ map format2 [0..14] ++ ["40001-41284" :: String]
  where
    format1 index =
      printf "%d-%d" ((index * 1000 + 1) :: Int)
                     (((index + 1) * 1000) :: Int)
    format2 index =
      printf "%d-%d" ((10000 + 2 * index * 1000 + 1) :: Int)
                     ((10000 + (2 * index + 2) * 1000) :: Int)

main :: IO ()
main = do
  [dir] <- getArgs
  updateDownloads dir

updateDownloads :: FilePath -> IO ()
updateDownloads path = do
  let
    fileNames = map (\index ->
      (index, path ++ "/tv_and_movie_freqlist" ++ index ++ ".html")) indices
  missing <-
    filterM (\(_, fileName) -> liftM not $ doesFileExist fileName) fileNames
  mapM_ (\(index, fileName) -> do
    let
      url =
        "http://en.wiktionary.org/wiki/Wiktionary:Frequency_lists/TV/2006/" ++
        index
      request =
        Request
          { rqURI = fromJust $ parseURI url
          , rqMethod = GET
          , rqHeaders = []
          , rqBody = ""
          }
    hPutStrLn stderr $ "Downloading " ++ show url
    resp <- simpleHTTP request
    case resp of
      Left _ -> hPutStrLn stderr $ "Error connecting to " ++ show url
      Right response -> do
        let
          html = rspBody response
        file <- openFile fileName WriteMode
        hPutStr file html
        hClose file
    return ()) missing 
```

我想并行运行下载。我知道`par`，但不确定它是否可以在`IO`monad 中使用，如果可以，如何使用？

**更新：**这是我使用`Control.Concurrent.Async`and重新实现的代码`mapConcurrently`：

```
module Main where

import Control.Concurrent.Async ( mapConcurrently )
import Control.Monad ( filterM
                     , liftM
                     )
import Data.Maybe ( fromJust )
import Network.HTTP ( RequestMethod(GET)
                    , rspBody
                    , simpleHTTP
                    )
import Network.HTTP.Base ( Request(..) )
import Network.URI ( parseURI )
import System.Directory ( doesFileExist )
import System.Environment ( getArgs )
import System.IO ( hClose
                 , hPutStr
                 , hPutStrLn
                 , IOMode(WriteMode)
                 , openFile
                 , stderr
                 )
import Text.Printf ( printf )

indices :: [String]
indices =
  map format1 [0..9] ++ map format2 [0..14] ++ ["40001-41284" :: String]
  where
    format1 index =
      printf "%d-%d" ((index * 1000 + 1) :: Int)
                     (((index + 1) * 1000) :: Int)
    format2 index =
      printf "%d-%d" ((10000 + 2 * index * 1000 + 1) :: Int)
                     ((10000 + (2 * index + 2) * 1000) :: Int)

main :: IO ()
main = do
  [dir] <- getArgs
  updateDownloads dir

updateDownloads :: FilePath -> IO ()
updateDownloads path = do
  let
    fileNames = map (\index ->
      (index, path ++ "/tv_and_movie_freqlist" ++ index ++ ".html")) indices
  missing <-
    filterM (\(_, fileName) -> liftM not $ doesFileExist fileName) fileNames
  pages <-
    mapConcurrently (\(index, fileName) -> getUrl index fileName) missing
  mapM_ (\(fileName, html) -> do
    handle <- openFile fileName WriteMode
    hPutStr handle html
    hClose handle) pages
  where
    getUrl :: String -> FilePath -> IO (FilePath, String)
    getUrl index fileName = do
      let
        url =
          "http://en.wiktionary.org/wiki/Wiktionary:Frequency_lists/TV/2006/" ++
          index
        request =
          Request
          { rqURI = fromJust $ parseURI url
          , rqMethod = GET
          , rqHeaders = []
          , rqBody = ""
          }
      resp <- simpleHTTP request
      case resp of
        Left _ -> do
          hPutStrLn stderr $ "Error connecting to " ++ show url
          return ("", "")
        Right response ->
          return (fileName, rspBody response) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T20:22:44.440

这看起来正是[`async`](http://hackage.haskell.org/packages/archive/async/2.0.1.4/doc/html/Control-Concurrent-Async.html)设计的目的，实际上该示例用于并行下载。也有关于此的演示 - [http://skillsmatter.com/podcast/home/high-performance-concurrency](http://skillsmatter.com/podcast/home/high-performance-concurrency) - 非常值得一试。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T17:31:19.830

由于操作涉及 IO，因此您通常 /not/ 使用`par`它，因为它对 IO 操作没有任何作用。

您将需要一个显式的并发模型来隐藏下载的延迟。

我推荐 MVars 或 TVars，结合 forkIO。

工作队列抽象通常对这种类型的问题很有用：将所有 URL 推入一个队列，并为 N 个内核提供一组固定的工作线程（例如 N * k），直到完成为止。然后将完成的工作附加到返回给主线程的通信通道。

[这是来自并行 URL 检查器](http://hackage.haskell.org/package/urlcheck)的示例，使用通道。

[http://code.haskell.org/~dons/code/urlcheck/Check.hs](http://code.haskell.org/~dons/code/urlcheck/Check.hs)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-15T10:26:44.593

看看[`mapConcurrently`](http://hackage.haskell.org/packages/archive/async/latest/doc/html/Control-Concurrent-Async.html#v%3amapConcurrently) Simon Marlow 的“异步”库。

`IO`它以并行和异步的方式将一个动作映射到`Traversable`容器的元素并等待所有动作。

例子：

```
{-# LANGUAGE PackageImports #-}

import System.Environment (getArgs)

import "async" Control.Concurrent.Async (mapConcurrently)

import "HTTP" Network.HTTP
import "HTTP" Network.Stream (Result)
import "HTTP" Network.HTTP.Base (Response(..))
import System.IO
import "url" Network.URL (encString)

import Control.Monad

getURL :: String -> IO (String, Result (Response String))
getURL url = do
        res <- (simpleHTTP . getRequest) url
        return (url, res)

main = do
     args <- getArgs
     case args of
          [] -> putStrLn "usage: program url1 url2 ... urlN"
          args -> do
                results <- mapConcurrently getURL args
                forM_ results $ \(url, res) -> do
                        case res of
                                Left connError -> putStrLn $ url ++ "; " ++ show connError
                                Right response -> do
                                        putStrLn $ url ++ "; OK"
                                        let content = rspBody response

                                            -- make name from url
                                            fname = encString True (`notElem` ":/") url ++ ".html"
                                        writeFile fname content 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-15T16:21:50.750

另一个使用[async 的 mapConcurrently](http://hackage.haskell.org/packages/archive/async/latest/doc/html/Control-Concurrent-Async.html#v%3amapConcurrently)和[http-conduit keep-alive manager的版本](http://hackage.haskell.org/packages/archive/http-conduit/latest/doc/html/Network-HTTP-Conduit.html#t%3aManager)

```
{-# LANGUAGE PackageImports, FlexibleContexts #-}

import System.Environment (getArgs)

import "http-conduit" Network.HTTP.Conduit
import qualified "conduit" Data.Conduit as C
import "http-types" Network.HTTP.Types.Status (ok200)

import "async" Control.Concurrent.Async (mapConcurrently)
import qualified "bytestring" Data.ByteString.Lazy as LBS
import qualified "bytestring" Data.ByteString as BS
import "transformers" Control.Monad.Trans.Class (lift)
import "transformers" Control.Monad.IO.Class (liftIO)
import "url" Network.URL (encString)
import "failure" Control.Failure (Failure(..))

import Control.Monad
import System.IO

taggedRequest :: Failure HttpException m => String -> m (String, Request m')
taggedRequest url = do
        req <- parseUrl url
        return (url, req)

taggedResult :: (C.MonadBaseControl IO m, C.MonadResource m) => Manager -> (String, Request m) -> m (String, Response LBS.ByteString)
taggedResult manager (url, req) = do
        res <- httpLbs req manager
        return (url, res)

main = do
     args <- getArgs
     case args of
          [] -> putStrLn "usage: program url1 url2 ... urlN"
          args -> do
                requests <- mapM taggedRequest args
                withManager $ \manager -> liftIO $ do

                        results <- mapConcurrently (C.runResourceT . taggedResult manager) requests

                        forM_ results $ \(url, Response status _ _ bsBody) -> do
                             putStrLn $ url ++ " ; " ++ show status   
                             let fileName = encString True (`notElem` ":/") url ++ ".html"
                             when (status == ok200) $ LBS.writeFile fileName bsBody 
```

# ios6 - cocos 2d 在 iphone & ios6 中不是全屏

> ID：14323266
> 
> 赞同：0
> 
> 时间：2013-01-14T17:14:08.100
> 
> 标签：ios6, cocos2d-iphone

我在哪里有问题

在 ipad 上的 ios 5 和 5.1 中，场景看起来很好

但在 ipad 和 iphone 5.0 和 5.1 上的 ios 6 中，它出现黑色边缘

..在iphone ios6上完全黑。

如何解决此问题以在适用于 ipad 和 iphone 的 iphone 和 ios 6 上工作？

这是我正在使用的代码：

[https://github.com/krzysztofzablocki/smooth-drawing](https://github.com/krzysztofzablocki/smooth-drawing)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:26:18.100

您的资源中需要一个 Default-568h@2x.png 图像，以便 iOS 在启动应用程序时配置完整的 4 英寸屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:46:04.860

有一条警告指出“Retina 4 显示，缺少“Default-568h@2x.png”启动图像”。单击此警告，将出现一条消息，说明“您希望 Xcode 为您添加此图像吗？”。单击添加并运行程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T23:38:36.697

从导演那里获取屏幕尺寸，并将其替换为 ipad 的硬编码分辨率。这是你也可以得到它来支持视网膜

# solr - 如果字段适合其中任何一个，我应该在我的 Solr 架构中更喜欢整数还是字符串？

> ID：14323269
> 
> 赞同：4
> 
> 时间：2013-01-14T17:14:13.590
> 
> 标签：solr, lucene

假设我的 Solr 模式中有一个字段，其值为 1、2、3 或 4。我不对该字段进行算术运算。该字段是记录的状态。它可以很容易地是 A、B、C 或 D。11,000,000 条记录中的每一条都具有这些状态之一。

在[这个问题](https://stackoverflow.com/questions/12490238/solr-filter-query-string-vs-int)中，一个答案说整数“更节省内存”，所以这是一个开始。还有其他因素需要考虑吗？一个匹配比另一个快吗？

该字段不会被排序。这些值是任意的，我们永远不会进行排序。它只会用于过滤查询。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:51:26.710

你会查询一个范围吗？因此，如果您的 1...4 确实标记了从 Bad to Great 的状态，您会查询 1-2 的记录吗？这是您可能需要它们成为整数的唯一事情（而且，由于您只有 4 个，这没什么大不了的）。

我在数据存储中的规则是，如果 int 永远不会用作 int，则将其存储为字符串。它可能需要更多空间等，但您可以进行更多字符串操作等。如果一个字段是字符串或 int，11m 记录的内存需求可能无关紧要（11m 是很多记录，但不是很重的负载对于 Solr/Lucene）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T14:55:15.720

只有 4 个不同的值，int 和 String 对于过滤查询、排序甚至范围查询的执行非常相似。

# google-chrome - Firefox 与 Chrome 和 Safari 中的文本和大小差异与 CSS 重置

> ID：14323270
> 
> 赞同：1
> 
> 时间：2013-01-14T17:14:15.417
> 
> 标签：google-chrome, firefox, fonts, safari, reset

我一直在研究 Eric Meyer CSS Reset。我有一个文字很重的网站。重置适用于边距。但它不适用于字体和字体大小。即使我进行了重置，Firefox 似乎也会使所有文本变小。有没有办法在 CSS 代码中解决这个问题？

```
/* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
} 
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
    display: block;
}
body {
    line-height: 1;
}
ol, ul {
    list-style: none;
}
blockquote, q {
    quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content: '';
    content: none;
}
table {
    border-collapse: collapse;
    border-spacing: 0;
}

#box {
    background-color: #0F3;
    margin: 0px;
    float: left;
    height: 200px;
    width: 300px;
    padding-top: 0px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 0px;
    font-family: "Courier New", Courier, monospace;
    font-size: 1em;
    color: #F00;
} 
```

# android - VM不会让我们分配**字节

> ID：14323273
> 
> 赞同：4
> 
> 时间：2013-01-14T17:14:25.307
> 
> 标签：android, memory, logcat, allocation, android-logcat

> **可能重复：**
> [java.lang.OutOfMemoryError：位图大小超出 VM 预算 - Android](https://stackoverflow.com/questions/1949066/java-lang-outofmemoryerror-bitmap-size-exceeds-vm-budget-android)

我的应用程序想要分配 2529792 字节，我在具有 128mb Ram 的设备上运行它并且它工作正常，然后我在具有 292mb Ram 的可用内存的 htc 上运行 ir，它给出了错误

01-14 21:08:27.972: E/GraphicsJNI(26585): VM 不允许我们分配 2529792 字节

这是我的 LogCat 输出

```
01-14 21:08:27.391: E/dalvikvm-heap(26585): 2529792-byte external allocation too large for this process.
01-14 21:08:27.411: E/dalvikvm(26585): Out of memory: Heap Size=17735KB, Allocated=14425KB, Bitmap Size=14641KB, Limit=32768KB
01-14 21:08:27.411: E/dalvikvm(26585): Trim info: Footprint=17735KB, Allowed Footprint=17735KB, Trimmed=668KB
01-14 21:08:27.512: E/GraphicsJNI(26585): VM won't let us allocate 2529792 bytes
01-14 21:08:27.512: D/dalvikvm(26585): GC_FOR_MALLOC freed 905K, 24% free 13520K/17735K, external 14641K/16689K, paused 93ms
01-14 21:08:27.652: D/dalvikvm(26585): GC_EXTERNAL_ALLOC freed 3K, 24% free 13552K/17735K, external 14641K/16689K, paused 116ms
01-14 21:08:27.662: D/skia(26585): --- decoder->decode returned false
01-14 21:08:27.792: D/dalvikvm(26585): GC_EXTERNAL_ALLOC freed 13K, 24% free 13655K/17735K, external 14641K/16689K, paused 109ms
01-14 21:08:27.872: E/dalvikvm-heap(26585): 2529792-byte external allocation too large for this process.
01-14 21:08:27.872: E/dalvikvm(26585): Out of memory: Heap Size=17735KB, Allocated=13655KB, Bitmap Size=14641KB, Limit=32768KB
01-14 21:08:27.872: E/dalvikvm(26585): Trim info: Footprint=17735KB, Allowed Footprint=17735KB, Trimmed=1408KB
01-14 21:08:27.972: E/GraphicsJNI(26585): VM won't let us allocate 2529792 bytes
01-14 21:08:27.972: D/dalvikvm(26585): GC_FOR_MALLOC freed 39K, 24% free 13615K/17735K, external 14641K/16689K, paused 96ms
01-14 21:08:28.092: D/dalvikvm(26585): GC_EXTERNAL_ALLOC freed 40K, 24% free 13579K/17735K, external 14641K/16689K, paused 102ms
01-14 21:08:28.212: D/dalvikvm(26585): GC_EXTERNAL_ALLOC freed 41K, 24% free 13574K/17735K, external 14641K/16689K, paused 103ms
01-14 21:08:28.212: W/dalvikvm(26585): threadid=17: thread exiting with uncaught exception (group=0x4001d5a0)
01-14 21:08:28.252: E/dalvikvm-heap(26585): 2529792-byte external allocation too large for this process.
01-14 21:08:28.252: E/dalvikvm(26585): Out of memory: Heap Size=17735KB, Allocated=13585KB, Bitmap Size=13902KB, Limit=32768KB
01-14 21:08:28.252: E/dalvikvm(26585): Trim info: Footprint=17735KB, Allowed Footprint=17735KB, Trimmed=1468KB
01-14 21:08:28.352: E/GraphicsJNI(26585): VM won't let us allocate 2529792 bytes 
```

有谁能够帮我 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:11:35.553

你试过`android:largeHeap="true"`在`Manifest.xml`吗？我还可以看到你正在处理位图，使用 BitMapOptions 这样的方法：

```
private Bitmap getBitmap(String path) {

Uri uri = getImageUri(path);
InputStream in = null;
try {
    final int IMAGE_MAX_SIZE = 1200000; // 1.2MP
    in = mContentResolver.openInputStream(uri);

    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(in, null, o);
    in.close();

    int scale = 1;
    while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > 
          IMAGE_MAX_SIZE) {
       scale++;
    }
    Log.d(TAG, "scale = " + scale + ", orig-width: " + o.outWidth + ", 
       orig-height: " + o.outHeight);

    Bitmap b = null;
    in = mContentResolver.openInputStream(uri);
    if (scale > 1) {
        scale--;
        // scale to max possible inSampleSize that still yields an image
        // larger than target
        o = new BitmapFactory.Options();
        o.inSampleSize = scale;
        b = BitmapFactory.decodeStream(in, null, o);

        // resize to desired dimensions
        int height = b.getHeight();
        int width = b.getWidth();
        Log.d(TAG, "1th scale operation dimenions - width: " + width + ",
           height: " + height);

        double y = Math.sqrt(IMAGE_MAX_SIZE
                / (((double) width) / height));
        double x = (y / height) * width;

        Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x, 
           (int) y, true);
        b.recycle();
        b = scaledBitmap;

        System.gc();
    } else {
        b = BitmapFactory.decodeStream(in);
    }
    in.close();

    Log.d(TAG, "bitmap size - width: " +b.getWidth() + ", height: " + 
       b.getHeight());
    return b;
} catch (IOException e) {
    Log.e(TAG, e.getMessage(),e);
    return null;
} 
```

来源：[Android：将大型位图文件调整为缩放输出文件](https://stackoverflow.com/questions/3331527/android-resize-a-large-bitmap-file-to-scaled-output-file)

# c++ - 数值分析方程

> ID：14323276
> 
> 赞同：1
> 
> 时间：2013-01-14T17:14:34.980
> 
> 标签：c++, numerical-methods

我有这个方程 ![这里](../Images/2135943a6cfc2f67c5cc72cb40042dad.png) ，然后找到多项式 ![这里](../Images/78eeef71c6a6498b8e504341a8bb2f4a.png)

我正在尝试像这样实现它：

```
for (int n=0;n<order;n++){
    df[n][0]=y[n];
    for (int i=0;i<N;i++){ //N number of points

        df[n][i]+=factorial(n,i)*y[i+n-1];
    }

    }

for (int i=0;i<N;i++){

    term=factorial(s,i);
    result*=df[0][i]*term;
    sum+=result;
    }

return sum; 
```

1）我不确定如何在函数中实现每个参数的符号。正如你所看到的那样，它是 'positive' ， 'negative' ， 'positive' ...

2）我不确定是否有任何错误......

谢谢！

- - - - - - - - - - - 阶乘 - - - - - - - - - - - - - - --

```
int fact(int n){
//3!=1*2*3
if (n==0) return 1;
else
return n*fact(n-1);

}

double factorial(double s,int n){
//(s 3)=s*(s-1)*(s-2)/6
if ((n==0) &&(s==0)) return 1;
else
    return fact(s)/fact(n);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:42:00.650

最简单的解决方案可能是将符号保留在变量中，并在每次循环中将其相乘。就像是：

```
sign = 1.0;
for ( int i = 0; i < N; ++ i ) {
    term = factorial( s, i );
    result *= df[0][i] * term;
    sum += sign * result;
    sign = - sign;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:21:38.073

你不能这样做`pow( -1, m )`。

你可以自己写：

```
inline int minusOnePower( unsigned int m )
{
    return (m & 1) ? -1 : 1;
} 
```

您可能想要建立一些计算值表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T01:58:13.893

好吧，我知道您想使用具有等距点的牛顿插值多项式（更具体地说是牛顿-格雷戈里正向差分插值多项式）来近似计算给定 x=X 的值 f(x)。假设 s=(X-x0)/h，其中 x0 是第一个 x，并且 h 是获取其余 x 的步骤，您知道 f 的确切值：考虑：

```
double coef (double s, int k)
{
    double c(1);
    for (int i=1; i<=k ; ++i)
        c *= (s-i+1)/i ;
    return c;
}

double P_interp_value(double s, int Num_of_intervals , double f[] /* values of f in these points */)    // P_n_s
{

    int N=Num_of_intervals ;

    double *df0= new double[N+1]; // calculing df only for point 0

    for (int n=0 ; n<=N ; ++n)  // n here is the order
    {
        df0[n]=0;
        for (int k=0, sig=-1; k<=n; ++k, sig=-sig) // k here is the "x point"
        {
            df0[n] += sig * coef(n,k) * f[n-k];
        }
    }

    double P_n_s = 0;

    for (int k=0; k<=N ; ++k )   // here k is the order
    {
        P_n_s += coef(s,k)* df0[k];
    }
    delete []df0;

    return P_n_s;
}

int main()
{
    double s=0.415, f[]={0.0 , 1.0986 , 1.6094 , 1.9459 , 2.1972 };

    int n=1; // Num of interval to use during aproximacion. Max = 4 in these example
    while (true)
    {
    std::cin >> n; 
    std::cout << std::endl << "P(n=" << n <<", s=" << s << ")= " << P_interp_value(s, n, f)  << std::endl ;
    }
} 
```

它打印：

1

P(n=1, s=0.415)= 0.455919

2

P(n=2, s=0.415)= 0.527271

3

P(n=3, s=0.415)= 0.55379

4

P(n=4, s=0.415)= 0.567235

比较： [http ://ecourses.vtu.ac.in/nptel/courses/Webcourse-contents/IIT-KANPUR/Numerical%20Analysis/numerical-analysis/Rathish-kumar/rathish-oct31/fratnode8.html](http://ecourses.vtu.ac.in/nptel/courses/Webcourse-contents/IIT-KANPUR/Numerical%20Analysis/numerical-analysis/Rathish-kumar/rathish-oct31/fratnode8.html)

有用。现在我们可以开始优化这些代码了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T09:20:04.293

只是为了标志;-)

```
inline signed int minusOnePower( unsigned int m )
{
    return 1-( (m & 1)<<1 );
} 
```

# android - 从服务器发送更新到安卓

> ID：14323277
> 
> 赞同：0
> 
> 时间：2013-01-14T17:14:36.227
> 
> 标签：android

将更新从服务器发送到 Android 应用程序的推荐方式是什么？我需要从服务器发送将显示在 Android 通知列表中的数据。

轮询服务器是一种选择。但是有更好的方法吗？我有一个使用 HTML5 服务器发送事件从同一服务器接收更新的网站。有没有办法在Android应用程序中做这样的事情，即。创建一个监听服务器事件的持久连接？

有人知道在 Android 应用程序中实现此功能的最佳实践方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:20:48.267

看看[Google Cloud Messaging](http://developer.android.com/google/gcm/index.html)，这是一个免费的安卓手机服务，允许服务器推送。它允许您推送消息、通知或数据。

很难说是否有最佳实践，这完全取决于您在做什么。但是，如果您按照[指南](http://developer.android.com/google/gcm/demo.html)中的示例进行操作，应该没问题。

# c# - Protobuf-net：尝试读取流的末尾

> ID：14323279
> 
> 赞同：31
> 
> 时间：2013-01-14T17:14:43.080
> 
> 标签：c#, protobuf-net

我们的系统在使用 protobuf-net 序列化一条消息时，有时但不是每次都会引发下面公开的错误。错误的原因是什么，我该如何减轻它？

请注意我们`DeserializeWithLengthPrefix`已经在使用。

更新：相关代码在这里

```
private const PrefixStyle PrefixStyleInPlace = PrefixStyle.Fixed32;
public static byte[] SerializeObjectToByteArray<TSerializable>(TSerializable source) where TSerializable : class
    {
        byte[] result;
        using (var memoryStream = SerializeObjectToStream(source))
        {
            result = memoryStream.ToArray();
        }
        return result;
    }

    public static TResult DeserializeObject<TResult>(byte[] source)
    {
        TResult result;
        using (var memoryStream = new MemoryStream(source))
        {
            memoryStream.Position = 0;
            result = Serializer.DeserializeWithLengthPrefix<TResult>(memoryStream,PrefixStyleInPlace);
        }

        return result;
    }

    public static MemoryStream SerializeObjectToStream<TSerializable>(TSerializable source) where TSerializable : class
    {
        var memoryStream = new MemoryStream();

        Serializer.SerializeWithLengthPrefix(memoryStream, source,PrefixStyleInPlace);
        memoryStream.Position = 0;
        return memoryStream;
    }

    public static TResult DeserializeObject<TResult>(MemoryStream sourceStream)
    {
        TResult result;
        result = DeserializeObject<TResult>(sourceStream.ToArray());
        return result;
    } 
```

*留言*：

```
System.IO.EndOfStreamException : Attempted to read past the end of the
 stream.
 +++++++++++++++++++ STACK TRACE: at ProtoBuf.ProtoReader.Ensure(Int32 count, Boolean trict) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 234 at
 ProtoBuf.ProtoReader.ReadString() in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 471 at
 proto_15(Object , ProtoReader ) at
 ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.ProtoReader.ReadTypedObject(Object value, Int32 key,
 ProtoReader reader, Type type) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 556 at
 proto_16(Object , ProtoReader ) at
 ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.ProtoReader.ReadTypedObject(Object value, Int32 key,
 ProtoReader reader, Type type) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 556 at
 proto_11(Object , ProtoReader ) at
 ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.ProtoReader.ReadTypedObject(Object value, Int32 key,
 ProtoReader reader, Type type) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 556 at
 proto_16(Object , ProtoReader ) at
 ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.ProtoReader.ReadTypedObject(Object value, Int32 key,
 ProtoReader reader, Type type) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 556 at
 proto_13(Object , ProtoReader ) at
ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.ProtoReader.ReadTypedObject(Object value, Int32 key,
 ProtoReader reader, Type type) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 556 at
 proto_16(Object , ProtoReader ) at
 ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.ProtoReader.ReadTypedObject(Object value, Int32 key,
 ProtoReader reader, Type type) in
 c:\Dev\protobuf-net\protobuf-net\ProtoReader.cs:line 556 at
 proto_2(Object , ProtoReader ) at
 ProtoBuf.Serializers.CompiledSerializer.ProtoBuf.Serializers.IProtoSerializer.Read(Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Serializers\CompiledSerializer.cs:line
 49 at ProtoBuf.Meta.RuntimeTypeModel.Deserialize(Int32 key, Object
 value, ProtoReader source) in
 c:\Dev\protobuf-net\protobuf-net\Meta\RuntimeTypeModel.cs:line 721 at
 ProtoBuf.Meta.TypeModel.DeserializeWithLengthPrefix(Stream source,
 Object value, Type type, PrefixStyle style, Int32 expectedField,
 TypeResolver resolver, Int32& bytesRead, Boolean& haveObject,
 SerializationContext context) in
 c:\Dev\protobuf-net\protobuf-net\Meta\TypeModel.cs:line 351 at
 ProtoBuf.Serializer.DeserializeWithLengthPrefix[T](Stream source,
 PrefixStyle style, Int32 fieldNumber) in
 c:\Dev\protobuf-net\protobuf-net\Serializer.cs:line 303 at
 ProtoBuf.Serializer.DeserializeWithLengthPrefix[T](Stream source,
 PrefixStyle style) in
 c:\Dev\protobuf-net\protobuf-net\Serializer.cs:line 288 at
 ermeX.Common.ObjectSerializer.DeserializeObject[TResult](Byte[]
 source) in
    [ProtoContract(SkipConstructor = true)]
    [ProtoInclude(100, typeof(BusMessage))]
    [ProtoInclude(200, typeof(TransportMessage))]
    [ProtoInclude(300, typeof(BizMessage))] 
```

代码在这里

```
 internal abstract class SystemMessage : ISystemMessage, IEquatable<SystemMessage>
    {
        protected SystemMessage():this(Guid.NewGuid(),DateTime.UtcNow)
        {
        }
        protected SystemMessage(Guid messageId,DateTime createdTimeUtc)
        {
            MessageId = messageId;
            CreatedTimeUtc = new DateTime(createdTimeUtc.Ticks);//TODO: UNTIL PROTOBUF-NET FIXES ISSUE 335 
        }

        [ProtoMember(1)]
        public Guid MessageId{get;private set;}

        [ProtoMember(2)]
        public DateTime CreatedTimeUtc { get; private set; }

        ...
    }

    [ProtoContract(SkipConstructor = true)]
    internal sealed class TransportMessage : SystemMessage, ISystemMessage<BusMessage>
    {
        //just for the serializer, remove in the future
        private TransportMessage()
        {
        }

        public TransportMessage(Guid recipient, BusMessage data)
            : this(data.MessageId, data.CreatedTimeUtc, recipient, data)
        {
        }

        public TransportMessage(Guid messageId, DateTime createdTimeUtc, Guid recipient, BusMessage data)
            : base(messageId, createdTimeUtc)
        {
            if (data == null) throw new ArgumentNullException("data");
            if (recipient.IsEmpty()) throw new ArgumentException("recipient cannot be an empty value");
            Recipient = recipient;
            Data = data;
        }

        [ProtoMember(1)]
        public Guid Recipient { get; private set; }

        [ProtoMember(2)]
        public BusMessage Data { get; private set; }
    }
    [ProtoContract(SkipConstructor = true)]
    internal sealed class BusMessage: SystemMessage, ISystemMessage<BizMessage>,IEquatable<BusMessage>
    {
        private BusMessage()
        {

        }
        public BusMessage(Guid publisher,BizMessage data)
            : this(data.MessageId,data.CreatedTimeUtc,publisher, data)
        {

        }

        public BusMessage(Guid messageId, DateTime createdTimeUtc, Guid publisher, BizMessage data) : base(messageId,createdTimeUtc)
        {
            if (data == null) throw new ArgumentNullException("data");
            Publisher = publisher;
            Data = data;
        }
        [ProtoMember(1)]
        public Guid Publisher { get; protected set; }

        [ProtoMember(2)]
        public BizMessage Data { get; protected set; }
    }

    [ProtoContract(SkipConstructor = true)]
    internal sealed class BizMessage : SystemMessage, IEquatable<BizMessage>
    {
        private string _jsonMessage;
        private object _data = null;

        public BizMessage(object data) : base()
        {
            if (data == null) throw new ArgumentNullException("data");
            _data = data;
        }

        private BizMessage(){}

        public static BizMessage FromJson(string jsonData)
        {
            if(string.IsNullOrEmpty(jsonData)) 
                throw new ArgumentException();
            return new BizMessage(){JsonMessage = jsonData};
        }

        [ProtoMember(75)]
        internal string JsonMessage
        {
            get
            {
                if(string.IsNullOrEmpty(_jsonMessage))
                {
                    if (_data == null)
                        throw new ApplicationException(
                            "One of both, _data or the serialized json message must have a value");
                    _jsonMessage = JsonSerializer.SerializeObjectToJson(_data);
                }
                return _jsonMessage;
            }
            private set { _jsonMessage = value; }
        }

        public Type MessageType
        {
            get
            {
                UpdateData();
                if (_data == null)
                    return typeof(void);
                return _data.GetType();
            }
        }

        public object RawData
        {
            get
            {
                UpdateData();
                return _data;
            }
        }

        private void UpdateData()
        {
            if (_data == null)
            {
                if (string.IsNullOrEmpty(_jsonMessage))
                    throw new ApplicationException(
                        "One of both, _data or the serialized json message must have a value");
                _data = JsonSerializer.DeserializeObjectFromJson<object>(_jsonMessage);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-21T01:55:49.653

当我指定要反序列化的“类型”与被序列化的原始类型不同时，我已经看到了这个错误。我想如果您的对象已更改并且您尝试反序列化与新版本不兼容的旧版本对象（即旧字节数组），这也可能发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-09-22T07:39:50.670

当我使用socket传输时，出现了这个错误。我发现它是由不完整的数据引起的。
服务器向客户端发送长度为1024字节的数据包，但客户端只收到800字节。解析有错误。

# c# - C# Struct/ArrayList 和最小值/最大值/平均值

> ID：14323290
> 
> 赞同：0
> 
> 时间：2013-01-14T17:15:39.250
> 
> 标签：c#, struct, arraylist

我正在学习 C#，但我对 C# 结构和从中找到最小值、最大值和平均值有些困惑。

我的结构声明如下；

```
 [Serializable]
    private struct students
    {   // Constructor Fills with default values

        public students(int x)
        {
            studentImage = " ";
            enrollmentDate = " ";
            firstName = " ";
            surname = " ";;
            englishGrade = 0;
            scienceGrade = 0;
            mathGrade = 0;
        }

        // Data types to be used in the Structure
        public string studentImage, enrollmentDate, firstName, surname;
        public int englishGrade, scienceGrade, mathGrade;

    }

   private ArrayList studentList; //This is used to work with the data 
```

在结构中列出了多个学生以及他们的科目成绩。我正在寻找循环浏览“记录”并获得以下信息；

*   Structure/ArrayList 中的最低英语等级
*   Structure/ArrayList 中的最大英语等级
*   Structure/ArrayList 中的平均英语等级

我已经研究过订购 ArrayList，但我不能使用这种方式，因为我需要根据 firstName 订购数据。

谁能指出我正确的方向？/ 提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:19:19.143

假设您真的想使用`ArrayList`：

```
studentList = new ArrayList();
//Fill data
var maxEnglish = studentList.
    OfType<students>().
    Max(student => student.englishGrade);
var minEnglish = studentList.
    OfType<students>().
    Min(student => student.englishGrade);
var avgEnglish = studentList.
    OfType<students>().
    Average(student => student.englishGrade); 
```

添加到您的`using`指令后：

```
using System.Linq; 
```

但是为什么不使用具有泛型类型的列表，例如 a`List<students>`呢？这将使您的代码更具可读性和效率。此外，考虑到您声明`students`为 a `struct`， 中的每个插入都`ArrayList`代表一个装箱。它不是高性能的。

我将对您的代码进行以下编辑：

*   更改`students`为一个类并将其重命名为`Student`. 如果一个`struct`大小的字段加在一起超过 16 个字节，则通常最好使用一个类。
*   更改`studentList`为`List<Student>`.
*   `OfType`删除多余的调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:17:12.703

使用透明结构类型（具有所有公共字段的结构）很好，*如果*结构的唯一目的是保存或传递一组语义固定的离散数据项，则没有方法写入`this`构造函数和属性之外的字段设置器，结构的整个状态被封装在公共字段中，这些字段可以合法地采用对其各自类型有效的值的任何组合，并且结构中的默认值应与各自类型中的默认值匹配。您的`students`type 几乎符合该标准，但并不完全符合，因为它似乎代表了对学生特征的任意选择，并且没有特别的理由相信需要有关学生信息的每个人都需要相同的信息。此外，该设计似乎不必要地硬编码每个学生恰好拥有三个年级的事实。在某些情况下，这样的假设是合理的。例如，由于设计用于处理二维点的代码可能无法处理三维点，因此使用透明结构来保存二维点的坐标就可以了。如果出于某种目的需要 3d 点，则设计为使用 3d 点的代码将无法使用它，因此可以简单地使 3d 点成为一种新类型。相比之下，它'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T17:19:34.550

不要使用`ArrayList`. 看看[通用列表](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)。

```
private List<students> studentList; 
```

用法：

```
var studentWithMaxGrade = studentList.Max(student => student.englishGrade);
var studentWithMinGrade = studentList.Min(student => student.englishGrade);
var averageGrade = studentList.Average(student => student.englishGrade); 
```

您可能还想让自己熟悉[C# 命名约定](http://msdn.microsoft.com/en-us/library/vstudio/ms229043%28v=vs.100%29.aspx)。

# ios - 核心数据 - 带有 where 条件的嵌套总和

> ID：14323291
> 
> 赞同：3
> 
> 时间：2013-01-14T17:15:42.763
> 
> 标签：ios, objective-c, core-data

我有一个应用程序一直显示商店的销售量。

```
NSNumber *amount = [self valueForKeyPath:@"sales.@sum.value"]; 
```

现在我必须过滤并按期间显示金额。我有包含月份和年份的字段“句点”（字符串），例如“2012-11”。

如何使用 where 子句进行相同的查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:44:29.393

您可以在计算总和之前过滤销售额。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"period == %@", @"2012-11"];
NSSet *sales = [self valueForKeyPath:@"sales"];
NSSet *filteredSales = [sales filteredSetUsingPredicate:predicate];
NSNumber *amount = [filteredSales valueForKeyPath:@"@sum.value"]; 
```

但是当你有几十个或更多的销售时，这种方法并不是很有效，因为它需要将每个销售加载到内存中。

此外，如果销售出现故障，每个销售都会[触发故障](http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/Articles/cdFaultingUniquing.html#//apple_ref/doc/uid/TP30001202-SW1)并生成 SQL 请求。您可以通过在过滤之前对销售进行[批量故障](http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/Articles/cdPerformance.html#//apple_ref/doc/uid/TP40003468-SW6)来防止这种情况。

我们将假设它`self`是一个托管对象。

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"period == %@", @"2012-11"];
NSSet *sales = [self valueForKeyPath:@"sales"];
// Begin batch-faulting
NSManagedObjectContext *moc = [self managedObjectContext];
NSFetchRequest *request = [NSFetchRequest new];
[request setEntity:[NSEntityDescription entityForName:@"Sale" inManagedObjectContext:moc]];
[request setPredicate:[NSPredicate predicateWithFormat:@"self IN %@", sales]];
[request setReturnsObjectsAsFaults:NO];
[moc executeFetchRequest:request error:NULL];
// Batch-faulting done
NSSet *filteredSales = [sales filteredSetUsingPredicate:predicate];
NSNumber *amount = [filteredSales valueForKeyPath:@"@sum.value"]; 
```

但是，您仍然会为每次销售获得多个分配（托管对象、它的缓存、它的属性）。最好的解决方案是使用获取请求来计算 SQLite 数据库中的总和。

```
NSString *reverseRelationship = @"store"; // name of the relationship from the sale to self
NSExpressionDescription *description = [NSExpressionDescription new];
[description setName:@"amount"];
[description setExpressionResultType:NSDoubleAttributeType];
[description setExpression:[NSExpression expressionWithFormat:@"@sum.value"]];
NSManagedObjectContext *moc = [self managedObjectContext];
NSFetchRequest *request = [NSFetchRequest new];
[request setEntity:[NSEntityDescription entityForName:@"Sale" inManagedObjectContext:moc]];
[request setResultType:NSDictionaryResultType];
[request setPredicate:[NSPredicate predicateWithFormat:
                       @"%K == %@ AND period == %@", reverseRelationship, self, @"2012-11"]];
[request setPropertiesToFetch:@[description]];
NSDictionary *result = [[moc executeFetchRequest:request error:NULL] lastObject];
NSNumber *amount = [result objectForKey:@"amount"]; 
```

# r - 如何改进ggplot2中的锯齿线图？

> ID：14323294
> 
> 赞同：11
> 
> 时间：2013-01-14T17:16:01.530
> 
> 标签：r, ggplot2, line

他们是否有任何改进由 geom_line() 产生的锯齿线的过程，将多个点连接成 ggplot2 中平滑的可呈现线？

```
 lai.se <- structure(list(DOS = structure(c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L), .Label = c("D1", "D2", "D3"), class = "factor"), 
    DAS = c(31L, 84L, 113L, 132L, 160L, 35L, 82L, 108L, 126L, 
    146L, 37L, 83L, 94L, 113L, 134L), N = c(24L, 24L, 24L, 24L, 
    24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L, 24L), LAI = c(1.5879167, 
    4.3241667, 3.70375, 2.9704167, 0.1879167, 1.7679167, 3.7670833, 
    3.4104167, 2.7879167, 0.195, 1.3179167, 3.5233333, 3.1604167, 
    2.45875, 0.2758333), sd = c(0.4276323, 0.32478644, 0.34151596, 
    0.3338638, 0.09868611, 0.18551876, 0.38212767, 0.31431747, 
    0.35024189, 0.08836682, 0.16378616, 0.29256982, 0.28257326, 
    0.44131535, 0.09536733), se = c(0.08729008, 0.06629675, 0.06971165, 
    0.06814966, 0.02014422, 0.03786886, 0.07800148, 0.06415978, 
    0.07149283, 0.0180378, 0.03343271, 0.05972057, 0.05768002, 
    0.09008312, 0.01946677), ci = c(0.18057328, 0.13714529, 0.14420954, 
    0.14097832, 0.04167149, 0.0783377, 0.16135836, 0.13272463, 
    0.14789418, 0.03731404, 0.06916083, 0.1235414, 0.11932022, 
    0.18635113, 0.04027009)), .Names = c("DOS", "DAS", "N", "LAI", 
"sd", "se", "ci"), class = "data.frame", row.names = c(NA, -15L
))
    ggplot(lai.se, aes(x=DAS, y=LAI, colour=DOS)) + 
  geom_errorbar(aes(ymin=LAI-se, ymax=LAI+se), colour ="black", size =.5, width=1, position=position_dodge(.9)) +
  geom_line() +
  geom_point()+ theme_bw() 
```

使用这些代码创建的线条是非常像素化的锯齿形线条。他们有什么办法可以画出更平滑`"solid"`的线条（不是锯齿形的）？

```
 > sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_India.1252  LC_CTYPE=English_India.1252    LC_MONETARY=English_India.1252 LC_NUMERIC=C                  
[5] LC_TIME=English_India.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] ggplot2_0.9.2.1

loaded via a namespace (and not attached):
 [1] colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.14.2        gtable_0.1.1       labeling_0.1      
 [7] MASS_7.3-17        memoise_0.1        munsell_0.4        plyr_1.7.1         proto_0.3-9.2      RColorBrewer_1.0-5
[13] reshape2_1.2.1     scales_0.2.2       stringr_0.6.1      tools_2.14.2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:08:28.037

我猜你正在尝试平滑一条线。这是在你所追求的球场吗？

```
ggplot(lai.se, aes(x=DAS, y=LAI, colour=DOS)) + 
  geom_errorbar(aes(ymin=LAI-se, ymax=LAI+se), colour ="black", size =.5, width=1, position=position_dodge(.9)) +
  geom_smooth() +
  geom_point()+ theme_bw() 
```

![在此处输入图像描述](../Images/5bf5a97e5821e72baed6ecede4222bed.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-14T18:44:12.750

将您的图形输出到以矢量格式存储的文件，例如 PDF 或 PostScript，然后使用[ImageMagick](http://www.imagemagick.org/script/index.php)或类似工具将该矢量图像以高分辨率（150、300 甚至 600）渲染为位图（PNG、JPEG 等） dpi）：

```
$ convert myGraphAsVector.pdf -density 300 myGraphAs300DpiBitmap.png 
```

文件会很大（随着最终产品分辨率的提高，文件会变得越来越大），但位图的锯齿状会在像素密度越高时消失。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T19:17:09.190

在您对我的评论的回答中，您确认要对线条[进行抗锯齿](https://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm)处理（而不是更改绘图曲线）。

我认为在 R 中做到这一点的唯一方法是使用 Cairo，这里有一个关于如何用圆圈做到这一点的教程，我希望你能适应它来用线条做到这一点：

[http://www.r-bloggers.com/weekend-art-in-r-part-3/](http://www.r-bloggers.com/weekend-art-in-r-part-3/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-09T13:04:21.373

正如其他人所提到的，PDF 或 SVG 等基于矢量的图像格式可能是最好的选择。如果您想使用位图，例如 PNG，则可以`res`使用`png()`.

`png("myplot.png", width = 1800, height = 1800, res = 600)`

这将以 600 dpi 生成 3 英寸 x 3 英寸的图像（实际尺寸）。根据我的经验，对于相对简单的图表，文件大小仍然是合理的。

有关如何改进图像的更多想法，请参阅此博客文章：

[http://blog.revolutionanalytics.com/2009/01/10-tips-for-making-your-r-graphics-look-their-best.html](http://blog.revolutionanalytics.com/2009/01/10-tips-for-making-your-r-graphics-look-their-best.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-09T18:01:28.350

老问题，但我很惊讶没有人使用这种方法进行更新：将 ggplot 代码包装在 plotly::ggplotly() 中，如下所示：

```
plotly::ggplotly(
  ggplot(lai.se, aes(x=DAS, y=LAI, colour=DOS)) + 
  geom_errorbar(aes(ymin=LAI-se, ymax=LAI+se), colour ="black", size =.5, 
                width=1, position=position_dodge(.9)) +
  geom_line() +
  geom_point()+ 
  theme_bw()
) 
```

然后导出为png：

[![smove-b](../Images/8963981c54144360b438edaf0e8e90a6.png)](https://i.stack.imgur.com/d6pe1.png)

为了满足 SO 的图像文件大小规范，这看起来仍然有点锯齿，但原始 png 像黄油一样光滑。

# sql - 基于别名加入的 SQL 子查询解决方法

> ID：14323297
> 
> 赞同：0
> 
> 时间：2013-01-14T17:16:08.643
> 
> 标签：sql, join, subquery

尝试使用别名的子查询

```
SELECT
  *, 
  IQ.EndPart, 
  IQ.QtyToShip 
FROM
  parts p
  INNER JOIN (
     select
       *, 
       (case when c.kitno is null then l.partno else c.partno end) as [EndPart],
       (case when c.kitno is null then l.TotalQuantity else c.reqqty end) as [QtyToShip]
     FROM 
       shipments s
       INNER JOIN shipments_li l ON s.ShipmentNo = l.ShipmentNo 
       LEFT JOIN ProductConfiguration c ON l.PartNo = c.KitNo WHERE s.Status='N' and year(s.OrderDate)>2007
   ) IQ ON p.partno = IQ.EndPart 
```

使用别名为 EndPart 的零件 # 寻找一种将零件表连接到我下面的查询的方法。如果有另一种方法来实现取两列并将它们组合而不是大小写和别名的结果，那也是一个很好的选择。我对其他人的所有搜索都寻求实现相同的结果，结果您无法基于别名执行连接，因为当时尚未确定结果，建议使用子查询作为解决方法。我只是不确定如何获得工作成果。上面的查询是我试图开始工作的。任何帮助表示赞赏。提前致谢。

原始查询

```
SELECT
  *, 
  (case when c.kitno is null then l.partno else c.partno end) as [EndPart],
  (case when c.kitno is null then l.TotalQuantity else c.reqqty end) as [QtyToShip]
FROM
  shipments s
  INNER JOIN shipments_li l ON s.ShipmentNo = l.ShipmentNo
  LEFT JOIN ProductConfiguration c ON l.PartNo = c.KitNo
WHERE
  s.Status='N'
  and year(s.OrderDate)>2007
order by s.shipmentno 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:35:33.423

更合适的方式

```
--- CREATE TempTable
DECLARE @tblTemp AS TABLE (EndPart INT,
                       QtyToShip INT)

INSERT INTO @tblTemp (EndPart, QtyToShip)
SELECT 
       (CASE WHEN c.kitno IS NULL 
             THEN l.partno ELSE c.partno END) AS [EndPart],
       (CASE WHEN c.kitno IS NULL 
            THEN l.TotalQuantity 
            ELSE c.reqqty END) AS [QtyToShip]
FROM dbo.Shipments s WITH(NOLOCK)
INNER JOIN shipments_li l WITH(NOLOCK) ON s.ShipmentNo = l.ShipmentNo 
LEFT JOIN ProductConfiguration c WITH(NOLOCK) ON l.PartNo = c.KitNo 
WHERE s.Status='N' AND YEAR(s.OrderDate)>2007

SELECT
   p.*, 
  tmp.EndPart, 
  tmp.QtyToShip 
FROM dbo.parts p WITH(NOLOCK)
  INNER JOIN @tblTemp tmp ON  p.partno = tmp.EndPart 
```

# node.js - Mongoose 中的错误处理

> ID：14323298
> 
> 赞同：1
> 
> 时间：2013-01-14T17:16:12.903
> 
> 标签：node.js, mongoose, restify

我正在使用[Restify](http://mcavage.github.com/node-restify/)和[Mongoose](http://mongoosejs.com/)创建一个 API ，而且我对两者都是全新的。我似乎无法弄清楚在 Mongoose / Node.js 中处理错误的正确方法。

截至目前，我正在尝试做这样的事情：

```
Submission.findById(req.params.submission_id, function(err, data) {

    if (err) 
        return next(err);

    res.send(data);

}); 
```

我正在尝试对此调用 GET（对于不存在的用户）。而不是发回一个简单的错误消息，它会导致我的整个节点应用程序失败。我对 return next(err) 的用户以及应该做什么感到有些困惑。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T17:47:14.633

未找到匹配项的`findById`查询在 Mongoose 级别不是错误，因此如果您希望以这种方式处理它，您必须自己进行：

```
Submission.findById(req.params.submission_id, function(err, data) {

    if (err)
        return next(err);
    else if (!data)
        return next(new Error("User not found"));

    res.send(data);

}); 
```

# python - 在 Pandas Python 中对 DF 进行子集化

> ID：14323299
> 
> 赞同：2
> 
> 时间：2013-01-14T17:16:21.887
> 
> 标签：python, pandas

我有一个`df`：

```
date          cusip   value
2012-12-20     XXXX     4.23
2012-12-20     YYYY     6.34
2012-12-20     ZZZZ     8.12
2012-12-21     XXXX     5.78
2012-12-21     YYYY     6.62
2012-12-21     ZZZZ     9.09 
```

我想在我只选择`cusips`列表中存在的地方进行子集化：

`cusList = ('XXXX', 'ZZZZ')`

将`sub_df`是：

```
date          cusip   value
2012-12-20     XXXX     4.23
2012-12-20     ZZZZ     8.12
2012-12-21     XXXX     5.78
2012-12-21     ZZZZ     9.09 
```

有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:24:02.733

您可以使用系列方法[`isin`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.Series.isin.html#pandas.Series.isin)：

```
In [1]: df = pd.read_csv(cusp.csv, sep='\s+')

In [2]: df.cusip.isin(['XXXX', 'ZZZZ'])
Out[2]: 
0     True
1    False
2     True
3     True
4    False
5     True
Name: cusip

In [3]: df[df.cusip.isin(['XXXX', 'ZZZZ'])]
Out[3]: 
         date cusip  value
0  2012-12-20  XXXX   4.23
2  2012-12-20  ZZZZ   8.12
3  2012-12-21  XXXX   5.78
5  2012-12-21  ZZZZ   9.09 
```

# ios6 - 专辑封面和代表物品

> ID：14323300
> 
> 赞同：0
> 
> 时间：2013-01-14T17:16:30.067
> 
> 标签：ios6

如果专辑封面不存在，我正在尝试放置一个占位符图像。由于某种原因，representativeItem 中的图像永远不会为空，因此它只是分配了一个空白艺术品......

```
MPMediaItemArtwork *artwork = [[mediaListItem representativeItem] valueForProperty:MPMediaItemPropertyArtwork];

    if (artwork) {
         sModel.albumImage = [artwork imageWithSize: CGSizeMake (10, 10)];
    } else {
        sModel.albumImage = [UIImage imageNamed:@"Default_.png"]; //never enters
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:47:10.720

找到解决方案，我是天才；）

```
MPMediaItemArtwork *artwork = [[mediaListItem representativeItem] valueForProperty:MPMediaItemPropertyArtwork];

//If artwork has no size set place holder
if (CGSizeEqualToSize(artwork.bounds.size, CGSizeZero))
{
   sModel.albumImage = [UIImage imageNamed:DEFAULT_IMG];
}
else //Otherwise set the artwork found in the library. 
{
   sModel.albumImage = [artwork imageWithSize: CGSizeMake (SIZE_X, SIZE_Y)];
} 
```

# android - 如何从另一个类更改内容视图？

> ID：14323307
> 
> 赞同：0
> 
> 时间：2013-01-14T17:16:45.230
> 
> 标签：android, xml

我有头等舱和二等舱。如何通过单击按钮更改 first.class 中的 ContentView（xml 文件），谁在 second.class 中？（也许我的问题很简单，但我找不到答案。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:26:29.567

您可以使用一个简单的标志。从 Bundle 或磁盘读取您的第一个 Activity 中的标志（请参阅[数据存储](http://developer.android.com/guide/topics/data/data-storage.html)）。在第一个 Activity 的`onCreate()`方法中使用如下内容：

```
// Read the flag, in this case from an Intent
int choice = 0;
Intent intent = getIntent();
if(intent != null)
    choice = intent.getIntExtra(LAYOUT_PREFERENCE, 0);

// Load the appropriate layout
switch(choice) {
case 0: 
    setContentView(R.layout.one);
    break;
case 1:
    setContentView(R.layout.two);
    break;
//etc
} 
```

在第二个 Activity 中设置此标志，特别是在 Button 的 OnClickListener 中。我再次使用了一个简单的捆绑包，您可以通过它`setResult()`甚至可以通过`startActivity()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:27:53.387

您必须将第一个 Activity（layout1 或 layout2）的设置存储在某处，两个 Activity 都可以访问该值，而您的第二个 Activity 也可以写入它。[您可以使用 SharedPreferences、静态变量或Android 开发人员指南](http://developer.android.com/training/basics/data-storage/index.html)中提到的几乎所有内容。

如果您总是从第二个 Activity 开始第一个 Activity，您还可以将布局添加为调用意图的额外内容。

# web-services - OM节点的数据元素为NULL

> ID：14323329
> 
> 赞同：0
> 
> 时间：2013-01-14T17:18:00.747
> 
> 标签：web-services, soap, axis

当我从 Java 程序调用 web 服务时，它会抛出：

`javax.xml.ws.soap.SOAPFaultException: Data element of the OM Node is NULL`

在 SOAPUI 中同样可以正常工作。纯字符串中的服务输入。Aixs 和 SOAP 文档不提供附加信息。

```
javax.xml.ws.soap.SOAPFaultException: Data element of the OM Node is NULL
    at com.sun.xml.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:188)
    at com.sun.xml.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:130)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:119)
    at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:89)
    at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:118)
    at $Proxy34.xcCreateDistributedSession(Unknown Source) 
```

任何帮助，将不胜感激。

用于访问 Web 服务的代码

```
private String createNewSession() {
String sessionState;
WSPortType ap = getWSPortType();
    try {
        sessionState = ap.xcCreateDistributedSession(sessionRequestParms);
    } catch(XcErrorResponseMessage e) {
        throw new YException(msg, e);
    } catch(WebServiceException e) {
        throw new RemoteAccessException(msg, e);
    }
    return sessionState;
} 
```

引发 WebserviceException。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:50:54.423

最后我解决了这个问题。缺少必填字段，服务未正确处理它。由于返回“OM 节点的数据元素为 NULL”。

# c# - 如何将 DataSource 设置为 DropDownList？

> ID：14323332
> 
> 赞同：5
> 
> 时间：2013-01-14T17:18:13.017
> 
> 标签：c#, asp.net, visual-studio-2010, web

我阅读了其他一些线程并没有为我工作=\我有`GridView`一个`DropDownList`在一个领域。我想知道我该如何设置`DataSource`？我没有使用模板，也没有 ItemTemplate 或 EditItemTemplate 我不知道它是如何工作的，所以我还没有使用它。

到目前为止，我只创建了 GridView 并用数据填充了字段，但我不知道如何为`DropDownList`. 我猜有些东西不见了，它给了我一个错误（`"The Reference of the Object was not set as an instance of an object"`）

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
        {                                
            DropDownList Drop_Prioridades = (DropDownList)e.Row.FindControl("Drop_Prioridades");
            Drop_Prioridades.DataTextField = "BAIXA";
            Drop_Prioridades.DataValueField = "1";
            Drop_Prioridades.DataTextField = "MEDIA";
            Drop_Prioridades.DataValueField = "2";
            Drop_Prioridades.DataTextField = "ALTA";
            Drop_Prioridades.DataValueField = "3";
            Drop_Prioridades.DataBind();
        } 
```

我也试过这个/同样的错误=\

```
DataSet ds = func.LoadPriority();

            foreach (DataRow row in ds.Tables[0].Rows)
            {
                ListItem item = new ListItem();
                item.Text = row["prioridade"].ToString();
                item.Value = row["id"].ToString();
                DropDownList ddlPrioridades = (DropDownList)e.Row.FindControl("Drop_Prioridades");
                ddlPrioridades.Items.Add(item);
            } 
```

也试过这个......

HTML：

```
<columns>                    

     <asp:TemplateField HeaderText="PRIORIDADE" ItemStyle-HorizontalAlign="Center" HeaderStyle-Width="100px">
            <ItemTemplate>
                <asp:DropDownList ID="Drop_Prioridades" Width="120px" runat="server" ></asp:DropDownList> 
</ItemTemplate>                    
</asp:TemplateField> 
```

代码背后：

```
 DataSet ds = func.CarregaPrioridade();
            DropDownList ddlist = (DropDownList)e.Row.FindControl("Drop_Prioridades");
            ddlist.DataSource = ds;
            ddlist.DataTextField = "prioridade";
            ddlist.DataValueField = "id"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:37:14.987

在标记中绑定 Row 数据绑定事件，如下：

```
<asp:GridView ID="grvGrid" runat="server" OnRowDataBound="grvGrid_RowBound">
   <Columns>
       <asp:TemplateField ItemStyle-HorizontalAlign="Left" ItemStyle-VerticalAlign="Top"  ItemStyle-Width="7%">
                <ItemTemplate>
                   <asp:DropDownList ID="ddlList" runat="server"/>
                </ItemTemplate>
       </asp:TemplateField>
    </Columns>
 </asp:GridView? 
```

在后面的代码中：

```
 protected void grvGrid_RowBound(object sender, GridViewRowEventArgs e)
 {
     DropDownList ddlList= (DropDownList )e.Row.FindControl("ddlList");
     ddlList.DataSource = _dSource;
     ddlList.DataTextField = "text";
     ddlList.DataValueField = "value";
     ddlList.DataBind();

  } 
```

或者

如果您的下拉菜单对每一行都有相同的选项，则不需要在 RowDataBound 事件期间绑定它。您可以将 item 添加到标记中的下拉列表中，如下所示：

```
 <asp:DropDownList id="ddlList"runat="server">

              <asp:ListItem Selected="True" Value="White"> White </asp:ListItem>
              <asp:ListItem Value="Silver"> Silver </asp:ListItem>
              <asp:ListItem Value="DarkGray"> Dark Gray </asp:ListItem>
              <asp:ListItem Value="Khaki"> Khaki </asp:ListItem>
              <asp:ListItem Value="DarkKhaki"> Dark Khaki </asp:ListItem>

           </asp:DropDownList> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:59:57.703

`ddlList.DataTextField = "Text";`如果这一行给你一个错误，那么确保在你的数据源或数据集中你有相同的列名。如果它的文本名称，那么你应该分配`ddlList.DataTextField = "textname";`

只是一个想法！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-18T10:21:17.147

请按照此代码将数据源分配给下拉菜单

```
 DataTable dt = ds.tables[0];
    DropdownId.DataSource = dt;
    DropdownId.DataTextField = "Text Column";
    DropdownId.DataValueField = "Value Column";
    DropdownId.DataBind();
    DropdownId.Items.Insert(0, new ListItem("-- Select --", "0")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:45:40.090

我这样解决了我的问题：

```
DataSet ds = SomeMethodToFillTheDataSet()

foreach(DataRow row in ds.tables[0].Rows)
{
  ListItem item = new ListItem();
  item.text = "fieldName";  e.g  Name
  item.value = "FieldName"; e.g  ID
  DropDOwnList.Items.Add(item);
} 
```

# phpmyadmin - 编辑登录 html phpmyadmin

> ID：14323333
> 
> 赞同：0
> 
> 时间：2013-01-14T17:18:13.980
> 
> 标签：phpmyadmin

有谁知道哪个文件或 mySQL 表包含 phpMyAdmin 中登录表单的 HTML？老板想添加他自己的特殊信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T12:17:41.840

它位于文件 library\auth\cookie.auth.lib.php 的第 108 行（函数 PMA_auth）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-21T20:13:40.527

我正在使用 phpMyAdmin4，它有点不同。..libraries\plugins\auth\AuthenticationCookie.class.php。我将它添加到其中包含“欢迎使用 phpMyAdmin”的行，第 166 行，或者只是搜索“欢迎”。

# php - 网络服务器中的 PHP GnuPG 段错误

> ID：14323334
> 
> 赞同：2
> 
> 时间：2013-01-14T17:18:14.477
> 
> 标签：php, gnupg

灵感来自[http://devzone.zend.com/1278/using-gnupg-with-php/](http://devzone.zend.com/1278/using-gnupg-with-php/)并在[@PHP ASCII Armored PGP 加密字符串的帮助下](https://stackoverflow.com/questions/14267103/php-ascii-armored-pgp-encrypted-string)

在 CLI 中运行时，我能够使用第 3 方公钥对字符串进行 GnuPG 加密。

*   将 GNUPGHOME 设置为世界可读的位置
*   chmod 密钥环文件到 666
*   cli php 加密字符串就好了

* * *

```
PHP 5.2.10 (cli) (built: Nov 13 2009 11:44:05)
Copyright (c) 1997-2009 The PHP Group
Zend Engine v2.2.0, Copyright (c) 1998-2009 Zend Technologies 
```

但...

当通过网络服务器（CentOS 上的 Apache）调用运行相同脚本的**addencryptkey**时，我得到“退出信号分段错误 (11)” 。

apache错误日志

```
[notice] child pid 30682 exit signal Segmentation fault (11) 
```

syslog 中没有任何价值...

任何指针？谢谢！

* * *

代码（没有什么惊天动地的）：

```
// GnuPG code
putenv("GNUPGHOME=/opt/.gnupg/");

$gpg = new gnupg();
$gpg->seterrormode(gnupg::ERROR_EXCEPTION); 
$gpg -> setarmor(1);

try 
{
    $info = $gpg -> addencryptkey("KEY");
    var_dump($info);
    $enc = $gpg -> encrypt($token);
    var_dump($enc);
} 
catch (Exception $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

* * *

```
drwxr-xr-x  2 root root  4096 Jan 14 11:29 .gnupg

[root@dev-lamp01 opt]# ll .gnupg/
total 28
-rw-rw-rw- 1 root root 9224 Jan 14 10:23 gpg.conf
-rw-rw-rw- 1 root root  325 Jan 14 10:25 pubring.gpg
-rw-rw-rw- 1 root root    0 Jan 14 10:20 pubring.gpg~
-rw-rw-rw- 1 root root  600 Jan 14 11:29 random_seed
-rw-rw-rw- 1 root root    0 Jan 14 10:20 secring.gpg
-rw-rw-rw- 1 root root 1200 Jan 14 10:25 trustdb.gpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:58:34.327

哦，好吧 - 我的错 - 只要我这样做

```
chmod -R 777 
```

在我的 GNUPGHOME 上——一切正常

认为它对 666 很满意（而 CLI 对 rw 很满意）

# python - 从 ElementTree 获取属性名称和值

> ID：14323335
> 
> 赞同：11
> 
> 时间：2013-01-14T17:18:23.223
> 
> 标签：python, xml, elementtree, xmlroot

我有一个`<root>`具有多个属性的 XML 元素。我一直在使用这个`ElementTree`包。

从 xml 文件解析树后，我得到了文档根目录，但我想获取请求的属性，甚至是整个属性列表。

```
<root a="1" b="2" c="3">
    </blablabla>
</root> 
```

如何`<root>`使用 ElementTree 检索元素的所有属性名称和值？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-14T17:21:27.077

每个`Element`都有一个属性`.attrib`是字典；只需使用它的[映射方法](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)来询问它的键或值：

```
for name, value in root.attrib.items():
    print '{0}="{1}"'.format(name, value) 
```

或者

```
for name in root.attrib:
    print '{0}="{1}"'.format(name, root.attrib[name]) 
```

或使用`.values()`python 上可用的任何其他方法`dict`。

要获取单个属性，请使用标准[订阅语法](http://docs.python.org/2/reference/expressions.html#subscriptions)：

```
print root.attrib['a'] 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T17:26:38.030

ElementTree 元素的`attrib`属性（如 所返回的根`getroot`）是一个字典。所以你可以这样做，例如：

```
from xml.etree import ElementTree
tree = ElementTree.parse('test.xml')
root = tree.getroot()
print root.attrib 
```

对于您的示例，它将输出

```
{'a': '1', 'b': '2', 'c': '3'} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-23T07:55:31.770

您可以使用一些不错的循环，它将为 xmlObject 的每个元素获取它的标记、文本和属性，它将适用于 2 级 XML，这不是迭代的最佳方式，但它对简单的事情很有用......

```
for headTag in xmlObject.getchildren():
    print headTag.tag, headTag.text, headTag.attrib
    for bodyTag in headTag.getchildren():
        print "\t", bodyTag.tag, bodyTag.text, bodyTag.attrib 
```

# c++ - 你能把 std::recursive_mutex 和 std::condition_variable 结合起来吗？

> ID：14323340
> 
> 赞同：31
> 
> 时间：2013-01-14T17:18:48.313
> 
> 标签：c++, multithreading, c++11, std, recursive-mutex

你可以结合`std::recursive_mutex`,`std::condition_variable`意思是做这样的事情：

```
std::unique_lock<std::recursive_mutex> lock(some_recursive_mutex)
some_condition_var.wait(lock); 
```

如果不允许，那为什么不呢？

我正在使用 VC++11。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-14T17:28:21.733

你可以，如果你使用`std::condition_variable_any`，它允许任何类型的支持可锁定概念的对象。

但是，在递归互斥锁的情况下，您必须确保给定线程只锁定了递归互斥锁一次，因为条件变量只会在等待期间使用该`unlock`方法一次。`unique_lock`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T17:24:00.087

您可以使用 a 来做到这一点，`std::condition_variable_any`它可以采用任何类型的可锁定但 plain`std::condition_variable`专门用于`std::unique_lock<std::mutex>`.

# dynamics-crm - 将自定义按钮添加到高级查找 robbon

> ID：14323344
> 
> 赞同：1
> 
> 时间：2013-01-14T17:19:01.407
> 
> 标签：dynamics-crm, microsoft-dynamics

我的customizations.xml 导入正常，但是当我打开高级查找对话框时，它告诉我“功能区 XML 验证错误”：

![在此处输入图像描述](../Images/7d7de52a0efcc50b2d0e845841e827a8.png)

我似乎无法获得比这更多的信息。下面是我的customizations.xml 文本，我尽量简化它。

* * *

```
<ImportExportXml xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <Entities></Entities>
  <Roles></Roles>
  <Workflows></Workflows>
  <FieldSecurityProfiles></FieldSecurityProfiles>
  <Templates />
  <RibbonDiffXml>
    <CustomActions>
      <CustomAction Id="DEW.Mscrm.AdvancedFind.Groups.Debug.UploadFetchXml"
                    Location="Mscrm.AdvancedFind.Groups.Debug._children" >
        <CommandUIDefinition>
          <Button Id="DEW.Mscrm.AdvancedFind.Groups.Debug.UploadFetchXmlButton" />
        </CommandUIDefinition>
      </CustomAction>
    </CustomActions>
    <Templates>
      <RibbonTemplates Id="Mscrm.Templates"></RibbonTemplates>
    </Templates>
    <CommandDefinitions>
    </CommandDefinitions>
    <RuleDefinitions>
      <TabDisplayRules />
      <DisplayRules />
      <EnableRules />
    </RuleDefinitions>
    <LocLabels />
  </RibbonDiffXml>
  <EntityMaps />
  <EntityRelationships />
  <OrganizationSettings />
  <optionsets />
  <Languages>
    <Language>1033</Language>
  </Languages>
</ImportExportXml> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:22:23.750

对于希望找到解决方案的其他人，或者如果您遇到类似问题，至少要注意一些事情。

我的问题是不同元素的 id 是相同的。即使在不同的元素中，您也必须具有唯一的 ID。并且“Mscrm.AdvancedFind.Groups.Debug._children”应该是“Mscrm.AdvancedFind.Groups.Debug.Controls._children”

# winapi - _T("") 宏，用于非 MFC、Win32 项目

> ID：14323346
> 
> 赞同：1
> 
> 时间：2013-01-14T17:19:06.577
> 
> 标签：winapi, mfc, tchar

我正在创建一个 Win32 项目，并且我正在尝试在`TCHAR`任何地方使用。但由于它是一个非 MFC 项目，我没有`_T`定义。

我如何在我的项目中获得它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:19:58.930

好的，找到了怎么做。我只需要添加

```
#include <tchar.h> 
```

to `stdafx.h`，并且它不携带任何 MFC 依赖项。它只是默认情况下不包含在非 MFC 项目中。

# ruby-on-rails-3 - 如何将多个版本的 Rails 应用程序部署到同一域的不同子目录中？

> ID：14323352
> 
> 赞同：0
> 
> 时间：2013-01-14T17:19:48.083
> 
> 标签：ruby-on-rails-3

> **可能重复：**
> [Rails、Heroku 和子域。我的特殊情况可行吗？](https://stackoverflow.com/questions/4871035/rails-heroku-and-subdomains-is-my-special-case-scenario-feasible)

我正在创建一个 Rails 3 站点，我想在重新设计和创建新站点时维护该网站的先前版本，因此可以在找到`www.website.com`以前版本的同时找到最新版本在`www.website.com/old-1`.

这是我在我的 Rails 应用程序中执行的操作并使用分支/等重新设计，然后创建路由`website.com/old-1`吗？还是我要创建一个完全独立的 Rails 应用程序并使用域/DNS 做一些棘手的事情？

# javascript - AngularJS - ng-click 和 ng-show

> ID：14323359
> 
> 赞同：1
> 
> 时间：2013-01-14T17:20:13.810
> 
> 标签：javascript, angularjs, overlay, hide, show

我有一张地图，上面有一些标记。单击时，每个标记都打开一个覆盖 div。

```
 <div class="map" ng-init="loadall()">
            <a ng-click="details.show=!details.show" href="#/dealer/{{marker.id}}" class="marker" style="left:{{marker.coordleft}}px;top:{{marker.coordtop}}px" ng-repeat="marker in dealer"></a>    
        </div> 
```

**它正在打开这个 div：**

```
<div ng-show="details.show">      
    <div ng-view></div>
</div> 
```

**问题：**
如果 div 已经打开（details.show == true），我的客户注意到，如果您将其保持打开状态并单击地图上的其他标记，则 div 会再次关闭。

**我想要实现**
的目标：如果 div 已经打开，只需将新内容加载到 ng-view 中，而无需再次关闭并重新打开 div。

这可能吗？

编辑：

**我的路线：**

```
app.config(['$routeProvider', function($routeProvider) {
  $routeProvider.
      when('/dealer/:id', {templateUrl: 'files/tpl/dealer-details.html?20', controller: 'DealerDetailsCtrl', activetab: 'details'}).
      when('/dealermessage/:id', {templateUrl: 'files/tpl/dealer-message.html?124', controller: 'DealerMessageCtrl', activetab: 'message'}).
      when('/dealersendmessage/:id', {templateUrl: 'files/tpl/dealer-details.html?8', controller: 'DealerDetailsCtrl', activetab: 'details'}).
      otherwise({redirectTo: '/dealer'});
}]); 
```

如果单击了标记，则正在加载第一个路由和控制器。这有帮助吗？

**编辑第 2 号：**
“标记/div 切换现在正在工作，但我现在有一个打开的叠加层的奇怪行为。

**示例：**
当我打开“Marker 1”时，div 可以正常打开。当“Marker 1”的 div 打开时，我可以点击“Marker 2”，div 会刷新为“Marker 2”的内容。但是当我现在点击“Marker 1”时，div 突然关闭了。
我怎样才能阻止它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:46:58.287

还是不太懂，但是**你只保留一个模型来切换几个标记**。因此，如果您单击一个标记打开，另一个标记将关闭它，因为您不保留标记的状态。你可能需要类似的东西：

```
<div ng-repeat="marker in dealer">
   <a ng-click="details.show=toggle(marker)" href="#/dealer/{{marker.id}}" 
      class="marker" style="left:{{marker.coordleft}}px;top:{{marker.coordtop}}px"></a>
</div> 
```

在您的控制器中定义`toggle`函数：

```
$scope.toggle = function(marker) {
   marker.show = !marker.show;

   return marker.show;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:55:52.173

您的 ng-click 处理程序需要更多逻辑（如@asgoth 的回答所示）。

另一种可能的解决方案（不修改经销商数据）：传递`$event`到您的 ng-click 处理程序

```
<a ng-click="handleOverlay($event)" ... ></a> 
```

然后将 srcElement 存储在 $scope ( `$scope.openMarker = ev.srcElement`) 上。然后，对于每次点击，handleOverlay() 可以确定点击是发生在已经打开的元素上还是新的元素上。

我们不知道您如何重新加载 ng-view，所以如果这是一个问题，我们需要查看更多代码。例如，您是否为每个新视图加载不同的控制器？如果是这样，您可能需要将 srcElement 存储在服务或 rootScope 上（即，将在视图/控制器更改后继续存在的东西）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:47:10.397

所以我遵循了 asgoth 的解决方案并将其扩展以解决 Marek123 提到的问题。以下是我的解决方案：

```
$scope.selectedMarker = {};
$scope.toggle = function(marker) {
  //assuming you have a key "id" in each dealer
  if (marker.id !== $scope.selectedMarker.id) {
      _.each($scope.delear, function(value, index) {
        $scope.delear[index].show = false;
      });
    }
   marker.show = !marker.show;
   return marker.show;
}; 
```

# laravel - Laravel 3：在生产服务器上/在 .php 文件中运行迁移

> ID：14323361
> 
> 赞同：3
> 
> 时间：2013-01-14T17:20:19.940
> 
> 标签：laravel, laravel-3

我一直在本地服务器上使用 Laravel 3。我一直在使用终端和 Artisan 来执行我的迁移。

我想在我的生产服务器上安装我的站点，但我想创建一种“安装/迁移”脚本，它将执行所有迁移并指导用户完成配置。

我找到了所有迁移方法的位置（由工匠使用），但我正在努力使用它们。有谁知道怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T00:00:23.913

我认为你混淆了一些事情（我不确定，所以我会告诉以防万一）。

**迁移适用于开发人员。**您的最终用户不会直接运行迁移。因此，迁移适合您和您的开发人员伙伴。如果您希望您的用户运行迁移，那么您只需创建一个普通页面并有一些用户按下的链接或按钮，这将在您的控制器上运行一个操作（一个功能）（如果您以这种方式设置了路由） . 在此函数中，*您*应该运行迁移。

**从 PHP 运行迁移：**您可以使用 Command 类来运行任务。

```
Command::run(array('migrate')); 
```

显然，这将运行迁移任务。这就是你所追求的吗？

# ios - AQGridView insertItemsAtIndices 项目重叠

> ID：14323362
> 
> 赞同：0
> 
> 时间：2013-01-14T17:20:20.773
> 
> 标签：ios, ipad, aqgridview

当我在 AQGridView 上调用 insertItemsAtIndices 时，这些项目是重叠的，而不是显示在它们的相关网格中。如果我在 GridView 上调用 reloadData，它工作正常，但我想一次只添加一个单元格。

我已经实现了 PortraitGridCellSizeForGridView，但是在插入调用之后似乎没有被调用。

这是要插入的相关代码：

```
[self.cartItemArray addObject:cartItem];

[self.cartGridView beginUpdates];

[self.cartGridView insertItemsAtIndices:[NSIndexSet indexSetWithIndex:self.cartItemArray.count - 1] withAnimation:AQGridViewItemAnimationNone];

[self.cartGridView endUpdates]; 
```

这是 AQGridView 委托方法：

```
- (NSUInteger)numberOfItemsInGridView:(AQGridView *)gridView {

return _cartItemArray.count;

}

- (AQGridViewCell *)gridView:(AQGridView *)gridView cellForItemAtIndex:(NSUInteger)index {

static NSString * GridCellIdentifier = @"CartItemListViewCell";

CartItemListViewCell_iPad * cell = (CartItemListViewCell_iPad *)[gridView dequeueReusableCellWithIdentifier:GridCellIdentifier];

if (!cell) {
    CGRect cellFrame = CGRectMake(0, 0, _cellWidth, _cellHeight);
    cell = [[CartItemListViewCell_iPad alloc] initWithFrame:cellFrame reuseIdentifier:GridCellIdentifier];
}

CartItem *cartItem = [_cartItemArray objectAtIndex:index];

[(CartItemListViewCell_iPad*)cell updateCartItem:cartItem];

return cell;

}

- (CGSize)portraitGridCellSizeForGridView:(AQGridView *)gridView {

return CGSizeMake(_cellWidth, _cellHeight);
}

- (void)gridView:(AQGridView *)gridView didSelectItemAtIndex:(NSUInteger)index {

if (index >= _cartItemArray.count){
    return;
}

self.selectedItemIndex = index;

[[NSNotificationCenter defaultCenter] postNotificationName:NotificationEditPrintSizeCartItem object:[_cartItemArray objectAtIndex:index]];

} 
```

这就是它的样子：

![单元格重叠示例](../Images/0c6f2f3540b35f495fad615478b58d01.png)

如您所见，我在屏幕上使用了两个 AQGridView。我想知道这是否导致了问题？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:44:42.813

好的，刚刚解决了。搜索代码，我注意到在 reloadData 中调用了以下代码：

```
[_gridData setDesiredCellSize: [_dataSource portraitGridCellSizeForGridView: self]]; 
```

所以，现在我在向它添加任何内容之前调用 reloadData。

# python - 如何在 python 中使用 tkinter 滑块（比例）值更新图像？

> ID：14323368
> 
> 赞同：0
> 
> 时间：2013-01-14T17:20:30.570
> 
> 标签：python, image-processing, tkinter, slider

我是python的初学者。我要做的就是创建一个简单的 GUI 来实现基本的数字图像处理算法。我想用 tkinter 滑块调整图像的亮度。但这不起作用，我一无所知，因为我只是初学者。我期待缩放小部件回调做一些亮度调整工作，但由于某种原因，回调没有被调用。

这是我的代码：

```
import Tkinter as tk
import Image
import ImageTk
import numpy as np
import tkFileDialog

class DIP(tk.Frame):
    def __init__(self, parent):
        tk.Frame.__init__(self, parent) 
        self.parent = parent        
        self.initUI()

    def initUI(self):
        self.parent.title("DIP Algorithms- Simple Photo Editor")
        self.pack(fill = tk.BOTH, expand = 1)

        menubar = tk.Menu(self.parent)
        self.parent.config(menu = menubar)

        self.label1 = tk.Label(self, border = 25)
        self.label2 = tk.Label(self, border = 25)
        self.label1.grid(row = 1, column = 1)
        self.label2.grid(row = 1, column = 2)

        # File Menu
        fileMenu = tk.Menu(menubar)
        menubar.add_cascade(label = "File", menu = fileMenu)

        # Menu Item for Open Image
        fileMenu.add_command(label = "Open", command = self.onOpen)        

        # Basic menu
        basicMenu = tk.Menu(menubar)        
        menubar.add_cascade(label = "Basic", menu = basicMenu)

        # Menu Item for image negative
        basicMenu.add_command(label = "Negative", command = self.onNeg)

        #menu for brightness
        basicMenu.add_command(label = "Brightness", command = self.onBrghtness)

    def onBrghtness(self):
        #Image Brightness Adjustment Menu callback
        brgTk=tk.Tk()
        self.brgSc = tk.Scale( brgTk, from_=-50, to=50, orient=tk.HORIZONTAL, command=self.adjBright, length=200 ,width=10, sliderlength=15)
        self.brgSc.pack(anchor=tk.CENTER)

    def adjBright(self):
        print self.brgSc #***here how can i get slider value, this callback is not being invoked***???

    def onNeg(self):
        #Image Negative Menu callback
        self.I2 = 255-self.I;
        self.im = Image.fromarray(np.uint8(self.I2))
        photo2 = ImageTk.PhotoImage(self.im)
        self.label2.configure(image=photo2)
        self.label2.image = photo2 # keep a reference!

    def setImage(self):
        self.img = Image.open(self.fn)
        self.I = np.asarray(self.img)
        l, h = self.img.size
        text = str(2*l+100)+"x"+str(h+50)+"+0+0"
        self.parent.geometry(text)
        photo = ImageTk.PhotoImage(self.img)
        self.label1.configure(image = photo)
        self.label1.image = photo # keep a reference!

    def onOpen(self):
        #Open Callback
        ftypes = [('Image Files', '*.tif *.jpg *.png')]
        dlg = tkFileDialog.Open(self, filetypes = ftypes)
        filename = dlg.show()
        self.fn = filename
        #print self.fn #prints filename with path here
        self.setImage()

    #def onError(self):
        #box.showerror("Error", "Could not open file")    

def main():
    root = tk.Tk()
    DIP(root)
    root.geometry("320x240")
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

在我提到问题的代码中，回调失败，因为它说的是：

```
Traceback (most recent call last):
  File "C:\Python27\lib\lib-tk\Tkinter.py", line 1410, in __call__
    return self.func(*args) 
TypeError: adjBright() takes exactly 1 argument (2 given) 
```

请帮忙，我知道这可能是一个愚蠢的问题，但我只是初学者，我希望随着时间的推移我会对 PYTHON 有深入的了解......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:51:21.583

> 回溯（最近一次调用最后）：文件“C:\Python27\lib\lib-tk\Tkinter.py”，第 1410 行，调用返回 self.func(*args) 类型错误：adjBright() 正好采用 1 个参数（2给定）

您收到此错误是因为比例回调始终传递了比例的新值。由于您将其定义`adjBright`为仅`self`作为参数，因此 Tkinter 会引发错误。不幸的是，这似乎是 Tkinter 的一个记录不足的功能。

添加另一个参数`adjBright`，然后您不必担心获取新值：

```
def adjBright(self, new_value):
    print "the slider value is", new_value 
```

# cpu-usage - 可以记录/记录 CPU 使用率的最细粒度

> ID：14323371
> 
> 赞同：2
> 
> 时间：2013-01-14T17:20:39.303
> 
> 标签：cpu-usage

CPU负载有一些分形。根据您查看典型“procstat”或“top”程序输出的时间分辨率，斜率看起来或多或少是详细的。

除了在 1、5、15 分钟内获取“平均”CPU 使用率的“加载”程序之外，许多工具以*秒*的精度给出 CPU 使用率。

当采样率变得高于程序的空闲/malloc 频率时，峰值开始在 CPU 使用率似乎平稳的图表上变得可见。

问题是：显示 CPU 使用率的最高可能/可用采样率是多少？

就像在量子系统中一样，测量可能会改变被测量实体的状态（如果采样工具在被采样的 CPU 上运行）。是否有任何系统可以非常准确地从另一个外部 CPU 监控 CPU 使用情况，并且测量结果不会影响受监控 CPU 的负载？

# html - HTML5 Script 标签是否需要 type="javascript"？

> ID：14323376
> 
> 赞同：98
> 
> 时间：2013-01-14T17:20:53.767
> 
> 标签：html

> **可能重复：**
> [您是否需要在 <script> 标签中指定文本/javascript？](https://stackoverflow.com/questions/5265202/do-you-need-text-javascript-specified-in-your-script-tags)

在 HTML5 中，`<script>`标签需要属性`type="text/javascript"`吗？
我的意思是`<script>`标签是否包含javascript不是很明显吗？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-01-14T17:22:21.467

不，它[现在正式没用了](http://www.w3.org/TR/html5/scripting-1.html#the-script-element)。

> type 属性给出了脚本的语言或数据的格式。如果该属性存在，则其值必须是有效的 MIME 类型。不得指定 charset 参数。如果该属性不存在，则使用默认值是“text/javascript”。

简单地做

```
<script src=yourpath.js></script> 
```

（是的，[你也可以省略引号](http://w3c.github.io/html/syntax.html#elements-attributes)）

请注意，您不必担心 HTML5 之前的浏览器，所有浏览器都始终将 JavaScript 视为默认脚本语言。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-14T17:23:18.870

从[规格](http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element)：

> 如果语言不是“text/javascript”所描述的，那么 type 属性必须存在

和：

> 如果该属性不存在，则使用默认值是“text/javascript”。

相反，这意味着如果您的`src`属性用于有效 JavaScript 的文件，则不需要它。

# java - Java 线程池大小和 availableProcessors()

> ID：14323379
> 
> 赞同：4
> 
> 时间：2013-01-14T17:21:11.877
> 
> 标签：java, size, threadpool

我有一个程序可以并行运行（全天）任务（要执行的任务中没有 I/O），所以我习惯于`Executors.newFixedThreadPool(poolSize)`实现它。

最初我将其设置`poolSize`为`Runtime.getRuntime().availableProcessors()`，但我有点担心要使用所有可用的内核，因为在同一台 PC（32 个内核）上运行着其他进程。

特别是我有十个其他 JVM 运行相同的程序（在不同的输入数据上），所以我有点担心在可用内核之间切换线程方面可能会有很多开销，这可能会减慢整体计算速度.

我应该如何决定每个程序/JVM 的池大小？

此外，在我的 PC 中，还有其他进程一直在运行（防病毒、备份等）。我也要考虑这些吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:26:04.323

任何建议都将取决于您的具体情况。32 个内核上的 10 个 JVM 建议每个 3 个线程（忽略垃圾收集线程、计时器任务等......）

您还有其他任务正在运行。调度程序将确保它们正在运行，但它们是否必须响应？比 JVM 响应更快？如果您正在运行 Linux/Unix，那么您还可以利用优先级（通过`nice`）来确保特定进程不会占用 CPU。

最后，您正在运行 10 个 JVM。这会导致分页吗？如果是这样，那将会很慢，并且您最好运行更少的 JVM 以避免消耗太多内存。

只需确保您的关键变量是公开且可配置的，并测量各种场景以找到最佳场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:26:08.363

> 我应该如何决定每个程序/JVM 的池大小？

您想要的线程数将使您接近 99% 的利用率，仅此而已。

平衡工作的最简单方法是让进程运行一次，同时处理多个文件并仅使用一个线程池。如果您需要通过命令行启动文件，您可以将进程设置为服务。

如果由于某种原因这是不可能的，您将需要猜测线程池应该缩小多少。尝试运行一个进程并查看利用率。如果一个是 40%，那么我怀疑 10 个进程被 400% 过度使用。即，您可以将池大小减少 4 倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:26:34.837

不幸的是，这是一件很难知道的事情，因为程序通常不知道同一个盒子上还有什么或可能发生什么。

“简单”的出路是使池大小可配置。这允许控制程序/盒子的用户决定为您的程序分配多少线程（大概使用他们对盒子的一般工作负载的了解）。

一个更复杂的解决方案是尝试以编程方式确定盒子的当前工作量并从中适当地选择池大小。此解决方案的功效取决于您确定工作负载的准确程度以及随着时间的推移可能会发生的变化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T11:49:25.110

尝试 grepping 进程，检查顶部/任务管理器和性能监视器，以验证此实现是否确实影响了您的机器。

这篇文章似乎包含有关您尝试实现的有趣信息：http: [//www.ibm.com/developerworks/library/j-jtp0730/index.html](http://www.ibm.com/developerworks/library/j-jtp0730/index.html)

# opengl - 当块未绑定到索引时，GL_UNIFORM_BLOCK_BINDING

> ID：14323384
> 
> 赞同：0
> 
> 时间：2013-01-14T17:21:46.133
> 
> 标签：opengl, uniform

如果指定的统一块未绑定到任何绑定索引， `glGetActiveUniformBlock`with将返回什么？[http://www.opengl.org/sdk/docs/man4/xhtml/glGetActiveUniformBlock.xml](http://www.opengl.org/sdk/docs/man4/xhtml/glGetActiveUniformBlock.xml)说：`GL_UNIFORM_BLOCK_BINDING`

> 如果之前没有指定统一块，则返回零。

这是否意味着未绑定块将返回零？如果是，这是否意味着在程序链接后所有 unifrom 块默认绑定到零分箱索引？同样，如果是，那么我如何判断指定块是否绑定为零或从未绑定到任何索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:19:17.173

对于你的前两个问题，是的。

> 同样，如果是，那么我如何判断指定块是否绑定为零或从未绑定到任何索引？

你没有。话又说回来，这有什么用？您应该从代码或着色器中设置这些。在这两种情况下，您都知道设置了什么，因为您设置了它。除非您正在编写一些要求用户指定绑定的着色器工具，否则这无关紧要。

如果您正在编写这样的工具，那么只需向用户展示所有绑定是什么。如果多个统一块使用相同的索引，那么用户在解决冲突（或确认这是他们真正想要的）之前继续是非法的。

# javascript - 在页面调整大小时重新启动用户定义的 jquery 函数

> ID：14323389
> 
> 赞同：0
> 
> 时间：2013-01-14T17:21:54.963
> 
> 标签：javascript, jquery

我从以前的开发人员那里继承了一些代码，该开发人员现在无法联系上了。我试图让函数在调整页面大小时重新初始化，但似乎无法做到这一点。

我有点 jQuery 菜鸟，这没有帮助。

功能如下：

```
(function ($) {
    $.fn.setWidth = function (o) {
        var vWidth = $("#wrapper").outerWidth(false) - 40;
    };
})(jQuery); 
```

当页面调整大小时，我尝试了以下方法来重新初始化它，但目前没有任何反应。也不会产生错误。

```
$(window).resize(function() {
     $().setWidth();
}); 
```

任何指点将不胜感激。

-编辑-

抱歉，我应该指出 setWidth 函数中有更多代码，但我把它删掉了。我只是想让主函数在调整大小时重新初始化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:31:19.650

如果您有一个执行代码的函数`function pageResize(){`，那么`var vWidth = $("#wrapper").outerWidth(false)-40;`您可以在页面调整大小时调用它。

所以：

```
function pageResize(){
     var vWidth = $("#wrapper").outerWidth(false)-40;
}

$(window).resize(function() {
    pageResize();
}); 
```

# python - qt phonon - 返回视频尺寸

> ID：14323390
> 
> 赞同：0
> 
> 时间：2013-01-14T17:21:55.213
> 
> 标签：python, qt, video, pyside, phonon

谁能告诉我如何使用 Qt（或任何其他 Python 路由到该信息）返回视频的尺寸（像素高度/宽度）。我已经用谷歌搜索了它，找不到直接的答案。

我假设它要么是 mediaobject.metadata() 要么 os.stat() 但似乎都没有返回所需的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:30:12.583

令人惊讶的是，似乎没有提供这样做的功能（奇怪的遗漏），如果您需要获取视频的大小`sizeHint`，它只是建议调用。`Phonon::VideoWidget`有[Kaa Media 库](http://doc.freevo.org/api/kaa/)，它在元数据包中提供高度和宽度，我会说我从未使用过它们，但它们看起来应该为您提供所需的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:50:22.657

[MediaInfo](http://mediainfo.sourceforge.net/en)可能是您正在寻找的。它是一个带有 Python 和其他绑定的开源媒体库，可以获取您需要的任何媒体信息，包括视频宽度和高度。

我在 C++ 和 C# 中比在 Python 中更多地使用它，但是打开文件后获取视频宽度的调用类似于以下内容：

```
mediaInfo.Get(streamKind, id, "Width") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:05:18.813

好的 - 对于其他寻找相同信息的人，我找到了 Hachoir-metadata 和 Hachoir-parser (https://bitbucket.org/haypo/hachoir/wiki/Home)。

他们提供了正确的信息，但严重缺乏相关文档，而且我能找到的例子也不多。因此，虽然我已经解析了一个视频文件并为其返回了元数据，但我现在正努力以可用的格式“获取”该信息。不过，我不会被打败的！

# ios - UIScrollView 的 Frame 随机更改

> ID：14323392
> 
> 赞同：0
> 
> 时间：2013-01-14T17:22:02.697
> 
> 标签：ios, objective-c, xcode, uiscrollview, uitableview

在我看来，我使用的是由屏幕上半部分的 UITableViewController 控制的 UITableView。剩余的屏幕用于包含由主 UIViewController 控制的视图的 UIScrollView。

当我在 UITableViewController 中执行下拉刷新时，（由于某种原因，如果表条目的数量小于或大于初始加载值，则主 UIViewController 框架中的 UIScrollView 会更改为屏幕大小......

本质上它会破坏我的分页，除非我将滚动视图重置回初始化大小......

我不知道为什么会发生这种情况，因为 UITableViewController 中没有使用 UIScrollView。UITableViewController 中使用的唯一滚动视图是 UITableView 用于处理下拉刷新...

有谁知道为什么主 UIScrollView 的 contentSize 会随机更改，而它甚至不应该从 UITableViewController 类访问？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:46:33.683

刚刚在这里尝试过，我无法复制您的经验。我猜你有一个意外或不一致的视图/控制器层次结构？查看表格的控制器和滚动视图的公共超级视图。那里有什么鱼腥味吗？请记住：视图控制器管理视图*集*。容器视图控制器管理其他*视图控制器*并具有特殊规则（请参阅：[视图控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html)，尤其是`-addChildViewController:`等）。

我建议打开一个空白项目并尝试以最简单的形式重新创建问题。如果它被神奇地修复了，有什么不同？如果它仍然给您带来麻烦，请给我们发送一个链接，以便我们查看您如何连接的详细信息。

# ruby - 安装opencv GEM - extconf.rb 错误

> ID：14323398
> 
> 赞同：1
> 
> 时间：2013-01-14T17:22:21.280
> 
> 标签：ruby, opencv, extconf.rb

我已经坚持了几天了，所以请帮忙！

我运行 MAC OS X(10.7.5)，安装了 Xcode(4.5.2) 和命令行工具。红宝石 1.9.3-p362，RVM 1.17.8。apple-gcc42 也已安装。我使用 Homebrew 进行安装。

当我尝试安装 Opencv gem 时，出现以下错误：

```
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
--with-opt-dir
--with-opt-include
--without-opt-include=${opt-dir}/include
--with-opt-lib
--without-opt-lib=${opt-dir}/lib
--with-make-prog
--without-make-prog
--srcdir=.
--curdir
--ruby=/Users/samanthacabral/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
--with-opencv-dir
--without-opencv-dir
--with-opencv-include
--without-opencv-include=${opencv-dir}/include
--with-opencv-lib
--without-opencv-lib=${opencv-dir}/lib
--with-ffcall-dir
--without-ffcall-dir
--with-ffcall-include
--without-ffcall-include=${ffcall-dir}/include
--with-ffcall-lib
--without-ffcall-lib=${ffcall-dir}/lib
--with-cxcorelib
--without-cxcorelib
extconf.rb:32:in `block in <main>': libcxcore not found. (RuntimeError)
from extconf.rb:31:in `each'
from extconf.rb:31:in `<main>' 
```

我已经尝试过几次重新安装 RVM 并进行了类似问题中推荐的其他一些更改。

我的 gem 文件在没有 opencv gem 的情况下编译得很好，但是我在使用 RMagick 时遇到了类似的问题（显示 extconf.rb 错误）。

我应该怎么办？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-12T03:12:07.753

万一其他人遇到这种情况，我在 OS X 上遇到了更好的类似问题，并且在 ruby​​-opencv gem 上运气更好。

# susy-compass - 如何在 susy 中使用 rem？

> ID：14323400
> 
> 赞同：0
> 
> 时间：2013-01-14T17:22:25.860
> 
> 标签：susy-compass

阅读[本文](http://drublic.de/blog/rem-fallback-sass-less/)后，如何将*rem*与 susy 一起使用？

目前使用*ems*，但似乎*rem*是未来 :)

我还注意到在 v1.0.5 版本中支持*rem*，但我只是为了了解如何将它集成到我的网站中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T16:35:09.130

没什么。您所要做的就是更改您的设置。例如：

```
$column-width   : 4rem;
$gutter-width   : 1rem;
$grid-padding   : 1rem; 
```

如果您在任何地方创建了自定义数学，您可能会发现必须从 ems 切换到 rems 的其他地方。只需从网格设置开始，编译代码并追踪任何错误。

# symfony - Symfony2 - 修改异常控制器

> ID：14323407
> 
> 赞同：0
> 
> 时间：2013-01-14T17:22:43.433
> 
> 标签：symfony

我正在尝试在 Symfony 2 中创建自定义异常页面，并在[此处](http://symfony.com/doc/2.0/cookbook/controller/error_pages.html)和[此处](http://symfony.com/doc/2.0/reference/configuration/twig.html#config-twig-exception-controller)遵循 Symfony 2 指南。第二个链接说要修改找到的控制器`Symfony\\Bundle\\TwigBundle\\Controller\\ExceptionController::showAction`，但我只能在文件夹中找到该`vendor\symfony\symfony\src\Symfony\Bundle\TwigBundle\Controller`文件。据我了解，我永远不应该修改`vendors`文件夹中的任何内容。

我想知道`ExceptionController`我应该修改的位置在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:29:08.687

如果您需要覆盖 symfony 错误模板，请从

```
vendor/symfony/src/Symfony/Bundle/TwigBundle/Resources/views/Exception 
```

并将您想要自定义的那些放在 app/Resources/TwigBundle/views/Exception 目录中。然后根据需要进行定制。

如果要基于应用程序渲染模板，请参阅我的答案[@customize 403 error page depening on route in symfony 2.0](https://stackoverflow.com/questions/14282690/customize-403-error-page-depening-on-route-in-symfony-2-0/14286165)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T23:24:55.300

如果您只需要更改错误页面的布局，那么创建文件就`app/Resources/TwigBundle/views/Exception`足够了。

但是，如果您需要将其他参数传递给错误页面，则应覆盖默认值`ExceptionController`。为此，您应该创建一个扩展默认控制器的新控制器：

```
use Symfony\Bundle\TwigBundle\Controller\ExceptionController;
class MyExceptionController extends ExceptionController {
    //override the showAction() or findTemplate() method here
} 
```

然后你需要告诉 symfony 使用你的新控制器。这可以通过在`parameters.yml`文件中添加新参数来完成：

```
parameters:
    twig.controller.exception.class: YourBundle\Controller\MyExceptionController 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T07:17:53.333

对我来说不是

```
parameters:
twig.controller.exception.class: YourBundle\Controller\MyExceptionController 
```

但

```
parameters:
twig.controller.exception.class: YourNamespace\YourBundle\Controller\MyExceptionController 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-29T17:20:14.070

使用 Symfony 4 你需要这个：

```
class TwigExceptionControllerCompilerPass implements CompilerPassInterface
{
    public function process(ContainerBuilder $container)
    {
        $definition = $container->getDefinition('twig.controller.exception');
        $definition->setClass(TwigExceptionController::class);
    }
} 
```

# c# - IIS 6“超出最大请求长度。” 在 Global.asax 之前触发

> ID：14323411
> 
> 赞同：1
> 
> 时间：2013-01-14T17:23:07.723
> 
> 标签：c#, asp.net

> **可能重复：**
> [超出最大请求长度](https://stackoverflow.com/questions/3853767/maximum-request-length-exceeded)

我正在使用 IIS 6 来托管我的 Asp.net 站点。我有

> “超出最大请求长度。”

错误。我在 IIS 7 上修复了它，但在 IIS 6 上，在进入`Global.asax`Application_Error 之前触发了 Asp.net 错误。我只是重定向到`Application_Error`. 请让我知道我在这里缺少什么。

**这是我在 IIS 7 webconfig 中使用的修复程序**

```
<system.webServer>
<security>
  <requestFiltering>
    <requestLimits maxAllowedContentLength="100000" />
  </requestFiltering>
</security>
<httpErrors errorMode="Custom" existingResponse="Replace">
  <error statusCode="404" subStatusCode="13" prefixLanguageFilePath="" path="UploadError.aspx" responseMode="Redirect" />
</httpErrors> 
```

上面的解决方案不适用于 IIS 6！我需要`Application_Error`在`Global.asax`. 之前没有触发`Maximum request length exceeded.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:30:12.797

这是一个副本： [超过最大请求长度](https://stackoverflow.com/questions/3853767/maximum-request-length-exceeded)

此线程包含 IIS6 和 IIS7 处理最大请求长度异常的解决方案

要重定向到自定义错误页面，请在您的 Web.Config 中使用以下内容：

```
<configuration>
...

    <system.web>
        <customErrors mode="RemoteOnly"
                  defaultRedirect="~/ErrorPages/Oops.aspx" />

    ...
    </system.web>
</configuration> 
```

其中“~/ErrorPages/Oops.aspx”是错误页面的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:41:59.747

除了`security`块之外，您还需要更改`system.web\httpRuntime`具有`maxRequestLength`属性的块。

```
 <httpRuntime maxRequestLength="8192" /> 
```

更多[关于 msdn](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.71%29.aspx)

# asp.net-mvc-3 - 是否可以将敲除属性绑定到选项 datepickerOptions

> ID：14323417
> 
> 赞同：0
> 
> 时间：2013-01-14T17:23:37.520
> 
> 标签：asp.net-mvc-3, knockout.js

[http://jsfiddle.net/jmogera/g9cNL/1/](http://jsfiddle.net/jmogera/g9cNL/1/)

我已经发布了这个例子来说明我正在尝试做的事情。我基本上想用敲除属性绑定到 datapickeroptions。我想更改 minDate，因为某些标志设置为 true。

```
<input data-bind="datepicker: myDate, datepickerOptions: { minDate: date }" />

var viewModel = {
    date: ko.observable(new Date()),
    myDate: ko.observable(new Date("09/01/2011")),
    setToCurrentDate: function() {
        this.myDate(new Date());
    }
}; 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:26:11.453

是的。

在自定义绑定中使用只需使用 allBindingAccessor

```
var allBindings = allBindingAccessor();
var dateOptions = allBindings.datePickerOptions;
var minDate = dateOptions.minDate; 
```

# android - 协作开发工具

> ID：14323425
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:24:14.430
> 
> 标签：android, collaboration

我自己开发了应用程序，但现在我正在和一个伙伴一起工作。

多人在同一个项目上工作并提交更改的最佳方式是什么？

如果没有第三方服务器，这可能吗？他们的 Eclipse 插件可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:03:28.233

有很多工具可以让您完成此任务。

subversion、mercurial、Git等版本控制软件都会完成这个任务。Git 目前是这三者中最受欢迎的。

根据您是否关心代码的私密性，最简单的前进路径是在 GitHub（私人 repo 的成本）或 BitBucket（允许免费帐户的私人 repos）上创建一个存储库。

如果您不想涉及第 3 方，则需要在您和您的合作者都可以访问的计算机上设置存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:29:36.780

## 第三方方法

*BitBucket*是 Git 和 Mercurial 的在线托管站点，它还提供托管 wiki、问题跟踪器和源代码。但是您要求一种没有第三方的方法（我认为这是完全合理的）所以这里有一些指示

## 自己做

*   *对于版本控制：* Git。“Bare Repositories”允许您与服务器共享代码，就像通过共享网络目录一样简单。
    *但是：* Git 相当复杂。您可能需要 VisualSVN，它是一个简单的 GUI 驱动的 Subversion-Server，能够在您的一台 PC 上运行。
*   *对于问题跟踪：* JIRA 提供了一个 10 美元的版本，与 Bamboo 等其他有用的工具捆绑在一起。
*   *A Wiki for Documentation：*这里有很多选项。
*   *Turnkey Redmine*是一个虚拟设备（可下载的虚拟机映像）。只需在VirtualBox 中下载并运行ie，即可在短时间内快速获得*版本控制、问题跟踪、Wiki 等服务*。

# sql - SQL group by 和 count 固定列值

> ID：14323426
> 
> 赞同：5
> 
> 时间：2013-01-14T17:24:35.023
> 
> 标签：sql, count, group-by

我在 SQL(MySQL) 中的数据导入脚本中遇到问题，我需要按类型对行进行分组以计算每种类型有多少行。到目前为止，这并不是一个真正的问题，因为我知道我可以做到：

```
SELECT 
  data.type, 
  COUNT(data.type) 
FROM data 
GROUP BY data.type; 
```

因此，通过这样做，我得到了结果：

```
-------------- ---------
| 类型 | 计数（数据类型）|
|--------------|----------|
| 0 | 1 |
| 1 | 46 |
| 2 | 35 |
| 3 | 423 |
| 4 | 64 |
| 5 | 36 |
| 9 | 1 |
 -------------- ---------

```

我知道在**类型**列中，值将始终在 0 到 9 的范围内，就像上面的结果一样。因此，我不仅想列出表内容中的现有值，还想列出缺失的**类型**值，并将它们的 COUNT 值设置为 0。

根据上述查询结果，预期结果为：

```
-------------- ---------
| 类型 | 计数（数据类型）|
|--------------|----------|
| 0 | 1 |
| 1 | 46 |
| 2 | 35 |
| 3 | 423 |
| 4 | 64 |
| 5 | 36 |
| 6 | 0 |
| 7 | 0 |
| 8 | 0 |
| 9 | 1 |
 -------------- ---------

```

我可以在 GROUP/COUNT-1 表内容之前巧妙地插入每种类型的一行，在 INSERT 上标记其他列以便能够在之后删除这些行。因此，我的导入脚本的步骤将更改为：

1.  **TRUNCATE**表；（如果表中有旧数据，我无法安全导入新内容）
2.  **插入**“控制”行；
3.  **将数据文件加载到表中**；
4.  **GROUP/COUNT-1**表格内容；
5.  **删除**“控制”行；（所以我仍然可以使用表格内容）
6.  做任何**其他工作**；

但是，我正在寻找一种更清洁的方法来达到预期的结果。如果可能，单个查询，没有一堆 JOIN。

我将不胜感激任何建议或意见。非常感谢你！

# 编辑

我要感谢有关创建表以存储所有类型以加入它的答案。它确实解决了问题。我的方法也解决了它，但它是否像您一样存储类型。

所以，我有“另一个”问题，只是一个澄清，基于收到的答案和我想要的范围......是否有可能使用一些不会创建新表和/或插入这些类型的 MySQL 命令达到预期结果?

实际上，在解决存储类型的问题时，我看不到任何问题...我只想找到一个简化的命令...类似于“最佳实践”...某种过滤器...作为我可以运行：

```
GROUP BY data.type(0,1,2,3,4,5,6,7,8,9) 
```

它可以返回这些过滤后的值。

如果它真的存在/可能的话，我真的很想学习这样的命令。

再次，非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:28:24.017

假设您有一个`types`包含所有有效类型的表：

```
SELECT t.type, 
       COUNT(data.type) 
FROM data join types t on data.type = t.type
GROUP BY t.type
order by t.type 
```

您应该包括显式`order by`而不是依赖于`group by`以特定顺序产生结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:28:59.397

最简单的方法是创建一个包含所有`type`值的表，然后在获取计数时加入该表：

```
select t.type,
  count(d.type)
from types t
left join data d
  on t.type = d.type
group by t.type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8bb86/2)

或者，您可以使用以下内容：

```
select t.type,
  count(d.type)
from
(
  select 0 type
  union all
  select 1 
  union all
  select 2
  union all
  select 3
  union all
  select 4
  union all
  select 5 
  union all
  select 6
  union all
  select 7
  union all
  select 8
  union all
  select 9 
) t
left join data d
  on t.type = d.type
group by t.type 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8bb86/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:32:34.180

一种选择是使用值为 0-9 的静态数字表。不确定这是否是最优雅的方法，如果您使用的是 SQL Server，我可以考虑另一种方法。

尝试这样的事情：

```
SELECT 
  numbers.number, 
  COUNT(data.type) 
FROM numbers 
left join data 
  on numbers.number = data.type
GROUP BY numbers.number; 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!3/117ea/2)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-22T17:15:30.910

好吧...我想我找到了！谢谢你们！！！我接受我自己的答案。

我同意@GordonLinoff 评论，即最佳实践是指存储**类型**值并描述它们，因此您可以保持简洁/可理解的数据库和查询。

但是，据我所知，如果您有一些可能是无关信息的数据，最好以其他方式处理它而不是存储它。

所以，我开发了这个查询：

```
SELECT 
  SUM(IF(data.type = 0, 1, 0)) AS `0`, 
  SUM(IF(data.type = 1, 1, 0)) AS `1`, 
  SUM(IF(data.type = 2, 1, 0)) AS `2`, 
  SUM(IF(data.type = 3, 1, 0)) AS `3`, 
  SUM(IF(data.type = 4, 1, 0)) AS `4`, 
  SUM(IF(data.type = 5, 1, 0)) AS `5`, 
  SUM(IF(data.type = 6, 1, 0)) AS `6`, 
  SUM(IF(data.type = 7, 1, 0)) AS `7`, 
  SUM(IF(data.type = 8, 1, 0)) AS `8`, 
  SUM(IF(data.type = 9, 1, 0)) AS `9` 
FROM data; 
```

不是一个更快、优化和美观的查询，但对于我将管理的数据大小（每次导入少于 100.000 行），它“手动”执行 GROUP/COUNT 工作，在普通开发人员机器上运行 0.13 秒。

它与我的预期结果不同，只是在选择行和列的方式上——而不是 10 行和 2 列，我有 1 行和 10 列，标有匹配类型。此外，由于我们对**类型**值进行了标准化（并且我们肯定不会更改它），它给它一个名称和描述，我现在可以使用类型名称作为列标签，而不是加入到带有类型信息的表以在结果中选择第三列（这实际上并不重要，因为它是基于某些标准的导入脚本）。

非常感谢大家的帮助！

# django - Django memcashed 不缓存页面

> ID：14323428
> 
> 赞同：0
> 
> 时间：2013-01-14T17:24:43.697
> 
> 标签：django, memcached

好的，这就是我到目前为止所做的。

1.  通过 pip install 安装了 memcached。
2.  将此添加到 settings.py

> ```
>  CACHES = {
>     'default': {
>         'BACKEND': 'django.core.cache.backends.memcached.MemcachedCache',
>         'LOCATION': '127.0.0.1:11211', 
>     }
>   } 
> ```

1.  `@cache_page(60*15)`然后在我想要缓存的视图上放置一个装饰器，但没有任何改变。如果我将时间放在页面上，它会在每次刷新时更新，如果我通过表单向页面添加内容，它也会在添加后立即出现......基于该信息，我得出结论它不会缓存页面。

基本上我的解析器每 3 小时添加一次新信息，所以我需要在 3 小时内兑现 1 次，就在解析器将所有数据插入数据库之后。还没想好怎么做，因为即使是简单的 @cache_page 也不起作用。

**也许我在配置 memcached 时搞砸了？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:27:52.957

memcached 服务器需要安装在您的操作系统上。我认为 pip 包只是客户

# php - PHP 从循环切换

> ID：14323430
> 
> 赞同：0
> 
> 时间：2013-01-14T17:25:02.370
> 
> 标签：php, while-loop, switch-statement

我从查询中循环访问数据库。此循环显示对象名称列表并将对象值设置为单选值。

我有的是一张桌子。一旦单击单选按钮，它应该显示查询信息的重置。对象大约有 1,100 个对象，并且在不断变化。

我不确定如何获取所选单选按钮的值并将其分配给名为 "$ObjIndex" 的变量，$ObjIndex 将定义 $myQ9 将如何运行注意：如果我输入 $ObjIndex = '1407' 它工作正常; （这是对象索引值之一。

这是我的代码：

```
<form name="myform" actiopn="<?php $_PHP_SELF ?>" method="get">  
<?php 
$myQ1 = mysql_query("SELECT `iDocuments`.`File`.`FileIndex`, `iDocuments`.`File`.`FileName`, `iDocuments`.`Object`.`ObjectIndex`, `iDocuments`.`Object`.`ObjectName`, `iDocuments`.`Version`.`Version`, `iDocuments`.`File`.`UploadDate` FROM `iDocuments`.`Version` INNER JOIN `iDocuments`.`Object` ON `iDocuments`.`Object`.`ObjectIndex` = `iDocuments`.`Version`.`ObjectIndex` JOIN `iDocuments`.`File` ON `iDocuments`.`Version`.`FileIndex` = `iDocuments`.`File`.`FileIndex` WHERE `Object`.`ObjectStatus` = '1' AND `Version`.`Version` = ( SELECT MAX(`Version`) FROM `iDocuments`.`Version` WHERE `Version`.`ObjectIndex` = `Object`.`ObjectIndex` ) ORDER BY `Object`.`ObjectName` ASC");
if (!$myQ1) 
   {  
      echo 'Could not run query 1: ' . mysql_error(); 
   } 
else 
   { 
  $row1 = mysql_query($myQ1);

while( $row1 = mysql_fetch_array($myQ1) ) 
{
 echo "<td><input type='radio' name='tog' id='tog' onClick='gtdoc()'  value='$row1[2]'>$row1[3]</input></td></tr>";
}

$myQ9 = mysql_query("SELECT `iDocuments`.`File`.`FileIndex`,   `iDocuments`.`File`.`FileName`, `iDocuments`.`Object`.`ObjectIndex`, `iDocuments`.`Object`.`ObjectName`, `iDocuments`.`Version`.`Version`, `iDocuments`.`File`.`UploadDate` FROM `iDocuments`.`Version` INNER JOIN `iDocuments`.`Object` ON `iDocuments`.`Object`.`ObjectIndex` = `iDocuments`.`Version`.`ObjectIndex` JOIN `iDocuments`.`File` ON `iDocuments`.`Version`.`FileIndex` = `iDocuments`.`File`.`FileIndex` WHERE `Object`.`ObjectStatus` = '1' AND `Version`.`Version` = ( SELECT MAX(`Version`) FROM `iDocuments`.`Version` WHERE `Version`.`ObjectIndex` = `Object`.`ObjectIndex` ) AND `Object`.`ObjectIndex` = '$ObjIndex'");
if (!$myQ9) 
   {  
      echo 'Could not run query 9: ' . mysql_error(); 
   }
else 
   { 
      $row9 = mysql_query($myQ9);

while( $row9 = mysql_fetch_array($myQ9) ) 
   {
      echo "<table name='doclist'>           
  <tr><td>FileID</td><td><input name='DocFileID' type='text' readonly='true' value='$row9[0]'></input></td></tr> 
  <tr><td>File Name</td><td><input name='DocFileName' type='text' readonly='true' value='$row9[1]'></input></td></tr> 
  <tr><td>ObjectID</td><td><input name='DocID' type='text' readonly='true' value='$row9[2]'></input></td></tr>  
  <tr><td>Object Name</td><td><input name='DocName' type='text' readonly='true' value='$row9[3]'></input></td></tr>  
  <tr><td>Current Version</td><td><input name='CurrVer' type='text' readonly='true' value='$row9[4]'></input></td></tr>
  <tr><td>Update Date</td><td><input name='lstupdate' type='text' readonly='true' value='$row9[5]'></input></td> </tr>
  </table>";
 }
} ?>
</form> 
```

# html - 使用 CSS 将链接到文本短语的符号放置到文档的边缘

> ID：14323434
> 
> 赞同：0
> 
> 时间：2013-01-14T17:25:30.657
> 
> 标签：html, css, css-float, margin, css-position

我正在寻找一种在 CSS 中将符号放入文档边缘的方法，以突出显示/指示文档文本正文中某些特殊短语的位置。想想编程 IDE 中常见的文本编辑器，它们会在包含错误的行旁边的空白处放置小的警告图标。

如果文档由未换行的单行组成，这很容易做到。然后我可以检查该行是否需要该符号并手动放置它。

但是，例如，如果我想在浏览器自动换行的文档中放置一个拼写错误图标，那就很棘手了。然后我必须有办法找出拼写错误最终出现在哪一行。通过检查标记拼写错误的一些包装跨度的 y 坐标，JS 可能也可以做到这一点，但我正在寻找更优雅的东西。

是否有一些关于左浮动或绝对定位的技巧，例如，我可以将此标记符号放入标记错误的跨度中，并将其放置在文档的左边距而不是跨度的边界内?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:33:19.330

其实答案和你描述的*完全一样。*让跨度包裹您的文本，并在跨度内包含一个图标元素。然后将其向左浮动，并在其上设置负边距。例子：

CSS：

```
.icon {
  display: inline-block;
  width: 10px;
  height: 10px;
  background: blue;
  float: left;
  margin-left: -15px;
  margin-top: 5px;
} 
```

标记：

```
<span class="selected"><span class="icon"></span>this is some text in a span. </span> 
```

工作示例：http: [//jsfiddle.net/FQCsn/](http://jsfiddle.net/FQCsn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:48:04.427

`position: absolute`我认为在伪元素的上下文中也有一个应用程序`:before`。试试这个，看看它是否能给你你想要的东西：

```
<html>
<head>
<title>Lorem Ipsum</title>
<style>
.allowLeftMargin
    {
        margin-left: 5em;
    }
.highlightThis
    {
        background-color: yellow;
    }
.highlightThis:before
    {
        background-color: yellow;
        content: "Note";
        padding-left: 0.25em;
        padding-right: 0.25em;
        position: absolute;
        left: 1em;
    }
</style>
</head>
<body>
<div class="allowLeftMargin">
    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,
    sed do eiusmod tempor incididunt ut labore et dolore magna
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation
    ullamco laboris nisi ut aliquip ex ea commodo consequat.
    Duis aute irure dolor in reprehenderit in voluptate velit
    esse cillum dolore eu fugiat nulla pariatur.
    <span class="highlightThis">Excepteur sint occaecat</span>
    cupidatat non proident, sunt in culpa qui officia deserunt
    mollit anim id est laborum.</p>
</div>
</body>
</html> 
```

您可以快速调整浏览器窗口的大小，以确认音符随着突出显示的跨度移动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:40:10.357

您可以做的是在拼写错误周围加上一个强项，在该拼写错误之后添加另一个标签（例如跨度），并将该跨度设置为位置：绝对，但没有“顶部”属性（因为顶部位置是多变的）。将该跨度设置为 width: 100% 以“选择”该行，并在该跨度内添加另一个标签（为方便起见，使用 ai 标签），并使用它来放置您的图标。

```
p{ line-height:20px; margin:20px;}
strong{ color:red;}
span{ display:block; height:20px; left:0; position:absolute; width:100%;}
i{ background:red; display:block; height:12px; left:0; position:absolute;
top:-16px; width:12px;} 
```

示例：http: [//jsfiddle.net/fwZqv/1/](http://jsfiddle.net/fwZqv/1/)

尝试更改“结果”窗口的宽度并查看其行为。

这不是一个完美的解决方案，我宁愿使用 JS 来解决这个问题。

# java - 使用 Jsoup 替换标签内的文本

> ID：14323443
> 
> 赞同：1
> 
> 时间：2013-01-14T17:26:12.343
> 
> 标签：java, android, html, parsing, jsoup

```
<table width="100%" border="0" cellpadding="0" cellspacing="1" class="table_border" id="center_table">
<tbody>
<tr>
<td width="25%" class="heading_table_top">S. No.</td>
<td width="45%" class="heading_table_top">
Booking Status (Coach No , Berth No., Quota)
</td>
<td width="30%" class="heading_table_top">
* Current Status (Coach No , Berth No.)
</td>
</tr>
</tbody>
</table> 
```

我废弃了一个网页并将响应存储在一个字符串中。

然后我将其解析为 jsoup doc

```
Document doc = Jsoup.parse(result); 
```

然后我使用

```
Element table=doc.select("table[id=center_table]").first(); 
```

现在我需要使用 jsoup 将标签“预订状态（教练号，泊位号，配额）”中的文本替换为“预订状态”。有人可以帮忙吗？

我试过了

```
 table.children().text().replaceAll(RegEx to select the text?????, "Booking Status"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:12:23.313

```
 Elements tds=doc.select("table[id=center_table] td");  // select the tds from your table
        for(Element td : tds) {  // loop through them
            if(td.text().contains("Booking Status")) {  // found the one you want
                td.text("Booking Status");          // Replace with your text
            }
        } 
```

然后您可以使用`doc.toString()`将 HTML 的文本返回以保存到磁盘、发送到 webView 或您想要对其进行的任何其他操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:44:22.870

```
Elements tablecells=doc.select("table tbody tr td"); 
```

会给你3个细胞。使用循环来获取每个元素

```
Element e=Elements.get(int index); 
```

使用`e.text()`获取字符串。

比较或替换字符串`String.equals() , String.contains(), String.replace()`

# c - 入侵者探测器 - OpenCv - C

> ID：14323445
> 
> 赞同：0
> 
> 时间：2013-01-14T17:26:12.767
> 
> 标签：c, opencv

我正在使用 C 和 OpenCV 做“照片”处理应用程序。我的电脑会使用网络摄像头不断地观察周围环境。当它检测到移动时，它将当前的网络摄像头图像写入文件（通知）。这就是我编写代码的方式，但是它很慢，我不擅长通知......你能给我一些关于代码的好建议吗？

```
#include <stdio.h>  
#include "cv.h"
#include "highgui.h"
#include <dos.h>
#include <conio.h>

CvCapture   *capture;
int key;

IplImage *oldFrame;
IplImage *currentFrame;
IplImage *res;

int f=0,x,y,idx,idy;

int currentFrame_width, currentFrame_height;
int oldFrame_width, oldFrame_height;
int res_width, res_height;

int main( int argc, char** argv )
{   
    while( key != 'q' ) 
    {

           capture = cvCaptureFromCAM( 0 );
           if( !capture ) return 1;
           key = cvWaitKey( 1 );
           cvNamedWindow( "FrameController", CV_WINDOW_AUTOSIZE );

           if(f==0){

                    oldFrame = cvQueryFrame( capture );
                    cvShowImage( "FrameController", oldFrame );
                    f=1;
           }
           else{    
                    CvMemStorage* storage = cvCreateMemStorage(0);
                    currentFrame = cvQueryFrame( capture );
                    for  ( x=0;x<currentFrame->width;x++) 
                    { 
                      for ( y=0;y<currentFrame->height;y++) 
                      { 
                           idx = y*currentFrame->widthStep + currentFrame->nChannels*x; 
                           idy = y*oldFrame->widthStep + oldFrame->nChannels*x; 
                      }
                    }
                    uchar R= (uchar) currentFrame->imageData [idx+0];   
                    uchar G = (uchar) currentFrame->imageData [idx+1]; 
                    uchar B = (uchar) currentFrame->imageData [idx+2]; 
                    uchar R1= (uchar) oldFrame->imageData [idy+0];   
                    uchar G1 = (uchar) oldFrame->imageData [idy+1]; 
                    uchar B1 = (uchar) oldFrame->imageData [idy+2]; 

                    if(!((R==R1) || (G==G1) || (B==B1))){

                      f=0;
                      CvHaarClassifierCascade* cascade = (CvHaarClassifierCascade*)cvLoad( "C:\\OpenCV2.1\\data\\haarcascades\\haarcascade_frontalface_alt2.xml" );
                       double scale = 1.3;
                                         static CvScalar colors[] = {CV_RGB(rand()&255, rand()&255, rand()&255 )};

                                         cvClearMemStorage( storage );
                                         CvSeq* objects = cvHaarDetectObjects( currentFrame, cascade, storage, 1.1, 4, 0, cvSize( 40, 50 ));
                                         CvRect* r;

                                          for( int i = 0; i < (objects ? objects->total : 0 ); i++ ){
                                                r = ( CvRect* )cvGetSeqElem( objects, i );
                                                cvRectangle( currentFrame, cvPoint( r->x, r->y ), cvPoint( r->x + r->width, r->y + r->height ),
                                                colors[i%8]);
                                                cvShowImage( "FrameController", currentFrame );
                                          } 
                        }
           }
    }

    cvDestroyWindow( "FrameController" );   
    cvReleaseCapture( &capture );
    cvReleaseImage( &currentFrame);
    cvReleaseImage( &oldFrame);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:39:58.180

似乎您在 while 循环中进行了不必要的初始化。例如

```
capture = cvCaptureFromCAM( 0 ); << is that necessary to be in the loop?
cvNamedWindow( "FrameController", CV_WINDOW_AUTOSIZE ); << this?

for  ( x=0;x<currentFrame->width;x++) 
                    { 
                      for ( y=0;y<currentFrame->height;y++) 
                      { 
                           idx = y*currentFrame->widthStep + currentFrame->nChannels*x; 
                           idy = y*oldFrame->widthStep + oldFrame->nChannels*x; 
                      }
                    } << that's a loop over the WHOLE IMAGE that does NOTHING. 
```

存储是做什么用的？

希望这有助于您清理代码。

# python - 通过比较两个外键来过滤 django 模型

> ID：14323450
> 
> 赞同：0
> 
> 时间：2013-01-14T17:26:28.717
> 
> 标签：python, django, foreign-keys

我需要通过相互比较两个外键来在 Django 中创建一个过滤器。双下划线语法仅适用于等式的左侧。因此，右侧的任何内容都会引发错误：

```
match = UserProfile.objects.filter(
    user__date_joined__gte = group__date
) 
```

Django（或此处的python）不会将 group_ *date 解释为可解析的变量名，并抱怨它没有定义。我可以切换变量，然后用户*_date_joined 将是未定义的。（这里的变量名只是一个例子）

我想要实现的在 SQL 中看起来像这样：

```
SELECT * FROM profile p, user u, group g WHERE
    p.u_id = u.id AND
    u.group_id = g.id AND
    u.date_joined >= g.date 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T17:53:03.497

您将不得不使用[F() 表达式](https://docs.djangoproject.com/en/dev/topics/db/queries/#django.db.models.F)来执行此操作

```
from django.db.models import F

match = UserProfile.objects.filter(user__date_joined__gte = F('group__date')) 
```

# sql - 从多个表中选择具有sqlite中公共字段的行

> ID：14323457
> 
> 赞同：0
> 
> 时间：2013-01-14T17:26:53.863
> 
> 标签：sql, sqlite

我有一张如下表：

创建表table1（id整数，名字文本，姓氏文本）；

### id 名字 姓氏

====================
1 本·泰勒
2 抢劫·泰勒
3 抢劫·史密斯
4 抢劫僵尸
5 彼得·史密斯
6 本·史密斯
7 彼得·泰勒

现在我有另一个表 create table table2(id integer,position integer);

### 身份位置

===========
1 5
1 9
2 6
3 7
6 2

我想选择带有 lastname 的行，其中 lastname 必须由 ben 和 rob 共享，firstnames 必须是 ben 和 rob。
现在我还希望 ben 的位置比 rob 的位置小一，因此结果将是：

### id 名字 姓氏 位置

============================
1 本泰勒 5
2 抢泰勒 6

sql查询应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:34:12.337

要获取姓氏：

```
select lastname
from names n join
     position p
     on n.id = p.id
where firstname in ('ben', 'rob')
group by lastname
having count(distinct firstname) = 2 and
       1+max(case when firstname = 'ben' then p.position end) = max(case when firstname = 'rob' then p.position end) 
```

然后，您可以通过以下方式获取原始列表：

```
select n.*, p.position
from names n join
     position p
     on n.id = p.id
where firstname in ('ben', 'rob') and
      lastname in (select lastname
                   from names n join
                        position p
                        on n.id = p.id
                   where firstname in ('ben', 'rob')
                   group by lastname
                   having count(distinct firstname) = 2 and
                          1+max(case when firstname = 'ben' then p.position end) = max(case when firstname = 'rob' then p.position end)
                  ) 
```

我认为以下查询回答了您的问题，但需要注意的是，这会将名称组合成一行：

```
select nben.*, p.position, nrob.*, prob.position
from names nben join
     positions p
     on nben.id = p.id and
        nben.firstname = 'ben' join
     names nrob
     on nrob.firstname = 'rob' and
        nrob.lastname = nben.lastname join
     positions prob
     on nrob.id = prob.id and
        p.position = prob.position - 1 
```

此外，这是未经测试的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:25:58.797

这给了我需要从 Gordon Linoff 的解决方案中获得的结果：
select * from(select n.*, p.position
from names n join
position p
on n.id = p.id
where firstname in ('ben', 'rob' ) 和
lastname in (select lastname
from names n join
position p
on n.id = p.id
where firstname in ('ben', 'rob')
group by lastname with
count(distinct firstname) = 2

```
 )
         ) 
```

as x,names,position
where
(x.id!=names.id and names.id=position.id and names.lastname=x.lastname
and (x.firstname='rob' and names.firstname='ben')和 x.position=position.position+1)
或
(x.id!=names.id and names.id=position.id and names.lastname=x.lastname
and (x.firstname='ben' and names.firstname ='rob') 和 x.position+1=position.position)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-15T04:49:47.187

Gordon Linoff 的解决方案：
select nben.*, p.position
from names nben join
position p
on nben.id = p.id and
nben.firstname = 'ben' join
names nrob
on nrob.firstname = 'rob' and
nrob.lastname = nben.lastname 在 nrob.id = prob.id 和p.position = prob.position 上加入
位置概率 - 1 给出与以下相同的结果：

select * from(select n.*, p.position
from names n join
position p
on n.id = p.id
where firstname in ('ben', 'rob') and
lastname in (select lastname
from names n join
position p
on n.id = p.id
where firstname in ('ben', 'rob')
group by lastname with
count(distinct firstname) = 2

```
 )
     ) 
```

as x,names,position
where (x.id!=names.id and names.id=position.id
and names.lastname=x.lastname
and (x.firstname='ben' and names.firstname='rob')
和 x.position+1=position.position)

# java - 用于创建输入文件标记的扫描程序类

> ID：14323458
> 
> 赞同：2
> 
> 时间：2013-01-14T17:27:01.013
> 
> 标签：java, java.util.scanner, stringtokenizer

我在java中编写了以下代码来打开另一个`.java`文件并创建令牌（使用扫描仪类）

```
import java.io.FileReader;
import java.util.Scanner;

public class scanner1 {
    public static void main(String[] arg) throws Exception
    {
        FileReader fin = new FileReader("mysourcefile.java");
        Scanner scan=new Scanner(fin);
        scan.useDelimiter(" ");   // the delimiter pattern required
        while(scan.hasNext()) {
            System.out.println(scan.next());
        }
    }
} 
```

我的任务是创建完整`Java`文件的标记，并且分隔符也应该被视为标记。

那么在这里使用的分隔符模式应该是什么`scan.useDelimiter("")`？

**更新：**

上述任务是使用 stringtokenizer 完成的。但我不知道为`.java`文件创建标记的分隔符的确切模式。我可以回答在给定情况下使用什么分隔符模式吗？

```
import java.util.*;
public class sstring2
{
    public static void main(String[] args)
    {
        String s = "a=(b+c); String st='hello! my dear';";
        StringTokenizer st = new StringTokenizer(s, "[ =+';().*{}[],!@#$%^&/]", true);
        while(st.hasMoreTokens()){
            System.out.println(st.nextToken());
        }
    }
} 
```

这段代码给出了正确的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:29:24.450

它可以是您要终止输入的任何字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:20:05.437

Take a look at the java.lang.instrument packagae. It provides some nice APIs to transform an already loaded class. The retransformation allows to change method bodies as in your case. Here's the [link](http://docs.oracle.com/javase/6/docs/technotes/guides/instrumentation/changes6.html)

# cakephp - CakePHP 和翻译行为

> ID：14323461
> 
> 赞同：0
> 
> 时间：2013-01-14T17:27:13.837
> 
> 标签：cakephp, internationalization, cakephp-2.0

我是一名法国开发人员，很抱歉我的英语不好。

在我的网站上插入多种语言的数据时出现问题。我说我的 i18n 表是从控制台创建的，并以它可以工作的单一语言插入！

这是错误：

**数据库错误**

错误：SQLSTATE [42S22]: Column not found: 1054 Unknown column 'Array' in 'field list' SQL Query: INSERT INTO `` expandingCakePHP. Accesses`( `name`) VALUES (Array) 注意：如果要自定义此错误消息，请创建应用程序/视图/错误/pdo_error.ctp

我的 admin_add.ctp（文件查看/访问）

```
foreach (Configure :: read ('Config.languages​​') as $lang) {
echo $this-> Form-> input ('Access.name.'. $lang, array ('label' => __ ('Name'). '(. $lang.') '));
} 
```

我的 access.php（模型文件）

```
var $actsAs = array (
   'Translate' => array (
      'name' => '_name'
   )
); 
```

我的 AccessesController.php（控制器文件夹）

```
admin_add public function () {
   if ($this-> request-> is ('post')) {
      $this-> Access-> create ();
      $this-> Access-> locale = Configure :: read ('Config.languages​​');
      if ($this-> Access-> save ($ this-> request-> data)) {
         $this-> Session-> setFlash (__ ('The access has been saved'), 'notif');
         $this-> redirect (array ('action' => 'index'));
      }
      else {
         $this-> Session-> setFlash (__ ('The Access Could not be saved. Please, try again.'), 'notif', array ('type' => 'alert-error'));
      }
   }
} 
```

在我的 bootstrap.php （配置文件）

```
Configure :: write ('Config.languages​​', array ('eng', 'eng'));
Configure :: write ('Config.language', 'eng');
Configure :: write ('App.encoding', 'utf-8'); 
```

邮寄表格收到的结构是否正确？/app/Controller/AccessesController.php（第46行）

```
array (
   'Access' => array (
      'name' => array (
         'eng' => 'title',
         'eng' => 'title'
      )
   )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-25T01:20:22.897

用这个

```
 $this->Model->save($this->request->data,false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-06T09:33:30.173

请用`$this->Model->saveAll($this->request->data);`

代替`$this->Model->save($this->request->data);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:52:12.897

帖子结构似乎错误，例如参见[http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)

它应该更像：

```
array (
   'Access' => array (
      'name' => 'a name',
      'title' => 'a title',
      'another model' => array(...)
      )
   )
) 
```

# .htaccess - .htaccess 从用户重定向到新的子域

> ID：14323462
> 
> 赞同：0
> 
> 时间：2013-01-14T17:27:18.343
> 
> 标签：.htaccess, redirect

我正在尝试将一个看起来像这样的网站的所有链接重定向：www.domain.com/~me 到 subdomain.newdomain.org/。我只能访问 domain.com 上我的子文件夹下的 .htaccess 文件，而不是根 .htaccess 文件。我可以得到它，以便将 www.domain.com/~me/page2.html 之类的链接重定向到根 subdomain.newdomain.org 或 subdomain.newdomain.org/~me/page2.html，但我不能弄清楚如何访问 subdomain.newdomain.com/page2.html。任何帮助将不胜感激。（理想情况下，用户仍会看到 www.domain.com/~me，但这并非完全必要。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:48:28.833

您必须`~me`在捕获组中选择后面的部分并将其附加到您的新域

```
RewriteEngine On
RewriteRule ^~me/(.+) http://subdomain.newdomain.org/$1 [L] 
```

# java - 从 Jersey 服务返回编组错误

> ID：14323465
> 
> 赞同：3
> 
> 时间：2013-01-14T17:27:50.140
> 
> 标签：java, jersey

我有一个 Jersey 服务，它通过 POST 方法将对象作为 XML 接受。由于预期的无效数据（字段太长等），在编组过程中会引发一些错误。我如何才能优雅地捕获并返回这些错误，而不是得到通用的“客户端发送的请求在语法上不正确”错误。

**澄清：** REST 调用的主体是这样的：

```
@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Path("/users")
@POST
public Response createUser(@Context SecurityContext sc, User user) {
    // do some stuff
} 
```

用户对象作为调用主体发送的位置。在用户对象的集合中引发了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:22:25.157

哦，首先您需要将方法的参数更改为采用 String 或 Map。然后你可以像这样控制编组：

```
@Consumes({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
@Path("/users")
@POST
public Response createUser(@Context SecurityContext sc, String json ) {
    ObjectMapper mapper = new ObjectMapper();
    User user = mapper.readValue( json, User.class ); 
```

然后你可以在这个周围放一个 try..catch 来捕捉验证错误。至于将此返回给客户端，我喜欢创建一个 BAD_REQUEST 的响应，然后为请求的实体创建一个对象。我创建了一个看起来非常像 ConstrainViolationExcpetion 的。它基本上有一个单行消息描述，然后是一组具有“字段”和“详细信息”字段的对象。然后我让它以 JSON 或 XML 的形式返回给客户端。这是 JSON 格式的示例输出：

```
{"description":"Validation Failed",
 "errors":[
    {"field":"emailAddress","message":"not a well-formed email address"}
    {"field":"phoneNumber","message":"The phone number supplied was null."},
    {"field":"password","message":"may not be null"}]} 
```

这是一个快速而肮脏的示例，它基于基本的 ConstrainViolationException 返回一个响应实体，但我认为您可以看到如何轻松地将“字段”和“消息”元素添加到此类的实例。

```
public class RestValidationErrorEntity {

    public static Response createResponseOrThrow( ConstraintViolationException e ) {
        return Response
            .status( Response.Status.BAD_REQUEST )
            .entity( new RestValidationErrorEntity( e ) )
            .build();
    }

    public String description = "Validation Failed";
    public List<Detail> errors = new ArrayList<>();

    public RestValidationErrorEntity( ConstraintViolationException e ) {
        for ( ConstraintViolation<?> violation : e.getConstraintViolations() ) {
            errors.add(
                new Detail(
                    violation.getPropertyPath().toString(), violation.getMessage()
                ) );
        }
    }

    public static class Detail {
        public String field;
        public String message;

        Detail( String field, String message ) {
            this.message = message;
            this.field = field;
        }
    }
} 
```

# python - Django：使用 HttpResponseRedirect 将查询集传递给另一个视图

> ID：14323467
> 
> 赞同：1
> 
> 时间：2013-01-14T17:27:53.467
> 
> 标签：python, django

在 admin.py 中，我设置了一个名为 export 的操作，如下所示...

```
class RecipientAdmin(admin.ModelAdmin):
    actions = [export]
export.short_description = "Export Stuff"
admin.site.register(Recipient, RecipientAdmin) 
```

这将运行以下功能...

```
def export(modeladmin, request, queryset):
    return HttpResponseRedirect("/export/") 
```

我的问题是...

如何使用 HttpResponseRedirect 将查询集传递给另一个视图/页面？还是我应该尝试另一种方法来做到这一点？

**我希望将在列表视图中预先选择的记录带到新页面，以便我可以遍历它们。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:45:31.740

有两种方法可以做到这一点。

1> 如果您想要做的只是通过模型中的某些字段进行过滤，那么您可以在 url 中传递过滤器。示例：'/export/? id_gte= *3&status* _exact=3'

2> 在您的导出操作功能中，您可以在会话中设置一些变量或整个查询集，然后在导出视图中检查它

```
def export(modeladmin, request, queryset):
    """
    not sure if this will work
    """
    request.session['export_querset'] = queryset

    """
    if above does not work then just set this and check for it in view and u can make the queryset again if this is set 
    """
    request.session['export_querset'] = 1
    return HttpResponseRedirect("/export/") 
```

# ruby - 生成字段数量已知的页面对象

> ID：14323470
> 
> 赞同：2
> 
> 时间：2013-01-14T17:27:56.040
> 
> 标签：ruby, page-object-gem

我正在使用`Ruby`，`Watir-webdriver`和`Page-object gem`at 进行自动化测试。

只是想知道人们如何处理一个在文本字段数量方面本质上是动态的页面。我目前正在工作的页面有`'key' / 'value'`配对列表，可以根据需要添加任意数量。

我知道我可以用类似的东西访问说第五个

```
text_field(:key5, id: "key", index: 4)
text_field(:value5, id: "value", index: 4) 
```

但是用大量可能不存在的项目填充支持页面感觉有点混乱。

我缺少更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:59:57.853

想到的最简单的想法是做这样的事情：

```
text_fields(:key, :id => 'key')
text_fields(:value, :id => 'value') 
```

这将生成方法`key_elements`并将`value_elements`返回文本字段的数组。也许这对你有用。

# c++ - 从输入中删除引号的 C++ 宏

> ID：14323474
> 
> 赞同：1
> 
> 时间：2013-01-14T17:28:09.343
> 
> 标签：c++, c-preprocessor

我正在寻找一个称为 c++ 定义宏的奇怪问题的解决方案。所以，我想写一个定义宏，它需要一个字符串参数

```
MACRO("str"); //usage of macro 
```

并在代码中扩展为

```
str // without qoutes! 
```

宏应该如何出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:30:45.080

无法定义这样的宏。

您可以对标记或标记序列进行字符串化，但不能“取消字符串化”字符串文字。

# php - 变量数量与参数数量不匹配 - 是的

> ID：14323476
> 
> 赞同：2
> 
> 时间：2013-01-14T17:28:16.453
> 
> 标签：php, mysqli

所以根据一个建议，我试图包括准备好的陈述。

但是 PHP 不接受我的代码。

```
$stmt = $link->prepare('SELECT COUNT(*) FROM `table` WHERE `company` = CONVERT( _utf8 \'?\' USING latin1 )  COLLATE latin1_german1_ci AND `password` = CONVERT( _utf8 \'?\' USING latin1 ) COLLATE latin1_german1_ci');
$stmt->bind_Param('ss',  $firmaP, $kennwP);
$firmaP = utf8_encode($_POST['company']);
$kennwP = utf8_encode($_POST['password']);
if ($stmt->execute()) {
  if($row = $stmt->fetch()) {
      echo "OK";
    }
    else
    {
      echo "NO";
    }
} 
```

我明白了

> 警告：mysqli_stmt::bind_param()：变量数与准备语句中的参数数不匹配

而我在查询中有两个问号，在 bind_Param 中有两个变量。

如何解决这个问题？

编辑：用 ? 替换 \'?\' 导致

> 致命错误：在非对象上调用成员函数 bind_param()

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T17:30:09.690

不要引用你`?`的 s 如下：

```
$stmt = $link->prepare('SELECT COUNT(*) FROM `table` WHERE `company` = CONVERT( _utf8 ? USING latin1 )  COLLATE latin1_german1_ci AND `password` = CONVERT( _utf8 ? USING latin1 ) COLLATE latin1_german1_ci');
$firmaP = utf8_encode($_POST['company']);
$kennwP = utf8_encode($_POST['password']);
$stmt->bind_Param('ss',  $firmaP, $kennwP);
if ($stmt->execute()) {
  if($row = $stmt->fetch()) {
      echo "OK";
    }
    else
    {
      echo "NO";
    }
} 
```

# android - 用于 Android 的开源谷歌分析库

> ID：14323479
> 
> 赞同：0
> 
> 时间：2013-01-14T17:28:28.820
> 
> 标签：android, google-analytics

我需要将我的android应用程序中的一些事件报告给GA，但主要要求是不要在依赖项中使用API​​ lib - 所有与分析相关的代码都应该封装在我的应用程序包中（实际上它不是应用程序，而是SDK）。所以我正在寻找一些用于构建 Google Analytics API 查询的代码。谁能给点建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:38:43.733

请参阅[手动将数据发送到 Google Analytics](https://stackoverflow.com/questions/12653239/manually-sending-data-to-google-analytics/12658259#12658259)

可以在此处找到 Java 库（专为台式机设计，但它可能适用于 Android）：[http ://code.google.com/p/jgoogleanalytics/](http://code.google.com/p/jgoogleanalytics/)

# iphone - 从 Facebook SDK 存储用户 ID

> ID：14323482
> 
> 赞同：0
> 
> 时间：2013-01-14T17:28:34.747
> 
> 标签：iphone, ios, facebook, uiwebview

如果不是密码，我如何在 Facebook iOS SDK 中至少存储用户名。我浏览了 Facebook iOS SDK ...FBSession 需要使用登录部分。但它是一个库文件 ..我看不到实现部分。这是

```
[[FBSession activeSession] openWithBehavior:FBSessionLoginBehaviorForcingWebView

                  completionHandler:^(FBSession *session,

                                      FBSessionState state,

                                      NSError *error) 
```

是否可以保留凭证？或破解 UIWebView 以加载 facebook 登录页面而不向用户显示它并在可能的情况下注入凭据。

# java - 通过 XPath 中的 xmlns 识别 XML

> ID：14323486
> 
> 赞同：0
> 
> 时间：2013-01-14T17:29:01.150
> 
> 标签：java, xml, xpath, xml-namespaces

如何在 Java 中使用 XPath 区分这两段 XML？

```
<iq type="result">
    <query xmlns="jabber:iq:roster">
    </query>
</iq> 
```

和

```
<iq type="result">
    <query xmlns="vcard-temp">
    </query>
</iq> 
```

我试过这个，它总是打印空，

```
public class Test {

    public static void main(String[] args) throws Exception {
        final String xml = "<iq type=\"result\"><query xmlns=\"jabber:iq:roster\"></query></iq>";

        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document document = builder.parse(createInputSource(xml));

        XPath xpath = XPathFactory.newInstance().newXPath();
        xpath.setNamespaceContext(new NamespaceContext() {
            @Override
            public String getNamespaceURI(String prefix) {
                switch (prefix) {
                    case "roster":
                        return "jabber:iq:roster";
                    case "vcard":
                        return "vcard-temp";
                }

                return XMLConstants.NULL_NS_URI;
            }

            @Override
            public String getPrefix(String namespaceURI) {
                throw new UnsupportedOperationException("Not supported yet.");
            }

            @Override
            public Iterator getPrefixes(String namespaceURI) {
                throw new UnsupportedOperationException("Not supported yet.");
            }
        });

        Node match = (Node) xpath.evaluate("/iq/roster:query", document, XPathConstants.NODE);
        System.out.println(match);
    }

    private static InputSource createInputSource(String xml) {
        return new InputSource(new StringReader(xml));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:35:49.963

无论您使用何种 API 来使用 XPath 查询您的 XML 文档，很可能都有一种方法可以为名称空间注册名称空间前缀，例如使用[NamespaceContext](https://stackoverflow.com/a/6392700/1945651)。
因此，您将为每个命名空间分配不同的前缀，并使用以下内容检索相应的节点：

```
/iq/jRoster:query
/iq/vcard:query 
```

另一种选择是跳过 NamespaceContext 并使用 namespace-uri()：

```
/iq/*[local-name() = "query" and namespace-uri() = "jabber:iq:roster"]
/iq/*[local-name() = "query" and namespace-uri() = "vcard-temp"] 
```

看起来您还需要在创建文档构建器时使用 setNamespaceAware(true) ：

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
factory.setNamespaceAware(true);
DocumentBuilder builder = factory.newDocumentBuilder(); 
```

# listview - JAVAFX 从 ListView 选择更新 TableView

> ID：14323487
> 
> 赞同：0
> 
> 时间：2013-01-14T17:29:02.307
> 
> 标签：listview, tableview, javafx

我正在尝试从一个从列表视图中选择的对象中“获取”值而不用唱歌按钮，是否可以让它 onMouseClick 通过观察者的更新来获取列表视图对象？

```
@FXML
public void onMouseClickLista(ActionEvent e) {
    int x = listaTitulo.getSelectionModel().getSelectedIndex();
    update(listaTitulo.getItems().get(x),null);

} 
```

不幸的是，尝试了几种方法，但都出现了错误:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:25:44.713

只需将侦听器添加到 listView 选择模型

代码 ：

```
listView.getSelectionModel().selectedItemProperty().addListener(new ChangeListener() {

        @Override
        public void changed(ObservableValue arg0, Object oldVal, Object newVal) {

             System.out.println(" Selected value : " + newVal);
                  // newVal is Object so cast it to type supported by your ListView
                 //here update TableView using value you got from selection (newVal) 

        }
    }); 
```

# asp.net - 在 Web 表单中使用 Ninject 的“未指定参数的参数”

> ID：14323489
> 
> 赞同：0
> 
> 时间：2013-01-14T17:29:06.563
> 
> 标签：asp.net, dependency-injection, webforms, ninject, unit-of-work

只是重申一下标题，这是 web 表单而不是 mvc。它也使用vb.net。

我使用 nuget 将 ninject.web 添加到我的项目中。我已经配置了 NinjectWebCommon 的“RegisterServices”方法如下：

```
Private Shared Sub RegisterServices(kernel As IKernel)
    kernel.Bind(Of ilbdUOW)().[To](Of lbdUOW)()
End Sub 
```

一切都编译干净。当我运行简单的 Web 表单（.aspx 页面，没有母版页）时，我收到以下错误：

```
BC30455: Argument not specified for parameter '_uow' of 'Public Sub New(_uow As lbD.data.lbdUOW)'. 
```

它指向编译代码中的第 52 行：

```
Line 51:         Public Sub New()
Line 52:             MyBase.New
Line 53:             Dim dependencies() As String 
```

（我相信）在编译时来自 .aspx 页面的顶部，其中我有以下“新”构造函数的代码：

```
<Inject()> _
Public Sub New(_uow As ilbdUOW)
    Uow = _uow
End Sub 
```

（好吧，我说“我相信”，但我知道好像我将“ilbdUOW”从接口更改为“lbdUOW”类，它相应地更改了错误消息，所以这绝对是它的来源）

如果我在“New”构造函数中的“uow = _uow”行中放置了一个调试停止点，并且在 NinjectWebCommon 文件的“RegisterServices”方法中放置了另一个调试停止点，则调试器仅在“RegisterServices”调试点停止并且永远不会得到在主 .aspx 页面中点击调试停止。

我现在完全迷路了。我试图弄清楚对我来说相对较新的东西，我认为我已经接近了那里。我的理解是，NinjectWebCommon 中的“RegisterServices”中的代码将识别出我需要我的“ilbdUOW”接口的实例，当它在构造函数中被引用时（例如我的 .aspx 页面中的“新”构造函数），并且将自动注入它，从而使工作单元实例可供我访问数据库。

如果有人能指出我正确的方向，我将不胜感激，谢谢。

编辑添加：@mipe34

不在“新”构造函数上，不：

```
Public Sub New(ByVal repositoryProvider As IRepositoryProvider)
    MyBase.New()
    CreateDbContext()
    repositoryProvider.DbContext = DbContext
    _RepositoryProvider = repositoryProvider
End Sub 
```

我还设置了“RegisterServices”部分来映射这些接口，但是无论这些额外的映射是否在那里，我得到的错误都没有区别，在我到达那一点之前它似乎失败了。

我在“RegisterServices”部分中有这些行进出，这没有什么区别：

```
 kernel.Bind(Of RepositoryFactories)().[To](Of RepositoryFactories)().InSingletonScope()
    kernel.Bind(Of IRepositoryProvider)().[To](Of RepositoryProvider)() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T07:46:18.500

WebForm 是由 ASP.NET 而不是 Ninject 创建的 您不能在 WebForms 上使用构造函数注入。您必须改为进行属性注入。

# validation - 捕获绑定对象的 jaxb 解组异常

> ID：14323492
> 
> 赞同：1
> 
> 时间：2013-01-14T17:29:09.563
> 
> 标签：validation, exception, jaxb, cxf, unmarshalling

我使用 cxf 的 jaxb 来解组 xml 请求。

我正在寻找一种验证输入 xml 请求的方法，我已经阅读了以下两篇关于验证的超级文章，但它们并不是我所需要的。

[http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html](http://blog.bdoughan.com/2010/11/validate-jaxb-object-model-with-xml.html)

[http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html](http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html)

实际上，不是立即停止整个解组过程并在响应中返回异常消息，而是需要解组过程继续运行，并且能够将异常与未验证 xml 元素的对象链接起来。这样，应用程序仍然可以在除此之外的其他未编组的对象上执行下一项工作，在返回的 xml 响应的最后，我可以显示此特定对象的异常消息，以及良好的结果其他物体。

那可能吗？

非常感谢任何帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:30:41.590

您可以[`ValidationEventCollector`](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/util/ValidationEventCollector.html)在`Unmarshaller`. 它将存储`ValidationEvent`解组期间遇到的所有实例。操作后`unmarshal`如果它收集了任何事件，那么您可以选择抛出一个`Exception`.

顺便说一句，我很高兴听到你喜欢这些帖子。

# java - Java Jackson 两次写入对象

> ID：14323494
> 
> 赞同：3
> 
> 时间：2013-01-14T17:29:23.630
> 
> 标签：java, json, jackson

我有以下类，其中包含一个 String 字段和一个 Map 字段。我想使用 Jackson 将其序列化为 json。

```
public class Mapping 

    private String mAttribute;

    @JsonIgnore
    private Map<String, String> mMap;

    @JsonAnyGetter
    public Map<String, String> getMap() {
        //some logic to populate map
    }

    @JsonAnySetter
    public void put(// some params) {
        //some more logic
    }

    @JsonProperty(value = "attribute")
    public String getAttribute() {
        return mAttribute;
    }

    public void setAttribute(String aAttribute) {
        mAttribute= aAttribute;
    }
} 
```

我实例化一个`Mapping`对象，然后将`ObjectMapper`其写入文件。

```
ObjectMapper om = new ObjectMapper();
om.writeValue(destFile, myMappingObject); 
```

出于某种原因，它两次写入`Mapping`实例。`myMappingObject`我假设我没有在某处设置一些可见性选项，但我不知道在哪里。

json 看起来像这样，只是它在文件中出现了两次。

```
{
    "attribute" : "someValue",
    "map-key1" : "map-value1",
    "map-key2" : "map-value2"
} 
```

有[这个](http://jira.codehaus.org/browse/JACKSON-384?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)，但显然它在杰克逊的早期版本中已修复。我还尝试将方法的名称更改为`random()`，它仍然被调用两次（它应该调用的次数）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:51:29.757

该问题与上述课程无关。我正在使用另一个具有`Mapping`s 列表的类。前：

```
public class MappingsList {
    @JsonProperty
    private List<Mapping> mappings;

    public List<Mapping> getMappings() {return mappings;}
} 
```

后：

```
public class MappingsList {        
    private List<Mapping> mappings;

    @JsonProperty
    public List<Mapping> getMappings() {return mappings;}
} 
```

它奏效了。原因是 ObjectMapper 在`MappingsList`类中看到了两 (2) 个属性，因此对两者都进行了序列化。首先它将为该`mappings`字段创建 json，然后再次为该`getMappings()`方法创建 json。

# sql - sql server（根据条件查找表的计数）

> ID：14323496
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:29:28.607
> 
> 标签：sql, sql-server-2008

我有一张如下表

```
RequestNo  Facility  status 
1           BDC1      Active
1           BDC2      Active
1           BDC3      Active
2           BDC1      Active
2           BDC2      Active 
```

我想要这样

```
RequestNo  Facilty       Count 
1          BDC (1,2,3)   1
2          BDC(1,2)      1 
```

计数应基于带有设施的状态显示。Fcilityv 应仅作为 BDC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:06:43.643

这不会对 Facility 字段的长度施加任何限制。它从开头去掉字符，从结尾去掉数字：

```
SELECT RequestNo, FacNameNumbers, COUNT(Status) as StatusCount
FROM
(
SELECT DISTINCT
  t1.RequestNo, 
  t1.Status,
  substring(facility, 1, patindex('%[^a-zA-Z ]%',facility) - 1) + 
  '(' +
    STUFF((
      SELECT DISTINCT ', ' + t2.fac_number  
      FROM (
        select distinct 
          requestno, 
          substring(facility, 2 + len(facility) - patindex('%[^0-9 ]%',reverse(facility)), 9999) as fac_number
        from facility    
    ) t2
    WHERE t2.RequestNo = t1.RequestNo 
    FOR XML PATH (''))
  ,1,2,'') + ')' AS FacNameNumbers
FROM Facility t1
) final
GROUP BY RequestNo, FacNameNumbers 
```

和[SQL 小提琴](http://sqlfiddle.com/#!3/a9ccc/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:59:10.663

试试这个，（假设您的设施是固定的 4 字符代码）

```
SELECT RequestNo, Fname + '(' + FnoList + ')' Facilty, count(*) cnt
FROM 
(
    SELECT  distinct RequestNo, 
    SUBSTRING(Facility,1,3) Fname,
    stuff((
        select ',' + SUBSTRING(Facility,4,4)
        from Dummy
        where RequestNo = A.RequestNo AND
        SUBSTRING(Facility,1,3) = SUBSTRING(A.Facility,1,3)
        for xml path('')
            ) ,
         1, 1, '') as FnoList
    FROM Dummy A
) x
group by RequestNo, Fname, FnoList; 
```

[SQL 演示](http://sqlfiddle.com/#!3/5a7a4/3)

# android - BroadcastReceiver 无法正确启动 Activity

> ID：14323498
> 
> 赞同：0
> 
> 时间：2013-01-14T17:29:41.483
> 
> 标签：android, android-activity, broadcastreceiver

我编写了一个与发送和接收短信有关的应用程序。实际上，它会向设备发送一些命令并从该设备获取答案以显示给用户。我定义了这个应用程序的主要活动如下：

```
<activity
    android:name=".MainActivity"
    android:launchMode="singleTask">
</activity> 
```

它被定义为 singleTask 以避免同时运行多个实例。在 MainActivity 中，我添加了 onNewIntent() 方法，以便在该 Activity 在前台运行时获得新的调用：

```
public void onCreate(Bundle savedInstanceState) {
    // ...
    handleNewMessage(this.getIntent());
}

@Override
public void onNewIntent (Intent intent) {
    // ...
    handleNewMessage(intent);       
} 
```

在 sms BroadcastReceiver 中，我使用 FLAG_ACTIVITY_NEW_TASK 标志开始此活动，如下所示：

```
Intent intent = new Intent();
intent.putExtra("MESSAGE_BODY", sms.getBody());
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setClass(context, MainActivity.class);
context.startActivity(intent); 
```

问题是

1- 有时我收到 3-4 条短信，但 MainActivity 没有启动。如果我接到电话，或解锁手机，所有消息都会同时启动应用程序（MainActivity）！

2-我想在收到短信后打开屏幕2-3秒并自动解锁手机但我不知道如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T13:52:36.350

解决方案是使用`WakeLock`如下“

```
@Override
public void onReceive(Context context, Intent intent) {
    PowerManager powerManager = (PowerManager) context.getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = powerManager.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, "");
    wl.acquire();
    // your code ...
    wl.release();
} 
```

# android - addTextChangedListener 强制关闭

> ID：14323499
> 
> 赞同：0
> 
> 时间：2013-01-14T17:29:42.170
> 
> 标签：android, android-event

我有四个文本框，我在其中添加了一个 TextChangedListener，以下是我实现的代码：

```
public class PasswordActivity extends Activity{

/*This will store the password temporarily */
private int passcodeString;
private String LOG_TAG="Password_Activity";
EditText passOne = (EditText) findViewById(R.id.passcodeOne);
EditText passTwo = (EditText) findViewById(R.id.passcodeTwo);
EditText passThree = (EditText) findViewById(R.id.passcodeThree);
EditText passFour = (EditText) findViewById(R.id.passcodeFour);

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.password);

    passOne.addTextChangedListener(new CustomTextWatcher(passOne)); 
}

private class CustomTextWatcher implements TextWatcher {
    private EditText mEditText;

    public CustomTextWatcher(EditText e) { 
        mEditText = e;
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    public void afterTextChanged(Editable s) {
        Log.d(LOG_TAG, s.toString());
    }
}} 
```

但不知何故，它给人一种关闭的力量，我不知道为什么会导致这个问题。这是错误日志：

```
01-14 21:57:37.396: W/dalvikvm(608): threadid=1: thread exiting with uncaught exception (group=0x40015560)
01-14 21:57:37.541: E/AndroidRuntime(608): FATAL EXCEPTION: main
01-14 21:57:37.541: E/AndroidRuntime(608): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.pack.android.email.service/com.pack.android.activity.PasswordActivity}: java.lang.NullPointerException
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.os.Looper.loop(Looper.java:123)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-14 21:57:37.541: E/AndroidRuntime(608):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 21:57:37.541: E/AndroidRuntime(608):  at java.lang.reflect.Method.invoke(Method.java:507)
01-14 21:57:37.541: E/AndroidRuntime(608):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-14 21:57:37.541: E/AndroidRuntime(608):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-14 21:57:37.541: E/AndroidRuntime(608):  at dalvik.system.NativeStart.main(Native Method)
01-14 21:57:37.541: E/AndroidRuntime(608): Caused by: java.lang.NullPointerException
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.Activity.findViewById(Activity.java:1647)
01-14 21:57:37.541: E/AndroidRuntime(608):  at com.pack.android.activity.PasswordActivity.<init>(PasswordActivity.java:16)
01-14 21:57:37.541: E/AndroidRuntime(608):  at java.lang.Class.newInstanceImpl(Native Method)
01-14 21:57:37.541: E/AndroidRuntime(608):  at java.lang.Class.newInstance(Class.java:1409)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-14 21:57:37.541: E/AndroidRuntime(608):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
01-14 21:57:37.541: E/AndroidRuntime(608):  ... 11 more 
```

我对android开发很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:33:51.400

尝试：

```
public class PasswordActivity extends Activity{

/*This will store the password temporarily */
private int passcodeString;
private String LOG_TAG="Password_Activity";
EditText passOne;
EditText passTwo;
EditText passThree;
EditText passFour;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.password);

    passOne = (EditText) findViewById(R.id.passcodeOne);
    passTwo = (EditText) findViewById(R.id.passcodeTwo);
    passThree = (EditText) findViewById(R.id.passcodeThree);
    passFour = (EditText) findViewById(R.id.passcodeFour);

    passOne.addTextChangedListener(new CustomTextWatcher(passOne)); 
}

private class CustomTextWatcher implements TextWatcher {
    private EditText mEditText;

    public CustomTextWatcher(EditText e) { 
        mEditText = e;
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    public void afterTextChanged(Editable s) {
        Log.d(LOG_TAG, s.toString());
    }
}} 
```

你得到一个错误，因为你在被调用`findViewById()`之前尝试使用`setContentView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:33:55.610

您在静态初始化程序块中调用 findViewById，该程序块在 onCreate 方法之前调用。因此布局尚未设置，视图不存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:34:09.323

移动

```
 EditText passOne = (EditText) findViewById(R.id.passcodeOne);
  EditText passTwo = (EditText) findViewById(R.id.passcodeTwo);
  EditText passThree = (EditText) findViewById(R.id.passcodeThree);
  EditText passFour = (EditText) findViewById(R.id.passcodeFour); 
```

到`onCreate()`方法。

# android - 删除 EditText 和 TextView 之间的空白

> ID：14323500
> 
> 赞同：1
> 
> 时间：2013-01-14T17:29:43.867
> 
> 标签：android, android-layout, android-edittext, textview

请看下面的截图。

![在此处输入图像描述](../Images/a11d53e52b88616bf9171c425ce2a8d3.png)

我正在尝试删除 EditText 正下方的空白。没有设置任何边距或填充，这反过来让我感到困惑。这是布局 XML。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/searchText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:drawableLeft="@drawable/search_icon"
    android:ems="10"
    android:hint="@string/text_hint_search"
    android:imeOptions="actionSearch"
    android:inputType="text"
    android:lines="1"
    android:windowSoftInputMode="stateVisible" >

</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/searchText"
    android:background="@color/textGreyColor"
    android:text="List of Items"
    android:textAppearance="?android:attr/textAppearanceMedium" />
</RelativeLayout> 
```

谁能指导我在哪里摔倒？

编辑：（新截图）

![在此处输入图像描述](../Images/0b2975d257301ac6bed4494186fae93f.png)

@Nimish Choudhary 看看左右两边的空隙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:36:45.770

这种行为的原因是每个视图都有一些默认填充，您可以尝试

```
<EditText
    android:id="@+id/searchText"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:drawableLeft="@drawable/ic_launcher"
    android:ems="10"
    android:hint="hint"
    android:imeOptions="actionSearch"
    android:inputType="text"
    android:lines="1"
    android:windowSoftInputMode="stateVisible" >
</EditText>

<TextView
    android:id="@+id/textView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="-5dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/searchText"
    android:background="@android:color/darker_gray"
    android:text="List of Items"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:06:55.097

编辑或替换 EditText 视图背景上使用的 9.patch 可绘制对象。9.patch 可绘制对象中添加了填充/边距规则。了解她的方法：http: [//developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

# c# - 串行端口 BytesToRead 和 readbuffer

> ID：14323502
> 
> 赞同：0
> 
> 时间：2013-01-14T17:30:01.400
> 
> 标签：c#, serial-port

我正在尝试以非常快的速度连续从串行端口获取数据。波特率为`230400`。当我打印出数据、时间戳并`BytesToRead`写入文件时，我注意到每当`BytesToRead`下降到一个数字并且`readLine()`在这 200 毫秒内没有读取任何内容时，都会发生 200 毫秒的延迟。延迟后，`BytesToRead`回到 3000 左右，这个过程一次又一次地发生。本质上，我没有连续获取数据。

我想也许我的阅读速度比缓冲区中数据累积的速度要快，所以我尝试更改 readBuffer 大小并让该线程休眠 1 毫秒，以便让缓冲区跟上我正在阅读的速度。他们都没有工作。仍有一些延误。

欢迎任何想法。

```
 private void dostuff()//The thread I created after the port is opened
    {
        var startTime = DateTime.Now;
        var stopwatch = Stopwatch.StartNew();
        while (serialPortEncoder.IsOpen)
        {
            if (serialPortEncoder.BytesToRead > 210)
            {
                try
                {
                    var line = serialPortEncoder.ReadLine();
                    var timestamp = (startTime + stopwatch.Elapsed);
                    var lineString = string.Format("{0}  ----{1}",
                                    line,
                                    timestamp.ToString("HH:mm:ss:fff") + " "+serialPortEncoder.BytesToRead+"\r\n");

                    richTextBoxEncoderData.BeginInvoke(new MethodInvoker(delegate()
                    {
                        richTextBoxEncoderData.Text = line;//update UI                           
                    }));                                     
                }
                catch (Exception ex) { MessageBox.Show(ex.ToString()); }

            }} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:38:46.750

除非每 210 个字节换行一次，否则您的 ReadLine() 函数可能会超时并且什么也不返回。ReadLine() 将读取输入缓冲区，直到遇到换行值，然后返回之前的任何数据。[http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readline.aspx](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.readline.aspx)

什么样的信息正在通过港口？如果要读取特定大小的缓冲区，只需使用该`Read`方法即可。如果您需要阅读直到有换行符，请使用 ReadLine() 并经常检查它是否返回一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:46:17.767

您的代码存在根本性缺陷，它存在“热等待循环”错误。当串行端口没有足够的数据时，您的循环正在燃烧 100% 的核心。这将使 Windows 在您烧毁量子后将您的线程放在狗屋中一段时间​​，让其他线程有机会运行。在那个狗屋里呆 200 毫秒有点长，但肯定不是不寻常的。

您应该以不同的方式执行此操作，当串行端口实际有可用数据时，您应该让 Windows 有机会唤醒您。当它寻找下一个要调度的线程时，它有利于具有 I/O 完成的线程。这很容易做到，只需删除 BytesToRead 测试。ReadLine() 调用是一个阻塞调用，在收到 NewLine 之前不会返回。您的线程现在将消耗接近 0% 的 cpu 周期。

当机器负载过重或垃圾收集器运行时，您仍然会损失任意数量的时间。不，这还不足以可靠地读取编码器并关闭反馈回路。可靠地做到这一点需要一个具有可预测实时行为的微控制器。可从工业电子供应商处获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T02:09:05.307

在网上进行了一番无休止的研究后，我找到了延迟的原因。设备管理器--->端口---->高级---->将延迟更改为1毫秒即可解决问题。现在，每次缓冲区降至零时，最多只需要 2ms 即可恢复正常。我现在正在使用单独的线程轮询数据。它工作得很好。

但就像 Hans Passant 所说，我正在尝试找出一种更好的设计方法。

# asp.net-mvc - 基于偏好的表列顺序的理想方法是什么

> ID：14323508
> 
> 赞同：0
> 
> 时间：2013-01-14T17:30:20.793
> 
> 标签：asp.net-mvc

我的应用程序中的数据表有很多列。不同的用户需要不同的列集和特定的顺序。我正在做的事情是，我有一个与表的每一列相关联的唯一 ID，并且我将它们存储在用户首选项中。例如：

```
columnsToDisplay = "1,4,23,12,2,5,6,7,8,13,15" 
```

在我看来，我正在使用**if else if**来迭代我的表模型（我正在使用 ASP.NET MVC）来呈现表。我觉得这不是正确的做法。想象一个有 50 列的表，并且执行 if else if 50 次！在不使用 jQuery 或任何客户端脚本插件的情况下，解决此问题的理想方法是什么？

**编辑：** 这就是我现在正在做的事情。我正在将每一列与使用偏好进行比较。

```
foreach(var col in model)
{ if(col.name == id) {
<td>{{id}}</td>}else if(col.name == customerName) {
<td>{{name}}</td>}else if(col.name == balance) {
<td>{{balance}}</td>}else if(col.name == createdOn) {
<td>{{createdOn}}</td>} 
}
..... 
```

等等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T01:59:43.377

如果这些表是只读的（您不需要能够将它们发布回服务器），您可能可以将模型数据放入`IDictionary`对象数组中。然后，您可以`columnsToDisplay`在创建视图时使用您的（作为整数数组）的值来获取相关列。

像这样，假设你的模型被称为`model`：

```
model.ColumnArray = { 2, 4, 6, 1, 0 }; 
```

然后，假设`model`有一个名为的属性`Rows`，其中包含您的`IDictionary`对象：

```
@foreach(var model in Model.Rows)
{
    <tr>
    foreach(var column in Model.ColumnArray)
    {
        <td>@model[column]</td>
    }
    </tr>
} 
```

# sql - 如何进行困难的 GROUP 查询以按 2 组获取信息

> ID：14323511
> 
> 赞同：0
> 
> 时间：2013-01-14T17:30:39.013
> 
> 标签：sql

有下表：

```
Product(maker, model, type) 
```

制造商 - 设备制造商，类型是 PC、笔记本电脑、打印机，型号是主键。我需要让所有制造商只制造相同类型的设备并制造超过 1 种型号。供展示的信息是厂商、类型。我有以下查询：

```
SELECT maker, type, count(*) as how_many 
FROM Product 
GROUP BY maker, type 
HAVING count(*) > 1 
```

但我不知道如何让制造商使用相同类型的设备。

更新：例如，有以下记录：

```
A - 01 - Printer
A - 02 - PC
A - 03 - Laptop
B - 04 - Printer
B - 05 - Printer 
```

B 是个好制造商，因为他所有的设备都有相同的类型——“打印机”。我修好你了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:53:25.243

我认为这会给你你想要的结果：

```
select maker, type, count(*) how_many
from product p1
group by maker, type
having how_many = (select count(type)
                   from product p2
                   where p1.maker = p2.maker
                   group by maker) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d14f2/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:15:26.277

这是一个带有`having`子句的简单聚合查询：

```
select maker
from product
group by maker
having count(distinct type) = 1 and count(distinct type) > 1 
```

# emacs - 使 emacs 下一个缓冲区跳过 *Messages* 缓冲区

> ID：14323516
> 
> 赞同：11
> 
> 时间：2013-01-14T17:31:01.110
> 
> 标签：emacs, elisp

我想对 Emacs 做一个简单的更改，以便`next-buffer`and`previous-buffer`命令（我已经绑定到`C-x <RIGHT>`并且`C-x <LEFT>`将跳过`*Messages*`缓冲区。

我正在使用 Emacs 24 和[Emacs Starter Kit](https://github.com/technomancy/emacs-starter-kit)。

我已阅读以下相关问题和答案，但它们不是我想要的：

*   [Emacs 中的缓冲区循环：避免暂存和消息缓冲区](https://stackoverflow.com/questions/7699870/buffer-cycling-in-emacs-avoiding-scratch-and-messages-buffer)
*   [Emacs 禁用 *Messages* 缓冲区](https://stackoverflow.com/questions/10164929/emacs-disable-messages-buffer)
*   [Emacs Lisp Buffer失焦功能？](https://stackoverflow.com/questions/9536186/emacs-lisp-buffer-out-of-focus-function)

以下是它们不起作用的一些原因：

*   我想让它尽可能简单。配置更改越少越好。
*   我不想`*Messages*`完全杀死或阻止。
*   `(add-to-list 'ido-ignore-buffers "^\*Messages\*"``C-x b`对我的( )有帮助，`ido-switch-buffer`但不会改变方式`next-buffer`和`previous-buffer`行为。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-07-19T08:34:50.977

这样可以避免无限循环：

```
(defun next-code-buffer ()
  (interactive)
  (let (( bread-crumb (buffer-name) ))
    (next-buffer)
    (while
        (and
         (string-match-p "^\*" (buffer-name))
         (not ( equal bread-crumb (buffer-name) )) )
      (next-buffer))))
(global-set-key [remap next-buffer] 'next-code-buffer) 
```

`"^\*"`此代码在未加星标的缓冲区 ( )上循环。对于您的情况（仅避免`*Messages*`），它将是：

```
(defun next-code-buffer ()
  (interactive)
  (let (( bread-crumb (buffer-name) ))
    (next-buffer)
    (while
        (and
         (equal "*Messages*" (buffer-name))
         (not ( equal bread-crumb (buffer-name) )) )
      (next-buffer))))
(global-set-key [remap next-buffer] 'next-code-buffer) 
```

你可以写只是用`previous-code-buffer`替换every 。`next-buffer``previous-buffer`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T17:53:49.643

我能想到的最简单的方法是为这两个函数定义一个建议。这里是为了`next-buffer`。对于`previous-buffer`. 您还可以定义一个配置变量来启用/禁用行为（或激活/停用建议）：

```
(defadvice next-buffer (after avoid-messages-buffer-in-next-buffer)
  "Advice around `next-buffer' to avoid going into the *Messages* buffer."
  (when (string= "*Messages*" (buffer-name))
    (next-buffer)))

;; activate the advice
(ad-activate 'next-buffer) 
```

也许您可以用其他方式而不是字符串名称来比较缓冲区，但这会起作用。先前缓冲区的代码几乎相同。我也不知道是否有一种方法可以调用原始函数而无需在通知本身内部触发通知，但同样，即使缓冲区的名称在之后测试，代码也会起作用（如果你只是有*一个*缓冲区，它是消息缓冲区；一些代码可以检查是否只有一个缓冲区并且不再调用`next-buffer`）。

如果您想使用执行相同操作的独立函数：

```
(defun my-next-buffer ()
  "next-buffer, only skip *Messages*"
  (interactive)
  (next-buffer)
  (when (string= "*Messages*" (buffer-name))
      (next-buffer)))

(global-set-key [remap next-buffer] 'my-next-buffer)
(global-set-key [remap previous-buffer] 'my-next-buffer) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-24T21:51:25.227

这就是我正在使用的，基于 Diego 的回答：

```
(setq skippable-buffers '("*Messages*" "*scratch*" "*Help*"))

(defun my-next-buffer ()
  "next-buffer that skips certain buffers"
  (interactive)
  (next-buffer)
  (while (member (buffer-name) skippable-buffers)
    (next-buffer)))

(defun my-previous-buffer ()
  "previous-buffer that skips certain buffers"
  (interactive)
  (previous-buffer)
  (while (member (buffer-name) skippable-buffers)
    (previous-buffer)))

(global-set-key [remap next-buffer] 'my-next-buffer)
(global-set-key [remap previous-buffer] 'my-previous-buffer) 
```

它还不是很好，因为如果除了`skippable-buffers`I 列表之外没有缓冲区，它将挂起。`C-g`当它作为一个hackaround发生时，我会跳出循环。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-19T13:33:31.233

正如 RubenCaro 的回答所指出的，其他答案可以进入无限循环。不过，我认为 David James 的可跳过缓冲区列表的方法更好一些，所以这里有一个变体。

```
(setq my-skippable-buffers '("*Messages*" "*scratch*" "*Help*"))

(defun my-change-buffer (change-buffer)
  "Call CHANGE-BUFFER until current buffer is not in `my-skippable-buffers'."
  (let ((initial (current-buffer)))
    (funcall change-buffer)
    (let ((first-change (current-buffer)))
      (catch 'loop
        (while (member (buffer-name) my-skippable-buffers)
          (funcall change-buffer)
          (when (eq (current-buffer) first-change)
            (switch-to-buffer initial)
            (throw 'loop t)))))))

(defun my-next-buffer ()
  "`next-buffer' that skips `my-skippable-buffers'."
  (interactive)
  (my-change-buffer 'next-buffer))

(defun my-previous-buffer ()
  "`previous-buffer' that skips `my-skippable-buffers'."
  (interactive)
  (my-change-buffer 'previous-buffer))

(global-set-key [remap next-buffer] 'my-next-buffer)
(global-set-key [remap previous-buffer] 'my-previous-buffer) 
```

# javascript - 访问多维数组的问题

> ID：14323521
> 
> 赞同：0
> 
> 时间：2013-01-14T17:31:12.933
> 
> 标签：javascript, jquery

因此，我正在运行 $.getJSON 语句，但遇到了一些问题……这是 json：

```
{
    "K-6608-1-0": [
        {
            "Info": [
                {
                    "SVGFile": "46658.svg",
                    "Name": "Faucet Parts"
                }
            ],
            "Parts": [
                {
                    "Cod":"70012",
                    "Name":"Ruela de Parafuso Reforçado B2",
                    "Price":"$100"
                },
                {
                    "Cod":"71131",
                    "Name":"Parafusasdasdasdsdao Reforçado B2",
                    "Price":"$45"
                },
                {
                    "Cod":"78208",
                    "Name":"Tubo de Conexão R2D2",
                    "Price":"$150"
                }
            ]
        }
    ]
} 
```

所以，假设我以这种方式制作了 getJSON：

```
$.getJSON('test.json', function(data){
   alert(data["K-6608-1-0"]["Info"]["SVGFile"]);
}) 
```

为什么此代码不返回“46658.svg”？错误在哪里？

提前谢谢^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:33:32.757

`K-6608-1-0`和`Info`是数组，所以你必须设置位置。

```
alert(data["K-6608-1-0"][0]["Info"][0]["SVGFile"]);
                         ^          ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:33:24.193

那是因为`data["K-6608-1-0"]`是一个数组，所以要访问你想要的属性，首先你必须访问这个数组的一个元素 bi 它的索引（`data["K-6608-1-0"][0]["Info"]`也是一个数组）：

```
$.getJSON('test.json', function(data){
    alert(data["K-6608-1-0"][0]["Info"][0]["SVGFile"]);
    //                       ^          ^
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:33:11.900

```
alert(data["K-6608-1-0"][0]["Info"]["SVGFile"]);
                        ^^^--- add this 
```

你有嵌套在嵌套在数组中的对象中的数组。第一个 K-whatever 实际上是一个数组。您可能也必须为更深层次做同样的事情。

# iphone - 缩放时带有 UIImageView 中心旋转的 UIScrollView？

> ID：14323528
> 
> 赞同：5
> 
> 时间：2013-01-14T17:31:22.653
> 
> 标签：iphone, ios, objective-c, uiscrollview, uiimageview

我正在尝试创建一个行为与 Apples Photo App 完全相同的图像查看器。但现在我只对单个图像行为感兴趣。

我已经在 UIScrollView 中放置了一个 UIImageView 并设法处理除了一件事之外的几乎所有事情，那就是如果我放大图像的一部分（例如肖像图像）然后在横向旋转设备，该部分似乎旋转到左上角而不是中心。

让我试着说明这一点。这就是我现在所拥有的：

![我有的](../Images/f54181b6ffda617b74d1c11c7cf70f41.png)

这就是我想要发生的事情：

![我想要的是](../Images/2d6b0df027f76c005b38f4c059be0508.png)

基本上我相信我知道我能做到这一点，但它似乎涉及比它可能应得的更多的编码。也许我错过了一些简单的属性，我可以设置它来获得这种所需的行为。

任何提示，有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T10:34:37.107

设置 [imgView setContentMode:UIViewContentModeScaleAspectFit];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T17:16:35.830

```
self.imageView.center = self.scrollView.center; 
```

# asp.net - 从 iframe 中删除部分 html 代码

> ID：14323529
> 
> 赞同：2
> 
> 时间：2013-01-14T17:31:25.567
> 
> 标签：asp.net, html, iframe

我有一个 asp.net 页面，我在其中放置了一些 iframe。我想在后面的代码中从这个 iframe 中删除部分 html 代码。怎么做？对于在页面上搜索和删除 html 代码，将有助于正则表达式或 HAP。但是如何进入这个 iframe 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:34:04.333

如果 iframe 位于不同的域中，则您无法通过 JS 访问它（假设您使用 javascript 或类似方法来访问它）。

[http://javascript.info/tutorial/same-origin-security-policy](http://javascript.info/tutorial/same-origin-security-policy)

# vtk - 如何访问 vtkPolyData 中的特定单元格？

> ID：14323531
> 
> 赞同：3
> 
> 时间：2013-01-14T17:31:28.550
> 
> 标签：vtk

问题：有没有办法直接访问 vtkPolyData 结构中的特定单元格？

我正在使用 vtkPolyData 来存储行集，例如 L。目前，我正在使用 GetLines() 来了解 L 中的行数。然后，我必须使用 GetNextCell 使用“while”来遍历这组行“ 环形。

当前代码类似于：

```
vtkSmartPointer<vtkPolyData> a;
...
vtkSmartPointer<vtkCellArray> lines = a->GetLines(); 
...
while(lines->GetNextCell(numberOfPoints, pointIds) != 0) 
```

-> 我希望能够通过执行以下操作直接在特定行上工作：

```
myline = a[10];
doSomething(myline); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T18:31:30.290

[您可以使用vtkDataSet::GetCell(vtkIdType cellId)](http://www.vtk.org/doc/release/5.10/html/classvtkDataSet.html#a711ed1ebb7bdf4a4e2ed6896081cd1b2)函数访问特定单元格

# ios - 找不到 RestKit.h 的错误

> ID：14323532
> 
> 赞同：7
> 
> 时间：2013-01-14T17:31:33.023
> 
> 标签：ios, xcode, restkit, cocoapods

我不确定这是一个[RestKit](http://restkit.org)问题，我曾多次尝试通过[CocoaPods](http://cocoapods.org)重新安装 RestKit ，但最终我得到了这个错误：

```
<RestKit/RestKit.h> file not found 
```

一切编译正常，RestKit 工作正常。`$(inherited)`与其他链接器标志一样， 我已将标头搜索路径设置为 。

这是不幸的，因为现在这些类的自动完成功能不起作用。

我试过清理、删除派生数据和重新启动 Xcode，但都无济于事。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T16:07:58.060

我在遇到同样的问题时遇到了这个问题，但我有一个非常不同的解决方案可以立即起作用。

无论出于何种原因，有时项目似乎忘记了与 CocoaPods 相关的某些设置。在我的情况下，当我从其他人设置的存储库下载项目时触发它 - 即使再次运行“pods install”也没有消除编译错误。

我终于在某个地方遇到了解决方案，该项目需要为您的目标使用 Pods 配置文件。进入您的项目设置“信息”选项卡，打开“配置”部分。展开 Debug 和 Release，检查以确保为您的项目设置了“pods”配置。如果没有，请单击下拉菜单并为 Debug and Release 选择“pods” - 现在编译，错误应该会消失。

这是一张图片，它准确地显示了我正在谈论的 XCode 配置的哪一部分。

![项目的 Pods 配置集](../Images/a26d792319513e2c58a3e2c3af070771.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:52:26.257

我相信这个问题更多地与 Xcode 相关，而不是 cocoapods 本身。我在我导入的其他 pod 上也看到了这个问题，它们不会自动完成标题。正如基思在评论中所说，您应该能够导入所需的标头，其余代码应该从那里自动完成。

# java - 在 interval.parse() 中抛出异常

> ID：14323535
> 
> 赞同：0
> 
> 时间：2013-01-14T17:31:59.573
> 
> 标签：java, jodatime, date-format

我在变量中存储了一个字符串，`dataRange`并使用`Interval.parse()`方法来获取一个 Interval 对象。

我的目标是检查该字符串的格式是否正确，`DateFormatExeption`如果格式不正确则抛出。

```
final Interval validDateRange = Interval.parse(dateRange); 
```

如果字符串格式正确，解析函数似乎不会引发任何异常。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:52:47.603

`Interval.parse()``DateFormatException`如果提供的字符串无效，则不会抛出 a 。相反，它会抛出一个`IllegalArgumentException`. `DateFormatException`不是 Java 或 JodaTime 内置的异常类，因此您需要自己创建它（这很容易）

如果你想抛出一个`DateFormatException`then 可以将调用包装在一个 try 块中并执行以下操作：

```
final Interval validDateRange = null
try{
    validDateRange = Interval.parse(dateRange);
catch(InvalidArgumentException e){
    throw new DateFormatException("date format not valid",e);
} 
```

但`InvalidArgumentException`如果字符串为空，如果日期格式正确但范围错误（例如结束日期在开始之前），也会被抛出。`DateFormatException`异常消息会告诉您出了什么问题，但在所有这些情况下都抛出 a 可能不正确

# azure - 从 TFS 部署时，如何为 Azure 云服务设置不同的连接字符串

> ID：14323536
> 
> 赞同：1
> 
> 时间：2013-01-14T17:32:07.847
> 
> 标签：azure, tfs, tfsbuild

我正在尝试建立一个开发、登台和生产云服务。到目前为止，我已经设置了 2 个云服务：

*   MyApp - 这是我希望的暂存和生产，因为它们具有相同的连接字符串并且应该相同，并且快速交换 VIP 的能力是一个不错的功能。
*   MyAppDev - 我希望它指向我们的开发数据库。

我还想做从 tfspreview 到 azure 的持续构建集成。除了使连接字符串唯一之外，这很好用。

到目前为止，我已经设置了云服务并让它进行持续构建。我还在 web.config 和 web.production.config 中设置了我的连接字符串。此外，我还设置了发布配置文件 (.azurePubxml) 文件并将它们设置为构建定义过程部分中的替代发布配置文件。这些发布配置文件指定使用哪个配置（或者至少这是我的想法）。它似乎选择了发布配置文件的设置，因为我启用了 RDP 并且使用了不同的密码。

那么如何让构建控制器使用“生产”和“调试”构建配置来获取 web.config 转换？

希望这是有道理的。

编辑：

我只有要构建的解决方案，如下所示：

![在此处输入图像描述](../Images/92bdcd18fb3f6ac8d5539ce9b3349985.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:19:53.290

在定义构建定义时，在第 1 项下的“流程”部分。“要构建的项目”中，您有机会定义要构建的配置。在这里，键入与您的 .config 定义匹配的配置名称以构建该版本。

![构建定义配置](../Images/8fb9d77a2800f578679c0d22791e0371.png)

编辑：这有点晚了，但这就是我如何获得备用配置以及正确的连接字符串。我手动设置了 MSBuild 参数进行配置，并且我的构建正确地更改了部署到 Azure 的连接字符串。

![高级构建选项](../Images/c8add4da65742387170bd96a7b6b7f89.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T22:43:52.220

只需在第 6 节“Web 部署发布配置文件”中设置您下载的 Azure 发布配置文件。不必使用不同的 web.config 文件连接字符串将在发布构建运行时重写。

# uisplitviewcontroller - UISplitViewController 的 DetailView 中的 UIAlertView 未触发 UIAlertViewDelegate 代码

> ID：14323537
> 
> 赞同：0
> 
> 时间：2013-01-14T17:32:10.293
> 
> 标签：uisplitviewcontroller, uialertview, master-detail, ios5, uisplitviewdelegate

我在 Xcode 中为 iPad 创建了一个 Master-Detail 项目。然后我添加了一个按钮和一个按钮触发的操作（我将按钮连接到 IB 中的操作）一个带有三个按钮的 UIAlertView，然后将 UIAlertViewDelegate 添加到 .h 文件中。

当按下按钮时，会显示 AlertView，但是当单击 AlertView 内的任何按钮时，不会调用 .m 文件中的 UIAlertViewDelegate 方法。

这是项目的下载链接 在[此处输入链接描述](https://dl.dropbox.com/u/8256776/TestAlerts.zip)

我正在使用下面的代码...

DetailViewController.h

```
#import <UIKit/UIKit.h>

@interface DetailViewController : UIViewController <UISplitViewControllerDelegate, UIAlertViewDelegate>

@property (strong, nonatomic) id detailItem;

@property (weak, nonatomic) IBOutlet UILabel *detailDescriptionLabel;

-(IBAction)triggerAlert:(id)sender;

@end 
```

细节视图控制器.m

```
#import "DetailViewController.h"

@interface DetailViewController ()
@property (strong, nonatomic) UIPopoverController *masterPopoverController;
- (void)configureView;
@end

@implementation DetailViewController

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    }        
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.detailDescriptionLabel.text = [self.detailItem description];
    }
}

-(IBAction)triggerAlert:(id)sender
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"UIAlertMessage Title" message:@"UIAlertMessage" delegate:nil cancelButtonTitle:nil otherButtonTitles:@"Button 1", @"Button 2", @"Button 3", nil];

    [alert show];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    [self configureView];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        self.title = NSLocalizedString(@"Detail", @"Detail");
    }
    return self;
}

#pragma mark - Split view

- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
    barButtonItem.title = NSLocalizedString(@"Master", @"Master");
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
}

- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
    [self.navigationItem setLeftBarButtonItem:nil animated:YES];
    self.masterPopoverController = nil;
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

    NSLog(@"This code was run!");

    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"Button 1"])
    {
        NSLog(@"Button 1 was selected.");
    }
    else if([title isEqualToString:@"Button 2"])
    {
        NSLog(@"Button 2 was selected.");
    }
    else if([title isEqualToString:@"Button 3"])
    {
        NSLog(@"Button 3 was selected.");
    }
}

@end 
```

任何帮助将不胜感激。我之前使用过相同的代码并且之前已经实现了 UIAlertViews 没有任何问题，我不确定这里发生了什么......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:38:05.557

```
[[UIAlertView alloc] initWith... delegate:nil
                                          ^^^ 
```

如果您将委托设置为`nil`，您希望它如何`self`？

# cakephp - 没有名称属性的cakephp表单输入

> ID：14323538
> 
> 赞同：4
> 
> 时间：2013-01-14T17:32:13.807
> 
> 标签：cakephp, cakephp-2.2

我正在使用 CakePHP 2.2.4。

我正在使用表单助手来创建表单。我需要一个没有名称属性的表单输入。

formhelper 可以做到这一点，还是我应该只使用 HTML 来创建这个表单？

例如在 HTML 中：

```
<input type="text" maxlength="20" autocomplete="off" class="card-number stripe-sensitive required" /> 
```

基本上我可以使用 CakePHP 中的 formhelper 来完成上述工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T17:41:00.653

您可以否决`$options`数组中的任何属性，这是该`input()`方法的第二个参数。所以从技术上讲，你可以这样做：

```
echo $this->Form->input('Model.field', array(
    'label' => false,
    'div' => false,
    'name' => false,
    'maxlength' => 20,
    'autocomplete' => 'off',
    'class' => 'card-number stripe-sensitive'
)); 
```

`name`但是请注意，如果您想对控制器/模型中的数据做任何事情，删除该属性会使整个字段变得无用，因为`$this->data`数组从输入字段的 name 属性中获取它的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:37:44.450

CakePHP 需要 name 属性才能知道表单提交的内容。我不确定我是否理解您为什么不希望有 name 属性。

如果您担心命名输入会将某些内容传递给保存方法，您可以始终[`unset`](http://uk3.php.net/manual/en/function.unset.php)在控制器中使用它在保存/验证之前将其从 $this->request->data 中删除。

否则，您可以手动将标记添加到视图中，但再次不确定为什么需要未命名的输入元素。

# asp.net-mvc-4 - Web API 路由 - 返回 404

> ID：14323541
> 
> 赞同：1
> 
> 时间：2013-01-14T17:32:15.073
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我在 MVC 4 中有一个 Web API 项目，但找不到我的 Web 服务的 URL。而不是 MVC，我实际上只是使用 C（控制器），因为我没有返回视图并且我的模型位于外部项目中。

我正在使用默认路由，即`api/{controller}/{id}`. 我的控制器的名称是 RESTController（我知道，可能不是最好的名称），位于 ~/Controllers/RESTController.cs

根据命名约定，我的 Web 服务似乎应该位于 localhost:port/api/REST 但我只是得到一个 404 资源找不到错误（没有返回对象的 XML 表示或任何东西）。这是没有视图的预期行为吗？

有趣的是，我在一个外部项目中也有一个 SOAP API，它实际上只是返回 REST API 结果，并且它可以正常工作。对我的方法进行单元测试通过...我只是无法从浏览器访问它。我已经尝试了所有可以想象的网址。

基本上...

1.  有没有办法调试这个？（即打开 ASP.NET 目录列表）

2.  没有视图会影响浏览器中显示的内容吗？

3.  浏览器不应该返回代表对象的 XML 文件吗？

4.  我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:07:51.547

没关系，我是个白痴。我发现了问题......在某些时候我不小心将我的 Global.asax 文件拖放到我的 Views 文件夹中（药物和过去时态？）......因此我的路线没有被注册。

现在按预期工作。

# css - 在 overflow-x 生效之前保留 css 最小和最大宽度

> ID：14323543
> 
> 赞同：0
> 
> 时间：2013-01-14T17:32:32.787
> 
> 标签：css, css-float, styling

对于几列，我希望在父容器发生任何溢出之前将第一列调整为最小和最大宽度。在列容器的 overflow-x 溢出之前有效地具有最小最大宽度。

我在这里生成了一个全面的极简主义示例：http: [//cssdesk.com/KKtBt](http://cssdesk.com/KKtBt)

理想情况下，我希望第一列最小为 425 像素，并且如果有空间，则能够增长到 600 像素。

我怎么能在这里做到这一点？

谢谢！

[编辑] 我正在尝试做的一个更简单的例子。

非常感谢任何帮助： http: [//codepen.io/anon/pen/zkjsc](http://codepen.io/anon/pen/zkjsc)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T19:35:55.893

像这样的东西应该工作：

它有一个最大扩展为 1200px 宽的父级（自定义以适应），以及一个始终为静态的固定右侧列。在 {width} 中使用 calc() 调用确实是解决经典“固定右列”问题的最简单方法——只要确保正确使用前缀即可。

[Codepen 链接](http://codepen.io/opus13/pen/eIqxG)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:15:47.127

这在单独的 CSS 中确实是不可能的。

请参阅此处的[讨论](http://css-tricks.com/forums/discussion/21819/help-cant-use-min-and-max-width-in-multi-column-layout#Item_15)以了解更多细节。

本质上，为了获得一致的可靠行为，必须使用 Javascript 来控制需要调整大小的列的宽度。

# asp.net-mvc - 将图片上传到 Windows Azure 网站

> ID：14323548
> 
> 赞同：13
> 
> 时间：2013-01-14T17:32:50.543
> 
> 标签：asp.net-mvc, azure

我有一个想要部署到 Windows Azure 的 ASP.NET MVC 4 应用程序。这个应用程序的一部分涉及上传图片。图片上传后，我想将图片存储在位于`/pictures/uploaded`.

我的问题是，如何将图片上传到托管在 Windows Azure 上的应用程序中的相对路径？到目前为止，我的应用程序已托管在虚拟机中。我能够通过使用以下内容来完成上述操作：

```
string path = ConfigurationManager.AppSettings["rootWebDirectory"] + "/pictures/uploaded;

// Get the file path
if (Directory.Exists(path) == false)
  Directory.CreateDirectory(path);

string filePath = path + "/uploaded" + DateTime.UtcNow.Milliseconds + ".png";
filePath = filePath.Replace("/", "\\").Replace("\\\\", "\\");

// Write the picture to the file system
byte[] bytes = GetPictureBytes();
using (FileStream fileStream = new FileStream(filePath, FileMode.Create))
{
  fileStream.Write(bytes, 0, bytes.Length);
  fileStream.Flush();
  fileStream.Close();
} 
```

当前，`ConfigurationManager.AppSettings["rootWebDirectory"]`指向绝对路径。我相信这就是我的问题所在。我不知道如何将所有这些切换到相对路径。

谢谢！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T21:37:09.587

这是我对如何在 azure 中进行设置的简单描述。 [http://geekswithblogs.net/MagnusKarlsson/archive/2012/12/02/how-to-use-azure-storage-for-images.aspx](http://geekswithblogs.net/MagnusKarlsson/archive/2012/12/02/how-to-use-azure-storage-for-images.aspx)

//编辑; 这是我博客中的完整示例（如果博客死了）。yourViewName.cshtml

```
 @model List<string>  
 @{
     ViewBag.Title = "Index";
 }

 <h2>Index</h2>
 <form action="@Url.Action("Upload")" method="post" enctype="multipart/form-data">

     <label for="file">Filename:</label>
     <input type="file" name="file" id="file1" />
     <br />
     <label for="file">Filename:</label>
     <input type="file" name="file" id="file2" />
     <br />
     <label for="file">Filename:</label>
     <input type="file" name="file" id="file3" />
     <br />
     <label for="file">Filename:</label>
     <input type="file" name="file" id="file4" />
     <br />
     <input type="submit" value="Submit" />

 </form>

 @foreach (var item in Model) {

     <img src="@item" alt="Alternate text"/>
  } 
```

你的控制器动作

```
public ActionResult Upload(IEnumerable<HttpPostedFileBase> file)
         {
             BlobHandler bh = new BlobHandler("containername");
             bh.Upload(file);
             var blobUris=bh.GetBlobs();

             return RedirectToAction("Index",blobUris);
         } 
```

你的模型

```
 public class BlobHandler
     {
         // Retrieve storage account from connection string.
         CloudStorageAccount storageAccount = CloudStorageAccount.Parse(
         CloudConfigurationManager.GetSetting("StorageConnectionString"));

         private string imageDirecoryUrl; 

         /// <summary>
         /// Receives the users Id for where the pictures are and creates 
         /// a blob storage with that name if it does not exist.
         /// </summary>
         /// <param name="imageDirecoryUrl"></param>
         public BlobHandler(string imageDirecoryUrl)
         {
             this.imageDirecoryUrl = imageDirecoryUrl;
             // Create the blob client.
             CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

             // Retrieve a reference to a container. 
             CloudBlobContainer container = blobClient.GetContainerReference(imageDirecoryUrl);

             // Create the container if it doesn't already exist.
             container.CreateIfNotExists();

             //Make available to everyone
             container.SetPermissions(
                 new BlobContainerPermissions
                 {
                     PublicAccess = BlobContainerPublicAccessType.Blob
                 });
         }

         public void Upload(IEnumerable<HttpPostedFileBase> file)
         {
             // Create the blob client.
             CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

             // Retrieve a reference to a container. 
             CloudBlobContainer container = blobClient.GetContainerReference(imageDirecoryUrl);

             if (file != null)
             {
                 foreach (var f in file)
                 {
                     if (f != null)
                     {
                         CloudBlockBlob blockBlob = container.GetBlockBlobReference(f.FileName);
                         blockBlob.UploadFromStream(f.InputStream);
                     }
                 }
             }
         }

         public List<string> GetBlobs()
         {
             // Create the blob client. 
             CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

             // Retrieve reference to a previously created container.
             CloudBlobContainer container = blobClient.GetContainerReference(imageDirecoryUrl);

             List<string> blobs = new List<string>();

             // Loop over blobs within the container and output the URI to each of them
             foreach (var blobItem in container.ListBlobs())
                 blobs.Add(blobItem.Uri.ToString());

             return blobs;
         }
     } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T17:45:12.503

数据和图像并不意味着存储在网站目录中。这就是为什么有[Azure Blob 存储](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)。

Azure 通过将网站复制到一个实例来工作，因此如果存在多个实例，则上传的图像（存储在实例本地）将变得不同步，如果存在冲突，您甚至会丢失图像。

如果你真的想这样做，下面的行会给你你想要的：

```
string path = Server.MapPath("~/pictures/uploaded"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T19:01:23.417

这里已经有一些很好的答案可以准确地告诉您如何做您需要的事情。如果您不介意，请允许我提出一个替代方案。

就个人而言，为了解决像您这样的问题，我求助于[Azure Blob 存储](http://www.windowsazure.com/en-us/develop/net/how-to-guides/blob-storage/)。Blob 存储是一种非常便宜且快速的存储二进制文件（在文件夹类型结构中）的方法，与您的云服务当前运行的 VM 完全分离。

这将允许您在针对现有应用程序迁移或开发时获得一些额外的自由，因为您不必在每次部署时迁移您的上传。Blob 存储文件还可以跨多个 Azure 数据中心进行三重复制，无需额外费用，并且比部署 VM 更容错。

迁移到 Blob 存储还允许您在站点离线或 VM 关闭时访问文件。

您不再在所有资源必须存在于同一台机器上的*共享计算领域中运行。*Azure 专为资源的可伸缩性和分离而构建。Blob 存储专为您在此处尝试执行的操作而设计。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-14T17:38:20.383

```
string path = HostingEnvironment.MapPath(@"~/pictures/uploaded"); 
```

# c++ - 为什么 istream::get set cin.fail '\n' 是第一个字符？

> ID：14323550
> 
> 赞同：0
> 
> 时间：2013-01-14T17:33:00.823
> 
> 标签：c++, stream

为什么这两个函数 istream::get(char*,streamsize) 和 istream::get(char*,streamsize,char) 在找到 '\n' 作为 cin 缓冲区中的第一个字符时设置 cin.fail 位？

[从这里](https://stackoverflow.com/questions/12165167/istream-and-cin-get/12166297#12166297)可以看出，这就是上面提到的两个重载的行为。我想知道以这种方式设计这些功能的目的是什么？请注意，这两个函数都将字符 '\n' 留在缓冲区中，但如果您再次调用它们中的任何一个，它们将因换行符而失败，如链接所示。像函数 istream::get() 和 istream::getline() 的重载那样，让这两个函数不将字符 '\n' 留在缓冲区中不是更有意义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:59:36.137

使用[`std::istream::getline`](http://www.cplusplus.com/reference/istream/istream/getline/)，如果找到分隔字符，则将其提取并丢弃。带有[`std::istream::get`](http://www.cplusplus.com/reference/istream/istream/get/)分隔符的字符保留在流中。

`getline`你不知道，如果分隔字符被读取并丢弃，或者只是字符`n - 1`被读取。如果您只想阅读整行，您可以使用`get`and then`peek`作为下一个字符，看看它是换行符还是给定的分隔符。

但是，如果您想读取整行直到某个分隔符，您也可以使用[`std::getline`](http://www.cplusplus.com/reference/string/getline/)，它在任何情况下都会读取整行。

# c# - C# - 添加对 MS Excel 12.0 对象库和 MS Excel 14.0 对象库的引用？

> ID：14323551
> 
> 赞同：1
> 
> 时间：2013-01-14T17:33:09.920
> 
> 标签：c#, com-interop, office-interop, excel-interop

我最近开发了一个使用 的小工具`Microsoft.Office.Excel.Interop`，并根据我的 References 文件夹添加了对 Microsoft Excel 14.0 对象库的引用。我还应该提到我的机器上有 MS Office 2010，所以该工具在那里工作得很好。

但是，我有一个客户端用户试图在他的机器上安装该工具（显然他安装了 MS Office 2003）并且收到一条错误消息。

我想知道，如果我下载 Microsoft Excel 12.0 对象库并将其引用添加到我的工具中，以便我同时引用 MS Excel 14 和 MS Excel 12，会有什么问题吗？......这样做是否有意义？

同样，我对 .NET 还很陌生，我的编程经验纯粹是经验性的，就像在没有学校一样。只是提醒一下，以防这是一个愚蠢的问题。

**编辑：**

我发现了一些似乎可以解决这个问题的东西。我让我的客户从这个链接下载文件：http: [//www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

然后只需按照底部的说明进行操作，这显然解决了问题。他能够安装该工具并毫无问题地运行它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:36:54.980

我发现的最佳解决方案是使用虚拟机作为构建机器，其中安装了我愿意支持的最旧版本的 office Interop 库。我确实遇到了许多问题，试图在我的开发机器上使用多个互操作版本进行开发。

Microsoft 确实提供了为多个 Office 版本构建客户端的指南，但我发现这对于我的特定用例来说太麻烦了。

[http://support.microsoft.com/default.aspx?kbid=244167](http://support.microsoft.com/default.aspx?kbid=244167)

您还可以考虑使用替代库（例如开源 EP Plus）完全跳过 Interop。我还没有亲自尝试过，但它看起来很有希望。

[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T21:22:09.103

Interops 的版本之间存在一些差异。如果您将使用新版本中添加的某些成员，则旧版本将无法使用。例如，这里是 Interop 版本 14 中添加的所有内容的列表：

[http://msdn.microsoft.com/en-us/library/office/ff194938(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/ff194938(v=office.14).aspx)

如果您使用其中任何一个，您的应用程序将无法在旧版本中运行，因为这些成员在旧版本中不可用。

# asp.net - 动态设置asp.net登录密码要求

> ID：14323558
> 
> 赞同：1
> 
> 时间：2013-01-14T17:33:24.400
> 
> 标签：asp.net, login-control, non-alphanumeric

我有多家公司使用我的网站。他们中的一些人抱怨他们的客户无法理解非字母数字字符是什么（尽管我们用鲜红色字母给出了示例）并希望我们放宽密码要求。我们愿意接受那些提出要求的人，但不希望这影响那些对增加的安全性感到满意的人。

我知道我可以在 web.config 中完全删除非字母数字字符的要求，但我不想为每个人删除它，只为特定的用户集。有没有办法在我的登录页面、Page_Load 或类似的东西中动态设置登录控件的要求？

# javascript - 是否可以在同一页面上使用 2 个 javascript 库？

> ID：14323567
> 
> 赞同：-2
> 
> 时间：2013-01-14T17:33:55.853
> 
> 标签：javascript, lightbox

我有 2 个 javascript 库，我想将它们组合在一页中，这可能吗：

```
<script src="jquery.js"></script>
<script src="jPaginate.js"></script>
<script>
$(function(){
    $("#content").jPaginate();                       
});
</script>

<script type="text/javascript" src="pic/js/jquery.js"></script>
    <script type="text/javascript" src="pic/js/jquery.lightbox-0.5.js"></script>
    <script type="text/javascript">
    $(function() {
        $('#gallery a').lightBox();
    });
    </script> 
```

谢谢，阿米尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:35:55.617

理论上，您可以拥有任意数量的脚本。但是，您似乎两次包含 jQuery，这并不好。如果你拥有它一次，你就不需要它了。此外，通常您需要确保这些脚本不会相互干扰。通常jQuery插件对此很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:38:49.450

是的你可以。如果您不采取预防措施，第二个包含可能会覆盖第一个。

对于 jQuery，有[`jQuery.noConflict`](http://api.jquery.com/jQuery.noConflict/). 尤其是看看加载两个不同 jQuery 版本的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:36:50.253

那应该行得通。您可以在一个页面中拥有任意数量的脚本。即使使用该`ready`事件两次也有效，因为 jQuery 可以为同一事件处理多个事件处理程序。

但是，您包含 jQuery 两次，您应该只包含一次。

如果您使用不同版本的 jQuery，在大多数情况下您可以只使用更高版本。在某些情况下，脚本仅适用于特定版本的 jQuery。如果您的两个脚本都需要特定版本，并且它们需要不同的版本，那么同时使用它们可能会很棘手。

# swiftmailer - Swift Mailer：给定 [] 邮箱中的地址不符合 RFC 2822、3.6.2

> ID：14323578
> 
> 赞同：1
> 
> 时间：2013-01-14T17:34:40.417
> 
> 标签：swiftmailer

我在这里遇到了一个小问题，当我尝试使用 swiftmailer 发送电子邮件时，出现错误。

这是我的代码：

```
<?php

session_start();
include("config.php");
$dir = dirname(__FILE__);
$session = $_SESSION[serialize];

// Load the SwiftMailer files
        require_once($dir.'/swift/swift_required.php');

$hold = 'TIDAK';
// Kondisi - Kondisi yang ada
if($_GET[phase]=='confirm'){
        $to = "test@127.0.0.1";
        $kalimat = "Invoice Dengan nomor ".$_GET[nosc]." Telah di confirm, mohon di cek di sistem";
        $kalimat2 = "Berikut terlampir data Invoice Customer , mohon di pastikan.";
        $title = "CONFIRMATION NOTIFICATION";

}                

                // Convert string dlu

        $mailer = new Swift_Mailer(new Swift_MailTransport()); // Create new instance of SwiftMailer
                $message = Swift_Message::newInstance()
                                           ->setSubject($title) // Message subject
                       ->setTo(array($to)) // Array of people to send to
                       ->setBcc(array($bcc)) // Bcc:
                                           ->setFrom(array($_SESSION[mailadmin] => $_SESSION[namauser].''.store('namasite'))) // From:
                                           ->setBody($kalimat, 'text/html'); // Attach that HTML message from earlier

        // Send the email, and show user message
                if($hold<>'YA'){
                    if ($mailer->send($message)){
            echo json_encode(array('success'=>true));
                    } else {
            echo json_encode(array('success'=>false));
                    }
                }
?> 
```

然后当我尝试通过 jquery 将数据发布到这个文件时，我得到了一个错误，这个错误是我从 firebug 得到的。

```
<br />
<b>Fatal error</b>:  Uncaught exception 'Swift_RfcComplianceException' with message 'Address in mailbox given [] does not comply with RFC 2822, 3.6.2.' in C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\Headers\MailboxHeader.php:319
Stack trace:
#0 C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\Headers\MailboxHeader.php(249): Swift_Mime_Headers_MailboxHeader-&gt;_assertValidAddress(NULL)
#1 C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\Headers\MailboxHeader.php(107): Swift_Mime_Headers_MailboxHeader-&gt;normalizeMailboxes(Array)
#2 C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\Headers\MailboxHeader.php(71): Swift_Mime_Headers_MailboxHeader-&gt;setNameAddresses(Array)
#3 C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\SimpleHeaderFactory.php(74): Swift_Mime_Headers_MailboxHeader-&gt;setFieldBodyModel(Array)
#4 C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\SimpleHeaderSet.php(87): Swift_Mime_SimpleHeaderFactory-&gt;createMailboxHeader('Bcc', Array)
#5 C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime in <b>C:\xampp\htdocs\Colosus\core\swift\classes\Swift\Mime\Headers\MailboxHeader.php</b> on line <b>319</b><br /> 
```

所以，伙计们，有人可以在这里帮助我吗？我真的不知道这里发生了什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-07-16T14:06:43.433

如果您在发送指令周围使用 try/catch 会更好：

```
try {
     if ($mailer->send($message)){
        ...
     }

} catch (Exception $e) {
    $log_error->write_error($e->getMessage() . ';');
} 
```

或者，如果您在发送之前验证电子邮件：

```
if(!Swift_Validate::email($email)){ //if email is not valid
                //do something, skip them or log them
                $log_error->log($email);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-24T15:36:48.767

Please make sure there is no white space before or after the email address given.

# wordpress - wordpress：如何在页面上添加类别和标签？

> ID：14323582
> 
> 赞同：27
> 
> 时间：2013-01-14T17:34:55.633
> 
> 标签：wordpress

我通过在我的主题目录中创建一个 php 文件来使用自定义模板生成页面，例如：

```
<?php
 *
 * Template Name: Contact Page
 */
 ?>
 <html ..... </html> 
```

然后在仪表板上添加一个新页面，选择这个新模板

我现在如何将标签和类别关联到每个页面？创建帖子而不是页面是唯一的解决方案吗？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-02-05T15:59:19.690

更好的是添加到您的主题文件夹中的functions.php：

```
function myplugin_settings() {  
    // Add tag metabox to page
    register_taxonomy_for_object_type('post_tag', 'page'); 
    // Add category metabox to page
    register_taxonomy_for_object_type('category', 'page');  
}
 // Add to the admin_init hook of your theme functions.php file 
add_action( 'init', 'myplugin_settings' ); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-01-29T14:50:47.237

尝试使用接受的答案，但由于某种原因，它只显示帖子类型，并且没有任何页面显示在类别页面中。例如/类别/娱乐/

为了解决这个问题，我必须这样做：

```
// add tag and category support to pages
function tags_categories_support_all() {
  register_taxonomy_for_object_type('post_tag', 'page');
  register_taxonomy_for_object_type('category', 'page');  
}

// ensure all tags and categories are included in queries
function tags_categories_support_query($wp_query) {
  if ($wp_query->get('tag')) $wp_query->set('post_type', 'any');
  if ($wp_query->get('category_name')) $wp_query->set('post_type', 'any');
}

// tag and category hooks
add_action('init', 'tags_categories_support_all');
add_action('pre_get_posts', 'tags_categories_support_query'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-05T17:53:32.363

试试这个：

```
add_action( 'init', 'wpse34528_add_page_cats' );
function wpse34528_add_page_cats(){
    register_taxonomy_for_object_type('post_tag', 'page');
    register_taxonomy_for_object_type('category', 'page'); 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-23T10:06:20.833

对于很可能不会下载 wordpress 并因此无法安装所述插件的初学者来说，说“下载插件”根本没有帮助。下面是一些简短的代码，供像我这样一直在网上搜寻可以在具有常规帐户的常规页面上实际运行的东西的人使用 - 即您不是开发人员。

首先，确保您的菜单中的页面设置正确。您不需要将您的页面设为“类别”或“标签”！这不会给你实际的页面然后去编辑，所以如果你想添加滑块、文本、介绍或任何与此相关的东西，你将无法做到。

然后转到 WP Admin > Pages 选择要编辑的页面并转到文本编辑器而不是可视编辑器（最右侧的选项卡）

然后通过以下短代码：

```
[display-posts category="hair,makeup,reviews,beauty" posts_per_page="10" include_date="true" text-decoration: none date_format="F j, Y" order="DESC" include_excerpt="true" wrapper="div" image_size="large"]
&lt; 
```

（短代码收集了您在博客文章中分配特定类别的所有帖子，即我的帖子是头发和美容。所以显然将您的帖子更改为合适的帖子。然后它分配多少帖子（我的帖子是 10），日期（在降序，）带有大图和帖子摘录）

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-21T20:21:59.813

这个插件把我整理出来：

[http://wordpress.org/extend/plugins/add-tags-and-category-to-page/](http://wordpress.org/extend/plugins/add-tags-and-category-to-page/)

使用标准说明：

```
Upload the plugin files to the /wp-content/plugins/ directory
Activate the plugin through the 'Plugins' menu in WordPress
Use the setting page of the plugin from Settings > Add Tags And Category For Page. 
```

# javascript - 定义 Javascript 对象时出现 IE8 错误？

> ID：14323586
> 
> 赞同：5
> 
> 时间：2013-01-14T17:35:16.953
> 
> 标签：javascript, internet-explorer-8

我知道 IE8 很痛苦，但我从未见过它给我带来如此麻烦。我要做的就是定义一个 Javascript 对象，它会导致错误，阻止所有脚本在页面上工作。

错误是“预期的标识符、字符串或数字”，表明问题发生在我在下面定义属性“类”的地方。我见过无数的脚本是这样定义对象的，那为什么IE8会吐这个呢？

我将有问题的代码隔离到此。将它单独放在 HTML 页面的头部并在 IE8 中运行它会导致我看到的问题。

```
<script type="text/javascript" language="javascript">
var atts = {class: "trigger"};
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:37:01.443

这是因为`class`是保留关键字。尝试在它周围加上引号`'class'`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T17:40:01.037

通过用引号括起来使用适当的数据类型进行定义，`"class"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T04:39:57.623

除了@PickYourPoison 答案，您还可以使用这个技巧：

```
var atts= {};
atts["class"] = "LOL"; 
```

# ruby - 使用 ruby 通过 ssh 发送脚本

> ID：14323587
> 
> 赞同：1
> 
> 时间：2013-01-14T17:35:16.950
> 
> 标签：ruby, bash, ssh, resque

我正在尝试用 ruby​​ 编写一个 bash 脚本，该脚本将为我的一个应用程序启动一个 Resque 工作程序。

我从控制台中给出的参数生成的命令看起来像这样......

```
command = "ssh user@#{@ip} 'cd /path/to/app; bundle exec rake resque:work QUEUE=#{@queue}&'"
`command` 
```

该命令已正确插入，一切看起来都很棒。我被要求输入 ssh 命令的密码，然后什么也没有发生。我很确定我的语法对于建立 ssh 连接并在该连接中运行一行代码是正确的。`ssh user@host 'execute command'`

我已经完成了一个更简单的命令，它只运行 mac`say`终端命令并且运行良好

```
command = "ssh user@#{@ip} 'say #{@queue}'"
`command` 
```

我在后台运行 rake 任务，因为我在 ssh 中使用过该行一次，如果您在后台运行该进程，它只会让工作人员保持活动状态。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:52:32.730

我想到了。

这是一个 rvm 的事情。我需要`. .bash_profile`在我想运行的脚本的开头包含。

所以...... `"ssh -f hostname '. .bash_profile && cd /path/to/app && bundle exec rake resque:work QUEUE=queue'"`是我让它工作所需要的。

感谢@Casper 的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:56:17.043

在命令参数启动的所有进程都完成之前，SSH 不会退出会话。如果您在后台使用`&`.

要解决此问题，只需使用`-f`开关：

```
-f  Requests ssh to go to background just before command execution.  This is
    useful if ssh is going to ask for passwords or passphrases, but the user
    wants it in the background.  This implies -n.  The recommended way to start
    X11 programs at a remote site is with something like ssh -f host xterm. 
```

IE

```
"ssh -f user@#{@ip} '... bundle exec rake resque:work QUEUE=#{@queue}'" 
```

**编辑**

实际上，更仔细地查看问题似乎 ssh 只是在等待远程端关闭`stdin`并且`stdout`. 您可以像这样轻松测试它：

这挂起：

```
ssh localhost 'sleep 10 &' 
```

这不会挂起：

```
ssh localhost 'sleep 10 </dev/null >/dev/null &' 
```

所以我假设最后一个版本实际上非常接近于运行`-f`.

# php - 如何阻止 Doctrine 引用数字？

> ID：14323591
> 
> 赞同：2
> 
> 时间：2013-01-14T17:35:29.190
> 
> 标签：php, mysql, doctrine-orm

我正在尝试使用学说运行本机 SQL 查询，并且在引用`LIMIT`我的查询部分的数字时遇到了问题。

```
 $offset = $pageNumber * self::$limit;

    $sql = "
        SELECT * FROM devices LIMIT :offset, :limit
    ";
    $stmt = self::getEntityManager()->getConnection()->prepare($sql);
    $stmt->bindValue("offset", $offset);
    $stmt->bindValue("limit", self::$limit);
    $stmt->execute();
    $result = $stmt->fetchAll(); 
```

生成：

```
SELECT * FROM devices LIMIT '0', '5000' 
```

这是无效的。***我对如何改变它来产生有点困惑***：

```
SELECT * FROM devices LIMIT 0, 5000 
```

我已经引用[了数据检索和操作](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/data-retrieval-and-manipulation.html)，其中有一个关于`quote()`函数的部分，但它对细节很害羞。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:50:50.783

尝试 ：

```
$stmt->bindValue("offset", $offset, PDO::PARAM_INT); 
```

[在此处](http://www.igestis.org/api/source-class-Doctrine.DBAL.Driver.Mysqli.MysqliStatement.html#106)查看源代码：

```
 28: class MysqliStatement implements \IteratorAggregate, Statement
 29: {
 30:     protected static $_paramTypeMap = array(
 31:         PDO::PARAM_STR => 's',
 32:         PDO::PARAM_BOOL => 'i',
 33:         PDO::PARAM_NULL => 's',
 34:         PDO::PARAM_INT => 'i',
 35:         PDO::PARAM_LOB => 's' // TODO Support LOB bigger then max package size.
 36:     ); 
```

# java - 实现在单个持久连接中交换四个消息的协议

> ID：14323593
> 
> 赞同：0
> 
> 时间：2013-01-14T17:35:36.757
> 
> 标签：java, google-app-engine, sockets, persistent-connection

我有一个协议的完整实现，其中使用通过 Java 套接字的持久连接以下列方式在客户端（本机 Android 应用程序）和服务器（独立 Java 服务器）之间交换四个消息：

（客户端->服务器）：message1

（服务器->客户端）；消息2

（客户端->服务器）：message3

（服务器->客户端）：message4

在发送每条消息之间，客户端和服务器都必须进行繁重的数学（加密）操作（椭圆曲线上基于配对的计算）。

该项目在我的本地开发机器中使用套接字正常工作，并且在 Android 应用程序和 Java 服务器之间从 message1 到 message4 打开了这个套接字。现在，我需要对 Google AppEngine 做同样的事情，但由于它不允许打开套接字，我不知道该怎么做。我已经检查了 Channel 和 XMPP API，但我不知道我的用例是否适用于这些 API。使用 AppEngine 的 Channel 和 XMPP API 的方法是否正确？是否可以通过 AppEngine 上的套接字模拟在我的本地机器中实现的功能？

谢谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:07:11.483

Google App Engine 不支持持久连接。

您将需要重新设计您的协议以在 HTTP 上运行。

例如，message1 可以通过 HTTP 请求发送，message2 可以与匹配的 HTTP 响应一起返回。此时，您的套接字连接结束。

您必须发出第二个 HTTP 请求才能使用 message3 打开一个新套接字，并且您可以使用第二个 HTTP 响应返回 message4。

您可以使用 HTTP 会话“连接”第一个和第二个 HTTP 请求。会话基本上是一个 id，在服务器端存储了额外的数据。您将在第一个 HTTP 请求中创建会话，并将其作为参数传递给第二个 HTTP 请求。服务器可以在处理第二个请求时查找会话 ID 和相关数据。

您可以在 SO 上找到有关会话的更多信息：[如何在 Google 应用引擎上使用会话](https://stackoverflow.com/questions/3885996/how-to-use-session-on-google-app-engine)

XMPP API 对您没有帮助，它用于 GAE 服务器端代码和其他使用 HTTP 作为通信协议的 XMPP 客户端之间的通信。

Channel API 可用于从服务器->客户端发送数据，但它实际上是作为 HTTP 长轮询实现的。使用了多个长 HTTP 请求，并且不能保证您有一个保持打开的套接字；在此过程中打开和关闭多个套接字。它会比我上面描述的更复杂，而且更昂贵。

# javascript - 图像缩放在本地工作，但从服务器运行时不起作用

> ID：14323594
> 
> 赞同：0
> 
> 时间：2013-01-14T17:35:40.273
> 
> 标签：javascript, html, canvas, html5-canvas

我正在尝试在加载到浏览器时缩放图像。这是我正在使用的代码-

```
function importImage(e) {
    var canvas = document.getElementsByTagName('canvas')[0];
    var ctx = canvas.getContext('2d');
    var reader = new FileReader;

    reader.onload = function(event) {
        event.preventDefault();
        var img = new Image;
        img.src = event.target.result;

        img.onload = function() {

        width = img.width;
        height = img.height;        
        var scaleX, scaleY, scale;
        var scaledWidth, scaledHeight;
        scaleX = width / canvas.width;
        scaleY = height / canvas.height;
        scale = scaleX > scaleY ? scaleX : scaleY;
        scaledWidth = width / scale;
        scaledHeight = height / scale;
        ctx.clearRect(0,0, canvas.width, canvas.height);
        ctx.drawImage(img, (canvas.width - scaledWidth) / 2, (canvas.height - scaledHeight) / 2, scaledWidth, scaledHeight);       
        }
    }
    reader.readAsDataURL(e.target.files[0]);
} 
```

从本地计算机使用时它似乎工作正常，但从服务器运行时，缩放不起作用。我认为这与我指的是实际图像有关，但我不确定。

# c++ - 在 C++11 中声明接口的最佳方法

> ID：14323595
> 
> 赞同：50
> 
> 时间：2013-01-14T17:35:41.823
> 
> 标签：c++, interface, c++11, polymorphism, abstract

众所周知，有些语言有接口的概念。这是Java：

```
public interface Testable {
  void test();
} 
```

如何以最紧凑的方式在 C++（或 C++11）中实现这一点，并且代码噪音很小？我很欣赏不需要单独定义的解决方案（让标题就足够了）。这是一种非常简单的方法，即使我也觉得有问题 ;-)

```
class Testable {
public:
  virtual void test() = 0;
protected:
  Testable();
  Testable(const Testable& that);
  Testable& operator= (const Testable& that);
  virtual ~Testable();
} 
```

这只是开始……而且我想要的时间已经更长了。如何改进它？也许在 std 命名空间中的某个地方有一个基类就是为此而生的？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-14T18:40:21.780

对于动态（运行时）多态性，我建议使用**非虚拟接口**(NVI) 习惯用法。这种模式保持接口非虚拟和公共，析构函数虚拟和公共，以及实现纯虚拟和私有

```
class DynamicInterface
{
public:
    // non-virtual interface
    void fun() { do_fun(); } // equivalent to "this->do_fun()"

    // enable deletion of a Derived* through a Base*
    virtual ~DynamicInterface() = default;    
private:
    // pure virtual implementation
    virtual void do_fun() = 0; 
};

class DynamicImplementation
:
    public DynamicInterface
{
private:
    virtual void do_fun() { /* implementation here */ }
}; 
```

动态多态性的好处是您可以在运行时传递任何派生类，其中需要指向接口基类的指针或引用。`this`运行时系统会自动将指针从其静态基类型向下转换为其动态派生类型并调用相应的实现（通常通过带有指向虚函数的指针的表发生）。

对于静态（编译时多态性），我建议使用**Curiously Recurring Template Pattern** (CRTP)。这涉及更多，因为必须使用`static_cast`. 此静态转换可以在每个静态接口派生自的帮助器类中定义

```
template<typename Derived>
class enable_down_cast
{
private:  
        typedef enable_down_cast Base;    
public:
        Derived const* self() const
        {
                // casting "down" the inheritance hierarchy
                return static_cast<Derived const*>(this);
        }

        Derived* self()
        {
                return static_cast<Derived*>(this);
        }    
protected:
        // disable deletion of Derived* through Base*
        // enable deletion of Base* through Derived*
        ~enable_down_cast() = default; // C++11 only, use ~enable_down_cast() {} in C++98
}; 
```

然后你定义一个像这样的静态接口：

```
template<typename Impl>
class StaticInterface
:
    // enable static polymorphism
    public enable_down_cast< Impl >
{
private:
    // dependent name now in scope
    using enable_down_cast< Impl >::self;    
public:
    // interface
    void fun() { self()->do_fun(); }    
protected:
    // disable deletion of Derived* through Base*
    // enable deletion of Base* through Derived*
    ~StaticInterface() = default; // C++11 only, use ~IFooInterface() {} in C++98/03
}; 
```

最后，您创建了一个从接口派生的实现，并将其**自身作为参数**

```
class StaticImplementation
:
    public StaticInterface< StaticImplementation > 
{
private:
    // implementation
    friend class StaticInterface< StaticImplementation > ;
    void do_fun() { /* your implementation here */ }
}; 
```

这仍然允许您拥有同一接口的多个实现，但您需要在编译时知道您正在调用哪个实现。

**那么什么时候使用哪种形式呢？**这两种形式都可以让您重用通用接口并在接口类中注入前置/后置条件测试。动态多态性的优点是您具有运行时灵活性，但您在虚函数调用中为此付出代价（通常通过函数指针进行调用，几乎没有内联的机会）。静态多态是其镜像：没有虚函数调用开销，但缺点是您需要更多样板代码，并且您需要知道在编译时调用的是什么。基本上是效率/灵活性的权衡。

**注意：**对于编译时多态，您也可以使用模板参数。通过 CRTP 成语的静态接口与普通模板参数的区别在于 CRTP 类型的接口是显式的（基于成员函数），而模板接口是隐式的（基于有效的表达式）

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-01-14T17:41:50.057

关于什么：

```
class Testable
{
public:
    virtual ~Testable() { }
    virtual void test() = 0;
} 
```

在 C++ 中，这对子类的可复制性没有影响。所有这一切都是孩子必须实现`test`（这正是您想要的接口）。您无法实例化此类，因此您不必担心任何隐式构造函数，因为它们不能直接作为父接口类型调用。

如果您希望强制子类实现析构函数，您也可以将其设为纯（但您仍然必须在接口中实现它）。

另请注意，如果您不需要多态破坏，则可以选择使您的析构函数受保护非虚拟。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2015-06-17T08:11:50.360

根据 Scott Meyers（有效的现代 C++）：当声明接口（或多态基类）时，您需要虚拟析构函数，以获得正确的操作结果，例如通过基类指针`delete`或`typeid`引用访问的派生类对象。

```
virtual ~Testable() = default; 
```

但是，用户声明的析构函数会抑制移动操作的生​​成，因此要支持移动操作，您需要添加：

```
Testable(Testable&&) = default; 
Testable& operator=(Testable&&) = default; 
```

声明移动操作会禁用复制操作，您还需要：

```
Testable(const Testable&) = default;
Testable& operator=(const Testable&) = default; 
```

最后的结果是：

```
class Testable 
{
public:
    virtual ~Testable() = default; // make dtor virtual
    Testable(Testable&&) = default;  // support moving
    Testable& operator=(Testable&&) = default;
    Testable(const Testable&) = default; // support copying
    Testable& operator=(const Testable&) = default;

    virtual void test() = 0;

}; 
```

另一篇有趣的文章：[C++ 中的零规则](https://www.fluentcpp.com/2019/04/23/the-rule-of-zero-zero-constructor-zero-calorie/)

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-01-14T19:37:11.750

通过将单词替换为`class`，`struct`默认情况下所有方法都是公共的，您可以节省一行。

没有必要让构造函数受到保护，因为无论如何你都不能用纯虚方法实例化一个类。这也适用于复制构造函数。编译器生成的默认构造函数将是空的，因为您没有任何数据成员，并且对于您的派生类来说完全足够了。

您担心`=`运算符是正确的，因为编译器生成的运算符肯定会做错事。实际上，没有人会担心它，因为将一个接口对象复制到另一个是没有意义的。这不是经常发生的错误。

可继承类的析构函数应该*始终*是公共的和虚拟的，或者受保护的和非虚拟的。在这种情况下，我更喜欢公共和虚拟的。

最终结果仅比 Java 等效项长一行：

```
struct Testable {
    virtual void test() = 0;
    virtual ~Testable();
}; 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-01-14T17:39:43.237

请记住，如果您不管理指针、句柄和/或类的所有数据成员都有自己的析构函数来管理任何清理，那么“三规则”是不必要的。同样在虚拟基类的情况下，因为基类永远不能直接实例化，所以如果您想要做的只是定义一个没有数据成员的接口，则无需声明构造函数......编译器默认值就好了。`delete`如果您计划调用接口类型的指针，您需要保留的唯一项目是虚拟析构函数。所以实际上你的界面可以很简单：

```
class Testable 
{
    public:
        virtual void test() = 0;  
        virtual ~Testable();
} 
```

# wordpress - WordPress中外部管理的受htaccess保护的成员区域，带有url重写？

> ID：14323600
> 
> 赞同：0
> 
> 时间：2013-01-14T17:35:56.127
> 
> 标签：wordpress, url-rewriting, .htpasswd

我正在考虑将客户端项目从大量手工构建的网页转换为 WordPress 安装。但是，此客户端有一个免费区 (site.com/) 和一个会员区 (site.com/members/)。成员区是标准的 Apache .htaccess / htpasswd 身份验证。身份验证由我们目前不想更改的旧版计费软件处理。

一种想法是安装两个单独的 WordPress（或者可能是 MultiSite 安装？）。一个安装位于域根目录，另一个位于 /members/。因此，任何安装都不必知道有关受密码保护的任何事情。只要外部安装不能生成包含 /members/ 的 url，我很确定 url-rewrite 引擎不会相互干扰。

另一个想法是尝试在一次安装中完成所有操作，并期望服务器强制对映射到 /members/ 的任何 url 进行身份验证。但直觉上，我感觉我必须使用自定义分类法才能将“自由区域”类别层次结构与“成员区域”层次结构分开。

我发现的任何 WordPress 插件以及任何相关讨论都假定成员是通过 WordPress 管理的。这就是问题所在：成员区域只是通过老式的 htaccess 身份验证来保护。

我不确定 WordPress url-rewrite 机制是否会按预期触发身份验证部分，因为 WordPress 位于成员区域之外的域根目录。

另一方面，将它作为两个 WordPress 安装运行，一个在另一个内部，可能正是我所需要的。有人对此有看法吗？任何人都知道按照描述在“内部”WordPress 运行 WordPress 的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T11:55:25.430

是的。鉴于我的限制，双重安装是最合理的解决方案。

# nhibernate - 具有自定义 UserType 的 NHibernate ID 生成器

> ID：14323602
> 
> 赞同：1
> 
> 时间：2013-01-14T17:36:05.400
> 
> 标签：nhibernate, nhibernate-mapping

我有一个使用遗留数据库 (DB2) 的 NHibernate 实现，我被要求修改它，我遇到了一个问题，即让 id 生成器处理定义为客户用户类型的 id 属性。

表中的数据映射到类似于以下的类：

```
// CLASS FILE
public class Request {
    public virtual int Id { get; set; }
    ... other data properties ...
}

//MAPPING FILE
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="LibraryName" namespace="LibraryName.Domain" default-cascade="none">
    <class name="Request" schema="..." table="..." where="...">
        <id name="Id" column="..." type="LibraryName.Domain.DB2UserTypes.NullableIntegerType, LibraryName" />

        ... other data property mappings ... 
```

旧数据库的表中的列是请求表中的外键。包含这些外键的列不可为空，因此当引用对象中的请求对象属性为空时，自定义 NullableIntegerType 用于将零写入外键列。

```
// NullableIntegerType Definition
public class NullableIntegerType : IEnhancedUserType
{
    private static readonly SqlType[] SQL_TYPES = { NHibernate.NHibernateUtil.Int32.SqlType };
    public SqlType[] SqlTypes { get { return SQL_TYPES; } }

    public new bool Equals(object x, object y)
    {
        if (object.ReferenceEquals(x, y))
            return true;
        else if ((x == null) && (y == null))
            return true;
        else if ((x == null) || (y == null))
            return false;
        else
            return x.Equals(y);
    }

    public object DeepCopy(object value) { return value; }
    public bool IsMutable { get { return false; } }
    public object Assemble(object cached, object owner) { return cached; }
    public object Disassemble(object value) { return value; }
    public object Replace(object original, object target, object owner) { return original; }
    public int GetHashCode(object obj) { return obj.GetHashCode(); }

    public Type ReturnedType { get { return typeof(int); } }

    public object NullSafeGet(IDataReader dr, string[] names, object owner)
    {
        object obj = NHibernate.NHibernateUtil.Int32.NullSafeGet(dr, names[0]);
        if (obj == null)
            return null;
        else
        {
            int result = (int)obj;

            if ((result == 0) || (result == 9999999))
                return null;
            else
            {
                return int.Parse(result.ToString());
            }
        }
    }

    public void NullSafeSet(IDbCommand cmd, object obj, int index)
    {
        if (obj == null)
            NHibernateUtil.Int32.NullSafeSet(cmd, 0, index);
        else
            NHibernateUtil.Int32.NullSafeSet(cmd, obj, index);
    }

    public object FromXMLString(string xml)
    {
        return int.Parse(xml);
    }

    public string ToXMLString(object obj)
    {
        return ((int)obj).ToString();
    }

    public string ObjectToSQLString(object obj)
    {
        return ((int)obj).ToString();
    }
} 
```

我被要求修改映射，以便我们可以创建新的请求对象并使用生成器生成 ID。我创建了生成器类并修改了请求对象映射以将生成器用于 Id。

```
// GENERATOR CLASS
public class RequestGenerator : TableGenerator
{
    public override object Generate(NHibernate.Engine.ISessionImplementor session, object obj)
    {
        using (IDbCommand command = session.Connection.CreateCommand())
        {
            command.CommandText = @"...";
            command.CommandType = CommandType.StoredProcedure;

            var parameter = command.CreateParameter();
            parameter.DbType = DbType.Int32;
            parameter.ParameterName = "@generatedId";
            parameter.Value = 0;
            parameter.Direction = ParameterDirection.InputOutput;
            command.Parameters.Add(parameter);

            command.ExecuteNonQuery();

            return Convert.ToInt32(parameter.Value);
        }
    }
}

//MODIFIED MAPPING FILE
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="LibraryName" namespace="LibraryName.Domain" default-cascade="none">
    <class name="Request" schema="..." table="..." where="...">
        <id name="Id" column="..." type="LibraryName.Domain.DB2UserTypes.NullableIntegerType, LibraryName" >
            <generator class="LibraryName.Domain.DB2Generators.RequestGenerator, LibraryName" />
        </id>

        ... other data property mappings ... 
```

当我尝试测试修改后的映射时，在我的代码运行之前我收到一个错误，表明 NHibernate 无法实例化 ID 生成器。

```
// Sample Code
Request request = new Request() { Id = 0, ... other properties }
session.Save(request);
session.Flush();

// Exception Details and Stack Trace
NHibernate.MappingException was unhandled by user code
Message=could not instantiate id generator: LibraryName.Domain.DB2Generators.RequestGenerator, LibraryName
Source=NHibernate
StackTrace:
    at NHibernate.Id.IdentifierGeneratorFactory.Create(String strategy, IType type, IDictionary`2 parms, Dialect dialect)
    at NHibernate.Mapping.SimpleValue.CreateIdentifierGenerator(Dialect dialect, String defaultCatalog, String defaultSchema, RootClass rootClass)
    at NHibernate.Impl.SessionFactoryImpl..ctor(Configuration cfg, IMapping mapping, Settings settings, EventListeners listeners)
    at NHibernate.Cfg.Configuration.BuildSessionFactory()
    at LibraryName.Infrastructure.NH.NHibernateSessionFactory.createSessionFactory() in C:\...\NHibernate\NHibernateSessionFactory.cs:line 23
    at LibraryName.Infrastructure.NH.NHibernateSessionFactory.get_SessionFactory() in C:\...\NHibernate\NHibernateSessionFactory.cs:line 15
    at LibraryName.Infrastructure.NH.NHibernateSessionFactoryProvider.CreateInstance(IContext context) in C:\...\NHibernate\NHibernateSessionFactoryProvider.cs:line 13
    at Ninject.Activation.Provider`1.Create(IContext context)
    at Ninject.Activation.Context.Resolve()
    at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding)
    at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
    at System.Linq.Enumerable.<CastIterator>d__b1`1.MoveNext()
    at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source)
    at Ninject.ResolutionExtensions.Get[T](IResolutionRoot root, IParameter[] parameters)
    at LibraryName.Infrastructure.InternalMvcModule.<Load>b__0(IContext c) in C:\...\Ninject\InternalMvcModule.cs:line 16
    at Ninject.Activation.Providers.CallbackProvider`1.CreateInstance(IContext context)
    at Ninject.Activation.Provider`1.Create(IContext context)
    at Ninject.Activation.Context.Resolve()
    at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding)
    at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
    at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
    at Ninject.Planning.Targets.Target`1.GetValue(Type service, IContext parent)
    at Ninject.Planning.Targets.Target`1.ResolveWithin(IContext parent)
    at Ninject.Activation.Providers.StandardProvider.GetValue(IContext context, ITarget target)
    at Ninject.Activation.Providers.StandardProvider.<>c__DisplayClass4.<Create>b__2(ITarget target)
    at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext()
    at System.Linq.Buffer`1..ctor(IEnumerable`1 source)
    at System.Linq.Enumerable.ToArray[TSource](IEnumerable`1 source)
    at Ninject.Activation.Providers.StandardProvider.Create(IContext context)
    at Ninject.Activation.Context.Resolve()
    at Ninject.KernelBase.<>c__DisplayClass10.<Resolve>b__c(IBinding binding)
    at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
    at System.Linq.Enumerable.SingleOrDefault[TSource](IEnumerable`1 source)
    at Ninject.Web.Mvc.NinjectDependencyResolver.GetService(Type serviceType)
    at System.Web.Mvc.DefaultControllerFactory.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType)

    InnerException: System.ArgumentException
    Message=type is not a ValueTypeType
    Parameter name: type
    Source=NHibernate
    ParamName=type
    StackTrace:
        at NHibernate.Id.TableGenerator.Configure(IType type, IDictionary`2 parms, Dialect dialect)
        at NHibernate.Id.IdentifierGeneratorFactory.Create(String strategy, IType type, IDictionary`2 parms, Dialect dialect)
        InnerException: 
```

如果我从 id 映射中删除自定义类型 (type="LibraryName.Domain.DB2UserTypes.NullableIntegerType, LibraryName")，那么生成器会正常工作，并且我的对象会保存到数据库中。如何使 Id 上的生成器和用户定义类型一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T17:52:11.510

[该类](https://github.com/nhibernate/nhibernate-core/blob/3.3.2GA/src/NHibernate/Id/TableGenerator.cs#L107)的[NHibernate 来源`TableGenerator`](https://github.com/nhibernate/nhibernate-core/blob/3.3.2GA/src/NHibernate/Id/TableGenerator.cs#L107)表明，它的`Configure`方法期望列类型是`PrimitiveType`. 在您的情况下，情况似乎并非如此，因为您只是实现`IEnhancedUserType`（可能会在内部包装，但不是由 a 包装`PrimitiveType`）。

我无法解释原因，但在我的一个项目中，我面临着类似的要求，即在自定义 NHibernate 类型中实现 0/null 魔法并使用自定义 id 生成器。在我的项目中，自定义“id”类型直接实现`IUserType`，id 生成器直接实现`IIdentifierGenerator`and `IConfigurable`，即它不扩展 NHibernate 的`TableGenerator`. 也许你应该对你的 id 生成器做同样的事情，以解决 NHibernate 的列类型限制`TableGenerator`。

# c# - 在 Windows 8 应用程序中没有出现 WrapGrid 的滚动条

> ID：14323606
> 
> 赞同：0
> 
> 时间：2013-01-14T17:36:25.757
> 
> 标签：c#, windows, xaml, grid, grid-layout

我目前有一个 WrapGrid 绑定到 BitmapImages 的 ObservableCollection。我希望显示这些，每行 4 个项目，向下延伸 - 当 WrapGrid 延伸超过用户屏幕的大小时，允许用户向下滚动。目前它正在工作 - 但没有出现滚动条并且用户无法向下滚动 - 所以只要它超出屏幕，图像就会被切断并且无用。

我相信我定义网格的方式一定是不正确的；但是对于我的一生，经过数小时的搜索，我无法弄清楚我做错了什么。

这是我的代码：

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid.RowDefinitions>
        <RowDefinition Height="140" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Grid>
       <Grid.ColumnDefinitions>
           <ColumnDefinition Width="Auto" />
           <ColumnDefinition Width="*" />
       </Grid.ColumnDefinitions>

       <Button x:Name="backButton"
            Click="GoBack"
            IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}"
            Style="{StaticResource BackButtonStyle}" />

       <TextBlock x:Name="pageTitle"
               Grid.Column="1"
               Text="Image Gallery"
               Style="{StaticResource PageHeaderTextStyle}" />
    </Grid>

   <Grid Grid.Row="1" Grid.Column="1">
    <Grid Margin="120,0,0,0">
        <Grid.RowDefinitions>
            <RowDefinition Height="60" />
            <RowDefinition Height="60" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

         ...
        <ItemsControl Name="listOfImages" ItemsSource="{Binding Path=Images}" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="5" ScrollViewer.VerticalScrollBarVisibility="Visible">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <WrapGrid Orientation="Horizontal" Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="5" />
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <Image Stretch="Fill" Width="200" Height="200" Source="{Binding}" Margin="10,10,10,0"  Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="5"  />
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </Grid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:26:10.727

我认为这些东西是默认设置的，但可能并非如此，所以这可能很有用。

```
<ItemsPanelTemplate>
    <WrapGrid Orientation="Horizontal" 
              CanVerticallyScroll="True" 
              ScrollViewer.VerticalScrollBarVisibility="Auto" />
</ItemsPanelTemplate> 
```

# c++ - 替换失败有时是错误？

> ID：14323607
> 
> 赞同：2
> 
> 时间：2013-01-14T17:36:29.000
> 
> 标签：c++, sfinae, clang++

以下代码片段尝试实现一个 'std::is_constructible<A, int>'：

```
#include <type_traits>

struct A { 
  // A(int);
};

template< typename T >
struct cstr_int
{
  static int mi;

  template< typename C >
  static typename std::enable_if< 
    std::is_same< decltype( T( mi ) ), T >::value, char >::type choose( C * );
  static long choose( ... );

  enum { value = ( sizeof( decltype( choose( & mi ) ) ) == 1 ) };
};

bool const b1 = cstr_int< A >::value; 
```

使用 g++ 可以正常工作；使用 clang++ 会打印以下错误：

```
tmp/sfinae04.cc:14:29: error: no matching conversion for functional-style cast from 'int' to 'A'
    std::is_same< decltype( T( mi ) ), T >::value, char >::type choose( C * );
                            ^~~~~
tmp/sfinae04.cc:20:17: note: in instantiation of template class 'cstr_int<A>' requested here
bool const b1 = cstr_int< A >::value;
                ^
tmp/sfinae04.cc:3:8: note: candidate constructor (the implicit copy constructor) not viable: no known conversion from 'int' to 'const A' for 1st argument
struct A { 
       ^
tmp/sfinae04.cc:3:8: note: candidate constructor (the implicit move constructor) not viable: no known conversion from 'int' to 'A' for 1st argument
struct A { 
       ^
tmp/sfinae04.cc:3:8: note: candidate constructor (the implicit default constructor) not viable: requires 0 arguments, but 1 was provided
1 error generated. 
```

版本信息：clang 版本 3.3 (trunk 172418) (llvm/trunk 172417), g++ (Debian 4.7.2-4) 4.7.2。

**我的问题：** 恕我直言，这应该是 SFINAE。我在这里错过了什么还是clang++有问题？

（我知道有 is_constructible() 但我不允许使用它——这不是我问题的重点。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T18:09:48.813

尽管它可能看起来像是替换失败，但它实际上是在模板实例化期间检测到的失败，因此是可诊断的错误。

它*不是*SFINAE 上下文，因为`enable_if`它不依赖于推导的模板参数。

这有效：

```
template< typename T >
struct cstr_int
{
  static int mi;

  template< typename C >
  static typename std::enable_if< 
    std::is_same< decltype( C( mi ) ), C >::value, char >::type choose( C * );
  static long choose( ... );

  enum { value = ( sizeof( decltype( choose( (T*)0 ) ) ) == 1 ) };
}; 
```

# xamarin.ios - 如何在 MonoTouch 中使用 ABPeoplePickerNavigationController 来选择联系人的特定电子邮件地址或电话号码？

> ID：14323610
> 
> 赞同：0
> 
> 时间：2013-01-14T17:36:35.210
> 
> 标签：xamarin.ios, addressbook

我一直在用 MonoTouch 编写的项目中使用[ABPeoplePickerNavigationController](https://developer.apple.com/library/ios/#documentation/AddressBookUI/Reference/ABPeoplePickerNavigationController_Class/Reference/Reference.html#//apple_ref/occ/cl/ABPeoplePickerNavigationController)来选择联系人的特定电子邮件地址或电话号码。

代码设置了一个委托，在委托中我实现了 ShouldContinue 方法，并使用所有联系人的 Handle 属性检索联系人。不幸的是，它看起来发生了一些变化，或者我使用了未记录的功能，或者我很幸运，因为现在当我正在为 iPhone 5 更新应用程序时，代码不再有效。

**编辑**：好的，我最初的想法是这是由 MonoTouch 的变化引起的，因为自从我上次使用这个应用程序以来已经有很多更新。但是，我现在将它从我的设备中删除并下载了我在应用商店中拥有的版本，它以同样的方式崩溃，空引用异常。

这意味着是 iOS 升级使我的代码无法正常工作。

我的代码的目标：

1.  选择一个人的特定电子邮件地址，不仅仅是*这个人*，而是导航到这个人的详细信息，并选择一个特定的电子邮件地址或电话号码。

下面的代码只处理电话号码，电子邮件代码看起来有 95% 相似。

下面是构造选择器的代码：

```
var picker = new ABPeoplePickerNavigationController();
picker.Init();
picker.DisplayedProperties.Clear();
picker.DisplayedProperties.Add(ABPersonProperty.FirstName);
picker.DisplayedProperties.Add(ABPersonProperty.Phone);
var del = new PhonePickerDelegate();
picker.Delegate = del; 
```

这是委托类：

```
private class PhonePickerDelegate : ABPeoplePickerNavigationControllerDelegate
{
    public override bool ShouldContinue(ABPeoplePickerNavigationController peoplePicker, IntPtr selectedPerson, int propertyId, int identifier)
    {
        peoplePicker.DismissModalViewControllerAnimated(true);

        // THE NEXT LINE IS THE ONE THAT NO LONGER WORKS
        var contact = peoplePicker.AddressBook.SingleOrDefault(s => s.Handle == selectedPerson) as ABPerson;

        using (var phones = contact.GetPhones())
        {
            int index = phones.GetIndexForIdentifier(identifier);
            var phone = phones.GetValues()[index];
            var name = (contact.FirstName + " " + contact.MiddleName).Trim() + " " + contact.LastName;
            Selected(name + ": " + phone);
        }
        return false;
    }

    public override void Cancelled(ABPeoplePickerNavigationController peoplePicker)
    {
        peoplePicker.DismissModalViewControllerAnimated(true);
    }
} 
```

不幸的是，此代码不再找到正确的联系人，因为没有一个联系人具有与该值对应的 Handle`selectedPerson` `IntPtr`值。

我的问题是：

1.  如何修复上述代码？
2.  *我可以*修复上面的代码吗？
3.  是否有其他类/方法/委托/事件或其他我应该使用的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T21:38:11.843

您可以执行以下操作：请注意 AppDelegate.navigation 将是您当前的`NavigationController`

* * *

```
using MonoTouch.AddressBookUI;
using MonoTouch.AddressBook;

ABPeoplePickerNavigationController _contactController = new ABPeoplePickerNavigationController ();
            AppDelegate.navigation.PresentViewController (_contactController, true, null);

            _contactController.Cancelled += delegate {
                AppDelegate.navigation.DismissViewController (true, null);
                return;
            };

            _contactController.SelectPerson += delegate(object sender, ABPeoplePickerSelectPersonEventArgs e) {
                _importedContact = e.Person;
                AppDelegate.navigation.DismissViewController (true, delegate {
                    // What to do when you dismiss the picker here.
                });
            }; 
```

`e.Person`只会给你整个联系。你会想做这样的事情：

```
e.Person.GetEmails().FirstOrDefault 
```

希望这可以帮助

# xml-namespaces - JDOM2 和 xmlns 属性

> ID：14323614
> 
> 赞同：0
> 
> 时间：2013-01-14T17:36:52.750
> 
> 标签：xml-namespaces, jdom-2

我正在使用 JDOM2 生成站点地图及其索引。

我想得到的是：

```
<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"><sitemap><loc>http:// 
```

所以我向名为“xmlns”的根元素添加了一个属性。运行代码我收到此错误：

```
The name "xmlns" is not legal for JDOM/XML attributes: An Attribute name may not be "xmlns"; use the Namespace class to manage namespaces. 
```

如何在不改变上述结构的情况下获得我需要的东西？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:57:10.083

您需要使用命名空间，而不是属性：

```
Element root = new Element("sitemapindex", "http://www.sitemaps.org/schemas/sitemap/0.9"); 
```

阅读命名空间......： [http ://www.w3schools.com/xml/xml_namespaces.asp](http://www.w3schools.com/xml/xml_namespaces.asp)

罗尔夫

# mysql - MySQL - 无法使用 HEAP (MEMORY) 表中的索引进行分组

> ID：14323623
> 
> 赞同：0
> 
> 时间：2013-01-14T17:37:35.847
> 
> 标签：mysql, optimization

在普通的 MyISAM 表（也可能是 InnoDB）中，您可以使用 GROUP BY 语句添加索引以提高查询的性能，遵循此处列出的规则：

[http://dev.mysql.com/doc/refman/5.6/en/group-by-optimization.html](http://dev.mysql.com/doc/refman/5.6/en/group-by-optimization.html)

我最近一直在做一些性能测试，尝试 MySQL 将表直接存储在内存中的能力（又名 HEAP 表）。我注意到一些奇怪的事情——group by 查询在堆表中的运行速度比在 MyISAM 中慢得多。经过进一步调查，我观察到“使用索引进行分组”在解释堆表查询时没有显示（它们在 MyISAM 中执行）。

我一直试图在互联网上找到有关此的更多信息，但无济于事。不能在 HEAP 表中使用 group by 索引吗？

简单的例子：

```
-- Setting everything up

SET max_heap_table_size = 104857600;

CREATE TABLE lookup_mem
    (id INT, INDEX USING BTREE (id))
    ENGINE = MEMORY;

CREATE TABLE lookup_hdd
    (id INT, INDEX USING BTREE (id))
    ENGINE = MYISAM;

DELIMITER $$

CREATE PROCEDURE `populate_table`()
BEGIN
    DECLARE count INT DEFAULT 0;
    WHILE count < 3000000 DO
        INSERT INTO lookup_mem SET id = ROUND(RAND()*100);
        SET count = count + 1;
    END WHILE;
END$$

DELIMITER ;

CALL populate_table;

INSERT INTO lookup_hdd SELECT * FROM lookup_mem; 
```

现在到有趣的东西：

```
EXPLAIN SELECT * FROM lookup_mem GROUP BY id;

-- gives
-- 1, SIMPLE, lookup_mem, index, , id, 5, , 3000000, 

EXPLAIN SELECT * FROM lookup_hdd GROUP BY id;

-- gives
-- 1, SIMPLE, lookup_hdd, range, , id, 5, , 101, Using index for group-by

SELECT * FROM lookup_mem GROUP BY id;

-- takes 1.216 seconds

SELECT * FROM lookup_hdd GROUP BY id;

-- takes 0.001 seconds 
```

mysql不使用堆表中的group bys索引吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:37:19.533

现在这是一个经过验证的错误。见链接：

[http://bugs.mysql.com/bug.php?id=68086](http://bugs.mysql.com/bug.php?id=68086)

# ios - 使用多个 NSStream 处理线程的最佳方法是什么？

> ID：14323626
> 
> 赞同：3
> 
> 时间：2013-01-14T17:37:47.413
> 
> 标签：ios, multithreading, nsstream

对不起，但我必须先做一些介绍。

我有一堂课叫`MJPEGStreamer`. 它使用`NSOutputStream`和`NSInputStream`流式传输 MJPEG 数据。我将同时运行多达 16 个此类课程。

起初，我只是在我的主课上这样做：

```
MJPEGStreamer *client = ...;
[client start]; 
```

并在`MJPEGStreamer.m`：

```
[inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
[outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

但这给了我非常糟糕的表现和各种错误。我假设我`NSStream`在主线程上运行所有这些，所以我改变了这个调用：

```
[client start] 
```

对此：

```
[NSThread detachNewThreadSelector:@selector(start) toTarget:client withObject:nil]; 
```

经过一点调试，我发现它正在*创建*这些线程，但没有正确停止它们。它会关闭`NSStream`s，但线程仍然存在。

然后我开始想知道这样做的最佳方法是什么：

*   我是否应该保持原样，只是确保在关闭`NSStream`s 时杀死线程？（我如何杀死线程？）

*   我应该创建一个所有`MJPEGStreamer`类都将在其上运行的新线程吗？

*   我应该使用`NSOperationQueue`吗？

# android - Android 9-Patch 缩放问题

> ID：14323630
> 
> 赞同：3
> 
> 时间：2013-01-14T17:38:16.720
> 
> 标签：android, background, scale, nine-patch

使用 9 补丁图像作为 EditText 字段的背景时，我遇到了缩放问题。我有一个延伸整个宽度的表格，在这里我有以下表格行，它填充了表格的宽度。

问题是我使用 9-patch 图像作为背景，但编辑文本字段没有拉伸到整个宽度，它只拉伸到提示文本的宽度。

```
<TableRow
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical|center_horizontal" >

    <EditText
        android:id="@+id/et_username"
        android:contentDescription="@string/hint_enterUsername"
        android:hint="@string/hint_enterUsername"
        android:singleLine="true"
        android:textSize="@dimen/edittext_textsize"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"                    
        android:gravity="center_horizontal|center_vertical"
        android:background="@drawable/background_field_top" />

</TableRow> 
```

我可以在图形视图中看到行的宽度确实拉伸，但 EditText 字段没有，如附图所示

![图形视图](../Images/ada2ec12182beefb8136d058615bd28f.png)

有没有人对如何使edittext拉伸到整个大小有任何想法？以下是我正在使用的 9-patch 图像。

![9 补丁图像](../Images/26be0269449c82ebae80da8fa5b95020.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:30:06.940

[来自TableRow](http://developer.android.com/reference/android/widget/TableRow.html)上的 Android 开发者文档

> 水平排列其子项的布局。**TableRow 应始终用作 TableLayout 的子项。**如果 TableRow 的父级不是 TableLayout，则 TableRow 将表现为水平 LinearLayout。

**@Nipun Gogia 的答案不正确，为什么要在只有一个**EditText 子项的 LinearLayout 中放置一个 TableRow（表现得像一个水平 LinearLayout） ？

您应该将 EditText 视图放置为[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)的直接子视图，然后它将显示为跨越所有表格列的单行。如果需要，您可以添加更多 TableRow 和列。

使用 Nine-Patch 拉伸 EditText 视图的背景图像：

您需要编辑9.png文件的9-patch规则设置图像的可拉伸区域，将顶部规则（黑色1px线）放在图像中间，现在它只在透明端拉伸，留下图像未拉伸。了解她的方法：http: [//developer.android.com/tools/help/draw9patch.html](http://developer.android.com/tools/help/draw9patch.html)

重要！请记住使用扩展名 .9.png 保存图像

* * *

以文件扩展名保存的九补丁图像：背景。**9.png** _

![在此处输入图像描述](../Images/337ecd6f035b832ae0dcb521042da608.png)

* * *

修改较小的图像，由于九个补丁规则，它看起来与上面相同。

![修改后的图像](../Images/9d5042a9ceeb2f5c8f47767dcce4a727.png)

* * *

修改后的图像，但高度不可拉伸。

![在此处输入图像描述](../Images/3de46f8d3fc54f348f976474acdf9ee5.png)

* * *

*注意：如果使用“将图像另存为..”下载上述图像，请记住在文件名中添加**.9.png**以使其正常工作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T09:58:00.193

确保您的图像文件名是 background_field_top.9.png （确保 .9\. 存在） 我对您的图像做了一些小改动，以便圆角更平滑，但这不是核心问题。![建议图片](../Images/0cada8e4bc90586e7f642df274ce23dc.png) 如果这没有帮助，请检查背景在没有表格的情况下是否正常工作，以确定问题是布局还是背景图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T07:02:51.397

你对我来说工作得很好..我正在使用我自己的 9 补丁......这是我的代码：

```
 <LinearLayout
            android:id="@+id/layout"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TableRow
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center_vertical|center_horizontal" >

                <EditText
                    android:id="@+id/et_username"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:background="@drawable/areanumber"
                    android:gravity="center_horizontal|center_vertical"
                    android:singleLine="true"
                    android:text="hello" />
            </TableRow>
        </LinearLayout> 
```

这里 areanumber 是我的 9 补丁图像...只需尝试将您的代码包装在线性布局中我实现了您的 9 补丁图像并且它也可以正常工作

![在此处输入图像描述](../Images/103ff520eee1290ab4e01ad02cede2cf.png)

# php - 使用 ajax 和 php 进行多次更新

> ID：14323631
> 
> 赞同：0
> 
> 时间：2013-01-14T17:38:17.017
> 
> 标签：php, mysql

嘿伙计们，我正在尝试使用 php ang ajax 更新我的数据库，但假设文本框是动态的，这就是为什么我试图通过单击一个按钮使用多个更新来更新数据库，但是我的火虫说“你的SQL 语法；查看与您的 MySQL 服务器版本相对应的手册，以在 '= '100' WHERE student_id = '33' AND subject_id = '2' AND school_id = '1' AND adv' 在第 1 行附近使用正确的语法“我不太确定我的代码，因为我只是在尝试如何在 ajax 中使用 php 进行操作。

**PHP：**

```
 session_start();
    $school_id = $_SESSION['school_id'];
    $faculty_id = $_SESSION['user_id_fac'];
    $subject_id = $_POST['subject_id'];
    $year_grade_level = $_POST['year_level'];
    $subject_handeler_id = $_POST['subject_handler_id'];
    $student_grades_boy = $_POST['student_grades_boy'];
    $student_grades_girl = $_POST['student_grades_girl'];

    $update_grades_boys = "UPDATE registrar_grade_archive SET"; 

    //SET status = '0' WHERE subject_id = '$subject_id'"

    $vaues_girl = array();
    $values_boy = array();

    foreach ($student_grades_boy as $key=>$data) {
                                $student_id_B= $data['studnt_B_id'];
                                $grade_B = $data['studnt_grade_B'];

        $values_boy[$key] = 'grade = \''.$grade_B.'\' WHERE student_id = \''.$student_id_B.'\' AND subject_id = \''.$subject_id.'\' AND school_id = \''.$school_id.'\' AND advisor_faculty_id = \''.$faculty_id.'\' AND subject_handler_id = \''.$subject_handeler_id.'\' ' ;

                            }

        $values_boy = implode(', ', $values_boy);

        $ready_edit_grades_boy = $update_grades_boys . $values_boy;

        $save_grades_boy = mysql_query($ready_edit_grades_boy) or die(mysql_error()); 
```

请帮助伙计们。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:44:28.017

这里有一些问题：

*   如果`$student_grades_boy`包含超过 1 个项目，您的 sql 将有多个`WHERE`语句（您只能有 1 个）；
*   你需要一个空格`SET`和列名；
*   你有一个严重的 sql 注入问题；
*   您应该切换到 PDO 或 mysqli，因为这些`mysql_`功能已被弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:42:16.903

看来您在`SET`和之间没有空格`grade`。

在此处添加空格应该可以解决问题：

```
$update_grades_boys = "UPDATE registrar_grade_archive SET "; 
```

如果这不这样做，如果您可以发布结果`echo $ready_edit_grades_boy;`并更新您的问题，这将非常有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:42:36.280

尝试

```
$update_grades_boys = "UPDATE registrar_grade_archive SET "; 
```

`SET`..之后需要一个空格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T17:41:06.863

你没有转义变量，所以它可能是你的值中的一些 ' 或 " 。

[http://php.net/manual/en/mysqli.real-escape-string.php](http://php.net/manual/en/mysqli.real-escape-string.php)

# entity-framework - 实体框架函数导入返回不正确的列信息

> ID：14323634
> 
> 赞同：2
> 
> 时间：2013-01-14T17:38:34.863
> 
> 标签：entity-framework

我正在尝试导入一个`spa_SessionLoad`应该从我的`Session`管理表中返回特定行的函数。当我单击“获取列信息”按钮时，它会从不同的存储过程 ( `spa_InventoryUpdate`) 中提取信息，该存储过程返回单个字符串。

我正在使用 sql 2008 数据库，使用数据库优先方法。

我已经构建了一些其他函数导入，它们似乎都是正确的。
我已经验证了 SQL Server 上的代码在执行存储过程时会返回一行。

罪魁祸首似乎是我的“加载”函数包含一些清理代码来处理废弃的会话，最终调用该`spa_InventoryUpdate`过程。导入工具似乎对该调用的返回感到困惑`EXEC`，而不是 'Load' 的返回。

无论如何，如果它提取错误的返回信息，我怎样才能导入函数？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:26:24.727

事实证明，如果您知道实际的返回类型，您可以在 UI 中指定它。就我而言，我知道它确实返回了一个“会话”行，所以我选择了我的“会话”EF 对象，一切都按要求工作。

# ios - iOS仿射旋转只工作一次

> ID：14323639
> 
> 赞同：0
> 
> 时间：2013-01-14T17:38:49.417
> 
> 标签：ios, objective-c, core-animation

我有一个按钮，我想用它来打开/关闭视图...

它是一个箭头，打开时箭头会旋转 180°。

并且在关闭时，它应该向后旋转 180°。

但是，它在打开时只旋转一次，但在关闭时不会再次旋转。此外，如果我第二次打开它，即使第一次打开它也不会再次旋转。

这是代码：

```
 - (id)initWithFrame:(CGRect)frame
    {
        mediaOpened = NO;
        media   = [UIButton buttonWithType:UIButtonTypeCustom];
        [media retain];
        [media setBackgroundImage:[ImageController getImageNamed:@"arrow.png"] forState:UIControlStateNormal];
        [media addTarget:self action:@selector(toggleMedia) forControlEvents:UIControlEventTouchUpInside];
        media.frame = CGRectMake(2, 10, 26, 17);
        [self addSubview:media];
    }

    -(void) rotateMedia {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationBeginsFromCurrentState:YES];
        [UIView setAnimationDuration:0.3];

        float   angle = M_PI;
        media.transform = CGAffineTransformMakeRotation(angle);

        [UIView commitAnimations];
    }

    -(void) mediaClicked {
        if (self.delegate != nil) 
            [self.delegate mediaClicked];

        [self rotateMedia];
    }

    -(void) mediaUnclicked {    
        if (self.delegate != nil)
            [self.delegate mediaUnClicked];

        [self rotateMedia];
    }

    -(void) toggleMedia {
        if (!mediaOpened)
            [self mediaClicked];
        else
            [self mediaUnclicked];
        mediaOpened = !mediaOpened;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:46:08.977

添加行：

```
media.transform = CGAffineTransformIdentity; // Add this line to reset from current angle
media.transform = CGAffineTransformMakeRotation(angle); 
```

在应用旋转之前。这将从当前位置开始旋转，否则您总是从同一位置开始。你正在做的是旋转到那个角度，在它到达那个角度之后，连续的动画试图动画到它已经在的位置，因此没有动画。

# ios - iOS应用程序中的CGContext错误

> ID：14323645
> 
> 赞同：0
> 
> 时间：2013-01-14T17:39:16.163
> 
> 标签：ios, objective-c, cgcontext

当我运行我的应用程序时，它运行良好，但在其视图之间的转换期间，我在控制台输出中有很多 CGContext 错误，但应用程序仍然运行良好，没有我没有看到的崩溃或错误。

描述：所以我只运行我的应用程序 - 一切正常 - 但控制台中出现错误消息： ![在此处输入图像描述](../Images/e6ff21e439072f5cc56d8748a267d09f.png)

在任何其他视图转换之后，它们会一次又一次地出现。所以问题 - 如何解决这个问题？此错误消息的原因可能是什么？我的应用程序中有很多视图和代码，所以我什至不知道哪个部分容易出错。但是这些消息出现在我的应用程序中所有视图之间的转换之后。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:56:03.267

在您的代码中查找调用 CGContextSaveGState、CGContextSetBlendMode、CGContextSetApha 等的一些方法。您可能找不到很多执行此操作的地方。

好吧，如果您找到它，请查找创建上下文的语句（就在控制台日志中列出的语句之前），并尝试了解它失败的原因。您可以在该行设置断点并检查`CGContextCreate`调用的参数。

如果您需要更多帮助，请粘贴您（希望）找到的代码。

# php - 如何限制用户每个会话只登录一次？

> ID：14323648
> 
> 赞同：0
> 
> 时间：2013-01-14T17:39:33.260
> 
> 标签：php, login, symfony-1.4

我正在使用 Symfony 1.4 应用程序，我需要防止用户能够多次登录应用程序，我的意思是如果他/她已经登录，它应该无法登录只打开一个新的浏览器。

*   用户在 Chrome 上登录。
*   打开 Firefox，尝试登录，然后无法登录，因为会话已在 Chrome 上处于活动状态

我想避免同一用户在同一台​​计算机或另一台计算机上使用不同的浏览器开始另一个会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:47:34.757

您可以通过调用来检查用户是否已登录：

```
sfContext::getInstance()->getUser()->isAuthenticated() 
```

或内部行动：

```
$this->getUser()->isAuthenticated() 
```

所以我想你想要这样的东西：

```
public function executeLogin($request)
{
    if ($this->getUser()->isAuthenticated()) {
        // redirect or whatever
        // $this->redirect(...);
    } else {
        // login user properly
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T10:08:50.313

我想到的唯一解决方案是在 MySQL（或您的数据库）中使用会话，然后检查给定用户的会话是否处于活动状态，以便它可以登录或不登录。

这不会是一件容易的事。我做过一次，但找不到源代码。所以我将描述你必须做什么。

1.  您需要激活`sfPDOSessionStorage`以将会话存储在数据库中（[您可以关注此博文](http://grahamc.com/blog/how-to-setup-sfpdosessionstorage/)）
2.  然后创建一个扩展的自定义存储，`sfPDOSessionStorage`以便能够将更多字段添加到会话表中。

    您的 中将有一个新字段（例如`sess_user_id`）`factories.yml`，如下所示：

    ```
    all:
      storage:
        class: myCustomPDOSessionStorage
        param:
          db_table:       session
          database:       propel

          db_id_col:      sess_id
          db_data_col:    sess_data
          db_time_col:    sess_time
          db_user_id_col: sess_user_id 
    ```

3.  您需要将方法`sessionRead`和`sessionWrite`从您的自定义会话存储更新到：

    *   插入/更新新字段（user_id）
    *   检查 user_id 是否已经存在并且会话时间是否正常。如果不是，则抛出异常。您必须在用户登录时捕获此异常，以显示有关该问题的消息。

# java - Java UUID 的长表示

> ID：14323653
> 
> 赞同：5
> 
> 时间：2013-01-14T17:39:56.487
> 
> 标签：java, out-of-memory, uuid

我将大量 Java 存储`UUID`到`HashMap`as 行中，使用`UUID.toString()`. 由于数据很大，很快就会抛出`OutOfMemoryError`. 现在我正在考虑一种紧凑的方式来表示`UUID`，最好是类似`long`的，然后我可以很容易地`UUID`用这种`long`表示重建 。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T17:45:57.610

UUID 本质上是一个数字，但它是一个 128 位的数字，是 java long 大小的两倍。您可以使用 BigInteger（这可能并不比将 UUID 存储为字符串更节省空间），或者您可以将 UUID 封装在一个包含两个 long 的对象中——一个用于前 64 位，一个用于后 64 位。

给定 UUID `550e8400-e29b-41d4-a716-446655440000`，您需要创建两个 long ，一个包含 number `0x550e8400e29b41d4`，一个包含 number `0xa716446655440000`。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-14T18:12:19.477

> 我将大量 Java 存储`UUID`到`HashMap`as 行中，使用`UUID.toString()`.

所以你的意思是`HashMap<String, MyObject>`？

与. `HashMap<UUID, MyObject>`_ `HashMap<String, MyObject>`A`UUID`占用的空间比实际少`String`（两个`long`值变为 16 字节，而`char[36]`72 字节，这将为您节省近 80% 的空间）。

如果改变这还不够，那么请考虑这些`UUID`值在 JVM 中是否重要。如果 ID 只需要对于单个进程是唯一的（您是保存`HashMap`到磁盘还是在 Java 进程*之间*共享它？），那么您可以使用`int`，因为 a`HashMap`不能比任何情况都大`Integer.MAX_VALUE`。因此`HashMap<UUID, MyObject>`，您将拥有`HashMap<Integer, MyObject>`. 更好的是，`Short`如果您将拥有少于 2 ^(16 个)对象，则可以使用，从而节省更多空间。但是，如果你得到一个`OutOfMemoryError`，我怀疑你可能有超过 65536 个对象。

最后，如果所有其他方法都失败了，请为您的 JVM 分配更多内存，如[本问题所示](https://stackoverflow.com/questions/2294268/how-can-i-increase-the-jvm-memory)。

# python - 使用 urllib 搜索源码

> ID：14323654
> 
> 赞同：0
> 
> 时间：2013-01-14T17:39:59.790
> 
> 标签：python, encoding, urllib

我正在尝试编写一个脚本来搜索网站源代码中的文本。我有它，所以它成功地抓取了源代码并将其打印出来，看起来像： `b'<?xml version="1.0" encoding="UTF-8" ?>\n<!DOCTYPE html`......等等

但是，当尝试使用 搜索在代码中查找“div”标签时`print(page.find('div'))`，我收到一条错误消息，指出`TypeError: Type str doesn't support the buffer API`我认为这与我收到一个字节文字有关。如何将其编码为 UTF-8 或 ASCII 以便能够搜索字符串？

如果需要，这是我正在运行的简单代码：

```
import urllib.request
from urllib.error import URLError

def get_page(url):
  #make the request
  req = urllib.request.Request(url)
  the_page = urllib.request.urlopen(req)

  #get the results of the request
  try:
    #read the page
    page = the_page.read()
    print(page)
    print(page.find('div'))

  #except error
  except URLError as e:
    #if error has a reason (thus is url error) print the reason
    if hasattr(e, 'reason'):
      print(e.reason)
    #if error has a code (thus is html error) print the code and the error
    if hasattr(e, 'code'):
      print(e.code)
      print(e.read()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:04:04.457

我认为您正在使用 Python v.3（如 print 作为函数而不是语句所述）。

在 Python 3 中，**page**是一个字节对象。所以你也需要使用字节对象来搜索它。试试这个：

```
print(page.find(b'div')) 
```

希望这可以帮助

# c - 可靠的shellcode测试

> ID：14323658
> 
> 赞同：1
> 
> 时间：2013-01-14T17:40:02.200
> 
> 标签：c, linux, shellcode

如下代码应该能够“测试”shellcode，即执行它。

```
char shellcode[] = "...";

int main(int argc, char **argv)
{
    int (*func)();
    func = (int (*)()) shellcode;
    (int)(*func)();
} 
```

但是，当我尝试使用此类示例时，我发现代码似乎在不可执行的内存中执行，因为它在 shellcode 的第一条指令处接收到段错误。

如果我将 shellcode 声明改为 a `#define`，我可以让 shellcode 执行。然而，当 shellcode 尝试写入自己的内存时，它会停止（这个 shellcode 假设它是在堆栈上执行的）。

所以我的问题很简单，测试假设可执行（显然）和可写内存的 shellcode 的最简单和可靠的方法是什么？如果我在堆栈或堆上分配代码并尝试跳转到它，我只会遇到 NX 位保护并再次失败。现在显然我可以禁用 NX 位，但是没有更好的方法来做这个测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:51:53.603

分配一个可写且可执行的内存区域（例如使用`mmap`and `mprotect`）并将您的代码放在那里，然后像您一样调用它`main`。在 W^X、PaX 等可执行空间保护的情况下，您可以首先使您的内存区域可写以复制 shellcode，然后仅可执行以执行它，但是您的里程可能会根据保护措施的不同而有所不同.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-19T13:03:45.927

如果您只想测试功能，则可以在函数中编写相应的程序集。但是，这只会测试程序集，而不是作为字节串的 shellcode，并且如果您的 shellcode 不是由程序集严格生成的（例如，如果您跳转到“不存在”指令的中间），那将无法正常工作。在这种情况下，您必须将代码推送到可执行内存中。您可以自己分配它，或覆盖现有的 .text 部分（但您需要禁用只读）。

# php - 如何使此代码仅搜索帖子而不搜索页面？(wp_query)

> ID：14323660
> 
> 赞同：0
> 
> 时间：2013-01-14T17:40:16.130
> 
> 标签：php, jquery, wordpress

这是代码：

```
<?php global $wp_query;
$search_term=$_REQUEST['search-terms'];
if(empty($search_term))
$search_term=$_REQUEST['s'];
$wp_query->query("s=".$search_term);?>
<?php if ( have_posts() ) : ?>
<?php while(have_posts()):the_post(); global $post;?> 
```

出于某种原因，它在结果页面中同时显示帖子和页面。如何排除页面并仅显示帖子？

我试过这个，但它不工作：

```
<?php global $wp_query;
$args = array_merge( $wp_query->query, array( 'post_type' => 'post' ) );
query_posts( $args );
$search_term=$_REQUEST['search-terms'];
if(empty($search_term))
$search_term=$_REQUEST['s'];
$wp_query->query("s=".$search_term);?>
<?php if ( have_posts() ) : ?>
<?php while(have_posts()):the_post(); global $post;?> 
```

请帮助有点紧急。我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:43:18.317

将帖子类型添加到您的查询中。

[http://codex.wordpress.org/Class_Reference/WP_Query#Type_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Type_Parameters)

```
<?php global $wp_query;
$search_term=$_REQUEST['search-terms'];
if(empty($search_term))
$search_term=$_REQUEST['s'];
$wp_query->query("post_type=post&s=".$search_term); ?>

<?php if ( have_posts() ) : ?>
<?php while(have_posts()):the_post(); global $post;?> 
```

我改变了你的第一个代码

# android - 简单的 SSH 与 JSch 连接

> ID：14323661
> 
> 赞同：20
> 
> 时间：2013-01-14T17:40:27.390
> 
> 标签：android, ssh, jsch

我正在尝试从这个简单的例子中做一些事情：

[SSH，用安卓执行远程命令](http://www.eridem.net/android-tip-021-ssh-execute-remote-commands-with-android)

我只是想看看我是否可以使用 SSH 从我的 android 手机连接到 linux 服务器，但它不起作用......

这是我的主要代码：

```
package com.example.ssh;

import java.util.Properties;
import com.jcraft.jsch.JSch;
import com.jcraft.jsch.Session;
import android.os.Bundle;
import android.app.Activity;

 public class MainActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    try
    {
        JSch jsch = new JSch();
          Session session = jsch.getSession("root","192.168.0.26", 22);
          session.setPassword("xxxxx");

          // Avoid asking for key confirmation
          Properties prop = new Properties();
          prop.put("StrictHostKeyChecking", "no");
          session.setConfig(prop);

          session.connect();

    }
    catch (Exception e)
    {
      System.out.println(e.getMessage());
    }
}
} 
```

我做错什么了 ？我没有错误消息，并且在我的 Linux 上看不到任何 SSH 连接。我添加了库 jsch 和 jzlib。我可以毫无问题地连接腻子会话。

EDIT1：事实上，我发现了一个错误，它解释了为什么即使我不知道如何解决问题它也不起作用。错误是：

android.os.NetworkOnMainThreadException

所以这似乎意味着该应用程序无法在其主线程上执行网络操作......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T19:03:59.320

您必须在另一个线程中执行该代码，这样您就不会挂起 UI 线程，这就是该异常的含义。如果 UI 线程正在执行网络调用，则它无法重新绘制 UI，因此您的用户会在应用程序等待网络调用完成时看到不响应他们的冻结 UI。Android 想要避免这样的不良用户体验，所以它会通过抛出这个异常来阻止你做这样的事情。

您的 onCreate() 方法应该调用另一个线程（我建议在原始线程上使用 AsyncTask）来执行 SSH 连接。然后，当它完成后，它可以将结果发布回 UI 线程，并从 UI 线程安全地更新应用程序的 UI。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-11-02T18:38:46.660

chubbsondubs 的解决方案是完美的。我也只想将我为这个问题编写的代码分享给那些想要快速解决方案的人：

```
public class MainActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    new AsyncTask<Integer, Void, Void>(){
       @Override
       protected Void doInBackground(Integer... params) {
           try {
                 executeRemoteCommand("root", "myPW","192.168.0.26", 22);
           } catch (Exception e) {
                 e.printStackTrace();
           }
           return null;
       }
    }.execute(1);
}

public static String executeRemoteCommand(String username,String password,String hostname,int port)
        throws Exception {
    JSch jsch = new JSch();
    Session session = jsch.getSession(username, hostname, port);
    session.setPassword(password);

    // Avoid asking for key confirmation
    Properties prop = new Properties();
    prop.put("StrictHostKeyChecking", "no");
    session.setConfig(prop);

    session.connect();

    // SSH Channel
    ChannelExec channelssh = (ChannelExec)
            session.openChannel("exec");
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    channelssh.setOutputStream(baos);

    // Execute command
    channelssh.setCommand("lsusb > /home/pi/test.txt");
    channelssh.connect();
    channelssh.disconnect();

    return baos.toString();
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-02-08T02:47:26.600

[Kotlin](https://kotlinlang.org/)解决方案：

```
import android.os.AsyncTask
import android.os.Bundle
import android.support.v7.app.AppCompatActivity
import com.jcraft.jsch.ChannelExec
import com.jcraft.jsch.JSch
import java.io.ByteArrayOutputStream
import java.util.*

class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        SshTask().execute()
    }

    class SshTask : AsyncTask<Void, Void, String>() {
        override fun doInBackground(vararg p0: Void?): String {
            val output = executeRemoteCommand("demo", "password", "test.rebex.net")
            print(output)
            return output
        }
    }
}

fun executeRemoteCommand(username: String,
                         password: String,
                         hostname: String,
                         port: Int = 22): String {
    val jsch = JSch()
    val session = jsch.getSession(username, hostname, port)
    session.setPassword(password)

    // Avoid asking for key confirmation.
    val properties = Properties()
    properties.put("StrictHostKeyChecking", "no")
    session.setConfig(properties)

    session.connect()

    // Create SSH Channel.
    val sshChannel = session.openChannel("exec") as ChannelExec
    val outputStream = ByteArrayOutputStream()
    sshChannel.outputStream = outputStream

    // Execute command.
    sshChannel.setCommand("ls")
    sshChannel.connect()

    // Sleep needed in order to wait long enough to get result back.
    Thread.sleep(1_000)
    sshChannel.disconnect()

    session.disconnect()

    return outputStream.toString()
} 
```

补充`build.gradle`：

```
dependencies {
    ...
    compile group: 'com.jcraft', name: 'jsch', version: '0.1.54'
} 
```

# javascript - 仅当所有先前的函数都返回 false 时才启动函数

> ID：14323664
> 
> 赞同：0
> 
> 时间：2013-01-14T17:40:52.900
> 
> 标签：javascript, html

我是 javascripts 的新手，所以如果这看起来很明显，请原谅我，但我想要的是启动第二个函数，如果之前函数操作的所有条件都返回 false

```
function validateForm()
{
    var file = document.getElementById('file');
        if (file.files[0].size >= 11000000) {

        alert('File too Big');
        return false;
    }

    var x=document.forms["myForm"]["title"].value;
         if (x==null || x==""){

        alert("First name must be filled out");
        return false;
    }

    // if both returned false then start this function:

    function start_Uploading(){
        document.getElementById('message').innerHTML = 'Loading...';

       return true;
    } 
```

的HTML：

```
<input type='submit'  onclick="return validateForm();"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:48:07.327

您只能从函数返回一次，因此您必须返回错误值的二进制 AND：

```
function validateForm()
{
    var condition1;
    var condition2;

    if(...) condition1 = false;
    if(...) condition2 = false;

    return (condition1 && condition2);
} 
```

如果 validateForm 返回 false，这就是启动函数的方式：

```
if(!validateForm())
{
     // Execute your function
     start_Uploading();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:48:29.810

您的返回值结束函数调用。您只想设置一个变量以查看输入是否有效。然后，您可以检查 isValid 是否为真，然后从那里调用您的函数。

在您的原始代码中还值得注意的是

```
function start_Uploading(){...} 
```

实际上并不运行该函数，它只是定义它。您需要`start_uploading()`执行该功能。

```
function validateForm()
{
    var isValid = true;
    var file = document.getElementById('file');
    if (file.files[0].size >= 11000000) {
        alert('File too Big');
        isValid=false;
    }

    var x=document.forms["myForm"]["title"].value;
    if (x==null || x==""){
        alert("First name must be filled out");
        isValid=false;
    }

    // if both returned false then start this function:

    function start_Uploading(){
        document.getElementById('message').innerHTML = 'Loading...';
        return true;
    }
    if(isValid){
        start_Uploading();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:48:32.657

调用此函数，它将检查第一个函数和第二个函数的值，如果它们返回 false，则 start_Uploading() 函数将执行：

```
function sampleFunction() {
                if(!firstFunction() && !secondFunction()){
                    start_Uploading();
                } 
            } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T17:52:07.310

以 jQuery 方式：

```
<script type="text/javascript">
$("#myForm").submit(function() {
    if ($("#file")[0].files[0].size >= 11000000) {
        alert('File too Big');
        return false;
    }

    if ($("#myForm input[name=title]").attr("value") == ""){
        alert("First name must be filled out");
        return false;
    }

    $('#message').html('Loading...');
    return true;
})
</script>
<form id="myForm">
    <input type='submit'>
</form> 
```

# iphone - NSMutableURLRequest 发送部分帖子正文

> ID：14323667
> 
> 赞同：3
> 
> 时间：2013-01-14T17:41:06.107
> 
> 标签：iphone, ios, post, nsmutableurlrequest

我正在使用 NSMutableURLRequest 将 base64 编码图像作为发布请求的一部分发送到服务器。我作为帖子正文记录的内容与服务器接收的内容不同。服务器似乎得到了一个截断的版本，就好像连接在中途中止一样。请看下面的代码：

```
NSString *dataStr = [NSString stringWithFormat:@"request_data=%@",reqStr];
NSLog(@"datastr is %@",dataStr);
NSData *dataForUrl = [dataStr dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"nsdata length is: %i",[dataForUrl length]);
[urlRequest setHTTPBody:dataForUrl];
[urlRequest setValue:[NSString stringWithFormat:@"%d", [dataForUrl length]] forHTTPHeaderField:@"Content-Length"];
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
[NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *res, NSData *data, NSError *err) {
    // ... 
} 
```

第一个日志语句显示正确的数据。我什至将字符串的 base64 部分带到[http://www.motobit.com/util/base64-decoder-encoder.asp](http://www.motobit.com/util/base64-decoder-encoder.asp)，将其解码为 jpg，它是正确的图像。第二条日志语句显示长度是正确的大小（例如，当图片为 422480 时为 422624）。

我找不到连接详细信息或数据有任何问题。电话建立连接，发送一些数据，然后电话停止发送或服务器停止接收。是什么原因造成的？

编辑：链接到示例数据[http://pastebin.com/BS9HjKhg](http://pastebin.com/BS9HjKhg)

Edit2：服务器或 iOS 正在将 + 从图像转换为空格。当我找出正确的发送方式时，我会发布答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:38:40.000

我能够将来自服务器的完整示例与 xcode 记录的内容进行比较，并发现`+`转换为`[space]`. 因为那是唯一有问题的字符，而且 iOS 中的 url 编码有问题，所以我只是做了

```
NSString *dataStr = [NSString stringWithFormat:@"request_data=%@",[reqStr stringByReplacingOccurrencesOfString:@"+" withString:@"%2B"]]; 
```

服务器再次接受它们。我仍然不确定服务器是问题还是iOS。连接的其他操作系统使用相同的 application/x-www-form-urlencoded 作为其内容类型，没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:17:58.450

`NSData`我建议通过[Nick Lockwood 的 Base64 类](https://github.com/nicklockwood/Base64)进行从 Base64 字符串的转换。

那

```
NSData *dataForUrl = [dataStr dataUsingEncoding:NSUTF8StringEncoding]; 
```

让我有点担心（在查看 Base64 是如何实现转换之后更是如此）......

# git - 如何从某个分支创建不同的分支

> ID：14323669
> 
> 赞同：1
> 
> 时间：2013-01-14T17:41:09.297
> 
> 标签：git

我刚刚创建了指向`origin/master` 我想创建一个`release`和一个`production`分支的默认存储库

我应该从 origin/master 本身创建一个 git 分支吗

例如`git branch release`和`git branch production`

或者

我应该从原产地/发布创建原产地/生产吗

```
git branch release
git push origin release 
```

和

```
git checkout release
git branch production 
```

什么是首选方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:02:15.937

在你的情况下，没关系。分支引用（本地或远程）就是：对提交的*引用。*正在做

```
git checkout master
git branch release
git branch production 
```

或者

```
git checkout master
git branch release
git checkout release
git branch production 
```

完全等效，因为最终它们都只是对同一提交的引用（您可以通过运行[`git rev-parse`](http://git-scm.com/docs/git-rev-parse)每个分支名称并比较结果来验证这一点）。Git 不记录从哪个分支创建分支，而只知道它们之间最近的共同提交是什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:58:24.780

我认为您在这里混淆了这些概念。

从哪个分支创建新分支并不重要，最重要的是您希望它从哪个提交开始。

git 中的分支和标签只是指向特定提交的指针（其历史记录在[DAG](http://en.wikipedia.org/wiki/Directed_acyclic_graph)中表示）。不同之处在于标签通常在时间上保持静态，而分支通常随着编码的进展而变化。

所以基本上，当您在历史记录中获得第一个版本时，创建一个`release`指向该提交的分支。（我也建议标记它。）

我不确定您要实现什么目标，可能您真的不需要分支，标签就足够了。我建议您阅读[pro git 书籍](http://git-scm.com/book)，以更熟悉分支（[pro git 的“标记”章节](http://git-scm.com/book/en/Git-Basics-Tagging)）和标记（[pro git 的“分支是什么”章节](http://git-scm.com/book/en/Git-Branching-What-a-Branch-Is)）的概念，然后再对您的存储库做出这些决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:56:10.360

`remotes/origin/...`分支是远程跟踪分支。您不应该直接操作这些，它们充当跟踪远程存储库的分支。（例如，当您这样做时，它们会更新`git fetch <remote-repo-name>`。）

要回答您的问题，您应该从本地 master 创建发布和生产分支（所以我在下面假设当前分支是 master）：

```
git checkout -b release
<do some work>
git add .
git commit -m <commit message>
git push -u origin release 
```

`git checkout -b`创建一个新分支并在一条指令中切换到它。`git push -u`推送到远程和分支并添加上游引用，因此当您拉取并推送到该分支时，您不再需要定义它们。

相同的工作流程适用于生产分支（尽管 master 通常被认为是生产就绪的）

# requirejs - 使用 Require 加载由 TypeScript 生成的 min.js 文件

> ID：14323671
> 
> 赞同：5
> 
> 时间：2013-01-14T17:41:19.217
> 
> 标签：requirejs, typescript

我有一个使用 Typescript 和 RequireJs 的完整应用程序，它运行良好。我现在已经下载了 WebEssentials，它正在生成缩小的脚本文件。WebEssentials 会生成与原始脚本文件同名的单独 *.min.js 文件。

如何告诉 RequireJs 加载我的缩小文件而不是我的原始脚本文件？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T22:29:59.277

您可以使用路径配置来覆盖模块路径。您甚至可以回退到非缩小文件：

```
requirejs.config({
    enforceDefine: true,
    paths: {
        jquery: [
            'lib/jquery.min',
            'lib/jquery'
        ]
    }
}); 
```

可能有一种更通用的方法来使用我不知道的最小文件！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-26T16:30:44.550

您可以创建一个简单的自定义版本的 require ，它将有条件地将 '.min.js' 附加到所有通常只接收 '.js' 附件的模块文件请求中。考虑以下：

```
 //Establish a new 'useMinified' boolean in your initial config.
    require.config({ useMinified: true }); 
```

然后，编辑 require.js 库文件并修改 'nameToUrl' 函数如下：

```
 //Join the path parts together, then figure out if baseUrl is needed.
url = syms.join('/');

    //new statement
var extension = config.useMinified ? '.min.js' : '.js';

    //customized statement
url += (ext || (/^data\:|\?/.test(url) || skipExt ? '' : extension));

url = (url.charAt(0) === '/' || url.match(/^[\w\+\.\-]+:/) ? '' : config.baseUrl) + url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T00:54:59.700

这没有什么魔法。不过你有几个选择

1.  使用[RequireJS 优化器](http://requirejs.org/docs/optimization.html)为您生成最小文件。非常可配置。
2.  使用[`--out`](http://www.codebelt.com/typescript/typescript-compiler-commands/)编译器选项将所有文件连接成一个并缩小它
3.  创建一个脚本/批处理文件以将您的应用程序复制到其他地方，将所有 .min.js 文件重命名为 .js 并覆盖非 min'd 文件。或者其他一些混合，但你明白了要点
4.  使用史蒂夫提到的[路径配置。](http://requirejs.org/docs/api.html#config-paths)适用于小型应用程序，不太适合大型应用程序。

为了获得最佳性能，您应该研究优化器并确定单脚本方法是正确的决定还是多个较小的库是更好的方法。我怀疑加载每个 .min.js 文件是否适合您。

# c++ - c++ std::copy 输入迭代器（指针）到向量

> ID：14323674
> 
> 赞同：0
> 
> 时间：2013-01-14T17:41:48.320
> 
> 标签：c++, vector, iterator, copy, std

嗨，我想了解为什么以下代码不起作用。我正在尝试使用指针作为 std::copy 算法的输入迭代器类型。fsRead.Buffer 指向我要复制的数据的开头， fsRead.BufferSize 是我们要复制的数据的大小。

```
// AllocateZeroPool(UINT64) takes an input size, and returns a pointer to allocated memory. (this is the existing C api)
fsRead.Buffer = static_cast<UINT8*>(AllocateZeroPool(fsRead.BufferSize));
//
// this next line populates the data into fsRead.Buffer
auto status = mFs->read_data(nullptr, &fsRead);

the type of file.data is: std::vector<UINT8>
std::copy(fsRead.Buffer, fsRead.Buffer + fsRead.BufferSize, file.data.begin()); 
```

file.data.size() 在上面的 std::copy() 调用中为零。

要将数据放入矢量 file.data，我目前手动进行复制：

```
for(auto i(0U); i < fsRead.BufferSize; ++i) {
    file.mBinaryData.emplace_back(fsRead.Buffer[i]);
} 
```

为什么使用两个指针作为输入迭代器似乎不起作用？

编辑：为了澄清，我的意思是实际上没有数据被复制到 file.mBinaryData 向量中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:45:25.213

`std::vector`必须使用[`std::back_inserter`](http://en.cppreference.com/w/cpp/iterator/back_inserter). 没有它，迭代器将不会`push_back`复制数据，而只会增加给定的迭代器。

```
std::copy(fsRead.Buffer, fsRead.Buffer + fsRead.BufferSize, std::back_inserter(file.data)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T17:45:41.420

这失败了，因为访问向量的迭代器永远不会改变向量的大小。

您可以使用其中一种标准迭代器适配器，例如`back_inserter`，来代替。看起来像这样：

```
// Looks like you really wanted copy_n instead...
std::copy_n(fsRead.Buffer, fsRead.BufferSize, std::back_inserter(file.data)); 
```

# html - 带有子菜单的水平导航菜单

> ID：14323675
> 
> 赞同：-3
> 
> 时间：2013-01-14T17:41:49.033
> 
> 标签：html, css, jquery-ui, nav

我有这个导航菜单：

[http://jsfiddle.net/laziale/T45tD/4/](http://jsfiddle.net/laziale/T45tD/4/)

我想知道如何修复导航菜单可通过子菜单扩展的菜单。我输入了一些样本数据。

这是源代码：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link type="text/css" rel="stylesheet" href="App_Themes/Main/style.css" />
    <link type="text/css" rel="stylesheet" href="App_Themes/Main/reset.css" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.2/themes/base/jquery-ui.css" />
  <script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  <script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>  
</head>
<body>
    <form id="form1" runat="server">
        <div class="pagetop">
            <div class="head pagesize">
            <div class="head_top">
                <div class="topbuts">
                    <ul class="clear">                    
                    </ul>
                  </div>
                <div class="user clear">
                        <span class="user-detail">                  
                    </span>

                </div>
                <div class="logo clear">
                <a href="#" title="Home">
                    <img src="Images/logo.jpg" class="picture" />
                    <span class="textlogo">                     
                    </span>
                </a>
                    </div>
              </div>
                <div class="menu">
                    <ul class="clear">
                        <li class="active"><a href="#">Client</a>
                            <ul>
                                <li class="subNav"><a href="#">Client Summary</a></li>
                            </ul>
                        </li>
                        <li><a href="#">Agent</a>
                         <ul>
                                <li class="subNav"><a href="#">Agent Summary</a>
                              <ul>
                                <li class="subNav"><a href="#">Link1y</a></li>
                                <li class="subNav"><a href="#">Link2</a></li>
                            </ul></li>
                            </ul>
                      </li>
                        <li><a href="#">System Utility</a>
                         <ul>
                                <li class="subNav"><a href="#">Link1</a>
                                  <li class="subNav"><a href="#">Link2</a>
                                    <li class="subNav"><a href="#">Link3</a>
                           </ul>
                      </li>
                        <li><a href="#">Report</a></li>
                        <li><a href="#">Maintenance</a></li>
                        <li><a href="#">About Us</a></li>
                        <li><a href="#">Contact Us</a></li>
                    </ul>
                </div>

            </div>
        </div>
    <div>       
    </div>
    </form>
</body>
</html> 
```

和CSS：

```
body {
    min-width:1000px;
    text-align:center;
    margin:0px;
    font-family:Arial;
    font-size:12px;
    color:#666666;
    background:#8D8D8D;
}

.pagetop {
    width:100%;
    min-width:1000px;
    background-color: #333333;
    border-bottom: 4px solid #007FAA;
    position:relative;
    z-index:100;
    min-height:149px;
}

.head_top {
    position:relative;
    min-height:114px;
}

.topbuts {
    position:absolute;
    top:0px;
    right:0px;
}

.topbuts ul {
    float:right;
    }

.topbuts li {
    float:left;
    margin-left:2px;
    font-size:11px;
    font-weight: bold;
    }

.topbuts li a {
        background:#007FAA;
        text-decoration:none;
        display:block;
        color:#FFFFFF;
        line-height:16px;
        padding:1px 12px 2px 12px;
    }

ol ul {
list-style:none;
}

.head {
    padding:0px;
}
.pagesize {
    width:1000px;
    margin: 0px auto;
    text-align:left;
}

.user {
    clear:both;
    float:right;
    padding-top:27px;
}

.user-detail {
    display: block;
    float:right;
    text-align:right;
}

    .user-detail .name {
        display: block;
        line-height:normal;
        text-align:left;
        float:right;
        font-size:18px;color:#FFFFFF;
        padding:2px 0px 7px 0px;
    }

    .user-detail .text {
        color: #bbbbbb;
        clear:both;
        font-size:11px;
        line-height:18px;
        color:#FFFFFF;
        display:block;
    }

.logo {
    padding-top:20px;
}

    .logo a {
        text-decoration:none;
    }
    .logo .picture {
        float:left;
        margin-right:10px;
    }

    .logo .textlogo {
        float:left;
    }
    .logo .title {
        display:block;
        font-family:Arial;
        font-size:20px;
        color:#FFFFFF;
        font-weight: bold;
        margin-top:5px;
        letter-spacing: -0.02em;
    }
    .logo .text {
        display:block;
        font-weight: bold;
        color: #BBBBBB;
        position:relative;
        top: -2px;
    }
.menu ul {
    font-size:13px;
}

.menu li {
    float:left;
    margin-right:3px;
    padding-bottom:5px;
    position:relative;
}

    .menu li .active a {
        background: #FFFFFF;
        color: #333333;
        text-shadow: 1px 1px 1px #BBBBBB;
    }

    .menu li a {
        display:block;
        line-height:16px;
        padding: 7px 15px 7px 5px;       
        color: #FFFFFF;
        text-decoration:none;
        font-weight:bold;
        text-shadow: 1px 1px 1px #333333;
        -moz-border-radius: 3px 3px 3px 3px;
        -webkit-border-radius: 3px 3px 3px 3px;
        border-radius: 3px 3px 3px 3px;
        background:url('..images/button_glas1.png') center center repeat-x #555555;
    }

a {
    color: #006577;
    text-decoration:none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:57:58.283

您可以使用[superfish](http://archive.plugins.jquery.com/project/Superfish) jQuery 插件。

[这](http://users.tpg.com.au/j_birch/plugins/superfish/#examples)是一个演示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:54:12.053

您可以使用 javascript 并隐藏所有不需要的元素，直到您将鼠标悬停在正确的菜单元素上，或者您可以使用 CSS 执行此操作，如下所示：

```
#navmenu .submenu{
    display:none; /* dosen't show sub menus */
    overflow:visible; /* shows overflow */
}
#navmenu li:hover > .submenu{ /* when you hover an li element change children following settings */
    display:block; /* display elements */
} 
```

有效的 HTML 代码示例：

```
<div id="navmenu">
<ul>
  <li><a href="index.html" class="nav">Réalisations</a>
    <ul class="submenu">
      <li><a href="fr/realisation_web.html" class="nav">Web</a></li>
      <li><a href="fr/realisation_tshirt.html" class="nav">T-shirt</a></li>
      <li><a href="fr/prestations.html" class="nav">Autres prestations</a></li>
    </ul>
  </li>
  <li> <a href="fr/galeries.html" class="nav">Galeries</a>
    <ul class="submenu gallery">
      <li><a href="fr/boston.html" class="nav">Boston</a></li>
      <li><a href="fr/brig.html" class="nav">Brig</a></li>
      <li><a href="fr/fleurs.html" class="nav">Fleurs</a></li>
      <li><a href="fr/grece.html" class="nav">Grèce</a></li>
      <li><a href="fr/nocturnes.html" class="nav">Nocturne</a></li>
      <li><a href="fr/noir_blanc.html" class="nav">Noir&amp;blanc</a></li>
      <li><a href="fr/paris.html" class="nav">Paris</a></li>
      <li><a href="fr/portrait.html" class="nav">Portrait</a></li>
      <li><a href="fr/perspectives.html" class="nav">Perspective</a></li>
    </ul>
  </li>
  <li><a href="fr/news.html" class="nav">News</a></li>
  <li><a href="php/contact.php" class="nav">Contact</a></li>
</ul> 
```

网上有很多教程可以获得更多示例；）

# java - Lucene 和外部数据库

> ID：14323680
> 
> 赞同：2
> 
> 时间：2013-01-14T17:42:04.983
> 
> 标签：java, derby, lucene

我正在使用 Lucene 和 Derby 数据库。Lucene 包含文本索引，而 Derby 包含有关附加用户数据的信息。例如，每个文档都有一个标签。为此，Derby 数据库有两个表

**标签**：

ID

姓名

**LUCENETAGS** :

ID

LUCENEID（Lucene 中的 docID，不是字段）

TAGID

我希望用户能够搜索以下内容：

> 非常有趣的文字和**标签：有趣**

以标记是 Lucene 字段的方式更改结构不是一种选择。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:49:34.310

我相信您必须在 Lucene 中简单地执行文本搜索，然后根据查询结果将结果过滤到 Derby 中。

如果很少有文档与特定标签匹配，您还可以在数据库中查询要查询的 ID，然后将查询重写为：

```
(very interesting text) AND id:(1 2 3 etc.) 
```

可能不可行，但在标签非常稀疏的情况下，可能值得考虑。

不过，我确实想知道为什么不能将字段添加到索引中，从而复制 Derby 数据库中的存储值。在您选择从声明的结构中获取所需内容的任何实现中，与数据在索引中也可用的情况相比，您会发现性能要差得多，处理起来也更加复杂。

# mysql - MySQL 函数使用 REGEXP 捕获并返回字符串中的第二个、第三个和第四个字符

> ID：14323688
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:42:27.647
> 
> 标签：mysql, regex

这是我正在考虑使用的代码大纲：

```
CREATE function get_n_chars ( dfrom varchar(9) ) returns varchar(9)
READS SQL DATA
begin
declare d varchar(9);
dfrom REGEXP '^.(...)';
d = $1;
limit 1;
return d; 
```

收到错误我并不感到惊讶，有没有人知道正确的语法，或者这甚至是可能的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:59:57.867

根据[您上面的评论](https://stackoverflow.com/questions/14323688/mysql-function-using-regexp-capturing-and-returning-the-second-third-and-forth/14323963#comment19904297_14323688)：

> 基本问题是有一个表，其中的公司名称略有不同，但都是同一家公司。示例：“Apple Inc.”、“Apple Computers”和 Apple Incorporate。我应该把这张桌子收拾干净。我需要根据相似的名称查找重复项。所以所有三个“苹果”都是“重复的”，在确定我需要删除数据最不完整的两行之后。因此，我需要显示这三行及其 ID 号，然后删除两行。

要检索所有可疑的重复项，例如：

```
SELECT my_table.* FROM my_table JOIN (
  SELECT   LEFT(company_name, 4) AS abbr
  FROM     my_table
  GROUP BY abbr
  HAVING   COUNT(*) > 1
) t ON LEFT(my_table.company_name, 4) = t.abbr
ORDER BY my_table.company_name 
```

# iphone - iOS Phone Gap / Cordova 2.2.0 中的默认启动图像

> ID：14323692
> 
> 赞同：0
> 
> 时间：2013-01-14T17:42:39.750
> 
> 标签：iphone, ios, cordova

基于的问题：[PhoneGap 2.0 Splash 始终使用默认值](https://stackoverflow.com/questions/12291233/phonegap-2-0-splash-always-using-default)，但这并没有解决问题。

基本上我的 PhoneGap 应用程序（版本 2.2.0）不管我做了什么仍然显示默认的 Cordova 屏幕。我已更换：

`/Default-568h@2x.png`, `/Default@2x.png`, `/Default.png`, `/www/res/screen/ios/screen-iphone-portrait-2x.png`,`/www/res/screen/ios/screen-iphone-portrait.png`

我已经完成了“清理”，重建，我在 info.plist 中添加了一个“启动图像”（UILaunchImageFile）键，我已经从设备中删除了应用程序并重新构建，毕竟我仍然是显示默认的 Cordova 初始图像。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T03:46:16.233

从菜单中选择项目 -> 清理。然后重建你的项目。那应该清除缓存的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:09:43.833

I bumped into this case also. try to use the xcode file explorer in the left side to copy your new png files. sometimes its just cache it for somereason.. the same with icon's png.

# java - 在 Jetty 中，如何记录持久 HTTP 连接何时打开和关闭？

> ID：14323697
> 
> 赞同：2
> 
> 时间：2013-01-14T17:43:04.203
> 
> 标签：java, jetty, jetty-8

我正在使用码头 8.1.8。

我希望能够记录新的持久连接何时打开，通过持久连接发送了多少请求/响应，以及持久连接何时关闭。

换句话说，如何确定通过持久 HTTP 连接发送到我的 Jetty 服务器的请求/响应的平均数量？

我有一种感觉，这可能与 AbstractLifeCycle 类有关，但我找不到太多关于它的文档，而且 Javadocs 相当简陋。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:17:40.360

LifeCycle 界面相当基本，您可以使用它来注册启动、停止、失败等，但据我所知，这并不是真正的请求/响应。

我做了一项研究，发现这可能是最适合你的

[JavaDoc Jetty 8 - requestLog 接口](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/server/RequestLog.html)

它的超级接口是 LifeCycle。

如果您仍然需要使用 AbstractLifecycle ，只需“实现”它 :) 并覆盖方法并监视基于字符串的事件（STOPPED 等），这一切都在 java 文档中。

干得好

[抽象生命周期 - java doc](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/util/component/AbstractLifeCycle.html)

# asp.net - 视图状态 MAC 验证失败

> ID：14323699
> 
> 赞同：1
> 
> 时间：2013-01-14T17:43:25.687
> 
> 标签：asp.net

请不要将此帖子标记为[重复。](https://stackoverflow.com/questions/5647525/validation-of-viewstate-mac-failed). 请帮助我解决我的问题，因为我对**asp.net**很陌生，我在理解上有一些困难。

我正在开发**VS 2010**并尝试熟悉**asp.net 网站。**我有两个名为**Default.aspx 和 Result.aspx 的网页。**

**默认.aspx**

```
<form id="Form1" runat="server" action="Result.aspx">  
    //Some Controllers (Dynamically added textboxes and submit button)
</form> 
```

一旦我填写表格并提交时，就会出现以下错误。

**视图状态 MAC 验证失败。如果此应用程序由 Web Farm 或集群托管，请确保配置指定相同的 validationKey 和验证算法。AutoGenerate 不能在集群中使用。**

我试图添加`EnableViewStateMac="false"`但没有运气。

请建议我解决这个问题，如果你能解释一下为什么会这样，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:10:11.410

ASP.NET 与 Web 开发中的其他语言有一个非常不同的模型，旨在模拟 Windows 窗体开发范式。在其他语言中，通常发布到另一个 URL，而 ASP.NET 中的操作通常是通过回发到同一页面上的事件来完成的。您遇到的问题与您将 ViewState 发布到另一个页面的事实有关，请参阅[http://blogs.msdn.com/b/tess/archive/2009/04/14/validation-of-viewstate-mac-failed -安装后-net-3-5-sp1.aspx](http://blogs.msdn.com/b/tess/archive/2009/04/14/validation-of-viewstate-mac-failed-after-installing-net-3-5-sp1.aspx)。

顺便说一句，您不应该在生产服务器上设置 EnableViewStateMac=false"，它是一种防止篡改用户在视图状态中保存的数据的机制，将其关闭会删除这种保护 - 并且只处理问题，不是原因。

在这种情况下，我认为这不是问题，但是由于出现此错误，在将数据存储在会话中之前，始终值得检查是否没有将 ViewStateUserKey 设置为会话 ID（ASP.NET 不会跟踪会话 ID其中会话不包含数据）。

# .net - 数据表错误 - 无法 CopyToDataTable()

> ID：14323700
> 
> 赞同：1
> 
> 时间：2013-01-14T17:43:28.103
> 
> 标签：.net, vb.net, linq, ado.net

假设我有以下 2 个数据表：

```
Table1:                               Table2:
Col1:                                 Col1:         Col2:
1                                     1             a
2                                     2             b
2                                     3             c
3                                     4             d
3                                     5             e
4                                     6             f
                                      7             g 
```

我想要一个简单的 Linq 查询，它根据两者之间的连接创建第三个 DataTable 并给出不同的值 - 如下所示：

```
Result:
Col1:       Col2:
1           a
2           b
3           c
4           d 
```

我认为这会做到这一点：

```
Dim Result as DataTable = (From dr1 As DataRow In Table1.AsEnumerable
             Join dr2 As DataRow In Table2.AsEnumerable
             On dr1.Field(Of Double)("Col1") Equals dr2.Field(Of Double)("Col1")
             Select New With {
                                 .Col1 = dr1.Field(Of Double)("Col1"),
                                 .Col2 = dr2.Field(Of String)("Col2")
                             }).Distinct.CopyToDataTable 
```

但是无论我尝试什么，我都会遇到许多不同的错误......

我的第一个错误是该`CopyToDataTable`方法不是`System.Generic.IEnumerable`

当我删除它并将其保留为：

```
Dim Result = (From dr1 As DataRow In Table1.AsEnumerable
             Join dr2 As DataRow In Table2.AsEnumerable
             On dr1.Field(Of Double)("Col1") Equals dr2.Field(Of Double)("Col1")
             Select New With {
                                 .Col1 = dr1.Field(Of Double)("Col1"),
                                 .Col2 = dr2.Field(Of String)("Col2")
                             }).Distinct 
```

它会运行，但不会将结果过滤到唯一的列表中 - 它会将所有`col1`值都保留在`Table1`.

我试图了解 Linq，但显然缺少一些东西 - 有人可以向我解释这里发生了什么以及如何解决这个问题吗？

* * *

作为@Magnus 解决方案的补充，对于将来遇到此类问题的任何人，可以在[此处](http://msdn.microsoft.com/en-us/library/bb669096.aspx)`CopyToDataTable`找到匿名类型的 IEnumerable 的方法（正如 Magnus 指出的那样，这是我在这个问题中给出的）和实现它[在这里](http://msdn.microsoft.com/en-us/library/bb386921.aspx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:37:03.487

您需要将标识符添加到VB中[匿名类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)`Key`的属性中。（在 C# 中，所有属性都是关键属性）仅比较关键属性的值以确定两个实例是否相等，您需要这样做才能工作。`Distinct()`

```
Select New With {
                 Key .Col1 = dr1.Field(Of Double)("Col1"),
                 Key .Col2 = dr2.Field(Of String)("Col2")
                } 
```

至于`CopyToDataTable`开始处理匿名类型，请查看此[答案](https://stackoverflow.com/a/9259348/468973)。

# compiler-construction - 源到源编译器的新编程语言语法

> ID：14323702
> 
> 赞同：0
> 
> 时间：2013-01-14T17:43:46.300
> 
> 标签：compiler-construction

我正在为项目工作开发一种新的编程语言。html的新语言编译器，我目前正在研究编译器。我知道编译器有三 (3) 个阶段。#1 从语言语法生成标记的词汇阶段，下一个阶段是解析器，然后是输出。我的问题是如何开始编写语法。我是用论文的形式还是只是简短的陈述。向我指出可以帮助我的资源。我读了很多，都没有教你如何写语法，所以如果你能举个例子。我正在用 python 编写编译器并使用名为 PLY 的 lax/yacc 模块

一个例子是：

```
HTML5 main{
      myHead.id = "cat";
      myTitle;
}

HEAD myHead;
TITLE myTitle = "text"; 
```

上述代码在 html 中的输出为：

```
<DOCTYPE>

<HTML>
   <head id="cat">
       <TITLE>text</TITLE>
   </head>

   <body>
   </body>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:59:56.957

如果这是某种课堂作业，您应该寻求澄清或进一步的说明。如果您提供有关您尝试做什么的更多详细信息，我们可以提供更具体的指南。

您可能想查看[Bison 手册](http://www.gnu.org/software/bison/manual)，了解如何在其中编写语法的示例（bison 与 GNU yacc 类似，除了异国情调的东西，它应该适用于您拥有的任何 yacc）。我不知道有任何输出 Python 的 yacc/lex 工具，bison/flex 可以哄骗到 C++ 甚至 Java，但不是 Python。将生成的解析器连接到 Python 可能是痛苦多于收获。

还有其他更高级别的工具（即，做更多的日常工作），如[ANTLR](http://www.antlr.org)。

查看 comp.compìlers 新闻组的常见问题解答，它应该指向特定工具。

# android - OpenGL Android 绘制实时图形

> ID：14323705
> 
> 赞同：0
> 
> 时间：2013-01-14T17:44:18.230
> 
> 标签：android, opengl-es-2.0, linegraph

任何人都可以指出我使用 OpenGL 绘制实时图形的最佳方式以及一些示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:46:34.897

看..

*   [http://insanitydesign.com/wp/projects/nehe-android-ports/](http://insanitydesign.com/wp/projects/nehe-android-ports/)
*   [http://developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)
*   [在 Android 中使用 openGL 进行动态图形绘图](https://stackoverflow.com/questions/7235326/dynamic-graph-plotting-with-opengl-in-android)

# java - 如何使用来自 web 应用程序的 Spring 注入启动守护进程

> ID：14323712
> 
> 赞同：0
> 
> 时间：2013-01-14T17:44:46.223
> 
> 标签：java, spring, dependency-injection

我需要在部署战争时启动一个守护进程。守护进程本身使用应该用 Spring 注入的对象。我做了以下事情：

在 web.xml 中

```
...
<context-param>
   <param-name>contextConfigLocation</param-name>
   <param-value>/WEB-INF/springapp-servlet.xml</param-value>
</context-param>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<listener>
    <listener-class>example.AppListener</listener-class>
</listener> 
```

应用监听器.java

```
public class AppListener implements ServletContextListener {
...
  @Override
  public void contextInitialized(final ServletContextEvent sce) {
      log.info("======================= Begin context init =======================");
      try {
        // final ApplicationContext context = new ClassPathXmlApplicationContext("WEB-INF/springapp-servlet.xml");
        final ApplicationContext context = new ClassPathXmlApplicationContext("src/main/webapp/WEB-INF/springapp-servlet.xml");
      //final ApplicationContext context = new ClassPathXmlApplicationContext("//Users/.../WEB-INF/springapp-servlet.xml");

      final SessionServiceDaemon sessionServiceDaemon = context.getBean(SessionServiceDaemon.class);
      sessionServiceDaemon.start();
    } catch (final Exception e) {
      log.error("Was not able to start daemon",e);
    }
} 
```

SessionServiceDaemon.java

```
@Service
@Singleton
public class SessionServiceDaemon {

  private final static Logger log = LoggerFactory.getLogger(SessionServiceDaemon.class);

  private final SessionServiceHandler handler;

  @Inject
  public SessionServiceDaemon(final SessionServiceHandler handler) {
    log.info("+++++++++++++++++++++++++++++++ SessionServiceDaemon injected");
    this.handler = handler;
  } 
```

我的 springapp-servlet.xml 只包含注入所需的包：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans ...

  <context:component-scan base-package="example" />
    <mvc:annotation-driven />

</beans> 
```

在启动日志中，我看到了预期：

```
+++++++++++++++++++++++++++++++ SessionServiceDaemon injected 
```

其次是

```
======================= Begin context init ======================= 
```

问题是：然后我得到一个异常，无论我使用哪个路径指向 springapp-servlet.xml，该文件都不存在：

```
org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [src/main/webapp/WEB-INF/springapp-servlet.xml]; nested exception is java.io.FileNotFoundException: class path resource [src/main/webapp/WEB-INF/springapp-servlet.xml] cannot be opened because it does not exist 
```

我尝试了不同的相对路径，甚至是绝对路径都没有成功。我什至编辑了上面的代码，并在我尝试加载上下文的上方添加了以下内容：

```
 try {
    log.info(org.apache.commons.io.FileUtils.readFileToString(new File("src/main/webapp/WEB-INF/springapp-servlet.xml")));
  } catch (final Exception e) {
    log.error("Unable to find file",e);
  } 
```

并且很好地打印了 springapp-servlet.xml 的内容。

我的2个问题：

*   当我能够使用与同样的方法？
*   无论如何，我是否有正确的方法来启动具有注入依赖项的守护程序？

PS：我使用Tomcat。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:03:28.013

您正在启动两个不同的 spring 应用程序上下文。第一个，内置的[ContextLoaderListener](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/ContextLoaderListener.html)，可能会从默认位置获取您的 springapp-servlet.xml 配置。（您没有说是否指定了 contextConfigLocation。）

然后，在您的自定义侦听器中，使用带有显式路径的 ClassPathXmlApplicationContext 构造一个新的应用程序上下文。在您显示的三行中，只有带有 ""WEB-INF/springapp-servlet.xml" 的行看起来可能是类路径解析的候选者，尽管它实际上取决于您如何配置和启动 Tomcat 实例。 （即，从 Tomcat 的角度来看，类路径是什么？）

无论如何，有更好的方法可以让 Spring 应用程序上下文进入 servlet/listener。一种直接的方法是像您一样使用 ContextLoaderListener，然后在您的自定义 servlet/listener 中使用 Spring 的[WebApplicationContextUtils.getWebApplicationContext](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/context/support/WebApplicationContextUtils.html#getWebApplicationContext%28javax.servlet.ServletContext%29)。

Spring 也直接支持 servlet，包括通过注解配置、[HttpServletBean](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/HttpServletBean.html)类，甚至直接使用[FrameworkServlet](http://static.springsource.org/spring/docs/3.2.x/javadoc-api/org/springframework/web/servlet/FrameworkServlet.html)。

# m2e - m2e-webby 并提供了与码头的依赖关系

> ID：14323713
> 
> 赞同：1
> 
> 时间：2013-01-14T17:44:54.380
> 
> 标签：m2e, embedded-jetty, webby

我有一个带有一些提供的依赖项的 maven 项目，我正在尝试使用 webby 运行该应用程序，但它给了我一个 java.lang.ClassNotFoundException 异常。

在此[链接](https://docs.sonatype.org/display/M2ECLIPSE/Integration+with+Maven+WAR+Plugin)中它说：“Webby 允许从 jetty-maven-plugin 的配置初始化启动配置”。

我的问题是是否也可以传递 jetty-maven-plugin 中定义的依赖项？如果不是，webby 如何解决提供的依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:50:22.543

我想做的是在 pom 项目中创建一个配置文件：

```
<profile>
        <id>webby</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <dependencies>
            <dependency>
                <groupId>groupId</groupId>
                <artifactId>artifactId</artifactId>
                <version>version</version>
            </dependency>
        </dependencies>
    </profile> 
```

然后右键单击项目 -> 属性 -> Maven 并将 webby 添加到 Active Maven Profiles

# php - HTML - PHP 一个表单中有多个选择题，只能选择一个单选按钮。

> ID：14323714
> 
> 赞同：0
> 
> 时间：2013-01-14T17:45:02.843
> 
> 标签：php, html, button, radio

新手来了 我试图在一个表单上显示多个问题，其中多项选择答案显示为单选按钮。用户应该能够为每个问题选择一个答案（单选按钮）。

我的问题是，一旦我显示问题和答案，我只能在表单上选择一个单选按钮（而不是每个问题）。在下面的代码中，qid 是问题 ID，aid 是答案 ID。对于从数据库中检索到的每个问题，单选按钮组将获得分配给名称的问题编号。

例如：问题 1 有 4 个名称 = 1 的多项选择答案，问题 2 有 4 个名称 = 2 的多项选择答案，依此类推。

因此，当用户选择问题 1 的答案并选择问题 2 的答案时，会清除问题 1 的选定答案。

```
<body style="margin: 100px;">
    <?php foreach ($questions as $question) : ?>
        <small>(<?php echo $question['qid']; ?>)</small>
        <strong><?php echo $question['qdesc']; ?></strong>

        <ol>
           <?php foreach ($answers[$question['qid']] as $answer) : ?>
                <li><label><input type="radio" name=$question['qid'] value=$answer['aid']><?php  echo $answer['adesc']; ?></label></li>               
           <?php endforeach; ?>
        </ol>
    <?php endforeach; ?>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:48:27.710

您的单选按钮名称中的 PHP 代码缺少开始和结束 PHP 标记（也缺少引号）：

```
<li><label><input type="radio" name="q_<?php echo $question['qid']; ?>" value="<?php echo $answer['aid']; ?>"><?php  echo $answer['adesc']; ?></label></li> 
```

您可能还想包含一个前缀（如上），以便名称不仅仅是数字。

因为您的广播组都具有相同的名称，这意味着它们都被视为一个组，因此只允许您选择一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:29:24.030

作为上述答案的一个小补充。

```
<li>
<label for="qid_<?php echo $question['qid']; ?>">
<input type="radio" id="qid_<?php echo $question['qid']; ?>" name="q_<?php echo $question['qid']; ?>" value="<?php echo $answer['aid']; ?>">
<?php  echo $answer['adesc']; ?>
</label>
</li> 
```

现在您可以在标签中输入后单击文本，单选按钮将被选中。

标签属性 [for] 对应于其中的输入属性 [id]

# html - 使用 CSS 裁剪导航栏

> ID：14323715
> 
> 赞同：2
> 
> 时间：2013-01-14T17:45:04.073
> 
> 标签：html, css

我正在竭尽全力试图修复这个导航栏

剪裁在这里[http://i.stack.imgur.com/eDFQK.png](http://i.stack.imgur.com/eDFQK.png)在这里填写[http://i.stack.imgur.com/0aHv2.png](http://i.stack.imgur.com/0aHv2.png)

通过这些图片，您可以看到我使用变换来创建菱形（或政治正确，平行四边形）菜单。我利用 ul 和 li 来做到这一点。

我希望剪辑联系人的结尾，我尝试使用溢出但它似乎不起作用。无论如何灵活地剪辑菜单栏的最后一个菜单项？或者如果没有，有人可以告诉我创建一个单独的填充器是否可行，它可以与联系项目菜单一起使用？

在解释中，当我悬停联系人项目菜单时，填充器也会进入悬停状态。并且填充物需要适应浏览器的大小。

这是我的 HTML

```
<div class="outerwrap">    
     <div class="innerwrap">
         <div class="container">
             <div class="sixteen columns"> 
                 <div class="header">
                     <img class="scale-with-grid" id="logo" src="images/Logo-161x114.png" alt="Creative VistaIdea">
                     <div id="navbar">
                         <ul id="nav" >
                             <li class="rhombus"><a class="Home"     href="#"><span><p>Home</p></span></a></li>
                             <li class="rhombus"><a class="About"    href="#"><span><p>About</p></span></a>
                                   <ul>
                                         <li><a class="History"  href="#"><span><p>History</p></span></a></li>
                                         <li><a class="Board"    href="#"><span><p>Board</p></span></a></li>
                                         <li><a class="Vision"   href="#"><span><p>Vision &amp; Mission</p></span></a></li>
                                     </ul>
                             </li>
                             <li class="rhombus"><a class="Benchmark"    href="#"><span><p>Benchmark &amp; Market</p></span></a></li>
                             <li class="rhombus"><a class="Service"      href="#"><span><p>Service</p></span></a></li>
                             <li class="rhombus"><a class="Work"         href="#"><span><p>Work</p></span></a></li>
                             <li class="rhombus"><a class="Client"       href="contact.html"><span><p>Client</p></span></a></li>
                             <li class="rhombus"><a class="Contact"      href="index.html"><span><p>Contact</p></span></a></li>
                         </ul>
                     </div>
                 </div>
              </div>
           </div>
       </div>
</div> 
```

这是我的CSS：

```
#nav, #nav ul{margin:0px; padding:0px; list-style-type:none; list-style-position:outside;}

     #nav a:link, #nav a:active, #nav a:visited{height:31px; display:block; text-decoration:none; background: #1a1a1a; /* Old browsers */
                                        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
                                        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFhMWExYSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM0ZDRkNGQiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
                                        background: -moz-linear-gradient(top, #1a1a1a 0%, #4d4d4d 100%); /* FF3.6+ */
                                        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1a1a1a), color-stop(100%,#4d4d4d)); /* Chrome,Safari4+ */
                                        background: -webkit-linear-gradient(top, #1a1a1a 0%,#4d4d4d 100%); /* Chrome10+,Safari5.1+ */
                                        background: -o-linear-gradient(top, #1a1a1a 0%,#4d4d4d 100%); /* Opera 11.10+ */
                                        background: -ms-linear-gradient(top, #1a1a1a 0%,#4d4d4d 100%); /* IE10+ */
                                        background: linear-gradient(to bottom, #1a1a1a 0%,#4d4d4d 100%); /* W3C */
                                        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1a1a1a', endColorstr='#4d4d4d',GradientType=0 ); /* IE6-8 */}

     #nav a:hover                        {background: #2e3191; /* Old browsers */
                                         /* IE9 SVG, needs conditional override of 'filter' to 'none' */
                                         background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzJlMzE5MSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiMxYjc1YmIiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
                                         background: -moz-linear-gradient(top, #2e3191 0%, #1b75bb 100%); /* FF3.6+ */
                                         background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#2e3191), color-stop(100%,#1b75bb)); /* Chrome,Safari4+ */
                                         background: -webkit-linear-gradient(top, #2e3191 0%,#1b75bb 100%); /* Chrome10+,Safari5.1+ */
                                         background: -o-linear-gradient(top, #2e3191 0%,#1b75bb 100%); /* Opera 11.10+ */
                                         background: -ms-linear-gradient(top, #2e3191 0%,#1b75bb 100%); /* IE10+ */
                                         background: linear-gradient(to bottom, #2e3191 0%,#1b75bb 100%); /* W3C */
                                         filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#2e3191', endColorstr='#1b75bb',GradientType=0 ); /* IE6-8 */}

     #nav li ul {position:relative; display:none;}

     #nav li ul li a:link, #nav li ul li a:active, #nav li ul li a:visited    {height:31px;
                                                        background: #859dc4; /* Old browsers */
                                                        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
                                                        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzg1OWRjNCIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM4ODkzYmUiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
                                                        background: -moz-linear-gradient(top, #859dc4 0%, #8893be 100%); /* FF3.6+ */
                                                        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#859dc4), color-stop(100%,#8893be)); /* Chrome,Safari4+ */
                                                        background: -webkit-linear-gradient(top, #859dc4 0%,#8893be 100%); /* Chrome10+,Safari5.1+ */
                                                        background: -o-linear-gradient(top, #859dc4 0%,#8893be 100%); /* Opera 11.10+ */
                                                        background: -ms-linear-gradient(top, #859dc4 0%,#8893be 100%); /* IE10+ */
                                                        background: linear-gradient(to bottom, #859dc4 0%,#8893be 100%); /* W3C */
                                                        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#859dc4', endColorstr='#8893be',GradientType=0 ); /* IE6-8 */ ;}

     #nav li ul li a:hover                                            {background: #b3b1b1; /* Old browsers */
                                                        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
                                                        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2IzYjFiMSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM4MTgyODIiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
                                                        background: -moz-linear-gradient(top, #b3b1b1 0%, #818282 100%); /* FF3.6+ */
                                                        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b3b1b1), color-stop(100%,#818282)); /* Chrome,Safari4+ */
                                                        background: -webkit-linear-gradient(top, #b3b1b1 0%,#818282 100%); /* Chrome10+,Safari5.1+ */
                                                        background: -o-linear-gradient(top, #b3b1b1 0%,#818282 100%); /* Opera 11.10+ */
                                                        background: -ms-linear-gradient(top, #b3b1b1 0%,#818282 100%); /* IE10+ */
                                                        background: linear-gradient(to bottom, #b3b1b1 0%,#818282 100%); /* W3C */
                                                        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b3b1b1', endColorstr='#818282',GradientType=0 ); /* IE6-8 */}

.History{width:13%;float:left;}
.Board{width:13%;float:left;}
.Vision{width:13%;float:left;}

     li.rhombus
     {
    position: relative;
    transform: skew(-35deg);
    -webkit-transform: skew(-35deg);
    -moz-transform: skew(-35deg);
    -ms-transform: skew(-35deg);
    -o-transform: skew(-35deg);
    width:100%;
     }

     a.Home         {width:10.1553784860558%;float:left;}
     a.About        {width:8.9601593625498%;float:left;}
    a.Benchmark {width:20.1155378486056%;float:left;}
    a.Service   {width:9.5577689243028%;float:left;}
    a.Work      {width:10.5498007968127%;float:left;}
     a.Client   {width:10.5498007968127%;float:left;}
     a.Contact  {width:11.9482071713147%;float:left;}

     li.rhombus span 
     {
    transform: skew(35deg);
    -webkit-transform: skew(35deg);
    -moz-transform: skew(35deg);
    -ms-transform: skew(35deg);
    -o-transform: skew(35deg);
    display:block;
     }

     #nav li:hover ul ul, #nav li:hover ul ul ul, #nav li:hover ul ul ul ul{
    display:none;
    }
     #nav li:hover ul, #nav li li:hover ul, #nav li li li:hover ul, #nav li li li li:hover ul{
    display:block;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:25:54.413

如果您不反对在最后一项中添加元素，也就是说菜单不是动态创建的，并且您不需要跟踪最后一个元素是什么，那么您可以尝试在最后一个元素中添加一个 div LI 可以充当背填料。

```
<li class="rhombus"><div style='position:relative;z-index:10;'><a class="Contact" href="index.html"><span><p>Contact</p></span></a></div><div class='clipper'></div></li> 
```

CSS：

```
 .clipper{
        width:50%;
        height:100%;
        background:black;
        position:absolute;
        right: -17.5%;
        transform: skew(35deg);
        -webkit-transform: skew(-35deg);        
        -moz-transform: skew(-35deg);
        -ms-transform: skew(-35deg);
        -o-transform: skew(-35deg);
        z-index: 1;
    } 
```

[这是一个例子。](http://jsfiddle.net/zP4jm/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:04:11.517

在 Pow-lan 答案上工作，为了在不更改 html 的情况下做到这一点，我添加到 CSS 中：

```
#nav > .rhombus:last-child:after {
    content: "";
    width: 29px;
    height: 31px;
    background-color: red;
    position:absolute;
    top: 0px;
    right: 146px;
    z-index: 1;
    -webkit-transform: skew(35deg);
    display: block;
}

#nav > .rhombus:last-child:hover:after {
    content: "";
    width: 29px;
    height: 31px;
    background-color: green;
    position:absolute;
    top: 0px;
    right: 146px;
    z-index: 1;
    -webkit-transform: skew(35deg);
    display: block;
} 
```

悬停状态下的大部分代码都是多余的，只需更改颜色即可。我不得不承认我不知道为什么正确的坐标需要是这个值，我想知道它来自倾斜。我已经通过反复试验设置它

结果是：

```
http://jsfiddle.net/vals/MV6CN/ 
```

# http - DELETE 请求正文的 RESTful 替代方案

> ID：14323716
> 
> 赞同：114
> 
> 时间：2013-01-14T17:45:05.347
> 
> 标签：http, rest, httprequest, http-method

虽然[HTTP 1.1 规范](http://www.w3.org/Protocols/rfc2616/rfc2616.html)似乎*允许*[DELETE](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9.7)请求上的消息体，但它似乎表明服务器应该忽略它，因为它没有定义的语义。

> **4.3 消息体**
> 
> 服务器应该在任何请求上读取并转发消息体；如果请求方法不包括为实体主体定义的语义，则在处理请求时应该忽略消息主体。

我已经回顾了关于 SO 及其他主题的几个相关讨论，例如：

*   [HTTP DELETE 请求是否允许实体主体？](https://stackoverflow.com/questions/299628/is-an-entity-body-allowed-for-an-http-delete-request)
*   [HTTP 请求方法的负载](https://stackoverflow.com/questions/5905916/payloads-of-http-request-methods)
*   [带有请求正文的 HTTP GET](https://stackoverflow.com/questions/978061/http-get-with-request-body)

大多数讨论似乎都同意在 DELETE 上提供消息正文可能是*允许*的，但通常不建议这样做。

此外，我注意到各种 HTTP 客户端库中的一种趋势，这些库似乎正在记录越来越多的增强功能，以支持 DELETE 上的请求正文。大多数图书馆似乎都有义务，尽管偶尔会有一点最初的阻力。

我的用例要求在 DELETE 上添加一些必需的元数据（例如，删除的“原因”，以及删除所需的一些其他元数据）。我考虑了以下选项，但这些选项似乎都不完全合适且符合 HTTP 规范和/或 REST 最佳实践：

*   **消息体**- 规范表明 DELETE 上的消息体没有语义值；HTTP 客户端不完全支持；非标准做法
*   **自定义 HTTP 标头**- 要求自定义标头通常[违反标准做法](http://my.safaribooksonline.com/book/-/9781449317904/4dot-metadata-design/id2829455)；使用它们与我的 API 的其余部分不一致，这些都不需要自定义标头；此外，没有好的 HTTP 响应可用于指示错误的自定义标头值（可能完全是一个单独的问题）
*   **标准 HTTP 标头**- 没有合适的标准标头
*   **查询参数**- 添加查询参数实际上会更改被删除的请求 URI；[违反标准做法](https://stackoverflow.com/questions/2539394/rest-http-delete-and-parameters)
*   **POST 方法**-（例如`POST /resourceToDelete { deletemetadata }`）POST 不是删除的语义选项；POST 实际上代表期望的*相反*动作（即 POST 创建资源下属；但我需要删除资源）
*   **多种方法**- 将 DELETE 请求拆分为两个操作（例如 PUT 删除元数据，然后删除）将原子操作拆分为两个，可能会留下不一致的状态。删除原因（和其他相关元数据）不是资源表示本身的一部分。

我的第一个偏好可能是使用消息正文，其次是自定义 HTTP 标头；然而，如前所述，这些方法也有一些缺点。

是否有任何符合 REST/HTTP 标准的建议或最佳实践来在 DELETE 请求中包含此类必需的元数据？还有其他我没有考虑过的替代方案吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-18T16:36:19.890

尽管有一些建议不要将消息正文用于 DELETE 请求，但这种方法在某些用例中可能是合适的。这是我们在评估问题/答案中提到的其他选项并与服务的消费者合作之后最终使用的方法。

虽然消息正文的使用并不理想，但其他选项都不是完全合适的。请求正文 DELETE 使我们能够轻松清晰地围绕 DELETE 操作所需的附加数据/元数据添加语义。

我仍然愿意接受其他想法和讨论，但想结束这个问题的循环。感谢大家对这个话题的想法和讨论！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-15T09:10:13.347

您似乎想要的是两件事之一，两者都不是纯粹的`DELETE`：

1.  **您有两个操作，**一个`PUT`是删除原因，一个`DELETE`是资源。删除后，任何人都无法再访问该资源的内容。“原因”不能包含指向已删除资源的超链接。或者，
2.  **您正在尝试**使用该方法将资源从`state=active`更改为 。state=deleted 的资源会被您的主 API 忽略，但管理员或具有数据库访问权限的人可能仍然可以读取。这是允许的 -不必删除资源的支持数据，只需删除在该 URI 处公开的资源。`state=deleted``DELETE``DELETE`

任何需要消息体的操作`DELETE`都可以被分解为最一般的，a`POST`用消息体完成所有必要的任务，和`DELETE`. 我认为没有理由破坏 HTTP 的语义。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-15T05:37:24.603

Given the situation you have, I would take one of the following approaches:

*   **Send a PUT or PATCH**: I am deducing that the delete operation is virtual, by the nature of needing a delete reason. Therefore, I believe updating the record via a PUT/PATCH operation is a valid approach, even though it is not a DELETE operation per se.
*   **Use the query parameters**: The resource uri is not being changed. I actually think this is also a valid approach. The question you linked was talking about not allowing the delete if the query parameter was missing. In your case, I would just have a default reason if the reason is not specified in the query string. The resource will still be `resource/:id`. You can make it discoverable with Link headers on the resource for each reason (with a `rel` tag on each to identify the reason).
*   **Use a separate endpoint per reason**: Using a url like `resource/:id/canceled`. This does actually change the Request-URI and is definitely not RESTful. Again, link headers can make this discoverable.

Remember that REST is not law or dogma. Think of it more as guidance. So, when it makes sense to not follow the guidance for your problem domain, don't. Just make sure your API consumers are informed of the variance.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T07:07:51.987

我建议您将所需的元数据作为 URI 层次结构本身的一部分。一个例子（天真）：

如果您需要根据日期范围删除条目，而不是在正文中或作为查询参数传递开始日期和结束日期，请构建 URI，以便将所需信息作为 URI 的一部分传递。

例如

`DELETE /entries/range/01012012/31122012`-- 删除 2012 年 1 月 1 日至 2012 年 12 月 31 日之间的所有条目

希望这可以帮助。

# jquery - 使用 jQuery 将复杂的 html 表转换为 json

> ID：14323721
> 
> 赞同：-3
> 
> 时间：2013-01-14T17:45:21.987
> 
> 标签：jquery, html, json, html-table

我需要使用 jQuery 获取以下 html 表的检查行的 JSON

JSON 应该包含用户在文本框中输入的评论。任何指针都会对我有所帮助。

```
<table id="potable_grid" class="tab">
    <thead>
        <tr>
            <th>
                select PO
            </th>
            <th>
                po id
            </th>
            <th>
                ponumber
            </th>
            <th>
                pocurrency
            </th>
            <th>
                balance
            </th>
            <th>
                thisinvoice
            </th>
            <th>
                thisinvoiceinInvoicecurrency
            </th>
            <th>
                comments
            </th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>
                <input type="checkbox" id="chckPO" />
            </td>
            <td>
                po001
            </td>
            <td>
                cuspo1
            </td>
            <td>
                usd
            </td>
            <td>
                10000
            </td>
            <td>
                200
            </td>
            <td>
                2
            </td>
            <td>
                <input type="text" id="txtPO" />
            </td>
        </tr>
        <tr>
            <td>
                <input type="checkbox" id="chckPO" />
            </td>
            <td>
                po002
            </td>
            <td>
                pocus125
            </td>
            <td>
                inr
            </td>
            <td>
                5000
            </td>
            <td>
                300
            </td>
            <td>
                18000
            </td>
            <td>
                <input type="text" id="txtPO" />
            </td>
        </tr>
    </tbody>
</table> 
```

我检查了许多帖子，例如 [HTML Table to JSON](https://stackoverflow.com/questions/6271856/html-table-to-json)

但它适用于行没有任何控制的简单 html 表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:52:54.950

```
var $checked = $('#potable_grid :checked');

var data = [];

for(var i = 0; i != $checked.length; ++i)
{
  var $row = $($checked[i]).closest('tr');
  var text = $row.find(':text').val();

  data.push(text);
}

// data is now an array of all checked texts. 
```

您的问题含糊不清，但这应该让您开始了解如何迭代检查的行并获得所需的值。

顺便说一句，对所有文本框使用相同的“id”是无效的。如果您想知道与相关记录关联的“id”，请执行类似`po id`“例如”的操作`<input type="text" id="cuspo1" />`。然后您的数据（JSON）可以是一个对象，例如

```
var $input = $row.find(':text');

data.push({ id: $input.attr('id'), value: $input.val() });

// now data contains an array of { id, value }; 
```

# ruby-on-rails - Rails STI 对 update_attributes 的子类验证

> ID：14323722
> 
> 赞同：1
> 
> 时间：2013-01-14T17:45:24.567
> 
> 标签：ruby-on-rails, ruby, sti, subclass

我想知道是否有办法在执行 STI update_attributes 时根据新的类类型验证属性？

例如，假设我有：

```
class A < ActiveRecord::Base
end
class B < A
    validates :attribute_z, :presence => true
end 
class C < A
    validates :attribute_x, :presence => true
    validates :attribute_y, :presence => true 
end 
```

如果我运行（实现 rails 的方式）：

```
b = A.find('b-id')
b.update_attributes({ 'type' => 'C', :attribute_x => 'present', :attribute_y => 'present', :attribute_z => nil }) # will return false with errors on 'attribute_z must be present' 
```

我试过[#becomes](http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-becomes)：

```
b = A.find('b-id')
b = b.becomes(C)
b.update_attributes({ 'type' => 'C', :attribute_x => 'present', :attribute_y => 'present', :attribute_z => nil })
# this works partially, because the validations are ok but when i look to console i get something like: 
UPDATE "as" SET "type" = 'c', "attribute_z" = NULL, "attribute_y' = 'present', 'attribute_x' = 'present' WHERE "as"."type" IN ('C') AND "as"."id" = 'b-id' 
# which is terrible because it's looking for a record of B type on the C types. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:12:18.953

与此主题相关联[回调更改的 ActiveRecord 属性？](https://stackoverflow.com/questions/1513991/callback-for-changed-activerecord-attributes)，您可以使用 become 方法捕获对 type 属性所做的任何分配并使“self”属于不同的类（A、B 或 C）。因此，每当您使用 find 方法时，它都会使用来自数据库的数据（由“b-id”标识）填充一个全新的模型实例，并在必要时自动将模型实例强制转换为另一种类型。

这对你有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:51:12.573

我制定了一个解决方案：[https](https://gist.github.com/4532583) ://gist.github.com/4532583 ，因为条件是由 rails 内部添加的（https://github.com/rails/rails/blob/master/activerecord/lib/active_record/继承.rb#L15）我创建了一个新的“update_attributes”方法，如果给定类型，它会更改类型。:)

# java - 在 Android 上使用 Jackson 库解析大型 JSON 时出现内存不足错误

> ID：14323727
> 
> 赞同：5
> 
> 时间：2013-01-14T17:45:38.210
> 
> 标签：java, android, json, jackson, out-of-memory

我正在使用 Jackson 库来解析来自服务器的大型 JSON 响应。json 的大小约为 7-8 mb。

我在这段代码中得到了 outOfMemoryError ：

```
ObjectMapper mapper = new ObjectMapper();
JsonNode rootParser = mapper.readValue(is, JsonNode.class); 
```

这是我得到的例外：

```
 01-14 13:13:20.103: E/AndroidRuntime(25468): FATAL EXCEPTION: Thread-13
    01-14 13:13:20.103: E/AndroidRuntime(25468): java.lang.OutOfMemoryError
    01-14 13:13:20.103: E/AndroidRuntime(25468): at java.util.ArrayList.add(ArrayList.java:123)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.node.ArrayNode._add(ArrayNode.java:722)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.node.ArrayNode.add(ArrayNode.java:203)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeArray(JsonNodeDeserializer.java:224)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:200)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeArray(JsonNodeDeserializer.java:224)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:200)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeArray(JsonNodeDeserializer.java:224)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:200)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:197)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeArray(JsonNodeDeserializer.java:224)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:200)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.BaseNodeDeserializer.deserializeObject(JsonNodeDeserializer.java:197)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:58)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:15)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2732)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1909)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at com.sarla.smartglance.communication.JsonDecoder.decodeResponse(JsonDecoder.java:87)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at com.sarla.smartglance.communication.JsonDecoder.decode(JsonDecoder.java:68)
01-14 13:13:20.103: E/AndroidRuntime(25468):    at com.sarla.smartglance.communication.MHttpManager$1.run(MHttpManager.java:86) 
```

我尝试了一切，但找不到任何解决方案来解析安卓上如此大量的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:24:38.160

对于 7 到 8 兆的 JSON，您使用的树模型通常会使用 20 到 50 兆的内存（对于 XML 和 JSON，dom 模型的大小是 3 到 5 倍）。无论使用哪种库，您都无能为力：它们都使用`List`s 和`Map`s 构建树，这是一种重量级的方法。

相反，您应该考虑使用普通旧 Java 对象 (POJO)，这将使用更少的内存。为此，您需要建模与您的 JSON 结构匹配的 POJO；在不知道结构的情况下我不能举一个例子（如果你在问题上添加示例，我可以），但要解析的代码类似于另一个答案引用的 GSON 代码：

```
MyValue value = mapper.readValue(json, MyValue.class); 
```

这将适用于 Jackson 以及许多其他 Java JSON 库（至少是 Gson、Genson），并且使用起来也更快。JSON 树本质上是昂贵且重量级的，不能用于多兆字节的内容。

最后，如果您的输入由一系列项目组成，则有更好的方法将其分割（无论单个项目是`JsonNode`s 还是 POJO，都可以这样做！）。但我不知道你的内容是不是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:53:31.297

我们在这里使用 gson 库，通过上面的代码，我们可以毫无问题地获取大于 50Mb 的文件：

```
public static <T extends Object> T readFile(String caminho_arquivo, Type type) {

    GsonBuilder gson_builder = new GsonBuilder();

    final SimpleDateFormat sdf_date     = new SimpleDateFormat("yyyy-MM-dd");
    final SimpleDateFormat sdf_datetime = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");

    gson_builder.registerTypeAdapter(Date.class, new JsonDeserializer<Date>(){

        @Override
        public Date deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {

            try {
                if (json.getAsJsonPrimitive().getAsString().length() == 10)
                    return sdf_date.parse(json.getAsJsonPrimitive().getAsString());
                else
                    return sdf_datetime.parse(json.getAsJsonPrimitive().getAsString());

            } catch (ParseException e) {
                Log.e("JSON", "Erro na deserialização de datas no JSON: " + json.getAsJsonPrimitive().getAsString());
                return null;
            }
        }

    });

    Gson gson = gson_builder.create();

    File fileJSON = new File(caminho_arquivo);

    FileReader reader = null;

    try {
        reader = new FileReader(fileJSON);

        return gson.fromJson(reader, type);

    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } finally {
        try {
            reader.close();

            if (fileJSON.exists())
                fileJSON.delete();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return null;
} 
```

试试这个库，很好，我们只在服务器端使用jackson，因为jackson在Android中比gson慢，至少在我们的测试中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:07:39.300

尝试并使用：

```
JsonNode rootParser = mapper.readTree(is); 
```

反而。

# vector - 在 GNU Octave 中拆分矩阵和向量以获取未提取的行

> ID：14323729
> 
> 赞同：2
> 
> 时间：2013-01-14T17:45:43.327
> 
> 标签：vector, matrix, octave

在 GNU Octave 中，我可以使用以下代码来获取 X 的每 5 行。

如何获得另一个矩阵`X_2`，其中包含尚未提取或遗留的行`X`？

```
X = [1;2;3;4;5;6;7;8;9;10;11]
ix = ( 5 : 5 : size(X,1) )
X_1 = X( ix , : ) 
```

我想要`X_2`除了 5 和 10 之外的所有东西。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:51:28.177

**Gnu Octave，获取矩阵/向量的每第 n 行：**

```
X = [1;2;3;4;5;6;7;8;9;10;11]
ix = ( 5 : 5 : size(X,1) ) 
```

印刷：

```
ix =
    5   10 
```

现在，从原始矩阵中删除行，这将为您提供未提取的行列表。

例如，从 X 中删除第 5 行和第 10 行：

```
X([5,10],:) = [] 
```

打印 X 缺少 5 和 10：

```
X =

    1
    2
    3
    4
    6
    7
    8
    9
   11 
```

所以这证明了概念。使用您的 ix 变量在指定的列上执行此操作：

```
X(ix,:) = [] 
```

这将使 X 成为尚未提取的行的列表。如果您不需要干扰原始文件，请在执行此操作之前复制 X 并将其放入另一个变量中。然后赋值`X_2 = X;`

**资源：**

[从 GNU Octave 中的矩阵中删除一列](https://stackoverflow.com/questions/12390419/gnu-octave-how-to-remove-a-column-from-a-matrix)

# java - 为什么@RequestMapping注解在java中接受String参数但在scala中不接受？

> ID：14323732
> 
> 赞同：7
> 
> 时间：2013-01-14T17:45:57.443
> 
> 标签：java, spring, scala, annotations

阅读@RequestMapping 文档：[http ://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/RequestMapping.html](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/bind/annotation/RequestMapping.html)

它接受一个字符串数组参数作为其路径映射。

所以这可以使用 java ：

```
@RequestMapping("MYVIEW") 
```

但在斯卡拉我需要使用：

```
@RequestMapping(Array("MYVIEW")) 
```

scala 版本是有意义的，因为注释需要一个字符串数组。但是为什么上面在java中工作，它不应该给出编译时错误？

下面的类'ArrayChecker'（我写的一个类来说明这一点）会导致java编译时错误：

> ArrayChecker 类型中的方法 acceptArrayParam(String[]) 不适用于参数 (String)

```
public class ArrayChecker {

    public static void main(String args[]){

        String[] strArray;

        acceptArrayParam("test");
    }

    private static void acceptArrayParam(String[] param){

    }
} 
```

@RequestMapping("MYVIEW") 不应该引起类似的错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T18:11:05.367

Java SE 规范的第[9.7.1节指出：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.7.1)

> 如果元素类型是数组类型并且对应的ElementValue不是ElementValueArrayInitializer，则将其唯一元素是由ElementValue表示的值的数组值与该元素相关联。否则，如果对应的 ElementValue 是 ElementValueArrayInitializer，则 ElementValueArrayInitializer 表示的数组值与该元素相关联。

用评论澄清上述说明：

> **换言之，当单元素数组与数组值注释类型元素相关联时，可以省略花括号。**

因为 Scala 没有等效的数组初始值设定项语法，所以您必须使用`Array(elems)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:03:51.900

这是使用默认`value`元素的注释语言规范的一部分。

有关示例，请参见[JLS 9.7.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-9.html#jls-9.7.3)，其中一个带有注释“请注意，省略了大括号”。

# python - 新旧样式类中的 Python 析构函数

> ID：14323734
> 
> 赞同：5
> 
> 时间：2013-01-14T17:45:58.490
> 
> 标签：python, destructor

我试图理解为什么对象破坏在新样式类中的工作方式与旧样式类不同。

```
class Wrapper():
    class Inner(object):
        def __del__(self):
            print 'Inner destructor'

    innerInstance = Inner()

    def __del__(self):
        print 'Wrapper destructor'

if __name__ == '__main__':
    x = Wrapper() 
```

退出时，这将输出：

```
Wrapper destructor
Inner destructor 
```

但是，如果我将 Wrapper 用作新样式类，则仅调用 wrapper 析构函数，输出为：

```
Wrapper destructor 
```

有人可以解释上面显示的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:52:59.623

python[数据模型](http://docs.python.org/2/reference/datamodel.html#object.__del__)明确指出：

> 不能保证`__del__()`为解释器退出时仍然存在的对象调用方法。

在这种情况下，`Wrapper`当解释器退出时，（类和实例）对象仍然存在，因此不能保证它会被最终确定。即使我们看到`Wrapper` **实例**已完成，也不能保证`Wrapper` **该类**将完成（即持有您的`Inner`实例的内容）。

* * *

作为旁注，如果我使用 Jython 运行此代码，`__del__`则不会为任何一个对象调用（无论我们使用的是旧式类还是新式类）。令人惊讶的是，如果我显式删除对象，它甚至不起作用（使用 Jython）（但这段代码确实适用于 CPython，无论旧式/新式如何）：

```
class Wrapper():
    class Inner(object):
        def __del__(self):
            print 'Inner destructor'

    innerInstance = Inner()

    def __del__(self):
        print 'Wrapper destructor'

if __name__ == '__main__':
    print "foo"
    x = Wrapper()
    print "bar"
    del x
    del Wrapper 
```

# .net - 比较 .NET 程序集的公共 API 以确定向后兼容性

> ID：14323740
> 
> 赞同：0
> 
> 时间：2013-01-14T17:46:15.353
> 
> 标签：.net, versioning, compatibility, .net-assembly

在我继续自己动手之前，是否存在一种工具，可以将一个程序集的公共 API 与另一个程序集进行比较，以确定一个程序集是否向后兼容另一个程序集？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:33:11.677

绝对 - 简单的答案 - 我们使用这个工具：[BitDiffer](http://www.bitwidgets.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T17:50:55.790

我不知道执行该特定要求的工具。但是，我相信[NDepend](http://www.ndepend.com/)确实具有类似 SQL 的语法，您可以使用它来构建针对 .NET 程序集的查询。因此，例如，您可以查询对每个程序集的公共成员有差异的东西，看看有什么不同？

[http://www.ndepend.com/doc_vs_diff.aspx](http://www.ndepend.com/doc_vs_diff.aspx)

你可以试试 NDepend（我认为它有试用版），看看它是否对你有帮助。让我们知道它是如何为您服务的。

# c++ - 在对象中创建另一个对象时，对象的成员变量会被覆盖

> ID：14323742
> 
> 赞同：0
> 
> 时间：2013-01-14T17:46:25.180
> 
> 标签：c++, windows, visual-studio

我的一门课有记忆问题。当我在类的成员函数中创建对象时会出现此问题。这是关于下面的课程。我删除了成员函数，因为它们不是必需的：

```
class User
{
private:
    bool locked;
    bool active;

    std::vector<City> * userCitys;
    UserData userData;
    Credentials credentials; 
```

当我调用此函数时出现问题：

```
int User::addCity(CityData cityData) 
{
    lockUserObject(); //Everything is fine here

    City cityToAdd; //When this object is created, the memory of userCitys will get overridden
    cityToAdd.activate();
    userCitys->push_back(cityToAdd);
    int cityID = userCitys->size() - 1;

    userCitys->at(cityID).editCityData(cityData);

    unlockUserObject();
    return cityID;
} 
```

首先，我在堆栈上创建了 userCitys。出于测试目的，我将它放在堆上。userCitys 的地址被一些数据覆盖。我找不到问题。City 只是一个基础类：

部分标题：

```
class City
{
private:
    bool active;
    Supplies supplies;
    std::vector<Building> buildings;
    std::vector<Company> companies;
    std::vector<Share> shares;
    std::vector<Troop> troops;
    CityData cityData; 
```

构造函数：

```
City::City()
{
    active = false; 
} 
```

userCitys 怎么可能被覆盖？这一切都发生在一个线程上，所以这不是问题。我尝试了很多东西，但我无法让它工作。找出问题的最佳方法是什么？

**编辑：** 锁定功能：

```
void User::lockUserObject()
{
    for( int i = 0; locked ; i++)
    {
        crossSleep(Settings::userLockSleepInterval);

        if( i >= Settings::userLockMaxTimes )
            Error::addError("User lock is over userLockMaxTimes",2);
    }

    locked = true;
} 
```

我在这里调用代码（测试函数）：

```
City * addCity(User * user)
{
    Location location;
    location.x = 0;
    location.y = 1;

    CityData citydata;
    citydata.location = location;
    citydata.villagers = 0;
    citydata.cityName = "test city";

    int cityID = user->addCity(citydata); //addCity is called here
    City * city = user->cityAction(cityID);;

    if( city == NULL)
        Error::addError("Could not create a city",2);

    return city;
} 
```

添加用户（测试代码）：

```
User * addUser()
{
    UserData test;
    test.name = "testtest";
    Credentials testc("testtest",3);

    //Create object user
    int userID = UserControle::addUser(test,testc);
    User * user = UserControle::UserAction(userID);

    if( user == NULL)
        Error::addError("Could not create a user",2);

    return user;
} 
```

我的测试功能：

```
void testCode()
{
    User * user = addUser();
    City * city = addCity(user);
} 
```

这个函数在 main 中调用：

```
int main()
{
    testCode();
    return 0;
} 
```

以下是 UserControle 中的 UserAction 和 addUser：

```
int UserControle::addUser(UserData userdata, Credentials credentials)
{
    int insertID = -1;
    for( int i = 0; i < (int)UserControle::users.size(); i++)
    {
        if( !UserControle::users.at(i).isActive() )
        {
            insertID = i;
            break;
        }   
    }

    User userToInsert(userdata,credentials);

    if( insertID != -1 )
    {
        UserControle::users.insert( UserControle::users.begin() + insertID,userToInsert);
        return insertID;
    }
    else
    {
        UserControle::users.push_back(userToInsert);
        return UserControle::users.size() - 1;
    }
}

User* UserControle::UserAction(int userID) //check all indexes if greater then 0!
{
    if( (int)UserControle::users.size() <= userID )
    {
        Error::addError("UserAction is out of range",3);
        return NULL;
    }

    if( !UserControle::users.at(userID).isActive())
    {
        Error::addError("UserAction, the user is not active.",3);
        return NULL;
    }

    return &UserControle::users[userID];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:29:00.097

您可以尝试以下几件事：

*   删除代码，直到故障消失。换句话说，从你的代码中提取一个最小的例子。我想你会自己看到错误，否则在这里发布那个小示例程序，其他人会。
*   不要使用原始指针。这些人的问题始终是谁拥有他们所指的东西。改为使用智能指针，例如 unique_ptr (C++11) 或 auto_ptr (C++98) 用于独占所有权。
*   如果您有像“userCities”这样的指针成员，您需要考虑复制该类的实例时会发生什么（您已经编写了适当的析构函数，或者？）。因此，要么防止复制（将复制构造函数和赋值运算符设为私有而不实现它），要么以正确克隆向量而不在不同实例之间共享的方式实现它们。
*   不要使用 C 风格的演员表。如果这些是通过编译器获得任何东西所必需的，那么代码可能已损坏。

# axapta - 以编程方式将发票添加到 Dynamics AX 2009

> ID：14323743
> 
> 赞同：1
> 
> 时间：2013-01-14T17:46:29.063
> 
> 标签：axapta, dynamics-ax-2009, x++, ax

我对 Dynamics AX 2009 还很陌生，因为我还没有真正找到解决我正在做的事情的方法，所以我决定在这里提问。

我需要通过 X++ 发布（？）发票。

我已经找到了这个[HOWTO: Facturación selectiva de líneas en Dynamics AX](http://www.jaestevan.com/howto-facturacion-selectiva-de-lineas-en-dynamics-ax)，即使它是西班牙语的，我想你也会明白的。

这是我从链接修改的代码：

```
static void JAEE_PurchFormLetter(Args _args)
{
    Num                 _invoiceNum;    // Núm. factura
    TransDate           _invoiceDate;   // Fecha factura

    MyPurchFormLetter     purchFormLetter =       PurchFormLetter::construct(DocumentStatus::Invoice);
    PurchParmUpdate     purchParmUpdate;
    PurchParmTable      purchParmTable;
    PurchParmLine       purchParmLine;

    TradeLineRefId      tableRefId;
    PurchTable          purchTable;
    PurchLine           purchLine;
    ;

    ttsbegin;

    _invoiceNum = 'Facbyjob';
    _invoiceDate = str2date('14-01-2013', 123);

    purchTable = PurchTable::find('00000019_062'); // Primer pedido
    // Inizializar purchFormLetter con el primer pedido
    purchFormLetter.parmCallerTable(purchTable);
    purchFormLetter.callInitParmPurchTable(purchTable);
    purchFormLetter.proforma(false);                                // Proforma: NO     (Registrar: SI)
    purchFormLetter.enableUpdateNowField(true);                     // Actualizar ahora: SI
    purchFormLetter.printFormLetter(false);                         // Imprimir: NO
    purchFormLetter.transDate(_invoiceDate);                        // Fecha de factura

    // Inizializar purchParmUpdate con el primer pedido
    purchParmUpdate.clear();
    purchParmUpdate.initValue();
    purchParmUpdate.ParmId              = purchFormLetter.parmId();
    purchParmUpdate.SumBy               = AccountOrder::Account;    // Agrupar por cliente
    purchParmUpdate.SumNum              = _invoiceNum;              // Núm. Factura
    purchParmUpdate.SpecQty             = PurchUpdate::All;         // Actualizar: Todo
    purchParmUpdate.DocumentStatus      = DocumentStatus::Invoice;  // Tipo documento: Factura
    purchParmUpdate.Proforma            = NoYes::No;                // Proforma: NO
    purchParmUpdate.SumIncludePending   = NoYes::No;                // Incluir pendiente: NO
    if (purchParmUpdate.validateWrite())
        purchParmUpdate.insert();
    else
        throw Exception::Error;

    purchFormLetter.purchParmUpdate(purchParmUpdate);
    purchFormLetter.parmParmTableNum(purchParmUpdate.SumNum);

    // Tabla temporal, se crea un registro de cabecera del primer pedido (sólo uno)
    purchParmTable.clear();
    purchParmTable.TableRefId = FormLetter::getTableRef();
    purchFormLetter.createParmTable(purchParmTable, purchTable);
    if (purchParmTable.validateWrite())
        purchParmTable.insert();
    else
        throw Exception::Error;

    tableRefId  = purchParmTable.TableRefId;

    // BEGIN - LINEAS
    //       - Repetir para cada línea que se quiera facturar y para cada una y 
    //       - asignar las variabies purchTable y purchLine según proceda
    purchParmLine.clear();
    purchParmLine.initValue();

    // Ajustar cantidades según necesidades

    // Catnidades de compra
    [purchParmLine.ReceiveNow,
     purchParmLine.RemainBefore,
     purchParmLine.RemainAfter] = purchFormLetter.qtyPurch(purchLine, naReal());

    // Cantidades de inventario
    [purchParmLine.InventNow,
     purchParmLine.RemainBeforeInvent,
     purchParmLine.RemainAfterInvent] = purchFormLetter.qtyInvent(purchLine, naReal());

    if (purchParmLine.ReceiveNow)
    {
        purchParmLine.ParmId = purchParmUpdate.ParmId;
        purchParmLine.initFromPurchLine(purchLine);
        purchParmLine.setLineAmount();
        purchParmLine.TableRefId = tableRefId;

        if (purchParmLine.validateWrite())
            purchParmLine.insert();
        else
            throw Exception::Error;
    }
    // END - LINEAS

    // Registrar!
    purchFormLetter.reArrangeNow(false); // No organizar
    purchFormLetter.run();

    ttscommit;
} 
```

我的问题是在这一行： `purchFormLetter.callInitParmPurchTable(purchTable);`。

为什么`initParmPurchTable()`要从 PurchFormLetter 的派生类中调用？

还有，如何做到这一点？我尝试声明自己的`MyPurchFormLetter`扩展类`PurchFormLetter`，添加`callInitParmPurchTable()`方法，但编译器告诉我，当我尝试运行代码时，该对象没有该方法。

上面写着：

```
Error al ejecutar código: Object objeto no tiene el método 'callInitParmPurchTable'. 
```

编辑：

我所做的就是将方法添加*到*类中，使其成为对象`callInitParmPurchTable()` *的*一部分。但我将问题留待解决，因为我认为这不是正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T08:46:25.153

您是否已修改`PurchFormLetter::construct(DocumentStatus::Invoice);`为返回 MyPurchFormLetter？

还要查看“编译前向”功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:32:46.937

我发现了以下内容：

创建一个继承并在那里实现显然是执行`PurchFormLetter`方法的类是正确的。`callInitParmPurchTable()``initParmPurchTable()`

我最有可能缺少的一个部分是编译`MyPurchFormLetter`，以便编译器可以告诉该方法存在。

# php - 成功 POST 时重定向到页面

> ID：14323746
> 
> 赞同：0
> 
> 时间：2013-01-14T17:46:36.573
> 
> 标签：php, header

我试图在某个 if 语句成功后重定向我的标题。

它只是没有重定向。我正在做我的 POST 方法然后重定向。这不可能吗？我的数据提交成功，只是没有重定向。

```
$errors = false;

if (isset($_POST['submit'])) {

if (!empty($_POST['name']) && !empty($_POST['company']) && !empty($_POST['email']) && !empty($_POST['question'])) {
        extract($_POST);
        $sql = "INSERT INTO `knowledge` (`name`,`company`,`email`,`question`) VALUES ('$name','$company','$email','$question')";
        $query = mysql_query($sql) or die(mysql_error());
        header("Location: http://www.test.com/thankyou.php");
} else {
    $errors = true;
}

if ($errors) {
    $leftNav .= "<p style='color: red;'>You must fill out all form fields.</p>";
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:58:03.223

首先，您应该在您的开发环境中打开 error_messaging 和 display_errors。这将帮助您立即了解此类问题的根源。

我的猜测是您在进行此重定向之前已经向浏览器输出了。如果您对此有错误消息，则会导致“标头已发送”错误，甚至会告诉您将输出发送到浏览器的代码行。

您还需要阅读 SQL 注入以及如何防止它。您的代码现在非常不安全。使用`mysql_*`函数或 PDO 而不是弃用的`mysql_*`函数将使您能够使用准备好的语句来防止 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:01:09.817

这段代码很乱。

此代码似乎对 XSS 攻击开放`$_POST['leftnav']`：不要使用提取，因为它可能会覆盖您自己的变量。

您的代码可以使用所有`$_POST`密钥进行攻击，因为它们没有被转义：不要使用 mysql_query，因为它已被弃用并且不支持预准备语句。

以及您的问题的答案：打开error_reporting：

```
<?php error_reporting(E_ALL);ini_set('display_errors', 1); ?> 
```

检查错误。如果你有空格什么的，之前`<?php`php会告诉你的。

# jquery - 使用 stellar.js 停止视差

> ID：14323747
> 
> 赞同：1
> 
> 时间：2013-01-14T17:46:37.743
> 
> 标签：jquery, html, parallax

我正在使用 stellar.js 视差...

有没有办法使用这个插件让元素停在某个位置？

当它到达顶部 300px 时不再视差了吗？

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:56:39.790

Stellar.js 允许您编写[位置属性插件](https://github.com/markdalgleish/stellar.js#writing-a-position-property-plugin)，它可以改变滚动期间元素的定位方式。

我不确定您所说的“何时达到 300 像素”是什么意思，但让我们看一个类似的例子来了解它是如何工作的。如果你想限制一个元素可以向下移动多远，你可以编写一个如下所示的插件：

```
$.stellar.positionProperty.limit = {

  setTop: function($element, newTop, originalTop) {
    var limit = 300;

    // Check if we're going over the limit
    if (newTop - originalTop > limit) {

      // Call default position property with our limited value
      $.stellar.positionProperty.position.setTop.call(null, $element, originalTop - limit, originalTop);

    } else {

      // Otherwise, delegate to the 'setTop' method of the 'position' adapter
      $.stellar.positionProperty.position.setTop.apply(null, arguments);

    }
  },

  // Nothing custom needed here, so we'll just use the built in adapter:
  setLeft: $.stellar.positionProperty.position.setLeft

} 
```

请注意，您还可以访问 'setTop' 和 'setLeft' 函数中的元素（通过 '$elem' 参数），允许您自定义每个元素的逻辑，这样您就可以将元素定位在屏幕顶部，如果那是你所追求的。

现在，我们可以像这样在 Stellar.js 中使用我们的新“限制”插件：

```
$.stellar({
  positionProperty: 'limit'
}); 
```

# powerpoint - 如何制作这样的PPT幻灯片？

> ID：14323748
> 
> 赞同：0
> 
> 时间：2013-01-14T17:46:41.633
> 
> 标签：powerpoint

[http://www.math.mcgill.ca/humphries/research/seminars/SoupScience09.pdf](http://www.math.mcgill.ca/humphries/research/seminars/SoupScience09.pdf)

好像我注意到了这种风格的ppt捆绑包（一些蓝色背景，pdf格式），有没有这个ppt的模板（我即将给出一些报告）？谢谢你的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:52:39.347

这些幻灯片是使用 LaTeX 中的 Beamer 类制作的。

更多信息：

[维基百科](http://en.wikipedia.org/wiki/Beamer_%28LaTeX%29 "维基百科")

[http://en.wikibooks.org/wiki/LaTeX/Presentations](http://en.wikibooks.org/wiki/LaTeX/Presentations)

[http://www.ctan.org/pkg/beamer](http://www.ctan.org/pkg/beamer)

# c++ - 创建 C++ 图形用户界面：最简单的方法是什么？

> ID：14323750
> 
> 赞同：0
> 
> 时间：2013-01-14T17:46:51.577
> 
> 标签：c++, user-interface

所以据我了解，使用 MFC，可以为 Windows 应用程序创建 GUI。但是使用 Qt 包更容易使用吗？Qt 是我用来编写在 linux 上运行的应用程序的工具，但对于 Windows，我想知道使用 Windows MFC 是否会不那么困难和耗时。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T17:56:20.220

既然您说“Qt 是我在 linux 上使用的……”，听起来您已经熟悉 Qt。在那种情况下，我肯定会推荐 Qt 而不是 MFC。（嘿，这样你就可以为这两个平台编写应用程序了！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:59:44.497

如果您已经习惯使用 Qt，那么请坚持使用它 - 它是跨平台的，因此可以在 Windows 上正常工作。除非您有特定的理由，否则当您已经熟悉跨平台应用程序时，将应用程序限制在单个平台（并学习全新的框架）是没有意义的。

此外，MFC 比 Qt 更难使用。尽管它被设计为 WinAPI 之上的面向对象层，但在 IMO 上做得并不是特别好，如果您想精通 MFC，您仍然需要熟悉 WinAPI。开箱即用的小部件已经过时并且在可配置选项方面受到限制，修改它们或设计新的小部件并不是特别容易。作为一种过时的技术，当您遇到困难时也很难在线找到资源和/或支持。

如果您确实对 MFC 有心，您可能还想看看 wxWidgets - 它与 MFC 有相似的“感觉”，但更新和跨平台。我个人更喜欢Qt。

Qt 在实现方面（如果你动态链接有很多 DLL 依赖项）和在构建方面（它为你的构建过程增加了额外的步骤），都可以是相当重量级的。如果您的应用程序更适合轻量级（但功能也更基本），请查看 FLTK。

# php - 匿名函数中的语法错误

> ID：14323752
> 
> 赞同：1
> 
> 时间：2013-01-14T17:46:56.930
> 
> 标签：php, closures, syntax-error, anonymous-function

> **可能重复：**
> [意外的 T_FUNCTION，但在哪里？](https://stackoverflow.com/questions/12662380/unexpected-t-function-but-where)

下面这行 PHP 代码在我的生产服务器 WAMP 上运行良好，没有任何错误，

```
$filtered_seats = array_filter($seats, function ($seat) use ($seat_no) { return ($seat != $seat_no); } ); 
```

但是当上线时，在 Linux 服务器上，它退出并出现以下错误

```
Parse error: syntax error, unexpected T_FUNCTION in /home/oya/public_html/ajax.php on line 514 
```

请任何人解释为什么会发生这种情况？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:51:12.223

自 php 5.3 起匿名函数可用，所以我猜你的 linux 服务器运行的版本 < 5.3。请参阅[手册](http://php.net/manual/en/functions.anonymous.php)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:49:15.040

检查您的 php 版本 - 看起来您使用的是 PHP < 5.3（在 5.3 中添加了闭包）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T17:49:56.260

PHP Anonymous 函数是在 PHP 5.3 中添加的，所以我敢打赌你在某处有过时的版本：

[http://php.net/manual/en/functions.anonymous.php](http://php.net/manual/en/functions.anonymous.php)

# java - 不使用 javax.net.debug 的 SSL 握手细节暴露

> ID：14323753
> 
> 赞同：1
> 
> 时间：2013-01-14T17:46:57.633
> 
> 标签：java, ssl, handshake

有没有办法在 java 中捕获 SSL/TLS 握手细节，特别是在 IIS 7.5 中通过辅助握手发送的 CertificateRequest 信息？

详细信息：我正在开发一个 SSL/TLS 扫描仪，该扫描仪适用于相互验证的系统，并且需要捕获服务器提供的提示列表（如果有）。

谢谢！mrwmd1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T21:39:50.463

因此，我使用 javax.net.debug 的输出重定向到一个 String 对象并解析它以查找相关消息。我找了几天，发现没有办法通过调试以外的任何方式在 java 中公开握手消息。太糟糕了......不幸的是，这不是线程安全的，如果您同时运行两个或更多客户端，调试输出会被全部覆盖。

# wcf - 如何为同步服务实现异步 wcf 客户端

> ID：14323755
> 
> 赞同：0
> 
> 时间：2013-01-14T17:46:58.657
> 
> 标签：wcf, asynchronous

有没有办法在不添加服务引用的情况下为同步 WCF 服务创建异步客户端？这适用于 .NET 4 客户端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:46:15.737

Visual Studio 中的服务引用只不过是一个代码生成器，它创建一个代理类，其中包含调用 Web 服务所需的相应数据元素。当然，如果您真的想完成繁琐而无聊的工作，您可以手动构建代理。

也许从使用 .net 反射器反编译 System.ServiceModel.ClientBase 开始？

对 ChannelFactory 做一些研究：http: [//msdn.microsoft.com/en-us/library/system.servicemodel.channelfactory.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.channelfactory.aspx)

即使通过包装 ChannelFactory 实现我自己的客户端，我仍然在另一个项目中使用 Add Service 引用来创建类定义并将它们移动到实际项目中。这是一个很好的妥协。

这是一个简单的异步服务接口：

```
[ServiceContract(Name = "IService")]
public interface IServiceAsync
{
    [OperationContract(AsyncPattern = true)]
    IAsyncResult BeginGetStuff(string someData, AsyncCallback callback, object state);

    IEnumerable<Stuff> EndGetStuff(IAsyncResult result);
} 
```

.NET 合约可能如下所示：

```
[ServiceContract]
public interface IService
{
    [OperationContract]
    IEnumerable<Stuff> GetStuff(string someData);
} 
```

然后在代码中，假设您使用 HTTP，无安全性和二进制消息编码，类似这样（抱歉，我没有编译任何这些，只是使用我为项目编写的一些代码键入它）：

```
//Create a binding for the proxy to use
HttpTransportBindingElement httpTransportBindingElement;

httpTransportBindingElement = new HttpTransportBindingElement();
absoluteServiceUri = new Uri(absoluteServiceUri.OriginalString + BinaryEndpointUri, UriKind.Absolute);
}

//Create the message encoding binding element - we'll specify binary encoding
var binaryMessageEncoding = new BinaryMessageEncodingBindingElement();

//Add the binding elements into a Custom Binding            
var customBinding = new CustomBinding(binaryMessageEncoding, httpTransportBindingElement);

// Set send timeout
customBinding.SendTimeout = this.SendTimeout;   

var factory = new ChannelFactory<IServiceAsync>(customBinding, new EndpointAddress(absoluteServiceUri, new AddressHeader[0]));

var channel = factory.CreateChannel();
channel.BeginGetStuff(Bla, results => { // Do something }, null); 
```

# c - 在线程池实现中保持锁定顺序

> ID：14323756
> 
> 赞同：2
> 
> 时间：2013-01-14T17:47:01.530
> 
> 标签：c, locking, deadlock

我有一个特定的锁定顺序，我正在遵循。我正在编写一个线程池来执行一些当前按顺序完成的任务。

锁定顺序为 pool->queue->job。

但是，有时我需要锁定作业以检查作业的状态，然后锁定队列以将作业从一个队列移动到另一个队列。所以，按照锁定顺序，我得到了这个：

```
lock job

if (job->state == CANCELED) {
unlock job
lock queue
lock job
// check that it is still canceled and do work
} 
```

我的问题是，是否有没有解锁/锁定工作的替代方法？当必须保留锁定顺序并且需要“更高”的锁定时，如何处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:53:18.110

我认为您可以在队列上进行尝试锁定。如果成功，则您拥有两个锁并且可以继续。如果失败，则其他人已经拥有队列锁，并且由于您不知道他是否正在等待您的作业锁，因此您必须先对作业进行解锁，然后才能对队列执行阻塞锁，否则您可能会死锁。

我认为以下代码永远不会死锁：

```
lock(job);
if (job->state == CANCELED) {
    if (!tryLock(queue)) {
        // Cannot lock queue; must avoid dead lock
        unlock(job);
        lock(queue); // This one might block now
        lock(job);
    }
    if (job->state == CANCELED) {
         // Do work
    }
    unlock(queue);
}
unlock(job); 
```

您可能以不同的锁定顺序解锁队列和作业，这取决于尝试锁定是否成功（如果成功，顺序正确，否则错误），但我仍然认为它永远不会死锁。

# algorithm - 计算连通图中两个节点之间的分离度

> ID：14323757
> 
> 赞同：2
> 
> 时间：2013-01-14T17:47:01.553
> 
> 标签：algorithm, graph, breadth-first-search

我正在研究一个图形库，该库需要确定两个节点是否连接，如果连接，它们之间的分离程度是多少，即从源节点到达目标节点所需的节点数。

由于它是一个非加权图，bfs 给出了最短路径。但是如何在到达目标节点之前跟踪发现的节点数量。

一个在发现新节点时递增的简单计数器将给出错误答案，因为它可能包括甚至不在路径中的节点。

另一种方法是将其视为均匀加权边的加权图并使用 Djkastra 的最短路径算法。

但我只想用 bfs 来管理它。

怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T17:52:14.167

在 BFS 期间，让每个节点存储一个指向其前驱节点的指针（图中的节点首先沿着其边发现该节点）。然后，一旦你运行了 BFS，你就可以从目标节点到源节点重复地跟随这个指针。如果您计算这需要多少步，您将获得从目标节点到源节点的距离。

或者，如果您需要重复确定节点之间的距离，您可能需要使用 Floyd-Warshall 全对最短路径算法，如果预先计算，您可以立即读取任何节点对之间的距离。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:53:11.220

我不明白为什么一个简单的计数器不起作用。在这种情况下，广度优先搜索肯定会为您提供最短路径。因此，您要做的是将一个属性附加到每个名为“count”的节点。现在，当您遇到尚未访问的节点时，您可以使用当前计数填充“计数”属性并继续前进。

如果稍后，您回到节点，您应该通过填充的计数属性知道它已经被访问过。

***编辑***：要在这里扩展我的答案，您必须维护一个变量，该变量将在您浏览图表时跟踪与起始节点的分离程度。对于您加载到队列中的每组新子项，请确保增加该变量中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:31:06.210

如果您只想知道距离（如果距离太大，可能会切断搜索），并且所有边的权重相同（即 1）：

伪代码：

```
Let Token := a new node object which is different from every node in the graph.
Let Distance := 0
Let Queue := an empty queue of nodes
Push Start node and Token onto Queue 

(Breadth-first-search):
While Queue is not empty:
    If the head of Queue is Target node:
        return Distance
    If the head of Queue is Token:
        Increment Distance
        Push Token onto back of the Queue
    If the head of Queue has not yet been seen:
        Mark the head of the Queue as seen
        Push all neighbours of the head of the Queue onto the back of Queue
    Pop the head of Queue
(Did not find target) 
```

# delphi - 具有两个或多个当前值的 Delphi 进度条

> ID：14323762
> 
> 赞同：3
> 
> 时间：2013-01-14T17:47:18.607
> 
> 标签：delphi, user-interface, progress-bar

我想在我的软件中制作一种多色条。一种进度条，但有两个当前值。

这就是我需要它的原因。我有一些“预算部分”，每个部分都有自己的限制（100 美元、1000 美元等）。我还有一个用于添加新账单（并将账单链接到预算部分）的编辑表格。在这个编辑器中，我想直观地表示预算部分有多满，以及当前账单的价格对该预算部分有多少影响。

例如，整个酒吧是 100 美元。绿色部分表示已保存账单的价格总和，例如 60 美元。黄色部分表示当前账单的价格，尚未保存，例如 5$。

像这样：![多部分进度条](../Images/fac87784cbb62d285e2779065713e29a.png)

当然，值应该是动态设置的。

你能推荐我绘制这个的任何组件（也许是一些高级进度条，可以显示多个当前值？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T19:10:49.190

正如大卫建议的那样，自己画吧。几乎一样多的麻烦。放下`TImage`你想要你的仪表的地方并使用这样的东西：

```
procedure PaintTwoColorGauge(const BackgroundColor, BorderColor, FirstGaugeColor, SecondGaugeColor: TColor; FirstGaugeValue, SecondGaugeValue, TotalValue: Integer; const Img: TImage);
var B: TBitmap;
    ImgWidth, G1Width, G2Width: Integer;
begin
  B := TBitmap.Create;
  try
    B.Width := Img.Width;
    B.Height := Img.Height;
    B.Canvas.Brush.Color := BackgroundColor;
    B.Canvas.Brush.Style := bsSolid;
    B.Canvas.Pen.Style := psClear;
    B.Canvas.Pen.Width := 1;
    B.Canvas.FillRect(Rect(0, 0, B.Width, B.Height));

    if TotalValue <> 0 then
    begin
      ImgWidth := B.Width - 2; // Don't account the width of the borders.
      G1Width := (FirstGaugeValue * ImgWidth) div TotalValue;
      G2Width := (SecondGaugeValue * ImgWidth) div TotalValue;
      if G1Width > ImgWidth then G1Width := ImgWidth; // Just in case
      if G2Width > ImgWidth then G2Width := ImgWidth;

      if G2Width > G1Width then
        begin
          B.Canvas.Brush.Color := SecondGaugeColor;
          B.Canvas.FillRect(Rect(0, 0, G2Width, B.Height));

          B.Canvas.Brush.Color := FirstGaugeColor;
          B.Canvas.FillRect(Rect(0, 0, G1Width, B.Height));
        end
      else
        begin
          B.Canvas.Brush.Color := FirstGaugeColor;
          B.Canvas.FillRect(Rect(0, 0, G1Width, B.Height));

          B.Canvas.Brush.Color := SecondGaugeColor;
          B.Canvas.FillRect(Rect(0, 0, G2Width, B.Height));
        end;

    end;

    B.Canvas.Pen.Color := BorderColor;
    B.Canvas.Pen.Style := psSolid;
    B.Canvas.Brush.Style := bsClear;
    B.Canvas.Rectangle(0, 0, B.Width, B.Height);

    Img.Picture.Assign(B);

  finally B.Free;
  end;
end; 
```

例如，下面是这段代码对我的 3 个 TImage 所做的事情（我的图像是故意 shpaed，因为你看到它们）：

```
procedure TForm1.FormCreate(Sender: TObject);
begin
  PaintTwoColorGauge(clWhite, clBlack, clGreen, clYellow, 50, 55, 100, Image1);
  PaintTwoColorGauge(clWhite, clBlack, clGreen, clYellow, 50, 60, 100, Image2);
  PaintTwoColorGauge(clWhite, clBlack, clGreen, clYellow, 20, 60, 100, Image3);
end; 
```

![在此处输入图像描述](../Images/85b425a4904450f477e05bd27f851dce.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:54:27.430

自己写，很有趣！但是，虽然不是真的那么困难，但编写自己的组件可能看起来是一项艰巨的任务。特别是对于新手使用或没有这样做的经验。

接下来的选项是自己绘制它，因此预期的组件应该“始终”是`TPaintBox`控件。实现`OnPaint`事件处理程序并在需要时重绘自己。下面是如何将这样的油漆盒转换为双规格组件的示例实现：

```
type
  TDoubleGauge = record
    BackgroundColor: TColor;
    BorderColor: TColor;
    Color1: TColor;
    Color2: TColor;
    Value1: Integer;
    Value2: Integer;
    MaxValue: Integer;
  end;

  TForm1 = class(TForm)
    PaintBox1: TPaintBox;
    procedure FormCreate(Sender: TObject);
    procedure PaintBox1Paint(Sender: TObject);
  private
    FDoubleGauge: TDoubleGauge;
  end;

...

procedure TForm1.PaintBox1Paint(Sender: TObject);
var
  Box: TPaintBox absolute Sender;
  MaxWidth: Integer;
  Width1: Integer;
  Width2: Integer;
begin
  with FDoubleGauge do
  begin
    Box.Canvas.Brush.Color := BackgroundColor;
    Box.Canvas.Pen.Color := BorderColor;
    Box.Canvas.Rectangle(0, 0, Box.Width, Box.Height);
    if MaxValue <> 0 then
    begin
      MaxWidth := Box.Width - 2;
      Width1 := (MaxWidth * Value1) div MaxValue;
      Width2 := (MaxWidth * Value2) div MaxValue;
      Box.Canvas.Brush.Color := Color2;
      if Abs(Value2) < Abs(MaxValue) then
        Box.Canvas.FillRect(Rect(1, 1, Width2, Box.Height - 1));
      Box.Canvas.Brush.Color := Color1;
      if Abs(Value1) < Abs(Value2) then
        Box.Canvas.FillRect(Rect(1, 1, Width1, Box.Height - 1));
    end;
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
  FDoubleGauge.BackgroundColor := clWhite;
  FDoubleGauge.BorderColor := clBlack;
  FDoubleGauge.Color1 := clGreen;
  FDoubleGauge.Color2 := clYellow;
  FDoubleGauge.Value1 := 50;
  FDoubleGauge.Value2 := 60;
  FDoubleGauge.MaxValue := 100;
  PaintBox1.Invalidate;
end; 
```

嗯，这看起来很努力。尤其是当单个表格上需要更多这样的双规时。因此，我喜欢[Cosmin Prund 的回答](https://stackoverflow.com/a/14324943/757830)，因为他使用`TImage`的组件能够“记住”在需要时必须重新绘制的内容。作为奖励，这里是他的代码的替代版本（在无效输入上的行为略有不同）：

```
procedure DrawDoubleGauge(BackgroundColor, BorderColor, Color1, Color2: TColor;
  Value1, Value2, MaxValue: Integer; Img: TImage);
var
  Width: Integer;
  Width1: Integer;
  Width2: Integer;
begin
  Img.Canvas.Brush.Color := BackgroundColor;
  Img.Canvas.Pen.Color := BorderColor;
  Img.Canvas.Rectangle(0, 0, Img.Width, Img.Height);
  if MaxValue <> 0 then
  begin
    Width := Img.Width - 2;
    Width1 := (Width * Value1) div MaxValue;
    Width2 := (Width * Value2) div MaxValue;
    Img.Canvas.Brush.Color := Color2;
    if Abs(Value2) < Abs(MaxValue) then
      Img.Canvas.FillRect(Rect(1, 1, Width2, Img.Height - 1));
    Img.Canvas.Brush.Color := Color1;
    if Abs(Value1) < Abs(Value2) then
      Img.Canvas.FillRect(Rect(1, 1, Width1, Img.Height - 1));
  end;
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T17:03:21.907

我也在寻找这个，因为我不想在这上面花任何钱，我会遵循建议的解决方案，但是如果有人想要一个高级组件，我会找到一个不太贵并且在我看来相当不错的组件，这是链接，以防它对其他人有用：

[http://www.tmssoftware.com/site/advprogr.asp?s=](http://www.tmssoftware.com/site/advprogr.asp?s=)

谢谢大家。

# javascript - Cyclo for with inside ajax，回调返回错误结果

> ID：14323764
> 
> 赞同：0
> 
> 时间：2013-01-14T17:47:28.387
> 
> 标签：javascript, ajax, jquery

我尝试创建一个加载多个提要 rss 的 jquery 插件（它们很灵活，可以是 1 个或 2 个或 3 个等），用于创建一个显示已加载新闻提要的 html。我的目标是有可能加载多个 rss 提要 (xml) 并通过 html 显示它们。当我尝试似乎回调被覆盖时，我收到了 2 个结果但相等。

例子：

```
(function($){
    $.fn.getFeed = function(Obj){
        var
            arrOpt = Obj.arrayOptions,
            arrOptLng = arrOpt.length;

        for(var i = 0; i < arrOptLng; i++){
            var 
                index = i,
                Opt = arrOpt[i],
                feedUrl = Opt.feed,
                sucFnc = Opt.callback,
                $cnt = this;

            console.log(index);
            // here:
            // 0
            // 1

            $.ajax({
                url:feedUrl,
                dataType: "jsonp",
                success:function(data){
                    sucFnc(data,$cnt,Opt,index);
                },
                error:function(){
                    $cnt.html('error');
                }
            });
        }
    }
})(jQuery);

function feedManipulation(){
    console.log(index)
    // here:
    // 1
    // 1
}

/* DOM LOADED */
$(function(){
    $('.news').getFeed({ // Activation getFeed
        arrayOptions:[{
            feed:'http://feed', 
            callback:feedManipulation,
            imgDefault:'http://img',
            nArtc:1
        },{
            feed:'http://feed', 
            callback:feedManipulation,
            imgDefault:'http://img',
            nArtc:1
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:44:50.123

Ciao，我写了这个问题并创建了解决方案，所以我会解释一下。在这段代码中，我删除了 cyclo for 并创建了一个包含 ajax 调用的函数。第一次触发 ajax 函数时，我将一个参数传递给 ajax 函数，其中包含一个用于设置插件（锁定在底部）的对象，而我的 ajax 函数本身就是调用，然后将相同的对象发送到 ajax功能我更改了一些信息，例如“Opt.index”，以这种方式创建了一个 ajax 循环。它真的有用吗;) 使用它。

```
(function($){
        $.fn.getFeed = function(Obj){

            // Options object
            Opt = new Object();
            Opt.index = 0;
            Opt.$cnt = this;
            Opt.arrOpts = Obj.arrayOptions;
            Opt.arrOptLng = Opt.arrOpts.length;
            Opt.arrOpt = Opt.arrOpts[Opt.index];
            Opt.feedUrl = Opt.arrOpts[Opt.index].feedUrl;

            // ajax call
            cycloAjax(Opt);
        }

        /* ajax cyclo */
        function cycloAjax(Obj){
            $.ajax({
                url: Obj.feedUrl,
                dataType: "jsonp",
                success:function(data){
                    feedManipulation(data,Obj.$cnt,Obj);

                    if(Obj.index < Obj.arrOptLng - 1){
                        Obj.index++;
                        Obj.arrOpt = Obj.arrOpts[Obj.index];
                        Obj.feedUrl = Obj.arrOpts[Obj.index].feedUrl;
                        cycloAjax(Obj);
                    }
                    else{
                        completeLoadFeeds(Obj.$cnt,Obj);
                    }
                },
                error:function(){
                    Obj.$cnt.html('<p>error</p>');
                }
            });
        }

        .
        .
        .

    })(jQuery);

    /* DOM LOADED */
    $(function(){
        $('.news').getFeed({ // Activation getFeed
            arrayOptions:[{
                feed:'http://feed', 
                callback:feedManipulation,
                imgDefault:'http://img',
                nArtc:1
            },{
                feed:'http://feed', 
                callback:feedManipulation,
                imgDefault:'http://img',
                nArtc:1
            }]
        });
    }); 
```

# macos - 从 NSString 创建 NSURL 的正确方法是什么？

> ID：14323768
> 
> 赞同：1
> 
> 时间：2013-01-14T17:47:47.247
> 
> 标签：macos, cocoa, nsstring, nsurl

我有一个`NSString`存储保存文件的路径：

```
NSString *filePath = [NSString stringWithFormat:
                      @"%@/someFolder/%@",
                      NSHomeDirectory(),
                      [NSString stringWithFormat:@"%@",[self.fileName stringByAppendingPathExtension:@"txt"]]]; 
```

没关系 - 当我记录它时，我得到：

```
/Users/username/someFolder/fileName.txt 
```

所以我的下一步是`NSURL`从 this 中创建一个对象`NSString`。我这样做了：

```
 NSURL *pathURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@", filePath]];
        NSLog(@"URL = %@", pathURL); 
```

但回应是：

```
URL = (null) 
```

这里有什么问题？我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T17:51:16.357

路径本身不是有效的 URL。你必须使用这个：

```
NSURL *pathURL = [NSURL fileURLWithPath:filePath]; 
```

并阅读文档。（并且不要过度使用/滥用格式字符串。）

# c# - 修剪列表中的字符串

> ID：14323785
> 
> 赞同：1
> 
> 时间：2013-01-14T17:49:07.250
> 
> 标签：c#, wpf

我有一个包含字符串值的列表。我需要修剪前导值和结束值。这是代码：

```
 using EnterpriseDT.Net.Ftp;
        public List<FTPFile> FileList = new List<FTPFile>();

        FTP = new FTPConnection() { ServerAddress = _host, UserName = _user, Password = _password };
        FTP.Connect();
        FTP.TransferType = FTPTransferType.BINARY;
        FTP.ChangeWorkingDirectory(_as400_directory);
        FTP.LocalDirectory = _local_directory;
        FileList.AddRange(FTP.GetFileInfos());
        FTP.Close(); 
```

FileList 列表包含以下示例值：

```
test 123 11/01/12 *STMF File1.csv somegarbagevalues
test 123 11/01/12 *STMF File2.csv somegarbagevalues
test 123 11/01/12 *STMF File3.csv somegarbagevalues 
```

我需要做的是在线捕获文件名（例如 File1.csv、File2.csv ...）有没有办法在我执行 FileList.AddRange 语句时修剪不需要的值而无需遍历列表或修剪？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T17:51:06.710

LINQ 使这变得简单：

```
FileList.AddRange(FTP.GetFileInfos().Select(x => x.Trim())); 
```

where`Trim()`将是一个方法（可能是一个扩展方法），`FTPFile`它返回一个`FTPFile`带有修剪文件名的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:55:03.430

FTPFile 是一个类并且有一个属性“Name”。您可能正在查看 FTPFile 类的 ToString() 实现，它一次为您提供了所有属性。

请参阅： [http ://www.enterprisedt.com/products/edtftpnet/doc/api/EnterpriseDT.Net.Ftp.FTPFileMembers.html](http://www.enterprisedt.com/products/edtftpnet/doc/api/EnterpriseDT.Net.Ftp.FTPFileMembers.html)

只需使用：

```
 foreach(FTPFile f in FileList)
 {
     string name = f.Name;
     // Do whatever you want with name.

 } 
```

# qml - 在 TextEdit 中使用 Tab 键进行导航

> ID：14323788
> 
> 赞同：3
> 
> 时间：2013-01-14T17:49:19.293
> 
> 标签：qml, qt-quick

我有两个`TextEdit`框和一个自定义按钮小部件，我希望使用键盘上的 tab 键按以下顺序更改焦点：

```
TextEdit1 <-> TextEdit2 <-> Button 
```

为了获得上面的链，我为每个小部件指定了类似于以下内容的内容：

```
KeyNavigation.tab: TextEdit2
KeyNavigation.backtab: TextEdit1 
```

然而，我的问题是选项卡击键被捕获`TextEdit`，并且不能用于导航。如何禁用选项卡`TextEdit`并使用它来更改焦点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:19:44.490

我发现了问题。

默认情况下，键事件首先发送到接收事件的项目，而不是 `KeyNavigation`。可以通过设置更改此行为

```
KeyNavigation.priority: KeyNavigation.BeforeItem 
```

完整的代码因此变成

```
KeyNavigation.tab: TextEdit2
KeyNavigation.backtab: TextEdit1
KeyNavigation.priority: KeyNavigation.BeforeItem 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:01:49.340

阅读[Qml Keys 元素](http://doc.qt.digia.com/qt/qml-keys.html)。

你可以这样做：

```
TextEdit
{
  width : 40
  height: 40
  text  : "junk"

  Keys.onTabPressed: 
  {
      // Write logic to transfer focus to whomsoever you want
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T13:46:15.610

在寻找类似问题的解决方案时，我在 Qt Creator 中遇到了这个选项，似乎解决了这个问题。现在我可以使用制表键移出 QTextEdit 对象，而不是在字段中插入制表符。

我看到这个话题已经过时并且已经解决了，但也许这个方便的简单选项是通过对 Qt 的更新来提供的，我不知道。我刚刚遇到它，我希望它可以帮助寻找与我相同的解决方案的人。

[![在此处输入图像描述](../Images/d7378bb27bef696a56fc1bb4dc938974.png)](https://i.stack.imgur.com/usH4S.png)

# jquery - Grid 内的输入按钮事件未使用 JQuery 触发

> ID：14323789
> 
> 赞同：0
> 
> 时间：2013-01-14T17:49:30.847
> 
> 标签：jquery, asp.net, button, jquery-click-event

我的gridview中有一个输入按钮。我正在使用 jquery 捕获按钮的单击事件，并在后面运行代码（基本上我正在尝试实现电子邮件的已读未读功能）：

```
 $('.toggleBtn').click(function(e) {
           btnUnreadClicked = true;
$.ajax({
                type: "POST",
                url: "ClaimDetails.aspx/BtnOpenPDF",
                data: "{'id': '" + letterid + "','anchText': '" + anchText + "'}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                async: false,

                success: function (msg) {
                    if (msg.d == 'Read') {
                        $tr.removeClass('unreadGridRow');
                        //update unread text to date time now
                        var d = new Date();
                        var replaceUnread = unreadColumn.toString().replace("Unread", d.format("dd/MM/yyyy"));
                        $tr.html(replaceUnread);

                        //update claim letter counts only
                        var parentRow = document.getElementById('__' + parentrowid).innerHTML;
                        var lblUnreadDocCount = $('#__' + parentrowid).find('#lblUnreadDocCount').text();
                        var finalCount = parseInt(lblUnreadDocCount) -1 ; 
                        if(finalCount >= 0)
                        {
                            $('#__' + parentrowid).find('#lblUnreadDocCount').text(finalCount);
                        }

                        if(finalCount == 0 )
                        {
                            //remove the class
                            $('#__' + parentrowid).removeClass('unreadGridRow');
                        }

                        //get count of overall documents and subtract from it
                        var notification = $("#NewLetter3");
                        var numb = notification.text().match(/\d/g);
                        var finaldigits = numb.toString().replace(",", "");
                        var finalTotalDocsCount = parseInt(finaldigits) - 1;
                        if(finalTotalDocsCount >= 0)
                        {      
                            //notification.text(notification.text().replace(numb, finalTotalDocsCount));
                            notification.html("You have " + finalTotalDocsCount + " unread Documents. Please click here to view");
                            //document.getElementById("NewLetter2").innerHTML = notification.text(); 
                            if(finalTotalDocsCount == 0)
                            {
                                $("#NewLetter2").hide();  
                            }
                        }

                        $tr.find(".toggleBtn").text('Un-read');
                    }
                    else  if (msg.d == 'Un-read') {
                         $tr.addClass('unreadGridRow');
                        //update unread text to date time now
                        var unreadDate = new Date();
                        var replaceRead = unreadColumn.toString().replace("Unread", unreadDate.format("dd/MM/yyyy"));
                        $tr.html(replaceRead);

                        //update claim letter counts only
                        var unreadparentRow = document.getElementById('__' + parentrowid).innerHTML;
                        var lblUnreadDocCountUnread = $('#__' + parentrowid).find('#lblUnreadDocCount').text();
                        var finalCountUnread = parseInt(lblUnreadDocCountUnread) + 1 ; 
                        if(finalCountUnread >= 0)
                        {
                            $('#__' + parentrowid).find('#lblUnreadDocCount').text(finalCountUnread);
                        }

                        if(finalCountUnread > 0 )
                        {
                            //remove the class
                            $('#__' + parentrowid).addClass('unreadGridRow');
                        }

                        //get count of overall documents and subtract from it

                        var Unreadnotification = $("#NewLetter3");
                        if(Unreadnotification.text() == "" ) {    Unreadnotification.html("You have 0 ");}
                        var Unreadnumb = Unreadnotification.text().match(/\d/g);
                        var Unreadfinaldigits = Unreadnumb.toString().replace(",", "");
                        var finalTotalDocsCountUnread = parseInt(Unreadfinaldigits) + 1;

                        if(finalTotalDocsCountUnread >= 0)
                        {                                 
                            if(finalTotalDocsCountUnread >= 0)
                            {
                                $("#NewLetter2").show();  
                            }
                            //notification.text(notification.text().replace(numb, finalTotalDocsCount));
                            Unreadnotification.html("You have " + finalTotalDocsCountUnread + " unread Documents. Please click here to view");
                            //document.getElementById("NewLetter2").innerHTML = notification.text(); 

                        }

                        $tr.find(".toggleBtn").text('Read');
                    }
              }
            }); 
```

在上述事件之后的同一页面上，我还有另一个捕获行点击的事件，如下所示：

```
 $("#<%=gvClaimDtSentDate.ClientID%> tr:has(td)").click(function (e) {
                if( $(this).closest('tr').hasClass('parent'))
                {
 if(btnUnreadClicked == false)
                {
                 // do stuff related to row click
                }

                btnUnreadClicked = false; 
```

现在，当我第一次单击该按钮时，它可以正常工作，但在第二次单击时不会调用该事件，并且运行 tr click 中的功能...

但是当我刷新页面并做同样的事情然后再次刷新按钮事件时运行......

此外，当我注释掉 ajax 部分时，它很好......我似乎也找不到任何语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:14:47.497

更改以下代码

```
 $('.toggleBtn').click(function(e) { 
```

到以下

```
$("body").on("click", ".toggleBtn", function(e){ 
```

我想这就是你需要的。

在这里我添加了事件，`body`因为我不知道你的 HTML 结构。您应该将 附加`.on`到 datagridview 或其父级，这样事件就不必冒泡太多。

**更新：**

在每一行附加事件并不是一个好主意，尤其是当行太多时。它会使脚本太重。所以建议`.on`在这些情况下使用。在旧版本的 jQuery 中，您可能必须`.live`使用`.on`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:25:35.350

尝试关注

```
function pageLoad(sender, args) {
    $('.toggleBtn').click(function(e) {...}
} 
```

这应该有效。实际上在 asp.net 中，您应该在**pageLoad()**函数中附加所有事件。

# javascript - 精确控制和测量图像的显示时间

> ID：14323792
> 
> 赞同：26
> 
> 时间：2013-01-14T17:49:44.217
> 
> 标签：javascript, jquery, time, repaint, reflow

对于反应时间研究（如果您有兴趣，[请参阅此问题），我们想要控制和测量图像的显示时间。](https://stackoverflow.com/questions/13973321/capturing-reaction-times-using-javascript-accuracy-concerns)我们想考虑在不同用户的机器上重新绘制所需的时间。

**编辑**：最初，我只使用内联执行来计时，并且认为我不能相信它能够准确地测量图片在用户屏幕上可见的时间，因为绘画需要一些时间。

后来，我找到了事件“ [MozAfterPaint](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/MozAfterPaint) ”。它需要更改配置才能在用户的计算机上运行，​​而相应的[WebkitAfterPaint](https://twitter.com/zbujtas/status/5316424772)没有成功。这意味着我不能在用户的计算机上使用它，但我将它用于我自己的测试。我在下面粘贴了相关的代码片段和我的测试结果。
我还使用 Chrome 中的[SpeedTracer](https://developers.google.com/web-toolkit/speedtracer/)手动检查了结果。

```
// from the loop pre-rendering images for faster display
var imgdiv = $('<div class="trial_images" id="trial_images_'+i+'" style="display:none"><img class="top" src="' + toppath + '"><br><img class="bottom" src="'+ botpath + '"></div>');
Session.imgs[i] = imgdiv.append(botimg);
$('#trial').append(Session.imgs);

// in Trial.showImages
$(window).one('MozAfterPaint', function () {
    Trial.FixationHidden = performance.now();
});
$('#trial_images_'+Trial.current).show(); // this would cause reflows, but I've since changed it to use the visibility property and absolutely positioned images, to minimise reflows
Trial.ImagesShown = performance.now();

Session.waitForNextStep = setTimeout(Trial.showProbe, 500); // 500ms    

// in Trial.showProbe
$(window).one('MozAfterPaint', function () {
    Trial.ImagesHidden = performance.now();
});
$('#trial_images_'+Trial.current).hide();
Trial.ProbeShown = performance.now();
// show Probe etc... 
```

### 比较使用 MozAfterPaint 和内联执行测量的持续时间的结果。

这不会让我太高兴。首先，中值显示持续时间比我想要的短约 30 毫秒。其次，使用 MozAfterPaint 的方差非常大（并且比内联执行更大），所以我不能简单地通过将 setTimeout 增加 30 毫秒来调整它。第三，这是在我相当快的计算机上，其他计算机的结果可能会更糟。

![持续时间箱线图](../Images/0429357630db0c011751cb0ecf538d8e.png)

![使用两种方法测量的持续时间的关系](../Images/4b774ad625649d2df1ee2bc116307ca7.png)

### SpeedTracer 的结果

这些更好。图像可见的时间通常在预期持续时间的 4（有时）10 毫秒内。看起来 Chrome 也考虑了在调用中重新绘制所需的时间`setTimeout`（因此，如果图像需要重新绘制，则调用之间存在 504 毫秒的差异）。不幸的是，我无法在 SpeedTracer 中分析和绘制许多试验的结果，因为它只记录到控制台。我不确定 SpeedTracer 和 MozAfterPaint 之间的差异是否反映了两个浏览器的差异，或者是我在使用 MozAfterPaint 时缺少的东西（我很确定我正确地解释了 SpeedTracer 输出）。

## 问题

我想知道

1.  如何测量它在用户机器上实际可见的时间，或者至少获得不同测试计算机（Chrome、Firefox、Safari）上一组不同浏览器的可比数字？
2.  我可以抵消渲染和绘画时间以达到 500 毫秒的实际可见性吗？如果我必须依赖通用偏移，那会更糟，但仍然比在如此短的时间内显示图像要好，以至于用户在速度较慢的计算机上不会有意识地看到它们。
3.  我们使用`setTimeout`. 我知道，[`requestAnimationFrame`](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)但似乎我们无法从使用它中获得任何好处：
    该研究应该是整个研究期间的焦点，更重要的是我们获得 +/-500 毫秒的显示而不是某个特定的帧数。我的理解正确吗？

显然，Javascript 对此并不理想，但它对我们的目的来说是最不坏的（该研究必须在用户自己的计算机上在线运行，要求他们安装一些东西会吓跑一些人，Java 没有捆绑在 Mac OS X 浏览器中不再）。
目前我们只允许当前版本的 Safari、Chrome、Firefox 和 MSIE（性能检测功能。现在和全屏 API，我还没有检查 MSIE 是如何做的）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T18:21:04.370

因为我还没有得到更多答案，但在编辑这个问题时学到了很多东西，所以我将我的进展发布为答案。如您所见，它仍然不是最佳的，我很乐意将赏金奖励给任何改进它的人。

## 统计数据

![新结果](../Images/782b14542ca53dffca0c71add33a018d.png)

*   在最左边的面板中，您可以看到导致我怀疑我得到的时间估计的分布。
*   中间面板显示了我在缓存选择器、重新排序一些调用、使用更多链接、使用`visibility`绝对定位而不是`display`.
*   最右边的面板显示了我在使用由[Joe Lambert](http://www.joelambert.co.uk)使用 requestAnimationFrame 改编的函数后得到的结果。[在阅读了一篇关于 rAF 现在也具有亚毫秒精度的博文](http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision)后，我做到了这一点。我认为它只会帮助我平滑动画，但显然它也有助于获得更好的*实际显示*持续时间。

### 结果

在最后一个面板中，“paint-to-paint”时间的平均值约为 500 毫秒，内联执行时间的平均值实际上是分散的（有道理，因为我使用相同的时间戳来终止下面的内部循环）并与“paint -to-paint”的时机。

持续时间仍然存在很大差异，我很想进一步减少它，但这绝对是进步。我将不得不在一些速度较慢的 Windows 计算机上对其进行测试，看看我是否真的对它感到满意，最初我希望所有偏差都低于 10 毫秒。

如果我制作了一个不需要用户交互的测试套件，我也可以收集更多的数据，但我想在我们的实际应用程序中这样做以获得现实的估计。

### `window.requestTimeout`使用 window.requestAnimationFrame

```
window.requestTimeout = function(fn, delay) {
    var start = performance.now(),
        handle = new Object();
    function loop(){
        var current = performance.now(),
            delta = current - start;

        delta >= delay ? fn.call() : handle.value = window.requestAnimationFrame(loop);
    };
    handle.value = window.requestAnimationFrame(loop);
    return handle;
}; 
```

### 编辑：

我的另一个问题的[答案](https://stackoverflow.com/a/26629157/263054)链接到一篇[不错的新文章](http://link.springer.com/article/10.3758%2Fs13428-014-0471-1)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-20T14:02:38.667

您是否尝试获取初始毫秒，并在事件触发后计算差异？而不是 setTimeout。就像是：

```
var startDate = new Date();
var startMilliseconds = startDate.getTime();

// when the event is fired :
(...), function() {
    console.log(new Date().getTime() - startMilliseconds);
}); 
```

如果可能，尽量避免使用 jQuery。纯 JS 将为您提供更好的响应时间和更好的整体性能

# variables - jmeter vars.put 带有一个对象 javascript

> ID：14323799
> 
> 赞同：1
> 
> 时间：2013-01-14T17:50:36.553
> 
> 标签：variables, object, jmeter

我正在尝试使用`vars.put`在javascript中的jmeter变量中写入对象属性的结果，但我有一个问题......

这是我的代码：

```
eval('var obj = ' + prev.getResponseDataAsString());
var meta_key = vars.get("MetaKey"); //meta_key is a variable 
```

这工作正常：

```
vars.put("content_metakey", obj[meta_key]); 
```

但是当我这样做时，它不起作用：

```
vars.put("taille", obj.meta_key[0].id); //meta_key variable
vars.put("taille", obj.tag[0].id); //tag is the value 
```

你有什么线索吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:22:26.250

我不知道这是否可能，所以我使用了另一种方法来做到这一点：我使用了另一个 eval。

我的代码：

> obj2 = eval(obj[meta_key]);
> vars.put("id_metakey"+meta_type,obj2[0].id);

# javascript - 函数返回值到变量

> ID：14323800
> 
> 赞同：1
> 
> 时间：2013-01-14T17:50:37.137
> 
> 标签：javascript, coffeescript

我无法将函数返回值分配给变量。为什么当我将它记录到控制台时，我得到的是返回的函数而不是最终的产品？

```
time = ->
  today = new Date()
  minutes = today.getMinutes()
  if minutes < 10 then minutes = "0#{minutes}"
  hours = today.getHours()
  if hours < 10 then hours = "0#{hours}"
  "#{hours}:#{minutes}"
console.log time 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T17:53:20.673

只需添加`do`执行函数（如果您希望“时间”包含字符串，而不是函数）：

```
time = do -> 
```

或将“时间”用作函数，即调用它：

```
console.log time() 
```

# c# - 在方法中抛出异常会导致方法返回吗？

> ID：14323801
> 
> 赞同：7
> 
> 时间：2013-01-14T17:50:37.070
> 
> 标签：c#, exception, methods, return

我有以下代码：

```
public static Point operator /(Point point, double value)
    {
        if (value == 0)
        {
            throw new DivideByZeroException("Cannot divide by zero");
            return Point.Origin;
        }
        return new Point(point.X / value, point.Y / value, point.Z / value);
    } 
```

第一个返回语句 ( `return Point.Origin;`) 在 Visual Studio 中带有绿色下划线。当光标悬停在带下划线的文本上时，消息会显示“检测到无法访问的代码”。这引出了我在标题行中提出的问题：

在方法中抛出异常会导致方法返回吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T17:53:16.927

好吧，它会导致方法的执行*退出*，是的。异常被抛出堆栈，最接近捕获它的方法。如果它不影响执行流程，那将毫无意义。

这与“正常”返回的方法不同——即没有例外。所以假设调用方法有：

```
Point foo = bar / baz;
Console.WriteLine("Done"); 
```

在这种情况下，如果除法运算符抛出异常，`Console.WriteLine()`调用*将不会执行。*相反，*要么*在此方法中捕获异常，*要么*将异常传播到该方法的调用者，等等。

（`finally`块也将沿途执行。）

可能值得阅读 MSDN guide to ["handling and throwing exceptions"](http://msdn.microsoft.com/en-us/library/5b2yeyab.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:56:52.470

不，因为抛出异常**不是**返回。

如果异常没有在函数内部处理，它将导致立即退出函数，将控制权传递到程序中将捕获异常的第一个点，即处理。（如果不处理会导致程序突然死亡。）

由于函数将在 throw 后退出，因此 return 语句是无用的，因为它永远不会到达。，

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T17:53:19.387

不完全是。当抛出异常时，如果被捕获，则会跳转到方法内的处理代码。从那里它可以做任何你想做的事情。如果在您的示例中未被捕获，它将跳转到调用此方法的方法，并且永远不会“返回”一个值。它也永远不会返回执行您抛出异常后的返回行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T17:51:49.547

> 在方法中抛出异常会导致方法返回吗？

是的。方法的执行被中断，所以方法返回它的执行流程。但是没有返回值，您使用`return`语句定义了它。当前方法后面`throw new`的行没有被执行，除了对应的`catch`和`finally`块。所以你不必在抛出异常后返回值。

Visual Studio 强调了它检测到无法访问的代码块。在您的特定案例 `return Point.Origin;`中，语句永远不会被执行，因此您可以将其删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T17:53:01.423

是的，抛出异常会导致方法立即返回。

但是，这不是正常的回报。例如，没有返回值。从由于抛出异常而返回的方法中捕获控制权的唯一方法是拥有一个异常处理程序。

# ruby-on-rails - 使用 Elasticsearch/Tire 展平多态 AR 关系

> ID：14323805
> 
> 赞同：5
> 
> 时间：2013-01-14T17:50:57.493
> 
> 标签：ruby-on-rails, elasticsearch, tire

我正在使用 Rails 3 应用程序，以允许人们申请赠款等。我们使用 Elasticsearch/Tire 作为搜索引擎。

文件，例如拨款提案，由许多不同类型的答案组成，例如联系信息或论文。在 AR 中，（通常是关系数据库）您不能直接指定多态“has_many”关系，因此：

```
class Document < ActiveRecord::Base
  has_many :answerings
end

class Answering < ActiveRecord::Base
  belongs_to :document
  belongs_to :question
  belongs_to :payload, :polymorphic => true
end 
```

“有效负载”是个人答案类型的模型：联系人、叙述、多项选择等。（这些模型在“Answerable”下命名。）

```
class Answerable::Narrative < ActiveRecord::Base
  has_one :answering, :as => :payload
  validates_presence_of :narrative_content
end

class Answerable::Contact < ActiveRecord::Base
  has_one :answering, :as => :payload
  validates_presence_of :fname, :lname, :city, :state, :zip...
end 
```

从概念上讲，这个想法是一个*答案*由一个答案（类似于连接表的功能，存储所有答案共有的元数据）和一个可回答（存储答案的实际内容）组成。这非常适合编写数据。搜索和检索，不是那么多。

我想使用 Tire/ES 来展示我的数据的更健全的表示形式，以进行搜索和阅读。在正常的轮胎设置中，我最终会得到 (a) 一个用于回答的索引和 (b) 用于叙述、联系人、多项选择等的单独索引。相反，我只想存储文档和答案，可能作为父/子。Answers 索引将合并来自 Answerings（id、question_id、updated_at...）和 Answerables（fname、lname、email...）的数据。这样，我可以从单个索引中搜索 Answers，按类型、question_id、document_id 等进行过滤。更新将由 Answering 触发，但每个回答都会从其可回答内容中提取信息。我正在使用 RABL 模板化我的搜索引擎输入，所以这很容易。

```
Answering.find(123).to_indexed_json  # let's say it's a narrative
=> { id: 123, question_id: 10, :document_id: 24, updated_at: ..., updated_by: root@me.com, narrative_content: "Back in the day, when I was a teenager, before I had...", answerable_type: "narrative" } 
```

所以，我有几个问题。

1.  目标是为所有答案提供单一查询解决方案，无论底层（可回答）类型如何。我以前从来没有设置过这样的东西。这似乎是解决问题的明智方法吗？你能预见我无法预见的皱纹吗？替代方案/建议/等。受欢迎的。
2.  在我看来，棘手的部分是映射。我的计划是为需要索引选项的字段在 Answering 模型中放置显式映射，并让默认映射处理其余部分：

    ```
    mapping do
      indexes :question_id, :index => :not_analyzed
      indexes :document_id, :index => :not_analyzed
      indexes :narrative_content, :analyzer => :snowball
      indexes :junk_collection_total, :index => :not_analyzed
      indexes :some_other_crazy_field, :index
      [...] 
    ```

    如果我没有为某些字段指定映射（例如“fname”），Tire/ES 会退回到动态映射吗？（我应该明确映射将要使用的每个字段吗？）

提前致谢。请让我知道我是否可以更具体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T20:48:52.300

索引是解决此问题的正确方法。除了索引字段名称，您还可以索引方法的结果。

```
mapping do
  indexes  :payload_details, :as => 'payload_details', :analyzer => 'snowball',:boost => 0
end

def payload_details
  "#{payload.fname} #{payload.lname}" #etc.
end 
```

索引值变为鸭子类型，因此如果您索引视图中引用的所有值，则数据将可用。如果您访问未在索引项的模型上建立索引的属性，它将从 ActiveRecord 中获取实例，如果您访问相关模型的属性，我很确定您会收到参考错误，但动态查找器可能接管。

# windows - 如何为作为服务运行的 Windows 应用程序创建自动更新程序？

> ID：14323813
> 
> 赞同：0
> 
> 时间：2013-01-14T17:51:16.277
> 
> 标签：windows, service, auto-update

我需要定期将一组更新的文件（DLL、javascript）作为补丁发布到多个不同版本的 Windows PC（vista/XP/7 等）。目前，我的网站上有一个链接，供每个用户下载 setup.exe 文件并手动安装补丁（替换现有的 DLL）。为了消除手动过程，我正在研究如何在 Windows 上自动运行一个程序（我假设这意味着一个服务），它将定期检查我的服务器是否有更新，下载它并自动触发 setup.exe（或一些替换补丁文件的类似过程）。

我本身不是 Windows 开发人员，但已经下载并尝试检查各种选项（为了不重新发明轮子），例如 Sparkle、DDay、CSAutoUpdater、Npackd，并且刚刚开始研究 Google Omaha - 但大多数人认为检查当 Windows 应用程序使用它们的库/组件启动时发生。我需要独立于我要更新的应用程序运行自动更新程序 - 所以我需要首先让所有用户运行 setup.exe，它应该安装并启动我的 Windows 服务，以便它可以每天与 Windows 一起运行以运行检查、下载和安装更新的程序。

我在stackoverflow和codeproject上找到了一些用于编写windows服务的示例代码，但找不到如何自动安装它（理想情况下，对于较新的windows版本没有UAC麻烦）。所有这些都需要使用 instalutil 或其他一些手动过程来安装和启动服务。

任何关于这方面的指导都会很棒！谢谢 - 并对冗长的问题表示歉意。当我尝试其他产品时，将更新其他结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:39:51.297

正如您提到的 Npackd，我想描述如何使用它来完成。

我同意 selbie 的观点，最简单的解决方案是使用 Windows 调度程序创建一个任务。

对于 Npackd，您需要自己的存储库 - 一个可通过 HTTP 访问的 XML 文件，例如[http://www.yourserver.com/rep.xml](http://www.yourserver.com/rep.xml)。这是一个存储库的简单示例：[https](https://gist.github.com/raw/4132983/dabecde48c796d4fdfa2f645bb744ac58640572c/TestRepository.xml) ://gist.github.com/raw/4132983/dabecde48c796d4fdfa2f645bb744ac58640572c/TestRepository.xml 。用户将下载 Npackd (http://code.google.com/p/windows-package-manager/downloads/list) 并将 URL 添加到存储库列表中。

我会定义 2 个包：一个用于程序本身，一个用于自动更新程序。这样，如果有人想手动更新程序，他也可以这样做。

您可以使用每个 Windows 系统上可用的命令行工具 schtasks.exe 创建或删除 Windows 任务。

更新命令本身也很简单：

```
npackdcl update --package=<package> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T07:26:10.303

> 为了消除手动过程，我正在研究如何在 Windows 上自动运行一个程序（我假设这意味着一个服务），它将定期检查我的服务器是否有更新，下载它并自动触发 setup.exe（或一些替换补丁文件的类似过程）。

您可能希望将 Windows 任务计划程序服务用于语句的“定期”部分。您可以使用它来启动实际执行“检查更新”、下载、复制等所需的任何代码……我认为您不需要 Windows 服务。

您可能会编写一个任务计划程序事件。或者使用[API](http://msdn.microsoft.com/en-us/library/aa383608%28v=VS.85%29.aspx)以编程方式进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T14:57:37.723

您可以执行以下操作：

1.  维护数据库中 dll、exe 等的版本。
2.  在应用程序启动之前，检查已安装版本的版本与 DB 中的版本。
3.  如果版本不同，请要求用户从服务器更新到最新版本。

4.  如果他点击是。从服务器更新文件。

普拉萨德。

# c# - 使用 QuickBooks Online (QBO) Intuit Partner Platform (IPP) DevKit 查询所有未结余额发票

> ID：14323815
> 
> 赞同：2
> 
> 时间：2013-01-14T17:51:24.527
> 
> 标签：c#, intuit-partner-platform, quickbooks-online, devkit

我正在尝试使用 IPP 查询所有未结余额的发票，但我一直收到 0 个结果。我在代码中做错了吗？

这是我尝试使用应用过滤的 C# 代码片段

```
 InvoiceQuery qboInvoiceQuery = new InvoiceQuery();
        int iMaxPageNumber = QUERY_MAX_PAGE_NUMBER;   // A Constant with the Maximum Page Number allowed in a query 
        int iResultsPerPage = QUERY_MAX_NUM_PER_PAGE_INVOICE; // A Constant with the Maximum Results per page 

        // Paging Information
        qboInvoiceQuery.PageNumber = QUERY_START_PAGE_NUMBER;
        qboInvoiceQuery.ResultsPerPage = iResultsPerPage;

        #region Query Filtering
        //////////////////////////////////////////////
        //   initial filtering via Query Criteria   //
        //////////////////////////////////////////////
        // Get only Open (Unpaid) Invoices
        qboInvoiceQuery.OpenBalance = (decimal)0.00;
        qboInvoiceQuery.SpecifyOperatorOption(FilterProperty.OpenBalance, FilterOperatorType.AFTER);
        //////////////////////////////////////////////
        // END initial filtering via Query Criteria //
        //////////////////////////////////////////////
        #endregion

        // Complete the Query calls to build the list
        IEnumerable<Invoice> results = qboInvoiceQuery.ExecuteQuery<Invoice>(_ServiceContext);
        IEnumerable<Invoice> qboInvoices = results;
        int iCount = results.Count();
        while (iCount > 0 && iCount == iResultsPerPage && qboInvoiceQuery.PageNumber <= iMaxPageNumber)
        {
            qboInvoiceQuery.PageNumber++;
            results = qboInvoiceQuery.ExecuteQuery<Invoice>(_ServiceContext);
            iCount = results.Count();
            qboInvoices = qboInvoices.Concat(results);
        } 
```

*****更新*****

我已经实现了 peterl 的答案，现在有以下代码。但是我现在遇到了一个新问题，即我的代码总是返回 10 张发票的默认值，并且没有考虑到我的身体。即使我将其设置为不同的页码或 ResultsPerPage 值，我也能取回第一页和 10 个结果。有任何想法吗？

```
 private Dictionary<string, Invoice> GetUnpaidInvoicesDictionary(IdType CustomerId, bool bById = true)
    {
        Dictionary<string, Invoice> dictionary = new Dictionary<string, Invoice>();
        int iMaxPageNumber = 100;
        int iResultsPerPage = 100;

        try
        {
            OAuthConsumerContext consumerContext = new OAuthConsumerContext
            {
                ConsumerKey = _sConsumerKey,
                SignatureMethod = SignatureMethod.HmacSha1,
                ConsumerSecret = _sConsumerSecret
            };

            string sBaseURL = "https://oauth.intuit.com/oauth/v1";
            string sUrlRequestToken = "/get_request_token";
            string sUrlAccessToken = "/get_access_token";
            OAuthSession oSession = new OAuthSession(consumerContext, 
                                                        sBaseURL + sUrlRequestToken,
                                                        sBaseURL,
                                                        sBaseURL + sUrlAccessToken);

            oSession.AccessToken = new TokenBase
            {
                Token = _sAccessToken,
                ConsumerKey = _sConsumerKey,
                TokenSecret = _sAccessTokenSecret
            };

            int iPageNumber = QUERY_START_PAGE_NUMBER;
            string sCustomerId = CustomerId.Value;
            string sBodyBase = "PageNum={0}&ResultsPerPage={1}&Filter=OpenBalance :GreaterThan: 0.00 :AND: CustomerId :EQUALS: {2}";
            string sBody = String.Format(sBodyBase, iPageNumber, iResultsPerPage, sCustomerId);

            IConsumerRequest conReq = oSession.Request();
            conReq = conReq.Post().WithRawContentType("application/x-www-form-urlencoded").WithRawContent(System.Text.Encoding.ASCII.GetBytes(sBody)); ;
            conReq = conReq.ForUrl(_DataService.ServiceContext.BaseUrl + "invoices/v2/" + _DataService.ServiceContext.RealmId);
            conReq = conReq.SignWithToken();

            // Complete the Query calls to build the list
            SearchResults searchResults = (SearchResults)_DataService.ServiceContext.Serializer.Deserialize<SearchResults>(conReq.ReadBody());
            IEnumerable<Invoice> results = ((Invoices)searchResults.CdmCollections).Invoice;
            IEnumerable<Invoice> qboInvoices = results;
            int iCount = searchResults.Count;
            while (iCount > 0 && iCount == iResultsPerPage && iPageNumber <= iMaxPageNumber)
            {
                iPageNumber++;

                sBody = String.Format(sBodyBase, iPageNumber, iResultsPerPage, sCustomerId);
                conReq = oSession.Request();
                conReq = conReq.Post().WithRawContentType("application/x-www-form-urlencoded").WithRawContent(System.Text.Encoding.ASCII.GetBytes(sBody)); ;
                conReq = conReq.ForUrl(_DataService.ServiceContext.BaseUrl + "invoices/v2/" + _DataService.ServiceContext.RealmId);
                conReq = conReq.SignWithToken();

                searchResults = (SearchResults)_DataService.ServiceContext.Serializer.Deserialize<SearchResults>(conReq.ReadBody());
                results = ((Invoices)searchResults.CdmCollections).Invoice;
                qboInvoices = qboInvoices.Concat(results);
                iCount = searchResults.Count;
            }

            if (bById)
                foreach (Invoice Inv in qboInvoices)
                    dictionary.Add(Inv.Id.Value, Inv);
            else
                foreach (Invoice Inv in qboInvoices)
                    dictionary.Add(Inv.Header.DocNumber, Inv);

            return dictionary;

        }
        catch (Exception)
        {

            return null;
        }
    } 
```

*** 更新 ***

有一个类似的问题涉及新的 api 测试器。这可能与这个问题有关，他们目前正在调查。

[堆栈溢出：QuickBooks Online 使用过滤器查询每次都返回 401](https://stackoverflow.com/questions/14695065/quickbooks-online-querying-with-filter-returns-401-everytime)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:04:46.897

这是 DevKit 中的一个错误。OpenBalance 过滤器默认为 :EQUALS: 并且不支持 :GreaterThan:。

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Invoice#Attributes_Supporting_Filtering_and_Sorting](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/Invoice#Attributes_Supporting_Filtering_and_Sorting)

这是使用 DevDefined 构造 OAuth 标头的解决方法：

```
public List<Intuit.Ipp.Data.Qbo.Invoice> GetQboUnpaidInvoices(DataServices dataServices, int startPage, int resultsPerPage,  IdType CustomerId)
{
    StringBuilder requestXML = new StringBuilder();
    StringBuilder responseXML = new StringBuilder();

    var requestBody = String.Format("PageNum={0}&ResultsPerPage={1}&Filter=OpenBalance :GreaterThan: 0.00 :AND: CustomerId :EQUALS: {2}", startPage, resultsPerPage, CustomerId.Value);

    HttpWebRequest httpWebRequest = WebRequest.Create(dataServices.ServiceContext.BaseUrl + "invoices/v2/" + dataServices.ServiceContext.RealmId) as HttpWebRequest;
    httpWebRequest.Method = "POST";
    httpWebRequest.ContentType = "application/x-www-form-urlencoded";
    httpWebRequest.Headers.Add("Authorization", GetDevDefinedOAuthHeader(httpWebRequest, requestBody));
    requestXML.Append(requestBody);
    UTF8Encoding encoding = new UTF8Encoding();
    byte[] content = encoding.GetBytes(requestXML.ToString());
    using (var stream = httpWebRequest.GetRequestStream())
    {
        stream.Write(content, 0, content.Length);
    }
    HttpWebResponse httpWebResponse = httpWebRequest.GetResponse() as HttpWebResponse;
    using (Stream data = httpWebResponse.GetResponseStream())
    {
        Intuit.Ipp.Data.Qbo.SearchResults searchResults = (Intuit.Ipp.Data.Qbo.SearchResults)dataServices.ServiceContext.Serializer.Deserialize<Intuit.Ipp.Data.Qbo.SearchResults>(new StreamReader(data).ReadToEnd());
        return ((Intuit.Ipp.Data.Qbo.Invoices)searchResults.CdmCollections).Invoice.ToList();
    }

}

protected string GetDevDefinedOAuthHeader(HttpWebRequest webRequest, string requestBody)
{

    OAuthConsumerContext consumerContext = new OAuthConsumerContext
    {
        ConsumerKey = consumerKey,
        ConsumerSecret = consumerSecret,
        SignatureMethod = SignatureMethod.HmacSha1,
        UseHeaderForOAuthParameters = true

    };

    consumerContext.UseHeaderForOAuthParameters = true;

    //URIs not used - we already have Oauth tokens
    OAuthSession oSession = new OAuthSession(consumerContext, "https://www.example.com",
                            "https://www.example.com",
                            "https://www.example.com");

    oSession.AccessToken = new TokenBase
    {
        Token = accessToken,
        ConsumerKey = consumerKey,
        TokenSecret = accessTokenSecret
    };

    IConsumerRequest consumerRequest = oSession.Request();
    consumerRequest = ConsumerRequestExtensions.ForMethod(consumerRequest, webRequest.Method);
    consumerRequest = ConsumerRequestExtensions.ForUri(consumerRequest, webRequest.RequestUri);
    if (webRequest.Headers.Count > 0)
    {
        ConsumerRequestExtensions.AlterContext(consumerRequest, context => context.Headers = webRequest.Headers);
        if (webRequest.Headers[HttpRequestHeader.ContentType] == "application/x-www-form-urlencoded")
        {
            Dictionary<string, string> formParameters = new Dictionary<string, string>();
            foreach (string formParameter in requestBody.Split('&'))
            {
                formParameters.Add(formParameter.Split('=')[0], formParameter.Split('=')[1]);
            }
            consumerRequest = consumerRequest.WithFormParameters(formParameters);
        }
    }

    consumerRequest = consumerRequest.SignWithToken();
    return consumerRequest.Context.GenerateOAuthParametersForHeader();
} 
```

[http://nuget.org/packages/DevDefined.OAuth](http://nuget.org/packages/DevDefined.OAuth)

# python - 全局字典不需要关键字 global 来修改它们吗？

> ID：14323817
> 
> 赞同：41
> 
> 时间：2013-01-14T17:51:26.967
> 
> 标签：python, dictionary, scope, global-variables, global

我想知道为什么我可以在没有`global`关键字的情况下更改全局字典？为什么它对其他类型是强制性的？这背后有什么逻辑吗？

例如代码：

```
#!/usr/bin/env python3

stringvar = "mod"
dictvar = {'key1': 1,
           'key2': 2}

def foo():
    dictvar['key1'] += 1

def bar():
    stringvar = "bar"
    print(stringvar)

print(dictvar)
foo()
print(dictvar)

print(stringvar)
bar()
print(stringvar) 
```

给出以下结果：

```
me@pc:~/$ ./globalDict.py 
{'key2': 2, 'key1': 1}
{'key2': 2, 'key1': 2}  # Dictionary value has been changed
mod
bar
mod 
```

我期望的地方：

```
me@pc:~/$ ./globalDict.py 
{'key2': 2, 'key1': 1}
{'key2': 2, 'key1': 1}  # I didn't use global, so dictionary remains the same
mod
bar
mod 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-01-14T17:59:50.597

原因是线路

```
stringvar = "bar" 
```

是模棱两可的，它可能是指一个全局变量，*或者*它可能正在创建一个名为`stringvar`. 在这种情况下，Python 默认假设它是一个局部变量，除非该`global`关键字已经被使用。

然而，线

```
dictvar['key1'] += 1 
```

是完全不含糊的。它只能引用全局变量`dictvar`，因为`dictvar`语句必须已经存在才不会引发错误。

这并非特定于字典 - 列表也是如此：

```
listvar = ["hello", "world"]

def listfoo():
    listvar[0] = "goodbye" 
```

或其他种类的物体：

```
class MyClass:
    foo = 1
myclassvar = MyClass()

def myclassfoo():
    myclassvar.foo = 2 
```

每当使用[mutating 操作而不是重新绑定操作](http://en.wikipedia.org/wiki/Name_binding#Rebinding_and_mutation)时，都是如此。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T17:52:44.513

`global`您可以在不使用关键字的情况下修改任何可变对象。

这在 Python 中是可能的，因为`global`当您想要将新对象重新分配给已在全局范围内使用的变量名或定义新的全局变量时使用。

但是在可变对象的情况下，您没有重新分配任何东西，您只是在原地修改它们，因此 Python 只需从全局范围加载它们并修改它们。

正如[文档](http://docs.python.org/2/reference/simple_stmts.html#grammar-token-global_stmt)所说：

> 如果没有全局变量，就不可能分配给全局变量。

```
In [101]: dic = {}

In [102]: lis = []

In [103]: def func():
    dic['a'] = 'foo'
    lis.append('foo') # but  fails for lis += ['something']
   .....:     

In [104]: func()

In [105]: dic, lis
Out[105]: ({'a': 'foo'}, ['foo']) 
```

`dis.dis`：

```
In [121]: dis.dis(func)
  2           0 LOAD_CONST               1 ('foo')
              3 LOAD_GLOBAL              0 (dic)     # the global object dic is loaded
              6 LOAD_CONST               2 ('a')
              9 STORE_SUBSCR                         # modify the same object

  3          10 LOAD_GLOBAL              1 (lis)    # the global object lis is loaded
             13 LOAD_ATTR                2 (append)
             16 LOAD_CONST               1 ('foo')
             19 CALL_FUNCTION            1
             22 POP_TOP             
             23 LOAD_CONST               0 (None)
             26 RETURN_VALUE 
```

# java - java.io.WriteAbortedException：写入中止；java.io.NotSerializableException: org.apache.log4j.Logger

> ID：14323820
> 
> 赞同：7
> 
> 时间：2013-01-14T17:51:35.070
> 
> 标签：java, exception, tomcat, log4j

当我尝试将用户登录到我的系统时，我在 Tomcat 中收到此错误：

```
 org.springframework.web.context.ContextLoader - Root WebApplicationContext: initialization completed in 1967 ms
Sau 14, 2013 7:39:17 PM org.apache.catalina.session.StandardManager doLoad
SEVERE: IOException while loading persisted sessions: java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.log4j.Logger
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.log4j.Logger
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.LinkedList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.LinkedList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.HashMap.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.LinkedList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.HashMap.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3920)
    at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1345)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.NotSerializableException: org.apache.log4j.Logger
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.LinkedList.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.LinkedList.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.LinkedList.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1671)
    at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1077)
    at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:432)
    at org.apache.catalina.session.StandardManager.unload(StandardManager.java:353)
    at org.apache.catalina.session.StandardManager.stopInternal(StandardManager.java:518)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5474)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3913)
    ... 7 more

Sau 14, 2013 7:39:17 PM org.apache.catalina.session.StandardManager startInternal
SEVERE: Exception loading sessions from persistent storage
java.io.WriteAbortedException: writing aborted; java.io.NotSerializableException: org.apache.log4j.Logger
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.LinkedList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.LinkedList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.HashMap.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.LinkedList.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at java.util.HashMap.readObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeReadObject(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.defaultReadFields(Unknown Source)
    at java.io.ObjectInputStream.readSerialData(Unknown Source)
    at java.io.ObjectInputStream.readOrdinaryObject(Unknown Source)
    at java.io.ObjectInputStream.readObject0(Unknown Source)
    at java.io.ObjectInputStream.readObject(Unknown Source)
    at org.apache.catalina.session.StandardSession.readObject(StandardSession.java:1595)
    at org.apache.catalina.session.StandardSession.readObjectData(StandardSession.java:1060)
    at org.apache.catalina.session.StandardManager.doLoad(StandardManager.java:284)
    at org.apache.catalina.session.StandardManager.load(StandardManager.java:204)
    at org.apache.catalina.session.StandardManager.startInternal(StandardManager.java:491)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3920)
    at org.apache.catalina.loader.WebappLoader.backgroundProcess(WebappLoader.java:426)
    at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1345)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1530)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1540)
    at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1519)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.io.NotSerializableException: org.apache.log4j.Logger
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.LinkedList.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.LinkedList.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.LinkedList.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at java.util.HashMap.writeObject(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at java.io.ObjectStreamClass.invokeWriteObject(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.defaultWriteFields(Unknown Source)
    at java.io.ObjectOutputStream.writeSerialData(Unknown Source)
    at java.io.ObjectOutputStream.writeOrdinaryObject(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at org.apache.catalina.session.StandardSession.writeObject(StandardSession.java:1671)
    at org.apache.catalina.session.StandardSession.writeObjectData(StandardSession.java:1077)
    at org.apache.catalina.session.StandardManager.doUnload(StandardManager.java:432)
    at org.apache.catalina.session.StandardManager.unload(StandardManager.java:353)
    at org.apache.catalina.session.StandardManager.stopInternal(StandardManager.java:518)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5474)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3913)
    ... 7 more

Sau 14, 2013 7:39:17 PM org.apache.catalina.core.StandardContext reload
INFO: Reloading Context with name [/PIRS_WEB] is completed 
```

问题是这个问题的大多数答案都说让“那个”类实现 java.io.serializable，但在这里我没有看到我自己的任何类涉及。这些只是我使用的库，我无法修改它们。或者是tomcat尝试使用log4j

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T17:56:24.320

> 引起：java.io.NotSerializableException：org.apache.log4j.Logger

您尝试反序列化的一个类（可能是会话属性）包含一个 type 字段`org.apache.log4j.Logger`。基本上是一个记录器。记录器字段[应该是`static`](https://stackoverflow.com/questions/6653520)，或者至少是`transient`。

从堆栈跟踪看来，当已经序列化的对象被反序列化时会发生异常。这意味着您可能必须清理一些 Tomcat 缓存或内部会话存储，以便不再存在旧数据。

# qt - CGAL：编译代码时出错

> ID：14323821
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:51:36.157
> 
> 标签：qt, cgal, delaunay

我正在尝试在点云上实现 Delaunay 三角剖分，该点云在 3d 空间中使用笛卡尔坐标定义。

我在 Windows 7（64 位）和 CGAL 库上使用 QT 来做同样的事情。

该库已正确安装。

每次我尝试编译我的程序时，都会收到以下类型的错误。

```
error C2065:    'FLT_RADIX' : undeclared identifier
error C2057: expected constant expression
error C2065: 'FLT_MANT_DIG' : undeclared identifier
error C2057: expected constant expression 
```

这些错误重复出现，因此总共有一百多个错误消息，因此编译停止。

我的 .pro 文件看起来像这样。

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-01-11T14:53:46
#
#-------------------------------------------------

QT       += core

QT       -= gui

TARGET = dt_trial
CONFIG   += console
CONFIG   -= app_bundle

TEMPLATE = app

INCLUDEPATH += C:\\libraries\\CGAL_4_1\\include\\CGAL
INCLUDEPATH += C:\\libraries\\CGAL_4_1\\include
INCLUDEPATH += C:\\libraries\\CGAL_4_1
INCLUDEPATH += C:\\libraries\\boost_1_51
INCLUDEPATH += C:\\libraries\\CGAL_4_1\\build\\include\\CGAL
INCLUDEPATH += C:\\libraries\\CGAL_4_1\\auxiliary\\gmp\\include

LIBS += -LC:\\libraries\\CGAL_4_1\\build\\lib -CGAL_Core-vc100-mt-gd-4.1.lib
LIBS += -LC:\\libraries\\CGAL_4_1\\build\\lib -CGAL_ImageIO-vc100-mt-gd-4.1.lib
LIBS += -LC:\\libraries\\CGAL_4_1\\build\\lib -CGAL_Qt4-vc100-mt-gd-4.1.lib
LIBS += -LC:\\libraries\\CGAL_4_1\\build\\lib -CGAL-vc100-mt-gd-4.1.lib

SOURCES += main.cpp 
```

在 CGAL 论坛上，我读到这与配置标志有关，如果我理解正确，那么在 QT 中它意味着 .pro 文件的内容。

[我也在这里](http://cgal-discuss.949826.n4.nabble.com/Compiling-Issues-of-CGAL-td4656055.html#a4656479)的cgal论坛上问过同样的问题

谁能提示我问题出在哪里？

此致

夜叉骑士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:30:25.100

该解决方案已由Laurent Rineau在[CGAL 讨论论坛上提供。](http://cgal-discuss.949826.n4.nabble.com/Compiling-Issues-of-CGAL-td4656055.html)如果有人无法访问链接，这里是写的

> 现在我明白发生了什么。您的包含路径错误，当要求编译器包含时，由于它在目录 C:\libraries\CGAL_4_1\include\CGAL 中找到错误的包含路径。您必须从路径中删除后缀 \CGAL，因为前缀“CGAL/”是 CGAL 标头名称的一部分。以下是正确的值：
> 
> ```
> INCLUDEPATH += C:\\libraries\\CGAL_4_1\\include
> INCLUDEPATH += C:\\libraries\\CGAL_4_1\\build\\include
> INCLUDEPATH += C:\\libraries\\boost_1_51
> INCLUDEPATH += C:\\libraries\\CGAL_4_1\\auxiliary\\gmp\\include 
> ```

# grails - Grails GORM：列出所有嵌套属性

> ID：14323822
> 
> 赞同：2
> 
> 时间：2013-01-14T17:51:36.823
> 
> 标签：grails, groovy, grails-orm

我的（简化的）域模型如下所示：

```
class Student { 
    static hasMany = [professions:StudentProfession];
}

class StudentProfession { 
    static belongsTo = [student:Student];
    Profession profession;
}

class Profession { 
    String name;
} 
```

什么是最有效的方法：

> 列出所有学习“程序员”和“经理”专业的学生

查询数据库后我是否被迫将它们过滤掉？

```
students = students.findAll { student -> 
    student.professions.find { professionNames.contains(it.profession.name) } != null
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:43:21.327

您可以使用 GORM 查询来执行此操作：

```
def studends = Student.where {
  professions {
      profession.name == "Programmer" || profession.name == "Manager"
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T19:08:38.633

给这只猫剥皮的方法有很多——这里有一个：

```
StudentProfession.findAllByProfessionInList(Profession.findAllByNameInList(["Programmer","Manager"])*.student.unique() 
```

# restlet - NoSuchMethodError org.restlet.routing.Virtualhost.attach

> ID：14323830
> 
> 赞同：0
> 
> 时间：2013-01-14T17:52:08.443
> 
> 标签：restlet

我在新的 restlet 存储库中遇到了这个错误。它曾经工作： java.lang.NoSuchMethodError: org.restlet.routing.VirtualHost.attach(Ljava/lang/String;Lorg/restlet/Restlet;)Lorg/restlet/routing/Route; 在 org.apache.camel.component.restlet.RestletComponent.attachUriPatternToRestlet(RestletComponent.java:286)

我对 restlet-2.1.1 有一个常春藤依赖项

我在骆驼路线中使用restlet

# python - 如何打磨/完善 wxPython TextCtrls 的定位和外观？

> ID：14323831
> 
> 赞同：4
> 
> 时间：2013-01-14T17:52:09.353
> 
> 标签：python, wxpython, wxwidgets

我在使用 wxPython 时遇到了一些纯粹的外观问题。例如，标签和它们所代表的控件之间的关系——一切似乎总是偏离目标至少 2-3 像素，有时甚至更糟。在我当前正在创建的对话中，我已将文本控件的字体更改为 Consolas，并将它们放入带有`wx.EXPAND`. 首先，一旦我更改了字体，文本控件中的文本就会向上倾斜几个像素，大概是因为字体小了一到两个像素，而当我设置`wx.EXPAND`文本控件的高度增加了几个像素，使得倾斜更糟。下面分别是展开标志前后的一些截图：

![在此处输入图像描述](../Images/4c91371c044d3b9504d1e8ce1eef02de.png)

![在此处输入图像描述](../Images/aaaad84e266bc480db3241b97f28bbeb.png)

作为强迫症的完美主义者，这对我来说是一个很大的问题。我无法通过 Google、Wiki 或 API 找到任何方法来影响文本控件中文本的位置。

假设我想将文本控件的高度降低几个像素并将其文本内容向下微调几个像素 - 执行这种挑剔调整的最有效方法是什么？

* * *

[这是对话框的代码。](http://pastebin.com/AAusSQ3F)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T01:03:06.160

您应该单独保留文本控件的高度（即既不对其进行硬编码也不使用`wxEXPAND`）并简单地使用`wxALIGN_VERTICAL`（正如您已经这样做，但它被 覆盖`wxEXPAND`）来正确对齐控件。

如果您希望文本控件仅在水平方向扩展，您应该以标准方式将其放入`wxBoxSizer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:04:50.857

`wx.EXPAND`在 grid sizer 中向两个方向扩展。您将需要嵌套的 box sizer 来覆盖此行为。

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)

        self.label = wx.StaticText(self.panel, label="Label")
        self.text = wx.TextCtrl(self.panel)
        self.button = wx.Button(self.panel, label="+", size=(50, 50))

        self.sizer = wx.GridBagSizer(5, 5)
        self.nested = wx.BoxSizer()
        self.sizer.Add(self.label, (0, 0), flag=wx.ALIGN_CENTER_VERTICAL)
        self.sizer.Add(self.nested, (0, 1), flag=wx.EXPAND)
        self.nested.Add(self.text, proportion=1, flag=wx.ALIGN_CENTER)
        self.sizer.Add(self.button, (0, 2))
        self.sizer.AddGrowableCol(1)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

更多信息在**[wxPython 邮件列表中](http://www.mentby.com/Group/wxpython-users/gridbagsizer-element-expand-in-only-one-direction.html)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:30:58.700

创建文本控件时，不需要接受默认高度。你可以坚持高度是你想要的。如果您将其他尺寸保留为默认值（ -1 ），那么尺寸测量器将为您处理这些东西，但尊重您对高度的决定。

```
tc = wx.TextCtrl(parent, -1, "", 
     wxPoint(-1,-1), wxSize(-1,my_preferred_height_in_pixels)) 
```

[我不太了解python-您应该能够将其转换为好的python]

# mysql - 授予通配符数据库但特定表的权限

> ID：14323835
> 
> 赞同：3
> 
> 时间：2013-01-14T17:52:20.837
> 
> 标签：mysql, database, grant

所以，我知道我可以为所有表使用通配符数据库。例如，如果我想为匹配数据库中的所有表授予用户选择权限，我可以：

```
GRANT SELECT
ON 'databasesprefix%'.*
TO testuser@localhost IDENTIFIED BY 'testpasswd'; 
```

但是，如果我想在所有匹配的数据库上向用户授予 UPDATE、DELETE、INSERT 权限，但仅限于特定表，则以下内容不起作用：

```
GRANT UPDATE, DELETE, INSERT
ON 'databasesprefix%'.specifictable
TO testuser@localhost IDENTIFIED BY 'testpasswd'; 
```

有没有办法在 SQL 中做到这一点？还是我必须在外部编写脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:31:03.710

不，在 MySQL 中没有办法做到这一点。

[http://dev.mysql.com/doc/refman/5.1/en/grant.html](http://dev.mysql.com/doc/refman/5.1/en/grant.html)

```
priv_level:
    *
  | *.*
  | db_name.*
  | db_name.tbl_name
  | tbl_name
  | db_name.routine_name 
```

rtm :)

# python - 如何在 Python 中使用三元运算符

> ID：14323836
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:52:22.467
> 
> 标签：python

我有这个方法：

```
def get_compression_settings(self, media_type=None):
        return self.transmit('GET', 'compression?mediatypeid={0}'.format(media_type)) 
```

有没有一种方法可以检查 media_type == None 是否只有在使用三元运算符的单行中添加 mediatypeid={0} 时才添加 ~=None ？

我知道我可以执行以下操作，但如果我的方法可以只是一个返回值会更好：

```
def get_compression_settings(self, media_type=None):
        endpoint = 'compression?mediatypeid={0}'.format(media_type) if media_type is not None else 'compression'
        return self.transmit('GET', endpoint) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T17:54:55.733

它可以是单行返回，如：

```
return self.transmit('GET', 'compression?mediatypeid={0}'.format(media_type)
                             if media_type is not None else 'compression') 
```

我将它分成多行以提高可读性，但这不是它工作所必需的。（请注意，这需要`if media_type not none`在您的示例中更改为`if media_type is not None`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:55:37.027

你试过这个吗？

```
return self.transmit('GET', 'compression?mediatypeid={0}'.format(media_type) if media_type is not None else 'compression') 
```

# mapping - findByPid 不适用于 pages_language_overlay 映射

> ID：14323842
> 
> 赞同：0
> 
> 时间：2013-01-14T17:52:49.240
> 
> 标签：mapping, repository, typo3, extbase

（我使用带有 extbase-extension 的typo3 4.5。）

我将 pages_language_overlay 映射到我的 extbase-model

```
Tx_Extension_Domain_Model_ModelName {
    mapping {
        tableName = pages_language_overlay
    }
} 
```

我用一些 setter 和 getter 创建了一个模型 Tx_Extension_Domain_Model_ModelName。添加存储库 Tx_Extension_Domain_Repository_ModelNameRepository 后

```
public function initializeObject() {
    $this->defaultQuerySettings = $this->objectManager->create('Tx_Extbase_Persistence_Typo3QuerySettings');
    $this->defaultQuerySettings->setRespectStoragePage(FALSE);
} 
```

并像这样注入存储库

```
public function injectModelNameRepository(Tx_Extension_Domain_Repository_ModelNameRepository $modelNameRepository) {
    $this->modelNameRepository = $modelNameRepository;
} 
```

我无法使用 findByPid 选择条目。我正在使用 findByUid 对其进行测试并回显 pid 并且它可以工作，但是我使用 findByPid 没有得到任何结果。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T09:28:56.050

我只需要添加

```
public function initializeObject() {
    $this->defaultQuerySettings = $this->objectManager->create('Tx_Extbase_Persistence_Typo3QuerySettings');
    $this->defaultQuerySettings->setRespectStoragePage(FALSE);
    $this->defaultQuerySettings->setRespectSysLanguage(FALSE);
} 
```

在此之后它运作良好。否则查询有一个检查，如

```
AND pages_language_overlay.sys_language_uid IN (0,-1) 
```

在 where 子句中。

# asp.net - 在 ASP.NET 中构造 URL 以避免死链接

> ID：14323847
> 
> 赞同：1
> 
> 时间：2013-01-14T17:52:55.613
> 
> 标签：asp.net, broken-links

我正在开发一个中等规模的 ASP.NET 网络表单站点。内部链接等的 URL 通常使用如下语法设置：

```
<asp:HyperLink runat="server" NavigateUrl="~/Some/Path/MyPage.aspx" Text="Blah" /> 
```

这让我有点紧张，因为这些链接只是字符串，我担心如果我重命名或移动一个页面，我将无法追踪所有引用。

是否有一些 ASP.NET-y 方法来确定运行时的实际路径？我正在设想这样的事情：

```
NavigateUrl="<%= GetUrl(typeof(MyPage)) %>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:28:24.873

您可以`GetUrl`根据文件夹结构的逻辑定义方法。假设您的命名空间确实对应于您的文件夹结构，则基本定义如下

```
public string GetUrl(System.Type CurrentType)
    {
      List<string> PathInNamespace = CurrentType.FullName.Split('.').ToList<string>();
      PathInNamespace.RemoveAt(0);
      return "/" + string.Join("/", PathInNamespace.ToArray());      
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:13:48.727

一种非代码解决方案是创建自定义错误页面以链接到您网站的其他部分或在所述错误页面中插入搜索框。它快速、简单，还有助于 SEO。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:56:36.293

您真正想要的是像 Umbraco、Sitecore、OpenText 等这样的 CMS。

但是，您可以自己使用数据库和具有 ID 和 Url 列的表来解决问题。然后你可以这样做：

```
NavigateUrl="<%= GetUrl("AwesomeLink") %>" 
```

它可以进入数据库，查找 ID 并为您准备好链接。它还允许您在不重新编译的情况下更改链接。

它与您的想法相似，只是您仍然需要在某些时候告诉它您想要什么链接。它无法为你猜测。

# delphi - Indy 10 中缺少 TIdText？

> ID：14323852
> 
> 赞同：-3
> 
> 时间：2013-01-14T17:53:05.813
> 
> 标签：delphi, indy

为了通过 GMail 发送电子邮件，我终于升级到 Indy 10。虽然我可以通过 GMail 发送简单的电子邮件，但我突然发现我发送 HTML 文本的复杂电子邮件程序不再编译 - 我缺少 TIdText 组件。

我已经搜索了我的电脑，没有 TIDMessage.pas 文件，虽然有一个 dcu 文件是今天过时的。我正在使用德尔福 7。

我在哪里可以找到丢失的组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:03:15.723

你用的是什么版本的德尔福？哪个版本（专业版等）？

在我的机器上，有一个`IdText.pas`文件位于**C:\Program Files (x86)\Embarcadero\RAD Studio\7.0\source\Indy\Indy10\Protocols\IdText.pas**（我相信这是 Delphi 2010，我有一个 Professional执照）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T18:16:42.233

您需要将`IdText`单位添加到您的使用条款中。在旧版本的 Indy 中，该单元不存在。在 Indy 10 中，这是一个新单元，现在包含`TIdText`以前居住的单元`IdMessage`。

如果您也在使用`TIdAttachment`，那么您将遇到同样的问题。在这种情况下所需的单位是`IdAttachment`。等等等等。

# css - 在 Wordpress 中并排添加两个标题图像

> ID：14323853
> 
> 赞同：2
> 
> 时间：2013-01-14T17:53:07.070
> 
> 标签：css, wordpress, header

我正在尝试在基于 Arras 的 Wordpress 子主题中的默认值旁边添加第二个标题图像。现在，只有第一个，左边的图像，正在出现。右边除了空白之外什么都没有。我想知道我做错了什么——无论是我的标记错误还是主题本身的约束。

这是它现在的样子：http: [//traycezpr.currentecalamo.org/](http://traycezpr.currentecalamo.org/)

```
#header {
    height:165px;
    width:960px;
    margin: 0 auto;
    position: relative;
    background:transparent;
    border:none;
}

#header h1 {
    display:block;
    float:left;
    width:800px;
    height:165px;
background:url(http://traycezpr.currentecalamo.org/wp-content/uploads/2013/01/TZLTER.jpg) no-repeat 0 0;
    background-size: 800px; 165px;
    text-indent:-10000px;
}

#header h2 {
    display:inline;
    float:right;
    position:relative;
    width:160px;
    height:165px:
    text-indent:-10000px;   background:url(http://traycezpr.currentecalamo.org/wp-content/uploads/2013/01/TZCH7.jpg) no-repeat 0 0;
    background-size:160px; 165px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:14:17.870

user.css 第 22 行代码不正确。上面写着：

```
height:165px: text-indent:-10000px 
```

而它应该是：

```
height:165px;
text-indent:-10000px; 
```

您还将`.logo`（`h`标签嵌套在其中）设置为：

```
max-width:590px 
```

你应该让这个跨越整个宽度，比如：

```
width:100% 
```

我还建议您对图像使用实际`divs`而不是`h`标签。`h`标签通常用于文本标题/seo。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:07:36.893

你需要做两件事：

1.  添加高度：165px；到#header hs
2.  在 default.css (.logo) 的第 48 行将 max-width 更改为 100%

# html - emacs-org 模式和 html 发布：如何更改生成的 HTML 的结构

> ID：14323854
> 
> 赞同：3
> 
> 时间：2013-01-14T17:53:10.533
> 
> 标签：html, emacs, export, org-mode

如果我忽略了一些简单的事情，我是初学者，很抱歉......

我想为我的 HTML 页面使用 emacs org-mode。“默认”设置很好并且可以正常工作，但是我想使用其中一个免费的网络模板，例如[http://www.freecsstemplates.org/preview/goodlife/](http://www.freecsstemplates.org/preview/goodlife/)

这些模板提供 CSS 文件，但是在 org-mode 的 HTML 导出中仅使用 CSS 似乎还不够。似乎要正确使用这些模板，我还需要维护此类模板中所示的 HTML 结构。

如何强制 org-mode 生成我喜欢的 HTML 结构（即框架分割）？

似乎“org-export-generic.el”提供了一些选项。即使我会说服通用导出为我提供一个 HTML 页面，它仍然不能完全解决 HTML 导出......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:45:19.483

org-mode 手册的这一部分提供了一些关于导出到 html 和使用 css 的指导[http://orgmode.org/manual/CSS-support.html#CSS-support](http://orgmode.org/manual/CSS-support.html#CSS-support) 这包括 org-mode 使用的默认类的描述，所以你可以修改你的CSS。

如果您想修改 org 模式导出以匹配您的 CSS 类和 id，请使用 org 标题中的 :HTML_CONTAINER_CLASS: 属性和用于创建 id 的 :CUSTOM_ID: 属性。

我没有对每个文件进行设置，而是使用 org 模式的发布功能将许多 org 文件输出到单个网站中。你可以在这里找到一个教程[http://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html](http://orgmode.org/worg/org-tutorials/org-publish-html-tutorial.html)

我的 org-publish-project-alist 看起来像：

```
'(org-publish-project-alist (quote (("requirements" :components ("req-static" "req-org"))
   ("req-static" :base-directory "~/org/requirements" :publishing-directory "~/public_html/requirements/" :base-extension "gif\\|css" :publishing-function org-publish-attachment) 
   ("req-org" :base-directory "~/org/requirements/" :publishing-directory "~/public_html/requirements/" :style "<link rel=\"stylesheet\" type=\"text/css\" href=\"./style.css\" />" :section-numbers nil :headline-levels 3 :table-of-contents 2 :auto-sitemap t :sitemap-filename "index.org" :sitemap-title "Requirements for My Software" :link-home "./index.html")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:42:27.697

我同意。org 的内置导出生成的 HTML 很好，但不是我想要的。似乎通用导出基于 elisp，而我更喜欢 XSLT。

我编写了以下将 org 文件转换为 XML 的代码，但我还没有编写发布转换。无论如何，这可能对您的参考有所帮助，尤其是因为它显示了组织文档内部表示的结构。

```
(require 'org-element)

(defvar xml-content-encode-map
  '((?& . "&amp;")
    (?< . "&lt;")
    (?> . "&gt;")))

(defvar xml-attribute-encode-map
  (cons '(?\" . "&quot;") xml-content-encode-map))

(defun write-xml (o out parents depth)
  "Writes O as XML to OUT, assuming that lists have a plist as
their second element (for representing attributes).  Skips basic
cycles (elements pointing to ancestor), and compound values for
attributes."
  (if (not (listp o))
      ;; TODO: this expression is repeated below
      (princ o (lambda (charcode)
                 (princ 
                  (or (aget xml-content-encode-map charcode)
                      (char-to-string charcode))
                  out)))

    (unless (member o parents)
      (let ((parents-and-self (cons o parents))
            (attributes (second o)))

        (dotimes (x depth) (princ "\t" out))
        (princ "<" out)
        (princ (car o) out)

        (loop for x on attributes by 'cddr do
              (let ((key (first x))
                    (value (second x)))

                (when (and value (not (listp value)))
                  (princ " " out)
                  (princ (substring (symbol-name key) 1) out)
                  (princ "=\"" out)
                  (princ value  (lambda (charcode)
                                  (princ 
                                   (or (aget xml-attribute-encode-map charcode)
                                       (char-to-string charcode))
                                   out)))
                  (princ "\"" out))))

        (princ ">\n" out)

        (loop for e in (cddr o)  do
              (write-xml e out parents-and-self (+ 1 depth)))

        (dotimes (x depth) (princ "\t" out))
        (princ "</" out)
        (princ (car o) out)
        (princ ">\n" out)))))

(defun org-file-to-xml (orgfile xmlfile)
  "Serialize ORGFILE file as XML to XMLFILE."
  (save-excursion
    (find-file orgfile)
    (let ((org-doc (org-element-parse-buffer)))
      (with-temp-file xmlfile
        (let ((buffer (current-buffer)))
          (princ "<?xml version='1.0'?>\n" buffer)
          (write-xml org-doc buffer () 0)
          (nxml-mode)))))
  (find-file xmlfile)
  (nxml-mode))

(defun org-to-xml ()
  "Export the current org file to XML and open in new buffer.
Does nothing if the current buffer is not in org-mode."
  (interactive)
  (when (eq major-mode 'org-mode)
    (org-file-to-xml
     (buffer-file-name)
     (concat (buffer-file-name) ".xml")))) 
```

# sql - 在 T-SQL 中创建数据透视表？

> ID：14323862
> 
> 赞同：1
> 
> 时间：2013-01-14T17:53:32.123
> 
> 标签：sql, tsql, pivot, pivot-table

我真的可以使用一些帮助来创建数据透视表。我在某些行中有数据，而这些数据需要出现在列中，并列在其他记录中的值旁边。数据目前采用以下格式：

```
Region  |  Location  |  Customer | CustomerKey |Status
North   |  New York  |  John     | 111         |Active
North   |  New York  |  Mary     | 112         |Active
North   |  Delaware  |  Bob      | 113         |Idle
North   |  New Jersey|  Bob      | 113         |Active
West    |  California|  Bob      | 113         |Inactive
West    |  Washington|  Greg     | 114         |Inactive
West    |  Utah      |  Tim      | 115         |Active
North   | All States |  Bob      | 113         |VIP Customer
North   | All States |  Mary     | 112         |Regular Customer
West    | All States |  Bob      | 113         |Regular Customer
West    | All States |  Tim      | 115         |Regular Customer
West    | All States |  Greg     | 114         |VIP Customer
North   | All States |  John     | 111         |Regular Customer 
```

问题在于“状态”列，它可以有一组值（非活动/活动/空闲）和另一组值（VIP 客户和普通客户）。当“位置”列是“所有州”时，它使用 VIP/常规值。我想添加一列，以使数据沿以下行显示：

```
Region  |  Location  |  Customer | CustomerKey |Status   | VIPStatus
North   |  New York  |  John     | 111         |Active   | No
North   |  New York  |  Mary     | 112         |Active   | No
North   |  Delaware  |  Bob      | 113         |Idle     | Yes
North   |  New Jersey|  Bob      | 113         |Active   | Yes
West    |  California|  Bob      | 113         |Inactive | No
West    |  Washington|  Greg     | 114         |Inactive | Yes
West    |  Utah      |  Tim      | 115         |Active   | No 
```

基本上，如果客户有一个“VIP 客户”状态的记录，在一个区域和相应的“所有州”位置值的组合下，那么它将显示“是”或“否”的“VIPStatus” ' 根据该客户在该给定区域下的任何记录（无论位置状态如何）。有一个简单的解决方案吗？在 T-SQL 中重新排列这些数据的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:01:57.537

您应该能够多次加入表格以获得所需的结果：

```
select t1.region,
  t1.location,
  t1.customer,
  t1.customerkey,
  t1.status,
  case when t2.status is not null then 'Yes' else 'No' end VIPStatus
from yourtable t1
left join yourtable t2
  on t1.CustomerKey = t2.CustomerKey 
  and t2.Location = 'All States' 
  and t2.status = 'VIP Customer'
where t1.Location <> 'All States' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/6baf43/3)

结果是：

```
| REGION |   LOCATION | CUSTOMER | CUSTOMERKEY |   STATUS | VIPSTATUS |
-----------------------------------------------------------------------
|  North |   New York |     John |         111 |   Active |        No |
|  North |   New York |     Mary |         112 |   Active |        No |
|  North |   Delaware |      Bob |         113 |     Idle |       Yes |
|  North | New Jersey |      Bob |         113 |   Active |       Yes |
|   West | California |      Bob |         113 | Inactive |       Yes |
|   West | Washington |     Greg |         114 | Inactive |       Yes |
|   West |       Utah |      Tim |         115 |   Active |        No | 
```

# ruby-on-rails - 如果条件延迟，则运行钩子

> ID：14323863
> 
> 赞同：0
> 
> 时间：2013-01-14T17:53:33.283
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, delayed-job

我的控制器上有这项工作：

```
def action1
 #code here
  order = Order.find(params[:id])
  Delayed::Job.enqueue(ExpiredMessage.new(order), 2, 2.days.from_now)
 #code here
end 
```

我在`myapp/app/jobs`一个名为`expired_message.rb`下一个内容的文件中有一个自定义作业：

```
class ExpiredMessage < Struct.new(:order)
 def perform
  #code to run here for example order.save
   order.any_method
 end
end 
```

`perform method`我只想执行里面的代码`if order.status == "PA"`

**如何在保存订单之前运行挂钩以检查`if order.status == "PA"`我的自定义作业？**

**否则，如果 order.status != "PA" 我想在执行此作业之前删除该作业。**

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:05:34.393

如果您想从数据库中检查对象的状态 - 调用`reload`它。否则，只需像检查任何其他对象一样检查它：

```
def perform
  order.any_method if order.reload.status == "PA"
end 
```

# ruby - 如何使用 irb 的“模块化”红宝石宝石？

> ID：14323865
> 
> 赞同：0
> 
> 时间：2013-01-14T17:53:41.533
> 
> 标签：ruby, sass, compass-sass

我是一个完整的 ruby​​ 新手，正在尝试了解更多模块化比例库[https://github.com/scottkellum/modular-scale](https://github.com/scottkellum/modular-scale)

我希望测试 irb 中的一些功能，这是我的结果：

```
>> 需要“模块化规模”
=> 真
>> 模块
模块  
>> 模块化规模(2)
NameError: main:Object 的未定义局部变量或方法“模块化”
    来自 (irb):2
>> 模块化秤(2)
NoMethodError：主对象的未定义方法“modularScale”：对象
    来自 (irb):3
>> $比率
=> 无
>> 金色()
NoMethodError：main:Object 的未定义方法“golden”
    来自 (irb):5

```

我意识到它是一个指南针插件，但最好在 irb 上运行它的一些功能。我对指南针插件的编写和测试比对模块化规模本身更感兴趣。我选择了图书馆，因为我认为它看起来比其他图书馆更直接。

任何帮助，将不胜感激

## 更新

在[https://github.com/scottkellum/modular-scale/blob/master/lib/modular-scale.rb](https://github.com/scottkellum/modular-scale/blob/master/lib/modular-scale.rb) 它提供了我认为可以从 irb 调用的函数

```
>> bar = Sass::Script::Number.new(12) ;; 这有效
=> 12

>> bar = Sass::Script::Functions.major_tenth() ;; 我认为这可能有效，但它没有
NoMethodError：Sass::Script::Functions:Module 的未定义方法“major_tenth”
    来自 (irb):9

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T11:16:08.327

```
class SassPlay
  include Sass::Script::Functions
end

SassPlay.new.double_octave
=> 4 
```

该方法`modular-scale()`是一个[Sass 函数](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#function_directives)，您不能从`irb`. 它是一个样式表函数，由 Sass 解析和执行，而不是`irb`.

Sass 是一种解释型语言。它与 ruby​​ 方法没有一对一的关系，因此您不能直接从 ruby​​ 或 irb 访问 Sass 的所有功能。

您可以在`modular-scale()`此处查看定义：

[https://github.com/scottkellum/modular-scale/blob/master/stylesheets/_modular-scale.scss](https://github.com/scottkellum/modular-scale/blob/master/stylesheets/_modular-scale.scss)

# c# - PolygonShape 的主体不更新

> ID：14323867
> 
> 赞同：0
> 
> 时间：2013-01-14T17:53:43.643
> 
> 标签：c#, .net, xna-4.0, farseer

我正在尝试定义一个由物理世界界定的身体更新的多边形。这是我的尝试：

```
public Body _body;
public Shape _shape;
_primitiveBatch = new PrimitiveBatch(_game.GraphicsDevice);
_shape = new PolygonShape(_vertices, 1);
Vector2 _position = FarseerPolygon.getCenter(((PolygonShape)_shape).Vertices);
_body = new Body(_world);
_body.Position = _position;
_body.CreateFixture(_shape);
_body.BodyType = BodyType.Dynamic;
_body.Restitution = 0.9f;
_body.Friction = 1f; 
```

身体改变了它的位置，但不改变形状。Body.CreatePolygon 也不起作用。任何帮助将不胜感激，因为我被困在这里......谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:36:11.020

多边形不应该改变位置。这是一个性能问题。`Fixture`及其被设计为存在于“`Shape`模型空间”（接近（0,0））中并且不会改变。然后`Body`定义变换以将该形状放置在“世界空间”中。

要在世界空间中获取多边形的各个点，给定 a `Fixture fixture`，请执行以下操作：

```
var shape = fixture.Shape as PolygonShape;
Transform transform;
fixture.Body.GetTransform(out transform);

foreach(Vector2 vertex in shape.Vertices)
{
    Vector2 theTransformedVertex = MathUtils.Multiply(ref transform, vertex);
} 
```

您需要 Farseer 的这些用法，才能使上述代码正常工作：

```
using FarseerPhysics.Collision.Shapes;
using FarseerPhysics.Common; 
```

（此代码针对 Farseer 3.3.1 编写）

# android - android应用认证ID

> ID：14323868
> 
> 赞同：0
> 
> 时间：2013-01-14T17:53:46.587
> 
> 标签：android, eclipse, google-app-engine, oauth-2.0, google-oauth

我正在尝试按照此处的说明进行操作：

[验证来自 Android 应用的后端调用](http://android-developers.blogspot.ca/2013/01/verifying-back-end-calls-from-android.html)

我正在扩展我在这里提出的问题：

[识别哪个 android 应用程序正在与我的 appengine 应用程序联系](https://stackoverflow.com/questions/14203357/identifying-which-android-app-is-making-contact-with-my-appengine-app)

在我的测试环境中一切顺利。我的应用程序在 Eclipse 中使用了一个 debug.keystore，我什至从我对 GoogleAuthUtil.getToken() 的调用中收到了令牌。然后我将我的代码复制到将要使用的实际项目中。我得到了密钥库（我从之前在 google play 上发布的内容中保存了它）并用它在 Google API 控制台上创建了一个新的客户端 ID。

然后我使用 eclipse 导出我的项目，但是在使用正确的密钥库和关联的 ID 之后，我没有得到令牌。

与此同时，我一直在尝试不同的事情。我有一个为我的应用引擎应用程序制作的 ID。我在 android 应用程序中使用了它，并获得了一个令牌。我不知道天气或当我在我的应用程序引擎网站上检查它时是否会清除该特定令牌（我怀疑不是），但我从中获得了一个令牌。

我有点假设我应该与我的 android 调用 GoogleAuthUtil.getToken() 一起使用的 ID 应该来自“已安装应用程序的客户端 ID”部分（Google API 页面）。不是这样吗？只有在那里您可以将应用程序类型设置为“Android”并且包名称以匹配您的应用程序......对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T06:30:30.530

我假设您使用以下格式指定 client_id：

观众：服务器：client_id：$client_id

正如上面的格式试图暗示的那样，此 client_id 用于您的家庭服务器，在本例中为 AppEngine 应用程序的 client_id（Web 应用程序 client_id）。如果您正确配置 AppEngine 应用程序，它应该在 AppEngine 中很好地验证。

同样，您的 Android 应用程序要求提供令牌并命名您的 AppEngine 应用程序。您无需在请求中命名您的 Android 应用程序的 client_id，因为 Android 平台可以根据您使用密钥库工具计算的包名称和证书哈希来识别您的应用程序。

# go - 在 Go 中使用分叉包导入

> ID：14323872
> 
> 赞同：127
> 
> 时间：2013-01-14T17:53:51.240
> 
> 标签：go

假设您有一个存储库，`github.com/someone/repo`并且您将其 fork 到`github.com/you/repo`. 你想使用你的 fork 而不是主 repo，所以你做一个

```
go get github.com/you/repo 
```

现在这个 repo 中的所有导入路径都将被“破坏”，这意味着，如果存储库中有多个包通过绝对 URL 相互引用，它们将引用源，而不是 fork。

有没有更好的方法将其手动克隆到正确的路径中？

```
git clone git@github.com:you/repo.git $GOPATH/src/github.com/someone/repo 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2019-06-27T14:01:29.733

如果您使用的是[go modules](https://github.com/golang/go/wiki/Modules)。你可以使用[`replace`](https://github.com/golang/go/wiki/Modules#when-should-i-use-the-replace-directive)指令

> 该`replace`指令允许您提供另一个导入路径，该路径可能是位于 VCS（GitHub 或其他地方）中的另一个模块，或者位于具有相对或绝对文件路径的本地文件系统上。使用指令中的新导入路径，`replace`无需更新实际源代码中的导入路径。

因此，您可以在 go.mod 文件中执行以下操作

```
module github.com/yogeshlonkar/openapi-to-postman

go 1.12

require (
    github.com/someone/repo v1.20.0
)

replace github.com/someone/repo => github.com/you/repo v3.2.1 
```

`v3.2.1`您的仓库中的标签在哪里。也可以通过 CLI 完成

```
go mod edit -replace="github.com/someone/repo@v0.0.0=github.com/you/repo@v1.1.1" 
```

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2015-03-20T07:59:00.060

### 处理拉取请求

*   fork 一个仓库`github.com/someone/repo`到`github.com/you/repo`
*   下载原代码：`go get github.com/someone/repo`
*   在那里：`cd "$(go env GOPATH)/src"/github.com/someone/repo`
*   启用上传到您的 fork：`git remote add myfork https://github.com/you/repo.git`
*   将您的更改上传到您的仓库：`git push myfork`

[http://blog.campoy.cat/2014/03/github-and-go-forking-pull-requests-and.html](http://blog.campoy.cat/2014/03/github-and-go-forking-pull-requests-and.html)

### 在项目中使用包

[https://github.com/golang/go/wiki/PackageManagementTools](https://github.com/golang/go/wiki/PackageManagementTools)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-11-24T13:59:51.740

解决它的一种方法是 Ivan Rave 和[http://blog.campoy.cat/2014/03/github-and-go-forking-pull-requests-and.html](http://blog.campoy.cat/2014/03/github-and-go-forking-pull-requests-and.html)提出的方法——分叉的方式。

另一种是解决*golang*行为。当 you 时`go get`，*golang 会*以与存储库 URI 相同的名称来布置目录，这就是麻烦开始的地方。

相反，如果您发布自己的`git clone`，则可以将您的存储库克隆到以原始存储库命名的路径上的文件系统上。

假设原始存储库在`github.com/awsome-org/tool`并且您将其 fork 到`github.com/awesome-you/tool`，您可以：

```
cd $GOPATH
mkdir -p {src,bin,pkg}
mkdir -p src/github.com/awesome-org/
cd src/github.com/awesome-org/
git clone git@github.com:awesome-you/tool.git # OR: git clone https://github.com/awesome-you/tool.git
cd tool/
go get ./... 
```

*golang*非常乐意继续使用这个存储库，并且实际上并不关心某些上层目录的名称`awesome-org`，而 git 远程是`awesome-you`. 所有导入`awesome-org`都通过您刚刚创建的目录进行解析，该目录是您的本地工作集。

更详细的内容，请参阅我的博文：[在 GitHub 上分叉 Golang 存储库并管理导入路径](http://code.openark.org/blog/development/forking-golang-repositories-on-github-and-managing-the-import-path)

**编辑**：固定目录路径

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-15T22:34:43.440

如果您的分叉只是临时的（即您打算将其合并），那么只需在原地进行开发，例如在`$GOPATH/src/launchpad.net/goamz`.

然后，您使用版本控制系统的功能（例如`git remote`）将上游存储库而不是原始存储库设为您的存储库。

它使其他人更难使用您的存储库，`go get`但更容易将其集成到上游。

事实上，我有一个 goamz 存储库`lp:~nick-craig-wood/goamz/goamz`，我正是以这种方式开发的。也许有一天作者会合并它！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-08-24T03:33:20.237

这是一种适用于所有人的方法：

使用 github fork 到“my/repo”（只是一个例子）：

```
go get github.com/my/repo
cd ~/go/src/github.com/my/repo
git branch enhancement
rm -rf .
go get github.com/golang/tools/cmd/gomvpkg/…
gomvpkg <<oldrepo>> ~/go/src/github.com/my/repo
git commit 
```

每次使代码更好时重复：

```
git commit
git checkout enhancement
git cherry-pick <<commit_id>>
git checkout master 
```

为什么？这使您可以拥有任何`go get`可以使用的存储库。它还允许您维护和增强对拉取请求有益的分支。它不会用“供应商”使 git 膨胀，它保留了历史，并且构建工具可以理解它。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-14T21:34:13.127

对此的答案是，如果你 fork 一个包含多个包的 repo，你将需要重命名所有相关的导入路径。这在很大程度上是一件好事，因为您已经分叉了所有这些包，并且导入路径应该反映这一点。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-21T20:49:12.507

您可以克隆到任何您想要的位置，而不是克隆到特定位置。然后，您可以运行这样的命令，让 Go 引用本地版本：

```
go mod edit -replace github.com/owner/repo=../repo 
```

[https://golang.org/cmd/go#hdr-Module_maintenance](https://golang.org/cmd/go#hdr-Module_maintenance)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-17T23:46:04.990

现代答案（至少 1.15 或更高版本）。

```
go mod init github.com/theirs/repo 
```

制作一个明确的 init 参数，它是原始包名称。如果您不包含 repo 名称，它将假定为 gopath 中的名称。但是当你使用 go 模块时，它们不再关心它们在磁盘上的位置，或者 git 实际从哪里提取依赖项。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-16T18:07:29.627

# 一起使用 vendoring 和子模块

1.  在 github 上 fork 库（本例中为 go-mssqldb）
2.  添加一个[子模块](https://git-scm.com/book/en/v2/Git-Tools-Submodules)，将您的 fork 克隆到您的[供应商文件夹](https://blog.gopheracademy.com/advent-2015/vendor-folder/)中，但具有上游 repo 的路径
3.  更新`import`源代码中的语句以指向供应商文件夹（不包括`vendor/`前缀）。例如`vendor/bob/lib`=>`import "bob/lib"`

## 例如

```
cd ~/go/src/github.com/myproj

mygithubuser=timabell
upstreamgithubuser=denisenkom
librepo=go-mssqldb

git submodule add "git@github.com:$mygithubuser/$librepo" "vendor/$upstreamgithubuser/$librepo" 
```

## 为什么

这解决了我在尝试自己解决这个问题时所听到和遇到的*所有问题。*

*   lib 中的内部包引用现在可以工作，因为上游的路径没有改变
*   重新签出您的项目是有效的，因为子模块系统在正确的提交时从您的 fork 中获取它，但在上游文件夹路径中
*   您不必知道手动破解路径或弄乱 go 工具。

## 更多信息

*   [https://git-scm.com/book/en/v2/Git-Tools-Submodules](https://git-scm.com/book/en/v2/Git-Tools-Submodules)
*   [获取golang包时如何修复错误消息“不允许使用内部包”？](https://stackoverflow.com/q/34973883/10245)
*   [https://github.com/denisenkom/go-mssqldb/issues/406](https://github.com/denisenkom/go-mssqldb/issues/406)
*   [https://github.com/golang/go/wiki/PackageManagementTools#go15vendorexperiment](https://github.com/golang/go/wiki/PackageManagementTools#go15vendorexperiment)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-01-22T08:37:48.710

您可以使用命令`go get -f`为您获取一个分叉的 repo

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2017-10-26T07:09:07.277

为了自动化这个过程，我写了一个小脚本。您可以在我的[博客](http://hera.cc/2017/10/go-get-and-fork-script-helper-workaround)上找到更多详细信息，以将“gofork”之类的命令添加到您的 bash。

```
function gofork() {
  if [ $# -ne 2 ] || [ -z "$1" ] || [ -z "$2" ]; then
    echo 'Usage: gofork yourFork originalModule'
    echo 'Example: gofork github.com/YourName/go-contrib github.com/heirko/go-contrib'
    return
  fi
   echo "Go get fork $1 and replace $2 in GOPATH: $GOPATH"
   go get $1
   go get $2
   currentDir=$PWD
   cd $GOPATH/src/$1
   remote1=$(git config --get remote.origin.url)
   cd $GOPATH/src/$2
   remote2=$(git config --get remote.origin.url)
   cd $currentDir
   rm -rf $GOPATH/src/$2
   mv $GOPATH/src/$1 $GOPATH/src/$2
   cd $GOPATH/src/$2
   git remote add their $remote2
   echo Now in $GOPATH/src/$2 origin remote is $remote1
   echo And in $GOPATH/src/$2 their remote is $remote2
   cd $currentDir
}

export -f gofork 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2019-08-21T09:54:06.243

在您的`Gopkg.toml`文件中添加以下这些块

```
[[constraint]]
  name = "github.com/globalsign/mgo"
  branch = "master"
  source = "github.com/myfork/project2" 
```

所以它将使用分叉`project2`代替`github.com/globalsign/mgo`

# asp.net - 在 IIS 上部署 asp.net 站点

> ID：14323875
> 
> 赞同：-1
> 
> 时间：2013-01-14T17:54:03.763
> 
> 标签：asp.net, sql, iis

好的。这是我的问题。

我有在另一台计算机上开发的 VB.net + asp.net 应用程序的源代码。它附带，

1.  数据库 - Microsoft sql .mdf + ita 日志文件
2.  Web 应用程序的源代码

现在我想知道的是，

1.  我是否需要安装 Microsoft SQL Server 才能在 IIS 上部署它？（我的 PC 上确实安装了 Microsoft SQL Server Management Studio Express，但问题是安装 WAMP 后我无法连接到它的数据库引擎。）

2.  我是否必须将应用程序的数据库复制到其他地方才能部署站点？

3.  我必须对代码进行哪些更改才能正确运行它？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:02:25.363

1）为了让服务器知道数据库文件是什么（假设该文件与microsoft sql有关），您需要在服务器上安装microsoft sql。

2) 只要​​你知道它在哪里，数据库在服务器上的任何地方都应该没问题。

3）这是一个很难回答的问题......更具体？

# java - 在对象创建时定义类型，如 HashMap

> ID：14323885
> 
> 赞同：1
> 
> 时间：2013-01-14T17:54:52.970
> 
> 标签：java, object, types

非常简单的问题，我实现了一个数组枚举类，但不记得如何在 nextElement() 方法上获取正确的类型。代码如下...

```
public class ArrayEnumeration<Object> implements Enumeration<Object> {
    private Object[] data;
    private int n = 0;

    public ArrayEnumeration(Object[] data) {
        this.data = data;
    }

    @Override
    public boolean hasMoreElements() {
        return n < data.length;
    }

    @Override
    public Object nextElement() {
        n++;
        return data[n - 1];
    } 
} 
```

所以从 nextElement 方法返回的对象应该是创建类时定义的类型。我只是不记得该怎么做。很烦人！！！

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:57:19.133

使用类型参数：

```
public class ArrayEnumeration<T>
    implements Enumeration<T> 
{
    private T[] data;

    public ArrayEnumeration(T[] data)
    {
        this.data = data;
    }

    // ...
    public T nextElement() {}
} 
```

此外，您应该考虑`Iterator`改用。但无论如何，数组实现`Iterable`了，那你为什么要这样做呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T17:56:39.953

查看`java.util.List`示例的源代码：

```
public interface List<E> extends Collection<E> { 
```

[http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/List.java](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/List.java)

然后，您的方法使用泛型类型：

```
public boolean add(E e);

public E get(int index); 
```

一切从源头`java.util.List`..

所以在你的情况下：

```
public class ArrayEnumeration<E> implements Enumeration<E> {

    ...

    @Override
    public E nextElement() {
        n++;
        return data[n - 1];
    } 
} 
```

# c# - 如何在 C# 中创建 Skype 类的实例？

> ID：14323890
> 
> 赞同：3
> 
> 时间：2013-01-14T17:55:05.927
> 
> 标签：c#, com, skype, skype4com

我正在尝试利用`SKYPE4COMLib.dll`.

我已经过去引用库（呵呵），现在我正在尝试创建一个Skype实例：

```
Skype s=new SkypeClass(); 
```

我收到以下错误：

```
The type 'SKYPE4COMLib.SkypeClass' has no constructors defined 
```

和

```
Interop type 'SKYPE4COMLib.SkypeClass' cannot be embedded. Use the applicable interface instead. 
```

我看到的示例是在 VB 中，他们使用

```
Set oSkype = WScript.CreateObject("Skype4COM.Skype", "Skype_") 
```

我不知道如何翻译。

另外，我发现了[以下问题](https://stackoverflow.com/questions/1929690/how-can-call-instance-by-com)，这似乎相关，但答案似乎不适用于 c#。

如何在 C# 中创建 Skype 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T18:59:05.163

很简单

```
Skype skype = new Skype(); 
```

即使`Skype`在技术上是一个接口，由于它是一个 COM 接口，您仍然可以调用`new`它，这就是 C# com 互操作的工作方式。

判断的方法是转到 Skype 类的“转到定义”选项卡，它应该看起来像这样。

```
[CoClass(typeof(SkypeClass))]
[Guid("B1878BFE-53D3-402E-8C86-190B19AF70D5")]
public interface Skype : ISkype, _ISkypeEvents_Event
{
} 
```

这`CoClass(typeof(SkypeClass))`就是让您`new`在界面上调用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:47:56.820

```
var skype= Activator.CreateInstance( 
Type.GetTypeFromProgID("Skype4COM.Skype")) as ISkype; 
```

# ejb - JBoss 7.1.1.Final - EJB 远程调用 - java.lang.IllegalStateException: 没有 EJB 接收器可用于处理

> ID：14323891
> 
> 赞同：1
> 
> 时间：2013-01-14T17:55:06.787
> 
> 标签：ejb, jboss7.x, remote-access, illegalstateexception

我确实有 2 个 JBoss stanalon 实例正在运行。1 个充当服务器，另外 1 个充当客户端。

**服务器：**

**远程接口**

```
package com.xyz.life.service.ejb;

import java.io.Serializable;
import java.rmi.RemoteException;
import javax.ejb.EJB;
import javax.ejb.Remote;

@Remote
public interface QuoteFacade extends Serializable{
    public boolean isAlive()    throws RemoteException;
} 
```

**EJB 实现**

```
package com.xyz.life.common.component.ejb.services;

import java.rmi.RemoteException;
import javax.ejb.Remote;
import javax.ejb.Stateless;

@Stateless(mappedName = "QuoteFacadeEJB")
@Remote(QuoteFacade.class)
public class QuoteFacadeEJB extends CommonSessionBean implements QuoteFacade {
    private static final long serialVersionUID = -8788783322280644881L;

    @Override
    public boolean isAlive() throws RemoteException {
        return true;
    }
} 
```

**服务器日志**

```
16:40:25,012 INFO  [org.jboss.as.ejb3.deployment.processors.EjbJndiBindingsDeploymentUnitProcessor] (MSC service thread 1-4) JNDI bindings for session bean named QuoteFacadeEJB in deployment unit subdeployment "quote.jar" of deployment "quote.ear" are as follows:
        java:global/quote/quote.jar/QuoteFacadeEJB!com.xyz.life.service.ejb.QuoteFacade
        java:app/quote.jar/QuoteFacadeEJB!com.xyz.life.service.ejb.QuoteFacade
        java:module/QuoteFacadeEJB!com.xyz.life.service.ejb.QuoteFacade
        java:jboss/exported/quote/quote.jar/QuoteFacadeEJB!com.xyz.life.service.ejb.QuoteFacade
        java:global/quote/quote.jar/QuoteFacadeEJB
        java:app/quote.jar/QuoteFacadeEJB
        java:module/QuoteFacadeEJB 
```

**客户**

```
public void testClient() {
        try {
            Hashtable<String, Object> jndiProps = new Hashtable<String, Object>();
            jndiProps.put(Context.URL_PKG_PREFIXES, JNDINames.JBOSS_CLIENT_NAMING_PREFIX);
            jndiProps.put("jboss.naming.client.ejb.context", true);
            Context ctx = new InitialContext(jndiProps);

            String name = "ejb:global/quote/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade";
            /*
            "ejb:global/quote/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade",
            "ejb:app/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade",
            "ejb:jboss/exported/quote/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade"
            */

            Object ref = ctx.lookup(name);
            QuoteFacade quoteFacade = (QuoteFacade) ref;
            LOGGER.debug("isAlive : " + quoteFacade.isAlive());
        } catch (Exception e) {
            LOGGER.error("Remote Client Exception : ", e);
        }
    } 
```

**服务器端没有错误/日志。客户端，它失败并出现以下错误：**

```
java.lang.IllegalStateException: No EJB receiver available for handling [appName:global,modulename:quote,distinctname:quote.jar] combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@200cae

    at org.jboss.ejb.client.EJBClientContext.requireEJBReceiver(EJBClientContext.java:584)

    at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:119)

    at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181)

    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136)

    at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121)

    at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104)

    at $Proxy10.isAlive(Unknown Source) 
```

**我尝试不使用属性文件：**

```
private static QuoteFacade connectToStatelessBean(String name) throws NamingException {  

        Properties jndiProperties = new Properties();  
        jndiProperties.put(Context.URL_PKG_PREFIXES, "org.jboss.ejb.client.naming");  
        jndiProperties.put(javax.naming.Context.INITIAL_CONTEXT_FACTORY, "org.jboss.naming.remote.client.InitialContextFactory");  
        jndiProperties.put(javax.naming.Context.PROVIDER_URL, "remote://localhost:4447");  
        jndiProperties.put(javax.naming.Context.SECURITY_PRINCIPAL, "admin");  
        jndiProperties.put(javax.naming.Context.SECURITY_CREDENTIALS, "Pass1234");  
        final Context context = new InitialContext(jndiProperties);  

        return (QuoteFacade) context.lookup(name);  
    }  
    public static void testLocal() {  
        String[] JNDINAME1 = {  

        "ejb:global/quote/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade",  
        "ejb:app/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade",  
        "ejb:module/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade",  
        "ejb:jboss/exported/quote/quote.jar/QuoteFacadeEJB!com.ge.life.annuity.service.ejb.QuoteFacade",  
        "ejb:global/quote/quote.jar/QuoteFacadeEJB",  
        "ejb:app/quote.jar/QuoteFacadeEJB",  
        "ejb:module/QuoteFacadeEJB"  
    };  
    for(int i=0;i<JNDINAME1.length;i++){  
        try {  
            QuoteFacade test1 = connectToStatelessBean(JNDINAME1[i]);  
            LOGGER.error("DSLKAJDLAS : " + test1.isAlive());  
        } catch (Exception e) {  
            LOGGER.error("DSLKAJDLAS : " , e);  
        }  

    }  
    LOGGER.info("Done - SANSSAN!!!!!!!!");  
} 
```

**这一次，不同的例外：**

```
14.01.2013 17:40:37.627 [ERROR] - EJBClient - DSLKAJDLAS :   
javax.naming.NamingException: JBAS011843: Failed instantiate InitialContextFactory org.jboss.naming.remote.client.InitialContextFactory from classloader ModuleClassLoader for Module "deployment.quote.war:main" from Service Module Loader  
    at org.jboss.as.naming.InitialContextFactoryBuilder.createInitialContextFactory(InitialContextFactoryBuilder.java:64)  
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:681)  
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307)  
    at javax.naming.InitialContext.init(InitialContext.java:242)  
    at javax.naming.InitialContext.><init>(InitialContext.java:216)  
    at com.xyz.life.test.EJBClient.connectToStatelessBean(EJBClient.java:208)  
    at com.xyz.life.test.EJBClient.testLocal(EJBClient.java:225)  
    at com.xyz.life.test.EJBClient.test(EJBClient.java:172)  
    at com.xyz.life.common.web.struts.plugin.FrameworkStartupPlugIn.init(FrameworkStartupPlugIn.java:99)  
    at org.apache.struts.action.ActionServlet.initModulePlugIns(ActionServlet.java:1158)  
    at org.apache.struts.action.ActionServlet.init(ActionServlet.java:473)  
    at javax.servlet.GenericServlet.init(GenericServlet.java:242)  
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1202)  
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1102)  
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:3655)  
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3873)  
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90)  
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)  
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)  
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)  
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)  
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T13:53:30.427

尝试从中删除“全局” `name`：

```
String name =
  "ejb:quote/quote.jar/QuoteFacadeEJB!com.xyz.life.service.ejb.QuoteFacade" 
```

此外，您的包名称应该是`com.xyz.life.service.ejb`（如服务器日志所示）而不是`com.ge.life.annuity.service.ejb`.

无论如何，不​​鼓励使用远程命名项目进行远程 EJB 调用，如此[处](https://docs.jboss.org/author/display/AS71/Remote+EJB+invocations+via+JNDI+-+EJB+client+API+or+remote-naming+project)所述。

> ... . 如您所见，我们已经设法通过使用 EJB 客户端 API 进行 EJB 查找/调用而不是使用远程命名项目来优化某些操作。还有其他 EJB 客户端 API 实现细节（可能会添加更多细节），当它用于客户端应用程序中的远程 EJB 调用时，它们优于远程命名项目，后者不具备为 EJB 执行此类优化的智能调用。这就是为什么远程 EJB 调用的远程命名项目被认为是“弃用”的原因。...

[您可以在此处](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)查看如何使用 EJB 客户端 API 进行远程 EJB 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:49:51.183

找到了....

我只用于本地机器的那些。不同的 JBoss 实例，应该更改 JNDI 查找名称...

像

```
ejb:quote/quote.jar//QuoteFacadeEJB!com.xyz.life.service.ejb.QuoteFacade 
```

# java - 创建了 2 个记录器。它们是如何关联的？

> ID：14323896
> 
> 赞同：0
> 
> 时间：2013-01-14T17:55:43.370
> 
> 标签：java, java.util.logging

我正在尝试使用 java.utils.logging.. 我有这两个文件 MyLogger 和 UseLogger.MyLogger 使用文件处理程序设置记录器.. UseLogger 写入日志。这是两个文件..

```
package UtilsLogging;

import java.util.logging.Level;
import java.util.logging.Formatter;
import java.util.logging.SimpleFormatter;
import java.util.logging.Logger;
import java.util.logging.FileHandler;
import java.io.IOException;

/* Setting the logger up.
 * Create logger,define its level.
 * Create a file handler,mention the formatter,add handler to the logger
 */

public class MyLogger {

    static private SimpleFormatter sf;
    static private FileHandler txtLogFile;

    public static void setup() throws IOException{
        Logger logger = Logger.getLogger("");
        logger.setLevel(Level.INFO);
        sf = new SimpleFormatter();

        txtLogFile = new FileHandler("mytxtlog.txt");
        txtLogFile.setFormatter(sf);
        logger.addHandler(txtLogFile);
    }

} 
```

和

```
package UtilsLogging;

import java.io.IOException;
import java.util.logging.Logger;
import java.util.logging.Level;

public class UseLogger {

    private static final Logger lgr = Logger.getLogger(MyLogger.class.getName());

    public void writeToLog(){
    lgr.setLevel(Level.SEVERE);
    lgr.info("info1");

    lgr.setLevel(Level.INFO);
    lgr.severe("severe2");

    }

    public static void main(String[] args){
        UseLogger ul = new UseLogger();
        try{
            MyLogger.setup();
        }
        catch(IOException ie){
            ie.printStackTrace();
        }

        ul.writeToLog();
    }
} 
```

我不明白的是……在调用 MyLogger.setup() 之后，我说 ul.writeToLog() 正在写入文件 mytxtlog.txt。我不是在两个文件中创建两个不同的记录器吗？UseLogger 中的记录器如何无法将自己与 MyLogger 中完成的记录器设置关联起来。Logger.GetLogger("") 是否必须对我的问题做些什么？我尝试阅读此内容，但我的问题仍未得到解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:05:03.460

下面的调用为您提供了根记录器。

记录器 logger = Logger.getLogger("");

And the root logger is parent of every logger. So if you have not set the logging level or handler for a particular logger it will inherit it from the parent logger recursively (if set) or from the root logger (by default).

# html - HTML 中复选框的 value 属性是什么意思？

> ID：14323899
> 
> 赞同：28
> 
> 时间：2013-01-14T17:55:59.997
> 
> 标签：html

假设这个复选框片段：

```
<input type="checkbox" value="1">Is it worth?</input> 
```

是否有任何理由`value`在 HTML 中静态定义复选框的属性？这是什么意思？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-14T18:05:11.507

我希望我能正确理解你的问题。

value 属性定义了一个由 POST 请求发送的值（即您有一个 HTML 表单提交给服务器）。现在服务器获取名称（如果已定义）和值。

```
<form method="post" action="urlofserver">
    <input type="checkbox" name="mycheckbox" value="1">Is it worth?</input>
</form> 
```

服务器将收到`mycheckbox`的值`1`。

在 PHP 中，这个 POST 变量存储在一个数组中，`$_POST['mycheckbox']`其中包含`1`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-09T17:43:35.807

我只是想对阿德里亚诺席尔瓦的评论发表评论。为了使他描述的内容起作用，您必须在 name 属性的末尾添加“[]”，因此如果我们以他的示例为例，正确的语法应该是：

```
<input type = "checkbox" name="BrandID[]" value="1">Ford</input>
<input type = "checkbox" name="BrandID[]" value="2">GM</input>
<input type="checkbox" name="BrandId[]" value="3">Volkswagen</input> 
```

然后你使用类似的东西： $test = $_POST['BrandID']; （介意 PHP 代码中 BrandID 之后不需要 []）。这将为您提供一个值数组，数组中的值是勾选的值的复选框。

希望这可以帮助！:)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-14T18:31:40.587

一个原因是使用系统中值的易用性。

```
<input type="checkbox" name="BrandId" value="1">Ford</input>
<input type="checkbox" name="BrandId" value="2">GM</input>
<input type="checkbox" name="BrandId" value="3">Volkswagen</input> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-12T09:25:37.317

提交表单时，`value`如果选中复选框，则将属性中的数据用作表单输入的值。默认值为“开”。

```
$('form').on('change', update).trigger('change')

function update() {
  var form = $(this)
  form.find('output').text('→ ' + form.serialize())
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<form>
  <input type="checkbox" name="foo">
  <output></output>
</form>

<form>
  <input type="checkbox" name="foo" checked>
  <output></output>
</form>

<form>
  <input type="checkbox" name="foo" value="1" checked>
  <output></output>
</form>

<form>
  <input type="checkbox" name="foo" value="bananas" checked>
  <output></output>
</form>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-26T00:04:15.857

为了快速浏览答案，来自[MDN](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox#attr-value)

> 提交表单时，仅将当前选中的复选框提交给服务器，报告的值为 value 属性的值

这可能会让人感到困惑，因为看到类似的东西 `<input type='checkbox' name='activated' value='1'>`可能会让人们相信 1 表示真，并且它会被视为已检查，这是错误的。该`checked`属性本身也仅确定是否应在页面加载时默认选中复选框，*而不是*当前是否已选中并因此将被提交。

# go - GAE GO 数据存储中最大的数据类型

> ID：14323901
> 
> 赞同：2
> 
> 时间：2013-01-14T17:56:08.913
> 
> 标签：go, types, google-cloud-datastore

google appengine go 数据存储中最大的数据类型是什么。我遇到了字符串类型的限制，它只允许 500 个字符。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T19:54:28.600

使用一个`[]byte`，它最多可以存储[1兆字节](https://developers.google.com/appengine/docs/go/datastore/reference)。您可以使用将字符串转换为字节`[]byte("Foo")`并使用 `string()`.

数据存储中允许的数据类型：

```
- signed integers (int, int8, int16, int32 and int64),
- bool,
- string,
- float32 and float64,
- any type whose underlying type is one of the above predeclared types,
- *Key,
- time.Time,
- appengine.BlobKey,
- []byte (up to 1 megabyte in length),
- slices of any of the above. 
```

如果要存储更大的数据，例如大图像，请改用[Blobstore](https://developers.google.com/appengine/docs/go/blobstore/overview)。这允许高达 32 兆字节的数据。

# windows-8 - 无法从 VS2012-Express 远程调试到 Surface (Win RT) 平板电脑 - “无法解析指定的计算机名称”

> ID：14323903
> 
> 赞同：2
> 
> 时间：2013-01-14T17:56:11.643
> 
> 标签：windows-8, visual-studio-2012, remote-debugging

我正在为 Surface 平板电脑开发 Windows 商店应用程序。

我正在通过本地网络在 Surface 平板电脑上进行远程调试。起初我对此没有任何问题，然后偶尔大约四分之一的部署失败，我会收到以下消息：

错误：无法连接到名为“my_debugging_tablet”的 Microsoft Visual Studio 远程调试监视器。调试器无法连接到远程计算机。调试器无法解析指定的计算机名称。

最初发生这种情况时，我会简单地再次部署项目并且不会再次发生错误，或者偶尔我会关闭然后重新打开平板电脑上的远程调试监视器，但通常这会看似随机发生而不是重新-发生。

但是，最近，这种情况发生得越来越频繁（我的代码没有更改），现在我已经有几天无法部署了（因此我无法在平板电脑上调试。）

上面列出的相同错误消息是我每次尝试部署或调试时显示的内容。

我在项目属性中验证了目标设备和远程机器名称设置是否正确，并且每次都验证 Surface 平板电脑和我的主机上的连接都很好（我的主机是 Oracle Virtualbox 上的 Windows 8。）

从项目属性中，如果我尝试手动“查找”目标设备（就像您在以前工作时部署回来时所做的那样），它无法在我的本地网络上找到我的平板电脑（或任何东西）。（“在我的子网上找到 0 个连接”）

我的 MS 开发人员许可证注册也是最新的。此外，本地网络似乎没有问题，因为我的主机和平板电脑都可以“看到”网络上的其他东西（打印机等）

我这辈子都想不通，因为正如我所提到的，开发人员许可证注册、网络状态、代码或其他任何应该影响这一点的东西都没有任何变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:35:26.500

我最初阅读了您的问题，并认为您是在说这两个设备可以互相看到，除非通过 Visual Studio。我当时正在摸不着头脑。

Visual Studio 仅使用操作系统来解析名称和地址。我建议对 VS 之外的连接问题进行故障排除，因为问题不仅仅是远程调试的问题。

尝试**nbtstat -n**验证您是否可以看到您对网络的期望。

# android - ViewPager 的 PageAdapter 在方向更改时重置

> ID：14323905
> 
> 赞同：7
> 
> 时间：2013-01-14T17:56:20.147
> 
> 标签：android, android-viewpager

我正在使用一个`ViewPager`选择题考试应用程序，它从更大的集合中随机选择三十个问题。我在`PageAdapter`将页面提供给`ViewPager`.

问题是，当方向发生变化时，不仅寻呼机而且适配器都会重新加载 - 我知道如何保存当前寻呼机位置，但是当适配器重置时，它还会从集合中选择新问题。处理这个问题的正确方法是什么？

另外，附带问题 - 在 RadioGroups 上注册选择的最佳方式是什么？直接通过点击还是以其他方式？

我对 Android 应用程序开发相当陌生。

* * *

活动：

```
public class MyActivity extends SherlockActivity {
    ActionBar actionBar;
    ViewPager pager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        pager = new ViewPager(this);
        setContentView(pager);
        QuestionsAdapter adapter = new QuestionsAdapter(this);
        pager.setAdapter(adapter);

        int position = 0;
        if (savedInstanceState != null) {
            position = savedInstanceState.getInt("Q_NUMBER");
        }         
        pager.setCurrentItem(position);
    }

    @Override
    public void onSaveInstanceState(Bundle savedInstanceState) {
        int position = pager.getCurrentItem();
        savedInstanceState.putInt("Q_NUMBER", position);
    }
} 
```

适配器：

```
class QuestionsAdapter extends PagerAdapter {
    Context context;
    QuestionsHelper dbQuestions;
    boolean exam;
    List<HashMap<String,Object>> examQuestions;

    public QuestionsAdapter(Context context, boolean exam) {
        this.context = context;
        this.examQuestions = GetQuestionsFromDB(30);
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view;
        HashMap<String,Object> q;

        view = inflater.inflate(R.layout.exam_question_layout, null);
        q = getQuestion(position+1);

        ((TextView)view.findViewById(R.id.q_number)).setText(Integer.toString(position+1)+".");
        ((TextView)view.findViewById(R.id.q_question)).setText(q.get("question").toString());
        ((RadioButton)view.findViewById(R.id.q_answer_a)).setText(q.get("answer_a").toString());
        ((RadioButton)view.findViewById(R.id.q_answer_b)).setText(q.get("answer_b").toString());
        ((RadioButton)view.findViewById(R.id.q_answer_c)).setText(q.get("answer_c").toString());

        ((ViewPager)collection).addView(view, 0);
        return view;
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T18:15:28.743

屏幕旋转将以新的方向重绘整个屏幕，我们可以通过覆盖配置更改来防止它。

在 Android Manifest 的屏幕声明下添加 android:configChanges="orientation|screenSize"

```
 android:configChanges="orientation|screenSize" 
```

并在您的活动中覆盖 onConfigurationChanged(Configuration) ，例如

```
 @Override
 public void onConfigurationChanged(Configuration newConfig) {
     super.onConfigurationChanged(newConfig);
 } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T19:47:43.273

> 我知道如何保存当前寻呼机位置，但是当适配器重置时，它还会从集合中选择新问题。处理这个问题的正确方法是什么？

你的问题真的应该有一个`id`唯一标识它们的方法。我不确定你是如何从数据库中获取它们的，但是当发生这种情况时，你需要存储它们的 ID。还：

*   您的适配器应该有一个`long`数组（或整数），其中包含 30 个值，表示当前选定的一批问题的 id
*   您需要在适配器中实现以下逻辑：如果上一点的长数组是`null`然后假设它是一个干净的开始并获得一组新的 30 个问题。如果长数组不为空，那么我们将面临从配置更改中恢复的问题，您需要使用这些 id 从数据库中获取正确的问题，而不是随机批处理
*   在方法（）`Activity`中，您将保存适配器的长数组`onSaveInstanceState()``savedInstanceState.putLongArray`
*   在 的`onCreate`方法中`Activity`，当您创建适配器时，您将检查`savedInstanceState` `Bundle`它是否为非 null 并且它具有长数组并将其设置在适配器上（这样它就会知道要获取哪些问题）

> 在 RadioGroups 上注册选项的最佳方式是什么？直接通过点击还是以其他方式？

您可以使用上述方法，或者创建一个自定义类，`Parcelable`就像评论中已经向您推荐的那样。

# iphone - 如何通过 CSS 关闭某些 HTML 元素的硬件加速？

> ID：14323908
> 
> 赞同：2
> 
> 时间：2013-01-14T17:56:28.157
> 
> 标签：iphone, html, css, jquery-mobile, hardware-acceleration

我使用 HTML5、CSS3 和 jQueryMobile 创建了一个非常复杂的 Web 应用程序。

似乎 jQueryMobile 通过`translate3D`和/或在这里和那里打开硬件加速`translateZ`。

现在我想为某些 HTML 元素关闭它。

这给了我两个问题：

*   是否有 css 属性/属性或可以用来告诉浏览器关闭某些元素的硬件加速的东西？
*   如果不是：我将不得不找到使用`translate3D`或的地方`translateZ`并简单地删除它们，对吗？我怎样才能做到这一点？整个标记非常复杂，包含许多 HTML 元素。我无法遍历检查器中的每个元素并进行搜索。

* * *

**更新：** *我想解决这个问题的原因*

在我的网络应用程序中，有一些元素需要可滑动（例如图片库）。在这种情况下，我需要硬件加速。对于需要 iScroll 的 div 容器和所有其他应该设置动画的元素（例如幻灯片和淡入淡出动画）也是如此。

但是，应用程序的许多部分是静态的（不是动画的）。在 Safari 中使用特殊的启动选项，我能够使硬件加速的部分可见。通过这种方式，我注意到整个应用程序都得到了硬件加速，而不仅仅是必要的部分。

恕我直言，这不是一件好事，因为：

*   加速整个过程会导致 GPU 负载过重，从而使整个应用程序在滚动时卡顿。
*   AFAIK最好让CPU做静态的东西，而GPU只处理所有花哨的动画东西。
*   当动画结束时，应该停用硬件加速，因为它不再需要并且会缩短电池寿命。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:29:57.067

在浏览了成千上万行 CSS 代码后，我发现：

```
.ui-page{-webkit-backface-visibility: hidden !important} 
```

这对所有页面都有效并导致了问题。删除那条线为我修复了它。

# php - PHP HTML ASCII 编码，无需修改 HTML 标签

> ID：14323910
> 
> 赞同：0
> 
> 时间：2013-01-14T17:56:39.740
> 
> 标签：php, html, ascii, encode

我试图制作一个简单的脚本来防止机器人阅读网页。

我目前正在使用此代码：

```
<?php echo "&#".ord("f").";"; ?> 
```

那个输出：

```
&#102; 
```

在你的browser中你会看到：

> F

这是一个使用 HTML ASCII 编码的简单脚本：http: [//www.w3schools.com/tags/ref_ascii.asp](http://www.w3schools.com/tags/ref_ascii.asp)（更多信息）。

但我想在不修改 HTML 代码的情况下对这样的字符串进行编码（这是一个示例，不是真正的字符串）：

```
<p>i<a href="#">s</a>o</p> 
```

我想输出：

```
<p>&#105;<a href="#">&#115;</a>&#111;</p> 
```

并在browser中看到：

> 异

这可能吗？有人可以指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:06:11.903

希望这可以帮助你

```
<p><?php echo html_entity_decode(htmlentities("&#".ord("i").";")); ?><a href="#">
<?php echo html_entity_decode(htmlentities("&#".ord("s").";")); ?></a>
<?php echo html_entity_decode(htmlentities("&#".ord("f").";")); ?></p> 
```

有关更多信息，请参阅[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)和这个

[http://php.net/manual/en/function.html-entity-decode.php](http://php.net/manual/en/function.html-entity-decode.php)

# javascript - div 中的绝对 div 溢出

> ID：14323911
> 
> 赞同：0
> 
> 时间：2013-01-14T17:56:39.830
> 
> 标签：javascript, jquery, html, css

我正在尝试制作一个位于 div 底部的选项卡菜单，当单击选项卡链接时，它的内容会向上滑动。

这是我到目前为止所得到的。我真的不明白为什么它的行为方式是
[http://jsfiddle.net/5mVt8/11/](http://jsfiddle.net/5mVt8/11/)

关键位：

```
#content {  
  position: relative;  
  width:500px;  
  height:400px;  
  overflow:hidden;
}
.page {
    position: absolute;
  left:0;
  top:380px;
  width:500px;
  height:400px;
} 
```

```
<div id="content">
  <div class="page" id="one"><a href="#one">Click</a>Page 1</div>
  <div class="page" id="two"><a href="#two">Click</a>Page 2</div>
  <div class="page" id="three"><a href="#three">Click</a>Page 3</div>
</div> 
```

完整代码在这里：http: [//jsfiddle.net/5mVt8/11/](http://jsfiddle.net/5mVt8/11/)

这些是在具有溢出的相对 div 中具有绝对定位的 div 的错误吗？谁能告诉我为什么这不起作用或我应该如何批准这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:10:20.920

从您的 html 中删除 #one #two #three。

```
<div id="content">
    <div class="page" id="one"><a href="#">Click</a>Page 1</div>
    <div class="page" id="two"><a href="#">Click</a>Page 2</div>
    <div class="page" id="three"><a href="#">Click</a>Page 3</div>
</div> 
```

现在只需正确编写您的动画。

```
 $('.page a').click(function(){ 
     $(this).parent('.page').animate({top:0}).addClass('open');
 }); 
```

[http://jsfiddle.net/5mVt8/18/](http://jsfiddle.net/5mVt8/18/)

编辑：我相信你可以找到一种更简洁的方式来编写你的 CSS。所有这些绝对值、定位和 z 索引。我会找到一种更好的方法来完成你想要的，但这就是我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:14:01.537

您有 #content 固定高度，`overflow:hidden`底部的页面因溢出而部分隐藏。现在在链接点击锚点工作和#content*向下滚动*到隐藏块顶部。您应该`return false`在点击事件函数的末尾添加以防止默认行为。

你也错过了[动画方法](http://api.jquery.com/animate/)的语法。应该是这样的

```
$(this).parent().animate({'top': '0px'}, 300, "swing"); 
```

[http://jsfiddle.net/5mVt8/27/](http://jsfiddle.net/5mVt8/27/)

# c++ - 为 std::map 定义一个使用值而不是键的比较函数

> ID：14323914
> 
> 赞同：3
> 
> 时间：2013-01-14T17:56:44.127
> 
> 标签：c++, dictionary, stl, compare, stdmap

我可以为这样的地图定义一个比较类：

```
struct classcomp {
    bool operator() (const string& lhs, const string& rhs) const
    {
        if(lhs < rhs)
            return true;
        else 
            return false;
    }
}; 
```

但在这里`lhs`并`rhs`代表键。如果我想按值而不是键进行比较怎么办？我将如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:29:49.680

*这与你*想要什么无关；这是关于`std::map`想要什么。排序基于内存中元素的布局（通常是树结构），并且正是这个过程使用了比较器。希望不是这样，但事实并非如此！

在我看来`std::map`，容器选择不符合您的要求。参考容器选择流程图来决定下一步做什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T17:59:29.427

std::map 类型不支持按值进行比较。如果要按值进行比较，则应考虑制作一个新的 multimap，其键表示旧映射中的值，其值表示旧映射中的键。

也就是说，听起来您正在尝试根据键的值动态重新排序键。在这种情况下，您可能希望查看支持减少键的优先级队列，因为这可能更符合您要执行的操作。

希望这可以帮助！

# java - Install4j 绕过了自定义安装步骤

> ID：14323918
> 
> 赞同：0
> 
> 时间：2013-01-14T17:56:56.843
> 
> 标签：java, user-permissions, install4j

我们有一个包含 install4j 的应用程序。第一步是在典型安装和自定义安装之间进行选择。自定义安装通常会弹出选择 localsettings 文件夹、appdata 文件夹以及下一步安装文件夹（默认：Program Files）的选项。

出于某种原因，在特定环境中，当两个选项都未选中时，安装继续进行而不询问所需的文件夹路径。

还创建了一个错误文件：

```
java.lang.ClassNotFoundException: I4jScript_Internal_12
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at com.install4j.runtime.installer.ContextImpl.runScript(Unknown Source)
at com.install4j.runtime.installer.ContextImpl.runScript(Unknown Source)
at com.install4j.runtime.installer.ContextImpl.runBooleanScript(Unknown Source)
at com.install4j.runtime.installer.ContextImpl.runBooleanScript(Unknown Source)
at com.install4j.runtime.installer.ContextImpl.runBooleanScript(Unknown Source)
at com.install4j.runtime.installer.controller.Controller.executeActions(Unknown Source)
at com.install4j.runtime.installer.controller.Controller.handleCommand(Unknown Source)
at com.install4j.runtime.installer.controller.Controller.start(Unknown Source)
at com.install4j.runtime.installer.Installer.main(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at com.exe4j.runtime.LauncherEngine.launch(Unknown Source)
at com.exe4j.runtime.WinLauncher.main(Unknown Source)
at com.install4j.runtime.launcher.WinLauncher.main(Unknown Source) 
```

您能否让我知道，这种行为的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T10:00:46.300

未找到的类用于您的 install4j 项目中的脚本。只有当您的安装目录不一致时才会发生这种情况，即如果 .install4j/user.jar 和 .install4j/i4jparams.conf 不是来自同一个安装程序。

# .htaccess - htaccess：删除 .php 扩展名

> ID：14323920
> 
> 赞同：1
> 
> 时间：2013-01-14T17:57:00.240
> 
> 标签：.htaccess, mod-rewrite

我有一个名为 Show.php 的文件

我想删除这个的.php 扩展名，如果有人请求/Show.php，将他重定向到没有.php 扩展名的页面。

这是我的 htaccess，但它不会将用户重定向到没有扩展名的页面。

```
RewriteCond %{REQUEST_URI} ^Show\.php$
RewriteRule ^Show\.php$ ./Show [R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^Show$ ./Show.php [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T17:59:13.307

`REQUEST_URI`与`RewriteRule`表达式不同，它以前导开头，`/`但您的表达式以 . 开头`^Show`。只需添加前导斜杠就可以完成这项工作。其他一切看起来都是正确的。

```
RewriteCond %{REQUEST_URI} ^/Show\.php$
#-------------------------^^^^^
RewriteRule ^Show\.php$ Show [R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
#Rewrite to Show.php rather than ./Show.php
RewriteRule ^Show$ Show.php [L] 
```

# jquery - 如何让 jQuery Fancybox 接受我的对象作为有效的开放参数？

> ID：14323922
> 
> 赞同：0
> 
> 时间：2013-01-14T17:57:07.307
> 
> 标签：jquery, arrays, json, object, fancybox

我有一些这种格式的html：

```
<div id="logos" class="downloadlist">
    <ul>
        <li><a href="/toolkit/logos/download.jpg" data-image="images/toolkit/logos/one.jpg">First Logo</a></li>
        <li><a href="/toolkit/logos/download.jpg" data-image="images/toolkit/logos/two.jpg">Second Logo</a></li>
        <li><a href="/toolkit/logos/download.jpg" data-image="images/toolkit/logos/three.jpg">Third Logo</a></li>
    </ul>
</div> 
```

我想逐步完成它并[像这样](http://jsfiddle.net/DR7eC/2/)将它提供给 Fancybox 。

我已经做到了这一点，但它直接不起作用：

```
downloadList = $('#logos ul li a');

var downloadArray = {};

downloadJSON = '';

$.each(downloadList, function(d)
{
    var download = $(this);
    var href = download.data('image');
    var title = download[0].innerText;
    var link = download[0].href;

    downloadArray[d] = {};
    downloadArray[d].href = href;
    downloadArray[d].title = "<a href=\'" + link + "\'>"+title+"</a>";

    downloadJSON += JSON.stringify(downloadArray[d])+',';
});

downloadJSON = downloadJSON.slice(0, -1);

$.fancybox.open([downloadArray]); 
```

downloadJSON 给了我：

```
{"href":"images/toolkit/logos/one.jpg","title":"<a href='http://example.com/toolkit/logos/download.jpg'>First Logo</a>"},{"href":"images/toolkit/logos/two.jpg","title":"<a href='http://example.com/toolkit/logos/download.jpg'>Second Logo</a>"},{"href":"images/toolkit/logos/three.jpg","title":"<a href='http://example.com/toolkit/logos/download.jpg'>Third Logo</a>"} 
```

JSON.stringify-ing downloadArray 对象给了我：

```
{"0":{"href":"images/toolkit/logos/one.jpg","title":"<a href='http://example.com/toolkit/logos/download.jpg'>First Logo</a>"},"1":{"href":"images/toolkit/logos/two.jpg","title":"<a href='http://example.com/toolkit/logos/download.jpg'>Second Logo</a>"},"2":{"href":"images/toolkit/logos/three.jpg","title":"<a href='http://example.com/toolkit/logos/download.jpg'>Third Logo</a>"}} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T18:08:33.760

```
links = [];
$('#logos ul li a').each(function() {
   links.push({
      href: $(this).attr('data-image'),
      title: "<a href=\'" + $(this).attr('href') + "\'>"+$(this).html()+"</a>"
   });
});
//JSON.stringify(links);
$.fancybox.open(links); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T00:18:31.250

我的扩展答案基于@Adrian 的回答：

为了根据所选链接下载（显示在花式框中）正确的徽标，我们使用 API 选项`index`，如下面的调整扩展代码：

```
links = [];
$('#logos ul li a').each(function (indx) {
  // Adrain's code tweaked
  links.push({
    href: $(this).data('image'),
    title: "<a href=\'" + $(this).data('image') + "\'>" + $(this).html() + "</a>"
  });
  // extended to catch click on links
  $(this).on("click", function (e) {
    e.preventDefault();
    $.fancybox.open(links, {
      index: indx // starts gallery with index of the clicked link
    });
  });
});
//JSON.stringify(links);
//$.fancybox.open(links); // would open fancybox on page load 
```

见**[JSFIDDLE](http://jsfiddle.net/mdwZ5/)**

# android - 如何利用 android 的 ScaleGestureDetector 中的焦点像 android 浏览器一样进行缩放？

> ID：14323924
> 
> 赞同：7
> 
> 时间：2013-01-14T17:57:23.890
> 
> 标签：android, canvas, scale, viewport, pinchzoom

我有一个画布，我正在使用 ScaleGestureDetector 来放大我的 android 应用程序。这是我到目前为止的代码：

```
 //SCALING --------------------------------------------------
        //get center of the viewport
        int centerX = xLoc+((int)(screenWidth/2*scaleFactor));
        int centerY = yLoc+((int)(screenHeight/2*scaleFactor));
        scaleFactor /= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        scaleFactor = Math.max(1.0f, Math.min(scaleFactor, maxScaleFactor));                
        //Make sure the viewport is repositioned
        xLoc = centerX-((int)(screenWidth/2*scaleFactor));
        yLoc = centerY-((int)(screenHeight/2*scaleFactor));
            //----------------------------------------------------------- 
```

这非常适合放大和缩小我的画布。xLoc 和 yLoc 代表我的视口的左上角，相对于我正在绘制一部分的整个图像。不过，我对这段代码的问题是它放大到视口的中心。我希望能够使用detector.getFocuxX() 和detector.getFocusY() 来放大焦点，就像在android 浏览器中进行缩放一样。

基本上我需要调整视口的位置（xLoc 和 yLoc），以便它看起来像缩放到缩放手势的焦点。

我无法弄清楚这部分。如果有人知道如何在不使用画布矩阵转换的情况下做到这一点（我在发布此之前发现的许多主题中都使用过它），我将不胜感激！即使您可以将我指向其他做过类似事情的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T08:56:56.013

单个`onScale`函数调用不能提供足够的信息来实现围绕明显焦点的缩放。您将需要保留上一次调用的值`getFocusX()`和`getFocusY()`来自上一次`onScale`调用的值，并使用它们来影响您在下一次调用中的缩放。

# google-maps - 是否可以在不使用融合表的情况下将多边形图层添加到谷歌地图 v3

> ID：14323925
> 
> 赞同：0
> 
> 时间：2013-01-14T17:57:26.353
> 
> 标签：google-maps, google-maps-api-3, kml, polygons

这个问题很有描述性。

我正在一个提供拍摄地点的网站上工作。

该站点中的所有数据当前都存储在 MySQL 数据库中，包括用于谷歌地图的地理编码数据。

我需要显示具有位置的不同伦敦行政区的多边形区域。

我将所有数据都保存为 kml 文件，理想情况下我想将其存储在 MySQL 数据库中。

我已经成功使用融合表来显示这些数据，但对我来说，为了使用融合地图图层而必须在谷歌上复制这些数据似乎很愚蠢，我可以简单地使用 kml 图层来呈现这些数据而不是必须创建一个融合表并从中渲染它？

如果是这样，是否有人可以向我指出更多信息的资源？

更新：感谢您到目前为止的回复，我想我会用更多信息更新这个问题。

我最终希望在我的地图上同时显示所有区域，然后在理想情况下单击某个区域时，它会将您带到网站上显示该特定区域位置的另一个页面。

我最初尝试使用 KML 图层，但我收到错误消息说我的 KML 无效。KML 最初存储在我的数据库表中的一个字段中，我认为这些错误可能是由于我不了解谷歌是如何读取 KML 数据的。

使用多边形实现起来要简单得多，因为我可以通过 JSON 获取这些数据，然后从中渲染多边形。

我现在知道不可能有带有多边形的信息窗口，但我宁愿使用点击处理程序直接跳转到另一个包含该特定区域信息的网站页面，而不是显示信息窗口。或者，正如建议的那样，显示一个带有该区域简要描述的工具提示和一个页面链接会更好，工具提示本身如何，是否可以在地图顶部呈现？

我有点担心我会达到 KML 的层数限制。是否可以在一个图层上使用 KML 渲染多个多边形，或者我是否需要为每个可点击区域设置一个单独的图层？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:22:33.200

Google Maps API 提供了一种非常简单的方法来绘制[多边形](https://developers.google.com/maps/documentation/javascript/reference#Polygon)。

基本示例：

```
var polygon = new google.maps.Polygon({
  map: your_google_map_instance,
  paths: array_of_latlng_points,
  fillColor: "#336699",
  fillOpacity: .5,
}) 
```

编辑：对于这种方法，您需要解析您的 KML 文件（对不起，我第一次阅读时一定错过了）。您可以将 KML 文件导入[KML 图层](https://developers.google.com/maps/documentation/javascript/reference#KmlLayer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:14:28.963

[您可以使用KmlLayer](http://code.google.com/p/geoxml-v3/)、FusionTablesLayer（如您所知）或原生 google.maps.Polygon 对象覆盖多边形。

KmlLayer 和 FusionTablesLayer 将它们渲染为瓦片，因此对于许多多边形（如果您只需要点击事件）会更有效。一次可以在地图上和 FusionTablesLayer 上显示的 KmlLayer 的数量存在限制（但这些似乎不会给您带来问题）。

还有可用于 KML 的第三方解析器（[geoxml3](http://code.google.com/p/geoxml3/)、[geoxml-v3](http://code.google.com/p/geoxml-v3/)），它们将获取您的 KML 并将其呈现为原生[google.maps.Polygon 对象](https://developers.google.com/maps/documentation/javascript/reference#Polygon)。对于许多多边形，这将比基于图块的渲染效率低，但它确实允许鼠标悬停/鼠标移出，并动态更改多边形的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-09T19:58:00.267

您还可以尝试具有大量事件的数据层，以便在各种鼠标事件上显示工具提示、信息窗口、状态文本。请参阅文档中的示例： [https ://developers.google.com/maps/documentation/javascript/datalayer](https://developers.google.com/maps/documentation/javascript/datalayer)

如果您有许多多边形（其中许多的实际值取决于多个因素，可能在 100 到 1,000 之间），最好使用内置图层类型。最快的是在服务器上呈现的，例如 kml 层，因为这不会在浏览器中创建数百个 DOM 元素，但仍会公开点击事件，因此可以为每个项目显示信息框。

在最坏的情况下，您可以使用图像映射实现自己的渲染，显然是通过使用像 mapnik 这样的现有库。 [https://developers.google.com/maps/documentation/javascript/maptypes#ImageMapTypes](https://developers.google.com/maps/documentation/javascript/maptypes#ImageMapTypes)

# c# - 对于两个列表中的每个元素

> ID：14323927
> 
> 赞同：1
> 
> 时间：2013-01-14T17:57:31.223
> 
> 标签：c#, .net, arrays, list, foreach

这是我的代码：

```
List<string> l1 = new List<string> { "a", "b", "c" };
List<string> l2 = new List<string> { "x", "y", "z" };
foreach (var item in l1)
{
    item = MyFunction(item);
}
foreach (var item in l1)
{
    item = MyFunction(item);
} 
```

有没有办法在单个 foreach 语句中迭代两个列表？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T17:57:57.583

假设`List`您可以使用的对象类型相同`Concat`。

```
foreach (var item in l1.Concat(l2))
{
    item = MyFunction(item);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T17:59:22.970

您可以使用 Concat() 函数：

```
foreach(var item in l1.Concat(l2))
   item = MyFunction(item); 
```

请注意，重新分配基于 Enumerable 的循环的计数器变量可能会导致与更改基础 IEnumerable 相关的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T17:59:49.110

也许是这样的：

```
var mergedList = 11.Union(l2).ToList();
foreach (var item in mergedList)
{
    item = MyFunction(item);
} 
```

联盟删除所有重复项。Concat() 方法没有。因此，Union 可能更可取。这取决于列表的组成。

# php - 超级嵌套函数的缺点？

> ID：14323929
> 
> 赞同：1
> 
> 时间：2013-01-14T17:57:45.080
> 
> 标签：php, recursion, xdebug

在[xDebug 上](http://xdebug.org/docs/all_settings#max_nesting_level)，它们限制了一个函数可以嵌套多少次，嵌套函数这么多次有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:01:05.583

是的。

每次从另一个函数中调用一个函数时，都会向*堆栈*添加一层。

过去的函数调用还没有返回，所以他们为局部变量申请的内存不能被释放；它一直驻留，直到整个堆栈展开。

想象一下，您要从 1,000 次调用深度的函数内部抛出异常。为了生成堆栈跟踪，它必须向上遍历 1,000 个函数调用，将它们全部放入异常对象中。

递归没有什么可以做的，而使用编写良好的循环则无法做到，并且循环将更节省内存（因为它不必为每个函数调用产生堆栈帧开销）和时间效率（因为它没有实际执行您删除的函数调用的开销）。

递归级别达到 1,000 的程序极不可能按预期运行。更有可能的是，它陷入了无限递归，最终会耗尽系统的所有 RAM。最好早点杀掉。

# php - 未处理的异常：为类重新定义已定义的构造函数

> ID：14323933
> 
> 赞同：2
> 
> 时间：2013-01-14T17:57:55.497
> 
> 标签：php, exception, laravel

在 PHP 中，我收到以下错误：

> 为类 Select 重新定义已定义的构造函数

那是因为一个类'Select'有一个'select'函数（除了它的构造函数）。但与有关此错误的其他主题不同，我的错误是“未处理的异常”。

错误报告级别为 30719（wamp、PHP 5.3.9、Apache 2.2.21）的本地服务器中未显示该错误。在显示错误的我的 prod 服务器中，错误报告级别为 22527 (real server, Ubuntu, PHP 5.3.2, Apache 2.2.14) 。

为什么该错误对我来说显示为未处理的异常？`error_reporting(0)`我使用 Laravel 框架，但如果我将 laravel/laravel.php 修改为手动设置，并且在 start.php中，错误甚至不会`ini_set('display_error', 0)`消失 ????

我能做些什么 ？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-07T04:49:00.430

将 PHP4 构造函数放在类中的 PHP5 构造函数之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T18:06:38.633

出于向后兼容的目的，PHP 使用与类同名的方法作为类构造函数。因此，事实上你有一个与类同名的方法以及一个构造函数，你得到了这个异常。您应该更改方法名称或类名称。

# php - 为什么我的函数没有返回返回值？

> ID：14323943
> 
> 赞同：2
> 
> 时间：2013-01-14T17:58:28.073
> 
> 标签：php, mysql, pdo

好的，这是我的功能：

```
function getNewJobNumber($jobPrefix, $addition = "0") {
$addition = $addition + 1;
//echo $addition . "<br />";    
$yearDate = date("Y");
$firstDigit = $yearDate[strlen($yearDate) - 1];
$db = DatabaseHelpers::getDatabaseConnection();
$jobQuery = 'SELECT jobID, jobNumber, jobPrefix FROM tblJobNumbers WHERE jobPrefix = "' . $jobPrefix . '" AND jobNumber LIKE "' . $firstDigit . '___" ORDER BY jobID DESC LIMIT 1';
//echo $jobQuery . "<br />";
$stmt1 = $db->query($jobQuery);
$stmt1->setFetchMode(PDO::FETCH_OBJ);
$firstResult = $stmt1->fetch();
//above should select the latest created job number with selected prefix
//print_r($firstResult);
$jobNumber = $firstResult->jobNumber; //top row, will be last job number
//echo "jobNumberFromDB:" . $jobNumber . "<br />";
if (!$jobNumber) {
    //no job number exists yet, create one
    //will be last digit of year followed by "000" ie in 2013 first
    //new job number is "3000"
    $newJobNumber = str_pad($firstDigit, 4, "0");
    return $newJobNumber;
} else {
    //job number already exists, try next one
    $nextJobNumber = $jobNumber + $addition;
    $nextJobQuery = 'SELECT jobID, jobNumber, jobPrefix FROM tblJobNumbers WHERE jobPrefix = "' . $jobPrefix . '" AND jobNumber = "' . $nextJobNumber . '" ORDER BY jobID DESC LIMIT 1';
    $stmt2 = $db->query($nextJobQuery);
    $stmt2->setFetchMode(PDO::FETCH_OBJ);
    $nextResult = $stmt2->fetch();
    $dbNextJobNumber = $nextResult->jobNumber;      
    if (!$dbNextJobNumber) {
        //new job number is unique, return value
        echo "return:nextJobNumber-" . $nextJobNumber . "<br />";
        return($nextJobNumber);
    } else {
        //new job number is not unique, and therefore we need another one
        if ($addition <= 99) { //don't let this recurse more than 99 times, it should never need to
            //in order to loop this programatically call function again, adding one to addition factor
            getNewJobNumber($jobPrefix, $addition+1);
        } else {
            return;
        }
    }
}
} 
```

这是我的电话：

```
 $ourNewJobNumber = getNewJobNumber($_POST['txtJobPrefix'], 0);
        echo ":}" . $ourNewJobNumber . "{:<br />"; 
```

这是我的结果：

```
return:nextJobNumber-3005
:}{: 
```

代码执行完美，从数据库中提取值并比较它们，并按照我想要的方式做所有事情。在我可以测试的每种情况下，它都会获得正确的值，但它完全拒绝将该值返回给调用脚本。有没有人看到我掩盖的任何愚蠢错误？在我的 return 语句之前立即进行调试回显似乎消除了在 r​​eturn 语句之前出错的任何可能性，但我现在还不知道。

编辑：为了清楚起见，3005 是我现在期望从我的数据库中得到的值。这是为了在工作中设置工作编号，该编号始终为 Zxxx，其中 Z 是年份的最后一位。这些总是按顺序创建的，但对于跨越一年以上的工作，我们只更改 Z，所以这是我用来解决 3030 可以（并且确实）在创建 3000 之前存在的事实的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T18:02:25.910

当你打电话时

`getNewJobNumber($jobPrefix, $addition+1);`

你实际上并没有返回值。

改变它

`return getNewJobNumber($jobPrefix, $addition+1);`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T18:02:37.587

您正在递归调用您的函数，但您没有对返回值做任何事情：

```
 if ($addition <= 99) { //don't let this recurse more than 99 times, it should never need to
        //in order to loop this programatically call function again, adding one to addition factor
        getNewJobNumber($jobPrefix, $addition+1);
    } else {
        return;
    } 
```

应该是这样的：

```
 if ($addition <= 99) { //don't let this recurse more than 99 times, it should never need to
        //in order to loop this programatically call function again, adding one to addition factor
        return getNewJobNumber($jobPrefix, $addition+1);
        ^^^^^^
    } else {
        return -1;    // some kind of error message?
    } 
```

# mpi - 我什么时候应该使用 MPI_Datatype 而不是手动序列化？

> ID：14323951
> 
> 赞同：2
> 
> 时间：2013-01-14T17:59:21.440
> 
> 标签：mpi

当我需要 MPI_Bcast 一个 64 位整数时，这一切就开始了。由于 MPI 不知道如何处理它，我做了：

```
template<typename T>
inline int BcastObjects(T* pointer, 
                        int count, 
                        int root, 
                        MPI_Comm comm)
{
    return MPI_Bcast(pointer, 
                     count * sizeof(*pointer), 
                     MPI_BYTE, 
                     root,
                     comm);
} 
```

现在我可以这样做：

```
int64_t i = 0;
BcastObjects(&i, 1, root_rank, some_communicator); 
```

然后我开始使用 BcastObjects 发送一个结构数组。我想知道这样做可以吗？

关于 MPI_Datatype 的手册侧重于如何做，而不是我为什么要这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:12:01.633

为什么不直接使用[`MPI_INT64_T`](http://www.mpi-forum.org/docs/mpi22-report/node44.htm)？

你总是可以用你自己的数据类型来模拟你自己的数据类型`MPI_Byte`；数据类型的东西在那里，所以你不必。在许多情况下，这要容易得多；如果您想发送其中有“漏洞”的数据（例如，多维数组的切片，结构中存在间隙的数据），您可以使用数据类型相当直接地映射出来，而您必须手动数出字节字符串并使用类似的东西[`MPI_Pack`](http://www.mpi-forum.org/docs/mpi-11-html/node62.html)。当然，如果您的数据结构中的某些内容发生变化，那么在更高级别上描述数据肯定不会那么脆弱。

# java - 如何使用 BufferedReader 跳过其余行

> ID：14323958
> 
> 赞同：0
> 
> 时间：2013-01-14T17:59:46.057
> 
> 标签：java, bufferedreader, filereader

在我的程序中，用户经常在 .txt 文件中搜索某些信息。要知道是否找到了正确的数据位，我首先检查每一行是否以表示一组数据开始的特殊字符开头，如下所示：

```
//one character has so far been read
if(character == '#'){
    //continue to examine data
}else{
    //skip the rest of the line
} 
```

我遇到的问题是如何实际“跳过该行的其余部分”，如果该行没有以我选择的特殊字符开头。

根据有关信息不足的投诉：我确实在使用 while 循环来读取每一行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:08:36.923

您可以在 if 中执行操作：

```
 BufferedReader csvFile = new BufferedReader(
        new InputStreamReader(inputStream));

   while ((csvLine = csvFile.readLine()) != null) {
        if (csvLine.charAt(0) == '#') {
             // do # data action here
        }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:07:52.820

使用扫描仪类和方法 nextLine()。如果它看起来有点困难，它将帮助你很多。然后逐行读取文件，然后使用*RegEx*模式检查该文件行所需的模式。

# c++ - 使用 std::tr1::function 的成员回调函数出现“不匹配”错误

> ID：14323964
> 
> 赞同：0
> 
> 时间：2013-01-14T17:59:58.540
> 
> 标签：c++, function, tr1

我正在尝试使用指向公共成员函数的 str::tr1::function 创建回调函数。

```
std::tr1::function < int (const string& , const MessageInfo* , const void* , const int , const void* ) > dssCallBack;
dssCallBack = &ABC::mDBtoDScallback; 
```

这个回调将被传递给 ABC 类的另一个函数体内的一个函数。的签名`ABC::mDBtoDScallback`是

```
int DataserviceSubscriber::mDBtoDScallback(const string& strTopic, const MessageInfo* messageInfo, const void* data, const int dataLen, const void* callback_data) 
```

当我尝试编译它时，我从 g++ 收到以下错误。

```
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1/functional:56,
                 from ../src/bmrk/databus/ABC.hpp:17,
                 from ../src/bmrk/databus/ABC.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional: In static member function ‘static _Res std::tr1::_Function_handler<_Res(_ArgTypes ...), _Member _Class::*>::_M_invoke(const std::tr1::_Any_data&, _ArgTypes ...) [with _Class = ABC, _Member = int(const std::string&, const MessageInfo*, const void*, int, const void*), _Res = int, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:2005:   instantiated from ‘std::tr1::function<_Res(_ArgTypes ...)>::function(_Functor, typename __gnu_cxx::__enable_if<(! std::tr1::is_integral::value), std::tr1::function<_Res(_ArgTypes ...)>::_Useless>::__type) [with _Functor = int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*), _Res = int, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]’

/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:1885:   instantiated from ‘typename __gnu_cxx::__enable_if<(! std::tr1::is_integral::value), std::tr1::function<_Res(_ArgTypes ...)>&>::__type std::tr1::function<_Res(_ArgTypes ...)>::operator=(_Functor) [with _Functor = int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*), _Res = int, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]’
../src/bmrk/databus/dataservice_subscriber.cpp:266:   instantiated from here

/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:1714: error: no match for call to ‘(std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>) (const std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, const MessageInfo*&, const void*&, int&, const void*&)’

/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:546: note: candidates are: _Res std::tr1::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Class&, _ArgTypes ...) const [with _Res = int, _Class = ABC, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]

/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:551: note:                 _Res std::tr1::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Class*, _ArgTypes ...) const [with _Res = int, _Class = ABC, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*] 
```

我想看看我在这里做错了什么，但无法发现它。我试图查找，但找不到其他有类似问题的人。我可以使用 C 风格的 typedef，但我想使用并保持 C++ 风格，在此过程中也习惯了 C++11 中的一些较新的东西。

谢谢。

编辑：根据 Michael Burr 的要求，回调是根据此处的参考[http://en.cppreference.com/w/cpp/utility/functional/function从函数调用的](http://en.cppreference.com/w/cpp/utility/functional/function)

```
int ABC::subs_rt(const vector<string> &symbols, raw_callback_t raw_callback, void *app_data, Error *error)
{
    DBtoDS_callback_data cbData;
    cbData.subscriber_callback = raw_callback;
    cbData.raw_callback_app_data = app_data;
    cbData.err = error;

    // Perform processing on 'symbols'
    // dss is a member of class ABC and has been initialized in constructor
    dss->AddSubscriptionPrefix(symbols);
    b_cancel_subscription = false;

    std::tr1::function < int (const string& , const MessageInfo* , const void* , const int , const void* ) > dssCallBack;
    dssCallBack = &DataserviceSubscriber::mDBtoDScallback;

    dss->Subscribe(dssCallBack, static_cast<const void*>(&cbData));

    return 0;
} 
```

回调本身看起来像

```
int ABC::mDBtoDScallback(const string& strTopic, const MessageInfo* messageInfo, const void* data, const int dataLen, const void* callback_data)
{
    const DBtoDS_callback_data* cbData = static_cast<const DBtoDS_callback_data*>(callback_data);

    if(0 == messageInfo) // Version 1
    {
        // Do callback Stuff
    }
    else // Version 2
    {
        Subscriber::timeval_t now;
        TimeUtils::now(now);
        std::string payload(static_cast<const char*>(data), dataLen);

        // Do callback Stuff
    }
} 
```

`int ABC::mDBtoDScallback`正如 WhozCraig 所猜测的那样，该功能并不是静态的。那是问题吗？我无法使此函数中使用的某些变量成为静态变量。有什么办法可以解决这个问题，还是我必须使用 C 风格的函数指针？

谢谢。

编辑 2：根据 nm 和 WhozCraig 的关注以及此链接[C++: Assigning a function to a tr1::function object](https://stackoverflow.com/questions/7999304/c-assigning-a-function-to-a-tr1function-object?rq=1)

我将 ABC::subs_rt 函数中的行更改为

```
std::tr1::function < int (const string& , const MessageInfo* , const void* , const int , const void* ) > dssCallBack;
//dssCallBack = std::tr1::bind(&ABC::mDBtoDScallback, this, std::tr1::placeholders::_1);
dssCallBack = std::tr1::bind(&ABC::mDBtoDScallback, this); 
```

我尝试了已注释和未注释的选项，但现在出现此错误

```
In file included from /usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1/functional:56,
                 from ../src/bmrk/databus/ABC.hpp:17,
                 from ../src/bmrk/databus/ABC.cpp:1:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional: In member function ‘typename std::tr1::result_of<_Functor(typename std::tr1::result_of<std::tr1::_Mu<_Bound_args, std::tr1::is_bind_expression::value, (std::tr1::is_placeholder::value > 0)>(_Bound_args, std::tr1::tuple<_UElements ...>)>::type ...)>::type std::tr1::_Bind<_Functor(_Bound_args ...)>::__call(const std::tr1::tuple<_UElements ...>&, std::tr1::_Index_tuple<_Indexes ...>) [with _Args = const std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, const MessageInfo*&, const void*&, int&, const void*&, int ..._Indexes = 0, _Functor = std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>, _Bound_args = ABC*]’:
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:1191:   instantiated from ‘typename std::tr1::result_of<_Functor(typename std::tr1::result_of<std::tr1::_Mu<_Bound_args, std::tr1::is_bind_expression::value, (std::tr1::is_placeholder::value > 0)>(_Bound_args, std::tr1::tuple<_UElements ...>)>::type ...)>::type std::tr1::_Bind<_Functor(_Bound_args ...)>::operator()(_Args& ...) [with _Args = const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, const MessageInfo*, const void*, int, const void*, _Functor = std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>, _Bound_args = ABC*]’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:1654:   instantiated from ‘static _Res std::tr1::_Function_handler<_Res(_ArgTypes ...), _Functor>::_M_invoke(const std::tr1::_Any_data&, _ArgTypes ...) [with _Res = int, _Functor = std::tr1::_Bind<std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>(ABC*)>, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:2005:   instantiated from ‘std::tr1::function<_Res(_ArgTypes ...)>::function(_Functor, typename __gnu_cxx::__enable_if<(! std::tr1::is_integral::value), std::tr1::function<_Res(_ArgTypes ...)>::_Useless>::__type) [with _Functor = std::tr1::_Bind<std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>(ABC*)>, _Res = int, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:1885:   instantiated from ‘typename __gnu_cxx::__enable_if<(! std::tr1::is_integral::value), std::tr1::function<_Res(_ArgTypes ...)>&>::__type std::tr1::function<_Res(_ArgTypes ...)>::operator=(_Functor) [with _Functor = std::tr1::_Bind<std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>(ABC*)>, _Res = int, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]’
../src/bmrk/databus/ABC.cpp:266:   instantiated from here
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:1137: error: no match for call to ‘(std::tr1::_Mem_fn<int (ABC::*)(const std::string&, const MessageInfo*, const void*, int, const void*)>) (ABC*&)’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:546: note: candidates are: _Res std::tr1::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Class&, _ArgTypes ...) const [with _Res = int, _Class = ABC, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/tr1_impl/functional:551: note:                 _Res std::tr1::_Mem_fn<_Res (_Class::*)(_ArgTypes ...)>::operator()(_Class*, _ArgTypes ...) const [with _Res = int, _Class = ABC, _ArgTypes = const std::string&, const MessageInfo*, const void*, int, const void*]
make[1]: *** [ABC.lo] Error 1 
```

问题的解决方案：鉴于我的要求，决定让我的回调成为静态成员函数，并通过`const void* callback_data`. 作为一个静态函数，它可以访问 ABC 类的私有函数并将参数传递给`raw_callback`. 我从所有评论中获得的帮助对我来说是一次重要的学习经历，并最终引导我找到了解决方案。

```
static int ABC::mDBtoDScallback(const string& strTopic, const MessageInfo* messageInfo, const void* data, const int dataLen, const void* callback_data)
{
    const DBtoDS_callback_data* cbData = static_cast<const DBtoDS_callback_data*>(callback_data);

    TimeUtils::now(now);
    std::string payload(static_cast<const char*>(data), dataLen);

    string symbol;
    string sym;
    int pri_s = 0;

    if(0 == messageInfo)
    {
        parse_topic(strTopic, symbol, pri_s, cbData->err);
    }
    else
    {
        symbol = messageInfo->key();
        pri_s = ( messageInfo->has_pri_s() ? messageInfo->pri_s() : 0 );
    }
    if (cbData->subs->symbols_need_translation())
    {
        cbData->subs->translate_symbol(cbData->subs->_translator, symbol, sym, false);
    }
    else
    {
        sym = symbol;
    }

    cbData->subscriber_callback(cbData->subs, sym, pri_s, cbData->subs->prod, payload, now, cbData->raw_callback_app_data, cbData->err);
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T19:51:15.577

来源很简单，如果你知道在哪里看的话。考虑以下代码：

```
std::tr1::function < int (const string& , const MessageInfo* , const void* , const int , const void* ) > dssCallBack;
dssCallBack = &ABC::mDBtoDScallback;
dssCallBack(std::string(), nullptr, nullptr, 0, nullptr); 
```

是什么`this`？你从来没有提供过。所以没有办法`std::function`可以使这项工作 - 你试图调用一个成员但没有提供一个对象。`std::function`应该做什么，神奇地决定`this`应该做什么？

这两种解决方案是绑定一个`this`using`std::bind`或`this`作为参数传递，如`std::mem_fn`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T19:39:24.023

正如评论中所讨论的，问题似乎是因为您的函数对象需要一个静态的非对象绑定函数，而您实际上是在向它传递一个成员。据我所知，有几种解决方法，您可能已经在考虑最简单的一种；使用静态并将对象的指针作为参数传递。

或者，我不知道这是否适用于您的特定体系结构，但以下内容快速汇总，介绍了如何使用 an`std::mem_fn<>`和 a 结合使用指定对象调用成员函数`std::function<>`。这是一个独立的示例，但我希望您能看到它对您的帮助。

```
#include <iostream>
#include <functional>
using namespace std;

class MyClass
{
public:
    MyClass() {}

    int CallMe(void *p, int a, float f)
    {
        // use params herere
        cout << "CallMe fired : " << this << " !\n" << endl;
        return 0;
    }
};

int main()
{
    MyClass obj, obj2;
    std::function<int(MyClass*,void*,int,float)> fn(std::mem_fn(&MyClass::CallMe));

    cout << "Invoking CallMe with " << &obj << " object..." << endl;
    fn(&obj, NULL, 1, 2.0);

    cout << "Invoking CallMe with " << &obj2 << " object..." << endl;
    fn(&obj2, NULL, 1, 2.0);

    return 0;
} 
```

**输出**

```
Invoking CallMe with 0x7fff5fbff7d8 object...
CallMe fired : 0x7fff5fbff7d8 !

Invoking CallMe with 0x7fff5fbff7d0 object...
CallMe fired : 0x7fff5fbff7d0 ! 
```

**笔记**

[在cppreference.com](http://en.cppreference.com/w/cpp/utility/functional/mem_fn)上阅读 C++11 中提供的关于成员函数对象如何工作的文章让我*着迷。*并不是说有人真正关心这一点。我不知道他们是否正确地发送到虚拟机等，但我对他们绝对感到惊讶。

我希望这对您有所帮助，但如果一位真正了解 std::function、std::bind 和 std::men_fn 深度的 std-lib 专家提供更简洁的解释，我完全准备好删除它（或将此片段撕成碎片）。老实说，在 SO 上调用成员的地方可能有更好的示例 through `std::function<>`，但我不得不说使用`std::men_fn<>`with的简单性相当吸引人。`std::function<>`

* * *

**虚拟调度**

在寻求 DeadMG 的评论后，我真的很好奇虚拟调度是否有效。我认为这是一个很好的机会，因为我们提供了一个`this`指针，但并没有屏住呼吸，因为显然我们将`MyClass::CallMe`成员按地址传递给了`std:::mem_fn<>`.

更新的源代码和运行结果很有趣。注意两个实例中使用的同一个函数对象。它是否打算以这种方式工作（它似乎是，顺便说一句）我不能说，但它对我来说很有趣，尽管如此。

```
#include <iostream>
#include <functional>
using namespace std;

class MyClass
{
public:
    MyClass() {}

    virtual int CallMe(void *p, int a, float f)
    {
        // use params herere
        cout << "MyClass::CallMe fired : " << this << endl;
        return 0;
    }
};

class MyDerived : public MyClass
{
public:
    MyDerived() {}

    virtual int CallMe(void *p, int a, float f)
    {
        // use params herere
        cout << "MyDerived::CallMe fired : " << this << endl;
        return 0;
    }
};

int main()
{
    MyClass obj;
    MyDerived obj2;

    std::function<int(MyClass*,void*,int,float)> fn(std::mem_fn(&MyClass::CallMe));

    cout << "Invoking CallMe with " << &obj << " object..." << endl;
    fn(&obj, NULL, 1, 2.0);

    cout << "Invoking CallMe with " << &obj2 << " object..." << endl;
    fn(&obj2, NULL, 1, 2.0);

    return 0;
} 
```

**输出**

```
Invoking CallMe with 000000000021FB58 object...
MyClass::CallMe fired : 000000000021FB58
Invoking CallMe with 000000000021FB78 object...
MyDerived::CallMe fired : 000000000021FB78 
```

# visual-studio-2010 - VS2010 日历控件日期不正确

> ID：14323965
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:00:02.003
> 
> 标签：visual-studio-2010, calendar, calendar-control

以下问题是我在 ASP.NET 页面（框架 4.0）中有 3 个日历控件（不同 ID），日历控件不可见，但是当我单击一个按钮时，它会打开并让您选择一个日期，一切都很好直到我打开第二个日历控件，当我选择不同的日期时，它会设置上一个日期（来自日历控件 1）

**日历控制代码**

```
Protected Sub Calendar1_AddDataControl_SelectionChanged(sender As Object, e As EventArgs) Handles Calendar1_AddDataControl.SelectionChanged
    TextBox6_AddDataControl.Text = Calendar1_AddDataControl.SelectedDate.ToShortDateString
    Calendar1_AddDataControl.Visible = False
End Sub 
```

示例：控制 1 日期：01/14/2013 控制 2 日期：01/14/2013 但我选择了 02/05/2013 控制 3 日期：01/14/2013 但我选择了 02/06/2013

我做了功课，试图阅读以前的问题，浏览互联网，但我无法找到解决方案，我是使用 Visual Studio 2010 在 ASP.Net 中编码的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:11:57.440

我了解您的处理程序方法都具有相同的主体，除了 TextBox 标识符。当您在 中选择日期时`Calendar2_AddDataControl`，您希望将其`SelectedDate`值用于 TextBox。Calendar2 的处理程序方法如下所示：

```
Protected Sub Calendar2_AddDataControl_SelectionChanged(sender As Object, e As EventArgs) Handles Calendar2_AddDataControl.SelectionChanged
    // Display SelectedDate of Calendar_2_
    TextBox7_AddDataControl.Text = Calendar2_AddDataControl.SelectedDate.ToShortDateString
    Calendar2_AddDataControl.Visible = False
End Sub 
```

假设它是 TextBox7 应该显示其选定的日期。

# java - 卷轴不出现

> ID：14323966
> 
> 赞同：1
> 
> 时间：2013-01-14T18:00:05.340
> 
> 标签：java, swing, jframe, jpanel, jscrollpane

我想将 JScrolpane 添加到 JPanel，但没有出现。在 JLabel 中工作正常且非常简单。我正在使用 JPanel，因为我会在我的程序中添加一些图像处理的东西。有我的代码：

```
public void draw(){  
 panel=new JPanel(){
        protected void paintComponent(Graphics g){
            Graphics g2 = g.create();
            g2.drawImage(image, 0, 0, this);
            g2.dispose();             
        }         
 };   
 panel.setBorder(BorderFactory.createEtchedBorder());
 panel.setPreferredSize(new Dimension(400, 330));
 s=new JScrollPane(panel);
 s.setPreferredSize(new Dimension(400,285));
 this.getContentPane().add(s,BorderLayout.CENTER);
 add(panel);
 revalidate();  
 repaint();     
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:12:12.943

你不尊重*油漆链*，`super.paintComponent(g)`在被覆盖的方法中作为第一个调用调用`paintComponent`。IE

```
@Override
protected void paintComponent(Graphics g){ 
      super.paintComponent(g); 
      //draw here
} 
```

或可能出现视觉伪影。

*   还要注意`@Override`应该与覆盖方法一起使用的注释，以便获得编译器检查我们是否正确覆盖方法的优势。

*   无需`getContentPane().add(..)`简单地调用 add on `JFrame`instance`add(..)`并已转发`remove(..)`到s *contentPane*`setLayout(..)``JFrame`

**   扩展也不是一个好主意`JFrame`，只需创建一个实例并使用它，即：

    ```
    JFrame frame=new JFrame("Title here");
    ...
    frame.add(..);
    ...
    frame.pack();
    frame.visible(true); 
    ```

    *   还要绘制到`Graphics`传递给paintComponent的对象上，`g`不要去创建你自己的`paintComponent`。当然，除非您出于以下评论中提到的@HFOE 的原因而这样做:)。

    *   不需要`this`参数 in`drawImage(..)`除非您的`JPanel`工具打开`ImageObserver`或绘画时图像可能未完全加载。只需使用`null`.

    *   并且只是为了顶部的樱桃使用一些[`Graphics2D`](http://docs.oracle.com/javase/7/docs/api/java/awt/Graphics2D.html)和在[这里](https://stackoverflow.com/questions/14323068/java-how-to-add-string-below-an-image-and-resizing-it/14323395#14323395)[`RenderHints`](http://docs.oracle.com/javase/7/docs/api/java/awt/RenderingHints.html)看到的。这将允许绘制质量更好的图像和文本。* 

 ** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T18:08:52.963

```
 s=new JScrollPane(panel);
 s.setPreferredSize(new Dimension(400,285));
 this.getContentPane().add(s,BorderLayout.CENTER);
 add(panel); // ****** ????????????
 revalidate();  
 repaint();     
} 
```

您将 JPanel 添加到 GUI 而不是 JScrollPane，因此如果没有在任何地方添加滚动窗格，您真的不应该期望看到任何滚动窗格。

解决方案：将保存 JPanel 的 JScrollPane s 添加到 GUI，而不是 JPanel 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T14:49:49.727

我知道了！对我来说，主要原因是没有布局管理器并且没有声明它的大小。有我的代码：

```
public void draw(){
 panel=new JPanel(new BorderLayout()){
 @Override
        protected void paintComponent(Graphics g){
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g;
            g2d.drawImage(img, 0, 0, null);
        }         
 };   
 panel.setBounds(0, 0, img.getWidth(), img.getHeight());
 panel.setPreferredSize(new Dimension(img.getWidth(),obraz.getHeight()));
 JScrollPane scrolls=new JScrollPane(panel,ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED,ScrollPaneConstants.HORIZONTAL_SCROLLBAR_AS_NEEDED);

 add(scrolls);
 validate();  
 repaint();     
 } 
```

但是，如果将来有人想要复制此代码，则需要知道一件事-Jpanel 的大小不会令人耳目一新（它始终是第一个打开的图像的一个大小），但是我有 scrolll 并且我现在很满意； ）。非常感谢大家。*

# three.js - 无法将纹理发送到自定义着色器 (ShaderPass/EffectComposer)

> ID：14323970
> 
> 赞同：1
> 
> 时间：2013-01-14T18:00:12.510
> 
> 标签：three.js, textures, fragment-shader

我目前正在使用这个很棒的库，但是我在使用 EffectComposer 时遇到了一些困难。

我无法将纹理发送到 ShaderPass 引入的后处理着色器。

我认为这是一个错误......或者我正在做一些愚蠢的事情（needUpDate，warp，......？？）

（r54、W7、Nv9700mGT、FF 17.0.1 和 Chrome 24.0.1312.52）

我使用“webgl_postprocessing.html”示例通过添加这些着色器来重现这种现象：

```
<script id="vertexShaderBasic" type="x-shader/x-vertex">
    varying vec2 glTexCoord;

    void main() {
        glTexCoord = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    }
</script>

<script id="fragmentShaderBlender" type="x-shader/x-fragment">
    varying vec2 glTexCoord;
    uniform sampler2D sprite1;
    uniform sampler2D previousRender;

    void main() {
        vec3 color = texture2D( previousRender, glTexCoord ).rgb;
        color += texture2D( sprite1, glTexCoord ).rgb;
        gl_FragColor.rgb = color;
        gl_FragColor.a = 1.0;
    }
</script> 
```

这在主脚本的开头，以确保精灵已加载：

```
var composer2;
function start() {
    init();
    animate();
}
var sprite1 = THREE.ImageUtils.loadTexture( "textures/sprite1.jpg", null, start ); 
```

这在作曲家领域，之后：composer.addPass(new THREE.RenderPass(scene, camera));

```
composer2 = new THREE.EffectComposer( renderer );

var uniforms1 = {
    sprite1: { type: "t", value: sprite1 }, // <- something wrong here
    previousRender: { type: "t", value: null }
};

var blenderShader = {
    uniforms: uniforms1,
    vertexShader: $( 'vertexShaderBasic' ).textContent,
    fragmentShader: $( 'fragmentShaderBlender' ).textContent
};
// link with the previous render
blenderShader.uniforms.previousRender.value = composer.renderTarget2;
// the custom shader
var blenderPass = new THREE.ShaderPass( blenderShader );
blenderPass.renderToScreen = true;

composer2.addPass( blenderPass ); 
```

我也对此发表评论，因为它不再相关：

```
//effect.renderToScreen = true; 
```

我在最后添加了这个：

```
composer2.render(); 
```

两个通道之间的链接运行良好，但精灵从未出现在覆盖屏幕的 EffectComposer 四边形上......

谢谢和对不起我的英语。

**编辑回顾：**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - postprocessing</title>
        <meta charset="utf-8">
        <style>
            body {
                margin: 0px;
                background-color: #000000;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <script src="../build/three.min.js"></script>

        <script src="js/shaders/CopyShader.js"></script>
        <script src="js/shaders/DotScreenShader.js"></script>
        <script src="js/shaders/RGBShiftShader.js"></script>

        <script src="js/postprocessing/EffectComposer.js"></script>
        <script src="js/postprocessing/RenderPass.js"></script>
        <script src="js/postprocessing/MaskPass.js"></script>
        <script src="js/postprocessing/ShaderPass.js"></script>

        <script id="vertexShaderBasic" type="x-shader/x-vertex">

            varying vec2 glTexCoord;

            void main() {
                glTexCoord = uv;
                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
            }
        </script>

        <script id="fragmentShaderBlender" type="x-shader/x-fragment">

            varying vec2 glTexCoord;

            uniform sampler2D sprite1;
            uniform sampler2D previousRender;

            void main() {

                vec3 color = texture2D( previousRender, glTexCoord ).rgb;

                color += texture2D( sprite1, glTexCoord ).rgb;

                gl_FragColor.rgb = color;
                gl_FragColor.a = 1.0;
            }
        </script>

        <script>

            var camera, scene, renderer, composer;
            var composer2;
            var object, light;

            function start() {
                init();
                animate();
            }

            var sprite1 = THREE.ImageUtils.loadTexture( "textures/sprite1.jpg", null, start );
            //var sprite1 = THREE.ImageUtils.loadTexture( "textures/sprite1.jpg", new THREE.UVMapping(), start ); // change anything

            function init() {

                renderer = new THREE.WebGLRenderer();
                renderer.setSize( window.innerWidth, window.innerHeight );
                document.body.appendChild( renderer.domElement );

                //

                camera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 1, 1000 );
                camera.position.z = 400;

                scene = new THREE.Scene();
                scene.fog = new THREE.Fog( 0x000000, 1, 1000 );

                object = new THREE.Object3D();
                scene.add( object );

                var geometry = new THREE.SphereGeometry( 1, 4, 4 );
                var material = new THREE.MeshPhongMaterial( { color: 0xffffff, shading: THREE.FlatShading } );

                for ( var i = 0; i < 100; i ++ ) {

                    var mesh = new THREE.Mesh( geometry, material );
                    mesh.position.set( Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5 ).normalize();
                    mesh.position.multiplyScalar( Math.random() * 400 );
                    mesh.rotation.set( Math.random() * 2, Math.random() * 2, Math.random() * 2 );
                    mesh.scale.x = mesh.scale.y = mesh.scale.z = Math.random() * 50;
                    object.add( mesh );

                }

                scene.add( new THREE.AmbientLight( 0x222222 ) );

                light = new THREE.DirectionalLight( 0xffffff );
                light.position.set( 1, 1, 1 );
                scene.add( light );

                // postprocessing

                composer = new THREE.EffectComposer( renderer );
                composer.addPass( new THREE.RenderPass( scene, camera ) );

                /////////////////////////////////////
                /////////////////////////////////////

                composer2 = new THREE.EffectComposer( renderer );

                var uniforms1 = {
                    sprite1: { type: "t", value: sprite1 },
                    previousRender: { type: "t", value: null }
                };

                //uniforms1.sprite1.value.wrapS = uniforms1.sprite1.value.wrapT = THREE.RepeatWrapping;

                var blenderShader = {
                    uniforms: uniforms1,
                    vertexShader: $( 'vertexShaderBasic' ).textContent,
                    fragmentShader: $( 'fragmentShaderBlender' ).textContent
                };

                blenderShader.uniforms.previousRender.value = composer.renderTarget2;

                var blenderPass = new THREE.ShaderPass( blenderShader );
                blenderPass.renderToScreen = true;

                composer2.addPass( blenderPass );

                /////////////////////////////////////
                /////////////////////////////////////

                var effect = new THREE.ShaderPass( THREE.DotScreenShader );
                effect.uniforms[ 'scale' ].value = 4;
                composer.addPass( effect );

                var effect = new THREE.ShaderPass( THREE.RGBShiftShader );
                effect.uniforms[ 'amount' ].value = 0.0015;
                //effect.renderToScreen = true;
                composer.addPass( effect );

                //

                window.addEventListener( 'resize', onWindowResize, false );

            }

            function $( id ) {
                return document.getElementById( id );
            }

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }

            function animate() {

                requestAnimationFrame( animate );

                var time = Date.now();

                object.rotation.x += 0.005;
                object.rotation.y += 0.01;

                composer.render();
                composer2.render();
            }

        </script>

    </body>
</html> 
```

我想要的是 ：

[好的](http://flic.kr/p/dM9g9V)

我得到什么：

[不好](http://flic.kr/p/dMeQdb)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:28:14.590

试试这个

```
var sprite1 = THREE.ImageUtils.loadTexture( "textures/sprite1.jpg", new THREE.UVMapping(), start ); 
```

三.js r.54

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-13T18:06:27.473

我也遇到了这个问题，找到了解决方法。

我对其进行了调试以确定着色器通道中额外纹理的**纹理 ID**与预期不同，这很糟糕。如果您查看 ShaderPass 构造函数，您会看到它**克隆了 uniforms**。这似乎是原因。如果我编辑该代码以恢复克隆制服中的原始纹理对象，它会按预期工作。所以这也应该对你有用。

我正在尝试将某种（适当的）错误修复集成到实际版本中。

# vba - Excel VBA 单元格值在传递给数组时四舍五入

> ID：14323971
> 
> 赞同：1
> 
> 时间：2013-01-14T18:00:16.027
> 
> 标签：vba, excel

我希望这有一个简单的解决方案。我需要从工作表中获取值，执行计算并将它们插入到隐藏的工作表中（稍后上传到数据库中）。我通常不会在 VBA 中编程，所以我不确定我做错了什么。我的问题是：当我将数据从工作表复制到数组中时，当我指定 long 时，它们会像整数一样四舍五入。下面的代码片段将使您对问题有所了解。我初始化数组错误吗？

```
 Dim ThisWS As Worksheet
 Set ThisWS = Excel.ActiveWorkbook.Worksheets("BchSheet")
 Dim BTW() As Long                       'Beaker Tare Weight
 ReDim Preserve BTW(Samples)
 BTW(1) = ThisWS.Cells(18, 6).Value      'Value in cell is 98.7036
 MsgBox (ThisWS.Cells(18, 6).Value)      'Returns 98.7036
 MsgBox (BTW(1))                         'Returns 99 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:03:06.670

`Long`数据类型，如，`Integer`仅包含整数。

使用`Double`数据类型来存储小数，或者`Currency`如果您正在处理需要定点的计算或者您不想处理浮点数，则使用数据类型。

# css - 禁用 Phonegap 中 DIV 的弹跳/橡皮筋效果

> ID：14323972
> 
> 赞同：3
> 
> 时间：2013-01-14T18:00:20.577
> 
> 标签：css, cordova, horizontal-scrolling

我正在创建一个 Phonegap 应用程序并有一个固定高度的 div，我想在触摸时水平滚动。为此，我添加了一个：

```
-webkit-overflow-scrolling:touch; 
```

CSS 规则。它工作得很好，但是当我到达这个 div 的顶部和底部时，我想禁用反弹效果。弹跳效果会导致应用程序中出现一些不愉快的用户体验。

我确实有 Phonegap 选项

```
UIWebViewBounce 
```

设置为 NO，但这似乎不会影响这个 div。

有可能实现这一目标吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T09:03:33.210

只需修改您的以下首选项`config.xml`：

```
<preference name="DisallowOverscroll" value="true" /> 
```

# ms-access - Access - 使用带有 VB 的表单生成报告

> ID：14323977
> 
> 赞同：2
> 
> 时间：2013-01-14T18:00:27.323
> 
> 标签：ms-access

我有这张表（**TABLE1**）。

```
Name | IDCard | Class
Aba     123      A 
Ebe     456      B
Ibi     789      C 
```

我有这个查询（**QUERY1**）

```
SELECT Name, IDCard FROM TABLE1; 
```

然后，在 Report Assistant 中我选择**QUERY1**，打开生成的报告，它会显示**TABLE1**中的所有名称和 IDCard 。

所以现在我创建了一个表单，其中包含一个名为**NameStudents**的 ComboBox和一个用于预览结果的按钮。

最后，我打开 VB 为具有所选名称的报告编写过滤器，如下所示：

```
DoCmd.OpenReport stDocName, acPreview, , "[Name] =" & Me!NameStudents 
```

我只想要一个从表格中选择姓名并将它们放入组合框中的表单，然后用户选择一个学生，单击预览，然后将出现一个带有姓名和 IDCard 的报告。

我不知道为什么这不起作用。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T18:40:18.843

我的问题是当你硬编码名字时会发生什么？

```
DoCmd.OpenReport stDocName, acPreview, , "[Name] = John" 
```

我有这种感觉，你的名字实际上有空格，像这样：

```
DoCmd.OpenReport stDocName, acPreview, , "[Name] = John Smith" 
```

在这种情况下，您可能必须这样做

```
DoCmd.OpenReport stDocName, acPreview, , "[Name] = ""John Smith""" 
```

或者

```
DoCmd.OpenReport stDocName, acPreview, , "[Name] = """ & Me!NameStudents & """" 
```

# python - 如何增加 for 中的 i？

> ID：14323978
> 
> 赞同：-4
> 
> 时间：2013-01-14T18:00:27.743
> 
> 标签：python

我想将 i 的值增加 6 以读取包含 4 个答案的问题和正确答案字符的文件，例如：

```
A
Which sport uses the term LOVE ?
Tennis
Golf
Football
Swimming
B
What is the German word for WATER ?
Wodar
Wasser
Werkip
Waski 
```

我的代码：

```
fd = open(dFile)
lineas=fd.readlines()
fd.close()

for i in range(len(lineas)):
    print "CA:"+lineas[i]+"Q:"+lineas[i+1]+"A1:"+lineas[i+2]+"A2:"+lineas[i+3]+"A3:"+lineas[i+4]+"A4:"+lineas[i+5];
    i=i+6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T18:03:03.727

尝试使用 range 或 xrange 的“步长”参数：

```
fd = open(dFile)
lineas = fd.readlines()
fd.close()

for i in xrange(0, len(lineas), 6):
    print "CA:"+lineas[i]+"Q:"+lineas[i+1]+"A1:"+lineas[i+2]+"A2:"+lineas[i+3]+"A3:"+lineas[i+4]+"A4:"+lineas[i+5]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T18:03:35.973

[`range`](http://docs.python.org/2/library/functions.html#range)有一个可选`step`参数。

```
for i in range(0, 10, 3):
    print i  # Prints 0, 3, 6, 9 
```

对于您的情况，使用 6 的步长。

```
for i in range(0, len(lineas), 6): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T18:50:12.053

下面的代码片段说明了一种将输入文件中的每组六行视为一个元组的方法，这消除了一些笨拙的`lineas[i], lineas[i+1]` *etc*`zip`索引（以看起来笨拙的语句为代价）。第一个代码片段只是创建一个包含编号行的测试文件。

```
with open('eh','w') as fo:
    for i in range(19):
        fo.write('{}\n'.format(i))
...
with open('eh') as fi:
    for (ca,q,a1,a2,a3,a4) in zip(*[iter(fi.readlines())]*6):
        print "CA:"+ca+"Q:"+q+"A1:"+a1+"A2:"+a2+"A3:"+a3+"A4:"+a4 
```

这会产生类似的输出

```
CA:0
Q:1
A1:2
A2:3
A3:4
A4:5

CA:6
Q:7
A1:8
(etc) 
```

注意，我通常会写类似

```
print 'CA: {} Q: {} A1: {} A2: {} A3: {} A4: {}'.format(ca,q,a1,a2,a3,a4) 
```

代替

```
print "CA:"+ca+"Q:"+q+"A1:"+a1+"A2:"+a2+"A3:"+a3+"A4:"+a4 
```

# c# - 将数组声明从 VB.Net 转换为 C#

> ID：14323980
> 
> 赞同：-2
> 
> 时间：2013-01-14T18:00:32.657
> 
> 标签：c#, vb.net

我正在尝试将数组声明从 VB.Net 转换为 C#，但我正在苦苦挣扎。Vb 代码格式如下：

```
dim variableName() as typeName = {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:02:49.040

等效的 C# 代码将是：

```
var variableName = new typeName[0]; 
```

... 或者：

```
var variableName = new typeName[] {}; 
```

无论哪种情况，您都在创建一个新的空数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T18:02:49.010

您可以使用以下内容：

```
TypeName[] variableName = new TypeName[] { }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T18:02:37.423

听起来像你想要的：

```
typeName[] variableName = {}; 
```

例如：

```
string[] names = { "Fred", "Bill", "Jon" }; 
```

或者使用`var`和显式类型的数组创建表达式：

```
var names = new string[] { "Fred", "Bill", "Jon" }; 
```

或者使用`var`and 一个隐式类型的数组（当然，对于一个空数组来说不太好）：

```
var names = new[] { "Fred", "Bill", "Jon" }; 
```

# backbone.js - Backbone model.destroy()：是否需要从集合中显式删除？

> ID：14323981
> 
> 赞同：24
> 
> 时间：2013-01-14T18:00:37.830
> 
> 标签：backbone.js, backbone-events

我有一个简单的问题。我正在查看具有 2 行代码的函数：

```
deleteTask: function() {
    this.parent.collection.remove(this.model);
    this.model.destroy();
} 
```

如果我注释掉应该从集合中删除模型的第一行，事情似乎按预期工作（如模型被自动删除）。在 Backbone 的网站上，这是模型“销毁”功能的相关描述：

> 在模型上触发“销毁”事件，该事件将通过包含它的任何集合冒泡。

我可以安全地假设删除`this.parent.collection.remove(this.model);`不会以任何方式影响代码的功能吗？这是我的想法，但我想确认一下。

谢谢！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-14T18:52:03.240

如果您销毁一个模型，它将从包含它的任何集合中删除。[您可以在主干源代码](http://documentcloud.github.com/backbone/docs/backbone.html)中看到

```
//Internal method called every time a model in the set fires an event.
_onModelEvent: function(event, model, collection, options) {
    ...
    if (event === 'destroy') this.remove(model, options); 
```

所以是的，我认为您不需要明确地从您的集合中删除模型。

但是不要相信我，自己测试:)

```
deleteTask: function() {
    that = this;
    this.model.destroy({
      success: function() {
        console.log(that.parent.collection);
      }
    });
} 
```

亲自检查控制台以查看模型是否已从集合中删除。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-09-19T07:23:51.927

解决方案是覆盖 Backbone 模型破坏函数。我在一个带有成功和回调策略的抽象模型上做了这个：

参数“data”对应于原始参数“resp”。

```
destroy: function(successCallback, errorCallback) 
{
    var options = { wait: true };
    var model = this;

    successCallback = successCallback || function() {};
    errorCallback = errorCallback || function() {};               

    var destroy = function() 
    {
        model.trigger('destroy', model, model.collection, options);
    };

    options.success = function(data) 
    {
        if ('SUCCESS' === data.responseCode)
        {
            if (options.wait || model.isNew())
                destroy();

             successCallback(data);

            if (!model.isNew())
                model.trigger('sync', model, data, options);
        }
        else
        {
            errorCallback(data);
        }
    };

    if (this.isNew()) 
    {
        options.success();
        return false;
    }

    var xhr = this.sync('delete', this, options);

    if (!options.wait)
        destroy();

    return xhr;
} 
```

# .net - 控件之间的 WPF 更改

> ID：14323984
> 
> 赞同：4
> 
> 时间：2013-01-14T18:01:02.467
> 
> 标签：.net, wpf, visual-studio-2010, wpf-controls, devexpress

我有一个简单的应用程序，其中有一个包含一些操作的主屏幕，以及第二个屏幕，您可以在第一个屏幕完成并按下按钮时访问该屏幕。见图片：

![在此处输入图像描述](../Images/1893fdb71f5d94b7691d77163bbcabc4.png)

**棕色区域**是固定的左侧菜单，将始终出现在同一位置。 **蓝色区域**是从一个更改到另一个的屏幕。 **红色区域**正在尝试从 WindowsForms 模拟 MDIContainer。

**如何将该容器模拟为**：

1.  **维护左侧静态菜单**

2.  **由于某些事件/动作而动态更改我的内容？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:38:44.367

最好的方法是首先使用网格控件来布置控件（如 Blam 建议的那样），如下所示：

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <!-- Menu control. (Whichever you see fit. The menu could be established 
         within this control, or you could use a custom UserControl depending
         on your needs.) -->
    <StackPanel />

    <!-- Content control -->
    <ContentPresenter Name="ContentHolder" 
                      Grid.Column="1" />
</Grid> 
```

根据您的设计模式，有几种方法可以让您的内容按需要显示。

如果您使用的是 MVVM，则 ContentPresenter 控件可以*绑定*到主窗口数据上下文中的 ViewModel，如下所示：

```
 <ContentPresenter Name="ContentHolder" 
                      Grid.Column="1"
                      Content="{Binding ContentData}" /> 
```

您的 ViewModel 中将存在相应的属性，例如：

```
 public ViewModelBase ContentData{
      get { return _contentData; }
    } 
```

如果这对您来说很多希腊语，那么您可能没有使用 MVVM 作为您的设计模式。在这种情况下，主窗口类后面的代码可以处理使用事件处理程序设置 ContentPresenter 的内容。

您的事件处理程序的要点可能是这样的：

```
 public void HandleNavigationChange(SwitchCondition sc){
      UserControl newContent = null;

      switch (sc) {
        case SwitchCondition.NavigationItem1:
          newContent = new NavigationItem1();
          break;

        case SwitchCondition.NavigationItem1:
          newContent = new NavigationItem1();
          break;
        //ETC
      }

      ContentHolder.Content = newContent;
    } 
```

然后，您可以从菜单项单击中调用此方法，或者如果您愿意，可以从子控件中调用此方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T18:29:55.197

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="2*"/>
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <TextBlock Grid.Row="0" Grid.Column="0" Text="Static"/>
    <ContentControl x:Name="content1" Grid.Row="0" Grid.Column="1" Visibility="Visible" >
        <StackPanel>
            <TextBlock Text="One" />
            <Button Click="btn1_click" Content="Button1"/>
        </StackPanel>
    </ContentControl>
    <ContentControl x:Name="content2" Grid.Row="0" Grid.Column="1" Visibility="Hidden" >
        <StackPanel>
            <TextBlock Text="Two" />
            <Button Click="btn2_click" Content="Button2"/>
        </StackPanel>
    </ContentControl>
</Grid>

        private void btn1_click(object sender, RoutedEventArgs e)
        {
            content1.Visibility = System.Windows.Visibility.Hidden;
            content2.Visibility = System.Windows.Visibility.Visible;
        }

        private void btn2_click(object sender, RoutedEventArgs e)
        {
            content1.Visibility = System.Windows.Visibility.Visible;
            content2.Visibility = System.Windows.Visibility.Hidden;
        } 
```

如果您可以将上面的按钮放在菜单区域中
可以使用 Frame 和 Page 内容做我动态的东西
这个示例显示将数据传递给 Page 构造函数
nextPage 是一个 Page
也可以是一个 UserControl

```
<Frame Name="SrchItemEditField" />

PageDocFieldDetail nextPage = new PageDocFieldDetail(df);
SrchItemEditField.Content = nextPage; 
```

# c# - MVC4 web api一旦部署到网络服务器就找不到默认文档

> ID：14323987
> 
> 赞同：5
> 
> 时间：2013-01-14T18:01:20.310
> 
> 标签：c#, asp.net-mvc, iis-7, asp.net-web-api

它在本地主机上工作，但在网络服务器上找不到默认文档，并抱怨目录浏览被禁用。两者上的 IIS7，并且两个网站/应用程序池似乎配置相同。

我在VS2012中使用过web api模板，实际上并没有任何视图。它在 HomeController 中只有一个 Index 控制器动作。

关于为什么这会在两种环境中产生不同行为的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:10:00.060

所以这个添加到我的 web.config 中：

```
<system.webServer>
  <modules runAllManagedModulesForAllRequests="true" />
<system.webServer> 
```

解决了这个问题。Windows 2008 Server 上的 IIS7 的 web.config 中似乎需要它，但 Windows 7 上的 IIS7 不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T16:02:11.927

我有一个用户试图在 IIS7 上发布一个 MVC4 应用程序得到这个错误，事实证明这是因为用户已将应用程序池设置为使用 .Net 2 而不是 .Net 4。而不是得到一个错误指示虽然他们收到了上面的错误，只有当我们添加上面的模块时才发现真正的问题。

# c++ - 等待来自外部的特定调用的 QObject（类似于 QFuture 的异步结果包装器）

> ID：14323989
> 
> 赞同：0
> 
> 时间：2013-01-14T18:01:23.720
> 
> 标签：c++, qt, asynchronous, mutex, thread-synchronization

我想编写一个可以等待某人调用特定函数的类（QObject 派生）。然后这个类将用于保存异步操作的结果（在幕后它是一个远程过程调用）。该类的接口应如下所示：

```
class Result : public QObject
{
    Q_OBJECT
public:
    explicit Result(...);

signals:
    void done();

public slots:
    void setDone(const QVariant & result);

    // blocking functions to receive the result
    void waitForFinished();
    QVariant result() { waitForFinished(); return _result; }

private:
    QVariant result;
    ...
} 
```

当然，这个类应该是**线程安全的**，也就是说

*   等待结果的线程可能与调用的线程不同`setDone`
*   多个线程可以请求结果

也许这可以通过 QFuture 来完成。不过就算是，我也**想自己实现**一次这样的机制，以便学习Qt中的线程同步。如果您知道如何使用 QFuture 进行操作，您可以发表评论。

我想出的是以下内容。我还继承了`QMutex`一个类似于 Java 的机制`synchronize(this)`。另外，我添加了一个`bool _done`成员：

```
void Result::Result(...) :
    QObject(...),
    _done(false)
{
}

void Result::setDone(const QVariant & result)
{
    QMutexLocker synchronize(this);
    _result = result;
    _done = true;
    emit done();
}

void Result::waitForFinished()
{
    QMutexLocker synchronize(this);

    if (!_done) {
        QEventLoop loop;
        connect(this, SIGNAL(done()), &loop, SLOT(quit()));
        loop.exec();
    }
} 
```

这是一个正确的实现吗？

我的一个朋友想出的另一个解决方案是将互斥锁锁定在构造函数中，将结果标记为*not be done*。在`setDone`中，解锁互斥体，并`waitForFinished`使用等待条件等待互斥体解锁。我从未使用过`QWaitCondition`，所以我不知道这是否符合我的要求。

# mysql - MySQL 限制最近一年并使用 JOIN

> ID：14323990
> 
> 赞同：0
> 
> 时间：2013-01-14T18:01:23.967
> 
> 标签：mysql

我有以下代码，我想只选择最近的记录（因此我写了 max(a.fiscal_year) 除了查询返回每个会计年度。如何调整以下查询以仅返回最近的（最大）财政年度。

```
SELECT count(*), b.auditor_name, c.pubco_name, max(a.fiscal_year), a.month
FROM a_fees_view a, a_auditor b, a_pubco c
WHERE a.auditor_id = b.auditor_id AND a.pubco_id = c.pubco_id
GROUP BY a.auditor_id, a.pubco_id, a.fiscal_year
ORDER BY b.auditor_name, c.pubco_name, a.fiscal_year 
```

此外，我想从表中选择**所有**pubcos，`a_pubco`而不仅仅是表中也存在的那些`a_fees_view`。如何调整上面的查询以包含`a_fees_view`表和`a_pubco`表中的所有 pubco。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:19:50.010

这个问题的第一部分是 Top-N（或 Groupwise-max）查询。通常的语法如下：

```
SELECT x.*
  FROM my_table x
  JOIN (SELECT grouping_id, MAX(other_field) max_other_field FROM my_table GROUP BY grouping_id) y
    ON y.grouping_id = x.grouping_id
   AND y.max_other_field = x.other_field; 
```

考虑以下示例（受其他地方提出的问题启发）：

我有一个障碍赛的结果表。我想知道每匹马在哪场比赛中表现最好（以及他们取得的成绩）。

```
SELECT * FROM events;
+----------+----------+-------+
| Event_id | Horse_id | Place |
+----------+----------+-------+
|      601 |      101 |     1 |
|      601 |      102 |     2 |
|      601 |      201 |     3 |
|      601 |      301 |     4 |
|      602 |      201 |     2 |
|      603 |      201 |     3 |
|      701 |      101 |     1 |
|      801 |      301 |     2 |
|      901 |      102 |     7 |
+----------+----------+-------+ 
```

通过检查，我可以看到马 101 的最好成绩是她在两个项目中获得的“第一”，所以我希望将这两行都返回。马 102 的最佳成绩是“第二”，马 201 和马 301 也是如此。但是如何构建一个告诉我们这一点的查询呢？就是这样：

```
SELECT x.*
  FROM events x
  JOIN (SELECT horse_id,MIN(place) min_place FROM events GROUP BY horse_id) y
    ON y.horse_id = x.horse_id AND y.min_place = x.place;
+----------+----------+-------+
| Event_id | Horse_id | Place |
+----------+----------+-------+
|      601 |      101 |     1 |
|      601 |      102 |     2 |
|      602 |      201 |     2 |
|      701 |      101 |     1 |
|      801 |      301 |     2 |
+----------+----------+-------+ 
```

# java - 需要帮助来运行 RMI Registry

> ID：14323991
> 
> 赞同：3
> 
> 时间：2013-01-14T18:01:31.233
> 
> 标签：java, rmi

我正在用 JAVA 实现一个简单的 RMI 服务器客户端程序。我实际上是新手。我有四个 java 文件。

**堆栈.java**

```
import java.rmi.*;

public interface Stack extends Remote{

public void push(int p) throws RemoteException;
public int pop() throws RemoteException;
} 
```

**StackImp.java**

```
import java.rmi.*;
import java.rmi.server.*;

public class StackImp extends UnicastRemoteObject implements Stack{

private int tos, data[], size;

public StackImp()throws RemoteException{
    super();
}
public StackImp(int s)throws RemoteException{
    super();
    size = s;
    data = new int[size];
    tos=-1;     
}
public void push(int p)throws RemoteException{

    tos++;
    data[tos]=p;
}
public int pop()throws RemoteException{
    int temp = data[tos];
    tos--;
    return temp;
}

} 
```

**RMIServer.java**

```
import java.rmi.*;
import java.io.*;

public class RMIServer{

public static void main(String[] argv) throws Exception{

    StackImp s = new StackImp(10);
    Naming.rebind("rmi://localhost:2000/xyz", s);
    System.out.println("RMI Server ready....");
    System.out.println("Waiting for Request...");   

}
} 
```

**RMIClient.java**

```
import java.rmi.*;

public class RMIClient{

public static void main(String[] argv)throws Exception{

    Stack s = (Stack)Naming.lookup("rmi://localhost:2000/xyz"); 
    s.push(25);
    System.out.println("Push: "+s.push());

}
} 
```

我正在使用JDK1.5。我编译文件的顺序是，首先我编译 Stack.java 然后我编译 StackImp.java 然后我使用这个命令**rmic StackImp**这一切都成功了。但是当我尝试以这种方式运行注册表**rmiregistery 2000**时，命令提示符花费了太长时间。没啥事儿。我在家里的电脑上做这一切。而且这台电脑不在网络上。请建议我如何成功使用该程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T18:18:40.037

> 命令提示符花费了太长时间。没啥事儿。

什么都不应该发生 - 注册表正在运行，您现在可以从另一个命令提示符启动服务器。

或者，如果您只在这台机器上运行一个 RMI 服务器进程，您可以在与 RMI 服务器相同的进程中运行注册表：

```
import java.rmi.*;
import java.rmi.registry.*;
import java.io.*;

public class RMIServer{

  public static void main(String[] argv) throws Exception{

    StackImp s = new StackImp(10);
    Registry reg = LocateRegistry.createRegistry(2000);
    reg.rebind("xyz", s);
    System.out.println("RMI Server ready....");
    System.out.println("Waiting for Request...");   

  }
} 
```

这样您就不需要单独的`rmiregistry`命令，只需运行服务器（包括注册表），然后运行客户端（与在服务器进程中运行的注册表对话）。

# visual-studio - 如何在 MSTest 中的测试之间保留变量？

> ID：14323992
> 
> 赞同：13
> 
> 时间：2013-01-14T18:01:34.150
> 
> 标签：visual-studio, unit-testing, mstest

我正在使用 MSTest (VS2008)，我需要在测试之间保留一个变量。但是，变量会在每次测试之间重新初始化。

[根据this answer](https://stackoverflow.com/questions/2901219/ms-test-or-nunit/12821049#12821049)中提到的第三点，

> MSTest 总是为每个正在执行的测试方法实例化一个新的测试类实例。

有没有一种简单的方法可以在测试之间保持变量的值，或者以某种方式抑制这种行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T18:11:41.573

使用静态成员变量：

```
static int _test = 0;

[TestMethod]
public void __Test1()
{
    _test += 1;
    Assert.IsTrue(_test == 1);
}

[TestMethod]
public void __Test2()
{
    _test += 1;
    Assert.IsTrue(_test == 2);
} 
```

# php - 我如何才能在顶部的类别中添加最新电影，因为当我添加时会下降

> ID：14323993
> 
> 赞同：-1
> 
> 时间：2013-01-14T18:01:41.250
> 
> 标签：php

我怎么不能把最新的电影放在列表的顶部，因为当我添加新电影时我想通过 Id Desc 做一些像 ORDER 这样的想法但是如何，我是 php 的初学者，这个代码是由 dreamweaver cs5 生成的，可以帮助我有人用一段代码添加到顶部的推杆？

```
<?php require_once('Connections/filmconnexion.php'); ?>
    <?php
    if (!function_exists("GetSQLValueString")) {
    function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue = "") 
    {
      if (PHP_VERSION < 6) {
        $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
      }

      $theValue = function_exists("mysql_real_escape_string") ? mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

      switch ($theType) {
        case "text":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;    
        case "long":
        case "int":
          $theValue = ($theValue != "") ? intval($theValue) : "NULL";
          break;
        case "double":
          $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
          break;
        case "date":
          $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
          break;
        case "defined":
          $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
          break;
      }
      return $theValue;
    }
    }

    $maxRows_DataCategoria = 12;
    $pageNum_DataCategoria = 0;
    if (isset($_GET['pageNum_DataCategoria'])) {
      $pageNum_DataCategoria = $_GET['pageNum_DataCategoria'];
    }
    $startRow_DataCategoria = $pageNum_DataCategoria * $maxRows_DataCategoria;

    $varCategoria_DataCategoria = "0";
    if (isset($_GET["cat"])) {
      $varCategoria_DataCategoria = $_GET["cat"];
    }
    mysql_select_db($database_filmconnexion, $filmconnexion);
    $query_DataCategoria = sprintf("SELECT * FROM tbl_film WHERE tbl_film.intCategoria = %s ", GetSQLValueString($varCategoria_DataCategoria, "int"));
    $query_limit_DataCategoria = sprintf("%s LIMIT %d, %d", $query_DataCategoria, $startRow_DataCategoria, $maxRows_DataCategoria);
    $DataCategoria = mysql_query($query_limit_DataCategoria, $filmconnexion) or die(mysql_error());
    $row_DataCategoria = mysql_fetch_assoc($DataCategoria);

    if (isset($_GET['totalRows_DataCategoria'])) {
      $totalRows_DataCategoria = $_GET['totalRows_DataCategoria'];
    } else {
      $all_DataCategoria = mysql_query($query_DataCategoria);
      $totalRows_DataCategoria = mysql_num_rows($all_DataCategoria);
    }
    $totalPages_DataCategoria = ceil($totalRows_DataCategoria/$maxRows_DataCategoria)-1;
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:06:00.883

更改这行代码

```
$query_limit_DataCategoria = sprintf("%s ORDER BY id DESC LIMIT %d, %d", $query_DataCategoria, $startRow_DataCategoria, $maxRows_DataCategoria); 
```

# c# - 没有副本的 C# 数组切片

> ID：14323994
> 
> 赞同：9
> 
> 时间：2013-01-14T18:01:55.643
> 
> 标签：c#, arrays, performance, slice, space-efficiency

我想将一个 C# 数组的子集传递给一个方法。我不在乎该方法是否会覆盖数据，因此希望避免创建副本。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T18:03:33.407

更改方法以采用`IEnumerable<T>`or `ArraySegment<T>`。

然后你可以通过`new ArraySegment<T>(array, 5, 2)`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-08-07T12:28:42.853

在 C# 7.2 中，我们拥有`Span<T>`. 您可以对数组使用扩展方法`AsSpan<T>`并将其传递给方法，而无需复制切片部分。例如：

```
Method( array.AsSpan().Slice(1,3) ) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-14T18:18:50.740

您可以使用以下类。请注意，您可能需要修改它，具体取决于您`endIndex`是要包含还是排他。您还可以修改它以获取开始和计数，而不是开始和结束索引。

我故意没有添加可变方法。如果您特别*想要*它们，那么添加起来很容易。`IList`如果添加可变方法，您可能还想实现。

```
public class Subset<T> : IReadOnlyList<T>
{
    private IList<T> source;
    private int startIndex;
    private int endIndex;
    public Subset(IList<T> source, int startIndex, int endIndex)
    {
        this.source = source;
        this.startIndex = startIndex;
        this.endIndex = endIndex;
    }

    public T this[int i]
    {
        get
        {
            if (startIndex + i >= endIndex)
                throw new IndexOutOfRangeException();
            return source[startIndex + i];
        }
    }

    public int Count
    {
        get { return endIndex - startIndex; }
    }

    public IEnumerator<T> GetEnumerator()
    {
        return source.Skip(startIndex)
            .Take(endIndex - startIndex)
            .GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T18:03:01.927

数组在大小上是不可变的（即您不能更改数组的大小），因此您只能传递原始数组的减法副本。作为选项，您可以将原始数组之外的两个索引传递到方法中，并在另外两个索引的基础上进行操作。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-01-14T18:05:59.807

您可以使用 Linq take funktion 并根据需要从数组中获取任意数量的元素

```
var yournewarray = youroldarray.Take(4).ToArray(); 
```

# c# - KML 控制可选功能（例如“导游”）

> ID：14323996
> 
> 赞同：1
> 
> 时间：2013-01-14T18:02:02.350
> 
> 标签：c#, kml, google-earth, google-earth-plugin

我是 KML 编程的新手，但已经完成了我需要做的大部分工作，即多个地图叠加层。

我想控制但没有找到方法的一件事是您可以通过 GoogleEarth.exe 菜单上的“查看”打开/关闭选项。

例如，如果我单独运行 Google 地球，打开“导游”（查看 > 导游），然后终止 Google 地球，当我启动与 Google 地球交互的应用程序时，导游照片条就会打开。如果我退出我的应用程序，重新运行 Google 地球，关闭导游，然后退出，那么下次我启动我的应用程序并启动 Google 地球时，导游会关闭。

是否有 KML 命令来控制此（“导游”）和其他可选功能？我想在我的应用程序中执行此操作，而不是强制用户按照我的应用程序想要的方式手动配置设置。

顺便说一句，我在 .NET Framework 4 中使用 C# 编写代码，使用 GoogleEarth 版本 7.0.2.8415，并在 Windows/XP 及更高版本上运行。

感谢您提供的任何帮助/指导！

*   约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T17:11:26.843

Google 地球在其扩展的 KML 命名空间中提供了其他元素，以实现诸如游览之类的事情（使用 gx: 前缀作为您在上面描述/已使用的那些 XML 元素）。在所有情况下，这些扩展元素都告诉 Google 地球如何与 KML 中的各种地理元素进行交互，并且无论如何都没有定义 Google 地球应用程序和插件的行为。

因此，简短的回答是开箱即用的 Google 地球，而 KML 无法实现您想要的行为。

**编辑**如果您在应用程序中使用 Google 地球插件，这里是控制游览的相关链接：[https ://developers.google.com/earth/documentation/reference/interface_g_e_tour_player](https://developers.google.com/earth/documentation/reference/interface_g_e_tour_player)