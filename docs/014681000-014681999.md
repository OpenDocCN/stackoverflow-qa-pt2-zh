# StackOverflow 问答 14681000-14681999

# terminal - 不明白这里的反斜杠

> ID：14681001
> 
> 赞同：10
> 
> 时间：2013-02-04T05:42:33.580
> 
> 标签：terminal

我在 github 的自述文件上遵循此命令来复制文件，但我不明白如何在终端中键入它，它有这个反斜杠，终端吐出我没有正确使用复制命令

```
cp -r rails_tutorial_sublime_text/* \
        ~/Library/Application\ Support/Sublime\ Text\ 2/Packages/User/ 
```

在这种情况下，我实际上在终端中输入了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-04T05:49:07.797

反斜杠后跟换行符表示命令继续到下一行。如果您愿意，您可以删除反斜杠并在同一行上键入所有内容。

# javascript - 使用纯 javascript 从 div 获取边框宽度

> ID：14681002
> 
> 赞同：26
> 
> 时间：2013-02-04T05:42:37.973
> 
> 标签：javascript, html, css

我将此样式应用于 div

```
div#content {
border: 1px solid skyblue;  
} 
```

我希望能够提醒边框的宽度，我已经尝试过：

```
window.alert( document.getElementById( "content" ).style.borderWidth ); 
```

我听说这取决于浏览器也许你可以帮助我我正在使用 Firefox 18

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-02-04T05:48:46.870

请尝试以下javascript：

```
alert($("#content").css("border-left-width")); //using jquery. 
```

或者

```
alert(getComputedStyle(document.getElementById('content'),null).getPropertyValue('border-left-width'));//without jquery. 
```

[`getComputedStyle`](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)（元素，伪）

element：获取样式的元素

伪：伪选择器，如 'hover' 或 null 如果不需要。

参考链接：http: [//javascript.info/tutorial/styles-and-classes-getcomputedstyle](http://javascript.info/tutorial/styles-and-classes-getcomputedstyle)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-20T05:31:58.890

我可能为时已晚，但由于您从未将其标记为已回答，因此我想我可以尝试一下。

如果您的问题是浏览器之间的兼容性，我将创建一个自定义方法，我可以在几乎所有浏览器中使用它（这意味着要回到最基本的问题）。

我实际上挖了很多东西来做到这一点。我使用 jQuery 中的一些代码，因为我不想使用 jQuery，但仍然具有 jQuery 的向后兼容性。

**此功能解决了您的问题，底部有一些关于如何使用它的示例。**

此函数通过立即函数使用“模块模式”，该函数将在脚本加载后立即运行，创建一个不会污染全局范围但通过函数扩展其功能以执行您想要的操作的方法。

```
// I give it a name but it can also be anonymous
(function preloadedFunctions(){
    // Preseted methods.
    if(window.getComputedStyle){
        window.getComputedStylePropertyValue = function(element, prop){
            var computedStyle = window.getComputedStyle(element, null);
            if(!computedStyle) return null;
            if(computedStyle.getPropertyValue) {
                return computedStyle.getPropertyValue(prop);
            } else if (computedStyle.getAttribute) {
                return computedStyle.getAttribute(prop);
            } else if(computedStyle[prop]) {
                return computedStyle[prop];
            };
        };
    }
    // jQuery JavaScript Library v1.9.0
    // http://www.minhacienda.gov.co/portal/pls/portal/PORTAL.wwsbr_imt_services.GenericView?p_docname=6240612.JS&p_type=DOC&p_viewservice=VAHWSTH&p_searchstring=
    // For IE8 or less
    else if ( document.documentElement.currentStyle ) {
        var rnumnonpx = new RegExp( "^(" + core_pnum + ")(?!px)[a-z%]+$", "i" ),
        rposition = /^(top|right|bottom|left)$/,
        core_pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;
        window.getComputedStylePropertyValue = function(element, prop){
            var left, rsLeft,
            ret = element.currentStyle && element.currentStyle[ prop ],
            style = element.style;

            if ( ret == null && style && style[ prop ] ) {
                ret = style[ prop ];
            }
            if ( rnumnonpx.test( ret ) && !rposition.test( prop ) ) {
                left = style.left;
                rsLeft = element.runtimeStyle && element.runtimeStyle.left;
                if ( rsLeft ) {
                    element.runtimeStyle.left = element.currentStyle.left;
                }
                style.left = prop === "fontSize" ? "1em" : ret;
                ret = style.pixelLeft + "px";
                style.left = left;
                if ( rsLeft ) {
                    element.runtimeStyle.left = rsLeft;
                }
            }
            return ret === "" ? "auto" : ret;
        };
    };
})(); 
```

IE

1.-

```
var borderWidth = getComputedStylePropertyValue(document.getElementsByTagName("div")[0], "border-width");
console.log(borderWidth); 
```

2.-

```
var div = document.getElementById("someID");
console.log(getComputedStylePropertyValue(div, "border-width")); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-08T11:43:59.620

如果有人还在寻找，这似乎是使用纯 JS 实现它的最简单方法。

```
let border = 
+getComputedStyle((document.getElementById("idOfYourElement")))
.borderTopWidth.slice(0, -2) 
```

下面的解释：
`document.getElementById("idOfYourElement")`- 返回我们的 HTML 元素。

`getComputedStyle`- 将所选元素的 css 属性作为对象返回。

`.borderTopWidth`- 对象的相应属性`getComputedStyle`（返回数组，如下所示：）`("10px")`。

`.slice(0, -2)`- 从我们的数组中删除最后 2 个字符，以便我们在最后摆脱 px。

在`+`开始时 - 将包含我们想要的数字的字符串的其余部分解析为整数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-06-08T12:17:50.183

你可以试试这个

```
var border =  document.getElementById("yourDiv").clientWidth - document.getElementById("yourDiv").offsetWidth; 
alert(border); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-08-28T06:03:16.177

Very old question, but anyway...

This solution is **plain JavaScript**, and should work in older browsers too. It measures the size of the element, *with*, and *without* borders.

The following example should work correctly if the borders around the element are all the same size. If not, the procedure doesn't change much, you just have to set the borders equal to zero, one by one.

```
var ele=document.getElementById("content");
// measures the element width, WITH borders
var w=ele.offsetWidth;
var cssBackup=ele.style.cssText;
// sets the borders to zero
ele.style.border="0px";
// computes the border size
var bord=(w-ele.offsetWidth)/2;
// resets the css
ele.style.cssText=cssBackup;
alert(bord); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-31T03:25:36.410

当左右边框宽度相同时：

```
function getWidth(div) {
   return (div.offsetWidth - div.clientWidth) /2
}
getWidth(document.querySelector('#content')) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T05:46:50.373

根据[W3Schools](http://www.w3schools.com/jsref/prop_style_borderwidth.asp)的说法，主要浏览器都支持此属性。因此，您在使用它时应该没有任何困难。

但是，使用像 jQuery 这样的 JavaScript 框架总是可以帮助您不必担心这样的琐碎问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-17T16:23:26.033

为我工作

```
let content = document.querySelector('#content');

// here 'borderWidth' is similar to element.style syntax
let contentBorderWidth = getComputedStyle(content).borderWidth; // 1px

// number, without 'px'
let contentBorderWidthNumber = parseFloat(getComputedStyle(content).borderWidth); // 1

// demo
content.innerHTML = contentBorderWidth +', '+ contentBorderWidthNumber;

// in your case, to alert 
window.alert(contentBorderWidth +', '+ contentBorderWidthNumber);
```

```
div#content {
  border: 1px solid skyblue;  
}
```

```
<div id="content"></div>
```

更多关于[getComputedStyle](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle)。

# python - Python：如何在我的评分系统计算器中添加“最终成绩”转换器

> ID：14681005
> 
> 赞同：0
> 
> 时间：2013-02-04T05:43:21.880
> 
> 标签：python

我有点想知道该怎么做，但我无法弄清楚。该程序需要能够获取学生姓名和三个考试成绩，然后得到三个分数的平均分（百分比）。之后，您需要将分数（百分比）转换为成绩。

**编辑：** 我将如何删除成绩中间的空格和“%”？

*   请按“Enter”开始
*   输入您的姓名：乔丹·辛普森
*   初试成绩：67%
*   第二次考试成绩：78%
*   第三次考试成绩：89%
*   最终字母等级：C+
*   乔丹辛普森测试分数是：**78.0 %**
*   是否要重新启动程序？

* * *

**分级量表：**

![分级量表](../Images/0ec6188d931c1b5b205357c45883e375.png)

* * *

```
input ('Please press "Enter" to begin')

while True:
    import math

    studentName = str(input('Enter your Name: '))
    firstScore = int(float(input('First test score: ').replace('%', '')))
    secondScore = int(float(input('Second test score: ').replace('%', '')))
    thirdScore = int(float(input('Third test score: ').replace('%', '')))
    scoreAvg = (firstScore + secondScore + thirdScore) / 3

    def grade():
        if scoreAvg >= 93 and <= 100:
            return 'A'
        if scoreAvg <= 92.9 and >= 89:
            return 'A-'
        if scoreAvg <= 88.9 and >= 87:
            return 'B+'
        if scoreAvg <= 86.9 and >= 83:
            return 'B'
        if scoreAvg <= 82.9 and >= 79:
            return 'B-'
        if scoreAvg <= 78.9 and >= 77:
            return 'C+'
        if scoreAvg <= 76.9 and >= 73:
            return 'C'
        if scoreAvg <= 72.9 and >= 69:
            return 'C-'
        if scoreAvg <= 68.9 and >= 67:
            return 'D+'
        if scoreAvg <= 66.9 and >= 60:
            return 'D'
        return 'F'

    print(grade(scoreAvg))
    print(studentName, "test score is: ",scoreAvg,'%')

    endProgram = input ('Do you want to restart the program?')

    if endProgram in ('no', 'No', 'NO', 'false', 'False', 'FALSE'):
        break 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T06:01:21.157

不太确定您的问题是什么，但这是获得字母等级的更简洁的方法。

```
>>> scores = [93, 89, 87, 83, 79, 77, 73, 69, 67, 60, 0]
>>> grades = ['A', 'A-', 'B+', 'B', 'B-', 'C+', 'C', 'C-', 'D+', 'D', 'F']
>>> 
>>> def gradeFor(s):
...     grade_scores = zip(scores, grades)
...     for score, grade in grade_scores:
...        if s >= score:
...            return grade

>>> gradeFor(87)
B+
>>> gradeFor(89)
A-
>>> gradeFor(88)
B+
>>> gradeFor(67)
D+
>>> gradeFor(72)
C-
>>> gradeFor(40)
F 
```

另外，你可以做

```
if endProgram.lower() in ('no', 'false'): 
```

# java - 如何使用 scribe 在 jsp 页面中显示 response.getBody()

> ID：14681007
> 
> 赞同：0
> 
> 时间：2013-02-04T05:43:22.270
> 
> 标签：java, jsp, struts2, oauth-2.0, scribe

在这里，我想获取一个人的所有联系人邮件 ID。此代码重定向到谷歌站点，并在获取令牌和验证器后返回状态代码和在控制台上打印的正文。我想在 jsp 页面中显示 response.getBody()(一个人的所有邮件联系人)。这该怎么做？

```
public class googleOaoth extends ActionSupport {

private static final String NETWORK_NAME = "Google";
private static final String AUTHORIZE_URL = "https://www.google.com/accounts/OAuthAuthorizeToken?oauth_token=";
private static final String PROTECTED_RESOURCE_URL = "https://www.google.com/m8/feeds/contacts/default/full";
private static final String SCOPE = "https://www.google.com/m8/feeds";
OAuthService service = new ServiceBuilder().provider(GoogleApi.class).apiKey("www.mysite").apiSecret("****").scope(SCOPE).callback("http://mysite/mypage").build();
Token requestToken;
private String url;
private String oauth_verifier;
private String oauth_token;

public String getOauth_verifier() {
    return oauth_verifier;
}

public Token getRequestToken() {
    return requestToken;
}

public void setRequestToken(Token requestToken) {
    this.requestToken = requestToken;
}

public void setOauth_verifier(String oauth_verifier) {
    this.oauth_verifier = oauth_verifier;
}
Map session = ActionContext.getContext().getSession();
 //method which redirect to google page
public String LoginToGoogle() {

    System.out.println("=== " + NETWORK_NAME + "'s OAuth Workflow ===");
    System.out.println();

    // Obtain the Request Token
    System.out.println("Fetching the Request Token...");
    setRequestToken(service.getRequestToken());
    System.out.println("Got the Request Token!");
    System.out.println("(if your curious it looks like this: " + getRequestToken() + " )");
    System.out.println();
    session.put("googleAccessToken", getRequestToken());
    System.out.println("Now go and authorize Scribe here:");
    setUrl(AUTHORIZE_URL + getRequestToken().getToken());
    System.out.println(AUTHORIZE_URL + getRequestToken().getToken());

    return "redirect";
}
//after getting varification code this method will show body and res_code
public String acceptToken() {
    System.out.println("And paste the verifier here");
    System.out.print(">>");
    Verifier verifier = new Verifier(getOauth_verifier());
    System.out.println();

    // Trade the Request Token and Verfier for the Access Token
    System.out.println("Trading the Request Token for an Access Token...");
    //System.out.println("varifier : " + getOauth_verifier());
    // System.out.println("token  :" + getOauth_token());
    //requestToken = service.getRequestToken();
    setRequestToken((Token) session.get("googleAccessToken"));
    System.out.println("token  " + getRequestToken());
    Token accessToken = service.getAccessToken(getRequestToken(), verifier);//requestToken

    System.out.println("Got the Access Token!");
    System.out.println("(if your curious it looks like this: " + accessToken + " )");
    System.out.println();

    // Now let's go and ask for a protected resource!
    System.out.println("Now we're going to access a protected resource...");
    OAuthRequest request = new OAuthRequest(Verb.GET, PROTECTED_RESOURCE_URL);
    service.signRequest(accessToken, request);
    request.addHeader("GData-Version", "3.0");
    Response response = request.send();
    System.out.println("Got it! Lets see what we found...");
    System.out.println();
    System.out.println(response.getCode());
    System.out.println(response.getBody());

    System.out.println();
    System.out.println("Thats it man! Go and build something awesome with Scribe! :)");
    return SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:25:12.987

在您的操作方法中，使用公共 getter/setter 创建变量（例如`respBody`）并将响应主体分配给它。

```
respBody = response.getBody(); 
```

然后在 JSP 中，您可以使用`<s:property>`标记显示它。

```
<s:property value="respBody"/> 
```

# jquery - 如何让页面在加载时向下滑动到 div？

> ID：14681008
> 
> 赞同：1
> 
> 时间：2013-02-04T05:43:44.597
> 
> 标签：jquery, scrolltop

所以当页面加载时，我希望它滑动到目标 div。

```
var todayStory = $('#day2main');
var initialOffset = 550;

$('.storyContainer').load('story.html', function() {
    //story loads fine.
    $('html,body').animate({scrollTop:$(todayStory).offset().top-initialOffset}, 1000);
    //doesn't animate to div I indicate.
}); 
```

帮助！谢谢，麻烦您了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:56:55.537

参考：[在没有 JQUERY 插件的情况下平滑滚动到元素](http://www.abeautifulsite.net/blog/2010/01/smoothly-scroll-to-an-element-without-a-jquery-plugin/)

```
 $('html, body').animate({
     scrollTop: $("#day2main").offset().top
 }, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:12:13.167

尝试这个：

```
$('html,body').animate({
   scrollTop: $('#day2main', '.storyContainer').offset().top
}, 1000); 
```

由于您`#day2main`是动态加载的 div，因此您不能直接向该 div 提供事件。试试这个小提琴：

`[http://jsfiddle.net/VXr9j/](http://jsfiddle.net/VXr9j/)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:51:04.550

你可以试试`window.location.hash`：

```
$(document).ready(function () {
    window.location.hash = '#day2main'; 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T05:58:43.027

尝试这个

```
$('html, body').animate({scrollTop:$('#day2main').position().top}, 'slow'); 
```

# iphone - Xcode 4.5 未检测到 iOS sdk 6.1

> ID：14681009
> 
> 赞同：2
> 
> 时间：2013-02-04T05:43:47.577
> 
> 标签：iphone, ios, xcode4.5

我刚刚将我的设备 sdk 更新到 6.1 beta 版本。我一直在使用 Xcode 4.5，之前它在 6.0.1 中检测到设备，但现在没有检测到。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:49:03.077

是的，您需要更新到支持 iOS 6.1 的 Xcode 4.6

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T05:49:59.770

你需要下载一个[Xcode 4.6](https://developer.apple.com/xcode/index.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T11:58:49.693

此外，您可以要求任何其他伙伴向您发送 SDK：`iPhoneOS6.1.sdk`& ，而不是更新您的 XCode `iPhoneSimulator6.1.sdk`。现在只需重新启动 XCODE :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-08T15:07:29.967

将sdk放在目录下：</p>

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer‌​/SDKs/

# qt - 如何在 Qt 项目中包含 OpenSSL

> ID：14681012
> 
> 赞同：17
> 
> 时间：2013-02-04T05:44:20.773
> 
> 标签：qt, windows-7, linker, openssl

我是 Qt 的新手，我已经做了一些谷歌搜索，但找不到足够详细的答案。

我需要在基于 qmake 的 Qt 项目中使用 OpenSSL。我该如何下载/安装/链接它，以便我可以做一个包含语句并在我的代码中使用它的功能？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-04T06:36:15.753

假设是 Windows，您可以从[**Win32 OpenSSL 安装项目页面**](http://slproweb.com/products/Win32OpenSSL.html)下载它的安装。您可以选择一种用于 64 位 Windows 开发或 32 位。只需运行设置，一切都会轻松完成。默认安装目录是：**C:\OpenSSL-Win32**
在**Qt creator**中，如果你想将一个库链接到你的项目，你可以将这一行添加到你的 .pro 文件（项目文件）中：

```
LIBS += -L/path/to -llibname 
```

所以这就是我们为这个库所做的（例如链接 ubsec.lib ）

```
LIBS += -LC:/OpenSSL-Win32/lib -lubsec 
```

注意**-L**和**-l**。[看到这个问题](https://stackoverflow.com/questions/718447/adding-external-library-into-qt-creator-project)。您甚至不需要在库名称的末尾指定 .lib。

要包含 .h 文件，请将此行添加到您的 .pro 文件中：

```
INCLUDEPATH += C:/OpenSSL-Win32/include 
```

之后，您可以包含这样的文件：

```
#include <openssl/aes.h> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-28T18:41:34.640

来自 George 在[Unable to use AES files of OpenSSL in Qt Creator](https://stackoverflow.com/questions/22093148/unable-to-use-aes-files-of-openssl-in-qt-creator)：

> 如果这是在 Linux 上，请将以下内容添加到您的 .pro 文件中：
> 
> ```
> PKGCONFIG += openssl 
> ```
> 
> 它将处理所有必要的头文件路径、编译链接器选项和库。
> 
> 并确保您的系统中安装了 openssl-devel 软件包。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-05-07T11:28:02.487

我正在使用 Qt5.5 开发 Win 7 (32)，但这些答案都不适合我。
所以我只想分享一个最终可行的解决方案：

1\. 我在 C:\OpenSSL-Win32 中安装了 OpenSSL
2\. 在 c:\OpenSSL-Win32\MinGW 中有两个库文件：
`libeay32.a & ssleay32.a`
3\. 我做了一个副本他们每个人都重命名了扩展名：
`libeay32.a -> libeay32.lib & ssleay32.a -> ssleay32.lib`
4.我以这种方式链接了我的.pro文件中的库：
`LIBS += -LC:/OpenSSL-Win32/lib/MinGW -llibeay32`
`LIBS += -LC:/OpenSSL-Win32/lib/MinGW -lssleay32`
`INCLUDEPATH += C:/OpenSSL-Win32/include`
5.我从C：\ OpenSSL-Win32复制了3个.dll文件：
（libeay32.dll，libssl32.dll，ssleay32.dll ）
到我的构建/调试文件夹：
（build-XXXXX-Desktop_Qt_5_5_1_MSVC2012_32bit-Debug/debug）

我希望这将有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-12T10:44:48.897

如果您将`cmake`其用作项目的构建系统，则可以包括`FindOpenSSL.cmake`以下内容：

```
#set(OPENSSL_USE_STATIC_LIBS TRUE) # if you want to use static libssl.a and libcrypto.a
include(FindOpenSSL)
#add_executable(${PROJECT_NAME} ...) or add_library(${PROJECT_NAME} ...)
target_link_libraries(${PROJECT_NAME} PRIVATE ${CMAKE_DL_LIBS} OpenSSL::SSL OpenSSL::Crypto) 
```

`${CMAKE_DL_LIBS}`*在Linux*系统上是必需的，以避免链接时错误，如“未找到 dlopen 符号...”。在窗户上它变成了空的。

如果`openssl`安装目录不是标准的，那么您应该提供`OPENSSL_ROOT_DIR`，`cmake`例如添加到可执行文件`set(OPENSSL_ROOT_DIR "C:/msys64/mingw32")`之前`include`或指定`-DOPENSSL_ROOT_DIR:PATH=C:/msys64/mingw32`到`cmake`可执行文件（在“项目”->“构建设置”->“CMake”选项卡中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-12T13:08:00.040

如果您使用的是 win7，并且您的 qt 版本是 mingw，并且您从[http://slproweb.com/products/Win32OpenSSL.html](http://slproweb.com/products/Win32OpenSSL.html)安装 openssl，请确保您的 lib 应该在 OpenSSL-Win32/lib/MinGW 中，并添加libeay32.a 和 ssleay32.a 前的“lib”。</p>

# javascript - 在 Box2Djs 中解冻身体或阻止退出世界

> ID：14681013
> 
> 赞同：0
> 
> 时间：2013-02-04T05:44:30.987
> 
> 标签：javascript, node.js, box2d, physics

我正在做一个服务器端物理实验，用户通过套接字控制一个对象。当用户将对象移动到世界边界之外时，我遇到的问题会产生。

我正在使用通过`npm`.

我创建世界 500x500，然后将以下侦听器附加到它：

```
var boundaryListener = new b2d.b2BoundaryListener();
boundaryListener.Violation = function (body) {
    //we will move this body to the opposite side
    var position = body.GetWorldCenter();
    //snap to opposite side
    if (position.x < 0) {
        position.x = worldAABB.upperBound.x + position.x;
    }
    if (position.y < 0) {
        position.y = worldAABB.upperBound.y + position.y;
    }
    if (position.x > worldAABB.upperBound.x) {
        position.x -= worldAABB.upperBound.x;
    }
    if (position.y > worldAABB.upperBound.y) {
        position.y -= worldAABB.upperBound.y;
    }

    body.m_flags = body.m_flags & (~b2d.b2Body.e_frozenFlag); //does nothing :(
}
this.world.SetBoundaryListener(boundaryListener); 
```

`worldAABB`是世界用作边界的 b2AABB。

问题是我注意到，当触发边界侦听器时，标志设置为 22，即 allowSleep、frozen 和 island 标志。看起来当 b2Body 越过世界边界时，它会被冻结。最后一行是试图通过弄乱内部标志来解冻身体，但我有一种明显的感觉，这是错误的做法。

我怎样才能解冻身体？没有任何功能可以清除我可以看到的冻结标志（javascript 超过 10,000 行，所以老实说我还没有阅读整个内容）并且将一些物体放置为墙壁似乎没有效果（用户的对象直接穿过他们）。

我的墙是这样创建的：

```
//create walls
var wallShape = new b2d.b2PolygonDef();
wallShape.SetAsBox(500, 10);
wallShape.density = 0.0;
wallShape.friction = 0.3;

var bodyDef = new b2d.b2BodyDef();
bodyDef.position.Set(250, 20);
var north = this.world.CreateBody(bodyDef);
north.CreateShape(wallShape);

bodyDef = new b2d.b2BodyDef();
bodyDef.position.Set(250, 499);
var south = this.world.CreateBody(bodyDef);
south.CreateShape(wallShape);

bodyDef = new b2d.b2BodyDef();
bodyDef.position.Set(499,250);
bodyDef.angle = Math.PI / 2;
var east = this.world.CreateBody(bodyDef);
east.CreateShape(wallShape);

bodyDef = new b2d.b2BodyDef();
bodyDef.position.Set(1, 250);
bodyDef.angle = Math.PI / 2;
var west = this.world.CreateBody(bodyDef);
west.CreateShape(wallShape); 
```

有没有人对如何解决这个问题有任何见解？除了网站指向的 flash 文档（一半时间不匹配）和 C++ 文档甚至没有谈到冻结之外，我几乎找不到关于在 javascript 中使用 Box2D 的文档。

提到这个世界没有重力并且所有物体都有一些线性和角度阻尼（它应该是一种虚拟的空间感觉）可能会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:39:19.200

我调查了 Box2Djs 的源代码，然后发现了下一件事。每一步 Box2Djs 都会检查身体是否在世界边界内。如果身体超出范围，那么它“冻结”，即它被排除在碰撞检测之外。有这段代码（Body.js 第 414 行）：

```
Freeze: function(){
    this.m_flags |= b2Body.e_frozenFlag;
    this.m_linearVelocity.SetZero();
    this.m_angularVelocity = 0.0;

    for (var s = this.m_shapeList; s != null; s = s.m_next)
    {
        s.DestroyProxy();
    }
} 
```

请注意，此检查执行**每个时间步**（b2Island.js 244）。因此，如果您在边界侦听器处设置 e_frozenFlag，它将什么都不做：标志将在下一个时间步设置。更重要的是，在身体冻结后，它失去了它的速度，它的形状在广泛的阶段失去了它们的代理（正如你从上面的代码中看到的那样）。看起来代理没有自动恢复，所以，重置标志是不够的。

我也没有在 Box2Djs 界面或解冻身体的逻辑中找到某处。手动执行此操作是一种肮脏的技巧，因为您应该访问 Box2Djs 内部的 BroadPhase。更重要的是，它对你没有帮助，因为在冻结身体时会失去它的速度。但是，正如我所见，你需要继续身体移动。

接下来是解决方案。您应该完全防止身体冻结，以便在身体移出世界边界后保持身体在模拟中。它可以通过下一个技巧来完成。首先，设置一些较大的值的世界边界。然后，设置接触监听器，当身体接触墙壁时，执行你的边界违规逻辑。

如何在 C++ 中设置联系人监听器，您可以在此处看到：[https](https://www.iforce2d.net/b2dtut/collision-callbacks) : //www.iforce2d.net/b2dtut/collision-callbacks 抱歉，我不知道 java 脚本，也不能说，如何在 Box2Djs 中执行此操作。

# python - 使用全局单例实例将子进程对象存储在内存中

> ID：14681015
> 
> 赞同：1
> 
> 时间：2013-02-04T05:44:39.007
> 
> 标签：python, django, subprocess

因此，我`subprocess`使用 Django 通过 Web 界面生成一个长时间运行的进程。现在，如果用户想要返回该页面，我想给他`subprocess`在稍后阶段终止的选项。

怎么能做到这一点？我在 Java 中实现了同样的事情，并制作了一个全局单例 ProcessManager 字典来将进程对象存储在内存中。我可以在 Python 中做类似的事情吗？

**编辑**

是的 Singletons 和 ProcessManager 的哈希是干净的方式。Emmanuel 的代码只需稍作修改即可完美运行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T09:59:35.533

我认为在 python 中实现单例模式的一种简单方法是通过类属性：

```
import subprocess

class ProcessManager(object):
    __PROCESS = None;

    @staticmethod
    def set_process(args):
        # Sets singleton process
        if __PROCESS is None:
            p = subprocess.Popen(args)
            ProcessManager.__PROCESS = p;
        # else: exception handling

    @staticmethod
    def kill_process():
        # Kills process
        if __PROCESS is None:
            # exception handling
        else:
            ProcessManager.__PROCESS.kill() 
```

然后你可以通过以下方式使用这个类：

```
from my_module import ProcessManager

my_args = ...
ProcessManager.set_process(my_args)

...

ProcessManager.kill_process() 
```

笔记：

*   负责`ProcessManager`创建过程，与结束对称
*   我没有足够的多线程知识来知道这是否适用于多线程模式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:03:54.497

您可以在 Python 中使用与在 Java 中相同的技术，即将进程的引用存储在模块变量中或实现一种单例。

与 Java 相比，您遇到的唯一问题是 Python 没有与 Servlet 规范那样丰富的类比，并且没有处理应用程序启动或结束的接口。在大多数情况下，您不必担心应用程序有多少实例正在运行，因为您从持久存储中获取所有数据。但在这种情况下，您应该了解您的应用程序是如何部署的。

如果您的应用程序有一个长时间运行的实例（例如，FastCGI 实例，或cherrypy 上的单个 WSGI 应用程序），您可以将进程处理功能隔离在一个单独的模块中，并在导入模块时加载它（任何模块在应用程序中只导入一次）。如果有许多实例（许多 FastCGI 实例或普通 CGI 脚本），您应该更好地分离子进程并将它们的 id 保存在持久存储中（在数据库或文件中）并将它们与当前运行的进程列表相交一经请求。

# javascript - 为多个表单捕获带有咖啡脚本的提交按钮

> ID：14681016
> 
> 赞同：0
> 
> 时间：2013-02-04T05:44:39.603
> 
> 标签：javascript, ruby-on-rails, forms, coffeescript

我正在尝试捕获表单上的提交按钮，并进行一些处理（在这种情况下，将信用卡数据发送到 Stripe）。我有一个 Order 类，当按下新的订单提交按钮时，它会捕获提交并将其发送到我的`captureSubmitForStripe`方法。那部分工作得很好，这是一个代码片段：

```
# orders.js.coffee:
jQuery ->
  Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
  order.setupForm()

order =
  setupForm: ->
    $('#new_order').submit ->
      order.captureSubmitForStripe()

  captureSubmitForStripe: ->
    # do more stuff here... 
```

我也想让***编辑***表单上的提交按钮也能做到这一点。我该如何编写它，以便它从我所在的任何表单中捕获提交按钮，或者至少从新表单和编辑表单中捕获提交按钮？

我已经尝试过这个，除其他外，它不起作用：

```
order =
  setupForm: ->
    $('#new_order').submit ->
      order.captureSubmitForStripe()
    $('#edit_order').submit ->
      order.captureSubmitForStripe() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:53:01.897

使用没有问题，`$('#new_order')`因为这是`form_for`用于新对象时表单的默认 id。对于持久化对象，id 变为`edit_order_123`123 是对象的 id。我建议您为新表单和编辑表单使用一个类

```
# set the class
form_for @order, html: { class: 'order-form' } do
  ...

# then just use the class to select the form
$('.order-form').submit -> order.captureSubmitForStripe() 
```

# ruby-on-rails - 在 Heroku 上部署简单的机架应用程序时出现应用程序错误

> ID：14681017
> 
> 赞同：1
> 
> 时间：2013-02-04T05:44:41.830
> 
> 标签：ruby-on-rails, heroku, rack, heroku-toolbelt, heroku-san

我正在尝试在 heroku 上部署我的应用程序，它包含 5 个文件 1.config.ru 和代码

```
require 'rack'
require './myapp'

run MyApp.new 
```

2.带有代码的Gemfile

```
source "http://rubygems.org"
gem 'grape'
gem 'sequel'
gem 'heroku'
gem 'rake'
gem 'pg'
gem 'rack'
group :test do
  gem "rspec", "~> 2.12.0"
  gem "rack-test", "~> 0.6.2"
  gem "rspec-core", "~> 2.12.2"
  gem "rspec-expectations", "~> 2.12.1"
  gem "rspec-mocks", "~> 2.12.1"
  gem "capybara", "~> 2.0.2"
  gem "nokogiri", "~> 1.5.6"
end 
```

3.Gemfile.lock 自动创建 4.myapp.rb 带代码

```
# my_app.rb
class MyApp
  def call env
    [200, {"Content-Type" => "text/html"}, ["Hello Rack Participants"]] 
  end
end 
```

5.带有代码的Procfile

```
web: bundle exec rackup config.ru 
```

然后我调用捆绑安装

在那个 rackup config.ru 之后它按预期工作得非常好但是之后我尝试将它部署在 heroku 上并得到应用程序错误我执行了以下命令

```
git init
git add .
git commit -m "initial commit"
heroku create
git push heroku master
heroku open 
```

当我运行命令 heroku logs 然后它给我日志时，一个 Web 浏览器打开并显示应用程序错误

```
2013-02-04T05:34:17+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=quiet-caverns-8170.herokuapp.com fwd=121.245.34.235 dyno= queue= wait= connect= service= status=503 bytes= 
```

任何人都可以请帮助我为什么在heroku和hopw上遇到这个错误来纠正它？

这是heroku的完整日志

```
2013-02-04T05:30:44+00:00 heroku[api]: Scale to web=1 by ritesh@iritesh.com
2013-02-04T05:30:44+00:00 heroku[api]: Attach HEROKU_POSTGRESQL_CYAN resource by ritesh@iritesh.com
2013-02-04T05:30:44+00:00 heroku[api]: Release v3 created by ritesh@iritesh.com
2013-02-04T05:30:45+00:00 heroku[api]: Add DATABASE_URL config by ritesh@iritesh.com
2013-02-04T05:30:45+00:00 heroku[api]: Release v4 created by ritesh@iritesh.com
2013-02-04T05:30:45+00:00 heroku[api]: Add  config by ritesh@iritesh.com
2013-02-04T05:30:45+00:00 heroku[api]: Release v5 created by ritesh@iritesh.com
2013-02-04T05:30:45+00:00 heroku[api]: Release v6 created by ritesh@iritesh.com
2013-02-04T05:30:45+00:00 heroku[api]: Deploy 243e86c by ritesh@iritesh.com
2013-02-04T05:30:51+00:00 heroku[web.1]: Starting process with command `bundle exec ruby web.rb`
2013-02-04T05:30:52+00:00 app[web.1]: bash: bundle: command not found
2013-02-04T05:30:53+00:00 heroku[web.1]: Process exited with status 127
2013-02-04T05:30:56+00:00 heroku[web.1]: Starting process with command `bundle exec ruby web.rb`
2013-02-04T05:30:58+00:00 app[web.1]: ruby: No such file or directory -- web.rb (LoadError)
2013-02-04T05:31:00+00:00 heroku[web.1]: Process exited with status 1
2013-02-04T05:31:00+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-04T05:31:00+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-04T05:31:13+00:00 heroku[web.1]: Starting process with command `bundle exec ruby web.rb`
2013-02-04T05:31:19+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-04T05:31:22+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=quiet-caverns-8170.herokuapp.com fwd=121.245.34.235 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-04T05:31:22+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=quiet-caverns-8170.herokuapp.com fwd=121.245.34.235 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-04T05:31:18+00:00 app[web.1]: ruby: No such file or directory -- web.rb (LoadError)
2013-02-04T05:31:19+00:00 heroku[web.1]: Process exited with status 1
2013-02-04T05:33:42+00:00 heroku[slugc]: Slug compilation started
2013-02-04T05:33:52+00:00 heroku[api]: Release v7 created by ritesh@iritesh.com
2013-02-04T05:33:52+00:00 heroku[api]: Deploy eb490fb by ritesh@iritesh.com
2013-02-04T05:33:52+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-04T05:33:53+00:00 heroku[slugc]: Slug compilation finished
2013-02-04T05:33:59+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-04T05:34:17+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=quiet-caverns-8170.herokuapp.com fwd=121.245.34.235 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-04T05:33:55+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru`
2013-02-04T05:33:58+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-02-04T05:33:57+00:00 app[web.1]: [2013-02-04 05:33:57] INFO  WEBrick::HTTPServer#start: pid=2 port=9292
2013-02-04T05:33:58+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 9292, should be 16705 (see environment variable PORT)
2013-02-04T05:33:57+00:00 app[web.1]: [2013-02-04 05:33:57] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-02-04T05:33:57+00:00 app[web.1]: [2013-02-04 05:33:57] INFO  WEBrick 1.3.1
2013-02-04T05:33:59+00:00 heroku[web.1]: Process exited with status 137
2013-02-04T05:41:22+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru`
2013-02-04T05:41:19+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-04T05:41:24+00:00 app[web.1]: [2013-02-04 05:41:24] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-02-04T05:41:24+00:00 app[web.1]: [2013-02-04 05:41:24] INFO  WEBrick 1.3.1
2013-02-04T05:41:24+00:00 app[web.1]: [2013-02-04 05:41:24] INFO  WEBrick::HTTPServer#start: pid=2 port=9292
2013-02-04T05:41:25+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-02-04T05:41:25+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 9292, should be 46347 (see environment variable PORT)
2013-02-04T05:41:26+00:00 heroku[web.1]: Process exited with status 137
2013-02-04T05:41:26+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-04T05:51:59+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 9292, should be 15335 (see environment variable PORT)
2013-02-04T05:51:57+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru`
2013-02-04T05:51:59+00:00 app[web.1]: [2013-02-04 05:51:59] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-02-04T05:51:59+00:00 app[web.1]: [2013-02-04 05:51:59] INFO  WEBrick 1.3.1
2013-02-04T05:51:59+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-02-04T05:51:59+00:00 app[web.1]: [2013-02-04 05:51:59] INFO  WEBrick::HTTPServer#start: pid=2 port=9292
2013-02-04T05:52:01+00:00 hero
ku[web.1]: Process exited with status 137
2013-02-04T05:55:18+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=quiet-caverns-8170.herokuapp.com fwd=121.245.34.235 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-04T05:55:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=quiet-caverns-8170.herokuapp.com fwd=121.245.34.235 dyno= queue= wait= connect= service= status=503 bytes=
2013-02-04T06:01:58+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-04T06:02:04+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-04T06:12:11+00:00 heroku[web.1]: State changed from crashed to starting
2013-02-04T06:12:14+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru`
2013-02-04T06:12:18+00:00 heroku[web.1]: Stopping process with SIGKILL
2013-02-04T06:12:17+00:00 app[web.1]: [2013-02-04 06:12:17] INFO  WEBrick 1.3.1
2013-02-04T06:12:17+00:00 app[web.1]: [2013-02-04 06:12:17] INFO  ruby 1.9.2 (2011-07-09) [x86_64-linux]
2013-02-04T06:12:17+00:00 app[web.1]: [2013-02-04 06:12:17] INFO  WEBrick::HTTPServer#start: pid=2 port=9292
2013-02-04T06:12:18+00:00 heroku[web.1]: Error R11 (Bad bind) -> Process bound to port 9292, should be 35684 (see environment variable PORT)
2013-02-04T06:12:19+00:00 heroku[web.1]: State changed from starting to crashed
2013-02-04T06:12:19+00:00 heroku[web.1]: Process exited with status 137 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:42:56.240

看起来您没有为应用程序运行指定正确的端口。尝试将您的 Procfile 切换到以下内容

```
web: bundle exec rackup config.ru -p $PORT -E $RACK_ENV 
```

有关类似问题，请参阅[在 Heroku 上部署 Sinatra 应用程序](https://stackoverflow.com/questions/9896216/deploy-sinatra-app-on-heroku)和[在 heroku cedar 堆栈上部署 sinatra 应用程序（使用 config.ru） 。](https://stackoverflow.com/questions/8340943/deploying-sinatra-app-with-config-ru-on-heroku-cedar-stack)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:42:11.280

您没有绑定到 中的端口`$PORT`，因此我们终止了您的进程。您必须更改您`Procfile`的包含`-p $PORT`。

# jquery-ui - bootstrap.js 应该在 jquery.js 之后还是之前运行？

> ID：14681019
> 
> 赞同：2
> 
> 时间：2013-02-04T05:44:44.987
> 
> 标签：jquery-ui, twitter-bootstrap

我想同时使用 jquery ui 和 bootstrap ，有一个解决方案 [jquery-ui-bootstrap](https://github.com/addyosmani/jquery-ui-bootstrap)

并且您必须在 jqueryui 之前加载引导程序，否则会出现错误。例如：Bialog 按钮将失去风格。

![演示](../Images/3debb6cd23336fc1aa4167ebb5aae5db.png)

但是如果在 jquery 之前加载引导程序，则在使用单选按钮时会出现另一个错误。 [关于这个的另一个问题](https://stackoverflow.com/questions/13235578/bootstrap-radio-buttons-toggle-issue)

所以？bootstrap.js 应该在 jquery.js 之后还是之前运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:55:26.313

我很确定您应该首先加载 jquery，因为引导程序使用 jquery 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T20:53:02.983

我尝试先加载 jquery.js，并且我的代码运行正常。试一试，告诉我们结果，否则，我们不知道如何帮助你......

# c - 输入后忽略回车键的C代码

> ID：14681020
> 
> 赞同：3
> 
> 时间：2013-02-04T05:45:03.940
> 
> 标签：c, user-input, stdin, enter

在输入调用之后，stdin 流中的 Enter 键或字符出现问题。

假设我有一个输入调用，所以我输入了内容。但随后将 Enter 键作为下一个输入调用的输入。

我认为在 c++ 中`cin.ignore()`可以做到这一点。

我只是找不到C版本。

输入法是`getchar()`和`gets()`。

抱歉，如果这是重复的。我找不到与我匹配的问题。谢谢你的帮助！

```
 printf("Do you want to view the lines? ");
    int choice = getchar();
    while (choice == 'y')
    {
            char line[80];
            printf("What line do you want to see? ");
            gets(line);
            if (line != "all")
            {
                    n = atoi(line);
                    printf("Line %d: %s\n",n,list[n]);
            }
            else
                    for (int i = 0; i<size; i++)
                            printf("%s \n",list[i]);
            printf("Any more lines? ");
            choice = getchar();
    } 
```

我承认这是非常基础的，但仍在学习。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:30:07.517

您只需要继续调用`getchar`即可从流中消耗您不想要的字符。如果您知道总是有一个附加字符，那么只需额外调用`getchar`.

如果您想从流中删除多个字符或处理输入可能实际上包含您真正需要的内容的情况，您可以执行以下代码而不是您的`choice = getchar()`.

```
do
{
  choice = getchar();
} while(choice=='\n'); // Add any other characters you may want to skip 
```

这将继续删除字符（在这种情况下仅当它们是换行符时），但将选项设置为第一个未删除的字符。

顺便说一句，您不能`!= "all"`使用 C 字符串比较函数来比较像 () 这样的字符串，例如`strcmp()`.

更一般地，C++ istream 忽略可以大致用 C 编写，如下面的代码；调用 with`stdin`以跳过标准输入中的字符：

```
int ignore(FILE *stream, int n, int delim)
{
  int c;
  while(n>0)
  {
    c = getc(stream);
    if(c==EOF || c==delim)
    {
      return c;
    }
    n--;
  }
  return(c);
} 
```

# android - 安卓适配器视图？

> ID：14681022
> 
> 赞同：34
> 
> 时间：2013-02-04T05:45:30.197
> 
> 标签：android, android-adapterview

[文件](http://developer.android.com/guide/topics/ui/declaring-layout.html#CommonLayouts)说：

> 当您的布局的内容是动态的或不是预先确定的时，您可以使用继承 AdapterView 的布局在运行时使用视图填充布局。AdapterView 类的子类使用 Adapter 将数据绑定到其布局。

但大多数教程都在about `ListView`、`GridView`和.`Spinner``Gallery`

我正在寻找直接从`AdapterView`. 我必须创建一个自定义视图，它的内容取决于适配器。

我该怎么做，必须重写哪些方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-08T07:48:20.183

首先，您应该绝对确定这`AdapterView`是您想要的，因为并非所有“动态或非预定”视图都可以通过`AdapterView`. 有时你最好创建你的视图扩展`ViewGroup`。

如果你想使用`AdapterView`，看看[这个非常好的例子](http://developer.sonymobile.com/2010/05/20/android-tutorial-making-your-own-3d-list-part-1/)。GitHub 上有很多带有适配器的自定义视图。[看看这个（扩展`ViewGroup`）](https://github.com/maurycyw/StaggeredGridView)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T04:27:31.203

这可能不是您问题的完整答案，但我很可能向您展示了一个可以指导您的起点或指针：

[索尼开发者教程 - 3D ListView](http://developer.sonymobile.com/2010/05/20/android-tutorial-making-your-own-3d-list-part-1/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-07T19:31:17.870

`ListView`扩展`AbsListView`而扩展`AdapterView<ListAdapter>`。因此，如果您绝对必须从头开始实现这样的自定义视图，您可以查看这些类的源代码：

*   [列表显示](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ListView.java)
*   [绝对列表视图](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/AbsListView.java)
*   [适配器视图](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/AdapterView.java)

但请注意，这是一项艰巨的任务。也许使用现有类之一并调整外观可能就足够了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-09T15:48:11.103

派生`AdapterView`可以工作，但它可能没有你希望的那么有益。提供的一些基础设施`AdapterView`是包私有的，这意味着我们无权访问它。

例如，`AdapterView`管理 和 的选定项`AbsListView`索引`ListView`。但是，由于诸如`setNextSelectedPositionInt(int position)`（这是设置的唯一途径`mNextSelectedPosition`）之类的方法是包私有的，因此我们无法使用它们。`AbsListView`并且`ListView`可以找到它们，因为它们在同一个包中，但我们不能。

(If you dig into the `AdapterView` source you'll find that `setNextSelectedPositionInt()` is called from `handleDataChanged()`. Unfortunately `handleDataChanged()` is also package-private and is `_not_called` from anywhere else within `AdapterView` that could be leveraged to enable setting position.)

That means that if you need to manage selected position, you'll need to recreate that infrastructure in your derived class (or you'll need to derive from `ListView` or `AbsListView`...though I suspect you'll run into similar problems deriving from `AbsListView`). It also means that any `AdapterView` functionality that revolves around item selection likely won't be fully operational.

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-04T05:51:20.930

你可以创建这样的东西：

```
public class SampleAdapter extends BaseAdapter {

public SampleAdapter() {
  // Some constructor
}

public int getCount() {
  return count; // Could also be a constant. This indicates the # of times the getView gets invoked.
}

public Object getItem(int position) {
    return position; // Returns the position of the current item in the iteration
}

public long getItemId(int position) {
  return GridView.INVALID_ROW_ID;
}

public View getView(int position, View convertView, ViewGroup parent) {
  View view = null;

  view = (LinearLayout) LayoutInflater.from(context).inflate(R.layout.some_layout, null);
  view.setLayoutParams(new GridView.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
view.setBackgroungColor(Color.RED);

  return view;
} 
```

}

这可以像这样调用：

```
GridView sampleView = (GridView) linearLayout.findViewById(R.id.sample_layout);
sampleView.setAdapter(new SampleAdapter()); 
```

# sql - Oracle 2-attribute CHECK 约束问题

> ID：14681026
> 
> 赞同：1
> 
> 时间：2013-02-04T05:45:53.327
> 
> 标签：sql, oracle, constraints, check-constraints

我有一张“学生”表和几个属性——其中两个在这个特定问题中很重要。我需要确保任何具有“初级”分类（年级）的学生的时间正好在 55 到 84 小时之间（学分）。

这是我迄今为止在 Oracle 中的声明方式（删除了不必要的代码）：

```
CREATE TABLE Students (  
id INTEGER,  
name CHAR(10) NOT NULL,  
classification CHAR(10) NOT NULL,  
hours INTEGER,  
gpa NUMBER(3,2) NOT NULL,  
mentor INTEGER,  
-- IC4:  
-- To be classified as a 'junior', a student must have  
-- completed between 55 and 84 hours (inclusive).  
CONSTRAINT IC4 CHECK (classification != 'junior' AND (hours < 55 AND hours > 84))),  
); 
```

甲骨文抛出错误：

```
第 23 行的错误：  
ORA-00922: 缺少或无效选项  

```

我确定我没有正确格式化约束，但是我的教授花了大约 3 秒钟的时间来声明并告诉我们自己弄清楚。我知道 1 属性约束，但我不知道如何同时混合和匹配 2 个属性。有人可以帮我吗？

*基本上在任何其他代码中，它看起来像嵌套的 if 语句：

```
if (classification == "junior") {  
    if (hours < 55 && hours > 84)  
        throwSomeError("Foolish!");  
} 
```

我似乎无法将其转换为 SQL。如果这该死的东西中的间距很奇怪，我很抱歉，我无法将其格式化以挽救我的生命。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:39:59.413

末尾有一个逗号，还有一个太多的右括号：

```
...84))),); 
```

除非您在发布之前删除了某些内容，否则可能是错误引用第 23 行的情况（但希望不会因为在您根本看不到的代码中看到问题很棘手）。如果变成：

```
...84))); 
```

但正如其他人所指出的那样，无论如何情况都是错误的。获得我认为您想要的结果的一种方法是：

```
...
CONSTRAINT IC4 CHECK (classification != 'junior' OR hours BETWEEN 55 AND 84)
); 
```

`OR`表示仅当为`hours`时才应用检查，其他不受限制。（如果您需要针对不同分类的不同规则，请查看评论中链接到[的非常相似的问题](https://stackoverflow.com/a/14669589/266304)Chris Saxon）。`classification``'junior'``classification`

有一些测试数据：

```
insert into students values (1, 'A', 'junior', 54, 1, 1); -- ORA-02290
insert into students values (2, 'B', 'junior', 55, 1, 1); -- OK
insert into students values (3, 'C', 'junior', 84, 1, 1); -- OK
insert into students values (4, 'D', 'junior', 85, 1, 1); -- ORA-02290

insert into students values (5, 'E', 'senior', 54, 1, 1); -- OK
insert into students values (6, 'F', 'senior', 55, 1, 1); -- OK
insert into students values (7, 'G', 'senior', 84, 1, 1); -- OK
insert into students values (8, 'H', 'senior', 85, 1, 1); -- OK

select * from students order by id;

  ID NAME       CLASSIFICATION HOURS GPA MENTOR
---- ---------- -------------- ----- --- ------
   2 B          junior            55  1.00      1 
   3 C          junior            84  1.00      1 
   5 E          senior            54  1.00      1 
   6 F          senior            55  1.00      1 
   7 G          senior            84  1.00      1 
   8 H          senior            85  1.00      1 

 6 rows selected 
```

`BETWEEN`是包容性的，所以这与：

```
CONSTRAINT IC4 CHECK (classification != 'junior' OR (hours >= 55 AND hours <= 84)) 
```

您可能还需要一个检查约束`classification`，特别是因为这个约束是区分大小写的；或者最好有一个单独的`classification`表，并且对该表中的列有一个外键约束。但这可能超出了您对该作业的控制范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:52:53.393

难道`hours`是允许`Null`的并且`CHECK`不能处理允许`Null`s的字段吗？

因此，如果您认为，请尝试制作`hours integer Not NULL`并给出默认值..

另外你的情况不匹配..也检查一下....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:16:31.140

如果您想检查“初级”的值是否应在 55 到 84 之间，请使用以下可编译代码 -

> ```
> CREATE TABLE Students 
> ( id INTEGER, 
> name CHAR(10) NOT NULL,
>  classification CHAR(10) NOT NULL,
>  hours INTEGER, gpa NUMBER(3,2) NOT NULL,
>  mentor INTEGER, -- IC4: 
> -- To be classified as a 'junior', 
> a student must have -- completed between 55 and 84 hours (inclusive). 
> CONSTRAINT IC4 CHECK (classification = 'junior' AND (hours >= 55 AND hours <= 84))) ; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:04:32.423

似乎您的约束中的逻辑可能已关闭。小时不能小于 55 和大于 84。尝试使用 OR：

```
CONSTRAINT IC4 CHECK (classification != 'junior' AND (hours < 55 OR hours > 84)) 
```

但是，这并不能确保当分类 = 'junior' 时，小时数在 55 到 84 之间。尝试改用它：

```
CONSTRAINT IC4 CHECK (classification = 'junior' AND hours >= 55 AND hours <= 84)) 
```

祝你好运。

# highcharts - Highchart 折线图中的多条线需要 30 秒才能显示

> ID：14681027
> 
> 赞同：0
> 
> 时间：2013-02-04T05:45:53.613
> 
> 标签：highcharts

我在 vaadin 应用程序中使用 highcharts 。它以最佳方式适用于单线图。如果我放 49 行，每行包含 2048 个值。我禁用了标记、阴影、工具提示、动画。但该图仍然需要 30 秒才能在 google chrome 中显示，而在 Firefox 中则需要 30 多秒。如何快速显示。代码如下

```
String s = "";
s+="chart = Highcharts.setOptions(Highcharts.theme);"+
                "  chart = new Highcharts.Chart({\n" + 
                "            chart: {\n" + 
                "                renderTo: 'container5',\n" + 
                "                type: 'line',\n" +                 
                "            },\n" + 
                "            title: {\n" + 
                "                text: 'Intensity Graph'\n" + 
                "            },\n" +
                "            xAxis: {\n" + 
                "            min:0,\n"+
                "            max:2100,\n"+
                "            tickInterval:100,\n"+
                "                labels: {\n" + 
                "                    rotation: -45,\n" + 
                "                    align: 'right',\n" + 
                "                    style: {\n" + 
                "                        fontSize: '13px',\n" + 
                "                        fontFamily: 'Verdana, sans-serif'\n" + 
                "                    }\n" + 
                "                }\n" + 
                "            },\n" + 
                "        yAxis: {\n" + 
                "           title:{\n" + 
                "            text:''\n" +               
                "           },"+                
                "             min:0,\n"+
                "             max:255,\n"+  
                "            tickInterval:20,\n"+
                "        },\n" + 
                "plotOptions: {\n" + 
                "            series: {\n" + 
                "                marker: {\n" + 
                "                    enabled: false,\n" +                   
                "                    shadow : false,\n"+
                "                    animation : false\n"+              
                "            },"+
                "color: '#00FF00',\n"+
                "            lineWidth: 0.1"+   
                "           },"+            
                "        },"+
                " tooltip: {\n" + 
                "            enabled: false\n" + 
                "        },"+
                "            legend: {\n" + 
                "                enabled: false\n" + 
                "            },\n" + 
//              "            tooltip: {\n" + 
//              "                formatter: function() {\n" + 
//              "                    return '<b>'+ this.x +'</b><br/>'+\n" + 
//              "                        'lux: '+ Highcharts.numberFormat(this.y, 1) +\n" + 
//              "                        ' px';\n" + 
//              "                }\n" + 
//              "            },\n" + 
                "                series: [{\n" + 
                "                name: 'Ejection Count',\n" + 
                "                data: [" +
                "],\n" + 
                "                dataLabels: {\n" + 
                "                    enabled: true,\n" + 
                "                    rotation: -90,\n" + 
                "                    color: '#FFFFFF',\n" + 
                "                    align: 'right',\n" + 
                "                    x: -3,\n" + 
                "                    y: 10,\n" + 
                "                    formatter: function() {\n" + 
                "                        return this.y;\n" + 
                "                    },\n" + 
                "                    style: {\n" + 
                "                        fontSize: '13px',\n" + 
                "                        fontFamily: 'Verdana, sans-serif'\n" + 
                "                    }\n" + 
                "                }\n" + 
                "            }]\n" + 
                "        });" +             
                "  });");

long len = 2,kk1 = 0;
            Highchart hc = new Highchart();
            byte[] cor = new byte[4584];// I am adding this array content to the graph
                    StringBuffer sb = new StringBuffer();
            try
            {
                for (long l = 0; l < len; l++) 
                {
                    sb.append(" this.chart.addSeries({\n" + 
                    "            data: [" );    
                    for (int i = 0; i < 2; i++) 
                {                   
                        if(i == 0)
                        {
                        //2048 points
                            for (int j = 0,k = 276; k < 2324; j++,k++) 
                        {
                                    if(j == 2323)
                            {   
                              sb.append(cor[k]) ;
                            }                           
                            else 
                            {
                              sb.append((cor[k] +",");
                            }
                        }
                        }                      
                }
                    sb.append("],"+
                    "     redraw :false,\n"+
                    "     animation:false\n"+
                    "});") ;                                        
                }   
                } 
                catch (FileNotFoundException e) 
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                catch (IOException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                sb.append("this.chart.redraw();");  
                        hc.drawChart(sb.toString());

                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:35:03.827

Highcharts 显示 100k 点的速度并不快。为此，我建议使用 Highstock，请参阅 54k 点的示例：[http](http://www.highcharts.com/stock/demo/data-grouping) ://www.highcharts.com/stock/demo/data-grouping图表在 0.2 秒内构建。Highstock 的主要加速是[dataGrouping](http://api.highcharts.com/highstock#plotOptions.series.dataGrouping)。

# linux - Linux 系统调用

> ID：14681029
> 
> 赞同：0
> 
> 时间：2013-02-04T05:46:01.707
> 
> 标签：linux, system-calls

随着时间的推移，Linux 系统调用在较旧的（8086/88）英特尔 CPU 与更现代的 CPU 上的实现方式发生了哪些变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:52:28.497

最大的变化是较新的 x86（和 Intel 64/AMD64）处理器上的 sysenter/sysexit（英特尔创建）和 syscall/sysret（AMD 版本）指令。与以前使用的中断方法相比，这些方法大大加快了系统调用速度。这与减少处理器在调用系统调用时必须经过的步骤有关，您可以在[Intel 手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)中阅读它们。

# dart - indexed_db getObject() - 如何返回结果

> ID：14681034
> 
> 赞同：0
> 
> 时间：2013-02-04T05:46:18.303
> 
> 标签：dart

我想知道如何定义数据类型以及如何使用 getObject() 返回对象（记录）。目前，我能够在获得它的函数之外使用结果（记录）的唯一方法是用结果调用另一个函数。这样，不需要指定数据类型。但是，如果我想返回值，我需要定义数据类型，但我找不到它是什么。我尝试了“动态”，但这似乎不起作用。例如 ”：

```
fDbSelectOneClient(String sKey, Function fSuccess, String sErmes) {
  try {
    idb.Transaction oDbTxn      =   ogDb1.transaction(sgTblClient, 'readwrite');
    idb.ObjectStore oDbTable    =   oDbTxn.objectStore(sgTblClient); 
    idb.Request     oDbReqGet   =   oDbTable.getObject(sKey);
    oDbReqGet.onSuccess.listen((val){
      if (oDbReqGet.result == null) {
        window.alert("Record $sKey was not found - $sErmes");
      } else {
    ///////return oDbReqGet.result;    /// THIS IS WHAT i WANT TO DO
        fSuccess(oDbReqGet.result);    /// THIS IS WHAT i'm HAVING TO DO  
      }});
    oDbReqGet.onError.first.then((e){window.alert(
      "Error reading single Client. Key = $sKey. Error = ${e}");});
  } catch (oError) {
    window.alert("Error attempting to read record for Client $sKey.
       Error = ${oError}");    
  }
}
fAfterAddOrUpdateClient(oDbRec) {
  /// this is one of the functions used as "fSuccess above 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:53:51.473

正如其他人曾经说过的（不记得是谁），一旦你开始使用异步 API，一切都需要异步。

执行此操作的典型“Dart”模式是使用`Future`+`Completer`对（尽管您在上面的问题中所做的事情本质上并没有错 - 这更多是风格问题......）。

从概念上讲，该`fDbSelectOneClient`函数创建一个完成者对象，并且该函数返回`completer.future`. 然后，当异步调用完成时，您调用`completer.complete`，将值传入。

该函数的用户将调用`fDbSelectOneClient(...).then((result) => print(result));`以异步方式使用结果

您上面的代码可以重构如下：

```
import 'dart:async'; // required for Completer

Future fDbSelectOneClient(String sKey) {
  var completer = new Completer();

  try {
    idb.Transaction oDbTxn      =   ogDb1.transaction(sgTblClient, 'readwrite');
    idb.ObjectStore oDbTable    =   oDbTxn.objectStore(sgTblClient); 
    idb.Request     oDbReqGet   =   oDbTable.getObject(sKey);

    oDbReqGet.onSuccess.listen((val) => completer.complete(oDbReqGet.result));
    oDbReqGet.onError.first.then((err) => completer.completeError(err));
  } 
  catch (oError) {
    completer.completeError(oError);
  }

  return completer.future; // return the future
}

// calling code elsewhere
foo() {
  var key = "Mr Blue";

  fDbSelectOneClient(key)
    .then((result) {
      // do something with result (note, may be null)
    })
    ..catchError((err) {  // note method chaining ..
     // do something with error
    };
} 
```

这对未来/完成者仅适用于一次拍摄（即，如果`onSuccess.listen`多次调用，那么第二次您将收到“未来已完成”错误。（我根据函数名称做了一个`fDbSelectOneClient`假设您只希望选择一条记录。

要从单个未来多次返回一个值，您可能必须使用 Future 的新流功能 - 请参阅此处了解更多详细信息：http: [//news.dartlang.org/2012/11/introducing-new-流-api.html](http://news.dartlang.org/2012/11/introducing-new-streams-api.html)

另请注意，Futures 和 Completers 支持泛型，因此您可以强类型化返回类型，如下所示：

```
// strongly typed future
Future<SomeReturnType> fDbSelectOneClient(String sKey) { 
  var completer = new Completer<SomeReturnType>(); 

  completer.complete(new SomeReturnType());
}

foo() {
  // strongly typed result
  fDbSelectOneClient("Mr Blue").then((SomeReturnType result) => print(result));
} 
```

# python - 如何指定默认的 __import__？

> ID：14681037
> 
> 赞同：0
> 
> 时间：2013-02-04T05:46:47.617
> 
> 标签：python, import, sandbox

我正在尝试学习如何在 Python 中创建一个简单的沙盒环境。为此，我想禁用一些`__import__`模块并将其设为默认值。这样，任何人运行程序的东西都`__import__`将被指定。

这样做的方法是什么？

# android - 如何从安卓手机中检索一个联系人的一个或多个电话号码？

> ID：14681045
> 
> 赞同：1
> 
> 时间：2013-02-04T05:47:52.460
> 
> 标签：android, android-contacts

我想从一个已经保存到手机的联系人中检索多个号码。那么如何在android中以编程方式读取一个联系人的号码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:42:08.943

我已经为此创建了自己的自定义类，它可能会对您有所帮助：

```
package com.android.addressbook.result;

import java.util.HashMap;

import android.graphics.Bitmap;

public class Contact {

    String id = "";
    String displayName = "";
    String dateOfBirth = "";
    String dateOfAnniversary = "";
    String nickName = "";
    String note = "";
    Bitmap image = null;

    HashMap<Integer, String> emails;
    HashMap<Integer, String> phones;
    HashMap<Integer, Address> addresses;
    HashMap<Integer, Organization> organizations;
    HashMap<Integer, String> im;

    public String getId() {
        return id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public String getDisplayName() {
        return displayName;
    }

    public void setDisplayName(String displayName) {
        this.displayName = displayName;
    }

    public String getDateOfBirth() {
        return dateOfBirth;
    }

    public void setDateOfBirth(String dateOfBirth) {
        this.dateOfBirth = dateOfBirth;
    }

    public String getDateOfAnniversary() {
        return dateOfAnniversary;
    }

    public void setDateOfAnniversary(String dateOfAnniversary) {
        this.dateOfAnniversary = dateOfAnniversary;
    }

    public String getNickName() {
        return nickName;
    }

    public void setNickName(String nickName) {
        this.nickName = nickName;
    }

    public String getNote() {
        return note;
    }

    public void setNote(String note) {
        this.note = note;
    }

    public Bitmap getImage() {
        return image;
    }

    public void setImage(Bitmap image) {
        this.image = image;
    }

    public HashMap<Integer, String> getEmails() {
        return emails;
    }

    public void setEmails(HashMap<Integer, String> emails) {
        this.emails = emails;
    }

    public HashMap<Integer, String> getPhones() {
        return phones;
    }

    public void setPhones(HashMap<Integer, String> phones) {
        this.phones = phones;
    }

    public HashMap<Integer, Address> getAddresses() {
        return addresses;
    }

    public void setAddresses(HashMap<Integer, Address> addresses) {
        this.addresses = addresses;
    }

    public HashMap<Integer, Organization> getOrganizations() {
        return organizations;
    }

    public void setOrganizations(HashMap<Integer, Organization> organizations) {
        this.organizations = organizations;
    }

    public HashMap<Integer, String> getIm() {
        return im;
    }

    public void setIm(HashMap<Integer, String> im) {
        this.im = im;
    }

    /******************************************************************************************/
    static class Address {

        private String postBox = "";
        private String street = "";
        private String city = "";
        private String state = "";
        private String postalCode = "";
        private String country = "";
        private String neighborhood = "";

        public String getPostBox() {
            return postBox;
        }

        public void setPostBox(String postBox) {
            this.postBox = postBox;
        }

        public String getStreet() {
            return street;
        }

        public void setStreet(String street) {
            this.street = street;
        }

        public String getCity() {
            return city;
        }

        public void setCity(String city) {
            this.city = city;
        }

        public String getState() {
            return state;
        }

        public void setState(String state) {
            this.state = state;
        }

        public String getPostalCode() {
            return postalCode;
        }

        public void setPostalCode(String postalCode) {
            this.postalCode = postalCode;
        }

        public String getCountry() {
            return country;
        }

        public void setCountry(String country) {
            this.country = country;
        }

        public String getNeighborhood() {
            return neighborhood;
        }

        public void setNeighborhood(String neighborhood) {
            this.neighborhood = neighborhood;
        }

        @Override
        public String toString() {
            return "Address [postBox=" + postBox + "\n street=" + street
                    + "\n city=" + city + "\n state=" + state + "\n postalCode="
                    + postalCode + "\n country=" + country + "\n neighborhood="
                    + neighborhood + "]";
        }
    }

    /**********************************/
    static class Organization {
        private String company = "";
        private String jobTitle = "";

        public String getCompany() {
            return company;
        }

        public void setCompany(String company) {
            this.company = company;
        }

        public String getJobTitle() {
            return jobTitle;
        }

        public void setJobTitle(String jobTitle) {
            this.jobTitle = jobTitle;
        }

        @Override
        public String toString() {
            return "Organization [company=" + company + "\n jobTitle="
                    + jobTitle + "]";
        }
    }

    /**********************************/
    public static class Email_TYPE {
        // Email Type
        public static final int HOME = 1;
        public static final int WORK = 2;
        public static final int OTHER = 3;
        public static final int MOBILE = 4;
    }

    /**********************************/
    public static class PHONE_TYPE {
        // / Phone Type
        public static final int HOME = 1;
        public static final int MOBILE = 2;
        public static final int WORK = 3;
        public static final int FAX_WORK = 4;
        public static final int FAX_HOME = 5;
        public static final int PAGER = 6;
        public static final int OTHER = 7;
    }

    /**********************************/
    public static class ADDRESS_TYPE {
        // / Address Type
        public static final int HOME = 1;
        public static final int WORK = 2;
        public static final int OTHER = 3;
    }

    /**********************************/
    public static class ORGANIZATION_TYPE {
        // / Organization Type
        public static final int WORK = 2;
        public static final int OTHER = 3;
    }

    /**********************************/
    public static class IM_TYPE {
        public static final int CUSTOM = -1;
        public static final int AIM = 0;
        public static final int MSN = 1;
        public static final int YAHOO = 2;
        public static final int SKYPE = 3;
        public static final int QQ = 4;
        public static final int GOOGLE_TALK = 5;
        public static final int ICQ = 6;
        public static final int JABBER = 7;
        public static final int NETMEETING = 8;
    }

    @Override
    public String toString() {
        return "Contact [id=" + id + "\n displayName=" + displayName
                + "\n dateOfBirth=" + dateOfBirth + "\n dateOfAnniversary="
                + dateOfAnniversary + "\n nickName=" + nickName + "\n note="
                + note + "\n image=" + image + "\n emails=" + emails
                + "\n phones=" + phones + "\n addresses=" + addresses
                + "\n organizations=" + organizations + "\n im=" + im + "]";
    }

} 
```

PhoneContact.java

```
package com.android.addressbook.result;

import java.io.File;
import java.io.FileOutputStream;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.content.ContentResolver;
import android.content.Context;
import android.database.Cursor;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.provider.ContactsContract;

import com.android.addressbook.result.Contact.Address;
import com.android.addressbook.result.Contact.Organization;

public class PhoneContact {

    ContentResolver cr;
    List<Contact> contactList;
    Context context;

    public PhoneContact(Context context) {
        this.context = context;
        cr = context.getContentResolver();
        contactList = new ArrayList<Contact>();
        readContacts();
    }

    public void readContacts() {

        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, null);

        if (cur.getCount() > 0) {
            while (cur.moveToNext()) {

                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                    Contact contact = new Contact();

                    // Get contact id (id)
                    String id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                    contact.setId(id);

                    // Get contact name (displayName)
                    String displayName = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    contact.setDisplayName(displayName);

                    // Get BirthDay (dateOfBirth)
                    Uri URI_DOB = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_DOB = ContactsContract.Data.CONTACT_ID
                                            + " = ? AND "
                                            + ContactsContract.Data.MIMETYPE
                                            + " = ? AND "
                                            + ContactsContract.CommonDataKinds.Event.TYPE
                                            + "="
                                            + ContactsContract.CommonDataKinds.Event.TYPE_BIRTHDAY;
                    String[] SELECTION_ARRAY_DOB = new String[] {
                                            id,
                                            ContactsContract.CommonDataKinds.Event.CONTENT_ITEM_TYPE };

                    Cursor currDOB = cr.query(URI_DOB, null, SELECTION_DOB,SELECTION_ARRAY_DOB, null);
                    int indexDob = currDOB.getColumnIndex(ContactsContract.CommonDataKinds.Event.START_DATE);
                    if (currDOB.moveToNext()) {
                        String dobStr = currDOB.getString(indexDob);
                        contact.setDateOfBirth(dobStr);
                    }
                    currDOB.close();

                    // Get Anniversary (dateOfAnniversary)
                    Uri URI_DOA = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_DOA = ContactsContract.Data.CONTACT_ID
                                            + " = ? AND "
                                            + ContactsContract.Data.MIMETYPE
                                            + " = ? AND "
                                            + ContactsContract.CommonDataKinds.Event.TYPE
                                            + "="
                                            + ContactsContract.CommonDataKinds.Event.TYPE_ANNIVERSARY;
                    String[] SELECTION_ARRAY_DOA = new String[] {
                                            id,
                                            ContactsContract.CommonDataKinds.Event.CONTENT_ITEM_TYPE };

                    Cursor currDOA = cr.query(URI_DOA, null, SELECTION_DOA,SELECTION_ARRAY_DOA, null);
                    int indexDoa = currDOA.getColumnIndex(ContactsContract.CommonDataKinds.Event.START_DATE);
                    if (currDOA.moveToNext()) {
                        String doaStr = currDOA.getString(indexDoa);
                        contact.setDateOfAnniversary(doaStr);
                    }
                    currDOA.close();

                    // Get Nick Nmae(nickName)
                    Uri URI_NICK_NAME = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_NICK_NAME = ContactsContract.Data.CONTACT_ID
                                                + " = ? AND "
                                                + ContactsContract.Data.MIMETYPE
                                                + " = ?";
                    String[] SELECTION_ARRAY_NICK_NAME = new String[] {
                                                id,
                                                ContactsContract.CommonDataKinds.Nickname.CONTENT_ITEM_TYPE };

                    Cursor currNickName = cr.query(URI_NICK_NAME, null,
                                                SELECTION_NICK_NAME, SELECTION_ARRAY_NICK_NAME,
                                                null);

                    int indexNickName = currNickName.getColumnIndex(ContactsContract.CommonDataKinds.Nickname.NAME);
                    if (currNickName.moveToNext()) {
                        String nickNameStr = currNickName
                                .getString(indexNickName);
                        contact.setNickName(nickNameStr);
                    }
                    currNickName.close();

                    // GetNote(note)
                    Uri URI_NOTE = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_NOTE = ContactsContract.Data.CONTACT_ID
                                            + " = ? AND " + ContactsContract.Data.MIMETYPE
                                            + " = ?";
                    String[] SELECTION_ARRAY_NOTE = new String[] {
                                            id,
                                            ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE };

                    Cursor currNote = cr.query(URI_NOTE, null, SELECTION_NOTE,SELECTION_ARRAY_NOTE, null);
                    int indexNote = currNote.getColumnIndex(ContactsContract.CommonDataKinds.Note.NOTE);
                    if (currNote.moveToNext()) {
                        String noteStr = currNote.getString(indexNote);
                        contact.setNote(noteStr);
                    }
                    currNote.close();

                    // Get User Image (image)
                    Uri URI_PHOTO = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_PHOTO = ContactsContract.Data.CONTACT_ID
                                                + " = ? AND " + ContactsContract.Data.MIMETYPE
                                                + " = ?";
                    String[] SELECTION_ARRAY_PHOTO = new String[] {
                                                id,
                                                ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE };

                    Cursor currPhoto = cr.query(URI_PHOTO, null,SELECTION_PHOTO, SELECTION_ARRAY_PHOTO, null);
                    int indexPhoto = currPhoto.getColumnIndex(ContactsContract.CommonDataKinds.Photo.PHOTO);

                    while (currPhoto.moveToNext()) {

                        byte[] photoByte = currPhoto.getBlob(indexPhoto);

                        if (photoByte != null) {
                            Bitmap bitmap = BitmapFactory.decodeByteArray(photoByte, 0, photoByte.length);

                            // Getting Caching directory
                            File cacheDirectory = context.getCacheDir();

                            // Temporary file to store the contact image
                            // File tmpFile = new File(cacheDirectory.getPath()
                            // + "/image_"+id+".png");
                            File tmpFile = new File(cacheDirectory.getPath()+ "/image_.png");

                            // The FileOutputStream to the temporary file
                            try {
                                FileOutputStream fOutStream = new FileOutputStream(tmpFile);

                                // Writing the bitmap to the temporary file as png file
                                bitmap.compress(Bitmap.CompressFormat.PNG, 100,fOutStream);

                                // Flush the FileOutputStream
                                fOutStream.flush();

                                // Close the FileOutputStream
                                fOutStream.close();

                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                            // String photoPath = tmpFile.getPath();
                            contact.setImage(bitmap);
                        }
                    }
                    currPhoto.close();

                    // Get Email and Type.... (<HashMap<Integer, String> emails)
                    Uri URI_EMAIL = ContactsContract.CommonDataKinds.Email.CONTENT_URI;
                    String SELECTION_EMAIL = ContactsContract.CommonDataKinds.Email.CONTACT_ID+ " = ?";
                    String[] SELECTION_ARRAY_EMAIL = new String[] { id };

                    Cursor emailCur = cr.query(URI_EMAIL, null,SELECTION_EMAIL, SELECTION_ARRAY_EMAIL, null);
                    int indexEmail = emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA);
                    int indexEmailType = emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE);

                    if (emailCur.getCount() > 0) {

                        HashMap<Integer, String> emailMap = new HashMap<Integer, String>();

                        while (emailCur.moveToNext()) {
                            // This would allow you get several email addresses,
                            // if the email addresses were stored in an array
                            String emailStr = emailCur.getString(indexEmail);
                            String emailTypeStr = emailCur.getString(indexEmailType);
                            emailMap.put(Integer.parseInt(emailTypeStr),emailStr);
                        }
                        contact.setEmails(emailMap);
                    }
                    emailCur.close();

                    // Get Phone Number....(HashMap<Integer, String>phones)
                    Uri URI_PHONE = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
                    String SELECTION_PHONE = ContactsContract.CommonDataKinds.Phone.CONTACT_ID+ " = ?";
                    String[] SELECTION_ARRAY_PHONE = new String[] { id };

                    Cursor currPhone = cr.query(URI_PHONE, null,SELECTION_PHONE, SELECTION_ARRAY_PHONE, null);
                    int indexPhoneNo = currPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
                    int indexPhoneType = currPhone.getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE);

                    if (currPhone.getCount() > 0) {
                        HashMap<Integer, String> phoneMap = new HashMap<Integer, String>();
                        while (currPhone.moveToNext()) {
                            String phoneNoStr = currPhone.getString(indexPhoneNo);
                            String phoneTypeStr = currPhone.getString(indexPhoneType);

                            phoneMap.put(Integer.parseInt(phoneTypeStr),phoneNoStr);
                        }
                        contact.setPhones(phoneMap);
                    }
                    currPhone.close();

                    // Get Postal Address....(HashMap<Integer, Address> addresses)
                    Uri URI_ADDRESS = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_ADDRESS = ContactsContract.Data.CONTACT_ID
                                                + " = ? AND " + ContactsContract.Data.MIMETYPE
                                                + " = ?";
                    String[] SELECTION_ARRAY_ADDRESS = new String[] {
                                                id,
                                                ContactsContract.CommonDataKinds.StructuredPostal.CONTENT_ITEM_TYPE };

                    Cursor currAddr = cr.query(URI_ADDRESS, null,SELECTION_ADDRESS, SELECTION_ARRAY_ADDRESS, null);
                    int indexAddType = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.TYPE);
                    int indexStreet = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.STREET);
                    int indexPOBox = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POBOX);
                    int indexNeighbor = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.NEIGHBORHOOD);
                    int indexCity = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.CITY);
                    int indexRegion = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.REGION);
                    int indexPostCode = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.POSTCODE);
                    int indexCountry = currAddr
                            .getColumnIndex(ContactsContract.CommonDataKinds.StructuredPostal.COUNTRY);

                    if (currAddr.getCount() > 0) {
                        HashMap<Integer, Address> addressMap = new HashMap<Integer, Contact.Address>();
                        while (currAddr.moveToNext()) {

                            Contact.Address address = new Contact.Address();

                            String typeStr = currAddr.getString(indexAddType);

                            address.setStreet(currAddr.getString(indexStreet));
                            address.setNeighborhood(currAddr.getString(indexNeighbor));
                            address.setPostalCode(currAddr.getString(indexPostCode));
                            address.setPostBox(currAddr.getString(indexPOBox));
                            address.setCity(currAddr.getString(indexCity));
                            address.setState(currAddr.getString(indexRegion));
                            address.setCountry(currAddr.getString(indexCountry));

                            addressMap.put(Integer.parseInt(typeStr), address);
                        }
                        contact.setAddresses(addressMap);
                    }
                    currAddr.close();

                    // Get Organization (HashMap<Integer, Organization> organizations)
                    Uri URI_ORGNIZATION = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_ORGNIZATION = ContactsContract.Data.CONTACT_ID
                                                    + " = ? AND "
                                                    + ContactsContract.Data.MIMETYPE
                                                    + " = ?";
                    String[] SELECTION_ARRAY_ORGNIZATION = new String[] {
                                                    id,
                                                    ContactsContract.CommonDataKinds.Organization.CONTENT_ITEM_TYPE };

                    Cursor currOrg = cr.query(URI_ORGNIZATION, null,
                                                    SELECTION_ORGNIZATION, SELECTION_ARRAY_ORGNIZATION,
                                                    null);
                    int indexOrgType = currOrg
                            .getColumnIndex(ContactsContract.CommonDataKinds.Organization.TYPE);
                    int indexOrgName = currOrg
                            .getColumnIndex(ContactsContract.CommonDataKinds.Organization.DATA);
                    int indexOrgTitle = currOrg
                            .getColumnIndex(ContactsContract.CommonDataKinds.Organization.TITLE);

                    if (currOrg.getCount() > 0) {
                        HashMap<Integer, Organization> orgMap = new HashMap<Integer, Contact.Organization>();
                        while (currOrg.moveToNext()) {

                            Contact.Organization organization = new Organization();

                            String orgTypeStr = currOrg.getString(indexOrgType);

                            organization.setCompany(currOrg.getString(indexOrgName));
                            organization.setJobTitle(currOrg.getString(indexOrgTitle));

                            orgMap.put(Integer.parseInt(orgTypeStr),organization);
                        }
                        contact.setOrganizations(orgMap);
                    }
                    currOrg.close();

                    // Get Instant Messenger..... (HashMap<Integer, String> im)
                    Uri URI_IM = ContactsContract.Data.CONTENT_URI;
                    String SELECTION_IM = ContactsContract.Data.CONTACT_ID
                                            + " = ? AND " + ContactsContract.Data.MIMETYPE
                                            + " = ?";
                    String[] SELECTION_ARRAY_IM = new String[] {
                                            id,
                                            ContactsContract.CommonDataKinds.Im.CONTENT_ITEM_TYPE };

                    Cursor currIM = cr.query(URI_IM, null, SELECTION_IM,SELECTION_ARRAY_IM, null);
                    int indexName = currIM
                            .getColumnIndex(ContactsContract.CommonDataKinds.Im.DATA);
                    int indexType = currIM
                            .getColumnIndex(ContactsContract.CommonDataKinds.Im.PROTOCOL);

                    if (currIM.getCount() > 0) {
                        HashMap<Integer, String> imMap = new HashMap<Integer, String>();
                        while (currIM.moveToNext()) {
                            String imNameStr = currIM.getString(indexName);
                            String imTypeStr = currIM.getString(indexType);

                            imMap.put(Integer.parseInt(imTypeStr), imNameStr);
                        }
                        contact.setIm(imMap);
                    }
                    currIM.close();
                    /*****************************************/
                    contactList.add(contact);
                }
            }
        }
        cur.close();
    }

    public List<Contact> getAllContacts() {
        return contactList;
    }
} 
```

最后在您的活动中使用它：

```
PhoneContact pCon = new PhoneContact(context);
        List<Contact> conList = pCon.getAllContacts();

        HashMap<Integer, String> phones = conList.get(0).getPhones();
        String home = phones.get(Contact.PHONE_TYPE.HOME); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:52:23.393

这是教程。我想它可能会帮助你。检查一次

[使用 Android 联系人](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T05:53:47.740

希望这个片段可以帮助你

```
 String id , name;
ContentResolver cr = getContentResolver();

     String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

     Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,  null, null, null, sortOrder);

      if (cur.getCount() > 0) {

            while (cur.moveToNext()) {

                id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));

                name = cur.getString( cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                Log.i(tag, "Id is "+ id+"\t Name is"+name);

            if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0){                      

                        Cursor pCur = cr.query( ContactsContract.CommonDataKinds.Phone.CONTENT_URI,

                            null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", new String[]{id}, null);

// this second loop will retrieve all the contact numbers for a paricular contact id 
                        while (pCur.moveToNext()) {

                // Do something with phones

                       int phNumber = pCur.getColumnIndexOrThrow(ContactsContract.CommonDataKinds.Phone.NUMBER);

                       String phn = pCur.getString(phNumber);

                       Log.i("phn number",  phn);

                    } 

                    pCur.close();

                }

                }

    } 
```

# javascript - 未捕获的类型错误：无法调用未定义的方法“hasChildNodes”

> ID：14681051
> 
> 赞同：1
> 
> 时间：2013-02-04T05:48:16.163
> 
> 标签：javascript, xml, google-chrome, jquery

我正在尝试在 jquery 中使用 ajax 请求读取 XML。下面是代码，它在 IE 中运行良好，但是当我在 Chrome 上运行它时，我遇到了这个错误

> 未捕获的类型错误：无法调用未定义的方法“hasChildNodes”

```
$.ajax({

    type: "GET",
    url: "tree1.xml",
    dataType:"xml",
    success: function(xml){
        root=xml.documentElement;
        childs=root.childNodes;
        for(var i=0;i<childs.length;i++){
            z=childs[i].childNodes;
            adChilds(z,childs,oNode);

            function adChilds(a,b,c){
                if(a[i].hasChildNodes()){
                    adNode(b[i].nodeName,c);
                    var oNode_ch=oNode1;
                    for(var j=0;j<a.length;j++){
                        child1=a[j].childNodes;
                        adNode(child1[0].nodeValue,oNode_ch);
                    }
                }
                else{adNode(a[0].nodeValue,oNode);}
            }
        } 
```

错误指向这一行。

**if(a[i].hasChildNodes()){**

谁能建议我哪里出错了。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T05:52:34.077

你这样做：

```
z=childs[i].childNodes; 
```

然后，在 的第一行中`adChilds(z,childs,oNode);`，您正在执行以下操作：

```
if(a[i].hasChildNodes()){ 
```

但是，`i`不是 的子级的索引`a`。它是 a 的孩子的父母的索引。因此，如果父级的`a`子级数量与`a`拥有子级的数量不同，则您将超出索引。

我不确切知道您要在 adChilds() 中完成什么，所以我不确定要建议什么修复方法，但我假设您如果要处理 的孩子`a`，您应该获得孩子的数量并`a`确保您只访问实际存在的号码

* * *

一些编码建议：

1.  我强烈建议你使用真正的变量名。像`a`,`b`和中间变量这样的名称是晦涩难懂的`c`，`z`使您的代码难以阅读。

2.  所有局部变量都应该`var`在第一次定义之前（或在函数顶部定义），否则它们会成为自找麻烦的全局变量，尤其是异步回调函数。

3.  当您在第一次检查代码时看到对您来说并不明显的错误时，请在您最喜欢的调试器中设置一个断点并单步执行代码并检查变量的状态，以了解您收到错误的确切原因。如果您不知道如何使用调试器，请学习。它们内置于大多数浏览器中，对于高效调试来说非常简单且绝对必要。

# java - 无法从网站获取数据

> ID：14681053
> 
> 赞同：-1
> 
> 时间：2013-02-04T05:48:22.163
> 
> 标签：java, jsp

我是java新手。

我试图在单击 .jsp 页面中的按钮时从网页中获取数据。我使用 Window.open() 打开网页，但无法从该网页获取控制值。

我刚刚尝试使用 Window.open()。无需打开该网页。唯一的问题是，我们需要通过打开页面或不打开该页面来从该网页读取数据。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:12:12.083

不知道你想说什么。但我猜你想将值从子窗口传递给父窗口。为此，您需要使用下面的代码。

```
opener.document.form.parent_field.value =  document.form.child_field.value; 
```

此代码将进入您的子窗口。它所做的是将名为“parent_filed”的父字段中的值设置为子字段名称“child_field”中的值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:29:11.173

我不太清楚这个问题。但会尝试重新措辞-

```
 What you are trying to do is open any web page from your JSP (using some Window.open()) & then access any element from the web page into your JSP. 
```

我个人认为这是否可以做到，因为从任何页面访问机密数据[如密码等]都会构成严重的安全威胁。

# .htaccess - 在添加尾部斜杠 2 个子目录时，mod_rewrite 规则中断

> ID：14681054
> 
> 赞同：0
> 
> 时间：2013-02-04T05:48:37.670
> 
> 标签：.htaccess, mod-rewrite

我对 mod 重写规则非常非常陌生，并且遇到了我用来将以前托管在子目录中的站点重定向到新域的问题。这是我正在使用的规则：

```
RewriteEngine on
RewriteBase /oldsite/ #also tried this without the trailing slash
RewriteRule ^.* http://newsite.com [R=301,NC,L] 
```

在您获得 3 层深度并在重定向的 url 中添加尾部斜杠之前，这非常有效。因此，结果如下所示：

*   olddomain.com/oldsite 重定向到 newsite.com [正确]
*   olddomain.com/oldsite/ 重定向到 newsite.com [正确]
*   olddomain.com/oldsite/subdirectory 重定向到 newsite.com/subdirectory [正确]
*   olddomain.com/oldsite/subdirectory/ 重定向到 newsite.com [不正确！]

我觉得我 99% 都在那里，但是把我的头发拉出来一点，弄清楚最后一点。知道我需要改变什么吗？

谢谢！

此外，我测试了将 .htaccess 文件放在公共 html 文件夹以及 /oldsite 文件夹中，并且站点上的其他地方没有其他 htaccess 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:22:05.990

你快到了，把它放在你服务器上 /oldsite 的 .htaccess 中：

```
RewriteEngine On
RewriteRule (^.*) http://newsite.com/$1 [R=301,NC,L] 
```

当您将匹配的正则表达式放在括号中时，它就可以用作 $1。如果你有多个，第一个是 1 美元，第二个是 2 美元，以此类推。

我建议阅读 mod_rewrite 的手册页，特别是 rewriterule 部分（[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)）。

# php - 如何使网站的第一部分首先加载？（就像在 Google PageSpeed 中一样）

> ID：14681058
> 
> 赞同：18
> 
> 时间：2013-02-04T05:49:05.777
> 
> 标签：php, html, performance, optimization, pagespeed

我有一个非常大的网站，加载需要很长时间。大约需要 120 秒。我想要做的是加载网站的第一半加载第一。然后用户可以在加载其他部件的同时冲浪。

我想要做的是下面。

![在此处输入图像描述](../Images/9d63f2d7d8bfb30d0d757a6cf056f048.png)

*   **首先，这可能吗？**

据我所知，是的，因为 Google PageSpeed 就是这样做的。但问题是，如果我使用 PageSpeed，我将不得不更改我的 DNS 服务器设置等。我想自己做这件事。

*   **我怎样才能完成它？**
*   **我应该使用什么类型的技术？**

鉴于页面具有`.php`扩展名并用 PHP 语言编写。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T06:15:35.807

您可以使用延迟加载的概念。

您可以仅加载加载过程中需要的内容，然后使用 jquery 和 ajax 加载剩余的内容。

通过这种方式，用户可以轻松地浏览并与已加载的部分进行交互，而另一部分将异步加载。

jQuery [ajax](http://api.jquery.com/jQuery.ajax/)或[post](http://api.jquery.com/jQuery.post/)方法可以帮助你。

一个简单的例子可能是，

如果你的页面内容有5个部分，需要立即加载2个

1.  该页面将加载 2 个部分，因此加载时间比加载 5 个部分要少得多

2.  加载文档后，您将使用 ajax 加载剩余的 3 个部分。Ajax 将使用一些参数向您网站的特定页面（可能命名为 AjaxRequestHandler.php）发送请求，该页面将处理您的请求并为此生成 html 并将其发送回您的主页，该主页将显示此返回的 html 并且这一切都是异步发生的，因此用户将能够与最初加载的 2 个部分进行通信

而且即使你是 Web 技术的新手，我想你也必须具备至少 ajax 和异步调用等方面的知识才能实现延迟加载。

**编辑 ：**

对于你的这个问题

> 除了 AJAX 有没有办法解决这个问题？

我认为如果他们可以提供帮助，您可以尝试 iframe。

在页面加载后加载页面中的主要内容而不加载 iframe，而在 iframe 中加载其他内容。

这个 jsFiddle

jsfiddle.net/cGDuV/

可以帮助您了解使用 iframe 进行延迟加载，在stackoverflow的这篇[文章中提到。](https://stackoverflow.com/questions/7154958/lazy-load-iframe-delay-src-http-call-with-jquery)

如果你想避免使用 jquery，你可以使用 javascript。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-14T19:33:52.503

您可以操纵输出缓冲区，使其尽早刷新，从而实现您在问题中发布的屏幕截图中的内容。 [http://www.stevesouders.com/blog/2013/01/31/http-archive-adding-flush/](http://www.stevesouders.com/blog/2013/01/31/http-archive-adding-flush/)

您可以延迟加载所有图像。这是一个 jquery 插件，可以轻松完成 [http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)

您可以将所有 js 合并到一个文件中。与您的 css 文件相同。这将有助于提高速度。

您可以合并缓存、过期标头和 gzip/deflate 压缩 [https://github.com/h5bp/html5-boilerplate/blob/master/dist/.htaccess](https://github.com/h5bp/html5-boilerplate/blob/master/dist/.htaccess)

我建议您以非阻塞异步方式加载您的 3rd 方 javascript 小部件垃圾（Google+ 按钮、类似按钮的 fabebook、社交、Twitter 的东西），这样它就不会在开始时减慢页面速度。 [http://css-tricks.com/thinking-async/](http://css-tricks.com/thinking-async/)

尽可能优化您的图像。 [http://kraken.io/](http://kraken.io/)

使用 CDN [http://www.maxcdn.com/](http://www.maxcdn.com/)

最后测试您的网站，看看哪里是最大的瓶颈，以及您可以在哪里改进网站以优化速度。使用瀑布图功能 [http://www.webpagetest.org/](http://www.webpagetest.org/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T06:15:04.677

您可以做的一件事是正常加载页面的所有基本内容（上半部分），然后使用 javascript/ajax 加载页面的后半部分。这是一种非常常见的技术（通常用于加载图像）。

这是 jQuery for Designers 的优秀教程，介绍了如何在页面加载后使用 jQuery 异步加载图像。[http://jqueryfordesigners.com/image-loading/](http://jqueryfordesigners.com/image-loading/)

话虽如此，两分钟的加载时间似乎非常过长。也许您应该检查是否有任何东西可能会降低您的服务器速度。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-12T16:29:31.007

您需要确定网站加载缓慢的原因。您发送的数据大小是多少？Google 和 Firefox 拥有 Web 开发人员工具，可帮助您确定哪些元素的加载时间最长。一旦确定了罪魁祸首，请尝试异步加载最严重的违规者。

查看这篇关于异步请求的文章：[https ://segment.io/blog/how-to-make-async-requests-in-php/](https://segment.io/blog/how-to-make-async-requests-in-php/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-18T15:04:37.363

在我看来，你需要一个无尽的滚动解决方案。也就是说，每个“页面”的内容量是固定的（估计值可能是 1500 像素的高度）。当用户向下滚动一定量时，使用 jQuery 加载另一个“页面”。

如果您真的想无条件加载所有内容，只需使用相同的方法，并在文档准备好时触发下一页加载。循环页面加载器，直到加载整个内容。这样，您加载第一个“页面”，并将“首屏下方”的内容推迟到后续请求。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-19T01:44:39.387

您想要的是 Facebook 所做的[**Bigpipe**](http://www.facebook.com/note.php?note_id=389414033919)，这是一个相关的 SO 帖子：[Facebook Bigpipe 技术算法](https://stackoverflow.com/questions/9106651/facebook-bigpipe-technique-algorihtm)

还有其他涉及各种 Javascript 的解决方案，但由于您希望**PHP**和 Facebook 使用**PHP**，您应该阅读 Bigpipe。[Juho 甚至有一个用 PHP 编写的示例，](http://www.juhonkoti.net/2010/10/01/open-bigpipe-javascript-implementation)因此应该可以满足您的 PHP 要求（但是是的，它仍然需要 js 而不是 AJAX）。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-19T07:12:56.570

*预取资源*网页需要加载大文件的资源通常可以从更改从服务器请求这些文件的顺序中受益。有时，在需要之前下载文件是有意义的，以便在请求后立即可用。当可以提前加载页面所需的资源时，可以显着减少甚至消除该页面的用户感知网络延迟。当您运行 Google pagespeed 洞察并查看结果时，您将看到如何解决您网站中的问题。

一些加快网站加载速度的技巧：

*   减少 HTTP 请求
*   添加一个遥远的未来过期标头
*   Gzip 页面的组件
*   缩小你的 JavaScript、CSS 和 HTML

加载网页时的另一件事，如果您将 php 与 smarty 一起使用，您可以使用此[插件](http://aciddrop.com/2008/01/03/automatically-join-your-javascript-and-css-into-a-single-file/)，通过将所有 js 和 css 资源的请求组合成一个 HTTP 请求，减少对服务器的 http 请求数量并加快网站加载速度.

或者，您可能正在寻找这些插件。

[http://masonry.desandro.com/](http://masonry.desandro.com/)

[http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

[http://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-04T07:45:59.950

所有这些东西*都*必须在同一页面上吗？将内容拆分到多个页面是否有意义？可以将其中的一些延迟到该人请求之前吗？它可以分组到选项卡中吗？例如，隐藏的选项卡可能会被延迟加载。

认真考虑以其他方式重组内容。您也许可以想出一种替代方案来简化问题。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-15T15:16:11.853

考虑到上面提到的所有内容，您可能会考虑使用 memcache 或以任何其他可能的方式缓存部分数据/html 代码，以便您每次都跳过它的生成。当然，这在很大程度上取决于数据更改的频率。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-02-18T04:46:49.973

浏览器不会在文档进入时呈现文档吗？您放在文件顶部的任何内容都将首先被客户端接收，因此将首先显示。例如，当您尝试在线查看一个非常大的图像文件时，它会从上到下加载。网页也是如此。只需将要加载的内容放在页面顶部即可！

对问题一的回答：是 对问题二的回答：上面对问题三的回答：什么都没有，只需将页面按正确的顺序排列即可。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-18T12:46:16.670

好吧，这个想法或多或少与上面 Pawan Nogariya 描述的相同。您将需要异步获取视图和数据，然后显示它们。但这意味着您永远不会重定向或回发到任何其他页面，而是会通过 ajaz 获得所有视图。这将使您像 Gmail 一样应用 SPA（单页应用程序）。而且，这也意味着您需要跟踪已渲染的内容和未渲染的内容，从而使您一团糟。因此，与其按照您的方式做所有事情，已经开发和流行的框架可以让您这样做，但它们也使其成为 SPA。这意味着您的应用程序不会像重定向那样“发布”到服务器，但一切都是使用 Ajax 完成的。

您可以使用 Backbone ( [Backbone.js](http://backbonejs.org/) )、Knockout ( [Knockout.js](http://knockoutjs.com/) ) 和其他人来实现这一点。这些是基于 javascript 的框架，有助于实现您刚刚提出的问题，并且可以举例说明，而且教程也很容易获得。您可以将它与任何语言一起使用，就像我们将它与 C# (MVC) 一起用于相对较大的应用程序一样。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2013-02-18T13:43:33.973

这将是丑陋的！您**绝对**应该考虑在加载第一个内容阶段之后使用 ajax 调用来加载页面片段！这将打破几乎所有已知的网络标准，但它可能会部分呈现网站......

话虽这么说：这是丑陋的东西

第一：去掉`<html>`你网站的标签，`<head>`从不使用`<body>`标签开始。`echo ...` 现在，在组的每个结束标记（比如`</table>`or `</div>`）使用之后，按照您希望加载的顺序（顶部优先）发送您的 html 代码`flush(); ob_flush();`这将立即将所有已知内容发送到浏览器。浏览器现在决定它是否可以呈现已知内容以及是否可以（基于浏览器的细节和用户设置），但几乎没有例外。一些浏览器喜欢等待结束的 body-tag，这就是我们放弃它的原因，其他浏览器甚至等待结束的 html 标签（safari afair），这也是我们放弃它的原因。如果您明智地使用 echo-flush 场景，您应该能够将页面拆分为可渲染的部分，大多数浏览器将在没有错误的情况下显示这些部分。

**再次......不要这样做......它很糟糕，丑陋，甚至不接近任何网络标准**

但是你要求的。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-02-18T14:01:28.603

对于你的这个问题

> 除了 AJAX 有没有办法解决这个问题？

我认为如果他们可以提供帮助，您可以尝试 iframe。

在页面加载后加载页面中的主要内容而不加载 iframe，而在 iframe 中加载其他内容。

这个 jsFiddle

jsfiddle.net/cGDuV/

可以帮助您了解使用 iframe 进行延迟加载，在stackoverflow的这篇[文章中提到。](https://stackoverflow.com/questions/7154958/lazy-load-iframe-delay-src-http-call-with-jquery)

如果你想避免使用 jquery，你可以使用 javascript。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2013-02-16T19:58:34.253

用纯PHP？不聪明。

`$(function() { $('#body').delay(1).fadeOut(); });`

小提琴示例：http: [//jsfiddle.net/r7MgY/](http://jsfiddle.net/r7MgY/)

# jquery - 使用选项拖放多项选择

> ID：14681065
> 
> 赞同：1
> 
> 时间：2013-02-04T05:49:30.077
> 
> 标签：jquery, jquery-ui

我有两个带有选项的多项选择。我想要将选项从一个多选元素拖放到另一个元素。

问题是我猜多选不允许拖动。现在我正在尝试在单击任何选项时创建一个新的可拖动元素并将其附加到正文。它工作正常。但问题是当我单击并开始拖动选项时，我无法开始拖动我的元素。我必须再次单击并开始拖动我的可拖动元素。

是否有任何事件开始拖动？这样我可以在创建新元素后点击选项触发？所以感觉我的选择是拖后腿的。

**注意：在我的情况下，我只能使用多项选择。我不能在这里使用 jQuery UI sortable 或其他类型的小部件。**

**这就是我想要做的。现在是粗略的想法。解决后我会重构它**

```
$(document).on('mousedown', 'select option', function(e) {
    var self = $(this);
    var offset = self.offset();
    var draggableDiv = $('<div />').prop('id', 'draggable').css({
        position: 'absolute',
        left: offset.left,
        top: offset.top,
        width: self.width(),
        height: self.height(),
        cursor: 'default',
        background: '#ff0',
        opacity: 0.5
    }).text(self.text());
    $('body').append(draggableDiv);

    draggableDiv.draggable({
        revert: true,
        containment: 'window'
    });

    // function to start drag goes here
    draggableDiv.trigger('dragstart');
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:07:36.957

我改变了事件的目标，在将它传递给可拖动之前，也是固定位置（见评论）

```
$(document).on('mousedown', 'select option', function(e) {
    var self = $(this);
    var offset = self.offset();
    var draggableDiv = $('<div />').prop('id', 'draggable').css({
        position: 'absolute',
        left: e.pageX,   // <-HERE
        top:  e.pageY,
        width: self.width(),
        height: self.height(),
        cursor: 'default',
        background: '#ff0',
        opacity: 0.5
    }).text(self.text());
    $('body').append(draggableDiv);

    draggableDiv.draggable({
        revert: true,
        containment: 'window'
    });
    e.target=draggableDiv.get(0);  // <-HERE
    // function to start drag goes here
    draggableDiv.trigger(e);
}); 
```

[演示](http://jsfiddle.net/oceog/3zHjt/)

[其他演示](http://jsfiddle.net/oceog/Y5GWq/)- 对我来说看起来更准确

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:38:57.520

```
$(document).ready(function(){
    $(".droppable").droppable({
       drop: function(event, ui) {
        var $list = $(this);
        $helper = ui.helper;
        $($helper).removeClass("selected");
        var $selected = $(".selected");                 
        if($selected.length > 1){                       
            moveSelected($list,$selected);
        }else{
            moveItem(ui.draggable,$list);
}                                       
        }, tolerance: "touch"
         });

             $(".draggable").draggable({
                revert: "invalid",
                helper: "clone",
                cursor: "move",
                drag: function(event,ui){
                    var $helper = ui.helper;
                    $($helper).removeClass("selected");
                    var $selected = $(".selected"); 
                    if($selected.length > 1){   
                        $($helper).html($selected.length + " items");
                    }                                       
                }
             });

            function moveSelected($list,$selected){
                $($selected).each(function(){
                    $(this).fadeOut(function(){
                        $(this).appendTo($list).removeClass("selected").fadeIn();
                    });                 
                });             
            }

            function moveItem( $item,$list ) {
                $item.fadeOut(function() {
                    $item.find(".item").remove();
                    $item.appendTo( $list ).fadeIn();
                });
            }

            $(".item").click(function(){
                $(this).toggleClass("selected");
            });

        }); 
```

[http://jsfiddle.net/caferdo/k5XJv/3/](http://jsfiddle.net/caferdo/k5XJv/3/)

这是一个例子

# python - F2PY 找不到模块

> ID：14681068
> 
> 赞同：2
> 
> 时间：2013-02-04T05:49:56.817
> 
> 标签：python, import, module, fortran, f2py

我很难在 Python 中使用 f2py 编译模块。

我有一个用 Fortran 编写的软件，可以在 Linux 64 位机器上很好地编译。F2Py 进一步编译了一个 Python 模块，该模块也使用 Fortran 位。

以下是 Python 模块的编译方式：

```
f2py --fcompiler=gfortran -I"path-to-dir-with-mod-files" -c -m mod_landems mod_landem.f90 
```

但是，一旦我想导入该模块，就会出现错误（在 Ipython 中）：

```
----> 1 import mod_landems
ImportError: ./mod_landems.so: undefined symbol: __nesdis_landem_module_MOD_nesdis_landem 
```

老实说，我对这个错误感到困惑。搜索没有太大帮助，所以我需要在这里问你：我怎样才能让它工作？如果我将 python 模块代码放在与 mod 文件所在的目录相同的目录中，则会产生相同的错误消息。

这是我的一段（原始）代码：

```
module n_landem
implicit none

! INPUT VARIABLES
real(8) Angle
real(8) Sm_Content
real(8) Veg_Frac
real(8) Soil_Temp
real(8) Land_Temp
real(8) Snow_Depth
real(8) Frequency

! OUTPUT VARIABLES
real(8) Emis_H
real(8) Emis_V

contains

subroutine landem

  USE NESDIS_LANDEM_MODULE
  USE TYPE_KINDS, ONLY : fp

  call NESDIS_LandEM(Angle,Frequency,Sm_Content,Veg_Frac,Soil_Temp,Land_Temp,Snow_Depth,Emis_H,Emis_V)
end subroutine landem
end module n_landem 
```

如果我前段时间没记错的话，这个模块是可导入的，但似乎无法使其在 debian64 安装或 debian32bit 计算机上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:55:31.800

在你的*f2py*调用中，你必须传递你用'-l'显式链接的库，就像你将它传递给你的 Fortran 编译器（即 gfortran）一样。因此，是否

```
f2py -c --fcompiler=gfortran -I"path-to-dir-with-mod-files" --fcompiler=gfortran -I"path-to-dir-with-mod-files" -lNESDIS_LandEM_Module -m mod_landems mod_landem.f90 -m mod_landems mod_landem.f90 
```

为你工作？

最好的，马克斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T04:04:32.210

我正在做一个类似的项目，对 Fortran 也很陌生。使用下面的参考资料，我发现您导入 fortran 模块就像导入库然后类似地调用函数一样。 [http://cens.ioc.ee/projects/f2py2e/usersguide/#the-quick-and-smart-way](http://cens.ioc.ee/projects/f2py2e/usersguide/#the-quick-and-smart-way)

# mysql - 无法从 C 程序连接到 mysql 套接字

> ID：14681072
> 
> 赞同：0
> 
> 时间：2013-02-04T05:50:06.220
> 
> 标签：mysql, c, macos, sockets, connection

我正在开发一个访问 mysql 的 C 程序。我的代码中有以下行：

```
sts = connect_to_server(&mysql, "localhost", "my_username",
            "my_password, "my_databasename"); 
```

当然，替换为实际值。我得到：

> 连接MySQL失败：错误：无法通过套接字'/tmp/mysql.sock'连接到本地MySQL服务器（2）

我见过其他类似的问题，答案通常是服务器已关闭。在这种情况下，它不是。PHPMyAdmin 可以正常访问服务器。

并且许多其他响应说要检查套接字文件。它存在

```
(/Applications/AMPPS/mysql/tmp/mysql.sock). 
```

这可能与路径有关吗？它没有添加到“ `/temp/mysql.sock`”的路径，因此找不到它？

我对unix知之甚少。我已经运行 OSX 将近 10 年了，但我几乎从来没有降到那个水平。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:41:37.303

我认为错误的 my.ini 正在加载。默认情况下，它会查看 /etc/my.ini，所以如果它存在，只需重命名或删除它。重新启动您的 MySQL 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:11:31.260

查看 mysql 配置文件（通常`my.cnt`位于 下`/etc`）并调整值`socket`以满足您的需要。

或者，您可以链接`/tmp/mysql.sock`到`/Applications/AMPPS/mysql/tmp/mysql.sock`：

```
ln -s /Applications/AMPPS/mysql/tmp/mysql.sock /tmp/mysql.sock 
```

# php - 如何在 Yii 框架中按匹配数对 MySql 查询进行排序？

> ID：14681081
> 
> 赞同：1
> 
> 时间：2013-02-04T05:51:43.347
> 
> 标签：php, mysql, yii

假设我有一个带有列产品名称的表。有各种各样的产品。我试图从表中找出与产品名称与关键字匹配的一些关键字。例如，我有一个数组 $keyword，其中包含 {nokia, lumia, 510} 等元素。现在在我的数据库中，我有一个包含许多诺基亚 lumia 产品的表。当我通过这个查询从数据库中进行搜索时，它需要 dataProvider 中的所有 nokia lumia 产品。我所做的基本上是，获取每个关键字并对其进行类似 %keyword% 的搜索。像这样的东西。

```
foreach($keywords as $k)
                $array[] = "product_name LIKE '%$k%'";

            $criteria->condition = implode(" OR ", $array); 
```

它给出了包含 product_name 中任何关键字的所有结果，这很好。但是我想根据关键字中的匹配数来缩短查询。就像，如果我有一个产品名称“Nokia Lumia 510”，那么它匹配这三个案例，那么它应该在第 1 位，在“Nokia Lumia”产品的其余部分之后，因为它们匹配 2 个关键字。如何在 yii 上制作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:24:00.977

使用带有 case 条件的 order by 子句

# c# - 从两个逗号分隔的字符串参数更新 SQL Server 中的表

> ID：14681084
> 
> 赞同：-1
> 
> 时间：2013-02-04T05:51:54.380
> 
> 标签：c#, sql-server-2008-r2

> **可能重复：**
> [从两个逗号分隔的参数作为输入更新表](https://stackoverflow.com/questions/14681422/update-a-table-from-two-comma-separated-parameter-as-input)

我在前端有一个 Gridview，其中 Grid 有两列：ID 和 Order，如下所示：

```
 ID        Order

 1           2
 2           4
 3           1
 4           3 
```

订单栏是可编辑的。现在，如果我想更新订单并进行保存，我想将其存储到数据库中。我已将 ID 和 Order 存储为逗号分隔的字符串，例如 sID(1,2,3,4) 和 sOrder(2,4,1,3)，并作为输入参数发送到 SQL Server。通过存储过程如何可以更新到表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:02:32.433

您可以创建一个存储过程可以调用的*函数*来拆分输入参数。

请参阅：[如何拆分字符串以便访问项目 x？](https://stackoverflow.com/questions/2647/split-string-in-sql)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:36:37.360

来自各个网站的资料来源：

```
DECLARE @sID nvarchar(max) = '1,2,3,4'
DECLARE @sOrder nvarchar(max) = '2,4,1,3'

DECLARE @Split char(1) = ','
DECLARE @xSID xml
DECLARE @xOrder xml

SELECT @xSID = CONVERT(xml,'<root><s>' + REPLACE(@sID, @Split,'</s><s>') + '</s></root>')
SELECT @xOrder = CONVERT(xml,'<root><s>' + REPLACE(@sOrder, @Split,'</s><s>') + '</s></root>')

SELECT [Value] = T.c.value('.','varchar(20)') FROM @xSID.nodes('/root/s') T(c) 
SELECT [Value] = T.c.value('.','varchar(20)') FROM @xOrder.nodes('/root/s') T(c) 
```

`@sID`将and替换`@sOrder`为您的 SP 的参数。

必须补充一点，这个网站几乎回答了这个问题：[Social MSDN](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/4126a010-6885-4eb0-b79c-c798c90edb85)

# c - 使用 ./ 调用共享库

> ID：14681087
> 
> 赞同：1
> 
> 时间：2013-02-04T05:52:16.050
> 
> 标签：c

我很好奇`dlopen`在 Linux 中使用来调用共享库。假设我想在 C 中使用一个名为`fileName.so`. 我在 64 位 Ubuntu Linux 中工作，我包含`dlfcn.h`并使用`dlopen`函数来访问共享库。

当我使用 时`dlopen(fileName.so, RTLD_LAZY)`，会返回一个 NULL 句柄并且不会打开共享库。但是，当我使用它时`dlopen("./fileName.so", RTLD_LAZY)`，`dlopen`它会完成它的工作并打开共享库。似乎重点是在`./`文件名之前使用。

如果帮助我弄清楚为什么我应该`./`在我的代码中使用，我们将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T05:55:16.397

POSIX 表示[`dlopen()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dlopen.html)必须知道在哪里查找文件并在文件名不包含`/`定义的实现时保留行为。在 Linux 上，如果您不提供路径名（`/`在某处带有 a 的名称），则[`dlopen()`](http://linux.die.net/man/3/dlopen)仅在“标准位置”中查找，由环境变量指定，例如 LD_LIBRARY_PATH 或 via `/etc/ld.so.conf`（或`/etc/ld.so.cache`；另请参见`ldconfig(8)`）或标准位置，例如作为`/lib`和`/usr/lib`。

当您指定相对名称`./fileName.so`时，它知道在当前目录中查找，这通常不是它查找的位置。

请注意，在支持 32 位和 64 位可执行文件的系统上，您可能会遇到一些有趣的问题，不同类库的位置使用了各种约定。Unix 的其他变体使用模糊相关的系统——`dlopen()`现在主要使用 et al（从历史上看，并非总是如此），并使用各种各样的环境变量（DYLD_LIBRARY_PATH、LIBPATH、SHLIB_PATH、LD_RUN_PATH、LD_LIBRARY_PATH_32、LD_LIBRARY_PATH_64，...） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T05:55:39.017

`./`是`.so`文件的相对路径。这意味着该文件在当前目录中。

在 *nix 中，默认情况下，当给定一个没有绝对或相对路径的文件名时，将在一组[默认位置列表中](http://linux.die.net/man/3/dlopen)`dlopen`搜索库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T05:00:33.570

“要点”是在第二个示例中使用双引号：

```
 dlopen("./fileName.so", RTLD_LAZY) 
```

如果您想包含您自己的库/文件名，请将其括在双引号中。`./`正如建议的那样，只要文件位于当前目录中，您甚至不需要它`./`。

根据 dlopen 手册页的示例：

```
 handle = dlopen("libm.so", RTLD_LAZY);
       if (!handle) {
           fprintf(stderr, "%s\n", dlerror());
           exit(EXIT_FAILURE);
       } 
```

文件名用引号括起来。

但是，正如先前答案所指定的，dlopen 将在“标准”位置查找“包含”。在工作目录中包含库的另一种方法（尽管显然不是共享系统库）是使用预处理器指令，文件名用双引号括起来：

```
#include <stdio.h>
#include <stdlib.h>
#include "myCustomLibrary.h" 
```

# python - typeError: isinstance() arg 2 必须是类型或类型的元组 >>>

> ID：14681096
> 
> 赞同：30
> 
> 时间：2013-02-04T05:52:55.060
> 
> 标签：python

```
>>> names=['jill','jack']
>>> isinstance(names,list)
Traceback (most recent call last):
  File "<pyshell#291>", line 1, in <module>
    isinstance(names,list)
TypeError: isinstance() arg 2 must be a type or tuple of types
>>> 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-02-04T05:54:05.747

`list`您已经通过分配给同名的局部变量来踩踏。不要那样做。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-06-30T05:37:39.577

应用这个：

```
if isinstance(names, type(list)): 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-06-30T17:05:07.123

如果您不小心弄乱了模型中的外键字段语法，也会发生这种情况。编写外键字段时，您可以：

```
ModelName 
```

或者：

```
'app_name.ModelName' 
```

但你不能拥有：

```
'ModelName' 
```

学到了一个艰难的方式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-23T05:47:13.320

但这适用于 Python (v3.7.1:260ec2c36a, Oct 20 2018, 14:05:16) [MSC v.1915 32 bit (Intel)] on win32：</p>

```
>>> names=['jill', 'jack']
>>> isinstance(names, list)
True 
```

# c++ - 为 C++ 程序编写 makefile

> ID：14681099
> 
> 赞同：0
> 
> 时间：2013-02-04T05:53:02.677
> 
> 标签：c++, makefile, cmake

有人可以帮我写我的第一个makefile吗？

我有一个`helloworld.cpp`代码`/path/to/main/code/helloworld.cpp`。然后我刚刚包含了一个 .h 文件`#include "SFML/network.hpp"`。

现在 SFML 库保存在`/path/to/SFML/Library`

如果有人可以帮助我开始这将是很棒的。与此同时，我正在尝试通读文献，但它非常压倒性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:14:40.150

尽管您可能需要学习传统的 GNU Makefile 语法才能使用其他项目，但我建议您将 CMake 用于您自己的项目，因为它更简单、更直观。

您的示例的 CMake 文件将放入`CMakeLists.txt`项目根目录中调用的文件中（在本例中与源相同），如下所示：

```
project(HelloWorld)                        # Name your project.
add_executable(helloworld helloworld.cpp)  # Specify an executable to build.
link_directories(/path/to/SFML)            # Tell it where your libraries are.
target_link_libraries(helloworld Library)  # Tell it which library to link. 
```

如果您希望能够#include SFML 中的标头而不每次都包含目录名称，那么您还可以编写：

```
include_directories(SFML)                  # Tell it where your headers are. 
```

[网站](http://cmake.org/cmake/help/documentation.html)上提供了有关编写 CMake 文件和运行 CMake 的更多文档。

最后，CMake 经常给出一个嘈杂但无害的消息，要求您在 CMakeLists.txt 文件的顶部放置这样的一行：

```
cmake_minimum_required(VERSION 2.8)        # Quell warnings. 
```

干杯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T06:04:51.943

它本身可能很简单，但只是想推荐[genmake.pl](http://www.muquit.com/muquit/software/genmake/genmake.html)，我在学校项目中使用它效果很好。它非常易于使用，它会为您生成一个骨架 Makefile，您需要填写诸如`SFML`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T11:25:05.750

如果您使用的是 ACE（自适应通信环境），它带有一个非常强大的 makefile 创建实用程序，称为 MPC（[Makefile Project Creator](http://www.dre.vanderbilt.edu/~schmidt/DOC_ROOT/ACE/MPC/docs/html/MakeProjectCreator.html)）

要编译一个简单的程序并自动生成 GNU makefile，一个最小的示例可能是：

```
project(*my_project) : baseWorkspace {
       exename = my_project
       exeout = ./
       Source_Files {
          main.cpp
       }
   } 
```

我发现使用这个工具的美妙之处在于它可以继承“基础”工作空间，几乎就像 C++ 中的多态性一样。在“base”中定义的库用于当前项目，允许程序员利用各种构建块轻松操作和快速创建项目。

我确信只有 ACE 的 MPC 部分可以通过 RPM 下载和使用，我会四处搜索，看看是否可以为您找到合适的示例。

# google-apps-script - 谷歌应用程序在使用 getvalues 时出现致命错误

> ID：14681100
> 
> 赞同：0
> 
> 时间：2013-02-04T05:53:14.637
> 
> 标签：google-apps-script, google-sheets

在此行上出现错误“您尝试执行的操作导致致命错误并且无法执行”-

sheet.getRange(m, k, enD, 1).setValues(sheet.getRange(m, k, enD, 1).getValues());

我的代码已经运行了一周没有错误，但从昨天开始我随机收到这个错误。有时它起作用有时它不起作用。我不想透露计算结果，这就是我使用它的原因。

知道为什么会这样吗？我尝试将“enD”值从 40 秒减少到 10 秒或 20 秒。没有帮助。尝试拆分代码 - 首先使用 getValues() 读取值，然后使用 setValues 写入，但在 getValues() 部分再次出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T10:33:48.630

我尝试了这个简单的测试脚本来检查它是如何工作的，我得到了这个日志：

```
3.141592653589793  =PI()
3.14159265358979 
```

脚本是这样的：

```
function replaceFormulasByValues() {
  var ss = SpreadsheetApp.getActiveSheet();
  var sel = ss.getActiveRange();
  Logger.log(sel.getValues()+'  '+sel.getFormulas()); // show cell's content (value and formula) 
  sel.setValues(sel.getValues());// this is the same mechanism you use
  Logger.log(sel.getValues()+'  '+sel.getFormulas()); // no formulas anymore
} 
```

所以它按预期工作不是吗？

# android - 实现 Fragments Android

> ID：14681104
> 
> 赞同：-4
> 
> 时间：2013-02-04T05:53:27.337
> 
> 标签：android, android-fragments

我是第一次实现片段，所以请帮助我。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <fragment android:name="com.example.news.ArticleListFragment"
            android:id="@+id/list"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
    <fragment android:name="com.example.news.ArticleReaderFragment"
            android:id="@+id/viewer"
            android:layout_weight="2"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
</LinearLayout> 
```

我希望 ID 为“列表”的片段应该保持不变，但 ID 为“查看器”的片段应该能够调用不同的类。

（请注意，这些类扩展了 Activity。）

我的问题很简单：我有四个课程（Extending ACTIVITY）。我想把屏幕分成两部分。左侧保持不变，其中包含列表视图。在列表视图的单击上，我想打开我的课程（扩展活动），但只能在右侧部分（剩余屏幕）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:20:42.283

这是一个基本问题。你应该从[这里](http://developer.android.com/guide/components/fragments.html)开始。[这个主题](http://mobile.tutsplus.com/tutorials/android/android-sdk_fragments/)也可以帮助你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:33:40.467

片段就像单独的活动，因此除非您进行更改，否则对一个片段的操作不会影响其他片段。假设您在左侧片段上有一个列表视图，在其活动中放置一个 onItemClickListener。对于每个 itemclick 切换右侧片段上的活动。

OnItemClick 事件的示例代码

```
Fragment fragment=new activity1();
fragmentManager fm=getFragmentManager();
FragmentTransaction ft=fm.beginTransaction();
ft.replace(R.id.frame2,fragment);
ft.commit(); 
```

在上面的代码段中， **activity1**是要附加到正确片段的新类。R.id.frame2 是与正确片段一起使用的框架布局的 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:44:06.150

根据片段的android文档： **片段代表活动中的行为或用户界面的一部分。您可以在单个活动中组合多个片段以构建多窗格 UI 并在多个活动中重用一个片段。您可以将片段视为活动的模块化部分，它有自己的生命周期，接收自己的输入事件，并且可以在活动运行时添加或删除（有点像“子活动”，您可以在不同的活动中重复使用）。**

[http://developer.android.com/guide/components/fragments.html](http://developer.android.com/guide/components/fragments.html)

我从您的问题中了解到，您希望`viewer`在运行时获取片段的内容。我可以为此建议的一个可能的解决方案是：而不是您的四个类 extends `Activity`， extend `Fragment`，每个类都有自己的布局。将主布局文件修改为如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="match_parent"
android:layout_height="match_parent">
<fragment android:name="com.example.news.ArticleListFragment"
        android:id="@+id/list"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent" />
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/viewer"
        android:layout_weight="2"
        android:layout_width="0dp"
        android:layout_height="match_parent" >
</FrameLayout>

</LinearLayout> 
```

FrameLayout 基本上将充当您的片段的容器，您可以在运行时动态加载（通过单击 ListView）。本教程将帮助您：

[http://developer.android.com/training/basics/fragments/fragment-ui.html](http://developer.android.com/training/basics/fragments/fragment-ui.html)

希望我的回答对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T09:09:58.770

Fragment 类可以通过多种方式获得多种结果。在其核心中，它代表了在更大的 Activity 中运行的特定操作或接口。Fragment 与其所在的 Activity 密切相关，不能单独使用。尽管 Fragment 定义了自己的生命周期，但该生命周期取决于其活动：如果活动停止，则无法启动其中的任何片段；当activity被销毁时，所有的fragment都会被销毁。

```
 MyFragment newFragment = new MyFragment();// MyFragment is a Fragment class
    FragmentTransaction transaction = getFragmentManager().beginTransaction();

        transaction.add(R.id.fra,newFragment, tag);
        transaction.addToBackStack(null);

        transaction.commit(); 
```

[示例代码](http://www.ziddu.com/download/21506095/fragment.zip.html)

在示例代码更改中

```
 ft.add(android.R.id.content,fragTwo, "tag"); 
```

到

```
 ft.add(R.id.fra,fragTwo, "tag"); 
```

并在 detail.java 中添加一些代码

```
 public void onStart() {
    // TODO Auto-generated method stub
    tv.setText(data);
    b.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            FragmentManager fm = getFragmentManager();
            FragmentTransaction ft = fm.beginTransaction();
            fm.beginTransaction();
            Fragment fragTwo = new MyFragment();
            //String tag = getActivity().GetFragmentID();
            Fragment f= fm.findFragmentById(getId());
            ft.replace(R.id.fra,fragTwo, "tag");
            ft.hide(f);  
            ft.commit(); 

        }
    });

    super.onStart();
} 
```

# android - 如何在android中将文本到语音保存到音频文件

> ID：14681105
> 
> 赞同：0
> 
> 时间：2013-02-04T05:53:28.620
> 
> 标签：android, text-to-speech, android-mediaplayer

> **可能重复：**
> [如何将文本存储为 WAV 文件的语音输出？](https://stackoverflow.com/questions/14683559/how-to-store-text-to-speech-output-as-wav-file)

我正在进行 TTS 对话。在我的应用程序中，我需要将语音保存为音频文件。根据我的要求，我需要使用 MediaPlayer 播放 TTS 输出，这就是我问你们的原因，我怎样才能将 tts 制作成音频文件，然后使用 Mediaplayer 播放。有人可以帮忙吗？如果有任何代码片段？这真的很有帮助。

在此先感谢，钱德拉。

# php - 如何知道一个人是否离开了您的网站？

> ID：14681108
> 
> 赞同：0
> 
> 时间：2013-02-04T05:53:47.030
> 
> 标签：php, server-push

我正在用 PHP 建立一个网站，我需要你的帮助。我想知道登录我网站的用户的时间。任务是存储登录时间和注销时间。可以轻松存储登录信息。但是对于注销有很多方法。我能想到的一个是：

1.  通过单击注销按钮。
2.  通过关闭浏览器。
3.  通过让会话过期。
4.  当然是由于任何原因断开互联网连接。

我解决了前三个问题，但我不知道如何解决第四个问题。然后在网上搜索，我想到了使用**SERVER PUSH MESSAGE**方法来实现它。服务器可以在一定的时间间隔后向客户端浏览器发送消息。如果他得到响应，则表示用户仍处于连接状态，否则用户未连接。我喜欢这个想法，但我不知道如何实现这个想法，因为我对推送消息一无所知。

请帮忙。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:01:08.290

从 Javascript 你应该抓住事件`window.onbeforeunload`

# jquery - jQuery UI 菜单不会呈现第二层

> ID：14681109
> 
> 赞同：0
> 
> 时间：2013-02-04T05:53:47.200
> 
> 标签：jquery, jquery-ui

我只是第一次使用 jQueryUI，但遇到了一些麻烦。我试图获得一个两层菜单，但第二层没有呈现。相反，应该放置在第二层的项目被添加到第一层。

这是我的标记：

```
<div id='maps'>
    <h2>Maps</h2>
    <ul id='maps-list'>
    </ul>
</div> 
```

使用以下 javascript 函数添加内容：

```
function maps_reload() {

    map_list().done( function( data ) {

        var list = '';
        for( i = 0; i < data.length; i++ ) {
            list += '<li><a href="javascript:map_display_info( ' + data[i].id + ')">' + data[i].name + '</a>';
            list += '<ul>';
            list += '<li><a href="javascript:update_map( ' + data[i].id + ' )">Update Map</a></li>';
            list += '<li><a href="javascript:display_map( ' + data[i].id + ' )">Display Map</a></li>';
            list += '<li><a href="javascript:delete_map( ' + data[i].id + ' )">Delete Map</a></li>';
            list += '</ul></li>';
        }
        list += '<li>&nbsp;</li>';
        list += '<li><a href="javascript:show_add_map()">Add a new map</a></li>';
        $( '#maps-list' ).html( list );
    });

    $( '#maps-list' ).menu();
} 
```

得到的结构是

```
<ul id='maps-list'>
    <li>
         <a>Map</a>
         <ul>
               <li><a>Update Map</a></li>
               <li><a>Display Map</a></li>
               <li><a>Delete Map</a></li>
         </ul>
    <li>
</ul> 
```

哪个符合要求...我想？

任何人都可以在我的代码中看到任何问题吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:35:10.533

我认为你的代码没有问题，这段代码可以正常工作，如果你想测试它，那么你需要在函数`$( '#maps-list' ).menu();`之外调用函数`maps_reload()`。

测试小提琴[http://jsfiddle.net/4LUDz/1/](http://jsfiddle.net/4LUDz/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:19:10.490

我认为您需要为链接添加锚点，例如每个菜单项才能正常工作（除了我注意到您有每个菜单项的链接嗯。）

示例：http: [//jsfiddle.net/7dw9h/](http://jsfiddle.net/7dw9h/)

[http://api.jqueryui.com/menu/](http://api.jqueryui.com/menu/)

```
<ul id='maps-list'>
    <li>
         <a href="#" >Map</a>
         <ul>
               <li><a href="#">Update Map</a></li>
               <li><a href="#">Display Map</a></li>
               <li><a href="#">Delete Map</a></li>
         </ul>
    <li>
</ul> 
```

# jquery - js.erb 中的 option_for_select

> ID：14681117
> 
> 赞同：0
> 
> 时间：2013-02-04T05:54:15.813
> 
> 标签：jquery, ruby-on-rails, ajax

我在文件 dvbd.js.erb 中有这个，它工作正常。预期的行为是 Dave div 将在其中列出一组名称和 id。

```
<%@dimvers = DimensionVersion.select("name, id").where(:dimension_id => params[:id]).all %>

$("#dave").html("<%= @dimvers.collect { |d| [d.name, d.id]} %>"); 
```

这是在 applications.js 中，并且 .post 调用 dvbd.js.erb 很好：

```
jQuery.ajaxSetup({
  'beforeSend': function(xhr) { xhr.setRequestHeader("Accept", "text/javascript") }
});

$.fn.subSelectWithAjax = function() {
  var that = this;

  this.change(function() {
    $.post("/dimensions/dvbd", {id: that.val()}, null, "script");
  });
}

$(document).ready(function(){
$("#dimver_dimension_id").subSelectWithAjax();
}); 
```

但是，当我将 dvbd.js.erb 中的代码更改为以下代码时，它不起作用。我希望它能够更改选择框#dimension_id 的选项。但是，如果@dimvers 碰巧没有返回匹配的记录，它只会将选择框更改为没有内容/选项。然后#dimension_id 不再响应。

```
<%@dimvers = DimensionVersion.select("name, id").where(:dimension_id => params[:id]).all %>

$("#dimension_id").html("<%= options_for_select(@dimvers.collect {|d| [d.name, d.id] }).gsub(/n/, '') %>"); 
```

这是 show.html.erb 中的代码：

```
<div id = 'hierarchypanel'>
    <%= collection_select(:dimver, :dimension_id, Dimension.all, :id, :title ) %>
    <%= collection_select(:dimension,:id, @dimension_versions,:id, :name)  %>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:11:44.603

尝试将html传递给`escape_javascript`

`$("#dimension_id").html("<%= escape_javascript options_for_select(@dimvers.collect { |d| [d.name, d.id] }) %>");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:05:21.237

最好的方法是有一个partial并在partial中有select_tag，然后从你的.js.erb中调用那个partial

前任：

```
#_select_partial.erb
<%= options_for_select(@dimvers.collect {|d| [d.name, d.id] }).gsub(/n/, '') %>

#dvbd.js.erb
$("#dave").html("<%= raw escape_javascript(render(:partial => 'select_partial')) %>") 
```

# facebook - Windows phone7 中 Facebook 的 Likebox

> ID：14681118
> 
> 赞同：0
> 
> 时间：2013-02-04T05:54:21.970
> 
> 标签：facebook, windows-phone-7

有没有办法在 Windows Phone 7 中集成 Facebook 的 Likebox 插件，因为它的代码在 HTML5、XFBML 中可用。

我实际上想显示一个包含特定页面帖子的列表框，但不必要求用户登录到 FB 帐户，因此 likebox 是相关的。？还有其他方法吗？

PS-我是在 WP7 上开发应用程序的新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T05:58:14.547

不要求用户登录是不可能做到的：/

您可以为 Facebook 喜欢的列表框类型制作自己的模板

# jquery - jQuery当悬停样式上一个和下一个兄弟姐妹

> ID：14681119
> 
> 赞同：0
> 
> 时间：2013-02-04T05:54:33.157
> 
> 标签：jquery, hover, next, siblings

我有一个导航菜单

```
<ul>
  <li id="menu1">content</li>
  <li id="menu2">content</li>
  <li id="menu3">content</li>
  <li id="menu4">content</li>
</ul> 
```

我想使用 jQuery，这样当我将鼠标悬停在 li 项目上时，前一个和下一个兄弟姐妹的样式会发生变化。

例如; 当我将鼠标悬停在 .menu2 上时，.menu1 和 .menu3 的边框半径变为 8px。

我知道我不能用纯 CSS 做到这一点，但是使用 jQuery 的脚本会是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:05:27.290

这将是一个更简单的解决方案。在 CSS 中添加一个带有样式的类，并使用 jQuery 在悬停时切换该类。

jQuery

```
$(document).ready(function(){
    $('.menu li').hover(function(){
        $(this).prev().toggleClass('large-border');
        $(this).next().toggleClass('large-border');
    });
}); 
```

HTML（向父级添加一个类）：

```
<ul class="menu">
  <li class="menu1">content</li>
  <li class="menu2">content</li>
  <li class="menu3">content</li>
  <li class="menu4">content</li>
</ul> 
```

在 CSS 中添加具有属性的类：

```
.large-border {
    border-radius: 8px;
    border: 1px solid red;
} 
```

这是一个工作[小提琴](http://jsfiddle.net/3LaGg/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:07:30.557

你可以试试这个类

```
jQuery(document).ready(function(){
    jQuery("div").hover(
       function(){
        jQuery(this).addClass("active");
        jQuery("div").not(".active").addClass("otherdeactive");
    },
    function(){ 
      jQuery(this).removeClass("active"); 
       jQuery("div").not(".active").removeClass("otherdeactive");
    });

}); 
```

[演示](http://jsfiddle.net/muthusamy/MZeTv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:02:46.077

你可以使用这个jQuery：

```
$('ul li a').hover(function(){
    (this).next().css('border-radius','8px');
    (this).prev().css('border-radius','8px');
},function(){
    (this).next().css('border-radius','0px');
    (this).prev().css('border-radius','0px');
}); 
```

# asp.net - 在 ASP.net 中从 SQL 数据库恢复项目

> ID：14681122
> 
> 赞同：0
> 
> 时间：2013-02-04T05:55:03.840
> 
> 标签：asp.net, sql-server, detailsview, detailview

我目前正在学习`ASP.Net`，我想知道你怎么`restore an item`能从`SQL Data source`.

该项目是通过`Details View`使用该`"Enable Deleting"`选项删除的，所以我正在测试每个项目，`buttons`这发生了。
我知道我可以简单地恢复`untouched database file`它，并用我正在使用的当前替换它。

但是，我想知道`restoring`该项目是否可以通过其他方式实现，例如创建一个按钮来恢复`Database Item from deletion`.

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T05:58:13.633

就“标准 SQL”而言，一旦你`DELETE`连续执行 SQL，它就永远消失了。

如果您需要系统中的“取消删除”功能，您可以改为在数据库中添加一个“已删除”列，并设置它而不是删除。这有一个主要缺点，即您的所有 SQL 都需要考虑该列，因此不返回具有删除列集的行。相当多的工作，在这种情况下听起来不像你正在寻找的东西。

在某些 RDBMS（想到 SQL 服务器）中，有一些方法可以从事务日志中恢复已删除的行，但这听起来也不是您要寻找的，而且这是一个相当高级的主题。

# wpf - 深度复制 WPF 数据绑定对象时

> ID：14681125
> 
> 赞同：1
> 
> 时间：2013-02-04T05:55:12.030
> 
> 标签：wpf, copy, inotifypropertychanged

我写了一个漂亮的方法来深度复制任何对象。它通过递归调用`MemberwiseClone()`实例内的任何引用类型字段来实现。此方法适用于我想使用的任何对象，包括层次关系对象。该方法还显示了过去访问的字典，因此避免了不必要的重复工作。

但是，我遇到的问题是，此方法仅在需要克隆时对象不是绑定到 WPF/MVVM 的数据时才有效。当数据绑定和方法被调用时，我遇到堆栈溢出异常，因为（我假设）`INotifyPropertyChanged.PropertyChanged`事件和 WPF 框架之间建立了链接。然后递归调用尝试复制整个对象世界，包括`AppDomain`和低级指针对象，这些对象似乎是链接的并继续几乎无限（无论如何，超过 VS2012 可以处理的。）

我怀疑我是否需要深度复制一个可以追溯到开头的对象图`AppDomain`......是否有一种聪明的方法可以让我的复制方法在达到某个边界时“停止”？我还考虑过在数据绑定之前简单地复制对象，但我不确定这是一个可行的选择，而且相当愚蠢。我只想要一个简单的深拷贝解决方案，它适用于不可序列化的类型，但也可以通过`INotifyPropertyChanged`.

该方法的实现：

```
private static object Clone(object instance, IDictionary<object, object> visitGraph)
{
    var instanceType = instance.GetType();
    Debug.WriteLine(instanceType.Name);
    object clonedInstance = null;

    if (visitGraph.ContainsKey(instance))
    {
        clonedInstance = visitGraph[instance];
    }
    else
    {
        const BindingFlags flags = BindingFlags.Public | BindingFlags.NonPublic | 
                                   BindingFlags.Instance;
        var memberwiseCloneMethod =
            instanceType.GetMethods(flags).Single(x => x.Name == "MemberwiseClone" && 
            !x.GetParameters().Any());

        clonedInstance = memberwiseCloneMethod.Invoke(instance, null);

        visitGraph.Add(instance, clonedInstance);

        var allReferenceTypeProperties = clonedInstance.GetType().GetAllFields()
                                           .Where(
                                              x =>
                                              !x.FieldType.IsValueType
                                               && x.FieldType != typeof (string));

        foreach (var field in allReferenceTypeProperties)
        {
            var existingFieldValue = field.GetValue(instance);

            if (existingFieldValue != null)
            {
                var clonedFieldValue = Clone(existingFieldValue, visitGraph);
                field.SetValue(clonedInstance, clonedFieldValue);
            }
        }    
    }

    return clonedInstance;
}

public static IEnumerable<FieldInfo> GetAllFields(this Type type)
{
    const BindingFlags flags = BindingFlags.Public | BindingFlags.NonPublic | 
                               BindingFlags.Instance;

    var fields = type.GetFields(flags);

    foreach (var field in fields)
    {
        yield return field;
    }

    if (type.BaseType != null)
    {
        foreach (var field in GetAllFields(type.BaseType))
        {
            yield return field;
        }
    }
}

public static object Copy(this object instance)
{
    if (instance == null) throw new ArgumentNullException("instance");
    var visitGraph = new Dictionary<object, object>();
    var clonedInstance = Clone(instance, visitGraph);
    return clonedInstance;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:36:40.910

我正在用快捷解决方案回答我自己的问题。我更喜欢永久的解决方案，但我没有奢侈。

我将深度克隆方法修改为浅（而不是深）复制 EventHandler 对象。这些对象不再是真正的深层克隆，但这对我的应用程序来说不是问题。不过，我想要一个适用于所有情况的解决方案。

# android - android 异步和 http 客户端

> ID：14681126
> 
> 赞同：0
> 
> 时间：2013-02-04T05:55:15.250
> 
> 标签：android, android-asynctask

我的 android 应用程序中有一个自定义 http 类来处理发送到服务器的 http post 数据。但是，我需要将其转换为扩展 asyncTask，因为我需要 1，在获取数据时显示进度动画，以及 2，同时刷新/更新 ui。

那么最简单的方法是什么。请注意，我已经在整个应用程序中使用该类来处理 httpPOST 请求。

这是课程：

```
public class Adapter_Custom_Http_Client 
{  

    //<editor-fold defaultstate="collapsed" desc="Class Members">

public static final int HTTP_TIMEOUT = 30 * 1000; // milliseconds  

private static HttpClient mHttpClient;  

//</editor-fold>

        //<editor-fold defaultstate="collapsed" desc="getHttpClient">

private static HttpClient getHttpClient()
{  
    if(mHttpClient == null)
    {  
        mHttpClient = new DefaultHttpClient();  
        final HttpParams params = mHttpClient.getParams();  
        HttpConnectionParams.setConnectionTimeout(params, HTTP_TIMEOUT);  
        HttpConnectionParams.setSoTimeout(params, HTTP_TIMEOUT);  
        ConnManagerParams.setTimeout(params, HTTP_TIMEOUT);  
    }  
return mHttpClient;  
}
//</editor-fold>

        //<editor-fold defaultstate="collapsed" desc="executeHttpPost">

public static String executeHttpPost(String url, ArrayList postParameters) throws Exception
{  
    BufferedReader in = null;

    try
    {  
        HttpClient client = getHttpClient();  
        HttpPost request = new HttpPost(url);  
        UrlEncodedFormEntity formEntity = new UrlEncodedFormEntity(postParameters);  
        request.setEntity(formEntity);  
        HttpResponse response = client.execute(request);  
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));  
        StringBuffer sb = new StringBuffer("");  
        String line = "";  
        String NL = System.getProperty("line.separator");  
        while ((line = in.readLine()) != null)
        {  
            sb.append(line + NL);  
        }  
        in.close();  
        String result = sb.toString();  
        return result;  
    }
finally
    {  
        if (in != null)
        {  
            try
            {  
                in.close();  
            } catch (IOException e)
            {  
                e.printStackTrace();  
            }
        }
    }
}
//</editor-fold>

        //<editor-fold defaultstate="collapsed" desc="executeHttpGet">

public static String executeHttpGet(String url) throws Exception
{  
BufferedReader in = null;  
    try
    {  
        HttpClient client = getHttpClient();  
        HttpGet request = new HttpGet();  
        request.setURI(new URI(url));  
        HttpResponse response = client.execute(request);  
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));  
        StringBuffer sb = new StringBuffer("");  
        String line = "";  
        String NL = System.getProperty("line.separator");  
        while ((line = in.readLine()) != null)
        {  
            sb.append(line + NL);  
        }  
        in.close();  
        String result = sb.toString();  
        return result;  
    }
    finally
    {  
        if (in != null)
        {  
            try
            {  
                in.close();  
            } 
        catch (IOException e)
            {  
                e.printStackTrace();  
            }
        }
    }
}
//</editor-fold>

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:25:18.913

在您的活动中创建新的异步内部类：

```
public class InnerClass extends AsyncTask<Void, Void, String>{

    ProgressDialog dialog;

    @Override
    protected String doInBackground(Void... params) {
        String result = Adapter_Custom_Http_Client.executeHttpPost(url , param); 
        return result;
    }

    @Override
    protected void onCancelled() {
        super.onCancelled();
    }

    @Override
    protected void onPostExecute(String result) {
        dialog.dismiss();
        super.onPostExecute(result);
    }

    @Override
    protected void onPreExecute() {
        dialog = ProgressDialog.show(context, "", "Please wait....");
        super.onPreExecute();
    }
} 
```

并使用执行后台任务

新的 InnerClass().execute();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:39:25.313

使用这个异步类：

```
 public class Albums extends AsyncTask<Void, Void, Void> {

         //declarations what u required

        @Override
          protected void onPreExecute() {          
           super.onPreExecute();
          ///declare ur progress view and show it

          }

        @Override
        protected Void doInBackground(Void... params) {

        //do ur http work here which is to be done in background
        }

        @Override
        protected void onPostExecute(Void result) {       
        super.onPostExecute(result);

        //Update ur UI here...

        } 

       } 
```

有什么问题请追问。。

编辑：

```
 Albums alb=new Albums();
       alb.execute(null);///u can use different arguments that u need 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:31:06.737

像这样跟随：

```
 public class postmethod extends AsyncTask<Void, Void, Void> {

 //declarations what u required
 @Override
 protected void onPreExecute() {          
 super.onPreExecute();
 }

 @Override
 protected Void doInBackground(Void... params) {

 //do ur work here completly that will runs as background
 }

 @Override
 protected void onPostExecute(Void result) {       
 super.onPostExecute(result);
 } 
 } 
```

# css - 你如何调用具有前导冒号的css中的id？（注意：反斜杠不起作用）

> ID：14681131
> 
> 赞同：-4
> 
> 时间：2013-02-04T05:55:45.727
> 
> 标签：css

> **可能重复：**
> [在 CSS 选择器中处理元素 ID 中的冒号](https://stackoverflow.com/questions/122238/handling-a-colon-in-an-element-id-in-a-css-selector)

我正在使用 Minimalist for Everything 使用 Gmail 的 CSS（否则我只会更改元素的 id），并且一些元素以前导冒号命名。

例如，设置按钮的元素 id 是 #:pd

如果它位于单词 a 的中间，则查找它：应该可以正常工作，但是已经看到一些消息来源说它以冒号开头应该是*不可能*的……但它绝对是 id 名称的前导字符（另请参见截屏）。

— — — — 编辑：这不是重复的，因为我问的是 id 以冒号开头的情况，在这种情况下反斜杠似乎不起作用。请参阅以下[屏幕截图](http://note.io/13CFpms)以了解我的意思。我尝试转义反斜杠本身，然后是

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:00:36.903

在您的 CSS（即 #:pa）中使用反斜杠效果很好，至少在 WebKit 中（我没有测试其他人）。

相关的：

*   [在 CSS 选择器中处理元素 ID 中的冒号](https://stackoverflow.com/questions/122238/handling-a-colon-in-an-element-id-in-a-css-selector)
*   [http://msdn.microsoft.com/en-us/library/ms762307(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms762307(VS.85).aspx)

# c++ - 如何使用循环正确地将项目添加和访问到多维向量？

> ID：14681135
> 
> 赞同：0
> 
> 时间：2013-02-04T05:56:13.393
> 
> 标签：c++, combinatorics, multidimensional-array

我有这个程序试图确定一些相交集中有多少独特的项目。输入的数量完全取决于第一个值`n`，然后是之后输入的集合数量。例如，如果我从 enter 开始`n = 2`，我应该输入 2 个整数。然后程序确定项目之间有多少交叉点`n`（这就像从项目中选择 2 个`n`项目）。这以`k`增量的形式进行。但这有点超出了重点。只是一些背景信息。

`for`我的程序正确适应并接受适当数量的输入，但它在循环外的第一个循环之前停止正常工作`while`。我试图做的是制作一个整数向量的向量，然后每隔一行添加一次（当索引从 0 开始并且索引从 1 开始时）。但我猜我错误地构建了我的向量。有人在我的向量逻辑中看到错误吗？

```
#include <iostream>
#include <vector>

using namespace std;

int fact (int m) {
        if (m <= 1)
        return 1;
    return m * fact(m - 1);
}

int comb (int n, int k) {
    return fact(n)/(fact(n-k)*fact(k));
}

int main() {
    int n = 0;
    int k = 2;
    int sum = 0;
    int diff = 0;
    int final = 0;

    vector <vector <int> > arr;
    cin >> n;
    while (n > 0) {
        vector <int> row;
        int u;
        for (int i = 0; i < n ; ++i) {
            cin >> u;
            row.push_back(u);
        }
        arr.push_back(row);
        n = comb(row.size(), k);
        k++;
    }
    for (int i = 0; i < arr.size(); i+2)
        for (int j = 0; j < arr[i].size(); ++j)
            sum += arr[i][j];

    for (int i = 1; i < arr.size(); i+2)
        for (int j = 0; j < arr[i].size(); ++j)
            diff += arr[i][j];

    final = sum - diff;
    cout << final;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:00:12.333

```
for (int i = 0; i < arr.size(); i+=2)
                                  ^ 
```

你想做`i+=2`or `i=i+2`，否则 的值`i`永远不会改变，导致无限循环。

# javascript - javascript 空循环体

> ID：14681137
> 
> 赞同：1
> 
> 时间：2013-02-04T05:56:41.190
> 
> 标签：javascript

我正在使用[雄辩的 javascript](http://eloquentjavascript.net/chapter2.html#p1ad637f9)，但我不明白这段代码

```
for (var current = 20; current % 7 != 0; current++)
  ;
console.log(current); 
```

它声明它检查大于 20 且可被 7 整除的第一个数字，`console.log()`并将产生 21。

但是我读到从 20 开始，检查`current`除以 7 是否没有余数，看看我们什么时候打破循环。但马上 20 mod 7 == 6 意味着它不等于 0 或 ( `20 % 7 != 0`)。

那么 for 循环不应该立即中断并`console.log(current)`产生 20 吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:58:26.863

只要满足条件，循环就会继续。

```
20 % 7 != 0 // 6 != 0 is true, so condition is met and loop continues

21 % 7 != 0 // 0 != 0 is false, so condition fails and loop halts 
```

* * *

> *“...检查`current`除以 7 是否没有余数”*

不，它是*“检查`current`除以 7 是否没有余数”*。

我认为消极的条件是把你扔了。基本上，您需要询问条件是否为真陈述。

所以如果我是条件，你是循环，我说*“六不等于零”*，你会说*“那是真的”*，所以你会同意让循环继续。

但是，如果我说*“零不等于零”*，你会说*“那是假的”*，然后停止循环。

* * *

更明确的条件是*“检查`current`除以 7 是否有余数”*。没有双重否定，所以可以写成：

```
for (var current = 20; current % 7; current++) ; 
```

或作为：

```
for (var current = 20; current % 7 > 0; current++) ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:01:19.023

这里没有错。只需将`;`行更改为此行，您就会明白：

```
for (var current = 20; current % 7 != 0; current++) {
    console.log('current value is ' + current ' +
    ' and the mod result is ' + current % 7);
} 
```

# java - 在 java 中使用 imap 检查特定邮件的电子邮件附件

> ID：14681139
> 
> 赞同：0
> 
> 时间：2013-02-04T05:57:07.777
> 
> 标签：java, android

怎么查号。使用 imap 所选邮件的附件数量？

我能够获取邮件正文/标题，但无法获取特定于所选邮件的附件？

这是我尝试过的代码：

```
 DataHandler handler = message.getDataHandler();

AttachedFileName= handler.getName(); 
```

此代码将提供收件箱中所有附件的文件名，而不是特定于邮件。

我该怎么做呢？

让我知道！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:16:16.827

当附件完成时，您可以增加整数的值。所以，增加的值的数量是附件的数量。这也是一个简单的想法..

# php - 无法连接到 xampp mysql 以外的数据库

> ID：14681140
> 
> 赞同：1
> 
> 时间：2013-02-04T05:57:15.600
> 
> 标签：php, mysql, xampp

我不确定我的代码发生了什么，我的项目在 XAMPP 服务器下运行顺利，我能够在 mysql 和 php 之间建立连接，但是当我将它移到另一个具有 mysql 社区服务器的系统时，他们的代码是不工作，我的意思是数据库正在连接，但无法从数据库中获取数据。

示例代码如下：

```
$host='localhost'; // Host name
$username='root'; // Mysql username
$password=''; // Mysql password
$db_name='test'; // Database name
$connect=@mysql_connect($host,$username,$password) or die("Cannot Connect to database");
@mysql_select_db($db_name,$connect) or die ("Cannot find database"); 
```

应用代码：

```
 $sql="SELECT * FROM test.userdet WHERE emailId='$uName' and pwd='$pwd'";
 $result=mysql_query($sql);
 $count=mysql_num_rows($result); 
```

根据 $count 我将其重定向到其他页面。

我能够在具有 XAMPP 本身的其他系统上运行它，但它不能与 mysql 社区服务器一起运行。

//感谢 NullPointer，我通过 PDO 得到了它，从现在开始我将继续使用 PDO 进行交易。

现在我面临一个新问题，我正在通过 ajax 调用 php_db 脚本，在执行所有 PDO 语句后它没有返回到 ajax，代码片段如下：

**阿贾克斯调用： -**

```
 $.ajax({
      type: "POST",
      url: "common/dbPhpScripts/updateEvent.php",
      data: 'json=' + det,
      dataType: 'json',
      cache: false,
      success: function () {
          $('#cal').fullCalendar('refetchEvents');
          $('#edit_event').dialog('close');
      }
  }); 
```

**使用 PDO 后的示例 php 代码：**

```
$stringData = $_POST['json'];
$mynewarray = json_decode($stringData, true);
$title=$mynewarray['title'];
$start= $mynewarray['start'];
$end= $mynewarray['end'];
$createDate=$mynewarray['createDate'];
$insertQuery=$db->exec("INSERT INTO calendar (User_Id, StartDateTime, EndDateTime, Event_Title, Create_Date) VALUES ('07','$start','$end','$title','$createDate')"); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:26:25.307

很高兴看到你得到了什么

```
success: function (data) {
   alert("data");
} 
```

`common/dbPhpScripts/updateEvent.php`如果你重定向你不会在ajax中得到结果，你也需要回显结果而不重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:02:02.057

它绝对应该是你的凭据。确保您的用户名和密码以及数据库名称和主机正确。不同的服务器有不同的凭据。

例如：

WAMP

```
$username='root'; // Mysql username
$password=''; // Mysql password 
```

MAMP

```
$username='root'; // Mysql username
$password='root'; // Mysql password 
```

鉴于删除`@`标志。不要使用 @SuppressWarnings 抑制警告

# linux - 是否可以在 Perl 中监视 LXTerminal(shell) 输出？

> ID：14681141
> 
> 赞同：0
> 
> 时间：2013-02-04T05:57:16.633
> 
> 标签：linux, perl, shell

我最近才开始学习 Perl，所以请原谅我在这门语言方面缺乏技术词汇。

我有一个使用 mpg321 播放音频的 Perl 脚本。我有命令：

```
if(song is not being played)
{
     system("mpg321 song.mp3 &");
} 
```

我想知道是否可以检查是否有一首歌曲已经在播放。mpg321 播放完歌曲后输出到终端。我的思路让我相信我是否可以“监控”终端的输出：

[0:00] song.mp3解码完成

我可以以某种方式将其放入 if 语句中。如果有更简单的方法可以做到这一点，或者如果我提到的这种方法可行，我将非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:29:14.257

您可以打开执行管道并观察该管道的输出，例如：

```
my $pipe;
open $pipe, "mpg321 song.mp3 |";
while (my $line = <$pipe> {
    # check if mpg321 printed something...
} 
```

但这只有在您可以说服`mpg321`禁用控制台缓冲时才有效。

# c# - HttpClient 不在 CookieContainer 中存储 cookie

> ID：14681144
> 
> 赞同：22
> 
> 时间：2013-02-04T05:57:57.333
> 
> 标签：c#, cookies, httpclient

我正在使用`VS2010`++ （来自`.NET 4.0`）。`System.Net.Http``Nuget`

由于我无法理解的原因，我收到的会话 cookie`HttpResponseMessage`不会自动保存在`HttpClient CookieContainer`. 这是我的代码的样子：

```
CookieContainer cookies = new CookieContainer();
HttpClientHandler handler = new HttpClientHandler();
handler.CookieContainer = cookies;
HttpClient client = new HttpClient(handler);

Uri site = new Uri("https://www.mywebsite.com");
var response1 = client.SendAsync(new HttpRequestMessage(HttpMethod.Get,site)).Result; 
```

我可以在响应标头中看到以下内容：

```
Set-Cookie: JSESSIONID=FC8110E434C2C6DAB78B4E335024A639; Path=/member; Secure 
```

但是我的 cookie 容器仍然是空的……为什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-08-03T19:01:31.110

使用这段代码从响应中检索 cookie：

```
/// <summary>
/// Read web cookies
/// </summary>
public static CookieContainer ReadCookies(this HttpResponseMessage response)
{
    var pageUri = response.RequestMessage.RequestUri;

    var cookieContainer = new CookieContainer();
    IEnumerable<string> cookies;
    if (response.Headers.TryGetValues("set-cookie", out cookies))
    {
        foreach (var c in cookies)
        {
            cookieContainer.SetCookies(pageUri, c);
        }
    }

    return cookieContainer;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T06:08:33.187

我想问题是您的 cookie 是*安全*的。问题是，CookieContainer 不会在后续 HTTP 请求中将安全 cookie 发送回服务器。这可能是一个错误，或者它背后有一些原因。

一种解决方法是手动将 cookie 添加到 CookieContainer。这样，cookie 将在 HTTP 请求标头中发送回，因为当您将 cookie 发送回服务器时不会定义*安全。*

有关更多信息，请参阅[本文](http://thomaskrehbiel.com/post/1690-cookiecontainer_httpwebrequest_and_secure_cookies)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T18:04:53.273

问题可能是您的请求 URL 路径指向网站的根目录（“/”），但您的 Set-Cookie 标头指示路径为“/member”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-11T12:45:31.847

由于路径的大小写不同，我遇到了 cookie 的问题。我登录到 /mysite/login，并为 mysite 设置了 cookie，但随后重定向到 /MySite，HttpClient 突然丢弃了所有 cookie！当我将地址更改为 /MySite/login 时，一切正常。

# android - 如何在 Android 设备中显示谷歌地图

> ID：14681151
> 
> 赞同：0
> 
> 时间：2013-02-04T05:58:31.960
> 
> 标签：android, android-maps

我制作了一个**正在使用 Google Map**的应用程序，并且*可以在 Emulator 中查看地图*，但是当我在设备上进行测试时，我*只是得到了计划网格*，为什么？

但在模拟器中，我可以在卫星或普通模式下查看地图......

可能是什么原因，请帮助我...

在 AndroidManifest.xml 中：

```
 <uses-library android:name='com.google.android.maps'/> 
```

我也在*使用我的 Map API Key* ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:33:12.877

您需要获得签名的 Md5 指纹才能在 Android 设备上获取磁贴，您目前正在使用 Debug 键在模拟器上显示磁贴。

从这里寻求帮助

[https://developers.google.com/maps/documentation/android/v1/mapkey](https://developers.google.com/maps/documentation/android/v1/mapkey)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:39:31.097

您正在为地图使用调试键，这就是为什么当您使用地图时它会在地图上显示 u 网格尝试在设备上使用调试模式调试您的应用程序。

# objective-c - 如何将传入变量标记为__block？

> ID：14681161
> 
> 赞同：-1
> 
> 时间：2013-02-04T05:59:22.703
> 
> 标签：objective-c

全部。我有一个方法：

```
-(void)connectToServer:(NSError**)error{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         //bla bla bla code;
         *error=[NSError bla bla bla];
    }
} 
```

但是在那个错误变量之后没有修改。它没有块变量。我如何修改此方法以将 (NSError**) 错误标记为 __block 变量。如果 __block 变量仅用于局部变量？

现在我用 __block 属性解决了组织局部变量的问题：

```
-(void)connectToServer:(NSError**)error{
    __block NSError *localError=*error;
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
         //bla bla bla code;
         localError=[NSError bla bla bla];
    }
    *error=localError;
} 
```

但是这个解决方案不像我的，因为我需要重新声明 __block NSError *localError=*error;

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:47:22.663

要从块内进行修改`error`，您不需要局部`__block`范围变量。直接分配`*error = [NSError bla];`已经可以了。

这是有效的，因为`error`它被本地范围内的块捕获。虽然`error`无法修改，但*可以*将其取消引用到`NSError *x`存储某些内容的地址，并且`x`确实可以在块内进行更改。

但是，您需要绝对确定`NSError *x`所引用的任何变量`error`都足够持久。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T06:04:51.263

亩。

你在做什么没有多大意义。该`connectToServer:`方法很可能会在该块设置`error`变量之前返回，这意味着调用者不会看到有效的对象。

您需要让块调用另一个方法来处理导致的任何错误，或者同步运行块，以便`connectToServer:`在块完成之前不会返回。

此外，在第二种情况下，您应该遵循[Cocoa 的错误处理约定，](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ErrorHandlingCocoa/CreateCustomizeNSError/CreateCustomizeNSError.html%23//apple_ref/doc/uid/TP40001806-CH204-BAJIIGCC)并通过直接返回该方法来指示发生了错误。

这应该重写为：

```
- (void)connectToServer
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //bla bla bla code including error generation
        dispatch_sync(/* Get appropriate queue; probably main */, ^{
            // Handle error somehow
        });
    });
} 
```

或者：

```
- (BOOL)connectToServer: (NSError **)e
{
    __block BOOL success = NO;
    // Note: dispatch_sync()
    dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //bla bla bla code;
        success = /* Get success value */;
        *e = /* Get error */;
    });
    return success;
} 
```

# asp.net - 如何让 UpdatePanel 在自定义事件后进行更新？

> ID：14681163
> 
> 赞同：1
> 
> 时间：2013-02-04T05:59:33.083
> 
> 标签：asp.net, ajax, asp.net-ajax, updatepanel

我正在设置`UpdatePanel1.UpdateMode = UpdatePanelUpdateMode.Conditional;`进行手动更新，但它不适用于某些自定义事件，当我在这里有一些类似的事件时：

```
protected void Button1_Click(object sender, EventArgs e) {
    discovery.FindAlreadyRegisteredServices();
    discovery.discoveryClient.FindCompleted += FoundEvent;

protected void FoundEvent(object sender, FindCompletedEventArgs e) {
    Label1.Text = (discovery.endpoints.Count > 0) ? discovery.endpoints[0].Address.ToString() : "nothing";
    UpdatePanel1.Update();
    } 
```

我的项目失败了：

```
An unhandled exception of type 'System.InvalidOperationException' occurred in System.ServiceModel.Internals.dll

Additional information: The Update method can only be called on UpdatePanel with ID 'UpdatePanel1' before Render. 
```

即使我设置`ChildrenAsTriggers`与否。错误消息对我来说不清楚，我不明白在处理我的事件后我应该怎么做才能处理更新？

添加：

aspx：

```
<asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
    <ContentTemplate>
        <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
        <asp:Label ID="Label1" runat="server" Text=""></asp:Label>
        <asp:ListView ID="ListView1" runat="server">
        </asp:ListView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:31:18.237

我想你应该像这样改变你的标记

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    .... 
```

您应该`UpdateMode="Conditional"`在标记本身中设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:30:25.130

```
protected void Button1_Click(object sender, EventArgs e) {
    discovery.FindAlreadyRegisteredServices();
    discovery.discoveryClient.FindCompleted += FoundEvent;
  // Try to call the update method after calling the custom even but in the click event of the button. Ensure you update the Trigger accordingly in the update panel
 **UpdatePanel1.Update();**
}

protected void FoundEvent(object sender, FindCompletedEventArgs e) {
    Label1.Text = (discovery.endpoints.Count > 0) ? discovery.endpoints[0].Address.ToString() : "nothing";
       } 
```

尝试以更新模式为条件将 AsyncPostBackTrigger 添加到更新面板

尽管您正在明确地做同样的事情。

```
<Triggers>  
                <asp:AsyncPostBackTrigger ControlID="Button1" EventName="Click" />  
            </Triggers> 
```

*只是为了检查是否有任何其他问题，您可以将更新面板的 updateMode 属性设置为“始终”*

# php - Cakephp在cookies中保存会话ID，这是一种安全的方式吗

> ID：14681164
> 
> 赞同：0
> 
> 时间：2013-02-04T05:59:38.040
> 
> 标签：php, security, session, cakephp, cookies

CakePhp 将会话 ID 保存在 cookie 中，通常名为 CAKEPHP 的 cookie 包含会话 ID，并且在任何其他 php 文件中都可以使用该 ID 启动会话

```
session_id($_REQUEST['CAKEPHP']);
session_start(); 
```

我的问题是这是一种处理会话 id 的安全方式，如果是，那么如果现在有什么更好的解决方案，它的安全性如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T21:49:52.380

会话 cookie 仅对生成 cookie/启动会话的域有效。

尽管另一个 php 页面可能会获取该会话，但只有在同一域上提供 cookie 时它*才会*接收 cookie，在这种情况下，它是您网站的“一部分”。

因此这应该不是问题，因为（除非您遇到严重问题）只有*您*才能将 php 文件添加/上传到您的网站。

您*应该*检查会话数据的保存位置。app/Config/core.php 中的默认“php”会话设置会将会话数据写入 php.ini 中配置的会话保存路径。这可能是同一服务器上的其他网站可以访问的“共享”目录。

为了更好的安全性，将 app/config/core.php 中的会话配置设置为“cake”。这会将会话数据写入 app/tmp/sessions，只有您的网站才能访问。

# java - Java中的热敏打印

> ID：14681165
> 
> 赞同：0
> 
> 时间：2013-02-04T05:59:43.920
> 
> 标签：java

我的热敏打印机有问题。每次我打印时，都会像这样添加一些代码/文本。

```
%!PS-Adobe-3.0
%%BoundingBox: 17 19 595 773 
%%Pages: 1
..... 
%%BegingFeature: *InputSlot Upper 
2 dict up /PageSize [612 792] put dup /ImagingBox null put setpagedevice 
%%EndFeature 
.... 
%%EndSetup 
%%Page: 1 1 
%%BeginPageSetup 
%%EndPageSetup 
%%BeginDocument: nondsc 
Hello World 
%%EndDocument 
%%EOF 
```

我只想打印“Hello World”，如何消除输出中不需要的文本？我的代码中有什么东西吗？

我的打印机是 ESC/POS 型号 P06-P 我的平台：Mac OS 10.8.2

我的代码是

```
String defaultPrinter = PrintServiceLookup.lookupDefaultPrintService().getName();
        System.out.println("Default printer: " + defaultPrinter);
        PrintService service = PrintServiceLookup.lookupDefaultPrintService();
        // prints the famous hello world! plus a form feed
        InputStream is = new ByteArrayInputStream("hello world!\f".getBytes("UTF8"));

        PrintRequestAttributeSet  pras = new HashPrintRequestAttributeSet();

        pras.add(new Copies(1));

        DocFlavor flavor = DocFlavor.INPUT_STREAM.AUTOSENSE;
        Doc doc = new SimpleDoc(is, flavor, null);
        DocPrintJob job = service.createPrintJob();

        job.print(doc, pras);
        is.close(); 
```

任何帮助将非常感激

========================================

当我尝试在 CLI 上打印它时，它会打印出来，但是当我在 java 中制作这段代码时，它没有打印出来。waitFor() 总是返回 1。我确定文件在那里，并且它正在执行的目录。但是当我只发出“ls”时，它会有一个输出。

```
 List<String> cmd = new ArrayList<String>();
    cmd.add("lpr");
    cmd.add("-P");
    cmd.add("Prolific_Technology_Inc__IEEE_1284_Controller");
    cmd.add("-oraw");
    cmd.add("lalala.txt");

    ProcessBuilder pb = new ProcessBuilder(cmd);
    pb.directory(new File("src/org/cups4j/test"));
    Process p = pb.start();
    int res = p.waitFor();
    String line = null;
    try { 
        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream())); 
        while( (line = input.readLine()) != null){
            System.out.println(line);
        }
     } catch (IOException e1) { 
         e1.printStackTrace();
         System.exit(0); 
     }    
    System.out.println("Result: " + res); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:47:25.180

您可能会在打印机的（程序员）手册中找到正确的转义序列。

```
// ouput an escape sequence
byte ESC = 0x1b;
FileOutputStream out = new FileOutputStream("lalala.txt");
byte[] buf = new byte[]{ESC,0x31};
out.write(buf);
out.close(); 
```

# c# - 当我同时使用c#时如何配置matlab工具箱？

> ID：14681172
> 
> 赞同：0
> 
> 时间：2013-02-04T06:00:38.807
> 
> 标签：c#, matlab, configure

我正在尝试在 c# 中使用 matlab 的神经网络。我已将代码编译为 .Net 程序集，然后我在 c# 中调用 matlab 函数，然后出现异常：

**... MWMCR::EvaluateFunction 错误 ... 使用 nnetParamInfo 时出错（第 28 行） FCN 不是 MATLAB 路径上的函数名称。**

在我简单地创建一个网络的那一行引发的异常：

**净 = elmannet();**

所以，我认为这个问题是由于工具箱的路径配置错误造成的。我试图在 Matlab 中发出路径命令并得到一长串工具箱和其他东西。

我怎么解决这个问题？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T11:34:55.323

部署产品（包括 MATLAB Builder for .NET）并不支持所有神经网络工具箱。有关详细信息，请参阅[编译器支持](http://www.mathworks.com/products/compiler/supported/compiler_support.html)页面。特别是，您只能部署应用预训练网络的功能 - 您不能部署创建或训练新网络的功能。

# c# - 编码 UI 的验证

> ID：14681173
> 
> 赞同：0
> 
> 时间：2013-02-04T06:00:49.490
> 
> 标签：c#, validation, coded-ui-tests

我是编码 UI 的新手。我想要对 Texbox、下拉列表、组合框和其他控件进行某种验证。
这些验证属于以下类型。
1) 必填字段验证
2) 正则表达式验证
3) Renge 验证
4) 比较器验证
5) 控件宽度、高度和其他类型的 UI 相关验证。

如何自定义这些测试方法？有没有什么好的网站可以了解更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T14:57:03.673

网络上有很多 Coded UI 资源。Microsoft 的 Channel 9 网站有几个视频。微软的博客有很多很好的文章，[这个博客](http://blogs.msdn.com/b/mathew_aniyan/archive/2010/02/11/content-index-for-coded-ui-test.aspx)有很多 Coded UI 参考资料的索引。

对于您的观点“ *5) 控件宽度、高度和其他类型的 UI 相关验证。* ”。Coded UI 旨在进行功能测试。编码 UI 测试旨在独立于精确的屏幕布局，因此测试可以适应对布局的许多简单更改。此类布局更改可能是因为应用程序代码已更改或因为应用程序适应不同的窗口大小。Coded UI 不太擅长检查用户界面是否具有所需的布局或美学是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T11:40:45.823

通常，为了测试这些基于用户输入的验证，我们使用测试输入数据的[参数化，并根据输出（即使用](https://msdn.microsoft.com/en-us/library/ee624082.aspx)[断言](https://msdn.microsoft.com/en-us/library/dd286671%28v=vs.100%29.aspx)）通过或失败测试用例。

对于客户端验证，您可以参考[这篇文章](https://social.msdn.microsoft.com/Forums/en-US/ab852472-abe8-4e7b-9520-d729380a9e80/client-side-validations-not-working-in-coded-ui?forum=vsautotest)

我同意如果您还没有 C# 知识，您将需要一些 C# 知识。

对于您关于 UI 相关验证的观点 ["5) 控件宽度、高度和其他类型的 UI 相关验证。"] 您可以选择专门为它设计的框架，例如[Galen 框架](http://galenframework.com/)，因为 Coded UI 允许您插入您的拥有自己的代码片段，您可以在编码的 UI 测试本身中控制[Galen 框架的执行。](http://galenframework.com/)在您的情况下，当它的 Windows 应用程序 galen 框架可能没有任何帮助时。

这是我发现的另一个可以测试 Windows 应用程序布局的工具[http://www.codeproject.com/Articles/289028/White-An-UI-Automation-tool-for-windows-applicio](http://www.codeproject.com/Articles/289028/White-An-UI-Automation-tool-for-windows-applicatio) 我不会保证成功和使用[白色](http://www.codeproject.com/Articles/289028/White-An-UI-Automation-tool-for-windows-applicatio)，因为我刚刚读过它并且从未使用过。

# java - Java：匹配正则表达式并替换每个字符

> ID：14681175
> 
> 赞同：3
> 
> 时间：2013-02-04T06:01:08.657
> 
> 标签：java, regex, replace

我有一个字符串，例如：

```
There exists a word *random*. 
```

`random`将是一个随机词。
如何使用正则表达式替换`random`with的每个字符`*`并获得以下结果：

```
There exists a word ********. 
```

所以`*`替换每个字符，在本例中为 6 个字符。
请注意，我只替换单词`random`，而不是环境`*`。到目前为止，我有：

```
str.replaceAll("(\\*)[^.]*(\\*)", "\\*"); 
```

但它替换`*random*`为`*`, 而不是所需的`********`（总共 8 个）。
任何帮助，非常感谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T06:14:27.313

## 如果你只有一个这样的词：-

就当前示例而言，如果您只有一个这样的单词，那么您可以通过使用一些`String`类方法来避免正则表达式：-

```
String str = "There exists a word *random*.";

int index1 = str.indexOf("*");
int index2 = str.indexOf("*", index1 + 1);

int length = index2 - index1 - 1;   // Get length of `random`

StringBuilder builder = new StringBuilder();

// Append part till start of "random"
builder.append(str.substring(0, index1 + 1));

// Append * of length "random".length()
for (int i = 0; i < length; i++) {
    builder.append("*");
}

// Append part after "random"
builder.append(str.substring(index2));

str = builder.toString(); 
```

* * *

## 如果你可以有多个这样的词：-

为此，这是一个正则表达式解决方案（这是它开始变得有点复杂的地方）： -

```
String str = "There exists a word *random*.";
str = str.replaceAll("(?<! ).(?!([^*]*[*][^*]*[*])*[^*]*$)", "*");
System.out.println(str); 
```

上面的模式`string containing even numbers of *`用`*`.

哪个适合你，你可以使用。

我将添加对上述正则表达式的解释： -

```
(?<! )       // Not preceded by a space - To avoid replacing first `*`
.            // Match any character
(?!          // Not Followed by (Following pattern matches any string containing even number of stars. Hence negative look-ahead
    [^*]*    // 0 or more Non-Star character
    [*]      // A single `star`
    [^*]*    // 0 or more Non-star character
    [*]      // A single `star`
)*           // 0 or more repetition of the previous pattern.
[^*]*$       // 0 or more non-star character till the end. 
```

现在上面的模式将只匹配那些单词，它们是`inside a pair of stars`. 前提*是您没有任何不平衡`stars`*的 .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T06:17:56.830

您可以提取之间的单词`*`并对其执行替换所有字符`*`。

```
import java.util.regex.*;

String txt = "There exists a word *random*.";
// extract the word
Matcher m = Pattern.compile("[*](.*?)[*]").matcher(txt);
if (m.find()) {
    // group(0): *random*
    // group(1): random
    System.out.println("->> " + m.group(0));
    txt = txt.replace(m.group(0), m.group(1).replaceAll(".", "*"));
}
System.out.println("-> " + txt); 
```

你可以在ideone上看到：http: [//ideone.com/VZ7uMT](http://ideone.com/VZ7uMT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:30:22.367

尝试

```
 String s = "There exists a word *random*.";
    s = s.replaceAll("\\*.+\\*", s.replaceAll(".*(\\*.+\\*).*", "$1").replaceAll(".", "*"));
    System.out.println(s); 
```

输出

```
There exists a word ********. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:32:19.360

```
public static void main(String[] args) {
    String str = "There exists a word *random*.";
    Pattern p = Pattern.compile("(\\*)[^.]*(\\*)");

    java.util.regex.Matcher m = p.matcher(str);
    String s = "";
    if (m.find())
        s = m.group();

    int index = str.indexOf(s);
    String copy = str;
    str = str.substring(0, index);

    for (int i = index; i < index + s.length(); i++) {
        str = str + "*";
    }
    str = str + copy.substring(index + s.length(), copy.length());

    System.out.println(str);

} 
```

# matlab - 如何使用 cellfun 或 arrayfun 来代替这个循环？

> ID：14681177
> 
> 赞同：2
> 
> 时间：2013-02-04T06:01:18.057
> 
> 标签：matlab, matrix, vectorization

我在 Matlab 中实现了以下功能。

```
function [x y] = cloud(a,b,phi,x0,y0,N)
phi=phi*2*pi/360;
m=ceil(5*N/pi);
x=a*(-1+2*rand(m,1));
y=b*(-1+2*rand(m,1));
f=sqrt(a^2 - b^2);
indexMatrix=zeros(m,3);
indexMatrix(:,1)=x;
indexMatrix(:,2)=y;
insidePointsMatrix=zeros(1,2);
j=1;
for i=1:m
    insidePoint=sqrt(((x(i)+f).^2) + (y(i))^2) + sqrt(((x(i)-f).^2) + (y(i))^2);
    if (insidePoint<=2*a)
        indexMatrix(i,3)=1;
        %insidePointsMatrix(j,:)=indexMatrix(i,1:2);
        if j<=N
            insidePointsMatrix(j,1:2)=indexMatrix(i,1:2);
            j=j+1;
        end
    end
end 
```

我正在阅读`arrayfun`and `cellfun`，我想知道是否可以缩短我已经使用它实现的功能。给定一个 2 xn 矩阵`A`，其中 (u,v) 是任何给定行的条目，我如何返回一个矩阵，列出每一行的以下公式的输出？

```
sqrt((u+f).^2+v.^2) + sqrt((u-v)^2+v^2) 
```

变量`f`和`a`在上面定义。我正在尝试将一系列点转换为椭圆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:20:58.317

using`find`应该给你`u,v`坐标：

```
cond=sqrt(((x+f).^2) + y.^2) + sqrt(((x-f).^2) + y.^2) ;
ind=find(cond<=2*a);
u=x(ind);
v=y(ind); 
```

# vb.net - 向 vb.net 项目添加额外文件

> ID：14681179
> 
> 赞同：1
> 
> 时间：2013-02-04T06:01:19.767
> 
> 标签：vb.net, publish

我正在尝试在 VB.NET Express 2012 中向我的项目中添加一些“支持”文件。这些文件是不属于 VB.NET 的附加文件，例如作为报告模板的 RTF 文件等。还有一些文本基于模板文件，将作为我的程序执行的一部分进行修改。

我做了什么：

*   我已将这些添加到项目中（即它们出现在项目下的解决方案资源管理器中）

*   我已在属性窗口中将每个文件的“复制到输出目录”设置为“始终复制”。

当我发布项目并重新安装它时，这些文件都不包括在内。

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:12:35.447

从构建操作中，您应该选择“内容”

# ajax - 如何使用 AJAX 在 javascript 中调用 Twitter v1.1 API

> ID：14681182
> 
> 赞同：5
> 
> 时间：2013-02-04T06:01:49.880
> 
> 标签：ajax, oauth, twitter

目标 - 使用 javascript 获取特定用户的 twitter 关注者

我已尝试将以下代码作为 POC-

```
$(document).ready(function() {
    // Handler for .ready() called.

    $.ajax({
        url: "https://api.twitter.com/1.1/followers/ids.json?callback=?",
        type: "GET",
        data: { cursor: "-1", 
                screen_name: "twitterapi" },
        cache: false,
        dataType: 'json',

        success: function(data) { alert('hello!'); console.log(data);},
        error: function(html) { alert(html); },
        beforeSend: setHeader
    });

    function setHeader(xhr) {
        if(xhr && xhr.overrideMimeType) {
            xhr.overrideMimeType("application/j-son;charset=UTF-8");
        }

        //var nonce = freshNonce();
        //var timestamp = freshTimestamp();
        //var signature = sign(nonce,timestamp);

        //alert(signature);
        //alert(accessToken+"-"+consumerKey);
        //alert(oauth_version+"-"+oauth_signature_method);
        xhr.setRequestHeader('Authorization','OAuth');
        xhr.setRequestHeader('oauth_consumer_key', 'HdFdA3C3pzTBzbHvPMPw');
        xhr.setRequestHeader('oauth_nonce', '4148fa6e3dca3c3d22a8315dfb4ea5bb');
        xhr.setRequestHeader('oauth_signature','uDZP2scUz6FUKwFie4FtCtJfdNE%3D');
        xhr.setRequestHeader('oauth_signature_method', 'HMAC-SHA1');
        xhr.setRequestHeader('oauth_timestamp', '1359955650');
        xhr.setRequestHeader('oauth_token', '1127121421-aPHZHQ5BCUoqfHER2UYhQYUEm0zPEMr9xJYizXl');
        xhr.setRequestHeader('oauth_version', '1.0');
    }

}); 
```

我从 Twitter OAuth 工具计算了签名值..这给了我 400 Bad Request 错误....

请让我知道问题是什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-18T14:49:45.190

问题是您的请求标头，应该是这样的：

```
xhr.setRequestHeader('Authorization','OAuth oauth_consumer_key="HdFdA3C3pzTBzbHvPMPw", oauth_nonce="4148fa6e3dca3c3d22a8315dfb4ea5bb", oauth_signature="uDZP2scUz6FUKwFie4FtCtJfdNE%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp= "1359955650", oauth_token, "1127121421-aPHZHQ5BCUoqfHER2UYhQYUEm0zPEMr9xJYizXl", oauth_version="1.0"'); 
```

顺便说一句，这个 javascript 库可能会帮助您了解 OAuth 的内容：[oauth-1.0a](https://github.com/ddo/oauth-1.0a)

它支持客户端和node.js

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T16:21:27.613

oauth_* 字段都是 Authorization 标头字符串的一部分，因此需要将它们连接起来，如本页底部所示 - [https://dev.twitter.com/docs/auth/authorizing-request](https://dev.twitter.com/docs/auth/authorizing-request)

它们不应显示为单独的标题字段。

# caliper - 未生成 Caliper 基准在线结果

> ID：14681188
> 
> 赞同：0
> 
> 时间：2013-02-04T06:02:19.893
> 
> 标签：caliper

我按照[http://code.google.com/p/caliper/wiki/OnlineResults?show=content](http://code.google.com/p/caliper/wiki/OnlineResults?show=content)中的 isstructions为我生成了一个密钥。我将此密钥放入我的 Linux 机器中的文件 ~/.caliperrc 中，并在 Google 上定义了该帐户。当我运行我的基准测试时，那里什么也没有发生：在我的[http://microbenchmarks.appspot.com](http://microbenchmarks.appspot.com)页面上，它是“还没有基准测试”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:33:38.463

所以，这绝对适合你。需要检查的几件事：

*   你包括了整行。" `apiKey:`" 部分是必需的。所以你应该有一整行看起来像：`apiKey: ffffffff-0000-0000-0000-ffffffffffff`

*   可能是存在连接问题。你不是在代理背后还是什么？如果需要，可以将代理指定为：`proxy: foo.com:8080`

# activemq - XA 事务真的是原子的吗？

> ID：14681196
> 
> 赞同：2
> 
> 时间：2013-02-04T06:02:49.880
> 
> 标签：activemq, apache-camel, xa, fuseesb

看来我并不完全理解 XA 事务是如何工作的。我认为它是原子的：我认为当我提交事务时，新消息和新数据将同时可用。

这种误解导致我遇到以下问题：将新行插入 DB，并将消息发送到事务路由中的队列。在另一条路线中接收到消息。然后，此路由尝试对插入前一个路由的行执行一些操作。但它没有看到它们！

配置第二条路由，以便在发生异常时将消息回滚到队列。而且我看到在第二次运行后，路线会看到行！

作为结论，我会问下一个问题：

1.  XA 事务真的是原子的吗？
2.  如果不是，我如何为我的事务资源配置提交顺序？

**附加说明：**该问题在 Fuse ESB/ServiceMix 4.4.1 中发现

* * *

**2 Jake：** 我的骆驼上下文配置如下所示：

```
<osgi:reference id="osgiPlatformTransactionManager" interface="org.springframework.transaction.PlatformTransactionManager"/>
<osgi:reference id="osgiJtaTransactionManager" interface="javax.transaction.TransactionManager"/>

<osgi:reference id="myDataSource"
       interface="javax.sql.DataSource"
       filter="(osgi.jndi.service.name=jdbc/postgresXADB)"/>

 <bean id="PROPAGATION_MANDATORY" class="org.apache.camel.spring.spi.SpringTransactionPolicy">
    <property name="transactionManager" ref="osgiPlatformTransactionManager"/>
    <property name="propagationBehaviorName" value="PROPAGATION_MANDATORY"/>
 </bean>

 <bean id="PROPAGATION_REQUIRED" class="org.apache.camel.spring.spi.SpringTransactionPolicy">
    <property name="transactionManager" ref="osgiPlatformTransactionManager"/>
    <property name="propagationBehaviorName" value="PROPAGATION_REQUIRED"/>
 </bean>

<bean id="jmstx" class="org.apache.activemq.camel.component.ActiveMQComponent"> 
    <property name="configuration" ref="jmsTxConfig" /> 
</bean> 

<bean id="jmsTxConfig" class="org.apache.camel.component.jms.JmsConfiguration"> 
    <property name="connectionFactory" ref="jmsXaPoolConnectionFactory"/> 
    <property name="transactionManager" ref="osgiPlatformTransactionManager"/>
    <property name="transacted" value="false"/>
    <property name="cacheLevelName" value="CACHE_NONE"/>
    <property name="concurrentConsumers" value="${jms.concurrentConsumers}" />
</bean> 

<bean id="jmsXaPoolConnectionFactory" class="org.apache.activemq.pool.XaPooledConnectionFactory">
    <property name="maxConnections" value="${jms.maxConnections}" />
    <property name="connectionFactory" ref="jmsXaConnectionFactory" />
    <property name="transactionManager" ref="osgiJtaTransactionManager" />
</bean>

<bean id="jmsXaConnectionFactory" class="org.apache.activemq.ActiveMQXAConnectionFactory">
    <property name="brokerURL" value="${jms.broker.url}"/>
    <property name="redeliveryPolicy">
        <bean class="org.apache.activemq.RedeliveryPolicy">
            <property name="maximumRedeliveries" value="-1"/>
            <property name="initialRedeliveryDelay" value="2000" />
            <property name="redeliveryDelay" value="5000" />
        </bean>
    </property>
</bean> 
```

DB数据源配置如下：

```
<bean id="myDataSource" class="org.postgresql.xa.PGXADataSource">
    <property name="serverName" value="${db.host}"/>
    <property name="databaseName" value="${db.name}"/>
    <property name="portNumber" value="${db.port}"/>
    <property name="user" value="${db.user}"/>
    <property name="password" value="${db.password}"/>
</bean>

<service ref="myDataSource" interface="javax.sql.XADataSource">
    <service-properties>
        <entry key="osgi.jndi.service.name" value="jdbc/postgresXADB"/>
            <entry key="datasource" value="postgresXADB"/>
    </service-properties>
</service> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:50:54.627

我不是这方面的专家，但我认为 XA 提供的原子性只能保证：

*   要么发生整个提交，要么整个提交回滚。
*   整个提交/回滚在提交请求返回给调用它的人之前完成。

我不认为对同时完成的单个参与者做出任何保证，也没有维护任何类型的“提交依赖树”来保证后续处理只发生在已提交的参与者身上。

我认为要实现您想要的，您可能需要将消息队列放在主事务之外......这首先破坏了事务的整个要点:(

我认为您可能只需要在下游处理中放置一个重试/超时循环。另一种方法可能是探索并发选项，看看您是否允许下游事务“看到”上游。

希望这个答案能促使对这些东西有更多了解的人参与进来！

# symfony - mysql tinyint(2) 的错误映射为 boolean 与学说

> ID：14681197
> 
> 赞同：7
> 
> 时间：2013-02-04T06:03:03.887
> 
> 标签：symfony, doctrine, dbal, tinyint, doctrine-dbal

我使用 symfony2 对我的数据库进行了逆向工程，并使用命令对我的数据库进行了逆向工程：

```
php app/console doctrine:mapping:convert
php app/console doctrine:mapping:import
php app/console doctrine:generate:entities 
```

但是我的字段被映射为布尔值而不是 tinyint(2)。

为什么它映射为布尔值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-08T20:51:12.427

`tinyint`（无论长度）映射到[MySQL DBAL 平台](https://github.com/doctrine/dbal/blob/090066c7e186a26a248344140a10ffb78a8f4186/lib/Doctrine/DBAL/Platforms/MySqlPlatform.php#L637)`boolean`中的类型。

另外，请考虑实体生成器不是一个可靠的工具：它只是为了帮助您开始使用更大的模式。

# mysql - 选择查询返回错误结果

> ID：14681198
> 
> 赞同：2
> 
> 时间：2013-02-04T06:03:03.890
> 
> 标签：mysql, sql, perl, select

例如：

桌子 ：`user`

列：（`user_id`类型为 int）

```
SELECT * FROM user WHERE user_id = '10xyz' 
```

给出相同的结果

```
SELECT * FROM user WHERE user_id = '10' 
```

输入值不是整数，但在这种情况下不会出错。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T06:04:29.863

您获得相同结果的原因是因为`MySQL`自动从字符串*中删除尾随字符并将其**隐式转换*为整数。

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/5cfef/5)
*   [SQLFiddle 演示（*更新*）](http://www.sqlfiddle.com/#!2/5cfef/20)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T07:24:57.227

如果您不想更改所有代码，但您的数据库查询都经过一个或几个子程序，您可以在使用语句句柄（例如`if ( $sth->{mysql_warning_count} ) ...`）后更改它们以检查警告。

或者，您可以创建一个 DBI 子类，它会自动为您执行此操作，从而将警告升级为错误。如果你这样做了，许多其他人都会使用这种东西。在更新或将“10xyz”之类的内容插入整数字段时，有一些配置设置会给出错误而不是警告，但没有比这更广泛的内容，亲爱的 Oracle 认为它[不是错误](http://bugs.mysql.com/bug.php?id=50757)。也许 MariaDB 做得（或可以做得）更好？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T06:08:09.560

user_id 的数据类型在数据库中是 INT

这就是为什么它给出相同的输出而不是错误

# objective-c - 跨 iOS 应用程序使用的变量

> ID：14681199
> 
> 赞同：0
> 
> 时间：2013-02-04T06:03:06.837
> 
> 标签：objective-c, integer

如何设置`integer`可以从 iOS 应用程序中的任何 ViewController 调用的？

例子：

**第一视图控制器**

```
int n;
n = 1; 
```

第二视图控制器

```
- (void)viewDidLoad
{
    n = 3;
} 
```

第三视图控制器

```
- (void)viewDidLoad
{
n=4
} 
```

**ForthViewController**

```
- (void)viewDidLoad
    {
int a =0;

    a=n+10;
    } 
```

当用户输入`ThirdViewController`然后`ForthViewController`. `int`a int将`ForthViewController`是 a=14。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:10:15.027

尝试使用单例，例如：

.h 文件

```
#import <Foundation/Foundation.h>

@interface SelectedView : NSObject {
NSInteger number;
}
@property (nonatomic) NSInteger number;

+ (SelectedView *) instance;

@end 
```

你的 .m 文件

```
#import "SelectedView.h"

@implementation SelectedView

@synthesize number;

static SelectedView *sharedNumber = nil;

+ (SelectedView *)instance {
    @synchronized(self) {
        if(sharedNumber == nil)
            sharedNumber = [[self alloc] init];
    }

return sharedNumber;
}

+ (id)allocWithZone:(NSZone *)zone {
    @synchronized(self) {
        if(sharedNumber == nil) {
            sharedNumber = [super allocWithZone:zone];

            return sharedNumber;
        }
    }

    return nil;
}

- (id)copyWithZone:(NSZone *)zone {
    return self;
}

- (id)retain {
    return self;
}

- (unsigned)retainCount {
    return UINT_MAX;
 }

- (id)autorelease {
    return self;
} 
```

那么当您希望实施时，只需：

```
#import "SelectedView.h"
SelectedView *board = [SelectedView instance];

NSInteger integer = board.number; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:11:22.077

您可以在 AppDelegate 中创建一个公共变量/属性。要访问它：

```
[(AppDelegate *)[[UIApplication sharedApplication] delegate] setN:4]; 
```

# magento - 本地主机中的 Magento SSL

> ID：14681203
> 
> 赞同：0
> 
> 时间：2013-02-04T06:03:29.020
> 
> 标签：magento, ssl, https

我正在为我的在线商店使用 Magento。昨天我将其 SSL 设置从

```
Magento Admin area -> System -> Configuration -> Web 
```

现在我无法访问管理区域。它给了我错误 404。如何在没有访问管理区域的情况下更改 SSL 设置？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:36:20.293

1.  在 phpMyAdmin 中打开 core_config_data 表。

2.  找到路径为 web/secure/use_in_adminhtml 的行并将其值字段从 1 更改为 0 以启用从不安全的[http://www.yourwebsite.com/admin](http://www.yourwebsite.com/admin) url访问管理面板

    更改 web/secure/use_in_frontend 会切换客户购物车安全性，1=on 和 0=off 这可能并不重要，因为您正试图重新获得管理访问权限

3.  清除 /var/cache、/var/session 并在完成上述操作并重新访问系统后，在更改设置后重新索引 URL_rewrite 索引。这是必要的，因为您的配置被缓存并且清除它会强制从 core_config_data 表中重新读取配置数据。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-30T23:28:01.743

请按照以下步骤操作（确保您在管理员用户或 sudo 中运行它）：

参考：[https ://www.youtube.com/watch?v=AAVAGb3QhSc](https://www.youtube.com/watch?v=AAVAGb3QhSc)

第 1 步：使用 OpenSSL 创建证书签名请求 (CSR) - cat /etc/*release，我的本地主机上有 Ubuntu 16.04。- apache2 -v，我在本地主机上安装了 apache 2.4.18

*   运行以下命令行：

    1.  在 Apache2 上启用 ssl 模块：a2enmod ssl
    2.  重启Apache2：service apache2 restart
    3.  创建名为 ssl 的文件夹，用于保存 pravite 密钥文件和证书签名请求文件：mkdir /etc/apache2/ssl
    4.  生成文件： openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout /etc/apache2/ssl/openssl.key -out /etc/apache2/ssl/openssl.crt

    输入以下信息： 国家名称（2 个字母代码）[AU]：美国州或省名称（全名）[Some-State]：纽约地区名称（例如，城市）[]：纽约市组织名称（例如, 公司）[Internet Widgits Pty Ltd]：您的公司组织单位名称（例如，部分）[]：小猫部门通用名称（例如服务器 FQDN 或您的姓名）[]：本地主机电子邮件地址 []：webmaster@localhost.com

第 2 步：配置您的 SSL 证书 - 编辑路径 /etc/apache2/sites-available/ 中名为 default-ssl.conf 的文件 将文本“/etc/ssl/certs/ssl-cert-snakeoil.pem”替换为"/etc/apache2/ssl/openssl.crt" 将文本 "/etc/ssl/private/ssl-cert-snakeoil.key" 替换为 "/etc/apache2/ssl/openssl.key" - 启用默认值 - ssl.conf: a2ensite default-ssl.conf - 在重启前测试你的 Apache2 配置文件：apachectl configtest - 重启 apache2: service apache2 restart

第 3 步：为您的网站配置 SSL 证书。- 在路径 /etc/apache2/sites-available/ 中创建名为 localhost-ssl.conf 的文件 - 在重新启动之前测试您的 Apache2 配置文件：apachectl configtest - 重新启动 apache2：service apache2 restart

然后按照 Omid Kosari 步骤在 magento DB 中启用 https

1.  在 phpMyAdmin 中打开 core_config_data 表。

2.  找到路径为 web/secure/use_in_adminhtml 的行并将其值字段从 1 更改为 0 以启用从不安全的[http://www.yourwebsite.com/admin](http://www.yourwebsite.com/admin) url访问管理面板

3.  更改 web/secure/use_in_frontend 会切换客户购物车安全性，1=on 和 0=off 这可能并不重要，因为您正试图重新获得管理访问权限

4.  清除 /var/cache、/var/session 并在完成上述操作并重新访问系统后，在更改设置后重新索引 URL_rewrite 索引。这是必要的，因为您的配置被缓存并且清除它会强制从 core_config_data 表中重新读取配置数据。

# hadoop - Sqoop 导入作业因任务超时而失败

> ID：14681205
> 
> 赞同：3
> 
> 时间：2013-02-04T06:03:48.290
> 
> 标签：hadoop, bigdata, sqoop

我试图使用 sqoop 将 MySQL 中的 1 TB 表导入 HDFS。使用的命令是：

`sqoop import --connect jdbc:mysql://xx.xx.xxx.xx/MyDB --username myuser --password mypass --table mytable --split-by rowkey -m 14`

执行 bounding vals 查询后，所有映射器都启动，但一段时间后，任务因超时（1200 秒）而被终止。我认为这是因为执行`select`在每个映射器中运行的查询所花费的时间超过了为超时设置的时间（在 sqoop 中似乎是 1200 秒）；因此它无法报告状态，并且该任务随后被杀死。（我也尝试过 100 GB 数据集；由于多个映射器超时，它仍然失败。）对于单个映射器导入，它工作正常，因为不需要过滤结果集。`0`在 sqoop 中使用多个映射器时，是否有任何方法可以覆盖映射任务超时（比如将其设置为或非常高的值）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T00:53:08.703

Sqoop 使用特殊线程来发送状态，这样地图任务就不会被 jobtracker 杀死。我有兴趣进一步探讨您的问题。您介意共享 sqoop 日志、地图任务日志之一和您的表架构吗？

雅尔切克

# testing - 如何在 Selenium 中添加对所有测试用例的检查

> ID：14681208
> 
> 赞同：0
> 
> 时间：2013-02-04T06:03:55.387
> 
> 标签：testing, selenium, webautomation

我正在运行测试用例来检查多个页面，但我想在每个页面上包含相同的基本检查，例如返回所有 css、js 文件，页面上没有“找不到页面”文本等。

有没有办法添加标准检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:26:09.643

使用继承..

您的所有页面都应继承自包含常见测试的“BasicPage”。

然而，这些测试之间不应该有任何依赖关系，或者与子类测试的测试不应该有任何依赖关系，因为不能保证这些测试的顺序。

# java - 如何在 java 中执行 Core Show channels 命令以及 grep Channels

> ID：14681210
> 
> 赞同：0
> 
> 时间：2013-02-04T06:04:07.583
> 
> 标签：java, process, grep, asterisk

我需要大家的帮助。我正在使用 java，我想执行一个命令，该命令用于获取星号中的频道详细信息。该系统是基于linux的。我想同时执行命令“core show channels”也想 grep channels

以下是在控制台中正常触发时的命令和输出。

```
 asterisk -vvvvvrx 'core show channels' | grep channels 
```

并且输出是 2 个活动通道

我正在尝试在java中使用以下代码

```
import java.io.IOException;
import java.util.*;
import java.io.BufferedReader;
import java.io.InputStreamReader;
public class ProcessBuilderExample
{
  public static void main(String[] args) 
  throws IOException, InterruptedException
  {
  String[] commands = new String[]{"asterisk","-rx","core show channels","| grep 'channels'"};
 Process p = Runtime.getRuntime().exec(commands);
    p.waitFor();
   BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
   String line = "";
while((line = br.readLine()) != null) {
      System.out.println(line);
}
    System.out.println("hello");
  }
} 
```

但它没有向我显示正确的输出请帮助我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:11:09.973

您在命令参数和管道之间混淆了。当您说它`cmda | cmdb`本质上意味着运行`cmda`并将其输出作为输入传递时`cmdb`，您的代码将字符串“| cmdb”作为参数传递`cmda`

有几种方法可以修复代码，但我认为最直接的方法是去掉最后一个 grep 参数：

```
String[] commands = new String[]{"asterisk","-rx","core show channels"}; 
```

然后当你循环结果时，只需使用`contains()`String 类中的方法来检查它是否包含字符串*通道*

```
while((line = br.readLine()) != null) {
  if(line.contains("channels")  System.out.println(line);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:18:41.147

尝试改变

`String[] commands = new String[]{"asterisk","-rx","core show channels","| grep 'channels'"};`

到：

```
String[] commands = new String[]{"/bin/sh", "-c", "asterisk -rx 'core show channels' | grep 'channels'"}; 
```

原因：

您的竖线将被解释为“\|”（即字面意思是“|”而不是管道“），如果我们改为调用 shell 命令（/bin/sh）并将整个命令作为其参数，竖线将是正确解释。

# android - 如何将免费的 Android 应用程序转换为付费应用程序

> ID：14681212
> 
> 赞同：1
> 
> 时间：2013-02-04T06:04:27.850
> 
> 标签：android

> **可能重复：**
> [如何在保留任何数据的同时处理从免费版本到付费版本的应用程序升级](https://stackoverflow.com/questions/3011164/how-to-handle-application-upgrades-from-free-to-paid-version-while-preserving-an)

我想要同一应用程序的免费版本和高级版本。当人们购买应用程序时，我希望他们能够“升级”而不会丢失数据，即高级版应该安装在免费版之上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:07:29.123

这样做的唯一方法是利用 Google Play 的应用内计费。因此，您的应用将包含完整版的所有代码，但仅限于免费版，直到他们为应用内购买付费。

# oop - Tkinter/matplotlib GUI 中的面向对象架构和酸洗问题和多处理

> ID：14681222
> 
> 赞同：1
> 
> 时间：2013-02-04T06:05:27.507
> 
> 标签：oop, architecture, tkinter, multiprocessing, pickle

我知道人们提出了几个关于非响应式 GUI 的问题，最终的答案是 Tkinter 不是线程安全的。但是，据我了解，可以利用队列来克服这个问题。因此，我一直在研究将多处理模块与队列一起使用，以便我的代码可以在超线程和多核系统上使用。
我想做的是尝试在按下按钮时对不同选项卡中的多个导入光谱进行非常复杂的最小二乘拟合。问题是我的代码仍然挂在我通过 GUI 中的按钮初始化的漫长过程中。我已经将代码缩减为仍然可以运行并且具有我原始程序的大部分对象的东西，但仍然存在没有响应的问题。我相信我的问题出在程序的多处理部分。

**因此，我的问题是关于代码的多处理部分，以及是否有更好的方法来组织此处显示的 process_spectra() 函数：**

```
def process_spectra(self):
process_list = []
queue = mp.Queue()
for tab in self.tab_list:
    process_list.append(mp.Process(target=Deconvolution(tab).deconvolute(), args=(queue,)))
    process_list[-1].start()
    process_list[-1].join()
return 
```

目前看来，这实际上并没有将反卷积过程变成不同的线程。我希望 process_spectra 函数同时使用反卷积函数处理所有光谱，同时仍然能够与光谱和 GUI 交互并查看其变化。

这是可以作为 .py 文件直接运行以重现我的问题的完整代码：

```
from Tkinter import *
import Tkinter
import tkFileDialog
import matplotlib
from matplotlib import *
matplotlib.use('TKAgg')
from matplotlib import pyplot, figure, backends
import numpy as np
import lmfit
import multiprocessing as mp

# lots of different peaks can appear
class peak:
    def __init__(self, n, m):
        self.n = n
        self.m = m
    def location(self, i):
        location = i*self.m/self.n
        return location
    def NM(self):
        return str(self.n) + str(self.m)

# The main function that is given by the user has X and Y data and peak data
class Spectra:
    def __init__(self, spectra_name, X, Y):
        self.spectra_name = spectra_name
        self.X = X
        self.Y = Y
        self.Y_model = Y*0
        self.Y_background_model = Y*0
        self.Y_without_background_model = Y*0
        self.dYdX = np.diff(self.Y)/np.diff(self.X)

        self.peak_list = self.initialize_peaks(3, 60)

        self.params = lmfit.Parameters()

    def peak_amplitude_dictionary(self):
        peak_amplitude_dict = {}
        for peak in self.peak_list:
            peak_amplitude_dict[peak] = self.params['P' + peak.NM() + '_1_amp'].value
        return peak_amplitude_dict

    def peak_percentage_dictionary(self):
        peak_percentage_dict = {}
        for peak in self.peak_list:
            peak_percentage_dict[peak] = self.peak_amplitude_dictionary()[peak]/np.sum(self.peak_amplitude_dictionary().values())
        return peak_percentage_dict

    # Function to create all of the peaks and store them in a list
    def initialize_peaks(self, lowestNM, highestNM):
        peaks=[]
        for n in range(0,highestNM+1):
            for m in range(0,highestNM+1):
                if(n<lowestNM and m<lowestNM): break
                elif(n<m): break
                else: peaks.append(peak(n,m))
        return peaks
# This is just a whole bunch of GUI stuff      
class Spectra_Tab(Frame):
    def __init__(self, parent, spectra):
        self.spectra = spectra
        self.parent = parent
        Frame.__init__(self, parent)
        self.tab_name = spectra.spectra_name

        self.canvas_frame = Frame(self, bd=3, bg= 'WHITE', relief=SUNKEN)
        self.canvas_frame.pack(side=LEFT, fill=BOTH, padx=0, pady=0, expand=1)
        self.results_frame = Frame(self, bd=3, bg= 'WHITE', relief=SUNKEN, width=600)
        self.results_frame.pack(side=RIGHT, fill=BOTH, padx=0, pady=0, expand=1)

        self.top_canvas_frame = Frame(self.canvas_frame, bd=0, bg= 'WHITE', relief=SUNKEN)
        self.top_canvas_frame.pack(side=TOP, fill=BOTH, padx=0, pady=0, expand=1)

        self.original_frame = Frame(self.top_canvas_frame, bd=1, relief=SUNKEN)
        self.original_frame.pack(side=LEFT, fill=BOTH, padx=0, pady=0, expand=1)

        self.scrollbar = Scrollbar(self.results_frame)
        self.scrollbar.pack(side=RIGHT, fill=BOTH,expand=1)
        self.sidebar = Listbox(self.results_frame)
        self.sidebar.pack(fill=BOTH, expand=1)
        self.sidebar.config(yscrollcommand=self.scrollbar.set)
        self.scrollbar.config(command=self.sidebar.yview)

        self.original_fig = figure.Figure()
        self.original_plot = self.original_fig.add_subplot(111)

        init_values = np.zeros(len(self.spectra.Y))
        self.original_line, = self.original_plot.plot(self.spectra.X, self.spectra.Y, 'r-')
        self.original_background_line, = self.original_plot.plot(self.spectra.X, init_values, 'k-', animated=True)

        self.original_canvas = backends.backend_tkagg.FigureCanvasTkAgg(self.original_fig, master=self.original_frame)
        self.original_canvas.get_tk_widget().pack(side=TOP, fill=BOTH, expand=1)
        self.original_canvas._tkcanvas.pack(side=TOP, fill=BOTH, expand=1)
        self.original_canvas.show()
        self.original_canvas.draw()

        self.original_canvas_BBox = self.original_plot.figure.canvas.copy_from_bbox(self.original_plot.bbox)

        ax1 = self.original_plot.figure.axes[0]
        ax1.set_xlim(self.spectra.X.min(), self.spectra.X.max())
        ax1.set_ylim(0, self.spectra.Y.max() + .05*self.spectra.Y.max())

        self.step=0
        self.update()
    # This just refreshes the GUI stuff everytime that the parameters are fit in the least squares method
    def refreshFigure(self):
        self.step=self.step+1
        if(self.step==1):
            self.original_canvas_BBox = self.original_plot.figure.canvas.copy_from_bbox(self.original_plot.bbox)

        self.original_plot.figure.canvas.restore_region(self.original_canvas_BBox)

        self.original_background_line.set_data(self.spectra.X, self.spectra.Y_background_model)

        self.original_plot.draw_artist(self.original_line)
        self.original_plot.draw_artist(self.original_background_line)
        self.original_plot.figure.canvas.blit(self.original_plot.bbox)
        # show percentage of peaks on the side bar
        self.sidebar.delete(0, Tkinter.END)
        peak_dict = self.spectra.peak_percentage_dictionary()
        for peak in sorted(peak_dict.iterkeys()):
            self.sidebar.insert(0, peak.NM() + '        ' + str(peak_dict[peak]) + '%' )
        return
# just a tab bar 
class TabBar(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.tabs = {}
        self.buttons = {}
        self.current_tab = None
    def show(self):
        self.pack(side=BOTTOM, expand=0, fill=X)
    def add(self, tab):
        tab.pack_forget()
        self.tabs[tab.tab_name] = tab
        b = Button(self, text=tab.tab_name, relief=RAISED, command=(lambda name=tab.tab_name: self.switch_tab(name)))
        b.pack(side=LEFT)
        self.buttons[tab.tab_name] = b
    def switch_tab(self, name):
        if self.current_tab:
            self.buttons[self.current_tab].config(relief=RAISED)
            self.tabs[self.current_tab].pack_forget()
        self.tabs[name].pack(side=BOTTOM)
        self.current_tab = name
        self.buttons[name].config(relief=SUNKEN)

class Deconvolution:
    def __init__(self, spectra_tab):
        self.spectra_tab = spectra_tab
        self.spectra = spectra_tab.spectra

        self.model = [0 for x in self.spectra.X]
        self.model_without_background = [0 for x in self.spectra.X]
        self.residual_array = [0 for x in self.spectra.X]

        # Amplitudes for backgrounds
        self.pi_plasmon_amp = np.interp(4.3, self.spectra.X, self.spectra.Y)
        self.graphite_amp = np.interp(5, self.spectra.X, self.spectra.Y)

        self.spectra.params.add('PPAmp', value=self.pi_plasmon_amp, vary=True, min=0.0, max=None)
        self.spectra.params.add('PPCenter', value=4.3, vary=True)
        self.spectra.params.add('PPFWHM', value=.4, vary=True)
        self.spectra.params.add('GLAmp', value=self.graphite_amp, vary=True, min=0.0, max=None)
        self.spectra.params.add('GLCenter', value=5, vary=True)
        self.spectra.params.add('GLFWHM', value=.4, vary=True)

        self.background_model = self.pseudoVoigt(self.spectra.X, self.spectra.params['PPAmp'].value, self.spectra.params['PPCenter'].value, self.spectra.params['PPFWHM'].value, 1)+\
                                self.pseudoVoigt(self.spectra.X, self.spectra.params['GLAmp'].value, self.spectra.params['GLCenter'].value, self.spectra.params['GLFWHM'].value, 1)

        for peak in self.spectra.peak_list:
            for i in range(1,4):
                param_prefix = 'P' + peak.NM() + '_' + str(i)
                center = peak.location(i)
                amp = np.interp(center, self.spectra.X, self.spectra.Y - self.background_model)
                width = 0.02
                self.spectra.params.add(param_prefix + '_amp', value = 0.8*amp, vary=False, min=0.0, max=None)
                self.spectra.params.add(param_prefix + '_center', value = center, vary=False, min=0.0, max=None)
                self.spectra.params.add(param_prefix + '_width', value = width, vary=False, min=0.0, max=None)
                self.model_without_background += self.pseudoVoigt(self.spectra.X, self.spectra.params[param_prefix + '_amp'].value, self.spectra.params[param_prefix + '_center'].value, self.spectra.params[param_prefix + '_width'].value, 1)

    def deconvolute(self):
        for State in range(0,3):
            # Make each voigt profile for each tube
            for peak in self.spectra.peak_list:
                for i in range(1,4):
                    param_prefix = 'P' + peak.NM() + '_' + str(i)
                    if(State==1):
                        self.spectra.params[param_prefix + '_amp'].vary = True
                    if(State==2):
                        self.spectra.params[param_prefix + '_width'].vary = True

            result = lmfit.Minimizer(self.residual, self.spectra.params, fcn_args=(State,))
            result.prepare_fit()
            result.leastsq()#lbfgsb()

    def residual(self, params, State):
        self.model = self.background_model
        if(State>0):
            self.model += self.model_without_background
        for x in range(0, len(self.spectra.X)):
            if(self.background_model[x]>self.spectra.Y[x]):
                self.residual_array[x] = -999999.-9999.*(self.spectra.Y[x]-self.background_model[x])
            else:
                self.residual_array[x] = self.spectra.Y[x]-self.model[x]
        self.spectra.Y_model = self.model
        self.spectra.Y_background_model = self.background_model
        self.spectra.Y_without_background_model = self.model_without_background
        self.spectra_tab.refreshFigure()
        return self.residual_array

    def pseudoVoigt(self, x, amp, center, width, shapeFactor):
        LorentzPortion = (width**2/((x-center)**2+width**2))
        GaussianPortion = 1/(np.sqrt(2*np.pi*width**2))*np.e**(-(x-center)**2/(2*width**2))
        try:
            Voigt = amp*(shapeFactor*LorentzPortion+(1-shapeFactor)*GaussianPortion)
        except ZeroDivisionError:
            width = width+0.01
            LorentzPortion = (width**2/((x-center)**2+width**2))
            GaussianPortion = 1/(np.sqrt(2*np.pi*width**2))*np.e**(-(x-center)**2/(2*width**2))
            Voigt = amp*(shapeFactor*LorentzPortion+(1-shapeFactor)*GaussianPortion)
        return Voigt

class MainWindow(Tk):
    def __init__(self, parent):
        Tk.__init__(self, parent)
        self.parent = parent
        self.wm_state('zoomed')
        self.spectra_list = []
        self.tab_list = []
        self.button_frame = Frame(self, bd=3, relief=SUNKEN)
        self.button_frame.pack(side=TOP, fill=BOTH)
        self.tab_frame = Frame(self, bd=3, relief=SUNKEN)
        self.tab_frame.pack(side=BOTTOM, fill=BOTH, expand=1)
        open_spectra_button = Button(self.button_frame, text='open spectra', command=self.open_spectra)
        open_spectra_button.pack(side=LEFT, fill=Y)
        process_spectra_button = Button(self.button_frame, text='process spectra', command=self.process_spectra)
        process_spectra_button.pack(side=LEFT, fill=Y)
        self.tab_bar = TabBar(self.tab_frame)
        self.tab_bar.show()
        self.resizable(True,False)
        self.update()
    def open_spectra(self):
        # This will prompt user for file input later, but here is an example
        file_name_list = ['spectra_1', 'spectra_2']
        for file_name in file_name_list:
            # Just make up functions that may be imported
            X_values = np.arange(1240.0/1350.0, 1240./200., 0.01)
            if(file_name=='spectra_1'):
                Y_values = np.array(np.e**.2*X_values + np.sin(10*X_values)+np.cos(4*X_values))
            if(file_name=='spectra_2'):
                Y_values = np.array(np.e**.2*X_values + np.sin(10*X_values)+np.cos(3*X_values)+.3*np.cos(.5*X_values))
            self.spectra_list.append(Spectra(file_name, X_values, Y_values))
            self.tab_list.append(Spectra_Tab(self.tab_frame, self.spectra_list[-1]))
            self.tab_bar.add(self.tab_list[-1])
        self.tab_bar.switch_tab(self.spectra_list[0].spectra_name)
        self.tab_bar.show()
        return  
    def process_spectra(self):
        process_list = []
        queue = mp.Queue()
        for tab in self.tab_list:
            process_list.append(mp.Process(target=Deconvolution(tab).deconvolute(), args=(queue,)))
            process_list[-1].start()
            process_list[-1].join()
        return
if __name__ == "__main__":
    root = MainWindow(None)
    root.mainloop() 
```

**编辑：** 我正在编辑这个问题，因为我意识到我的问题没有考虑到真正的问题。我认为我提供的代码在将 Tkinter 帧作为参数传递给需要腌制的东西时存在问题，？它不能因为它不是线程安全的？它给出了一个以某种方式指向 Tkinter 的 pickle 错误。
但是，我不确定如何重新组织此代码，以便唯一被腌制的部分是数据部分，因为线程或进程必须访问 Tkinter 帧才能通过`refreshFigure()`.

有人对如何做到这一点有任何想法吗？我研究过，但每个人的例子通常都很简单，只有一个数字，或者只有在过程完成后才会刷新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:55:49.513

The segment `target=Deconvolution(tab).deconvolute()` will actually be evaluated instead of passed to a subprocess. You could replace this with a wrapper function

```
def mp_deconvolute(tab):
    return Deconvolution(tab).deconvolute() 
```

I'm not sure if your `queue` is actually be used at all but I believe that would be more appropriate for a worker `Pool` scenario.

**Edit:**

Oh, and you would call it like so

```
process_list.append(mp.Process(target=mp_deconvolute, args=(tab))) 
```

**Edit again:**

You could just define that as a lambda function too unless you to to add more complexity

```
mp_deconv = lambda x: Deconvolution(tab).deconvolute()
process_list.append(mp.Process(target=mp_deconv, args=(tab))) 
```

# php - Paypal IPN 回调不适用于沙箱

> ID：14681223
> 
> 赞同：0
> 
> 时间：2013-02-04T06:05:32.070
> 
> 标签：php, drupal, paypal, paypal-ipn, paypal-sandbox

我正在使用 Drupal 7，并且通过在我的用户应该通过在 paypal 付款进行注册的地方进行编码来实现 paypal，当他返回时，如果付款得到验证，我必须在回调函数中注册他。我的回调函数根本不起作用，我想在回调中获得的所有变量值也都返回错误...

这是我的代码——

我用来将用户发送到带有值的贝宝的这个 -

```
function user_type_register_form_submit($form, &$form_state){
  global $base_url;
  $username = $form_state['values']['name'];
  $user_email = $form_state['values']['mail'];
  $user_type = $form_state['values']['user_type'];
  $user_first_name = $form_state['values']['field_first_name']['und'][0]['value'];
  $user_last_name = $form_state['values']['field_last_name']['und'][0]['value'];
  $user_company_name = $form_state['values']['field_company_name']['und'][0]['value'];
  $user_address_line_1 = $form_state['values']['field_address_line_1']['und'][0]['value'];
  $user_address_line_2 = $form_state['values']['field_address_line_2']['und'][0]['value'];
  $user_city = $form_state['values']['field_user_city']['und'][0]['value'];
  $user_state = $form_state['values']['field_user_state']['und'][0]['value'];
  $user_zip = $form_state['values']['field_user_zip']['und'][0]['value'];
  $user_phone_number = $form_state['values']['field_phone_number_']['und'][0]['value'];
  $user_mobile_number = $form_state['values']['field_mobile_number_']['und'][0]['value'];
  $user_fax_number = $form_state['values']['field_fax_number_']['und'][0]['value'];

  $paypal = array();
  $paypal['cmd'] = '_xclick';
  $paypal['business'] = 'rajeev_1359782736_biz@gmail.com';
  $paypal['page_style'] = 'Primary';
  $paypal['bn'] = 'PP-DonationsBF';
  $paypal['item_name'] = 'Membership';
  $paypal['currency_code'] = 'USD';
  $paypal['no_shipping'] = '1';
  $paypal['tax'] = '0';
  $paypal['lc'] = 'US';
  $paypal['rm'] = '1';
  $paypal['return'] = $base_url.'/?q=paypal/payment';
  $paypal['cancel_return'] = $base_url.'/?q=user/register';      
  $paypal['uname'] = $username;
  $paypal['email'] = $user_email;
  $paypal['user_type'] = $user_type;
  $paypal['first_name'] = $user_first_name;
  $paypal['last_name'] = $user_last_name;
  $paypal['comp_name'] = $user_company_name;
  $paypal['address1'] = $user_address_line_1;
  $paypal['address2'] = $user_address_line_2;
  $paypal['city'] = $user_city;
  $paypal['state'] = $user_state;
  $paypal['zip'] = $user_zip;
  $paypal['phone'] = $user_phone_number;
  $paypal['mobile'] = $user_mobile_number;
  $paypal['fax'] = $user_fax_number;
  switch($user_type){    
    case '0':
      dpm("General");
      $membership_price = 50;
      $paypal['amount'] = $membership_price;
      $paypal['item_number'] = 1;

      $query = http_build_query($paypal, '', '&');

      $form_state['redirect'] = 'https://www.sandbox.paypal.com/cgi-bin/webscr?' .$query;

      break;

    case '1':
      dpm("Student");
      $membership_price = 50;
      $paypal['amount'] = $membership_price;
      $paypal['item_number'] = 2;

      $query = http_build_query($paypal, '', '&');

      $form_state['redirect'] = 'https://www.sandbox.paypal.com/cgi-bin/webscr?' .$query;
      break;

    case '2':
      dpm("Government");
      $membership_price = 50;      
      $paypal['amount'] = $membership_price;
      $paypal['item_number'] = 3;

      $query = http_build_query($paypal, '', '&');

      $form_state['redirect'] = 'https://www.sandbox.paypal.com/cgi-bin/webscr?' .$query;
      break;
  }
} 
```

我调试了将用户发送到贝宝的查询，它看起来像 -

```
cmd=_xclick&business=rajeev_1359782736_biz%40gmail.com&page_style=Primary&bn=PP-DonationsBF&item_name=Membership&currency_code=USD&no_shipping=1&tax=0&lc=US&rm=1&return=http%3A%2F%2Fctaep-test.kr001.us%2F%3Fq%3Dpaypal%2Fpayment&cancel_return=http%3A%2F%2Fctaep-test.kr001.us%2F%3Fq%3Duser%2Fregister&uname=admin_list&email=rajeevkr.dei%40gmail.com&user_type=0&first_name=Rajeev&last_name=Kumar&comp_name=&address1=sector+27&address2=&city=noida&state=ky&zip=201301&phone=9650361380&mobile=&fax=&amount=50&item_number=1 
```

我用来接收回调的这个函数——

```
function paypal_payment_paypal_ipn_callback($vars = array()){

  header("Content-type: text/html");
  header("Expires: Wed, 29 Jan 1975 04:15:00 GMT");
  header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
  header("Cache-Control: no-cache, must-revalidate");
  header("Pragma: no-cache");

  watchdog('paypal', '1');

  // read the post from PayPal system and add 'cmd'
  $req = 'cmd=_notify-validate';

  foreach ($_POST as $key => $value) {
    $value = urlencode(stripslashes($value));
    $req .= "&$key=$value";
  }

  watchdog('paypal', '2');

  // post back to PayPal system to validate
  $header = '';
  $header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
  $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
  $header .= "Host: www.sandbox.paypal.com\r\n";
  $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
  $fp =  fsockopen ('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30);

  //Added - new
  // reading posted data from directly from $_POST causes serialization 
  // issues with array data in POST
  // reading raw POST data from input stream instead. 
  $raw_post_data = file_get_contents('php://input');
  $raw_post_array = explode('&', $raw_post_data);
  $myPost = array();
  foreach ($raw_post_array as $keyval) {
    $keyval = explode ('=', $keyval);
    if (count($keyval) == 2)
      $myPost[$keyval[0]] = urldecode($keyval[1]);
  }
  // read the post from PayPal system and add 'cmd'
  $req = 'cmd=_notify-validate';
  if(function_exists('get_magic_quotes_gpc')) {
    $get_magic_quotes_exists = true;
  } 
  foreach ($myPost as $key => $value) {        
    if($get_magic_quotes_exists == true && get_magic_quotes_gpc() == 1) { 
        $value = urlencode(stripslashes($value)); 
    } else {
        $value = urlencode($value);
    }
    $req .= "&$key=$value";
  }

  // STEP 2: Post IPN data back to paypal to validate

  $ch = curl_init('https://www.sandbox.paypal.com/cgi-bin/webscr');
  curl_setopt($ch, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_1);
  curl_setopt($ch, CURLOPT_POST, 1);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
  curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
  curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
  curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
  curl_setopt($ch, CURLOPT_FORBID_REUSE, 1);
  curl_setopt($ch, CURLOPT_HTTPHEADER, array('Connection: Close'));

  // In wamp like environments that do not come bundled with root authority certificates,
  // please download 'cacert.pem' from "http://curl.haxx.se/docs/caextract.html" and set the directory path 
  // of the certificate as shown below.
  // curl_setopt($ch, CURLOPT_CAINFO, dirname(__FILE__) . '/cacert.pem');
  if( !($res = curl_exec($ch)) ) {
    // error_log("Got " . curl_error($ch) . " when processing IPN data");
    curl_close($ch);
    exit;
  }
  curl_close($ch);

  //Added end

  if (!$fp) {
    watchdog('paypal', 'HTTP error');
  } else {
    fputs ($fp, $header . $req);
    watchdog('paypal', $header . $req);

    while (!feof($fp)) {
      $res = fgets ($fp, 1024);

      watchdog('paypal', '3');
      //dpm($res);
      watchdog('pay_status',$res);      
      if (strcmp ($res, "VERIFIED") == 0) {
      //if (strcmp ($res, "INVALID") == 0) {
        // assign posted variables to local variables
        //$txn_id = $_POST['txn_id'];
        watchdog('paypal', '4');

        //Information about you:
        $receiver_email = $_POST['business'];

        //Information about the transaction:
        $item_name = $_POST['item_name'];
        $item_number = $_POST['item_number'];
        $payment_status = $_POST['payment_status'];
        $payment_amount = $_POST['mc_gross'];
        $payment_currency = $_POST['mc_currency'];
        $txn_id = $_POST['txn_id'];
        $receiver_email = $_POST['receiver_email'];
        $payer_email = $_POST['payer_email'];

        dpm($receiver_email);

        //Information about your buyer:
        $user_email = $_POST['email'];
        $user_name = $_POST['uname'];
        $first_name = $_POST['first_name'];
        $last_name = $_POST['last_name'];
        $company_name = $_POST['comp_name'];
        $address_address_line_1 = $_POST['address1'];
        $address_address_line_2 = $_POST['address2'];
        $address_city = $_POST['city'];
        $address_state = $_POST['state'];
        $address_zip = $_POST['zip'];
        $user_phone = $_POST['phone'];
        $user_mobile = $_POST['mobile'];
        $user_fax = $_POST['fax'];

        //Information about the payment:
        $membership_type = $_POST['item_name'];

        //Other information about the transaction:

        //watchdog('paypal', '4');

        // check the payment_status is Completed
        // check that txn_id has not been previously processed
        // check that receiver_email is your Primary PayPal email
        // check that payment_amount/payment_currency are correct
        // process payment
        $password = user_password(8);
        $fields = array(
          'name' => $user_name,
          'mail' => $user_email,
          'pass' => $password,
          'status' => 1,
          'init' => $user_email,
          'roles' => array(
            DRUPAL_AUTHENTICATED_RID => $membership_type,),
        );
       // user_save('', $fields);
      $account = user_save('', $fields);
      dpm("user registered");
      }
      else if (stripos($res, "VERIFIED") !== false) {
        watchdog('paypal', 'INVALID');
        // log for manual investigation
      }
    }
    fclose ($fp);
  }
  return 'Callback Complete';
} 
```

这是我的看门狗错误——

```
inside-callback : 1
Notice: Undefined index: item_name in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: item_number in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: payment_status in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: mc_gross in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: mc_currency in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: txn_id in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: receiver_email in paypal_payment_paypal_ipn_callback()
Notice: Undefined index: payer_email in paypal_payment_paypal_ipn_callback()
inside-invalid : 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T07:07:55.043

尽管 PayPal 将对 HTTP1.0 的支持延长到 2013 年 5 月 1 日，但他们可能已经更新了 Sandbox，仅支持 HTTP1.1。

[https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1](https://www.x.com/content/bulletin-ipn-and-pdt-scripts-and-http-1-1)

如果这是真的，您将需要按如下方式更新您的回调脚本。

```
// post back to PayPal system to validate
$header .= "POST /cgi-bin/webscr HTTP/1.1\r\n"; // HTTP1.1 Update
$header .= "Content-Length: " . strlen($req) . "\r\n";
$header .= "Content-Type: application/x-www-form-urlencoded\r\n";
$header .= "Host: www.sandbox.paypal.com\r\n"; // Sandbox Host
//$header .= "Host: ipnpb.paypal.com\r\n"; // Live Host
$header .= "Connection: close\r\n\r\n"; 
```

为了进一步的兼容性

[https://ppmts.custhelp.com/app/answers/detail/a_id/926/](https://ppmts.custhelp.com/app/answers/detail/a_id/926/)

1) 您的 php 脚本还应该修剪 IPN 验证响应。

修改你的脚本：

```
//From:
if (strcmp ($res, "VERIFIED") == 0) {
..
else if (strcmp ($res, "INVALID") == 0) {

//To:
if (strcmp (trim($res), "VERIFIED") == 0) {
..
else if (strcmp (trim($res), "INVALID") == 0) { 
```

2) 在 php 中，确保标题的最后一行包含双行尾标记： \r\n\r\n 如上例所示： $header .="Connection: close\r\n\r\ n";

3) 在 php 中，确保打开与标头中声明的同一主机的套接字连接。由于您的标头将主机声明为

```
$header .="Host: ipnpb.paypal.com\r\n"; 
```

您应该打开与同一主机的连接：

```
$fp = fsockopen ('ssl://ipnpb.paypal.com', 443, $errno, $errstr, 30); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:54:17.470

问题在这里：

```
$paypal['return'] = $base_url.'/?q=paypal/payment'; 
```

您在那里定义的是用户付款后的最终位置；除非您启用了 PDT，否则它也不会传递事务标识符。

您需要使用`notify_url`来注册 IPN 处理程序：

```
$paypal['notify_url'] = $base_url.'/?q=paypal/payment'; 
```

# scala - Scala 列表和子类型

> ID：14681225
> 
> 赞同：7
> 
> 时间：2013-02-04T06:05:52.610
> 
> 标签：scala, covariance

我希望能够引用包含子类型的列表并从该列表中提取元素并隐式转换它们。示例如下：

```
scala> sealed trait Person { def id: String }
defined trait Person

scala> case class Employee(id: String, name: String) extends Person
defined class Employee

scala> case class Student(id: String, name: String, age: Int) extends Person
defined class Student

scala> val x: List[Person] = List(Employee("1", "Jon"), Student("2", "Jack", 23))
x: List[Person] = List(Employee(1,Jon), Student(2,Jack,23))

scala> x(0).name
<console>:14: error: value name is not a member of Person
              x(0).name
                   ^ 
```

我知道，`x(0).asInstanceOf[Employee].name`但我希望有一种更优雅的类型。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T06:23:58.653

最好的方法是使用模式匹配。因为您使用的是密封特征，所以匹配将是详尽的，这很好。

```
x(0) match { 
  case Employee(id, name) => ...
  case Student(id, name, age) => ...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T06:26:11.457

好吧，如果你想要员工，你总是可以使用`collect`：

```
val employees = x collect { case employee: Employee => employee } 
```

# c++ - Opencv错误在iPhone中裁剪图像

> ID：14681229
> 
> 赞同：1
> 
> 时间：2013-02-04T06:06:14.193
> 
> 标签：c++, iphone, objective-c, image-processing, opencv

我使用下面的代码来设置 ROI 并裁剪图像。

```
cv::Mat testMat = [CaptureViewController cvMatWithImage:self.storeImage];
cv::Rect roi(faces[i].x, faces[i].y, faces[i].width, faces[i].height);
cv :: Mat image_roi;
image_roi = testMat ( roi );

self.CroppedImage = [CaptureViewController imageWithCVMat:image_roi];
UIImageWriteToSavedPhotosAlbum(self.CroppedImage, self,  nil,nil); 
```

但我收到以下错误：

```
<Error>: CGContextDrawImage: invalid context 0x0
OpenCV Error: Assertion failed (0 <= roi.x && 0 <= roi.width && roi.x + roi.width <= m.cols && 0 <= roi.y && 0 <= roi.height && roi.y + roi.height <= m.rows) 
```

我设置了断点并在这里测试了出现上述错误的地方`image_roi = testMat ( roi );`。

但我无法追踪这个问题的原因。我在上面的代码中的任何地方都错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T01:37:42.793

尝试 clone() 对象。

```
image_roi = testMat(roi).clone(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-19T15:46:39.820

我知道现在回答这个问题为时已晚，但也许它会帮助其他面临类似问题的人。该错误似乎是非常自我描述的。它说您的 roi（感兴趣区域）矩形似乎超出了 cv::Mat 的范围。

确保 (left top x, left top y, width, height) 在 testMat 的范围内：

```
faces[i].x = faces[i].x >= 0 ? faces[i].x : 0;
faces[i].y = faces[i].y >= 0 ? faces[i].y : 0;
faces[i].width = faces[i].x + faces[i].width > testMat.cols ? testMat.cols - faces[i].x : faces[i].width;
faces[i].height = faces[i].y + faces[i].height > testMat.rows ? testMat.rows - faces[i].y : faces[i].height; 
```

# .net - Excel 与 C#.NET 的集成

> ID：14681230
> 
> 赞同：0
> 
> 时间：2013-02-04T06:06:20.063
> 
> 标签：.net, excel

我使用具有多个主从表单的 VS.NET 2010 和 MS SQL 2008 开发了一个 Web 应用程序。现在我的客户也想使用 Excel 表添加/更新数据。他想在Excel中下载数据并在添加/删除/更新后上传。请为此功能推荐最佳方法。我已经看到 Oracle ADF 桌面集成特性提供了类似的功能

[http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_59/jdtut_11r2_59_1.html](http://docs.oracle.com/cd/E18941_01/tutorials/jdtut_11r2_59/jdtut_11r2_59_1.html)

有没有类似于 ASP.NET 中可用的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:11:02.640

您可以使用[Excel 数据阅读器](http://exceldatareader.codeplex.com/)将数据导入应用程序中的数据集。

# javascript - 存储 javascript 函数 chrome

> ID：14681233
> 
> 赞同：0
> 
> 时间：2013-02-04T06:06:34.893
> 
> 标签：javascript, google-chrome

无论如何在控制台中输入一个javascript函数并在页面重定向后让它保持不变？

我必须多次填写一份表格，只有一个字段不同，所以我写了一些 javascript 来帮我完成，但每次提交时我都必须重新粘贴它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:09:38.560

您可以制作书签：

*   [http://juhukinners.wordpress.com/2009/01/08/how-to-write-a-bookmarklet/](http://juhukinners.wordpress.com/2009/01/08/how-to-write-a-bookmarklet/)

这将允许您只需单击 chrome 中的按钮即可应用您的功能。

只需创建一个以您的函数开头`javascript:`并包含您的函数的书签，例如：

```
javascript:(function() { alert("Hello, world!"); }()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T06:09:42.933

您总是可以使用 javascript 小书签。将书签的 url 设置为您的代码，如下所示。

```
javascript:(function(){
    // code...
}()); 
```

如果你发现多行写起来更容易，写出来，然后缩小，然后做一个小册子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:10:38.447

不确定这是否有帮助，但如果您按键盘上的向上箭头键，您可以查看之前输入的命令

# haskell - 在 Haskell 中生成所有可能的路径

> ID：14681234
> 
> 赞同：1
> 
> 时间：2013-02-04T06:06:46.977
> 
> 标签：haskell, numbers, combinations

我很不擅长措辞，所以请多多包涵。

我正在做一个问题，需要我在 Haskell 中以列表列表的形式生成所有可能的数字。

例如，如果我有 x = 3 和 y = 2，我必须生成这样的列表列表：

```
[[1,1,1], [1,2,1], [2,1,1], [2,2,1], [1,1,2], [1,2,2], [2,1,2], [2,2,2]] 
```

x 和 y 被传递到函数中，它必须与任何非零正整数 x 和 y 一起工作。

我完全迷失了，甚至不知道如何开始。

对于任何好心帮助我的人，请尽量使任何涉及数学的解释尽可能容易理解。我真的不擅长数学。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T12:03:00.830

假设这是作业，我会给你答案的一部分，并告诉你我是如何思考这个问题的。在 GHCi 中进行实验并构建我们需要的部分很有帮助。我们需要的一件事是能够生成从 1 到 的数字列表`y`。假设`y`是 7。那么：

```
λ> [1..7]
[1,2,3,4,5,6,7] 
```

但是正如您稍后会看到的，我们真正需要的不是一个简单的列表，而是一个我们可以在其上构建的列表。像这样：

```
λ> map (:[]) [1..7]
[[1],[2],[3],[4],[5],[6],[7]] 
```

这基本上是说获取数组中的每个元素，并将其添加到空列表中`[]`。所以现在我们可以编写一个函数来为我们做这件事。

```
makeListOfLists y = map (:[]) [1..y] 
```

接下来，我们需要一种方法来为列表列表中的每个元素添加一个新元素。像这样的东西：

```
λ> map (99:) [[1],[2],[3],[4],[5],[6],[7]]
[[99,1],[99,2],[99,3],[99,4],[99,5],[99,6],[99,7]] 
```

（我在这里用了 99 而不是 1，这样你就可以很容易地看到这些数字是从哪里来的。）所以我们可以编写一个函数来做到这一点：

```
prepend x yss = map (x:) yss 
```

最终，我们希望能够获取一个列表和一个列表列表，并`prepend`在列表中的每个元素上调用列表列表中的每个元素。`map`我们可以再次使用该函数来做到这一点。但事实证明，如果我们将参数的顺序切换为 ，这样做会更容易一些`prepend`，如下所示：

```
prepend2 yss x = map (x:) yss 
```

然后我们可以这样做：

```
λ>  map (prepend2 [[1],[2],[3],[4],[5],[6],[7]]) [97,98,99]
[[[97,1],[97,2],[97,3],[97,4],[97,5],[97,6],[97,7]],[[98,1],[98,2],[98,3],[98,4],[98,5],[98,6],[98,7]],[[99,1],[99,2],[99,3],[99,4],[99,5],[99,6],[99,7]]] 
```

所以现在我们可以编写该函数：

```
supermap xs yss = map (prepend2 yss) xs 
```

使用您的示例，如果 x=2 和 y=3，那么我们需要的答案是：

```
λ> let yss = makeListOfLists 3
λ> supermap [1..3] yss
[[[1,1],[1,2],[1,3]],[[2,1],[2,2],[2,3]],[[3,1],[3,2],[3,3]]] 
```

（如果这就是我们所需要的，我们可以使用列表推导更轻松地做到这一点。但由于我们需要能够对任意 x 执行此操作，列表推导将不起作用。）

希望您可以从这里获取它，并将其扩展到任意 x。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:46:05.953

对于特定的 x，如前所述，列表推导可以解决问题，假设 x 等于 3，可以编写以下内容：

```
 generate y = [[a,b,c] | a<-[1..y], b<-[1..y], c <-[1..y]] 
```

但是当 x 不是预先确定的时，生活会变得更加复杂。我没有太多的Haskell编程经验，对库函数不熟悉，我的方法远不是最有效的解决方案，所以不要太苛刻地判断它。

我的解决方案包括两个功能：

```
strip [] = []
strip (h:t) = h ++ strip t

populate y 2 = strip( map (\a-> map (:a:[]) [1..y]) [1..y])
populate y x = strip( map (\a-> map (:a) [1..y]) ( populate y ( x - 1) )) 
```

strip 是为嵌套列表定义的。通过合并列表项，可以说它减少了层次结构。例如调用

```
strip [[1],[2],[3]] 
```

生成输出：

```
[1,2,3] 
```

填充是一个棘手的问题。

在递归的最后一步，当第二个参数等于 2 时，该函数将 [1..y] 的每个项目与同一列表的每个元素映射到一个新列表。例如

```
map (\a-> map (:a:[]) [1..2]) [1..2]) 
```

生成输出：

```
[[[1,1],[2,1]],[[1,2],[2,2]]] 
```

strip 函数将其变为：

```
[[1,1],[2,1],[1,2],[2,2]] 
```

至于递归的初始步骤，当 x 大于 2 时，populate 执行几乎相同的操作，只是这次它将列表中的项目与递归调用生成的列表进行映射。最后：

```
populate 2 3 
```

给了我们想要的结果：

```
[[1,1,1],[2,1,1],[1,2,1],[2,2,1],[1,1,2],[2,1,2],[1,2,2],[2,2,2]] 
```

正如我上面提到的，这种方法既不是最有效的也不是最易读的方法，但我认为它解决了问题。实际上，从理论上讲，在不大量使用递归的情况下解决此问题的唯一方法是在其中构建带有列表理解语句的字符串，而不是动态编译该字符串，根据我作为程序员的短暂经验，这从来都不是一个好的解决方案。

# iphone - 如何在 iphone 应用程序中更改视图的位置

> ID：14681236
> 
> 赞同：0
> 
> 时间：2013-02-04T06:07:14.053
> 
> 标签：iphone, animation, uiview

我有一个视图，我希望在加载视图时它应该从原始位置更改并显示到新位置，但它不起作用我正在使用以下代码。我在视图的 ViewDidLoad 中调用此代码。它最初是横向模式，在 512,374,1024,768 我希望它到新位置。

```
 [UIView animateWithDuration:0.5 
                 animations:^{
                     self.view.frame = CGRectMake(512,100,1024,768);
                 }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:10:37.977

您需要将此代码移至`viewDidAppear:`. `viewDidLoad`在加载视图时调用，但视图尚不可见，因此您看不到动画。

# c++ - 递归函数循环遍历字符数组

> ID：14681237
> 
> 赞同：1
> 
> 时间：2013-02-04T06:07:15.603
> 
> 标签：c++, arrays, recursion, character-arrays

我有一个任务，我应该使用递归函数遍历字符数组。我认为这很容易，因为我知道数组的长度，但是原型是给我的，我必须使用它：

`void display(char str[])`

我无法想象我应该如何在不知道长度的情况下递归循环。有人可以帮我推一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:10:40.190

```
void display(char str[])
{
    if (*str) {
        putchar(*str);
        display(str+1);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:10:44.527

C 字符串（假设您的字符数组是 C 字符串）假定为空终止。因此，例如，您可以使用递归函数来计算长度并为您的基本情况查找空字符以知道您已完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:21:27.140

正如@abelenky 和@Nathan 所提到的，假设字符数组以“null”字符（通常是`'\0'`）结尾。
这是一个关于如何查找字符数的示例

```
 unsigned int strLen( const char[] str ) {
     unsigned int len = 0;
     while( str[len] ) {
         len++;
     }
     return len;
 } 
```

# c# - 在 MonoDevelop 和 GTK 上寻找 Timer.Tick 或等价物

> ID：14681239
> 
> 赞同：0
> 
> 时间：2013-02-04T06:07:28.733
> 
> 标签：c#, timer, gtk, monodevelop

您好，我正在寻找从 MS C# 中的 System.Windows.Forms 到带有 GTK 的 MonoDevelop C# 的 timer.tick 等效事件...

[http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.tick.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:26:38.587

您可能正在寻找的是`GLib.Timeout.Add (uint interval, GLib.TimeoutHandler handler)`

间隔以毫秒表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T14:07:49.890

像这样的东西怎么样：

在解析完所有的东西之后......然后你对你的标签或标签做这样的事情：

> **label1.Text = DateTime.Now.ToLongTimeString ();**
> 
> **Label2.Text = DateTime.Now.ToLongDateString();**

显然后者是针对 DATE（2014 年 8 月 20 日星期三）...而第一个是针对 TIME（2:02:54）。希望你能明白。

# android - 如何知道安卓应用程序的安装模式？

> ID：14681241
> 
> 赞同：0
> 
> 时间：2013-02-04T06:07:33.817
> 
> 标签：android, apk

我想知道，是否有可能知道android应用程序是通过网站安装的，通过Google play安装的，还是由用户分发的？？

# php - 如果值为空，如何在数据库中插入字符串

> ID：14681244
> 
> 赞同：0
> 
> 时间：2013-02-04T06:08:02.100
> 
> 标签：php, mysqli

在我的绑定参数中，我试图为每个问题插入答案。我有一个简单的问题，问如果一个问题没有答案，我如何`No Answer`在数据库中插入这个词？这是因为目前它不会在答案为 NULL 的地方插入任何行。仅当问题至少有一个答案时才会插入

下面是尝试：

```
$results = $_POST['value'];
foreach($results as $id => $value) 
{
    $answer = $value;

    $quesid = $question_ids[$id];   

    if($answer = ''){
        $answer = 'No Answer';
    }

    foreach($value as $answer) 
    {
        $insertanswer->bind_param("is", $quesid, $answer);

        $insertanswer->execute();

        if ($insertanswer->errno) {
            // Handle query error here
            echo __LINE__.': '.$insertanswer->error;
            break 7;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:11:36.587

看起来您`=`在 if 条件下使用赋值运算符 () 我认为它应该是比较运算符 ( `==`)

```
if($answer = ''){
        $answer = 'No Answer';
    } 
```

应该

```
if($answer == ''){
        $answer = 'No Answer';
    } 
```

或者

```
if(trim($answer) == '') 
```

或者

```
if(empty($answer)){ 
```

如果你想确保它`$question_ids[$id]`是 int 你可以使用

```
$quesid  = (int)$question_ids[$id]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:05:13.703

检查它是否为空是不够的，你应该检查 null 以防万一！

```
//Take notice of === (Identical operator)
    if($answer == '' || $answer === null){
            $answer = 'No Answer';
        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T22:28:28.513

如果是文本输入`if($answer == '' || $answer === null){`，则如果是从下拉菜单中输入，则检索该值：`if($answer == ''){ //'' is whatever the value is for this option`

# ios - Apple LLVM Compiler 4.1：clang 常量岛传递错误无法收敛

> ID：14681246
> 
> 赞同：0
> 
> 时间：2013-02-04T06:08:03.013
> 
> 标签：ios, xcode, compiler-errors, clang

我已经被这个错误困扰了好几天了。当我尝试存档失败时，我在模拟器或 iPhone 上运行它没有问题。

> **致命错误：后端错误：Constant Island pass 无法收敛！命令 /Developer/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1**

这是卡住的完整编译

> CompileC "/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos/SalaryTax.build/Objects-normal/armv7/SalaryTaxViewController.o " Classes/SalaryTaxViewController.m normal armv7 Objective-c com.apple.compilers.llvm.clang.1_0.compiler cd "/Users/RE/Desktop/SalaryTax" setenv LANG en_US.US-ASCII setenv PATH "/Developer/Applications/ Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Developer/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin: /sbin" /Developer/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault。xctoolchain/usr/bin/clang -x objective-c -arch armv7 -fmessage-length=0 -std=c99 -Wno-trigraphs -fpascal-strings -Os -Wno-missing-field-initializers -Wno-missing-prototypes - Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wformat -Wno-missing-braces -W括号 -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter - Wunused-variable -Wunused-value -Wno-empty-body -Wno-uninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 - Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -isysroot /Developer/Applications/Xcode.app/Contents/Developer/Platforms/ iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0。sdk -Wprotocol -Wdeprecated-declarations -g -fvisibility=hidden -Wno-sign-conversion "-DIBOutlet=**属性**((iboutlet))" "-DIBOutletCollection(ClassName)=**属性**((iboutletcollection(ClassName)))" "-DIBAction=void)**属性**((ibaction)"-miphoneos-version-min=5.0 -iquote"/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos /SalaryTax.build/SalaryTax-generated-files.hmap" "-I/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos /SalaryTax.build/SalaryTax-own-target-headers.hmap" "-I/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release -iphoneos/SalaryTax.build/SalaryTax-all-target-headers.hmap" -iquote"/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos/SalaryTax.build/SalaryTax-project-headers.hmap" "-I /Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/BuildProductsPath/Release-iphoneos/include”-I/Developer/Applications/Xcode.app/Contents/Developer/Toolchains/ XcodeDefault.xctoolchain/usr/include -I/Developer/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Developer/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault。 xctoolchain/usr/include "-I/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos/SalaryTax.build/DerivedSources/armv7""-I/Users /RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos/SalaryTax.build/DerivedSources" "-F/Users/RE/Library/Developer /Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/BuildProductsPath/Release-iphoneos" -DNS_BLOCK_ASSERTIONS=1 -include "/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/PrecompiledHeaders/SalaryTax_Prefix-bbmxcwkvhjetmzddaqqrcvabohqr/SalaryTax_Prefix.pch"-MMD -MT 依赖项-MF"/UsersRE/开发人员/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos/SalaryTax.build/Objects-normal/armv7/SalaryTaxViewController.d" --serialize-diagnostics"/Users /RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release-iphoneos/SalaryTax.build/Objects-normal/armv7/SalaryTaxViewController.dia" -c "/Users/RE/Desktop/SalaryTax/Classes/SalaryTaxViewController.m" -o "/Users/RE/Library/Developer/Xcode/DerivedData/SalaryTax-gkyeqmkkgahencbhhavdyzwrvywo/Build/Intermediates/ArchiveIntermediates/SalaryTax/IntermediateBuildFilesPath/SalaryTax.build/Release -iphoneos/SalaryTax.build/Objects-normal/armv7/SalaryTaxViewController.o"
> 
> 致命错误：后端错误：Constant Island pass 无法收敛！命令 /Developer/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang 失败，退出代码为 1

# mysql - 如何在 R 中的 MySQL 中使用查询插入整数值？

> ID：14681248
> 
> 赞同：0
> 
> 时间：2013-02-04T06:08:14.613
> 
> 标签：mysql, r

我遇到了需要使用 R 编写的查询在表中插入整数值的情况。例如：

```
>n1<-20
>n2<-30
>library(DBI)
>library(RMySQL)
>drv<-dbDriver("MySQL")
>con<-dnConnect(drv,user="root",password="sam123",dbname="user")
>dbSendQuery(con,"insert into test values(n1,n2);") # Problem with this lines only 
```

我收到以下错误：

mysqlExecStatement(conn, statement, ...) 中的错误：RS-DBI 驱动程序：（无法运行语句：“字段列表”中的未知列“n1”）

请帮我解决这些问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:37:44.027

尝试使用粘贴功能连接

```
 dbSendQuery(con,paste("insert into test values(",n1,",",n2,");",sep="")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:04:40.563

试试这个：

```
library(gsubfn)

fn$dbSendQuery( con, "insert into test values($n1, $n2)" ) 
```

# python - 从布尔数组设置的 Python numpy 索引

> ID：14681250
> 
> 赞同：2
> 
> 时间：2013-02-04T06:08:27.247
> 
> 标签：python, numpy

如何将布尔数组转换为可迭代的索引？

例如，

```
import numpy as np
import itertools as it
x = np.array([1,0,1,1,0,0])
y = x > 0
retval = [i for i, y_i in enumerate(y) if y_i] 
```

有没有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:14:34.617

尝试[`np.where`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)或[`np.nonzero`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.nonzero.html#numpy.nonzero)。

```
x = np.array([1, 0, 1, 1, 0, 0])
np.where(x)[0] # returns a tuple hence the [0], see help(np.where)
# array([0, 2, 3])
x.nonzero()[0] # in this case, the same as above. 
```

见`help(np.where)`和`help(np.nonzero)`。

可能值得注意的是，在`np.where`页面中它提到对于 1D`x`它基本上等同于问题中的长格式。

# webkit - 在 TideSDK 中为 Webkit 设置 enable-universal-access-from-file-uris？

> ID：14681256
> 
> 赞同：0
> 
> 时间：2013-02-04T06:09:04.517
> 
> 标签：webkit, tidesdk, opendatabase

我可以在 TideSDK 中为 Webkit 设置 enable-universal-access-from-file-uris=true 吗？从 TideSDK 访问 openDatabase 会导致 SECURITY_ERR: DOM Exception 18 错误。

# java - Spring Batch Admin - 作业监视器 UI - 自定义

> ID：14681263
> 
> 赞同：0
> 
> 时间：2013-02-04T06:09:42.097
> 
> 标签：java, spring, spring-batch, jobs

我们正在使用 Spring Batch 提供的 UI 使用 Job Monitor 的示例战争。版本：spring-batch-admin-sample-1.0.0.RELEASE

现在我们考虑从 UI 中删除一些不需要的菜单项。

请让我们知道如何做到这一点。![UI 页面的屏幕截图](../Images/1a1a4723285d96db65782bbdd0907e63.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:26:38.450

从阅读[手册](http://static.springsource.org/spring-batch-admin/reference/design.html)开始（最后一部分讨论“模板覆盖”，这是您想要做的）。然后简单地按照他们说的做:-)，使用手册中指定的目录结构放置您要覆盖的（Freemarker）模板的副本。如果要更改作业视图的外观，请从 Spring Batch Admin jar 中复制原始的 jobs.ftl 并将其放在 WEB-INF/web/manager/jobs/html 下并开始调整！

br 斯万特

# php - 订阅错误“响应与质询不匹配”

> ID：14681269
> 
> 赞同：0
> 
> 时间：2013-02-04T06:10:33.577
> 
> 标签：php, facebook, real-time-updates

我使用从网站上找到的这个脚本在网络主机上设置了一个 php 服务器

```
<?php

define('VERIFY_TOKEN', 'DEVICETOKEN');
$method = $_SERVER['REQUEST_METHOD'];

if ($method == 'GET' && $_GET['hub_mode'] == 'subscribe' && $_GET['hub_verify_token']   == VERIFY_TOKEN) {
echo $_GET['hub_challenge'];

} else if ($method == 'POST') {
$updates = json_decode(file_get_contents("php://input"), true);

file_put_contents('/filepath/updates.txt',$updates, FILE_APPEND);

error_log('updates = ' . print_r($obj, true));
}

?> 
```

我使用 facebook 上的实时更新面板订阅一个简单的用户电子邮件请求作为测试，我每次都会收到这个错误。

```
Response does not match challenge, expected value = '1098150855',
received='1098150855<!-- www.s...' 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T12:30:37.663

唯一应该在回调 url 上输出的是 hub.challenge 参数。删除 0855... 和任何其他输出之后的评论，它应该可以工作。

# express - 如何在没有模板引擎的情况下制作 Express 站点？

> ID：14681276
> 
> 赞同：31
> 
> 时间：2013-02-04T06:10:49.193
> 
> 标签：express

我不想在我的网站上出现 Jade 或 EJS。如何在不默认使用 Jade 模板的情况下创建快速站点？谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-10-16T23:53:33.367

如果您想要的是直接提供静态 html 文件并可以缓存资源，同时仍然能够点击“/”并获取 index.html，那么答案就这么简单：

```
var express = require('express');
var http = require('http');
var app = express();

app.use(express.static(__dirname + '/public'));

http.createServer(app).listen(3000); 
```

问题：包含 index.html 的 Html 文件必须在 /public 文件夹中，而不是 /views

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-04-28T05:59:45.640

您可以使用以下命令全局安装[express-generator](https://expressjs.com/en/starter/generator.html)，然后在没有视图引擎的情况下搭建项目

```
 npm install -g express-generator
 express newProject --no-view 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-06T23:08:58.470

您可以注释掉这些行

```
app.set 'views', __dirname + '/views'
app.set 'view engine', 'jade' 
```

来自 Express 初始化代码。

如果您只提供静态内容：[https ://github.com/visionmedia/express/blob/master/examples/static-files/index.js](https://github.com/visionmedia/express/blob/master/examples/static-files/index.js)

否则，请使用您的数据库、您的文件、您的用户输入或其他任何东西来连接构成 http 响应的字符串。

```
// Express 3.x
app.get('*', function(req,res){
  fs.readFile('./foo.txt', 'utf8', function (err, data) {
    if (err) throw err;
    data += (req.query['something'] || "")
    res.type('text/plain');
    res.send(200, data);
  });
}); 
```

话虽如此：在过去的几个月里我一直在玩 Jade，我已经爱上了它。它有它的特性，但编写任何复杂的 html 的速度要快几个数量级。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-17T17:43:13.813

使用 Express 4.0.0，您唯一需要做的就是在 app.js 中注释掉 2 行：

```
/* app.set('views', path.join(__dirname, 'views'));
app.set('view engine', 'jade'); */ //or whatever the templating engine is. 
```

然后将你的静态 html 放到 /public 目录中。示例：/public/index.html

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-05T05:23:06.370

使用 Restify
[http://restify.com/](http://restify.com/)

```
var restify = require('restify'),
fs = require('fs');

var server = restify.createServer({
  certificate: fs.readFileSync('path/to/server/certificate'),
  key: fs.readFileSync('path/to/server/key'),
  name: 'MyApp',
});

server.listen(8080); 
```

它大量借用 Express -Routing

# php - IE浏览器获取光标位置

> ID：14681277
> 
> 赞同：-2
> 
> 时间：2013-02-04T06:10:56.290
> 
> 标签：php, javascript

这是2个写的，一个是IE的，错了，一个是webkit的，

我有一个textarea，它的id是“web_editor_con2”，我想做一个网页编辑器，当我尝试上传图片时，它使用“ `<form action='./upload.php' method='post' target='file_frame' enctype="multipart/form-data"><iframe name="file_frame" style="display:none;"></iframe>`”

upload.php 有代码

```
 echo '<script>
                     if (parent.document.all) {
                    parent.document.getElementById("web_editor_con2").value += "[img=' . $this->conf['SITE'] . "/Public/upload/" . $newpic . '][/img]";
        }else {
            var obj = parent.document.getElementById("web_editor_con2");
            var startPos = obj.selectionStart;
            var endPos = obj.selectionEnd;
             parent.document.getElementById("web_editor_con2").value = obj.value.substring(0, startPos) + "[img=' . $this->conf['SITE'] . "/Public/upload/" . $newpic . '][/img]" + obj.value.substring(endPos);
        }</script>'; 
```

您可以尝试使 ie 运行良好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:36:55.987

这是一个适用于 Chrome 和 EI 的 jQuery 教程（根据我的测试）

[http://docs.jquery.com/Tutorials:Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

本教程中的示例代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
jQuery(document).ready(function(){
   $(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 
})
</script> 
```

我希望这有帮助！

# c - 无论如何我可以在不安装的情况下使用期望吗？

> ID：14681281
> 
> 赞同：2
> 
> 时间：2013-02-04T06:11:07.283
> 
> 标签：c, expect

我想自动化期望，`passwd`但我没有安装权限。但是如果我可以复制并粘贴期望的源代码并执行`.c files using`cc/gcc `and generate the executable expect.`

或者

我可以从linux复制expect可执行文件并在solaris、aix等其他地方使用它吗？

这是我的 linux 机器中 /usr/bin/expect 中的期望：

```
[root@test]# file /usr/bin/expect
/usr/bin/expect: ELF 64-bit LSB executable, AMD x86-64, version 1 (SYSV), for GNU/Linux 2.6.9, dynamically linked (uses shared libs), for GNU/Linux 2.6.9, stripped 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T12:54:54.430

[kbskit](http://sourceforge.net/projects/kbskit/files/kbs/0.4.4/)上为 Solaris 和 Linux 预构建的可执行文件包括 *bi“包含电池”版本中的 Expect（以及许多其他 Tcl 扩展）。每个只是一个大文件，不需要解压或安装，例如。`chmod a+x SunOS_kbsvq8.5-bi`使文件可执行。您使用这个可执行文件来运行您的脚本，并且在脚本的开头您需要添加`package require Expect`以设置 Expect 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:15:54.173

如果您有 C 编译器，则可以构建`expect`（但您必须先构建`Tcl`）。

Linux 上的可执行文件几乎不能在其他任何地方使用（在 solaris、aix 等上）；它有机会在 FreeBSD 上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T16:29:04.967

如果您使用的是 Solaris 11，那么安装**expect**就像这样简单：

`pkg install //solaris/shell/expect`

该软件包将来自官方 Oracle Solaris 信息库，因此无需担心。无需获取资源、构建等。

我知道您可能无权执行此操作，但由于这来自官方来源（Oracle），我很确定您的系统管理员会在几秒钟内完成此操作。

# core-foundation - 将 CFString 与 MPW 中的 SIOW 应用程序链接

> ID：14681289
> 
> 赞同：0
> 
> 时间：2013-02-04T06:11:50.597
> 
> 标签：core-foundation, mac-classic

我正在使用 Macintosh Programmers Workshop 在 Mac OS 9 上进行开发。我注意到在 CImports 文件夹中有一个 CFString.h 与我们心爱的核心基础字符串。

我已经设法构建并运行了一个基于 stdio 的 hello world，但是当我尝试使用 CFString 函数时，`CFSTR("my string")`或者`CFStringGetLength(myStr)`这会导致链接器错误。

如何配置 MPW 以找到正确的链接库？此外，对于了解 C 但从未接触过 MPW 的开发人员，是否有资源可供使用？

通过遵循本教程，我已经达到了这一点：[https ://sites.google.com/site/chuzzum/macintosh-c-programming-guide/macintosh-development-environments/getting-started-with-mpw](https://sites.google.com/site/chuzzum/macintosh-c-programming-guide/macintosh-development-environments/getting-started-with-mpw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:24:02.947

自从我上次修改 MPW 以来已经有很多年了，但要点是你需要链接到 CarbonLib。

我希望你已经发现了通过 Commando 运行命令的 option-enter 快捷方式。这让事情变得容易多了。

# dojo - dojo1.8 无法在 JsFiddle 中显示 BorderContainer 和 ConatentPane

> ID：14681290
> 
> 赞同：0
> 
> 时间：2013-02-04T06:11:53.177
> 
> 标签：dojo

您好我无法在 jsFiddle 中显示 BorderContainer 和 ContentPane 虽然我能够在 Firefox 浏览器中显示。那么我在 jsfiddle 中缺少什么？

这是我在 jsfiddle 中的[工作](http://jsfiddle.net/clementyap/kqNkX/31/)

```
<div id="main_bContainer" data-dojo-type="dijit/layout/BorderContainer"
data-dojo-props="design:'sidebar'">
<div class="cP_Left" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">ContentPane A</div>
<div class="cP_Right" data-dojo-type="dijit/layout/ContentPane"
data-dojo-props="region:'right'">ContentPane B</div></div>

require(["dojo/ready",
"dojo/_base/declare",
"dojo/dom-construct",
"dijit/_WidgetBase",
"dojo/dom",
"dojo/on",
"dojo/parser",
"dojo/domReady!"], function (ready, declare, domConstruct, _WidgetBase, dom, on, parser) {
ready(function ()
parser.parse(); // check out more!

}); 
}); 
```

克莱门特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:29:10.643

你错过了几件事：

1.  `<body class="soria">`围绕你的 dom的包装标签
2.  soria 主题的 css 链接错误
3.  一些缺少的括号。

我更新了[jsfiddle](http://jsfiddle.net/NSG4S/)。

域名：

```
<body class="soria">
    <div id="main_bContainer" data-dojo-type="dijit/layout/BorderContainer"
    data-dojo-props="design:'sidebar'">
        <div class="cP_Left" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">ContentPane A</div>
        <div class="cP_Right" data-dojo-type="dijit/layout/ContentPane"
        data-dojo-props="region:'right'">ContentPane B</div>
    </div>
</body> 
```

代码：

```
require(["dojo/ready",
    "dojo/_base/declare",
    "dojo/dom-construct",
    "dijit/_WidgetBase",
    "dojo/dom",
    "dojo/on",
    "dojo/parser",
    "dojo/domReady!"], function (ready, declare, domConstruct, _WidgetBase, dom, on, parser) {
    ready(function () {
        parser.parse(); // check out more!
    });
}); 
```

# ajax - 同源策略和CORS（跨域资源共享）

> ID：14681292
> 
> 赞同：54
> 
> 时间：2013-02-04T06:12:06.633
> 
> 标签：ajax, cors, cross-domain

我试图了解 CORS。据我了解，这是一种在浏览器中实现的**安全**机制，可以避免对域的任何 AJAX 请求，而不是用户打开的域（在 url 中指定）。

现在，由于这个限制，许多 CORS 被实施以使网站能够进行跨源请求。但根据我的理解，实施 CORS 违背了“同源策略” **SOP**的安全目的。

CORS 只是为了对要服务的请求服务器提供额外的控制。也许它可以避免垃圾邮件发送者。

来自[维基百科](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)：

> 要发起跨域请求，浏览器会发送带有 Origin HTTP 标头的请求。此标头的值是提供该页面的站点。例如，假设 [http://www.example-social-network.com](http://www.example-social-network.com)上的页面尝试访问 online-personal-calendar.com 中的用户数据。如果用户的浏览器实现了 CORS，则会发送以下请求标头：
> 
> 来源：[http ://www.example-social-network.com](http://www.example-social-network.com)
> 
> 如果 online-personal-calendar.com 允许该请求，它会在其响应中发送一个 Access-Control-Allow-Origin 标头。标头的值指示允许哪些源站点。例如，对上一个请求的响应将包含以下内容：
> 
> 访问控制允许来源：[http ://www.example-social-network.com](http://www.example-social-network.com)
> 
> 如果服务器不允许跨域请求，浏览器将向 example-social-network.com 页面发送错误，而不是 online-personal-calendar.com 响应。
> 
> 为了允许访问所有页面，服务器可以发送以下响应标头：
> 
> 访问控制允许来源：*
> 
> 但是，这可能不适用于需要考虑安全性的情况。

我在这里想念什么？CORS 保护服务器与保护客户端的意图是什么。

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2014-12-04T13:06:50.607

### 同源政策

**它是什么？**

同源策略是浏览器之间标准化的安全措施。“*起源”*主要是指*“域”*。它可以防止不同的来源相互交互，以防止诸如*跨站请求伪造*之类的攻击。

**CSRF 攻击如何运作？**

浏览器允许网站以 cookie 的形式将信息存储在客户的计算机上。这些 cookie 附有一些信息，例如 cookie 的名称、创建时间、过期时间、设置 cookie 的人员等。cookie 看起来像这样：

```
Cookie: cookiename=chocolate;  Domain=.bakery.com; Path=/ [//  ;otherDdata] 
```

所以这是一个巧克力饼干，应该可以从[http://bakery.com](http://bakery.com)及其所有子域访问。

此 cookie 可能包含一些敏感数据。在这种情况下，该数据是`chocolate`...... 如您所见，高度敏感。

所以浏览器存储了这个cookie。每当用户向可以访问此 cookie 的域发出请求时，cookie 就会被发送到该域的服务器。快乐的服务器。

这是一件好事。服务器在客户端存储和检索信息的超酷方式。

但问题是这允许[http://malicious-site.com](http://malicious-site.com)*在用户不知情的情况下*将这些 cookie 发送到[http://bakery.com ！](http://bakery.com)例如，考虑以下场景：

 *```
# malicious-site.com/attackpage

var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://bakery.com/order/new?deliveryAddress="address of malicious user"');
xhr.send(); 
```

如果你访问恶意网站，上面的代码执行，并且没有同源策略，恶意用户会代表你下订单，并在他的地方下订单......你可能不喜欢这样.

发生这种情况是因为您的浏览器将您的巧克力 cookie 发送到[http://bakery.com](http://bakery.com)，这使[http://bakery.com](http://bakery.com)认为*您在**知情*的情况下提出了新订单的请求。但你不是。

简单来说，这就是 CSRF 攻击。跨站点发出伪造请求。“跨站点请求伪造”。由于同源政策，它不会起作用。

**同源策略如何解决这个问题？**

它阻止恶意站点.com 向其他域发出请求。简单的。

换句话说，浏览器*不允许*任何站点向任何其他站点发出请求。它将防止不同来源通过此类请求（如 AJAX）相互交互。

**但是**，从其他主机（如图像、脚本、样式表、iframe、表单提交等）加载资源不受此限制。我们需要另一堵墙来保护我们的面包店免受恶意网站的攻击，使用[CSRF 令牌](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet#CSRF_Prevention_without_a_Synchronizer_Token)。

**CSRF 代币**

如前所述，恶意站点仍然可以在不违反同源策略的情况下执行以下操作：

```
<img src='http://bakery.com/order/new?deliveryAddress="address of malicious user"'/> 
```

并且浏览器将尝试从该 url 加载图像，从而导致对该 url 发送所有 cookie 的 GET 请求。为了阻止这种情况发生，我们需要一些服务器端保护。

基本上，我们将一个随机的、具有适当熵的唯一令牌附加到用户的会话中，将其存储在服务器上，并通过表单将其发送给客户端。提交表单时，客户端会将该令牌与请求一起发送，服务器会验证该令牌是否有效。

现在我们已经这样做了，恶意网站再次发送请求，它总是会失败，因为恶意网站没有可行的方法知道用户会话的令牌。

* * *

### CORS

当需要跨站点请求时，可以绕过该策略。这称为***CORS***。跨域资源共享。

这是通过让“域”告诉浏览器冷静并允许此类请求来实现的。这个“告诉”的事情可以通过传递一个标题来完成。就像是：

```
Access-Control-Allow-Origin: //comma separated allowed origins list, or just * 
```

因此，如果[http://bakery.com](http://bakery.com)将此标头传递给浏览器，并且创建对[http://bakery.com](http://bakery.com)的请求的页面存在于原始列表中，那么浏览器将放开请求以及 cookie .

有一些规则可以根据这些规则定义原点¹。例如，同一个域的不同端口不是同一个源。因此，如果端口不同，浏览器可能会拒绝此请求。与往常一样，我们~~亲爱~~的 Internet Explorer 是个例外。IE 以相同的方式处理所有端口。这是**非标准的**，*没有其他浏览器*以这种方式运行。**不要依赖这个**。

* * *

### JSONP

*当 CORS 不是一个选项时，带有 Padding*的 JSON 只是一种规避同源策略的方法。这是有风险的，也是不好的做法。避免使用这个。

该技术涉及的是向其他服务器发出请求，如下所示：

```
<script src="http://badbakery.com/jsonpurl?callback=cake"></script> 
```

由于同源策略不会阻止这^(2 个)请求，因此该请求的响应将被加载到页面中。

这个 url 很可能会响应 JSON 内容。但是仅仅在页面上包含 JSON 内容并没有帮助。当然，这会导致错误。因此[http://badbakery.com](http://badbakery.com)接受一个回调参数，并修改 JSON 数据，将其包装在传递给回调参数的任何内容中发送。

所以与其返回，

```
{ user: "vuln", acc: "B4D455" } 
```

这是无效的 JavaScript 抛出错误，它会返回，

```
cake({user: "vuln", acc:"B4D455"}); 
```

这是有效的 JavaScript，它会被执行，并且可能会根据`cake`函数存储在某个地方，以便页面上的其余 JavaScript 可以使用数据。

这主要由 API 用于将数据发送到其他域。同样，这是一种不好的做法，可能有风险，应该严格避免。

**为什么 JSONP 不好？**

首先，它非常有限。如果请求失败，您将无法处理任何错误（至少不是以理智的方式）。您无法重试请求等。

它还要求您`cake`在*全局*范围内拥有一个不是很好的功能。如果您需要使用不同的回调执行多个 JSONP 请求，请让厨师为您节省。这可以通过各种库的临时函数来解决，但仍然是一种骇人听闻的方式。

最后，您将在 DOM 中插入随机 JavaScript 代码。如果您不能 100% 确定远程服务会返回安全的蛋糕，那么您不能依赖这个。

* * *

### 参考

^(1\. [https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#Definition_of_an_origin](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#Definition_of_an_origin))

^(2\. [https://www.w3.org/Security/wiki/Same_Origin_Policy#Details](https://www.w3.org/Security/wiki/Same_Origin_Policy#Details))

**其他值得一读**

> [http://scarybeastsecurity.blogspot.dk/2009/12/generic-cross-browser-cross-domain.html](http://scarybeastsecurity.blogspot.dk/2009/12/generic-cross-browser-cross-domain.html)
> 
> [https://www.rfc-editor.org/rfc/rfc3986](https://www.rfc-editor.org/rfc/rfc3986)（对不起：p）
> 
> [https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy](https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy)
> 
> [https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)](https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF))

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T06:31:37.047

同源策略 (SOP) 是浏览器通过跨站脚本 (XSS) 防止漏洞而实施的策略。这主要是为了保护服务器，因为在很多情况下服务器可以处理身份验证、cookie、会话等。

跨域资源共享 (CORS) 是为数不多的放松 SOP 的技术之一。因为默认情况下 SOP 是“开启”的，所以在服务器端设置 CORS 将允许通过 XMLHttpRequest 将请求发送到服务器，即使请求是从不同的域发送的。如果您的服务器旨在为来自其他域的请求提供服务（例如，如果您提供 API），这将非常有用。

我希望这能澄清 SOP 和 CORS 之间的区别以及各自的目的。*

# java - 如何简化这个数组方法？

> ID：14681301
> 
> 赞同：0
> 
> 时间：2013-02-04T06:12:46.117
> 
> 标签：java, arrays

这是我的数组方法的代码：

```
private int _a;

public static void main(String[] args) {}

public int[] countAll(String s) {
    int[] xArray = new int[27];
    int[] yArray = new int[27];
    _a = (int)'a';

    for (int i = 0; i < xArray.length; i++) {
        xArray[i] = _a;
        _a = _a++;
    }

    for (int j = 0; j < s.length(); j++) {
        s = s.toLowerCase();
        char c = s.charAt(j);
        int g = (int) c;
        int letterindex = g - yArray[0];
        if (letterindex >= 0 && letterindex <= 25) {
            xArray[letterindex]++;
        } else if (letterindex < 0 || letterindex > 25) {
            xArray[26]++;
        }
    }
    return xArray;
} 
```

这段代码在java中工作，但有人告诉我有一种更简单的方法。我在找出我的代码的简化版本时遇到了很多麻烦。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:32:47.477

如果您只想计算大小写，那是一种非常迂回的做法，这样的事情有什么问题：

```
public static int countUpper(String str)
{
    int upper = 0;
    for(char c : str.toCharArray())
    {
        if(Character.isUpperCase(c))
        {
            upper++;
        }
    }
    return upper;
} 
```

然后只是同样的事情与`Character.isLowerCase(c)`相反。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:44:17.397

```
public static int[] countAll(String s) {
    int[] xArray = new int[27];

    for (char c : s.toLowerCase().toCharArray()){
        if (Character.isLetter(c))
            xArray[c -'a']++;
        else
            xArray[26]++;
    }

    return xArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:51:03.837

```
public static int[] countAll(String s) {
    int[] count = new int[26];

    for (char c : s.toLowerCase().toCharArray()) {
        if ('a' <= c && c <= 'z') {
            count[c - 'a']++;
        }
    }

    return count;
} 
```

首先..你的阵列哪里大。

其次..为什么你需要两个数组？

第三..您的代码似乎不起作用..单词“hello”返回了一个数字为 97（26 次）和数字为 102 的数组。

编辑：使它更短。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:32:09.337

以下是应该对您的代码进行的两项重要改进：

*   添加一个方法 javadoc for `countAll`，这样读者就不必翻阅 20 多行冗长的代码来逆向工程该方法*应该是*什么。

*   摆脱`_a`憎恶。根据最广泛接受的 Java 编码标准，下划线字符在变量名中没有位置。此外，`a`这是我遇到过的最没用的字段名称。如果它是为了向读者传达一些意义……你完全失去了我。

    （哦，我明白了。它根本不应该是一个字段。Bzzzt ！！！）

* * *

然后是`yArray`数组。据我所知，它唯一使用的地方是这里：

```
int letterindex = g - yArray[0]; 
```

这实际上与：

```
int letterindex = g; 
```

因为`yArray[0]`从未分配给。总之`yArray`是完全多余的。

* * *

和这个：

```
 if (letterindex >= 0 && letterindex <= 25) {
        xArray[letterindex]++;
    } else if (letterindex < 0 || letterindex > 25) {
        xArray[26]++;
    } 
```

部分中的条件`else`是多余的。如果你只写这个，你的代码会更容易阅读：

```
 if (letterindex >= 0 && letterindex <= 25) {
        xArray[letterindex]++;
    } else {
        xArray[26]++;
    } 
```

两者是等价的。你明白为什么吗？

* * *

最后，`xArray`元素的初始化对我来说显然是错误的。如果`xArray`包含计数，则元素需要从零开始。（你不知道为什么你的代码告诉你*每个*字符串都包含很多“zees”吗？）

> *“这段代码在java中工作......”*

我不这么认为。也许它编译。也许它运行而不会崩溃。但它*没有*给出正确的答案！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T06:43:43.183

看起来您的程序正在尝试查找字符串中不同字母的频率，并且您正在计算特殊索引 26 中的非字母。在这种情况下，您初始化计数的代码是错误的。它正在以下 for 循环中使用一些值进行预初始化：

```
for (int i = 0; i < xArray.length; i++) {
        xArray[i] = _a;
        _a = _a++;
    } 
```

我认为该方法可以简单地类似于：

```
s = s.toLowerCase();
int histogram[] = new int[27];

for (char c: s.toCharArray()) {
    int index = c - 'a';

    if (index < 0 || index > 25) {
        index = 26;
    }

    histogram[index]++;
} 
```

# php - 在后台 Codeigniter Windows 中运行控制器方法

> ID：14681304
> 
> 赞同：1
> 
> 时间：2013-02-04T06:13:04.913
> 
> 标签：php, codeigniter, curl, background-process

我将从我的程序的功能开始。控制器的**index**函数采用 URL 和关键字数组并将它们存储在 DB 中。现在**crawlLink**方法获取所有关键字和 URL。搜索所有关键字的 URL，生成所有 URL 的子链接并再次存储在数据库中，这些子链接也搜索关键字。使用**搜索**方法在每个链接中搜索关键字。使用**extract_links**函数从所有 URL 中提取子链接。**search**和**extract_links**都有一个名为**get_web_page**的方法，它使用 cURL 获取页面的完整内容。**get_web_page** 使用一次**搜索**功能以获取网页内容，以便从中提取关键字。它还用于**extract_links**函数以提取具有有效页面内容的链接。

现在**crawlLink**调用了**search**函数两次。一次是从域链接中提取关键字，第二次是从子链接中提取关键字。因此，**get_web_page**被调用了三次。获取大约 150 个链接的内容大约需要 5 分钟。它被称为三次，因此需要 15 分钟的处理时间。在此期间，什么都做不了。因此，我想在后台运行这个进程并在处理时显示它的状态。**extract_links**和**get_web_page**使用 include_once 包含在控制器中。

get_web_page 函数如下：

```
function get_web_page( $url )
{
    $options = array(
    CURLOPT_RETURNTRANSFER => true,     // return web page
    CURLOPT_HEADER         => false,    // don't return headers
    CURLOPT_FOLLOWLOCATION => true,     // follow redirects
    CURLOPT_ENCODING       => "",       // handle compressed
    CURLOPT_USERAGENT      => "spider", // who am i
    CURLOPT_AUTOREFERER    => true,     // set referer on redirect
    CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
    CURLOPT_TIMEOUT        => 120,      // timeout on response
    CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
    );

    $ch      = curl_init( $url );
    curl_setopt_array( $ch, $options );
    $content = curl_exec( $ch );
    $err     = curl_errno( $ch );
    $errmsg  = curl_error( $ch );
    $header  = curl_getinfo( $ch );
    curl_close( $ch );

    $header['errno']   = $err;
    $header['errmsg']  = $errmsg;
    $header['content'] = $content;
    return $header;
} 
```

一次来自用户的 URL 和关键字的输入可以被视为一项任务。现在可以启动此任务，它将开始在后台运行。同时可以定义并启动另一个任务。每个任务都有“待办事项”、“进行中”、“待处理”、“完成”等状态。Oscar Dias 的[简单任务板](https://github.com/oscardias/Simple-Task-Board)正是我希望显示任务的方式。

我读到了很多在后台运行函数的方法，现在我对采用哪种方法进退两难。我阅读了有关 exec、pcntl_fork、Gearman 等的信息，但都需要我不想使用的 CLI。我尝试使用 Cygwin 安装 Gearman，但由于找不到 libevent，因此卡在了 Gearman 安装中。我已经单独安装了 libevent，但仍然无法正常工作。Gearman 需要 CLI，所以放弃了它。我也不想使用 CRON。我只想知道哪种方法最适合我的方案。

我正在使用 PHP 5.3.8 | 代码点火器 2.1.3 | 阿帕奇 2.2.21 | MySQL 5.5.16 | 视窗 7 64 位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:25:14.830

你的问题是，Windows。

windows 根本不适合运行后台任务和 cron 作业 - 您可以找到一些工具，但它们是有限的。

但是，你确定你甚至需要这个吗？大多数服务器都是 Linux，所以你为什么不在 Windows 上测试并转移过来。

--

第二部分是命令行——如果你想启动一个新进程（你这样做），你需要它。但是ti并不是真的很可怕。CodeIgniter 非常简单：

[http://ellislab.com/codeigniter/user-guide/general/cli.html](http://ellislab.com/codeigniter/user-guide/general/cli.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T11:24:48.807

我试图实现的上述方法似乎无法在 Windows 中实现。问题中列出的许多方法要么被删除，要么被修改。然后我转向涉及使用`AJAX`.

我将控制器方法作为 ajax 请求执行，并给它一个计数，该计数随着每个新的 AJAX 请求而增加。尽管处理将继续，但每个请求都可以中止，但最终结果在我的项目中很重要，即使它们不完整。如果浏览器打开，那么该请求可能会完成，稍后用户可以看到完整的结果。

在停止任务处理时，会显示一个 CANCELED 图标，并显示一个指向结果页面的链接，该页面显示在任务被取消之前生成的结果。在 AJAX 失败或 AJAX 成功时，我将任务的计数从服务器发送回客户端，由客户端发送到服务器。因此，结果会显示为一个独特的任务，不会弄乱。

但是没有跟踪某项任务的进展情况。无法确定执行所花费的时间。因此，这种方法对我有用，但有一些缺点。主要目的是用户不应该在某些任务正在进行时等待，这可以通过上述解决方法以某种方式实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:23:32.617

您可以使用 nohup 进程或使用 cron 作业运行......请通过以下链接

[nohup：在后台运行 PHP 进程](https://stackoverflow.com/questions/5288584/nohup-run-php-process-in-background)

[Linux下运行php5后台进程](https://stackoverflow.com/questions/13857237/running-a-php5-background-process-under-linux?lq=1)

[https://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/](https://nsaunders.wordpress.com/2007/01/12/running-a-background-process-in-php/)

# neo4j - 在 py2neo 中搜索节点

> ID：14681305
> 
> 赞同：2
> 
> 时间：2013-02-04T06:13:11.190
> 
> 标签：neo4j, py2neo

有没有办法使用 py2neo 搜索具有特定属性的节点？（我有一堆带有{“word”：“some word”}的节点，我希望能够通过节点搜索找到word属性具有特定值的节点）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:00:06.277

我建议您考虑使用索引来满足这种要求。您可以根据需要搜索的属性对节点进行索引，然后参考此索引进行搜索。

否则，您将得到一个相当不理想的 Cypher 查询：

```
START n=node(*) 
WHERE n.word! = 'some word' 
RETURN n 
```

我建议不要使用它，因为它必须筛选整个数据库，因此随着数据库的增长会非常消耗资源并且速度很慢。

# java - android中Onclicklistener的空指针异常

> ID：14681306
> 
> 赞同：0
> 
> 时间：2013-02-04T06:13:19.547
> 
> 标签：java, android, android-layout, imageview

如何在 menu.setOnClickListener(new View.OnClickListener() { 的位置恢复 Null 指针异常的问题，如果我按下另一个活动（关于页面）应该打开，我有一个 imageview(menu)，但在这里Imageview的OnClick，我遇到了错误并且应用程序强制关闭。这是代码

```
public class About extends Activity {
LinearLayout line1, line2;
ImageView menu;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_about);
menu = (ImageView)findViewById(R.id.menu);
    menu.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
           menu.setVisibility(View.VISIBLE);
          // TODO Auto-generated method stub
        line1.setVisibility(View.VISIBLE);
        if (line2.getVisibility() == View.INVISIBLE || line2.getVisibility() == View.GONE) {
            line2.setVisibility(View.VISIBLE); } 
        else { 
            line2.setVisibility(View.INVISIBLE); 
        } 
          }
      });

          ImageView about = (ImageView) findViewById(R.id.about);
          about.setOnClickListener(new View.OnClickListener() {
             public void onClick(View v){
                startActivity(new Intent(About.this, About.class));
             }
              }); 
```

xml文件

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@color/black" >

<LinearLayout
    android:id="@+id/ll1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@color/black" 
   android:layout_alignParentTop="true"
    android:layout_alignParentRight="true">

      <ImageView
    android:id="@+id/menu"
    android:layout_width="50dp"
    android:layout_height="50dp"

    android:src="@drawable/menu" />
</LinearLayout>

<LinearLayout
    android:id="@+id/ll2"
    android:layout_width="199dp"
    android:layout_height="wrap_content"
    android:background="@color/black" 
    android:layout_toRightOf="@+id/ll1"
    android:visibility="gone"
    >

  <ImageView
    android:id="@+id/about"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_above="@+id/textView1"
    android:layout_toLeftOf="@+id/jobs"
    android:src="@drawable/about" />

  </LinearLayout>

<TextView
    android:id="@+id/textView3"
    android:layout_width="match_parent"
    android:layout_height="50dip"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="@color/white" 
    android:textColor="@color/white"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:19:24.153

你得到 NullPointerException 因为你没有初始化 imageview。请先做。

```
 ImageView menu=(ImageView)findViewById(R.id.menu); 
```

在您将 onClick 侦听器设置为您的图像视图之前写下这一行，您就完成了。希望它会有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T06:22:54.177

在设置监听器之前，您没有正确初始化菜单变量，您应该

```
menu = (ImageView)findViewById(id.menu); 
```

然后写下你的听线......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T06:47:51.207

正如我所怀疑的，您已将 menu 声明为实例变量（在类的顶部），但您从未将其实例化为局部变量。添加行

```
menu = (ImageView)findViewById(R.id.menu) 
```

在 onCreate() 方法的顶部，在设置 OnClickListener 之前，它将起作用。

声明实例变量（您已经完成）和实际初始化它是有区别的。从这个意义上说，您可以将 onCreate() 方法视为常规 Java 类中的构造函数。在类的顶部声明变量是不够的，您必须将其初始化为实际对象的变量。

这可能听起来微不足道，但相信我不是。当我第一次学习 java 时，在我完全理解这个概念之前，我花了好几个小时在屏幕上尖叫你现在遇到的同样类型的错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T06:17:50.253

您应该传递正在运行的活动的上下文而不是您希望运行的活动，问题是 About.this ，将其替换为当前活动的上下文

```
startActivity(new Intent(About.this, About.class)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-09T06:45:40.613

我有一个类似的问题。我发现我在 findViewById() 中使用的 xml id 来自与当时活动的页面布局不同的页面布局。

没有警告。只需要确保像保存这样的常用按钮具有良好的命名约定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T06:21:06.510

您还没有实例化菜单第一次实例化。

您在同一个活动中调用同一个类，将您的以下代码更改如下

```
 startActivity(new Intent(About.this, About.class)); 
```

至

```
 startActivity(new Intent(getApplicationContext(), NewClass.class)); 
```

或者

```
 startActivity(new Intent(CurrentClass.this, NewClass.class)); 
```

# mysql - 运行 xamp 的问题

> ID：14681307
> 
> 赞同：1
> 
> 时间：2013-02-04T06:13:22.520
> 
> 标签：mysql, xampp, port

我正在使用一个开源文档存储库 kordil edbms，它在我的 windows 7 机器上运行良好。但是当我将它安装在 Windows 小型企业服务器中时，xamp 没有运行。当我启动任务管理器时，httpd 本身没有显示出来。我去了 xamp 控制面板，它说运行 mysql 忙时出错。我在那台机器上有共享点，它也有 localhost 80。所以我改变了 apache 端口。我在 2 个地方更改了 httpd.conf 文件中的 apache 端口

1.  听
2.  服务器名称

看来我也需要更改mysql的端口。现在有什么选项可以更改 xamp mysql 的端口，或者我会在其他地方出错。另请查看 xamp 控制面板的屏幕截图。

![在此处输入图像描述](../Images/55954064f4ad6adc107a536ce1c699b0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:17:00.437

退出`Skype`然后重新启动您的所有服务`XAMPP`，让我知道它是否工作。

端口冲突，因为 Skype 默认也消耗 80

单击 SCM 并通过启动和停止来管理服务。

![在此处输入图像描述](../Images/7dcdaa2abf1222b922c208ab254e6952.png)

**编辑**

检查此链接是否可以使用 - [http://www.binodranabhat.com.np/blog/using-xampp-and-iis-together/](http://www.binodranabhat.com.np/blog/using-xampp-and-iis-together/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-08T11:23:09.517

**修复 Apache 端口冲突**

另一个在使用 XAMPP 时很常见的错误消息是 XAMPP 控制面板中的通知，表明 Apache 需要使用的端口 443 和 80 已被另一个应用程序使用。

来自 XAMPP 控制面板的消息让我们知道 Skype 正在使用端口 443 和 80 对于上图中的错误消息，这是一个非常简单的修复。有问题的应用程序是 Skype。如果您看到相同的消息，请完全关闭 Skype 并重新启动 XAMPP 以解决问题。Skype 是端口阻塞场景的常客，很容易识别和修复。不幸的是，事情并不总是那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-18T09:44:27.057

MYSQL 无法正常工作，因为 xampp 除了该路径之外的哪个路径没有自动获取。这就是xampp mysql无法启动的原因

转到窗口 +R 按然后以管理员身份运行打开 cmd 然后键入此命令

```
 sc delete mysql 
```

然后启动mysql后问题解决。 [![在此处输入图像描述](../Images/c959a7e16fe721a889c97901e05cba66.png)](https://i.stack.imgur.com/ioJNb.png)

# mysql - 将MySQL表导入hadoop？

> ID：14681308
> 
> 赞同：1
> 
> 时间：2013-02-04T06:13:31.687
> 
> 标签：mysql, hadoop, hbase, hive

我有一个 mysql 表，由于其巨大的大小，它需要 20-30 分钟来响应一个简单的选择查询。我在想是否可以将其导入hadoop进行处理。这会是个好主意吗？如果我将使用 hive 执行相同的查询，会有任何性能提升？？如果是，那么我应该如何将我的表导入 hadoop？由于 table 具有复合主键，因此 sqoop 不是一个选项。还有一件事，我应该使用 HBase 吗？哪种方法会更好？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:05:36.813

Hive 是面向批处理的，考虑使用[Impala](http://training.cloudera.com/elearning/impala/)，它用于交互式即席查询并且比 Hive 更快。Hive 比 Impala 更老，所以它有很多文档和帮助也很容易找到。

还有[Apache Drill](http://incubator.apache.org/drill/)，但仍处于孵化器阶段。还有[Amazon RedShift](http://aws.amazon.com/redshift/)，但它目前处于有限的预览阶段。然后是[Google BigQuery](https://cloud.google.com/products/big-query)。在 Hadoop 中获取数据并在其上处理数据有多种选择。

所有问题都没有固定的解决方案/选择。根据您的要求，必须选择合适的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:54:21.597

在导入表的情况下，即使它有一个复合主键，我认为你可以使用sqoop的顺序导入。只有一个映射器（使用 -m 1），您将不再需要“拆分”列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T23:36:29.707

@cool.ernest.7 也许很天真，但是为什么不能导入带有复合索引的表呢？顺便说一句，你的数据库有多大？

# php - 如何使用数组结果进行评估

> ID：14681311
> 
> 赞同：0
> 
> 时间：2013-02-04T06:13:53.930
> 
> 标签：php, database, arrays

我想在计算中使用数组结果。这是代码：

```
 $result1 = db_query("SELECT s.nid, s.stock FROM {uc_product_stock} s WHERE s.nid=$key ");

 $stock = array();
 foreach($result1 as $row){
         $stock[$row->nid] = $row->stock;
 }
 drupal_set_message("<pre>" . print_r($stock, true) . "</pre>"); 
```

它给出了这个结果：

```
Array
(
    [9] => 83
) 
```

现在我想用“83”作为一个变量来评估一个方程，即

```
$mul = $stock(i.e 83) * $price; 
```

但是由于 it("83") 出现在一个数组中，它会给出错误。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:18:45.930

使用下面的代码

```
$result1 = db_query("SELECT s.nid, s.stock FROM {uc_product_stock} s WHERE s.nid=$key ");

$stock = mysql_fetch_array($result1);

$mul = $stock["stock"] * $price; 
```

它可能对你有帮助。

# cordova - Phonegap 屏幕跳转复选框和隐藏的 div

> ID：14681321
> 
> 赞同：1
> 
> 时间：2013-02-04T06:15:20.523
> 
> 标签：cordova, checkbox, scroll, focus

我正在使用 phonegap 2.3.0 来构建一个表单，在我的表单中，我有几个复选框，当单击它们时会打开一个隐藏的 div。问题是屏幕要么跳到页面顶部，要么跳到最后一个有焦点的输入。我试图在单击复选框时将焦点添加到隐藏 div 中的输入，但它不起作用。我试图为整个表单添加模糊，但没有奏效。这就是我所拥有的......我不知道该怎么做，我不想使用一个简单的是/否的下拉列表，但我测试了它并且它可以正常工作......

```
input  data-theme="b" type="checkbox" name="parking_issuesC" id="parking_issuesC" onclick="fnchecked(this.checked,'67');document.getElementById('parking_issues').focus();"  /> <b><font color="#cc0033">* &nbsp;</font> Parking Issues?</b> </label>

            <div style="display:none;" id="select67" name="select67" valign="top">
            <label for="ladder_size"><b><font color="#cc0033">EXPLIAN</font></b></label>
            <input type="text" name="parking_issues" value="" id="parking_issues">
            <hr></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:18:52.457

使用 .show() 和 .hide() 与 jquery mobile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T02:50:37.940

实际上，在使用了 scrollTo 进一步测试之后，使用选择菜单而不是复选框来显示和隐藏工作。Jquery 需要在他们的平台上多工作一点 IMO。

# c++ - 查找我的 Windows PC 上可用的 USB 端口列表

> ID：14681333
> 
> 赞同：1
> 
> 时间：2013-02-04T06:17:15.213
> 
> 标签：c++, windows, visual-c++, usb, winusb

我进行了很多搜索，但无法找到查询的答案。我想知道 PC 中有多少个 USB 端口可用，即对于串行端口，我们有“COM1”和“COM2”。我的电脑（windows7）包含 8 个 USB 端口，我需要找到端口列表以及它们是否被使用。

我尝试使用 WMI 查询但没有结果，因为它只提供了连接设备和 USB 集线器的详细信息。

使用 Win DDK，它将显示每个 HUB 可用的所有端口，但有趣的是，这与我从外部看到的不同。Win DDK 将给出每个集线器可寻址的端口数量，而不是从外部可见的端口的确切数量。任何 C 或 C++ 代码都会有很大帮助。

理想的结果是这样的：

```
USB 1  USED
USB 2  Not USed 
USB 3  USED 
USB 4  Not Used 
..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:47:24.077

你无法确定这一点。原因很简单，您想区分计算机内部的集线器和外部的集线器。您的 PC 上的这 8 个 USB 端口中至少有一些可能连接到焊接在主板上的集线器。

此外，将 USB 用作仅限内部连接的情况并不少见。例如，许多 SD 读卡器连接到内部 USB 集线器。对于软件来说，这看起来像一个 USB 端口，但它当然在您的 PC 外部不可见。

# c# - 在 WebBrowser 控件中设置输入标签的值

> ID：14681335
> 
> 赞同：8
> 
> 时间：2013-02-04T06:17:19.757
> 
> 标签：c#, windows-phone-7, webbrowser-control

我正在尝试帮助用户使用自定义控件登录他们的帐户`WebBrowser`。我正在尝试使用`WebBrowser`'`InvokeScript`函数将输入标签的值设置为玩家用户名。但是，我目前的解决方案除了渲染一个空白页面之外什么都不做。

我当前的代码如下所示（web 是我的`WebBrowser`控件的名称）：

```
web.Navigate(CurrentURL, null, @"<script type='text/javascript'>
    function SetPlayerData(input) {
        username.value = input;
        return true;
    }
</script>");
web.Navigated += (o, e) =>
{
    web.IsScriptEnabled = true;
    web.InvokeScript("SetPlayerData", @"test");
}; 
```

如前所述，这现在不起作用。我正在尝试在 Windows Phone 上执行此操作，因此我在此处和其他地方找到的一些示例将不起作用，因为我无法访问相同的功能。

我将如何成功执行此操作？

编辑：也许我不清楚，但我正在使用 Windows Phone，它的可用 API 有限，这意味着我无权访问该`Document`属性和许多其他功能。我确实可以访问`InvokeScript`，但不多。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T06:23:00.683

```
webBrowser1.Document.GetElementById("navbar_username").InnerText ="Tester";
webBrowser1.Document.GetElementById("navbar_password").InnerText = "xxxxxxxxxxx";

foreach (HtmlElement HtmlElement1 in webBrowser1.Document.Body.All)
    {
    if (HtmlElement1.GetAttribute("value") == "Log in")
        {
        HtmlElement1.InvokeMember("click");
        break;
        }
    } 
```

你可以在这里找到更多：http: [//deltahacker.gr/2011/08/15/ftiakste-to-diko-sas-robot/](http://deltahacker.gr/2011/08/15/ftiakste-to-diko-sas-robot/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-26T09:29:17.183

自从发布这个问题以来已经有一段时间了，但我想我会发布一个答案，以便帮助遇到同样情况的人

```
try
        {
            webBrowser1.Document.GetElementById("navbar_username").SetAttribute("value", "your user");
            webBrowser1.Document.GetElementById("navbar_password").SetAttribute("value", "your pass");
            webBrowser1.Document.GetElementById("Log in").InvokeMember("click");
        }
        catch { } 
```

# ubuntu - Liferay 5.2.3 CE 从 Windows Server 2008 R2 迁移到 Ubuntu Server 12.10

> ID：14681336
> 
> 赞同：0
> 
> 时间：2013-02-04T06:17:24.237
> 
> 标签：ubuntu, liferay

我想将 Liferay 5.2.3 CE 从 Windows Server 2008 R2 迁移到 Ubuntu Server 12.10。

迁移所需的更改如下：

1）复制document_library并导入Mysql转储。

2）为Mysql数据库正确配置了portal-ext.properties文件条目

3）删除了sevencogs文件夹

4）为Oracle JDK配置Java

完成所有配置后，它无法成功迁移到 Linux 机器。但是 Liferay 的新安装工作正常。

类似于上述问题的问题在这里提出：[https](https://www.liferay.com/community/forums/-/message_boards/message/11823660) ://www.liferay.com/community/forums/-/message_boards/message/11823660但没有完全回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T12:02:56.217

将 Liferay 从 Windows 迁移到 Linux 时，一个重要的检查点是表名 case。由于 Windows 和 Linux 遵循不同的命名约定。为了在 Linux 上遵循相同的小写命名约定，我们可以在**'/etc/mysql/my.cnf'**下 编辑**lower_case_table_names = 1**。

 **参考链接：

[http://www.liferay.com/community/forums/-/message_boards/message/14068722](http://www.liferay.com/community/forums/-/message_boards/message/14068722)

和

[http://www.liferay.com/community/forums/-/message_boards/message/10299609](http://www.liferay.com/community/forums/-/message_boards/message/10299609)**

# java - ANT：如何从 Java 调用 ANT build.xml 文件

> ID：14681340
> 
> 赞同：0
> 
> 时间：2013-02-04T06:17:36.643
> 
> 标签：java, ant, build

我有一个 build.xml 来为我的 Application 生成 Jar 文件。

我正在尝试直接调用 build.xml，如下所示

```
import java.io.IOException;

public class RunBuild {

    public static void main(String args[]) throws IOException {
        Runtime rt = Runtime.getRuntime();
        Process proc = rt.exec("/home/sai/Jan5WS/AntTest/build.xml");
    }

} 
```

它没有抛出任何异常，但它没有生成 jar 文件。

**我目前正在使用 ubuntu 12 和 ant 8.1 版本**

有人可以告诉我可能出了什么问题吗？

谢谢

**编辑部分**

我试过以这种方式运行它

公共静态 void main(String args[]) 抛出 IOException {

```
File buildFile = new File("build.xml", "/home/sai/Jan5WS/AntTest");
Project p = new Project();
p.setUserProperty("ant.file", buildFile.getAbsolutePath());
p.init();
ProjectHelper helper = ProjectHelper.getProjectHelper();
p.addReference("ant.projectHelper", helper);
helper.parse(p, buildFile);
p.executeTarget(p.getDefaultTarget()); 
```

}

但它的投掷

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/tools/ant/launch/AntMain
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(Unknown Source)
    at java.security.SecureClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.defineClass(Unknown Source)
    at java.net.URLClassLoader.access$100(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at org.apache.tools.ant.Project.initProperties(Project.java:313)
    at org.apache.tools.ant.Project.init(Project.java:300)
    at RunBuild.main(RunBuild.java:15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:40:41.337

你有两个选择：

1.  使用 System.execute("ant", "-f", "/home/nitesh/Projects/ANT_DEMO/RPM_ANT/SIS/build.xml") 在新的 JVM 中执行 ant
2.  使用 ProjectHelper 在同一 JVM 中执行构建，代码示例：

```
 File buildFile = new File("/home/sai/Jan5WS/AntTest", "build.xml");
        Project p = new Project();
        p.setUserProperty("ant.file", buildFile.getAbsolutePath());
        p.init();
        ProjectHelper helper = ProjectHelper.getProjectHelper();
        p.addReference("ant.projectHelper", helper);
        helper.parse(p, buildFile);
        p.executeTarget(p.getDefaultTarget()); 
```

在这种情况下，ant.jar 和 ant-launcher.jar 必须在类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:20:52.597

假设正常的ant，您无法执行build.xml。

您需要运行 ant 并将 build.xml 作为参数传递。

（可以使用其库运行 ant 项目：请参阅此问题[Is it possible to call Ant or NSIS scripts from Java code?](https://stackoverflow.com/questions/6440295/is-it-possible-to-call-ant-or-nsis-scripts-from-java-code/6440342#6440342)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:27:19.550

build.xml 不是可执行文件。它只是一个普通的 xml 文件。您需要执行“ant”并通过代码中的“-f”标志提供此 build.xml 文件的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:12:57.680

试试它对我有用....

```
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

public class CreateJar {

        public static void main(String[] args) {

                Process process;
                try {
                        process = new ProcessBuilder("ant","-f" ,"/home/nitesh/Projects/ANT_DEMO/RPM_ANT/SIS/build.xml").start();
                        process.waitFor();
                        InputStream is = process.getInputStream();
                    InputStreamReader isr = new InputStreamReader(is);
                    BufferedReader br = new BufferedReader(isr);
                    String line;
                    while ((line = br.readLine()) != null) {
                      System.out.println(line);
                    }

                } catch (Exception e) {
                        e.printStackTrace();
                }

        }

} 
```

这是 build.xml

```
<project name="rpmextract" default="jar" basedir=".">
<property name="build" location="build"/>
<target name="jar">
<jar destfile="app.jar" basedir="${build}/classes"/> 
</target>
</project> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-24T15:20:59.870

我有同样的问题，我通过以下步骤解决了它：

1.- 为您的 ant 版本下载 ant-launcher.jar

2.-将其添加到您的库中

[![在此处输入图像描述](../Images/528b8836be183627b726b85386348e57.png)](https://i.stack.imgur.com/8Bgnw.png)

# compiler-construction - 什么样的编译器可以编译出什么样的编程语言？

> ID：14681341
> 
> 赞同：-3
> 
> 时间：2013-02-04T06:17:41.927
> 
> 标签：compiler-construction, opencl, openmp

这些看起来像愚蠢的问题，但我想澄清我的疑问。

我知道 C 编程，它是一种编程语言，为此我需要一个编译器，如`turboc`or `turboc3`or `devc`++ 等。如果我想编译`Java`我需要的程序`JDK`和 jre.，但是在 linux 中，使用终端我们可以编译各种编程语言。

1.  怎么可能？
2.  现在我想编译`OpenCL`程序，我需要哪个编译器？？根据GPU公司，我知道我们需要OpenCL SDK。我想写一个CUDA程序。
3.  CUDA 是平台还是编程语言？如果它是一种编程语言，那么
4.  我需要哪个编译器来编译 CUDA 程序？
5.  编写CUDA程序有什么规范吗？我想编写 OpenACC 程序。
6.  编写程序需要什么以及编译需要什么？我想编写 OpenMP 程序。
7.  编写程序需要什么以及编译需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:22:48.013

*   Linux 具有支持多种语言的 GNU 编译器集合 (gcc)（甚至部分支持 Java）
*   CUDA 和 OpenCL 使用类似 C 但定制的编程语言和规范可从项目网站获得。这些编译器是 SDK 的一部分。
*   OpenMP 和 OpenACC 是跨平台的 API。库可用于多种语言。
*   先尝试谷歌。
*   最好一次编写一个程序。

# xml - xsl 上 SequenceType 的 schema-element()：带有文字结果元素的变量

> ID：14681343
> 
> 赞同：0
> 
> 时间：2013-02-04T06:17:51.860
> 
> 标签：xml, xslt, xsd, xslt-2.0

我试图了解`schema-element()`用作`SequenceType`文字结果元素时的工作原理。这是我的样式表

```
<xsl:stylesheet
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

  <xsl:import-schema>
    <xs:schema>
      <xs:element name="foo">
        <xs:complexType>
          <xs:attribute name="bar"/>
        </xs:complexType>
      </xs:element>
    </xs:schema>
  </xsl:import-schema>

  <xsl:variable name="test" as="schema-element(foo)">
    <foo bar="baz"/>
  </xsl:variable>

  <xsl:template match="/">
    <xsl:sequence select="$test"/>
  </xsl:template>

</xsl:stylesheet> 
```

Saxon-EE 9.4.0.4（在 Oxygen 14.1 中）给了我以下编译错误`Required item type of value of variable $test is schema-element(foo); supplied value has item type element(foo, {http://www.w3.org/2001/XMLSchema}untyped)`

根据[XSLT 2.0 和 XPath 2.0 程序员参考](http://books.google.com/books?id=OnqLX4RgOkIC)

> 当在 SequenceType 中使用构造 «schema-element(N)» ... 时，N 必须是全局元素的名称 ... 在导入的模式中声明。

同一来源的其他地方

> «as="schema-element(EVENT)"» 表示 [a parameter] 必须是元素节点，该元素节点被验证为 EVENT 或 EVENT 替换组中的元素。

似乎应该通过导入的模式`<foo bar="baz"/>`验证为元素。似乎它会有所帮助，但前提是我在导入的模式中有一个命名的复杂类型。我错过了什么或做错了什么？`foo``@xsl:type`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T13:00:37.810

你试过用`<foo xsl:validation="strict" bar="baz"/>`吗？错误消息表明结果元素是在没有类型注释的情况下创建的，因此可能需要显式请求验证，该`as`属性可能不够用。但我对模式感知 XSLT 2.0 不太熟悉，因此建议您尝试一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:10:31.647

一个复杂的问题是，当 xsl:variable 具有文字内容时，该变量将绑定到文档节点（当然，该值可能会在以后以各种方式强制转换为其他类型）。在 Michael Kay 的书第 4 章中关于验证临时树的讨论中，您会发现将 'foo' 元素包装在带有验证属性的 xsl:document 指令中的有益建议。出于稍后将变得清楚的原因，我重命名了该变量：

```
<xsl:variable name="test0">
  <xsl:document validation="strict">
    <foo bar="baz"/>      
  </xsl:document>
</xsl:variable> 
```

如果真的想`test`绑定到一个`foo`元素，而不是一个控制`foo`元素的文档节点，那么我们可以`test`这样定义：

```
<xsl:variable name="test" 
              as="schema-element(foo)" 
              select="$test0/foo"/> 
```

可能有一种更简洁的方法来解决这个问题，没有两步定义，但这确实可以在没有错误消息的情况下工作。

# php - 如何在php中使用正则表达式替换字符串中的值？

> ID：14681348
> 
> 赞同：0
> 
> 时间：2013-02-04T06:17:58.507
> 
> 标签：php, regex

这是我的字符串`($commit$ + $Bug$)/$HR$*($Leader$^$IT$)`...我想`$variable$`用 1 替换所有替换...

像`(1 + 1)/1*(1^1)`...

是否可以用值 1 替换？？？如何？？

不在乎 $ *_* _$ 之间的哪个变量...

请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:24:39.427

```
$result = preg_replace(
    '/\$ # Match $
    \w+  # Match one or more alphanumeric characters
    \$   # Match $/x', 
    '1', $subject); 
```

这假设只有字符在和`[A-Za-z0-9_]`之间是合法的。`$``$`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:24:03.250

试试这个

```
\$(.*?)*\$  Or (\$\w*\$)+
preg_replace('/\$(.*?)*\$/i', '1', '($commit$ + $Bug$)/$HR$*($Leader$^$IT$)'); 
```

1][点击这里](http://codepad.org/ZcSqcFyC)

2][更好的一个](http://codepad.org/NvHl557l)

检查上面的链接以获得答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:35:16.037

```
$str = '($commit$ + $Bug$)/$HR$*($Leader$^$IT$)';
$str = preg_replace('/\$(.*?)\$/', '1', $str);
echo $str; 
```

# c++ - C++ 11 委托构造函数纯虚方法和函数调用——危险？

> ID：14681349
> 
> 赞同：14
> 
> 时间：2013-02-04T06:18:10.257
> 
> 标签：c++, c++11, constructor, delegation, pure-virtual

*不是[从构造函数调用虚函数和纯虚函数](https://stackoverflow.com/questions/8642363/invoking-virtual-function-and-pure-virtual-function-from-a-constructor)的重复：*

*以前的问题与 C++ 03 相关，而不是 C++ 11 中的新构造函数委托行为，并且该问题没有解决通过使用委托来减轻未定义行为的问题，以确保在执行纯虚拟实现之前正确构造。*

在 C++ 11 中，在构造过程中，但在通过构造函数委托“完全构造”类/对象之后，在类的构造函数中调用纯虚函数有什么危险？

显然，在 C++ 11 规范中的某个地方存在这样的约束，

> 可以为正在构建的对象调用成员函数（包括虚拟成员函数，10.3）。同样，正在构建的对象可以是 typeid 运算符的操作数 .. - [C++ 工作草案] ( [http://www.open-std.org/jtc1/sc22/wg21/docs/的 12.6.2 #13 paper/2011/n3242.pdf](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3242.pdf) ) 找不到已发布规范的“合理使用”版本。
> 
> 一旦任何构造函数完成执行，C++11 就会考虑构造一个对象。由于将允许执行多个构造函数，这意味着每个委托构造函数都将在其自己类型的完全构造的对象上执行。派生类构造函数将在其基类中的所有委托完成后执行。-[维基百科](http://en.wikipedia.org/wiki/C%2B%2B11)说这是 C++ 11 的事情。

实际 C++ 11 参考未知。

以下示例在 Visual Studio 2012 C++ 编译器的 Nov CTP 中编译并运行：

```
#include <string>

/**************************************/
class Base
{
public:
    int sum;
    virtual int Do() = 0;

    void Initialize()
    {
        Do();
    }
    Base()
    {
    }
};

/**************************************/
// Optionally declare class as "final" to avoid
// issues with further sub-derivations.
class Derived final : public Base
{
public:

    virtual int Do() override final
    {
        sum = 0 ? 1 : sum;
        return sum / 2 ; // .5 if not already set.
    }

    Derived(const std::string & test)
        : Derived() // Ensure "this" object is constructed.
    {
        Initialize(); // Call Pure Virtual Method.
    }
    Derived()
        : Base()
    {
        // Effectively Instantiating the Base Class.
        // Then Instantiating This.
        // The the target constructor completes.
    }
};

/********************************************************************/
int main(int args, char* argv[])
{
    Derived d;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T07:18:14.533

通过更新，示例代码对我来说看起来不错，但需要注意的是，如果您创建了 Derived 的子类，则子类对 Do() 的覆盖不会被 Derived(const std::string &) 调用，而是 Derived ::Do() 仍然会被调用；这可能不是你想要的。特别是，当从 Derived(const std::string &) 构造函数调用 Initialize() 时，该对象仍然“仅”是 Derived 对象而不是 SubDerived 对象（因为构造代码的 SubDerived 层还没有还没有开始），这就是为什么会调用 Derived::Do() 而不是 SubDerived::Do()。

问：如果子类使用相同的委托模式来确保一切都以相同的方式实例化怎么办？

答：这主要是可行的，但前提是在调用 SubDerived::Do() 之前调用 Derived::Do() 是可以的。

特别是，假设您有类 SubDerived 与上面的 Derived 执行相同的操作。然后当调用代码这样做时：

```
SubDerived foo("Hello"); 
```

将发生以下调用序列：

```
Base()
Derived()
Derived(const std::string &)
  Base::Initialize()
    Derived::Do()
SubDerived()
SubDerived(const std::string &)
  Base::Initialize()
    SubDerived::Do() 
```

...所以是的， SubDerived::Do() 最终会被调用，但 Derived::Do() 也会被调用。这是否会成为问题取决于各种 Do() 方法的实际作用。

一些建议：从构造函数中调用虚方法通常不是最好的方法。您可能只想考虑在构造对象后简单地要求调用代码在对象上手动调用 Do()。调用代码需要做更多的工作，但优点是可以避免在对部分构造的对象进行虚拟方法调用时发挥作用的不太明显或不方便的语义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T07:17:50.913

在典型的单构造器继承场景中，在基础构造器中调用纯虚函数就是UB：

> `[C++11: 10.4/6]:`成员函数可以从抽象类的构造函数（或析构函数）中调用；对于从这样的构造函数（或析构函数）创建（或销毁）的对象，直接或间接地对纯虚函数进行虚调用（10.3）的效​​果是未定义的。

```
struct Base
{
   Base()
   {
      foo();  // UB
   }

   virtual void foo() = 0;
};

struct Derived : Base
{
   virtual void foo() {}
}; 
```

在委托的构造函数调用中进行这样的调用在这里没有例外，因为此时对象的更多派生部分仍未构造。

```
struct Base
{
   Base()
   {
      foo();  // still UB
   }

   Base(int) : Base() {};

   virtual void foo() = 0;
};

struct Derived : Base
{
   virtual void foo() {}
}; 
```

这是您引用的维基百科段落：

> 一旦任何构造函数完成执行，C++11 就会考虑构造一个对象。**由于将允许执行多个构造函数，这意味着每个委托构造函数都将在其自己类型的完全构造的对象上执行。派生类构造函数将在其基类中的所有委托完成后执行。**

关键是*第二个*加粗的句子，而不是第一个，因为快速浏览可能会误解。

***但是*，您发布的代码片段很好**，那是因为*派生*构造函数主体正在执行，而不是抽象类的构造函数，它已经完全构造。也就是说，你必须要求证明它是安全的这一事实应该表明这不是最有表现力或最直观的方法，我会尽量在你的设计中避免它。

# ios - 对不同的应用程序使用相同的 Bundle Identifier 进行测试会导致问题

> ID：14681353
> 
> 赞同：1
> 
> 时间：2013-02-04T06:18:23.013
> 
> 标签：ios, objective-c, cfbundleidentifier

我正在设备上测试应用程序，我使用了捆绑标识符“mycompany.app”，在选择了正确的代码签名后，我能够在设备（即我的 iPhone）上运行该应用程序。现在，在成功运行此应用程序后，我将其删除并使用相同的 bundleId 和配置来测试其他具有本地通知的应用程序。因此，只要生成本地通知，它就会开始在应用程序图标上显示徽章编号。现在我再次删除了此应用程序并尝试使用相同的捆绑包运行我以前的应用程序，但它在应用程序图标上显示徽章编号（即 1），即使我没有添加任何代码来显示此应用程序的徽章编号。如何去除这些徽章？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:40:30.533

嗨，请使用以下代码

*   (BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions

功能：-

```
[UIApplication sharedApplication].applicationIconBadgeNumber = 0; 
```

# android - 在 VIew.onDraw() 上使用视图的 drawingCache 来平滑滚动

> ID：14681359
> 
> 赞同：1
> 
> 时间：2013-02-04T06:18:45.057
> 
> 标签：android, view, scroll

我想实现一个具有平滑滚动功能的自定义视图。我读过[Android View.onDraw() 总是有一个干净的 Canvas](https://stackoverflow.com/questions/2423327/android-view-ondraw-always-has-a-clean-canvas)。通过构建离屏位图，甚至需要更多的时间来绘制离屏位图。因此，我想到了使用视图绘图缓存。

```
@Override
public void onDraw(Canvas canvas){
    long start = System.nanoTime(); 
    if(redrawAll){
        drawFullScreen(canvas);
        handler.post(new Runnable(){
            @Override
            public void run() {
                cachedBitmap = SampleView4.this.getDrawingCache();
            }                   
        });
    }
    else{
        if(cachedBitmap != null && !cachedBitmap.isRecycled()){
            canvas.drawBitmap(cachedBitmap ,scrollByX, scrollByY, p);
            drawPartOfScreen(canvas, scrollByX, scrollByY);
        }
        handler.post(new Runnable(){
            @Override
            public void run() {
                cachedBitmap = SampleView4.this.getDrawingCache();
            }                   
        });
    }
    Log.d(TAG, "drawTiles take: "+(System.nanoTime() - start) + " ns");     

} 
```

它可能有效，但有奇怪的行为。有时，缓存`Bitmap`后没有变化`onDraw()`，因此看起来很奇怪。

`drawFullScreen(canvas);`而且，主要问题是性能与每次视图滚动时调用并没有太大区别。

我在正确的轨道上吗？我已经在 Android 4 上开发，所以我打开了硬件加速。但是文档说该视图已缓存在硬件纹理中。我真的需要在硬件加速环境中绘制缓存吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-15T10:57:32.663

我认为当硬件加速开启时你不能依赖绘图缓存。根据有关 View.setDrawingCacheEnabled() 的文档：

“启用绘图缓存类似于关闭硬件加速时设置图层。打开硬件加速时，启用绘图缓存对渲染没有影响，因为系统使用了不同的加速机制，忽略了标志。如果你想要为视图使用位图，即使启用了硬件加速，请参阅 setLayerType(int, android.graphics.Paint) 了解有关如何启用软件和硬件层的信息。”

# ios - arc4random 方法减小按钮的大小

> ID：14681362
> 
> 赞同：1
> 
> 时间：2013-02-04T06:18:50.940
> 
> 标签：ios, ipad, cgrectmake

下面是我编写的一种响应震动的方法，以便按钮随机定位。

```
- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event {

    if (motion == UIEventSubtypeMotionShake)

    {
        for(int i=0;i<8;i++){
          CGAffineTransform angle = CGAffineTransformMakeRotation(arc4random());
          shieldButton[i].transform = angle;

          shieldButton[i].frame = CGRectMake(arc4random()%900, arc4random()%400, 140, 171);
        }
    }

} 
```

但是当我使用 arc4random 方法时，按钮的大小会减小。可能是什么原因 ...？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:24:37.633

这是来自Apple的文档

> 警告：如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

尝试设置界限。

# delphi - 将数据从 DLL 传递到应用程序的问题

> ID：14681364
> 
> 赞同：4
> 
> 时间：2013-02-04T06:19:08.947
> 
> 标签：delphi, dll, binary

我对如何在我的场景中正确使用指针感到有点困惑。我有一个包含一些嵌入式资源的 DLL。我在这个 DLL 中公开了一个函数，它将其中一个资源的二进制数据传递回其调用应用程序。在这种情况下，我嵌入了一个 JPG 图像文件。我的 DLL 确实将文件正确加载到资源流中。但是，从那里将其传递回应用程序会变得混乱。

这是我的 DLL 代码（加载并命名为 JPG `SOMERESOURCE`）：

```
library ResDLL;

{$R *.dres}

uses
  System.SysUtils,
  System.Classes,
  Winapi.Windows;

{$R *.res}

function GetResource(const ResName: PChar; Buffer: Pointer;
  var Length: Integer): Bool; stdcall;
var
  S: TResourceStream;
  L: Integer;
  Data: array of Byte;
begin
  Result:= False;
  try
    S:= TResourceStream.Create(HInstance, UpperCase(ResName), RT_RCDATA);
    try
      S.Position:= 0;
      L:= S.Size;
      Length:= L;
      SetLength(Data, L);
      S.Read(Data[0], L);
      Buffer:= @Data[0];
      Result:= True;
    finally
      S.Free;
    end;
  except
    Result:= False;
  end;
end;

exports
  GetResource;

begin
end. 
```

这是我的应用程序代码（只有一个`TBitBtn`and `TImage`）：

```
function GetResource(const ResName: PChar; Buffer: Pointer;
  var Length: Integer): Bool; stdcall; external 'ResDLL.dll';

procedure TForm1.BitBtn1Click(Sender: TObject);
var
  Buffer: array of Byte;
  Size: Integer;
  S: TMemoryStream;
  P: TPicture;
begin
  if GetResource('SOMERESOURCE', @Buffer[0], Size) then begin
    S:= TMemoryStream.Create;
    try
      SetLength(Buffer, Size);
      S.Write(Buffer, Size);
      S.Position:= 0;
      P:= TPicture.Create;
      try
        P.Graphic.LoadFromStream(S);
        Image1.Picture.Assign(P);
      finally
        P.Free;
      end;
    finally
      S.Free;
    end;
  end else begin
    raise Exception.Create('Problem calling DLL');
  end;
end; 
```

看起来好像整个 DLL 调用是成功的，但是接收到的数据是空的（全是 0）。我对 like`Data`应该如何被称为 as `Data[0]`，在什么场景下应该使用，以及在什么场景下需要使用充满好奇`@Data`。我完全在 DLL 中编写了该代码，而且我不熟悉此类工作，所以我确定我在某个地方搞砸了。我哪里错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T06:54:37.113

在 DLL 方面，`GetResource()`将资源数据读取到本地数组中，而不是将其复制到传递给函数的缓冲区中。将本地数组分配给`Buffer`指针不会复制所指向的数据。

在应用程序端，`BitBtn1Click()`没有分配任何内存`GetResource()`来写入资源数据。即使是这样，您也没有将缓冲区`TMemoryStream`正确写入。即使你是，你也没有`TMemoryStream`正确加载`TPicture`。

您可以采取几种方法来解决缓冲区问题：

1）`GetResource()`分配一个缓冲区并将其返回给应用程序，然后让应用程序在完成后将缓冲区传递回DLL以释放它：

```
library ResDLL;

{$R *.dres}

uses
  System.SysUtils,
  System.Classes,
  Winapi.Windows;

{$R *.res}

function GetResourceData(const ResName: PChar; var Buffer: Pointer;
  var Length: Integer): Bool; stdcall;
var
  S: TResourceStream;
  L: Integer;
  Data: Pointer;
begin
  Result := False;
  try
    S := TResourceStream.Create(HInstance, UpperCase(ResName), RT_RCDATA);
    try
      L := S.Size;
      GetMem(Data, L);
      try
        S.ReadBuffer(Data^, L);
        Buffer := Data;
        Length := L;
      except
        FreeMem(Data);
        raise;
      end;
      Result := True;
    finally
      S.Free;
    end;
  except
  end;
end;

procedure FreeResourceData(Buffer: Pointer); stdcall;
begin
  try
    FreeMem(Buffer);
  except
  end;
end;

exports
  GetResourceData,
  FreeBufferData;

begin
end. 
```

.

```
unit uMain;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ExtCtrls;

type
  TForm1 = class(TForm)
    BitBtn1: TBitBtn;
    Image1: TImage;
    procedure BitBtn1Click(Sender: TObject);
  private
  public
  end;

var
  Form1: TForm1;

implementation

uses
  Vcl.Imaging.jpeg;

{$R *.dfm}

function GetResourceData(const ResName: PChar; var Buffer: Pointer;
  var Length: Integer): Bool; stdcall; external 'ResDLL.dll';

procedure FreeResourceData(Buffer: Pointer); stdcall; external 'ResDLL.dll';

procedure TForm1.BitBtn1Click(Sender: TObject);
var
  Buffer: Pointer;
  Size: Integer;
  S: TMemoryStream;
  JPG: TJPEGImage;
begin
  if GetResourceData('SOMERESOURCE', Buffer, Size) then
  begin
    try
      S := TMemoryStream.Create;
      try
        S.WriteBuffer(Buffer^, Size);
        S.Position := 0;
        JPG := TJPEGImage.Create;
        try
          JPG.LoadFromStream(S);
          Image1.Picture.Assign(JPG);
        finally
          JPG.Free;
        end;
      finally
        S.Free;
      end;
    finally
      FreeResourceData(Buffer);
    end;
  end else begin
    raise Exception.Create('Problem calling DLL');
  end;
end;

end. 
```

2) 让应用程序向 DLL 查询资源的大小，然后分配一个缓冲区并将其传递给 DLL 以填充：

```
library ResDLL;

{$R *.dres}

uses
  System.SysUtils,
  System.Classes,
  Winapi.Windows;

{$R *.res}

function GetResourceData(const ResName: PChar; Buffer: Pointer;
  var Length: Integer): Bool; stdcall;
var
  S: TResourceStream;
  L: Integer;
  Data: Pointer;
begin
  Result := False;
  try
    S := TResourceStream.Create(HInstance, UpperCase(ResName), RT_RCDATA);
    try
      L := S.Size;
      if Buffer <> nil then
      begin
        if Length < L then Exit;
        S.ReadBuffer(Buffer^, L);
      end;
      Length := L;
      Result := True;
    finally
      S.Free;
    end;
  except
  end;
end;

exports
  GetResourceData;

begin
end. 
```

.

```
unit uMain;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ExtCtrls;

type
  TForm1 = class(TForm)
    BitBtn1: TBitBtn;
    Image1: TImage;
    procedure BitBtn1Click(Sender: TObject);
  private
  public
  end;

var
  Form1: TForm1;

implementation

uses
  Vcl.Imaging.jpeg;

{$R *.dfm}

function GetResourceData(const ResName: PChar; Buffer: Pointer;
  var Length: Integer): Bool; stdcall; external 'ResDLL.dll';

procedure TForm1.BitBtn1Click(Sender: TObject);
var
  Buffer: array of Byte;
  Size: Integer;
  S: TMemoryStream;
  JPG: TJPEGImage;
begin
  if GetResourceData('SOMERESOURCE', nil, Size) then
  begin
    SetLength(Buffer, Size);
    if GetResourceData('SOMERESOURCE', @Buffer[0], Size) then
    begin
      S := TMemoryStream.Create;
      try
        S.WriteBuffer(Buffer[0], Size);
        S.Position := 0;
        // alternatively, use TBytesStream, or a custom
        // TCustomMemoryStream derived class, to read
        // from the original Buffer directly so it does
        // not have to be copied in memory...

        JPG := TJPEGImage.Create;
        try
          JPG.LoadFromStream(S);
          Image1.Picture.Assign(JPG);
        finally
          JPG.Free;
        end;
      finally
        S.Free;
      end;
      Exit;
    end;
  end;
  raise Exception.Create('Problem calling DLL');
end;

end. 
```

或者：

```
library ResDLL;

{$R *.dres}

uses
  System.SysUtils,
  System.Classes,
  Winapi.Windows;

{$R *.res}

function GetResourceData(const ResName: PChar; Buffer: Pointer;
  var Length: Integer): Bool; stdcall;
var
  S: TResourceStream;
  L: Integer;
  Data: Pointer;
begin
  Result := False;
  if (Buffer = nil) or (Length <= 0) then Exit;
  try
    S := TResourceStream.Create(HInstance, UpperCase(ResName), RT_RCDATA);
    try
      L := S.Size;
      if Length < L then Exit;
      S.ReadBuffer(Buffer^, L);
      Length := L;
      Result := True;
    finally
      S.Free;
    end;
  except
  end;
end;

function GetResourceSize(const ResName: PChar): Integer; stdcall;
var
  S: TResourceStream;
begin
  Result := 0;
  try
    S := TResourceStream.Create(HInstance, UpperCase(ResName), RT_RCDATA);
    try
      Result := S.Size;
    finally
      S.Free;
    end;
  except
  end;
end;

exports
  GetResourceData,
  GetResourceSize;

begin
end. 
```

.

```
unit uMain;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.Buttons, Vcl.ExtCtrls;

type
  TForm1 = class(TForm)
    BitBtn1: TBitBtn;
    Image1: TImage;
    procedure BitBtn1Click(Sender: TObject);
  private
  public
  end;

var
  Form1: TForm1;

implementation

uses
  Vcl.Imaging.jpeg;

{$R *.dfm}

function GetResourceData(const ResName: PChar; Buffer: Pointer;
  var Length: Integer): Bool; stdcall; external 'ResDLL.dll';

function GetResourceSize(const ResName: PChar): Integer; stdcall; external 'ResDLL.dll';

procedure TForm1.BitBtn1Click(Sender: TObject);
var
  Buffer: array of Byte;
  Size: Integer;
  S: TMemoryStream;
  JPG: TJPEGImage;
begin
  Size := GetResourceSize('SOMERESOURCE');
  id Size > 0 then
  begin
    SetLength(Buffer, Size);
    if GetResourceData('SOMERESOURCE', @Buffer[0], Size) then
    begin
      S := TMemoryStream.Create;
      try
        S.WriteBuffer(Buffer[0], Size);
        S.Position := 0;
        JPG := TJPEGImage.Create;
        try
          JPG.LoadFromStream(S);
          Image1.Picture.Assign(JPG);
        finally
          JPG.Free;
        end;
      finally
        S.Free;
      end;
      Exit;
    end;
  end;
  raise Exception.Create('Problem calling DLL');
end;

end. 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T09:05:00.633

您根本不需要从 DLL 中导出任何函数。您可以直接从主机可执行文件中使用 DLL 的模块句柄。

您已经将模块句柄传递给资源流构造函数。您正在传递可执行文件的模块句柄。相反，传递库的模块句柄。

```
var
  hMod: HMODULE;
....
hMod := LoadLibrary('ResDLL');
try
  S:= TResourceStream.Create(hMod, ...);
  ....
finally
  FreeLibrary(hMod);
end; 
```

如果您不想调用 DLL 中的任何函数，如果它是仅资源 DLL，则使用`LoadLibraryEx`and`LOAD_LIBRARY_AS_IMAGE_RESOURCE`代替：

```
hMod := LoadLibraryEx('ResDLL', 0, LOAD_LIBRARY_AS_IMAGE_RESOURCE); 
```

也许您知道 DLL 已经加载。例如，它隐式链接到您的可执行文件。在这种情况下，您可以更简单地使用`GetModuleHandle`而不是`LoadLibrary`or `LoadLibraryEx`。

```
hMod := GetModuleHandle('ResDLL');
S:= TResourceStream.Create(hMod, ...); 
```

请注意，为了简单说明，我省略了所有错误检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T07:56:41.427

将流从 DLL 传递到应用程序的另一种方法是使用接口流。

```
implementation
uses MemoryStream_Interface;
{$R *.dfm}

Type
TGetStream = Procedure(var iStream:IDelphiStream);stdcall;

procedure TForm1.Button1Click(Sender: TObject);
var
 h:THandle;
 p:TGetStream;
 ms :IDelphiStream;
 j:TJpegImage;
begin
   ms := TInterfacedMemoryStream.Create;
   h := LoadLibrary('ShowStream.dll');
   if h <> 0 then
      try
      @p := GetProcAddress(h,'GetJpegStream');
      p(ms);
      ms.Position := 0;
      j := TJpegImage.create;
      Image1.Picture.Assign(j);
      j.Free;
      Image1.Picture.Graphic.LoadFromStream(TInterfacedMemoryStream(ms));
      finally
      FreeLibrary(h);
      end;
end; 
```

IDelphiStream 的代码可以[在 http://www.delphipraxis.net 上找到](http://www.delphipraxis.net/142018-plugins-datenaustausch-zwischen-dll-und-hauptprogramm.html)。
我不会将 MemoryStream_Interface 的内容复制到这篇文章中，因为上述页面的代码中没有版权信息。

# javascript - 为什么我总是从 Chrome 收到“Uncaught SyntaxError: Unexpected token u”？

> ID：14681366
> 
> 赞同：15
> 
> 时间：2013-02-04T06:19:11.683
> 
> 标签：javascript, json

我花了一整天的时间在谷歌上搜索并寻找答案，但仍然无法弄清楚。

我的代码有点长，它在 Firefox 中运行良好，但从 Chrome 中得到“Uncaught SyntaxError: Unexpected token u”。

谁能指出我错在哪里？提前致谢！

```
// when the page loads, list all the current contacts
$(document).ready(function(){

    // check if localStorage database exists
    if(!localStorage.getItem("customerDatabase")){

        // define a JSON object to hold all current address
        var contacts = {
            "users":[
                {
                    "id":"1",
                    "name":"dennis",
                    "email":"dennisboys@gmail.com"
                },
                {
                    "id":"2",
                    "name":"zoe",
                    "email":"zoeisfemale@gmail.com"             
                }
            ]   
        } // end of contacts JSON object

        // stringify the object 
        var stringObject = JSON.stringify(contacts);                

        // store it into localStorage database
        var storedDatabase = localStorage.setItem("customerDatabase", stringObject);                                            

    } else {
        // list all customers upon page loads
        listJSONCustomers();        
    }   

    // list all current contacts from JSON object in localStorage
    function listJSONCustomers(){

      var displayHTML = "";
      var i;

      // get the data from localStorage
      var storedDatabase = localStorage.getItem("customerDatabase");

      // parse the data from string to JSON object
      var parseObject = JSON.parse(storedDatabase); 

      // access the users key of the JSON object
      var userObject = parseObject.users;

      // get the length of the object (how many customers the database has)
      var contactsLength = userObject.length;     

      for(i=0; i<contactsLength; i++){
          var trElement = '<tr id="address' + (i+1) + '">';
          var tdId = '<td id="id' + (i+1) + '">' + userObject[i].id + '</td>';
          var tdName = '<td id="name' + (i+1) + '">' + userObject[i].name + '</td>';
          var tdEmail = '<td id="email' + (i+1) + '">' + userObject[i].email + '</td>';
          var tdButton = '<td id="button"><button id="editButton' + userObject[i].id + '">Edit</button> | <button id="deleteButton' + userObject[i].id + '">Delete</button></td>';

          displayHTML += trElement + tdId + tdName + tdEmail + tdButton + '</tr>';
      }     

      $('#address_list').html(displayHTML);           
    }       

    // add customer to database  
    $('#saveCustomer').click(function(){

       if( $('#customerName').val() !== "" && $('#customerEmail').val() !== "" ){

           var customerName = $('#customerName').val();
           var customerEmail = $('#customerEmail').val();

           // get the data from localStorage
           var storedDatabase = localStorage.getItem("customerDatabase");

           // parse the data from string to JSON object
           var parseObject = JSON.parse(storedDatabase);    

           // access the users key of the JSON object
           var userObject = parseObject.users;     

           // get the new entry
           var newCustomerObject = {
                                  "id": userObject.length + 1,
                                  "name": customerName,
                                  "email": customerEmail
                                  };

           // push the new entry into the object                                                            
           userObject.push(newCustomerObject);

           // convert the object into string for localStorage
           var stringObject = JSON.stringify(parseObject);         

           // store the JSON object into localStorage
           var storedDatabase = localStorage.setItem("customerDatabase", stringObject);

           // list all customes again every time a database receives a new entry
           listJSONCustomers();     

       } else {
          alert("Please enter customer's name and email.");  
       }

    }); // end of $('#saveCustomer').click();

}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-04T07:03:26.190

在某些时候，您所做的某事破坏了该键的 LocalStorage 的值。LocalStorage 只能存储字符串，因此如果您向其传递任何其他内容，它会将其转换为字符串。由于您的值是`'undefined'`，这意味着在某些时候，您可能会意外地做了这样的事情：

```
var value;
localStorage.setItem('key', value); 
```

在这种情况下，`value`is `undefined`，它不是一个字符串。当它被保存时，它将被转换。不幸的是，`"undefined"`不是有效的 JSON。这意味着当它试图解析时，它会抛出一个异常。

要解决您的问题，您应该使用`removeItem`.

```
localStorage.removeItem("customerDatabase"); 
```

# tumblr - Tumblr 阅读更多在同一页面上展开

> ID：14681372
> 
> 赞同：0
> 
> 时间：2013-02-04T06:19:56.473
> 
> 标签：tumblr, expand

我正在开发一个 Tumblr 网站。当用户点击“阅读更多”时，内容在同一页面上显示和展开，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T16:37:56.247

由于 Tumblr 正在重新设计 UI 以进行编辑，因此阅读更多工具可能已对您隐藏。重置您的偏好以使用富文本编辑器来编辑帖子。阅读更多工具位于项目符号列表工具和图像工具之间。请参阅屏幕截图。

![在此处输入图像描述](../Images/1dbe61117802eca747cf49b7e4376344.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-25T02:21:55.900

好的，这是一个简单的脚本，但它可以工作。将此代码添加到您的主题之前的标签（或应该是）：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<script type="text/javascript">
    $(document).ready(function(){
     $('.spa').click(function(){
      $(this).parent().children('div.spb').toggle('normal');
      return false;
     });
    });
    </script>

<style type="text/css">
.spb{display:none;}
.spa{cursor:pointer;display:block;} 
.spa:after{display:block;content: "{lang:Read more}";margin-bottom:10px;} 
</style>
```

现在，当您编写新文本时，将这些内容添加到其中。

```
 Text before Spoiler
    <a href="" class="spa"></a>
     <div class="spb">
    Text after Spoiler
     </div>
```

# php - 我无法使用 jQuery Ajax 打印“：”

> ID：14681374
> 
> 赞同：0
> 
> 时间：2013-02-04T06:20:13.623
> 
> 标签：php, jquery

每当我尝试打印包含`:`符号的内容时，jQuery 都会触发错误

`Uncaught Error: Syntax error, unrecognized expression: :`

当我尝试打印时间时，例如`09:00`，它会触发

`Uncaught Error: Syntax error, unrecognized expression: unsupported pseudo: 00`

为什么会发生？我的 Ajax 调用是

```
jQuery("#_dob").change(function() {
                    jQuery.ajax({
                        url: "<?php echo $this->getUrl('deliverybydatepro/index/index') ?>",
                        data: "checkIn="+jQuery(this).val()+"&type=calendar",
                        type: "GET",
                        dataType: "html",
                        success: function(data) {
                           var $response=jQuery(data);
                           jQuery("#div1").html(data);
                        }
                    });
    }); 
```

在第二页中，如果我回显某些内容`:`，我会收到上述错误。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:50:06.403

你为什么这样写`var $response=jQuery(data)`；? 如果您的回复是 09:00，那就是`jQuery("09:00")`。会有问题。

我认为，`var $response=jQuery(data);`不是必需的。

你的代码应该是

```
success: function(data) {
    jQuery("#div1").html(data);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:34:38.360

我认为您的获取请求有问题，请尝试使用 post

```
jQuery.ajax({
          type: 'POST',
          url: '<?php echo get_admin_url() ?>admin-ajax.php',
          data: {  
              action: 'connection'
          }, 
```

# c++ - 当没有可用的目的地时，UDP 套接字的 WSASend 触发 FD_READ

> ID：14681378
> 
> 赞同：0
> 
> 时间：2013-02-04T06:20:40.073
> 
> 标签：c++, mfc, network-programming, winsock2

我正在为 UDP 套接字类编写 C++ 代码来处理基本操作（例如连接、发送和接收数据）。我尝试将网络事件机制与 WSAEventSelect 一起用于与套接字关联的这些基本操作。当我使用 WSASend 将数据发送到接收数据的（UDP）目的地时，一切顺利。但是，当我使用 WSASend 将数据发送到不存在 (UDP) 或无法通过网络访问的目的地时，我触发了 FD_READ 事件。这当然会导致严重的问题，因为没有实际数据要接收！

我无法解释为什么会发生这种情况 - 有什么想法吗？
也许我做错了什么，这是我的代码的相关部分：

```
WSADATA m_wsaData ;         
SOCKET  m_Socket ;          
WSAEVENT    m_SocketEvent ;

if(WSAStartup(MAKEWORD(2,2), &m_wsaData) != 0)
{
// some error
}

// Create a new socket to receive datagrams on
struct addrinfo hints, *res = NULL ;
int rc ;
memset(&hints, 0, sizeof(hints)) ;
hints.ai_family = AF_UNSPEC ;
hints.ai_socktype = SOCK_DGRAM ;
hints.ai_protocol = IPPROTO_UDP ;

rc = getaddrinfo("SomePC", "3030", &hints, &res) ;

if(rc == WSANO_DATA)
{
    // some error
}

if ((m_Socket = WSASocket(res->ai_family, res->ai_socktype, res->ai_protocol, NULL, 0, 0)) == INVALID_SOCKET)
{
    // some error
} 

// create event and associate it with the socket
m_SocketEvent = WSACreateEvent() ;
if(m_SocketEvent == WSA_INVALID_EVENT)
{
    // some error
}
// associate only the following events: close, read, write
if(SOCKET_ERROR == WSAEventSelect(m_Socket, m_SocketEvent, FD_CLOSE+FD_READ+FD_WRITE))
{
    // some error
}

// connect to a server
int ConnectRet = WSAConnect(m_Socket, (SOCKADDR*)res->ai_addr, res->ai_addrlen, NULL, NULL, NULL, NULL) ;
if(ConnectRet == SOCKET_ERROR)
{
    // some error
} 
```

然后，每当我尝试通过套接字将一些数据发送到未侦听或无法访问的（UDP 套接字）目的地时，我总是会触发 FD_READ：

```
char buf[32] ;  // some data to send...
WSABUF DataBuf;
DataBuf.len = 32;
DataBuf.buf = (char*)&buf;

DWORD NumBytesActualSent ;

if( SOCKET_ERROR == WSASend(m_Socket, &DataBuf, 1, &NumBytesActualSent,0,0,0))
{
    if(WSAGetLastError() == WSAEWOULDBLOCK) // non-blocking socket - wait for send ok ?
    {
        // handle WSAEWOULDBLOCK...
    }
    else
    {
        // some error
        return ;
    }
}

int ret = WSAWaitForMultipleEvents(1, &m_SocketEvent, FALSE, INFINITE, FALSE) ;

if(ret == WAIT_OBJECT_0)
{
    WSANETWORKEVENTS NetworkEvents ;
    ZeroMemory(&NetworkEvents, sizeof(NetworkEvents)) ;
    if(SOCKET_ERROR == WSAEnumNetworkEvents(m_Socket, m_SocketEvent, &NetworkEvents))
    {
        return ; // some error
    }
    if(NetworkEvents.lNetworkEvents & FD_READ)  // Read ?
    {
        if(NetworkEvents.iErrorCode[FD_READ_BIT] != 0)  // read not ok ?
        {
            // some error
        }
        else
        {
            TRACE("Read Event Triggered ! - Why ? ? ? ? ? ? ?\n") ;
        }
    }
} 
```

任何帮助或见解将是最appriciated！谢谢，阿米特 C。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:40:04.857

检查实际情况的最简单方法是使用[Wireshark](http://www.wireshark.org/)捕获数据包。我附近没有 Windows PC 可以为您提供完整的示例，但我猜这是正常行为 - 您尝试发送 UDP 数据报，它被路由器丢弃（找不到主机）或被服务器拒绝（套接字关闭）; 发回 ICMP 消息以通知您有关失败的信息，这是您收到并获取事件的原因。由于没有实际的用户数据，底层堆栈会转换 ICMP 消息并通过*WSARecv()*返回码为您提供适当的错误消息。“假”FD_READ 事件是必要的，因为 UDP 是无连接协议，并且没有其他方法可以通知网络状态。*只需为WSARecv()*添加错误处理*并且您的代码应该可以正常工作。*

# android - 如何在安卓设备上安装一个没有人可以从设置中删除的应用程序

> ID：14681383
> 
> 赞同：-4
> 
> 时间：2013-02-04T06:21:03.897
> 
> 标签：android

> **可能重复：**
> [是否可以阻止用户在 Android 中卸载应用程序？](https://stackoverflow.com/questions/8178982/is-it-possible-to-prevent-user-from-uninstalling-application-in-android)

提前感谢您关注这个问题......！

这是否可以安装一个`application`没有人可以的`uninstall`。我只是说去

```
setting --> Apps --> Manage Applications --> by selecting an app and click on UnInstall. 
```

我想要那个如果我`application`在设备中安装一个，那么没有人能`uninstall`做到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:07:05.647

是的，这是可能的。您只需要编写/修改您自己的自定义 rom。如果您在大型公司/组织中。您的公司/组织可能希望为其员工的公司拥有的电话拥有自己的 rom。

或者，如果您在消费者领域，另一种选择是说服手机运营商将您的应用设为默认应用（并防止用户卸载它）。这不是技术挑战。这只是一个商业的。准备好付给他们很多钱，让你默认安装在他们的手机上。

并为您在 Google Play/Market 中的评级出现严重反弹做好准备。两年前，我对手机上有 NASCAR 应用程序感到非常沮丧，我无法卸载（尽管我对 NASCAR 不太关心），当然，我不是唯一一个。该应用程序的评级因此下降到 1 星，并引起了对 NASCAR 的许多恶意。

# linux - 有什么方法可以在模式匹配后在 sed 中增加一些数字

> ID：14681386
> 
> 赞同：0
> 
> 时间：2013-02-04T06:21:07.653
> 
> 标签：linux, sed

有什么方法可以在模式匹配后在 sed 中增加一些数字

假设我有这个文件

```
201 AD BBH NN
376 AD HGH JU 
```

我想匹配起始整数，然后将数字 5 添加到它`sed`

这可能吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:23:30.213

您可能最好使用更高级的工具，例如`awk`：

```
pax$ cat qq.in
201 AD BBH NN
376 AD HGH JU

pax$ awk '{ print $0 " " $1+5 }' qq.in
201 AD BBH NN 206
376 AD HGH JU 381 
```

如果你真的*必须*在`sed`那个时候做，是的，它可以做到。但它的屁股丑陋。请参阅[此处](http://www.gnu.org/software/sed/manual/html_node/Increment-a-number.html)了解操作方法：

```
#!/usr/bin/sed -f
/[^0-9]/ d
# replace all leading 9s by _ (any other character except digits, could
# be used)
:d
s/9\(_*\)$/_\1/
td

# incr last digit only.  The first line adds a most-significant
# digit of 1 if we have to add a digit.
#
# The tn commands are not necessary, but make the thing
# faster

s/^\(_*\)$/1\1/; tn
s/8\(_*\)$/9\1/; tn
s/7\(_*\)$/8\1/; tn
s/6\(_*\)$/7\1/; tn
s/5\(_*\)$/6\1/; tn
s/4\(_*\)$/5\1/; tn
s/3\(_*\)$/4\1/; tn
s/2\(_*\)$/3\1/; tn
s/1\(_*\)$/2\1/; tn
s/0\(_*\)$/1\1/; tn

:n
y/_/0/ 
```

这个特殊的脚本将一个数字加 1，你现在可以（希望）理解我为什么称它为丑陋的。尝试这样做`sed`类似于试图用金鱼砍倒一棵卡里树。

您应该使用正确的工具来完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:24:11.120

用 awk 你可以试试

```
cat fileName | awk '{num = 0; if ($1 ~ /[0-9][0-9][0-9]/) num = $1 + 5; print num $1 $2 $3;}' 
```

# google-bigquery - 上传操作期间出现 BigQuery 后端错误

> ID：14681390
> 
> 赞同：0
> 
> 时间：2013-02-04T06:21:34.167
> 
> 标签：google-bigquery

我想知道在上传机制期间 Big Query 服务器端可能出现的错误是什么，尽管我上传的 .CSV 文件包含完美的数据。你能列出这些错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T17:44:49.353

一些常见的错误是：

*   文件必须以 UTF-8 格式编码。
*   源数据必须在 CSV 和 JSON 的标准准则内正确转义。
*   记录的结构和其中的数据必须与提供的模式相匹配。
*   单个文件必须低于我们的 [配额/限制页面](https://developers.google.com/bigquery/docs/quota-policy)上列出的大小限制。

有关[BigQuery 源数据格式](https://developers.google.com/bigquery/docs/import#csvformat)的更多信息。查看我们的[数据加载食谱](https://developers.google.com/bigquery/articles/ingestioncookbook)以获取更多提示。

# bash - shell 创建新目录并检查它是否存在

> ID：14681391
> 
> 赞同：0
> 
> 时间：2013-02-04T06:21:46.737
> 
> 标签：bash, shell

该文件有很多行，每行包含

int 文件夹名称 文件路径 文件路径 文件路径

例如。

```
1001    AS35_59328      RICwdsRSYHSD11-2-IPAAPEK-93     /ifshk5/BC_IP/PROJECT/T1
1073/T11073_RICekkR/Fq/AS35_59328/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IP
AAPEK-93_1.fq.gz        /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS35_5932
8/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz  
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS35_5932
8/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-9322121_2.fq.gz 
```

那么如何获取文件夹名称（ AS35_59328 ）并在未创建文件夹时创建文件夹。

获取行第二段AS35_59328，如果AS35_59328已经存在，则将该行中的所有文件放入文件夹，否则创建AS35_59328文件夹然后放入文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:17:48.183

```
$ cat stack.txt 
1001    AS35_59328      RICwdsRSYHSD11-2-IPAAPEK-93     /ifshk5/BC_IP/PROJECT/T1
1073/T11073_RICekkR/Fq/AS35_59328/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IP
AAPEK-93_1.fq.gz        /ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS35_5932
8/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz  
/ifshk5/BC_IP/PROJECT/T11073/T11073_RICekkR/Fq/AS35_5932
8/111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-9322121_2.fq.gz

$for j in $(for i in `cat stack.txt | tr '\n' '\0' | grep -a -o '/.*gz'`; do echo $i ;     done | awk -F\/ '{ print $NF }'); do echo $j ; done
111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_1.fq.gz
111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-93_2.fq.gz
111220_I631_FCC0E5EACXX_L4_RICwdsRSYHSD11-2-IPAAPEK-9322121_2.fq.g 
```

**最终单线：**

这一行将帮助您获取所有文件名，然后它将所有这些获取的文件名复制到`AS35_59328`. 如果`AS35_59328`不存在，它将创建这样一个目录，然后将所有这些文件放入其中。

```
if [ -d "AS35_59328"]; then for j in $(for i in `cat stack.txt | tr '\n' '\0' | grep -a -o '/.*gz'`; do echo $i ; done | awk -F\/ '{ print $NF }'); do cp -v $j AS35_59328/ ; done ; else for j in $(for i in `cat stack.txt | tr '\n' '\0' | grep -a -o '/.*gz'`; do echo $i ; done | awk -F\/ '{ print $NF }'); do mkdir AS35_59328 && cp -v $j AS35_59328/ ; fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:21:49.133

另一个纯粹的shell解决方案：

```
while read line; do
  set $line
  key=$1; shift
  dir=$1; shift
  test -d $dir || mkdir $dir
  mv $@ $dir
done < myfile.txt

    bll-laptop:bll$ cat t.sh
    #!/bin/bash

    cat > myfile.txt << _HERE_
    1001 d1 a b c
    1002 d2 d e f
    1003 d3 g h i
    _HERE_

    touch a b c d e f g h i
    rm -rf d1 d2 d2 > /dev/null 2>&1
    mkdir d1

    while read line; do
      set $line
      key=$1; shift
      dir=$1; shift
      test -d $dir || mkdir $dir
      mv $@ $dir
    done < myfile.txt

    ls -R

    bll-laptop:bll$ ./t.sh
    .:
    d1  d2  d3  myfile.txt  t.sh

    ./d1:
    a  b  c

    ./d2:
    d  e  f

    ./d3:
    g  h  i
    bll-laptop:bll$ 
```

# ajax - 如何在不重新加载页面的情况下按多个条件过滤列表？

> ID：14681402
> 
> 赞同：0
> 
> 时间：2013-02-04T06:23:36.330
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4, filter, asp.net-ajax

我有产品列表，我应该按多个标准过滤产品。在一个页面中，我在不同的元素中有多个标准（名称、价格、创建日期等）：文本框、下拉列表等。我想在不重新加载页面的情况下搜索产品。当我更改任何标准时，产品列表会自动更新，无需重新加载页面。像这样：[过滤用户。](http://www.freelancer.com/d/skills/all/)

这是我的看法：

```
@model IEnumerable<Product>
    <section id="sidebar left">
       <div class="form_info">
           <label>Category</label>
           @Html.DropDownListFor(model => model.CategoryId, ViewBag.CategoryList as IEnumerable<SelectListItem>, "-", new { id = "ProductCategory" })
       </div>

       <div class="form_info">
            <label>Name</label>
            @Html.TextBoxFor(model => model.Name, new{ id = "ProductName"})
       </div>
    ...//other properties
    </section>

<section id="content" >
@foreach (var item in Model)
{
<a class="productStyle" href="@Url.Action("Details", "Product", new { id=item.Id})">@item.Name</a>
}
</section> 
```

我`FilterProductByCriteria(int CategoryId, int Name, double priceFrom, double PriceTo..etc)`在控制器中有动作。

我可以这样做：`onchange()`如果每个元素都将所有标准值发送到控制器并回调结果数据 - 过滤的产品列表，但我不能在`@foreach (var item in Model)`. 请帮助我或建议更好的方法。（抱歉英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:44:32.883

> 我可以这样做：在每个元素的 onchange() 事件中将所有标准值发送到控制器并回调结果数据 - 过滤的产品列表，但我不能使用返回的数据`@foreach (var item in Model)`

为什么不？你当然可以。作为替代方案，您可以将过滤条件输入放在 HTML 表单中，并提供一个提交按钮，该按钮会将值发送到控制器，该控制器将返回与过滤后的产品模型相同的视图。然后你可以通过引入 AJAX 来优化它。您可以将`<section id="content">`内容放入包含过滤结果的局部视图中。然后您可以使用 an`Ajax.BeginForm`而不是常规`Html.BeginForm`将过滤条件发送到控制器操作。反过来，此控制器操作将执行过滤并将过滤后的产品列表传递到相同的局部视图 ( `return PartialView()`)，然后该视图将用于仅刷新 DOM 的结果部分。

例如：

```
@model IEnumerable<Product>
@using (Ajax.BeginForm("Search", "SomeController", new AjaxOptions { UpdateTargetId = "content" }))
{
    <section id="sidebar left">
        <div class="form_info">
            @Html.LabelFor(model => model.CategoryId)
            @Html.DropDownListFor(
                model => model.CategoryId, 
                ViewBag.CategoryList as IEnumerable<SelectListItem>, 
                "-", 
                new { id = "ProductCategory" }
            )
        </div>

        <div class="form_info">
            @Html.LabelFor(model => model.Name)
            @Html.TextBoxFor(model => model.Name, new { id = "ProductName"})
        </div>
        ...//other properties
    </section>

    <button type="submit">Filter</button>
}

<section id="content">
    @Html.Partial("_Products", Model)
</section> 
```

然后您的控制器操作可能如下所示：

```
[HttpPost]
public ActionResult Search(SearchCriteriaViewModel model)
{
    IEnumerable<Product> filteredProducts = ... you know what to do here
    return PartialView("_Products", filteredProducts);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-11T09:49:54.233

请参考此链接在 ASP.Net GridView 中搜索而不刷新页面。

[ASP.NET GridView 搜索不刷新整个页面]

[http://www.ashishblog.com/search-sort-in-gridview-using-c-net-ajax-and-jquery/](http://www.ashishblog.com/search-sort-in-gridview-using-c-net-ajax-and-jquery/)

这是我的 aspx 页面，在 AJAX 更新面板中具有搜索文本框和网格视图。

```
<asp:ScriptManager ID="ScriptManager" runat="server" />
      Search: <asp:TextBox ID="txtSearch" runat="server" OnTextChanged="txtSearch_TextChanged"  />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server" >
        <ContentTemplate>

            <div class="GridviewDiv">

                 <asp:GridView ID="Gridview1" runat="server" AutoGenerateColumns="False" AllowPaging="True"
                    AllowSorting="true" DataSourceID="dsGridview" Width="540px" PageSize="10" CssClass="yui">
                    <Columns>
                        <asp:BoundField DataField="id" HeaderText="ID" SortExpression="id" ItemStyle-Width="40px"
                            ItemStyle-HorizontalAlign="Center" />
                        <asp:TemplateField HeaderText="First Name" SortExpression="FirstName">
                            <ItemStyle Width="120px" HorizontalAlign="Left" />
                            <ItemTemplate>
                                <asp:Label ID="lblFirstname" Text='<%# HighlightText(Eval("FirstName").ToString()) %>' runat="server"
                                    CssClass="TextField" />
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:TemplateField HeaderText="Last Name" SortExpression="LastName">
                            <ItemStyle Width="120px" HorizontalAlign="Left" />
                            <ItemTemplate>
                                <asp:Label ID="lblLastname" Text='<%# HighlightText(Eval("LastName").ToString()) %>' runat="server"
                                    CssClass="TextField" />
                            </ItemTemplate>
                        </asp:TemplateField>
                        <asp:BoundField DataField="Department" HeaderText="Department" SortExpression="Department"
                            ItemStyle-Width="130px" />
                        <asp:BoundField DataField="Location" HeaderText="Location" SortExpression="Location"
                            ItemStyle-Width="130px" />
                    </Columns>
                </asp:GridView>
                </div>
        </ContentTemplate>
         <Triggers>
                <asp:AsyncPostBackTrigger ControlID="txtSearch" EventName="TextChanged" />
            </Triggers>
    </asp:UpdatePanel> 
```

--> 这是我在页面加载事件中添加文件的代码。

```
 string SearchString = "";
    protected void Page_Load(object sender, EventArgs e)
    {
txtSearch.Attributes.Add("onkeyup", "setTimeout('__doPostBack(\\'" + txtSearch.ClientID.Replace("_", "$") + "\\',\\'\\')', 0);");
        if (!IsPostBack)
        {
            Gridview1.DataBind();
        }
    }
    protected void txtSearch_TextChanged(object sender, EventArgs e)
    {
         SearchString = txtSearch.Text;
    }
    public string HighlightText(string InputTxt)
    {
        string Search_Str = txtSearch.Text.ToString();
        // Setup the regular expression and add the Or operator.
        Regex RegExp = new Regex(Search_Str.Replace(" ", "|").Trim(), RegexOptions.IgnoreCase);
        // Highlight keywords by calling the 
        //delegate each time a keyword is found.
        return RegExp.Replace(InputTxt, new MatchEvaluator(ReplaceKeyWords));
        // Set the RegExp to null.
        RegExp = null;
    }
    public string ReplaceKeyWords(Match m)
    {
        return "<span class=highlight>" + m.Value + "</span>";
    } 
```

# javascript - Javascript异步函数调用：在回调函数中检索调用函数参数

> ID：14681404
> 
> 赞同：3
> 
> 时间：2013-02-04T06:23:45.893
> 
> 标签：javascript, google-maps

如何在 Javascript 回调函数中获取用户状态？就像我有一个 Javascript 函数进行异步调用，如下所示。现在在回调函数中我需要访问用户状态。我怎样才能做到这一点？在 Silverlight 中，我们有 userstate 之类的东西。我们在 Javascript 中是否也有相同的机制。请协助。

注意：我不想使用全局变量，因为 Func1() 将在 For 循环中执行。

```
 function Func1() {
       var userState = "someValue";
       geocoder.asyncCall(parameters , CallBack);
   }

   function CallBack(result) {

       // Use result
       // How to access userState in this function
   } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T06:25:47.490

试试这个代码：

```
function Func1() {
   var userState = "someValue";
   geocoder.asyncCall(parameters ,function(){ 
      CallBack(userState);
   });
}

function CallBack(result) {

   // Use result
   // How to access userState in this function
} 
```

**更新**

```
function PlotAddressOnMap(address) { 
   var address = address; 
   var userState="userState";
   geocoder.geocode({ 'address': address }, CityDetailsReceived(userState)); 
} 

function CityDetailsReceived(userState) {
   return function(results, status){
      //your code
   }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T06:28:58.360

```
function Func1() {
   var userState = "someValue";
   geocoder.asyncCall(parameters , CallBack(userState));
}

function CallBack(userState) {
   return function(result){
       // userState is accessible
   }
} 
```

# javascript - 修复了带有 ajax 刷新的表头

> ID：14681409
> 
> 赞同：-2
> 
> 时间：2013-02-04T06:24:13.490
> 
> 标签：javascript, jquery, ajax

使用 html 中的 ajax 刷新表格内容时，表格未排序。任何人都可以建议一种通过刷新表格内容来排序和修复表格标题的最佳方法。紧急请尽快重播，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:26:43.843

您可以将 thead 用于表头并在 tbody 中调用数据。

使用这个 ajax 代码：

```
$.ajax({
        type: "POST",
        url: 'example.xml',           // url from where you want to get data
        data: xml,                  // data form
        success: function (data) {
            $('tbody').append('<tr><td>'+data+'</td></tr>')'
        }
    }); 
```

在 ajax 调用之后，你可能会得到类似这样的 html 结构。

```
<table>
    <thead>
       <tr>
           <th></th>
       </tr>
    </thead>
    <tbody>
       <tr>
           <td></td>
       </tr>
       <tr>
           <td></td>
       </tr>
    </tbody>
</table> 
```

# c# - 从两个逗号分隔的参数作为输入更新表

> ID：14681422
> 
> 赞同：2
> 
> 时间：2013-02-04T06:25:00.417
> 
> 标签：c#, sql, sql-server, csv, sql-server-2008-r2

我在前端有一个 Gridview，其中 Grid 有两列：ID 和 Order，如下所示：

```
 ID        Order

 1           1
 2           2
 3           3
 4           4 
```

现在用户可以像在前端 Gridview 中一样更新订单：

```
ID        Order

 1           2
 2           4
 3           1
 4           3 
```

现在，如果用户单击保存按钮，则 ID 和订单数据将作为 @sID = (1,2,3,4) 和 @sOrder = (2,4,1,3) 发送到存储过程

现在，如果我想更新订单并进行保存，我想将其存储到数据库中。通过存储过程如何更新到表中，以便更新表，而选择它给我的结果如下：

```
ID        Order

 1           2
 2           4
 3           1
 4           3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:17:29.710

您可以使用[表值参数](http://msdn.microsoft.com/en-us/library/bb675163.aspx)来避免将分隔符分隔的值甚至 XML 发送到数据库。为此，您需要：

1.  在数据库中声明一个参数类型，如下所示：

    ```
    CREATE TYPE UpdateOrderType TABLE (ID int, Order int) 
    ```

2.  之后，您可以定义将参数用作的过程

    ```
    CREATE PROCEDURE UpdateOrder (@UpdateOrderValues UpdateOrderType readonly)
    AS
    BEGIN
      UPDATE t
        SET OrderID = tvp.Order
        FROM <YourTable> t
          INNER JOIN @UpdateOrderValues tvp ON t.ID=tvp.ID
    END 
    ```

    如您所见，与解析 XML 或分隔字符串相比，SQL 是微不足道的。

3.  使用 C# 中的参数：

    ```
    using (SqlCommand command = connection.CreateCommand()) {
      command.CommandText = "dbo.UpdateOrder";
      command.CommandType = CommandType.StoredProcedure;

      //create a table from your gridview data
      DataTable paramValue = CreateDataTable(orderedData) 
      SqlParameter parameter = command.Parameters
                                .AddWithValue("@UpdateOrderValues", paramValue );
      parameter.SqlDbType = SqlDbType.Structured;
      parameter.TypeName = "dbo.UpdateOrderType";

      command.ExecuteNonQuery();
    } 
    ```

    `CreateDataTable`类似的东西在哪里：

    ```
    //assuming the source data has ID and Order properties
    private static DataTable CreateDataTable(IEnumerable<OrderData> source) {
      DataTable table = new DataTable();
      table.Columns.Add("ID", typeof(int));
      table.Columns.Add("Order", typeof(int));
      foreach (OrderData data in source) {
          table.Rows.Add(data.ID, data.Order);
      }
      return table;
    } 
    ```

    [（从这个问题](https://stackoverflow.com/questions/5595353/how-to-pass-table-value-parameters-to-stored-procedure-from-net-code)中提取的代码）

正如您所见，这种方法（特定于 SQL-Server 2008 及更高版本）使得将结构化数据作为参数传递给过程变得更容易、更正式。更重要的是，您一直在使用类型安全，所以在字符串/xml 操作中往往会出现的许多解析错误都不是问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:01:37.577

没有内置函数来解析这些逗号分隔的字符串。但是，您可以使用 SQL Server 中的 XML 函数来执行此操作。就像是：

```
DECLARE @sID VARCHAR(100) = '1,2,3,4';
DECLARE @sOrder VARCHAR(10) = '2,4,1,3';

DECLARE @sIDASXml xml = CONVERT(xml,
                            '<root><s>' + 
                            REPLACE(@sID, ',', '</s><s>') + 
                            '</s></root>');

DECLARE @sOrderASXml xml = CONVERT(xml,
                        '<root><s>' + 
                        REPLACE(@sOrder, ',', '</s><s>') + 
                        '</s></root>');

;WITH ParsedIDs
AS
(
    SELECT ID = T.c.value('.','varchar(20)'),
    ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS RowNumber
    FROM @sIDASXml.nodes('/root/s') T(c)
), ParsedOrders
AS
(
    SELECT "Order" = T.c.value('.','varchar(20)'),
        ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS RowNumber
    FROM @sOrderASXml.nodes('/root/s') T(c)
)
UPDATE t
SET t."Order" = p."Order"
FROM @tableName AS t
INNER JOIN
(
   SELECT i.ID, p."Order"
   FROM ParsedOrders p 
   INNER JOIN ParsedIDs i ON p.RowNumber = i.RowNumber
) AS p ON t.ID = p.ID; 
```

[**现场演示**](https://data.stackexchange.com/stackoverflow/query/95177/update-a-table-from-two-comma-separated-parameter-as-input)

然后你可以把它放在一个存储过程或任何东西中。

**请注意：**您不需要手动执行所有这些操作，应该通过某种方式使该gridview通过数据绑定自动更新底层数据表。你应该寻找这样的东西，而不是所有这些痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:08:07.960

您可以使用 charindex 之类的

```
DECLARE @id VARCHAR(MAX)
DECLARE @order VARCHAR(MAX)

SET @id='1,2,3,4,'
SET @order='2,4,1,3,'

WHILE CHARINDEX(',',@id) > 0
BEGIN
DECLARE @tmpid VARCHAR(50)
SET @tmpid=SUBSTRING(@id,1,(charindex(',',@id)-1))
DECLARE @tmporder VARCHAR(50)
SET @tmporder=SUBSTRING(@order,1,(charindex(',',@order)-1))

UPDATE dbo.Test SET
[Order]=@tmporder
WHERE ID=convert(int,@tmpid)

SET @id = SUBSTRING(@id,charindex(',',@id)+1,len(@id))
SET @order=SUBSTRING(@order,charindex(',',@order)+1,len(@order))
END 
```

# layout - 平板电脑和手机网站布局设计——先做哪个？

> ID：14681423
> 
> 赞同：0
> 
> 时间：2013-02-04T06:25:00.457
> 
> 标签：layout, mobile, web, responsive-design, wireframe

我有一个项目需要开发一个可在智能手机和平板电脑设备上运行的移动网站。我已经阅读了很多关于移动设计、“移动优先”概念、响应式设计等的内容。我没有看到的一件事是关于工作流程的讨论，特别是在布局设计阶段。

我不确定的是我是否应该首先关注手机站点布局的线框模型，然后在手机布局完成后进行平板电脑布局？还是同时开发手机和平板电脑线框图更好？从长远来看，哪种方法问题较少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:58:18.390

这实际上取决于您之前做过多少这些以及您的设计师。

一些设计师需要先在桌面上工作，然后把所有东西都从那里拿下来，这正是让他们更有创造力的原因。

话虽如此，您最好先考虑使用移动设备。我看到很多响应式项目都遇到了将大型桌面内容区域线性化为平板电脑和移动布局的问题，同时仍然保持品牌认知度和设计之间的协同作用（是的，我使用了“协同作用”）。

如果您能够获得网站的真实内容，这将有所帮助，这样您就可以确切地知道自己在处理什么。使用[Bootstrap](http://twitter.github.com/bootstrap/)或[Foundation](http://foundation.zurb.com)之类的框架，用真实内容快速构建一些想法的原型，并进行测试，看看哪些有效，哪些无效。

在设计方面，尝试在模块中设计事物。查看[Style Tiles](http://styletil.es/)以获取有关如何使用该工作流程进行设计的提示。

最好的建议是做对你的团队有用的事情，无论如何你都会犯错误，所以即使你忽略了我所说的一切，也要记住它。使用真实的内容，尽早进行原型/测试，不要害怕经历几次迭代。

哦，最后，如果您确实采用桌面优先设计，`display: none;`那么以后的内容问题就不是一个合适的解决方案。

# html - css页面宽度增长以显示div

> ID：14681425
> 
> 赞同：0
> 
> 时间：2013-02-04T06:25:08.460
> 
> 标签：html, css

我试图让页面随着 div 变宽而变宽。我使用 C#、win forms 和 jquery。我在 div 中有一个转发器，每个转发器项都有一个 div，其宽度和高度设置为 100%。我将所有 div 设置为向左浮动。在 chrome 中，页面变得更宽，但在 ie7、8、9 和 FF 中，页面并没有变得更宽。目前，我们正在将我们的网站转移到使用 .less 的过程中。这样做的重要性在于页面具有设定的宽度。在我们的例子中，我们需要让页面变宽。

我已经研究过将 div 设置为显示内联块，但这会在 div 之间留下空白。通过给出负边距或 div 在标记中的排列方式，我已经看到了一些解决方法，但我不是真正的粉丝。

如果您使用以下参数转到 jsfiddle，我有一个示例。我在 mt 平板电脑上，由于某种原因，我无法添加链接。

/布拉德8118/7Wf2j/

```
<div id="outer">
<div class="inner">
</div>
<div class="inner">
</div>
<div class="inner">
</div>
</div>

#outer{
Height:30px;
Border: 1px solid black;
}

div{
Float: left;
}

.inner{
border: 1px solid red;
Background-color: green;
Width: 20px;
Height: 100%;
} 
```

内部 div 是由中继器创建的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:50:24.283

你可以试试这样的

jQuery 扩展：

```
(function ($) {
//calculates the total width of the elements selected
$.fn.sumWidth = function () {
    var sum = 0;
    this.each(function () {
        sum += $(this).width();

    });

    return sum;
}; 
```

})(jQuery);

那么你可以像这样使用它：

```
$(function(){$('#outer').width($('#outer .inner').sumWidth());}); 
```

然后，这会将外部 div 宽度设置为内部 div 宽度的总宽度

# php - 从mysql表数据添加html列表条目的简单方法

> ID：14681428
> 
> 赞同：0
> 
> 时间：2013-02-04T06:25:18.983
> 
> 标签：php, mysql, html5-video

我刚刚购买了一个很棒的小型 HTML5 视频播放器，但添加文件的方法是编辑页面的实际 html。

这很糟糕，所以我要做的是在页面加载时借助包含适当数据的 MySQL 表填充 UL。

此页面的列表如下所示：

```
 <ul id='playlist1' data-address="playlist1">
                 <li data-address="local1" class='playlistItem' data-type='local' data-mp4Path='data/media/video/big_buck_bunny_trailer.mp4' data-ogvPath='data/media/video/big_buck_bunny_trailer.ogv' data-imagePath='data/media/video/big_buck_bunny_trailer.jpg' data-thumbPath='data/media/thumb/big_buck_bunny_trailer.jpg' data-aspectRatio='2'></li>
                 <li data-address="local2" class='playlistItem' data-type='local' data-mp4Path='data/media/video/big_buck_bunny_trailer.mp4' data-ogvPath='data/media/video/big_buck_bunny_trailer.ogv' data-imagePath='data/media/video/big_buck_bunny_trailer.jpg' data-thumbPath='data/media/thumb/big_buck_bunny_trailer.jpg' data-aspectRatio='2'></li>
                 <li data-address="local3" class='playlistItem' data-type='local' data-mp4Path='data/media/video/big_buck_bunny_trailer.mp4' data-ogvPath='data/media/video/big_buck_bunny_trailer.ogv' data-imagePath='data/media/video/big_buck_bunny_trailer.jpg' data-thumbPath='data/media/thumb/big_buck_bunny_trailer.jpg' data-aspectRatio='2'></li>
              </ul> 
```

非常基本的清单。所以这可能是我似乎无法找到正确答案的基本事情。

我想“获取”我在这样读取的数据库表中的值（这些是列标题，数据将在下面的行中）：

```
 id | data-address | data-imagePath | data-thumbPath | data-mp4Path | data-ogvPath | data-webmPath | title | desc | ord 
```

我对 php 和 javascript 的了解正在增长，但调用 MySQL 表是我试图掌握的东西。

我在下面尝试的是在头脚本中声明以下变量：（取自[http://www.php.net/manual/en/function.mysql-fetch-object.php](http://www.php.net/manual/en/function.mysql-fetch-object.php)）

```
 $data-mp4Path = mysql_query("select * from mytable");
 while ($row = mysql_fetch_object($data-mp4Path)) {
   echo $row->data-mp4Path;
 }
 mysql_free_result($data-mp4Path); 
```

然后在适当的列表字段中调用 php，如下所示：

```
 data-mp4Path='<? $data-mp4Path ?>' 
```

但是，输出不会像我认为脚本应该存储到 $data-mp4Path 变量中那样解析表格单元格数据...

任何帮助将不胜感激！

**_ 更新 _**

在@peterm 的帮助下，我尝试使用随相应数据库字段和相应调用提供的代码。

这是浏览器输出的最终结果：

```
 <ul id="playlist1" data-address="playlist1">
                <!--?php
                $db = new PDO('mysql:host=localhost;dbname=wordpress;charset=UTF-8', 'root', 'root');
                $sql = "SELECT * FROM `wp_localTestinglbg_vp2_html5_rightside_videoplaylist`";
                foreach ($db--->query($sql) as $row) {
                    $li  = '<li data-address="local' .$row['id']. '" ';="" $li="" .=" class=&quot;playlistItem&quot; data-type=&quot;local&quot;" ;="" .$row['mp4'].="" '"';="" .$row['ogv'].="" .$row['data-imagepath'].="" .$row['data-thumbpath'].="" echo="" $li;="" }="" $db="null;" ?="">
                </li></ul> 
```

这个工作作为一个循环并将新的 LI 项目输出到播放列表的梦想会很棒，但它还没有工作。

__ 更新 __

清理代码后，UL标签之间的输出现在是空白的。输出如图所示：

```
 <ul id="playlist1">
                </ul> 
```

我删除了标签中的“data-address=playlist1”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:56:53.890

Your code to generate `<li>`'s using [`PDO`](http://php.net/pdo) instead of `mysql_*` might look like this

```
... your preceding html
<ul>
<?php
$db = new PDO('mysql:host=localhost;dbname=yourdb;charset=UTF-8', 'user', 'password');
$sql = "SELECT * FROM `mytable`";
foreach ($db->query($sql) as $row) {
    $li  = '<li data-address="' .$row['data-address']. '"';
    $li .= ' class="playlistItem" data-type="local"';
    $li .= ' data-mp4Path="' .$row['data-mp4Path']. '"';
    $li .= ' data-ogvPath="' .$row['data-ogvPath']. '"';
    $li .= ' data-imagePath="' .$row['data-imagePath']. '"';
    $li .= ' data-thumbPath="' .$row['data-thumbPath']. '"';
    $li .= ' data-aspectRatio="2"></li>';
    echo $li;
}
$db = null;
?>
</ul>
... your html continues here 
```

# caliper - 如何控制使用卡尺运行的确切测试次数

> ID：14681429
> 
> 赞同：2
> 
> 时间：2013-02-04T06:25:19.037
> 
> 标签：caliper

我试图理解，控制运行次数的正确方法是什么：是试验还是代表？令人困惑：我使用 --trial 1 运行基准测试并收到输出：

0% 场景{vm=java, trial=0, benchmark=SendPublisher} 1002183670.00 ns; Ï=315184.24 ns @ 3 次试验

看起来进行了 3 次试验。那是什么试炼？什么是代表？我可以使用选项--debug 和--debug-reps 来控制rep 值，但是运行w/o debug 时的值是多少？我需要知道我的测试方法被调用了多少次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:03:55.540

在 Caliper 0.5 和 1.0 之间，一些术语发生了变化，但这应该对两者都进行解释。请记住，0.5 中的情况有些模糊，因此对 1.0 所做的大部分更改都是为了使事情更清晰、更精确。

## 卡尺 0.5

Caliper 的单次调用是一次*run*。每次运行都有一些*试验*次数，这只是运行中执行的所有工作的另一次迭代。在每次试验中，Caliper 都会执行一些*场景*。场景是 VM、基准测试等的组合。场景的运行时间是通过计时执行一定数量的*reps*来衡量的，这是在运行时传递给您的基准测试方法的数量。当然，多次重复是必要的，因为在微基准测试中不可能获得单个调用的精确测量值。

## 卡尺 1.0

Caliper 1.0 遵循非常相似的模型。Caliper 的单次调用仍然是一次*运行*。每次运行都包含一定数量的*试验*，但试验更精确地定义为对使用*仪器*测量的*场景*的调用。

 *场景大致定义为您正在测量的内容（主机、VM、基准测试、参数），而仪器是执行测量的代码及其配置方式。这个想法是，如果一个完全可重复的基准是表单的函数，那么`f(x)=y`Caliper 将被定义为`instrument(scenario)=measurements`。

在运行时工具的执行中（其他工具类似），仍然有相同的 reps 概念，即传递给基准代码的迭代次数。您无法直接控制 rep 值，因为每个工具都会执行自己的计算以确定它应该是什么。

在运行时，Caliper 通过计算一些*实验*来计划其执行，这些实验是仪器、基准、VM 和参数的组合。每个实验都会运行`--trials`多次，并作为具有自己 ID 的单独试验报告。

# 如何使用`reps`参数

传统上，使用 reps 参数的最佳方法是在基准代码中包含一个循环，看起来或多或少类似于：

```
for (int i = 0; i < reps; i++) {…} 
```

这是确保代表次数与报告的运行时间***呈线性关系的最直接方法。***这是一个必要的属性，因为 Caliper 试图根据多个操作的总成本来推断单个统一操作的成本。如果运行时间与代表次数不成线性关系，则结果将无效。这也意味着代表不应直接传递给基准代码。*

# uml - UML 状态机 ShallowHistory

> ID：14681430
> 
> 赞同：3
> 
> 时间：2013-02-04T06:25:32.883
> 
> 标签：uml, modeling

我想知道我是否正确理解了 ShallowHistory 语法。

这是正确的使用方法吗？

![在此处输入图像描述](../Images/31babf64884b8a4abb7efb8361238cd5.png)

在 UML 规范中。据说它可以用来代替初始的伪状态。我猜在这种情况下，将无法重置 State1 的内存，而在这种情况下，从 State0 的转换总是从 State1.1 开始。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T14:17:32.467

你的解释似乎是正确的。从上层建筑：

> 进入复合状态后，区分以下几种情况：
> 
> • 默认条目：在图形上，这由在复合状态的外边缘终止的传入转换指示。在这种情况下，将应用默认输入规则（请参阅语义变化点（默认输入规则））。

和

> 语义变化点（默认输入规则）
> 
> 如果转换终止于封闭状态并且封闭区域没有初始伪状态，则对这种情况的解释是语义变化点。在某些解释中，这被认为是一个格式错误的模型。也就是说，在这些情况下，初始伪状态是强制性的。另一种解释允许这种情况，这意味着，当进行这种转换时，状态机保持在复合状态，而不进入任何区域或其子状态。

最后：

> 浅历史条目：如果转换在浅历史伪状态上终止，则活动子状态将成为此条目之前的最近活动子状态，除非最近活动子状态是最终状态，或者这是进入此状态的第一个条目。在后两种情况下，进入默认的历史状态。这是源自历史伪状态的转换目标的子状态。（如果没有指定这样的转换，则情况定义不明确，并且未定义其处理。）如果由历史确定的活动子状态是复合状态，则它继续使用其默认条目。

请注意，从最后一段来看，您似乎应该始终从`H`伪状态转换，至少到`initial`伪状态指向的相同状态，否则您可能有一个定义不明确的机器。

我没有找到它说你可以使用 H* 而不是初始伪状态的地方。你在哪里看到这个？

# c# - Asp.Net Mvc2 .ascx 模板

> ID：14681435
> 
> 赞同：0
> 
> 时间：2013-02-04T06:26:10.563
> 
> 标签：c#, asp.net-mvc-2

为什么 Asp.Net Mvc2 不起作用？我收到以下错误：

```
The view at '~/Views/Shared/Banner.ascx' must derive from ViewPage, ViewPage<TViewData>, ViewUserControl, or ViewUserControl<TViewData>. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T09:25:19.517

Banner.ascx 不是从 ViewPage、ViewPage、ViewUserControl 或 ViewUserControl 继承的。如错误中所述。

但这太愚蠢了，不可能是真的。看起来您在一个应用程序中加载了框架冲突。检查解决方案的下一个答案：

*   [https://stackoverflow.com/a/2472040/182344](https://stackoverflow.com/a/2472040/182344)
*   [https://stackoverflow.com/a/4169131/182344](https://stackoverflow.com/a/4169131/182344)

# c# - 为了清楚起见从一个类继承是否可以接受？

> ID：14681437
> 
> 赞同：3
> 
> 时间：2013-02-04T06:26:14.003
> 
> 标签：c#, oop

假设我有一个只存储键/值对的模板/泛型类：

```
public class GenericDatabase<Key, T>
{
 public Dictionary<Key, T> Data { get; set; }               

 public GenericDatabase()
 {
   Data = new Dictionary<Key, T>();
 }
 ...
} 
```

为了清楚起见，在不引入任何新方法或成员变量的情况下从中派生一个类是否可以接受？例如，假设我想要一个字符数据库：

```
public class CharacterDatabase : GenericDatabase<string, CharacterStat>
{
   // no new methods or member variables
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:29:29.187

**IMO**为清楚起见引入一定级别的继承会使其他开发人员感到困惑。我认为通用声明已经足够清楚了。

```
GenericDatabase<string, CharacterStat> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:30:16.313

它是一种不同的语言.. 但看看[c++ 是如何定义它的`std::string`class](http://en.cppreference.com/w/cpp/string/basic_string)的。

```
typedef basic_string<char> string; 
```

只是想指出，这种做法不仅常见，而且标准库编写者自己也使用。

如果您要使用`CharacterDatabase`很多次，我会支持这样的步骤。此外，我不确定 C# 是否为此提供了除继承之外的任何其他更简单的机制（如 C++ 的`typedef`），但这是首选。

[using 指令可以像 typedef 一样使用](https://stackoverflow.com/questions/161477/equivalent-of-typedef-in-c-sharp)，但它只影响声明它的文件。

```
using CharacterDatabase = GenericDatabase<string, CharacterStat> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T06:30:47.900

在 OOP 中，没有什么可以阻止您这样做。但是，我在很多地方看到他们使用*标记接口*而不是基类来表示某些东西。标记接口通常没有公共成员，仅用于将类标记*为某事的示例*。

你可以看看这些链接：

[Wikipedia => 标记界面模式](http://en.wikipedia.org/wiki/Marker_interface_pattern)

[什么是标记界面](http://www.jguru.com/faq/view.jsp?EID=224126)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T20:11:57.340

对我来说，这取决于使用的具体类型。

如果我有

```
GenericDatabase<string, CharacterStat> 
```

我会保持原样 - 很明显。但如果我有

```
GenericDatabase<string, ArrayList<Pair<CharacterStat,Integer> > > 
```

那么我肯定会给它一个名字，而且是一个真正解释性的名字；）。

# javascript - 使用 JQUERY 和 Ajax 获取祈祷时间 JSON 数据

> ID：14681441
> 
> 赞同：1
> 
> 时间：2013-02-04T06:27:03.060
> 
> 标签：javascript, jquery, ajax, jsonp

我想从此链接中使用 Jquery ana Ajax 读取 JSON 数据

[http://praytime.info/getprayertimes.php?lat=31.950001&lon=35.9333&gmt=180&m=3&y=2013&school=0&format=json&callback=](http://praytime.info/getprayertimes.php?lat=31.950001&lon=35.9333&gmt=180&m=3&y=2013&school=0&format=json&callback=) ?

这是我的代码：

```
 $(document).ready(function() { 

 var strUser ="http://praytime.info/getprayertimes.php?lat=31.950001&lon=35.9333&gmt=180&m=3&y=2013&school=0&format=json&callback=?";

 $.ajax({ 
   url: strUser ,
   dataType: 'jsonp',    
   success: function(data){

        jQuery.each(data, function(){
           alert("yes");

       });                
    }

  });

 }); 
```

我用其他链接尝试了这段代码，它是正确的，但是从指定的链接我没有得到任何输出，你能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:40:34.100

URL 正在输出`json`，但对于跨域需要`jsonp`。

并非所有 API 都提供`jsonp`. 如果跨域 API 未提供`jsonp`且未`CORS`启用，您将需要使用代理来检索数据，因为`same origin policy`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:45:17.793

您尝试使用 JSONP 访问的 url 不支持它。服务器将需要以 JSON 格式返回响应，但还将响应包装在请求的回调中。所以解决这个问题的一种方法是使用服务器端代理，它从指定的 url 获取响应并将其传递给客户端 js，例如：

```
$.ajax({
  type: "GET",
  url: url_to_yourserverside_proxy,
  dataType: "json",
  success: function( data ) {
      console.log(data);
  }
}); 
```

`url_to_yourserverside_proxy`从指定的 url 获取响应的服务器端文件在哪里

# eclipse - 使用 maven-eclipse-plugin 的部署程序集

> ID：14681442
> 
> 赞同：1
> 
> 时间：2013-02-04T06:27:06.480
> 
> 标签：eclipse, maven, maven-eclipse-plugin

我正在使用 maven-eclipse-plugin 处理战争项目。这个战争项目使用 maven 覆盖方法来包含另一个战争。当我使用 Maven 部署它时，一切都很顺利。当我在eclipse中本地测试war时，它失败了，因为依赖的war资源仅在目标文件夹中可用。为了解决这个问题，我去部署程序集并手动添加目标文件夹。有没有办法告诉 eclipse-maven-plugin 在运行 eclipse:eclipse 目标时将以下行添加到 .settings 文件夹内的 org.eclipse.wst.common.component 文件中。

```
<wb-resource deploy-path="/" source-path="/target/finalname"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:51:47.120

您可以在 mvn eclipse:eclipse 的 pom 中嵌入任何额外的 eclipse 属性。

[插件参考](http://maven.apache.org/plugins/maven-eclipse-plugin/eclipse-mojo.html)有一些示例，用于添加构建命令、资源、方面，当然还有临时配置。

您可能可以从那里复制粘贴一些东西来帮助您。

# php - PHP 和 C++ 之间的安全套接字通信

> ID：14681443
> 
> 赞同：0
> 
> 时间：2013-02-04T06:27:07.023
> 
> 标签：php, c++, qt, sockets, encryption

我有一个使用套接字与服务器应用程序通信的网页。过去安全性不是问题，但我决定是时候实施一些了。现在，该页面正在通过发送纯文本字符串以及在服务器上执行的命令来与服务器通信。保护这种通信的最佳方式是什么，这样消息就不会以纯文本形式发送？

我考虑过使用 AES 等共享密钥系统对发送的消息进行加密，但我没有太多使用加密的经验，而且 Google 实现此类代码的结果非常令人生畏。

该服务器是用 Qt C++ 编写的，但专门用于 Windows。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:40:28.393

您可以使用[OpenSSL](http://www.openssl.org/)加密您的信息。它支持 AES 和 SHA* 算法，您无需实现它们，您只需在 C 和 PHP 应用程序中使用该库即可。

# django-admin - Django admin - 用户创建时的电子邮件用户名和密码

> ID：14681444
> 
> 赞同：1
> 
> 时间：2013-02-04T06:27:17.850
> 
> 标签：django-admin, django-authentication, django-1.4

我正在使用 django-1.4.3，超级用户可以创建用户并为他们分配密码。在这里，我使用[django-email-as-username](https://github.com/dabapps/django-email-as-username)使用户能够使用他们的电子邮件作为用户名登录。当超级用户添加新用户时，应通过电子邮件通知新添加的用户及其用户名和密码。

创建用户后，我可以使用[post_save 信号](https://stackoverflow.com/q/6593348/1095090)发送电子邮件。但我无法获得密码，因为它将被加密和存储。我想通过电子邮件向用户发送原始密码。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T12:20:04.333

我已经使用下面的代码实现了它：

```
from django.db.models.signals import post_save
from django.contrib.auth.models import User
from django.dispatch import receiver

@receiver(post_save, sender = User)
def my_callback(sender, **kwargs):
    import inspect
    records =[]
    for frame_record in inspect.stack():
        records.append(frame_record[3])
        if frame_record[3]=='get_response':
            request = frame_record[0].f_locals['request']
            email = request.POST.get('email')
            password1 =  request.POST.get('password1')
            password2 = request.POST.get('password2')
            if email != None and password1 != None and password2 != None and password1 == password2:
                html_content ="Hi,<br> Your username: %s <br> Password: %s"
                from_email   = settings.DEFAULT_FROM_EMAIL
                message      = EmailMessage('Welcome', html_content %(email, password1), from_email, [email])
                message.content_subtype = "html"  # Main content is now text/html
                message.send()
            break 
```

# iphone - 隐藏自定义单元格图像

> ID：14681449
> 
> 赞同：-5
> 
> 时间：2013-02-04T06:28:03.807
> 
> 标签：iphone, xcode, custom-cell

我在 cuttom 单元格中显示一个按钮`UITableview`。不需要时如何隐藏该按钮。例如：我在按钮上显示接收到的图像计数。如果计数为零，我需要从单元格中隐藏该按钮。

```
contactviewController.m
if (![[arr objectAtIndex:4] isEqualToString:@"0"]) {
            [cell1 setImg:[arr objectAtIndex:4]];
        }
Customcell.m

-(void)setImg:(NSString *)_text
{

        imgView.titleLabel.textColor = [UIColor whiteColor];
        [imgView setTitle:_text forState:UIControlStateNormal];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:30:48.723

您可以在您的`cellForRowAtIndex`方法中执行此操作。对于每行创建，都会调用此方法。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if(condition)
    {
        //show button
    }
    else
    {
        // don't show button
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:31:50.950

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
 {
      if(noImagesFound)
      {
           yourCustomCellObject.buttonObject.hidden = YES;
      }
      else
      {
           yourCustomCellObject.buttonObject.hidden = NO;
      }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:47:08.860

您可以通过 xib 作为 IBOutlets 或通过设置框架并将按钮添加到单元格以编程方式在单元格中添加按钮。上述解决方案取决于您添加按钮的方式。如果您通过 xib 添加它作为插座，您可以执行以下任一操作。

任何视图都有一个称为标签的属性。您可以在按钮的属性检查器和`-cellForRowAtIndexPath:`调用中将标签值设置为

```
UIButton *button  =(UIButton*) [cell viewWithTag:9];

// your tag value (say 9) 
```

和使用 [`button setHidden:YES]`隐藏 /`/NO to unhide`在这里你不需要自定义类

1.  如果您已经为同一个创建了自定义类，您可以通过两种方法通过编程或通过 xib 添加按钮。如果是 xib，则创建一个 IBOutlet 并使其成为自定义单元格的属性，以便您可以使用自定义单元格对象访问它。

如果您需要对创建的单元格进行更多控制，最好选择第二个选项。如果您已将其设为属性，则可以通过使用单元格的对象来访问它。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-04T06:32:25.060

1.  创建 UITableViewCell.h 和 .m 文件。

2.  在文件中创建一些变量，如 UILabel 和 UIImageView 对象，并使其成为 IBOutlet 并将它们与单元格 .xib 文件绑定。

3.  在 UITableView 实现中，在“cellForRowAtIndexPath”中，您可以使用该自定义 UITableViewCell 类对象并使用 UILable 和 UIImageView 的合成变量并使用它来相应地显示或隐藏。

# java - 在android中解析通过HttpPOST的XML

> ID：14681451
> 
> 赞同：0
> 
> 时间：2013-02-04T06:28:37.343
> 
> 标签：java, android

在执行 httpPOST 期间，我将响应存储为字符串，我得到的响应如下所示：

```
 <?xml version="1.0" encoding="utf-8"?>
   <string xmlns="http://localhost:4471/">101~Success</string> 
```

我只想在解析后得到 101~Success，这样我就可以通过使用 split 函数得到 101，但我无法在 android 中获取这个元素。我在 J2ME 中得到了这个：

```
 InputStream in = new ByteArrayInputStream(strResponse.getBytes("UTF-8"));
            InputStreamReader is = new InputStreamReader(in);
            parser = new XmlParser(is);
            doc.parse( parser );

            Element root = doc.getRootElement();
            Element item = doc.getElement(2);
            String parsedResponse = item.getText(0); 
```

我怎么能在android中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:43:15.737

您可以使用[DOM](http://www.java-samples.com/showtutorial.php?tutorialid=152) 或[DOM](http://www.androidhive.info/2011/11/android-xml-parsing-tutorial/) 或[XMLPULLParser解析 XMl](http://www.vogella.com/articles/AndroidXML/article.html)

# arrays - 仅当满足特定条件时才从数组中切出一定数量的元素

> ID：14681459
> 
> 赞同：1
> 
> 时间：2013-02-04T06:29:25.290
> 
> 标签：arrays, extjs, extjs4, slice

`begin`Ext.Array.slice() 用于从给定和`end`图形中获取一系列元素。我正在从一个大数组中切出 10 个元素。

现在，我想从数组中切出满足特定条件的 10 个元素（比如传递一个`slice()`返回真值的函数），而不是直接获取 10 个值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:18:58.040

您使用的是哪个版本的 ExtJ？如果您使用的是版本 4 或更高版本，请查看 Array.filter 方法。

例如

```
function isBigEnough(element, index, array) {
  return (element >= 10);
}

passed = [12, 5, 8, 1, 4,15].filter(isBigEnough);
//returns [12,15] 
```

# android - android中xml解析耗时

> ID：14681462
> 
> 赞同：1
> 
> 时间：2013-02-04T06:29:29.993
> 
> 标签：android, asynchronous, xml-parsing

我在我的 android 应用程序中使用地图并在地图上显示多个项目。所有来自 Web 服务 (XML) 的数据。我为此使用 SAX 解析器。并在异步任务中解析。

我的问题是数据太大，我的加载程序显示大约 1 分钟来解析 xml。那么有什么办法可以解决这个问题。

我有一个想法，当第一个项目解析时，它将显示在地图上，所有剩余的项目都将加载到线程中。但是我该如何实现呢？

可能吗？需要一些建议和指导。提前致谢。

# perl - 我可以在堆栈上下移动调试器上下文吗？

> ID：14681472
> 
> 赞同：7
> 
> 时间：2013-02-04T06:30:36.873
> 
> 标签：perl, debugging

基本上我正在寻找与 gdb 的“up”和“down”命令等效的 perl。如果我在 subroutine 上中断`bar`，并且我有一个如下所示的调用堆栈：

```
foo
  \
   baz
    \
     bar 
```

我希望能够（不从`bar`or返回`baz`）向上导航`foo`框架并通过操纵变量来查看它在做什么，就像我通常使用`p`or的参数一样`x`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T17:09:01.153

使用[`y`命令](http://p3rl.org/debug#y-%5blevel-%5bvars%5d%5d)。

```
$ cat frames.pl
sub bar {
    my $fnord = 42;
    1
}
sub baz { bar }
sub foo {
    my $fnord = 23;
    baz
};
foo;
$ perl -d frames.pl

Loading DB routines from perl5db.pl version 1.37
Editor support available.

Enter h or 'h h' for help, or 'man perldebug' for more help.

main::(frames.pl:10):   foo;
DB<1> c 3
main::bar(frames.pl:3):     1
DB<2> y 2 fnord
$fnord = 23
DB<3> T
. = main::bar() called from file 'frames.pl' line 5
. = main::baz() called from file 'frames.pl' line 8
. = main::foo() called from file 'frames.pl' line 10 
```

# c# - 需要 RegEx 过滤除键盘字符以外的任何内容

> ID：14681479
> 
> 赞同：1
> 
> 时间：2013-02-04T06:31:25.270
> 
> 标签：c#, regex

在我的应用程序客户端中，将数据从 MS word 上传到 Textarea。我的 RegEx 技能不太好:)

我需要一个正则表达式来过滤字符串中的所有垃圾字符，唯一可接受的输入是来自键盘的字符。即 AZ、az、0-9 以及键盘上出现的所有特殊字符 + 所有货币符号。

编辑：我只想允许包括扩展的 ascii 代码。[http://www.asciitable.com/](http://www.asciitable.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:28:44.660

我检查了 ASCII 表，它包含的所有可打印符号都出现在任何标准键盘上。

很难说出“键盘上出现的特殊字符”的定义是什么，但我认为您的意思是可打印的非字母数字字符。虽然所有 unicode 空白字符（非制动空格、零宽度单词非连接符......）确实是“特殊的”，但大多数键盘都不存在它们。退格字符虽然出现在大多数键盘上，但通常由操作系统解释，所以我假设您不希望这样。类似的论点适用于制表键：虽然制表符比换行符更容易获得，但它通常不能输入到表单输入中。

关于货币符号，字符类`\p{Sc}`覆盖了它们，C# regex 似乎支持这个类

非美式键盘包含更多字符（带有变音符号、西里尔字母、中文/日文/韩文字符的符号），但它们与您对“AZ、az、0-9 和键盘上所有特殊字符 + 全部”的描述不符货币符号”。特别有趣的是日语的句尾标点符号，它是一个空心圆圈，而不仅仅是一个点。但是，虽然它与您的描述相符，但我相信您也不希望这样。

C# 也支持`\p{isBasicLatin}`，但它包括 ASCII 控制字符，我假设您不想要。

总结一下：您的描述与整个可打印的 ASCII 范围和换行符匹配`\n`。要检查一个字符串是由这些组成的，请使用这个正则表达式：

```
^[\x20-\x7E\n\p{Sc}]$ 
```

反映您的编辑，还要考虑所有可打印的 ASCII 字符（大多数货币符号不存在，`$`不是）+换行符

```
^[\x20-\x7E\n]$ 
```

或整个 ASCII 范围，包括控制字符和所有 ASCII 空格：

```
^[\x00-\x7F]$
^[\p{isBasicLatin}]$ 
```

参考：
[MSDN 字符类](http://msdn.microsoft.com/en-US/library/20bw873z%28v=vs.80%29.aspx)
[MSDN 字符转义](http://msdn.microsoft.com/en-US/library/4edbef7e%28v=vs.80%29.aspx)
[MSDN 代码示例](http://msdn.microsoft.com/en-US/library/01escwtf%28v=vs.80%29.aspx)（在此处改编）：

> ```
> bool IsValid(string strIn)
> {
>     // Return true if strIn is in valid format.
>     return Regex.IsMatch(strIn, @"^[\x20-\x7E\n\p{Sc}]$");
> 
> } 
> ```

* * *

[正则表达式替换](http://msdn.microsoft.com/en-US/library/844skk0h%28v=vs.80%29.aspx)（在此处改编；剥离`everything except A-Z, a-z , 0-9 and following characters. ~ ` ! @ # $ % ^ & * ( ) _ + | - = \ { } [ ] : " ; ' < > ? , . /`）

> ```
> String CleanInput(string strIn)
> {
>     // Replace invalid characters with empty strings.
>     return Regex.Replace(strIn,
>           @"[^a-zA-Z0-9`!@#$%^&*()_+|\-=\\{}\[\]:"";'<>?,./]", ""); 
> } 
> ```

关于逐字字符串文字中的双引号：http: [//blogs.msdn.com/b/gusperez/archive/2005/08/10/450257.aspx](http://blogs.msdn.com/b/gusperez/archive/2005/08/10/450257.aspx)

# python - LZ77压缩算法处理慢

> ID：14681480
> 
> 赞同：0
> 
> 时间：2013-02-04T06:31:28.167
> 
> 标签：python, compression

我正在使用 LZ77 压缩程序，当我尝试压缩 116Kb 文件时，处理时间太长。我的代码有什么问题吗？我怎样才能提高算法的处理时间？

```
import fileinput

class Assign:

    def pattern(self, data):

        self.skip = []

        self.m = len(data)
        for k in range(256): self.skip.append(self.m)

        for k in range(self.m - 1): self.skip[ord(data[k])] = self.m - k - 1

        self.skip = tuple(self.skip)

        self.data = data
    def find(self, text):
        n = len(text)
        if self.m > n: return -1
        k = self.m - 1
        while k < n:
            j = self.m - 1; i = k
            while j >= 0 and text[i] == self.data[j]:
                j -= 1; i -= 1
            if j == -1: return i + 1
            k += self.skip[ord(text[k])]
        return -1

class LZ77:

    def __init__(self, data):
        self.position = 0
        self.window = ""
        self.stream = data
        self.streamSize = len(self.stream)
        self.search = Assign()
    def Encode(self):
        p = 0
        c = ''
        lastresult = 0
        found = 0
        for i in range(self.streamSize):
            self.search.pattern(self.stream[self.position:self.position+i+1])
            result = self.search.find(self.window)
            if result < 0: break
            lastresult = result
            found = 1
        c = self.stream[self.position+i]
        p = lastresult
        B = 0
        if i > 0: B = self.position - p
        L = i
        if self.streamSize > 0:
            self.position += i + 1
            self.streamSize -= i + 1
            self.window = self.stream[:self.position]
        #print B,L,c
        return ((B, L), c)

    def Encoder(self):

        output = ""

        length = self.streamSize
        while self.streamSize > 0:
            ((B, L), C) = self.Encode()
            output += str(B) +   str(L) +  C
        return (output)

def aiyoo(#filename):

    enter = raw_input("enter the filename to which the original file is to be compressed to")
    enter1 = enter
    fob1 = open(enter,'wb')
    original = ''
    print filename
    #fob = open(filename,'rb')
    #numlines = 0
    """while True:
        c = fob.read(1)
        if not c:
            print "End of file"
            break
        else :"""
    for line in fileinput.input(['hello.txt']): #size of hello.txt is 116kb   
        original = line
        lz = LZ77(original)
        stream = lz.Encoder()#, streamSize = lz.Encoder()
        fob1.write(stream)
    """for i in fob:
        original = i
        lz = LZ77(original)
        stream = lz.Encoder()#, streamSize = lz.Encoder()
        fob1.write(stream)"""
    #fob.close()
    fob1.close()
    return enter 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:04:40.757

在问这样的问题之前，您应该[分析](http://docs.python.org/2/library/profile.html)您的代码以找出哪个部分花费的时间最多。

但无论如何，我看到你已经实现了一个子字符串搜索功能。[`find`改用字符串方法](http://docs.python.org/2/library/stdtypes.html#str.find)应该可以显着提高速度。

另请注意，在 Python 中实现的压缩算法不会像例如在 Python 中实现的那样快。C，甚至没有关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T09:50:34.193

lz77 在真正的归档器（如 zip 和 rar）中的工作方式如下：将具有相同前 3-4 个字节的所有位置插入同一个哈希桶中，然后我们仅在这些条目中搜索最长匹配，通常将 serarch 限制为8-32位

# c# - OpenGL 或 DirectX 等效

> ID：14681485
> 
> 赞同：0
> 
> 时间：2013-02-04T06:31:55.083
> 
> 标签：c#

我正在研究 opengl 和 directx，想知道什么是最容易学习的，哪个是社区活动最好的。

我也想知道openTK和tao是否死了。

欢迎任何其他建议或教程等！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:43:18.857

无论您在做什么 3D 应用程序，如果将来您想移植到 Windows 以外的任何平台，您最好先使用 OpenGL。

至于更容易学习，现代 DirectX 有一个 API，可能会让有 Microsoft 工具经验的人更熟悉。他们还提供了很好的[文档](http://msdn.microsoft.com/library/windows/apps/hh452744.aspx)和[教程](http://msdn.microsoft.com/en-us/library/windows/desktop/bb153264%28v=vs.85%29.aspx)，我建议你[从 Coding4Fun](https://channel9.msdn.com/coding4fun/)开始。对不起，我没有提供更多，因为我对 DirectX 了解不多，所以很难确定 DirectX 教程是否好。

此外，您可能对[SDL](http://www.libsdl.org/)感兴趣，它将为您提供一个很好的具有硬件加速功能的 2D 应用程序 API，或者您可以使用它在 Linux 和 Windows 上初始化 OpenGL。

如果你想开发游戏，你也可以考虑一些游戏引擎，比如[Ogre](http://www.ogre3d.org/)、[Axiom](https://axiom.codeplex.com/)甚至[Unity3D](http://www.unity3d.com/)。您已经听说过[XNA](http://msdn.microsoft.com/en-us/centrum-xna.aspx)，所以您应该访问[MonoGame](http://monogame.codeplex.com/)。

至于学习 OpenGL，我确实以旧的方式学习了旧的 API（使用[红皮书](http://fly.cc.fer.hr/~unreal/theredbook/)）。你也可以试试[NeHe](http://nehe.gamedev.net/)教程，[OpenTK](http://www.opentk.com/)也有[一些教程](http://www.opentk.com/doc)和示例。

现在，听！OpenGL 是一样的，所有的变化都是一些细节......例如，一些包装器在函数名称上具有前缀，一些使用重载方法，另一些则保留原始的 OpenGL 名称......但它是相同的，因此您可以轻松适应C++、Java、JavaScript 或任何关于 OpenGL 的 C# 的教程，所有重要的是学习初始化它，设置一些事件（Paint，Resize ......），所有的渲染和东西都是一样的......

因此，知道这一点，还有很多很多教程可供您使用。这里有几个：

*   [codersource.net 上的 OpenGL 教程](http://www.codersource.net/mfc/opengl.aspx)
*   Wikibooks.org 上的[OpenGL 编程！](http://en.wikibooks.org/wiki/OpenGL_Programming)
*   这本书[学习现代 3D 图形编程](http://www.arcsynthesis.org/gltut/)。
*   谈书，[OpenGLBook](http://openglbook.com/the-book/)
*   [乔·格雷夫的博客](http://duriansoftware.com/joe/An-intro-to-modern-OpenGL.-Table-of-Contents.html)
*   [杰夫·拉马尔奇的博客](http://iphonedevelopment.blogspot.com/2009/05/opengl-es-from-ground-up-table-of.html)

另外，为什么不让[opengl.org的](https://www.opengl.org/)[入门指南](http://www.opengl.org/wiki/Getting_started#Tutorials_and_How_To_Guides)指导您呢？

另外，如果您想要的是示例。看看[g-truc.net](http://www.g-truc.net/project-0026.html) ，别再看了……但我警告你，他们有很多代码需要阅读和消化。

最后，对我来说，学习开发 3D 应用程序的最佳方式是使用宠物项目。怎么样：从分类技术三角形hello world教程开始，继续绘制一些立方体，然后与它交互，使它们移动和旋转。然后继续制作天空盒，添加风景和第一人称摄像机控制……最后是您自己的 3D 环境进行导航。

# javascript - Handson Table - 如何保存到文件？

> ID：14681494
> 
> 赞同：0
> 
> 时间：2013-02-04T06:32:55.867
> 
> 标签：javascript, ajax, handsontable

我正在尝试看起来很棒的 Handsontable 插件，但我不确定如何通过 getdata 函数实现保存。

有人知道工作示例吗？我可以保存到 .json 或 mysql，但我更喜欢保持简单。

加载工作正常，但保存时出现错误。我环顾四周，但找不到很多信息。

任何帮助表示赞赏。

HTML：

```
<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <title></title>

  <!--
  Loading Handsontable (full distribution that includes all dependencies apart from jQuery)
  -->
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.handsontable.full.js"></script>
  <link rel="stylesheet" media="screen" href="js/jquery.handsontable.full.css">

  <!--
  Loading demo dependencies. They are used here only to enhance the examples on this page
  -->
  <link rel="stylesheet" media="screen" href="css/samples.css">
  <script src="js/samples.js"></script>
  <script src="js/highlight/highlight.pack.js"></script>
  <link rel="stylesheet" media="screen" href="js/highlight/styles/github.css">

</head>

<body>

<div id="container">

  <div class="rowLayout">
    <div class="descLayout">
      <div class="pad">
      </div>
    </div>
  </div>

  <div class="rowLayout">
    <div class="descLayout">
      <div class="pad bottomSpace850">

        <p>Note: this is a mockup..</p>

        <p>
          <button name="load">Load</button>
          <button name="save">Save</button>
          <label><input type="checkbox" name="autosave" checked="checked" autocomplete="off"> Autosave</label>
        </p>

        <pre id="example1console" class="console">Click "Load" to load data from server</pre>

        <div id="example1"></div>

      </div>
    </div>

    <div class="codeLayout">
      <div class="pad">
        <script>
          var $container = $("#example1");
          var $console = $("#example1console");
          var $parent = $container.parent();
          var autosaveNotification;
          $container.handsontable({
            startRows: 7,
            startCols: 7,
            rowHeaders: true,
            colHeaders: true,
            minSpareRows: 1,
            contextMenu: true,
            manualColumnResize: true,
            columnSorting: true,
            onChange: function (change, source) {
              if (source === 'loadData') {
                return; //don't save this change
              }
              if ($parent.find('input[name=autosave]').is(':checked')) {
                clearTimeout(autosaveNotification);
                $.ajax({
                  url: "json/save.json",
                  dataType: "json",
                  type: "POST",
                  data: change, //contains changed cells' data
                  complete: function (data) {
                    $console.text('Autosaved (' + change.length + ' cell' + (change.length > 1 ? 's' : '') + ')');
                    autosaveNotification = setTimeout(function () {
                      $console.text('Changes will be autosaved');
                    }, 1000);
                  }
                });
              }
            }
          });
          var handsontable = $container.data('handsontable');

          $parent.find('button[name=load]').click(function () {
            $.ajax({
              url: "json/load.json",
              dataType: 'json',
              type: 'GET',
              success: function (res) {
                handsontable.loadData(res.data);
                $console.text('Data loaded');
              }
            });
          });

          $parent.find('button[name=save]').click(function () {
            $.ajax({
              url: "json/save.json",
              data: {"data": handsontable.getData()}, //returns all cells' data
              dataType: 'json',
              type: 'POST',
              success: function (res) {
                if (res.result === 'ok') {
                  $console.text('Data saved');
                }
                else {
                  $console.text('Save error');
                }
              },
              error: function () {
                $console.text('Save error. POST method is not allowed on GitHub Pages. Run this example on your own server to see the success message.');
              }
            });
          });

          $parent.find('input[name=autosave]').click(function () {
            if ($(this).is(':checked')) {
              $console.text('Changes will be autosaved');
            }
            else {
              $console.text('Changes will not be autosaved');
            }
          });
        </script>
      </div>
    </div>
  </div>

  <div class="rowLayout">
    <div class="descLayout">

    </div>
  </div>
</div>
</body>
</html> 
```

加载.json

```
 {
  "data": [
    ["", "Kia", "Nissan", "Toyota", "Honda"],
    ["2008", 10, 11, 12, 13],
    ["2009", 20, 11, 14, 13],
    ["2010", 30, 15, 12, 13]
  ]
} 
```

保存.json

```
 {
  "data": [
    ["", "Kia", "Nissan", "Toyota", "Honda"],
    ["2008", 10, 11, 12, 13],
    ["2009", 20, 11, 14, 13],
    ["2010", 30, 15, 12, 13]
  ]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:53:33.343

PHP/sqlite 似乎是最好的解决方案。我的工作示例如下。

HTML：

```
<!doctype html>
<html>
<head>
  <meta charset='utf-8'>
  <title></title>

  <!--
  Loading Handsontable (full distribution that includes all dependencies apart from jQuery)
  -->
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery.handsontable.full.js"></script>
  <link rel="stylesheet" media="screen" href="js/jquery.handsontable.full.css">

  <!--
  Loading demo dependencies. They are used here only to enhance the examples on this page
  -->
  <link rel="stylesheet" media="screen" href="css/samples.css">
  <script src="js/samples.js"></script>
  <script src="js/highlight/highlight.pack.js"></script>
  <link rel="stylesheet" media="screen" href="js/highlight/styles/github.css">

</head>

<body>

<div id="container">

  <div class="rowLayout">
    <div class="descLayout">
      <div class="pad">
      </div>
    </div>
  </div>

  <div class="rowLayout">
    <div class="descLayout">
      <div class="pad bottomSpace850">

        <p>Note: this is a mockup..</p>

        <p>
          <button name="load">Load</button>
          <button name="save">Save</button>
          <label><input type="checkbox" name="autosave" checked="checked" autocomplete="off"> Autosave</label>
        </p>

        <pre id="example1console" class="console">Click "Load" to load data from server</pre>

        <div id="example1"></div>

      </div>
    </div>

    <div class="codeLayout">
      <div class="pad">
        <script>
          var $container = $("#example1");
          var $console = $("#example1console");
          var $parent = $container.parent();
          var autosaveNotification;
          $container.handsontable({
            startRows: 3,
            startCols: 3,
            rowHeaders: true,
            colHeaders: true,
            minSpareRows: 1,
            contextMenu: true,
            manualColumnResize: true,
            columnSorting: true,
            onChange: function (change, source) {
              if (source === 'loadData') {
                return; //don't save this change
              }
              if ($parent.find('input[name=autosave]').is(':checked')) {
                clearTimeout(autosaveNotification);
                $.ajax({
                  url: "json/save.php",
                  dataType: "json",
                  type: "POST",
                  data: change, //contains changed cells' data
                  complete: function (data) {
                    $console.text('Autosaved (' + change.length + ' cell' + (change.length > 1 ? 's' : '') + ')');
                    autosaveNotification = setTimeout(function () {
                      $console.text('Changes will be autosaved');
                    }, 1000);
                  }
                });
              }
            }
          });
          var handsontable = $container.data('handsontable');

          $parent.find('button[name=load]').click(function () {
            $.ajax({
              url: "json/load.php",
              dataType: 'json',
              type: 'GET',
              success: function (res) {
                handsontable.loadData(res.data);
                $console.text('Data loaded');
              }
            });
          });

          $parent.find('button[name=save]').click(function () {
            $.ajax({
              url: "json/save.json",
              data: {"data": handsontable.getData()}, //returns all cells' data
              dataType: 'json',
              type: 'POST',
              success: function (res) {
                if (res.result === 'ok') {
                  $console.text('Data saved');
                }
                else {
                  $console.text('Save error');
                }
              },
              error: function () {
                $console.text('Save error. POST method is not allowed on GitHub Pages. Run this example on your own server to see the success message.');
              }
            });
          });

          $parent.find('input[name=autosave]').click(function () {
            if ($(this).is(':checked')) {
              $console.text('Changes will be autosaved');
            }
            else {
              $console.text('Changes will not be autosaved');
            }
          });
        </script>
      </div>
    </div>
  </div>

  <div class="rowLayout">
    <div class="descLayout">

    </div>
  </div>
</div>
</body>
</html> 
```

保存.PHP

```
<?php
/**
Working example
*/

try {
  //open the database
  $db = new PDO('sqlite:cars.sqlite'); //will create the file in current directory. Current directory must be writable

  //create the database if does not exist
   $db->exec("CREATE TABLE IF NOT EXISTS cars (id INTEGER PRIMARY KEY, ONE TEXT, TWO TEXT, THREE TEXT)");

  $colMap = array(
    0 => 'ONE',
    1 => 'TWO',
    2 => 'THREE',

  );

  if ($_POST['changes']) {
    foreach ($_POST['changes'] as $change) {
      $rowId = $change[0] + 1;
      $colId = $change[1];
      $newVal = $change[3];

      if (!isset($colMap[$colId])) {
        echo "\n spadam";
        continue;
      }

      $select = $db->prepare('SELECT id FROM cars WHERE id=? LIMIT 1');
      $select->execute(array(
        $rowId
      ));

      if ($row = $select->fetch()) {
        $query = $db->prepare('UPDATE cars SET `' . $colMap[$colId] . '` = :newVal WHERE id = :id');
      } else {
        $query = $db->prepare('INSERT INTO cars (id, `' . $colMap[$colId] . '`) VALUES(:id, :newVal)');
      }
      $query->bindValue(':id', $rowId, PDO::PARAM_INT);
      $query->bindValue(':newVal', $newVal, PDO::PARAM_STR);
      $query->execute();
    }
  } elseif ($_POST['data']) {
    $select = $db->prepare('DELETE FROM cars');
    $select->execute();

    for ($r = 0, $rlen = count($_POST['data']); $r < $rlen; $r++) {
      $rowId = $r + 1;
      for ($c = 0, $clen = count($_POST['data'][$r]); $c < $clen; $c++) {
        if (!isset($colMap[$c])) {
          continue;
        }

        $newVal = $_POST['data'][$r][$c];

        $select = $db->prepare('SELECT id FROM cars WHERE id=? LIMIT 1');
        $select->execute(array(
          $rowId
        ));

        if ($row = $select->fetch()) {
          $query = $db->prepare('UPDATE cars SET `' . $colMap[$c] . '` = :newVal WHERE id = :id');
        } else {
          $query = $db->prepare('INSERT INTO cars (id, `' . $colMap[$c] . '`) VALUES(:id, :newVal)');
        }
        $query->bindValue(':id', $rowId, PDO::PARAM_INT);
        $query->bindValue(':newVal', $newVal, PDO::PARAM_STR);
        $query->execute();
      }
    }
  }

  $out = array(
    'result' => 'ok'
  );
  echo json_encode($out);

  // close the database connection
  $db = NULL;
}
catch (PDOException $e) {
  print 'Exception : ' . $e->getMessage();
}
?> 
```

# objective-c - 加载没有 Xib 的 UIViewController

> ID：14681495
> 
> 赞同：0
> 
> 时间：2013-02-04T06:33:24.447
> 
> 标签：objective-c, uiviewcontroller

`UIViewController`如果没有 xib 连接到它，我有一个作为子类的类,,,

该类包含一个方法，该方法将是(to make a tweet)`presentViewController`的一个实例。`TWTweetComposeViewController`

因此，当我需要调用该方法时，我需要使用 来呈现视图`presentViewController`，但它不起作用，，这就是我正在做的事情：

// 这里是 B 类（UIViewController 的子类）中的方法

```
@implementation TwitterManager
-(id)init
{
    self = [super init];

    if(self)
    {
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(postTweetImage:) name:Twitter_UploadImage object:nil];
    }

    return self;
}

+(TwitterManager*)sharedInstance
{
    if(object == nil)
        object = [[TwitterManager alloc] init];

    return object;
}
-(void)postTweet
{
    if([TWTweetComposeViewController canSendTweet])
    {
        NSLog(@"can send tweet postTweet");
        TWTweetComposeViewController *tweetViewController = [[TWTweetComposeViewController alloc] init];

        // Set the initial tweet text. See the framework for additional properties that can be set.
        [tweetViewController setInitialText:@"Hello. This is a tweet."];

        // Create the completion handler block.
        [tweetViewController setCompletionHandler:^(TWTweetComposeViewControllerResult result) {
            NSString *output;

            switch (result) {
                case TWTweetComposeViewControllerResultCancelled:
                    // The cancel button was tapped.
                    output = @"Tweet cancelled.";
                    break;
                case TWTweetComposeViewControllerResultDone:
                    // The tweet was sent.
                    output = @"Tweet done.";
                    break;
                default:
                    break;
            }

            //[self performSelectorOnMainThread:@selector(displayText:) withObject:output waitUntilDone:NO];

            // Dismiss the tweet composition view controller.
            [self dismissViewControllerAnimated:YES completion:nil];
        }];

        // Present the tweet composition view controller modally.
        [self presentViewController:tweetViewController animated:YES completion:nil];
    }
    else
    {
        NSLog(@"can not sen a tweet");
    }
}
@end 
```

// 在 AI 类中，我试图这样称呼它

```
TwitterManager twitterObject = [TwitterManager sharedInstance];
    [twitterObject postTweet]; 
```

那么创建负责加载 Twitter 对象的视图的方法是什么`presentViewController`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:52:16.003

```
YourTweetViewController * tweetViewController = [[YourTweetViewController alloc]init];
[self presentViewController:tweetViewController animated:YES completion:nil]; 
```

# matrix - 计算平截头体中心

> ID：14681498
> 
> 赞同：0
> 
> 时间：2013-02-04T06:33:40.390
> 
> 标签：matrix, frustum

如果我有一个列主要（opengl）矩阵，它是投影矩阵乘以模型视图矩阵的结果。如何计算该矩阵的中心点？我问的原因是因为我只能访问结果矩阵，我需要找到视图中心的位置？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:38:04.413

(x,y,z,1)*MVP == (0,0,0,w) - 转换到剪辑空间中心的点。

那应该只是 MVP^(-1) 的最后一列。

# c# - 字段 'xxx' 必须是 MVC DropDownList 中的数字

> ID：14681500
> 
> 赞同：0
> 
> 时间：2013-02-04T06:33:40.690
> 
> 标签：c#, jquery, asp.net-mvc, asp.net-mvc-3, html-select

我`DropDownList`在我的 MVC 应用程序中使用 a 。加载页面时出现问题：.html 源代码中显示错误消息`DropDownList`。

请看这张图片：

![在此处输入图像描述](../Images/214abd0eac430baf0dfd2850c2c637d8.png)

该字段已设置为允许在 DB 中为空，并且

```
using System.Web;
using Nop.Web.Framework;
using Nop.Web.Framework.Mvc;
using Nop.Web.Validators.Customer;

namespace Nop.Web.Models.Customer
{
 public class FileUploadModel : BaseNopEntityModel
 {
    public CustomerNavigationModel NavigationModel { get; set; }
    public string ControlID { get; set; }
    public int? EventID { get; set; }
    public IEnumerable<System.Web.Mvc.SelectListItem> Events { get; set; }
    public string SpeakerFile { get; set; }
    public string FirmFile { get; set; }
    public string LogoFile { get; set; }
    public string PresentFile { get; set; }
    public string Present2File { get; set; }

    public string SpeakerFileUrl { get; set; }
    public string FirmFileUrl { get; set; }
    public string LogoFileUrl { get; set; }
    public string PresentFileUrl { get; set; }
    public string Present2FileUrl { get; set; }

    public string SpeakerSubmit { get; set; }
    public string FirmSubmit { get; set; }
    public string LogoSubmit { get; set; }
    public string PresentSubmit { get; set; }
    public string Present2Submit { get; set; }
 }
} 
```

在模型中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T08:07:41.913

您的下拉列表不应该绑定到事件，而不是 EventID？

```
public int? EventID { get; set; }
public IEnumerable<System.Web.Mvc.SelectListItem> Events { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:40:18.133

这些`data-*`属性由不显眼的验证框架添加。由于您的`EventID`属性被声明为整数，因此框架会验证添加这些属性的格式。它是可为空的整数，因此没有`data-val-required`添加任何属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T06:50:41.757

这有什么问题。当您在模型中定义 int 时，它会显示此消息。并且您已将其定义为可为空的，如果您没有，则可能还会出现需要的消息。" 该字段是必需的。

# android - Android：更新数据库列时出现空指针异常

> ID：14681502
> 
> 赞同：0
> 
> 时间：2013-02-04T06:33:47.533
> 
> 标签：android, sqlite, nullpointerexception, sql-update, android-sqlite

我在更新此第 59 行的表时不断收到空指针异常，即

```
myDB.execSQL(updatequery); 
```

注意：在活动 1 中，构造函数有 3 个编辑文本字段，其中第一个 2 个字段具有值，第三个保持为空。一旦第二个活动开始，第三个字段就会在同一个表中更新。

我正在像这样在活动 1 中插入数据

```
dba.createddb(data11, data22, null); 
```

以下是我更新数据的活动

```
public class Activity2 extends Activity {

    EditText ed3;
    Button btn3;
     SQLiteDatabase myDB;
    DBAdapter dba;
    private String mRowId;
    String data3;
    String updatequery;
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.act2);
        ed3=(EditText)findViewById(R.id.data3id);
        btn3=(Button)findViewById(R.id.updatebtnid);
        //dba=new DBAdapter(Activity2.this);
        final Intent intent = getIntent();
        mRowId=intent.getStringExtra("KEYROWID");

        btn3.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {

                dba = new DBAdapter(v.getContext());
                data3=ed3.getText().toString();
                updatequery  = "UPDATE "+ DBAdapter.DATABASE_TABLE+ " SET ";

                updatequery = updatequery + DBAdapter.KEY_DATA3+" = '" + data3 +"'";
                Log.v("updatequery",updatequery);
                updatequery = updatequery + " WHERE _id = '" + mRowId + "';";
                Log.v("updatequery-new",updatequery);
                Log.v("test-1","update");
                try{
                    Toast.makeText(v.getContext(), "UPDATING", Toast.LENGTH_SHORT).show();
                    Log.v("test-2","update");
                    dba.open();
                    myDB.execSQL(updatequery);
                        }catch(NullPointerException e){
                   //e.getCause();
                    e.getMessage();
                }finally{
                    Log.v("test-3","update");
                        if(myDB != null)myDB.close();
                        dba.close();
                    }
                }

        });

    } 
```

我正在使用的数据库：

```
public class DBAdapter {
    public static final String KEY_ROWID= "_id";
    public static final String KEY_DATA1="data1";
    public static final String KEY_DATA2="data2";
    public static final String KEY_DATA3="data3";

    private static String TAG="DBAdapter";

    static String DATABASE_NAME="update.db";
    static final String DATABASE_TABLE="update_table";
    private static int DATABASE_VERSION=2;

    private final Context context;
    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_CREATE =
      "create table update_table(_id integer primary key autoincrement, "
    + "data1 varchar, data2 varchar, data3 varchar);";

    private static class DatabaseHelper extends SQLiteOpenHelper {

        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        public void onCreate(SQLiteDatabase db) {

            db.execSQL(DATABASE_CREATE);
        }

        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                    + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS update_table");
            onCreate(db);
        }
    }

    public DBAdapter(Context ctx) {
        this.context = ctx;
        open();
    }

    public DBAdapter open() throws SQLException {
        mDbHelper = new DatabaseHelper(context);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    public long createddb(String data1,String data2,String data3) {

        ContentValues initialValues = new ContentValues();

        initialValues.put(KEY_DATA1, data1);
        initialValues.put(KEY_DATA2, data2);
        initialValues.put(KEY_DATA3, data3);

        return  mDb.insert(DATABASE_TABLE, null, initialValues);

    }

    public boolean deleteSaleseditdetails(long rowId) {

        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

    public int fetchmaxId(){

        String selectQuery = "SELECT max("+KEY_ROWID+") from " + DATABASE_TABLE ;
         Cursor c= mDb.rawQuery(selectQuery, null);
        c.moveToFirst();
        return c.getInt(0);

    }

    public boolean deletedb(long rowId) {

        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
    }

} 
```

以下是**myLogcat**文件：

```
02-04 11:53:20.216: E/AndroidRuntime(11235): FATAL EXCEPTION: main
02-04 11:53:20.216: E/AndroidRuntime(11235): java.lang.NullPointerException
02-04 11:53:20.216: E/AndroidRuntime(11235):    at com.example.testupdate.Activity2$1.onClick(Activity2.java:59)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at android.view.View.performClick(View.java:2408)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at android.view.View$PerformClick.run(View.java:8816)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at android.os.Handler.handleCallback(Handler.java:587)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at android.os.Handler.dispatchMessage(Handler.java:92)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at android.os.Looper.loop(Looper.java:123)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at android.app.ActivityThread.main(ActivityThread.java:4627)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at java.lang.reflect.Method.invokeNative(Native Method)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at java.lang.reflect.Method.invoke(Method.java:521)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
02-04 11:53:20.216: E/AndroidRuntime(11235):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:37:04.060

从您的代码中，我发现`myDB`是**NULL**。

正如你所说 `SQLiteDatabase myDB;`

但是忘记初始化了。所以这个代码行 `myDB.execSQL(updatequery);`给你**NullPointerException**。

**更新：（**仅供您理解的伪代码）

实际上在您的代码中不需要`SQLiteDatabase myDB;`

您只需`executeQuery(String query)`在 Class **DBAdapter**中创建一个方法。在那只写

```
mDb.execSQL(query); 
```

现在从你的活动而不是 `myDB.execSQL(updatequery);`打电话`dba.executeQuery(updatequery);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:42:15.580

您尚未`SQLiteDatabase myDB;`在 Activity 中初始化它，而您正尝试直接使用它，这就是您的应用程序在 onClick 中引发 nullpointer 异常的原因。

只需初始化`SQLiteDatabase myDB;`您的`onCreate()`，然后尝试如下使用它。

在您的活动中添加上下文：

> ```
>  private Context context;
>      public class Activity2 extends Activity {
>         context=Activity2.this;
>          SQLiteDatabase myDB=new ....();
>           DBAdapter dba=new DBAdapter(context);
>        } 
> ```

我希望它会帮助你

谢谢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:41:50.553

我认为这是上下文的原因。所以你可以使用这段代码吗？

```
dba = new DBAdapter(Activity2.this); 
```

代替

```
dba = new DBAdapter(v.getContext()); 
```

# hadoop - 级联中的笛卡尔积

> ID：14681506
> 
> 赞同：0
> 
> 时间：2013-02-04T06:34:33.470
> 
> 标签：hadoop, cascading

我正在开发一个级联程序，它不仅需要找到字数，还需要找到所有单词的总比例。就字数本身以及计算所有计数的总和到具有一个字段和一个元组的单独管道而言，我没有任何问题。

如果我能得到每个字数元组的总数，那么计算就没有问题了。这是一个简单的笛卡尔积......但我该怎么做呢？看起来它应该是一个没有连接字段的 CoGroup，但这是不允许的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T07:03:41.103

级联中的笛卡尔积可以使用[缓冲区](http://docs.cascading.org/cascading/2.0/userguide/html/ch05s05.html)来实现。

给我输入数据的例子，以便我可以为您提供解决方案。

[检查这个](https://groups.google.com/forum/?fromgroups=#!topic/cascading-user/ikNty7oGITg)

# c# - ASP.NET 超时不起作用

> ID：14681507
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:34:34.960
> 
> 标签：c#, asp.net, timeout

为什么我的超时属性不起作用。我将它设置为 1 分钟，即使这样已经一个多小时了，会话还没有过期。这是我在 web.config 中写的

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/Login.aspx" timeout="1" cookieless="UseCookies"  />
    </authentication>
    <sessionState mode="InProc" timeout="1" />
  </system.web> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:56:35.803

我刚刚继承了一个有同样问题的项目。一种可能性是确保您的页面没有对服务器进行任何调用并重置超时。您可以尝试使用诸如[提琴手之](http://www.fiddler2.com/fiddler2/)类的东西来查看您的应用程序是否正在发送*Get*请求...

我让 Ajax Timer Controls 刷新 updatePanels 作为我的问题的根源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:45:08.440

嗨，您正在使用 cookie，因此它不会过期，它将您的会话保存在 cookie 中

# spring - 如何为来自外部非弹簧项目的类设置自动装配

> ID：14681514
> 
> 赞同：2
> 
> 时间：2013-02-04T06:35:24.787
> 
> 标签：spring

我有一个要求，其中我在 Spring 项目中定义了一个合同，并希望在部署期间自动装配一个外部 JAR，以实现合同（接口集）。我不想强制外部 JAR 依赖于 Spring，以便它尽可能灵活。在我的 Spring 项目中，无论我在哪里使用合同接口，都不能使用外部 JAR 中的类作为自动装配替换吗？让我用一个例子来解释：

```
Spring project:
@Controller
public class MyController {
     @Autowired
     private MyInterface interface;
} 
```

现在实现契约接口的JAR可能是客户端提供的，我可能事先不知道包名，甚至可能是非Spring项目，所以不能用@Component注解声明。

例如

```
public class CustomerClass implements MyInterface {
} 
```

现在在我的spring项目中，有没有办法注入CustomerClass来代替MyInterface？我希望我的问题很清楚。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:28:45.920

@Paddy，关于您是否可以通过传统的 XML 方式实现相同目标的担忧。下面是一个示例代码，展示了如何实现它。注意：接口**MyInterface**不能以这种方式动态，因为控制器持有对 MyInterface 的**引用**。

Spring 应用程序上下文配置：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
   <property name="locations" value="classpath:test.properties" />
</bean>
<bean id="myInterface" class="${myinterface.impl}"></bean> 
```

MyInterface 和两个不同的实现类

```
package au.net.test;

public interface MyInterface {

    public String getMessage();
}

public class MyClass1 implements MyInterface{

    public String getMessage(){
        return "message from class 1";
    }
}

public class MyClass2 implements MyInterface{

    public String getMessage() {
        return "message from class 2";
    }   
} 
```

类路径下的 test.properties 文件（您可以使用 ant 脚本和 maven 配置文件来更改属性值）

```
myinterface.impl=au.net.test.MyClass2 
```

web层控制器（可以基于动态bean候选注入实现类）

```
@Autowired
private MyInterface myInterface; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:09:59.310

好的，我明白了。如果是这样，你的问题标题应该是**如何通过 Spring Container 注入动态类型的类**现在让我们谈谈解决方案。首先，您需要有某种属性来保存完全限定的类名。然后您可以在运行时将自定义 bean 注册到 spring 容器中。

```
ClassPathXmlApplicationContext applicationContext = new    ClassPathXmlApplicationContext("classpath:/applicationContext*");
        DefaultListableBeanFactory beanFactory = (DefaultListableBeanFactory) applicationContext.getBeanFactory();
            //register your bean at runtime 
        beanFactory.registerBeanDefinition("myClass", BeanDefinitionBuilder.rootBeanDefinition("au.net.test.DynamicClass").getBeanDefinition());
            //retrieve you bean from spring container
        Object myBean = applicationContext.getBean("myClass");
            //cast to the type of your bean class or interface (be really careful)
        System.out.println(((DynamicClass)myBean).getMessage());

package au.net.test;
//this is the bean gets looked up and injected at runtime
public class DynamicClass {
    //simple method to verify it is working
    public String getMessage(){
        return "this is testing message";
    }
} 
```

在上面的代码中，您只需要使“au.net.test”属性值驱动而不是硬编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:44:38.547

您可以将 factory-bean 与 factory-method 一起使用

```
<bean id="serviceProvider" class="package.ServiceProvider">

<bean id="myInterface"
      factory-bean="serviceProvider"
      factory-method="createMyInterfaceInstance"/>
//it might or might not to be a singleton factory, depending on your requirement.
public class ServiceProvider{
  private static MyInterface myInterface= new CustomerClass();

  private ServiceProvider() {}

  public MyInterface createMyInterfaceInstance() {
    return myInterface;
  }
} 
```

所以基本上这里的想法是你必须创建自己的工厂类和工厂方法来创建实例，根据你的工厂，它可能会创建单例或原型。然后把剩下的工作留给弹簧容器。

# asp.net - 如何在每天的特定时间删除缓存项

> ID：14681517
> 
> 赞同：0
> 
> 时间：2013-02-04T06:35:38.907
> 
> 标签：asp.net, c#-4.0, asp.net-caching

我希望缓存元素中的项目应该在每天晚上 11:59:59 的特定时间删除一次。
我知道`absoluteExpiration`缓存中有一个属性可以在特定时间段内使用。
我正在使用以下代码在缓存中设置值

```
 public static Collection<CProductMakesProps> GetCachedSmartPhoneMake(HttpContext context)
    {
        var allMake = context.Cache["SmartPhoneMake"] as Collection<CProductMakesProps>;
        if (allMake == null)
        {
            allMake = new CModelRestrictionLogic().GetTopMakes();
            context.Cache.Insert("SmartPhoneMake", allMake, null, 
            DateTime.Now.AddHours(Int32.Parse(ConfigurationManager.AppSettings["MakeCacheTime"])),
            Cache.NoSlidingExpiration);
        }
        return allMake;
    } 
```

但是我如何设置缓存到期的确切时间。
我是否需要`manipulate`时间变量并计算`time difference`并设置`absoluteExpiration`或有其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:54:29.013

请在 SO 中检查此答案。它使用 ASP.NET 计时器控件在一天中的特定时间引发事件。我建议您将此值保留为配置条目。此外，还有其他建议。

[如何使用 .NET Timer 类在特定时间触发事件？](https://stackoverflow.com/questions/4529019/how-to-use-the-net-timer-class-to-trigger-an-event-at-a-specific-time)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T07:19:10.000

我找到了创建如下函数的方式

```
 private static double GetTimeLeft()
    {
        //create a time stamp for tomorow 00:10 hours
        var tomorrow0010Minute = DateTime.Now.AddDays(1).Date.AddMinutes(10);
        return Math.Round((tomorrow0010Minute - DateTime.Now).TotalHours);
    } 
```

这给了我一个双重值，我在我的函数中使用如下

```
public static Collection<CProductMakesProps> GetCachedSmartPhoneMake(HttpContext context)
{
    var allMake = context.Cache["SmartPhoneMake"] as Collection<CProductMakesProps>;
    if (allMake == null)
    {
        allMake = new CModelRestrictionLogic().GetTopMakes();
        context.Cache.Insert("SmartPhoneMake", allMake, null, 
        DateTime.Now.AddHours(GetTimeLeft()),
        Cache.NoSlidingExpiration);
    }
    return allMake;
} 
```

并做了 ：）

# php - 如何知道 memcache 的默认文件路径。我正在使用 php mysql

> ID：14681518
> 
> 赞同：1
> 
> 时间：2013-02-04T06:35:42.170
> 
> 标签：php, memcached

如何知道 memcache 的默认文件路径。我正在使用 php mysql 是否有任何规定可以更改默认文件路径用户定义的路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:40:08.803

同意，你为什么关心这个？它是一项正在运行的服务，您无需关心操作系统在磁盘上存储文件的位置。只需确保您已安装并运行该服务。然后只需与[php api](http://www.php.net/manual/en/class.memcache.php)接口就可以了。 [这也是](http://papermashup.com/using-memcache-with-php/)一个简单的例子。

# neo4j - Gremlin sideEffect 变量赋值不起作用

> ID：14681519
> 
> 赞同：1
> 
> 时间：2013-02-04T06:35:55.193
> 
> 标签：neo4j, gremlin

我正在尝试使用以下构造完成逐顶点子图匹配：

```
a = g.v(1) 
p = g.v(5) 

a.filter{it.map() == p.map()}.out.sideEffect{p = p.out}.loop(3){it.object != null} 
```

我应该说地图比较出人意料地工作得很好，但是副作用部分似乎没有以`p`适当的方式修改 -vertex 。当我在执行这些 Gremlin 步骤后打印时`p`- 它看起来像一条管道。但更明确`p = g.v(p.out.id)`的，`p = g.v(p.outE.inV.id)`甚至数字`i++`的副作用似乎根本不会修改该值。

我在 Neo4j Gremlin shell 和 Groovy 中都试过这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T12:14:30.680

如果您在期望其他内容时获得了管道，请尝试使用 next() 来查看是否可以满足您的需求。请注意，当我在 sideEffect 闭包中使用 next() 时，x 会发生变化。

```
gremlin> g = TinkerGraphFactory.createTinkerGraph()
==>tinkergraph[vertices:6 edges:6]
gremlin> x = g.v(1)
==>v[1]
gremlin> g.V.out.sideEffect{x = x.out.next()}   
==>v[2]
gremlin> x
==>v[2] 
```

# javascript - JQuery Lightbox：缩略图正常，背景变暗，但没有大图显示

> ID：14681520
> 
> 赞同：7
> 
> 时间：2013-02-04T06:35:57.397
> 
> 标签：javascript, jquery, plugins, lightbox

我有一个奇怪的问题，灯箱似乎正在工作，但没有出现更大的图像。

图像链接正确，缩略图显示，但没有完整尺寸的图像。

控制台中也没有错误。

我的画廊 HTML 设置如下：

```
<a href="images/here.jpg" rel="lightbox[gallery]"><img src="images/here.jpg" alt="FAST Festival Image Gallery"></a> 
```

我确保 JQuery、JQuery UI、Lightbox.css、Lighbox.js 和 jquery.smooth-scroll.min.js 都存在。

该页面是： http: [//www.fastfestival.com.au/gallery.html](http://www.fastfestival.com.au/gallery.html)

有谁知道发生了什么？

编辑：

在控制台中检查，我看到 Lightbox div 中没有出现图像

`<div id="lightboxOverlay" style="width: 1633px; height: 1234px; display: block;"></div>`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-13T22:00:47.180

与 jQuery 1.9 的冲突​​与[.after() 方法的新行为有关](http://jquery.com/upgrade-guide/1.9/#after-before-and-replacewith-with-disconnected-nodes)。您可以重写`Lightbox.prototype.build`Lightbox 中的方法以避免在断开连接的节点上使用 .after() 方法，Lightbox 将再次与 jQuery 1.9 一起使用。

下面是我快速破解的解决方案（有效）。它可以通过更多的链接来清理，但我决定把它留到以后，或者可能只是等待 Lightbox v2.51 被更新以包含一个标准化的修复。

```
Lightbox.prototype.build = function() {
  var $lightbox,
    _this = this;

  // Editing here for jQuery 1.9 conflict
  $("<div>", { "id": "lightboxOverlay" }).appendTo("body");

  lightbox = $("<div>", { "id": "lightbox" });

  outerContainer = $("<div>", { "class": "lb-outerContainer" });
  container = $("<div>", { "class": "lb-container" });
  $(container).append($("<img>", { "class": "lb-image" }));
  nav = $("<div>", { "class": "lb-nav" });
  $(nav).append($("<a>", { "class": "lb-prev" }));
  $(nav).append($("<a>", { "class": "lb-next" }));
  loader = $("<div>", { "class": "lb-loader" });
  $(loader).append($("<a>", { "class": "lb-cancel" }).append($("<img>", { "src": this.options.fileLoadingImage })));
  $(container).append(nav);
  $(container).append(loader);
  $(outerContainer).append(container);

  dataContainer = $("<div>", { "class": "lb-dataContainer" });
  data = $("<div>", { "class": "lb-data" });
  details = $("<div>", { "class": "lb-details" });
  $(details).append($("<span>", { "class": "lb-caption" }));
  $(details).append($("<span>", { "class": "lb-number" }));
  closeContainer = $("<div>", { "class": "lb-closeContainer" });
  $(closeContainer).append($("<a>", { "class": "lb-close" }).append($("<img>", { "src": this.options.fileCloseImage })));
  $(data).append(details);
  $(data).append(closeContainer);
  $(dataContainer).append(data);

  $(lightbox).append(outerContainer);
  $(lightbox).append(dataContainer);

  $(lightbox).appendTo("body");
  // End custom changes

  $('#lightboxOverlay').hide().on('click', function(e) {
    _this.end();
    return false;
  });
  $lightbox = $('#lightbox');
  $lightbox.hide().on('click', function(e) {
    if ($(e.target).attr('id') === 'lightbox') _this.end();
    return false;
  });
  $lightbox.find('.lb-outerContainer').on('click', function(e) {
    if ($(e.target).attr('id') === 'lightbox') _this.end();
    return false;
  });
  $lightbox.find('.lb-prev').on('click', function(e) {
    _this.changeImage(_this.currentImageIndex - 1);
    return false;
  });
  $lightbox.find('.lb-next').on('click', function(e) {
    _this.changeImage(_this.currentImageIndex + 1);
    return false;
  });
  $lightbox.find('.lb-loader, .lb-close').on('click', function(e) {
    _this.end();
    return false;
  });
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T05:07:37.033

此版本的 LightBox 似乎与最新版本的 JQuery 不兼容。

我已经链接到 Google 上托管的 1.9 版。我更改为下载附带的 1.7 版，它可以工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T19:28:18.030

我发现最新版本的 jquery-rails gem v2.2.0 正在加载 jquery 1.10，这是一个比我仍然运行 jquery 1.8.3 的生产站点上的新版本。出于某种原因，这完全按照您的描述破坏了 Lightbox2 (v2.51) - 屏幕变暗但没有显示图像。不确定这是 jquery 还是 lightbox 问题，但是为了将我的最新更改推送到生产环境，我只是手动强制我的应用程序使用以前版本的 jquery v1.8.3 在我的应用程序布局中使用脚本标记：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<%= javascript_include_tag "application" %> 
```

确保将其放在创建资产管道和所有其他 javascript 文件的 javascript_include_tag 之上。此外，注释掉 application.js 中对 jquery 的任何引用以禁用它。

我知道以这种方式链接并不理想，但我在尝试使用早期版本的 jquery-rails gem 时遇到了问题，因此至少在一段时间内手动操作为我解决了这个问题。希望这对其他人有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:38:41.620

您必须在锚标记中使用更大的图像 href，它不是自动的。您链接到图片的更大版本，而不是浏览器将您带到那里，而是在花式框中显示它。但是您仍然必须提供图像。

```
<a href="images/here_big.jpg" rel="lightbox[gallery]"><img src="images/here.jpg" alt="FAST Festival Image Gallery"></a> 
```

# c# - 如何在 ASP.NET 中找到根页面？

> ID：14681521
> 
> 赞同：1
> 
> 时间：2013-02-04T06:35:59.830
> 
> 标签：c#, asp.net, wcf, web-services, uri

您好，我构建了一个 WCF Webservice，它应该返回网站的根页面。例子：

网络服务地址：

```
http://localhost/bov2/OPS.svc 
```

根页面：

```
http://localhost/bov2/ 
```

如何创建一个显示根页面的字符串？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:39:28.927

尝试这个

```
string baseUrl = String.Format("{0}://{1}{2}/", Request.Url.Scheme,
Request.Url.Authority,
Request.ApplicationPath.TrimEnd('/')); 
```

有时我把它放在一个公共类中，在这种情况下你应该使用这个语法

```
 public static string GetBaseUrl()
        {
            HttpContext context = HttpContext.Current;
            string baseUrl = String.Format("{0}://{1}{2}/", 
            context.Request.Url.Scheme,
            context.Request.Url.Authority,
            context.Request.ApplicationPath.TrimEnd('/'));
            return baseUrl;
        } 
```

# uml - UML 状态机子状态转换

> ID：14681522
> 
> 赞同：4
> 
> 时间：2013-02-04T06:36:02.997
> 
> 标签：uml, modeling

是否可以在 UML 中模拟从外部状态到复合状态的子状态的转换，如下图（State3->State1.2）？

如果是这样，语义是什么？

我猜当 State3 中发生事件时

*   State3 退出动作被执行
*   State1 进入动作被执行
*   State1.2 进入动作被执行

我对吗？

![在此处输入图像描述](../Images/818d1fb78d7f461cc3b74a2c44dac049.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T14:21:17.563

是的你可以。从上层建筑：

> 显式入口：如果转换进入复合状态的子状态，则该子状态变为活动状态，并且在执行复合状态的入口代码之后执行其入口代码。如果转换终止于可传递嵌套的子状态，则此规则递归应用。

# ajax - request.getParameter() 用于 AJAX 调用时返回 null

> ID：14681526
> 
> 赞同：1
> 
> 时间：2013-02-04T06:36:22.560
> 
> 标签：ajax, jsp, xmlhttprequest, request

我正在使用 AJAX 调用调用 jsp：

```
 var httpRequest = null;
        if (window.XMLHttpRequest) {
            httpRequest = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }
        if (!httpRequest) {
            console.error('Cannot create an XML HTTP instance');
            return false;
        }
        httpRequest.onreadystatechange = function() {
            try {
                if(httpRequest.readyState === 4) {
                    ...
                }
            } catch(e) {
                args.error(e);
            }
        };
        httpRequest.open(args.method, args.path, args.sync);
        httpRequest.setRequestHeader(...);
        var q = '', first = true;
        for(var key in args.params) {
            if(params.hasOwnProperty(key)) {
                if(first) {
                    first = false;
                } else {
                    q += '&';
                }
                q += encodeURIComponent(key) + '=' + encodeURIComponent(args.params[key]);
            }
        }
        httpRequest.send(q); 
```

对于这个请求，我将查询参数传递为：

```
{
    from: 'xyz',
    to: 'abc'
} 
```

正在构建的查询也是正确的：

```
from=xyz&to=abc 
```

然而，在我的 JSP 上，当我这样做时`request.getParameter("from")`，我得到`null`. 我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:39:06.537

找到了解决方案：

缺少标头：httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

这是发布[请求](https://developer.mozilla.org/en-US/docs/AJAX/Getting_Started)所必需的。

# ios - 如何使iOS项目的目录与产品名称不同

> ID：14681528
> 
> 赞同：1
> 
> 时间：2013-02-04T06:36:30.840
> 
> 标签：ios, directory, project

使用 Xcode 4.5.2，我想创建名为“My App”的项目（使用 File->New->Project）。如果您不将其添加到现有项目中，则会创建以下目录，假设您将目录“ios”指定给 xcode：

```
ios/My App/My App/
ios/My App/My App.xcodeproj/ 
```

创建项目时，不允许为上述目录指定名称。我想要这个目录结构：

```
ios/MyApp/
ios/MyApp.xcodeproj/ 
```

即在名称和直接在“ios”下创建的目录中没有空格。产品名称仍应为“我的应用程序”，并带有空格。你会怎么做呢？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:39:59.277

产品名称您可以如何更改：

1) 打开 XCode 项目并按 cmd + 1

2）在左侧面板中选择您的项目

3）在中间面板选择你的目标

4) 点击“构建设置”

5) 查找“产品名称”

在这里您可以写下您的产品名称。产品名称不取决于您的目录名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T19:20:19.730

经过一些实验，这里是第二部分的步骤：

```
- Show Navigator pane
- In Project Navigator, select project 'MyApp'
- Show Utilities pane
- Select File Inspector in Utilities pane
- Under Identity, click on the right arrow next to the Full Path of the project directory
- In the Finder that pops up, rename the parent MyApp to xyz. You'll see a popup that promts to either 'Close' or 'Re-save'. Select Close.
- The xcode window disappears.
- In the Finder, move MyApp and MyApp.xcodeproj one level above from where they are - i.e. to be at the same level as xyz.
- Delete xyz
- Double-click on MyApp.xcodeproj to open it in xcode.
- It should now work 
```

# android - 建立连接以将数据从 Web 或应用程序服务器发送到 Android 设备

> ID：14681529
> 
> 赞同：0
> 
> 时间：2013-02-04T06:36:32.933
> 
> 标签：android, webserver, push-notification, push

你好安卓开发者，

我是一名 android 开发人员，我想构建一个从服务器接收数据并将其显示为通知消息的应用程序。我正在尝试在不使用谷歌 GCM 的情况下创建推送通知服务。

我如何从我的 Web/应用程序服务器向特定的 android 设备发送消息，以及如何在不使用 GCM 的情况下找到 android 设备为该特定设备发送数据。

您的有用建议将不胜感激。

提前致谢。

萨蒂什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:48:05.733

谷歌是第一位的。但是使用[GCM](https://developers.google.com/android/c2dm/)，它是谷歌的推送通知。

# monodevelop - 在 MonoDevelop 中编译 C# 程序？

> ID：14681530
> 
> 赞同：1
> 
> 时间：2013-02-04T06:36:33.810
> 
> 标签：monodevelop

我知道这是一个非常愚蠢和容易的问题，但我自己无法弄清楚。

我用 C# 编写了我的第一个程序。为了调试它，我一直在使用在线编译器，但是我的免费运行用完了，而且我知道无论如何我都需要尽快学习使用 MonoDevelop。

它看起来像是在 Mac 上编写和运行 C# 程序的完美环境，但我仍然无法将程序添加到项目的解决方案中，因此无法编译它。

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:18:05.100

项目将一组源文件编译为库或可执行文件。解决方案是一个或多个项目的容器。如果您创建一个新项目，将自动创建一个解决方案。您是否尝试过创建和运行默认控制台应用程序项目？

# c - 在c中将浮点数转换为字符串

> ID：14681533
> 
> 赞同：0
> 
> 时间：2013-02-04T06:36:44.057
> 
> 标签：c, floating-point, char, systems-programming

我正在编写一个函数，它将以 void 指针的形式传递一个浮点数。我正在尝试做的是将该浮点数转换为等效的字符串，以便我可以将该二进制数据保存在内存中。例如对我的函数的调用如下：

```
void * f(void * data); 
```

如果用户经过我

```
float value = 3.14; 
```

我想将其转换为字符串，如下所示：

```
"3.14" 
```

我认为我应该使用的方法是首先确定浮点数中的值的数量：3.14 = 四个值。然后我必须遍历每个值并将其转换为字符。

我遇到的几个问题是 1：我不确定是否甚至可以确定与给定浮点数关联的值的数量。2：如何将每个值转换为其等效的字符串？

我遇到了 itoa 和 sprintf。但是， itoa 不是标准 C 库的一部分，我不确定 sprintf 是否会按照我的意愿行事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:39:03.507

大多数系统（尤其是 POSIX 系统）都有`snprintf`(and `strdup`)，因此您可以编写代码

```
 char buf[48];
 snprintf (buf, sizeof(buf), "%f", x); 
```

如果你想返回那个字符串，`strdup`它（那么你需要稍后`free`的结果`strdup`）。

PS：`sprintf`比`snprintf`因为它可能溢出缓冲区更危险

# android - Wifi 热点/ Teather 连接用户

> ID：14681536
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:36:58.397
> 
> 标签：android

我想找到用户的名字，他们都通过我的 android（非 root 手机）中的 wifi 热点连接。

我曾尝试使用 ping 获取用户 ipAddress ..但这给了我 Exception arp -a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:44:01.850

您仍然可以使用终端模拟器。有关其他详细信息，请查看以下链接。 [https://android.stackexchange.com/questions/20689/is-there-a-way-to-check-who-is-connected-to-my-galaxy-nexus-hotspot](https://android.stackexchange.com/questions/20689/is-there-a-way-to-check-who-is-connected-to-my-galaxy-nexus-hotspot)

# forms - MVC 4 Razor + jquery mobile 无法在表单提交时“发布”

> ID：14681541
> 
> 赞同：0
> 
> 时间：2013-02-04T06:38:10.857
> 
> 标签：forms, jquery-mobile, razor, asp.net-mvc-4, submit

我是 ASP.NET MVC 4 的新手，我正在尝试在 jquery mobile 上创建一个简单的登录表单。我想用 Razor 创建一个简单的 jquerymobile MVC 4 页面，当用户单击提交时，该页面将“发布”。

但是每次我单击“登录”按钮（即提交按钮）时，它都会继续执行我控制器中的“获取”操作。

并且萤火虫也将请求显示为“GET”，请帮助给我一些关于我做错了什么的指导。:(

以下是我的代码，提前谢谢你。

我的观点

```
@model com.mywebsite.Models.LoginModel

<div data-role="page" data-theme="a" id="main">
            <div data-role="header" id="topbar" data-theme="b">
                <a href="index.html" class="back" data-direction="reverse"></a>
                <div class="header_title">Login</div>
            </div>

  <div data-role="content" data-theme="e"  id="content">
@using (Html.BeginForm("Login", "User", FormMethod.Post, new Dictionary<string,Object> { {"enctype","multipart/form-data"}, {"data-ajax","false"}}))
{
    @Html.ValidationSummary(true, "Login failed. Check your login details.");    

    <fieldset>    
    <div class="container1 " >
    <div class="fblogin"></div>
    <div class="or">Or</div>
  <div class="container1_1">
  <legend>Login</legend>
        <div  class="textwrapper grid">
            <div class="leftcolumn"><label for="name">Email:</label></div>
            <div class="leftcolumn">                
                @Html.TextBoxFor(u => u.UserName, new Dictionary<string,Object> { {"data-theme","d"}, {"id","e"}, {"type","email"}, {"size","20"}})

            </div>
        </div>
     </div>   
        <div  class="textwrapper container1_1">
            <div class="leftcolumn"><label for="password">Password:</label></div>
            <div class="leftcolumn">
                @Html.PasswordFor(u => u.Password, new Dictionary<string,Object> { {"data-theme","d"}, {"id","p"}, {"type","password"}})
            </div>
        </div>    
    </div>   
    <input type="submit" value="Log In" rel="external" data-ajax="false" />

  <div class="fpwd"><a href="index.html" data-theme="d">Forgot Password?</a></div>
  <div class="container1">
          <div class="container1_1">
        <legend>Don't have an account yet?</legend>
        <ul data-role="listview" data-inset="true" data-theme="d" class="nopadding">
        <li ><a href="signup.html"><div class="icon_signup_list"></div>Register</a></li>
        </ul>
        </div>
  </div>
        </fieldset>
}  
<!-- end content-->
</div>

@Html.Partial("~/Views/Shared/_Footer.cshtml")
<!--end page-->
</div> 
```

我的模型（与默认的 MVC 应用程序模板相同）

```
public class LoginModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
} 
```

我的控制器

```
public class UserController : Controller
{        
    // GET: /User/
    public ActionResult Login(string returnUrl)
    {
        return View();
    }

    // POST: /User/Login/
   [HttpPost]
    public ActionResult Login(LoginModel user)
    {
        var obj = UserModels.GetUser(user.UserName, user.Password);
        return View();
    }
 } 
```

我的 Global.asax.cs

```
 public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
        AuthConfig.RegisterAuth();

    }

    protected void Application_BeginRequest()
    {
        const string culture = "id";
        CultureInfo ci = CultureInfo.GetCultureInfo(culture);

        Thread.CurrentThread.CurrentCulture = ci;
        Thread.CurrentThread.CurrentUICulture = ci;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:11:19.103

您有嵌套的表单标签：

```
@using (Html.BeginForm("Login", "User", FormMethod.Post, new Dictionary<string,Object> { {"enctype","multipart/form-data"}, {"data-ajax","false"}})) 
```

和

```
<form action="/User/Login" method="post" data-ajax="false"> 
```

这两行代码都会产生一个标签。嵌套标签在 HTML 4+ 中是非法的。请删除其中一个表单标签，这应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T02:50:34.933

几天来发现我痛苦的愚蠢错误。

删除了**我的 _Layout**上的标签，它起作用了。

谢谢@onemancat 的回复，它提示我看看其他领域。

# lambda - 如何获得另一个列表中的列表总和？

> ID：14681542
> 
> 赞同：1
> 
> 时间：2013-02-04T06:38:13.243
> 
> 标签：lambda, prolog, swi-prolog

我有一个包含多个列表的列表。我想将这些列表的总和放入另一个列表中。

> 完整列表（[[12,13,14]，[5,7,9]，[1,12,72]]）。%这是我的原始清单

我想得到如下输出，L=[39,21,85]。

有人请解释我如何使用prolog来做到这一点。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T11:44:12.313

有[sum_list](http://www.swi-prolog.org/pldoc/man?predicate=sum_list/2) /2，一个可以使用的内置函数：

```
full_list(I, L) :-
    maplist(sum_list, I, L). 
```

测试：

```
?- full_list([[12,13,14],[5,7,9],[1,12,72]], L).
L = [39, 21, 85]. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T08:32:13.007

与 SWI-Prolog 一起使用的功能设计

```
:- use_module(library(lambda)).

sum_list(L, R) :-
    maplist(\X^foldl(\T^U^V^(V is T+U), X, 0), L, R). 
```

lambda.pl 可以在这里找到：http: [//www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/lambda.pl)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T08:13:14.273

使用这样的列表总和谓词：

```
listSum(nil,N,N);
listSum([H|Tail],N,Res) :- Acc is N+H, listSum(Tail,Acc,Res)

sumofSubLists([L1,L2,L3],[R1,R2,R3]):-
     listSum(L1,0,R1),
     listSum(L2,0,R2),
     listSum(L3,0,R3) 
```

打电话

```
sumofSubLists([[12,13,14],[5,7,9],[1,12,72]], ResultList) 
```

应该给出结果。这可以更有效地完成......希望它有所帮助

* * *

好吧，如果你想用任意数量的列表来做，你需要定义一些新的谓词：

AddElement 将新元素添加到列表中：

```
 addElement(X,[],[X]); 
   addElement(X,L,[X|L]); 
```

另一个附加列表：

```
 append([],X,X);
  append([T|Q1],X,[T|Q2]) :- append(Q1,X,Q2); 
```

还有一个用于列表的递归：

```
 sumSubListsRec(nil,AccList,ResultList):- ResultList = AccList;
 sumSubListsRec([HeadList| Tail], AccList,ResultList) :-
              listSum(HeadList,0,Tmp),
              append(AccList,[Tmp],T),
              sumSubListsRec(Tail,T,ResultList); 
```

现在您可以使用任意数量的列表调用它。

# c# - 当在 sql server 表中插入特定值时，如何在 C# 中运行事件..？

> ID：14681544
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:38:27.160
> 
> 标签：c#, winforms, sql-server-2008, triggers

我有一个实时应用程序以每秒一次插入的速率记录来自设备的一些值。

现在我的问题是当插入到表中的值超出范围时，我想在我的 UI 中得到通知......

我不知道如何实现这个......请帮助使用哪种技术......它是触发器还是CLR触发器或任何其他方式......？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:54:07.153

您可能可以使用计时器来验证新插入的值，或者，如果您想使用触发器，请打印一些信息并使用`SqlConnection.InfoMessage`事件。在您的事件处理程序中查询表以获取新值。请注意，第二个选项需要永久打开的连接，这可能是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:56:07.667

You can try SQL server notification service. [http://technet.microsoft.com/en-us/library/cc966501.aspx](http://technet.microsoft.com/en-us/library/cc966501.aspx)

# c++ - 更改 QLineEdit 占位符文本的颜色

> ID：14681548
> 
> 赞同：0
> 
> 时间：2013-02-04T06:38:46.093
> 
> 标签：c++, css, qt

我正在用 Qt 4.8 编写一个应用程序，并通过 CSS 来利用样式。在设置 QLineEdit 样式时，有诸如 之类的属性`selection-background-color`，是否有一个属性可以让我更改占位符文本的颜色？

如果没有，有没有其他方法可以改变它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T15:31:21.043

也许您可以将调色板更改连接到信号 textChanged()：当行编辑为空时更改文本颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:49:19.467

占位符的颜色是 alpha 设置为 50% 的文本颜色。至少在 4.7 中，这是硬编码的，因此不能随风格改变。

由于决定是在 QLineEdit::paintEvent 中实现的，因此您可以在派生类中覆盖 paintEvent 并将颜色更改为适合您的颜色。

但是你为什么想要不同的颜色呢？如果您将其更改为红色或类似的东西，您可能会激怒无法区分占位符和“真实”文本的用户。

# uima - UIMA 正则表达式注释器

> ID：14681549
> 
> 赞同：3
> 
> 时间：2013-02-04T06:38:47.413
> 
> 标签：uima

我是 UIMA 架构的新手。我下载了 UIMA SDK（[http://uima.apache.org/downloads.cgi#Latest](http://uima.apache.org/downloads.cgi#Latest) Official Releases）以及相应的 Eclipse 插件。我能够成功运行教程示例。

我从 apache SVN ( [http://svn.apache.org/viewvc/incubator/uima/sandbox/trunk/RegularExpressionAnnotator/?pathrev=627314](http://svn.apache.org/viewvc/incubator/uima/sandbox/trunk/RegularExpressionAnnotator/?pathrev=627314) ) 获取 Regex Annotator 代码并尝试运行 RegEx Annotator 但我总是得到 org. apache.uima.resource.ResourceInitializationException：未找到注释器类“org.apache.uima.annotator.regex.impl.RegExAnnotator”。

所有文件都已就位，我已将 UIMA_HOME 设置为所需目录，我的构建路径中有 uima-core.jar 和 xbean-1.03.jar。

当我检查 bin 目录并反编译这些类时，我也能看到 RegExAnnotator.class。

有人能弄清楚我错过了什么以及如何重新解决这个问题吗？我做了很多谷歌，我在另一个网站上看到了类似的帖子，但没有解决方案。我有点卡在这里。任何指针将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:49:32.057

我能够解决这个问题。我所做的只是在我的运行配置中指向我创建的正则表达式相关项目。默认情况下，它指向 uima-examples 项目。

# java - GSM 小区（经度，纬度），它的扇区和一些对象（经度，纬度）

> ID：14681555
> 
> 赞同：0
> 
> 时间：2013-02-04T06:39:37.007
> 
> 标签：java, geolocation, geometry, gsm

我有一个相当简单的任务，我想请你推荐。我希望有一个Java库可以帮助我。

**描述**

**给定**

1.  具有经度、纬度、方位角、最大和最小距离的 GSM 小区。借助这些参数，我可以描述一个扇区（圆圈的一部分）
2.  物体的经度、纬度和半径。

**意义**

每个 GSM 小区由几个扇区组成（它们从一个点开始）。每个对象都表示为一个圆圈（经度、纬度、半径）。一个圈可以

1.  触摸一个扇区
2.  截取一个扇区
3.  截取给定 GSM 小区的几个扇区

**任务：** 我得到一个 GSM 单元列表和一个对象。我需要找到具有某些扇区的对象的所有迭代/触摸。我需要按拦截平方的拦截结果列表进行排序。

看起来像典型的数学/几何任务。Java中有没有可以帮助我的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:42:03.630

1) 将所有纬度、经度坐标转换为以米为单位的笛卡尔 x,y。（你可以使用简单的 EuqiDistant 投影）在这里或 wiki、google 上搜索

2）一旦所有都在x，y坐标中，那就是学校数学：
点在圆内？：点和圆心之间的距离<圆弧
段中的半径点？点在圆内，从点到中心点的角度在扇区方位角范围内。

使用计算从point1到point2的角度

```
angleRad = atan2(dy/dx); 
```

其中 dy = p2.y - p1.y
dx 模拟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T12:55:45.177

所以这是我的解决方案。我们决定二维投影的“中心”应该是相对的。它确实适合我们的任务。以下是一些代码示例：

```
public final class GeometryUtil {
    /**
        https://www.cfa.harvard.edu/~dfabricant/huchra/ay145/constants.html
        1 Earth Radius = 6.37814x108 cm = 6.37814x10^6 m (Equatorial)
     */
    public static final double EARTH_RADIUS_IN_METERS = 6.37814e+6;

    private GeometryUtil(){}

    /**
     * @param geoPoint is a point of some object you want to translate to Cartesian.
     * @param geoPointRelative is a point of relative center.
     *                         We suppose that this relative GeoPoint is a center for the first parameter.
     * */
    public static Coordinate toCoordinate(GeoPoint geoPoint, GeoPoint geoPointRelative){
        return new Coordinate(toX(geoPoint, geoPointRelative.getLongitude()),
                              toY(geoPoint, geoPointRelative.getLatitude()));
    }

    public static double toX(GeoPoint geoPoint, double relativeLongitude){
        return  EARTH_RADIUS_IN_METERS *
                cos(toRadians(geoPoint.getLatitude()))  *
                toRadians(geoPoint.getLongitude()- relativeLongitude);
    }

    public static double toY(GeoPoint geoPoint, double relativeLatitude){
        return  EARTH_RADIUS_IN_METERS * toRadians(geoPoint.getLatitude() - relativeLatitude);
    }

} 
```

这是几何图形的构建器：

```
public final class GeometryBuilder {

    private static final int DIAMETER_MULTIPLIER = 2;
    private static final int TURN_LEFT = 90;    //We should start to roll to the right from "North"/"Up"/12 o'clock

    private GeometryBuilder(){}

    public static Circle buildCirlce(GeoPoint centerOfCircle, GeoPoint relativeCenter, Distance radiusDistance){
        GeometricShapeFactory geometricShapeFactory = new GeometricShapeFactory();
        geometricShapeFactory.setCentre(GeometryUtil.toCoordinate(centerOfCircle, relativeCenter));
        geometricShapeFactory.setSize(radiusDistance.getMeters() * DIAMETER_MULTIPLIER);
        return new Circle(geometricShapeFactory.createEllipse());
    }

     public static Sector buildGSMCellSector(GSMCellLocation gsmCellLocation, GeoPoint relativeCenter){
        GeometricShapeFactory geometricShapeFactory = new GeometricShapeFactory();
        geometricShapeFactory.setCentre(GeometryUtil.toCoordinate(gsmCellLocation.getGeoPoint(), relativeCenter));
        geometricShapeFactory.setSize(gsmCellLocation.getMidDist() * DIAMETER_MULTIPLIER);
        return new Sector(geometricShapeFactory.createArcPolygon(-toRadians(gsmCellLocation.getEndAngle()- TURN_LEFT),
                                                                  toRadians(gsmCellLocation.getAngleWidth())));
    }
} 
```

我应该提到 TURN_LEFT 是特定的。我的对象的角度从 12 点开始。几何库从 3 点开始计数。这就是为什么我必须将其转回 3 小时（90 度）。

问题已经解决了。我还使用 LiteShape 将一些图像绘制到 PNG 文件中。一切正常。

# castor - 如何为 XML 属性值生成 castor

> ID：14681556
> 
> 赞同：1
> 
> 时间：2013-02-04T06:39:44.027
> 
> 标签：castor

我是脚轮映射的新手，任何人都可以建议我如何为以下 xml 编写脚轮。

```
<Amt >
    <CustAmt Ccy="USD">35.47</CustAmt>
</Amt> 
```

特别是我正在寻找属性值的映射。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T09:10:48.627

这是一个例子：

```
<class name="mypackage.OrderItem" auto-complete="true">
   <map-to xml="Amt" />
   <field name="custAmt" type="double">
      <bind-xml name="CustAmt" node="element" />
   </field>

   <field name="ccy" type="string">
       <bind-xml name="Ccy" node="attribute" location="CustAmt" />
   </field>
</class> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T06:21:12.963

```
 <class name="mypackage.OrderItem">
        <map-to xml="Amt" />
        <field name="ccy" type="string">
            <bind-xml name="Ccy" node="attribute"/>
        </field>
        <field name="custAmt" type="double">
            <bind-xml name="Amt" node="text" />
        </field>
 </class> 
```

# exception - kafka 性能测试因 OffsetOutOfRangeException 而失败

> ID：14681558
> 
> 赞同：1
> 
> 时间：2013-02-04T06:39:54.010
> 
> 标签：exception, apache-kafka

我从 GitHub 下载了 kafka-dev repo，并打算按照[官方页面](http://kafka.apache.org/performance.html)运行性能测试。

我构建了 Kafka 并在 perf/README.md 中运行了命令：

```
 ./sbt
  project perf
  package-all 
```

然后我启动了 zookeeper 和 kafka 服务器，最后（在 perf 目录中）：

```
 ./run-simulator.sh -kafkaServer=localhost -numTopic=10  -reportFile=report-html/data -time=15 -numConsumer=20 -numProducer=40 -xaxis=numTopic 
```

但是测试失败了`kafka.common.OffsetOutOfRangeException`，这是错误信息：

```
Exception in thread "127.0.0.1-Consumer-10" kafka.common.OffsetOutOfRangeException
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at java.lang.Class.newInstance0(Class.java:372)
at java.lang.Class.newInstance(Class.java:325)
at kafka.common.ErrorMapping$.maybeThrowException(ErrorMapping.scala:53)
at kafka.message.ByteBufferMessageSet.kafka$message$ByteBufferMessageSet$$deepIterator(ByteBufferMessageSet.scala:104)
at kafka.message.ByteBufferMessageSet.deepValidBytes(ByteBufferMessageSet.scala:90)
at kafka.message.ByteBufferMessageSet.validBytes(ByteBufferMessageSet.scala:75)
at kafka.javaapi.message.ByteBufferMessageSet.validBytes(ByteBufferMessageSet.scala:57)
at kafka.perf.consumer.SimplePerfConsumer.run(SimplePerfConsumer.java:78)
     ... 
```

有任何想法吗？

# java - 混合 Javascript 和 JSP 时要遵循的良好做法？

> ID：14681559
> 
> 赞同：3
> 
> 时间：2013-02-04T06:39:57.010
> 
> 标签：java, javascript, jsp

在理想情况下，我想将 Javascript 分离到一个完全不同的文件中，并将其包含在 JSP 页面中。但是在某些情况下，我很难遵循这条规则，因为动态生成的 Javascript 更容易编写！

几个例子：

1) 警报框中的区域设置特定错误消息。

```
<%
Locale locale = ..//get current locale
%>

<script language="JavaScript">
function checkMessage() {
  if(document.form.msg.value=='') {
    alert(<%= *LocaleHelper.getMessage(locale,"please_provide_message")* %>); //get the locale specific message . mixing Javascript and JSP !!!
  }
} 
```

2) 初始化值。有时您需要使用 JSP 获取值，这将在 javascript 方法中使用

```
function computeExpiry () {
 var creationDate= <%= creationDate =%>
 var currentDate = document.form.date.value;
 var jsCreationDate= converToDate(creationDate);
 return currentDate>creationDate ;
} 
```

3) 动态初始化配置对象

```
var myConfig = {
     modal:true,
     resize:true,
   <% if (lastPage) { %>
     showPreviousButton  :true,  
     showNextButton : false ,
     showSubmitButton : true,
   <%}  else  {%>
   showPreviousButton  :true,  
     showNextButton : true ,
     showSubmitButton : false,
   <%} %> 
```

可以想象，如果没有任何约定，我们所有的 JSP 都将是 Javascript 和 JSP 的难看混合体，难以理解和维护，并且包含大量不可重用的 javascript 代码

我不是在寻找完美的解决方案。我知道这样做比尝试保持纯 Javascript 和 JSP 分离更容易。我正在寻找简化此过程的建议，并希望很多人有值得分享的经验。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T07:04:40.093

混合使用 JavaScript 和 JSP 会使代码更难阅读、重用、维护并且还会降低性能（这样的 JS 代码不能被外部化和压缩）。尽可能避免这种情况。

一种方法是在一个地方收集所有与 JSP 相关的变量，并将非 JSP 代码分解到另一个纯/静态 JavaScript 文件中。例如：

```
<script type='text/javascript' > 
    var app = { // global app "namespace" holds app-level variables
     msg: "<%= *LocaleHelper.getMessage(locale,"please_provide_message")* %>";
     creationDate: <%= creationDate =%>;
     btnConfig: {
       <% if (lastPage) { %>
           showNextButton : false ,
           showSubmitButton : true,
       <%} else  {%>
           showNextButton : true ,
           showSubmitButton : false,
       <%} %>
      }
    };
</script>

// following JS has no JSP, you can externalize them into a separate JS file
// s.t. they can be compressed and cached.
function checkMessage() {
  if(document.form.msg.value=='') {
    alert(app.msg);
  }
}

function computeExpiry () {
    var creationDate= app.creationDate;
    var currentDate = document.form.date.value;
    var jsCreationDate= converToDate(creationDate);
    return currentDate > creationDate;
 }

 var myConfig = _.extend({   // underscore library's extend
     modal: true,
     resize: true,
     showPreviousButton: true,  
 }, app.btnConfig); 
```

顺便说一句，在实际应用中，我推荐像[RequireJS](http://requirejs.org/)这样的模块加载器库，而不是原始地定义全局变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T07:29:01.657

我试图避免这种情况，但是当我必须**将**数据从后端传递到前端时，我使用了一个平面 JavaScript 对象，它是由后端的哈希创建的。您可以将任何语言的哈希转换为 JSON 字符串。在您的 HTML 页面中放置一个`<script>`标签并将该 JSON 字符串转储到其中并将其分配给一个 JavaScript 变量。

例如：

```
<script>
  var dataFromBackEnd = JSON.parse(<%= Hash.toJSON(); %>); // I'm just assuming JSP part
</script> 
```

从这一点来看，JavaScript 应该关注逻辑。如果存在 JS 需要对其采取措施的条件，则将其布尔值传递给 JS。不要**混淆**逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:49:07.947

首先，您可以避免使用小脚本。而是使用它使用 JSP 标记，如 JSTL。它将允许您更好地格式化您的代码。

# sql - 检查 case 语句中所有组的计数

> ID：14681567
> 
> 赞同：1
> 
> 时间：2013-02-04T06:40:38.057
> 
> 标签：sql, tsql

我有一种情况，我需要根据某个列值 **（如下所示）**对申请人进行分组并找到该组的计数。当前，查询仅返回计数大于 0 的列。

应该对查询进行哪些修改，以便将所有组及其计数显示为零？

询问：

```
select Applicant_info.range as [Income Range], count(*) as [Total Students],order_number =
          CASE range
             WHEN 'Did not specify' THEN '1'
             WHEN '0-25000' THEN '2'
             WHEN '25001-50000' THEN '3'
             WHEN '50001-75000' THEN '4'
             WHEN '75001-100000' THEN '5'
             WHEN '100001-200000' THEN '6'
             WHEN '200000 and Above' THEN '7'
          END
    from (
      select case  
        when Annual_Income is null or Annual_Income = '' then 'Did not specify' 
        when Annual_Income between 0 and 25000 then '0-25000'
        when Annual_Income between 25001 and 50000 then '25001-50000'
        when Annual_Income between 50001 and 75000 then '50001-75000'
        when Annual_Income between 75001 and 100000 then '75001-100000'
        when Annual_Income between 100001 and 200000 then '100001-200000'
        when Annual_Income > 200000 then '200000 and Above'
        end as range
      from Applicant_info)Applicant_info
    group by Applicant_info.range
    order by order_number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:49:10.410

`CASE`对每个使用单独的表达式，如下所示：

```
Select 
  range as [Income Range], 
  SUM(CASE when Annual_Income is null or Annual_Income = '' then END) AS 'Did not specify',
  SUM(CASE when Annual_Income between 0 and 25000 then 1 ELSE 0 END) AS '0-25000',
  SUM(CASE when Annual_Income between 25001 and 50000 then 1 ELSE 0 END) AS '25001-50000',
  SUM(CASE when Annual_Income between 50001 and 75000 then 1 ELSE 0END) AS  '50001-75000',
  SUM(CASE when Annual_Income between 75001 and 100000 then 1 ELSE 0 END) AS  '75001-100000',
  SUM(CASE when Annual_Income between 100001 and 200000 then 1 ELSE 0END) AS  '100001-200000',
  SUM(CASE when Annual_Income > 200000 then 1 ELSE 0 END) AS  '200000 and Above'
from Applicant_info
GROUP BY range; 
```

**请注意：**此`SUM`函数实际上是一个计数，因为它求和 0 或 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T09:10:49.463

即使计数为零，您也可以使用外连接和查找表来确保包含所有范围。

```
SELECT C.[Range], COUNT(B.[Income_Band]) AS [Count]
FROM Applicant_info
CROSS APPLY
(
    SELECT
        CASE
            WHEN Annual_Income IS NULL OR ISNUMERIC(Annual_Income) = 0 THEN 1
            WHEN Annual_Income > 200000 THEN 7
            WHEN Annual_Income > 100000 THEN 6
            WHEN Annual_Income > 75000  THEN 5
            WHEN Annual_Income > 50000  THEN 4
            WHEN Annual_Income > 25000  THEN 3
            WHEN Annual_Income >= 0  THEN 2
            ELSE 1
        END AS [Income_Band]
) B
RIGHT JOIN
(
    SELECT 1 AS [Income_Band], 'Did not specify' AS [Range]
    UNION SELECT 2, '0-25000'
    UNION ALL SELECT 3, '25001-50000'
    UNION ALL SELECT 4, '50001-75000'
    UNION ALL SELECT 5, '75001-100000'
    UNION ALL SELECT 6, '100001-200000'
    UNION ALL SELECT 7, '200000 and Above'
) C
    ON C.[Income_Band] = B.[Income_Band]
GROUP BY C.[Range], C.[Income_Band]
ORDER BY C.[Income_Band] 
```

# php - 将表名插入另一个表的列

> ID：14681569
> 
> 赞同：0
> 
> 时间：2013-02-04T06:40:44.037
> 
> 标签：php, mysql

我知道这个问题以前已经回答过了，但很抱歉我不是编码员，所以我不知道去哪里了。

我有一个包含 100 多个测验的列表，所有这些测验都在单独的表格中（id、问题、答案）。现在，我想做的是将所有表的名称插入名为“quiz”的表的列（quizname）中，该表是所有测验的主索引。

接下来，我还想将每个表中的问题和答案插入到包含所有问题和答案的主表中（结构：id、quizid、question、answer）。

我正在尝试开发一个测验网站，但我必须自己做所有事情。这是一个很长的故事。如果我能从 Stack Overflow 社区获得一些帮助，那就太好了。

我知道我是个菜鸟，所以会有来自经验丰富的编码员的恶作剧、责骂……等等……但我只需要完成这件事！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:29:45.103

您可以使用命令获取当前数据库中的表名列表

```
SHOW TABLES; 
```

或者，您可以查询`information_schema`表，例如：

```
SELECT table_name FROM information_schema WHERE table_schema = 'your-database-name'; 
```

要使用表名创建表，请使用如下查询：

```
CREATE TABLE quiz AS SELECT table_name AS quizname FROM information_schema.tables WHERE table_schema = 'test'; 
```

然而，有趣的是，这将包括新创建的表格“测验”......

我想不出纯粹在 MySQL 中完成最后一部分的方法，您必须编写一个 PHP 脚本来读取`quiz`表，然后执行很多这样的查询：

```
INSERT INTO master_table(quizid, question, answer) SELECT 'quiz1', question, answer FROM quiz1
INSERT INTO master_table(quizid, question, answer) SELECT 'quiz2', question, answer FROM quiz2
... 
```

# splunk - 页面未根据从 splunk 页面传递的参数进行搜索

> ID：14681570
> 
> 赞同：1
> 
> 时间：2013-02-04T06:41:01.397
> 
> 标签：splunk

我正在从 splunk 视图重定向到知识库页面。我能够将 splunk 中的值传递给 KB 并填充在搜索框中，但问题是，第一次打开页面（KB 页面）时，它会在其搜索框中填充值，但其他一些默认结果正在显示，但是一旦单击搜索按钮，从下一个开始它会显示正确的搜索结果。

请帮忙谢谢

# mysql - 查询形成中的逻辑错误，而不在 mysql 中的查询中使用 DISTINCT

> ID：14681586
> 
> 赞同：1
> 
> 时间：2013-02-04T06:43:27.517
> 
> 标签：mysql, sql, select

> 查找速度不低于 450MHz 的 PC 制造商。结果集：制造商。

我的查询 -

```
SELECT maker FROM product
WHERE model IN ( SELECT model FROM pc WHERE speed > 450 ) AND type = 'PC' 
```

输出 -

![输出](../Images/1016bffd001965136d50339add3179cc.png)

但是我尝试通过添加`DISTINCT`我的查询并给出所需的输出，但是我的查询中存在一些逻辑错误，因为它没有通过系统。

数据库架构 -

![图式](../Images/409266e39385796ce75ee98aea9c9e1d.png)

```
SELECT * FROM product -- 
```

![查询1](../Images/b81ad1ac378d1d7e964fbe7bcb6dd03d.png)

```
SELECT * FROM pc  -- 
```

![查询2](../Images/9c7e633e33a821a240c4d26a81c8fe36.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:49:50.123

您可以使用`JOIN`

```
SELECT  DISTINCT b.maker
FROM    PC a
        INNER JOIN Product b
           ON a.model = b.model
WHERE   speed >= 450 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-10T22:51:12.430

或者只是这也有效，

```
Select distinct Product.maker from Product, PC
where Product.model = PC.model
and PC.speed >= 450 
```

# android - 从图像视图中获取 Drawable

> ID：14681587
> 
> 赞同：3
> 
> 时间：2013-02-04T06:43:35.193
> 
> 标签：android, android-layout, android-drawable

当我执行[本](http://developer.android.com/guide/topics/resources/drawable-resource.html#Clip)文档 ImageView.getDrawable 中描述的剪辑可绘制示例时，始终返回 null。谁能帮帮我？

在 MainActivity.java onCreate

```
@Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ImageView imageview = (ImageView) findViewById(R.id.image);
        ClipDrawable drawable = (ClipDrawable) imageview.getDrawable();
        drawable.setLevel(drawable.getLevel() + 1000); //Line number 21
    } 
```

日志猫

```
 02-04 12:16:31.156: E/AndroidRuntime(4611): FATAL EXCEPTION: main02-04 12:16:31.156: E/AndroidRuntime(4611): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.MainActivity}: java.lang.NullPointerException

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.ActivityThread.access$1500(ActivityThread.java:117)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.os.Handler.dispatchMessage(Handler.java:99)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.os.Looper.loop(Looper.java:123)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.ActivityThread.main(ActivityThread.java:3683)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at java.lang.reflect.Method.invokeNative(Native Method)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at java.lang.reflect.Method.invoke(Method.java:507)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at dalvik.system.NativeStart.main(Native Method)

02-04 12:16:31.156: E/AndroidRuntime(4611): Caused by: java.lang.NullPointerException

02-04 12:16:31.156: E/AndroidRuntime(4611):      at com.example.test.MainActivity.onCreate(MainActivity.java:21)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)

02-04 12:16:31.156: E/AndroidRuntime(4611):      at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)

02-04 12:16:31.156: E/AndroidRuntime(4611):      ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:47:24.150

您必须覆盖 onWindowsFocusChanged()

```
 @Override
 public void onWindowFocusChanged(boolean hasWindowFocus) {
    super.onWindowFocusChanged(hasWindowFocus);
   ClipDrawable drawable = (ClipDrawable) imageview.getBackground();
    drawable.setLevel(drawable.getLevel() + 1000); //Line number 21
 } 
```

当您尝试获取其值（可绘制图像）时，imageView 尚未正确显示。onWindowsFocusChanged() 将通知用户视图已经加载，此时您可以获取其数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:09:15.830

可能你会得到`null drawable`所以这个错误会发生。

首先`set` 任何`image`到，`ImageView`所以你会得到可绘制的。

```
protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ImageView imageview = (ImageView) findViewById(R.id.image);
        imageview.setBackgroundResource(R.drawable.icon);
        ClipDrawable drawable = (ClipDrawable) imageview.getDrawable();
        if(drawable != null){
        drawable.setLevel(drawable.getLevel() + 1000); //Line number 21
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-19T03:56:32.063

如果您可以使用视图的 id 成员变量，这是一种简单的方法：只需使用 v.setId() 存储 R.drawable id。然后用 v.getId() 取回它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-22T09:24:32.097

到目前为止，没有一个答案是正确的

这里的问题是，在图像视图中，可绘制对象是使用附加的`android:background="@drawable/clip"`，并且是使用检索的`ClipDrawable drawable = (ClipDrawable) imageview.getDrawable();`

修复：

更改图像视图 xml

`android:background="@drawable/clip"`->`android:src="@drawable/clip"`

**或者**

更改按钮回调代码

`ClipDrawable drawable = (ClipDrawable) imageview.getDrawable();`->`ClipDrawable drawable = (ClipDrawable) imageview.getBackground();`

**不要同时更改两者，否则问题将再次出现。改变任何一个。**

# c++ - 如何在循环下找到 FFT 乘法的 Big-O 表示法

> ID：14681589
> 
> 赞同：0
> 
> 时间：2013-02-04T06:43:39.517
> 
> 标签：c++, matlab

FFT 乘法的大 O 表示法是 O(nlogn)。如下算法中给出的循环下 FFT 乘法的 Big-O 表示法是什么？代码在 matlab 中给出，FFTmulti 是两个多项式的 FFT 乘法的函数

```
rG=1;
rN=1;
AreaFunc=[1 2 5 2 3 6 7 2 4 5 6];

N=length(AreaFunc);

for i=1:(N-1)
    ref_coeff(i) = (AreaFunc(i+1) - AreaFunc(i)) / (AreaFunc(i+1) + AreaFunc(i));
end

ref_coeff=[ref_coeff rN];
G = (1 + rG) / 2;
A0 = [1]; B0 = [-rG];

for i = 1 : length(ref_coeff)
    G = G * (1 + ref_coeff(i));
    A1 = [-ref_coeff(i) 0]; B1 = [1 0];
    An = [0 A0] + FFTmulti(A1,B0);
    Bn = [0 -ref_coeff(i)*A0] + FFTmulti(B1,B0);
    A0=An;
    B0=Bn;
end

A0 =fliplr(A0);
num = zeros(1, (floor(N/2)));
num = [num G]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:15:01.373

FFT 复杂度 - 对于最知名的优化算法 - 是 N*log2(N)。

如果你在 N 的循环中调用它，将是 N^2 log2(N)。

# iphone - 如何在单击文本文件而不是文本更改时调用方法

> ID：14681592
> 
> 赞同：0
> 
> 时间：2013-02-04T06:43:49.627
> 
> 标签：iphone, ipad, uitextfield

我想在单击 TextField 时移动视图，但它仅在`textDidChange`我们更改文本或编写任何内容时才有效，因此当我们单击 TextField 时如何调用方法。

```
 -(void)textFieldTextDidChange:(UITextField*)tf{

    [self  showAnimationPests];

}

    -(void) showAnimationPests{

      [UIView animateWithDuration:0.5 
                 animations:^{
                     self.view.frame = CGRectMake(0,-300,1024,768);
                 }];

     } 
```

而不是我想要在文本字段上单击的文本更改

在 .h 文件中

```
 IBOutlet UIButton*button1;
IBOutlet UIButton*button2;
IBOutlet UIButton*button3;
IBOutlet UIButton*button4;
IBOutlet UIButton*button5;
IBOutlet UIButton*button6;
IBOutlet UIButton*button7;
IBOutlet UIButton*button8;
IBOutlet UIButton*button9;
IBOutlet UIButton*button10;

    @property(nonatomic,retain)IBOutlet UIButton*button1;
    @property(nonatomic,retain)IBOutlet UIButton*button2;
    @property(nonatomic,retain)IBOutlet UIButton*button3;
    @property(nonatomic,retain)IBOutlet UIButton*button4;
    @property(nonatomic,retain)IBOutlet UIButton*button5;
    @property(nonatomic,retain)IBOutlet UIButton*button6;
    @property(nonatomic,retain)IBOutlet UIButton*button7;
    @property(nonatomic,retain)IBOutlet UIButton*button8;
    @property(nonatomic,retain)IBOutlet UIButton*button9;
    @property(nonatomic,retain)IBOutlet UIButton*button10; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:46:37.847

采用

```
- (void)textFieldDidBeginEditing:(UITextField *)textField 
```

委托方法。当`UITextField`成为第一响应者时调用它。在您单击文本字段的那一刻，就会调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:50:15.700

您可以使用委托方法来做到这一点

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
    {
        [self  showAnimationPests];
    } 
```

或将点击手势添加到您的文本字段

```
- (void)viewDidLoad
    {
        [super viewDidLoad];

        UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleSingleTap)];
        [singleTap setNumberOfTapsRequired:1];

        [tf addGestureRecognizer:singleTap];
    }

- (void)handleSingleTap
    {
        [self  showAnimationPests];
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T06:58:47.987

添加此代码：

```
 [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(slideUpView:) name:UIKeyboardWillShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(slideDownView:) name:UIKeyboardWillHideNotification object:nil];

    -(void)slideDownView:(NSNotification*)notification
{

    [[[notification userInfo] objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve];
    [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration];
    [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] getValue:&keyboardFrame];

    [UIView animateWithDuration:animationDuration
                          delay:0.0
                        options:animationCurve
                     animations:^{
                         self.view.frame = CGRectMake(0, 0, 320, 480);
                     }
                     completion:^(BOOL finished){
                         NSLog(@"Slide down Done..!");
                     }];
}

-(void)slideUpView:(NSNotification*)notification
{

    [[[notification userInfo] objectForKey:UIKeyboardAnimationCurveUserInfoKey] getValue:&animationCurve];
    [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] getValue:&animationDuration];
    [[[notification userInfo] objectForKey:UIKeyboardFrameBeginUserInfoKey] getValue:&keyboardFrame];
    //
    [UIView animateWithDuration:animationDuration
                          delay:0.0
                        options:animationCurve
                     animations:^{
                         self.view.frame = CGRectMake(0, -keyboardFrame.size.height + 70, 320, 416);
                     }
                     completion:^(BOOL finished){
                         NSLog(@"Slide up Done..!");
                     }];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:55:49.073

Firstofall 添加`<UITextFieldDelegate>`在您的`.h`文件中而不是在`.m`文件中

```
- (void)viewDidLoad
{
 yourtextfield.delegate = self;
}
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    if (textField == yourtextfield)
    {
       [self  showAnimationPests];
    }
}
-(void) showAnimationPests
{
 [UIView animateWithDuration:0.5 
             animations:^{
                 self.view.frame = CGRectMake(0,-300,1024,768);
             }];

 } 
```

# php - SQL 错误：#1242 - 子查询返回多于 1 行

> ID：14681597
> 
> 赞同：2
> 
> 时间：2013-02-04T06:44:07.343
> 
> 标签：php, mysql, sql

我得到“错误：#1242 - 子查询返回超过 1 行”尝试执行此查询：

```
SELECT id FROM postcodes WHERE pcd LIKE (SELECT CONCAT(pcd,' %') FROM towns WHERE id IN (31898,12828,15771,7604)) 
```

您对此查询有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:51:30.403

`JOIN`这两个表而不是`IN`谓词，如下所示：

```
SELECT p.id 
FROM postcodes p
INNER JOIN towns t ON p.pcd LIKE CONCAT(t.pcd,' %')
WHERE t.id IN (31898,12828,15771,7604); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:46:19.040

检查此查询：

```
SELECT CONCAT(pcd,' %') FROM towns WHERE id IN (31898,12828,15771,7604) 
```

也许它的结果不止一排。

或者您可以限制子查询结果。

```
SELECT id FROM postcodes WHERE pcd LIKE (SELECT CONCAT(pcd,' %') FROM towns WHERE id IN (31898,12828,15771,7604) LIMIT 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:46:45.500

您必须将子查询限制为一行。您应该添加一些过滤器以将结果限制为一行，或者添加`LIMIT 1`到您的子查询中将为您解决问题。

# knockout.js - 防止值绑定更新对象

> ID：14681599
> 
> 赞同：0
> 
> 时间：2013-02-04T06:44:18.347
> 
> 标签：knockout.js

我正在使用 knockout.js 来初始化编辑表单值，如下所示：

```
<input id="editapp-name" name="name" placeholder="Enter app name"
    type="text" data-bind="value: editapp().name" /> 
```

但是，除非用户单击“更新”按钮并且我从服务器获得成功响应，否则我不希望更新模型。

我可以做类似的事情吗

```
data-bind="value: editapp().name, valueUpdate: 'no'" 
```

# sonarqube - Sonar 迫使我在 FindBugs 结果或 JaCoCo 集成测试覆盖率之间进行选择

> ID：14681600
> 
> 赞同：1
> 
> 时间：2013-02-04T06:44:20.887
> 
> 标签：sonarqube, jacoco

我在声纳中有这个奇怪的问题。我正在使用声纳 3.2 + Ant + JaCoCo + Selenium。

我在 Ant 目标中设置了我的 sonar.binaries 属性文件，该目标是通过 Jenkins 执行的。

1) 如果我将 sonar.binaries 属性设置为指向我生成的 .class 文件，那么 FindBugs 工作正常，但我的 JaCoCo 集成测试覆盖率显示为 0%。0% 可能是因为类文件不是部署到 JBoss 服务器的确切文件，因此 Sonar 无法进行映射。

2) 如果我将 sonar.binaries 属性设置为指向我的 .jar 文件（即包括上述 .class 文件），那么 FindBugs 将在构建时给出异常。禁用 FindBugs 后，Sonar 构建完成正常，这一次我得到了所有二进制文件的正确 JaCoCo IT 代码覆盖率！

有什么想法吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T06:15:03.580

听起来您遇到了这个错误： http: [//jira.codehaus.org/browse/SONARJAVA-164](http://jira.codehaus.org/browse/SONARJAVA-164) -“如果提供了几个二进制目录，Sonar JaCoCo 插件只考虑第一个二进制目录”

这将在 Sonar Java 生态系统插件 (1.3) 的下一个版本中修复，但尚未发布。

# javascript - 在 CSS 中跟踪 Onclick 事件 - 执行一些操作

> ID：14681602
> 
> 赞同：0
> 
> 时间：2013-02-04T06:44:25.753
> 
> 标签：javascript, jquery, html, css

我正在研究简单的 jquery 模式。我想在模态后面的叠加层中执行 onclick 事件。 [***这是 modal 的链接***](http://vignesh.gvignesh.org/modal/Sample%20Modal/)。当用户在模态外单击时，我需要关闭模态。这是代码。

```
#basic-modal-content {display:none;}

    /* Overlay */
    #simplemodal-overlay {background-color:#000; cursor:wait;}

    /* Container */
    #simplemodal-container {height:300px; width:600px; color:#bbb; background-color:#FFF; border:6px solid #72A014;border-radius:12px;-webkit-border-radius:12px;-moz-border-radius:12px; padding:12px;}
    #simplemodal-container .simplemodal-data {padding:8px;}
    #simplemodal-container code {background:#141414; border-left:3px solid #65B43D; color:#bbb; display:block; font-size:12px; margin-bottom:12px; padding:4px 6px 6px;}
    #simplemodal-container a {color:#ddd;}
    #simplemodal-container a.modalCloseImg {background:url(close.png) no-repeat; width:40px; height:40px; display:inline; z-index:3200; position:absolute; top:-20px; right:-23px; cursor:pointer;}
    #simplemodal-container h3 {color:#84b8d9;} 
```

当用户单击覆盖时，需要关闭模式。有什么方法可以跟踪模态外的onclick事件并关闭它吗？

希望我的问题很清楚。提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:50:04.400

将事件绑定到`#simplemodal-overlay`

```
$("#simplemodal-overlay").click(function(){
//code to remove the overlay , same as on the close btn
}); 
```

但我不明白为什么等待光标在叠加层上。？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:52:42.773

未经测试，但这看起来应该可以工作：[论坛 ASP.NET](http://forums.asp.net/t/1528820.aspx/1?I%20would%20like%20to%20close%20the%20ModalPopup%20by%20click%20on%20the%20area%20surround%20area%20of%20the%20Pop%20up%20Panel%20)

# xcode - 如何检查我的 ios 开发者证书是否已过期？

> ID：14681608
> 
> 赞同：0
> 
> 时间：2013-02-04T06:45:12.317
> 
> 标签：xcode, iphone-developer-program

> **可能重复：**
> [协同设计错误：证书身份出现两次](https://stackoverflow.com/questions/5932522/codesign-error-certificate-identity-appearing-twice)

我收到这个错误。

证书身份“iPhone 开发人员：tobiasdiestelkamp (PXVT443VS6)”在钥匙串中多次出现。协同设计工具只需要一个。

是否可能由于证书过期而发生此错误？我不知道我的证书是否过期..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:58:15.210

这意味着您在钥匙串中拥有超过 1 个具有相同名称的证书。只需删除旧的并保持安装新的。如果它不能解决问题，请删除该特定名称的所有证书，安装一个新的并重新启动 xcode 和 mac。我遇到了同样的问题，这个程序帮助了我。希望你也能得到帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:48:11.340

转到您的`Keychain Access`应用程序（在 下`Applications > Utilities`），单击`login`左上角的钥匙串，按 排序`Name`，然后向下滚动到`iPhone Developer`。应该有一栏`Expires`。只需删除过期的证书。（注意不要删除密钥，会根据证书自动选择密钥，有时很难分辨出证书对应哪个密钥，但代码签名工具会弄清楚。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T06:56:02.750

转到钥匙串访问并单击类别中的证书，然后看到任何证书显示两次，如果是然后单击证书而不是上部窗口显示有关该证书的所有详细信息。如果证书详细信息显示“此证书已被吊销”，则删除该证书。

# python - 从一维列表中创建一个二维列表

> ID：14681609
> 
> 赞同：20
> 
> 时间：2013-02-04T06:45:13.913
> 
> 标签：python, matrix

我对 Python 有点陌生，我想将 1D 列表转换为 2D 列表，给定this的`width`and 。`length``matrix`

假设我有一个`list=[0,1,2,3]`并且我想制作`2 by 2`这个列表的矩阵。

我怎样才能得到`matrix [[0,1],[2,3]]` `width`=2, `length`=2`list`呢？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-02-04T06:51:41.557

尝试这样的事情：

```
In [53]: l = [0,1,2,3]

In [54]: def to_matrix(l, n):
    ...:     return [l[i:i+n] for i in xrange(0, len(l), n)]

In [55]: to_matrix(l,2)
Out[55]: [[0, 1], [2, 3]] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-04T07:00:15.910

我认为您应该使用专为处理矩阵/数组而构建的 numpy，而不是列表列表。看起来像这样：

```
>>> import numpy as np
>>> list_ = [0,1,2,3]
>>> a = np.array(list_).reshape(2,2)
>>> a
array([[0, 1],
       [2, 3]])
>>> a.shape
(2, 2) 
```

避免调用变量`list`，因为它会隐藏内置名称。

# mysql - MySQL新手 - 这个查询的组成部分是什么？

> ID：14681610
> 
> 赞同：0
> 
> 时间：2013-02-04T06:45:14.993
> 
> 标签：mysql

这将是一个愚蠢的问题，但我多年来一直在使用这段代码，并且从未停下来了解是什么以及为什么......

这是一个非常典型的查询，我会复制和编辑：

```
mysql_select_db($database_db, $db);
$query_qry_details = sprintf("Select * from table where id = %s", $KTColParam1_qry_details);
$qry_details = mysql_query($query_qry_details, $db) or die(mysql_error());
$row_qry_details = mysql_fetch_assoc($qry_details);
$totalRows_qry_details = mysql_num_rows($qry_details); 
```

所有这些行是什么意思？

我知道的第一个查找正确的数据库。我在页面上的每个查询之前都有这一行....我需要这个吗？

第二行 ($query_qry_details) 是查询本身。我看到。

第 3 行和第 4 行 - 不知道...

第 5 行显然是查询返回的行数的计数。

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:56:28.133

**EDITED**

Shortly:

`mysql_select_db(database_name, link_identifier)` - Sets the cuurent active database on server that is associated with the specified link identifier.
`sprintf` - Return formatted string which acts as a query.
`mysql_query` or `die` - Sends a unique query to the database previously specified or exit from query.
`mysql_fetch_assoc` - Returns an associative array that corresponds to the fetched row and moves the internal data pointer ahead.
`mysql_num_rows` - Retrieves the number of rows from a result set.

# php - 在后台运行一个 PHP，同时显示另一个 PHP

> ID：14681611
> 
> 赞同：0
> 
> 时间：2013-02-04T06:45:16.287
> 
> 标签：php

目前我有 2 个 PHP 文件。1是用户界面，另一个从后端获取数据并插入数据库。

目前，如果我在 UI php 中使用以下内容：

```
<html>
    <body>
        <form action = "test.php" name="form" method="post">
            <input type="text" name="text_box" size="50"/>
            <input type="submit" id="search-submit" value="submit"/>
        </form>
    </body>
</html> 
```

单击提交后，它会转到 test.php。如果可以在后台执行 test.php 而保留在 UI php 上？

之前的一些帖子谈到了使用 ajax 等，我不确定如何实现。可以在php中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:53:10.357

在 test.php 中，您可以使用[exec](http://www.php.net/manual/en/function.exec.php)函数并通过命令行使用 php 调用您想要的任何 php 文件：

```
exec("php test.php > /dev/null 2>/dev/null &"); 
```

请注意，它将拥有的会话与您在浏览器上拥有的会话不同，并且将参数发送到正在启动的命令行实例可能会很棘手，请看[这里](http://php.net/manual/en/features.commandline.php)。

# android - 运行线程类方法中的sendBroadcast编译错误，Android

> ID：14681614
> 
> 赞同：2
> 
> 时间：2013-02-04T06:45:21.513
> 
> 标签：android, android-intent, broadcastreceiver

我怎样才能摆脱编译错误？

```
sendBroadcast(intent); 
```

此方法在我制作的另一个应用程序中运行良好，但是在当前应用程序中存在编译错误。红色下划线有错误消息“未定义新 Runnable 类型”

sendBroadcast() 是 Context 类的一部分，而不是 Intent 类。

```
 public class Server {  // external class

  public class ServerThread implements Runnable {  // nested class

  public void run() {
        try {
            if (SERVERIP != null) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus = "Listening on IP: " + SERVERIP;
                    }
                });
                serverSocket = new ServerSocket(SERVERPORT);
                while (true) {
                    // listen for incoming clients
                    Socket client = serverSocket.accept();
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            Intent intent = new Intent();
                            intent.setAction("com.example.AudioPlay");
                            intent.putExtra("serverStatus","Connected");
                                sendBroadcast(intent);
                        }
                    }); 
```

<<<< 编辑 >>>>

我将问题的焦点更改为编译错误。该方法在其他应用程序中运行良好。正是在这种特殊情况下，我对编译错误感到困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:06:30.173

要访问`sendBroadcast`未扩展 Activity、服务或其他应用程序组件的类中的方法，您需要使用类构造函数将组件上下文传递给它：

```
public class ServerThread implements Runnable {  // nested class

Context context;  //<< declare context here

public ServerThread(Context context){
  this.context=context;
}
  public void run() {

       handler.post(new Runnable() {
           @Override
             public void run() {
                  Intent intent = new Intent();
                  intent.setAction("com.example.AudioPlay");
                  intent.putExtra("serverStatus","Connected");
                   // use context for calling sendBroadcast
                  context.sendBroadcast(intent);
               }
    }); 
```

并像从 Activity 一样传递上下文：

```
ServerThread serverth=new ServerThread(Your_Current_Activity.this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:07:48.860

对不起这个问题，这太容易了。发布后几秒钟我意识到我的错误。

```
 Intent intent = new Intent();
 intent.setAction("com.exmaple.AudioPlay");
 intent.putExtra("serverStatus","Connected");
 mContext.sendBroadcast(intent); 
```

在另一个班级：

```
 Server serv = new Server(getApplicationContext()); 
```

# ios - 如何播放服务器上的在线视频

> ID：14681618
> 
> 赞同：2
> 
> 时间：2013-02-04T06:45:52.163
> 
> 标签：ios, objective-c, video, ios6, video-streaming

我的服务器上有视频。我想在 iPhone 和 iPad 上播放这些视频。

谁能建议如何处理这种情况？

当我的项目中使用相同的视频时，我知道如何播放视频`MPMoviePlayerController`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:32:15.820

您可以使用 WebView 播放视频。

在 .h 文件中添加以下代码：

```
#import <MediaPlayer/MediaPlayer.h>
    @interface VideoViewController : UIViewController<UIWebViewDelegate>
    @property (nonatomic, strong) UIWebView *playerView; 
```

在 .m 文件中：

```
@synthesize playerView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
         self.playerView = [[UIWebView alloc]initWithFrame:CGRectMake(10, 05, 300, 200)];
        [self.view addSubview:self.playerView];

    }
    return self;
}

-(void)viewDidLoad
{
    playerView.delegate = self;
    playerView.scrollView.scrollEnabled = NO;
    playerView.layer.cornerRadius = 5.0;
    playerView.clipsToBounds = YES;
} 
```

在 playBtn 操作中输入以下代码：

```
NSString *yourVideoLink = your video link;
NSString *yourlinkThumbnail = your video thumbnaillink;
[self playVideo: yourVideoLink withWebView:playerView andThumbnailLink: yourlinkThumbnail];

#pragma mark - Webview Delegates

- (void)webViewDidStartLoad:(UIWebView *)webView
{
    //[SVProgressHUD showWithStatus:@"Loading..."];
}
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    //[SVProgressHUD dismiss];
}
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
   // [SVProgressHUD dismiss];
}

#pragma mark - MoviePlayer Methods
- (void)playVideo:(NSString *)urlString withWebView:(UIWebView*)videoView andThumbnailLink:(NSString*)thumbnailImageLink {
    NSString *embedHTML = @"\
    <html><head>\
    <style type=\"text/css\">\
    body {\
    background-color: transparent;\
    color: white;\
    }\
    </style>\
    <script>\
    function load(){document.getElementById(\"yt\").play();}\
    </script>\
    </head><body onload=\"load()\"style=\"margin:0\">\
    <video id=\"yt\" src=\"%@\" \
    width=\"%0.0f\" height=\"%0.0f\" poster=\"%@\" autoplay controls></video>\
    </body></html>";
    videoView.backgroundColor   =  [UIColor redColor];
    NSString *html = [NSString stringWithFormat:embedHTML, urlString, videoView.frame.size.width, videoView.frame.size.height,thumbnailImageLink];
    [videoView loadHTMLString:html baseURL:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayStarted:) name:@"UIMoviePlayerControllerDidEnterFullscreenNotification" object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(videoPlayFinished:) name:@"UIMoviePlayerControllerDidExitFullscreenNotification" object:nil];
}

-(void)videoPlayStarted:(NSNotification *)notification{
    //self.isInFullScreenMode = YES;
}

-(void)videoPlayFinished:(NSNotification *)notification{
    // your code here
   // self.isInFullScreenMode = NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T12:41:47.830

我们可以通过在 UIWebView 上嵌入 HTML 来播放视频。

**例子**

```
 let height = UIScreen.main.bounds.size.height - 100
    let width = UIScreen.main.bounds.size.width
    let url: NSURL = NSURL(string: webURl)!
    let embedHTML = "<html><head><style type=\"text/css\">body {background-color: transparent;color: black;}</style><meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes\"/></head><body style=\"margin:0\"><div><iframe src=\"\(webURl!)\" width=\"\(width)\" height=\"\(height)\" frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div></body></html>"
    webView.loadHTMLString(embedHTML as String, baseURL:url as URL )
    webView.contentMode = UIViewContentMode.scaleAspectFit 
```

# android - 在 webview 上禁用预测文本

> ID：14681619
> 
> 赞同：2
> 
> 时间：2013-02-04T06:45:52.353
> 
> 标签：android, android-webview, facebook-android-sdk

我已将 Facebook 集成到我的应用程序中并且运行良好，但出现了一个问题。如果启用了预测文本输入，则密码会显示在建议中。那么在Facebook api中禁用webview上的预测文本的任何方法

![在此处输入图像描述](../Images/259a7a0b5a92104e079d8a527be64fc6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:07:58.407

您可以修改 Facebook SDK 中的一种方法来停止自动建议。`FbDialog`在 SDK 中打开类并查找`setUpWebView`方法。

```
private void setUpWebView(int margin) {
    LinearLayout webViewContainer = new LinearLayout(getContext());
    this.mWebView = new WebView(getContext());
    this.mWebView.setVerticalScrollBarEnabled(false);
    this.mWebView.setHorizontalScrollBarEnabled(false);
    this.mWebView.setWebViewClient(new FbWebViewClient(null));
    this.mWebView.getSettings().setJavaScriptEnabled(true);
    this.mWebView.loadUrl(this.mUrl);
    this.mWebView.setLayoutParams(FILL);
    this.mWebView.setVisibility(4);
    this.mWebView.getSettings().setSavePassword(false);

    webViewContainer.setPadding(margin, margin, margin, margin);
    webViewContainer.addView(this.mWebView);
    this.mContent.addView(webViewContainer);
  } 
```

并在该行之前的任何位置添加这些`addView`行：

```
this.mWebView.getSettings().setSaveFormData(false);
this.mWebView.clearFormData(); 
```

# mysql - mysql中的bit(1)和tinyint(1)有什么区别

> ID：14681620
> 
> 赞同：-3
> 
> 时间：2013-02-04T06:46:03.900
> 
> 标签：mysql

它们之间有什么不同`bit(1)`，`tinyint(1)`它们是否相同？当我们将数据从旧版本的 mysql（可能是 5.1）迁移到最新版本（比如 5.5）时，就会发生这种情况。它们在功能上是否相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:48:49.530

*   比特（米）

位域类型。`M`表示每个值的位数，*从 1 到 64*。如果省略 M，则默认值为 1。

*   小号（米）

一个非常小的整数。有**符号范围是 -128 到 127**。无**符号范围是 0 到 255**。

请参阅[**数字类型概述**](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)

# wix - 通过 IExpress 在临时文件夹中写入日志文件

> ID：14681624
> 
> 赞同：0
> 
> 时间：2013-02-04T06:46:24.367
> 
> 标签：wix, cmd, windows-installer, iexpress

我正在使用 IExpress 生成 .exe 安装程序。

我想让它像这样在临时文件夹中生成日志文件。

```
msiexec /i MyPackage.msi" /l*v "%temp%\MyPackge.log" 
```

但经过一番研究，我发现`IExpress`使用`command.com`not`cmd.exe`所以它不明白`%temp%`

所以，我尝试将其更改为

```
cmd.exe /c msiexec /i MyPackage.msi" /l*v "%temp%\MyPackge.log" 
```

似乎可行，但是安装时会出现命令提示符，这根本不好。

有任何解决这个问题的方法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T09:34:45.840

您可以选择安装 /q quiet 没有 UI 和 /norestart 选项 msiexec 命令行选项[http://msdn.microsoft.com/en-us/library/windows/desktop/aa367988%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367988%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-02T07:07:28.383

您可以通过在 IExpress 向导中将*显示窗口*选项`cmd.exe`更改为*隐藏来隐藏窗口。*在文件中，这将是：**`.sed`**

 **```
ShowInstallProgramWindow=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T03:02:41.523

我结束了这个。

```
msiexec /i MyPackage.msi" /l*v "..\MyPackge.log" 
```

因为 .msi 已被提取到 %temp%\MyProduct，所以我可以使用“..\MyPackage.log”**

# javascript - 无法使用我的 phonegap jquery 应用程序在页面加载时获取连接状态

> ID：14681634
> 
> 赞同：0
> 
> 时间：2013-02-04T06:47:31.700
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我正在尝试在我的 phonegap 应用程序加载时加载数据馈送。它工作得很好，除了当我没有数据连接时，我希望系统能感知到这一点，然后给出一个很好的消息，比如“对不起，你没有数据连接。”。页面加载完毕后，我可以单击一个按钮并运行一个告诉我连接状态的函数。但是，它根本不会在页面加载时自动运行此代码，我不知道为什么。当我在 iOS 或 Android 上进行测试时，我遇到了同样的问题。我只剥离了基础知识，所以希望有人无法发现问题。

```
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/main.css" />   
    <script type="text/javascript" charset="utf-8" src="js/jquery-1.7.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="js/main.js"></script>
    <script src="js/jquery.jsonp-2.1.4.min.js"></script>    
<script>
function checkConnection() {
    var networkState = navigator.network.connection.type;
    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';
    alert('Connection type: ' + states[networkState]);
    if(states[networkState] == 'No network connection') { show_no_connection(); }
}

$(document).ready(function(){
    checkConnection();
});

function show_no_connection() {
        $('#status').html('You Have No Data Connection!');  
}   

</script>       

</head>
<body>

 <div id="status">SO FAR, YOU HAVE A CONNECTION.</div>
     <a href='javascript:void(0);' onclick='checkConnection();'>Check your connection</a><br/><br/> 
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>       
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:04:23.500

经典**`jQuery`**语法**`$(document).ready(function(){`**不应该与 一起使用**`jQuery Mobile`**，它不能正常工作，更不用说它不能用于初始化**`Phonegap`**代码。更多关于这个话题的信息可以在这篇**[文章](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**中找到。或者在**[这里](https://stackoverflow.com/a/14469041/1848600)**找到它。

这应该用来解决这个问题：

```
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
function onDeviceReady() {
    checkConnection();
}

function checkConnection() {
    var networkState = navigator.network.connection.type;
    var states = {};
    states[Connection.UNKNOWN]  = 'Unknown connection';
    states[Connection.ETHERNET] = 'Ethernet connection';
    states[Connection.WIFI]     = 'WiFi connection';
    states[Connection.CELL_2G]  = 'Cell 2G connection';
    states[Connection.CELL_3G]  = 'Cell 3G connection';
    states[Connection.CELL_4G]  = 'Cell 4G connection';
    states[Connection.NONE]     = 'No network connection';
    alert('Connection type: ' + states[networkState]);
    if(states[networkState] == 'No network connection') { show_no_connection();
}

function show_no_connection() {
    $('#status').html('You Have No Data Connection!');  
} 
```

代码需要等待**`Phonegap`**框架初始化，它是这样完成的：

```
document.addEventListener("deviceready", onDeviceReady, false); 
```

# php - 如何将会话中的多个变量存储为多维数组？

> ID：14681635
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:47:31.933
> 
> 标签：php, multidimensional-array

我有 3 个表单文件，如 form1.php、form2.php、form3.php 和一个 index.php 文件以及这些 form1、form2、form3 文件中的 output.php 文件我有 3 个表单，其中包含一个值为**step**的隐藏字段它在我的 index.php 文件中被调用，由下一个按钮调用。我的索引文件包含 `<?php`

```
switch ($_POST['step']) {

    case 2:
        require_once 'form2.php';
        break;

    case 3:
        require_once 'form3.php';
        break;

    case 4:
        require_once 'form4.php';
        break;

    case 1:
    default:
        require_once 'form1.php';
} 
```

?>

我想在用户输入数据（随时单击下一步按钮）时将输入字段的所有值存储在多维数组中，以便我可以检索每个值以供将来使用，例如名称字段，它就像一个数组，多少次用户在输入字段中给出他的名字，它将存储在该名称数组中，就像其他人一样

我也试过这个

```
<?php
 session_start();
 require_once 'form3.php';
foreach ($_SESSION as $key => $value) {
     $_SESSION['POST'][$key][] = $value;
}
print_r($_SESSION); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T11:39:48.157

在这个函数之后：

```
foreach ($_SESSION as $key => $value) {
$_SESSION['POST'][$key][] = $value;
} 
```

第一次将创建多维子数组 $_SESSION['POST']，下一次将所有子数组 $_SESSION['POST'] 添加到多维子数组 $_SESSION['POST']['POST'] . 您将获得非结构化数组 $_SESSION 以及子数组中的子数组。

我认为您需要更改程序的逻辑，如下所示：对数组 $_POST 进行排序并使用子数组 $_SESSION['POST'] 中的键获取所有值，如果下次在数组 $_POST 中重复键，则添加 1到 $_SESSION['POST'][$key]['count'] 或者，如果要保存输入数据的所有值，请将它们保存在子数组 $_SESSION['POST'][$key][] 中。通过函数 end() 获取最后一个元素。

# c# - 字典 - 引用的对象未设置为对象的实例

> ID：14681639
> 
> 赞同：3
> 
> 时间：2013-02-04T06:47:59.210
> 
> 标签：c#

我正在尝试在字典中保存一个大厅系统。

```
private Dictionary<string, Dictionary<string, string>> lobbys; 
```

第一个字符串是大厅 ID，字典中的字典包含大厅中的客户端用户名。

当我尝试在字典中创建一个新的“大厅”时，如下所示：

```
lobbys.Add("dSd244SfasdD", null); 
```

（“dSd244SfasdD”是唯一的大厅 ID，null 是我尚未创建的空字典（因为其中还没有用户））

我收到此错误：“引用的对象未设置为对象的实例。”

我不确定我做错了什么，而且我对 C# 还很陌生。请帮忙。谢谢 ：）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T06:52:35.720

您必须首先实例化大厅字典（其中包含字典）：

```
lobbys = new Dictionary<string, Dictionary<string, string>>(); 
```

然后你可以添加到这个大厅，当你这样做时，你应该实例化那些内部字典。

```
lobbys.Add("dsD244SfasD", new Dictionary<string, string>()); 
```

然后，当您添加到这些内部词典时：

```
lobbys["dsD244fasD"].Add("Client1", "Bob Jones");
lobbys["dsD244fasD"].Add("Client2", "Bill James"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T06:49:50.703

您**需要[实例化](http://www.c-sharpcorner.com/UploadFile/rmcochran/instantiationI06232007000158AM/instantiationI.aspx)**您的字典。

```
lobbys = new  Dictionary<string, Dictionary<string, string>(); 
```

如果它是你类中的一个字段，你可以在 Field 初始化它，或者你可以在类构造函数中初始化它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T06:49:20.903

您尚未为变量赋值，因此它的默认值为 null。（不要忘记 的值`lobbys`不是一个对象——它是一个*引用*）。您可以在构造函数中或在声明中为其赋值：

```
private Dictionary<string, Dictionary<string, string>> lobbys
    = new Dictionary<string, Dictionary<string, string>>(); 
```

（您可能希望同时将其设为`readonly`变量 - 这不会阻止您更改字典的内容，但这意味着该变量将始终引用*同一个*字典。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T06:50:26.630

在使用它之前，您需要先创建一个对象的实例。

```
 private Dictionary<string, Dictionary<string, string>> lobbys = new Dictionary<string, Dictionary<string, string>>(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-30T07:32:05.920

```
private Dictionary<string, Dictionary<string, string>> lobbys
    = new Dictionary<string, Dictionary<string, string>>(); 
```

# vb.net - 在 VB.NET 中使用 List.Find

> ID：14681642
> 
> 赞同：9
> 
> 时间：2013-02-04T06:48:13.173
> 
> 标签：vb.net, list, find

我有两列。一列包含字符串值，另一列包含十进制值。我想通过选择字符串值来选择十进制值。

```
string          decimal
Jewel           10
Hasan           20 
```

如何选择 Jewel，使其返回 10？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-04T07:17:01.210

试试这个：

```
Dim selectedValues As List(Of InvoiceSOA)
selectedValues = DisputeList.FindAll(Function(p) p.ColumnName = "Jewel") 
```

或者，如果您需要第一次出现“Jewel”，请使用：

```
Dim selectedValue As InvoiceSOA
selectedValue = DisputeList.Find(Function(p) p.ColumnName = "Jewel") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-23T01:39:40.453

```
Dim selectedValue As InvoiceSOA = DisputeList.Find(Function(p) 
        if p.ColumnName = "Jewel" then
            return true
        end if
    end function) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-01T11:08:35.250

枚举功能是解决这个问题的正确方法。

例子：

```
Public Enum Ornaments
    Neclace = 10
    Bangle = 20
    TieClip = 30
End Enum 
```

如何使用这个枚举

```
Dim SelectedOrnament As Ornaments = Ornaments.Bangle

Select Case SelectedOrnament

    Case Ornaments.Neclace
        MsgBox("Your ornament is: " & Ornaments.Neclace)

    Case Ornaments.Bangle
        MsgBox("Your ornament is: " & Ornaments.Bangle)

    Case Ornaments.TieClip
        MsgBox("Your ornament is: " & Ornaments.TieClip)

    Case Else
        MsgBox("I could not find your ornament. Sorry")

End Select 
```

# java - 图像未使用 BitmapFactory.decodeByteArray 创建

> ID：14681643
> 
> 赞同：6
> 
> 时间：2013-02-04T06:48:14.977
> 
> 标签：java, android, bitmap, bitmapfactory

编辑：当我将这些字节保存在 txt 文件中并将其保存为 png 文件时，它会显示图像，但它在这里不起作用，为什么...？

我正在使用此代码从 doInBackground() 上的字节数组创建图像

```
String base64data=StringEscapeUtils.unescapeJava(IOUtils.toString(resp.getEntity().getContent()));
base64data=base64data.substring(1,base64data.length()-1);
JSONObject obj=new JSONObject(base64data);
JSONArray array=obj.getJSONArray("EMRTable");
JSONObject childobj=array.getJSONObject(0);
results=childobj.getString("DocumentInternalFormat"); 
```

和 onPostExecute

```
if(jsondata!=null) {
    receiveData(jsondata);
} 
```

logcat中没有错误，即使它没有异常..但是图像没有显示。我也这样做过

```
String data=(String)object;
data=data.trim();
byte[] base64converted=Base64.decode(data,Base64.DEFAULT);          

ImageView image=new ImageView(context);
image.setImageBitmap(bmp);
setContentView(image); 
```

但结果相同的图像没有显示，但没有异常或错误，是什么问题......

注释行是当我尝试将这些字节存储到文本文件中时，当我拉出文件时，它会使用 Windows 默认图像查看器显示图像。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T09:53:57.300

在从不同资源获取位图时尝试此代码...

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
BitmapFactory.decodeByteArray(base64converted,0,base64converted.length,options);

// Calculate inSampleSize
options.inSampleSize = calculateInSampleSize(options, 500, 500);
// Decode bitmap with inSampleSize set
options.inJustDecodeBounds = false;
Bitmap bmp1=BitmapFactory.decodeByteArray(base64converted,0,base64converted.length,options); 
```

按照此链接上的教程[显示位图的有效方法](http://developer.android.com/training/displaying-bitmaps/index.html)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-04T06:51:01.590

从您的代码中删除以下行，然后重试

```
base64data=base64data.substring(1,base64data.length()-1); 
```

# c# - 如何通过带有模型绑定的 Jquery ajax 在 ASP.NET WebForms 中发布 asp:FormView？

> ID：14681647
> 
> 赞同：1
> 
> 时间：2013-02-04T06:48:59.967
> 
> 标签：c#, jquery, asp.net, ajax, formview

我正在使用 ASP.NET WebForms 的 FormView，并通过单击 FormView 中的按钮将此表单发布到方法：

```
<asp:Button ID="btnSave" ClientIDMode="Static" 
    ValidationGroup="projectmodification" runat="server" 
    Text="Save" CommandName="Update" /> 
```

这是发布的方法

```
public void UpdateMethod(Project project){
} 
```

它现在运行良好，但我不知道如何使用 Jquery 的 ajax 将此表单发布到这种方法并保持模型绑定功能（值自动填充到项目模型）。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T08:45:31.300

您需要使用网络方法。

```
[WebMethod]
public static void UpdateMethod(Project project)
{
  ...
}

public class Project
{
  public string ProjectName{get;set;}
  public string ProjectDesc{get;set;]
} 
```

在您的 jQuery 代码中：

```
var project = new Object();
project.ProjectName = "First Project";
project.ProjectDesc = "Project Description";
$.ajax({
    type: "POST",
    url: "YourPage.aspx/UpdateMethod",
    data: "{'project':"+JSON.stringify(project)+"}",
    dataType: "json",
    contentType: "application/json; charset=utf-8",
    success: function (data) {
    }
}); 
```

# ios - 使用Objective-c（ios）如何为按下的键赋值？

> ID：14681651
> 
> 赞同：0
> 
> 时间：2013-02-04T06:49:15.540
> 
> 标签：ios, objective-c, enums

使用 Objective-C（ios 编程），我想获取用户的输入并为每个输入分配值。例如，如果用户按下“A”或“a”或“B”或“b”，我想分配一个数字值 1。同样我需要为每个键分配一个数字值。有时可以将相同的值分配给不同的字母，例如上面的示例。

实现这一点的最佳方法是什么。请提供一个例子。我正在考虑使用枚举或键值对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:55:11.003

我更喜欢使用字典来存储映射关系并通过用户输入的字符串键获取相应的数字。

```
self.charMap = [[NSMutableDictionary alloc] init];
for (int i=0; i<26; ++i) {
    [self.charMap setObject:[NSNumber numberWithInt:i+1] forKey:[upperCaseChars substringWithRange:NSMakeRange(i, 1)]];
    [self.charMap setObject:[NSNumber numberWithInt:i+1] forKey:[lowerCaseChars substringWithRange:NSMakeRange(i, 1)]];
}

// Example of use
NSString *userInput = @"b";
NSNumber *correspondingNumber = [self.charMap objectForKey:userInput]; 
```

# http - 我需要 AngularJS $http 服务的两个实例还是什么？

> ID：14681654
> 
> 赞同：22
> 
> 时间：2013-02-04T06:49:32.093
> 
> 标签：http, service, error-handling, angularjs, interceptor

我想为我的 $http 服务添加一个响应拦截器以进行错误处理。拦截器逻辑包括在必要时使用 $http 向服务器发送错误消息，*但*我不想向服务器发送有关错误消息的错误消息，我的意思是，我想在向服务器发送错误消息时禁用我的拦截器。

我的想法是创建一个名为“remote_log”的服务，并将向服务器发送错误所需的所有代码放入其中。该服务当然将使用 $http 服务并将其包含在其依赖项列表中。

然后将拦截器的依赖添加到“remote_log”服务中，并在需要向服务器发送错误时使用拦截器内部的“remote_log”。问题在于：

当 $http 服务仍未实例化/可访问时，必须使用 $httpProvider 定义拦截器，因此，在拦截器内部代码不能依赖于 $http 服务，因为会发生“循环依赖”错误。

我认为我唯一的选择是在我的“remote_log”中创建一个单独的 $http 服务实例，该实例不使用我在创建拦截器时设置的 $httpProvider 配置。我的问题是：我该怎么做？还有其他想法吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-11-13T13:02:58.843

# 1.循环依赖问题。

那么，为什么会出现错误呢？以下是该过程的快速概述：

1.  请求了 $http 服务。
2.  $httpProvider 被要求构建它。
3.  在构建过程中，您注册了拦截器，该拦截器请求的 $http 服务尚不存在。
4.  你得到“循环依赖”错误。

## 第一个解决方案。

使用 angular.injector() 创建你的依赖。请注意，您将创建另一个 $http 服务，独立于您的应用程序。

```
$httpProvider.interceptors.push(function($q) {
    $injector = angular.injector();
    return {
        response: function(response) {
            $injector.invoke(function($http) {
                // This is the exterior $http service!
                // This interceptor will not affect it.
            });
        }
    };
}); 
```

## 第二种解决方案（更好）。

在您的拦截器中注入 $injector 并在 $http 初始化后使用它来检索依赖项，就在您需要它们的时候。这些依赖项是您的应用程序的注册服务，不会重新创建！

```
$httpProvider.interceptors.push(function($q, $injector) {
    return {
        response: function(response) {
            $injector.invoke(function($http, someService) {
                // $http is already constructed at the time and you may
                // use it, just as any other service registered in your
                // app module and modules on which app depends on.
            });
        }
    };
}); 
```

# 2.拦截预防问题。

如果使用第二种方案，其实有两个问题：

1.  如果你在拦截器中使用 $http 服务，你可能会遇到无限的拦截：你发送请求，拦截器捕获它，发送另一个，捕获另一个，再次发送，等等。
2.  有时您只想防止请求被拦截。

$http 服务的 'config' 参数只是一个对象。您可以创建一个约定，提供自定义参数并在您的拦截器中识别它们。

例如，让我们在配置中添加“nointercept”属性并尝试复制每个用户请求。这是一个愚蠢的应用程序，但对理解行为很有用：

```
$httpProvider.interceptors.push(function($q, $injector) {
    return {
        response: function(response) {
            if (response.config.nointercept) {
                return $q.when(response); // let it pass
            } else {
                var defer = $q.defer();
                $injector.invoke(function($http) {
                    // This modification prevents interception:
                    response.config.nointercept = true;
                    // Reuse modified config and send the same request again:
                    $http(response.config)
                        .then(function(resp) { defer.resolve(resp); },
                              function(resp) { defer.reject(resp); });
                });
                return defer.promise;
            }
        }
    };
}); 
```

在拦截器中测试属性，您可以防止在控制器和服务中拦截：

```
app.controller('myController', function($http) {
    // The second parameter is actually 'config', see API docs.
    // This query will not be duplicated by the interceptor.
    $http.get('/foo/bar', {nointercept: true})
        .success(function(data) {
            // ...
        });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-03T10:32:39.617

我使用了答案中描述的内容，但我使用了工厂的语法，因为匿名函数不起作用，我真的不知道为什么：

```
(function(angular){
    angular.module('app', [])
    .config([
        '$httpProvider',
        function($httpProvider) {
                $httpProvider.interceptors.push('Interceptor');
        } 
    ])
    .factory('Interceptor', [
        '$injector',
        InterceptorFactory
    ]);

    function InterceptorFactory($injector){

        return {
            request: function(config) {             
                var ServiceWithHttp = $injector.get('ServiceWithHttp');
                // Use ServiceWithHttp
                return config;
            }
        };
    }

}(window.angular)); 
```

# php - 如何在运行时覆盖 max_execution_time 的 php.ini 值？

> ID：14681655
> 
> 赞同：5
> 
> 时间：2013-02-04T06:49:34.680
> 
> 标签：php

我无法访问`php.ini`我的服务器。我想更改最大执行时间，以便我的脚本可以运行超过 30 秒。

有什么办法可以在我的脚本开始时做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T06:50:53.963

# session - 如何在 cusom php 脚本中使用 phpfox 会话来访问用户信息

> ID：14681657
> 
> 赞同：0
> 
> 时间：2013-02-04T06:49:45.823
> 
> 标签：session, phpfox

我有一个自定义的 php 脚本，我想使用登录到 phpfox 站点的用户信息。就像在 wordpress 中我们可以通过 wp-header.php 访问登录用户的信息

所以我一直在寻找类似的东西来访问 phpfox 中的登录用户信息。是否有任何函数或函数文件，我们可以通过它们访问登录的用户信息并使用相同的会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T10:11:02.810

用于`Phpfox::getservice('user')->get(Phpfox::getUserId())`获取用户的常用字段

# javascript - 使用 javascript 显示表单元素

> ID：14681660
> 
> 赞同：2
> 
> 时间：2013-02-04T06:49:58.657
> 
> 标签：javascript, onclick

谁能帮我解决这个问题.... 我的表单中有两个输入字段。其中一个是隐藏的，我想用一个按钮显示它。现在，当我尝试使用 onClick() 函数显示它时，它没有响应...

任何人都可以给我代码片段来这样做....

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>
function show()
{
document.getElementById('passwd').style.display="block" ;
}
</script>
</head>
<body>
<form action="demo.html" >
<input type="text" name="user" />
<br />
<input type="text" id="passwd" name="password"  style="display:none;" />
<input type="button" onClick="show()" name="show" value="show" />
<br />
<input type="submit" value="OK" />
</form>
</body>
</html> 
```

请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T06:58:43.613

这是因为您的`<input>`声明：

```
<input type="button" onClick="show()" name="show" value="show" /> 
```

当您调用`show()`JavaScript 时，将首先尝试解析符号`show`；因为您是`show()`从内联代码调用的，**所以解析发生在 中`document`**，它尝试根据输入框的`name`or`id`属性解析符号。

**解决方案**

重命名按钮：

```
<input type="button" onClick="show()" name="showbutton" value="show" /> 
```

重命名函数：

```
function showPasswordInputBox()
{
  // your code here
}

<input type="button" onClick="showPasswordInputBox()" name="show" value="show" /> 
```

不要使用内联代码：

```
function show()
{
  // whatever
}

var showButton = document.getElementsByName('show')[0];

showButton.addEventListener('click', show, false); 
```

**也可以看看**

[不要给事件处理程序与字段同名！](http://www.xinotes.org/notes/note/698/)

[Javascript 函数和表单名称冲突](https://stackoverflow.com/questions/1415747/javascript-function-and-form-name-conflict)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:05:04.327

javascript 中 show() 函数的命名约定存在问题。因为只需将名称更改为 show1()。它会工作的

```
function show1()
{
 alert("ok");
}
<input type="button"  name="show" value="show" onclick="show1()" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:26:24.097

您可以使用**jquery**并编写以下代码：`$("#passwd").show()` 或者您可以使用`addClass('here_css_class')`和 css 代码`.here_css_class{ display: block }`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:51:39.773

```
try this 

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script>
function show()
{
document.getElementById('passwd').style.display="block" ;
}
</script>
</head>
<body>
<form action="demo.html" >
<input type="text" name="user" />
<br />
<input type="text" id="passwd" name="password"  style="display:none;" />
**<button onClick="show()" >Show</button>**
<br />
<input type="submit" value="OK" />
</form>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-04T06:53:08.783

你需要使用这个：

```
onClick="javascript:show();" 
```

或者干脆

```
onClick="show();" 
```

基本上，只需添加分号:)

# javascript - 为什么 JQUERY 克隆函数并在其上附加一个 id 并确认电子邮件值？

> ID：14681666
> 
> 赞同：5
> 
> 时间：2013-02-04T06:50:15.507
> 
> 标签：javascript, jquery, email-validation

我目前正在处理 2 个棘手的 UX JQuery 问题。我正在使用 JQuery 克隆 2 个表单变量。我如何索引，标识它们，以便我可以用这个 id 标记它们。例如，如果我从选择框中选择 3，我应该得到 3 行表格，并且在每行的左侧应该以一个数字开头，从 1.form、2.form、3 form 开始。

我遇到的第二个问题是我想针对confirmattendant[] 验证attendant[]。我将如何在克隆的 HTML 代码中执行此操作。

这是我的 JSFiddle [http://jsfiddle.net/tGprH/5/](http://jsfiddle.net/tGprH/5/)

这是我的 HTML 代码：

```
<select name="select" id="select">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
</select>
<br/>
<p>Email address, Confirm Email Address</p>
#1 <input type="text" name="attendant[]"/>
<input type="text" name="confirmattendant[]"/>
<br/>

<div id="container">

</div> 
```

这是我的 jQuery

```
$("select").change(function() {

    var select = parseInt($('#select').val() , 10);
    var $clone = '<input type="text" name="attendant[]" /><input type="text" name="confirmattendant[]" /><br/>';
    console.log($clone);
    var html = '';
    for(var i = 1;i< select ; i++){
        html += $clone;
    }
    $('#container').empty().html(html);
 }).change(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:00:45.523

您可以在 for 循环中打印所需的内容，例如..

```
html += '#'+(i + 1)+ ' '+$clone; 
```

尝试这个

```
$("select").change(function() {

   var select = parseInt($('#select').val() , 10);
   var $clone = '<input type="text" name="attendant[]" /><input type="text" name="confirmattendant[]" /><br/>';
   console.log($clone);
   var html = '';
   for(var i = 1;i< select ; i++){
      html += '#'+(i + 1)+ ' '+$clone;
   }
   $('#container').empty().html(html);
}) 
```

[在这里摆弄](http://jsfiddle.net/bipen/tGprH/6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:05:05.233

关于第一个问题：http: [//jsfiddle.net/tGprH/7/](http://jsfiddle.net/tGprH/7/)

```
$("select").change(function() {

    var select = parseInt($('#select').val() , 10);
    var $clone = '<input type="text" name="attendant[]" /><input type="text" name="confirmattendant[]" /><br/>';
    console.log($clone);
    var html = '';
    for(var i = 1;i< select ; i++){
        if(i >= 1)
            html +=  '#' + (i+1) + ' ' + $clone;
        else
            html += $clone;
    }
    $('#container').empty().html(html);
 }).change(); 
```

关于比较：http: [//jsfiddle.net/tGprH/8/](http://jsfiddle.net/tGprH/8/)

```
<button id="compare">compare</button>

$('#compare').click(function(){
   var $attendantArray =  $('input[name="attendant[]"]');
   var $confirmattendantArray =  $('input[name="confirmattendant[]"]');
   for(var i = 0;i< $attendantArray.length ; i++)
   {
       alert((i+1) + ' attendant [' + $($attendantArray[i]).val() + ' / ' + $($confirmattendantArray[i]).val() + ']')
   }
}); 
```

# linux - 当线程堆栈使用的内存被释放时

> ID：14681673
> 
> 赞同：0
> 
> 时间：2013-02-04T06:50:44.270
> 
> 标签：linux, multithreading, stack, free

我正在观察 mongoDB 的连接。当一个新的连接生成时，我可以看到创建了一个新线程（pstack·pgrep monnod `| grep -c Thread), and some new chunks memory allocated (get from /proc/`pgrep mongod`/maps），其中一个块是1024K，这应该是新线程的堆栈大小，我看到它被设置为1024k在代码中。当我退出这个会话时，线程数减少了 1，但内存仍然存在。当我生成一个新连接时，这些内存似乎被重用了。所以我想这应该是linux内核的行为。我能知道我是否正确吗？这个功能在哪里有据可查？感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:56:24.777

> 当我退出这个会话时，线程数减少了 1，但内存仍然存在。当我生成一个新连接时，这些内存似乎被重用了。所以我想这应该是linux内核的行为。

这与内核无关。

GLIBC 将`mmap`线程堆栈，并具有此类堆栈的缓存。代码在[这里](http://repo.or.cz/w/glibc.git/blob/HEAD:/nptl/allocatestack.c#l173)。

# javascript - 如何在javascript中编写时间的正则表达式？

> ID：14681674
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:50:49.543
> 
> 标签：javascript, regex

我需要编写一个正则表达式，它将以 24 小时格式给出。**`00:00`** `(hour:minutes)`

不允许有空格。

*   第一部分`'00'`将是数字（小时）并包括 /`00`到`23`.
*   第二部分`':'`将始终是冒号。
*   第三部分`'00'`将是数字（分钟）并包括/`00`之间`59`。

我试过了`/\s/g.test(stringToBeChecked)`。如果字符之间存在空格，这将返回。

请给我正确的解决方案，因为我不熟悉正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T06:53:57.890

这应该有效：

```
^([01]\d|2[0-3]):[0-5]\d$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:00:43.900

您可以使用以下正则表达式 -

```
 ((([0-1][0-9])|(2[0-3]))(:)([0-5][0-9])) 
```

# c# - 如何使匿名方法接受可变数量的参数？

> ID：14681676
> 
> 赞同：3
> 
> 时间：2013-02-04T06:50:50.717
> 
> 标签：c#, syntax, delegates, arguments

我希望能够使用可变数量的参数（有时没有参数，有时有 11 个）对匿名方法进行内联调用。

```
Dictionary<string, Action> ActionDic = new Dictionary<string, Action>();
int i = 0;
ActionDic["something"] = () => { i += 1; };           // this line is ok
ActionDic["somethingArgs"] = (int n) => { n += 1; };  // but this is not
    // Delegate 'System.Action' does not take 1 arguments 
```

所以我不能让代表接受这样的论点。我的语法是错误的，还是不可能？或者我是否必须更改我应该用于我的字典的匿名方法的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T06:53:26.703

`Action<int>`如果你想用 1 个整数参数定义一个委托，你可以使用。例如：

```
Action<int> somethingArgs = (int n) => { n += 1; }; 
```

您还没有显示`ActionDic`变量是什么，但如果它是一个，`IDictionary<string, Action>`您将无法完成这项工作，因为`Action`不接受参数。

另一方面，您可以做的是使用代表字典：

```
IDictionary<string, Delegate> ActionDic = ...
ActionDic["something"] = (Action)(() => { i += 1; }); 
ActionDic["somethingArgs"] = (Action<int>)((int n) => { n += 1; }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T06:52:50.717

你不能。`Action`并且`Action<T>`是不同的、不兼容的委托类型。

有几种方法可以弥补这一点。

一种方法是制作`ActionDic`一个`Dictionary<string, Action<int>>`，但这可能无法满足您想要使用的所有可能的代表。

另一种方法是制作`ActionDic`类似 a 的东西，`Dictionary<string, Delegate>`但这使用起来很麻烦，因为您需要确切知道要传递每个函数的参数数量（及其类型）。这些信息需要存储在另一个数据结构中的某个地方。

第三种方法是创建`ActionDic`一个`Dictionary<string, Action<object[]>>`并要求委托从输入中解压缩它需要的任何参数。调用者将负责确切了解要使用的参数。这将允许第二个选项的语法不那么尴尬，但在每个委托中需要更多代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T06:54:05.813

您正在谈论两个不同的代表，即`Action`和`Action<T>`。您不能分配`Action<T>`给`Action`：

```
Action a1 = () => { i += 1; };
Action<int> a2 = (n) => { n += 1; }; 
```

我想你有`Dictionary<string,Action>`，所以这本字典不能接受`Action<T>`.

作为旁注，我想说第二个委托绝对没用，因为它增加了一个`int`按值传递的参数，实际上什么也没做。

还可以考虑阅读[如何传递可选参数](https://stackoverflow.com/questions/12577730/how-to-pass-optional-arguments/12578150#12578150)。虽然它与匿名方法无关，但它可能会给你一些关于如何传递可变数量参数的线索

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:52:53.390

Action 是一种创建返回 void 且不带参数的委托的捷径。如果你想要带参数的动作，你需要使用通用形式：

`Action<int>`是一个接受一个 int 参数的委托

`Action<string, double>`接受 2 个参数：第一个是字符串，第二个是双精度。

# windows - 使用 WMI 获取帐户安全策略

> ID：14681677
> 
> 赞同：1
> 
> 时间：2013-02-04T06:50:52.450
> 
> 标签：windows, wmi, audit

1.  作为一名网络审计员，我使用 WMI 来查询 windows PC 并获取相关信息。

2.  secpol.msc 提供帐户和本地策略。有没有办法可以读取策略中的所有参数，以检查用户是否按照公司规范配置了它们。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:51:34.500

您可以使用[`RSoP WMI Classes`](http://msdn.microsoft.com/en-us/library/aa375082%28v=vs.85%29.aspx)获取组策略设置， [`Group Policy Settings Reference for Windows and Windows Server`](http://www.microsoft.com/en-us/download/details.aspx?id=25250)这基本上是一组 excel 文件，其中包含存储此类信息的 Windows 注册表项。

# linux - 用于 cron 任务的 bash 脚本

> ID：14681681
> 
> 赞同：0
> 
> 时间：2013-02-04T06:51:19.687
> 
> 标签：linux, bash, ubuntu, cron

我有一个 Paas cron 服务，它只运行每分钟、每小时、每天、每周。我希望我的脚本在上午 8 点、上午 9 点、上午 10 点、上午 11 点、下午 4 点和下午 5 点每 15 分钟运行一次。我怎么做。这是我不工作的 bash 脚本。

```
#!/bin/bash
MINUTES=`date +%M`
HOUR=`date +%H`
for j in "08" "09" "10" "11" "13" "16" "17";do
    if [ "$HOUR" == "$j" ];then
    for i in "00" "15" "30" "45";do
        if [ "$MINUTES" == "$i" ];then
            (
            /usr/bin/notify-send "Script is running at "
            )
        fi
    done
    fi
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T09:43:48.267

为什么不直接使用 crontab 的功能呢？

将此行添加到 crontab

```
*/15 8,9,10,11,16,17 * * * /path/bin/yourscript.sh 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T06:59:54.993

我会看类似的东西（`cron`每分钟运行一次）：

```
#!/usr/bin/bash

# Exit if hour not valid.

hh=$(date +%H) ; hhn=${hh##0}

if [[ $hhn -lt 8  ]] ; then exit ; fi
if [[ $hhn -gt 17 ]] ; then exit ; fi
if [[ $hhn -eq 12 ]] ; then exit ; fi
if [[ $hhn -eq 14 ]] ; then exit ; fi
if [[ $hhn -eq 15 ]] ; then exit ; fi

# Exit if not multiple of 15 minutes.

mm=$(date +%M) ; mmn=${mm##0} ; ((mm15 = mmn % 15))
if [[ $mm15 -ne 0 ]] ; then exit ; fi

# Otherwise do something.

echo Doing something at $hh:$mm 
```

这样做的好处是不需要做很多循环来检查你是否应该运行。

该`${hh##0}`构造只是从小时中删除任何前导零，因此`08`可以`09`在算术比较中使用，而不会被视为无效的八进制（分钟同上）。

如果小时和/或分钟应该阻止运行，所有`if`语句都会过早地从脚本中退出。分钟更简单，因为它是模 15 计算。

# c# - 定时器奇怪的行为

> ID：14681684
> 
> 赞同：0
> 
> 时间：2013-02-04T06:51:40.030
> 
> 标签：c#, timer

`Enabled`如果我在属性窗口中将其属性设置为 true，那么我在表单中使用了一个 Windows.Forms.Timer ，这是它唯一有效的时间。如果我将其禁用，则仅在需要时启用它，它不会打勾。

```
 private void btnRename_Click(object sender, EventArgs e)
        {
            timerUpdateProgress.Enabled = true;
            timerUpdateProgress.Start();
            pbProgress.Maximum = clbFiles.CheckedItems.Count;
            var renameTask = Task.Factory.StartNew(() => doRename(true, tbCurrentDirectory.Text, clbFiles.CheckedItems, rules));
            if(renameTask.Result.Count > 0)
            {
                timerUpdateProgress.Enabled = false;
                new ExceptionsWindow(renameTask.Result).ShowDialog();
            }
            timerUpdateProgress.Enabled = false;
            loadFiles(tbCurrentDirectory.Text);
        }

        private void timerUpdateProgress_Tick(object sender, EventArgs e)
        {
            pbProgress.Value = progress; //I have a breakpoint on this line
        } 
```

我要做的就是用进度条显示操作的进度。启用和启动计时器什么都不做，滴答声永远不会发生。为什么会这样？

更新：在启用和启动计时器后添加 2000 毫秒的睡眠后单步执行代码显示它仍然没有滴答（我在滴答处理程序中有一个断点）。

更多说明：在属性窗口中启用计时器时，始终调用刻度处理程序，而无需调用`Start()`. 只需启用计时器，我的断点就会一直触发。我还应该注意我使用的是 .NET 4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T06:58:24.633

“Task.Factory.StartNew”花了多长时间？（如果这是同步的）

如果上面的 lambda 表达式是异步的，我看看 renameTask.Result.Count 是否大于 0，progress bar = false ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:09:17.627

**编辑：** 从评论中得到一个想法后 - 似乎你**根本不需要计时器**。

`Value`您可以在更新的值时更新进度条`progress`。

这样，从 0 到 100% 的过渡也可能看起来更顺畅。

* * *

据我说，您需要禁用计时器。

只需使用

```
timer.Stop(); 
```

然后`timer.Start()`在需要时再次。

此外，如果您禁用了计时器进度，那么您还**必须这样做**

```
timerUpdateProgress.Enabled = true 
```

# python - 如何构建分发文件？

> ID：14681685
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:51:41.060
> 
> 标签：python, setup.py

我已经创建了`setup.py`文件。但我不知道如何进行分配？

书上说打开一个终端窗口并输入一个命令：`python3 setup.py sdist`. 我这样做了，但总是出错！

我觉得代码还可以，因为这只是书中的例子。我猜这个错误来自我构建发行版的方式。

在 python 命令行终端中，如何更改目录？

文件代码`nester.py`如下：

```
def print_lol(the_list):
for each_item in the_list:
  if isinstance(each_item, list):
    print_lol(each_item)
  else:
    print(each_item) 
```

该`setup.py`文件如下：

```
from distutils.core import setup
setup(
  name = 'nester',
  version = '1.0.0',
  py_modules = ['nester'],
  author = 'hfpython',
  author_email = 'hfpython@headfirstlabs.com',
  url = 'http://www.headfirstlabs.com',
  description = 'A simple printer of nested lists',
) 
```

我输入的命令是：`python3 setup.py sdist`然后我得到错误：

```
File "<stdin>",line 1
  pythons setup.py sdist
syntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:02:31.900

> 在 python 命令行终端中，如何更改目录？

无关紧要，因为这不应该被输入到 Python REPL 中。而是将其输入到 shell/命令提示符中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T22:34:58.303

如果你的c盘中没有安装python，请确保添加路径，并正确添加python文件名（python文件在安装时根据其版本自动命名）。还要确保 setup.py 文件位于 Python 文件中。

比如我在e盘安装了我的python，版本是3.4.2。为其自动创建的文件名是 Python34。

在命令行中，我输入：

e:\Python34\setup.py sdist

希望这有帮助。

乔伊

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T17:45:38.923

由于您在 Windows 上，因此取决于 python 版本和 python 的安装位置

像使用命令一样。首先你必须清楚python的路径。

`C:\python33\python setup.py sdist`

我希望这有帮助。

# android - 无法在 Google play 上上传我的 APP

> ID：14681689
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:52:01.057
> 
> 标签：android, android-manifest

我无法使用版本名称上传我的应用程序：2.62G 和版本代码：90。市场上以前的版本是：版本名称：2.60 和版本代码：88。在清单文件中，我使用的是：

```
android:versionCode="90"
    android:versionName="2.62" >
    <!-- android:versionCode="40" -->
    <!-- android:versionName="1.12" -->
    <uses-sdk android:targetSdkVersion="11"
        android:minSdkVersion="9"/>

    <uses-feature
        android:name="android.hardware.camera"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.camera.autofocus"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location"
        android:required="false" />
    <uses-feature
        android:name="android.hardware.location.gps"
        android:required="false" />

    <supports-screens
        android:anyDensity="true"
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true" />
.................
.................. 
```

有关详细问题，请附上图片。请帮助我，我做错了什么？谢谢![在此处输入图像描述](../Images/90226cfa92b932dd20f836c9aadc26a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:04:41.277

```
android:versionCode="1" 
```

您在评论中使用它。删除评论。

# mysql - 我想在mysql中插入这个符号（'）

> ID：14681690
> 
> 赞同：2
> 
> 时间：2013-02-04T06:52:07.187
> 
> 标签：mysql, sql, oracle, sql-insert

在 sql 表中，我有一个字段为高度，我想插入高度为 5'6''，即 5 英尺和 6 英寸。我怎样才能做到这一点？

使用简单的插入命令时会引发错误。有什么可能的方法来克服这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T06:53:42.120

如果您直接在 MySQL 服务器上执行此操作，请将单引号加倍，它将起作用。例子

```
INSERT INTO tableName (height) VALUES ('5''6"') 
```

但在前端，为此使用*PreparedStatements*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T06:58:09.593

如果要转义`'`'，只需输入 ' 两次 ( `''`)。

```
insert into tes values ('5''6'''''); 
```

工作`MySQL`，`Oracle`和`MSSQL`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T00:10:03.397

所有像`;`, `'`, `<`, `>`, 和其他符号必须在前面插入反斜杠：

```
\'
\>
\; 
```

在你的情况下：

```
INSERT INTO tableName (height) VALUES ('5\'\'6\"') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T11:06:46.937

请尝试以下

```
Insert into table_name(column_name) values('5'||''''||'6'||'"'); 
```

# python-2.7 - 运行脚本时显示进度条

> ID：14681697
> 
> 赞同：0
> 
> 时间：2013-02-04T06:52:37.517
> 
> 标签：python-2.7, wxpython

我已经开发了用于从存储库中检出源代码并使用 Visual Studio 构建它的 python 脚本。当我运行脚本时，会打开一个 GUI（使用 wxPython 开发），它显示一个按钮，单击哪个按钮进行结帐和构建。我想要显示一个进度条，当我单击按钮时显示正在运行的进程，并在脚本完成工作后显示成功消息。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:52:03.640

除非您的构建脚本在输出中生成一些您可以在 GUI 中解析和表示的进度信息，否则您可能无法获得准确的进度。无论哪种方式，您都可能想要使用 wx.ProgressDialog 或在主面板中使用 wx.Gauge 或类似的东西。wx.ProgressDialog 和 wx.Gauge 都可以在显示实际值（完成百分比）的模式下使用，也可以在表示某事正在发生的“不确定”模式下使用，但没有任何方法可以说明它在进程中的距离是。

# android - Android 无法使用前置摄像头录制视频，MediaRecorder 启动失败：-19

> ID：14681703
> 
> 赞同：23
> 
> 时间：2013-02-04T06:53:05.627
> 
> 标签：android, video, camera, android-camera, mediarecorder

我有两个不同的代码库有同样的问题。

**第一个是直接从 developer.android.com 复制的代码：http:** [//developer.android.com/guide/topics/media/camera.html#custom-camera](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

**第二个是这段代码：**

[http://android-er.blogspot.com.au/2011/10/simple-exercise-of-video-capture-using.html](http://android-er.blogspot.com.au/2011/10/simple-exercise-of-video-capture-using.html)

两者都可以正常使用普通后置摄像头，但是一旦我尝试使用前置摄像头，就会出现错误。

这发生在以下设备上：

*   **连结 S 4.1.2**

*   **银河 Nexus 4.1.2**

*   **Nexus 7 4.2.1（只有前置摄像头）**

我也尝试过看起来像 2.2 时代的相机参数，有些人声称某些三星和 HTC 设备需要它，尽管多篇不同的文章引用了不同的字符串键：

```
c = Camera.open(frontFacingCameraID); // attempt to get a Camera instance
Camera.Parameters params = c.getParameters();
params.set("cam-mode", 1);
params.set("cam_mode", 1);
params.set("camera-id", 1);
c.setParameters(params); 
```

这些都不起作用，还请注意，我正在检测正确的前置摄像头 ID，在 Nexus 7 上当然是：0。但所有设备上的结果都是相同的。

我尝试过使用低质量配置文件，我尝试过以多种方式手动设置视频分辨率、编码器、输出格式、比特率、帧速率和视频大小，但都没有奏效。

让我认为大多数代码没有问题的是普通相机可以正常工作。所以我的猜测是它与设置媒体记录器的 prepareVideoRecorder() / prepareMediaRecorder() 方法有关。

也许是已知可在前置摄像头上使用的媒体记录器手动编码设置？

我不得不说，Android Camera 和 MediaRecorder API 很烂。与 iOS 相比，它有点混乱，更不用说一些看起来很吓人的参数不兼容问题以及碎片化设备环境中的不同分辨率。

假设我可以让它在我的 JB 设备上运行，有没有人从经验中知道 API 15 ICS 是否解决了大多数这些问题？

如果 API 10 Gingerbread 太难以支持，我会考虑不支持它。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-04T17:42:15.837

我今天也为这个问题苦苦挣扎。

首先，确保您的权限设置正确。具体来说，要录制视频，您需要：

```
<uses-feature android:name="android.hardware.camera.front" />
<uses-feature android:name="android.hardware.microphone"/>

<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

其次，这是棘手的部分，教程中的这条线不适用于前置摄像头！

```
mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH)); 
```

CamcorderProfile.get() 的签名默认为后置摄像头的配置文件：

> 返回设备上给定质量级别的第一个后置摄像头的摄像机配置文件。如果设备没有后置摄像头，则返回 null。

相反，请使用[http://developer.android.com/reference/android/media/CamcorderProfile.html#get(int,%20int)](http://developer.android.com/reference/android/media/CamcorderProfile.html#get(int,%20int))。第一个参数是你打开的摄像头的id，具体来说就是前置摄像头。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-02-06T09:38:18.243

**好的，所以我终于让它工作了。**

这个问题似乎肯定与`Profile Settings`特别是`Frame Rate`.

在我的主要测试设备 Nexus S 上，如果我探测相机，我会收到以下参数：

对于后置摄像头：
15 FPS 到 30 FPS，足够公平。

对于前置摄像头：
7.5 FPS 到 30 FPS，可以。

然后我检查我正在尝试使用的配置文件：

`CamcorderProfile.QUALITY_HIGH`
`CamcorderProfile.QUALITY_LOW`

**质量_低：**

> audioBitRate：12200
> audioChannels：1
> audioCodec：AMR_NB audioSampleRate：8000
> 持续时间：30
> fileFormat：THREE_GPP
> 质量：0
> videoBitRate：256000
> videoCodec：H264
> videoFrameRate：30
> videoFrameWidth：176
> videoFrameHeight：144

**质量_高：**

> audioBitRate：24000
> audioChannels：1
> audioCodec：AAC
> audioSampleRate：16000
> 持续时间：60
> fileFormat：MPEG_4
> 质量：1
> videoBitRate：3000000
> videoCodec：H264
> videoFrameRate：30
> videoFrameWidth：720
> videoFrameHeight：480

显然，高质量配置文件适用于后置摄像头，因为正面只有 640x480。但他们都说 30 FPS。

现在....这是奇怪的：

如果我为后置摄像头设置任何帧速率，无论什么配置文件，它都会因可怕的崩溃而崩溃：

> -19 错误

```
mediaRecorder.setVideoFrameRate(fpsInt); 
```

这没什么大不了的，因为我不关心后置摄像头，但这很奇怪，考虑到配置文件默认为 30 并且`Params`说他​​们接受 15-30。但是我尝试过的任何 int 值都没有奏效。如果我省略`setVideoFrameRate`它很好。

**无论如何，移动到前置摄像头。**

因此，如果我使用`QUALITY_LOW`配置文件并将帧速率设置为 15 或更低，它会神奇地起作用。

```
mediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_LOW));
mediaRecorder.setVideoFrameRate(15); 
```

事实上，任何值，1 - 15 都有效。这似乎很奇怪。

所以这是一个难题，我可能可以探测分辨率并为大多数相机选择合适的分辨率，尽管我也相当有信心几乎所有前置相机至少 VGA 640x480。

但是，帧率呢？在 Nexus S 的情况下，我看不出有什么方法可以在不猜测的情况下确定 15 或更低的值？我是否应该始终使用相机返回的最低帧速率？

我看了一下 Galaxy Nexus，它有 3 个帧速率范围，第一个是 15 - 15，第二个是 15 - 30。虽然分辨率更高，但它的低质量配置文件相似。如果我在 Galaxy Nexus 上使用低调，它似乎工作正常。

使用 Nexus 7，我无法探测 CamcorderProfile，我不断收到空指针，这很奇怪。它说它支持 4 FPS - 60 FPS。如果我选择`QUALITY_LOW`你认为它应该工作的那个，它就会崩溃，而且我找不到它可以工作的帧速率。虽然错误与`setProfile`，所以我认为问题出在内置配置文件上。当然，Android API 的重点在于它是一致的，这是旗舰设备，FF 摄像头是用于视频会议的，不是吗？？？？？？

因此，虽然我使用手动自定义设置在其中两个设备上工作，但我看不到通过代码使其在多个设备上工作的明确方法。

似乎 Nexus S 在设置 FPS 方面并没有按照其承诺的方式行事`Camera.getParameters().getSupportedPreviewFpsRange()`

我很高兴它使用自动 FPS 设置，但显然它不会与 FF 相机一起使用，所以我该怎么办？我必须在 Nexus S 上明确设置 FPS，在这种情况下设置为 1 到 15 FPS，尽管相机告诉我它可以处理 7.5 - 30 FPS。

**似乎`setProfile`在 2.x 中修复所有问题的承诺并不完全正确。**

我可以理解，如果您为特定 ROM 编写相机应用程序，您只是针对该特定硬件对其进行自定义，这可能解释了为什么人们似乎总是在自定义 ROM 上拥有错误的相机应用程序。但是.....可下载的视频录制应用程序如何工作？他们是为每个设备定制的吗？

这就是为什么 Android 上还没有 Facebook Poke 和 Twitter Vine 的原因？？？:P

谷歌，你的相机 API 是什么？

有谁知道确定所有`API 15+`兼容设备的分辨率和帧速率的“最佳实践”？

这甚至可能吗，还是我要在我测试的每台设备上编写自定义代码，然后在其余设备上掷骰子？

或者 Nexus S 和 Nexus 7 只是意外事故？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-26T17:07:36.937

尝试使用 QUALITY_LOW，因为前置摄像头不支持 QUALITY_HIGH。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-28T14:21:51.110

几个小时以来，我一直在为 -19 错误而苦苦挣扎。我的答案是 Madhava 的回应，尤其是 mCamera.unlock();

即结合关于设置配置文件的第一个答案，此代码

```
 Camera cam = Camera.open(frontCamID);
        cam.unlock();
        recorder.setCamera(cam); 
```

允许我从前置摄像头进行选择和录制。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T08:56:34.447

你应该看这里 [http://developer.android.com/guide/topics/media/camera.html#capture-video](http://developer.android.com/guide/topics/media/camera.html#capture-video)

列出的命令的顺序非常重要。

我使用了此处代码的第二个示例 [如何在 Android 上捕获视频录制？](https://stackoverflow.com/questions/1817742/how-can-i-capture-a-video-recording-on-android)

并修改了开始录音功能

```
protected void startRecording() throws IOException 
{
    mrec = new MediaRecorder();  // Works well

    mCamera.setPreviewDisplay(surfaceHolder);
    mCamera.startPreview();

    mCamera.unlock();
    mrec.setCamera(mCamera);

    mrec.setPreviewDisplay(surfaceHolder.getSurface());
    mrec.setVideoSource(MediaRecorder.VideoSource.CAMERA);
    mrec.setAudioSource(MediaRecorder.AudioSource.CAMCORDER); 

    mrec.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

    mrec.setOutputFile("/sdcard/zzzz.3gp");
    mrec.setPreviewDisplay(surfaceHolder.getSurface());

    mrec.prepare();
    mrec.start();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-24T10:20:52.693

我有同样的问题。在我纠正了原因后，我发现只有 1 个罪魁祸首。，720×480 分辨率，这是相机的默认分辨率。我把它改成了任何东西，是的，我可以很好地记录它

# javascript - 将来自mysql的数据存储在本地存储中

> ID：14681707
> 
> 赞同：0
> 
> 时间：2013-02-04T06:53:13.343
> 
> 标签：javascript, mysql, memcached

我使用`HTML`and`javascript`作为前端和`java`后端并`mysql`用于存储数据。数据库每 24 小时更新一次，显示的结果是静态的，存储在 mysql 中。

我不想进行任何实时 sql 查询，因为查询的数量是固定的。相反，我想以某种方式存储数据库中的结果，以便它可以作为 javascript 的局部变量访问。我不想进行查询，因为目前有 16 个查询，并且有时会增加，需要同时在加载时完成以显示完整页面的结果。这将消耗内存，随着用户和查询数量的增加，查询和处理结果将变慢。

所以我在想一些本地存储机制，它可以用来存储预处理数据，从 Javascript 可以直接访问它而无需进行任何查询。这可能吗？如果可以，怎么办？我希望数据在更新前至少持续 24 小时。请帮助任何想法如何使它工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:28:19.993

`mysql`我从文件中自动查询后存储了数据，`json`然后可以将其作为`script tag`html 文件包含在其中。因此，所有结果都可以作为 javascript 使用，`local variable`并且根本不需要执行实时查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:00:11.010

您要查找的内容称为数据属性。

基本上，您将属性附加到相关元素上。例如：

`<div class="post" data-postid="1234"></div>`

有关该主题的更多信息：http: [//ejohn.org/blog/html-5-data-attributes/](http://ejohn.org/blog/html-5-data-attributes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T04:34:12.933

与[Jstorage](http://www.jstorage.info/)一起去！易于使用，已经在浏览器中使用过，并且成功地与[phonegap](http://phonegap.com/)一起使用。这里有一个小例子：

```
<html>
<head>
<script src="jquery.min.js"></script>
<script src="jstorage.js" type="application/javascript"></script>

<script>
    function init() {
        var contador = $.jStorage.get("contador");
        $('#you').html('contador=' + contador);
        contador++;
        $.jStorage.set("contador", contador);
    }
</script>
</head>
<body onload="init()">
    <div id="you"></div>
</body>
</html> 
```

# android - 关于最低要求 SDK 、目标 SDK 、使用 Android 中的选项编译

> ID：14681711
> 
> 赞同：2
> 
> 时间：2013-02-04T06:53:40.417
> 
> 标签：android

任何人都可以在创建应用程序时解释有关**最低要求的 SDK、目标 SDK、编译选项。**

1.  如果我将所需的最低 SDK 设置为 API 8，将目标 SDK 设置为 API 16 并使用 API 17 编译，它是否可以在 Android 中的 Froyo 设备上运行？

2.  如果我想使用 API 16 中引入的方法或库使用 API 16，并希望我的应用程序
    在 Froyo 或 ICS 设备上运行，我该如何实现？

    提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:56:47.090

1.  是的。但请注意不要在您的应用程序中包含高于 Froyo 的 API

2.  据我了解，你不能，除非你使用第三方库。
    有一些有用的库可以帮助您意识到：[ViewPager](http://viewpagerindicator.com/)和[ActionBarSherlock](http://actionbarsherlock.com/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:28:03.983

您只能在 16 级及更高级别的设备上使用 API 16 级方法。但是您可以签入您的应用程序，并且仅在这种情况下才调用它们。查看我的小型测试应用程序，它使用 API-11 方法并从 API-3 及更高版本运行。

[http://code.google.com/p/android-change-log/source/browse/trunk/src/sheetrock/panda/changelog/ChangeLog.java](http://code.google.com/p/android-change-log/source/browse/trunk/src/sheetrock/panda/changelog/ChangeLog.java)

查看第 40-41、144-145 和 324-341 行。为此，您不需要任何第三方库，但您需要将更高的 API 代码放在单独的类中（第 324-341 行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:02:14.080

是的，当然对于第一个问题。如果你这样使用。

```
 android:minSdkVersion="8"
    android:targetSdkVersion="16" 
```

第二。如果你导入它，你可以去第三方库，肯定会工作。例如：

android 4.0 中引入的特殊功能，带有标签和滑动。但要克服这一点

[引入了actionbar sherlock 库](http://actionbarsherlock.com/)，它支持所有版本和[github](https://github.com/JakeWharton/ActionBarSherlock)。

希望它可以帮助你。

# c++ - 在构造函数的成员初始值设定项列表中使用 new

> ID：14681714
> 
> 赞同：8
> 
> 时间：2013-02-04T06:53:54.287
> 
> 标签：c++

这可以编译，但我从未在任何其他代码中看到它。安全吗？

```
Testclass():sources(new int[32]){} 
```

代替：

```
Testclass(){
    sources = new int[32];
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-04T06:55:44.283

采用：

```
Testclass():sources(new int[32]){} 
```

这是使用[成员初始化列表](https://stackoverflow.com/questions/926752/why-should-i-prefer-to-use-member-initialization-list)，这是初始化成员的首选方式。

您可能指的是“安全”或“好的”，它是否是异常安全的？如果`new`抛出 bad_alloc 异常怎么办？

好吧，在这种情况下，**不会**调用析构函数，因为对象不是完全构造的，因为没有执行构造函数体。如果您在初始化列表中获取了任何资源，则可能存在资源泄漏。

考虑到这一点，

```
class X
{
    int  *ints;  // Order of declaration matters!
    Huge *huges; // It ensures that huges will be initialized after ints

    X() : ints(new int[32]), huges(new Huge[10000]) {}
}; 
```

如果`new Huge[10000]`抛出异常，分配的内存`ints`会泄漏！

在这种情况下，[function-try-block](https://stackoverflow.com/questions/3889811/function-try-blocks-but-not-in-constructors)会很有用。见这些：

*   *[函数尝试块，但不在构造函数中](https://stackoverflow.com/questions/3889811/function-try-blocks-but-not-in-constructors)*
*   *[函数 try 块的目的是什么？](https://stackoverflow.com/questions/8359635/what-is-the-purpose-of-a-function-try-block)*

如果您考虑这个异常安全问题，您很快就会意识到，**如果一个类只管理一个资源，那么生活会更轻松**。如果一个类管理多个资源，那么您将无法确定哪个类在成员初始化列表中引发了异常，因此，您将无法确定要释放哪个类`catch`功能尝试块的块。资源泄漏是注定的。

但是，如果一个类需要多个资源，那么首先将每种不同*类型*的资源封装在一个类中，并将这些资源管理类的对象声明为类的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:25:13.557

如果您使用奇怪的 C++ 语法在构造函数的初始值设定项列表中使用 try/catch 块，那也没关系：

```
class C {
    int *n;
public:
    C();
};

C::C()
try : n(new int[100])
{
  // do stuff here
}
catch(...)
{
  // handle exceptions
}

int main()
{
    C c; // Should be safe...
} 
```

# drupal - Drupal 在尝试登录时重定向到 https

> ID：14681718
> 
> 赞同：3
> 
> 时间：2013-02-04T06:54:12.117
> 
> 标签：drupal, redirect, login, https, upgrade

当我尝试登录 drupal 网站时重定向到 https 并且页面不可用。我无法使用 https 访问网站的任何页面。任何身体都可以提供帮助。我想用http登录。我将站点从 drupal 6 升级到 drupal 7。没有 https 的 Drupal 6 站点登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:54:17.970

如果您在收到错误之前安装了新模块，请从系统表中禁用它们。如果站点上不可用，请确保没有任何自定义模块（如果有）尝试访问 https。大多数情况下，这是一个小的配置错误。

# magento - 语言存储特定 URL 上的 Magento 404 错误

> ID：14681719
> 
> 赞同：2
> 
> 时间：2013-02-04T06:54:14.203
> 
> 标签：magento

我有一个带有 2 个语言商店的 magento（企业）网站。每个给定项目或资源都有自己的专用 URL，无论是静态页面还是产品页面。

我通过 CMS 使用 URL 规则来管理所有资源的 SEF URL。

问题是以下场景：

1.  站点默认为 LANG #1。

2.  当用户从 LANG#1 切换到 LANG#2 时，切换没有问题 - 内容切换到特定语言 (_store=lang">http://www.sitename.com/?_store=lang)

3.  但无论我在哪个语言商店，如果我将另一个语言商店的 url 输入到我当前的语言商店，我都会收到 404 错误。

我希望系统检查当前存储以获取所请求的资源。如果没有找到，它应该路由到下一个商店并检查那里的资源。如果找到，商店应切换到找到该项目并重定向 url 的语言商店。

为了实现这一点，我应该扩展什么类（我对 magento 很陌生）。

我什至检查我是否可以扩展这个类来做我想做的事：/app/code/core/Mage/Core/Model/Mysql4/Url/Rewrite.php

但不确定我是否处于满足此类要求的正确位置。

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T09:11:03.707

我能够解决这个问题。我所做的只是扩展 /app/code/core/Mage/Core/Model/Mysql4/Url/Rewrite.php 文件。

所以我overode loadByRequestPath 函数来服务当前商店中的请求，如果没有找到，获取所有其他可用商店的列表，循环并查找该项目是否存在。如果找到重定向到产品和整体的 URL 密钥所在的商店。

如果没有商店拥有它，则返回 404 错误。

对于静态页面，URL 重写管理器将能够在您切换商店/语言时为您解决问题。

我希望这可以帮助别人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T18:02:32.897

我不认为我的解决方案是最优雅的，但无论如何我都会发布它，因为它对我有用。基本上我在所有商店中搜索我正在寻找的路径，而不仅仅是指定的商店。任何建议都会受到欢迎。

我的 config.xml

```
<?xml version="1.0"?>
<config>
 <global>
  <modules>
    <Soipo_UrlRewrite>
        <version>0.1</version>
    </Soipo_UrlRewrite>
  </modules>
  <models>
    <soipo_urlrewrite>
        <class>Soipo_UrlRewrite_Model</class>
    </soipo_urlrewrite>
    <core_mysql4>
        <rewrite>
            <url_rewrite>Soipo_UrlRewrite_Model_Mage_Core_Model_Mysql4_Url_Rewrite</url_rewrite>
        </rewrite>
    </core_mysql4>
  </models>
 </global>
</config> 
```

重写.php

```
<?php
class Soipo_UrlRewrite_Model_Mage_Core_Model_Mysql4_Url_Rewrite extends Mage_Core_Model_Mysql4_Url_Rewrite{

/**
 * This function get an array of store ids, containing the Admin store.
 * @return array
 */
public function getStoreIds(){
    $allStores = Mage::app()->getStores();
    $storeIds = array();
    $storeIds[] = Mage_Core_Model_App::ADMIN_STORE_ID;
    foreach ($allStores as $_eachStoreId => $val)
    {
        $_storeId = Mage::app()->getStore($_eachStoreId)->getId();
        $storeIds[] = $_storeId;
    }
    return $storeIds;
}

/**
 * Load rewrite information for request
 * If $path is array - we must load all possible records and choose one matching earlier record in array
 *
 * @param   Mage_Core_Model_Url_Rewrite $object
 * @param   array|string $path
 * @return  Mage_Core_Model_Resource_Url_Rewrite
 */
public function loadByRequestPath(Mage_Core_Model_Url_Rewrite $object, $path)
{

    if (!is_array($path)) {
        $path = array($path);
    }

    $pathBind = array();
    foreach ($path as $key => $url) {
        $pathBind['path' . $key] = $url;
    }

    $storeIds = $this->getStoreIds();

    // Form select
    $adapter = $this->_getReadAdapter();
    $select  = $adapter->select()
        ->from($this->getMainTable())
        ->where('request_path IN (:' . implode(', :', array_flip($pathBind)) . ')')
        ->where('store_id IN(?)', $storeIds);

    $items = $adapter->fetchAll($select, $pathBind);

    // Go through all found records and choose one with lowest penalty - earlier path in array, concrete store
    $mapPenalty = array_flip(array_values($path)); // we got mapping array(path => index), lower index - better
    $currentPenalty = null;
    $foundItem = null;
    foreach ($items as $item) {
        if (!array_key_exists($item['request_path'], $mapPenalty)) {
            continue;
        }
        $penalty = $mapPenalty[$item['request_path']] << 1 + ($item['store_id'] ? 0 : 1);
        if (!$foundItem || $currentPenalty > $penalty) {
            $foundItem = $item;
            $currentPenalty = $penalty;
            if (!$currentPenalty) {

                break; // Found best matching item with zero penalty, no reason to continue
            }
        }
    }

    // Set data and finish loading
    if ($foundItem) {
        $object->setData($foundItem);
    }

    // Finish
    $this->unserializeFields($object);
    $this->_afterLoad($object);

    return $this;
}

} 
```

# ruby - 启动 ruby 脚本 onLoad ubuntu

> ID：14681725
> 
> 赞同：1
> 
> 时间：2013-02-04T06:54:57.060
> 
> 标签：ruby, ubuntu

我想在 ubuntu 中创建简单的通知应用程序...例如：在 18:00、21:00、24:00 我想接收来自 ubuntu 的消息

消息的简单方法是：

```
def alarm
  %x{notify-send -i rhythmbox Test "Hello world" }
end

alarm 
```

当我打开这个文件时（比如：ruby somefilename.rb）

我收到通知消息。

```
Question: how to cause this file run in 18:00, 21:00, 24:00 
```

PS我知道有很多类似的程序（对于喜欢知道如何做到这一点的经验）

UD 使用 crontab：

```
* * * * * %x{notify-send -i rhythmbox Test "Hello world" } 
```

每分钟都应该启动这个脚本 - 但什么也没发生

在一些示例中，我看到我们放置了它们的路径而不是脚本：像这样：

```
* * * * * ruby /home/Home/myDisk/somefile.rb 
```

如何用 ruby​​ 打开这个文件或在没有 ruby​​ 的终端中启动 notify-send 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:06:31.740

好的工具是`[cron](http://en.wikipedia.org/wiki/Cron)`和`[anacron](http://en.wikipedia.org/wiki/Anacron)`。

要在 Ruby 中执行此操作，一种方法是使用 Ruby`[sleep](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-sleep)`方法：

```
seconds = 18 * 60  # 18 minutes * 60 seconds/minute
sleep(seconds)
alarm 
```

要在循环中使用您的“唤醒”时间：

```
start = Time.now
for wake in [18, 21, 24]
  seconds = wake * 60 + start - Time.now
  sleep(seconds)
  alarm
end 
```

另请参阅 Ruby`[Thread](http://www.ruby-doc.org/core-1.9.3/Thread.html)`并行执行警报：

```
for wake in [18, 21, 24]
  threads << Thread.new(wake) {|wake|
    sleep(wake * 60)
    alarm    
  }
end
threads.each {|t| t.join } 
```

# single-sign-on - customizing shibboleth and JOSSO

> ID：14681728
> 
> 赞同：1
> 
> 时间：2013-02-04T06:55:08.930
> 
> 标签：single-sign-on, shibboleth, josso

I am looking for an SSO solution that can be customized according to our needs. From what i saw over the internet it seems that Shibboleth and JOSSO are solutions that just need to be installed and configured. My question is to what extent can they be customized to use with web apps.Please consider following points.

1.  control over cookies and session management
2.  integration with existing authentication mechanisms being used for the app (e.g. two factor authentication)
3.  collection of data from the user at the time of registration.

Suggestions on any other frameworks and approaches are welcome

# c# - WCF library host in Windows service returns error

> ID：14681730
> 
> 赞同：0
> 
> 时间：2013-02-04T06:55:25.853
> 
> 标签：c#, wcf, windows-services, wcf-library

I'm new with WCF services, I have a **WCF library** (DLL) hosted in Windows service, this service is called by a DLL which is being called by reflection, I have the following app.config in Windows service and the EXE that calls the whole things together:

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="WSHttpBinding_IVerifyIC" closeTimeout="00:01:00"
            openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
            bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
            maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
            messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
            allowCookies="false">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
              maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          <reliableSession ordered="true" inactivityTimeout="00:10:00"
              enabled="false" />
          <security mode="Message">
            <transport clientCredentialType="Windows" proxyCredentialType="None"
                realm="" />
            <message clientCredentialType="Windows" negotiateServiceCredential="true"
                algorithmSuite="Default" />
          </security>
        </binding>
      </wsHttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost:8732/S3IcVerification/S3.IcVerfication.Wcf.Service/VerifyIC/"
          binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IVerifyIC"
          contract="VerifyIcService.IVerifyIC" name="WSHttpBinding_IVerifyIC">
        <identity>
          <dns value="localhost" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

when I run in deployment environment, it gives me an error message:

> Service 'S3.IcVerfication.Wcf.Service.VerifyIC' has zero application (non-infrastructure) endpoints.

It's also doesn't work on WCFTestClient. Which returns an error message describing that there is no endpoints... etc

What did I do wrong?

# css - How to Make ZURB Foundation Top-Bar Dropdown Menu 100% Width?

> ID：14681736
> 
> 赞同：1
> 
> 时间：2013-02-04T06:55:52.523
> 
> 标签：css, drop-down-menu, zurb-foundation

Did some searching but only found info for the megaBar. Would like to have 100% width dropdown widths and implement it with as little css/js on top of Foundation as possible.

I'd like to do a sub menu (ul > li.has-dropdown -> ul.dropdown) that is 100% window width similar to the one on Mashable and shows on hover. The Foundation megaBar is outside of the nested nav structure but that's not what I'd like for my Wordpress template (want to stay in the nested walker type menu tree).

If you hover over any of the top menu links on [Mashable](http://mashable.com), you'll see the dropdown submenu I'd like to copy (just the structure, not the content).

![Mashable top menu with dropdown](../Images/b986e7a59284cdcd03f19e44a5492d2e.png)

I'm using Foundation 3.2 and have the `<div class="contain-to-grid fixed"><nav class="top-bar">` setup so that it is fixed to the top and always 100% window width while the top-bar has a `max-width: 1440px`, just like the Mashable site.

Now I just need the dropdown (sub menu) part sussed out.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T14:51:03.077

这会将您的顶栏子菜单重置为顶栏宽度的 100%，并将您的子菜单项组织在响应列中，就像弹出内容一样，但仍保留小屏幕尺寸上的导航行为

```
@media only screen and (min-width: $screenSmall) {

    nav.top-bar > section > ul > li.has-dropdown{
        position: static;
        & > .dropdown{
            @include outerRow();

            & > li.has-dropdown{
                @include column(3);
                min-width: auto;

                .dropdown{
                    @include outerRow();
                    position: static;
                    visibility: inherit;
                    top: auto !important;
                    left: auto !important;
                    padding: 0;
                    min-width: auto;
                    li{
                        @include column(12);
                         min-width: auto;
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T10:50:30.053

Foundation 确实带有下拉菜单的功能，因此您可以将 Mashable 使用的导航类型复制到 Foundation 框架中。

如果您阅读文档： http: [//foundation.zurb.com/docs/navigation.php](http://foundation.zurb.com/docs/navigation.php)

您将在导航栏示例中看到，导航项 4 有一个带有自己的行/列的下拉菜单。根据文档，“您还可以使用特定大小的下拉菜单，其中可以包含任何类型的内容，包括行和列。”

您应该能够通过使用 CSS 更改弹出类的大小来指定下拉列表的大小，使其跨越页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-21T21:02:54.940

我到处搜索了一个简单的答案，使下拉大型菜单 100% 成为容器，并在这里找到它：

[http://codepen.io/sldavidson/full/Jseph](http://codepen.io/sldavidson/full/Jseph)

一个基本的风格是这样的：

```
.open {left: 0 !important;} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-02-04T14:14:04.857

此 UI 组件不是 Foundation 的一部分（请参阅[Foundation 组件](http://foundation.zurb.com/docs/components.php)）。正如您已经提到的，[下拉菜单](http://foundation.zurb.com/docs/navigation.php)仅限于显示嵌套菜单元素。

创建与 Mashable 站点相同的功能超出了 Foundation 的范围，需要您自己开发。问题是恕我直言[，不适合在 Stack Overflow 中回答](https://stackoverflow.com/about)。

# c++ - 递归回文检验

> ID：14681739
> 
> 赞同：1
> 
> 时间：2013-02-04T06:56:10.993
> 
> 标签：c++, recursion, character-arrays

我有一个原型限制，`bool pal(char str[], int length)`我需要测试用户输入的字符串是否是回文。我的代码是：

```
bool pal(char str[], int length)
{
    if(*str == str[length - 1])
    {
        pal(str+1, length-1);
    }
    else
    {
        return false
    }
    return true;
} 
```

但它似乎只是在测试第一个字符是否与最后一个字符相同。我认为这是因为我的数组（起点）没有增加，但我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:12:12.333

[这是您的代码的工作版本](http://liveworkspace.org/code/CHvvT%2422)。

```
bool pal(const char* str, int length)
{
   if(length <2) return true; // base case - 1 or 0 length string is a palindrome.
   if((*str) == str[length - 1])
   {
     return pal(str+1, length-2); // -2 because 1 from front and 1 from back. 
   }
   else
   {
     return false;
   }
    //no return here because the recursive call is returned.
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T07:18:21.647

我想这可能是由于对陈述的一些根深蒂固的厌恶`if`，但如果由我决定，我想我会编写如下代码：

```
bool pal(char *str, size_t len) { 
    return len <2 || (str[0] == str[len-1] && pal(str+1, len-2));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T07:02:18.777

您检查第一个和最后一个字符，因此您应该将长度减少 2，而不是减少 1。此外，您应该返回内部 pal 调用的值，而不是丢弃它。

```
if(*str == str[length - 1])
{
    return pal(str + 1, length - 2);
} 
```

对长度 >=2 且 str 不为空的附加测试也将是有序的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T07:06:40.327

您的主要问题是您对递归调用的结果不做任何事情：

```
 if(*str == str[length - 1])
    {
        pal(str+1, length-1);
    } 
```

应该是：

```
 if(*str == str[length - 1])
    {
        return pal(str+1, length-1);
    } 
```

您还需要检查诸如零长度字符串或只有单个字符的字符串之类的东西。

# apache - htaccess - How to redirect ww. & w. subdomain?

> ID：14681740
> 
> 赞同：0
> 
> 时间：2013-02-04T06:56:22.103
> 
> 标签：apache, .htaccess

A friend of mine has a strange problem: His website is reachable with w.domain.com and ww.domain.com and Google has started to index these sites.

How is it to achieve, that both subdomains are redirected to www. ? Is it the same way as normally? Like:

```
RewriteCond %{http_host} ^domain.com [nc] 
RewriteRule ^(.*)$ http://www.domain.com/$1 [r=301,nc] 
```

Simply write 2 other RewriteConds with ^w.domain.com & ^ww.domain.com ??

Thanks for any suggestions!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:08:39.013

假设您要将所有流量重定向到 www.domain.com：

```
RewriteCond %{HTTP} !^www\.domain\.com [NC] 
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,NC] 
```

# java - 查找与纽约午夜对应的 UTC 日期

> ID：14681742
> 
> 赞同：0
> 
> 时间：2013-02-04T06:56:26.470
> 
> 标签：java, datetime, timezone, jodatime, utc

我有一个用户将他的时区配置为`America/New_York`. 我必须为他安排一个活动，该活动应该在他的午夜开始，并在 24 小时后（下一个午夜）结束。但我想将日期存储在数据库中`UTC`。

所以我使用 Joda DateTime 编写了以下代码段。

```
DateTime dateTime = new DateTime(DateTimeZone.forID(user.getTimezone()));
DateTime todayMidnight = dateTime.toDateMidnight().toDateTime();
// now setting the event start and end time
event.setStartTime(todayMidnight.toDate());
event.setEndTime(todayMidnight.plusDays(1).toDate()); 
```

请注意，我的服务器在 UTC 时区运行，

`America/New_York`是 UTC-5，所以我希望 startdate 是，`4th Feb 2013 5:0:0`但对我来说，它将开始日期显示为`3rd Feb 2013 23:0:0`

上面的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:07:17.970

我建议你完全*避免*使用`DateMidnight`。（对于纽约来说可能没问题，但在其他时区，由于夏令时的变化，有些日子不存在午夜。）`LocalDate`用于表示日期。

例如：

```
DateTimeZone zone = DateTimeZone.forID(user.getTimezone());
// Defaults to the current time. I'm not a fan of this - I'd pass in the
// relevant instant explicitly...
DateTime nowInZone = new DateTime(zone);
LocalDate today = nowInZone.toLocalDate();
DateTime startOfToday = today.toDateTimeAtStartOfDay(zone);
DateTime startOfTomorrow = today.plusDays(1).toDateTimeAtStartOfDay(zone);

event.setStartTime(startOfToday.toDate());
event.setEndTime(startOfTomorrow.toDate()); 
```

# ios - 如何在 UIscrollView 中获取当前控制位置？

> ID：14681745
> 
> 赞同：1
> 
> 时间：2013-02-04T06:56:42.600
> 
> 标签：ios, objective-c, uiscrollview

在 uiscrollview 滚动某个值之后，我想在 uiscrollview 中获取当前的控制位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:01:35.070

滚动视图中控件的位置实际上不会随着滚动而改变。所以：

`yourSubview.frame`总是固定的。您可以通过查看以下内容来检查在滚动视图中滚动了多少内容：`scrollview.contentOffset`您可能猜到的 contentOffset 默认从 CGPoint 开始：(0,0) 滚动后，此值会相应更新。

# linux - Linux 上的 OpenProj JAVA_EXE 错误

> ID：14681765
> 
> 赞同：12
> 
> 时间：2013-02-04T06:59:08.247
> 
> 标签：linux, openjdk

我已经安装`openproj_1.4-2.deb`在我的 ubuntu 上。我在打开相同的情况下遇到以下错误。

```
Your Java vendor is "Oracle Corporation". To run OpenProj, you need the Sun Java implementation.
The auto-detected Java Runtime used is.. 
```

我试图`$HOME/.openproj/run.conf`通过更新`JAVA_EXE`变量来编辑文件来修复。但它不起作用。如何在我的 Linux 上运行 openproj？请帮助，在此先感谢。

（抱歉无法创建新标签，`openproj`）

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-23T06:59:03.417

开放`$HOME/.openproj/run.conf`与改变

```
JAVA_OPTS="-Xms128m -Xmx768m" 
```

至

```
JAVA_OPTS="-Djava.vendor=Sun -Xms128m -Xmx768m" 
```

然后运行它，它会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T06:25:20.073

我可以通过在脚本中添加`-Djava.vendor="Sun Microsystems Inc."`for java 命令来解决这个`run_openproj()`问题。`/usr/bin/openproj`

这是我更改后的更新功能：

```
run_openproj() {

if [ "$LOG_LEVEL" ] && [ "x$LOG_LEVEL" = "xDEBUG" ]; then
    "$JAVA_EXE" $JAVA_OPTS -Djava.vendor="Sun Microsystems Inc."  -jar "$OPENPROJ_HOME/openproj.jar" $ARGS > "$LOG_FILE"
else
    "$JAVA_EXE" $JAVA_OPTS -Djava.vendor="Sun Microsystems Inc."  -jar "$OPENPROJ_HOME/openproj.jar" $ARGS > /dev/null 2>&1
fi
} 
```

# java - 如何使用 Scanner 类？

> ID：14681769
> 
> 赞同：-1
> 
> 时间：2013-02-04T06:59:26.877
> 
> 标签：java, arraylist

在下面的代码中，我得到了基于我自己定义的数组列表的输出。

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

public class DinoMania {

public static void main(String[] args) {
    List<Dinosaur> dinoList = new ArrayList<Dinosaur>();
    Dinosaur d1 = new Dinosaur(1970, 1985);
    Dinosaur d2 = new Dinosaur(1980, 1981);
    Dinosaur d3 = new Dinosaur(1990, 2015);
    Dinosaur d4 = new Dinosaur(2000, 2007);
    Dinosaur d5 = new Dinosaur(2010, 2012);
    Dinosaur d6 = new Dinosaur(2020, 2030);
    Dinosaur d7 = new Dinosaur(2030, 2035);

    dinoList.add(d7);
    dinoList.add(d6);
    dinoList.add(d5);
    dinoList.add(d4);
    dinoList.add(d3);
    dinoList.add(d2);
    dinoList.add(d1);

    //System.out.println(dinoList);

    Collections.sort(dinoList);

    //System.out.println(dinoList);
    int maxCount = 0;
    List<String> ls=new ArrayList<String>();

    for (Dinosaur dino : dinoList) {

        // System.out.println("start date" + dino.getStartDate());
        // System.out.println("end date"+ dino.getEndDate());
        int count = 0;
        for (Dinosaur dino2 : dinoList) {

            if (dino2.getStartDate() <= dino.getEndDate()
                    && dino2.getEndDate() >= dino.getStartDate())
                count++;

        }
        //System.out.println(count);

        if (maxCount < count) {
            maxCount = count;
            ls.clear();
            ls.add(dino.getStartDate()+"-"+dino.getEndDate());
        }

        else if(maxCount==count)

        {
            ls.add(dino.getStartDate()+"-"+dino.getEndDate());
        }
    }
    //System.out.println(maxCount);

//System.out.println(ls);

System.out.println("Max no of Dinos alive at the same time :"+maxCount);
} 
```

}

我想知道当用户从控制台输入时如何动态定义数组列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:08:27.500

你可以使用这样的东西：

```
Scanner s = new Scanner(System.in);
    System.out.println("please enter 5 records");
    List<Dinosaur> dinoList = new ArrayList<Dinosaur>();

    for (int i = 0; i < 5; i++) {
        int num1 = s.nextInt();
        int num2 = s.nextInt();
        Dinosaur d = new Dinosaur(num1, num2);
        dinoList.add(d);

    } 
```

# javascript - 仅来自 iPhone Safari 的“A”链接在 iframe 上不起作用

> ID：14681770
> 
> 赞同：1
> 
> 时间：2013-02-04T06:59:53.457
> 
> 标签：javascript, jquery, iphone, iframe, safari

“A”标签的链接无法正常工作。有人解释这种行为吗？

这是 NG 示例 -> [http://hovertest.dyndns.org/ng/main.html](http://hovertest.dyndns.org/ng/main.html)

从 iPhone（或 iPad）Safari 访问并滚动 iframe 并单击 iframe 页面底部的“NIGHT”链接。它不会转到“night.html”。（您可能会获得同一页面的顶部。这是错误的行为。）

但是，从 CSS 中删除 'a:hover' 的 'background' 后，它将正常工作。

我完全无法理解。

这是一个很好的示例-> [http://hovertest.dyndns.org/ok/main.html](http://hovertest.dyndns.org/ok/main.html)

main.html

```
<html>
<head>
<title>NG LINK </title>
<script type="text/javascript"></script>
</head>
<body>
Main
<div style="height: 50%; overflow: scroll; -webkit-overflow-scrolling: touch;">
    <iframe src="./content.html" />
</div> 
```

内容.html

```
<html>
<head>
<LINK href="hover.css" rel="stylesheet" type="text/css">
<body>

<a href="./morning.html">MORNING</a>
<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
<BR><BR><BR><BR><BR><BR><BR><BR><BR><BR><BR>
<a href="./night.html">NIGHT</a>
</body>
</html> 
```

悬停.css

```
a:hover {
  color: yellow;
  background: red;
} 
```

起初，我试图通过 jQuery 从 'main.html' 中删除 CSS 的 'a:hover'。但是，我无法摆脱这个问题。

由于其他原因，我无法更改“content.html”和“hover.css”。

你有什么避免这个问题的想法吗？或解释这种行为？

谢谢， Y.
佐藤

# caliper - 如何跟踪 caliper 基准执行？

> ID：14681773
> 
> 赞同：0
> 
> 时间：2013-02-04T06:59:56.410
> 
> 标签：caliper

如何在“运行”模式下查看控制台输出（在 --debug 中我可以看到它）。caliper 是否创建执行日志？如何访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:24:25.037

如果我没记错的话，Caliper 0.5 对此并没有很好的支持。原因是如果您真的在执行基准测试，额外的 I/O 可能会降低性能。

Caliper 1.0 为您提供了更多选择。默认情况下，控制台输出仍然是隐藏的，但添加`--verbose`将显示工作人员的任何控制台输出。它还将日志发送到`~/.caliper/log/`. 日志配置可以在`~/.caliper/logging.properties`. 如果您需要更多地控制输出和日志记录，我建议您从 HEAD 中查看 Caliper 1.0 并尝试一下。我们希望很快有一个预先构建的测试版。

# linux - Hudson：返回状态码 141：致命：写入错误：设备上没有剩余空间

> ID：14681774
> 
> 赞同：4
> 
> 时间：2013-02-04T07:00:02.587
> 
> 标签：linux, git, hudson

我复制了一个现有项目并在哈德逊创建了一个新项目。运行构建时显示“返回状态代码 141：致命：写入错误：设备上没有剩余空间”

就像在其他论坛中建议的那样，我检查了文件系统中使用的可用空间和 inode，这里似乎没有任何问题。Hudson 作为服务运行，Hudons 用户已获得 sudo 权限。可以运行较旧的作业，因此在新的克隆作业中没有什么不同。

磁盘空间

```
bash-4.1$ df -h
Filesystem            Size  Used Avail Use% Mounted on
/dev/mapper/vg_dev-lv_root
                       20G   19G   28K 100% /
tmpfs                 1.9G  192K  1.9G   1% /dev/shm
/dev/sda1             485M   83M  377M  19% /boot
/dev/mapper/vg_dev-lv_home
                       73G   26G   44G  38% /home 
```

使用的 i 节点

```
bash-4.1$ df -i
Filesystem            Inodes   IUsed   IFree IUse% Mounted on
/dev/mapper/vg_dev-lv_root
                     1310720  309294 1001426   24% /
tmpfs                 490645       4  490641    1% /dev/shm
/dev/sda1             128016      46  127970    1% /boot
/dev/mapper/vg_dev-lv_home
                     4833280  117851 4715429    3% /home 
```

哈德逊构建日志

```
bash-4.1$ cat log
Started by user anonymous
Checkout:workspace / /var/lib/hudson/jobs/Demo/workspace - hudson.remoting.LocalChannel@1d4ab266
Using strategy: Default
Checkout:workspace / /var/lib/hudson/jobs/Demo/workspace - hudson.remoting.LocalChannel@1d4ab266
Fetching changes from the remote Git repository
Fetching upstream changes from ssh://demouser@10.10.10.10:20/home/git-repos/proj.git
ERROR: Problem fetching from origin / origin - could be unavailable. Continuing anyway
ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=ERROR:  (Underlying report) : Error performing command: git fetch -t ssh://demouser@10.10.10.10:20/home/git-repos/proj.git +refs/heads/*:refs/remotes/origin/*
Command "git fetch -t ssh://demouser@10.10.10.10:20/home/git-repos/proj.git +refs/heads/*:refs/remotes/origin/*" returned status code 141: fatal: write error: No space left on device

ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=ERROR: Could not fetch from any repository
ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=FATAL: Could not fetch from any repository
ha:AAAAWB+LCAAAAAAAAABb85aBtbiIQSmjNKU4P08vOT+vOD8nVc8DzHWtSE4tKMnMz/PLL0ldFVf2c+b/lb5MDAwVRQxSaBqcITRIIQMEMIIUFgAAckCEiWAAAAA=hudson.plugins.git.GitException: Could not fetch from any repository
        at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:887)
        at hudson.plugins.git.GitSCM$3.invoke(GitSCM.java:845)
        at hudson.FilePath.act(FilePath.java:758)
        at hudson.FilePath.act(FilePath.java:740)
        at hudson.plugins.git.GitSCM.gerRevisionToBuild(GitSCM.java:845)
        at hudson.plugins.git.GitSCM.checkout(GitSCM.java:622)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1483)
        at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:507)
        at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:424)
        at hudson.model.Run.run(Run.java:1366)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:145) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:40:18.170

您的错误消息很清楚：设备上没有剩余空间。

这已通过您的`df`输出验证：

```
Filesystem                    Size  Used Avail Use% Mounted on
/dev/mapper/vg_dev-lv_root     20G   19G   28K 100% / 
```

这告诉你，你有`/`一个总大小为 20GB 的根分区，它被 100% 使用。在您的情况下，20GB 可能有点小。由于此“分区”由 LVM (/dev/mapper/vg...) 管理，因此可以扩展它以为您的数据创建更多空间。

否则，您必须检查周围是否有一些可以清除的“垃圾”。您可以使用类似的东西`xdiskusage /`来找出占用您宝贵磁盘空间的内容。

但是如果你不了解文件系统的概念，也许找别人帮你做会更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T04:27:20.373

我有一个非常相似的问题，它原来是一个 40 gig 日志文件，来自一个“永无止境”的构建，已经运行了 8 个小时

# c# - 找到 .NET 库的正确组合根

> ID：14681779
> 
> 赞同：8
> 
> 时间：2013-02-04T07:00:33.040
> 
> 标签：c#, dependency-injection, inversion-of-control, composition

我在这里阅读了有关该论点的各种其他问题，最值得注意的是

[依赖注入（DI）“友好”库](https://stackoverflow.com/questions/2045904/dependency-inject-di-friendly-library)

[Ioc/DI - 为什么我必须在入口应用程序中引用所有层/组件？](https://stackoverflow.com/questions/9501604/ioc-di-why-do-i-have-to-reference-all-layers-assemblies-in-entry-application)

和这篇[文章](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)（和其他各种材料）。

但是，我不清楚在库 (DLL) .NET 项目中将组合根放在哪里。该项目不属于文章中提到的任何特定类型。在桌面、控制台甚至 Web 应用程序中，这一点被明确定义。

我目前的做法是包装容器，注册类型并重新公开 Resolve 方法：

```
class DefaultBootstrapper : IBootstrapper {
  public Bootstrapper() {
    _container = new XXXContainer();
    RegisterTypes(_container);
  }

  public T Resolve<T>() where T : class {
    return _container.Resolve<T>();
  }

  // + other _container.Resolve() overloads

  private readonly XXXContainer _container;
} 
```

然后我阻止库使用者创建库的*根实例*（例如定义内部构造函数），从而强制使用单例工厂：

```
class XYZFactory {
  static XYZFactory() {}

  private XYZFactory(IBootstrapper bootstrapper) {
    _bootstrapper = bootstrapper;
  }

  public static XYZFactory Instance {
    get { return Singleton; }
  }

  public ABCType CreateABCType(string param1) {
    return _bootstrapper.Resolve<ABCType>(param1, _bootstrapper.Resolve<Dependency1>); 
  }

  private static readonly XYZFactory Singleton = XYZFactory(new DefaultBootstrapper);
  private readonly IBootstrapper _bootstrapper;
} 
```

问题是，有更好的方法或更好的模式来定位库项目中的**组合根吗？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T10:30:02.983

这取决于您正在创建的库的类型。您的库项目是您自己的解决方案的一部分，还是其他开发人员在您的团队、部门甚至组织之外依赖的可重用库？

如果它只是解决方案的库项目的一部分，则库项目本身通常不应包含组合根。根据定义，[组合根](http://blog.ploeh.dk/2011/07/28/CompositionRoot.aspx)是“模块组合在一起的应用程序中的（最好）唯一位置”。换句话说，您的解决方案将有一个或多个启动项目（例如 MVC 应用程序、WCF 服务、控制台应用程序），并且每个启动项目都将获得自己的组合根。下面的图层不会有自己的合成根。

顺便说一句，这并不意味着您不应该防止组合根内的代码重复。当包含项目（例如 DAL 和 BLL）的默认接线导致大量重复时，您通常应该将此逻辑提取到另一个项目中。您可以通过在其中一个项目（很可能是 BLL）中包含部分注册逻辑并让每个组合根调用该共享逻辑来做到这一点，或者您可以通过为该项目添加一个特殊的“引导程序”项目来做到这一点，并且引用的项目。此引导程序项目将仅包含注册逻辑。通过将此逻辑与应用程序程序集分离，您可以防止这些程序集需要对使用的依赖注入库的依赖。但是，如果程序集依赖于此类库，通常不是问题，

对于可重用的库，事情通常是不同的。在这种情况下，消费者将使用您的库，但您无法控制他们如何构建他们的应用程序。您通常希望以消费者可以直接使用的方式提供库，而不必在其组合根中进行各种“复杂”注册。您通常甚至根本不知道它们是否有组合根。

In that case you should typically make your library working without a DI container. You should yourself not take a dependency on such a container, because this would drag the container in. If you do use a container, question yourself why your reusable library uses a container, and if this has to be. Perhaps you do because you designed all types around the dependency injection principle; because this makes testing easier. Don't forget that this is your problem, not the problem of your consumers. As a reusable library designer, you should hard in getting your library as usable as possible for your consumers. Please do never assume your consumers are using a DI Container. Even if they practice Dependency Injection, they might apply [Pure DI](http://blog.ploeh.dk/2014/06/10/pure-di/) rather than a DI Container.

In case you are building a reusable library, take a look at [this blog](http://blog.ploeh.dk/2014/05/19/di-friendly-library/) post from Mark Seemann.

# android - 找到cordova.2.3.0.jar 文件？

> ID：14681784
> 
> 赞同：0
> 
> 时间：2013-02-04T07:00:51.823
> 
> 标签：android, cordova

我在哪里可以找到 cordova.2.0.3.jar ？我正在尝试在 Android 上使用 PhoneGap 运行。

```
localhost:bin shuttle$ ./create ~/Documents/cordova-android/HelloWorld com.Name.HelloWorld HelloWorld
cp: /Users/shuttle/Documents/cordova-android/framework/cordova-2.3.0.jar: No such file or directory
An unexpected error occurred: cp "$BUILD_PATH"/framework/cordova-$VERSION.jar "$PROJECT_PATH"/libs/cordova-$VERSION.jar exited with 1
Deleting project... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:17:42.380

试试这个链接。下载Phonegap并检查它是否是cordova.2.0.3。如果您使用的是 android，请打开您下载的 phonegap (phonegap/libs/android/(cordova.jar 和 cordova.js) 或 (phonegap.jar 和 phonegap.js)。然后复制该 cordova.jar 并粘贴到 android 项目中 ( android project/libs/cordova.jar）并复制cordova.js并粘贴到同一个android项目（android project/assets/www/cordova.js）中。在这个链接中你可以很容易地理解phonegap教程，你可以得到一些想法它.....

[http://phonegap.com/download/](http://phonegap.com/download/)

# algorithm - 由 *removing* 集构建的贪婪集覆盖算法

> ID：14681788
> 
> 赞同：3
> 
> 时间：2013-02-04T07:01:25.850
> 
> 标签：algorithm, greedy, set-cover

我正在尝试使用贪心算法实现集合覆盖问题的解决方案。

经典的贪心逼近算法是

```
input: collection C  of sets over universe U  , costs: C→R ≥0    
output: set cover S   
1\. Let S←∅.  
2\. Repeat until S covers all elements:  
3\.   Add a set s to S, where s∈C maximizes the number of elements in s not yet covered by set s in S, divided by the cost c(s). 
4\. Return S. 
```

我有两个部分的问题：

一种。反向执行算法是否是有效算法，即

```
input: collection C  of sets over universe U  , costs: C→R ≥0    
output: set cover S   
1\. Let S←C  .  
2\. Repeat until there are no s∈S such that S-s=S (i.e. all elements in s are redundant):  
3\.   Remove a set s from S, where s∈S minimises the number of elements in s, divided by the cost c(s). 
4\. Return S. 
```

湾。问题的本质是很容易得到 C 并且冗余集的数量有限（<5） - 在这种情况下，这个*去除*算法会表现得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T11:41:30.077

该算法肯定会返回一个有效的集合覆盖，因为它在每一步都会检查 s 的所有元素是否都是冗余的。直觉上我觉得 b 部分是正确的，尽管我无法为它写出正式的证明。阅读[Vijay Vazirani](http://www.cc.gatech.edu/fac/Vijay.Vazirani/book.pdf)的第 2 章，因为它可能有助于分析部分。

# java - 如何从插件中读取 .m2/settings.xml 文件中的 Maven 设置

> ID：14681790
> 
> 赞同：15
> 
> 时间：2013-02-04T07:01:28.407
> 
> 标签：java, maven, maven-plugin

三个问题按重要性降序排列 - 链接就可以了。

1.  我需要在我的 Maven 插件中读取某些 Maven 设置，例如**代理、服务器。**我如何从我的插件中读取它们。我可以从 .m2/settings.xml 文件中读取，但我认为必须有一种更简单的方法（一些 API 已经做到了）。

2.  我从[开发人员食谱](http://docs.codehaus.org/display/MAVENUSER/Mojo+Developer+Cookbook#MojoDeveloperCookbook-Themavenproject,ortheeffectivepom.)中看到有一门课

    ```
    org.apache.maven.project.MavenProject
    ```

    我需要什么依赖才能在我的插件中可用 - 我觉得这会很好。
3.  是否可以拥有我自己的财产

    ```
    设置.xml
    ```

    例如说

    ```
    <users> 
      <user> 
        <username>user_name1</username> 
        <password>encrypted_pa​​ssword</password> 
      </user> 
    </users>
    ```

    如何 ？

PS：我是初学者。

### 更新 1

[在通过 Settings.xml 注入 POM 属性](http://maven.apache.org/examples/injecting-properties-via-settings.html)之后，我能够创建和读取自定义属性。但是，我希望配置类似于[cargo](http://cargo.codehaus.org/Maven2+plugin)提供的配置。例如

```
 <servers>
        <server>
            <id>tomcat7_local</id>
            <configuration>
                <cargo.hostname>localhost</cargo.hostname>
                <cargo.remote.uri>http://localhost:8080/manager/text</cargo.remote.uri>
                <cargo.remote.username>my_username</cargo.remote.username>
                <cargo.remote.password>my_password</cargo.remote.password>
                <cargo.servlet.port>8080</cargo.servlet.port>
            </configuration>
        </server>
        <server>
            <id>tomcat6_local</id>
            <configuration>
                <cargo.hostname>localhost</cargo.hostname>
                <cargo.remote.uri>http://localhost:8080/manager</cargo.remote.uri>
                <cargo.remote.username>my_username</cargo.remote.username>
                <cargo.remote.password>my_password</cargo.remote.password>
                <cargo.servlet.port>8080</cargo.servlet.port>
            </configuration>
        </server>
    </servers> 
```

我如何做到这一点。对我的第三个问题有一种解决方法，不确定它是否正确。

## 编辑

谢谢乔丹[002](https://stackoverflow.com/users/37856/jordan002)！我知道我可以拥有多个配置文件，但我不知道如何使用它们。通过这种方式，通过配置文件，我可以设置变量的值，或者通过说类似的话将值注入我的插件

```
@Parameter(alias = "cargo.hostname")
私有字符串主机名；
```

但正如我所见，对于货物插件，它所需的所有定义如下

```
<servers>
  <server>
     <id>someId</id>
     <configuration>
     <!-- Configurations are placed here -->
     </configuration>
</servers> 
```

类似，或者可能不那么类似，因为这里没有**配置**

```
<proxies>
  <proxy>
    <active>true</active>
    <protocol>http</protocol>
    <host>My_proxy_host</host>
    <port>My_proxy_port</port>
  </proxy>
</proxies> 
```

是我可以放置 maven 使用的代理信息的地方。现在，我不想在某些**配置文件**中重新定义它，也不想解析这个文件来获取信息。

此外，我想做货物正在做的事情。**它让我可以在服务器**和项目的 pom 中编写所有配置，我只需要执行以下操作

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <configuration>
        <container>
            <containerId>tomcat7x</containerId>
            <type>remote</type>
        </container>
        <configuration>
            <type>runtime</type>
            <properties>
                <cargo.server.settings>tomcat7_local</cargo.server.settings>
            </properties>
        </configuration>
        <deployer>
            <type>remote</type>
        </deployer>
        <deployables>
            <deployable>
                <groupId>${project.groupId}</groupId>
                <artifactId>${project.artifactId}</artifactId>
                <type>war</type>
                <properties>
                    <context>${project.artifactId}</context>
                </properties>
            </deployable>
        </deployables>
    </configuration>
</plugin> 
```

**cargo 会获取我为tomcat7_local**定义的配置，无需为此编写配置文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T04:56:13.890

1.  按照此处的描述注入设置组件[http://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/](http://maven.apache.org/plugin-tools/maven-plugin-tools-annotations/)

2.  它在 Maven 核心 org.apache.maven:maven-core:3.0.5

3.  直接使用属性而不是嵌套。例如[http://maven.apache.org/examples/injecting-properties-via-settings.html](http://maven.apache.org/examples/injecting-properties-via-settings.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T15:12:05.667

我对 Cargo 插件不太熟悉，但从文档来看，它似乎可以像任何其他 Maven 插件一样进行配置。我将从您的“更新 1”中改变的是制作 tomcat6 和 tomcat7 配置文件：

```
<profiles>
    <profile>
        <id>tomcat6_local</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <properties>
            <cargo.hostname>localhost</cargo.hostname>
            <cargo.remote.uri>http://localhost:8080/manager/text</cargo.remote.uri>
            <cargo.remote.username>my_username</cargo.remote.username>
            <cargo.remote.password>my_password</cargo.remote.password>
            <cargo.servlet.port>8080</cargo.servlet.port>
        </properties>
    </profile>
    <profile>
        <id>tomcat7_local</id>
        <activation>
            <activeByDefault>false</activeByDefault>
        </activation>
        <properties>
            <cargo.hostname>localhost</cargo.hostname>
            <cargo.remote.uri>http://localhost:8080/manager</cargo.remote.uri>
            <cargo.remote.username>my_username</cargo.remote.username>
            <cargo.remote.password>my_password</cargo.remote.password>
            <cargo.servlet.port>8080</cargo.servlet.port>
        </properties>
    </profile>
</profiles> 
```

并在运行时通过传入适当的配置文件来指示您想要启动/停止哪个 tomcat：

```
mvn install -P tomcat6_local 
```

希望这可以帮助。

# php - xml：如何将变量加入 xml 响应

> ID：14681792
> 
> 赞同：0
> 
> 时间：2013-02-04T07:01:33.313
> 
> 标签：php, xml, simplexml

我的 xml 响应：

```
<item>
<title geoid="1198">District of Columbia</title>
<description cong_dist="Delegate District (at Large) 98">DC - Delegate District (at Large) 98 <br/> No of Incidents: 1436</description>
<latitude>38.8933115</latitude>
<longitude>-77.0146475</longitude>
</item> 
```

而且我必须在其中添加一个变量。

该变量包含另一个 xml 响应：

```
 var polygon=xmlDoc.getElementsByTagName("georss:polygon");

<georss:polygon>38.934311 -77.1199 38.939834989364 -77.112868886998 38.94641 -77.1045 38.94891 -77.1007 38.95651 -77.0915 38.960871062931 -77.085827416011 38.967245703105 -77.07753570311 -77.015598 38.97441 -77.013798 38.97011 -77.00829238.967245703105 -77.077535703105 38.960871062931 -77.085827416011 38.95651 -77.0915 38.94891 -77.1007 38.94641 -77.1045 38.939834989364 -77.112868886998 38.934311 -77.1199</georss:polygon> 
```

我将这些值存储为变量`polygon`。

`polygon` 所以我必须在项目标签中加入这些值。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:43:45.140

简单的：

```
$sxe = new SimpleXMLElement($response_xml);
$sxe->addChild("polygon", $polygon);
$sxe->saveXML("new_updated.xml");
//echo $sxe->asXML(); 
```

如果响应 XML 文件在磁​​盘上：

```
$sxe = simplexml_load_file("response.xml"); 
```

# android - Android：在应用程序中实现 Woopra

> ID：14681793
> 
> 赞同：3
> 
> 时间：2013-02-04T07:01:33.697
> 
> 标签：android

试图在我的应用程序中添加**Woopra**`Android` ，但没有`SDK`提供`Android`。有什么办法可以将**Woopra**`Android App`添加到中`log events`？如果有人尝试过这个话题，请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:03:56.460

我是来自 Woopra 的 Elie。本周我们将发布一个 Android SDK。您可以直接在我们的 GitHub 帐户上访问它：

[https://github.com/Woopra/woopra-android-sdk](https://github.com/Woopra/woopra-android-sdk)

我们仍在进行最后的润色，但您可以随时获取更新。

埃利

# ruby-on-rails - 如何在 Rails 3 项目中包含 SSL 证书

> ID：14681797
> 
> 赞同：2
> 
> 时间：2013-02-04T07:01:41.190
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, thin

我开发了一个`thin`用作服务器的 Rails 3 项目，以及用于身份验证的 Devise 和 Doorkeeper

我想在我的项目中添加 SSL 证书。我看过一些描述如何在 Rails 3 项目中使用 SSL 证书的帖子，但没有一个显示如何在 Rails 3 项目中添加证书。

`config.force_ssl = true`我已经在我的 中启用了`applicationcontroller.rb`，我尝试启动瘦服务器，例如：

```
thin start --ssl 
```

它无需添加证书即可工作，我现在可以使用`https://`（从浏览器获取证书未验证警告。我希望这是因为我的证书未经 CA 验证）访问我的网站。

最近我看到一篇文章展示了如何在 Rails 3 项目中添加 SSL 证书； [如何将 SSL 选项传递到 Rails 3.0 中的“rails 服务器”？](https://stackoverflow.com/questions/3604303/how-can-i-pass-ssl-options-into-rails-server-in-rails-3-0/7862689#7862689)

```
:SSLEnable        => true,
:SSLVerifyClient    => OpenSSL::SSL::VERIFY_NONE,
:SSLPrivateKey        => OpenSSL::PKey::RSA.new(File.open(current_dir + "/config/certs/server.key").read),
:SSLCertificate         => OpenSSL::X509::Certificate.new(File.open(current_dir + "/config/certs/server.crt").read),
:SSLCertName    => [ [ "CN", WEBrick::Utils::getservername ] ] 
```

这是添加证书的正确方法吗？每次我尝试启动服务器时，我都需要指定这些选项。

是否有任何其他方法可以在我的项目配置中包含证书路径（或在我的项目中包含证书），以便每次启动服务器时都无需指定证书路径？

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T09:24:07.587

在这里，我找到了有关将 ssl 添加到瘦的答案：

[带有 SSL 支持和 ruby​​-debug 的瘦身](https://stackoverflow.com/questions/8753566/thin-with-ssl-support-and-ruby-debug)

如果您想将 ssl 添加到 nginx（我建议在生产中使用 nginx），这里描述了如何将证书添加到 nginx

[http://wiki.nginx.org/HttpSslModule](http://wiki.nginx.org/HttpSslModule)

```
server {
  listen               443;
  ssl                  on;
  ssl_certificate      /path_to_certificate/cert.pem;
  ssl_certificate_key  /path_to_certificate/cert.key;
  keepalive_timeout    70;
} 
```

# spring - 调用 init 方法失败；嵌套异常是 java.lang.NoClassDefFoundError: org/hibernate/util/DTDEntityResolver

> ID：14681804
> 
> 赞同：6
> 
> 时间：2013-02-04T07:02:13.790
> 
> 标签：spring, hibernate, spring-mvc

我在我的 Maven 项目中使用了带有 spring 的休眠。这是我的 POM 文件

```
<?xml version="1.0" encoding="UTF-8"?>
<project 
    xmlns="http://maven.apache.org/POM/4.0.0" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
    http://maven.apache.org/maven-v4_0_0.xsd">

    <modelVersion>4.0.0</modelVersion>
    <groupId>org.mod.com</groupId>
    <artifactId>Services</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <name>Services</name>
    <url>http://maven.apache.org</url>

    <properties>
        <maven.test.failure.ignore>true</maven.test.failure.ignore>
        <spring.framework.version>3.1.3.RELEASE</spring.framework.version>
        <hibernate.version>4.1.1.Final</hibernate.version>
        <sl4j.version>1.5.6</sl4j.version>
    </properties>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.8</version>
                <configuration>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                    <sourceIncludes>
                        <sourceInclude>**/*.*</sourceInclude>
                    </sourceIncludes>
                </configuration>
            </plugin>
            <!-- Configuration which allows JUnit tests to be placed in the same folder as java files
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <configuration>
                    <testSourceDirectory>${basedir}/src/main/java/</testSourceDirectory>
                    <testClassesDirectory>${project.build.directory}/classes/</testClassesDirectory>
                </configuration>
            </plugin> -->
        </plugins>
        <!-- Configuration which allows configuration files (such as xml files) to be placed in the same folder as java files
        <resources>
           <resource>
             <directory>${basedir}/src/main/java/</directory>
           </resource>
         </resources> -->
    </build>

    <dependencies>
        <dependency>
          <groupId>javax.servlet</groupId>
          <artifactId>servlet-api</artifactId>
          <version>2.5</version>
          <scope>provided</scope>
        </dependency>
        <!-- <dependency>
          <groupId>javax.servlet.jsp</groupId>
          <artifactId>jsp-api</artifactId>
          <version>2.1</version>
          <scope>provided</scope>
        </dependency>
        **********************************************************************
        ** SPRING DEPENDENCIES **
        ********************************************************************** -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-instrument</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-instrument-tomcat</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jms</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-oxm</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-struts</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc-portlet</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

        <!-- **********************************************************************
        ** POSTGRES DEPENDENCIES **
        ********************************************************************** -->
        <dependency>
                <groupId>postgresql</groupId>
                <artifactId>postgresql</artifactId>
                <version>8.3-603.jdbc4</version>
        </dependency>

        <!-- **********************************************************************
        ** HIBERNATE DEPENDENCIES **
        ********************************************************************** -->

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <!-- **********************************************************************
        ** JAVAX PERSISTENCE **
        ********************************************************************** -->
        <!-- <dependency>
            <groupId>org.eclipse.persistence</groupId>
            <artifactId>javax.persistence</artifactId>
            <version>${javax.persistence.version}</version>
        </dependency> -->

        <!-- **********************************************************************
        ** OTHER DEPENDENCIES **
        ********************************************************************** -->      
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-jcl</artifactId>
            <version>${sl4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${sl4j.version}</version>
        </dependency>
        <dependency>
            <groupId>javax.transaction</groupId>
            <artifactId>jta</artifactId>
            <version>1.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2.2</version>
            <scope>runtime</scope>
        </dependency>

        <!-- **********************************************************************
        ** TEST DEPENDENCIES
        ** ********************************************************************** -->

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.framework.version}</version>
        </dependency>

    </dependencies>
</project> 
```

这是我的 DAO 课程

```
public class Task_Impl implements Task_Interface {

    @Autowired
    SessionFactory sessionfactory;
    @Override
    @Transactional
    public void createTask(Task task) {
        // TODO Auto-generated method stub
        sessionfactory.getCurrentSession().save(task);
        System.out.println("Task created in database");

    }

    @Override
    public void deleteTask() {
        // TODO Auto-generated method stub

    }

} 
```

这是我的 Dispatcher Servlet (HelloWeb-servlet.xml)

```
 xmlns:ehcache="http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring" 

   xsi:schemaLocation="
   http://www.springframework.org/schema/beans     
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
   http://www.springframework.org/schema/tx 
   http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring
   http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd">

<context:component-scan base-package="org.mod.com.Prime"/>
<mvc:annotation-driven/>

<bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/"></property>
    <property name="suffix" value=".jsp"></property>
</bean>
<bean id="task_impl_bean" class="org.mod.Prime.DAO.Implementation.Task_Impl">

</bean>

<bean id="sessionfactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSourceBean"></property>
    <property name="annotatedClasses" value="org.mod.Prime.Data.Task"></property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="dataSourceBean" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.postgresql.Driver"/>
    <property name="url" value="jdbc:postgresql://localhost:5432/newdatabase"/>
    <property name="username" value="postgres"/>
    <property name="password" value="P@ssword"/>
</bean>

 <tx:annotation-driven transaction-manager="txManager"/>

  <bean id="txManager"  class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionfactory">
         <ref local="sessionfactory"/>
    </property>
  </bean> 
```

当我尝试运行该项目时，出现以下错误

```
Error creating bean with name 'task_impl_bean': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: org.hibernate.SessionFactory org.mod.Prime.DAO.Implementation.Task_Impl.sessionfactory; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionfactory' defined in ServletContext resource [/WEB-INF/HelloWeb-servlet.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/util/DTDEntityResolver 
```

主要原因是

```
Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: org/hibernate/util/DTDEntityResolver 
```

正如你在我的 pom 文件中看到的，我已经包含了 hibernate jars。我不知道确切的错误是什么。有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:20:25.060

尝试在 sessionFactory 之前声明 dataSourceBean

```
<bean id="dataSourceBean" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="org.postgresql.Driver"/>
    <property name="url" value="jdbc:postgresql://localhost:5432/newdatabase"/>
    <property name="username" value="postgres"/>
    <property name="password" value="P@ssword"/>
</bean>

<bean id="sessionfactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSourceBean"></property>
    <property name="annotatedClasses" value="org.mod.Prime.Data.Task"></property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-27T15:14:24.100

这是 Bean 初始化时的动态类加载！DTD 实体 Resolver 用于在加载到容器时解析 Spring Bean 类。我认为您的 Hibernate 版本与您的框架和代码不兼容！你为什么使用不同的休眠注释版本？

```
 <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-Final</version>
        </dependency> 
```

您确定您的 Hibernate 版本与您的 Spring 框架兼容吗？尝试更改版本，同时检查您用于运行 Spring 服务器的 JVM 版本！

# signalr - OnDisconnected 不会在重新加载页面时触发

> ID：14681808
> 
> 赞同：0
> 
> 时间：2013-02-04T07:02:22.930
> 
> 标签：signalr

我正在使用 signalr-rc2 并将其用于 IIS7 上的跨域长轮询调用（不是 express）

一切正常，除了服务器端的 OnDisconnected

当我点击浏览器（firefox 或 chrome）上的关闭按钮时，调用 OnDisconnected 但

当我刷新浏览器选项卡时，未调用 OnDisconnected

但是我在一个小项目上对其进行了测试，它完全可以正常工作

我的问题是重新加载浏览器页面和关闭它之间的区别是什么

我等待了将近 15 分钟的 IIS 延迟以实现客户端断开连接，但没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T12:40:12.973

我发现问题是由 asp.net mvc 视图渲染引起的文档中的两个 html 标记（我忘记在操作方法中返回部分视图而不是视图）

# python - 是否存在从 utf8 到 latin-1 的映射？Python

> ID：14681809
> 
> 赞同：2
> 
> 时间：2013-02-04T07:02:35.577
> 
> 标签：python, unicode, encoding, utf-8, latin1

是否存在从 utf8 到 latin-1 和 utf8 中标准化非重音字母的映射？

我一直收到错误，例如：

```
UnicodeEncodeError: 'latin-1' codec can't encode character u'\u010d' in position 4: ordinal not in range(256) 
```

我正在通过执行以下代码手动解决这些错误中的每一个。有一个更好的方法吗？：

```
def prehunpos(sentence):
    sentence = sentence.replace(u'\u2018',"'") # left single quote mark
    sentence = sentence.replace(u'\u2019',"'") # right single quote mark
    sentence = sentence.replace(u'\u201C','"') # left double quote mark
    sentence = sentence.replace(u'\u201D','"') # right double quote mark
    sentence = sentence.replace(u'\u2010',"-") # hyphen
    sentence = sentence.replace(u'\u2011',"-") # non-break hyphen
    sentence = sentence.replace(u'\u2012',"-") # figure dash
    sentence = sentence.replace(u'\u2013',"-") # dash
    sentence = sentence.replace(u'\u2014',"-") # some sorta dash
    sentence = sentence.replace(u'\u2015',"-") # long dash
    sentence = sentence.replace(u'\u2017',"_") # double underscore
    sentence = sentence.replace(u'\u2014',"-") # some sorta dash
    sentence = sentence.replace(u'\u2016',"|") # long dash
    sentence = sentence.replace(u'\u2024',"...") # ...
    sentence = sentence.replace(u'\u2025',"...") # ...
    sentence = sentence.replace(u'\u2026',"...") # ...
    sentence = sentence.replace("\xce\x9d\xce\x91\xce\xa4\xce\x9f",u'NATO') # NATO

    sentence = sentence.replace(u'\u0391',"A") # Greek Capital Alpha
    sentence = sentence.replace(u'\u0392',"B") # Greek Capital Beta
    #sentence = sentence.replace(u'\u0393',"") # Greek Capital Gamma
    #sentence = sentence.replace(u'\u0394',"") # Greek Capital Delta
    sentence = sentence.replace(u'\u0395',"E") # Greek Capital Epsilon
    sentence = sentence.replace(u'\u0396',"Z") # Greek Capital Zeta
    sentence = sentence.replace(u'\u0397',"H") # Greek Capital Eta
    #sentence = sentence.replace(u'\u0398',"") # Greek Capital Theta
    sentence = sentence.replace(u'\u0399',"I") # Greek Capital Iota
    sentence = sentence.replace(u'\u039a',"K") # Greek Capital Kappa
    #sentence = sentence.replace(u'\u039b',"") # Greek Capital Lambda
    sentence = sentence.replace(u'\u039c',"M") # Greek Capital Mu
    sentence = sentence.replace(u'\u039d',"N") # Greek Capital Nu
    #sentence = sentence.replace(u'\u039e',"") # Greek Capital Xi
    sentence = sentence.replace(u'\u039f',"O") # Greek Capital Omicron
    sentence = sentence.replace(u'\u03a1',"P") # Greek Capital Rho
    #sentence = sentence.replace(u'\u03a3',"") # Greek Capital Sigma
    sentence = sentence.replace(u'\u03a4',"T") # Greek Capital Tau
    sentence = sentence.replace(u'\u03a5',"Y") # Greek Capital Upsilon
    #ssentence = sentence.replace(u'\u03a6',"") # Greek Capital Phi
    sentence = sentence.replace(u'\u03a7',"T") # Greek Capital Chi
    #sentence = sentence.replace(u'\u03a8',"") # Greek Capital Psi
    #sentence = sentence.replace(u'\u03a9',"") # Greek Capital Omega

    sentence = sentence.replace(u'\u03b1',"a") # Greek small alpha
    sentence = sentence.replace(u'\u03b2',"b") # Greek small beta
    #sentence = sentence.replace(u'\u03b3',"") # Greek small gamma
    #sentence = sentence.replace(u'\u03b4',"") # Greek small delta
    sentence = sentence.replace(u'\u03b5',"e") # Greek small epsilon
    #sentence = sentence.replace(u'\u03b6',"") # Greek small zeta
    #sentence = sentence.replace(u'\u03b7',"") # Greek small eta
    #sentence = sentence.replace(u'\u03b8',"") # Greek small thetha
    sentence = sentence.replace(u'\u03b9',"i") # Greek small iota
    sentence = sentence.replace(u'\u03ba',"k") # Greek small kappa
    #sentence = sentence.replace(u'\u03bb',"") # Greek small lamda
    sentence = sentence.replace(u'\u03bc',"u") # Greek small mu
    sentence = sentence.replace(u'\u03bd',"v") # Greek small nu
    #sentence = sentence.replace(u'\u03be',"") # Greek small xi
    sentence = sentence.replace(u'\u03bf',"o") # Greek small omicron
    #sentence = sentence.replace(u'\u03c0',"") # Greek small pi
    sentence = sentence.replace(u'\u03c1',"p") # Greek small rho
    sentence = sentence.replace(u'\u03c2',"c") # Greek small final sigma
    #sentence = sentence.replace(u'\u03c3',"") # Greek small sigma
    sentence = sentence.replace(u'\u03c4',"t") # Greek small tau
    sentence = sentence.replace(u'\u03c5',"u") # Greek small upsilon
    #sentence = sentence.replace(u'\u03c6',"") # Greek small phi
    sentence = sentence.replace(u'\u03c7',"x") # Greek small chi
    sentence = sentence.replace(u'\u03c8',"x") # Greek small psi
    sentence = sentence.replace(u'\u03c9',"w") # Greek small omega

    sentence = sentence.replace(u'\u0103',"a") # Latin a with breve
    sentence = sentence.replace(u'\u0107',"c") # Latin c with acute
    sentence = sentence.replace(u'\u010d',"c") # Latin c with caron
    sentence = sentence.replace(u'\u0161',"s") # Lation s with caron

    return sentence.strip() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:24:18.907

如果您需要将非拉丁文字转换为拉丁文的通用方法，[ICU 转换](http://userguide.icu-project.org/transforms)是最佳选择。ICU 有一个 Python 包装器 PyICU ( [http://pypi.python.org/pypi/PyICU](http://pypi.python.org/pypi/PyICU) )。但是，如果您只针对单个脚本（看起来您对希腊语特别感兴趣？），映射表是最快的解决方案。虽然你可以写得更简洁：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

greek_to_latin = {u"Α": u"A", u"Β": u"B", u"Γ": u"G"}  # ...
latin_string = "".join(greek_to_latin[c] for c in greek_string) 
```

您还可以查看 unicodedata 模块，该模块可以识别字符的类别，识别非 ASCII 标点符号。

# iphone - 数据库中列的最大值

> ID：14681811
> 
> 赞同：0
> 
> 时间：2013-02-04T07:03:02.207
> 
> 标签：iphone, ios, sqlite

在我的数据库中有表名“Projtable”。项目名称包含 4 个字段。1\. 项目 id = 自动增量（主键） 2\. 项目名称 = varchar 3\. 项目详细信息 = varchar 4\. order_id = int

现在我插入 projctname 和 projct_detail 可以完美运行。我必须找到 orderid 列的最大值。我怎样才能找到这个？

我的代码是：

```
-(void)insertProject:(Project *)projobj
{
//    next_orderid = next_orderid + 1;
//    projobj.orderid = next_orderid;

    NSLog(@" insert:: %@, %@, %d", projobj.outcome, projobj.projctname, projobj.orderid);
     sqlite3 *database;
    if (sqlite3_open([self.databasePath UTF8String] , &database) == SQLITE_OK)
    {
        const char *sql = "INSERT INTO proj_table (projctname, outcome, orderid) VALUES (?,?,?)";
        sqlite3_stmt *statement;
        statement = [self PrepareStatement:sql];

        int a1 = sqlite3_bind_text(statement, 1, [projobj.projctname UTF8String], -1, SQLITE_TRANSIENT);
        int a2 =  sqlite3_bind_text(statement, 2, [projobj.outcome UTF8String], -1, SQLITE_TRANSIENT);
       int a3= sqlite3_column_int( statement, 3);
        NSLog(@" integer :== %d",a3);
       // int a3 = sqlite3_bind_int(statement, 3, projobj.orderid);
            if (statement)
        {
            if (a1 != SQLITE_OK || a2 != SQLITE_OK || a3 != SQLITE_OK)
            {
                sqlite3_finalize(statement);
                return;
            }
            sqlite3_step(statement);
        }
        sqlite3_finalize(statement);
    }
} 
```

结果为 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:08:42.227

您可以通过如下查询找到列的最大值：

```
SELECT MAX(orderid) FROM proj_table; 
```

但最好将列创建为`INTEGER PRIMARY KEY`（当你`CREATE TABLE`），所以它是自动递增的（并且最后插入的 id 可用于`sqlite3_last_insert_rowid`）。

如果您仍然有理由使用最大值，请确保在单个事务中运行`SELECT MAX...`以下内容`INSERT`，除非您确定不会有其他进程/线程更新数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:07:02.097

使用 SQL 选择语句

```
Select max(orderid) from proj_table; 
```

然后，您可以使用 integer+1 作为下一个值。

# python - Python 3.3 非常简单的初学者代码需要帮助

> ID：14681812
> 
> 赞同：2
> 
> 时间：2013-02-04T07:03:02.363
> 
> 标签：python, file, sequential

我正在尝试读取一个文本文件并用每一行做两件事：

*   在我的显示器上显示
*   创建备份副本..

以前的代码有效，但 Python 在我的显示器上显示垃圾

然后我尝试了这段代码，它没有工作，抱怨 file.close() 语句上的语法错误..

=================================================

```
file = open ('C:\ASlog.txt', 'r')
output = open('C:\ASlogOUT.txt', 'w')

for line in file:
   print(str(line))
   output.write(line

file.close()
output.close() 
```

==================================================== ==

今天是我第一次看到 Python，所以请原谅我对它的最大无知.. 非常感谢！干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:04:05.187

你在之前的行中缺少一个括号

```
output.write(line 
```

应该

```
output.write(line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T15:52:20.143

如果您是 Python 新手，尤其是 3.3，您应该使用`with`自动关闭文件：

```
with open('input') as fin, open('output', 'w') as fout:
    fout.writelines(fin) # loop only if you need to do something else 
```

在这种情况下，哪个写得更好：

```
import shutil
shutil.copyfile('input filename', 'output filename') 
```

因此，您的完整示例将用于显示到屏幕并将行写入文件：

```
with open('input') as fin, open('output', 'w') as fout:
    for line in fin:
        print(line)
        fout.write(line) 
```

# java - 是否可以使用 iBATIS 中止长时间运行的查询？

> ID：14681813
> 
> 赞同：3
> 
> 时间：2013-02-04T07:03:06.497
> 
> 标签：java, sql, ibatis

我有一个 GUI，它允许用户运行长时间运行的查询。有时，用户会后悔运行查询并想取消它们。查询是使用 iBATIS 针对 Oracle 数据库运行的，我知道 java.sql.Statement 接口定义了一个取消方法，该方法可能由驱动程序实现，也可能不实现。所以我的问题是，是否可以使用 iBATIS 调用此方法来取消查询（给定正确的驱动程序），或者是否有任何其他方式中止正在进行的长时间运行的查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:37:56.587

好吧，
我想一旦到达数据库服务器，取消它确实是一个“特定于数据库供应商”的问题。
如果您的要求是取消查询，
那么当涉及到您的应用程序时
（即 - 如果它到达 Oracle DB 服务器并在那里运行，那么您很好，只要您不会得到结果），请考虑使用[Future](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)具有取消方法的接口。
您可以[提交](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#submit%28java.util.concurrent.Callable%29)一个“可调用”来运行您的查询，它将返回一个正确的类型对象，它是一个实现。
如果您需要中止 - 只需使用未来对象的“取消”方法。您还可以使用“isCanceled”检查提交是否被取消，并对您的代码进行适当的处​​理。

# java - HibernateListener-Class 未找到错误

> ID：14681814
> 
> 赞同：1
> 
> 时间：2013-02-04T07:03:07.603
> 
> 标签：java, hibernate, struts, hql, sessionfactory

我正在尝试创建休眠侦听器。我是在本文的帮助下创建的侦听器。[http://www.developer.am/documentation/struts2/?page=struts-2-hibernate-integration-example](http://www.developer.am/documentation/struts2/?page=struts-2-hibernate-integration-example) 在 web.xml 我配置了监听器..我收到以下错误。我该如何解决这个问题？

```
 SEVERE: Exception sending context initialized event to listener instance of class  
    com.it.utils.HibernateListener
    java.lang.NoClassDefFoundError: org/dom4j/DocumentException
at com.it.utils.HibernateListener.contextInitialized(HibernateListener.java:31)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at         

   java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662)
   Caused by: java.lang.ClassNotFoundException: org.dom4j.DocumentException
at 
   org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1714)
at 
   org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1559)
... 11 more 
```

我将分享 web.xml ..

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  

  xmlns="http://java.sun.com/xml/ns/javaee"  
  xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
   xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
  http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>WelcomeStruts</display-name>
   <filter>
    <filter-name>struts2</filter-name>
    <filter-class>
   org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
    </filter>

   <filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
   </filter-mapping>

     <welcome-file-list>
    <welcome-file>register.jsp</welcome-file>
     </welcome-file-list>
     <listener>
    <listener-class>
 com.itac.utils.HibernateListener
     </listener-class>
       </listener> 
```

```
 I am using following jar files in buildpath

        x-wrapper-comp-1.8.0.jar
antlr.jar
antlr-2.7.6rc1.jar
antlr-4.0-complete.jar
apache-mime4j-0.6.jar
asm.jar
asm-attrs.jar
c3p0-0.9.2-pre1.jar
cglib-2.1.3.jar
commons-beanutils.jar
commons-codec-1.3.jar
commons-collections-3.2.1.jar
commons-digester.jar
commons-discovery-0.2.jar
commons-fileupload.jar
commons-fileupload-1.2.1.jar
commons-fileupload-1.2.2.jar
commons-httpclient-3.1.jar
commons-io-1.3.2.jar
commons-io-2.0.1.jar
commons-lang-2.3.jar
commons-lang-2.4.jar
commons-lang3-3.1.jar
commons-logging.jar
commons-logging-1.1.1.jar
commons-logging-api-1.1.jar
commons-validator.jar
datafile.jar
displaytag-1.2.jar
displaytag-export-poi-1.2.jar
dom4j-1.6.1.jar
ehcache-1.1.jar
freemarker-2.3.15.jar
freemarker-2.3.19.jar
gson-2.2.2.jar
hibernate.cfg.xml
hibernate3.jar
httpclient-4.0.1.jar
httpcore-4.0.1.jar
httpmime-4.0.1.jar
iText-2.1.7.jar
jaas.jar
jackson-all-1.9.4.jar
jakarta-oro.jar
jasperreports-3.7.4.jar
javassist-3.11.0.GA.jar
jaxen-1.1-beta-7.jar
jaxrpc.jar
jcommon-1.0.16.jar
jdbc2_0-stdext.jar
jfreechart-1.0.13.jar
jsfcompounds-0.0.2.jar
json-lib-2.1.jar
jstl.jar
jta.jar
log4j-1.2.11.jar
log4j-over-slf4j-1.7.2.jar
mchange-commons-0.2.jar
mysql-connector-java-5.0.8-bin.jar
notifier.jar
ognl-2.7.3.jar
ognl-3.0.5.jar
org.json-0.0.1.jar
poi-3.5-beta5-20090219.jar
saaj.jar
slf4j-simple-1.7.2.jar
standard.jar
struts.xml
struts2-core-2.1.8.1.jar
struts2-core-2.3.7.jar
struts2-dojo-plugin-2.1.8.1.jar
struts2-jasperreports-plugin-2.1.8.1.jar
struts2-json-plugin-2.1.8.1.jar
struts2-portlet-plugin-2.1.8.1.jar
struts2-tiles-plugin-2.1.8.1.jar
tiles-api-2.0.6.jar
tiles-core-2.0.6.jar
tiles-jsp-2.0.6.jar
util-bridges.jar
util-java.jar
util-taglib.jar
vssver2.scc
webservices-api.jar
webservices-extra.jar
webservices-extra-api.jar
webservices-rt.jar
webservices-tools.jar
wsdl4j.jar
xwork-core-2.1.6.jar
xwork-core-2.3.7.jar 
```

# sql - 查询以选择格式为 m/d/yyyy 的两个日期之间的数据

> ID：14681815
> 
> 赞同：4
> 
> 时间：2013-02-04T07:03:11.403
> 
> 标签：sql, database, sql-server-2008

当我尝试从两个日期之间的表中选择记录时，我遇到了问题。

m 使用以下查询

```
select * from xxx where dates between '10/10/2012' and '10/12/2012' 
```

这个查询对我有用，但是当日期的格式像 1/1/2013.. 它不起作用..

请尽快解决我的问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T08:11:36.970

此解决方案为您的谓词条件提供 CONVERT_IMPLICIT 操作

```
SELECT * 
FROM xxx 
WHERE CAST(dates AS date) BETWEEN '1/1/2013' and '1/2/2013' 
```

![在此处输入图像描述](../Images/cc19c879add042e16a1f8b975e4f48ef.png)

或者

```
SELECT * 
FROM xxx 
WHERE CONVERT(date, dates, 101) BETWEEN '1/1/2013' and '1/2/2013' 
```

![在此处输入图像描述](../Images/42264efc657482420b54e590467b8538.png)

[**SQLFiddle**](http://sqlfiddle.com/#!3/220dc/2)上的演示[](http://sqlfiddle.com/#!3/220dc/2)

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T07:36:56.630

试试这个

```
SELECT * 
FROM xxx 
WHERE dates BETWEEN STR_TO_DATE('10/10/2012', '%m/%d/%Y') 
  AND STR_TO_DATE('10/12/2012', '%m/%d/%Y')  ; 
```

或者

```
SELECT * 
FROM xxx 
WHERE STR_TO_DATE(dates , '%m/%d/%Y') BETWEEN STR_TO_DATE('10/10/2012', '%m/%d/%Y') 
  AND STR_TO_DATE('10/12/2012', '%m/%d/%Y')  ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-05T19:39:32.587

```
$Date3 = date('y-m-d');
$Date2 = date('y-m-d', strtotime("-7 days")); 
```

```
SELECT * FROM disaster WHERE date BETWEEN '".$Date2."' AND  '".$Date3."' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:31:18.780

默认情况下，Mysql 以“YYYY/MM/DD”格式存储和返回“日期”数据类型值。因此，如果我们想以不同的格式显示日期，那么我们必须根据脚本语言的要求来格式化日期值

顺便说一下，什么是列数据类型以及您存储值的格式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T12:04:55.270

```
select * from xxx where dates between '2012-10-10' and '2012-10-12' 
```

我总是`YYYY-MM-DD`在我的观点中使用，从来没有任何问题。另外，它是可读的和明确的。
您应该知道 using`BETWEEN`可能不会返回您对字段的期望，因为它会消除例如`DATETIME`过时的记录。 我宁愿使用（低于第二天）`'2012-10-12 08:00'`
`where dates >= '2012-10-10' and dates < '2012-10-13'`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-23T13:23:26.843

```
SELECT * FROM tablename WHERE STR_TO_DATE(columnname, '%d/%m/%Y')
  BETWEEN STR_TO_DATE('29/05/2017', '%d/%m/%Y')
    AND STR_TO_DATE('30/05/2017', '%d/%m/%Y') 
```

它完美地工作:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-04T06:08:22.590

您必须拆分日期时间，然后以您想要的格式（如 dd/MM/yyyy）存储它。然后你可以使用这个查询，但我反对使用这个，因为它会搜索你数据库中的每一个数据，所以我建议你可以使用 datediff。

```
 Dim start = txtstartdate.Text.Trim()
        Dim endday = txtenddate.Text.Trim()
        Dim arr()
        arr = Split(start, "/")
        Dim dt As New DateTime
        dt = New Date(Val(arr(2).ToString), Val(arr(1).ToString), Val(arr(0).ToString))
        Dim arry()
        arry = Split(endday, "/")
        Dim dt2 As New DateTime
        dt2 = New Date(Val(arry(2).ToString), Val(arry(1).ToString), Val(arry(0).ToString))

        qry = "SELECT * FROM [calender] WHERE datediff(day,'" & dt & "',[date])>=0 and datediff(day,'" & dt2 & "',[date])<=0 " 
```

这里我使用了 dd/MM/yyyy 格式。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-02-04T07:20:48.460

用这个

```
select * from xxx where dates between '10/oct/2012' and '10/dec/2012' 
```

你正在输入字符串，所以根据格式给出月份的名称......

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2013-02-04T12:51:32.673

试试这个：

```
select * from xxx where dates between convert(datetime,'10/10/2012',103) and convert(dattime,'10/12/2012',103) 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2014-05-03T21:44:53.030

```
DateTime dt1 = this.dateTimePicker1.Value.Date;
DateTime dt2 = this.dateTimePicker2.Value.Date.AddMinutes(1440);
String query = "SELECT * FROM student WHERE sdate BETWEEN '" + dt1 + "' AND '" + dt2 + "'"; 
```**

# python - 如何返回一定长度的字符串列表？

> ID：14681817
> 
> 赞同：2
> 
> 时间：2013-02-04T07:03:22.737
> 
> 标签：python

我要做的是创建一个程序，该程序返回一定长度的字符串列表。我有一个程序，但我觉得它非常偏离

```
def lett(lst,n):
res = []
for a in range(1,len(lst)):
               if a == n
                   res = lst[a]
return res 
```

我想要的是获取列表并返回所有长度为 n 的单词，所以如果我要做 lett(["boo","hello","maybe","yes","nope"], )它会返回 ['boo','yes']

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:05:27.450

尝试这个：

```
def lett(lst, n):
    return [x for x in lst if len(x) == n] 
```

或者：

```
def lett(lst, n)
    return filter(lambda x: len(x) == n, lst) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T07:06:22.363

使用`filter`功能

```
def lett(lst, n):
    return filter(lambda x: len(x) == n, lst) 
```

这将在 Python 2 中返回一个列表。如果您使用的是 Python 3，它会返回一个`filter`对象，因此您可能希望将其转换为列表。

```
return list(filter(lambda x: len(x) == n, lst)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:10:54.343

```
def lett(lst, n):
    return [tmpStr for tmpStr in lst if len(tmpStr) == n] 
```

# jsp - 如何使用servlet在文本框中设置值

> ID：14681818
> 
> 赞同：0
> 
> 时间：2013-02-04T07:03:24.820
> 
> 标签：jsp, servlets

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws     ServletException, IOException {
    // TODO Auto-generated method stub

    try {
        PrintWriter out = new PrintWriter(new BufferedWriter(new FileWriter("/home/ahis/Desktop/outfilename.txt", true)));
        out.println("the text");
        out.close();
    } catch (IOException e) {

    } 
```

我有上面的代码用于将文本写入文件。我需要从文件中获取这些数据，并且需要将此值设置为 theTextBox 的内容。

我有以下jsp文件。

```
 <%@ page language="java" contentType="text/html; charset=UTF-8"
      pageEncoding="UTF-8"%>
   <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org    /TR/html4/loose.dtd">
 <html>
 <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert title here</title>
</head>
<body>
<form method="GET" action='Controller' name="good">
<input type="submit" name="submit" value="submit">
<input type="text" name="done"> 
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:16:12.223

将此代码添加到 servlet 用于从文件访问数据

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws     ServletException, IOException {
    // TODO Auto-generated method stub

String TextValue=null;
try {
         File file = new File(fileName);
         Scanner scanner = new Scanner(file);
         while (scanner.hasNextLine()) {
           if(TextValue==null)
          {
           TextValue=scanner.nextLine();
          }
          else
        {
           TextValue=TextValue + " "+scanner.nextLine();

        }
}
             scanner.close();
           } catch (FileNotFoundException e) {
             e.printStackTrace();
           }

request.setAttribute("TextValue",TextValue);

} 
```

JSP文件的变化是

```
<form method="GET" action='Controller' name="good">
<input type="submit" name="submit" value="submit"/>
<input type="text" name="done" value='<%=request.getAttribute("TextValue")%>'/> 
</form> 
```

希望这会帮助你。

# android - 停止 Android 中的所有异步任务

> ID：14681822
> 
> 赞同：0
> 
> 时间：2013-02-04T07:03:39.477
> 
> 标签：android, android-asynctask

> **可能重复：**
> [如何在 android 中停止 ASyncTask 线程](https://stackoverflow.com/questions/4429043/how-to-stop-asynctask-thread-in-android)

我可以强制`AsyncTasks`堆栈中的所有内容停止并让 UI 线程运行吗？我连接到网络并使用 AsyncTasks 从服务器下载一些信息和图像。但是当连接丢失时，我需要将它们全部停止。这是我的申请要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:47:59.587

这就是我理解正确使用 AsyncTasks 的方式：

*   当您想下载使用服务并将其存储在数据库中时。
*   仅当将某些内容绑定到 Activity/Fragment 时才使用 AsyncTasks。例如加载要在 Activity/Fragment 中显示的图像。

我尝试尽可能多地使用服务，并对 Activity/Fragment 进行回调，当我的东西被下载或类似时收到通知。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T07:59:41.180

```
you can simply cancel your Async tasks

    new task().cancel(); 
```

# android - android：在textview中使用特殊字符

> ID：14681824
> 
> 赞同：0
> 
> 时间：2013-02-04T07:03:57.167
> 
> 标签：android, textview

我的布局文件中有一个文本视图。我的 textview 包含简单的 c++ 代码。我已经包含了除 '\0' 字符之外的所有其他特殊字符。谁能告诉我如何在我的布局文件中包含这个错误？

```
#include<iostream.h>
#include<conio.h>
#include<stdio.h>

void main()
{
 clrscr();
 char a[100];
 int length=0;
 cout<<"Enter String:";
 gets(a);
 while(a[length]!='\0')
 length++;
 cout<<"Length of String:";
 cout<<length;
 getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:28:29.130

试试这个：

```
change parent="android:Theme.Holo.Dark" to parent="android:Theme.Holo"

The holo dark theme is called Holo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:38:39.700

试试这个

```
&apos;\0&apos; 
```

代替`'\0'`

# java - Sqlite 日期时间类型问题

> ID：14681827
> 
> 赞同：1
> 
> 时间：2013-02-04T07:04:09.790
> 
> 标签：java, sqlite

我尝试从 Java 将日期时间插入到 sqlite 数据库中，但事情很奇怪。

当我使用代码`Calendar.getInstance().getTime()`插入时，表中的值为（例如）1359960520718。当我使用字符串`2010-01-01`插入表时，该值是正常的：2010-01-01。

但是当我使用字符串`2010-21-51`插入表格时，表格中的值为2010-21-51。那是一个无效的日期。它出什么问题了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T07:12:17.480

这是因为 SQLite 是动态类型的。您可以将任何类型的值写入任何列，它不会抱怨 - 它可能会默默地将其存储在不同的类型中。

根据[文档](http://www.sqlite.org/datatype3.html)，日期时间可以存储为

*   TEXT 作为 ISO8601 字符串（“YYYY-MM-DD HH:MM:SS.SSS”）。
*   REAL 作为儒略日数字，根据预测的公历，自公元前 4714 年 11 月 24 日格林威治中午以来的天数。
*   INTEGER 作为 Unix 时间，自 1970-01-01 00:00:00 UTC 以来的秒数。

在您的情况下，SQLite 无法将无效日期转换为 INTEGER 格式，而是被迫将其存储为标准字符串。此日期无效，但 SQLite 不在乎。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:13:25.503

您可以使用 Calendar.getInstance().getTime() 中的参数新建 Date 类型的日期，例如：

```
Date date = new Date(Calendar.getInstance().getTime()); 
```

然后，也许您应该使用 SimpleDateFormate 将日期格式化为您需要的字符串，例如：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
String timeStr = df.format(date); 
```

然后，您将 timeStr 插入表中...如果您在数据库的插入语句中执行某些操作，您还有其他方法

# c# - 参数“用户名”不能为空

> ID：14681828
> 
> 赞同：0
> 
> 时间：2013-02-04T07:04:17.940
> 
> 标签：c#, asp.net, .net, active-directory, asp.net-membership

我创建了一个方法，该方法应该为使用会员资格的登录用户返回属性 soredin Active Directory。

我收到此错误`The parameter 'username' must not be empty.`任何想法如何解决它？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Configuration;
using System.Web.Security;
using System.DirectoryServices.AccountManagement;
using System.Threading;

   public static string SetGivenNameUser()
    {
        string givenName = string.Empty;
        MembershipUser user = Membership.GetUser();
        PrincipalContext ctx = new PrincipalContext(ContextType.Domain);
        UserPrincipal userP = UserPrincipal.FindByIdentity(ctx, user.UserName);
        if (userP != null)
            givenName = userP.GivenName;
        return givenName;
    } 
```

堆

```
ArgumentException: The parameter 'username' must not be empty.
Parameter name: username]
   System.Web.Util.SecUtility.CheckParameter(String& param, Boolean checkForNull, Boolean checkIfEmpty, Boolean checkForCommas, Int32 maxSize, String paramName) +2386569
   System.Web.Security.ActiveDirectoryMembershipProvider.CheckUserName(String& username, Int32 maxSize, String paramName) +30
   System.Web.Security.ActiveDirectoryMembershipProvider.GetUser(String username, Boolean userIsOnline) +86
   System.Web.Security.Membership.GetUser(String username, Boolean userIsOnline) +63
   System.Web.Security.Membership.GetUser() +19 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:15:48.450

除非你只是设置了授权，在这种情况下需要重置 httpcontext 对象，最可靠的获取用户名的方法是

```
HttpContext.Current.User.Identity.Name 
```

因此，重构您的代码将如下所示：

```
UserPrincipal userP = UserPrincipal.FindByIdentity(ctx, HttpContext.Current.User.Identity.Name); 
```

这样做的原因是，一些对象有自己的本地“挂钩”成员。有时这些钩子还没有被我的 httpcontext 对象填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:30:49.333

我分享了解决我的问题的代码。我的问题是当用户未登录时我正在调用 SetGivenNameUser，因此我必须进行调整。谢谢大家的建议。

```
 public static string SetGivenNameUser()
    {
        string givenName = string.Empty;
        string currentUser = HttpContext.Current.User.Identity.Name;
        // If the USer is logged in
        if (!string.IsNullOrWhiteSpace(currentUser))
        {
            MembershipUser user = Membership.GetUser();
            PrincipalContext ctx = new PrincipalContext(ContextType.Domain);
            UserPrincipal userP = UserPrincipal.FindByIdentity(ctx, user.UserName);
            if (userP != null)
                givenName = userP.GivenName;
        }
        return givenName;
    } 
```

# sql - 如何优化存储过程？

> ID：14681843
> 
> 赞同：2
> 
> 时间：2013-02-04T07:05:12.827
> 
> 标签：sql, sql-server, sql-server-2008

以下是我的存储过程。

```
ALTER PROCEDURE [GetHomePageObjectPageWise]
       @PageIndex INT = 1
      ,@PageSize INT = 10
      ,@PageCount INT OUTPUT
      ,@AccountID INT
      ,@Interests Varchar(3000)
AS
BEGIN
      SET NOCOUNT ON;

      SELECT StoryID
      , AlbumID
      , StoryTitle
      , CAST(NULL as varchar) AS AlbumName
      , (SELECT URL FROM AlbumPictures WHERE (AlbumID = Stories.AlbumID) AND (AlbumCover = 'True')) AS AlbumCover
      , Votes
      , CAST(NULL as Int) AS PictureId
      , 'stories' AS tableName
      , (SELECT CASE WHEN EXISTS (
            SELECT NestedStories.StoryID FROM NestedStories WHERE (StoryID = Stories.StoryID) AND (AccountID=@AccountID)
        )
        THEN CAST(1 AS BIT)
        ELSE CAST(0 AS BIT) END) AS Flag
      , (SELECT UserName FROM UserAccounts WHERE Stories.AccountID=UserAccounts.AccountID) AS Username

INTO #Results1
FROM Stories WHERE FREETEXT(Stories.Tags,@Interests) AND AccountID <> @AccountID AND IsActive='True' AND Abused < 10 
```

我`SELECT`在存储过程中还有 7 个语句（为简洁起见不包括在问题中），类似于`SELECT StoryID`语句，我`UNION ALL`喜欢这个

```
SELECT * INTO #Results9 FROM #Results1
UNION ALL
SELECT * FROM #Results2
UNION ALL
SELECT * FROM #Results3
UNION ALL
SELECT * FROM #Results4
UNION ALL
SELECT * FROM #Results5
UNION ALL
SELECT * FROM #Results6
UNION ALL
SELECT * FROM #Results7
UNION ALL
SELECT * FROM #Results8

SELECT ROW_NUMBER() OVER
            (
                  ORDER BY [tableName] DESC
            )AS RowNumber
            , * INTO #Results
            FROM #Results9

      DECLARE @RecordCount INT
      SELECT @RecordCount = COUNT(*) FROM #Results

      SET @PageCount = CEILING(CAST(@RecordCount AS DECIMAL(10, 2)) / CAST(@PageSize AS DECIMAL(10, 2)))

      SELECT * FROM #Results
      WHERE RowNumber BETWEEN(@PageIndex -1) * @PageSize + 1 AND(((@PageIndex -1) * @PageSize + 1) + @PageSize) - 1

      DROP TABLE #Results
      DROP TABLE #Results1
      DROP TABLE #Results2
      DROP TABLE #Results3
      DROP TABLE #Results4 
END 
```

返回结果大约需要 6 秒。我该如何改进这个存储过程？我对存储过程知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:35:26.770

永远不要直接使用 SELECT * INTO #temp INSTEAD 始终创建 #temp 表然后 INSERT INTO #temp 这将减少 70% 的查询执行时间

虽然创建具有精确结构的#temp 表可能会令人沮丧，但这里有一个捷径：这将执行一次

CREATE dbo.tableName 通过使用 SELECT * INTO tableName from Your calling query 然后 sp_help TableName 将提供结构。然后在 Store Procedure 中创建 #temp 表。

我已经为我们的一个客户优化了查询，它需要 45 分钟才能执行，只是用这个逻辑替换它工作！现在需要5分钟！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:13:59.370

好吧，您只能通过摆脱临时表来优化它。您的方法很糟糕，不是因为它是一个存储过程（因此 SP 部分完全无关紧要），而是因为您做了很多临时表的东西，这些东西会强制线性执行并使查询优化器很难找到更好的日子继续前进.

在这种特殊情况下，您的数据库设计可能非常糟糕（为什么要从 #result 1 到 #result 8 开始），然后您在每个存储过程上都有大量的“复制到临时表”。

SQL 中的查询优化“逐个语句”地工作，并且语句之间的执行永远不会并行 - 所以临时表的东西真的会在这里进入你的方式。摆脱临时表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:12:38.723

`where`在子句、`IsActive`和`AccountID`中的列上引发非聚集索引`Abused`。

# php - 集合可见性和状态过滤器已弃用，应该改用什么？

> ID：14681845
> 
> 赞同：7
> 
> 时间：2013-02-04T07:05:19.300
> 
> 标签：php, magento, collections, filter, deprecated

的`addVisibleFilterToCollection()`和`addSaleableFilterToCollection()`方法`Mage_Catalog_Model_Product_Status`用@deprecated 注释，但没有说明使用什么方法。Magento 核心中的代码仍在使用这些方法， ref `Mage_Catalog_Model_Layer::prepareProductCollection()`。

应该使用什么方法来装饰具有正确可见性/可销售过滤器的集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-03T10:15:58.230

对于**可见性**，有（来自 Mage_Catalog_Model_Layer::prepareProductCollection()）：

```
Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($collection); 
```

它将 CATALOG 和 BOTH 过滤器设置为集合。

对于**Status**，它看起来有点奇怪，但仍然有意义。在 app/code/core/Mage/Catalog/Model/Resource/Product/Collection.php 中的 _initSelect 进行如下操作：

```
$this->getSelect()
            ->from(array(self::MAIN_TABLE_ALIAS => $this->getEntity()->getFlatTableName()), null)
            ->columns(array('status' => new Zend_Db_Expr(Mage_Catalog_Model_Product_Status::STATUS_ENABLED))); 
```

执行此代码时执行

```
Mage::getResourceModel('catalog/product_collection') 
```

所以基本上在执行时已经检查了状态 ENABLED

```
$category->getProductCollection() 
```

或类似产品集合电话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T08:10:08.543

您是否尝试过常用方法：

```
addAttributeToFilter('visibility',Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH)

addAttributeToFilter('status',1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-08T17:14:05.877

如果你看第 66 行

```
app/code/core/Mage/Catalog/Model/Product/Visibility.php 
```

您将看到已弃用的调用被注释掉并替换为

```
$collection->setVisibility($this->getVisibleInCatalogIds()); 
```

这是我如何使用它我的重构

```
$this->_itemCollection->setVisibility($this->getVisibleInCatalogIds());
// Deprecated: Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($this->_itemCollection); 
```

如果您想了解有关已弃用函数的更多信息，请查看此处： http: [//freegento.com/doc/dc/d5b/_visibility_8php-source.html](http://freegento.com/doc/dc/d5b/_visibility_8php-source.html)

# mysql - 一种编写具有重复列名的 MySql 查询的有效方法

> ID：14681850
> 
> 赞同：1
> 
> 时间：2013-02-04T07:05:48.697
> 
> 标签：mysql, sql

我有一个相当简单的 MySQL 查询，如下所示：

```
SELECT * 
FROM post INNER JOIN comment ON post.post_id = comment.post_id
WHERE post.host = 99999
ORDER BY post.post_id 
```

我的问题是我的一些列名对于帖子和评论表都是通用的。结果，列名仅出现一次，其值取自查询中的最后一个表（即注释表）。

我意识到我可以`SELECT`在查询部分显式列出每个列名，并使用别名来区分重复的列名，但是每个表中有很多列，会很混乱。

有没有更有效的方法来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:08:06.573

您应该只为那些相似的列使用别名，然后为其余列使用 *：

```
SELECT post.post_id, comment.post_id as comment_post_id, *
FROM ... 
```

我不认为有更好的方法。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:27:26.720

只要可行，列出列名总是更好的方法，它可能会给 MySQL 优化器一些提示。

此外，当对相似的列名进行连接时，我会使用 Using 语法。

```
SELECT x.x1, x.x2 ... , y.x1, y.x2 ... 
FROM post as x 
INNER JOIN comment as y 
USING post_id
WHERE ... 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-04T07:16:04.333

您可以从两个表中选择所有列。只需在选择语句后为表名和使用别名都指定一个别名。*。

然后它将从表中选择所有列。

例子：

```
SELECT pst.*,cmt.* from post pst INNER JOIN comment cmt
FROM ... 
```

# windows - 在所有计算机上安装的 Windows 程序上的产品代码是否相同？还是每台计算机随机分配一个？

> ID：14681851
> 
> 赞同：0
> 
> 时间：2013-02-04T07:05:54.197
> 
> 标签：windows, batch-file, guid, windows-installer

我自己对这个主题所做的所有研究似乎都声称每个已安装的程序都分配了一个唯一的 GUID。考虑到这一点，我开始设计一个非常简单的 .bat 文件，该文件将使用 msiexec 静默卸载一组程序列表

使用 MSI Inventory（类似于从 HKLM 下的注册表中获取 GUID），我为每个要卸载的程序收集了所有产品代码。

例子：

```
Product code:   {89C254A9-2FB5-4FC9-B34F-BDEB2713C5FA}
Product state:  (5) Installed.
Package code:   {BD709EB5-2B9C-4664-A654-C9AB18B25DBE}
Version:    2.10.28 
```

我从上面的示例中获取了产品代码，并非常简单地编写了我的批处理：

```
msiexec /x {89C254A9-2FB5-4FC9-B34F-BDEB2713C5FA} /passive 
```

据我了解，此 ID：{89C254A9-2FB5-4FC9-B34F-BDEB2713C5FA} 对于我正在卸载的该程序应该是唯一的。因此，如果我从另一台安装了相同程序的计算机上运行此批处理，它会找到它并被动地卸载它，而无需用户输入。

但是，我的结果好坏参半。它从某些计算机上卸载，有些计算机似乎找不到该程序。未能卸载程序的计算机上的 MSI Inventory 显示不同的产品代码。

我想知道，这些产品代码是在程序创建时创建并嵌入在安装程序中的真正唯一的 GUID 吗？它们应该在您安装程序的每台机器上都相同吗？

如果答案是肯定的，我必须处理程序代码随时间变化的“不同版本”问题......但在我将太多工作放入可能只能工作的 .bat 文件之前，我需要确定 -有时。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T11:05:42.543

GUID 因已安装应用程序的不同版本和语言而异。在尝试使用此批处理文件卸载它们之前，您应该首先确保它们相同。不过，有比使用批处理文件更好的方法。

如果您了解 C/C++，请考虑有关使用 Windows 安装程序 ( [http://msdn.microsoft.com/en-us/library/aa372463%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa372463%28v=vs.85%29.aspx) ) 的 MSDN 文档，尤其是[*确定安装上下文*](http://msdn.microsoft.com/en-us/library/aa368279%28v=vs.85%29.aspx)部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:32:45.730

[产品代码](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/6fbad59b-27b7-4ac1-bad5-8a608c7b270f)是一个 GUID，被视为应用程序或产品的主要*标识*。[保持包名称和包代码一致](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/ff48d995-fe6f-4d1b-898d-67574ed3c5b7#codes_consistent)是“Windows Installer 最佳实践” 。某些类型的更新需要更改产品代码。这些在 MSDN 文档中进行了描述：[更改产品代码](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/4de84885-587d-405f-ba85-d62e09e8ba92)。

因此，一个产品可能有多个产品代码。

产品代码是[ProductCode 属性](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/33cedd37-0343-471c-ad4b-0db5f98d5894)的值。绝不能为不同的产品分配与任何其他产品相同的产品代码 guid。这将是一件非常糟糕的事情，但是没有机制可以防止它。包作者负责使用 GUIDGEN 等实用程序来获取唯一的 GUID。（注意：GUIDGEN 等实用程序可以生成包含小写字母的 GUID。这些必须全部更改为大写字母，安装程序才能将 GUID 用作有效的产品代码。）

# linux - 如何为应用程序使用 AHCI SATA linux 驱动程序

> ID：14681854
> 
> 赞同：1
> 
> 时间：2013-02-04T07:06:12.440
> 
> 标签：linux, linux-kernel, linux-device-driver, sata

我有一个正在运行的应用程序，它需要为 linux 使用 SATA AHCI 驱动程序。我有 AHCI.so 可以使用，但我正在寻找一些文件（.h 文件），它将发布我的应用程序可以使用的 api（计划编写胶水层以使用 api 与 .SO 通信）。

任何人都可以帮助我确定将发布 AHCI.SO 的所有 api 的正确文件，或者我必须自己编写这样的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T08:41:23.240

fopen，fwrite，fread，fclose。如果目标驱动器处于 ahci 模式，那么您将使用 ahci 驱动程序。

# mono - 是否可以在 Mono 上运行 ASP.NET MVC 3 应用程序？

> ID：14681855
> 
> 赞同：3
> 
> 时间：2013-02-04T07:06:13.767
> 
> 标签：mono

我需要在 Linux 运行服务器上运行一些 MVC 3 应用程序，似乎唯一的选择是 Mono？该站点仅讨论 Web 服务，但我想知道运行整个 mvc 3 应用程序也是可能的吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-11T13:01:54.340

这取决于您所说的“整个 mvc 3 应用程序”是什么意思。ASP.Net MVC3 堆栈已在 Mono 中实现，但请查看[此处](http://www.mono-project.com/Compatibility)和[此处](http://www.mono-project.com/Release_Notes_Mono_2.10#ASP.NET_MVC3_Support)了解更多详细信息。

# cassandra - Cassandra 在通过 CLI 或 Astayanx 客户端创建列族时抛出未知错误

> ID：14681858
> 
> 赞同：1
> 
> 时间：2013-02-04T07:06:27.517
> 
> 标签：cassandra, thrift, astyanax

我正在尝试使用 cassandra 的分块对象存储，当我尝试使用 CLI 或 Astyanax 客户端为其创建兼容的列族时，它会引发此错误：

```
INFO 12:26:31,175 Create new ColumnFamily: org.apache.cassandra.config.CFMetaData@321f321f[cfId=1000,ksName=TESTKEYSPACE1,cfName=updatedstorage,cfType=Standard,
comparator=org.apache.cassandra.db.marshal.UTF8Type,subcolumncomparator=<null>,comment=,readRepairChance=0.1,dclocalReadRepairChance=0.0,replicateOnWrite=true,gc
GraceSeconds=864000,defaultValidator=org.apache.cassandra.db.marshal.UTF8Type,keyValidator=org.apache.cassandra.db.marshal.UTF8Type,minCompactionThreshold=4,maxC
ompactionThreshold=32,keyAlias=<null>,columnAliases=[],valueAlias=<null>,column_metadata={},compactionStrategyClass=class org.apache.cassandra.db.compaction.Size
TieredCompactionStrategy,compactionStrategyOptions={},compressionOptions={sstable_compression=org.apache.cassandra.io.compress.SnappyCompressor},bloomFilterFpCha
nce=<null>,caching=KEYS_ONLY]
Unhandled exception
Type=Segmentation error vmState=0x00000000
J9Generic_Signal_Number=00000004 ExceptionCode=c0000005 ExceptionAddress=01372DED ContextFlags=0001007f
Handler1=00259A50 Handler2=003C95C0 InaccessibleAddress=000000B4
EDI=00000080 ESI=45F2A04A EAX=00000022 EBX=45E5A300
ECX=46B34830 EDX=00000080
EIP=01372DED ESP=46B347C4 EBP=46174800 EFLAGS=00010206
Module=C:\Program Files (x86)\IBM\SDP\jdk\jre\bin\jclscar_24.dll
Module_base_address=01340000 Offset_in_DLL=00032ded
Target=2_40_20080816_022093_lHdSMr (Windows Vista 6.1 build 7601 Service Pack 1)
CPU=x86 (4 logical CPUs) (0xf88ee000 RAM)
----------- Stack Backtrace -----------
sun_misc_Unsafe_getLong__Ljava_lang_Object_2J:0x01372DED [0x01372DB0 +0x0000003D]
---------------------------------------
JVMDUMP006I Processing dump event "gpf", detail "" - please wait.
JVMDUMP007I JVM Requesting System dump using 'C:\cassandra\apache-cassandra-1.1.7\bin\core.20130204.122631.9232.0001.dmp' 
```

我的 CLI 命令是：

```
CREATE COLUMN FAMILY updatedstorage WITH comparator = UTF8Type AND key_validation_class=UTF8Type; 
```

Astayanax 代码是：

```
keyspace.createColumnFamily(CF_STANDARD1, ImmutableMap.<String, Object>builder()
                .put("default_validation_class", "UTF8Type")
                .put("key_validation_class", "UTF8Type")
                .put("comparator_type", "UTF8Type")
                .build()); 
```

卡桑德拉版本：1.1.7

您能否帮助理解问题所在，每次我运行它时，它都会进入 JVM 转储... :(

# javascript - 如何将主干视图事件哈希定义为函数？

> ID：14681863
> 
> 赞同：1
> 
> 时间：2013-02-04T07:06:36.817
> 
> 标签：javascript, backbone.js, backbone-views

骨干文档说

> tagName、id、className、el 和 events 等属性也可以定义为函数，如果您想等到运行时再定义它们。

我还没有看到使用此功能的示例。有人可以告诉我如何实施吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T07:12:40.367

在最简单的形式中，您只需从函数返回一个事件哈希对象：

```
View = Backbone.View.extend({
  events: function() {
    return {
      "click #save" : "save"
    };
  }
}); 
```

当然，这没有多大意义。如果您需要有条件地绑定事件或使用一些仅在运行时可用的信息，此功能会很有用：

```
View = Backbone.View.extend({
  events: function() {
    return {
      "click #save" : this.model.isNew() ? "create" : "update"
    };
  }
}); 
```

# matlab - 将 ginput 用于鼠标悬停功能的问题

> ID：14681864
> 
> 赞同：1
> 
> 时间：2013-02-04T07:06:36.957
> 
> 标签：matlab, mouseevent, mouseover

我正在尝试为鼠标悬停功能开发代码。我需要的是以下内容。

1.) 如果鼠标在绘图范围内，则能够更改为小十字光标，如果鼠标在绘图范围外，则更改回箭头。

2.) 能够在绘图范围内单击并绘制点，并为光标类型保留小十字准线。

我得到了工作的第一个要求。我遇到了第二个问题。我正在尝试使用 mathworks 中修改后的 ginput 函数 myginput。在 myginput 函数中，我将函数更改为 myginput() 并设置 arg1 == 1 并设置 strpointertype = 'Crosshair'。

从我正在创建 mouseover.m 的函数中，在 if/else 语句中检查光标是否在绘图范围内，我将 ButtonDownFcn 设置为调用 myginput。如果我运行程序并尝试在绘图范围内单击，则使用 @myginput 时会出现错误，“输入参数过多”。我没有使用任何输入参数，因为我已经在 myginput 函数中指定了它们。

关于如何解决这个问题的任何建议？主 GUI 通过调用 mouseover 函数

```
set (gcf, 'WindowButtonMotionFcn', @mouseover); 
```

并且用于绘图的轴句柄是 plot_data。因此，只需制作一个带有标签 plot_data 的绘图的虚拟 GUI（alpha），并在此 GUI 中设置一个全局变量。

```
function varargout = alpha_OutputFcn(hObject, eventdata, handles) 
global plot_data

% Get default command line output from handles structure
varargout{1} = handles.output;

% now attach the function to the axes
set(gca,'ButtonDownFcn', @mouseclick)

set (gcf, 'WindowButtonMotionFcn', @mouseover); 
```

下面是我的 mouseover.m 函数代码

```
function [data] = mouseover(gcbo,eventdata,handles)
global plot_data

cp = get(gca,'Position');           %get postion data of the current axes

LeftBound = cp(1);
RightBound = LeftBound + cp(3);

LowerBound = cp(2);
UpperBound = LowerBound + cp(4);

%check to see if mouse is within the bounds of the axes
in_bounds = @(mx, my) LeftBound < mx && mx < RightBound && LowerBound < my && my < UpperBound;

mp = get(gcf, 'CurrentPoint');      %get current position of mouse

if in_bounds(mp(1,1),mp(1,2)) == 1
    set(gcf,'pointer','Crosshair');
    set(gca,'ButtonDownFcn', @myginput)
else
    set(gcf,'pointer','Arrow');
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:50:21.137

如果您指的是[http://www.mathworks.com/matlabcentral/fileexchange/12770](http://www.mathworks.com/matlabcentral/fileexchange/12770)上的文件交换中提供的 myginput ，它看起来不像是为用作回调而编写的。ButtonDownFcn 的回调函数应始终采用两个输入参数。它们是 src 和 eventData。[请参阅http://www.mathworks.com/help/matlab/creating_plots/function-handle-callbacks.html](http://www.mathworks.com/help/matlab/creating_plots/function-handle-callbacks.html)上的函数句柄回调文档。您可以尝试定义自己的函数，该函数接受所需的两个输入，然后从该函数中调用 myginput。

# database - sqlserver2008 的 schemaSpy？

> ID：14681870
> 
> 赞同：4
> 
> 时间：2013-02-04T07:06:48.703
> 
> 标签：database, database-design, database-schema, schemaspy

我正在使用 sqlserver2008，这适用于 sqlserver2008 吗？

我给了 java -jar "D:\Program Files\SchemaSpy\schemaSpyGUI.jar" -dp "D:\jtds-1.2.5-dist\jtds-1.2.5.jar" -t mssql-jtds -db EnterpriseVaultDirectory -主机 localhost -port 1433 -u sa -connprops "D:\Program Files\SchemaSpy\properties\mssql-jtds.properties" -o "D:\Schema"

仍然无法正常工作...

谁能帮帮我吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:43:55.220

1.  请检查“D:\Program Files\SchemaSpy\schemaSpyGUI.jar”？schemaSpyGUI.jar 只是 UI 程序。您需要 schemaspy 5.0.0 ( [http://sourceforge.net/projects/schemaspy/files/latest/download?source=files](http://sourceforge.net/projects/schemaspy/files/latest/download?source=files) ) 并像这样使用 (java -jar "your_path\schemaSpy_5.0.0.jar" ...)

2.  如果可能，请使用最新版本的 jtds（当前为 jtds-1.3.0.jar）。

3.  将“-t mssql-jtds”替换为您为系统修改了“mssql-jtds.properties”的文件（我使用我用 mssql05-jtd.properties 编辑的 mssql05-jtds_mysystem（见下文）。所以我不使用connprops 选项。当然-t 选项不需要extentname 部分(=>.properties)。

4.  你为什么不使用 Graphviz。制作简单的 ERD 图像。你必须添加 -gv 选项

    - - 下面 - -

    ```
    # see http://schemaspy.sourceforge.net/dbtypes.html
    # for configuration / customization details
    #

    # Provided by Ernest Zapata, Larry Walker and Emilian Turbatu
    description=jTDS JDBC Driver for Microsoft SQL 2000/2005 Server 

    # majority of settings are identical to jTDS: 
    extends=mssql-jtds

    # return the table comments
    selectTableCommentsSql=SELECT OBJECT_NAME(t.object_id) AS TABLE_NAME, ex.value AS comments FROM ( sys.tables t LEFT OUTER JOIN sys.extended_properties ex ON ex.major_id = t.object_id AND ex.name = 'MS_Description' AND minor_id = 0) \ **--> You must change this line! you need () and no line feed'\'** 
    JOIN sys.schemas s ON t.schema_id = s.schema_id AND s.name = :schema \
    WHERE OBJECTPROPERTY(t.object_id, 'IsMsShipped')=0 \
    ORDER BY OBJECT_NAME(t.object_id)

    # return the column comments
    selectColumnCommentsSql=SELECT OBJECT_NAME(c.object_id) AS TABLE_NAME, c.name AS COLUMN_NAME, ex.value AS comments \
    FROM sys.columns c \
    LEFT OUTER JOIN sys.extended_properties ex \
    ON ex.major_id = c.object_id AND ex.minor_id = c.column_id AND ex.name = 'MS_Description' \
    JOIN sys.tables t ON t.object_id = c.object_id \
    JOIN sys.schemas s ON t.schema_id = s.schema_id AND s.name = :schema \
    WHERE OBJECTPROPERTY(c.object_id, 'IsMsShipped')=0 \
    ORDER BY OBJECT_NAME(c.object_id), c.column_id 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-22T18:37:25.993

为我工作： 使用 jarfix
下载 schemaSpyGui 下载 schemaSpy 下载 mssql-tds 驱动程序 解压缩 schemaSpyGui 解压缩 schemaSpyGui 文件夹中的 schemaSpy 解压缩 schemaSpyGui/drivers/mssql-tds 文件夹中的 mssql-tds 驱动程序

参数
dbtype：mssql-tds
设置主机，设置端口，设置用户，设置密码
设置路径驱动程序
设置路径架构间谍
设置输出路径，字符集

但是 mssql 2008 r2 存在错误

# java - Java VLCJ播放器，设置音轨不起作用

> ID：14681871
> 
> 赞同：2
> 
> 时间：2013-02-04T07:06:49.717
> 
> 标签：java, media-player, vlcj, audiotrack

我目前正在研究可以播放`mkv`格式的 java 媒体播放器。我正在使用`VLCJ`，一切正常，除非我尝试更改不起作用的音轨。

这是代码

```
public class mediaplayer {

    private static JFileChooser filechooser = new JFileChooser();

    public mediaplayer() {
    }

    public static void main(String[] args) {
        String vlcPath = "", mediaPath = "";
        File ourfile;

        filechooser.setFileSelectionMode(JFileChooser.FILES_ONLY);
        filechooser.showSaveDialog(null);
        ourfile = filechooser.getSelectedFile();
        mediaPath = ourfile.getAbsolutePath();

        EmbeddedMediaPlayerComponent mediacom = new EmbeddedMediaPlayerComponent();

        JFrame frame = new JFrame();
        frame.setContentPane(mediacom);
        frame.add(canvas);
        frame.setLocation(100, 100);
        frame.setSize(1050, 600);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        frame.setVisible(true);

        MediaPlayer mplayer = mediacom.getMediaPlayer();

        mplayer.playMedia(mediaPath);
        mplayer.setAudioTrack(1);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-01T19:19:29.727

在**vlc 2.0.5**之前的 libVLC 版本中，设置音轨的本机 API 调用存在错误。

使用**libVLC 2.0.5**中的修复程序，设置音轨可以可靠地工作，但您不能只假设从**0..N**开始的简单索引，也不能假设连续音轨编号 - 您必须通过调用枚举音轨`mediaPlayer.getAudioDescriptions()`。返回的 TrackDescription 对象包含应与 一起使用的音轨标识符`mediaPlayer.setAudioTrack()`。

要禁用音频，您可以选择描述为 的轨道的音轨标识符`"Disable"`。

另请注意，您可能无法在调用后立即设置音轨`mediaPlayer.playMedia()`。媒体是异步启动的，您可能需要等到媒体实际启动和/或解析后，才能获得轨道信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-18T14:08:05.837

6年后

API 增长了很多

如果您想停止或选择音轨，您可以使用此代码片段并对其进行调整，其想法是等待播放器开始使用一个进程，然后切换到您需要的，在我的情况下是音频禁用

```
new Thread(
                    () -> {
                        try {
                            while(!empc.mediaPlayer().status().isPlaying())Thread.sleep(500);
                            empc.mediaPlayer().audio().trackDescriptions().stream()
                            .filter(td -> td.description().equals("Disable"))
                            .forEach(t -> empc.mediaPlayer().audio().setTrack(t.id()));
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                    ).start(); 
```

**empc**是我的媒体播放器实例{在播放器组件中嵌入一个以提高精度}

# extjs - 在 extjs 中动态创建容器

> ID：14681872
> 
> 赞同：1
> 
> 时间：2013-02-04T07:06:51.480
> 
> 标签：extjs, extjs4, extjs4.1

作为学习 extjs 的一个步骤，我正在尝试设计包含 81 个块的数独游戏。要创建 81 个块，我是否需要将以下代码重复 81 次？或者有什么方法可以在单个父块内动态创建 81 个块？

```
//inside parent container
{
    xtype: 'container',
    border: 1,
    height: 30,
    style: {borderColor:'#565656', borderStyle:'solid', borderWidth:'1px'}  
} 
```

我尝试将其放入一个函数并在 for 循环中调用它 81 次，但这失败了，chrome 中有许多控制台错误，没有结果。我正在使用`Sencha extjs 4.1.1a`.

这是我的完整代码：

```
Ext.onReady(function(){
  Ext.create('Ext.container.Container', {
    layout: {
        type: 'column'
    },
    width: 400,
    renderTo: Ext.getBody(),
    border: 1,
     height: 300,
    style: {borderColor:'#000000', borderStyle:'solid', borderWidth:'1px'},
    defaults: {
        width: 50
    },
    items: [{
        xtype: 'container',
        border: 1,
        height: 30,
        style: {borderColor:'#565656', borderStyle:'solid', borderWidth:'1px'}
    }]
  });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:12:49.227

Items 只是一个数组，所以动态构建数组：

```
var i = 0,
    items = [];

for (i = 0; i < 5; ++i) {
    items.push({
        html: 'Foo' + i
    });
}

new Ext.container.Container({
    renderTo: document.body,
    items: items
}); 
```

# php - 在php中发送带有多个附件的电子邮件数据

> ID：14681875
> 
> 赞同：1
> 
> 时间：2013-02-04T07:07:04.647
> 
> 标签：php

我在使用 php 发送电子邮件时遇到了小问题。当我提交表单时，我收到带有数据和附件的电子邮件，但附件是作为 jung 数据（以字符串形式）。这是我的代码

任何人都可以帮忙吗？

```
 <?php
session_start(); // start up your PHP session!
// Obtain file upload vars
$file_name = $_FILES['attach']['name'];
$temp_name = $_FILES['attach']['tmp_name'];
$file_type = $_FILES['attach']['type'];
// Obtain file upload vars
$file_name2 = $_FILES['attach2']['name'];
$temp_name2 = $_FILES['attach2']['tmp_name'];
$file_type2 = $_FILES['attach2']['type'];
// Obtain file upload vars
$file_name3 = $_FILES['attach3']['name'];
$temp_name3 = $_FILES['attach3']['tmp_name'];
$file_type3 = $_FILES['attach3']['type'];

// message
$subject = "New Message";
/* Send Values to email in HTML format*/

$message  = '<html><body>';
$message .= '<h2>Please see the below details</h2>';
$message .= '<table rules="all" style="border-color: #666;" width="50%" cellpadding="10">';
$message .= "<tr style='background: #eee;'><td><strong>Title:</strong> </td><td>" . strip_tags($_POST['title']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>First Name:</strong> </td><td>" . strip_tags($_POST['fname']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Middle Name:</strong> </td><td>" . strip_tags($_POST['mname']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Last Name:</strong> </td><td>" . strip_tags($_POST['lname']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Street Name:</strong> </td><td>" . strip_tags($_POST['saddress']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Apartment / Suite / Other:</strong> </td><td>" . strip_tags($_POST['oaddress']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>City:</strong> </td><td>" . strip_tags($_POST['city']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>State:</strong> </td><td>" . strip_tags($_POST['state']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Zip Code:</strong> </td><td>" . strip_tags($_POST['zip']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Cell Phone Number:</strong> </td><td>" . strip_tags($_POST['cellphone']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Home Phone:</strong> </td><td>" . strip_tags($_POST['homephone']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Office Phone:</strong> </td><td>" . strip_tags($_POST['officephone']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Prefered Call Time:</strong> </td><td>" . strip_tags($_POST['calltime']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Personal E-mail ID:</strong> </td><td>" . strip_tags($_POST['pemail']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Office E-mail ID:</strong> </td><td>" . strip_tags($_POST['oemail']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Account Type:</strong> </td><td>" . strip_tags($_POST['acctype']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Comments:</strong> </td><td>" . strip_tags($_POST['comments']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Primary ID Proof:</strong> </td><td>" . strip_tags($_POST['primaryid']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Secondary ID Proof:</strong> </td><td>" . strip_tags($_POST['secondaryid']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Other ID Proof:</strong> </td><td>" . strip_tags($_POST['alternateid']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Funding Option:</strong> </td><td>" . strip_tags($_POST['fundingoption']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Bank Account Number:</strong> </td><td>" . strip_tags($_POST['pbaccnumber']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Bank Account Type:</strong> </td><td>" . strip_tags($_POST['eacctype']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Funding Bank Account Number:</strong> </td><td>" . strip_tags($_POST['fbankaccnumber']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Funding Bank ABN Number:</strong> </td><td>" . strip_tags($_POST['fbankabanumber']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Funding Bank Account Type:</strong> </td><td>" . strip_tags($_POST['fbcctype']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Funding Amount:</strong> </td><td>" . strip_tags($_POST['famt']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I agree to share the information to pull Credit reports, CHEX system reports etc. for verification</strong> </td><td>" . strip_tags($_POST['iagree']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I Agree Online Banking & Paperless Statements</strong> </td><td>" . strip_tags($_POST['agronlinebank']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I Agree Fee Schedule</strong> </td><td>" . strip_tags($_POST['agrFee']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I Agree Online Banking Fraud </strong> </td><td>" . strip_tags($_POST['agronlinebankfraud']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I Agree Overdraft Notice</strong> </td><td>" . strip_tags($_POST['agroverdraft']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I Agree EFT Agreement</strong> </td><td>" . strip_tags($_POST['AgreeEFT']) . "</td></tr>";

$message .= "<tr style='background: #eee;'><td><strong>I certify that I am an American citizen</strong> </td><td>" . strip_tags($_POST['citizenConfirm']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Truth in Savings</strong> </td><td>" . strip_tags($_POST['TruthSavings']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>I Agree you acknowledge you have read and accept the terms and conditions as described above </strong> </td><td>" . strip_tags($_POST['DConfirm']) . "</td></tr>";
$message .= "<tr style='background: #eee;'><td><strong>Would you like to apply for another Deposit account?</strong></td><td>" . strip_tags($_POST['appanotherdepacc']). "</td></tr>";
$message .= "</table>";
$message .= "</body></html>";

/* recipients */
$to = "xyz@abc.com";

// --------------------------------------

$headers = "From:info@abc.com";      
$headers .= "\r\nReply-To:info@abc.com"; 
$headers .= "\r\nContent-Type: text/html; charset=UTF-8";
$headers .= "\r\nMIME-Version: 1.0";

// things you need
$file = $temp_name;
$content = chunk_split(base64_encode(file_get_contents($file)));
$uid = md5(uniqid(time()));

// declaring we have multiple kinds of email
$headers .= "Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n";
$headers .= "This is a multi-part message in MIME format.\r\n";

// html text part
$headers .= "–".$uid."\r\n";
$headers .= "Content-type:text/html; charset=iso-8859-1\r\n";
$headers .= "Content-Transfer-Encoding: 7bit\r\n\r\n";
$headers .= $message."\r\n\r\n";

//file attachment
$headers .= "–" .$uid. "\r\n";
$headers .= "Content-Type: ".$file_type."; name=\"".$file_name."\"\r\n";
$headers .= "Content-Transfer-Encoding: base64\r\n";
$headers .= "Content-Disposition: attachment; filename=\"".$file_name."\"\r\n\r\n";
$headers .= $content."\r\n\r\n";

//file attachment 2
$headers .= "–" .$uid. "\r\n";
$headers .= "Content-Type: ".$file_type2."; name=\"".$file_name2."\"\r\n";
$headers .= "Content-Transfer-Encoding: base64\r\n";
$headers .= "Content-Disposition: attachment; filename=\"".$file_name2."\"\r\n\r\n";
$headers .= $content."\r\n\r\n";

//file attachment 3
$headers .= "–" .$uid. "\r\n";
$headers .= "Content-Type: ".$file_type3."; name=\"".$file_name3."\"\r\n";
$headers .= "Content-Transfer-Encoding: base64\r\n";
$headers .= "Content-Disposition: attachment; filename=\"".$file_name3."\"\r\n\r\n";
$headers .= $content."\r\n\r\n";

// Send the message
$ok = @mail($to, $subject, "", $headers);

if ($ok) {
  echo "<p>Mail sent.</p>";
} else {
  echo "<p>Mail could not be sent. Sorry!</p>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:13:38.347

您可以从这里[http://phpmailer.worxware.com/index.php?pg=exampledb](http://phpmailer.worxware.com/index.php?pg=exampledb)获得帮助。祝你好运。

# c++ - 调用构造与函数原型混淆

> ID：14681877
> 
> 赞同：0
> 
> 时间：2013-02-04T07:07:12.633
> 
> 标签：c++

我在`method1`下面遇到了麻烦。`prototyped function not called (was a variable definition intended?)`它在我声明（和构造）的行给出警告`vals`。当未注释紧接在其下方的复制调用时，我收到错误 C2228 ( `left of '.begin' must have class/struct/union`)。

谷歌搜索为调用默认构造函数（即 - 删除括号）的情况提供解决方案，但我没有使用默认构造函数并且无法弄清楚为什么它不会编译。请注意，`method2`编译得很好。

```
 static void method1(char const* filename) {
        vector<double> vals(istream_iterator<double>(ifstream(filename)), istream_iterator<double>());
        //copy(vals.begin(), vals.end(), ostream_iterator<double>(cout, ","));
    }

    static void method2(char const* filename) {
        vector<double> vals;
        vals = vector<double>(istream_iterator<double>(ifstream(filename)), istream_iterator<double>());
        copy(vals.begin(), vals.end(), ostream_iterator<double>(cout, ","));
    } 
```

我的问题是为什么以及任何人都可以指出关于为什么编译器将此变量声明与函数原型混淆的好信息（我已经编写了大量代码，在我看来，语法完全相同并且从未遇到过这个问题前）？谢谢！

我正在使用视觉工作室 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:09:24.180

这是 C++ 中的怪癖之一，只有在你被它咬过之后你才会知道。
这是C++ 中**[最令人头疼的解析](http://en.wikipedia.org/wiki/Most_vexing_parse)**。

# android - 任何适用于 Android 的 AFSK 库？（用于通过 Android 耳机插孔输入数据）

> ID：14681878
> 
> 赞同：5
> 
> 时间：2013-02-04T07:07:12.877
> 
> 标签：android, audio, signal-processing, frequency

我正在尝试使用 AFSK 和微控制器实现音频插孔数据接口。

通过搜索，我看到了一些使用 iPhone 的实现，例如： [http ://www.creativedistraction.com/demos/sensor-data-to-iphone-through-the-headphone-jack-using-arduino/comment -page-1/#comment-243826](http://www.creativedistraction.com/demos/sensor-data-to-iphone-through-the-headphone-jack-using-arduino/comment-page-1/#comment-243826)

他们在那里使用了“Perceptive Development's SerialModem for iPhone”，虽然它似乎包含一个 hex 文件和一个电路原理图？

通过搜索“AFSK Android 库”、“FSK android 库”或其他各种组合，我无法找到任何东西。有谁知道这些安卓工具的好来源？

或者，是否有一个库可以实现可用于解调数据的简化 FFT？自然你不想做一个完整的 FFT，因为你只是想区分（从这里得出的想法：http: [//labs.perceptdev.com/how-to-talk-to-tin-can/](http://labs.perceptdev.com/how-to-talk-to-tin-can/)）但是我确定有类似的东西

我查看了 spandsp，[http://www.soft-switch.org/](http://www.soft-switch.org/)，寻找更通用的 DSP 库。不确定这些是否可以在Android上使用。

谢谢你的帮助

# asp.net - VB.net 添加月份

> ID：14681879
> 
> 赞同：1
> 
> 时间：2013-02-04T07:07:12.970
> 
> 标签：asp.net, vb.net

我正在尝试移动日期，即后退一个月或前进一个月。如果我从本月（2 月）将一个月向后移动到 1 月，如果我添加一个月，它会保持 2 月的最后一天（28 日）相同。开始日期很好，因为所有月份都从 1 日开始。

请任何人都可以建议。谢谢

维生素B

```
 hStartDate.Value = "2013/2/01 12:00:00 AM"
            hEndDate.Value = "2013/2/28 11:59:59 PM"

            Dim StartDate As New Date
            StartDate = hStartDate.Value
            hStartDate.Value = StartDate.AddMonths(-1)

            Dim EndDate As New Date
            EndDate = hEndDate.Value
            hEndDate.Value = EndDate.AddMonths(-1) 
```

输出

```
 hStartDate.Value = "2013/01/01"
            hEndDate.Value = "2013/01/28 11:59:59 PM" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:19:43.547

这应该会有所帮助：[DevCurry](http://www.devcurry.com/2009/11/find-last-day-of-previous-month-using-c.html)它基本上是在本月的第一天并删除一天，从而导致上个月的最后一天。

```
 hStartDate.Value = "2013/2/01 12:00:00 AM"
    hEndDate.Value = "2013/2/28 11:59:59 PM"

    Dim StartDate As New Date
    StartDate = hStartDate.Value
    hStartDate.Value = StartDate.AddMonths(-1)

    Dim EndDate As New Date
    EndDate = hEndDate.Value
    hEndDate.Value = StartDate.AddDays(-1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:35:11.160

试试这个来设置结束日期（`hStartDate`修改后）：

```
hEndDate.Value = New Date(hStartDate.Year, hStartDate.Month, Date.DaysInMonth(hStartDate.Year, hStartDate.Month)) 
```

该函数`Date.DaysInMOnth()`返回给定年份中一个月的最后一天。如果您愿意，也可以这样设置日期：

```
hEndDate.Value = EndDate.AddMonths(-1)
hEndDate.Value.Day = Date.DaysInMonth(hStartDate.Year, hStartDate.Month) 
```

# validation - 使用 JAX-WS 进行服务器端模式验证

> ID：14681884
> 
> 赞同：1
> 
> 时间：2013-02-04T07:07:37.767
> 
> 标签：validation, xsd, jax-ws, jax-ws-customization

我有 JAX-WS 无容器服务（通过`Endpoint.publish()`正确的`main()`方法发布）。我希望我的服务能够验证输入消息。我尝试了以下注释：`@SchemaValidation(handler=MyErrorHandler.class)`并实现了一个适当的类。当我启动服务时，我得到以下信息：

```
Exception in thread "main" javax.xml.ws.WebServiceException: 
Annotation @com.sun.xml.internal.ws.developer.SchemaValidation(outbound=true,
inbound=true, handler=class mypackage.MyErrorHandler) is not recognizable, 
atleast one constructor of class 
com.sun.xml.internal.ws.developer.SchemaValidationFeature 
should be marked with @FeatureConstructor 
```

我在互联网上找到[的解决方案很少，所有这些都暗示使用WebLogic容器。](http://ex.runcode.us/q/exception-when-using-schemavalidation-annotation-on-jax-ws-endpoint-in-weblogic)在我的情况下，我不能使用容器，我需要嵌入式服务。我还能使用模式验证吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T13:53:48.017

`@SchemaValidation`注解未在 JAX-WS 规范中定义，但验证保持打开状态。这意味着您需要的不仅仅是 jdk 中的类。

只要您能够将一些 jars 添加到您的类路径中，您就可以使用 metro 轻松设置它（它也包含在 WebLogic 中。这就是您找到使用 WebLogic 作为容器的解决方案的原因。）。更准确地说，您需要在类路径中添加两个 jar。我建议

1.  下载[最新的地铁版本](http://jax-ws.java.net/2.2.7/)。
2.  在某处解压。
3.  `jaxb-api.jar`将and添加`jaxws-api.jar`到您的类路径中。例如，您可以通过将它们放入`JAVA_HOME/lib/endorsed`或手动将它们添加到您的项目中来做到这一点。这在很大程度上取决于 IDE 或您使用的任何东西。

完成此操作后，`MyErrorHandler`即使它是通过`Endpoint.publish()`. 至少我在本地有这个设置，它可以编译和工作。

如果您无法修改类路径并需要验证，则必须使用 JAXB 手动验证请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-21T15:26:11.180

老问题，但我使用正确的包和最少的配置以及仅使用 WebLogic 提供的服务解决了这个问题。我遇到了和你一样的问题。

只需确保使用[我在此处描述](https://stackoverflow.com/a/28070130/3231778)的正确 java 类型。

当我计划扩展到跟踪机制时，我还实现了自定义错误处理程序。

**具有自定义验证处理程序的 Web 服务**

```
import com.sun.xml.ws.developer.SchemaValidation;

@Stateless
@WebService(portName="ValidatedService")
@SchemaValidation(handler=MyValidator.class)
public class ValidatedService {

    public ValidatedResponse operation(@WebParam(name = "ValidatedRequest") ValidatedRequest request) {

        /* do business logic */

        return response;
    }
} 
```

**用于在数据库中记录和存储错误的自定义处理程序**

```
public class MyValidator extends ValidationErrorHandler{

    private static java.util.logging.Logger log = LoggingHelper.getServerLogger();

    @Override
    public void warning(SAXParseException exception) throws SAXException {
        handleException(exception);
    }

    @Override
    public void error(SAXParseException exception) throws SAXException {
        handleException(exception);
    }

    @Override
    public void fatalError(SAXParseException exception) throws SAXException {
        handleException(exception);
    }

    private void handleException(SAXParseException e) throws SAXException {
        log.log(Level.SEVERE, "Validation error", e);
        // Record in database for tracking etc
        throw e;
    }
} 
```

# android - 如何理解这个错误

> ID：14681887
> 
> 赞同：0
> 
> 时间：2013-02-04T07:07:55.430
> 
> 标签：android

我已经在 google play 我的应用程序上发布了。谷歌告诉我，我的应用程序在用户使用时崩溃了 2 次。我测试了我的应用程序很多次，但我从来没有得到那个错误，而且我不知道如何模拟那个错误。

```
java.lang.RuntimeException: Unable to resume activity {com.mdp.slotmachine/com.mdp.slotmachine.CoverActivity}: java.lang.NullPointerException
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2444)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2472)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4429)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:795)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:562)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.NullPointerException
at android.app.ContextImpl.startService(ContextImpl.java:1088)
at android.content.ContextWrapper.startService(ContextWrapper.java:359)
at com.mdp.slotmachine.CoverActivity.onResume(Unknown Source)
at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1154)
at android.app.Activity.performResume(Activity.java:4539)
at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2434)
... 12 more 
```

错误似乎在 CoverActivity 类中，在 onResume 方法中。如您所见，我在 onResume 方法中没有做任何事情。

```
 @Override
  protected void onResume() {
  super.onPause();

  //check if i'm publishing the app on samsung store
        if(MainActivity.samsung){   

          // here i check if my app was properly downloaded from samsung store by using Zirconia.
         // BUT I NEVER GET HERE; BECAUSE THE PREVIUOS VARIABLE (MainActivity.samsung) IS ALWAYS FALSE.
            if(!MainActivity.licensaSamsung){
                    finish();
            }
        }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:09:34.673

而不是调用`super.onPause();`使用`super.onResume();`

```
 @Override
protected void onResume() {
    //super.onPause();check if i'm publishing the app on samsung store
    super.onResume();// call this method
if(MainActivity.samsung){    
            // here i check if my app was properly downloaded from samsung store by using Zirconia. BUT I NEVER GET HERE; BECAUSE THE PREVIUOS VARIABLE (MainActivity.samsung) IS ALWAYS FALSE.
        if(!MainActivity.licensaSamsung){
            finish();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T07:49:35.500

根据我们与您的问题相关的讨论，您`final static boolean samsung;`在 start Activity 中保留 a 的方法是致命且错误的。这在 Android 上不起作用。

尽管有一些理由不应该使用静态变量，但我认为这对于环境方面的启动分析等目的来说是可以的。

在 Android 上执行此操作的正确方法是派生一个 Application 类，在那里执行分析并将其存储在其中的变量中。典型的设计注意事项适用，但这里有一个可能适合您的基本方案。

```
public final class MyApplication extends Application {
    public static boolean isSamsung;
    @Override
    // Application.onCreate() is called on the main thread before your first Activity
    public void onCreate() {
        isSamsung = myFancyComputation();
    }
 } 
```

只要您的应用程序没有被杀死或终止，MyApplication 的实例就可以保证存活。请注意，这可能比您想象的更早或更晚发生；在尝试依赖它们之前，请尝试完全了解应用程序和活动生命周期。

使用这种`static singleton`方法，访问起来非常容易`Application.isSamsung`；但是，您也可以将其设为非静态并通过 Activity 的方式访问它以查找其应用程序上下文。

# php - 如何使用php在新标签中重定向？

> ID：14681888
> 
> 赞同：1
> 
> 时间：2013-02-04T07:07:56.053
> 
> 标签：php

如果文件不存在但没有重定向，我正在尝试在新页面中进行重定向，但如果我只写警报，那么它正在工作。请帮我。

```
//php code

<?PHP 
if(isset($_POST["bills"]))
{
if($_POST[month]=='Select Month' || $_POST[year]=='Select Year'){$msg="Please select valid month or year";}
else if(file_exists($path.$_POST["month"].$_POST["year"].'.pdf')){header('location:'.$path.$_POST[month].$_POST[year].'.pdf');}
else{?>
<script type='text/javascript' language="javascript">document.getElementById('downloadlink').click();</script>
<?PHP }
}
?>

//html code

<form action="electricitybills.php" method="post" >
<select name="year">
<?PHP include('include/billsyear.php'); ?>
</select>
<select name="month">
<?PHP include('include/billsmonth.php'); ?>
</select>
<div class="gobutton"><input type="submit" name="bills" value="GO"></div>
</form>

    </div>
<br><br><br><a id="downloadlink" href="http://www.google.com" target="_blank" style="display:none;">link text</a></form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:23:30.667

使用 jquery 的 .ready 函数。因为您试图在 document.getElementById('downloadlink') 生成之前访问它。

```
<a id="downloadlink" href="http://www.google.com" target="_blank" style="display:none;">link text</a>
<?PHP 
if(isset($_POST["bills"]))
{
if($_POST[month]=='Select Month' || $_POST[year]=='Select Year'){$msg="Please select valid month or year";}
else if(file_exists($path.$_POST["month"].$_POST["year"].'.pdf')){header('location:'.$path.$_POST[month].$_POST[year].'.pdf');}
else{?>
<script type='text/javascript' language="javascript">
$('#downloadlink').trigger('click'); 
```

```
//html code

<form action="electricitybills.php" method="post" >
<select name="year">
<?PHP include('include/billsyear.php'); ?>
</select>
<select name="month">
<?PHP include('include/billsmonth.php'); ?>
</select>
<div class="gobutton"><input type="submit" name="bills" value="GO"></div>
</form>

    </div>
<br><br><br></form> 
```

试试这个。我希望它会帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:06:46.760

在 php 中，您可以使用重定向：

```
header('location: www.google.com'); 
```

或在 javascript 中：

```
location.href = "http://www.example.com/test"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:12:44.807

`click()`- 执行对元素的单击，就像用户手动单击它一样。在大多数浏览器中，click() 仅适用于非“提交”或“重置”的表单 INPUT 元素。它不能用于模拟点击链接或表单提交按钮。

`downloadlink`实际上是`link`最有可能的，这就是为什么它不起作用

请参阅此[链接](http://www.javascriptkit.com/domref/elementmethods.shtml)以获取`click()`文档

# sql - 如何找到最接近的十进制值

> ID：14681890
> 
> 赞同：1
> 
> 时间：2013-02-04T07:08:03.877
> 
> 标签：sql, sqlite, spatial

正在开发 MAP 应用程序。它节省了数千个纬度和经度细节来绘制叠加层。当用户触摸覆盖时，它想从 SQL 中保存的记录中获取最近的纬度和经度。

我用：

```
SELECT * 
FROM track_points 
WHERE segmentId = '22' 
ORDER BY (ABS(latitude - 25.312005) + ABS(longitude - 91.730433)) 
```

它完全一样，但问题是当特定的叠加层有数千个纬度和经度细节时。**完成上述查询需要很长时间。**

即使获取最近的数据，它也会认为整个数据库数据得到一个点。

就**在给出 28.2525 时，我需要 25.2520 附近的东西**或者它是什么，然后停止。我不想从第 10 行的 22.23252 或其他东西开始，在第 5000 行达到 25.2520，但一直持续到最后一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T04:08:48.247

首先，继续调查 Spatialite 是否是您所需要的。

但是，您需要减少查询正在考虑的点数：

```
SELECT * 
FROM track_points 
WHERE segmentId = '22' 
ORDER BY (ABS(latitude - 25.312005) + ABS(longitude - 91.730433))
WHERE latitude BETWEEN 25.31 AND 25.32
      AND
      longitude BETWEEN 91.73 AND 91.74 
```

您希望将边界设置得尽可能窄，但又要足够宽，以确保您至少获得一个结果。如果您的纬度和经度是规则格子，那么这是微不足道的。

您可以使用它`BETWEEN @value - @tolerance AND @value + @tolerance`来动态确定值。

# ruby-on-rails - Facebook 在 Rails 中登录用户如何访问其信息并获得订阅

> ID：14681892
> 
> 赞同：0
> 
> 时间：2013-02-04T07:08:07.703
> 
> 标签：ruby-on-rails, facebook-graph-api, omniauth, facebook-access-token, koala

我正在使用omniauth 从facebook 登录用户，并且我也在我的devise.rb 初始化文件中使用了devise gem。我添加了

```
config.omniauth :facebook, app_id, app_secret,
    {:scope => 'email, offline_access', :client_options => 
      {:ssl =>
          {:ca_file => '/usr/lib/ssl/certs/ca-certificates.crt'}
      }
    } 
```

并且它工作得很好，因为我在我的应用程序中有用户“登录”，但问题是我不知道如何继续并获取用户个人资料信息及其朋友信息以及订阅和状态更新。

有可用的图形 Api 方法

```
@graph = Koala::Facebook::API.new(acess_token)
    @profile = @graph.get_object("me")
    @friends = @graph.get_connections("me", "friends") 
```

但我不知道如何让**“access_token”**做所有这些事情。

所以总结一下我需要AccessToken请提供明确的答案plzz

等待你的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:21:15.677

雅虎明白了：）

在以下方法中**$access_token = auth.credentials.token**语句指向获取访问令牌。

```
def self.find_for_provider_oauth(auth, signed_in_resource=nil)
    user = User.where(:provider => auth.provider, :uid => auth.uid).first
    $access_token = auth.credentials.token
    unless user

      user = User.create(name:auth.extra.raw_info.name,
        provider:auth.provider,
        uid:auth.uid,
        email:auth.info.email,
        password:Devise.friendly_token[0,20]
      )
    end
    user
  end 
```

或者你可以通过这个得到它

```
request.env["omniauth.auth"].credentials.token 
```

是否有任何其他获得 access_token plzz 共享的最佳方法我需要优化和良好的实践，但现在它的工作。

# python - 为什么向元类属性闭包组合添加第二个属性会更改第一个属性？

> ID：14681893
> 
> 赞同：2
> 
> 时间：2013-02-04T07:08:08.703
> 
> 标签：python, properties, closures, metaclass

我想了解 python 元类。为了练习，我正在实现一种用于编写类的声明性方式（类似于 sqlalchemy.ext.declarative）。只要我只有一个属性，这看起来很有希望。

但是当我添加另一个属性时，第一个属性的某些部分会发生变化，并且第一个属性的值会根据第二个属性的模式进行验证。这可能是由元类、闭包、属性或它们的组合引起的。我试着给出一个最小的、完整的但可读的例子。

```
#! /usr/bin/env python

"""
Something like:
    class Artist:
        locale = Pattern('[A-Z]{2}-[A-Z]{2}')

should be equivalent to:
    class Artist:
        def __init__(self):
            self._locale = None
        @property
        def locale(self):
            return self._locale
        @locale.setter
        def locale(self, value):
            validate(value, '[A-Z]{2}-[A-Z]{2}')
            self._locale = value

Problem:
    The code below works if Artist has only one attribute.
    When I add another one with a different pattern, only that last
    pattern is used in validation.
"""

import re
import unittest

# this class (and future siblings) are used to describe attributes
class Pattern(object):
    def __init__(self, pattern):
        self.pattern = pattern

    def validate(self, value):
        if value is None:
            return
        if not re.match("^%s$" % self.pattern, value):
            raise ValueError("invalid value: %r" % value)

    def __repr__(self):
        return "%s(pattern=%r)" % (self.__class__.__name__, self.pattern)

# __metaclass__ based class creation
def createClassFromDeclaration(name, bases, dct):
    """ Examine dct, create initialization in __init__ and property. """
    attributes = dict()
    properties = dict()
    for key, value in dct.iteritems():
        if not isinstance(value, Pattern):
            continue
        pattern = value
        pattern.attribute = "_%s" % key
        attributes[key] = pattern

        def fget(self):
            return getattr(self, pattern.attribute)
        def fset(self, value):
            pattern.validate(value)
            return setattr(self, pattern.attribute, value)
        properties[key] = property(fget, fset)

    def __init__(self, **kwargs):
        # set all attributes found in the keyword arguments
        for key, value in kwargs.iteritems():
            if key in self.__attributes__:
                setattr(self, key, value)
        # set all attributes _NOT_ found to None
        for key, declaration in attributes.iteritems():
            if not hasattr(self, declaration.attribute):
                setattr(self, key, None)

    dct = dict(dct)
    dct.update(properties)
    dct['__init__'] = __init__
    dct['__attributes__'] = attributes
    return type(name, bases, dct)

# declarative class
class Artist(object):
    __metaclass__ = createClassFromDeclaration

    # FIXME: adding a second attribute changes the first pattern
    locale = Pattern('[A-Z]{2}-[A-Z]{2}')
    date = Pattern('[0-9]{4}-[0-9]{2}-[0-9]{2}')

# some unit tests
class TestArtist(unittest.TestCase):
    def test_attributes_are_default_initialized(self):
        artist = Artist()
        self.assertIsNone(artist.date)
        self.assertIsNone(artist.locale)

    def test_attributes_are_initialized_from_keywords(self):
        artist = Artist(locale="EN-US", date="2013-02-04")
        self.assertEqual(artist.date, "2013-02-04")
        # FIXME: the following does not work.
        # it validates against the date pattern
        self.assertEqual(artist.locale, "EN-US")

    def test_locale_with_valid_value(self):
        artist = Artist()
        artist.date = "2013-02-04"
        self.assertEqual(artist.locale, "2013-02-04")
        # FIXME: the following does not work.
        # it validates against the date pattern
        artist.locale = "EN-US"
        self.assertEqual(artist.locale, "EN-US")

    def test_locale_with_invalid_value_throws(self):
        artist = Artist()
        with self.assertRaises(ValueError):
            artist.locale = ""
        with self.assertRaises(ValueError):
            artist.locale = "EN-USA"

if __name__ == '__main__':
    unittest.main()

# vim: set ft=python sw=4 et sta: 
```

当我注释掉第二个属性（'date'）时，测试成功，但使用第二个属性，尝试设置第一个属性（'locale'）的测试失败。是什么导致单元测试失败？

免责声明：此代码仅用于培训。有一些方法可以创建不涉及元类、属性和闭包的相同功能（如你我所知）。但是，如果我们只走在我们熟悉的街道上，我们就不会学到任何新东西。请帮助我扩展我的 Python 知识。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:37:30.817

这个问题与元类或属性本身没有任何关系。它与您如何定义 get/set 函数有关。您`fget`和`fset`引用`pattern`封闭函数中的变量。这将创建一个闭包。的值将在/被*调用*`pattern`时查找，而不是在定义时查找。因此，当您在下一次循环迭代中覆盖时，您会导致所有/函数现在引用新模式。`fget``fset`*`pattern``fget``fset`*

 *这是一个更简单的示例，显示了正在发生的事情：

```
def doIt(x):
    funs = []
    for key, val in x.iteritems():
        thingy = val + 1
        def func():
            return thingy
        funs.append(func)
    return funs

>>> dct = {'a': 1, 'b': 2, 'c': 3}
>>> funs = doIt(dct)
>>> for f in funs:
...     print f()

3
3
3 
```

请注意，即使这三个函数有时被定义为`thingy`具有不同的值，但当我稍后调用它们时，它们都返回相同的值。`thingy`这是因为当它们被调用时，它们都在查找，这是在循环完成之后，所以`thingy`只是等于它设置的最后一个值。

解决此问题的常用方法是将要关闭的变量作为附加函数参数的默认值传递。尝试像这样做你的getter和setter：

```
def fget(self, pattern=pattern):
    return getattr(self, pattern.attribute)
def fset(self, value, pattern=pattern):
    pattern.validate(value)
    return setattr(self, pattern.attribute, value) 
```

默认参数是在函数定义时而不是调用时评估的，因此这会强制每个函数“保存”它想要使用的模式值。*

# meteor - Meteor 订阅连接

> ID：14681900
> 
> 赞同：0
> 
> 时间：2013-02-04T07:08:54.130
> 
> 标签：meteor

我想知道流星订阅是如何工作的。假设我们发布了多个项目

```
Meteor.publish("rooms", function () {..});
Meteor.publish("keys", function () {..});
Meteor.publish("cars", function () {..});
Meteor.publish("assets", function () {..});
Meteor.publish("employees", function () {..});
Meteor.publish("inventory", function () {..}); 
```

以及客户端集中的相应订阅。

Meteors 反应性确保当更新新记录时，客户端也会实时更新。所以这意味着有一个持久的连接到用户

这些中的每一个是否都在服务器和客户端之间为所有数据使用了一个持久连接，或者每个都有自己的（websocket/comet/..）连接（总共 6 个？）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:19:33.703

There is one livedata stream connection from the web page to the server. The connection is shared between all subscriptions and method calls.

# ruby - Ruby 中未初始化的常量 ActionDispatch (NameError)

> ID：14681901
> 
> 赞同：0
> 
> 时间：2013-02-04T07:09:02.230
> 
> 标签：ruby, cucumber, capybara

我在 ruby​​ 类中的代码是。在这里我得到未初始化的常量 ActionDispatch (NameError)

```
DatabaseCleaner.strategy = :transaction
class ActionDispatch::IntegrationTest
    # Make the Capybara DSL available in all integration tests
    include Capybara::DSL

    # Stop ActiveRecord from wrapping tests in transactions
    self.use_transactional_fixtures = false

    teardown do
        DatabaseCleaner.clean       # Truncate the database
        Capybara.reset_sessions!    # Forget the (simulated) browser state
        Capybara.use_default_driver 
    end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T08:11:38.907

升级后我遇到了同样的问题。

这是我的堆栈跟踪：

```
uninitialized constant ActionDispatch::IntegrationTest (NameError)
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-rails-1.3.1/lib/cucumber/rails/world.rb:9:in `<module:Rails>'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-rails-1.3.1/lib/cucumber/rails/world.rb:8:in `<module:Cucumber>'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-rails-1.3.1/lib/cucumber/rails/world.rb:7:in `<top (required)>'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/backports-3.3.0/lib/backports/tools.rb:328:in `require'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/backports-3.3.0/lib/backports/tools.rb:328:in `require_with_backports'
/Users/etagwerker/Projects/om/features/support/env.rb:11:in `<top (required)>'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/rb_support/rb_language.rb:122:in `load'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/rb_support/rb_language.rb:122:in `load_code_file'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/runtime/support_code.rb:180:in `load_file'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/runtime/support_code.rb:83:in `block in load_files!'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/runtime/support_code.rb:82:in `each'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/runtime/support_code.rb:82:in `load_files!'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/runtime.rb:183:in `load_step_definitions'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/runtime.rb:42:in `run!'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/lib/cucumber/cli/main.rb:47:in `execute!'
/Users/etagwerker/.rvm/gems/ruby-1.9.3-p327@ombu/gems/cucumber-1.3.1/bin/cucumber:13:in `<top (required)>'
script/cucumber:9:in `load'
script/cucumber:9:in `<main>' 
```

我正在使用`rails`3.0.20 和`cucumber-rails`1.3.1。

在尝试了几件事之后，我尝试了这个：

```
rails generate cucumber:install 
```

这为我解决了它。

# c++ - 无法使用 doxygen 正确记录宏

> ID：14681904
> 
> 赞同：1
> 
> 时间：2013-02-04T07:09:06.343
> 
> 标签：c++, ubuntu, doxygen

我正在使用`ubuntu 12.10 bundled doxygen`版本来记录 c++ 源代码库。

我遇到了一个宏问题（只有一个，但不是其他的）。有问题的宏就是这样定义的：

```
 #define MYNS_ENFORCE(cond, ex) \
   if (!(cond)) throw ex 
```

`Doxygen`适用于其他宏。它对其他宏的作用是在 MACROS 部分中列出如下内容：

```
 #define MY_MACRO(param) 
```

稍后，在详细部分中，它列出了`macro`扩展值。

但是对于有问题的宏，它列出了如下内容：

```
 #define MYNS_ENFORCE(cond, ex) 
   if (!(cond)) throw ex 
```

全部在简要部分，详细部分没有。我试图搜索，但没有找到与此类似的示例。

我的宏扩展配置如下：

```
 ENABLE_PREPROCESSING   = YES

   MACRO_EXPANSION        = YES

   EXPAND_ONLY_PREDEF     = YES 
```

任何人都可以提供提示或解决方案吗？

提前致谢。

# excel - 将非数字值替换为excel中真正缺失的值

> ID：14681908
> 
> 赞同：0
> 
> 时间：2013-02-04T07:09:23.523
> 
> 标签：excel, excel-formula, missing-data

我想对（无意中）在应该有数字的地方有字符串的数据使用数据分析工具包（并执行其他分析）。例如，我可能有一个列：

```
0,
1,
don't know,
7 
```

我使用以下语句生成一个新列：

```
=IF(ISNUMBER(A1),A1,"") 
```

返回：

```
0,
1,
"",
7 
```

由于“”，我无法对这些进行数据分析。但是，如果我只是在跳过第三行的单元格中键入以下内容，我就可以进行分析：

```
0,
1,
,
7 
```

任何有关如何使用缺失值正确进行替换的提示都值得赞赏。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:20:19.080

请执行下列操作：

1.  将上述公式应用于数据范围。
2.  将带有公式的整个列的特殊值复制并**粘贴到相同的范围内。**
3.  应用自动过滤器（最好在数据上方有列标题）。
4.  仅过滤`(Blanks)`。
5.  选择所有过滤的单元格，然后按`Delete`或`Clear Contents`从右键菜单中选择。

因此，您将获得符合您要求的新列表。有点简单，但会去）祝你好运！

# jsf - javax.faces.FacesException：目标模型类型不是集合或数组

> ID：14681911
> 
> 赞同：3
> 
> 时间：2013-02-04T07:09:31.303
> 
> 标签：jsf, jsf-2

提交 JSF 表单时，出现以下异常：

```
Caused by: javax.faces.FacesException: Target model Type is no a Collection or Array 
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:388) [:2.0.3-] 
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValue(MenuRenderer.java:125) [:2.0.3-] 
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:311) [:2.0.3-] 
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1023) [:2.0.3-]     at javax.faces.component.UIInput.validate(UIInput.java:953) [:2.0.3-] 
    at javax.faces.component.UIInput.executeValidate(UIInput.java:1204) [:2.0.3-] 
    at javax.faces.component.UIInput.processValidators(UIInput.java:693) [:2.0.3-] 
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081) [:2.0.3-] 
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081) [:2.0.3-] 
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081) [:2.0.3-] 
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081) [:2.0.3-] 
    at javax.faces.component.UIComponentBase.processValidators(UIComponentBase.java:1081) [:2.0.3-] 
    at javax.faces.component.UIForm.processValidators(UIForm.java:240) [:2.0.3-] 
    at org.ajax4jsf.component.AjaxViewRoot$3.invokeContextCallback(AjaxViewRoot.java:439) [:3.3.1.GA] 
    at org.ajax4jsf.component.AjaxViewRoot.processPhase(AjaxViewRoot.java:238) [:3.3.1.GA] 
    at org.ajax4jsf.component.AjaxViewRoot.processValidators(AjaxViewRoot.java:455) [:3.3.1.GA] 
    at com.sun.faces.lifecycle.ProcessValidationsPhase.execute(ProcessValidationsPhase.java:72) [:2.0.3-]   at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97) [:2.0.3-] 
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114) [:2.0.3-] 
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308) [:2.0.3-]
    ... 42 more 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T11:58:43.103

```
javax.faces.FacesException: Target model Type is no a Collection or Array
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectManyValuesForModel(MenuRenderer.java:388) 
```

This exception indicates that you've an `UISelectMany` component in the view such as `<h:selectManyMenu>` or `<h:selectManyListbox>` whose value is **not** been bound to a collection or array. This is not right. Its value must be bound to a collection (like `List<Entity>`) or array (like `Entity[]`), because the component can retrieve multiple submitted values.

Here's a kickoff example of how a proper `<h:selectManyMenu>` look like, assuming that you're using `String` typed items:

```
<h:selectManyMenu value="#{bean.selectedItems}">
    <f:selectItems value="#{bean.availableItems}" />
</h:selectManyMenu>
<h:commandButton value="submit" action="#{bean.submit}" /> 
```

with

```
private List<String> selectedItems; // Note: List<String> and thus NOT String!
private List<String> availableItems;

@PostConstruct
public void init() {
    availableItems = Arrays.asList("one", "two", "three", "four", "five");
}

public void submit() {
    System.out.println("Selected items: " + selectedItems);
} 
```

### See also:

*   [How to get all the selected values from h:selectManyListbox in the backend bean in case of JSF?](https://stackoverflow.com/questions/4358326/how-to-get-all-the-selected-values-from-hselectmanylistbox-in-the-backend-bean/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-09T13:11:05.317

`process`我的解决方案是：我从标签的 标签中删除了属性“dtSubItem” `<p:commandButton>`，一切正常。命令按钮在提交事件上提交数据表。

处理第一个请求，但在第二个请求出现错误时，填充数据表。

```
<div class="ui-g-12 ui-md-6 ui-lg-2">
  <div class="espacoCampo">
      <p:outputLabel value=""  />  
          <p:commandButton  actionListener="#{managedBean.adicionarSubItemPanel(item)}"
                update="dtSubItem"
                title="Clique aqui para adicionar SubItem"
                icon="fa fa-plus"
                value="Adicionar"
                process="@this dtSubItem cadSubItens"
                iconPos="right"
                 >
      </p:commandButton>
    </div>
</div>

<p:dataTable var="subItem" id="dtSubItem" emptyMessage="Sem registros adicionados" value="#{item.btpResolucaoItemSubitemList}">
...
</p:dataTable> 
```

# jquery - 灰显过去的日期

> ID：14681913
> 
> 赞同：0
> 
> 时间：2013-02-04T07:09:32.520
> 
> 标签：jquery

我试过这个 jQuery 代码来灰掉过去的日期，但它没有给出正确的输出；我仍然可以选择过去的日期。

```
$('.calendar').datepicker({minDate: 0}).live('changeDate', function(ev){
    $(this).prev('input').val(
      (ev.date.getMonth() + 1) + '/' + 
      ev.date.getDate("option", "minDate", 0) + '/' +    
      ev.date.getFullYear().toString().substr(-2)
    );
    $(this).datepicker('hide');
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:44:16.717

下面是实现它的代码：

```
 $(function(){ $('#datepicker1').datepicker({ startDate: '-0m'}).on('changeDate', function(ev){ $('#datepicker1').datepicker('hide'); }); }); 
```

而不是使用 minDate 你可以使用 startDate

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:15:09.683

您需要将 minDate 设为当前日期

```
var date = new Date();
var currentMonth = date.getMonth();
var currentDate = date.getDate();
var currentYear = date.getFullYear();

$('.calendar').datepicker({
    minDate: new Date(currentYear, currentMonth, currentDate)
}); 
```

# java - 不下载附件的特定邮件附件计数 - 使用 Java

> ID：14681916
> 
> 赞同：5
> 
> 时间：2013-02-04T07:09:38.087
> 
> 标签：java

是否可以仅获取 Java 中邮件的附件数量？我尝试使用这个：

```
DataHandler handler = message.getDataHandler();
AttachedFileName= handler.getName(); 
```

这列出了所有邮件收件箱的所有附件，但不列出特定邮件的所有附件。

如果可以的话，这可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:24:36.957

这应该给你附件计数，

```
Multipart multipart = (Multipart) message.getContent();
int attachmentCount = multipart.getCount(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-14T18:51:42.673

我没有足够的声誉来评论接受的解决方案：

```
 Multipart multipart = (Multipart) message.getContent();
  int attachmentCount = multipart.getCount(); 
```

但我不认为它是理想的，原因如下：

1.  许多电子邮件客户端 [例如：Thunderbird] 将所有 HTML 电子邮件作为多部分/替代方式发送。它们包括一个 HTML 部分和一个替代的纯文本部分。从历史上看，这样做是为了让客户选择他们能够展示的最佳选择。

2.  并非作为一部分包含的所有内容都是附件。例如，许多图像不会在电子邮件客户端中显示为附件，因为它们的处置设置为“内联”。

总之，此解决方案可能会将所有 HTML 电子邮件视为具有附件，并将所有带有内联图像的电子邮件视为具有附件。

这是忽略通常不被视为附件的部分的替代方法：

```
private int getAttachmentCount(Message message) {
    int count = 0;
    try {
        Object object = mMessage.getContent();
        if (object instanceof Multipart) {
            Multipart parts = (Multipart) object;
            for (int i = 0; i < parts.getCount(); ++i) {
                MimeBodyPart part = (MimeBodyPart) parts.getBodyPart(i);
                if (Part.ATTACHMENT.equalsIgnoreCase(part.getDisposition()))
                    ++count;
            }
        }
    } catch (IOException | MessagingException e) {
        e.printStackTrace();
    }
    return count;
} 
```

我知道这个解决方案会得到身体部分，但我相信这是唯一准确的方法来查看它是否是附件。

# windows - 查询远程PC的systemindex的爬取范围

> ID：14681919
> 
> 赞同：1
> 
> 时间：2013-02-04T07:10:01.397
> 
> 标签：windows, search, indexing

这个问题是关于**Windows Search (WDS v4)**

我正在尝试使用`ISearchCrawlScopeManager::IncludedInCrawlScope`来确定远程（本地网络）文件夹（两台运行 WDS4 的 PC）是否包含在远程 PC 的索引中。我正在使用远程目录

```
ISearchManager::GetCatalog("remotePC.SystemIndex") 
```

`IncludedInCrawlScope`呼叫成功，但即使对于远程文件夹中的文件夹，答案也始终是“不在索引中” `SystemIndex`。

这是在查询被阻止访问权限的东西吗？

如果我在远程机器上进行搜索查询（即尝试查找文件），则查询有效。那么为什么我无法检查共享文件夹是否被索引？

# java - HashMap的工作流程

> ID：14681921
> 
> 赞同：-2
> 
> 时间：2013-02-04T07:10:26.987
> 
> 标签：java

我在哈希图中添加了 2 个对象，但 2 个值的键是相同的。甚至实现了 hashcode 和 equals 方法。但它仍然显示 2 个值而不是 3 个。

代码：

```
package test1;

import java.util.HashMap;

public class HashMapDemo {

    int i;
    String abc;
    HashMapDemo(int a,String b){
        i=a;
        abc=b;
    }
    public String toString(){
        return i +abc;
    }

    public static void main(String[] args){
        HashMapDemo obj1= new HashMapDemo(2,"hello");
        HashMapDemo obj2= new HashMapDemo(3,"world");
        HashMapDemo obj3= new HashMapDemo(4,"around");
        toDos t1=new toDos("aa");
        toDos t2=new toDos("bb");
        toDos t3=new toDos("aa");
        HashMap test=new HashMap();
        test.put(t1,obj1);
        test.put(t2, obj2);
        test.put(t3,obj3);
        System.out.println(test.size()+""+test.get(obj2)+test);

    }
} 
```

按键代码：

```
package test1;

import java.util.HashMap;

class toDos
 {

        String a;
    toDos(String b){
        a=b;
    }
    public boolean equals(Object obj){
        System.out.println("call of equals");
        if((toDos)obj instanceof toDos & (toDos)obj !=null){
            toDos temp = (toDos) obj;
            if(temp.a.equals(this.a)){
                return true;
            }
        }
        return false;

    }
    public int hashCode(){
        System.out.println("call of hasCode");
        return (a!=null)? a.hashCode():0;
    }

    public String toString(){
        return a;
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:18:21.123

根据你的`class toDos`if`String a`相同的 equals 方法，那么两个对象都是相同的。

```
HashMap test=new HashMap();
test.put(t1,obj1); // "aa"
test.put(t2,obj2); // "bb"
test.put(t3,obj3); //"aa" 
```

因此 Obj1 和 obj2 都将被视为同一个对象，因此您的旧值 obj1 将被替换为 obj3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:13:31.280

似乎`t1.equals(t3)`- 因此，插入`t3`覆盖了第一个插入的条目。

在 a`HashMap`中，每个不同的键都有一个关联的值 - 因为`t1`和`t3`彼此相等 - 你只有 2 个不同的键。

作为旁注 - 您应该避免使用[原始类型](http://docs.oracle.com/javase/tutorial/java/generics/rawTypes.html)并尽可能使用[泛型类型。](http://docs.oracle.com/javase/tutorial/java/generics/)

# c - 重构重复的保护语句

> ID：14681923
> 
> 赞同：1
> 
> 时间：2013-02-04T07:10:42.427
> 
> 标签：c, refactoring

我已经定义了一种方法来计算获胜几率并返回支付给玩家的金额。我最初写这个是完成这项任务的最明显的方法，但我真的很想知道重构它以最小化计算机正在执行的工作量的最佳方法。这是我的功能：

```
int getPay(int winningOdds, int payOut)
{
    winningOdds = rand() % MAXIMUM_ODDS + MINIMUM_ODDS;

    if(winningOdds == 1)
    {
        payOut = 4000;
        printf("Jackpot!  - %d\n", payOut);
    }
    else if(winningOdds <= 2)
    {
        payOut = 1000;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 3)
    {
        payOut = 500;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 40)
    {
        payOut = 100;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 50)
    {
        payOut = 50;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 75)
    {
        payOut = 25;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 1000)
    {
        payOut = 10;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 3000)
    {
        payOut = 5;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 5000)
    {
        payOut = 3;
        printf("Coins won - %d\n", payOut);
    }
    else if(winningOdds <= 10000)
    {
        payOut = 1;
        printf("Coins won - %d\n", payOut);
    }

    return payOut;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T07:19:26.763

试试这个样式，需要填写数组`Payout`

```
struct Payout{
    int winningOdds, payOut;
};

int getPay(int winningOdds, int payOut)
{
    Payout payout[] = {{1,4000},{2,1000}....};
    int numElem = sizeof(payout)/sizeof(payout[0]);

    winningOdds = rand() % MAXIMUM_ODDS + MINIMUM_ODDS;
    for(int i=0;i<numElem ;i++){
        if(winningOdds <=payout[i].winningOdds){
            payOut = payout[i].payout;
            break;
        }
    }
    printf("Coins won - %d\n", payOut);

} 
```

# ms-access - 在 ACCESS 中运行宏

> ID：14681924
> 
> 赞同：0
> 
> 时间：2013-02-04T07:10:49.413
> 
> 标签：ms-access

我有一个关于 access 2000 或 2003 的问题，我需要制作一个宏来打开表单并自动单击运行查询的按钮，我该怎么做，可能有一些例子可以帮助我做到这一点？有什么建议么 ？我的想法是运行这样的东西：

```
Sub Refreshfiledata()
m  = MsgBox("Are you sure you want to run this macro ?.", vbYesNo)
If m = 6 Then
Application.DisplayAlerts = False
    SendKeys "{Enter}"
     Application.DisplayAlerts = True
      MsgBox "Done"
  End If
 End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:35:35.790

Sendkeys 几乎不能解决任何问题。

你可以把这样的东西放在一个模块中：

```
Sub OpenAForm()
    DoCmd.OpenForm "Form1"
    Forms!Form1.cmdClick_Click
End Sub 
```

这将引用 form1 上的此代码，请注意`Private`Access 通常在 Sub 之前添加的单词已被删除：

```
Sub cmdClick_Click()
    ''For a query to display data
    DoCmd.OpenQuery "Query1"
    ''For a query to change data
    CurrentDB.Execute "Query1", dbFailOnError
End Sub 
```

您必须更改代码以适合您的设置。

# eclipse - org.eclipse.wst.xsl.jaxp.debug.invoker.TransformationException

> ID：14681927
> 
> 赞同：1
> 
> 时间：2013-02-04T07:11:16.233
> 
> 标签：eclipse

当我在 eclips env 中传输 xml fie 时出现此错误

```
12:29:58,946 FATAL [main] Main  - No embedded stylesheet instruction for file: file:/C:/ANU_DOC/MyWS/xslt/file1/source.xml
org.eclipse.wst.xsl.jaxp.debug.invoker.TransformationException: No embedded stylesheet instruction for file: file:/C:/ANU_DOC/MyWS/xslt/file1/source.xml
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.transform(JAXPSAXProcessorInvoker.java:225)
    at org.eclipse.wst.xsl.jaxp.debug.invoker.internal.JAXPSAXProcessorInvoker.transform(JAXPSAXProcessorInvoker.java:186) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T08:48:22.837

如果我猜对了，您的代码没有正确引用 XSL 文件。您需要验证您在代码中是否正确引用了 XML 和 XSLT 文件。

或者发布调用转换的 Java 代码（可能是 5 行代码（最大））。您如何引用 XML 和 XSL 源代码在这里很重要..

我发布示例代码供您参考：

这里的 input.xml 和 input.xsl 是位于 bin 文件夹中的文件。`.project`（或者如果您从 Eclipse IDE 运行它，则在与文件相同的位置）

```
 TransformerFactory factory = TransformerFactory.newInstance();
 Transformer transformer = factory.newTransformer(new StreamSource(new File("input.xslt")));
 Source text = new StreamSource(new File("input.xml"));
 transformer.transform(text, new StreamResult(new File("output.xml"))); 
```

示例代码 2：（这里 XSL 代码作为字符串传递）

```
TransformerFactory factory = TransformerFactory.newInstance();
String sxslt = "<?xml version=\"1.0\"?><xsl:stylesheet version=\"1.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\">    <xsl:output indent=\"no\" />    <xsl:template match=\"@*|node()\">        <xsl:copy>            <xsl:apply-templates select=\"@*|node()\"/>        </xsl:copy>    </xsl:template></xsl:stylesheet>";
StringReader xslReader = new StringReader(sxslt);
Source xslt = new StreamSource(xslReader);
Transformer transformer = factory.newTransformer(xslt);
Source text = new StreamSource(new File("input.xml"));
transformer.transform(text, new StreamResult(new File("output.xml"))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:08:38.320

我现在可以做到了..发生这种情况是因为我在那里添加了新的 JAXP 我删除了它并且它现在工作正常..如果我在我的 xml 文件中调用一个方法得到

```
14:34:01,696 ERROR [main] JAXPSAXProcessorInvoker  - Cannot find class 'java:com.xslt.date.GetDateNow'. 
```

# crawler4j - 如何在 crawler4j 中获取 url 是 404 还是 301

> ID：14681931
> 
> 赞同：1
> 
> 时间：2013-02-04T07:11:35.453
> 
> 标签：crawler4j

是否可以获取 crawler4j 中的 URL 是 404 还是 301？

```
@Override
    public void visit(Page page) {
        String url = page.getWebURL().getURL();
        System.out.println("URL: " + url);

        if (page.getParseData() instanceof HtmlParseData) {
            HtmlParseData htmlParseData = (HtmlParseData) page.getParseData();
            String text = htmlParseData.getText();
            String html = htmlParseData.getHtml();
            List<WebURL> links = htmlParseData.getOutgoingUrls();

            System.out.println("Text length: " + text.length());
            System.out.println("Html length: " + html.length());
            System.out.println("Number of outgoing links: " + links.size());
        }
    } 
```

我在爬虫代码中使用它。谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T12:44:07.403

作为 Crawler4j 版本 3.3（2012 年 2 月发布）- Crawler4j 支持处理获取页面的 http 状态代码。

访问 StatusHandlerCrawlerExample[点击。](http://code.google.com/p/crawler4j/source/browse/src/test/java/edu/uci/ics/crawler4j/?r=0161a713f264d504013c83f3152c2cd40366a790#crawler4j/examples/statushandler)

您还可以使用[Jsoup](http://jsoup.org/)（Java HTML Parser，最好的 DOM、CSS 和 jquery）来解析页面。[这里](https://stackoverflow.com/questions/10518972/open-a-connection-with-jsoup-get-status-code-and-parse-document)有一个例子——展示了如何从给定的 URL 下载页面并获取页面状态代码。我认为您应该使用 Crawler4j 进行抓取，使用 Jsoup 进行页面获取。

# jquery-ui - 从 html 数据属性设置 jQuery ui 滑块参数

> ID：14681932
> 
> 赞同：8
> 
> 时间：2013-02-04T07:11:37.040
> 
> 标签：jquery-ui

我想将滑块范围的最大值嵌入到 html 数据参数中。我做了一些调试，尽管数据可以访问并且是一个数字，但滑块仍将使用默认的最大值 100。

我的 HTML：

```
<div class="slider" data-max="10"></div>
<label for="slider_value">Slider Value:</label>
<input type="text" id="slider_value" /> 
```

我的Javascript：

```
$(document).ready(function () {
    $("div.slider").slider({
        min: 0,
        max: $(this).data("max"),
        slide: function (event, ui) {
            $("input#slider_value").val(ui.value);
        }
    });
}); 
```

看到这个[小提琴](http://jsfiddle.net/danahinds57/Cp9vH/1/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T09:12:09.993

当参数 object`slider()`被评估时，`this`是对该对象的引用`document`，而不是`div.slider`. 您需要`div.slider`再次查找或保存对它的引用（[demo](http://jsfiddle.net/jefferyto/EzHLp/)）：

```
$(document).ready(function () {
    var div = $("div.slider");
    div.slider({
        min: 0,
        max: div.data("max"),
        slide: function (event, ui) {
            $("input#slider_value").val(ui.value);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-30T21:24:33.063

使用带有方法的 jQuery UI[`create`](http://api.jqueryui.com/slider/#event-create "jQuery UI 滑块小部件 API")事件[`option`](http://api.jqueryui.com/slider/#method-option)动态设置选项：

```
$(document).ready(function() {
    $('div.slider').slider({
        min: 0,
        create: function(event, ui) {
            $(this).slider('option', 'max', $(this).data('max'));
        },
        slide: function(event, ui) {
            $("input#slider_value").val(ui.value);
        }
    });
});
```

# css - 如何选择其中的第一个字符 标签

> ID：14681935
> 
> 赞同：0
> 
> 时间：2013-02-04T07:11:44.703
> 
> 标签：css, css-selectors

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:19:08.970

`:first-letter`不适用于内联元素，例如`i`. `:first-letter`适用于块元素，例如段落、表格标题、表格单元格、列表项或`inline-block`应用了该属性的那些元素。

```
<div>
    <p>
       <i>Sample text</i>
    </p>
</div> 
```

css

```
i { display: inline-block; }

div p:last-child i:first-child:first-letter { font-weight: bold } 
```

检查[jsfiddle](http://jsfiddle.net/xN3Z3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:22:32.830

第一行仅在块容器框中有意义，因此 ::first-letter 伪元素仅对显示值为 block、inline-block、table-cell、list-item 或 table- 的元素有影响标题。在所有其他情况下，::first-letter 无效。

* * *

[https://developer.mozilla.org/en-US/docs/CSS/::first-letter](https://developer.mozilla.org/en-US/docs/CSS/::first-letter)

# amazon-web-services - Invalid hostname error when connecting to s3 sink when using secret key having forward slash

> ID：14681938
> 
> 赞同：4
> 
> 时间：2013-02-04T07:12:12.050
> 
> 标签：amazon-web-services, amazon-s3, flume

I have a **`forward slash`** in aws secret key.

When I try to connect to s3 sink

```
Caused by: java.lang.IllegalArgumentException: Invalid hostname in URI s3://xxxx:xxxx@jelogs/je.1359961366545
    at org.apache.hadoop.fs.s3.S3Credentials.initialize(S3Credentials.java:41) 
```

When I encode forward slash with `%2F`, I get

```
The request signature we calculated does not match the signature you provided. Check your key and signing method. 
```

How should I encode my secret key.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-28T19:59:14.263

samthebest solution works, you just have to add "" surrounding the keys. Here how to use it:

```
hadoop distcp -Dfs.s3a.awsAccessKeyId="yourkey" -Dfs.s3a.awsSecretAccessKey="yoursecret" <your_hdfs_path> s3a://<your-bucket> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-05T06:20:48.603

I end up creating a new secret key without forward slashes. This is a know issue and generating new key is only solution.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-08T16:15:45.250

Use

```
-Dfs.s3n.awsAccessKeyId=<your-key> -Dfs.s3n.awsSecretAccessKey=<your-secret-key> 
```

e.g.

```
hadoop distcp -Dfs.s3n.awsAccessKeyId=<your-key> -Dfs.s3n.awsSecretAccessKey=<your-secret-key> -<subsubcommand> <args> 
```

or

```
hadoop fs -Dfs.s3n.awsAccessKeyId=<your-key> -Dfs.s3n.awsSecretAccessKey=<your-secret-key> -<subsubcommand> <args> 
```

# php - PHP 和 JavaScript 中的法语字符验证

> ID：14681941
> 
> 赞同：0
> 
> 时间：2013-02-04T07:12:27.460
> 
> 标签：php, javascript, validation, special-characters

我正在为法国客户开发一个 Web 应用程序。现在我也对 PHP 和 Javascript 中的法语字符验证感到非常困惑。

我想允许使用字母数字和特殊字符：é è ê î ï ô à ç , . #.

这是我用于字母数字和普通字符验证的 PHP 代码

```
$aValid = array(' ', ' ','   ','    ','     ','-','.',',','#');
    if(!ctype_alnum(str_replace($aValid, '', $str))) {
        return false;
    } 
    else
        return true; 
```

请帮助我包括对特殊字符的验证：é è ê î ï ô à ç , . # 在这段代码中。我也对javascript中的验证感到困惑。它是 UTF-8 编码的，所以我可以直接使用其中的特殊字符吗？

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T07:19:42.567

我会为这些任务使用[正则表达式：](http://www.php.net/manual/en/book.pcre.php)

```
return preg_match("/^[a-z\déèêîïôàç,.#]+$/ui", $str); 
```

# project - 项目经理与首席架构师——谁对产品开发的影响最大

> ID：14681945
> 
> 赞同：-2
> 
> 时间：2013-02-04T07:12:48.093
> 
> 标签：project, project-management

以下是我们当前组织（或排序）的概要及其角色的简要说明

*   解决方案经理（有远见的“构建这个可以执行 A、B 和 C 的基于 Web 的解决方案”）
*   软件工程总监（在部门 PM 上管理资源，明智地花费资本支出..指指点点，推动可交付成果..继续打高尔夫球和滑雪旅行，恕不另行通知）
*   首席架构师（我，概述并建立了端到端解决方案的架构和代码库，包括硬件、软件规划，以在预算内完成它。指导和推动开发团队在 SOA、sprint 开发环境下构建产品。编写代码，但主要与 SM 沟通，以确保实现愿景和/或要求..etc..etc）
*   中间件开发人员（负责 SQL 管理和编码中间件 REST 架构的工程师）
*   前端开发人员（负责开发、编码和部署 Web Portal 的工程师）
*   IT 管理员（负责硬件采购、安全标准、托管移动的工程师。

我是首席架构师，负责确保交付解决方案经理想要的东西。我的 delimna 是项目经理以某种方式将有问题的前端开发人员提升为主管。现在新的事实上的首席前端架构师喜欢这个头衔，不再认为他/她必须与我保持同步，更不用说遵循标准的开发协议了。造成裂痕。为了使问题更加复杂，项目经理（对生产力低下的前端首席架构师表示同情）对项目进行剖析，并将关键组件搁置起来，以备不时之需，直到他或她赶上进度。

这是踢球者：解决方案经理和客户不高兴，向我寻求答案。他们想知道为什么他们要求的某些功能被搁置了。与此同时，工程总监对即将发生的火车失事的后果一无所知。不管我怎么解释，2天王做不出好产品，现状似乎越来越差。我无权以更直接、更常规的方式处理此事。很多声音，很少有人有骨气跟进。

*   这张照片有什么问题？
*   我可以采取什么措施来解决这个问题（如果此时甚至可能的话）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:34:34.783

怎么了？老实说，你的工作是想出它，而他的工作是实现它，实际上它是领导工作来应对你。您应该简单地完成架构并明确说明您的工作已完成。如果 PM 与剩下的现实有任何接触，他会将您的压力施加到领导者身上。“完成工作”的流程图从最高层到最低层流动，我想说的是，当你的工作完成时，你不应该有资格为糟糕的编码人员工作。如果这对你有任何意义。

# java - Eclipse选项卡宽度没有改变

> ID：14681954
> 
> 赞同：5
> 
> 时间：2013-02-04T07:13:32.510
> 
> 标签：java, eclipse, tabs, width

我浏览了一些与此相关的帖子，但它们似乎并没有帮助我解决我的问题。我有一个项目，其中 java 文件以 2 个空格的宽度缩进。我想将所有内容更改为 4 格宽度。我尝试了“正确缩进”选项，但当我将几行修改为 4 空格缩进时，它只是将所有内容移回 2 空格宽度。我检查了 Java->Code Style->Formatter 中的设置，默认值为 4-space 宽度。我还检查了 General->Editors->Text Editors 的设置，它们设置为 4-space tab 宽度。

我认为正确的缩进可能是读取整个 java 文件并更正代码以使其符合文件中的所有其他内容，因此我手动修改了每一行以具有 4 个空格宽度的缩进。自动更正缩进仍然将所有内容带回 2 个空格。以前有人遇到过这个问题吗？是否有其他设置要更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T01:08:29.337

我找到了解决方案。项目特定的设置将缩进宽度设置为 2，而不是 4。这些设置必须覆盖 eclipse 设置。

# jquery - jquery对话框和ajax打开另一个对话框

> ID：14681958
> 
> 赞同：0
> 
> 时间：2013-02-04T07:13:58.787
> 
> 标签：jquery, ajax, grails

我在 jquery 和 ajax 上打开对话框中的第二个对话框时遇到了一些问题。这是 Jquery 代码：

```
$( "#dropdownuser" ).dialog({
        autoOpen: false,
        show: "blind",
        height : 600,
      width : 1000,
        modal: true,
      buttons: {
            "Okay": function() {
                $(  "#dialog"  ).dialog( "close" );

                $("#userSelect").on('Okay', function() {
                    $.ajax({
                        url: "URL",
                        data: $(this).serialize(),
                        type: "POST",
                        success: function(html){

                            $("#edit1").html(html).dialog("open")
                        },
                        error: function(jqXHR, textStatus, errorThrown){
                            alert('error: ' + textStatus + ': ' + errorThrown);
                        }
                    });
                    return false;
                });
              }
        }
      }); 
```

所以，我在这里要做的是提交一个对话框及其表单，然后当用户单击“确定”时，将提交对话框表单并返回一个新对话框。有大佬知道怎么做吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:28:08.537

删除这个：

```
$("#userSelect").on('Okay', function() {

}) 
```

只需调用 AJAX。没有`Okay`事件，即按钮的名称，并且 AJAX 已经在按钮的回调中。在用户单击带有文本的按钮之前，不会触发回调`Okay`

此外，如果您尝试关闭当前对话框，则此行中的选择器：

```
 $(  "#dialog"  ).dialog( "close" ); 
```

与对话框实例的选择器不匹配。您可以使用：

```
$(this).dialog( "close" ); 
```

# ios - 如何将带有配套设备的应用程序提交到 AppStore？

> ID：14681961
> 
> 赞同：1
> 
> 时间：2013-02-04T07:14:18.730
> 
> 标签：ios, app-store, appstore-approval

**背景：**
我们正在为我们的一位客户开发一个应用程序，以便与他们的设备一起使用。应用程序本身不能做任何事情，必须通过 Wi-Fi 连接到设备才能运行。

**问题：**
我们是否：

1.  只需以标准方式提交应用程序，即使 Apple 无法真正测试应用程序的功能？
    或者
2.  我们是否需要向 Apple 提供测试设备来真正测试应用程序的功能？如果是这样，这样做的程序是什么？

编辑：
**Apple 的不太有帮助的回应**
虽然我们无法预先批准应用程序，但我们可以解决有关特定 App Store 审查指南或 iOS 开发人员计划许可协议 (PLA) 部分的合规性问题。我理解这可能有点令人沮丧，对于由此可能造成的任何不便，我深表歉意，但是，我们可能只会回答有关以下资源的特定问题，除非应用程序已提交审核以便我们可以测试功能。

应用商店审核指南：[https ://developer.apple.com/appstore/resources/approval/guidelines.html](https://developer.apple.com/appstore/resources/approval/guidelines.html)

iOS 开发者计划许可协议：http: [//developer.apple.com/membercenter/index.action#agreements](http://developer.apple.com/membercenter/index.action#agreements)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:35:37.513

已经报道了一些可能性。

*   一种是提交与您的配套设备一起运行的应用程序的视频，其中包含使用该设备的应用程序功能的完整演练。

*   另一种是提供一个设备模拟器作为应用程序内置的测试模式（可能需要两个设备）。

*   另一种是在Review notes提供模拟账户；并拥有该帐户的 wifi 隧道以控制您所在位置的远程 wifi 设备，可能使用针对该设备的网络摄像头并可由 Apple 查看。

*   包括适当的联系信息，以便 Apple 可能希望您向他们发送样品设备进行评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T02:11:16.097

我有同样的问题：应用程序与之通信的第三方设备。没有设备，应用程序将毫无用处。一屏一标。我将应用程序提交给商店，解释了它的作用和通信方式。

该应用程序在 5 天后获得批准，Apple 没有提出任何问题。

# ios - iOS 上 UIImage 的运动模糊效果

> ID：14681962
> 
> 赞同：2
> 
> 时间：2013-02-04T07:14:19.223
> 
> 标签：ios, xcode, uiimage

有没有办法在 UIImage 上获得运动模糊效果？我尝试了 GPUImage、Filtrr 和 iOS Core Image，但所有这些都有常规模糊 - 没有运动模糊。

我也试过 UIImage-DSP 但它的运动模糊几乎不可见。我需要更强大的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-12T19:29:25.483

正如我在存储库中评论的那样，我只是在 GPUImage 中添加了运动和缩放模糊。这些是 GPUImageMotionBlurFilter 和 GPUImageZoomBlurFilter 类。这是缩放模糊的示例：

![GPUImage缩放模糊](../Images/0e29f19d410a83b37006d33ec3db06ec.png)

对于运动模糊，我在单个方向上进行 9-hit 高斯模糊。这是使用以下顶点和片段着色器实现的：

顶点：

```
 attribute vec4 position;
 attribute vec4 inputTextureCoordinate;

 uniform highp vec2 directionalTexelStep;

 varying vec2 textureCoordinate;
 varying vec2 oneStepBackTextureCoordinate;
 varying vec2 twoStepsBackTextureCoordinate;
 varying vec2 threeStepsBackTextureCoordinate;
 varying vec2 fourStepsBackTextureCoordinate;
 varying vec2 oneStepForwardTextureCoordinate;
 varying vec2 twoStepsForwardTextureCoordinate;
 varying vec2 threeStepsForwardTextureCoordinate;
 varying vec2 fourStepsForwardTextureCoordinate;

 void main()
 {
     gl_Position = position;

     textureCoordinate = inputTextureCoordinate.xy;
     oneStepBackTextureCoordinate = inputTextureCoordinate.xy - directionalTexelStep;
     twoStepsBackTextureCoordinate = inputTextureCoordinate.xy - 2.0 * directionalTexelStep;
     threeStepsBackTextureCoordinate = inputTextureCoordinate.xy - 3.0 * directionalTexelStep;
     fourStepsBackTextureCoordinate = inputTextureCoordinate.xy - 4.0 * directionalTexelStep;
     oneStepForwardTextureCoordinate = inputTextureCoordinate.xy + directionalTexelStep;
     twoStepsForwardTextureCoordinate = inputTextureCoordinate.xy + 2.0 * directionalTexelStep;
     threeStepsForwardTextureCoordinate = inputTextureCoordinate.xy + 3.0 * directionalTexelStep;
     fourStepsForwardTextureCoordinate = inputTextureCoordinate.xy + 4.0 * directionalTexelStep;
 } 
```

分段：

```
 precision highp float;

 uniform sampler2D inputImageTexture;

 varying vec2 textureCoordinate;
 varying vec2 oneStepBackTextureCoordinate;
 varying vec2 twoStepsBackTextureCoordinate;
 varying vec2 threeStepsBackTextureCoordinate;
 varying vec2 fourStepsBackTextureCoordinate;
 varying vec2 oneStepForwardTextureCoordinate;
 varying vec2 twoStepsForwardTextureCoordinate;
 varying vec2 threeStepsForwardTextureCoordinate;
 varying vec2 fourStepsForwardTextureCoordinate;

 void main()
 {
     lowp vec4 fragmentColor = texture2D(inputImageTexture, textureCoordinate) * 0.18;
     fragmentColor += texture2D(inputImageTexture, oneStepBackTextureCoordinate) * 0.15;
     fragmentColor += texture2D(inputImageTexture, twoStepsBackTextureCoordinate) *  0.12;
     fragmentColor += texture2D(inputImageTexture, threeStepsBackTextureCoordinate) * 0.09;
     fragmentColor += texture2D(inputImageTexture, fourStepsBackTextureCoordinate) * 0.05;
     fragmentColor += texture2D(inputImageTexture, oneStepForwardTextureCoordinate) * 0.15;
     fragmentColor += texture2D(inputImageTexture, twoStepsForwardTextureCoordinate) *  0.12;
     fragmentColor += texture2D(inputImageTexture, threeStepsForwardTextureCoordinate) * 0.09;
     fragmentColor += texture2D(inputImageTexture, fourStepsForwardTextureCoordinate) * 0.05;

     gl_FragColor = fragmentColor;
 } 
```

作为优化，我通过使用角度、模糊大小和图像尺寸来计算片段着色器之外的纹理样本之间的步长。然后将其传递到顶点着色器，以便我可以在那里计算纹理采样位置并在片段着色器中对它们进行插值。这避免了 iOS 设备上的依赖纹理读取。

缩放模糊要慢得多，因为我仍然在片段着色器中进行这些计算。毫无疑问，有一种方法可以优化它，但我还没有尝试过。缩放模糊使用 9-hit 高斯模糊，其中方向和每个样本的偏移距离随像素位置与模糊中心的关系而变化。

它使用以下片段着色器（和标准的直通顶点着色器）：

```
 varying highp vec2 textureCoordinate;

 uniform sampler2D inputImageTexture;

 uniform highp vec2 blurCenter;
 uniform highp float blurSize;

 void main()
 {
     // TODO: Do a more intelligent scaling based on resolution here
     highp vec2 samplingOffset = 1.0/100.0 * (blurCenter - textureCoordinate) * blurSize;

     lowp vec4 fragmentColor = texture2D(inputImageTexture, textureCoordinate) * 0.18;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate + samplingOffset) * 0.15;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate + (2.0 * samplingOffset)) *  0.12;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate + (3.0 * samplingOffset)) * 0.09;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate + (4.0 * samplingOffset)) * 0.05;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate - samplingOffset) * 0.15;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate - (2.0 * samplingOffset)) *  0.12;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate - (3.0 * samplingOffset)) * 0.09;
     fragmentColor += texture2D(inputImageTexture, textureCoordinate - (4.0 * samplingOffset)) * 0.05;

     gl_FragColor = fragmentColor;
 } 
```

请注意，出于性能原因，这两种模糊都被硬编码为 9 个样本。这意味着在较大的模糊尺寸下，您将开始从此处的有限样本中看到伪影。对于较大的模糊，您需要多次运行这些过滤器或扩展它们以支持更多高斯样本。但是，由于 iOS 设备上的纹理采样带宽有限，更多的样本会导致渲染时间更慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T08:19:01.117

CoreImage 有一个运动模糊滤镜。

它被称为 CIMotionBlur ... [http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIMotionBlur](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIMotionBlur)

# perl - Perl - 从十六进制的某些偏移量中提取数据

> ID：14681963
> 
> 赞同：1
> 
> 时间：2013-02-04T07:14:27.827
> 
> 标签：perl, seek

好的，这次我实际上已经付出了一些努力来尝试实现这一目标:)

我有这个代码：

```
#! /usr/bin/perl

open(my $fin, '<', "./file1.bin") or die "Cannot open file1.bin: $!";
binmode($fin);
open(my $fout, '>>', "./file2.bin") or die "Cannot create file2.bin: $!";
binmode($fout);

seek($fin,0x760, SEEK_CUR);
read($fin, 0x400,)
print ("$fin, $fout);
close($fout); 
```

我不知道你是否能看到我想要做什么，但我试图寻找偏移量 0x760，然后从偏移量 0x760 读取，然后从 file1.bin 读取一大块字节（0x400）并将该块字节打印到 file2。斌

所以我想这是我想要做的事情的流程：

```
open file1.bin for reading in binmode
open file2.bin for writing in binmode
seek to offset 0x760 in file1.bin
read a chunk of data (0x400) from file1.bin
write the chunk of data (0x400) to file2.bin 
```

希望您了解我要完成的工作:)，并且任何输入都具有教育意义：)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T07:36:32.197

您忘记启用警告（这会告诉您“SEEK_CUR”被解释为字符串，因为您尚未导入常量）。

阅读文档以供阅读；您需要为读取的数据提供一个变量。

还要阅读印刷品；它的语法是`print FILEHANDLE LIST`; （其中 FILEHANDLE 将是 $fout 并列出您读入的变量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:36:43.810

您的代码中有一个错字：

```
print ("$fin, $fout); 
```

应该替换为（在打开和绑定模式之后）

```
my $buffer = '';
sysseek $fin, 0x760, SEEK_SET;
sysread $fin, $buffer, 0x400;
syswrite $fout, $buffer;
close $fin;
close $fout; 
```

# ios - 启用 ARC 时 NSXMLParser 抛出 EXC_BAD_ACCESS

> ID：14681966
> 
> 赞同：2
> 
> 时间：2013-02-04T07:14:39.353
> 
> 标签：ios, objective-c, automatic-ref-counting, nsxmlparser

iOS初学者在这里。我正在尝试为新闻网站创建一个 RSS 阅读器，RSS 解析器处于正常工作状态，但如果它是在启用 ARC 的情况下编译的，它会给出异常 EXC_BAD_ACCESS (code=2 address=0xc)。

这是我调用解析器的方式：（在我的视图控制器中）

```
NSMutableArray* articleListMainPage;

- (void)viewDidLoad
{
    NSURL *mainFeed = [[NSURL alloc]initWithString:@"http://my.domain.com/rss.xml"];
    NSXMLParser *nsXmlParser = [[NSXMLParser alloc] initWithContentsOfURL:mainFeed];
    NewsParser *myparser = [[NewsParser alloc] initNewsParser];
    [nsXmlParser setDelegate:myparser];

    if ([nsXmlParser parse]) {
        NSLog(@"Parsed article count : %i", [myparser.articles count]);
        articleListMainPage = [myparser.articles copy];
    } else {
        NSLog(@"Error parsing document!");
    }
    nsXmlParser = nil;
    mainFeed = nil;
    myparser = nil; // This line throws the exception.

    [super viewDidLoad];
} 
```

这是解析器本身：

```
// NewsParser.m
#import "NewsParser.h"
#import "RSSEntry.h"

@implementation NewsParser

@synthesize article, articles, currValue;

- (NewsParser *) initNewsParser
{
    if (self = [super init]) return self; else return nil;
}

- (void)parser:(NSXMLParser *)parser
    didStartElement:(NSString *)elementName
    namespaceURI:(NSString *)namespaceURI
    qualifiedName:(NSString *)qualifiedName
    attributes:(NSDictionary *)attributeDict {

    if ([elementName isEqualToString:@"channel"]) {
        self.articles = [[NSMutableArray alloc] init];
    }
    if ([elementName isEqualToString:@"item"]) {
        self.article = [[ArticleEntry alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (!currValue) {
        self.currValue = [[NSMutableString alloc] initWithString:string];
    } else {
        [self.currValue appendString:string];
    }
}

- (void)parser:(NSXMLParser *)parser
    didEndElement:(NSString *)elementName
     namespaceURI:(NSString *)namespaceURI
    qualifiedName:(NSString *)qName {

    if ([elementName isEqualToString:@"channel"]) {
        return;
    }

    if ([elementName isEqualToString:@"item"]) {
        [self.articles addObject:self.article];
        self.article = nil;
    } else {
        if ([[NSArray arrayWithObjects:@"title",@"link",@"description",nil] containsObject:elementName])
             [self.article setValue:self.currValue forKey:elementName];
    }
    self.currValue = nil;
}

@end

//NewsParser.h

#import <Foundation/Foundation.h>
#import "RSSEntry.h"

@interface NewsParser : NSXMLParser <NSXMLParserDelegate> {
    NSMutableString *currValue;
    NSMutableArray *articles;
    ArticleEntry *article;
}
- (NewsParser *) initNewsParser;
@property (nonatomic,retain) ArticleEntry *article;
@property (nonatomic,retain) NSMutableArray *articles;
@property (nonatomic,retain) NSMutableString *currValue;
@end 
```

.. 以及我用于存储 RSS 条目的类。

```
//RSSEntry.h
#import <Foundation/Foundation.h>

@interface ArticleEntry : NSObject {
    NSString *title;
    NSString *link;
    NSString *description;
}

@property (nonatomic, retain) NSString *title;
@property (nonatomic, retain) NSString *link;
@property (nonatomic, retain) NSString *description;

- (id)initNewArticle:(NSString*)_title url:(NSString*)_link description:(NSString*)_desc;

@end

//RSSEntry.m

#import "RSSEntry.h"

@implementation ArticleEntry
@synthesize title,link,description;
- (id)initNewArticle:(NSString *)_title url:(NSString *)_link description:(NSString *)_desc
{
    if ((self = [super init])) {
        title = [_title copy];
        link = [_link copy];
        description = [_desc copy];
        return self;
    }
    else return nil;
}
@end 
```

就像我说的，没有 ARC 也可以正常工作，但我想知道我是否在代码中做了我不应该做的事情（例如保留我不应该做的事情或不正确地释放某些东西/过度释放某些东西）。

谢谢你的时间..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:28:37.070

所以这里的一个问题是您将 NewsParser 声明为 NSXMLParser 的子类，它不应该是。它应该是 NSObject 的子类（或其他合适的东西）

所以在 NewsParser.h 中，试试这个：

```
@interface NewsParser : NSObject <NSXMLParserDelegate> 
```

顺便说一句，如果没有 ARC，你确实有内存泄漏。如果您打算在没有 ARC 的情况下再次编译此代码，分析器可以帮助您解决这些问题。无论有没有 ARC，这里都没有垃圾收集器（听起来好像你指望一个？）

# php - 如何通过.apk中的java脚本调用php

> ID：14681968
> 
> 赞同：0
> 
> 时间：2013-02-04T07:14:41.903
> 
> 标签：php, javascript, android, webview

如何在apk中通过javascript调用php，我使用的是webwiew和html5 javascript和jquery

我想从 php 中检索 json 数据

```
function ajaxFunction() {
    DefaultHttpClient httpclient = new DefaultHttpClient();
    httpclient.addRequestInterceptor(new RequestAcceptEncoding());
    httpclient.addResponseInterceptor(new ResponseContentEncoding());
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost("http://www.smartcloudinfo.com/game/RainbowTreasure(IPAD)/RT_IPADV1.0.40/json.php");
        try {
            // Add your data
            List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
            nameValuePairs.add(new BasicNameValuePair("line_value",20));
            nameValuePairs.add(new BasicNameValuePair("stake_value",0.2));
            nameValuePairs.add(new BasicNameValuePair("balance_value",updated_Balance));  
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            // Execute HTTP Post Request
            HttpResponse response = httpclient.execute(httppost);
             alert("found"+HttpResponse response);
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
        } catch (IOException e) {
            // TODO Auto-generated catch block
        }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:16:29.823

您需要使用[ajax](http://api.jquery.com/jQuery.ajax/)。Jquery 具有进行 ajax 调用的内置功能。特别是如果你想在[json](http://api.jquery.com/jQuery.getJSON/)中发布你的答案，jquery 中也有一个调用来做这些事情。

这是来自 jquery 页面的一个简单示例：

```
$.ajax({
  url: "test.html",
  context: document.body
}).done(function() {
  $(this).addClass("done");
}); 
```

或者对于 JSON：

```
$.getJSON("test.js", { name: "John", time: "2pm" }, function(json) {
    alert("JSON Data: " + json.users[3].name);
    }); 
```

# spring - spring3 jpa2.0 tomcat错误java.lang.IllegalArgumentException：对象：com.web.emscs.entity.Student@1edf83b不是已知的实体类型

> ID：14681969
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:14:43.683
> 
> 标签：spring, jsf, jpa, tomcat7

我正在尝试使用 eclipselink jpa 配置 spring，但在 UI 中给出一些数据并持久保存到数据库（oracle 10g）后，我面临以下错误。

```
java.lang.IllegalArgumentException: Object: com.web.emscs.entity.Student@1edf83b is not a known entity type.
    at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.registerNewObjectForPersist(UnitOfWorkImpl.java:4128)
    at org.eclipse.persistence.internal.jpa.EntityManagerImpl.persist(EntityManagerImpl.java:406)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:358)
    at $Proxy16.persist(Unknown Source)
    at com.web.daoimpl.StudentDAOImpl.saveStudent(StudentDAOImpl.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy9.saveStudent(Unknown Source)
    at com.web.serviceimpl.StudentServiceImpl.saveStudent(StudentServiceImpl.java:29)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:310)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    at $Proxy10.saveStudent(Unknown Source)
    at com.web.controller.EquipmentController.saveEquipment(EquipmentController.java:75)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:264)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at javax.faces.event.MethodExpressionActionListener.processAction(MethodExpressionActionListener.java:153)
    at javax.faces.event.ActionEvent.processListener(ActionEvent.java:88)
    at javax.faces.component.UIComponentBase.broadcast(UIComponentBase.java:769)
    at javax.faces.component.UICommand.broadcast(UICommand.java:300)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

这是我的来源，

设备控制器.java

```
package com.web.emscs.controller;

import java.io.Serializable;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.SessionScoped;

import com.web.emscs.entity.Student;
import com.web.emscs.service.StudentService;

@ManagedBean
@SessionScoped
public class EquipmentController implements Serializable
{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    @ManagedProperty(value="#{StudentService}")
    StudentService studentService;
    private String sno;
    private String name;
    private String city;

    public String getSno() {
        return sno;
    }
    public void setSno(String sno) {
        this.sno = sno;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getCity() {
        return city;
    }
    public void setCity(String city) {
        this.city = city;
    }
    public StudentService getStudentService() {
        return studentService;
    }
    public void setStudentService(StudentService studentService) {
        this.studentService = studentService;
    }
    public void saveEquipment()
    {
        Student s=new Student();
        s.setSno(sno);
        s.setName(name);
        s.setCity(city);
        try
        {
            getStudentService().saveStudent(s);
            System.out.println("Saved");
        }
        catch(Exception e)
        {
            System.out.println(e);

        }
    }

} 
```

学生.java

```
package com.web.emscs.entity;

import java.io.Serializable;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
public class Student implements Serializable 
{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    @Id
    private String sno;
    private String name;
    private String city;
    public String getSno() {
        return sno;
    }
    public void setSno(String sno) {
        this.sno = sno;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getCity() {
        return city;
    }
    public void setCity(String city) 
    {
        this.city = city;
    }

} 
```

StudentDAOImpl.java

```
package com.web.emscs.daoimpl;

import javax.persistence.EntityManagerFactory;
import org.springframework.transaction.annotation.Transactional;
import com.web.emscs.dao.StudentDAO;
import com.web.emscs.entity.Student;

@Transactional
public class StudentDAOImpl implements StudentDAO
{
    private EntityManagerFactory entityManagerFactory;

    public EntityManagerFactory getEntityManagerFactory() {
        return entityManagerFactory;
    }

    public void setEntityManagerFactory(EntityManagerFactory entityManagerFactory) {
        this.entityManagerFactory = entityManagerFactory;
    }

    @Override
    public void saveStudent(Student student) {
        // TODO Auto-generated method stub
        getEmf().createEntityManager().persist(student);
    }
} 
```

StudentServiceImpl.java

```
package com.web.emscs.serviceimpl;

import com.web.emscs.dao.StudentDAO;
import com.web.emscs.entity.Student;
import com.web.emscs.service.StudentService;

public class StudentServiceImpl implements StudentService 
{
    StudentDAO studentDAO;

    public StudentDAO getStudentDAO() {
        return studentDAO;
    }

    public void setStudentDAO(StudentDAO studentDAO) {
        this.studentDAO = studentDAO;
    }

    @Override
    public void saveStudent(Student student) {
        // TODO Auto-generated method stub
        getStudentDAO().saveStudent(student);
    }

} 
```

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:tx="http://www.springframework.org/schema/tx"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-2.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-2.0.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context.xsd
       http://jax-ws.dev.java.net/spring/core
       http://jax-ws.dev.java.net/spring/core.xsd
       http://jax-ws.dev.java.net/spring/servlet
       http://jax-ws.dev.java.net/spring/servlet.xsd ">

    <!-- Database Configuration -->
    <tx:annotation-driven/>
    <import resource="springConfig.xml"/>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceUnitName" value="EMCSSpring"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="loadTimeWeaver">
            <bean
                class="org.springframework.instrument.classloading.SimpleLoadTimeWeaver" />
        </property>
    <property name="jpaVendorAdapter">
<bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
    <property name="showSql" value="true"/>
    <property name="generateDdl" value="false"/>
    <property name="databasePlatform" value="org.eclipse.persistence.platform.database.OraclePlatform"/>

    </bean>

</property>
</bean>
<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
<property name="entityManagerFactory" ref="entityManagerFactory" />
    <property name="dataSource" ref="dataSource"/>
    </bean>
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
    <property name="url" value="jdbc:oracle:thin:@localhost:1521:xe"/>
    <property name="username" value="automobile"/>
    <property name="password" value="mobile"/>
    </bean>
    <bean id="persistenceAnnotation" class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

</beans> 
```

springConfig.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

<bean id="Student" class="com.web.emscs.entity.Student"></bean>

    <bean id="StudentService" class="com.web.emscs.serviceimpl.StudentServiceImpl">
        <property name="studentDAO" ref="StudentDAO" />
    </bean>
    <bean id="StudentDAO" class="com.web.emscs.daoimpl.StudentDAOImpl">
        <property name="entityManagerFactory" ref="entityManagerFactory"></property>
    </bean>

</beans> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="EMCSSpring">
    <class>com.web.emscs.entity.Student</class>
    </persistence-unit>

</persistence> 
```

桌子

```
CREATE TABLE  "STUDENT" 
   (    "SNO" VARCHAR2(20), 
    "NAME" VARCHAR2(50), 
    "CITY" VARCHAR2(50), 
     CONSTRAINT "STUDENT_PK" PRIMARY KEY ("SNO") ENABLE
   ) 
```

让我来解决这个问题。我对这段代码做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T21:40:01.527

**stacktrace (com.web.entity.Student) 中 Student 类的包与源代码 ( com.web.emscs** .entity.Student) 不匹配。这意味着运行的软件不是从提供的源代码编译而来的。

在显示的代码命名是统一的（`com.web.emscs.entity.Student`），所以执行新编译的版本将解决问题。

# boost - 将“\\u1234”转换为“\u1234”

> ID：14681970
> 
> 赞同：0
> 
> 时间：2013-02-04T07:14:52.300
> 
> 标签：boost, unicode, utf-8, fstream

我有一个使用 boost 的 regex_search() 从 html 页面检索的字符串。然而不幸的是，页面中的日文字符被写为 \u 代码，并且这些被 regex_search 解释为字符串中的普通字符。

所以，我的问题是，如何将这些代码转换为普通的 Unicode 文本？（显然是UTF-8）

这是 fstream 完全不考虑 UTF-8 的一个基本问题。看起来 boost 有自己的 fstream 实现，但改成它对我的程序没有影响，而且我找不到任何额外的设置来配置 boost 的 fstream 以使用 UTF-8（尽管今天是我工作的第一天有了提升，我可能会错过它）。

最后一点：我在 linux 上运行它，但我肯定会喜欢一个可移植的解决方案，而不是特定于系统的解决方案。

谢谢大家，我真的很感激帮助：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:25:15.033

`fstream`是一个仅限窄字符的流（它是一个 typedef to `basic_fstream<char>`）。`std::wfstream`将是您正在寻找的类型，尽管要完美地移植到例如 Windows，您可能必须引入 C++11 依赖项（Windows 没有 Unicode 语言环境，但支持 C+ 引入的与语言环境无关的 Unicode 转换+11\. Linux 上的 GCC 不支持新的 Unicode 转换，但有很多 Unicode 语言环境可供选择）或依赖 boost.locale。

你的步骤是：

1.  解析字符串以获取代码点的十六进制值
2.  将它们存储为宽字符。
3.  将它们写入 a `std::wofstream`（或先转换为 UTF-8，然后写入`std::ofstream`）

为了说明最后一步：

```
#include <fstream>
#include <locale>
int main()
{
    std::locale::global(std::locale("en_US.utf8")); // any utf8 works
    std::wofstream f("test.txt");
    f.imbue(std::locale());

    f << wchar_t(0x65e5) << wchar_t(0x672c) << wchar_t(0x8a9e) << '\n';
} 
```

生成一个文件（在 Linux 上），其中包含`e6 97 a5 e6 9c ac e8 aa 9e 0a`

# c# - 更适合我的任务：后台工作者还是线程池？

> ID：14681974
> 
> 赞同：3
> 
> 时间：2013-02-04T07:15:12.753
> 
> 标签：c#, asp.net, iis, backgroundworker, threadpool

我有一个简单的 Web 应用程序模块，它基本上接受`PageLoad`来自移动客户端应用程序的保存 zip 文件的请求。

现在，我要做的是解压缩文件并读取其中的文件并进一步处理它......包括将条目输入数据库。

**更新：** zip 文件及其内容的大小将相当小，因此服务器不应承受太多负载。

**更新 2：**我刚刚阅读了[IIS 何时对请求进行排队](https://stackoverflow.com/questions/10929922/asp-net-iis-when-are-requests-queued)（在全局/应用程序级别）。那么这是否意味着我不需要实现复杂的请求处理机制并且 IIS 可以自己处理应用程序？

**更新 3：**我正在寻找卸载下载 zip 的处理，不仅是为了最大限度地减少开销（在性能方面），而且也是为了避免`table-locking`处理文件和记录更新到同一个表中的问题. 在多个设备请求页面和后台任务处理数据库并行更新的情况下会导致异常。

到目前为止，我已经将注意力集中在两个解决方案上：

*   实现并发/消息队列
*   将文件处理代码实现到一个单独的工具中，并在服务器上安排一个作业来检查未处理的文件并串行处理它们。

倾向于`Queuing Mechanism`我将尝试实现的是因为它似乎不太依赖于配置。v/s 在服务器端手动配置作业/计划。

那么，你们为此目的向我推荐什么？

此外，在请求并保存在服务器端的 zip 文件后，客户端和服务器端的连接在这样做之后被释放。不想给我的 IIS 带来负担。

想象一下有几百个客户同时请求该页面..

实际上，我之前都没有使用过它们，因此任何示例或操作方法都会受到更多赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T07:51:08.960

我推荐 TPL 和 Rx 扩展：您将解压缩的文件列表设置为可观察的集合，并为每个项目异步启动一个新任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T07:21:43.687

我建议一个队列系统。

当您收到文件时，您会将路径保存到线程同步队列中。同时，后台工作人员（或最好是另一台机器）将检查此队列中的新文件并将条目出列以处理它。

这样您就不会启动未知数量的线程（每个 zip 文件），并且可以在一个位置处理 zip 文件。这样，当负载过重时，您还可以更轻松地将邮政编码处理代码移动到另一台机器上。您只需要访问一个公共队列。

最简单的可能是将静态对象`Queue`与对象一起使用`lock`。它是最容易实现的，不需要外部资源。但这会导致您的应用程序回收时队列丢失。

您提到丢失 zip 文件不是一种选择，如果您不想依赖外部资源，那么这种方法不是最好的。根据您的负载，可能值得利用外部资源——这意味着将 zip 文件上传到另一台机器上的公共存储，并将消息添加到另一台机器上的队列中。

这是一个本地队列的示例：

```
ConcurrentQueue<string> queue = new ConcurrentQueue<string>();

void GotNewZip(string pathToZip)
{
    queue.Enqueue(pathToZip); // Added a new work item to the queue
}

void MethodCalledByWorker()
{
    while (true)
    {
        if (queue.IsEmpty)
        {
            // Supposedly no work to be done, wait a few seconds and check again (new iteration)
            Thread.Sleep(TimeSpan.FromSeconds(5));
            continue;
        }

        string pathToZip;
        if (queue.TryDequeue(out pathToZip)) // If TryDeqeue returns false, another thread dequeue the last element already
        {
            HandleZipFile(pathToZip);
        }
    }
} 
```

这是一个非常粗略的例子。每当一个 zip 到达时，您就将路径添加到队列中。同时，一个后台工作人员（或多个，示例的线程安全）将一个接一个地处理一个 zip，从队列中获取路径。zip 文件将按照它们到达的顺序进行处理。

您需要确保您的应用程序不会同时回收。但是你在本地机器上拥有的所有资源就是这种情况，当你的机器崩溃时它们会丢失。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T01:09:37.243

我相信你过早地优化了。

您提到了表锁定-您使用的是哪种数据库？如果您添加新行或更新现有行，大多数配置中的大多数现代数据库将：

1.  使用行级锁定；和
2.  足够快，而无需担心锁定。

我建议从一个简单的方法开始

```
 //Unzip
        //Do work
        //Save results to database 
```

并得到一些证明它太慢了。

# python-2.7 - 如何从 spinctrl 获取值并将其发送到 python 脚本中的 .exe 文件

> ID：14681976
> 
> 赞同：-1
> 
> 时间：2013-02-04T07:15:30.357
> 
> 标签：python-2.7, wxpython, subprocess, wxwidgets

我是 python 和 wxpython 的新手，我正在使用 python 和用户界面 wxpython 制作一个自动化工具，我使用 shell script.shell 脚本可以从 python 调用。但现在我遇到了 spinctrl 值的问题。每当该 spinctrl 值发生变化时，它必须将该值发送到一个用 BASH 编写的 txt.exe 文件中。{如果我们在命令行中运行 txt.exe 文件，它将要求输入数字，然后每当我们按 Enter 时它都会接受该值} . 但我无法理解每当我在 GUI 中按下“确定”按钮时如何将值从 spinctrl 发送到 txt.exe。请分享您的想法和知识。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T14:37:42.217

要在 Python 中调用可执行文件，您需要查看 Python 的子进程模块：[http ://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

如果您的 exe 不接受参数，那么它将无法工作。如果您使用 PyInstaller 或 py2Exe 之类的东西自己创建了 exe，那么您需要制作它以便您的应用程序可以接受参数。最简单的方法是使用 sys.argv，但 Python 中也有 optparse 和 argparse 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T13:49:49.503

我对你的概念没有很好的感觉。这很难说，但我怀疑你会从与经验丰富的人谈论你想要实现的目标以及如何最好地完成它中受益。

然而，为了让你开始你当前的道路，我认为你应该看看 wxExecute ( [http://docs.wxwidgets.org/2.8/wx_processfunctions.html#wxexecute](http://docs.wxwidgets.org/2.8/wx_processfunctions.html#wxexecute) )。这将允许您从 GUI 内部运行 txt.exe 实用程序。

wxExecute 是一个 wxWidgets 实用程序。如果您在 python 中工作，那么将有一种更直接的方法来使用 python 实用程序来执行此操作 - 其他人将不得不就此提出建议。为了清楚起见，我建议您编辑您的问题，以便 python 专家可以帮助您。

# sql - 进行最少的 SQL 查询以获取相关对象

> ID：14681977
> 
> 赞同：1
> 
> 时间：2013-02-04T07:15:36.753
> 
> 标签：sql, database, django

我有一个方法定义如下：

```
def get_featured_books(cats=0):

"""  
This method would return a list of featured books
"""

fbooks = list()
categories = models.Category.objects.annotate( bookcount=Count('book')).order_by('bookcount')[:cats].reverse()    
for item in categories:
    fbooks.append(item.book_set.latest('posted_date'))
return fbooks 
```

我在主页视图上使用上述方法显示精选书籍列表。在模板中，我使用以下标签：

```
{% for book in featured %}
    <h2>{{ book.title }}({{ book.category}})</h2>
    <span class="authors">{{book.authors.all|join:','}}</span>
{% endfor %} 
```

但是这整个概念提出了很多疑问。例如，如果我想展示 10 本特色书籍：

```
categories = models.Category.objects.annotate( bookcount=Count('book')).order_by('bookcount')[:cats].reverse() 
```

将进行一次查询。

```
for item in categories:
        fbooks.append(item.book_set.latest('posted_date')) 
```

将进行 10 次查询。

在模板中`{{ book.category}}`，`{{ book.authors.all }}`每本书都会进行 1 次查询，因此在我的场景中，上述两个标签将进行 20 次查询。这使得它总共有 30 个查询*（只是为了显示 10 条记录的列表）*。当然，我将在主页上显示其他内容，这些内容将进行额外的查询。

问题是我怎样才能减少（最低）否。查询以获取上述信息。通常的做法是什么？

*（PS：我知道缓存，我知道信息可以被缓存，但我在这里的目的是学习如何进行有效的查询。）*

### 更新：

正如[KrzysiekSzularz](https://stackoverflow.com/users/1085511/krzysiek-szularz)建议的那样，我尝试使用`select_related`和`prefetch_related`如下，但 django 调试工具栏仍然显示它进行 32 个查询。

```
def get_featured_books(cats=0):

"""  
This method would return a list of featured books
"""

fbooks = list()
categories = models.Category.objects.select_related().annotate( bookcount=Count('book')).order_by('bookcount')[:cats].reverse()    
for item in categories:
    fbooks.append(item.book_set.prefetch_related('category').latest('posted_date'))
return fbooks 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:21:52.220

尽量减少查询数量的最佳方法是自己创建 SQL 语句并使用 SQLCommand 和 SQLDataAdapter 以老式方式执行它们。这样，您可以将所有数据堆叠到一个查询中，该查询返回多个可用于不同视图的表。

更好的是 - 创建一个将返回所有需要的数据的存储过程。SQL Server 可以优化/保存存储过程的执行计划，使其更加高效。

如果您真的想坚持使用 LINQ，那么不幸的是，这可能无济于事。

# php - 从一级作用域导入 PHP 变量

> ID：14681978
> 
> 赞同：2
> 
> 时间：2013-02-04T07:15:36.643
> 
> 标签：php

我想要`array_filter`一个函数内的数组：

```
function filter($array, $check){
    return array_filter($array,function($val){return $val==$check;});
} 
```

注意：这是一个简化的场景。

这不起作用，因为`$check`未在过滤器函数中定义，但我不能使用`global $check;`两者，因为它无法从 ONE 级别导入变量。我也不能把它作为论据。

任何解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T07:26:14.110

您可以使用以下`use`关键字：

```
function filter($array, $check) {
    return array_filter($array, function($value) use ($check) {
        return ($value == $check);
    });
} 
```

`global`当您想将外部变量带入普通函数时，它与使用关键字本质上相同。您需要使用`use`关键字而不是 的原因`global`与[匿名函数](http://www.php.net/manual/en/functions.anonymous.php)的工作方式有关。简而言之，它们变成了[Closure 类](http://www.php.net/manual/en/class.closure.php)的对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T07:26:02.303

```
function filter($array, $check = $check_global){
    return array_filter($array,function($val){return $val == $check;});
} 
```

# gwt - 如何在 GWT 中使用 org.apache.commons？

> ID：14681991
> 
> 赞同：4
> 
> 时间：2013-02-04T07:16:50.337
> 
> 标签：gwt

我正在使用 GWT 2.5.0。我想在 org.apache.commons 中使用一些方法。GWT 还需要源代码来添加外部 jar。所以我下载了源文件和类文件并将它们合并到 jar 中。对于某些方法，它没有给出任何错误，但是 org.apache 的某些类引用了这个包之外的其他类。所以它给出了以下错误

```
[ERROR] [rmchecking] - Errors in 'org/apache/commons/lang/StringUtils.java'
[ERROR] [rmchecking] - Line 237: The method isWhitespace(char) is undefined for the type Character 
```

gwt 中是否有任何包提供与此 org.apache.commons 相同的功能？或者如何在 gwt 中使用这个相同的包？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T08:32:06.527

您**不能**使用任何与 GWT 不兼容的第三方 jar。示例**apache-commons**。

**提示**- 他们没有 .gwt.xml 文件告诉 GWT 编译器他们有 GWT 兼容代码。

但是，您可以从 apache common 分叉它并使其成为您自己的 gwt 兼容库。示例 - [http://code.google.com/p/gwt-commons-lang/](http://code.google.com/p/gwt-commons-lang/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T08:12:30.880

这是不可能的，因为 StringUtils 基于`java`正则表达式，而 GWT 正则表达式模拟器基于`javascript`. 你需要自己写

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-12T02:06:23.577

我同意 SSR，但如果涉及一些混乱的调试，我不会感到惊讶。值得一提的是，不幸的是， [gwt-commons](http://sourceforge.net/projects/gwtcommons/) 和 google guava 仍处于 alpha 阶段。我使用 google Guava，其目的与 apache commons 相似。它甚至有一些 apache commons 不喜欢 Optionals 的特性。Guava 有一个由谷歌创建的功能齐全的 gwt 版本，我在自己的项目中使用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-06T11:15:15.927

我已经设法将大部分 Apache Commons Math 3.6.1 转换为使用 GWT 2.8.0 编译，请参阅： [https ://github.com/murkle/commons-math/issues/1](https://github.com/murkle/commons-math/issues/1)

# sql - 从表中删除重复值

> ID：14681992
> 
> 赞同：1
> 
> 时间：2013-02-04T07:16:55.380
> 
> 标签：sql, plsql

我有一个 PL/SQL 选择查询，例如，

```
select 
    a.sgm,
    b.numbr 
from tbl1 a, tbl2 b 
where b.itemId = a.itemId 
    and b.orgId = a.orgId 
    and a.srvCode = 'F' 
    and a.nbrCode <> 1 
    and rownum <= 7 
```

现在它检索像，

```
sgm-|-numbr 
-----------
abc-|-123
abc-|-678
abc-|-78
abc-|-099
bcd-|-153
bcd-|-123
bcd-|-123 
```

我需要像检索一样，

```
sgm-|-numbr 
-----------
abc-|-123
bcd-|-153 
```

即，我需要删除第一列中的重复项。即`sgm`不应该重复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T07:18:36.653

```
select a.sgm,MAX(b.numbr) 
from tbl1 a, tbl2 b 
where b.itemId = a.itemId 
AND b.orgId= a.orgId 
and a.srvCode= 'F' 
and a.nbrCode <> 1 
and rownum<=7
group by sgm 
```

sgm 的值不会重复，但是会选择 number 的最大值，同样你也可以使用 Min 函数选择最小值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:24:20.123

由于您使用的是 Oracle，因此请尝试使用以下简化版本`CTE`：

```
WITH CTE as (
  SELECT sgm, numbr, 
      rownum rn
    FROM YourTable 
    )

SELECT CTE.sgm, CTE.numbr
FROM CTE
JOIN (
  SELECT sgm,  MIN(rownum) minrn
  FROM CTE
  GROUP BY sgm) t ON CTE.sgm = t.sgm AND CTE.rn = t.minrn 
```

[http://sqlfiddle.com/#!4/8d6fb/10](http://sqlfiddle.com/#!4/8d6fb/10)

您可以在上面的 CTE 中替换您的查询。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T07:31:01.573

```
SELECT a.sgm, MAX(b.numbr) 
FROM tbl1 a INNER JOIN tbl2 b 
    ON a.itemID = b.itemId
    AND a.orgId = b.orgId
WHERE a.srvCode= 'F' 
AND a.nbrCode <> 1 
AND rownum <= 7
GROUP BY a.sgm 
```

应用您选择的组功能，例如`MAX()`on `b.numbr`，并应用分组 on `a.sgm`，这应该可以满足您的需求。

建议：明确地加入，看看你的查询和我的查询之间的区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T07:41:49.063

```
Select a from  tbl a , tbl b WHERE a.userid > b..userid and
a.sgm = b.sgm; 
```

检查这个小提琴[http://sqlfiddle.com/#!2/40b8f/2](http://sqlfiddle.com/#!2/40b8f/2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T07:57:13.927

按功能使用分组

从 tbl1 a, tbl2 b 中选择 a.sgm, b.numbr 其中 b.itemId = a.itemId and b.orgId = a.orgId and a.srvCode = 'F' and a.nbrCode <> 1 and rownum <= 7按 a.sgm 分组

# firefox - Firefox 扩展为两个窗口创建不同的实例

> ID：14681994
> 
> 赞同：0
> 
> 时间：2013-02-04T07:16:56.187
> 
> 标签：firefox, firefox-addon

我创建了一个 Firefox 扩展和 chrome 扩展。在 Chrome 中，我使用的是 background.cs，所以它只会为所有 Chrome 实例加载一次，所以如果我在后台编写简单的警报，它只会显示一次警报框。

同样的事情不适用于 Firefox，当我打开新的 Firefox 窗口时，它会一直显示警告消息。

Firefox中有类似背景的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T10:19:41.007

编写一个[javascript 模块](https://developer.mozilla.org/en-US/docs/Mozilla/JavaScript_code_modules/Using?redirectlocale=en-US&redirectslug=JavaScript_code_modules%2FUsing)或切换到[附加 SDK](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/)

一个javascript模块会是这样的

```
this.EXPORTED_SYMBOLS = ["Helper"];

this Helper = {
  initialized: false,
  init: function() {
    if(this.initialized){
      return;
    }
    // code here is executed only the first time init() is called
    this.initialized = true;
  }
}; 
```

# ruby-on-rails - 在活动管理 gem 中，我想使用自定义链接编辑产品

> ID：14681996
> 
> 赞同：1
> 
> 时间：2013-02-04T07:17:00.480
> 
> 标签：ruby-on-rails, activeadmin

我想使用活动管理 gem 中的自定义链接编辑产品

我试过了

```
column do |show|
  links = ''.html_safe
  links += link_to "Edit", edit_admin_show_path(show)
  links += ' '
  links += link_to "Del", admin_show_path(show), :confirm => 'Are you sure?', :method =>     :delete
  links
end 
```

但我得到错误缺少属性：category_id 提取源（在第 1 行附近）：insert_tag renderer_for(:edit)

# android - How do I make an intent-filter for playing an MP3 file?

> ID：14681998
> 
> 赞同：1
> 
> 时间：2013-02-04T07:17:07.750
> 
> 标签：android, intentfilter, audio-player, android-music-player

I have created a music player application in Android. Now, when selecting a music file in the phone's file manager, I want my application to appear as one of the options in the "Complete action using" popup. My idea is to do this using intent filter but I have no idea what action, category, or data I need to supply to it. How do I create an intent filter for this?

I've also seen a related question here: [How do I make an intent-filter for streaming an MP3 file?](https://stackoverflow.com/q/6824192/1594522) but mine is not streaming, i am just playing music from file.

Thank you in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T07:28:29.910

Hope this Intent Filter can help you

```
<intent-filter>
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="content"/>
        <data android:scheme="file"/>
        <data android:mimeType="audio/*"/>
    </intent-filter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-30T05:22:26.817

Hope this Intent filter can help you

```
 <activity android:name="AudioPlayerActivity">
             <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:scheme="http" />
            <data android:scheme="content" />
            <data android:scheme="file" />
            <data android:mimeType="audio/*" />
            <data android:mimeType="application/ogg" />
            <data android:mimeType="application/x-ogg" />
            <data android:mimeType="application/itunes" />
        </intent-filter>
      <activity/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-26T06:32:13.910

you can do it by setting this fun to edittext change , it works fine for me :)

edittext change:

```
 binding.etSearch.addTextChangedListener(object : TextWatcher {
        override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {

        }

        override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {
            onQueryTextChange(s.toString())
        }

        override fun afterTextChanged(s: Editable?) {

        }
    }) 
```

search filter function :

```
 fun onQueryTextChange(newText: String){
    val folder = intent.getSerializableExtra("folder") as Folder
    val userInput = newText.toLowerCase()
    val myFiles = ArrayList<ModelAudio>()
    for (song in folder.musicList) {
        if (song.audioTitle!!.toLowerCase().contains(userInput)){
            myFiles.add(song)
        }
    }
    adapter.differ.submitList(myFiles)
} 
```