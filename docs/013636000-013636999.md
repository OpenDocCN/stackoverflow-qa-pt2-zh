# StackOverflow 问答 13636000-13636999

# mysql - 没有超级权限无法创建简单的 MySQL 函数

> ID：13636009
> 
> 赞同：3
> 
> 时间：2012-11-29T22:33:56.577
> 
> 标签：mysql

我一直在创建没有问题的存储过程，但是当尝试创建一个返回`COUNT()`表上函数结果的简单函数时，我得到：

> 错误 1418：此函数在其声明中没有 DETERMINISTIC、NO SQL 或 READS SQL DATA，并且启用了二进制日志记录（您*可能* 希望使用不太安全的 log_bin_trust_function_creators 变量）

由于它正在使用`COUNT()`我将其更改为`READS SQL DATA`但随后出现错误：

> 错误 1419：您没有超级权限并且启用了二进制日志记录（您*可能*希望使用不太安全的 log_bin_trust_function_creators 变量）

我不明白为什么我可以创建程序但不能创建函数。日志记录不是我真正可以访问的东西，即使我了解那个区域的问题是什么......有点谷歌搜索表明它与数据库复制或其他东西有关，但这只是一个简单的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:05:19.123

当前滚从备份恢复的数据库时，也会使用 binlog。它作为标准内置。

如果你在不同的时间执行你的函数，它将根据它计算的行数返回不同的值。binlogging 的目的是让您的系统从一个已知状态变为另一个已知状态。当你的陈述被重播时会影响结果。解决方案是如果您不依赖它，则关闭 binlogging，或者允许 DBMS 将数据更改写入 binlog，而不是用于更改数据的语句。

这一切都在[手册](http://dev.mysql.com/doc/refman/5.1/en/stored-programs-logging.html)中。

# php - 如何有效地将数组拆分为其关联键数组？

> ID：13636015
> 
> 赞同：1
> 
> 时间：2012-11-29T22:34:24.620
> 
> 标签：php, arrays, array-map

如何将单个数组拆分为它的子键？

```
$arr = array(
             0 => array(
                        'foo' => '1',
                        'bar' => 'A'
                       ),
             1 => array(
                        'foo' => '2',
                        'bar' => 'B'
                       ),
             2 => array(
                        'foo' => '3',
                        'bar' => 'C'
                       )
            ); 
```

分别返回 foo 和 bar 数组的最有效方法是什么？

我需要到达这里：

```
$foo = array('1','2','3');
$bar = array('A','B','C'); 
```

我希望有一种聪明的方法可以使用`array_map`或类似的方法来做到这一点。有任何想法吗？

还是我必须循环并以这种方式构建每个数组？就像是：

```
foreach ($arr as $v) {
    $foo[] = $v['foo'];
    $bar[] = $v['bar'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:45:27.850

幸运的是，我今天早些时候需要做几乎完全相同的事情。您可以`array_map()`结合使用`array_shift()`：

```
$foo = array_map('array_shift', &$arr);
$bar = array_map('array_shift', &$arr); 
```

注意`$arr`是通过引用传递的！如果你不这样做，那么每次它都会返回`$arr[<index>]['foo']`. 但是，再次因为引用 - 您将无法重用`$arr`，所以如果您需要这样做 - 先复制它。

缺点是您的数组键需要以与示例相同的方式排序，因为`array_shift()`实际上并不知道键是什么。它不适用于以下数组：

```
$arr = array(
    0 => array(
        'foo' => '1',
        'bar' => 'A'
    ),
    1 => array(
        'bar' => 'B',
        'foo' => '2'
    ),
    2 => array(
        'foo' => '3',
        'bar' => 'C'
    )
); 
```

**更新：**

阅读评论后，很明显我的解决方案触发`E_DEPRECATED`了 call-time-pass-by-reference 的警告。这是@Baba 建议的（并被接受为答案）替代方案，它利用了两个所需的键作为第二维数组的第一个和最后一个元素：

```
$foo = array_map('array_shift', $arr);
$bar = array_map('array_pop', $arr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:40:54.803

```
$n = array();

foreach($arr as $key=>$val) {
    foreach($val as $k=>$v) {
        $n[$k][] = $v;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:32:00.557

[`array_merge_recursive`](http://www.php.net/manual/en/function.array-merge-recursive.php)将具有相同键的标量值组合成一个数组。例如：

```
array_merge_recursive(array('a',1), array('b',2)) === array(array('a','b'),array(1,2)); 
```

您可以使用此属性将`array_merge_recursive`数组中的每个数组作为单独的参数简单地应用：

```
call_user_func_array('array_merge_recursive', $arr); 
```

你会得到这样的结果：

```
array (
  'foo' => 
  array (
    0 => '1',
    1 => '2',
    2 => '3',
  ),
  'bar' => 
  array (
    0 => 'A',
    1 => 'B',
    2 => 'C',
  ),
) 
```

它甚至不会被不同顺序的键混淆。

**但是，每个合并的值都必须是标量！**数组将被合并而不是作为子数组添加：

```
array_merge_recursive(array(1), array(array(2)) === array(array(1,2)) 
```

它*不*生产`array(array(1, array(2)))`！

# php - MySQL：将未加密的密码列转换为 MD5 哈希

> ID：13636018
> 
> 赞同：3
> 
> 时间：2012-11-29T22:34:32.717
> 
> 标签：php, mysql, database, md5

我正在将大量用户数据迁移到一个新系统中，而之前的开发人员没有对他的密码列进行 MD5。

有没有办法对`password`列运行查询并将值转换为 MD5？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T22:36:09.477

MySQL 内置了 MD5，只需添加一个新列并在那里设置加密值：

```
UPDATE users SET encrypted_password = MD5(password); 
```

如果您对结果满意，请删除原始密码列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:35:58.697

您可以在 SQL 中完成所有这些操作 - 只需使用以下`MD5()`函数： `insert into my_new_table select username,MD5(password) from old_table`

# php - MySQL 查询（数据库） - 尝试仅显示某些值

> ID：13636022
> 
> 赞同：1
> 
> 时间：2012-11-29T22:35:01.350
> 
> 标签：php, mysql, database

你好，我有一点问题。我的数据库中有两个表。 ![在此处输入图像描述](../Images/fd7594c60646707a5ad09c6b184186fb.png)

如您所见，我将所有员工都放在一个选项卡中，而我在这里想要实现的是仅在给定选项卡中显示相关员工。因此，例如，来自客户服务的员工不会显示在“销售”选项卡中。

```
$query = mysql_query("SELECT * "."FROM employees, dept_emp "."WHERE employees.emp_no = dept_emp.emp_no"); 
```

感谢您的寻找和帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:41:49.303

您的 WHERE 子句是无用的，因为它基本上只是重述 JOIN 条件。试试这个：

```
SELECT *
FROM employees AS e
INNER JOIN dept_emp AS de ON e.emp_no = de.emp_no
WHERE de.dept_no = '?' 
```

显然，`?`将替换为`dept_no`您实际尝试过滤的值。

根据您关于查看查询限制/分页的问题，这是通过 SQL`LIMIT`子句完成的。该子句可以用几种不同的方式表达。

这首先只返回最大行数：

```
LIMIT 100 <-- shows first 100 rows from the result set 
```

以下两种形式的语法用于结果的分页：

```
LIMIT 0, 100 <-- show first 100 rows from the result set (start at 0 offset, and return a max of 100 rows
LIMIT 100, 100 <-- show rows 101-200 from the result set (start at 100 offset and return max of 100 rows) 
```

或者：

```
LIMIT 100 OFFSET 0 <-- first 100 rows
LIMIT 100 OFFSET 100 <-- rows 101-200 
```

所以把它们放在一起

```
SELECT *
FROM employees AS e
INNER JOIN dept_emp AS de ON e.emp_no = de.emp_no
WHERE de.dept_no = '?'
ORDER BY e.emp_no
LIMIT 0,100 
```

请注意，我还添加了一个`ORDER BY`子句。这对于分页很重要，因为常规的无序`SELECT`并不能保证顺序。如果您尝试在没有分页的情况下进行分页，则`ORDER BY`可能会在多个“页面”中返回同一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T22:42:53.027

看来您并没有限制部门。where 子句需要一个硬限制，您的 where 将始终匹配所有内容。另外，你为什么要连接你的陈述？它不会破裂。就像是：

```
$query = mysql_query("SELECT * FROM employees JOIN dept_emp ON employees.emp_no = dept_emp.emp_no WHERE dept_emp.dept_no = 'd007'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:54:39.203

```
$dept = ?;
$query = mysql_query("SELECT *
                     FROM employees, dept_emp 
                     WHERE employees.emp_no = dept_emp.emp_no  
                           AND de.dept_no = $dept 
         "); 
```

# java - System.out.println() 被跳过

> ID：13636027
> 
> 赞同：4
> 
> 时间：2012-11-29T22:35:24.593
> 
> 标签：java

在第二个 for 循环没有出现之后，我的提示“请输入您的 ID”，它直接进入“请输入您的密码”。它还跳过了从登录提示到密码提示的大量代码。如果您对它为什么会这样表现有任何想法，请与我分享，谢谢。

```
public void main(String[] args){

    Accounts Accounts = new Accounts();

    Scanner kb = new Scanner(System.in);

    System.out.print("Please create a login ID and hit \"ENTER\": ");
    Login = kb.nextLine();

    for(;;){
        if(!Accounts.isTaken(Login)){
            System.out.print("Please create a password and hit \"ENTER\": ");
            PW = kb.nextLine();
            if(Accounts.validPW(PW)){
                Accounts.createAccount(Login, PW);
                break;
            }
        }
    }

    System.out.print("Do you wish to Log in ? (Y/N): ");
    String response = kb.nextLine();
    if((response=="y")||(response=="Y")){
        for(;;){
           //Not Being Shown
            System.out.println("Please enter your ID: "); // ?????? Where are you?????
            Login = kb.nextLine();
            Accounts.login(Login);
            //Goes straight here
            System.out.print("Please enter your Password: ");
            if ((Accounts.isValid(Login))&&(Accounts.checkAuth(kb.nextLine()))){
                break;
            }
            else{
                System.out.println("Invalid Login-Password!");
            }
        }
    }
    System.out.println("Please enter your Password: ");
    System.out.println("LOGIN AUTHORIZED: "+Accounts.checkAuth(kb.nextLine()));
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:37:02.770

代替

```
(response=="y")||(response=="Y") 
```

采用

```
(response.equals("y"))||(response.equals("Y")) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T22:37:41.913

您正在使用`==`运算符来检查字符串是否相等。使用`equals() method`.

`==`操作员：

1.  对于原始变量，检查两个原始变量是否具有相同的值。
2.  对于对象：检查两个引用变量是否指向（引用）同一个对象。

`equals() method`

1.  检查两个对象是否有意义地相等。

    如果（（响应==“y”）||（响应==“Y”））{

应该

```
if((response.equals("y"))||(response.equals("Y"))){ 
```

甚至更好

```
if((response.equalsIgnoreCase("y"))){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:37:41.897

由于 java 是基于引用的，因此响应的 id 与“y”不同。你应该使用

```
 response.equals("y") 
```

# html - iframe 使用不同的主目录

> ID：13636032
> 
> 赞同：0
> 
> 时间：2012-11-29T22:36:05.523
> 
> 标签：html, iframe

目录结构：

```
htdocs
     index.php
     cms.php
     images/
          image.jpg
          otherpic.png
     content/
          home.php
          otherfile.php 
```

/content/home.php 包含大量图像。它将包含在 index.php 中，因此请注意 src 只有一个点，因为它是从 index.php 内部读取的：

```
<img src="./images/image.jpg"></img> 
```

现在 cms.php 拥有一个 iframe。iframe 应该是富文本编辑器，以便可以编辑 home.php。

这给我带来了以下问题：当我想在 iframe 中加载 home.php 时，图像源需要有两个点，

```
<img src="../images/image.jpg"></img> 
```

因为`home.php`在里面`/content/`所以 iframe 会看到`/content/`它的父目录 Not `/htdocs/`。

如何使图像显示在 iframe/文本编辑器和 index.php 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:53:08.230

只需更改引用 Web 根目录的路径，这样您就不必为不同的目录调整标签：

`<img src="/images/image.jpg" /> (No dots at the start of path)`

为了详细说明这些点，单点`.`代表当前目录，而`..`代表从当前目录返回的一个点。一`/`开始可以追溯到webroot。

而且，顺便说一句，`<img>`标签没有结束`</img>`标签；你必须留下没有结束标签的标签，或者`/`像我上面所做的那样使用自我关闭。

# ruby - rbenv、ruby 1.9.3-p237 和 jekyll

> ID：13636033
> 
> 赞同：1
> 
> 时间：2012-11-29T22:36:06.407
> 
> 标签：ruby, jekyll, rbenv

我刚刚用 rbenv 替换了 RVM，并清理了所有与 RVM 相关的东西。

一切都很好，除了 Jekyll 不会在 _site 内生成任何东西。

然后我尝试用 启动它`--no-auto`，并得到了这个异常：

```
/home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): found unexpected end of stream while scanning a quoted scalar at line 3 column 8 (Psych::SyntaxError)
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/psych.rb:151:in `parse'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/1.9.1/psych.rb:127:in `load'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/convertible.rb:33:in `read_yaml'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/page.rb:24:in `initialize'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:140:in `new'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:140:in `block in read_directories'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:130:in `each'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:130:in `read_directories'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:98:in `read'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/lib/jekyll/site.rb:38:in `process'
  from /home/carlos/.rbenv/versions/1.9.3-p327/lib/ruby/gems/1.9.1/gems/jekyll-0.11.2/bin/jekyll:250:in `<top (required)>'
  from /home/carlos/.rbenv/versions/1.9.3-p327/bin/jekyll:23:in `load'
  from /home/carlos/.rbenv/versions/1.9.3-p327/bin/jekyll:23:in `<main>' 
```

我真的不知道它在 gems 文件夹中的“1.9.1”的位置。

`ruby -v`：

```
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-linux] 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:41:47.827

发现问题。似乎 psych 是双重加载的，一次由 gem 加载，另一次由 stdlib 加载。所以，我刚刚删除了宝石：

```
 gem uninstall psych 
```

现在它正在工作。

无论如何，在这里，获取一些相关链接：

*   [https://github.com/rails/rails/issues/6520](https://github.com/rails/rails/issues/6520)
*   [https://github.com/CS169-Raxa/raxa-visualizations/issues/51](https://github.com/CS169-Raxa/raxa-visualizations/issues/51)
*   [https://github.com/rails/rails/issues/3488](https://github.com/rails/rails/issues/3488)
*   [https://gist.github.com/3079083](https://gist.github.com/3079083)
*   [https://github.com/carlhuda/bundler/issues/2068](https://github.com/carlhuda/bundler/issues/2068)
*   [https://github.com/tenderlove/psych/issues/66](https://github.com/tenderlove/psych/issues/66)

还有一个解决方案就是将 psych gem 添加到应用程序 Gemfile。奇怪的。

# jquery - 从新加载的 div 调用 jQuery 函数

> ID：13636036
> 
> 赞同：3
> 
> 时间：2012-11-29T22:36:10.187
> 
> 标签：jquery, function, html, load

我有新的 div 我正在加载到名为“Next”的主页中。“下一个” div 是一个位于 Story.php 页面上的按钮，我正在使用此代码加载它。

```
$('.CoolBox').load('Story.php', function() 
    {
 /// The "Next div" is NOW on display but not recognized by main page that loaded it.
    }); 
```

但是，如果我尝试让“Next”div 调用一个函数或可点击它就不起作用。

```
$("#Next").click(function() 
    {
/// Run my code. Call a function?

    }); 
```

我意识到有两种选择。将代码放在我正在加载的页面中，以便 jQuery 可以看到“Next”div。我这样做了，当我单独加载“Story.php”页面时它工作正常，但是当我将该页面加载到主页时它不再工作。

同样的概念我也需要应用于函数。如何创建调用尚未加载到页面上的 div 的函数？

我会将函数放在可以访问该页面上的 div 的 Story.php 中，还是将这些函数放在主页上并以某种方式“注册”新加载的 div？

我想我也许可以使用类似...

```
document.getElementById("#Next") /// but what is the full code I use? 
```

**更新：** 可以在名为 testing.php 的页面上查看完整代码 [http://beaubird.com/testing.php](http://beaubird.com/testing.php) 点击第一个名为 STORY 的按钮。然后注意底部名为 Next 的按钮。这也有一个 div 名称为“Next”。我希望“下一个” div 能够加载更多故事并控制页面上的其他元素。

第 366 行是我调用此代码的地方：

```
$('.CoolBox').load('Story.php', function() 
                {
        /// it loads this page http://www.BeauBird.com/Story.php
                // Where the Next div is contained. 
                });
        } 
```

有什么想法吗？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:37:47.923

您可以使用[委托事件](http://api.jquery.com/on/)来解决问题：

```
$(".CoolBox").on("click", "#Next", function() {
    /// Run my code.
}); 
```

这里我们将`.CoolBox`其视为 的*静态父*元素`#Next`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:38:26.983

我希望你已经展示了接下来添加的代码。但没有看到它，试试这个：

```
var nxt = document.createElement("div");
$(nxt).click(function(){ /* code */ };
someNode.appendChild(nxt); 
```

**编辑**

如果你想走这条路，这里是一个事件委托的例子：http: [//jsfiddle.net/k3fvd/](http://jsfiddle.net/k3fvd/)

**细节**

在链接的页面中，委托代码

```
$(".CoolBox").on("click","#Next",function(){
  /* code */
}); 
```

正在按预期工作。也许无意中`div id="layer2"`窃取了点击事件，因为它在 z-index 或元素列表中以某种方式更高。我不完全确定是什么原因造成的，也许是所有 div 都被定义为`display:block;`并且以某种方式覆盖了`position:absolute;`. 一个简单的解决方法是给这样的更多的特异性`position:absolute;`：

```
 #layer2  {
position: absolute important!; 
left: 1px;
top: 0px;
z-index: 3;
width: 1246px;
height: 1031px;
margin-left: 0px;
margin-top: 0px;
background-image: url(sg_jesus_media/layer2.gif);
background-repeat: no-repeat;
} 
```

请注意，`position:absolute important!;`已编辑。这应该允许您的`div id="Next"`元素接收点击事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:39:41.777

需要**委托**事件强调文字

```
$("body").on('click', "#Next" ,function() {

}); 
```

`"body"`可以用静态祖先替换。

# ruby - 用 ruby 在 twilio 中重定向

> ID：13636045
> 
> 赞同：0
> 
> 时间：2012-11-29T22:36:35.927
> 
> 标签：ruby, sinatra, twilio

我是 Twilio 和 Ruby 的新手，正在尝试弄清楚如何“重定向”或将请求发送到另一个 url。我不需要在这一步收集数据，只需评估传递的参数并将其发送到一个方向或另一个方向。有什么帮助吗？

```
 post '/ors_verified/ors/:ors_number' do |ors_number|
     number_correct = params['Digits']
     if number_correct == '1'
          redirect "/how_many_irt/ors/#{ors_number}"
     else 
          redirect '/how_many_ors'
 end
 end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:43:36.527

你可以使用：`redirect_to`而不是`redirect`这样

```
post '/ors_verified/ors/:ors_number' do |ors_number|
 number_correct = params['Digits']
 if number_correct == '1'
      redirect_to "/how_many_irt/ors/#{ors_number}"
 else 
      redirect_to '/how_many_ors'
 end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T19:45:32.333

所以问题是我需要将它包装成一个 twillio 响应。

```
 post '/ors_verified/ors/:ors_number' do |ors_number|
    number_correct = params['Digits']
   Twilio::TwiML::Response.new do |r|
    if number_correct == '1'
      r.Redirect "/how_many_irt/ors/#{ors_number}"
    else 
      r.Redirect '/how_many_ors'
    end
   end.text 
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:15:43.427

由于您似乎正在使用 sinatra，因此重定向应如下所示：

```
 post '/ors_verified/ors/:ors_number' do |ors_number|
     number_correct = params['Digits']
     if number_correct == '1'
          redirect to("/how_many_irt/ors/#{ors_number}") # <-- notice the #to
     else 
          redirect to('/how_many_ors') # <-- notice the #to
     end
 end 
```

基本上从您的`#to`字符串创建另一个对象，sinatra 可以对其进行操作。[您可以在此处](http://www.sinatrarb.com/intro.html#Browser%20Redirect)阅读有关 sinatra 重定向的信息

# java - 构建 javax.usb 的问题 - 参考实现和 linux 实现

> ID：13636053
> 
> 赞同：1
> 
> 时间：2012-11-29T22:37:14.587
> 
> 标签：java, libusb

对于 javax.usb，有三个模块：

*   javax-usb
*   javax-usb-ri
*   javax-usb-ri-linux

常见问题解答表明，为了使用 javax-usb，必须构建所有三个模块。每个模块都有一个关联的 tarball。我已经下载了它们并解压缩了它们。所以我有一个文件夹，里面有每个文件夹。

在控制台中，我进入 javax-usb 文件夹并输入

```
ant all 
```

罐子就建好了。没问题。一切都很完美！

我进入javax-usb-ri更冷并输入

```
ant all 
```

它错误表明：

```
[javac] Compiling 50 source files to /home/nato/javax/javax-usb-ri/src
[javac] /home/nato/javax/javax-usb-ri/src/com/ibm/jusb/DefaultUsbInterfacePolicy.java:12: package javax.usb does not exist
[javac] import javax.usb.*;
[javac] ^
[javac] /home/nato/javacrap/javax/javax-usb-ri/src/com/ibm/jusb/DefaultUsbInterfacePolicy.java:18: cannot find symbol 
```

还有更多类似的错误。我认为这是因为我制作的 jar 不在类路径中。好的。所以我检查了一下，我没有类路径环境变量。我的理解是，然后类路径只是./所以我将 jsr80.jar 文件复制到 javax-usb-ri 文件夹和 javax-usb-ri/src 文件夹和其他几个地方，它似乎没有无论我把它放在哪里，我都无法构建它。

这令人沮丧。这是让 Java 使用 libusb 的最佳方式吗？是否有一些具有更好/更集成的 Java 解决方案的 Maven 存储库？

如果没有，你能建议我尝试的构建过程有什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-22T10:16:27.410

您可以通过“lib”选项提供 jar 到 Ant 的路径。

尝试将命令更改为：

`ant all -lib < path of jar>`.

例如，如果 jsr80.jar 文件保存在 /home/user1/myjars 中；那么命令将是

```
ant all -lib /home/user1/myjars/ 
```

# windows-phone - WP8 瓷砖设计

> ID：13636057
> 
> 赞同：1
> 
> 时间：2012-11-29T22:37:29.540
> 
> 标签：windows-phone, windows-phone-8, live-tile

不知道如何为 WP8 上的 Iconic 磁贴准备图像。指南在[这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207009%28v=vs.105%29.aspx)。我的图块很简单——没有计数器，没有可变文本。只是图像和应用程序标题。

所以我应该提供两个图像文件 - IconImage 和 SmallIconImage（顺便说一下，清单中的 XML 元素的调用方式不同）。但是我应该做多大的？指南说瓷砖分别是 159x159 和 336x336；但磁贴内的图标是 110x110 和 202x202。其余的是文本和计数器，由 Windows Phone 外壳覆盖。

我应该为我的两个图像使用哪个尺寸？我应该只绘制图标还是更大的图像一些空白区域和所需边界中的图标？

编辑：相关讨论[在这里](https://stackoverflow.com/questions/12837720/windows-phone-8-startscreen-tile-sizes-and-margins/13153522#13153522)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:05:13.207

正确的尺寸是：小：72×110 中：132×202

您可以在此处找到更多详细信息[http://mikaelkoskinen.net/windows-phone-8-iconic-tile-image-size-comparison](http://mikaelkoskinen.net/windows-phone-8-iconic-tile-image-size-comparison)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:36:53.253

该指南显示您将图标设置为 110x110 和 202x202。指南中显示的 159x159 和 336x336 表示瓷砖的大小。如果您想使用标志性模板，则不要像以前那样创建整个图块。相反，您指定要在磁贴中使用的图标。在此链接中搜索“图标”。[http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8](http://www.developer.nokia.com/Community/Wiki/What%27s_new_in_Windows_Phone_8)

# mysql - SQL 从两个表中获取对话

> ID：13636063
> 
> 赞同：1
> 
> 时间：2012-11-29T22:37:52.007
> 
> 标签：mysql, sql

我有两张表，一张存储传入消息，另一张存储传出消息。我想要的是能够获得消息的对话视图，以便对来自/发往同一用户 ID 的所有传入和传出消息进行分组，并且对话按最新消息（输入或输出）排序

```
Outgoing
----------
user_id
time
message

Incoming
----------
user_id
time
message 
```

我想要的是显示结果，例如

```
-> User A   9:10 pm   Nice ...
<- User A   8:45 pm   Our special is pepperoni!
-> User A   8:00 pm   What's your special dish?

<- User B   9:00 pm   We open at 5
-> User B   6:56 pm   Hello What time to you open?

<- User C   8:43 pm   Thanks!
-> User C   4:00 pm   Loved the pizza today!! 
```

知道如何编写查询来执行此操作吗？

**编辑**

如果用户 B 然后发回短信，结果应该是：

```
-> User B   9:15 pm   Ok great!
<- User B   9:00 pm   We open at 5
-> User B   6:56 pm   Hello What time to you open?

-> User A   9:10 pm   Nice ...
<- User A   8:45 pm   Our special is pepperoni!
-> User A   8:00 pm   What's your special dish?

<- User C   8:43 pm   Thanks!
-> User C   4:00 pm   Loved the pizza today!! 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:45:38.363

您需要`UNION`对这两个表进行相应的排序（`ORDER BY`）：

```
SELECT 
    '<-' AS direction,  user_id,  time,  message
FROM
    Outgoing

UNION ALL

SELECT 
    '->',               user_id,  time,  message
FROM
    Incoming

ORDER BY
    user_id ASC,
    time DESC ; 
```

在复杂排序的附加说明之后：

```
SELECT
  CASE WHEN m.d = 1 THEN '<-' ELSE '->' END AS direction, 
  m.user_id, m.time, m.message
FROM
    ( SELECT 
        u.user_id, 
        GREATEST( COALESCE(mo.time, mi.time), 
                  COALESCE(mi.time, mo.time) ) AS maxtime
      FROM 
          ( SELECT user_id  FROM Outgoing
          UNION
            SELECT user_id  FROM Incoming 
          ) AS u
        LEFT JOIN
          ( SELECT user_id, MAX(time) AS time  FROM Outgoing  GROUP BY user_id
          ) AS mo
          ON mo.user_id = u.user_id
        LEFT JOIN
          ( SELECT user_id, MAX(time) AS time  FROM Incoming  GROUP BY user_id
          ) AS mi
          ON mi.user_id = u.user_id
    ) AS b    
  JOIN
    ( SELECT 1 AS d, user_id, time, message  FROM Outgoing
    UNION ALL
      SELECT 2 AS d, user_id, time, message  FROM Incoming
    ) AS m
    ON m.user_id = b.user_id
ORDER BY
    b.maxtime ASC,
    m.user_id ASC,
    m.time DESC ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:45:37.743

像这样的东西应该按用户和时间得到结果。您需要在应用程序级别处理显示以显示每个用户的消息：

```
select * from (
  select '->' as direction, o.* from outgoing o
  union
  select '<-' as direction, i.* from incoming i
) M
order by user_id asc, time desc 
```

样本输出：

```
| DIRECTION | USER_ID |                            TIME |                      MESSAGE |
----------------------------------------------------------------------------------------
|        -> |       1 | November, 29 2012 21:10:00+0000 |                     Nice ... |
|        <- |       1 | November, 29 2012 20:45:00+0000 |    Our special is pepperoni! |
|        -> |       1 | November, 29 2012 20:00:00+0000 |   What''s your special dish? |
|        <- |       2 | November, 29 2012 21:00:00+0000 |                 We open at 5 |
|        -> |       2 | November, 29 2012 18:56:00+0000 | Hello What time to you open? |
|        <- |       3 | November, 29 2012 20:43:00+0000 |                      Thanks! |
|        -> |       3 | November, 29 2012 16:00:00+0000 |      Loved the pizza today!! | 
```

演示：[http ://www.sqlfiddle.com/#!2/602c1/11](http://www.sqlfiddle.com/#!2/602c1/11)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:50:39.597

就个人而言，我不太喜欢你的表格结构。对一个用户的传入消息是对另一个用户的传出消息，这意味着您需要在每个表中复制系统中的每条消息。

我可能只有一个带有 to 和 from 字段的消息表。如果你有一个这样的表：

```
message_id (primary key)
from_user_id (indexed)
to_user_id (indexed)
message
time (indexed) 
```

您的查询很简单：

```
SELECT *
FROM messages
WHERE from_user_id = ? OR to_user_id = ?
ORDER BY time DESC 
```

请注意，这不会为您提供一个简单的查询，以便以您所显示的方式进行显示（您需要进行一些查询后数据操作）。但它确实为您提供了最有效的查找查询，并防止您需要在存储中重复两次消息。

如果您需要坚持分组对话的概念（甚至扩展到多方消息），那么也许您可以考虑拥有一个对话表并将您的架构修改为如下所示：

对话（多对多连接表）

```
conversation_id (indexed)
user_id (indexed)
(compound primary key across both fields) 
```

消息

```
message_id (primary key)
conversation_id (indexed)
sending_user_id
message
time (indexed) 
```

用这样的查询

```
SELECT m.sending_user_id, m.message, m.time
FROM conversations AS c
INNER JOIN messages AS m ON c.conversation_id = m.conversation_id
WHERE c.user_id = ?
ORDER BY c.conversation_id, m.time DESC 
```

显然，从结果查询来看，如果 send_user_id 等于当前用户的 id，则为外发消息，否则为来自其他会话参与者之一的消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T22:49:53.353

为什么要分开表？您可以将它们放在同一个表中并添加一列位类型的列，其中 1 和 0 代表传入和传出。那么你的查询很简单：

```
select user_id, time, message, inout from message order by user_id, time 
```

对我来说，方向是告诉你一些关于信息的事情，不管怎样，它仍然是一个信息。

如果您仍然必须以另一种方式进行操作，那么您将不得不进行联合，但预计性能会更差。您可以为您提供查询的最佳性能调整是通过前表设计。

```
with message as (
select user_id, time, message, 'incoming' from incoming
union all
select user_id, time, message, 'outgoing' from outgoing
) select * from message order by user_id, time 
```

或类似的东西...

此外，您应该警惕按时间字段排序。根据经验，如果两条消息同时出现，您会发现您会得到意想不到的结果。这尤其可能，因为您的示例仅精确到分钟，而不是秒或微秒。更好的方法是有一个按升序自动分配的数字 PK。这样，如果时间不是唯一的，您仍然可以确定顺序。

# python - Django 类视图和反向 URL

> ID：13636064
> 
> 赞同：1
> 
> 时间：2012-11-29T22:37:53.490
> 
> 标签：python, django, django-views, reverse

我有很多基于类的视图，它们使用 reverse(name, args) 来查找 url 并将其传递给模板。但是，问题是必须先实例化基于类的视图，然后才能定义 urlpatterns。这意味着在 urlpatterns 为空时实例化该类，从而导致反向抛出错误。我一直在通过将 lambda: reverse(name, args) 传递给我的模板来解决这个问题，但肯定有更好的解决方案。

作为一个简单的示例，以下失败并出现异常： ImproperlyConfigured at xxxx The included urlconf mysite.urls does not have any patterns in it

mysite.urls

```
from mysite.views import MyClassView

urlpatterns = patterns('',
    url(r'^$' MyClassView.as_view(), name='home')
) 
```

视图.py

```
class MyClassView(View):
    def get(self, request):
        home_url = reverse('home')
        return render(request, 'home.html', {'home_url':home_url}) 
```

主页.html

```
<p><a href={{ home_url }}>Home</a></p> 
```

我目前正在通过将views.py更改为强制反向在模板渲染上运行来解决这个问题

```
class MyClassView(View):
    def get(self, request):
        home_url = lambda: reverse('home')
        return render(request, 'home.html', {'home_url':home_url}) 
```

它有效，但这真的很难看，肯定有更好的方法。那么有没有一种方法可以在基于类的视图中使用反向但避免 urlpatterns 的循环依赖需要需要反向需要 urlpatterns 的视图...

编辑：

我这样使用它：

视图.py

```
def sidebar_activeusers(cls):
    sidebar_dict = {'items' = []}
    qs = models.random.filter.on.users
    for user in qs:
        item = {
            'value': user.name,
            'href': reverse('user_profile', args=[hash_id(user.id)])}
    sidebar = loader.get_template('sidebar.html')
    cls.base_dict['sidebar_html'] = sidebar.render(Context(sidebar_dict))
    return cls

@sidebar_activeusers
class MyView1(View):
    base_dict = {}
    ...

@other_sidebar_that_uses_same_sidebar_template
class MyView2(View): 
```

基本上我想对几种不同的内容类型使用相同的侧边栏模板。尽管侧边栏中显示的模型是任意的，但格式始终相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:02:21.500

`home`可以使用声明直接在模板中访问您的url `{% url 'home' %}`。这是在 urls.py 文件中访问命名 url 的标准方法。

您不必`home_url`在基于类的视图函数中显式地将变量发送到模板。

换句话说，在您的`home.html`文件中：-

```
<p><a href="{% url 'home' %}">Home</a></p> 
```

会做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:02:36.820

对于您的示例`MyClassView`，可以使用`reverse`

```
class MyClassView(View):
    def get(self, request):
        home_url = reverse_lazy('home')
        return render(request, 'home.html', {'home_url': home_url}, 
```

定义类`reverse`时不调用方法——只在处理请求并`get`调用方法时调用，所以应该不会出错。我已经测试了上面的示例，它工作正常。

但是，当您使用`sidebar_activeusers`装饰器时，`reverse`调用会在加载 url conf 之前发生。在这种情况下，您可以使用[`reverse_lazy`](https://docs.djangoproject.com/en/2.1/ref/urlresolvers/#reverse-lazy). 这是一个实际操作的示例`reverse_lazy`：

```
from django.core.urlresolvers import reverse_lazy

class MyOtherClassView(View):
    home_url = reverse_lazy('home')

    def get(self, request):
        return render(request, 'home.html', {'home_url':self.home_url}) 
```

这一次，`home_url`是在定义类时设置的，所以`reverse_lazy`是必需的而不是反向的，因为 url conf 还没有加载。

# php - 具有唯一表单 ID 的 saveScrollPosition

> ID：13636068
> 
> 赞同：1
> 
> 时间：2012-11-29T22:38:36.097
> 
> 标签：php, javascript

我使用以下（看似常见的）方法在 php 页面中保存提交时的滚动位置：

```
<script type="text/javascript">
<!-- script for scroll position on submit -->
    function saveScrollPositions(theForm) {
    if(theForm) {
    var scrolly = typeof window.pageYOffset != 'undefined' ? window.pageYOffset : document.documentElement.scrollTop;
    var scrollx = typeof window.pageXOffset != 'undefined' ? window.pageXOffset : document.documentElement.scrollLeft;
    theForm.scrollx.value = scrollx;
    theForm.scrolly.value = scrolly;
    }
    }
</script>   
</head>

<body>
    <form id="ReportForm<?php echo $userNumber; ?>" name="ReportForm" method="POST" action="<?php echo $editFormAction; ?>" onsubmit="return saveScrollPositions(this);">
      <input type="hidden" name="scrollx" id="scrollx" value="0" />
      <input type="hidden" name="scrolly" id="scrolly" value="0" />

      -- various form controls here --

    </form>

<?php
    $scrollx = 0;
    $scrolly = 0;
    if(!empty($_REQUEST['scrollx'])) {
    $scrollx = $_REQUEST['scrollx'];
    }
    if(!empty($_REQUEST['scrolly'])) {
    $scrolly = $_REQUEST['scrolly'];
    }
?>
<script type="text/javascript">
    window.scrollTo(<?php echo "$scrollx" ?>, <?php echo "$scrolly" ?>);
</script>
</body> 
```

在正文中，表单由重复区域包装以从数据库中获取多个报告，但是在运行时加载的页面中的每个表单都需要一个唯一的 id，因此在表单标记中我有：

```
id="reportForm<?php echo $userNumber ?>" 
```

这会导致 saveScrollPositions 失败。删除最后附加的 userNumber 是可行的。知道如何解决这个问题吗？

我非常感谢您对此提供的任何帮助，并感谢您的期待。

亲切的问候，约翰

# windows-phone-7 - 将 Windows Phone 8 Tile 功能添加到 Windows Phone OS 7.1 应用程序

> ID：13636069
> 
> 赞同：3
> 
> 时间：2012-11-29T22:38:47.717
> 
> 标签：windows-phone-7, windows-phone-8

我正在尝试使用[MSDN 中的文档](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720574%28v=vs.105%29.aspx)在我现有的 Windows Phone OS 7.1 应用程序中支持新的 Windows Phone 磁贴功能。但是，我似乎无法通过反射创建 IconicTile，因为它不断给我 NullReferenceExceptions 和 AmbiguousMatchExceptions。这是我正在使用的代码：

```
public static void CreateIconicTile(Uri tileId, string title, int count, string wideContent1, string wideContent2, string wideContent3, Uri smallIconImage, Uri iconImage, Color backgroundColor)
{
    // Get the new IconicTileData type.
    Type iconicTileDataType = Type.GetType("Microsoft.Phone.Shell.IconicTileData, Microsoft.Phone");

    // Get the ShellTile type so we can call the new version of "Update" that takes the new Tile templates.
    Type shellTileType = Type.GetType("Microsoft.Phone.Shell.ShellTile, Microsoft.Phone");

    // Get the constructor for the new IconicTileData class and assign it to our variable to hold the Tile properties.
    StandardTileData CreateTileData = new StandardTileData();

    // Set the properties.
    SetProperty(CreateTileData, "Count", count);
    SetProperty(CreateTileData, "WideContent1", wideContent1);
    SetProperty(CreateTileData, "WideContent2", wideContent2);
    SetProperty(CreateTileData, "WideContent3", wideContent3);
    SetProperty(CreateTileData, "SmallIconImage", smallIconImage);
    SetProperty(CreateTileData, "IconImage", iconImage);
    SetProperty(CreateTileData, "BackgroundColor", backgroundColor);

    // Invoke the new version of ShellTile.Create.
    shellTileType.GetMethod("Create").Invoke(null, new Object[] { tileId, CreateTileData });
} 
```

我还尝试使用 Windows Phone OS 7.1 方式 ( `ShellTile.Create(...)`) 创建磁贴，然后`UpdateIconicTile`按照 MSDN 文档中的说明通过反射调用该方法。但这也没有用。

任何帮助将不胜感激。谢谢！

编辑：澄清一下，我正在检查平台版本以确保此代码仅在 Windows Phone 8 设备上运行，并且我已将必要的代码添加到我的清单中。

已解决：感谢 Martin Suchan 在下面给出的答案，我能够解决这个问题。问题在于我要求`Invoke(...)`缺少一些属性。这是我用来实际创建图块的新行：

```
shellTileType.GetMethod("Create", new Type[] { typeof(Uri), typeof(ShellTileData), typeof(bool) }).Invoke(null, new Object[] { tileId, CreateTileData, true }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T07:00:07.633

您是否尝试过 Mangopollo 库，它包含在 WP8 上运行时在 WP7.1 应用程序中创建新图块的工作包装器？
[http://mangopollo.codeplex.com/](http://mangopollo.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:23:02.423

您必须确保跨代码启用反射。

Iconic Tiles 仅适用于 windows phone 8，因此如果您检查版本，您只能将代码放入 windows phone 7.1 项目

```
private static Version TargetedVersion = new Version(8, 0);
    public static bool IsTargetedVersion {get{
               return Environment.OSVersion.Version >=    TargetedVersion;}} 
```

现在看看 bool IsTargetedVersion 是否为真。基本上，

```
if(IsTargetedVersion){
      //iconic tile code
} 
```

因此，只有当具有兼容功能的 Windows 手机（即 wp8）运行您的应用程序时，它才会工作。

# bash - bash list files ctime - 文件名 - 每个文件的第一行？

> ID：13636073
> 
> 赞同：-6
> 
> 时间：2012-11-29T22:39:00.183
> 
> 标签：bash

我的目录中的文件很少。我需要在 bash 脚本中显示以下列：

目录 /reports/ 中的文件：

```
ctime - filename - 1st line text 
```

[我在这里找到了完美的解决方案](https://unix.stackexchange.com/questions/59249/print-output-to-3-separate-columns)

```
#!/bin/sh

MYPATH=/
TOTALFILE=$(ls $MYPATH/* | wc -l)
FILE=$(ls -1tcr $MYPATH/* | head -5 | rev | cut -d/ -f1 | rev)

declare -a FILES
declare -a FILETIME

OUTPUT="FILENAME CREATED TIME ERROR_HEADER\n\n------------------------------ ----------------------------- ----------------------------------- ------$

for i in $MYPATH/*;
do
    FILES[${#FILES[@]}]="$i"
    FILETIME[${#FILETIME[@]}]=$(stat --format=%y $i | head -5 | cut -d'.' -f1)
    TOPLINE=$(head -1 $i | grep -Po '".*?"' | head -5)

    OUTPUT="$OUTPUT\n${FILES[${#FILES[@]}-1]} ${FILETIME[${#FILETIME[@]}-1]} $TOPLINE\n"
done

echo -ne $OUTPUT | column -t 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:44:05.997

```
find . -type f -printf '%a %p ' -exec head -n1 {} \; 
```

看

```
man find 
```

听起来像一个*家庭作业*。正确的 ？=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T06:41:28.213

`find /reports -type f | xargs ls -lt`
这是按创建时间排序的，所以
如果你只想要一个结果，最新的文件在顶部，你可以在 希望有帮助`head -n 1 or head -1`的命令后添加。`|`

# java - Java 返回正确的枚举类型

> ID：13636075
> 
> 赞同：1
> 
> 时间：2012-11-29T22:39:02.977
> 
> 标签：java, enums

如果我有以下

```
public enum MY_ENUM_THING
{
  NAME("JOE"),
  SOMETHING,
  ISWORKING(true);

  private String parameter;
  private boolean truth;

  MY_ENUM_THING()
  {

  }
  MY_ENUM_THING(String parameter)
  {
    this.parameter = parameter;
  }
  MY_ENUM_THING(boolean truth)
  {
    this.truth = truth
  }

  public ?? getEnumValue()
  {
     // this method (return) is what would be jamming me up
  } 
} 
```

无论枚举的类型是什么，我如何让我的回报返回？

示例和期望的结果

```
System.out.print(MY_ENUM_THING.NAME.getEnumValue());
//JOE
System.out.print(MY_ENUM_THING.SOMETHING.getEnumValue());
//SOMETHING  <-- just return SOMETHING.name()
System.out.print(MY_ENUM_THING.ISWORKING.getEnumValue());
//true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:46:10.567

你不能写这样的方法，它对每种情况都有不同的返回类型！（除非你返回`Object`，但这会很麻烦。）事实上，我闻到了一个设计问题——每个枚举值都应该有它的每个属性的值，有一些属性的值而不是其他属性的值是有问题的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T22:48:10.290

寻找更好的设计。Java 不能像这样很好地工作。所有返回类型的唯一公共类是 Object (boolean -> Boolean)。在将其转换为适当的类型之前，是否要在每次调用此方法时检查返回类型的类。

您的设计也很糟糕，因为枚举旨在表示一组有限的值，每个值都具有相同的类型和属性。您正在创建三个完全不同的对象，它们代表三种不同的事物。

您需要查看您的用例并提出更好的设计。你甚至可以发布一个单独的问题来征求意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:49:55.070

这应该可以解决问题：

```
public String getEnumValue()
{
    if(parameter != null){
        return parameter;
    }
    if(truth != null){
        return Boolean.toString(truth);
    }
    return name();     
} 
```

您还应该将布尔值更改为大写 B 'Boolean'

但是，正如其他人所说，这可能是有问题的设计。

要回答真正的问题“我如何返回与给定变量匹配的类型？” 你没有。但是，如果要保留值的实际返回类型，可以将返回值设为 Object：

```
public Object getEnumValue()
{
    if(parameter != null){
        return parameter;
    }
    if(truth != null){
        return truth;
    }
    return this;     
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T22:51:21.157

类和接口到底有什么问题？

```
interface Thing<E> {
    E getValue();
}

class Name implements Thing<String>{
    private String parameter;
    Name(String p){parameter = p;}
    String getValue(){return parameter;}
}

class Something implements Thing<Void>{
    Void getValue(){return null;}
}

class IsWorking implements Thing<Boolean>{
    private boolean truth;
    IsWorking(boolean t){truth = t;}
    Boolean getValue(){return truth;}
} 
```

# android - 滑动视图中的片段，而不仅仅是视图 Android

> ID：13636077
> 
> 赞同：0
> 
> 时间：2012-11-29T22:39:09.873
> 
> 标签：android, tabs, android-fragments, android-actionbar, swipeview

我一直在使用这个链接来实现我的两个屏幕选项卡式视图，

[http://developer.android.com/training/implementing-navigation/lateral.html](http://developer.android.com/training/implementing-navigation/lateral.html)

但我目前的问题是，这个演示只展示了如何在每个选项卡上实现单独的视图，例如每个选项卡上的单个 TextView，而我希望在每个选项卡上实现可以相互交互的单独片段。例如，如果在一个片段上单击一个按钮，我希望它在单独的选项卡中的另一个片段上更改 TextView 的文本。

目前我正在使用一个片段来实现两个视图，这变得越来越复杂，因为我只能在 onCreateView 方法中的视图的实际膨胀器中对某个视图进行修改，而不是在整个类中进行修改。

所以基本上我想将它们分成 2 个片段并让它们能够相互交互，但我不确定如何在 onCreateView 方法中配置它们以与我提供的链接中的演示一起使用。

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:44:43.140

您可以使用([文档链接](https://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html))将单个`Fragment`实例附加为 a 的页面`ViewPager`（而不仅仅是简单的视图）。`FragmentPagerAdapter`

# linux - 在 Linux 上按身份跟踪文件

> ID：13636081
> 
> 赞同：0
> 
> 时间：2012-11-29T22:39:36.567
> 
> 标签：linux, file, filesystems

在 OS X 上，有一个 API 可以为磁盘上的给定文件创建一个“书签”，即使它被移动或重命名，它也会跟踪它的目标。然后，OS X 应用程序可以序列化书签，以它想要的任何方式存储它，并在以后的某个日期（可能在退出并重新启动之后）反序列化书签并从中解析文件路径。

Linux 有什么可比的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:46:38.310

[http://en.wikipedia.org/wiki/Inotify](http://en.wikipedia.org/wiki/Inotify)

我猜这 inotify 是你想要的。使用 inotify，您可以监视文件的以下事件：

```
IN_ACCESS - read of the file
IN_MODIFY - last modification
IN_ATTRIB - attributes of file change
IN_OPEN - open of file
IN_CLOSE_WRITE - sent when a file opened for writing is closed
IN_CLOSE_NOWRITE - sent when a file opened not for writing is closed
IN_MOVED_FROM and IN_MOVED_TO - when the file is moved or renamed
IN_DELETE - a file/directory deleted
IN_CREATE - a file in a watched directory is created
IN_DELETE_SELF - file monitored is deleted 
```

# google-chrome-extension - 本地存储数据未从 backgound.js 返回到内容脚本

> ID：13636085
> 
> 赞同：1
> 
> 时间：2012-11-29T22:40:22.940
> 
> 标签：google-chrome-extension, callback, content-script

在 background.js 中，我将一些数据存储到本地存储中：

```
localStorage["domain"] = site;  //Save the site to local storage for retrieval later when requested by the content script
localStorage["page"] = tab.title;   //Save the page title to local storage for retrieval later
localStorage["url"] = tab.url;  //Save the URL of the current page to local storage for retrieval 
```

后来，我的内容脚本请求数据

```
chrome.extension.sendRequest({name:"domain"},
    function(response)
    {
    subjectStr = response.domain;   
    });

chrome.extension.sendRequest({name:"url"},
    function(response)
    {
    bodyStr = "URL of last page visited: " + response.url;  
    }); 
```

和 background.js 响应

```
//Wait for request for the site value and URL from content script 
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) 
  {
  if (request.name == "url")
  {
  sendResponse({url: localStorage["url"]});
  }
  else
  {
  sendResponse({domain: localStorage["domain"] + ": " + localStorage["page"]});
  }
}
); 
```

但是，内容脚本永远不会接收到数据。有人知道为什么吗？

这是清单：

```
{
"name": "Test",
"version": "1.0",
"manifest_version": 2,
"description": "Test extension",
"browser_action": {
"default_icon": "no_msgs.png",
"default_title": "Press here to test."
},
"background": {
"scripts": ["background.js"]
},
"content_scripts": [{
"run_at": "document_end",
"js": ["postMsg.js"],
"matches": ["https://groups.google.com/forum/*"]
}],
"permissions": ["tabs",
"http://groups.google.com/forum/?fromgroups=#!forum/opencomments-site-discussions/*",
"https://groups.google.com/forum/?fromgroups=#!forum/opencomments-site-discussions/*"
]
} 
```

和 no_msgs.png：

[no_msgs http://www.opencomments.com/no_msgs.png](http://www.opencomments.com/no_msgs.png)

和 background.js：

```
var post_url = "https://groups.google.com/forum/?fromgroups=#!newtopic/opencomments-site-discussions";

chrome.browserAction.onClicked.addListener(function(main) {
});

function createEvent(tab){
}

function updateEvent(tabId, changeInfo, tab){
}

function miscEvent(tabId, eventInfo){
}

function getURL() {
  chrome.tabs.getSelected(undefined, function(tab) {
var tmp = tab.url;
var site;

if (tab.url.indexOf("http://") == 0 || tab.url.indexOf("https://") == 0) {
    site = getDomain(tab.url);
    chrome.tabs.create({url: post_url});

localStorage["domain"] = site;  //Save the site to local storage for retrieval later when requested by the content script
localStorage["page"] = tab.title;   //Save the page title to local storage for retrieval later
localStorage["url"] = tab.url;  //Save the URL of the current page to local storage for retrieval
}
  });
 }

//Wait for request for the site value and URL from content script 
chrome.extension.onRequest.addListener(
  function(request, sender, sendResponse) 
  {
  if (request.name == "url")
    {
    sendResponse({url: localStorage["url"]});
    }
  else
    {
    sendResponse({domain: localStorage["domain"] + ": " + localStorage["page"]});
    }
  }
  );

//Fetches the domain from the URL
function getDomain(url){
var tmp = url.substring(url.indexOf("//") + 2);
var tmp2 = tmp.indexOf("/");
var str = tmp.substring(0, tmp2);
var index = str.indexOf(".");
while ((tmp = str.substring(index + 1)).indexOf(".") != -1){
str = str.substring(index + 1);
index = str.indexOf(".");
}
index = str.indexOf(".");
return str;
}

// Called when the user clicks on the browser action.
chrome.browserAction.onClicked.addListener(function(tab) {
getURL();
}); 
```

最后是 postMsg.js：

```
var subjectStr  = '';
var bodyStr  = '';

chrome.extension.sendRequest({name:"domain"},
function(response) {
subjectStr = response.domain;   
});

chrome.extension.sendRequest({name:"url"},
function(response) {
bodyStr = "URL of last page visited: " + response.url;  
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:25:44.203

适用于您的代码，我使用消息而不是请求。

关注[Rob W](https://stackoverflow.com/users/938089/rob-w)帖子（[link1](https://stackoverflow.com/questions/11752341/chrome-extension-communication-between-content-script-and-background-html)，[link2](https://stackoverflow.com/questions/11811554/chrome-extension-port-error-could-not-establish-connection-receiving-end-does)）以获取有关 sendMessage() 与 sendRequest() 的更多信息

**示例代码和输出**

***来自 background.js 的输出***

![在此处输入图像描述](../Images/1b29a7b27e90a2c232dcdb9634004f05.png)

***内容脚本 scripts.js 的输出***

![在此处输入图像描述](../Images/9a2fc4eac3dc0901cc95fa6c73239e1d.png)

***清单.json***

```
{
"name":"Local Storage",
"description":"Local Storage Demo",
"manifest_version":2,
"background":{
    "scripts":["background.js"]
},
"content_scripts": [
    {
      "matches": ["https://www.google.co.in/*"],
      "js": ["scripts.js"]
    }
  ],
"permissions":[
    "tabs","<all_urls>"
],

"version":"1"
} 
```

***背景.js***

```
function storeData(){
    localStorage["domain"] = "google";  //Save the site to local storage for retrieval later when requested by the content script
    localStorage["page"] = "Google";   //Save the page title to local storage for retrieval later
    localStorage["url"] = "https://www.google.co.in/";  //Save the URL of the current page to local storage for retrieval
}
chrome.extension.onMessage.addListener(
  function(request, sender, sendResponse) 
  {
  console.log("request recieved is "+request);
  if (request.name == "url")
  {
    console.log("sending response for request URL"+ localStorage["url"]);
  sendResponse({url: localStorage["url"]});
  }
  else
  {
  console.log("sending response for request URL"+   localStorage["page"]);
  sendResponse({domain: localStorage["domain"] + ": " + localStorage["page"]});
  }
}
);
window.onload = function(){
    storeData();
} 
```

***脚本.js***

```
function requestBackground(){
    chrome.extension.sendMessage({name:"domain"}, 
    function(response)
    {
    console.log("response recived for response.domain  "+response.domain);   
    });

chrome.extension.sendMessage({name:"url"},
    function(response)
    {
    console.log("response recived for last page visited: " + response.url);  
    });
}

window.onload = function(){
    requestBackground();
} 
```

让我知道它是否仍然失败。

# android - 是否可以实现默认的 soundcloud 用户？

> ID：13636086
> 
> 赞同：3
> 
> 时间：2012-11-29T22:40:31.327
> 
> 标签：android, soundcloud

我正在实现一个纯 Holo Soundcloud 应用程序，我想避免在用户第一次打开应用程序时就必须对其进行身份验证。这种连接墙让很多用户只需要关闭应用程序就不会再打开它。

由于我需要经过身份验证的用户才能与 Soundcloud API 交互，我可以创建一个所有用户都使用的“虚拟”帐户，直到他们进行身份验证？该帐户将能够查询热门歌曲列表并使用播放器，但无法共享声音，例如曲目或执行任何其他假设真实用户帐户的操作（而是显示连接屏幕）。

Soundcloud API 是否有可能，或者我会遇到限制（例如可以同时使用该帐户的人数）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:46:44.147

您无需经过身份验证即可访问大部分 API。实际上，只有您期望的操作：获取当前用户、他们当前的曲目、编辑、收藏、上传等。获取热门曲目、播放曲目、查找用户的所有曲目和播放列表等，不要需要任何身份验证。

# php - Bootstrap 2.2 Typeahead 问题

> ID：13636088
> 
> 赞同：0
> 
> 时间：2012-11-29T22:40:38.563
> 
> 标签：php, javascript, jquery, twitter-bootstrap

当我在我的文本框中键入时，我正在使用以下代码来获取建议列表。

`JS`

```
$("#address").typeahead({
    source: function(query,typeahead){ 
        $.ajax({
            url: "http://localhost/disc/autocomplete/"+query,
            type: "GET",
            dataType: "JSON",
            async: true,
            success: function(data){
                typeahead.process(data); 
            }
        });
    },
    property: 'address',
    items:8,
    onselect: function (obj) { 
        // window.location = obj.url;
    }   
}); 
```

`PHP`

```
 $count=0;
    foreach ($query->result() as $row)
    {
        $count++;
        $item['value'] = $row->address;
        $item['id'] = $count;
        $output[] = $item;
    }        
    echo json_encode($output); 
```

`TextBox`

```
<input type="text" id="address" autocomplete="off" name="address" class="input-block-level" placeholder="Street address.."> 
```

现在，当我在文本框中键入时，我收到了错误

```
Uncaught TypeError: Object function (){return a.apply(c,e.concat(k.call(arguments)))} has no method 'process' 
```

编辑：

```
$("#typeahead").typeahead({
    source: function(query,callback){ 
        $.ajax({
            url: "http://192.168.8.132/disc/autocomplete/"+query,
            type: "POST",
            dataType: "JSON",
            async: false,
            success: function(data){                   
                //this.process(data);
                callback(data);
            }
        });
    },
    items:8,
    onselect: function (obj) { 
    // window.location = obj.url;
    }   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:56:44.177

什么是预输入？在调用流程成员之前，您显然需要对其进行处理。（实例化，无论预输入应该是什么）。

编辑 1：

```
source: function(query,callback/** you need that to execute something after the XMLHttp request has returned**/){ 
        $.ajax({
            url: "http://localhost/disc/autocomplete/"+query,
            type: "GET",
            dataType: "JSON",
            async: true,
            success: function(data){
                /** execute the callback here do whatever data processing you want before**/
                callback(data); 
            }
        });
    }, 
```

在函数式编程中，它被称为延续（如 GOTO 指令）。

编辑 2：

你不决定什么是回调，回调是函数，所以除了用你收到的数据调用它之外，不要尝试做任何其他事情。同样，**回调**是一个类似 GOTO 的指令，它是一个延续，你不能控制它。您需要使用数据作为参数来执行它。

# javascript - 如何实现 jQuery 滚动/叠加效果（视频在描述）

> ID：13636093
> 
> 赞同：0
> 
> 时间：2012-11-29T22:40:56.363
> 
> 标签：javascript, jquery, html, css

我有两列。

左列包含动态长度的文本。

右列的高度是固定的，将包含每次页面加载随机选择的一组图像。

我正在尝试创建一种效果，当用户滚动时，*Image 2在**Image 1*上方滚动。当它到达顶部时，*图像 1*开始向上滚动直到消失，然后*图像 3*进入并重复该过程。

由于这相当令人困惑，我制作了一个简短的视频来描述所需的效果。

[视频 - MP4](http://cloud.alanwoo.ca/Zedo)

我已经开始尝试让它在[这个 jsbin](http://jsbin.com/eqixiv/2)中工作，但是当用户向下滚动以及需要更多图像时不知所措。我认为我目前的道路不是正确的方向。我认为使用像 jQuery 航点这样的东西是我应该追求的方向？

# java - 有什么方法可以知道数组列表是否包含一段文本？

> ID：13636094
> 
> 赞同：2
> 
> 时间：2012-11-29T22:40:58.230
> 
> 标签：java, arrays, string, arraylist, contains

我有一个包含几个项目的数组列表。假设它们是：“深棕色”，“蓝色”，“绿色”，....

有什么方法可以查找我的某些物品中是否有字符串“DARK”？我知道 contains 会这样做，但只有在字符串完全正确的情况下才会这样做。我的想法是寻找一个以我的项目之一开头但没有所有最后一个字符的文本。

我有想法做一个循环，如：

```
for(int i=0;i<arraylist.size;i++){
  String s = arraylist.get(i);
  if (s.startsWith(mytext)){
   do something
  }
} 
```

但这似乎是一个非常慢的方法，因为 arraylist 可以包含很多元素。有更好的想法吗？

**编辑**

只是为了确保你理解我的观点。我想知道我的数组列表中的一个项目是否包含一个以某些文本开头的元素并获取该元素的完整文本。ArrayList.contains 是一个布尔值。如果我需要检索信息，我将不得不使用 IndexOf 左右，但是如果我输入“棕色”，这个函数会给我 null

**编辑 2**

这是给你的 auselen：

Arraylist（大约 5000 个元素）：

*   “大卫的猫在他的卧室里”
*   “我喜欢月亮”
*   “我想去火星”
*   “我的球是红色的”
*   “他们总是忘记南极洲”
*   ...

我想知道是否有一个以“我想”开头的元素，然后检索该元素的其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:07:08.603

> 这似乎是一个非常慢的方法，因为 arraylist 可以包含很多元素。

比如，一百万？

```
Nov 30, 2012 10:05:20 AM test.t100.t001.ArrayListSpeed main
INFO: Creating entries.
Nov 30, 2012 10:05:21 AM test.t100.t001.ArrayListSpeed main
INFO: Searching..
Nov 30, 2012 10:05:21 AM test.t100.t001.ArrayListSpeed main
INFO: Searching 'dark' 333716
Nov 30, 2012 10:05:21 AM test.t100.t001.ArrayListSpeed main
INFO: Searching 'light' 333333
Nov 30, 2012 10:05:22 AM test.t100.t001.ArrayListSpeed main
INFO: Searching 'plain' 332951 
```

## 代码

```
package test.t100.t001;

import java.util.ArrayList;
import java.util.Random;
import java.util.logging.Level;
import java.util.logging.Logger;

public class ArrayListSpeed {

    public static String[] PREFIX = {"Dark ", "Light ", "Plain "};
    public static String[] COLOR = {"Red", "Green", "Blue"};

    public static String getColor(Random r) {
        int val = r.nextInt(COLOR.length);
        return COLOR[val];
    }

    public static String getPrefix(Random r) {
        int val = r.nextInt(PREFIX.length);
        return PREFIX[val];
    }

    public static int countPrefixes(ArrayList<String> list, String prefix) {
        int count = 0;
        for (String val : list) {
            if (val.toLowerCase().startsWith(prefix.toLowerCase())) {
                count++;
            }
        }
        return count;
    }

    public static void main(String[] args) {
        Logger logger = Logger.getAnonymousLogger();
        ArrayList<String> list = new ArrayList<String>();
        Random r = new Random();
        logger.log(Level.INFO, "Creating entries.");
        for (int ii=0; ii<1000000; ii++) {
            list.add( getPrefix(r) + getColor(r) );
        }
        logger.log(Level.INFO, "Searching..");
        logger.log(Level.INFO, 
                "Searching 'dark' " + countPrefixes(list,"dark"));
        logger.log(Level.INFO, 
                "Searching 'light' " + countPrefixes(list,"light"));
        logger.log(Level.INFO, 
                "Searching 'plain' " + countPrefixes(list,"plain"));
    } 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T02:32:40.733

将字符串保存在 sorted(!) 数组中，并用于`binarysearch`查找前缀的插入点。比赛将在那个时候进行，如果有的话。

如果这是*O(log n)*而不是*O(n)*的性能，您应该会发现它要快得多，尤其是对于大型数据集。

```
import static org.junit.Assert.assertEquals;
import java.util.Arrays;
import org.junit.Test;

public class ContainsPrefix {

    public static String findWithPrefix(String[] data, String prefix) {
        int n = Arrays.binarySearch(data, prefix);
        if (n < 0) n = -1 - n;
        // Loop here if you want to find all matches ...
        if (!data[n].startsWith(prefix)) return null;
        return data[n];
    }

    @Test
    public void shouldFindStringWithPrefix() {
        String[] data = { //
                "David's cat is in his bedroom", //
                "I like the moon", //
                "I want to travel to Mars", //
                "My ball is red", //
                "They always forget about Antarctida", //
                "..." //
            };
        Arrays.sort(data);
        String found = findWithPrefix(data, "I want to");
        assertEquals("I want to travel to Mars", found);

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T22:47:06.980

要么像以前那样做，要么变得更复杂。有一个名为“trie”的搜索结构，但这很复杂。

你可以通过让一个 a-z 数组指向你排序的 ArrayList 中第一个字母的起始位置来获得一点好处。然后，您只需在以相同字母开头的单词中进行搜索。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T22:47:54.873

或者您可以使用完全不同的方法。并包装 ArrayList 并检查 list.add() 是否匹配。并将其存储在某个 var 中以便快速访问。但是，如果您要搜索多个值，那么这种方法根本不好:)。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-29T22:45:33.123

下面是一个可用于获取每个项目的函数示例。这个速度并不是真正的增加。由于这是一个数组列表，因此没有真正的好方法来做到这一点。有更好的数据结构来搜索字符串的一部分。

```
 public class RegionMatchesDemo {
public static void main(String[] args) {
    String searchMe = "Green Eggs and Ham";
    String findMe = "Eggs";
    int searchMeLength = searchMe.length();
    int findMeLength = findMe.length();
    boolean foundIt = false;
    for (int i = 0; 
         i <= (searchMeLength - findMeLength);
         i++) {
       if (searchMe.regionMatches(i, findMe, 0, findMeLength)) {
          foundIt = true;
          System.out.println(searchMe.substring(i, i + findMeLength));
          break;
       }
    }
    if (!foundIt)
        System.out.println("No match found.");
  }
} 
```

# regex - 如何用新字符串替换正则表达式

> ID：13636095
> 
> 赞同：0
> 
> 时间：2012-11-29T22:41:07.870
> 
> 标签：regex, vba, ms-word

我想用新字符串替换所有三个字母的单词。MsgBox 显示变量threeLetterWord 有新值，但文本不变。

```
Sub ShowThreeLetterWords()

Set threeLetterRegExp = New RegExp
   threeLetterRegExp.Pattern = "\b[a-zA-Z]{3}\b"
   threeLetterRegExp.Global = True

   Dim threeLetterWords As MatchCollection
   Set threeLetterWords = threeLetterRegExp.Execute(ActiveDocument.Range)

   For Each threeLetterWord In threeLetterWords
      threeLetterWord = threeLetterRegExp.Replace(threeLetterWord, "sasa")
      MsgBox threeLetterWord
   Next threeLetterWord
 End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:58:04.463

正则表达式很好。我认为唯一的问题是你不应该在循环中再次分配 treeLetterWord，因为它是一个“foreach 迭代变量”。

直接地

```
MsgBox threeLetterRegExp.Replace(threeLetterWord, "sasa") 
```

应该可以

# r - 减去作为 plotmath 中的指数（在 ggplot2 图例中）

> ID：13636096
> 
> 赞同：4
> 
> 时间：2012-11-29T22:41:21.490
> 
> 标签：r, ggplot2, plotmath

我正在尝试在`ggplot2`包含减号作为指数的图中创建一个图例（指数中没有其他字符）。但是，我无法弄清楚`plotmath`语法。

似乎以下内容会起作用：

```
expr1 <- expression(paste("text", main[sub]^{-}))

ggplot(mpg, aes(x=cty, y=hwy, colour=drv)) + geom_point() +
  scale_colour_discrete(labels=c(expr1, "b", "c")) 
```

（如果我们说它确实有效`expr1 <- expression(paste("text", main[sub]^{super}))`。是否有转义字符或减号的东西`plotmath`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T22:45:13.013

您几乎可以肯定需要在该减号周围加上引号，因为否则它会被认为是一个中缀运算符，因此需要在它之前和之后使用参数。如果这不能解决问题，请添加一个小测试用例。

转义在 plotmath 中不起作用。特别是您不能使用 "\n" 作为行尾/换行标记（如 help(plotmath) 页面中所述。

这也成功了：

```
expr1 <- expression(paste("text", main[sub]^{phantom()-phantom()})) 
```

我以前从未尝试过使用`phantom`前置和后置中缀运算符，但解释器似乎可以接受。Plotmath 表达式确实会被解析，并且需要符合 R 解析规则。见`?Syntax`。正如评论中所指出的，使用`"-"`作为前缀运算符`phantom()`也可以成功，因为减号可以用作一元减号或二元减号：

```
expr1 <- expression(paste("text", main[sub]^{-phantom()})) 
```

我们也可以使用空字符值作为前缀减号后的项目：{-""}

# javascript - 如何在单个链接上打开带有fancybox 的画廊？（不同的html）

> ID：13636105
> 
> 赞同：0
> 
> 时间：2012-11-29T22:41:54.640
> 
> 标签：javascript, jquery, html, fancybox

嗨，我有一个带有不同专辑链接的 HTML，我想只需单击一个简单的链接即可查看图库中的第一张图片，然后进行导航。问题是每个专辑都来自其他 HTML .. 在 gallery.html 中只是专辑的链接。

示例：gallery.html

```
 <td><a href="albumprueba.php"><img   src="album_prueba1/001.jpg" alt="image19" width="91%" height="56" /></a></td>
            <td><a href="albumprueba2.html"><img    src="album_prueba2/40.jpg" alt="image20" width="99%" height="60"/></a></td> 
```

画廊的PHP：

```
 <a  class="fancyboxi" data-fancybox-group="gallery" title="Laurea" 
href="album_prueba1/<?php echo $archivos[$imagen_a_empezar]?>">
<img  src="album_prueba1/<?php echo $archivos[$imagen_a_empezar]?>" alt=""   width="19%"/></a> 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:57:49.657

**索引.htm**

```
<html>
<head>
    <title></title>
    <link href="jquery.fancybox-1.3.4.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
    <script src="jquery.fancybox-1.3.4.js" type="text/javascript"></script>
</head>
<body>
<a href="#" id="manualCall1">Gallery 1</a><br/>
<a href="#" id="manualCall2">Gallery 2</a>
<script type="text/javascript">
    $(document).ready(function () {
        $("#manualCall1").click(function () {
            $.getJSON('gallery1.json', function (data) {
                $.fancybox(data, {
                    'index': $(this).data('index'),
                    'padding': 0,
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    'type': 'image',
                    'changeFade': 0
                });
            });
        });
        $("#manualCall2").click(function () {
            $.getJSON('gallery2.json', function (data) {
                $.fancybox(data, {
                    'index': $(this).data('index'),
                    'padding': 0,
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    'type': 'image',
                    'changeFade': 0
                });
            });
        });
    });
</script>
</body>
</html> 
```

**画廊1.json**

```
[{
    "href" : "https://lh5.googleusercontent.com/-uK9RF21pLaw/T0-bfLydozI/AAAAAAAAG2Q/CHSPYlMM5hA/w339-h225-n-k/_DSC1774_DRI_PS_small.jpg", 
    "title" : "image title 1"
}, {
    "href" : "https://lh4.googleusercontent.com/-B9Fop2ZofLI/T5JZiYzoZKI/AAAAAAAAH5M/0X6lYTa8LAs/w402-h266-n-k/_DSC8800-HDR_corrected_PS_small.jpg",
    "title" : "image title 2"
}, {
    "href" : "https://lh6.googleusercontent.com/-MtVcdgn6ZA0/T6LSPnrxfbI/AAAAAAAAIP8/g_BubTeiVbY/w467-h310-n-k/_DSC3079_DRI_PS_transf_small.jpg",
    "title" : "image title 3"
}] 
```

**画廊2.json**

```
[{
    "href" : "https://lh4.googleusercontent.com/-PmHloor5LiU/T7K0_5nq55I/AAAAAAAAIcI/qz8NYty16Yo/w400-h248-n-k/_DSC3336_DRI_PS_defish_small.jpg", 
    "title" : "image title 2 1"
}, {
    "href" : "https://lh3.googleusercontent.com/-Okzptj_C2cI/T76BCKM4asI/AAAAAAAAKSE/gvPy2sKdbmU/w386-h254-n-k/_DSC3533_DRI_PS_defish_small.jpg",
    "title" : "image title 2 2"
}, {
    "href" : "https://lh6.googleusercontent.com/-snm10rkSqDo/T94UWhaFGjI/AAAAAAAALAk/X7b5dVcSKb4/w412-h273-n-k/_DSC3440_DRI_PS_defish_small.jpg",
    "title" : "image title 2 3"
}] 
```

# php - 本地主机上的 PHP 错误。错误 403

> ID：13636106
> 
> 赞同：2
> 
> 时间：2012-11-29T22:41:56.570
> 
> 标签：php, xampp

我目前在使用 XAMPP 的 php 中遇到错误。错误是：

```
Access forbidden!

You don't have permission to access the requested object. It is either read-protected or not readable by the server.

If you think this is a server error, please contact the webmaster.

Error 403

localhost
Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 
```

我没有对 XAMPP 的配置进行任何更改，也无法解决这个问题。我已阅读有关该错误的信息并尝试了建议的修复程序，但对我或其他尝试过它们的人都不起作用。

关于此的更多信息，仅在单击提交按钮（）后才会发生。

任何关于如何解决这个问题的建议都会非常有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:27:31.150

PHP 可能没有运行。我曾经在 linux 上遇到过 apache2 php5 和 apache-php5-mod（来自我的包存储库）的问题。
在我修复它之前，我只能提供普通的 html（无 php）文件。

一个简单的 php_info() 文件有效吗？
带有提交按钮的页面是 .php 还是 .html？

如果 phpinfo 文件失败，请尝试创建一个简单的 php 信息并从命令行运行它（没有 apache 服务器）
（这样做）：

1\. 打开 Windows 资源管理器。
2\. 导航到 php.exe
3\. 在地址栏中，输入“C:\WINDOWS\system32\cmd.exe”（应该会打开一个窗口。）
4\. 在窗口中输入“php.exe PATH_TO_PHPINFO_FILE\FILENAME.php”

请告诉我它输出什么。

# objective-c - MagicalRecord：现在创建，（可能）稍后保存

> ID：13636112
> 
> 赞同：1
> 
> 时间：2012-11-29T22:42:46.213
> 
> 标签：objective-c, ios, macos, core-data, magicalrecord

我最近一直在使用 MagicalRecord - 天哪，它让我的 Core Data 生活变得更加轻松，因此完全归功于质量库的作者！

无论如何，场景是我有 3 个控制器的导航控制器堆栈，这里从下到上称为 ABC：

*   视图控制器 A 是一个表单，我想在其中填写有关实体的详细信息（即其属性）。
*   视图控制器 B 显示来自实体的计算结果（例如，通过实例函数）。
*   为了简单起见，视图控制器 C 只是一个确认 & 是我想保存实体的地方。

MagicalRecord 中是否有一种方法可以`[MyEntity createEntity]`在视图控制器 A 中调用其属性集，通过 B 将其传递给 C 并*仅*将其保存在 C 中？如果用户决定从 B 或 C 返回 A，这还包括根本不保存它的可能性。

我完全明白我很可能在使用 Core Data 时遇到了错误，这可能是不可能的。作为一种解决方法，我已经知道我可以创建一个类方法，在给定相关参数的情况下执行相同的计算并将所有参数通过堆栈从 A 传递到 C。

**编辑**：为了清楚起见，我想调用`[[NSManagedObjectContext defaultContext] save]`View Controller C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:48:17.440

是的，当然..只是不保存managedContext。

VC 无论如何都应该在主线程上运行.. 所以所有人都可以使用

```
[NSManagedObjectContext defaultContext] 
```

或者

使用控制器上的属性在三个类之间传递 MOC。

```
@property NSManagedObjectContext *context; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T12:50:51.367

After some testing, I knew @Daij-Djan had the right idea in that I don't call `[[NSManagedObjectContext defaultContext] save]` if I don't want to save my entity. As a result I leave that call until View Controller C to do the saving.

However, my testing showed I need to do a little more to avoid saving any unwanted entities. I've noticed if I go to A from B via the back button, I want to discard the entity there. In my use-case, it doesn't matter if I just create another new entity going from A to B, and I never pass back through View Controller B if I have successfully saved the entity.

So basically I need to delete the unsaved entity if the back button is pressed on View Controller B. [This answer](https://stackoverflow.com/a/3445994/204168 "This answer") helps me massively there, resulting in this code in View Controller B:

```
-(void) viewWillDisappear:(BOOL)animated {
    if ([self.navigationController.viewControllers indexOfObject:self] == NSNotFound) {
        // self.entity is the instance of my entity

        [self.entity deleteEntity];
        self.entity = nil;
    }
    [super viewWillDisappear:animated];
} 
```

# java - 在二十一点分裂时破坏

> ID：13636113
> 
> 赞同：0
> 
> 时间：2012-11-29T22:42:47.837
> 
> 标签：java

在我的二十一点中，我让玩家击打或站立，然后测试结束循环你有这个代码：

```
int runLoopCount1 = 0;
    for (int i = 0; i < players.length; i++) {
        if (players[i].wantSplit = false){
                if(players[i].getStatus() == true){
                    runLoopCount1++;
                }
        }

        else if (players[i].wantSplit = true){
            if ((players[i].splits[0].busted == true||
                 players[i].splits[0].standed == true) &&
                (players[i].splits[1].busted== true ||
                 players[i].splits[1].standed == true)){ // null pointer here 
                        runLoopCount1++;
                }
            }
        }

   if(runLoopCount1 == players.length){
        runLoop = false;
   } 
```

现在我得到一个`NullPointerException`. 我不知道为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:45:22.677

你是真的意思`if(players[i].wantSplit = false)`还是`if(players[i].wantSplit == false)` 一样`if(players[i].wantSplit = true)``if(players[i].wantSplit == true)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:45:14.513

很可能`splits`在每个播放器中都没有正确初始化。

```
players[i].splits[0].standed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:46:24.903

这意味着您正在尝试访问未实例化的对象。例如，如果你这样做：

```
players[i].wantSplit 
```

但是`players[i]`没有实例化，那么会抛出空指针异常

# python - python-ldap 和 Microsoft Active Directory：连接和删除用户

> ID：13636117
> 
> 赞同：0
> 
> 时间：2012-11-29T22:43:07.757
> 
> 标签：python, active-directory, ldap, python-ldap

python-ldap newb 在这里。我正在尝试使用以下示例代码执行此操作：

```
import ldap

## first you must bind so we're doing a simple bind first
try:
l = ldap.open("valid ip")
l.set_option(ldap.OPT_REFERRALS, 0)

l.protocol_version = ldap.VERSION3  
# Pass in a valid username and password to get 
# privileged directory access.
# If you leave them as empty strings or pass an invalid value
# you will still bind to the server but with limited privileges.

username = "cn=administrator, o=joe.local"
password  = "password"

# Any errors will throw an ldap.LDAPError exception 
# or related exception so you can ignore the result
l.simple_bind(username, password)
      except ldap.LDAPError, e:
print e
# handle error however you like

      # The next lines will also need to be changed to support your requirements and directory
      deleteDN = "uid=hihihi, ou=LoginUsers,o=joe.local"
      try:
# you can safely ignore the results returned as an exception 
# will be raised if the delete doesn't work.
l.delete_s(deleteDN)
      except ldap.LDAPError, e:
print e
## handle error however you like 
```

我收到各种错误：

使用虚拟机的 IP：

```
{'info': '000004DC: LdapErr: DSID-0C0909A2, comment: In order to perform this op
eration a successful bind must be completed on the connection., data 0, v1db1',
'desc': 'Operations error'} 
```

使用 localhost 或 127.0.0.1 ：

```
{'desc': "Can't contact LDAP server"}
{'desc': "Can't contact LDAP server"} 
```

我查看了以下没有解决方案的 SO 帖子：

[Python-ldap 身份验证](https://stackoverflow.com/questions/140439/authenticating-against-active-directory-using-python-ldap) [Python-ldap microsoft](https://stackoverflow.com/questions/9441594/python-ldap-and-active-directory-issue)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T16:28:01.550

根据[文档](http://www.python-ldap.org/doc/html/ldap.html#functions)，`ldap.open`已弃用。您应该尝试`ldap.initialize`，就像您提供的两个链接一样。此外，请确保您的专有名称中没有空格：`"cn=administrator, o=joe.local"`.

如果这不能解决问题，请务必提及该错误来自哪一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T06:04:03.720

你用的是什么版本的python？？？。代码很旧。现在打开是初始化，不要使用simple_bind，使用simple_bind_s。

如果要在 AD 中进行删除、更改密码等操作，必须先配置 TLS 连接。[http://araihan.wordpress.com/2009/10/05/windows-server-2008-active-directory-certificate-services-ad-cs/](http://araihan.wordpress.com/2009/10/05/windows-server-2008-active-directory-certificate-services-ad-cs/)

这是一个成功的连接。

```
import ldap

LDAP_SERVER_EMG = "ldaps://192.168.0.250"
BIND_DN = "Administrador@emgS.local"
BIND_PASS = "xxxXXXxxxXXXxxx"
USER_BASE = "dc=emgS,dc=local"
try:
   ldap.set_option(ldap.OPT_X_TLS_REQUIRE_CERT, 0)
   lcon_emg = ldap.initialize(LDAP_SERVER_EMG)
   lcon_emg.simple_bind_s(BIND_DN, BIND_PASS)
except ldap.LDAPError, e:
   print e 
```

然后您可以删除和更改用户密码。

lcon_emg.passwd_s，不管用。您需要简单地更改 de unicodepwd 属性来更改 Active Directory 中的用户密码。

```
#firs is a good practice to create a dict of all atributes of the user
ad_u = {
        'objectClass': ['top', 'person', 'organizationalPerson', 'user'],  
        'cn': 'User gecos or name',
       'displayName': 'User gecos or name',
       'User Gecos or Name',
       'distinguishedName': 'user distin name',
       'givenName': 'First name i guest',
       'sAMAccountName': 'user_login_name',
       'sn': 'middle name i guest',
        #USER PRIVILEGE, SEE THE DOCUMENTATION OF AD FOR MORE INFORMATION, BECAUSE I DON'T REMEMBER :)
       'userAccountControl': '514',
        #user_login_name, with domain extension
       'userPrincipalName': '%s@emg.local' % 'user_login_name',
       'mail': 'user_login_name@emaildomainorwhatever',
       'employeeID': 'unique_user_number'
       }
mods = ldap.modlist.addModlist(ad_u)

try:
   lcon_emg.add_s(ad_u.get('distinguishedName'),
                  mods)
except Exception, e:
   response.update({'error_ad': 'ActiveD: Error to add user %s' % str(e)})
else:
   response.update({'success_ad': 'ActiveD: Success add user'})

#HERE YOU MAKE THE utf-16-le encode password
unicode_pass = unicode('\"' + kwargs.get('cclara') + '\"', 'iso-8859-1')
password_value = unicode_pass.encode('utf-16-le')
#just change the atribute in the entry you just create
add_pass = [(ldap.MOD_REPLACE, 'unicodePwd', [password_value])]

# 512 will set user account to enabled
#change the user to enabled
mod_acct = [(ldap.MOD_REPLACE, 'userAccountControl', '512')]

try:
    lcon_emg.modify_s(ad_u.get('distinguishedName'), add_pass)
except ldap.LDAPError, error_message:
    response.update({'error_ad_clave': 'ActiveD: Error to gen the pass %s' % str(error_message)})
else:
    response.update({'success_ad_clave': 'ActiveD: Success gen pass'})

try:
    lcon_emg.modify_s(ad_u.get('distinguishedName'), mod_acct)
except ldap.LDAPError, error_message:
    response.update({'error_ad_hab': 'Error to enable user %s' % str(error_message)})
else:
    response.update({'success_ad_hab': 'SUccess enable user'})
lcon_emg.unbind_s() 
```

如果您想稍后更改密码。

```
pad = ('"%s"' % password).encode("utf-16-le")

try:
   mod_attrs = [(ldap.MOD_REPLACE, 'unicodePwd', pad),
                (ldap.MOD_REPLACE,'unicodePwd',pad)]
   lcon_emg.modify_s(rdnad, mod_attrs)
except Exception, e:
     response.update({'error_ad': 'No se pudo cambiar la clave %s' % str(e)})
else:
     response.update({'success_ad': 'Cambio exito en Active Directory'}) 
```

我希望这个答案对你有帮助

# ruby-on-rails - 无法让 order_by :score 与 Sunspot on Rails 一起使用

> ID：13636118
> 
> 赞同：0
> 
> 时间：2012-11-29T22:43:16.633
> 
> 标签：ruby-on-rails, ruby, search, solr, sunspot

我的模型中有以下内容：

```
searchable do
  boost { image? ? 2.0 : 1.0 }
end 
```

我在我的控制器中执行以下操作：

```
@search = Profile.solr_search do
  with :is_private, false
  without(:id).equal_to(current_profile.id)
  order_by :score, :desc
  paginate page: (params[:page] || 1), per_page: 9
end 
```

我`Profile.solr_reindex`在 Rails 控制台中尝试过，但结果的顺序没有改变。 `order_by :random`工作，`order_by :name`工作，但我不能按分数排序。这就像我的文档提升不起作用。我的目标是让所有设置了图像的个人资料首先出现。我目前得到的是第一个结果是带有图像的配置文件，然后是一堆无图像的配置文件，然后是另一个带有图像的配置文件。

**编辑：**认为我没有在模型中为 定义字段可能很重要`image`，所以我尝试添加`string :image`到`Profile`. 没运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:00:57.660

好的，按分数提升和排序的坚果。我将以下内容放在`searchable`我的模型中的块中：

```
boolean :has_image, using: :image? 
```

然后`solr_search`在我的控制器中的块中进行以下操作：

```
order_by :has_image, :desc
order_by :random, :desc 
```

现在，我首先以随机顺序获取所有带有图像的配置文件，然后是所有没有图像的配置文件，也是随机顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T07:55:59.140

您还可以尝试根据您的标志影响得分，如下所示：

```
@search = Profile.solr_search do
  boost(10) { with(:has_image, true)}
  ...
end 
```

# c# - 如何在 Silverlight 中的 StackPanel 或网格中旋转图像

> ID：13636119
> 
> 赞同：0
> 
> 时间：2012-11-29T22:43:27.820
> 
> 标签：c#, silverlight

我有一个图像控件位于网格控件内。我已经有一个按钮可以放大这张图片。放大后，会显示水平/垂直滚动条。然后我旋转包含网格的图像，图像和网格滚动条搞砸了。我应该如何将图像控件的放大和旋转结合起来？以下是我在项目中使用的代码。

我使用的图像控件放大代码（x是图像控件）：

```
if ((x as Image) != null) { x.Height = x.Height * 1.3; x.Width = x.Width * 1.3; } 
```

我使用的旋转代码（x 是图像控件）：

```
if ((x as Image) != null)
{    
    RotateTransform rotate = new RotateTransform(); rotate.Angle = rotateAngle;
    rotate.CenterX = x.Width / 2;
    rotate.CenterY = x.Height / 2;
    x.RenderTransform = rotate;                                       
}; 
```

XAML 是：

```
<ScrollViewer x:Name="scrollViewer" Height="480" Width="615"
                    VerticalScrollBarVisibility="Auto"
                    HorizontalScrollBarVisibility="Auto">
  <ScrollViewer.Content>
      <Grid x:Name="ImageGrid">
          <StackPanel x:Name="ImageStackPanel">
              <Image Source="..." VerticalAlignment="Center"  Width="220" Height="170" ></Image>  
          </StackPanel>
      </Grid>
  </ScrollViewer.Content>
</ScrollViewer> 
```

有没有人可以借用任何现有的代码片段来解决这个技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:56:32.510

这可能会满足您的需求：

```
 <Image x:Name="image" Source="myImageSource" Stretch="Uniform" 
               HorizontalAlignment="Center" VerticalAlignment="Center" 
               RenderTransformOrigin="0.5, 0.5">
                 <Image.RenderTransform>
                     <TransformGroup>
                         <RotateTransform x:Name="Rotate"/>
                         <ScaleTransform x:Name="Scale" />
                     </TransformGroup>
                 </Image.RenderTransform>
  </Image> 
```

后面的代码：

```
 Rotate.Angle = 45;
  Scale = 0.25; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:54:30.197

我认为您需要使用[TransformGroup](http://msdn.microsoft.com/en-us/library/system.windows.media.transformgroup.aspx)一次使用多个转换：

```
 ScaleTransform myScaleTransform = new ScaleTransform();
        myScaleTransform.ScaleY = 3;

        RotateTransform myRotateTransform = new RotateTransform();
        myRotateTransform.Angle = 45;

        // Create a TransformGroup to contain the transforms 
        // and add the transforms to it.
        TransformGroup myTransformGroup = new TransformGroup();
        myTransformGroup.Children.Add(myScaleTransform);
        myTransformGroup.Children.Add(myRotateTransform);

        // Associate the transforms to the image.
        x.RenderTransform = myTransformGroup; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:32:47.787

您可能缺少`LayoutTransformer`Silverlight [Toolkit](http://silverlight.codeplex.com/)和[Toolkit 开发人员之一](http://blogs.msdn.com/b/delay/archive/2009/04/10/a-bit-more-er-than-meets-the-eye-easily-animate-and-update-layouttransformer-with-animationmediator.aspx)`AnimationMediator` 的。

使用 ，`LayoutTransformer`您可以将其内容设置为任何内容，而不仅仅是图像，并对其应用任何转换，并且与通常的不同`RenderTransform`，它将影响布局和实际大小。

我有一个类似的场景，我像这样使用它：

```
<Grid>
    <fs:AnimationMediator x:Name="RotateMediator" LayoutTransformer="{Binding ElementName=LayoutTransformer}" AnimationValue="{Binding Angle, ElementName=RotateTransform, Mode=TwoWay}" />
    <fs:AnimationMediator x:Name="ScaleXMediator" LayoutTransformer="{Binding ElementName=LayoutTransformer}" AnimationValue="{Binding ScaleX, ElementName=ScaleTransform, Mode=TwoWay}" />
    <fs:AnimationMediator x:Name="ScaleYMediator" LayoutTransformer="{Binding ElementName=LayoutTransformer}" AnimationValue="{Binding ScaleY, ElementName=ScaleTransform, Mode=TwoWay}" />

    <tkt:LayoutTransformer x:Name="LayoutTransformer" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
        <tkt:LayoutTransformer.LayoutTransform>
            <TransformGroup>
                <RotateTransform x:Name="RotateTransform" />
                <ScaleTransform x:Name="ScaleTransform" />
            </TransformGroup>
        </tkt:LayoutTransformer.LayoutTransform>

        <Image x:Name="MyImage" Source="mysource.png" Width="600" Height="800" />

    </tkt:LayoutTransformer>
</Grid> 
```

由于缺少 MultiBinding，您可能还必须手动处理输入值（来自 Slider 控件等）更改的事件，然后相应地设置`RotateMediator`等的 AnimationValues。

# .net - Google Drive 网页可以托管 ClickOnce 应用程序吗？

> ID：13636124
> 
> 赞同：3
> 
> 时间：2012-11-29T22:43:36.663
> 
> 标签：.net, clickonce, google-drive-api

好吧，这是一个很长的镜头，但我认为值得一问，即使我最终看起来很愚蠢（不会是第一次）。随着谷歌最近宣布 HTML 内容可以在谷歌驱动器上发布 (http://googleappsdeveloper.blogspot.com/2012/11/announcing-google-drive-site-publishing.html)，有人知道是否有可能在那里也托管 ClickOnce 应用程序？

是的，我很便宜。尤其是在虚拟主机方面。我写的应用程序不多，很想以低廉的免费价格托管它们。我很便宜。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:50:18.510

我不这么认为，因为您必须能够[为文件类型设置 MIME 类型](http://robindotnet.wordpress.com/2010/06/12/mime-types-for-clickonce-deployment/)。你必须尝试一下。

您始终可以将它们放在 Azure blob 存储中，这可能会花费您 6 美元/年。[自从写这篇文章](http://robindotnet.wordpress.com/2011/07/18/host-your-clickonce-deployment-in-azure-for-pennies-per-month/)以来，价格已经下降。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-24T20:25:39.830

这是使用 Dropbox 的一个很好的免费替代解决方案。它可能适用于 GoogleDrive - 尚未尝试过。

1.  安装 Dropbox 客户端，
2.  安装后，导航到您指定为 Dropbox 目录的任何目录中的 Public 子目录，
3.  右键单击“如何使用公共文件夹.rtf”文件，
4.  在 Dropbox 菜单项中, 点击 “复制公共链接”,
5.  将其粘贴到任何记事本应用程序中，
6.  在 Visual Studio 中，在项目属性的“发布”选项卡中，使用以下信息（根据需要替换您自己的位置）：
    *   **发布文件夹位置：** C:My DocumentsMy DropboxPublicProject1
    *   **安装文件夹位置：**
        [http](http://dl.dropbox.com/u/xxxxxx/Project1/) : //dl.dropbox.com/u/xxxxxx/Project1/（粘贴步骤 4 中的链接，删除如何使用 Public folder.rtf 部分并添加项目目录）
    *   点击“更新”按钮，
    *   **更新位置：** [http](http://dl.dropbox.com/u/xxxxxx/Project1/) ://dl.dropbox.com/u/xxxxxx/Project1/ （我总是这样做只是为了安全起见）
7.  发布
8.  就是这样！文件将同步到 Dropbox 服务器，并且项目已部署！

现在您只需提供[http://dl.dropbox.com/u/xxxxxx/Project1/index.html](http://dl.dropbox.com/u/xxxxxx/Project1/index.html)文件的 URL（如果您选择在发布选项中生成文件）或[http://dl .dropbox.com/u/xxxxxx/Project1/setup.exe](http://dl.dropbox.com/u/xxxxxx/Project1/setup.exe)直接。

归功于：*[迈克尔·S·克拉克](http://www.ne0ge0.com/dropbox-com-for-clickonce/)*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T20:31:49.537

我想**是**的，因为 ClickOnce 仅使用静态文件并且不需要服务器端脚本。

# javascript - 如何使用从各种复选框派生的字符串值填充文本区域？

> ID：13636128
> 
> 赞同：2
> 
> 时间：2012-11-29T22:43:44.777
> 
> 标签：javascript, forms, checkbox

我是 javascripting 的新手，但是通过阅读这个论坛上的问答，我学到了很多东西。就像他们说的那样，学习编码的最好方法是看看其他人是如何编码的！

我正在尝试使用基于 javascript/html 的表单来管理我的工作流程。一点背景知识，我是一名病理学家，为各种患者样本生成基于文本的报告。大部分输出都非常适合使用预先编写的“罐头评论”。我希望将此类评论链接到各种复选框值，以便我可以简单地选中相应的框，并将我的报告构建在文本区域中。

例如，如果我有 4 个不同的组织部位：

> [] 站点 1 [] 站点 2 [] 站点 3 [] 站点 4

并且可以为每个选择 4 种不同的诊断之一

> [] 诊断1 [] 诊断2 [] 诊断3 [] 诊断4

我希望能够选择一个站点和一个诊断，并在 textarea 中有相关的值，输出格式如下：

> 站点 1，活检：
> - 诊断 1
> 
> 站点 2，活检：
> - 诊断 1
> 
> SITE3，活检：
> - 诊断 3
> 
> 站点 4，活检：
> - 诊断 2

我在这里有一些表格的开头：

```
<body>
Duodenum sites <br/>
<form name=duodenum>
<input type="checkbox" name="duoDx1" id="duoDx1" /> DUO, NSA <br />
<input type="checkbox" name="duoDx2" id="duoDx2" /> DUO, _ PART <br />
<input type="checkbox" name="duoDx3" id="duoDx3" /> DUO, BULB <br />
<input type="checkbox" name="duoDx4" id="duoDx4" /> DUO, ULCER <br />
</form>

<p>&nbsp;</p>
Duodenum diagnoses <br/>    
<form name=duodiags>
<input type="checkbox" name="duoDiag1" id="duoDiag1" /> NSA <br />
<input type="checkbox" name="duoDiag2" id="duoDiag2" /> FOCAL ACTIVE <br />
<input type="checkbox" name="duoDiag3" id="duoDiag3" /> C A  <br />
<input type="checkbox" name="duoDiag4" id="duoDiag4" /> CELIAC <br />
</form>

<p>&nbsp;</p>

<p>&nbsp;</p>

<textarea id="outPut" placeholder="Diagnoses" cols=80 rows=20></textarea>

</body> 
```

我的JavaScript：

```
var duoDxs = {
duoDx1: 'DUODENUM, BIOPSY: \n \n',
duoDx2: 'DUODENUM, ___ PART, BIOPSY: \n \n',
duoDx3: 'DUODENUM, BULB, BIOPSY: \n \n',
duoDx4: 'DUODENUM, "ULCER", BIOPSY: \n \n'
}

var duoDiags = {
duoDiag1: '     - NO SIGNIFICANT ABNORMALITIES \n',
duoDiag2: '     - FOCAL ACUTE INFLAMMATION\n',
duoDiag3: '     - CHRONIC AND ACTIVE DUODENITIS\n',
duoDiag4: '     - VILLOUS BLUNTING AND INCREASED INTRAEPITHELIAL LYMPHOCYTES (SEE 
COMMENT)\n'
}

var mytextbox = document.getElementById('outPut');

var inputs = document.getElementsByTagName("input");
for (var i = 0; i < inputs.length; i++) {
if (inputs[i].type === "checkbox" && inputs[i].name.indexOf('duoDx') > -1) {
inputs[i].onchange = function() {
if (this.checked) {
mytextbox.value = mytextbox.value + duoDxs[this.name] + duoDiags[this.name];
} else {
mytextbox.value = mytextbox.value.replace(duoDxs[this.name], "");
            }
        }
    }
} 
```

[JSFiddle](http://jsfiddle.net/8cXdL/1/)

但是，我似乎无法让复选框值的两个部分以正确的方式填充文本区域。我似乎无法弄清楚如何使用填充我的 textarea 的功能来遍历站点和诊断？任何帮助/教育将不胜感激！

谢谢。CK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:58:31.040

根据您的问题，您希望将站点和诊断配对，并且该诊断可以多次使用：

```
站点 1，活检：
- 诊断 1

站点 2，活检：
- 诊断 1 << 诊断 1 的第二次使用

SITE3，活检：
- 诊断 3

站点 4，活检：
- 诊断 2

```

在这种情况下，复选框不是要走的路。*首先，由于一个*诊断似乎只有*一个*部位，a会更合适。其次，需要在您实际提供输入后重新设置这些值。*`<input type="radio">`*

 *把你的网站想象成一个咖啡自动售货机：首先你选择奶油的量（网站），然后选择糖的量（诊断），要么机器自动冲泡你的咖啡并将两者的值重置为未确定，要么你必须按一个按钮才能得到您的咖啡（或机器会给您的任何具有个人风味的饮料）。

因此，不要只为您的复选框使用一种机制，而是使用两种机制：一种用于站点，一种用于诊断。检查是否已经分配了合作伙伴。如果有伙伴，将两个值都添加到 textarea 并删除选择：

```
var choosenDiagnosis = null;
var choosenSite = null;

function testAndFill(){
    if(choosenDiagnosis !== null && choosenSite !== null){
        mytextbox.value += duoDxs[choosenSite.id]+ duoDiags[choosenDiagnosis.id] + "\n";
        choosenDiagnosis.checked = choosenSite.checked = false;
        choosenDiagnosis = choosenSite = null;
    }
}

var diagInputs = document.getElementsByName("duoDiag");
for (var i = 0; i < diagInputs.length; i++) {
    diagInputs[i].onchange = function() {
        choosenDiagnosis = this;
        testAndFill();       
    };
}
var diaxInputs = document.getElementsByName("duoDx");
for (i = 0; i < diaxInputs.length; i++) {
    diaxInputs[i].onchange = function() {
        choosenSite = this;
        testAndFill();       
    }; 
```

[**JSFiddle**](http://jsfiddle.net/8cXdL/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:04:02.283

换这个就行了

```
var duoDiags = {
             duoDiag1: '     - NO SIGNIFICANT ABNORMALITIES \n',
             duoDiag2: '     - FOCAL ACUTE INFLAMMATION\n',
             duoDiag3: '     - CHRONIC AND ACTIVE DUODENITIS\n',
             duoDiag4: '     - VILLOUS BLUNTING AND INCREASED 
                       INTRAEPITHELIAL LYMPHOCYTES  (SEE COMMENT)\n'
} 
```

和

```
var duoDiags = {
    duoDx1: '     - NO SIGNIFICANT ABNORMALITIES \n \n',
    duoDx2: '     - FOCAL ACUTE INFLAMMATION\n\n',
    duoDx3: '     - CHRONIC AND ACTIVE DUODENITIS\n\n',
    duoDx4: '     - VILLOUS BLUNTING AND INCREASED INTRAEPITHELIAL LYMPHOCYTES
                     (SEE COMMENT)\n\n'
} 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/8cXdL/2/)***

# linux - make modules_install 重新启动配置过程

> ID：13636129
> 
> 赞同：5
> 
> 时间：2012-11-29T22:43:48.897
> 
> 标签：linux, linux-kernel

我正在尝试为我的 Debian 机器编译一个 Linux 内核版本（linux-2.6.32.60）。第一步是通过键入以下内容创建配置文件 (.config)：

> 制作 xconfig

创建配置文件后，我只需运行 make 即可构建映像内核和模块。到那时没问题。

但是，在安装模块（.ko 文件）时，我输入：

> 制作modules_install

它没有安装新编译的模块，而是带来了一个不正确的命令行配置设置（配置文件已经创建）。

任何想法是什么导致配置重新启动？

问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-19T13:08:00.463

在调用 menuconfig 之前设置 ARCH 变量

```
$ make ARCH=arm menuconfig 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-30T03:33:24.973

该问题是由于我的操作系统中将 ARCH 设置为 i386 的开发环境变量引起的（这是在我们办公室运行某些基础设施所必需的）。由于我的内核在 64 位处理器中运行，并且 xconfig 依赖于同名变量，因此生成的 .config 文件是为 32 位架构生成的，整个编译过程也是如此。最后，这导致了安装错误（这确实是预期的）。

# java - 在 Java 中使用 RegEx 解析 CSV - 在单元格中转义双引号

> ID：13636139
> 
> 赞同：2
> 
> 时间：2012-11-29T22:44:43.810
> 
> 标签：java, regex, csv

我正在寻找一个 java 正则表达式，它将在 excel 单元格中转义双引号。

我已经按照这个示例进行操作，但需要对正则表达式进行另一项更改，以使其能够在其中一个单元格中转义双引号。

[在 Java 中使用 RegEx 解析 CSV 输入](https://stackoverflow.com/questions/1441556/parsing-csv-input-with-a-regex-in-java)

```
private final Pattern pattern = Pattern.compile("\"([^\"]*)\"|(?<=,|^)([^,]*)(?=,|$)"); 
```

示例数据：

> "A,B" ***,*** "2" 大小" ***,*** "text1,text2, text3"

上面的正则表达式在`2"`.

我希望输出如下所示。外部双引号是否存在无关紧要。

"A,B"
"2" 大小"
"text1,text2, text3"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:26:16.533

虽然我同意，使用正则表达式解析 CVS 并不是最好的方法，但更好的模式是：

```
Pattern pattern = Pattern.compile("^\"([^\"]*)\",|,\"([^\"]*)\",|,\"([^\"]*)\"$|(?<=,|^)([^,]*)(?=,|$)"); 
```

这将仅在引号和逗号之后终止单元格值，或者在命令和引号之后启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:27:22.093

正如 FJ 评论的那样，输入数据是模棱两可的。但是对于您的示例输入，您可以尝试

*   `string.split("\",\"")`获取方法`String[]`。在此之后，你得到一个包含 3 个元素的数组：

> ```
> [
> "A,B, 
> 2" size, 
> text1,text2, text3"
> ] 
> ```

*   删除数组第一个元素的第一个字符（双引号）
*   删除数组最后一个元素的最后一个字符（双引号）

# database - 同步不同的数据库 - django

> ID：13636143
> 
> 赞同：1
> 
> 时间：2012-11-29T22:44:52.030
> 
> 标签：database, django, postgresql, data-synchronization

我为我在新西兰的一个客户制作了一个 django web 应用程序（postgresql 后端）供内部使用。他们告诉我，他们也希望它被他们在马来西亚的一个分支机构使用（它需要连接到同一个数据库）。问题是，显然在马来西亚，互联网真的是不可预测的，而且有很多停机时间。

那么问题来了，当马来西亚分公司的互联网出现故障并让他们的数据库版本与新西兰的主数据库同步时，保持马来西亚分公司运行的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:07:59.883

您要做的是在多个（在您的情况下为 2 个）postgresql 数据库之间同步您的数据和模式。

有多种解决方案可以做到这一点，具体取决于您想要实现的目标。这是一个很好的起点 - [http://www.postgresql.org/docs/devel/static/high-availability.html](http://www.postgresql.org/docs/devel/static/high-availability.html)

此处列出了不同解决方案的摘要以及每个解决方案的优缺点 - [http://www.postgresql.org/docs/devel/static/different-replication-solutions.html#HIGH-AVAILABILITY-MATRIX](http://www.postgresql.org/docs/devel/static/different-replication-solutions.html#HIGH-AVAILABILITY-MATRIX)

# python - 使用 Python `isinstance` 是否正确？

> ID：13636149
> 
> 赞同：10
> 
> 时间：2012-11-29T22:45:19.677
> 
> 标签：python, oop, dynamic, instance

我有一个不同块的二维数组，都继承自 Block。我想检查我点击的块是否是 Dirt 类型的块，如下所示：

```
clickedblock = getClickedBlock()

if isinstance(clickedblock, Dirt):
    place a block

else:
    don't place a block 
```

我听说这`isinstance`很糟糕，应该避免，因为它会在代码中创建分叉。什么时候`isinstance`使用比较好？

对于我的问题，另一个更麻烦的解决方案是拥有一个名为“id”的 Block 字段，然后检查它是否等于某个表示 Dirt 的常量。但这听起来很糟糕，而且比简单的 . 更容易出错`isinstance`。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T22:55:42.070

您的示例似乎是`isinstance()`.

这并不是`isinstance()`坏事，通常多态性可以用于相同的目的（这导致使用类的代码更清晰）。

但有时，`isinstance()`这正是您所需要的。例如，检测变量是否为字符串的 Python 方法是`isinstance(var, basestring)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-28T08:54:14.180

我学会了反对使用它的艰难方法。问题是结果对类定义的导入方式很敏感：

*   在对象被实例化的地方
*   `isinstance`在进行测试的地方

如果一个导入是相对的，另一个是绝对的 - 检查将失败。本质上，这就像检查`SomeClass`vs之间的相等性`somepackage.SomeClass`。它们来自同一个文件等等都没有关系。此外，如果您以某种方式同时拥有根目录和`somepackage`目录，则会出现类似的结果`PYTHONPATH`- 然后绝对样式导入可以表示来自任一“源根”的路径，因此两个不同的绝对样式导入将导致失败实例检查。

人们可能会争论良好的做法将如何阻止这种情况的发生，但良好的做法也主要是关于不冒险。本着这种精神，我更喜欢将一些抽象方法放在一个共同的祖先类中，这样我以后就可以依赖事物是如何嘎嘎作响的，而不是解释器认为它们是什么。

在 Java 中，每个类都解析为其完全限定的类名。这些在程序中是独一无二的，并且对实例的测试轻而易举。在 Python 中，这些可能很滑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T23:00:59.770

我想我会把它改成更像：

```
PLACEABLE_TYPES = [ Dirt ]
if isinstance(clickedblock, PLACEABLE_TYPES):
   place the block
else:
   don't place the block 
```

但评论中的想法：

```
if clickedblock.is_placeable(that_place):
    place the block
else:
    don't place the block 
```

也有可取之处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T23:31:02.373

如果您不想使用它，您还有其他选择。传统的鸭子打字解决方案：

```
try:
    clickedblock_place = clickedblock.place
except AttributeError:
    # don't place block
else:
    clickedblock_place() 
```

或者您可以使用`hasattr`：

```
if hasattr(clickedblock, 'place'):
    clickedblock.place() 
```

我几乎从不使用 isinstance 除了检查（或者它是否关闭？）继承层次结构，例如，如果您需要知道名称是否指向 a `str`OR a `unicode`：

```
if isinstance(str1, basestring):
    blah, blah, blah 
```

# version-control - Libre Office Writer：删除而不是删除？

> ID：13636156
> 
> 赞同：7
> 
> 时间：2012-11-29T22:45:43.860
> 
> 标签：version-control, libreoffice, openoffice-writer, writer

我们偶尔会看到文件（通常来自我们的律师）的修订建议，其中删除的内容会被颜色编码并通过它进行删除。添加的内容也有自己的颜色编码。

我一直认为是使用了一些专业软件来实现这样的*版本控制*效果，但是我们的一位销售人员刚刚收到了他们客户的一份文件，它似乎处于那种“模式”。
当他试图删除任何东西时，它只会变成青绿色并被删除。

这是可以在 Libre 或 Open Office 中打开/关闭的功能吗？
如果是这样，在哪里/如何？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T05:03:31.523

主菜单 - `Edit`-`Changes`子菜单

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T02:56:11.800

此功能称为跟踪更改，它允许您来回传递文档并查看谁进行了更改。该功能可在“**编辑**” -> “**更改**”菜单下访问。此菜单中有 6 个项目：

*   记录
*   保护记录...
*   显示
*   接受或拒绝...
*   评论...
*   合并文档...

我应该提到我使用的是`LibreOffice`版本 3.6.4.3（内部版本 ID：2ef5aff），但这个菜单在以前的版本和 OpenOffice 中应该是相同的。

您可以通过选中/取消选中该`Show`项目来查看其他人的更改。如果您想禁用/启用您选中/取消选中的更改记录`Record`。最后，如果您想合并其他人的更改，请选中/取消选中`Accept or Reject...`。

如果您实际上想要做的不仅仅是禁用此功能，这里有一些额外的资源可以帮助您入门。

*   [使用 LibreOffice Writer 更改和评论进行协作](https://www.linux.com/learn/tutorials/405303%3acollaborate-using-libreoffice-writer-changes-and-comments)
*   [记录和显示更改](http://help.libreoffice.org/Common/Recording_and_Displaying_Changes)
*   [截屏演示跟踪更改](http://www.ilearnthings.com/2012/01/16/episode-11-tracking-libreoffice/)
*   [驯服 Apache OpenOffice - 跟踪更改](http://www.taming-openoffice-org.com/newsite/?page_id=109)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-22T16:58:37.857

**LibreOffice** **5.4.1.2.0**

`Edit -> Track Changes -> Record`（取消选中记录）

# python - 继承文件的访问属性

> ID：13636157
> 
> 赞同：0
> 
> 时间：2012-11-29T22:45:43.907
> 
> 标签：python, cherrypy, mako

我有以下`base.html`文件，它充当继承它的所有其他文件的主要框架。

```
<%! import cherrypy %>                        
<!DOCTYPE html>                               
<html>                                                                            
  <body>                                           
    <div class="container">
        <% attribute='defaultValue' %>
        ${attribute}   
        <p>                                   
              ${self.body()}                  
        </p>                                  
    </div>                                    
  </body>                                     
</html> 
```

现在我有另一个文件继承了`base.html`，让我们命名它`foo.html`：

```
<%inherit file="base.html" />                                                     

Whatever... ${anotherAttribute} 
```

html 文件将在 Python 文件中调用，文件名为`lookup.get_template('foo.html')`.

我可以`anotherAttribute`使用`lookup.get_template('foo.html').render(anotherAttribute='bar')`. 现在我想知道如何访问`attribute`in `base.html`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T18:30:07.540

您只能通过模块范围与“attr”共享类似的属性：

base.html

```
<%!
attribute = 'defaultvalue'
%> 
```

foo.html

```
${self.attr.attribute} 
```

否则 base.html 需要将其直接传递给 foo：

base.html

```
<%
   attribute = 'defaultvalue'
%>

${self.body(attribute=attribute)} 
```

foo.html

```
<%page args="attribute"/>

${attribute} 
```

# label - coreplot 饼图上的重叠文本

> ID：13636158
> 
> 赞同：0
> 
> 时间：2012-11-29T22:45:50.973
> 
> 标签：label, core-plot, pie-chart, overlapping

防止 coreplot 上重叠文本的最佳方法是什么？尤其是当一些切片可能很小的时候？重叠的文本出现在底部，我认为它的空间不足，无法将其放在任何地方，因此必须将一个标签堆叠在另一个标签之上。

我可以减小饼图的大小，但有没有更优雅的方法来实现这一点？

标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:37:26.343

Core Plot 目前没有对重叠标签做任何事情。您必须使用您对数据的了解并删除一些可能过于靠近的标签。

# ajax - IBM JAX-RS 1.1 处理 Dojo Ajax OPTIONS 请求

> ID：13636165
> 
> 赞同：1
> 
> 时间：2012-11-29T22:46:18.337
> 
> 标签：ajax, rest, dojo, jax-rs, apache-wink

我目前正在通过 WAS 7 和 Web 2.0 Feature Pack 1.1.0.0 试验 IBM JAX-RS 功能。我遇到的问题是客户端 Dojo ajax 调用会导致 CORS 情况，我基本上是想弄清楚如何正确处理 OPTIONS 请求。

我按照引用的 url 中的示例进行操作（虽然它适用于 WAS 8，但它不应该影响我正在玩的部分）；但是，据报道系统找不到任何支持OPTIONS的方法。

任何帮助将不胜感激！

参考 URL：[http ://www14.software.ibm.com/webapp/wsbroker/redirect?version=matt&product=was-base-iseries&topic=twbs_jaxrs_wadl_serving](http://www14.software.ibm.com/webapp/wsbroker/redirect?version=matt&product=was-base-iseries&topic=twbs_jaxrs_wadl_serving)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:20:47.930

虽然不到一天，但由于我没有看到任何回复，所以我想发布我到目前为止拼凑的临时解决方案。

首先，查看下面来自 Mozilla 的链接，以更好地理解 CORS 和 OPTIONS 请求（它对我有用）。

链接：[https ://developer.mozilla.org/en-US/docs/HTTP_access_control](https://developer.mozilla.org/en-US/docs/HTTP_access_control)

接下来，关于 IBM JAX-RS 处理 OPTIONS 问题的更新。看来 OPTIONS 请求的处理方式与其他 GET/POST 没有什么不同，它需要与 @Path 值完全匹配。这并不是真正需要的，就我而言，我在@Path 值中尝试了通配符，但这并没有起到触发系统处理 OPTIONS 的作用。

现在，为解决方案。毫不奇怪，我最终使用过滤器将 OPTIONS 请求转发到资源中的方法，该方法使用@OPTIONS 和固定的@Path 值进行注释，例如@Path("options")。

在过滤器中，我正在处理 Allow-Origin 和 Allow-Header，然后我离开资源的 @OPTION 方法来处理 Allow-Methods。

这是非常简单和基本的解决方案。除了在过滤器内部进行适当的检查外，不需要为每个请求过度添加标头。

这里有一个问题，它适用于 Chrome（版本 23.0.1271.95 m）和 Mozilla（9.0.1），但不适用于 IE。我仍在试图弄清楚 IE 是如何响应这些 CORS 的。希望这可以帮助。

# ruby-on-rails - 在 Rails 3 中使用嵌套路由时，上一个按钮由于某种原因返回到第一个

> ID：13636168
> 
> 赞同：0
> 
> 时间：2012-11-29T22:46:30.457
> 
> 标签：ruby-on-rails, ruby

我有一个很好用的下一个按钮，但上一个按钮就是不想玩得很好。有趣的是，我尝试用几种不同的方式来构建这个，引用 SO 和其他地方的方法，但以前总是去最早的记录......

在我的提交模型中：

```
 def previous
     self.class.first(:conditions => ["created_at < ?", created_at], :order => "created_at asc")
   end

   def next
     self.class.first(:conditions => ["created_at > ?", created_at], :order => "created_at asc")
   end 
```

在我看来：

```
<% if @submission.previous %>
  <%= link_to "previous", contest_submission_path(@contest, @submission.previous),
                        :class => 'pull-left btn btn-large' %>
<% end %>
<% if @submission.next %>
  <%= link_to "next", contest_submission_path(@contest, @submission.next),
                        :class => 'pull-right btn btn-large' %>
<% end %> 
```

就像我说的，下一个效果很好，但上一个又回到了最早的记录。我在这件事上快要完蛋了。有人有答案吗？

已编辑

日志：

```
Started GET "/contests/1/submissions/1" for 127.0.0.1 at 2012-11-30 08:08:52 -0800
Processing by SubmissionsController#show as HTML
  Parameters: {"contest_id"=>"1", "id"=>"1"}
  User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 ORDER BY users.created_at DESC LIMIT 1
  Contest Load (0.3ms)  SELECT "contests".* FROM "contests" WHERE "contests"."id" = $1 LIMIT 1  [["id", "1"]]
  Submission Load (0.2ms)  SELECT "submissions".* FROM "submissions" WHERE "submissions"."id" = $1 ORDER BY submissions.created_at ASC LIMIT 1  [["id", "1"]]
  CACHE (0.0ms)  SELECT "submissions".* FROM "submissions" WHERE "submissions"."id" = $1 ORDER BY submissions.created_at ASC LIMIT 1  [["id", "1"]]
   Comment Load (0.4ms)  SELECT "comments".* FROM "comments" WHERE "comments"."commentable_id" = 1 AND "comments"."commentable_type" = 'Submission' ORDER BY comments.created_at DESC, created_at
   Submission Load (0.3ms)  SELECT "submissions".* FROM "submissions" WHERE (created_at < '2012-10-08 14:32:40.590930') ORDER BY submissions.created_at ASC, created_at asc LIMIT 1
   Submission Load (0.2ms)  SELECT "submissions".* FROM "submissions" WHERE (created_at > '2012-10-08 14:32:40.590930') ORDER BY submissions.created_at ASC, created_at asc LIMIT 1
  CACHE (0.0ms)  SELECT "submissions".* FROM "submissions" WHERE (created_at > '2012-10-08 14:32:40.590930') ORDER BY submissions.created_at ASC, created_at asc LIMIT 1
  CACHE (0.0ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 ORDER BY users.created_at DESC LIMIT 1
  Image Load (0.2ms)  SELECT "images".* FROM "images" WHERE "images"."parent_id" = 2 AND "images"."parent_type" = 'User' LIMIT 1
  Rendered submissions/_follow_unfollow.html.erb (0.1ms)
  Image Load (0.4ms)  SELECT "images".* FROM "images" WHERE "images"."parent_id" = 1 AND "images"."parent_type" = 'Submission' LIMIT 1
  Rendered submissions/_hide_comments_form.html.erb (1.9ms)
  Rendered comments/_form.html.erb (2.5ms)
  Rendered comments/_comment.html.erb (3.5ms)
  Rendered submissions/show.html.erb within layouts/application (21.7ms)
  Rendered layouts/_stylesheets.html.erb (4.3ms)
  CACHE (0.0ms)  SELECT "images".* FROM "images" WHERE "images"."parent_id" = 2 AND "images"."parent_type" = 'User' LIMIT 1
  Role Load (0.5ms)  SELECT "roles".* FROM "roles" INNER JOIN "assignments" ON "roles"."id" = "assignments"."role_id" WHERE "assignments"."user_id" = 2
  Rendered layouts/_header.html.erb (4.6ms)
  Rendered layouts/_footer.html.erb (0.7ms) 
```

在 105 毫秒内完成 200 次 OK（查看次数：97.8 毫秒 | ActiveRecord：3.0 毫秒）

日志 #2

```
Started GET "/contests/1/submissions/%23%3CActiveRecord::Relation:0x007fc3b5e50af8%3E" for 127.0.0.1 at 2012-11-30 08:43:15 -0800
Processing by SubmissionsController#show as HTML
  Parameters: {"contest_id"=>"1", "id"=>"#<ActiveRecord::Relation:0x007fc3b5e50af8>"}
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 ORDER BY users.created_at DESC LIMIT 1
  Contest Load (0.3ms)  SELECT "contests".* FROM "contests" WHERE "contests"."id" = $1 LIMIT 1  [["id", "1"]]
  Submission Load (0.3ms)  SELECT "submissions".* FROM "submissions" WHERE "submissions"."id" = $1 LIMIT 1  [["id", "#<ActiveRecord::Relation:0x007fc3b5e50af8>"]]
Completed 500 Internal Server Error in 4ms

ActiveRecord::RecordNotFound (Couldn't find Submission with id=#   <ActiveRecord::Relation:0x007fc3b5e50af8>):
app/controllers/submissions_controller.rb:89:in `find_submission' 
```

最终解决方案：

在提交.rb

```
 default_scope order: 'submissions.created_at DESC'

   def previous_sub
     self.class.where("created_at > ?", created_at).reorder("created_at asc").first 
   end

   def next_sub
     self.class.where("created_at < ?", created_at).reorder("created_at desc").first 
   end 
```

在视图中（显示）：

```
<% if @submission.previous_sub %>
  <%= link_to "previous", contest_submission_path(@contest, @submission.previous_sub),
                        :class => 'pull-left btn btn-large' %>
<% end %>
<% if @submission.next_sub %>
  <%= link_to "next", contest_submission_path(@contest, @submission.next_sub),
                        :class => 'pull-right btn btn-large' %>
<% end %> 
```

我最终交换了方法的名称，以便显示记录顺序与索引匹配，该索引以 DESC 顺序或最近到最早的范围限定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:23:43.790

您的代码是正确的，但您的日志显示

```
SELECT "submissions".* FROM "submissions" 
WHERE (created_at < '2012-10-08 14:32:40.590930') 
ORDER BY submissions.created_at ASC, created_at asc LIMIT 1 
```

如果这是一个搜索以前的查询，这就是它失败的地方（因为它按升序排列以前的日期，并取第一个 - 最早的）。可能是您在进行更改后忘记重新启动应用程序（尽管它应该在开发模式下自动重新加载）？

或者，您可能有`default_scope`或其他一些违反条件的范围。我想知道为什么有`submissions.created_at ASC, created_at asc`- 两次？可能`submissions.created_at ASC`是默认范围。

我建议您使用新的 AR 查询语法，并可能`reorder`排除其他排序范围：

```
self.class.where("created_at < ?", created_at).reorder("created_at desc").first 
```

# jquery - datepicker() 不适用于动态生成的字段

> ID：13636169
> 
> 赞同：0
> 
> 时间：2012-11-29T22:46:33.013
> 
> 标签：jquery, jquery-ui

下面的第一个脚本在单击时将简单文本（在本例中为日期）转换为可编辑字段。然后，我希望在单击动态生成的字段时弹出 datepicker() 日历，但我无法让日历显示给所有人。

```
<script type="text/javascript">
    $(document).ready(function() {
        var alreadyActive = "";
        $(".editable-date").on("click", function() {
            if(!alreadyActive) {
                OriginalText = $(this).text();
                divValue = $(this).attr('value');
                $(this).html("<form class='edit-date' ><input type='text' class='date_input' value='" + OriginalText + "' /><input type='submit' value='Update' /></form>");
                alreadyActive = "true";
            }
        });
    });
</script>
<script type="text/javascript">
    $(function() {
        $(".date_input").datepicker();
    });
</script> 
```

我还尝试了以下脚本来调用 datepicker() 无济于事。

```
<script type="text/javascript">
    $(function(){
        $("body").on("click", ".date_input", function() {
            $(this).datepicker();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T22:47:59.053

你的第二次尝试很接近，它应该是：

```
$(this).datepicker().triggerHandler("focus"); 
```

# html - 有什么工具可以告诉我网页内容来自哪里？

> ID：13636173
> 
> 赞同：1
> 
> 时间：2012-11-29T22:46:46.220
> 
> 标签：html, http, web-applications, web

当我请求一个网页时，我实际上对 imgs、banners、javascripts（js 可以包括其他 js 等）、iframes、css、插件、activex、applet 等提出了很多请求。

如何获取我实际下载的 url 列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:47:39.787

最简单的方法是使用浏览器的内置开发工具。一般寻找“网络”选项卡。

![谷歌浏览器网络面板](../Images/80c6c3ce983bff5b5cb28580545a2849.png)

*（谷歌浏览器的[网络面板](https://developers.google.com/chrome-developer-tools/docs/network)）*

您还可以使用诸如[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具，它充当代理服务器并向您显示所有 Web 请求，甚至来自其他应用程序的 HTTP。

# c# - 装配负载失败

> ID：13636174
> 
> 赞同：2
> 
> 时间：2012-11-29T22:46:49.583
> 
> 标签：c#, c++, process, .net-assembly, mixed-mode

我遇到了源于产生的混合模式进程的托管程序集负载问题。详情见下文。假设 BinPath 和 ExecutablePath 是两个不同的有效路径。

我有一个在 BinPath 中启动的 Web 应用程序，并使用以下 ProcessStartInfo 创建一个进程：

```
new ProcessStartInfo()
{
    FileName = ExecutablePath + "PerformanceRunner.exe",
    WorkingDirectory = ExecutablePath ,
    UseShellExecute = true                
}; 
```

PerformanceRunner.exe 然后成功地加载了驻留在 ExecutablePath 中的几个非托管 DLL（这可以通过查看 VS 中的 Modules 窗口来验证）。然后它尝试加载也位于 ExecutablePath 中的托管程序集，但这失败了。这是它的融合日志 - 请注意，BinPath 是“G:\TOPSS\TOPSS New\Common\Service\Bin”，托管程序集是 TPSSCDQ.dll。TPSSCDQ 驻留在 ExecutablePath 中。

* * *

> ***组装活页夹日志条目（11/29/2012 @ 4:16:11 PM）***
> 
> 操作失败。绑定结果：hr = 0x80070002。该系统找不到指定的文件。
> 
> 程序集管理器加载自：C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll 在可执行 G:\TOPSS\TOPSS New\Common\Service\Bin\PerformanceRunner.exe 下运行
> 
> * * *
> 
> **=== 预绑定状态信息 ===**
> 
> **日志**：用户 = CORP\lbhra
> 
> **日志**：DisplayName = TpssCDQ，版本=1.0.4612.26218，文化=中性，PublicKeyToken=null（完全指定）
> 
> **LOG** : Appbase = file:///G:/TOPSS/TOPSS New/Common/Service/Bin/
> 
> **日志**：初始 PrivatePath = NULL
> 
> **日志**：动态基数 = NULL
> 
> **日志**：缓存基础 = NULL
> 
> **日志**：AppName = PerformanceRunner.exe
> 
> **调用程序集：（未知）。**
> 
> **===**
> 
> **LOG**：此绑定在默认加载上下文中开始。
> 
> **LOG**：找不到应用程序配置文件。
> 
> **LOG**：使用主机配置文件：
> 
> **LOG**：使用 C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config 中的机器配置文件。
> 
> **LOG**：此时未将策略应用于引用（私有、自定义、部分或基于位置的程序集绑定）。
> 
> **日志**：正在尝试下载新的 URL 文件：///G:/TOPSS/TOPSS New/Common/Service/Bin/TpssCDQ.DLL。
> 
> **日志**：正在尝试下载新的 URL 文件：///G:/TOPSS/TOPSS New/Common/Service/Bin/TpssCDQ/TpssCDQ.DLL。
> 
> **日志**：正在尝试下载新的 URL 文件：///G:/TOPSS/TOPSS New/Common/Service/Bin/TpssCDQ.EXE。
> 
> **日志**：正在尝试下载新的 URL 文件：///G:/TOPSS/TOPSS New/Common/Service/Bin/TpssCDQ/TpssCDQ.EXE。
> 
> **LOG**：所有探测 URL 都已尝试并失败。
> 
> * * *

我不完全理解 PrivatePath、Appbase 或 Dynamicbase 是什么，但这些路径中的至少一个不应该是工作目录（ExecutablePath）吗？我已经使用 GetCurrentDirectory 验证了工作目录设置正确。我真的很感激这个，因为我很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:36:58.440

没错，它应该在存储可执行文件的根文件夹中查找。它不会在工作目录中查找 - 但我理解在这种情况下，这些路径是相同的。如果您查看错误消息，`APPBASE`则设置正确，因此我认为它在正确的位置，但由于其他原因没有找到它。

[http://msdn.microsoft.com/en-us/library/yx7xezcf(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/yx7xezcf(v=vs.90).aspx)

其他要检查的事项：

*   您的应用程序/机器配置文件中是否有任何程序集加载提示？
*   托管 DLL 是为正确的平台构建的吗？
*   托管 DLL 是否已重命名 - 文件名是否与清单匹配？
*   所有托管 DLL 的依赖项是否都存储在同一位置？

另外，你是如何加载这个程序集的？它是作为项目的参考列出的，还是您在调用 Assembly.Load （或类似名称）？

# javascript - 如何使用 ng-repeat 在 Angular 表单上创建唯一的 ng-form 标签

> ID：13636176
> 
> 赞同：2
> 
> 时间：2012-11-29T22:47:00.167
> 
> 标签：javascript, html, angularjs, angularjs-ng-repeat

我正在尝试创建一个表单部分，该表单的一部分是一个循环对象列表的表，并且每个对象都允许用户检查/取消选中属性。表单的其余部分工作正常，但我无法在复选框上设置 ng-model 属性。

这是我所拥有的：

```
<table>
    <thead>
        <tr>
            <td>Objects and Fields</td>
            <td>Createable</td>
            <td>Deleteable</td>
            <td>Readable</td>
            <td>Updateable</td>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="object in myAppObjects">
          <td>
            {{object.name}}&nbsp;{{object.id}}
            <input type="checkbox" name="app_access_{{object.id}}" ng-model="app_access" value="false">
          </td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </tbody>
</table> 
```

起初我尝试设置 ng-model="app_access_{{object.id}}" 以便每个单元格都有一个唯一的 ng-model。这导致表格行重复了几十次。每个空单元格也将有一个复选框。在给定时间，每个对象和表单中的多个对象将有五个复选框。我需要能够访问控制器中的每个复选框（或者更好的是已选中的列表）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T00:04:19.663

由于 ngRepeat 为每个项目创建一个新的（子）范围，因此为项目创建新的 ng-models（与这些新范围相关联）将不起作用，因为这些模型/数据只能在这些内部范围内访问。我们不能编写控制器函数来访问那些内部/子范围。最好在 myAppObjects 中为模型引用一些东西（就像@Max 在他的第二个示例中建议的那样）。

如果 myAppObjects 看起来像这样：

```
$scope.myAppObjects = [
  {id: 1, cb1: true,  cb2: false, cb3: true, cb4: true,  cb5: false },
  {id: 2, cb1: false, cb2: false, cb3: true, cb4: false, cb5: true  }, 
```

你可以这样写你的 ng-repeat：

```
<tr ng-repeat="appObj in myAppObjects">
    <td>{{appObj.id}}
        <input type="checkbox" ng-model="appObj.cb1"></td>
    <td><input type="checkbox" ng-model="appObj.cb2"></td>
    <td><input type="checkbox" ng-model="appObj.cb3"></td>
    <td><input type="checkbox" ng-model="appObj.cb4"></td>
    <td><input type="checkbox" ng-model="appObj.cb5"></td>
</tr> 
```

工作小提琴：http: [//jsfiddle.net/mrajcok/AvGKj/](http://jsfiddle.net/mrajcok/AvGKj/)

底线：我们需要在父范围内/上定义复选框模型（在我的小提琴中，MyCtrl 的 $scope），而不是在 ngRepeat 内部/子范围内/上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T06:05:57.167

通常，如果您正在迭代一个集合，`ng-repeat`那么您显示和编辑的项目就是集合的各个成员。所以如果你有一个正在编辑的字符串数组，`ng-repeat`你会做

```
<div ng-repeat="item in list">
  <input ng-model="item" />
</div> 
```

或者，如果是您正在迭代的对象列表，您会这样做

```
<div ng-repeat="obj in list">
  <input ng-model="obj.item" />
</div> 
```

# c# - 向现有 XML 文件添加附加标签

> ID：13636178
> 
> 赞同：0
> 
> 时间：2012-11-29T22:47:09.257
> 
> 标签：c#, xml, xml-parsing

我有一个包含以下结构的 xml 文件

```
 <Planet>
      <Continent name="Africa">
        <Country name="Algeria" />
        <Country name="Angola" />
          ...
      </Continent>
    </Planet> 
```

我需要在其中添加包含城市的其他大陆标签。这是我的代码：

```
 public static string continent;
       public static List<string> countries = new List<string>();

       XmlDocument xDoc = new XmlDocument();
       xDoc.Load(@"D:\Projects IDE\Visual Studio\Tutorial\e-commerce\classModeling\GenerateXml file\GenerateXml file\bin\Debug\Planet.xml");

        XmlNode xNode = xDoc.CreateNode(XmlNodeType.Element, "Continent", "");
        XmlAttribute xKey = xDoc.CreateAttribute("name");
        xKey.Value = continent;
        xNode.Attributes.Append(xKey);
        xDoc.GetElementsByTagName("Planet")[0].InsertAfter(xNode , xDoc.GetElementsByTagName("Planet")[0].LastChild);

        foreach (var country in countries)
        {
            XmlElement root = xDoc.CreateElement("Country");
            XmlAttribute xsKey = xDoc.CreateAttribute("name");
            xsKey.Value = country;
            root.Attributes.Append(xKey);

        }     
        xDoc.Save(@"D:\Projects IDE\Visual Studio\Tutorial\e-commerce\classModeling\GenerateXml file\GenerateXml file\bin\Debug\Planet.xml"); 
```

我的代码创建了所有标签，但不添加属性。

在任何人询问大陆变量和国家列表包含所需项目之前，我只是觉得不需要显示代码二的那部分。

我在这里做错了什么？

**编辑**

我设法纠正了代码，现在它工作了，属性没有出现，因为我给节点属性和元素属性都赋予了相同的名称，我更改了名称，现在它可以工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:59:41.807

使用 Linq to XML 创建 xml 非常容易：

```
XDocument xdoc = XDocument.Load(path_to_xml);
xdoc.Root.Add(
    new XElement("Continent", 
        new XAttribute("name", continent),
        from country in countries
        select new XElement("Country", new XAttribute("name", country))));
xdoc.Save(path_to_xml); 
```

此代码将向元素添加另一个`<Continent>`元素（带有提供的国家/地区）`Planet`。例如以下数据

```
continent = "Europe";
countries = new List<string>() { "Spain", "France", "Italy", "Belarus" }; 
```

输出将是

```
<Planet>
  <Continent name="Africa">
    <Country name="Algeria" />
    <Country name="Angola" />
  </Continent>
  <Continent name="Europe">
    <Country name="Spain" />
    <Country name="France" />
    <Country name="Italy" />
    <Country name="Belarus" />
  </Continent>
</Planet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T22:50:54.400

好吧，在下面的循环中

```
 foreach (var country in countries)
    {
        XmlElement root = xDoc.CreateElement("Country");
        XmlAttribute xsKey = xDoc.CreateAttribute("name");
        xsKey.Value = continent;
        root.Attributes.Append(xKey);

    } 
```

你正在创建你的`Country`元素，但是你没有对它做任何事情并且`root`超出了范围。您是否打算将其添加到您的`Continent`标签中？

也许你想添加

```
xNode.AppendChild(root); 
```

在循环结束时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:53:01.217

您正在添加标签国家，但该方法只为您提供新创建元素的引用，然后您必须将其显式添加到文档中

# symfony - JMSSerializerBundle RuntimeException：您必须为 Entity::$field 定义一个类型

> ID：13636180
> 
> 赞同：4
> 
> 时间：2012-11-29T22:47:16.587
> 
> 标签：symfony, doctrine, doctrine-orm, symfony-2.1, jmsserializerbundle

我在使用 JMSSerializerBundle 时遇到了这个问题。对于我已经做过的事情，它基本上给了我一个例外。这是我的实体：

### 编辑以避免混淆注释线

```
<?php

namespace My\ProjectBundle\Entity;
use JMS\SerializerBundle\Annotation\Type;

use Doctrine\ORM\Mapping as ORM;

/**
 * My\ProjectBundle\Entity\Music
 * 
 * @ORM\Table()
 * @ORM\Entity(repositoryClass="My\ProjectBundle\Entity\MusicRepository")
 */
class Music extends Post
{
/**
 * @var integer $id
 * 
 * @ORM\Column(name="id", type="integer")
 * @ORM\Id
 * @ORM\GeneratedValue(strategy="AUTO")
 */
protected $id;

/**
 * @var string $album
 *
 * @ORM\Column(name="album", type="string")
 * @Type("string")
 */
protected $album;

/**
 * @var string $artist
 *
 * @ORM\Column(name="artist", type="string")
 * @Type("string")
 */
protected $artist;

/**
 * @var integer $duration
 *
 * @ORM\Column(name="duration", type="bigint")
 * @Type("int")
 */
protected $duration;

/**
 * @var string $title
 *
 * @ORM\Column(name="title", type="string")
 * @Type("string")
 */
protected $title;

/**
 * @var array $genres
 *
 * @ORM\Column(name="genres", type="array")
 * @Type("array")
 */
protected $genres; 
```

如您所见，我`@Type()`为字段添加了注释，但是当我调用时它仍然给我异常：

```
$listenedMusic = $serializer->deserialize($content, 'My\ProjectBundle\Entity\Music', 'json'); 
```

我已经检查过，`$content`变量不为空，并且所有字段都以 JSON 格式映射。

在我的 Monolog 文件中，这是确切的例外：

```
[2012-11-29 23:39:07] request.CRITICAL: JMS\SerializerBundle\Exception\RuntimeException: 
You must define a type for My\ProjectBundle\Entity\Music::$album. (uncaught exception) 
at /vendor/jms/serializer-bundle/JMS/SerializerBundle/Serializer/GenericDeserializationVisitor.php line 177 
```

为什么它仍然给我这个例外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:50:22.537

我相当确定这是因为您有两个注释字符串，其中包含整个注释的不同部分。Symfony 只查看类成员前面的注释字符串。

尝试更换：

```
/** @Type("string")*/
/**
 * @var string $album
 *
 * @ORM\Column(name="album", type="string")*/
protected $album; 
```

和：

```
/** 
 * @Type("string")
 *
 * @var string $album
 *
 * @ORM\Column(name="album", type="string")*/
protected $album; 
```

（并且在所有其他地方，您都有这些重复的注释注释）

这只是一个猜测，但我认为它会解决它。当我尝试这样做时：

```
class Something
{
    /**
     * @var integer $id
     * 
     * @ORM\Column(name="id", type="bigint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    /**
     * 
     */
    private $id;
} 
```

...Symfony 给了我这个错误：

```
No identifier/primary key specified for Entity 'SomeApp\SomeBundle\Entity\Something'. Every Entity must have an identifier/primary key. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T12:55:05.760

我通过将整个项目更新为`dev-master`包来解决此问题。这似乎是 JMSSerializer 中的一个错误，因为没有修改任何代码，我就停止了这个错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-19T15:16:44.227

```
/**
 * @var integer $duration
 *
 * @ORM\Column(name="duration", type="bigint")
 * @Type("int")
 */
protected $duration; 
```

不存在用于序列化的“int”类型，您必须使用“integer”。

# jquery - jquery 1.4.4 send accept header exactly as 'application/json'

> ID：13636181
> 
> 赞同：0
> 
> 时间：2012-11-29T22:47:19.630
> 
> 标签：jquery, jquery-1.4

The third party service I'm using is very particular. I'm trying to set the accepts header to

```
Accept: application/json 
```

But jquery 1.4.4 won't send just that. It keeps sending a variation, i.e.:

```
Accept: */*, application/json 
```

I've tried a few variations, i.e. the one below. How can I get it to send just 'Accept: application/json' in the accepts header?

```
jQuery.ajax({
    url: "/rest/cms.country",
    beforeSend: function (xhr) { xhr.setRequestHeader('Accept', 'application/json'); },
    contentType: "application/json; charset=utf-8",
    type: 'get',
    success: function () {
        console.log('success');
    },
    error: function (jqXHR, textStatus, errorThrown) {
        console.log('error' + errorThrown);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:01:13.997

According to the W3C spec, setting the request header is supposed to append to any existing value, so it's already '*/*' and you setting it before the request appends 'application/json'.

Also, according to [this](http://www.grauw.nl/blog/entry/470) the spec now requires '*/*' as an accept value, so your server is violating the spec (I know not your issue here).

What you want is the browser to clear out the existing value of '*/*' before setting yours, so maybe call:

```
setRequestHeader('Accept', '') 
```

before your AJAX request? This is going to be browser-dependent so you're probably in for some IE fun.

# php - PHP 执行超时

> ID：13636194
> 
> 赞同：0
> 
> 时间：2012-11-29T22:48:37.220
> 
> 标签：php, timeout, exec

我有以下`exec()`命令，`&`末尾有一个符号，因此脚本在后台运行。但是该脚本并未在后台运行。正好 5.6 分钟后，它在浏览器中超时。此外，如果我关闭浏览器，脚本不会继续运行。

```
 exec("/usr/local/bin/php -q /home/user/somefile.php &") 
```

如果我通过命令行运行脚本，它不会超时。我的问题是如何防止超时。我如何使用 exec 在后台运行脚本，所以它不依赖于浏览器。我做错了什么，我应该看什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:04:56.030

`exec()`函数处理您执行程序的输出，因此我建议您将输出重定向到`/dev/null`（一个虚拟可写文件，它会自动丢失您写入的每个数据）。

尝试运行：

```
exec("/usr/local/bin/php -q /home/gooffers/somefile.php > /dev/null 2>&1 &"); 
```

注意：`2>&1`将错误输出重定向到标准输出，`> /dev/null`并将标准输出重定向到该虚拟文件。

如果您仍然遇到困难，您可以创建一个只执行其他脚本的脚本。`exec()`在执行任务时跟随一个进程，但在任务完成时释放。如果执行的脚本只是执行另一个脚本，则任务非常快，并且 exec 以相同的方式释放。

让我们看一个实现。创建一个`exec.php`包含：

```
<?php

  if (count($argv) == 1)
  {
    die('You must give a script to exec...');
  }
  array_shift($argv);
  $cmd = '/usr/local/bin/php -q';
  foreach ($argv as $arg)
  {
     $cmd .= " " . escapeshellarg($arg);
  }
  exec("{$cmd} > /dev/null 2>&1 &");

?> 
```

现在，运行以下命令：

```
exec("/usr/local/bin/php -q exec.php /home/gooffers/somefile.php > /dev/null 2>&1 &"); 
```

如果你有论据，你也可以给他们：

```
exec("/usr/local/bin/php -q exec.php /home/gooffers/somefile.php x y z > /dev/null 2>&1 &"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:51:39.227

您需要[`shell_exec()`](http://php.net/manual/en/function.shell-exec.php)改用：

```
shell_exec("/usr/local/bin/php -q /home/gooffers/somefile.php &"); 
```

话虽这么说，如果您有 shell 访问权限，为什么不将其安装为 cronjob？我不确定为什么一个 PHP 脚本会调用另一个脚本来像这样运行。

# nhibernate - Nhibernate 生成纯 sql 查询而不是执行语句

> ID：13636197
> 
> 赞同：0
> 
> 时间：2012-11-29T22:48:44.423
> 
> 标签：nhibernate

使用 SQL 探查器，我能够找到从 Nhibernate 生成的查询是在

```
EXEC sp_executesql N'select ...' 
```

时尚。
我想知道是否有任何方法可以强制 Nhibernate 生成平原

```
Select ... 
```

而是声明。

我想要这个的原因是因为显然 SQL Server 为它们生成了不同的执行计划，在我的场景中，普通的“select ...”运行得更快。

------更新----- 2012 年 11 月 30 日

我刚找到这个链接[Why does sp_executesql run slow when parameters are passed as arguments](https://stackoverflow.com/questions/5438135/why-does-sp-executesql-run-slower-when-parameters-are-passed-as-arguments)

而且我相信流行的答案（到目前为止有 4 票赞成）很好地解释了原因。

所以现在的问题是

**我可以使用 nhibernate 生成直接查询而不是参数化查询吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:01:19.630

在您的会话工厂配置中，您可以启用`ShowSql`. 这将在您调试时将生成的 SQL 查询输出到输出窗口。您需要确保将您的设置`BatchSize`为 0 以查看所有查询。如果启用了批处理，您将无法看到它分组的查询（以优化性能）。

NHibernate Profiler 也是一个用于调试代码的无价（但商业）工具。[http://www.hibernatingrhinos.com/products/NHProf](http://www.hibernatingrhinos.com/products/NHProf)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:01:46.897

你应该在你的服务器上清除你的执行计划，而不是尝试 agian：

```
DBCC FREEPROCCACHE 
```

和/或您可以通过将 option(recompile) 注入查询来强制重新编译执行计划。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T13:57:10.113

不，NHibernate 使用 sp_executesql 向 SQL Server 发出命令，这不能更改。但是，您应该能够对任何慢速查询进行故障排除以解决性能问题。我想要做的第一件事是检查 sp_executesql 调用提供的参数是否与它们引用的列具有相同的数据类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-14T03:18:12.130

Nhibernate 使用 log4net，您只需要添加一个附加程序，如此处所述，以防您使用 log4net：

[https://devio.wordpress.com/2010/04/14/logging-sql-statements-generated-by-nhibernate/](https://devio.wordpress.com/2010/04/14/logging-sql-statements-generated-by-nhibernate/)

例如：

```
<appender name="DebugSQL" type="log4net.Appender.FileAppender">
  <param name="File" value=".\nhdb.log"/>
  <param name="AppendToFile" value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern
      value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
  </layout>
</appender>

<logger name="NHibernate.SQL" additivity="false">
  <level value="DEBUG" />
  <appender-ref ref="DebugSQL" />
</logger> 
```

# ios - Facebook iOS SDK 和基于 Safari 的身份验证问题

> ID：13636198
> 
> 赞同：2
> 
> 时间：2012-11-29T22:48:45.683
> 
> 标签：ios, xcode, facebook

我在我的 iOS 应用程序中使用了最新的 FB SKD，因此用户可以使用 facebook 帐户登录。应用程序打开 FB 应用程序并完美地回到我的应用程序。但是，在应用程序的某些地方，我必须显示/拉一些人的 Facebook 页面（使用 WebView 基于 safari），但即使用户已经使用 Facebook 帐户登录到我的原生 ios 应用程序，但页面仍然要求用户登录当他们再次点击登录时，它会向他们显示烦人的 FB 用户名/密码页面。无论如何，基于 FB safari 的页面可以对用户进行身份验证，因为它已经使用 FB 集成登录到我的应用程序？我是否必须包括查询或其他内容。请告诉我如何解决这个问题的详细信息，因为我是新手。再次感谢您的帮助...

图片：[https ://www.dropbox.com/s/rjlptu7ufpcq3vl/fb.png](https://www.dropbox.com/s/rjlptu7ufpcq3vl/fb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:20:32.067

当用户切换到 Facebook 应用程序进行身份验证时，它不会为您创建 cookie，`UIWebView`这就是它要求再次登录的原因。让用户在 UIWebView 内进行身份验证，而无需切换到 Facebook 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T19:21:45.757

你所说的听起来也与 Facebook 对话不知道当前 Facebook 会话的情况类似。

如果您通过 Facebook 验证您的用户，请尝试将 Facebook 对象本身作为内存中某处的实例变量，以便您可以再次访问它（也许是单例控制器上的一个属性？）。

如果您有 [FBSession activeSession]，则从经过身份验证的 Facebook 对象生成对话框似乎可以让他们使用对话框而无需重新进行身份验证。因此，您还必须保持活跃的 FB 会话。但我不确定这种解决方案是否有效，因为您没有显示具体代码来说明您如何进行基于 Web 的 FB 获取。

这个问题也可能有帮助：

[在 iOS 5 和 6 中使用 Facebook 实现登录](https://stackoverflow.com/questions/14271792/implement-login-with-facebook-in-ios-5-and-6)

# php - PHP循环创建Javascript

> ID：13636199
> 
> 赞同：1
> 
> 时间：2012-11-29T22:48:46.060
> 
> 标签：php, javascript, loops, header, head

编辑：哎呀。谢谢大家！

我有以下代码：

```
<?php
    echo"
    <script type=\"text/javascript\">

    function validation() {

    var ok = 0;
    ";

    for ($i=1; $i<=10; $i++)
      {
        echo"   for (i=document.frmSurvey.q".$i.".length-1; i > -1; i--) {
                if (document.frmSurvey.q".$i."[i].checked) {
                    v = i; i = -1;
                }
            }
            if (i == -1) {
                ok = 1;
                document.getElementById(\"rq".$i."\").style.backgroundColor = '#901F39';
                document.getElementById(\"rq".$i."\").style.color = '#FFF';
                document.getElementById('mandall').style.backgroundColor = '#901F39';
                document.getElementById('mandall').style.color = '#FFF';
                return false;
            }";
        }

    echo "if (ok == 0) document.frmSurvey.submit();
    }
    </script>";
?> 
```

此代码位于`<head>`我页面的部分中。但是，它只是将文本回显到页面上，而不是实际创建`Javascript`.

我想我应该使用一个`<header>`选项，但我完全迷路了。

欢迎任何和所有建议！

谢谢，

H。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:54:37.767

忘记 PHP：

```
<script type="javascript">

    function validation() {
        var ok = 0;

        for (var i=1 i<=10; i++){
            for (var j=document.frmSurvey['q'+i].length-1; j > -1; j--) {
                if (document.frmSurvey['q'+j][i].checked) {
                    v = j; j = -1;
                }
            }
            if (j == -1) {
                ok = 1;
                document.getElementById('rq'+i).style.backgroundColor = '#901F39';
                document.getElementById('rq'+i).style.color = '#FFF';
                document.getElementById('mandall').style.backgroundColor = '#901F39';
                document.getElementById('mandall').style.color = '#FFF';
                return false;
            }
        }

        if (ok === 0) {
            document.frmSurvey.submit();
        }
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:50:38.243

为什么不将 JS 代码放在`<script>`标签内，而不在 PHP 标签内使用它。您可以使用 PHP 标记，仅用于来自服务器端或 PHP 代码的变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T22:53:25.550

您将`<script>`在第三行关闭您的标签：

```
<?php
    echo"
    <script type=\"text/javascript\"></script> 
```

删除`</script>`此处，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T22:54:06.033

代替

```
<script type=\"text/javascript\"></script> 
```

和

```
<script type=\"text/javascript\"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T23:31:05.207

只是一个远射，但这是我认为你想要/需要的。

```
<script type="javascript">
    function validation() {
        var err=0,
            ok,i,j;

        //loop through groups of radio buttons
        for (i=1 i<=10; i++){
            //reset ok for this loop
            ok=0;

            //loop through radio buttons in this group
            for (j=document.frmSurvey['q'+i].length-1; j >= 0; j--) {
                //if the button is checked...
                if (document.frmSurvey['q'+j][i].checked) {
                    //set ok to 1
                    ok=1;

                    //break out of loop because we know one is checked, no need to continue on to rest
                    break;
                }
            }

            //if there were no buttons checked
            if (o==0) {
                //color row background and text
                document.getElementById('rq'+i).style.backgroundColor = '#901F39';
                document.getElementById('rq'+i).style.color = '#FFF';
                //color something else background and text
                document.getElementById('mandall').style.backgroundColor = '#901F39';
                document.getElementById('mandall').style.color = '#FFF';

                //increment our error counter
                err++;
            }
        }

        //if there were no errors
        if(err==0){
            //submit the form
            document.frmSurvey.submit();
        } else {
            //tell them how many errors there were
            alert("There were "+err+" errors. Please fix them and try again.");
        }
    }
</script> 
```

循环遍历单选组，然后每个单选按钮查找没有至少一个选中值的任何单选组。如果该组没有检查值，则更改背景和文本颜色并增加错误计数器。如果没有错误，则提交表单，否则会发出警报，说明有多少错误。

# java - 如何从 Future 捕获特定抛出的异常？

> ID：13636205
> 
> 赞同：2
> 
> 时间：2012-11-29T22:48:59.080
> 
> 标签：java, swing, swingworker, future

我最近继承了一些遗留代码，这些代码大量使用内部类来实现线程。这些内部类使当前`JFrame`代码成为整体，因此我正在重构代码以利用`SwingWorker`该类。

我的`SwingWorker`班级对 Web 服务进行了多次 API 调用，然后返回结果。由于这是异步的，这显然最好在线程内完成。目前，Web 服务的工作方式需要一些身份验证调用来验证请求。这些调用显然会返回错误。`SwingWorker`如果这些 Web 服务调用未通过身份验证，我想做的是从内部抛出一个自定义异常。使用标准`Future`模式，我的代码类似于以下内容：

**SwingWorker（后台线程）**

```
@Override
protected String doInBackground() throws Exception {
    if (!authenticationClient.authenticate(userid)) {
        throw new PlaceOrderException("Failed to authenticate client");
    }

    return orderClient.placeOrder( ... );
} 
```

**主 GUI（EDT 线程）**

```
// On the EDT
PlaceOrderWorker placeOrderWorker = new PlaceOrderWorker( ... ) {
    // This method is invoked when the worker is finished its task
    @Override
    protected void done(){
        try {
            String orderID = get();

            // Update some GUI elements using the orderID

        } catch(PlaceOrderException e) {
            JOptionPane.showMessageDialog(this, "Please review your order", e.getMessage(), JOptionPane.ERROR_MESSAGE, null);
        } catch (Exception e) {
            LOGGER.error("Error placing order", e);
        }
    }
} 
```

错误发生在该行：

```
catch(PlaceOrderException e) {
    JOptionPane.showMessageDialog(this, "Please review your order", e.getMessage(), JOptionPane.ERROR_MESSAGE, null);
} 
```

正如 Java 声称的那样，这个异常永远不会被抛出。

```
exception PlaceOrderException is never thrown in body of corresponding try statement 
```

现在我知道调用`get`会导致异常从线程中重新抛出 - 它可以抛出一个`PlaceOrderException`. 我怎样才能捕捉到这个特定的异常？我这样构造我的代码的原因是有许多异常可以在后台线程中抛出，我希望用户通过`JDialog`. 我在主 GUI 类中声明该`done`方法的原因是我需要`JDialog`从 EDT 线程中实例化 s。这让我有一些很好的解耦。

任何人都知道我使用 using 捕获此特定异常的方法`instanceof`吗？或者你能推荐一个更好的模式来使用吗？也许`SwingWorker`是错误的选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T23:16:49.297

抓住`ExecutionException`并调查其原因：

```
 try {
        String orderID = get();

        // Update some GUI elements using the orderID

    } catch(ExecutionException e) {
        Throwable cause = e.getCause( );
        if ( cause instanceof PlaceOrderException )
        {
            JOptionPane.showMessageDialog(
              this,
              "Please review your order",
              cause.getMessage(),
              JOptionPane.ERROR_MESSAGE,
              null
            );
        }
        else
        {
          LOGGER.error("Error placing order", e);
        }
    } catch (Exception e) {
        LOGGER.error("Error placing order", e);
    } 
```

# java - 自动化 API 稳定性测试

> ID：13636207
> 
> 赞同：1
> 
> 时间：2012-11-29T22:49:06.950
> 
> 标签：java, spring, maven, jetty, automated-tests

我有一个想要测试 API 稳定性的 web 应用程序。

为了测试 API，我依赖于包含由我的 API 编写的域对象的项目，我调用 api 并尝试将对象反序列化（使用 spring RestTemplate）到域对象中。

在开发新版本的 API 时，将使用更新版本的域对象项目。这是场景的图片： ![在此处输入图像描述](../Images/08f449c5368be0cd08c86a259a219dca.png)

现在我想要一种针对构建服务器上的给定 webapp 运行测试项目的自动化方式（在本例中为 Jenkins，使用 maven 或 ant）。问题是它们与不同的版本共享一个依赖项（所以我不能一起构建它们）。

我目前的方法是构建 webapp，将其部署在码头中，然后尝试运行测试。事实证明这很困难。

任何关于如何解决这个问题的方法？以往的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:02:35.463

为什么 webapp-tests 依赖于 domain 1.1 而 webapp-api 依赖于 1.2-SNAPSHOT？webapp-tests 工件不应该依赖与 webapp-api 相同的常见依赖项吗？如果它只是具有不同版本的相同工件，则可以将其配置为属性。但我认为最好将 webapp-api 添加到项目中，以便共享通用版本：

*   域（版本）
*   webapp-api（取决于域）
*   webapp-tests（取决于域，测试 webapp-api）

所有共享相同的父级和相同的版本。

如果您想针对之前发布的版本（或其中一个）进行测试，您需要执行类似于 cobertura-plugin 的操作：http: [//mojo.codehaus.org/cobertura-maven-plugin/](http://mojo.codehaus.org/cobertura-maven-plugin/) 这意味着编写一个插件.

您是否尝试将要测试的依赖项添加到 Maven 配置文件中，以便 webapp-tests 使用不同版本的域再次运行 webapp-api？因此您可以重新运行测试以激活不同的配置文件。

我可能只是把问题弄错了 :) 如果 webapp-tests 应该包含不同的版本，那么不要让它依赖于 webapp-api 或域项目？由于您进行了休息测试，因此没有依赖项可能干扰的公共类路径？

# direct2d - Direct2D 中缺少矩形操作

> ID：13636213
> 
> 赞同：2
> 
> 时间：2012-11-29T22:49:43.073
> 
> 标签：direct2d, rect

Direct2D 有 D2D1_RECT_F

```
{
    FLOAT left;
    FLOAT top;
    FLOAT right;
    FLOAT bottom;
} 
```

它类似于 GDI RECT 结构，只是它使用浮点值。

```
typedef struct tagRECT
{
    LONG    left;
    LONG    top;
    LONG    right;
    LONG    bottom;
} RECT; 
```

GDI 提供所有这些 RECT 操作功能，例如

```
BOOL IntersectRect(
   _Out_  LPRECT lprcDst,
   _In_   const RECT *lprcSrc1,
   _In_   const RECT *lprcSrc2
);

BOOL SubtractRect(
   _Out_  LPRECT lprcDst,
   _In_   const RECT *lprcSrc1,
   _In_   const RECT *lprcSrc2
); 
```

我不敢相信 Direct2D 没有为 D2D1_RECT_F 提供类似的功能。

我想我可以创建矩形几何图形并以任何我想要的方式组合它们，但这是创建和分配对象而不是进行简单的数学运算。或者我想我可能只是创建我自己的版本。

我错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:27:38.373

For IntersectRect, Direct2D has [ID2D1Geometry::CompareWithGeometry](http://msdn.microsoft.com/en-us/library/windows/desktop/dd316638%28v=vs.85%29.aspx) which will determine the relationship between two geometries, that's will work for you. note, this function only return the relationship of the two geometries, such as overlap, contains, it will not return the intersection rectangle as what IntersectRect did.

For SubtractRect, Direct2D has no such function, you need to write it yourself.

# git - 应该使用什么版本控制工作流来维护带有 ASP.net 版本的 Web 应用程序的 HTML/CSS/JS 版本？

> ID：13636220
> 
> 赞同：0
> 
> 时间：2012-11-29T22:50:34.293
> 
> 标签：git, web-applications, workflow, frontend, branching-strategy

我是一名网页设计师，他将 HTML/CSS/JS 组合在一起用于前端 Web 应用程序设计。我与另一位开发人员合作，他采用我的设计并利用 ASP.net 从这些设计中开发功能性 Web 应用程序。

在我看来，Web 应用程序有三个版本——我最初的 HTML/CSS/JS 设计、其他开发人员的 ASP.net 版本以及实时网站上的版本。

关于如何在 Git 中进行设置的任何建议？我计划使用两个存储库，一个用于我的前端设计，另一个用于 ASP.net 开发和网站的实时版本（对于我计划使用这个 git 分支模型的分支（http://nvie. com/posts/a-successful-git-branching-model/）。

让它们在同一个仓库中成为不同的分支有什么好处吗？我主要关心的是确保我们拥有与 HTML/CSS/JS 原始设计分离的网站的 ASP.net 版本，同时确保两者处于相同的状态（除了功能）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T08:55:21.100

对于您的静态 HTML-CSS 模型，我看不出有任何理由与 ASP 代码在同一个存储库中

*   它们是来源，而不是独立的并行工作
*   分支分支整个 repo，您​​将获得单个实体“当前设计”的额外克隆

LIVE 和 DEV 版本的代码更适合分支工作流程，并且 2 个独立的 repos 通常是正确的方向 - 用于将变更集链接到 Mockup-repo 从 Mockup-changeset 的 ASP-repo 哈希与更改的设计可用于提交消息ASP 变更集

# python - 如何解码从 iPhone 发送的 MIME 文件名（python decode_header）

> ID：13636221
> 
> 赞同：0
> 
> 时间：2012-11-29T22:50:34.010
> 
> 标签：python, email, mime, email-attachments

我有一个应用程序可以从手机接收通过电子邮件发送的图像。一切正常，直到我从 iPhone 收到图像，我从未见过这种类型的编码（它不是 MIME）所以有人可以指出我正确的 RFC 吗？

```
--Apple-Mail-DB5AF544-8B2C-45DB-9881-CD5798B20EF8
Content-Type: image/jpeg; name="zdjecie 1.JPG"
Content-Disposition: inline; filename*=utf-8''zdj%C4%99cie%201.JPG
Content-Transfer-Encoding: base64 
```

**decode_header()**表单 python 在**文件名上失败 *=utf-8''zdj%C4%99cie%201.JPG**并带有 UnicodeEncodeError

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T23:06:04.030

Python 工作正常，我在文件名上调用 decode_header() 犯了一个错误。

# windows-8 - winrt是否可以在资源库中定义画笔颜色

> ID：13636223
> 
> 赞同：2
> 
> 时间：2012-11-29T22:50:38.583
> 
> 标签：windows-8, styles, windows-runtime

我正在尝试为页面中的控件定义标准前景色。但是，我收到错误消息“无法将“System.String”类型的对象应用于需要“Windows.UI.Xaml.Media.Brush”类型的属性。

在 myPage.xaml

```
<TextBlock TextWrapping="Wrap" 
           Foreground="{StaticResource ForegroundThemeBrush}" /> 
```

在 StandardStyles.xaml

```
<ResourceDictionary x:Key="Default">

  <x:String x:Key="BackgroundThemeBrush">#484848</x:String>
  <x:String x:Key="ForegroundThemeBrush">#efefef</x:String>

</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T02:14:01.757

你需要定义`SolidColorBrush`不`x:String`

```
<ResourceDictionary x:Key="Default">
  <SolidColorBrush x:Key="BackgroundThemeBrush" Color="#484848"/>
  <SolidColorBrush x:Key="ForegroundThemeBrush" Color="#efefef"/>
</ResourceDictionary> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:13:51.180

您应该为画笔使用 SolidColorBrush 而不是 ax:String。

# java - 如何在 Jetty 上设置 Jersey

> ID：13636235
> 
> 赞同：0
> 
> 时间：2012-11-29T22:51:35.490
> 
> 标签：java, jakarta-ee, jersey, jetty

这是我的相关文件。

POM 文件：[http://pastebin.com/ZPTWifys](http://pastebin.com/ZPTWifys) web.xml 文件： http: [//pastebin.com/7kd8Et6Y](http://pastebin.com/7kd8Et6Y) JAX-RS 资源： http: [//pastebin.com/ddwDEwNK](http://pastebin.com/ddwDEwNK)

我做了一个 mvn clean install - 工作正常。我将浏览器指向 localhost:8080/firstjersey。我得到“Hello World”索引页。然后我尝试将我的浏览器指向 localhost:8080/firstjersey/resources/test，但我什么也没得到。我尝试 localhost:8080/resources/test，但一无所获。问题是我根本无法访问我的资源。我不知道它是否甚至被 servlet 容器扫描。但是我的配置中的所有内容看起来都正确。怎么了？

我提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:28:55.383

您的 servlet 映射应包含通配符：

```
<servlet-mapping>
  <servlet-name>My Servlet</servlet-name>
  <url-pattern>/resources/*</url-pattern>
</servlet-mapping> 
```

# java - 如何使用 getWidth 和 getHeight 方法将圆圈放入 Frame 的中间？

> ID：13636237
> 
> 赞同：0
> 
> 时间：2012-11-29T22:51:43.283
> 
> 标签：java, methods, colors, frame, geometry

我在使用方法`getWidth()`和`getHeight()`. 我用包尝试了一些东西，`Image`但不知道在哪里实现这个方法：

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Frame;
import java.awt.Image;

public class Circle extends Frame {

public Circle() {

    setSize(400,400);
    setLocationRelativeTo(null);
    setVisible(true);
}

public Color() {
}

public void paint(Graphics g) {

    g.setColor(Color.ORANGE);
    g.fillOval(200, 200, 200, 200);
}

public static void main(String[] args) {

    Circle c = new Circle();

    c.paint(null);
}
} 
```

然后我必须使用方法`setColor(Color)`和`Color`类构造函数来制作这个圆圈的随机颜色（在每次运行这个程序之后）。我打开了`Color`构造函数但是有一个错误：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:04:08.913

只需在方法内调用`getWidth()`and并使用为您的参数返回的结果。`getHeight()``paint(...)``fillOval(...)`

但话虽如此，最好还是在添加到 Frame 的 Canvas 中进行绘制。`paintComponent(...)`话虽如此，在 Swing 应用程序中添加到 JFrame 的 contentPane 中的 JPanel 方法中绘制仍然要好得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T23:06:27.013

最好将所有绘图功能提取到`JComponent`此处，以充分利用 Swing 优化的绘图模型，使用`paintComponent`.

`Circle`实际上是一个`JFrame`. 在其构造函数内部，创建了一个新组件来处理圆圈的绘制。构造`Color`函数已被删除，因为这是无效的语法。

圆圈坐标从左上角开始，并采用完整的可用宽度和高度进行绘图。

还建议在旧式 AWT 组件上使用轻量级 Swing 组件。

```
public class Circle extends JFrame {

    public Circle() {
        setSize(400, 400);
        add(new CirclePanel());
        setLocationRelativeTo(null);
        setVisible(true);
    }

    public static void main(String[] args) {
        Circle c = new Circle();
    }
}

class CirclePanel extends JComponent {
    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.setColor(Color.ORANGE);
        g.fillOval(0, 0, getWidth(), getHeight());  
    }
} 
```

请参阅：[在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

# d3.js - 如何删除树布局 D3.js 上的节点？

> ID：13636240
> 
> 赞同：5
> 
> 时间：2012-11-29T22:52:13.457
> 
> 标签：d3.js

我是 D3.js 的新手。我正在尝试从树布局中删除一个节点，但我找不到这样做的方法。这是一个示例树布局。
[https://dl.dropbox.com/u/7098/tree/dynamic3.html](https://dl.dropbox.com/u/7098/tree/dynamic3.html)

我想像这样动态删除：
[https ://dl.dropbox.com/u/7098/tree/aaa.gif](https://dl.dropbox.com/u/7098/tree/aaa.gif)

我相信我应该对根 json 对象进行一些操作......
如果你们有想法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T01:08:30.130

this makes explicit seb's answer. where you set up your click handler, put this:

```
.on("click", function(d) { 
    if (d.parent && d.parent.children){
        console.log('removing ' + d.name);
        var nodeToDelete = _.where(d.parent.children, {name: d.name});
        if (nodeToDelete){
            d.parent.children = _.without(d.parent.children, nodeToDelete[0]);
        }
    }
}); 
```

that should get you what you want. make sure to call whatever method draws the tree from the source data, which is now modified. note: i'm using the underscore library to make use of _.where and _.without, although you could do this with pure js or with another library. some of the checks are for convenience and to prevent deletion of the root node, for example.

p.s. since you'll probably want to keep your expand/collapse behavior, then just put a conditional in the click callback to check for a modifier key to specify node deletion with, such as d3.event.altKey.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T08:00:02.697

您需要遵循的原则[在 d3.js 中折叠/展开树的子节点？](https://stackoverflow.com/questions/9541511/collapse-expand-child-nodes-of-tree-in-d3-js). 该示例显示了如何在节点的单击处理程序上折叠树。

如果您修改已传递给布局管理器的数据结构，则树将相应更新。在上面示例中折叠树布局的情况下，您删除了节点的`children`属性： 的值`children`被存储在变量中`_children`，因此可以再次切换回子节点。详见`toggle`功能。

要删除节点，请遵循相同的逻辑，但从其父级列表中删除接收点击事件的节点`children`。要查找父级，您可以在单击处理程序中遍历树，或者在数据结构中存储对每个父级的引用。

# cakephp - 请求对象暴露密码检查变量

> ID：13636241
> 
> 赞同：0
> 
> 时间：2012-11-29T22:52:14.250
> 
> 标签：cakephp, authentication

因此，为了安全起见，我强制所有密码更改请求通过密码检查进行验证。我遇到的问题是使用`debug($this->request)`呼叫我看到的是明文密码：

```
object(CakeRequest) {
    ...snip...
    data => array(
        'User' => array(
            'password' => '*****',
            'password_check' => 'asdfa',
            'id' => '38'
        )
    )
    ...snip...
} 
```

这应该是我关心的问题吗？有没有办法让 password_check 像密码一样对待？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:49:51.730

只要您实际上不在页面上的任何位置打印它就可以了！

# .net - Taskkill.exe 未正确关闭 WPF 应用程序

> ID：13636243
> 
> 赞同：1
> 
> 时间：2012-11-29T22:52:33.277
> 
> 标签：.net, wpf, taskkill

我们`taskkill.exe`在一些自动化测试拆解中使用，其中一些涉及必须关闭 WPF 应用程序。

我发现如果打开了多个窗口，taskkill 会杀死活动窗口，但不会杀死整个应用程序。我们宁愿不必使用 /F 标志，因为这不允许应用程序干净地关闭并使我们的数据库“脏”。

在我们采取完全不同的方法之前，是否有人遇到过这个问题并找到了解决方案，或者有任何想法？我能找到的最接近的是设置`Application.Current.ShutdownMode`为`OnMainWindowClose`，但如果执行时主窗口不是前窗口，这当然无济于事`taskkill`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:04:42.333

也许 Process 类可以帮助你。

```
Process[] p = Process.GetProcessesByName("appname");
p[0].CloseMainWindow(); 
```

# jquery - 使 angularJS-UI 与 JQuery 一起工作需要什么？

> ID：13636244
> 
> 赞同：1
> 
> 时间：2012-11-29T22:52:36.470
> 
> 标签：jquery, angularjs, angular-ui

我正在关注[AngularJS](http://angular-ui.github.com/) -UI 教程以及我坚持的第一个示例。

我正在尝试使用一个简单的工具提示，我已经包含了所有需要的 js 文件，但是 angularJS-ui 模块抛出了一个异常，说不存在名为工具提示的函数。我还在主模块中包含了“ui”模块，但仍然无法正常工作。

```
Error: ui-jq: The "tooltip" function does not exist
    at Object.compile (http://localhost:8080/js/lib/angular/ui/angular-ui.js:452:15)
    at applyDirectivesToNode (http://localhost:8080/js/lib/angular/angular.js:4047:32)
    at compileNodes (http://localhost:8080/js/lib/angular/angular.js:3794:14)
    at compileNodes (http://localhost:8080/js/lib/angular/angular.js:3799:14)
    at compileNodes (http://localhost:8080/js/lib/angular/angular.js:3799:14)
    at compileNodes (http://localhost:8080/js/lib/angular/angular.js:3799:14)
    at compileNodes (http://localhost:8080/js/lib/angular/angular.js:3799:14)
    at compileNodes (http://localhost:8080/js/lib/angular/angular.js:3799:14)
    at compile (http://localhost:8080/js/lib/angular/angular.js:3739:29)
    at http://localhost:8080/js/lib/angular/angular.js:932:9 <a title="ahaaaaaaaa" ui-jq="tooltip" href=""> 
enter code here 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:48:53.590

问题在于包含js文件的顺序。一般来说，我是 JS 的新手。这就是问题所在。如果你有 A.js -> 依赖于 B.js -> 依赖于 C.js。你必须包括这样的js

```
<script type="text/javascript" src="C.js"></script>
<script type="text/javascript" src="B.js"></script>
<script type="text/javascript" src="A.js"></script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:33:09.677

错误消息意味着您正确设置了**angularjs-ui**和`'ui'`模块（因为该`ui-js`指令被 Angularjs 编译器理解），但对的引用`angular-ui.js`未正确设置。

您可以尝试在开发者控制台中检查是否正确包含`$('body')`和。`$('body').tooltip()``jquery.js``jquery-ui.js`

# ruby-on-rails - 当数组/哈希包含 Æ Ø Å 时，Ruby on Rails 失败

> ID：13636251
> 
> 赞同：0
> 
> 时间：2012-11-29T22:52:51.287
> 
> 标签：ruby-on-rails, utf-8, ruby-on-rails-3.2

我一直在使用一些 Ruby on Rails，我想尝试的第一件事是通过数组 / 散列执行**each**（我对 Ruby 术语 atm 有点困惑）。

在 test_controller.rb 我有：

```
class TestController < ApplicationController
  def index

    @People = ['Daniel','Chris','Pål']

  end
end 
```

在 test/index.html.erb 我有：

```
<h1>Test#index</h1>

<ul>
  <% @People.each do |person| %>

    <li><%= person %></li>

  <% end %>
</ul> 
```

这显然会导致错误，我得到了 **我们很抱歉，但出了点问题。**-信息。

但是，如果我将第三个元素更改为没有 Æ/Ø/Å 的内容，例如“Pal”而不是“Pål”，那么一切正常！

有谁知道为什么会这样？

我正在使用带有 UTF-8 的 RubyMine 4.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T22:55:32.520

投入`test_controller.rb`：

```
# encoding: utf-8 
```

在最顶端。

# c - C Minishell 添加管道

> ID：13636252
> 
> 赞同：5
> 
> 时间：2012-11-29T22:52:53.207
> 
> 标签：c, shell, unix, pipe, pipeline

所以我正在制作一个 UNIX minishell，并尝试添加管道，所以我可以做这样的事情：

```
ps aux | grep dh | grep -v grep | cut -c1-5 
```

但是，我无法将头缠绕在管道部分上。我替换了所有的“|” 字符为 0，然后将每一行作为正常行运行。但是，我试图转移输出和输入。一个命令的输入需要是前一个命令的输出，一个命令的输出需要是下一个命令的输入。

我正在使用管道执行此操作，但是我不知道在哪里调用 pipe() 以及在哪里关闭它们。从主处理函数 processline() 中，我有以下代码：

```
if((pix = findUnquotChar(line_itr, '|')))
{
    line_itr[pix++] = 0;
    if(pipe (fd) < 0) perror("pipe");
    processline(line_itr, inFD, fd[1], pl_flags);
    line_itr = &(line_itr[pix]);

    while((pix = findUnquotChar(line_itr, '|')) && pix < line_len)
    {
        line_itr[pix++] = 0;
        //? if(pipe (fd) < 0) perror("pipe");
        processline(line_itr, fd[0], fd[1] pl_flags);
        line_itr = &(line_itr[pix]);
    //? close(fd[0]);
    //? close(fd[1]);
    }
    return;
} 
```

所以，我递归地（上面的代码在进程行中）在“|”之间发送命令 由processline处理。你可以看到我在哪里注释掉了上面的代码，我不知道如何让它工作。processline 的第 2 和第 3 个参数分别是 inputFD 和 outputFD，所以我需要处理一个命令，将输出写入管道，然后在下一个命令上再次调用 processline，但是这次上一个命令的输出是输入。但这似乎不起作用，因为每次我关闭 fd[0] 时，我都会丢失以前的输出。我需要两个单独的管道，我可以来回翻转吗？

如果你们需要任何其他信息，我只是很难看到单管如何实现这一点。如果您想看一下，这是整个 processline 功能：

[http://pastebin.com/YiEdaYdj](http://pastebin.com/YiEdaYdj)

编辑：如果有人有一个实现管道的外壳示例，我会喜欢一个指向源的链接，到目前为止我还没有在谷歌上找到一个。

EDIT2：这是我的困境的一个例子：

```
echo a | echo b | echo c 
```

所以首先我会这样调用shell：

```
processline("echo a", 0, fd[1], flags);

....

processline("echo b", fd[0], NOT_SURE_GOES_HERE[1], flags);

....

processline("echo c", NOT_SURE_GOES_HERE[0], NOT_SURE_EITHER[1], flags); 
```

这些中的每一个在每次迭代中发生一次，正如您所看到的，我无法弄清楚第二次和第三次（等等）迭代的输入文件描述符和输出文件描述符要传递什么。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-30T06:46:13.310

这是一些用于执行管道的中等通用但简单的代码，我正在调用一个程序`pipeline`。它是一个单一文件中的 SSCCE，尽管我将文件`stderr.h`和`stderr.c`作为库中的单独文件与我的所有程序链接。（实际上，我的“真实”`stderr.c`和中有一组更复杂的函数`stderr.h`，但这是一个很好的起点。）

该代码以两种方式运行。如果您不提供任何参数，那么它会运行一个内置管道：

```
who | awk '{print $1}' | sort | uniq -c | sort -n 
```

这会计算每个人登录系统的次数，并按照会话数的增加顺序显示列表。或者，您可以使用一系列参数进行调用，这些参数是您要调用的命令行，使用带引号的管道`'|'`（或`"|"`）分隔命令：

有效的：

```
pipeline
pipeline ls '|' wc
pipeline who '|' awk '{print $1}' '|' sort '|' uniq -c '|' sort -n
pipeline ls 
```

无效的：

```
pipeline '|' wc -l
pipeline ls '|' '|' wc -l
pipeline ls '|' wc -l '|' 
```

最后三个调用强制“管道作为分隔符”。该代码不会对每个系统调用进行错误检查；它会进行错误检查`fork()`,`execvp()`和`pipe()`，但会跳过检查`dup2()`和`close()`。它不包括生成的命令的诊断打印；一个`-x`选项`pipeline`将是一个明智的添加，导致它打印出它所做的事情的痕迹。它也不会以管道中最后一个命令的退出状态退出。

请注意，代码以一个孩子被分叉开始。子进程将成为管道中的最后一个进程，但首先创建一个管道并派生另一个进程以运行管道中较早的进程。相互递归的函数不太可能是解决问题的唯一方法，但它们确实留下了最少的代码重复（早期的代码草稿中的内容`exec_nth_command()`大部分重复了 in`exec_pipeline()`和`exec_pipe_command()`）。

这里的进程结构使得原始进程只知道管道中的最后一个进程。可以重新设计事物，使原始进程是管道中每个进程的父进程，因此原始进程可以单独报告管道中每个命令的状态。我还没有修改代码以允许这种结构；它会更复杂一些，尽管并不可怕。

```
/* One way to create a pipeline of N processes */

/* stderr.h */
#ifndef STDERR_H_INCLUDED
#define STDERR_H_INCLUDED

static void err_setarg0(const char *argv0);
static void err_sysexit(char const *fmt, ...);
static void err_syswarn(char const *fmt, ...);

#endif /* STDERR_H_INCLUDED */

/* pipeline.c */
#include <assert.h>
#include <stdio.h>
#include <string.h>
#include <sys/wait.h>
#include <unistd.h>
/*#include "stderr.h"*/

typedef int Pipe[2];

/* exec_nth_command() and exec_pipe_command() are mutually recursive */
static void exec_pipe_command(int ncmds, char ***cmds, Pipe output);

/* With the standard output plumbing sorted, execute Nth command */
static void exec_nth_command(int ncmds, char ***cmds)
{
    assert(ncmds >= 1);
    if (ncmds > 1)
    {
        pid_t pid;
        Pipe input;
        if (pipe(input) != 0)
            err_sysexit("Failed to create pipe");
        if ((pid = fork()) < 0)
            err_sysexit("Failed to fork");
        if (pid == 0)
        {
            /* Child */
            exec_pipe_command(ncmds-1, cmds, input);
        }
        /* Fix standard input to read end of pipe */
        dup2(input[0], 0);
        close(input[0]);
        close(input[1]);
    }
    execvp(cmds[ncmds-1][0], cmds[ncmds-1]);
    err_sysexit("Failed to exec %s", cmds[ncmds-1][0]);
    /*NOTREACHED*/
}

/* Given pipe, plumb it to standard output, then execute Nth command */
static void exec_pipe_command(int ncmds, char ***cmds, Pipe output)
{
    assert(ncmds >= 1);
    /* Fix stdout to write end of pipe */
    dup2(output[1], 1);
    close(output[0]);
    close(output[1]);
    exec_nth_command(ncmds, cmds);
}

/* Execute the N commands in the pipeline */
static void exec_pipeline(int ncmds, char ***cmds)
{
    assert(ncmds >= 1);
    pid_t pid;
    if ((pid = fork()) < 0)
        err_syswarn("Failed to fork");
    if (pid != 0)
        return;
    exec_nth_command(ncmds, cmds);
}

/* Collect dead children until there are none left */
static void corpse_collector(void)
{
    pid_t parent = getpid();
    pid_t corpse;
    int   status;
    while ((corpse = waitpid(0, &status, 0)) != -1)
    {
        fprintf(stderr, "%d: child %d status 0x%.4X\n",
                (int)parent, (int)corpse, status);
    }
}

/*  who | awk '{print $1}' | sort | uniq -c | sort -n */
static char *cmd0[] = { "who",                0 };
static char *cmd1[] = { "awk",  "{print $1}", 0 };
static char *cmd2[] = { "sort",               0 };
static char *cmd3[] = { "uniq", "-c",         0 };
static char *cmd4[] = { "sort", "-n",         0 };

static char **cmds[] = { cmd0, cmd1, cmd2, cmd3, cmd4 };
static int   ncmds = sizeof(cmds) / sizeof(cmds[0]);

static void exec_arguments(int argc, char **argv)
{
    /* Split the command line into sequences of arguments */
    /* Break at pipe symbols as arguments on their own */
    char **cmdv[argc/2];            // Way too many
    char  *args[argc+1];
    int cmdn = 0;
    int argn = 0;

    cmdv[cmdn++] = &args[argn];
    for (int i = 1; i < argc; i++)
    {
        char *arg = argv[i];
        if (strcmp(arg, "|") == 0)
        {
            if (i == 1)
                err_sysexit("Syntax error: pipe before any command");
            if (args[argn-1] == 0)
                err_sysexit("Syntax error: two pipes with no command between");
            arg = 0;
        }
        args[argn++] = arg;
        if (arg == 0)
            cmdv[cmdn++] = &args[argn];
    }
    if (args[argn-1] == 0)
        err_sysexit("Syntax error: pipe with no command following");
    args[argn] = 0;
    exec_pipeline(cmdn, cmdv);
}

int main(int argc, char **argv)
{
    err_setarg0(argv[0]);
    if (argc == 1)
    {
        /* Run the built in pipe-line */
        exec_pipeline(ncmds, cmds); 
    }
    else
    {
        /* Run command line specified by user */
        exec_arguments(argc, argv);
    }
    corpse_collector();
    return(0);
}

/* stderr.c */
/*#include "stderr.h"*/
#include <stdio.h>
#include <stdarg.h>
#include <errno.h>
#include <string.h>
#include <stdlib.h>

static const char *arg0 = "<undefined>";

static void err_setarg0(const char *argv0)
{
    arg0 = argv0;
}

static void err_vsyswarn(char const *fmt, va_list args)
{
    int errnum = errno;
    fprintf(stderr, "%s:%d: ", arg0, (int)getpid());
    vfprintf(stderr, fmt, args);
    if (errnum != 0)
        fprintf(stderr, " (%d: %s)", errnum, strerror(errnum));
    putc('\n', stderr);
}

static void err_syswarn(char const *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    err_vsyswarn(fmt, args);
    va_end(args);
}

static void err_sysexit(char const *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    err_vsyswarn(fmt, args);
    va_end(args);
    exit(1);
} 
```

* * *

## 信号和 SIGCHLD

POSIX[信号概念](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04)部分讨论了 SIGCHLD：

在 SIG_DFL 下：

> 如果默认操作是忽略信号，则信号的传递对进程没有影响。

在 SIG_IGN 下：

> 如果 SIGCHLD 信号的动作设置为 SIG_IGN，则调用进程的子进程在终止时不应变成僵尸进程。如果调用进程随后等待其子进程，并且该进程没有转化为僵尸进程的未等待子进程，则它将阻塞直到其所有子进程终止，并且[wait()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/wait.html)、[waitid()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitid.html)和[waitpid()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/waitpid.html)将失败并将 errno 设置为`[ECHILD]`.

的描述[`<signal.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/signal.h.html)有一个信号的默认处置表，对于 SIGCHLD，默认值为 I (SIG_IGN)。

* * *

我在上面的代码中添加了另一个函数：

```
#include <signal.h>

typedef void (*SigHandler)(int signum);

static void sigchld_status(void)
{
    const char *handling = "Handler";
    SigHandler sigchld = signal(SIGCHLD, SIG_IGN);
    signal(SIGCHLD, sigchld);
    if (sigchld == SIG_IGN)
        handling = "Ignored";
    else if (sigchld == SIG_DFL)
        handling = "Default";
    printf("SIGCHLD set to %s\n", handling);
} 
```

我在调用 后立即调用了`err_setarg0()`它，它在 Mac OS X 10.7.5 和 Linux（RHEL 5、x86/64）上都报告了“默认”。我通过运行验证了它的操作：

```
(trap '' CHLD; pipeline) 
```

在两个平台上，都报告了“已忽略”，并且该`pipeline`命令不再报告子进程的退出状态；它没有得到它。

因此，如果程序忽略 SIGCHLD，它不会生成任何僵尸，但会等到它的“所有”子进程终止。也就是说，直到它的所有直接子节点都终止；一个进程不能等待它的孙子或更远的后代，也不能等待它的兄弟姐妹，也不能等待它的祖先。

另一方面，如果 SIGCHLD 的设置为默认值，则忽略该信号，并创建僵尸。

这是该程序编写的最方便的行为。该`corpse_collector()`函数有一个循环，用于从任何子级收集状态信息。这段代码一次只有一个孩子；管道的其余部分作为管道中最后一个进程的子进程（子进程、子进程...）运行。

* * *

> 但是，我遇到了僵尸/尸体的麻烦。我的老师让我以与您相同的方式实现它，因为在以下情况下`cmd1`不是父`cmd2`级：“ `cmd1 | cmd2 | cmd3`”。除非我告诉我的 shell 等待每个进程（`cmd1`、`cmd2`和`cmd3`），而不是只等待最后一个进程（`cmd3`），否则整个管道会在输出到达末尾之前关闭。我很难找到等待他们的好方法；我的老师说要使用 WNOHANG。

我不确定我是否理解这个问题。使用我提供的代码，`cmd3`是 的父级`cmd2`，并且`cmd2`是`cmd1`3-命令管道中的父级（并且 shell 是 的父级`cmd3`），因此 shell 只能等待`cmd3`。我最初确实说过：

> *这里的进程结构使得原始进程只知道管道中的最后一个进程。可以重新设计事物，使原始进程是管道中每个进程的父进程，因此原始进程可以单独报告管道中每个命令的状态。我还没有修改代码以允许这种结构；它会更复杂一些，尽管并不可怕。*

如果您的 shell 能够等待管道中的所有三个命令，则您必须使用替代组织。

描述`waitpid()`包括：

> pid 参数指定一组请求状态的子进程。waitpid() 函数应该只返回这个集合中子进程的状态：
> 
> *   如果 pid 等于 (pid_t)-1，则为任何子进程请求状态。在这方面，waitpid() 就等价于 wait()。
>     
>     
> *   如果 pid 大于 0，它指定请求状态的单个子进程的进程 ID。
>     
>     
> *   如果 pid 为 0，则请求其进程组 ID 等于调用进程的任何子进程的状态。
>     
>     
> *   如果 pid 小于 (pid_t)-1，则为进程组 ID 等于 pid 绝对值的任何子进程请求状态。
>     
>     
> 
> options 参数由以下标志中的零个或多个的按位或构成，在标头中定义：
> 
> ...
> 
> WNOHANG`waitpid()`如果 pid 指定的子进程之一不能立即获得状态，则该函数不应暂停调用线程的执行。
> 
> ...

这意味着如果您正在使用进程组并且 shell 知道管道正在哪个进程组中运行（例如，因为管道被第一个进程放入其自己的进程组），那么父进程可以等待适当的孩子终止。

*...漫无边际...*我认为这里有一些有用的信息；我可能应该写更多，但我的大脑一片空白。

# c - 如何在 C 中使用 InternetGetLastResponseInfo

> ID：13636253
> 
> 赞同：0
> 
> 时间：2012-11-29T22:52:57.613
> 
> 标签：c, winapi

`InternetGetLastResponseInfo`由于所有奇怪的文件类型，我在使用该函数时遇到了很大的问题。

谁能给我一些简短的示例代码，展示如何使用它并在之后打印错误（在 C 中）？

编辑：现在发现了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T22:46:57.107

现在工作。代码：

```
DWORD error = GetLastError();
printf("Error: %d\n", error);
DWORD dwInetError;
DWORD dwExtLength = 1000;
TCHAR *szExtErrMsg = NULL;
TCHAR errmsg[1000];
szExtErrMsg = errmsg;
int returned = InternetGetLastResponseInfo( &dwInetError, szExtErrMsg, &dwExtLength );
printf("dwInetError: %d  Returned: %d\n", dwInetError, returned);
_tprintf(_T("Buffer: %s\n"), szExtErrMsg); 
```

# catransform3d - 将 CALayers 组合并翻转为 CATransformLayer 的子视图

> ID：13636259
> 
> 赞同：1
> 
> 时间：2012-11-29T22:53:16.563
> 
> 标签：catransform3d, catransformlayer

根据较早的stackoverflow 建议，我正在尝试使用添加到CATransformLayer 的CALayers 创建一张扑克牌。这个想法是创建前后 CALayer 并将它们组合在 CATransformLayer 中，然后可以旋转、翻转等，并自动显示正确的一面。下面是尝试创建一张正面为绿色，背面为红色的单张卡片的示例代码。

红色背面围绕 Y 轴翻转，使其背对绿色正面。绿色前面的 calayer 比红色后面的 Z 位置“更高”。

但是，当我进行转换时，我只是看到卡片似乎处于未翻转状态。有什么想法我在这里出错了吗？

```
#define DEGREES_TO_RADIANS(angle) (angle * M_PI / 180.0)

- (void)viewDidLoad
{
    [super viewDidLoad];

    CATransformLayer *cardContainer = [CATransformLayer layer];

    cardContainer.bounds = CGRectMake(0,0, 150,200);

    CALayer *cardFront  = [CALayer layer];
    cardFront.frame     = cardContainer.bounds;

    cardFront.backgroundColor = [UIColor greenColor].CGColor;
    cardFront.borderColor = [UIColor blackColor].CGColor;
    cardFront.borderWidth = 2.0;
    cardFront.cornerRadius = 30.0;
    cardFront.zPosition = 2; // Put front of card on top relative to back of card
    cardFront.doubleSided = NO;
    [cardContainer addSublayer:cardFront];

    CALayer *cardBack  = [CALayer layer];
    cardBack.frame     = cardContainer.bounds;
    cardBack.backgroundColor = [UIColor redColor].CGColor;
    cardBack.zPosition = 1;
    cardBack.doubleSided = NO;

    // Flip cardBack image so it is facing outward and visible when flipped
    cardBack.transform = CATransform3DMakeRotation(DEGREES_TO_RADIANS(180),0.0,1.0,0.0);
    [cardContainer addSublayer:cardBack];

    UIView* cardView = [[UIView alloc] initWithFrame:cardContainer.bounds];
    cardView.center = CGPointMake(self.view.center.x, self.view.center.y);
    [cardView.layer addSublayer:cardContainer];
    [self.view addSubview:cardView];

    // Show the card flipped over (desired the red side to be showing, but instead shows green)
    cardView.layer.transform = CATransform3DMakeRotation(DEGREES_TO_RADIANS(180),0.0,1.0,0.0);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:13:10.227

发现问题，必须将变换应用到 sublayerTransform 属性，如：

cardView.layer.sublayerTransform = ...

# python - 使用python将特定数据从一个excel文件传输到另一个

> ID：13636260
> 
> 赞同：1
> 
> 时间：2012-11-29T22:53:16.490
> 
> 标签：python, excel, csv, dictionary

我刚开始学习 Python，我需要帮助我编写实习要求我编写的脚本。

我有一个 csv 文件（sheet1.csv），我只需要从两个具有相互对应的标题 referenceID 和 PartNumber 的列中提取数据。我需要更新一个名为 sheet2.csv 的单独 csv 文件，该文件还包含两列 referenceID 和 PartNumber，但是许多 PartNumber 单元格是空的。

基本上我需要用 sheet1 中的值填写“PartNumber”字段。根据我所做的研究，我决定使用字典是编写此脚本的可靠方法（我认为）。到目前为止，我已经能够读取文件并创建两个字典，其中 referenceID 作为键，PartNumber 作为值……这是我展示的字典外观示例。

```
import csv 
a = open('sheet1.csv', 'rU')
b = open('sheet2.csv', 'rU')
csvReadera = csv.DictReader(a)
csvReaderb = csv.DictReader(b)
a_dict = {}
b_dict = {}

for line in csvReadera:
    a_dict[line["ReferenceID"]] = line["PartNumber"]
print(a_dict)

for line in csvReaderb:
    b_dict[line["ReferenceID"]] = line["PartNumber"]
print(b_dict)

a_dict = {'R150': 'PN000123', 'R331': 'PN000873', 'C774': 'PN000064', 'L7896': 'PN000447', 'R0640': 'PN000878', 'R454': 'PN000333'}
b_dict = {'C774': '', 'R331': '', 'R454': '', 'L7896': 'PN000000', 'R0640': '', 'R150': 'PN000333'} 
```

如何比较两个字典并填充/覆盖 b-dict 的缺失值，然后写入 sheet2？当然，肯定有比我想出的更有效的方法，但是我以前从未使用过 Python，所以请原谅我可怜的尝试！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:28:20.187

看看熊猫图书馆。

```
import padas as pd

#this is how you read
dfa = pd.read_csv("sheet1.csv")
dfb = pd.read_csv("sheet2.csv") 
```

让我们把你定义为 testdata 的 dicts

```
a_dict = {'R150': 'PN000123', 'R331': 'PN000873', 'C774': 'PN000064', 'L7896': 'PN000447', 'R0640': 'PN000878', 'R454': 'PN000333'}
b_dict = {'C774': '', 'R331': '', 'R454': '', 'L7896': 'PN000000', 'R0640': '', 'R150': 'PN000333'}
dfar = pd.DataFrame(a_dict.items(), columns = ['ReferenceID', 'PartNumber'])
dfbr = pd.DataFrame(b_dict.items(), columns = ['ReferenceID', 'PartNumber'])
dfa = dfar[['ReferenceID', 'PartNumber']]
dfa.columns = ['ReferenceIDA', 'PartNumberA']
dfb = dfbr[['ReferenceID', 'PartNumber']]
dfb.columns = ['ReferenceIDB', 'PartNumberB'] 
```

你明白了

```
 In [97]: dfa
Out[97]: 
  ReferenceIDA PartNumberA
0         R331    PN000873
1         R454    PN000333
2        L7896    PN000447
3         R150    PN000123
4         C774    PN000064
5        R0640    PN000878

In [98]: dfb
Out[98]: 
  ReferenceIDB PartNumberB
0         R331            
1         R454            
2        R0640            
3         R150    PN000333
4         C774            
5        L7896    PN000000 
```

现在

```
 In [67]: cd = pd.concat([dfa,dfb], axis=1)

    In [68]: cd
    Out[68]: 
  ReferenceIDA PartNumberA ReferenceIDB PartNumberB
0         R331    PN000873         R331            
1         R454    PN000333         R454            
2        L7896    PN000447        R0640            
3         R150    PN000123         R150    PN000333
4         C774    PN000064         C774            
5        R0640    PN000878        L7896    PN000000

cd["res"] = cd.apply(lambda x : x["PartNumberB"] if x["PartNumberB"] else x["PartNumberA"], axis=1)

 cd
Out[106]: 
  ReferenceIDA PartNumberA ReferenceIDB PartNumberB       res
0         R331    PN000873         R331              PN000873
1         R454    PN000333         R454              PN000333
2        L7896    PN000447        R0640              PN000447
3         R150    PN000123         R150    PN000333  PN000333
4         C774    PN000064         C774              PN000064
5        R0640    PN000878        L7896    PN000000  PN000000 
```

这就是你想要的

刚刚设置

```
dfbr['PartNumber'] = cd['res'] 
```

并转储到 csv

```
dfbr.to_csv('sheet2.csv') 
```

# javascript - 重载下宽度返回 0

> ID：13636264
> 
> 赞同：2
> 
> 时间：2012-11-29T22:53:35.130
> 
> 标签：javascript, image, html, fileapi

下面的 handleFiles 方法正在从拖放和文件输入中传递文件。在获取给定文件的数据 url 后，它会将其传递给 processImage 函数。此函数创建一个新图像并设置该图像的 src 和文件。然后我根据传入图像的宽度采取不同的操作，并将图像插入到 dom 中。但是，我注意到当放入一堆图像时 imageWidth 将设置为 0。我已经确认 image.src 设置正确，并且单独放入相同的图像可以正常工作。我还确认，如果我删除宽度计算，图像确实会在页面上正确显示。当我进入调试器时，我可以确认在 imageWidth 设置为 0 i.width 后立即返回正确的值。起初我认为这可能是 Chrome 中的线程问题，但是当我在 FireFox 中也看到这种情况时，我感到很震惊。我无法确定某个阈值，但是您在浏览器上施加的负载越多，正确获取宽度的可能性就越小。

我在 FireFox 16.0.2 和 Chrome 23.0.1271.95 中都看到了这个问题。

```
function handleFiles(files) {

  for (var i = 0; i < files.length; i++) {
    var file = files[i];

    if( !isImage(file) ) { 
      continue;
    }   

    var reader = new FileReader();

    reader.onloadend = function(e) {
      var dataURL = e.target.result;
      processImage(file, dataURL);
    }   

    reader.readAsDataURL(file);
  }
}

function processImage(file, dataURL) {
  var i = new Image();
  i.src  = dataURL;
  i.file = file;

  //console.log(i);
  var maxWidth = 600;
  var imageWidth = i.width;

  ......
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:05:26.730

与所有图像一样，它们可能需要时间加载才能告诉您它们的宽度：

```
 var i = new Image();
  i.onload = function() {
     //console.log(i);
     var maxWidth = 600;
     var imageWidth = this.width;
  }
  i.src  = dataURL;
  i.file = file; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:03:45.513

宽度（和高度）可能为 0，因为它尚未加载。

尝试`load`像这样添加事件：

```
function processImage(file, dataURL) {
  var i = new Image();

  i.addEventListener("load", function () {
    var maxWidth = 600;
    var imageWidth = i.width;

    ......

  });

  i.src  = dataURL;
  i.file = file;

} 
```

# drupal-7 - 我想在我的 Windows 系统上安装 Drupal，我已经安装了 wamp，我应该安装 aquiadrupal 吗？

> ID：13636265
> 
> 赞同：0
> 
> 时间：2012-11-29T22:53:38.903
> 
> 标签：drupal-7

教程建议安装 Drupal 的最佳方法是安装 acquia drupal 堆栈，但我已经安装了 wamp。我不知道我是否应该删除 wamp（我不知道如何最好地做到这一点）或者同时安装它们或什么。我目前有 mysql 5.5.24 和 php 5.3.13。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:37:00.490

Drupal 是一个由访问 MySQL 的 PHP 脚本组成的 Web 应用程序。WAMP 是一个使用 Apache 和 MySQL 运行 PHP 脚本的平台。

因此，如果您想使用通用 WAMP 堆栈（如 Xampp、WampServer 或 Wamp-Developer Pro），使用它创建一个网站，然后在该网站上安装 Drupal，这取决于您……或者如果您想使用专门定制的已经预装了 Drupal 的 WAMP 发行版。

两者都有其优点和缺点。使用 Acquia Drupal 堆栈可能会更快，但使用 Wamp-Developer 或 Xampp 会有更多通用选项可用。

一种适用于非常特定的用途，另一种适用于多种用途。

# javascript - 为什么不能从对话窗口 (Firefox) 获取浏览器 url？

> ID：13636268
> 
> 赞同：0
> 
> 时间：2012-11-29T22:53:55.720
> 
> 标签：javascript, firefox-addon

救命！我的一个 js 文件中有一个函数可以从主浏览器窗口获取 url。我的插件是一个工具栏。从工具栏的 javascript 调用此函数时可以正常工作。

但是，我还有另一个使用此函数的对话框窗口（通过 xul）（通过窗口加载侦听器调用它），但是当它被调用时，虽然该函数确实触发了，但它给了我这个：`TypeError: window.content is null`.

```
function GetTheBrowserUrl(){
var browserwindow = window.top.getBrowser().selectedBrowser.contentWindow.location.href;
return browserwindow;
//return getBrowser().contentWindow.location.href;
} 
```

那么我怎样才能让它从对话窗口工作呢？似乎从对话窗口调用函数需要以某种方式在浏览器窗口上获取句柄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T18:13:36.283

```
var wm = Components.classes["@mozilla.org/appshell/window-mediator;1"]
         .getService(Components.interfaces.nsIWindowMediator);
var window = wm.getMostRecentWindow("navigator:browser");
return window.gBrowser.contentWindow.location.href 
```

# oracle - Oracle 审计授予 dba 角色

> ID：13636272
> 
> 赞同：4
> 
> 时间：2012-11-29T22:54:10.357
> 
> 标签：oracle, database-administration, auditing

在 XP SP2 虚拟机中运行 Oracle 11gR1。完全披露：这是一个任务。

每当用户被授予 DBA 角色时，我都会尝试进行审核，并在事件发生时触发电子邮件。

我相信该命令`AUDIT DBA;`将审核对 DBA 角色执行的所有操作。我有一个完整的工作程序来处理电子邮件部分，但我不知道标准审计以与细粒度审计策略相同的方式触发该程序的方式。

我尝试过使用该政策

```
begin
dbms_fga.drop_policy
    (object_schema => 'SYS',
    object_name => 'DBA_ROLE_PRIVS',
    policy_name => 'EXAMPLE');
dbms_fga.add_policy
    (object_schema => 'SYS',
    object_name => 'DBA_ROLE_PRIVS',
    policy_name => 'EXAMPLE',
    audit_condition => 'GRANTED_ROLE = DBA',
    audit_column => 'GRANTED_ROLE',
    handler_schema => 'SYS',
    handler_module => 'FGA_NOTIFY');
end; 
```

其中 FGA_NOTIFY 是电子邮件过程。但我收到“不允许向 SYS 拥有的对象添加策略”的通知。搜索 Oracle 的文档，我发现没有办法解决这个问题。

我的问题是：当用户获得 DBA 角色时，谁能建议一种审计和 Oracle 数据库的方法，这也可以触发电子邮件通知？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T12:51:50.253

您可以启用 AUDIT_TRAIL 并创建一个定期查询 DBA_AUDIT_TRAIL 视图以查找您要检查的授权类型的作业：

```
 select os_username, username, userhost, terminal, timestamp, grantee  
   from   dba_audit_trail
   where  action_name = 'GRANT ROLE'
   and    obj_name    = 'DBA'
   and    timestamp   >= (last_time_check_was_done) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T14:03:59.653

您还可以为此创建一个数据库触发器：

```
 CREATE OR REPLACE TRIGGER TG_GRANTS_DATABASE
    BEFORE GRANT ON DATABASE
 DECLARE
    V_NUM_GRANTEES   BINARY_INTEGER;
    V_GRANTEE_LIST   ORA_NAME_LIST_T;
    V_NUM_PRIVS      BINARY_INTEGER;
    V_PRIV_LIST      ORA_NAME_LIST_T;

    VB_AUDIT_PRIV    BOOLEAN;
    VB_AUDIT_GRANTEE BOOLEAN;
 BEGIN
    V_NUM_GRANTEES := ORA_GRANTEE (V_GRANTEE_LIST);
    V_NUM_PRIVS    := ORA_PRIVILEGE_LIST (V_PRIV_LIST);

    -- Verify the privilege
    VB_AUDIT_PRIV := FALSE;
    FOR COUNTER IN 1 .. V_NUM_PRIVS
    LOOP
       IF  V_PRIV_LIST (COUNTER) IN ('DBA') THEN
           VB_AUDIT_PRIV := TRUE;
           EXIT;
       END IF;
    END LOOP;

    -- Verify the user
    VB_AUDIT_GRANTEE := FALSE;
    FOR COUNTER IN 1 .. V_NUM_GRANTEES
    LOOP
       IF  V_GRANTEE_LIST (COUNTER) IN ('PUBLIC') THEN
           VB_AUDIT_GRANTEE := TRUE;
           EXIT;
       END IF;
    END LOOP;

    --   Prevent the statement
    --   or audit it (BEST DONE  on 'AFTER GRANT ON DATABASE trigger')
    IF   VB_AUDIT_GRANTEE AND VB_AUDIT_PRIV  THEN
         RAISE_APPLICATION_ERROR(-20001,'Sorry, this can''t be done.');
    END  IF;
 END; 
```

这是基于以下内容的改编：[http ://examples.oreilly.com/oraclep3/individual_files/what_privs.sql](http://examples.oreilly.com/oraclep3/individual_files/what_privs.sql)

# c# - 如何创建存储在对象变量中的对象的新默认实例？

> ID：13636274
> 
> 赞同：0
> 
> 时间：2012-11-29T22:54:15.133
> 
> 标签：c#, object, default, createinstance

下面的示例显示了意图。该示例正在遍历一个对象数组，并创建一个加载了默认值的相同类型的数组。值本身不需要从一个列表复制到下一个列表。这是列表的“类型克隆”。

下面的代码会为 Activator 产生以下错误：

*“System.Int32 不是 GenericTypeDefinition。MakeGenericType 只能在 Type.IsGenericTypeDefinition 为真的类型上调用。”*

Activator、CreateInstance 和 MakeGenericType 的细节还是让我有点困惑。

如何更改代码以避免错误？

任何建议，将不胜感激。

```
 private void Test()
    {
        object[] a = new object[] {100, "Text", new clsMyClass()};
        object[] b = new object[a.Length];

        for (int i = 0; i < a.Length; i++)
        {
            b[i] = Activator.CreateInstance(a[i].GetType().MakeGenericType());
        }

        for (int i = 0; i < b.Length; i++)
        {
            Console.WriteLine(b[i].GetType().ToString());
        }
    } 
```

预期的输出将是：

*   System.Int32
*   系统字符串
*   MyNamespace.clsMyClass

结果值为：

*   b[0] = 0
*   b[1] = ""
*   b[2] = 新的 clsMyClass

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T22:56:42.790

删除`MakeGenericType()`，它将开始工作，使用这个

```
b[i] = Activator.CreateInstance(a[i].GetType()); 
```

MakeGenericType 用于用定义的参数替换泛型参数。例如，如果您的数组将包含`List<T>`，则调用 `a[i].GetType().MakeGenericType(typeof(int))`将返回 type `List<int>`。

在您的情况下，我没有看到任何泛型类型，所以我想知道您为什么使用它

另请注意，`Activator.CreateInstance`只有当类型具有无参数构造函数时，这样的调用才会起作用，例如在`string`. 你可以`string`这样处理

```
for (int i = 0; i < a.Length; i++)
{
   var oType = a[i].GetType();
   if (oType == typeof(string)) 
       b[i] = string.Empty; //or may be null 
   else
       b[i] = Activator.CreateInstance(oType);
} 
```

对于没有无参数构造函数的所有类型，都应该做一些类似的事情。 `Activator.CreateInstance(type, parameters...)`可以完成这项工作。如果需要，您可以使用反射来调查类型构造函数参数

# javascript - Javascript 检查浮点数

> ID：13636276
> 
> 赞同：1
> 
> 时间：2012-11-29T22:54:24.210
> 
> 标签：javascript, type-conversion

我有一个用户输入坐标的应用程序。

在 DB 和大多数地图软件中，他们使用十进制表示法来表示 lat/lng（例如`123.1234`），而不是旧格式：`34N 40' 50.12"`

我需要测试输入到表单中的值是浮点数，而不是字符串。但是在`34N 40' 50.12"`返回 34 上使用 parseFloat - 这可以使用大多数测试进行验证。

这就是我正在尝试的，这是在这里找到的一些非常聪明的解决方案的混搭——但到目前为止，我无法让这个东西在所有情况下都能正常工作。我正在测试的基本案例是：

*   `123.1234`- 有效的
*   `'123.1234'`- 有效的
*   `34N 40' 50.12"`- 无效的
*   `'34N 40' 50.12"'`- 无效的
*   `123`- 有效的
*   `'123'`- 有效的

这是我一直在尝试的一个 jsfiddle：http: [//jsfiddle.net/zfwAj/](http://jsfiddle.net/zfwAj/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:37:30.240

似乎我应该发布作为答案

[`isNaN()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)应该可以过滤掉那些[jsfiddle.net/QYMRe](http://jsfiddle.net/QYMRe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T22:58:18.267

尝试

```
/^\d+\.?\d*$/.test( str ); 
```

[**在这里**](http://jsfiddle.net/zfwAj/2/)提琴[](http://jsfiddle.net/zfwAj/2/)

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T06:52:44.703

我建议这个：

```
/^-?(\d*\.\d+|\d+(\.\d+)?)$/.test(str) 
```

这接受负数，并像 (.42) 一样浮动

[小提琴](http://jsfiddle.net/ilausuch/8gn9jm95/)测试**

# perl - 使用 perl 从一行中提取元素的更好方法？

> ID：13636277
> 
> 赞同：2
> 
> 时间：2012-11-29T22:54:25.223
> 
> 标签：perl

我想从文件的每一行中提取一些元素。下面是一行：

```
 #                 1150 Reading location  09ef38 data = 00b5eda4 
```

我想从这一行中提取地址**09ef38**和数据**00b5eda4**。

我使用的方法很简单，如下所示：

```
while($line = < INFILE >) {

    if ($line =~ /\#\s*(\S+)\s*(\S+)\s*(\S+)\s*(\S+)\s*(\S+)\s*=\s*(\S+)/) {
       $time = $1;
       $address = $4;
       $data = $6;
       printf(OUTFILE "%s,%s,%s \n",$time,$address,$data);
      }
} 
```

我想知道这样做有没有更好的主意？更容易和更清洁？

非常感谢！

TCGG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:03:44.643

您可以在 LHS 上使用匹配和列表，如下所示：

```
echo '# 1150 Reading location 09ef38 data = 00b5eda4' | 
  perl -ne '
    $,="\n";
    ($time, $addr, $data) = /#\s+(\w+).*?location\s+(\w+).*?data\s*=\s*(\w+)/;
    print $time, $addr, $data' 
```

输出：

```
1150
09ef38
00b5eda4 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:12:01.063

另一种选择是在空格上[拆分](http://p3rl.org/split)字符串：

```
my ($time, $addr, $data) = (split / +/, $line)[1, 4, 7]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:05:42.270

在 python 中，适当的正则表达式如下：

```
'[0-9]+[a-zA-Z ]*([0-9]+[a-z]+[0-9]+)[a-zA-Z ]*= ([0-9a-zA-Z]+)' 
```

但我不确切知道如何用 perl 编写它。你可以搜索它。如果您需要对此正则表达式的任何解释，我可以用更精确的描述编辑这篇文章。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T23:30:53.183

我发现使用`\s+`. 这样，如果输入字符串中包含任何制表符而不是空格，您将不会遇到任何问题。

```
while($line = <INFILE>)
{
    my ($time, $addr, $data) = (split /\s+/, $line)[1, 4, 7];
} 
```

当被任何类型的空格分割时，重要的是要注意它也会在末尾被换行符分割，所以你会在返回的末尾得到一个空元素。但在大多数情况下，除非您关心返回的元素总数，否则无需关心。

# jquery - 在分数表上获得赢、平、输结果

> ID：13636283
> 
> 赞同：0
> 
> 时间：2012-11-29T22:54:44.867
> 
> 标签：jquery, html-table, compare

从数据库打印的动态数据/表格。需要获得**球队**获胜、平局、失败的次数。jQuery 超级新手，不知道从什么开始编码（？！）。我正在考虑首先获取 Chelsea 出现的行，然后比较分数，使用数组存储 W、T、L 并在最后打印结果（？）。

**这是表格的样子：**

```
<table>
<tr id="12">
   <td class="238 ekipi_1">Chelsea</td>
   <td class="231 ekipi_2">ManU</td>
   <td class="goals_238">4</td>
   <td class="goals_231">2</td>
</tr>

<tr id="13">
   <td class="242 ekipi_1">Reading</td>
   <td class="238 ekipi_2">Chelsea</td>
   <td class="goals_242">3</td>
   <td class="goals_238">3</td>
</tr>

<tr id="16">
   <td class="251 ekipi_1">Swansea</td>
   <td class="238 ekipi_2">Chelsea</td>
   <td class="goals_251">5</td>
   <td class="goals_238">3</td>
</tr>
</table> 
```

**结果将是：**

> ```
>  W   T   L
> 
> Chelsea | 1 | 1 | 1 |
> Reading | 0 | 1 | 0 |
> ManU    | 0 | 0 | 1 | 
> ```

任何领先的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:24:23.433

要读取初始数据并构建对象，您可以这样做..

```
 var teams = {
    "Chelsea": {"W": 0, "T": 0, "L": 0},
    "ManU": {"W": 0, "T": 0, "L": 0},
    "Reading": {"W": 0, "T": 0, "L": 0},
    "Swansea": {"W": 0, "T": 0, "L": 0}
};

$('table tr').each(function() {
    var $this = $(this);
    var team1 = $this.find('td:eq(0)').text();
    var team2 = $this.find('td:eq(1)').text();
    var score1 = $this.find('td:eq(2)').text();
    var score2 = $this.find('td:eq(3)').text();

    if(+score1 === +score2){
        teams[team1]["T"] =  +teams[team1]["T"] +1; 
        teams[team2]["T"] =  +teams[team2]["T"]+1; 
    }  
    else if(+score1 > +score2){
        teams[team1]["W"] =  +teams[team1]["W"]+1; 
        teams[team2]["L"] =  +teams[team2]["L"]+1; 
    }
    else{
        teams[team1]["L"] =  +teams[team1]["L"]+1; 
        teams[team2]["W"] =  +teams[team2]["W"]+1; 
    }        
});

// Print the data

$.each(teams, function(key,value){
    var $clone = $('#template');
    $clone.find('.team').html(key);
    $clone.find('.score:eq(0)').html(value["W"]);
    $clone.find('.score:eq(1)').html(value["T"]);   
    $clone.find('.score:eq(2)').html(value["L"]);
    $('#output').append($clone.html());
}); 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/rd4Y6/4/)**

完成后，您可以阅读**团队对象**并打印出来。

# android - 跨调用保留 PreferenceActivity 的滚动位置

> ID：13636284
> 
> 赞同：1
> 
> 时间：2012-11-29T22:54:45.587
> 
> 标签：android

假设我有一个`PreferenceActivity`（出于兼容性原因，我无法将其转换为使用 Fragments）。其中的一项设置`PreferenceActivity`是针对当前应用程序主题，我想通过调用`PreferenceActivity#recreate()`强制重新创建活动（使用新主题）更改首选项时立即应用该主题。

不幸的是，该活动包含太多设置，可能需要滚动。重新创建活动后，我想恢复之前的滚动位置，以允许从一个主题无缝过渡到另一个主题。

但是，尝试使用in保留嵌入`ListView`的滚动位置总是返回零。`getListView().getScrollY()``onSaveInstanceState`

有什么方法可以获取`PreferenceActivity`列表滚动位置并在以后恢复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-01T12:29:29.930

首先，您需要获得 2 个值：

```
final int firstVisibleItem = getListView().getFirstVisiblePosition();
final int firstVisibleItemTop = getListView().getChildAt(0).getTop(); 
```

然后将它们保存到一些存储中（首选项或意图的 budle 或其他地方）。要从这些值恢复滚动位置：

```
final ListView listView = getListView();
listView.setSelection(firstVisibleItem);
listView.smoothScrollBy(-firstVisibleItemTop, 0); 
```

# c++ - 特定类型的可变参数模板

> ID：13636290
> 
> 赞同：19
> 
> 时间：2012-11-29T22:55:22.463
> 
> 标签：c++, gcc, c++11, variadic-templates

我想要一个只接受无符号整数的可变参数模板。但是，我无法使以下工作。

```
struct Array
{
    template <typename... Sizes> // this works
    // template <unsigned... Sizes> -- this does not work (GCC 4.7.2)
    Array(Sizes... sizes)
    {
        // This causes narrowing conversion warning if signed int is supplied.
        unsigned args[] = { sizes... };
        // ...snipped...
    }
};

int main()
{
    Array arr(1, 1);
} 
```

任何帮助表示赞赏。

编辑：如果您想知道，我正在尝试使用可变参数模板来复制以下内容。

```
struct Array
{
    Array(unsigned size1) { ... }
    Array(unsigned size1, unsigned size2) { ... }
    Array(unsigned size1, unsigned size2, unsigned size3) { ... }
    // ...
    Array(unsigned size1, unsigned size2, ..., unsigned sizeN) { ... }
}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T23:00:41.950

我不确定你为什么期望它起作用。Clang 告诉我错误`unknown type name 'Sizes'`在构造函数的声明中。这是意料之中的，因为`Sizes`它不是类型（或者更确切地说，类型的模板包），它是值的模板包。

目前还不清楚你到底想在这里做什么。如果您将整数值作为模板参数传递，那么构造函数参数应该是什么？

* * *

**更新**：使用您的新代码，您只需要一个`static_cast<unsigned>()`.

```
struct Array
{
    template <typename... Sizes> // this works
    Array(Sizes... sizes)
    {
        unsigned args[] = { static_cast<unsigned>(sizes)... };
        // ...snipped...
    }
}; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T23:09:28.677

如果要接受必须全部为整数的*动态*参数，则需要一个普通的类型*名*模板，但请检查所有类型是否（可转换为）无符号整数：

```
#include <type_traits>

struct Array
{
    template <typename ...Args>
    explicit Array(Args ...args,
        typename std::enable_if<all_int<Args...>::value>::type * = nullptr);

    // ...
}; 
```

现在你只需要这个特征：

```
template <typename...> struct all_int;

template <> struct all_int<> : std::true_type { };

template <typename T, typename ...Rest> struct all_int<T, Rest...>
: std::integral_constant<bool,
       std::is_convertible<T, unsigned int>::value && all_int<Rest>::value>
{ } 
```

如果您更喜欢使类型严格，您也可以使用`is_same`代替`is_convertible`.

另一种选择是完全放弃可变参数模板并通过接受单个 使您的类列表可初始化`std::initializer_list<unsigned int>`，这提供了相当好的数字安全性（例如，禁止缩小转换）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-29T23:11:30.323

查看[初始化列表](http://www.cplusplus.com/reference/initializer_list/initializer_list/)

你可以像这样指定它

```
struct Array
{
    Array(std::initializer_list<unsigned> sizes)
    {
        for (auto i = sizes.begin(); i != sizes.end(); ++i)
            ...
    }
} 
```

虽然，用法会更改为

```
Array arr = {1, 1}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-29T16:26:43.927

## 背景故事

当试图或多或少地实现 OP 试图做的事情时，我偶然发现了这个相当古老的问题。我已经实现了类似于@Kerrek SB 的解决方案的东西，并且正在寻找一种“概括”这种行为的方法（通过提供一个谓词作为模板结构，该结构被评估为不必重新实现不同谓词的“递归” ）。然而，在这样做的同时，我意识到新的 CPP20 概念功能以非常优雅的方式解决了这个问题，因此想分享这个解决方案。我没有将概念视为解决方案，因为我在某处读到它们不能以递归方式声明（我发现这不是实际负担，因为我可以参考递归类型特征解决方案）。

## 解决方案

在此解决方案中，我定义了一个自定义概念，因为我认为 STL 提供的概念不涵盖大多数实际用例，而 STL 可以在这种情况下使用这些概念。只需用正在使用的概念替换“类型名称”，该概念就会应用于所有提供的模板参数。

```
#include <concepts>
#include <type_traits>

template <typename T> concept unsignedType = std::is_unsigned_v<T>; 

struct Array {
  template <unsignedType... Sizes> Array(Sizes... sizes) {
    unsigned args[] = {sizes...};
  }
};

int main() {
  unsigned k = 12;
  Array arr(k, 1u); 
  //Array arr(33);  // fails as 33 is not unsigned
} 
```

## 汇编

我正在使用 gcc-10，在以前的版本中，概念功能可能不可用，因为此功能是实验性的：g++-10.0 -std=c++2a file.cc

# codeigniter - 我的活动会话不会加载，返回 WSOD - CodeIgniter

> ID：13636298
> 
> 赞同：1
> 
> 时间：2012-11-29T22:56:20.933
> 
> 标签：codeigniter, session

我正在做一个任务，遇到了这个奇怪的问题。

假设我输入了用户名/密码，现在已经登录。我去了一个不同的网站，并想返回到我登录的网页。这就是我实施处理这种情况的方式：

```
//Controller

public function index()
    {

        $loggedin = $this->alibrary->is_loggedin();

    if ($loggedin === false) 
    {
        $this->load->view('normal_screen');
    }

    if ($loggedin === true)
    {
        $this->load->view('homepage');
    }
} 
```

但如果我之前登录并返回网页，我会看到一个空白屏幕。但是当我没有登录时，它会显示正常屏幕。我不知道为什么我得到一个空白页，有人可以解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T02:32:31.980

这可能是我个人的偏好，但我会重写你的代码如下：

```
public function index()
{
   $loggedin = $this->alibrary->is_loggedin();

   // redirect non logged in users to another page
   if (!$loggedin) {
        redirect('your/url/to/normal_screen', 'location');
   }

   // If they get this far we can assume they are logged in, so load the view
   $this->load->view('homepage');

} 
```

您会注意到我`redirect()`在用户未登录时使用。我个人的偏好是，如果未登录用户尝试访问需要授权的站点的一部分，则将他们重定向回登录屏幕。

# php - 组合 strlen()、str_replace()、substr()

> ID：13636299
> 
> 赞同：0
> 
> 时间：2012-11-29T22:56:26.580
> 
> 标签：php

我想在 13 个字符后剪切描述字符串 "$values['description']" 并在之后添加 3 个点。

我在这里找到了解决方案：

[PHP - 在 X 个字符后剪切一个字符串](https://stackoverflow.com/questions/3161816/php-cut-a-string-after-x-characters)

```
$string = (strlen($string) > 13) ? substr($string,0,10).'...' : $string; 
```

但是将它与我​​的代码结合起来对我来说有点复杂：

> 'desc' => str_replace(array("\t","\r", "\n"), '', preg_replace('/(<.*?>)/', '', htmlspecialchars_decode($values[ '描述']）））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:02:09.160

```
$string = str_replace(array("\t","\r", "\n"), '', preg_replace('/(<.*?>)/', '', htmlspecialchars_decode($values['description'])));

$string = (strlen($string) > 13) ? substr($string,0,10).'...' : $string; 
```

然后添加到您的数组中？...给您留下：

```
'desc' => $string 
```

所以代码应该遵循第 1 行和第 2 行。然后 $var= array('desc' => $string); 或任何你想做的事情。

# php - 在下拉更改时使用 Ajax 更新 Google 地图

> ID：13636306
> 
> 赞同：0
> 
> 时间：2012-11-29T22:56:47.277
> 
> 标签：php, codeigniter, jquery, google-maps-api-3

我正在使用 CodeIgniter 和 Gmap v3，如下所述：http: [//www.in-the-attic.co.uk/2010/08/02/codeigniter-google-maps-library-using-google-maps-api-version -3/](http://www.in-the-attic.co.uk/2010/08/02/codeigniter-google-maps-library-using-google-maps-api-version-3/)

我正在尝试在下拉更改时使用 Ajax 更新 Google 地图。我看到它被发布并且回复回来了，但地图变成“灰色”。

有什么想法吗？

```
 $(document).ready(function() {
    $("#cats").change(function() {

    var v = $("#cats").val()

    });
    });

    function getcat(v){
    if(v!='') {
$.ajax({
   type: "POST",
   url: "<?php echo base_url();?>home/ajaxmap/",
   data: "CID="+v,
   success: function(msg){
    document.getElementById('map').innerHTML = msg;

   }
 });
     }
   }
   </script> 
```

然后在我的控制器中：我循环并回显 $this->gmap->addMarkerByAddress("address", description, etc);`

# c - C中的随机图

> ID：13636308
> 
> 赞同：1
> 
> 时间：2012-11-29T22:56:53.557
> 
> 标签：c, random, graph, probability

我有一个关于随机图的作业。我无法理解这个问题。任何人都可以向我澄清我应该做什么吗？

让`N`是一个正整数和`p`一个介于 0 和 1 之间的数字。`(N, p)`随机图是由以下过程生成的图：

绘制`N`顶点，分别表示`1, 2, . . . , N`为；对于每一对`(u, v)`不同的顶点，以概率`p`将这两个顶点与一条边连接起来。如果任意两个顶点之间存在路径，则称图是连通的。

在本实验中，您将编写代码来生成大型随机图并研究此类图的连通性。

我们将固定`N`为，`500,000`但让 p 变化`{0.05, 0.10, 0.15, ..., 0.95}`。对于每个 p 值，您需要创建 100 个`(N, p)`随机图。您需要开发一种方法（当然还要在您的程序中实现它）来确定图是否已连接。然后对于 p 的每个值，您需要计算`M`连接的随机图的数量，并研究`M`（反映随机图连接的概率）和之间的关系`p`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:15:46.367

随机图是随机创建的图：

### 伪代码

```
for i := 1 to N
   for j := i+1 to N
       if bernoulli_distributed_with_param_p is true
           add undirected edge {i,j} to graph 
```

该参数`p`只是两个给定顶点连接的概率。`bernoulli_distributed_with_param_p`在 C 中实现实际上非常简单：

```
// Returns 0 with probability (1-p)
int bernoulli_distributed(double p){
    return (p > ((double)rand())/RAND_MAX);
} 
```

不要忘记您需要使用 初始化随机生成器[`srand`](http://en.cppreference.com/w/c/numeric/random/srand)。

# java - 如何用编译时泛型验证替换运行时 instanceof 检查

> ID：13636312
> 
> 赞同：2
> 
> 时间：2012-11-29T22:57:06.393
> 
> 标签：java, validation, generics, instanceof

对真正的 Java 泛型专家有一点困惑... ;)

假设我有以下两个接口：

```
interface Processor {
    void process(Foo foo);
}

interface Foo {
    Processor getProcessor();
} 
```

例如，以下两个实现类：

```
static class SomeProcessor implements Processor {
    static final SomeProcessor INSTANCE = new SomeProcessor();

    @Override
    public void process(Foo foo) {
        if (foo instanceof SomeFoo) { // <-- GET RID OF THIS ?
            // process ((SomeFoo) foo)
        }
    }
}

class SomeFoo implements Foo {
    @Override
    public Processor getProcessor() {
        return SomeProcessor.INSTANCE;
    }
} 
```

有什么方法可以使这两个接口通用，这样我就不需要函数`instanceof`中的标记检查，`process()`并且在我的代码的其他地方仍然有以下构造工作？

```
foo.getProcessor().process(foo); 
```

（当然，我不知道我正在处理的 Foo 的哪个子类）

换句话说：我正在寻找一种在对象中定义函数的方法，以便它只能返回另一个处理包含该函数的对象类型的对象。注意：我不只是在谈论处理包含函数的对象的一些最小公分母超类（上图：Foo），而是该对象的实际类（上图：SomeFoo）。

（这远没有听起来那么微不足道，除非我现在真的很愚蠢......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:12:28.590

你可以用泛型做的是：

```
interface Processor<T extends Foo> {
  void process(T foo);
}

interface Foo {
  Processor<? extends Foo> getProcessor();
} 
```

然后

```
class SomeProcessor implements Processor<SomeFoo> {
  public void process(SomeFoo foo) {
    // TODO
  }
}

class SomeFoo implements Foo {
  public Processor<? super SomeFoo> getProcessor() {
    return processor;
  }
} 
```

这显然意味着您需要一个`Foo.setProcessor()`带有通配符的对应项，这反过来又意味着您最终会在某处获得未经检查的演员表。从语言的角度来看，这是不安全的，并且没有办法解决这个问题。

*您可以使用超类型令牌*检查处理器实例化，但这将在运行时发生，因此在编译时您不能保证 API 被滥用。尽你所能记录下来。

[这个馅饼](http://pastebin.com/Ef3PYTNd)说明了我的想法。您不能将此问题建模为在编译时具有类型安全性，因为`Foo`接口需要一种方法来声明方法返回用当前接口实现实例化的泛型类型。这会破坏继承，并且不能在 Java 中完成。

但是，使用[超类型令牌](http://gafter.blogspot.it/2006/12/super-type-tokens.html)，您可以**在运行时**检查处理器是否是*正确*的类型，如果您在 API 文档中明确声明只有处理器有权调用实例，则**始终在语言级别保证这一点。**如果客户端程序员不服从并使用不正确的类型调用，您的类仍然会抛出异常，但在运行时。`setProcessor()``Foo``setProcessor()`

# 附录：为什么你不应该参数化 Foo

我想添加一小段来解释为什么我不喜欢 Meriton 的答案（当前接受的答案），以及所有其他涉及参数化类型`Foo`以使其变为`Foo<T>`.

软件失败：这不是一件坏事或不寻常的事情，它只是发生了。它越早失败越好，所以我们可以修复它并避免损失（通常是金钱，但实际上是任何人可能关心的东西）。这是今天选择 Java 的一个令人信服的理由：由于类型是在编译时检查的，所以一整类错误永远不会进入生产环境。

这就是泛型的用武之地：另一整类错误被排除在外。回到你的例子，有人建议添加一个类型参数，`Foo`这样你就可以在编译时获得类型安全。然而，使用 Meriton 的实现，可以编写绕过编译器检查的*不合逻辑*的代码：

```
class SomeFoo implements Foo<WrongFoo> {} 
```

有人可能会争辩说，判断程序在*语义上*是否正确不是编译器的工作——我同意——但是一种好的语言可以让编译器发现问题并提示解决方案。在这里使用类型参数只是在宣传一个明智的软件。

与其依赖脆弱的约定，不如坐下来，关闭 IDE 并思考如何改进设计以使客户端代码不会失败。最终，这是软件失败的主要原因：不是因为**语言**是强类型或动态类型的，而是因为**开发人员**误解了 API。使用强类型语言是防止一种误用的一种方法。

您的界面很奇怪，因为它定义了一个`getProcessor()`但没有说明谁负责**设置**处理器。如果它`Foo`提供自己的处理器是一样的，那么类型安全只会被一个非常愚蠢的开发人员破坏；但由于它可以在运行时检查（参考我的带有超级类型令牌的演示），因此可以通过良好的开发过程（单元测试）轻松保证。`setProcessor()`如果您定义 a或等效项，则结论不会发生太大变化。

您正在寻找的 API 不可能用 Java 来描述 - 顺便说一句，我认为对于每一种面向对象的语言都是如此，因为它打破了继承的主要规则，即父类不知道它们的子类（这反过来引入多态性）。使用通配符（正如我在演示中所暗示的那样）是使用 Java 泛型最接近的方式，提供类型安全并且易于理解。

我鼓励您只向处理器添加一个类型参数，并为您的代码编写良好的文档和单元测试，而不是以*类型安全*的名义强制执行 Java 规则，这在这里真的没有任何意义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T10:27:55.217

从类型安全的角度来看，所有这些递归边界的东西都不是必需的。像这样就足够了：

```
interface Processor<F> {
    void process(F foo);
}

interface Foo<F> {
    Processor<F> getProcessor();
}

class SomeFoo implements Foo<SomeFoo> {
    @Override
    SomeProcessor getProcessor() { ... }
}

class SomeProcessor implements Processor<SomeFoo> {
    @Override
    void process(SomeFoo foo) { ... }
}

// in some other class:
<F extends Foo<? super F>> void process(F foo) {
    foo.getProcessor().process(foo);
} 
```

> 换句话说：我正在寻找一种在对象中定义函数的方法，以便它只能返回另一个处理包含该函数的对象类型的对象。注意：我不只是在谈论处理包含函数的对象的一些最小公分母超类（上图：Foo），而是该对象的实际类（上图：SomeFoo）。

这是不可能在 Java 中声明的。相反，正如您在上面看到的，您可以在类之外有一个通用方法（或者是该类的静态方法），它同时接受对象和处理器，并在两者上强制执行类型。

* * *

更新：如果您希望能够`process`使用 any调用`Foo`，那么我们也可以将 Meriton 的想法集成`getThis()`到此代码中（同样，没有递归边界）：

```
interface Foo<F> {
    Processor<F> getProcessor();
    F getThis();
}

class SomeFoo implements Foo<SomeFoo> {
    SomeProcessor getProcessor() { ... }
    SomeFoo getThis() { return this; }
}

// in some other class:
<F> void process(Foo<F> foo) {
    foo.getProcessor().process(foo.getThis());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T23:04:17.497

不，这不是 Java 泛型的设计目的。

另外，在我看来，需要进行类型检查表明设计存在问题。我建议尝试重新设计它，这样就没有必要了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T23:10:29.730

```
interface Processor<F extends Foo<F>> {
    void process(F fooSubclass);
}

interface Foo<F extends Foo<F>> {
    Processor<F> getProcessor();
} 
```

我还没有测试过这是否完全正确，但是这种让泛型类型引用自身的模式可能与编译时 Java 泛型一样接近。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-30T00:05:47.777

这比我想象的还要丑。我的看法：

```
interface Processor<F extends Foo<F>> {
    void process(F foo);
}

interface Foo<F extends Foo<F>> {
    Processor<F> getProcessor();
}

interface SomeFoo extends Foo<SomeFoo> {
    @Override
    SomeProcessor getProcessor();
}

interface SomeProcessor extends Processor<SomeFoo> {
    @Override
    void process(SomeFoo foo);
} 
```

现在，将编译以下内容：

```
<F extends Foo<F>> void process(F foo) {
    foo.getProcessor().process(foo);
} 
```

但

```
void process(Foo<?> foo) {
    foo.getProcessor().process(foo);
} 
```

不会，因为编译器无法知道传递的 foo 的实际类型是其类型参数的子类型，就像有人可以写的那样：

```
 class Bar implements Foo<SomeFoo> { ... } 
```

我们可以通过要求 foo 的子类型实现对其类型参数的转换来解决这个问题：

```
abstract class Foo<F extends Foo<F>> {
    abstract Processor<F> getProcessor();

    abstract F getThis();
}

class SomeFoo extends Foo<SomeFoo> {
    @Override
    SomeFoo getThis() {
        return this;
    }

    @Override
    Processor<SomeFoo> getProcessor() {
        return new SomeProcessor();
    }
} 
```

现在，我们可以写：

```
<F extends Foo<F>> void process(Foo<F> foo) {
    foo.getProcessor().process(foo.getThis());
} 
```

并调用它

```
Foo<?> foo = ...;
process(foo); 
```

为了使其易于使用，我建议将辅助方法移动到类 Foo 中：

```
abstract class Foo<F extends Foo<F>> {
    abstract Processor<F> getProcessor();

    abstract F getThis();

    void processWith(Processor<F> p) {
        p.process(getThis());
    }
} 
```

更新：我认为 newaccts 更新的答案显示了一个更优雅的解决方案，因为它不需要递归类型边界。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-30T00:09:36.517

这是您的代码完全“通用化”，但有一点变化：`INSTANCE`变量不是静态的。

```
interface Processor<T extends Foo<T>> {
    void process(T foo);
}

interface Foo<T extends Foo<T>> {
    Processor<T> getProcessor();
}

static class SomeProcessor<T extends Foo<T>> implements Processor<T> {

    final SomeProcessor<T> INSTANCE = new SomeProcessor<T>();

    @Override
    public void process(T foo) {
        // it will only ever be a SomeFoo if T is SomeFoo
    }
}

class SomeFoo implements Foo<SomeFoo> {
    @Override
    public Processor<SomeFoo> getProcessor() {
        return new SomeProcessor<SomeFoo>().INSTANCE;
    }
} 
```

没有编译器错误或警告。

`INSTANCE`之所以成为*实例*变量，是因为类类型不能通过静态任何东西。如果你真的只想要一个`INSTANCE`，请在类上使用单例模式。

# azure - WADPerformanceCounters、HR 和 HRI 表

> ID：13636313
> 
> 赞同：0
> 
> 时间：2012-11-29T22:57:11.913
> 
> 标签：azure, azure-storage, azure-diagnostics

我正在使用 Azure，并且正在使用性能计数器。我已经看到性能计数器存储在 WADPerformanceCountersTable 中。我也看到创建了一些与性能计数器相关的表。名称是 WADPTMRTable 和 WADPTMRITable。这些表是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:53:54.167

据我所知，这些表是从哪里提取管理门户的性能计数器信息的。此信息是基于可在 WADPerformaceCountersTable 中找到的原始数据的摘要信息。

# google-maps - Google Maps API 演示“Hello World”挂起 Chrome

> ID：13636315
> 
> 赞同：0
> 
> 时间：2012-11-29T22:57:41.680
> 
> 标签：google-maps, google-maps-api-3

Google Maps API 文档页面的简单演示：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple)

挂起 Chrome 版本 23.0.1271.91 m (Windows XP)。没有输出。光标仍然停留在沙漏指针上。该窗口完全没有响应，我无法访问开发人员窗口以查看它可能卡在哪里。

页面和地图在 Firefox (V16.0.2) 和 IE8 中完全加载和呈现，因此这显然不是与密钥相关的问题。

这个问题看起来和这个类似：[为什么我的谷歌地图是“Hello world”？页面显示为空？](https://stackoverflow.com/questions/11228417/why-is-my-google-maps-hello-world-page-displaying-as-empty)，但我已经复制了代码并将“画布”div的宽度从“100%”更改为“500px”这样的固定数字，没有任何改进。无论如何，如果这是问题所在，我会感到惊讶，因为 Map API 和 Chrome 都是 Google 产品！你会认为有人会检查它！

如果有人阅读本文遇到同样的问题，请回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:00:40.963

就在我发布这个之后，我将 Chrome 更新到了 23.0.1271.95 m 版本，你猜怎么着？演示应用程序渲染并显示地图！

因此，如果其他人对 Chrome 有此问题，请查看您是否拥有最新版本，如果没有则升级。:)

# .htaccess - .htaccess 404 重定向，但不是在没有图像的情况下？

> ID：13636319
> 
> 赞同：0
> 
> 时间：2012-11-29T22:57:55.397
> 
> 标签：.htaccess, exception, http-redirect

有一个 404 重定向，工作正常，但我正在 .htaccess 文件中寻找一个解决方案，以便在找不到图像（jpg、gif、png、...）的情况下例外。

这里有人有可能这样做吗？

htaccess 文件中的实际规则：

```
ErrorDocument 404 http://example.com/ 
```

最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T14:51:03.340

我猜如果找不到图像，您希望用户看到带有错误消息的图像，而不是通常显示的默认文本页面。以下是如何做到这一点：

```
RewriteEngine on
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# Add additional file extensions to the list as needed.
RewriteCond %{REQUEST_FILENAME} \.(gif|jpg|jpeg|bmp|tiff)$
RewriteRule (.*) /relative/location/of/errorimage.jpg 
```

如果您还有其他事情要做，请回复评论，我会相应地调整示例。

# c# - 需要 Guru 提供的 WPF 数据绑定帮助

> ID：13636321
> 
> 赞同：1
> 
> 时间：2012-11-29T22:58:00.217
> 
> 标签：c#, wpf, data-binding, refactoring

我有一个 C# 类，它同时包含一个 ObservableCollection 和一个包含 ObservableCollection 对象的数组。对象数组中的值是根据第一个基本集合中的值计算的。BindableBase 只是实现了 INotifyPropertyChanged。

我在下面尽可能地简化了我的实现。

RawDS 拥有一个 RawData 的 ObservableCollection，它还拥有一个由 10 个 CalcDS 对象组成的数组，这些对象是 CalcData 的 ObservableCollections。

所有这一切都很好。我有工作线程来累积传入的数据，计算结果并用计算的数据填充数组。我的问题是将所有这些数据绑定到 WPF 中的单个图表和网格。我已经研究、阅读并尝试了所有我能找到的东西，但似乎无法让数据绑定与 RawData 和 CalcData 对象中的属性一起工作。我相信问题源于我绑定到的对象不是 ObservableCollection 而是其中包含 ObservableCollections 的对象。所以我的问题是两折。

1.  有没有办法做这种数据绑定？我一直在将 DataChart 和 DataGrid 的 DataContext 设置为基础对象 RawDS 并尝试将所有内容与 DataBindings 源和路径属性结合起来。没有欢乐！

2.  如果不是，那么重构以下数据类的好方法是什么？CalcData 类现在有 14 个属性（乘以 10），我能想到的一切最终都变成了一个大的整体类。这将是一场维护噩梦。

提前感谢您的帮助。

```
public class CalcData : BindableBase
{
    private Single _plotValue1;

    public Single PlotValue1
    {
        get { return _plotValue1; }
        set { SetProperty(ref _plotValue1, value); }
    }
}

public class CalcDS : ObservableCollection<CalcData>
{
    public CalcDS()
    {
        var random = new Random();
        for (var i = 0; i < 25; i++)
        {
            var cd = new CalcData
            {
                PlotValue1 = random.Next(10, 50)
            };
            Add(cd);
        }
    }
}

public class RawData : BindableBase
{
    private DateTime _xDateTime;
    private Single _plotValue;

    public DateTime XDateTime
    {
        get { return _xDateTime; }
        set { SetProperty(ref _xDateTime, value); }
    }

    public Single PlotValue
    {
        get { return _plotValue; }
        set { SetProperty(ref _plotValue, value); }
    }
}

public class RawDS : BindableBase
{
    private readonly ObservableCollection<RawData> _rawMDP = new ObservableCollection<RawData>();
    private readonly CalcDS [] _calcDsDataAry = new CalcDS [10];

    // Initialize things and get the worker thread going.
    public RawDS()
    {
        var random = new Random();
        var times = new DateTime(2012, 1, 1);
        for (var i = 0; i < 25; i++)
        {
            var time = new TimeSpan(0, random.Next(0, 5), 0);
            times = times.Add(time);
            var rd = new RawData
            {
                XDateTime = times,
                PlotValue = random.Next(10, 50)
            };
            _rawMDP.Add(rd);
        }

        // Create 10 CalcDS objests numbered 0 to 9
        for (var cnt = 0; cnt < 10; cnt++)
            _calcDsDataAry[cnt] = new CalcDS();
    }

    public ObservableCollection<RawData> RawMDP
    { get { return _rawMDP; } }

    public CalcDS CalcDsData01
    { get { return _calcDsDataAry[0]; } }

    public CalcDS CalcDsData02
    { get { return _calcDsDataAry[1]; } }

    public CalcDS CalcDsData03
    { get { return _calcDsDataAry[2]; } }

    public CalcDS CalcDsData04
    { get { return _calcDsDataAry[3]; } }

    public CalcDS CalcDsData05
    { get { return _calcDsDataAry[4]; } }

    public CalcDS CalcDsData06
    { get { return _calcDsDataAry[5]; } }

    public CalcDS CalcDsData07
    { get { return _calcDsDataAry[6]; } }

    public CalcDS CalcDsData08
    { get { return _calcDsDataAry[7]; } }

    public CalcDS CalcDsData09
    { get { return _calcDsDataAry[8]; } }

    public CalcDS CalcDsData10
    { get { return _calcDsDataAry[9]; } }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:02:28.073

我相信可能的工作是将您的数组包装在一个自定义容器中，该容器实现`INotifyCollectionChanged`然后订阅每个项目的`PropertyChanged`事件（当添加到集合时，并在删除/处置时取消订阅）并引发`CollectionChanged`事件。

如果没有其他人很好地尝试解决方案，我可能有时间看看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T02:05:29.497

问题是数组没有实现 INotifyPropertyChanged，因此 UI 不知道数据正在发生变化。Steve Py 有一个包装它的好主意。

如果您可以将其从数组更改为 ObservableCollection 将使事情变得更容易。

# mysql - 具有不同字段终止符的命令行 MySQL 选择

> ID：13636325
> 
> 赞同：1
> 
> 时间：2012-11-29T22:58:14.087
> 
> 标签：mysql, bash, command-line, termination, metacharacters

我有一个`bash`运行 MySQL 语句的脚本：

```
#!/usr/bin/env bash

mysql -N --user=foo --password=bar --host=baz -A -D db -e '\
    SELECT ... \
    FROM fieldA, fieldB \
    LIMIT 100' 
```

这工作正常。但是，我希望得到一个制表符分隔的结果，而不是返回的表格格式。

我尝试了以下方法，但它给出了语法错误：

```
#!/usr/bin/env bash

mysql -N --user=foo --password=bar --host=baz -A -D db -e '\
    SELECT ... \
    FROM fieldA, fieldB \
    LIMIT 100 \
    FIELDS TERMINATED BY "\t"' 
```

错误是：

> `ERROR 1064 (42000) at line 3: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'FIELDS TERMINATED BY "\t"' at line 10`

我也试过

```
 ...
    FIELDS TERMINATED BY \'\t\'' 
```

但我得到同样的错误。

有没有一种正确的方法可以从这种 MySQL 运行中更改字段终止符？谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:04:58.907

根据 mysql 客户端的手册页：

> 交互使用时，查询结果以 ASCII 表格式显示。当以非交互方式使用时（例如，作为过滤器），结果以制表符分隔的格式显示。

您的用途`-e`是让 mysql 将其视为交互式命令。但客户端也可以通过标准输入接受输入。这就是你想要的：

```
mysql -N --user=foo --password=bar --host=baz -A db <<-'EOF'
    SELECT ...
    FROM fieldA, fieldB
    LIMIT 100
EOF 
```

# php - 从目录中随机选择两个（唯一）图像

> ID：13636329
> 
> 赞同：2
> 
> 时间：2012-11-29T22:58:32.757
> 
> 标签：php, random, unique

我有这个运行良好的代码：

```
function random_pic($dir = 'img')
{
    $files = glob($dir . '/*.png');
    $file = array_rand($files);             
} 
```

它从目录中抓取随机图像。我以后有这个：

```
<img src="<?php echo random_pic(); ?>"/>
<img src="<?php echo random_pic(); ?>"/> 
```

有什么办法可以做到，所以它们都不会显示相同的图片？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:09:38.763

试试这个：

```
$indexes=array_rand($files,2);
$file1=$files[$indexes[0]];
$file2=$files[$indexes[1]]; 
```

array_rand 可以检索多个键，只需指定 2 作为第二个参数。在这种情况下，它返回 am 数组。

```
function random_pics($dir = 'img',$howMany=2) {
    $files = glob($dir . '/*.png');
    if($howMany==0) $howMany=count($files); // make 0 mean all files
    $indexes = array_rand($files,$howMany);
    $out=array();
    if(!is_array($indexes)) $indexes=array($indexes); // cover howMany==1
    foreach($indexes as $index) {
        $out[]=$files[$index];
    }
    return $out;
}

$theFiles=random_pics();

<?php echo $theFiles[0]; ?>
<?php echo $theFiles[1]; ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T23:00:34.460

你还记得最后一个吗。然后检查它是否被使用？如果是的话，买一个新的。

```
$one = random_pic();
$two = random_pic();
while($one == $two){
$two = random_pic();
} 
```

并在标记中。

```
<img src="<?php echo $one; ?>"/>
<img src="<?php echo $two; ?>"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:03:16.470

我认为您将按顺序调用 random_pic 函数，因此您可以返回所选图片并将其作为参数提供给您第二次调用该函数。然后以这种方式更改功能，即不选择转发的图片。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T23:08:40.607

```
function random_pic($dir_only_imgs, $num) {

    shuffle($dir_only_imgs);
    $imgs = array();
    for ($i = 0; $i < $num; $i++) {
        $imgs[] = $dir[$i];
    }
    return $num == 1 ? $imgs[0] : $imgs;
}

$dir = "img"
$dir_only_imgs = glob($dir . '/*.png');

print_r(random_pic($dir_only_imgs, 2)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-17T13:32:56.880

最简单的方法如下所示：

```
<img src="https://www.example.com/images/image-<?php echo rand(1,7); ?>.jpg"> 
```

为了让它工作，你需要为你的图像命名：image-1.jpg，image-2.jpg，image-3.jpg，，，image-7.jpg，

当页面加载时，PHP rand() 将回显一个随机数（在这种情况下，一个介于 1 和 7 之间的数字），完成 URL 并因此显示相应的图像。来源：[https ://jonbellah.com/load-random-images-with-php/](https://jonbellah.com/load-random-images-with-php/)

# ios - ios - 新项目在推送通知上出现错误，它们只能由 UINavigationController 管理

> ID：13636330
> 
> 赞同：1
> 
> 时间：2012-11-29T22:58:38.457
> 
> 标签：ios, uinavigationcontroller

这是我用 ios 做的第二个项目，我不记得第一次出现这个错误。我想知道我是否没有正确设置一些设置。

在推送通知中，我遇到了这个崩溃：

```
Push segues can only be used when the source controller is managed by an instance of UINavigationController. 
```

知道如何解决吗？是否有一些设置需要打开？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:17:51.203

好吧，假设您从单个视图项目开始，只需选择该视图控制器，进入编辑器菜单，然后选择“嵌入”，然后选择导航控制器。

# magento - 将时事通讯从产品页面移动到主页？

> ID：13636331
> 
> 赞同：0
> 
> 时间：2012-11-29T22:58:49.840
> 
> 标签：magento

我用示例数据安装了 magento。例如，如果我单击“家具”，则时事通讯会显示在左栏底部的标签下方。在主页上，有标签，但没有时事通讯。

我如何将时事通讯也放在那里？

我尝试只是在那里粘贴 php 代码，但它只是显示了表单，但表单不起作用。

我猜我应该以某种方式编辑 xml，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:55:49.353

我正在使用单列布局，并且能够通过以下方式调用它：

```
{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}} 
```

我不知道你使用的是什么版本，但这对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T05:41:34.740

您好，我认为示例 magento 主页由管理员处理

goto->admin->cms->pages->Home page->content（左侧）->在标签块后添加下面的代码

{{block type="tag/popular" template="tag/popular.phtml"}}

{{block type="newsletter/subscribe" template="newsletter/subscribe.phtml"}}

# oracle - 视图上的授权选择不起作用

> ID：13636332
> 
> 赞同：2
> 
> 时间：2012-11-29T22:59:03.857
> 
> 标签：oracle

我的 oracle 数据库有一个用户（可以说是 SWEET）。在 SWEET 模式中，我有一个名为 AUTO_PARTS 的表。

现在，我创建了一个新用户 (SWEET_CV) 并在 SWEET 的 AUTO_PARTS 表上创建了一个视图。

```
CREATE SCHEMA AUTHORIZATION SWEET_CV
   CREATE VIEW SWEET_CV.new_autoparts_view 
      AS SELECT * FROM SWIFT.AUTO_PARTS WHERE PRODUCTNAME = 'ABC'
   GRANT select ON SWEET_CV.new_autoparts_view TO SWEET; 
```

最后一个 Grant 语句给出了错误 ORA-01720：“SWEET.AUTO_PARTS”的授权选项不存在。所以我做了以下。

```
From SWEET account:
GRANT SELECT ON AUTO_PARTS TO SWEET_CV *WITH GRANT OPTION*
And then From SWEET_CV account:
GRANT SELECT ON SWEET_CV.new_autoparts_view TO SWEET; 
```

两次赠款都成功了，我承诺了。

现在，当我登录 SWEET 并查询“select * from SWEET_CV.new_autoparts_view”时，将返回行。但是当我查询'select * from new_autoparts_view'时，它说表或视图不存在。你能解释一下为什么即使在我做了 GRANT 之后它也说不存在。

我想在我的 SWEET 中访问新模式的视图，而不必将其称为 newschema(dot)viewname

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:03:29.437

> *我想在我的 SWEET 中访问新架构的视图，而不必将其称为*

`SWEET`您需要在引用视图的架构中创建同义词：

```
create synonym sweet.new_autoparts_view for sweet_cv.new_autoparts_view; 
```

# php - 使用身份验证保护 CodeIgniter 2 应用程序的正确方法是什么？

> ID：13636336
> 
> 赞同：4
> 
> 时间：2012-11-29T22:59:20.940
> 
> 标签：php, codeigniter, authentication, codeigniter-2, ion-auth

我已正确安装[**Ion Auth**](http://benedmunds.com/ion_auth/)并在我的服务器上运行。我还有默认的**CodeIgniter 2** “新闻”教程在同一个 CI 安装中工作。我只是在玩弄并好奇使用身份验证系统“封闭”或保护整个应用程序的正确方法。

对于这个问题，让我们使用 CI 附带的“新闻”教程。

在我的控制器的`index()`函数中`news.php`，我添加了条件代码来检查用户是否已登录。如果没有，用户将被带到登录屏幕。

```
public function index() {
    $data['news'] = $this->news_model->get_news();
    $data['title'] = 'News archive';
    if ($this->ion_auth->logged_in()) {
        $this->load->view('templates/header', $data);
        $this->load->view('news/index', $data);
        $this->load->view('templates/footer');
    } else {
        redirect('auth/login', 'refresh');
    }
} 
```

我可以看到这是可行的，但直接的缺点是控制器中的每个函数也必须使用类似的条件逻辑进行修改，以保护所有其他页面视图。例如 - 检查登录，显示页面，否则转到登录页面......一遍又一遍。

这是它应该做的方式吗？

如果一个应用程序已经构建并且正在运行，并且只是想保护它，该怎么办？添加条件逻辑来检查控制器中每个页面视图的登录状态似乎不必要地冗长。

是否可以在一个地方保护整个应用程序（所有视图）以最大限度地减少代码修改？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T02:23:19.500

为了保护整个控制器，您可以将身份验证检查放入`__construct()`调用中，如 eric.itzhak 所述。

为了保护整个应用程序，您可以扩展 CI_Controller 类，将身份验证放在该文件的构造函数中，然后最后在每个控制器中通过 MY_Controller 而不是 CI_Controller 进行扩展。

代码示例：

```
/* File: application/core/MY_Controller.php */
class MY_Controller extends CI_Controller
{
    function __construct()
    {
        parent::__construct();

        if ( ! $this->ion_auth->logged_in())
        {
            redirect('auth/login');
        }
    }
} 
```

然后，在每个控制器中（注意 MY_Controller，而不是 CI_Controller）：

```
class Controller_name extends MY_Controller
{
    function __construct()
    {
        parent::__construct();
    }

    // rest of controller methods
} 
```

这些代码示例假设您正在自动加载（您也可以） ion auth 库。`MY_Controller`如果没有，请根据需要在文件中加载库。

这种方法有两个优点：

1.  您只需在要保护的每个控制器中将 CI_Controller 更改为 MY_Controller。
2.  如果您需要一个未受保护的控制器，即包含身份验证方法的控制器，您不必保护*所有*有用的东西（如果您的身份验证控制器要求您登录，您将无法登录：P -会有一个重定向循环）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T01:52:58.790

构造函数是要走的路。需要考虑的其他事情 - 如果您调用自己的方法而不是直接调用 Ion Auth，它将更加灵活。通常，登录过程的一部分是获取视图中显示的唯一值，或者用于跟踪会话等的 id。例如：在页面上显示用户名。

因此，将 ion auth 登录检查推送到模型，添加获取用户信息的方法或您需要的任何内容。如果每个方法不起作用，则返回 false。然后在你的构造函数中检查它是否被返回

```
function __construct() {
    parent::__construct();
 // load the model
 $this->load->model( 'customer_model' );

 // if logged in, return $this->customer, available to all methods in class
 if(! $this->customer = $this->customer_model->verifyLogin() ) 
 { redirect('auth/login', 'refresh'); }
 } 

 public function index()
 {
   // pass customer to data 
  $data['customer'] = $this->customer ;

 // $customer->name will now be available in view

 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T23:09:27.047

我认为正确的逻辑是检查`__construct`方法内的用户状态，因为每次使用控制器时都会执行此操作。它**不会**保护整个 ci 应用程序，只是这个控制器中的方法，但我认为这对你的情况有用。

尝试这个 ：

```
 public function __construct()
   {

        if (!$this->ion_auth->logged_in()) 
             redirect('auth/login', 'refresh');
   } 
```

# .net - C#/.net 4.5 中的 PDF 创建应用程序？

> ID：13636344
> 
> 赞同：0
> 
> 时间：2012-11-29T23:00:01.033
> 
> 标签：.net, c#-4.0

如何使用 .net（4.5 版）编写 pdf 文件创建应用程序是否有任何 API 可从 Adob​​e 或任何其他第三方软件获得是最好的。谢谢你，史密斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:16:23.447

.net 的最佳免费 PDF 库是 PDFsharp：[http ://www.pdfsharp.com/PDFsharp/](http://www.pdfsharp.com/PDFsharp/)

# c - 在 MEX 编译中跳过代码部分

> ID：13636345
> 
> 赞同：1
> 
> 时间：2012-11-29T23:00:05.463
> 
> 标签：c, matlab, mex

我有一个为控制台应用程序和 MATLAB MEX 文件编译的 C 文件。我希望在为 MEX 编译时排除部分代码。`definition`在 MEX 编译期间是否可以检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:10:04.180

Mex 文件需要`MATLAB_MEX_FILE`定义预处理器符号。

# java - Google AppEngine GAE 排名树实现交易问题

> ID：13636348
> 
> 赞同：1
> 
> 时间：2012-11-29T23:00:20.293
> 
> 标签：java, google-app-engine, transactions, google-cloud-datastore

我正在尝试实现基于 Range 对象树结构的玩家排名，并在树的最低级别附加了 Rating 对象。我知道那里有一个 Java 实现（从 Python 移植），但它使用低级数据存储 API，我想使用 JPA 来实现。这是描述结构的代码片段：

```
@Entity
public class Range
{
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Key key;
  @ManyToOne(optional = false)
  private Range parent;
  // leaf node?
  private boolean leaf;
  // total number of rating objects in the node's subtree
  private long count;
  // child nodes
  @OneToMany(mappedBy = "parent", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
  private Set<Range> children;
  // range [max, min]
  private long max;
  private long min;

  @Version
  private int version;
}

@Entity
public class Rating
{
  @Id
  @GeneratedValue(strategy = GenerationType.IDENTITY)
  private Key key;
  // parent range
  private Key range;
  @ManyToOne(optional = false)
  private Player player;
  // rating value
  private long value;

  @Version
  private int version;
}

@Entity
public class Player
{
  @Id
  @GeneratedValue(strategy= GenerationType.IDENTITY)
  private Key key;
  // list of associated ratings for different game configurations (one per config)
  @OneToMany(mappedBy = "profile", cascade = CascadeType.ALL, fetch = FetchType.LAZY)
  private Collection<Rating> ratings = new LinkedList<Rating>();

  @Version
  private int version;
} 
```

然后是一个代表树本身的类（Tree），它保存着根 Range 对象（此处未显示）。如您所见， Range 类的对象实际上是树的核心，它们之间具有一对多的关系。Player 与 Rating 对象具有一对多的关系（假设游戏类型很少）。这是一个可以解决的直接问题：Range 和 Rating 对象之间有一对多的关系会很好，但 GAE 不支持多重父级。因此，Ranges 通过在 rating 对象中保存 parent range 键与 Ratings 具有手动管理的关系。出于同样的原因，Tree 无法管理与 Range 的一对一关系。它还使用存储在树对象中的根节点键手动处理。真正的问题发生在将第一个 Rating 插入树时，

```
EntityTransaction tx = em.getTransaction();

// start transaction
tx.begin();

// create the tree
Tree tree = new Tree();
em.persist(tree);
// and its root range
Range root = new Range();
em.persist(root);
// we need range key to attach it to the tree
em.flush();
// attach root range to the tree
tree.setRoot(root);
// save the tree
em.persist(tree);
em.flush();

// ...
// we have parent range (tree root), player and score
Rating rating = new Rating(); 
// one-to-many relationship: Player--<>Rating
player.getRatings().add(rating);
rating.setPlayer(player);
// attach to the parent range
rating.setParent(range);
rating.setValue(score);
// use entity manager to persist the new rating
em.persist(rating);

tx.commit();  <------------ here it fails 
```

以下是缩短的异常转储：

```
javax.persistence.RollbackException: Transaction failed to commit
  at org.datanucleus.jpa.EntityTransactionImpl.commit(EntityTransactionImpl.java:118)
  at org.datanucleus.store.appengine.jpa.DatastoreEntityTransactionImpl.commit(DatastoreEntityTransactionImpl.java:58)
  ...
Caused by: javax.persistence.OptimisticLockException: Some instances failed to flush successfully due to optimistic verification problems.
  at org.datanucleus.jpa.NucleusJPAHelper.getJPAExceptionForNucleusException(NucleusJPAHelper.java:271)
  at org.datanucleus.jpa.EntityTransactionImpl.commit(EntityTransactionImpl.java:116)
  ... 39 more
Caused by: org.datanucleus.exceptions.NucleusOptimisticException: Optimistic concurrency exception updating ferp.center.server.entity.Range with pk Range(10).  The underlying entity had already been deleted.
  at org.datanucleus.store.appengine.DatastorePersistenceHandler.newNucleusOptimisticException(DatastorePersistenceHandler.java:391)
  at org.datanucleus.store.appengine.DatastorePersistenceHandler.handleVersioningBeforeWrite(DatastorePersistenceHandler.java:412)
  at org.datanucleus.store.appengine.DatastorePersistenceHandler.updateObject(DatastorePersistenceHandler.java:574)
  at org.datanucleus.state.JDOStateManagerImpl.flush(JDOStateManagerImpl.java:4576)
  at org.datanucleus.ObjectManagerImpl.flushInternal(ObjectManagerImpl.java:2814)
  at org.datanucleus.ObjectManagerImpl.flush(ObjectManagerImpl.java:2754)
  at org.datanucleus.ObjectManagerImpl.preCommit(ObjectManagerImpl.java:2893)
  at org.datanucleus.TransactionImpl.internalPreCommit(TransactionImpl.java:369)
  at org.datanucleus.TransactionImpl.commit(TransactionImpl.java:256)
  at org.datanucleus.jpa.EntityTransactionImpl.commit(EntityTransactionImpl.java:104)
  ... 39 more 
```

我究竟做错了什么？

# mysql - 一个 php 脚本，2 个查询，但第二个不起作用

> ID：13636352
> 
> 赞同：0
> 
> 时间：2012-11-29T23:00:29.287
> 
> 标签：mysql, mysqli

这真让我抓狂！！我正在使用 php 将 table1 中的记录插入到 table3 中。然后还将 table2 插入 table3。

但是，第二个插入不起作用。这是简单的版本：

```
if ($result = $mysqli->query("TRUNCATE TABLE table3")) {
   echo "TRUNCATE table3 ".$result;
}
if ($result = $mysqli->query("INSERT INTO table3 SELECT * FROM table1")) {
   echo "table1 inserted ".$result;
}
if ($result = $mysqli->query("INSERT INTO table3 SELECT * FROM table2")) {
   echo "table2 inserted ".$result;
} 
```

上面的代码中没有错误等，不显示“插入的table2”。

所以我这样做了：

```
$mysqli->query("TRUNCATE TABLE table3");
$mysqli->query("INSERT INTO table3 SELECT * FROM table1");
$mysqli->query("INSERT INTO table3 SELECT * FROM table2"); 
```

再次没有错误，但 table2 没有插入。

我用过：

```
printf("%s\n", $mysqli->info);
$mysqli->ping(); 
```

一切都很好，但我无法执行第二次插入。为什么它不起作用是没有意义的。

感谢您的帮助，时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:12:59.327

检查[mysqli_error](http://php.net/manual/en/mysqli.error.php)以检索有关查询失败的信息。

# rally - 如何在 RallyApps SDK2 中展开 Rally.ui.tree.Tree 的所有项目？

> ID：13636355
> 
> 赞同：1
> 
> 时间：2012-11-29T23:00:39.217
> 
> 标签：rally

我正在使用 Tree 小部件使 TestPlan 中的所有内容更易于访问。我希望在树中加载和扩展所有子文件夹和测试用例。这是一个缓慢的初始加载，但可以轻松找到您正在寻找的需求并在我们的文件夹层次结构的上下文中查看它（我们在 33 个文件夹中有 3000 个测试用例）。

如何递归展开所有文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:53:58.960

如果您将树项目配置为默认展开，则它应该自动展开。 [http://developer.rallydev.com/apps/2.0p5/doc/#!/api/Rally.ui.tree.TreeItem-cfg-expanded](http://developer.rallydev.com/apps/2.0p5/doc/#!/api/Rally.ui.tree.TreeItem-cfg-expanded)

```
Ext.create('Ext.Container', {
     items: [{
         xtype: 'rallytree',
         treeItemConfigForRecordFn: function(record){
             return {
                 xtype: 'rallytreeitem',
                 expanded: true
             };
         }
     }],
     renderTo: Ext.getBody().dom
 }); 
```

# mysql - 为什么更改行格式时我的表格大小没有减小？

> ID：13636358
> 
> 赞同：2
> 
> 时间：2012-11-29T23:00:45.690
> 
> 标签：mysql, innodb

我们目前正在将 MySQL 与 innodb 一起使用，并且我们有一些行格式紧凑的大型表。当我将行格式更改为压缩时，我们仍然看到表的大小相同。有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T23:17:39.470

是否可以为表声明 ROW_FORMAT=COMPRESSED，但没有启用配置值 innodb_file_format=BARRACUDA？

如果您不执行后一步，则任何对梭子鱼行格式的请求都不会生效。这样的请求会产生警告：

```
mysql> alter table foo row_format=compressed;
Query OK, 0 rows affected, 2 warnings (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 2

mysql> show warnings;
+---------+------+-----------------------------------------------------------------------+
| Level   | Code | Message                                                               |
+---------+------+-----------------------------------------------------------------------+
| Warning | 1478 | InnoDB: ROW_FORMAT=COMPRESSED requires innodb_file_format > Antelope. |
| Warning | 1478 | InnoDB: assuming ROW_FORMAT=COMPACT.                                  |
+---------+------+-----------------------------------------------------------------------+ 
```

此外，除非您还启用了`innodb_file_per_table`.

```
mysql> alter table foo row_format=compressed;
Query OK, 0 rows affected, 2 warnings (0.03 sec)
Records: 0  Duplicates: 0  Warnings: 2

mysql> show warnings;
+---------+------+---------------------------------------------------------------+
| Level   | Code | Message                                                       |
+---------+------+---------------------------------------------------------------+
| Warning | 1478 | InnoDB: ROW_FORMAT=COMPRESSED requires innodb_file_per_table. |
| Warning | 1478 | InnoDB: assuming ROW_FORMAT=COMPACT.                          |
+---------+------+---------------------------------------------------------------+ 
```

# java - UseConcMarkSweepGC 详细 gc 输出显示内存下降

> ID：13636373
> 
> 赞同：1
> 
> 时间：2012-11-29T23:02:33.370
> 
> 标签：java, garbage-collection

我有一个启用 GC 日志记录的应用程序。堆似乎在增长，然后突然下降，但没有记录 Full GC。如果有一些我可以启用的启动参数会告诉我什么 GC 事件正在减少堆大小？

**我的环境：** Linux 64-Bit，java 1.6.0_31，Java HotSpot(TM) 64-Bit Server VM（build 20.6-b01，混合模式）

**虚拟机参数：** -server -Xms2560m -Xmx2560m -XX:+UseConcMarkSweepGC -XX:MaxPermSize=256m -XX:-PrintGC -XX:-PrintGCDetails -XX:-PrintGCTimeStamps -Xloggc:/xxxxx/gc.log -Dsun.rmi.dgc .client.gcInterval=86400000 -Dsun.rmi.dgc.server.gcInterval=86400000

```
3057.609: [GC 2397254K->2385777K(2619328K), 0.0572310 secs]
3058.898: [GC 2402801K->2391301K(2619328K), 0.0566620 secs]
3059.940: [GC 2408325K->2397156K(2619328K), 0.0534080 secs]
3059.995: [GC 2397265K(2619328K), 0.0069950 secs]
3065.635: [GC 2414180K->2404934K(2619328K), 0.0732700 secs]
3065.849: [GC 2419994K(2619328K), 0.1150630 secs]
3070.248: [GC 1593931K->1591825K(2619328K), 0.1084230 secs]
3072.440: [GC 1608552K->1606431K(2619328K), 0.0533140 secs]
3087.759: [GC 1623455K->1614544K(2619328K), 0.0215850 secs] 
```

什么事件导致堆在 3065.849 和 3070.248 的输出之间收缩？是否有可以记录它的 VM 参数？我尝试添加 -verbose:gc 但这不会改变输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:04:28.017

GC 分两步进行

1）次要收集（主要清理年轻一代）

2) 主要收藏

我猜你看到的是次要收藏。本[教程](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)可以帮助您理解这些术语。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T07:16:36.033

马克的评论有正确的答案，我没有正确启用详细信息。现在我看到了这个事件：

```
5505.399: [GC 5505.399: [DefNew: 17273K->1942K(19136K), 0.0172730 secs] 2408937K->2393606K(2619328K), 0.0175180 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]
5524.922: [GC 5524.922: [DefNew: 18948K->2111K(19136K), 0.0268990 secs] 2410612K->2395349K(2619328K), 0.0271850 secs] [Times: user=0.02 sys=0.01, real=0.03 secs]
5524.950: [GC [1 CMS-initial-mark: 2393237K(2600192K)] 2395413K(2619328K), 0.0088880 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]
5524.959: [CMS-concurrent-mark-start]
5527.608: [CMS-concurrent-mark: 2.645/2.650 secs] [Times: user=2.62 sys=0.00, real=2.65 secs]
5527.609: [CMS-concurrent-preclean-start]
5527.624: [CMS-concurrent-preclean: 0.015/0.015 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]
5527.625: [GC[YG occupancy: 3557 K (19136 K)]5527.625: [Rescan (non-parallel) 5527.625: [grey object rescan, 0.0065690 secs]5527.632: [root rescan, 0.0088130 secs], 0.0154260 secs]5527.641: [weak refs processing, 0.1026480 secs] [1 CMS-remark: 2393237K(2600192K)] 2396795K(2619328K), 0.1252390 secs] [Times: user=0.13 sys=0.00, real=0.13 secs]
5527.954: [CMS-concurrent-sweep-start]
5531.258: [CMS-concurrent-sweep: 3.304/3.304 secs] [Times: user=3.15 sys=0.02, real=3.30 secs]
5531.258: [CMS-concurrent-reset-start]
5531.264: [CMS-concurrent-reset: 0.006/0.006 secs] [Times: user=0.01 sys=0.00, real=0.01 secs]  
5551.660: [GC 5551.660: [DefNew: 19135K->1234K(19136K), 0.0691830 secs] 1373830K->1357833K(2619328K), 0.0694780 secs] [Times: user=0.07 sys=0.00, real=0.07 secs]
5584.991: [GC 5584.991: [DefNew: 18257K->2111K(19136K), 0.0264920 secs] 1374857K->1360277K(2619328K), 0.0267850 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
5589.794: [GC 5589.794: [DefNew: 19135K->286K(19136K), 0.0189210 secs] 1377301K->1359264K(2619328K), 0.0191450 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
5632.424: [GC 5632.424: [DefNew: 17310K->2111K(19136K), 0.0182480 secs] 1376288K->1361326K(2619328K), 0.0185900 secs] [Times: user=0.02 sys=0.00, real=0.02 secs]
5645.086: [GC 5645.087: [DefNew: 19135K->2112K(19136K), 0.0276910 secs] 1378350K->1363056K(2619328K), 0.0279740 secs] [Times: user=0.03 sys=0.00, real=0.03 secs] 
```

谢谢。

# java - 使用 maven replacer 插件列出文件夹中的文件

> ID：13636378
> 
> 赞同：5
> 
> 时间：2012-11-29T23:03:01.133
> 
> 标签：java, maven, plugins, pom.xml

我想使用 maven-replacer-plugin 将文件中的 $file-list$ 替换为项目文件夹中以逗号分隔的文件列表。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-05T18:27:46.227

这是我所做的：

使用 antrun 插件创建一个包含列表的临时文件：

```
<plugin>
    <artifactId>maven-antrun-plugin</artifactId>
    <version>1.7</version>
    <executions>
        <execution>
            <phase>generate-sources</phase>
            <configuration>
                <target>
                    <fileset id="my-fileset" dir="src/main/resources" />
                    <pathconvert targetos="unix" pathsep=","
                        property="my-file-list" refid="my-fileset">
                        <map from="${basedir}\src\main\resources\" to="" />
                    </pathconvert>
                    <echo file="${basedir}\target\file-list.txt">${my-file-list}</echo>
                </target>
            </configuration>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

然后使用替换插件替换我想要的文件中的列表：

```
<plugin>
    <groupId>com.google.code.maven-replacer-plugin</groupId>
    <artifactId>maven-replacer-plugin</artifactId>
    <executions>
        <execution>
            <id>replace-file-list</id>
            <phase>prepare-package</phase>
            <goals>
                <goal>replace</goal>
            </goals>
            <configuration>
                <ignoreMissingFile>false</ignoreMissingFile>
                <file>target/MY_FILE.TXT</file>
                <regex>false</regex>
                <token>$file-list$</token>
                <valueFile>target/file-list.txt</valueFile>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我相信一定有更好的方法，但希望这对某人有所帮助。

# c# - 使用反射从静态类调用静态函数

> ID：13636382
> 
> 赞同：1
> 
> 时间：2012-11-29T23:03:12.520
> 
> 标签：c#, .net, reflection

给定静态类：

```
public static class Converters
{
    public static Func<Int64, string> Gold = c => String.Format("{0}g {1}s {2}c", c/10000, c/100%100, c%100);
} 
```

我`Func`从数据库中接收名称作为字符串 ( `regEx.Converter`)。如何`Func`使用反射调用 Gold？这是我到目前为止所拥有的：

```
var converter = typeof(Converters).GetMember(regEx.Converter);
if (converter.Count() != 1)
{
    //throw new ConverterNotFoundException;
}                    
matchedValue = converter.Invoke(null, new object[]{matchedValue}) as string; 
```

**编辑：**

我应该提到我计划在我的`Converters`类中添加其他可能采用不同参数的 Funcs。

**Edit2：** 从到目前为止的回复来看，我认为它适用于`Func`下面的 Gold。我想我现在的问题是，当我不知道`Func`. 例如，我可能想像这样创建另一个转换器：`Func<string, string>`. 我唯一可以确定的是，只有一个参数（不同类型），并且返回总是字符串。

```
var converter = typeof(Converters).GetField("w", BindingFlags.Static | BindingFlags.Public);
if (converter == null)
{
    //throw new ConverterNotFoundException;
}
var f = converter.GetValue(null) as Func<Int64, string>;
matchedValue = f.Invoke(Convert.ToInt64(matchedValue)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:10:35.717

您需要指定 BindingFlags 来获取静态成员：

```
var converter = typeof(Converters).GetMember(regEx.Converter,
    BindingFlags.Static | BindingFlags.Public); 
```

您还可以通过使用`GetField`if 它永远不会是一个属性来简化它：

```
FieldInfo converter = typeof(Converters).GetField(regEx.Converter,
    BindingFlags.Static | BindingFlags.Public); 
```

编辑：
我不确定它会有多大帮助，因为你仍然需要知道传递什么样的参数`Func<>`，但这会让你调用`Func<>`而不强制转换它：

```
var matchedValue = converter.GetValue(null);
matchedValue.GetType().GetMethod("Invoke")
    .Invoke(matchedValue, new object[] { Convert.ToInt64(0) }); 
```

并获取参数的类型：

```
matchedValue.GetType().GetGenericArguments()[0]; 
```

您应该考虑在字段名称上更容易`switch`并完全避免反射的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:07:29.183

由于它不是函数或属性，因此您不能这样调用成员。您应该首先获取它的值，根据需要对其进行转换，然后才调用结果，如下所示：

```
var converter = typeof(Converters).GetField(regEx.Converter);
var f = converter.GetValue(null) as Func<long,string>;
var matchedValueString = f(matchedValueInt); 
```

# asp.net-mvc - 如何使用 .ps1 t4scaffolding 模板将项目添加到当前解决方案？

> ID：13636389
> 
> 赞同：1
> 
> 时间：2012-11-29T23:03:28.670
> 
> 标签：asp.net-mvc, powershell, t4, scaffolding, asp.net-mvc-scaffolding

环境：Visual Studio 2012，MvcScaffolding

我是 MvcScaffolding 和 Powershell 的新手，但我想要完成的是在当前项目的解决方案中添加一个新项目。所以基本上用户有 1 个解决方案，并且该解决方案中的 1 个项目运行一个脚手架命令，并在该解决方案中生成一些其他项目。我不想向当前项目添加项目，因此 Add-ProjectItemViaTemplate 在那里没有帮助。这是在这里使用的正确技术吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T22:50:55.627

我确实想通了，但我不相信这是我想走的路。我选择了一个自定义的多项目模板来处理我的项目创建，然后使用 mvcscaffolding 来生成类。

这段代码确实可以在当前解决方案中生成一个创建的类库项目，而且我真的很难挖掘，所以我把它贴在这里

```
[T4Scaffolding.Scaffolder(Description = "Enter a description here")]                      [CmdletBinding()]
 param(        
[string]$Project,
[string]$CodeLanguage,
[string[]]$TemplateFolders,
[switch]$Force = $false
)
$slnName = [System.IO.Path]::GetFilename($dte.DTE.Solution.FullName)
$path = $dte.DTE.Solution.FullName.Replace($slnName,'').Replace('\\','\')
$sln = Get-Interface $dte.Solution ([EnvDTE80.Solution2]) 
$templatePath = $sln.GetProjectTemplate("ClassLibrary.zip","CSharp")
$sln.AddFromTemplate($templatePath, $path+'TestingLibGen','TestingLibGen') 
```

# elasticsearch - 使用 ngram 过滤器搜索不返回我想要的匹配项

> ID：13636396
> 
> 赞同：0
> 
> 时间：2012-11-29T23:03:56.620
> 
> 标签：elasticsearch, tire

我的弹性搜索设置是这样的

```
 :analyzer => {
            :default => {
              :type => "custom",
              :tokenizer => "whitespace",
              :filter => ["lowercase", "standard", "my_ngram"]
            }
          } 
```

其中 my_gram 是这样指定的

```
 :my_ngram => {
              :type => "nGram",
              :min_gram => 1,
              :max_gram => 20
            } 
```

问题是，当我搜索“cre”之类的内容时，我得到“crib”作为结果以及“crew”和“remember”......这看起来就像它在're'和'cr'上的匹配......如果有匹配项，我希望它与单词中的“cre”完全匹配。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:27:54.593

找到了答案......只需`:default_operator => AND`在`query_string`选项中指定。所以像这样（使用轮胎宝石，因为我很懒）

```
 Post.search do
      query { string your_query_string_here, :default_operator => "AND" }
    end 
```

# c - C中的无符号到有符号转换

> ID：13636397
> 
> 赞同：4
> 
> 时间：2012-11-29T23:04:01.523
> 
> 标签：c, c99

以下是否保证工作或实施定义？

```
unsigned int a = 4294967294;
signed int b = a; 
```

的值`b`在`-2`gcc 上。

> 从 C99 (§6.3.1.3/3) 开始，否则，新类型是有符号的，值不能在其中表示；结果是实现定义的，或者引发了实现定义的信号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T23:09:05.100

`a`值到的转换`signed int`是实现定义的（正如您因为 6.3.1.3p3 而正确提到的）。例如，在某些系统上它可以是`INT_MAX`（饱和转换）。

对于`gcc`实现行为在这里定义：

> *当值无法在该类型的对象中表示时，将整数转换为有符号整数类型的结果或引发的信号（C90 6.2.1.2，C99 6.3.1.3）。*
> 
> 为了转换为宽度为 N 的类型，该值以 2^N 为模减少到该类型的范围内；没有发出信号。

[http://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html](http://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-03-27T02:20:58.320

@ouah 的答案告诉您它的实现定义，但没有解释您的实现如何具体产生 (-2)。我会这样回答：

1）您的实现似乎具有 32 位宽的 int 类型和 2 的补码表示。

2) 4294967294 是 (UINT_MAX - 1) = 0xffffffffe。

在您的实现中， (UINT_MAX - 1) 被转换为有符号整数，如下所示：

0xffffffffe 被转换为 ~(0xffffffffe) + 1 = (二进制中的 1) + 二进制中的 1 = 10 = 十进制中的 2。

请注意，在此转换之前最高有效位为 1（在 0xffffffffe 中），因此在上述转换之后，最终数字被解释为负数。因此，您得到 (-2) 作为转换后的最终答案。

希望这有帮助。

# javascript - 使用javascript将字符串操作成dom元素

> ID：13636402
> 
> 赞同：1
> 
> 时间：2012-11-29T23:04:23.070
> 
> 标签：javascript, replace, split

我有一串动态填充的文本。在每个字符串中，都有一个常用词：“type”。给定一个存储为变量的字符串，我想使用 javascript 找到单词“type”并在它之前放置一个潜水，然后在字符串之后放置一个关闭 div。像这样：

```
var string = "Here is some text that contains the word type and more text after"; 
```

我希望最终结果是这样的：

```
Here is some text that contains the word <div>type and more text after</div> 
```

我该怎么办？

当前代码如下：

```
var wod = $("#wod a").attr("title");
    var newwod = wod.replace("Copyright 2012, GB Blanchard - Learn Spanish: www.braser.com","");
    //get ride of example and everythign after it
    var finalwod = newwod.split("Example")[0];
    var newstring = finalwod.replace(/(type.+)/,"<div>$1</div>");

   $("#wod span").append(newstring); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:06:47.673

只需使用`replace`：

```
string = string.replace(/(type.+)/,"<div>$1</div>"); 
```

请注意，当您尝试修改由比单个文本节点更复杂的结构组成的 HTML 时，这不是最佳方法，但它适用于这种特定情况。

正如杰克指出的那样，您不需要在这里使用捕获组，因为整个比赛已经可以使用`$&`.

```
string = string.replace(/type.+/,"<div>$&</div>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:01:23.517

这真的是您*唯一*可用的方法吗？

Asad 有一个很好的正则表达式示例，**但是**，他也指出您的方法不是最佳实践。

为什么你不能有一些结构？

```
var returnedData = { "type": "div", "text": "I like best practice" };
//Might need error checking in future
var newElement = document.createElement(returnedData.type);
newElement.innerHTML = returnedData.text;
$("#wod span").append(newElement); 
```

# android - SQLite 数据库副本不适用于设备本身

> ID：13636406
> 
> 赞同：1
> 
> 时间：2012-11-29T23:04:31.927
> 
> 标签：android

我正在尝试为我的 Nexus 7 开发西班牙语词汇练习应用程序。我按照必要的说明（1）将 mysql 数据库转换为 SQLite 数据库，然后（2）将创建的 SQLite 数据库集成到 Android 应用程序中。尽管已经是一位非常有经验的程序员/数据库开发人员，但构建 Android 应用程序是一项耐心的练习。长话短说，我的数据库在我的 PC 上似乎是 Nexus 7 模拟器上运行，但拒绝运行，当我使用 adb 在我的 Nexus 7 上安装应用程序时，给了我一个 sqlitecantopendatabase 异常。

我在某些领域读到，复制的 SQLite 数据库在模拟器或设备本身上都不受欢迎。这显然不是我在 Eclipse 上模拟的情况，但显然阻止了在设备本身上运行应用程序。有类似经历的人吗？

# jquery-ui-datepicker - Javascript：如何访问对象中的对象

> ID：13636410
> 
> 赞同：2
> 
> 时间：2012-11-29T23:04:45.453
> 
> 标签：jquery-ui-datepicker, javascript-objects

我正在使用存储 jquery datepicker URL 的翻译的语言文件：[http ://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/i18n/jquery-ui-i18n.min.js?ver =3.4.2](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/i18n/jquery-ui-i18n.min.js?ver=3.4.2)

返回 jQuery.datepicker.regional 对象，我想访问该对象的 it（意大利语）属性。我的问题是当我做类似的事情时

```
console.log(jQuery.datepicker.regional['it']) 
```

或者

```
console.log(jQuery.datepicker.regional.it) 
```

控制台说该对象未定义。

但是当我做类似的事情时：

```
 console.log(jQuery.datepicker.regional); 
```

控制台返回如下内容：

```
[Object]
    : Object
    af: Object
    ar: Object
    ...
    it: Object 
```

我究竟做错了什么？“它”对象不是吗？如何访问 jQuery.datepicker.regional 对象的“it”对象？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:36:33.580

`jQuery.datepicker.regional`当 DOM 准备好时，每个翻译对象都会更新：

```
JQuery(function($){ 
    $.datepicker.regional['it'] = {
        // …
    }
}) 
```

尝试类似地访问它：

```
$(function() {
    console.log(jQuery.datepicker.regional.it)
}) 
```

### 除了关于`console.log`

`console.log`仅显示区域对象会显示所有本地化对象，因为`console.log`（有时`console.dir`）会[打印](https://stackoverflow.com/questions/7389069/console-log-object-at-current-state)对该对象的引用，当您在控制台中实际查看它们时，其属性可能已更改。肯定有一些浏览器特性。

例如，在 Chrome 25.0.1337.0 中：

```
var foo = {};
console.dir(foo) // Object: { baz: "bip" }

console.log(foo) // Object: {}
console.log(foo.baz); // undefined

foo.baz = "bip";

var bar = {};
console.dir(bar) // Object: { baz : { foo: 10 }}

bar.prototype = new Array;
console.log(bar) // Object: { baz : { foo: 10 }}
console.log(bar.baz); // undefined

bar.baz = { foo: 10 }; 
```

在 Firefox 17.0 + Firebug 1.9.2 中：

```
var foo = {};
console.dir(foo) // Object: { }

console.log(foo) // Object: { baz: "bip" }
console.log(foo.baz); // undefined

foo.baz = "bip";

var bar = {};
console.dir(bar) // Object: {}

bar.prototype = new Array;
console.log(bar) // Object: { baz : { foo: 10 }}
console.log(bar.baz); // undefined

bar.baz = { foo: 10 }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:12:24.413

试试这个：

```
var regional = jQuery.datepicker.regional;
console.log(regional.it); 
console.log(regional['it']); 
```

# java - JLabel 没有被添加到 JPanel

> ID：13636411
> 
> 赞同：0
> 
> 时间：2012-11-29T23:04:46.800
> 
> 标签：java, swing, layout, jlabel, layout-manager

我究竟做错了什么？`layers`是一个JPanel。我正在尝试将下面的 JLabel 添加到`JPanel`，但没有任何反应。我尝试将其添加`repaint()`到面板中，但这也无济于事。我不做什么？

```
JLabel lbl = new JLabel();
lbl.setText("Layer " + numLayers);
lbl.setFont(new Font("Verdana", 0, 12));
lbl.setVerticalTextPosition(1);
lbl.setPreferredSize(new Dimension(200, 100));
lbl.setVisible(true);
layers.add(lbl); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:12:12.780

你问：

> ...每个标签不时添加，如何从上到下以列表格式添加？

这是您可能会使用 JList 而不是多个 JLabel 的地方。对于列表上的信息如何显示，您有很大的灵活性，并且很容易将新项目添加到列表的模型中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:05:10.937

我需要到`revalidate()`面板

# python - Sublime Text 2、Sublimelint、问题总结

> ID：13636412
> 
> 赞同：0
> 
> 时间：2012-11-29T23:04:53.753
> 
> 标签：python, sublimetext2, sublimelinter

我开始使用`Sublime Text 2`Eclipse 来开发 Python 代码。

总的来说，我很喜欢这个变化，但我在 Eclipse 中错过的一件事是一个方便的“问题”窗口，它显示了项目中文件的所有错误和警告的摘要。虽然`sublimelinter`有帮助，但它仅适用于您已打开并正在编辑的文件。当您键入错误时，它会在错误周围清楚地放置一个框，但是如果您还没有看到其他文件中的其他问题怎么办？（即，可能是同事犯的，等等）

Sublime Text 2 中是否存在显示 linting 输出摘要的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:21:27.707

pylint 首先是一个用于代码分析的命令行工具。您可以简单地从命令行在模块上运行它，它会生成一个完整的报告，其中包含项目中的每个错误/警告。

我不知道崇高文本中是否存在这样的功能，但这不是你经常使用的东西。我只是每周使用一次命令行来检查我是否没有遗漏任何东西。

我还使用了一个 SublimeTODO 插件，它主要分析代码以查找 TODO 注释。与 sublimelint 不同，它确实为项目中所有打开的文件或文件生成报告。

# javafx-2 - 像在 Scene Builder 中一样动态调整 ui 控件的大小

> ID：13636413
> 
> 赞同：2
> 
> 时间：2012-11-29T23:04:55.577
> 
> 标签：javafx-2, scenebuilder

在 SceneBuilder 中，当您单击场景中的 ui 控件时，控件的边框会变为蓝色，并带有可用于动态调整组件大小的锚点。

这种行为是 JavaFx 内置的还是我必须自己实现？如果是这种情况，那么我该如何实现呢？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:41:51.807

不，这不是 JavaFX 的内置行为。一般来说，选择和拖动节点等的想法是这样的：

*   在选择时，创建新节点（或显示现有节点），它们是“选定”节点周围的句柄和边框
*   每个句柄都需要鼠标事件处理程序
*   鼠标事件处理程序管理“选定”节点的大小调整或拖动

我希望这会有所帮助（有点）......

# java - 在类之间导入java变量

> ID：13636417
> 
> 赞同：0
> 
> 时间：2012-11-29T23:04:56.870
> 
> 标签：java, slick2d

我有两节课。一个类有一个变量“Image plane = null;” 在这个类（Class1）中，我调用了一个函数 move.lookright()，它在另一个名为 move.java 的类文件上执行一个函数，我的问题是我需要将一些变量导入到这个类中，以便我可以使用它们并制作调用函数时图像向右移动。

```
void lookRight() {
    if(plane.getRotation() < 0 ){       
        if(plane.getRotation()>-270 ){
            plane.rotate(-0.2f * delta);
        }
        if(plane.getRotation()<1){
            plane.rotate(0.2f * delta);
        }
    }
} 
```

这个类需要变量 delta 和 plane。

任何帮助表示赞赏。是的，我多次用谷歌搜索这个答案，但找不到答案。

谢谢，凯尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:07:10.990

将方法签名更改为

```
void lookRight(DataTypeOfPlane plane, double delta)
// replace DataTypeOfPlane with the actual data type of the variable plane ;) 
```

并在调用方法时传递参数。

# python - ElasticSearch：EdgeNgrams 和数字

> ID：13636419
> 
> 赞同：6
> 
> 时间：2012-11-29T23:05:04.437
> 
> 标签：python, elasticsearch, django-haystack

关于 EdgeNgram 如何处理数字的任何想法？

我正在使用 ElasticSearch 后端运行 haystack。我创建了一个 EdgeNgram 类型的索引字段。该字段将包含一个字符串，该字符串可能包含单词和数字。

当我使用部分单词对该字段进行搜索时，它会按预期工作。但是如果我输入一个部分数字，我不会得到我想要的结果。

例子：

我通过键入“edgen”来搜索索引字段“EdgeNgram 12323”，然后我会得到返回给我的索引。如果我通过输入“123”来搜索相同的索引，我什么也得不到。

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-02T06:59:26.977

我在这里找到了尝试在 Haystack + Elasticsearch 中解决同样问题的方法。根据 uboness 和 ComoWhat 的提示，我编写了一个替代的 Haystack 引擎，（我相信）它使 EdgeNGram 字段将数字字符串视为单词。其他人可能会受益，所以我想我会分享它。

```
from haystack.backends.elasticsearch_backend import ElasticsearchSearchEngine, ElasticsearchSearchBackend

class CustomElasticsearchBackend(ElasticsearchSearchBackend):
    """
    The default ElasticsearchSearchBackend settings don't tokenize strings of digits the same way as words, so emplids
    get lost: the lowercase tokenizer is the culprit. Switching to the standard tokenizer and doing the case-
    insensitivity in the filter seems to do the job.
    """
    def __init__(self, connection_alias, **connection_options):
        # see http://stackoverflow.com/questions/13636419/elasticsearch-edgengrams-and-numbers
        self.DEFAULT_SETTINGS['settings']['analysis']['analyzer']['edgengram_analyzer']['tokenizer'] = 'standard'
        self.DEFAULT_SETTINGS['settings']['analysis']['analyzer']['edgengram_analyzer']['filter'].append('lowercase')
        super(CustomElasticsearchBackend, self).__init__(connection_alias, **connection_options)

class CustomElasticsearchSearchEngine(ElasticsearchSearchEngine):
    backend = CustomElasticsearchBackend 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T00:31:13.927

如果您使用的是 edgeNGram 标记器，那么它会将“EdgeNGram 12323”视为单个标记，然后对其应用 edgeNGram'ing 过程。例如，如果 min_grams=1 max_grams=4，您将获得以下标记：["E", "Ed", "Edg", "Edge"]。所以我想这不是你真正想要的 - 考虑使用 edgeNGram 令牌过滤器：

如果您使用 edgeNGram 标记过滤器，请确保您使用的标记器实际标记文本“EdgeNGram 12323”以从中生成两个标记：[“EdgeNGram”、“12323”]（标准或空白标记器将做的伎俩）。然后在它旁边应用 edgeNGram 过滤器。

一般来说，edgeNGram 会取“12323”并产生诸如“1”、“12”、“123”等标记...

# c# - 暂存和生产 Web 服务的设计模式

> ID：13636426
> 
> 赞同：0
> 
> 时间：2012-11-29T23:05:47.090
> 
> 标签：c#, design-patterns

我有两个 Web 服务`ServiceReferenceStaging`和`ServiceReferenceProduction`. 每个调用的 Web 服务中的一个类`OperationsClient`都有一个`calculateCost`我需要使用的方法。

麻烦的是，此方法的签名需要特定于该 Web 服务的类型：

```
// staging
ServiceReferenceStaging.OperationsClient.calculateCost(
    ServiceReferenceStaging.TransactionHeaderType header,
    ServiceReferenceStaging.ExtLocationDetailsType fromAddress,
    ...

// production
ServiceReferenceProduction.OperationsClient.calculateCost(
    ServiceReferenceProduction.TransactionHeaderType header,
    ServiceReferenceProduction.ExtLocationDetailsType fromAddress,
    ... 
```

显然，调用代码并不关心正在使用什么 web 服务 - 代码在登台和生产中应该工作相同，并且`header`从配置读取值并将应用程序地址映射到的各种映射方法`fromAddress`应该适用于登台和生产 web 服务.

对于调用代码，我可以将两个 Web 服务包装在一个接口的具体实现中。但是我可以做些什么来将域对象映射到每个具体实现的通用方式`header`？`fromAddress`

# sql-server-2008 - 在水晶报表的新窗口中打开链接

> ID：13636429
> 
> 赞同：4
> 
> 时间：2012-11-29T23:05:50.950
> 
> 标签：sql-server-2008, crystal-reports, sql-server-2008-r2, crystal-reports-xi

我有水晶报告。有包含超链接的列。我希望每当单击该链接时，该页面应在新窗口中打开。所有这些都应该在水晶报告中完成。

我能得到任何帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T05:30:29.720

您的字段包含一个 URL，如果您想将该 URL 作为水晶报表中的超链接，可以这样做。

考虑以下示例报告，其中包含搜索引擎的名称及其链接

![在此处输入图像描述](../Images/b1b32b12849a7021928d80394fd6e3df.png)

现在您的要求是通过单击打开 Google `www.google.com`。
**右键单击**要创建超链接的字段，然后选择**Format Field**。
您将获得如下图所示的格式编辑器。选择“**超链接**”选项卡并选择“**超链接类型**”作为***Internet 上的网站*****选择“超链接信息**
”中的公式字段并使用其中包含 URL 的列并保存公式。现在按 OK 并预览报告。 **![在此处输入图像描述](../Images/af3d509de23bc24f578cca8a3dd2f4ac.png)

当您按下字段时，您可以看到链接打开。您还可以更改字段的字体颜色以显示为 LINK。** 

 ****编辑**
`{link}+'?sWindow=New'`
在链接后使用“？sWindow = New”可能会打开链接新选项卡
试试这个并返回你的结果！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T17:31:36.157

报表查看器有一个名为 HyperlinkTarget 的属性。将其设置为“_blank”以在新窗口中打开。

```
<CR:CrystalReportViewer ID="crvReportView" runat="server" AutoDataBind="true" HyperlinkTarget="_blank" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T13:18:35.143

将 target= "_blank" 添加到您的 html 标记，即：

```
<a href="default.asp" target = "_blank">HTML Tutorial</a> 
```**

# c# - 将 base64string 转换为 Image 类型。找不到图片类型？

> ID：13636430
> 
> 赞同：3
> 
> 时间：2012-11-29T23:05:59.370
> 
> 标签：c#, image, types, base64, type-conversion

我正在尝试将 a 转换`Base64String`为`Image`. 我在我的 C# 控制台应用程序中设置了此代码。

```
public Image Base64ToImage(string base64String)
{
    // Convert Base64 String to byte[]
    byte[] imageBytes = Convert.FromBase64String(base64String);
    MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);

    // Convert byte[] to Image
    ms.Write(imageBytes, 0, imageBytes.Length);
    Image image = Image.FromStream(ms, true);
    return image;
} 
```

每次使用 type 时都会出错`Image`。它说：

> 找不到类型或命名空间名称。

我正在使用：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Threading.Tasks;
using System.Net.Mime;
using System.Drawing; 
```

我错过了图书馆吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T23:08:39.053

是的，如果您正在编写*控制台*应用程序，您的项目可能不会包含对 的引用`System.Drawing.dll`，即包含[`System.Drawing.Image`](http://msdn.microsoft.com/en-us/library/k7e7b2kd.aspx). 只需添加程序集引用，它应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:09:01.550

在项目窗口中，右键单击引用，然后选择“添加引用...” 在 .NET Framework 中，选择 System.Drawing.dll。

# sql-server-2008 - 如何创建递归查询以返回扁平的连接字符串列

> ID：13636441
> 
> 赞同：5
> 
> 时间：2012-11-29T23:06:50.373
> 
> 标签：sql-server-2008

我正在使用 SQL Server 2008，遇到了以前从未遇到过的 SQL 挑战。考虑下表代表一个分层类别列表：

```
ID  Name            Description                     ParentID
--- --------------- ------------------------------- --------
1   Bicycle         Bicycles and Tricycles          {null}
2   Wheels          Wheels                          1
3   Spoked          Spoked Wheels                   2
4   Skate Boards    Skate Boards and accessories    {null}
5   Wheels          Skate Board Wheels              4
6   Polyurethane    Polyurethane Wheels             5 
```

我正在寻找的结果：

```
ID  Heirarchy                               Description
--- --------------------------------------- ------------------------------------
1   Bicycle                                 Bicycles and Tricycles
2   Bicycle, Wheels                         Wheels
3   Bicycle, Wheels, Spoked                 Spoked Wheels
4   Skate Boards                            Skate Boards and accessories
5   Skate Boards, Wheels                    Skate Board Wheels
6   Skate Boards, Wheels, Polyurethane      Polyurethane Wheels 
```

我想查询此表并通过将每个父级的名称连接到子级来为代表层次结构的每一行返回一个名称。层次结构没有预设的嵌套深度，我希望能够在单个查询中运行它。如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:11:28.467

```
with tree as (
   select id, 
          cast(name as varchar(max)) as hierarchy,
          name, 
          description
   from the_table
   where parentID is null
   union all
   select c.id, 
          p.hierarchy + ', ' + c.name,
          c.name,
          c.description
    from the_table c
       join tree p on p.id = c.parentID
) 
select * 
from tree; 
```

# redmine - Redmine - 缓存不起作用

> ID：13636444
> 
> 赞同：1
> 
> 时间：2012-11-29T23:07:24.457
> 
> 标签：redmine

我正在使用 bitnami Redmine 2.0.3。目录 tmp/cache 是空的，所以我怀疑没有使用缓存。我的怀疑是真的吗？谢谢。

# c# - linq + groupby - 在选择查询中添加字段

> ID：13636446
> 
> 赞同：1
> 
> 时间：2012-11-29T23:07:37.247
> 
> 标签：c#, linq-to-entities

问题：我们可以对 LINQ 中的多个字段进行 groupby 目前 - 我有类似这样的 linq

```
q = q.GroupBy(c => c.Id)
     .Select(g => new View
                  {
                      Id = g.Key,
                      ENAME= string.Join(",", g.Select(x => x.CaseApprover).ToList())
                  }); 
```

我想用多个字段分组，比如

```
q = q.GroupBy(c => c.Id, c.name,c.age,c.dob) 
```

还如何将它们放入选择查询中？这样我也会在选择查询中获得新添加的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T15:10:10.250

试试这个：

```
q = q.GroupBy(c => new { c.Id, c.name,c.age,c.dob })
    .Select(g => new
    {
        Id = g.Key.Id,
        ENAME= string.Join(",", g.Select(x => x.CaseApprover).ToList()),
        Name = g.Key.name,
        Age = g.Key.age,
        Dob = g.Key.dob,
    }); 
```

这将返回一个匿名类型，如果你想在你的`View`类中添加这些字段，只需添加它们。

# c# - 如何在不禁用验证的情况下将 HTML 或其他类似标记安全地传递到文本框中？

> ID：13636447
> 
> 赞同：2
> 
> 时间：2012-11-29T23:07:40.570
> 
> 标签：c#, asp.net, .net, html

我有一个下拉列表，我需要根据 CAML 查询过滤其内容。此查询必须由用户设置。

允许用户输入 CAML 查询或其他常见标记的最佳方法是什么？

例子：

```
<OrderBy><FieldRef Name='SomeColumn' Ascending='True' /></OrderBy> 
```

如果我使用文本框，则需要禁用验证，否则我会丢失查询的内容，因为 .NET 会剥离它的类似 HTML 的标签以针对 XSS 进行文本处理。

我不想经历构建查询配置器的过程，但我也明白禁用验证是不好的做法。这里有中间立场，或者只是一个更好的方法？

禁用验证和使用 System.Web.HttpUtility.HtmlEncode 是一个有效的解决方案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:24:56.567

使用[`escape`](http://www.w3schools.com/jsref/jsref_escape.asp)JavaScript 方法在上传之前更改文本，然后[`Server.UrlDecode`](http://msdn.microsoft.com/en-us/library/6196h3wt.aspx)在 Web 服务器上使用将其恢复为原始状态。

至于何时这样做，我会处理该[`onsubmit`](http://www.w3schools.com/jsref/event_form_onsubmit.asp)事件并告诉它将文本框内容复制到将被上传的隐藏字段中（但不应提交文本框）。

# javascript - 登录工作正常，但现在无法调用任何函数

> ID：13636449
> 
> 赞同：0
> 
> 时间：2012-11-29T23:07:41.617
> 
> 标签：javascript, facebook, function, login, header

这是我的代码，从开始的正文标签下方开始：

```
<div id="fb-root"></div>
<script>
alert("made it into the script");
window.fbAsyncInit = function() {
// init the FB JS SDK
FB.init({
  appId      : '360348567392858', // App ID from the App Dashboard
  channelUrl : 'http://chrisvanhorne.com/users/erosas/final/channel.html', // Channel      File for x-domain communication
  status     : true, // check the login status upon init?
  cookie     : true, // set sessions cookies to allow your server to access the session?
  xfbml      : true  // parse XFBML tags on this page?
});

// Additional initialization code such as adding Event Listeners goes here
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
         // User logged into FB and authorized
            testAPI();
            document.getElementById('fb-logout').style.display = 'block';
      } else if (response.status === 'not_authorized') {
        // User logged into FB but not authorized
            login();
      } else {
        // User not logged into FB
            login();
            document.getElementById('fb-logout').style.display = 'block';
      }
     });

};

    function login() {
    FB.login(function(response) {
        if (response.authResponse) {
            // connected
            alert("made it to login");
            testAPI();
        } else {
            // cancelled
        }
    });
}

function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
        console.log('Good to see you, ' + response.name + '.');
    });
}   

 // Load the SDK's source Asynchronously
 // Note that the debug version is being actively developed and might 
 // contain some type checks that are overly strict. 
 // Please report such bugs using the bugs tool.
 (function(d, debug){
 var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
 if (d.getElementById(id)) {return;}
 js = d.createElement('script'); js.id = id; js.async = true;
 js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
 ref.parentNode.insertBefore(js, ref);
 }(document, /*debug*/ false));

</script> 
```

登录功能工作正常，但之后无法调用此脚本标签中的功能。不仅如此，奇怪`<script>`的是，在 Facebook 脚本代码之后，它们中的 javascript 完全不工作。没有调用任何调试警报（）函数，也没有调用（我可以告诉 Facebook）。

我考虑过一些可能的问题，但不确定：

1.  我使用 php 调用页眉和页脚，这段代码在页眉中，不太确定这是否会影响任何加载方式
2.  我通过它访问的域是受密码保护的，也就是说，当我导航到这个 url 时会弹出一个窗口，我需要登录才能看到该页面，不太确定这是否与 Facebook 的 SDK/服务器混淆
3.  也许有一个我没有看到的相当明显的解决方案

任何帮助将不胜感激，因为我目前正疯狂地试图解决这个问题，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:37:03.143

难以置信，部分原因是代码没有等待 init 函数完成，并且头部（未显示）中有“坏”的 javascript 标记，结尾为：而不是 . 容易修复，下次会更努力地寻找答案

# android - 在哪里可以找到适用于 AOSP 构建图像的 Google Apps 包？

> ID：13636451
> 
> 赞同：0
> 
> 时间：2012-11-29T23:07:47.483
> 
> 标签：android, android-source

我刚刚按照 Google 的说明为我的 Galaxy Nexus 构建并安装了 JB AOSP 映像：http: [//source.android.com/source/building-devices.html](http://source.android.com/source/building-devices.html)

但是，该图像不随 Google 应用程序一起提供，例如导航和 Play 商店。如何将这些应用程序安装到我的设备上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:11:13.287

如果您的手机已root，您可以下载zip文件并通过恢复安装它： [最新的GAPPS下载](http://goo.im/gapps/gapps-jb-20121011-signed.zip)

# html - 为什么 IE 中的向后导航会导致 html 属性值被包含在智能双引号中？

> ID：13636452
> 
> 赞同：2
> 
> 时间：2012-11-29T23:07:52.090
> 
> 标签：html, internet-explorer, double-quotes, cp1252

我的页面每次在所有浏览器中都能正常加载，除了在 IE 中，当我使用浏览器后退按钮时，它会将用于选项元素的值属性的双引号更改为智能双引号而不是直引号。

最初使用直双引号正确加载：

```
<option value="500">500+</option> 
```

IE9 浏览器返回智能双引号：

```
<option value=“500”&gt;500+</option> 
```

然后当我在javascript中获取值时，它看起来像这样：““500””
为什么它在IE中这样做？为什么它只在向后导航时才这样做？

**故障排除**
定义以下内容没有帮助：

```
<meta charset='ISO-8859-1'> 
```

也没有将字符集添加到我的所有外部脚本中，因为上面的 html 选项元素是 jquery select 元素的一部分，该元素在呈现之前被修改：

```
<script charset="ISO-8859-1" type="text/javascript" src="...jquery-at-google"></script> 
```

**更多信息：**
这些字符来自 ANSI Windows 代码页 1252。

*   字符：代码点：WINDOWS-1252

*   “：U+201C：93

*   ” : U+201D : 94

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:08:54.313

我在 Visual Studio 2010 中进行开发，似乎用于开发服务器的端口导致了问题，因为当我将其更改为另一个随机端口时，问题就消失了。不知道为什么，只是更改 VS 开发服务器端口可以解决此问题。

在 .csproj 中对此进行了更改：

```
<DevelopmentServerPort>49288</DevelopmentServerPort> 
```

对此：

```
<DevelopmentServerPort>53845</DevelopmentServerPort> 
```

修复。或者您可以在项目属性中更改它。不知道为什么，除了 VS2010 必须以某种方式损坏该服务器。

# python - 如果 pip 卸载失败会怎样？

> ID：13636458
> 
> 赞同：1
> 
> 时间：2012-11-29T23:08:20.200
> 
> 标签：python, dependencies, pip, uninstallation

当 virtualenv 中的 pip 卸载失败时会发生什么？重新安装软件包是否足够聪明，或者它会引发异常并使 virtualenv 损坏？我正在制作卸载软件包、运行 pytest 并再次安装它们的脚本。我需要它来测试依赖项是否仍然是不必要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:25:38.963

我认为它会使包装破损。pip install 和 pip uninstall 既不是原子的，也不是非常可靠的（当然不像 apt，它不是没有问题但更健壮）。

# facebook - Facebook 应用程序和游戏组 API - (#3) 应用程序必须在白名单中

> ID：13636459
> 
> 赞同：1
> 
> 时间：2012-11-29T23:08:29.890
> 
> 标签：facebook, facebook-game-groups

我正在尝试使用 Graph API 资源管理器创建应用程序和游戏组 API 组。我收到以下错误。您是否必须是经过批准的应用中心应用才能使用此功能？

(#3) 应用必须在白名单中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:32:09.567

[是的， App and Game Groups 文档](https://developers.facebook.com/docs/concepts/app-game-groups/)中对此效果有注释：

> 您的应用必须位于 App Center 中才能使用游戏组。

在[宣布该功能的博客文章中](https://developers.facebook.com/blog/post/2012/11/14/platform-updates--operation-developer-love/)：

> 为确保为用户提供高质量的体验，我们将此功能作为**测试版提供给 App Center 中列出的所有应用和游戏**，并将随着时间的推移继续迭代。您现在可以通过阅读我们的概念和参考文档开始。

# perl - 优化 Unix 搜索

> ID：13636460
> 
> 赞同：2
> 
> 时间：2012-11-29T23:08:32.817
> 
> 标签：perl, unix, search, optimization

我有 20 个 500k 行的文件，每行有 2 个数字。目标是获得每个 A 号码的不同对 (AB) 相对于 A 号码总数的百分比。所以，结果应该是这些文件中的一个数字和他的百分比。

例如：

> 1 1
> 
> 1 1
> 
> 1 1
> 
> 1 2

应该给我 1 50%（总共 4 A 中有 2 对不同的对）。

以下方式太慢：不同的数量

```
cat files | sort | uniq -c 
```

总数

```
cat files | cut -f1 | sort | uniq -c 
```

然后遍历这些结果并计算每个 A 数的百分比。

如何为此最好地优化查询（bash/perl）？另外，如果这应该只对这些 A 数的子集进行，如何优化它？（例如，对于 20k 一个数字，不是全部 500k）

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:28:38.150

Perl 解决方案。尝试运行它`script.pl files`，看看它运行得有多快。

```
#!/usr/bin/perl
use warnings;
use strict;

my %hash;
while (<>) {
    my @nums = split;
    $hash{$nums[0]}{$nums[1]}++;
}

#for my $num (sort { $a <=> $b } keys %hash) {    
for my $num (keys %hash) {
    my @values = values %{ $hash{$num} };
    my $sum;
    $sum += $_ for @values;
    my $perc = 100 * @values / $sum;
    print "$num $perc%\n";
} 
```

`sort`如果您希望输出按第一个数字排序，请取消注释该行（并注释以下行）。

# c# - 使用触发器更改数据库中的记录

> ID：13636463
> 
> 赞同：2
> 
> 时间：2012-11-29T23:08:40.260
> 
> 标签：c#, database, sqlite, triggers

这基本上就是我的数据库的样子

```
身份证 | 后裔 | 父亲| 高分辨率照片| CLIPARTO 母亲
---------------------------------
1 个
2 YAB

```

字母 X、Y、Z、A、B 代表一些代码或数字

例如，如果我在第 1 行（ID = 1）将代码 Y 更改为 R，我想将我有代码 Y 的每个字段更改为代码 R，反之亦然，如果我在第 2 行将 Y 更改为 R，那么将自动更改第 1 行的 Y 到 R

最重要的是，如果将某些代码更改为另一个代码，例如我将 Y 更改为 R 或 G 等等，数据库中具有代码 Y 的每条记录都应更改为 R 或 G。

我可以用触发器做到这一点。或者还有什么其他方法可以使用。（我的用户可以通过我的 C# 应用程序更改记录）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:22:31.333

使用这样的[触发器](http://www.sqlite.org/lang_createtrigger.html)，每个字段一个：

```
CREATE TRIGGER update_descendant
AFTER UPDATE OF descendant ON MyTable
BEGIN
    UPDATE MyTable SET descendant = NEW.descendant WHERE descendant = OLD.descendant;
    UPDATE MyTable SET father     = NEW.descendant WHERE father     = OLD.descendant;
    UPDATE MyTable SET mother     = NEW.descendant WHERE mother     = OLD.descendant;
END; 
```

（如果该`descendant`列是唯一的，则不需要更新它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:20:28.067

使用此基表上的触发器，您可能会得到一个突变。这可能由另一个具有映射的表控制。

与此类似：

```
map_table
-------------
original_val
new_val 
```

然后您将 X 填写为原始表格，将 R 填写为新表格，那么就可以使用此插入来修复您的原始表格。

# c - 使用开放 mp 的慢速稀疏矩阵向量积 (CSR)

> ID：13636464
> 
> 赞同：6
> 
> 时间：2012-11-29T23:08:53.853
> 
> 标签：c, openmp

我正在尝试使用 open mp 加速稀疏矩阵向量乘积，代码如下：

```
void zAx(double * z, double * data, long * colind, long * row_ptr, double * x, int M){

long i, j, ckey;
int chunk = 1000;
//int * counts[8]={0};
#pragma omp parallel num_threads(8)
{ 
  #pragma omp for private(ckey,j,i) schedule(static,chunk)
  for (i=0; i<M; i++ ){ 
    z[i]=0;
    for (ckey=row_ptr[i]; ckey<row_ptr[i+1]; ckey++) {
      j = colind[ckey];
      z[i] += data[ckey]*x[j];
    }              
  }
}
} 
```

现在，这段代码运行良好，并产生了正确的结果，但是它只给了我大约 30% 的速度。我检查过线程都获得了相同数量的非零元素（它们是），并且矩阵相当大（300,000 x 300,000），所以我希望开销不是唯一的问题. 我也尝试过使用不同的块大小和线程数运行，我得到了类似的性能。

还有什么我可以尝试从中获得额外速度的东西吗？或者我显然做错了什么？

干杯。

编辑：刚刚注释掉'//int * counts [8] = {0}'，因为它是计算工作分配的剩余部分。没有必要

编辑2（更多细节）：

好的，所以我计时了一个调用这个 5000 次的循环并得到了平均时间：

*   seq：0.0036（秒？）
*   2 个线程：0.002613
*   4 线程：0.002308
*   8 个线程：0.002384

该矩阵的大小为：**303544x303544**，并具有：**2122980**个非零元素。

使用更小的矩阵 30000x30000 我得到的时间更像

*   序列号 0.000303
*   8 线程 0.000078

所以看起来大尺寸可能是我的问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-30T12:31:45.887

欢迎来到内存受限问题的奇妙世界。为了减轻您的痛苦，我想告诉您，稀疏矩阵向量乘法是许多无法在单个多核芯片上有效并行化甚至向量化的事情之一，除非*所有*数据都可以放在最后一个级别缓存或内存总线*真的很宽*。

为什么？仅仅是因为计算与内存访问的比率非常低。对于内部循环的每次迭代，您获取一次列索引`j`（8 个字节）、矩阵元素`data`（8 个字节）、向量元素的值（8 个字节）和结果的前一个值（因为编译器很少优化访问共享变量）（8 字节）。然后您执行 2 个非常快速的浮点运算 (FLOP) 并执行存储（尽管该`+=`运算符被转换为一条指令，但它仍然是“获取-修改-写入”指令）。总共加载 32 个字节，并在它们上执行 2 次 FLOP。这使得每个字节 1/16 FLOPs。

**支持 SSE 的**现代CPU 内核可以执行 4 个双精度 FLOP/周期，这通常会导致每个 CPU 内核 8 GFLOPS（假设基本频率为 2 GHz）。有了 AVX，这个数字就翻了一番，因此在 2 GHz Intel Sandy/Ivy Bridge 或 AMD 同等产品上，每个内核可以获得高达 16 GFLOPS。为了使这种处理能力与数据饱和，给定 1/16 FLOPs/字节，您将需要至少 128 GiB/s 的内存带宽。

像 Xeon X7560 这样的**高端 Nehalem-EX 处理器**以 2.26 GHz（9.04 GFLOPS/核心）运行，其共享的 L3 缓存（L1 和 L2 缓存是每个核心）提供约 275 GiB/s。在 9,04 GFLOPS/核心时，您需要每个核心 144,64 GiB/s 才能满足`zAx`例程的内部循环。这意味着在理想情况下，该 CPU 的 L3 高速缓存不能提供超过 2 个完全矢量化乘法内核。

如果没有 SSE 矢量化，双精度的 FLOPS 速率会低两倍，因此可以预期问题会扩展到 4 个线程。一旦你的问题变得比 L3 缓存大，事情就会变得非常糟糕，因为内存总线提供的带宽要少十倍。

尝试以下版本的内部循环，看看编译器是否足够聪明，可以遵循 OpenMP 的宽松内存视图：

```
#pragma omp for private(ckey,j) schedule(static,chunk)
for (i=0; i<M; i++){
  double zi = 0.0;
  for (ckey=row_ptr[i]; ckey<row_ptr[i+1]; ckey++) {
    j = colind[ckey];
    zi += data[ckey]*x[j];
  }
  z[i] = zi;
} 
```

不幸的是，您无能为力。稀疏矩阵向量乘法与 CPU 插槽数成比例，而不是与 CPU 内核数成比例。您将需要具有独立内存控制器的多插槽系统，例如任何具有多个（后）Nehalem 或 AMD64 处理器的系统。

编辑：优化提示。你真的需要`long`存储列索引和行指针吗？使用 2122980 个非零元素，你可以很好地使用它`int`。它将在内部循环中为每个元素节省 4 个字节，在外部循环中为每行节省另外 4 个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T00:08:03.460

我不能在评论中写这个，所以我会这样做作为答案。我认为这是问题所在，但不是 100% 肯定。

跨线程的共享变量可能会导致问题。我认为这不是问题，但可能是。通常仅在写入时，但如果没有锁，则只会导致数据损坏。不确定 OpenMP 是否在内部进行任何锁定。

您的线程很可能由于锁而停滞，这是多线程运行速度比单线程慢得多的唯一原因。那或者它根本不是你的代码。最好在内存中没有潜在瓶颈的小型数据集上对其进行测试（因此您所做的只是处理数据并*仅对*zAx 函数计时）。

0.3M^2 = 90B。这意味着您肯定会遇到分页或加载文件的问题。（如果您使用的是 int 的 4 倍大小）

更好的方法可能是在磁盘并行加载 Y 数量时对矩阵的 X 数量进行操作。通过正确选择 X 和 Y，您不会降低速度。如果您正在加载 8GB，正在处理，然后再加载 8GB，您必须等待每次加载数据。

您可以通过监控处理和文件加载什么都不做的时间来选择 X 和 Y = (8GB - X)，从而使处理变得智能。

要检查磁盘访问是否是问题，请尝试使用较小的数据集和时间仅 zAx，看看是否有帮助。如果是，那么它是磁盘。如果没有，那就是代码。

# ruby-on-rails - 如何自动定期运行我的规范并在它们失败时得到通知？

> ID：13636466
> 
> 赞同：2
> 
> 时间：2012-11-29T23:09:03.207
> 
> 标签：ruby-on-rails, ruby, rspec, continuous-integration, vcr

我写了一个食谱屏幕刮板。由于屏幕抓取工具很容易破解，我编写了一些规范来测试各种网站的预期输出。在我的开发环境中，我使用的是[VCR](https://github.com/vcr/vcr)，所以我不必一直打电话到这些网站。

问题是这并不能真正告诉我食谱网站是否改变并破坏了我的**刮刀**。我可以定期刷新磁带，我会这样做，但我想更加积极主动。我想以某种方式每天运行这些特定的规范，并在它们失败时收到结果通知，这样我就可以回去修复**刮板**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:13:03.453

一种方法是将您的应用程序打包为命令行工具，然后您可以将其安排为 cron 作业。当事情失败时，你可以让它给你发电子邮件或使用你的开发机器上的一些通知库来引起你的注意。我用 Growl 做过类似的事情。

如果您不想依赖您的开发盒，请制作一个您可以在 Heroku 上托管的应用程序，该应用程序执行相同的操作（失败时向您发送电子邮件）。

希望有帮助。

# scala - Scala 中的轻量级缓存解决方案？

> ID：13636475
> 
> 赞同：11
> 
> 时间：2012-11-29T23:09:41.207
> 
> 标签：scala, guava

我只是想知道 Scala 中是否有任何可用的缓存解决方案。我正在寻找类似 Guava 在 Java 中提供的东西。

我应该在 Scala 中也使用 Guava 吗？Scalaz 中是否有包装器/皮条客或类似的东西？有没有更适合 Scala 开发人员的替代方案？

番石榴提供了什么：

```
LoadingCache<Key, Graph> CACHE= CacheBuilder.newBuilder()
       .maximumSize(1000)
       .expireAfterWrite(10, TimeUnit.MINUTES)
       .removalListener(MY_LISTENER)
       .build(
           new CacheLoader<Key, Graph>() {
             public Graph load(Key key) throws AnyException {
               return createExpensiveGraph(key);
             }
           });

Supplier<Animal> singleAnimalCache = Suppliers.memoizeWithExpiration(animalFromDbSupplier(), 365, TimeUnit.DAYS); 
```

我需要一些基本的缓存管理，比如 Guava。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-04T11:19:46.313

我们有相同的要求，最终围绕 Guava 构建了包装器。我们最近开源了名为[Mango](https://github.com/feijoas/mango)的库的一部分。如果你不介意额外的依赖，你可以像这样使用它

```
import org.feijoas.mango.common.cache._
import org.feijoas.mango.common.base.Suppliers._

val MY_LISTENER = (remNot: RemovalNotification[Key, Graph]) => ()
// > MY_LISTENER : RemovalNotification[Key,Graph] => Unit = <function1>

val CACHE = CacheBuilder.newBuilder()
  .maximumSize(1000)
  .expireAfterWrite(10, TimeUnit.MINUTES)
  .removalListener(MY_LISTENER)
  .build { (key: Key) => new Graph() }
// > CACHE : LoadingCache[Key,Graph] = <function1>

val animalFromDbSupplier = () => {
  // load from db
  new Animal()
}
// > animalFromDbSupplier  : () => Animal = <function0>

val singleAnimalCache = memoizeWithExpiration(animalFromDbSupplier, 365, TimeUnit.DAYS)
// > singleAnimalCache  : () => Animal = Suppliers.memoizeWithExpiration(<function0>, 365, DAYS) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-10-20T04:38:14.677

只是添加一个答案来插入我自己的项目，但我推荐 ScalaCache。

*   支持 Guava、Ehcache、Memcached 和 Redis（或者您可以根据需要插入自己的实现）
*   简单、惯用的 Scala API
*   支持每个元素的生存时间（即使是 Guava，它不提供开箱即用的功能）
*   支持使用宏魔法自动生成缓存键

[https://github.com/cb372/scalacache](https://github.com/cb372/scalacache)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T07:04:15.803

> Scalaz 中是否有包装器/皮条客或类似的东西？

在 Scalaz 7 中`Memo`，我在[学习 Scalaz day 16](http://eed3si9n.com/learning-scalaz-day16)时介绍了一些内容。

这是 Adam Rosien 在[scalaz “For the Rest of Us”](http://www.youtube.com/watch?v=kcfIH3GYXMI)演讲中提到的第一件事，所以也来看看吧。他正在使用 Scalaz 6。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-11-23T20:59:37.753

在 Scala 中使用**番石榴缓存很简单。**

```
import com.google.common.base._
import com.google.common.cache._

object Simple_Guava_Caches_in_Scala {

   def main(args: Array[String]): Unit = {

      // Simple scala guava cache
      val simpleCache1 =
         CacheBuilder
           .newBuilder()
           .build(new CacheLoader[String, String] {
              def load(key: String): String = {
                 println(s"Simple scala guava cache, heavy work calculating $key")
                 s"It's me $key"
              }
           })
      println(simpleCache1.get("1"))
      println(simpleCache1.get("1"))
      println(simpleCache1.get("2"))
      println(simpleCache1.get("2"))
      println(simpleCache1.get("2"))

      // Simple scala guava supplier cache / factory
      println()
      val supplier_cache: Supplier[String] = Suppliers.memoize(
         () => {
            println("Simple scala guava supplier cache / factory, heavy work creating singleton:")
            "It's me"
         }
      )
      println(supplier_cache.get)
      println(supplier_cache.get)
      println(supplier_cache.get)
   }
} 
```

这是生产

```
Simple scala guava cache, heavy work calculating 1
It's me 1
It's me 1
Simple scala guava cache, heavy work calculating 2
It's me 2
It's me 2
It's me 2

Simple scala guava supplier cache / factory, heavy work creating singleton:
It's me
It's me
It's me 
```

我已将此添加到`build.sbt`：

```
libraryDependencies += "com.github.cb372" %% "scalacache-guava" % "0.26.0" 
```

将上面的编码转换为 cb372 的 scalacache-guava 会很有趣。可以更简单/更标准化。

# location - AngularJS - 更新 $route 参数的最佳方法

> ID：13636476
> 
> 赞同：14
> 
> 时间：2012-11-29T23:09:44.410
> 
> 标签：location, angularjs, routes

我有几条不同的路线，但包含相似的参数。
**例子：**

```
when '/user/:accountId/charts/:chartType', controller:ChartsController
when '/manager/:accountId/charts/:chartType', controller:ChartsController
when '/whatever/pathy/paththingy/charts/:chartType', controller:ChartsController 
```

请注意，所有三个视图都使用相同的 Charts Controller 来控制视图。它是一个相当通用的控制器，但它需要在可用的图表类型之间切换......同时保留其余的路线。
**示例：（这不起作用）**

```
if my currrent url is '/user/001/charts/comparison'
Then I call something like:
$route.current.params.chartType = 'newChart';
$route.reload(); // or soemthing similar?
I want the url to become '/user/001/charts/newChart' 
```

有谁知道如何在不完全重新键入或重建路由路径的情况下轻松更新路由参数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-01-20T23:30:42.680

从 angular 1.3 开始，您可以使用它`$route.updateParams(newParams)`来更改路由参数。

[这是来自角度文档的引用...](https://code.angularjs.org/1.3.0/docs/api/ngRoute/service/$route#updateParams)

> **$route.updateParams(newParams);**
> 
> 使`$route`服务更新当前 URL，将当前路由参数替换为`newParams`. 提供的与路线的路径段定义匹配的属性名称将被插入到位置的路径中，而其余属性将被视为查询参数。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-07-23T02:52:53.797

如果可能的话，我建议您改用[ui-router](https://github.com/angular-ui/ui-router)。它在很多方面都比 ngRoute 更强大。

本质上，这个模块有一个更高级别的概念，称为**状态**包装底层路由，它**可以防止您直接**使用路由 url 等较低级别的路由。

比较：[angular-route 和 angular-ui-router 有什么区别？](https://stackoverflow.com/questions/21023763/difference-between-angular-route-and-angular-ui-router)

使用 ui-router，您可以像这样实现代码：

```
$stateProvider
  .state('user.chart', {
     url: '/user/:accountId/charts/:chartType',   
     controller: "ChartsController"   
  })
 .state('manager.chart', {
     url: '/manager/:accountId/charts/:chartType', 
     controller: "ChartsController"
  })
 .state('pathy.chart', {
     url: '/whatever/pathy/paththingy/charts/:chartType', 
     controller: "ChartsController"
  }) 
```

您可以使用此代码在状态之间导航：

```
$state.go('user.chart',{chartType:'newChart'},{inherit:true}); 
```

[文档](http://angular-ui.github.io/ui-router/site/#/api/ui.router.state.$state)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-26T23:46:14.727

缺少这个简单的功能让我很恼火，所以我[实现了它并在 GitHub 上提交了 PR](https://github.com/angular/angular.js/pull/8358)

# objective-c - 可伸缩动态自定义 UITableViewCells

> ID：13636477
> 
> 赞同：0
> 
> 时间：2012-11-29T23:09:45.490
> 
> 标签：objective-c, ios, uitableview

我有一个`UITableView`自定义`UITableViewCells`（圆角，自定义背景等）。我的数据也是动态的，这里的问题是当标签变得太长时，图像（主要是高光和圆角）会被拉伸。

有什么好的解决方案？现在我正在 IB 中创建一个没有 AutoLayout 的单元格，并调整所有内容的大小以以编程方式使用`cellForRowAtIndexPath`and `heightForRowAtIndexPath`。

我能想到的一个：

1）保持背景的图像视图大小相同，并在其顶部覆盖另一个延伸到底部的图像。这似乎真的很骇人听闻，总的来说似乎是个坏主意。

2）自定义绘制代码中的所有内容。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:15:35.133

可能需要有关如何设置所有内容的更多信息（使用 IB 或以编程方式创建东西？使用自动布局？使用调整大小掩码？）

如果您的标签变得很长，您可以将标签粘贴在 UIScrollView 中并为滚动视图设置固定大小。

# asp.net - 在 asp.net 中将单个解决方案拆分为多个解决方案

> ID：13636479
> 
> 赞同：1
> 
> 时间：2012-11-29T23:09:54.850
> 
> 标签：asp.net, projects-and-solutions

我如何将单一解决方案网站拆分为多个解决方案（而不是多个项目），以便单独的开发人员可以处理单独的解决方案，同时仍然对其他解决方案具有“可见性”？例如，我希望能够直接从 Visual Studio (F5) 运行和测试业务模块，但登录模块位于单独的解决方案中。有没有办法像这样划分网站开发？

如果不是，多个开发人员如何在同一解决方案中的不同项目上工作？（我们是一家小商店，还没有尝试过 Team Foundation Services）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:28:01.723

... 源代码控制。

我读了您的问题，首先想到的是“他们正在尝试处理托管在网络共享上的源代码的同一副本”。糟糕，糟糕，糟糕。即使它是一个网站，因此要在正常运行状态下从一个地方访问，这也不是开发它的正确方法

为自己准备一份 Subversion 或 Mercurial 的副本，检查代码库并确保每个人都定期提交他们的更改。Subversion Server 本身不受 CollabNet 的约束；一些用于提供 GUI 和 IDE 集成的工具不是（但一些很好的工具是；查看 TortoiseSVN 以了解基于 Windows 资源管理器的一般存储库操作，而 AnkhSVN 是 Visual Studio 的免费软件插件，允许从 IDE 内提交/更新） .

一旦你设置了这个源代码控制系统，每个人都可以将代码库的工作副本“签出”到他们的本地机器上，并且可以对其进行所有他们想要的更改，然后在他们有一个稳定的情况下“签入”这些更改工作版本，然后其他人可以通过更新自己的工作副本来获得。显然，这需要开发人员的机器有足够的能力在他们自己的机器上运行网站的基本副本（过去 4 年左右的大多数 PC 在运行 IIS、SQL Server Express 和 ASP 的实例时应该没有问题） .NET 站点，只有开发人员浏览它）。要查看最新的工作副本的外观和行为，

SVN 通过“合并”更改来处理同一文件的多次提交，如果两个开发人员以不同的方式修改同一行代码，通常只会出现问题。如果有人对代码库进行大的、彻底的更改，可能会扰乱其他用户，但仍想“提交”他的工作副本（通常是一件好事，如果没有别的原因，出于备份目的），他可以根据当前源代码，更新并提交到它，然后当他完成后，将他的更改合并回“主干”。

基本上，每个从事项目的开发人员都应该使用同一组源代码，理想情况下，这将是开发人员可以从版本控制从头开始下载的单一解决方案，在 VS 中打开，点击“构建”按钮并开始。您的团队应该就他们正在从事的项目和源文件相互交流，并且应该定期（比如每隔一两个小时）提交他们的更改并让其他人得到他们的更改。

您可以全力以赴并实施“持续集成”服务器。在每次签入时，该系统将提取最新的源代码并运行许多自动化任务，例如运行各种测试/指标、推送到登台等。如果您将 TeamCity 安装在三个或更少的“构建代理”（每个“构建代理”可以运行不同的测试套件，或基于不同的提交工作）。当您密切遵守测​​试驱动的开发实践时，这通常具有最大的价值；然后 CI 服务器运行单元和集成测试，以确保代码完成开发人员认为应该做的一切，加上代码覆盖率，以确保遵循规则并且代码被测试充分执行。

在不同的解决方案中工作并暴露不同但重叠的项目的想法并不是一个好主意。我只将这种方法视为减少托管虚拟机环境中资源需求的一种策略（加载大量项目，尤其是使用 ReSharper 之类的代码分析工具，确实会给旧系统或模拟器/VPC 设置带来负担）。

# c++ - 保存/加载对话框文本文件

> ID：13636480
> 
> 赞同：0
> 
> 时间：2012-11-29T23:09:54.800
> 
> 标签：c++, winapi, load, save

我创建了一个带有一个编辑框和两个按钮的对话框。保存和加载按钮。

单击保存时，我想将编辑框中的文本保存到 txt 文件中，然后加载，将 txt 文件加载到编辑框中。现在保存/加载按钮似乎不起作用。保存按钮似乎创建了一个名为“u”的文件，而不是保存到选定的文件，并且加载按钮在选择文件后不执行任何操作。这是我到目前为止所拥有的：

```
#include <Windows.h>
#include <commdlg.h>
#include <fstream>
#include <string>
#include "resource.h"
using namespace std;

// Globals
HWND ghMainWnd = 0;
OPENFILENAME ofn;

// Handles
static HWND hEditBox    = 0;
static HWND hSaveButton = 0;
static HWND hLoadButton = 0;

// Contains file.
char szFile[100];

void save()
{

    char text[260];

    GetWindowText( hEditBox, text, 260 );

    ofstream saveFile( szFile, ios_base::binary );

    int length = strlen( text );
    saveFile.write( (char*)&length, sizeof(length) );
    saveFile.write( text, length );

}

void load()
{

    char text[260];

    ifstream loadFile( szFile, ios_base::binary );

    int length = 0;
    loadFile.read((char*)&length, sizeof(length));

    loadFile.read( text, length );

    text[length] = '\0';

    SetWindowText( hEditBox, text );
}

BOOL CALLBACK
WndProc( HWND hWnd, UINT msg, WPARAM wParam, LPARAM lParam )
{

    ZeroMemory( &ofn , sizeof( ofn ) );

    ofn.lStructSize     = sizeof( ofn );
    ofn.hwndOwner       = hWnd;
    ofn.lpstrFile       = szFile;
    ofn.lpstrFile[0]    = '\0';
    ofn.nMaxFile        = sizeof( szFile );
    ofn.lpstrFilter     = "All\0*.*\0Text\0*.TXT\0";
    ofn.nFilterIndex    = 1;
    ofn.lpstrFileTitle  = "Open/Save File Dialog";
    ofn.nMaxFileTitle   = 0;
    ofn.lpstrInitialDir = NULL;
    ofn.Flags           = OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST;

    switch( msg )
    {
    case WM_INITDIALOG:
        hEditBox    = GetDlgItem( ghMainWnd, IDC_EDIT );
        hSaveButton = GetDlgItem( ghMainWnd, ID_SAVE );
        hLoadButton = GetDlgItem( ghMainWnd, ID_OPEN );
    return true;

    case WM_COMMAND:
        switch( LOWORD( wParam ) )
        {
        case ID_SAVE:
            GetSaveFileName( &ofn );
            save();
        return true;

        case ID_OPEN:
            GetOpenFileName( &ofn );
            load();
        return true;
        }
    return true;

    case WM_CLOSE:
        DestroyWindow( hWnd );
    return true;

    case WM_DESTROY:
        PostQuitMessage( 0 );
    return true;
    }

    return false;
}

INT WINAPI
WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, PSTR cmdLine, int showCmd )
{

    ghMainWnd = CreateDialog( hInstance, MAKEINTRESOURCE( IDD_TXTDLG ), 0, WndProc );
    ShowWindow( ghMainWnd, showCmd );

    MSG msg;
    ZeroMemory( &msg, sizeof( MSG ) );

    while( GetMessage( &msg, 0, 0, 0 ) )
    {
        if( ghMainWnd == 0 || !IsDialogMessage( ghMainWnd, &msg ) )
        {
            TranslateMessage( &msg );
            DispatchMessage( &msg );
        }
    }

    return (int)msg.wParam;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:20:10.440

查看正在发生的事情的最佳方法是在调用之前显示文件的名称。您可以在调试器中执行此操作并查看它是什么，看看它是否错误。它将帮助您了解问题是否与函数调用或读取名称有关。我不记得 char 可以与 GetWindowText 一起使用（也许在非 Unicode 中可以）。

您还需要添加处理以检查字符串是否为空，以防万一。甚至可以验证名称是否有效。

# magento - Magento 添加有库存或数量 > 1 的随机项目

> ID：13636483
> 
> 赞同：1
> 
> 时间：2012-11-29T23:10:07.937
> 
> 标签：magento, random

我希望过滤仅存货或数量 >= 1 的商品。

我的代码：

```
$_category = Mage::getModel('catalog/category')->load($this->getCategoryId());
$_productCollection = Mage::getResourceModel('catalog/product_collection')
                   ->addAttributeToSelect('*')
                   ->addAttributeToFilter('sku', array('gt' => 140));
$_productCollection->getSelect()->order(new Zend_Db_Expr('RAND()'));                  
$_productCollection->setPage(1, 8); 
```

我试图添加`->addAttributeToFilter('is_in_stock', '1');`但没有运气。

# mysql - mysql的最佳查询

> ID：13636484
> 
> 赞同：1
> 
> 时间：2012-11-29T23:10:10.013
> 
> 标签：mysql, sql, join, self-join

我有一个看起来像这样的表：

```
Table: id, name 
```

一个名字可以多次出现。我试图找出一个最佳查询，它将为每个名称返回其最高 ID。

输入数据：

```
1, "a"
2, "a"
3, "b"
4, "a"
5", "b" 
```

输出：

```
4, "a"
5, "b" 
```

我知道一种在查询的 FROM 部分中使用子查询的方法。我希望我能以某种方式做得更快。

我目前这样做：

```
SELECT table.* 
FROM table, (SELECT MAX(id) maxid FROM table GROUP BY name) maxids 
WHERE table.id = maxids.maxid 
```

我很好奇是否有更快的方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:12:26.980

为什么使用自连接，这应该可以正常工作：

```
select max(id), name
from yourtable
group by name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/27ec8/1)

现在，如果您有更多列想要包含在最终结果中，那么您可以使用以下内容：

```
select t1.id, t1.name, t1.col1
from yourtable t1
inner join
(
  select max(id) id, name
  from yourtable
  group by name
) t2
  on t1.id = t2.id
  and t1.name = t1.name 
```

甚至：

```
select t1.id, t1.name, t1.col1
from yourtable t1
where t1.id in (select max(t2.id)
                from yourtable t2
                group by t2.name); 
```

参见SQL Fiddle [with Demo](http://sqlfiddle.com/#!2/dd824/3)

# asp.net - 从 Windows 服务和 ASP.NET 中的 DLL 进行日志记录

> ID：13636488
> 
> 赞同：1
> 
> 时间：2012-11-29T23:10:44.513
> 
> 标签：asp.net, .net, vb.net

我创建了一个从 Windows 服务、Windows 窗体和 ASP.NET 程序集引用的 .NET DLL。DLL 中包含相当多的日志记录到文本日志文件。从服务和 winforms 来看，这已经足够直截了当，但显然没有像尝试通过 ASP.NET 写入日志文件那样直截了当。

任何人都可以提供一些关于如何解决这个问题的提示吗？我想将日志记录代码保留在 DLL 中，因此在 Windows 服务和 ASP.NET 应用程序之间共享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:56:26.643

这听起来是个坏主意。每当您尝试创建在所有情况下都能神奇地工作的黑盒类型代码时，从长远来看，它总是会导致难以管理的意大利面条式代码。例如，如果有一天您决定需要两个 Windows 服务，它们都使用相同的通用 DLL，但其中一个需要记录到 Windows 事件日志，另一个需要记录到文本文件，该怎么办。现在，让您的 DLL 自动确定它应该如何记录并不那么容易，并且代码变得更加混乱和复杂。

依赖注入 (DI) 非常优雅地解决了这些问题。记录是一个单独的活动，所以它应该由一个单独的记录器类来处理。如果日志记录是在它自己的类中处理的，那么它就会成为使用它的其他类的依赖项。并且类不应该隐藏它们的依赖关系，而应该要求它们被“注入”到它们中。有用于执行 DI 的工具和框架，但只需在构造函数中请求依赖项也可以。

要以 DI 方式执行此操作，您首先需要为您的记录器创建一个接口，例如：

```
Public Interface ILogger
    Sub WriteEntry(message As String)
End Interface 
```

然后，在每个需要执行日志记录的类中，您会在构造函数中请求记录器，例如：

```
Public Class MyBusiness
    Public Sub New(logger As ILogger)
        _logger = logger
    End Sub

    Private _logger As ILogger

    Public Sub DoWork()
        _logger.WriteEntry("Doing work")
    End Sub
End Class 
```

如您所见，现在您已经从业务类中完全删除了有关日志记录内部工作的任何知识，因此可以将实现该接口的任何类提供给它并且它仍然可以工作。这样做是非常自由的。现在，您可以在任何类型的项目中重用该业务类，无论记录这些应用程序可能有什么要求。您可以给它一个写入文本文件的记录器，以及事件日志、数据库、屏幕和电子邮件，您可以命名它们——所有这些都无需触及使用它的业务类。

现在，您可以轻松地创建两个独立的`ILogger`接口实现，一个用于服务，一个用于 ASP.NET 站点：

```
Public Class MyAspLogger
    Implements ILogger

    Public Sub WriteEntry(message As String) Implements ILogger.WriteEntry
        ' Do whatever an ASP project must do to log
    End Sub
End Class 

Public Class MyServiceLogger
    Implements ILogger

    Public Sub WriteEntry(message As String) Implements ILogger.WriteEntry
        ' Do whatever a service project must do to log
    End Sub
End Class 
```

然后从您的 ASP 项目中，您可以像这样创建业务对象：

```
Dim business As New MyBusiness(New MyAspLogger()) 
```

从您的服务项目中，您可以像这样创建它：

```
Dim business As New MyBusiness(New MyServiceLogger()) 
```

理想情况下，您将创建一个为您创建业务对象的工厂类，因此您不必在每次需要创建`MyBusiness`对象时手动创建记录器（以及所有其他依赖项）。

工厂没有具体的实现要求，只是对类进行分类的通用术语。工厂类只是其唯一/主要目的是从其他类实例化对象的任何类。在理想的世界中，使用 DI，您永远不会`New`在代码中的任何地方使用关键字，工厂类除外，但这并不总是实用的。一旦开始声明所有依赖项，您会发现实例化一个对象需要很多行代码，因为您必须首先创建所有依赖项。例如：

```
Dim fileWriter As IFileWriter = New MyFileWriter()
Dim logger As ILogger = New MyServiceLogger(fileWriter)
Dim dataAccess As IDataAccess = New MyDataAccess()
dim business As IBusiness = New MyBusiness(logger, dataAccess)
' Ta da!! I finally have a business object that I can now use 
```

所以，如果你需要`MyBusiness`在同一个项目的多个地方创建对象，那就是大量的复制代码。如果除了方便之外没有其他原因，拥有一个工厂是有意义的，所以你可以这样做：

```
Dim factory As IBusinessFactory = New MyBusinessFactory()
Dim business As IBusiness = factory.NewMyBusiness() 
```

但是，制作工厂类还有许多其他充分的理由。您可能需要创建多个记录器，例如，按需创建 inside `MyBusiness`，因此在这种情况下，`MyBusiness`不能简单地`ILogger`在其构造函数中请求一个，而是可以请求`ILoggerFactory`实现`NewLogger`方法的一个。然后你可以有两个独立的记录器工厂：一个`MyAspLogger`根据请求返回新对象，另一个创建新`MyServiceLogger`对象。因此，这样一来，工厂本身就可以成为其他类的依赖项。

使用工厂的另一个很好的理由是，您会发现实例化所有对象并将它们以不同配置连接在一起的代码本身就是一种特定的业务逻辑，应该以模块化的方式分离出来.

# mysql - Netbeans MySql 数据库连接

> ID：13636490
> 
> 赞同：1
> 
> 时间：2012-11-29T23:10:51.743
> 
> 标签：mysql, database, netbeans

我无法在 Netbeans 中创建与 MySql 数据库的连接。我什么都做不了。

1.  我无法在 Netbeans 中创建 MySql 数据库

我访问了 Netbeans 文档。他们使用的是 Mac，并且引用了我安装 MySQL 时没有附带的文件。他们引用了一些名为 mysql.admin 的文件。我在 Netbeans 的服务选项卡中右键单击数据库，然后单击注册 MySQL 服务器。我应该填写以下表格：

![形式](../Images/7be14a06c069af8b7cfd0a63a7f1ef89.png)

然而，如前所述，我的机器显然没有这个“管理工具”或任何这些程序。

最终，我想将 Derby 数据库迁移到 MySQL。然而，第一步是至少让一个 MySQL 数据库在 Netbeans 中工作......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-23T15:10:51.210

@CodeKingPlusPlus，以及任何面临这个问题的人。如果您使用的是 linux，请在**MySQL 服务器属性**对话框的**管理属性**选项卡中指定的文本框中输入以下内容：

 ****启动命令路径：** /usr/bin/mysql

**参数：** /etc/init.d/mysql start

**停止命令的路径：** /usr/bin/mysql

**参数：** /etc/init.d/mysql 停止

对于**MS Windows**用户，请参阅**bin**文件夹所在的路径。

例如

```
 C:\mysql\bin

     C:\Program Files\MySQL\MySQL Server 5.1\bin

     Installation Folder~\xampp\mysql\bin 
```

另请查看：[https ://stackoverflow.com/a/25662912/2414129](https://stackoverflow.com/a/25662912/2414129)**

# windows - 批处理文件从文件中提取随机字符串并循环随机次数

> ID：13636491
> 
> 赞同：0
> 
> 时间：2012-11-29T23:10:59.827
> 
> 标签：windows, random, for-loop, batch-file

我正在尝试创建一个批处理文件，该文件将在 2 到 10 之间随机循环次数，并每次从文本文件中提取一条随机行并显示它。

```
set var1=%RANDOM%
set /a var2=(var1*9/32768)+2
for /l %%x in (1,1,%var2%) do (
set "lines=0" 
for /f "tokens=*" %%a in (c:\myfile.txt) do set /a "lines+=1" 
set /a "skip=%var1% %% lines" 
if %skip% lss 1 (set "skip=") else (set "skip=skip=%skip%")
for /f "skip=%skip% tokens=*" %%a in (c:\myfile.txt) do set "item=%%a"&goto display

:display
echo %item%
) 
```

这是两段不同的代码，它们各自独立工作，但我无法将它们放在一起。

每次运行时，下面的代码都会显示文件中的随机行。

```
set "lines=0" 
for /f "tokens=*" %%a in (c:\myfile.txt) do set /a "lines+=1" 
set /a "skip=%random% %% lines" 
if %skip% lss 1 (set "skip=") else (set "skip=skip=%skip%") 
for /f "%skip% tokens=*" %%a in (c:\myfile.txt) do set "item=%%a"&goto display 
:display 
echo %item% 
```

此代码将显示 2 到 10 次之间的 1。

```
@echo off
set var1=%RANDOM%
set /a var2=(var1*9/32768)+2
for /l %%x in (1,1,%var2%) do (
echo 1
) 
```

我可能只是忽略了显而易见的事情，但我没有做很多批处理脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:13:11.470

你有几个问题：

*   您在带括号的块（DO 子句）中定义变量`skip`，然后尝试`%skip%`在同一个循环中使用。这是行不通的，因为在解析整个代码块时会扩展变量 - 在设置值之前！通常解决方案是使用延迟扩展，但您不能在 FOR /F 选项中使用延迟扩展。解决方案是在块外调用。

*   您的逻辑对每次迭代使用相同的随机数。我将您声明的要求解释为您希望为每次迭代使用不同的随机数。

*   你的 GOTO 打破了你的 FOR 循环。如果您发出 GOTO，循环将不会进行下一次迭代。

*   你的计算`var2`不好。如果`%RANDOM%*9`超过 4 字节有符号整数的最大值，它可能会失败。我也不认为它给出了你想要的价值分布。您应该像使用随机行号一样使用 mod 运算符。

*   SKIP 选项的值必须 >= 1。如果您想要 0，则必须完全忽略该选项。您的隔离代码可以正确执行此操作，但是您损坏的代码是，嗯，损坏了:-)

其他改进：

*   每次迭代计算文件中的行数。你只需要这样做一次。

*   使用 FIND 计算行数并使用 FOR /F 捕获值效率更高。FOR /F 忽略空行，因此我使用 FINDSTR 查找所有非空行，并将这些结果通过管道传递给 FIND 以获取计数。

*   使用`TOKENS=*`将去除前导空格，而`DELIMS=`将保留整行。

*   默认的 EOL 选项是`EOL=;`，这意味着任何以开头的行都`;`将被忽略。将 EOL 设置为空需要在每个空格之前使用插入符号且相等且不带引号的奇怪语法。

*   我在文件名周围添加了引号并添加了 USEBACKQ 选项，以防您的文件名包含空格。

这是一个有效的解决方案

```
@echo off
setlocal
set "file=c:\myfile.txt"
for /f %%N in ('findstr "." "%file%"^|find /c /v ""') do set lines=%%N
set /a "iterations=%random% %% 8 + 2"
for /l %%N in (1 1 %iterations%) do call :printRandomLine
exit /b

:printRandomLine
set /a "skip=%random% %% %lines%"
if %skip% lss 1 (set "skip=") else set "skip=skip^=%skip%"
for /f usebackq^ %skip%^ delims^=^ eol^= %%A in ("%file%") do (
  echo %%A
  exit /b
) 
```

# dependency-injection - 我可以根据 Open Generic 的类型为 AutoFac 提供密钥服务吗

> ID：13636492
> 
> 赞同：1
> 
> 时间：2012-11-29T23:11:03.397
> 
> 标签：dependency-injection, inversion-of-control, decorator, autofac, command-pattern

我想为我的 Open Generic ICommandHandler 创建一个基于 T 的 keyedService。当 ICommandHandler 有一个继承自 ConsultantCommand 的 T 时，我想注册一个 ConsultatCommandHanlder 键控服务

知道怎么做吗？或者如果它甚至可能？我是 AutoFac 的新手并且正在苦苦挣扎。

我目前正在像这样注册 CommandHandler：

```
 //Register All Command Handlers
        builder.RegisterAssemblyTypes(assemblies)
          .As(
              t =>
              t.GetInterfaces()
               .Where(a => a.IsClosedTypeOf(typeof (ICommandHandler<>)))
               .Select(a => new KeyedService("commandHandler", a))).InstancePerHttpRequest(); 
```

如果可能的话，我猜我必须在获得 Closed Type 时识别 CommandHandlers，并以某种方式识别 Command 实现 ConsultantCommand 的那些。

我试过了：

```
 builder.RegisterAssemblyTypes(assemblies)
               .As(
                 t =>
                   t.GetInterfaces()
                    .Where(a => a.IsClosedTypeOf(typeof(ICommandHandler<>)) &&
                        a.GetGenericArguments()[0].IsSubclassOf(typeof(ConsultantCommand)))
                    .Select(a => new KeyedService("ConsultantCommandHandler", a))).InstancePerHttpRequest(); 
```

但不是喜悦似乎不起作用。它可以编译，但现在没有注册 CommandHandlers，即使是那些继承自 ConsultantCommand 的。我认为我的语法都是错误的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:41:17.567

首先，您需要确保您`ICommandHandler<T>`的声明支持协方差：

```
public interface ICommandHandler<out T> { } 
```

这`out`很重要，否则您将无法`ConsultantCommand`一次解决所有处理程序。您还将获得 Autofac 异常。

接下来，使用`Named`扩展方法注册您的命名服务，而不是自己做。语法将如下所示：

```
builder.RegisterAssemblyTypes(assemblies)
       .Where(t =>
                t.IsClosedTypeOf(typeof(ICommandHandler<>)) &&
                t.GetInterfaces()[0]
                 .GetGenericArguments()[0]
                 .IsAssignableTo<ConsultantCommand>())
       .Named("name", typeof(ICommandHandler<ConsultantCommand>))
       .InstancePerHttpRequest(); 
```

这会将派生自`ICommandHandler<T>`的所有服务注册为. 您必须使用基本类型，否则您将无法一次解析所有处理程序。没有任何方法可以“解析从该基类型派生的所有服务”。也没有办法解决开放泛型列表。`T``ConsultantCommand``ICommandHandler<ConsultantCommand>`

当您解析处理程序列表时，您需要解析一个命名的`IEnumerable<T>`：

```
using(var scope = container.BeginLifetimeScope())
{
  var x =
    scope.ResolveNamed<IEnumerable<ICommandHandler<ConsultantCommand>>>("name");
} 
```

当然，你正在使用`InstancePerHttpRequest`它更像是：

```
var x =
  AutofacDependencyResolver
    .Current
    .RequestLifetimeScope
    .ResolveNamed<IEnumerable<ICommandHandler<ConsultantCommand>>>("name"); 
```

如上所述，您必须注册为封闭的泛型，因为这不起作用：

```
// WON'T WORK:
scope.ResolveNamed<IEnumerable<ICommandHandler<>>>("name"); 
```

您可以根据需要修改注册等。其余的注册扩展应该像往常一样工作——如果你想将事物注册为实现的接口或其他任何东西，它应该`RegisterAssemblyTypes`像你使用单个服务一样工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:12:48.987

你要：

```
builder.RegisterAssemblyTypes(assemblies)
       .AsClosedTypesOf(typeof(ICommandHandler<>))
       .AsSelf()
       .AsImplementedInterfaces()
       .InstancePerHttpRequest(); 
```

# xpages - 页面加载时触发按钮 onClick 事件

> ID：13636499
> 
> 赞同：0
> 
> 时间：2012-11-29T23:12:02.873
> 
> 标签：xpages

我有一个 xpage，我在其中添加了一个按钮。该按钮有一个操作组和其他操作。

出于某种原因，该事件在页面加载时触发。我没有任何页面加载事件。按钮是核心控件，而不是dojo 按钮。

```
<xp:button id="button1" value="Approve Receiving Sheet"
    style="font-family:Arial;font-size:9pt;font-style:italic;width:180.0px"
    styleClass="button1">
<xp:eventHandler event="onclick" submit="true"  refreshMode="complete"     
     immediate="false" save="true"><xp:this.action><xp:actionGroup> 
<xp:this.condition>
 <![CDATA[#{javascript:var lookup = document1.getDocument().getUniversalID()
 var checkInvoices:string
 checkInvoices = @DbLookup("", "(Invoices by RS UNID)", lookup, 2)
 var returnValue = @If(@Implode(checkInvoices) == "", false, true)
 if(returnValue == false)
 {
    var x="alert('msg to user');"
    view.postScript(x)  
    return false
 }

 return true}]]></xp:this.condition><xp:confirm> 
```

其他操作遵循条件操作。将按钮从按钮更改为提交不会做任何事情。后记消息显示为真或假，这就是我将其移至 if 语句的原因。在此先感谢，史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:52:49.183

**编辑：我的第一个答案不正确！这是第二个：**

一旦调用了 actionGroup 中的操作之一，就会计算条件。这意味着只要“无事可做”，你的条件就不会被执行。

但是您添加了一个*确认*动作：这种类型的动作会生成一个 CSJS 代码块，并在呈现之前检查动作组的*条件（也就是发送到浏览器）。*这就是执行您的 CSJS 警报的原因。

PS如果您多次单击该操作并将条件设置为false，则无论如何都会出现确认消息。这似乎是一个错误。

# asp.net - 在 Chrome 中查看时，asp.net + 文本框值卡住

> ID：13636503
> 
> 赞同：0
> 
> 时间：2012-11-29T23:12:12.873
> 
> 标签：asp.net

我有一个登录和注册表单，当我加载我的注册表单时，我的最后一个登录用户名和密码已预先填充在我的 2 个不相关的字段中。我尝试清除浏览器缓存、历史记录、更改字段的 ID，但没有帮助。它预先填充在我的邮政编码和密码字段中。如果我删除这两个字段中的任何一个，其他字段就会成为受害者。有谁知道是什么问题？它只发生在 Chrome 中。谢谢。

```
<fieldset id="inputs">
                        <asp:TextBox ID="username" CssClass="username" placeholder="Username" required runat="server" />
                        <asp:RequiredFieldValidator ID="UsernameRequired" runat="server" ControlToValidate="username" 
                                                    CssClass="failureNotification" Display="Dynamic" ErrorMessage="UserName is required." ToolTip="UserName is required." 
                                                    ValidationGroup="RegisterUserValidationGroup"  >*</asp:RequiredFieldValidator>
                        <asp:TextBox ID="email" CssClass="email" placeholder="Email" required runat="server" />    
                        <asp:RequiredFieldValidator ID="EmailRequired" runat="server" ControlToValidate="email" 
                                                    CssClass="failureNotification" Display="Dynamic" ErrorMessage="Email is required." ToolTip="Email is required." 
                                                    ValidationGroup="RegisterUserValidationGroup"  >*</asp:RequiredFieldValidator>
                        <asp:RegularExpressionValidator CssClass="failureNotification"
                                                        ID="EmailExpression" runat="server" ErrorMessage="Invalid Email Format." 
                                                        ValidationExpression="\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*" ControlToValidate="email" Display="Dynamic" ToolTip="Email format is invalid."
                                                        ValidationGroup="RegisterUserValidationGroup">!</asp:RegularExpressionValidator> 
                        <asp:TextBox ID="Zipcode" CssClass="Zipcode" placeholder="Zip / Postal Code" required runat="server" />  
                        <asp:RequiredFieldValidator ID="ZipcodeRequired" runat="server" ControlToValidate="Zipcode" 
                                                    CssClass="failureNotification" Display="Dynamic" ErrorMessage="Postal Code is required." ToolTip="Postal Code is required." 
                                                    ValidationGroup="RegisterUserValidationGroup"  >*</asp:RequiredFieldValidator>  
                        <asp:CustomValidator ID="ctvLastVisitDuration" runat="server" ClientValidationFunction="calculateCoordinates"
                                             ControlToValidate="Zipcode" ErrorMessage="Unable to locate address!"
                                             Display="Dynamic" 
                                             ValidationGroup="RegisterUserValidationGroup"></asp:CustomValidator>

                        <asp:TextBox ID="password" CssClass="password" TextMode="Password" placeholder="Password" required
                                     AssociatedControlID="Password" runat="server" />
                        <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password" 
                                                    SetFocusOnError="true" CssClass="failureNotification" Display="Dynamic" 
                                                    ValidationGroup="RegisterUserValidationGroup" ToolTip="Password is required.">*</asp:RequiredFieldValidator>
                        <asp:TextBox ID="ConfirmPassword" CssClass="password" TextMode="Password" placeholder="Comfirm Password" required
                                     AssociatedControlID="Password"  runat="server" />
                        <asp:RequiredFieldValidator ControlToValidate="ConfirmPassword" CssClass="failureNotification" Display="Dynamic" 
                                                    ErrorMessage="Confirm Password is required." ID="ConfirmPasswordRequired" runat="server" 
                                                    ToolTip="Confirm Password is required."
                                                    ValidationGroup="RegisterUserValidationGroup">*</asp:RequiredFieldValidator>
                        <asp:CompareValidator ID="PasswordCompare" runat="server" ControlToCompare="Password" ControlToValidate="ConfirmPassword" 
                                              CssClass="failureNotification" Display="Dynamic" ErrorMessage="The Password and Confirmation Password must match."
                                              ValidationGroup="RegisterUserValidationGroup" >!</asp:CompareValidator>
                    </fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:41:47.497

TextBox 具有 AutoCompleteType="None" 属性，但我总是使用 javascript：

```
function removeAutoComplete(){
   $('input:[type="text"]').each(function(){this.autocomplete='off';});   
}

Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(removeAutoComplete); 
```

或者

```
$(document).ready(function(){removeAutoComplete();}); 
```

您也可以通过 id 或 class 在带有 jquery 的页面上找到您的文本框。

```
$('input:[type="text"]:[id="inputId"]')  
$('input:[type="text"]:[class="inputClass"]') 
```

# html - XSLT 和嵌套元素

> ID：13636504
> 
> 赞同：2
> 
> 时间：2012-11-29T23:12:16.220
> 
> 标签：html, xslt, xhtml

鉴于下面的 XSL 模板和 XML，这是我试图实现的 HTML 输出（或多或少）：

```
<p>
foo goes here
  <span class="content"><p>blah blah blah</p><p>blah blah blah</p></span>
bar goes here
  <span class="content">blah blah blah blah blah blah</span> 
</p> 
```

以下是实际呈现的内容（缺少 <span.content> 的全部内容）：

```
<p>
foo goes here
  <span class="content"></span>
bar goes here
  <span class="content">blah blah blah blah blah blah</span> 
</p> 
```

这是我的模板（片段）：

```
 <xsl:template match="note[@type='editorial']">
   <span class="content">
     <xsl:apply-templates />
   </span>
 </xsl>
 <xsl:template match="p">
   <p>
     <xsl:apply-templates />
   </p>
 </xsl> 
```

这是我的xml：

```
<p>
foo goes here
  <note type="editorial"><p>blah blah blah</p><p>blah blah blah</p></note>
bar goes here
  <note type="editorial">blah blah blah blah blah blah</note> 
</p> 
```

**渲染特定元素并不重要。**IE。我不在乎是否渲染了 <p> 或 <div> 或 <span>，只要没有丢失任何文本元素。我想避免创建一个特定的规则来匹配“p/note/p”，假设 <note> 元素可以包含任意子元素。

我完全是 xsl 的菜鸟，所以任何额外的提示或指针都会非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:54:21.913

好的，所以我只是大惊小怪，这是我最终想出的解决方案。

嵌套的 <p> 标签不起作用。您的浏览器不喜欢它们，XSLT 也不喜欢它们。所以，我把所有东西都换成了 <divs> 和 <spans>

另外，我在模板的末尾添加了几个包罗万象的模板。

这是对我的目的来说运行良好的最终版本：

```
<xsl:template match="note[@type='editorial']">
   <span class="content">
     <xsl:apply-templates />
   </span>
</xsl:template>

<xsl:template match="p">
  <div class="para">
    <xsl:apply-templates />
  </div>
</xsl:template>

<xsl:template match="*">
  <xsl:apply-templates />
</xsl:template>

<xsl:template match="text()">
  <xsl:value-of select="." />
</xsl:template> 
```

H T：

[http://www.dpawson.co.uk/xsl/sect2/defaultrule.html](http://www.dpawson.co.uk/xsl/sect2/defaultrule.html)

以及[xsl:apply-templates 如何仅匹配我定义的模板？](https://stackoverflow.com/questions/346362/how-can-xslapply-templates-match-only-templates-i-have-defined#346444)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:35:26.043

您应该使用`apply-templates`而不是`apply-template`：

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="note[@type='editorial']">
        <span class="content">
            <xsl:apply-templates/>
        </span>
    </xsl:template>
    <xsl:template match="p">
        <p>
            <xsl:apply-templates />
        </p>
    </xsl:template>
 </xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:33:59.530

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
    <xsl:apply-templates select="p"/>
    </xsl:template>
    <xsl:template match="p">
    <p>
    <xsl:apply-templates/>
    </p>
    </xsl:template>
    <xsl:template match="span">
     <note type="editorial">
     <xsl:choose>
     <xsl:when test="child::*">
     <xsl:copy-of select="child::*"/>
     </xsl:when>
     <xsl:otherwise>
                <xsl:value-of select="."/>
    </xsl:otherwise>
    </xsl:choose>
    </note>
    </xsl:template>
    <xsl:template match="text()">
    <xsl:copy-of select="."/>
    </xsl:template>
</xsl:stylesheet> 
```

# php - 代码点火器商店 goCart 未访问任何控制器

> ID：13636505
> 
> 赞同：1
> 
> 时间：2012-11-29T23:12:21.637
> 
> 标签：php, codeigniter

我正在尝试将商店添加到我已经存在的代码点火器安装中，但是我不想尝试将其添加到我现有的代码点火器中，而只是将[gocart](http://gocartdv.com/)放入子目录 /store 中。

我已经全部安装并计算出 .htaccess 文件需要一个 ? 在 index.php 之后为了摆脱识别的无输入文件，这似乎修复了无输入文件 404 错误，但是现在当我尝试转到 gocart 的任何控制器时，它显示相同的页面。这是测试商店[链接](http://www.lclamar.com/store)的链接，如果您单击登录或查看我的购物车，则没有任何实际变化或显示任何其他视图。有点迷失了，因为这一切都可以在完全相同的站点构建的本地主机上正常工作。

我的 .htaccess 文件看起来像这样，似乎可以摆脱无输入错误，但现在不会正确处理任何其他控制器或任何东西。

```
 <IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /store
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ index.php?/$1 [L]
 </IfModule> 
```

甚至这种风格的 .htaccess 也是如此......

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /store/index.php?/$1 [L]
</IfModule> 
```

任何关于测试或发现发生了什么的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:03:04.270

我找到了似乎对我有用的答案。我确实像上面评论中提到的那样编辑了基本 URL，但使它起作用的是将 gocart/config/config.php 文件中的 uri_protocol 更改为 AUTO 。

```
$config['uri_protocol'] = 'AUTO'; 
```

代替

```
$config['uri_protocol'] =  'PATH_INFO' 
```

出于某种原因，我认为 goCart 会将其默认为 AUTO，但从外观上看，它默认为 PATH_INFO。瞧，它起作用了。愚蠢的我，我看着那一点点。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:53:48.710

您应该将访问排除添加到某个目录，试试这个：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond $1 !^(index\.php|store)
    RewriteRule ^(.*)$ /index.php?/$1 [L]
</IfModule> 
```

# mod-rewrite - Yii 从 URL 中删除应用程序目录名称

> ID：13636511
> 
> 赞同：2
> 
> 时间：2012-11-29T23:12:32.967
> 
> 标签：mod-rewrite, yii, appfog

好吧，这似乎是一个很常见的问题，但我在论坛上找不到明确的解决方案。

我的 Yii 是这样设置的

```
/webroot/framework
/webroot/app
/webroot/requirements 
```

app 文件夹托管 yii 应用程序

但是我的网址看起来像：site[dot]com/app/site/index

如何从 URL 中删除“应用程序”部分。

我尝试将我的 .htaccess 文件移动到 webroot 文件夹并重定向，但 'app' 仍然显示在 url

这是/webroot/.htaccess的内容

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /

  # need this for AMZN ELB or get a infinite redirect loop 
  RewriteCond %{HTTP:X-Forwarded-Proto} !https
  RewriteCond %{SERVER_NAME} !^localhost$
  RewriteRule (.*) %{HTTP_HOST}%{REQUEST_URI} [L]

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d

  RewriteRule . /app/index.php 
</IfModule> 
```

如果我可以将我的 webroot 更改为 /webroot/app 但我无法控制，我会很容易。谢谢你的帮助..

这是在 appfog 上启动的，因此我无法控制 webroot，或者让框架文件夹位于 webroot 上方的一个目录中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-28T19:18:37.343

我通过像 config/main.php 这样的配置解决了这个问题，然后输入：

```
'request'=>array(
        'baseUrl'=>'',

    ),
     'urlManager'=>array(
        'baseUrl'=>'',
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'appendParams' => true,
        'rules'=>array(

        ),
    ),  'request'=>[
        'baseUrl'=>'',

    ],
     'urlManager'=>array(
        'baseUrl'=>'',
        'urlFormat'=>'path',
        'showScriptName'=>false,
        'appendParams' => true,
        'rules'=>array(

        ),
    ), 
```

刚回到 Yii 又遇到了这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T17:57:36.270

May be you can move all files from /webroot/app to /webroot/ (and place yii at /webroot/yii).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T06:48:50.617

我发布了一个[类似的问题](https://stackoverflow.com/questions/16430006/running-yii-from-subdir-remove-subdir-with-htacces-while-css-js-and-existin)。但是，将“应用程序”内容放在 webroot/ 中不是我的选择，因为我需要它是可移植的，并且在不久的将来，我将在 webroot/ 中运行其他“应用程序”在同一个 webroot/框架上。

我设法将 example.com 重定向到 example.com/app 并从 URL 中删除了 /app 部分。我被重定向到默认控制器/操作。但是，当我单击指向（例如）example.com/site/login 的链接时，它仍然会将我带到默认控制器/操作。

我的 webroot/.htaccess 看起来像这样：

```
RewriteEngine on

RewriteCond $1 !^application/
# if a directory or a file exists, use it directly
RewriteCond %{DOCUMENT_ROOT}/application/$1 -f [OR]
RewriteCond %{DOCUMENT_ROOT}/application/$1 -d
RewriteRule ^(.*)$ application/$1 [L]

# otherwise forward it to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{HTTP_HOST} ^(www.)?example.com$
# RewriteRule ^.*$ application/index.php does not 'remove' the directory with this??
RewriteRule ^$ application [L] 
```

也许它可以帮助你？而且由于我不是 .htaccess 专家，我想知道您现在是否找到了更好的解决方案？

# c++ - 静态链接 libstdc++：有什么问题吗？

> ID：13636513
> 
> 赞同：100
> 
> 时间：2012-11-29T23:12:41.887
> 
> 标签：c++, linux, gcc, static-libraries, libstdc++

我需要将基于 Ubuntu 12.10 和 GCC 4.7 的 libstdc++ 构建的 C++ 应用程序部署到运行 Ubuntu 10.04 的系统上，该系统带有相当旧版本的 libstdc++。

目前，我正在编译`-static-libstdc++ -static-libgcc`，正如这篇博文所建议的那样：[静态链接 libstdc++](https://web.archive.org/web/20160313071116/http://www.trilithium.com/johan/2005/06/static-libstdc/)。作者警告不要在静态编译 libstdc++ 时使用任何动态加载的 C++ 代码，这是我尚未检查的内容。尽管如此，到目前为止一切似乎都很顺利：我可以在 Ubuntu 10.04 上使用 C++11 功能，这正是我所追求的。

我注意到这篇文章是从 2005 年开始的，从那时起可能已经发生了很大的变化。它的建议是否仍然有效？有什么我应该注意的潜在问题吗？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-12-29T14:22:57.957

那篇博文很不准确。

> 据我所知，GCC 的每个主要版本都引入了 C++ ABI 更改（即具有不同的第一或第二版本号组件的版本）。

不对。自 GCC 3.4 以来引入的唯一 C++ ABI 更改是向后兼容的，这意味着 C++ ABI 已经稳定了近九年。

> 更糟糕的是，大多数主要的 Linux 发行版都使用 GCC 快照和/或修补它们的 GCC 版本，这使得在分发二进制文件时几乎不可能确切地知道您可能正在处理的 GCC 版本。

发行版的 GCC 补丁版本之间的差异很小，并且 ABI 没有变化，例如 Fedora 的 4.6.3 20120306（Red Hat 4.6.3-2）与上游 FSF 4.6.x 版本的 ABI 兼容，几乎可以肯定与任何 4.6 兼容。 x 来自任何其他发行版。

在 GNU/Linux GCC 的运行时库使用 ELF 符号版本控制，因此很容易检查对象和库所需的符号版本，如果您有一个`libstdc++.so`提供这些符号的符号，它将起作用，它是否是一个稍微不同的补丁版本都没关系从您的发行版的另一个版本。

> 但是如果要工作，则不能动态链接 C++ 代码（或任何使用 C++ 运行时支持的代码）。

这也不是真的。

也就是说，静态链接`libstdc++.a`是您的一种选择。

如果您动态加载库（使用 ），它可能不起作用的原因`dlopen`是，当您（静态）链接它时，您的应用程序可能不需要它所依赖的 libstdc++ 符号，因此这些符号不会出现在您的可执行文件中。这可以通过将共享库动态链接到来解决`libstdc++.so`（如果它依赖于它，这无论如何都是正确的做法。）ELF符号插入意味着您的可执行文件中存在的符号将被共享库使用，但其他符号不会存在于您的可执行文件中的内容将在`libstdc++.so`它链接到的任何地方找到。如果您的应用程序不使用`dlopen`，则无需关心。

另一种选择（也是我更喜欢的选择）是将更新`libstdc++.so`的应用程序与您的应用程序一起部署并确保在默认系统之前找到它`libstdc++.so`，这可以通过强制动态链接器查找正确的位置来完成，或者`$LD_LIBRARY_PATH`在运行时使用环境变量-时间，或者通过`RPATH`在链接时在可执行文件中设置一个。我更喜欢使用`RPATH`它，因为它不依赖于为应用程序正确设置的环境。如果您将应用程序与`'-Wl,-rpath,$ORIGIN'`（注意单引号以防止外壳尝试扩展）链接，`$ORIGIN`那么可执行文件将有一个告诉动态链接器在与可执行文件本身相同的目录中查找共享库。如果你把较新的`RPATH``$ORIGIN``libstdc++.so`在与可执行文件相同的目录中，它将在运行时找到，问题已解决。（另一种选择是将可执行文件`/some/path/bin/`和较新的 libstdc++.so 放入`/some/path/lib/`并链接到`'-Wl,-rpath,$ORIGIN/../lib'`或相对于可执行文件的任何其他固定位置，并将 RPATH 设置为相对于`$ORIGIN`）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-26T13:52:56.467

Jonathan Wakely 出色回答的一个补充，为什么 dlopen() 有问题：

由于 GCC 5 中的新异常处理池（请参阅[PR 64535](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=64535)和[PR 65434](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=65434)），如果您 dlopen 和 dlclose 静态链接到 libstdc++ 的库，则每次都会出现（池对象的）内存泄漏。因此，如果您有任何机会使用 dlopen，那么静态链接 libstdc++ 似乎是一个非常糟糕的主意。[请注意，这是一个真正的泄漏，而不是PR 65434](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=65434)中提到的良性泄漏。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T23:34:36.680

您可能还需要确保不依赖动态 glibc。在生成的可执行文件上运行`ldd`并记下任何动态依赖项（libc/libm/libpthread 是常用的嫌疑人）。

额外的练习将是使用这种方法构建一堆涉及的 C++11 示例，并在真正的 10.04 系统上实际尝试生成的二进制文件。在大多数情况下，除非您对动态加载做了一些奇怪的事情，否则您会立即知道程序是正常运行还是崩溃。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-19T17:24:05.743

Jonathan Wakely 关于 RPATH 的回答的附加组件：

**只有当相关的 RPATH 是正在运行的应用程序**的 RPATH 时，RPATH 才会起作用。如果您有一个通过其自己的 RPATH 动态链接到任何库的库，则该库的 RPATH 将被加载它的应用程序的 RPATH 覆盖。当您不能保证应用程序的 RPATH 与您的库的相同时，这是一个问题，例如，如果您希望您的依赖项位于特定目录中，但该目录不是应用程序 RPATH 的一部分。

例如，假设您有一个应用程序 App.exe，它对 GCC 4.9 的 libstdc++.so.x 具有动态链接依赖项。App.exe 通过 RPATH 解决了这种依赖关系，即

```
App.exe (RPATH=.:./gcc4_9/libstdc++.so.x) 
```

现在假设有另一个库 Dependency.so，它对 GCC 5.5 的 libstdc++.so.y 具有动态链接的依赖关系。这里的依赖是通过库的RPATH解决的，即

```
Dependency.so (RPATH=.:./gcc5_5/libstdc++.so.y) 
```

当 App.exe 加载 Dependency.so 时，**它既不附加也不预置 library 的 RPATH**。它根本不咨询它。唯一考虑的 RPATH 将是正在运行的应用程序的 RPATH，或本示例中的 App.exe。这意味着如果库依赖于 gcc5_5/libstdc++.so.y 中但不在 gcc4_9/libstdc++.so.x 中的符号，则库将无法加载。

这只是一个警告，因为我过去自己也遇到过这些问题。RPATH 是一个非常有用的工具，但它的实现仍然存在一些问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-27T19:16:30.903

我想在 Jonathan Wakely 的回答中添加以下内容。

在 linux 上玩耍`-static-libstdc++`，我遇到了`dlclose()`. 假设我们有一个静态链接到的应用程序“A” `libstdc++`，它在运行时加载动态链接到`libstdc++`插件“P”。没关系。但是当'A'卸载'P'时，会发生分段错误。我的假设是卸载后`libstdc++.so`，“A”不再可以使用与`libstdc++`. 请注意，如果“A”和“P”都静态链接到`libstdc++`，或者如果“A”是动态链接而“P”是静态链接，则不会出现问题。

摘要：如果您的应用程序加载/卸载可能动态链接到的插件，则`libstdc++`该应用程序也必须动态链接到它。这只是我的观察，我想听听你的意见。

# javascript - 退出当前调用堆栈 Javascript

> ID：13636514
> 
> 赞同：2
> 
> 时间：2012-11-29T23:12:43.490
> 
> 标签：javascript, parse-platform

我想在javascript中退出我当前的调用堆栈，以免爆炸调用堆栈大小，但我无权访问`setTimeout()`调用，即：

`setTimeout`我的环境中不存在该功能:)

当我达到调用堆栈大小限制时，我仍然需要退出当前调用堆栈。

环境是“parse.com”和 CloudCode 模块，如果有人知道背后运行的是什么，那也有帮助！

有什么猜测吗？

PS：这并不是因为您唯一知道的就是网络浏览器环境和 DOM 节点操作，或者更糟糕的 Javascript，您需要 -1 这个问题，这个问题真的很中肯。并非每个功能都在任何地方实现。PS2：没有附加源代码，因为它更像是一个理论问题而不是应用问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:25:19.423

Javascript 支持抛出异常对象（实际上可以是任何东西），它可以尽可能多地退出调用堆栈。这个 MDN 页面可能有一些用处：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/try...catch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:56:14.767

基于 JayC 的回答，您可以保留要调用的函数队列，并循环运行它们。您将在循环中捕获“退出调用堆栈”异常并运行下一个函数。

该`nextTick`函数会将其参数附加到队列中。

```
var queue = [];

function nextTick(f) {
    queue.push(f);
}

while (queue.length > 0) {
    try {
        var fun = queue.shift();
        fun();
    }
    catch (ex) {
        if (ex !== 'exit callstack') {
            // Handle "real" exceptions here
        }
    }
} 
```

我还没有测试过代码，但这个想法应该可行。当然，一个警告是您不能在异步函数中使用异常处理（除非您检查并重新抛出“退出调用堆栈”异常）。

# facebook-graph-api - 统计事件 FQL 中列表的用户数

> ID：13636515
> 
> 赞同：0
> 
> 时间：2012-11-29T23:12:45.097
> 
> 标签：facebook-graph-api, facebook-fql

我有一个使用我的 Facebook 应用程序的用户列表（id1、id2、id3、... idn）。

我想使用 FQL 命令了解我的用户正在参加哪些活动以及有多少用户参加了此活动。

我尝试使用：

```
SELECT eid, COUNT(eid) AS users 
FROM event_member
 WHERE rsvp_status = 'attending' 
 AND uid IN (id1, id2, id3, ... idn) 
```

但是 FQL 不支持 COUNT 命令，有人可以帮忙吗？

我正在使用 Java 来制作这个收集器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:21:24.380

您不能仅在 FQL 中进行计数。您需要使用查询结果在底层程序中填充一个数组，并获取数组的长度/计数。

对于您的特定问题，表中有一个`attending_count`字段[`event`](https://developers.facebook.com/docs/reference/fql/event)，这可能是您所追求的。

# css - 如何在超宽网页上居中水平滚动条？

> ID：13636516
> 
> 赞同：0
> 
> 时间：2012-11-29T23:12:50.297
> 
> 标签：css, scroll, horizontal-scrolling

试图弄清楚如何创建一个宽度为：1500% 的跨浏览器网页；它首先在中心打开，而不是向左打开。我在网上搜索过，发现只有一个参考（在 stackoverflow 上）有人得到了这种效果，但想改变它。他/她没有发布他们的原始代码。

我试过 html 中心标签， css text-align: center; 负边距和填充、定位、html 名称标签（我猜只适用于垂直行业）。边距：自动；在 Safari 中有所帮助，但在其他方面没有帮助。

有人有想法么？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:35:55.283

您需要使用 javascript：

```
document.getElementById​​("scroller").scrollLeft = 100;​ 
```

根据页面结构和大小，您可能会首先看到页面的左侧，但在这种情况下，您应该能够隐藏内容，直到设置滚动位置之后。

# javascript - Google Map API v3 - 在 FF、Chrome 但不是 IE 9 中工作的地图

> ID：13636522
> 
> 赞同：1
> 
> 时间：2012-11-29T23:13:20.560
> 
> 标签：javascript, google-maps, internet-explorer-9

我似乎遇到了与我看到的其他一些问题相反的问题。我一直在使用 GM API v3，它在 FF (v16) 和 Chrome (v23) 中运行良好，但它不会在 IE(9) 中显示。

我仍在尝试学习 Javascript，所以我假设这就是问题所在，但我几乎使用了 Google 提供的示例脚本。我也知道 FF 是更宽容的浏览器，但我已经验证了我的 HTML 代码，它看起来很干净。在过去几天搞砸了这个之后，我正式被难住了，并且肯定可以使用比我聪明得多的人的帮助（这不应该太难！）。

这是网址： http: [//www.conleym.com/map/ced/directions.html](http://www.conleym.com/map/ced/directions.html)

如果有人愿意看一看，我一定会很感激的！

# entity-framework - Breeze 中的多对多关系

> ID：13636528
> 
> 赞同：8
> 
> 时间：2012-11-29T23:13:57.267
> 
> 标签：entity-framework, many-to-many, breeze

> 我正在使用 EF5 Code First 定义我的一些模型 atm。我有这三个具有多对多关系的示例类：
> 
> ```
> public class Team
>     {
>         [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
>         public int Team_Id { get; set; }
>         [MaxLength(150)]
>         public string TeamName { get; set; }
> 
>         public virtual ICollection<User> Users { get; set; }
>         [public virtual ICollection<Role> Roles { get; set; }  // 1
> 
>         [Timestamp]
>         public byte[] TimeStamp { get; set; }
>     }
> 
> public class User
>     {
>         [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
>         public int User_Id { get; set; }
>         [MaxLength(150)]
>         public string LoginName { get; set; }
>         [MaxLength(150)]
>         public string Nachname { get; set; }
>         [MaxLength(150)]        
>         public string Vorname { get; set; }
> 
>         public virtual ICollection<Team> Teams { get; set; } 
>         public virtual ICollection<Role> Roles { get; set; }   // 2
> 
>         [Timestamp]
>         public byte[] TimeStamp { get; set; }
>     }
> 
> public class Role
>     {
>         [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
>         public int Role_Id { get; set; }
>         [MaxLength(50)]
>         public string RoleName { get; set; }
> 
>         [Timestamp]
>         public byte[] TimeStamp { get; set; }
>     } 
> ```
> 
> 如您所见，团队和用户之间存在多对多的关系。我试图让它工作几个小时。我总是在 VS 2012 中收到带有错误消息“错误导航属性”的 JS 异常。起初我以为是用户/团队类中的 ICollections 团队/用户，但事实并非如此。问题似乎是两个调用 1) 和 2)。我删除其中任何一个都可以。重命名一个并保持两个字段都处于活动状态仍然会引发错误。也许有人知道发生了什么。
> 
> 非常感谢

此问题由 SirSmackalot 在我们的 IdeaBlade 论坛上发布。我在这里重新发布问题和答案，因为我认为它对 Breeze Stack Overflow 社区很有用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T23:13:57.267

Breeze 还不支持隐藏映射表的多对多关系。问题是 Breeze 依赖于“外键”概念来跟踪关系，而这不适用于在实体框架中定义为没有有效负载的多对多关系。

起作用的是将多对多关系更改为与链接实体的两个一对多关系。基本上，只需将映射表公开为另一种实体类型。例如：

团队——TeamUser（一对多）

用户——TeamUser（一对多）

我们确实计划在以后的版本中支持实体框架的官方多对多关系，但我们需要优先考虑这一点。[因此，请使用网站上的反馈机制（ https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/filters/top](https://breezejs.uservoice.com/forums/173093-breeze-feature-suggestions/filters/top) ）添加/投票支持此功能请求。这有助于我们决定接下来要关注哪些功能。

# asp.net-mvc-4 - Google Plus 的 ASP.Net MVC OAuthWebSecurity 身份验证

> ID：13636531
> 
> 赞同：0
> 
> 时间：2012-11-29T23:14:11.740
> 
> 标签：asp.net-mvc-4, oauth-2.0, google-plus

我正在开发一个 ASP.Net MVC 4 应用程序，并正在利用 MVC 的 OAuthWebSecurity 来合并 OAuth 提供程序以进行身份​​验证。我的应用需要能够访问经过身份验证的用户的朋友。我可以通过 Facebook 和 Twitter 成功地做到这一点。我的下一个挑战是使用 OAuthWebSecurity 的 GoogleClient 进行身份验证。是否可以通过从 OAuthWebSecurity 的 GoogleClient 收到的结果访问 Google Plus？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T16:33:12.937

Google+ REST API 目前不提供让您访问某个人的连接列表的方法。`people`您可以在[https://developers.google.com/+/api/latest/people/](https://developers.google.com/+/api/latest/people/)查看可用的方法

# postgresql - pgAdmin 执行脚本的快捷方式

> ID：13636532
> 
> 赞同：16
> 
> 时间：2012-11-29T23:14:21.150
> 
> 标签：postgresql, pgadmin

谁知道 pgAdmin 查询工具中执行脚本的 pgAdmin 快捷方式？即执行整个查询并执行当前脚本。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-29T23:15:30.497

选择相关部分并`F5`在 pgAdmin 的 SQL 编辑器中按下键。
或使用工具栏中的“执行查询”按钮（绿色箭头）。
如果未选择任何内容，则执行整个脚本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-28T02:20:27.457

执行脚本的快捷方式

`F5`对于 Windows 用户和

`control`+`E`对于 mac 用户

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-05-22T19:36:24.607

在 Mac 上使用 fn 键（左下角）+ F5

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-10T13:37:13.490

`F5`适用于 Mac 和 Windows。

仅突出显示脚本的一部分会执行脚本的那一部分。

pgAdmin 4 的所有键盘快捷键查询工具列表在[文档中](https://www.pgadmin.org/docs/pgadmin4/development/keyboard_shortcuts.html#query-tool)

`control`+`e`在我的 Mac 上不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-03T15:00:55.843

在（Windows PC）PostgreSQL 中，pgadmin 的布局存在一些问题。有时快捷键不起作用（例如：- ctrl + / 用于行注释，但它不起作用）。我遇到了这个问题（一个烦人的问题）。最后，我通过重置布局解决了这个问题。

布局重置。

打开 PostgreSQL pgadmin -> 单击选项卡文件 -> 选择重置布局。

问题解决了。

# c++ - 在函数中使用参数和声明有什么区别

> ID：13636533
> 
> 赞同：0
> 
> 时间：2012-11-29T23:14:20.907
> 
> 标签：c++, parameters

我遇到了一个对我来说毫无意义但通过使用参数解决的问题。基本上，这有效：

```
void Inventory:: showInventory(char input)
{
    //char input[80];
    //cin >> input;
    //char inventoryRequest[] = "i";
    //int invent = strcmp (input,inventoryRequest);
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if(input == 'i')
    {
    cout<< "\nYou have " << inventory.size() << " items.\n";
    cout << "----------------Inventory----------------\n";
    cout<< "\nYour items:\n";
    for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
    }
    cout << "\n-----------------------------------------\n\n\n";

} 
```

而不是这样：

```
void Inventory:: showInventory()
{
         char input;
    //char input[80];
    //cin >> input;
    //char inventoryRequest[] = "i";
    //int invent = strcmp (input,inventoryRequest);
    //compare the player input to inventoryRequest (i) to see if they want to look at inventory.
    if(input == 'i')
    {
    cout<< "\nYou have " << inventory.size() << " items.\n";
    cout << "----------------Inventory----------------\n";
    cout<< "\nYour items:\n";
    for (int i= 0; i< inventory.size(); ++i)
        cout<< inventory[i] << endl;
    }
    cout << "\n-----------------------------------------\n\n\n";

} 
```

基本上我认为这是一样的。但显然不是当第一个有效而第二个无效时。任何人都可以对此有所了解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:16:28.673

在第一个示例中，`input`是一个参数。它将由调用者使用他们选择传入的任何值进行初始化。

在第二个示例中，`input`是一个未初始化的变量。在它被分配之前读取它（就像你所做的那样）是未定义的行为，因为它当时包含垃圾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:15:49.190

```
void Inventory:: showInventory(char input) 
```

^ 这允许参数传递。

这意味着您可以调用`someInv.showInventory('s')`该方法并将某些值传递给该方法，并且您传递的值将被分配给`input`该方法的本地范围内使用。

* * *

```
void Inventory:: showInventory() 
```

^ 这不是；它只是`input`在方法的本地范围内声明，但您不能`input`从方法外部分配一些值。

此外，这实际上改变了方法的[签名](http://www.cs.unm.edu/~storm/C++/ProgrammingTerms/FunctionSignatures.html)。因此，诸如此类的调用`someInv.showInventory('s')`将失败，除非您有一个同名的方法需要`char`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:16:47.443

在第一种情况下，您可以`char`在调用时将 a 传递给函数：`inventory.showInventory('i')`. 这正是参数的用途。它们允许您将一些值传递给函数进行处理——就像数学中函数的参数一样。

In the second case, you have an uninitialized variable `input` and you attempt to compare it to `'i'`, resulting in undefined behaviour.

# javascript - javascript在页面加载时隐藏div，直到if语句条件选择div

> ID：13636536
> 
> 赞同：0
> 
> 时间：2012-11-29T23:14:39.343
> 
> 标签：javascript, html, hide, show

我在网页上有两个 div，需要从页面加载中隐藏它们，直到脚本块中的 if 语句指示何时显示 div..这可能吗？怎么做？我有一个 jQuery 链接，但我尝试过的不起作用

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
        body {
            background-color: #3da9cd;
            background:url('background.jpg');
            height: 50%;
            width: 50%;
            margin:0;
            padding: 0;
            overflow:auto;
        }
        h1 {
            font-size: 34px;
            margin: 0;
            padding: 0;
            font-family: Georgia, "Times New Roman", Times, serif;
            font-weight: bold;
            color: #000000;
        .hidden { display: none; }
        .shown {display:block;}
}
</style>
<script type="text/javascript">

function WinLose()
{
    $("#win").hide();
$("#lose").hide();
    var x=document.getElementById("demo");
    x=x.innerHTML=Math.floor((Math.random()*5)+1);

    if (x==5)
    {
        $('#win').show()

    }
    else 
    {
        $('#lose').show()
    }

}

</script>

</head>
<body>

<p id="demo"></p>

<button onclick="WinLose()">Try it</button>

<!-- Win element -->
        <div id="win" class="hidden">Congratulations! You have won a prize. *UNIQUE CODE* Collect your prize from the Customer Services desk</div>

        <!-- The losing image div -->
        <div id="lose" class="hidden">Sorry, you have not won. Better luck next time</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:19:18.580

CSS：

```
.DIV_CLASS{
    display:none;
} 
```

查询：

```
$(document).ready(function(){
    if(some statment){
        $('.DIV_CLASS').show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:20:28.087

您应该使用 css`display`属性设置 div 的可见性，如下所示：

```
.hidden { display: none; } 
```

你的 div 像这样：

```
<div class="hidden">first div</div>
<div class="hidden">second div</div> 
```

然后使用您的 js 删除`hidden`该类或`$.show()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:19:49.677

您要么在 if 语句中显示 div，要么使用`setInterval()`或`setTimeout()`定期检查 if 语句集。

# ruby-on-rails - 为另一个控制器重用表单中的现有嵌套属性

> ID：13636537
> 
> 赞同：0
> 
> 时间：2012-11-29T23:14:40.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我正在尝试为学生制作一份考试表格（带有多项选择题）。

以下是相关型号：

```
Exam has_many :questions
     has_one :grade
     accepts_nested_attributes_for :questions
Question has_many :answers
     accepts_nested_attributes_for :answers

Grade belongs_to :exam
      belongs_to :subscription 
```

我将 Simple_form 用于我的应用程序表单。使用fields_for 和一些javascript（如嵌套表单上的railscast 所示）完成并使用了用于进行考试的表单。现在我正在尝试制作考试表格。

唯一的输入将是每个问题的一组单选按钮。用户输入将用于计算分数，分数将是保存到 Grade 模型的唯一信息。我必须承认我不知道如何进行这项工作。到目前为止，这是我对 Grade#new 视图的了解：

```
<%= simple_form_for [@subscription, @grade], :html => { :class => 'form-horizontal' } do |f| %>
  <fieldset>
    <legend>Exam for <%= @lesson.name.capitalize %></legend>

    <% @questions.each do |question| %>
      <%= simple_fields_for :questions do |builder| %>
        <ol>
          <li>
            <p><%= question.text %></p>
            <%= f.input :answer, :collection => question.answers, :as => :radio_buttons %>
          </li>
        </ol>
      <% end %>
    <% end %>

    <div class="form-actions">
      <%= f.submit "Submit Exam", :class => "btn btn-primary" %>
      <%= link_to "Cancel", lesson_exam_path(@lesson, @exam), :class=>"btn" %>
    </div>
  </fieldset>
<% end %> 
```

这会生成一个看起来正确的表单（嗯，大多数情况下），但单选按钮都是一组的一部分。在一个问题上选择答案时，它将取消选择其他问题的答案，因为它们是同一集的一部分。这是生成的相关 HTML：

```
<input class="radio_buttons optional" id="grade_answer_31" name="grade[answer]" type="radio" value="31"/> 
```

这里的问题当然是`name=`html 属性。它指向等级。**我需要它像`name="grade[:question_id][:answer_id]"`.** 如果我有这个，我可以很容易地在控制器中收集信息并进行必要的计算。

我正在对 Grades_controller 进行查看，因为最终将创建一个成绩，但是问题和答案嵌套在考试模型下，这让我对这个表单/操作应该放在哪里有点困惑。我是否应该对此`take_exam`采取行动`exams_controller`并从那里创建成绩？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T03:26:02.563

好的，所以我的问题有两个：

1.）在我的`radio_buttons`输入中，我错误地使用了`f`变量 from`form_for`而不是`builder`来自`fields_for`调用 2.）我改变`fields_for`如下：

```
<%= simple_fields_for "questions[#{question.id}]" do |builder| %> 
```

像这样调用会以我想要`fields_for`的格式对所有 radio_button 输入进行哈希处理。`grade[questions][:question_id][:answer_id]`

# jquery - jQuery - 查找括在括号中的文本？

> ID：13636539
> 
> 赞同：0
> 
> 时间：2012-11-29T23:15:02.353
> 
> 标签：jquery, styles, find, replace, addclass

我有导航项目，其中一些有一个标签，然后是一小段文字，它们用括号括起来。我需要使这个文本更小。

我知道如何查找和替换......但我不知道如何实现这一点。因此，如果我的导航项中的文本是：

ADF（澳大利亚国防人员）

我想给括号+文本一个新的类，这样它们会更小

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:27:00.173

你可以做这样的事情。（显然您可以更改`new_class`为您想要的任何类名）。[**这是一个链接**](http://jsfiddle.net/fpZKG/)，您可以在其中查看它的实际操作。

**HTML**

```
<ul>
  <li id="ADF">ADF (Australian Defence Personnel)</li>
</ul> 
```

**CSS**

```
span.new_class {
  font-size: 11px;
} 
```

**JavaScript**

```
$('#ADF').html($('#ADF').html().replace(/(\([^)]+\))/, 
                                 '<span class="new_class">$1</span>')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:55:40.533

一个非常简单的解决方案（也很天真）是使用

```
$('#text').text().replace('(', '<span class="small">(').replace(')', ')</span>') 
```

如果您的文本具有结构

```
<div id="text">ADF (Australian Defence Personnel)</div> 
```

并且括号中总是只有一段文本......这将起作用，但对于更强大但更复杂的东西，您可以使用正则表达式

```
$('#text').text().replace(/.*?(\(.*?\)).*?/, '<span class="small">$1</span>') 
```

jquery 会很容易地找到任何元素。使用

```
$('#someId').text() 
```

将为您提供该元素的文本，然后`replace`是常规 Javascript 而不是 jquery。

# c++ - 如何检查模板参数的类型？

> ID：13636540
> 
> 赞同：120
> 
> 时间：2012-11-29T23:15:05.653
> 
> 标签：c++, templates

假设我有一个模板函数和两个类

```
class animal {
}
class person {
}

template<class T>
void foo() {
  if (T is animal) {
    kill();
  }
} 
```

如何检查 T 是动物？我不想在运行时进行检查。谢谢

* * *

## 回答 #1

> 赞同：161
> 
> 时间：2012-11-29T23:18:22.080

使用`is_same`：

```
#include <type_traits>

template <typename T>
void foo()
{
    if (std::is_same<T, animal>::value) { /* ... */ }  // optimizable...
} 
```

通常，这是一个完全不可行的设计，但你真的想*专攻*：

```
template <typename T> void foo() { /* generic implementation  */ }

template <> void foo<animal>()   { /* specific for T = animal */ } 
```

另请注意，具有显式（非推导）参数的函数模板是不寻常的。这并非闻所未闻，但通常有更好的方法。

* * *

## 回答 #2

> 赞同：47
> 
> 时间：2018-02-07T18:20:57.880

我认为今天，最好使用，但仅限于 C++17。

```
#include <type_traits>

template <typename T>
void foo() {
    if constexpr (std::is_same_v<T, animal>) {
        // use type specific operations... 
    } 
} 
```

如果在 if 表达式主体中使用某些类型特定的操作而不使用`constexpr`，则此代码将无法编译。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-29T23:17:13.577

您可以根据传递给其参数的内容来专门化您的模板，如下所示：

```
template <> void foo<animal> {

} 
```

请注意，这会基于作为`T`. 这通常是可取的，因为它减少了混乱，本质上是我们首先拥有模板的原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-06-27T09:57:54.453

在 C++17 中，我们可以使用***variables***。

要使用`std::variant`，您需要包含标题：

```
#include <variant> 
```

之后，您可以`std::variant`像这样添加代码：

```
using Type = std::variant<Animal, Person>;

template <class T>
void foo(Type type) {
    if (std::is_same_v<type, Animal>) {
        // Do stuff...
    } else {
        // Do stuff...
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-01-28T07:33:00.913

`std::is_same()`仅从 C++11 开始可用。对于 C++11 之前的版本，您可以使用`typeid()`：

```
template <typename T>
void foo()
{
    if (typeid(T) == typeid(animal)) { /* ... */ }
} 
```

# asp.net-mvc-3 - 在使用 LINQ 的查询中包括子项？

> ID：13636543
> 
> 赞同：1
> 
> 时间：2012-11-29T23:15:36.947
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4.1

使用 mvc3 和实体框架 4\. 在 sql server 中，“Steps”表通过 stepID 对“Question”有外键约束。查询（以下）步骤包括任何相关问题。

```
var steps = from b in db.Steps.Include(s => s.Questions)
            orderby b.StepOrder
            select b;

return View(steps.ToList()); 
```

我还想提取与问题相关的“答案”。在 sql server 中，“问题”表通过 questionID 具有与“答案”的外键约束。如何更改查询以包含与步骤相关联的问题的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:24:51.313

你需要`Select`在里面的孙子`Include`

```
var steps = from b in db.Steps.Include(s => s.Questions.Select(q => q.Answers))
            orderby b.StepOrder
            select b;

return View(steps.ToList()); 
```

请参阅[加载相关实体](http://msdn.microsoft.com/en-US/data/jj574232)EF 教程中的*急切加载多个级别*部分。

# javascript - 确保在新窗口（不是选项卡）中打开的 Javascript 方法

> ID：13636548
> 
> 赞同：3
> 
> 时间：2012-11-29T23:16:17.680
> 
> 标签：javascript

请耐心等待，因为这可能看起来类似于 ( [JavaScript open in a new window, not tab](https://stackoverflow.com/questions/726761/javascript-open-in-a-new-window-not-tab) )，但执行链接的方法不同。接听软电话时，我正在通过第三方应用程序打开“销售脚本”应用程序。如果销售代表已经打开了一个浏览器窗口（而且他们总是这样做），则会在现有窗口中打开一个新选项卡，并且它并不总是很明显。他们要求我总是让我的应用程序弹出一个新窗口，但据我所知，唯一的方法是通过浏览器的首选项。是否有一些我不知道的javascript会“取消停靠”标签？我怀疑答案是否定的，但不得不问。

谢谢你的时间！

[编辑] 我最初认为这可能超出了问题的范围，但我认为它可以阐明我正在尝试做的事情：第 3 方应用程序（iSymphony）在本地机器上运行并监听我们通话中的事件控制器。当代表回答时，它会触发一个 URL，该 URL 在系统的默认浏览器中打开。我真的无法控制它的打开方式，这就是为什么我希望有一个 javascript 解决方案来确保我在一个新窗口中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T23:21:48.200

如果您在调用时指定宽度和高度`window.open`，大多数浏览器将在新窗口而不是选项卡中打开链接。

```
window.open(url, '_blank', 'width=300,height=200'); 
```

小提琴：http: [//jsfiddle.net/kelervin/Pf8Rw/](http://jsfiddle.net/kelervin/Pf8Rw/)

有关讨论和更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/726761/javascript-open-in-a-new-window-not-tab)。

如果目的是引起用户的注意，您可以考虑添加桌面通知（假设支持它们的 Chrome 等浏览器是一种选择）。

请参阅[此答案](https://stackoverflow.com/a/13328513/1658527)以获取示例，它可能正是您要查找的内容。

# cordova - 在我的 Ripple 下的 PhoneGap 应用程序中，在线和离线事件未正确触发

> ID：13636555
> 
> 赞同：0
> 
> 时间：2012-11-29T23:17:08.830
> 
> 标签：cordova, ripple

在 Chrome 中使用 Ripple 我希望在我将网络从连接状态（WiFi、4g 等）切换到无状态时调用我的在线和离线事件。但这不会发生。如果我离线启动模拟器，最多会调用离线。

部署到手机（Android）如果我进入飞行模式然后回到在线，这些事件似乎会被调用。

这是我的代码：

```
var app = {
// Application Constructor
initialize: function() {
    this.bindEvents();
},
// Bind Event Listeners
//
// Bind any events that are required on startup. Common events are:
// 'load', 'deviceready', 'offline', and 'online'.
bindEvents: function() {
   document.addEventListener('deviceready', this.onDeviceReady, false);
},
onOffline: function () {
    var parentElement = document.getElementById("devicestatus");
    var offlineElement = parentElement.querySelector('.offline');
    var onlineElement = parentElement.querySelector('.online');
    onlineElement.setAttribute('style', 'display:none;');
    offlineElement.setAttribute('style', 'display:block;');
},
onOnline: function () {
    var parentElement = document.getElementById("devicestatus");
    var offlineElement = parentElement.querySelector('.offline');
    var onlineElement = parentElement.querySelector('.online');
    offlineElement.setAttribute('style', 'display:none;');
    onlineElement.setAttribute('style', 'display:block;');
},
onDeviceReady: function() {
    var parentElement = document.getElementById("devicestatus");
    var listeningElement = parentElement.querySelector('.listening');
    var receivedElement = parentElement.querySelector('.received');
    listeningElement.setAttribute('style', 'display:none;');
    receivedElement.setAttribute('style', 'display:block;');

    document.addEventListener('offline', app.onOffline, false);
    document.addEventListener('online', app.onOnline, false);
}
}; 
```

这是 Ripple 中的错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T15:02:25.480

你是对的，这是 Ripple 中的一个错误。它已在最新版本的 Ripple 中修复：

[https://github.com/blackberry/Ripple-UI/issues/663](https://github.com/blackberry/Ripple-UI/issues/663)

建议更新到 0.9.11 并再次测试您的代码。

# jquery - jQuery Datatables - 使用控件会影响点击功能

> ID：13636557
> 
> 赞同：1
> 
> 时间：2012-11-29T23:17:10.767
> 
> 标签：jquery, click, datatables, row, handler

没有所有代码就很难解决奇怪的间歇性问题，但这里（我越来越绝望）：

我有一个使用数据表的 HTML 表：

```
$('#DatagridTable').dataTable({ 
    'sPaginationType': 'full_numbers',
}); 
```

我有一个表格的 jQuery click 事件，它将点击行中第一个单元格的内容发送到表单，然后提交表单。这是功能：

```
//  On row click, go to single-view page
$('.c_grid_tr').click(function() {  
    var equipID = $(this).find('td:first').text();
    //  Fill hidden text box on form with value to post
    $('#singleRowID').val(equipID);
    //  Post form
    $('#formEquipment').submit();
}); 
```

在我使用 Datatables 的任何导航功能（转到另一个页面、排序、更改显示的记录数）之前，单击功能可以正常工作。但是在执行了这些操作之后，我的点击事件只是偶尔起作用，似乎在随机行上。我查看了 HTML 源代码，但是单击事件起作用的行和不发生单击事件的行是相同的。下面是在 Firefox 中呈现的两行示例：

```
<tr class='c_grid_tr'>
    <td style='display:none;'>817</td>
    <td class='c_grid_td'>Ground Optic #1</td>
    <td class='c_grid_td'>Zeiss</td>
    <td class='c_grid_td'>950</td>
    <td class='c_grid_td'>DTY</td>
    <td class='c_grid_td'>Storage Facility</td>
    <td class='c_grid_td'>Y</td>
</tr><tr class='c_grid_tr'>
    <td style='display:none;'>818</td>
    <tdclass='c_grid_td'>Ground Optic #1</td>
    <td class='c_grid_td'>Zeiss</td>
    <td class='c_grid_td'>950</td>
    <td class='c_grid_td'>DTZ</td>
    <td class='c_grid_td'>Storage Facility</td>
    <td class='c_grid_td'>Y</td>
</tr> 
```

第一行响应点击事件。第二个没有，只有在我排序、更改页面或更改显示记录数后才会出现此问题。我在我的点击事件中放置了一个警告框，但它不会触发，所以我知道点击第二行时甚至没有激活点击事件。

与往常一样，感谢您提供任何有关主题的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:33:44.117

问题很可能是某些列包含在第一次加载中（当点击事件被绑定时），但在后续加载中，您不会重新加载整个页面，只是重新加载表格，因此事件不会反弹到新的元素。

我认为，您将要取消绑定并重新绑定抽签上的事件，即：

```
"fnDrawCallback": function (oSettings) {
    $('.c_grid_tr').unbind();
    //  On row click, go to single-view page
    $('.c_grid_tr').click(function() {  
        var equipID = $(this).find('td:first').text();
        //  Fill hidden text box on form with value to post
        $('#singleRowID').val(equipID);
        //  Post form
        $('#formEquipment').submit();
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:36:22.350

尝试使用 javascript onclick 函数调用内联并传递元素，例如：

```
<tr onclick="updateRow(this)"> 
```

如果您需要 tr 的唯一选择器并控制输出，请使用 id 或记录 id 的索引，例如：

```
<tr id="[create in the output]"> 
```

# git - 如何从 GitHub 下载 .zip 以获取特定的提交 sha？

> ID：13636559
> 
> 赞同：123
> 
> 时间：2012-11-29T23:17:21.887
> 
> 标签：git, github

我想下载一个 .zip，其中包含托管在 github 上的库的源代码，但我不想要 master，因为每次下载时我都可能下载不同的版本。

这个特定的库没有标签，所以我不能使用它。

那么如何下载特定提交 sha 的 source.zip 呢？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-11-29T23:55:33.290

您可以将所需的 sha 放在下载 url 中：

`https://github.com/{username}/{projectname}/archive/{sha}.zip`

作为一般规则，如果您有一个有效的 url，您可以将“master”替换为您想要的特定 sha。

在 unix 上：

`wget https://github.com/{username}/{projectname}/archive/{sha}.zip`

请记住，如果这是一个私人仓库，那么 wget 将无法工作，除非您也传递 OAuth 令牌。

以下是有关此的更多信息：

[从 Private Repo 下载 Git 归档 tarball 时遇到问题](https://stackoverflow.com/questions/10046027/having-trouble-downloading-git-archive-tarballs-from-private-repo)

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2013-08-27T17:37:17.160

查看提交代码时，单击右上角的“Browse Code”按钮，然后单击“Download ZIP”。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-03-27T18:34:21.067

这是一个老问题，但想提一下，如果您只想将提交作为补丁，而不是提交时的整个仓库，您可以使用：

```
$ wget http://github.com/username/repo/commit/sha1.patch
#                        ^^^^^^^^ ^^^^        ^^^^
#                        change   change      change 
```

`/commit`和`.patch`部分是重要的部分。

如果您想合并一个前一段时间被撤销的更改，因此这在分叉的 repo 中不存在，这将特别有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-09-27T09:21:22.923

对于那些来这里寻找从特定提交（或分支）**下载特定文件（或目录）的方法的人：**

```
git_user="user-name"
git_project="project-name"
commit_or_branch="sha-id or branch name"
dir_or_file="path/to/dir-or-file"

archive_url="https://github.com/${git_user}/${git_project}/archive/${commit_or_branch}.tar.gz"

wget -O - ${archive_url} | tar xz --strip=1 "${git_project}-${commit_or_branch}/${dir_or_file}" 
```

将存档下载为`tar.gz`, 的优点是您可以直接将*wget*导入*tar*命令，因此它将**即时提取 gz**。

# iphone - 调用 referenceSizeForFooterInSection 而不调用 reloadData

> ID：13636564
> 
> 赞同：3
> 
> 时间：2012-11-29T23:17:36.240
> 
> 标签：iphone, objective-c, ios, ipad, uicollectionview

有没有办法让 UICollectionView 重新加载页脚部分，即：调用 UICollectionView 的 referenceSizeForFooterInSection 而不实际调用整个 reloadData？

在我的 referenceSizeForFooterInSection 中，我有一个标志来确定页脚视图的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T10:19:39.747

一个技巧可能是在最后放置一个空部分并使用 reloadSections 仅加载将重新加载其页脚的最后一个部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T00:31:06.833

调用`invalidateLayout`您`UICollectionViewLayout`将强制重新计算并调整其元素的大小

# java - 将查询结果拉入数据表

> ID：13636572
> 
> 赞同：0
> 
> 时间：2012-11-29T23:18:37.770
> 
> 标签：java, jsf, jakarta-ee, datatable

我无法从查询中提取信息并将其放入数据表中。

我需要提取大于输入价格的书籍条目。

我认为这部分有点工作，但我需要将它分类到数据表中以便可以读取。（让它看起来很漂亮）

我不明白我在哪里缺少代码？在查询中整理出来更多？或者我可以只访问信息并将其放入数据表中吗？

这是我的 BookQueries.xhtml 页面的样子，但它不起作用！:(

```
 <h:dataTable id="table1" value="#{bookController.findBookGreater()}" var="item"
                 border="1">
        <f:facet name="header">
            <h:outputText value="Book Query Results" />
        </f:facet>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Books" />
            </f:facet>
            <h:outputText value="#{book.title}" />
        </h:column>
        <h:column>
            <f:facet name="header">
                <h:outputText value="Price" />
            </f:facet>
            <h:outputText value="#{book.price}" />
        </h:column>

    </h:dataTable> 
```

在 BookController.java 类中，我有：

```
 public List<Book> findBookGreater() {
    return ejbFacade.findBookByPrice(bookPrice);
} 
```

在 BookFacade.java 我有：

```
 public List<Book> findBookByPrice(Integer bprice) {

EntityManager em = getEntityManager();
Query query = em.createNamedQuery("findBooksGreater");
query.setParameter("bookprice", bprice);
List resultList = query.getResultList();
return resultList;

} 
```

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:26:05.317

你定义`var="item"`

```
<h:dataTable id="table1" value="#{bookController.findBookGreater()}" var="item"
             border="1"> 
```

所以列表的每个元素都将被引用为 `item`，但您尝试引用`book`

```
<h:outputText value="#{book.title}" /> 
```

改为使用

```
<h:outputText value="#{item.title}" /> 
```

# html - 在 iframe 中显示 Youtube 视频

> ID：13636577
> 
> 赞同：1
> 
> 时间：2012-11-29T23:19:22.217
> 
> 标签：html, security, iframe, youtube, youtube-api

网站**example1.com**嵌入了 Youtube 视频。网站**example2.com**有一个`iframe`显示**example1.com**的网站。似乎由于 Youtube 政策，这个视频可以从**example1.com**观看，但不能从**example2.com**观看（在 内`iframe`）。有没有办法让它工作？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T00:22:00.570

我试过了，它的工作...

创建 a.html 并粘贴此代码

```
<iframe width="560" height="315" src="http://www.youtube.com/embed/m7dSteMFhZI" frameborder="0" allowfullscreen></iframe> 
```

创建 b.html 并添加此代码

```
<iframe width="600" height="350" src="a.php" frameborder="0" allowfullscreen></iframe> 
```

# sql-server - 如何使用参差不齐的数据对枢轴进行排序

> ID：13636579
> 
> 赞同：2
> 
> 时间：2012-11-29T23:19:37.490
> 
> 标签：sql-server, sorting, pivot

我有一个看起来像这样的表：

```
DECLARE @myTable TABLE (SampleID varchar(max), site varchar(max), SPDate date)  
  INSERT @myTable
    SELECT 'A-1', 1, '9/1/2012'   UNION ALL
    SELECT 'A-2', 1, '10/1/2012'  UNION ALL
    SELECT 'A-3', 1, '10/15/2012' UNION ALL
    SELECT 'A-5', 1, '5/1/2012'   UNION ALL
    SELECT 'A-4', 1, '1/1/2012'   UNION ALL
    SELECT 'B-1', 2, '11/1/2012'  UNION ALL
    SELECT 'B-2', 2, '8/1/2012'   UNION ALL
    SELECT 'B-3', 2, '5/1/2012'   UNION ALL
    SELECT 'B-4', 2, '4/1/2012'   UNION ALL
    SELECT 'C-1', 3, '10/1/2012'  UNION ALL
    SELECT 'C-2', 3, '10/15/2012' UNION ALL
    SELECT 'C-3', 3, '7/1/2012' ; 
```

我想要的是一个查询，它给我从今天起> 75 天的所有日期，然后按降序排序（例如，最近的日期在前）。

所以对于我的表，输出将如下所示：

```
 Site1    Site2   Site3
     A-1      B-2     C-2
     A-5      B-3     C-3
     A-4      B-4 
```

所以我知道如何使 Site1、Site2 和 Site3 查询像这样分开

```
 SELECT SampleID FROM @myTable
     WHERE  DATEDIFF(DAY, SPDate, GETDATE()) > 75 AND
     site=1 ORDER BY SPDate DESC 
```

如何将这三个查询合并到一张表中？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:51:08.570

[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)您可以使用该功能轻松执行此操作。如果您只有`site`上面显示的 3 个值，那么您可以对这些值进行硬编码，类似于：

```
select [Site1], [Site2], [Site3]
from
(
  select SampleID, 
    'Site'+ cast(site as varchar(10)) SiteNumber
     ,row_number() over(partition by site order by spdate desc) rn
  from myTable 
  where DateDiff(day, spdate, getdate()) >75
) src
pivot
(
  max(SampleID)
  for SiteNumber in ([Site1], [Site2], [Site3])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b939d/45)

但是如果你有一个未知数量的站点，那么你可以实现一个动态的 sql 版本：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Site'+ site) 
                    from myTable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ' + @cols + ' from 
             (
               select SampleID, 
                 ''Site''+ cast(site as varchar(10)) SiteNumber
                  ,row_number() over(partition by site order by spdate desc) rn
               from myTable 
               where DateDiff(day, spdate, getdate()) >75
            ) x
            pivot 
            (
                max(SampleID)
                for SiteNumber in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b939d/46)

两者都产生相同的结果：

```
| SITE1 | SITE2 |  SITE3 |
--------------------------
|   A-1 |   B-2 |    C-3 |
|   A-5 |   B-3 | (null) |
|   A-4 |   B-4 | (null) | 
```

# css - 彼此下方的浮动柱

> ID：13636585
> 
> 赞同：1
> 
> 时间：2012-11-29T23:20:09.490
> 
> 标签：css, html

我在试图让我的**col3**和**col4**漂浮在彼此下方时遇到问题。100% 宽度基于**960px**。我试过漂浮，但无处可去。

[http://jsfiddle.net/t9YRS/](http://jsfiddle.net/t9YRS/)

**HTML：**

```
<div class="listingAttributes">
<div class="col0">
<span class="name">Bedrooms:</span>
<span class="value">2</span>

<span class="name">Bathrooms:</span>
<span class="value">4</span><br/>

<span class="name">Price:</span></br>
<span class="value">Asking price $1,250,000</span></p>                                                          
</div>
<div class="col1">
<span class="name">Floor area:</span>
<span class="value">200m²</span>
<span class="name">Land area:</span>
<span class="value">1452m²</span>
<span class="name">Rateable value</span>
<span class="value">$980,000</span>                                                                     
</div>
<div class="col2">
<span class="name">Open home times:</span>
<span class="value">
<p>Sat 1 Dec 2 pm - 2:45pm</p>
<p>Sun 2 Dec 2 pm - 2:45pm</p>

</span>
</div>

<div class="col3">
<span class="name">In the area</span><br/>
<span class="value">Schools, Cafe's, Orewa Beach, Surfclub, Orewa Village, Silverdale Mall Wenderholm Park. Boat Ramp</span>
</div>
<div class="col4">
<span class="name">Parking</span><br/>
<span class="value">Double Garage w space for 4 more vehicles outside plus dedicated boat bay</span>
</div>
</div> 
```

**CSS：**

```
.listingAttributes{
    width:100%;
    height:165px;
    margin: 15px 10px -5px 10px;
    border-bottom: 1px solid #FFB400;
    background-color: red;
}
.listingAttributes .col0, .col1{
    width:160px;
    height: 100%;
    margin:0 15px 0 0;
    float:left;
    display: inline-block;
}
.listingAttributes .col2{
    width:180px;
    height: 100%;
    margin:0 15px 0 0;
    float:left;
    display: inline-block;
}

.listingAttributes .col3{
    width:350px;
    height:100%;
    float:left;
    overflow: hidden;
    display: inline-block;
}
.listingAttributes .col4{
    width:350px;
    height:100%;
    float:left;
    display: inline-block;   
}
.listingAttributes .sectionListingAttributes, .name{
    font-weight: bold;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:30:40.637

你忘了清除浮动。

只需添加：

```
<div style="clear:both;"></div> 
```

在 col3 DIV 之后。

[JSFiddle](http://jsfiddle.net/t9YRS/6/)

红色区域中的 col3 和 col4 ：

[JSFiddle](http://jsfiddle.net/t9YRS/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:33:26.253

在 col4 上删除该属性`float:left;`并使其`display:block;`不`display:inline-block;`

此外，`<div class="listingAttributes">`如果您希望 col3 和 col4 在红色 div 内，请删除父级的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:34:36.953

和规则可以简化为`.listingAttributes .col3`：`.listingAttributes .col3`

```
.listingAttributes .col3{
    float: left;
} 
```

[http://jsfiddle.net/t9YRS/5/](http://jsfiddle.net/t9YRS/5/)

* * *

我刚刚阅读了关于红色块内所有内容的部分。在这种情况下，请从规则中删除该`height`属性。`.listingAttributes`

[http://jsfiddle.net/t9YRS/7/](http://jsfiddle.net/t9YRS/7/)

# android - 通过 adb shell 启动 SL4A 应用程序

> ID：13636587
> 
> 赞同：2
> 
> 时间：2012-11-29T23:20:12.093
> 
> 标签：android, python, adb, sl4a

我尝试了启动活动的变体，包括此[链接](https://stackoverflow.com/questions/13380590/is-it-possible-to-start-activity-through-adb-shell)和[Google 规定](http://code.google.com/p/android-scripting/wiki/RemoteControl)的在 SL4A 中启动后台脚本的方式。

但是我只需要知道通过 adb shell 打开实际 SL4A 应用程序的命令。令人困惑的是，应该首先启动大量代码中的哪个活动。还有命令：

```
adb shell am start... 
```

没有最好的文档。有人可以给我命令从 adb 启动 SL4A 吗？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-08T18:42:57.470

运行 SL4A 应用程序没有简单的命令。SL4A 作为一个活动没有命令行界面。

您要查看的是：

```
$ am start -a com.googlecode.android_scripting.action.LAUNCH_FOREGROUND_SCRIPT -n com.googlecode.android_scripting/.activity.ScriptingLayerServiceLauncher -e com.googlecode.android_scripting.extra.SCRIPT_PATH /sdcard/sl4a/scripts/test.py 
```

这样做是向 SL4A 发出 Android 意图，以在指定路径运行脚本。此路径不需要位于 /sdcard/sl4a/scripts 目录中。

在命令行输入当然很痛苦，尤其是在设备本身上。没有什么能阻止你将它封装在一个 shell 脚本中。[此处](http://a-more-common-hades.blogspot.co.uk/2011/04/shell-launcher-for-sl4a-scripts.html)提供了一个建议的示例

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T21:30:50.657

因此，目标是能够从 adb 启动应用程序，就像您在主屏幕上实际按下图标一样。为此，我查看了 logcat 数据，发现正在启动的第一个活动是 ScriptManager，因此要启动应用程序，我需要：

```
adb shell am start -n com.googlecode.android_scripting/.activity.ScriptManager 
```

或在一般情况下：

```
adb shell am start -n <package>/<activity> 
```

# python - 如何根据多个标准对 Pandas DataFrame 进行排序？

> ID：13636592
> 
> 赞同：26
> 
> 时间：2012-11-29T23:20:44.917
> 
> 标签：python, pandas

我有以下 DataFrame，其中包含歌曲名称、他们的峰值图表位置以及他们在第 1 位花费的周数：

```
 Song            Peak            Weeks
76                            Paperback Writer               1               16
117                               Lady Madonna               1                9
118                                   Hey Jude               1               27
22                           Can't Buy Me Love               1               17
29                          A Hard Day's Night               1               14
48                              Ticket To Ride               1               14
56                                       Help!               1               17
109                       All You Need Is Love               1               16
173                The Ballad Of John And Yoko               1               13
85                               Eleanor Rigby               1               14
87                            Yellow Submarine               1               14
20                    I Want To Hold Your Hand               1               24
45                                 I Feel Fine               1               15
60                                 Day Tripper               1               12
61                          We Can Work It Out               1               12
10                               She Loves You               1               36
155                                   Get Back               1                6
8                               From Me To You               1                7
115                              Hello Goodbye               1                7
2                             Please Please Me               2               20
92                   Strawberry Fields Forever               2               12
93                                  Penny Lane               2               13
107                       Magical Mystery Tour               2               16
176                                  Let It Be               2               14
0                                   Love Me Do               4               26
157                                  Something               4                9
166                              Come Together               4               10
58                                   Yesterday               8               21
135                       Back In The U.S.S.R.              19                3
164                         Here Comes The Sun              58               19
96       Sgt. Pepper's Lonely Hearts Club Band              63               12
105         With A Little Help From My Friends              63                7 
```

我想将这些歌曲按受欢迎程度排序，所以我想按照以下标准对它们进行排序：排名最高的歌曲排在第一位，但如果出现平局，则保留在排行榜中的歌曲最长的先到先得。

我似乎无法弄清楚如何在熊猫中做到这一点。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-13T18:24:51.697

在 pandas 0.9.1 及更高版本上，这应该可以工作（这是 0.10.0b1）：

（**编辑：**从 Pandas 0.19 开始，方法`sort_index`已弃用。首选[`sort_values`](http://pandas.pydata.org/pandas-docs/version/0.19.1/generated/pandas.DataFrame.sort_values.html?highlight=sort_values#pandas.DataFrame.sort_values "排序值")）

```
In [23]: songs.sort_index(by=['Peak', 'Weeks'], ascending=[True, False])
Out[23]: 
                                      Song  Peak  Weeks
10                           She Loves You     1     36
118                               Hey Jude     1     27
20                I Want To Hold Your Hand     1     24
22                       Can't Buy Me Love     1     17
56                                   Help!     1     17
76                        Paperback Writer     1     16
109                   All You Need Is Love     1     16
45                             I Feel Fine     1     15
29                      A Hard Day's Night     1     14
48                          Ticket To Ride     1     14
85                           Eleanor Rigby     1     14
87                        Yellow Submarine     1     14
173            The Ballad Of John And Yoko     1     13
60                             Day Tripper     1     12
61                      We Can Work It Out     1     12
117                           Lady Madonna     1      9
8                           From Me To You     1      7
115                          Hello Goodbye     1      7
155                               Get Back     1      6
2                         Please Please Me     2     20
107                   Magical Mystery Tour     2     16
176                              Let It Be     2     14
93                              Penny Lane     2     13
92               Strawberry Fields Forever     2     12
0                               Love Me Do     4     26
166                          Come Together     4     10
157                              Something     4      9
58                               Yesterday     8     21
135                   Back In The U.S.S.R.    19      3
164                     Here Comes The Sun    58     19
96   Sgt. Pepper's Lonely Hearts Club Band    63     12
105     With A Little Help From My Friends    63      7 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-03-03T09:38:20.797

自 pandas 0.17.0 以来，[`sort`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort.html)已弃用并替换为[`sort_values`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort_values.html)：

```
df.sort_values(['Peak', 'Weeks'], ascending=[True, False], inplace=True) 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-10-20T03:52:08.657

```
df.sort(['Peak', 'Weeks'], ascending=[True, False], inplace=True) 
```

如果您希望排序结果以供将来使用，`inplace=True`则为必填项。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-29T23:27:02.220

通过使用[.sort()](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.sort.html)

```
df.sort(['Peak', 'Weeks'], ascending=[True, False]) 
```

将按峰值位置的升序排序，然后在图表中按长度降序排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-27T10:35:54.040

如果“Peak”和“Week”的数据类型不是“int”或“float”，则使用以下命令。

```
df.convert_objects(convert_numeric=True).sort_values(['Peak', 'Weeks'], ascending=[True, False], inplace=True) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-30T03:42:44.930

pandas.DataFrame.sort_values df.sort_values(['Peak', 'Weeks'], ascending=[True, False])

请在此找到更多详细信息

# android - 为 android 布局添加了背景，按钮被隐藏

> ID：13636593
> 
> 赞同：0
> 
> 时间：2012-11-29T23:20:45.733
> 
> 标签：android, android-layout

在我的布局中添加了背景图像，按钮被隐藏。有没有办法将按钮带到视图前面？

[http://oi45.tinypic.com/1180y0l.jpg](http://oi45.tinypic.com/1180y0l.jpg)

这是我的 layout.xml

布局：

```
android:id="@+id/newsletter_layout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/resort_background"
android:gravity="fill|top"
android:orientation="vertical"
android:paddingLeft="16dp"
android:paddingRight="16dp" >

<Button
    android:id="@+id/submitButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginTop="72dp"
    android:onClick="submit"
    android:text="@string/submit" />

<Button
    android:id="@+id/noThanksButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/submitButton"
    android:layout_alignRight="@+id/submitButton"
    android:layout_below="@+id/submitButton"
    android:onClick="noThanks"
    android:text="@string/no_thanks" />

<Button
    android:id="@+id/askLaterButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/noThanksButton"
    android:layout_alignRight="@+id/noThanksButton"
    android:layout_below="@+id/noThanksButton"
    android:onClick="askLater"
    android:text="@string/ask_later" /> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:53:31.717

通过向按钮添加颜色来修复问题。

关注这篇文章： [具有不同背景颜色的 Android 按钮](https://stackoverflow.com/questions/3738886/android-button-with-different-background-colors/3740351#3740351)

谢谢！

# apache - apache 别名和子目录

> ID：13636594
> 
> 赞同：4
> 
> 时间：2012-11-29T23:20:52.080
> 
> 标签：apache, alias, subdirectory

我有以下结构

```
/var/www/mysite/public/
/var/www/mysite/api/ 
```

在这两个目录中，都设置了 .htaccess 来重写 url，如下所示：

dev.domain.com/example/ => dev.domain.com/index.php?token=example

dev.domain.com/api/example => dev.domain.com/index.php?token=example

我的 apache conf 看起来像这样

```
...
<VirtualHost *:80>
   Servername dev.domain.com
   DocumentRoot /var/www/mysite/public/
   Alias /api/ "/var/www/mysite/api/"
   <Directory "/var/www/mysite/api/">
       Options Indexes FollowSymLinks
   </Directory>
</VirtualHost>
... 
```

**dev.domain.com/api/**工作正常（它调用 www/api/index.php），但**dev.domain.com/api/example/**使用查询字符串 token= 调用公共站点（www/public/index.php例子）。

我认为 apache 指令 Alias 也在重定向子目录，显然不是这样。有人能告诉我我哪里错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:41:53.643

所以这是一个重写的问题：别名目录不应该在要匹配的模式中。

这是最终配置：apache配置文件

```
...
<VirtualHost *:80>
        ServerName dev.domain.com
        DocumentRoot /var/www/mysite/public/

        Alias /api/ /var/www/mysite/api/
        <Directory /var/www/mysite/api/>
             Options FollowSymLinks -Indexes   
             AllowOverride all
        </Directory>
</VirtualHost>
... 
```

和 .htacess 文件 /api/ 目录

```
Options FollowSymLinks
RewriteEngine On

RewriteCond %{REQUEST_URI} /+[^\.]+$
RewriteRule ^(.+[^/])$ %{REQUEST_URI}/ [R=301]

RewriteRule ^(.*)/(.*)/$ /api/index.php?object=$1&collection=$2 [QSA,L] 
RewriteRule ^(.*)/$ /api/index.php?object=$1 [QSA,L] 
```

感谢@freedev 抽出宝贵时间。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T02:56:46.097

对于 mysite/api/ 你应该使用绝对路径，请尝试这些重写：

```
RewriteRule ^api/(.*)/(.*)/$ /api/index.php?object=$1&collection=$2 [QSA,L] 

RewriteRule ^api/(.*)/$ /api/index.php?object=$1 [QSA,L] 
```

如果有任何事情没有按预期工作，请记住您可以调试启用重写日志的重写过程

```
RewriteLog "/var/apache/logs/rewrite.log"
RewriteLogLevel 7 
```

**请注意仅在开发环境中使用 rewritelog 配置，因为这会大大降低服务器的速度。**

# java - 比较两个整数字符串并打印出匹配项

> ID：13636595
> 
> 赞同：3
> 
> 时间：2012-11-29T23:20:54.237
> 
> 标签：java, string, integer

假设这是我的两个字符串

```
String listOfIntegers = ("1 5 9 12 15 50 80 121");
String integerToLookFor = ("12"); 
```

我希望我的程序扫描 listOfIntegers 并打印出 integerToLookFor 是否在字符串中。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T23:29:17.053

1.  用空格作为分隔符分割字符串，得到一个字符串数组。
2.  扫描数组并检查每个元素是否等于查找变量。

代码：

```
String listOfIntegers = ("1 5 9 12 15 50 80 121");
String integerToLookFor = ("12");
String[] splitArr = listOfIntegers.split("\\s");
for(String s: splitArr){
    if(s.equals(integerToLookFor)) {
        System.out.println("found: " + s);
        break; //breaks out of the loop
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:24:30.440

我会将列表拆分为字符串数组，然后使用 foreach 循环通过比较值来找到匹配项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T23:46:54.727

如果您确保要搜索的列表和数字都包含在空格中，则可以简化搜索：

```
 String listOfIntegers = " " + "1 5 9 12 15 50 80 121" + " ";
    String integerToLookFor = " " + "12" + " ";
    if (listOfIntegers.indexOf(integerToLookFor) != -1) {
        // match found
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T10:25:59.540

```
import java.util.Arrays;    
String listOfIntegers = ("1 5 9 12 15 50 80 121");
String integerToLookFor = ("12");    
System.out.println(Arrays.asList(listOfIntegers.split(" ")).contains(integerToLookFor)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T23:23:14.897

```
Array ints = listOfIntegers.split(' ');
print ints.inArray(integerToLookFor); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T23:44:40.093

您可以在 regex 包中使用 Matcher 和 Pattern.compiler。请参见下面的示例：

```
Pattern p = Pattern.compile(integerToLookFor);
Matcher m = p.matcher(listOfIntegers);
while(m.find()){

   System.out.println("Starting Point:"+m.start()+"Ending point:"+m.end());

} 
```

# java - 在 BorderPane 内不服从 ScalaFX/JavaFX Node.translateX/Y

> ID：13636597
> 
> 赞同：2
> 
> 时间：2012-11-29T23:21:02.877
> 
> 标签：java, scala, javafx, scalafx

我正在绘制各种 Rectangle 节点，我希望它们能够在屏幕上拖动。

我的代码目前是这样的：

```
 stage = new Stage {
    scene = new Scene(1100, 700) {
      root = new BorderPane {
        center = new Group() {
          fill = Color(0.22, 0.22, 0.22, 1.0)
          children = List(
            new Rectangle with Draggable {
              x = 100.0
              y = 100.0
              width = 80.0
              height = 50.0
              arcWidth = 7.5
              arcHeight = 7.5
              fill = Color(0.15, 0.15, 0.15, 1.0)

              onMousePressed = (event: MouseEvent) => {
                draggablePerformPress(event)
              }

              onMouseDragged = (event: MouseEvent) => {
                draggablePerformDrag(event)
              }
            }
          )
        }
      }.delegate
    }
  } 
```

Draggable trait 提供了 draggablePerformPress() 和 draggablePerformDrag() 方法，本质上是设置 translateX 和 translateY 的地方。

如果我单击并拖动 Rectangle 节点，它不会移动。但是，如果我删除 BorderPane 并使 Group 对象成为 Scene 的根，则可以拖动。我已经确认 onMouse 事件正在被触发，所以一定是由于某种原因 BorderPane 覆盖了 translateX/Y ...我只是不知道为什么，也不知道如何防止这种情况发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T02:11:50.117

我解决了这个问题。通过将组更改为窗格，代码现在可以工作了。但是，我仍然不确定为什么不能在这种情况下使用 Group（但它可能没有 BorderPane 作为其父级）。

# vim - Vim：在 BufReadCmd 之后触发 BufRead

> ID：13636599
> 
> 赞同：2
> 
> 时间：2012-11-29T23:21:12.847
> 
> 标签：vim

`BufReadCmd`对于加载远程文件非常有用，例如当您`:e protocol://some/file.txt`

当你想`filetype=text`在完成后设置时，诀窍就来了`BufReadCmd`。这在一般情况下很难做到。

理想情况下，所有文件类型都将在`ftplugin/filetype.vim`其中，您可以（可能）通过循环解决此问题`filetype off | filetype on`。实际上，`BufRead`事件会检测到许多文件类型。此外，许多插件使用`BufRead`事件向某些文件类型添加功能。

因此，如果我希望远程文件具有与本地文件相同的功能，我确实需要`BufRead`在处理完事件后触发`BufReadCmd`事件。我怎样才能做到这一点？

（注意：是的，我知道 scp 和远程编辑功能。它们不能在这里使用。我需要一些可以在后期使用的东西`BufReadCmd`。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:40:25.560

您应该可以使用以下`:doautocmd`命令：

```
:doauto BufRead 
```

您还可以指定自动命令应该使用什么文件名进行模式匹配，以防与 vim 自己检测到的不同。

# django - 没有路径前缀的 Django i18n 默认语言

> ID：13636604
> 
> 赞同：15
> 
> 时间：2012-11-29T23:21:41.070
> 
> 标签：django, internationalization

我有一个现有的多语言 Django 应用程序，我正在移植到 Django 1.4。I18n 支持目前基于一些丑陋的 hack，我想让它使用 Django 的内置 i18n 模块。

一个限制是我不想更改已经存在的 url。该站点已经活跃了一段时间，并且有指向它的外部链接，我不想中断或重定向。urls 方案是这样工作的：英文内容位于网站的根目录，而其他语言在域名中使用前缀：

英文网址：

```
/
/articles/
/suggestions/ 
```

西班牙语网址：

```
/es/
/es/articulos/
/es/sugerencias/ 
```

我已经得到了使用 Django 1.4 的 i18n 模块的翻译页面，但它真的，真的，真的想把所有的英文网址放在 /en/ 下。我尝试了一些不同的技巧，包括为英文版定义非国际化网址：

```
def build(callback):
  return callback('',
    url(_(r'^$'), home.index, name="home"),
    url(_(r'^articles/$'), content.article_list, name='article_list'),
    url(_(r'^suggestions/$'), suggestions.suggestions, name='suggestions'),
  )

urlpatterns = build(patterns)
urlpatterns += build(i18n_patterns) 
```

这使得 url 可以正确解析，但是用于反向解析的 {% url %} 标记不起作用。

完成无前缀英文网址的最佳方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-17T13:07:31.647

我使用solid-i18n-url 来解决类似的问题： [https ://github.com/st4lk/django-solid-i18n-urls](https://github.com/st4lk/django-solid-i18n-urls)

很好的描述它是如何工作的：http: [//www.lexev.org/en/2013/multilanguage-site-django-without-redirects/](http://www.lexev.org/en/2013/multilanguage-site-django-without-redirects/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-24T17:29:54.227

Django 1.10 原生支持它。正如他们在文档中所说：

> **i18n_patterns( **urls, prefix_default_language=True* )**
> 
> 这个函数可以在根 URLconf 中使用，Django 会自动将当前活动的语言代码添加到`i18n_patterns()`.
> 
> 将 prefix_default_language 设置为 False 会从默认语言 ( `LANGUAGE_CODE`) 中删除前缀。这在将翻译添加到现有站点时很有用，这样当前的 URL 就不会改变。

来源：[https ://docs.djangoproject.com/en/1.10/topics/i18n/translation/#language-prefix-in-url-patterns](https://docs.djangoproject.com/en/1.10/topics/i18n/translation/#language-prefix-in-url-patterns)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-13T23:17:09.440

**更新：阅读下面的答案，Django 1.10 原生支持它**

我遇到了这个问题并以这种方式解决了：

*   `i18n_patterns`创建了一个不作为站点主要语言前缀的替代方案（在 中定义`settings.LANGUAGE_CODE`）。

*   创建了一个仅使用 URL 前缀语言来激活当前语言的替代中间件。

我没有看到使用这种技术的任何副作用。

编码：

```
# coding: utf-8
"""
Cauê Thenório - cauelt(at)gmail.com

This snippet makes Django do not create URL languages prefix (i.e. /en/)
for the default language (settings.LANGUAGE_CODE).

It also provides a middleware that activates the language based only on the URL.
This middleware ignores user session data, cookie and 'Accept-Language' HTTP header.

Your urls will be like:

In your default language (english in example):

    /contact
    /news
    /articles

In another languages (portuguese in example):

    /pt/contato
    /pt/noticias
    /pt/artigos

To use it, use the 'simple_i18n_patterns' instead the 'i18n_patterns'
in your urls.py:

    from this_sinppet import simple_i18n_patterns as i18n_patterns

And use the 'SimpleLocaleMiddleware' instead the Django's 'LocaleMiddleware'
in your settings.py:

    MIDDLEWARE_CLASSES = (
    ...
        'this_snippet.SimpleLocaleMiddleware'
    ...
    )

Works on Django >=1.4
"""

import re

from django.conf import settings
from django.conf.urls import patterns
from django.core.urlresolvers import LocaleRegexURLResolver
from django.middleware.locale import LocaleMiddleware
from django.utils.translation import get_language, get_language_from_path
from django.utils import translation

class SimpleLocaleMiddleware(LocaleMiddleware):

    def process_request(self, request):

        if self.is_language_prefix_patterns_used():
            lang_code = (get_language_from_path(request.path_info) or
                         settings.LANGUAGE_CODE)

            translation.activate(lang_code)
            request.LANGUAGE_CODE = translation.get_language()

class NoPrefixLocaleRegexURLResolver(LocaleRegexURLResolver):

    @property
    def regex(self):
        language_code = get_language()

        if language_code not in self._regex_dict:
            regex_compiled = (re.compile('', re.UNICODE)
                              if language_code == settings.LANGUAGE_CODE
                              else re.compile('^%s/' % language_code, re.UNICODE))

            self._regex_dict[language_code] = regex_compiled
        return self._regex_dict[language_code]

def simple_i18n_patterns(prefix, *args):
    """
    Adds the language code prefix to every URL pattern within this
    function, when the language not is the main language.
    This may only be used in the root URLconf, not in an included URLconf.

    """
    pattern_list = patterns(prefix, *args)
    if not settings.USE_I18N:
        return pattern_list
    return [NoPrefixLocaleRegexURLResolver(pattern_list)] 
```

上面的代码可在： [https ://gist.github.com/cauethenorio/4948177](https://gist.github.com/cauethenorio/4948177)

# sql - SQL Server 2008 数学失败

> ID：13636608
> 
> 赞同：0
> 
> 时间：2012-11-29T23:21:55.467
> 
> 标签：sql, sql-server, function, math

在各种论坛上搜索了将近一个小时后，我得出的结论是，SQL Server 对简单的算术有点愚蠢。

我正在尝试使用一个直到最近似乎还可以正常工作的功能。在为正在使用的表单上的一组不同信息更改一些值后，我得到了奇怪的行为。

问题是它给了我基于 excel 电子表格公式的错误结果。

公式如下所示：

```
=IF(D8=0,0,(((D8*C12-C16)*(100-C13)/100+C16)/D8)+(C18*D8)) 
```

我的 SQL 如下所示：

```
(((@DaysBilled * @ContractRate - @ActualPlanDed) * (100 - @InsCover) / 100 + @ActualPlanDed) / @DaysBilled) + (@CoPay * @DaysBilled) 
```

用给定的数据填充变量如下所示：

```
(((11 * 433 - 15) * (100 - 344) / 100 + 15) / 11) + (15 * 11) 
```

更奇怪的是，如果我在服务器环境中手动使用上面的数字（在每个值的末尾添加 .00），它会给我 -11405.1200000000

根据我给出的值，它应该是 166.36。不幸的是，我得到 -886.83

这是整个函数及其调用方式：

```
ALTER FUNCTION Liability
(
@ClientGUID CHAR(32),
@RecordGUID CHAR(32),
@Type CHAR(3)
)
RETURNS DECIMAL(18,2) AS
BEGIN

DECLARE @ReturnValue decimal(18,2);

    DECLARE @DaysBilled int;
    DECLARE @ContractRate decimal(18,2);
    DECLARE @ActualPlanDed decimal(18,2);
    DECLARE @InsCover decimal(18,2);
    DECLARE @CoPay decimal(18,2);

IF (@Type = 'RTC')
BEGIN   
        SELECT @DaysBilled = RTCDaysBilled, 
                @ContractRate = CAST(REPLACE(REPLACE(ContractRateRTC, ' ',''),'$', '') AS DECIMAL(6,2)),
                @ActualPlanDed = RTCActualPlanDed, 
                @InsCover = InsRTCCover, 
                @CoPay = RTCCoPay
        FROM AccountReconciliation1
        WHERE @ClientGUID = tr_42b478f615484162b2391ef0b2c35ddc
        AND @RecordGUID = tr_abb4effa0d9c4fe98c78cb4d2e21ba5d
END
IF (@Type = 'PHP')
BEGIN   
        SELECT @DaysBilled = PHPDaysBilled, 
                @ContractRate = CAST(REPLACE(REPLACE(ContractRatePHP, ' ',''),'$', '') AS DECIMAL(6,2)),
                @ActualPlanDed = PHPActualPlanDed, 
                @InsCover = InsPHPCover, 
                @CoPay = PHPCoPay
        FROM AccountReconciliation1
        WHERE @ClientGUID = tr_42b478f615484162b2391ef0b2c35ddc
        AND @RecordGUID = tr_abb4effa0d9c4fe98c78cb4d2e21ba5d
END
IF (@Type = 'IOP')
BEGIN   
        SELECT @DaysBilled = IOPDaysBilled, 
                @ContractRate = CAST(REPLACE(REPLACE(ContractRateIOP, ' ',''),'$', '') AS DECIMAL(6,2)),
                @ActualPlanDed = IOPActualPlanDed, 
                @InsCover = InsIOPCover, 
                @CoPay = IOPCoPay
        FROM AccountReconciliation1
        WHERE @ClientGUID = tr_42b478f615484162b2391ef0b2c35ddc
        AND @RecordGUID = tr_abb4effa0d9c4fe98c78cb4d2e21ba5d
END
        IF (@DaysBilled <> 0)
    BEGIN
        SET @ReturnValue = (((@DaysBilled * @ContractRate - @ActualPlanDed)
        *
        (100 - @InsCover) / 100 + @ActualPlanDed)
        /
            @DaysBilled
        )
        +
        (@CoPay * @DaysBilled)
    END
        ELSE
    BEGIN
        SET @ReturnValue = 0;
    END
RETURN @ReturnValue;
END 
```

它是通过从我们的前端运行 select 语句来调用的，但结果与从 management studio 中调用该函数相同：

```
SELECT dbo.Liability('ClientID','RecordID','PHP') AS Liability 
```

我一直在阅读一元减号如何破坏 SQL 的数学处理，但我不完全确定如何抵消它。

这个函数的最后一个愚蠢的技巧：它必须保持一个函数。我无法将其转换为存储过程，因为它必须与我们的前端一起使用，而前端无法使用存储过程。

SQL Server 甚至关心括号吗？还是只是无视他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:37:46.993

计算是正确的，如果您使用浮点值而不是整数，它当然会有所不同。

对于 (((11 * 433 - 15) * (100 - 344) / 100 + 15) / 11) + (15 * 11) 大约 -886.xx 的值取决于使用整数/浮点数的位置是正确的，什么让你相信它应该是 166.36？

# php - XMLHttpRequest ReadyState 始终未定义

> ID：13636612
> 
> 赞同：5
> 
> 时间：2012-11-29T23:22:24.580
> 
> 标签：php, javascript, html, ajax

我正在关注 w3schools 的 PHP/AJAX 教程，但我在第一方遇到了一些障碍。每次我调用这个函数时，readystate 总是未定义的。

```
function showHint(str) {
    if (str.length == 0) {
        document.getElementById("txtHint").innerHTML = "";
            return;
        }

        var xmlhttp;

        if (window.XMLHttpRequest) {
            console.log("Using XMLHttpRequest");
            xmlhttp = new XMLHttpRequest();
        }
        else {
            console.log("Using ActiveXObject");
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        }

        xmlhttp.open("GET", "gethint.php?q=" + str, true);
        xmlhttp.send();

        xmlhttp.onreadystatechange = function() {
        console.log(xmlhttp.readystate);

        if (xmlhttp.readystate == 4 && xmlhttp.status == 200) {
            console.log(xmlhttp.status);
            document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
        }
    }
} 
```

如果我改变这一行：

```
if (xmlhttp.readystate == 4 && xmlhttp.status == 200) { ... 
```

对此（通过错字）：

```
if (xmlhttp.readystate = 4 && xmlhttp.status == 200) { ... 
```

然后它就起作用了，但感觉有点像“这里发生了魔法”，像这样编写代码。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-29T23:26:54.010

JS 区分大小写。您需要检查`readyState`财产，而不是`readystate`财产。

```
 if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        console.log(xmlhttp.status);
        document.getElementById("txtHint").innerHTML = xmlhttp.responseText;
    } 
```

# javascript - 在 Jade 中渲染下划线变量

> ID：13636613
> 
> 赞同：4
> 
> 时间：2012-11-29T23:22:33.247
> 
> 标签：javascript, backbone.js, underscore.js, pug, scalate

我已经包含了[这张票](https://stackoverflow.com/questions/8528885/using-jade-templates-in-backbone-js)中描述的资产，并且下划线变量除了在标签内时有效。我无法获取变量以在动态标签内呈现以使用 Backbone 事件`data-id=someid`进行处理。`onClick`

在标准 HTML 中：

```
<script type="text/template" id="template-action1-thing">
<tr>
   <td class="action-td" style="width: 10%;">
      <button id="do-remove" data-id="<%= obj.id %>">X</button>             
   </td>
</tr>
</script> 
```

使用（Scalate）Jade，它不起作用：

```
script(id='template-action1-thing' type='text/template')
  p <%= obj.id %> Will render
  tr
    td.action-td(style='width: 10%;')
      button(id='do-remove' data-id='<%= obj.id %>') 
        | X 
```

如果我这样做[，](https://gist.github.com/1886215)实际的**html**会正确地使用变量呈现，尽管不正确：

```
tr td(style='width: 10%;') button(id='do-remove_thing' data-id='myid') X 
```

使用如下模板：

```
script(id='template-action1-thing' type='text/template')
  |   td.action-td(style='width: 10%;')
  |     button(id='do-remove_thing' data-id='<%= obj.id %>') X 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T05:11:30.320

我知道这个问题已经得到解答，但是在寻找更有说服力的解决方案时，我发现这也有效：

```
script(type='text/html', id='tpl-name')
  h3!='<%= foo %>'
  p!='<%= bar %>' 
```

这允许您继续使用 Jade 语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T00:29:04.937

如果要在jade中使用下划线模板，则需要将模板更改为如下所示：

```
script(id='template-action1-thing' type='text/template')
  | <tr>
  |   <td class="action-td" style="width: 10%;">
  |     <button id="do-remove" data-id="<%= obj.id %>">X</button>             
  |   </td>
  | </tr> 
```

或者你可以看看使用[玉模板](https://github.com/visionmedia/jade#includes)而不是下划线模板。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-12T08:30:52.650

Now we can use `script.` to insert a block of plain text as described here: [http://jade-lang.com/reference/plain-text/](http://jade-lang.com/reference/plain-text/).

```
script(id='template-action1-thing' type='text/template').
    <tr>
       <td class="action-td" style="width: 10%;">
          <button id="do-remove" data-id="<%= obj.id %>">X</button>             
       </td>
    </tr> 
```

# php - 登录后如何重定向？php

> ID：13636619
> 
> 赞同：0
> 
> 时间：2012-11-29T23:23:23.253
> 
> 标签：php, html, login

> **可能重复：**
> [PHP 登录然后重定向](https://stackoverflow.com/questions/6436245/php-login-then-redirect)

我刚刚制作了一个php登录页面。输入他们的数据后，信息将提交回进行验证的同一页面。

我只是不确定完成此操作后如何进入我的内容页面。

我是否使用仅在验证成功时才运行的 require 语句？

我在 SO 上阅读了类似的帖子，解决方案是：

```
public void redirect(mixed $url, boolean $terminate=true, integer $statusCode=302) 
```

但我不确定我应该把什么放在哪里，以及我真正输入的哪些术语与哪些术语是占位符值，我应该填充一些东西。也不确定 $url 是否可以用 memberpage.php 之类的相对 url 填充。

一些澄清将不胜感激。

编辑：等等……public void……这不是java术语吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:26:37.177

成功登录后，设置`$_SESSION`您需要的任何变量（如果适用），然后使用以下命令重定向：

```
header ("Location: mypage.php"); 
```

请记住，您需要在输出（回显）任何内容之前发送此标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:27:18.023

您可以尝试在标题中添加重定向。代码将是这样的：

login_validator.php

```
validation code
if(isvalid(login)){
    header('Location: loggedin/welcome.php');
}else{
    some other handler;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:27:21.320

所以，如果我做对了，你有一个用户输入信息，然后点击提交-该表单然后发布到自身，你在顶部有 php，上面写着类似

```
<?PHP 
    if(isset($_POST[name]){ 
        //input everything 
    } 
?> 
```

如果这是真的，你可以只写一行这样说：

```
header('Location: http://www.yoursite.com/new_page.html') ; 
```

里面，在前一个 if 语句的最底部。

# python - Numpy：逐个元素减去数组元素

> ID：13636622
> 
> 赞同：1
> 
> 时间：2012-11-29T23:23:37.820
> 
> 标签：python, numpy, matplotlib

标题可能含糊不清，不知道该怎么说。

我在 python 中使用 numpy 和 matplotlib 的粒子模拟器已经有点远了，我已经设法实现了 coloumb、重力和风，现在我只想添加温度和压力，但我有一个优化前的问题（万恶之源）。我想看看粒子何时崩溃：

**问：**在 numpy 中是否可以根据 bool 条件来获取数组与每个元素的差异？我想避免循环。

例如：`(x - any element in x) < a` 应该返回类似

```
[True, True, False, True] 
```

如果 x 中的元素 0,1 和 3 满足条件。

**编辑：**

等效循环是：

```
for i in len(x):
  for j in in len(x):
    #!= not so important
    ##earlier question I asked lets me figure that one out
    if i!=j: 
      if x[j] - x[i] < a:
       True 
```

我注意到 numpy 操作比 if 测试快得多，这帮助我加快了速度。

如果有人想玩它，这是一个示例代码。

```
#Simple circular box simulator, part of part_sim
#Restructure to import into gravity() or coloumb () or wind() or pressure()
#Or to use all forces: sim_full()
#Note: Implement crashing as backbone to all forces

import numpy as np
import matplotlib.pyplot as plt

N = 1000        #Number of particles
R = 8000        #Radius of box          
r = np.random.randint(0,R/2,2*N).reshape(N,2)
v = np.random.randint(-200,200,r.shape)
v_limit = 10000 #Speedlimit

plt.ion()
line, = plt.plot([],'o')
plt.axis([-10000,10000,-10000,10000])

while True:
    r_hit = np.sqrt(np.sum(r**2,axis=1))>R   #Who let the dogs out, who, who?
    r_nhit = ~r_hit                     
    N_rhit = r_hit[r_hit].shape[0]
    r[r_hit] = r[r_hit] - 0.1*v[r_hit]       #Get the dogs back inside
    r[r_nhit] = r[r_nhit] +0.1*v[r_nhit]
    #Dogs should turn tail before they crash!
    #---
    #---crash code here....
    #---crash end
    #---
    vmin, vmax = np.min(v), np.max(v)        
    #Give the particles a random kick when they hit the wall
    v[r_hit]  = -v[r_hit] + np.random.randint(vmin, vmax, (N_rhit,2))
    #Slow down honey
    v_abs = np.abs(v) > v_limit
    #Hit the wall at too high v honey? You are getting a speed reduction
    v[v_abs] *=0.5
    line.set_ydata(r[:,1])
    line.set_xdata(r[:,0])
    plt.draw() 
```

一旦我弄清楚如何......以便可以在更大的盒子中轻松区分高速粒子，我计划为上面的数据点添加颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:28:47.450

> 例如：x - x < a 中的任何元素应该返回类似
> 
> 【对，对，对，对，对】
> 
> 如果 x 中的元素 0,1 和 3 满足条件。我注意到 numpy 操作比 if 测试快得多，这帮助我加快了速度。

是的，它只是`m < a`。例如：

```
>>> m = np.array((1, 3, 10, 5))
>>> a = 6
>>> m2 = m < a
>>> m2
array([ True,  True, False,  True], dtype=bool) 
```

现在，对于这个问题：

> 问：在 numpy 中是否可以根据 bool 条件来获取数组与每个元素的差异？我想避免循环。

我不确定您在这里要求什么，但它似乎与下面的示例不匹配。例如，您是否尝试从满足谓词的每个元素中减去 1？在这种情况下，您可以依赖以下事实，`False==0`并且`True==1`只需减去布尔数组：

```
>>> m3 = m - m2
>>> m3
>>> array([ 0,  2, 10,  4]) 
```

根据您的说明，您需要此伪代码循环的等效项：

```
for i in len(x):
  for j in in len(x):
    #!= not so important
    ##earlier question I asked lets me figure that one out
    if i!=j: 
      if x[j] - x[i] < a:
        True 
```

我认为这里的困惑在于这与您所说的完全相反：您不希望“基于布尔条件的数组与其每个元素的差异”，而是“基于差异的布尔条件具有每个元素的数组”。即使这样也只会让你真正得到一个 len(m)*len(m) bools 的方阵，但我认为剩下的部分是“任何”。

无论如何，您要求的是隐式笛卡尔积，将 m 的每个元素与 m 的每个元素进行比较。

您可以轻松地将其从两个循环减少到一个（或者，更确切地说，隐式矢量化其中一个，获得通常的 numpy 性能优势）。对于每个值，通过从每个元素中减去该值并将结果与​​ 进行比较来创建一个新数组`a`，然后将它们连接起来：

```
>>> a = -2
>>> comparisons = np.array([m - x < a for x in m])
>>> flattened = np.any(comparisons, 0)
>>> flattened
array([ True,  True, False,  True], dtype=bool) 
```

但是你也可以很容易地把它变成一个简单的矩阵运算。`m`从 的每个其他元素中减去 的每个元素`m`就是`m - m.T`。（您可以使乘积更明确，但`numpy`处理添加行向量和列向量的方式不是必需的。）然后您只需将其中的每个元素与 scalar 进行比较`a`，然后 reduce with `any`，就完成了：

```
>>> a = -2
>>> m = np.matrix((1, 3, 10, 5))
>>> subtractions = m - m.T
>>> subtractions
matrix([[ 0,  2,  9,  4],
        [-2,  0,  7,  2],
        [-9, -7,  0, -5],
        [-4, -2,  5,  0]])
>>> comparisons = subtractions < a
>>> comparisons
matrix([[False, False, False, False],
        [False, False, False, False],
        [ True,  True, False,  True],
        [ True, False, False, False]], dtype=bool)
>>> np.any(comparisons, 0)
matrix([[ True,  True, False,  True]], dtype=bool) 
```

或者，将它们放在一行中：

```
>>> np.any((m - m.T) < a, 0)
matrix([[ True,  True,  True,  True]], dtype=bool) 
```

如果您需要`m`成为数组而不是矩阵，则可以将减法线替换为`m - np.matrix(m).T`.

对于更高维度，您实际上确实需要在数组中工作，因为您正在尝试将 2D 数组与自身进行笛卡尔积以获得 4D 数组，并且`numpy`不做 4D 矩阵。因此，您不能使用简单的“行向量 - 列向量 = 矩阵”技巧。但是您可以手动执行此操作：

```
>>> m = np.array([[1,2], [3,4]]) # 2x2
>>> m4d = m.reshape(1, 1, 2, 2)  # 1x1x2x2
>>> m4d
array([[[[1, 2],
         [3, 4]]]])
>>> mt4d = m4d.T # 2x2x1x1
>>> mt4d
array([[[[1]],
        [[3]]],
       [[[2]],
        [[4]]]])
>>> subtractions = m - mt4d # 2x2x2x2
>>> subtractions
array([[[[ 0,  1],
         [ 2,  3]],
        [[-2, -1],
         [ 0,  1]]],
       [[[-1,  0],
         [ 1,  2]],
        [[-3, -2],
         [-1,  0]]]]) 
```

从那里开始，其余部分与以前相同。把它放在一行中：

```
>>> np.any((m - m.reshape(1, 1, 2, 2).T) < a, 0) 
```

（如果您还记得我最初的答案，我会不知何故`reshape`通过乘以`m`1 的列向量来做同样的事情，这显然是一种更愚蠢的方法。）

最后一个快速的想法：如果您的算法真的是“（对于 , 的任何元素）对于每个元素的布尔结果，那么`y`您实际上不需要“对于任何元素”，您可以只使用“对于最大元素” . 所以你可以从 O(N^2) 简化为 O(N)：`m``x - y < a``x``m``y``y`

```
>>> (m - m.max()) < a 
```

或者，如果`a`是肯定的，那总是错误的，所以你可以简化为 O(1)：

```
>>> np.zeros(m.shape, dtype=bool) 
```

但我猜你真正的算法实际上是在使用`abs(x - y)`，或者更复杂的东西，不能以这种方式简化。

# java - 带有 JDialog 的 JLayeredPane

> ID：13636623
> 
> 赞同：-1
> 
> 时间：2012-11-29T23:23:40.217
> 
> 标签：java, swing, jdialog, jlayeredpane

将 JLayeredPane 添加到 JDialog 时，我无法使任何组件出现在 JLayeredPane 上。

我也一直无法找到显示这可以在合理大小的代码块中完成的网络资源。iv 看到的每一个景象都“声称”这是可以做到的，然后显示了一个令人作呕的长解决方案。

我想要的是在一个 JLayered 窗格中添加一个 Button 并将一个带有图标的 JLabel 也放在这个窗格上。在英语中，我想要一个按钮，其文本前面有一个图标。

那就是 awt Button，因为我一直无法找到一种方法来制作一个看起来像摇摆 JButton 的系统。

编辑：你能帮我做一些更具体的事情吗？我认为我在帖子中有点含糊不清。

```
Button button = new Button("ok");
JDialog dialog = new JDialog(null,"Windows",Dialog.ModalityType.APPLICATION_MODAL);
dialog.getLayeredPane().add(button);
dialog.pack();
dialog.setVisible(true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:36:27.540

此[示例](https://stackoverflow.com/a/9629892/230513)似乎适用于添加到构造函数的以下行：

```
this.addMouseListener(new MouseHandler(this));
this.add(new JLabel("Label"));
this.add(new JButton(UIManager.getIcon("html.pendingImage"))); 
```

![在此处输入图像描述](../Images/edcb0a37bb8c367d4306c00043163890.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T23:42:55.693

我好像没什么问题...

```
public class TestLayeredDialog {

    public static void main(String[] args) {
        new TestLayeredDialog();
    }

    public TestLayeredDialog() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDialog dialog = new JDialog();
                dialog.setModal(true);
                dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
                dialog.setLayout(new BorderLayout());
                dialog.add(new MyContent());
                dialog.pack();
                dialog.setLocationRelativeTo(null);
                dialog.setVisible(true);

                System.exit(0);
            }
        });
    }

    public class MyContent extends JLayeredPane {

        public MyContent() {
            JLabel label = new JLabel("Hello new world");
            label.setSize(label.getPreferredSize());
            label.setLocation(0, 0);
            add(label);

            Dimension size = getPreferredSize();

            JButton button = new JButton("Click me");
            button.setSize(button.getPreferredSize());
            button.setLocation(size.width - button.getWidth(), size.height - button.getHeight());
            button.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    SwingUtilities.getWindowAncestor(MyContent.this).dispose();
                }
            });
            add(button);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

    }

} 
```

请记住，`JLayeredPane`没有布局管理器。您将负责管理子组件的大小和位置，这就是重点。

**更新了新示例**

![在此处输入图像描述](../Images/4ed5e516bd2175f5983e22f452c8e253.png)

```
public class TestLayeredDialog {

    public static void main(String[] args) {
        new TestLayeredDialog();
    }

    public TestLayeredDialog() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JDialog dialog = new JDialog();
                dialog.setModal(true);
                dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
                dialog.setLayout(new BorderLayout());

                JLabel label = new JLabel("Hello new world");
                label.setSize(label.getPreferredSize());
                label.setLocation(0, 0);
                dialog.getLayeredPane().add(label, new Integer(1));

                dialog.setSize(100, 100);
                dialog.setLocationRelativeTo(null);
                dialog.setVisible(true);

                System.exit(0);
            }
        });
    }
} 
```

的分层窗格`JRootPane`负责（除其他外）布置内容窗格和菜单栏。它还用于（在某些情况下）显示弹出窗口等内容。

![在此处输入图像描述](../Images/af7ea7998e331e6e575d6e4dfa2f7426.png)

阅读[如何使用根窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)

> 您可以选择将组件放在根窗格的分层窗格中。如果您这样做，那么您应该知道某些深度被定义为用于特定功能，并且您应该按预期使用深度。否则，您的组件可能无法与其他组件很好地配合使用。这是一个显示功能层及其关系的图表：

使用它意味着您正在与屏幕上已经存在的组件竞争。

除非你有很好的理由来搞乱这个组件，否则我建议你避免它，因为 1- 将来可能会更改（组件的层位置）和 2- 它可能会干扰使用的其他组件摆动 API

# asp.net - 对 ASP 脚本的 Node.js 服务器端 HTTP 请求

> ID：13636625
> 
> 赞同：1
> 
> 时间：2012-11-29T23:23:42.330
> 
> 标签：asp.net, node.js, http, httpcookie

目前在 node.js 中构建一个应用程序。我正在尝试向 ASP 脚本发出服务器端 HTTP 请求并返回结果。

如果我在浏览器中导航到 url，一切都很好。返回数据。但是，当我在 node.js 中使用 restler 或任何其他模块执行此操作时。我一无所获……直到我将 ASP.NET_SessionId cookie 添加到请求的标头中。我从浏览器的成功 GET 中复制了这个 cookie。

如何在 node.js 中获取/设置此会话 cookie 服务器端？

使用 express 框架。代码如下。

应用程序.js

```
/**
 * Module dependencies.
 */

var express = require('express')
  , routes = require('./routes')
  , user = require('./routes/user')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser('cat'));
  app.use(express.session());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);
app.get('/users', user.list);

http.createServer(app).listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

路由 index.js

```
/*
 * GET home page.
 */

exports.index = function(req, res){

    var http = require("http"),
    sys = require('util'),
    rest = require('restler');

    rest.get('http://192.168.154.134/dca/stream/StreamDown.asp?' +
        'Action=GetRepositoryConnections' , {headers:{
        'Cookie':'ASP.NET_SessionId=jj1jx255wlkwib45gq0d3555;' +
        ' ASPSESSIONIDASDDSBQR=ACABCJNDIIONGGMPGAOMMJJD;' +
        ' ASPSESSIONIDCQQRQDQR=BAIBCEODMMKAPJAOLLMMDNEJ;' +
        ' ASPSESSIONIDAQSTRAQR=KMLDIOODECFNBKPGINLLNBKC;' +
        ' ASPSESSIONIDASQQQDQR=OKGBKCPDHDIKAJNOGFKACCCG'}

    }).on('complete', function(result) {

        if (result instanceof Error) {
            sys.puts('Error: ' + result.message);
            this.retry(5000); // try again after 5 sec
        } else {
            sys.puts(result);
        }
    });

    res.render('index', { title: 'Express' });

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:18:44.087

尝试[请求](https://github.com/mikeal/request)。它有一个“饼干罐”，所以它会为你记住饼干。

# c++ - 如何将字符串解析为 C++ 类型名？

> ID：13636629
> 
> 赞同：3
> 
> 时间：2012-11-29T23:23:56.287
> 
> 标签：c++, performance, typename

如何实现`atot()`它使用`atof()`, `atoi()`, 或`atol()`根据类型？目前它`atof()`用于所有类型：

```
template<typename T>
T Mtx<T>::atot(const char *s) const
{
    return atof(s);
} 
```

请注意，速度非常重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:33:26.927

`boost::lexical_cast<T>`应该这样做，基本上

```
template<typename T>
T Mtx<T>::atot(const char *s) const
{
    return boost::lexical_cast<T>(s);
} 
```

演示：

```
#include <boost/lexical_cast.hpp>

template<typename T>
T atot(const char *s)
{
    return boost::lexical_cast<T>(s);
}

int main()
{
    auto i = atot<int>("3");
    auto d = atot<double>("-INF");
    auto f = atot<double>("314e-2");
    auto ul = atot<unsigned long>("65537");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T23:34:05.940

最直接的解决方案是专业化：

```
template<>
double Mtx<double>::atot(const char *s) const
{
    return atof(s);
}

template<>
int Mtx<int>::atot(const char *s) const
{
    return atoi(s);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T23:34:38.270

专业化是根据特定类型创建模板的特殊实现。

在这种情况下，您可以这样做：

```
template<>
float Mtx<float>::atot(const char *s) const
{
    return atof(s);
}

template<>
int Mtx<int>::atot(const char *s) const
{
    return atoi(s);
} 
```

... 等等

因此，如果您使用`atot`with`float`或 with `int`，则将使用上述实现。对于任何其他类型，将使用您已经拥有的通用类型。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T23:33:59.393

我真的不明白你为什么要这个。调用正确的方法似乎同样容易。

但是像下面这样的东西呢？

```
void atot(const char *s, float& result)
{
    result = atof(s);
}

void atot(const char *s, long& result)
{
    result = atol(s);
}

void atot(const char *s, int& result)
{
    result = atoi(s);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T23:37:46.753

如果类型出现在参数之一中，则可以重载函数。所以你需要一个 out 参数而不是返回值：

```
void atonum(const char*, int&);
void atonum(const char*, long&);
void atonum(const char*, float&); 
```

如果你不喜欢这样，你可以使用模板专业化。请参阅有关此的其他答案。

或者您可以将重载与包装模板结合起来：

```
template<typename T> void atonum(const char* a)
{
    T tmp;
    atonum(a, tmp);
    return tmp;
} 
```

但这仍然和专用模板一样难看。

通过重载类型转换运算符，您可以为调用者获得更好的语法。概念证明：

```
#include <cstdio>
#include <cstdlib>
struct atonum
{
    atonum(const char* a):m_a(a){}
    operator int(){printf("int\n"); return atoi(m_a);}
    operator long(){printf("long\n"); return atol(m_a);}
    operator float(){printf("float\n"); return atof(m_a);}
private:
    const char* m_a;
};
int main(int argc, const char* argv[])
{
    int i = atonum("1");
    long l = atonum("2");
    float f = atonum("3.0");
    return i+l+f;
} 
```

# opencart - Opencart 为一个类别添加额外的 tpl 布局

> ID：13636630
> 
> 赞同：4
> 
> 时间：2012-11-29T23:24:07.350
> 
> 标签：opencart

我正在尝试在 Opencart 1.5.4 中设置其他页面和类别布局。

我已经到了一个阶段，如果我在地址栏中输入新类别的路线，新模板会按我的意愿显示，但我似乎无法在 OC 中注册该路线更改。

如果我在 .htaccess 文件中指定更改，新模板会按预期加载，但我不认为这是问题的正确答案（尽管它有效）。

除了 .htaccess （我确定方法不正确）

```
RewriteRule ^skis$ index.php?route=product/categories&path=1  [L,QSA] 
```

我创建了两个新文件

```
/catalog/view/theme/default/template/product/categories.tpl
/catalog/controller/product/categories.php 
```

在 /catalog/controller/product/categories.php 中，我更改了内容以反映新的 tpl 文件；

```
class Controllerproductcategories extends Controller { 
```

.

```
if (file_exists(DIR_TEMPLATE . $this->config->get('config_template') . '/template/product/categories.tpl')) {
 $this->template = $this->config->get('config_template') . '/template/product/categories.tpl';
} else {
 $this->template = 'default/template/product/categories.tpl';
} 
```

**所以总而言之**

1.  如果我在 .htaccess 文件中指定重写，则布局加载，如果我不这样做，则不会。
2.  我在 OC 中添加了一个新布局，并根据类别选择了它![在此处输入图像描述](../Images/acad673a4ea888017a367b03eaf9811f.png)![在此处输入图像描述](../Images/1887862ad99eb76b6f6e676bce7184d7.png)

有人有任何想法我可能会尝试使其正常工作吗？我有大量模板要为产品、类别和信息页面创建，因此希望正确执行此操作。

提前发送

斯图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:10:10.097

我最终选择了这种方法..可能会帮助其他人。

```
if ($this->data['heading_title'] == "Skis") {

    $this->template = $this->config->get('config_template') . '/template/product/categories.tpl';

} elseif ($this->data['heading_title'] == "Softgoods") {

    $this->template = $this->config->get('config_template') . '/template/product/category.tpl';

} elseif ($this->data['heading_title'] == "Outlet Store") {

    $this->template = $this->config->get('config_template') . '/template/product/category.tpl';

} else {

    $this->template = $this->config->get('config_template') . '/template/product/category.tpl';

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-30T00:24:40.520

据我所知，您正在尝试对每个单独的模板进行硬编码，并且它并不能真正按照您为类别使用布局选择的方式工作。布局旨在安排页面上的内容，而不是指定模板

实际上，我已经创建了您想要实现的商业版本，可以在[此处](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=8056)找到。它允许您创建模板并将其分配给一个或多个页面。它适用于产品、类别、制造商和信息页面。它还允许您为整个类别或制造商下的产品指定模板

# android - 如何为来自 IME 的结果启动 Activity

> ID：13636631
> 
> 赞同：5
> 
> 时间：2012-11-29T23:24:08.693
> 
> 标签：android, android-intent, startactivityforresult

我正在开发一个应用程序，它应该向启动意图的应用程序返回一些文本。

但启动意图的应用程序是 IME/软键盘。所以`StartActivityForResult`不可用，因为 IME 是一项服务。

我怎样才能做到这一点？

到目前为止我得到了什么：

键盘：

```
final Intent intent = new Intent("com.example.helloworld.GETTEXT");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
intent.putExtra("keyboard", true);
startActivity(intent); 
```

其他应用：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Bundle extras = getIntent().getExtras();
    if (extras == null){                
        return;
    } else {
        finish();
    }
}

@Override
public void finish() {
    Intent data = new Intent();
    data.putExtra("test", "PASSED");
    setResult(RESULT_OK, data);
    super.finish();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-20T03:23:34.837

您可以使用`ResultReceiver`. 看看[这个例子](https://stackoverflow.com/a/29906305/4918660)，它很清楚地解释了它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T12:07:49.600

您可以为此使用 ResultReceiver。

```
ResultReceiver lReceiver = new KeyboardResultReceiver(aListener);
final Intent intent = new Intent("com.example.helloworld.GETTEXT");
intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.addFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK);
intent.putExtra(EXTRA_RESULT_RECIEVER, lReceiver);
intent.putExtra("keyboard", true);
startActivity(intent);

private static final class KeyboardResultReceiver extends ResultReceiver {

    public FileUploadResultReceiver() {
    }

    @Override
    protected void onReceiveResult(int aResultCode, Bundle aResultData) {
            //Do your thing here you can also use the bundle for your data transmission
    }
} 
```

# php - php mysql 使用 concat 连接表

> ID：13636632
> 
> 赞同：2
> 
> 时间：2012-11-29T23:24:11.590
> 
> 标签：php, mysql

谁能帮我这个？
我正在查询由 country_id 链接的 2 个表 country_table 和 language_table。

国家表：

```
country_id    continent      country  
 100          asia            china
 101          asia            japan
 102          europe          UK
 103          europe          germany 
```

语言表：

```
country_id    language_id     language
 100             01           mandarin  
 100             02           cantonese  
 102             03           english  
 102             04           french
 102             05           welsh 
```

我想要实现的是显示所有有或没有语言的国家。如果它有语言，它应该像下面的示例输出一样连接起来。

```
continent    country    language  
asia          china      mandarin, cantonese  
asia          japan      ----
europe        UK         english, french, welsh
europe        germany    ---- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:31:08.283

您可以使用该[`GROUP_CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)功能执行以下操作：

```
select c.continent,
  c.country,
  group_concat(case 
               when l.language is null 
               then '----' else l.language end order by l.language) language
from country_table c
left join language_table l
  on c.country_id = l.country_id
group by c.continent, c.country 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/955c7/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:30:03.533

你需要做这样的事情。

```
SELECT ct.continent, ct.country, GROUP_CONCAT(lt.language)
FROM country_table ct
LEFT JOIN language_tabel lt USING(country_id)
GROUP BY ct.country 
```

# android - 在 Android 中禁用后退按钮不起作用

> ID：13636633
> 
> 赞同：1
> 
> 时间：2012-11-29T23:24:19.877
> 
> 标签：android, back-button

我正在编写一个 Android 应用 API 11，并在 TabActivity 中使用它：

```
@Override
public void onBackPressed() {
} 
```

但是后退按钮仍然有效，为什么？我必须在 TabActivity 中做一些不同的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:30:07.263

好的，简单的回答，我不得不把它放到每个标签的子活动中。

# android - 为什么我退出后我的 facebook 会话仍然有效？

> ID：13636638
> 
> 赞同：2
> 
> 时间：2012-11-29T23:24:35.967
> 
> 标签：android, facebook, facebook-android-sdk

我的注销代码：

```
if(fb.isSessionValid()){    
            masyncfb.logout(this, new RequestListener() {
                  @Override
                  public void onComplete(String response, Object state) {
                      Log.d(TAG, "Logging you out: "+response);
                  }

                  @Override
                  public void onIOException(IOException e, Object state) {}

                  @Override
                  public void onFileNotFoundException(FileNotFoundException e,
                        Object state) {}

                  @Override
                  public void onMalformedURLException(MalformedURLException e,
                        Object state) {}

                  @Override
                  public void onFacebookError(FacebookError e, Object state) {}
                });
                      updateButtonImage();                  

        }else{ 
```

我的`updateButtonImage()`方法是：

```
private void updateButtonImage() {
        // TODO Auto-generated method stub
        if(fb.isSessionValid()){
            Toast.makeText(MainActivity.this, "logged in", Toast.LENGTH_LONG).show();
            button.setImageResource(R.drawable.logout);
        }else{
            button.setImageResource(R.drawable.login);
            Toast.makeText(MainActivity.this, "logged out", Toast.LENGTH_LONG).show();
        }
    } 
```

`updateButtonImage()`方法在登录后将按钮图像从“登录”更改为“注销”，但不会在注销后将按钮从“注销”更改为“登录”。我确信在单击注销按钮（来自 logcat）后我已成功从 Facebook 注销。所以，这意味着我的会话仍然有效，尽管我已成功从 Facebook 注销。**为什么？我该如何解决这个问题？**我只需要将按钮从“注销”更改为“登录”。**我应该怎么办？**

**注意：我正在使用 facebook SDK**

**已编辑**

我想我正在尝试在 AsyncFacebookRunner.java 中的注销方法中的线程完成其工作之前更改我的按钮。如果是真的那么我应该如何等待线程完成它的工作然后执行我的`updateButtonImage()`方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:59:35.310

为了摆脱它，我使用`sessionlogin`. 有了它，它工作正常。

# objective-c - 如何从 KeyChain 获取代理主机的用户名？

> ID：13636639
> 
> 赞同：2
> 
> 时间：2012-11-29T23:24:35.523
> 
> 标签：objective-c, macos, xcode4, keychain

我正在 Mac 上编写一个实用程序，需要自动确定代理信息。我已经设法获取代理主机和端口（来自自动代理配置文件），但是如何从钥匙串中获取用户名呢？

我知道您可以使用 SecKeychainAddInternetPassword 获取代理密码，但我也不知道用户名。有没有办法获取用户名和密码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T09:06:41.490

我发现它有点复杂。首先，您必须询问系统配置代理是打开还是关闭。然后，您必须询问钥匙串是否在给定代理（HTTP、HTTPS 等）的返回主机名上有任何帐户。然后，如果钥匙串说是，您可以从结果中获取用户名并询问钥匙串以提供匹配的密码。此时，用户可能会看到一条警告，要求您允许您的应用访问密码。

这是一些示例代码（Mac OS X 10.6+，ARC）。

**代理检测器.h：**

```
#import <Foundation/Foundation.h>

@interface ProxyDetector : NSObject

-(ProxyDetector *)init;
-(void)detectHttpProxyReturningHostname:(NSString **)hostName port:(int *)port username:(NSString **)username password:(NSString **)password;
-(void)detectHttpsProxyReturningHostname:(NSString **)hostName port:(int *)port username:(NSString **)username password:(NSString **)password;

@end 
```

**代理检测器.m：**

```
#import "ProxyDetector.h"
#import <SystemConfiguration/SCDynamicStoreCopySpecific.h>
#import <SystemConfiguration/SCSchemaDefinitions.h>
#import <Security/Security.h>

@implementation ProxyDetector

-(ProxyDetector *)init;
{
    if ((self = [super init])) {
        // init
    }
    return self;
}

void detectProxyWithParams(CFStringRef proxyEnableKey, CFStringRef proxyHostNameKey, CFStringRef proxyPortKey, CFTypeRef proxyProtocol, UInt32 proxyProtocolCode, NSString **hostNamePtr, int *portPtr, NSString **usernamePtr, NSString **passwordPtr)
{
    // get general proxy info
    CFDictionaryRef proxyInfoCPtr = SCDynamicStoreCopyProxies(NULL);
    NSDictionary *proxyInfo = (__bridge NSDictionary *) proxyInfoCPtr;
    NSNumber *proxyEnabled = proxyInfo[(__bridge NSString *)proxyEnableKey];

    // prefill null values for data we may not set later
    *usernamePtr = nil;
    *passwordPtr = nil;

    // is it enabled?
    if (![proxyEnabled intValue]) {
        *hostNamePtr = nil;
        *portPtr = 0;
        return;
    }

    // we can get hostname and port number from this info, but not username and password
    *hostNamePtr = proxyInfo[(__bridge NSString *)proxyHostNameKey];
    NSNumber *portNumber = proxyInfo[(__bridge NSString *)proxyPortKey];
    *portPtr = [portNumber intValue];

    // check in the keychain for username and password
    CFArrayRef result = NULL;
    OSStatus status = SecItemCopyMatching(
                              (__bridge CFDictionaryRef) [NSDictionary dictionaryWithObjectsAndKeys:
                                                          (__bridge id)kSecClassInternetPassword, kSecClass,
                                                          kSecMatchLimitAll, kSecMatchLimit,
                                                          kCFBooleanTrue, kSecReturnAttributes,
                                                          proxyProtocol, kSecAttrProtocol,
                                                          nil],
                              (CFTypeRef *) &result
                              );
    if (status != noErr) {
        if (status != errSecItemNotFound) {
            // unexpected error (else, just no password)
            NSString *errorStr = (__bridge NSString *)SecCopyErrorMessageString(status, NULL);
            NSLog(@"Error while trying to find proxy username and password for hostname %@; assuming no password: %@", *hostNamePtr, errorStr);
        }
        return;
    }

    // check what the keychain got us as results
    CFIndex resultCount = CFArrayGetCount(result);
    for (CFIndex resultIndex = 0; resultIndex < resultCount; resultIndex++) {
        NSDictionary *attrs = (NSDictionary *) CFArrayGetValueAtIndex(result, resultIndex);

        // check if the found host matches the host we got earlier
        NSString *host = [attrs objectForKey:(id)kSecAttrServer];
        if (![host isEqualToString:*hostNamePtr])
            continue;

        const char *hostCStr = [host UTF8String];
        NSString *username = [attrs objectForKey:(id)kSecAttrAccount];
        const char *usernameCStr = [username UTF8String];

        // we know the username now, so ask keychain for the password
        UInt32 passwordLength;
        void *passwordData;

        // this may trigger UI interaction to allow the password to be accessed by this app
        status = SecKeychainFindInternetPassword(NULL, // default user keychains
                                                 (UInt32)strlen(hostCStr), hostCStr,
                                                 0, NULL, // no security domain
                                                 (UInt32)strlen(usernameCStr), usernameCStr,
                                                 0, NULL, // no path
                                                 0, // ignore port
                                                 proxyProtocolCode,
                                                 kSecAuthenticationTypeAny,
                                                 &passwordLength, &passwordData, NULL);

        if (status != noErr) {
            // error getting or accessing this password
            NSString *errorStr = (__bridge NSString *)SecCopyErrorMessageString(status, NULL);
            NSLog(@"Error while trying to find proxy username and password for hostname %@; assuming no password: %@", *hostNamePtr, errorStr);

        } else {
            // we got everything we needed
            *usernamePtr = username;
            *passwordPtr = [NSString stringWithUTF8String:passwordData];
            break; // only one valid item in the results here anyway
        }
    }

    CFRelease(result);
}

-(void)detectHttpProxyReturningHostname:(NSString **)hostName port:(int *)port username:(NSString **)username password:(NSString **)password;
{
    detectProxyWithParams(kSCPropNetProxiesHTTPEnable, kSCPropNetProxiesHTTPProxy, kSCPropNetProxiesHTTPPort, kSecAttrProtocolHTTPProxy, kSecProtocolTypeHTTPProxy, hostName, port, username, password);
}

-(void)detectHttpsProxyReturningHostname:(NSString **)hostName port:(int *)port username:(NSString **)username password:(NSString **)password;
{
    detectProxyWithParams(kSCPropNetProxiesHTTPSEnable, kSCPropNetProxiesHTTPSProxy, kSCPropNetProxiesHTTPSPort, kSecAttrProtocolHTTPSProxy, kSecProtocolTypeHTTPSProxy, hostName, port, username, password);
}

@end 
```

**使用示例：**

```
NSString *hostName;
int port;
NSString *username;
NSString *password;

ProxyDetector *proxyDetector = [[ProxyDetector alloc] init];

[proxyDetector detectHttpProxyReturningHostname:&hostName port:&port username:&username password:&password];
if (hostName) {
    if (username) {
        NSLog(@"HTTP proxy with authentication: http://%@:%@@%@:%d", username, password, hostName, port);
    } else {
        NSLog(@"HTTP proxy without authentication: http://%@:%d", hostName, port);
    }
} else {
    NSLog(@"No HTTP proxy");
}

[proxyDetector detectHttpsProxyReturningHostname:&hostName port:&port username:&username password:&password];
if (hostName) {
    if (username) {
        NSLog(@"HTTPS proxy with authentication: http://%@:%@@%@:%d", username, password, hostName, port);
    } else {
        NSLog(@"HTTPS proxy without authentication: http://%@:%d", hostName, port);
    }
} else {
    NSLog(@"No HTTPS proxy");
} 
```

欢迎改进！

# python - 检查奇数/偶数并更改数字大小的输出

> ID：13636640
> 
> 赞同：66
> 
> 时间：2012-11-29T23:24:37.500
> 
> 标签：python, numbers

我有几个问题要解决，而且有点卡住了。问题是编写一个程序，让用户输入一个奇数（检查它是否是奇数），然后根据输入的大小打印一个倒置的星形金字塔。

例如，如果你输入 5，它会出现

```
*****
 ***
  * 
```

因此，我的问题是双重的。

1）我如何检查它是偶数还是奇数？我试图`if number/2 == int`希望它可以做点什么，互联网告诉我做`if number%2==0`，但这不起作用。

2）如何更改每行中间的星号？

非常感谢您对这两个问题的任何帮助。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-11-29T23:32:28.497

给你完整的答案根本没有意义，因为这是家庭作业，所以这里有几点建议：

**偶数或奇数**：

```
number % 2 == 0 
```

绝对是一个很好的方法来确定你的号码是否是偶数。

如果您不知道`%`，这会取模，这里是除法的余`number`数`2`。[http://en.wikipedia.org/wiki/Modulo_operation](http://en.wikipedia.org/wiki/Modulo_operation)

**打印金字塔**：

第一个建议：为了打印`*****`，你可以这样做`print "*" * 5`。

第二个建议：为了使星号居中，您需要找出在星号之前要写多少空格。然后你可以打印一堆空格和星号`print " "*1 + "*"*3`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-05-20T19:00:34.223

具有 %2 的模 2 解决方案很好，但这需要除法和减法。因为计算机使用二进制算术，一个更有效的解决方案是：

```
# This first solution does not produce a Boolean value. 
is_odd_if_zero = value & 1

# or

is_odd = (value & 1) == 1

# or

is_even = (value & 1) == 0 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-05-21T14:07:12.230

这里的一些解决方案引用了各种“偶数”操作所花费的时间，特别是`n % 2`vs `n & 1`，而没有系统地检查它如何随 的大小而变化`n`，结果证明这是对速度的预测。

简短的回答是，如果您使用大小合理的数字，[通常 < 1e9](https://svn.python.org/projects/python/trunk/Include/longintrepr.h)，它并没有太大的区别。如果您使用更大的数字，那么您可能希望使用按位运算符。

这是一个演示发生了什么的图（使用 Python 3.7.3，在 Linux 5.1.2 下）：

[![python3.7 基准测试](../Images/f78645e01cc2b7ad5587ff7107226a6e.png)](https://i.stack.imgur.com/CS49t.png)

基本上，当您达到“任意精度”时，模数会逐渐变慢，而按位运算则保持不变。另外，请注意`10**-7`乘数，即我每秒可以进行约 3000 万（小整数）检查。

这是 Python 2.7.16 的相同图：

[![python2.7基准测试](../Images/a486594e6cced982b22c8a1ce0814128.png)](https://i.stack.imgur.com/6dBii.png)

它显示了新版本 Python 中的优化。

我的机器上只有这些版本的 Python，但可以重新运行其他感兴趣的版本。在 1 和 1e100 之间有 51`n`秒（在对数刻度上均匀分布），对于每个点我都相当于：

```
timeit('n % 2', f'n={n}', number=niter) 
```

其中`niter`计算为`timeit`花费约 0.1 秒，并且重复 5 次。稍微尴尬的处理`n`是确保我们没有对全局变量查找进行基准测试，这比局部变量慢。这些值的平均值用于绘制线，而各个值则绘制为点。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-03-24T22:48:52.023

简单但快速：

```
>>> def is_odd(a):
...     return bool(a - ((a>>1)<<1))
...
>>> print(is_odd(13))
True
>>> print(is_odd(12))
False
>>> 
```

或者更简单：

```
>>> def is_odd(a):
...   return bool(a & 1) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-11-29T23:31:01.700

1）我如何检查它是偶数还是奇数？我尝试了“if number/2 == int”，希望它能做点什么，互联网告诉我做“if number%2==0”，但这不起作用。

```
def isEven(number):
        return number % 2 == 0 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-11-29T23:32:29.467

```
if number%2==0 
```

会告诉你它是均匀的。所以奇数将是那里的 else 语句。"%" 是除法后返回余数的 mod 符号。所以本质上我们说如果这个数字可以被 2 整除，我们可以安全地假设它是偶数。否则很奇怪（这是一个完美的相关性！）

至于星号放置，您希望在星号之前加上与其所在行相关的空格数。在你的例子中

```
***** line 0
***   line 1
*     line 2 
```

我们要相应地间隔

```
0*****
01***
012* 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-10-05T11:16:17.617

我想最简单和最基本的方法是这个

```
import math

number = int (input ('Enter number: '))

if number % 2 == 0 and number != 0:
    print ('Even number')
elif number == 0:
    print ('Zero is neither even, nor odd.')
else:
    print ('Odd number') 
```

只是基本条件和数学。它也注意零，它既不是偶数也不是奇数，你可以通过输入给出你想要的任何数字，所以它非常可变。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-02-13T16:27:58.800

```
la = lambda x : "even" if not x % 2 else "odd" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-29T23:39:35.067

关于打印输出，以下是我使用[Format Specification Mini Language](http://docs.python.org/2/library/string.html#formatspec)的方法（部分：*对齐文本并指定宽度*）：

一旦你有你的长度，说`length = 11`：

```
rowstring = '{{: ^{length:d}}}'.format(length = length) # center aligned, space-padded format string of length <length>
for i in xrange(length, 0, -2): # iterate from top to bottom with step size 2
    print rowstring.format( '*' * i ) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-06-07T13:52:06.080

有很多方法可以检查 int 值是奇数还是偶数。我将向您展示两种主要方式：

```
number = 5

def best_way(number):
    if number%2==0:
        print "even"
    else:
        print "odd"

def binary_way(number):
    if str(bin(number))[len(bin(number))-1]=='0':
        print "even"
    else:
        print "odd"
best_way(number)
binary_way(number) 
```

希望能帮助到你

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-01-23T05:45:53.253

这是简单的代码。您可以尝试并轻松掌握知识。

```
n = int(input('Enter integer : '))
    if n % 2 == 3`8huhubuiiujji`:
        print('digit entered is ODD')
    elif n % 2 == 0 and 2 < n < 5:
        print('EVEN AND in between [2,5]')
    elif n % 2 == 0 and 6 < n < 20:
        print('EVEN and in between [6,20]')
    elif n % 2 == 0 and n > 20:
       print('Even and greater than 20') 
```

等等...

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-09-12T02:03:45.550

这是我的解决方案：

```
def is_even(n):
    r=n/2.0
    return True if r==int(r) else False 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-11-14T17:13:37.490

**示例指令** *给定一个整数，`n`执行以下条件操作：*

*   如果 n 是奇数，打印 Weird
*   如果 n 是偶数并且在 2 到 5 的范围内，则打印 Not Weird
*   如果 n 是偶数并且在 6 到 20 的范围内，则打印 Weird
*   如果 n 是偶数且大于 20，则打印 Not Weird

```
import math
n = int(input())

if n % 2 ==1:
    print("Weird")
elif n % 2==0 and n in range(2,6):
    print("Not Weird")
elif n % 2 == 0 and n in range(6,21):
    print("Weird")
elif n % 2==0 and n>20:
    print("Not Weird") 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-11-13T17:30:34.633

```
def main():
    n = float(input('odd:'))
    while n % 2 == 0:
        #if n % 2 == 1: No need for these lines as if it were true the while loop would not have been entered.
            #break not required as the while condition will break loop
        n = float(input('odd:'))

    for i in range(int((n+1)/2)):
        print(' '*i+'*'*int((n-2*i))+' '*i)

main() 
```

`#1st part ensures that it is an odd number that was entered.2nd part does the printing of triangular`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-05-11T12:13:53.230

模数法是常用的方法。我们也可以这样做来检查奇数还是偶数：

```
def f(a):
    if (a//2)*2 == a:
        return 'even'
    else:
        return 'odd' 
```

整数除以 2，然后乘以 2。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-07-04T13:37:14.363

我的解决方案基本上我们有两个字符串，使用 & 我们得到正确的索引：

```
res = ["Even", "Odd"]
print(res[x & 1]) 
```

请注意，它似乎比其他替代方案慢：

```
#!/usr/bin/env python3
import math
import random
from timeit import timeit

res = ["Even", "Odd"]

def foo(x):
    return res[x & 1]

def bar(x):
    if x & 1:
        return "Odd"
    return "Even"

la = lambda x : "Even" if not x % 2 else "Odd"

iter = 10000000

time = timeit('bar(random.randint(1, 1000))', "from __main__ import bar, random", number=iter)
print(time)
time = timeit('la(random.randint(1, 1000))', "from __main__ import la, random", number=iter)
print(time)
time = timeit('foo(random.randint(1, 1000))', "from __main__ import foo, random", number=iter)
print(time) 
```

输出：
8.05739480999182
8.170479692984372
8.892275177990086

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-12-05T21:19:13.663

**1.另一个奇怪的测试功能**

好的，作业是在 8 多年前提交的，但这里有另一种基于位移操作的解决方案：

```
def isodd(i):
    return(bool(i>>0&1)) 
```

测试给出：

```
>>> isodd(2)
False
>>> isodd(3)
True
>>> isodd(4)
False 
```

**2.最近奇数替代方法**

然而，与其说“给我这个精确的输入（一个整数奇数）否则我不会做任何事情”的代码，我还喜欢说“给我一个数字，任何数字，我会给你最接近那个数字的金字塔”。

在这种情况下，此功能很有帮助，并为您提供最接近的奇数（例如，将 6<=f<8 设置为 7 的任何数字 f 等等。）

```
def nearodd(f):
    return int(f/2)*2+1 
```

示例输出：

```
nearodd(4.9)
5

nearodd(7.2)
7

nearodd(8)
9 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-04-19T06:09:47.307

这个功能

```
def oddOrEven(num):
    if num%2 == 0:
        print("even")

    else: 
        for i in range(num):
            for j in range(i+1):
                print(" ", end="")
            for m in range(num-i, 0, -1):
                print("* ", end="")
            print() 
```

但是有一个问题，因为几乎不可能返回一个模式，所以我们必须打印而不是返回它，然后直接使用它`oddOrEven(5)`会打印：

```
 * * * * *
  * * * *
   * * *
    * *
     * 
```

# mysql - MySQL：更新查找匹配项，但不进行更改。为什么？

> ID：13636642
> 
> 赞同：1
> 
> 时间：2012-11-29T23:25:02.033
> 
> 标签：mysql, sql-update, innodb

**配置：**
WinServer 2008 R2 上的 WAMP 服务器，MySQL v5.1.36
我直接在 MySQL 终端中运行我的查询。
目标表是*InnoDB*表，设置的字段是针对字符串 FK 的查找字段。

**挑战：**
查询结果显示有一堆匹配项，但没有进行任何更改。
我错过了什么？

顺便说一句：我对 MySQL 终端的经验水平非常有限。事实上，我现在真的只是在使用它，因为 PhpMyAdmin 阻塞了查询（时间超过了抛出 PMA 会话错误）。

**代码：**
我使用的 SQL 非常基本：

```
UPDATE `my_table_name` 
SET `vendor_type` = 'master'
WHERE `data_source` = 'Group One' 
```

以下是查询的结果：

> 查询正常，0 行受影响（15.94 秒）
> 匹配行：149947 更改：0 警告：0

如您所见，几乎有 15 万条记录*“应该”*更新，但没有更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T04:38:49.507

也许是因为他们都已经有了“主人”的价值。

# css - 如何使溢出 CSS 属性在嵌套表上工作？

> ID：13636646
> 
> 赞同：1
> 
> 时间：2012-11-29T23:25:08.227
> 
> 标签：css, overflow

我发现了一个烦人的情况：如果我有一个嵌套在 div 内的表格`overflow: auto`（或`overflow: none`或`overflow: scroll`就此而言），并且表格的宽度超过了窗口的宽度，潜水将切断表格并添加滚动条......正如它应该。

但是，如果我采用完全相同的场景并将其放入（另一个）表中，那么该`overflow`属性突然不再受到尊重。

作为我的意思的一个例子，这是一个工作案例：

```
<div style="border: 1px solid green; overflow: hidden">
    <table><tr><td><div style="border: 1px solid red; width: 9999px;">a</div></td></tr></table>
</div> 
```

如果你在浏览器中查看它，你会在右侧看到一个绿色边框，但不是红色边框，因为 div 隐藏了表格的溢出，所以你看到的只是它的边框。

将其与包含在表格中的完全相同的代码进行比较：

```
<table><tr><td>
    <div style="border: 1px solid green; overflow: hidden">
        <table><tr><td><div style="border: 1px solid red; width: 9999px;">a</div></td></tr></table>
    </div>
</td></tr></table> 
```

您会看到没有右边框，因为两个元素都溢出了页面；如果您向右滚动得足够远，您将看到两个边框，因为 div 从未限制过它的表格。

我知道这可能是因为 TD 计算其宽度的方式与其他元素不同，因此 TD 内的 div 不能正确溢出，因为它计算 100% 宽度“错误”（虽然不是真的错误，只是在术语上是错误的我想要的）。

鉴于此，谁能帮我弄清楚如何在“表内”的情况下获得正确的溢出行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-06-12T07:06:37.457

只`table-layout: fixed;width: 100%`在外桌使用

```
<table style="table-layout: fixed;width: 100%"><tr><td>
    <div style="border: 1px solid green; overflow: hidden">
        <table><tr><td><div style="border: 1px solid red; width: 9999px;">a</div></td></tr></table>
    </div>
</td></tr></table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:17:45.927

可悲的是，我最终不得不通过移除外部表来解决这个问题（这意味着必须完全修改布局）。不过，我仍然很想听听是否有其他方法...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:44:16.033

只需用另一个 div 包裹桌子。

```
<div style="overflow: hidden">
<table><tr><td>
    <div style="border: 1px solid green; overflow: hidden">
        <table><tr><td><div style="border: 1px solid red; width: 9999px;">a</div></td></tr></table>
    </div>
</td></tr></table>
</div> 
```

# django - 检查 sorl-thumbnail 是否已经缓存了图像

> ID：13636647
> 
> 赞同：0
> 
> 时间：2012-11-29T23:25:17.790
> 
> 标签：django, sorl-thumbnail

我正在运行一个带有 sorl-thumbnail 和许多远程图像的 django 应用程序（sorl 从外部源加载图像）。

理想情况下，我想检查 sorl 是否已经在我的模板中缓存了图像，如果没有，则使用 ajax 加载图像。

阅读文档我发现了一个`exist`似乎总是返回的方法`true`

```
{% thumbnail item.image "160x200" crop="center" as im %}
    {% if im.exists %}
        <img src="{{ im.url }}">
    {% else %}
        <!-- load image with ajax -->
    {% endif %}
{% endthumbnail %} 
```

有没有一种方法可以用来检查图像是否已经缓存在模板中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T20:08:26.117

我最终为我的模型使用了一种方法。

这是一些使用昂贵的 %LIKE% 的脏原始 sql。

```
def has_image_cached(self):
        from django.db import connection
        cursor = connection.cursor()
        cursor.execute("SELECT * FROM thumbnail_kvstore WHERE value LIKE %s",['%'+self.imageurl+'%'])
        row = cursor.fetchone()
        if row is None:
            return False
        return True 
```

# c# - 等待一个无效的异步方法

> ID：13636648
> 
> 赞同：191
> 
> 时间：2012-11-29T23:25:35.257
> 
> 标签：c#, asynchronous

我怎样才能等待一个`void async`方法完成它的工作？

例如，我有如下功能：

```
async void LoadBlahBlah()
{
    await blah();
    ...
} 
```

现在我想确保所有内容都已加载，然后再继续其他地方。

* * *

## 回答 #1

> 赞同：302
> 
> 时间：2012-11-30T02:17:28.257

最佳实践是仅在函数`async void`为 fire and forget 方法时才将其标记，如果要等待，则应将其标记为`async Task`.

如果您仍然想等待，请像这样包装它`await Task.Run(() => blah())`

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-11-30T00:36:41.357

如果您可以将函数的签名更改为，`async Task`则可以使用[此处提供的代码](https://stackoverflow.com/questions/5095183/how-would-i-run-an-async-taskt-method-synchronously)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-11-30T02:21:20.273

最好的解决方案是使用`async Task`. 您应该避免`async void`有几个原因，其中之一是可组合性。

如果该方法*无法*返回`Task`（例如，它是一个事件处理程序），那么您可以使用`SemaphoreSlim`该方法在它即将退出时发出信号。考虑在一个`finally`块中执行此操作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-30T01:24:26.733

You don't really need to do anything manually, `await` keyword pauses the function execution until `blah()` returns.

```
private async void SomeFunction()
{
     var x = await LoadBlahBlah(); <- Function is not paused
     //rest of the code get's executed even if LoadBlahBlah() is still executing
}

private async Task<T> LoadBlahBlah()
{
     await DoStuff();  <- function is paused
     await DoMoreStuff();
} 
```

`T` is type of object `blah()` returns

You can't really `await` a `void` function so `LoadBlahBlah()` cannot be `void`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-23T20:34:50.120

执行 AutoResetEvent，调用该函数，然后等待 AutoResetEvent，然后在您知道它完成时将其设置在 async void 内。

您还可以等待从您的 void async 返回的任务

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-15T15:19:43.990

我知道这是一个老问题，但这仍然是我一直遇到的一个问题，但是在 async void 签名方法中使用 async/await 时仍然没有明确的解决方案可以正确地做到这一点。

但是，我注意到 .Wait() 在 void 方法中正常工作。

并且由于 async void 和 void 具有相同的签名，您可能需要执行以下操作。

```
void LoadBlahBlah()
{
    blah().Wait(); //this blocks
} 
```

令人困惑的是，async/await 不会阻塞下一个代码。

```
async void LoadBlahBlah()
{
    await blah(); //this does not block
} 
```

当您反编译代码时，我的猜测是 async void 创建了一个内部任务（就像异步任务一样），但是由于签名不支持返回该内部任务

这意味着在内部，异步 void 方法仍然能够“等待”内部异步方法。但外部无法知道内部任务何时完成。

所以我的结论是 async void 正在按预期工作，如果您需要来自内部任务的反馈，那么您需要使用异步任务签名。

希望我的漫无边际对任何也在寻找答案的人来说都是有意义的。

编辑：我做了一些示例代码并对其进行反编译以查看实际发生的情况。

```
static async void Test()
{
    await Task.Delay(5000);
}

static async Task TestAsync()
{
    await Task.Delay(5000);
} 
```

变成（编辑：我知道正文代码不在此处，而是在状态机中，但状态机基本相同，所以我没有费心添加它们）

```
private static void Test()
{
    <Test>d__1 stateMachine = new <Test>d__1();
    stateMachine.<>t__builder = AsyncVoidMethodBuilder.Create();
    stateMachine.<>1__state = -1;
    AsyncVoidMethodBuilder <>t__builder = stateMachine.<>t__builder;
    <>t__builder.Start(ref stateMachine);
}
private static Task TestAsync()
{
    <TestAsync>d__2 stateMachine = new <TestAsync>d__2();
    stateMachine.<>t__builder = AsyncTaskMethodBuilder.Create();
    stateMachine.<>1__state = -1;
    AsyncTaskMethodBuilder <>t__builder = stateMachine.<>t__builder;
    <>t__builder.Start(ref stateMachine);
    return stateMachine.<>t__builder.Task;
} 
```

AsyncVoidMethodBuilder 或 AsyncTaskMethodBuilder 实际上在 Start 方法中没有任何代码会提示它们阻塞，并且在它们启动后总是异步运行。

意思是没有返回的任务，就没有办法检查它是否完成。

正如预期的那样，它只启动异步运行的任务，然后在代码中继续。和异步任务，首先它启动任务，然后返回它。

所以我想我的答案是永远不要使用 async void，如果您需要知道任务何时完成，这就是 async Task 的用途。

# grails - 在 Grails 中解析多部分

> ID：13636658
> 
> 赞同：1
> 
> 时间：2012-11-29T23:26:53.903
> 
> 标签：grails, groovy

我想在 Grails 中设计一个控制器，它接受像“XML+binary file1+binary file2+...”这样的多部分。我该如何解析这个请求？我感谢任何示例代码！

谢谢，礼萨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T14:20:11.720

我会做类似的事情：

```
def uploadedFile = request.getFile('filepath')
    if (uploadedFile && !uploadedFile.empty)
        println "file:${uploadedFile?.originalFilename} uploaded"
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:55:37.043

所以我假设您正在谈论具有多个属性的输入类型文件。这是您在服务器端处理它的方式：

```
List<MultipartFile> files = request.multiFileMap.nameOfInputFileElement

files.each { uploadedFile ->

    if(!uploadedFile.empty){

        File newFile = new File( parentDir, uploadedFile.originalFilename)
        uploadedFile.transferTo(newFile)
    }
} 
```

# jquery - AJAX 和 IE 使用 jquery GET，没有收到响应

> ID：13636659
> 
> 赞同：1
> 
> 时间：2012-11-29T23:26:56.243
> 
> 标签：jquery, ajax, internet-explorer

我在尝试发出 ajax GET 请求时遇到问题。我需要弄清楚如何使用 XDR 将我的 jquery 转换为原始方法。这是我的代码。这就是我要添加的内容。我知道在哪里添加它，我只是不知道如何或在哪里放置我的所有变量。这就是我所拥有的：

```
$.post("post.php?"+$("#MYFORM").serialize(), {

        }, function(response){

            if(response==1 && codeVal == 1 && telVal == 1)
            {
                $("#after_submit").html('');
                $("#Send").after('<label class="success" id="after_submit">Η αποστολή πραγματοποιήθηκε</label>');
                change_captcha();
                clear_form();
                $.ajax({
                        type:'GET',
                        cache: false,
                        url: "web.something.gr/submit_code.php",
                        data:{ user: "123456", pass: "123456", source: "WEB", receipt: num, msisdn: phone},
                        success: function(data) { 
                            var qsFull = "web.something.gr/submit_code.php?" + data;
                            var qs = URI(qsFull).query(true);
                            TINY.box.show({html:qs.message,animate:false,boxid:'error',top:5});
                        },
                        error: function(data) {
                                    var qsFull = "web.mobilemedia.gr/input/microsoft/submit_code.php?" + data;
                                    var qs = URI(qsFull).query(true);
                                    TINY.box.show({html:qs.message,animate:false,boxid:'error',top:5});
                        }
                    });
            }
            else
            {
                $("#after_submit").html('');
                $("#Send").after('<label class="error" id="after_submit">Error! in CAPTCHA .</label>');
            }
        }); 
```

这适用于除 IE 之外的所有浏览器 .. 所以我想把它放在那里，但不知道如何：

```
if ($.browser.msie && window.XDomainRequest) {
            // Use Microsoft XDR
            var xdr = new XDomainRequest();
            xdr.open("get", "someurl");
            xdr.onload = function () {
            var JSON = $.parseJSON(xdr.responseText);
            if (JSON == null || typeof (JSON) == 'undefined')
            {
                JSON = $.parseJSON(data.firstChild.textContent);
            }
            processData(JSON);
            };
            xdr.send();
        } 
```

而且我真的不认为我使用 JSON，只是使用 text/html，所以我的下一步是什么来实现这一点。因为我在其他所有浏览器上都有这个工作.. 这是一个语法错误，我真的需要这个 If 语句吗？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T13:26:17.593

应用此代码条款；“data.firstChild.textContent”在 IE 中不起作用

```
 if(isIE() && isIE() < 10) {                
 JSON = $.parseJSON(data.text); }

function isIE() {
var myNav = navigator.userAgent.toLowerCase();
return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;} 
```

# android - Android SIP 注册端口无法访问

> ID：13636661
> 
> 赞同：1
> 
> 时间：2012-11-29T23:27:01.330
> 
> 标签：android, sip

我正在尝试使用 android.net.sip 进行 sip 呼叫，但存在注册问题。来自服务器的所有响应（我尝试了多个服务器）都正确地到达了寄存器的 Via 和 Contact 标头中描述的 UDP 端口号。但是，所有响应都使 ICMP 端口无法访问。

我正在使用在 XP 机器上运行的 AVD，并且我验证了 isAPIsupproted 和 isVoipSupported。

如果您能提供解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:18:07.193

响应数据包是否到达发送 REGISTER 数据包的端口？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T03:10:47.753

看来模拟器只监听loopback接口（检查netstat等），所以如果要获取传入连接，需要将主机LAN接口（eth0等）上的传入连接端口转发到相应的环回端口。不过我还没有尝试过，所以这都是理论上的。

# bash - 除以较低的数字

> ID：13636663
> 
> 赞同：0
> 
> 时间：2012-11-29T23:27:05.860
> 
> 标签：bash, shell, scripting, sh

shell脚本给我带来了麻烦。它应该在每次迭代时显示一些增加的值。除以“1/9”是问题的根源，将计数设置为“1.0”应该可以解决问题，但会给我一个错误：'Illegal number: 1.0'

```
count=1
rtime=9

until [ $count -eq $rtime ]
do
  echo $((($count/$rtime)*10))
  sleep 1
  count=$(($count+1))
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:35:27.297

```
set -o nounset                              # Treat unset variables as an error
count=1
rtime=9

until [ $count -eq $rtime ]
do
    echo $(echo "scale=2; $((count*10))/$rtime" | bc)                                                                                 
    sleep 1
    count=$((count+1))
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:51:53.737

shell 只能进行整数运算。对于花车，您可以尝试`bc`.

# c - 为 sprintf 为 char * 和 int 分配内存

> ID：13636667
> 
> 赞同：0
> 
> 时间：2012-11-29T23:27:20.667
> 
> 标签：c, int, malloc

对不起，我是新手，我正在努力解决这个问题，

我想首先分配足够的内存来容纳 3 个字符串和一个整数

```
char *final;
char string1[256];
char string2[256];
char string3[256];
int myNum, mySize= 0;

// populate values
...

mySize += strlen(string1) + strlen(string2) + strlen(string3);

final = malloc(mySize);

sprintf(final, "%s = %s{%s:%d}", string1, string2, string3, myNum); 
```

整数可能大到 90,000，那么我怎么知道要为整数分配多少呢？对不起，如果它很简单，

我刚刚意识到我需要为空指针和 =、{ 等符号分配 +1

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:33:49.707

您正在将整数值打印为字符串。

创建另一个字符数组来保存整数的字符串转换，然后求和。

不要忘记您需要多一个字节来保存结尾的 NULL 字符`'\0'`，来终止字符串。阅读字符数组和字符串之间的区别将是一个值得练习的练习（即：字符串是在数组`'\0'`中某个点结束的字符数组）。

```
char *final;
char string1[256];
char string2[256];
char string3[256];
char numberString[256];
int myNum, mySize= 0;

// populate values
...
sprintf(numberString,"%d",myNum);

mySize = strlen(string1) + strlen(string2) + strlen(string3) + strlen(numberString) + 1;

final = malloc(mySize*sizeof(char)); //The sizeof(char) is probably overkill, but safe practise

if(final) // check for null in case malloc failed above
{
  sprintf(final, "%s = %s{%s:%d}", string1, string2, string3, myNum);
} else {
  printf("MEMORY ERROR");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:35:42.890

整数类型的大小在字节意义上是固定的，所以不要担心，除非你的值可以超过最大整数的大小。您在调用`strlen`数组时遇到问题，因为它们未初始化，因此`strlen`将寻找可能设置或未设置的空终止字符。如果你想像这样分配 256 个字节，你最好使用`sizeof string1`而不是`strlen(string1)`. 根据您的说法，最好考虑创建一个包含 3 个`char[256]`数组和一个整数成员的结构以满足您的需要，并将其作为非动态分配的对象处理。您的`char`数组已经根据空间创建，因此`malloc`除了在此处分配更多空间之外什么都不做。你确定这是你想要的吗？

# android - 图标大小 android，最常见的填充/大小 facebook/youtube

> ID：13636674
> 
> 赞同：0
> 
> 时间：2012-11-29T23:27:41.283
> 
> 标签：android, facebook, youtube, android-icons, android-launcher

因此，对于不同的屏幕尺寸，启动器图标有以下尺寸：

> ldpi (240 x 320px) 图标 36x36, 120dpi
> 
> mdpi (320 x 480px) 图标 48x48, 160dpi
> 
> hdpi (480 x 800px) 图标 72x72, 240dpi
> 
> xhdpi (720 x 1280px) 图标 96x96, 320dpi
> 
> （谷歌播放 512x512）

如果您使用这些尺寸而不使用填充，我注意到这些图标比 youtube 和 facebook 使用的图标更大。有谁知道这些图标（或填充）的大小？

更好的是，我可以在某个地方下载相同大小的模板，例如[http://developer.android.com/shareables/icon_templates-v4.0.zip](http://developer.android.com/shareables/icon_templates-v4.0.zip)吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:55:50.667

我见过的最好的例子是[foursquare的开源android版本](https://code.google.com/p/foursquared/source/browse/#hg/main/res%253Fstate%253Dclosed)。如果您下载源代码，您将能够浏览`res/drawable-xxx`文件夹并查看它们如何处理各种情况，其图标看起来与 facebook 的 android 图标（可能是一个或两个像素以上的填充）大致相同。

我建议检查这个项目，并在您选择的照片编辑器中简单地检查他们的文件。

就像一个注释：foursquare 不再开源他们的应用程序（并且现在已经有一段时间了......），所以在上面的 repo 中找到的代码可能有点陈旧。

# c# - 使用 MAPI 登录 Exchange

> ID：13636676
> 
> 赞同：0
> 
> 时间：2012-11-29T23:27:53.697
> 
> 标签：c#, email, mapi

我正在编写一个使用 MAPI 的 C# 程序。我知道我应该为此使用不同的语言，但有人告诉我使用 .NET。我的应用程序正在运行，但我在登录时遇到了一些问题。

我可以使用当前用户帐户正常登录，但是当我尝试登录专用帐户时，邮件仍然是从当前用户帐户发送的。我的登录代码如下：

```
 private bool Logon()
    {
        if (String.IsNullOrEmpty(username) || String.IsNullOrEmpty(password))
        {
            error = MAPILogon(WinHandle, null, null, 0, 0, ref session);
            Logging.Log("Logged in using credentials for the current user.");
        }
        else
            error = MAPILogon(WinHandle, username, password, 0, 0, ref session);

        if (error != 0)
            error = MAPILogon(WinHandle, null, null, MapiLogonUI, 0, ref session);

        return error == 0;
    }

    [DllImport("MAPI32.DLL", CharSet = CharSet.Ansi)]
    private static extern int MAPILogon(IntPtr hwnd, string profileName, string password, 
        int flag, int rsv, ref IntPtr session);

    [DllImport("MAPI32.DLL")]
    private static extern int MAPISendMail(IntPtr session, IntPtr hwnd, MapiMessage message, int flag, int rsv); 
```

我在用户名和密码 ("\0") 中添加了一个空终止符，所以看起来我应该能够以其他用户身份登录。

我尝试关闭 Outlook 并运行应用程序，它说它正确发送了消息，但在关闭时冻结。Outlook 将不再打开，最终我重新启动了计算机。Outlook 是否必须打开才能使用 MAPI 控件？

最后，当消息发送时，我收到“程序正试图代表您发送电子邮件消息”的确认信息。由于这个应用程序可能每天发送多条消息，我不希望用户必须一直按允许。有没有办法以编程方式或作为 Outlook 或 Exchange Server 配置来抑制此消息？

我的开发环境是 Windows 7 和 Outlook 2010，但这需要在所有环境中工作。很抱歉有这么多问题；我很欣赏人们可能有的任何见解。

=== 修订 ---

我的问题的第一部分已经回答。MAPI 正在登录配置文件。但是，我仍然想知道是否有人知道如何抑制访问警告消息，并让 Simple MAPI 登录到用户登录之外的帐户。我需要这样做，因为来自任何站点的所有电子邮件都将从一个专用帐户发送。

如果我能找到有关如何使用它的更多详细信息，我会很乐意使用扩展 MAPI。我找到了一些信息，甚至是一个示例程序，但它给了我一个错误，说“没有默认的邮件客户端或当前的邮件客户端无法满足消息传递请求”。我尝试更改构建应用程序的处理器，但消息仍然存在。由于我的简单 MAPI 应用程序没有这个错误，我知道我有一个默认的电子邮件客户端。

再次感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:52:08.760

MAPILogon 采用现有配置文件的名称，而不是用户名。您是否尝试过使用 Outlook 对象模型？为什么要尝试使用 Simple MAPI？对于所有与 Outlook 相关的问题，您可能想在[http://social.msdn.microsoft.com/Forums/en/outlookdev/threads上发布](http://social.msdn.microsoft.com/Forums/en/outlookdev/threads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T20:38:39.003

我不得不改用扩展 MAPI，并且能够解决这两个问题。

感谢 Dimitry 在本网站和[此处](http://social.msdn.microsoft.com/Forums/en-US/outlookdev/thread/35285a32-4155-4f95-a25f-fbf16d355eb0)提供的帮助。

# sql-server - 我应该如何处理从存储过程到通用日志接口的错误管理

> ID：13636679
> 
> 赞同：0
> 
> 时间：2012-11-29T23:27:58.287
> 
> 标签：sql-server, wcf, logging, clr

我正在与之合作的一个应用程序开发团队设计了一个通用日志记录应用程序，该应用程序将异常捕获到单个存储库 (msql2008r2) 以供以后查看。该团队希望将任何数据库异常路由到同一存储库。就目前而言，Web 应用程序使用 WCF 服务将消息写入存储库。在某些情况下，由于外键缺失/不正确的插入尝试等而失败的应用程序实际上会包含在应用程序的消息中，但是，在某些情况下，SQL 代理作业会执行与这些相关的存储过程不记录到存储库的应用程序。

我意识到我可以使用带有方法调用现有 WCF 服务的 CLR 客户端。我想我也可以在存储过程中调用另一个存储过程，将错误生成日志格式，然后直接写入存储库而不通过服务。无论如何，我对这个小组关于最佳方法的想法很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T04:40:36.573

您可以在 SQL Server 中使用 TRY 块来捕获大多数错误，并在 CATCH 块中调用存储过程来执行任何需要的日志记录。但是，您无法捕获编译时错误（例如由格式错误的全文查询引发的错误）。不可捕获的错误将需要由调用程序处理。

对于 SQL 代理作业，最好的办法是使用捕获和记录任何异常的 powershell 作业步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T15:36:21.233

如果有人关注此线程，我将通过服务代理查看 wcf 连接端点作为可能的解决方案。

# c++ - C ++堆栈数组限制？

> ID：13636684
> 
> 赞同：2
> 
> 时间：2012-11-29T23:28:26.973
> 
> 标签：c++, memory, heap-memory, stack-memory

我正在运行一些代码，这可能会指出我不太了解堆和堆栈之间的区别。下面我有一些示例代码，我要么在堆栈上声明一个数组，要么在 1234567 个元素的堆上声明一个数组。两者都有效。

```
int main(int argc, char** argv){

  int N = 1234567;

  int A[N];

  //int* A = new int[N];

} 
```

但是，如果我们将 N 设为 12345678，我会遇到 int A[N] 的段错误，而堆声明仍然可以正常工作。（如果重要的话，我正在使用 g++ O3 -std=c++0x ）。这是什么疯狂？堆栈是否有（相当小的）数组大小限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T23:30:58.950

这是因为堆栈的大小比堆小得多。堆可以占用程序可用的所有内存。默认情况下，VC++ 编译的堆栈大小为 1 MB。该堆栈提供了更好的性能，但适用于更少量的数据。一般来说，它不用于大型数据结构。这就是为什么在 c++ 中接受列表/数组/字典/等的函数通常采用指向该结构的指针或引用。按值传递的参数被复制到堆栈上，传递这样的结构会经常导致程序崩溃。

在您的示例中，您使用的是`N int`'s，an`int`是 4 个字节。这使得大小`A[N]`约为 4.7 MB，远大于堆栈的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:31:51.447

堆通过 malloc 和 co 分配动态增长。堆栈随着程序运行过程中的每个函数调用而增长。返回地址、参数、局部变量通常存储在堆栈中（除了在某些处理器架构中，其中少数存储在寄存器中）。也可以（但不常见）动态分配堆栈空间。

堆和栈竞争使用相同的内存。您可以考虑一个从左到右生长，另一个从右到左生长。如果不加以控制，它们可能会发生碰撞。堆栈通常被限制增长超过某个界限。这是相对较小的，因为预计它将只使用几个字节来进行大多数调用，并且只使用几个堆栈级别。限制很小，但对于大多数任务来说已经足够了。您可以通过更改构建设置（但不适用于 Linux ELF 二进制文件）或调用 setrlimit 来扩展此限制。操作系统也可能会施加一个您可以更改的限制。可能有软限制和硬限制（http://www.nics.tennessee.edu/node/327）。

更详细地了解限制超出了问题的范围。底线是堆栈是有限的并且它非常小，因为它与堆竞争实际内存，对于典型的应用程序来说它不需要更大。

[http://en.wikipedia.org/wiki/Call_stack](http://en.wikipedia.org/wiki/Call_stack)

# java - 将 PlayN 游戏嵌入 Android 活动

> ID：13636688
> 
> 赞同：1
> 
> 时间：2012-11-29T23:28:45.983
> 
> 标签：java, android, playn

是否可以通过自定义布局将 PlayN 游戏视图嵌入到 Android 活动中？我的意思是任何方式，因为看看 PlayN 代码，它显然还不受支持。有没有人试图破解这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:52:16.387

我们现在正在开发这个功能。实际上，我们正在尝试将 PlayN 部署到 Android Fragment 中，这让我们可以将带有 PlayN 游戏的 Fragment 插入到任何布局的任何 Activity 中。这是我们的 PlayN 分支：[https](https://github.com/FinamTrade/playn) ://github.com/FinamTrade/playn 请参阅 GameInAndroidFragment 分支。

# java - 在公式和值之间更改时，JTable 电子表格永远循环

> ID：13636690
> 
> 赞同：0
> 
> 时间：2012-11-29T23:28:48.297
> 
> 标签：java, jtable

我正在使用 JTable 和 DefaultModel 实现电子表格。我的问题是当我输入一个公式并且我想让表更新它进入 model.fireupdate 和表更改事件之间的循环的值时。我尝试删除 TableModelEvent 然后添加它，但它不起作用。当我在控制台中打印新的计算值时，电子表格更新得很好。例如：

我在一个单元格中输入 2+3

控制台显示电子表格单元格值 = 5 工作正常

Jtable 单元格仍显示 2+3 并导致异常，因为我正在尝试更新单元格！

谢谢你的反馈。

```
public void tableChanged(TableModelEvent e) {

    final int i = e.getFirstRow();
    final int j = e.getColumn();
    TableModel model = (TableModel) e.getSource();

    final Object data = model.getValueAt(i, j);

    if (e.getType() == TableModelEvent.UPDATE) {
        my_spreadSheet.editCell(i, j, (String) data); // updating spreadsheet cell here 
                                                      // and calculating it  This works ok
    }

     my_table.setValueAt(                                        // trying to update the jtable
     my_spreadSheet.getCellContent(jtbl_row, jtbl_col), i, j);   // here causes error.

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:01:41.663

嗯，这就是答案。我可以发誓我试过这个！！！它也在我的评论中，但我做错的是在删除表侦听器时没有更新表。奇怪的是，我认为它也会删除模型侦听器！

```
@Override
public void tableChanged(TableModelEvent e) {
     my_table.getModel().removeTableModelListener(this);

    final int i = e.getFirstRow();
    final int j = e.getColumn();
    TableModel model = (TableModel) e.getSource();

    final Object data = model.getValueAt(i, j);

    if (e.getType() == TableModelEvent.UPDATE) {
        my_spreadSheet.editCell(i, j, (String) data);
        my_table.setValueAt(
                my_spreadSheet.getCellValue(i, j), i, j);

    }

    my_table.getModel().addTableModelListener(this);
} 
```

# php - preg_match_all 问题

> ID：13636693
> 
> 赞同：0
> 
> 时间：2012-11-29T23:28:56.290
> 
> 标签：php, regex, preg-match-all

我正在尝试使用 preg_match_all 获取所有 {{product.smth}}，但如果我在一行中很少有这些，我会得到错误的结果。

例子：

```
$smth = '<name>{{product.name}}</name><getname>{{product.getName()}}</getname>';

$pattern = '/\{\{product\.(.*)\}\}/';
preg_match_all($pattern, $smth, $matches);

//returns '{{product.name}}</name><getname>{{product.getName()}}'
//instad of '{{product.name}}' and '{{product.getName()}}' 
```

我在做什么错？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:30:51.573

问题是[重复是贪婪的](http://www.regular-expressions.info/repeat.html)。要么通过使用使其变得不贪婪，`.*?`要么更好：禁止`}`重复字符：

```
$pattern = '/\{\{product\.([^}]*)\}\}/'; 
```

如果您确实希望`}`在该值中允许单个（如`{{product.some{thing}here}}`），则等效解决方案使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：

```
$pattern = '/\{\{product\.((?:(?!\}\}).)*)\}\}/'; 
```

对于其中包含的每个字符`.*`，检查该字符是否不标记 a 的开头`}}`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:31:33.833

我认为如果你改变`.*`它`.*?`会使它变得*懒惰*而不是*贪婪*并且它会尝试尽可能少地匹配 - 所以，直到第一次出现`}}`而不是最后一次出现。

# html - 如何在 1140px 流体响应框架中居中 div？

> ID：13636695
> 
> 赞同：0
> 
> 时间：2012-11-29T23:29:03.783
> 
> 标签：html, css

我正在使用 cssgrid.net，它是一个 12col 1140px 响应式流体框架，但我无法将事物居中。

我的网站有一个“背景尺寸：封面；” 图像，我有一个徽标，我想在浏览器中水平居中，即使它正在调整大小。

*这是我拥有的 HTML：*

```
<div class="container">
<div class="row">
    <div class="fourcol"></div>
    <div class="fourcol">
        <div class="logo"></div>
    </div>
    <div class="fourcol last"></div>
</div> 
```

*和CSS：*

```
.logo {
        background: url(../images/logo_retina.png) no-repeat;
        background-size: 175px 175px;
    } 
```

*这是我网站顶部的样子：* ![在此处输入图像描述](../Images/db2fe19b62ef3bb26e3a25cecf3f0cfd.png)

徽标像应该的那样从第二组 4 列开始，但是即使在调整大小时，如何使它在该组 4 列中居中？

请记住，编码只是一种爱好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:33:23.187

假设每个`div.fourcol`都有相同的固定宽度，我认为这`background: url(../images/logo_retina.png) no-repeat center middle;`应该会有所帮助。如果它们在宽度设置为 auto 的情况下相互浮动，那么这将是一个问题，因为它`div.row`可能比 的累积宽度更宽`div.fourcol`。

# ruby - 如何从 GitHub 安装 Ruby gem 并让它在 IRB 中工作？

> ID：13636697
> 
> 赞同：2
> 
> 时间：2012-11-29T23:29:18.607
> 
> 标签：ruby, gem

似乎我发现的每个 Ruby 教程都以 Rails 为中心。

无论如何，我只是想从 GitHub 存储库安装一个 gem，并让该 gem 在 irb 中工作。

我想安装`exifr`gem。当我这样做时，`gem install exifr`它没有获得最新版本。

所以我创建了一个`Gemfile`并放：

```
gem 'exifr', :git => 'git://github.com/remvee/exifr.git' 
```

然后`bundle install`。安装正常，但现在`gem list`找不到 gem。所以我不能在irb中要求它。

对非 Rails 应用程序有任何帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:38:10.867

如果要使用 gemfile 中的 gem，则需要启动捆绑程序设置：

```
require 'bundler/setup'
require 'exifr' 
```

或者：

```
irb -rbundler/setup
> require 'exifr' 
```

这相当于 running `bundle exec irb`，除了它不依赖于特定的调用来工作，而是假定 Gemfile 可用并且 gem 是使用 Bundler 安装的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:38:43.773

尝试...

```
bundle exec gem list 
```

和..

```
bundle exec irb -rexifr 
```

看看这是否有效。这应该有助于 gem/irb 找到已安装的 gem。

# java - 为什么程序会跳过我需要输入的名字

> ID：13636701
> 
> 赞同：1
> 
> 时间：2012-11-29T23:29:56.673
> 
> 标签：java

```
import java.util.Scanner;

public class ClassList {

    static final int SIZE = 10;

    public static void main(String Args[]) {

        Student[] students = new Student[SIZE];
        Scanner s = new Scanner(System.in);

        String name, id;
        float gpa;

        do {

            System.out.println("Enter a Student");
            name = s.nextLine();

            System.out.println("Enter a ID");
            id = s.nextLine();

            System.out.println("Enter a GPA");
            gpa = s.nextFloat();

        } while(!name.equals("quit"));
    }
} 
```

基本上，当你运行这个程序时发生的事情是它会运行一次，然后在第二次迭代时，它会询问学生姓名。但它只会跳过用户应该输入它的位置并进入“获取 ID”。我该如何阻止它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:30:56.250

在第一次迭代中，`nextFloat()`不消耗任何换行符。在第二次迭代中，该`nextLine()`方法将使用第一次迭代留下的换行符。结果，似乎`nextLine()`第二次迭代中的方法跳过了用户输入，而它只是消耗了前一次迭代留下的换行符。

解决此问题的一种方法是调用`nextLine()`after`nextFloat()`以消耗剩余的换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:31:03.537

你可以放置

```
s.nextLine(); 
```

在循环结束时消耗换行符。目前`Scanner.getFloat()`正在将换行符传递给您的语句：

```
name = s.nextLine(); 
```

它*没有*阻塞，因为它已经提供了这个字符。

# windows - 在上下文菜单中设置右键单击运行脚本，（将被单击的文件的文件路径作为变量拉出）

> ID：13636705
> 
> 赞同：0
> 
> 时间：2012-11-29T23:30:12.650
> 
> 标签：windows, batch-file, scripting, contextmenu

如何配置我的电脑，以便我可以右键单击文件并选择“发送到 FTP”

就像在编辑注册表以编辑上下文菜单一样，它知道右键单击了什么并将其添加到路径中，就像在注册表命令中一样

```
(
copy "%L" \\COMPFTP\inetpub\ftproot\
) 
```

其中“%L”是选中的 Icon/exe/object 的路径 就像

```
copy "C:\Backup" \\COMPFTP\inetpub\ftproot\ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T23:53:56.997

我刚刚在 %appdata%\Microsoft\Windows\SendTo\ 下创建了一个快捷方式，并且在共享初始 ftproot 目录后，快捷方式的目标是 \COMPFTP\inetpub\ftproot\。

我现在可以右键单击发送到 FTPServer

# python - PyArg_ParseTuple 的正确用法是什么

> ID：13636711
> 
> 赞同：0
> 
> 时间：2012-11-29T23:30:45.100
> 
> 标签：python, python-2.7, python-extensions, pyobject

我使用的似乎是 PyArg_ParseTuple 的确切用法，但代码仍然无法工作。我正在使用 python 2.7

这是我正在编写的 Python 扩展的 C 代码：

```
static PyObject* tpp(PyObject* self, PyObject* args)
{
PyObject* obj;
PyObject* seq;
int i, len; 
PyObject* item;
int arrayValue, temp;

if (!PyArg_ParseTuple(args, "O", &obj)){
    printf("Item is not a list\n");
    return NULL;
}
seq = PySequence_Fast(obj, "expected a sequence");
len = PySequence_Size(obj);
arrayValue = -5;
printf("[\n");
for (i = 0; i < len; i++) {
    item = PySequence_Fast_GET_ITEM(seq, i);
    // printf("%d : %d, PyArg: ", item, *item);
    // PyArg_ParseTuple(item, "I", &temp);

    PyObject* objectsRepresentation = PyObject_Repr(item);
    const char* s = PyString_AsString(objectsRepresentation);
    printf("%s\n", s);

    PyObject* objType = PyObject_Type(item);
    PyObject* objTypeString = PyObject_Repr(objType);
    const char* sType = PyString_AsString(objTypeString);
    printf("%s\n", sType);

    if (PyArg_ParseTuple(item, "i", &arrayValue) != 0){
        printf("%d\n", arrayValue);
        printf("horray!\n");
    } 
}
Py_DECREF(seq);
printf("]\n");
printf("Item is a list!\n");
Py_RETURN_NONE;
} 
```

然后我只是构建扩展并转到终端 import et 然后 et.tpp([1,2]) 无法打印该行 if (PyArg_ParseTuple(item, "i", &arrayValue) != 0){ printf(" %d\n", 数组值); printf("万岁！\n"); }

正如您在代码中看到的那样，我检查了列表中元素的类型，并打印了“int”。然而由于某种原因 PyArg_ParseTuple 有错误。

我需要能够从 python 中的列表中访问信息以复制一些数据，将其传递给其他地方的 C 代码，然后将结果返回给 python。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:57:11.350

答案是使用`long PyInt_AsLong(PyObject *io)`

"`long PyInt_AsLong(PyObject *io)`将首先尝试将对象转换为 PyIntObject，如果它还不是一个，然后返回它的值。如果有错误，则返回 -1，调用者应检查 PyE​​rr_Occurred() 以确定是否存在一个错误，或者该值是否恰好是-1。”

这是来自[http://docs.python.org/2/c-api/int.html](http://docs.python.org/2/c-api/int.html)这是官方的 c python int objects 文档，其中包含所有相关方法。

不幸的是，这只返回一个长值。但是，如果预期值很小，一个简单的强制转换就足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T03:56:20.957

`PyArg_ParseTuple()`顾名思义，就是只解析元组。在您的代码中，`item`是一个 int，而不是一个元组。为了将`int`对象转换为 C 值，您需要使用`arrayValue = PyInt_AsLong(item)`. 请注意，它返回一个 C `long`，而不是一个`int`，所以你应该声明`arrayValue`为一个`long`。

（编辑：之前我错误地提到了 PyInt_FromLong。）

# c# - A operator&(B l,B r) 的 C# 重载运算符

> ID：13636721
> 
> 赞同：0
> 
> 时间：2012-11-29T23:31:01.680
> 
> 标签：c#, operator-overloading

我正在研究惰性对象作曲家

```
class Bitset
{ 
   private   List<bool> _data;   
   public Bitset(List<bool> vector)
   {
      _data = vector;
   }
   public virtual bool  GetElement (int i)
   {
      return _data[i];
   }

   public Bitset(){}

}
class BitsetComposer:Bitset
{        
   readonly private Bitset _a,_b;
   private Func<bool,bool,bool> _composer;
   public BitsetComposer(Bitset a,Bitset b, Func<bool,bool,bool> composer)
   {
      this._a=a;
      this._b=b;
      this._composer=composer;
   }

   public override bool GetElement (int i)
   {
      return _composer(_a.GetElement(i),_b.GetElement(i));
   }

   public static BitsetComposer operator & (BitsetComposer a, BitsetComposer b)
   {
      return new BitsetComposer(a,b,BitsetComposer.And);
   }

   public static bool And(bool a,bool b){return a&b;}

} 
```

这不好，因为希望 & 也可以采用基类

```
//replaced with
//public static BitsetComposer operator & (BitsetComposer a, BitsetComposer b)
public static BitsetComposer operator & (Bitset a, Bitset b)
{
   return new BitsetComposer(a,b,BitsetComposer.And);
} 
```

但我得到了错误：

> 错误 CS0563：二元运算符的参数之一必须是包含类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:40:22.207

如果预计两个操作数都是基类类型，则只需将`operator`代码移至基类。

从[7.2.2 运算符重载](http://msdn.microsoft.com/en-us/library/aa691324%28v=vs.71%29.aspx)：

> 用户定义的运算符声明始终要求至少一个参数是包含运算符声明的类或结构类型。因此，用户定义的运算符不可能与预定义的运算符具有相同的签名。

```
class Bitset
{ 
   private   List<bool> _data;   
   public Bitset(List<bool> vector)
   {
      _data = vector;
   }
   public virtual bool  GetElement (int i)
   {
      return _data[i];
   }

   public Bitset(){}

   public static BitsetComposer operator &(Bitset a, Bitset b)
   {
       return new BitsetComposer(a, b, BitsetComposer.And);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:37:40.950

就像错误所说的那样，您需要确保您的参数之一是`BitSetComposer`该类的。

您不能这样做的原因`(BitSet a, BitSet b)`是因为这样就不会引用您的自定义类。考虑这个例子：

```
var a = new BitSet();
var b = new BitSet();
var result = a&b; 
```

在此示例中，没有理由期望使用`BitsetComposer`' 运算符，对吗？因此，当您尝试重载`&`运算符而不使用至少一种相应类型时，编译器会抱怨。

所以你需要做三种方法：

```
public static BitsetComposer operator & (BitsetComposer a, BitsetComposer b)
{
   return new BitsetComposer(a,b,BitsetComposer.And);
}
public static BitsetComposer operator & (BitSet a, BitsetComposer b)
{
   return new BitsetComposer(a,b,BitsetComposer.And);
}
public static BitsetComposer operator & (BitsetComposer a, BitSet b)
{
   return new BitsetComposer(a,b,BitsetComposer.And);
} 
```

# python - python 2.7+中的无效组引用

> ID：13636733
> 
> 赞同：5
> 
> 时间：2012-11-29T23:31:47.607
> 
> 标签：python, regex, django

我正在尝试将我的网页（在 django 中创建）中的所有 WikiLink 类型的字符串转换为 html 链接。

我正在使用以下表达式

```
import re
expr = r'\s+[A-Z][a-z]+[A-Z][a-z]+\s'
repl=r'<a href="/photos/\1">\1</a>'
mystr = 'this is a string to Test whether WikiLink will work ProPerly'

parser=re.compile(expr)
parser.sub(repl, mystr) 
```

这将返回以下字符串，并将字符串替换为十六进制值。

```
"this is a string to Test whether<a href='/mywiki/\x01>\x01</a>'will work<a href='/mywiki/\x01>\x01</a>'" 
```

查看 re.sub的[python 帮助](http://docs.python.org/2/library/re.html#re.sub)，我尝试将 \1 更改为 \g<1> 但这会导致无效的组引用错误。

请帮助我了解如何使其正常工作

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-29T23:34:00.387

这里的问题是您在`expr`.

无论您想显示为 匹配的哪个部分`\1`，都需要放在括号中。例如：

```
>>> expr = r'\s+([A-Z][a-z]+[A-Z][a-z]+)\s'
>>> parser=re.compile(expr)
>>> parser.sub(repl, mystr)
'this is a string to Test whether<a href="/photos/WikiLink">WikiLink</a>will work ProPerly' 
```

反向引用引用`\1`匹配中的组 1，它是匹配第一个带括号的子表达式的部分。同样，`\2`是组 2，即与第二个带括号的子表达式匹配的部分，依此类推。如果你`\1`在少于 1 个组时使用，一些正则表达式引擎会给你一个错误，其他人会使用一个文字`'\1'`字符，一个 ctrl-A；Python 是后者，而 ctrl-A 的规范表示是`'\x01'`，所以这就是你这样看的原因。

第 0 组是整场比赛。但在这种情况下，这不是您想要的，因为您不希望空格成为替换的一部分。

您需要语法的唯一原因`g`是简单的反向引用不明确。例如，如果 sub 是`123\1456`，则无法判断这是否意味着`123`，后跟第 1 组，后跟`456`，或`123`后跟第 1456 组，或者……</p>

[进一步阅读分组和反向引用。](http://www.regular-expressions.info/brackets.html)

# python - 如何实现可子类化的单例？

> ID：13636736
> 
> 赞同：-1
> 
> 时间：2012-11-29T23:31:52.833
> 
> 标签：python

在这里，我继承了一个 wxPython 类并定义了一个名为`singleton`.

```
class AddressCellAttr(wx.grid.GridCellAttr):
    _instance = None

    def __init__(self):
        wx.grid.GridCellAttr.__init__(self)

        self.SetTextColour('#0000FF')

    @classmethod
    def singleton(cls):
        if cls._instance == None:
            cls._instance = cls()

        return cls._instance

class ValidAddressCellAttr(AddressCellAttr):
    def __init__(self):
        AddressCellAttr.__init__(self)

        self.SetTextColour('#00FF00')

class CorrectedAddressCellAttr(AddressCellAttr):
    def __init__(self):
        AddressCellAttr.__init__(self)

        self.SetTextColour('#FFFF00')

class InvalidAddressCellAttr(AddressCellAttr):
    def __init__(self):
        AddressCellAttr.__init__(self)

        self.SetTextColour('#FF0000')

class UnparsableAddressCellAttr(AddressCellAttr):
    def __init__(self):
        AddressCellAttr.__init__(self)

        self.SetTextColour('#555555') 
```

其余类是第一个子类的子类。我认为单例类方法也适用于所有子类，因为它在类上运行，并且子类确实是一个单独的类。

发生的情况是，在我调用`singleton`一次 on之后`AddressCellAttr`，单例方法也会在所有子类上返回相同的对象。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:31:52.833

好的，我在写这个问题时自己想出了这个问题。事实证明，当调用单例方法时，它确实接收到正确的子类作为参数，但由于子类没有具体定义`_instance`任何地方，`cls._instance`因此将查找类链`AddressCellAttr`与原始`_instance`.

解决方案是专门`_instance`为每个子类定义，如下所示：

```
class ValidAddressCellAttr(AddressCellAttr):
    _instance = None

    def __init__(self):
        AddressCellAttr.__init__(self)

        self.SetTextColour('#00FF00') 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:58:12.143

不知道为什么你认为你需要一个单例模式，但无论如何，你真的应该在`__new__`.

```
class Singleton(object):

    def __new__(cls):

        try:
            return cls._instance
        except AttributeError:
            cls._instance = object.__new__(cls)
            return cls._instance 
```

只需确保所有子类都调用 parent `__new__()`，并记住 and 的签名`__new__()`必须`__init__()`匹配。

# terminal - 如何在 vim Mac OSX 终端中映射 CTRL+Tab

> ID：13636738
> 
> 赞同：3
> 
> 时间：2012-11-29T23:31:58.107
> 
> 标签：terminal, vim, vi

我正在尝试使 Firefox 键绑定适用于 vim 中的选项卡（通过 OSX 终端 ssh 进入服务器），但是我遇到了问题。

它与这个 Stack Overflow 问题基本相同，除了 Mac 中的终端而不是 xterm：

[在我的 vimrc 中映射 <C-Tab> 在 Ubuntu 中失败](https://stackoverflow.com/questions/2686766/mapping-c-tab-in-my-vimrc-fails-in-ubuntu)

根据我的研究，似乎有些终端不区分`<C+Tab>`and `<Tab>`，所以我想知道在终端应用程序中是否有某种方法可以解决这个问题，以便 vim 可以理解它。（也许转义序列或其他东西......）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:28:52.817

长话短说：Ctrl-Tab 不存在，因为`Tab`实际上已经是一个 Control 键，Ctrl-i。

长话短说：有一种方法可以做到这一点，但它需要在终端和 vim 级别上进行足够多的黑客攻击，您可能认为值得，也可能不认为值得。我正在研究一个更好更通用的解决方案，但目前我不太确定世界似乎想要它。

[http://www.leonerd.org.uk/hacks/fixterms/](http://www.leonerd.org.uk/hacks/fixterms/)如果您有兴趣。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T07:53:28.513

在 Terminal.app 的首选项中，您可以设置一些键绑定来发送特定的字符序列。在您的情况下，您可以设置`<C-Tab`为发送`gt`或任何您想要的 Vim 快捷方式。

无论如何，你最好学习正确的捷径。

# php - 如何使用 javascript 发布表单变量，就像 type="submit" 按钮

> ID：13636740
> 
> 赞同：3
> 
> 时间：2012-11-29T23:32:05.610
> 
> 标签：php, javascript, html

我是一个新手程序员，我想知道如何使用 javascript 正确提交表单。

我做了一些测试代码来告诉你我的意思：

```
<?php
    if (isset($_POST['message']))
    {
        echo $_POST['message'];
    }
?>

<script>
    function formsubmit() 
    {
        document.getElementById('form').submit();           
    }
</script>

<form id="form" name="form" action="" method="post">
    <input id="message" name="message" value="hello world">
    <input id="submit" name="submit" type="submit">
</form>

<a href="" onClick="formsubmit()">Click me</a><br/>
<input type="submit" onClick="formsubmit()" value="Click me"> 
```

当您按下标签内的“提交”按钮时 - php 代码将回显“hello world”。使用 JS 提交表单时，值不会发布到页面。我究竟做错了什么？

提前致谢。我整个下午都在寻找解决方案，但由于我缺乏编程知识，我没有找到它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T23:40:44.907

信不信由你，但主要问题在这里：

```
<input id="submit" name="submit" type="submit"> 
```

如果一个表单包含一个名称（或 id）的输入元素，`submit`它将屏蔽`.submit()`表单元素的方法，因为`.submit`将指向按钮而不是方法。只需将其更改为：

```
<input name="go" type="submit"> 
```

另请参阅：[注意事项`form.submit()`](https://developer.mozilla.org/en-US/docs/DOM/form.submit#Notes)

较小的问题在这里：

```
<a href="" onClick="formsubmit()">Click me</a><br/> 
```

一个空的锚点只会在调用之前再次请求相同的页面`formsubmit()`。只需添加`href="#"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:46:18.880

这里的问题是表单上输入元素的id和名称叫做submit。

这将屏蔽表单的提交功能。更改名称和 ID，您将能够使用 javascript 提交表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:39:49.913

尝试将 href 设置为“#”。我猜发生的事情是，通过单击链接，它会提交表单并立即将 url 更改为您在取消表单提交之前取消表单提交的同一页面。

# c# - 使用 LINQ 从一组记录中删除某些记录

> ID：13636742
> 
> 赞同：1
> 
> 时间：2012-11-29T23:32:10.137
> 
> 标签：c#, linq-to-entities

问题 - 如何从 LINQ 中删除某些记录，就像我有一些记录我希望它们从我的 LINQ 中删除。

场景 - 我有 10 条记录的表 A 和 2 条记录的表 B 我想删除属于 B 的记录要从 A 中删除 [使用 linq] - 下面我有 q 中的所有记录，我想删除记录那些在 p 中。

```
var p = from c in q
        join dr in dc.TableData on c.Id equals dr.CaseId
        select new View()
        {
            ActiveCaseId = c.ActiveCaseId,
            Id = c.Id                            
        };

q = q.Except(p); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:41:38.747

你不能用`Except`你展示的那样做，因为`p`和`q`是不同的类型。但这也会有点笨拙。

您可以在一个查询中完成：

```
var p = from c in q
        where !dc.TableData.Any(dr => dr.CaseId == c.Id)
                        select new View()
                        {
                            ActiveCaseId = c.ActiveCaseId,
                            Id = c.Id                            
                        }; 
```

# javascript - 客户端的分面搜索

> ID：13636745
> 
> 赞同：3
> 
> 时间：2012-11-29T23:32:41.827
> 
> 标签：javascript

您能否建议在客户端（浏览器）端使用基本的多面搜索库。

我很快浏览了[展览3](https://github.com/zepheira/exhibit3)，但对我的使用来说看起来很重。它在某处提到展览3可以单独在客户端使用，但设置提到了java中的一个后台项目。

[http://www.simile-widgets.org/exhibit3/examples/nobelists/nobelists.html](http://www.simile-widgets.org/exhibit3/examples/nobelists/nobelists.html)

以上是我正在寻找的一个示例用法（只有类别搜索，没有时间线视图等）。如果它可以对数据进行分组并允许从 json 文件进行分面搜索（独立于后端），那将适合我的目的。

## 编辑：

[在这里](http://www.simile-widgets.org/wiki/Getting_Started#Sample_Exhibit_HTML_Text)找到了一个很好的展览示例。它提取了很多依赖项，并希望有一个缩小版本（准备使用:-)）。任何人都将其用于仅用于客户端的解决方案，以处理相对中等大小的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:38:26.240

facetedsearch.js 看起来很合适。在这里找到它：http: [//eikes.github.com/facetedsearch/](http://eikes.github.com/facetedsearch/)或跳过花哨的网站并直接进入代码：[https ://github.com/eikes/facetedsearch/](https://github.com/eikes/facetedsearch/)

# machine-learning - 在主题词词典中检测噪声

> ID：13636746
> 
> 赞同：0
> 
> 时间：2012-11-29T23:32:42.510
> 
> 标签：machine-learning, nlp, classification

我有一本大约 1500 字的字典。不是所有这 1500 个单词都可以用作文本的主题（其中许多是我字典中的杂音，也许只有 2-10% 可以用作主题），但是我想给文档提供的主题可以是在这 1500 个单词中找到。

因此我应该从哪里开始，什么算法可以工作？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:22:28.830

您可以计算人们分配的每个主题在这些文档中出现的次数。要考虑单词的形态变化，您可以使用词干分析器或词形还原器（例如，Java 的斯坦福 PoS 标记器或 Python 的 NLTK）。然后，您可以根据它们在整个文档集中的数量来选择最有用的主题，或者使用 tf-idf (http://en.wikipedia.org/wiki/Tf%E2%80%93idf - 在底部页面上有一些实现的链接）。

# c# - Windows 商店应用程序中是否有全局异常处理程序？

> ID：13636751
> 
> 赞同：17
> 
> 时间：2012-11-29T23:32:59.563
> 
> 标签：c#, debugging, exception-handling, windows-8, windows-store-apps

至少对于未处理的异常，我希望能够捕获详细信息并将它们写到文件中，以供可能的后续“调试取证”。Windows 商店应用程序中没有“OnTerminating”事件；有没有合适的地方/方法来完成这个？

## 更新

请参阅下面的评论。这是一个不适合下面的补充：

即使在删除 xaml 片段时，我仍然会收到那个错误消息，即使在清理和重建之后......？2-clicking err msg 将我带到 App.xaml 的顶部，现在全部是：

```
<Application
    x:Class="SpaceOverlays.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:SpaceOverlays">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>

                <!-- 
                    Styles that define common aspects of the platform look and feel
                    Required by Visual Studio project and item templates
                 -->
                <ResourceDictionary Source="Common/StandardStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

        </ResourceDictionary>
    </Application.Resources> 
```

## 更新 2

关闭 App.xaml 并重建后，一切都很好......？？？哦，好吧——我想一切都很好，结局很好。

## 更新 3

有趣的是，Windows Phone 应用 App.xaml.cs 默认有这个处理程序：

```
 // Global handler for uncaught exceptions.
    UnhandledException += Application_UnhandledException;

private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
{
    if (Debugger.IsAttached)
    {
        // An unhandled exception has occurred; break into the debugger
        Debugger.Break();
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T03:55:40.700

对于 HTML5/JavaScript 应用程序，您将[onerror](http://msdn.microsoft.com/en-us/library/windows/apps/Hh974768.aspx)事件作为捕获信息的最后机会。

对于基于 XAML 的应用程序，您可以使用[UnhandledException](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)；但是，这仅捕获通过 XAML (UI) 框架出现的异常，即使在 InnerException 中，您也不总是能获得有关根本原因的大量信息。

**Windows 8.1 更新：** [UnhandledException](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)还将捕获由`async void`方法创建的异常。在 Windows 8 中，此类异常只会使应用程序崩溃。LunarFrog 在他们的网站上对此进行了很好的[讨论](http://lunarfrog.com/blog/2013/11/10/windows81-async-void-exceptions/)。

# emacs - Emacs - 如何将文本格式化为其他编辑器？

> ID：13636755
> 
> 赞同：0
> 
> 时间：2012-11-29T23:33:10.820
> 
> 标签：emacs

我是emacs的初学者。尽管我觉得它很有趣和具有挑战性，但我仍然不知道一些基本的东西，比如，当我打开一个文本或用其他编辑器编写的一段脚本时，emacs 不会显示格式正确的文本（缺少所有选项卡，所有文本左对齐），反之亦然。另外，当我用 Mw 复制带有 emacs 的链接时，我的剪贴板仍然是空的，我无法将其粘贴到浏览器中。我已经完成了我的“功课”。我已经阅读了教程，我几乎完成了手册，但没有看到任何可以解决的问题。

tnx 提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:02:55.840

一些编辑器，例如 Intellij IDEA，会根据他们对代码的理解而不是根据实际缩进的方式来缩进代码，据我所知，没有 Emacs 模式以相同的方式运行。如果您之前使用过 Eclipse 或 MS Visual Studio 之类的东西 - 那么您可能只是有不同大小的制表符（这就是为什么一些程序员坚持使用空格而不是制表符缩进代码的原因）。但制表符的宽度是可调的。为了自定义它，您将：

*   添加初始化文件（通常是`$HOME`目录中的 .emacs 文件，如果还没有，可以创建一个）：

* * *

```
 ;; makes tab character as wide as four space characters
(setq default-tab-width 4) 
```

*   尽管其他一些主要的编辑模式会覆盖此变量，但您需要告知您正在处理的语言以获得更好的说明。

*   剪贴板，请参阅此答案：如果您在 Linux 上，[如何将文本从 Emacs 复制到 Linux 上的另一个应用程序](https://stackoverflow.com/questions/64360/how-to-copy-text-from-emacs-to-another-application-on-linux)，那么您可能需要设置`x-select-enable-clipboard`为`t`.

*   据我了解，在 Emacs 中无法将文本向右（或 LTR 语言的左侧）对齐。如果将文本块拆分为行并在行尾对齐，则可以对齐文本块，但这意味着通过在开头添加空格来对齐-您并不想这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:47:11.727

标签应该可以工作（您可能需要修复宽度）。使用鼠标选择剪贴板，或使用`Ctrl``Insert`复制和`Shift``Delete`剪切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:15:52.957

假设 emacs 为文件选择了正确的模式——通常是这样——你可以按全选`C-x h`，然后`TAB`缩进所有选定的行。您正在使用哪些其他编辑器，以及什么平台？

至于剪贴板问题，某些版本的 emacs 可以与本机剪贴板一起正常工作，有些则不能。您可能想要调查[CUA 模式](http://www.emacswiki.org/CuaMode)。

# python - 具有时间相关数据 Python 的快速傅里叶变换 (fft)

> ID：13636758
> 
> 赞同：2
> 
> 时间：2012-11-29T23:33:20.860
> 
> 标签：python, numpy, scipy, fft

我有数据和与之关联的时间“值”（Tx 和 X）。

如何对我的数据执行快速傅立叶变换。

Tx 是我拥有的一个数组，而 X 是我拥有的另一个数组。两个数组的长度当然是相同的，它们通过 Tx[i] 与 X[i] 相关联，其中 i 从 0 变为 len(X)。

如何对此类数据执行 fft 以最终实现针对 |fft|^2 的功率谱密度图频率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T12:47:03.027

如果数据不是均匀采样的（即 Tx[i]-Tx[i-1] 是恒定的），那么您不能对其进行 FFT。

这是一个想法：如果您对信号的带宽有一个很好的了解，那么您可以创建 DFT 基向量的重采样版本，即在 Tx 时间评估的复正弦曲线。然后求解线性系统 x = A*z：其中 x 是您的观察值，z 是信号的未知频率内容，A 是重采样的 DFT 基。请注意，根据不均匀性的严重程度，A 实际上可能不是基础。它几乎肯定不会像 DFT 那样是正交基。

# ruby - 你能用 Ruby 优化这个降序排列的数组吗？

> ID：13636772
> 
> 赞同：1
> 
> 时间：2012-11-29T23:35:12.353
> 
> 标签：ruby, arrays, sorting

您是否知道更好、更快、更智能、更高效或更优雅的方式来执行以下操作？

由于这个数组

```
a = [171, 209, 3808, "723", "288", "6", "5", 27, "22", 207, 473, "256", 67, 1536] 
```

得到这个

```
a.map{|i|i.to_i}.sort{|a,b|b<=>a}
 => [3808, 1536, 723, 473, 288, 256, 209, 207, 171, 67, 27, 22, 6, 5] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:50:53.820

您可以使用就地突变来避免创建新数组：

```
a.map!(&:to_i).sort!.reverse! 
```

但是，如果没有基准，很难知道它是否更快或更有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:51:37.360

这是一个使用`symbol#to_proc`

```
a.map(&:to_i).sort.reverse 
```

这比使用就地修饰符 ( `!`) 方法更快，但使用更多内存。作为奖励，`a`如果您想用它做任何其他事情，它会保持原始数组完好无损。

# c++ - OpenGL创建渲染上下文失败

> ID：13636773
> 
> 赞同：2
> 
> 时间：2012-11-29T23:35:12.993
> 
> 标签：c++, opengl

我正在用 C++ 编写一些 OpenGL 3 程序，现在我的笔记本电脑 Lenovo Thinkpad e320（Intel HD Graphics 3000）出现问题。它在我的 PC (ATI Radeon HD 5870) 上运行良好。

错误附近的代码如下：

```
bool GLWindowCreate(const char *title, int width, int height, bool fullScreen){
...
    g_hRC = wglCreateContextAttribsARB(g_hDC, 0, attribs);
    if (!g_hRC || !wglMakeCurrent(g_hDC, g_hRC))
    {
        LOG_ERROR("Creating render context fail (%d)\n", GetLastError());
        return false;
    }
...
} 
```

所有编译都很好，我在日志文件中看到了这个错误。

我正在使用 Windows 8（在 PC 和笔记本电脑上）。笔记本电脑上的显卡支持 OpenGL 3。我找到了一些关于我需要关闭硬件加速的相同问题的答案，但似乎在 Win 8 中没有办法做到这一点。

**添加：**

整个窗口创建功能：

```
bool GLWindowCreate(const char *title, int width, int height, bool fullScreen)
{
    ASSERT(title);
    ASSERT(width > 0);
    ASSERT(height > 0);

    WNDCLASSEX            wcx;
    PIXELFORMATDESCRIPTOR pfd;
    RECT                  rect;
    HGLRC                 hRCTemp;
    DWORD                 style, exStyle;
    int                   x, y, format;

    memset(&g_window, 0, sizeof(g_window));

    memset(&g_input, 0, sizeof(g_input));

    PFNWGLCREATECONTEXTATTRIBSARBPROC wglCreateContextAttribsARB = NULL;

    // attributes for OpenGL context
    int attribs[] =
    {
        WGL_CONTEXT_MAJOR_VERSION_ARB, 3,
        WGL_CONTEXT_MINOR_VERSION_ARB, 3,
        WGL_CONTEXT_FLAGS_ARB,         WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB,
        WGL_CONTEXT_PROFILE_MASK_ARB,  WGL_CONTEXT_CORE_PROFILE_BIT_ARB,
        0
    };

    // timer init
    QueryPerformanceFrequency(&g_qpc);
    ASSERT(g_qpc.QuadPart > 0);

    g_timerFrequency = 1.0 / g_qpc.QuadPart;

    g_hInstance = (HINSTANCE)GetModuleHandle(NULL);

    memset(&wcx, 0, sizeof(wcx));
    wcx.cbSize        = sizeof(wcx);
    wcx.style         = CS_HREDRAW | CS_VREDRAW | CS_OWNDC;
    wcx.lpfnWndProc   = (WNDPROC)GLWindowProc;
    wcx.hInstance     = g_hInstance;
    wcx.lpszClassName = GLWINDOW_CLASS_NAME;
    wcx.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wcx.hCursor       = LoadCursor(NULL, IDC_ARROW);

    if (!RegisterClassEx(&wcx))
    {
        LOG_ERROR("RegisterClassEx fail (%d)\n", GetLastError());
        return false;
    }

    style   = WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX;
    exStyle = WS_EX_APPWINDOW;

    x = (GetSystemMetrics(SM_CXSCREEN) - width)  / 2;
    y = (GetSystemMetrics(SM_CYSCREEN) - height) / 2;

    rect.left   = x;
    rect.right  = x + width;
    rect.top    = y;
    rect.bottom = y + height;

    AdjustWindowRectEx (&rect, style, FALSE, exStyle);

    // creating window
    g_hWnd = CreateWindowEx(exStyle, GLWINDOW_CLASS_NAME, title, style, rect.left, rect.top,
        rect.right - rect.left, rect.bottom - rect.top, NULL, NULL, g_hInstance, NULL);

    if (!g_hWnd)
    {
        LOG_ERROR("CreateWindowEx fail (%d)\n", GetLastError());
        return false;
    }

        // get window descriptor
    g_hDC = GetDC(g_hWnd);

    if (!g_hDC)
    {
        LOG_ERROR("GetDC fail (%d)\n", GetLastError());
        return false;
    }

    memset(&pfd, 0, sizeof(pfd));
    pfd.nSize      = sizeof(pfd);
    pfd.nVersion   = 1;
    pfd.dwFlags    = PFD_DRAW_TO_WINDOW | PFD_SUPPORT_OPENGL | PFD_DOUBLEBUFFER;
    pfd.iPixelType = PFD_TYPE_RGBA;
    pfd.cColorBits = 32;
    pfd.cDepthBits = 24;

    // get pixel format
    format = ChoosePixelFormat(g_hDC, &pfd);
    if (!format || !SetPixelFormat(g_hDC, format, &pfd))
    {
        LOG_ERROR("Setting pixel format fail (%d)\n", GetLastError());
        return false;
    }

    // creating temp context
    // to get wglCreateContextAttribsARB function
    hRCTemp = wglCreateContext(g_hDC);
    if (!hRCTemp || !wglMakeCurrent(g_hDC, hRCTemp))
    {
        LOG_ERROR("Сreating temp render context fail (%d)\n", GetLastError());
        return false;
    }

    OPENGL_GET_PROC(PFNWGLCREATECONTEXTATTRIBSARBPROC, wglCreateContextAttribsARB);

    // delete temp context
    wglMakeCurrent(NULL, NULL);
    wglDeleteContext(hRCTemp);

    // creating OpenGL 3 context
    g_hRC = wglCreateContextAttribsARB(g_hDC, 0, attribs);
    if (!g_hRC || !wglMakeCurrent(g_hDC, g_hRC))
    {
        LOG_ERROR("Creating render context fail (%d)\n", GetLastError());
        return false;
    }

    int major, minor;
    glGetIntegerv(GL_MAJOR_VERSION, &major);
    glGetIntegerv(GL_MINOR_VERSION, &minor);
    LOG_DEBUG("OpenGL render context information:\n"
        "  Renderer       : %s\n"
        "  Vendor         : %s\n"
        "  Version        : %s\n"
        "  GLSL version   : %s\n"
        "  OpenGL version : %d.%d\n",
        (const char*)glGetString(GL_RENDERER),
        (const char*)glGetString(GL_VENDOR),
        (const char*)glGetString(GL_VERSION),
        (const char*)glGetString(GL_SHADING_LANGUAGE_VERSION),
        major, minor
    );

    if (!OpenGLInitExtensions())
        return false;

    GLWindowSetSize(width, height, fullScreen);

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:18:44.197

我无意中找到了一个决定。问题在那里：

```
int attribs[] =
    {
        WGL_CONTEXT_MAJOR_VERSION_ARB, 3,
        WGL_CONTEXT_MINOR_VERSION_ARB, 3,
        WGL_CONTEXT_FLAGS_ARB,         WGL_CONTEXT_FORWARD_COMPATIBLE_BIT_ARB,
        WGL_CONTEXT_PROFILE_MASK_ARB,  WGL_CONTEXT_CORE_PROFILE_BIT_ARB,
        0
    }; 
```

Intel HD Graphics 3000 只支持 OpenGL 3.1，不支持 3.3，所以我不得不改变

```
WGL_CONTEXT_MINOR_VERSION_ARB, 3, 
```

到

```
WGL_CONTEXT_MINOR_VERSION_ARB, 1, 
```

谢谢大家，很抱歉，希望我的问题解决方案对某人有所帮助

# tabs - javascript。无法在 Safari 中打开新标签

> ID：13636776
> 
> 赞同：3
> 
> 时间：2012-11-29T23:35:28.937
> 
> 标签：tabs, safari, browser-tab

以下 javascript 在 Firefox、chrome 和 IE 中打开一个新标签页。但它会在 Safari 中打开一个新窗口。

```
javascript:window.open(url,'_blank');  // opens new window in safari. 
```

我需要在 Safari 中打开一个新选项卡而不是一个新窗口。还有其他人看到这种行为吗？修复？我似乎找不到任何最近的帖子来解决这个问题……也许只有我一个人。

-谢谢。

在 Windows 上使用 Safari 5.1.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-10-02T10:09:52.703

修改您的浏览器偏好；编辑/设置（齿轮图标）-> 首选项-> 选项卡，然后在“在选项卡而不是窗口中打开页面”的下拉菜单中选择自动或始终选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-20T15:21:24.483

事实证明这是一个浏览器首选项，可以在下拉菜单中编辑`Edit -> Preferences -> Tabs`并选择选项。`Automatically``Open pages in tabs instead of windows`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-06T19:07:02.447

Safari 不支持 window.open。请访问此链接 -

[https://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html](https://developer.apple.com/library/archive/documentation/Tools/Conceptual/SafariExtensionGuide/WorkingwithWindowsandTabs/WorkingwithWindowsandTabs.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-05T07:32:56.190

这在 Mac/Safari 中对我有用：

```
var windowReference = window.open();
myService.getUrl().then(function(url) {
windowReference.location = url;
}); 
```

我在这里找到了这个：[window.open(url, '_blank'); 不适用于 iMac/Safari](https://stackoverflow.com/questions/20696041/window-openurl-blank-not-working-on-imac-safari)

# iphone - 您能否在版本处于“等待开发者发布”状态时提交新应用以供审核

> ID：13636780
> 
> 赞同：8
> 
> 时间：2012-11-29T23:36:00.800
> 
> 标签：iphone, app-store, app-store-connect

有一个当前可用的应用程序。最新版本已提交并获得批准，并处于“待定开发者版本”中，直到我们的发布日期到来。但是，我们希望修复一些错误。我们不想删除/或拒绝当前已获批准的二进制文件，因为在发布之前我们可能没有足够的时间再次通过审核流程。问题是我们能否在将“已批准”版本保持在“等待开发者发布”状态的同时提交应用程序的新版本以供审核。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T23:46:14.533

不，你不能。您的应用必须处于“可供销售”状态，然后您才能创建新版本并重新提交。

# vim - Vim 中有多个状态栏

> ID：13636781
> 
> 赞同：2
> 
> 时间：2012-11-29T23:36:18.737
> 
> 标签：vim, macvim

是否可以有多行状态行？就像在一行中我将有文件信息，在下面的行中有光标信息。

这可能吗？如果是，如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T03:05:58.473

`vim-jp`（日本 vim 用户组）正在为此编写补丁。

[https://github.com/vim-jp/issues/issues/225](https://github.com/vim-jp/issues/issues/225)

补丁在这里：

[https://gist.github.com/3158492](https://gist.github.com/3158492)

[![](../Images/68ed73c069f7ac331276b3fea47a21b9.png)](https://i.stack.imgur.com/erPf1.png)

# mysql - mySQL - 减去另一个表中存在的值

> ID：13636788
> 
> 赞同：0
> 
> 时间：2012-11-29T23:37:03.300
> 
> 标签：mysql

如果这是重复的，我深表歉意，但是，我找不到我需要的答案。

考虑我的数据：

**表 - report_detail**

```
report_id   |category    |sub_category   |report name
-------------------------------------------------------
1           |1           |1              |Donkey Report
2           |2           |2              |Grandma Report
3           |1           |1              |Poop Report 
```

**表 - report_subscriptions**

```
user_id     |report_id
--------------------------
1           |1            
2           |2            
1           |2 
```

我的问题是，如何从report_detail 表中选择report_subscriptions 中未订阅user_id = 1 的所有report_id？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:41:50.680

这应该让你相当接近

```
select * from Report_detail RD
where RD.report_id not in (select disctinct RS.report_id from report_subscriptions RS) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:44:55.560

在 SQL Fiddle 测试：[http ://sqlfiddle.com/#!2/e7e3a/1/0](http://sqlfiddle.com/#!2/e7e3a/1/0)

```
select rd.report_id 
from   report_detail rd
where  not exists (
           select 1 
           from   report_subscriptions rs 
           where  rs.user_id = 1 
                  and rs.report_id = rd.report_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:45:07.523

如果您只需要报告 ID，则根本没有理由让 report_detail 表参与其中。
只需这样做：

```
SELECT DISTINCT report_id FROM report_subscriptions WHERE user_id <> 1 
```

如果您确实需要使用此约束从 report_details 表中获取数据，只需执行

```
SELECT * FROM report_detail
WHERE report_id IN (SELECT DISTINCT report_id FROM report_subscriptions WHERE user_id <> 1) 
```

# antlr - ANTLR4 Beta 3 非常简单的语法不起作用

> ID：13636789
> 
> 赞同：3
> 
> 时间：2012-11-29T23:37:06.683
> 
> 标签：antlr, antlr4

这是一个非常简单的语法：

```
grammar test;

DIGIT : [0-9] ;
WS : [ \r\n\t]+ -> skip ;
value : DIGIT+ ; 
```

OSX下使用antlr v4.0b3和JAVA 1.6版

使用以下命令编译语法：

```
antlr4 test.g4
javac *.java 
```

然后我用 grun 来测试语法：

```
grun test value -tokens 
```

结果如下：

```
grun test value -tokens
12
[eof]
[@0,0:0='1',<1>,1:0]
[@1,1:1='2',<1>,1:1]
[@2,3:2='<EOF>',<-1>,2:0] 
```

我的问题是：为什么我得到两个令牌（'1' 和'2'）而不是一个（'12'）？

非常感谢那些可以帮助我的人！！

干杯!

盖伊

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T01:06:07.113

您已要求 DIGIT 一次匹配一个数字，然后将其传递给解析器规则：值。我想你想要的是真的

```
value : INT ;
INT : [0-9]+ ; 
```

:)

特伦斯

# php - HHVM (HipHop) 是否支持 Postgresql/任意 pecl 扩展？

> ID：13636790
> 
> 赞同：7
> 
> 时间：2012-11-29T23:37:18.790
> 
> 标签：php, postgresql, pecl, hiphop, hhvm

Facebook 今天宣布了一个重大消息[——HHVM 正在取代原来的 hiphop 编译器](https://www.facebook.com/notes/facebook-engineering/speeding-up-php-based-development-with-hiphop-vm/10151170460698920)。

旧的 HipHop 对扩展的支持有限——包括 IIRC，不支持 postgres。

HHVM 是否支持所有 pecl 扩展？它支持多少标准 PHP 库？

HHVM*不*支持什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-30T01:01:30.133

自从我最初回答这个问题以来的一年里，情况发生了巨大变化。 [HHVM 现在发布了一个扩展列表](https://github.com/facebook/hhvm/wiki/Extensions)。`ext/pgsql`虽然他们还没有[**构建**](https://github.com/PocketRent/hhvm-pgsql)对`ext/pgsql`. 他们现在还发布[有关编写您自己的扩展的文档](https://github.com/facebook/hhvm/wiki/Extension-API)。

我的原始答案如下。请记住，HHVM 已经完全取代了 HipHop，下面的链接和信息现在已经过时了。

* * *

> HHVM 是否支持所有 pecl 扩展？

当前所有的 PHP 扩展都与当前的 PHP 代码库、Zend API 和现有的 PHP VM 紧密相关。

HipHop 和 HHVM 是 PHP 语言的独立实现，使用不同的方法来执行 PHP 代码。他们不使用现有的 PHP 代码库、Zend ZPI 或 PHP VM。任何现有的 PHP 扩展，例如那些托管在 PECL 上的扩展，都不能直接移植到 HipHop/HHVM。

实际上，与其说是对扩展进行“移植”，不如说是*从头开始重新实现*。好消息（如果有的话）是，许多 PHP 扩展只是简单地覆盖了由任何库转换为扩展的原始 C 级 API 的薄层。根据目标是什么，移植可能非常容易。另一方面，并​​不是所有的扩展都是第三方库的包装器，所以 YMMV。

> 它支持多少标准 PHP 库？

看起来支持的扩展列表可以在`runtime/ext`目录中找到。

[https://github.com/facebook/hiphop-php/tree/master/src/runtime/ext](https://github.com/facebook/hiphop-php/tree/master/src/runtime/ext)

看起来很全面，他们甚至有 PDO。但是没有迹象表明 Postgres 支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-06T08:47:49.373

[一年后 - 仍然没有像 MySql 那样飙升，但根据这个官方 HHVM 博客评论回复](http://hhvm.com/blog/2813/we-are-the-98-5-and-the-16#div-comment-2345)（从 2013 年 12 月 19 日起）似乎有办法

> Jeremy Wilson 说：我希望看到 Redis 和 PostgreSQL 支持。
> 
> （回复）Simon 说：Redis 支持已经可用，并且有一个 PostgreSQL 扩展可以使用。

...参考[https://github.com/pocketRent/hhvm-pgsql](https://github.com/pocketRent/hhvm-pgsql)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T23:54:23.957

经过一番摸索，我发现[这个 facebook 帖子](http://www.facebook.com/permalink.php?story_fbid=10151246794884326&id=282425744325)表明大多数库仍然不受支持

![HHVM 扩展状态](../Images/4f18f6242c11e680e63d1bb2e8912270.png)

# xml - 使用 XSLT 进行 XML 转换

> ID：13636794
> 
> 赞同：2
> 
> 时间：2012-11-29T23:37:45.657
> 
> 标签：xml, xslt

我有一个 XML 文档和 XSLT 样式表来改变它的显示方式。现在我只想让 XSLT 文档生成“Hello World！”。在运行 XML 文档时显示，但我只是在网页上显示 XML 文档。

这是 XML 文档（试用 Doc.xml）：

```
<?xml-styelsheet type="text/xsl" href="trialDoc.xsl"?>

<people>
    <person gender="M">
    <firstName>Sam</firstName>
    <lastName>McAllister</lastName>
    <age>25</age>
    </person>
    <person gender="F">
    <firstName>Kris</firstName>
    <lastName>Paolini</lastName>
    <age>24</age>
    </person>
    <person gender="M">
    <firstName>Bob</firstName>
    <lastName>Turring</lastName>
    <age>19</age>
    </person>
</people> 
```

这是我的 XSL 文档 (trialDoc.xsl)：

```
<xsl:stylesheet version="1.0" 

xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
    Hello World!
</xsl:template>

</xsl:stylesheet> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:51:26.777

首先，您的 XML 有错字；你可能想要

```
<?xml-stylesheet type="text/xsl" href="trialDoc.xsl"?> 
```

然后，您的 XSL 应该生成 XML 树 - 用一些 XML 结构将您的输出包含在顶部，单个节点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:template match="/">
    <h1>Hello World!</h1>
  </xsl:template>
</xsl:stylesheet> 
```

或者，指示 XSL 处理器生成文本输出：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="text"/>
  <xsl:template match="/">
    Hello World!
  </xsl:template>
</xsl:stylesheet> 
```

# javascript - 如何使用 DBChangeTracker 进行多次同步？

> ID：13636800
> 
> 赞同：2
> 
> 时间：2012-11-29T23:38:21.217
> 
> 标签：javascript, html, synchronization

我正在使用 SequelSphere 来存储 web 应用程序的数据，并且我正在使用更改跟踪器来跟踪更改。第一次同步时，跟踪器会返回更改的行。第二次同步时，跟踪器返回第一组和第二组更改的行。这是我正在做的事情：

```
// create my tracker
var tracker = db.changeTrackers.create("order_tracker", ["orders"]);

// insert first set of orders
for (var i = 0; i < firstOrders; ++i)
    db.insertRow("orders", firstOrders[i]);

// sync orders up
performSync(db.changeTrackers.get("order_tracker").getChangedRows());

// insert more orders (second set)
for (var i = 0; i < secondOrders; ++i)
    db.insertRow("orders", secondOrders[i]);

// sync second set of orders up
performSync(db.changeTrackers.get("order_tracker").getChangedRows()); 
```

第一次同步工作正常。第二个同步是发送第一组和第二组的所有订单。我只希望它返回第二组。我怎样才能让它只返回第二组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:49:05.973

在此处查找 DBChangeTracker 的 API：[SequelSphere API](http://www.sequelsphere.com/dbdocs/api-documentation/)

实际上有两种方法可以回答您的问题：

1) 使用“clearChanges()”方法从 DBChangeTracker 中删除所有更改。您可以在同步后立即“合乎逻辑地”执行此操作：

```
// sync orders up
var tracker = db.changeTrackers.get("order_tracker");
performSync(tracker.getChangedRows());
tracker.clearChanges(); 
```

2）如果数据同步异步发生，结束跟踪并使用第二个更改跟踪器来保存新的更改：

```
// End first set of changes in tracker, start second
var trackerOne = db.changeTrackers.get("order_tracker");
trackerOne.endTracking();
var trackerTwo = db.changeTrackers.create("order_tracker_2", ["orders"]);
// sync orders up
performSync(tracker.getChangedRows());
// Get rid of first tracker
db.changeTrackers.drop("order_tracker"); 
```

让我知道这是否足够！

# c++ - 我的主程序文件中的函数编译器错误

> ID：13636802
> 
> 赞同：1
> 
> 时间：2012-11-29T23:38:37.840
> 
> 标签：c++, compiler-errors

我在引用我试图在二进制堆实现的主文件中定义的方法时遇到编译器错误。报错都是指 buildTable 的方法声明所在行，报错如下：

```
lab4.cpp:9: error: variable or field ‘buildTable’ declared void
lab4.cpp:9: error: missing template arguments before ‘table’
lab4.cpp:9: error: expected primary-expression before ‘*’ token
lab4.cpp:9: error: ‘tree’ was not declared in this scope
lab4.cpp:9: error: expected primary-expression before ‘prefix’ 
```

这是我的代码供参考：

```
 #include <iostream>
    #include <string>
    #include <map>
    #include <cstring>
    #include "heap.h"
    #include "huffnode.h"
    using namespace std;

    void buildTable(map table, huffnode::huffnode * tree, std::string prefix){
        if(tree->leftChild() == NULL && tree->rightChild() == NULL){
            map[tree.getLetter()] = prefix;
        else{
            buildTable(table, tree->leftChild(), prefix+"0");
            buildTable(table, tree->rightChild(), prefix+"1");
        }
    }

    int main() {

        map<char, int> code; // Constructs map <letter, frequency>
        map<char,int>::iterator it;
        map<char,string>::iterator it2;
        map<char, string> encoding;
        string input;
        getline(cin, input);
        for(int i = 0; i < input.length(); i++){        // build a map from the string
            char currLetter = input[i];
            int exist = code.count(currLetter);
            //cout << exist << endl;
            if(exist == 0){             // check if letter already has a key
                code[currLetter] = 1;
            }else{
                code[currLetter] = code[currLetter] + 1;
            }
            if(currLetter == '.'){
                break;
            }
        }
        heap binHeap;
        for (it=code.begin() ; it != code.end(); it++){             // Fill the heap
            huffnode * newHuff = new huffnode((*it).first, (*it).second);
            cout << newHuff->getLetter() << " => " << newHuff->getFreq() << endl;
            binHeap.insert(newHuff);
        }
        /*
        while(binHeap.getSize() > 0){
            cout << binHeap.extractMin()->getFreq() << endl;

        }
        */

        while(binHeap.getSize() > 1){               // build the tree
            huffnode *newLeft, *newRight;
            newLeft = binHeap.extractMin();
            newRight = binHeap.extractMin();
            huffnode * newInternal = new huffnode(newLeft, newRight);
            binHeap.insert(newInternal);
        }

        huffnode * root = binHeap.extractMin();
        buildTable(encoding, root, "");
        for (it2=encoding.begin() ; it2 != encoding.end(); it2++){              // Fill the heap
            cout <<it2->first  << " => " << it2->second << endl;
        }

    } 
```

我在参数前面有无 std:: 和 huffnode:: 都试过了，都给我呈现了相同的错误消息。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:40:53.497

一个问题是参数声明

```
map table 
```

您尚未向`map`该类提供模板参数。`map`与您曾经查看缺失内容的其他地方仔细检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:45:13.260

首先，您可能想要更多类似的东西：

```
void buildTable(map<char, string> table, huffnode::huffnode * tree, std::string prefix){
    if(tree->leftChild() == NULL && tree->rightChild() == NULL){
        table[tree->getLetter()] = prefix;
    }
    else{
        buildTable(table, tree->leftChild(), prefix+"0");
        buildTable(table, tree->rightChild(), prefix+"1");
    }
} 
```

那里有**许多修复**：

1.  `map<char, string>` (specify template arguments)
2.  `map[]` -> `table[]`
3.  `tree.getLetter()` -> `tree->getLetter()`
4.  Missing `}` before else

I'm pretty sure the rest of the code will have as many problems. I can't tell them because, like `huffnode`, the definitions for `heap` (etc?) are missing.

### *I recommend taking it slowly and writing tiny bits of code, letting the compiler check your every step along the way, instead of writing a large body and then throwing it at a compiler at once*.

Also, I assumed a `huffnode` definition like:

```
namespace huffnode 
{ 
    struct huffnode 
    { 
        huffnode *leftChild();
        huffnode *rightChild(); 
        char getLetter(); 
    }; 
} 
```

# hadoop - HDFS 在我的单节点实验性本地设置中损坏了 namenode

> ID：13636809
> 
> 赞同：2
> 
> 时间：2012-11-29T23:39:15.770
> 
> 标签：hadoop, hdfs

对于我的 Hadoop 实验，我在我的 macbook 上的 localhost 上设置了单节点 HDFS。每次实验后，我都会关闭 hadoop 服务（./bin/stop-all.sh）。

几乎每次我再次启动我的设置（start-all.sh）时，我发现我的 HDFS 已损坏，我总是需要格式化我的名称节点并重新启动服务以再次访问 HDFS。

当我在启动后停止获取 namenode 管理员访问权限 (http://localhost:50070/) 时，我意识到了这一点。

在启动期间，我的名称节点日志显示“2012-11-29 15:27:43,160 错误 org.apache.hadoop.hdfs.server.namenode.FSNamesystem：FSNamesystem 初始化失败。org.apache.hadoop.hdfs.server.common.InconsistentFSStateException：目录 /private/tmp/hadoop-rupadhyay/dfs/name 处于不一致状态：存储目录不存在或不可访问。”

我不确定我在这里缺少什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:43:23.887

使用 tmp 目录意味着您必须确保在每次重新启动时清除该目录并重新格式化您的名称节点。这是因为操作系统可能会随心所欲地从 tmp 目录中删除文件，从而使您的 hdfs 处于不稳定状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T05:17:49.297

我遇到了同样的问题，谷歌解决了这个问题，core-site.xml 中的 hadoop.tmp.dir 默认为 /tmp/hadoop-username ，每次重新启动时都会清除它。您可以将其更改为其他目录。一个例子是

```
<configuration>
  <property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:54310</value>
  </property>

  <property>
     <name>hadoop.tmp.dir</name>
     <value>/home/hadoop/hdfs-tmp</value>
  </property>
</configuration> 
```

这个链接也很有帮助[Namenode not getting started](https://stackoverflow.com/questions/8076439/namenode-not-getting-started)

# xml - 谷歌自定义搜索最流行的 xml 查询？

> ID：13636811
> 
> 赞同：0
> 
> 时间：2012-11-29T23:39:30.763
> 
> 标签：xml, api, google-custom-search

是否有任何简单的方法可以通过 api/xml 获取 10 个最新的或来自 Google 自定义搜索的 10 个最流行的搜索查询。

我有一个商业帐户，所以我不必担心任何限制。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T09:25:03.440

好的，所以我自己回答了。可以得到一个RDF文件，然后通过url解析

```
http://www.google.com/cse/api/YOUR_API_CODE/cse/YOUR_API_ID/queries?view=overal‌​l 
```

# c# - C# 中的列表转换

> ID：13636818
> 
> 赞同：2
> 
> 时间：2012-11-29T23:40:30.673
> 
> 标签：c#, generics, polymorphism, covariance

我有以下非常简单和（删节的）类：

```
// IEntry interface
public interface IEntry {
  long Id { get; set; }
  string Name { get; set; }
}

// IEntry implementation 
public class Contact : IEntry {
  public long Id { get; set; }
  public string Name { get; set; }
}

// DAO Interface
public interface IEntryDao {
  List<IEntry> findUnapproved();
}

// abstract base class 
public abstract class AbstractEntryDao : IEntryDao {
  public virtual List<IEntry> findUnapproved() {
    List<IEntry> entries = new List<IEntry>();
    // ... default load logic
    return entries;
  }
}

// ContactDao implementation 
public class ContactDao : AbstractEntryDao { 
  public override List<IEntry> findUnapproved() {
     List<IEntry> contacts = new List<IEntry>();
     // ... custom load logic for Contact
     return contacts;
  }
}

// sample client code
public void testFindUnapproved() {
  ContactDao contactDao = new ContactDao();
  List<IEntry> contacts = contactDao.findUnapproved(); // <--- this line works (but not what I want) 
  List<Contact> contacts = contactDao.findUnapproved(); // <--- this does not work (which makes sense)
  List<Contact> contacts = contactDao.findUnapproved() as List<Contact>; // <--- this does not work

  // here is how i compensate for this problem... but i do not like this
  List<Contact> list = new List<Contact>();
  foreach (IManageableEntry contact in contacts) {
      list.Add(contact as Contact);
  }
} 
```

我想要的是一种非常简单的方法（或者可能在 Dao 接口和抽象类中使用泛型）

```
List<Contact> contacts = contactDao.findUnapproved(); // <--- can I achieve this using generics in .NET 3.5? 
```

否则，除了我认为是不好的做法的示例客户端代码的最后之外，还有什么干净的替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:45:26.497

```
List<Contact> contacts = contactDao.findUnapproved().Cast<Contact>().ToList(); 
```

只记得在文件上方添加 using linq 命名空间

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T23:49:17.240

考虑使用[Enumerable.OfType Method](http://msdn.microsoft.com/en-us/library/bb360913.aspx)，如果`findUnapproved`可能返回不同的实现`IEntry`并且您只想`Contact`从列表中获取：

```
List<Contact> contacts = contactDao.findUnapproved().OfType<Contact>().ToList(); 
```

至于`OfType`（和`Cast`）返回`IEnumerable<T>`，你需要打电话`ToList`来得到你想要的。

# javascript - 将 Unicode 字符转换为扩展的 ASCII

> ID：13636820
> 
> 赞同：1
> 
> 时间：2012-11-29T23:40:32.483
> 
> 标签：javascript, unicode, encoding, extended-ascii

我有一些二进制数据必须经过百分比编码才能通过长度限制的查询字符串参数传输到远程服务。

当它回到我身边时，一些值的编码如下：

```
\u2014 
```

我希望将此值转换回二进制数据。Unicode 字符与扩展 ASCII 中的原始值相同。

如何将上述内容转换回扩展 ASCII？ **编辑：Windows-1252**

我更喜欢 Javascript 解决方案，但可以使用：PHP、Python、C、C++。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-30T00:11:26.077

这是映射：

```
var windows1252 = [
         0x0000,0x0001,0x0002,0x0003,0x0004,0x0005,0x0006,0x0007,0x0008,0x0009,0x000A,0x000B,0x000C,0x000D,0x000E,0x000F
        ,0x0010,0x0011,0x0012,0x0013,0x0014,0x0015,0x0016,0x0017,0x0018,0x0019,0x001A,0x001B,0x001C,0x001D,0x001E,0x001F
        ,0x0020,0x0021,0x0022,0x0023,0x0024,0x0025,0x0026,0x0027,0x0028,0x0029,0x002A,0x002B,0x002C,0x002D,0x002E,0x002F
        ,0x0030,0x0031,0x0032,0x0033,0x0034,0x0035,0x0036,0x0037,0x0038,0x0039,0x003A,0x003B,0x003C,0x003D,0x003E,0x003F
        ,0x0040,0x0041,0x0042,0x0043,0x0044,0x0045,0x0046,0x0047,0x0048,0x0049,0x004A,0x004B,0x004C,0x004D,0x004E,0x004F
        ,0x0050,0x0051,0x0052,0x0053,0x0054,0x0055,0x0056,0x0057,0x0058,0x0059,0x005A,0x005B,0x005C,0x005D,0x005E,0x005F
        ,0x0060,0x0061,0x0062,0x0063,0x0064,0x0065,0x0066,0x0067,0x0068,0x0069,0x006A,0x006B,0x006C,0x006D,0x006E,0x006F
        ,0x0070,0x0071,0x0072,0x0073,0x0074,0x0075,0x0076,0x0077,0x0078,0x0079,0x007A,0x007B,0x007C,0x007D,0x007E,0x007F
        ,0x20AC,0xFFFD,0x201A,0x0192,0x201E,0x2026,0x2020,0x2021,0x02C6,0x2030,0x0160,0x2039,0x0152,0xFFFD,0x017D,0xFFFD
        ,0xFFFD,0x2018,0x2019,0x201C,0x201D,0x2022,0x2013,0x2014,0x02DC,0x2122,0x0161,0x203A,0x0153,0xFFFD,0x017E,0x0178
        ,0x00A0,0x00A1,0x00A2,0x00A3,0x00A4,0x00A5,0x00A6,0x00A7,0x00A8,0x00A9,0x00AA,0x00AB,0x00AC,0x00AD,0x00AE,0x00AF
        ,0x00B0,0x00B1,0x00B2,0x00B3,0x00B4,0x00B5,0x00B6,0x00B7,0x00B8,0x00B9,0x00BA,0x00BB,0x00BC,0x00BD,0x00BE,0x00BF
        ,0x00C0,0x00C1,0x00C2,0x00C3,0x00C4,0x00C5,0x00C6,0x00C7,0x00C8,0x00C9,0x00CA,0x00CB,0x00CC,0x00CD,0x00CE,0x00CF
        ,0x00D0,0x00D1,0x00D2,0x00D3,0x00D4,0x00D5,0x00D6,0x00D7,0x00D8,0x00D9,0x00DA,0x00DB,0x00DC,0x00DD,0x00DE,0x00DF
        ,0x00E0,0x00E1,0x00E2,0x00E3,0x00E4,0x00E5,0x00E6,0x00E7,0x00E8,0x00E9,0x00EA,0x00EB,0x00EC,0x00ED,0x00EE,0x00EF
        ,0x00F0,0x00F1,0x00F2,0x00F3,0x00F4,0x00F5,0x00F6,0x00F7,0x00F8,0x00F9,0x00FA,0x00FB,0x00FC,0x00FD,0x00FE,0x00FF
];

var unicodeToWindows1252 = {};

for( var i = 0; i < windows1252.length; ++i ) {
    unicodeToWindows1252[String.fromCharCode(windows1252[i])] = i;
} 
```

我不知道你的意思是如何在 js 中表示二进制，但我使用的是普通数组并将 windows-1252 字节值作为整数推送到那里。

```
var str = "\u2014";

var character, i = 0;
var ret = [];
while( character = str.charAt(i++) ) {
    if( !(character in unicodeToWindows1252 ) ) {
        throw new TypeError( character + " is unrepresentable in windows-1252, unable to convert" );
    }
    ret.push( unicodeToWindows1252[character] );
}
console.log( ret ) //[151]
//ret contains the integer 151, which is Windows-1252 for "\u2014" 
```

# xcode - 不在只有 2 个视图控制器的视图层次结构中？

> ID：13636824
> 
> 赞同：0
> 
> 时间：2012-11-29T23:41:00.197
> 
> 标签：xcode, uistoryboardsegue

我有两个通过 segues 相互连接的视图控制器。当有人按下按钮时，他们会转换到 viewcontroller2。在那个 viewdidload 中，然后我通过使用以下代码启动 segue “backs”，将它们启动回原始视图控制器：

```
 [self performSegueWithIdentifier: @"backs" sender: self]; 
```

但是，它一直拒绝这种简单的转换，说我的视图控制器超出了层次结构？只有两个视图控制器，所以我想知道这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:45:29.790

`viewDidLoad`太快了。视图已加载，但尚未放入视图层次结构中。你想等到`viewDidAppear`。这是视图控制器的视图实际上是完整视图层次结构的一部分的第一个时刻。（即使那样，您也可能不得不使用延迟性能；我不确定。）

关于您所说的另一个问题是，如果您通过 segue 从视图控制器 A 转到视图控制器 B，则无法通过正常的 segue 返回。您必须使用新的“展开”segue 功能，或者手动返回（例如关闭呈现的控制器，弹出推送的控制器）。

# php - PHP未定义索引错误 - 从隐藏输入传递值

> ID：13636825
> 
> 赞同：0
> 
> 时间：2012-11-29T23:41:08.520
> 
> 标签：php, html

尝试通过表单中的隐藏输入传递值时收到此错误。我以前曾多次使用过它，但我似乎无法弄清楚为什么它没有特别通过这个时间。

索引表格中的代码：

```
<form method="post" action="viewchars.php">
    <input type="hidden" name="uname" value="testuser" />
</form> 
```

viewchars.php 上的代码：

```
<?php
    $user = $_POST["uname"];
?> 
```

该错误指出 uname 是未定义的索引。

我不想让错误消失，因为我实际上需要为 viewchars.php 页面传递值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:44:36.590

您必须确保在使用 POST 值之前提交表单。所以它应该是这样的

`$user = isset($_POST['uname']) ? $_POST['uname'] : '';`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:17:58.753

在您的 html 中添加提交按钮

```
<form method="post" action="viewchars.php">
    <input type="hidden" name="uname"  value="testuser" />
    <input type="submit" value="Submit"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:02:12.520

如果您通过 JS 发送，请确保您实际使用的是 POST。您是否尝试过在 $_REQUEST 上进行测试？

另外，尝试：

*   使用提交按钮只是为了测试

*   使输入可见并键入要测试的文本

*   更改变量名称

*   试试 print_r($_REQUEST); 在 php 端查看接收到的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T05:50:44.510

只需删除输入行末尾的“/”形式！像这样...

`<form method="post" action="viewchars.php"> <input type="hidden" name="uname" value="testuser" > </form>`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T23:47:34.900

尝试以下操作：

```
$user = $_POST['uname']; 
```

# android - 如果不需要权限，则设置 Android PhoneGap 配置文件

> ID：13636834
> 
> 赞同：1
> 
> 时间：2012-11-29T23:42:11.370
> 
> 标签：android, cordova, permissions, config, phonegap-build

我为 Android 制作了一个简单的井字游戏应用程序，它不需要访问相机或浏览器等的权限。

我在 PhoneGap config.xml 文件中放了什么来具体说明这一点？在您安装它的那一刻，它说该应用程序可以访问所有内容，我不希望这样显示，因为它不是真的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:42:04.390

从这里引用 [https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

```
<!-- If you do not want any permissions to be added to your app, add the
    following tag to your config.xml; you will still have the INTERNET
    permission on your app, which PhoneGap requires. -->
<preference name="permissions" value="none"/> 
```

如果它仍然给您带来问题，请尝试这里

[http://community.phonegap.com/nitobi/topics/config_xml_disable_all_permissions_not_working_android](http://community.phonegap.com/nitobi/topics/config_xml_disable_all_permissions_not_working_android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T08:07:22.687

Nick Roths 解决方案通常可以解决问题，但是...确保您没有安装任何不必要的 Phonegap 插件。如果你这样做了，那么将“首选项”设置为“无”将无效。

我尝试了 Nicks 解决方案，但我的 Android Manifest 中仍然有一个巨大的访问权限列表（大概会在我实际发布后呈现给用户）。

原因是我误解了 Phonegap 插件的工作方式。我的应用需要设备、通知和网络插件，我发现[这个页面](http://docs.phonegap.com/en/3.0.0/guide_cli_index.md.html#The%20Command-line%20Interface)描述了如何安装它们。

我错误地认为这些插件将作为 Phonegap SDK 的一部分安装在我的本地计算机上，并且可供所有应用程序使用。所以我决定一劳永逸地安装所有这些插件。

傻我。我理解错了。当您按照上述链接安装插件时，它将仅为您当前的应用程序安装该功能。这就是为什么您需要从应用程序所在的目录中调用它的原因。

显然，如果应用程序没有这些功能的用户权限，那么即使您将“权限”首选项设置为“无”，PhoneGap 也会自动将它们添加到 AndroidManifest。

所以：卸载与您不需要的用户权限相关的插件。这是上述页面中描述如何：

> 要删除插件，请使用列表中显示的相同标识符引用它，该标识符对应于项目插件目录中的子目录。例如，以下是如何从最终发布版本中删除对调试控制台的支持：

**$ phonegap 本地插件删除 org.apache.cordova.core.console**

# windows-phone-8 - 使用后关闭 VideoTorch

> ID：13636836
> 
> 赞同：1
> 
> 时间：2012-11-29T23:42:29.047
> 
> 标签：windows-phone-8

我正在为 WP8 开发一个简单的 Flash Light 应用程序，我正在使用 JustinAngel 在这个问题中的出色示例代码：[Reflection failure when trying to access Microsoft.Phone.Media.Extended](https://stackoverflow.com/questions/13454422/wp8-reflection-api-issue-please-check/13473773#13473773)

我的问题是；如何关闭相机闪光灯？我一直在尝试设置 VideoTorchMode.Off 属性，但是当我尝试使用下面的代码再次启动相机时，它只会引发以下错误：`Operation is not valid due to the current state of the object.`

```
// get the AudioViceoCaptureDevice
var avDevice = await AudioVideoCaptureDevice.OpenAsync(sensorLocation,
   AudioVideoCaptureDevice.GetAvailableCaptureResolutions(sensorLocation).First()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:29:53.147

您需要缓存 avDevice 以供以后使用。不要多次初始化它，并确保在完成后将其丢弃。

# ruby - Ruby 遍历数千条记录并重置值（最佳解决方案）

> ID：13636839
> 
> 赞同：0
> 
> 时间：2012-11-29T23:42:57.530
> 
> 标签：ruby

```
mydata = {:data => [
        {
        :first_name = > "abc",
        :foo_id = > "21sd",
        :roll = > 43
        }, 
        {:first_name = > "def",
        :foo_id = > "2uf",
        :roll = > 81
        }, 
        {:first_name = > "xyz",
        :foo_id = > "ac32",
        :roll = > 2
        }
    ]
} 
```

在 mydata :roll 中有某种损坏的值

我有一个排序的哈希，它的数据为`:foo_id => :roll`

```
sorted = {"21sd" => 7, "ac32" => 89, "2uf" => 92} 
```

（即通过 :roll 的升序正确值排序）

我想使用这个“排序”哈希来重新排列“mydata”，并用`:roll`“排序”哈希中的正确值覆盖“mydata”中的值。所以最后'mydata'看起来像

```
mydata = {:data => [
        {
        :first_name = > "abc",
        :foo_id = > "21sd",
        :roll = > 7
        }, 
        {:first_name = > "xyz",
        :foo_id = > "ac32",
        :roll = > 89
        },
        {:first_name = > "def",
        :foo_id = > "2uf",
        :roll = > 92
        }
    ]
} 
```

**UPADTE:** :roll 在排序中可能不是唯一的

考虑 mydata 可能有 100,000 个哈希值

我已经使用'sorted'的嵌套循环实现了结果，并且在每次迭代中，从'mydata'中搜索foo_id并更正值并将排序数据存储在新变量中。这是丑陋的。

```
correct = []
sorted.each {|k, v|
    mydata[:data].each {|h| # hate looping here
        if h[:foo_id] == k  # hate searching here, if i have 100,000 record in 'mydata'
            h[:roll] = v
           correct << h 
        end
    }
}
mydata = {:data => correct} 
```

如果 mydata 包含大量数据集，这不是最佳解决方案。有人建议一些最佳解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:54:18.713

这应该工作...

```
mydata[:data].each do |h|
  h[:roll] = sorted[h[:foo_id]]
end 
```

没有办法避免循环通过 mydata[:data] 虽然它是一个数组......但你不需要把东西塞进一个新的变量......只需更新你所拥有的。

除非我不明白这个问题......

编辑：我没有选择正确的排序。新解决方案：

```
mydata[:data].each do |h|
  h[:roll] = sorted[h[:foo_id]]
end
mydata[:data].sort_by!{|h| h[:roll]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:17:03.650

```
data =  [
        {
        :first_name => "abc",
        :foo_id => "21sd",
        :roll => 7
        },
        {:first_name => "xyz",
        :foo_id => "ac32",
        :roll => 89
        },
        {:first_name => "def",
        :foo_id => "2uf",
        :roll => 92
        }
    ]

sorted = {"21sd" => 7, "ac32" => 89, "2uf" => 92}

foo_id_name = data.map do |rec|
    { rec[:foo_id] =>  rec[:first_name] }
end.reduce(&:merge)

new_data = sorted.map do |foo_id, new_roll|
    {
        :first_name => foo_id_name[foo_id],
        :foo_id => foo_id,
        :roll => new_roll
    }
end

puts new_data.inspect #=> [{:first_name=>"abc", :foo_id=>"21sd", :roll=>7}, {:first_name=>"xyz", :foo_id=>"ac32", :roll=>89}, {:first_name=>"def", :foo_id=>"2uf", :roll=>92}] 
```

# .net - 设计器失败 - My.Resources.Resources' 没有名为的属性

> ID：13636840
> 
> 赞同：10
> 
> 时间：2012-11-29T23:43:08.090
> 
> 标签：.net, winforms

我有一个问题是设计师不会显示表单。它失败，错误设计器给出如下警告：

![在此处输入图像描述](../Images/11c399b420f1c72e557e91f35f21bba2.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-09-30T09:13:14.740

如果**您的项目引用自身**，就会发生这种情况。

**当项目中定义的某些控件/表单使用同一项目中定义的其他（用户）控件**时，Visual Studio 会随机自动执行此操作。

您可以安全地删除项目的“*引用*”节点**中的自引用。**

 *然后重建，设计人员应该重新加载而不会出现这些错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T23:52:51.110

您似乎缺少在应用程序**Resources**中加载此表单所需的项目。

您可以通过右键单击项目并选择**Properties来访问项目的****资源**。然后，单击左侧窗格中的**资源**。

 ****![项目资源](../Images/1c3a1314a6d11ca4d4a26fc25619d67a.png)

您收到的错误表明未找到在您的应用程序中加载此表单所需的项目，而这些项目应该从**资源**中加载。在大多数情况下，这些项目可以是**图像**

您可能想要更改设计器代码或将丢失的项目恢复到**Resources**。

**注意**：资源可能是**字符串**、**图像**、**图标**、**音频**、**文件**或**其他**。

谢谢，
我希望你觉得这有帮助:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-10T03:16:50.950

我知道这是一个非常古老的帖子，但是人们会收到此错误，他们会找到此帖子，并且当他们看到此帖子时，他们会拔掉大部分头发，但是，这就是我发现的：

1.  不是你，是MS。我正在使用 VS 2015，我仍然得到这个！
2.  我发现当项目以某种方式引用自身时会发生这种情况
3.  它并不总是在引用节点下可见

解决：

1.  做一个干净的
2.  删除 BIN 文件夹
3.  ON PURPOSE 参考项目输出 exe 文件
4.  编译
5.  关闭和打开 VS
6.  检查你的引用节点，你应该看到带有感叹号的自引用exe，删除引用
7.  做另一个构建

我发现此时我的问题已解决，我可以继续工作（至少在那一天）

希望这可以帮助那些在使用 MS 产品时才变得秃顶的人！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-13T11:01:42.970

我使用了项目名称“ **xxx** ”。

1.  打开/编辑项目文件（**xxx** .csproj 或**xxx** .vbproj）
2.  找到这个 xml 节点并删除。
    `<Reference Include="xxx, Version=1.0.0.0, Culture=neutral, processorArchitecture=x86"> <ExecutableExtension>.exe</ExecutableExtension> </Reference>`
3.  打开并重建。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-01-19T20:01:24.387

这是[理查德答案](https://stackoverflow.com/a/43883049)的变体。出于显而易见的原因，我只需要进行一项更改。我要留头发！

解决：

1.  ON PURPOSE 引用项目输出文件，（dll 或 exe）
2.  做一个干净的
3.  删除 BIN 文件夹
4.  编译关闭和打开 VS
5.  卸载项目并编辑项目
6.  检查你的引用节点，你应该看到自我引用的 exe 或 ddl 带有感叹号，删除引用
7.  做另一个构建

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-05T13:21:05.843

更改项目的命名空间后，我遇到了同样的问题。之后我收到了同样的错误信息，并且正在查看这篇文章，但没有一个解决方案对我有用。既然我已经找到了解决方案，我在这里写它来指导其他开发人员在同样的问题上苦苦挣扎。
问题的原因是更改命名空间并没有更改“默认命名空间”。要更改“默认命名空间”：

1.  右键单击项目并选择属性
2.  在左侧面板上选择“应用程序”
3.  设置正确的“默认命名空间”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-27T11:59:04.853

当我确实更改了命名空间时，我遇到了同样的问题。所以我所做的是：

1.  我通过选择它并重命名它来更改名称空间
2.  我点击了灯泡并重命名了所有引用
3.  从解决方案中删除所有项目
4.  关闭 Visual Studio
5.  重命名 Windows 资源管理器中的所有项目
6.  打开 Visual Studio 并再次添加所有项目

上述步骤我更改了命名空间，但是当我打开 Windows 窗体时，我在您的第一个屏幕上遇到了与此处相同的错误。
为了解决这个问题，我注意到我必须转到我拥有的每个项目的属性并在那里重命名命名空间。当我这样做时，这个错误就解决了，一切都恢复正常了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-12T00:28:52.200

另一个解决方案...我重命名了一个项目，VS 进行了大规模重命名...除了该死的 .exe。更新了*newname* .exe 的项目属性，一切正常

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-06T05:30:16.910

我发现这是由于命名空间“重叠”造成的，我的实用程序项目（位于主（VB.NET）解决方案中）与它所引用的类库（主项目）具有相同的根命名空间。（你都明白了吗？）

例如，我的主项目（“MainProject”）指定了`Company.Project`. 我的实用程序项目（巧妙地命名为“UtilityProject”）*还*指定了一个`Company.Project`.

该错误可以通过在其属性中重新添加（在我的情况下）图像资源源链接来临时解决。但是一旦项目关闭并重新打开，*POOF！*，走了。

因为我必须在我的实用程序项目中引用我的主要项目，所以我不能只是按照此处其他地方的建议并删除引用。因此，我尝试将实用程序项目的根命名空间更改为`Company`，纠正了一些由此产生的表单设计器参考错误，Bob 再次成为我的叔叔。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-03-04T00:58:14.453

3

我使用了项目名称“xxx”。

打开/编辑项目文件（xxx.csproj 或 xxx.vbproj） 找到这个 xml 节点并删除。.exe 打开并重新构建。

我解决了这个问题。感谢你*****

# r - 我如何*排除*

> ID：13636843
> 
> 赞同：0
> 
> 时间：2012-11-29T23:43:34.807
> 
> 标签：r, pattern-matching, k

我有一个包含很多日期的数据框（数据）。我想删除 1970 年之前的所有内容。我可以创建一个 1970 年之前的索引列表：

```
tmp <- which(data$data < '1970-01-01')
[1]  13446 102876 141199 
```

我想创建一个删除这三行的新表。就像是：

```
data.after.1970 <- data[!tmp, ] 
```

我知道我可以创建一个包含1970 年*之后*所有事件的向量，并与它匹配：

```
tmp <- which(data$data > '1970-01-01')
data.after.1970 <- data[tmp, ] 
```

但我想知道我会使用什么语法来排除项目​​。

**更新**

我终于做到了：

```
tmp <- which(data$data > as.Date('1970-01-01'))
data.after.1970 <- data[tmp, ] 
```

并仔细看了看。`which(data$data < as.Date('1970-01-01'))`得到三个结果，但`nrow(data) - nrow(data.after.1970)`显示我删除了 45 行。`summary(datae$date)`清除了：

```
summary(data$date)
        Min.      1st Qu.       Median         Mean      3rd Qu.         Max.         NA's 
"1933-07-01" "1989-01-25" "1992-07-09" "1992-05-03" "1996-06-10" "2006-09-14"         "42" 
```

因为我的目标是获得第二个数据集，所以如果我排除那些日期不好的数据集，我可以比较我的结果，我实际上也想删除那些具有 NA 值的数据集。

我*仍然*想知道我会使用什么语法来排除一些数字向量而不是包含它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:49:25.490

`which`返回在逻辑表达式的评估中或在逻辑向量本身中为 TRUE 的项的数值向量。也可以使用负索引来删除项目。在您的情况下，可能看起来像：

```
tmp <- data[ which(data$data < '1970-01-01') ,  ] 
```

即返回数据帧的所有行，“数据”列小于“1970-01-01”的“数据”。你真的应该学会使用比“数据”更具体的名称。您不仅会因为对象和与该对象的元素具有相同名称而造成混淆，而且还有一个函数“数据”。那么你的可怜的听众应该如何知道你在 10 个月前编写代码时的意思。

为了解决上面那些不喜欢使用的反对者，`which`我会回答它避免了“[”函数将返回条件为 TRUE 或为 NA 的所有行的问题。您可以使用`subset`which 具有相同的优势，但不建议在编程中使用，仅用于交互使用。您可以按照子集的方式进行操作，并添加一个消除 NA 值的子句：

```
tmp <- data[ data$data < '1970-01-01 & !is.na(data$data) , ] 
```

...而且我认为使用的版本`which`比那个替代版本“更干净”。在没有值为 TRUE 并且您使用负索引的情况下会出现一个缺点`which`，在这种情况下，与预期相反，使用`dfrm[-which(condition) , ]`不会给您想要的东西，而是一个空向量。所以规则是：使用`which`但不使用负索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:52:57.097

多解释一点，如果你运行：

```
data$date > '1970-01-01' 
```

您将看到它返回一个逻辑向量`TRUE/FALSE`，您可以使用该向量来选择所需的行。它在这个例子中工作：

```
test <- 1:3
test[c(TRUE,FALSE,TRUE)]
# result
[1] 1 3 
```

正如@DWin 在他的回答中指出的那样，当您有`NA`值时，有一些警告，这些值也将与`TRUE`值一起返回。如：

```
test <- c(NA,1:3)
test > 2
# result
[1]    NA FALSE FALSE  TRUE
test[test>2]
# result
[1] NA  3 
```

该`which`语句`TRUE`仅返回所有索引，从而避免了`NA`值的问题。

```
test <- c(NA,1:3)

which(test>2)
# result - the fourth value of test is > 2
[1] 4

> test[4]
# result - return the fourth value of test
[1] 3

test[which(test>2)]
# result - return the fourth value of test as the 
# which statement has identified it is > 2
[1] 3 
```

顺便说一句，我正在收集您可能实际上需要执行以下操作：

```
data$date > as.Date('1970-01-01') 
```

...让您的示例正常工作。这当然是假设您的`date`列实际上也是一个`Date`对象，而不仅仅是纯文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:11:01.953

事实证明它实际上非常简单。

```
data.after.1970 <- data[-tmp, ] 
```

将创建一个新框架，`data.after.1970`其中包括`data`除与 中的索引匹配的 行之外的所有行`tmp`。

# powershell-2.0 - 在 HTTP 响应为 500 时使用 Powershell 捕获 IIS 的“黄色文本”

> ID：13636846
> 
> 赞同：1
> 
> 时间：2012-11-29T23:43:58.713
> 
> 标签：powershell-2.0

现在我正在使用这样的一行：（基于其他人在 SO 上讨论的代码）

```
(New-Object System.Net.WebClient).DownloadFile( $servicePath, $responseFile) 
```

在少数情况下，我`$servicePath`会抛出 500。虽然我可以非常巧妙地将这些信息扔到浏览器窗口中，但我更喜欢将其下载（收集以前的事件是件好事，是吗？）到一个文件中并允许其他人参考以后再说。

问题是，我的 try-catch 遇到了 500 异常，我不确定如何捕获 IIS 错误的“黄色文本”。如何使用 PowerShell 2.0 做到这一点？我愿意从 WebClient 切换到其他东西，但我更愿意留在纯 PS 空间中，如果可以的话，不添加新库。

如果我在 powershell ISE 中这样尝试，我会得到以下信息：

```
$o = @{};
$err = @{};
try {
  $o = New-Object System.Net.WebClient;
  $o.DownloadFile($servicePath, $responseFile);
} catch { 
  $err = $_;
} 
```

和

```
$err.Exception.Message => "The remote server returned an error: (500) Internal Server Error." 
```

如何捕获黄色文本？显然，我的浏览器可以捕获显示给我的黄色文本。我需要使用 HttpWebResponse 什么的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T22:17:20.790

aaaahhhhh，我实际上在这里有一个问题的答案！！！！我昨天也遇到了同样的问题！！！:) 足够我的咆哮了。问题是 $o 将您获得的消息存储为一个对象，如果您想对它实际执行任何操作，最简单的方法是通过将输出管道传输到 out-string cmdlet 将其转换为字符串。现在你可以对 $strerror 变量做任何你需要做的事情了。让我知道我是否可以提供进一步的帮助。

```
 $o = @{};
    $err = @{};
    try {
          $o = New-Object System.Net.WebClient;
          $o.DownloadFile($servicePath, $responseFile);
    }catch{ 
           $strerror = ($error[0] | out-string)
           } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T19:22:44.773

“Write-Output $strerror | Out-File C:\test\htmltest.txt”下面的这一行会将其发送到 txt 文件

```
$o = @{};
$err = @{};
try {
      $o = New-Object System.Net.WebClient;
      $o.DownloadFile($servicePath, $responseFile);
}catch{
       $strerror = ($error[0] | out-string)
       Write-Output $strerror | Out-File C:\test\htmltest.txt      
          } 
```

# python - 是否可以与 python pandas 进行模糊匹配合并？

> ID：13636848
> 
> 赞同：105
> 
> 时间：2012-11-29T23:44:17.093
> 
> 标签：python, pandas

我有两个要基于列合并的 DataFrame。但是，由于拼写不同、空格数量不同、变音符号的缺失/存在，只要它们彼此相似，我希望能够合并。

任何相似性算法都可以（soundex、Levenshtein、difflib's）。

假设一个 DataFrame 具有以下数据：

```
df1 = DataFrame([[1],[2],[3],[4],[5]], index=['one','two','three','four','five'], columns=['number'])

       number
one         1
two         2
three       3
four        4
five        5

df2 = DataFrame([['a'],['b'],['c'],['d'],['e']], index=['one','too','three','fours','five'], columns=['letter'])

      letter
one        a
too        b
three      c
fours      d
five       e 
```

然后我想得到结果 DataFrame

```
 number letter
one         1      a
two         2      b
three       3      c
four        4      d
five        5      e 
```

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-12-03T10:06:04.680

与@locojay 建议类似，您可以将[`difflib`](http://docs.python.org/2/library/difflib.html)'s[`get_close_matches`](http://docs.python.org/2/library/difflib.html#difflib.get_close_matches)应用于`df2`' 索引，然后应用 a [`join`](http://pandas.pydata.org/pandas-docs/dev/merging.html#joining-on-index)：

```
In [23]: import difflib 

In [24]: difflib.get_close_matches
Out[24]: <function difflib.get_close_matches>

In [25]: df2.index = df2.index.map(lambda x: difflib.get_close_matches(x, df1.index)[0])

In [26]: df2
Out[26]: 
      letter
one        a
two        b
three      c
four       d
five       e

In [31]: df1.join(df2)
Out[31]: 
       number letter
one         1      a
two         2      b
three       3      c
four        4      d
five        5      e 
```

.

如果这些是列，那么您可以同样适用于该列[`merge`](http://pandas.pydata.org/pandas-docs/dev/merging.html#database-style-dataframe-joining-merging)：

```
df1 = DataFrame([[1,'one'],[2,'two'],[3,'three'],[4,'four'],[5,'five']], columns=['number', 'name'])
df2 = DataFrame([['a','one'],['b','too'],['c','three'],['d','fours'],['e','five']], columns=['letter', 'name'])

df2['name'] = df2['name'].apply(lambda x: difflib.get_close_matches(x, df1['name'])[0])
df1.merge(df2) 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2019-05-26T16:42:53.933

# 使用`fuzzywuzzy`

由于该软件包没有示例，因此`fuzzywuzzy`我编写了一个函数，它将根据您可以作为用户设置的阈值返回所有匹配项：

* * *

**示例数据框**

```
df1 = pd.DataFrame({'Key':['Apple', 'Banana', 'Orange', 'Strawberry']})
df2 = pd.DataFrame({'Key':['Aple', 'Mango', 'Orag', 'Straw', 'Bannanna', 'Berry']})

# df1
          Key
0       Apple
1      Banana
2      Orange
3  Strawberry

# df2
        Key
0      Aple
1     Mango
2      Orag
3     Straw
4  Bannanna
5     Berry 
```

**模糊匹配函数**

```
def fuzzy_merge(df_1, df_2, key1, key2, threshold=90, limit=2):
    """
    :param df_1: the left table to join
    :param df_2: the right table to join
    :param key1: key column of the left table
    :param key2: key column of the right table
    :param threshold: how close the matches should be to return a match, based on Levenshtein distance
    :param limit: the amount of matches that will get returned, these are sorted high to low
    :return: dataframe with boths keys and matches
    """
    s = df_2[key2].tolist()

    m = df_1[key1].apply(lambda x: process.extract(x, s, limit=limit))    
    df_1['matches'] = m

    m2 = df_1['matches'].apply(lambda x: ', '.join([i[0] for i in x if i[1] >= threshold]))
    df_1['matches'] = m2

    return df_1 
```

**在数据帧上使用我们的函数：** *#1*

```
from fuzzywuzzy import fuzz
from fuzzywuzzy import process

fuzzy_merge(df1, df2, 'Key', 'Key', threshold=80)

          Key       matches
0       Apple          Aple
1      Banana      Bannanna
2      Orange          Orag
3  Strawberry  Straw, Berry 
```

**在数据帧上使用我们的函数：** *#2*

```
df1 = pd.DataFrame({'Col1':['Microsoft', 'Google', 'Amazon', 'IBM']})
df2 = pd.DataFrame({'Col2':['Mcrsoft', 'gogle', 'Amason', 'BIM']})

fuzzy_merge(df1, df2, 'Col1', 'Col2', 80)

        Col1  matches
0  Microsoft  Mcrsoft
1     Google    gogle
2     Amazon   Amason
3        IBM 
```

# 安装：

**点**

```
pip install fuzzywuzzy 
```

**蟒蛇**

```
conda install -c conda-forge fuzzywuzzy 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-12-02T09:15:43.890

我写了一个 Python 包来解决这个问题：

`pip install fuzzymatcher`

您可以在此处找到 repo并[在](https://github.com/RobinL/fuzzymatcher/blob/master/examples.ipynb)[此处](https://github.com/RobinL/fuzzymatcher)找到文档。

基本用法：

给定两个要模糊连接的数据框`df_left`和`df_right`，您可以编写以下内容：

```
from fuzzymatcher import link_table, fuzzy_left_join

# Columns to match on from df_left
left_on = ["fname", "mname", "lname",  "dob"]

# Columns to match on from df_right
right_on = ["name", "middlename", "surname", "date"]

# The link table potentially contains several matches for each record
fuzzymatcher.link_table(df_left, df_right, left_on, right_on) 
```

或者，如果您只想链接最接近的匹配项：

```
fuzzymatcher.fuzzy_left_join(df_left, df_right, left_on, right_on) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-05-29T01:54:05.510

我会使用 Jaro-Winkler，因为它是目前可用的最高效和最准确的近似字符串匹配算法之一 [ [Cohen, et al.](http://dc-pubs.dbs.uni-leipzig.de/files/Cohen2003Acomparisonofstringdistance.pdf) ]，[[温克勒](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.46.7347)]。

这就是我使用[jellyfish](https://pypi.python.org/pypi/jellyfish)包中的 Jaro-Winkler 的方法：

```
def get_closest_match(x, list_strings):

  best_match = None
  highest_jw = 0

  for current_string in list_strings:
    current_score = jellyfish.jaro_winkler(x, current_string)

    if(current_score > highest_jw):
      highest_jw = current_score
      best_match = current_string

  return best_match

df1 = pandas.DataFrame([[1],[2],[3],[4],[5]], index=['one','two','three','four','five'], columns=['number'])
df2 = pandas.DataFrame([['a'],['b'],['c'],['d'],['e']], index=['one','too','three','fours','five'], columns=['letter'])

df2.index = df2.index.map(lambda x: get_closest_match(x, df1.index))

df1.join(df2) 
```

输出：

```
 number  letter
one     1   a
two     2   b
three   3   c
four    4   d
five    5   e 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-30T19:56:02.180

[http://pandas.pydata.org/pandas-docs/dev/merging.html](http://pandas.pydata.org/pandas-docs/dev/merging.html)没有钩子函数可以即时执行此操作。不过会很好...

我将只做一个单独的步骤并使用 difflib getclosest_matches 在两个数据帧之一中创建一个新列，并在模糊匹配列上进行合并/连接

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-28T23:56:11.547

## 对于一般方法：`fuzzy_merge`

对于更一般的场景，我们想要合并两个数据帧中包含稍微不同的字符串的列，以下函数使用[`difflib.get_close_matches`](https://docs.python.org/2/library/difflib.html#difflib.get_close_matches)with[`merge`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.merge.html)以模仿 pandas 的功能，`merge`但具有模糊匹配：

```
import difflib 

def fuzzy_merge(df1, df2, left_on, right_on, how='inner', cutoff=0.6):
    df_other= df2.copy()
    df_other[left_on] = [get_closest_match(x, df1[left_on], cutoff) 
                         for x in df_other[right_on]]
    return df1.merge(df_other, on=left_on, how=how)

def get_closest_match(x, other, cutoff):
    matches = difflib.get_close_matches(x, other, cutoff=cutoff)
    return matches[0] if matches else None 
```

* * *

以下是一些带有两个示例数据框的用例：

```
print(df1)

     key   number
0    one       1
1    two       2
2  three       3
3   four       4
4   five       5

print(df2)

                 key_close  letter
0                    three      c
1                      one      a
2                      too      b
3                    fours      d
4  a very different string      e 
```

通过上面的例子，我们会得到：

```
fuzzy_merge(df1, df2, left_on='key', right_on='key_close')

     key  number key_close letter
0    one       1       one      a
1    two       2       too      b
2  three       3     three      c
3   four       4     fours      d 
```

我们可以使用以下方法进行左连接：

```
fuzzy_merge(df1, df2, left_on='key', right_on='key_close', how='left')

     key  number key_close letter
0    one       1       one      a
1    two       2       too      b
2  three       3     three      c
3   four       4     fours      d
4   five       5       NaN    NaN 
```

对于右连接，我们将左侧数据框中的所有不匹配键用于`None`：

```
fuzzy_merge(df1, df2, left_on='key', right_on='key_close', how='right')

     key  number                key_close letter
0    one     1.0                      one      a
1    two     2.0                      too      b
2  three     3.0                    three      c
3   four     4.0                    fours      d
4   None     NaN  a very different string      e 
```

* * *

另请注意，如果在截止范围内没有匹配项，**则将返回一个空列表。**在共享示例中，如果我们将最后一个索引更改为：[`difflib.get_close_matches`](https://docs.python.org/2/library/difflib.html#difflib.get_close_matches) **`df2`**

 **```
print(df2)

                          letter
one                          a
too                          b
three                        c
fours                        d
a very different string      e 
```

我们会得到一个`index out of range`错误：

```
df2.index.map(lambda x: difflib.get_close_matches(x, df1.index)[0]) 
```

> IndexError：列表索引超出范围

为了解决这个问题，上面的函数`get_closest_match`将通过索引返回的列表来返回最接近的匹配，`difflib.get_close_matches` *只有当*它实际上包含任何匹配时。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-07-12T20:18:11.497

我使用了 Fuzzymatcher 包，这对我来说效果很好。访问此[链接](https://github.com/RobinL/fuzzymatcher)以获取更多详细信息。

使用以下命令安装

```
pip install fuzzymatcher 
```

下面是示例代码（上面已经由 RobinL 提交）

```
from fuzzymatcher import link_table, fuzzy_left_join

# Columns to match on from df_left
left_on = ["fname", "mname", "lname",  "dob"]

# Columns to match on from df_right
right_on = ["name", "middlename", "surname", "date"]

# The link table potentially contains several matches for each record
fuzzymatcher.link_table(df_left, df_right, left_on, right_on) 
```

**您可能会遇到的错误**

1.  ZeroDivisionError: float 除以零--->参考这个 [链接](https://github.com/RobinL/fuzzymatcher/issues/42)解决它
2.  OperationalError: No Such Module:fts4 --> 从[这里](https://www.sqlite.org/download.html)下载 sqlite3.dll并替换 python 或 anaconda DLLs 文件夹中的 DLL 文件。

优点：

1.  **工作更快。** *就我而言，我将一个包含 3000 行的数据帧与另一个包含 170,000 条记录的数据帧进行了比较*。这也使用 SQLite3 跨文本搜索。比很多人都快
2.  **可以检查多个列和 2 个数据框**。*就我而言，我正在根据地址和公司名称寻找最接近的匹配项。有时，公司名称可能相同，但地址也是检查的好东西。*
3.  为您提供同一记录的所有最接近匹配项的得分。你选择什么是截止分数。

缺点：

1.  原包安装有bug
2.  还安装了所需的 C++ 和 Visual Studio
3.  不适用于 64 位 anaconda/Python

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2020-03-11T10:43:18.020

有一个名为的包可以`fuzzy_pandas`使用`levenshtein`、`jaro`和方法。[这里](https://github.com/jsoma/fuzzy_pandas/blob/master/examples/fuzzy_pandas%20examples.ipynb)有一些很好的例子`metaphone``bilenco`

```
import pandas as pd
import fuzzy_pandas as fpd

df1 = pd.DataFrame({'Key':['Apple', 'Banana', 'Orange', 'Strawberry']})
df2 = pd.DataFrame({'Key':['Aple', 'Mango', 'Orag', 'Straw', 'Bannanna', 'Berry']})

results = fpd.fuzzy_merge(df1, df2,
            left_on='Key',
            right_on='Key',
            method='levenshtein',
            threshold=0.6)

results.head() 
```

```
 Key    Key
0 Apple  Aple
1 Banana Bannanna
2 Orange Orag 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-08-07T18:33:26.430

提醒一下，这基本上是有效的，除非找不到匹配项，或者任一列中都有 NaN。`get_close_matches`我发现应用以下功能更容易，而不是直接应用。NaN 替换的选择很大程度上取决于您的数据集。

```
def fuzzy_match(a, b):
    left = '1' if pd.isnull(a) else a
    right = b.fillna('2')
    out = difflib.get_close_matches(left, right)
    return out[0] if out else np.NaN 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-08-15T13:00:17.390

您可以为此使用[d6tjoin](https://github.com/d6t/d6tjoin)

```
import d6tjoin.top1
d6tjoin.top1.MergeTop1(df1.reset_index(),df2.reset_index(),
       fuzzy_left_on=['index'],fuzzy_right_on=['index']).merge()['merged'] 
```

`index number index_right letter 0 one 1 one a 1 two 2 too b 2 three 3 three c 3 four 4 fours d 4 five 5 five e`

它具有多种附加功能，例如：

*   检查加入质量，加入前和加入后
*   自定义相似度函数，例如编辑距离 vs 汉明距离
*   指定最大距离
*   多核计算

详情见

*   [MergeTop1 示例](https://github.com/d6t/d6tjoin/blob/master/examples-top1.ipynb)- 最佳匹配连接示例笔记本
*   [PreJoin 示例](https://github.com/d6t/d6tjoin/blob/master/examples-prejoin.ipynb)- 诊断连接问题的示例

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-03-27T15:48:56.537

在匹配in的现有行为和关键字时，我`fuzzywuzz`以非常简单的方式使用。`merge``pandas`

只需指定您接受`threshold`的匹配项（介于`0`和之间`100`）：

```
from fuzzywuzzy import process

def fuzzy_merge(df, df2, on=None, left_on=None, right_on=None, how='inner', threshold=80):

    def fuzzy_apply(x, df, column, threshold=threshold):
        if type(x)!=str:
            return None

        match, score, *_ = process.extract(x, df[column], limit=1)[0]

        if score >= threshold:
            return match

        else:
            return None

    if on is not None:
        left_on = on
        right_on = on

    # create temp column as the best fuzzy match (or None!)
    df2['tmp'] = df2[right_on].apply(
        fuzzy_apply, 
        df=df, 
        column=left_on, 
        threshold=threshold
    )

    merged_df = df.merge(df2, how=how, left_on=left_on, right_on='tmp')

    del merged_df['tmp']

    return merged_df 
```

使用示例数据进行尝试：

```
df1 = pd.DataFrame({'Key':['Apple', 'Banana', 'Orange', 'Strawberry']})

df2 = pd.DataFrame({'Key':['Aple', 'Mango', 'Orag', 'Straw', 'Bannanna', 'Berry']})

fuzzy_merge(df, df2, on='Key', threshold=80) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-11-19T06:23:56.653

对于更复杂的用例来匹配具有多列的行，您可以使用`recordlinkage`package.json 。`recordlinkage`提供所有工具来模糊匹配`pandas`数据帧之间的行，这有助于在合并时对数据进行重复数据删除。我在[这里写了一篇关于包的详细文章](https://towardsdatascience.com/how-to-perform-fuzzy-dataframe-row-matching-with-recordlinkage-b53ca0cb944c?source=your_stories_page-------------------------------------)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-27T18:11:10.290

如果连接轴是数字，这也可以用于匹配具有指定容差的索引：

```
def fuzzy_left_join(df1, df2, tol=None):
    index1 = df1.index.values
    index2 = df2.index.values

    diff = np.abs(index1.reshape((-1, 1)) - index2)
    mask_j = np.argmin(diff, axis=1)  # min. of each column
    mask_i = np.arange(mask_j.shape[0])

    df1_ = df1.iloc[mask_i]
    df2_ = df2.iloc[mask_j]

    if tol is not None:
        mask = np.abs(df2_.index.values - df1_.index.values) <= tol
        df1_ = df1_.loc[mask]
        df2_ = df2_.loc[mask]

    df2_.index = df1_.index

    out = pd.concat([df1_, df2_], axis=1)
    return out 
```**

# jquery - JQGrid：无法在 DataInit 函数中获取行 ID

> ID：13636854
> 
> 赞同：0
> 
> 时间：2012-11-29T23:44:52.143
> 
> 标签：jquery, jqgrid

好的，我回到了这个，我刚刚删除了格式化程序：“select”，它需要一个匹配的状态键才能在网格中显示。

* * *

好的，我放弃了，我的解决方案是：

搜索：假，可编辑：假

直到 JQGrid 的新版本。

* * *

好的，所以看看 Oleg 的代码，似乎解决方案是最初用所有国家的每个可能值填充状态选择。鉴于我要处理很多“状态”（全球），为了找到与实际单元格值匹配的状态，下拉 3-4000 个状态有点笨拙。仍在为此努力。

* * *

我有依赖国家和州的下拉菜单（工具栏搜索、内联编辑和表单编辑）。我在获取 datainit 函数中的行 ID 时遇到问题，因此我可以从 state searchoptions/editoptions 的 datainit 函数中检索国家/地区值。

肯定有办法找回这个吗？我也尝试设置超时，但没有运气：

```
 { name: "State", index: "MYSTATE", width: 50, align: "left", editable: true, formatter: "select", stype: "select", edittype: "select", sortable: true, editrules: { required: true, custom: true, custom_func: validateState },
            searchoptions:
            {
                value: GetStates('NG', true), // just hardcoded here for now
                dataInit: function (elem)
                {
                    var rowId = $(elem.target).closest('tr.jqgrow').attr('id');
                    var country = grid.jqGrid('getCell', rowId, 'Country'); 
```

...

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:00:27.317

您当前的代码无法工作，因为回调`dataInit`将在新元素或元素放置在页面上**之前被调用。**而且是错误的。Even将始终是空的 jQuery 元素。确切地说，如果您使用来自[github](https://github.com/tonytomov/jqGrid)的 jqGrid 的最新代码，代码将是可行的。原因是根据[我的建议](http://www.trirand.com/blog/?page_id=393/feature-request/calling-of-datainit-and-dataevents-after-the-control-are-placed-on-the-page/#p27265)做出[的重新更改](https://github.com/tonytomov/jqGrid/commit/08ba34b0b53834b7328f6667f0cdbe9b777a513b)。如果您使用最新发布的 jqGrid 4.4.1 版本，更改还没有出现。我认为应该对 jqGrid 的代码进行一些额外的更改，以使依赖选择的实现更容易。`<select>``<input>``elem.target``$(elem).closest('tr.jqgrow')`

我发现依赖选择的实现非常复杂和棘手。我建议您从[答案中检查](https://stackoverflow.com/a/4480184/315935)[演示](http://www.ok-soft-gmbh.com/jqGrid/EditWithDependendSelects2_.htm)。

# php - 使用 DI->Get Phalcon PHP 时出现“无效的服务定义”

> ID：13636858
> 
> 赞同：1
> 
> 时间：2012-11-29T23:45:09.703
> 
> 标签：php, phalcon

这个问题与[在 PhalconPHP 中附加多个配置数组有关](https://stackoverflow.com/questions/13500816/appending-multiple-config-arrays-in-phalconphp/13503831#comment18604749_13503831)

我正在尝试使用 get 方法从 DI 中检索对象。

对象是这样设置的

```
// $new_array the array with the merged data. Load it in a 
// \Phalcon\Config object
$config = new \Phalcon\Config($new_array);

//Store the config in your DI container for easier use
$di->set('config', $config); 
```

这是我打电话时收到的错误消息

```
$new_array = $di->get('config'); 
```

> [未捕获的异常 'Phalcon\DI\Exception' 带有消息'无效的服务定义。缺少'className'参数']

我已经坚持了几天了，所以非常感谢我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-23T06:06:14.713

在集合中尝试这个：

```
$di->set('config', function() {
   ...
   return new \Phalcon\Config($new_array);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:12:07.547

看起来你正在做`$di->set('config', $new_array);`而不是`$di->set('config', $config);`:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-27T14:18:56.277

如果您的 $config 变量是一个数组。[您可以在Missing 'className' 参数](https://stackoverflow.com/questions/39202801/missing-classname-parameter)处参考我的答案

这是转贴：我发现 Phalcon DI 容器使用数组进行构造函数注入。因此，如果您将数组设置到 Phalcon DI 容器中，它会理解您要使用构造函数注入来设置对象，并且需要“className”定义。您可以在[https://docs.phalconphp.com/3.4/en/di](https://docs.phalconphp.com/3.4/en/di)的构造函数注入部分检查这一点。

文档中的构造函数注入示例：

```
$di->set(
    'response',
    [
        'className' => 'Phalcon\Http\Response'
    ]
);

$di->set(
    'someComponent',
    [
        'className' => 'SomeApp\SomeComponent',
        'arguments' => [
            [
                'type' => 'service',
                'name' => 'response',
            ],
            [
                'type'  => 'parameter',
                'value' => true,
            ],
        ]
    ]
); 
```

我的解决方案：

1.  假设我想将此配置数组 ['key' => 'value'] 设置为 DI。
2.  我创建了 MyConfigFactory 类，它具有返回 ['key' => 'value'] 的函数构建。
3.  我注入我的配置如下：

    ```
    $di->set('myConfigFactory', new MyConfigFactory());
    $di->set('config', function () use ($di) {
        return $di->get('myConfigFactory')->build();
    }); 
    ```

# .net - 如何在插入之前加快重复检查？

> ID：13636865
> 
> 赞同：0
> 
> 时间：2012-11-29T23:45:44.070
> 
> 标签：.net, linq, tsql

我编写了一个实验室处理软件，它接收传入的数据，将其分解，并将其发送到数据库中的适当字段。DB表真的很大，字段也很多。在插入数据之前，我会在插入数据之前进行重复检查（我们从多个来源获取重复数据）。

系统通过解析传入数据、填充 linq-to-sql 对象来工作。重复检查通过对 linq-to-sql 对象列表执行 .where 操作来选择尚未在表中的对象。

例如 ...

```
input=list (of TableA) 'linq to sql objects
output=input.where(function (x as TableA) not myDb.TableA.any(function(l as table) l.name=x.name, l.dob=x.dob..etc for 10 fields..).tolist 
```

语法有点神秘，但这是我能找到的在 linq 上执行内连接到 sql 对象和数据库记录的唯一方法。在我使用这种方法之前，我逐行执行重复检查，这要慢得多。

据我了解，Linq 正在将此 linq 语句转换为在服务器上运行的 sql 语句。

我的问题是：有没有办法让它运行得更快？有没有理由期望写出一条 sql 语句来执行重复数据删除和运行传统查询会更快？该语句很慢，但它有效，经过单元测试并阻止了欺骗。我正在寻找更快且相当干净（我知道不难）或更清洁的东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:52:19.937

您可以根据名称、dob 和 ... 在表上定义唯一索引。每次插入都可以成功完成或引发唯一约束违规异常。所以在插入之前你不需要任何检查。我认为这是最直接的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T22:01:40.290

如果没有其他进程添加到 SQL 表中，那么您可以在启动程序时将该表读入 HashSet。检查本地 HashSet。如果不在 HashSet 中，则将其添加到 SQL Table 和 HashSet。HashSet 查找比 SQL 查询快大约 100 倍，即使在同一个物理机器上运行也是如此。我将它用于一些大负载。

如果您只想在短时间内获得重复数据，那么您可以在开始时跳过从表中加载历史记录，或者只加载最后一个 X。检查 HashSet 并且只有在 HashSet 中找不到时才使用 SP 插入或跳过. 并定期将 HashSet 截断为 X。

# web-applications - 基于 Google 的 webform 和 excel 数据库

> ID：13636872
> 
> 赞同：0
> 
> 时间：2012-11-29T23:46:34.893
> 
> 标签：web-applications

我想创建一个简单的基于 Web 的表单，使用户能够

*   输入由 , , 组成的失物招`Date`领`Time`处`Item description`。

*   我希望将数据存储在某处的电子表格中。

*   我希望用户有一种基于网络的方式来浏览和搜索数据，无论是在像对象这样的谷歌电子表格还是像对象这样的网页上

*   `Date of pickup`拾取现有记录后，将条目添加到现有记录。

我不知道如何用任何语言（只是数学）编程，但我很聪明，我可以模仿一些简单的东西。这不必非常尖锐或专业。简朴而实用。

我见过人们使用谷歌表格在谷歌电子表格上添加游戏分数和查看结果、排名等。我还没有看到任何使用户能够修改现有条目的功能。

任何有关如何进行的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:49:25.503

我会使用 PHP5.1+ 和 SQLite 作为数据库或“php simplexml”作为数据库。您可以使用一个简单的“PHP 联系表单”作为您项目的模板，然后将其修改为您需要的工作。此外，您可以使用 PHP ODBC 驱动程序连接到 MS Office 中的实际电子表格。

[从这个链接](http://www.easyphp.org/)开始。

另外，我发现了一个开源 AJAX/PHP 电子表格， [是这个](http://www.dhtmlx.com/docs/products/dhtmlxSpreadsheet/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T23:51:26.133

使用 Google Forms 和 Google Docs Spreadsheet 听起来很合理。这篇谷歌博客文章应该可以帮助您入门：http: [//googlesystem.blogspot.com/2008/02/add-data-to-google-spreadsheets-using.html](http://googlesystem.blogspot.com/2008/02/add-data-to-google-spreadsheets-using.html)

# c# - 无法删除文件，因为它正被另一个进程使用

> ID：13636875
> 
> 赞同：1
> 
> 时间：2012-11-29T23:46:56.930
> 
> 标签：c#, image, process, screenshot, delete-file

我正在尝试在制作屏幕截图后删除文件。代码如下：

```
private static void makeSc()
    {
        DateTime d = DateTime.Now;
        string currentDT = String.Format("{0:yyyy-MM-dd-hhmmsstt}", d);
        string scrFilename = currentDT+".jpg";
        int screenWidth = Screen.GetBounds(new Point(0, 0)).Width;
        int screenHeight = Screen.GetBounds(new Point(0, 0)).Height;
        Bitmap bmpScreenShot = new Bitmap(screenWidth, screenHeight);
        Graphics gfx = Graphics.FromImage((Image)bmpScreenShot);
        gfx.CopyFromScreen(0, 0, 0, 0, new Size(screenWidth, screenHeight));
        bmpScreenShot.Save(scrFilename, ImageFormat.Jpeg);

        //delete file
        bmpScreenShot.Dispose();
        Thread.Sleep(20);
        File.Delete(scrFilename);

    } 
```

似乎`Dispose()`延迟也没有这样做。有什么想法吗？

# android - 当 Main Activity 尚未运行时，无法从服务启动片段 Activity 意图

> ID：13636877
> 
> 赞同：0
> 
> 时间：2012-11-29T23:47:02.763
> 
> 标签：android, android-intent, service, android-fragments, broadcastreceiver

我在后台有一个服务，它在手机启动时启动，并显示一个对话框（轮询服务器），如果用户选择，它可以是主活动创建的 fragmentActivity 类。

问题是，在启动时，服务正在运行，但主要活动没有，所以当我启动片段的意图时，由于未加载主要活动，它会崩溃。

为了让我加载片段，加载主要活动的正确方法是什么？

我可以在启动时加载它并将其带到后台，但在启动和关闭时加载应用程序看起来很俗气。

或者我可以调用一个意图在片段之前调用主要活动，但这看起来也很俗气，因为我需要执行 Thread.sleep() 以确保主要活动在加载片段之前完成加载。

我认为我不能将广播接收器扩展为不执行 Thread.sleep()，因为我所有的活动都已经扩展到其他东西（例如服务、活动）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:49:55.887

您应该启动 Activity 而不是 Fragment 的意图。

# perl - 在子目录中执行 Perl 程序？

> ID：13636882
> 
> 赞同：0
> 
> 时间：2012-11-29T23:48:05.713
> 
> 标签：perl, bash

这是我的项目：

```
assembler/
    asm.pl               # Main entry point
    instructions.pm
    support.pm
build.sh

---- assembler/asm.pl ----
...
use instructions;
...

---- assembler/instructions.pm ----
...
use support;
... 
```

我希望`build.sh`包含如下一行：

```
perl assembler/asm.pl $1 
```

尝试使用相关模块时`asm.pl`，找不到它们。这条线有效，但感觉肮脏和可耻：

```
cd assembler; perl asm.pl ../$1; cd .. 
```

正确的执行方式是`asm.pl`什么？我希望直接从任何其他任意位置执行位于文件系统上任何位置的程序，例如

```
$ cd /some/dumb/path
$ /path/to/the/project/build.sh /another/goofy/path.asm 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T23:53:13.483

我认为问题在于 perl 试图找到与您正在执行的路径相关的库。这就是为什么运行 cd 首先修复它。您的另一个选择是告诉 perl 它可以在哪里找到文件。您可以使用 PERL5LIB 环境变量或使用 -I 开关来执行此操作。这应该这样做：

```
perl -I./assmbler/ assembler/asm.pl $1 
```

# android - android strings.xml japnese 仅在标签中显示一系列块

> ID：13636883
> 
> 赞同：1
> 
> 时间：2012-11-29T23:48:07.117
> 
> 标签：android, eclipse

在我的 Eclipse 项目中，strings.xml 不再显示 xml 文件中的日文字符串，它只显示一系列垂直矩形，

我的其他strings.xml，如德语、西班牙语、法语等都显示良好..

知道可能出了什么问题吗？似乎文本编辑器没有正确解释编码？

当我将字符串从那里复制到这里时，例如在stackoverflow编辑器中，它显示字符串很好..

```
 <string name="dialog_message">"発信者名"</string> 
```

但在 eclipse 的 xml 编辑器中不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:52:41.963

这意味着 Eclipse 编辑器使用的字体不能显示日文字符。您的 Eclipse 编辑器设置为使用哪种字体？确保它使用的是支持 Unicode 的字体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:44:51.073

在 Eclipse 中，菜单`Edit`和`Set Encoding`.

在那里您应该找到适合您要求的编码格式。

问候

# graph - 2 来源最优路径

> ID：13636886
> 
> 赞同：0
> 
> 时间：2012-11-29T23:48:40.130
> 
> 标签：graph, dynamic-programming, shortest-path

假设我们有一个 RXC 表。每个单元格包含一个权重。

有两个来源可供您选择，您可以从 ROW 0 开始，但可以从任何列开始。

您的目标是沿着表格向下移动，直到到达最后一行（任何列），并且不会有重叠的路径。这必须产生这两条路径的最低重量组合。

任何想法如何解决？如果您需要更多详细信息，请告诉我。

如果你能提供一些 O(constant XRXC) 运行时间，那就太好了。

编辑：每一步，你可以向左、向右或向下。

例子

1 9 1 9
1 9 1 9
1 2 3 9
6 3 9 9

最佳值是 1-1-1-6 和 1-1-3-2-3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:42:43.883

As Said by Acess Denied , please specify the rules of travelling down the rows , For eg :- if the rule is

`You can either go directly down or right-diagonally down or left diagonally down`

We can do this similar to a Single source problem from the first source , and find the optimal sum , then replace the weight of cells belonging to this path to 0 , and then again run a Single source problem solution from the second source

I think this greedy approach will work as the sum of both paths is asked in final .

# android - Samsung Galaxy Y (Android 2.3) 使用串口的 SMS 命令中的 Ctrl+Z 错误

> ID：13636888
> 
> 赞同：1
> 
> 时间：2012-11-29T23:48:56.627
> 
> 标签：android, sms, serial-port, gsm

我正在通过串行 COM 使用三星 Galaxy Y 手机，例如 GSM-SMS 调制解调器，一切正常，但是当我完成命令后：

AT+CMGS="12017572673"

> 消息文本。

当我尝试发送 Ctrl + Z 时，我收到了这个错误：

> +CME 错误：513

相同的软件适用于其他手机，但此问题仅适用于 Android。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:41:00.003

我对 Sumsung Galaxy 2 GT IP1000P 也有类似的问题。我可以使用 AT 命令与手机通信，例如 ATI AT+CMGF AT+CPIN AT+CMEE。它甚至会接受 AT+CMGS 命令，直到发送 ctrl+Z 出现 CMS 303 错误（不允许操作）。我联系了三星支持，并被告知不能以这种方式使用手机。这是安卓缺陷/错误/政策，还是三星故意的不足，我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-12T15:24:40.377

在我的情况下，当手机忙于做某事并且没有准备好接收来自 minicom 的命令时，我收到了这个错误，所以我该怎么做我在保持 USB 电缆连接的情况下重新启动手机，这对我有用

# liferay - 无法从 Portlet Velocity 模板将 PortletSession 传递给 CustomUtil

> ID：13636896
> 
> 赞同：1
> 
> 时间：2012-11-29T23:50:08.633
> 
> 标签：liferay, liferay-6, liferay-velocity

我已经检查了[在 liferay 主题（速度模板）中使用自定义服务或 liferay 服务？](https://stackoverflow.com/questions/12053910/using-custom-services-or-liferay-services-in-liferay-themes-velocity-templates/13636880#13636880)

和自定义方法工作正常。但我有一些具体要求。

如果您知道如何将 PortletSession 对象或 RenderRequest 传递给自定义方法，请告诉我。

例如

我试图创建以下界面：

```
package com.myTool;

import javax.portlet.PortletSession;
import javax.portlet.RenderRequest;

public interface MyTest{
  public String getUserCountry(PortletSession portletSession);
  public String getUserCountry(RenderRequest request);
} 
```

在实现接口的类中，我有以下方法：

```
public String getUserCountry(PortletSession portletSession) {
        try {
            myUtil.setPortletSession(portletSession);
            return "Success";
        }
        catch (Exception e) {
            e.printStackTrace();
            return "exception-portletSession";
        }

    };

    public String getUserCountry(RenderRequest request) {
        try {
            myUtil.setPortletSession(request.getPortletSession());
            return "Success request";
        }
        catch (Exception e) {
            e.printStackTrace();
            return "exception-renderRequest";
        }

    }; 
```

我尝试了以下方法但没有运气：

1)

```
#set($currentProfileUtil = $utilLocator.findUtil("myportlets-1.0-SNAPSHOT", "com.myTool.MyTest"))
#set($result = $currentProfileUtil.getUserCountry($request.getAttribute("javax.portlet.response")))
$result 
```

2)

```
#set($currentProfileUtil = $utilLocator.findUtil("myportlets-1.0-SNAPSHOT", "com.myTool.MyTest"))
#set($result = $currentProfileUtil.getUserCountry($request.get("portlet-session")))
$result 
```

3)

```
#set($currentProfileUtil = $utilLocator.findUtil("myportlets-1.0-SNAPSHOT", "com.myTool.MyTest"))
#set($result = $currentProfileUtil.getUserCountry($request.getSession()))
$result 
```

4)

```
#set($currentProfileUtil = $utilLocator.findUtil("myportlets-1.0-SNAPSHOT", "com.myTool.MyTest"))
#set($result = $currentProfileUtil.getUserCountry($request.getSession()))
$result 
```

PS请不要说“你为什么需要这个？” - 只需提供有关如何发送 PortletSession 或可以从中检索 PortletSession 的任何对象的任何想法。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:49:30.440

您还没有清楚地说明，您在哪里使用速度模板 - 在主题、网络内容模板等中？

我猜这将是主题，因为您在开始时提供了一个链接，描述了如何在主题中使用它们，所以简短的回答是您无法从速度模板中获取`PortletSession`和`RenderRequest`，但不要担心，因为您可以获得`HttpSession`和`HttpServletRequest`在模板文件中使用它，就像在 liferay 的[`init.vm`](https://github.com/liferay/liferay-portal/blob/master/portal-web/docroot/html/themes/_unstyled/templates/init.vm).

所以变量`$request`是 for`HttpRequest`和 is not for `RenderRequest`，因此`$request.getSession()`给出`HttpSession`和 not `PortletSession`。

我认为您无法以速度获得特定于 portlet 的请求和会话的原因可能是因为模板与 portlet 无关，因此无法知道您在询问哪个 portlet `request`。

无论如何，但是 portlet 请求中可能存在的所有属性或参数都存在于 中`HttpServletRequest`，所以我想您需要将方法签名更改为：

```
public interface MyTest{
    public String getUserCountry(HttpSession portletSession);
    public String getUserCountry(HttpServletRequest request);
} 
```

然后使用：

```
#set($result = $currentProfileUtil.getUserCountry($request.getSession()))
#set($result = $currentProfileUtil.getUserCountry($request)) 
```

我已经尝试过了，但您可以尝试`RenderRequest`从以下位置获取`HttpServletRequest`：

```
RenderRequest renderRequest = (RenderRequest) request.getAttribute(JavaConstants.JAVAX_PORTLET_REQUEST); 
```

并通过以下方式回应：

```
RenderResponse renderResponse = (RenderResponse) request.getAttribute(JavaConstants.JAVAX_PORTLET_RESPONSE); 
```

[**注意：`$request`变量也可用于网络内容模板（OP 的评论）**]

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:35:44.687

Liferay 论坛上提供了答案（这不是 PortletSession 而是 HttpSession，但这对我来说没问题）：

[http://www.liferay.com/web/raymond.auge/blog/-/blogs/6051129（Ray](http://www.liferay.com/web/raymond.auge/blog/-/blogs/6051129) Augé 于 2012 年 11 月 30 日上午 9:54 发表评论）

就我而言（来自原始问题），解决方案如下：

```
#set($serviceContext = $portal.getClass().forName("com.liferay.portal.service.ServiceContextThreadLocal").getServiceContext())
#set($currentProfileUtil = $utilLocator.findUtil("myportlets-1.0-SNAPSHOT", "com.myTool.MyTest"))
#set($result = $currentProfileUtil.getUserCountry($serviceContext.getSession()))
$result 
```

希望这也能帮助其他人

# php - 使用 get 方法将字符串传递给 php 代码

> ID：13636897
> 
> 赞同：0
> 
> 时间：2012-11-29T23:50:38.953
> 
> 标签：php, javascript, get, fwrite, aloha-editor

我想在我的服务器中将一个 javascript 字符串写入一个名为 preview.html 的文件中。我正在尝试使用 Get 方法将 javascript 字符串传递给 php，但它似乎不起作用。我正在使用 aloha 编辑器，javascript 字符串 Result 包含用户输入的内容。

这是我工作的一个简单版本，它不起作用，知道为什么吗？：

```
<script type="text/javascript">
    // make the div editable by user
    Aloha.ready(function() {
            $('#title').aloha();
    });
    // When submit is clicked
    function onSubmit() {
            var e = Aloha.getEditableById('title');
            var Result = e.getContents();
            location.href="page.php?Result=" + Result;
             }
</script>
<div id="title">Title. Click to Edit.</div>
<a href="javascript:onSubmit();">Submit</a>
 <?php
    $fp = fopen('preview.html', 'w');
    $r = $_GET['Result'];
    fwrite($fp, $r); 
    fclose($fp);?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:51:01.427

您可以使用 ajax 请求来存储可编辑的内容。这是一个使用 Aloha 编辑器的简单示例：[https](https://gist.github.com/1448270) ://gist.github.com/1448270 这会将多个可编辑项的数据保存到 SQLite DB（从那里它将被插入到 html 中）

还有另一个将数据保存到文件的演示应用程序： [https ://github.com/alohaeditor/Aloha-Editor/blob/dev/src/demo/demo-app/app/save-to-file.php](https://github.com/alohaeditor/Aloha-Editor/blob/dev/src/demo/demo-app/app/save-to-file.php)

# ios - Irrlicht Engine npot 图像渲染

> ID：13636898
> 
> 赞同：0
> 
> 时间：2012-11-29T23:50:49.843
> 
> 标签：ios, opengl-es-2.0, irrlicht

我在 iPhone 中使用 Irrlicht 引擎（带有 svn 最新版本 4389 的分支）并选择 opengl-es2 驱动程序。

但是，它似乎不支持非二次幂图像纹理渲染。我已经成功地在 iPhone 中运行了一个具有非二次幂图像渲染的 opengles2 示例。

所以可能是 COGLES2Driver 或 COGLES2Texture 中存在错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T06:41:26.327

您是否更改了换行模式`GL_REPEAT`？OpenGLES2.0 不支持 NPO2 用于重复纹理。

# php - 简单页面的 URL 信息 - 使用 PHP 解析

> ID：13636906
> 
> 赞同：0
> 
> 时间：2012-11-29T23:51:24.087
> 
> 标签：php, url, get, http-status-code-404

我有一个域名，FTP 上只有一个文件 - `index.php`. 在这个文件中只是关于我的项目的信息 - 简单的 HTML。

现在我需要为 URL 设置一些信息，比如

```
http://mywebsite.com/some-words 
```

如果在 URL 地址中是这个字符串，我需要获取字符串 ( `some-words`) 并查看数组，如果这个字符串存在并且基于该字符串打印一些文本。

但我的问题是，如果我设置了地址

```
http://mywebsite.com/some-words 
```

到浏览器，我会得到`404`错误。

如何避免此错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:57:13.050

问题是你只有一个文件`/index.php`，你没有任何东西`/some-words`。如果不对网络服务器进行任何修改，它就无法知道您希望针对的请求`/some-words`由`/index.php`. 因此，您会收到 404 错误，因为服务器在`/some-words`

# java - Selenium JUnit 4 测试 - findElement() 的用法

> ID：13636909
> 
> 赞同：2
> 
> 时间：2012-11-29T23:51:27.770
> 
> 标签：java, eclipse, selenium, junit, webdriver

我有一个无法解决的问题。我刚开始使用 Selenium，并用它做了一个简单的 JUnit 测试。（打开 CMS 管理面板，登录并注销。）如果我使用正确的用户名和密码，它就像一个魅力，但如果我不这样做，它就无法克服找到“注销”按钮，但是我已将其放入 try-catch 块中。:/ 实际上它只是通过 if 语句停止（参见下面的代码）而不抛出异常，并且它不会关闭浏览器并完成测试，因为它永远不会到达“driver.quit()”。

如果您对我的问题有任何想法，请帮助我！

```
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;

public class JavaExp {
    private WebDriver driver;
    private String baseUrl;
    private StringBuffer verificationErrors = new StringBuffer();
    @Before
    public void setUp() throws Exception {
        driver = new FirefoxDriver();
        baseUrl = "http://urlhere.com/";
        driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
    }

    @Test
    public void testJValami() throws Exception {
        driver.get(baseUrl + "/administrator/");
        driver.findElement(By.id("mod-login-username")).clear();
        driver.findElement(By.id("mod-login-username")).sendKeys("admin");
        driver.findElement(By.id("mod-login-password")).clear();
        driver.findElement(By.id("mod-login-password")).sendKeys("almakfa");
        driver.findElement(By.linkText("Belépés")).click(); //Click on the login Button
        if(isElementPresent(By.linkText("Kilépés"))) { //Looking for the Log out link
            System.out.println("Got it.");
        } else {
            System.out.println("Not found.");
        }
    }

    @After
    public void tearDown() throws Exception {
        driver.quit();
        String verificationErrorString = verificationErrors.toString();
        if (!"".equals(verificationErrorString)) {
            fail(verificationErrorString);
        }
    }

    private boolean isElementPresent(By by) {
        try {
            driver.findElement(by);
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:27:18.087

好吧..您正在使用`driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);`这意味着**隐式等待所有元素**。因此，您的程序会等待**30**秒以使该按钮出现，然后再继续。尝试等待 31 秒，然后您将看到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T07:53:38.160

好吧，问题是在您按下“登录”按钮后，页面应该呈现。所以在你的情况下，我会尝试不同的等待机制：

```
 public boolean isElementPresent(By selector)
   {
       return driver.findElements(selector).size()>0;
   } 
```

1.  `driver.findElement(By.linkText("Belépés")).click(); //Click on the login Button driver.manage().timeouts().implicitlyWait(3, TimeUnit.SECONDS); if(isElementPresent(By.linkText("Kilépés"))) { //Looking for the Log out link System.out.println("Got it."); } else { System.out.println("Not found."); }`
2.  `driver.findElement(By.linkText("Belépés")).click(); //Click on the login Button Thread.sleep(1000); if(isElementPresent(By.linkText("Kilépés"))) { //Looking for the Log out link System.out.println("Got it."); } else { System.out.println("Not found."); }`

3.  `public WebElement fluentWait(final By locator){ Wait<WebDriver> wait = new FluentWait<WebDriver>(driver) .withTimeout(30, TimeUnit.SECONDS) .pollingEvery(5, TimeUnit.SECONDS) .ignoring(org.openqa.selenium.NoSuchElementException.class); WebElement foo = wait.until( new Function<WebDriver, WebElement>() { public WebElement apply(WebDriver driver) { return driver.findElement(locator); } } ); return foo; } ; driver.findElement(By.linkText("Belépés")).click(); //Click on the login Button fluentWait(By.linkText("Kilépés")); if(isElementPresent(By.linkText("Kilépés"))) { //Looking for the Log out link System.out.println("Got it."); } else { System.out.println("Not found."); }`

# jquery - 在 AJAX 注入的内容中使用 jQuery

> ID：13636911
> 
> 赞同：0
> 
> 时间：2012-11-29T23:51:35.480
> 
> 标签：jquery, dialog

**tl;dr：**在将内容加载到 DOM 之后，jQuery 最早可以访问添加的元素是什么时候？

* * *

我正在重构我现有的 JavaScript。目前，我有将内容加载到对话框中的模块，并且在回调中，加载对话框后，负责将事件附加到对话框上的元素。

我不喜欢加载对话框的模块知道加载的对话框元素的详细信息。相反，我现在采用的方法是加载对话框的模块仅执行此操作。

现在附加事件的责任落在对话框本身上。我这样做的方法是在加载到对话框中的内容的标记中嵌入一个 JavaScript 文件，然后调用一个 init 方法来绑定事件。

我现在面临的问题是，由于某种原因，在 init 方法中，jQuery 没有找到脚本正在寻找的元素。几乎就像它们还没有被加载到 DOM 中一样。

如果在对话框加载后，我从控制台手动查找元素，它工作正常。

我的问题是，在进行 AJAX 调用时，jQuery 什么时候可以访问新添加的元素？

您如何看待我在对话框标记中嵌入 JavaScript 的方法？我总是可以有一个回调，加载我的对话框的模块可以用来初始化事件，但我试图在对话框中封装尽可能多的逻辑，以便可以从多个地方加载对话框而不必重复我的启动代码。

是否有更好的方法来附加事件，在将内容添加到 DOM 后执行逻辑？

**加载对话框：**

```
loadMemberLoginHistoryDialog: function(memberId) {
    var dialogOptions = {
        onComplete: function(responseHtml) {}
    };
    var dialogUrl = '/members/' + memberId + '/loginHistoryDialog';
    $.favsDialog(dialogUrl, dialogOptions);
} 
```

**在对话框中加载的内容的标记中编写脚本：**

```
 <script src="/js/zMemberLoginHistoryDialog.js" type="text/javascript"></script>
        <script>
            favsManageMemberLoginHistoryDialog.init('@Constants.LanguageCode');
        </script> 
```

**favsManageMemberLoginHistoryDialog 模块：**

```
var favsManageMemberLoginHistoryDialog = function() {
   function initializeControls() {
        $(".frmManageMembersMemberDelete")
            .submit(function() {
            if (confirm("Are you sure?")) {
                return true;
            }
            return false;
        });
    }

    return {
        init: function(language) {
            languageCode = language;
            initializeControls();
        }
    }; //return
} 
```

# ios - 如何 NSLog() 外围设备？

> ID：13636918
> 
> 赞同：0
> 
> 时间：2012-11-29T23:51:59.107
> 
> 标签：ios, ios6, bluetooth-lowenergy, cbperipheral, cbcentralmanager

我无法确定通常会导致我能够正确使用 NSLog() 的外围设备是什么。

```
- (void)centralManager:(CBCentralManager *)central didRetrievePeripherals:(NSArray *)peripherals {
  NSLog(@"discovered peripherals: %@", howToListPeriphalsForDebugging);
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T22:24:47.187

尝试改变：

```
NSLog(@"discovered peripherals: %@", howToListPeriphalsForDebugging); 
```

至：

```
NSLog(@"discovered peripherals: %@", peripherals); 
```

# python - Python中的面向对象井字游戏

> ID：13636924
> 
> 赞同：1
> 
> 时间：2012-11-29T23:52:32.917
> 
> 标签：python, oop, typeerror, tic-tac-toe

我正在为 Python 类编写程序。它必须使用 OOP 来创建井字游戏。我已经完成了一些要求。最后一个要求是电脑玩家必须“聪明”——做一些事情，比如阻挡，尽可能连续播放，等等。我的教授并没有真正给我们任何关于如何做到这一点的指导，所以我有点困惑。

我现在在程序中的位置是试图检查玩家是否距离通过水平行获胜只有一步之遥。这是我的代码（我知道它非常混乱和低效）。

```
from random import randint

class TTT:
    board = [[' ' for row in range(3)] for col in range(3)]
    currentgame = []

    def print(self):
        print("\n-----\n".join(["|".join(row) for row in self.board]))

    def mark(self,pos,mark):
        x,y = pos
        self.board[x][y] = mark

    def win(self,mark):
        if mark == self.board[0][0] == self.board[1][1] == self.board[2][2]:
            return True
        if mark == self.board[2][0] == self.board[1][1] == self.board[0][2]:
            return True
        elif mark == self.board[0][0] == self.board[1][0] == self.board[2][0]:
            return True
        elif mark == self.board[1][0] == self.board[1][1] == self.board[1][2]:
            return True
        elif mark == self.board[0][1] == self.board[1][1] == self.board[2][1]:
            return True
        elif mark == self.board[0][2] == self.board[1][2] == self.board[2][2]:
            return True
        elif mark == self.board[0][0] == self.board[0][1] == self.board[0][2]:
            return True
        elif mark == self.board[2][0] == self.board[2][1] == self.board[2][2]:
            return True
        else:
            return False

    def choose(self,mark):
        if self.board == [[' ', ' ', ' '], [' ', ' ', ' '], [' ', ' ', ' ']]:
            self.mark((randint(0,2),randint(0,2)),mark)

    def choose(self,mark):
        spotx = randint(0,2)
        spoty = randint(0,2)
        if self.board[spotx][spoty] == ' ':
            self.mark((spotx,spoty),mark)
        else:
            self.choose(mark)

    def choose(self,mark):
        spotx = randint(0,2)
        spoty = randint(0,2)
        if self.rowabouttowin(mark) == (0,0) or (0,1) or (0,2) or (1,0) or (1,1) or (1,2) or (2,0) or (2,1) or (2,2):
            self.mark((self.rowabouttowin(mark)),mark)
        if self.legalspace(spotx,spoty):
            self.mark((spotx,spoty),mark)
        else:
            self.choose(mark)

    def legalspace(self,spotx,spoty):
        if self.board[spotx][spoty] == ' ':
            return True
        else:
            return False

    def rowabouttowin(self,mark):
        for row in range(3):
            if self.board[row] == [mark,mark,'']:
                return (row,2)
            if self.board[row] == [mark,'',mark]:
                return (row,1)
            if self.board[row] == ['',mark,mark]:
                return (row,0)
            else:
                return 4 
```

我的问题是我收到一条错误消息：

```
Traceback (most recent call last):
  File "<pyshell#194>", line 1, in <module>
    x.choose('x')
  File "/Users/richiehoffman/Documents/Python Programs/Tic Tac Toe.py", line 64, in choose
    self.mark((self.rowabouttowin(mark)),mark)
  File "/Users/richiehoffman/Documents/Python Programs/Tic Tac Toe.py", line 23, in mark
    x,y = pos
TypeError: 'int' object is not iterable 
```

坦率地说，我在这里超出了我的知识范围，因为这项作业远远超出了我们在面向对象 Python 上花费的几天的课堂时间。我确定我在选择或输出整数而不是一些可迭代数据的 rowabouttowin 方法中的某个点犯了错误。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T23:56:21.787

```
def rowabouttowin(self,mark):
    [...]
    return 4 
```

这将返回一个`int`而不是`(int,int)`预期的`self.mark()`

`mark`顺便说一句，我相信如果您对变量、方法和参数不使用相同的名称（例如 ），您的代码将更具可读性。

# c# - 不能在 ActiveX 控件上绘制图像

> ID：13636926
> 
> 赞同：0
> 
> 时间：2012-11-29T23:52:46.403
> 
> 标签：c#, activex, drawimage

我在我的项目中使用了第 3 方 ActiveX 视频控件。该控件可以指向网络摄像机并显示视频流。效果很好……那不是我的问题。

我的问题是我试图在该控件之上绘制一个图像，而我得到的只是我在 ActiveX 控件*后面的图像。*ActiveX 控件当前只是放在 Windows 窗体的中间。我已经像这样覆盖了 Form 的 OnPaint() 方法：

```
protected override void OnPaint(PaintEventArgs e)
    {
       base.OnPaint(e);

       e.Graphics.DrawImage(Properties.Resources.ProgressBar, new Point(300, 300));
    } 
```

我的图像确实绘制在表单上，​​但它位于 ActiveX 后面。我使用 (300,300) 的起点故意使我的图形偏离中心，这样如果它被绘制为 ActiveX，我可以看到它的一部分向外窥视。

如何让我的图像出现在 ActiveX 控件的前面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:02:13.280

您的问题相当于“为什么当我在我的窗口中绘制时，它的子窗口被绘制在我的绘图上方”（假设它 ActiveX 不是无窗口控件，这不太可能）。

你应该思考你真正想要达到的目标并相应地绘制。如果您想在其他人的窗口上绘图 - 子类化并自己绘制。如果您只需要覆盖图像的一部分 - 创建另一个窗口并放置在另一个孩子上方。

# css - 字体字体在 Firefox 中看起来更粗

> ID：13636931
> 
> 赞同：5
> 
> 时间：2012-11-29T23:53:06.613
> 
> 标签：css, fonts, cross-browser, font-face

我正在使用`font-face`，我的字体在 Firefox for mac 中看起来很糟糕。我试过`-webkit-font-smoothing: antialiased`和`font-smoothing: antialiased`。

下面是两张截图：

*   [http://cl.ly/image/160U3U3u180i](http://cl.ly/image/160U3U3u180i)
*   [http://cl.ly/image/3y3G2s1v0p2Z](http://cl.ly/image/3y3G2s1v0p2Z)

由于视网膜屏幕，图像变得非常大，所以它们看起来有点放大。

这是网站的 URL，如果您想查看任何代码。

*   [http://marcusfriberg.com/standart/](http://marcusfriberg.com/standart/)

任何人都有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T00:06:46.923

好消息：这可能不是你的错。坏消息是，我不确定你能做多少。

我在我的电脑上查看了该站点，它看起来不错。我在我的 macbook pro（带视网膜）上查看了 Safari 上的网站，它看起来很棒（除了徽标，我认为它是光栅图形）。

Firefox（版本 17）看起来很糟糕（就像您的屏幕截图一样）。我禁用了元素上的样式，甚至默认字体看起来也很糟糕。然后我注意到 FF 本身（例如选项卡上的文本）看起来很糟糕。

然后我打开了我自己的一个网站，尽管它使用的是 Helvetica，但它看起来很糟糕。这个网站看起来很糟糕（见我下面问题的截图）。甚至我的 SVG 图像（在 iPad 上看起来很漂亮）看起来也很糟糕。

## 比较（左边是 Safari，右边是 FF 17）

![在此处输入图像描述](../Images/bc3566a43f5f5fc7619dc5cf998e2751.png)

我的猜测是问题比字体更深。我在视网膜显示器上的其他应用程序中注意到了这一点。我相信 Chrome 也有同样的问题。

## 使固定

最近的测试版（第 18 版）[计划解决这些问题](http://www.mozilla.org/en-US/firefox/18.0beta/releasenotes/)，并且似乎完全解决了这个问题，尽管字体在浏览器之间看起来仍然略有不同（您现在可以使用 CSS 对其进行调整）

Firefox 用户通常擅长更新，因此这应该不会成为更长时间的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T18:10:09.857

这个问题很老，但如果有人仍然在这里寻找解决方案，那就是你的答案： [@font-face：FF 中的粗体比 Chrome 中的粗体](https://stackoverflow.com/questions/8942625/font-face-bold-in-ff-is-bolder-than-in-chrome)

# c# - 使用 KBcsv 编写器编写 csv 文件

> ID：13636933
> 
> 赞同：0
> 
> 时间：2012-11-29T23:53:29.977
> 
> 标签：c#

我正在尝试使用 Kent.Boogaart.KBCsv 写入 csv 文件，但不知道可能是什么问题？

一段代码：

```
private static void SaveCSV(List<AData> items,string fName)
{
   using (CsvWriter wr = new CsvWriter(fName))
    {
        wr.ValueSeparator = ';';
        foreach (AData item in items)
        {
            wr.WriteDataRecord(item);
        }
    }
} 
```

例外：该进程无法访问文件“C:\Users\myname\Documents\something.txt”，因为它正被另一个进程使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T23:58:26.850

它正在被另一个进程使用。这意味着：您在其他地方打开了文件，因此无法修改它（确保关闭记事本和其他文本编辑器） 可能是对管理员权限的混淆投诉。C:\User 应受 Windows 7 保护，如果您的进程未提升，则不允许访问它。尝试写入： C:\something.txt 代替。

# css - 通过 CSS3 根据容器大小设置字体大小

> ID：13636936
> 
> 赞同：1
> 
> 时间：2012-11-29T23:53:49.160
> 
> 标签：css

有没有办法根据容器大小使用**CSS**动态设置字体大小？目前我正在使用以下 JS 代码来实现此行为：

```
var cubeText = function() {
    var fontSize = parseInt($(".cube.avatar").width());
    fontSizeBig = fontSize/3.5
    fontSizeSmall = fontSize/6;
    console.log(fontSize);
    $(".cube span.big").css('font-size', fontSizeBig);
    $(".cube span.small").css('font-size', fontSizeSmall);
} 
```

这有一个很大的缺点：测试会在页面加载后弹出并调整大小，这会产生非常令人不快的“扑通”效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:10:50.983

查看 CSS3 单元[`vw`](http://www.w3.org/TR/css3-values/#viewport-relative-lengths)。

如果您需要支持其他浏览器，JavaScript 是唯一的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:37:33.550

这在 CSS 中是不可能的，和/或很多浏览器都不支持。你可以看看[viewport-relative-lengths](http://www.w3.org/TR/css3-values/#viewport-relative-lengths)但它不会在任何地方工作......

对于扑通的效果，您可以使用诸如与背景颜色相同的内容或透明度之类的东西。[**演示**](http://jsfiddle.net/DVyfH/)

```
​$(document).ready(function(){
   changeFontSize();
    });

function changeFontSize(){
    var fontSize = parseInt($(".cube").width());
    var fontSizeBig = fontSize/10;
    var fontSizeSmall = fontSize/20;
    console.log(fontSize);
    $(".big").css('font-size', fontSizeBig);
    $(".small").css('font-size', fontSizeSmall);
    $(".cube").css('color','#000');
} 
```

你也可以使用像这样的一个不错的 js 插件：http: [//fittextjs.com/](http://fittextjs.com/)

# java - 为什么 JNIOnLoad 没有运行？

> ID：13636937
> 
> 赞同：3
> 
> 时间：2012-11-29T23:53:52.300
> 
> 标签：java, c++, android-ndk, java-native-interface

我有一个带有 Java 基础 Activity、Java JNI 接口类和本机代码的 Android 项目。我有合适的

```
System.loadlibrary(_libraryname_); 
```

在我的 Java 接口类和 logcat 输出中：

```
11-29 15:11:20.737: D/dalvikvm(8940): No JNI_OnLoad found in /data/data/com.example.testjni/lib/libTestJNI.so 0x406ef030, skipping init 
```

在我的 cpp 文件头中：

```
extern "C" {
   JNIEXPORT jint JNICALL JNIOnLoad(JavaVM *, void *);
} 
```

在 cpp 文件中：

```
JNIEXPORT jint JNICALL JNIOnLoad(JavaVM *vm, void *reserved)
{
   LOGI("JNIOnLoad");
   jvm = vm;
   return JNI_VERSION_1_6; /* the required JNI version */
} 
```

但仍然永远不会调用 OnLoad 函数。我已经尝试卸载该应用程序并重新安装它，但它永远不会运行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-30T06:02:22.637

函数签名是[JNI_OnLoad](http://docs.oracle.com/javase/1.5.0/docs/guide/jni/spec/invocation.html#JNI_OnLoad)。**JNI**和**OnLoad**之间有一个**下划线 / _**。

# apache - Mod-Rewrite 到变量结束文件

> ID：13636940
> 
> 赞同：0
> 
> 时间：2012-11-29T23:54:19.310
> 
> 标签：apache, mod-rewrite

我正在尝试让 apache使用以某个目录（例如）`/uploaded/2`开头的第一个文件来处理任何请求。`2``/foo/bar/`

基本上，如果我有`/foo/bar`包含内容的目录：

*   `1-filenameclutter.wav`
*   `2-clutterinthefilename.mp3`
*   `3-someweirdtext.jpg`

Web 浏览器发出请求`/uploaded/1`，apache 会返回`1-filenameclutter.wav`；请求`/uploaded/2`将返回`2-clutterinthefilename.mp3`；等（所有具有正确 mime 类型的文件）。

据我所知，ModRewrite 只能从具有无关数据的源转到文件系统上的简化文件，而不是相反。

你们知道用 ModRewrite 或以另一种方式（没有 PHP）使用 apache 的任何方法吗？

编辑：

需要指出两件事，1）我不关心以相同 id 开头的重复文件。这些文件对应于数据库中的一个对象，该对象具有一个主键 id。2）我这样做的原因是因为我不确切知道文件的扩展名是什么，但我知道 id，所以当我形成这些时，我只是将原始文件名添加到`{{id}}-`(Don'不用担心，我将所有“..”替换为“~”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:02:32.603

Mod-rewrite 能够检查单个特定文件是否存在，但您无法在目录中搜索文件模式。请注意，您的建议将具有可怕的缩放属性，因为系统必须搜索所有文件才能找到您要查找的文件。既然您已经在数据库中拥有该文件，为什么不直接用 id 命名文件并将真实的文件名保留在数据库中呢？在这种情况下，/uploaded/2 将返回该位置的文件。你甚至不需要 mod_rewrite。

# regex - AS3 屏幕抓取

> ID：13636948
> 
> 赞同：0
> 
> 时间：2012-11-29T23:54:54.327
> 
> 标签：regex, actionscript-3

我正在尝试在网页的 H1 标记中查找所有文本。我正在使用代码：

```
myTextLoader.addEventListener(Event.COMPLETE, onLoaded);
function onLoaded(e:Event):void {
    webText = e.target.data;
    headingText = webText.match( /<H1>([^]*?)<\/H1>/ ); 
}

myTextLoader.load(new URLRequest("http://www.MyWebPage.com")); 
```

完成后，我的数组中有四个条目：前两个是我所期望的，但接下来的两个是 headingText[2] = 401
headingText[3] = [网页的全部内容。]

我究竟做错了什么？

此外，我在结果中得到了 H1 标签。有没有办法告诉表达式给我 H1 标签内的所有内容，没有 H1 标签？

谢谢你，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:00:14.733

正如 match 方法的文档所示：

> 如果 pattern 是正则表达式，为了返回一个包含多个匹配子字符串的数组，必须在正则表达式中设置 g（全局）标志：
> 
> *   如果未设置 g（全局）标志，则返回数组将包含不超过一个匹配项，并且正则表达式的 lastIndex 属性保持不变。
> *   如果设置了 g（全局）标志，则该方法在字符串的开头（索引位置 0）开始搜索。如果匹配的子字符串是空字符串（可能出现在 /x*/ 等正则表达式中），则该方法将该空字符串添加到匹配数组中，然后在下一个索引位置继续搜索。方法完成后，正则表达式的 lastIndex 属性设置为 0。
> 
> 当模式参数是设置了 g（全局）标志的正则表达式时，如果未找到匹配项，则该方法返回一个空数组。如果模式参数是字符串或非全局正则表达式且未找到匹配项，则该方法返回 null。如果您没有传递任何值（或未定义的值）作为模式参数，则该方法返回 null。

问题是你没有指定全局标志并且你最多得到一个结果，修复它只需添加`g`到你的正则表达式模式。但是您可以；不确定加载的页面是否会使用 H1 或 h1，那么您还应该添加`i`- 忽略大小写的标志，您需要的最后一个标志是 dotall 以匹配换行符。您修改后的正则表达式应如下所示：

```
webText.match( /\<H1>(.*?)\<\/H1>/gis ); 
```

@Jason Reeves 提出了很好的解决方案，但并非所有 HTML 页面都是正确的 XML 文件（有效），这意味着`var webText:XML = new XML(event.target.data);`“XML”中的任何错误都会引发错误，从而使该解决方案无法用于您无法控制的来源。

# c++ - 无法将带有 const 参数的函数转换为函数指针？

> ID：13636949
> 
> 赞同：0
> 
> 时间：2012-11-29T23:55:11.220
> 
> 标签：c++, c++11

即使明确提到函数指针中的参数是 const，它似乎也无法将函数转换为这种类型：

```
#include <iostream>

template <typename T>
class Image{};

template <typename TPixel>
static void
FillImage(const Image<TPixel>* const image){}
//FillImage(Image<TPixel>* const image){} // Replacing the above line with this one compiles fine

int main()
{
  typedef Image<float> ImageType;
  ImageType* image = new ImageType;
  void (*autoFunctionPointer)(const decltype(image)) = FillImage;
  autoFunctionPointer(image);
} 
```

谁能解释如何使它进行转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:03:42.900

`const`应用于指针。

所以，`const decltype(image)`等价于`ImageType* const`而*不是* `const ImageType*`

如果您更改`image`为

```
const ImageType* image = new ImageType; 
```

第一个版本`FillImage()`按预期工作。

要获得一个`const ImageType*`，您可以使用[std::remove_pointer](http://www.cplusplus.com/reference/type_traits/remove_pointer/)

```
#include <type_traits>
...
void (*autoFunctionPointer)(const std::remove_pointer<decltype(image)>::type *) = FillImage; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:46:46.433

`FillImage`是模板，不是函数。尝试一些`FillImage<float>`.

# jquery - jQuery替换元素

> ID：13636950
> 
> 赞同：1
> 
> 时间：2012-11-29T23:55:14.323
> 
> 标签：jquery, json

我有文件 test.php

```
{"1":{"PLAYER1":"PLAYER_ID3","HEALTH1":90.625,"PLAYER2":"PLAYER_ID5","HEALTH2":89.0625},"2":{"PLAYER1":"PLAYER_ID3","HEALTH1":81.25,"PLAYER2":"PLAYER_ID5","HEALTH2":78.125},"3":{"PLAYER1":"PLAYER_ID3","HEALTH1":71.875,"PLAYER2":"PLAYER_ID5","HEALTH2":67.1875},"4":{"PLAYER1":"PLAYER_ID3","HEALTH1":62.5,"PLAYER2":"PLAYER_ID5","HEALTH2":56.25},"5":{"PLAYER1":"PLAYER_ID3","HEALTH1":53.125,"PLAYER2":"PLAYER_ID5","HEALTH2":45.3125},"6":{"PLAYER1":"PLAYER_ID3","HEALTH1":43.75,"PLAYER2":"PLAYER_ID5","HEALTH2":34.375},"7":{"PLAYER1":"PLAYER_ID3","HEALTH1":34.375,"PLAYER2":"PLAYER_ID5","HEALTH2":23.4375},"8":{"PLAYER1":"PLAYER_ID3","HEALTH1":25,"PLAYER2":"PLAYER_ID5","HEALTH2":12.5},"9":{"PLAYER1":"PLAYER_ID3","HEALTH1":15.625,"PLAYER2":"PLAYER_ID5","HEALTH2":1.5625},"10":{"PLAYER1":"PLAYER_ID3","HEALTH1":6.25,"PLAYER2":"PLAYER_ID5","HEALTH2":-9.375},"11":{"PLAYER1":"PLAYER_ID3","HEALTH1":-6.875,"PLAYER2":"PLAYER_ID4","HEALTH2":89.0625},"12":{"PLAYER1":"PLAYER_ID1","HEALTH1":86.875,"PLAYER2":"PLAYER_ID4","HEALTH2":76.875},"13":{"PLAYER1":"PLAYER_ID1","HEALTH1":73.75,"PLAYER2":"PLAYER_ID4","HEALTH2":64.6875},"14":{"PLAYER1":"PLAYER_ID1","HEALTH1":60.625,"PLAYER2":"PLAYER_ID4","HEALTH2":52.5},"15":{"PLAYER1":"PLAYER_ID1","HEALTH1":47.5,"PLAYER2":"PLAYER_ID4","HEALTH2":40.3125},"16":{"PLAYER1":"PLAYER_ID1","HEALTH1":34.375,"PLAYER2":"PLAYER_ID4","HEALTH2":28.125},"17":{"PLAYER1":"PLAYER_ID1","HEALTH1":21.25,"PLAYER2":"PLAYER_ID4","HEALTH2":15.9375},"18":{"PLAYER1":"PLAYER_ID1","HEALTH1":8.125,"PLAYER2":"PLAYER_ID4","HEALTH2":3.75},"19":{"PLAYER1":"PLAYER_ID1","HEALTH1":-5,"PLAYER2":"PLAYER_ID4","HEALTH2":-8.4375},"20":{"PLAYER1":"PLAYER_ID2","HEALTH1":85.3125,"PLAYER2":"PLAYER_ID6","HEALTH2":87.5},"21":{"PLAYER1":"PLAYER_ID2","HEALTH1":70.625,"PLAYER2":"PLAYER_ID6","HEALTH2":75},"22":{"PLAYER1":"PLAYER_ID2","HEALTH1":55.9375,"PLAYER2":"PLAYER_ID6","HEALTH2":62.5},"23":{"PLAYER1":"PLAYER_ID2","HEALTH1":41.25,"PLAYER2":"PLAYER_ID6","HEALTH2":50},"24":{"PLAYER1":"PLAYER_ID2","HEALTH1":26.5625,"PLAYER2":"PLAYER_ID6","HEALTH2":37.5},"25":{"PLAYER1":"PLAYER_ID2","HEALTH1":11.875,"PLAYER2":"PLAYER_ID6","HEALTH2":25},"26":{"PLAYER1":"PLAYER_ID2","HEALTH1":-2.8125,"PLAYER2":"PLAYER_ID6","HEALTH2":12.5}} 
```

和另一个文件：http: [//jsfiddle.net/MT3Qf/](http://jsfiddle.net/MT3Qf/)

它在开始时向我显示：当前玩家：PLAYER_ID2 PLAYER_ID3 ...

但是当前玩家不是 player_id2。当前玩家是 id3。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:00:42.023

您似乎希望将数据视为数组，但事实并非如此。它是一个具有一堆属性的对象。`$.each()`因此，不能保证它们可能被诸如函数返回的顺序。

您可能需要更改您的 JSON 以表示您希望作为数组、数组的行为。

# c# - 无法启动 PSEXEC

> ID：13636951
> 
> 赞同：1
> 
> 时间：2012-11-29T23:55:16.620
> 
> 标签：c#, psexec

我有这个非常简单的程序

```
Process process = new Process();
process.StartInfo.FileName = @"psexec";
process.Start(); 
```

但是当我运行它时，调试会说“系统找不到指定的文件”

如果我有相同的程序并通过“记事本”更改“psexec”，它可以工作并打开记事本。

```
Process process = new Process();
process.StartInfo.FileName = @"notepad";
process.Start(); 
```

这很奇怪，因为我的 psexec 在 System32 中，如果使用 Windows-Run 运行“psexec”，它可以工作。

预先感谢您的任何帮助。

**更新**：我指定了完整路径`@="C:\Windows\System32\PSexec.exe"`，但它不起作用。但是，如果我将 Psexec 移动到，例如`@"D:\psexec.exe"`它可以工作！为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T18:00:24.853

从 c:\windows\system32 运行程序在 64 位操作系统上很麻烦。解决方法是 Project + Properties，Build 选项卡，将 Platform target 更改为 AnyCPU。或者将文件也复制到 c:\windows\syswow64。

或者只是不把它放在 Windows 目录中，它不是属于那里的操作系统特定文件。适当的位置是与您的 EXE 相同的目录。

[您可以在这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/aa384187%28VS.85%29.aspx)中了解有关文件系统重定向器的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:13:22.833

尝试指定“psexec”的完整路径

有任何属性“WorkingDirectory”，这可能会有所帮助。

# perl - 用于后处理的 perl 代码结构

> ID：13636952
> 
> 赞同：3
> 
> 时间：2012-11-29T23:55:17.050
> 
> 标签：perl, code-structure

我的问题有点抽象，但我会尽量在我的陈述中说清楚。（这是一个“橡皮鸭效应”的帖子，所以如果只是把它输入到某个地方，我会很感激的。但是，回复会很棒！）

我有旧的 fortran 代码，我无法更改（至少现在还没有），所以我被它笨拙的输出所困扰。

我正在使用 perl 对注释不佳的 ascii 输出文件进行后处理，正如您可能想象的那样，它是文本和数字的非常专业的混合体。“啊，完美的 perl 目标，”你说。是的。但是我最近得出的结论是，我想出的是非常糟糕的编码。

我的问题是关于人们更喜欢用来实现这样一个目标的通用结构。正如我所说，我对我选择的那个不满意。

这是我得到的结构的一些伪代码：

```
flag1 = 0;
flag2 = 0;
while (<INPUT>) {
   if (cond1) {
      do something [like parse and set a header];
      flag1 = 1;
   } else {
     next;
   }
   if (flag1 == 1 && cond2) {
      do something else [like process a block of data];
   } else {
     next;
   }
} 
```

上述代码的目标是能够将处理分解为与分区不良的 ascii 文件相对应的块——文件中没有太多的“标签”，因此条件（`cond1`、`cond2`等）是涉及。除其他原因外，设置标志的目的是通过文件跟踪代码的进度。

我现在想到一个更好的结构可能是

```
while (<INPUT>) {
   do stuff;
}

while (<INPUT>) {
   do other stuff;
} 
```

无论如何，如果我的漫无边际激发了任何想法，我会很高兴听到它们。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T02:13:31.660

您的原始结构非常好。你正在构建一个状态机，并以一种完全合理的方式来完成它，这种方式真的不能再惯用了。

如果您愿意，您唯一可以做的就是将代码模块化一点：

```
our %state = (last => 0, current => 0, next => 0);
our %extra_flags = ();
sub cond1($line) { return $next_state } # Returns 0 if cond==false
sub cond2($line) { return $next_state } # Returns 0 if cond==false

our %conditions = (
   0 => \&cond1
   1 => \&cond2  # flag1 is set
);

while (<INPUT>) {
   my $state = $state->{current};
   if ($state->{next} = $conditions{$state}->($_, $state)) {
      $do_stuff{$state}->{$next_state}->($line);
      $state->{last} = $state->{current};
      $state->{current} = $state->{next};
      next;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T02:10:38.300

如果该文件确实适合在多个循环中进行处理，那么这将是一种比使用条件 IMO 模拟更清晰的方法。

如果没有，即使只有一些例外情况可以编写代码，最好还是坚持使用您描述的原始方法。

# html - 使用行跨度的困难

> ID：13636953
> 
> 赞同：0
> 
> 时间：2012-11-29T23:55:29.320
> 
> 标签：html, css, html-table

如何在这种结构中制作 html 表格？

```
+--------------+-----+--------------+
|              |     |              |
|  CONTENT-1   |     |  CONTENT-2   |
|--------------|     |--------------|
|              |     |              |
|              |     |              |
|              |     |              |
|              |     |              |
|              |     |              |
+-----------------------------------+ 
```

我已经尝试在高列上使用行跨度，但它无法正常工作。

```
<table class="login_selection_button">
    <tr>
        <td>
            CONTENT-1
        </td>
        <td>
            CONTENT-2
        </td>
    </tr>
    <tr>
        <td>

        </td>
        <td rowspan="2">

        </td>
        <td>

        </td>
    </tr>
</table> 
```

[http://jsfiddle.net/KyttF/](http://jsfiddle.net/KyttF/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:58:42.620

在第一行设置具有行跨度的单元格并给它一个宽度

[http://jsfiddle.net/KyttF/1/](http://jsfiddle.net/KyttF/1/)

```
<table border="1">
    <tr>
        <td>
            CONTENT-1
        </td>
        <td rowspan="2" style="width:50px;"></td>
        <td>
            CONTENT-2
        </td>
    </tr>
    <tr>
        <td>
            filler
        </td>
        <td>
            filler
        </td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:01:13.133

看起来你想要这个

```
<table>
  <tr>
    <td>
        content 1
    </td>
    <td rowspan="2">
    </td>
    <td>
        content 2
    </td>
  </tr>
  <tr>
    <td>
    </td>
    <td>
    </td>
  </tr>
</table> 
```

# c# - 将 WPF 控件绑定到模型对象上动态引入的接口

> ID：13636962
> 
> 赞同：0
> 
> 时间：2012-11-29T23:56:35.517
> 
> 标签：c#, wpf, data-binding, interface, postsharp

我正在使用 PostSharp 的 [CompositionAspect] 功能将接口动态注入到我的 WPF 应用程序中的模型对象。但是，除非在模型对象上显式实现相关接口，否则 WPF 似乎无法正确绑定（显示）属性？

使用自定义 CompositionAspect (ComposeObjectAspect) 我能够通过运行时将 ModelObject 转换为引入的接口直接成功地公开内部 IMyInterface 对象的属性；

```
// some interface definition, for sample completeness
public interface IMyInterface 
{
    public string MyProperty { get; set; }
}

// model object, which does NOT implement IMyInterface directly, though the interface is dynamically introduced by PostSharp
[ComposeObjectAspect(typeof(IMyInterface))]
public class ModelObject 
{
    private IMyInterface actualDataObject;
}

. . .

public class ViewModel
{
    public ObservableCollection<IMyInterface> MyData { get; }

    public void LoadData()
    {
        // concrete IMyInterface dtos are returned here, and put into a VM collection
        IList<IMyInterface> myData = 
            (from IMyInterface o in SomeDataSource.LoadLocalDescriptors() 
             select new ModelObject(o) as IMyInterface).ToList();
        this.MyData = new ObservableCollection<IMyInterface>(myData);
    }
} 
```

这一切都很好，如果我检查 myData 列表中的任何对象，或者将其转换为 IMyInterface 类型（如您所见，上面的**类 ModelObject**定义没有直接实现），我可以直接看到来自 actualDataObject 的内部**属性**. 这一切都很好。

现在，当我尝试将 ViewModel.Data 集合绑定到 WPF 数据网格时，会出现一系列绑定错误，例如；

> System.Windows.Data 错误：40：BindingExpression 路径错误：在“对象”“ModelObject”（HashCode=56810243）上找不到“SomeProperty”属性。BindingExpression:Path=SomeProperty; DataItem='ModelObject' (HashCode=56810243); 目标元素是'TextBlock'（名称=''）；目标属性是“文本”（类型“字符串”）

作为参考，View XAML 的相关部分如下所示；

```
<DataGrid ItemsSource="{Binding MyData}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Width="Auto" Header="Some Property" Binding="{Binding SomeProperty, Mode=OneWay}" />
    </DataGrid.Columns>
</DataGrid> 
```

尽管所有数据行都是可见的（并且为空），但网格列显示为空白。

如果我检查“ModelObject”，则属性 IMyInterface.SomeProperty 就在那里。

如果我直接将 IMyInterface 应用于 ModelObject 类（并将所有成员实现为组合的实际数据对象实例的简单中继），那么绑定很好，并且 SomeProperty 显示没有错误。

我错过了 IMyInterface 的 PostSharp 实现和我自己的显式版本之间的不同之处？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T01:30:31.193

I managed to find a solution to this problem here: [WPF databinding to interface and not actual object - casting possible?](https://stackoverflow.com/questions/327984/wpf-databinding-to-interface-and-not-actual-object-casting-possible)

Turns out the binding will work if it is defined explicitly against the interface type, instead of implicitly, presumably because ModelObject does not have a SomeProperty, but it does have IMyInterface.SomeProperty ?

So, this works;

```
<DataGridTextColumn Width="Auto" Header="Some Property" 
       Binding="{Binding Path=(mynamespace:IMyInterface.SomeProperty), Mode=OneWay}" /> 
```

Though, it does cause designer warnings, as noted in the referenced question.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T08:09:36.603

我认为原因是 PostSharp 引入了显式实现，因此实际上没有引入公共属性。您应该使用 [IntroduceInterface] 建议*和*[IntroduceMember] 建议来引入公共属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:45:08.673

可能的解决方案：

```
<DataGrid DataContext="{Binding Data}" ItemsSource="{Binding}" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Width="Auto" Header="Some Property" Binding="{Binding SomeProperty, Mode=OneWay}" />
    </DataGrid.Columns>
</DataGrid> 
```

或者

```
<DataGridTextColumn Width="Auto" Header="Some Property" Binding="{Binding Path=actualDataObject.SomeProperty, Mode=OneWay} 
```

# mozilla - Mozilla 插件 sdk 1.11 - 页面模块清理

> ID：13636963
> 
> 赞同：1
> 
> 时间：2012-11-29T23:56:36.110
> 
> 标签：mozilla, firefox-addon-sdk

我正在使用 page-mod 将内容脚本附加到所有打开的选项卡！

在那之后，在某个时刻/事件中，我想从所有打开的选项卡中删除所有附加的内容脚本！

我怎样才能做到这一点 ？.... 已经使用 sdk 1.11

```
myPanel.port.on('userlogged', function(rdata) {

    var workers= [];

            function detachWorker(worker, workerArray) {
                var index = workerArray.indexOf(worker);
                if(index != -1) {
                    workerArray.splice(index, 1);
                }
            }

            var pMod = pageMod.PageMod({
                include: "*",
                contentScriptWhen: "end",
                contentScriptFile: data.url("sas_tb.js"),
                attachTo: ["existing", "top", "frame"],
                onAttach: function(worker) {
                    workers.push(worker);
                    worker.on('detach', function () {
                        detachWorker(this, workers);
                    });

                    worker.port.emit('logged', rdata.logged);

                }
            });
}); 
```

所以 contentScriptFile 将附加到浏览器中所有打开的选项卡，但是如果我想...说从我的插件中注销，我如何从所有附加的选项卡/工作人员中删除 contentScriptFile！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:53:55.307

显式调用 Worker 的`destroy`方法，SDK 会处理内容脚本

# jquery - 联系表格 7 和默认单选值

> ID：13636966
> 
> 赞同：2
> 
> 时间：2012-11-29T23:56:58.980
> 
> 标签：jquery, wordpress, contact-form-7

我正在使用[此方法](http://www.featheredowl.com/contact-form-7-default-select-value-url-query-variable)将默认值传递给 Contact Form 7 选择字段。它工作正常，但我真的需要它与无线电场一起工作。

我尝试将 jquery 更改为：

```
jQuery(document).ready(function(){
        // get contents of hidden input; store in variable
        var val = jQuery("span.hiddendefault input").val();
        // set the "selected" attribute for option with value equal to variable
        jQuery('radio#style-one option[value=' + val + ']').attr('checked', 'checked');
}); 
```

和联系表 7：

```
[radio radio-525 id:style-one class:test-class "one" "two" "three" "four"] 
```

但未按要求检查单选按钮。请问有人有什么想法吗？

[编辑] 表单生成的 html：

```
<span class="wpcf7-form-control-wrap radio-525">
  <span id="style-one" class="wpcf7-form-control  wpcf7-radio test-class">
    <span class="wpcf7-list-item">
      <input type="radio" name="radio-525" value="one" />
      <span class="wpcf7-list-item-label">one</span>
    </span>
    <span class="wpcf7-list-item">
      <input type="radio" name="radio-525" value="two" />
      <span class="wpcf7-list-item-label">two</span>
    </span>
    <span class="wpcf7-list-item">
      <input type="radio" name="radio-525" value="three" />
      <span class="wpcf7-list-item-label">three</span>
    </span>
    <span class="wpcf7-list-item">
      <input type="radio" name="radio-525" value="four" />&nbsp;
      <span class="wpcf7-list-item-label">four</span>
    </span>
  </span>
</span>
<span class="wpcf7-form-control-wrap hiddendefault">
  <input type="hidden" name="hiddendefault" value="three" />
</span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-30T11:28:35.863

您只需为所选值“option2”添加默认值：2

```
[radio subcription default:2 "option1" "option2" "option3"] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T01:08:15.120

Contact Form 7 生成的 HTML 不使用单选或选项标签。它`input type="radio"`在 a 内使用`span`。结果，您的选择器不匹配任何元素。它应该是

`'span#style-one input[value=' + val + ']'`

在上下文中

```
jQuery(document).ready(function(){
    // get contents of hidden input; store in variable
    var val = jQuery("span.hiddendefault input").val();
    // set the "selected" attribute for option with value equal to variable
    jQuery('span#style-one input[value=' + val + ']').attr('checked', 'checked');
}); 
```

# algorithm - 如何将一组唯一数值转换为一组较短的唯一字母数值？

> ID：13636968
> 
> 赞同：2
> 
> 时间：2012-11-29T23:57:07.320
> 
> 标签：algorithm, oracle

我的 Oracle 数据库中使用的当前 ID 字段是 10 位数字。我对此 ID 有 9 个字符而不是 10 个字符的业务要求。我想考虑将此 ID 转换为字母数字，以便我可以将现有的 10 位 ID 1 对 1 映射到新的 9 个字符长的字母数字值.

Oracle（甚至在 Oracle 之外）中是否存在可以执行此操作的现有功能，即将所有数值转换为字母数字，但也将其从 X 字符“缩小”为 X-1，并且没有任何映射“冲突”？

我还应该补充一点，一旦我进行了这种转换，我还希望能够生成遵循这种新格式的新 id。

鉴于切换到字母数字给我的“空间”量，所有当前的 10 位数字都将适合 5 个字母数字字符的空间。所以我想我只是将 0000 放在 5 个字母数字字符的前面。因此，假设我的“最高”映射 ID 值是“ZZZZ”，那么我会在前面加上“0000”使其成为“0000ZZZZZ”。我生成的下一个数字 ID 将是“0001ZZZZZ”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:04:53.223

最简单的是将它从十进制转换为十六进制。任何 10 位十进制数都可以表示为 9 位十六进制数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T00:15:07.450

看起来我可能需要做的就是对我的 ID 进行 base36 编码：en.wikipedia.org/wiki/Base_36

# r - R中的文档字符串有缺点吗？

> ID：13636971
> 
> 赞同：3
> 
> 时间：2012-11-29T23:57:19.257
> 
> 标签：r, ess

我不喜欢 ESS（Emacs Speaks Statistics）模式下注释的自动缩进，因为它太靠右了。

```
normalize <- function(values){
                                        # comment
  return(2* values / (max(values) - min(values)) )
} 
```

Python 也使用文档字符串来进行注释。我在 R 中玩弄它。

```
normalize <- function(values){
  "comment
   line 2 of comment"
  return(2* values / (max(values) - min(values)) )
} 
```

我确信我也可以修复注释的 ESS 缩进，但我喜欢**多行注释**的想法。GNU R 中的文档字符串有什么缺点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T23:59:30.117

`##`以代替开头的注释`#`将根据当前缩进级别自动缩进。

```
j <- function(x) {
                                        # One hash auto-indents to column 40 
    ## Two hashes auto-indent to current level
### Three hashes auto-indent to BOL
    rnorm(x)
} 
```

# menu - 选择折叠时导航的下拉菜单

> ID：13636974
> 
> 赞同：2
> 
> 时间：2012-11-29T23:57:36.077
> 
> 标签：menu, twitter-bootstrap, responsive-design, nav

当引导程序为较小的视口折叠时，我不喜欢折叠的 3 行导航按钮。有没有办法让导航栏折叠到选择下拉菜单，以及将其放置在页面上的其他位置，而不是右上角？就像这样： http: [//filamentgroup.com/examples/rwd-nav-patterns/](http://filamentgroup.com/examples/rwd-nav-patterns/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:26:22.427

查看 filamentgroup 站点上发生的情况，您可以看到，在某个宽度以下，body 会获取类`nav-menu`，如果尺寸更大，则会删除。这是他们的 rwd-nav.js 完整的注释：

```
jQuery(function($){
$('.nav-primary')
  // test the menu to see if all items fit horizontally
  .bind('testfit', function(){
    var nav = $(this),
     items = nav.find('a');

    $('body').removeClass('nav-menu');                    

    // when the nav wraps under the logo, or when options are stacked, display the nav as a menu              
    if ( (nav.offset().top > nav.prev().offset().top) || ($(items[items.length-1]).offset().top > $(items[0]).offset().top) ) {

       // add a class for scoping menu styles
       $('body').addClass('nav-menu');
    };                    
 })

 // toggle the menu items' visiblity
 .find('h3')
   .bind('click focus', function(){
      $(this).parent().toggleClass('expanded')
   });   

   // ...and update the nav on window events
   $(window).bind('load resize orientationchange', function(){
   $('.nav-primary').trigger('testfit');
 });

}); 
```

然后在他们的 rwd-nav.css 中，根据宽度重新定位

```
/* Media queries
------------------------------ */

@media screen and (min-width: 640px) {
  .nav-primary,
  .nav-primary ul {
    float: left;
  }
  .nav-primary ul {
    float: left;
  }
  .nav-primary li {
    float: left;
    font-size: 1.5em;
    border-bottom: 0;
  }   
}

@media screen and (min-width: 910px) {
  .nav-primary {
    float: right;
    clear: none;
  }   
} 
```

希望有帮助！

# android - 进度条图形错误？

> ID：13636975
> 
> 赞同：2
> 
> 时间：2012-11-29T23:57:36.483
> 
> 标签：android

有人可以解释为什么我的进度条不是一条直线（下图）？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ProgressBar android:id="@+id/progressbar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="fill_parent"
    android:layout_height="25px"
    android:progress="50"
/>

<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:drawSelectorOnTop="false"
/>
</LinearLayout> 
```

![在此处输入图像描述](../Images/01fb9f805078c2143498b3db1ef1f22d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T01:38:24.533

You set:

```
android:layout_height="25px" 
```

which means 25 pixels, which is usually less than 3 millimiters in most devices.

Ex:

Screen with 800 pixel and 8 cm -> 8 / 800 = 0.01 cm = 0.1 mm 25 pixel = 2.5 millimiters

Regards.

# java - 在android中的8位字节数组上存储16位音频

> ID：13636977
> 
> 赞同：1
> 
> 时间：2012-11-29T23:57:45.270
> 
> 标签：java, android, audio, audio-recording, pcm

我很困惑。我需要在 Android 中从 MIC 录制声音，所以我使用了以下代码：

```
recorder = new AudioRecord(AudioSource.MIC, 44100,
                AudioFormat.CHANNEL_IN_MONO,
                AudioFormat.ENCODING_PCM_16BIT, N);
buffer = new byte[N];
//...
recorder.read(buffer, 0, N); 
```

众所周知，字节数组可以存储-128 到+128 之间的值，而16Bit 声音需要更多的存储空间（例如short 和int），但令人惊讶的是Java 和Android 有一种`record`方法可以将记录的数据保存到字节数组中。

这怎么可能？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T00:16:39.120

您正在将字节视为一个镜头整数。它只有 8 位。您需要存储 1000111011100000（16 位）吗？第一个字节是 10001110，第二个字节是 11100000。您可以将这些位解释为数字与此处无关。以更一般的方式， byte[] 通常是您处理二进制“原始数据”的方式（让它是音频流​​或加密内容或您将其视为比特流的任何其他内容）。

如果您有 n 个 16 位的“字”，那么您将需要 2n 个字节来存储它。字节 0 将是字 0 的较低（或较高）部分，字节 1 将是字 0 的其余部分，字节 0 将是字 1 的较低（或较高）部分......

# php - 未设置 vs. = NULL

> ID：13636979
> 
> 赞同：7
> 
> 时间：2012-11-29T23:58:01.000
> 
> 标签：php

> **可能的重复：**
> [使用 PHP 释放内存有什么好处：unset() 或 $var = null](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)

[这个问题是对What's better at free memory with PHP: unset() or $var = null](https://stackoverflow.com/questions/584960/whats-better-at-freeing-memory-with-php-unset-or-var-null)的跟进

长话短说，我自己的基准似乎与该问题中给出的答案相矛盾。我的问题是……为什么？答案是错误的还是我不明白的地方？

```
<?php
$start = microtime(true);
for ($i = 0; $i < 10000000; $i++) {
    $a = 'a';
    $a = NULL;
}
$elapsed = microtime(true) - $start;

echo "took $elapsed seconds\r\n";

$start = microtime(true);
for ($i = 0; $i < 10000000; $i++) {
    $a = 'a';
    unset($a);
}
$elapsed = microtime(true) - $start;

echo "took $elapsed seconds\r\n";
?> 
```

每似乎“= null”更快。

PHP 5.4 结果：

*   耗时 0.88389301300049 秒
*   花了 2.1757180690765 秒

PHP 5.3 结果：

*   花了 1.7235369682312 秒
*   花了 2.9490959644318 秒

PHP 5.2 结果：

*   花了 3.0069220066071 秒
*   花了 4.7002630233765 秒

PHP 5.1 结果：

*   花了 2.6272349357605 秒
*   花了 5.0403649806976 秒

PHP 5.0 和 4.4 的情况开始有所不同。

5.0：

*   花了 10.038941144943 秒
*   花了 7.0874409675598 秒

4.4：

*   花了 7.5352551937103 秒
*   花了 6.6245851516724 秒

请记住 microtime(true) 在 PHP 4.4 中不起作用，所以我不得不使用 php.net/microtime / Example #1 中给出的 microtime_float 示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:00:31.737

仔细阅读所选答案：

> 如果你正在做 $whatever = null; 那么你正在重写变量的数据。您可能会更快地释放/缩小内存，但它可能会更快地从真正需要它们的代码中窃取 CPU 周期，从而导致更长的整体执行时间。

所以，如果你所做的只是记忆的东西，是的，那会更快。但是在实际应用程序中，您可能会发现它会减慢速度。

# javascript - jQuery缩放功能不起作用

> ID：13636982
> 
> 赞同：0
> 
> 时间：2012-11-29T23:58:14.567
> 
> 标签：javascript, jquery

我有一些代码应该使图像变小直到它从屏幕上消失。如果我有图像，`div`它将无法正常工作。如果我把它拿出来，`div`它会很好用。

但是我需要它在`div`. 我怎样才能解决这个问题？

`img`如果不在 a 中，则代码可以正常工作`div`，但是当它出现时，它就搞砸了。

```
setTimeout(function(){
    $("#thrid").show('fast').animate({
    top : '-=-300',
    width: 0,
    height: 0
        },
        {duration: 1000});
},2000); 
```

CSS：

```
#thrid{
    display:none;
    position:absolute;
    left: 592px;
    top: 160px;
} 
```

HTML：

```
<div id="thrid">
    <img src="images/thrid.png" alt="thrid">
</div> 
```

这就是它的作用：http `div`: [//jsfiddle.net/xMV5Q/3/](http://jsfiddle.net/xMV5Q/3/)

这就是我想要它做的：http: [//jsfiddle.net/xMV5Q/1/](http://jsfiddle.net/xMV5Q/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:12:49.820

尝试将 img 的宽度和高度设置为 100%：

```
#city2 img {
    height: 100%;
    width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:16:24.517

图像重新出现是因为 div 溢出仍然可见

```
#city2 {
  display: none;
  overflow: hidden;
  position: absolute;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T00:35:43.653

我刚刚尝试了您的示例（http://jsfiddle.net/will_moore/g6fYT/），即使使用 div，它似乎对我来说也可以。

我猜你有一些与导致问题的 div 相关的样式。我看不到您的 -=-300 在做什么。你不是说'-=300'吗？

# python - 使用 DAL 和 web2py 将 PostgreSQL 数据库连接到 Web 服务器的选择

> ID：13636983
> 
> 赞同：2
> 
> 时间：2012-11-29T23:58:14.570
> 
> 标签：python, web-services, postgresql, web2py

我在 postgresql 中有一个数据库，我必须将它连接到 Web 服务器。我熟悉python编程，但不熟悉web编程。我有一些关于 DAL（数据库抽象层）的信息，可以在 python 中编写我的查询。我必须将我的查询概括为函数。使用 DAL 并随后使用 web2py 技术将其连接到 Web 服务器是一个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T04:24:03.210

web2py DAL 支持 Postgres，您可以在 web2py 中使用它，或者您可以只使用 dal.py 并与您最喜欢的项目/框架一起使用。

对于现有数据库，我建议您阅读[http://web2py.com/book的第 6 章](http://web2py.com/book)

我有多个使用 Postgres 运行的应用程序，而且效果非常好！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T14:36:28.097

如果您需要与数据库无关，那么 web2py DAL 是一个不错的选择。这意味着 DAL 为数据库后端使用指定的方言实时动态生成 SQL，这样您就不必编写 SQL 代码或学习不同的 SQL 方言；因此，您的应用程序将可在不同类型的数据库之间移植。由于 SQL 是由 DAL 动态生成的，因此可以确保所有插入的数据都被正确转义，从而防止了注入缺陷并使 SQL 注入成为不可能。

此外，虽然我没有在 web2py 书中找到任何关于如何从现有数据库自动生成模型的内容，但有一种方法可以通过使用由 github 创建的脚本从现有 PostgreSQL 数据库快速轻松地创建数据库模型Mariano Reingart，他基于 Alexandre Andrade 创建的脚本“从 dbs 生成模式”（mysql）。该脚本用于从 PostgreSQL 数据库创建 web2py 数据库模型。

因为我使用的是 MSSQL 数据库，所以我需要一个类似的脚本，但我找不到任何东西，所以我对脚本进行了一些小的编辑，特别是围绕 SQL 和数据类型，以便它更符合 MSSQL，并且它工作像一个魅力。我在几秒钟内创建了大约 150 个表的数据库模型，它为我节省了很多时间。

```
https://github.com/phektus/cvstash/blob/master/scripts/extract_pgsql_models.py 
```

我希望这可以帮助其他正在寻找相同的人。

# vb.net - PropertyInfo.GetValue 中遗漏的字符串值

> ID：13636984
> 
> 赞同：2
> 
> 时间：2012-11-29T23:58:25.513
> 
> 标签：vb.net, reflection

我对反射不是很精通，但是几天来我一直在研究这段代码，试图获取类属性的值。我正在使用 API 来查找由 VisualCron 程序管理的 cron 作业中的值。

我会稍微解释一下结构。每个 cron 作业内部都有几个任务，它们有自己的设置。这些设置存储在 TaskClass 类中的属性中，声明如下：

```
Public Property <propertyname> As <classname> 
```

每个属性都与自己的类相关联，因此例如在 TaskClass 中有一个 Execute 属性，声明如下：

```
Public Property Execute As TaskExecuteClass 
```

TaskExecuteClass 内部是保存我需要的值的属性。使用下面的代码块，我已经能够检索除字符串之外的所有类型的属性值。巧合的是，字符串值是我需要获取的唯一值。

我知道我所写的内容一定有问题导致了这种情况，因为经过大量搜索后我找不到任何有类似问题的人。任何人都可以帮助我吗？

```
Dim strAdd As String = ""
For Each t As VisualCronAPI.Server In vcClient.Servers.GetAll()
  For Each f As VisualCron.JobClass In t.Jobs.GetAll
    For Each s As VisualCron.TaskClass In f.Tasks
      Dim propVal As Object
      Dim propInfo As PropertyInfo() = s.GetType().GetProperties()
      For i As Integer = 0 To propInfo.Length - 1
        With propInfo(i)
          If s.TaskType.ToString = propInfo(i).Name.ToString Then
            Dim asm As Assembly = Assembly.Load("VisualCron")
            Dim typeName As String = String.Format("VisualCron.{0}", propInfo(i).PropertyType.Name)
            Dim tp As Type = asm.GetType(typeName)
            Dim construct As ConstructorInfo = tp.GetConstructor(Type.EmptyTypes)
            Dim classInst As Object = construct.Invoke(Nothing)
            Dim classProps As PropertyInfo() = classInst.GetType().GetProperties()
            For h As Integer = 0 To classProps.Length - 1
              With classProps(h)
                If .GetIndexParameters().Length = 0 Then
                  propVal = .GetValue(classInst, Nothing)
                  If Not propVal Is Nothing Then
                    strAdd = f.Name & " - " & s.Name & " - " & .Name & " - " & propVal.ToString
                  End If
                End If
                If strAdd <> "" Then
                  ListBox1.Items.Add(strAdd)
                End If
              End With
            Next
          End If
        End With
      Next
    Next s
  Next f
Next t 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T17:28:44.020

我解决了自己的问题，尽管方式很糟糕。这可能是非常低效的，但在我的特定情况下，速度并不是必需的。这是有效的代码：

```
Dim strAdd As String = ""
For Each t As VisualCronAPI.Server In vcClient.Servers.GetAll()
  For Each f As VisualCron.JobClass In t.Jobs.GetAll
    For Each s As VisualCron.TaskClass In f.Tasks
      Dim propVal As Object
      Dim propInfo As PropertyInfo() = s.GetType().GetProperties()
      For i As Integer = 0 To propInfo.Length - 1
        With propInfo(i)
          If s.TaskType.ToString = propInfo(i).Name.ToString Then
            Dim asm As Assembly = Assembly.Load("VisualCron")
            Dim typeName As String = String.Format("VisualCron.{0}", propInfo(i).PropertyType.Name)
            Dim tp As Type = asm.GetType(typeName)
            Dim construct As ConstructorInfo = tp.GetConstructor(Type.EmptyTypes)
            Dim classInst As Object = construct.Invoke(Nothing)
            Dim classProps As PropertyInfo() = classInst.GetType().GetProperties()
            For h As Integer = 0 To classProps.Length - 1
              With classProps(h)
                If .GetIndexParameters().Length = 0 Then
                  propVal = .GetValue(CallByName(s, propInfo(i).Name.ToString, [Get]), Nothing)
                  If Not propVal Is Nothing Then
                    If propVal.ToString.Contains("\\server\") Or propVal.ToString.Contains("\\SERVER\") Then
                      strAdd = f.Name & " - " & s.Name & " - " & .Name & " - " & propVal.ToString
                      ListBox1.Items.Add(strAdd)
                    End If
                  End If
                End If
              End With
            Next
          End If
        End With
      Next
    Next s
  Next f
Next t 
```

产生差异的代码是

```
classProps(h).GetValue(CallByName(s, propInfo(i).Name.ToString, [Get]), Nothing) 
```

线。

如果有任何改进此代码的建议 - 我假设我在这里仍然有很多错误 - 然后请评论这个答案的未来观众，这样我就可以调整我的代码并了解更多关于如何这个作品。

# ruby-on-rails-3 - 规格。对现有但已修改的活动记录发出保存不会运行包含模块中的 before_update 回调方法

> ID：13636989
> 
> 赞同：0
> 
> 时间：2012-11-29T23:58:48.860
> 
> 标签：ruby-on-rails-3, rspec

我开始尝试在我的代码中加入更多测试，但我碰壁了。

我的模型看起来像这样

```
class Image < ActiveRecord:Base
  before_create :do_something_general
  before_update :do_something_on_update, :do_something_general

  belongs_to :captureable, polymorphic: true

  mount_uploader :image, SomeUploader
  ...
end 
```

我的 rspec 看起来像

```
describe SomeModel do
  before :each do
     @image = FactoryGirl.create(:image)
  end
  ...
  describe "moving image" do
     context "change the parent of the image" do
         it "moves" do
            new_parent = FactoryGirl.create(:parent)
            current_file_path = @image.image.file.path
            @image.captureable = new_parent
            @image.save!
            @image.image.file.path.should_not == current_file_path
         end
      end
  end
end 
```

当我第一次创建图像时，它将存储在依赖于其父级的文件树结构中。当父级更改时，应该移动图像，这是通过 before_update 回调：do_something_on_update 完成的。我的测试应该验证当 Image 的父级更改时，它位于一个新位置。

问题是，当`@image.save.should be_valid`因为 :do_something_general 在 :do_something_on_update 之前运行而返回异常时（顺序很重要）。似乎 rspec 认为我正在创建一个新对象（使用调试器我检查过对象 id 在修改它时没有改变），因此运行 before_create 而不是 before_update。

编辑：似乎 before_update 正在工作，但仅限于类中的回调方法，而不是模块中的回调方法。在这种情况下， :do_something_on_update 位于包含的模块中。结束编辑

当我在开发模式下的控制台中尝试此操作时，它按预期工作。

其他需要注意的事项：我使用 Carrierwave 进行上传（图像列是载波上传器），当调用 :image 工厂时，它还会创建几个父对象和祖父对象。使用 Rspec 2.10、Rails 3.2.8、Ruby 1.9.3

期待您的回复。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:09:51.350

我预计`image.save.should be_valid`会失败，因为它将调用`image.save`返回 true 或 false，然后它将调用`#valid?`该布尔结果，这可能会失败。

您可能会考虑这样编写测试：

```
describe SomeModel do
  let(:image) { FactoryGirl.create(:image) }

  context "when changing the parent of the image" do
    let(:parent_change) { lambda {
      image.captureable = FactoryGirl.create(:parent)
      image.save!
    } }

    it "updates the image's path" do
      expect parent_change.to change { image.image.file.path }
    end
  end
end 
```

这可确保您在测试中只有一个断言（文件路径正在更改），并且如果保存失败，它将引发异常。

# sql - 从单个数据点解析数据

> ID：13636990
> 
> 赞同：4
> 
> 时间：2012-11-29T23:59:20.177
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个讨厌的数据集：

```
+----+------------------------------------------------------------------------------+
| PK |                                 Medications                                  |
+----+------------------------------------------------------------------------------+
|  1 | NAPROXEN, neurontin, DOCUSATE, HYDROCODONE, BACLOFEN, advil                  |
|  2 | celexa, lortab, lyrica, ambien, xanax                                        |
|  3 | adipex                                                                       |
|  4 | opana, roxicodone                                                            |
|  5 | adderall                                                                     |
|  6 | hydrocodone/apap                                                             |
|  7 | NEXIUM, METOPROLOL, lipitor, VERAPAMIL, ASPIRIN, WARFARIN, ambien            |
|  8 | prozac                                                                       |
|  9 | flexeril                                                                     |
| 10 | soma, LITHIUM, MULTI-VITAMIN, fentanyl patch, percocet, PROPANOLOL, tegretol |
+----+------------------------------------------------------------------------------+ 
```

请记住，这只是 2 列。

我想返回的只是`medications`整个数据集中不同的 1 列列表：

```
NAPROXEN
 neurontin
 DOCUSATE
 HYDROCODONE
 BACLOFEN
 advil
celexa
 lortab
 lyrica
 ambien
 xanax
adipex
opana 
```

解决此问题的最佳方法是什么？

非常感谢您的指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T08:25:49.417

```
DECLARE @Medications TABLE
(
     PK BIGINT PRIMARY KEY IDENTITY(1,1)
    ,Medications NVARCHAR(4000)
)

/* Populate the table with example records*/
INSERT INTO @Medications(Medications) 
VALUES ('NAPROXEN, neurontin, DOCUSATE, HYDROCODONE, BACLOFEN, advil')
      ,('celexa, lortab, lyrica, ambien, xanax   ')
      ,('adipex')
      ,('opana roxicodone')
      ,('adderall')
      ,('hydrocodone/apap')
      ,('NEXIUM,METOPROLOL,lipitor,VERAPAMIL,ASPIRIN,WARFARIN,ambien')
      ,('prozac')
      ,('flexeril')
      ,('soma,LITHIUM,MULTI-VITAMIN,fentanyl patch,percocet,PROPANOLOL,tegretol'); 
```

**选项1**

```
select distinct Medication = ltrim(rtrim(O.splitdata ))
from
(
select *,
cast('<X>'+replace(F.Medications,',','</X><X>')+'</X>' as XML) as xmlfilter
from @Medications F
)F1
cross apply
( 
 select fdata.D.value('.','varchar(50)') as splitdata 
 from f1.xmlfilter.nodes('X') as fdata(D)) O
where O.splitdata <> ''
group by O.splitdata 
```

**选项 2**

```
SELECT DISTINCT display_term
FROM @Medications
CROSS APPLY sys.dm_fts_parser('"' + Medications + '"', 1033, 0,0)
where display_term NOT LIKE 'nn%' 
```

**选项 3**

```
SELECT  DISTINCT
    LTRIM(RTRIM(SUBSTRING(Medications, Number ,CHARINDEX(',', Medications + ',', Number ) - Number))) AS Medication 
FROM @Medications 
JOIN master..spt_values ON Number <= DATALENGTH(Medications) + 1  AND type='P'
AND SUBSTRING(',' + Medications, Number , 1) = ',' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-30T07:55:18.817

这可能是您正在寻找的解决方案：

```
;WITH SourceDate(PK,MedicationsXML) AS
(
    SELECT PK
          ,CAST(N'<r><![CDATA[' + REPLACE(Medications, ',', ']]></r><r><![CDATA[') + ']]></r>' AS XML)
    FROM @Medications
)
SELECT DISTINCT Medicament
FROM SourceDate
CROSS APPLY (SELECT DISTINCT RTRIM(LTRIM(Tbl.Col.value('.', 'nvarchar(250)'))) AS Medicament FROM MedicationsXML.nodes('//r') Tbl(Col)) AS List 
```

这是完整的工作示例（我添加了重复的记录以表明它仅返回不同的值：

```
SET NOCOUNT ON
GO

    /* Declare table that holds the data*/
    DECLARE @Medications TABLE
    (
         PK BIGINT PRIMARY KEY IDENTITY(1,1)
        ,Medications NVARCHAR(4000)
    )

    /* Populate the table with exmaple records*/
    INSERT INTO @Medications(Medications)
    VALUES ('NAPROXEN, neurontin, DOCUSATE, HYDROCODONE, BACLOFEN, advil')
          ,('celexa, lortab, lyrica, ambien, xanax   ')
          ,('adipex')
          ,('opana, roxicodone')
          ,('adderall')
          ,('hydrocodone/apap')
          ,('NEXIUM, METOPROLOL, lipitor, VERAPAMIL, ASPIRIN, WARFARIN, ambien')
          ,('prozac')
          ,('flexeril')
          ,('soma, LITHIUM, MULTI-VITAMIN, fentanyl patch, percocet, PROPANOLOL, tegretol')
          ,('NAPROXEN, neurontin, DOCUSATE, HYDROCODONE, BACLOFEN, advil')
          ,('celexa, lortab, lyrica, ambien, xanax   ')
          ,('adipex')
          ,('opana, roxicodone')
          ,('adderall')
          ,('hydrocodone/apap')
          ,('NEXIUM, METOPROLOL, lipitor, VERAPAMIL, ASPIRIN, WARFARIN, ambien')
          ,('prozac')
          ,('flexeril')
          ,('soma, LITHIUM, MULTI-VITAMIN, fentanyl patch, percocet, PROPANOLOL, tegretol')

    ;WITH SourceDate(PK,MedicationsXML) AS
    (
        SELECT PK
              ,CAST(N'<r><![CDATA[' + REPLACE(Medications, ',', ']]></r><r><![CDATA[') + ']]></r>' AS XML)
        FROM @Medications
    )
    SELECT DISTINCT Medicament
    FROM SourceDate
    CROSS APPLY (SELECT DISTINCT RTRIM(LTRIM(Tbl.Col.value('.', 'nvarchar(250)'))) AS Medicament FROM MedicationsXML.nodes('//r') Tbl(Col)) AS List

SET NOCOUNT OFF
GO 
```

随意问任何问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-30T00:25:04.400

如果您可以将其输出到 awk

```
outputcommand | awk 'BEGIN{FS="|"}{print $3}'|awk 'BEGIN{RS=","}{print $0}' 
```

如果它是一个简单的文本文件，您可以将其`cat filename`用于输出命令，或者：

```
awk 'BEGIN{FS="|"}{print $3}' some_filename |awk 'BEGIN{RS=","}{print $0}' 
```

# vba - 在空白行结束复制循环时出现 1004 错误

> ID：13636993
> 
> 赞同：1
> 
> 时间：2012-11-29T23:59:29.793
> 
> 标签：vba, excel, runtime-error

我正在尝试从值为“深度（m）”的单元格开始复制数据，并在下一个空白行结束。这些之间的行数会有所不同，我有 400 个电子表格可以执行此操作。

错误：

```
Run-time error '1004':
Application-defined or object-defined error 
```

这是我的代码：

```
Sub CopyDepth()
   Dim rownum As Long

   Dim startrow As Long
   Dim endrow As Long
   Dim lastrow As Long
   rownum = 1
   colnum = 1
   lastrow = Worksheets("Profile").Range("A65536").End(xlUp).Row
   With ActiveWorkbook.Worksheets("Profile").Range("a1:a" & lastrow)

   For rownum = 1 To lastrow
    Do
       If .Cells(rownum, 1).Value = "Depth (m)" Then
          startrow = rownum
       End If

       rownum = rownum + 1

   If (rownum > lastrow) Then Exit For

   Loop Until .Cells(rownum, 1).Value = ""
   endrow = rownum
   rownum = rownum + 1

   Worksheets("Profile").Range(startrow & ":" & endrow).Copy

   Sheets("data").Select
   Range("A1").Select
   ActiveSheet.Paste

   Next rownum
   End With
   End Sub 
```

如果更改此行，它将起作用：

```
Loop Until .Cells(rownum, 1).Value = "" 
```

对此：

```
Loop Until .Cells(rownum, 1).Value = "Doe (Jane, corrected):" 
```

不幸的是，我不能使用它，因为该文本也会因工作簿而异。

这是我的数据样本：

```
Big Lake
29 October, 2012
Joe & Jill
Blue [Big] Lake, Utah (USA)

OLD meter (#00314)
Depth (m)   T (deg-C)
0   31.21
1   32.64
2   34.70
3   36.76
4   36.92
5   36.92
6   36.12
7   35.47
8   35.05
9   34.32
10  33.96

Doe (Jane, corrected):
N: 8.0m
S: 8.0m 
```

我真正想要复制的是从深度 (m) 到 10 33.96 到新表。我已经选择了一段时间，但无法理解。调试器指向这一行：

```
Worksheets("Profile").Range(startrow & ":" & endrow).Copy 
```

任何帮助都会很棒。谢谢！-苏珊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:13:31.940

您仅在此行中引用行号：

```
Worksheets("Profile").Range(startrow & ":" & endrow).Copy 
```

尝试将其更改为：

```
Worksheets("Profile").Range("A" & startrow & ":B" & endrow).Copy 
```

根据您的要求将列字母更改为适当的列。

**编辑：** 你是对的，我之前给出的答案是不必要的改变。发生的事情是您在实例化它之前引用了 startrow 变量，因为您`Do ... Loop`只会运行到第一个空白行（第 5 行），而“深度”测试直到第 7 行才发生（因此，该`startrow = rownum`行从未运行） . 因此，在 Copy 操作中，您告诉它从第 0 行开始复制。您可以通过更正`Next rownum`语句的位置来解决此问题，如下所示：

```
Sub CopyDepth()
   Dim rownum As Long

   Dim startrow As Long
   Dim endrow As Long
   Dim lastrow As Long
   rownum = 1
   colnum = 1
   lastrow = Worksheets("Profile").Range("A65536").End(xlUp).Row
   With ActiveWorkbook.Worksheets("Profile").Range("a1:a" & lastrow)

   For rownum = 1 To lastrow
     Do
       If .Cells(rownum, 1).Value = "Depth (m)" Then
          startrow = rownum
       End If

       rownum = rownum + 1

       If (rownum > lastrow) Then Exit For

     Loop Until .Cells(rownum, 1).Value = ""
     endrow = rownum
     rownum = rownum + 1
   Next rownum

   Worksheets("Profile").Range(startrow & ":" & endrow).Copy
   Worksheets("data").Range("A1").PasteSpecial
   End With
End Sub 
```

**编辑2：**

```
Sub CopyDepth()
    Dim ws As Worksheet
    Dim rng As Range
    Set ws = Worksheets("Profile")
    Set rng = ws.UsedRange.Find(What:="Depth (m)")
    Range(rng, rng.End(xlToRight).End(xlDown)).Copy
    Worksheets("data").Range("A1").PasteSpecial
End Sub 
```

只要空白行（在此示例中为第 19 行）确实是空白的，这应该可以完成工作。

# javascript - 从JavaScript中的字符串中提取所有数字

> ID：13636997
> 
> 赞同：3
> 
> 时间：2012-11-30T00:00:33.553
> 
> 标签：javascript, regex

我希望能够从 JavaScript 中的字符串中提取所有数字（包括浮点数）。

```
"-5\. -2 3.1415 test 2.4".match(...) 
```

返回

```
["-2", "3.1415", "2.4"] 
```

到目前为止，我有`/[-+]?(\d*\.?\d+)/g`，但这似乎`5`与其他数字一起返回。我想避免这种情况，因为在字符串中“单词”是 5。而不是 5 或 5.0。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T00:03:18.693

如果您不想包含该点，那么前瞻将是有意义的：

```
/[-+]?\d*(\.(?=\d))?\d+/g 
```

另一种选择是将第二个移动`\d+`到括号内：

```
/[-+]?\d+(\.\d+)?/g 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T13:46:58.697

这个问题难以回答的原因是您需要能够检查数字之前或 + 或 - 之前的字符是空格还是行首。

由于 JavaScript 没有能力通过`.match()`在字符串上使用该方法来寻找解决方案，这几乎是不可能的。鉴于此，这是我的解决方案。

```
var extractNumbers = (function ( ) {
    numRegexs = [
            /( |^)([+-]?[0-9]+)( |$)/g,
            /( |^)([+-]?[0-9]+\.[0-9]+)( |$)/g,
            /( |^)([+-]?[0-9]+\.[0-9]+([eE][+-])?[0-9]+)( |$)/g
    ];

    return function( str ) {

        var results = [], temp;

        for( var i = 0, len = numRegexs.length; i < len; i++ ) {

            while( temp = numRegexs[i].exec( str ) ) {
                results.push( temp[2] );
            }
        }

        return results;
    }
}( )); 
```

numRegexs 数组中的正则表达式对应于整数、浮点数和指数数。

演示[**在这里**](http://jsfiddle.net/9UYNA/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-30T02:01:02.000

此 rx 获取以字符串表示的数字，带或不带符号、小数或指数格式 -

**rx=/[+-]?((.\d+)|(\d+(.\d+)?)([eE][+-]?\d+)?)/g**

```
String.prototype.getNums= function(){
    var rx=/[+-]?((\.\d+)|(\d+(\.\d+)?)([eE][+-]?\d+)?)/g,
    mapN= this.match(rx) || [];
    return mapN.map(Number);
}; 
```

var s= '室外-40度无所谓'+

“7朵玫瑰花14.35美元，7艘潜艇1.435e+9美元。”；

**s.getNums();**

/* 返回值：（数组）-40, 7, 14.35, 7, 1435000000 */

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T14:08:16.643

鉴于您的示例字符串在项目之间有空格，我宁愿这样做：

```
var tokens = "-5\. -2 3.1415 test 2.4".split(" ");
var numbers = [];
for( var i = 0 ; i < tokens.length ; i++ )
  if( isNumber( tokens[i]) )
    numbers.push( tokens[i]*1 );
//numbers array should have all numbers

//Borrowed this function from here:
//http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric
function isNumber(n) {
  return !isNaN(parseFloat(n*1)) && isFinite(n*1) && !endsWith(n,".");
}

endsWith = function( s , suffix ) {
  return s.indexOf(suffix, s.length - suffix.length) !== -1;
}; 
```